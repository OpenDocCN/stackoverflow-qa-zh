# StackOverflow 问答 11903000-11903999

# twitter-bootstrap - 使用媒体查询在移动设备上隐藏引导工具提示

> ID：11903001
> 
> 赞同：31
> 
> 时间：2012-08-10T13:45:10.247
> 
> 标签：twitter-bootstrap, responsive-design

我在我的网站上的按钮上使用 Bootstrap 的工具提示，但是在移动设备上查看时，这些工具提示会在第一次单击时触发，这意味着我必须双击按钮。我想防止这些显示在移动设备上，并尝试使用媒体查询来做到这一点。我的代码是：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
{
 .tooltip
 {
  display: none;
 }
} 
```

这会停止显示工具提示，但我仍然需要单击两次才能使按钮起作用。有什么办法可以防止这些工具提示使用媒体查询触发？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-07-09T07:29:01.437

我以不同的方式实现了它；移动和其他设备已`touch`启用，所以我检查了它是否是触摸设备。

```
function isTouchDevice(){
    return true == ("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch);
} 
```

现在，检查是否不是`touch device`触发工具提示：

```
if(isTouchDevice()===false) {
    $("[rel='tooltip']").tooltip();
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-01T13:36:22.860

只需使用 !important 标志，因为工具提示位置是内联样式。

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
    .tooltip {
        display: none !important;
    }
 } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-08T08:41:16.770

要启用工具提示，您必须`$('#example').tooltip(options)`在代码中的某处添加类似内容。

现在，要为移动设备禁用此功能，您可以使用 JavaScript[`window.matchMedia`](https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia)在 JavaScript 中指定媒体查询，因此不为较小的设备启用工具提示。

```
if (!window.matchMedia || (window.matchMedia("(max-width: 767px)").matches)) {

    // enable tooltips
    $('#example').tooltip();
} 
```

移动版 Safari 5 及更高版本（以及其他浏览器）支持 MatchMedia。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T09:52:11.537

我遇到了同样的问题，我在[https://groups.google.com/forum/#!topic/twitter-bootstrap/Mc2C41QXdnI中找到了解决方案](https://groups.google.com/forum/#!topic/twitter-bootstrap/Mc2C41QXdnI)

matchMedia 不支持 IE（在移动设备上不是问题），但也支持 Android 2.2/2.3； [http://caniuse.com/matchmedia](http://caniuse.com/matchmedia)

也可以只使用 window.innerWidth; 并根据相同的值进行检查，例如：

```

```
var isMobile;
var isTablet;
var isDesktop;

function detectScreen(){
    innerW = window.innerWidth;
        isDesktop = false;
        isTablet = false;
        isMobile = false;
        if(innerW >= 768 && innerW <= 979){
            isTablet = true;
        }else if(innerW > 979){
            isDesktop = true;
        }else{
            isMobile = true;
        }
        return innerW;
}

$(document).ready(function($) {
    detectScreen();

    $(window).resize(function() {
        detectScreen();
    });
} 
```

]然后你可以做同样的事情；

```
    如果（！isMobile）{
      初始化工具提示（）；
    }

```

            回答 #5

赞同：0

时间：2015-10-30T10:00:27.940

最简单的方法是添加原生 Bootstrap 类**hidden-xs**并且工具提示不会显示在移动屏幕上。

例子：

```
<span title="Your Tooltip Text" data-toggle="tooltip" data-placement="right" aria-hidden="true" class="glyphicon glyphicon-info-sign hidden-xs"></span>
```

```

# java - 添加方法不在 RandomAccessFile 中添加学生

> ID：11903004
> 
> 赞同：0
> 
> 时间：2012-08-10T13:45:17.953
> 
> 标签：java, arraylist, add, random-access

嘿，我的 randomAccessFile 应用程序没有将学生添加到文件中。我已经使用 arrayList 设置了一个学生存储，并且添加的学生正在添加到存储中，但它没有显示在文件“ContactDetails.txt”中。任何人都可以看到有什么问题吗？

这是我的代码：MainApp

```
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.Scanner;

public class MainApp
{
//---------------------------------------------------------------------------------------
//  The Scanner is declared here for use throughout the whole MainApp.
//---------------------------------------------------------------------------------------
    private static Scanner keyboard = new Scanner(System.in);

    public static void main(String[] args) throws Exception 
    {
        new MainApp().start();

    }
    public void start()throws Exception 
    {
        StudentStore details = new StudentStore();
        Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
        Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
        Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
        Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
        Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com");
        details.add(a);
        details.add(b);
        details.add(c);
        details.add(d);
        details.add(e);
        //details.print();

        RandomAccessFile file = new RandomAccessFile("ContactDetails.txt","rw");
        //getBytes() returns an array of bytes.
        //Because i have put the store in a static Array.(I done this because i could find no other
        //Simple way to write a Student Object.)
        //None of the methods of the RandomAccessFile write class worked with this.
        //Student[] students = {a,b,c,d,e};
        details.write(file);
        //details.readAll(file);
        int choice;
        System.out.println("Welcome to the Company Database.");
        do 
        {
            choice = MenuMethods.getMenuChoice( "1.\tView" +
                                                "\n2.\tAdd"+ 
                                                "\n3.\tDelete" + 
                                                "\n4.\tDelete All " + 
                                                "\n5.\tEdit"+ 
                                                "\n6.\tSearch" + 
                                                "\n7.\tStore" + 
                                                "\n8.\tExit", 8,
                                                "Please enter your choice:", "Error [1,8] Only");
        // String temp = keyboard.nextLine(); This prevented entering the choice.
        //---------------------------------------------------------------------------------------
//          Name:        Switch Statement.
//          Description: This is used for a menu system.
        //---------------------------------------------------------------------------------------
                    switch (choice) 
                    {
        //---------------------------------------------------------------------------------------
//          Name:        Case 1: View All
//          Description: Choice 1 is to view all employee's in the store.
        //---------------------------------------------------------------------------------------
                    case 1:
                        System.out.println("View All");
                        details.readAll(file);
                        break;
        //---------------------------------------------------------------------------------------
//          Name:        Case 2: Add
//          Description: Choice 2 is to add an employee to the store.
        //---------------------------------------------------------------------------------------
                    case 2:
                        System.out.println("Add");
                        Student student = MenuMethods.userInput();
                        details.add(student);
                        break;
        //---------------------------------------------------------------------------------------
//          Name:        Case 3: Delete by Name.
//          Description: Choice 3 gives the user an option to delete an employee by name.
        //---------------------------------------------------------------------------------------
                    case 3:
                        System.out.println("Delete by Name.");
                        //Employee employeeDelete = MenuMethods.userInputByName();
                        //Store.searchByName(employeeDelete.getEmployeeName());
                        //Store.remove(employeeDelete.getEmployeeName());
                        break;
        //---------------------------------------------------------------------------------------
//                      Name:        Case 4: Delete All.
//                      Description: Choice 4 gives the user a choice to delete all employee's in the store.
        //---------------------------------------------------------------------------------------
                    case 4:
                        System.out.println("Delete All.");
                        //Store.clear();

                        break;
        //---------------------------------------------------------------------------------------
//                      Name:        Case 4: Edit.
//                      Description: Choice 4 gives the user an option to edit the employee's in the store.
//                                   This consists of changing the employee's name,id and e-mail address.
        //---------------------------------------------------------------------------------------
                    case 5:
                        System.out.println("Edit");

                        break;

        //---------------------------------------------------------------------------------------
//          Name:        Case 6: Search.
//          Description: Choice 6 gives the user 2 options: Search by name and Search by email.
//                       Search will run through the store and output the employee match the user inputs.
        //---------------------------------------------------------------------------------------
                    case 6:

                        break;
        //---------------------------------------------------------------------------------------
//          Name:        Case 7: Store.
//          Description: Choice 7 gives the user an option to copy and read a store
//                       using read and write class from Java.
        //---------------------------------------------------------------------------------------
                    case 7:

                        break;
        //---------------------------------------------------------------------------------------
//          Name:        Case 8: Exit.
//          Description: Choice 8 will exit the application.
        //---------------------------------------------------------------------------------------
                    case 8:
                        System.out.println("Exit");

                        break;
                    }

                } while (choice != 8);

        file.close();
    }

 } 
```

学生商店

```
//---------------------------------------------------------------------------
//Imports.
//---------------------------------------------------------------------------   
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.ArrayList;
import java.util.List;
//---------------------------------------------------------------------------   

public class StudentStore
{
//---------------------------------------------------------------------------
//ArrayList declaration.
//---------------------------------------------------------------------------
    List<Student> students = new ArrayList<Student>();
//---------------------------------------------------------------------------
//Name:          Add method.
//Description:   Adds a student to the ArrayList.
//---------------------------------------------------------------------------
    public void add(Student student) 
    {
        students.add(student);
    }
//---------------------------------------------------------------------------
//Name:          DeleteAll method.
//Description:   Delete's everything in the ArrayList.
    //---------------------------------------------------------------------------
     public void deleteAll()
     {
           students.clear();
     }
//---------------------------------------------------------------------------
//Name:          Print method.
//Description:   Prints out the contents of the ArrayList.
//---------------------------------------------------------------------------
    public void print() 
    {
        for (int i = 0; i < students.size(); i++) 
        {
          Student a = students.get(i);
            System.out.println(a.toString());
        }
    }
    public int size()
    {
        return (students == null) ? 0 : students.size();
    }
    public void write(RandomAccessFile file) throws IOException
    {
        for (Student s: students)
        {
            byte[] bytes = s.toString().getBytes();
            for(byte byteWrite : bytes)
            {
                file.writeByte(byteWrite);
            }
        }

    }

    public void readAll(RandomAccessFile file) throws IOException
    {
        final int Record_Length = 30;
        int recordNumber = 0;
        file.seek((recordNumber) * Record_Length);

        String code ="";
        for(int i = 0; i < 30; i++)
        {
        code += file.readLine() + "\n";
        }
        System.out.println(code);
    }

} 
```

菜单方法

```
//---------------------------------------------------------------------------------------
//  Name:           Imports. 
//  Description:    To allow the use of different Java classes.
//---------------------------------------------------------------------------------------
import java.util.Scanner;
//---------------------------------------------------------------------------------------

public class MenuMethods 
{
    private static Scanner keyboard = new Scanner(System.in);
//---------------------------------------------------------------------------------------
//  Methods for the Company Application menu.
//---------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------
//  Name:           getMenuChoice.
//  Description:    Method for validating the choice.
//---------------------------------------------------------------------------------------
    public static int getMenuChoice(String menuString, int limit,String prompt, String errorMessage) 
    {
        System.out.println(menuString);
        int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
        return choice;
    }

//---------------------------------------------------------------------------------------
//  Name:        inputAndValidateInt.
//  Description: This method is used in the getMenuChoice method.
//---------------------------------------------------------------------------------------
    public static int inputAndValidateInt(int min, int max, String prompt,String errorMessage) 
    {
        int number;
        boolean valid;
        do 
        {
            System.out.print(prompt);
            number = keyboard.nextInt();
            valid = number <= max && number >= min;
            if (!valid) 
            {
                System.out.println(errorMessage);
            }
        } while (!valid);
        return number;
    }

//---------------------------------------------------------------------------------------
//  Name:        userInput
//  Description: This method is used in the MainApp to give the user capability to enter
//               the details when adding details of an employee into the store.
//---------------------------------------------------------------------------------------
    public static Student userInput() 
    {
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the Student Name:");
        String studentName = keyboard.nextLine();
        System.out.println("Please enter the Student ID:");
        String studentId = keyboard.nextLine();
        System.out.println("Please enter the Student E-mail address:");
        String studentEmail = keyboard.nextLine();
        System.out.println("Please enter the Student telephone number:");
        String studentTelephoneNumber = keyboard.nextLine();
        return s = new Student(studentName, studentId, studentEmail,studentTelephoneNumber);

    }

//---------------------------------------------------------------------------------------
//  Name:        userInputByName.
//  Description: This method is used in the MainApp to give the user capability to search by name.
//---------------------------------------------------------------------------------------
    public static Student userInputByName() 
    {
        // String temp is for some reason needed. If it is not included
        // The code will not execute properly.
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the Student Name:");
        String studentName = keyboard.nextLine();

        return s = new Student(studentName);

    }

//---------------------------------------------------------------------------------------
//  Name:        userInputByEmail
//  Description: This method is used in the MainApp to give the user capability to search by email.
//---------------------------------------------------------------------------------------
    public static String userInputByEmail() 
    {
        // String temp is for some reason needed. If it is not included
        // The code will not execute properly.
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the StudentEmail:");
        String studentEmail = keyboard.nextLine();
        // This can use the employeeName's constructor because java accepts the
        // parameters instead
        // of the name's.
        return studentEmail;

    }
//---------------------------------------------------------------------------------------
} 
```

学生

```
import java.io.Serializable;

public class Student implements Serializable
{
//---------------------------------------------------------------------------
//  Class Variables.
//---------------------------------------------------------------------------   
    private String studentName;
    private String studentId;
    private String studentTelephoneNumber;
    private String studentEmail;
//---------------------------------------------------------------------------
//  Constructor.
//---------------------------------------------------------------------------   
    public Student(String studentName, String studentId,String studentTelephoneNumber, String studentEmail) 
    {
        this.studentName = studentName;
        this.studentId = studentId;
        this.studentTelephoneNumber = studentTelephoneNumber;
        this.studentEmail = studentEmail;
    }
//---------------------------------------------------------------------------------------
//  Overloading the constructor for the use with userInputByName method.
//---------------------------------------------------------------------------------------
    public Student(String studentName) 
    {
        this.studentName = studentName;
    }
//---------------------------------------------------------------------------
//  Getters.
//---------------------------------------------------------------------------
    public String getStudentName()
    {
        return studentName;
    }
    public String getStudentId() 
    {
        return studentId;
    }
    public String getStudentTelephoneNumber() 
    {
        return studentTelephoneNumber;
    }
    public String getStudentEmail() 
    {
        return studentEmail;
    }
//---------------------------------------------------------------------------
//  Setters.
//---------------------------------------------------------------------------
    public void setStudentName(String studentName) 
    {
        this.studentName = studentName;
    }
    public void setStudentId(String studentId) 
    {
        this.studentId = studentId;
    }
    public void setStudentTelephoneNumber(String studentTelephoneNumber) 
    {
        this.studentTelephoneNumber = studentTelephoneNumber;
    }
    public void setStudentEmail(String studentEmail) 
    {
        this.studentEmail = studentEmail;
    }
//---------------------------------------------------------------------------
//  toString.
//---------------------------------------------------------------------------
    public String toString() 
    {
        return "---------------------------Student--------------------------- " +
                "\nStudent Name:" + studentName + 
                "\nStudent Id:"+ studentId + 
                "\nStudent Telephone Number:"+ studentTelephoneNumber + 
                "\nStudent Email:" + studentEmail +"\n\n";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:12:35.753

请发布学生类代码是否覆盖学生类中的 toString() 方法

我已经测试了你的代码，如果我输入 1，它将打印你在 main 方法中输入的所有学生信息。但是如果我输入2，在输入Student信息后，你的代码只是将Arraylist中的信息添加到内存中，而不是输出到文件中。那么我输入1，它不会输出我之前输入的新学生信息。

我认为您可能需要将新的学生信息输出到文件中。

编辑

```
case 2:
                        System.out.println("Add");
                        Student student = MenuMethods.userInput();
                        details.add(student);
                        break; 
```

至

```
case 2:
                        System.out.println("Add");
                        Student student = MenuMethods.userInput();
                        details.add(student);
file.write(student.toString().getBytes());
                    break; 
```

以及更多您刚刚阅读了所有方法更改中的文件的前 30 行

```
public void readAll(RandomAccessFile file) throws IOException
    {
        final int Record_Length = 30;
        int recordNumber = 0;
        file.seek((recordNumber) * Record_Length);

        String code ="";
        for(int i = 0; i < 30; i++)
        {
        code += file.readLine() + "\n";
        }
        System.out.println(code);
    } 
```

至

```
public void readAll(RandomAccessFile file) throws IOException
    {
        file.seek(0);

        String code;
while((code=file.readLine())!=null)
        System.out.println(code);
    } 
```

# java - Groovy/Java 可以隐式转换为子类（或具有自定义隐式转换）吗？

> ID：11903007
> 
> 赞同：2
> 
> 时间：2012-08-10T13:45:40.743
> 
> 标签：java, types, groovy, casting

我在顶部使用带有 Groovy + Grails 的 MongoDB。虽然 MongoDB Java API 非常冗长，但 Groovy 在这方面提供了帮助，因为它能够像这样编写 HashMap：

```
def map = [foo: "bar", one: "two"] 
```

在 MongoDB 中，对象作为 BasicDBObjects 添加到数据库中，它扩展了 HashMap，因此我可以在 Groovy 中编写如下内容：

```
things.save([ foo: "bar" ] as BasicDBObject) 
```

虽然我不知道 BasicDBOBject 演员表来自哪里（它是内置的，因为 BasicDBObject 已经从 HashMap 继承了吗？），如果我不必每次都添加显式演员表我想坚持一个目的。

Groovy/Java 是否有办法使超类-子类强制转换为隐式，或者至少定义自定义隐式强制转换以避免在任何地方使用 as 运算符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T20:00:02.840

好吧，如果您在使用 Groovy，为什么不进行一些元编程呢？:-)

```
things.metaClass.save = { Map map -> delegate.save( map as BasicDBObject ) } 
```

这个想法很简单：我们在`things`对象上添加一个新方法，它是一个 save() 方法，它接收一个 Map 并将调用重定向到相应的`things.save(BasicDBObject)`转换。

如果需要，可以直接将此方法添加到事物的类中：

```
ThingsClass.metaClass.save = { Map map -> delegate.save( map as BasicDBObject ) } 
```

我写了下面的脚本试图模拟你所描述的，我希望我做对了：

```
class BasicDBObject extends HashMap { }

class Mongo {
    def save(BasicDBObject obj) {
        println "saving $obj"
    }
}

def mongo = new Mongo()

// here it will fail
try {
    mongo.save uno:1, dos:2
    assert false
} catch (e) { }

mongo.metaClass.save = { Map map -> delegate.save( map as BasicDBObject ) }

// and here it succeeds ;-)
mongo.save uno:1, dos:2 
```

另请注意，它不需要方括号和括号。冒号放弃了地图的东西

对于该`as`方法，它是一个可以通过 重载的运算符`.asType(Class)`，我相信它可以工作，因为它尝试实例化一个新`BasicDBObject`的，将映射作为构造函数中的参数传递。可以在以下链接的第 316 行附近找到它：

[https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java)

# google-api - Google PHP API with Fusion Tables - 尝试使用我自己的表格的 PHP 更新单元格值。500 服务器错误

> ID：11903010
> 
> 赞同：0
> 
> 时间：2012-08-10T13:45:50.027
> 
> 标签：google-api, google-fusion-tables, google-api-client

我一直在到处寻找有关使用 Google PHP API 的一些文档，这与我设法获得的一样接近。在“sql”函数中，Google API 代码中有一行至关重要“__call('sql'....)”——但这会导致 500 服务器错误。任何人都可以帮我解决我可能出错的地方吗？我最初打算通过返回“401 未授权”的 Javascript 调用 UPDATE 函数 - 但在尝试让 oauth 为服务帐户工作时也遇到了大问题。基本上，我试图允许网站 CMS 用户更新我自己表的特定 ROWID 列中的值，并且不需要访问他们的个人数据/表等。

提前致谢！

```
require_once 'google-api-php-client-read-only/src/Google_Client.php';
require_once 'google-api-php-client-read-only/src/contrib/Google_FusiontablesService.php';
ini_set("DISPLAY_ERRORS",1);
error_reporting(E_ALL);

// Set your client id, service account name, and the path to your private key.
// For more information about obtaining these keys, visit:
// https://developers.google.com/console/help/#service_accounts
$CLIENT_ID = '278066061539-e80g63vcqkaj28frfn6g32vbll38onsn.apps.googleusercontent.com';
$SERVICE_ACCOUNT_NAME = '278066061539-e80g63vcqkaj28frfn6g32vbll38onsn@developer.gserviceaccount.com';

// Make sure you keep your key.p12 file in a secure location, and isn't
// readable by others.
$KEY_FILE = 'scriptonly/2655a395f392632a75bcdc139c47aa70d20d71f1-privatekey.p12';

$client = new Google_Client();
$client->setApplicationName("SIE Stop Smoking Services");

// Set your cached access token. Remember to replace $_SESSION with a
// real database or memcached.
session_start();
if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

// Load the key in PKCS 12 format (you need to download this from the
// Google API Console when the service account was created.
$key = file_get_contents($KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    $SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/fusiontables'),
    $key)
);

$client->setClientId($CLIENT_ID);

$client->getAccessToken();
$service = new Google_FusiontablesService($client);

$service->query->sql("UPDATE 1z3anmPv-gPfB-MQGy_qCGWabBJVCk1BCoda0qXs SET SSS_Quality='1' WHERE ROWID='4'"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:31:12.307

我刚刚将我的 google-api-php-client 更新到最新版本 (r476) 并创建了一个[UPDATE 示例](https://github.com/odi86/GFTPrototype/blob/master/examples/php/UpdateTable.php)，它[适用于我](http://gft.rdmr.ch/examples/php/UpdateTable.php)。我无法在您的代码中发现明显的错误。

您确定服务帐户有权更新表吗？请检查是否`278066061539-e80g63vcqkaj28frfn6g32vbll38onsn@developer.gserviceaccount.com`具有“可以编辑”权限。

# javascript - 如何在控件缩放下在openlayers上添加一些图像

> ID：11903012
> 
> 赞同：0
> 
> 时间：2012-08-10T13:45:53.050
> 
> 标签：javascript, openlayers

我是openlayers的新手，我只想在openlayers上添加一些控制放大/缩小的图像，如指南针图像或任何图像位置在IMG文件夹内的东西。我可以在openlayers上使用它的代码到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:56:56.287

查看此示例中的第二张地图：[http](http://dev.openlayers.org/releases/OpenLayers-2.13.1/examples/zoom.html) ://dev.openlayers.org/releases/OpenLayers-2.13.1/examples/zoom.html （对 ZoomControl 使用自定义标记）。

# ruby-on-rails - 使用 Koala 和 Rails 将视频发布到 Facebook 应用程序

> ID：11903014
> 
> 赞同：1
> 
> 时间：2012-08-10T13:46:02.987
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, oauth, koala

我正在尝试将用户使用 Koala gem 上传的视频发布到 Facebook 应用程序墙上。

当我尝试使用发布视频时

```
put_connections("APP_ID", "APP_NAME:upload", video: "VIDEO_FILE") 
```

我收到此错误：

```
OAuthException: (#240) Requires a valid user is specified (either via the session or via the API parameter for specifying the user. 
```

这是我的文件：

## 视频控制器.rb

```
class VideosController < ApplicationController
    def index
        @videos = Video.all
    end

    def new 
        @video = Video.new
    end

    def show
        @video = Video.find params[:id]
    end

def upload
        @video = Video.create params[:video]
        if @video
             @upload_info = save_video_new_video_url(video_id: @video.id)
        else
             render "/videos/new"
        end
  end

def save_video
    @video = Video.find params[:id]
    if params[:id]
        Video.begin_upload current_user.id, params[:file]
    else
        Video.delete_video @video 
    end
  redirect_to videos_path, :notice => "video successfully uploaded"
end

end 
```

## 视频.rb

```
class Video < ActiveRecord::Base

    scope :completes,   where(:is_complete => true)
    scope :incompletes, where(:is_complete => false)

    def self.begin_upload user_id, video_file
        user = User.find user_id
        video = user.facebook.put_connections(FB_CONFIG['app_id'], "thecomfortmovement:upload", video: File.expand_path(video_file.tempfile.to_path.to_s))
    end

    def self.delete_incomplete_videos
        self.incompletes.map{|r| r.destroy}
    end

    def self.delete_video video
        vid = Video.find video
        vid.destroy
     end

end 
```

我正在使用omniauth-facebook gem 对用户进行身份验证，如此截屏视频所示：[http ://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

有谁知道我为什么会收到这个错误？我肯定仍然登录，这应该意味着会话和 oauth 令牌仍然有效。有什么建议么？

## 更新

这是我的用户模型

```
class User < ActiveRecord::Base
    def self.from_omniauth(auth)
        where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
        user.provider = auth.provider
        user.uid = auth.uid
        user.name = auth.info.name
        user.email = auth.info.email
        user.oauth_token = auth.credentials.token
        user.oauth_expires_at = Time.at(auth.credentials.expires_at)
        user.save!
     end
   end

   def facebook
        @facebook ||= Koala::Facebook::API.new(oauth_token)
   end

end 
```

## 更新 2

这是我用来设置和删除会话的控制器：

```
class SessionsController < ApplicationController

    def create
        user = User.from_omniauth(env["omniauth.auth"])
        session[:user_id] = user.id
        redirect_to root_url
    end

    def destroy
        session[:user_id] = nil
        redirect_to root_url
    end

end 
```

# ios - Xcode - 在 UITableView 上方包含一个 UIView

> ID：11903015
> 
> 赞同：1
> 
> 时间：2012-08-10T13:46:20.990
> 
> 标签：ios, xcode, uitableview, cocoa-touch, uikit

我有一个管理 UITableView 的 TableViewController。现在我想制作一个标题菜单（默认情况下与导航栏中的菜单不同）和搜索栏（也与默认菜单不同）。问题是我尝试将 UIView 放在 TablewView 上方，但我不能，它总是进入 tableview 内部（在故事板中）。

有可能做我想做的事吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:52:15.983

您将需要使用除`UITableViewController`.

子类`UIViewController`化并向其中添加一个 tableview，但`y`位置为`>0`. 现在，将您的`UIViewController`子类设置为`delegate`and `dataSource`of that`UITableView`并实现所有必要的方法。（参考[这里](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)和[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)）

您将能够更改其布局`tableView`并将您想要添加的任何视图添加到`self.view`

# windows - 如何设置 GraphicsDevice.GraphicsProfile

> ID：11903016
> 
> 赞同：0
> 
> 时间：2012-08-10T13:46:21.337
> 
> 标签：windows, xna, xamarin.android, monogame

在经典的 XNA 应用程序中，该值是通过应用程序属性设置的。

默认情况下，此值设置为`HiDef`，至少在我当前使用的机器上。但它必须设置`Reach`为运行。

我的问题是我没有找到任何方法来使用monogame有效地改变这个值。属性窗口显然与 XNA 不同，我没有找到任何配置值。

更改代码、`Game`构造函数或`LoadContent`方法中的值并不能解决我的问题。

* * *

PS：我认为是由此引起的原始问题`GraphicsDevice.GraphicsProfile`是[https://stackoverflow.com/questions/11900957/monogame-draw2d-sample-accessviolation-exception](https://stackoverflow.com/questions/11900957/monogame-draw2d-sample-accessviolation-exception)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:34:56.083

在构造函数方法中，为您的 GraphicsDeviceManager 创建新的事件处理程序：

```
graphics.PreparingDeviceSettings += new EventHandler<PreparingDeviceSettingsEventArgs (graphics_PreparingDeviceSettings); 
```

（默认处理程序是通过在 += 之后双击 Tab 创建的）

然后在事件处理程序中添加以下代码

```
void graphics_PreparingDeviceSettings(object sender, PreparingDeviceSettingsEventArgs e)
{
e.GraphicsDeviceInformation.GraphicsProfile = GraphicsProfile.Reach;
} 
```

# java - JPa/Hibernate/JUnit：如何在 ToString 中使用正确的反射方法？

> ID：11903018
> 
> 赞同：0
> 
> 时间：2012-08-10T13:46:28.543
> 
> 标签：java, hibernate, jpa, junit, apache-commons-lang

我想通过 JUnit 在 Spring/JPA/Hibernate 架构中测试我的服务。

暂时一切正常，但我使用了 ToString 的覆盖方法来验证内容：

```
@Override
public String toString() {
    return ToStringBuilder.reflectionToString(this, 
                    ToStringStyle.MULTI_LINE_STYLE);
} 
```

它使用库 commons.lang。结果是正确的，但是当我检查具有关系的实体（为@OneToMany 或@ManyToMany 设置）时，它很快变得不可读。

任何人都知道有一种方法可以使 JUnit 测试结果在控制台中更具可读性吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:28:31.653

我建议使用[Lombok](http://projectlombok.org)注释[`@EqualsAndHashcode`](http://projectlombok.org/features/EqualsAndHashCode.html)和[`@ToString`](http://projectlombok.org/features/ToString.html).

`@EqualsAndHashcode`有助于避免错误并`@ToString`为`toString()`.

您可以排除不需要的字段：

```
@EqualsAndHashCode(exclude={"someManyToManyCollection", "dontMather"})
@ToString(exclude={"someManyToManyCollection", "dontMather"}) 
```

或让他们仅使用您感兴趣的字段：

```
@EqualsAndHashCode(of={"id", "someKey"})
@ToString(of={"id", "someKey"}) 
```

这应该可以让您获得可读性，`toString()`并且可以将对象与`yourEntity.equals(otherEntity)`测试中的对象进行比较。

# xpages - 部分刷新的简单（我认为）XPages 问题

> ID：11903020
> 
> 赞同：0
> 
> 时间：2012-08-10T13:46:39.030
> 
> 标签：xpages

我从另一个问题中复制了这段代码，只是为了让一些简单的东西可以工作，但它仍然无法工作。无论我使用 IE、Firefox 还是 Safari，这段代码都不会进行部分刷新。是否有一些我需要设置的全局设置或者我错过了一些非常简单的东西？提前致谢。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:radioGroup id="radioGroup1">
    <xp:selectItem itemLabel="One"></xp:selectItem>
    <xp:selectItem itemLabel="Two"></xp:selectItem>
    <xp:selectItem itemLabel="Three"></xp:selectItem>
    <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="panelRadioVal" rendered="#{javascript:!context.getUserAgent().isIE()}" />
    <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="panelRadioVal" rendered="#{javascript:context.getUserAgent().isIE()}" />
</xp:radioGroup>
<xp:panel id="panelRadioVal">
    <xp:inputText value="#{javascript:getComponent('radioGroup1').getSubmittedValue()}" />
</xp:panel>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:19:34.643

我猜你想要`.getValue()`而不是`.getSubmittedValue()`

这将在 inputText 中显示项目。

# php - 将数据写入数据库表问题

> ID：11903022
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:46:45.907
> 
> 标签：php, sql, drupal

我有必须将一些数据写入数据库表的函数，但是在函数完成后，我没有在我的 phpmyadmin 中看到添加的信息。这是我要运行的代码

```
function q_cart_add($node) {
    global $user;
    //drupal_set_title('Добавление товара в корзину');
    drupal_set_title('Товар добавлен в корзину');
    if (!user_access('add to cart'))
        return '<p>У вас не достаточно прав для добавления в корзину</p>';
    if ($node->type != 'kartochka')
        return '<p>В корзину можно положить только товар</p>';
    $added = false;
    if ($user->uid) {
        $added = db_result(db_query('SELECT `added` FROM {q_cart} WHERE `uid` = %d OR `nid` = %d', $user->uid, $node->nid));
        if (!$added) {
            db_query('INSERT INTO {q_cart} (`uid`, `nid`, `added`) VALUES (%d, %d, %d)', $user->uid, $node->nid, time());
        }
    } else {
        foreach (isset($_COOKIE['q_cart']) && ($cart = json_decode($_COOKIE['q_cart'])) ? $cart : array() as $item)
            if ($item->nid == $node->nid) {
                $added = true;
                break;
            }
        if (!$added) {
            $cart[] = array(
                'nid'   => $node->nid,
                'added' => time(),
            );
            setcookie('q_cart', json_encode($cart), strtotime('+1 week'), '/');
        }
    }
    //if (!$added) return '<p>Товар добавлен в корзину.</p>'.l('Корзина', 'cart', array('attributes' => array('target' => '_top', 'class' => 'button-link'))).'<a href="javascript://" onclick="parent.Lightbox.end(\'forceClose\');" class="button-link">Позже</a>';
    if (!$added) {
        drupal_add_js('$(document).ready(function(){parent.document.getElementById("bottomNavClose").style.display = "none";parent.document.getElementById("lightbox").style.top = "200px";});', 'inline');
        return l('Корзина', 'cart', array('attributes' => array('target' => '_top', 'class'  => 'button-link'))) .
                '<a href="/node/' . $node->nid . '" target ="_top" class="button-link">Позже</a>';
        //'<a href="javascript://" onclick="parent.Lightbox.end(\'forceClose\');" class="button-link">Позже</a>';
    } else {
        return '<p>Товар уже есть в вашей корзине.</p>';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:49:02.817

请将 db_query 更改为 mysql_query 并添加或死亡 (mysql_error())。它应该解释为什么添加失败。

例如：mysql_query('INSERT INTO {q_cart} ( `uid`, `nid`, `added`) VALUES ('.$user->uid.', '.$node->nid.', '.time().')') 或 die( mysql_error());

# c - 无法理解 C 中的 unsigned int 类型

> ID：11903028
> 
> 赞同：4
> 
> 时间：2012-08-10T13:47:15.193
> 
> 标签：c, types, int, unsigned-integer

我开始用 C 语言编程，但在理解我得到的一些结果时遇到了问题。我将代码粘贴在这里：

```
#include <stdio.h>
unsigned int main(void)
{
    unsigned int x = 0;

    printf("%u\n",x-1);
    return 0;
} 
```

终端返回 4.294.967.295，我不明白为什么。我知道这个值是 a 的最大值`unsigned int`，但实际上我期待编译器发出一些警告，说我必须使用`int`类型而不是 an，`unsigned int`因为结果是否定的。无论如何，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:49:45.517

当您使用无符号类型时，所有位都用于表示非负值（即> = 0）。将此视为环绕的值，因此当您递减到低于下限 (0) 时，您会环绕到最大值（32 位，2^32 - 1）。

另外，请注意您没有为 variable*分配*负值`x`，您只是提供了一个从中减去 1 的表达式。IE，

```
x-1 
```

对比

```
x = x - 1; 
```

尽管您是否会收到关于此的警告可能取决于编译器和设置的警告级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:50:04.040

它是固定位数 (32) 和[二进制补码](http://en.wikipedia.org/wiki/Two_complement)，让您来到这里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:52:05.370

`unsigned int`顾名思义，没有任何迹象。

`unsigned int`值表示为 32 位值，因此当您减去 1 时，它会从 0x00000000 翻转到 0xFFFFFFFF，从而得到 4294967295。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:02:59.370

C 标准说所有无符号算术都发生在模 2^N 范围内，其中 N 是类型中的位数。因此，在无符号算术中从 0 中减去 1 不会导致 -1，而是会导致 UINT_MAX。

将无符号值视为一个环，其中 0 粘在 UINT_whatever 旁边。无论你是加、减、移位、乘，甚至是求反，你都不会离开戒指。所以你完全可以做类似的事情

```
 unsigned int x = -1;    /* Assigns UINT_MAX. */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T13:49:35.563

无符号表示您只有正值。计算机按照一些规则将数字存储为二进制。当您执行 0 - 1 时，您将获得最大的 int 值。您可以在这里阅读更多相关信息：[http ://en.wikipedia.org/wiki/Signed_number_representations](http://en.wikipedia.org/wiki/Signed_number_representations)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T13:50:52.703

因为`unsigned int`不能存储负整数。

请阅读有关补码和二进制复数的信息。

最高位与其他位一起被设置，然后被解释为正数，这是怎么回事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T13:51:15.030

您不会收到错误消息，因为编译器无法知道您将来会做什么。

# java - XML 到对象的转换

> ID：11903030
> 
> 赞同：2
> 
> 时间：2012-08-10T13:47:21.557
> 
> 标签：java, xml

我们可以使用其中任何一种（SAX、DOM、STAX、XSTREAM）将 XML 转换为对象。请告诉我，选择其中之一的标准是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:56:43.480

Marco Tedone 的这个基准比较可能会帮助您选择一种解析方法。
[Java中的XML解组基准：JAXB vs STax vs Woodstox](http://java.dzone.com/articles/xml-unmarshalling-benchmark)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:57:03.017

SAX 和 DOM 是不同的样式解析器。它们之间的主要区别在于 DOM 会将整个文档加载到内存中并允许您对其执行操作（例如 XPath 查询）。SAX 将解析 XML 文档并回调到您的代码中。

作为一般的经验法则，如果您要问的话，我认为 DOM 一开始可能更容易使用，并且可能不会成为问题，除非您需要将巨大的 XML 文档加载到内存中。

如果您希望将 XML 转换为 Java 对象，那么有一些框架可以为您完成这项工作，并抽象出 XML 解析层。我过去使用过 Castor，但可能有更新的框架可以通过快速的 Google 找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T20:05:03.443

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是用于将域对象转换为 XML 或从 XML 转换的 Java 标准。从 Java SE 6 开始，JDK/JRE 中包含一个实现。还有其他可用的开源实现（我是[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)负责人）。

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

既然你提到了 XStream，下面是我写的一篇比较 JAXB 和 XStream 的文章：

*   [http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-xstream.html](http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-xstream.html)

**DOM**是一种内存数据结构，将 XML 数据表示为`Node`对象树。有`Node`代表元素、属性、文本等的扩展。

**SAX/StAX**是非常轻量级的 API，允许您处理非常大的 XML 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:19:50.263

DOM 解析器是树建模的。它通常会根据 XML 文件中的嵌入结构为 XML 文档构建一个完整的树。DOM 的优点是您可以随机访问任何 XML 节点、它们的子节点、兄弟节点以及属性。显然，缺点是这种方法会消耗过多的 RAM，因为它会尝试将所有 XML 数据加载到内存中。

至于 SAX，它是基于事件的。它以流的形式读取 XML 数据，当某些事件（文档开始/结束、遇到的打开/关闭标签等）发生时，您可以覆盖这些函数。当您处理大型 XML 数据时，此解析器的功能要强大得多。但是，正如您可以猜到的，当**流数据**流走时，您永远无法将它们取回。因此，SAX 解析器不可能进行随机访问。

关于 StAX，与 SAX 和 DOM 相比，它是一个相对较新的模型，事实上，它被设计为之前两个模型之间的中间值。它使您能够读取和写入 XML 文档。StAX 的思想是保持 SAX 的流特性。但是这个**流**与 SAX 的流不同。我们称之为**拉流**，而对于 SAX，它是**推流**。在推流模型中，解析器无论客户端当时是否准备好使用它，解析器都会发送数据。相反，只有当我们的应用程序准备好使用数据时，拉流模型才会明确要求 XML 数据。

在我看来，StAX 是最好的选择，但 DOM 和 SAX 也可能是了解优缺点的良好开端。

**注意**：由于我的知识有限，我对**XSTREAM**了解不多。希望其他人可以帮助你！

# c++ - 如何删除 IPropertyStorage 自动添加的 LOCALE 属性？

> ID：11903031
> 
> 赞同：2
> 
> 时间：2012-08-10T13:47:24.583
> 
> 标签：c++, ipropertystorage

根据[IPropertyStorage::WriteMultiple 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379985%28v=vs.85%29.aspx)的备注部分...

> 创建新属性集时，特殊代码页（属性 ID 1）和区域设置 ID（属性 ID 0x80000000）属性会自动写入属性集。

但是，我希望我的 PropertySet 省略 LOCALE ID。我努力了

```
specs[0].ulKind = PRSPEC_PROPID;
specs[0].propid = PID_LOCALE;
//specs[0].lpwstr = 0;
hr = pPropStorage->DeleteMultiple(1, specs); 
```

但这失败了

> 0x80030057 无效参数错误

如何省略这个不需要的属性 ID？我试过`IPropertyStorage::Commit()`前后做一个。但是调用时也会产生同样的错误`DeleteMultiple()`。

注意：我尝试过使用和不使用 specs[0].lpwstr = 0; 但这很愚蠢，因为它是与 propid 的“联合”，所以写它们都改变了第一个。但是仅设置 propid = PID_LOCALE 时仍然失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:26:53.070

尝试将 DeleteMultiple 放在 Create 之后。

# asp.net - 网站发布显示/的索引

> ID：11903032
> 
> 赞同：0
> 
> 时间：2012-08-10T13:47:25.317
> 
> 标签：asp.net, visual-studio-2010, web-applications

我已经使用 VS 2010 通过发布 web 选项发布了一个网站到一个 ftp 站点。它表明发布已成功，但是当我访问该站点时，我看到“索引/”而不是站点本身。要运行的默认页面是 default.aspx 并且它全部都是小写的，因为我看到关于这个问题的建议很少。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:10:54.077

听起来您在 IIS 中打开了目录浏览，请在 google 上查看这些搜索结果 - 根据您拥有的 IIS 版本，您需要找到“禁用目录浏览”选项

[https://www.google.co.uk/webhp?rlz=1C1DVCL_enGB455GB455&sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&rlz=1C1DVCL_enGB455GB455&sclient=psy-ab&q=turn+off+directory+browsing+IIS&oq=turn+关闭+目录+浏览+IIS&gs_l=hp.3..0j0i30l3.3079.14321.0.14701.40.17.9.10.10.1.231.2502.3j10j4.17.0...0.0...1c.BCb_w6c0oBI&pbx=1&bav=on.2,or.r_gc .r_pw.r_cp.r_qf.&fp=99b0cee94ed2fe06&ion=1&biw=1527&bih=871](https://www.google.co.uk/webhp?rlz=1C1DVCL_enGB455GB455&sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&rlz=1C1DVCL_enGB455GB455&sclient=psy-ab&q=turn+off+directory+browsing+IIS&oq=turn+off+directory+browsing+IIS&gs_l=hp.3..0j0i30l3.3079.14321.0.14701.40.17.9.10.10.1.231.2502.3j10j4.17.0...0.0...1c.BCb_w6c0oBI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=99b0cee94ed2fe06&ion=1&biw=1527&bih=871)

# python - 将目录中的所有JPG文件复制到Python中的另一个目录？

> ID：11903037
> 
> 赞同：8
> 
> 时间：2012-08-10T13:47:44.657
> 
> 标签：python

我想将一个目录中的所有 JPG 文件复制到一个新目录。我如何在 Python 中解决这个问题？我刚开始学习 Python。

感谢您的回复。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T13:50:39.990

当然，Python 提供了您需要的所有工具。要复制文件，您可以使用[`shutil.copy()`](http://docs.python.org/library/shutil.html#shutil.copy). 要在源目录中查找所有 JPEG 文件，您可以使用[`glob.iglob()`](http://docs.python.org/library/glob.html#glob.iglob).

```
import glob
import shutil
import os

src_dir = "your/source/dir"
dst_dir = "your/destination/dir"
for jpgfile in glob.iglob(os.path.join(src_dir, "*.jpg")):
    shutil.copy(jpgfile, dst_dir) 
```

请注意，这将覆盖目标目录中具有匹配名称的所有文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-27T02:33:20.150

```
import shutil 
import os 

for file in os.listdir(path):
    if file.endswith(".jpg"):
       src_dir = "your/source/dir"
       dst_dir = "your/dest/dir"
       shutil.move(src_dir,dst_dir) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T10:46:42.993

```
for jpgfile in glob.iglob(os.path.join(src_dir, "*", "*.jpg")):
    shutil.copy(jpgfile, dst_dir) 
```

您应该在“.jpg”之前写“**”*来搜索子目录。more "* " 表示要搜索的子目录更多

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-22T11:36:58.027

只需使用以下代码

```
import shutil, os
files = ['file1.txt', 'file2.txt', 'file3.txt']
for f in files:
    shutil.copy(f, 'dest_folder') 
```

注意：您在当前目录中。如果您有不同的目录，则在文件列表中添加路径。IE：

```
files = ['/home/bucket/file1.txt', '/etc/bucket/file2.txt', '/var/bucket/file3.txt'] 
```

# php - 在 preg_match 中匹配“---”

> ID：11903040
> 
> 赞同：0
> 
> 时间：2012-08-10T13:47:56.613
> 
> 标签：php, regex, preg-match-all

```
#\b^([0-9]{7,8}(\s/[0-9]{4})?|Charges|[\-]{3}|UNIVERSAL\sCONNECTIVITY-DCS|FEDERAL\sREGULATORY\sFEE-DCS|PROPERTY\sTAX\sALLOTMENT-DCS|ADMINISTRATIVE\sEXPENSE\sFEE-DCS)\b#m 
```

我正在尝试对一组非常...可变的数据进行匹配，但我无法确定如何匹配三破折号字符串。

有问题的正则表达式是

```
[\-]{3} 
```

我已经尝试了一百种组合来让它工作，但它永远不会匹配我的 3 个破折号。

有任何想法吗？=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:53:59.847

您不需要单个字符的字符类，只需

```
-{3} 
```

或更简单的

```
--- 
```

会做得很好。

无论如何，您的模式应该可以工作，检查您是否有实际的破折号而不是其他**看起来**像破折号的字符（如 em 破折号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:54:35.857

您的三个破折号的 RegEx 工作正常，在您更大的 RegEx 的其余部分中还有其他内容失败了。

证明：

```
$x = 'mi---hai';
echo preg_replace('/[\-]{3}/', '', $x); // echoes 'mihai' 
```

顺便说一句，如果您尝试匹配破折号并且在字符类中没有其他字符，那么您不需要转义它。`[-]{3}`可以正常工作，并且`[-abc]`可以匹配 a、b、c 或破折号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:05:25.707

哦！我找到了解决方案！\b 导致它，因为 - 不被视为单词字符。哎呀！

# android - 如何更改 DatePickerDialog 的语言环境？

> ID：11903043
> 
> 赞同：1
> 
> 时间：2012-08-10T13:48:13.830
> 
> 标签：android, dialog, locale, android-datepicker, datepickerdialog

我已经阅读了很多关于这个问题的链接，我知道这个类正在使用默认语言环境，但我需要使用不在设备标准语言环境中的亚美尼亚语言环境。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:03:02.110

如果我记得很清楚 DatePickerDialog 默认是本地化的。因此，如果您将应用程序放在使用亚美尼亚语言环境的设备上，它会自动适应它。

# url - 从 servlet 执行 response.sendRedirect 时，如何从 url 获取片段参数？

> ID：11903046
> 
> 赞同：1
> 
> 时间：2012-08-10T13:48:28.377
> 
> 标签：url, jakarta-ee, servlets, fragment, response.redirect

我有一个 Java 的 Facebook 应用程序。我使用servlet 和jsp。我想获取从`doPost`方法返回的新 url `response.sendRedirect`：

```
(response.encodeRedirectURL(contextPath)); 
```

执行响应时，返回以下链接：

[http://www.facebook.com/connect/login_success.html#access_token=AAACkWLhByJ4BADOdUCbsc390FdSayaLrfQ4VF829TFAhHj28I6LH1lW45dbU8o1ooBIuO40Q4UCBA7ZB2V9qUgKgYFuQtwIUslNHFngZDZD&expires_in=5099981](http://www.facebook.com/connect/login_success.html#access_token=AAACkWLhByJ4BADOdUCbsc390FdSayaLrfQ4VF829TFAhHj28I6LH1lW45dbU8o1ooBIuO40Q4UCBA7ZB2V9qUgKgYFuQtwIUslNHFngZDZD&expires_in=5099981)

URL 的一个片段被命名为`access_token`。我怎样才能在不使用 JavaScript 的情况下获得这个片段，或者有什么可能的方法吗？

# android - Android 权限仅适用于某些情况

> ID：11903049
> 
> 赞同：2
> 
> 时间：2012-08-10T13:48:48.933
> 
> 标签：android, permissions, geolocation, usability

我只想在我的应用程序中为来自某个国家/地区的用户使用地理位置，以便找出该国家/地区（设备上的语言没有该国家/地区）。

我的应用程序不会将地理位置用于其他任何事情，我不想打扰其他用户/世界寻求地理位置许可。

有没有办法解决这个问题？我唯一能想到的就是跳过请求权限并将访问地理位置的代码放在 try-catch 块中，但这显然在很多情况下不会获得地理位置（尽管我有一个后备策略）。

有一个后备策略，如果我没有得到地理位置，应用程序不会停止工作。但是如果我能得到它很好，如果我不打扰其他国家的用户获得地理定位许可也很好。

有什么建议，建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:18:01.397

我认为您最好制作两个版本的应用程序，然后使用 Google Play 发布者控制台将一个版本提供给您关注的特定国家/地区，另一个提供给其他所有人。在这种情况下，我会继续，让它成为两个不同的应用程序、两个不同的包名称等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:57:44.990

这可以工作。

假设 - 访问 IPAddresstoLocation API

使用以下代码获取设备的 IP 地址

```
public String getLocalIpAddress()
  {
          try {
              for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                  NetworkInterface intf = en.nextElement();
                  for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                      InetAddress inetAddress = enumIpAddr.nextElement();
                      if (!inetAddress.isLoopbackAddress()) {
                          return inetAddress.getHostAddress().toString();
                      }
                  }
              }
          } catch (Exception ex) {
              Log.e("IP Address", ex.toString());
          }
          return null;
      } 
```

如果您有权访问任何返回位置的 API，则使用 IP 地址，您的问题应该得到解决。

# regex - 使用简单的正则表达式提取信息

> ID：11903050
> 
> 赞同：0
> 
> 时间：2012-08-10T13:48:53.397
> 
> 标签：regex

我有这个字符串：OK（0 毫秒）并且需要使用正则表达式提取以下内容：

*   好的
*   0
*   毫秒

所有部分可能会有所不同，但始终是 TEXT（十进制文本）

而且，它必须用正则表达式来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:55:43.790

使用这个正则表达式`([a-zA-Z]+)\s\((\d+)\s([a-zA-Z]+)\)`

`OK`在组 1

`0`在第 2 组

`msec`在第 3 组

# hibernate - 休眠复合键中的所有列 - 不返回 POJO 对象

> ID：11903051
> 
> 赞同：0
> 
> 时间：2012-08-10T13:49:01.480
> 
> 标签：hibernate

这是我的 hbm.xml 文件结构。

```
<hibernate-mapping>
<class name="customer" table="Customer" schema="Schem">
    <composite-id name="id" class="Customerid">
        <key-property name="code" type="java.lang.String">
            <column name="CODE" length="10" />
        </key-property>
        <key-property name="name" type="java.lang.String">
            <column name="NAME" length="10" />
        </key-property>
        <key-property name="address" type="java.lang.String">
            <column name="ADDRESS" length="100" />
        </key-property>
        <key-property name="contactnumber" type="java.lang.String">
            <column name="CONTACTNUMBER" length="15" />
        </key-property>
    </composite-id>
</class>
</hibernate-mapping> 
```

但是在数据库中，如果一行的任何一列是空的。那么hibernate不返回任何客户对象并返回null。我猜是因为所有列都在复合 id 中，这就是为什么如果该行中的任何一列为空，它会返回 null 对象。当我只有代码值可用时如何获取休眠 POJO 对象客户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:48:28.463

id/主键**不能为 null**并且是**唯一的**。仅包括构成 CompositeId 映射中的主键的列。要通过 id 获取一个实例，请使用

```
Customer customer = session.get(Customer.class, new Customer(<id properties)); 
```

# java - Spring 3中@Component和@Configuration的区别

> ID：11903053
> 
> 赞同：16
> 
> 时间：2012-08-10T13:49:02.550
> 
> 标签：java, spring, spring-3

我遇到了 Spring 3 提供的两个注释（[@Component](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/Component.html)和[@Configuration](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html)）我对它们有点困惑。
这是我读到的`@Component`

> 把这个“context:component”放在bean配置文件中，意思是，在Spring中启用自动扫描功能。base-package 指示您的组件存储在哪里，Spring 将扫描此文件夹并找出 bean（使用 @Component 注释）并将其注册到 Spring 容器中。

所以我想知道`@Configuration`then if`@Controller`将注册我的bean而不需要在spring配置XML文件中声明它们有什么用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-17T18:35:25.553

来自 Book Pro Spring 集成

`@Configuration`类与普通`@Components`类一样，只是带有注释的方法`@Bean`用于工厂 bean。请注意，`@Component`带有`@Bean`注释的方法的工作方式相同，只是不尊重范围并且`@Bean`重新调用方法（没有缓存在起作用），因此`@Configuration`是首选，即使它需要 CGLIB

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-23T08:37:25.363

这是与完整示例的区别：-

```
//@Configuration or @Component
public static class Config {
    @Bean
    public A a() {
        return new A();
    }
    //**please see a() method called inside b() method**
    @Bean
    public B b() {
        return new B(a());
    }
} 
```

1) 这里如果 Config 类使用 @configuration 注解，则 a() 方法和 b() 方法都将被调用**一次**。

2）这里如果 Config 类使用 @component 注释，则 b() 方法将被调用**一次**，但 a() 方法将被调用**两次**。

**(2) 中**的问题：- 因为我们已经注意到 @component 注释的问题。第二种配置 (2) 完全不正确，因为 spring 将创建 A 的单例 bean，但 B 将获得 A 的另一个实例，该实例不受 spring 上下文控制。

**解决方案**：- 我们可以在 Config 类中使用 @autowired 注解和 @component 注解。

```
@Component
public static class Config {
    @Autowired
    A a;

    @Bean
    public A a() {
        return new A();
    }

    @Bean
    public B b() {
        return new B(a);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-31T18:49:21.237

`@Configuration`是 Spring 3 中引入的基于 Java 的配置机制的核心。它提供了基于 XML 的配置的替代方案。

因此，以下 2 个片段是相同的：

```
<beans ...>
    <context:component-scan base-package="my.base.package"/>
    ... other configuration ...
</beans> 
```

和：

```
@Configuration
@ComponentScan(basePackages = "my.base.package")
public class RootConfig {
    ... other configuration ...
} 
```

在这两种情况下，Spring 都会在内部`my.base.package`和下面扫描带有注释的类`@Component`或其他带有元注释的注释之一，`@Component`例如`@Service`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-27T05:31:47.853

虽然这是旧的，但详细说明 JavaBoy 和 Vijay 的答案，并举个例子：

```
@Configuration
public class JavaConfig {
    @Bean
    public A getA() {
        return new A();
    }
}

@Component
@ComponentScan(basePackages="spring.example")
public class Main() {
    @Bean
    public B getB() {
        return new B();
    }
    @Autowired
    JavaConfig config;

    public static void main(String[]a) {
        Main m = new AnnotationConfigApplicationContext(Main.class)
            .getBean(Main.class);
        /* Different bean returned everytime on calling Main.getB() */
        System.out.println(m.getB());
        System.out.println(m.getB());
        /* Same bean returned everytime on calling JavaConfig.getA() */
        System.out.println(m.config.getA());
        System.out.println(m.config.getA());
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-22T06:19:41.427

`@Component`是一个通用的原型注释，可以指示任何候选组件，即；`@Repository, @Service, @Controller`这些候选人有资格进行自动检测。

as`@Configuration`用于创建 spring 框架用来创建应用程序上下文的组件，内部`@Configuration`使用`@Component`它是有道理的，即使这是框架本身创建的 spring 组件。

# c# - 如何在没有 INotifyPropertyChanged 的 情况下生成 Web 服务引用？

> ID：11903056
> 
> 赞同：10
> 
> 时间：2012-08-10T13:49:11.373
> 
> 标签：c#, .net, wcf, silverlight, inotifypropertychanged

我在 SilverLight 项目中使用[Fody](http://visualstudiogallery.msdn.microsoft.com/074a2a26-d034-46f1-8fe1-0da97265eb7a)来自动生成属性依赖项。`RaisePropertyChanged`但是，如果 setter 已经包含方法调用，则它不起作用。

一种解决方法可能是生成 Web 服务参考代码`INotifyPropertyChanged`，而不是在部分方法中实现它。

如何在没有 的情况下生成 Web 服务参考代码`INotifyPropertyChanged`？

我有一个 WCF 服务，我们称之为 MaterialService.svc。它看起来像这样：

```
[ServiceContract]
public interface IMaterialService
{
    [OperationContract]
    Material GetMaterial(int id);
}

[DataContract]
public class Material
{
    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public string Name { get; set; }
} 
```

当我将服务添加为服务引用并生成客户端代码时，每个类都设置为实现`INotifyPropertyChanged`：

```
public partial class Material : object, System.ComponentModel.INotifyPropertyChanged {

    private int IDField;

    private string NameField;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public int ID {
        get {
            return this.IDField;
        }
        set {
            if ((this.IDField.Equals(value) != true)) {
                this.IDField = value;
                this.RaisePropertyChanged("ID");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute()]
    public System.Nullable<string> Name {
        get {
            return this.NameField;
        }
        set {
            if ((this.NameField.Equals(value) != true)) {
                this.NameField = value;
                this.RaisePropertyChanged("Name");
            }
        }
    }
} 
```

如何生成未实现的客户端代码`INotifyPropertyChanged`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T20:04:19.203

添加服务引用后，打开服务引用`Reference.svcmap`下的文件（您可能需要在“项目”菜单中启用“显示所有文件”选项）。在那里找到`<EnableDataBinding>`元素，并将值更改为false。这将从`INotifyPropertyChanged`生成的数据合约中删除。

# r - 创建累积和图

> ID：11903058
> 
> 赞同：2
> 
> 时间：2012-08-10T13:49:14.287
> 
> 标签：r, plot, cumulative-sum

我正在尝试计算如下图左侧所示的图，该图是时间序列图。我设法使用“openair”包使用 timePlot 命令创建了绘图。我现在正在尝试在同一图上添加一条累积总和线，即右侧图上的红线。我不知道该怎么做，我只是想知道是否有人可以建议我采取任何步骤在同一个左侧图中绘制一条带有累积总和的线？

（请忽略右侧有侧图的任何其他特征，我感兴趣的是在同一个左侧图中绘制红色累积总和线）

我真的很感激你的任何建议。
非常感谢，
阿扬

这些是我读取数据并在左侧创建图的示例代码：

```
 library("openair")
data = importAURN(site= "MY1", year = 2001:2005, pollutant= "nox") ## import data

## timeplot with monthly mean
timePlot(data, pollutant = "nox",avg.time = "month",smooth = T,ci=F, date.breaks = 5) 
```

这是我试图实现的示例，我试图将右侧图中的红色累积总和线添加到左侧的同一时间序列图中：

![在此处输入图像描述](../Images/0f9bf8f0b25c2fa86ae57d49951accb3.png)

# c# - 在网格背景处显示一条线

> ID：11903063
> 
> 赞同：1
> 
> 时间：2012-08-10T13:49:30.920
> 
> 标签：c#, wpf, xaml, styles

如何在网格容器的背景中存储和显示一条线？我必须为每个资源字典设置背景。

```
<Style TargetType="{x:Type Grid}">
    <Setter Property="Background">
        <Setter.Value>
            <!--here I had to display a vertical line at bottom,
                which goes over the whole window -->
        </Setter.Value>
    </Setter>
</Style> 
```

或者：

```
<Style TargetType="{x:Type Window}">
    <Setter Property="Background">
        <Setter.Value>
            <!-- here I had to display a vertical line at bottom,
                 which goes over the whole window and set the background color-->
        </Setter.Value>
    </Setter>
</Style> 
```

[![截屏](../Images/dae54aa637f09cc428ca520a6e2e1516.png)](https://i.stack.imgur.com/gUUJB.jpg)

问题是我需要应用程序的每个窗口中的红色页脚。我使用 a`ResourceDictionary`样式。我不能使用图片，因为我必须在运行时/为每个应用程序设置颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:55:30.047

您可以使用刷子本身。

使用visualbrush你可以画任何东西作为画笔：http: [//msdn.microsoft.com/de-de/library/system.windows.media.visualbrush.aspx](http://msdn.microsoft.com/de-de/library/system.windows.media.visualbrush.aspx)

做这样的事情

```
<VisualBrush>
...
<Grid Background="Red" .../>
<Line ... />

</VisualBrush> 
```

# castle-windsor - Castle Windsor ComponentModel AddProperty vs CustomDependencies

> ID：11903068
> 
> 赞同：0
> 
> 时间：2012-08-10T13:49:40.653
> 
> 标签：castle-windsor

我想知道 ComponentModel 的“AddProperty”方法和“CustomDependencies”字典之间有什么区别。在容器中注册后，我正在尝试为组件上的属性设置依赖关系。

首先我从内核中检索组件

```
var registration = container.Kernel.GetAssignableHandlers(component).Select(x =>    x.ComponentModel).SingleOrDefault(); 
```

然后我正在寻找对该组件的属性依赖项。使用 CustomDependencies 字典时它似乎有效，但我只是想知道有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:39:34.947

`AddProperty`顾名思义，它**声明**了对实现类型上存在的属性的依赖。

`CustomDependencies`是将任何类型的依赖**值**与组件相关联的通用方式。这些可以用于任何事情。

如果您想向组件添加依赖项，请执行以下操作`IContributeComponentModelConstruction`（是的，这是一口）

# java - 如何防止此代码中出现 NullPointerException？

> ID：11903071
> 
> 赞同：0
> 
> 时间：2012-08-10T13:49:44.427
> 
> 标签：java, sql, database, nullpointerexception, formatting

当我按下 sTime 等于的 JOptionPane.showInputDialog 窗口上的取消按钮时，如何防止此代码中出现 NullPointerException？（它位于“>>”标志处）

我的代码：

```
insertTableF.addActionListener(new ActionListener () { 
    public void actionPerformed(ActionEvent  e)
    {
        int wayPoint1 = 0;
        int wayPoint2 = 0;
        int PassTime = 0;
        Statement statementR;

        if (loggedIn == 1)
        {

            while(passedR ==0) 
            {
                try 
                {
                    if (wayPoint1==0) 
                    {
                        sTagR =JOptionPane.showInputDialog("Please enter the Rhino Tag number:");
                        iTagR = Integer.parseInt(sTagR);
                        wayPoint1 =1;
                    }
                    if (wayPoint2==0) 
                    {
                        sGPSX = JOptionPane.showInputDialog("Please enter the horizontal GPS Grid Numbers(eg.3123):");
                        iGPS = Integer.parseInt(sGPSX);

                        wayPoint2 = 1;
                    }

                    sGPSY = JOptionPane.showInputDialog("Please enter the vertical GPS Grid Letters(eg.XXYY:");
                    while (PassTime ==0) 
                    {
                        sTime = JOptionPane.showInputDialog("Please enter the Last date you saw the Rhino(YYYY-MM-DD):");
                        if (sTime != "")
                        {
                            if (isValidDate(sTime)) 
                            {
                                PassTime = 1;
                            } 
                            else 
                            {
                                JOptionPane.showMessageDialog(null, "Please use the date format YYYY-MM-DD.");
                            }
                        } 
                        else 
                        {
                            JOptionPane.showMessageDialog(null, "Please use the date format YYYY-MM-DD.");
                        }
                    }               
                    sLocation = JOptionPane.showInputDialog("Please enter the Last place you saw the Rhino:");

                    passedR =1;
                } 
                catch (NumberFormatException nfe) 
                {
                    passedR =0;
                    JOptionPane.showMessageDialog(null, "Please use numbers for the Rhino Tag field.");
                }
            }
        }
    }
}); 
```

我的格式代码：

```
 boolean isValidDate(String input) {
    if (input == null){
     try {
        format.setLenient(false);
        format.parse(input);
        return true;
     }
     catch(ParseException e){
          return false;
     }
    }
    return false;
} 
```

对不起，很长的帖子。提前致谢。

这是我收到的错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1235)
    at java.text.DateFormat.parse(DateFormat.java:335)
    at RhinoGUI.isValidDate(RhinoGUI.java:92)
    at RhinoGUI$8.actionPerformed(RhinoGUI.java:507)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6288)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6053)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4651)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:616)
    at java.awt.EventQueue$2.run(EventQueue.java:614)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:51:35.990

你的守卫条件`isValidDate()`是错误的：

```
if (input == null){ 
```

当然应该是

```
if (input != null){ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:51:58.787

采用

```
 if (input != null) 
```

代替

```
 if (input == null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:57:14.043

您应该注意的另一件事：如果用户取消输入对话框，则`JOptionPane.showInputDialog(...)`返回。`null`目前你只寻找空字符串。延长

```
 if (sTime != "") { ... } 
```

到

```
 if (sTime != null && !sTime.equals("")) { ... } 
```

或者您可以拆分此检查以区分错误输入或取消：

```
 if (sTime == null) {
     // user cancelled 
 } else if (!isValidDate(sTime)) {
    // input of user has invalid format
 } else {
    // everything is fine, handle input
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:57:59.157

愚蠢的错误是程序员生活的一部分:)

```
if (input == null) //Lets make sure we get a null pointer exception or nothing else 
```

# php - 使用 Jquerymobile、Ajax 和 PHP 使用 Web 服务（登录）

> ID：11903076
> 
> 赞同：0
> 
> 时间：2012-08-10T13:49:56.793
> 
> 标签：php, mysql, ajax, web-services, jquery-mobile

我已经使用 mySQL 在 Jelastic 上创建了一个数据库，而 Jelastic 不允许在其中托管 php 页面，因此我创建了一个 Web 服务来帮助我。我目前在本地托管了我的 login.php。Web 服务有一个名为 getCustomQuery 的函数，但我目前正在尝试一种不同的方法，希望能够绕过使用 Web 服务。

好的，这是我的 index.html 页面

```
<!DOCTYPE html>
<html>
    <head>
    <title>Submit a form via AJAX</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.css" />
    <script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.js">     <script>
</head>
<body>
    <script>
       function onSuccess(data, status)
       {
           data = $.trim(data);
           $("#notification").text(data + " Success");
       }

       function onError(data, status)
       {
           $("#notification").text(data+ " " + status);
       }        

       $(document).ready(function() {
           $("#submit").click(function(){

               var formData = $("#callAjaxForm").serialize();

               $.ajax({
                   type: "POST",
                   url: "login.php",
                   cache: false,
                   dataType: "text",
                   data: formData,
                   success: onSuccess,
                   error: onError
               });

               return false;
           });
       });
   </script>

   <!-- call ajax page -->
   <div data-role="page" id="callAjaxPage">
       <div data-role="header">
           <h1>Call Ajax</h1>
       </div>

       <div data-role="content">
           <form id="callAjaxForm">
               <div data-role="fieldcontain">
                   <label for="userName">Username</label>
                   <input type="text" name="userName" id="userName" value=""  />

                   <label for="passWord">Password</label>
                   <input type="text" name="passWord" id="passWord" value=""  />
                   <h3 id="notification"> Something here</h3>
                   <button data-theme="b" id="submit" type="submit">Submit</button>
               </div>
           </form>
       </div>

   </div>
</body>
</html> 
```

现在索引页面获取用户名和密码，并使用 jquery 和 ajax 将其发布到登录页面。

```
<?php

$userName = $_POST[userName];
$passWord = $_POST[passWord];

echo("LastName: " . $userName . " Password: " . $passWord);

$con = mysql_connect("url", "username", "password"); 
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
$passWordMD5 = md5($passWord , false);
mysql_select_db("club_in", $con);

$result = mysql_query("SELECT * FROM user WHERE user_username='+ $userName+' AND user_password='+$passWordMD5+'");

while ($row = mysql_fetch_array($result)) {
    echo $row['user_username'] . " " . $row['user_password'];
    echo "<br />";
}

mysql_close($con);
?> 
```

现在 login.php 页面获得了从 index.html 页面传递给它的两个变量。login.php md5 对密码进行哈希处理，因为如果数据库被黑客入侵，所有密码都存储为 md5 哈希值以帮助提高安全性。现在这对我来说有点模糊，因为我已经尝试过 SQL 查询并且它在 mySQL 中工作，当它返回 index.html 页面时我得到了成功，但我唯一得到的是一个php 页面的整个文本。我只需要 login.php 页面应该从数据库中提取的信息。你能帮忙吗？任何有用的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:08:02.720

如果你得到的是 php 代码而不是解析结果：

*   网络服务器不知道 php。你有安装 php 解析器吗？
*   网络服务器无法执行脚本。什么是文件权限？(Linux)

# java - Big-O：获取 Java HashMap 中的所有键

> ID：11903077
> 
> 赞同：0
> 
> 时间：2012-08-10T13:49:58.570
> 
> 标签：java, amortized-analysis

任何人都知道Java HashMap中keySet的摊销分析是什么？ `O(1)`?

是否遍历它们`O(n)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:05:24.660

`map.keySet()`只需返回对存储在映射中的键集的引用，因此它显然是一个 O(1) 操作。

然后迭代是对该集合的循环，它本身在内部使用映射桶上的循环，因此操作花费的时间与 n+m 成正比，其中 n 是键集的大小，m 是映射的容量。

因此，如果您的地图容量非常大，只有一个条目，那么即使只有一个键，对 keySet 的迭代也会遍历所有桶。

不知道你是如何用大o表示法翻译的。

我刚刚对两张地图进行了快速测试，每张地图都有一个条目。一张地图的容量为 1000 万，另一张的容量为 1。在密钥集上的迭代（两种情况下都是一项）在大地图上花费了 3,500 倍以上的时间（18,843,092 ns 对 5434 ns）。

ps：类似于[HashSet的javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)所说的：

> 迭代这个集合需要的时间与 HashSet 实例的大小（元素的数量）加上支持 HashMap 实例的“容量”（桶的数量）的总和成正比。因此，如果迭代性能很重要，那么不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:06:15.160

您可以查看 keySet 的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.keySet%28%29)。

[基于此](http://kickjava.com/src/java/util/HashMap.java.htm)，遍历 Set 是 O(n)

# javascript - 如何使用 javascript 异步更新我的内容？

> ID：11903078
> 
> 赞同：2
> 
> 时间：2012-08-10T13:50:01.863
> 
> 标签：javascript, jquery, javascript-events

**设想**

我正在编写一个 Web 应用程序，在我的情况下是 MVC，我需要使用来自 get 请求的响应来更新特定容器，有时我想过滤元素并从响应中找到一个元素以放置在原始容器中。

**我该怎么做？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:50:01.863

**当我需要异步部分更新我的内容时，我正在构建一个 Web 应用程序**

所以我想出了一个可能也适合您需求的功能。

基本上，它将对提供的 url 执行 get 请求，它具有标准的 jQuery 回调：和`onSuccess`，您可以对结果进行 filter() 和 find() 以及指定将响应放入的容器。`onError``onComplete`

**假设你的页面上有这个：**

```
<div id="myContentWrapper">
    <div class="myContent">
        <h1>This is the content I want to update.</h1>
    </div>
</div> 
```

**请求的响应返回：**

```
<html>
    <!-- some html -->
    <div id="filterId">
        <div class="findClass">
            <h1>This is the content I want to inject!</h1>
        </div>
    </div>
    <!-- some more html -->
</html> 
```

**现在您可以更新它，将函数连接到`myButton`点击事件：**

```
$("#myButton").click(function () {
    loadContent("/Controller/Action", //url
    "#filterId", ".findClass", //filter & find
    "div#myContentWrapper div.myContent", //container to update
    function () { //success callback
        alert('Success!');
    }, function () { //error callback
        alert('Error :(');
    }, function () { //complete callback
        alert('Complete');
    });
}); 
```

**很简单，现在该功能将为您完成其余的工作：**

```
function loadContent(url, filter, find, container, 
                     onSuccess, onError, onComplete) {
    var htmlResult;
    $.ajax({
        url: url,
        type: "GET",
        success: function (data) {
            htmlResult = data;
            if (onSuccess && typeof onSuccess == "function") {
                onSuccess.call(this);
            }
        },
        error: function () {
            htmlResult = "<h1>An error occurred!</h1>";
            if (onError && typeof onError == "function") {
                onError.call(this);
            }
        },
        complete: function () {
            if (filter != null) {
                if (find != null) {
                    $(container).html(
                        $(htmlResult).filter(filter).find(find).html());
                } else {
                    $(container).html($(htmlResult).find(find).html());
                }
            } else {
                $(container).html(htmlResult);
            }
            if (onComplete && typeof onComplete == "function") {
                onComplete.call(this);
            }}});} 
```

**也许您不想在响应中过滤或查找某些内容，因此您可以这样做：**

```
loadContent("/Controller/Action", null, null, 
"div#myContentWrapper div.myContent", 
function() {
    alert('Success!');
}, function () {
    alert('Error :(');
}, function () {
    alert('Complete');
    }); 
```

**或者也许你不需要任何回调：**

```
//This is the basic function call, these parameters are required
loadContent("/Controller/Action", null, null, 
    "div#myContentWrapper div.myContent", 
    null, null, null); 
```

好了，现在您可以轻松地异步更新您想要的任何内容，随时根据需要进行调整，您也可以使用请求类型参数以便 GET 或 POST，甚至添加`loading`图像容器的 id 以便显示它当您输入函数并将其隐藏在 $.ajax 的完整回调中时。

# python - 在 Python 中查找两个大型数组（矩阵）之间的集差

> ID：11903083
> 
> 赞同：17
> 
> 时间：2012-08-10T13:50:25.847
> 
> 标签：python, numpy, set-difference

我有两个大型二维数组，我想找到它们的集合差异，将它们的行作为元素。在 Matlab 中，此代码为`setdiff(A,B,'rows')`. 数组足够大，以至于我能想到的明显循环方法需要太长时间。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T14:05:48.650

这**应该可以**工作，但由于正在创建的视图的合并排序不可用，目前在 1.6.1 中被破坏。它适用于预发布的 1.7.0 版本。这应该是最快的方式，因为视图不必复制任何内存：

```
>>> import numpy as np
>>> a1 = np.array([[1,2,3],[4,5,6],[7,8,9]])
>>> a2 = np.array([[4,5,6],[7,8,9],[1,1,1]])
>>> a1_rows = a1.view([('', a1.dtype)] * a1.shape[1])
>>> a2_rows = a2.view([('', a2.dtype)] * a2.shape[1])
>>> np.setdiff1d(a1_rows, a2_rows).view(a1.dtype).reshape(-1, a1.shape[1])
array([[1, 2, 3]]) 
```

您可以在 Python 中执行此操作，但可能会很慢：

```
>>> import numpy as np
>>> a1 = np.array([[1,2,3],[4,5,6],[7,8,9]])
>>> a2 = np.array([[4,5,6],[7,8,9],[1,1,1]])
>>> a1_rows = set(map(tuple, a1))
>>> a2_rows = set(map(tuple, a2))
>>> a1_rows.difference(a2_rows)
set([(1, 2, 3)]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T14:46:49.570

这是一个不错的替代纯 numpy 解决方案，适用于 1.6.1。它确实创建了一个中间数组，因此这对您来说可能是也可能不是问题。它也不依赖于排序数组的任何加速（`setdiff`可能如此）。

```
from numpy import *
# Create some sample arrays
A =random.randint(0,5,(10,3))
B =random.randint(0,5,(10,3)) 
```

作为一个例子，这就是我得到的——注意有一个共同的元素：

```
>>> A
array([[1, 0, 3],
       [0, 4, 2],
       [0, 3, 4],
       [4, 4, 2],
       [2, 0, 2],
       [4, 0, 0],
       [3, 2, 2],
       [4, 2, 3],
       [0, 2, 1],
       [2, 0, 2]])
>>> B
array([[4, 1, 3],
       [4, 3, 0],
       [0, 3, 3],
       [3, 0, 3],
       [3, 4, 0],
       [3, 2, 3],
       [3, 1, 2],
       [4, 1, 2],
       [0, 4, 2],
       [0, 0, 3]]) 
```

我们寻找行之间的 (L1) 距离何时为零。这给了我们一个矩阵，在它为零的点上，这些是两个列表共有的项目：

```
idx = where(abs((A[:,newaxis,:] - B)).sum(axis=2)==0) 
```

作为检查：

```
>>> A[idx[0]]
array([[0, 4, 2]])
>>> B[idx[1]]
array([[0, 4, 2]]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T14:28:23.577

我不确定你要做什么，但这会给你一个布尔数组，其中 2 个数组不相等，并且会很快：

```
 import numpy as np
a = np.random.randn(5, 5)
b = np.random.randn(5, 5)
a[0,0] = 10.0
b[0,0] = 10.0 
a[1,1] = 5.0
b[1,1] = 5.0
c = ~(a-b==0)
print c

[[False  True  True  True  True]
 [ True False  True  True  True]
 [ True  True  True  True  True]
 [ True  True  True  True  True]
 [ True  True  True  True  True]] 
```

# c# - 将 ListBoxItem 转换为图像

> ID：11903084
> 
> 赞同：1
> 
> 时间：2012-08-10T13:50:39.370
> 
> 标签：c#, wpf, image, listbox, listboxitem

我有一个列表框，它的 ItemsSource 是绑定的。无论如何将每个单独的列表框项目转换为运行时在屏幕上看到的图像？

编辑：

我现在有这个，但它似乎不起作用......

```
ListBoxItem item = new ListBoxItem();
        item = (ListBoxItem)(lb1.ItemContainerGenerator.ContainerFromIndex(0));

        //itempres = item.Content as ItemsPresenter;

        //double width = itempres.ActualWidth;
        //double height = itempres.ActualHeight;
        double width = item.Width;
        double height = item.Height;

        //RenderTargetBitmap bmpCopied = new RenderTargetBitmap((int)Math.Round(width), (int)Math.Round(height), 100, 100, PixelFormats.Default);
        RenderTargetBitmap bmpCopied = new RenderTargetBitmap(100, 500, 100, 100, PixelFormats.Default);
        DrawingVisual drawingVisual = new DrawingVisual();
        using (DrawingContext drawingContext = drawingVisual.RenderOpen())
        {
            VisualBrush visualBrush = new VisualBrush(item);
            drawingContext.DrawRectangle(visualBrush, null, new Rect(new Point(), new Size(width, height)));
        }
        bmpCopied.Render(drawingVisual);

        displayImage = new Image();
        displayImage.Source = bmpCopied;

        fd.Blocks.Add(new BlockUIContainer(displayImage));
            //ListBox lbNew = new ListBox();
            //lbNew.Style = lb1.Style;
            //lbNew.ItemsSource = lb1.ItemsSource;
            //lbNew.ItemContainerStyle = lb1.ItemContainerStyle;
            //lbNew.ItemTemplateSelector = lb1.ItemTemplateSelector;
            //UIElement elementAll = lbNew as UIElement;
            //fd.Blocks.Clear();
            //fd.Blocks.Add(new BlockUIContainer(elementAll));
        //}

        PrintDialog pd = new PrintDialog();

        if (pd.ShowDialog() == true)
        {
            fd.PageHeight = pd.PrintableAreaHeight;
            fd.PageWidth = pd.PrintableAreaWidth;
            fd.PagePadding = new Thickness(96);

            IDocumentPaginatorSource dps = fd;
            pd.PrintDocument(dps.DocumentPaginator, "flow doc");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:54:01.967

这段代码对我来说工作正常，我没有尝试打印图像，因为我现在没有打印机，但图像在我创建的测试应用程序中正确呈现

```
var listBoxItem = listBox.ItemContainerGenerator.ContainerFromIndex(0) as ListBoxItem;
            RenderOptions.SetBitmapScalingMode(image, BitmapScalingMode.HighQuality);
            RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap((int)listBoxItem.ActualWidth,
                                                                           (int)listBoxItem.ActualHeight, 96, 96,
                                                                           PixelFormats.Pbgra32);
            renderTargetBitmap.Render(listBoxItem);
            image.Source = renderTargetBitmap;
            image.Width = listBoxItem.ActualWidth;
            image.Height = listBoxItem.ActualHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:00:05.230

我刚刚回答了一分钟：[在网格背景显示一条线](https://stackoverflow.com/questions/11903063/display-a-line-at-grids-background/11903172#11903172)

使用 Visualbrush 创建一个画笔，然后简单地创建一个 Drawingcontext 并使用 Visualbrush 绘制一个矩形作为示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T23:25:27.183

我没有评论的声誉 - 所以要增加 Dtex 的答案：

ListBoxItems 似乎对 RenderTargetBitmap 的行为很奇怪。我能够通过呈现 ListBoxItem 本身的直接子项来解决该问题，如下所示：

```
var itemChildVisual = VisualTreeHelper.GetChild(listBoxItem,0) as Visual;
renderTargetBitmap.Render(itemChildVisual); 
```

这对我来说非常有效。

希望这可以帮助！

# javascript - Dojo 1.7 伪选择器不能正常工作？

> ID：11903086
> 
> 赞同：0
> 
> 时间：2012-08-10T13:50:47.650
> 
> 标签：javascript, dojo

我只是想检索一个文本输入元素，但[伪选择器“first-of-type”](http://dojotoolkit.org/reference-guide/1.7/dojo/query.html#standard-css3-selectors)似乎不起作用。前任：

```
//... requires dojo/query
var fields = query('input[type="text"]', form);// works well
var fields = query('input[type="text"]:first-of-type', form);// returns empty array :( 
```

然后是另一个相关的问题：查询具有多个 attr 值的 dom 的语法是什么：使用 attr type = "text" AND attr name = "the-name" 检索输入？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:42:34.203

我试图重现您的问题，**对我来说似乎工作正常**。我想您正在查询以查找内部的输入以形成。有我的代码。我猜你正在使用**1.7.x**

[检查代码](http://jsfiddle.net/3AdMg/7/)

# php - 给定单个产品 ID，获取“分组产品”URL

> ID：11903087
> 
> 赞同：0
> 
> 时间：2012-08-10T13:50:48.547
> 
> 标签：php, magento, product, catalog

给定以下基本代码（从 CMS 页面调用）：

```
<?php
    $id = $this->getProductId();
    $product = Mage::getModel('catalog/product')->load($id);

    $price=$product->getFinalPrice();
    $name=$product->getName();
    $url=$product->getUrlPath();
?>

<p><a href="<?php echo $url; ?>" title="<?php echo $name; ?>" ><?php echo $name; ?> - &pound;<?php echo $this->helper('tax')->getPrice($product, $product->getFinalPrice(), true) ?></a></p> 
```

如果产品是产品组的一部分并且单独不可见，我需要检索组 URL，而不是产品 URL。

有人对如何做到这一点有任何建议吗？

- - 编辑 - -

蒂姆正确地指出，一个产品可以同时在多个组中，因此我修改了我的问题：

有谁知道测试产品是否属于某个组的方法，如果是，是否可以检索这些组的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:39:43.597

```
 $products = Mage::getModel('catalog/product')
    ->getCollection()
    ->addAttributeToFilter('type_id', array('eq' => 'grouped'));
foreach ($products as $product) {
    $associatedProducts = $product->getTypeInstance(true)->getAssociatedProducts($product);
    // Do something with $associatedProducts 
```

# php - 插入数据库的最后一个 id

> ID：11903091
> 
> 赞同：0
> 
> 时间：2012-08-10T13:50:56.883
> 
> 标签：php, mysql

如果我能获得最近插入的数据行的 ID，我很感兴趣。我有一个用户可以填写的表格，他们可以克隆表格，所以如果他们愿意，他们可以添加 10 个表格......我只需要插入的所有 id。那么这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:55:58.690

您可以使用`mysql_affected_rows`mysql 函数查找最后受影响的行。[这](http://php.net/manual/en/function.mysql-affected-rows.php)是文档。

```
SET @uids := null;
UPDATE footable
   SET foo = 'bar'
 WHERE fooid > 5
   AND ( SELECT @uids := CONCAT_WS(',', fooid, @uids) );
SELECT @uids; 
```

这将返回一个字符串，其中所有 ID 用冒号连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:53:32.327

SQL 太琐碎了`ORDER-BY`：

```
SELECT * FROM table ORDER BY id DESC LIMIT 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:54:47.847

从简单的意义上说是不可能的；但是如果您需要这些 id，您可以更改您的逻辑以一次插入一个。

或者，您可以做一个近似值（合理程度取决于您的应用程序），但在插入之前选择 MAX(id)，然后做一个`select ... WHERE id > $prev_max AND name IN (implode(',', $names))`（假设有一些字段，例如您可以像这样使用的名称。

您可以通过确保计数与插入的行数相同来验证所选行的有效性。使用两个因素（id > prev*和*类似名称列），当您像这样选择时，您极不可能获得其他人的插入。

您还可以考虑将行归因于用户，这将消除任何数据冲突的可能性，然后方法非常简单：

```
SELECT * FROM my_table WHERE user_id = $userID ORDER BY id DESC LIMIT $qtyForms; 
```

当然，这样的决定取决于您的应用程序的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:52:38.147

```
SELECT id FROM [yourTable] ORDER BY id DESC LIMIT 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T13:53:08.610

试试这个：

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T14:06:31.783

正如 AndreiCristianProdan 在评论中所说：自动增加 ID。然后是这样的：

```
SELECT * FROM tableName LIMIT 1 ORDER BY ID DESC 
```

永远不会有两行在-完全-同时受到影响。这将始终选择表中的最后一行。

如果您想要 - 仅 - 由一个用户影响的行，`user_id`请向表中添加一个字段。然后加

```
WHERE `user_id` = 'UserIdHere' 
```

到 SQL 语句。

希望有帮助。

# ruby - Ruby 围绕一个简单的模式查找和替换

> ID：11903093
> 
> 赞同：1
> 
> 时间：2012-08-10T13:51:02.773
> 
> 标签：ruby, regex, replace, text-processing, string-matching

我有一些输入文本，可能包含一些模式，例如

```
bla bla bla ###FOO WORLD### bla bla bla
bla bla bla ###FOO BOB###, ###FOO ALICE###bla bla bla 
```

我想处理这个并输出

```
bla bla bla HELLO WORLD bla bla bla
bla bla bla HELLO BOB, HELLO ALICEbla bla bla 
```

这不仅仅是查找和替换，因为我想保留 ### 标记之间的内容。我知道使用正则表达式应该很容易......但是除了简单的模式匹配之外，我对正则表达式非常生疏。

这样做的最佳方法是什么？我需要一个正则表达式对象吗？或者字符串类有更适合这个的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:06:47.400

```
s = "bla bla bla ###FO­O BOB##­#, ###FO­O ALICE­###bla bla bla"
s.gsub(/###F­OO (.*?)­###/, 'HELL­O \1')
# => bla bla bla HELLO BOB, HELLO ALICEbla bla bla 
```

`F­OO (.*?)`捕获 之后的文本，`FOO`并将`gsub`匹配的文本替换为`HELLO`后跟捕获文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:20:55.220

@Baldrick 完全正确，只是使用块的另一个答案:)

```
 a.gsub(/###FOO (.*?)###/) do
     "HELLO " + $1
 end 
```

# asp.net - 如何获取导出文件的路径（telerik RadGrid 导出）？

> ID：11903094
> 
> 赞同：0
> 
> 时间：2012-08-10T13:51:05.287
> 
> 标签：asp.net, telerik, export, radgrid

我正在使用导出 PDF 文件

```
RadGrid1.MasterTableView.ExportToPdf() 
```

这是一个子。我的问题是：我可以以某种方式获取导出的文件路径吗？

先感谢您，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:19:07.393

导出时，NeedDataSource 事件将触发。将数据存储到一个简单的 ADO.NET 数据表中。

```
protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
    {
        DataTable table = new DataTable();
        table.Columns.Add("Col1", typeof(double));
        for (int i = 0; i < 2; i++)
            table.Rows.Add(i);

        (sender as RadGrid).DataSource = table;
    } 
```

自我解释。删除文本框，只留下文本。

```
public void ReplaceTextBoxes(Control ctrl)
{
    var q = new Stack<Control>(ctrl.Controls.OfType<Control>());
    while (q.Count > 0)
    {
        Control control = q.Pop();
        if (control is ITextControl)
        {
            ctrl.Controls.Add(new LiteralControl((control as ITextControl).Text));
            ctrl.Controls.Remove(control);
        }
        if (control.HasControls())
            ReplaceTextBoxes(control);
    }
} 
```

要存储在服务器上，请添加 OnGridExporting 事件。

```
protected void RadGrid1_GridExporting(object sender, GridExportingArgs e)
{
    using (FileStream fs = File.Create(Request.PhysicalApplicationPath + "RadGrid.pdf"))
    {
        byte[] output = Encoding.GetEncoding(1252).GetBytes(e.ExportOutput);
        fs.Write(output, 0, output.Length);
    }

    Response.Redirect(Request.Url.ToString());
} 
```

您可以将“RadGrid.pdf”更改为您希望调用的任何名称。

最后是一个按钮来实现这一切（或者你可以在任何地方调用 ExportToPdf 函数。

```
protected void Button1_Click(object sender, EventArgs e)
{
    foreach (GridDataItem item in RadGrid1.MasterTableView.Items)
        ReplaceTextBoxes(item);
    RadGrid1.MasterTableView.ExportToPdf();
} 
```

# ruby-on-rails - 来自测试控制台的 RSpec 模拟

> ID：11903095
> 
> 赞同：13
> 
> 时间：2012-08-10T13:51:11.933
> 
> 标签：ruby-on-rails, ruby, rspec

我想从 rails 测试控制台测试 RSpec 存根和模拟。可能吗 ？如果是，如何？

这是我尝试过的：

```
$rails c test
>require "./spec/spec_helper"
true
>source = double('source')
NoMethodError: undefined method `double' for main:Object 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-10T16:44:49.780

您需要`require 'rspec/mocks/standalone'`，如[文档中所述](https://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/outside-rspec/standalone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:15:41.790

尝试这个：

```
$ RAILS_ENV=test rails c 
```

# database - 使用什么数据库，安装时如何安装？

> ID：11903098
> 
> 赞同：1
> 
> 时间：2012-08-10T13:51:13.873
> 
> 标签：database, installation

我正在创建一些软件（餐厅和商店 - 2 个程序）我需要在安装软件的同时安装数据库。

你认为哪个数据库更好？我想使用 Access 2007，但我读过这可能只有大约 1 GB，我不希望在短时间内更换数据库，丢失我的信息（例如 2 个日期之间的报告） .

在安装软件的同时，我应该使用什么数据库以及如何安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:00:00.460

我不太了解你，但我认为 Mysql 最好开始：[下载](http://dev.mysql.com/downloads/)
，你可以使用 phpmyadmin 来轻松管理

# windows-phone-7 - WP7 的文本内容对齐

> ID：11903099
> 
> 赞同：0
> 
> 时间：2012-08-10T13:51:17.043
> 
> 标签：windows-phone-7

我有一个按钮（不是由 xaml 创建的），我正在为其设置内容对齐方式，如下所示：

```
btn.HorizontalContentAlignment = System.Windows.HorizontalAlignment.Left; 
```

但是如果内容太长，那么文本会在您无法再看到文本的点之后向右滑动。这些按钮是在此网格中的全景项目 2 内创建的：

```
<Grid x:Name="LayoutRoot">
    <controls:Panorama Title="Title" SelectionChanged="Panorama_SelectionChanged" FontSize="20">

        <!--Panorama item one-->
        <controls:PanoramaItem Header="Wall" Margin="40,0,0,0" Name="PIWall">

        </controls:PanoramaItem>

        <!--Panorama item two-->
        <controls:PanoramaItem Header="Messages" Margin="30,0,0,0" Name="PIMail">

        </controls:PanoramaItem>

    </controls:Panorama>
</Grid> 
```

按钮及其设置如下：

```
HyperlinkButton btn = new HyperlinkButton();
        btn.Height = 89;
        btn.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
        btn.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        btn.Margin = new Thickness(60, -70, 0, 0);
        btn.Width = 290;
        btn.Content = message;
        btn.FontSize = 22;
        btn.Visibility = System.Windows.Visibility.Visible;
        btn.HorizontalContentAlignment = System.Windows.HorizontalAlignment.Left;
        panel.Children.Add(btn);
        scrollViewer.Content = panel;
        PIMail.Content = mailscrollViewer; 
```

如何使文本不滑过网格边缘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:29:58.987

好的，要将文本包装在按钮中，您可以像这样使用 XAML：

```
<Button Width="200" Height="200">
    <Button.Content>
        <TextBlock TextWrapping="Wrap" Text="This is a long text that fits into button"/>
    </Button.Content>
</Button> 
```

为了在代码中完成此操作，您可以执行以下操作：

```
Button btn = new Button();
btn.Height = 200;
btn.Width = 300;
TextBlock txt = new TextBlock();
txt.TextWrapping = TextWrapping.Wrap;
txt.Text = "A huge amount of text that will fill the button";
btn.Content = txt;
ContentPanel.Children.Add(btn); 
```

ContentPanel 是一个简单的网格。

编辑：HyperlinkBut​​ton 的修改后的帖子

为了在超链接按钮中启用文本换行，您需要编辑超链接按钮的样式。在 App.xaml 文件中像这样定义它：

```
 <Style x:Key="HyperlinkButtonStyle" TargetType="HyperlinkButton">
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMedium}"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HyperlinkButton">
                    <Border Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TextElement"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="TextElement">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border Background="{TemplateBinding Background}" Margin="{StaticResource PhoneHorizontalMargin}" Padding="{TemplateBinding Padding}">
                            <TextBlock x:Name="TextElement" TextWrapping="Wrap" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Text="{TemplateBinding Content}" TextDecorations="Underline" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

重要的变化是 TextBlock 现在包含设置为“Wrap”的 TextWrapping 属性。

然后像往常一样使用按钮，只是不要忘记设置样式：

```
var btn = new HyperlinkButton();
btn.Height = 200;
btn.Width = 300;
btn.NavigateUri = new Uri("http://bing.com", UriKind.Absolute);
btn.TargetName = "_blank";
btn.Style = Application.Current.Resources["HyperlinkButtonStyle"] as Style;
btn.Content = "This is a huge amount of text that will be in the hyperlink button";
ContentPanel.Children.Add(btn); 
```

# php - PHP Facebook - 我自己的 Facebook 登录按钮上的点击处理程序

> ID：11903100
> 
> 赞同：0
> 
> 时间：2012-08-10T13:51:19.767
> 
> 标签：php, html, facebook, facebook-javascript-sdk, facebook-php-sdk

我正在尝试将 JS-SDK 和 PHP 组合用于我的 Facebook API 实现。我想做的是，当有人点击以下内容时附加我的自定义处理程序：

```
<fb:login-button size="medium">
  Connect with Facebook
</fb:login-button> 
```

我知道我可以使用具有相同 facebook 徽标的静态图像并将其包装在`<a>`我的 javascript 代码中，但我真的很想使用 fbml 按钮，因为它可以很好地缩放并且按钮中的文本可以很容易地操作。如果可以的话，我想避免复制整个 CSS 并重复工作。

换句话说，我想要这样的东西：

```
<script>
function doLogin() {
window.open('login.php', 'Login to FB);
}
</script>
...
<fb:login-button size="medium" onClick="doLogin();">
  Connect with Facebook
</fb:login-button> 
```

这完全有可能还是我是 SOL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:16:52.063

> 这完全有可能还是我是 SOL？

后者。即使有可能模仿 Facebook 的 TOS，更不用说精确复制他们的图形了。

# php - XMLHttpRequest 无法加载“url”。Access-Control-Allow-Origin 不允许 Origin 'url'

> ID：11903102
> 
> 赞同：2
> 
> 时间：2012-08-10T13:51:29.857
> 
> 标签：php, jquery, ajax

使用此代码时出现此错误。

```
function like (id){
        $.ajax({
                type: "POST",
                url: "../web/like/" + id + "/",
                success: function(response) {
                    // succeed silently
                },
                error: function(response) {
                    // fail silently
                },
            });
} 
```

现在我查看了一大堆具有相同错误代码的问题，但这是在同一个域上提交 ajax 请求，而我看到的所有问题都来自其他来源。

确切的错误消息，XMLHttpRequest 无法加载 URL/web/like/3/。Access-Control-Allow-Origin 不允许使用原始 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:00:11.613

把它放在你调用的页面上：

```
<?php
    header("Access-Control-Allow-Origin: *");
?> 
```

# php - 使用strtotime时如何避免歧义

> ID：11903105
> 
> 赞同：2
> 
> 时间：2012-08-10T13:51:42.140
> 
> 标签：php, datetime

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

我需要从格式中获取 unixtimestamp`MM-DD-YYYY HH:MM:SS` 根据 php.net 文档，如果日期分隔符是破折号 (-)，则`DD-MM-YYYY`假定格式返回无效的时间戳。

`strtotime()`PHP 5.2x 或任何其他解决方法是否有替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:54:49.180

用斜杠替换破折号：

```
strtotime(str_replace('-', '/', "08-10-2012 09:54:00")); 
```

# localhost - 在 mac osx 10.8 中获取 localhost 文件

> ID：11903107
> 
> 赞同：0
> 
> 时间：2012-08-10T13:51:47.210
> 
> 标签：localhost, osx-mountain-lion, xcode4.4

Mac osx 10.6.8 to Mac osx 10.8 update, IN xcode4.4 am try to get the localhost xml file this error( **You don't have permission to access localhost/~users/sample.xml on this server** .)

给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:22:50.577

朋友，试试这些链接： http: [//www.coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion](http://www.coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion) http://www.coolestguyplanettech.com /安装-phpmyadmin-on-mac-osx-10-7-lion/

# android - Android项目需要帮助

> ID：11903111
> 
> 赞同：-4
> 
> 时间：2012-08-10T13:51:56.313
> 
> 标签：android, android-layout, android-widget

请帮助我完成这个 Android 项目。我对Android没有太多经验。我有一个带有这样 UI 的 Android 项目：

景观 ：

![在此处输入图像描述](../Images/eb6bad71f5532059c7235bdd39e97bf0.png)

和肖像：

![在此处输入图像描述](../Images/07b2fff2ad7c6941c0a982b3de1e845d.png)

菜单中有很多按钮（我称之为标签栏菜单）。选择菜单项时，我必须显示像图像之类的屏幕。当用户触摸“视图 2”上的控件时，也许我必须显示另一个屏幕。现在我只使用一个活动并尝试使用视图。我还自己为活动和控制方向设置了 android:configChanges="orientation|keyboardHidden"。我认为这不是一个好的设计，因为当应用程序被操作系统杀死时，视图和示例太多，我很难恢复应用程序状态。

我相信你比我有更多的经验。所以，请给我一些关于UI设计的解决方案，或者我应该怎么做，比如使用更多的活动，使用片段（我从未使用过片段）......

对不起，因为我的英语不是很好！谢谢

对不起大家，视图1，视图2实际上是布局。还有我自定义单选按钮并将其放在 RadioGroup 中的栏菜单。（广播组在滚动视图中）。我将 View1、View2 保留在 RelativeLayout 中。关于用户界面。这是因为客户的要求。它就像 Galaxy 标签上的 Gmail 应用程序，但它有标签栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:03:48.193

首先，有关“Android” UI 的最佳实践，请参阅[http://developer.android.com/design](http://developer.android.com/design)。但我不会向一个完整的初学者推荐这个网站。花一些时间首先熟悉基本的 Android 开发，这样您就可以理解[设计](http://developer.android.com/design)页面所讨论的内容。构建并运行一些示例应用程序，并在[http://developer.android.com/training](http://developer.android.com/training)阅读一些课程。

现在我已经介绍了基础知识：您确定要实现上面说明的 UI，即使它违反了 Android UI 建议？如果是这样，您正在注册额外的工作。

Android 已经在显示屏顶部提供了一个[ActionBar 。](http://developer.android.com/guide/topics/ui/actionbar.html)如果您真的希望菜单位于侧面或底部，那么您将不得不重新发明它自己的功能。如果这仍然是您的计划，那么我建议使用[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)。

对于您更广泛的布局，我同意[prolink007](https://stackoverflow.com/users/427763/prolink007)：您的 Menu1、View1 和 View2 可能应该在 3 个片段中实现。您可以再次使用 LinearLayout 作为容器来保存您的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:58:56.267

[`Fragments`](http://developer.android.com/guide/components/fragments.html)将在这里解决您的所有问题。

有很多很好的例子，我发布的链接将帮助您入门。

[这是一个类似的帖子，其中包含许多示例作为答案。](https://stackoverflow.com/questions/5710573/need-a-fragments-example)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:00:29.753

View1 和 View2 听起来像是片段的完美应用！看文档，不难。另外，我认为如果您针对最新版本的 Android，sdk 能够为您创建一个使用片段的裸拆分视图布局。它不适合您想要做的事情，但它是了解如何做这类事情的良好基础。

此外，Android 的惯例是借助 ActionBar 类将菜单栏置于顶部。不过，把它放在一边并不一定是一个糟糕的主意。特别是如果您的项目针对平板电脑。但是，请尽量不要适应 Android 约定：您的用户已经习惯了 Google Apps 和所有实现 Holo 的应用程序中的这些约定。因此，坚持相同的交互原则是向用户提供直观体验的好方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:00:59.433

> 布局：一般布局
> 
> 布局端口：必须更改为纵向的小部件布局
> 
> layout-land：小部件的布局，必须更改为横向

祝你好运！

# sql - 将 SQL SELECT 的结果组合成字符串

> ID：11903114
> 
> 赞同：1
> 
> 时间：2012-08-10T13:52:02.590
> 
> 标签：sql, sql-server-2008

例如，我们有下表：

```
Address Line 1 | Address Line 2 | Address Line 3 | Town | Region | Postcode 
```

有没有一种方法可以从中选择所有行，然后将该行作为一个字符串返回，例如

```
AddressLine1 + AddressLine 2 + AddressLine 3 etc..... 
```

如果这是一个基本问题，我很抱歉，对 SQL 来说非常新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:55:48.173

在 oracle 中我使用了 ||

```
Select AddressLine1 || ',' || AddressLine2 from address; 
```

不同的数据库服务器中的语法会有所不同

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:55:56.630

对于 MS SQL，这是我将使用的：

```
SELECT    ([Address Line 1] + ', ' + [Address Line 2] + ', ' + [Address Line 3] + ', ' 
          + Town + ', ' + Region + ', ' + Postcode) AS Address
FROM      TableName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:15:29.173

试试这个：（SQL Server）

请不要**忘记使用 ISNULL()**函数，如果它为空，它只会将列转换为 ''。如果您不这样做，如果任何一列为空，您的整行都将为空。

```
select isnull([Address Line 1],'')+' '+
       isnull([Address Line 2],'')+' '+
       isnull([Address Line 3],'')+' '+
       isnull(Town,'') +' '+ 
       isnull(Region,'') +' '+ 
       isnull(Postcode,'')
from <table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:03:07.687

对于 MySQL，您应该使用该`CONCAT()`函数，因此：

```
SELECT CONCAT( AddressLine1, ', ', AddressLine2, ', ', AddressLine3, ', ', Town, ', ', Region, ', ', Postcode ) AS LongAddress 
FROM ADDRESSES; 
```

但是如果你想避免`', '`在每个字段之间添加，你应该使用`CONCAT_WS()`：

```
SELECT CONCAT_WS( ', ', AddressLine1, AddressLine2, AddressLine3, Town, Region, Postcode ) AS LongAddress 
FROM ADDRESSES; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:22:14.953

我实现了 SQL-Server 2008 标记，但仅供参考，SQL Server 2012 实现了 CONCAT 函数，因此您可以执行诸如 CONCAT (AddressLine1, ',' , AddressLine2) 之类的操作。一件好事是，该函数将 NULLS 视为空字符串，因此 SQL 2012 上不再存在“Joe G Joseph”担忧 :)

# linux - 使用一个静态 IP 在 Internet 上的多台服务器之间进行通信

> ID：11903118
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:52:27.630
> 
> 标签：linux, networking, ubuntu, ldap, vpn

如何通过互联网在多个 Ubuntu 服务器之间建立双向通信（ssh、http、smtp），其中一台服务器具有静态 IP。LDAP可以在这里帮助我还是只有VPN。还是混合？

如果它们都从主服务器（使用静态 ip 和指向它的 FQDN）加入 LDAP 网络，我可以让 NAT/路由器/防火墙后面的节点相互通信吗？还是需要 VPN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:12:22.060

您可以为动态 IP 服务器编写脚本，以检查自上次检查后它们的全局 IP 地址是否更改。如果有变化，ssh 到静态服务器并`/etc/hosts`用新的 IP 更新文件（并在本地记录这个 IP 以供下次检查使用）。该脚本可以由 cron 安排，例如每 10 分钟一次。

# python - 使用 pyunit 在 Python 中测试异常

> ID：11903125
> 
> 赞同：2
> 
> 时间：2012-08-10T13:52:43.233
> 
> 标签：python, unit-testing, python-unittest

我需要测试我的 python 代码是否有异常，但我似乎无法运行正确的语句。
当我测试我的生产代码时，我可以看到抛出了异常，但是当我在单元测试文件中测试这个异常时，我得到了这个：

```
testincorrectparam (unittestearnings.TestEarningsArgs)
should raise error when param not an integer ... "3v" is not a valid argument.  i should be an integer
ERROR 
```

我通读了关于 SO 的类似问题，但我只是无法为我的问题找到令人满意的答案。

生产代码如下所示：

```
class Earnings():

    def printd(i=0):

        try:
            i = int(i)

        except Exception:
            print('"' + i + '"' + " is not a valid argument.  i should be an integer")
            sys.exit(0) 
```

单元测试代码是这样的：

```
from earnings import Earnings
import unittest

class TestEarningsArgs(unittest.TestCase):

   def testincorrectparam(self):
      '''should raise error when param not an integer'''
      e = Earnings()
      value = "3v"
      self.assertRaises(Exception, e.printd(i=value))

if __name__ == "__main__":
      unittest.main() 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:58:29.607

问题是异常被捕获，它没有传播到单元测试。您需要删除 try-except 语句并离开`i = int(i)`。在这种情况下，将引发异常并`assertRaises`自行捕获。

另一个问题是代码中的 sys.exit(0) 行。您需要用 raise Exception(...) 替换它，这不好，因为 Exception 类不是特定的异常（您应该针对您期望发生错误的情况引发更具体的异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:01:35.290

替换`sys.exit(0)`为`raise`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:18:21.603

我正在尝试在 python 中学习单元测试我认为 assertRaise 的一般形式是

```
TestCase.assertRaises(Exception, callable, parameter1,parameter2,...) 
```

所以请尝试

```
self.assertRaises(Exception, e.printd,i=value) 
```

希望它对你有用

# vb.net - COM 对象的方法列表

> ID：11903126
> 
> 赞同：0
> 
> 时间：2012-08-10T13:52:44.180
> 
> 标签：vb.net, visual-studio-2010, com

我正在尝试通过以下方式使用 COM 对象：

```
Dim l
l = CreateObject("tst.Ax")
Dim err As Long
Dim st As ULong

Try

   l.AX_hdr(st, err)

   Catch ex As Exception
   MsgBox(ex.Message)
End Try 
```

我有错误

```
TYPE_E_ELEMENTNOTFOUND 
```

CreateObject 工作正常，因为此 COM 对象在初始化期间执行一些代码（显示消息框）。对象应该有方法 AX_hdr，但我不知道为什么它找不到它。还有什么可能是错的？有什么方法可以从 COM 对象中检索函数列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:00:42.437

如果[添加对](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)COM 组件的引用，则可以使用早期绑定实例化对象：

```
Dim l as new tst.Ax 
```

然后，您将对组件的所有方法和属性进行智能感知，或者您可以按 F2 使用[Object Browser](http://msdn.microsoft.com/en-us/library/exy1facf%28v=vs.100%29.aspx)进行搜索。

如果您愿意，您可以随时删除参考，但[*通常*](https://stackoverflow.com/questions/10580/what-is-early-and-late-binding?rq=1)[最好](https://stackoverflow.com/questions/10580/what-is-early-and-late-binding?rq=1)[提前绑定](https://stackoverflow.com/questions/10580/what-is-early-and-late-binding?rq=1)*。如果您有充分的理由或没有其他选择，我只会使用后期绑定。*

# ios - iOS 应用程序在 AppStore/iTunes 中显示需要多长时间？

> ID：11903129
> 
> 赞同：2
> 
> 时间：2012-08-10T13:53:10.337
> 
> 标签：ios

我的开发人员今天已将我的应用程序提交到 Appstore，但实际在 Appstore 中看到新应用程序需要多长时间？请注意，它是对现有应用程序的更新......（所以不是真正的新应用程序，经过所有流程，它已经获得批准，一切都在等待应用程序出现在商店中）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:27:19.483

应用程序更新的审核时间也与提交新应用程序所需的时间相同。可能需要 5 天到几周的时间。一旦获得批准，它将在一天的时间内出现在应用商店中。

# vb.net - 我可以检查 DependencyProperty 是否由服务器或控件更改（Silverlight）

> ID：11903130
> 
> 赞同：2
> 
> 时间：2012-08-10T13:53:12.573
> 
> 标签：vb.net, silverlight

我在 Silverlight 中有一个带有 DependencyProperty 的自定义控件。如果控件本身更改了属性的值，那很好。但是，如果在服务器上更改了值，则控件必须重新加载其内容。

因此，在我的 PropertyChangedCallback 例程中，我希望能够检查是控件更改了值，还是在服务器上更改了（在这种情况下，需要重新加载内容）。

该控件是一个文本框，当它发生更改时，我正在执行 SetValue 来更改 DependencyProperty 值，但是 PropertyChangedCallback 例程不知道是调用它的控件还是服务器。

如何检查从何处调用 PropertyChangedCallback？

依赖属性：

```
Public Shared HtmlHolderProperty As DependencyProperty =
        DependencyProperty.Register("HtmlHolder",
                                    GetType(String),
                                    GetType(HTMLEditor),
                                    New PropertyMetadata(Nothing, New PropertyChangedCallback(AddressOf OnHtmlHolderChanged))) 
```

依赖属性更改处理程序：

```
Private Shared Sub OnHtmlHolderChanged(d As DependencyObject, e As DependencyPropertyChangedEventArgs)
    Dim hte As HTMLEditor = DirectCast(d, HTMLEditor)
    Dim newhtml As String = If(e.NewValue Is Nothing, "", e.NewValue)
    Dim oldhtml As String = If(e.OldValue Is Nothing, "", e.OldValue)

    If newhtml <> m_HtmlHolder AndAlso ControlUpdate > ControlUpdateTracker Then
        hte.htb.Load(Format.HTML, newhtml)
        ControlUpdateTracker = ControlUpdateTracker + 1
    End If
    m_HtmlHolder = newhtml
End Sub 
```

捆绑：

```
Private Sub CreateBindings(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
    Dim control As HTMLEditor = DirectCast(sender, HTMLEditor)
    Dim context As IContentItem = DirectCast(control.DataContext, IContentItem)
    Dim binding As Data.Binding
    binding = New Data.Binding("Value") With {
                        .Source = context,
                        .Mode = Data.BindingMode.TwoWay
                    }
    Me.SetBinding(HTMLEditor.HtmlHolderProperty, binding)
End Sub 
```

控制 _ContentChanged：

```
Private Sub htb_ContentChanged(sender As Object, e As RichTextBoxEventArgs) Handles htb.ContentChanged
    Dim htb As Liquid.RichTextBox = DirectCast(sender, Liquid.RichTextBox)
    SetValue(HtmlHolderProperty,htp.HTML)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:02:57.957

大概您在从控件设置值时使用了设置器？

如果是这样，只需在 setter 中的 SetValue 调用之前和之后设置一个标志。然后您可以查看更改是否来自依赖属性的事件处理程序内的控件本身。

**为 C# 代码道歉，正如你所说的 VB.Net，但你明白了。**

```
protected bool LocallySet {get;set;}

public bool MyProperty
{
    get { return (bool)GetValue(MyDPProperty); }
    set 
    { 
        LocallySet = true;
        SetValue(MyDPProperty, value);
        LocallySet = false;
    }
} 
```

如果您在处理大量重叠控制事件时遇到问题，请尝试使用计数器：

```
protected int _LocallySetCount;

public bool MyProperty
{
    get { return (bool)GetValue(MyDPProperty); }
    set 
    { 
        _LocallySetCount++;
        SetValue(MyDPProperty, value);
        _LocallySetCount--;
    }
} 
```

如果您正在处理一个或多个控制更改，则计数将非零。

*如果您可以发布您的财产的代码，这将有所帮助。*

# button - 通过按钮更改文本字段中的文本

> ID：11903131
> 
> 赞同：0
> 
> 时间：2012-08-10T13:53:12.783
> 
> 标签：button, textfield, actionlistener

我有一个空指针错误。我尝试通过 System.out.print 打印按钮，它可以工作。我真的不知道怎么了。这是我的第一篇文章，对于任何错误，我深表歉意。这是代码：

```
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JTextField;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.FlowLayout;
import java.awt.Container;

class ChangeText implements ActionListener{
    JButton button;
    JTextField tfield;
    public ChangeText(){
        JFrame frame = new JFrame();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Change Text");
        frame.setLayout(new FlowLayout());

        JTextField tfield = new JTextField("old text");
        JButton button = new JButton("Change Text");
        button.addActionListener(this);

        frame.add(tfield);
        frame.add(button);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args){
        ChangeText ct = new ChangeText();
    }

    public void actionPerformed(ActionEvent e){
        tfield.setText(null);
    }

} 
```

编辑：这是我按下按钮时得到的

```
java.lang.NullPointerException
    at ChangeText.actionPerformed(ChangeText.java:42)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:32:59.340

此行正在创建 JTextField 的本地副本

```
JTextField tfield = new JTextField("old text"); 
```

做了

```
tfield = new JTextField("old text"); 
```

（以便您的 tfield 成员被实例化），一切都应该很好:)

# oracle - 如何确保没有插入重复的行

> ID：11903135
> 
> 赞同：1
> 
> 时间：2012-08-10T13:53:26.243
> 
> 标签：oracle, duplicates

我在 Oracle 中有一张表：

```
NAME     DATE      TIMEOFDAY    PAYMENT
SUBIR   10-08-12      DAY        10000 
SUBIR   10-08-12      NIGHT      12000 
```

现在我想在 oracle 表中进行修改，以便单个用户`pay`在特定的一天不能超过一次。例如，我不能像这样插入：

```
NAME     DATE      TIMEOFDAY    PAYMENT
SUBIR   10-08-12      DAY        10000 
SUBIR   10-08-12      NIGHT      12000
SUBIR   10-08-12      DAY        14000 
```

第 3 行不应插入前两条记录之后，因为已经在`day`on中进行了付款`10-08-12`。那么如何在 oracle 表中实现这个功能呢？

**编辑**-我想我必须制作`date`和`timeofday`合成`unique`。是否可以？我这样想的原因是，如果我将它们都`unique`分开制作，用户将不会第二次进入具有相同日期但不同`timeofday`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:59:37.143

在 上添加`UNIQUE`约束`(DATE, TIMEOFDAY)`：

```
ALTER TABLE tableX
  ADD CONSTRAINT unique_date_timeofday
    UNIQUE (DATE, TIMEOFDAY) ; 
```

此约束仅允许两个字段的唯一组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:16:32.723

1.  如果是主键：

`alter table YOUR_TABLE add constraint YOUR_TABLE_PK primary key (DATE, TIMEOFADAY);`

1.  如果你只需要唯一性

`create unique index YOUR_TABLE_IX1 on YOUR_TABLE_TAB (DATE, TIMEOFADAY);`

# javascript - 使用 jQuery 或 javascript 编写 Ajax

> ID：11903139
> 
> 赞同：0
> 
> 时间：2012-08-10T13:53:33.870
> 
> 标签：javascript, jquery, ajax

我尝试学习ajax。我刚刚知道有些人使用 javascript 编写 ajax，但有些人使用 jQuery。哪个更有用？jQuery 需要最短的代码，但为什么人们使用 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:55:38.377

JQuery 为 ajax 调用提供了一种更简单的跨浏览器语法。有些人不想依赖第三方库（出于安全原因），所以他们更喜欢手动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:56:32.247

首先，jQuery 是一个 JavaScript 库，所以即使你在使用 jQuery，你仍然在使用 JavaScript。

现在回答你的问题，我敢打赌为什么不使用库来发出 Ajax 请求可能有多种原因，但我想一个常见的原因是大多数库为从 Ajax 请求到 DOM 的所有内容提供了多种功能。操纵等。如果您只想发出 Ajax 请求并且不会使用库的其他功能，那么加载整个库可能会感觉很浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:56:36.363

ppl 使用纯 javascript，如果他们不需要其他 jquery 优势，或关心代码大小或其他原因，如果您可以在汇编程序上编程，为什么还要使用 C？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:57:15.250

jQuery 是一个 JavaScript 库。它是 JavaScript，它只是由其他人编写的。

它提供的 Ajax 功能可以节省开发时间。

另一方面，它增加了您可能不需要的额外行李。

其他库可用。示例包括[YUI和](http://yuilibrary.com/)[MicroJS](http://microjs.com/#)中列出的各种微型库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T13:57:39.873

使用纯 JavaScript 有很多原因。例如：

*   使用 jquery 有限制，由系统或负责该规则的人员定义
*   有些人不知道 Jquery 或无法处理它。
*   而到目前为止...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T13:57:51.770

真的，这取决于你在做什么。

jQuery 它非常有用，因为它可以减少完成任务所需的工作时间，但它并不能无所不能。

因此，它可以满足您的需要，如果您只需要 ajax 功能并且您有时间，您可以编写一个自定义跨浏览器功能来执行此操作，但如果您不关心在您的页面中包含 jQuery（额外请求）或你真的需要它来做很多事情，这是一个非常好的解决方案。

两者都是 javascript，但是 jQuery 它是由很多人编写和测试的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T14:00:16.710

问题（过去，但仍然存在）是我们有无数的浏览器和浏览器版本（包括移动版本）。

如果你想让你的 ajax 请求在所有这些事情中都能正常工作，你通常会使用一些第三方库来抽象所有已知的错误/问题并为你提供一个小接口。

这几乎是您想要使用像 jQuery 这样的库的唯一原因。

当然，您可以尝试创建自己的跨浏览器 ajax 代码。如果你有时间可以浪费，或者你想弄清楚所有的怪癖，这可能是一件好事。否则，您将重新发明轮子 22 次。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-10T14:00:27.210

jQuery ajax 有点简单。您需要一个服务器端文件（`php`或`asp`）来处理 ajax 请求并返回结果。

通常的程序是这样的；

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

[**您可以在此处**](http://www.w3schools.com/jquery/jquery_ref_ajax.asp)阅读有关 jQuery AJAX 方法的信息。

***[这](http://api.jquery.com/jQuery.ajax/)***是官方的 jQuery ajax 文档。

# wordpress - 派生 wordpress git 存储库的最佳方法是什么？

> ID：11903140
> 
> 赞同：0
> 
> 时间：2012-08-10T13:53:37.200
> 
> 标签：wordpress, git

我正在盯着新的 Wordpress 项目。我想使用 WP Github 存储库作为基础并将其推送到我自己的存储库。但我也想保存指向原始 WP 存储库的链接，在其上切换分支并拉取新的更新。最好的策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:05:17.507

只需将官方存储库设置为`official`，您的个人存储库设置为`personal`or `origin`：

```
git remote add official <official_remote> 
```

然后

```
git remote add personal <personal_remote_path> 
```

或者

```
git remote rm origin ;# remove the current origin, presumably the official one
git remote add origin <personal_remote_path> 
```

然后，您可以使用`git fetch official`和`git merge`从官方存储库中提取更新，或者您可以使用`git checkout`. 例如：

```
git fetch official
git merge official/master 
```

或者

```
git checkout -b official-master --track official/master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:17:23.753

只需在 GH 上获取 WP 存储库的分支，然后克隆您的分支而不是 WP 存储库。然后你可以添加官方作为远程`git remote add WP <the wp repo link>`。如果您希望自己的工作私有但是只需克隆 WP 存储库并为您的私有存储库创建一个新的远程`git remote add private <repo link>`。

在我看来，您应该将您的工作分离开 master 并保持 master 与 WP repo 同步。因此`git checkout -b mybranch`将创建一个基于 master 的新分支。当你想同步你的主人时，你应该只是`git fetch`然后`git merge WP/master`在你自己的主人上。

当您使用`git rebase master mybranch`

WP 通过整个命令是官方分支远程名称的别名，如果您克隆了 WP repo，它将是 origin

# matlab - 我有一个行向量，我想将它添加到矩阵的末尾

> ID：11903149
> 
> 赞同：2
> 
> 时间：2012-08-10T13:53:56.103
> 
> 标签：matlab, signal-processing, fft

我有很多 FFT 数据，我想将它们全部放入一个二维数组中。每个新条目看起来像：（`[1 2 3 4 5 6 7 ...]` 依此类推，对于 1200 列）。

我想将它添加到末尾（矩阵的底部），例如：

```
[ 1 2 3 4 5 6 7
  1 2 3 4 5 6 7
  ... ]             <-- add here please 
```

我想知道我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:05:27.990

我认为您的意思是基本串联

```
>> a = [1 2 3 4 5 6 7 ...];
>> b = [2 3 4 5 6 7 8 ...];
>> c = [a; b]
c = 
   1 2 3 4 5 6 7 ...
   2 3 4 5 6 7 8 ... 
```

如果您在循环中执行此操作，则预先分配矩阵是一个好习惯：

```
>> a = zeros(5);
>> for i = 1:5
>>     a(i, :) = randi(10,1,5);
>> end
a =
     3     6    10    10     2
    10    10     5     9     2
     5    10     8    10     7
     1     9    10     7     8
     8     4     7     2     8 
```

虽然在技术上可以“增长”数组（如 中`a = [a; randi(10,1,5)]`），但不建议在循环内执行此操作 - 这会使它们变得非常慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:38:42.110

或者，您可以使用[cat](http://www.mathworks.com/help/techdoc/ref/cat.html)进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:04:00.530

干杯，我已经设法使用不同的解决方案解决了我的问题。我将分享我的答案，以防将来有人偶然发现这一点。

```
i=1;
A=zeros(m,n);
while(i<m)
  (do some FFT stuff here)
  A(i,1:n)=(F.*conj(F))';       %where F is the temporary vector for storing FFT results
  i=i+1;
end 
```

# javascript - 输入按钮将显示按钮名称和值分开

> ID：11903152
> 
> 赞同：0
> 
> 时间：2012-08-10T13:54:15.847
> 
> 标签：javascript, html

我想设置不同的按钮名称显示并希望传递不同的值。

我尝试了以下代码，但它显示“是”并且还传递了值是。

```
<input type="button" name="poll" value="Yes" width="100" onclick="getVote(this.value)"/> 
```

基本上我想传递值 1 并将显示名称设置为是。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:56:21.363

这听起来太容易了，所以也许我误解了一些东西：只需 pass`1`而不是`this.value`to `getVote()`。

```
<input type="button" name="poll" value="Yes" width="100" onclick="getVote(1)"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:56:29.200

使用`<button>`代替`<input>`

```
<button name="name" value="value" type="submit">Your visible title</button> 
```

# ajax - JMeter 测试 AJAX 请求

> ID：11903153
> 
> 赞同：0
> 
> 时间：2012-08-10T13:54:25.187
> 
> 标签：ajax, jmeter

我有一个页面，它每 5 秒调用一次 ajax 并获取新数据。一段时间后，它被重定向到另一个页面并停止发出 ajax 请求。JMeter 在为每个页面发出请求后，有什么方法可以进行这些 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:37:35.003

您可以使用一个循环控制器来模拟这一点，该控制器将测试中断条件，并在小时候将 http 采样器与 5 秒计时器放在一起。

# java - Tomcat 的接受计数

> ID：11903154
> 
> 赞同：7
> 
> 时间：2012-08-10T13:54:25.820
> 
> 标签：java, tomcat, networking, tcp

我对 Tomcat 的`acceptCount`.
它说：

> 当所有可能的请求处理线程都在使用时，传入连接请求的最大队列长度。队列已满时收到的任何请求都将被拒绝。默认值为 10。

我不确定这是如何工作的。我的意思是我知道有一个单独的 TCP 队列来确定可以有多少连接，所以如果我放入`acceptCount`应用程序级别，例如 30000，它有什么区别吗？
我的意思是这个配置似乎没有用。

我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:07:45.413

[这是对ServerSocket](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#ServerSocket%28int,%20int%29)构造函数`backlog`参数的直接传递。这个想法是操作系统可以保留传入的连接，即使它们不能立即处理。仅当您有突发流量和快速处理时间时，它才有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:32:43.143

是的，它确实可以提供帮助。我见过一些具有相当大流量（每秒数十兆比特）的 java 应用程序。在某些时候，应用程序响应变得非常缓慢，经过一些研究，我决定增加 server.xml 中的 acceptcount 参数。它确实有帮助，问题就消失了。

# javascript - Firefox 中是否有某种组合键可以与 Javascript/jQuery 混淆？

> ID：11903155
> 
> 赞同：1
> 
> 时间：2012-08-10T13:54:28.843
> 
> 标签：javascript, jquery, firefox

我有一个网站，直到几天前它还可以正常工作。那天我很着急，可能点击了一个使 jQuery/Javascript 不起作用的组合键。

一开始，我认为这是一个程序错误，并试图修复它几天，然后我错误地使用 chrome 和 IE 检查了网站，并且两者都运行得非常正确。

我唯一的结论是我做了一些事情并关闭了 jQuery/Javascript。更奇怪的是，我在该页面上创建了一个新按钮，然后单击它会提醒某些东西并且它可以工作。所以它只是一半的 JS/jQuery 不起作用。

有人对此事有任何想法吗？

更具体地说，是否有在 Firefox 上部分禁用 Javascript 或 jQuery 的组合键？如果是这样，我该如何恢复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:09:56.393

我不认为 javascript 已关闭，因为您可以运行警报等。您可以发布您的代码吗？即便如此，要在 Firefox 中启用/禁用 javascript，您可以这样做：

*   工具菜单；
*   选项项目；
*   `Content`标签;
*   如果未选中，请选中“启用 javascript”。

也可以在 Firefox 中查看 about:config。我的javascript配置是：

![firefox的javascript配置](../Images/29a91d96b6489d53bae35a6a458ef24d.png)

PS`padrão`手段`default`和`número inteiro`手段`integer`

# ruby-on-rails - 在 Rails 生产环境中实时编译运行时生成的图像

> ID：11903164
> 
> 赞同：1
> 
> 时间：2012-08-10T13:54:51.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, production-environment

我刚刚开始部署我的 Rails 应用程序，它在运行时生成 .png 图像（由 graphviz 生成），我无法预编译它们。现在，我正试图弄清楚整个资产管道问题。

我在 Rails 生产中阅读了[config.assets.compile=true，为什么不呢？](https://stackoverflow.com/questions/8821864/config-assets-compile-true-in-rails-production-why-not)现场编译很糟糕。有什么聪明的方法可以处理这些资产，还是我必须硬着头皮使用实时编译？我可以只为这些运行时生成的图像打开实时编译并为所有其他资产使用预编译吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:14:46.410

我会将运行时生成的图像放在其他地方，不要尝试将它们放入资产管道中。例如，我将上传的图像放在主 rails 应用程序文件夹之外的共享文件夹中，并在部署时对其进行符号链接（我使用 capistrano 进行部署，这是一个非常标准的设置）。

资产管道非常适合确保人们在部署新文件时获得正确的图像/样式表/js，但它似乎不适用于将在运行时创建的东西。

# vim - Fortran 77 注释的语法高亮在 vim 中不起作用

> ID：11903166
> 
> 赞同：5
> 
> 时间：2012-08-10T13:54:55.780
> 
> 标签：vim, comments, fortran

我有一个用 Fortran 77 编写的代码，我用 vim 阅读它。代码的编写使得注释在以 开头的行上`c`，这在 Fortran 77 中是标准的。但是，vim 无法识别它们，因此使用了使代码非常难以阅读的着色语法！我该如何克服呢？

我看到有一个[帖子有同样的问题](https://stackoverflow.com/questions/9505125/fortran-free-source-interrupts-comment-syntax-coloring-in-vim)。我已阅读答案并尝试了建议的不同解决方案：

1.  添加`let fortran_have_tabs=1`到 .vimrc

2.  添加

    ```
    syn match fortranComment excludenl "^[!c*].*$" contains=@fortranCommentGroup,@spell
    syn match fortranComment excludenl "!.*$" contains=@fortranCommentGroup,@spell 
    ```

    到 .vimrc

但他们不适合我。有人知道为什么吗？我在某个地方犯了错误吗？否则，有人有不同的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T21:52:54.083

这在我的 .vimrc 中对我有用：

```
let fortran_have_tabs=1
if has('syntax') && (&t_Co > 2)
    syntax enable
endif 
```

最重要的部分很可能是那个`syntax enable`部分。你可能还需要这个：

```
filetype on 
```

还可以尝试输入`:help ft-fortran-syntax`并阅读（或参见此处：http: [//vimdoc.sourceforge.net/htmldoc/syntax.html#ft-fortran-syntax](http://vimdoc.sourceforge.net/htmldoc/syntax.html#ft-fortran-syntax)）。我从中得到的是我需要创建文件`~/.vim/ftplugin/fortran.vim`并将其放入其中：

```
let s:extfname = expand("%:e")
if s:extfname ==? "f90"
  let fortran_free_source=1
  unlet! fortran_fixed_source
else
  let fortran_fixed_source=1
  unlet! fortran_free_source
endif 
```

并将其放入您的 .vimrc 中：

```
filetype plugin indent on 
```

这对我有用，因此我可以毫无问题地查看和编辑自由格式和固定格式。

# java - 在java中将java.util.HashMap转换为scala.collection.immutable.Map

> ID：11903167
> 
> 赞同：25
> 
> 时间：2012-08-10T13:54:57.943
> 
> 标签：java, scala, scala-collections

我正在使用我的 Java 代码中的一些 Scala 库。我对收藏有疑问。我需要`scala.collection.immutable.Map`作为方法的参数传递。我可以从我的 Java 代码转换或构建`immutable.Map`，但我不知道该怎么做。建议？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-10T14:26:41.723

它完全可以`JavaConverters`在 Java 代码中使用——只需要跳过几个额外的环节：

```
import java.util.HashMap;
import scala.Predef;
import scala.Tuple2;
import scala.collection.JavaConverters;
import scala.collection.immutable.Map;

public class ToScalaExample {
  public static <A, B> Map<A, B> toScalaMap(HashMap<A, B> m) {
    return JavaConverters.mapAsScalaMapConverter(m).asScala().toMap(
      Predef.<Tuple2<A, B>>conforms()
    );
  }

  public static HashMap<String, String> example() {
    HashMap<String, String> m = new HashMap<String, String>();
    m.put("a", "A");
    m.put("b", "B");
    m.put("c", "C");
    return m;
  }
} 
```

我们可以证明这在 Scala REPL 中有效：

```
scala> val jm: java.util.HashMap[String, String] = ToScalaExample.example
jm: java.util.HashMap[String,String] = {b=B, c=C, a=A}

scala> val sm: Map[String, String] = ToScalaExample.toScalaMap(jm)
sm: Map[String,String] = Map(b -> B, c -> C, a -> A) 
```

当然，您也可以轻松地从 Java 代码中调用这些方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-01T03:04:06.310

我对 Java 1.7 和 Scala 2.11 的解决方案：

```
@SuppressWarnings("unchecked")
private static <K, V> scala.collection.immutable.Map<K, V> toScalaImmutableMap(java.util.Map<K, V> javaMap) {
    final java.util.List<scala.Tuple2<K, V>> list = new java.util.ArrayList<>(javaMap.size());
    for (final java.util.Map.Entry<K, V> entry : javaMap.entrySet()) {
        list.add(scala.Tuple2.apply(entry.getKey(), entry.getValue()));
    }
    final scala.collection.Seq<Tuple2<K, V>> seq = scala.collection.JavaConverters.asScalaBufferConverter(list).asScala().toSeq();
    return (scala.collection.immutable.Map<K, V>) scala.collection.immutable.Map$.MODULE$.apply(seq);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-28T12:18:41.267

这对我来说适用于 java 1.8 和 scala 2.12：

```
public static <K, V> scala.collection.immutable.Map<K, V> toScalaImmutableMap(java.util.Map<K, V> jmap) {
    List<Tuple2<K, V>> tuples = jmap.entrySet()
      .stream()
      .map(e -> Tuple2.apply(e.getKey(), e.getValue()))
      .collect(Collectors.toList());

    Seq<Tuple2<K, V>> scalaSeq = JavaConverters.asScalaBuffer(tuples).toSeq();

    return (Map<K, V>) Map$.MODULE$.apply(scalaSeq);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-16T13:20:51.533

由于我无法使用[Alexey 的](https://stackoverflow.com/a/64109626/2359227)回答，我将在 Scala 2.13 中添加它可以使用：

```
scala.collection.immutable.Map<Integer, String> scalaMap =
        scala.collection.immutable.Map.from(scala.jdk.CollectionConverters.MapHasAsScala(javaMap).asScala()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T13:58:18.533

您能否提供一个额外的 API 调用来获取/提供使用[JavaConverters](http://www.scala-lang.org/api/current/scala/collection/JavaConverters%24.html)转换的 java.util.Map ？

```
class Example {
   import scala.collection.JavaConverters._
   def fromMap(m:Map[...]) = ...

   // generics etc. elided
   def fromJava(m:java.util.Map) = {
      fromMap(m.asScala.toMap)
   }
} 
```

您可能希望提取转换并提供装饰器（特别是当我注意到您正在使用 Scala 库时）。请注意*dhg*的评论。不变性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-28T21:06:41.340

从 Scala 2.13 开始，您可以使用它`CollectionConverters`来实现这一点。

有

```
Map<String, String> javaMap = ... 
```

首先，我们将其转换为可变的 Scala 映射：

```
import scala.jdk.javaapi.CollectionConverters$;

var mutableScalaMap = CollectionConverters$.MODULE$.asScala(javaMap); 
```

然后是不可变的：

```
var scalaMap = scala.collection.immutable.Map$.MODULE$.from(mutableScalaMap); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-10-30T19:02:43.353

只需使用***toMap*** (Scala 2.12)

```
import scala.collection.JavaConverters._

// asScala creates mutable Scala Map
// toMap after asScala creates immutable Map

val scalaImmutableMap = javaMap.asScala.toMap 
```

# assembly - 更改 NASM 中的标签值

> ID：11903171
> 
> 赞同：0
> 
> 时间：2012-08-10T13:55:28.993
> 
> 标签：assembly, label, nasm

一旦我们使用 RESX 或 DX 命令分配了一个标签（其中 X 可以是 B、W、D、Q、T），以后是否可以为该标签分配一个内存位置？

例如，我可以做类似的事情，

`mov label, X560h`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:40:29.120

我认为这是不可能的。标签不能更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-29T17:45:51.797

标签不在最终代码中（至少如果您有二进制输出）。在执行代码时更改汇编程序的常量没有任何意义。

有两种方法可以做到：

1.  使用 %undef 取消定义标签并重新定义它
2.  编写自修改代码来更改对标签的所有引用。

（我认为选项2对您没有帮助）

# .net - 为什么 System.Web.Security.Roles.RoleExists 结合 LocalDB 源需要 MSDTC？

> ID：11903185
> 
> 赞同：0
> 
> 时间：2012-08-10T13:56:03.483
> 
> 标签：.net, asp.net-membership, transactionscope, msdtc, localdb

在 .NET 4.0 项目中，由于我的开发机器上未启用[MSDTC](http://en.wikipedia.org/wiki/Distributed_Transaction_Coordinator)，我遇到了对 inside 的调用`System.Web.Security.Roles.RoleExists`失败。角色管理器的数据源是 LocalDB，提供者的类型是。我已经安装了 NuGet package ，我相信它提供了角色管理器的提供程序。`System.Transactions.TransactionScope``System.Web.Providers.DefaultRoleProvider``Microsoft.AspNet.Providers.LocalDB`

是什么导致需要 MSDTC？

## 代码

失败的调用：

```
using (var ts = new TransactionScope())
{
    Roles.RoleExists("Administrator");
} 
```

web.config 中的相关配置部分：

```
<connectionStrings>
  <clear />
  <add name="MembershipConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyDB;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\mydb.mdf" providerName="System.Data.SqlClient" />
</connectionStrings>

<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <remove name="AspNetSqlRoleProvider" />
    <add connectionStringName="MembershipConnection" applicationName="/" name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </providers>
  </roleManager> 
```

## 测试项目

我创建了一个测试 ASP.NET MVC 4 Internet 应用程序来演示该问题。下载[TestBundles](http://sdrv.ms/Nww5sn) Visual Studio 2012 解决方案，调试应用程序并单击“登录”链接。由于我已经使该`Login`操作尝试验证角色，除非您在计算机上启用了 MSDTC，否则您应该会收到异常。

```
public ActionResult Login(string returnUrl)
{
    using (var ts = new TransactionScope())
    {
        Roles.RoleExists("Administrator");
    }

    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:43:09.780

我遇到了同样的问题。然后我发现这只发生在第一次初始化会员资格时。如果您在进入 TransactionScope 之前对任何 Membership 方法进行任何调用，它将不必初始化并提升为 DTC。

作为一个小技巧（效果很好），将以下内容添加到您的应用启动中：

```
 protected void Application_Start()
    {
        Membership.GetNumberOfUsersOnline();
    } 
```

这将导致成员资格被初始化，然后您将不必从那时起在事务范围内登记 DTC。

# search - JQGrid：在过滤器工具栏中剪切和粘贴不会触发过滤

> ID：11903187
> 
> 赞同：2
> 
> 时间：2012-08-10T13:56:04.870
> 
> 标签：search, jqgrid, toolbar

我的经历[与 JQGrid 论坛](http://www.trirand.com/blog/?page_id=393/bugs/cutting-and-pasting-in-a-filter-toolbar-does-not-trigger-filtering/)中报道的完全一样。

如果我通过鼠标将一些文本复制并粘贴到搜索字段中（即右键单击，“粘贴”），则不会触发搜索。如果我通过键盘复制和粘贴（例如 Ctrl + C 和 Ctrl + V），则会触发搜索。

即，似乎搜索仅在按键/按键上触发 - 我如何配置网格以识别鼠标粘贴事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:31:32.483

你有两个可以尝试的选择。

**选项1：**

您可以将工具栏设置为仅在输入时进行搜索，方法是在设置工具栏时将 searchOnEnter 设置为 true。这将需要在过滤器发生之前单击输入，无论它是如何输入的

```
$("#grid_id").jqGrid('filterToolbar',{ searchOnEnter: true }); 
```

**选项2：（更新以修复错误）**

使用 jQuery 检测粘贴事件，然后调用 api 触发工具栏搜索。

```
var headers = $('.ui-th-column');
$.each(headers, function(index, item) {
     var div = $(this).children('div');
     if (div.length > 0) {
         var input = div.children('input');
         if (input.length > 0) {
             $(input).bind('paste', function(e) {
                  var sgrid = $("#grid_id")[0];
                  sgrid.triggerToolbar();
              });
         }
     }
}); 
```

*注意：似乎没有办法使用新的 api 触发搜索。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:02:15.393

我想我已经破解了。您可以在 searchOptions 的“dataEvents”数组中添加“粘贴”事件：

```
var colModel = [...,
    searchoptions: {
        dataEvents: [
                       { type: 'paste',  
                         fn: function(e) { 
                           setTimeout(function() {
                             var sgrid = $("#grid_id")[0]; 
                             sgrid.triggerToolbar();
                           }, 1);   
                         }  
                       }
                    ]}
]; 
```

**注意 setTimeout 调用**- 我发现有必要添加，否则在没有粘贴值的情况下触发搜索

该解决方案与@fbfcn 提出的选项2 大致相同，但我更喜欢它，因为它与API 更清洁。

评论赞赏！

# ajax - 为什么 $.getJSON 会反转响应列表？

> ID：11903189
> 
> 赞同：0
> 
> 时间：2012-08-10T13:56:06.387
> 
> 标签：ajax, jquery

我有以下代码：

```
// Setup a content array for the tooltips
var Data = [];
var search = $("input#field_search").val();
var combo = $("select#search_option").val();
var jsonUrl = "ajax.php?module=formation&action=get_participant_list_json&filter_by=" + combo + "&search=" + search;

$.getJSON(jsonUrl, function(data) {
    var items = [];
    alert(data.join(" || " )); //WHAT TO SHOW YOU HERE

    $.each(data, function(key, val) {
        //alert(val);
        items.push(val.replace(/@/gi, "#"));
    });
    //console.log(items);
    //alert(items.join(" || " ));
    $(".tips").each(function(i) {
        $(this).simpletip({ content: items[i] });
    });
}); 
```

如果我访问

`ajax.php?module=formation&action=get_participant_list_json`

或者

`ajax.php?module=formation&action=get_participant_list_json&filter_by=&search=`

直接用IE7，我按以下顺序得到好的响应数据：

```
["0Bequart Claire","1AZZI Sarah"] 
```

但如果`alert(data.join(" || " ));`我被逆转

```
 0AZZI Sarah || 1Bequart Claire 
```

你知道我的错误在哪里吗？为什么响应列表是倒序的？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:10:54.893

我无法完全遵循您的代码，因此如果我误解了，我深表歉意，但 .push 看起来像是旨在实现 LIFO 堆栈的操作。如果您想按照加载它的相同顺序卸载（列出）数组，您应该使用附加操作加载它并使用迭代器卸载它。

# mercurial - Mercurial ：标记特定的变更集

> ID：11903190
> 
> 赞同：13
> 
> 时间：2012-08-10T13:56:07.033
> 
> 标签：mercurial, tags, changeset

我想编写一个识别当前变更集并标记它们的应用程序。我知道我们可以使用 `hg identify`.

获得变更集后，有什么方法可以标记它吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-10T13:59:26.560

从[文档](http://www.selenic.com/mercurial/hg.1.html#tag)中：

```
hg tag [-f] [-l] [-m TEXT] [-d DATE] [-u USER] [-r REV] NAME... 
```

所以这应该工作：

```
$ hg tag -r revision tagname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:15:24.533

```
$ hg tag -r changeset tagname 
```

谢谢

# c# - 将 Thumbs.db 读入字符串列表时出错

> ID：11903200
> 
> 赞同：0
> 
> 时间：2012-08-10T13:56:43.173
> 
> 标签：c#, streamreader

此代码旨在从我存储的文本文件中读取文件夹目录，并使用该“activeFilepath”变量读取文件夹中的每个文件并检索它们的名称，这反过来又可用于将每个图像加载到转动。

```
StreamReader textIn = new StreamReader(imageSet);
try
{
    //Get the folder location by reading in the specific text file.
    activeFilepath = textIn.ReadLine();
    //If the user isn't choosing a password then go into the 'Blurred' directory of the folder.
    if (choosePassword == false)
       activeFilepath = activeFilepath + @"\Blurred";

    int i = 0;
    //Read in all of the image location strings, and put them in the pictureLocations list.
    foreach (string filePath in Directory.EnumerateFiles(activeFilepath))
    {
        pictureLocations.Add(filePath);
        //pictureLocations[i] = filePath;

        // Display an error image if there is a blank entry in the picture location.
        if (pictureLocations[i] == null)
            pictureLocations[i] = @"C:\Users\Public\Pictures\Sample Pictures\error.png";
        //Remove Thumbs.db from the list if read in.
        if (pictureLocations[i] == activeFilepath + @"\Thumbs.db")
        {
            pictureLocations.Remove(pictureLocations[i]);
        }

        i++;
    }

    foreach (PictureBox imagePanel in pictureBoxList)
    {
        int rand = randomGenerator.Next(0, pictureLocations.Count);
        //The images are then loaded in a random order from the picture location list.
        imagePanel.Load(pictureLocations[rand]);

        //Remove the picture just loaded out of the list so it won't repeat.
        pictureLocations.Remove(pictureLocations[rand]); 
        imagePanel.SizeMode = PictureBoxSizeMode.StretchImage;
    } 
```

目前，当我从列表中删除 Thumbs.db 时，我收到一个索引类型错误，指出索引超出范围（因为我不想将其加载到表单上的图片框中），但是当我只是让它读入，我收到一个参数类型错误。

我假设我得到后者是因为它试图将 Thumbs.db 作为图像加载，但我想知道是否有另一种方法可以从一开始就删除或阻止它被读取？完全是另外一回事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:54:17.163

崩溃是`i`即使你没有添加任何东西，你也会增加。如果您不打算保留它，一个简单的解决方法就是不添加该项目。这样你就不需要讨厌的`i`变量了。

```
//Read in all of the image location strings, and put them in the pictureLocations list.
foreach (string filePath in Directory.EnumerateFiles(activeFilepath))
{
    // Display an error image if there is a blank entry in the picture location.
    if (filePath == null)
        filePath = @"C:\Users\Public\Pictures\Sample Pictures\error.png";
    //Skip Thumbs.db
    if (filePath == activeFilepath + @"\Thumbs.db")
    {
        continue;
    }

    pictureLocations.Add(filePath);
} 
```

换句话说，与其添加一个项目，然后意识到你并不是要添加它（并且必须跟踪它的位置），不如简单地预先决定是否要添加它（以及是否需要待编辑），如果你想保留它，然后添加它。

`pictureLocation`这避免了和之间脆弱的关系`i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:29:54.497

您可以尝试将 .db 从枚举中完全过滤掉，这样您就不必将其删除。

```
foreach (string filePath in Directory.EnumerateFiles(activeFilepath, "*.*",
                                                     SearchOption.AllDirectories)
                                                     .Where(x => Path.GetExtension(x) != ".db"))
{

} 
```

**您的代码将如下所示：**

```
List<string> enumerateFiles = Directory.EnumerateFiles(activeFilepath, "*.*", SearchOption.AllDirectories).ToList();

for (int i = 0; i < enumerateFiles.Count(); i++)
{
    String filePath = enumerateFiles[i];

    // skip the .db file
    if (Path.GetExtension(filePath) != ".db")
    {
        continue;                    
    }

    pictureLocations.Add(filePath);
    //pictureLocations[i] = filePath;

    // Display an error image if there is a blank entry in the picture location.
    if (pictureLocations[i] == null)
        pictureLocations[i] = @"C:\Users\Public\Pictures\Sample Pictures\error.png";

} 
```

# php - 使用 PHP 三元运算符将数据传递给方法

> ID：11903201
> 
> 赞同：1
> 
> 时间：2012-08-10T13:56:43.387
> 
> 标签：php, methods, ternary

我一直在研究一些自定义类，包括调试错误方法。使用常量调试变量

```
define('DEBUG', 3); 
```

我设置了要显示的调试级别。FALSE（无）、1（基本）、2（中等）、3（高级）等。

在整个代码中，我都调用了所述调试方法。经验：

```
if(DEBUG == TRUE)
    $this->status("DB connection",NULL); 
```

这可以浓缩成三元算子吗？就像是：

```
$this->debug($title, $response, $die) = (DEBUG == TRUE) ? ("DB Connection", NULL) : (NULL) ; 
```

我知道它有点长，但是将它们全部放在一条线上等会更容易维护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:01:19.647

为什么不把测试`if (DEBUG == whatever)`放在`$this->debug`函数里面呢？

然后你的代码看起来像：

```
$this->debug("DB Connection", NULL); 
```

还有你的调试功能：

```
function debug($title, $response, $die = FALSE)
{
    if (DEBUG == whatever)
      dosomething();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T14:01:41.843

你应该反过来做。`debug`始终无条件地创建一个方法/函数，以调试级别调用它。在该方法中，确定是否满足级别。

```
$this->debug('DB connection', DEBUG_INFO);

public function debug($message, $level) {
    if (DEBUG >= $level) {
        echo $message;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:02:31.580

如果您倾向于将所有内容放在一行中，则可以使用

```
DEBUG && $this->status("DB connection",NULL); 
```

但是，与仅使用 if 语句相比，这可能会影响代码的可读性。

# google-chrome - 如何确保我的 content_script.js DOM 操作不会被当前的 html 页面覆盖

> ID：11903202
> 
> 赞同：0
> 
> 时间：2012-08-10T13:56:49.303
> 
> 标签：google-chrome, scripting

我创建了一个 Chome content_script 扩展，并且正在尝试将一些元素添加到 Twitter 页面。

我已经能够毫无问题地将我的元素添加到页面中，但是我添加的元素不会在页面上停留很长时间，我认为 Twitter 一直在运行一些请求并更新 html，因此它会删除我的元素。

我如何才能将我的元素保留在页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:19:49.540

好吧，我找到了解决我的问题的方法，呵呵，我只需要检查总是被刷新的元素，并在元素更改时更新 DOM 元素。

# php - 如何在绑定结果中删除此 mysqli 警告？

> ID：11903207
> 
> 赞同：0
> 
> 时间：2012-08-10T13:57:07.720
> 
> 标签：php, mysql, database, mysqli

我在我的错误报告中收到一条 mysqli 警告，指出`Warning: mysqli_stmt::bind_result() [mysqli-stmt.bind-result]: Number of bind variables doesn't match number of fields in prepared statement in ... on line 36` 有谁知道我如何正确绑定结果以便此警告消失？我真的看不出问题出在哪里，但是在使用 mysqli 时，我是一个初学者。

下面是代码：

```
<?php
  // PHP code
  session_start(); 

//connected to db

  // required variables (make them explciit no need for foreach loop)
  $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
  $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
  $loggedIn = false;

  if (isset($_POST['submit'])) {

    $teacherpassword = md5(md5("j3Jf92".$teacherpassword."D203djS"));  

    // don't use $mysqli->prepare here
    $query = "SELECT * FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword);

    while($stmt->fetch()) {
      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
        $loggedIn = true;
      }
    }

    if ($loggedIn == true){
      // left your session code as is - but think wisely about using
      $_SESSION['teacherforename'] = $dbTeacherForename;
      $_SESSION['teachersurname'] = $dbTeacherSurname;
      header( 'Location: menu.php' ) ;
      die();
    }

       /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:01:06.733

不推荐使用通配符 *。表中的列可能比您需要的 4 列更多？

我会去

```
SELECT TeacherForname, TeacherSurname, TeacherUsername, TeacherPassword FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:11:29.543

发生错误是因为您要求 mysqli 将`x`列绑定到`y`变量 where `x != y`。表中有多少列`Teacher`？

# php - Mysql：在 ORDER BY 旁边的结果数组顶部移动特定记录

> ID：11903209
> 
> 赞同：1
> 
> 时间：2012-08-10T13:57:11.837
> 
> 标签：php, mysql

在 mysql db 表中，我有所有国家/地区，例如：

![国家表](../Images/c3b7fa325c2bd784a95b18c8500cdeba.png)

我把所有国家都取为：

```
SELECT * FROM countries_table ORDER BY country_name 
```

但我想在列表顶部显示一些特定国家：

![特定国家](../Images/f5000b62ddfa118e1a1bb80bdd752762.png)

然后其他将按**国家名称排序**

它可以通过**MYSQL**和/或**PHP**解决吗？如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T14:05:20.187

有一个简单但不为人知的 MySQL 技巧：

```
SELECT * FROM countries_table
ORDER BY name = 'Australia' desc,
         name = 'UAE' desc,
         name = 'Pakistan' desc,
         name = 'UK' desc,
         name = 'USA' desc,
         name asc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:09:06.770

使用[字段](http://www.electrictoolbox.com/mysql-order-specific-field-values/)

```
SELECT country_id, country_name 
FROM countries_table 
    ORDER BY 
FIELD(country_name, 'USA', 'UK', 'Pakistan', 'UAE', 'Australia') DESC,
country_name ASC 
```

已编辑：感谢[评论](https://stackoverflow.com/questions/11903209/mysql-move-specific-records-on-top-of-the-resultant-array-beside-order-by/11903431#comment-15845407) [mvf](https://stackoverflow.com/users/1555175/mvf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:00:57.713

这应该有效：

```
SELECT country_id,
     country_name
FROM countries_table
ORDER BY (CASE country_name WHEN 'Australia' THEN '1'
                            WHEN 'UAE' THEN '2' 
                            ...
                            ELSE country_name 
          END) ASC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:19:01.883

另一种方法是使用`UNION`：

```
(SELECT * FROM countries_table
WHERE name IN('Australia', 'UAE', 'Pakistan', 'UK', 'USA')
ORDER BY name ASC)
UNION
(SELECT * FROM countries_table
WHERE name NOT IN('Australia', 'UAE', 'Pakistan', 'UK', 'USA')
ORDER BY name ASC) 
```

文档：[联合](http://dev.mysql.com/doc/refman/5.5/en/union.html)

# php - HTML 5 Boilerplate 在 PHP 服务器上不起作用？

> ID：11903213
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:57:20.227
> 
> 标签：php, apache, html5boilerplate

好的，所以我先承认：我不知道自己在做什么。我以前从未使用过 H5BP，我不是开发人员，我是设计师。

我在本地下载了 H5BP。我没有在本地运行 Apache。我在我的 HTML 编辑器中设置了我的网站。它在本地工作。我将它上传到运行现有 Apache PHP 站点的服务器。我收到此错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 root@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

为了在运行 PHP 的 Apache 服务器上进行这项工作，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:05:21.930

不完全漂亮，但嗯...

一种解决方案是删除 .htaccess 并在您确实需要时自己编写一个。

如果没有该文件，它应该真的可以工作。但我认为你应该检查你的日志文件，看看究竟是什么触发了错误。

# html - HTML 相对路径，浏览器不附加域

> ID：11903214
> 
> 赞同：2
> 
> 时间：2012-08-10T13:57:22.223
> 
> 标签：html, relative-path

我正在努力建立并运行一个由其他人设计的网站，但我遇到了一个我以前从未见过的奇怪问题。

在整个网站中，所有文件路径都是相对的，例如，所有 img 标签都有一个 src，如 src='i/image.png'。css 链接标签、脚本标签等也是如此。这很正常，我过去从未遇到过任何问题。

问题是，当有些人使用浏览器访问网站时，这些资源都没有加载，但对于其他人来说，网站加载得很好。在其中一台无法正常工作的计算机上检查页面后，我看到图像的 URL 是`http://i/image.png`，而在正常工作的计算机上是`http://mydomain.com/i/image.png`。

对此有何解释？为什么有些计算机（全部使用 IE）无法添加域，而其他计算机正常工作？如果这可能是罪魁祸首，我们在这里工作的代理背后，因为我还没有看到该站点从我们的网络外部错误地加载。此外，站点使用 XHTML 1.0 Transitional 的文档类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:23:06.330

好的，我想我已经找到了答案。似乎在 IE 中，在兼容性视图设置中，默认选中“在兼容性视图中显示 Intranet 站点”。因此，我们网络中访问该网站的任何人都被迫进入兼容性视图，这会破坏图像、css 和脚本的所有路径。访问该网站的网络外部的任何人都将为其工作，除非他们明确打开兼容性视图。

在另一个 Stack Overflow[线程](https://stackoverflow.com/a/7685060/856346)上，我发现了一个 hack，据我所知，它总是阻止为该站点启用兼容性视图。

# magento-1.7 - 管理区域内“管理客户”页面上的 Magento 问题

> ID：11903217
> 
> 赞同：1
> 
> 时间：2012-08-10T13:57:37.330
> 
> 标签：magento-1.7

我在一家使用 Magento 的商店工作，遇到了一个大问题，但我不知道出了什么问题。当我在管理区域中单击“管理客户”时，它向我显示以下错误：

```
Fatal error: Call to a member function getBackend() on a non-object in /home/opositivo/developositivo/public_html/pinklemon/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php on line 516 
```

该行周围的代码是：

```
foreach ($attribute as $attributeItem) {
        if (isset($this->_staticFields[$attributeItem])) {
                $attrField = sprintf('e.%s', $attributeItem);
        } else {
                $attributeInstance = $this->getAttribute($attributeItem);

                if ($attributeInstance->getBackend()->isStatic()) {
                        $attrField = 'e.' . $attributeItem;
                } else {
                        $this->_addAttributeJoin($attributeItem, 'left');
                        $attrField = $this->_getAttributeFieldName($attributeItem);
                }
        }

        $fullExpression = str_replace('{{attribute}}', $attrField, $fullExpression);
        $fullExpression = str_replace('{{' . $attributeItem . '}}', $attrField, $fullExpression);
} 
```

第 516 行是：

```
if ($attributeInstance->getBackend()->isStatic()) { 
```

这个“getBackend（）”函数似乎有问题。在测试过程中，我看到了以下报告错误：

```
a:5:{i:0;s:34:"Invalid attribute name: school";i:1;s:5727:"#0 /home/opositivo/developositivo/public_html/pinklemon/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(1294): Mage::exception('Mage_Eav', 'Inv??lido nome ...') 
```

我在 magento db 中进行了搜索，但是没有找到“学校”搜索的任何结果。

有谁知道这个问题并可以帮助我？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-16T09:03:30.453

我解决了这个问题。

`if (!$attrInstance) return true;`在 516 行之前添加，

您的代码如下所示：

```
foreach ($attribute as $attributeItem) {
        if (isset($this->_staticFields[$attributeItem])) {
                $attrField = sprintf('e.%s', $attributeItem);
        } else {
                $attributeInstance = $this->getAttribute($attributeItem);

/** Add this line in code to solve the problem **/
           if (!$attrInstance) return true;

                if ($attributeInstance->getBackend()->isStatic()) {
                        $attrField = 'e.' . $attributeItem;
                } else {
                        $this->_addAttributeJoin($attributeItem, 'left');
                        $attrField = $this->_getAttributeFieldName($attributeItem);
                }
        }

        $fullExpression = str_replace('{{attribute}}', $attrField, $fullExpression);
        $fullExpression = str_replace('{{' . $attributeItem . '}}', $attrField, $fullExpression);
} 
```

# c# - 在现有图像文件上写文本？

> ID：11903218
> 
> 赞同：5
> 
> 时间：2012-08-10T13:57:37.410
> 
> 标签：c#, .net, wpf, visual-studio

所以我在 WinForms .NET 3.5 中执行此操作……我现在正在使用 WPF .NET 4.0……但我不知道该怎么做。

这就是我在 Windows .NET 3.5 中所做的

```
using (Bitmap eventImg = new Bitmap("input.png"))
{
    Graphics eventGfx = Graphics.FromImage(eventImg);

    buildText(eventGfx, this.event1.Text);

    eventImg.Save("output.png", ImageFormat.Png);
    eventGfx.Dispose();
} 
```

上面的代码在“input.png”中获取现有图像，从中创建一个新图像，从中写入文本，然后将新图像保存在“output.png”中。文本是使用以下函数编写的：

```
private void buildText(Graphics graphic, string text)
{
    if (text.Length == 0) { return; }

    FontStyle weight = FontStyle.Regular;

    switch (this.font_style)
    {
        case "regular":     weight = FontStyle.Regular;     break;
        case "bold":        weight = FontStyle.Bold;        break;
        case "italic":      weight = FontStyle.Italic;      break;
        case "underline":   weight = FontStyle.Underline;   break;
        case "strikeout":   weight = FontStyle.Strikeout;   break;
    }

    using (Font font = new Font(this.font_family, this.font_size, weight, GraphicsUnit.Pixel))
    {
        Rectangle rect = new Rectangle(this.left, this.top, this.width, this.height);
        Brush brush = new SolidBrush(Color.FromArgb(this.font_color));

        StringFormat format = new StringFormat();

        switch (this.align_x)
        {
            case "left":    format.Alignment = StringAlignment.Near;     break;
            case "right":   format.Alignment = StringAlignment.Far;      break;
            default:        format.Alignment = StringAlignment.Center;   break;
        }

        switch (this.align_y)
        {
            case "top":     format.LineAlignment = StringAlignment.Near;    break;
            case "bottom":  format.LineAlignment = StringAlignment.Far;     break;
            default:        format.LineAlignment = StringAlignment.Center;  break;
        }

        graphic.TextRenderingHint = TextRenderingHint.AntiAlias;
        graphic.DrawString(text, font, brush, rect, format);
    }
} 
```

但是，由于 WPF .NET 4.0 中不存在 System.Drawing，所以我不能再使用这些函数了。我将如何在 WPF .NET 4.0 中做我想做的事情？为了完成基于旧图像制作图像的第一步，我已经了解了下面的代码：

```
using (var fileStream = new FileStream(@"z:\ouput.png", FileMode.Create))
{
    BitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(new Uri(@"z:\input.png")));
    encoder.Save(fileStream);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T20:09:16.030

在这里阅读答案和评论后，我认为您可能会喜欢更全面的解决方案。这是一个完成这项工作的小方法：

```
public static void WriteTextToImage(string inputFile, string outputFile, FormattedText text, Point position)
{
    BitmapImage bitmap = new BitmapImage(new Uri(inputFile)); // inputFile must be absolute path
    DrawingVisual visual = new DrawingVisual();

    using (DrawingContext dc = visual.RenderOpen())
    {
        dc.DrawImage(bitmap, new Rect(0, 0, bitmap.PixelWidth, bitmap.PixelHeight));
        dc.DrawText(text, position);
    }

    RenderTargetBitmap target = new RenderTargetBitmap(bitmap.PixelWidth, bitmap.PixelHeight,
                                                       bitmap.DpiX, bitmap.DpiY, PixelFormats.Default);
    target.Render(visual);

    BitmapEncoder encoder = null;

    switch (Path.GetExtension(outputFile))
    {
        case ".png":
            encoder = new PngBitmapEncoder();
            break;
        // more encoders here
    }

    if (encoder != null)
    {
        encoder.Frames.Add(BitmapFrame.Create(target));
        using (FileStream outputStream = new FileStream(outputFile, FileMode.Create))
        {
            encoder.Save(outputStream);
        }
    }
} 
```

您可以将此方法与[FormattedText](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext.aspx)对象和位置一起使用：

```
FormattedText text = new FormattedText(
    "Hello",
    CultureInfo.InvariantCulture,
    FlowDirection.LeftToRight,
    new Typeface("Segeo UI"),
    20,
    Brushes.Red);

WriteTextToImage(
    @"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg",
    "Desert.png",
    text,
    new Point(10, 10)); 
```

编辑：如果要绘制相对于某个矩形水平和垂直对齐的文本，您可以用`position`该矩形和两个对齐参数替换参数并计算文本位置，如下所示：

```
public static void WriteTextToImage(string inputFile, string outputFile, FormattedText text,
    Rect textRect, HorizontalAlignment hAlign, VerticalAlignment vAlign)
{
    BitmapImage bitmap = new BitmapImage(new Uri(inputFile));
    DrawingVisual visual = new DrawingVisual();
    Point position = textRect.Location;

    switch (hAlign)
    {
        case HorizontalAlignment.Center:
            position.X += (textRect.Width - text.Width) / 2;
            break;
        case HorizontalAlignment.Right:
            position.X += textRect.Width - text.Width;
            break;
    }

    switch (vAlign)
    {
        case VerticalAlignment.Center:
            position.Y += (textRect.Height - text.Height) / 2;
            break;
        case VerticalAlignment.Bottom:
            position.Y += textRect.Height - text.Height;
            break;
    }

    using (DrawingContext dc = visual.RenderOpen())
    {
        dc.DrawImage(bitmap, new Rect(0, 0, bitmap.PixelWidth, bitmap.PixelHeight));
        dc.DrawText(text, position);
    }

    RenderTargetBitmap target = new RenderTargetBitmap(bitmap.PixelWidth, bitmap.PixelHeight,
                                                       bitmap.DpiX, bitmap.DpiY, PixelFormats.Default);
    target.Render(visual);

    BitmapEncoder encoder = null;

    switch (Path.GetExtension(outputFile))
    {
        case ".png":
            encoder = new PngBitmapEncoder();
            break;
        case ".jpg":
            encoder = new JpegBitmapEncoder();
            break;
    }

    if (encoder != null)
    {
        encoder.Frames.Add(BitmapFrame.Create(target));

        using (FileStream outputStream = new FileStream(outputFile, FileMode.Create))
        {
            encoder.Save(outputStream);
        }
    }
} 
```

现在你可以使用这样的方法：

```
WriteTextToImage(@"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg", "Desert.png", text,
    new Rect(80, 50, 430, 200),
    HorizontalAlignment.Center, VerticalAlignment.Center); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:26:14.550

您可以通过以下方式使用网格或任何其他适合您需要的面板

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" /> 
    </Grid.ColumnDefinitions>

    <Image x:name="My image" .. bind it to the bintmap 
           Grid.row="0"
           Grid.colomn="0"/>
    <TextBlock x:name="MyText"  
               Text="....."
                Grid.row="0"
                Grid.colomn="0"/>
</Grid> 
```

文本和图像绘制在网格中的同一空间中，您可以随意操作对齐方式

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-10T14:04:22.407

在 WPF 中，您不能使用 Graphics，因为 wpf 提供了新的技术。要做到这一点。图形是指旧的 Windows API，但 WPF 使用 DirectX。例如，WPF 不再适用于像素等。

[http://msdn.microsoft.com/de-de/library/system.windows.media.drawingcontext.aspx](http://msdn.microsoft.com/de-de/library/system.windows.media.drawingcontext.aspx)

# dynamics-crm-2011 - CRM 2011 解决方案说缺少组件，但它们实际上在系统中

> ID：11903225
> 
> 赞同：3
> 
> 时间：2012-08-10T13:58:02.570
> 
> 标签：dynamics-crm-2011

我一直在尝试将自定义解决方案导入单独的组织。在导出时，我收到有关所需组件的警告，但我知道它们已经在那里，尽管来自单独的托管解决方案。

当我尝试导入解决方案时，它会失败并列出它需要但丢失的组件。我再次检查了其中一些，它们肯定在那里，所以我不知道为什么它失败了。

是因为它们不是在组织本身中创建的，而是来自单独的解决方案吗？还是我还缺少其他东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:01:07.743

我在字段级安全配置文件中遇到了类似的问题 - 该组件显然既在我尝试导入的解决方案中，也在另一个解决方案的组织中。
我建议检查 solution.xml 文件中的“缺少依赖项”，您将能够看到所有被视为依赖项的组件。我能够找到系统抱怨的 3 个缺失的依赖项。不知何故，导入文件中的 FieldSecurityProfileId 与系统中的 id 不匹配（可能有人进入并重新创建了它，从而创建了一个新的 id）。我能够通过重新导入组件已经存在的解决方案的版本（托管）来解决我的问题，以便将正确的 id 放入系统中，然后导入工作。

# jquery - 数据绑定后检查复选框

> ID：11903228
> 
> 赞同：0
> 
> 时间：2012-08-10T13:58:07.580
> 
> 标签：jquery, asp.net-mvc-3, telerik-grid

我有 Telerik MVC Grid 与带有复选框的数据绑定。现在我需要根据条件检查复选框。在网格中，我有一个字段“IsSelected”，它是字符串。如果“IsSelected”为真，则仅应在网格中选中复选框。我需要使用 jquery 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:15:04.890

不确定 IsSelected 是属性... JS 变量...还是后端...

但无论哪种方式，基本逻辑都是......

[**jsFiddle 演示**](http://jsfiddle.net/6M3Lg/)

```
// obviously specify the checkboxes more than this
$('input:checkbox').each(function () {
    if ( $(this).attr('IsSelected') === 'true' ) {
        $(this).prop('checked', true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:17:20.883

```
if($('#IsSelected').val() == 'true'){
    $('#mygrid').find('input[type=checkbox]').attr('checked', true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:21:45.983

像这样的东西？

```
$('tbody > tr').each(function(){  // <-- loop through each row
    var $this = $(this);
    var $td = $this.children();
    if($td.eq(indexOfIsSelected).text() == 'true){  // <-- check the IsSelected column for text value
       $this.find('input[type=checkbox]').prop('checked',true);  // <-- if true then check checkbox in that row
    }
}); 
```

# python - requests.get 一直挂在 Twitter Api（Python 请求库）上

> ID：11903231
> 
> 赞同：2
> 
> 时间：2012-08-10T13:58:29.133
> 
> 标签：python, json, twitter, python-requests

到目前为止我的代码：

```
import requests
import json

url = "https://stream.twitter.com/1/statuses/sample.json"

r = requests.get(url, auth = ('username', 'password'))
print r.status_code 
```

当我在控制台中运行此脚本时，它一直挂起，但是当我运行等效的 urllib2 时，我得到了很好的响应：

```
from urllib2 import *

password_mgr = HTTPPasswordMgrWithDefaultRealm()
url = "https://stream.twitter.com/1/statuses/sample.json"
password_mgr.add_password(None, url, 'username', 'password')
h = HTTPBasicAuthHandler(password_mgr)
opener = build_opener(h)
page = opener.open(url)
print page.getcode() 
```

这返回`200`。有人知道问题是什么吗？

编辑：另外，当我在上面的代码中调整密码时，我得到了适当的`401`响应。我认为这是因为发生了一些阻塞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:09:50.543

我也有这个问题，它只影响请求版本> 0.13.5。要修复，请在 requests.get 调用中禁用预取：

```
r = requests.get(url, auth = ('username', 'password'), prefetch=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:01:55.280

不确定您是否可以调用 requests.get 您正在做的事情。如果传递参数，则需要包含字典。像这样的东西？

```
auth = {'username': 'username', 'password': 'password'}
r = requests.get("https://stream.twitter.com/1/statuses/sample.json", params=auth)
print r.status_code 
```

阅读此链接以了解使用 requests.get [http://docs.python-requests.org/en/latest/user/quickstart/的正确方法](http://docs.python-requests.org/en/latest/user/quickstart/)

# c - 在for循环中声明匿名结构，clang编译失败

> ID：11903232
> 
> 赞同：8
> 
> 时间：2012-08-10T13:58:38.343
> 
> 标签：c, c99

在 for 循环中声明匿名结构的代码在 gcc 中使用 -std=c99/gnu99 运行良好

```
for (struct {int foo; int bar;} i = {0}; i.foo < 10; i.foo++); 
```

但是，当我切换到 clang 时，我收到了错误：

```
error: declaration of non-local variable in 'for' loop 
```

为什么这是一个错误？为什么它允许某些类型（例如“int”）但不允许其他类型（例如 struct {int foo;}）？这似乎不一致。clang 是无法正确实现 c99 还是代码无效 c99 和 gcc 恰好支持它？

有谁知道在clang支持的for循环中声明一种以上类型的变量的方法？（这对宏很有用。）

编辑：

既然人们问为什么这很有用，我将粘贴一些示例代码：

```
#define TREE_EACH(head, node, field, iterator) for ( \
    /* initialize */ \
    struct { \
        node* cur; \
        node* stack[((head)->th_root == 0? 0: (head)->th_root->field.avl_height) + 1]; \
        uint32_t stack_size; \
    } iterator = {.cur = (head)->th_root, .stack_size = 0}; \
    /* while */ \
    iterator.cur != 0; \
    /* iterate */ \
    (iterator.stack_size += (iterator.cur->field.avl_right != 0) \
        ? (iterator.stack[iterator.stack_size] = avl_right, 1) \
        : 0), \
    (iterator.cur = (iterator.cur->field.avl_left == 0) \
        ? iterator.cur->field.avl_left \
        : (iterator.stack_size > 0? (iterator.stack_size--, iterator.stack[iterator.stack_size]): 0)) \
) 
```

这是我编写的一个非常方便的宏，它在堆栈上以深度优先顺序迭代 AVL 树。由于不允许在 for 循环中声明匿名结构，尽管我必须使宏的使用不那么直观。我无法将声明外包给树的其余部分，因为它使用可变长度数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T08:53:07.417

我恭敬地不相信以前的答案。它使用 gcc (with `-Wall -pedantic`) 成功构建，但不能使用 clang 或 Visual Studio。

Microsoft 在此[Microsoft Connect 错误项](http://connect.microsoft.com/VisualStudio/feedback/details/624410/visual-c-compiler-fails-to-parse-a-for-init-statement-that-starts-with-a-class-specifier)中承认了与 Visual Studio 极为相似的问题。

6.8.5 是说*for-init-expression*中的标识符声明不能是`typedef`, `extern`or （除了and`static`之外的唯一存储类说明符）。`auto``register`

C99 中的存储类说明符`auto`是默认的并且是隐式的。然后结构类型和标识符`i`是自动的（在该代码块内具有范围）。那么代码肯定是有效的吗？我看不到 6.8.5 是如何禁止声明类型的。

我建议gcc是正确的，这是clang和Visual Studio实现的一个错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:23:12.070

# 概括

C 标准的潜在违反在于 C 2018 6.8.5 3 中的这句话：

> 声明的声明部分`for`应仅声明具有存储类`auto`或的对象的标识符`register`。

由于`struct { int i; float f; }`声明了类型和标识符，因此存在一些关于如何解释 6.8.5 3 的问题。在我看来：

*   委员会可能打算禁止声明除标识符`auto`或`register`对象之外的任何内容。
*   可能没有考虑偶然声明类型的这种用例。
*   允许这种附带声明将是无害的，并且不会明显偏离意图。

（我会邀请任何更熟悉 C 委员会记录的人来提请我们注意与此有关的任何事情。）

（我在这个答案中引用了 2018 C 标准，但该语言很旧并且存在于以前的版本中，可能有一些不同的条款或段落编号。）

# 类型和标识符都被声明

以下`for`语句中的声明同时声明了一个标识符`s`和一个未命名的类型：

```
for (struct { int i; float f; } s = { 0, 0 }; s.i < 25; ++s.i, s.f = s.i/10.f)
    … 
```

我们知道它声明了一个类型，因为 C 2018 6.7.2.1 8 说：

> struct-or-union-specifier 中的 struct-declaration-list 的存在在翻译单元内声明了一个新类型。

根据 6.7.2.1 1，`struct { int i; float f; }`是一个结构或联合说明符，并且在其中`int i; float f;`是一个结构声明列表。所以这个源码符合6.7.2.1 8的描述，所以声明了一个类型。

# C 标准的语言是模棱两可的

C 2018 6.8.5 3 说：

> 声明的声明部分`for`应仅声明具有存储类`auto`或的对象的标识符`register`。

就英语语法和用法而言，这句话可能有多种含义，包括：

1.  声明应声明的唯一内容是具有存储类`auto`或`register`.
2.  声明应声明的唯一标识符是具有存储类`auto`或`register`.
3.  声明应声明的对象的唯一标识符是具有存储类`auto`或`register`.

首先，问题是“唯一”与它正在修改的东西不相邻。“唯一”可能是修改“标识符”或“对象”或“存储类”。人们可能更喜欢修饰语来修饰最接近它的候选词，但句子的作者并不总是这样构造它们。（语法上，它也可以修饰“有”，从而将对象限定为只有存储类`auto`或`register`没有其他任何东西，例如没有大小或其他属性。我们很容易根据语义而不是语法理由排除这种含义。）

这些示例说明了含义之间的差异：

```
static int s                 // Prohibited by 1, 2, and 3.
extern int s(int)            // Prohibited by 1 and 2, permitted by 3.
struct { int i; float f; } s // Prohibited by 1, permitted by 2 and 3.
int s                        // Permitted by 1, 2, and 3. 
```

# 效果可能会照亮意图

基于实现 C 的困难，似乎没有理由偏爱这些含义中的任何一个。要看到这一点，请考虑 C 实现可能很容易重写：

```
for (declaration; …; …) … 
```

到等效代码：

```
{ declaration; for (; …; …) … } 
```

因此，如果 C 实现可以支持一般的声明和`for`语句，那么它可以支持语句中的一般声明，`for`而无需付出额外的努力。

那么 6.8.5 3 的目的是什么？

声明中的`for`声明提供了便利。它提供了一种很好的方式来声明一些用于控制循环的迭代器或其他对象，同时将范围限制在`for`语句中（这是避免错误的好处）。它不提供任何新功能。鉴于此，我希望编写 6.8.5 3 的目的是使声明能够服务于此目的，而不会将其开放给其他目的。在语句中使用上面的前两个示例声明中的任何一个都是奇怪的，尽管并非不可能`for`。

如果是这样，我怀疑委员会的表面意图是 1，但他们没有考虑偶然声明未命名类型的情况。当我们考虑使用结构的第三个示例时，我们发现它很不寻常，但与`for`语句的习惯用法并没有太大的不同：

*   它自然地解决了语句的声明部分中可能只存在一个声明的问题`for`，但有时管理具有不同类型的多个对象的循环很有用。
*   它仍然是一个具有自动存储生成的对象，正如用于`for`循环的那样。
*   `for`循环外不需要技术上声明的类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T14:22:06.783

在 C99 中是不允许的。§6.8.5 说：

> 3 for 语句的声明部分应仅声明具有存储类`auto`或`register`.

您显示的声明除了声明 object 之外还声明了一个 type `i`，并且 type 不是 object 的标识符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-13T07:37:58.397

作为一种解决方法，您可以为每个恰好循环一次的结构成员添加外部 for 循环。它很丑，但至少从使用角度来看是一样的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T19:11:20.320

对于一小段代码（[https://github.com/kutoga/CArr](https://github.com/kutoga/CArr)），我需要类似的东西，并且您的问题/代码有一个简单的解决方案：

```
for (__auto_type i = ({
      struct {int foo; int bar;} _i = {0};
      _i;
    }); i.foo < 10; i.foo++) 
```

解决方案是将匿名类型放入`({...})`并将其分配给`__auto_type`. 这适用于 gcc 和 clang。

# ms-access - “无效的过程或参数”错误

> ID：11903234
> 
> 赞同：3
> 
> 时间：2012-08-10T13:58:54.853
> 
> 标签：ms-access, ms-access-2007, vba

我继承了一个 Access 数据库，并且在尝试打开此错误消息时出错：

> 运行时错误“5”：
> 无效的过程或参数

我已将其追溯到 VBE 中的以下代码：

```
Set cbMainMenu = CommandBars.Add(Name:="OIG Main Menubar", _
Position:=msoBarTop, MenuBar:=True, Temporary:=True) 
```

在此之前，我从一些谷歌搜索研究中添加了一个检查，但它似乎不起作用，因为它仍然出错（有和没有错误处理更改）：

```
 On Error Resume Next
    Application.CommandBars(cbMainMenu).Delete
    On Error GoTo 0 
```

任何人有任何想法，或者可以指出我正确的方向来解决这个错误？我将继续努力工作一段时间。

**编辑：**

这似乎不是主要的初始错误。我现在正在努力寻找它，如果/当我找到它时会重新发布。

**编辑2：**

这实际上是导致错误的原因，环顾四周，看看我是否能解决它：

```
Set cbcToolsDBCompact = cbpToolsMenu.Controls.Add(Id:=CommandBars("Menu Bar").Controls("Tools").CommandBar.Controls("Database Utilities").CommandBar.Controls("Compact And Repair Database...").Id) 
```

**EDIT3：**将上述代码更改为：

```
Set cbcToolsDBCompact = cbpToolsMenu.Controls.Add(Id:=2071) 
```

修复了这个问题，现在有压缩/修复选项。（它甚至可以工作）。由于除了评论之外没有人真正发布具体答案，因此我将使用底部的“回答你自己的问题”选项，以便为未来提供答案。另外，我在这里找到了代码：

[MS Access：如何在 VBA 中压缩当前数据库](https://stackoverflow.com/questions/1460129/ms-access-how-to-compact-current-database-in-vba)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:34:04.657

我的猜测是这是一个参考问题。

在 Visual Basic IDE 中，单击工具/参考： ![在此处输入图像描述](../Images/0b80169d4f131059440ede55da700119.png)

在弹出的对话框中，查找*Microsoft Office x.0 Object Library：*

![在此处输入图像描述](../Images/e02fec1a2489059e2087728eb02e8d75.png)

旁边有“缺”字吗？如果是这样，那是你的问题。

取消选中缺少的参考并向下滚动并检查随您的 Office 版本安装的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:16:54.767

在这里回答我自己的问题。

这是“压缩和修复数据库”选项从 Access 2003 中的位置移动的问题。

VBA 代码将其添加为菜单选项，在 2003 年，代码如下所示：

```
Set cbcToolsDBCompact = cbpToolsMenu.Controls.Add(Id:=CommandBars("Menu Bar").Controls("Tools").CommandBar.Controls("Database Utilities").CommandBar.Controls("Compact And Repair Database...").Id) 
```

在 2007 年，根据这个问题，在这里找到，[MS Access：如何在 VBA 中压缩当前数据库](https://stackoverflow.com/questions/1460129/ms-access-how-to-compact-current-database-in-vba)是需要如何处理的：

```
Set cbcToolsDBCompact = cbpToolsMenu.Controls.Add(Id:=2071) 
```

# c# - 在 SelectNodes 中使用 XPath 表达式

> ID：11903238
> 
> 赞同：1
> 
> 时间：2012-08-10T13:59:00.927
> 
> 标签：c#, .net, xpath-1.0

[我见过这个问题](https://stackoverflow.com/questions/3469275/problem-getting-xpath-function-ends-with-to-work-while-contains-works-fine)，其中 Dimitre Novatchev 展示了一种`ends-with`使用 XPath 1.0 表达式进行复制的方法。但是，我无法在`SelectNodes`通话中实现它。

以前我在使用

```
XmlElement root = doc.DocumentElement;
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("x", root.NamespaceURI);    
XmlNodeList nodeList = doc.SelectNodes("//x:*[contains(name(.), '-notification')]", nsmgr); 
```

它返回了我想要的所有节点加上一个我没有的节点，最后有一个额外的“s”（`has-more-notifications`）。

所以我尝试使用 Dimitre 表达式，它给了我：

```
XmlNodeList nodeList = doc.SelectNodes("//x:*[substring(name(.), string-length(name(.)) - string-length('-notification') +1)]", nsmgr); 
```

这惨败给了我的根节点`notification-data-response`。

这是我第一次涉足 XPath，它看起来就像正则表达式——你要么理解它，要么不理解。

如何实现表达式，使其仅返回以 结尾的节点`-notification`？

**更新**

输入样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<notification-data-response xmlns="http://checkout.google.com/schema/2" serial-number="16ceae10-a9f1-4ff0-a77b-c3407f2d684a">
    <notifications>
        <new-order-notification serial-number="653417067275702-00001-7">
        </new-order-notification>
        <order-state-change-notification serial-number="653417067275702-00005-1">
        </order-state-change-notification>
        <risk-information-notification serial-number="653417067275702-00005-5">
        </risk-information-notification>
        <authorization-amount-notification serial-number="653417067275702-00005-6">
        </authorization-amount-notification>
    </notifications>
    <continue-token>CP6u9NeQJxC2y72h-MiUARgG</continue-token>
    <has-more-notifications>false</has-more-notifications>
</notification-data-response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:44:05.570

如果要避免命名空间前缀，则必须使用 local-name() 函数。像这样的东西应该给你所有以 -notification 结尾的节点

> //node()[substring(local-name(), string-length(local-name()) - string-length('-notification')+ 1, string-length(local-name()))= ' -通知']

好的..我在这里测试了这个。你也可以验证.. XPath 是一个开放标准，所以所有工具都应该能够给出类似的响应。

[http://www.xpathtester.com/test](http://www.xpathtester.com/test)

输入

```
 <?xml version="1.0"?>
<notification-data-response xmlns:x="test">
    <TPI_ADDRESSES>
        <ISPRIMARY>Y</ISPRIMARY>
        <data1>
            <x:wewe-notification/>
        </data1>
        <data2>
            <x:wewe-notification/>
        </data2>
    </TPI_ADDRESSES>
</notification-data-response> 
```

输出

```
<?xml version="1.0" encoding="UTF-8"?>

<root>
  <x:wewe-notification xmlns:x="test"/>
  <x:wewe-notification xmlns:x="test"/>
</root> 
```

忽略根节点，因为它生成以呈现有效的可格式化响应。

现在让我分解并向您解释xpath：

> “//” - 表示您正在搜索进行狂野搜索，或者我们称之为全扫描..就像您不在乎目标节点出现在哪个级别一样。
> 
> “node()”——是对任何和每个节点或当前节点的引用....

所以现在：“//node()”——一起表示您将评估 xml 中的所有节点。

**你怎么评价？**

**名称**——您想查找节点名称中是否包含“-notification”。为此，您使用 LHS 中的子字符串函数

> 子字符串（本地名称（），字符串长度（本地名称（））-字符串长度（'-通知'）+ 1，字符串长度（本地名称（）））
> 
> RHS 是你搜索字符串 = '-notification'

local-name() = 给出您正在评估的节点的名称，不包括前缀 string-length() - 节点名称的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:20:02.177

Dimitre 的解决方法效果很好。您只需要将子字符串“结尾”与您正在寻找的字符串常量进行比较，即：

```
SelectNodes("//x:*['-notification'=substring(name(.), string-length(name(.)) 
           - string-length('-notification') +1)]") 
```

出于兴趣，如果您可以`//`通过更具体的路径来避免使用通配符，您将在大型文档上显着提高查询的性能。

**编辑**

以下是我测试的方法（在 MS Visual Studio 的 xslt 解析器中，它是 1.0）：

```
<root>
    <nodeendsin-notification></nodeendsin-notification>
    <alsonodeendsin-notification></alsonodeendsin-notification>
    <nopethisis-notifications></nopethisis-notifications>
    <idontcontainatall></idontcontainatall>
</root>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="xml" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/root">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>
    <xsl:template match="*['-notification'=substring(name(.), string-length(name(.)) - string-length('-notification') +1)]">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="@* | node()">
    </xsl:template>
</xsl:stylesheet> 
```

仅返回以 'notification' 结尾的节点

```
<root>
    <nodeendsin-notification></nodeendsin-notification>
    <alsonodeendsin-notification></alsonodeendsin-notification>
</root> 
```

# label - NASM - 从现有标签创建新标签

> ID：11903239
> 
> 赞同：2
> 
> 时间：2012-08-10T13:59:07.010
> 
> 标签：label, nasm

我可以在 NASM 中创建一个新标签，它指向一个新的内存位置，该位置与另一个标签指向的内存位置偏移几个字节。

例如：如果 label1 指向内存位置 0x40h，有没有办法使用 label1 定义指向 0x44h 的 label2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:25:24.030

您可以定义一个常量，它可以像标签一样使用：

```
label2 equ label1+4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:21:35.390

目前尚不清楚您要做什么，但我会回答我认为您想要的。假设您已经将 label1 设置为

```
label1: db "Hello World", 10 
```

你只想打印“世界”位。您可以按以下方式执行此操作（演示为具有 32 位 Intel 语法的 Linux，但在其他情况下也可以使用）：

```
mov eax, 4
mov ebx, 1
mov ecx, label1
add ecx, 6             
mov edx, 6            
int 80h 
```

我希望这是有道理的，所以您将“label1”的引用放在 ecx 中，然后将该引用增加您想要抵消的数量。

# objective-c - iOS - 在不冻结 UI 的情况下处理数据

> ID：11903247
> 
> 赞同：18
> 
> 时间：2012-08-10T13:59:28.770
> 
> 标签：objective-c, ios, multithreading, user-interface, freeze

我需要执行以下任务：

1）从sqlite数据库中读取一些数据

2) 处理数据

3）利用处理后的数据生成一些图表

如果我有一个用户在应用程序中输入了很多数据，那么有一天这个分析系统会变得很慢并冻结 UI。

那么，处理它的正确方法是什么，允许用户与 UI 交互，可以选择取消操作或退出屏幕？

我需要为我的所有任务创建简单的线程，并使用取消事件或标志来停止每个任务？还是有其他方法可以做到这一点？

例如：

任务 1：在带有标志的线程中从 sqlite 读取数据，以便在需要时停止进程。

任务 2：在线程中处理数据，并在需要时使用标志停止进程。

任务 3：将数据交付给第 3 方组件。此时，是否可以取消正在其他组件上运行的操作？

我的想法是否正确，或者我可以改进一些东西？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-10T14:10:17.600

这是 Apple 使用 GCD（Grand Central Dispatch）推荐的最快方式。它也更容易阅读和理解，因为逻辑是线性的，但没有在方法之间拆分。

请注意，它显示了weakSelf“舞蹈”，如果异步可能比它所要求的控制器寿命更长，那么它是必要的，因此它对它进行弱引用，然后检查它是否还活着并保留它以进行更新：

**斯威夫特 4 & 3**

```
 DispatchQueue.global().async() {
      print("Work Dispatched")
      // Do heavy or time consuming work

      // Then return the work on the main thread and update the UI
      // Create weak reference to self so that the block will not prevent it to be deallocated before the block is called.
      DispatchQueue.main.async() {
           [weak self] in
           // Return data and update on the main thread, all UI calls should be on the main thread 
           // Create strong reference to the weakSelf inside the block so that it´s not released while the block is running
           guard let strongSelf = self else {return}
           strongSelf.method()
      }
 } 
```

**Objective-C**

```
// To prevent retain cycles call back by weak reference
   __weak __typeof(self) weakSelf = self;  // New C99 uses __typeof(..)

    // Heavy work dispatched to a separate thread
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSLog(@"Work Dispatched");
        // Do heavy or time consuming work
        // Task 1: Read the data from sqlite
        // Task 2: Process the data with a flag to stop the process if needed (only if this takes very long and may be cancelled often).

        // Create strong reference to the weakSelf inside the block so that it´s not released while the block is running
        __typeof(weakSelf) strongSelf = weakSelf;
        if (strongSelf) {

            [strongSelf method];

            // When finished call back on the main thread:
            dispatch_async(dispatch_get_main_queue(), ^{
                // Return data and update on the main thread
                // Task 3: Deliver the data to a 3rd party component (always do this on the main thread, especially UI).
            });
        }
    }); 
```

取消进程的方法是包含一个 BOOL 值并将其设置为在不再需要正在完成的工作时从主线程停止。但是，这可能不值得，因为除非进行大量计算，否则用户不会注意到后台工作太多。为了防止保留循环，请使用弱变量，例如：

```
__weak __typeof(self) weakSelf = self; // Obj-C
[weak self] in 
```

并在块内使用强引用调用weakSelf（以防止调用VC已被释放时崩溃）。您可以使用 UIViewController 之类的确切类型或 __typeof() 函数（在 C99 中您需要使用 __typeof(..) 但以前您可以直接使用 __typeof(..) ）来引用实际类型：

**Objective-C**

```
__typeof(weakSelf) strongSelf = weakSelf;
if (strongSelf) {
   [strongSelf method];
} 
```

**斯威夫特 4 & 3**

```
if let weakSelf = self {
   weakSelf.method()
} 
```

或者

```
// If not referring to self in method calls.
self?.method() 
```

注意：使用 GCD 或 Grand Central Dispatch，这是最简单的，Apple 推荐的方式，代码流按逻辑顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:06:02.457

这是从主线程中分离函数的方法

```
`[NSThread detachNewThreadSelector:@selector(yourmethode:) toTarget:self withObject:nil];`
```

# passwords - 为什么我们将密码哈希存储在与应用程序数据相同的数据库中？（或者：我们有什么理由不将它们存储在不同的数据库中？）

> ID：11903249
> 
> 赞同：0
> 
> 时间：2012-08-10T13:59:32.760
> 
> 标签：passwords

随着最近所有的黑客攻击和泄漏等等，我一直在思考这个问题。（几乎）不可能锁定整个应用程序以确保没有 SQL 注入点或任何其他可能导致数据库泄露的攻击。

但是，如果应用程序非常、*非常*小并且非常*非常*简单，那么审计 SQL 注入的应用程序将非常容易。可以将密码存储在一个完全独立的数据库中，除非通过 API，否则根本无法访问它。这个 API 会说，三个方法：check_password、add_password、change_password。

这样，当（如果你是一个足够大的目标）有人想出一种方法通过你的 web 应用程序中的一些安全漏洞来转储你的数据库时，他们仍然没有你的密码哈希。

想到这个想法似乎很明显，但我在其他任何地方都没有找到任何参考，所以我的问题是：**为什么我们不应该这样做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:06:38.423

您将密码数据库的密码存储在哪里？

# asp.net-mvc - ASP.NET MVC - NHibernate 多对多 - 问题出在哪里

> ID：11903254
> 
> 赞同：0
> 
> 时间：2012-08-10T13:59:48.817
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate

我正在使用带有 Fluent NHiberante 的 ASP.NET MVC 3，我使用这些模型获得了多对多的关系：

```
# User model

public class User
{
    public virtual int Id { get; set; }
    public virtual int Name { get; set; }
    public virtual IList<Role> Roles { get; set; }
}

# Role model

public class Role
{
    public virtual int Id { get; set; }
    public virtual int Name { get; set; }
    public virtual IList<User> Users { get; set; }
}

# User map

class UsuarioMap : ClassMap<Usuario>
{
    public UsuarioMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);

        HasManyToMany(x => x.Roles)
            .AsBag()
            .Inverse()
            .Table("role_user");
        Table("user");
    }
}

# Role map

public class PerfilMap : ClassMap<Role>
{
    public PerfilMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        HasManyToMany(x => x.Users)
            .AsBag()
            .Cascade
                .All()
            .Table("role_user");            
        Table("role");
    }
} 
```

在链接的表格中，模型与值将显示如下：

```
# Table role_user

Role_id  User_id
1        1
2        1
3        2
4        1
1        2 
```

我的疑问是，如何创建一个仅返回此表中的用户而不重复用户的 NHibernate SQL。

我正在尝试使用“在哪里”，但直到现在成功：

```
 User user= null;
         List<Role> roles = null;

         var userList = NHibernateHttpModule.Session.QueryOver<User>(() => user)
             .JoinAlias(() => user.Roles, () => roles)
             .Where(Restrictions.In("User_id", Roles)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:48:36.133

```
var userList = NHibernateHttpModule.Session.Query<User>()
                                   .Where(x => x.Roles.Any())
                                   .ToList() 
```

请注意，我使用的是 Linq to NHibernate 而不是`QueryOver()`

# mongodb - 从嵌套的 mongodb 集合中获取数据

> ID：11903256
> 
> 赞同：1
> 
> 时间：2012-08-10T13:59:55.067
> 
> 标签：mongodb

我有一个像下面这样的集合。我只想获取 fb_user_id 为 2001 的用户数据。

我怎样才能在 PHP 中做到这一点？

```
{
"_id": ObjectId("5024db89b7ac1c900e000000"),
"title": "This is a title",

"users": [
            {
              "name": "John",
              "email": "john@example.com",
              "fb_user_id": "1000"
            },
            {
              "name": "Jack",
              "email": "jack@example.com",
              "fb_user_id": "2001"
            },

        ]

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:11:25.240

您可以使用以下 mongodb 查询

```
{ "title.users.fb_user_id" : 2001 } 
```

对于更复杂的查询，您可以使用 elemMatch 查询运算符

```
{ 
   "title.users" : {$elemMatch : { "fb_user_id" : 2001, "name" : "John" } }
} 
```

类似的东西。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:42:07.840

如果您只想返回在嵌入式数组中找到的一个匹配项（而不是数组的其余部分），您将需要：

*   在您的应用程序代码中处理此问题（迭代`users`数组并找到匹配的元素）

*   使用将在 2.2 版本的 MongoDB 中提供的新位置运算符支持 ( [SERVER-828 )。](https://jira.mongodb.org/browse/server-828)

`mongo`在2.2 shell中使用位置运算符的示例：

```
> db.mycoll.find({'users.fb_user_id':"2001"}, {_id:0, 'users.fb_user_id.$':1})
{
    "users" : [
        {
            "name" : "Jack",
            "email" : "jack@example.com",
            "fb_user_id" : "2001"
        }
    ]
} 
```

# perl - 仅需要 v5.10 时拒绝 Perl v5.16

> ID：11903258
> 
> 赞同：2
> 
> 时间：2012-08-10T14:00:00.317
> 
> 标签：perl, version

我最近安装[了 Perl 的草莓便携版](http://strawberryperl.com/releases.html)。该网站说它是v5.16。

我使用 CPAN 安装[`Marpa::PP`](https://www.metacpan.org/module/Marpa%3a%3aPP). 它安装成功。然后我用一个示例程序来测试`Marpa::PP`。当我尝试运行它时，出现以下错误：

```
Perl v5.10.0 required--this is only v5.8.0, stopped at perl/site/lib/Marpa/PP.pm line 18.
BEGIN failed--compilation aborted at perl/site/lib/Marpa/PP.pm line 18.
Compilation failed in require at F:\workdir\perl\perl32\sql_insert.pl line 1.
BEGIN failed--compilation aborted at F:\workdir\perl\perl32\sql_insert.pl line 1. 
```

当我运行时`perl -v`，我得到：

```
This is perl 5, version 16, subversion 0 (v5.16.0) built for MSWin32-x86-multi-thread 
```

请帮助我理解它。我的 perl 是 v5.16，错误说它只是 v5.8，并且[Marpa/PP.pm 第 18 行中的代码](https://metacpan.org/source/JKEGL/Marpa-PP-0.014000/lib/Marpa/PP.pm#L18)有`use 5.010`. 我认为这是造成问题的原因。另外，请建议我应该怎么做才能使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:12:10.563

你已经安装了多个版本的 Perl。

你跑到哪里，跑到`perl -v`它`which perl`的完整路径。

现在，打开抱怨它是 Perl 5.8 的脚本。检查它的第一行，“shebang line”。编辑以匹配`which perl`命令的结果，假设脚本是由 shell 启动的，它应该开始由 Perl 5.16 运行。

如果您正在使用一些“点击运行”Windows 系统，您可能需要做更多的工作来将“.pl”扩展名与您在上面找到的 perl 的新路径相关联。

# php - Symfony2 服务中的回调失败

> ID：11903264
> 
> 赞同：1
> 
> 时间：2012-08-10T14:00:25.393
> 
> 标签：php, symfony, callback

我[`PHP-FineDiff`](https://github.com/gorhill/PHP-FineDiff)在我的项目中使用该类作为服务。创建差异工作正常，但是，当我尝试使用 eg 恢复差异`FineDiff::renderToTextFromOpcodes()`时，没有任何反应。

我在代码中挖掘了一下，发现回调不起作用。注释掉一些后

```
if ( !is_callable($callback) ) {
    return;
} 
```

我遇到了错误：

> 警告：call_user_func() 期望参数 1 是一个有效的回调，在 /var/www/sopos-blog/src/Sopos/WikiBundle/Services/FineDiff.php 第 321 行中找不到类“FineDiff”。

这些是一些相关的代码行：

```
public static function renderToTextFromOpcodes($from, $opcodes) {
    ob_start();
    FineDiff::renderFromOpcodes($from, $opcodes, array('FineDiff','renderToTextFromOpcode'));
    return ob_get_clean();
}

// ...

public static function renderFromOpcodes($from, $opcodes, $callback) {
    if ( !is_callable($callback) ) {
        return;
        }
    $opcodes_len = strlen($opcodes);
    $from_offset = $opcodes_offset = 0;
    while ( $opcodes_offset <  $opcodes_len ) {
        $opcode = substr($opcodes, $opcodes_offset, 1);
        $opcodes_offset++;
        $n = intval(substr($opcodes, $opcodes_offset));
        if ( $n ) {
            $opcodes_offset += strlen(strval($n));
            }
        else {
            $n = 1;
            }
        if ( $opcode === 'c' ) { // copy n characters from source
            call_user_func($callback, 'c', $from, $from_offset, $n, '');
            $from_offset += $n;
            }

// ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:01:33.750

我猜你班级的 FQCN 是`Sopos\WikiBundle\Services\FineDiff`，所以回调必须是以下之一：

```
$arrayCallback = array(__NAMESPACE__.'\FineDiff','renderToTextFromOpcode');
$stringCallback = __NAMESPACE__.'\FineDiff::renderToTextFromOpcode'; 
```

您也可以用`__NAMESPACE__`真正的命名空间替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:03:00.643

Symfony2 无法自动加载该类`FineDiff`。将命名空间添加到回调中：

```
public static function renderToTextFromOpcodes($from, $opcodes) {
  ob_start();
  FineDiff::renderFromOpcodes($from, $opcodes, array(__NAMESPACE__.'\FineDiff','renderToTextFromOpcode'));
  return ob_get_clean();
} 
```

# javascript - jquery解析并自动将嵌套的对象键和值插入到对应的div中

> ID：11903265
> 
> 赞同：-3
> 
> 时间：2012-08-10T14:00:25.027
> 
> 标签：javascript, ajax, jquery-ui, jquery

我有以下对象示例：

```
"experience": {
    "1": {
        "jobtitle": "job_title",
        "companyname": "company_name",
        "companytown": "company_town",
        "companycountry": "company_country",
        "summary": "Summary",
        "exp_from_month": "August",
        "exp_from_year": "2009",
        "exp_to_year": "2009",
        "current_position": "false"
    },
    "2": {
        "jobtitle": "job_title",
        "companyname": "company_name",
        "companytown": "company_town",
        "companycountry": "company_country",
        "summary": "Summary",
        "exp_from_month": "August",
        "exp_from_year": "2009",
        "exp_to_year": "2009",
        "current_position": "false"
    }
} 
```

var key = 对象键 var val = 对应值

我有一个像这个例子这样的 HTML 结构：

```
<div id='experience"+key+"'>
    <p>
        <strong>
            <textarea cols='30' rows='1' name='job_title"+key+"' style=''>+value+</textarea>
        </strong>&nbsp;
        <input type='checkbox' id='current_position"+key+"' checked="++value++">&nbsp;Current Position</p>
    <p>
        <textarea name='company_name"+key+"' cols='30' rows='1' style=''>"++value++"</textarea>
    </p>
    <p>
        <textarea name='company_town"+key+"' cols='30' rows='1' style=''>"++value++"</textarea>&nbsp;
        <textarea name='company_country"+key+"' cols='30'
        rows='1' style=''>"++value++"</textarea>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a
        href='#' class='save_experience"+key+"' onclick='addexperience("+key+")'>Edit</a>
    </p>
    <p id='experince_dates"+key+"'>From:
        <select name='experience_from_month"+key+"' style='width:100px;'>
            <option>"++value++"</option>
        </select>&nbsp;
        <select name='experience_from_year"+key+"' style='width:100px;'>
            <option>"++value++"</option>
        </select>&nbsp;To:
        <select name=experience_to_month "+key+" ' style='width:100px;'>
            <option>August</option>
        </select>&nbsp;
        <select name='experience_to_year "+key+" ' style='width:100px; '>
            <option>2009</option>
        </select>&nbsp;
    </p>
    <p>
        <textarea name='experience_summary "+key+" ' rows='5 ' cols='120 ' style=''>Summary</textarea>
    </p>
</div> 
```

我怎样才能使`experience`对象内部的每个都成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:06:01.923

试试这个

```
for(var key in experience)
    $('body').append('<div id="experience' + key + '">' + experience[key].jobtitle + '</div>'); 
```

# c# - 返回具有与 userId LINQ 匹配的最新时间戳的实体

> ID：11903269
> 
> 赞同：3
> 
> 时间：2012-08-10T14:00:31.143
> 
> 标签：c#, asp.net-mvc-3, linq-to-entities

我坚持这一点。我有两个表：Users2Users 和 ActivityLog。我想查找作为用户朋友的 Users2Users 列表，并根据其时间戳返回他们的每个最新活动，然后检查它是什么类型。

```
Users2Users
int UserId
int TypeOfLink
int FriendId

ActivityLog
int Type
int UserId
DateTime Timestamp 
```

似乎困扰我的事情是获取 ActivityLog 实体而不是它的 Timestamp 值。

我的friendList查询如下所示：

```
var friendList = (from u in db.Users2Users
where u.UserId == userId || u.FriendId == userId
&& u.TypeOfLink == 2 // confirmed as friend
orderby u.User.ScreenName ascending
select u).Distinct().ToList(); 
```

之后我打算尝试一个 foreach，但是如何返回 ActivityLog 实体而不是时间戳？

```
// get their last activity
foreach (var user in domusers)
{
    var act = (from a in db.ActivityLogs
    where a.UserId == user.UserId
    select a.Timestamp).Max();
    // other stuff
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T14:08:58.007

您可以按顺序排列条目`Timestamp`并选择第一个元素：

```
var act = db.ActivityLogs
  .Where(a => a.UserId == user.UserId)
  .OrderByDescending(a => a.Timestamp)
  .FirstOrDefault(); 
```

或使用查询语法：

```
var act = (from a in db.ActivityLogs 
where a.UserId == user.UserId
orderby a.Timestamp descending
select a).FirstOrDefault(); 
```

请注意，如果源集合中没有元素，您将获得`null`结果。

使用`OrderByDescending`效率稍低，因为它将对所有活动进行排序。对集合执行一次遍历并找到最新的元素会更有效`Timestamp`。您可以使用`Aggregate`. 在这里，我假设您能够创建一个“null” `Activity`，其中`Timestamp`属性具有默认值（和最小值）`DateTime`：

```
var nullActivity = new Activity(); // nullActivity.Timestamp == DateTime.MinValue
var activity = db.ActivityLogs
   .Where(a => a.UserId == user.UserId)
   .Aggregate(
     nullActivity,
     (accumulate, value) => value.Timestamp >= accumulate.Timestamp ? value : accumulate
   );
if (activity != nullActivity)
  // The latest activity was found 
```

如果你不能创建一个“空”活动作为种子，`Aggregate`你可以使用匿名类型来跟踪最新的时间戳和相关的活动，但这样做会稍微乏味一些。

# c# - 从自定义 Web 配置部分读取单个项目

> ID：11903270
> 
> 赞同：2
> 
> 时间：2012-08-10T14:00:34.983
> 
> 标签：c#, config

我创建了一个自定义配置部分来存储项目列表。配置如下：

```
<configSections>
    <section name="Items" type="namespace.Items, namespace"/>
</configSections>
<Items>
    <Item name="Item1"/>
    <Item name="Item2"/>
</Items> 
```

我还创建了自己的配置处理程序，如下所示：

```
public class ItemConfigurationHandler : IConfigurationSectionHandler
{
    public ItemConfigurationHandler()
    {
    }

    public object Create(object parent, object configContext, System.Xml.XmlNode section)
    {
        List<Item> items = new List<Item>();
        System.Xml.XmlNodeList items = section.SelectNodes("Item");

        foreach (XmlNode i in items)
        {
            Item item = new Item();
            item.Name = i.Attributes["name"].InnerText;
            items.Add(item);
        }

        return items;
    }
} 
```

这目前工作正常，我可以从配置中检索项目列表，如下所示：

```
List<Item> ts = (List<Item>)ConfigurationManager.GetSection("Items"); 
```

但是我想知道，是否可以只检索单个项目？例如，如果我只想要“Item1”的详细信息。我可以成功检索列表，然后过滤 where name = "Item1" 但这意味着加载所有 XML 如果只想要列表中的一个项目，这似乎有点多，特别是随着这个列表的增长，我不想加载 20 个项目如果我只需要一个，或者这不是什么大问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:05:57.927

您是否有理由需要将这些项目存储在`web.config`? 从概念上讲，该`web.config`文件用于配置设置。如果您计划以编程方式读/写此文件，您能否将数据存储在您自己的**自定义**xml 文件中并从那里解析数据？

**编辑**：由于您的评论表明您希望将这些项目保留在 web.config 中，因此我认为检索整个列表并遍历以找到必要的值并不是一个主要问题。您可以向`<appSettings>`标签添加值并单独访问它们。

例如：

```
<appSettings>
    <add key="item1" value="item1 value"/>
    <add key="item2" value="item2 value"/>
     . . .
    <add key="item20" value="item20 value"/>
</appSettings> 
```

像这样访问它：

```
var item1Value = ConfigurationManager.AppSettings["item1"]; 
```

但是，如果您只是阅读此信息，我不清楚您为什么要将它们放在配置文件中。在代码中定义这些变量可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:09:47.593

我想说这不是一个大问题 - 加载 1 对 20 除非您有嵌套的 XML 配置，否则您不会在今天的机器上看到一个亮点。

[**ConfigurationManager**](http://msdn.microsoft.com/en-us/library/ms134260)还会缓存这些值，因此一旦您查询配置部分，它们就会保留在内存中以供后续请求使用。您可以使用[`ConfigurationManager.RefreshSection("Items")`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.refreshsection.aspx)来刷新缓存。

# jquery - jquery .html 不会触发onclick？

> ID：11903272
> 
> 赞同：0
> 
> 时间：2012-08-10T14:00:37.673
> 
> 标签：jquery, triggers, onclick

我对 .html 有疑问，它是否可能不会触发 onClick？如果是这样，有人可以告诉我一个替代方案吗？

```
var textSubgenres ="";
    for(i=0; i<data3.length; i++)
    {
        if(i==0)
        {
            textSubgenres= textSubgenres+"<a href='#/genre/"+data3[i]+"' class='linkSubgenre' onClick='getInformation("+data3[i]+")'>"+data3[i]+" </a>";
        }
        else
        {
            textSubgenres= textSubgenres+", <a href='#/genre/"+data3[i]+"' class='linkSubgenre' onClick='getInformation("+data3[i]+")'>"+data3[i]+" </a>";
        }
    }
$("#subgenreText").html(textSubgenres); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:19:32.883

您应该考虑以更清晰的方式拆分代码，这涉及不使用内联`onClick`事件处理程序，而是使用 jQuery 的事件处理机制。

我在这里创建了一个带有大量评论的演示的 jsFiddle：[单击](http://jsfiddle.net/g5FNd/35/)

# css - 为什么 :before 和 :after 伪元素只在 Firefox 中有效？

> ID：11903273
> 
> 赞同：3
> 
> 时间：2012-08-10T14:00:37.687
> 
> 标签：css, pseudo-element

我创建了一个`select`列表，其中包含具有`:after`和`:before`伪元素的选项 -[**演示**](http://jsfiddle.net/V8cvQ/3/)

```
option:after, option::before {
    content: " ";
    height: 5px;
    width: 5px;
    background: #c00;
    border-radius: 5px;
    display: inline-block;
} 
```

但是，这仅适用于 Firefox，不适用于其他浏览器。

正如[W3C](http://www.w3.org/TR/2009/CR-CSS2-20090908/generate.html#before-after-content)、[MDN](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aafter?redirectlocale=en-US&redirectslug=CSS%2F%3Aafter)、[SitePoint](http://reference.sitepoint.com/css/pseudoelement-after)中所述，它`:after`是一个“*在匹配元素之后呈现并用于添加装饰性内容的伪元素*”，并且没有人声明对它不能应用的元素有**任何限制。**

问题 - 为什么所有浏览器（FF 除外）都无法正确显示伪元素？非常感谢任何文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:06:52.420

是否存在限制是未定义的，因此行为不一致。[这在规范](http://www.w3.org/TR/CSS21/generate.html#before-after-content)中相关部分的底部提到：

> **笔记。**该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。

大多数 HTML 表单元素被认为是替换元素，包括`select`和`option`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:04:19.657

你读过这个：: [before 和 :after html 标签上的伪元素在 Chrome 中很奇怪](https://stackoverflow.com/questions/9790000/before-and-after-pseudo-elements-on-html-tag-is-wonky-in-chrome)吗？

接受的答案说这是Chrome中的一个问题：

[https://code.google.com/p/chromium/issues/detail?id=75544](https://code.google.com/p/chromium/issues/detail?id=75544)

# excel - Excel宏按钮在顶部向上移动页面错误

> ID：11903280
> 
> 赞同：1
> 
> 时间：2012-08-10T14:01:15.813
> 
> 标签：excel, button, excel-2007, vba

在 Excel 中，我有一个按钮，可将所选单元格标记在页面上相对于您最初所在的单元格向上移动 20 位。它工作正常，直到它到达顶部然后出现错误。

我知道这很可能是因为它超出了范围，所以我尝试使用 if else 语句来解决它 - 我想是因为我不是 100% 熟悉我找不到的函数名称正确的说法是：如果单元格超出范围，则等于 0,0 或类似的值。

这就是我到目前为止所拥有的；唯一起作用的是语句的 else 部分：

```
Sub moveUp20()
    '
    ' Move Up 20 Macro
    '

    '
    If ActiveCell.Offset(-20, 0) <= Range(0, 0) Then
    ActiveCell.Select = Range(0, 0)
    Else
    ActiveCell.Offset(-20, 0).Select
    End If
End Sub 
```

这可能很简单，因为我不熟悉 excel 宏编程术语/语义，所以我将不胜感激！谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:14:28.687

对于您想要的功能，最简单的是

```
Sub moveUp20()
    On Error Resume Next
    ActiveCell.Offset(-20).Select
    On Error GoTo 0
End Sub 
```

如果您愿意，您还可以探索以下选项

```
ActiveWindow.SmallScroll Down:=-20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:05:25.103

```
Sub moveUp20()

If ActiveCell.Row > 20 Then 'if you are on row 21 or below

    ActiveCell.Offset(-20).Select

Else ' select row 1 of the current column you are on

    Cells(1, ActiveCell.Column).Select

End If

End Sub 
```

# symfony-forms - 如何在 Symfony 2.1 的 FormEvent 中更新 ChoiceType 的值？

> ID：11903285
> 
> 赞同：0
> 
> 时间：2012-08-10T14:01:34.203
> 
> 标签：symfony-forms, symfony-2.1

我想我可能需要扩展 LazyChoiceList 并实现一个新的 FormType，到目前为止我有：

```
/**
 * A choice list for sorting choices.
 */
class SortChoiceList extends LazyChoiceList
{
    private $choices = array();

    public function getChoices() {
        return $this->choices;
    }

    public function setChoices(array $choices) {
        $this->choices = $choices;
        return $this;
    }

    protected function loadChoiceList() {
        return new SimpleChoiceList($this->choices);
    }
} 
```

和

```
/**
 * @FormType
 */
class SortChoice extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->getParent()->addEventListener(FormEvents::PRE_SET_DATA, function($event) use ($options) {
            $options = (object) $options;

            $list = $options->choice_list;

            $data = $event->getData();

            if ($data->getLocation() && $data->getDistance()) {
                $list->setChoices(array(
                    '' => 'Distance',
                    'highest' => 'Highest rated',
                    'lowest' => 'Lowest rated'
                ));
            } else {
                $list->setChoices(array(
                    '' => 'Highest rated',
                    'lowest' => 'Lowest rated'
                ));
            }
        });
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'sort_choice';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'choice_list' => new SortChoiceList
        ));
    }
} 
```

我已经在所有可用的 FormEvent 上尝试过这种方法，但我要么无法访问数据（空值），要么更新 choice_list 无效，据我所知，因为它已经处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:19:26.147

事实证明，我根本不需要定义新类型或 LazyList，更好的方法是在我的主表单中拥有数据之前不添加字段，如下所示：

```
$builder->addEventListener(FormEvents::PRE_BIND, function($event) use ($builder) {
    $form = $event->getForm();
    $data = (object) array_merge(array('location' => null, 'distance' => null, 'sort_by' => null), $event->getData());

    if ($data->location && $data->distance) {
        $choices = array(
            '' => 'Distance',
            'highest' => 'Highest rated',
            'lowest' => 'Lowest rated'
        );
    } else {
        $choices = array(
            '' => 'Highest rated',
            'lowest' => 'Lowest rated'
        );
    }

    $form->add($builder->getFormFactory()->createNamed('sort_by', 'choice', $data->sort_by, array(
        'choices' => $choices,
        'required' => false
    )));
}); 
```

见：[http ://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:19:39.547

你读过这个：[http ://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html)

该示例具有：

```
if (!$data) return; 
```

那是因为在构建表单时事件似乎被多次触发。我在您发布的代码中没有看到等效的行。

# java - 在 Java 中的方法中传递和使用 Class 类型

> ID：11903287
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:01:40.940
> 
> 标签：java, class, types, methods, parameter-passing

我有一个解析器方法，它将在完成时填充用户定义的集合类型。我试图在我的抽象解析器类中抽象这个类。

这是代码

```
 protected List<Collection> parseData(List<Data> data, Class<Collection> collectionType)
    {
        List<Collection> parsedData = new ArrayList<collectionType>();
        //Parse data
        return parsedData
    } 
```

但是我在列表实例化行上不断收到以下错误：collectionType cannot be resolve to a type, ArrayList cannot be resolve to a type

这是我第一次尝试这样的事情，我不确定出了什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:26:00.727

您需要使用通用方法。像这样的东西。

C＃ ：

```
 protected List<T> parseData<T>(List<Data> data, T collectionType)
    {
        List<T> parsedData = new List<T>();
        //Parse data
        return parsedData;
    } 
```

爪哇：

```
protected <T> List<T> callFriend(List<Data> data, Class<T> collectionType) {
     List<T> parsedData = new ArrayList<T>();
        //Parse data
        return parsedData;
} 
```

# php - 从指定目录拉取所有图像，然后显示它们

> ID：11903289
> 
> 赞同：44
> 
> 时间：2012-08-10T14:01:42.563
> 
> 标签：php

如何显示指定目录中的图像？就像我想显示一个目录中的所有 png 图像一样，在我的情况下，我的目录是 media/images/iconized。

我试着环顾四周，但似乎没有一个适合我真正需要的。

但这是我的尝试。

```
$dirname = "media/images/iconized/";
$images = scandir($dirname);
$ignore = Array(".", "..");
foreach($images as $curimg){
    if(!in_array($curimg, $ignore)) {
        echo "<img src='media/images/iconized/$curimg' /><br>\n";
    }
} 
```

希望这里有人可以提供帮助。我愿意接受任何想法、建议和建议，谢谢。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-10T14:10:25.800

您也可以`glob`为此使用：

```
$dirname = "media/images/iconized/";
$images = glob($dirname."*.png");

foreach($images as $image) {
    echo '<img src="'.$image.'" /><br />';
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-10T16:58:14.953

您可以使用简单的 php 脚本显示文件夹中的所有图像。假设文件夹名称为“images”并在此文件夹中放置一些图像，然后使用任何文本编辑器并粘贴此代码并运行此脚本。这是php代码

```
 <?php
     $files = glob("images/*.*");
     for ($i=0; $i<count($files); $i++)
      {
        $image = $files[$i];
        $supported_file = array(
                'gif',
                'jpg',
                'jpeg',
                'png'
         );

         $ext = strtolower(pathinfo($image, PATHINFO_EXTENSION));
         if (in_array($ext, $supported_file)) {
            echo basename($image)."<br />"; // show only image name if you want to show full path then use this code // echo $image."<br />";
             echo '<img src="'.$image .'" alt="Random image" />'."<br /><br />";
            } else {
                continue;
            }
          }
       ?> 
```

如果您不检查图像类型，请使用此代码

```
<?php
$files = glob("images/*.*");
for ($i = 0; $i < count($files); $i++) {
    $image = $files[$i];
    echo basename($image) . "<br />"; // show only image name if you want to show full path then use this code // echo $image."<br />";
    echo '<img src="' . $image . '" alt="Random image" />' . "<br /><br />";

}
?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-08T18:45:52.960

您需要将循环从更改`for ($i=1; $i<count($files); $i++)`为`for ($i=0; $i<count($files); $i++)`：

所以正确的代码是

```
<?php
$files = glob("images/*.*");

for ($i=0; $i<count($files); $i++) {
    $image = $files[$i];
    print $image ."<br />";
    echo '<img src="'.$image .'" alt="Random image" />'."<br /><br />";
}

?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-04T06:53:37.720

如果有人正在寻找递归。

```
<?php

echo scanDirectoryImages("images");

/**
 * Recursively search through directory for images and display them
 * 
 * @param  array  $exts
 * @param  string $directory
 * @return string
 */
function scanDirectoryImages($directory, array $exts = array('jpeg', 'jpg', 'gif', 'png'))
{
    if (substr($directory, -1) == '/') {
        $directory = substr($directory, 0, -1);
    }
    $html = '';
    if (
        is_readable($directory)
        && (file_exists($directory) || is_dir($directory))
    ) {
        $directoryList = opendir($directory);
        while($file = readdir($directoryList)) {
            if ($file != '.' && $file != '..') {
                $path = $directory . '/' . $file;
                if (is_readable($path)) {
                    if (is_dir($path)) {
                        return scanDirectoryImages($path, $exts);
                    }
                    if (
                        is_file($path)
                        && in_array(end(explode('.', end(explode('/', $path)))), $exts)
                    ) {
                        $html .= '<a href="' . $path . '"><img src="' . $path
                            . '" style="max-height:100px;max-width:100px" /></a>';
                    }
                }
            }
        }
        closedir($directoryList);
    }
    return $html;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-23T00:12:08.133

尝试 SPL **DirectoryIterator**类

```
<?
foreach ((new DirectoryIterator("mydir/")) as $fileinfo) {
   // Ignore .files (.htaccess, .DS_Store, etc)
   if (!$fileinfo->isDot()) {
      // Check if file is a PNG
      if ($fileinfo->getExtension() == 'png') {
         echo "This is a PNG image.";
      }
   }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-11-17T07:13:57.367

**严格的标准：只有变量应该通过引用在第 32 行的 /home/aadarshi/public_html/----------/upload/view.php 中传递**

代码是：

```
<?php

echo scanDirectoryImages("uploads");

/**
* Recursively search through directory for images and display them
* 
* @param  array  $exts
* @param  string $directory
* @return string
*/
function scanDirectoryImages($directory, array $exts = array('jpeg', 'jpg', 'gif', 'png'))
{
if (substr($directory, -1) == '/') {
    $directory = substr($directory, 0, -1);
}
$html = '';
if (
    is_readable($directory)
    && (file_exists($directory) || is_dir($directory))
) {
    $directoryList = opendir($directory);
    while($file = readdir($directoryList)) {
        if ($file != '.' && $file != '..') {
            $path = $directory . '/' . $file;
            if (is_readable($path)) {
                if (is_dir($path)) {
                    return scanDirectoryImages($path, $exts);
                }
                if (
                    is_file($path)
                    && in_array(end(explode('.', end(explode('/', $path)))),   $exts)
                ) {
                    $html .= '<a href="' . $path . '"><img src="' . $path
                        . '" style="max-height:100px;max-width:100px" />  </a>';
                }
            }
        }
    }
    closedir($directoryList);
}
return $html;
} 
```

# bash - 美食展示 LIVE svn

> ID：11903290
> 
> 赞同：4
> 
> 时间：2012-08-10T14:01:48.623
> 
> 标签：bash, svn, gource

我试图让一个来自 SVN 存储库的 Gource 窗口显示“LIVE”事件。

我所拥有的是：

测试.sh：

```
#!/bin/bash

bash test2.sh | gource --realtime --path - --log-format svn --colour-images \
    --highlight-users --file-extensions --follow-user sam --user-scale 2 \
    --file-idle-time 0 \
    --logo /var/www/proppolis/src/Nono/AdminBundle/Resources/public/images/logo-proppolis-01.png \
    --hide filenames,dirnames --camera-mode track 
```

测试2.sh

```
#!/bin/bash

for (( ; ; ))
do
    svn log http://101.101.101.101:9880/proppolis -r HEAD --username XXX --password XXX --verbose --xml --quiet
    sleep 10
done 
```

它的工作原理如下：每 10 秒，它从 HEAD 修订版中获取日志，并将 STDOUT 提供给 gource

但是，一旦我删除“-r HEAD”或将其变为其他任何内容，例如 0:HEAD 或 150 或其他任何内容，它就会变得混乱并告诉我 gource 无法读取日志格式？

ps：运行 svn 命令实际上会生成一个有效的日志...

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-11T18:55:46.193

查看[https://github.com/whitewhidow/live-git-for-gource](https://github.com/whitewhidow/live-git-for-gource)以获取在 gource 中实时 git 和实时 svn 可视化的完整解决方案（在提出此问题很久之后创建）

# jquery - 在jQuery中切换禁用属性

> ID：11903293
> 
> 赞同：16
> 
> 时间：2012-08-10T14:02:03.740
> 
> 标签：jquery

我有一个启用或禁用选择元素的复选框

实际上，我使用了这段运行良好的简单代码。

```
$("#filtri").change(function(){
    if ($("#menuContinenti").attr("disabled")) {
        $("#menuContinenti").removeAttr("disabled");
    } else {
        $("#menuContinenti").attr("disabled", "disabled");
    }
}); 
```

这是最好的方法还是有类似`.toggle()`功能在禁用/启用之间切换？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-10T14:04:25.000

您应该使用`.prop`禁用：

```
$("#menuContinenti").prop('disabled', function () {
   return ! $(this).prop('disabled');
}); 
```

更新：没有意识到当前属性值是函数的参数；这个版本更干净：

```
$("#menuContinenti").prop('disabled', function (_, val) { return ! val; }); 
```

更新：ES2015

```
$("#menuContinenti").prop("disabled", (_, val) => !val); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T14:06:44.833

你可以编写自己的插件来做这样的事情。

在 jQuery 之后添加这个，最好在脚本文件中。

```
(function($) {
    $.fn.toggleDisabled = function(){
        return this.each(function(){
            this.disabled = !this.disabled;
        });
    };
})(jQuery); 
```

然后像这样使用它：

```
$('#my-select').toggleDisabled(); 
```

礼貌：[使用 jQuery 切换输入禁用属性](https://stackoverflow.com/questions/4702000/jquery-toggle-input-disabled-attribute?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:15:11.180

您可以使用 $.is 函数进行检查，如下所示

```
$("#filtri").change(function(){
    $("#menuContinenti").attr("disabled", ! $(this).is(':checked'));    
}); 
```

# c# - 获取泛型类型的 Type 对象（不存在该对象的实例）

> ID：11903294
> 
> 赞同：2
> 
> 时间：2012-08-10T14:02:04.223
> 
> 标签：c#, .net, generics

我有一个通用类`foo`。我有一个名为`bar`.

我如何获得类型`foo<bar>`？当您有对象的实例但我没有实例时，我已经看到使用工厂类型设置的示例。

一些代码：

```
public class foo<T>
{

}

public Type GetGenericFoo(Type bar)
{
    Type genericFooBar = null;
    //work magic
    return genericFooBar;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:06:27.977

关于什么：

```
typeof(foo<>).MakeGenericType(bar) 
```

所以在你的代码中它会像：

```
public Type GetGenericFoo(Type bar)
{
    return typeof(foo<>).MakeGenericType(bar);
} 
```

# iphone - iOS iVar 命名为“Size”语法错误？

> ID：11903297
> 
> 赞同：2
> 
> 时间：2012-08-10T14:02:09.270
> 
> 标签：iphone, objective-c, ios, xcode

拿这个代码：

```
@interface SomeClass:NSObject
{
@private
  NSString* Size;
}

@property NSString* Size;

@end

--------------------------

@implementation SomeClass
@synthesize Size;

- (void) something
{
  Size = @"syntax error : Expected identifier or '(' ";
  self.Size = @"works ok";
}

@end 
```

为什么这是语法错误？“Size”是保留字还是已在 NSSObject 中定义？我在两个单独的项目中遇到错误...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T14:10:12.873

尺寸是一种类型：

```
typedef long                            Size; 
```

不要使用它，您应该遵循 Objective-C 约定，即使用小写字母命名属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:11:30.660

您是否选择单击或 cmd+单击大小（不是 self.Size）？X Code 应该告诉您它在 MacTypes.h 中声明为`typedef long Size;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:16:47.043

这是在 MacTypes.h

```
typedef long Size; 
```

它会导致构建错误，我在自己的代码中对其进行了测试。

使用客观的 C 命名标准，你不会遇到冲突。

```
NSString *size; 
```

# php - php/mysql 多选困境

> ID：11903300
> 
> 赞同：0
> 
> 时间：2012-08-10T14:02:18.287
> 
> 标签：php, mysql, select

我试图从我的数据库中获取一些数据并停留在 SELECT 操作之一。基本上我有 2 个表、用户和发票： - 用户包含 4 个字段：id:、姓名、电话号码、注释 - 发票包含 9 个字段：id、account_id、invoice_date、呼叫者、日期、小时、目的地、total_duration、type_of_service

total_duration 字段包含有关用户通话时长的信息，以秒为单位。type_of_service 字段包含有关呼叫目的地的信息（“Land line, Another Net, Call Special Number”）。

我希望能够知道用户在拨打“固定电话，另一个网络，拨打特殊号码”时设法累积的分钟总和。

到目前为止，我所拥有的是：

```
$query=mysql_query("SELECT id,name,tel_no FROM users UNION SELECT id,account_id,caller FROM invoices WHERE caller LIKE \"%tel_no\""); 
```

这为我提供了有关在发票表中找到的用户表中的电话号码的信息......但不知道如何获得使用的总分钟数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:04:33.807

尝试使用 SUM：

```
$query=mysql_query("SELECT id,name,tel_no FROM users UNION SELECT id,account_id,caller, sum(total_duration) AS sum_total_duration FROM invoices WHERE caller LIKE \"%tel_no\""); 
```

该值的访问方式如下：

```
echo $returnedArray['sum_total_duration'] 
```

# iphone - iOS 应用程序徽章仍然存在

> ID：11903301
> 
> 赞同：3
> 
> 时间：2012-08-10T14:02:19.200
> 
> 标签：iphone, ios, notifications, local

我有一个使用本地通知的 iPhone 应用程序。它工作得几乎完美，虽然我有一个小问题：当我启动应用程序时，通知中的红色气球（应用程序徽章）不会消失。我能做些什么来修复它？

我已经从 iPhone 上删除了这个应用程序，但是当我用 Xcode 再次编译它时，我又回来了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:06:10.363

尝试

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

在您处理完您的通知后。

# ios - iOS 5 使用辅助功能以编程方式读取文本

> ID：11903305
> 
> 赞同：0
> 
> 时间：2012-08-10T14:02:24.887
> 
> 标签：ios

有谁知道是否有一种方法可以使用 iOS 5+ 中提供的底层辅助功能以编程方式*启用*和*读取应用内文本？*

为了清楚起见，我说的是以下功能（但当然是以编程方式进行的）。

![在此处输入图像描述](../Images/8a1d9c407353e56c10d73be94da0af17.png)

我对替代方案持开放态度，但更喜欢 Apple*认可*的方式来使用这个特定的 iOS 5 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:58:51.487

不幸的是，目前不可能。“朗读选择”仅适用于在辅助功能设置中启用它的用户，并且仅适用于应用程序中突出显示的文本。

对于程序化文本转语音，您可以查看[iphone-tts](https://bitbucket.org/sfoster/iphone-tts/)。它工作得很好，但需要注意的是它只支持它附带的声音，它不使用“Siri 声音”。您可以根据自己的喜好调整音高和速度，但无法匹配 iOS 的内置语音。

# python - Unittest 二进制文件输出

> ID：11903310
> 
> 赞同：1
> 
> 时间：2012-08-10T14:02:37.470
> 
> 标签：python, unit-testing, tdd

我有一个像素数组，我希望将其保存到图像文件中。Python 似乎有一些库可以为我做到这一点，所以我将使用其中一个，传入我的像素数组并使用我没有编写的函数将图像标题和数据写入磁盘。

我该如何针对这种情况进行单元测试？

我可以：

*   **测试**我传递给外部库的像素数组是否符合我的预期。
*   **测试**我调用的外部库函数是否给了我预期的返回值。
*   **手动验证**图像是否符合我的预期（通过打开图像并注视它）。

我不能：

*   **测试**图像文件是否正确。为此，我必须生成一个图像进行比较（但我如何生成那个“值得信赖的”图像？），或者编写一个可单元测试的图像编写模块（所以我不需要费心）外部库）。

这足以为我的代码提供覆盖吗？测试我的代码和外部库之间的接口是否足够，让我相信通过手动观察外部库（图像文件）的输出是正确的？

您如何编写单元测试以确保您使用的外部库按照您的预期进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:06:32.487

在 Python 上有点老了。

但这就是我的处理方式。

抓取图像进行手动测试。计算校验和（也许是 MD5）。然后，自动化测试需要通过计算 MD5（在本例中）与手动测试中完成的 MD5 进行比较。

希望这可以帮助。

# visual-studio-2010 - 如何为 Visual Studio 2010 项目使用 Omake 构建系统

> ID：11903311
> 
> 赞同：0
> 
> 时间：2012-08-10T14:02:37.367
> 
> 标签：visual-studio-2010, mfc, makefile, omake

我有一个项目，在`VS-2010`. 并且运行良好。但我想`make-file`通过使用创建一个`Omake`. 如何在`Omake`. 我已经浏览了 的所有文档`Omake`，但没有说明如何制作。我的`VS-2010`项目也包含`.c, .cpp, .h, .rc`MFC `many subdirectories`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:15:31.557

将项目从 VS 转换为 Omake 没有直接的方法：您必须手动编写“OMakefile”，因为这两个构建系统（MSBuild 落后于 VS）并且概念有些不同。一旦 OMakefile 工作，您始终可以创建一个“Makefile”类型的 Visual Studio 项目，该项目在后台调用 omake 实用程序。

如果改变的原因是你想让项目多平台（好吧，我怀疑，因为你使用 MFC），你可以考虑[CMake](http://www.cmake.org/)，一个广泛使用的项目生成工具。CMake 可以从项目描述中生成 Makefile (GNU) 和 VS 项目，具体取决于平台。

# c# - 向网站上的密码字段发送/设置值

> ID：11903313
> 
> 赞同：0
> 
> 时间：2012-08-10T14:02:43.403
> 
> 标签：c#, html, vb.net, passwords

我写了一个小应用程序，它需要登录到一个网站来执行一些操作。问题是，每当我尝试在网站上设置密码字段时，它都不接受密码。

我通过使用 SendKeys 函数找到了解决此问题的方法。问题在于它需要焦点并且程序需要在后台运行。

有没有办法做到这一点？

以下是如何设置用户名字段的示例：

```
WebBrowser.Document.GetElementById("field-username").SetAttribute("value", "UserName") 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:36:15.427

这个问题的答案如下：

```
WebBrowser.Document.GetElementById("field-loginFormPassword").SetAttribute("maxLength", "20")
WebBrowser.Document.GetElementById("field-loginFormPassword").SetAttribute("value", "yourpassword") 
```

通过更改“maxlength”值，您可以将“值”设置为所需的文本，然后您可以提交表单，它会接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:09:27.740

尝试使用[mshtml](http://msdn.microsoft.com/en-us/library/aa741317%28v=vs.85%29.aspx)或[Html 敏捷包](http://htmlagilitypack.codeplex.com/)

# ajax - 如何在 MVC3 中使用 Ajax 发布各种自定义数据类型？

> ID：11903314
> 
> 赞同：1
> 
> 时间：2012-08-10T14:02:46.570
> 
> 标签：ajax, asp.net-mvc, forms, form-data

我有这个 ViewModel 来代表每个类别，它是我项目中的几个子类别：

```
public class Categories
{
    //a simple string for the category name
    [Required]
    public string Cat_Name { get; set; }

    //a list of strings for the sub-categories
    public List<string> SubCat_Name { get; set; }
} 
```

我将此模型传递给视图，并使用它来构建我的表单，如下所示：

```
@using (Html.BeginForm("Category", "Admin", FormMethod.Post))
{
    @Html.TextBoxFor(m => m.Name, new { @class = "Cat" })

    @Html.TextBoxFor(m => m.SubName, new { @class = "Sub" })

    @Html.TextBoxFor(m => m.SubName, new { @class = "Sub" })

    @Html.TextBoxFor(m => m.SubName, new { @class = "Sub" })

    @Html.TextBoxFor(m => m.SubName, new { @class = "Sub" })

    <input type="button" value="Create New Category" name="Category" onclick="DoIt()" />
} 
```

如您所见，`DoIt()`单击输入按钮会调用 javascript 函数 " "。这是功能：

```
function DoIt() {
    var stringArray = new Array();
    //I put all of the sub-categories inside an array, to be like a list<string>

    $(".Sub").each(function (index, value) {
        stringArray[index] = this.value;
    });

    $.ajax({
        url: '/Admin/Category',
        type: "POST",
        data: JSON.stringify($(".Cat").attr("value") , stringArray),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function () { console.log("post done"); },
        error: function () { }
    });
} 
```

如您所见，在 ajax 方法中，我试图将“类别名称”`$(".Cat").attr("value")`和“子类别名称”`stringArray`传递给相应的操作方法，该方法需要`Categories`我之前创建为视图模型的数据类型。它看起来像这样：

```
public ActionResult Category(Categories CAT)
{
    //Do something
    return View();
} 
```

问题是 ajax 方法不能同时发布两种数据类型，或者只是我不知道该怎么做。

我也试过这个：

```
var postdata = {
    Name: $(".Cat").attr("value"),
    SubName: stringArray
}; 
```

并放在`postdata`里面`JSON.stringify()`。但是仍然没有任何东西传递给 action 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:53:51.520

尝试发送格式如下的数据：

```
 $.ajax({
        url: '/Admin/Category',
        type: "POST",
        data: JSON.stringify({ Cat_Name: $(".Cat").val(), SubCat_Name: stringArray }),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function () { console.log("post done"); },
        error: function () { }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:52:43.137

我觉得你很亲近。

试试这个

```
var postdata = {
    Cat_Name: $(".Cat").val(),
    SubCat_Name: stringArray
}; 
```

&

```
$.ajax({
        url: '/Admin/Category',
        type: "POST",
        data: JSON.stringify(CAT:postdata),
        dataType: "json",
        contentType: "application/json",
        success: function () { console.log("post done"); },
        error: function () { }
    }); 
```

# php - 在php中用span包围所有单词

> ID：11903323
> 
> 赞同：1
> 
> 时间：2012-08-10T14:03:30.277
> 
> 标签：php, regex

给定一个像这样的 HTML 字符串：

```
Lorem ipsum dolor sit amet, <a href="#">consectetuer adipiscing</a>
elit, <strong>tincidunt</strong> ut volutpat. 
```

我如何用`<span>`元素包围所有单词，所以它变成：

```
<span>Lorem</span> <span>ipsum</span> <span>dolor</span> <span>sit</span>
<span>amet,</span> <a href="#"><span>consectetuer</span> <span>adipiscing</span></a>
<span>elit,</span> <strong><span>tincidunt</span></strong> <span>ut</span>
<span>volutpat.</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:23:30.180

更简单的方法

```
preg_replace('([a-zA-Z.,!?0-9]+(?![^<]*>))', '<span>$0</span>', '{{your data}}'); 
```

它包含`<span>`您词汇表中的所有单词，`[a-zA-Z.,!?0-9]+`除了`<brackets>`.
现在，如果需要，更改您的词汇表似乎很容易，例如，如果您不希望单个标点符号被包围，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:39:24.477

我试过这个，认为这就是你要找的：

```
$result = preg_replace("/(<[^>]+>)?\\w*/us", "<span>$0</span>", $searchText); 
```

这是输入

```
Lorem ipsum dolor sit amet, <a href="#">consectetuer adipiscing</a>elit, <strong>tincidunt</strong> ut volutpat. 
```

这是输出

```
<span>Lorem</span> <span>ipsum</span> <span>dolor</span> <span>sit</span> <span>amet</span>, <span><a href="#">consectetuer</span> <span>adipiscing</span><span></a></span><span>elit</span>, <span><strong>tincidunt</span><span></strong></span> <span>ut</span> <span>volutpat</span>. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T16:00:02.730

如果@daftcoder 的解决方案对您有用，那很好，但如果您的代码中有实体（< 等），它确实会失败。我找不到任何其他失败的案例。

如果这很重要，您可以在 PHP 中使用 DOM 操作。我知道这要复杂得多，但它应该比简单的正则表达式在更多情况下工作。

walk 和 doReplace 函数从另一个问题的答案从 JS 转换为 PHP。（[用 SPAN 标签包围 HTML 文本中的单个单词？](https://stackoverflow.com/questions/5059682/surrounding-individual-words-inside-html-text-with-span-tags)）

```
<?php

echo wrap_words('span', 'Lorem ipsum dolor sit amet, <a href="#">consectetuer adipiscing</a> elit, <strong>tincidunt</strong> ut volutpat.');

function wrap_words($tag, $text) {
    $document = new DOMDocument();
    $fragment = $document->createDocumentFragment();
    $fragment->appendXml($text);
    walk($tag, $fragment);
    $html = $document->saveHtml($fragment);
    // using saveHTML with a documentFragment can leave an invalid "<>"
    // at the beginning of the string - remove it
    return preg_replace('/^<>/', '', $html);
}

function walk($tag, $root)
{
    if ($root->nodeType == XML_TEXT_NODE)
    {
        doReplace($tag, $root);
        return;
    }
    $children = $root->childNodes;
    for ($i = $children->length - 1; $i >= 0; $i--)
    {
        walk($tag, $children->item($i));
    }
}

function doReplace($tag, $text)
{
    $fragment = $text->ownerDocument->createDocumentFragment();
    $fragment->appendXML(preg_replace('/\S+/', "<{$tag}>\$0</{$tag}>", $text->nodeValue));
    $parent = $text->parentNode;
    $children = $fragment->childNodes;
    for ($i = $children->length - 1; $i >= 0; $i--)
    {
        $parent->insertBefore($children->item($i), $text->nextSibling);
    }
    $parent->removeChild($text);
} 
```

# javascript - 使用 Ajax 显示随机图像

> ID：11903324
> 
> 赞同：0
> 
> 时间：2012-08-10T14:03:41.597
> 
> 标签：javascript, jquery, ajax

大家好，我正在尝试在**不加载（刷新）页面时显示一些随机图像**

那么如何在不刷新页面的情况下在页面上显示随机图像？

```
<script type="text/javascript">
    $(function () {
        $.ajax({
            type: "get", url: "Home/Oku", data: {}, dataType: "json",
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                   var newFirmDiv= $(' <img src="../../banner_image/' + data[i] + '" width="154px" height="108px"/>');
                   $(".firmShowCase").append(newFirmDiv);
                }
            }
        });
    });
</script> 
```

这是我的操作方法，它提供返回值一个数组

```
 public ActionResult Oku()
    {
        var query = from table in db.news select table.news_image_name;
        return Json(query, JsonRequestBehavior.AllowGet);
    } 
```

这是结果，如下所示

![在此处输入图像描述](../Images/cdfd316c3ddbfade047714b11c38209b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:09:23.390

**第二次尝试：**

最小值和最大值函数

(http://www.naden.de/blog/zufallszahlen-in-javascript-mit-mathrandom)

```
function getRandom(min, max) {
 if(min > max) {
  return -1;
 }

 if(min == max) {
 return min;
 }

 var r;

 do {
 r = Math.random();
 }
 while(r == 1.0);
 return min + parseInt(r * (max-min+1));
} 
```

和你的代码

```
for (var i = 0; i < data.length; i++) {
        randomIndex = getRandom(0, data.length-1);
        var newFirmDiv= $(' <img src="../../banner_image/' + data[randomIndex] + '"width="154px" height="108px"/>');
        $(".firmShowCase").append(newFirmDiv);
    } 
```

**如果你想保持随机顺序......**

...您必须像在新数组中一样保存它，然后您可以通过 ajax 将其保存在数据库或临时文件中。在当前文件的顶部，您必须检查是否存在现有临时文件；如果它应该绑定到用户，您可以生成一个随机密钥（如时间）将其保存在会话变量中，并使用相同的随机密钥命名 tmp 文件或数据库中的数据......到目前为止我的想法，如果这就是你要找的东西。当然，从一开始就在服务器端执行此操作会更容易。

**第一个答案：**

（问题不是很清楚 - 如果某些东西不起作用等等......）

首先，数据不是作为数组返回，而是作为对象返回。但是我觉得你对ajax函数的参数不是很了解。

在 url 参数中应该是要执行的脚本（例如 getImages.php）。所以你应该在那里收集图像，将它们解析为 jason 并打印它们，这样它将作为数据返回。

在参数数据中，您可以将一些参数传递给脚本，您可以通过在 php.ini 中对它们进行解码来获得这些参数。

例如，我只是选择了 PHP。

如果我错了并且“Home/Oku”会导致一些脚本，您可能会向我们展示它的作用？

# python - Python字典理解很慢

> ID：11903325
> 
> 赞同：14
> 
> 时间：2012-08-10T14:03:46.373
> 
> 标签：python, list, dictionary

我有一本字典`d1`和一个清单`l1`。

字典键是字符串，值是我自己定义的对象。如果有帮助，我可以更详细地描述 Object 但现在，这些对象有一个 list 属性`names`，并且 的某些元素`name`可能出现在`l1`.

我想要做的是丢弃字典中的任何元素`d1`，其中`name`所述元素中对象的属性不包含任何出现在`l1`.

作为一个简单的例子：

```
l1 = ['cat', 'dog', 'mouse', 'horse', 'elephant', 
      'zebra', 'lion', 'snake', 'fly']

d1 = {'1':['dog', 'mouse', 'horse','orange', 'lemon'],
      '2':['apple', 'pear','cat', 'mouse', 'horse'], 
      '3':['kiwi', 'lime','cat', 'dog', 'mouse'], 
      '4':['carrot','potato','cat', 'dog', 'horse'], 
      '5':['chair', 'table', 'knife']} 
```

所以结果字典将或多或少相同，但每个列表的元素将是键值对从`1`到`4`排除水果和蔬菜，并且不会包含第 5 个键值对，因为没有家具值出现在`l1`.

为此，我使用了一个嵌套列表/字典理解，如下所示：

```
d2 = {k: [a for a in l1 if a in d1[k]] for k in d1.keys()}
print(d2)

>>>>{'1': ['dog', 'mouse', 'horse'], 
     '3': ['cat', 'dog', 'mouse'], 
     '2': ['cat', 'mouse', 'horse'], 
     '5': [], 
     '4': ['cat', 'dog', 'horse']}

d2 = {k: v for k,v in d2.iteritems() if len(v)>0}
print(d2)

>>>>{'1': ['dog', 'mouse', 'horse'], 
     '3': ['cat', 'dog', 'mouse'], 
     '2': ['cat', 'mouse', 'horse'],  
     '4': ['cat', 'dog', 'horse'],} 
```

这似乎可行，但对于包含 7000 多个项目的大型词典，大约需要 20 秒才能完成。就其本身而言，并不可怕，但我需要在一个循环中执行此操作，该循环将迭代 10,000 次，因此目前它不可行。关于如何快速做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T14:08:51.847

您正在有效地计算字典值中出现的每个列表与 list 的集合交集`l1`。由于涉及的线性搜索，使用列表来设置交集是相当低效的。您应该`l1`变成一个集合并使用`set.intersection()`或设置成员资格测试（取决于结果是否再次是一个集合是否可以接受）。

完整的代码可能如下所示：

```
l1 = set(l1)
d2 = {k: [s for s in v if s in l1] for k, v in d1.iteritems()}
d2 = {k: v for k, v in d2.iteritems() if v} 
```

除了两个字典理解之外，还最好在此处使用单个`for`循环：

```
l1 = set(l1)
d2 = {}
for k, v in d1.iteritems():
    v = [s for s in v if s in l1]
    if v:
        d2[k] = v 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T14:11:43.480

问题不是字典理解，而是其中的嵌套列表理解。您每次都在迭代相同的键。这种事情最好用套装来完成。

```
s1 = set(l1)
d2 = {k: list(s1.intersection(v)) for k, v in d1.items()} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:27:56.200

```
l1 = ['cat', 'dog', 'mouse', 'horse', 'elephant', 
      'zebra', 'lion', 'snake', 'fly']

d1 = {'1':['dog', 'mouse', 'horse','orange', 'lemon'],
      '2':['apple', 'pear','cat', 'mouse', 'horse'], 
      '3':['kiwi', 'lime','cat', 'dog', 'mouse'], 
      '4':['carrot','potato','cat', 'dog', 'horse'], 
      '5':['chair', 'table', 'knife']}

def gen_items(valid_name_set, d):
    for k, v in d.iteritems():
        intersection = valid_name_set.intersection(v)
        if intersection: # not empty
            yield (k, intersection)

print dict(gen_items(set(l1), d1)) 
```

输出：

```
{'1': set(['dog', 'horse', 'mouse']),
 '2': set(['cat', 'horse', 'mouse']),
 '3': set(['cat', 'dog', 'mouse']),
 '4': set(['cat', 'dog', 'horse'])} 
```

或者：

```
from itertools import ifilter
from operator import itemgetter
set_l1 = set(l1)
d2 = dict(ifilter(itemgetter(1), 
                  ((k, set_l1.intersection(v)) for k, v in d1.iteritems()))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:12:34.353

使用`set`：

```
>>> l1 = ['cat', 'dog', 'mouse', 'horse', 'elephant',
      'zebra', 'lion', 'snake', 'fly']
>>> d1 = {'1':['dog', 'mouse', 'horse','orange', 'lemon'],
      '2':['apple', 'pear','cat', 'mouse', 'horse'],
      '3':['kiwi', 'lime','cat', 'dog', 'mouse'],
      '4':['carrot','potato','cat', 'dog', 'horse'],
      '5':['chair', 'table', 'knife']}
>>> l1_set = set(l1)
>>> d2 = dict((k, set(d1[k]) & l1_set) for k in d1.keys())
>>> d2
{'1': set(['horse', 'mouse', 'dog']), '3': set(['mouse', 'dog', 'cat']), '2': set(['horse', 'mouse', 'cat']), '5': set([]), '4': set(['horse', 'dog', 'cat'])}
>>> d2 = dict((k, v) for k,v in d2.iteritems() if v)
>>> d2
{'1': set(['horse', 'mouse', 'dog']), '3': set(['mouse', 'dog', 'cat']), '2': set(['horse', 'mouse', 'cat']), '4': set(['horse', 'dog', 'cat'])} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:17:41.350

如果你转换`l1`为 a`set`并稍微修改 dict 理解，你可以让它工作大约快三倍：

```
l1 = set(['cat', 'dog', 'mouse', 'horse', 'elephant', 
      'zebra', 'lion', 'snake', 'fly'])

d1 = {'1':['dog', 'mouse', 'horse','orange', 'lemon'],
      '2':['apple', 'pear','cat', 'mouse', 'horse'], 
      '3':['kiwi', 'lime','cat', 'dog', 'mouse'], 
      '4':['carrot','potato','cat', 'dog', 'horse'], 
      '5':['chair', 'table', 'knife']}

d2 = {k: [a for a in d1[k] if a in l1] for k in d1.keys()}
print(d2) 
```

以下是对性能进行基准测试的方法：

```
import timeit

t = timeit.Timer(
    "d2 = {k: [a for a in l1 if a in d1[k]] for k in d1.keys()}",
    "from __main__ import (d1, l1)",
    )
print "%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000)

t = timeit.Timer(
    'd2 = {k: [a for a in d1[k] if a in l1] for k in d1.keys()}',
    "from __main__ import (d1, l1)",
    )
print "%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000) 
```

我在这里假设您无法控制`d1`，并且在过滤之前将 的所有值转换`d1`为集合太慢了。

# migration - 将 OpenLaszlo 应用程序迁移到 5.0：标签 xxx 不能用作视图的子项

> ID：11903328
> 
> 赞同：1
> 
> 时间：2012-08-10T14:03:58.380
> 
> 标签：migration, openlaszlo, lzx

我想知道在升级 open laszlo 时是否有人遇到过这样的缺陷。

```
The tag xxx cannot be used as a child of view
The tag xxx cannot be used as a child of class 
```

为什么会发生此错误？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:02:38.647

错误信息*xxx cannot be used as child yyy* of view 仅仅意味着你在一个标签内使用了一个标签，而子标签是未知的。简单的例子：

```
<canvas debug="true">

  <view width="100" height="100" bgcolor="red">
    <unknown_tag />
  </view>

</canvas> 
```

编译器错误消息：class_tag_error.lzx:4:48：标签“unknown_tag”不能用作视图 class_tag_error.lzx:5:20 的子项：未知标签

我记得有些人在从 4.0 升级到 4.2 时遇到了类似的问题，这里是[laszlo-dev 邮件列表中的讨论](http://old.nabble.com/OL-4.2%3a-NetRemotecalls-annihilated--td21847639.html)。问题是由代码中的标准 OpenLaszlo 标记引起的，还是由您添加的自定义类或标记引起的？

OpenLaszlo 编译器知道的所有类和标签都有一个模式文件，可以在

> $LPS_HOME/WEB-INF/lps/schema/build/lfc.xml

如果编译器抱怨内置 LZX 标记，作为最后的手段，如果该特定标记的类定义仍然存在于您正在使用的 OpenLaszlo 版本中，则可以检查该文件。这是 - 例如 - <view> 标签的类/接口定义的开头：

```
 <interface extends="node" jsname="LzView" name="view">
    <method args="who, self, prop, refView" name="$lzc$getAttributeRelative_dependencies"/>
    <method args="who, self" name="$lzc$getBounds_dependencies"/>
    <method args="who, self" name="$lzc$getCurrentTime_dependencies"/>
    <method args="ignore" name="$lzc$getMouse_dependencies"/>
    <method args="who, self" name="$lzc$getTotalTime_dependencies"/>
    <method args="ignore" name="$lzc$isMouseOver_dependencies"/>
  ... (continued) 
```

虽然这绝对不是找出标签是否仍然存在的舒适方式。

# php - 检测支持 cookie 和 jQuery Mobile 的智能手机/平板电脑浏览器

> ID：11903331
> 
> 赞同：1
> 
> 时间：2012-08-10T14:04:06.527
> 
> 标签：php, cookies, jquery-mobile, browser-detection

我有一个带有完整浏览器和 jQuery Mobile 界面的网站，用户可以在两者之间切换。他们的偏好存储在 cookie 中。默认情况下，该站点向访问者提供完整版本，没有偏好 cookie，但为了让现代智能手机用户更好地使用它，我希望他们的默认值为 JQM。所以，我在我的基本控制器类的构造函数中有这段代码：

```
class BaseController
{

    protected $mobile;  // must be 0 or 1, cookies can't handle boolean 'false'

    public function __construct()
    {
        if (isset($_COOKIE['mobile']))
        {
            $this->mobile = $_COOKIE['mobile'];
        }
        else
        {
            $this->mobile = $this->isSmartphoneWithCookies();
            setcookie("mobile", $this->mobile, time() + 7776000, '/', ''); // 90 days
        }
    }

    private function isSmartphoneWithCookies()
    {
        $SMARTPHONE_WITH_COOKIES = "android.+mobile|blackberry|ip(hone|od)|opera m(ob|in)i";

        return preg_match("/$SMARTPHONE_WITH_COOKIES/i", $_SERVER['HTTP_USER_AGENT']) ? 1 : 0;
    }

    // the rest of my controller class....
} 
```

在这里，我更喜欢速度而不是准确性，所以我不是在寻找更慢的、最新的查找服务，如这里建议的：[简单的智能手机检测](https://stackoverflow.com/questions/5122566/simple-smart-phone-detection)

只是快速表明访问者拥有支持 cookie 和 JQM 的当前顶级智能手机/平板电脑浏览器之一。

有人可以建议对我的 $SMARTPHONE_WITH_COOKIES 进行改进吗？或者将我指向适合我用例的 UA 签名集合？具体来说，将黑莓列入名单是否安全？我是否忽略了流行的功能浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:53:29.360

有关检测浏览器是否支持 JQM 的方法和[检查](https://stackoverflow.com/questions/531393/how-to-detect-if-cookies-are-disabled-is-it-possible)cookie的方法，请参阅[THIS](https://stackoverflow.com/questions/4833281/jquery-mobile-how-to-check-if-the-browser-supports-jquery-mobile-events)和[THIS问题。](https://stackoverflow.com/questions/8174083/php-how-to-detect-jquery-mobile-a-grade-browsers-server-side?rq=1)

两个答案都来自stackoverflow :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T19:00:32.527

尽管以下列表中并非所有移动浏览器都支持 cookie，但拥有移动设备的 UA 字符串列表可能很有用（此列表来自[Django App mini 检测器](https://code.google.com/p/minidetector)）： http: [//minidetector.googlecode.com/svn/trunk/minidetector /search_strings.txt](http://minidetector.googlecode.com/svn/trunk/minidetector/search_strings.txt)

需要注意的是，此列表不包括诺基亚平板电脑 - 请[在此处查看原因](https://code.google.com/p/minidetector/wiki/WhatIsConsideredMobile)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:51:33.677

就个人而言，我不想依赖维护一系列用户代理。新设备不断涌现，就像没人管我的事，我什至更改了用户代理名称并搞砸了我的检测过程（Kindle Fire 的 Silk 浏览器）。

另一种方法是测试设备功能。[WURFL](http://wurfl.sourceforge.net/php_index.php)数据库是一个很好的起点。尽管最近发生了一些禁止衍生作品的[许可更改，但它们仍然有一个公共存储库，您可以在您的站点上下载和使用。](http://wurfl.sourceforge.net/license.php)

以下是一些可用于测试 A 级设备的功能：

```
$requestingDevice = $wurflManager->getDeviceForHttpRequest($_SERVER);

$is_wireless = ($requestingDevice->getCapability('is_wireless_device') == 'true');
$is_tablet = ($requestingDevice->getCapability('is_tablet') == 'true');
$is_mobile_device = ($iswireless || $istablet);
$supports_cookies = ($requestingDevice->getCapability('cookie_support') == 'true');
$supports_web = ($requestingDevice->getCapability('device_claims_web_support') == 'true');
$supports_javascript = ($requestingDevice->getCapability('ajax_support_javascript') == 'true');
$supports_ajax = ($requestingDevice->getCapability('ajax_xhr_type') != 'none');
$supports_css3 = ($requestingDevice->getCapability('css_rounded_corners') == 'css3'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T06:50:08.303

根据设计，我的应用程序的主要 UI 选择器是用户。我不想将其委托给检测脚本。有问题的检测只是为了给出一个聪明的默认值。这是一个有风险的功能，因为误报（例如不支持 cookie 的智能手机）会使某些用户完全无法访问我的网站。因此，如果失败，则需要向标准接口失败。

对于它的价值，我考虑了以下几点：

*   Opera Mini 对我的 JQM 应用程序的 JavaScript 支持不够好。
*   在 Android 上运行的 Opera Mobile 是我很想抓住的一个主要类别，但我没有足够的信心来正确地从 UA 字符串中挑选出所有这些。
*   我考虑过“windows phone os 7”，但认为它过时太快了
*   符合条件的黑莓浏览器子集也很难简单检测，因此我决定放弃整个层，而不是冒着误报的风险。

所以，我剩下的是：

```
$SMARTPHONE_WITH_COOKIES = "android.+mobile|iphone|ipod"; 
```

保持它如此轻松和简单的代价是我将不得不每两年左右再次重新考虑这个问题。我还将有许多移动访问者需要额外点击才能获得移动版本。

# backup - 在用户访问基于文件的多用户 Visual FoxPro 数据库时是否安全？

> ID：11903332
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:04:12.403
> 
> 标签：backup, foxpro, visual-foxpro

在其他用户访问基于文件的多用户 Visual FoxPro 数据库时，出于备份目的制作副本（通过带有 copy 或 robocopy 的 cmd，或通过复制和粘贴）是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:40:35.093

我会说这不是一个安全的操作。首先，我不确定这是否可能。我没有尝试过，但可能是当您尝试复制它时，副本将无法告诉您文件正在使用中。即使它确实允许您复制它，也存在危险，因为当数据库打开时，可以对其进行更改。Visual FoxPro 数据库与存储在文件系统上的任何其他文件没有什么不同，因此如果复制文件的一部分并进行更改，则备份可能会损坏，并且损坏的数据库将变得不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:42:01.870

如果有人独占打开 DBF，则复制 DBF 将失败。

我们确实在此处使用 robocopy 作为辅助备份，但我们将其安排在 (IIRC) 凌晨 3 点运行，此时系统中没有实时用户并且可能完成自动化流程。我们不完全信任在工作时间用户大量写入表时制作的副本 - 无法知道结果表是否一致。

此外，您必须担心 .CDX 和 .FPT（如果适用）与 .DBF 不同步，因为它们会在不同的时间被复制。

所以你的问题的答案是“可能不会，除非你可以确定没有写入发生（当然这些表不是专门打开的）。”

# sql-server - 如何将我的 SQL Server 数据库的访问权限限制为特定 IP？

> ID：11903337
> 
> 赞同：4
> 
> 时间：2012-08-10T14:04:29.987
> 
> 标签：sql-server, sql-server-2008

我可以根据客户端 IP 地址限制对 SQL Server 2008 数据库中特定数据库的访问吗？如果是这样，我该怎么做？此服务器上有多个数据库，因此我们无法根据 IP 阻止对 SERVER 的访问，只能阻止特定的 DATABASE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:35:12.687

You absolutely cannot do this at database granularity. You are talking about detecting things like queries using three part names (`[banned_db].[dbo].[table]`) and [synonyms](http://msdn.microsoft.com/en-us/library/ms177544.aspx) referencing the protected DB while *using* an unprotected DB. There just isn't any framework in place to do such. You must rely on access security (GRANT/DENY/REVOKE). At best, do what gbn suggests and separate the protected DB into it's own instance and then use Firewall rules to protect its ports.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T21:33:21.590

目前无法根据您来自的网段限制对特定数据库的访问。我可以看到需要限制从阶段服务器对生产数据库的访问。我想这就是为什么需要为每个环境构建不同的 SQL 服务器的原因。

我相信您可以通过应用程序限制 SQL 访问[http://msdn.microsoft.com/en-us/library/bb669062.aspx](http://msdn.microsoft.com/en-us/library/bb669062.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:28:58.167

就个人而言，我会使用*安全性*来做到这一点。通过权限而不是通过 IP 限制访问。

如果您确实需要 IP 地址安全（例如，对于瑞士或新加坡等银行保密司法管辖区），请使用单独的服务器

# javascript - 我正在使用 Wijimo 文本编辑器插件，并且库加载时间太长 - 我需要减少 JavaScript 加载时间或在幕后加载它们

> ID：11903343
> 
> 赞同：1
> 
> 时间：2012-08-10T14:04:47.790
> 
> 标签：javascript, jquery, html, model-view-controller

我正在使用 Wijimo javascript 文本编辑器插件，并且库的加载顺序不正确，因此页面加载存在延迟，并且不显示文本编辑器已完全加载。

我将 javascript 库存储在页脚的底部，并将 css 文件存储在我使用的自定义编辑器的页眉中。

javascript 已最小化并存储在本地。

编辑器是我使用的一个 javascript 插件

我使用 mvc .net 并使用 .cshtml。

是否有一些 ajax 加载或延迟加载程序可以在幕后预加载这些文件，以便当我加载具有文本编辑器的页面时，它会立即完全加载？

# android - Android：如何在普通类中获取给定活动的视图？

> ID：11903345
> 
> 赞同：3
> 
> 时间：2012-08-10T14:04:49.180
> 
> 标签：android, android-layout, layout, view

我有一个正常的课程（不是活动）。在那个类中，我引用了一个活动。现在我想访问该活动的布局 xml 中包含的视图（以添加一个子项）。我不知道该活动的布局文件的名称。我只知道要访问的视图的 ID（例如：R.id.my_view）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:10:53.610

就如此容易！

```
View view = activity.findViewById(R.id.my_view); 
```

在布局的情况下：

```
LinearLayout layout = (LinearLayout) activity.findViewById(R.id.my_layoutId); 
```

并添加视图：

```
layout.addView(view); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:49:03.510

关于 NullPointerException （您应该添加到问题中），请始终确保您在尝试访问 XML 中定义的视图*之前*已在 Activity 中调用了[setContentView() 。](http://developer.android.com/reference/android/app/Activity.html#setContentView%28int%29)示例用法：

 *```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ...
    }

    ...
} 
```

然后，某处，

```
 ViewGroup group = (ViewGroup) context.findViewById(R.id.group); // In your example, R.id.my_view 
```

您需要调用 setContentView() 的原因是在调用它之前，您的 View(Group) 不存在。因为*find* ViewById() 无法*找到*不存在的东西，所以它[返回 null](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:12:29.267

您可以让您的方法接受一个 Activity 参数，然后使用它通过 id 查找视图。

前任：

```
public class MyClass{

   public void doSomething(Activity context){
      TextView text=(TextView)context.findViewById(R.id.my_textview);
   }

} 
```

然后在您的活动中：

```
obj.doSomething(YourActivity.this); 
```*

# android - 刷新android PreferenceFragment

> ID：11903346
> 
> 赞同：13
> 
> 时间：2012-08-10T14:04:53.510
> 
> 标签：android, android-fragments, android-preferences

我有`CheckBoxPreference`一个`FragmentPreference`。当用户激活复选框时，我检查是否安装了应用程序，如果没有，我将首选项重置为 false，然后打开*Play 商店*下载应用程序。

基本上一切正常，但我有一个刷新 UI 的问题。实际上，即使我在打开*Play Store*之前将首选项设置为 false ，当用户返回时，该框也会被选中（片段刚刚暂停并恢复，因此忽略首选项值）。

有没有办法“刷新”活动或片段？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T14:10:54.420

让您的 PreferenceFragment 实现[OnSharedPreferenceChangeListener](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)接口。

在`onCreate()`中，您可以读取偏好值并相应地设置 UI。例如：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Load the preferences from an XML resource.
    addPreferencesFromResource(R.xml.shakesql_app_prefs);

    // Initialize pref summary label.

    // Get a reference to the application default shared preferences.
    SharedPreferences sp = getPreferenceScreen().getSharedPreferences();

    // Read the current preference value.
    String listVal =
            sp.getString(getString(R.string.preference_font_size_key),
                    getString(R.string.preference_font_size_default));

    // Look up the textual description corresponding to the
    // preference value and write it into the summary field.
    String listDesc = descriptionFromPref(
            listVal, 
            getResources().getStringArray(
                    R.array.preference_font_size_values), 
                    getResources().getStringArray(
                            R.array.preference_font_size_labels)
                    );
    if (!TextUtils.isEmpty(listDesc)) {
        ListPreference listPref =
                (ListPreference) findPreference(getString(R.string.preference_font_size_key));
        listPref.setSummary(listDesc);
    }
} 
```

然后，在 中`onSharedPreferenceChanged()`，更新 UI。

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    Preference pref = findPreference(key);
    if (pref instanceof ListPreference) {
        // Update display title
        // Write the description for the newly selected preference 
        // in the summary field.
        ListPreference listPref = (ListPreference) pref;
        CharSequence listDesc = listPref.getEntry();
        if (!TextUtils.isEmpty(listDesc)) {
            pref.setSummary(listDesc);
        }
    }        
} 
```

这是 API Demos 中 AdvancedPreferences 示例的代码片段，用于强制复选框首选项的值。

```
// Toggle the value of mCheckBoxPreference.
if (mCheckBoxPreference != null) {
            mCheckBoxPreference.setChecked(!mCheckBoxPreference.isChecked());
} 
```

# django - 带有文件错误的 Django REST Framework POST 数据（使用 ModelResource）

> ID：11903347
> 
> 赞同：5
> 
> 时间：2012-08-10T14:04:56.487
> 
> 标签：django, file, post, urllib2, django-rest-framework

尝试在 Django REST Framework 应用程序中使用文件发布数据时遇到了一个非常大的问题。我通过 djangorestframework 网站上的示例创建了一个简单的应用程序。所以我有 urls 文件：

```
class MyImageResource(ModelResource):
    model = Image 
```

在 urlpatters 中：

```
url(r'^image/$', ListOrCreateModelView.as_view(resource=MyImageResource)),
url(r'^image/(?P<pk>[^/]+)/$', InstanceModelView.as_view(resource=MyImageResource)), 
```

图像模型很简单：

```
class Image(models.Model):
    image = models.ImageField(upload_to=get_file_path)
    name = models.CharField(max_length=256, blank=True)
    description = models.TextField(blank=True) 
```

在浏览器中测试 REST 页面，效果很好。甚至发布带有文件的数据。

我的问题是我想创建一个简单的 python 应用程序来发布数据。我使用了简单的 urllib2，但我得到 500 内部错误或 400 错误请求：

```
poza = open('poza.jpg', 'rb')

initial_data = (    
    {'name', 'Imagine de test REST'},
    {'description', 'Dude, this is awesome'},
    {'image', poza},
)

d = urllib.urlencode(initial_data)
r = urllib2.Request('http://localhost:8000/api/image/', data=d,
                headers={'Content-Type':'multipart/form-data'})
resp = urllib2.urlopen(r)
code = resp.getcode()
data = resp.read() 
```

我也尝试过使用 MultipartPostHandler：

```
import MultipartPostHandler, urllib2, cookielib
cookies = cookielib.CookieJar()

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookies),
                          MultipartPostHandler.MultipartPostHandler)

params = {
    "name":"bob",
    "description":"riviera",
    "content" : open("poza.jpg", "rb")
}

opener.open("http://localhost:8000/api/image/", params) 
```

但相同：500 或 400 错误，服务器（python manage.py runserver）停止并出现以下错误：

```
Exception happened during processing of request from ('127.0.0.1', 64879)
Traceback (most recent call last):
  File "C:\Python27\lib\SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 570
, in __init__
    BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "C:\Python27\lib\SocketServer.py", line 641, in __init__
    self.finish()
  File "C:\Python27\lib\SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "C:\Python27\lib\socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 10053] An established connection was aborted by the software in yo
ur host machine 
```

如果有人有，请给我一个使用文件发布数据的示例，或者告诉我发布 python 代码有什么问题。我找不到更多的例子。

服务器看起来不错，我可以在浏览器中发布数据。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:31:36.847

看起来好像您不是在读取文件，而是在传递文件指针？

尝试：

```
initial_data = (    
    {'name', 'Imagine de test REST'},
    {'description', 'Dude, this is awesome'},
    {'image', poza.read()},
) 
```

# jsp - 为什么 JSP 需要 tomcat 或任何其他额外的服务器呢？

> ID：11903352
> 
> 赞同：0
> 
> 时间：2012-08-10T14:05:16.723
> 
> 标签：jsp, tomcat

我最近开始学习java和JSP。要运行 JSP，我被告知我需要下载 apache tomcat。我这样做并将其配置为 Eclipse 并获得了结果。这个 apache tomcat 到底是什么，为什么 JSP 需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:08:08.477

它是一个[servlet 或 web 容器](http://en.wikipedia.org/wiki/Web_container)。

它有什么作用 ？它将传入的 HTTP 请求定向到它管理的许多 servlet 应用程序之一，并负责这些应用程序的分离、请求的线程/管理和网络 I/O。

如果你没有这个，你必须编写网络代码、HTTP 协议代码、传入请求的线程、不同应用程序的沙盒（通过类加载器）和处理 servlet 的生命周期（初始化/销毁等）

使用 servlet 容器，您可以专注于提供给您的传入 HTTP 请求并提供合适的输出作为 HTTP 响应，而不必担心上述任何事情。

您正在编写的 JSP 是一种特殊形式的 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:11:08.660

Apache Tomcat 是一个 servlet 容器
它解释 JSP 文件所基于的 Servlet
对于您的 Java EE 应用程序，您可以使用像 Tomcat 这样的 servlet 容器或像 JBoss 这样可以管理 EJB 的应用程序服务器[这篇文章描述了 servlet 容器和应用程序服务器之间的区别](https://stackoverflow.com/questions/5039354/difference-between-an-application-server-and-a-servlet-container)

# c# - 需要绝对路径？

> ID：11903358
> 
> 赞同：3
> 
> 时间：2012-08-10T14:05:24.547
> 
> 标签：c#, path

通常当我用 C# 构建一个可以消化命令行参数的应用程序时，如果这些参数是文件路径字符串，我可以选择使用相对路径以及绝对路径来引用我计算机上的特定文件并在程序中使用它.

在我的上一个项目中，如果我从命令提示符给它一个相对路径，我的应用程序将无法工作。但是在 VS 2010 的调试模式下，它会消化相对路径。在命令提示符下，它需要一个绝对路径才能工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:07:37.003

您需要设置工作目录。请参阅：[Directory.SetCurrentDirectory 方法](http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory.aspx)

**示例**：

`System.IO.Directory.SetCurrentDirectory( System.AppDomain.CurrentDomain.BaseDirectory );`

在调试版本中，当前目录默认设置为 debug\bin。

指定被调试程序的工作目录。在 Visual C# 中，工作目录是默认情况下从 \bin\debug 启动应用程序的目录。

[http://msdn.microsoft.com/en-us/library/2kf0yb05.aspx](http://msdn.microsoft.com/en-us/library/2kf0yb05.aspx)

您还可以使用**Assembly.GetEntryAssembly()**或**Assembly.GetExecutingAssembly()**检索程序集的路径，然后使用 Location 属性或 CodeBase 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:17:10.123

您可以自己将相对路径转换为绝对路径，如下所示：

```
if (!Path.IsPathRooted(path))
    path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\\" + path; 
```

或者将当前目录更改为可执行路径：

```
string exePath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
Directory.SetCurrentDirectory(exePath); 
```

# blackberry - 有没有办法以编程方式从黑莓最常用的列表中删除应用程序？

> ID：11903361
> 
> 赞同：2
> 
> 时间：2012-08-10T14:05:25.090
> 
> 标签：blackberry, java-me, blackberry-jde

我正在尝试部署一个监控应用程序，并想知道是否可以阻止它出现在最常用的列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:10:22.077

如果您扩展您的应用程序`Application`而不是`UiApplication`它，则它根本不会显示在任何主屏幕上。

# python - 如何使用正则表达式从文本中查找特定单词并返回所有出现？

> ID：11903362
> 
> 赞同：4
> 
> 时间：2012-08-10T14:05:24.480
> 
> 标签：python, regex

就像问题的标题一样。

我是 Python 和正则表达式的新手。因此，我必须从段落中搜索特定单词并显示所有出现索引。

例如：

该段是：

> 这是一个测试文本，用于测试和测试和测试。

和这个词：

> 测试

**该算法应该返回上一段中三个单词test**的非重叠出现的索引（但不是***testing***，因为我的意思是搜索整个单词，而不仅仅是子字符串）。

具有相同段落和此“单词”的另一个示例：

> 测试和

该算法应返回 2 次出现的**test 和**。

我想我必须使用一些正则表达式来找到整个单词的模式，前后是标点符号，例如`. , ; ? -`

谷歌搜索后，我发现`re.finditer`应该使用类似的东西，但似乎我还没有找到正确的方法。请帮忙，提前谢谢你。;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:19:20.807

是的，[`finditer`](http://docs.python.org/library/re.html#re.finditer)是要走的路。用于[`start()`](http://docs.python.org/library/re.html#re.MatchObject.start)查找匹配的索引。

* * *

**例子：**

```
import re

a="This is a testing text and used to test and test and test."
print [m.start() for m in re.finditer(r"\btest\b", a)]
print [m.start() for m in re.finditer(r"\btest and\b", a)] 
```

**输出：**

> [35, 44, 53]
> [35, 44]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:13:08.050

在您的正则表达式中使用单词边界锚`\b`来指示您希望匹配在单词边界处开始/结束。

```
>>> sentence = "This is a testing text and used to test and test and test."
>>> pattern = re.compile(r'\btest\b')
>>> [m.start() for m in pattern.finditer(sentence)]
[35, 44, 53] 
```

# java - 使用 apache 流 API 和 Google App Engine 虚拟文件系统上传文件

> ID：11903367
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:05:46.397
> 
> 标签：java, google-app-engine, jakarta-ee, apache-commons

要将文件上传到我在 google appengine 上的项目目录中，我正在尝试使用[apache 流 API](http://commons.apache.org/fileupload/streaming.html)和[Google App Engine Virtual File System](http://code.google.com/p/gaevfs/)。这是我到目前为止能够做的事情：

```
 String path = request.getParameter("Data");
    PrintWriter writer = response.getWriter();
     try {
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       if( !isMultipart ) {
           writer.println("File cannot be uploaded !");
       }
       else {
           ServletFileUpload upload = new ServletFileUpload();
           FileItemIterator iter = upload.getItemIterator(request);
           List list = null;
           while(iter.hasNext()) {
               FileItemStream item = iter.next();
               String name  = item.getFieldName();
               String fileName = item.getName();
               InputStream stream = item.openStream();
               if(item.isFormField()) {
                   // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
               } else {
                   GaeVFS.setRootPath( getServletContext().getRealPath("/") );
                   FileSystemManager fsManager = GaeVFS.getManager();
                   //....NOW WHAT....

               }
           }
       } 
```

我被困在 else 块中。现在如何进行？我必须将文件写入项目中名为*uploads*的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:57:19.453

GAE 文件系统是只读的。没有通过 API 进行的[写访问。](https://developers.google.com/appengine/kb/java#writefile)更改文件系统内容的唯一方法是通过`appcfg`.

如果您需要上传数据并存储它，请使用[Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)或[Google Cloud Storage](https://developers.google.com/appengine/docs/java/googlestorage/overviewhttp://)。

**Upload to blobstore:**

```
String path = request.getParameter("Data");
PrintWriter writer = response.getWriter();
 try {
   boolean isMultipart = ServletFileUpload.isMultipartContent(request);
   if( !isMultipart ) {
       writer.println("File cannot be uploaded !");
   }
   else {
       ServletFileUpload upload = new ServletFileUpload();
       FileItemIterator iter = upload.getItemIterator(request);
       List list = null;
       while(iter.hasNext()) {
           FileItemStream item = iter.next();
           String name  = item.getFieldName();
           String fileName = item.getName();
           InputStream stream = item.openStream();
           if(item.isFormField()) {
               // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
           } else {

            // Get a file service
            FileService fileService = FileServiceFactory.getFileService();

            // Create a new Blob file with mime-type "text/plain"
            AppEngineFile file = fileService.createNewBlobFile(mimeType, filename);

            // Open a channel to write to it
            boolean lock = true;
            FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);

            // copy byte stream from request to channel
            byte[] buffer = new byte[10000];
            int len;
            while ((len = stream.read(buffer)) > 0) {
                writeChannel.write(ByteBuffer.wrap(buffer, 0, len));
            }

            writeChannel.closeFinally();

            // here your data is saved to blobstore
            // you should now save a blobstore key somewhere (=to a datastore)
            // so that you can find it next time
            String blobKey = fileService.getBlobKey(file).getKeyString();

           }
       }
   } 
```

**Serving a blob:**

```
public class BlobServlet extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String blobParameter = request.getParameter("blob-key");
    if (blobParameter == null) {
        response.sendError(404, "Missing 'blob-key' parameter.");
    }

    BlobKey blobKey = new BlobKey(blobParameter);

    response.setHeader("Cache-Control", "max-age=" + (15 * 60));   // 15 min
    BlobstoreServiceFactory.getBlobstoreService().serve(blobKey, response);
}
} 
```

**Registering your servlet:**

```
<servlet>
    <servlet-name>BlobServlet</servlet-name>
    <servlet-class>com.yourpackage.BlobServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>BlobServlet</servlet-name>
    <url-pattern>/blobservet</url-pattern>
</servlet-mapping> 
```

**Referencing blob in your JSP:**

```
<a src="/blobserve?<%=blobKey%>">Link to blob</a> 
```

# c# - 未看到 Combobox SelectionChanged 事件？

> ID：11903372
> 
> 赞同：0
> 
> 时间：2012-08-10T14:05:58.593
> 
> 标签：c#, windows, combobox, microsoft-metro, selectionchanged

在 Windows 8 Metro 应用程序中，我有一个 Combobox，我想在每次从列表中选择其他内容时调用一个方法。

我有我的方法，并且使用滑块的*ValueChanged="MyMethod"*，它工作正常。

但是，当我尝试使用组合框时：

```
<ComboBox x:Name="Mentality" SelectedValue="Item1" SelectionChanged="MyMethod" >
                <x:String>Item1</x:String>
                <x:String>Item2</x:String>
                <x:String>Item3/x:String> 
```

我有这个错误：

> 'MyMethod' 没有重载匹配委托 Windows.UI.Xaml.Controls.SelectionChangedEventHandler'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:45:57.980

`ValueChanged`并且`SelectionChanged`有不同的签名。您不能对两者使用相同的处理程序。

要连接到`SelectionChanged`，您需要这样的方法：

```
void MyMethod(object sender, SelectionChangedEventArgs e) 
```

# python - Python 中无标题 QtWebKit 浏览器中多个网页的屏幕截图

> ID：11903375
> 
> 赞同：4
> 
> 时间：2012-08-10T14:06:05.387
> 
> 标签：python, qt, pyqt4, qtwebkit

我正在尝试渲染多个网页并截取它们的屏幕截图，但我只能在渲染一个网页时让它工作，因为当我在多个网页上尝试它时，程序要么停在它的轨道上并永远挂起，要么就是不做任何事情带有图像、css 并将提取站点的文本并将其放入一个长文本块中。通常发生的事情是它会挂起。

我用来在内存中呈现网页的代码是这样的：

```
class Render(QWebPage):
    def __init__(self, url):
        self.app = QApplication(sys.argv)
        QWebPage.__init__(self)

        # Settings
        s = self.settings()
        #s.setAttribute(QWebSettings.AutoLoadImages, False)
        s.setAttribute(QWebSettings.JavascriptCanOpenWindows, False)
        s.setAttribute(QWebSettings.PluginsEnabled, True)

        self.loadFinished.connect(self._loadFinished)
        self.mainFrame().load(QUrl(url))
        #self.mainFrame().setScrollBarPolicy(Qt.Vertical, Qt.ScrollBarAlwaysOff)
        self.mainFrame().setScrollBarPolicy(Qt.Horizontal, Qt.ScrollBarAlwaysOff)
        self.app.exec_()

    def _loadFinished(self, result):
        self.frame = self.mainFrame()
        size = self.frame.contentsSize()
        size.setWidth(1366)
        self.setViewportSize(size)
        self.app.quit() 
```

这是我保存图像的方式：

```
def run(url):
    os.chdir("output")

    r = Render(url)
    image = QImage(r.viewportSize(), QImage.Format_ARGB32)
    painter = QPainter(image)
    r.frame.render(painter)
    painter.end()
    fp = "%s.png" % os_safe_name(url)
    image.save(fp)
    os.chdir("..") 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T16:13:07.800

就像卢克的回答中所描述的那样，我把事情打乱了，以避免`QApplication`为每个人创建一个实例`Render`

不是最整洁的，但对我有用：

```
import re
import sys
import time

# Tested with PySide 1.0.9, changing imports to PyQt should work identically
from PySide.QtCore import Qt, QUrl
from PySide.QtGui import QApplication, QImage, QPainter
from PySide.QtWebKit import QWebPage, QWebSettings

def os_safe_name(url):
    url = re.sub("[^a-zA-Z0-9_-]+", "_", url)
    url = re.sub("_{2,}", "_", url)
    return url

class Render(QWebPage):
    def __init__(self, url):
        QWebPage.__init__(self)

        self.url = url
        self.finished = False

        # Settings
        s = self.settings()
        #s.setAttribute(QWebSettings.AutoLoadImages, False)
        s.setAttribute(QWebSettings.JavascriptCanOpenWindows, False)
        s.setAttribute(QWebSettings.PluginsEnabled, True)

        #self.mainFrame().setScrollBarPolicy(Qt.Vertical, Qt.ScrollBarAlwaysOff)
        self.mainFrame().setScrollBarPolicy(Qt.Horizontal, Qt.ScrollBarAlwaysOff)

        # When page is loaded, callback saves image to file
        self.loadFinished.connect(self._loadFinished)

        self.mainFrame().load(QUrl(url))

    def _loadFinished(self, result):
        frame = self.mainFrame()
        size = frame.contentsSize()
        size.setWidth(1366)
        self.setViewportSize(size)

        image = QImage(self.viewportSize(), QImage.Format_ARGB32)

        painter = QPainter(image)
        frame.render(painter)
        painter.end()

        self.filepath = "output/%s.png" % os_safe_name(self.url)
        image.save(self.filepath)

        self.finished = True

def run(url, app = None):
    if app is None:
        app = QApplication(sys.argv)

    r = Render(url)

    while not r.finished:
        app.processEvents()
        time.sleep(0.01)

    return r.filepath

if __name__ == '__main__':
    app = QApplication(sys.argv)

    print run("http://stackoverflow.com", app=app)
    print run("http://google.com", app=app) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:26:08.810

我假设您正在创建 Render 类的多个实例。如果是这种情况，那么您很可能会遇到问题，因为您创建了多个 QApplication 实例。相反，创建一个 QApplication 并在所有 Render 实例之间共享它。

您可能还需要停止使用 app.quit()，因为您希望 QApplication 继续运行。此外，由于 app.exec_() 在您调用 quit() 之前不会退出，因此您需要创建自己的事件循环。像这样的东西：

```
while not self.finished:
    self.app.processEvents()
    time.sleep(0.01) 
```

# java - Java swing - 多个控件的相同处理程序

> ID：11903377
> 
> 赞同：2
> 
> 时间：2012-08-10T14:06:10.723
> 
> 标签：java, swing, event-handling

我想知道是否有任何其他方式来处理来自任何 N 个控件的事件，它会读取该`ActionCommand`值并根据该值采取行动。到目前为止，我基本上有一个定义`ActionListener`，我分别添加到每个控件中。例如，如果我有 50 个复选框，我想编写一个类似的方法

```
void process(){ 
    getCommandValueAndDoSth();
} 
```

但我不想为所有复选框实例化 ActionListener，我只想控制所有复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:59:54.077

您可以为所有组件设置一个侦听器。

```
ActionListener al = new ActionListener {
  @Override
  public void actionPerformed(ActionEvent e) {
    // either do it like this
    process(e.getActionCommand());
    // or like this to distinguish between the controls
    if (e.getSource() == firstElement) processChangeInFirstElement();
    else if (e.getSource() == secondElement) processChangeInSecondElement();
    // etc
  }
}

Component firstElement = new JCheckBox("asdf");
firstElement.addActionListener(al);

Component secondElement = new JTextField();
secondElement.addActionListener(al); 
```

如果您需要拥有多种类型的侦听器 ( `ChangeListener, MouseListener, ActionListener, KeyListener, ...`)，那么您拥有每种侦听器类型的一个实例，并将它们应用于相应的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:53:20.953

您可以将相同的 ActionListener 附加到多个组件（例如，附加到所有复选框）。处理程序只需要能够从 ActionEvent 派生所有需要的信息（如果需要，它可以使用 event.getSource() 获取组件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T10:30:06.097

就我而言，我只是想知道窗口中的任何控件是否已更改，并且应该允许用户“应用”这些更改。实际上，您可以使用 lambda 轻松添加它们。以下是`JCheckBox`、`JComboBox<>`和的示例`JXDatePicker`。两者`JTextField`/`JTextArea`都稍微复杂一些，并且需要文档侦听器。

```
chckbx.addItemListener(e -> process()); //Check box itemListeners don't trigger when hovering
comboBox.addActionListener(e -> process()); //Triggered when selection changes
datePicker.addActionListener(e -> process()); //When date changes
addChangeListener(txtField, e -> process()); //Text field needs a documentListener 
```

文本字段的文档侦听器[addChangeListener](https://stackoverflow.com/a/27190162/161622)的代码。

# c# - 具有不同大小项目的 WinRT GridView

> ID：11903382
> 
> 赞同：1
> 
> 时间：2012-08-10T14:06:26.923
> 
> 标签：c#, gridview, windows-runtime, winrt-xaml

我正在尝试将 GridView 与 DataTemplateSelector 一起使用。所以有些物品很大，有些很小。我有两个问题：

1.  大项目不完全可见。元素的底部被隐藏。看起来元素没有正确调用 MeasureOverride。

2.  小物件之间的差距太大了。我希望有相同大小的边距（比如使用 WrapPanel 时）。有什么方法可以让 WrapGid 表现得像 WrapPanel？我不想使用 VariableSizeWrapGrid 因为我需要对我的数据进行虚拟化。

有没有办法解决这些问题？

有没有办法让 GridView 重新计算行数？

# php - 为什么我的浏览器会两次获取图像？

> ID：11903384
> 
> 赞同：2
> 
> 时间：2012-08-10T14:06:30.043
> 
> 标签：php

我有一个记录印象然后显示图像的 php 脚本。

```
// Determine which header to send. 
$parts = explode('.', $tool->filename);
header("Content-Type: image/{$parts[1]}");
readfile('files/'.$tool->filename); 
```

出于某种原因，Firefox 两次获取该文件。这是日志。

```
00:00:01.268    0.023   1211    182 GET 200 image/png   http://localhost/ap/image.php?aid=1&t=6
00:00:01.347    0.162   1185    182 GET 200 image/png   http://localhost/ap/image.php?aid=1&t=6 
```

你可以看到他们一瞬间就分开了。如果我按如下方式更改脚本。

```
// Determine which header to send. 
$parts = explode('.', $tool->filename);
//header("Content-Type: image/{$parts[1]}");
//readfile('files/'.$tool->filename);
echo 1; 
```

然后浏览器只读取一次文件。有人知道为什么是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:46:19.177

出于测试目的，请尝试通过控制台从控制台启动您的 Firefox

```
firefox -safe-mode -no-remote 
```

暂时禁用所有扩展。也许其中一个扩展导致了这种情况。

# java - 带有美味的 JSON 结果的 JSON 格式错误

> ID：11903389
> 
> 赞同：0
> 
> 时间：2012-08-10T14:06:38.757
> 
> 标签：java, json, tastypie

我的 Java Android 代码中的 Tastypie/Django JSON 响应有问题。我对 Tastypie API 执行 GET http 方法，并将 httpresponse 解析为 JSON。问题在于，当我使用 json 响应创建 JSONArray 时，会抛出异常。

```
JSONTokener tokener = new JSONTokener(json);
finalResult = new JSONArray(json); 
```

我收到下一条错误消息：

```
System.err(27193): org.json.JSONException: Value {"objects 
[{"id":"1","resource_uri":"\/api\/v1\/user\/1\/","od_user":"Usuario administrador del 
sitio","nick":"Admin","reg_date":"2012-08-07T15:39:20.706060+00:00"},
{"id":"2","resource_uri":"\/api\/v1\/user\/2\/","od_user":"user 
test","nick":"test1","reg_date":"2012-08-08T10:44:50+00:00"}],"meta":
{"limit":20,"previous":null,"offset":0,"total_count":2,"next":null}} of type 
org.json.JSONObject cannot be converted to JSONArray
W/System.err(27193):    at org.json.JSON.typeMismatch(JSON.java:111)
W/System.err(27193):    at org.json.JSONArray.<init>(JSONArray.java:91) 
```

我从 sweetpie API 获得的 JSON 档案是：

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{"id": "1", "nick": "Admin", "od_user": "Usuario administrador del sitio", "reg_date": "2012-08-07T15:39:20.706060+00:00", "resource_uri": "/api/v1/user/1/"}, {"id": "2", "nick": "test1", "od_user": "user test", "reg_date": "2012-08-08T10:44:50+00:00", "resource_uri": "/api/v1/user/2/"}]} 
```

我不知道为什么 sweetpie API JSON 格式无法解析为 JSONArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:08:06.823

那是因为您的 JSON 是 JSON 对象而不是数组。您可以解析 JSON，直到获得`objects`值，然后尝试将**其**转换为 JSON 数组。

JSON 数组总是如下所示：

```
'[1, 2, 3, 4]' 
```

请注意，这`[]`是 JSON 字符串表示 JSON 数组所需的附件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:09:29.333

它看起来像一个 JSON 对象而不是 JSON 数组。

尝试给 JSONobject 代替。

```
JSONObject finalresult = new JSONObject(json); 
```

JSON数组是：

```
["limit","next","offset"] 
```

JSON对象是

```
{"limit":20, "next":null,"offset":0} 
```

参考这个： http: [//www.json.org/](http://www.json.org/)

# java - java.awt.Desktop 不起作用

> ID：11903393
> 
> 赞同：0
> 
> 时间：2012-08-10T14:06:52.673
> 
> 标签：java, file, awt, desktop

我的电脑系统是XP，当我打开doc、txt或ppt之类的文件时，这段代码不起作用。我已经有office2007，但是没有错误信息，desktop.open(file)无法打开任何文件。有些电脑可以正常工作，为什么？

```
public boolean byDesktop(String path){  
      File file = new File(path);  
      if(file.isFile()){   
       Desktop desktop = Desktop.getDesktop();  
       try {  
        desktop.open(file);  
                } catch (IOException e) {  
                 System.out.println(e);  
                }  
       return true;  
      }else{  
       return false;  
      }  
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:29:34.027

您可以在讨论相同内容的堆栈溢出中检查此链接。但请务必发布错误，以便我们更好地理解。

[在 64 位 JVM 中遇到 java.awt.Desktop 问题？](https://stackoverflow.com/questions/4792298/facing-problems-with-java-awt-desktop-in-64-bit-jvm)

# in-app-purchase - 通过 InAppPurchase 实现内容更新

> ID：11903399
> 
> 赞同：0
> 
> 时间：2012-08-10T14:07:27.343
> 
> 标签：in-app-purchase

我的应用程序有一些可下载的（从我的服务器）指南和地图，用户可以通过 InAppPurchase 购买它们。我想每个月更新一次这些指南，这样用户就可以半价购买更新。我应该如何实现 InAppPurchase 逻辑？

我的意思是，对我来说最明显的解决方案是为每次更新创建 InApp。当用户想要更新指南时，他向服务器询问更新的InApp ID，然后购买它，并从服务器下载它。之前的指南将被删除。问题是：这个逻辑好吗？苹果不会因为我删除用户付费的内容而拒绝我的应用程序吗？（即使我用较新的替换它）

或者也许有更正确的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:09:54.577

为什么要删除以前的？

您的 logc 没问题，但我要做的唯一更改是让用户选择是否要删除以前的内容，每次购买新内容时都询问他。

这不会让他生气，也不会被苹果拒绝。

# javascript - Javascript用光标擦除图像

> ID：11903404
> 
> 赞同：3
> 
> 时间：2012-08-10T14:07:37.993
> 
> 标签：javascript, cursor, erase

可以用javascript吗？

我正在尝试实现一个刮刮卡类型的东西，我想知道用户是否可以用他的光标“刮擦”，然后 javascript 会删除/擦除图像以显示下面的文本。

但是我找不到任何可以删除图像的 abit （光标位置）的东西（javascript 明智）。

有没有人有任何建议/想法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:14:29.700

使用 html5 画布元素。

查看这个小提琴的例子：http: [//jsfiddle.net/ArtBIT/WUXDb/1/](http://jsfiddle.net/ArtBIT/WUXDb/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:14:56.153

jQuery 插件：[http ://www.senamion.com/blog/jScratchcard.html](http://www.senamion.com/blog/jScratchcard.html)

HTML5： http: [//www.catchmyfame.com/2011/06/28/a-jquery-canvas-scratch-off/](http://www.catchmyfame.com/2011/06/28/a-jquery-canvas-scratch-off/)

# android - 找到一个特定的正则表达式单词并链接以在 android 中打开一个活动

> ID：11903414
> 
> 赞同：2
> 
> 时间：2012-08-10T14:08:22.603
> 
> 标签：android, regex

我从 API 获取文本，可以是随机的，但它包含像 FB @xyz hi, @abc 你怎么样？1.我需要创建一个以@开头，以空格结尾的正则表达式。2\. 链接它以打开用户活动，如 XYZ 或 ABC。请帮助我，我试图创建一个类，

```
import android.text.Spannable;
import android.text.SpannableString;
import android.text.Spanned;
import android.text.method.LinkMovementMethod;
import android.text.method.MovementMethod;
import android.text.style.ClickableSpan;
import android.view.View;
import android.widget.TextView;

public class ClickSpan extends ClickableSpan {

    private OnClickListener mListener;

    public ClickSpan(OnClickListener listener) {
        mListener = listener;
    }

    @Override
    public void onClick(View widget) {
        if (mListener != null) mListener.onClick();
    }

    public interface OnClickListener {
        void onClick();
    }

    /**
     * To clickify a textview
     * @param view
     * @param clickableText
     * @param listener
     */
    public static void clickify(TextView view, final String clickableText, 
            final ClickSpan.OnClickListener listener) {

        CharSequence text = view.getText();
        String string = text.toString();
        ClickSpan span = new ClickSpan(listener);

        int start = string.indexOf(clickableText);
        int end = start + clickableText.length();
        if (start == -1) return;

        if (text instanceof Spannable) {
            ((Spannable)text).setSpan(span, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
        } else {
            SpannableString s = SpannableString.valueOf(text);
            s.setSpan(span, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
            view.setText(s);
        }

        MovementMethod m = view.getMovementMethod();
        if ((m == null) || !(m instanceof LinkMovementMethod)) {
            view.setMovementMethod(LinkMovementMethod.getInstance());
        }
    }

} 
```

像这样打电话，

```
clickify(textView, clickText,new ClickSpan.OnClickListener()
     {
        @Override
        public void onClick() {
           startActivity here..
        }
    }); 
```

我需要关于如何让它在我的活动中工作的帮助，以创建一个正则表达式循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:00:17.043

```
public class ClickableURLSpan extends URLSpan {
    public ClickableURLSpan(String url) {
        super(url);
    }

    @Override
    public void onClick(View widget) {
        String clickedText = getURL();

            // START your activity here
    }
} 
```

现在您可以链接您的文本：

```
CharSequence input = "@xyz hi, @abc how u??!";
SpannableStringBuilder builder = new SpannableStringBuilder(input);

Pattern pattern = Pattern.compile("@.*?\\s");
Matcher matcher = pattern.matcher(input);
while (matcher.find()) {
    int start = matcher.start();
    int end = matcher.end();

    String text = input.subSequence(start, end).toString();

    ClickableURLSpan url = new ClickableURLSpan(text);
    builder.setSpan(url, start, end, 0);
}

textView.setText(builder);
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# php - Wordpress fancybox 插件不工作

> ID：11903415
> 
> 赞同：0
> 
> 时间：2012-08-10T14:08:23.197
> 
> 标签：php, html, css, wordpress, fancybox

在过去的 2 个小时里，由于某种原因，该`fancybox`插件一直让我发疯。我过去曾让它在其他网站上工作，但它现在拒绝工作。

所以我有这段代码调用图像所在的帖子：

```
<ul>
    <?php query_posts('cat=4'); ?>
    <?php while (have_posts()) : the_post(); ?>
        <li><a href="<?php the_permalink() ?>"></a>
            <?php $content = get_the_content();
            print $content; ?></li>
    <?php endwhile;?>
</ul> 
```

在`wordpress`我有一个帖子（在 cat 4 中）中有 2 个图像`<ul> <li>`，在 CSS 中它们被设置`display: inline;`

看不出有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:51:37.403

检查您`<?php wp_footer(); ?>`在`</body>`标签之前和`<?php wp_head(); ?>`主题`<head>`部分中是否有。

# wordpress - widget_init 和 wp_widget_init 钩子有什么区别？哪个更好用？

> ID：11903416
> 
> 赞同：1
> 
> 时间：2012-08-10T14:08:28.833
> 
> 标签：wordpress, plugins

我正在使用小部件，发现它有钩子widget_init。如下所示，效果很好。

```
add_action('widgets_init', create_function('', 'return register_widget("example_widget");')); 
```

但是钩子是“wp_widgets_init”，那么这里有什么区别呢？哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:18:17.937

[查看wp_widgets_init](http://core.trac.wordpress.org/browser/trunk/wp-includes/default-widgets.php#L1151)的源代码，看起来 wp_widgets_init 首先初始化内部小部件，然后调用通用 widgets_init。因此，您需要使用第二个，因为您可以在已经设置好的 WP 环境上进行中继。

# arrays - 如何替换数组名称中的变量？

> ID：11903417
> 
> 赞同：0
> 
> 时间：2012-08-10T14:08:30.047
> 
> 标签：arrays, tcl

假设filevalue_$thefile 是一个包含列表的数组

```
foreach element [array names thefilevalue_$thefile] {
    puts "[lindex $thefilevalue_[subst $thefile]($element) 0]"
} 
```

但它返回：

`can't read "thefilevalue_": no such variable`

我在 tcl 8.4 中，我不会升级它。

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:24:38.807

使用`set`和转义括号，*例如*

```
array set thefilevalue_test {reds {orange red purple} blues {green blue purple}}
set thefile test
foreach element [array names thefilevalue_$thefile] {
    puts [lindex [set thefilevalue_$thefile\($element\)] 0]
} 
```

这为我输出（Tcl 8.0.5，我也无法升级）：

```
orange
green 
```

# php - 在连接中获取多行（codeigniter）

> ID：11903418
> 
> 赞同：3
> 
> 时间：2012-08-10T14:08:37.837
> 
> 标签：php, mysql, codeigniter, join

我无法从下面的代码中获得我期望的结果。

第一步是：

从表中获取一行并从另一个表中连接多行... rsult 数组应如下所示：

```
array(
  field_1, 
  field_2, 
  field_3, 
  joined_array(
    field_a_array(
      field_a_a, 
      field_a_b, 
      field_a_c
    ), 
    field_b_array(
      field_b_a, 
      field_b_b, 
      field_b_c
    )
  ) 
) 
```

我的查询看起来像这样：

（似乎 where、join 等的位置对于 codigniters db 类并不重要）

```
$this->db->select('events.*, genres_x_events.*');

$this->db->from('events');
$this->db->where('events.slug', $slug);
$this->db->where('events.deleted', 0);

$this->db->join('genres_x_events', 'genres_x_events.event_slug = events.slug');

$query = $this->db->get(); 
```

我面临的问题是，当我期望每个连接检索多行时，我只能从连接中获取一行。

编辑：

最后查询（）：

```
SELECT `events`.*, `genres_x_events`.`genre_slug`
FROM (`events`)
LEFT OUTER JOIN `genres_x_events` ON `genres_x_events`.`event_slug` = `events`.`slug`
WHERE `events`.`slug` =  'test'
AND `events`.`deleted` =  0 
```

输出：

```
Array(
    [0] => Array
        (
            [id] => 25
            [headline] => test
            [subheadline] => 
            [slug] => test
            [date] => 2012-08-10
            [start_time] => 00:00:00
            [end_time] => 00:00:00
            [price] => 
            [body] => 
            [location_id] => 5
            [genre_id] => 0
            [creation_date] => 2012-08-10 14:26:33
            [update_date] => 2012-08-10 14:26:41
            [deleted] => 0
            [genre_slug] => rock
        )

    [1] => Array
        (
            [id] => 25
            [headline] => test
            [subheadline] => 
            [slug] => test
            [date] => 2012-08-10
            [start_time] => 00:00:00
            [end_time] => 00:00:00
            [price] => 
            [body] => 
            [location_id] => 5
            [genre_id] => 0
            [creation_date] => 2012-08-10 14:26:33
            [update_date] => 2012-08-10 14:26:41
            [deleted] => 0
            [genre_slug] => metal
        )

    [2] => Array
        (
            [id] => 25
            [headline] => test
            [subheadline] => 
            [slug] => test
            [date] => 2012-08-10
            [start_time] => 00:00:00
            [end_time] => 00:00:00
            [price] => 
            [body] => 
            [location_id] => 5
            [genre_id] => 0
            [creation_date] => 2012-08-10 14:26:33
            [update_date] => 2012-08-10 14:26:41
            [deleted] => 0
            [genre_slug] => indie
        )

) 
```

想要输出（这样会很酷）：

```
Array(
    [0] => Array
        (
            [id] => 25
            [headline] => test
            [subheadline] => 
            [slug] => test
            [date] => 2012-08-10
            [start_time] => 00:00:00
            [end_time] => 00:00:00
            [price] => 
            [body] => 
            [location_id] => 5
            [genre_id] => 0
            [creation_date] => 2012-08-10 14:26:33
            [update_date] => 2012-08-10 14:26:41
            [deleted] => 0
            [genres] => Array(
                [0] => rock
                [1] => metal
                [2] => indie
            )
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:46:10.530

尝试按 event.id 对其进行分组，然后使用 group_concat，如下所示：

```
SELECT `events`.*, group_concat(`genres_x_events`.`genre_slug`)
FROM (`events`)
LEFT OUTER JOIN `genres_x_events` ON `genres_x_events`.`event_slug` = `events`.`slug`
WHERE `events`.`slug` =  'test'
AND `events`.`deleted` =  0
GROUP BY events.id 
```

这将为您提供给定 event.id 的所有流派的逗号分隔列表。您可以使用类似这样的方式更改分隔符（类似于管道）

```
SELECT `events`.*, group_concat(`genres_x_events`.`genre_slug` SEPARATOR '|')
FROM (`events`)
LEFT OUTER JOIN `genres_x_events` ON `genres_x_events`.`event_slug` = `events`.`slug`
WHERE `events`.`slug` =  'test'
AND `events`.`deleted` =  0
GROUP BY events.id 
```

# drupal - 渲染节点或分类术语视图取决于节点数

> ID：11903423
> 
> 赞同：1
> 
> 时间：2012-08-10T14:08:50.903
> 
> 标签：drupal, drupal-7, views, taxonomy

我启用了 taxonomy_menu 模块和很多类别。有些术语没有分配节点，有些术语有很多节点。在第一种情况下，我显示该术语没有内容的信息。在第二种情况下，我显示节点列表。

但是如果只有一个节点分配给给定术语怎么办？我想渲染节点页面。我该怎么做？我可以在 themename_preprocess_page 中检测到它，但那又如何呢？如何使用术语元标记呈现视图页面以及如何使用节点元标记呈现节点取决于术语节点数？

# objective-c - Xcode 4.4 无法重命名类/变量

> ID：11903426
> 
> 赞同：7
> 
> 时间：2012-08-10T14:08:56.553
> 
> 标签：objective-c, xcode, refactoring, xcode4.5, xcode4.4

在 Xcode 4.4 和 4.4.1 上，我遇到了与我正在处理的特定项目相同的问题，我似乎无法从`Refactor`菜单选项中重命名任何类或变量。

每次我尝试重命名时，我都会为类/变量输入新名称，然后单击`Preview`左下角开始一个带有`Finding files...`. 但是，然后我收到一条消息说：

> 选择不是可以重命名的类型。
> 
> 做出不同的选择，然后重试。

我很确定这不是我特定安装的 Xcode 的问题，因为我可以很好地重构其他项目，只是我似乎无法重构这个特定项目。

有任何想法的人吗？我对这个项目没有任何特别奇特的配置，它似乎只是一个随机的痛苦。我已删除所有派生数据并重新编制索引，但这似乎无济于事。

由于它在其他项目中工作正常，我想我可以尝试做的一件事是重新生成实际的项目文件本身。不知道有没有办法自动实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-29T21:15:52.797

如果它们在保管箱中，请将它们从那里取出。它破坏了项目文件。我已经发生了很多次，有时它使重构>重命名不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T11:18:35.103

在尝试了许多不同的事情（调整项目设置、pch 等）之后，我设法解决了这个问题，结果证明有一种非常简单（而且完全违反直觉）的方法可以解决这个问题。

我所做的只是：-

1.  复制我的整个项目文件夹（从`Project`到`Project Copy`）。
2.  将`Project`（原始文件夹）移动到垃圾箱。
3.  重命名`Project Copy`为`Project`.

奇怪的是，现在一切正常。

我真的无法弄清楚为什么会这样。如前所述，我已经删除了所有派生数据等，所以我不知道为什么这会让事情自发工作，但确实如此。

任何能够对此有所了解的人都将不胜感激，因为它确实暴露了 Xcode 的复杂程度，并且对引擎盖下发生的事情的任何理解总是有益的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:20:12.353

听起来像一个错误的索引。

我通常使用 nuke from space 选项来删除派生数据目录中的*所有内容。*

除非您已更改它（我将其更改为`/tmp/bbum-derived`），否则它将位于：

```
~/Library/Developer/Xcode/DerivedData 
```

因此，我将退出 Xcode 并执行以下操作：

```
rm -rf ~/Library/Developer/Xcode/DerivedData 
```

是的，这有点蛮力，但它有效。您可能会强制 Xcode 从 UI 重建索引，但我从不打扰。当然，作为我日常工作的一部分，我还安装了相当多的“奇怪”版本……

（**那是一个`rm -rf`。** 在 unix 用语中，它的意思是“核弹一切，不要问”。这很危险。不要输入错误的命令。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:20:38.573

似乎您在 gui 的某处有一个活动选择，也许您的某些文件或类被选择了？尝试在每个子窗口中取消选择并重试重构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T00:06:38.890

我对这个线程有点晚了，但我今天遇到了同样的问题，我能够让它最终正确重构，我想我分享它。

所以在很大程度上我做了bbum所说的，我关闭了xCode，核对了类文件所在项目的派生数据，然后重新打开了项目。这样做是行不通的；我发现（至少对我而言）关键是在 xCode 重新启动后我必须进行清理（命令转换 k）。之后我能够再次重命名类文件:)

另外作为旁注，我的项目分为主项目和一个静态库。当我不得不重命名静态库中的类时，我不得不退出主项目并执行我在静态库本身中描述的操作。当我尝试从主项目进行重构/重命名时，不知何故我得到了问题中描述的相同错误。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-23T21:55:21.127

该线程对我确定问题非常有帮助。

原来我必须使用磁盘工具修复磁盘。我之前访问过一个网站，该网站劫持了 Safari，并告诉我拨打紧急维修电话，这是一个明显的骗局。

我按照磁盘工具说明修复磁盘（包括按下 CMD-R 重新启动）。另一个线索是我试图提交到 git 并且 Xcode 说不行，Jose。

之后，我能够重构并提交更改，就好像什么都没发生过一样。我希望这有助于其他人作为调查的可能原因。

# php - 在 Symfony 2.0.x 中自动加载非 PSR0 库

> ID：11903432
> 
> 赞同：4
> 
> 时间：2012-08-10T14:09:08.833
> 
> 标签：php, symfony, autoload, psr-0

`Symfony 2.0 Autoloader`期望它可以处理的库在自动加载文件时遵循or标准`PSR0`。`PEAR`如果您有一个不遵循这两个标准的旧库（在我的例子中，类文件的名称类似于 name.class.php），您将如何处理这些库的自动加载？

这`Symfony 2.1`很容易，因为作曲家支持`classmaps`并且可以加载这种类型的库，但是你会怎么做呢`Symfony 2.0.x`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T14:51:15.663

在里面`app/autoload.php`，创建一个实例`MapClassLoader`：

```
use Symfony\Component\ClassLoader\MapClassLoader;
use Symfony\Component\ClassLoader\UniversalClassLoader;

// Create default PSR-0 autoloader
$loader = new UniversalClassLoader();
$loader->registerNamespaces(array(
    'Symfony' => array(__DIR__.'/../vendor/symfony/src', __DIR__.'/../vendor/bundles'),
    // ...
));

// Create map autoloader
$mapLoader = new MapClassLoader(array(
    'MyComponent' => __DIR__.'/../library/mycomponent.class.php',
    // ...
));

// Other configurations
// ...

// Register autoloaders
$loader->register();
$mapLoader->register(); 
```

# magento - Magento 网格中的 SQL 查询错误

> ID：11903433
> 
> 赞同：0
> 
> 时间：2012-08-10T14:09:10.277
> 
> 标签：magento, gridview

我在 magento 后端模块中创建了一个网格，但出现错误：

```
 SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'procedure LIKE '%1%')' at line 1
0 \lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
1 \lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
2 \lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
3 \lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT COUNT(*)...', Array)
4 \lib\Varien\Db\Adapter\Pdo\Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT COUNT(*)...', Array)
5 \lib\Zend\Db\Adapter\Abstract.php(825): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
6 \lib\Varien\Data\Collection\Db.php(225): Zend_Db_Adapter_Abstract->fetchOne(Object(Varien_Db_Select), Array)
7 \lib\Varien\Data\Collection.php(225): Varien_Data_Collection_Db->getSize()
8 \lib\Varien\Data\Collection.php(211): Varien_Data_Collection->getLastPageNumber()
9 \lib\Varien\Data\Collection\Db.php(516): Varien_Data_Collection->getCurPage()
10 \lib\Varien\Data\Collection\Db.php(563): Varien_Data_Collection_Db->_renderLimit()
11 \app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(533): Varien_Data_Collection_Db->load()
12 \app\code\local\Acc\Logger\Block\Adminhtml\Logger\Grid.php(21): Mage_Adminhtml_Block_Widget_Grid->_prepareCollection()
13 \app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(626): Acc_Logger_Block_Adminhtml_Logger_Grid->_prepareCollection()
14 \app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(632): Mage_Adminhtml_Block_Widget_Grid->_prepareGrid()
15 \app\code\core\Mage\Core\Block\Abstract.php(862): Mage_Adminhtml_Block_Widget_Grid->_beforeToHtml()
16 \app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
17 \app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('grid', true)
18 \app\code\core\Mage\Adminhtml\Block\Widget\Grid\Container.php(77): Mage_Core_Block_Abstract->getChildHtml('grid')
19 \app\design\adminhtml\default\default\template\widget\grid\container.phtml(36): Mage_Adminhtml_Block_Widget_Grid_Container->getGridHtml()
20 \app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
21 \app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml\defau...')
22 \app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
23 \app\code\core\Mage\Adminhtml\Block\Template.php(81): Mage_Core_Block_Template->_toHtml()
24 \app\code\core\Mage\Adminhtml\Block\Widget\Container.php(308): Mage_Adminhtml_Block_Template->_toHtml()
25 \app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Adminhtml_Block_Widget_Container->_toHtml()
26 \app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
27 \app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
28 \app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
29 \app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
30 \app\design\adminhtml\default\default\template\page.phtml(74): Mage_Core_Block_Abstract->getChildHtml('content')
31 \app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
32 \app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml\defau...')
33 \app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
34 \app\code\core\Mage\Adminhtml\Block\Template.php(81): Mage_Core_Block_Template->_toHtml()
35 \app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Adminhtml_Block_Template->_toHtml()
36 \app\code\core\Mage\Core\Model\Layout.php(555): Mage_Core_Block_Abstract->toHtml()
37 \app\code\core\Mage\Core\Controller\Varien\Action.php(390): Mage_Core_Model_Layout->getOutput()
38 \app\code\local\Acc\Logger\controllers\Adminhtml\LoggerbackendController.php(8): Mage_Core_Controller_Varien_Action->renderLayout()
39 \app\code\core\Mage\Core\Controller\Varien\Action.php(419): Acc_Logger_Adminhtml_LoggerbackendController->indexAction()
40 \app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
41 \app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
42 \app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
43 \app\Mage.php(683): Mage_Core_Model_App->run(Array)
44 \index.php(87): Mage::run('', 'store')
45 {main} 
```

我的网格文件：

```
public function __construct() {
    parent::__construct();

    $this->setId('logger_grid');
    $this->setUseAjax(FALSE);
    $this->setDefaultSort('log_id');
    $this->setDefaultDir(Varien_Data_Collection::SORT_ORDER_ASC);
    $this->setSaveParametersInSession(TRUE);
}

public function _prepareCollection() {
    $collection = Mage::getModel('logger/logger')->getCollection();
    $this->setCollection($collection);
    return parent::_prepareCollection();
}

public function _prepareColumns() {
    $this->addColumn('log_id', array(
        'header' => Mage::helper('logger')->__('ID'),
        'sortable' => TRUE,
        'index' => 'log_id',
        'editable' => FALSE,
    ));

    $this->addColumn('procedure', array(
        'header' => Mage::helper('logger')->__('Procedure'),
        'sortable' => TRUE,
        'index' => 'procedure',
    ));

    $this->addColumn('type', array(
        'header' => Mage::helper('logger')->__('Type'),
        'sortable' => TRUE,
        'index' => 'type',
        'editable' => FALSE,
    ));

    $this->addColumn('description', array(
        'header' => Mage::helper('logger')->__('Description'),
        'sortable' => TRUE,
        'index' => 'description',
        'editable' => FALSE,
    ));

    $this->addColumn('time', array(
        'header' => Mage::helper('logger')->__('Time'),
        'sortable' => TRUE,
        'index' => 'time',
        'editable' => FALSE,
        'type' => 'datetime',
    ));

    return parent::_prepareColumns();
}

public function getRowUrl($row) {
    return $this->getUrl('*/*/edit', array('id' => $row->getId()));
} 
```

当 addColumn('procedure', ...) 被注释掉时，根本没有错误。我不知道有什么问题......我不知道为什么查询中的片段如下：`'procedure LIKE '%1%')'`。“过程”字段是 varchar。表结构：

```
create table `{$installer->getTable('logger/logger')}`(
`log_id` int not null auto_increment, 
`procedure` varchar(254) null,
`type` varchar(254) null, 
`description` text null,
 `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
primary key(`log_id`)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:54:12.367

尝试这样做：

```
$collection = Mage::getModel('logger/logger');
$this->setCollection($collection);
return parent::_prepareCollection(); 
```

magento 的核心做 getCollection auto，或者：

```
 $collection = Mage::getModel('logger/logger')->getCollection()
        ->addAttributeToSelect('procedure'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:14:19.623

解决方案真的很简单。我需要添加的只是`->load()`_prepareCollection() 函数变为：

```
public function _prepareCollection() {
        $collection = Mage::getModel('logger/logger')->getCollection()->load();
        $this->setCollection($collection);
        return parent::_prepareCollection();
    } 
```

感谢您的所有回复:)

编辑：

错误更复杂，因为我使用保留字作为列名（'procedure'）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:36:32.113

Its about your collection, try [http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento) , If u need more help post the sql statment: using $collection->getSelect()->__toString();

# php - 写一个文本文件并用php强制下载

> ID：11903436
> 
> 赞同：24
> 
> 时间：2012-08-10T14:09:20.597
> 
> 标签：php

我使用按钮指向创建文本文件的脚本：

```
<?php
$handle = fopen("file.txt", "w");
fwrite($handle, "text1.....");
fclose($handle);
?> 
```

之后我希望网络浏览器建议下载或打开这个文件我应该怎么做？谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-10T14:15:14.633

使用[readfile()](http://php.net/manual/en/function.readfile.php)和`application/octet-stream`标题

```
<?php
    $handle = fopen("file.txt", "w");
    fwrite($handle, "text1.....");
    fclose($handle);

    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename('file.txt'));
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize('file.txt'));
    readfile('file.txt');
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T14:16:09.777

```
$content = file_get_contents ($filename);
header ('Content-Type: application/octet-stream');
echo $content; 
```

应该管用

# database - 休眠忽略级联属性

> ID：11903440
> 
> 赞同：-2
> 
> 时间：2012-08-10T14:09:25.630
> 
> 标签：database, hibernate, jakarta-ee, annotations, cascade

我在我的项目中使用休眠注释，我已经创建了表，这一切都很好，除了当我检查数据库时它们没有级联，即使我确保将它放在类中。这是我如何做的一个例子：

```
public class Item implements java.io.Serializable {

/**
 *
 */
private static final long serialVersionUID = 8271695210797279161L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "IDitem", unique = true, nullable = false)
private int iditem;
@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name = "IDDIVISION", nullable = false)
private Division division;
@Column(name = "SIGLE", length = 254)
private String sigleItem;
@Column(name = "DESCRIPTION", length = 254)
private String description;
....
} 
```

我在所有 ManyToOne、OneToMany 和 ManyToMany 案例中都有 cascade = CascadeType.ALL。我也尝试添加

```
@OnDelete(action = OnDeleteAction.CASCADE) 
```

@Cascade(org.hibernate.annotations.CascadeType.DELETE_ORPHAN)

就像[这里](https://stackoverflow.com/questions/1299455/hibernate-manytomany-delete-relation-problem)提到的，但没有任何改变

你能帮我解决问题吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:11:56.987

我有同样的问题。也许您忘记将孩子添加到父母的集合中。

```
division.getItems().add(item); // <-- That was my mistake.
item.setDivision(division); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:28:55.377

我认为问题在于您没有使用正确的数据库引擎。您应该将休眠方言指定为：org.hibernate.dialect.MySQLInnoDBDialect 而不是 MySQLDialect。否则，它将默认为不支持关系的 MyISAM。

# jsp - 在 Spring Web 应用程序中显示日期字段的策略

> ID：11903449
> 
> 赞同：3
> 
> 时间：2012-08-10T14:09:47.663
> 
> 标签：jsp, date, spring-mvc, jsp-tags

我想知道是否有人可以提供帮助。我正在编写一个 Spring MVC / Webflow Web 应用程序，我需要从用户那里收集数据。我有一个反映后端模式的表单支持对象（我认为 JAXB 用于生成类）。无论如何，我需要捕获的字段之一是 DOB，它在表单支持对象中是 XMLGregorianCalendar 类型的单个属性

在大多数情况下，表单上的 html 输入字段是与表单支持对象中的属性的 1 对 1 映射 - 例如：html 输入“surname”映射到表单支持对象中名为“surname”的字符串属性（通过getter 和 setter）。好的 ：）

但是日期字段有点不同。在表单支持对象中，只有一个属性具有一对 getter/setter；但在屏幕上，我们可能希望将其呈现为 3 个单独的字段 - 可能是 Day 的下拉列表、Month 的下拉列表和 Year 的文本框

无论后端技术如何，每个网络应用程序都必须出现此类问题，我想知道其他人如何处理它。

我有两个想法：

1) 扩展我的表单支持对象，以便我拥有 dobDay、dobMonth 和 dobYear 的属性，然后作为我的验证器的一部分，获取 3 个值并从中设置真正的 DOB 属性。我过去做过这个，它有点工作，但如果感觉有点垃圾，特别是如果网络应用程序有很多日期。

2）查找或编写一个jsp taglib，为我做这个魔术。我可以在呈现表单时看到这项工作是如何工作的 - 可以使用 FBO 中的属性名称调用 taglib，它可以获得当前日期值，然后可以写入输出 3 个 html 字段。但我看不到提交是如何工作的——需要读取 3 个 html 字段并将它们“粘合”到 FBO 中的真实财产中

所以，真的，这只是一个求助电话——过去其他人对这种事情做了什么？

欣赏你的想法

弥敦道

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:11:27.417

您可以使用任一选项，但我倾向于同意您的观点，即让命令对象包含日期组件并不是很巧妙。

如果您在页面中为日期字段添加一个隐藏字段，并使用该值来填充您的三个组合，则数字 2 将起作用。日、月和年。在表单提交时，您必须首先使用 javascript 重新组合来自此隐藏字段内的组合的值（它将与命令对象中的日期字段映射）。

我认为这是最干净的方法，但是如果您不想使用 javascript，则可以提交三个值（命令对象中没有对应的字段）并在绑定命令后组装它们。

您没有提及您正在使用的 Spring 版本，但对于 2.x，您可以干预该方法的[工作流程](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/mvc/AbstractFormController.html)`onBind`以重新组合那里的值。

Spring 3 中的情况发生了变化，控制器类被弃用，取而代之的是带注释的控制器，但如果您将[InitBinder与](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/InitBinder.html)[注册自定义日期编辑器](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/DataBinder.html#registerCustomEditor%28java.lang.Class,%20java.lang.String,%20java.beans.PropertyEditor%29)并重新组合字段的请求结合使用，您可能会得到类似的结果；例如：

命令：

```
public class TestCommand implements Serializable {
    private static final long serialVersionUID = 1L;
    private Date someDate;

    public Date getSomeDate() {
        return someDate;
    }

    public void setSomeDate(Date someDate) {
        this.someDate = someDate;
    }
} 
```

控制器：

```
@Controller
@RequestMapping(value="/testAction")
public class TestController {

    @RequestMapping(method=RequestMethod.GET)
    public String handleInit() {
        return "form";
    }

    @InitBinder
    protected void initBinder(WebDataBinder dataBinder, WebRequest webRequest) {
        dataBinder.registerCustomEditor(Date.class, "someDate", new TestPropertyEditor(webRequest));
    }

    @RequestMapping(method=RequestMethod.POST)
    public String handleSubmit(@ModelAttribute("testCommand") TestCommand command, BindingResult result) {
        return "formResult";
    }
} 
```

形式：

```
<form:form modelAttribute="testCommand" action="testAction" method="post">
    <%-- need a parameter named "someDate" or Spring won't trigger the bind --%>
    <input type="hidden" name="someDate" value="to be ignored" /> 

    year: <input type="text" name="year" value="2012" /><br/>
    month: <input type="text" name="month" value="5" /><br/>
    day: <input type="text" name="day" value="6" /><br/>

    <input type="submit" value="submit" />
</form:form> 
```

表格结果：

```
some date: ${testCommand.someDate} 
```

属性编辑器：

```
public class TestPropertyEditor extends PropertyEditorSupport {
    private WebRequest webRequest;

    public TestPropertyEditor(WebRequest webRequest) {
        this.webRequest = webRequest;
    }

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        Map<String, String[]> parameterMap = webRequest.getParameterMap();

        // should validate these...
        Integer year = Integer.valueOf(parameterMap.get("year")[0]);
        Integer month = Integer.valueOf(parameterMap.get("month")[0]);
        Integer day = Integer.valueOf(parameterMap.get("day")[0]);

        try {
            String value = String.format("%1$d-%2$d-%3$d", year, month, day);
            setValue(new SimpleDateFormat("yyyy-MM-dd").parse(value));
        } catch (ParseException ex) {
            setValue(null);
        }
    }
} 
```

# wcf - IIS 应用程序初始化模块向 localhost 发送请求

> ID：11903452
> 
> 赞同：0
> 
> 时间：2012-08-10T14:10:03.407
> 
> 标签：wcf, iis, msmq

我有一个使用 MSMQ 的 WCF 服务，托管在 IIS 中。在浏览器中点击服务的 SVC 页面的 URL 之前，服务不会启动并从队列中读取消息，这是部署和应用程序池回收后的问题。为了解决这个问题，我安装了[IIS 应用程序初始化模块](http://www.iis.net/download/ApplicationInitialization)，它将向 Web.config 中指定的页面发送虚假请求，如下所示：

```
<system.webServer>
  <applicationInitialization remapManagedRequestsTo="Startup.htm" skipManagedModules="true" >
    <add initializationPage="/MyService.svc" />
  </applicationInitialization>
</system.webServer> 
```

我遇到的问题是当我的站点绑定到另一个域时它会访问 localhost，所以我看到了这个错误：

> WebHost 未能处理请求。发件人信息：System.ServiceModel.Activation.HostedHttpRequestAsyncResult/42715336 异常：System.ServiceModel.ServiceActivationException：没有协议绑定与给定地址“http://localhost/MyService.svc”匹配。协议绑定在 IIS 或 WAS 配置中的站点级别进行配置。---> System.InvalidOperationException：没有协议绑定与给定地址“http://localhost/MyService.svc”匹配。协议绑定在 IIS 或 WAS 配置中的站点级别进行配置。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:10:02.390

我已经通过连接到 EMS 服务器的 SVN 服务完成了此操作，因此它应该可以工作。如果它没有创建一个 ASPX 页面，它会执行类似以下操作的操作，甚至可以使用您的服务。

```
<%@ Page aspcompat=true Language="VBScript"  %>

Dim objSvrHTTP
Dim PostData
Dim WebName
Dim SoapAction
    SoapAction = "Your Soap Action"

WebName = Request.URL.Host & ":" & Request.URL.Port

 objSvrHTTP = Server.CreateObject("Msxml2.ServerXMLHTTP")
 PostData = "Soap Post XML (Recoreded probably)"

objSvrHTTP.open("POST", "http://" & WebName & "/path/SVCFile.svc", false)
objSvrHTTP.setRequestHeader("Content-Type", "text/xml" )
' set SOAPAction as appropriate for the operation '
 objSvrHTTP.setRequestHeader("SOAPAction", SoapAction )

objSvrHTTP.Send(cstr(PostData))

dim serviceResponse
dim ExpectedResponse 
    ExpectedResponse = "asdf"
serviceResponse = objSvrHTTP.responseText 

if (serviceResponse <> ExpectedResponse) then
    Response.Write("The Service Didn't return false and should have.  it returned: " )
    Response.Write(serviceResponse)
else
    Response.Write("OK")
end if 
```

# java - Callable 如何在后台工作？可调用对象如何返回值？

> ID：11903461
> 
> 赞同：6
> 
> 时间：2012-08-10T14:10:24.787
> 
> 标签：java, multithreading

我试图了解 a`Callable`在不同线程上运行时如何返回值。

我正在查看包中所有可用的 classes `Executors`、和`AbstractExecutorService`, 。 `ThreadPoolExecutor``FutureTask``java.util.concurrent`

您可以通过调用 Executors 中的方法来创建一个 ExecutorService 对象（例如`newSingleThreadExecutor()`）。然后你可以传递一个 Callable 对象 `ExecutorService.submit(Callable c)`。

由于该`call()`方法是由 提供的线程运行的`ExecutorService`，返回的对象在哪里“跳转”回调用线程？

看这个简单的例子：

```
1    ExecutorService executor = Executors.newSingleThreadExecutor();
2    public static void main(String[] args) {
3       Integer i = executor.submit(new Callable<Integer>(){
4           public Integer call() throws Exception {
5              return 10;
6           }
7       }).get();
8       System.out.print("Returns: " + i + " Thread: " + Thread.currentThread.getName());
9       // prints "10 main"
10    } 
```

由单独线程运行的 call 方法中的整数怎么可能返回到 Integer 对象（第 3 行），以便可以由`System.out`主线程中的语句（第 7 行）打印？

主线程是否可能在`ExecutorService`运行其线程之前运行，以便`System.out statement`打印为空？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T14:14:17.550

> call方法中的整数怎么可能被单独的线程运行，返回给Integer对象

`ExecutorService.submit(...)`不返回对象，但它确实返回 a*并且*您可以使用该方法获取该对象。请参阅下面的示例代码。`call()``Future<Integer>``Future.get()`

> 主线程不可能在 ExecutorService 运行其线程之前运行，以便 System.out 语句打印 null 吗？

不，`get()`未来的方法会等到工作完成。如果`call()`返回 null ，那么`get()`它将`10`保证返回（并打印）。

```
Future<Integer> future = executor.submit(new Callable<Integer>(){
    public Integer call() throws Exception {
       return 10;
    }
});
try {
   // get() waits for the job to finish before returning the value
   // it also might throw an exception if your call() threw
   Integer i = future.get();
   ...
} catch (ExecutionException e) {
   // this cause exception is the one thrown by the call() method
   Exception cause = e.getCause();
   ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T14:18:27.330

看看[ExecutorService.submit()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)方法：

`<T> Future<T> submit(Callable<T> task)`：提交一个返回值的任务执行，并返回一个代表该任务未决结果的 Future。Future 的 get 方法将在成功完成后返回任务的结果。如果您想立即阻止等待任务，可以使用表单的构造`result = exec.submit(aCallable).get();`

> 问：主线程是否可能在 ExecutorService 运行其线程之前运行，从而 System.out 语句打印 null？

--> [Future<T>.get()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28%29) Waits if necessary for the computation to complete, and then retrieves its result.

# php - 手动执行 php 脚本有效，而通过 debian 执行失败

> ID：11903465
> 
> 赞同：0
> 
> 时间：2012-08-10T14:10:49.827
> 
> 标签：php, curl, ssh, cron, webmin

我在使用计划的 cron 作业运行脚本时遇到问题。问题是，当我使用浏览器运行 php 脚本时，它的执行没有任何问题/失败等。但是当我尝试使用 crons 或 SSH 运行它时，我得到了奇怪的错误：

> 注意：未定义的索引：HTTP_USER_AGENT in /home/loves/public_html/parser/shop_parse_class.php 在第 125 行 PHP 注意：未定义的偏移量：0 在 /home/loves/public_html/parser/shop_parse_class.php 在第 481 行 PHP 注意：未定义的偏移量: 1 in /home/loves/public_html/parser/shop_parse_class.php 第 482 行 PHP 注意：未定义变量：cat in /home/loves/public_html/parser/shop_parse_class.php 第 538 行

正如您从错误中看到的那样，它表明，例如 CURL 不存在选项 HTTP_USER_AGENT，这有点奇怪。也许问题出在环境变量上，但是我对linux系统知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:13:49.060

您应该将`-A`or`--user-agent`参数添加到 cURL 调用中。您可以通过这种方式将任何您想要的用户代理设置为用户代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:17:30.310

HTTP_USER_AGENT 是浏览器返回的信息，如果你像脚本一样运行，你不能使用这个数组。这就是数组为空的原因吗（消息告诉您尝试在数组中使用的索引不存在）

# lua - 如何在 Android 模拟器中安装从 corona sdk 构建的 APK 文件？

> ID：11903471
> 
> 赞同：7
> 
> 时间：2012-08-10T14:11:04.707
> 
> 标签：lua, apk, coronasdk

我是 corona sdk 的专业用户。我用自己的 keyStore 文件构建了 apk 文件。在那个apk没有安装在android模拟器中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:10:40.633

您应该可以使用`adb`. 在模拟器运行时，只需运行`adb install YourApp.apk`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T20:08:14.733

1.  将您的 .apk 拖到 Android 的 SD 卡上。
2.  下载一个名为 ASTRO 的应用程序。
3.  在 ASTRO 中，选择管理我的文件 > 放置 .apk 的文件夹并打开它。
4.  选择安装。
5.  哇谢谢ASTRO

# php - Wordpress：从 wp_query 构建 id 数组

> ID：11903483
> 
> 赞同：1
> 
> 时间：2012-08-10T14:11:36.580
> 
> 标签：php, wordpress

我试图在循环运行后捕获 wp_query 中可用的所有 id 并将它们放入数组中。我将在以后的功能中使用这些 ID。

我试过这个，但有更好的方法吗？

```
 $temp = array();
    while ( $wp_query->have_posts() ) : $wp_query->the_post();
        $temp[] = $wp_query->post->ID ;
    endwhile;
    print_r($temp); 
```

得到这个：

数组 ( [0] => 7050 [1] => 8227 [2] => 8206 [3] => 8202 [4] => 8200 [5] => 8190 [6] => 8180 [7] => 8174 [8] => 8172 [9] => 8168 [10] => 8162 [11] => 8150 [12] => 8144 [13] => 8138 [14] => 8132 [15] => 8134 [16 ] => 8130 [17] => 8126 [18] => 8128 [19] => 8124)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:16:56.813

采用

```
get_the_ID() 
```

插入的

```
the_ID() ; 
```

试试这个

```
$temp = array();
while ( $wp_query->have_posts() ) : $wp_query->the_post();
    $temp[] = get_the_ID() ;
endwhile;

print_r($temp); 
```

# jquery - 为什么我的 jQuery leftScroll 动画不能正常工作？

> ID：11903488
> 
> 赞同：0
> 
> 时间：2012-08-10T14:11:47.787
> 
> 标签：jquery, html, css

所以我正在尝试使用 jQuery 为简单的水平滚动设置动画，但它不会触发，这是为什么呢？

[http://jsfiddle.net/langoon/b5ZTH/](http://jsfiddle.net/langoon/b5ZTH/)

**HTML**

```
<a href="#1">1</a>
<a href="#2">2</a>
<a href="#3">3</a>

<section>
    <a name="1">1</a>
    <a name="2">2</a>
    <a name="3">3</a>
<section> 
```

**CSS**

```
section { 
    width: 100%; 
    overflow: auto; 
    white-space: nowrap; 
    }
a[name] { 
    width: 100%; 
    display: inline-block; 
    white-space: normal; 
    }
a[name='1'] { 
    background-color: green;
    }
a[name='2'] { 
    background-color: yellow;
    }
a[name='3'] { 
    background-color: red;
    } 
```

**​jQuery**

```
$('a[href]').click(function(){

    $('section').stop().animate({
        scrollLeft: $(this.hash).offset().left
    }, 1000);

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:22:34.393

这可以工作：

```
var w = [];
var wt = 0;

$('section a').each(function(i,v){
    (i == 0) ? wt = 0 : wt += $(this).width();
     w.push(wt);
});

$('a[href]').click(function(){
    var n = this.hash.replace('#','');
    var el = $.find("a[name='"+n+"']");
    console.log(w[n-1]);
    $('section').animate({
        scrollLeft: w[n-1]
    }, 1000);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:49:46.667

我通过将 jQuery 代码更改为：

```
$('a[href]').click(function(){

    var basePos = $("a[name]").offset().left/-1; // Get position of first a[name]
    var scrollPos = $("a[name='" + this.hash.replace('#','') + "']").offset().left;

    $('section').stop().animate({
        scrollLeft: basePos + scrollPos 
    }, 'fast');

});​ 
```

# struts2 - 在 Jsp 中使用 Struts2 显示 Pdf

> ID：11903490
> 
> 赞同：5
> 
> 时间：2012-08-10T14:11:54.400
> 
> 标签：struts2

我的问题是我无法显示使用 Struts2 在 jsp 上生成的 pdf。

我能够在 struts2 中使用 Dynamic Jasper 动态生成 pdf，并且还能够

下载它使用

结果类型=“流”我唯一遇到的问题是在jsp中显示pdf。我能够

使用 iframe 标签显示它，但它显示的是旧的 pdf，而不是我在运行时生成的那个。

如果有人有任何建议，请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T15:11:04.917

```
Action Class 

public class GeneratePdf extends ActionSupport
{
    public InputStream inputStream;
    File file = new File("D:\\workspace\\desktopApp\\HRIS_Updated\\WebContent\\Jasper\\hris.employee.report.AwardReport.pdf");
    public String execute(){

            try {

            inputStream = new DataInputStream( new FileInputStream(file));

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   return SUCCESS;
}
public void setInputStream(InputStream inputStream) {
        this.inputStream = inputStream;
    }

public InputStream getInputStream() {
        return inputStream;
    }
} 
```

在 .xml 文件中

```
<action name="GeneratePdf" class="hris.report.action.GeneratePdf">
            <result name="success" type="stream">
                <param name="contentType">application/pdf</param>
                <param name="inputName">inputStream</param>
                <param name="contentDisposition">inline;filename="test.pdf"</param>
                <param name="bufferSize">1024</param>
            </result>
        </action> 
```

希望能帮助到你 ：）

# sql - 使用 AND where 条件进行多个连接

> ID：11903491
> 
> 赞同：1
> 
> 时间：2012-08-10T14:11:58.377
> 
> 标签：sql, ruby-on-rails

我有一个简单的项目标记系统，具有以下结构：

```
 class Item < ActiveRecord::Base
     has_many :taggings, :dependent => :destroy
     has_many :tags, :through => :taggings
 end

 class Tagging < ActiveRecord::Base
     belongs_to :tag
     belongs_to :item
 end

 class Tag < ActiveRecord::Base
     has_many :taggings, :dependent => :destroy
 end 
```

我想`scope`在类中添加一个，`Item`以便能够获取具有给定标签集的所有项目（包括集合中的所有标签）

所以我尝试了以下范围：

```
 scope :tag_context, lambda { |context| (context.empty? ? all :
       joins(:taggings).where(:taggings => {tag_id => context.collect(&:id)})
       )
  } 
```

其中`context`是一个 `Array`对象`Tag`。

关键是这个范围产生以下sql：

```
SELECT items.* FROM items INNER JOIN taggings ON taggings.item_id = items.id 
                          WHERE taggings.tag_id IN (1,2) 
```

假设`context`包含标签 1 和 2。

我想获得由标签 1 和标签 2 标记的项目。所以我假设，类似于：

```
SELECT items.* FROM items INNER JOIN taggings as t1 ON t1.item_id = items.id 
                          INNER JOIN taggings as t2 ON t2.item_id = items.id 
                          WHERE t1.tag_id = 1 AND t2.tag_id = 2 
```

我应该如何继续在 Rails 范围内翻译它？我需要一个范围，以便能够链接`Item`类上的各种范围。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:26:52.247

您可以尝试像这样动态构建范围（并且您不需要`.empty?`检查`inject`）：

```
 scope :tag_context, lambda { |context| 
      context.collect(&:id).inject(self) do |m, id| 
        m.joins("INNER JOIN taggings as t#{id} ON t#{id}.item_id = items.id").
        where("t#{id}.tag_id = ?", id)
      end
 } 
```

# jquery - jQuery CSS font-family 不使用引号

> ID：11903492
> 
> 赞同：0
> 
> 时间：2012-08-10T14:11:59.137
> 
> 标签：jquery, css, font-face, font-family

我正在使用 2 个字体并希望使用 jQuery 在它们之间切换，事情是我的字体名称是“ArvoBold”，当我使用时：

```
css('font-family','ArvoBold') 
```

它更改为名为 ArvoBold（无引号）的不存在字体！我试图使它与：

```
css("font-family","'ArvoBold'") 
```

但这似乎不起作用。我也尝试创建一个变量：

```
var fontvar="'"+"ArvoBold"+"'";
css('font-family',fontvar); 
```

而且也没有成功，因为在元素的 CSS 上（使用 Google Chrome 的检查器检查）它一直使用 ArvoBold 而不是“ArvoBold”。

有人可以帮帮我吗？

提前致谢！

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:21:58.357

不确定您的确切实现，但这可以通过转义字符串中的单引号来实现：

```
$(".font-face").css("font-family","\'ArvoBold\'"); 
```

为什么需要单引号？

在内容 div 中转义单引号输出“ArvoBold”的快速测试：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>   
<style>
#content{border:solid 1px red;width:100px;height:100px;text-align:center;}
</style>
</head>

<body>

<div id="content"></div>

<script type="text/javascript">
$(document).ready(function(){
$("#content").html("\'ArvoBold\'");
});
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:17:28.220

您需要定义选择器并更正您的[css()](http://api.jquery.com/css/)括号。

[**这是工作的jsFiddle。**](http://jsfiddle.net/Mcwkx/10/)

```
var fontvar = 'ArvoBold';
$('.mySelector').css({'font-family':fontvar});​ 
```

注意：不要忘记使用[$(document).ready()](http://api.jquery.com/ready/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:20:43.253

在 CSS 中，您可以编写

```
font-family: Arial; 
```

也

```
font-family: 'Arial'; 
```

它具有相同的含义。因此可以预期，在

```
'ArvoBold' 
```

引号被解释为字符串分隔符，而不是字符串的一部分。

您可以尝试转义引号，即

```
font-family: "\'ArvoBold\'" 
```

不过，我必须重复 BoltClock 的问题：为什么字体名称中有引号？

# jquery - jQuery可排序包含问题

> ID：11903513
> 
> 赞同：1
> 
> 时间：2012-08-10T14:13:14.307
> 
> 标签：jquery, jquery-ui-sortable, containment

期望的效果：使用 jQuery.sortable 从包含中排除具有类 do-not-sort 的行 (tr)。

当前代码：（包含：'父'/包含：'.sortable-body'）

```
<table>
    <thead>
        <tr>
            <th>Field 1</th>
            <th>Field 2</th>
        </tr>
    </thead>
    <tbody class="sortable-body">
        <tr>
            <td>Sortable Field 1</td>
            <td>Sortable Field 2</td>
        </tr>
        <tr>
            <td>Sortable Field 1</td>
            <td>Sortable Field 2</td>
        </tr>
        <tr class="do-not-sort">
            <td colspan="2"><a href="#">Add Row</a></td>
        </tr>
    </tbody>
</table> 
```

如何从容器中排除 tbody 末尾（！）的“不排序”行？以下没有奏效：

> 遏制：'.sortable-body tr:not(.menu-rij-toevoegen)'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:55:04.827

~~您可以使用参数识别哪些项目*是*可排序的`'items'`——该值应指定为 CSS 选择器。~~

因此，要提供*否定*标准（从组中排除元素），请使用`:not()`伪类，如下所示：

```
$('.sortable-body').sortable({ items: 'tr:not(.do-not-sort)' })​;​ 
```

~~它在这里工作，你的精确标记：http: [//jsfiddle.net/MUEuW/2/](http://jsfiddle.net/MUEuW/2/)~~

**更新**：可能从包含中排除最后一行的最佳方法是将其简单地包装在单独的`<tbody>`标签中。

多个`<tbody>`s 是合法的。请参阅：[我们可以在同一个 <table> 中有多个 <tbody> 吗？](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)

在这里更新小提琴：http: [//jsfiddle.net/MUEuW/3/](http://jsfiddle.net/MUEuW/3/)

...或者您无法控制 HTML？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T14:32:04.207

看看我之前的帖子。 [https://stackoverflow.com/a/9535584/665387](https://stackoverflow.com/a/9535584/665387)

您可以指定不可排序的列，例如

```
$('#tableRoster').tablesorter({
        headers: {
            0: { sorter: false },
            4: { sorter: false }
        }
    }); 
```

# c# - Linq 查询以将集合从一个类检索到另一个类

> ID：11903517
> 
> 赞同：0
> 
> 时间：2012-08-10T14:13:30.790
> 
> 标签：c#, linq, c#-4.0, entity-framework-4

我有 2 个类 SiteConfig，SiteConfigView。一个与我的 EF 紧密耦合，一个类将其公开给 View 模型。这两个类都包含“品牌”类型的集合

我写了一个 linq 查询以从数据库中获取记录以查看模型。

当我向视图模型公开不同的类时，我必须获取“SiteConfigView”类型的记录。所以我正在编写一个 linq 查询，但我有点困惑如何将集合从 SiteConfig 获取到 SiteConfigView。

有我的课

```
public partial class SiteConfig
{
    public SiteConfig()
    {
        this.SiteBrands = new HashSet<SiteBrand>();
    }

    public int IdSiteConfig { get; set; }
    public string Name { get; set; }
    public byte[] SiteLogo { get; set; }
    public string Brands { get; set; }
    public string LinkColour { get; set; }

    public virtual ICollection<SiteBrand> SiteBrands { get; set; }
}

public class SiteConfigView
{
    public SiteConfigView()
    {

    }

    public int IdSiteConfig { get; set; }
    public string Name { get; set; }
    public byte[] SiteLogo { get; set; }
    public string Brands { get; set; }
    public string LinkColour { get; set; }

    public IEnumerable<SiteBrandView> SiteBrands { get; set; }
} 
```

这是我正在尝试的查询

```
var db = new SampleMVCEntities();
        IQueryable<SiteConfig> test = db.SiteConfigs.Select(a => new SiteConfigView{Name = a.Name,LinkColour = a.LinkColour,SiteLogo = a.SiteLogo}); 
```

可以来人指导我如何将集合从 SiteConfig 获取到 SiteConfigView。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:19:22.600

你正朝着正确的方向尝试这样

```
var siteConfigs = db.SiteConfigs.AsEnumerable().Select(a => new SiteConfigView()
                 {
                     Name = a.Name,
                     LinkColour = a.LinkColour,
                     SiteLogo = a.SiteLogo,
                     SiteBrands = a.SiteBrands.AsEnumerable().Select(a => new SiteBrandView()
                     {
                          //Do the projection
                     }).ToList()
                 }).ToList(); 
```

# c++ - 这个零是否初始化数据项？

> ID：11903518
> 
> 赞同：2
> 
> 时间：2012-08-10T14:13:33.600
> 
> 标签：c++, initialization

我发现自己对 C++ 中的零初始化规则感到困惑。使用此代码将 data_ 初始化为零？我相信它应该是，并用我的编译器查看生成的汇编代码，但我知道这不是必需的保证。

```
#include <iostream>

class test
{
public:
    test(); 
    int data_;
};

// Does this zero initialize data_ ?
test::test() : data_()
{
}

int main()
{
    test t;
    std:: cout << t.data_;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T14:18:05.440

Yes：`data_()`表示*值初始化*，对于基本类型，值初始化是零初始化，即`data_`从 value 开始`0`。

# ruby-on-rails - 如何在 Rails 中获取 json 结构？

> ID：11903524
> 
> 赞同：0
> 
> 时间：2012-08-10T14:14:10.920
> 
> 标签：ruby-on-rails, json

我的应用程序应该通过 json 发送结构，这些功能可以正常工作：

```
function send_json()
{
    var formData = form2object('myForm');
    var json_data = JSON.stringify(formData, null, '\t');
    $.post("", json_data);
} 
```

它创建 json_data 并通过邮寄方式发送。但我不明白如何在另一边捕捉这些数据，你能帮我吗？我应该采用这种结构并对其进行一些操作。

当我发送数据时，我得到了 json：

```
{ "type": "test", "ttl": "1", "amount": "1", "rules": { "rule1": "1", "value1": "4444", "stackcount1": "1", "rule2": "2", "value2": "333", "stackcount2": "2" }} 
```

在控制器中我写了这个：

```
class AdminController < ApplicationController
  def index
    @json_string = params[:amount]
    if !@json_sting.nil?
      @json_string = JSON.parse(params[:amount])
    end
  end
end 
```

在视图（haml）中，我写道：

```
=@json_string 
```

它不起作用！

但是wireshark显示：

```
POST /admin/ HTTP/1.1
Host: localhost:3000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: */*
Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With: XMLHttpRequest
Referer: http://localhost:3000/admin/
Content-Length: 192
Cookie: _GiftSenderTool_session=BAh7BzoQX2NzcmZfdG9rZW4iMTVyNVJCMTBvcGpKSk5OcFN4bW15YVlpRlF1TUNtb1gwZkY0bTRuRHlsNnM9Ig9zZXNzaW9uX2lkIiU4ZjFjNTNjNTY0MTQ1MGExNmFiODcxZGEyYzU5ZTkxMg%3D%3D--f21bf3b96edc3bc551c8de68acc6da17685d58b4
Pragma: no-cache
Cache-Control: no-cache

{
."type": "test",
."ttl": "1",
."amount": "1",
."rules": {
.."rule1": "1",
.."value1": "4444",
.."stackcount1": "1"
.},
."authenticity_token": "n3B6D/Km9zOgOzlosK/OLHyTCDLk3MyCTlTBinfQcnY="
} 
```

这意味着我无法获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:32:46.437

您必须在某些 rails 控制器操作中捕获您的 JSON 对象。如果您的 JSON 字符串如下所示：

```
{ "user": { "id": 1, "name": "Tom" } } 
```

然后这样做：

```
require "json"
...
def some_action
  user = JSON.parse(params[:user])
  puts "User id is #{user[:id]}"
  ...
end 
```

# c - ANSI C 中类似 DOM 的数据结构

> ID：11903525
> 
> 赞同：1
> 
> 时间：2012-08-10T14:14:11.753
> 
> 标签：c, data-structures

在 ANSI C 中用于表示类似 DOM 的层次结构的好的数据结构是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:41:14.570

肯定是一棵树……DOM 是一种树结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:09:29.197

使用最一般的树定义：

```
struct HtmlElement
{
    ... /* Tag name, attributes, etc */
    struct HtmlElement *pFirstChild;
    struct HtmlElement *pNextSibling;
}; 
```

# iphone - 如何在 if 语句中使用字符串？

> ID：11903527
> 
> 赞同：1
> 
> 时间：2012-08-10T14:14:25.567
> 
> 标签：iphone, objective-c, string, if-statement, nsstring

我是 Objective-c 的新手，我想知道如何获取 NSString 的 stringValue ，如果它等于 photo 然后做`//something`

这是我正在使用的代码，NSLog 打印“照片”。

我正在为 iPhone 开发。

```
NSString *getPageType = [self.webView stringByEvaluatingJavaScriptFromString:
                                 @"document.getElementById('pageType').name"];

    NSLog(@"%@", getPageType);

    if (getPageType == @"photo")
    {
        [UIButton animateWithDuration:3 animations:^{
            downloadOverlay.alpha = 1;
            downloadOverlay.alpha = 0;
        }];

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:16:36.517

```
if ([getPageType isEqualToString:@"photo"]) 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T14:16:40.527

你应该使用：

```
if ([getPageType isEqualToString:@"photo"]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:51:56.987

`getPageType == @"photo"`比较内存地址（指针）。

`[getPageType isEqualToString:@"photo"]`做你真正想要的，即比较两个字符串的内容。

**`in C Language`**

```
const char *capital = "NewYork";

if(capital == "NewYork") // address compare

if (strcmp(capital,"NewYork")==0) // string compare
   printf("equal");
else
   printf("different"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T19:42:40.727

我知道你已经得到了答案，但我只是想指出，`isEqual:`如果你感觉特别慢，你也可以使用。

如果您使用`isEqual:`，您可以传递的不仅仅是一个字符串（例如`NSData`,`NSArray`等`NSDictionary`）作为它的参数。

`YES`如果两个对象相等，则返回，否则返回`NO`。不过，这比`isEqualToString:`仅比较字符串时使用要慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:59:11.967

你可以使用喜欢

```
NSString *getPageType = [self.webView stringByEvaluatingJavaScriptFromString:
                                 @"document.getElementById('pageType').name"];

    NSLog(@"%@", getPageType);

        if ([getPageType isEqualToString:@"photo"])
    {
        [UIButton animateWithDuration:3 animations:^{
            downloadOverlay.alpha = 1;
            downloadOverlay.alpha = 0;
        }];

    } 
```

# ruby - Ruby Nokogiri 上的构建器选项：独立

> ID：11903535
> 
> 赞同：6
> 
> 时间：2012-08-10T14:14:43.110
> 
> 标签：ruby, xml, nokogiri

我想创建以下开头的 XML：

```
<?xml version = "1.0" encoding = "UTF-8" standalone ="no"?> 
```

但我找不到如何`standalone`在 Nokogiri 文档中添加“”选项。

我的代码是这样的：

```
builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8', :standalone => 'no') do |xml| 
```

但是当 Nokogiri 找到时它失败了`:standalone`。`:encoding`作品。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T20:09:00.040

解决这个问题的方法是通过以下方法告诉 Nokogiri::XML::Builder 使用现有的 XML 文档[`with`](http://nokogiri.org/Nokogiri/XML/Builder.html#method-c-with)：

```
xml = Nokogiri::XML('<?xml version = "1.0" encoding = "UTF-8" standalone ="no"?>')
puts Nokogiri::XML::Builder.with(xml) { |x| x.awesome }.to_xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<awesome/> 
```

# javascript - 在 Knockout.js 中更新 observableArray 后如何立即使用 DOM 容器？

> ID：11903538
> 
> 赞同：0
> 
> 时间：2012-08-10T14:14:48.487
> 
> 标签：javascript, jquery, knockout.js

我已经使用 Knockout 几天了，这就是我用来组织我的视图模型和 javascript 模型的方法：

```
//******************************************************************************
// jQUERY START:
//******************************************************************************
$(document).ready(function()
{
    var panel1 = $('#panel1>section');
    var panel2 = $('#panel2>section');

    $('#loader').ajaxStart(function()
    {
        $(this).fadeIn();
    }).ajaxComplete(function()
    {
        $(this).fadeOut();
    });

    ko.applyBindings(new ViewModel(panel1));
});

//******************************************************************************
// VIEW MODEL:
//******************************************************************************
function ViewModel(_panel1)
{
    var self      = this;
    this.vmHeader = new HeaderViewModel();
    this.vmPanel1 = new Panel1ViewModel(_panel1);
}

//******************************************************************************
// Panel1ViewModel:
//******************************************************************************
function Panel1ViewModel(_element)
{
    var self            = this;
    self.element        = _element;
    self.filters        = ['Operations', 'Jobs', 'Shifts', 'Hours'];
    self.selectedFilter = ko.observable();
    self.vmOperations   = new OperationsViewModel();
    self.vmJobs         = new JobsViewModel();
    self.vmShifts       = new ShiftsViewModel();
    self.vmHours        = new HoursViewModel();

    //PUBLIC METHODS:
    self.clickFilter = function(filter)
    {
        self.selectedFilter(filter);

        switch(filter)
        {
            case 'Operations':
                self.vmOperations.load(self.clear, self.element);
                break;

            case 'Jobs':
                self.vmJobs.load(self.clear, self.element);
                break;

            case 'Shifts':
                self.vmShifts.load(self.clear, self.element);
                break;

            case 'Hours':
                self.vmHours.load(self.clear, self.element);
                break;
        }
    }

    self.clear = function()
    {
        //test each view model to see if it currently has items loaded and empty them.
        if (self.vmOperations.operations() != null) { self.vmOperations.operations(null); }
        if (self.vmJobs.jobs() != null) { self.vmJobs.jobs(null); }
        if (self.vmShifts.shifts() != null) { self.vmShifts.shifts(null); }
        if (self.vmHours.hours() != null) { self.vmHours.hours(null); }
    };
}

//******************************************************************************
// ShiftsViewModel:
//******************************************************************************
function ShiftsViewModel()
{
    var self      = this;
    self.shifts   = ko.observableArray(null);
    self.selected = ko.observable();

    //PUBLIC METHODS:
    self.load = function (callback, element)
    {
        var options = {
            url:    '/api/shifts',
            type:   'GET',
            data: {
                operationID: 1
            }
        };

        async_load(options, function (data)
        {
            callback();

            self.shifts(
                $.map(data.Items, function (item, index)
                {
                    return new Shift(item);
                })
            );

            element.overscroll();  <--- PROBLEM IS HERE!
        });
    }

    self.click = function(shift)
    {
        self.selected(shift.id);
    };
}

//******************************************************************************
// SHIFT MODEL:
//******************************************************************************
function Shift(data)
{
    var self       = this;
    this.operation = data.Operation;
    this.shopOrder = data.ShopOrder;
    this.date      = data.Date;
    this.id        = data.ID;
    this.number    = data.Number;
    this.start     = ko.observable(data.Start);
    this.end       = ko.observable(data.End);
    this.isRunning = ko.observable(data.IsRunning);

    //computed properties.
    this.shiftDate = ko.computed(function()
    {
        var date = (this.end() == '') ? new Date() : new Date(this.end());

        return date.toLocaleDateString();
    }, this);

    this.startTime = ko.computed(function()
    {
        return (new Date(this.start())).toLocaleTimeString();
    }, this);

    this.endTime = ko.computed(function()
    {
        var time = '---';

        if (this.isRunning() == 'False')
        {
            time = (new Date(this.end())).toLocaleTimeString();
        }

        return time;
    }, this);
}

//******************************************************************************
// GLOBAL FUNCTIONS:
//******************************************************************************
function async_load(options, callback)
{
    $.ajax({
        url:            options.url,
        async:          true,
        cache:          false,
        type:           options.type,
        data:           options.data,
        dataType:       'json',
        contentType:    'application/json',
        success:    callback,
        error: function (request, type, errorThrown)
        {
            error_handler(options.url, request, type, errorThrown);
        }
    });
}

function sync_load(options)
{
    var error = false;
    var data = $.ajax({
        url:            options.url,
        async:          false,
        cache:          false,
        type:           options.type,
        data:           options.data,
        dataType:       'json',
        contentType:    'application/json',
        error: function (request, type, errorThrown)
        {
            error = true;
            error_handler(options.url, request, type, errorThrown);
        }
    }).responseText;

    if (!error)
    {
        data = eval('(' + data + ')');
    }

    return (error) ? null : data;
}

function error_handler(name, request, type, errorThrown)
{
    switch (request.status)
    {
        case 404:
            alert('The ' + name + ' could not be found.');
            break;

        case 500:
            alert('There was an internal server error loading ' + name + '.');
            //redirect the user to a page with further instructions.
            break;

        default:
            alert('An error occurred: (' + request.status + ' ' + request.statusText + ').');
    }
} 
```

这是HTML：

```
 <section id="panel1" data-bind="with: vmPanel1">
            <nav data-bind="foreach: filters">
                <a href="#" data-bind="text: $data, css: { selected: $data == $root.vmPanel1.selectedFilter() }, click: $root.vmPanel1.clickFilter"></a>
            </nav>
            <section>
                <section id="panel1Data">
                <!-- ko foreach: vmOperations.operations -->
                    <article class="operation" data-bind="css: { selected: $data.operationID == $root.vmPanel1.vmOperations.selected() }, click: $root.vmPanel1.vmOperations.click">
                        <div class="name" data-bind="text: name"></div>
                        <div class="number" data-bind="text: number"></div>
                        <div class="sequence" data-bind="text: sequence"></div>
                    </article>                            
                <!-- /ko -->
                <!-- ko foreach: vmJobs.jobs -->
                    <article data-bind="pageBreak: operation, label: 'operation', level: 1"></article>
                    <article class="job" data-bind="css: { selected: $data.jobID == $root.vmPanel1.vmJobs.selected() }, click: $root.vmPanel1.vmJobs.click">
                        <div class="start date">
                            <label data-bind="text: startMonth"></label>
                            <div data-bind="text: startDay"></div>
                            <span data-bind="text: startTime"></span>
                        </div>
                        <div class="end date">
                            <label data-bind="text: endMonth"></label>
                            <div data-bind="text: endDay"></div>
                            <span data-bind="text: endTime"></span>
                        </div>
                        <div class="shoporder" data-bind="text: shopOrder"></div>
                        <div class="toolconfig" data-bind="toolConfig: $data"></div>
                        <div class="lot" data-bind="text: lot"></div>
                    </article>
                <!-- /ko -->
                <!-- ko foreach: vmShifts.shifts -->
                    <article data-bind="pageBreak: operation, label: 'operation', level: 1"></article>
                    <article data-bind="pageBreak: shopOrder, label: 'job', level: 2"></article>
                    <article data-bind="pageBreak: shiftDate(), level: 3"></article>
                    <article class="shift" data-bind="css: { selected: $data.id == $root.vmPanel1.vmShifts.selected() }, click: $root.vmPanel1.vmShifts.click">
                        <div class="shift" data-bind="text: number"></div>
                        <div class="start time" data-bind="text: startTime()"></div>
                        <div class="end time" data-bind="text: endTime()"></div>
                    </article>
                <!-- /ko --> 
```

根据选择的过滤器，适当的数据列表（操作、作业、班次或小时数）将加载到面板 1 中，并且 jQuery Overscroll 插件用于创建 IPad 滚动效果。

问题出在调用 Overscroll 插件所在行的 ShiftsViewModel 中。调试时，我注意到插件没有做任何事情，因为容器元素没有宽度/高度。运行程序时，容器会使用正确的数据进行更新，因此看起来在 Knockout 将数据写入 DOM 容器之前调用 overscroll 正在运行。

由于 overscroll 调用在接收到数据后运行的 ajax 回调中，我认为它可以。Knockout 是否异步更新 DOM？我不知道从这里去哪里......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:12:10.810

我解决了这个问题：

在 jQuery 就绪函数中，我在加载任何数据之前缓存 DOM 元素，然后使用容器元素内没有任何内容的缓存元素。

所以，我改变了这个：

```
var panel1 = $('#panel1>section'); 
```

至：

```
var panel1 = '#panel1>section'; 
```

然后在 ShiftsViewModel 中，我更改了这一行：

```
element.overscroll(); 
```

至：

```
$(element).overscroll(); 
```

它现在似乎正在工作......

# backbone.js - 获取集合或模型时触发加载视图

> ID：11903540
> 
> 赞同：8
> 
> 时间：2012-08-10T14:14:58.373
> 
> 标签：backbone.js, marionette

我已经使用 Marionette 一个星期了，它真的让我的生活更轻松了！

现在我需要能够在获取集合或模型时通知用户，因为某些视图需要大量时间来呈现/获取。举个例子，我做了一个小模型：

![http://i.stack.imgur.com/IU3BP.png](../Images/43aff4897e59b093fe50628374510886.png)

当用户单击一个类别时，需要加载该类别中所有项目的集合。在获取集合之前，我想显示一个加载视图，如图所示（视图 1）。什么是实现这一点的优雅解决方案。我发现以下帖子中用户启用了获取触发器：[http](http://tbranyen.com/post/how-to-indicate-backbone-fetch-progress) ://tbranyen.com/post/how-to-indicate-backbone-fetch-progress 。这似乎有效，但并不像我想要的那样。这是我想出的：

```
 var ItemThumbCollectionView = Backbone.Marionette.CollectionView.extend({
        collection: new ItemsCollection(userId),
        itemView: ItemThumbView,
        initialize: function(){
            this.collection.on("fetch", function() {
                //show loading view
            }, this);
            this.collection.on("reset", function() {
                //show final view
            }, this);
            this.collection.fetch();

            Backbone.history.navigate('user/'+identifier);
            this.bindTo(this.collection, "reset", this.render, this)
        }
    }); 
```

如果我可以有一个名为“LoadItemView”的可选属性，那就太好了。这将在获取期间覆盖 itemView。在您看来，这会是一个好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:35:21.483

几天前，Derick Bailey 在 Marionette Wiki 中发布了一个可能的解决方案：[https ://github.com/marionettejs/backbone.marionette/wiki/Displaying-A-%22loading-...%22-Message-For-A -集合或复合视图](https://github.com/marionettejs/backbone.marionette/wiki/Displaying-A-%22loading-...%22-Message-For-A-Collection-Or-Composite-View)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T09:09:03.887

```
var myCollection = Backbone.Marionette.CollectionView.extend({
    initialize: function(){
        this.collection.on('request', function() {
            //show loading here
        })
        this.collection.on('reset', function() {
            //hide loading here
        })
        this.collection.fetch({reset: true})
    }
}) 
```

现在好多了，我想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T10:33:16.247

使用主干同步方法

/* 除了直接 ajax 之外，每个请求都会覆盖同步应用程序的调用 */

```
Backbone._sync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    // Clone the all options
    var params = _.clone(options);

params.success = function(model) {
    // Write code to hide the loading symbol
     //$("#loading").hide();
    if (options.success)
        options.success(model);
};
params.failure = function(model) {
    // Write code to hide the loading symbol
     //$("#loading").hide();
    if (options.failure)
        options.failure(model);
};
params.error = function(xhr, errText) {
    // Write code to hide the loading symbol
     //$("#loading").hide();
    if (options.error)
        options.error(xhr, errText);
};
// Write code to show the loading symbol
     //$("#loading").show();
Backbone._sync(method, model, params); 
```

};

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T12:28:19.137

一般来说，我建议在获取数据时加载预加载器，然后显示集合。就像是：

```
region.show(myPreloader);
collection.fetch().done(function() {
    region.show(new MyCollectionView({ collection: collection });
}); 
```

# html - 如何使用 HTML5 视频标签禁用搜索？

> ID：11903545
> 
> 赞同：10
> 
> 时间：2012-08-10T14:15:17.293
> 
> 标签：html, video, html5-video

我知道这是不可取的。但是仍然需要实现这个功能。尝试了从寻求，寻求媒体控制器的一切。没有任何效果。是否有任何外部库可以禁用搜索。如果一些关于如何使用自定义控件的指示会很有帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-12-20T18:26:59.863

这个问题很老但仍然相关，所以这是我的解决方案：

```
var video = document.getElementById('video');
var supposedCurrentTime = 0;
video.addEventListener('timeupdate', function() {
  if (!video.seeking) {
        supposedCurrentTime = video.currentTime;
  }
});
// prevent user from seeking
video.addEventListener('seeking', function() {
  // guard agains infinite recursion:
  // user seeks, seeking is fired, currentTime is modified, seeking is fired, current time is modified, ....
  var delta = video.currentTime - supposedCurrentTime;
  if (Math.abs(delta) > 0.01) {
    console.log("Seeking is disabled");
    video.currentTime = supposedCurrentTime;
  }
});
// delete the following event handler if rewind is not required
video.addEventListener('ended', function() {
  // reset state in order to allow for rewind
    supposedCurrentTime = 0;
}); 
```

[提琴手](https://jsfiddle.net/o13zcrxf/4/)

它与玩家无关，即使在显示默认控件时也能正常工作，即使在控制台中输入代码也无法绕过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-28T18:15:44.353

扩展来自@svetlin-mladenov 的答案，您可以执行以下操作以防止用户寻找尚未观看的视频的任何部分。这也将允许用户倒带并寻找之前已经观看过的视频的任何部分。

```
var timeTracking = {
                    watchedTime: 0,
                    currentTime: 0
                };
                var lastUpdated = 'currentTime';

                video.addEventListener('timeupdate', function () {
                    if (!video.seeking) {
                        if (video.currentTime > timeTracking.watchedTime) {
                            timeTracking.watchedTime = video.currentTime;
                            lastUpdated = 'watchedTime';
                        }
                        //tracking time updated  after user rewinds
                        else {
                            timeTracking.currentTime = video.currentTime;
                            lastUpdated = 'currentTime';
                        }
                    }

                });
                // prevent user from seeking
                video.addEventListener('seeking', function () {
                    // guard against infinite recursion:
                    // user seeks, seeking is fired, currentTime is modified, seeking is fired, current time is modified, ....
                    var delta = video.currentTime - timeTracking.watchedTime;
                    if (delta > 0) {
                        video.pause();
                        //play back from where the user started seeking after rewind or without rewind
                        video.currentTime = timeTracking[lastUpdated];
                        video.play();
                    }
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:11:30.933

您可以使用像[video.js](http://videojs.com)这样的 HTML5 视频播放器并使用 CSS 来隐藏搜索栏。

或者您可以为 HTML5 视频[构建自己的控件](http://blog.steveheffernan.com/2010/04/how-to-build-an-html5-video-player/)。

此外，您正在寻找的事件是“寻找”。如（使用新的 jquery 事件绑定）：

```
$(myVideoElement).on('seeking', function(){
  // do something to stop seeking
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T15:23:50.390

```
<!DOCTYPE html> 
<html> 
<body> 

<video controls onseeking="myFunction(this.currentTime)">
  <source src="mov_bbb.mp4" type="video/mp4">
  <source src="mov_bbb.ogg" type="video/ogg">
  Your browser does not support HTML5 video.
</video>

<p>Video courtesy of <a href="http://www.bigbuckbunny.org/" target="_blank">Big Buck Bunny</a>.</p>

<script>
var currentpos = 0;

function myFunction(time) {
    if(time > currentpos) {
      video.currentTime = currentpos;
    }
}

var video = document.getElementsByTagName('video')[0];

function getpos(){
  currentpos = video.currentTime;
}
onesecond = setInterval('getpos()', 1000);
</script>

</body> 
</html>

Did the trick for me :) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-25T05:08:14.193

```
var supposedCurrentTime = 0;

$("video").on("timeupdate", function() {

    if (!this.seeking) {
        supposedCurrentTime = this.currentTime;
    }
});
// prevent user from seeking
$("video").on('seeking', function() {
    // guard agains infinite recursion:
    // user seeks, seeking is fired, currentTime is modified, seeking is fired, current time is modified, ....
    var delta = this.currentTime - supposedCurrentTime;

    if (Math.abs(delta) > 0.01) {
        //console.log("Seeking is disabled");
        this.currentTime = supposedCurrentTime;
    }

});

$("video").on("ended", function() {
    // reset state in order to allow for rewind
    supposedCurrentTime = 0;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-22T14:26:55.293

要隐藏所有视频控件，请使用此 -

```
document.getElementById("myVideo").controls = false; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-28T13:30:03.533

也许它可以帮助某人，我用这种方式来删除所有的进度控制回调。

```
player.controlBar.progressControl.off();
player.controlBar.progressControl.seekBar.off(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-07-22T13:58:41.577

使用 video js 作为我的视频播放器，而不是普通的 HTML5 版本：

```
.vjs-default-skin .vjs-progress-holder {
  height: 100%;
  pointer-events: none;
} 
```

# android - 无需打包即可部署/测试

> ID：11903547
> 
> 赞同：1
> 
> 时间：2012-08-10T14:15:22.847
> 
> 标签：android, android-2.2-froyo

有没有办法让 android SDK 构建过程在实际设备上进行部分更新？每当我进行更改时，它都必须重建 apk 文件并部署它，这似乎很浪费，而且速度很慢（尤其是 dex 缺陷）。

复制到设备在这里不是问题，它足够快。所以模拟器似乎没有解决我的问题。有没有办法在不为模拟器生成 APK 文件的情况下测试代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:47:22.230

您想要的是测试驱动开发 (TDD)。这篇文章会让你开始正确：

[http://pivotal.github.com/robolectric/](http://pivotal.github.com/robolectric/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:11:30.510

> 有没有办法让 android SDK 构建过程在实际设备上进行部分更新？

目前没有。这是他们正在考虑对构建系统进行未来大修的事情，尽管我认为还有其他功能被认为具有更高的优先级..

> 有没有办法在不为模拟器生成 APK 文件的情况下测试代码？

不适用于标准的基于 Java 的 Android 开发。任何类型的编译环境几乎都需要编译代码才能运行。

# c# - 如何更改 XML 节点值

> ID：11903552
> 
> 赞同：10
> 
> 时间：2012-08-10T14:15:31.620
> 
> 标签：c#, xml, xmlnode

我有一个 XML（这正是它的样子）：

```
<PolicyChangeSet schemaVersion="2.1" username="" description="">
    <Attachment name="" contentType="">
        <Description/>
        <Location></Location>
    </Attachment>
</PolicyChangeSet> 
```

这是在用户的机器上。

我需要为每个节点添加值：用户名、描述、附件名称、内容类型和位置。

这是我到目前为止所拥有的：

```
string newValue = string.Empty;
            XmlDocument xmlDoc = new XmlDocument();

            xmlDoc.Load(filePath);
            XmlNode node = xmlDoc.SelectSingleNode("/PolicyChangeSet");
            node.Attributes["username"].Value = AppVars.Username;
            node.Attributes["description"].Value = "Adding new .tiff image.";
            node.Attributes["name"].Value = "POLICY";
            node.Attributes["contentType"].Value = "content Typeeee";

            //node.Attributes["location"].InnerText = "zzz";

            xmlDoc.Save(filePath); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T14:17:42.790

使用 XPath。`XmlNode node = xmlDoc.SelectSingleNode("/PolicyChangeSet");`选择你的根节点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-12T01:57:13.420

```
xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachment/Description").InnerText = "My Desciption";
xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachment/Location").InnerText = "My Location"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T14:32:04.873

有了这个 -

```
xmlDoc.Load(filePath);
            XmlNode node = xmlDoc.SelectSingleNode("/PolicyChangeSet");
            node.Attributes["username"].Value = AppVars.Username;
            node.Attributes["description"].Value = "Adding new .tiff image.";

            node = xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachment");
            node.Attributes["name"].Value = "POLICY";
            node.Attributes["contentType"].Value = "content Typeeee";
xmlDoc.Save(filePath); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-10T14:36:59.420

使用 LINQ To XML:)

```
XDocument doc = XDocument.Load(path);
IEnumerable<XElement> policyChangeSetCollection = doc.Elements("PolicyChangeSet");

foreach(XElement node in policyChangeSetCollection)
{
   node.Attribute("username").SetValue(someVal1);
   node.Attribute("description").SetValue(someVal2);
   XElement attachment = node.Element("attachment");
   attachment.Attribute("name").SetValue(someVal3);
   attachment.Attribute("contentType").SetValue(someVal4);
}

doc.Save(path); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T14:21:25.093

在您的 SelectSingleNode 方法中，您需要提供一个 XPath 表达式来查找您要选择的节点。如果您使用 Google XPath，您会发现很多相关资源。

[http://www.csharp-examples.net/xml-nodes-by-name/](http://www.csharp-examples.net/xml-nodes-by-name/)

如果您需要将这些添加到每个节点，您可以从顶部开始并遍历所有子节点。

[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T10:34:10.903

```
For setting value to XmlNode: 
 XmlNode node = xmlDoc.SelectSingleNode("/PolicyChangeSet");
            node["username"].InnerText = AppVars.Username;
            node["description"].InnerText = "Adding new .tiff image.";
            node["name"].InnerText = "POLICY";
            node["contentType"].InnerText = "content Typeeee";

For Getting value to XmlNode: 
username=node["username"].InnerText 
```

# c# - 正则表达式 - 替换一些 html 标签

> ID：11903556
> 
> 赞同：1
> 
> 时间：2012-08-10T14:15:44.017
> 
> 标签：c#, regex

我想替换一些像 <. /> (. 是 b, h1, ... 但不是 br, hr, ...)

我想： Regex.Replace(myString, "<..?/>", "") 但我不知道如何排除 br 和 hr。

任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:26:05.543

如果您知道要执行哪些标记，则可以这样做：

```
Regex.Replace(myString, "<(b|p|div|span) />", "") 
```

在括号内，所有选项都以竖线分隔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:34:08.623

尝试这样的事情：

```
(?:< *)(?!(?:br|hr)) *\w+ *\/ *\> 
```

将您不想匹配的任何标签添加到 br|hr 部分（使用 '|' 分隔它们）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:28:34.277

使用这样的模式来匹配和替换它们：

```
<(TAG1|TAG2|TAG3|...)\s*/?> 
```

`(TAG1|TAG2|TAG3|...)`您要处理的所有标签在哪里，用管道分隔。确保还指定正则表达式不区分大小写，因为 HTML 标记不区分大小写。例如，要只识别您列出的两个，您可以创建一个像这样的正则表达式：

```
var exp = new Regex("<(b|h1)\s*/?>", RegexOptions.IgnoreCase); 
```

这个怎么运作：

*   括号中的位只是标识它应该处理的标签。
*   `\s*`识别零个或多个空白字符。（在正则表达式的开头不需要其中一个，因为 html 标准不允许标签名称前有空格。）
*   `/?`可选地匹配一个'/'。（这只是为了灵活处理不使用`/`in 空标签的 HTML，因为 HTML 规范并不总是需要它。）

您可以使用它来删除标签，如下所示：

```
var strippedText = exp.Replace(input, String.Empty); 
```

# java - java.io.FileNotFoundException:

> ID：11903558
> 
> 赞同：0
> 
> 时间：2012-08-10T14:15:56.177
> 
> 标签：java, java-io

我正在尝试使用 Java 将单个文件从源复制到目标，但收到以下错误消息。

**`java.io.FileNotFoundException:`**以下是方法

```
public void copy_single(String source,String dest,String filename)
{
  try
  { System.out.println(source + "" + filename);
    System.out.println(dest + "" + filename);
    File inputFile = new File(source+""+filename);
    File outputFile = new File(dest+""+filename);
    Process proc0 = Runtime.getRuntime().exec("chmod -R 777 "+inputFile+"");
    proc0.waitFor();
    Process proc1 = Runtime.getRuntime().exec("chmod -R 777 "+outputFile+"");
    proc1.waitFor();
    FileReader in = new FileReader(inputFile);
    FileWriter out = new FileWriter(outputFile);
    int c;
    while ((c = in.read()) != -1)
      out.write(c);
    in.close();
    out.close();
  } catch(Exception e) {
    e.printStackTrace();
    System.out.println("Error: Operation failed!");
  }
} 
```

输出：-

```
/home/root/Tool/AAputDelta.sh
/home/root/Desktop/Sqa/BaseLine/Engine/AAputDelta.sh
java.io.FileNotFoundException: /home/root/Desktop/Sqa/BaseLine/Engine/AAputDelta.sh (No such file or directory)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
at java.io.FileOutputStream.<init>(FileOutputStream.java:145) 
```

如何使用java复制简单文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:23:12.550

怀疑部分或全部`dest`输出路径可能不存在。如果是这种情况，您可以使用[File.mkdirs](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)来构建路径。

此外，建议允许[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)处理所有这些，而不是从字符串构建文件，例如：

```
File inputFile = new File(source, filename);
File outputFile = new File(dest, filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:20:57.637

使用 apache commons FileUtils。这些中的任何一个都应该足够了

```
FileUtils.copyFile(File srcFile, File destFile) 
FileUtils.copyFile(File srcFile, File destFile, boolean preserveFileDate) 
FileUtils.copyFileToDirectory(File srcFile, File destDir) 
FileUtils.copyFileToDirectory(File srcFile, File destDir, boolean preserveFileDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:24:16.127

您可以使用来自 commons-io 的 FileUtils： http: [//commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)

或来自 Java 7 的文件：http: [//docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:29:31.867

java.io.FileNotFoundException 表示未找到某些文件，因此请检查值：

*   来源
*   目的地
*   文件名
*   来源+""+文件名
*   dest+""+文件名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T03:32:52.307

如果文件不存在，文件系统将尝试创建文件。如果创建失败，Java 将抛出`FileNotFountException`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T15:08:46.403

也许你需要添加

```
File outputFile = new File(dest+""+filename);
if(!outputFile.exist())outputFile.createNewFile(); 
```

# ruby-on-rails - Specjour 和 Spork 集成

> ID：11903559
> 
> 赞同：2
> 
> 时间：2012-08-10T14:16:00.187
> 
> 标签：ruby-on-rails, testing, automated-tests, specjour

我正在使用 Specjour v0.4.1 进行完整的测试套件运行并预加载 Rails 应用程序以使用 Spork 和 Guard 运行单个规范。Specjour 使用多个工作人员（通常是 4 个）同时运行测试。

如何将预加载的应用程序传递给这些工作人员中的每一个？随着 specjour 继续为每个工作人员加载应用程序。

注意：`rspec spec/models/example_spec.rb --drb`用于强制 rspec 使用预加载的应用程序。

我已经分叉了 specjour 并尝试`--drb`使用几种方法将标志推送给每个工人，但没有成功。任何见解将不胜感激。谢谢！

注意：`hooks.rb`配置看起来很有希望（在[README](https://github.com/sandro/specjour)中提到），但是，文档非常少。

# silverlight - 将属性添加到模型对象 silverlight

> ID：11903565
> 
> 赞同：1
> 
> 时间：2012-08-10T14:16:22.697
> 
> 标签：silverlight, entity-framework

我想知道如何从我的模型中向实体对象添加属性。

```
[EdmEntityTypeAttribute(NamespaceName="MyObjectModel", Name="MyObject")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class MyObject: EntityObject
{
private int myVar;

        public int MyProperty
        {
            get { return myVar; }
            set { myVar = value; }
        }
} 
```

当我这样做时，新属性不会出现在 MyObject 中，但我没有收到任何错误。

我应该如何继续这样做？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:53:24.740

当我看到该`EdmEntityTypeAttribute`属性时，我假设您正在修改`Databasemodel.Designer.cs`文件。正如这个文件的标题所说：

```
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated> 
```

此文件**是自动生成的，绝不能手动修改**。因此，当重新生成此文件（可能在编译时）时，您的属性基本上会被删除。

只需创建一个新文件来添加您的属性：

例如`MyObject.cs`：

```
public partial class MyObject
{
    public int MyProperty { get; set; }
} 
```

请注意，该`partial`关键字旨在允许在多个文件中分离一个类的定义。

# ios - UIWebView pich 可以在 iPhone 5.0 模拟器上进行缩放，但不能在 iPhone 4.3 和 iPad 4.3、5.0 模拟器上工作？

> ID：11903566
> 
> 赞同：1
> 
> 时间：2012-08-10T14:16:24.320
> 
> 标签：ios, xcode, ipad, uiwebview, zooming

我写了一个自定义 ViewController 有一个如下的 webview：

```
@interface WebpageController : UIViewController<UIWebViewDelegate> {
    UIWebView* webView;
//....
} 
```

它的构造函数：

```
-(id)init {

    if (self = [super init]) {
    webView=[[UIWebView alloc]init];
    webView.delegate=self;
        webView.scalesPageToFit = YES;
        webView.multipleTouchEnabled = YES;
//.....
} 
```

我有 3 个功能来放大、缩小和 loadHTMLString 到下面的 webView：

```
//this is load HTML String function
// param: content --> HTML conten by inside <body> </body>
 -(void) loadWebViewWithContent:(NSString*) content{

    NSString * header = @"<meta name='viewport' content='width=device-width;initial-scale=1.0; user-scalable= yes;'/>";

    NSString * html = [NSString stringWithFormat:@"<html> 
                                                      <head>%@ </head> 
                                                      <body> %@ </body>
                                                   </html>",header,content];
    [webView loadHTMLString:html baseURL:nil];

} 
```

//这些是放大和缩小功能

```
-(void) zoomIn {
    for (UIScrollView *scroll in [self.webView subviews]) {
        //Set the zoom level.
        if ([scroll respondsToSelector:@selector(setZoomScale:animated:)]) {
            NSLog(@"set ZoomScale work");

            [scroll setZoomScale:2.0f animated:YES];
            NSLog(@"zoomScale of SCROLLVIEW= %f",(scroll.zoomScale));

        }
    }

}
-(void) zoomOut {

    for (UIScrollView *scroll in [self.webView subviews]) {
        //Set the zoom level.

        if ([scroll respondsToSelector:@selector(setZoomScale:animated:)]) {

            NSLog(@"set ZoomScale work");
            [scroll setZoomScale:0.5f animated:YES];
            NSLog(@"zoomScale of SCROLLVIEW= %f",(scroll.zoomScale));

        }

    }

} 
```

在主 UI 中，我设置了当用户点击 ZoomIn 按钮 --> webView zoomIn 通过调用 zoomIn 函数（对于 zoomOut 相同）

当我在 iPhone 5.0 模拟器上测试时一切正常（我使用 xCode 4.2）。您可以捏合以放大、缩小（也可以使用 zoomIn、zoomOut 按钮）。但是当在 Iphone 4.3 和 iPad（4.3 和 5.0）上测试时——> 没有任何事情发生——> LOG 显示：

* ***设置缩放比例工作**

**滚动视图的缩放比例= 1.00；** ***---> 我也设置了另一个值，但 zoomScale 始终 = 1.00 --> 没有变化*****

我的代码有什么问题？？我很困惑。请帮助我。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:46:25.997

这是用于滚动视图缩放方法..

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
{
    return contentView;
}

-(void)scrollViewDidZoom:(UIScrollView *)scrllView 
{
    CGRect rectZoom = [self centeredFrameForScrollView:scrllView andUIView:contentView]; 
    contentView.frame = rectZoom; //[self centeredFrameForScrollView:scrllView andUIView:contentView];
}

-(CGRect)centeredFrameForScrollView:(UIScrollView *)scroll andUIView:(UIView *)rView 
{
    CGSize boundsSize = scroll.bounds.size;
    CGRect frameToCenter = rView.frame;

    // center horizontally
    if (frameToCenter.size.width < boundsSize.width) 
    {
        frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
    }
    else 
    {
        frameToCenter.origin.x = 0;
    }

    // center vertically
    if (frameToCenter.size.height < boundsSize.height) 
    {
        frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
    }
    else 
    {
        frameToCenter.origin.y = 0;
    }
    frameToCenter = CGRectMake(frameToCenter.origin.x, frameToCenter.origin.y, frameToCenter.size.width, frameToCenter.size.height);
    return frameToCenter;
} 
```

如果不工作，请告知...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:24:39.790

最好始终使用 self."iVar name"。

```
@interface WebpageController : UIViewController<UIWebViewDelegate>
@property (strong, nonatomic) UIWebView *webview;
@end
@implementation
  @synthesize webView;
@end 
```

然后像 self.webView 一样引用它。

# tfs - 在 TFS 2010/2012 中，您如何对错误进行分类？

> ID：11903575
> 
> 赞同：3
> 
> 时间：2012-08-10T14:16:51.413
> 
> 标签：tfs, categorization

在 TFS（至少 2010 年及更高版本）中，我们有迭代的概念，它似乎应该有助于分配工作（我们在 1.0 版中做什么，1.1 版计划做什么以及积压工作）。我不得不提到我一直在研究 TFS2012 的 Scrumm 模板。

现在，您如何按产品版本对错误进行分类？例如，假设我们有一个产品，v1.0 和 v2.0 在野外，v3.0 在开发中。

现在，我们在 v1.0 中发现了一个 bug，结果发现 v2.0 和 v3.0 也包含这个 bug。

代码方面，我们将纠正 dev 中的错误，然后将其合并到 v1.1 和 v2.1，这样我们当前的用户就不会对他们的版本感到冷漠（因为我们不能总是强制升级到最新版本） .

在 TFS 中创建错误时，我们可以选择指示迭代路径。但是我们只能使用一次迭代，而我们需要能够声明该错误在所有三个版本中都存在，并在合并发生时将其标记为独立更正。

有什么方法可以支持在 TFS 中的这种工作方式，还是我看错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:37:54.333

实现此目的的一种方法是修改 TFS 中 Bug 的默认工作项类型：

1.  在 VS 2010 中，通过`Tools > Process Editor > Types > Open WIT From Server`从主菜单中选择来打开编辑器

2.  在**Select Work Item Type**对话框中，展开您希望此模板应用到的团队项目，选择**Bug**并单击**OK**。

3.  当编辑器打开时，您将看到**Bug**工作项的所有可用字段的列表。您应该注意到列表中有一个可用的**Found In**字段。通过在此字段中提供版本号，编写可以按版本查找错误的查询应该很容易。

4.  要显示此字段，请选择**布局**选项卡以打开表单编辑器。它基本上只是一个大树视图。展开**Group - Classification**的组（或您认为该字段最合适的任何位置），右键单击**Column**并选择**New Control**

5.  在属性面板中，为字段名称选择**Found In**，并更新标签。

6.  选择**Preview Form**以测试您的更改，然后保存并关闭编辑器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:44:27.277

有很多方法可以解决这个问题，具体取决于您选择如何处理它。一是不使用标准区域字段（Mike C 提出了一个不错的选择）。另一个是创建工作项以更准确地反映您正在做的工作的状态。我的意思是：

如果您要针对软件的三个不同版本发布修复程序，我假设您希望针对所有三个版本对其进行测试，以假设修复程序在所有代码库中都是一致的。在 V1.0 中有效的修复程序在 V3.0 中的效果可能不同，因为周围/受影响的代码可能不同。

因此，在该过程中的某个时刻，您可能拥有三个单独（但链接）的错误表示：可能是错误本身的三个副本，或者三个测试用例（每个版本一个应该测试错误）都链接到原始漏洞。然后，如果错误在 V1.0 中得到修复，但需要在 V3.0 中修复更多工作，那么您的工作项准确地反映了这一点。

# regex - 在vi中在另一个下添加一行

> ID：11903576
> 
> 赞同：1
> 
> 时间：2012-08-10T14:16:52.917
> 
> 标签：regex, vi

我正在研究一个正则表达式，它将在每行下方添加以下行。

```
rewrite ^ /sniffer/loath/ permanent; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:30:33.023

更简单的解决方案： `%s+$+\rrewrite ^ /sniffer/loath/ permanent;+`

`$`匹配现有行的结尾。所以这个脚本用换行符和你的文本替换它。此外，它在命令中使用`+`而不是常规`/`符号`s`来避免`/`在替换字符串中转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:25:08.570

如果我正确理解您的问题，您想在每个现有行下插入一行。简单地做到这一点

```
:%s/\(.*\)/\1\rrewrite ^ \/sniffer\/loath\/ permanent;/ 
```

`\(.*\)`匹配每一行。然后我们将该行替换为

*   `\1`（本身）
*   `\r`（换行符）
*   然后您想要的带有`/`字符的文本转义

希望这是有道理的。

# java - 离开页面时运行java函数（HTML）

> ID：11903578
> 
> 赞同：0
> 
> 时间：2012-08-10T14:17:07.077
> 
> 标签：java, html

我正在使用 Seam 和 Java 编写程序。在我的网页上，我有一个表格供用户填写。但是，当我离开页面时；变量不清楚。离开表单页面时，有什么方法可以从我的 bean 运行 java 函数，或者有没有人知道更好的方法来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:26:26.063

由于 Seam 是 Java Server Faces 的专用版本：

您可以使用以下范围：

*   Request ：使用这个范围来定义你的bean，因为当请求被发送到客户端时，变量将被释放。
*   会话：不要将此范围用于存储对象和组件之间的共享，因为它会产生一些内存问题
*   应用程序：仅用于在所有应用程序和客户端之间共享的对象。

我假设您使用的是 Session Scope，所以我的建议是您使用 Request Scope。

# asp.net-mvc-3 - MVC & ajax：我应该创建更多视图吗？

> ID：11903583
> 
> 赞同：3
> 
> 时间：2012-08-10T14:17:22.430
> 
> 标签：asp.net-mvc-3, jquery

我正在使用 EF 开发一个 MVC3 应用程序，我想使用 jQuery ajax 使 UI 流畅，用户将能够浏览 url，如果他知道的话，或者他可能会收到指向特定路线的链接，但是，一旦页面完全加载，它需要流畅，所以我想出了一个想法，我想在这里讨论它，然后再对解决方案进行更改。

这是我想出的：

TestController.cs（为简单起见，省略了方法代码）

```
public ActionResult Index() { ... }

public ActionResult Create() { ... }
[HttpPost]
public ActionResult Create(Test test) { ... }

public ActionResult Update(int testID) { ... }
[HttpPost]
public ActionResult Update(Test test) { ... }

public ActionResult Delete(int testID) { ... }
[HttpPost]
public ActionResult Delete(Test test) { ... } 
```

到目前为止，它看起来像大多数控制器。我的看法如下：

```
Views\Test\List.cshtml
Views\Test\Create.cshtml
Views\Test\Details.cshtml
Views\Test\Delete.cshtml 
```

现在因为我想做异步：我已经改变了我的列表视图，所以我可以从列表中添加、修改和删除，到目前为止它就像一个魅力。另外，用户仍然可以使用 url 浏览应用程序，请注意，应用程序内的每个链接都会执行 ajax 请求来完成实际工作，没有 Route/Action 链接。

到目前为止，应用程序正在按预期工作，但现在我遇到了一些事情：我需要 ActionResult 和 PartialViewResult 的视图，这是因为用户可以输入 url：“/Admin/Test”，它应该返回整页，或者可以单击仅加载“/Admin/Test”内容并显示它的锚点。为了避免著名的页内页错误我写了一个[函数](https://stackoverflow.com/questions/11903078/how-to-update-my-content-async-with-javascript/ "如何使用 javascript 异步更新我的内容？")发送请求，当请求到达时，它只选择我需要的内容，避免页面内的页面，并复制视图，但是，响应是整个页面，我不需要说，它不是最好的选择，但是由于应用程序将被 lan 使用，所以我不太关心响应的有效负载，但是我需要在视图中编写 javascript 代码，所以我的解决方案就像 null 因为使用 jQuery 选择器只得到我需要的 javascript 不存在。

至于我解决上一个解决方案的新解决方案：我想我可能会保留原始视图，并创建另一个视图，在原始名称后附加单词“Partial”，在控制器中创建另一个具有相同命名约定的方法，加上将新路由添加到我的路由表中。

总结一下，我需要的是以下内容： - 如果用户键入“/Test”，则响应应该是整个页面，像过去一样加载，屏幕闪烁白色等。- 但是如果用户点击导航栏中的测试链接，响应应该是异步的并且只刷新我布局的内容。

有任何想法吗？想法？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:46:25.507

在您的操作方法中，您可以拥有

```
 if (Request.IsAjaxRequest())
      return PartialView("_somePartialView");
 else
      return PartialView("_someOtherPartialView"); 
```

# c++ - 将 Qimage 转换为 Mat opencv 时出错

> ID：11903587
> 
> 赞同：0
> 
> 时间：2012-08-10T14:17:29.450
> 
> 标签：c++, qt, opencv

当我将 QImage 转换为 cv::Mat 时，Mat 变得模糊。

这是转换它的代码：

```
QPixmap pixmap(*ui->imgLabel->pixmap());
QImage image = pixmap.toImage();

image.convertToFormat(QImage::Format_RGB888);

Mat matImage = Mat(image.height(), image.width(), CV_8UC3, image.scanLine(0)); 
```

这是放大后的原始图像：

![](../Images/db5f5a9ab1340fb51b41b7eebb4bb27e.png)

这是创建的图像：

![](../Images/09deae845153316897e3713c998e5d0d.png)

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:37:17.040

我不知道 QT，但是您是否尝试过来自 WEB 的现成解决方案？例如，从[这个链接](http://opencv-users.1802565.n2.nabble.com/QImage-to-OpenCV-td5121181.html)我发现了另一种转换方法：

```
Mat qimage2mat(const QImage& qimage) {
    cv::Mat mat = cv::Mat(qimage.height(), qimage.width(), CV_8UC4, (uchar*)qimage.bits(), qimage.bytesPerLine());
    cv::Mat mat2 = cv::Mat(mat.rows, mat.cols, CV_8UC3 );
    int from_to[] = { 0,0,  1,1,  2,2 };
    cv::mixChannels( &mat, 1, &mat2, 1, from_to, 3 );
    return mat2;
}; 
```

# perl - 如果我对它进行本地化，我的 `$SIG{WINCH}` 会保存吗？

> ID：11903588
> 
> 赞同：0
> 
> 时间：2012-08-10T14:17:32.893
> 
> 标签：perl, signals, localized

前段时间我遇到了问题，`$SIG{WINCH}`因为我加载了两个在模块中使用`$SIG{WINCH}` [$SIG{WINCH} 时都使用问题的模块](https://stackoverflow.com/questions/9278201/problems-with-sigwinch-when-using-it-in-a-module)。现在我试图重建这个案例，但这次我把一个模块`$SIG{WINCH}`放在一个子程序中。

```
use warnings;
use strict;
package My_Package;
use Exporter 'import';
our @EXPORT = qw(choose);

sub choose {
    # ...
    my $size_changed;
    local $SIG{WINCH} = sub { $size_changed = 1; }; # edit: added "local"
    while ( 1 ) {
        my $c = getch();
        if ( $size_changed ) {
            write_screen();
            $size_changed = 0;
            next;
        }
        # ...
    }
} 
```

现在看起来它正在工作。如果我`$SIG{WINCH}`以这种方式进行本地化，我会保存还是在重建时忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:45:43.607

这是有效的，因为您的代码在设置信号处理程序后立即进入`while`循环，因此没有其他代码可以运行（或设置新的处理程序）。当 while 循环退出时，您的处理程序未设置，旧的处理程序会自动恢复，这要归功于`local`.

对于更有弹性的代码，我会检查是否存在现有的信号处理程序，然后调用它。否则任何其他具有 SIGWINCH 处理程序的模块都将被破坏。例如

```
my $orig_sigwinch = $SIG{WINCH};
local $SIG{WINCH} = sub {
    $orig_sigwinch->() if $orig_sigwinch && ref $orig_sigwinch eq 'CODE';
    $size_changed = 1;
} 
```

请注意，这不考虑`$orig_sigwinch`函数名称而不是代码引用的情况。

# weblogic - 如何创建新的 WebLogic 托管服务器并将其“动态”添加到集群中？

> ID：11903589
> 
> 赞同：0
> 
> 时间：2012-08-10T14:17:33.237
> 
> 标签：weblogic, weblogic11g

我希望能够在集群中“启动”额外的 WebLogic 11g 托管服务器以添加额外的水平实例。

用例是我从一个具有 X 实例的 WebLogic 集群开始，我想动态添加一个额外的实例，即使用脚本并使用实时系统（没有任何停机时间）。

我可以使用什么（例如 WLST？）来创建额外的托管服务器，对其进行配置，例如将其添加到域中？有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:20:15.547

这是一个[例子](http://docs.oracle.com/cd/E12839_01/web.1111/e13715/config_wls.htm#i1027812)。你可以做一个 svr.setCluster 和 svr.setMachine

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T20:51:24.623

以下是 WLST 的示例：

创造：

```
connect('username','password')
edit()
startEdit()
cmo.createServer('managed1')
cd('Servers/managed1') 
```

将服务器添加到集群（在`cd`上面添加到服务器之后）

```
cmo.setListenPort(ListenPort)
cmo.setCluster("MyCluster")
cmo.setMachine(Machinename) 
```

在 WLST 中到达/创建集群的工作方式类似：

```
cd('/')
cmo.createCluster('MyCluster')
cd('/Clusters/MyCluster')
cmo.setClusterAddress('myhost:port,myhost2:port')
cmo.setClusterMessagingMode('unicast') 
```

# iphone - 在 xcode 中为不同的构建配置维护不同的 URL

> ID：11903592
> 
> 赞同：3
> 
> 时间：2012-08-10T14:17:45.623
> 
> 标签：iphone, ios, xcode, xcodebuild

我为我的 xcode 项目创建了四种不同的构建配置，它们是 QA、STAGING< UAT<& PRODUCTION。我为我创建的一个构建使用了 4 个不同的 url。

现在我的问题是 xcode 4 非常擅长检测 DEBUG 模式，因为已经有预定义的宏可用，但是如何检测我的自定义构建，以便我可以为不同的构建配置传递不同的 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:21:18.293

在这些构建配置中的每一个中，进入构建设置并添加 #define THIS_IS_QA=1 然后在您的代码中对其进行测试并像使用 DEBUG 宏一样使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T17:49:05.483

预处理器宏路由工作正常并且可以快速实现。但它不能很好地扩展，因为您最终会得到每个变量的副本。我发现效果最好的路线是执行以下操作。

1.  在项目或目标构建设置中将配置定义为用户定义的设置。
    *   这样做允许为每个构建配置指定不同的值（例如，调试或发布，甚至是自定义的）
2.  在项目 plist 文件中创建一个信息属性。
    *   这允许通过 plist 访问构建设置。
3.  编写一次代码以从 plist 文件中加载值。

例子：

在项目中创建一个名为“BASE_API_URL”的用户定义设置，并将调试配置设置为“ [http://www.test.example.com](http://www.test.example.com) ”，将发布配置设置为“ [http://www.example.com](http://www.example.com) ”。

然后在 plist 中创建一个新的信息属性，其键为“BaseAPIUrl”，值为“$(BASE_API_URL)”

最后在定义基本 url 的应用程序委托中添加以下代码：

```
let baseUrl: NSString = NSBundle.mainBundle().infoDictionary?["BaseAPIUrl"]! as NSString 
```

# forms - 没有泛型支持的嵌套对象：解决方法

> ID：11903593
> 
> 赞同：2
> 
> 时间：2012-08-10T14:17:46.423
> 
> 标签：forms, scala, generics, playframework

由于 Play 模板层缺乏泛型支持，遇到了 catch 22 的情况。

我有几个购物车屏幕都需要一个用户和一个付款+可选的自定义字段。

```
case class Conference(
  user: User,
  payment: Payment
  ... custom fields here
) 
```

因此，我没有按照购物车模型复制所有用户和支付表单字段，而是按照上面的方法进行合并并实现嵌套表单。

现在，问题出现在模板层，到目前为止还没有泛型支持。

父/容器表单引入嵌套的子表单，如下所示：

```
@(_form: Form[Conference])

@user.nested( UserForm.form.fill(_form.get.user) )
@payment.nested( PaymentForm.form.fill(_form.get.payment) ) 
```

然后子用户表单如下所示：

```
@(_form: Form[User])

@inputText(_form("user.firstName"), '_label-> "First Name*", 'class-> "required")
@inputText(_form("user.lastName"), '_label-> "Last Name*", 'class-> "required")
... 
```

和用户模型：

```
case class User(firstName: String, lastName: String ...) 
```

当用户模型中没有用户属性时，如何访问“user.firstName”、“user.lastName”等？Play Form 应用方法是：

```
def apply(key: String): Field = Field(
    this,
    key,
    constraints.get(key).getOrElse(Nil),
    formats.get(key),
    errors.collect { case e if e.key == key => e },
    data.get(key)) 
```

基本上它会寻找`data.user.firstName`显然不起作用的财产。

我考虑过将用户属性添加到用户模型：

```
case class User(firstName: String, lastName: String ...) {
  val user: User
} 
```

但不确定这是否会起作用和/或对案例类伴随对象应用/取消应用造成严重破坏。

无论如何，鉴于缺乏泛型，什么是解决问题的可行方案？

如果支持泛型，我们可以传入一个上限，一切都会变得美好：

```
trait CartOrder {
  user: User,
  payment: Payment
}
case class Conference(...) extends CartOrder 
```

然后嵌套的用户表单被传递一个包含用户属性的实例，我们很好

```
@[T <: CartOrder](_form: Form[T])
@inputText(_form("user.firstName"), '_label-> "First Name*", 'class-> "required")
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:19:37.280

如果类型安全不是问题（`Form`s 并不是所有类型安全的开始），您可以将`Form[_]`其用作嵌套模板的参数类型。

* * *

如果您确实想要类型安全，一种选择是为 Form 创建一个协变的包装类，并使用它来代替 Form。一种实现是：

```
package views.html

import play.api.data._
import play.api.libs.json.JsValue

object FormView {
    implicit def formToFormView[A, T >: A](form: Form[A]): FormView[T] = new FormView[T] {
        type F = A
        def realForm = form
    }
}

trait FormView[+T] {
    type F <: T

    def realForm: Form[F]

    def apply(key: String): Field = realForm(key)

    def constraints : Map[String, Seq[(String, Seq[Any])]] = realForm.constraints

    def data: Map[String, String] = realForm.data

    def error(key: String): Option[FormError] = realForm.error(key)

    def errors(key: String): Seq[FormError] = realForm.errors(key)

    def errors: Seq[FormError] = realForm.errors

    def errorsAsJson: JsValue = realForm.errorsAsJson

    def get: T = realForm.get

    def formats: Map[String, (String, Seq[Any])] = realForm.formats

    def globalError: Option[FormError] = realForm.globalError

    def globalErrors: Seq[FormError] = realForm.globalErrors

    def hasErrors: Boolean = realForm.hasErrors

    def hasGlobalErrors: Boolean = realForm.hasGlobalErrors

    override def hashCode: Int = realForm.hashCode

    def mapping: Mapping[F] = realForm.mapping

    def value: Option[T] = realForm.value
} 
```

现在而不是您的模板

```
@(_form: Form[CartOrder]) 
```

由于不变性而不起作用，您可以使用

```
@(_form: FormView[CartOrder]) 
```

你可以简单地传入like子类型的任何`Form[T]`地方`T``CartOrder`

```
@user.nested(_form) 
```

隐式将处理从 Form 到 FormView 的转换

可以在以下位置找到完整的示例：[https ://github.com/thatsmydoing/formtest](https://github.com/thatsmydoing/formtest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:23:00.010

好的，dilly-o 如下（如果你有更好的方法，请加入）：

play.api.data.Form[T] 是不变的，所以没有骰子将会议的超类型（即 CartOrder）传递给用户表单。换句话说，这会爆炸：

```
// user.scala.html
@(_form: Form[CartOrder]) 
```

基本上，您必须传入一个本身是 Form 可映射的实例。

为了解决模板层 fun house，我实现了以下 hack：

```
case class CartModel(user: User, payment: Payment) 
```

**EDIT**
变得更好，在`bind`下面的 CartForm 映射器中添加了一个帮助器，这使得视图中的语法更清晰

```
object CartForm {
  import play.api.data.Forms._  
  val form = 
    Form( mapping(
      'user -> UserForm.mapper,
      'payment -> PaymentForm.mapper )(CartModel.apply)(CartModel.unapply) )

  // hey, generics!
  def bind[T <: Form[_ <: CartContract]](t: T) =
    t.value map{x=> form.fill( CartModel(x.user, x.payment) )} getOrElse form
} 
```

然后在会议父表单中，拉入用户表单字段，如下所示：

```
@user.nested( CartForm.bind(_form) ) 
```

然后用户表单会收到：

```
@(_form: Form[CartModel]) 
```

一般来说，嵌套形式消除了很多样板，因此总体而言，进步。不依赖中间表单映射器会很棒，但这是我现在能想到的最好的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T00:11:35.840

猜你想要

```
@(_form: Form[_ <: CartOrder]) 
```

而不是建议

```
@[T <: CartOrder](_form: Form[T]) 
```

# f# - 有开源的 F# Tree 数据结构吗？

> ID：11903595
> 
> 赞同：4
> 
> 时间：2012-08-10T14:17:48.733
> 
> 标签：f#, tree, immutability

我需要一棵像这样的简单树，带有所有的固定装置-

```
type 'a Tree =
    | Leaf of 'a
    | Branch of 'a Tree list 
```

必须有类似的东西已经有了很好的添加、删除、映射、过滤、折叠功能等，但我找不到它。我什至没有从 OCaml 中看到我可以移植的一个……我想如果有必要我可以自己写一个。

**编辑：改变树的结构更加明显。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:07:14.350

我认为困难在于`add Tree Tree`没有人会使用一棵简单的树（带有 say ）。如果不指定更具体的树类型，您将不得不通过扫描、降低性能来实现所有这些方法。

此外，不可变树的就地更新非常昂贵，因为在典型设计中共享数据结构很少。

最后，如果您允许任何类型的回溯，则每次都必须完全重写不可变树。

# python - Python - 从 Tkinter 回调返回

> ID：11903596
> 
> 赞同：5
> 
> 时间：2012-08-10T14:17:57.060
> 
> 标签：python, callback, tkinter, return

如何从作为 Tkinter 回调执行的函数中获取返回的对象？

```
import Tkinter as Tk
from functools import partial

def square(x):
    return x*x

root = Tk.Tk()
var = Tk.IntVar(root, value=0) #the variable the gets passed to the class call
menu = Tk.OptionMenu(root, var, *[0,1,2,3,4,5]) #a drop-down list to choose a value for the variable
menu.pack()
button = Tk.Button(root, text='click', command = partial(square,var.get())) #a button that calls the class
button.pack()
root.mainloop() 
```

显然这是一个简化的例子。实际上，按钮调用的函数将返回对象，我希望将其附加到对象列表中，这些对象将保存在主要 Python 命名空间中以进行进一步操作。

无论如何，在这里，用户可以使用 GUI 为函数选择一个参数，然后按下一个按钮来执行该函数。然而，函数的返回值似乎注定要丢失在以太中，因为回调不会接受返回。`global`如果不使用丑陋的定义，这可以克服`square(x)`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T18:55:47.307

从回调“返回”值的概念在事件驱动程序的上下文中没有意义。回调作为事件的结果被调用，因此无处可返回值。

作为一般的经验法则，你的回调应该总是调用一个函数，而不是使用`functools.partial`or `lambda`。这两个在需要时很好，但如果您使用面向对象的编码风格，它们通常是不必要的，并且导致代码比需要的更难以维护。

例如：

```
def compute():
    value = var.get()
    result = square(value)
    list_of_results.append(result)

button = Tk.Button(root, text='click', command = compute)
... 
```

如果您将应用程序创建为一个类，这将变得更加容易，并且您可以避免使用全局变量：

```
class App(...):
    ...
    def compute():
        ...
        result = self.square(self.var.get())
        self.results.append(result) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-03T14:06:26.460

很抱歉迟到了 6 年，但最近我想出了一个很好的方法来做到这一点，而不会让你的代码变得混乱和难以维护。这几乎就是[DaveTheScientist](https://stackoverflow.com/users/1301640/davethescientist)所说的，但我只是想稍微扩展一下。通常，在 Tkinter 中，如果你想让一个按钮调用一个函数，你可以执行以下操作：

```
exampleButton = Button(root, text = 'Example', command = someFunc) 
```

`someFunc`只要按下按钮，这将简单地调用。但是，如果此函数接受参数，则需要使用 lambda 并执行以下操作：

```
exampleButton = Button(root, text = 'Example', command = lambda: someFunc(arg1, arg2)) 
```

上面的代码行将运行`someFunc`并使用变量`arg1`和`arg2`作为该函数的参数。现在，你可以在一个程序中做的是，很多时候，你需要按钮运行的函数来返回值，就是创建一个由每个按钮调用的新函数。

此函数将您希望按钮运行的函数作为第一个参数，然后是该函数的参数。

```
def buttonpress(function, *args):
    value = function(*args) 
```

然后，当您创建按钮时，您可以：

```
exampleButton = Button(root, text = 'Example', command = lambda: buttonpress( someFunc, arg1, arg2 )) 
```

这将运行给定的函数（在本例中为`someFunc`）并将返回值存储在`value`变量中。它还有一个优点，即您可以为按钮运行的功能使用任意数量的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:02:01.737

只需创建一个由您的按钮调用的实际函数，而不是像那样将其全部内联。

`button=Tk.Button(parent, text='click', command=someFxn)`

`def someFxn(): your code`

然后在你的函数中调用 var.get()，进行计算，然后对值做一些事情。

# ms-access - 访问——查询以返回表 2 中表 1 中每个唯一记录的所有唯一记录？

> ID：11903600
> 
> 赞同：1
> 
> 时间：2012-08-10T14:18:12.040
> 
> 标签：ms-access, ms-access-2007, records

长期聆听者，第一次来电者...

在 Access 2007 中，我有一个名为 Account Name 的列和一个名为 Client Name 的列，它们具有相同的信息，尽管有时措辞不同（例如 United Programmers 在一个，United Programmers, Inc. 在另一个），我需要返回每个唯一帐户名称的每个合格的唯一客户名称。这些表分别以账户名称和客户名称为键，其中的其他信息是数字。

由于我试图大致匹配两者，因此我有一个参数（名称），并且返回帐户名称和客户名称的标准是`LIKE "*"&[Name]&"*"` ，所以我只会返回相似的名称。但是，由于用户可以输入“程序员”作为名称，我需要结果表显示如下：

```
United Programmers      The United Programmers, Inc.
.                       Programmers Coalition, LLC
.                       Programmers Guild
Programmers Coalition   The United Programmers, Inc.
.                       Programmers Coalition, LLC
.                       Programmers Guild
Programmers Guild       The United Programmers, Inc.
.                       Programmers Coalition, LLC
.                       Programmers Guild 
```

我通常不会只通过查询来执行此操作，甚至不一定在 Access 中执行此操作，但这是更大过程的一小部分。因此，如果可能的话，我需要使用 Access 2007 中的查询生成器来完成所有操作，而不是手动编写 SQL 代码，一旦我交出它，其他人就必须维护它。

我知道这就像泥浆一样清晰，但我不确定如何使它更清晰。我很乐意回答您对此提出的任何问题。

**回答：**事实证明我还不能回答我自己的问题，但这是我几分钟前发现的：

我创建了一个查询，该查询使用从主表中导入客户和帐户名称，`LIKE "*"&[Name]&"*"`并允许它以任何想要的方式导入数据。然后，我创建了另一个查询，用第一个查询中的数据填充帐户名称和客户名称，但在此查询的属性表下，我将“唯一值”更改为“是”。

它现在吐出一个非常漂亮的表格，其中列出了每个唯一帐户名称的每个唯一客户名称，所有这些都是根据它们与 [Name] 参数的相似性返回的。

我确实必须将我的所有数据导入一个新的 Access DB 以清理我的实验造成的一些损害，但我终于到达了某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:05:13.527

*我创建了一个查询，该查询使用 LIKE " "&[Name]&"* "从主表中导入了客户和帐户名称，并允许它以任何想要的方式导入数据。然后，我创建了另一个查询，用第一个查询中的数据填充帐户名称和客户名称，但在此查询的属性表下，我将“唯一值”更改为“是”。

它现在吐出一个非常漂亮的表格，其中列出了每个唯一帐户名称的每个唯一客户名称，所有这些都是根据它们与 [Name] 参数的相似性返回的。

我确实必须将我的所有数据导入一个新的 Access DB 以清理我的实验造成的一些损害，但我终于到达了某个地方。

# javascript - 如何在 extjs4 中更改选项卡面板标题（标题）和面板标题的样式

> ID：11903603
> 
> 赞同：3
> 
> 时间：2012-08-10T14:18:22.800
> 
> 标签：javascript, extjs4.1

我想知道是否有任何 css 类我可以覆盖，以便我可以更改所有选项卡面板标题和面板标题样式？？？如果可以的话，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:52:24.007

对于面板标题：要更改文本的样式，请专门使用类：x-panel-header-text x-panel-header-text-default 要更改背景，您需要修改：x-panel-header-default

对于标签标题，您需要修改： 对于文本：x-tab-inner 对于背景，有很多类会影响背景的显示方式： x-tab x-box-item x-tab-default x-noicon x -tab-noicon x-tab-default-noicon x-top x-tab-top x-tab-default-top x-active x-tab-active x-tab-default-active x-top-active x-tab-顶部活动 x-tab-default-top-active

由于 CSS 计算元素样式的方式，如果您对 CSS 不是很擅长，您可能需要在更改的每个属性中使用 !important，否则如果您知道如何更好地使用 CSS，请使用谷歌浏览器检查元素和找出 Extjs 以更专业的方式使用的类的 CSS 层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:30:52.347

对于标签标题中的文本样式：

选择“a.ajax__tab_tab”向您的 CSS 文件添加规则并从那里设置颜色/其他属性。

这将影响 TabContainer 中每个选项卡标题中的文本。

例子：

```
a.ajax__tab_tab {
color: #00898D;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T00:29:34.783

你不直接使用css

您应该只更改 sass 变量，然后 sencha cmd 会将它们转换为上述值。每个组件的 SASS 变量都在菜单的文档中。

# jquery - 通过ajax加载的内联脚本

> ID：11903611
> 
> 赞同：0
> 
> 时间：2012-08-10T14:18:57.763
> 
> 标签：jquery, ajax, inline, product

我正在使用 360 产品 spin jquery 插件： [链接到 360-javascriptviewer](http://www.360-javascriptviewer.com/learning-centre/free-version.html)

这是使用 html 底部的以下内联脚本激活的，并且工作正常。

```
function test () {
    mloaderx = new loader(
    {
    tag:'product_image_x',
    frames:36,
    zoom:false
    });
}
test(); 
```

我遇到的问题是当这个内容通过 ajax 加载到另一个页面时。内联脚本没有通过，即使我也将它包含在其他页面上。

我在下面包含了整个代码，但它唯一关心的部分是 ajax 调用。

```
// NOTES: This script will load content into a placeholder div with a nice scroll down effect.

jQuery(document).ready(function () {

    jQuery(".loadContent").click(function (event) {

        // show loading div
        showLoading();
        var clickedElement = jQuery(this);

        // stop initial jump to anchor.
        event.preventDefault();

        var contentURL = clickedElement.attr("href");

        jQuery.ajax({
            url: contentURL + "?" + new Date().toUTCString(),
            dataType: "html",
            success: function (strData) {
                populateContent(strData);
            },
            complete: function () {
                hideLoading();
                scrollToContent();

            }

        });
    });
});

function showLoading() {
    jQuery("#loading").fadeIn(100);
    jQuery("#loaded_content").slideUp(800);
}

function hideLoading() {
    jQuery("#loading").fadeOut(100);
    //jQuery(".to_top").show();
}

function populateContent(strData) {
    jQuery("#loaded_content").html(jQuery(strData).find("#loadarea").html());
    $('.media_main_content .article p:first').wrapFirstLetter();
}

function scrollToContent() {
    $("#subnav_content").toggle(800, function() {
        jQuery("#loaded_content").slideDown(800);
        jQuery('html,body').animate({ scrollTop: jQuery(".ca_nav_holder").offset().top}, 800, function() {
            jQuery("#toggle_subnav span").fadeTo(700, 0.1).fadeTo(700, 1);
        });
    });
} 
```

有没有人可以提供任何建议？两天来，我一直在用头撞砖头，试图弄清楚。

# java - jersey java客户端返回HTTP错误代码：406

> ID：11903613
> 
> 赞同：3
> 
> 时间：2012-08-10T14:19:12.587
> 
> 标签：java, rest, jersey

我正在对 Teamcity URI 进行 REST 调用，以获取 lastSuccessful 内部版本号，但得到 406。如果我在 Chrome 的 REST 控制台中使用相同的 URI，我会得到正确的字符串（这是最新的内部版本号

```
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.filter.HTTPBasicAuthFilter;

public class LastSuccessBuildNum {

    public static void main(String[] args) {

        try {

            Client client = Client.create();
            // client basic auth demonstration 
            client.addFilter(new HTTPBasicAuthFilter("username", "password"));

            WebResource webResource = client
                    .resource("http://localteamcity.com/teamcity/app/rest/buildTypes/id:bt26/builds/status:SUCCESS/number");
            ClientResponse response = webResource.accept("application/json")
                    .get(ClientResponse.class);

            if (response.getStatus() != 200) {
                throw new RuntimeException("Failed : HTTP error code : "
                        + response.getStatus());
            }

            String output = response.getEntity(String.class);

            System.out.println("Output from Server .... \n");
            System.out.println(output);
        } catch (Exception e) {

            e.printStackTrace();

        }

    }

} 
```

标准输出：

```
java.lang.RuntimeException: Failed : HTTP error code : 406
    at LastSuccessBuildNum.main(LastSuccessBuildNum.java:22) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:21:31.553

在 Chrome REST Client 中检查传输的 MIME 类型，可能不是 json。406表示服务器没有客户端接受的MIME类型：http: [//www.checkupdown.com/status/E406.html](http://www.checkupdown.com/status/E406.html)

您使用 jersey 客户端而不是 Apache Http 组件是否有特定原因？

# drupal - 如何在节点提交之前提取节点标题和节点内容以进行 ajax 操作？

> ID：11903620
> 
> 赞同：1
> 
> 时间：2012-08-10T14:19:43.333
> 
> 标签：drupal, drupal-7

在提交节点之前，我需要通过 ajax 执行一些操作。那么，如何捕获用户填写的节点内容和标题并将其传递给我的 ajax 回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:26:01.333

好的，这是代码-

因此，为此，您需要将“hello”指定为要为其设置 ajax 属性的元素的回调函数。例如，如果您想通过按下按钮来调用它-

```
$form['test'] = array(
        '#type' => 'button',
        '#value' => t("Testing"),
        '#ajax' => array(
            'callback' => 'hello_ajax',
            'wrapper' => 'newtable_div',
            'effect' => 'slide',
            ),
    ); 
```

那么你的回调函数应该是-

```
function hello_ajax($form, $form_state) {
  $output = '';
  $values = $form_state['values'];
  $title = $values['title'];
  $body = '';
  foreach ($values['body'][$values['language']] as $info) {
    $body .= $info['value'];
  }

  $content = check_plain($title) . ' ' . $body; 
```

}

$content 变量现在保存节点标题以及节点内容，您可以将其用于进一步操作。干杯！！:)

# c - 如何在 C 中模拟强类型枚举？

> ID：11903625
> 
> 赞同：19
> 
> 时间：2012-08-10T14:19:57.343
> 
> 标签：c, enums

在 C++03 中，可以通过将强类型枚举放入类（或命名空间）中来模拟[强类型枚举：](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations)

```
struct MyEnum
{
  enum enumName
  {
    VALUE_1 = 1,
    VALUE_2,
  };
}; 
```

并使用它：

```
MyEnum::enumName v = MyEnum::VALUE_1; 
```

是否可以在 C 中做类似的事情？如果是，如何？

* * *

我试过这样，但当然这不起作用：

```
struct A
{
  enum aa
  {
    V1 = 5
  };
};

int main()
{
  A::aa a1 = A::V1;
  enum A::aa a2 = A::V1;
  struct A::aa a3 = A::V1;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:24:55.410

这是我的解决方案。与@Eric 的设计相比有一些优势：

*   支持相等测试（例如`A_VALUE_0 == value`）
*   不依赖 C99 的复合文字
*   可以强制转换为枚举分配不正确的值。

缺点：

*   标志不起作用（例如`A_VALUE_0 | A_VALUE_1`）
*   不能被`switch`'d
*   在测试相等性时可能会使 IDE 混淆错误行的位置（例如`A_VALUE_0 == B_VALUE_1`）

笔记：

*   永远不要取消引用这种类型的指针。会比兰博基尼更快地导致崩溃

这是实现（用`-Werror`&编译`-pedantic`）：

```
typedef struct A { char empty[1]; } *A; // we use 'empty' so that we don't get a warning that empty structs are a GNU extension
#define A_VALUE_0 ((A) 0x1)
#define A_VALUE_1 ((A) 0x2)
#define A_VALUE_2 ((A) 0x4)

typedef struct B { char empty[1]; } *B;

#define B_VALUE_0 ((B) 0x0)
#define B_VALUE_1 ((B) 0x1)
#define B_VALUE_2 ((B) 0x2)

int main()
{
    A a = A_VALUE_0;

    int equal = (a == A_VALUE_1); // works!
    int euqal = (a == B_VALUE_1) // doesn't work

    A flags = A_VALUE_0 | A_VALUE_1; // doesn't work!

    switch (a) { // doesn't work
        case A_VALUE_0:
            puts("value 0");
            break;
        case A_VALUE_1:
            puts("value 1");
            break;
        case A_VALUE_2:
            puts("value 2");
            break;
        default:
            puts("unknown value");
            break;
    } // doesn't work

    // casting works for assignment:
    A b = (A) (B_VALUE_2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:49:12.893

你可以这样做：

```
// Declare A to use for an enumeration, and declare some values for it.
typedef struct { int i; } A;
#define A0  ((A) { 0 })
#define A1  ((A) { 1 })

// Declare B to use for an enumeration, and declare some values for it.
typedef struct { int i; } B;
#define B0  ((B) { 0 })
#define B1  ((B) { 1 })

void foo(void)
{
    // Initialize A.
    A a = A0;

    // Assign to A.
    a = A1;

    // Assign a value from B to A.
    a = B0; // Gets an error.
} 
```

这会给您一些输入，但这可能会很麻烦，具体取决于您要对枚举及其值执行的其他操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T15:54:52.077

由于 C 不提供命名空间，因此您可以使用前缀。

```
enum MyEnum {
    MyEnumA = 1,
    MyEnumB,
    MyEnumC
};

enum OtherEnum {
    OtherEnumA = 1,
    OtherEnumB
}; 
```

然后，为了简化变量声明，您可以为枚举声明类型，如下所示：

```
typedef enum MyEnum MyEnum;
typedef enum OtherEnum OtherEnum; 
```

最后，如果您不想允许隐式转换`OtherEnumB`类型`MyEnum`，Clang 提供了`-Wenum-conversion`标志（不幸的是，我认为 GCC 中没有类似的标志）。

```
/tmp/test.c:24:20: warning: implicit conversion from enumeration type 'enum OtherEnum' to different enumeration type 'MyEnum' (aka 'enum MyEnum') [-Wenum-conversion]
    MyEnum value = OtherEnumB;
           ~~~~~   ^~~~~~~~~~
1 warning generated. 
```

这样做的好处是简单、易于理解，并且可以很好地与您的（至少我的）IDE 的自动完成功能配合使用。

# php - 大于或 = 后值

> ID：11903628
> 
> 赞同：0
> 
> 时间：2012-08-10T14:20:05.670
> 
> 标签：php

大家好，我有一个帖子值，我正在检查它是否已发布，它至少有 4 个数字（数字），这很完美。

```
if (isset($_POST['year']) && 
      !preg_match('/([0-9]{4})/i', stripslashes(trim($_POST['year']))) ) { 
```

现在我想检查该值是否更大或=一个变量，并且不确定如何实现我需要的

我尝试了以下没有运气

```
$yearOff = date("Y")-150;
echo $yearOff;

    if (isset($_POST['year']) && 
            !preg_match('/([0-9]{4})/i', stripslashes(trim($_POST['year']))) 
            && $_POST['year'] > $yearOff ) {

                   $ageerrors[] = '<span class="error">
                                      You forgot enter your birth YEAR</span>';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:23:21.803

而不是`&&`你需要一个`||`OR 条件来在三种可能的无效状态之间切换（空，不是 4+ 位，或者`<= $yearOff`：

```
if (!isset($_POST['year'])
   // Lose the stripslashes()...
   || !preg_match('/([0-9]{4})/i',trim($_POST['year']))
   || $_POST['year'] > $yearOff 
   ) {
    // Invalid...
} 
```

注意：从您的描述中不清楚您*希望*该值是`>= $yearOff`还是希望它是`< $yearOff`。换句话说，上面的代码正在测试无效状态。使用适用于无效状态的任何运算符。

注意 2：要测试正则表达式*中至少 4 个连续数字*，更好的模式是：

```
/\d{4,}/
// If it must be *only* digits and no other characters, anchor with ^$
/^\d{4,}$/ 
```

不需要`()`捕获组的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:24:13.770

```
$yearOff = date("Y")-150;
echo $yearOff;

$input = @$_POST['year'];

if (!$input || strlen($input) !== 4 || $input < $yearoff) {
    ### MEEEP, ERROR ###
} 
```

解释：

输入已设置（不是`null`为假），然后它的字符串长度必须为四，最后它的数值必须高于或等于`$yearOff`。

我也将输入的值分配给了它自己的变量，因为你只需要将它从`$_POST`.

由于所有这些条件都被否定，我使用了 or`||`运算符。自然地，相同的可以表示为非否定和用 and：

```
if ($input && strlen($input) === 4 && $input >= $yearoff) {
    ### THIS IS CALL OKAY ###
} 
```

为了更好地调试它，下一步是将有效性分配给一个变量：

```
$inputValid = $input && strlen($input) === 4 && $input >= $yearoff;
if (false === $inputValid) [
    ### MEEP, ERROR ####
} 
```

希望这会有所帮助。

# visual-studio-2010 - 如何使用 FireBreath 创建 ActiveX 包装器？

> ID：11903631
> 
> 赞同：0
> 
> 时间：2012-08-10T14:20:36.840
> 
> 标签：visual-studio-2010, activex, firebreath

我浏览了 FireBreath (FB) 网站上的 Windows 和 Mac 视频教程，浏览了所有文档，甚至看到了一个人提供的 ActiveX 示例。

已经整整一个星期了，但我仍然无法理解如何在 FB 中创建一个新项目。网站上唯一解释的是如何编译 FB sln，其中 PluginTest 示例已经编码。即使对于 ActiveX 示例，也只给出了代码。没有解释他们是如何创建项目的。

那么如何在 FB 中创建一个新项目呢？我应该只使用现有的 FB sln 文件并在其中创建一个新的空项目吗？我怎么知道我应该在项目中添加哪些类？如何编辑 cmakeLists.txt 以识别我的项目？运行 prep2010.cmd 如何使我新添加的项目编译？

如果我需要为我的 ActiveX 创建一个包装器，我该如何在 Windows 中创建该项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:02:50.497

如果您已经通过 windows 视频教程并且没有看到如何创建一个新项目，那么您显然没有注意。[windows](http://firebreath.org/display/documentation/Windows+Video+Tutorial)和[mac](http://firebreath.org/display/documentation/Mac+Video+Tutorial)上的第一个视频教程告诉你如何使用 fbgen 创建一个新项目。

要获取文本说明，您可以很容易地找到它们：

访问[http://firebreath.org](http://firebreath.org)并点击“[开始](http://firebreath.org/display/documentation/Getting+Started)”。向下滚动到“[创建新的插件项目](http://firebreath.org/display/documentation/Creating+a+New+Plugin+Project)”并单击链接。

任何一种方法都将引导您完成以下步骤：

1）安装cmake、visual studio和python（如果你没有） 2）获取FireBreath（视频教程建议使用git；我制作了教程，所以你可以猜到我建议的方法）。3) 使用 python 运行 fbgen.py 并按照步骤操作。

恭喜！您现在已经创建了一个新的插件项目！

要[构建它](http://firebreath.org/display/documentation/Building+FireBreath+Plugins)，您需要运行适合您平台的准备脚本，然后在 (visual studio | xcode) 中打开 build/FireBreath.(sln | xcodeproj) 文件。请注意，这取决于您使用的是[Windows](http://firebreath.org/display/documentation/Building+on+Windows)还是[Mac](http://firebreath.org/display/documentation/Building+on+Mac+OS+X)。

[prep 脚本](http://firebreath.org/display/documentation/Prep+Scripts)（例如 prep2010.cmd）不会使您的项目编译；相反，它使用 cmake 为您的计算机生成该项目的项目文件，然后可用于构建项目，如上面链接的页面中所述。您不应该直接修改构建目录中的任何内容，而是应该修改项目目录中的 CMakeLists.txt 文件，或者如果您需要进行特定于平台的更改，您可以修改 Win/projectDef.cmake 和 Mac/projectDef.cmake .

FireBreath.org 是一个 wiki，所以请随时帮助我们使这些东西更容易找到；正如您从链接中看到的那样，所有信息都在那里。对我来说，这似乎很容易找到，所以显然我不是一个试图解决问题的好人（因为我看不到它）。

至于制作 ActiveX 包装器，有一个[这样做的例子，](http://github.com/firebreath/FBAXExample)但这并不是真正“容易做”的事情。FireBreath 绝不会试图让这件事变得简单——这不是 FireBreath 的目的。FireBreath 只是一个用于创建浏览器插件的框架；如果你想让你的插件充当一个 activex 包装器，你必须自己实现所有的 activex 来包含你的控件。

希望这些信息足以让您入门。如果您感到困惑，请阅读这些链接。如果您仍然感到困惑，请再次阅读它们 - 所有这些信息都在那里。如果您仍然感到困惑，请在[IRC 的 FireBreath 聊天室中](http://npapi.com/chat)询问，我会尽力帮助您解决问题。

# java - 将长/大字符串作为参数传递给 Java 应用程序？

> ID：11903635
> 
> 赞同：0
> 
> 时间：2012-08-10T14:20:49.743
> 
> 标签：java, php, string

我正在尝试将一个大/长字符串（从磁盘读取的 PDF 二进制文件）传递到 Java 应用程序中，但到目前为止收效甚微。当我从本地磁盘读取文件时，该应用程序可以工作，所以我知道问题与我导入数据的方式有关。大致这就是我正在查看的内容：

我正在阅读，在 PHP 中操作 pdf 并使用 exec(); 触摸 Java 应用程序，这就是我使用 Java 的地方：

作品：

```
File input = new File("C:\\Users\\Jack\\Downloads\\col_terror.pdf");
document = PDDocument.load(input); 
```

不工作：PHP：

```
exec("/path/to/jar/java -jar JavaAppHere.jar $pdf_string",$ouput); 
```

爪哇：

```
public static void main(String[] args) throws Exception {
...
document = PDDocument.load( args[0] );
...
} 
```

我觉得这是一件很简单的事情，我不理解将字符串作为 args 传递，尽管自从我涉足 Java 领域已经有几年了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:52:38.713

请阅读 PDDocument 的 Javadoc。如果 PDDocument 引用[PDDocument](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/PDDocument.html%5d)，您可以看到您正在传递数据，而[PDDocument.load(java.lang.String)](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/PDDocument.html#load%28java.lang.String%29)需要文件名。您似乎也没有使用 escapeshellarg() 编码 $pdf_string

由于在传递二进制数据作为 shell 参数时涉及的变量太多，我建议不要这样做。最简单的解决方案是将 PDF 写入临时文件并将文件名传递给 java.util. 另一种方法是通过标准输入传递 PDF 数据。

# algorithm - 三角函数的范围缩减

> ID：11903636
> 
> 赞同：2
> 
> 时间：2012-08-10T14:20:51.833
> 
> 标签：algorithm, math, trigonometry

我正在尝试为三角函数实现范围缩减。我发现这篇论文[http://www.computer.org/csdl/proceedings/pcspa/2010/4180/00/4180b048-abs.html](http://www.computer.org/csdl/proceedings/pcspa/2010/4180/00/4180b048-abs.html)谈到了使用 64 位整数运算。

提出的想法应该可行，但论文中的方程式似乎存在一些问题。这比 fdlibm 中实现的效率高吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T04:02:36.030

如果您想要执行完整的浮点范围缩减，请参阅 KC Ng 的“用于巨大参数的参数缩减：到最后一点”，该文章很容易在网络上找到。

突出的问题是，要对标准三角函数（例如 sine(x)，其中 x 以弧度表示）进行范围缩减，必须进行`mod`涉及 Pi 的精确运算。`mod`需要将 4/Pi 扩展到足够的派系位位置以获得有意义的结果。本文详细介绍了该过程以及需要走多远。事实证明，它可能是 100 位，但不是数百万位。您可能知道这个问题，但如果没有，您需要知道使用 64 位例程或其他方式进行*良好的缩减。*

# java - 如何在 Java 程序中从 JSON 中获取值？

> ID：11903641
> 
> 赞同：1
> 
> 时间：2012-08-10T14:21:10.307
> 
> 标签：java, json

我是一个关于 JSON 的初学者......

如何从 Java 程序中的以下 JSON 对象中获取“3037904”的值？

> {"query":{"pages":{"3037904":{"pageid":3037904,"ns":0,"title":"Kempinski", "categories":[{"ns":14,"title ":"Category:1897 年成立的公司"},{"ns":14,"title":"Category:连锁酒店"},{"ns":14,"title":"Category:Kempinski Hotels"}] }}}}

我尝试过了

```
JSONObject query = json.getJSONObject("query");
int pages = query.getInt("pages"); 
```

但这需要

```
"{"3037904":{"pageid":3037904,"ns":0,"title":"Kempinski",
"categories":[{"ns":14,"title":"Category:Companies established in 1897"},{"ns":14,"title":"Category:Hotel chains"},{"ns":14,"title":"Category:Kempinski Hotels"}]}}}}", 
```

不仅是“3037904”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:27:41.533

您需要对您的`JSONObject`.

在这个答案中，我假设您想要获得该`pageid`值。

让我们只假设存在`pageid`于嵌套中 - 在特定级别：

```
// "query" is the top-level object: 
JSONObject query = json.getJSONObject("query");
// "pages" is a field of "query"
JSONObject pages = query.getJSONObject("pages");

// these will hold the object with the value that you want, and that value:
JSONObject nestedObject = null;
int pageId = 0;

// these are the property names in the "pages" object:
String[] keys = pages.getNames(pages);

// iterate over the keys in the "pages" object, looks for JSONObjects:
for (int i = 0; i < keys.length; i++)
{
    try
    {
        nestedObject = pages.getJSONObject(keys[i]);
        // only consider objects with a "pageid" key, stop at the first one:
        if (nestedObject.has("pageid"))
            break;
    }
    catch (JSONException je)
    { ; }
}

if (nestedObject != null)
   pageId = nestedObject.getInt("pageid"); 
```

您的 JSON 输入似乎很奇怪，因为第一个嵌套对象有一个`pages`包含另一个对象的字段。复数形式的名称`pages`，和嵌套对象（将包含对象的键复制为对象`pageid`内*的*键）表明`pages`应该是多个此类对象的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:24:59.150

看看 GSON 库：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

以下是很好的例子：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples)

```
Gson gson = new Gson();

Map map = gson.fromJson("{\"query\":{\"pages\":{\"3037904\":{\"pageid\":3037904,\"ns\":0,\"title\":\"Kempinski\", \"categories\":[{\"ns\":14,\"title\":\"Category:Companies established in 1897\"},{\"ns\":14,\"title\":\"Category:Hotel chains\"},{\"ns\":14,\"title\":\"Category:Kempinski Hotels\"}]}}}}", HashMap.class);

Map query = (Map) map.get("query");
Map pages = (Map) query.get("pages");
System.out.println(pages.keySet());

Map page = (Map) pages.get("3037904");
System.out.println(page);
System.out.println(page.get("pageid")); 
```

# android - 在 android 应用中实现类似 QSB 的建议

> ID：11903642
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:21:12.523
> 
> 标签：android, search, search-suggestion, android-qsb

我需要在我的 android 应用程序中提供一个搜索框。当用户开始输入搜索文本时，我需要向他展示相关建议。（正如我们在主屏幕上的 google-search 小部件中看到的那样。如果我们从日志中看到，它`com.android.quicksearchbox/.SearchActivity`是以`android.search.action.GLOBAL_SEARCH`意图开始的，它会搜索以下内容： `corpora:[web, apps, com.android.contacts/.activities.PeopleActivity])`.

唯一的事情是我需要从网络和我的应用程序数据库中显示建议。

知道如何实现吗？我需要自己实现`SuggestionsProvider`还是可以直接使用本机实现？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:04:40.617

我想我自己弄清楚了。

浏览了 android 源代码中的[可搜索字典](http://jayxie.com/mirrors/android-sdk/resources/samples/SearchableDictionary/index.html)代码和 QuickSearchBox 代码。

在后台线程中需要两个启动 2 活动。一个人将在我的数据库中搜索搜索词，其他人将在 Google 中搜索相同的内容。所有结果都将在建议列表中看到。

[Google Suggest API](http://google.com/complete/search?q=res&output=toolbar)在用户输入文本时提供建议。

# ruby-on-rails - Rails：Mongoid 的 JSON 序列化循环引用错误：地理空间对象

> ID：11903647
> 
> 赞同：1
> 
> 时间：2012-08-10T14:21:25.937
> 
> 标签：ruby-on-rails, json, mongodb, geospatial, circular-reference

我有一个由地理位置查询返回的 Mongo 对象数组，例如：

```
@data = Record.geo_near([lng,lat], :max_distance => dist, :unit => :m, :spherical => true) 
```

然后我尝试根据预期的格式序列化响应：

```
respond_to do |format|
    format.html 
    format.json { render json: @data, :status => 200 } # Not working
    format.xml { render xml: @data, :status => 200 } # Working !
end 
```

奇怪的是，XML 一切顺利，但 JSON 出现此错误：

```
ActiveSupport::JSON::Encoding::CircularReferenceError in BouncesController#populars
object references itself 
```

我发现[这篇文章](https://stackoverflow.com/questions/867491/geokit-rails-plugin-cant-call-to-json-on-returned-geoloc-object-gives-circul)与相同类型的错误有关，但经过验证的答案对我不起作用。

有任何想法吗？

**编辑**

这是发生问题的模型：

```
class MyModel
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Spacial::Document

  spacial_index :loc, :min => -180, :max => 180
  belongs_to :user

  field :text, :type => String
  field :loc, :type => Array, spacial: true
  field :accuracy, :type => Float

  def as_json(options={})
  {
  "id" => self.id,
  "text" => self.text,
  "loc" => self.loc,
  "accuracy" => self.accuracy,
  "user" => {
    "id" => self.user['_id'],
    "login" => self.user['login'],
    "role" => self.user['role']
  },
  "created_at" => self.created_at,
  "updated_at" => self.updated_at
  }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:26:35.623

现在我已经通过降级我的宝石解决了这个问题，如下所示：

```
gem 'mongo', '1.4.0'
gem "mongoid", "~> 2.4"
gem "bson_ext", "~> 1.5" 
```

仍然有可能使用以下 hack，但它会阻止您在模型中自行格式化 json 输出。

```
format.json { render json: Hash.from_xml(@data.to_xml).to_json, :status => 200 } 
```

# jquery - jQuery Deferred - 延迟 getJSON 成功函数中的变量范围

> ID：11903649
> 
> 赞同：0
> 
> 时间：2012-08-10T14:21:31.133
> 
> 标签：jquery, getjson, jquery-deferred

我正在将延迟的 getJSON 调用添加到 for 循环内的数组中，该循环在其成功函数中引用局部变量。我遇到的问题是，当调用成功函数时，局部变量正在从循环的最后一次迭代中获取值。请参见下面的示例：

```
var calls = [];
var arr = ['a','b','c'];
for (var a in arr) {
    calls.push(
        $.getJSON(window.location, function() { alert(arr[a]); })
    );
}
$.when.apply($,calls); 
```

jsFiddle：http: [//jsfiddle.net/Me5rV/](http://jsfiddle.net/Me5rV/)

这会产生三个值为“c”的警报，而我想要值“a”、“b”和“c”。这可能吗？

编辑：下面的作品，但我不完全确定为什么会有所不同？

```
var calls = [];
var arr = ['a','b','c'];
for (var a in arr) {
    calls.push(
        $.getJSON(window.location, function(x) {
            alert(x);
       }(arr[a]))
    );
}
$.when.apply($,calls); 
```

jsFiddle：http: [//jsfiddle.net/Me5rV/1/](http://jsfiddle.net/Me5rV/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:46:08.657

回顾一下这样的循环：

```
var a = [];

for( var i = 0; i < 3; ++i ) {
    a.push( function() {
        alert(i);
    });
} 
```

实际上是：

```
var a = [], i = 0;

a.push( function(){
    alert(i);
});

i++;

a.push( function() {
    alert(i);
});

i++;

a.push( function() {
    alert(i);
});

i++;

//condition isn't met, loop terminates

alert(i) //alerts 3 because i is 3 now.
         //That's why all the functions alert 3, because they all 
         //refer to this i and its value is 3 
```

现在你可以这样做（重复删除）：

```
a.push( function(i){
    return function() {
         alert(i); //Refers to the i passed as argument to the outer function
                   //not the global one
                   //The local i has whatever value the global i had when it was passed
                   //as argument
    };
}(i)); 
```

# mysql - 删除非关系配置中的记录

> ID：11903651
> 
> 赞同：0
> 
> 时间：2012-08-10T14:21:36.173
> 
> 标签：mysql

我使用的是 MySQL，它不是关系数据库（外键约束），所以当我对记录执行删除时，我想检查它是否在任何其他表中使用，如果是，请不要删除。

我假设我必须对所有表执行数据库范围的搜索，除了它自己的。我在整个数据库中保持每个记录 id 统一。

例子：

```
Assets
id | date_created | type_id

History
asset_id | date_recorded | store_id 
```

我找到了一个脚本来查找所有具有记录 id 的表：

```
SELECT
    DISTINCT TABLE_NAME,
    TABLE_NAME.COLUMN_NAME
FROM
    INFORMATION_SCHEMA.COLUMNS
WHERE
    COLUMN_NAME IN ('desander_id')
    AND
    TABLE_SCHEMA='emp' 
```

但是我在 TABLE_NAME.COLUMN_NAME 部分收到一个错误，它说 COLUMN_NAME 是未知的。有没有办法我可以做到这一点？我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:24:22.913

您的表是`INFORMATION_SCHEMA.COLUMNS`并且您正在选择`TABLE_NAME.COLUMN_NAME`在 MySQL 中不可能的。应该是这样的`table_name.column_name`。尝试这个：

```
SELECT DISTINCT COLUMNS.TABLE_NAME,
                COLUMNS.COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME IN ('desander_id') AND
      TABLE_SCHEMA='emp'; 
```

# spring - 在事务函数中，调用 clear() 分离所有实体？

> ID：11903653
> 
> 赞同：2
> 
> 时间：2012-08-10T14:21:45.297
> 
> 标签：spring, hibernate, jpa, transactional, persist

我使用 Hibernate 作为 JPA 提供程序，在一个函数中，我正在创建不同实体的实例。一旦我调用`clear()`一个实体，我就不能调用`persist()`其他实体。我的代码相当复杂，有时我不得不为一种类型的实体（而不是其他类型）调用`flush()`and`clear()`以释放一些内存。

我的代码的简化如下：

```
@Transactional
void function()
{
    EntityType1 entity1 = new  EntityType1();
    EntityType2 entity2 = new  EntityType2();

    //...... do operations on entity1
    entity1.persist();
    entity1.flush();
    entity1.clear();

    //...... do operations on entity2
    entity2.persist();
} 
```

调用时`entity2.persist()`出现以下错误：org.springframework.orm.jpa.JpaSystemException: org.hibernate.PersistentObjectException: detached entity passing to persist

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:44:39.203

很可能您`entity2`已经`@Id`分配了一个，因此 Hibernate 期望*更新*现有实体而不是保留一个新实例。这就是为什么 Hibernate 认为`entity2`是*分离*的。

调用`entity2.merge()`将为您提供与 Hibernate 会话相关联的实体。请注意，[merge()](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/Session.html#merge%28java.lang.Object%29)返回作为持久副本的实体的新实例。

例子

```
EntityType2 entityPersisted = entity2.merge();

entityPersisted.getSomething();  // your persisted instance
entity2.getSomething();  // still your detached instance 
```

调用[clear()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#clear%28%29)会驱逐整个会话缓存，因此您拥有的所有实体都`@Id`将被视为*detached*。

如果您只想从会话缓存中删除一个实体，请使用[evict()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#evict%28java.lang.Object%29)

# perl - 如何在每次调用对象方法时检查一些值？

> ID：11903655
> 
> 赞同：2
> 
> 时间：2012-08-10T14:21:45.080
> 
> 标签：perl, oop, methods

我想检查对我的对象方法的每次调用一些值（在这种情况下：令牌的年龄）。是否可以一次将其设置为所有方法？就像在构造函数中一样？我有这样简单的构造函数：

```
sub new {
    my $class = shift;
    my %args = @_;
    my $self  = {};

    $self->{key} = $args{key};
    bless($self, $class);

    ($self->{token}, $self->{token_start}) = $self->_get_authorized_token(); 
    return $self;
} 
```

还有一堆方法，取决于令牌的年龄，如下所示：

```
sub add_item {
    my $self = shift;
    my %args = @_;
    ...
} 
```

我想避免在每种方法中都包含年龄检查，所以我寻找更通用的方法来实现它。有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:23:05.643

我能想到的就是隐藏你所有的“真实”方法——要么以带有前下划线的经典方式，要么以子例程的散列方式——并用于`AUTOLOAD`正确引导调用。

下面的例子说明了这个想法

**模块**MyClass.pm

```
package MyClass;

use strict;
use warnings;

sub new {
  bless {}, __PACKAGE__;
}

sub _method1 {
  print "In method1\n";
}

sub _method2 {
  print "In method2\n";
}

sub AUTOLOAD {

  our $AUTOLOAD;

  my ($class, $method) = $AUTOLOAD =~ /(.+)::(.+)/;
  return if $method eq 'DESTROY';

  my $newmethod = "${class}::_$method";
  unless (exists &$newmethod) {
    die qq(Can't locate object method "$method" via package "$class");
  }

  print "Preprocessing...\n";
  goto &$newmethod 
}

1; 
```

**程序**

```
use strict;
use warnings;

use MyClass;

my $thing = MyClass->new;

$thing->method1;
$thing->method2;
$thing->method3; 
```

**输出**

```
Preprocessing...
In method1
Preprocessing...
In method2
Can't locate object method "method3" via package "MyClass" at MyClass.pm line 23. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T21:12:33.967

请参阅[`Class::Method::Modifiers`](http://metacpan.org/module/Class%3a%3aMethod%3a%3aModifiers)或[`Class::Method::Modifiers::Fast`](http://metacpan.org/module/Class%3a%3aMethod%3a%3aModifiers%3a%3aFast)模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T09:34:16.743

老实说，如果你在 Perl 中做 OO 并且你想在没有样板的情况下处理属性、方法修饰符和延迟资源加载等事情，那么学习[Moose](http://metacpan.org/module/Moose)是值得的。为了说明，这是使用 Moose 编写所需内容的一种方法：

```
use Moose;
has key => (isa => 'Str', is => 'ro');
has token => (isa => 'HashRef', is => 'ro', lazy_build => 1);

before [qw(add_item method2 method3)] => sub {
    my $self = shift;
    if (do something with $self->token) {
         # return, die, etc.
    }
};

sub _build_token {
    my $self = shift;
    my $key = $self->key;
    return { token => 'foo', token_start => time };
} 
```

这些可能会有所帮助：

*   [Moose::Manual::MethodModifiers](https://metacpan.org/module/Moose%3a%3aManual%3a%3aMethodModifiers)
*   [Moose::Cookbook::Basics::BinaryTree_BuilderAndLazyBuild](https://metacpan.org/module/Moose%3a%3aCookbook%3a%3aBasics%3a%3aBinaryTree_BuilderAndLazyBuild)

# ruby-on-rails - 如何禁用发现并为 omniauth-openid 指定 OpenID 服务器

> ID：11903657
> 
> 赞同：0
> 
> 时间：2012-08-10T14:21:46.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, openid, omniauth, google-openid

我正在尝试在 Ruby on Rails 中使用 Google Apps 执行 OmniAuth OpenID。我知道如果我指定 ":identifier => 'https://www.google.com/accounts/o8/site-xrds?hd=example.com'" 其中 example.com 它应该开箱即用是我的目标用户来自的域。

用户在访问 /auth/google 时可以毫无问题地被重定向到谷歌，并且这个 openid.identity 可以从谷歌返回：

```
... &openid.identity=http://example.com/openid?id=xxxxxxxxxxxxxxxxxxxxxxx ... 
```

但是，我正在使用的 example.com 没有在[http://example.com/](http://example.com/)上设置正确的 "rel='openid2.provider'" <link /> 标签，因此当 omniauth-openid 尝试时发现失败再次与谷歌核实。

是否有一种快速而干净的方法来解决默认发现行为，以便我可以直接将[https://www.google.com/a/example.com/o8/ud?be=o8](https://www.google.com/a/example.com/o8/ud?be=o8)定义为服务器而不执行自动发现？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:20:57.647

在使用 Steve 推荐的 gem 之前，我想出了一个解决方法，使整个发现过程仅在本地发生，我发现这可能对某些人有用。如果您只接受来自单个 Google Apps 域的用户，您可能希望：

1.  `127.0.0.1 example.com`在 /etc/hosts 中添加一行。

2.  设置一个像 nginx 这样的轻量级 HTTP 服务器，创建一个名为`openid`（不要附加 .html）的文件，并在那里添加你的 <link rel="openid2.provider" ... > 标签。

这比使用 ruby​​-openid-apps-discovery 稍微快一些，因为它可以避免您的应用程序向外部 https 服务器发送一些请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:31:46.477

我认为omniauth-openid 使用ruby-openid。如果是这样，您应该能够轻松地使其工作：

```
gem install ruby-openid-apps-discovery 
```

然后在提出请求之前投入某个地方

```
require 'gapps_openid' 
```

Google Apps 的发现协议略有不同，这正是 gem 提供的。

# javascript - 如何检测元素的位置发生了变化？

> ID：11903658
> 
> 赞同：0
> 
> 时间：2012-08-10T14:21:50.227
> 
> 标签：javascript

考虑 div-A 与 div-B 具有相对位置的情况**（****实际上**，div **-A**以不同的**Z-Index**悬停在**div-B**上）。当**div-B**的位置发生变化时，将**div-C**插入到它之前，将**div-A**隐藏起来。

 ******问题是：如何检测**div-B**的位置变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:40:58.307

这一切都取决于可能导致 div 移动，如果它是一个窗口调整大小`window.onresize = function(){}`或在 jQuery 中`$(window).resize(function(){});`
，如果它是由用户交互（如点击和你有什么）引起的：`document.body.addEventListener('click',function(){},false);`，其中处理程序最好是排序的闭包，它保持初始位置有问题的div。
如果它是由于 ajax 调用插入的新内容引起的：让`onreadystatechange`处理程序对其进行排序。同样，最好使用闭包将位置与初始值进行比较

可能有更简单的 CSS3 方式，我不是设计师 - 所以我真的不知道。另外：设置您迄今为止尝试过的内容以及页面的外观。并且对这个问题更准确一点。你的问题非常模糊。阅读[常见问题解答](https://stackoverflow.com/faq#questions)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-10T14:28:04.457

您可以在 jquery 中使用 $.position 方法：

```
 $('#element_id').position().left;
  $('#element_id').position().top; 
```

只需将它们存储在一个变量中，然后使用该`setInterval()`方法主动监控它是否发生变化******

# jquery - jquery成功函数错误

> ID：11903665
> 
> 赞同：1
> 
> 时间：2012-08-10T14:22:15.127
> 
> 标签：jquery

我是 jQuery 新手，在尝试使成功功能正常工作时遇到了一些麻烦。我一直在尽力阅读一些人关于同一问题的问题，并应用了所需的更改，但似乎无法使其正常工作。

如果有人可以请指出我正确的方向。

```
/**
 * Add user
 */
function display_reg_success() {

    alert('Display function worked');

    window.location.replace('/forums/usercp.php');

}

function add_user(data_string) {

    alert('called add user');

    $.ajax({

        type: 'POST',
        url: '/index.php',
        data: data_string,
        success: function (response) {
            display_reg_success();
        }

    });

}

function user_email_exists(username, email) {

    $.get("/verify.php", {
        username: username,
        email: email
    },

    function (data) {

        alert('Data:' + data);

        if (data == 'username') {

            $('#username_taken_error').show();
            $('#username').focus();

        }
        else if (data == 'email') {

            $('#email_taken_error').show();
            $('#email').focus();

        }
        else if (data == 'username|email') {

            $('#username_taken_error').show();
            $('#email_taken_error').show();
            $('#username').focus();

        }
        else if (data == 'true') {

            alert('true');

            return true;

        }

    });

}

/** Regform - Paul  */

$(function () {

    $('.submit_reg_field').click(function () {

        $('.error_form').hide();

        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

        //required
        var username = $("input#username").val();
        var email = $("input#email").val();
        var confirm_email = $("input#email2").val();
        var password = $("input#password").val();
        var password2 = $("input#password2").val();
        var agree_terms = $('#agree:checked').val();

        /*
                    //options
                    var hideemail = $("#hideemail:checked").val();
                    var receivepms = $("#receivepms:checked").val();
                    var pmnotice = $("#pmnotice:checked").val();
                    var emailpmnotify = $("#emailpmnotify:checked").val();
                    var invisible = $("#invisible:checked").val();
                    var timezone = $("#timezone option:selected").val();
                    */

        if (username == '') {
            $('#username_error').show();
            $('#username').focus();
            return false;
        }

        if (password == '') {
            $('#password_error').show();
            $('#password').focus();
            return false;
        }

        if (password.length < 6) {
            $('#password_length_error').show();
            $('#password').focus();
            return false;
        }

        if (password2 == '') {
            $('#confirm_password_error').show();
            $('#password2').focus();
            return false;
        }

        if (password != password2) {
            $('#confirm_password_match_error').show();
            $('#password').focus();
            return false;
        }

        if (email == '') {
            $('#email_error').show();
            $('#email').focus();
            return false;
        }
        else {
            if (!emailReg.test(email)) {
                $('#email_valid_error').show();
                $('#email').focus();
                return false;
            }
        }

        if (confirm_email == '') {
            $('#confirm_email_error').show();
            $('#confirm_email').focus();
            return false;
        }
        if (email != confirm_email) {
            $('#confirm_email_match_error').show();
            $('#email').focus();
            return false;
        }

        if (agree_terms != "1") {
            $('#agree_error').show();
            return false;
        }

        var data_string = 'register=true&username=' + username + '&email=' + email + '&email2=' + confirm_email + '&password=' + password + '&password2=' + password2;

        if (user_email_exists(username, email)) {

            /*+ '&hideemail=' + hideemail + '&receivepms=' + receivepms + '&pmnotice=' + pmnotice + '&emailnotify=' + emailnotify + '&invisible=' + invisible + '&timezone=' + timezone*/

            add_user(data_string);

        }

        return false;

    });

}); 
```

表格

```
<table id="reg_table" cellspacing="10">
    <tr>
        <td width="50%">Username</td>
        <td>
            <input type="text" class="text_field" id="username" value="" />
            <span class="error_form" id="username_error">This field is required.</span>
            <span class="error_form" id="username_taken_error">That username is already in use.</span>
        </td>
    </tr>
    <tr>
        <td>Password</td>
        <td>
            <input type="password" id="password" class="text_field" value="" />
            <span class="error_form" id="password_error">This field is required.</span>
            <span class="error_form" id="password_length_error">The password is too short.</span>
            <span class="error_form" id="confirm_password_match_error">Passwords do not match.</span>
        </td>
    </tr>
    <tr>
        <td>Confirm Password</td>
        <td>
            <input type="password" id="password2" class="text_field" value="" />
            <span class="error_form" id="confirm_password_error">This field is required.</span>
        </td>
    </tr>
    <tr>
        <td>Email</td>
        <td>
            <input type="text" id="email" class="text_field" value="" />
            <span class="error_form" id="email_error">This field is required.</span>
            <span class="error_form" id="email_valid_error">This is not a valid email.</span>
            <span class="error_form" id="email_taken_error">That email is already in use.</span>
        </td>
    </tr>
    <tr>
        <td>Confirm Email</td>
        <td>
            <input type="text" id="email2" class="text_field" value="" />
            <span class="error_form" id="confirm_email_error">This field is required.</span>
            <span class="error_form" id="confirm_email_match_error">Emails do not match.</span>
        </td>
    </tr>
    <tr>
        <td colspan="2" align="center">I agree to the
            <a href="#">Terms and Conditions</a>
            <input type="checkbox" id="agree" value="1" />
            <span class="error_form" id="agree_error">You must agree to the Terms and Conditions.</span>
        </td>
    </tr>
    <tr>
        <td colspan="2" align="center">
            <input type="submit" value="Register" class="submit_reg_field" />
        </td>
    </tr>
</table> 
```

[/html]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:26:09.803

`user_email_exists`进行异步 Ajax 调用时，该调用不可能像编写函数那样向服务器返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:30:14.100

它应该是

```
window.location = '/forums/usercp.php'; 
```

顺便说一句，检查一些 jQuery 的表单验证插件

编辑：我将展示流程应该如何

```
/**
 * Add user
 */
var display_reg_success = function() { //scoping
    console.log('Display function worked'); //console is better debugging tool
    window.location.replace('/forums/usercp.php');
}

var add_user = function(data) {
    console.log('called add user');
    $.ajax({
        type: 'POST',
        url: '/index.php',
        data: data, //see notes on serialization below
        success: display_reg_success    
    });

}

var user_email_exists = function(data) {

    $.get("/verify.php", data,
    function (response) {
        console.log('Response:',response);
        if (response== 'username') {
               //OMIT
        }
        else if (response== 'true') {
            console.log('true');

            add_user(data);
        }

    });

}

/** Regform - Paul  */

$(function () {

    $('.submit_reg_field').click(function () {

        $('.error_form').hide();

        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

        //required
        var username = $("input#username").val();
        var email = $("input#email").val();
        var confirm_email = $("input#email2").val();
        var password = $("input#password").val();
        var password2 = $("input#password2").val();
        var agree_terms = $('#agree:checked').val();

         //validation

        //notes on serialization: better make an object and let jquery serialize it,
        //i didnt seen any prevention code from entering an `&` into username field
        //and so introduce a security hole
        var data = {
            'register':true,
            'username':username,
            'email':email,
            'email2':confirm_email,
            'password':password
            //'password2': password //same is password, omit
            };

        user_email_exists(data);

        return false;

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:30:04.387

正如您在上面的评论中指出的那样，重定向不起作用。

这就是为什么...

```
window.location.replace('/forums/usercp.php'); 
```

应该...

```
window.location.replace('forums/usercp.php'); 
```

当您可能需要相对路径时，您就有了绝对路径。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-10T14:40:21.017

在代码的不同行中添加一些`console.log(response)`或警报并验证您的控制台

# php - ponydocs 安装步骤 5

> ID：11903668
> 
> 赞同：0
> 
> 时间：2012-08-10T14:22:19.853
> 
> 标签：php, wamp, mediawiki, parse-error

我目前正在我的公司安装 Ponydocs。我已经完成了安装的第 4 步，但在第 5 步尝试访问该站点时出现此错误。

> **解析错误**：语法错误，在线出现意外`$ponyDocsProductsList`( `T_VARIABLE`) `C:\wamp\www\LocalSettings.php``179`

这是它正在谈论的代码

```
################# PONYDOCS START #################
    #Ponydocs Logo
        $wgLogo = "/extensions/PonyDocs/images/pony.png";
    #Implicit group for all visitors, remove access beyond reading
        $wgGroupPermissions['*']['createaccount'] = false;
        $wgGroupPermissions['*']['edit'] = false;
        $wgGroupPermissions['*']['createpage'] = false;
        $wgGroupPermissions['*']['upload'] = false;
        $wgGroupPermissions['*']['reupload'] = false;
        $wgGroupPermissions['*']['reupload-shared'] = false;
        $wgGroupPermissions['*']['writeapi'] = false;
        $wgGroupPermissions['*']['createtalk'] = false;
        $wgGroupPermissions['*']['read'] = true;
    #User is logged-in. Ensure that they still can't edit.
        $wgGroupPermissions['user']['read'] = true;
        $wgGroupPermissions['user']['createtalk'] = false;
        $wgGroupPermissions['user']['upload'] = false;
        $wgGroupPermissions['user']['reupload'] = false;
        $wgGroupPermissions['user']['reupload-shared'] = false;
        $wgGroupPermissions['user']['edit'] = false;
        $wgGroupPermissions['user']['move'] = false;
        $wgGroupPermissions['user']['minoredit'] = false;
        $wgGroupPermissions['user']['createpage'] = false;
        $wgGroupPermissions['user']['writeapi'] = false;
        $wgGroupPermissions['user']['move-subpages'] = false;
        $wgGroupPermissions['user']['move-rootuserpages'] = false;
        $wgGroupPermissions['user']['purge'] = false;
        $wgGroupPermissions['user']['sendemail'] = false;
        $wgGroupPermissions['user']['writeapi'] = false;
    #Our "in charge" group.
        $wgGroupPermissions['bureaucrat']['userrights'] = true;
    #Custom permission to branch ALL topics for a version.
        $wgGroupPermissions['bureaucrat']['branchall'] = true;
    #Implicit group for accounts that pass $wgAutoConfirmAge
        $wgGroupPermissions['autoconfirmed']['autoconfirmed'] = true;
    #Implicit group for accounts with confirmed email addresses This has 
    #little use when email address confirmation is off  
        $wgGroupPermissions['emailconfirmed']['emailconfirmed'] = true;
    #Users with bot privilege can have their edits hidden from various log pages by default
        $wgGroupPermissions['bot']['bot'] = true;
        $wgGroupPermissions['bot']['autoconfirmed'] = true;
        $wgGroupPermissions['bot']['nominornewtalk'] = true;
        $wgGroupPermissions['bot']['autopatrol'] = true;

    $wgArticlePath = '/$1';

    #Ponydocs environment configuration.  update to your specific install
            define('PONYDOCS_PRODUCT_LOGO_URL', 'http://' . $_SERVER['interanetsrvr'] . '/extensions/PonyDocs/images/pony.png');
        define('PONYDOCS_PDF_COPYRIGHT_MESSAGE', 'Copyright Splunk, Inc. All Rights Reserved');
        define('PONYDOCS_ENABLE_BRANCHINHERIT_EMAIL', true)
    #NOTE: this *must* match what is in Documentation:Products.This will be fixed in later versions
    $ponyDocsProductsList = array("Foo");
    define('PONYDOCS_DEFAULT_PRODUCT', "Foo");  

    include_once($IP . "/extensions/PonyDocs/PonyDocsExtension.php");
#################  PONYDOCS END ################# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:27:02.020

```
define('PONYDOCS_ENABLE_BRANCHINHERIT_EMAIL', true);
//                     This semi-colon is missing ^^^
$ponyDocsProductsList = array("Foo"); 
```

# api - 从“oauth_token”和“oauth_token_secret”获取 Twitter 网名

> ID：11903673
> 
> 赞同：0
> 
> 时间：2012-08-10T14:22:43.113
> 
> 标签：api, oauth, twitter, twitter-oauth

我将“oauth_token”和“oauth_token_secret”值存储在数据库中。是否可以仅从这两个值中检索 twitter 帐户的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:36:38.443

您可以使用此 REST 方法：（`GET https://api.twitter.com/1/account/verify_credentials.json`或者`.xml`如果您更喜欢 XML 结果而不是 JSON）。这是一个经过身份验证的请求，因此您将照常`oauth_token`在标头中传递。`Authorization`如果请求成功，它将返回 200 OK HTTP 代码以及相应的用户。否则它将返回 401 返回码。用于请求的 Twitter 应用程序当然必须由用户授权。

# python - PyScripter 不会更新我的导入

> ID：11903674
> 
> 赞同：2
> 
> 时间：2012-08-10T14:22:44.297
> 
> 标签：python, pyscripter

我将便携式 python 1.1 与 python 2.6.2 一起使用。PyScriptor 是 1.9.9.6。我打开所有正在使用 PyScriptor 处理的文件。所以，我运行我的主文件，我的一个导入文件中的代码显示错误。我修复它并再次运行主文件，但出现了同样的错误。就好像导入的文件仍然是旧文件，但 PyScriptor 正确保存了我编辑的文件。重新启动 PyScriptor 可以修复它，但是对于每个错误都这样做是很痛苦的。我测试了这种情况，因为添加了一个在重新启动后出现的打印语句，然后将其删除，仍然可以看到打印语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:40:52.800

`reload(imported_module_name)`在重新运行脚本之前，您可以在交互式 shell 中使用重新加载模块。PyScripter 在单个 Python 实例中完成所有操作，这使得调试更容易，但正如您所发现的，修复导入的文件有点棘手。

您还可以从“运行”菜单中完全重新初始化远程引擎以获取新的解释器。

# performance - 使用 simd 指令时，32 位图像处理是否比 24 位图像处理快？

> ID：11903676
> 
> 赞同：3
> 
> 时间：2012-08-10T14:22:50.523
> 
> 标签：performance, image-processing, sse, simd, 24-bit

我查看了 sse 和 mmx 指令集，没有关于 3 通道图像处理的指令。当然，对于许多操作，您可以使用相同的指令，例如平均两个图像。但是当涉及到诸如解洗通道或通过线性变换混合不同通道之类的操作时，使用 32 位图像似乎要容易得多。

24 位与 32 位图像的典型图像处理任务的性能特征如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:57:50.597

如果您的图像较大且操作简单（例如 alpha 混合等），则 24 位/像素会更快。

图像处理中的操作通常非常简单，但您会执行数百万次。因此，将数据从主存移入和移出到 CPU 所用的时间很容易支配算法的性能。

因此，24 位/像素图像比 32 位/像素图像具有优势，因为需要移动的数据少 1/4。

但是，编写在 24 位/像素下表现良好的图像处理代码是一件痛苦的事情。SSE 指令并不真正适合数据，因此您必须四处打乱字节，然后您必须处理所有不同的对齐方式。

如果您正在使用的图像很小并且适合 l1 或 l2 缓存，那么情况就不同了，CPU 时间将主导性能。在这些情况下，32 位/像素的性能更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:54:28.123

在具有 PSHUFB（又名 _mm_shuffle_epi8）的新 x86 CPU 上，通道拆分可以在几个周期内完成，并且由于将像素宽度扩展到 32 位，它可能比产生额外的内存访问更便宜。在没有 PSHUFB 的旧 x86 CPU 上，它需要大量的洗牌或解包指令，并且 32 位像素效率更高。

在带有 NEON 的 ARM CPU 上，负载存储单元可以免费完成通道拆分。在没有 NEON 的 ARM CPU 上，可以使用 ARMv6 SIMD 指令来完成通道拆分，成本约为每像素 3 条指令。

# seo - Google 网站管理员不接受我的站点地图

> ID：11903677
> 
> 赞同：0
> 
> 时间：2012-08-10T14:22:57.030
> 
> 标签：seo, sitemap, robots.txt, google-search-console

设置我的 Google 网站管理员帐户并验证我的网站后，我未能将我的站点地图添加到其中。它发出以下错误。

![在此处输入图像描述](../Images/72549403d221d7e477115e5f1a03e290.png)

**我尝试执行以下操作：**

1.  我删除了 robots.txt 仍然没有工作。
2.  我试图在[http://www.validome.org/google/validate](http://www.validome.org/google/validate)上验证我的站点地图，并被报告为有效。
3.  我多次检查站点地图和我的 URL 是否有错误，一切似乎都很好。

**以供参考：**

**我的 sitemap.xml 如下：**

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset
      xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
            http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
<url>
  <loc>http://www.myDomain.com/</loc>
  <changefreq>daily</changefreq>
  <priority>1.00</priority>
</url>
<url>
  <loc>http://www.myDomain.com/about/</loc>
  <changefreq>daily</changefreq>
  <priority>0.90</priority>
</url>
<url>
  <loc>http://www.myDomain.com/help.php</loc>
  <changefreq>daily</changefreq>
  <priority>0.90</priority>
</url>
</urlset> 
```

**我的 Robots.txt 如下：**

```
User-agent: ia_archiver
Disallow: /

User-agent: duggmirror
Disallow: /

User-agent: *
Disallow: /cgi-bin/

Sitemap: http://www.myDomain.com/sitemap.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:04:57.997

以下是针对 bot 的 htaccess 规则问题的一些很好的参考：

[http://www.widexl.com/tutorials/htaccess.html](http://www.widexl.com/tutorials/htaccess.html)

[http://www.howtoforge.com/forums/showthread.php?t=27809](http://www.howtoforge.com/forums/showthread.php?t=27809)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:32:41.687

原来问题出在谷歌服务器上。我没有改变任何东西，只是将整个主题留了一个星期，然后再试一次。现在一切似乎都运行良好。

有时由于一些重大更新或 Google 繁忙的服务器，接受站点地图需要比通常费率更多的时间。对于那些面临类似问题的人，请等待几天再试一次，然后再在 Google 论坛等中抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:09:15.350

如果您想要对您的需求真正有效的东西：

*   用这个替换你的 robots.txt 规则：

    ```
    User-agent: *
    Allow: /
    Sitemap: http://www.myDomain.com/sitemap.xml 
    ```

*   并将其添加到您的 .htaccess

    ```
    #Block ia_archiver & duggmirror
        RewriteCond %{HTTP_USER_AGENT} .*.ia_archiver|duggmirror* [NC]
        RewriteRule .* - [F]

    #Block cgi access
        <filesMatch "^php5?\.(ini|cgi)$">
            Order Deny,Allow
            Deny from All
            Allow from env=REDIRECT_STATUS
        </filesMatch> 
    ```

# facebook - 将应用程序用户与 facebook 用户关联

> ID：11903678
> 
> 赞同：0
> 
> 时间：2012-08-10T14:22:58.247
> 
> 标签：facebook, facebook-graph-api

我想知道是否有任何方法可以将我的应用用户名的用户与 facebook 用户相关联？

我有一个网络应用程序 mywebbapp.com。使用 webbapp 注册的用户选择用户名并获得类似 mywebbapp.com/a-username 的个人资料页面。

Web 应用程序连接到 facebook。我可以轻松地将 facebook 用户 ID 保存在我的数据库中以连接两者，但如果我可以将 webb 应用程序用户名保存到 facebook 应用程序/用户，那将很方便。与保存分数的方式大致相同。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:48:37.530

正确，您将无法将其插入到 FB 的数据库中。就像你说的，添加到你的数据库。

# rpm - 尝试签署 RPM 时出错

> ID：11903688
> 
> 赞同：6
> 
> 时间：2012-08-10T14:23:13.033
> 
> 标签：rpm, signing, gnupg, rpmbuild

我正在尝试构建并签署 RPM。我在我正在构建 /path/to/macrodir/ 的位置创建了我的 .rpmmacro 文件，然后我使用 --define 和 _topdir 引用 /path/to/macrodir/

如果我构建 RPM 而不给出 --sign; 它工作正常。

```
rpmbuild --define "_topdir /path/to/macrodir" -bb spec 
```

.rpmmacro 位于宏目录中，包含

```
%_signature gpg
%_gpg_name Name (Comment) <emailid>
%_gpgpath pathtognupgfolder
%_gpgbin locationofgpgexec 
```

如果我包括 --sign 那么它会抛出错误

```
rpmbuild --define "_topdir /path/to/macrodir" -bb --sign spec 
```

错误：您必须在宏文件中设置“%_gpg_name”

我看不到我做错了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-14T22:43:52.280

正如[评论](https://stackoverflow.com/questions/11903688/error-trying-to-sign-rpm#comment50632658_11903688)中提到的OP ，`%gpg_name`通过`--define`标志将宏设置为`rpm`//有效。`rpmbuild``rpmsign`

`rpm --define "_gpg_name <your email or name>" --addsign <RPM to sign>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T19:36:38.163

Follow this [detailed writeup](http://fedoranews.org/tchung/gpg/) on how to sign custom rpm pacakge.

I faced a different problem, when running the following command it failed complaining no `rpm` file found.

```
rpm --addsign gyum-2.0-5.FC3.i386.rpm 
```

After installing `rpmsign` package everything worked.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-22T08:28:47.963

至少在我的机器上，该文件称为 .rpmmacros（带有 s）。

# regex - 计算由正则表达式通配符匹配的字符串中特定字符的匹配数

> ID：11903693
> 
> 赞同：9
> 
> 时间：2012-08-10T14:23:36.250
> 
> 标签：regex, perl, bash, sed, awk

我可以计算正则表达式*本身*匹配的每个不同字符吗？

假设正则表达式看起来像`/>(.*)[^a]+/`

我可以记`p`下该组捕获的字符串中的字母的出现次数`(.*)`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:26:54.397

在正则表达式之外：

```
my $p_count = map /p/g, />(.*)[^a]/; 
```

自给自足：

```
local our $p_count;
/
   (?{ 0 })
   >
   (?: p (?{ $^R + 1 })
   |   [^p]
   )*
   [^a]
   (?{ $p_count = $^R; })
/x; 
```

在这两种情况下，您都可以轻松扩展它以计算所有字母。例如，

```
my %counts;
if (my ($seq = />(.*)[^a]/) {
   ++$counts{$_} for split //, $seq;
}

my $p_count = $counts{'p'}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:45:45.020

您必须捕获匹配的字符串并单独处理它。

这段代码演示

```
use strict;
use warnings;

my $str = '> plantagenetgoosewagonattributes';

if ($str =~ />(.*)[^a]+/) {
  my $substr = $1;
  my %counts;
  $counts{$_}++ for $substr =~ /./g;
  print "'$_' - $counts{$_}\n" for sort keys %counts;
} 
```

**输出**

```
' ' - 1
'a' - 4
'b' - 1
'e' - 4
'g' - 3
'i' - 1
'l' - 1
'n' - 3
'o' - 3
'p' - 1
'r' - 1
's' - 1
't' - 5
'u' - 1
'w' - 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T10:02:07.350

按照 Borodin 的解决方案，这里是一个纯 bash 的解决方案：

```
let count=0  
testarray=(a b c d e f g h i j k l m n o p q r s t u v w x y z) 

string="> plantagenetgoosewagonattributes"                 # the string 
pattern=">(.*)[^a]+"                                   # regex pattern

limitvar=${#testarray[@]}                                  #array length

[[ $string =~ $pattern ]] && 
( while [ $count -lt $limitvar ] ; do sub="${BASH_REMATCH[1]//[^${testarray[$count]}]}" ; echo "${testarray[$count]} = ${#sub}" ; ((count++)) ; done ) 
```

从 bash 3.0 开始，bash 引入了可以通过 BASH_REMATCH[n] 访问的捕获组。

解决方案将字符声明为数组[在复杂情况下检查`declare -a`数组声明]。单个字符计数不需要计数变量，不需要 while 构造，而是字符的变量而不是数组。

如果您在上面的代码中包含范围，则此数组声明会执行确切的操作。

```
testarray=(`echo {a..z}`) 
```

一个`if` 循环的介绍将解释`0`计数字符的显示。我想让解决方案尽可能简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T14:30:28.210

AFAIK，你不能。您只能通过括号捕获某些组，然后检查该组捕获的数据长度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T15:08:51.160

有实验性的，不要使用我，`(?{ code })`构造......

来自`man perlre`：

> "(?{ code })" 警告：这个扩展的正则表达式功能被认为是实验性的，可能会在没有通知的情况下进行更改。由于正则表达式引擎中未来优化的影响，执行的具有副作用的代码在不同版本之间的执行可能不同。

如果那没有吓跑你，这里有一个例子，计算“p”的数量

```
my $p_count;
">pppppbca" =~ /(?{ $p_count = 0 })>(p(?{$p_count++})|.)*[^a]+/;
print "$p_count\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T15:03:04.293

首先说明：由于 * 的贪婪，最后一个`[^a]+`永远不会匹配多个非字符 - 即，您不妨放弃`+`.

正如@mvf 所说，您需要捕获通配符匹配的字符串才能计算其中的字符。Perl 正则表达式无法返回特定组匹配次数的计数——引擎可能会保留该数字以支持该`{,n}`机制，但您无法获得它。

# javascript - 将剃刀对象传递给 javascript 函数

> ID：11903695
> 
> 赞同：1
> 
> 时间：2012-08-10T14:23:45.470
> 
> 标签：javascript, asp.net-mvc-3, razor

我有我的 JS 函数：

```
function LoadJs(hostApp) {
    $.ajax({
        type: "POST",
        url: '@Url.Action("LoadJs", "Home")',
        data: { "hostApp": hostApp },
        success: function (Js) {
            Response.Write(Js)   
        }
    });
} 
```

当我在`Summary.vbhtml`文件中调用该函数时，我想将它传递给我的 hostApp 对象，然后让 Javascript 将该对象传递给控制器​​操作。

这是我调用该函数的`script`标签：`LoadJs`

```
<script type="text/javascript">    
    LoadJs( @(model)); 
</script> 
```

我试过`'@model'`, `'@(model)'`，`@model`但似乎没有什么能正确通过它。当我通过前两种方式传递它时，它传递了一个字符串，这不是我想要的，如果我尝试最后一种方式或示例中的方式，那么它会变成`@model`正确的对象，但它说它是未定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:38:57.140

您可以使用

```
<script type="text/javascript">    
    LoadJs(@(Html.Raw(new JavaScriptSerializer().Serialize(model))));
</script> 
```

# jquery - 带有锚标记的jquery wrap函数在IE8中不起作用

> ID：11903697
> 
> 赞同：0
> 
> 时间：2012-08-10T14:23:48.883
> 
> 标签：jquery

这个[http://jsfiddle.net/jquerybyexample/f9p6C/](http://jsfiddle.net/jquerybyexample/f9p6C/)在 IE8 中对我不起作用。我正在尝试在我的代码中做类似的事情。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:29:23.547

这是因为您在打开标签后缺少更大的符号

前

```
currentImage.wrap("<a target='_blank' href='" + currentImage.attr("src") + "'</a>"); 
```

后

```
currentImage.wrap("<a target='_blank' href='" + currentImage.attr("src") + "'></a>"); 
```

[http://jsfiddle.net/f9p6C/13/](http://jsfiddle.net/f9p6C/13/)

# css - 如何删除未使用的 CSS 行？

> ID：11903701
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:24:06.687
> 
> 标签：css

我有一个包含 5k 行的 css 文件，其中 40% 未使用，所以我想删除这些行，我找到了一个可以找到这些行但不能删除它们的插件，我想我需要一个脚本来做到这一点，有人吗知道如何删除这些行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:38:16.783

看[这里](https://stackoverflow.com/questions/11777192/web-tips-for-improving-speed-of-my-website/11777250#11777250)，当你使用 pageSpeed 和 Yslow 时，有很多工具可以用来优化你的 CSS、你的 JS、你的 HTML ......

缩小器可用于 CSS，我不确定，但我认为，Yslow 有一个工具可以删除未使用的 CSS 并缩小...

# java - 如何从 ListStore GWT 取回列表

> ID：11903703
> 
> 赞同：0
> 
> 时间：2012-08-10T14:24:07.810
> 
> 标签：java, oop, gwt, gxt

好吧，我在 GWT(gxt) 中遇到了问题。

我的屏幕中有一个可编辑的网格，我用一个列表将它放在那个网格中，但是在编辑这个网格之后我需要这个列表再次保存在数据库中我该怎么办？

像这样的东西：

```
public ListStore<MdlFormDic> store = new ListStore<MdlFormDic>();
store.add(list);
//how to get list from the store? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:27:55.250

您可以调用`store.getModels()`以获取 ListStore 模型。

希望能帮助到你。

# css - 如何区分 CSS 渐变的不同属性？

> ID：11903707
> 
> 赞同：0
> 
> 时间：2012-08-10T14:24:21.863
> 
> 标签：css, gradient

如果我有如下所示的 CSS 渐变代码：

```
 background-image: radial-gradient(circle farthest-side at center, #E6E6E6 0%, #BABABA 100%); 
```

我想将渐变的不同属性分开，使其更灵活。我的意思是我应该能够将不同的属性（即圆形、中心最远侧等）定义为不同的属性，每个属性都位于不同的行上。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:26:27.187

目前这是不可能的，因为 CSS3 只提供了一个函数式符号，它将所有值作为参数，而不是一组属性，用于表达某种渐变。

该[规范](http://www.w3.org/TR/css3-images/#gradients)暗示这是为了让浏览器更容易动态生成渐变：

> 本节中描述的梯度表示法允许作者以简洁的语法指定这样的图像，以便 UA 可以在渲染页面时自动生成图像。

我想将其拆分为属性会使样式解析或语法过于复杂，这就是他们选择功能符号的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:29:56.610

目前这是不可能的。您唯一可用的选项是：

```
background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.27, rgb(100,173,97)),
    color-stop(0.64, rgb(130,208,127)),
    color-stop(0.82, rgb(156,250,166))
); 
```

# javascript - 使用 d3.js 添加下拉菜单

> ID：11903709
> 
> 赞同：15
> 
> 时间：2012-08-10T14:24:33.547
> 
> 标签：javascript, html, dom, d3.js

我正在尝试向我的 d3 可视化添加一个下拉菜单。问题是事件监听器不会在选择任何选项时被调用。另外，如何访问所选选项的值？以下是我的代码片段..

```
d3.text("uniqueTeams.php",function(json){
    var dd=JSON.parse(json);
    var b= d3.select("#s4").select("#shru");
    var u=b.append("select");
    var t=u.selectAll("option").data(dd).enter().append("option")
        .attr("value",function(d){return d.teamShotID;})
        .text(function(d){return d3.select(this).node().__data__.teamShotID;});
    t.on("change",change);
});
function change(value)
{
    console.log("team",value);
}
change();​​​​ 
```

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-10T18:16:11.903

您需要添加`.on("change")`到`select`元素，而不是`option`元素。

```
var select  = d3.select("#shru").append("select").on("change", change),
    options = select.selectAll('option').data(dd); // Data join

// Enter selection
options.enter().append("option").text(function(d) { return d.teamShotID; }); 
```

当前选定的`option`索引保存在元素上调用的属性`selectedIndex`中`select`。[选择是数组，因此可以直接访问元素（例如，`selection[0][0]`）](https://github.com/mbostock/d3/wiki/Selections)。每个`option`元素都将绑定数据，存储在一个名为的属性中`__data__`：

```
function change() {
    var selectedIndex = select.property('selectedIndex'),
        data          = options[0][selectedIndex].__data__;
} 
```

编辑：为了可读性并希望能帮助您理解上面的代码，我还想包括这种替代语法：

```
function change() {
    var si   = select.property('selectedIndex'),
        s    = options.filter(function (d, i) { return i === si }),
        data = s.datum();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T07:58:38.210

希望这可以指导你...

```
 var dispatch = d3.dispatch("load", "countrychange");
  d3.csv("data/ERSreputationBlocked.csv",type, function (error, country) {
      if (error) throw error;
      var countryById = d3.map();
      country.forEach(function (d) { countryById.set(d.id, d); });
      dispatch.load(countryById);
      dispatch.countrychange(countryById.get("PH"));
      //console.log(country);
  });
  dispatch.on("load.menu", function(countryById) {
      var select = d3.select("body")
        .append("div")
        .append("select")
        .on("change", function () { dispatch.countrychange(countryById.get(this.value)); });

      select.selectAll("option")
        .data(countryById.values())
        .enter().append("option")
        .attr("value", function (d) { return d.id; })
        .text(function (d) { return d.Country; });

      dispatch.on("countrychange.menu", function (country) {
          select.property("value", country)
          //loading the value based on the selected data
          var svg1 = d3.select("body").append("svg1")
                .attr("width", width)
                .attr("height", height)
          //end of selection

         console.log(country);
      });
  });
  //end of drop down

  function type(d) {
      d.total = d3.sum(d.value, function (k) { return d[k] = +d[k]; });
      return d;
  } 
```

# string - 使用 StringBuffer 进行追加，但具有 trim() 和 toLowerCase() 的功能

> ID：11903713
> 
> 赞同：0
> 
> 时间：2012-08-10T14:24:46.637
> 
> 标签：string, stringbuffer

我正在使用字符串进行连接操作。我想使用 stringbuffer/stringbuilder 因为它们更有效。

原始代码：

```
List<BDDObject> childlist; 
String newassetReferenceType = new String();

for (int i = 0; i < childlist.size(); i++)
{
newassetReferenceType = ((String) childlist.get(i).getValue(IDDConstants.IDD_COMPOUND_ASSET_REF_TYPE_NAME)).toLowerCase().trim().concat(((String) childlist.get(i).getValue(
IDDConstants.IDD_COMPOUND_ASSET_REF_VALUE)).trim());

} 
```

所以我尝试将其更改为已更改的代码：

```
List<BDDObject> childlist; 
StringBuffer newassetReferenceType = new StringBuffer();

for (int i = 0; i < childlist.size(); i++)
{
newassetReferenceType = ((String) childlist.get(i).getValue(IDDConstants.IDD_COMPOUND_ASSET_REF_TYPE_NAME)).toLowerCase().trim().append(((String) childlist.get(i).getValue(
IDDConstants.IDD_COMPOUND_ASSET_REF_VALUE)).trim());

} 
```

现在有一个错误，就是不能使用 trim() 和 toLowerCase() 方法。但无论如何我都必须使用它们。有人可以告诉我如何获得 trim() 和 toLowerCase() 的优势并且仍然使用 StringBuffer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:38:23.130

您的解决方案应该可以正常工作。我认为你的括号有点不对劲。在将字符串附加到 StringBuffer 之前，您应该对字符串执行 trim() 和 toLowerCase() 操作。

我使用适当的括号重写了您的代码来说明这个概念。随意重新格式化并将其放在一行中，但我认为这种方式更具可读性且不易出错。

```
List<BDDObject> childlist; 
StringBuffer newassetReferenceType = new StringBuffer();

for (int i = 0; i < childlist.size(); i++)
{
    var value1 = (String) childlist.get(i).getValue(IDDConstants.IDD_COMPOUND_ASSET_REF_TYPE_NAME);
    var value2 = (String) childlist.get(i).getValue(IDDConstants.IDD_COMPOUND_ASSET_REF_VALUE);

    newassetReferenceType.Append(value1.toLowerCase().trim())
    .append(value2.trim());
 } 
```

# java - 从 Java Applet 获取 PDF 文件

> ID：11903715
> 
> 赞同：0
> 
> 时间：2012-08-10T14:25:06.907
> 
> 标签：java, applet, download

我在Java Applet 中使用PDFjet 从头生成了一个PDF 对象，即我没有在服务器上生成它。但是如何调用“文件下载”提示来提供此 PDF 而不将其发送到服务器？我没有 HTTPRequest 或响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:01:57.980

我可以想到两种将文档保存到磁盘的选项。

1.  对小程序进行数字签名，在提示时让用户接受受信任的代码，为用户提供文件选择器以指定位置，然后将其保存到该位置。
2.  使用[JNLP API 文件服务](http://pscode.org/jws/api.html#fs)来做基本相同的事情。

# android - 将整个 Bundle 保存到 SharedPreferences

> ID：11903718
> 
> 赞同：7
> 
> 时间：2012-08-10T14:25:11.303
> 
> 标签：android, bundle, sharedpreferences

假设我的一个方法被传递了一个已经填充了要保存的数据的[Bundle](http://developer.android.com/reference/android/os/Bundle.html)，有没有办法将它保存到[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html) **而无需将其拆分**为整数、浮点数、字符串等？

我更喜欢“一举”编写/提交所有内容的便利性，因此，如果使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)无法做到这一点，您会推荐哪些其他[持久](https://stackoverflow.com/q/3404348/869501)存储方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T14:38:34.507

SharedPreferences 被序列化为 XML，这就是你只能使用简单类型的原因。您要么必须自己将包转换为单独的 SharePreferences 属性，要么以其他方式将包序列化到磁盘。

这是一个很好的参考文档，讨论了在 Android 中存储数据的各种可能性：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T14:31:37.043

据我所知，您只能将原始数据（及其包装器）保存到 SharedPreferences

为什么不创建自己的辅助方法，该方法将遍历 Bundle 并将其中的所有值保存到 SharedPreferences？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T10:39:52.657

*   注意：**如果您在项目中使用 Gson，那么我认为这是一个更好的解决方案。**

我只是使用`Gson`from`Google`将指定的对象序列化为其等效的 JSON 表示：

> 使用这个依赖

```
implementation 'com.google.code.gson:gson:2.8.6' 
```

> 代码：

```
Gson gson = new Gson();
String dataToJson = gson.toJson(modelObj); 
```

*然后我`dataToJson`在 SharedPreferences.Simple 中存储为字符串！*

> 在字符串提取时：

```
String myStoredVal = Value stored in SharedPreference. 
GsonBuilder builder = new GsonBuilder();
builder.setPrettyPrinting();

Gson gson = builder.create();
MyModel modelObj = gson.fromJson(prodDataStr, MyModel.class); 
```

# windows-8 - 适用于 Windows 8 的 SAPI 版本

> ID：11903719
> 
> 赞同：3
> 
> 时间：2012-08-10T14:25:14.890
> 
> 标签：windows-8, speech, sapi

Microsoft 是否正在更新 Windows 8 中的 SAPI 或任何语音组件？

我似乎找不到任何提及Windows 8 中包含的任何更新的[API](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx)或[技术。](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920512%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T19:56:24.660

不会。Windows 8 附带与 Windows 7 相同的 SAPI 5.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:27:11.493

对于 Windows 8 ui 应用程序，没有收件箱语音 api。

# google-maps - 阻止 Google Maps API 滚动到灰色区域

> ID：11903720
> 
> 赞同：5
> 
> 时间：2012-08-10T14:25:17.233
> 
> 标签：google-maps

在我正在构建的应用程序中，Google Maps API 占据了大部分（如果不是全部）屏幕。但是，在测试过程中，我发现用户可以将地图向下拖得足够远，这样地图就不再显示了，剩下的就是灰色背景。

我怎样才能阻止这个？我已经设置了一个 minZoom 但这只能解决页面加载时用户想要缩小的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2019-03-06T12:05:53.573

新的解决方案

```
new google.maps.Map(document.getElementById('map'), {
restriction: {
    latLngBounds: {
        north: 85,
        south: -85,
        west: -180,
        east: 180
    }
},
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T18:19:19.627

您可以检查地图的边界并查看用户是否平移超出了预期范围，然后禁用平移并返回地图区域。

```
map.getBounds().getSouthWest().lat() must be > -85

map.getBounds().getNorthEast().lat() must be < 85 
```

因此，例如：

```
 G.event.addListener(map, 'drag', checkLatitude); 
```

接着

```
function checkLatitude(){
    var proj = map.getProjection();
    var bounds = map.getBounds();
    var sLat = map.getBounds().getSouthWest().lat();
    var nLat = map.getBounds().getNorthEast().lat();
    if (sLat < -85 || nLat > 85) {
//gray areas are visible
         alert('Gray area visible');
         map.setOptions({draggable:false});
  //return to a valid position
    }

} 
```

-85 和 85 的极限值只是近似值。确切的值是`atan(sinh(PI)) *180 / PI = 85.05112878..`（在旧论坛的[**这篇文章中解释）。**](https://groups.google.com/forum/?hl=en&fromgroups=#!msg/google-maps-api/oJkyualxzyY/pNv1SE7qpBoJ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-31T05:31:17.230

此解决方案基于 Marcelo 的非常好的答案，但是一旦地图超出世界的最大或最小纬度，他的解决方案将完全禁用任何进一步的拖动（包括对地图可见区域的有效拖动）。这是一个明确的版本，如果用户通过拖动超过了最大或最小纬度，它将把地图拉回到视图中。它仍然允许用户拖动所有可见区域。

此外，此解决方案为地图设置了最小缩放级别，可用于确保尝试的缩放不会导致地图显示灰色区域。

（另请参阅[如何限制 Google maps API V3 中的平移？](https://stackoverflow.com/questions/3125065/how-do-i-limit-panning-in-google-maps-api-v3)）

```
var lastValidCenter;
var minZoomLevel = 2;

setOutOfBoundsListener();

function setOutOfBoundsListener() {
        google.maps.event.addListener(map, 'dragend', function () {
            checkLatitude(map);
        });
        google.maps.event.addListener(map, 'idle', function () {
            checkLatitude(map);
        });
        google.maps.event.addListener(map, 'zoom_changed', function () {
            checkLatitude(map);
        });
};

function checkLatitude(map) {
    if (this.minZoomLevel) {
        if (map.getZoom() < minZoomLevel) {
            map.setZoom(parseInt(minZoomLevel));
        }
    }

    var bounds = map.getBounds();
    var sLat = map.getBounds().getSouthWest().lat();
    var nLat = map.getBounds().getNorthEast().lat();
    if (sLat < -85 || nLat > 85) {
        //the map has gone beyone the world's max or min latitude - gray areas are visible
        //return to a valid position
        if (this.lastValidCenter) {
            map.setCenter(this.lastValidCenter);
        }
    }
    else {
        this.lastValidCenter = map.getCenter();
    }
} 
```

（我没有使用“center_changed”侦听器。在平移地图时，center_changed 事件会连续触发，这可能会阻止用户平移到灰色区域，而不是“回弹”。这可能会导致 stackoverflow 错误但是在 Chrome 中，由于事件将被触发的次数）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T15:37:03.120

我和你有同样的问题。我解决它的一种方法是把它放在你初始化地图的地方：

```
 google.maps.event.trigger(map, 'resize');
            map.setZoom( map.getZoom() );

            google.maps.event.addListener(map, "idle", function(){
                google.maps.event.trigger(map, 'resize');
            }); 
```

这基本上意味着当您拖动地图并且它“稳定”时，会触发事件来调整它的大小，因此意味着地图出于某种原因被显示。

如果您想出一种非 hacky 方式，请分享。:)

# jquery - jQuery模板将隐藏的表单字段呈现为IE中的可见输入框

> ID：11903729
> 
> 赞同：2
> 
> 时间：2012-08-10T14:26:05.203
> 
> 标签：jquery, internet-explorer, jquery-templates

按下按钮时，我正在使用 jQuery 模板将新项目添加到列表中

该模板包含一个隐藏字段。

当我在 IE 8 或 IE 9 的列表中添加新项目时，隐藏的表单字段会像可见的输入字段一样显示

我设置了一个 JSfiddle 来演示 [http://jsfiddle.net/T3has/8/](http://jsfiddle.net/T3has/8/)

它在 Chrome 和 FF 中运行良好，但在 IE 中不行

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:33:37.847

你做对了；输入是“隐藏”类型的，所以这显然是 IE 中的（又一个）错误。
如果你**想**支持 IE，你可能想尝试在这些输入中添加一个类作为 hack：

```
<input class="hidden-input" ... 
```

和CSS

```
input.hidden-input: {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:32:45.497

您可以将 .hide() 添加到附加的行中。

函数 .tmpl() 在 jQuery 中被标记为 beta 功能，并且没有进一步开发。

“jQuery 团队决定不让这个插件超过测试版。它不再被积极开发或维护。” 来源：[http ://api.jquery.com/tmpl/](http://api.jquery.com/tmpl/)

尝试改用此代码：

```
$('#rateItemTemplate').clone().removeAttr('id').appendTo('#Board'); 
```

jsFiddle：http: [//jsfiddle.net/T3has/10/](http://jsfiddle.net/T3has/10/)

# api - 使用属性查询 Wikipedia 页面

> ID：11903731
> 
> 赞同：5
> 
> 时间：2012-08-10T14:26:08.150
> 
> 标签：api, search, mediawiki, wikipedia

我需要使用 Wikipedia API Query 或任何其他 api（例如 Opensearch）来查询具有某些属性的简单页面列表。

输入：页面（文章）标题或 ID 的列表。
输出：包含以下属性的页面列表：
页面 id
标题
片段/描述（如在 opensearch api 中）
页面 url
图像 url（如在 opensearch api 中）

与此类似的结果：
[http](http://en.wikipedia.org/w/api.php?action=opensearch&search=miles%20davis&limit=20&format=xml)
://en.wikipedia.org/w/api.php?action=opensearch&search=miles%20davis&limit=20&format=xml 仅使用页面 id 而不是搜索，而是页面的确切列表通过标题或页码。

这应该是一件相当简单的事情，但我已经坚持了很长一段时间，尝试了 MW api 手册中的各种 URL 组合，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T12:36:37.113

我认为除了[Open Search API](https://www.mediawiki.org/wiki/API%3aOpensearch)之外没有其他方法可以获取 Open Search 数据，但根据您感兴趣的 Wikipedia，可能会安装其他扩展来帮助您。以英文维基百科为例，我们可以利用恰好[安装在那里的](https://en.wikipedia.org/wiki/Special%3aVersion)[MobileFrontend](https://www.mediawiki.org/wiki/Extension%3aMobileFrontend)和[PageImages](https://www.mediawiki.org/wiki/Extension%3aPageImages)扩展。

*   **标题**和**url**可从本机 MediaWiki API 获得。要获取 url，您可以使用[`prop=info`](https://www.mediawiki.org/wiki/API%3aProperties#Info%3a_Parameters), 并指定`inprop=url`它是您感兴趣的 url。
*   **页面的显眼图像**由PageImages返回`prop=pageimages`。
*   MobileFrontend 添加了一个名为 的属性`extracts`，您可以将其与指令一起使用`exintro`以获取**第一段**。但是请注意，MediWiki 标记很复杂，结果可能并不总是完美的。如果我们将它们放在一个查询中，它将是这样的：

[`http://en.wikipedia.org/w/api.php?action=query&pageids=21482&prop=pageimages|info|extracts&inprop=url&exintro`](http://en.wikipedia.org/w/api.php?action=query&pageids=21482&prop=pageimages|info|extracts&inprop=url&exintro)

给这个：

```
<api>
  <query>
    <pages>
      <page pageid="21482" ns="0" title="Nairobi" pageimage="Nairobi_Montage.jpg" contentmodel="wikitext" pagelanguage="en" touched="2014-02-06T06:10:01Z" lastrevid="594161616" counter="" length="89157" fullurl="http://en.wikipedia.org/wiki/Nairobi" editurl="http://en.wikipedia.org/w/index.php?title=Nairobi&amp;action=edit">
        <thumbnail source="http://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Nairobi_Montage.jpg/45px-Nairobi_Montage.jpg" width="45" height="50" />
        <extract xml:space="preserve">
             &lt;p&gt;&lt;b&gt;Nairobi&lt;/b&gt; /naɪˈroʊbi/ is the [...]
        </extract>
      </page>
    </pages>
  </query>
</api> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-26T12:46:10.717

这是获取文章的 Wikipedia 页面标题和属性列表，然后获取页面 ID 和 URLS 的多步骤过程。

请注意：它确实使用了先前答案的一部分：*“标题和 url 可从本机 MediaWiki API 获得。要获取 url，您可以使用 prop=info，并使用 inprop=url 指定它是您的 url有兴趣。”*

如果您想将 Wikipedia API 用于您自己的应用程序并搜索 Wikipedia 以获取有关某个主题的文章列表，并且您想要 JSON 格式的答案，那么您可以使用以下 URL：
`[https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=REPLACE_ME_WITH_SEARCH_TOPIC&format=json&callback=](https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=REPLACE_ME_WITH_SEARCH_TOPIC&format=json&callback=)?`

如果您的眼睛无法从中解析结果，请替换“format=json&callback=?” 使用“formatversion = 2”，如下例所示，让您的眼睛更容易：
`https:``//en.wikipedia.org/w/api.php?action=query&list=search&srsearch=REPLACE_ME_WITH_SEARCH_TOPIC&formatversion=2`

下面的示例将以 JSON 格式为我提供关于“泰国”的文章标题和属性的批处理列表，然后我将使用生成的标题来查找这些文章的页面 ID 和 URL。
网址第 1 步：
`https:``//en.wikipedia.org/w/api.php?action=query&list=search&srsearch=thailand&format=json&callback=?`

从第 1 步开始，我可以从生成的 JSON 中获取我需要的标题列表，在第 2 步中，我在另一个 API 查询（也称为第 2 步）中使用第 1 步中获得的标题来获取这些文章的页面 ID 和 URL在生成的 JSON...step2 的结果中。

以下是步骤 1 生成的 JSON 中的 Wikipedia 文章标题：

*   泰国
*   泰国概况
*   泰国地理
*   泰国经济
*   泰国足球
*   泰国南部
*   泰国政府
*   泰国北部
*   泰国文化
*   泰国电影

网址步骤 2：
`https:``//en.wikipedia.org/w/api.php?action=query&titles=Thailand|Outline%20of%20Thailand|Geography%20of%20Thailand|Economy%20of%20Thailand|Football%20in%20Thailand|Southern%20Thailand|Government%20of%20Thailand|Northern%20Thailand|Culture%20of%20Thailand|Cinema%20of%20Thailand&prop=info&inprop=url&format=json&callback=?`

# wordpress - Wordpress - 如何在没有标签的情况下摘录博客内容

> ID：11903733
> 
> 赞同：0
> 
> 时间：2012-08-10T14:26:20.337
> 
> 标签：wordpress

在 wordpress 中，它可以打印带有摘录的博客条目列表。当您单击博客条目时，它会将您带到完整的文章。

我的问题是wordpress对摘录应用了类似“strip html tags”的功能，这样它就可以删除ul、li、上标、标签等......

有没有办法防止这种情况发生，或者有选择地去除哪些标签？我绝对想保留上标标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:49:58.137

如果你想控制摘录内容，我建议使用[Advanced Excerpt Plugin](http://wordpress.org/extend/plugins/advanced-excerpt/)，或者很简单

```
the_content(); 
```

# magento - 主页上的 Magento 5 产品以及所有选项

> ID：11903736
> 
> 赞同：0
> 
> 时间：2012-08-10T14:26:29.023
> 
> 标签：magento

我想用magento建立一个商店，但我的主页上只有5种产品，所有选项（尺寸、数量、颜色等），也许有些人做了类似的事情，可以为我指明正确的方向?

附言

我用谷歌搜索:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:50:27.393

也许实现这一目标的最简单方法是使用这 5 种产品创建一个类别，并将其设置为您网店的主页。您可以在 下找到此选项`System > Configuration > Web > Default Web URL`。

因此，不要使用默认`cms`值，而是使用以下值： `catalog/category/view/id/<your_category_id>`

类别 ID 在管理员的类别编辑页面上可见。

管理此页面就像您通常对待您的产品列表/类别页面一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T14:33:00.413

尝试下载 magento 并安装演示商店....您可以使用[http://www.magentocommerce.com/knowledge-base](http://www.magentocommerce.com/knowledge-base)这个作为基础。

# c - 在 C 上初始化结构问题

> ID：11903738
> 
> 赞同：0
> 
> 时间：2012-08-10T14:26:45.230
> 
> 标签：c, struct, initialization

我在编译期间收到此错误：

> “c:\command_line.h(17): 错误 C2143: 语法错误: 缺少';' 在 '*' 之前注意：C++ 不支持 default-int command_line.h(17)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int"

这是我的代码：

### 命令行.h

```
typedef struct symbol
{
    char* sym_type;
    unsigned short address;
}symbol;

typedef struct symbol_map
{
    char** p_arr_keys;
    symbol* p_arr_values;
    int item_count;
    int array_mode;
    int copy_keys;
}symbol_map;

typedef struct params
{
    int data_counter;
    int code_counter;
    int line_counter;
    int command_len;
    int error_counter;
    int warning_counter;
    symbol_map* p_symbol_map; // (This is line 17- from the error msg)
    char* p_last_symbol
}params; 
```

### 主程序

```
params config;
config.code_counter = 0;
config.data_counter = 0;
config.line_counter = 0;
config.command_len = 0;
config.command_first_char = EMPTY;
config.error_counter = 0;
config.warning_counter = 0;
config.p_last_symbol = NULL;
config.p_symbol_map = {NULL}; // (This is line 17- from the error msg) 
```

知道这个初始化有什么问题吗？

```
 config.p_symbol_map = {NULL}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:33:40.160

您使用的构造`config.p_symbol_map = {NULL}`是静态初始化，仅允许在变量声明中使用。如果你想给你分配一个NULL，`p_symbol_map`你可以简单地`config.p_symbol_map = NULL`。

应用于`symbol`结构的静态初始化的有效情况如下：

```
symbol sym = {
   NULL,
   0x42
}; 
```

**更新：**

顺便说一句，您`char* p_last_symbol`在结构定义中缺少分号。

```
 typedef struct params
{
    int data_counter;
    int 
    int line_counter;
    int command_len;
    int error_counter;
    int warning_counter;
    symbol_map* p_symbol_map; // (This is line 17- from the error msg)
    char* p_last_symbol  <----- need to add ; here
}params; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:33:22.930

你不能那样做。您必须初始化配置 AFAIK。您可以这样做，因为您分配的是指针而不是结构。

```
config.p_symbol_map = NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:34:30.793

您不是在初始化结构，而是在初始化指向结构的指针。

```
struct foo {
  int a;
  int b;
};

struct foo bar = {.a = 0, .b = 1}; 
```

但是如果你声明一个指向它的指针，那么你一开始就没有内存块来初始化。所以你不能使用`{}`idiom 来初始化一个指向`struct`;的指针。

```
struct foo *bar;
bar = NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:34:38.453

那里出了点问题，您正在分配给`p_last_symbol`您未在 中声明的成员`params`。此外，`p_symbol_map`它是一个指向某物的指针，您可以使用它来初始化它，`NULL`也可以让它指向其他东西（例如使用 分配的内存`malloc`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:35:57.157

There is no need for `{}` around `NULL`. Just using `NULL` or `nullptr` would do. Further, what is `p_symbol_map`? There is no such thing in your declaration of params. Also, in line 17, it should be wrtten as:

`struct symbol_map* p_symbol_map`. This is the reason there is an error on line 17.

Hope this helped.

# java - 如何在 weblogic 中创建安全角色

> ID：11903739
> 
> 赞同：1
> 
> 时间：2012-08-10T14:26:56.357
> 
> 标签：java, weblogic

我按照这个教程在 weblogic 中创建安全角色：http: [//blog.whitehorses.nl/2010/01/29/weblogic-web-application-container-security-part-1/](http://blog.whitehorses.nl/2010/01/29/weblogic-web-application-container-security-part-1/)

我在 weblogic 服务器组 RobMon 中创建并使用 pass 进行用户监控。然后我创建这个xml：

我的 web.xml：

```
<security-constraint>

    <web-resource-collection>
        <web-resource-name>my-application</web-resource-name>
        <url-pattern>/admin</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>RobMon</role-name>
    </auth-constraint>
</security-constraint>

<security-role>
    <role-name>RobMon</role-name>
</security-role>

<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login</form-login-page>
        <form-error-page>/login</form-error-page>
    </form-login-config>
</login-config> 
```

weblogic.xml：

```
<wls:security-role-assignment>
    <wls:role-name>RobMon</wls:role-name>
    <wls:principal-name>RobMon</wls:principal-name>
</wls:security-role-assignment> 
```

现在我想println的作用和原则：

```
 Subject subject = Security.getCurrentSubject();
    Set<Principal> allPrincipals = subject.getPrincipals();
    for (Principal principal : allPrincipals) {
        if (principal instanceof WLSGroupImpl) {
            logger.error(principal.getName() + "??????????");
            roles.add(principal.getName());
        }
        if (principal instanceof WLSUserImpl) {
            logger.error(principal.getName() + "!!!!!!!!!!!");
            user = principal.getName();
        }
    } 
```

但这打印了我想要的其他东西

```
 admin!!!!!!!!!!!
 Administrators?????????? 
```

它应该 println 监视器和 RobMon。怎么了 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T16:40:49.317

在 weblogic.xml 中，您已将角色 RobMon 分配**给用户 RobMon**，这意味着当用户 RobMon 通过身份验证时，他将被分配 RobMon 角色。

在本教程中，使用主体组用户而不是 RobMon 用户，这意味着该组的所有用户将在通过身份验证后被分配角色。

检查您的安全领域中是否存在主体 RobMon。我认为您的安全领域中不存在用户 RobMon。您可能希望将角色分配给用户监视器。所以 weblogic.wml 中的配置应该是：

```
 <wls:security-role-assignment>
      <wls:role-name>RobMon</wls:role-name>
      <wls:principal-name>monitor</wls:principal-name>
    </wls:security-role-assignment> 
```

# media - 如何设置水平排列的按钮之间的距离

> ID：11903741
> 
> 赞同：0
> 
> 时间：2012-08-10T14:26:58.570
> 
> 标签：media, social, alignment

我想显示两个按钮，FB 和 Twitter，并排，水平对齐，但是，它们之间的空间太大。我应该如何保持两个按钮之间的距离最小？这是网站（HELLO WORD 下的 FB 和 Twitter 按钮）[http://blog.michelleaneous.com](http://blog.michelleaneous.com)

这是我当前的 CSS 代码：

```
.content_area2 .share{

display:inline; 
width:170px; 
```

}

.content_area2 .share ul{

}

.content_area2 .share ul li{

```
float:left;
display:inline; 
margin-left: 300px; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:32:25.780

您在“.conent_area2 .share ul li”上有“margin-left:300” - 这就是它们之间的距离。你能发布一个你想要的模拟（ png ）吗，我会给你 HTML 吗？

我的猜测是你的意思是把margin-left放在“.content_area2 .share ul”上。

如果你想在 CSS 中居中一个对象，你应该使用`{ margin-left:auto; margin-right:auto }`

整个CSS如下：

```
.content_area2 .share {
   width:200px;
   margin-left:auto;
   margin-right:auto;
}
.content_area2 .share ul li {
  float:left;
} 
```

有用。

[这是我的在线工作副本](http://www.mograbi.info/stackoverflow/share_buttons.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:00:50.163

使用这些样式。调整边距以设置距离。例如：2ex 或 10px。在每一侧。

```
.content_area2 .share {
  display: inherit;
  width: inherit;
  text-align: center;
}
.content_area2 .share ul li {
  float: inherit!important;
  margin: 0 1ex!important;
} 
```

# google-app-engine - GAE 上的电子邮件地址

> ID：11903750
> 
> 赞同：0
> 
> 时间：2012-08-10T14:27:19.913
> 
> 标签：google-app-engine, email

我有一个申请，`google app engine`我`abc.appspot.com`可以有一个电子邮件地址来发送/接收电子邮件，比如`admin@abc.appspot.com`请帮助我。

**编辑** 这里是我的`SendMail`课

```
public class SendMail {
  private static String fromAddress = "abc@gmail.com";

  private static Logger log = Logger.getLogger(SendMail.class.getCanonicalName());

  // Send the Mail
  public void send(String toAddress, String subject, String msgBody)
      throws IOException {

    Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);

    try {
      Message msg = new MimeMessage(session);
      msg.setFrom(new InternetAddress(fromAddress));
      InternetAddress to = new InternetAddress(toAddress);
      msg.addRecipient(Message.RecipientType.TO, to);
      msg.setSubject(subject);
      msg.setText(msgBody);
      Transport.send(msg, new InternetAddress[] { to });

    } catch (AddressException addressException) {
      log.log(Level.SEVERE, "Address Exception , mail could not be sent", addressException);
    } catch (MessagingException messageException) {
      log.log(Level.SEVERE, "Messaging Exception , mail could not be sent", messageException);
    }
  }
} 
```

所以它会发送一封电子邮件，`abc@gmail.com`但我希望它应该从`email@abc.appspot.com`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:44:51.817

您只能接收格式为 的电子邮件`@abc.appspotmail.com`。AFAIK 没有办法`@abc.appspot.com`作为接收地址。

如果您想从您的自定义域接收电子邮件，例如`@abc.com`，唯一的方法是让外部电子邮件服务将电子邮件转发到您的`@abc.appspotmail.com`. 大多数域名注册商提供免费的有限转发电子邮件服务（我们使用 GoDaddy 并免费获得有限转发）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:30:33.273

是的，您可以：[https ://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients](https://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients)

# php - 如何将下面的代码从mysql更改为mysqli

> ID：11903751
> 
> 赞同：0
> 
> 时间：2012-08-10T14:27:25.933
> 
> 标签：php, mysql, database, mysqli

在mysql中，我有以下代码：

```
$row = mysql_fetch_assoc($query);
$dbactive = $row['active'];

if ($dbactive == 1){

...

}... 
```

但我必须在我的项目中使用 mysqli。所以我尝试在下面更改它，但我不太正确。谁能帮我纠正mysqli中的以下语句，使其与上面的mysql语句相匹配？

更新：

我在 mysqli 中的尝试：

```
 // don't use $mysqli->prepare here
        $query = "SELECT TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
        // prepare query
        $stmt=$mysqli->prepare($query);
        // You only need to call bind_param once
        $stmt->bind_param("ss",$teacherusername,$teacherpassword);
        // execute query
        $stmt->execute(); 
        // get result and assign variables (prefix with db)
        $stmt->bind_result($dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

            while($stmt->fetch()) {

      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
   if ($dbActive == 1){

        $loggedIn = true;
}
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:31:06.203

如果您只返回一行，则不需要`while`循环。`bind_result()`获取`x`列并将它们的值按顺序分配给您传入的变量。因此，假设您的结果仅包含一行一列，则与with`bind_result($dbactive)`相同。`$dbactive = $row['active']``mysql_*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:31:59.690

绑定变量意味着无论何时调用 ->fetch()，结果行值都会自动放入该变量中。你正在用你的

```
$dbactive = $stmt['active']; 
```

$stmt 是结果对象，而不是行对象或数组。它不会包含您通过查询提取的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:33:39.067

你可以只使用查询方法，

```
$result = $myslqi->query($query);
while($row = $result->fetch_object()){
  $row->active …
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:36:38.323

要获取单行，您可以使用：

```
if($query = $db->prepare("your sql query where field1=? AND field2=?")){

    $query->bind_param('ss', $user_id); 
    $query->execute();
    $query->bind_result($field1, $field2);
    $query->fetch();
    echo $field1;

} 
```

# sonarqube - 如何在分支之间保持声纳的误报？

> ID：11903753
> 
> 赞同：8
> 
> 时间：2012-08-10T14:27:34.577
> 
> 标签：sonarqube

声纳是否可以在分支之间传输“误报”？

这是我们的工作流程：我们在分支 1 中开发，我们在这个分支上进行声纳检查，当分支 1 将被释放时，我们将其合并到主干中，然后我们从主干创建分支 2，然后我们在这个分支上进行声纳检查分支机构2。

这个“分支 2”是一个新的声纳项目（它不可能相同，因为我们有时会同时打开 2 个分支和 2 个声纳项目）。但是这个“分支2”声纳项目已经失去了所有的“误报”标记。

我们如何保持两个分支之间的误报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:02:26.780

不，这还不可能。您可以请求此功能并在 Sonar 用户邮件列表中进行讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-31T14:52:47.713

有一个插件可用于此[https://github.com/willemsrb/sonar-issueresolver-plugin](https://github.com/willemsrb/sonar-issueresolver-plugin)（也可在更新中心获得）

基本上，您将决议从一个分支导出到另一个分支。这可以使用您的 CI 系统自动执行，因为该插件提供 REST api。

*   从另一个项目更新问题：http POST to /api/issueresolver/update
*   从项目中导出问题：http GET to /api/issueresolver/export
*   在项目中导入问题：http POST to /api/issueresolver/import

# jquery - jScrollPane 和 jQuery 1.8.0

> ID：11903758
> 
> 赞同：14
> 
> 时间：2012-08-10T14:27:55.110
> 
> 标签：jquery, jscrollpane

更新到 jQuery 1.8.0 后，jScrollPane 给了我这个错误：

> 未捕获的错误：语法错误，无法识别的表达式：[type=text/javascript],not([type])

在这一行：

```
$("script",elem).filter('[type=text/javascript],not([type])').remove(); 
```

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T07:55:10.680

1.  `not`是一个伪选择器，前面应该有一个`:`used as`:not()`
2.  按属性名称-值过滤时，用作`selector[attr="value"]`- `[type="text/javascript"]`。

所以应该是——

```
.filter('[type="text/javascript"],:not([type])') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T11:35:19.087

这是 jScrollPane 的补丁。适用于 jquery 1.8.x [https://github.com/jarednorman/jScrollPane/commit/2ef4821afa1dd62db056e3dea737e6f84b17fb13](https://github.com/jarednorman/jScrollPane/commit/2ef4821afa1dd62db056e3dea737e6f84b17fb13)

这是最终的缩小版： [https ://raw.github.com/jarednorman/jScrollPane/2ef4821afa1dd62db056e3dea737e6f84b17fb13/script/jquery.jscrollpane.min.js](https://raw.github.com/jarednorman/jScrollPane/2ef4821afa1dd62db056e3dea737e6f84b17fb13/script/jquery.jscrollpane.min.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:16:54.003

最新版本的[jScrollPane (v2.0.0beta12 - 2012-09-27)](https://github.com/vitch/jScrollPane/blob/38f2aa9db7fdf5f1247eeeaaacaf8506bb77cdcc/script/jquery.jscrollpane.js)增加了对 jQuery 1.8 的支持：

```
$("script", elem).filter('[type="text/javascript"],:not([type])').remove(); 
```

# google-chrome-extension - 当没有上一页时，如何编写扩展以关闭“返回”尝试的选项卡？

> ID：11903760
> 
> 赞同：0
> 
> 时间：2012-08-10T14:28:02.407
> 
> 标签：google-chrome-extension

我发现自己越来越多地使用向左或向右 3 个手指的触摸板手势来在 Google Chrome 中执行“后退”或“前进”（在我的华硕 Zenbook 上，但我相信 Mac 上也有类似的手势）

我发现在浏览时，我会打开一个标签来阅读某些内容（比如来自 Twitter 或 Facebook 的点赞），当我完成后，我的直觉是“返回”以返回我正在浏览的上一个标签。（我想我从大量使用 Android 中获得了这种直觉）。

我想我需要一个 Chrome 扩展程序来关闭我当前的选项卡，如果我试图在历史记录中没有前一页的选项卡中“返回”。

我查看了 Chrome 事件和可以调用的各种方法，虽然 WebNavigation api 中有一个“forward_back”转换限定符，但在尝试使用触摸板手势或 Alt+左键盘快捷键“返回”时不会触发 onCommitted 事件.

此外，我找不到如何访问当前选项卡的历史记录以查看我所在的页面是否在堆栈中没有前一个。

任何人的想法？

```
function noHistory(tabId) {
    // TODO
}

function getCurrentTabId() {
    // TODO
}

function userHitBack() {
    tabId = getCurrentTabId();
    if (noHistory(tabId)) {
        chrome.tabs.remove(tabId)   
    }
}

function attachEvent() {
    // TODO attach userHitBack
}

attachEvent(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:52:40.143

要捕获“返回”事件，您需要处理按下的特定键以调用“userHitBack”函数。像这样的东西：

```
document.onkeydown = function() {
    if (keyId == ...)
        userHitBack()
} 
```

您可以利用这一点，因为您可以绑定任何键来触发选项卡的关闭。

要检查选项卡历史长度，请使用以下命令：

```
window.history.length 
```

它是 html5 历史API

# c# - 知道如何获取超过 15 个 URL 吗？

> ID：11903769
> 
> 赞同：2
> 
> 时间：2012-08-10T14:28:36.123
> 
> 标签：c#, vb.net

我在 gridview 上有复选框控件，可以选中所有并取消选中所有。

该页面还使用分页。每页有 25 条记录。当然，更多内容转到下一页。

用户选中一个或多个复选框，并使用以下代码处理用户的选择：

```
Dim uItems As String = String.Empty 

For Each r As GridViewRow In GridView1.Rows 

    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then 

        If uItems <> String.Empty Then 

            uItems += "," 

        End If 

        uItems += "http://default.html?gen=" & r.Cells(1).Text & "&NO=3&F=1" 

    End If 

Next 
```

如果用户检查 15 或更少，那么您会得到：

`http://default.html?gen=" & r.Cells(1).Text & "&NO=3&F=1`这是有效的，因为你得到了尽可能多的检查。

我们目前遇到的问题是，如果用户选中超过 15 个复选框，我们会得到

“Internet Explorer 无法显示网页；您可以尝试什么 - 诊断连接...”

经过几次故障排除后，我们发现它中断的原因是我们可以将超过 15 个值从 cell(1) 传递到该链接。

有人知道解决方法吗？

这与我昨天发布的问题完全相同，只是我描述不正确，从而使专家难以给出正确的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:34:57.413

我认为这与我曾经遇到过的问题相同：您正在构建的 URL 太长，无法正确处理请求。

如果您需要在 URL 中发送[很长的数据序列，](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)您应该切换到 POST 请求（代替 GET 请求），从而从查询字符串中删除数据

另一种选择是使用相同的键附加 URL 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:34:31.540

听起来您可能会遇到 url 长度的限制（请参阅[此处](http://www.boutell.com/newfaq/misc/urllength.html)- 您可能会尝试使用其他浏览器进行确认）。您从每个单元格中检索的文本多长时间？

如果这是问题所在，那么您可能想要 POST 而不是 GET（这是查询字符串正在执行的操作）到您的服务器，或者想办法缩短查询字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:37:21.690

使用您发布的代码，如果您检查了多个项目，您的网址将类似于

`http://default.html?gen=sometext&NO=3&F=1,http://default.html?gen=sometext&NO=3&F=1,http://default.html?gen=sometext&NO=3&F=1`

我不认为这是你想要的。

尝试

```
Dim uItems As String = String.Empty  

For Each r As GridViewRow In GridView1.Rows  
    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then  
        If uItems <> String.Empty Then  
           uItems += ","  
        End If  
        uItems +=  r.Cells(1).Text  
    End If  
Next  
uItems = "http://default.html?gen=" & uItems & "&NO=3&F=1" 
```

那应该返回更像

`http://default.html?gen=sometext,itemblah,moretext&NO=3&F=1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:49:27.410

我怀疑您生成的查询字符串太长，但代码还有其他问题。我已将其更改为使用 a`StringBuilder`并保存`String`s 的重复实例化。

```
Dim uItems As New StringBuilder("http://default.html?gen=")

For Each r As GridViewRow In GridView1.Row
    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then
        uItems.AppendFormat("{0},", r.Cells(1).Text)
    End If
End For

-- Remove trailing delimiter
uItems.Remove(uItems.Length - 1, 1)

uItems.Append("&NO=3&F=1") 
```

有了这个代码`uItems.ToString()`会给你这样的东西

```
http://default.html?gen=bla1,bla2,bla3&NO=3&F=1 
```

可能是您实际上想要这样的东西。

```
Dim uItems As New StringBuilder("http://default.html?")

Dim checkCount = 0
For Each r As GridViewRow In GridView1.Row
    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then
        uItems.AppendFormat("g{0}={1}&", checkCount, r.Cells(1).Text)
        checkCount += 1
    End If
End For

-- Remove trailing delimiter
uItems.Remove(uItems.Length - 1, 1)

uItems.Append("&NO=3&F=1") 
```

这将枚举查询字符串中已检查的单元格并为您提供类似的内容。

```
http://default.html?g1=bla1&g2=bla2&g3=bla3&NO=3&F=1 
```

* * *

**为每个选中的项目返回一个 URL**

```
Dim urlItems = New List(Of String)()

Const urlFormat As String = _
    "http://default.html?gen={0}&NO=3&F=1"

For Each r As GridViewRow In GridView1.Row
    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then
        Dim url = String.Format(urlFormat, r.Cells(1).Text)
        urlItems.Add(url)
    End If
End For 
```

这使得`urlItems`它是一个通用的字符串列表，每个项目都是一个 url

* * *

好的，上面的位向您展示了如何获取 url 字符串列表，因此，迭代 url

```
For Each url As String In urlItems
    //... Some code for POSTing or GETting .. your request 
End For 
```

# css - 之间添加空格 元素

> ID：11903773
> 
> 赞同：75
> 
> 时间：2012-08-10T14:28:59.590
> 
> 标签：css

我有一个导航菜单，似乎无法在元素`margin: 3px;`之间添加空格（） 。`<li>`

[你可以在这个jsfiddle](http://jsfiddle.net/bpmKW/)或下面看到 HTML 和 CSS 代码。

你会看到我添加了一个`border-bottom: 2px solid #fff;`来`#access li`模拟元素之间的空间，但这不起作用，因为在导航菜单下我会有一堆不同的颜色。如果我添加`margin-button: 2px`它不起作用。

这是 HTML：

```
<nav id="access" role="navigation">
    <div class="menu-header-menu-container">
        <ul id="menu-header-menu" class="menu">
            <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41">
                <a href="http://localhost:8888/fullstream/?page_id=5">About Us</a>
            </li>
            <li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35">
                <a href="http://localhost:8888/fullstream/?page_id=7">Services</a>
            </li>
            <li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34">
                <a href="http://localhost:8888/fullstream/?page_id=9">Environmental Surface Cleaning</a>
            </li>
            <li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-33">
                <a href="http://localhost:8888/fullstream/?page_id=11">Regulations</a>
            </li>
            <li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-32">
                <a href="http://localhost:8888/fullstream/?page_id=13">Contact Us</a>
            </li>
       </ul>
</div> 
```

这是CSS：

```
#access {
    background: #0f84e8; /* Show a solid color for older browsers */
    display: block;
    margin: 0 auto 6px 55px;
    position: absolute;
    top: 100px;
    z-index: 9999;
}
#access ul {
    font-size: 13px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
    padding-left: 0;
}
#access li {
    position: relative;
    padding-left: 11px;
}
#access a {
    border-bottom: 2px solid #fff;
    color: #eee;
    display: block;
    line-height: 3.333em;
    padding: 0 10px 0 20px;
    text-decoration: none;
}

#access li:hover > a,
#access ul ul :hover > a,
#access a:focus {
    background: #efefef;
}
#access li:hover > a,
#access a:focus {
    background: #f9f9f9; /* Show a solid color for older browsers */
    background: -moz-linear-gradient(#f9f9f9, #e5e5e5);
    background: -o-linear-gradient(#f9f9f9, #e5e5e5);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#f9f9f9), to(#e5e5e5)); /* Older webkit syntax */
    background: -webkit-linear-gradient(#f9f9f9, #e5e5e5);
    color: #373737;
}
#access ul li:hover > ul {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-10T14:34:37.893

**2021 年更新**

我最初的答案是从 2012 年开始，当时许多 3 级 CSS 选择器都不存在。为了实现这一点，我们需要 JS 或其他显式的 CSS 样式/类来实现它。正如@AlphaX 指出的那样，现在最好的解决方案就是

```
li.menu-item:not(:last-child) { 
   margin-bottom: 3px;  
} 
```

**旧答案**

添加：

```
margin: 0 0 3px 0; 
```

到你`#access li`和移动

```
background: #0f84e8; /* Show a solid color for older browsers */ 
```

到`#access a`并取出`border-bottom`。然后它会工作

**这里：http:** [//jsfiddle.net/bpmKW/4/](http://jsfiddle.net/bpmKW/4/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-10T14:31:09.987

您可以使用该`margin`属性：

```
li.menu-item {
   margin:0 0 10px 0;   
} 
```

演示：http: [//jsfiddle.net/UAXyd/](http://jsfiddle.net/UAXyd/)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-05-04T11:43:31.310

由于您要求**`space between`**，我会在最后一项上添加一个覆盖以消除那里的额外边距：

```
li {
  background: red;
  margin-bottom: 40px;
}

li:last-child {
 margin-bottom: 0px;
}

ul {
  background: silver;
  padding: 1px;  
  padding-left: 40px;
}
```

```
<ul>
<li>Item 1</li>
<li>Item 1</li>
<li>Item 1</li>
<li>Item 1</li>
<li>Item 1</li>
</ul>
```

它的结果可能并非始终可见，因为[边距折叠](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Mastering_margin_collapsing)和其他东西......在我包含的示例片段中，我在 - 元素中添加了一个小`1px padding`元素`ul`以防止折叠。尝试删除`li:last-child`-rule，您会看到最后一项现在扩展了`ul`-element 的大小。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-10-16T00:00:55.783

有一个强大的功能`flex`允许指定每个孩子之间的空间，而不必通过`gap`. `margin`我发现自己比此时更频繁地使用：

```
ul {
  display: flex;
  flex-direction: column;
  gap: 10px;
} 
```

## 例子

```
li {
  background: red;
}

ul {
  background: silver;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
```

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
  <li>Item 4</li>
  <li>Item 5</li>
</ul>
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-21T13:31:02.437

**这里的**大多数答案****都不正确**，因为它们也会将底部空间添加到最后`<li>`，因此它们不会仅在两者之间添加空间`<li>`！**

 **最**准确和最有效**的解决方案如下：

```
li.menu-item:not(:last-child) { 
   margin-bottom: 3px;  
} 
```

*说明：* 通过使用`:not(:last-child)`样式将应用于所有项目（li.menu-item），但最后一项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-29T20:28:42.160

简单快速。只需将 css 放入 ul 元素（'gap' 属性定义 li 元素之间的空间）：

```
display: flex;
align-items: flex-start;
flex-direction: column;
gap: 40px; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-07T23:27:24.443

我只想对大家说：

> 只玩保证金

`<li>`如果您使用边距，则在两者之间添加空间会容易得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-13T06:22:25.163

```
#access a {
    border-bottom: 2px solid #fff;
    color: #eee;
    display: block;
    line-height: 3.333em;
    padding: 0 10px 0 20px;
    text-decoration: none;
} 
```

我看到你使用了 line-height 但你把它给了`<a>`标签而不是`<ul>` 试试这个：

`#access ul {line-height:3.333em;}`

那时你就不需要玩利润了。**

# web-services - 通过 Java Web 服务将内容传输到 iPad

> ID：11903777
> 
> 赞同：1
> 
> 时间：2012-08-10T14:29:11.983
> 
> 标签：web-services, ipad, attachment

我们正在开发 iPad 应用程序，该应用程序应从服务器下载内容（PDF、MP4、PPT）。为此，我们正在开发一个网络服务来传输内容。内容的大小约为 50 到 100 MB

我需要澄清以下内容

1.  据我了解，不可能将大内容作为 SOAP 附件发送。
2.  如果我将内容作为网页 URL 并传输到 iPad，iPad 可以点击 URL 并下载内容。

上述解决方案的主要区别是什么？

什么是满足我要求的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:33:26.353

1.  如果可能，我会避免使用 SOAP 服务，因为您将花费不必要的时间来处理 SOAP 包装器。如果确实需要使用，可以使用 wsdl2objc 等项目来生成 Objective C 源代码。我建议改用基于 REST 的服务。

2.  是的，iPad 可以点击 URL 并下载内容。分段下载而不是 50-100MB 的巨大下载（即，单独下载每个文件）可能会更好。

# mysql - mysql查询选择多对多

> ID：11903784
> 
> 赞同：1
> 
> 时间：2012-08-10T14:29:35.080
> 
> 标签：mysql

我有以下表格：

*   小部件
*   字段
*   Widgets_Fields

Widgets 表是一个简单的产品/列表表，带有 id、user_id、add/updated 等。

字段表列出了小部件的字段名称。可以有任意数量的字段（例如，高度、宽度、价格、年份、颜色等）。字段表：

*   ID
*   姓名

每个小部件可以具有与其关联的任意数量的字段和值。Widgets_Fields 表如下所示：

*   ID
*   field_id
*   小部件_id
*   价值

如果您只是想获取一个小部件或一组小部件的所有字段，这非常简单：

```
select widget_id from widgets_fields where widget_id = xxx 
```

但是，如果您正在搜索小部件并且只想查找那些字段具有特定值的小部件，该怎么办？也可行

```
select widget_id from widgets_fields where field_id = xxx and value = xxx 
```

当我想基于多个字段选择小部件时，我的问题就出现了。例如，所有“红色”或“橙色”且年份为 2012 或 2011 的小部件

```
select widget_id from widgets_fields where 
(field_id = xxx and (value = 'red' or value = 'orange')
and
(field_id = xxy and (value = 2012 or value = 2011) 
```

这产生了一个不可能的地方。或者我可以做这样的事情

```
select widget_id from widgets_fields where
field_id in (xxx, xxy)
and value in ('red', 'orange', 2012, 2011) 
```

但它不一定会返回我想要的，因为它会在任何提供的字段 id 中查找给定的值。

所以，最后，我的问题是是否有任何方法可以正确构建查询来完成此操作？我确定一定有，但我已经研究了一段时间，还没有提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:40:49.093

```
all widgets that are either 'red' or 'orange' 
AND also have a year of 2012 or 2011 
```

可以通过子查询和 INNER JOIN 一起完成结果

```
SELECT widget_id FROM
(SELECT widget_id FROM widgets_fields
WHERE field_id = 'color' and value in ('red', 'orange')) ResultSetA
INNER JOIN
(SELECT widget_id FROM widgets_fields
WHERE field_id = 'year' and value in (2011, 2012)) ResultSetB
ON ResultSetA.widget_id = ResultSetB.widget_id 
```

简而言之，这将是“获取所有红色和橙色小部件的 id，然后获取 2011 年或 2012 年所有小部件的 id，然后给我出现在两个列表中的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:46:11.317

两种方法立即浮现在脑海。一种是使用`EXSISTS`子查询：

```
select * from widgets where
    exists (select * from widgets_fields where field_id = xxx and (value = 'red' or value = 'orange') and widget_id=widgets.id)
    and exists (select * from widgets_fields where field_id = xxy and (value = 2012 or value = 2011) and widget_id=widgets.id) 
```

另一种是将`JOIN`s 与子查询一起使用：

```
select a.widget_id from
    (select widget_id from widgets_fields where field_id = xxx and (value = 'red' or value = 'orange')) a
    join (select widget_id from widgets_fields where field_id = xxy and (value = 2012 or value = 2011)) b
        on (a.widget_id=b.widget_id) 
```

我不确定性能，它可能取决于您拥有多少数据以及有哪些索引。

# jquery - JQuery：表单POST问题

> ID：11903794
> 
> 赞同：0
> 
> 时间：2012-08-10T14:30:00.247
> 
> 标签：jquery, forms, post

我正在尝试使用表单的数据来创建一个 JSON 文件，我可以在我的应用程序的其他页面中使用该文件。

我正在使用 JQuery Mobile 及其[POST 方法。](http://api.jquery.com/jQuery.post/) 但是我没有得到任何结果，我也不知道为什么。这是我的代码。

```
<form id="#formK">
    <label>Text
        <input type="text" name="header" />
    </label>
    <div data-role="button" id="save" />Save</div>
</form>

<script type="text/javascript">

$("#save").click( function(){
    $.post("OptJson.php", {head : $('[name=header]').val(); }, json );
});

</script> 
```

这是我的 OptJson.php 页面的来源

```
<?php
echo $_POST['head'] ;    
?> 
```

错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:33:26.853

尝试删除分号`head : $('[name=header]').val();`

如果我在 Chrome 浏览器中运行您的代码，我会收到以下消息：`SyntaxError: Unexpected token ;`. 分号是*语句终止符*，您不想终止该语句，您只想调用函数并将结果用作参数。

您发送的参数是一个 JavaScript 对象，您可以这样构造它：

```
var myObject = {
   data: "stuff",
   otherData: getStuff()
}; 
```

**不像**这样：

```
//THIS IS WRONG
var myObject = {
   data: "stuff";
   otherData: getStuff();
};
//THIS IS WRONG 
```

注意分号的不同用法。

**编辑：**此外，`dataType`必须将参数指定为字符串，因此`"json"`, not `json`。

我强烈建议您使用大多数现代浏览器中存在的 Web 开发人员工具（我更喜欢 Chrome，但 Firefox 也有很好的工具）。检查“控制台”选项卡并查看浏览器报告的错误。在调试您的 JavaScript 代码时，它将大有帮助。

**Edit2：**如果你想真正看到返回的数据，你必须像这样使用成功回调：

```
$.post("OptJson.php", {head : $('[name=header]').val() }, function(data){
    alert(data); //do stuff with returned data
}, "json"); 
```

# c - 如何读取 evbuffer 并将其放入 libevent 中的字符串 (char*)

> ID：11903796
> 
> 赞同：4
> 
> 时间：2012-08-10T14:30:05.337
> 
> 标签：c, unix, libevent

我正在使用 libevent 及其 http API 来编写一个能够编写 C servlet 的简单 HTTP 服务器。这个 servlet 与 GET 一起工作正常，但现在我正在使用 POST 发送一些数据，我想读取传入的事件缓冲区 evb。我想打印/检查 evb 中存在的数据，但我不能。你知道如何将数据放入 char* 变量中的 evb (evbuffer) 中吗？我只看到了操作缓冲区的方法，但没有看到它。我试过：

evb->

这是代码：

```
 #include <stdio.h>
    #include "servlet.h"

    void servlet(struct evhttp_request *req, struct evbuffer *evb) {
        time_t now;
        time(&now);
        evbuffer_add_printf(evb, "<html>\n <head>\n"
            "  <title>%s</title>\n"
            " </head>\n"
            " <body>\n"
            "  <h1>%s</h1>\n"
            " <p>Current time is: %s</p>",
            "C servlet engine", "C servlet", ctime(&now));
        evhttp_add_header(evhttp_request_get_output_headers(req),
            "Content-Type", "text/html");
        evhttp_send_reply(req, 200, "OK", evb);
    }

I am trying this 

void servlet(struct evhttp_request *req, struct evbuffer *evb) {
    size_t len = evbuffer_get_length(evhttp_request_get_input_buffer(req));
    struct evbuffer *in_evb = evhttp_request_get_input_buffer(req);
    char *data;
    evbuffer_copyout(in_evb, data, len); 
```

但我得到总线错误：10（我在 Mac 上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:00:42.033

听起来你想使用

```
ev_ssize_t evbuffer_copyout(struct evbuffer *buf, void *data, size_t datalen) 
```

它将缓冲区内容（最多`datalen`字节）复​​制到内存区域`data`。它记录在[libevent 书中](http://www.wangafu.net/~nickm/libevent-book/Ref7_evbuffer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-04T09:19:14.880

这是一种有效的方法：

```
static void echo_read_cb(struct bufferevent *bev, void *ctx)
{
/* This callback is invoked when there is data to read on bev. */
struct evbuffer *input = bufferevent_get_input(bev);
struct evbuffer *output = bufferevent_get_output(bev);

size_t len = evbuffer_get_length(input);
char *data;
data = malloc(len);
evbuffer_copyout(input, data, len);

printf("we got some data: %s\n", data);

/* Copy all the data from the input buffer to the output buffer. */
evbuffer_add_buffer(output, input);
free(data);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-25T07:49:19.430

根据 libevent 的 buffer.h 中的源代码，我们应该使用

```
int evbuffer_remove(struct evbuffer *buf, void *data, size_t datlen); 
```

代替

```
ev_ssize_t evbuffer_copyout(struct evbuffer *buf, void *data_out, size_t datlen); 
```

这是从 buffer.h 借来的代码

```
/**
  Read data from an evbuffer and drain the bytes read.

  If more bytes are requested than are available in the evbuffer, we
  only extract as many bytes as were available.

  @param buf the evbuffer to be read from
  @param data the destination buffer to store the result
  @param datlen the maximum size of the destination buffer
  @return the number of bytes read, or -1 if we can't drain the buffer.
 */
int evbuffer_remove(struct evbuffer *buf, void *data, size_t datlen);

/**
  Read data from an evbuffer, and leave the buffer unchanged.

  If more bytes are requested than are available in the evbuffer, we
  only extract as many bytes as were available.

  @param buf the evbuffer to be read from
  @param data_out the destination buffer to store the result
  @param datlen the maximum size of the destination buffer
  @return the number of bytes read, or -1 if we can't drain the buffer.
 */
ev_ssize_t evbuffer_copyout(struct evbuffer *buf, void *data_out, size_t datlen); 
```

# google-apps-script - UserManager.getAllUsers() 返回子集

> ID：11903802
> 
> 赞同：-3
> 
> 时间：2012-08-10T14:30:23.863
> 
> 标签：google-apps-script

对 UserManager.getAllUsers() 的调用无法返回所有用户，看起来它不知道使用谷歌应用程序的子域。它只返回 domain.edu 而不是 sub.domain.edu 的用户。如何获取所有可用用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:57:56.187

谷歌应用程序中没有子域的概念。当使用子域设置 google Apps 域时，它是 Google Apps 的独立实例。

# php - 如何格式化数据库查询的url

> ID：11903803
> 
> 赞同：0
> 
> 时间：2012-08-10T14:30:25.197
> 
> 标签：php, mysql, .htaccess, url, url-rewriting

我是新来的，需要你的帮助。我开始使用 .htaccess 和 php，但遇到了一个问题。在进行 url 重写时，我将一个字符串传递给 url，该字符串是从数据库中提取的文章的标题。问题是字符串（标题）有很多在 url 中拼写错误的字符。EG: localhost/news/php%5%is%out 这里 % 是空格。我尝试用 preg_replace 格式化每个标题，并用“-”替换每个空格，但是有很多字符，我想知道是否有任何方法可以在没有 preg_replace 的情况下执行此操作，因此任何字符串都可以用于查询。在 news.php 中，我从 url 中获取字符串，并将其用于数据库中的查询，从中提取整篇文章的正文。

```
RewriteRule ^news/([a-zA-Z0-9._]+)/?$ /news.php?news_title=$1 
```

这是我的 .htaccess 文件，所以在 news.php 中我通过 $_GET 获取“news_title”变量，然后查询数据库以找到具有此标题的文章。所以我的问题是，我做错了吗？有没有其他方法可以做到这一点？我仅在 2 天前开始使用 htaccess，我想让我的网址更友好。我希望我的问题很清楚。感谢所有帮助我的人。

仅举个例子，这是我用来转换字符串中的普通图块的方法，该字符串不会随 url 中的符号（；amp、%、？等）改变

```
function generateUrl($url) {

    $v1 = preg_replace("/[\s\:\;\,\_\'\`\"\?\!\%\(\)\+\=\#\@\[\]\{\}\/]/", "-", $url );
    $v2= preg_replace('/[-]{2,}/', '-', $v1);
    $v3 = preg_replace('/^[-]/', '', $v2);
    $final = preg_replace('/[-]$/', '', $v3);

    return $final;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:48:52.833

我认为您的问题的答案是[PHP 中的 URL 友好用户名？](https://stackoverflow.com/questions/2103797/url-friendly-username-in-php). 当您将文章添加到表格时，使用此功能（Slug）转换文章标题并将转换后的标题存储在“slug”列中。当用户输入地址 (.....)/article.php?name=some-title 时，使用 $slug = $_GET['title'] 并通过 slug 查找文章。在保存文章之前，您应该检查是否存在带有此 slug 的文章。如果存在添加到 slug 一些数字，然后保存到 db。您不能允许在表中存在两条具有相同 slug 的记录。

# eclipse - Eclipse 远程系统资源管理器问题

> ID：11903805
> 
> 赞同：3
> 
> 时间：2012-08-10T14:30:32.023
> 
> 标签：eclipse

我刚刚在 Eclipse Indigo 中安装了这个插件，希望在 Eclipse 中工作时能够以一种简洁的方式访问 FTP 和 SSH 站点。

但是，我无法连接到 SSH 和 FTP 站点。我坐在同一台计算机上，使用 FlashFXP 和 Putty 连接到 FTP 和 SSH，没有任何问题。但是当我在 Eclipse 中将这些服务器连接到 RSE 中时，在尝试访问服务器/站点时出现连接被拒绝错误。

SSH 给出此错误：

> ```
> java.net.SocketException: Permission denied: connect 
> ```

FTP 给出此错误：

> ```
> Operation failed with exception
> 'java.net.SocketException: Permission denied: connect' 
> ```

为连接选择“连接”时控制台中没有错误 - 当我尝试浏览连接的“我的主页”或“根”时会弹出错误。

有任何想法吗？我正在通过 Cisco AnyConnect VPN 连接工作，但由于我可以与其他客户端进行 FTP 和 SSH，我觉得奇怪的是 Eclipse 不允许我这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:23:30.680

将代理设置更改为**直接连接**，因为 eclipse 使用默认代理。所以把它改成direct。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T18:12:49.233

我遇到了同样的问题，经过几天的搜索，我发现唯一的解决方案是恢复到 Java 6，

Java 7 导致了所有这些错误

就像一切都是免费的，你独自一人，没有任何支持

即使我解决了问题，我又回到了使用 Dreamweaver，仅此支持就物有所值

# c# - NHibernate - 二级集合缓存不一致

> ID：11903809
> 
> 赞同：2
> 
> 时间：2012-08-10T14:30:38.823
> 
> 标签：c#, nhibernate, caching

我正在使用 NHibernate 3.2 的二级缓存 (SysCache)。我正在删除该集合并在同一事务中在其上写入新元素。但是，这会破坏缓存，因为它仍然保存对已删除元素的引用。交易代码：

```
 RepositorioMovimentacao.Delete(notaHibernate.MovimentacaoItemEquipList);
 RepositorioNota.Update(notaHibernate);
 RepositorioMovimentacao.Save(model.MovimentacaoItemEquipList);
 Session.Commit() 
```

在不同会话上检索实体时引发异常：

```
No row with the given identifier ... 
```

这是我的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="CMD.Business.BusinessEntity" namespace="CMD.Business.BusinessEntity.Entities">
  <class name="NotaMovimentacaoEquipamento" table="CEM.NOTA_MOVIMENTACAO_EQUIPAMENTO" lazy="true" dynamic-update="true" dynamic-insert="true" >
    <cache  usage="read-write"/>
...
    <bag name="MovimentacaoItemEquipList" inverse="true" generic="true" lazy="true" >
      <cache  usage="read-write"/>
      <key>
        <column name="NTMO_SQ_NOTA_MOVIMENTACAO"/>
      </key>
      <one-to-many class="MovimentacaoItemEquip" />
    </bag>
... 
```

多对一映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="CMD.Business.BusinessEntity" namespace="CMD.Business.BusinessEntity.Entities">
    <class name="MovimentacaoItemEquip" table="CEM.MOVIMENTACAO_ITEM_EQUIP" lazy="true" dynamic-update="true" dynamic-insert="true" >
    <cache  usage="read-write"/>
...
  <many-to-one name="NotaMovimentacaoEquipamento" class="NotaMovimentacaoEquipamento">
      <column name="NTMO_SQ_NOTA_MOVIMENTACAO" />
    </many-to-one>
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:39:58.897

找到了解决方案。删除父集合时，始终在提交之前将父集合设置为 null。

例子：

```
ChildRepository.Delete(parent.ChildList)
parent.ChildList = null; 
```

不这样做会导致缓存损坏。

# ruby-on-rails-3 - “预期的 css ......返回一些东西”：rspec 在手动测试时失败（我自己无法重现失败）

> ID：11903810
> 
> 赞同：0
> 
> 时间：2012-08-10T14:30:42.507
> 
> 标签：ruby-on-rails-3, rspec, capybara

我正在开发一个类似于 Ogame 的游戏（[https://github.com/arnlen/ogame-like](https://github.com/arnlen/ogame-like)）的培训应用程序。

我正在使用 rspec（与 Ca​​pybara 一起）来测试我的应用程序。我被堆叠了几个小时，因为 rspec 正在抱怨一个错误 **我无法*用我的浏览器自己重现 *。

这是我的**rspec 代码**：

```
describe 'Planet pages' do

let(:user){FactoryGirl.create(:user)}
before {sign_in user}

subject {page}

describe "new planet page" do
    before {visit new_planet_path}  

    describe "with valid information" do
        before do
            visit new_planet_path
            fill_in "Name", with: "MyPlanet"
            click_button "Validate"
        end

        # This test doesn't pass
        it {should have_selector('h1', text: "Planet")}
    end
end

end 
```

失败 ：

```
 1) Planet pages new planet page with valid information
 Failure/Error: it {should have_selector('h1', text: "Planet")}
   expected css "h1" with text "Planet" to return something
 # ./spec/requests/planet_pages_spec.rb:34:in `block (4 levels) in <top (required)>' 
```

这是涉及的代码。

rspec 使用的我的函数“ **sign_in ”** *（位置：spec/support/utilities.rb）*

```
def sign_in(user)
    visit signin_path

    fill_in "Email", with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"
end 
```

我的**用户控制器**

```
class UsersController < ApplicationController

before_filter :signed_in_user, only: [:index, :show, :edit, :update, :destroy]

def new
    @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
    sign_in @user
    redirect_to new_planet_path
else
    render 'new'
end
 [...] 
```

我的**行星控制器**

```
class PlanetsController < ApplicationController

before_filter :signed_in_user

def index
    @planets = current_user.planets
end

def new
    @planet = Planet.new
end

def create
    @planet = Planet.new(name: params[:planet][:name],
        coordinates: generate_coordinates,
        metal_ressource: 1000,
        user_id: current_user.id)
    if @planet.save
        flash[:success] = "Welcome on your first planet!"
        redirect_to action: 'index'
    else
        flash[:error] = "Error naming your planet"
        render 'new'
    end
end
end 
```

和**我的星球索引视图**

```
<% @planets.each do |planet| %>
    <h1>Planet : <%= planet.name %></h1>
    <p><%= "Coordinates : #{planet.coordinates}" %></p>
<% end %> 
```

我尝试使用 Capybara 方法“ **save_and_open_page** ”，但 rspec 引发错误“未定义方法”

我还尝试通过对我的规范文件进行迭代逐步调试，它显示**错误发生在 "click_button 'Validate'" 之后**。由于未知原因，rspec 似乎无法到达planets_path（来自PlanetsController 的“索引”操作）。

我出去了，如果有人有想法，我接受它！

* * *

## 编辑：已解决 - 发现问题！

使用 Capybara 的“ **save_and_open_page** ”方法，我弄清楚了发生了什么：rspec 创建的星球没有任何坐标，这是模型不允许的。

* * *

### 如何使用美妙的“save_and_open_page”方法进行调试

1.  将此添加到您的 gemfile 中：“ **gem 'launchy'** ”
2.  安装它：**捆绑安装**
3.  将命令“ **save_and_open_page** ”放在您想要的任何位置

* * *

希望它可以帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:30:23.940

Capybara 也有一个`save_page`更容易使用的方法，因为它似乎不需要“启动”宝石。页面保存在`tmp/capybara`. 在 rspec 测试中，请务必使用`save_page`inside `before`、`it`或其他一些块。它不能作为单独的命令工作。例子：

```
 before { visit signup_path; save_page } 
```

# php - 使用 codeigntier 对查询进行 foreach？

> ID：11903811
> 
> 赞同：1
> 
> 时间：2012-08-10T14:30:44.490
> 
> 标签：php, mysql, codeigniter, model

我正在尝试使用**codeigniter**`foreach`在我的模型上做一个，但它给了我一个错误并返回了结果。

 **这是代码：

```
public function read(){
        $questions; //array
        $query = $this->db->get('questions');
        foreach($query->result() as $row){
            $getAnswers = $this->db->get_where('answers', array('question_id'=>$row['question_id]']), 4);
            $questions= $getAnswers;

           }

        return $questions;
     } 
```

这是错误：

> 致命错误：不能使用 stdClass 类型的对象作为数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:35:26.533

`row`作为对象访问：

```
$getAnswers = $this->db->get_where('answers', 
                   array('question_id'=>$row->question_id), 4); 
```**

# mysql - 删除巨大的mysql表中的所有字段

> ID：11903815
> 
> 赞同：1
> 
> 时间：2012-08-10T14:30:53.973
> 
> 标签：mysql, sql, database, phpmyadmin, bigtable

我有很多db，现在我需要删除一些表，其中有很多数据，大约数百万，但是如果我使用sql语法，phpmyadmin界面或删除表删除，刷新后我仍然有一些数据。如何删除清除表中的所有数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:33:02.213

确保擦除表的最简单方法是使用该`TRUNCATE TABLE table_name`语句。如果之后表中仍有数据，则意味着某些东西正在不断地向表中添加数据。

# jqgrid - Jqgrid：动态改变行颜色

> ID：11903817
> 
> 赞同：0
> 
> 时间：2012-08-10T14:30:59.917
> 
> 标签：jqgrid

我正在使用 Jqgrid 。我想根据列值更改行颜色。我可以根据此列值更改行的类。但我需要的是使用从服务器获得的颜色值更改字体颜色。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:22:41.563

或者你也可以试试这个，在loadComplete中，像这样获取jqgrid的所有行ID

```
var allRowsOnCurrentPage = $('#grid').jqGrid('getDataIDs'); 
```

假设您在 jqgrid 中有 name 和 company 列，并且有两行。对于一行数据是这样的

名称：xxx 公司：yyy

对于第二行，您有这样的数据

名称：aaa 公司：bbb

所以你在 for 循环中得到 Name 值

```
for(int i=1;i<=allRowsOnCurrentPage.length;i++)
{
var Name=$('#grid').jqGrid('getCell',i,'Name');
if(Name="aaa")
{
$('#grid').jqGrid('setCell',i,"Name","",{'background-color':'yellow');
}
} 
```

代码未经测试，但应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:07:58.053

您可以通过使用列[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)来做到这一点。

格式化程序将是您使用以下格式编写的 javascript 函数：

```
function myformatter ( cellvalue, options, rowObject )
{
     // format the cellvalue to new format
     return new_formated_cellvalue;
} 
```

网格将路由这些值的位置：

*   cellvalue - 是要格式化的值。
*   options - 是一个包含有关单元格/行的信息的对象。
*   rowObject - 是由您的网格数据类型选项确定的格式的行数据。

因此，在您的自定义格式化程序中，您可以获取单元格值并对其应用类或内联字体样式，如下所示：

```
function myformatter ( cellvalue, options, rowObject )
{
    if (cellvalue == "red")
         return '<font color="red">' + cellvalue + '</font>';//or use classes
    else
         return '<font color="blue">' + cellvalue + '</font>';//or use classes
} 
```

然后在您的列定义中，您只需指定哪些列将使用此格式化程序，就像这样（添加到任何需要字体颜色的列）：

```
colModel: [ 
      ... 
      {name:'price', index:'price', width:60, align:"center", editable: true, formatter:myformatter},
      ...
   ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T22:38:20.497

在 colModel 中使用 cellattr 属性

```
cellattr: function (rowId, value, rowObject, colModel, arrData){
return 'style=background-color:black;'; } 
```

# c - 将结构转换为 int

> ID：11903820
> 
> 赞同：11
> 
> 时间：2012-08-10T14:31:10.223
> 
> 标签：c, casting, struct

考虑到 <= 中的结构为 int 的 sizeof，是否有一种将结构转换为 uint64_t 或任何其他 int 的干净方法？我唯一能想到的只是一个“好的”解决方案——使用工会。然而我从来没有喜欢过他们。

让我添加一个代码片段来澄清：

```
typedef struct {
uint8_t field: 5;
uint8_t field2: 4;
/* and so on... */
}some_struct_t;

some_struct_t some_struct;
//init struct here

uint32_t register; 
```

现在我如何转换 some_struct 以在 uint32_t 寄存器中捕获其位顺序。

希望这能让它更清楚一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-07T14:27:19.960

我刚刚遇到了同样的问题，我用这样的工会解决了这个问题：

```
typedef union {
    struct {
        uint8_t field: 5;
        uint8_t field2: 4;
        /* and so on... */
    } fields;
    uint32_t bits;
} some_struct_t;

/* cast from uint32_t x */
some_struct_t mystruct = { .bits = x };

/* cast to uint32_t */
uint32_t x = mystruct.bits; 
```

HTH，亚历克斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:41:11.193

非便携式解决方案：

```
struct smallst {
  int a;
  char b;
};

void make_uint64_t(struct smallst *ps, uint64_t *pi) {
  memcpy(pi, ps, sizeof(struct smallst));
} 
```

例如，如果您在小端机器上打包结构并在大端机器上解包，您可能会遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T07:00:40.853

您可以使用指针，这很容易，例如：

```
struct s {
    int a:8;
    int b:4;
    int c:4;
    int d:8;
    int e:8; }* st;

st->b = 0x8;
st->c = 1;
int *struct_as_int = st; 
```

希望能帮助到你

# php - Magento中不同类型的数组警告

> ID：11903821
> 
> 赞同：1
> 
> 时间：2012-08-10T14:31:15.617
> 
> 标签：php, magento, caching, warnings, array-merge

我在我的 magento 网站的系统日志中遇到了一些警告，其中一些我解决了，但其中一些我找不到也不在这里。

系统日志说： `2012-08-10T13:09:18+00:00 ERR (3): Warning: array_merge(): Argument #1 is not an array in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/App.php on line 395`

在 phpfile 中，这是第 395 行位于顶部的部分

```
$options = array_merge($options, $cacheInitOptions);
$this->_cache = Mage::getModel('core/cache', $options);
$this->_isCacheLocked = false;
return $this;

2012-08-10T13:09:18+00:00 ERR (3): Recoverable Error: Argument 1 passed to Mage_Core_Model_Cache::__construct() must be an array, null given, called in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Config.php on line 1350 and defined  in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Cache.php on line 105

Config php.
    $className = $this->getModelClassName($modelClass);
        if (class_exists($className)) {
            Varien_Profiler::start('CORE::create_object_of::'.$className);
       1350 $obj = new $className($constructArguments);
            Varien_Profiler::stop('CORE::create_object_of::'.$className);
            return $obj;

Cache.php line 105=   public function __construct(array $options = array()

2012-08-10T13:09:18+00:00 ERR (3): Recoverable Error: Argument 1 passed to Mage_Core_Model_Cache::_getBackendOptions() must be an array, null given, called in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Cache.php on line 119 and defined  in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Cache.php on line 141

cache.php 
line 119  $backend    = $this->_getBackendOptions($options);
line 141  protected function _getBackendOptions(array $cacheOptions)

2012-08-10T13:09:18+00:00 ERR (3): Recoverable Error: Argument 1 passed to Mage_Core_Model_Cache::_getFrontendOptions() must be an array, null given, called in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Cache.php on line 120 and defined  in /var/www/sites/mysite.com/app/code/core/Mage/Core/Model/Cache.php on line 288

cache.php
line 120  $frontend   = $this->_getFrontendOptions($options);
line 288   protected function _getFrontendOptions(array $cacheOptions) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T12:45:47.377

Have a look at your local.xml file and inspect the cache tag. In my case, while wanting to desactivate the cache, I had commented out everything inside this tag (apc, memcahced, etc) but I had left the tag itself outside of the comment which gave me errors similar as described above.

So try this :

```
<!--
<cache>
<backend>Apc</backend>
....
</cache>
--> 
```

but not this :

```
<cache>
<!-- 
    <backend>Apc</backend>
     .... 
-->
</cache> 
```

Of course, after that you no more use any cache but at least you may know where the error is coming from.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T06:22:04.097

此问题与文件权限有关。确保 Web 服务器对缓存文件夹具有读/写权限。默认缓存文件夹位于：

```
<webroot>/var/cache/ 
```

请注意，缓存文件仅由文件所有者设置为读/写，因此存在限制。

# jquery - Jquery 可拖动/可排序数组仅部分工作？

> ID：11903822
> 
> 赞同：0
> 
> 时间：2012-08-10T14:31:21.987
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-draggable

我正在尝试创建一个可排序的照片列表，我尝试了所有我想到的由 Draggable/Sortable 生成的数组，但它不起作用，我确定我以错误的方式使用它，但它是很好奇对于原始位置和原始位置 +1（如果您将照片移动到下一个位置），它会正确报告位置，但在更高的位置，一切都会变得一团糟。

**你可以在这里看到我在说什么：http: [//jsfiddle.net/sovidiu/6EvFJ/](http://jsfiddle.net/sovidiu/6EvFJ/)**

尝试将第一张照片移动到第二个位置 -> 作品 尝试将第一张照片移动到第三、第四个位置。-> 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:51:07.903

我不太确定你在问什么，但是将 (imgOrder2.indexOf("1")+1) 作为索引更有意义。“图片 1 in pos: x”现在可以正确显示。我也不确定你为什么每次都将 id “sortable”添加到 imgOrder2 数组中，所以我删除了它。

```
var imgOrder = '';

$(function() {
  $("#sortable").sortable({
    update: function(event, ui) {
    var imgOrder = new Array();

      imgOrder = $("#sortable").sortable('toArray').toString();
      imgOrder2 = $("#sortable").sortable('toArray');
      $('#ceva').text(imgOrder2);
      $('#p1').text(imgOrder2.indexOf("1")+1);
      $('#p2').text(imgOrder2.indexOf("2")+1);
      $('#p3').text(imgOrder2.indexOf("3")+1);
      $('#p4').text(imgOrder2.indexOf("4")+1);
    }
  });
  $("#sortable").disableSelection();

}); 
```

# asp.net-mvc - RedirectToAction 不调用目标控制器和动作

> ID：11903823
> 
> 赞同：0
> 
> 时间：2012-08-10T14:31:22.423
> 
> 标签：asp.net-mvc

这个 post 操作是从 ajax jquery 对话框中调用的。

当我选择了一个模板时，它应该运行 RedirectToAction 方法但 UnitController 和 GetTemplateRootUnits 操作永远不会被命中？

我错了什么？

```
 [HttpPost]
    public ActionResult Open(int selectedTemplateId)
    {
     if (ModelState.IsValid)
     {

     return RedirectToAction("GetTemplateRootUnits", "Unit", new { TemplateId = selectedTemplateId });

     }
     else
     {
         return LoadOpenTemplates();
     }          
    } 
```

我的路由表：

```
 routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Main", action = "Index", id = UrlParameter.Optional }
            ); 
```

我要调用的目标控制器/动作：

```
[HttpGet]
public JsonNetResult GetTemplateRootUnits(int templateId)
{
 IEnumerable<Unit> units = _unitDataProvider.GetTemplateRootUnits(templateId);
 return new JsonNetResult(new { data = units });
}

 function openTemplate(dlg, form) {
        $.ajax({
            url: $(form).attr('action'),
            type: 'POST',
            data: form.serialize(),
            success: function (response) {
                if (response.success) {
                    dlg.dialog("close");
                    $('#TreeDiv').empty();
                    loadUnits(response.data);
                }
                else {  // Reload the dialog with the form to show model/validation errors                    
                    dlg.html(response);
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:17:23.187

`RedirectToAction`当您使用 AJAX POST 时将不起作用，请参阅：

[RedirectToAction 不起作用](https://stackoverflow.com/questions/2225030/redirecttoaction-not-working)

在这种情况下，您需要使用 javascript 进行重定向。

几种方法：

[如何在 jQuery Ajax 调用后管理重定向请求](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

[RedirectToAction 不重定向](https://stackoverflow.com/questions/6965401/redirecttoaction-not-redirecting?rq=1)

# c# - 使用 Visual Studio 内置的 ASP.NET MVC 模板

> ID：11903826
> 
> 赞同：2
> 
> 时间：2012-08-10T14:31:32.980
> 
> 标签：c#, asp.net, asp.net-mvc-3, templates

有谁知道用于 Visual Studio 集成的很棒的模板。我在这里找到了一些[http://mvccontribgallery.codeplex.com/](http://mvccontribgallery.codeplex.com/)，但它们已经死了。我想免费或花钱得到同样的东西。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:34:36.723

这里[http://pixelsinspired.com/](http://pixelsinspired.com/)只是一个应用程序模板，但看起来其余的很快就会到来。准备好使用 CSS/HTML 和基本应用程序实用程序（如日志记录等）的设计器模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:43:08.197

根据您使用 ASP.NET 构建的内容，您始终可以使用基本的 HTML 主题，并剪下中间部分，制作母版页和视图。如果有可重用的元素，请将它们分解为部分。

假设您没有使用某些 CMS 软件，您可能需要自定义视图以匹配来自控制器的数据。

ASP.NET MVC 与 WebForms 相比的优势之一是它更接近于其他模板语言。将`erb`,`twig`或`smarty`模板转换为 ASP.NET 并没有那么糟糕。我猜你真正要找的大部分是标记和CSS。

# jquery - 如何解决两个 jQuery 插件之间的冲突

> ID：11903828
> 
> 赞同：0
> 
> 时间：2012-08-10T14:31:43.030
> 
> 标签：jquery

总 jQuery 新手，所以轻松一点！

我在以下 jQuery 文件中`<head>`： -

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery.ui.core.min.js"></script>
<script type="text/javascript" src="jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="jquery.ui.mouse.min.js"></script>
<script type="text/javascript" src="jquery.ui.sortable.min.js"></script>
<script type="text/javascript" src="jquery.ui.tabs.min.js"></script>
<script src="./thesaurus/js/jquery.thesaurus.js" type="text/javascript"></script> 
```

以及以下文档就绪调用：-

```
<script type="text/javascript">
$(document).ready(function()
{
$('#container').Thesaurus
({
   effect: 'fade',
   caseSensitive: true // Used when matching found terms against loaded ones
});
   var page2jQueryTabs1Opts =
   {
      event: 'click',
      collapsible: false
   };
   $("#page2jQueryTabs1").tabs(page2jQueryTabs1Opts);
});
</script> 
```

我遇到的问题是同义词库工作得很好，但 jQuery 选项卡部分没有。

我一直在试验（几个小时！），`jQuery.noconflict()`但我怀疑我一直在浪费时间，因为我只使用一个 jQuery 实例？我在更改名称空间方面的尝试（我认为这就是我一直在尝试的！）失败了。作为记录，我可以编辑 thesaurus.js 并且我可以控制准备好的文档的第一部分，但我无法更改生成准备好的文档的顺序/顺序 - 即`$('#container').Thesaurus`必须首先出现并且我无法编辑文档的 jQuery Tab 部分已准备就绪。

我没有继续在黑暗中反复试验和错误编辑，而是问这个问题......我需要对标记进行哪些更改......或 thesaurus.js 文件（[在此处找到](http://demo.dsheiko.com/thesaurus/js/jquery.thesaurus.js)）。

现在是时候吃一些阿司匹林了！

编辑：[测试页面](http://www.aditerum.co.uk/test/WWBTESTS/page2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:26:10.483

**编辑：**对不起。我以为萤火虫更新并在本地执行代码，但似乎它没有这样做......请尝试下面的代码，让我知道它是否有效......

我在 Firebug 中尝试过，它奏效了。试试这个：

```
$(document).ready(function(){

    var page2jQueryTabs1Opts = {
       event: 'click',
       collapsible: false
    };
    $("#page2jQueryTabs1").tabs(page2jQueryTabs1Opts);

    $.noConflict();

    $('#container').Thesaurus({
       effect: 'fade',
       caseSensitive: true // Used when matching found terms against loaded ones
    });

}); 
```

我只是交换了选项卡和同义词库声明并在它们之间放置了 $.noConflict() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:27:06.197

我无法使用`jQuery no.Conflict()`此处的任何选项或来自外部研究来解决冲突，但我已经解决了我的问题，只需将行更改为`$('#container').Thesaurus({`，`$('.someclass').Thesaurus({`以便使用 CSS 类而不是调用 DIV。现在一切都很好:)

非常感谢那些试图提供帮助的人——一如既往，非常感谢。

# mysql - 改进此更新查询

> ID：11903829
> 
> 赞同：0
> 
> 时间：2012-08-10T14:31:44.937
> 
> 标签：mysql, sql

所以我一直在努力运行这个查询。这需要很长时间。
它的 MySQL Innodb。我正在使用的字段已编入索引。它在一个相当强大的服务器上，大约 10gig 分配给了 innodb 池配置。

```
UPDATE TEMP_account_product p
JOIN products_temp c ON (c.`some_id` = p.`old_someid`)
SET p.`product` = c.id
WHERE p.product IS NULL; 
```

这里要注意的是，两个表都包含大约 900,000 行。这条线带回了大约 800,000 条记录 ( `WHERE p.product IS NULL;`)

我有一种感觉，我在这里有点搞砸了，但我还是想试试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:37:16.237

我建议分批运行它，这样您就不需要依赖查询计划来决定在它开始执行更新之前不将整个结果集放入内存。在查询中添加类似 LIMIT 1000 的内容，然后运行它直到受影响的行数为零（技术取决于您的环境，但我认为可以在 SQL 中完成）。

**更新，*这不是一个有效的选项（原样）*。**

果然，我在[更新文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)中忽略了这一点：

> 对于多表语法... 在这种情况下，不能使用 ORDER BY 和 LIMIT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:49:41.897

我认为此类请求执行缓慢的可能原因可能是：

*   **最有可能**- 您在更新字段上有一个 INDEX(es)，并且该请求正在更新很多行 - 在这种情况下，MySQL 将需要在 UPDATE 期间做大量工作来重建该 INDEX(es)。在这种情况下，只需在请求之前 DROP INDEX(es)，然后重新创建它（如果需要）。
*   JOIN 很慢（您可以通过使用该 JOIN 进行选择来检查它） - 即连接是在没有索引的情况下完成的。在这种情况下添加索引。
*   WHERE 的慢速过滤（即 MySQL 对过滤器进行全面扫描） - 您可以通过使用相同的过滤器进行选择来检查它的速度。

# c++ - 带有objective-c的opencv和c++

> ID：11903835
> 
> 赞同：-6
> 
> 时间：2012-08-10T14:32:09.057
> 
> 标签：c++, objective-c, opencv

我需要使用 OpenCV 库在 C++ 中编写一个程序，并在某人给我的 Objective-C 程序中运行它。我对 Objective-C 没有任何先验知识，所以是否可以正确地做到这一点，我应该如何开始？我的意思是，我可以制作我的 C++ 和 OpenCV 程序，因为它是一个独立的程序，然后将它包含在 Objective-C 中吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:43:02.700

使用 Xcode 和 Apples LLVM 编译器混合 Objective-C 和 C++ 是很好的。可能以多种方式和模式完成，所以是的，您可以构建您的 C++ 和 OpenCV 模块，然后使用一些 Objective-C 包装器。

# apache - 未找到授权适配器“Controller)”。在 cakephp 中

> ID：11903836
> 
> 赞同：0
> 
> 时间：2012-08-10T14:32:09.967
> 
> 标签：apache, cakephp

我正在为我的 cakephp 项目添加登录/注销功能，当我登录或注销时，出现以下错误：

错误：未找到授权适配器“Controller)”。错误：发生内部错误。

Stack Trace CORE\Cake\Controller\Component\AuthComponent.php line 376 → AuthComponent->constructAuthorize() CORE\Cake\Controller\Component\AuthComponent.php line 326 → AuthComponent->isAuthorized(array) [内部函数] → AuthComponent- >startup(UsersController) CORE\Cake\Utility\ObjectCollection.php 第 130 行 → call_user_func_array(array, array) [内部函数] → ObjectCollection->trigger(CakeEvent) CORE\Cake\Event\CakeEventManager.php 第 246 行 → call_user_func(array , CakeEvent) CORE\Cake\Controller\Controller.php 第 671 行 → CakeEventManager->dispatch(CakeEvent) CORE\Cake\Routing\Dispatcher.php 第 183 行 → Controller->startupProcess() CORE\Cake\Routing\Dispatcher.php 行161 → Dispatcher->_invoke(UsersController, CakeRequest, CakeResponse) APP\webroot\index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse)

这是我的 AppController.php

```
class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth'=>array(
            'loginRedirect'=> array('controller'=>'users', 'action'=>'index'),
            'logoutRedirect'=> array('controller'=>'users', 'action'=>'index'),
            'authError' =>"You can't access that page",
            'authorize'=> array('Controller)')
        )

    );
    //determines what logged in users have access to
    public function isAuthorized($user){
        return true;
    }
    //determines what non-logged in users have access to
    public function beforeFilter(){
        $this->Auth->allow('index','view');
        $this->set('logged_in', $this->Auth->loggedIn());
        $this->set('current_user', $this->Auth->user());
    }

} 
```

这是我的 UsersController.php

```
class UsersController extends AppController {
    public $name = 'Users';

    public function beforeFilter(){
        parent::beforeFilter();
        $this->Auth->allow('add');
    }

    public function login(){
        if($this->request->is('post')){
            if($this->Auth->login()){
                $this->redirect($this->Auth->redirect());

            }else{
                $this->Session->setFlash('Your username and/or password is incorrect');
            }
        }
    }

    public function logout(){
        $this->redirect($this->Auth->logoutRedirect());
    } 
```

我注意到几个类似的帖子有相同的错误，但问题涉及我在 Windows 上的 Linux 机器，或者调用我没有调用的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:45:55.553

你在`$components['Auth']`数组中犯了一个错误。你写`'Controller)'`的不是`'Controller'`（错误信息告诉你）。这是更正后的`$components`：

```
public $components = array(
    'Session',
    'Auth'=>array(
        'loginRedirect'=> array('controller'=>'users', 'action'=>'index'),
        'logoutRedirect'=> array('controller'=>'users', 'action'=>'index'),
        'authError' => "You can't access that page",
        'authorize'=> array('Controller')
    )

); 
```

# ruby - 在固定大小的数组上传播选择的算法

> ID：11903839
> 
> 赞同：1
> 
> 时间：2012-08-10T14:32:20.437
> 
> 标签：ruby

这不是一个特别的红宝石问题：更多的是关于算法的一般问题。但是可能有一些特定于 ruby​​ 的数组方法很有帮助。

我有一个包含 30 个项目的数组。我要求在 15 到 30 之间的项目数，并且我想从整个数组中选择给定数量的项目，使其尽可能均匀分布。选择需要是非随机的，每次都返回相同的结果。

假设有人要 16 件商品。如果我返回前 16 个，那将是一个巨大的失败。相反，我可以返回所有奇数加上最后一个；如果我将数字 1 到 30 存储在数组中，我可以回馈

```
myArr.spread(16)
=> [1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,30] 
```

如果有人要 20 件商品，那就有点诡计了：我想不出一个好的程序化方式来做这件事。我觉得它一定已经被某人解决了。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:02:16.920

我最终这样做了，受到 Alex D 的启发：我一步步完成 n-1 次，然后总是将最后一个元素添加到末尾。

```
class Array
  def spread(n)
    step = self.length.to_f / (n -1) 
    (0..(n-2)).to_a.collect{|i| self[i * step]} + [self.last]
  end
end

 > (1..30).to_a.spread(3)
 => [1, 16, 30] 
 > (1..30).to_a.spread(4)
 => [1, 11, 21, 30] 
 > (1..30).to_a.spread(5)
 => [1, 8, 16, 23, 30] 
 > (1..30).to_a.spread(15)
 => [1, 3, 5, 7, 9, 11, 13, 16, 18, 20, 22, 24, 26, 28, 30] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T22:40:10.367

最近实现了这个方法——尽管我称之为`keep`——用于备份保留应用程序，我想我会分享我的解决方案。它类似于 Alex D 的答案，但算法有两个主要区别：

1.  “步幅”是使用`(length + (length / n) - 1).to_f / n`where`n`是所需的项目数来计算的。`n`根据进入的次数计算偏移量`length`可确保始终包含最后一项。

2.  它使用模运算而不是递增：如果元素的索引除以“步幅”的余数在 0 和 1 之间（包括 0，不包括 1），则该元素包含在结果中。始终为 0的事实`0 % x`确保始终返回第一个元素。

3.  考虑到边缘情况，例如当元素数量少于所需数量时。

* * *

```
class Array
  def keep(n)
    if n < 1
      []
    elsif length <= n
      self.clone
    else
      stride = (length + (length / n) - 1).to_f / n
      select.with_index do |_, i|
        remainder = i % stride
        (0 <= remainder && remainder < 1)
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:08:34.733

将数组的大小除以您要选择的项目数（不要使用截断除法）——这将是您在数组上行走时选择项目时的“步幅”。继续将“步幅”添加到运行总计中，直到它等于或超过数组的大小。每次添加“步幅”时，取整数部分并将其用作数组的索引以选择一个项目。

假设您有 100 个项目，并且您想选择 30 个。那么您的“步幅”将为 3.3333 ......所以您从 3.3333 的“运行总数”开始，然后选择项目 3。然后是 6.66666 - 所以您选择项目 6。接下来是 10.0 -- 所以你选择项目 10。等等......

测试以确保您不会出现“减一”错误，并且如果数组大小或要选择的项目数为零，您也不会除以零。还使用保护子句来确保要选择的项目数不大于数组中的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T15:23:37.687

这里有一个类似的问题[，](https://stackoverflow.com/questions/9873626/choose-m-evenly-spaced-elements-from-a-sequence-of-length-n)但解决方案是在 python 中。

在 Ruby 中，它将是：

```
class Array
    def spread( count)
        length = self.length
        result = Array.new
        0.upto(count-1) do |i|
            result << self[(i * length.to_f / count).ceil]
        end
        return result
    end
end

arr = Array(1..30)
puts arr.spread(20)
#=> [1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 24, 25, 27, 28, 30] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T14:52:11.730

您可以尝试使用具有固定种子的`Random` [（doc） ：](http://www.ruby-doc.org/core-1.9.3/Random.html#method-c-new_seed)

*   使用`Random`对象，您可以随机选择数组的元素
*   固定种子确保每次调用函数都会生成随机数列表。

例如与 [`Array#sample`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-sample)

```
def spread(arr, count) do
    arr.sample(count, Random.new(0))
end 
```

# sql-server - 过程需要很长时间才能执行查询

> ID：11903842
> 
> 赞同：0
> 
> 时间：2012-08-10T14:32:29.627
> 
> 标签：sql-server, sql-server-2008

我有以下用于 SQL Server 的 SP。奇怪的是，SP 在执行查询时有奇怪的行为

```
Select @max_backup_session_time = Max(MachineStat.BackupSessionTime) from MachineStat     where MachineStat.MachineID = @machine_id; 
```

如果 MachineStat 表有与 @machine_id 相关的行，则需要 1 秒，但如果 @machine_id 没有行，则执行需要半分钟以上。有人可以帮我理解这一点。

```
SET NOCOUNT ON;

DECLARE @MachineStatsMId TABLE (
  MachineId         INT NULL,
  BackupSessiontime BIGINT NULL,
  MachineGroupName  NVARCHAR(128) NULL )
DECLARE @machine_id AS INT;
DECLARE @Machine_group_id AS INT;
DECLARE @machine_group_name AS NVARCHAR(128);
DECLARE @max_backup_session_time AS BIGINT;

SET @machine_id = 0;
SET @Machine_group_id = 0;
SET @machine_group_name = '';

DECLARE MachinesCursor CURSOR FOR
  SELECT m.MachineId,
         m.MachineGroupId,
         mg.MachineGroupName
  FROM   Machines m,
         MachineGroups mg
  WHERE  m.MachineGroupId = mg.MachineGroupId;

OPEN MachinesCursor;

FETCH NEXT FROM MachinesCursor INTO @machine_id, @machine_group_id, @machine_group_name;

WHILE @@FETCH_STATUS = 0
  BEGIN
      SELECT @max_backup_session_time = Max(MachineStat.BackupSessionTime)
      FROM   MachineStat
      WHERE  MachineStat.MachineID = @machine_id;

      INSERT INTO @MachineStatsMId
      VALUES      (@machine_id,
                   @max_backup_session_time,
                   @machine_group_name);

      FETCH NEXT FROM MachinesCursor INTO @machine_id, @machine_group_id, @machine_group_name;
  END;

SELECT *
FROM   @MachineStatsMId;

CLOSE MachinesCursor;

DEALLOCATE MachinesCursor;
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:47:48.160

这是一个替代版本，它完全避免了游标和表变量，使用正确的（现代）连接和模式前缀，并且*应该*比你拥有的运行得快得多。如果在某些场景下仍然运行缓慢，请发布该场景的实际执行计划以及快速场景的实际执行计划。

```
ALTER PROCEDURE dbo.procname
AS
BEGIN
  SET NOCOUNT ON;

  SELECT 
    m.MachineId, 
    BackupSessionTime = MAX(ms.BackupSessionTime), 
    mg.MachineGroupName
  FROM dbo.Machines AS m
  INNER JOIN dbo.MachineGroups AS mg 
    ON m.MachineGroupId = mg.MachineGroupId
  INNER JOIN dbo.MachineStat AS ms -- you may want LEFT OUTER JOIN here, not sure
    ON m.MachineId = ms.MachineID
  GROUP BY m.MachineID, mg.MachineGroupName;
END
GO 
```

# java - 菱形运算符 <> 是否等同于

> ID：11903853
> 
> 赞同：13
> 
> 时间：2012-08-10T14:33:00.480
> 
> 标签：java, generics

我在`util.TreeSet`类中发现一个构造函数正在调用另一个`TreeMap`具有空泛型类型的新构造函数。

```
 public TreeSet(Comparator<? super E> comparator) {
         this(new TreeMap<>(comparator));
  } 
```

是什么`new TreeMap<>`意思？这相当于`new TreeMap<?>`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T14:35:01.590

这是 Java 7 语法。菱形 ( `<>`) 是一种简写形式，要求 Java 编译器使用本地上下文中有意义的任何内容填充泛型参数（在本例中为`? super E`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-09T17:39:00.877

不，`<?>`和 `<>`不一样。

`<?>`是“无界通配符”，自 Java 5 以来一直存在。此通配符允许（即匹配）类型绑定允许的任何内容，没有额外限制。通配符是以您可以在通用实例上进行的操作为代价的。有关通配符的更多信息，请阅读相关的[java 教程部分。](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)要了解哪些通配符允许使用哪种类型界限，请查看[此博客](http://asbeit.blogspot.com/)。

`"<>"`Java 7 中添加了菱形运算符 ，其目的是通过让编译器在调用构造函数时从上下文推断这些类型，从而使开发人员在创建泛型类型实例时避免不必要的冗长。

编译器推断出最具体的可能类型，如果可用，请考虑以下因素：

1- 传递给构造函数的参数类型。

2- 您在新实例分配到的引用中指定的类型（“=”分配的左侧部分）。

3-类型的擦除。

在您的示例中，编译器将替换`new TreeMap<>(comparator)`为`new TreeMap<E,Object>(comparator)`.

要了解原因，请查看`TreeMap<K,V>`正在调用的构造函数：`TreeMap(Comparator<? super K> comparator)`。

编译器需要推断`K`和的类型`V`。它期望 a`Comparator<? super K>`并找到 a`Comparator<? super E>`被传入，没有左手赋值，并且编译器不会有`E`被分配给的问题`K`（任何匹配 an`E`都将匹配 a `K`，因为它们具有相同的擦除），它得出结论`K`= `E`。

因为`V`，同样没有左手赋值，没有传递给构造函数的参数，所以它留下了与擦除到`V`中指定的类型相同的`TreeMap<K,V>`擦除`Object`，因此得出`V`= `Object`。

好了，编译器推断出`K`=`E`和`V`= `Object`，语句变为`TreeMap<E,Object>(comparator)`.

值得一提的是，虽然菱形运算符推断正在创建的***实例***的泛型类型，但它不会推断被调用的***构造函数***的泛型类型，以防万一它是泛型的，因为可以使用泛型类型变量定义构造函数就像您定义泛型方法（在其中添加未在类中定义的其他类型）一样，这些类型也受到编译器的推断，类似于它为泛型方法推断类型的方式，而不是通过菱形运算符。

# asp.net - cookie过期后asp.net mvc3重定向用户

> ID：11903855
> 
> 赞同：0
> 
> 时间：2012-08-10T14:33:02.680
> 
> 标签：asp.net, asp.net-mvc-3

我有这个问题。当用户登录时，我使用 formsauthanticationticket 创建 cookie：

```
var formAuthTicket = new FormsAuthenticationTicket(1, model.UserName, DateTime.Now, DateTime.Now.AddMinutes(1), false, "");
                    var encryptedFormAuthTicket = FormsAuthentication.Encrypt(formAuthTicket);
                    var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedFormAuthTicket);
                    Response.Cookies.Add(cookie);
                    return RedirectToAction("Index", "Home"); 
```

现在。在 PreRequestHandlerExecute 事件中，我检查用户是否已通过身份验证/cookie 是否存在。

```
var cookie = context.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (cookie != null)
        {

            var formAuthTicket = FormsAuthentication.Decrypt(cookie.Value);
            var newFormAuthTicket = new FormsAuthenticationTicket(formAuthTicket.Version, formAuthTicket.Name,
                                                                    formAuthTicket.IssueDate,
                                                                    DateTime.Now.AddMinutes(1),
                                                                    formAuthTicket.IsPersistent,
                                                                    formAuthTicket.UserData,
                                                                    FormsAuthentication.FormsCookiePath);
            cookie.Value = FormsAuthentication.Encrypt(newFormAuthTicket);
            context.Response.Cookies.Set(cookie);
        } 
```

但是当 cookie 不存在/过期时，我想将用户重定向到登录页面，当他点击某个链接时。任何想法？谢谢

**编辑**

因为我不能使用 Authorize 属性。我知道。我在程序集中有 httpmodule，它在 web 项目中被引用。在 httpmodule 我有 Init 方法，我在其中初始化 PreRequestHandlerExecute() 事件。如果我检查用户的身份验证。如果我在“else”中使用这样的东西-> Response.Redirect(url)，就会发生循环重定向，那就错了。在没有任何请求的 10 分钟后，用户点击了某个链接，他将被重定向到登录页面 -> 那是我的问题，我无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:36:02.420

Why you just don't use the `[Authorize]` attribute? Added in the sign of your action and if the cookie related with authentication expired will be automatically redirected to the login Page

For example

```
[Authorize]
public ActionResult Profile()    
{
} 
```

And if you need a custom implementation created your custom attribute implement the interface for example

```
public class FooAuthorizeAttribute : AuthorizeAttribute
{
     public string fooField{ get; set; }

public override void OnAuthorization(AuthorizationContext filterContext)
{
    //Do my stuff
} 
```

Then called in your action

```
[FooAuthorizeAttribute]
public ActionResult Profile()    
{
} 
```

# redirect - Symfony2 自定义 AuthenticationSuccessHandler 和用户重定向

> ID：11903864
> 
> 赞同：0
> 
> 时间：2012-08-10T14:33:33.993
> 
> 标签：redirect, login, symfony

通过[这个问题](https://stackoverflow.com/questions/11901978/execute-a-code-after-login-check-in-symfony2)，已经阐明了在 Symfony2 应用程序中登录后如何执行代码。特别是，解决方案是编写一个`AuthenticationHandler`实现接口`AuthenticationSuccessHandlerInterface`。

表示，在`onAuthenticationSuccess()`interface 的函数中`AuthenticationSuccessHandlerInterface`，必须指定用户在登录后将被重定向到的 uri。

默认情况下，当用户尝试访问安全区域（即**页面 ​​X**）时，Symfony2 会将用户重定向到登录页面。当登录成功时，用户被重定向到安全**页面 X**。因此，登录后没有唯一的页面（例如主页）。

如何处理`onAuthenticationSuccess()`将用户重定向到**页面 X**的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:22:54.100

我实施了这个解决方案。1）将会话中的URI保存在每个访问页面（登录页面除外）中。`onAuthenticationSuccess()`2) 在函数中加载 URI 以在`RedirectResponse()`.

要完成第 1 点），需要两个步骤： 首先）假设已定义基本模板，请将以下代码放在您想要的位置（例如，也在`<html>`标记之前：

```
{% block setcurrenturi %}
    {{ setCurrentURI(app.session, app.request.uri) }}
{% endblock %} 
```

此代码需要在您的 Twig Extension 中定义一个函数（假设您已经实现了*Twig Extension*）。功能非常简单：

```
public static function setCurrentURI($session, $URI) {
    $session->set('LAST_URI', $URI);
} 
```

然后，转到登录表单页面的 Twig 模板并将块重新定义为：

```
{% block setcurrenturi %}
{% endblock %} 
```

这样登录页面的URI就不会保存在session中了。

现在，在`onAuthenticationSuccess()`函数中放入以下行：

```
 return new RedirectResponse($request->getSession()->get('LAST_URI')); 
```

# linux - CentOS 无法删除用户目录

> ID：11903869
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:33:45.007
> 
> 标签：linux, permissions, centos, directory-permissions

我被困住了。

我做了一个简单的用户添加。我有用户-> 标记并分配目录-> /home/mark。这里我安装了一个软件。后来我删除了标记，现在我无法删除/home/mark。使用 root 帐户，我尝试：

a) 将权限更改为 777 -> 权限被拒绝

b）删除目录

```
rm -rf /home/mark 
```

没有权限

c) 鹦鹉螺

```
sudo nautilus 
```

无法解析参数：无法打开显示（什么？？）

我无法从我的服务器中删除此目录。这是我的权限列表

```
ls -la /home/mark

drwx------ 5  502  502    4096 10 ago 13:32 .
drwxr-xr-x 5 root root    4096 10 ago 16:13 ..
-rwxrwxrwx 1  502  502     366 10 ago 13:46 .bash_history
-rwxrwxrwx 1  502  502      18 10 mag 20:45 .bash_logout
-rwxrwxrwx 1  502  502     176 10 mag 20:45 .bash_profile
-rwxrwxrwx 1  502  502     124 10 mag 20:45 .bashrc
drwxrwxrwx 2  502  502    4096 12 nov  2010 .gnome2
drwxrwxrwx 2  502  502    4096 10 ago 14:28 .mozilla
drwxrwxrwx 2  502  502    4096 10 ago 14:28 mypackage
-rwxrwxrwx 1  502  502 4131518 10 ago 05:06 mypackage.tar.gz 
```

任何想法？

ps 在 GNOME 上，当我右键单击此文件夹（当然我无法打开它）时，我在权限选项卡上看到所有者和组仍分配给标记的 ID。我可以看到所有者 -> 502 - 用户 #502（它是标记）和组 -> 502。所有表单都是灰色的，我无法编辑它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:40:25.243

要删除用户标记及其数据 (/hom/mark)，请以 root 身份输入：

```
#userdel -r mark 
```

编辑：试试这个

```
chattr -i mark
rm -rf mark 
```

你说你不能`chown`这个目录，如果上面的命令不起作用，我建议`fsck`在系统上：

```
#shutdown -r -F now 
```

并在检查文件后尝试删除标记文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:44:59.817

以 root 身份登录

```
cd /home
chmod -R 0777 mark
rm -fr mark 
```

应该做的伎俩。

然后编辑 /etc/passwd /etc/shadow

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:39:15.403

确保没有与该目录关联的正在运行的进程。

```
[root@ap0003 tmp]# fuser /home/spatel
/home/spatel:         1196c  1243c
[root@ap0003 tmp]# ps aux | grep 1196
spatel    1196  0.0  0.0  66120  1540 pts/0    Ss   09:41   0:00 -bash
root      1889  0.0  0.0  61228   764 pts/0    S+   11:38   0:00 grep 1196 
```

# php - PHP 脚本未正确上传图像

> ID：11903870
> 
> 赞同：1
> 
> 时间：2012-08-10T14:33:45.910
> 
> 标签：php, mysql, image, upload

我正在开发一个由用户维护的小型在线商店，并试图让我的最终用户（商店管理员）上传产品的图形。但是，当我运行此脚本时，它实际上并没有存储图像。我从这里的各种技巧和教程构建了这个脚本，并且除了图像上传部分之外的所有东西都可以工作。

```
// Set the image target directory here
$target = "itemImages/";
$target = $target . basename($_FILES["image"]["name"]);

// Variables get POSTed here - just tack new ones on at the end.
// Various POSTs omitted for brevity

$pic=($_FILES["image"]["name"]);

// Places the picture in the folder
if(move_uploaded_file($_FILES["image"]['tmp_name'], "itemImages/")) 
{
echo "The file " . basename($_FILES['uploadedfile']["name"]) . " has been         uploaded.<br />";
}else {
    echo "There was an issue adding this item. Please try again.<br />";
}

// Writes variables to the database
mysql_query("INSERT INTO tbl_item   (itemNAME,itemDESC,itemCOST,itemHCOL,itemHSIZ,itemIMG)
VALUES ('$itemName','$itemDesc','$itemCost','$hasColor','$hasSize','$pic')");

mysql_close($con);
?> 
```

非常感谢任何帮助、提示、建议、见解等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:37:11.993

`move_uploaded_files`需要一个文件名作为它的目标。它不会盲目地移动到一个目录，所以

```
move_uploaded_files($_FILES..., 'somedir/somefile.txt'); 
```

有效，但是

```
move_uploaded_file($_FILES..., 'somedir/'); 
```

将不会。

另外，请注意您的数据库操作容易受到[SQL 注入攻击](http://bobby-tables.com)。您盲目地插入上传文件的远程名称（`['name']`通过 $pic），并且该名称完全在远程用户的控制之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:36:12.907

确保**itemImages**文件夹具有您的 Web 服务器（例如`Apache`）运行的用户的写入权限（例如`www-data`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:42:20.157

确保 .php 文件和您要写入的文件夹具有相同的“所有者”。或者尝试将 itemImages 文件夹的权限设置为 777（不建议这样做，只是一种调试策略）

# redis - Redis位集只访问正值？

> ID：11903871
> 
> 赞同：3
> 
> 时间：2012-08-10T14:33:51.017
> 
> 标签：redis

我正在尝试将负值存储到 Redis 位集中，但操作失败并出现以下错误：

> 位偏移量不是整数或超出范围

有人可以解释为什么不支持在 Redis 位集中存储负数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:13:32.527

因为没有人使用负数引用位集中的位置。位数组中的位集，因此它的索引是一个正整数。

如果您有一个负数（例如来自散列函数），那么您需要先将其转换为无符号整数。在大多数语言中这样做很简单。

在 Java 的特定情况下，要将有符号的 int 转换为 long 的底部 32 位中的无符号值，您需要与 0xffffffffL 进行与运算。请参阅以下链接：

[将有符号整数转换为无符号长整数的最佳方法？](https://stackoverflow.com/questions/9578639/best-way-to-convert-a-signed-integer-to-an-unsigned-long)

# php - Zend_Db_Select 加入 Zend_Db_select

> ID：11903872
> 
> 赞同：1
> 
> 时间：2012-08-10T14:33:54.183
> 
> 标签：php, zend-framework, join, fetch, zend-db-select

两个模型作为`Zend_Db_Select`对象返回。

然后，我需要加入它们并立即一起获取数据。

```
class Model_User extends Abstract_Model { 
    public function sqlUser() { 
    return $this->select(array(
               'user_id', 'user.name', 'user.login', 'address.street', 'city.city_id', 'city.city_name','region.region_id', 'region.region_name'
            )) 
            ->joinUsing('address','address_id','') ->join('city', 'city.city_id = address.city_id', '')
            ->join('region', 'region.region_id = city.region_id', ''); 
    } 
} 

class Model_Technics extends Abstract_Model{ 
    public function sqlList() { 
        return $this->select()
                 // here some more sql
                 ->joinUsing('catalog_model','model_id',''); 
    }
} 
```

然后我需要一些其他地方为每个用户获取包含所有信息的 sqlList。我不想复制所有代码，我只想通过 join 从 User 模型中加入 sql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:14:46.930

您可以遍历 zend_db_select (columns,from,joins,where) 的“部分”并想办法将它们附加到另一个查询中，但我不建议这样做。

另一种方法可能是在您要加入的模型上使用“加入”方法，该方法将获取您的选择对象并在其上运行加入方法。当然，这将取决于选择对象中已经可用的表。或者该方法可能只是传回一个定义如何连接到连接模型表的结构，您的主模型可以决定如何处理它。

有很多解决方案，但是没有真正简单的方法可以将两个 zend_db_select 对象组合在一起，而无需在它们之间添加一些额外的逻辑。 **主要缺失的部分是两个模型之间的关系信息。**

我知道这不是一个完整的答案（因为我还不能发表评论），但希望它能为您指明一条听起来可用的路径。

# jquery - 使用 colorbox 显示单独的文档

> ID：11903874
> 
> 赞同：0
> 
> 时间：2012-08-10T14:33:59.507
> 
> 标签：jquery, html, css, colorbox

单击某个链接时，我正在使用颜色框显示单独的本地文档。问题是我以前从未这样做过，所以很明显，我无法让弹出的页面使用 CSS 进行样式设置。我不知道这是如何工作的，弹出的页面是否会使用调用它的页面中的 CSS 来设置样式？我认为我不能或不需要让弹出文档具有标题或正文标签。我也想在不使用 iframe 的情况下做到这一点。

这是我的 html 中的一个选择：

```
<li class="event priority1">
  <a href="detail_img.html" class="cbox-popup">
    <div class="content">Lorem Ipsum dolor sit amet, consectetur adipiscing elit.</div>
    <div class="lower">
      <hr>
      <span class="date">03.13.2012</span>
      <span class="type">Regulation</span>
      <img src="img/icon-lg-financial.png" alt="" height="19" width="26" />
    </div>
  </a>
</li> 
```

它应该加载的文档是：

```
<div class="popup wrap">
  <div id="content">
    <header>
      <h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h1>
      <div class="info">
        <time datetime="">05.10.2012</time>
        <h2>Legislation</h2>
        <img src="img/icon-popup-health.png" alt="" width="20" height="18" />
      </div>
    </header>
    <div class="inner">
      <img src="img/popup_img-fullSizeplaceholder.gif" alt="" width="765" height="491" />
    </div>
  </div>
</div> 
```

最后我使用的 javasript 是：

```
 <script>
    jQuery(function() {
      jQuery('.cbox-popup').colorbox({maxWidth: '75%'});    
    });
    </script> 
```

因此，如果我没有标题和正文标签，则会弹出文档，但它没有样式。如果我有一个带有 html 标题和正文标签的完整文档，则什么都没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:50:43.137

同样，如[示例页面所示](http://www.jacklmoore.com/colorbox/example1/)；您需要将 inline 设置为 true，并链接到锚点：

```
<script>
jQuery(function() {
  jQuery('.cbox-popup').colorbox({
    maxWidth: '75%',
    inline: true
  });
});
</script> 
```

链接需要指向一个锚点：

```
<a href="#stuff-to-be-shown" class="cbox-popup"> 
```

然后像这样包装你想要显示的所有内容：

```
<div style='display:none'>
  <div id='stuff-to-be-shown'>
    Blah blah
  </div>
</div> 
```

# excel - 自动过滤宏，然后仅复制可见数据并粘贴到下一个可用行

> ID：11903878
> 
> 赞同：1
> 
> 时间：2012-08-10T14:34:13.150
> 
> 标签：excel, vba

所以我有一个宏，可以根据日期自动选择自动过滤器中的值。

这很好用。但是我需要它只复制带有数据的可见单元格并将其粘贴到工作表中名为“推荐”的下一个可用行中。

```
Sub Referral()
    Application.ScreenUpdating = False

    With Sheets("Raw")
        Sheets("Raw").ShowAllData
        Sheets("Raw").Range("A1:BK1").AutoFilter Field:=14, _
        Criteria1:=Format(Sheets("Main").Range("E13").Value + 15, "mm/dd/yyyy")
        Sheets("Raw").Range("A1:BL50000").Copy
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:39:11.080

```
Sub Referral()

Application.ScreenUpdating = False

With Sheets("Raw")

    .ShowAllData
    .Range("A1:BK1").AutoFilter Field:=14, Criteria1:=Format(Sheets("Main").Range("E13").Value + 15, "mm/dd/yyyy")

    'this is generic, you may need to adjust this based on your sheet and data needs
    Intersect(.UsedRange, .UsedRange.Offset(1)).SpecialCells(xlCellTypeVisible).Copy

End With

'goes to cell below last used cell in column A
Sheets("referral").Cells(Rows.Count, 1).End(xlUp).Offset(1).PasteSpecial xlPasteValues
Sheets("Raw").AutoFilterMode = False

Application.ScreenUpdating = True 'don't forget to turn on your ScreenUpdating again!

End Sub 
```

# regex - 正则表达式替换方法

> ID：11903884
> 
> 赞同：-2
> 
> 时间：2012-08-10T14:34:34.130
> 
> 标签：regex, string, replace

我想使用 Regex.Replace 方法。我将在很长的字符串中搜索“new long?((long)”表达式并进行以下更改。

前：

```
OracleParameter[] array = new OracleParameter[]
{
    new OracleParameter("p_op_adi", OracleDbType.Varchar2, p_op_adi, ParameterDirection.Input),
    new OracleParameter("p_tip_no", OracleDbType.Int64, p_tip_no, ParameterDirection.Input),
    new OracleParameter("p_islem", OracleDbType.Varchar2, p_islem, ParameterDirection.Input),
    new OracleParameter("p_raise", OracleDbType.Varchar2, p_raise, ParameterDirection.Input),
    new OracleParameter("p_durum", OracleDbType.Int64, null, ParameterDirection.Output),
    new OracleParameter("p_mesaj", OracleDbType.Varchar2, 4000, null, ParameterDirection.Output)
};
sMan.ExecuteSP("FRM_USER.user_yetki_kontrol_islem", array);
p_durum = ((array[4].Value != System.DBNull.Value) ? new long?((long)array[4].Value) : null);
p_mesaj = array[5].Value.ToString(); 
```

正则表达式之后：

```
OracleParameter[] array = new OracleParameter[]
{
    new OracleParameter("p_op_adi", OracleDbType.Varchar2, p_op_adi, ParameterDirection.Input),
    new OracleParameter("p_tip_no", OracleDbType.Int64, p_tip_no, ParameterDirection.Input),
    new OracleParameter("p_islem", OracleDbType.Varchar2, p_islem, ParameterDirection.Input),
    new OracleParameter("p_raise", OracleDbType.Varchar2, p_raise, ParameterDirection.Input),
    new OracleParameter("p_durum", OracleDbType.Int64, null, ParameterDirection.Output),
    new OracleParameter("p_mesaj", OracleDbType.Varchar2, 4000, null, ParameterDirection.Output)
};
sMan.ExecuteSP("FRM_USER.user_yetki_kontrol_islem", array);
p_durum = abcde(array[4].Value);
p_mesaj = array[5].Value.ToString(); 
```

请注意，我必须捕获数组索引号 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:58:11.600

此代码应该完全符合您的要求：

```
class Program
{
    static void Main(string[] args)
    {
        string input = @"OracleParameter[] array = new OracleParameter[]
            {
                new OracleParameter('p_op_adi', OracleDbType.Varchar2, p_op_adi, ParameterDirection.Input),
                p_durum = ((array[4].Value != System.DBNull.Value) ? new long?((long)array[4].Value) : null);
                p_durum = ((array[4].Value != System.DBNull.Value) ? new long?((long)array[4].Value) : null);
            ";

        string pattern = @"^(?<varname>[^=]*)=.*new long\?\(\(long\)(?<arrayval>[^)]*).*?$";
        string replacement = "${varname} = abcde(${arrayval});";

        string output = Regex.Replace(input, pattern, replacement, RegexOptions.Multiline);
        Console.WriteLine(output);
        Console.ReadKey();
    }
} 
```

它获取变量名称和数组值，并将它们用作替换部分中的替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:44:26.650

这个正则表达式选择完整的字符串`(?m)^.*?new long\?\(\(long\).*?$`

```
string res = Regex.Replace(input, @"(?m)^.*?new long\?\(\(long\).*?$", "p_durum = abcde(array[4].Value);"); 
```

# iphone - Meta viewport iPhone 4s 升级设计

> ID：11903888
> 
> 赞同：0
> 
> 时间：2012-08-10T14:34:43.910
> 
> 标签：iphone, html, safari, viewport, meta

我设计了一个分辨率为 640x960px 的应用程序，现在我将其转换为 iPhone 4S 的工作 web 应用程序。如您所知，iPhone 4s 的分辨率为 640x960px。

为什么当我`width=device-width`在不应缩小或放大设计的元视口中使用时，iphone 使用 320 像素而不是 640 像素的宽度？

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

但是，当我使用`width=640`它时，它会强制浏览器使用 640px 作为宽度，但这不会自动更改其他设备（例如 iPad）的宽度。这对我来说没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:41:42.093

> 内容=“宽度=设备宽度”

不会放大任何东西。它只会改变视口的宽度。在这种情况下，iPad 似乎很愚蠢，因为它在横向模式下也认为设备宽度中的宽度为 768 像素。

在横向模式下，为 iPad 设置一个特定的像素值会将其放大 1.333。使用它并将其与响应式布局技术相结合

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

另外，您所做的是正确的。只需为布局添加特定代码。让我的生活轻松多了。

# macos - 如何在 OS X 上不使用特殊字符代替 VIM 的元键组合

> ID：11903889
> 
> 赞同：8
> 
> 时间：2012-08-10T14:34:43.010
> 
> 标签：macos, vim, osx-lion, macvim, osx-mountain-lion

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T15:07:46.630

使用`macmeta`设置：`:set macmeta`

从`:help 'macmeta'`

> 'macmeta' 使用选项 (alt) 作为元键。启用时，不会解释选项键按下，从而启用与`<M-..`> 的绑定。关闭时，选项键按下由所选输入法解释并作为文本插入。

显然这是一个 MacVim-only 设置。

在 Terminal.app 设置中有一个“使用选项作为元键”的设置，在*键盘*选项卡下禁用例如`Option-p`打印*π*。您可能需要启动一个新的终端窗口才能看到效果。但由于某种原因，即使在禁用此功能后，我也无法为 设置映射`<M-p>`，但使用`Ctrl-v`和插入字符的映射**确实**有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T15:36:14.750

好吧，似乎使用 MacVim，在我的 .vimrc 中我可以映射这些特殊字符，它可以在 GUI 和终端上工作。

由于它们是由相应的元键组合生成的，因此它看起来就像一个元键映射。

**编辑**

一些特殊字符是重音符号，可能对它们不起作用。

我已经在我的`.vimrc`：

```
if has("gui_macvim")
  let g:AutoPairsShortcutToggle     = 'π' " <m-p>
  let g:AutoPairsShortcutFastWrap   = '∑' " <m-w>
  let g:AutoPairsShortcutJump       = '∆' " <m-j>
  let g:AutoPairsShortcutBackInsert = '∫' " <m-b>
endif 
```

`has("gui_macvim")`在运行 MacVim 时，在 GUI 和终端上都是如此。

# python - 声明类对象数据类型

> ID：11903890
> 
> 赞同：1
> 
> 时间：2012-08-10T14:34:46.717
> 
> 标签：python

我有一个`Foo`包含类型数据成员的类`Bar`。我不能做一个概括的“默认” `Bar.__init__()`——`Bar`对象被传递到`Foo.__init__()`方法中。

如何告诉 Python 我想要这种类型的数据成员？

```
 class Foo:

# These are the other things I've tried, with their errors    
    myBar         # NameError: name 'myBar' is not defined
    Bar myBar     # Java style: this is invalid Python syntax.
    myBar = None  #Assign "None", assign the real value in __init__. Doesn't work 
#####

    myBar = Bar(0,0,0) # Pass in "default" values. 
    def __init__(self, theBar):
        self.myBar = theBar

    def getBar(self):
        return self.myBar 
```

这有效，当我传入“默认”值时，如图所示。但是，当我调用 时`getBar`，我*没有*取回我在`Foo.__init__()`函数中传入的那个——我得到了“默认”值。

```
 b = Bar(1,2,3)
f = Foo(b)
print f.getBar().a, f.getBar().b, f.getBar().c 
```

这吐出来了`0 0 0`，**不像** `1 2 3`我期待的那样。

如果我不费心声明`myBar`变量，我会在`getBar(self):`方法 ( `Foo instance has no attribute 'myBar'`) 中得到错误。

在我的对象中使用自定义数据成员的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:42:36.403

您无需告诉 Python 您将要添加某个数据成员——只需添加它即可。在这方面，Python 比 Java 更具动态性。

如果`bar`实例本质上是不可变的（这意味着它们实际上不会更改），则可以将默认实例作为`__init__()`参数的默认值：

```
class Foo:
    def __init__(self, the_bar=Bar(0,0,0)):
        self.my_bar = the_bar 
```

使用默认值的所有`Foo`实例将共享一个`Bar`实例。如果`Bar`实例可能被更改，这可能不是你想要的，在这种情况下你应该使用这个习惯用法：

```
class Foo:
    def __init__(self, the_bar=None):
        if the_bar is None:
            the_bar = Bar(0,0,0)
        self.my_bar = the_bar 
```

请注意，您通常不应该在 Python 中编写 getter 和 setter。它们只是降低应用程序速度的不必要的样板代码。由于 Python 支持属性，因此您也不需要它们是面向未来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:42:51.090

正确的方法是除了在构造函数中赋值之外什么都不做。

```
class Foo: 
    def __init__(self, bar):                                                      
        self.bar = bar

    def getbar(self):
        return self.bar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:54:19.863

你绝对不必`bar`提前申报。

如果未指定一个值，听起来您想`Foo.bar`默认为一个值，因此您可能会执行以下操作：

```
class Foo:
    def __init__(self, bar=None):
        # one of many ways to construct a new
        # default Bar if one isn't provided:
        self._bar = bar if bar else Bar(...)

    @property
    def bar(self):
        """
        This isn't necessary but you can provide proper getters and setters
        if you prefer.

        """
        return self._bar

    @bar.setter
    def bar(self, newbar):
        """
        Example of defining a setter
        """
        return self._bar = newbar 
```

通常，仅适当地命名变量并省略 setter 被认为更“pythonic”。

```
class Foo:
    def __init__(self, bar=None):
        self.bar = bar if bar else Bar(...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:47:39.060

您无需在 Python 中声明变量，并且变量是无类型的。

做就是了：

```
class Foo(object): 
    def __init__(self, bar):                                                      
        self.bar = bar

    def getbar(self):
        return self.bar 
```

我怀疑这个问题是由你使用老式类引起的，这有点奇怪。如果你从 object 继承，你会得到一个新风格的类，它的设计不会那么令人惊讶。

# asp.net - RowCommand not firing when clicking buttons inside TemplateField

> ID：11903892
> 
> 赞同：1
> 
> 时间：2012-08-10T14:34:58.907
> 
> 标签：asp.net

Basically I have a GridView:

```
 <asp:GridView ID="gvServices" runat="server" CellPadding="4" 
                      ForeColor="#333333" GridLines="None" AllowSorting="True" 
                      AutoGenerateColumns="False" OnRowCommand="gvServices_RowCommand">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" /> 
```

And inside I have 2 TemplateFields:

```
 <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="btnStart" runat="server" Text="Start" CommandName="StartService" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"/>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="btnStop" runat="server" Text="Stop" CommandName="StopService" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"/>
                    </ItemTemplate>
                </asp:TemplateField> 
```

Finally I have the method thats supposed to fire when clicking on either of the Buttons on the gridView, problem is that when I click either of them the event does not get called at all

```
 public void gvServices_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        int index = Convert.ToInt32(e.CommandArgument);
        if (e.CommandName == "StartService")
        {
            StartServiceItem(gvServices.Rows[index].Cells[0].Text, locations[index]);
        }
        if (e.CommandName == "StopService")
        {
            StopServiceItem(gvServices.Rows[index].Cells[0].Text, locations[index]);
        }
        loadGridView();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:38:53.217

GridView 上的 RowCommand 确实从 TemplateField 中的按钮触发。查看此线程的答案：

[网格视图中的链接按钮未触发](https://stackoverflow.com/questions/6736491/linkbutton-inside-a-gridview-not-firing)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T14:38:43.150

你需要听按钮`RowCommand`。[GridView.RowCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)`asp:ButtonField`在每一行都有一个时使用。

ASP代码：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button ID="btnStart" runat="server" Text="Start" OnCommand="GridButtons_Command" CommandName="StartService" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"/>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button ID="btnStop" runat="server" Text="Stop" OnCommand="GridButtons_Command" CommandName="StopService" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"/>
    </ItemTemplate>
</asp:TemplateField> 
```

代码背后：

```
public void GridButtons_Command(object sender, CommandEventArgs e)
{
    int index = Convert.ToInt32(e.CommandArgument);
    if (e.CommandName == "StartService")
    {
        StartServiceItem(gvServices.Rows[index].Cells[0].Text, locations[index]);
    }
    if (e.CommandName == "StopService")
    {
        StopServiceItem(gvServices.Rows[index].Cells[0].Text, locations[index]);
    }
    loadGridView();
} 
```

# vba - 在 VBA (Microsoft Access) 中加粗标签的“Caption”属性的一部分

> ID：11903894
> 
> 赞同：8
> 
> 时间：2012-08-10T14:35:02.197
> 
> 标签：vba, label

如何在 Microsoft Access 标签的标题中加粗某个单词？

如果有帮助，文本本身将存储在 Microsoft Access 表中。

下面是一个例子。我有一个带有标签的 Microsoft Access 表单，`Form_Load()`如果我将此标签的标题属性设置为 DLookup 查询中返回的值，如下所示：

```
Private Sub Form_Load()

    Me.Label0.Caption = DLookup("Field1", "Table1", "[ID] = 1")

End Sub 
```

我的文字如下：

> 敏捷的棕色狐狸跳过了懒狗

我想让**Lazy**这个词更加大胆。这可能吗？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T19:57:18.890

您没有提及 Access 的版本，对于 2007 (AFAIK) 和 2010，您可以创建一个文本框并将数据选项卡上的文本格式设置为富文本。然后，您可以将控制源设置为：

```
="The quick <b>brown</b> fox" 
```

更改更多属性，例如 Locked 和 Enabled，您将拥有一个外观和行为类似于标签的文本框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:04:13.843

你想要这个有多糟糕？因为我有一个非常疯狂的答案，但它可能会奏效。

将您的标签替换为 Web 浏览器控件，创建一个临时 html 文件，然后将 Web 浏览器指向该文件。您需要在基础表中添加一个字段（或者至少我这样做了），因为必须绑定控件，否则您无法更改 ControlSource - 我认为。

我在表单上放置了一个 Web 浏览器控件，关闭了滚动条，并且通常尝试让它看起来像一个标签。我没有完全成功，但也许你比我更擅长。

我在表中添加了一个名为“FakeLabel”的文本字段。Web 浏览器控件源应指向该字段。

出于测试目的，我使用此代码在表单上放置了一个命令按钮

```
Private Sub Command113_Click()

    Dim sFile As String
    Dim lFile As String

    sFile = Environ("TEMP") & "\fakelabel.html"
    lFile = FreeFile

    Open sFile For Output As lFile

    Write #lFile, "The <strong>quick</strong> brown fox jumped over the <em>lazy</em> dog"

    Close lFile

    Me.Recordset.Edit
    Me.Recordset.Fields("FakeLabel").Value = sFile
    Me.Recordset.Update

    Me.WebBrowser112.Requery

End Sub 
```

这是我单击按钮后的样子。如果您可以摆脱顶部填充，它看起来真的像一个标签。

![使用 Web 控件作为标签的访问表单](../Images/5107980a4c7fb379b9ad8057ca264462.png)

# sql - Ruby on rails - Where SQL method

> ID：11903897
> 
> 赞同：0
> 
> 时间：2012-08-10T14:35:23.867
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

I want to get all the microposts where 'something' = true.

This code works fine

```
class UsersController < ApplicationController
  .
  .
  .
  def show
    @user = User.find(params[:id])
    @microposts = @user.microposts
    @titre = @user.nom
  end
end 
```

But when I tried to make a where sql method this code doesn't work.

```
class UsersController < ApplicationController
      .
      .
      .
      def show
        @user = User.find(params[:id])
        @microposts = @user.microposts.where("something = 'true'")
        @titre = @user.nom
      end
    end 
```

any idea ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:46:36.330

```
 def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.where(something: true)
    @titre = @user.nom
 end 
```

有关缩小查询范围的更多信息，请参见[此处](http://guides.rubyonrails.org/active_record_querying.html#array-conditions)或[此处](http://guides.rubyonrails.org/active_record_querying.html#hash-conditions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:41:58.773

像这样写：

```
Micropost.where(user_id: params[:id], something: true) 
```

# java - Swing designer plugin for Eclipse

> ID：11903902
> 
> 赞同：1
> 
> 时间：2012-08-10T14:35:43.467
> 
> 标签：java, eclipse, swing, layout-manager, gui-designer

I am looking for best swing editor rite now I was looking for eclipse plugin that is [Swing Plugin](https://developers.google.com/java-dev-tools/wbpro/userinterface/property_pane). Are there any other plugins for designing Swing apps. that can be installed in Eclipse, and will also generate the code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:40:15.303

不是 Eclipse，但相当强大的是[Netbeans](http://netbeans.org/)的 swing 设计器。

它生成你需要的代码，并且有很多特性。

# javascript - 警报数组索引和值

> ID：11903907
> 
> 赞同：-6
> 
> 时间：2012-08-10T14:35:49.707
> 
> 标签：javascript, arrays

我有这个循环：

```
for(k=0;k<colNames.length;k++){
    alert(colNames[k]);
} 
```

现在，它只是提醒用户注意数组中的值。如何提醒他们该数组中每个元素的索引和值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:37:31.423

像这样？

```
for(k=0;k<colNames.length;k++){
    alert("Index: " + k + " value: " + colNames[k]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:38:10.213

你可以这样做

```
for(k=0;k<colNames.length;k++){
    alert("Index: " + k + " Value: " + colNames[k]);
} 
```

也使用`console.log("Index: " + k + " Value: " + colNames[k]);`

它不那么烦人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:40:15.320

你不会这样做，因为用几十个他们无法关闭的弹出窗口向用户发送垃圾邮件很烦人。您可以像这样批处理它，并将其输出到 DOM（或者如果它是为您自己使用的，请使用`console.log`）：

```
alert(JSON.stringify( colNames.map(function(x,i){return [i,x]}) )) 
```

如果你想使用 console.log 之类的东西并输出到多行，你会这样做，比 for 循环更干净：

```
colNames.forEach(function(x,i){
    console.log(i,x);
}) 
```

# sql-server-2005 - 在 SQL Server 中组合没有公共元素（枢轴）的列

> ID：11903912
> 
> 赞同：1
> 
> 时间：2012-08-10T14:35:59.733
> 
> 标签：sql-server-2005, pivot, unpivot

我试图找到显示一些数据的最佳方式。

我的数据集如下所示：

```
Form  var1_Day  var1_WTD  var1_30Day  var2_Day  var2_WTD  var2_30Day ...
NA    null      null      null        77        448       2581
A1    166       791       4842        null      null      null
A2    304       1312      8365        null      null      null
A3    29        113       656         null      null      null 
```

我试图弄清楚我将如何显示这样的数据：

```
Var   Form  Day   WTD   30Day
var1  NA    null  null  null
var1  A1    166   791   4842
var1  A2    304   1312  8365
var1  A3    29    113   656
var2  NA    77    448   2581
var2  A1    null  null  null
var2  A2    null  null  null
var2  A3    null  null  null
... 
```

我相信我将不得不使用数据透视表，但不知道从哪里开始。

谢谢你，布拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:38:39.320

虽然您可以像其他答案一样通过静态枢轴执行此操作，但如果您有很多列要转换，则可以使用动态枢轴：

```
DECLARE @colsUnPivot AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @colsUnPivotNull as NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @colsUnPivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test') and
               C.name like 'var%'
         for xml path('')), 1, 1, '')

SET @colsUnPivotNull = stuff((select ', IsNull('+ quotename(C.name) +', 0)' + quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test') and
               C.name like 'var%'
         for xml path('')), 1, 1, '')

SET @colsPivot = stuff((select DISTINCT ','+quotename(right((C.name), len(C.name)-5))
         from sys.columns as C
         where C.object_id = object_id('test') and
               C.name like 'var%'
         for xml path('')), 1, 1, '')

set @query 
  = ' 
      SELECT var, form,  '+ @colsPivot +'
      FROM
      (
        SELECT distinct substring(field, 1, 4) var, 
          --field,
          right((field), len(field)-5) as col,
          form,
          value
        from 
        (
          SELECT form, '+ @colsUnPivotNull + '
          FROM test
        ) t1
        unpivot 
        (
           value
           for field in (' + @colsUnPivot + ')
        ) unpvt 
      ) x
      pivot
      (
        sum(value)
        for col in ('+ @colsPivot + ')
      ) p
      ORDER BY var, form'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4d99c/43)

这将获得要取消透视的列列表和执行时的透视。然后，如果您有很多列，则不必对值进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:41:46.133

其实你想要`UNPIVOT`

像这样...

```
select SUBSTRING(t,1,4) as Var, form, day, wtd, 30day 
from yourtable
unpivot ([day] for d in (var1_day,var2_day)) td
unpivot ([wtd] for w in (var1_wtd,var2_wtd)) tw
unpivot ([30day] for t in (var1_30day,var2_30day)) tt
where SUBSTRING(d,1,4) = SUBSTRING(w,1,4)
and  SUBSTRING(d,1,4) = SUBSTRING(t,1,4) 
```

# facebook - Embedding a Twitter profile widget into a Facebook Page Tab-Application

> ID：11903914
> 
> 赞同：1
> 
> 时间：2012-08-10T14:36:06.877
> 
> 标签：facebook, twitter, tabs, widget

I have a page tab on a clients profile about a boxer that they sponser, sort of like a mini about-the-boxer website. One of the pages on this mini-site is a twitter profile widget feed, however the twitter API doesn't render when it is loaded into a FB iframe. I looked at the original url of the page (http://social.spiceboxwhisky.com/anthony/?page_id=10) and it works fine. Can anyone think of a way to get this twitter profile widget working?

Here's where you can view it on FB (must be 21+): [https://www.facebook.com/spiceboxcanadianwhisky/app_253240968125508?app_data=page%3DTwitter](https://www.facebook.com/spiceboxcanadianwhisky/app_253240968125508?app_data=page%3DTwitter)

And on the host site: [http://social.spiceboxwhisky.com/anthony/?page_id=10](http://social.spiceboxwhisky.com/anthony/?page_id=10)

# c++ - boost deadline_timer - max number of timers in Linux

> ID：11903920
> 
> 赞同：1
> 
> 时间：2012-08-10T14:36:21.213
> 
> 标签：c++, linux, boost, timer

Does anyone know what the max number of simultaneous boost deadline_timer instances can be created within a process in Linux? I believe boost uses the Posix timer_create method.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:47:03.430

从 Linux [timer_create 手册页](https://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html%20manpage)：

```
The kernel preallocates a "queued real-time signal" for each timer created
using timer_create().  Consequently, the number of timers is limited by the
RLIMIT_SIGPENDING resource limit (see setrlimit(2)). 
```

在 bash 中使用`ulimit -i`来获取或设置 RLIMIT_SIGPENDING。在我的 Ubuntu 服务器上，该限制默认为 16382。

# c# - 为什么当 IsInputKey 设置为 true 时再次调用 PreviewKeyDown 事件？

> ID：11903921
> 
> 赞同：4
> 
> 时间：2012-08-10T14:36:21.697
> 
> 标签：c#, winforms, events

VS2010 C# .Net 4.1

我正在处理一个用户必须选择或输入初始数据的表单`ComboBox`。`Tab`使用下面的代码（这需要一些时间来推断），如果数据正确，我会在用户按下键时启用“编辑”按钮，否则该按钮被禁用，它会移动到下一个按钮。

此代码有效，但副作用是当我设置为 true`PreviewKeyDown`时事件再次发生。`IsInputKey`这会调用两次验证。该`KeyDown`事件仅被调用一次，并且`IsInputKey`在第二次调用时再次为 false，因此我确实需要再次检查验证。

我想了解为什么并可能避免它。

```
private void comboBox1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e) { 
  if (e.KeyData == Keys.Tab) { 
    if (ValidationRoutine()) { 
      e.IsInputKey = true;  //If Validated, signals KeyDown to examine this key 
    } //Side effect - This event is called twice when IsInputKey is set to true 
  }           
} 

private void comboBox1_KeyDown(object sender, KeyEventArgs e) { 
  if (e.KeyData == Keys.Tab) { 
      e.SuppressKeyPress = true; //Stops further processing of the TAB key 
      btnEdit.Enabled = true; 
      btnEdit.Focus(); 
  } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:02:06.357

为什么？很难回答，Winforms 就是这样。首先来自消息循环，再次来自控件的消息调度程序。该事件实际上是一种实现受保护的 IsInputKey() 方法的替代方法，而无需重写控件类。有点hack，我总是覆盖并且从未使用过该事件。

更好的鼠标陷阱是改写 ProcessCmdKey()。像这样：

```
 protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
        if (this.ActiveControl == comboBox1 && keyData == Keys.Tab) {
            if (ValidationRoutine()) {
                btnEdit.Enabled = true;
                btnEdit.Focus();
                return true;
            }
        }
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

# facebook - Javascript SDK Multi friend selector

> ID：11903923
> 
> 赞同：-2
> 
> 时间：2012-08-10T14:36:33.193
> 
> 标签：facebook, sdk, facebook-fql

I'm trying to install the fb multi friend selector using javascript SDK following this link :

[http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

My question is : when i call the function :

function sendRequestViaMultiFriendSelector() { FB.ui({method: 'apprequests', message: 'My Great Request' }, requestCallback); }

Its open a pop up with all my friend and send a message but when i go to Facebook and open this notification it open a wrong url : [http://mydomain.com/?request_ids=448697108486876&ref=notif&app_request_type=user_to_user](http://mydomain.com/?request_ids=448697108486876&ref=notif&app_request_type=user_to_user)

So i wanted to know if it was possible to open a friend selector pop up and send a private message or a simple message on the wall to all friend users ? There is an existing code for that ? or i must develop my own code with Javascript SDK ? Thanks you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:49:25.167

是的，您可以使用发送对话框，如果您有一个多朋友选择器，然后回调将所选朋友的数组发送到另一个函数，那么您可以调用发送对话框，并将回调的用户放入“to”字段：

```
function sender(users_array) {    
  FB.ui({
      method: 'send',
      name: 'Name',
      to: users_array,
      link: '<Some_URL>',
  });
} 
```

[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

# javascript - 视频作为根据命令播放的网站的背景

> ID：11903924
> 
> 赞同：4
> 
> 时间：2012-08-10T14:36:36.157
> 
> 标签：javascript, jquery, css, jquery-plugins, html5-video

我一直在尝试将视频设置为背景，我有 flv 文件和 youtube 链接。使用 html5 视频标签或 jquery 将它放在我的网站上并不难，但我找不到如何将它放在我的网站上但不能自动启动。我有一个半透明的矩形，文本将在其中出现。所以我的想法是创建一个按钮或链接，让文本和矩形消失并让视频播放。

有谁知道一个好的插件或脚本可以做到这一点，或者有人能找到正确的方向。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:54:28.403

您也可以使用本机浏览器 html5 视频播放器来执行此操作，这会更快，无需使用插件。试试这个：

**[这是工作 jsFiddle 示例。](http://jsfiddle.net/YZT5s/117/)**

jQuery：

```
$(document).ready(function() {
    var windowH =  $(window).height();
    $('#main_container, #overlay').height(windowH);
    $(window).resize(function () {
        var windowH =  $(window).height();
        $('#main_container, #overlay').height(windowH);
    });
});​ 
```

CSS：

```
body { background-color: #000000; font-family: Arial; font-size: 12px;
       color: #000; margin: 0; padding: 0; overflow: hidden; }
#main_container { float: left; position: relative; width: 100%; height: 100%; 
                  background-color: #000000; }
#video { position: absolute; left: 0px; top: 0px; min-height: 100%;
         min-width: 100%; z-index: 9997; }​
#overlay { position: absolute; left: 0px; top: 0px; height: 100%; width: 100%;
           z-index: 9998; } 
```

html:

```
<div id="main_container">
<div id="overlay"></div>
<video id="video" width="" height="" controls="controls" loop="loop" autoplay="">
 <source src="http://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4" />
 <source src="http://www.w3schools.com/html/mov_bbb.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video>
</div> 
```

注意：使用覆盖 div 来停用控件，您可以使用视频中的任何内容，例如 jsFiddle 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:00:54.140

如果你想要一个脚本，你可以尝试：[https ://github.com/sydlawrence/jquery.videoBG](https://github.com/sydlawrence/jquery.videoBG)

在这里的文档中：[http://syddev.com/jquery.videoBG/index.html#documentation](http://syddev.com/jquery.videoBG/index.html#documentation)，似乎有一个带有布尔参数的自动播放选项......所以我猜只是将它设置为 false

自动播放布尔

# java-me - 在 j2me 中检索联系人时出现空指针异常

> ID：11903926
> 
> 赞同：1
> 
> 时间：2012-08-10T14:36:51.867
> 
> 标签：java-me, nullpointerexception, jsr75

我在使用此联系人检索代码时遇到问题。函数 getContact() 正在重新调整 null。

```
private PIM pim;
private ContactList clist;

public ContactExtract(){
    pim=PIM.getInstance();
    try{
    clist=(ContactList) pim.openPIMList(PIM.CONTACT_LIST,PIM.READ_ONLY);
    }catch(Exception e){}
}

public Vector getContact(){
    //ContactDetail cd[]= new ContactDetail[200];
    Vector v=new Vector();
    try{
        Enumeration en=clist.items();
        //String num=null;
        //String temp[]=new String[2];
        //int i=0;
        while(en.hasMoreElements()){
            Contact c=(Contact)en.nextElement();
            v.addElement(c);
            //temp=c.getStringArray(Contact.NAME, i);
            //num=c.getString(Contact.TEL, i);
            //cd[i]=new ContactDetail(temp[0],temp[1],num);
        }
        clist.close();
    }catch(Exception e){}
    return v; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:59:10.697

您获得 NPE 的最可能原因是`clist`该方法中的值为 null `getContact`。反过来，最可能的原因是`ContactExtract()`构造函数中发生了一些异常。

但是，只要您吞下异常，就永远不会确定这一点。如果您有兴趣，请在网上搜索类似*java 燕子异常*之类的内容，以更详细地了解为什么这是不好的。

同时，找出发生了什么的最直接的方法是在代码中的任何地方添加适当的日志记录，首先是在 catch 块中。确保没有类似的陈述`catch(Exception e){}`，您的奖励将更容易理解出了什么问题。

在构造函数中，将空的 catch 块替换为：

```
catch(Exception e){
    Sustem.out.println("exception in openPIMList: [" + e + "]");
} 
```

在 getContat 方法中，做同样的事情，只是使用适当的日志消息：

```
catch(Exception e){
    Sustem.out.println("exception in getContact: [" + e + "]");
} 
```

然后，在模拟器中重新运行代码并查看其控制台以找出问题所在。

值得在代码中添加的另一件事是**检查、记录和处理可能的空值**。在`getContact()`方法中，`clist`可以为 null 并给您带来各种麻烦，但您甚至不会尝试检查和处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:40:49.267

总是尝试打印异常 e。

```
catch(Exception e)
{
    e.printStackTrace();
} 
```

你会知道代码有什么问题。

# excel - 在包含字母和数值的单元格中搜索数值-VBA Excel

> ID：11903929
> 
> 赞同：0
> 
> 时间：2012-08-10T14:37:00.987
> 
> 标签：excel, vba

我有一个电子表格，其中有一列“M”列，其中包含如下字母数值的行：103.14 Jose Dolorez Chavez。我不确定是否有代码可以遍历每一行单元格，剪切数值并将它们粘贴到相邻的列中。所以最后，我会有： 一栏：103.14 另一栏：何塞·多洛雷斯·查韦斯

有人可以帮助我。我不知道从哪里开始。代码需要遍历列“M”中的所有 500 行，查找/剪切值，并将它们粘贴到列“N”中。

任何建议将不胜感激，并在此先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:19:57.750

> 不，模式始终保持不变：数字，后跟员工姓名。– 朵拉 13 分钟前

为此，您不需要 VBA。您可以通过 Text To Columns 轻松实现此目的。

突出显示 M 列并单击数据 | 文本到列 | 分隔的

选择空格作为分隔符，然后单击完成，您就完成了。[在此处](http://wikisend.com/download/154882/untitled.png)查看快照

上传屏幕截图，`wikisend.com`好像今天 imgur 已经关闭了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:06:33.047

这是您可以使用的 VBA 函数。它使用 Val 函数，该函数返回字符串开头的数字部分。只需将其放在工作簿中的常规代码模块中：

```
Function GetNumAtBeginOfString(StringWithNum)
GetNumAtBeginOfString = Val(StringWithNum)
End Function 
```

然后在 O 列中输入这个公式（假设您的数据从第 2 行开始）：

```
=GetNumAtBeginOfString(M2) 
```

如果第 N 列输入这个公式：

```
=TRIM(SUBSTITUTE(M2,O2,"")) 
```

...并复制下来。

这将为您留下原始字符串和两个新列。如果需要，您可以复制并粘贴到原件上。

编辑：您可以在 O 列中使用此 Excel 公式而不是 VBA 函数：

```
=MAX(IF(ISNUMBER(LEFT(M2,ROW($A$1:$A$100))*1),(LEFT(M2,ROW($A$1:$A$100))*1),0)) 
```

这是一个数组公式，必须输入`Ctrl-Shft-Enter`

# web-config - Web.config overwritten

> ID：11903935
> 
> 赞同：0
> 
> 时间：2012-08-10T14:37:29.390
> 
> 标签：web-config

I have a web.config for my website. I just made a web service which likes to overwrite the previous one. From what I can understand I need an xml transform here. I have read several sites and I am confused as how to complete this. [One reference](http://vishaljoshi.blogspot.com/search?q=xml+transforms). Would love some insight, thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:43:58.447

如果您想在 web.config 中添加或更改某些内容，则不需要任何 XSL(T)，因为您的输出格式仍然是 XML。
转换 (XSLT) 主要用于以不同格式呈现 XML 数据。
您需要的是基本的 XML 编辑功能。解析为 DOM，添加/更改节点，保存。

# java - 如何在显示之前获取 Miglayout 管理器设置的面板边界？

> ID：11903940
> 
> 赞同：0
> 
> 时间：2012-08-10T14:37:37.257
> 
> 标签：java, swing, miglayout

共有三种不同类型的面板，每种面板跨越不同数量的网格。1*3 、 1*1 、 3*1 。

```
add(panel1, "span 1 3,push, grow");
add(panel2, "push, grow");
add(panel3, "span 3 1,push, grow"); 
```

当它与屏幕上的其他面板重叠时，我想将第一个面板的约束更改为“span 1 2”。但是要确定它是否与另一个面板重叠，我必须知道它的界限。

我没有设置任何尺寸限制。

有什么办法可以知道“面板/组件实际显示之前的界限”？

还有，如何知道 MigLayout 管理器设置的行和列的长度？

实际上我想用这些不同大小的面板覆盖整个屏幕。

编辑 ：

我忘了输入罪魁祸首......`add(lastPanel, span, push, grow)`

我正在尝试用不同大小的面板覆盖整个屏幕。此代码适用于偶数个矩形，但不适用于奇数个矩形。当它们的数量为奇数时，最后一个网格始终为空。所以我跨越了最后一个面板以覆盖完整的可用空间，但随后它与 3*1 面板重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:39:07.400

我可以想到几种方法，不是很好或不是很漂亮，而且都遇到同样的问题。

布局可以连续重复发生（也就是说，您将被一系列快速连续布局容器的请求所困扰）

陷阱试图弄清楚它什么时候停止。下一个问题在你引起它时就知道了。

您“可以”覆盖 parent`Container`的`doLayout`方法，在您调用后，`super.doLayout`您将可以访问结果布局。这不是最好的解决方案，因为它要求您实施`Container`您可能不想实施的方案。

我能想到的另一个解决方案是使用`ComponentListener`on `panel1`on 监视`componentResized`事件。

我会**认真**地玩这些，看看你给自己带来了什么麻烦。更好的解决方案是提前尝试解决布局问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:23:48.397

`JPanel`（默认对 each 有效）在两种情况下`Swing JComponents`返回它的`Size`or`Bounds`

1.  if 是一次在屏幕上可见的时间

2.  之后`pack()`到`Top-Level Container`

没有理由知道`Standard LayoutManagers`MigLayout 和 MigLayout 的任何值，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:52:11.577

我再次遇到了类似的问题，但这次我得到了答案，我可能对某人有帮助，所以我在这里发布。

```
addAncestorListener(new AncestorListener() {
        @Override
        public void ancestorAdded(AncestorEvent event) {
                height = getHeight();
                width = getWidth();
                //Modifications to the components here.
        } 
```

我想要 LayoutManager 在编译时设置的尺寸（这是不可能的）。AncestorListener 做到了，一旦组件被布置在屏幕上。它捕获尺寸并相应地修改组件。

# jquery - 我怎样才能删除一个然后用jQuery添加另一个？

> ID：11903944
> 
> 赞同：0
> 
> 时间：2012-08-10T14:38:04.050
> 
> 标签：jquery

我正在使用以下代码更改边框颜色：

```
$("#input_" + type + "_" + row).css("border-color", "black") 
```

如何首先删除`<span></span>`直接跟随我的输入的任何（如果存在），然后添加以下内容：

```
<span class="check-ok"></span> 
```

请注意，即使在最初输入之后没有跨度，我也需要它来工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:41:10.920

只需使用[`.next` *^([docs])*](http://api.jquery.com/next/)：

```
$("#input_" + type + "_" + row)
  .next('span').remove().end()
  .after('<span class="check-ok"></span>'); 
```

如果没有`span`，`.next`则不会选择任何元素，`.remove()`也不会做任何事情。

如果有**多个**连续`span`元素并且您想删除所有元素，则可以使用[`.nextUntil` *^([docs])*](http://api.jquery.com/nextUntil/)：

```
$("#input_" + type + "_" + row)
  .nextUntil(':not(span)').remove().end()
  .after('<span class="check-ok"></span>'); 
```

# ios - 在应用程序中创建标题导航的正确模式是什么？

> ID：11903948
> 
> 赞同：-2
> 
> 时间：2012-08-10T14:38:25.127
> 
> 标签：ios, ios5

我一直在谷歌搜索，发现了一些使用 UINavigationController 的建议，有时 UITabBarController 也很有意义（但程度较低）。

我从未使用过 UINavigationController ...我只是尝试过，当我将它拖到情节提要时，它在情节提要上放置了两个屏幕（连接到 UITableView 的导航控制器）。所以我认为这不是我真正需要的。

有人可以帮我理解我需要做什么才能使标题导航在所有屏幕上都保持不变吗？在其中我想要有如下部分：

```
Home | Section1 | Section2 | Section3 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:00:29.617

考虑用户将什么视为您使用的结构的“含义”可能会有所帮助。

导航控制器的意义是一个容器，可以让您显示一系列内容控制器，其中一个内容控制器的操作在逻辑上导致下一个内容控制器。标签栏控制器的意义是（大部分）不相关的内容控制器，它们共存并且没有（太多）相互依赖。

我认为最好从界面的目的而不是外观开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:55:31.850

我要向你推荐一些对我有很大帮助的东西，那就是从 iTunes U 下载斯坦福的 iPhone 和 iPad 开发课程 CS193P（你去 iTunes Store，搜索并下载它）。

其次，你不应该在 SO 上问这样的一般性问题，你问的问题是你可以通过研究、阅读[Apple 的开发人员文档](http://developer.apple.com)或按照我刚才建议的那样做一个教程自己找到的。祝你好运。

# c# - GetDC(0&) 是什么意思？

> ID：11903951
> 
> 赞同：2
> 
> 时间：2012-08-10T14:38:39.753
> 
> 标签：c#, vb6

我正在阅读一些 VB6 以转换为 C#。这条线是什么意思？`0&`相当于`IntPtr.Zero`？_

```
//'Get a Device context
hdc = GetDC(0&) 
```

这个值用于 pinvoke，所以我不确定是否`IntPtr.Zero`有意义，因为我们需要选择一些对象。

```
OldFont = SelectObject(hdc, ObjFont) 
```

注意，ObjFont 通过

```
//'Get the Window's font
ObjFont = SendMessage(hwnd, WM_GETFONT, 0, 0&)//there's that mysterious 0& agaain. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:39:59.330

它是一个 (VB6) 类型声明字符。请查看[此问题](https://stackoverflow.com/questions/3888921/what-do-and-mean-when-attached-to-numbers-in-vb6)以获取有关这些内容的更多详细信息。

在您的示例 VB6 代码中，它强制`0`为`Long`（4 个字节），否则它将为`Integer`（2 个字节）

这与再次使用 VB6 代码执行这种长手方法相同：

```
Dim lParam as Long
lParam = 0
ObjFont = SendMessage(hwnd, WM_GETFONT, 0, lParam) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T14:45:43.063

在您的具体示例中，是的，它相当于`IntPtr.Zero`在 C# 中。

它是 VB6 的“空句柄值”，[GetDC](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144871%28v=vs.85%29.aspx)使用它来返回整个屏幕的设备上下文。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T14:44:19.187

这相当于传递`NULL`给`GetDC()`which 指示函数返回`hDC`整个*屏幕*的，所以`IntPtr.Zero`是等价的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:42:06.187

这和`Clng(0)`:) 就像下面的人说的一样；D

# java - Apache POI 编码格式适用于 MS excel 2010，但不适用于 excel 2003

> ID：11903955
> 
> 赞同：2
> 
> 时间：2012-08-10T14:38:44.913
> 
> 标签：java, apache-poi

我已经使用 Apache POI 为 excel 编写了颜色格式代码。颜色和字体的格式在 MS Excel 2010 中很好。但它与 excel 2003 不兼容。在 MS Excel 2003 中打开文件时，格式不存在。

这里是示例代码：

```
 CellStyle style = getWorkbook().createCellStyle();

    Font font = wb.createFont();
    font.setBoldweight(Font.BOLDWEIGHT_BOLD);
    font.setFontHeightInPoints((short)11);

    style.setFillForegroundColor(IndexedColors.GREY_50_PERCENT.getIndex());
    style.setFillPattern(CellStyle.SOLID_FOREGROUND);

    Cell cell = excelRow.createCell(10);
    cell.setCellStyle(style); 
```

如果有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:46:41.027

我也遇到过同样的问题。这与 excel 版本无关。我们必须在循环之前创建样式，并在创建后将样式应用于特定的单元格。

[https://stackoverflow.com/a/11792648/1211000](https://stackoverflow.com/a/11792648/1211000(it)（可能有帮助）

# licensing - 选择软件许可证

> ID：11903957
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:38:58.927
> 
> 标签：licensing

我想在开源许可下发布一些 javascript 库，但在选择一个时遇到了一些困难。我想要一个符合以下要求的许可证：

1.  必须归功于原作者
2.  对源代码的修改必须开源
3.  软件可以与专有软件一起出售、修改或捆绑。

是否有任何符合此要求的开源许可证？

我已经考虑过 MPL，但我不知道它是否需要给予作者荣誉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:54:24.537

CC BY-SA 似乎遵循您的“规则”：[http ://creativecommons.org/licenses/by-sa/3.0/](http://creativecommons.org/licenses/by-sa/3.0/)

MPL似乎也不错

# java - 布局 xml 中自定义视图的空指针异常

> ID：11903962
> 
> 赞同：7
> 
> 时间：2012-08-10T14:39:24.887
> 
> 标签：java, android, eclipse, android-custom-view, custom-view

这是自定义视图代码，它在使用此视图的 XML 的布局选项卡中给了我一个空指针异常：

```
public class BoardView extends View {

    // Drawables for the board boxes, the playable zone
    public Drawable[][] block = new Drawable[20][10];
    // Drawables for the wall (yes, it's done with tiles)
    public Drawable[] wall = new Drawable[102];
    // Drawable for the background, and boolean for drawing it or not
    Drawable mbg;
    boolean bg = false;
    // Context and canvas to be used along the class
    Context context;
    Canvas c;

    /*************************************************/
    /* Class constructor **************************** */
    /*************************************************/
    /* Defines the context and the canvas *********** */
    /*************************************************/
    public BoardView(Context cont, AttributeSet attrs) {
        super(cont, attrs);
        context = cont;
    }

    /*************************************************/
    /* Initializes drawables for playable boxes ***** */
    /*************************************************/
    /* Must be initialized one by one from the Game * */
    /* activity, passing all the parameters ********* */
    /*************************************************/
    public void initialize(int i, int j, int left, int top, int side) {
        block[i][j] = context.getResources().getDrawable(R.drawable.alpha);
        block[i][j].setBounds(left, top, left + side, top + side);
    }

    /*************************************************/
    /* Draws the board wall ************************* */
    /*************************************************/
    /* Needs the top-left point of the board frame ** */
    /* and the width of the wall ******************** */
    /*************************************************/
    public void createWall(int left, int top, int side) {
        int i = 0, x, y;
        x = left - side / 2;
        y = top;
        // The left wall
        while (i < 40) {
            wall[i] = context.getResources().getDrawable(R.drawable.brick);
            wall[i].setBounds(x, y, x + side / 2, y + side / 2);
            y = y + side / 2;
            i = i + 1;
        }
        x = left + side * 10;
        y = top;
        // The right wall
        while (i < 80) {
            wall[i] = context.getResources().getDrawable(R.drawable.brick);
            wall[i].setBounds(x, y, x + side / 2, y + side / 2);
            y = y + side / 2;
            i = i + 1;
        }
        x = left - side / 2;
        // The floor
        while (i < 102) {
            wall[i] = context.getResources().getDrawable(R.drawable.brick);
            wall[i].setBounds(x, y, x + side / 2, y + side / 2);
            x = x + side / 2;
            i = i + 1;
        }
    }

    /*************************************************/
    /* Draws the board background ******************* */
    /*************************************************/
    /* Needs the top-left point of the board frame ** */
    /* and the width of the wall ******************** */
    /*************************************************/
    public void createBg(int left, int top, int side) {
        // Set board background (if any)
        bg = false;
        int bgn = 1 + (int) (Math.random() * 19);
        switch (bgn) {
        case 1:
            mbg = getResources().getDrawable(R.drawable.bg1);
            break;
        case 2:
            mbg = getResources().getDrawable(R.drawable.bg2);
            break;
        case 3:
            mbg = getResources().getDrawable(R.drawable.bg3);
            break;
        case 4:
            mbg = getResources().getDrawable(R.drawable.bg4);
            break;
        case 5:
            mbg = getResources().getDrawable(R.drawable.bg5);
            break;
        case 6:
            mbg = getResources().getDrawable(R.drawable.bg6);
            break;
        case 7:
            mbg = getResources().getDrawable(R.drawable.bg7);
            break;
        case 8:
            mbg = getResources().getDrawable(R.drawable.bg8);
            break;
        case 9:
            mbg = getResources().getDrawable(R.drawable.bg9);
            break;
        case 10:
            mbg = getResources().getDrawable(R.drawable.bg11);
            break;
        case 11:
            mbg = getResources().getDrawable(R.drawable.bg11);
            break;
        case 12:
            mbg = getResources().getDrawable(R.drawable.bg12);
            break;
        case 13:
            mbg = getResources().getDrawable(R.drawable.bg13);
            break;
        case 14:
            mbg = getResources().getDrawable(R.drawable.bg14);
            break;
        case 15:
            mbg = getResources().getDrawable(R.drawable.bg15);
            break;
        case 16:
            mbg = getResources().getDrawable(R.drawable.bg16);
            break;
        case 17:
            mbg = getResources().getDrawable(R.drawable.bg17);
            break;
        case 18:
            mbg = getResources().getDrawable(R.drawable.bg18);
            break;
        case 19:
            mbg = getResources().getDrawable(R.drawable.bg19);
            break;
        }
        mbg.setBounds((int) (left), (int) (top), (int) (left + side * 10),
                (int) (top + 20 * side));
    }

    /*************************************************/
    /* Draws the board ****************************** */
    /*************************************************/
    /* Draws the walls, the bg and all the boxes **** */
    /*************************************************/
    @Override
    protected void onDraw(Canvas canvas) {
        c = canvas;
        super.onDraw(canvas);
        if (bg)
            mbg.draw(canvas);
        for (int i = 0; i < 102; i++)
            wall[i].draw(c);
        for (int i = 0; i < 20; i++)
            for (int j = 0; j < 10; j++) {
                block[i][j].draw(canvas);
            }
        // Actually draw
        invalidate();
    }

    /*************************************************/
    /* Canvas getter ******************************** */
    /*************************************************/
    public Canvas getCanvas() {
        return c;
    }

    /*************************************************/
    /* Colors a box ********************************* */
    /*************************************************/
    /* Changes the drawable for the indicated box to */
    /* to 'c'. Can also be COLOR_NONE to undraw ***** */
    /*************************************************/
    public void setColor(int i, int j, byte c) {
        Rect rect;
        rect = block[i][j].getBounds();
        switch (c) {
        case Values.COLOR_NONE:
            block[i][j] = context.getResources().getDrawable(R.drawable.alpha);
            ;
            break;
        case Values.COLOR_RED:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_red);
            break;
        case Values.COLOR_GREEN:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_green);
            break;
        case Values.COLOR_BLUE:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_blue);
            break;
        case Values.COLOR_YELLOW:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_yellow);
            break;
        case Values.COLOR_PINK:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_pink);
            break;
        case Values.COLOR_PURPLE:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_purple);
            break;
        case Values.COLOR_WHITE:
            block[i][j] = context.getResources().getDrawable(
                    R.drawable.block_white);
            break;
        }
        block[i][j].setBounds(rect);
    }
} 
```

这是错误日志：

```
java.lang.NullPointerException
    at com.seavenois.tetris.BoardView.onDraw(BoardView.java:166)
    at android.view.View.draw(View.java:6880)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.View.draw(View.java:6883)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.View.draw(View.java:6883)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:466)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:320)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1165)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partActivated(LayoutEditorDelegate.java:734)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partBroughtToTop(LayoutEditorDelegate.java:744)
    at org.eclipse.ui.internal.PartListenerList$2.run(PartListenerList.java:87)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:888)
    at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)
    at org.eclipse.ui.internal.PartListenerList.firePartBroughtToTop(PartListenerList.java:85)
    at org.eclipse.ui.internal.PartService.firePartBroughtToTop(PartService.java:208)
    at org.eclipse.ui.internal.WorkbenchPagePartList.firePartBroughtToTop(WorkbenchPagePartList.java:76)
    at org.eclipse.ui.internal.WorkbenchPagePartList.fireActiveEditorChanged(WorkbenchPagePartList.java:52)
    at org.eclipse.ui.internal.PartList.setActiveEditor(PartList.java:162)
    at org.eclipse.ui.internal.WorkbenchPage.makeActiveEditor(WorkbenchPage.java:1355)
    at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3629)
    at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:3159)
    at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:279)
    at org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:98)
    at org.eclipse.ui.internal.PartPane.setFocus(PartPane.java:325)
    at org.eclipse.ui.internal.EditorPane.setFocus(EditorPane.java:127)
    at org.eclipse.ui.internal.PartStack.presentationSelectionChanged(PartStack.java:837)
    at org.eclipse.ui.internal.PartStack.access$1(PartStack.java:823)
    at org.eclipse.ui.internal.PartStack$1.selectPart(PartStack.java:137)
    at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:133)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:269)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:278)
    at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)
    at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$2.handleEvent(DefaultTabFolder.java:88)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

这是第 166 行`BoardView.java`：

```
wall[i].draw(c); 
```

我怎样才能解决这个问题？我从俄罗斯方块源代码中得到了这段代码，我想研究它以供将来参考，但我无法查看游戏的布局

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:00:53.937

您目前没有`NULL`在您的`onDraw()`.

签`NULL`入将帮助您编写更稳定的代码并帮助您更快地找到问题。

我会添加一些`NULL`检查，如下所示：

```
protected void onDraw(Canvas canvas) {
    if (canvas != null) {
        c = canvas;
        super.onDraw(canvas);
        if (bg) {
            if (mbg != null) {
                mbg.draw(canvas);
            } else {
                /*
                 * Handle null value
                 * print to logcat this was null
                 */
            }
        }
        for (int i = 0; i < 102; i++) {
            if (wall[i] != null) {
                wall[i].draw(c);
            } else {
                /*
                 * Handle null value
                 * print to logcat this was null
                 */
            }
        }
        for (int i = 0; i < 20; i++) {
            for (int j = 0; j < 10; j++) {
                if (block[i][j] != null) {
                    block[i][j].draw(canvas);
                } else {
                    /*
                     * Handle null value
                     * print to logcat this was null
                     */
                }
            }
        }
        //Actually draw
        invalidate();
    } else {
        /*
         * Handle null value
         * print to logcat this was null
         */
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:00:36.323

我没有看到初始化方法的实际调用。

如：

```
initialize(i, j, left, top, side); 
```

所以我猜你是从外面做的，错过了一些东西，所以墙、块或mbg仍然是空的。

如果提示不够，也许添加一些代码来说明您如何使用和初始化您的视图。

（或者，但希望不是这样，我错了！）

# javascript - 使用 javascript 提交具有不同值的表单

> ID：11903964
> 
> 赞同：1
> 
> 时间：2012-08-10T14:39:35.850
> 
> 标签：javascript, html, forms

我是表单和 Javascript 的新手，所以请原谅。

我有一个看起来像这样的表格：

```
<form method="post" action="control" name="myform">
<input type="submit" name="Name" value="Do A"/>
<input type="submit" name="Name" value="Do B" />
<input type="submit" name="Name" value="Do C" />
<input type="submit" name="Name" value="Close" />
</form> 
```

我需要更改它以便有两个按钮，并且表单是使用依赖于一些外部条件的 javascript 提交的，所以我希望它看起来像这样：

```
<form method="post" action="control" name="myform">
<script>
function submitForm(form){
    if(someConditionA){
        submit the form so that the script performs same action as if the button Do A had been clicked
    } if (someConditionB){
        submit the form so that the script performs same action as if the button Do B had been clicked
    } if (someConditionC){
        submit the form so that the script performs same action as if the button Do C had been clicked
    }
}

function closeForm(form){
    window.close();
}
</script>
<button name="doAction" onClick="SubmitForm(this.form)">Do Action<\button>
<button name="close" onClick="SubmitForm(this.form)">Close<\button>
</form> 
```

如何实现函数 submitForm？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:04:16.103

添加一个与原始提交按钮同名的隐藏字段：

```
<input type="HIDDEN" name="Name" value=""/> 
```

根据您的条件设置该字段的值：

```
function submitForm(form){
    if(someConditionA){
        form.Name.value = "Do A";
    } if (someConditionB){
        form.Name.value = "Do B";
    } if (someConditionC){
        form.Name.value = "Do C";
    }
    form.submit();
} 
```

将新的关闭按钮更改为：

```
<button name="close" onClick="this.form.Name.value='Close';this.form.submit();">Close<\button> 
```

我没有测试过这个，所以它可能包含一两个错误，但这是一般的想法。（为“this.form”+1，没有多少人知道这一点，很好。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:53:17.350

刚刚想出了我的问题的答案：

这样做的方法是有一个隐藏字段：

```
<input type="hidden" name="Name" value=""/> 
```

然后在函数中，将此隐藏字段设置为与相应按钮具有相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:03:04.217

好吧，您应该简单地以不同的方式命名您的提交按钮。

```
<form method="post" action="control" name="myform">
    <input type="submit" name="SubmitA" value="Do A"/>
    <input type="submit" name="SubmitB" value="Do B" />
</form> 
```

这样，当提交时，服务器将能够区分点击了哪个提交。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T14:51:35.873

不确定我是否正确解决了您的问题，但是您为什么不在这些提交按钮上进行单击事件？像

```
$('#mysendbtn').click(function(){ ...do A }); 
```

# qr-code - 串行二维码生成器

> ID：11903967
> 
> 赞同：0
> 
> 时间：2012-08-10T14:39:39.003
> 
> 标签：qr-code

我需要一个 QR 码生成器，它可以生成 21500 个带有 QR 印章的唯一序列号，并将每 1000 个代码导出一个 PDF 文件，因此我们将有 22 个 PDF 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:45:28.643

您可以使用您选择的语言编写脚本，循环使用[Google 的 QR 码生成器](https://developers.google.com/chart/infographics/docs/qr_codes)来生成您需要的所有代码并将它们保存为 pdf。如果您需要更具体的答案，则需要提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:25:15.520

前段时间我使用 Python、[qrencode](http://fukuchi.org/works/qrencode/manual/index.html)和 LaTeX 做过类似的事情。我已经修改了旧代码以满足您的需求。我假设你想要 A4 页面。二维码的内容是 PMY00001 到 PMY22000 ASCII 字符串。

```
#!/usr/bin/env python
import random, base64, string, os, sys

width=7.7
height=7

print "\\documentclass[a4paper,10pt]{report}"
print "\\usepackage[absolute]{textpos}"
print "\\usepackage{nopageno}"
print "\\usepackage{graphicx}"
print "\\setlength{\\TPHorizModule}{1mm}"
print "\\setlength{\\TPVertModule}{1mm}"
print "\\textblockorigin{10mm}{10mm}"
print "\\setlength{\\parskip}{0pt}"
print "\\setlength{\\parindent}{0pt}"
print "\\setlength{\\fboxsep}{0pt}"
print "\\setlength{\\tabcolsep}{0pt}"
print "\\renewcommand{\\baselinestretch}{0.8}"
print ""
print "\\begin{document}"

idx=int(sys.argv[1])

for i in range(0,25):
    for j in range(0,40):
        b = 'PMY%05d' % idx
        f = os.path.join("codes", b + ".png")
        ff = os.popen("qrencode -lH -o " + f, "w")
        ff.write(b)
        ff.close()
        print "\\begin{textblock}{" + str(width) + "}(" + str(width * i) + "," + str(height * j) + ")"
        print "\\includegraphics[height="+str(height)+"mm]{" + f + "}"
        print "\\end{textblock}"
        idx=idx+1
print "\\end{document}" 
```

要使用它，把它写成eg `qrgen.py`，添加执行权限`chmod +x qrgen.py`，创建`codes`目录：`mkdir codes`并运行`./qrgen.py 0 >codes.tex`以生成`codes.tex`文档，然后`pdflatex codes.tex`生成`codes.pdf`文件。0 参数是起始序列号。

要获得 22 张这样的表格，最好使用循环：

```
for ((i=0;i<22;i++)); do ../qrgen.py $((i*1000+1)) >$i.tex; pdflatex $i.tex; done 
```

当然，这不是最佳解决方案——你可能会得到一个更快的解决方案，使用 Python qrencode 库绑定而不是启动外部`qrencode`程序和一些用于直接从 Python 生成 PDF 而不是使用`pdflatex`.

# scala - Scalaz 在错误和成功中都有积累吗？

> ID：11903968
> 
> 赞同：5
> 
> 时间：2012-08-10T14:39:39.187
> 
> 标签：scala, monads, fold, scalaz, applicative

我开始使用 Scalaz 7 验证和/或析取来处理可能失败的操作列表并管理它们的结果。

这种用例有两个有据可查的案例：

1/您想检查某事的条件列表，并累积每个错误（如果有）。在这里，您总是走到列表的末尾，如果出现任何错误，您将作为全局结果失败。这是一个在工作的应用函子。

2/ 你想执行几个可能失败的步骤，并在第一个失败时停止。在这里，我们有一个在 Scala 中很好理解的 monad。

所以，我还有两个相同的用例，但在任何先例情况下似乎都不太合适：我想处理一个可能失败的步骤列表，并累积错误和成功结果（例如：这是对文件的修改列表，可能会发生错误，因为那是外部世界，成功是我想保留以备后用的补丁）。

这两个用例的区别仅在于我想提前停止（在第一个错误上）或转到列表的末尾。

好的，那么正确的做法是什么？

（写这个问题让我认为这只是一个简单的 foldLeft，是吗？我会让这个问题在这里验证，如果有人想知道）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:54:56.237

看看`Validation#append`它的别名`Validation#+|+`。给定两个验证，如果两者都成功，则返回附加值的成功。如果两者都失败，则返回附加值的失败。否则，它返回成功的值。这需要成功类型的隐式 Semigroup 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T16:36:55.510

我会做这样的事情：

```
scala> List(1.success[String], 2.success[String], "3".failure[Int], "4".failure[Int]).partition(_.isSuccess)
res2: (List[scalaz.Validation[java.lang.String,Int]], List[scalaz.Validation[java.lang.String,Int]]) = (List(Success(1), Success(2)),List(Failure(3), Failure(4)))

scala> val fun = (_:List[Validation[String, Int]]).reduceLeft(_ append _)
fun: List[scalaz.Validation[String,Int]] => scalaz.Validation[String,Int] = <function1>

scala> fun <-: res2 :-> fun
res3: (scalaz.Validation[String,Int], scalaz.Validation[String,Int]) = (Success(3),Failure(34)) 
```

**UPD：**[#129](https://github.com/scalaz/scalaz/pull/129)和[#130](https://github.com/scalaz/scalaz/pull/130)合并后，您可以更改`fun`为`(_:List[Validation[String, Int]]).concatenate`或`(_:List[Validation[String, Int]]).suml`

或者`bimap`像这样：

```
scala> List(1.success[String], 2.success[String], "3".failure[Int], "4".failure[Int]).partition(_.isSuccess).bimap(_.suml, _.suml)
res6: (scalaz.Validation[java.lang.String,Int], scalaz.Validation[java.lang.String,Int]) = (Success(3),Failure(34)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:00:09.160

您需要的是大约将`Either[E, A]`a 转换为`Writer[List[E], A]`. `Writer`monad 记录您遇到的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:00:46.437

听起来您想要一对“失败”`(SomveValue, List[T])`在哪里，`T`尽管我将其称为“警告”或“日志”，因为您仍然会得到结果，因此它并不是真正的失败。

不知道 Scalaz 是否对此有任何幻想。

# asp.net-mvc-3 - LINQ 查询中的对象问题

> ID：11903973
> 
> 赞同：0
> 
> 时间：2012-08-10T14:39:48.357
> 
> 标签：asp.net-mvc-3, linq

我从以下左外连接 LINQ 查询中得到一个对象引用问题：

```
result.Data = from c in resourceActions.Actions
                      join o in roleResourceActions.Actions on c.ActionID equals o.ActionID into g
                      from a in g.DefaultIfEmpty()
                 select new
                 {
                     ActionID=c.ActionID,
                     ActionName=c.ActionName
                     ,IsSelected = a.ActionName==null?false:true
                 }; 
```

当我跟踪上述 LINQ 查询时，似乎对象“a”本身为空。但仅基于此对象，我可以获得“IsSelected”的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:50:07.043

如果您希望`a`在某些查询中为 null，则可以在 read 之前对其进行测试`ActionName`：

```
result.Data = from c in resourceActions.Actions
                  join o in roleResourceActions.Actions on c.ActionID equals o.ActionID into g
              from a in g.DefaultIfEmpty()
              select new
              {
                  ActionID=c.ActionID,
                  ActionName=c.ActionName,
                  IsSelected = a != null && a.ActionName != null
              }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:48:27.083

```
result.Data = from c in resourceActions.Actions
                      join o in roleResourceActions.Actions on c.ActionID equals o.ActionID into g
                      from a in g.DefaultIfEmpty()
                 select new
                 {
                     ActionID=c.ActionID,
                     ActionName=c.ActionName
                     ,IsSelected = a != null && a.ActionName==null ? false : true
                 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:54:15.627

您正在调用[`DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb360179.aspx)，它将返回[`default`](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)您调用它的查询类型的值。

由于您的查询类型是引用类型，因此[`DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb360179.aspx)返回`null`.

因此，解决方案取决于您是否希望查询返回元素（如果您的`join`产量元素）。

如果没有，只需将其删除：

```
result.Data = from c in resourceActions.Actions
              join o in roleResourceActions.Actions on c.ActionID equals o.ActionID into g
              from a in g
              select new
              {
                 ActionID=c.ActionID,
                 ActionName=c.ActionName,
                 IsSelected = a.ActionName==null?false:true
              }; 
```

# ms-access - 提高子表单的速度

> ID：11903974
> 
> 赞同：2
> 
> 时间：2012-08-10T14:39:57.303
> 
> 标签：ms-access

我的表格随着时间的推移变得越来越慢。起初在记录之间导航根本不需要时间。过了一会儿，它花了一秒钟。然后过了一会儿，切换记录花了两秒钟。现在我在切换记录时只有三秒钟。

***以下是详细信息：***

用户会收到一个表单提示，该表单有一些选项可供选择。基于这些选项，主窗体弹出仅显示相关记录。主表单链接到由用户选择生成的查询。在主窗体上是直接链接到另一个表 (QuoteRunResults) 的子窗体。该表现在包含 354,000 条记录。 ***慢的形式是子形式***。

这是一个可以使用的示例查询：

```
SELECT * 
FROM QUOTERun
WHERE QuoteNumber = {UserSelectedQN}
ORDER BY RunID DESC 
```

无论如何我可以加快子表格的速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:14:48.240

我以前经历过这种情况。我为完全消除滞后所做的工作如下：

*   使用查询生成两种表单所需的两个数据集。
*   以编程方式为每个数据集创建一个临时表并根据查询结果填充它
*   将表单链接到临时表
*   允许用户对数据做任何他们需要做的事情
*   表单关闭后，以编程方式更新临时表中的真实数据
*   删除临时表

这实际上使表格飞了起来。我没有更多的滞后问题。当我单击按钮移动到下一条记录时，它立即发生了。在我的情况下，我在 On Current 事件中发生了很多事情，这减慢了表单的速度。一旦我应用了上述方法，它就会加速。

# mysql - 计算部分值或条件值

> ID：11903977
> 
> 赞同：0
> 
> 时间：2012-08-10T14:40:10.593
> 
> 标签：mysql, count, subquery, distinct

我希望有人可以在这里提供帮助和一些建议。我试图获得一个相当复杂的结果，但不确定我是否可以将其作为一个带有子查询、联合的查询，或者只是将单独的查询在事后合并到 excel 中。

我正在使用来自我的前任的遗留数据库，其中包含下表： 业务（使用的列：id、sector、state） 表单（使用的列：提交（Y/N）、id、business_id） 库存（使用的列: In_stock (Y/N), id, form_id)

我试图得到一个看起来像这样的最终结果：

```
| SubmittedForms | Unsubmitted Forms | Sector | State |
|-----------------------------------------------------|
|       10       |         5         |  Agr   |  UT   |
|       0        |         7         |  Chem  |  MT   |
|       2        |         1         |  Bio   |  OK   |
|       13       |         0         |  Chem  |  NM   | 
```

我遇到的主要问题是，虽然提交的表单不需要任何进一步的参数并且是一个简单的计数，但未提交的表单取决于 Inventory.in_stock='Y'。这是我对提交表单的查询：

```
SELECT COUNT(Forms.id) AS Submitted, Business.sector, Business.state
FROM Forms
JOIN Business ON Forms.business_id=Business.id
WHERE Forms.submitted='Y'
GROUP BY Business.state, Business.sector 
```

不幸的是，我似乎无法正确计算未提交的表格编号。它只返回该扇区的 in_stock 为 Y 的总行数。

如果对 Submitted 和 Unsubmitted 运行单独的查询更容易，这对最终结果来说很好，但我需要一些帮助来获得正确计数的未提交表单，其中 in_stock 标记为 Y。此外，我尝试使用 COUNT DISTINCT 但也采取了方式长，10分钟后还在运行。我可以在单个查询选项中设想的另一个复杂情况是提交或未提交形式中的 0/null 值的可能性

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:43:45.493

一种选择：

```
SELECT COUNT(CASE WHEN Forms.submitted = 'Y' THEN 1 END) SubmittedForms,
       COUNT
        ( CASE WHEN Forms.submitted = 'N'
                AND EXISTS ( SELECT 1
                               FROM Inventory
                              WHERE form_id = Forms.id
                                AND in_stock = 'Y'
                           )
               THEN 1
           END
        ) UnsubmittedForms,
       Business.sector Sector,
       Business.state State
  FROM Forms
 RIGHT
 OUTER
  JOIN Business 
    ON Forms.business_id = Business.id
 GROUP
    BY Business.sector,
       Business.state
; 
```

另一种可能表现更好的选择：

```
SELECT COUNT(CASE WHEN Forms.submitted = 'Y' THEN 1 END) SubmittedForms,
       COUNT(CASE WHEN Forms.submitted = 'N' THEN 1 END) UnsubmittedForms,
       Business.sector Sector,
       Business.state State
  FROM ( SELECT *
           FROM Forms
          WHERE submitted = 'Y'
             OR id IN ( SELECT DISTINCT form_id
                          FROM Inventory
                           AND in_stock = 'Y'
                      )
       ) Forms
 RIGHT
 OUTER
  JOIN Business 
    ON Forms.business_id = Business.id
 GROUP
    BY Business.sector,
       Business.state
; 
```

# java - 方法局部内部类不能使用方法中声明的变量

> ID：11903982
> 
> 赞同：1
> 
> 时间：2012-08-10T14:40:18.630
> 
> 标签：java, scjp

为什么方法局部内部类不能使用在封闭方法中声明的变量，除了那些标记为final的变量，我知道在封闭方法中声明的变量可能会消失，而内部类实例仍然有效，但是当这个变量/ s 被宣布为最终的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:56:14.173

原因是它在[Java 语言规范 #8.1.3中指定](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)

> 任何使用但未在内部类中声明的局部变量、形参或异常参数都必须声明为 final。

另请注意，旨在在 java 中引入闭包（以替换匿名类）的项目 lambda（java 8）引入了有效 final 的概念，这将允许您在 lambda 表达式中使用非 final 变量，只要您不这样做' t 在闭包内修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:45:28.570

原因是[实际上结论来自[Java最终局部变量存储在哪里？](https://stackoverflow.com/questions/1945663/where-are-java-final-local-variables-stored)] :`final variables are copied by the compiler into a hidden member variable of the inner class that references it. This way, they are guaranteed to not change after the copy has been made.`

也可能是：堆上的方法局部内部类和堆栈上的变量具有不同的范围。但是如果局部变量被final标记，它是存储在堆上的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:52:14.783

当变量为 final 时，将在内部类中放置一个副本。即它仍然无法访问该变量，但它有一个可以使用的副本。

如果您使用反射或调试器，您可以看到这些副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-29T19:28:32.173

现在首先我想阐明

> **最终局部变量是否存储在堆而不是堆栈上？**
> 
> **说明：**现在经过对 SO 的一些研究，我发现所有局部变量（**最终或非最终**变量）都存储到**堆栈**中，并且在方法执行结束时超出范围。
> 
> 但是关于 final 变量`JVM`将这些作为常量，因为它们在启动后不会改变。并且当内部类尝试访问它们时，编译器会将该变量（不是它自身的变量）的副本创建到**堆中** 并在内部类中创建一个**合成字段**，因此即使方法执行结束它也可以访问，因为内部类有它自己的副本。**合成领域**文件实际上在源代码中不存在，但编译器在一些内部类中创建这些字段以使这些字段可访问。在简单的单词隐藏字段中。
> 
> ***所以最终变量也存储在堆栈中，但是内部类存储在堆中的那个变量的副本。***

所以现在想一想。方法的局部变量存在于堆栈中，并且只在方法的生命周期内存在。我们已经知道，局部变量的作用域仅限于声明变量的方法。当方法结束时，栈帧被吹走，变量就是历史。但是即使在方法完成之后，在其中创建的内部类对象可能仍然在堆上存活，例如，如果对它的引用被传递到其他代码中，然后存储在实例变量中。因为只要方法局部内部类对象存在，局部变量就不能保证是存活的，所以内部类对象不能使用它们。除非局部变量被标记为final。将变量设为 final 是有益的，因为它可以像合成字段一样保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:45:09.810

Final 确保您不会丢失对该变量的引用。您不希望您的内部类破坏或丢失您的引用，因为您可能会在声明的上下文中继续使用它。

# php - 不允许 PHP chgrp 操作

> ID：11903985
> 
> 赞同：1
> 
> 时间：2012-08-10T14:40:30.010
> 
> 标签：php, apache, webserver

我有一些 PHP 代码需要使用`chgrp()`. 该代码在另一台服务器（php 5.2）上工作，但是当迁移到新服务器（php 5.3）时，它停止工作

> `chgrp()`: 不允许操作。

我已经仔细检查了用户帐户 apache 是否具有对该文件的写入权限（并且它是所有者只是为了加倍确定）。我还仔细检查了 PHP`safe_mode`是否已关闭。

还有其他提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T13:39:25.870

我猜你正在尝试将一个组分配给目标文件/目录，该`apache`组**不是**该组的成员，正如它在[chgrp](http://www.php.net/manual/en/function.chgrp.php)文档中提到的那样：

> 只有超级用户可以任意改变一个文件的组；其他用户可以将文件的组更改为该用户所属的任何组。

我不确定它背后的想法是什么，但它说您不应该将您的文件/目录分配给您不是其中成员的组；因此`apache`，用户无法将其任何文件/目录分配给您可能正在考虑的大多数组（默认配置）。

PS您可能能够`chmod`并`chown`使用您的用户拥有的相同权限`apache`，但同样，不允许将这些文件分配给您不是其中成员的另一个组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:57:05.070

所以这个问题刚刚停止发生。我真的开始添加一些调试语句，并在添加新语句时刷新日志，然后我注意到错误突然停止出现在日志中。我猜需要重新启动一些东西，这发生在我的调试之间。我不确定。但理论上安全模式关闭，文件存在，并且作为文件所有者/创建者的 apache 用户应该从一开始就工作。

# version-control - Mercurial hooks：如何在提交时找到当前目录

> ID：11903986
> 
> 赞同：2
> 
> 时间：2012-08-10T14:40:34.443
> 
> 标签：version-control, mercurial

我正在尝试使用 C# .NET 创建 Mercurial SCM (hg) 的挂钩，以在提交或预提交时启动自定义 C# 应用程序。

作为概念验证原型，我将自定义 .exe 的位置添加到 Mercurial.ini 文件的 [hooks] 部分以进行预提交，并将另一个 .exe 用于提交。这些 .exe 应用程序按预期在预提交和提交时打开。

但是，到目前为止，这些可执行文件只是存根。为了让他们做我需要的事情，他们必须“知道”提交即将发生（或已经发生）的当前目录。Mercurial.ini 位于我在 Windows 上的用户配置文件目录中。例如，当我从位于 C:\MyProjects\TestProject 的 Hg 存储库中进行提交时，可执行文件需要知道该工作正在 C:\MyProjects\TestProject 中完成。

如何在运行时以编程方式从在本地计算机上执行 Mercurial 命令的“挂钩”可执行文件中找出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:24:43.777

从[书中的钩子章节](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html#x_228)：

> 可执行挂钩始终在其当前目录设置为存储库的根目录的情况下运行。

因此，您的可执行文件只需检查其当前工作目录即可了解调用它的存储库的根目录。

# ruby-on-rails - 没有额外表的 belongs_to 关联

> ID：11903989
> 
> 赞同：1
> 
> 时间：2012-08-10T14:40:50.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个模型`Download`，有一张桌子`downloads`。`downloads`有一个名为 的字段`ip_address`，它将 IP 地址存储为整数。我想建立一个`IpAddress`模型，但没有 ip_addresses 表，所以我可以做类似的事情

```
Download.find(1).ip_address.to_s # '127.0.0.1'
Download.find(1).ip_address.to_i # 2130706433
Download.find(1).ip_address.downloads # SELECT * FROM downloads WHERE ip_address='2130706433'
IpAddress.find(2130706433).downloads # SELECT * FROM downloads WHERE ip_address='2130706433' 
```

我希望它表现得像：

```
class Download < ActiveRecord::Base
  belongs_to :ip_address, :foreign_key => :ip_address
end

class IpAddress < ActiveRecord::Base
  set_primary_key :ip_address
  has_many :downloads, :foreign_key => :ip_address
end 
```

但没有无用的 IP 地址表。

**这可能吗？**

**编辑**

我发现 ruby​​ 已经有一个[IPAddr 类](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ipaddr/rdoc/IPAddr.html)。

所以我这样做了：

```
require 'ipaddr'

class Download < ActiveRecord::Base
  attr_accessible :ip, ...

  def ip
    @ip ||= IPAddr.new(read_attribute(:ip), Socket::AF_INET)
  end

  def ip=(addr)
    @ip = IPAddr.new(addr, Socket::AF_INET)
    write_attribute(:ip, @ip.to_i)
  end

  def self.for_ip(addr)
    where(:ip => IPAddr.new(addr, Socket::AF_INET).to_i)
  end

end 
```

然后我可以做很多很酷的事情

```
Download.new(:ip => '127.0.0.1').save
Download.for_ip('127.0.0.1').first.ip.to_i # 2130706433 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:50:39.447

`belongs_to`实际上是为了指定两个表中的对象之间的关联。但你是对的，除非你需要存储其他相关数据，否则将 IP 地址存储在表中是相当无用的。

但是，您可以使用[范围](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)来完成您想要的。你可以在你的下载模型中有这样的东西：

```
class Download < ActiveRecord::Base
  scope :for_ip, lambda { |x| where(:ip_address => x) }
end 
```

然后你会打电话

```
Download.for_ip(2130706433) 
```

获取该 IP 的下载列表。

您也可以添加一个类方法：

```
class Download < ActiveRecord::Base
  def self.for_ip(x)
    where(:ip_address => x)  
  end  
end 
```

如果您想从字符串转换为数字 IP 地址，这可能会很方便。

而且，如果你想要一个 IPAddress 类，你可以添加这样的方法：

```
class IPAddress
  def initialize(ip)
    #presumably do some stuff here
    @ip = ip
  end

  def downloads
    Download.for_ip(@ip)
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:52:28.750

```
IpAddress.find(2130706433).downloads # SELECT * FROM downloads WHERE ip_address='2130706433' 
```

这完全是一个语义问题，但是如果您没有 IpAddress 表，这可能会改变（即，如果没有 IpAddress 表，我们如何在数据库中找到 IpAddress 对象 2130706433 - 除非您将 IpAddress 设为容器而不是特定的单个 ipaddress , 否则做一些事情，比如用像`IpAddress(2130706433).downloads`) 这样的构造函数来实例化新的。

但是，否则，我认为没有 IpAddress 表没有任何问题。为什么需要它`belongs_to`，而不仅仅是另一列？

如果您希望以类似方式访问它们，您可以保留模型/对象：

```
class Download < ActiveRecord::Base
  ##Whatever Download-model-specific code you have...
  def ip_address
    #If nil, initialize new object. Return object.
    @ip_address ||= IpAddress(ip_address_val)
  end
end

class IpAddress
  def initialize(address)
    @value = address
  end
  def downloads
    Download.where(:ip_address_val => self.value)
  end
end 
```

**编辑：** 你可以覆盖访问器，就像你问的那样。您只需要在代码中小心谨慎，以特别注意您所要求的内容。请参阅此文档：[http](http://ar.rubyonrails.org/classes/ActiveRecord/Base.html) ://ar.rubyonrails.org/classes/ActiveRecord/Base.html 在“覆盖默认访问器”部分下

基本上，如果您确实覆盖了该值，并且如果您希望访问 DB 值，则使用`read_attribute(attr_name)`，因此代码可能如下所示：

```
class Download < ActiveRecord::Base
  ##Whatever Download-model-specific code you have...
  def ip_address
    #If nil, initialize new object. Return object.
    @ip_address ||= IpAddress(read_attribute(:ip_address))
  end
end

class IpAddress
  def initialize(address)
    @value = address
  end
  def downloads
    Download.where(:ip_address => self.value)
  end
end 
```

虽然如果你不小心的话，你的代码可能会有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:49:48.457

将 set_table_name "downloads" 添加到您的 IpAddress 并删除 2 之间的关系，因为它已经具有列名 ip_address。

这将通过以下方式为您提供查询

```
Download.find(1).ip_address.to_s # '127.0.0.1'
Download.find(1).ip_address.to_i # 2130706433
IpAddress.find(Download.find(1).ip_address) # SELECT * FROM downloads WHERE ip_address='2130706433'
IpAddress.find(2130706433) # SELECT * FROM downloads WHERE ip_address='2130706433' 
```

# html - 下拉菜单未显示和导航未居中

> ID：11903993
> 
> 赞同：1
> 
> 时间：2012-08-10T14:40:58.313
> 
> 标签：html, css, layout

示例： http: [//www.studentbridges.org/new/](http://www.studentbridges.org/new/)

我试图让我的导航栏跨越网页顶部，并且我让导航的 div 跨越网页，但是当我将导航菜单放在 div 内时，下拉菜单停止工作并且链接不是无论我做什么都居中（文本对齐：CSS 中的居中和标题中的标签不起作用）。

这是我的代码：

导航

```
.access {
clear: both;
display: block;
float: left;
margin: 0 auto 6px;
width: 100%;
}
.access ul {
font-size: 16px;
list-style: none;
margin: 0 0 0 -0.8125em;
padding-left: 0;
}
.access li {
float: left;
position: relative;
}
.access a {
color: #eee;
display: block;
line-height: 3.333em;
padding: 0 1.2125em;
text-decoration: none;
}
.access ul ul {
display: none;
float: left;
margin: 0;
position: absolute;
top: 3.333em;
left: 0;
width: 188px;
z-index: 99999;
}
.access ul ul ul {
left: 100%;
top: 0;
}
.access ul ul a {
background: #EAC57E;
border-bottom: 1px dotted #ddd;
color: #F7E7C6;
font-size: 14px;
font-weight: normal;
height: auto;
line-height: 1.4em;
padding: 10px 10px;
width: 168px;
}
.access li:hover > a,
.access ul ul :hover > a,
.access a:focus {
background: #DBAA4A;
}
.access li:hover > a,
.access a:focus {
background: #DBAA4A; /* Show a solid color for older browsers */;
color: #F7E7C6;
}
.access ul li:hover > ul {
    display: block;
}
.access .current-menu-item > a,
.access .current-menu-ancestor > a,
.access .current_page_item > a,
.access .current_page_ancestor > a {
font-weight: bold;
} 
```

顶部导航 DIV：

```
div#topnav

{
margin: 0px;

overflow: hidden;

width: 100%;

height: 50px;

background: #8D1D1D;

} 
```

任何有关问题可能是什么的意见将不胜感激！

的HTML：

```
<div id="topnav"><center><div class="access"><ul id="menu-home" class="access"><li id="menu-item-43" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-43"><a href="http://www.studentbridges.org/new/">Home</a></li>
<li id="menu-item-45" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-45"><a href="http://www.studentbridges.org/new/sample-page/">About Us</a>
<ul class="sub-menu">
<li id="menu-item-50" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50"><a href="http://www.studentbridges.org/new/sample-page/history/">History</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-51"><a href="http://www.studentbridges.org/new/sample-page/resources/">Resources</a></li>
<li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"><a href="http://www.studentbridges.org/new/sample-page/testimonials/">Testimonials</a></li>
<li id="menu-item-47" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-47"><a href="http://www.studentbridges.org/new/sample-page/community-partnerships/">Community Partnerships</a></li>
<li id="menu-item-49" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-49"><a href="http://www.studentbridges.org/new/sample-page/donors-supporters/">Donors &#038; Supporters</a></li>
<li id="menu-item-48" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-48"><a href="http://www.studentbridges.org/new/sample-page/contribute/">Contribute</a></li>
<li id="menu-item-46" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-46"><a href="http://www.studentbridges.org/new/sample-page/advisory-boards/">Advisory Boards</a></li>
</ul>
</li>
<li id="menu-item-56" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-56"><a href="http://www.studentbridges.org/new/for-umass-students/">For UMass Students</a>
 <ul class="sub-menu">
<li id="menu-item-57" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-57"><a href="http://www.studentbridges.org/new/for-umass-students/sb-service-learning-293/">SB Service Learning 293</a></li>
<li id="menu-item-59" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-59"><a href="http://www.studentbridges.org/new/for-umass-students/volunteer-oppertunities/">Volunteer Oppertunities</a></li>
<li id="menu-item-58" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58"><a href="http://www.studentbridges.org/new/for-umass-students/staff-openings/">Staff Openings</a></li>
</ul>
</li>
<li id="menu-item-53" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-53"><a href="http://www.studentbridges.org/new/access-materials/">Access Materials</a></li>
 <li id="menu-item-54" class="menu-item menu-item-type-post_type menu-item-object-page  menu-item-54"><a href="http://www.studentbridges.org/new/advocacy/">Advocacy</a></li>
<li id="menu-item-55" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-55"><a href="http://www.studentbridges.org/new/for-community-members/">For Community Members</a></li>
<li id="menu-item-60" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-60"><a href="http://www.studentbridges.org/new/our-staff/">Our Staff</a></li>
<li id="menu-item-61" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-61"><a href="http://www.studentbridges.org/new/photos/">Photos</a></li>
<li id="menu-item-62" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-62"><a href="http://www.studentbridges.org/new/blog/">Blog</a></li>
</ul></div></center></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:39:13.683

干得好：

[http://jsfiddle.net/UjEd5/](http://jsfiddle.net/UjEd5/)

实际的导航选项本身是不同的，但 CSS 使用您正在使用的相同 ID/类结构。

你会注意到我改变了

```
<div class="access"> 
```

到

```
<div class="topmenu"> 
```

如果您为“topmenu”DIV 和“access”UL 分配相同的宽度，它将使导航栏居中。

希望这可以帮助！

# extjs - 解决 Ext.grid.Panel 单元格中的脏标志

> ID：11903996
> 
> 赞同：5
> 
> 时间：2012-08-10T14:41:05.110
> 
> 标签：extjs, grid, save

在 Ext JS 网格中，我正在编辑单个单元格。在其中一列中，我有一个触发 Save 事件的 Save 按钮。如何删除已编辑单元格中的脏标志（在下图中的红色框中）？我不知道如何使用代理执行创建、更新和销毁选项，因为文档中有一个很好的示例，所以我计划对这些步骤进行 AJAX 请求，直到我可以进行实际的 Sencha 培训。但是，如果我直接使用存储和代理，脏标志会自行解决，我宁愿以正确的方式进行操作。

![在此处输入图像描述](../Images/637df06d108f40918fba41a3faf1970f.png)

**JavaScript 代码：**

```
 }, {
                header: 'Save',
                xtype: 'actioncolumn',
                align: 'center',
                width: 50,
                sortable: false,
                items: [{
                    icon: './Scripts/extjs/examples/shared/icons/fam/add.gif',
                    tooltip: 'Save Row',
                    handler: function (grid, rowIndex, colIndex) {
                        store.sync();                            
                        alert('saving');
                    }
                }]
            }, {
                header: 'Delete',
                xtype: 'actioncolumn',
                align: 'center',
                width: 50,
                sortable: false,
                items: [{
                    icon: './Scripts/extjs/examples/shared/icons/fam/delete.gif',
                    tooltip: 'Delete Task',
                    handler: function (grid, rowIndex, colIndex) {
                        store.removeAt(rowIndex);
                        store.sync();
                        alert('deleting');
                    }
                }]
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T16:56:29.650

试试这个：

```
// you can keep the way you are creating your Grid
Ext.create('Ext.grid.Panel', {
    // other options
    // these configs are sent to Ext.view.Table through Ext.grid.View
    viewConfig: {
        markDirty: false
    }
}); 
```

我没有测试它，但我认为这就是你需要的。看一看：

*   [http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.grid.View](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.grid.View)
*   [http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.view.Table](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.view.Table)
*   [http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.view.Table-cfg-markDirty](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.view.Table-cfg-markDirty)

阅读 Ext.view.Table 类的描述，你就会明白正在做什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T16:43:49.430

Grid 反映了底层 Store 的状态，它是基于你的数据模型的记录集合。因此，在弄清楚 Ajax 代理之前，作为一种捷径，您可以这样做：

```
// Save handler
handler: function(grid, rowIndex, colIndex) {
    store.sync(); // Doesn't work now

    store.getAt(rowIndex).commit(); // Commit changes, clearing dirty flag

    alert('Record should now be clear');
} 
```