# StackOverflow 问答 12440000-12440999

# android - 无法在 WebView 上从 vimeo 流式传输视频

> ID：12440002
> 
> 赞同：2
> 
> 时间：2012-09-15T18:32:43.470
> 
> 标签：android, video-streaming, android-webview

我正在开发一个应用程序，它需要在 vimeo 网站上上传的视频流。当我从我的一项活动中启动 webview 时，vimeo 站点成功加载到 webview 上，但问题从这里开始。当我单击播放图标时，它不会进一步移动。加载的 vimeo 视频页面不播放视频。

我试图检查这是否是Android本身的问题，但证明是错误的。如果我单独将 URL 复制到 Android 浏览器并播放，它会成功播放。这就是我毫无头绪的地方，无论我是否缺少配置的 WebView 中的任何内容。

我的代码在这里：

```
private void getWebPage(final String webpage, final String param2, String param3) {
    // TODO Auto-generated method stub

    final FrameLayout.LayoutParams ZOOM_PARAMS =
            new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            Gravity.BOTTOM);
            final Activity activity = this;
            getWindow().setFeatureInt(Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON);
             mWebView = (WebView) findViewById(R.id.webview);

            mWebView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {

             activity.setTitle(" Loading the content for... "+param2);  
             activity.setProgress(progress * 100);//Make the bar disappear after URL is loaded

          // Return the app name after finish loading
             if(progress == 100)
                // activity.setTitle(R.string.app_name);
                 activity.setTitle("You are now viewing "+param2);

           }
         });

         mWebView.setWebViewClient(new WebViewClient());
         mWebView.getSettings().setJavaScriptEnabled(true);
         mWebView.getSettings().setAppCacheEnabled(true);
         mWebView.getSettings().setDomStorageEnabled(true);
         mWebView.getSettings().setPluginState(WebSettings.PluginState.ON_DEMAND);
         mWebView.getSettings().setLoadWithOverviewMode(true);

      FrameLayout mContentView = (FrameLayout) getWindow().
      getDecorView().findViewById(android.R.id.content);

      mWebView.loadUrl(webpage);
    //Intent newIntent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse("http://vimeo.com/m/45057923"));
    /*Intent newIntent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse(webpage));
    startActivity(newIntent);*/

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T13:16:37.593

它适用于

```
mWebView.getSettings().setPluginsEnabled(true); 
```

# wcf - 我在哪里可以找到 wcf 生成的 wsdl 中的 xmlns 声明？

> ID：12440006
> 
> 赞同：3
> 
> 时间：2012-09-15T18:33:10.277
> 
> 标签：wcf, soap, wsdl, xml-namespaces

我尝试生成一个简单的 WCF 测试 SOAP 应用程序。一旦我在调试器中启动它，它就会打开一个浏览器到服务页面。该页面上有一个指向 wsdl ( `http://.../MyService?wsdl`) 的链接。当我导航到该页面时，我看到了这个：

```
<wsdl:definitions name="MyService" targetNamespace="http://mynamespace.com/">
  <wsdl:types>
    <xsd:schema targetNamespace="http://mynamespace.com/Imports">
      <xsd:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd0" namespace="http://mynamespace.com/"/>
      <xsd:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
      <xsd:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
      <xsd:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/My.Service"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="IMyService_testConnection_InputMessage">
    <wsdl:part name="parameters" element="tns:testConnection"/>
  </wsdl:message>
  <wsdl:message name="IMyService_testConnection_OutputMessage">
    <wsdl:part name="parameters" element="tns:testConnectionResponse"/>
  </wsdl:message>
  <wsdl:message name="IMyService_testAction_InputMessage">
    <wsdl:part name="parameters" element="tns:testAction"/>
  </wsdl:message>
  <wsdl:message name="IMyService_testAction_OutputMessage">
    <wsdl:part name="parameters" element="tns:testActionResponse"/>
  </wsdl:message>
  <wsdl:portType name="IMyService">
    <wsdl:operation name="testConnection">
      <wsdl:input wsaw:Action="http://mynamespace.com/IMyService/testConnection" message="tns:IMyService_testConnection_InputMessage"/>
      <wsdl:output wsaw:Action="http://mynamespace.com/IMyService/testConnectionResponse" message="tns:IMyService_testConnection_OutputMessage"/>
    </wsdl:operation>
    <wsdl:operation name="testAction">
      <wsdl:input wsaw:Action="http://mynamespace.com/IMyService/testAction" message="tns:IMyService_testAction_InputMessage"/>
      <wsdl:output wsaw:Action="http://mynamespace.com/IMyService/testActionResponse" message="tns:IMyService_testAction_OutputMessage"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BasicHttpBinding_IMyService" type="tns:IMyService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="testConnection">
      <soap:operation soapAction="http://mynamespace.com/IMyService/testConnection" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="testAction">
      <soap:operation soapAction="http://mynamespace.com/IMyService/testAction" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="MyService">
    <wsdl:port name="BasicHttpBinding_IMyService" binding="tns:BasicHttpBinding_IMyService">
      <soap:address location="http://localhost:59315/MyService.svc"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

将所有前缀映射到其模式的 xmlns 定义在哪里？

更具体地说，我的`testAction`操作接受 2 个`DateTime`对象和一个`List<int>`. 当我深入研究链接的 xsd 时：

```
<xs:schema elementFormDefault="qualified" targetNamespace="http://rosscountgenerator.com/">
  <xs:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
  <xs:import schemaLocation="http://localhost:59315/MyService.svc?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/My.Service"/>
  <xs:element name="testConnection">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="value" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="testConnectionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="testConnectionResult" nillable="true" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="testAction">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="startDate" type="xs:dateTime"/>
        <xs:element minOccurs="0" name="endDate" type="xs:dateTime"/>
        <xs:element minOccurs="0" name="storeIds" nillable="true" type="q1:ArrayOfint"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="testActionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="testActionResult" nillable="true" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我看到`List<int>`我的 storeIds 的类型是`q1:ArrayOfint`. 但同样，没有映射。仔细看看，我可以假设`http://schemas.microsoft.com/2003/10/Serialization/Arrays`架构实际上是正确的架构，当我查看那个 xsd 时：

```
<xs:schema elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
  <xs:complexType name="ArrayOfint">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="int" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfint" nillable="true" type="tns:ArrayOfint"/>
</xs:schema> 
```

看来它是正确的地方。但是当我尝试触发请求时：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:msarray="http://schemas.microsoft.com/2003/10/Serialization/Arrays" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:my="http://mynamespace.com/" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <my:testAction>
      <my:startDate xsi:type="xsd:dateTime">2012-09-01T00:00:00</my:startDate>
      <my:endDate xsi:type="xsd:dateTime">2012-09-15T00:00:00</my:endDate>
      <msarray:storeIds xmlns:msarray="http://schemas.microsoft.com/2003/10/Serialization/Arrays" 
           soapenc:arrayType="xsd:int[2]" 
           xsi:type="msarray:ArrayOfint">
        <int xsi:type="xsd:int">1</int>
        <int xsi:type="xsd:int">2</int>
      </msarray:storeIds>
    </my:testAction>
  </soap:Body>
</soap:Envelope> 
```

两个日期都很好，但 storeIds ( `List<int>`) 为空。

是否有另一个文件包含所有`xmlns`映射并且只包含所有这些？如果是这样，我在哪里可以找到它？另外，如果您知道为什么我的 List 实际上被反序列化为 null，我将不胜感激。

**- - - - - - - - - - 更新 - - - - - - - - - - - -**

对于我的具体问题，数组本身需要使用命名空间，`my`并且数组的元素需要使用`msarray`前缀命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:msarray="http://schemas.microsoft.com/2003/10/Serialization/Arrays" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:my="http://mynamespace.com/" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <my:testAction>
      <my:startDate xsi:type="xsd:dateTime">2012-09-01T00:00:00</my:startDate>
      <my:endDate xsi:type="xsd:dateTime">2012-09-15T00:00:00</my:endDate>
      <my:storeIds xmlns:msarray="http://schemas.microsoft.com/2003/10/Serialization/Arrays" 
           soapenc:arrayType="xsd:int[2]" 
           xsi:type="msarray:ArrayOfint">
        <msarray:int xsi:type="xsd:int">1</int>
        <msarray:int xsi:type="xsd:int">2</int>
      </my:storeIds>
    </my:testAction>
  </soap:Body>
</soap:Envelope> 
```

现在它有效，但我的一般问题仍然存在。xmlns 声明在哪里？顺便说一句，再次感谢[soapUI](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://www.soapui.org/&ei=c9BUUPGyEIno0QHApYHwAQ&usg=AFQjCNE0DhyxZHa40M-2y2xo7zFzQJHB0A)，它是解析 wsdl 不可或缺的工具。

# ldap - 如何确定 LDAP 搜索结果是个人还是组

> ID：12440007
> 
> 赞同：1
> 
> 时间：2012-09-15T18:33:31.773
> 
> 标签：ldap

我正在查询组中所有成员的 AD。

结果，我得到了用户和组。我的问题：我怎样才能知道，单一的结果是什么（个人或团体）？

这是我的代码，我得到一个 Resultpropertycollection，当我遍历集合时，我想知道每个项目是一个人还是一个组。

```
ds.PropertiesToLoad.Add("member")

For Each sr As SearchResult In ds.FindAll
  Dim valueCollection As ResultPropertyValueCollection = sr.Properties("member")
  Dim propertyValue As Object

  For Each propertyValue In valueCollection
    Console.WriteLine("{0}", propertyValue.ToString())
  Next propertyValue
Next 
```

问候亚武兹

更新：

这是完整的代码：

```
Private Sub EnumPropertyAndMembersOfGroup(ByVal name As String, ByVal propertyname As String)
    Try
        Dim de As DirectoryEntry = New DirectoryEntry("LDAP://lab.com")
        Dim ds As DirectorySearcher = New DirectorySearcher

        ds.Filter = "(&(objectCategory=group)(cn=" & name & "))"
        ds.PropertiesToLoad.Add("sAMAccountName")
        ds.PropertiesToLoad.Add("memberOf")
        ds.PropertiesToLoad.Add("member")

        For Each sr As SearchResult In ds.FindAll
            Console.WriteLine("Search properties for {0}", sr.Path)
            Console.WriteLine()

            Dim valueCollection As ResultPropertyValueCollection = sr.Properties(propertyname)
            Dim propertyValue As Object

            For Each propertyValue In valueCollection
                Console.WriteLine("{0}", propertyValue.ToString())
            Next propertyValue
        Next
        Console.ReadKey()
    Catch ex As Exception
        Console.WriteLine("ERROR: " & ex.Message)
        Console.ReadKey()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:59:28.723

好的，这是解决方案：

必须使用返回对象的 DN 进行新查询并检查对象类：

[如何确定帐户的类型（AD 用户与 AD 组）？](https://stackoverflow.com/questions/1845170/how-to-determine-the-type-ad-user-vs-ad-group-of-an-account)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:15:05.413

您应该能够通过查询 objectClass 属性或找到的条目 DN 来区分人员或组。

如这里所示

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475(v=vs.85).aspx)

users 在其 objectClass 属性值中有“user”。

[如何编写 LDAP 查询来测试用户是否是组的成员？](https://stackoverflow.com/questions/1032351/how-to-write-ldap-query-to-test-if-user-is-member-of-a-group?rq=1)

# c# - 属性、索引器或动态成员访问不能作为 out 或 ref 参数传递？

> ID：12440013
> 
> 赞同：1
> 
> 时间：2012-09-15T18:35:01.943
> 
> 标签：c#, properties, member, indexer, grasshopper

在下面的代码中，我得到了错误

> 属性、索引器或动态成员访问不能作为 out 或 ref 参数传递？

`m_settings.Length`编译时的论点。我怎么能解决这个问题？

```
 public override bool Read(GH_IO.Serialization.GH_IReader reader)
                {
                    if (m_settings != null && m_settings.Length > 0)
                    {
                        reader.TryGetInt32("StringCount", ref m_settings.Length);
                        for (int i = 0; i < m_settings.Length; i++)
                        {
                            reader.TryGetString("String", i, ref m_settings[i]);
                        }
                    }
                    return base.Read(reader);
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T18:40:46.347

> 我怎么能解决这个问题？

不这样做 :) 无论如何，您希望它如何工作？假设`m_settings`是一个数组，一个数组无论如何都不能改变长度......

如果你*真的*需要`ref`行为，你需要一个局部变量：

```
int length = m_settings.Length;
reader.TryGetInt32("StringCount", ref length);

// Presumably you want to use length here...
// Perhaps m_settings = new string[length];  ? 
```

坦率地说，这有点奇怪：

*   `TryGetInt32`与普通模式不同，使用`ref`参数而不是参数`out``TryXXX`
*   您忽略了 的返回值`TryGetInt32`，我希望它是成功/失败值。为什么要默默地忽略失败？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:40:25.450

使用临时局部变量：

```
int temp = 0;
if (reader.TryGetInt32("StringCount", ref temp)) {
    m_settings.Length = temp;
} 
```

当然，这仍然留下一些问题：

*   你不检查返回值`TryGetInt32`——如果转换失败怎么办？
*   真的可以`m.settings.Length`写吗？

# ruby-on-rails - 更新包含对象的 ruby 数组

> ID：12440014
> 
> 赞同：3
> 
> 时间：2012-09-15T18:35:09.853
> 
> 标签：ruby-on-rails, ruby

如果我在 ruby​​ 中有一个对象数组，我如何遍历数组并更新对象？

示例： `test_arr`具有以下值：（由 find_by_sql 获取）

```
test_arr = [
  {"id"=>1024, "value"=>"9999"},
  {"id"=>1025, "value"=>"9999"} 
] 
```

```
test_arr.map{|r| r.value="1111"} 
```

返回 ["1111", "1111"]

我需要类似的东西：（更新后）

```
[{"id"=>1024, "value"=>"1111"}>,
{"id"=>1025, "value"=>"1111"}>] 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T18:38:43.440

您必须使用`each`, 因为`map`它返回一个更改的数组。`each`正在迭代数组。

```
test_arr.each{|r| r.value="1111"} 
```

和

```
test_arr.map{|r| r.value="1111"} 
```

您返回一个更改后的数组，内容是块的结果（在示例中为“1111”）。随着`map!`数组被修改。

您还可以使用：

```
test_arr.map{|r| 
  r.value="1111"   # modify r
  r                # return r - you are replacing r with r
} 
```

但正如已经提到的：`each`会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T18:43:16.270

如果您想立即保存它，请尝试以下操作：

```
test_arr.map{ |r| r.update_attributes( { :value => "1111" } ) } 
```

如果您需要比这更高的性能，您可以尝试 update_all，并将对象数组中的 ID 传递给它。[http://apidock.com/rails/ActiveRecord/Relation/update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T18:53:41.210

实际上，您的代码应该成功更新属性。但我认为你混淆了`map`和`each`方法。

该`map`方法遍历整个数组并从每次迭代中收集结果，这就是为什么它的第二个别名是`collect`.

您需要的是`each`方法，这个方法只会遍历数组并执行块中描述的操作。

因此，您的代码应如下所示：

```
test_arr.each { |r| r.value="1111" }
test_arr.inspect 
#=> [#<SimpleClass:0xb74c8968 @attributes={"id"=>1024, "value"=>"1111"}>, #<SimpleClass:0xb74c8940 @attributes={"id"=>1025, "value"=>"1111"}>] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T18:38:01.007

map 遍历数组并为您提供一个包含块结果的新数组。

```
test_arr = test_arr.map { |val|
   val.attr - new_value
   val # last line of the block is the return value
} 
```

用于[`map!`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map-21)就地更新数组。

# python - python中的类型模仿

> ID：12440015
> 
> 赞同：3
> 
> 时间：2012-09-15T18:35:23.117
> 
> 标签：python, haskell

在 Python 中模仿类型的最佳方法是什么？

这个`TestResult`Haskell 数据类型如何在 Python 中定义？

```
data TestResult
  = TestResult {name :: String,
                feature :: String,
                passed :: Bool,
                errorMessage :: String} 
```

我试过了，但它看起来有点傻。还有其他方法可以处理这种行为吗？

```
class TestResult:
    def __init__(self, name, feature, passed, errorMessage):
        self.name         = name
        self.feature      = feature
        self.passed       = passed
        self.errorMessage = errorMessage 
```

我不是在寻找一些类型多余的东西，而是寻找像“类型构造函数”这样的魔法组合来将一些数据存根组合成一个逻辑上的单一事物。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:38:19.723

对于不可变数据，您可以使用`collections.namedtuple`：

```
>>> from collections import namedtuple
>>> TestResult = namedtuple("TestResult", "name feature passed errorMessage")
>>> TestResult("a", "b", True, "c")
TestResult(name='a', feature='b', passed=True, errorMessage='c') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:39:31.577

你的代码对我来说看起来不错。如果您想要一个不太冗长的版本，您可以查看[NamedTuple 。](http://docs.python.org/dev/library/collections.html#collections.namedtuple)

# java - 生成属于两个不同范围的 rand 值

> ID：12440028
> 
> 赞同：1
> 
> 时间：2012-09-15T18:36:41.990
> 
> 标签：java, random

我需要使用`Random`对象生成随机值。它生成从 0 到 1 的值，但我想生成落入范围`[0,10e-7]`和`[10e-7,1]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T18:46:19.990

```
double max, min; 
if (Math.random() > .5) { // adjust ratio of ranges here
    min = 0;
    max = .00000001;
} else {
    min = .00000001;
    max = 1;
}
double random = Math.random() * (max - min) + min; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:45:25.350

您可以使用该类的`nextDouble()`方法`Random`来获取 0 到 10e-7 之间的数字。

然后，在第一种情况下，将数字除以 10e7 以获得 [0, 10e-7] 范围内的值，如果生成的值低于第二种情况的该值，则将 10e-7 添加到生成的值中。

# php - Facebook 应用程序 - 如何隐藏 URL 参数？

> ID：12440030
> 
> 赞同：0
> 
> 时间：2012-09-15T18:37:03.207
> 
> 标签：php, javascript, facebook, url, facebook-graph-api

我正在开发一个小的 Facebook 应用程序，让我有点不安的是，所有信息都可以在 URL 中看到（如文件名、GET 参数）。

有什么办法，我怎么能隐藏它们？也许使用 Javascript/AJAX 或者是否有任何其他/更好的功能来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:52:00.620

您可以在 php 代码中使用 php **file_get_contents**函数

例如并将其保存到变量中：示例：

```
$myinfo =file_get_contents(...myfacebookurljson..) 
```

所以其他人将无法看到该 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:46:43.157

没有办法向真正想看到它们的人隐藏它们。

使用一些可用的调试工具，可以准确地观察所有网络流量。

您可以使用*(https://)将它们**从 3rd 方观察者*中隐藏，但您不能从本地计算机中隐藏它。`SSL`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:51:21.273

您总是可以创建一些重写规则。这样原始文件名是不可见的。*

# windows - Git，切换分支时出现错误：“删除目录” ' 失败的。我应该再试一次吗？” 在我设置自定义文件夹图标后开始

> ID：12440033
> 
> 赞同：3
> 
> 时间：2012-09-15T18:37:44.503
> 
> 标签：windows, git, msysgit, git-bash

我在 windows (v1.7.10 msysgit) 上使用 git bash。前几天我在我的 repo 中的一些子文件夹上设置了一些自定义文件夹图标，从那时起我就不能再在分支之间切换而不会出现如下错误：

```
blake@ComputerName /c/csharp (AD_NativeRefactor)
$ git checkout master
Deletion of directory 'AllertFullfillmentDB' failed. Should I try again? (y/n) n 
```

失败的目录并不总是相同的，但它始终是我设置自定义图标的 3 个子文件夹中的 1 个。

*   我已经删除了自定义图标并恢复默认值。
*   我检查了文件权限（它与 repo 中的其他文件夹没有什么不同）。
*   我试过使用 Unlocker 并且没有任何东西锁定目录。
*   我试过重启windows。

不太确定下一步该做什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:38:38.993

正如我在评论中提到的，将 repo 克隆到不同的位置是“重置”的最简单方法，并查看问题是否仍然存在。

显然，在 repo 上的某些文件夹上设置自定义图标具有防止分支之间结帐的副作用，因为 Windows 会在某些需要删除的目录上保持句柄打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-18T07:36:03.603

我认为我的解决方案在没有将 repo 移动到新目录的情况下工作：

1.  我已将该文件夹恢复为默认值，并取消选中“只读”。
2.  关于重试的 git 程序问题，我已经回答了“否”。
3.  最后，我做了一个git状态，只有一个desktop.ini文件被标记为已修改，我只是将其删除。

就是这样，我让我的主人再次清洁和运作。

# java - java getResource() 不工作

> ID：12440035
> 
> 赞同：6
> 
> 时间：2012-09-15T18:37:53.750
> 
> 标签：java, url, embedded-resource

这真让我抓狂。我在具有以下结构的文件夹中有一个 NetBeans 项目：

```
MyProject
---- build
---- src
---- resources 
```

在 src 我的代码在包中。我想做的是使用

```
getClass().getResource("/resources/new.png"); 
```

来自 com.my.package 包中的一个类，但它只是拒绝工作！“new.png”图像位于资源文件夹中。我在这里错过了什么吗？

经过大量玩耍并到处移动“new.png”图像以查看它何时会找到图像，它终于起作用了，但只有当我将图像放入构建文件夹时。那么我该怎么做才能完成这项工作？

编辑：对不起，方法参数中的字符串错误。现已更正

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:10:25.673

我不熟悉 NetBeans，但问题可能是`resources`文件夹（或项目的根，就此而言）不在类路径上，不像`build`.

您需要配置 NetBeans 以添加根文件夹或`resources`类路径，并加载相对于那里的文件。

另请参阅此问题：[Java - getClassLoader().getResource() 让我发疯](https://stackoverflow.com/questions/625687/java-getclassloader-getresource-driving-me-bonkers/625712)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T06:50:22.697

这工作正常：

```
BufferedImage image = ImageIO.read(getClass().getClassLoader().getResourceAsStream("file_name")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-27T10:25:17.087

小心`ImageIO.read(getClass().getClassLoader().getResourceAsStream("file_name"));`

...在 Windows 上，您将获得一个 URL 编码字符串，其中 %20 用于空格，因此如果您想使用该路径加载文件，请首先调用 pathString.replace("%20", " ") ... $hice 刚刚把我钉在了现场！

# python - 如何在 SQL Alchemy 中回滚数据库？

> ID：12440044
> 
> 赞同：4
> 
> 时间：2012-09-15T18:39:04.983
> 
> 标签：python, unit-testing, sqlalchemy, rollback

对于我的数据库项目，我使用的是 SQL Alchemy。我有一个单元测试，将对象添加到表中，找到它，更新它，然后删除它。在它完成之后，我假设我会调用**session.rollback**方法来恢复数据库更改。它不起作用，因为我的序列没有恢复。我的项目计划是有一个数据库，我不想创建一个测试数据库。

我在 SQL Alchemy 的文档中找不到有关如何正确回滚数据库更改的信息。有谁知道如何回滚数据库事务？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-16T01:35:34.157

即使在回滚的事务中使用该序列，Postgres 也不回滚序列中的进展。（要了解原因，请考虑如果在回滚一个事务之前提交另一个使用相同序列的事务会发生什么。）

但无论如何，内存数据库（SQLite 让这一切变得简单）是单元测试的最佳选择。

# magento - Magento CE 1.7.0.2 – 进口产品不出现在前端

> ID：12440047
> 
> 赞同：4
> 
> 时间：2012-09-15T18:39:24.623
> 
> 标签：magento, magento-1.7

上周我一直在与这个问题作斗争，我真的希望这里有人可以帮助我。

在使用 Import 和 Dataflow/Import All Products 工具从不同（且稍旧的）Magento 商店生成的 CSV 反复导入产品后，**我可以让它们显示在后端**，似乎所有数据都完好无损带有图像和所有内容，但**它们根本不会出现在前端**。

似乎让它们出现在前端的唯一方法是将它们从管理产品页面中保存，我宁愿不让客户端在 1922 产品上这样做。如果我将它们添加到类别管理器的类别中，它们*不会显示，**只有*（据我所知）如果我从产品管理器页面保存它们。

另请注意，所有产品

*   已启用
*   库存数量 > 0，重量 > 0 和价格 > 0
*   有现货 = 有货
*   有可见性=“目录，搜索”
*   为他们分配了正确的网站
*   有与他们相关的正确税级

此外，**缓存已被完全禁用，我已经为所有内容重新索引**了至少两打。我还尝试运行以下 PHP 片段：

```
$products = Mage::getModel('catalog/product')
                    ->getCollection()
                    ->addAttributeToSelect('*');
foreach ($products as $product) {
    if ($product->isSaleable())
        Mage::log("Sellable product: {$product->getId()}");
    else
        Mage::log("Unsellable product: {$product->getId()}");
} 
```

并且日志文件随后只包含**"Sellable product: ..."**。我也用同样的产品循环设置产品的网站ID，然后保存，也没什么区别。我已经尝试通过产品经理在保存之前和之后输出各种隐形产品的属性值（使用`$product->getData()`），但我找不到任何差异。我*没有*在保存之前和之后检查每个 MySQL 表，坦率地说，我宁愿不必这样做。

我无计可施。我不知道还能尝试什么。我可以无数次地重新导入产品列表，但我怀疑它会有所作为。我可以尝试再次批量更新产品（使用产品经理的“操作”下拉菜单设置为“更新属性”），但这次可能也无济于事。**有没有*人*有*任何*想法？**

如果这不是此类问题的正确地点，我深表歉意；如果是这样的话，请随时指出我正确的方向。

**更新**

事实证明，这些产品实际上并*没有*设置正确的网站，尽管管理面板明确声称我查看的所有产品都是如此（前端都没有出现）。

**解决方案：**管理产品 > 全选，然后选择操作更新属性并将产品添加到正确的网站。不要忘记重建索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:01:11.327

我有同样的问题，所以感谢您在帖子中提供的这个答案：

更新

事实证明，这些产品实际上并没有设置正确的网站，尽管管理面板明确声称我查看的所有产品都是如此（前端都没有出现）。

解决方案：管理产品 > 全选，然后选择操作更新属性并将产品添加到正确的网站。不要忘记重建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T14:38:43.487

补充一点 - 我也遇到了同样的问题，但是我的 is_in_stock 要么为 0，要么设置为 qty 值。必须为 0 或 1。

以防万一有人有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T18:24:56.977

你有 gd php 扩展吗？

安装它（在 CentOS 中）：

```
yum install gd gd-devel php-gd 
```

执行此操作后

```
service httpd restart 
```

此致

# php - YII 更改默认语言

> ID：12440049
> 
> 赞同：8
> 
> 时间：2012-09-15T18:39:43.423
> 
> 标签：php, yii

我是 YII 框架 (PHP) 的初学者 使用 YII 创建新站点时，它将显示为英文页面。

我想将默认语言更改为法语，因此页面将以法语显示。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-15T18:42:33.610

要更改语言，请[`CApplication::language`](http://www.yiiframework.com/doc/api/1.1/CApplication#language-detail)适当设置。这可以在运行时完成，如

```
Yii::app()->language = 'fr'; 
```

但通常它是在您的[应用程序配置](http://www.yiiframework.com/doc/guide/1.1/en/basics.application#application-configuration)中完成的：

```
array(
    // ...settings...
    'language' => 'fr',
    // ...more settings...
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T09:58:23.577

因此您可以将 config/main.php 中的默认语言设置为

```
return array(
    ...
    'sourceLanguage' => 'fr',
    'language'=>'en',
    ...
    'params' => array(
               ...
               'languages'=>array('en_us'=>'English', 'fr'=>'French', 'fa_ir'=>'فارسی'),
               ....
               ), 
); 
```

并在您喜欢的任何地方更改您的语言：

```
Yii::app()->language = Yii::app()->params->languages['fa_ir']; 
```

或者更多：

```
Yii::app()->language = Yii::app()->params->languages[$_GET['lang']]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:15:00.700

可以通过 trough 配置设置默认语言（编写应用程序的语言）`CApplication::sourceLanguage`，更改`CApplication::language`无效，因为它默认设置为 en_en。

同样在设置语言时，您应该使用 localeID - fr_FR ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T19:24:18.237

Yii2 的位置：root/config/web.php 并添加：**'language' => 'fr'，**

```
 $config = [
      'id' => 'basic',
      'language' => 'fr', // Add this in config/web.php
      'basePath' => dirname( __DIR__ ),
      'bootstrap' => ['log'],
      ...
      ...
   ]; 
```

# php - 一些 Facebook 用户的数据未插入 mysql 数据库

> ID：12440054
> 
> 赞同：4
> 
> 时间：2012-09-15T18:40:29.083
> 
> 标签：php, mysql, facebook

关于从一些授权我的应用程序并使用它的 Facebook 用户获取数据（通常顺便说一句），我有一个奇怪但绝对严重的问题。

到目前为止，大约有 3000 名用户使用了该应用程序，但只有 600 名用户显示在用户表中。这怎么可能？我找不到新老用户之间的联系——对于一些人来说它完美无缺，对于另一些人来说它根本不起作用。

这是完整的，但出于安全原因，经过审查的代码：

```
<?php
 require 'facebook.php';
 include 'config.php';
 session_start();

 $app_id = 'id';
 $app_secret = 'secret';
 $app_namespace = 'namespace';
 $app_url = 'https://apps.facebook.com/' . $app_namespace . '/';
 $scope = 'email,publish_actions'; 
```

// 初始化 Facebook SDK

```
 $facebook = new Facebook(array(
    'appId'  => $app_id,
    'secret' => $app_secret,
    'cookie' => true
    )); 
```

// 获取当前用户

```
 $user = $facebook->getUser(); 
```

// 如果用户还没有安装应用程序，将他们重定向到 Auth Dialog

```
 if (!$user) {
    $loginUrl = $facebook->getLoginUrl(array(
    'scope' => $scope,
    'redirect_uri' => $app_url,
    ));

print('<script> top.location.href=\'' . $loginUrl . '\'</script>');
 }

 else if ($user) {
    try { 
```

// 继续知道我们有一个经过身份验证的登录用户。

```
 $fbuid = $facebook->getUser();
    $user_profile = $facebook->api('/me');

} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
}
 }
else{
header('Location: index.php');

 }
 $queryUserExists = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook'AND oauth_uid = " . $user_profile['id']);
 $num=mysql_numrows($queryUserExists); 
```

//如果没有，添加到数据库

```
 if ($num == 0) {
$query = mysql_query("INSERT INTO users (oauth_uid, oauth_provider, username, first_name, last_name, email, pic_square ,login_date , dailytokens) 
        VALUES ({$user_profile['id']}, 'facebook', '{$user_profile['name']}', '{$user_profile['first_name']}','{$user_profile['last_name']}','{$user_profile['email']}', '".$photolink."',CURDATE(),1)");
$query = mysql_query("SELECT * FROM users WHERE oauth_uid = " . mysql_insert_id());
$result = mysql_fetch_array($query); 
 }
     else
     {
    $DateLastLogin=mysql_result($queryUserExists,0,"login_date");
    $myDate = date('Y-m-d');

    $CompLastDate = strtotime($DateLastLogin);
    $CompMyDate = strtotime($myDate);

if($CompLastDate < $CompMyDate){
    $updateDailyToken = "Update users set login_date=CURDATE(), dailytokens = dailytokens + 1 where oauth_uid =" . $user_profile['id'];
    $updateToken= mysql_query($updateDailyToken) or die(mysql_error());
}
 }
 $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND oauth_uid = " . $user_profile['id']);

 $_SESSION['userid']=$user_profile['id']; 
```

// 根据当前用户状态，将需要登录或注销 url。

```
 if ($user) {
    $paramsout = array('next'=>'http://facebook.com');
    $logoutUrl = $facebook->getLogoutUrl($paramsout);
     }
     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:43:50.180

这是你的问题

```
$query = mysql_query("INSERT INTO users (oauth_uid, oauth_provider, username, first_name, last_name, email, pic_square ,login_date , dailytokens) 
        VALUES ({$user_profile['id']}, 'facebook', '{$user_profile['name']}', '{$user_profile['first_name']}','{$user_profile['last_name']}','{$user_profile['email']}', '".$photolink."',CURDATE(),1)"); 
```

它应该是

```
$query = mysql_query("INSERT INTO users (oauth_uid, oauth_provider, username, first_name, last_name, email, pic_square ,login_date , dailytokens) 
        VALUES ('{$user_profile['id']}', 'facebook', '{$user_profile['name']}', '{$user_profile['first_name']}','{$user_profile['last_name']}','{$user_profile['email']}', '{$photolink}',CURDATE(),1)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:12:47.037

Problem was with the object type in the database. Some facebook users have incredebly large id: 0098788563000236 for example, so using BIGINT instead of INT solved it.

# sql - facebook用户ID的存储

> ID：12440056
> 
> 赞同：4
> 
> 时间：2012-09-15T18:40:31.177
> 
> 标签：sql, facebook, identifier

facebook 用户的 id 是否有最大值？

我使用 SQL 整数来存储值，但这还不够，因为我遇到了 15 位数字的 id。

我猜没有（这将是合乎逻辑的......）并且正在使用相当于一个大整数？那么我应该切换到 varchar(255) 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T18:50:13.420

Facebook 曾经建议您将`user_id`值存储为字符串（现在在任何地方都找不到参考）。[该文档](https://developers.facebook.com/docs/reference/api/user/)还说该`user_id`值是一个字符串。

以我的经验，`user_id`可以是一个`bigint(20)`值，但我认为将其存储为字符串以防止将来任何可能的更改干扰我的应用程序是一个好主意。在任何情况下，实际都不需要数值运算`user_id`；它只是一个唯一标识符。确保将其用作数据库用户表中的索引，这样就不会出现重复的 user_ids。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T18:51:25.967

从[Java 实践](http://www.javapractices.com/topic/TopicAction.do;jsessionid=716DB789603D5FB3C9009670F3B94129?Id=192)中，出于该技巧中提到的原因，将 facebook 用户 ID 存储在字符串中是一个好主意。您可以在此字段上定义一个索引以加快过滤速度，我猜您不会对这些用户 ID 执行任何数字类型的查询。

# memory - uboot 环境变量保存似乎不起作用

> ID：12440057
> 
> 赞同：3
> 
> 时间：2012-09-15T18:40:33.280
> 
> 标签：memory, environment-variables, u-boot

我在尝试在 uBoot 中保存环境变量并让它们在重新启动后持续存在时遇到问题，请参见下面的跟踪。这是 U-Boot 2009.08-00000-g19b0e8d-dirty（2012 年 5 月 29 日 - 16:09:40）。关于什么可能是错的任何想法？“正在写入 Flash...Flash 未擦除”消息是否重要？

```
-> setenv ipaddr 10.1.10.28
-> 保存环境
将环境保存到 Flash...
. 完毕
未受保护的 1 个扇区
. 完毕
未受保护的 1 个扇区
擦除闪存...
. 完毕
已擦除 1 个扇区
写入 Flash... Flash 未擦除
. 完毕
受保护的 1 个扇区
. 完毕
受保护的 1 个扇区
-> 打印环境
启动延迟=1
波特率=115200
服务器ip=10.1.10.40
加载地址=41000000
u-boot=q4/u-boot.bin
加载=tftp ${loadaddr) ${u-boot}
upd=运行负载；运行编
bootargs=控制台=ttyMCF2,115200 恐慌=10
根路径=/tftpboot/ltib
nfsargs=setenv bootargs ${bootargs} root=/dev/nfs rw nfsroot=${serverip}:${rootpath} ip=${ipaddr}:${serverip}:${gatewayip}:${netmask}:${主机名}:${netdev}:off
nfs=运行 nfsargs；tftp q4/uImage-nfs；开机
prog=prot off 0 3ffff;era 0 3ffff;cp.b ${loadaddr} 0 ${filesize};save
ext_wp_off=mw.b 10010020 e0 1
ethact=FEC0
ethaddr=3c:98:bf:00:00:14
eth1addr=3c:98:bf:00:00:15
nfsaddr=10.1.10.40
httpPort=81
主机名=
标准输入=串行
标准输出=串行
标准错误=串行
内存=65024k
ipaddr=10.1.10.28

环境大小：686/32763 字节
-> 重置

U-Boot 2009.08-00000-g19b0e8d-dirty（2012 年 5 月 29 日 - 16:09:40）
(c) 2012 年。

CPU：飞思卡尔 MCF53013（掩码：73 版本：1）
       CPU 时钟 240 MHz 总线时钟 80 MHz
董事会：RevB
I2C：准备就绪
内存：64 MB
闪存：32 MB
在：串行
输出：串行
错误：串行
净：FEC0、FEC1
-> 打印环境
启动延迟=1
波特率=115200
服务器ip=10.1.10.40
加载地址=41000000
u-boot=q4/u-boot.bin
加载=tftp ${loadaddr) ${u-boot}
upd=运行负载；运行编
bootargs=控制台=ttyMCF2,115200 恐慌=10
根路径=/tftpboot/ltib
nfsargs=setenv bootargs ${bootargs} root=/dev/nfs rw nfsroot=${serverip}:${rootpath} ip=${ipaddr}:${serverip}:${gatewayip}:${netmask}:${主机名}:${netdev}:off
nfs=运行 nfsargs；tftp q4/uImage-nfs；开机
prog=prot off 0 3ffff;era 0 3ffff;cp.b ${loadaddr} 0 ${filesize};save
ext_wp_off=mw.b 10010020 e0 1
ethact=FEC0
ethaddr=3c:98:bf:00:00:14
eth1addr=3c:98:bf:00:00:15
nfsaddr=10.1.10.40
httpPort=81
主机名=
标准输入=串行
标准输出=串行
标准错误=串行
内存=65024k

环境大小：668/32763 字节
->

```

flinfo 输出为：

```
-> 飞信

Bank #1：符合 CFI 标准的 FLASH (16 x 16) 大小：32 MB in 262 Sectors
  AMD 标准命令集，制造商 ID：0x01，设备 ID：0x227E
  擦除超时：8192 毫秒，写入超时：1 毫秒
  缓冲区写入超时：5 毫秒，缓冲区大小：64 字节

  扇区起始地址：
  00000000 RO 00008000 RO 00010000 RO 00018000 RO 00020000 RO
  00040000 00060000 00080000 000A0000 000C0000      
  000E0000 00100000 00120000 00140000 00160000      
  00180000 001A0000 001C0000 001E0000 00200000      
  00220000 00240000 00260000 00280000 002A0000      
  002C0000 002E0000 00300000 00320000 00340000      
  00360000 00380000 003A0000 003C0000 003E0000      
  00400000 00420000 00440000 00460000 00480000      
  004A0000 004C0000 004E0000 00500000 00520000      
  00540000 00560000 00580000 005A0000 005C0000      
  005E0000 00600000 00620000 00640000 00660000      
  00680000 006A0000 006C0000 006E0000 00700000      
  00720000 00740000 00760000 00780000 007A0000      
  007C0000 007E0000 00800000 00820000 00840000      
  00860000 00880000 008A0000 008C0000 008E0000      
  00900000 00920000 00940000 00960000 00980000      
  009A0000 009C0000 009E0000 00A00000 00A20000      
  00A40000 00A60000 00A80000 00AA0000 00AC0000      
  00AE0000 00B00000 00B20000 00B40000 00B60000      
  00B80000 00BA0000 00BC0000 00BE0000 00C00000      
  00C20000 00C40000 00C60000 00C80000 00CA0000      
  00CC0000 00CE0000 00D00000 00D20000 00D40000      
  00D60000 00D80000 00DA0000 00DC0000 00DE0000      
  00E00000 00E20000 00E40000 00E60000 00E80000      
  00EA0000 00EC0000 00EE0000 00F00000 00F20000      
  00F40000 00F60000 00F80000 00FA0000 00FC0000      
  00FE0000 01000000 01020000 01040000 01060000      
  01080000 010A0000 010C0000 010E0000 01100000      
  01120000 01140000 01160000 01180000 011A0000      
  011C0000 011E0000 01200000 01220000 01240000      
  01260000 01280000 012A0000 012C0000 012E0000      
  01300000 01320000 01340000 01360000 01380000      
  013A0000 013C0000 013E0000 01400000 01420000      
  01440000 01460000 01480000 014A0000 014C0000      
  014E0000 01500000 01520000 01540000 01560000      
  01580000 015A0000 015C0000 015E0000 01600000      
  01620000 01640000 01660000 01680000 016A0000      
  016C0000 016E0000 01700000 01720000 01740000      
  01760000 01780000 017A0000 017C0000 017E0000      
  01800000 01820000 01840000 01860000 01880000      
  018A0000 018C0000 018E0000 01900000 01920000      
  01940000 01960000 01980000 019A0000 019C0000      
  019E0000 01A00000 01A20000 01A40000 01A60000      
  01A80000 01AA0000 01AC0000 01AE0000 01B00000      
  01B20000 01B40000 01B60000 01B80000 01BA0000      
  01BC0000 01BE0000 01C00000 01C20000 01C40000      
  01C60000 01C80000 01CA0000 01CC0000 01CE0000      
  01D00000 01D20000 01D40000 01D60000 01D80000      
  01DA0000 01DC0000 01DE0000 01E00000 01E20000      
  01E40000 01E60000 01E80000 01EA0000 01EC0000      
  01EE0000 01F00000 01F20000 01F40000 01F60000      
  01F80000 01FA0000 01FC0000 01FE0000 RO 01FE8000 RO
  01FF0000 01FF8000

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:33:15.700

在使用“fw_setenv”更新我的 U-Boot 环境后，我遇到了类似的问题。

我发现我的 U-Boot 在 fw_setenv 将其从 Linux 锁定后无法解锁环境扇区。一切看起来都很好，但是写入会像你的一样失败。

我可以通过使用 flash_unlock 从 Linux 解锁 env 扇区来解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T21:37:27.450

有时在 Linux 中使用 fw_setenv 后会发生这种情况。如果您可以启动到正在运行的 Linux，请执行“mtd unlock /devX”，其中 X 是您的 u-boot 环境变量所在的分区，然后重新启动到 u-boot。您应该能够执行“Saveenv”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:24:20.917

我重新刷新了我的 Flash，现在可以保存环境变量了。一定是贪污了？

# iphone - 使用 AFNetworking 和 HTTP 基本身份验证

> ID：12440059
> 
> 赞同：20
> 
> 时间：2012-09-15T18:40:50.410
> 
> 标签：iphone, objective-c, json, afnetworking, nsurlrequest

以下代码成功连接到我的 Ruby on Rails API 并使用 AFNetworking 返回 JSON。我需要做什么来编辑它以传递用户名和密码，以便我的 API 可以使用 HTTP 基本身份验证？

我已经阅读了他们的文档，但我对 Objective-C 和 AFNetworking 都是新手，目前还没有意义。

```
NSURL *url = [[NSURL alloc] initWithString:@"http://localhost:3000/tasks.json"];

NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                     JSONRequestOperationWithRequest:request
                                     success:^(NSURLRequest *request
                                     , NSHTTPURLResponse *response
                                     , id JSON) {

    self.tasks = [JSON objectForKey:@"results"];
    [self.activityIndicatorView stopAnimating];
    [self.tableView setHidden:NO];
    [self.tableView reloadData];

    NSLog(@"JSON");

} failure:^(NSURLRequest *request
                , NSHTTPURLResponse *response
                , NSError *error
                , id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-15T18:54:45.473

*针对 AFNetworking 2.x 更新的答案*

## 对于 AFNetworking 2.x：

在 2.x 中，他们取消了 AFHTTPClient，因此您需要使用自己的类扩展 AFHTTPRequestOperationManager。然后，您可以从其他代码调用该类。例如，这是一个扩展 AFHTTPRequestOperationManager 的示例类：

SBAPIManager.h：

```
#import "AFHTTPRequestOperationManager.h"

@interface SBAPIManager : AFHTTPRequestOperationManager

- (void)setUsername:(NSString *)username andPassword:(NSString *)password;

+ (SBAPIManager *)sharedManager;

@end 
```

SBAPIManager.m：

```
#import "SBAPIManager.h"
#import "AFNetworkActivityIndicatorManager.h"

@implementation SBAPIManager

#pragma mark - Methods

- (void)setUsername:(NSString *)username andPassword:(NSString *)password
{
    [self.requestSerializer clearAuthorizationHeader];
    [self.requestSerializer setAuthorizationHeaderFieldWithUsername:username password:password];
}

#pragma mark - Initialization

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];
    if(!self)
        return nil;

    self.requestSerializer = [AFJSONRequestSerializer serializer];

    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];

    return self;
}

#pragma mark - Singleton Methods

+ (SBAPIManager *)sharedManager
{
    static dispatch_once_t pred;
    static SBAPIManager *_sharedManager = nil;

    dispatch_once(&pred, ^{ _sharedManager = [[self alloc] initWithBaseURL:[NSURL URLWithString:@"http://localhost:3000"]]; }); // You should probably make this a constant somewhere
    return _sharedManager;
}

@end 
```

然后，在您的代码中，您可以这样调用它：

```
[[SBAPIManager sharedManager] setUsername:yourUsernameVariableHere andPassword:yourPasswordVariableHere];

[[SBAPIManager sharedManager] GET:@"/tasks.json" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
    self.tasks = [responseObject objectForKey:@"results"];
    [self.activityIndicatorView stopAnimating];
    [self.tableView setHidden:NO];
    [self.tableView reloadData];

    NSLog(@"JSON");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // error stuff here
}]; 
```

* * *

## 对于 AFNetworking 1.x：

AFNetworking 中的最佳实践是使用您自己的类扩展 AFHTTPClient。然后，您可以从其他代码调用该类。例如，这是一个扩展 AFHTTPClient 的示例类：

SBAPIManager.h：

```
#import "AFNetworking/AFHTTPClient.h"

@interface SBAPIManager : AFHTTPClient

- (void)setUsername:(NSString *)username andPassword:(NSString *)password;

+ (SBAPIManager *)sharedManager;

@end 
```

SBAPIManager.m：

```
#import "SBAPIManager.h"
#import "AFJSONRequestOperation.h"
#import "AFNetworkActivityIndicatorManager.h"

@implementation SBAPIManager

#pragma mark - Methods

- (void)setUsername:(NSString *)username andPassword:(NSString *)password
{
    [self clearAuthorizationHeader];    
    [self setAuthorizationHeaderWithUsername:username password:password];
}

#pragma mark - Initialization

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];
    if(!self)
        return nil;

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    [self setParameterEncoding:AFJSONParameterEncoding];

    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];

    return self;
}

#pragma mark - Singleton Methods

+ (SBAPIManager *)sharedManager
{
    static dispatch_once_t pred;
    static SBAPIManager *_sharedManager = nil;

    dispatch_once(&pred, ^{ _sharedManager = [[self alloc] initWithBaseURL:[NSURL URLWithString:@"http://localhost:3000"]]; }); // You should probably make this a constant somewhere
    return _sharedManager;
}

@end 
```

然后，在您的代码中，您可以这样调用它：

```
[[SBAPIManager sharedManager] setUsername:yourUsernameVariableHere andPassword:yourPasswordVariableHere];

[[SBAPIManager sharedManager] getPath:@"/tasks.json" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
    self.tasks = [responseObject objectForKey:@"results"];
    [self.activityIndicatorView stopAnimating];
    [self.tableView setHidden:NO];
    [self.tableView reloadData];

    NSLog(@"JSON");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // error stuff here
}]; 
```

# variables - 如何在 XCODE 的不同视图之间发送变量？

> ID：12440062
> 
> 赞同：1
> 
> 时间：2012-09-15T18:41:03.867
> 
> 标签：variables, uiviewcontroller, multiple-views

我目前正在尝试创建一个允许用户构建“假”成绩单的应用程序。如何使用变量从 SecondViewController 转到 ThirdViewController？我需要能够将用户的文本从 15 textField 带到一个可以保存为图片的新视图，以便他们可以在 Facebook 或电子邮件上与朋友分享。

# java - 有没有一种简单的方法来处理 JSP 文件中的 404 错误？

> ID：12440065
> 
> 赞同：0
> 
> 时间：2012-09-15T18:41:23.827
> 
> 标签：java, jsp, jakarta-ee

我不想每次都使用：

```
if(!new File(file).exists()){
    //createFile /doc/a.txt ...
}
request.getRequestDispatcher("/doc/a.txt").forward(request, response); 
```

我想知道如何实现以下代码：

```
try{
    request.getRequestDispatcher("/doc/a.txt").forward(request, response);
}catch(404 error){
    //createFile /doc/a.txt ...
} 
```

如何仅在此页面中处理 404 错误？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:44:30.740

这最好由您的错误部分处理`web.xml`：

```
<error-page>
    <error-code>404</error-code>
    <location>/ErrorPage.jsp</location>
</error-page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:45:59.710

为什么这对你不起作用：

```
try{
    request.getRequestDispatcher("/doc/a.txt").forward(request, response);
}catch(Exception error){
    //createFile /doc/a.txt ...
} 
```

# javascript - 如何在第 n 个空格处将长字符串一分为二？

> ID：12440066
> 
> 赞同：4
> 
> 时间：2012-09-15T18:41:58.043
> 
> 标签：javascript, string

这些字符串可能是很长的段落，所以我不确定最好用空格分隔符分割整个字符串。我正在尝试获取前 10 个单词并将它们包装在一个跨度中：

`'<span class="easing">' + string + '</span>'`

然后重新加入原始拆分的后半部分。关于超有效方法的建议？它一次最多会影响页面上的三个段落。

**已编辑**

这是一个踢球者 - 拆分应该发生在第 9 个单词之后或第一个句子的末尾（如果该句子少于 9 个单词）。

**例子**

```
var origString = 'Coming into the world on Elvis’ birthday with a doctor named Presley seemed fortuitous until, wielding the silvery smooth scalpel in his aged unsteady hand, the doctor sliced through the walls of my mother’s uterus and into my unborn skin. Inside the warm soothing waters of my mother’s womb, inside the silent weightlessness, I was safe. Then the prick of cold steel marked the first in a series of rude awakenings. I was scarred for life even before birth.';
var newString = '<span="easing">Coming into the world on Elvis’ birthday with a doctor</span> named Presley seemed fortuitous until, wielding the silvery smooth scalpel in his aged unsteady hand, the doctor sliced through the walls of my mother’s uterus and into my unborn skin. Inside the warm soothing waters of my mother’s womb, inside the silent weightlessness, I was safe. Then the prick of cold steel marked the first in a series of rude awakenings. I was scarred for life even before birth.'; 
```

或者用一个简短的句子开始段落：

```
var origString = '“Is he okay? Tell me everything’s okay” she pleas, her desperate need to confirm my health competing with her own need for consolation.';
var newString = '<span class="easing">“Is he okay?</span> Tell me everything’s okay” she pleas, her desperate need to confirm my health competing with her own need for consolation.'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:35:21.597

考虑到您最多只能扫描大约 100 个字符*（除非您有 URI 或非常长的单词）*，那么逐个字符扫描是非常理想的。您可以通过在某些地方使用 .indexOf() 来优化这一点，但是您会失去在检查每个可能终止句子的不同字符时所获得的东西。

```
function spanomatic ( str, words ) {
  var i, l, c;
  for ( i=0, l=str.length; i<l; i++ ) {
    c = str.charAt(i);
    if ( c == ' ' ) {
      if ( words-- <= 0 ) {
        str = '<span>'+str.substring(0,i)+'</span>'+str.substring(i);
        break;
      }
    }
    else if ( ('?!.;:').indexOf(c) != -1 ) {
      str = '<span>'+str.substring(0,i)+'</span>'+str.substring(i);
      break;
    }
  }
  return str;
}

spanomatic ( 'Pass your string here', 9 ); 
```

*（上面的代码假定您的文本将始终以正确的语法终止（即至少包含一个?!.;:) - 如果不是，那么少于 9 个单词的段落可能会以无跨度结尾。这可能是但是通过一些更改修复...）*

**给未来读者的注意事项**

如果您想要一种“超级高效”的字符串搜索方式，请避免使用正则表达式*（除非您真的需要它们的能力）*。这个问题的公认答案是简洁并且很好地组合了函数 - 不要误会我的意思 - 但它比使用 for 循环扫描字符串慢大约 70% *（至少在我对 FireFox 和 Chrome 的测试中）* ......甚至在将正则表达式定义移到 Bergi 函数之外进行比较时*（即使用预编译的正则表达式而不是每次调用函数时都重新创建它们）*。

[http://jsperf.com/compare-regexp-vs-char-scanning](http://jsperf.com/compare-regexp-vs-char-scanning)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:59:26.290

```
return string.replace(/.+?[,.?!]|.+$/, function(match, index, string){
    var words = match.split(/\s+/);
    words[ words.length<10 ? words.length-1 : 9 ] += '</span>';
    return '<span class="easing">' + words.join(" ");
}); 
```

这匹配第一个类似句子的东西（或整个字符串 - 除非换行符），并在该跨度中包装它的前 10 个单词。适用于您的样本输入，也适用于较小的输入。`…|.*$`返回空字符串的空字符串，如果需要空跨度，请将正则表达式更改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:38:46.177

这里。不过，这有点像代码高尔夫。对不起。

```
$( 'p' ).html(function ( i, text ) {
    var re = /(.+?)\s/g, c = 0, res;   
    while ( res = re.exec( text ) ) if ( ++c === 10 || res[1].slice( -1 ) === '.' ) break;

    var p = re.lastIndex;
    return '<span class="easing">' + text.slice( 0, p ) + '</span>' + text.slice( p );  
}); 
```

**现场演示：http:** [//jsfiddle.net/3DaEV/](http://jsfiddle.net/3DaEV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T19:13:04.590

这段代码怎么样：

```
var str = 'asda adsfadsf asdfadfadsf adsfsdafadf. adfadfadfad adfadfdaf adfadfadf adfadf \afsgasfggasfg SFGDFGDSFGH dfghdsghdgas hadghdagh';

var sentences = [], words = str.split(' ');
for (var i = 0; i < 9; i++) {
    if (words[i].lastIndexOf('.') !== -1) {
        sentences.push(words[i]);
        break;    
    } else {
        sentences.push(words[i]);
    }        
}

words.slice(sentences.length, words.length);

$('<span>' + sentences.join(' ') + '</span>').appendTo($('#log')); 
```

我把它放在[小提琴](http://jsfiddle.net/GdS5z/5/)下面，你可以测试一下。您可能希望在循环中使用 arr1 的其余部分执行此操作。

**更新：**

如果它不仅是句号，还有 ?!:; 等。然后创建一个`RegExp`并测试而不是做`lastIndexOf('.')`

# serialization - Hadoop Serializer Not Found 异常

> ID：12440068
> 
> 赞同：2
> 
> 时间：2012-09-15T18:42:18.150
> 
> 标签：serialization, hadoop, sequencefile

我有一份工作，其输出格式为`SequenceFileOuputFormat`.

我像这样设置输出键和值类：

```
conf.setOutputKeyClass(IntWritable.class);
conf.setOutputValueClass(SplitInfo.class); 
```

`SplitInfo`班级_`implements Serializable,Writable`

我将`io.serializations`属性设置如下：

```
conf.set("io.serializations","org.apache.hadoop.io.serializer.JavaSerialization," 
+ "org.apache.hadoop.io.serializer.WritableSerialization"); 
```

但是，在减速器方面，我收到此错误，告诉我 Hadoop 找不到序列化程序：

```
 java.lang.NullPointerException
at org.apache.hadoop.io.serializer.SerializationFactory.getSerializer(SerializationFactory.java:73)
at org.apache.hadoop.io.SequenceFile$Writer.init(SequenceFile.java:961)
at org.apache.hadoop.io.SequenceFile$Writer.<init>(SequenceFile.java:892)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:393)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:354)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:476)
at org.apache.hadoop.mapreduce.lib.output.SequenceFileOutputFormat.getRecordWriter(SequenceFileOutputFormat.java:61)
at org.apache.hadoop.mapred.ReduceTask$NewTrackingRecordWriter.<init>(ReduceTask.java:569)
at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:638)
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:39:18.683

问题是我犯了一个愚蠢的错误：我没有更新 jar。所以，基本上 SplitInfo 没有在旧的（正在使用的）jar 中实现 Writable 接口。

作为一般性观察：OP中指定的错误的根本原因是HADOOP无法找到您尝试序列化的特定类型的序列化程序（直接或间接，例如通过使用该类型作为输出核心价值）。由于以下两个原因之一，Hadoop 找不到 Serilizer：

1.  您的类型不可序列化（即它不实现可写或可序列化）
2.  对于您的类型实现的序列化类型，Hadoop 没有可用的序列化器（例如：您的类型实现 Writable 但 hadoop 出于某种原因无法使用`org.apache.hadoop.io.serializer.WritableSerialization`该类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:29:08.283

我认为你正在尝试做一些你不需要做的事情。您的输出值只需要实现 Writable 接口，您只需设置输出格式。

```
conf.setOutputFormatClass(SequenceFileOutputFormat.class); 
```

如果你想使用不同的序列化框架，你只使用“io.serializations”配置，它看起来不像你需要的。

# iphone - 用 UIButton 改变 UIScrollView？

> ID：12440075
> 
> 赞同：0
> 
> 时间：2012-09-15T18:43:00.103
> 
> 标签：iphone, ios, xcode, uiscrollview, uibutton

好的，我正在尝试使用取消按钮来回更改 scrollView 页面？现在我使用的代码在模拟器中完美运行，但是一旦我进入设备，它就会时不时地运行一次？任何线索为什么会发生这种情况？

```
- (IBAction)changeScrollPage:(id)sender {

if (pageControlUsed)
{
    return;
}

CGFloat pageWidth = _scrollView.frame.size.width;
int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
_pageControl.currentPage = page;

if ( sender == _rightBTN) {
    NSLog(@"right");

    page += 1;

    [_scrollView scrollRectToVisible:CGRectMake(page*_scrollView.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height) animated:YES];

} else if ( sender == _leftBTN) {
    NSLog(@"left");
    page -= 1;
    [_scrollView scrollRectToVisible:CGRectMake(page*_scrollView.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height) animated:YES];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:06:48.900

您还可以使用`UIButton.tag`属性：

```
rightBTN.tag = 1;

leftBTN.tag = 2; 

if ( sender.tag == 1)

{

NSLog(@"right");

page += 1;
[_scrollView scrollRectToVisible:CGRectMake(page*_scrollView.frame.size.width,0,self.view.frame.size.width,self.view.frame.size.height) animated:YES];

}
else if ( sender.tag == 2)

{

NSLog(@"left");

page -= 1;

[_scrollView scrollRectToVisible:CGRectMake(page*_scrollView.frame.size.width0,self.view.frame.size.width, self.view.frame.size.height) animated:YES];

} 
```

# oracle - Oracle PL/SQL 中的字符编码问题

> ID：12440077
> 
> 赞同：1
> 
> 时间：2012-09-15T18:43:21.310
> 
> 标签：oracle, plsql

从数据库表中提取数据时，我遇到了字符差异问题。

我已经编写了一个 PL/SQL 代码来从我的 db 表中将一些数据假脱机到 .txt 文件，并使用 unix shell 运行这个 sql 但是当我得到假脱机文件时，结果集是从后面的一个改变的结尾。

例如：

```
At back end: SADETTÝN

In Spooled txt file :  SADETTŸN 
```

如果你看这个`Y`角色，它是一个改变的角色。我想以后端的方式保留所有字符。

我的数据库的字符集：

```
SELECT * FROM v$nls_parameters WHERE parameter LIKE 'NLS%CHARACTERSET'
PARAMETER              VALUE 
NLS_CHARACTERSET       WE8ISO8859P1 
NLS_NCHAR_CHARACTERSET WE8ISO8859P1 
```

和 Unix NLS_LANG 参数：

```
$ echo $NLS_LANG
AMERICAN_AMERICA.WE8ISO8859P1 
```

我尝试将 NLS_LANG 参数更改为 WE8ISO8859P9（土耳其字符集）但没有帮助！

谁能让我知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:01:57.350

我假设您正在尝试使用“vi”或类似的东西来可视化您的文件。NLS_LANG 参数仅由您的数据库用于导出到您的文件。对于您的编辑器（vi），您需要将 LANG 参数设置为相应的值到你的 NLS_LANG。示例：对于 ISO8859P1 美式英语，您必须执行 export LANG=en_US.ISO8859-1 换句话说，您的文件很好，但您的编辑不知道如何处理您的土耳其字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T22:19:23.940

您应该使用 NCHAR 数据类型。更多信息可在 Oracle 文档 -[使用 Unicode 的 SQL 和 PL/SQL 编程中获得](http://docs.oracle.com/cd/B28359_01/server.111/b28298/ch7progrunicode.htm#i1006019)

对于从 SQL*Plus 进行假脱机，您需要正确设置 NLS_LANG 环境变量。这是[stackoverflow](https://stackoverflow.com/questions/1749337/oracle-unicode-spooling)中的一个类似问题。

# algorithm - 希望了解在单链表中找到循环开始的算法

> ID：12440078
> 
> 赞同：0
> 
> 时间：2012-09-15T18:43:25.140
> 
> 标签：algorithm, linked-list

[这个问题](http://umairsaeed.com/2011/06/23/finding-the-start-of-a-loop-in-a-circular-linked-list/)有一个非常优雅的解决方案，但我不明白最大的部分 - 为什么在将 S 移回列表的开头之后，S 和 F 与循环开始的距离相同？他做了一些数学来“证明”它，但这对我来说不太有意义。任何有助于更好地理解这一点的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:39:07.187

为了解决这个问题，我们假设有一个`n`节点循环开始`m`节点之后的起点，并且我们使用慢速指针 S（每一步一个节点）和一个快速指针 F（每一步两个节点）来遍历它。为简洁起见，我们假设`m < n`，但这并不重要（只需做一些模运算）。

关键是要意识到 S 和 F 将在节点重叠`n - m`。文章中完成的数学运算确实有点难以理解，并且似乎没有推广到奇怪的情况`n`。不确定这会容易得多，但我会尝试。

假设 S 从循环的开头开始，F 从循环开始的`k`节点开始，我们开始遍历循环。在时间步`x`，S 将是循环开始之后的节点`x`，F 将是循环`2x + k`开始之后的节点。当然，在 F 越过循环起点之前，F 不会超过 S，此时我们可以等效地将其描述为起点之后的`(2x + k) - n = 2x - (n - k)`节点。

我们现在问，“S 和 F 会在哪一步`x`重叠？” 这只是当 S 的位置等于 F 的位置时，所以`x = 2x - (n - k)`，或（使用一些简单的代数），`x = n - k`。因此，两个指针都将是`n - k`循环开始之后的节点。

回到最初的问题（两个指针都从链表的头部开始），当 S 到达起点时（以`m`步为单位），F 将经过多`2m`步，因此将成为`m`循环起点之后的节点（`2m - m = m`）。替换`k`为`m`上面，我们看到当我们继续时，当指针 F（和 S）是`n - m`超过循环开始的节点时，节点将重叠。因此，如果我们将 S 移回开头，则 F 和 S 都将采取`m`措施回到循环的开头。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:46:39.510

1.  取 2 个指针（f 和 s）。
2.  从链接列表头开始两个指针。使 f(faster) 以 s(slower) 的速度遍历两倍，即 f 将跳转两次，s 将跳转一次。
3.  检查他们是否会见面。
4.  如果他们相遇，则使 s 指向链接列表的开头并且不更改 f 的值（因为 f 现在指向他们的会议节点）
5.  现在使两个指针速度相等，并使它们仅移动一个节点。
6.  他们相遇的点将是循环的开始。（要做到这一点，只需画一张图或理解上面的帖子。

让我知道你是否明白这一点。将很乐意为您提供帮助。

# javascript - Facebook like 按钮不会在固定 div 上返回

> ID：12440079
> 
> 赞同：0
> 
> 时间：2012-09-15T18:43:34.880
> 
> 标签：javascript, css, html, facebook-like

我在我的网站上添加了一个 Facebook 类似按钮。我的网站在页面顶部有一个固定的 div（图像中的蓝色 div）。点赞按钮在其下方（在可以滚动的 div 中） 我的问题是当页面向下滚动时，点赞按钮位于固定 div 的顶部（蓝色）。我想从 div 的背面滚动它。我怎样才能做到这一点？我添加了几个屏幕截图

滚动前 ![滚动前](../Images/f3a0df89fba8948b24f9995ce93bd796.png)

滚动后 ![在此处输入图像描述](../Images/c18b0ded3bb043313dba2f05f521fd4e.png)

这是我的固定 div 代码

```
 <script type="text/javascript">
function got_to_signup(){

    window.location.href = "view/policy";
    }

</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {

      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=368003049941951";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <div style="width:100%;background-color:#0094d6;"  >
    <div id="dd" style="background-color:#0094d6; width:100%; height:75px;position:fixed;  " class="center "><div id="a" style="width:1010px; height:75px; background-color:#000000;background:url(xx.png); background-repeat:no-repeat; font-family:Arial, Helvetica, sans-serif; font-size:11px; color:#003; " class="inner div_border">

      <table width="1010" border="0" >
        <tr >
          <td width="15%" rowspan="2"><a href="" style="cursor:pointer; cursor:hand;"><div style="width:200px; height:50px;background-color:none;"></div></a></td>
          <td width="22%" height="14">&nbsp;</td>
          <td width="5%">&nbsp;</td>
          <td width="5%">&nbsp;</td>
          <td width="28%">&nbsp;</td>
          <td width="2%">&nbsp;</td>
          <td width="23%">&nbsp;</td>
        </tr>
        <tr>
          <td colspan="4">

                </td>
          <td colspan="2"><span style="float: right; " ><div style="background-color:#006d9e;border-radius:3px; width:250px; height:34px; display: table;
    vertical-align: middle; color:#FFF; ">
            <table width="100%" border="0" >
              <tr >
                <td width="43%" style="text-align:center"> Start to bump !</td>
                <td width="29%"><div id='basic-modal'><span style="float: right; " ><input name="login_btn" type="button" class="login_button basic" id="login_btn" value="Sign in" /></span></div></td>
                <td width="28%"><span style="float: right; " ><form id="form_reg" method="post"><input name="register_btn" type="button" class="register_button" id="register_btn" value="Sign up" onclick="got_to_signup()"/></form></span></td>
                </tr>
              </table>
          </div></span></td>
          </tr>
        <tr>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td style="color:#FFF; font:Arial, Helvetica, sans-serif; font-size:9px; text-align:right;">    Beta Version   </td>
          </tr>
      </table>

    </div></div></div> 
```

这是我的 Facebook 按钮代码

```
</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=368003049941951";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

              <td height="21" colspan="2"> <table width="187" style="margin-left:3px;font-size:1px;background-image:url(share_back.png);background-repeat:no-repeat;border-radius:3px;" >
          <!--tweeter button-->
          <tr><td width="71"><a href="https://twitter.com/bump_lk" class="twitter-follow-button" data-show-count="false" style="float:right;">Follow @bump_lk</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>

    <!--facebook like button-->
          <td width="48"><div class="fb-like" data-href="https://www.facebook.com/Bump.lk" data-send="false" data-layout="button_count" data-width="10" data-show-faces="false" style="position:relative;"></div>
          </td></tr></table></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:13:11.917

```
script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=368003049941951";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

# c# - 为 GeckoFX 网络浏览器设置 cookie？

> ID：12440083
> 
> 赞同：2
> 
> 时间：2012-09-15T18:44:55.133
> 
> 标签：c#, .net, cookies, geckofx

您如何为 Gecko 网络浏览器设置 cookie？

我知道我必须打电话：

```
geckowebbrowser.Document.Cookie = ...; 
```

但您也需要全局设置 cookie。例如，在包含 Microsoft IE WebBrowserControl 的 .NET 中，您可以使用以下 Winapi 函数设置它们：

```
static extern bool InternetSetCookie(string lpszUrl, string lpszCookieName,
                                     string lpszCookieData); 
```

这适用于 IE Web 浏览器，但不适用于 Gecko。

我尝试通过调用 Cookiemanager.add(...) 来使用 Gecko 库中的 Cookiemanager 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T15:54:10.810

这对我使用 geckofx 浏览器 29.0 有效：

```
string cookieName = "testName";
string cookieValue = "testValue";
geckoBrowser.Document.Cookie = string.Format("{0}={1}; {2}", cookieName, cookieValue, mainBrowser.Document.Cookie); 
```

这会更新或创建 cookie。

# qt - 使用 Qt 时 OpenGL 模块的位置

> ID：12440085
> 
> 赞同：0
> 
> 时间：2012-09-15T18:45:15.737
> 
> 标签：qt, opengl

我是使用 OpenGL 和 Qt Creator 的新手，我一直在研究从各种教程中获得的信息。但是，我始终无法找出 OpenGL 函数定义的实际位置！

我在想，当我像这样将 opengl 模块链接到 qmake 文件时：

```
QT += core gui opengl 
```

OpenGL 的东西被包括在内，但是当我阅读 QGLWidget 时我又想到了。

那么 OpenGL API 在哪里包含在我的代码中？

PS 我的操作系统是 Windows 7，我的显卡是 AMD Radeon HD 6250 Graphics。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:54:33.790

QT 变量用于将 Qt 模块包含到您的项目中。通过添加 opengl，您添加了 Qt OpenGL 模块，其中包含使用 OpenGL 的 Qt 代码（以及指向它的链接）。如果“包含”是指链接，那么 Qt 的 OpenGL 模块 (libQtOpenGL.so) 会链接各种 OpenGL 库。此外，Qt 模块包括 Qt OpenGL 模块的头文件，而后者又包括 OpenGL 头文件。

OpenGL 头文件和 OpenGL 库位于您的操作系统保留的任何位置。你的项目知道这些在哪里，因为你的平台有 Qt mkspecs，不管它是什么。在 mkspecs 中，包含路径和链接路径已经包含在内。

例如，现在我在 Mac OS X 上，Qt mkspecs 安装在 /usr/local/Qt4.8/mkspecs 中。这里我有所有的平台描述，在 common 下你可以找到 mac.conf，这是我平台描述的一部分。在里面你可以看到：

```
QMAKE_INCDIR_OPENGL = /System/Library/Frameworks/OpenGL.framework/Headers \
    /System/Library/Frameworks/AGL.framework/Headers/ 
```

当要求 Qt Creator (qmake) 为任何应用程序生成 Makefile 时，将使用此信息。这样，您的应用程序就知道在哪里可以找到 OpenGL 的标头。仅当您添加 opengl 模块时，您的项目才会自动将其添加到包含路径中。

作为另一个示例，这是 Linux 平台定义的一部分：

```
...
QMAKE_INCDIR          =
QMAKE_LIBDIR          =
QMAKE_INCDIR_X11      = /usr/X11R6/include
QMAKE_LIBDIR_X11      = /usr/X11R6/lib
QMAKE_INCDIR_QT       = $$[QT_INSTALL_HEADERS]
QMAKE_LIBDIR_QT       = $$[QT_INSTALL_LIBS]
QMAKE_INCDIR_OPENGL   = /usr/X11R6/include
QMAKE_LIBDIR_OPENGL   = /usr/X11R6/lib
QMAKE_INCDIR_OPENGL_ES1 = $$QMAKE_INCDIR_OPENGL
QMAKE_LIBDIR_OPENGL_ES1 = $$QMAKE_LIBDIR_OPENGL
QMAKE_INCDIR_OPENGL_ES2 = $$QMAKE_INCDIR_OPENGL
QMAKE_LIBDIR_OPENGL_ES2 = $$QMAKE_LIBDIR_OPENGL
QMAKE_INCDIR_EGL      = 
QMAKE_LIBDIR_EGL      =
QMAKE_INCDIR_OPENVG   = 
QMAKE_LIBDIR_OPENVG   =
... 
```

我想你可以自己理解这意味着什么;-)

因此，回答您的问题：OpenGL 库的包含路径和链接路径包含在 Makefile 中，为您的应用程序生成，获取存储在系统某处的 mkspec 文件中的信息。实际的 OpenGL 头文件和库位于系统的默认位置，这与 Qt 本身无关。如果您直接使用 OpenGL 库，则可能需要在源代码中包含标头（或者您可能不需要，这取决于），但包含路径应​​该已经由您的 mkspec 文件提供。

编辑：看看添加 opengl 模块时会自动发生什么：这是 Qt Creator 用于编译没有 opengl 模块的 C++ 文件的命令行（在 Mac 上）：

```
g++ -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.8/mkspecs/macx-g++ -I../TextEdit -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtGui.framework/Versions/4/Headers -I/usr/include/QtGui -I/usr/include -I. -I. -I../TextEdit -I. -F/Library/Frameworks -o main.o ../TextEdit/main.cpp 
```

现在这是添加后发生的情况：

```
g++ -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W -DQT_OPENGL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.8/mkspecs/macx-g++ -I../TextEdit -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtGui.framework/Versions/4/Headers -I/usr/include/QtGui -I/Library/Frameworks/QtOpenGL.framework/Versions/4/Headers -I/usr/include/QtOpenGL -I/usr/include -I/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers -I/System/Library/Frameworks/AGL.framework/Headers -I. -I. -I../TextEdit -I. -F/Library/Frameworks -o main.o ../TextEdit/main.cpp 
```

您的项目已被告知在哪里寻找 OpenGL 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:56:59.943

Qt 不包含 OpenGL API 定义。它必须已经存在于操作系统中（通常与 GPU 驱动程序捆绑在一起）。

查找您的 gpu 驱动程序或操作系统文档的文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T18:59:53.287

尝试“GLEW”、“glut”、“GLU”和“GL”而不是“opengl”，我不确定它如何与 Qt Creator 一起使用，但这些是 opengl 的链接器标志。

# ruby-on-rails - Ruby on rails，带有在运行时提供的自定义标签的标记解释器？对于表单，而不是视图

> ID：12440087
> 
> 赞同：1
> 
> 时间：2012-09-15T18:45:32.910
> 
> 标签：ruby-on-rails, ruby, interpreter, markup

作者和读者的网站，这两个群体都是非技术用户（作者已经熟悉 BBCode，但我可以选择其他标记）。作者将使用标记标签编写指南以体现信息。读者将看到已解析的文本。标签将扩展到一些信息。

所需的标签数量以及与特定标签相关的信息将发生变化。所以它们不能被硬编码。

我正在为我的下一个 Ruby on rails 应用程序寻找任何可以使用***运行时提供的标签的解释器。***有谁知道这样的？

编辑：是的。我不是在寻找视图标记，而是在寻找网站用户使用的表单 textarea 标记（格式化他们的指南，但我确实需要一个标记来格式化和嵌入信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:10:59.913

根据我目前对您需求的理解，我推荐[mustache](https://github.com/defunkt/mustache)。这被描述为“无逻辑”模板处理器。它没有编程逻辑，只是运行时替换。

这是使用它的一种方法（来自 github 自述文件）

鉴于此模板 ( `winner.mustache`)：

```
Hello {{name}}
You have just won {{value}} bucks! 
```

我们可以随意填写数值：

```
view = Winner.new
view[:name] = 'George'
view[:value] = 100
view.render 
```

返回：

```
Hello George
You have just won 100 bucks! 
```

# android - 单击时Android ImageButton背景更改

> ID：12440088
> 
> 赞同：0
> 
> 时间：2012-09-15T18:45:43.993
> 
> 标签：android, imagebutton

我有一个具有透明背景和图像作为前景的图像按钮。我想要做的是当我按下按钮时让按钮闪烁。现在我不想为上下状态定义两个不同的图像，为什么我可以为背景和前景以及按钮的背景定义选择器颜色？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:14:18.260

您可以使用此代码为按钮的 diff-2 状态选择按钮的背景，将此文件保存在可绘制文件夹中并设置按钮背景。希望它对你有用...:)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true"
      android:drawable="@drawable/button_pressed" /> <!-- pressed -->
<item android:state_focused="true"
      android:drawable="@drawable/button_focused" /> <!-- focused -->
<item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

# ios - 取消 UIView 动画 - self.view.layer removeAllAnimations 不起作用

> ID：12440091
> 
> 赞同：9
> 
> 时间：2012-09-15T18:46:02.433
> 
> 标签：ios, cocoa-touch, uiview, core-animation

我有一个 UIView 动画正在进行，我需要在我的 iOS 应用程序中取消它。我试过这个：

```
[self.view.layer removeAllAnimations]; 
```

但它没有用。动画继续。这是我的动画代码：

```
[UIView animateWithDuration:1.4 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
recognizer.view.transform = CGAffineTransformTranslate(recognizer.view.transform, translation.x, translation.y);
} completion:^(BOOL finished) {

            NSLog(@"completed animation, now do whatever");
        }]; 
```

有人对它为什么不起作用有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T20:30:59.040

您正在将该动画添加到识别器的视图中，因此您必须将其从同一视图的图层中删除。

所以而不是

```
[self.view.layer removeAllAnimations]; 
```

你可能想要

```
[recognizer.view.layer removeAllAnimations]; 
```

为了保持转换的当前状态，从表示层获取那个。表示层是实际反映动画期间变化的层。

```
recognizer.view.layer.transform = recognizer.view.layer.presentationLayer.transform; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T09:19:33.720

好的 - 刚刚想通了。将动画组件 beng 从图像视图顶部的手势识别器更改为图像视图本身。现在，就在停止动画的代码之前，我有：

```
 truckView.frame = [[trackView.layer presentationLayer] frame];
 [truckView.layer removeAllAnimations]; 
```

所以这就是做到这一点的方法。感谢您的帮助，使我得到了这个答案，

山姆

# javascript - 如何中断nodejs中的超时长时间运行方法？

> ID：12440094
> 
> 赞同：2
> 
> 时间：2012-09-15T18:46:27.427
> 
> 标签：javascript, multithreading, node.js, asynchronous, timeout

使用具有内置线程支持的语言这似乎是一项相当容易的任务，但是，

有没有办法终止/超时一个长时间运行的方法/无限递归方法？

例如，如果我有一个将回调作为参数的 api，并在调用之前和之后进行一些处理并返回结果。

```
function api(data,callback) {
  processedData = before(data);
  result = callback(processedData);
  processedResult = after(result);
  return processedResult;
} 
```

如果臭名昭著的开发人员使用以下回调调用此 api

```
function cpuFrenzy(data) {
  while(true);
} 

result = api( {} , cpuFrenzy);
render(result); 
```

api 的结果用于渲染 HTML。

Node js 是单线程的会阻塞所有对服务器的请求！

那么如果超过预设时间，api有什么办法可以超时/终止回调方法的执行，以避免阻塞所有的网络请求？

如果没有，还有其他方法可以实现这个 api 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:43:07.303

检查tripwire：[https ://github.com/tjanczuk/tripwire](https://github.com/tjanczuk/tripwire)

# java - Netbeans/Tomcat/Jersey 两次加载 Spring 上下文

> ID：12440099
> 
> 赞同：3
> 
> 时间：2012-09-15T18:46:52.253
> 
> 标签：java, spring, tomcat, netbeans, jersey

在 Netbeans 中调试并部署到 Netbean 的 Tomcat 服务器的 Jersey/Spring 应用程序将其应用程序上下文加载两次。它被加载、卸载并再次加载。

血腥为什么？！？！

编辑：看起来如果我注释掉 web.xml 中的 servlet 和 servlet-mapping，应用程序上下文仍然加载了两次！如果我删除 /conf/web.xml 文件，它仍然会加载两次。#@@$@！Netbeans/Tomcat

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<servlet>
    <servlet-name>ServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
        <param-value>com.sun.jersey.api.container.filter.PostReplaceFilter</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>ServletAdaptor</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
</web-app> 
```

雄猫输出：

```
Using CATALINA_BASE:   "C:\Users\adubi_000\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.27.0_base"
Using CATALINA_HOME:   "C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.27"
Using CATALINA_TMPDIR: "C:\Users\adubi_000\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.27.0_base\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.7.0_07"
Using CLASSPATH:       "C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.27\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.27\bin\tomcat-juli.jar"
Listening for transport dt_shmem at address: tomcat_shared_memory_id
Sep 15, 2012 9:19:22 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path:
Sep 15, 2012 9:19:22 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-80"]
Sep 15, 2012 9:19:22 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Sep 15, 2012 9:19:22 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 821 ms
Sep 15, 2012 9:19:22 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Sep 15, 2012 9:19:22 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Sep 15, 2012 9:19:22 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\adubi_000\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.27.0_base\conf\Catalina\localhost\manager.xml
Sep 15, 2012 9:19:23 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\adubi_000\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.27.0_base\conf\Catalina\localhost\ROOT.xml
Sep 15, 2012 9:19:26 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
Sep 15, 2012 9:19:26 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Sat Sep 15 21:19:26 EST 2012]; root of context hierarchy
Sep 15, 2012 9:19:26 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
Sep 15, 2012 9:19:27 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2829abfd: defining beans [...]; root of factory hierarchy
Sep 15, 2012 9:19:28 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Sep 15, 2012 9:19:28 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.6.Final}
Sep 15, 2012 9:19:28 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Sep 15, 2012 9:19:28 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Sep 15, 2012 9:19:28 PM org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
Sep 15, 2012 9:19:28 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH010002: C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://127.0.0.1:3306/...
Sep 15, 2012 9:19:28 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000046: Connection properties: {user=root, autocommit=true, release_mode=auto}
Sep 15, 2012 9:19:28 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000006: Autocommit mode: true
Sep 15, 2012 9:19:28 PM com.mchange.v2.log.MLog <clinit>
INFO: MLog clients using java 1.4+ standard logging.
Sep 15, 2012 9:19:28 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]
Sep 15, 2012 9:19:29 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool...
Sep 15, 2012 9:19:29 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
Sep 15, 2012 9:19:29 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
Sep 15, 2012 9:19:29 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
Sep 15, 2012 9:19:29 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Sep 15, 2012 9:19:29 PM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000228: Running hbm2ddl schema update
...
Sep 15, 2012 9:19:31 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 4806 ms
Sep 15, 2012 9:19:31 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-80"]
Sep 15, 2012 9:19:31 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Sep 15, 2012 9:19:31 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 8866 ms
Sep 15, 2012 9:19:31 PM com.sun.jersey.spi.spring.container.servlet.SpringServlet getContext
INFO: Using default applicationContext
Sep 15, 2012 9:19:31 PM com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, ...
Sep 15, 2012 9:19:31 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.13 06/29/2012 05:14 PM'
Sep 15, 2012 9:19:32 PM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Sat Sep 15 21:19:26 EST 2012]; root of context hierarchy
Sep 15, 2012 9:19:32 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2829abfd: defining beans [...]; root of factory hierarchy
Sep 15, 2012 9:19:32 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Sep 15, 2012 9:19:32 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak.
Sep 15, 2012 9:19:32 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [java-sdk-http-connection-reaper] but has failed to stop it. This is very likely to create a memory leak.
Sep 15, 2012 9:19:32 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [] created a ThreadLocal with key of type [com.sun.xml.bind.v2.ClassFactory$1] (value [com.sun.xml.bind.v2.ClassFactory$1@911a094]) and a value of type [java.util.WeakHashMap] (value [{class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@64455932}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Sep 15, 2012 9:19:33 PM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context []
Sep 15, 2012 9:19:33 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\adubi_000\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.27.0_base\conf\Catalina\localhost\ROOT.xml
Sep 15, 2012 9:19:36 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
Sep 15, 2012 9:19:36 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Sat Sep 15 21:19:36 EST 2012]; root of context hierarchy
Sep 15, 2012 9:19:36 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
Sep 15, 2012 9:19:37 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6b63d42f: defining beans [...]; root of factory hierarchy
Sep 15, 2012 9:19:37 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Sep 15, 2012 9:19:37 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.6.Final}
Sep 15, 2012 9:19:37 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Sep 15, 2012 9:19:37 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Sep 15, 2012 9:19:38 PM org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
Sep 15, 2012 9:19:38 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH010002: C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://127.0.0.1:3306/....
Sep 15, 2012 9:19:38 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000046: Connection properties: {user=root, autocommit=true, release_mode=auto}
Sep 15, 2012 9:19:38 PM org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000006: Autocommit mode: true
Sep 15, 2012 9:19:38 PM com.mchange.v2.log.MLog <clinit>
INFO: MLog clients using java 1.4+ standard logging.
Sep 15, 2012 9:19:38 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]
Sep 15, 2012 9:19:38 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... 
Sep 15, 2012 9:19:38 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
Sep 15, 2012 9:19:38 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
Sep 15, 2012 9:19:38 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
Sep 15, 2012 9:19:38 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Sep 15, 2012 9:19:39 PM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000228: Running hbm2ddl schema update
...
Sep 15, 2012 9:19:40 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 4264 ms
Sep 15, 2012 9:19:40 PM org.apache.catalina.util.LifecycleBase start
INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]] after start() had already been called. The second call will be ignored.
Sep 15, 2012 9:19:41 PM com.sun.jersey.spi.spring.container.servlet.SpringServlet getContext
INFO: Using default applicationContext
Sep 15, 2012 9:19:41 PM com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, ...
Sep 15, 2012 9:19:41 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.13 06/29/2012 05:14 PM' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:34:10.543

这是 Netbean 的 maven deploy 插件的工作，它等待 tomcat 启动（并加载 Netbeans 生成的 ROOT.xml 中指定的应用程序）然后告诉它重新加载它（从不同的临时 XML）。

一种解决方法是编辑 %CATALINA_BASE%/conf/tomcat-users.xml 并更改用户 'ide' 的密码（netbeans 通过该密码控制 tomcat）。Tomcat 仍然可以正常加载，但保存时部署和其他功能可能无法正常工作。

我将尝试查看 netbeans 的源代码，看看是否有更好的解决方案可用。部署插件的这种行为很奇怪。当然它可以启动 Tomcat 为空，然后像在第二步中那样加载应用程序。

# javascript - 在 Firefox 扩展覆盖中更改 Javascript

> ID：12440106
> 
> 赞同：1
> 
> 时间：2012-09-15T18:48:09.103
> 
> 标签：javascript, firefox, firefox-addon, dom-events, xul

我为 Firefox 编写了一个带有覆盖的扩展。

当我单击主要按钮时，扩展加载`entconnect.entImmediat`，但是当我单击“Changez vos identifiants”时，扩展加载`entconnect.openLogs`AND `entconnect.entImmediat`。当我单击“Changez vos identifiants”时，我该怎么做才能加载 entconnect.openLogs？这是我的叠加层代码：

```
<overlay id="entconnect-overlay" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<script src="chrome://entconnect/content/entconnect.js"/>
<toolbarpalette id="BrowserToolbarPalette">
    <toolbarbutton class="toolbarbutton-1 chromeclass-toolbar-additional" id="entconnect-addbar" label="Allez sur votre ENT" type="menu-button" oncommand="entconnect.entImmediat();">
        <menupopup>
            <menuitem label="Changez vos identifiants" oncommand="entconnect.openLogs();"/>
        </menupopup>                             
    </toolbarbutton>
</toolbarpalette>
</overlay> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:21:36.947

命令事件冒泡意味着它将被 DOM 层次结构中更上层的事件处理程序接收。如果您已经处理了它，则可以[防止事件进一步冒泡：](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

```
oncommand="entconnect.openLogs();event.stopPropagation();" 
```

或者您可以查看[事件目标](https://developer.mozilla.org/en-US/docs/DOM/event.target)：

```
oncommand="if (event.target.localName != 'menuitem') entconnect.entImmediat();" 
```

或者您可以只处理[在当前元素触发](https://developer.mozilla.org/en-US/docs/DOM/event.eventPhase)的事件：

```
oncommand="if (event.eventPhase == event.AT_TARGET) entconnect.entImmediat();" 
```

# c# - 网站和移动应用程序的会员系统

> ID：12440107
> 
> 赞同：1
> 
> 时间：2012-09-15T18:49:12.807
> 
> 标签：c#, android, .net, wcf, asp.net-membership

我目前正在开展一个项目，该项目将拥有一个用于移动设备的网站和应用程序。我将需要一种方法让用户登录到我的网站以查看某些区域。我知道我将需要构建一个 WCF RESTful 服务，但我被困在如何继续创建用户上。我最初打算使用内置的 .NET Membership，但我读的越多，如果我有很多用户，它听起来就越糟糕。然后我正在考虑构建一个新的提供程序，它可以为我提供内置 .NET 成员资格的所有功能，但我可以更好地控制一切。最后一个想法是构建一个完整的会员系统，但我担心我会失去内置 .NET 会员系统的功能。我基本上只是在寻找有人指出我正确的方向并解释原因。

现在我认为处理这个问题的最好方法是建立一个完整的会员系统。我想我将通过我的网站将调用的后端的 WCF 以及 RESTful 服务将调用我的数据访问。我现在不知道可以通过 WCF 对用户用户名和密码进行身份验证的方法。

感谢您的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:21:28.857

我们在我们的几个项目中都这样做了，这里是我们如何完成它的总结。请记住，这只是一种方法，我们也成功地编写了自己的会员提供程序。

我们有3个主要项目：

1.  Data.project - 类库
2.  WebApp.project - MVC 应用程序
3.  API.project - WCF 服务

我们使用内置的 .NET 成员资格提供程序，因为它开箱即用。这为我们提供了 MVC 和 API 项目中的基本注册、密码更改、角色管理以及基于简单控制器的角色权限和访问控制。

默认成员资格提供程序将使用其自己的表来存储用户数据。

然后，我们创建自己的用户和配置文件表和数据结构，外键返回用户的 .NET 会员身份。这使我们能够灵活地执行我们需要对用户配置文件执行的所有应用程序特定的事情，同时仍然允许我们访问默认提供程序。

身份验证在 MVC 项目中很简单，您现在可以使用 .NET Membership 方法通过用户名和密码进行身份验证：

```
if(Membership.ValidateUser(username,password)){
    FormsAuthentication.SetAuthCookie(username,password);
} 
```

对于 WCF 项目，您没有 FormsAuthentication 的奢侈，但您仍然可以使用默认成员资格提供程序来验证用户凭据。

之后如何处理身份验证取决于您和您的项目，但对于基本需求，我们通常使用 WCF 服务在验证后返回的身份验证令牌。然后，此令牌包含在每个 WCF 请求中，以证明它们已经过验证，通常在请求标头中。

对于 WCF，我们在将凭据提交到服务器时对用户名和密码进行 base 64 编码，然后如果成功，我们将传回身份验证令牌：

```
string decoded = System.Text.Encoding.UTF8.GetString(System.Convert.FromBase64String(Authmodel));
//convert your string into your authentication model here then
if(Membership.ValidateUser(model.user,model.pass))
{
    //return new authentication token
} 
```

我们还包括在注册期间构建我们专有的用户和配置文件表的附加逻辑，这是在数据项目中处理的，以便 WCF 和 MVC 都可以访问它。

此外，数据项目处理我们的用户和配置文件表以及 .NET 成员资格提供程序表之间的链接，因此两个应用程序都可以访问这些信息。

我意识到这一切都非常模糊，但也许它可以帮助您想到一种以统一方式处理身份验证的选项。如果您对特定部分有疑问，请告诉我，我希望这些信息对您有用。

# php - IE中的Flash urlrequest相对路径

> ID：12440109
> 
> 赞同：0
> 
> 时间：2012-09-15T18:49:53.350
> 
> 标签：php, actionscript-3, flash, internet-explorer

我正在制作一个用于上传文件的小型 Flash 脚本。我有：

flash/flash.swf

索引.html

上传.php

我的问题是，当我想调用 urlrequest 时，我会执行 req.url = '../upload.php'。这适用于 Firefox，但不适用于 IE (IE 9)。所以firefox好像需要upload.php到flash.swf的相对路径，而IE好像需要upload.php的相对路径尊重index.html。

这个问题有跨浏览器解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:27:38.577

您需要指示从顶部目录树中查找上传脚本。

因此，您必须使用“ **/upload.php** ”而不是“../upload.php ”。

据我了解，您的文件系统如下所示：

> **index.html**（嵌入 SWF 文件的文件）
> 
> **上传.php**
> 
> **你的子目录/youruploader.swf**

这就是为什么您使用“../uploader.php”认为 SWF 必须从其驻留文件夹外部提取上传脚本的原因。

但你不需要这样做。

* * *

如果您当前在 localhost 中工作，并且您的文件位于子文件夹中，如下例所示：

**http://localhost/myuploader/**

然后你必须使用“ **/myuploader/upload.php** ”。

否则，如果它们位于根目录中，那么“ **/upload.php** ”对于 FF 和 IE 仍然有效。

# java - 如何从给定的 WEEK_OF_YEAR、DAY_OF_WEEK、YEAR 获取 Calendar.MONTH

> ID：12440112
> 
> 赞同：2
> 
> 时间：2012-09-15T18:50:20.213
> 
> 标签：java, calendar

知道年、年的周和周的日，就可以得到年的月和月的日。例如

```
 // corresponding to September 15, 2012 if week starts on Monday
 int weekNum = 38;
 int dayNum = 6;
 int year = 2012;

 // set the calendar instance the a week of year and day in the future
  Calendar aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
 aGMTCalendar.setFirstDayOfWeek(Calendar.MONDAY);    
 aGMTCalendar.set(Calendar.WEEK_OF_YEAR,weekNum ); 
 aGMTCalendar.set(Calendar.DAY_OF_WEEK,dayNum );
 aGMTCalendar.set(Calendar.YEAR,year);

// get the month and day of month
 int   monthGMT = aGMTCalendar.get(Calendar.MONTH + 1); // returns 38  not 9

 int   dayOfMonthNumGMT = aGMTCalendar.get(Calendar.DAY_OF_MONTH); 
 // returns 14 but I wanted 15 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:53:45.470

这应该是

```
// +1 to the value of month returned, not to the value of MONTH constant.
int monthGMT = aGMTCalendar.get(Calendar.MONTH) + 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:59:11.003

您获得的方式`monthGMT`有一个类型。它应该是：

```
int monthGMT = aGMTCalendar.get(Calendar.MONTH) + 1; 
```

每次`aGMTCalendar.set()`调用后在下面输入一行，您会看到在调用该行后`dayNum`，日期从 15 变为 14。`aGMTCalendar.set(Calendar.DAY_OF_WEEK, dayNum)`忽略`setFirstDayOfWeek`，但是在设置 时会考虑这一点`WEEK_OF_YEAR`。

```
System.out.println(aGMTCalendar.getTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:14:36.683

```
 // corresponding to September 15, 2012 if week starts on Monday
 int weekNum = 38;
 int dayNum = 6;
 int year = 2012;

  // set the calendar instance the a week of year and day in the future
  Calendar aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
 aGMTCalendar.setFirstDayOfWeek(Calendar.MONDAY);    
 aGMTCalendar.set(Calendar.WEEK_OF_YEAR,weekNum ); 
 aGMTCalendar.set(Calendar.DAY_OF_WEEK,dayNum );
 aGMTCalendar.set(Calendar.YEAR,year);

 // get the month and day of month
 int   monthGMT = aGMTCalendar.get(Calendar.MONTH) + 1; 
 // should be 10
 int   dayOfMonthNumGMT = aGMTCalendar.get(Calendar.DAY_OF_MONTH) + 1; 
 // should be 15 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T19:12:35.903

尝试`Calendar.SATURDAY`常量而不是`6`文字。

`Calendar.SATURDAY`其实`7`不是`6`。

# regex - 正则表达式 RewriteCond 不匹配

> ID：12440113
> 
> 赞同：1
> 
> 时间：2012-09-15T18:50:24.917
> 
> 标签：regex, .htaccess, url-rewriting

我在一个`.htaccess`文件中有这些行：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} ^(.*/|)(en|de|fr)(/.*|)$ [NC]
#RewriteCond %1%3.php -f
RewriteRule ^(.*/|)(en|de|fr)(/.*?)/?$ $1$3.php?lang=$2 [NC,QSA,L] 
```

第三行（注释）不起作用。其他一切都很好。谁能指出我这里出了什么问题？RewriteRule 工作得很好，即文件`$1$3.php`存在并且正确显示。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:05:11.087

*这只是一个合格的猜测*

第三行不存在正则表达式值 - 您不能在另一个中使用捕获的值`RewriteCond`（例如`$1$3`，或如您的示例中所写的：） 。您只能在.`%1%3``RewriteCond``$n``RewriteRule`

另一方面，我不明白你为什么需要第三行。您是说仅在存在时才应应用重写，如果文件不存在`$1$3.php`，您是否还有其他被激活的重写规则？`$1$3.php`

# php - 通过复选框将数组发送到 $_POST

> ID：12440115
> 
> 赞同：-1
> 
> 时间：2012-09-15T18:50:33.300
> 
> 标签：php, post, global-variables

在我的朋友服务器上测试我的 php 代码时，我遇到了问题。（它在我的本地服务器上运行良好）。

有一个包含`checkbox`输入的表单，例如

提交表格时：

1.  在我的服务器中： print_r($_POST) 打印：
    `Array ( [names] => Array ( [0] => john [1] => sam ) )`
2.  在他的服务器中： print_r($_POST) 打印：
    `Array ( [names] => Array )`

并且`Array`是字符串而不是数组！

他的php版本是`5.2.17`

```
<form method="post">
john <input type="checkbox" name="names[]" value="john"/>
sam <input type="checkbox" name="names[]" value="sam"/>
moh <input type="checkbox" name="names[]" value="moh"/>
<input type="submit"/>
</form>
<?php 
print_r($_POST);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:19:02.557

从第一篇文章的评论来看，答案是：

你这样做是错误的：`$_POST = array_map('stripslashes',$_POST);`

这正是这个问题的原因，`stripslashes`在每个元素上使用`$_POST`是磨损的，`stripslashes`适用于字符串并且字符串中的数组等于“Array”，因此函数正在将你的数组转换为`"Array"`，你应该编写一个自定义函数并检查如果元素不是数组，则使用stripslashes，或者再次使用array_map，如下所示：

```
<?php

function stripslashes_custom($value){
    if(is_array($value)){
        return array_map('stripslashes_custom', $value);
    }else{
        return stripslashes($value);
    }
}

$_POST = array_map('stripslashes_custom', $_POST);

?> 
```

stripslashes 函数的数组输入结果不同的原因可能是由于不同的 php 版本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:56:04.073

如您所知，您无法更改`magic_quotes_gpc`. `ini_set()`如果`magic_quotes_gpc`在 php.ini 中是，则`Off`下面的代码将被跳过，因为不需要 stripslashing。否则对于`magic_quotes_gpc = On`，此函数将递归执行，以去除数组中的所有字符串，而不是使用`array_map()`.

我已经使用 PHP 5.2.17 (mode `On`) 和 5.3.10 (mode `Off`) 对其进行了测试。

所以在这里我们使用那个简单的代码：

```
<?php

function stripslashesIterator($POST){
    if ($POST){
        if (is_array($POST)){
            foreach($POST as $key=>$value){
                $POST[$key]=stripslashesIterator($POST[$key]);
            }
        }else{
            return stripslashes($POST);
        }
        return $POST;
    }
}

//Init $_POST, $_GET or $_COOKIE
if (function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc() === 1){
    $_POST=stripslashesIterator($_POST);
}

?> 
```

# javascript - 使用 JQueryMobile 和 PhoneGap 修改预加载页面

> ID：12440118
> 
> 赞同：0
> 
> 时间：2012-09-15T18:51:05.370
> 
> 标签：javascript, html, cordova, jquery-mobile

我正在用 jqm 和 phonegap 开发一个应用程序。该应用程序由多个 html 页面组成，这些页面将根据从 Web 服务器返回的信息进行更新。

我最初的计划是在应用程序第一次加载时从 Web 服务器检索所有信息并预先填充其他 html 页面，这样用户在每个页面之间导航时就不必等待联系服务器。

```
function onDeviceReady() {

// pre-fetch pages so we can setup the main pages before the user gets to them
$.mobile.loadPage( "page2.html", { showLoadMsg: false } );
$.mobile.loadPage( "page3.html", { showLoadMsg: false } );

// Return JSON from php web server
    ....

// id of div on page2.html - update based on information returned from web server
$("#page2MainDiv").append('<p>hello!!!</p>'); 
```

}

我有两个问题：

1）上面的代码不起作用......我没有收到任何错误，但 html 没有更新 - 我看不出我哪里出错了，这让我发疯了！

2）这是一种明智的方法吗？由于我是移动和 Web 开发的新手，我不确定是否有更好的方法。

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:58:38.710

Try to make it easier. Instead of javascript, you may use simple "data-prefetch" attribute to links. Try to read this: [JQuery Mobile Cahce & Prefetch](http://jquerymobile.com/test/docs/pages/page-cache.html). Loading pages may be a good idea, if you don't have a lot of data and subpages. Usually you don't know what subpage will user choose, or if he will choose any. In this case loading most, or even all data may be pointless. Again, if your app is small and does not require lot of data, you may use your approch. However I don't suggest it and don't use it in my apps. Loading data may be also expensive for the user, remember about this.

# php - PHP获取mysql表信息函数

> ID：12440119
> 
> 赞同：2
> 
> 时间：2012-09-15T18:51:10.340
> 
> 标签：php, mysql, mysqli

我正在制作一个 PHP 函数来返回一个 mysql 数据库表信息的数组。我是 php 编码的新手，我正在寻找更有效的方法来做同样的事情，因为我的方法似乎不是很有效。这是使用 mysql join 语句的好地方吗？

这是我的功能。

```
public static function getAllTables()
{
    // Get an array of all the tables in the database
    $sql = "SHOW TABLES";

    //this makes a connection to mysql database using mysqli
    $mysqlConnection = new CMySqlConnection(); 
    $result = $mysqlConnection->mysqli->query($sql);
    $tablesArray = array();
    while($row = $result->fetch_row()) {

        $tablesArray[$row[0]]=array();

    }

    $result->close();

    //Get an array of all the table names in database
    $arrayKeys = array_keys($tablesArray);

    //foreach table get the column's info
    foreach($arrayKeys as $key){ 
        $sql="  SHOW COLUMNS from " . $key;
        $result = $mysqlConnection->mysqli->query($sql);
        for($i = 0; $row = $result->fetch_row(); $i++) {

            //format the array to use a descriptive key rather than a number
            $row['columnName'] = $row[0];
            $row['type'] = $row[1];
            $row['null'] = $row[2];
            $row['key'] = $row[3];
            $row['default'] = $row[4];
            $row['extra'] = $row[5];

            unset($row[0]);
            unset($row[1]);
            unset($row[2]);
            unset($row[3]);
            unset($row[4]);
            unset($row[5]);

            // put the column info into the tables array
            $tablesArray[$key][$i] = $row;
        }
        $result->close();
    }

    $mysqlConnection->Disconnect();

    // return the tables array
    return $tablesArray;
} 
```

感谢您的任何输入:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:54:24.420

您可以只查询 INFORMATION_SCHEMA。它们是包含有关数据库信息的虚拟表：http: [//dev.mysql.com/doc/refman/5.5/en/information-schema.html](http://dev.mysql.com/doc/refman/5.5/en/information-schema.html)

```
SELECT TABLE_SCHEMA, TABLE_NAME FROM INFORMATION_SCHEMA.TABLES;

SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA='schema' AND TABLE_NAME='table'; 
```

# ios - sd-toolkit sdk 用于 iPhone 上的条码扫描，它适用于相机吗？

> ID：12440128
> 
> 赞同：1
> 
> 时间：2012-09-15T18:52:41.293
> 
> 标签：ios, xcode, sdk

就像问题说的那样，你可以用相机扫描条形码吗？或者您是否必须在手机中的图像上有条形码？

# ruby-on-rails - ruby on rails if 语句总是返回 true

> ID：12440131
> 
> 赞同：0
> 
> 时间：2012-09-15T18:53:14.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller, conditional

**控制器代码：**

```
 def create

    if current_user.id != params[:friend_id]
      @return = { :curr_user_id => current_user.id, :params_id => params[:friend_id], :debug => 1 }
    else
      @return = { :curr_user_id => current_user.id, :params_id => params[:friend_id], :debug => 2 }
    end

    render :json => ActiveSupport::JSON.encode( @return )

  end 
```

所以`current_user.id`是**1**并且`params[:friend_id]`是通过 ajax 调用传递的，它的值也是**1**

问题是在这种情况下它应该返回 false 时它总是返回 true ......有什么与数字 1 被解析为字符串而不是整数有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T18:58:50.427

参数**总是**字符串，使用：

```
if current_user.id != Integer(params[:friend_id]) 
```

我不推荐`to_i`，看看为什么：

```
"abc".to_i     # => 0 which is unexpected
Integer("abc") # => raises error, which is fine 
```

# java - 哈希映射键值对的选择性和特定打印

> ID：12440137
> 
> 赞同：0
> 
> 时间：2012-09-15T18:53:44.883
> 
> 标签：java

在编写测试自动化时，我需要利用开发人员提供的 api，这些 api 接受 HashMap 作为参数。测试代码涉及到调用几个这样的api，以hashmap为参数，如下所示。

```
 Map<String,String> testMap = new HashMap<String,String>();

setName()
{
   testMap.put("firstName","James");
   testMap.put("lastName","Bond");
   String fullName=devApi1.submitMap(testMap);
   testMap.put("realName",fullName);
}

setAddress()
{
  testMap.put("city","London");
  testMap.put("country","Britain");
  testMap.put("studio","Hollywood");
  testMap.put("firstName","");
  testMap.put("person",myMap.get("realName"));
  devApi2.submitMap(testMap);
} 
```

然而，要求是在 setName 和 setAddress 函数中打印 testMap，但映射应该只打印在相应函数中设置的交替行中的那些元素（键值对）。我的意思是 setName 应该打印在调用 submitMap api 之前设置的 Map 中的 2 个元素，同样 setAddress 应该打印在调用 submitMap 之前设置的 5 个元素。

setName 输出必须是：

```
 The data used for firstName is James. 
  The data used for lastName is Bond 
```

setAddress 输出必须是：

```
 The data used for city is London.
 The data used for country is Britain.
 The data used for studio is Hollywood.
 The data used for firstName is null.
The data used for person is James Bond 
```

任何帮助，以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:33:57.320

从您对我之前的回答的评论来看，您似乎不希望从一种方法中放置的值显示在第二种方法中......

这可以很容易地完成，只需放置：

```
testMap.clear(); 
```

在每个方法的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:15:06.540

您最好`testMap`在调用该`submitMap`方法时创建您的副本，因为您没有标志来指示应打印哪些键值对。

你可以这样做

```
Map<String, String> printObj = new HashMap<String, String>

setName()
{
   testMap.put("firstName","James");
   testMap.put("lastName","Bond");
   String fullName=devApi1.submitMap(testMap);
   printObj.addAll(testMap);
   testMap.put("realName",fullName);
} 
```

然后打印`printObj`而不是`testMap`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:00:15.527

我将创建一个以**逗号分隔**的键列表作为参数并仅打印它们的方法。

就像是：

```
 public void printKeys(Map<String,String> map, String csKeys) {

      for(String key: csKeys.split(",")){
           if(map.conatinsKey(key)){
               System.out.println("The data used for " + key + " is " + map.get(key) );
           }
      }
 } 
```

你可以像这样调用它：

```
printKeys(testMap, "firstName,lastName");
printKeys(testMap, "city,country,studio"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:55:38.260

我可能会编写一个辅助函数，将项目添加到地图并进行打印。

```
public static <K,V> void add(Map<K,V> map, K key, V value){
  System.out.println(String.format("The data used for \"%s\" is \"%s\"", key, value));
  map.put(key, value);
} 
```

如果您需要打印不同的消息，您可以使用不同的辅助函数或将格式字符串作为参数传递。

# javascript - 此脚本在 WordPress 中不起作用

> ID：12440141
> 
> 赞同：0
> 
> 时间：2012-09-15T18:54:07.993
> 
> 标签：javascript, jquery, wordpress

我试图让下面的代码在 WordPress 中工作，但我无法让它工作。表单显示正确，但选择不同的选项无济于事。我不知道如何让 jQuery 工作。[代码本身确实有效。](http://jsfiddle.net/2yEcm/)在此先感谢您的帮助！

```
<style type="text/css">
.hide {
     display: none;
}
</style>
<script type="text/javascript" src="files/jquery-1.8.1.js"></script>
<script type="text/javascript">
var $j = jQuery.noConflict();

$j("#choices").change(function(){
   $j('.hide').slideUp();
   $j('#'+this.value).slideDown()
});
</script>
<form>
<select id="choices">
        <option value="none">Select an option...</option>
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
    <option value="option3">Option 3</option>
        <option value="option4">Option 4</option>
        <option value="option5">Option 5</option>
        <option value="option6">Option 6</option>
        <option value="option7">Option 7</option>
</select>
</form>
<div id="option1" class="hide">Option 1 TEXT</div>
<div id="option2" class="hide">Option 2 TEXT</div>
<div id="option3" class="hide">Option 3 TEXT</div>
<div id="option4" class="hide">Option 4 TEXT</div>
<div id="option5" class="hide">Option 5 TEXT</div>
<div id="option6" class="hide">Option 6 TEXT</div>
<div id="option7" class="hide">Option 7 TEXT</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:05:09.903

两个流行的警告。

*   执行脚本时 DOM 尚未准备好

    ```
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
     $j("#choices").change(function(){
        $j('.hide').slideUp();
        $j('#'+this.value).slideDown()
     });
    }) 
    ```

*   您的 ID 可能会被使用两次。将 ID 更改为 HTML 和 JS 中的类。检查与

    ```
    console.log( $j("#choices") ) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T19:07:46.563

此外，[将 JavaScript 添加到 WordPress 生成的页面的安全且推荐的方法是使用 wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T19:05:01.997

试试这个：

```
<script type="text/javascript">
    var $j = jQuery.noConflict();

    $j(document).ready(function() {
        $j("#choices").change(function(){
           $j('.hide').slideUp();
           $j('#'+this.value).slideDown()
        });
    });
</script> 
```

这将确保 jQuery 代码在 DOM 准备好之前不会执行。

# matlab - 在每一列和每一行中找到最大值

> ID：12440146
> 
> 赞同：0
> 
> 时间：2012-09-15T18:54:28.887
> 
> 标签：matlab

假设你有一个二维矩阵，在 excel 或 matlab 中是否有特定的算法或方法可以找到每一行**和**每一列的最大值，这样每一列和每一行只有一个最大数 N，其中对所有 N 求和将导致最大可能的总和，即行或列是否具有重复的最大数量。例如下面的简单示例

```
1 2 4          
3 1 4         
1 2 4 
```

输出将是

1 2 **4**

**3** 2 4

1 **2** 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:47:56.610

您正在（完整）图中寻找最大二分匹配，其中您的矩阵表示边权重矩阵。[您可以使用匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)计算此值（MATLAB 实现可[从 File Exchange 下载](http://www.mathworks.com/matlabcentral/fileexchange/11609-hungarian-algorithm)）。由于您想要最大匹配，因此将矩阵中的所有数字取反并将其提供给此函数。您将返回两个输出 - 一个是最大和的（负数），另一个是二进制矩阵，其中最大元素出现在每一行和每一列中，其他任何地方都为零。

# java - Java中的ascii char表示？

> ID：12440147
> 
> 赞同：0
> 
> 时间：2012-09-15T18:54:37.137
> 
> 标签：java

如果我使用单个 int 来表示 ascii 字符集，如何使用它来减少 8 倍的存储空间？与 256 个布尔值的数组相比？单个 int 也像位向量一样工作。

java中的布尔值将占用1位，因为它只能表示真或假值。例如，如果我有一个布尔值数组。boolean[] char_set = new boolean[256] 这将占用 256 位对吗？我正在阅读，如果我使用像位向量这样的单个 int，这意味着我可以使用 32 位来覆盖 256 个值。我想这是减少了 8 倍。但是为什么下面的代码有效？

它正在检查字符串中是否有任何重复项。他们假设一个 ascii 字符集。Str 是一些字符串。

```
int checker = 0;
for(int i=0;i<str.length();i++)
{
  int val = str.charAt(i) - 'a';
  if(checker& (1<<val)) > 0)
  {
     return false;
  }
  checker |= (1<<val);
}
  return true;
} 
```

有人可以特别解释一下在这种情况下位向量逻辑是如何工作的。他们假设字符串包含小写字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:14:07.090

An`int`是 32 位，而不是 256 位。仅代表一组 256 个可能的项目是不够的。你需要8个。我不确定你的意思是你只能使用 32 位。

目前还不清楚你在循环什么——什么是`str`？从 0 到 255 的所有 256 个值？我很怀疑，因为你在减去`'a'`。您的值域是否只有 32 个可能的字符？然后确定你可以使用32位。但是 256 是从哪里来的呢？

您的掩码条件需要`!= 0`适用于最高位集。

*（A`boolean`的“真实”大小对 Java 程序员来说是不透明的。实际上，您会发现它不是 1 位（机器不是可位寻址的），甚至不是 1 字节。Java 实际上使用了整个 32 位词。但这与您的问题并没有真正的关系。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:20:19.937

这段代码所做的只是“标记”一点以表示字符的存在。
在你的情况下：`int val = str.charAt(i) - 'a';`。如果当前字符等于，`a`则此行检查是否设置了零位（LSB）。如果是那么之前已经看到过。否则它会设置它。如果当前字符是，则将等于，因此设置下一个更高位（第一位），依此类推。 基本上在 ascii 字符集上，只使用一个这种方式就可以节省空间，因为它与数组相反，但是这个代码只能处理字母，同时处理所有的 ASCII，代码会更清晰`val``0``checker& (1<<val)``a``b``val``1`
`int``boolean[256]``a-z``boolean[256]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:24:04.060

> java中的布尔值将占用1位，因为它只能表示真或假值。例如，如果我有一个布尔值数组。boolean[] char_set = new boolean[256] 这将占用 256 位对吗？

这是不正确的。现代计算机无法寻址单个位。

此外，要表示 ASCII 字符，您只需要 8 位`2^8 = 256`（其中`^`表示求幂）。

# c# - C# OpenWebKitSharp .NET 4 - 如何调用 javascript

> ID：12440148
> 
> 赞同：5
> 
> 时间：2012-09-15T18:54:42.877
> 
> 标签：c#, javascript, c#-4.0, webkit, open-webkit-sharp

我正在尝试使用带有 .NET 4 的 WinForms 中的 OpenWebKitSharp 调用 javascript

这是我尝试使用的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using WebKit;
using WebKit.Interop;
using WebKit.JSCore;
using webkitForm.Properties;

namespace webkitForm
{
    public partial class Form1 : Form
    {

        WebKitBrowser webKitSharpBrowser = new WebKitBrowser();

        public Form1()
        {
            InitializeComponent();

            this.Controls.Add(webKitSharpBrowser);
            webKitSharpBrowser.Width = 600;
            webKitSharpBrowser.Height = 400;

        }

        private void button1_Click(object sender, EventArgs e)
        {
            webKitSharpBrowser.Preferences.AllowPlugins = true;
            webKitSharpBrowser.UseJavaScript = true;
            webKitSharpBrowser.Navigate("http://sandbox.icontact.com");

            webKitSharpBrowser.GetScriptManager.EvaluateScript("alert('An alert from C#!');"); //Call javascript?

        }

    }
} 
```

我无法让 javascript 触发任何事情……一定有一些我遗漏的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:45:12.620

好吧，似乎无法按照您想要的方式完成：

如果您使用的是 .NET 4，则可以使用以下方法调用函数：

```
<webkitbrowser>.GetScriptManager.CallFunction("name", new Object[] { arg1, arg2, ...}); 
```

如果您想使用 .NET 2，您可以使用：

```
<webkitbrowser>.StringByEvaluatingJavaScriptFromString("name(arguments)") 
```

[- 打开 Webkit 尖锐问题](https://code.google.com/p/open-webkit-sharp/issues/detail?id=106)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-19T06:35:38.993

我测试了您的代码，它正在工作，但调用警报函数只会触发一个事件（WebKitBrowser.ShowJavaScriptAlertPanel），您负责处理该事件并显示消息或更新标签或其他任何事情。

例如：

```
Browser.ShowJavaScriptAlertPanel += Browser_ShowJavaScriptAlertPanel; 
```

然后处理事件：

```
private void Browser_ShowJavaScriptAlertPanel(object sender, WebKit.ShowJavaScriptAlertPanelEventArgs e)
{
    MessageBox.Show(e.Message);
} 
```

# maven - 是否有适用于 vaadin FancyLayouts 插件的工作 maven pom？

> ID：12440152
> 
> 赞同：1
> 
> 时间：2012-09-15T18:54:54.657
> 
> 标签：maven, vaadin, pom.xml, add-on

我决定在我的 Vaadin 项目中使用一个布局插件，这是一个`maven`项目，但是在`maven pom`插件页面上获取可用之后，它以某种方式无法从 maven 存储库中解决。

请有人告诉我如何获得一个工作的 maven pom 或者我如何解决这个问题？

这是行家

```
<repository>
   <id>vaadin-addons</id>
   <url>http://maven.vaadin.com/vaadin-addons</url>
</repository>

<dependency>
   <groupId>org.vaadin.alump.fancylayouts</groupId>
   <artifactId>fancylayouts-addon</artifactId>
   <version>0.2.1</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:36:13.187

要使这个插件在您的 Maven 项目布局中工作，您需要从[github](https://github.com/alump/FancyLayouts/archive/master.zip)下载项目 zip 包。

将 zip 内容解压缩到任何目录并 cd 进入插件文件夹：

```
unzip FancyLayouts-master.zip
cd FancyLayouts-master/fancylayouts-addon/ 
```

在那里，使用您最喜欢的文本编辑器，更改`pom.xml`. 用标签替换`<parent>...</parent>`标签及其内容`version`（尽管 vaadin 目录中的插件页面显示插件版本是`0.2.1`下载包的项目代码版本`0.3-SNAPSHOT`）。该文件的前 14 行应如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.vaadin.alump.fancylayouts</groupId>
  <artifactId>fancylayouts-addon</artifactId>
  <packaging>jar</packaging>
  <name>FancyLayouts addon</name>
  <description>FancyLayouts Vaadin addon</description>
  <version>0.3-SNAPSHOT</version>  

  <organization>
      <name>Sami Viitanen</name>
      <url>http://vaadin.com/alump</url>
  </organization> 
```

使用以下命令构建插件：`mvn install`

它应该成功构建并自动安装到您的本地存储库中，要从您的项目中引用它，请添加以下依赖项：

```
 <dependency>
       <groupId>org.vaadin.alump.fancylayouts</groupId>
       <artifactId>fancylayouts-addon</artifactId>
       <version>0.3-SNAPSHOT</version>
    </dependency> 
```

**解决方法的说明：**如果您尝试使用 just 安装插件`mvn install`，然后在 .maven 中引用依赖`pom.xml`项，maven 会抱怨找不到该库的父 pom（类似于：）`Cannot find parent: org.vaadin.alump:fancylayouts for project`，这就是我们必须删除`parent`标签并重建的原因没有它的插件

# javascript - 将值从一个 js 函数发送到另一个作为参数

> ID：12440154
> 
> 赞同：1
> 
> 时间：2012-09-15T18:55:18.460
> 
> 标签：javascript, jquery

Javascript新手问题我正在从文本中获取用户输入并使用该值发送到控制器以进行进一步处理。在页面初始化上一切都很好，现在我想绑定确定按钮以将用户值发送到我的页面初始化脚本（我试图避免复制脚本）。这是代码

```
@Html.ActionLink("OK", "Ajax", null, new { @class = "button", @id ="myDate" }) 
```

在页面初始化

```
$(document).ready(function dataTable() {
  $('#dataTable').dataTable({
            "bServerSide": true,
             "fnServerParams": function (aoData) {
                var date = $('input[name="myDate"]').val();
                aoData.push({ "name": "Date", "value": date });
   });
}); 
```

在用户输入并单击按钮时，我应该将该输入发送到上述脚本进行处理

```
 $('#myDate').click(function () { 
     var date = $('input[name="myDate"]').val();
     // ????
     // Should I change first function to receive parameter as argument 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:07:01.880

一种方法是分解代码以获取数据表初始化之外的日期

```
function getDate(){
    var date = $('input[name="myDate"]').val();
    return date;
} 
```

然后在你的数据表初始化

```
 var date = getDate(); 
```

在您的点击事件中也是如此

```
 $('#myDate').click(function () { 
     var date = getDate();
  }); 
```

你应该以这个结束

```
 $(document).ready(function dataTable() {
        function getDate(){
        var date = $('input[name="myDate"]').val();
       return date;
      }

     $('#dataTable').dataTable({
        "bServerSide": true,
         "fnServerParams": function (aoData) {
            var date = getDate();
            aoData.push({ "name": "Date", "value": date });
               });
           });

              $('#myDate').click(function () { 
                 var date = getDate();
              });
        }); 
```

# eclipse - Eclipse Juno 未加载 - 卡在 'org.eclipse.m2e,core'

> ID：12440157
> 
> 赞同：3
> 
> 时间：2012-09-15T18:55:39.783
> 
> 标签：eclipse, maven, m2eclipse

我在一个 Maven java 项目上使用 Eclipse Juno 工作得很好——几个星期以来都是笨拙的。

昨天，就在回家之前，我在项目的命令行上运行了“mvn clean”和“mvn install”（一切都很好）。从命令行对所述项目运行“mvn”后，我没有尝试打开 Eclipse。

今天早上打开 Eclipse Juno 不起作用 - 它在加载 'org.eclipse.m2e,core' 时停止。

任何人都可以就可能发生的事情提供指导吗？

我宁愿不删除 Eclipse 并重新安装 - 太痛苦了！！！

我正在使用带有 Oracle JVM 7 的 Macbook。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-21T14:56:13.283

删除问题工作区中“.metadata/.plugins”中的文件夹“.org.eclipse.e4.workbench”，并使用-clean 标志启动eclipse。如果这没有帮助，还删除所有文件“.markers.snap”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T11:54:49.873

我只需要从目录中删除文件**workbench.xmi**

```
[*workspaceXYZ*]/.metadata/.plugins/org.eclipse.e4.workbench 
```

然后工作区再次启动。但这真的很痛苦……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-31T14:00:29.707

只需为相同的旧问题添加额外的案例（因为我现在遇到了问题并且能够解决它）：对我来说，我也遇到了完全相同的问题，除此之外其他工作空间都在工作。我不想删除这个有问题的工作区。所以我所做的是，首先我加载了 eclipse 启动的其他一些工作空间。然后我点击“切换工作空间”并尝试打开有问题的同一个工作空间。然后它起作用了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:59:49.723

似乎您的 Eclipse 正在使用 M2E maven 插件做某事，也许首先尝试从 Eclipse 安装中删除该插件。然后尝试重新启动eclipse。如果一切正常，然后安装插件agian。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T19:37:08.737

您可以尝试此[答案](https://stackoverflow.com/questions/11810102/eclipse-juno-startup-error-log-file)中的步骤。这对我不起作用，所以我尝试删除整个*工作区*/.meta 文件夹。这确实对我有用，但我现在必须重新导入我的项目——所以并不完美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-20T13:13:43.907

对我来说，上述两种解决方案都是必要的：

1.  删除“.metadata/.plugins”中的文件夹“.org.eclipse.e4.workbench”
2.  我加载了 eclipse 启动的其他一些工作空间。然后我点击“切换工作空间”并尝试打开有问题的同一个工作空间。

然后就成功了！！！:D

# jsf-2 - Primefaces 数据表列选择

> ID：12440158
> 
> 赞同：2
> 
> 时间：2012-09-15T18:55:51.460
> 
> 标签：jsf-2, primefaces

我想知道如何获得列选择

我有以下数据表

```
<p:dataTable id="DataTable" value="#{dataTable.selecDataModel}" var="test" scrollable="TRUE" scrollHeight="500" styleClass="day-column2" selectionMode="single" >
    <p:column headerText="Column1" footerText="Column1" width="450">
        <h:outputText value="Test1" />
    </p:column>
    <p:column headerText="Column2" footerText="Column2" width="450">
        <h:outputText value="Test2" />
    </p:column>
 </p:dataTable> 
```

p:ajax 仅支持行选择，如果我想知道选择了哪一列，我该如何获得相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T05:55:44.380

您可以使用 jQuery 找出所选列的索引并将其作为 ajax 事件发送到服务器

这是一种方法：

首先在表格上方添加一个`inputText`（使其隐藏）

```
<h:inputText id="mySelectedColumnId" value="#{myBean.mySelectedColumnField}" style="display:none">
    <f:ajax listener="#{myBean.myListener}"></f:ajax>
</h:inputText> 
```

和下面的js代码绑定点击表和触发点击`h:inputText`哪个将触发服务器上的监听

```
jQuery(document).delegate("#yourTableID td", "click", function (event) {//bind every click on any td in the table
    var columnNumber = jQuery(this).index();//get index of clicked row
    jQuery("#mySelectedColumnId").val(columnNumber); //set value in the inputtext
    jQuery("#mySelectedColumnId").change(); //this will trigger the ajax listener
}); 
```

* * *

更新

我实际上的意思是以下结构：

```
<h:outputScript name="js/newjavascriptfile.js" target="head" />

.
.
.
.

<h:form prependId="false">
     <h:inputText id="mySelectedColumnId" value="#{myBean.mySelectedColumnField}" style="display:none">
         <f:ajax listener="#{myBean.myListener}"></f:ajax>
     </h:inputText>
     <p:dataTable id="DataTable"....
.
.
.
. 
```

[并在 js 内（将其放在 web 应用程序文件夹Resources (Library) In JSF 2.0](http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/)的根目录中的资源文件夹内的 js 文件夹内）文件位置

```
jQuery(window).load(function () {
     jQuery(document).delegate("#yourTableID td", "click", function (event) {//bind every click on any td in the table
        var columnNumber = jQuery(this).index();//get index of clicked row
        jQuery("#mySelectedColumnId").val(columnNumber); //set value in the inputtext
        jQuery("#mySelectedColumnId").change(); //this will trigger the ajax listener
    });
}); 
```

# bash - 重定向多个标准输出

> ID：12440164
> 
> 赞同：3
> 
> 时间：2012-09-15T18:57:14.993
> 
> 标签：bash, redirect, stdout

我在一个名为一、二、三的目录中有三个文件。

一个包含：

```
asdfg 
```

两个包含：

```
qwerty 
```

三包含：

```
zxcvb 
```

当我给出以下命令时：

```
$ls > One > Two > Three 
```

然后我给出以下命令：

```
$cat One 
```

输出：

```
Nothing 
```

然后我给出以下命令：

```
$cat Two 
```

输出：

```
Nothing 
```

然后我给出以下命令：

```
$cat Three 
```

输出：

```
One
Three
Two 
```

任何人都可以阐明这里发生了什么吗？为什么文件一和二变成空，为什么 ls 命令的输出只写入文件三？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:14:06.870

如前所述[，这里](https://stackoverflow.com/questions/12371283/redirecting-multiple-stdins/12371634#12371634) `bash`不支持多路分解，也不支持多路复用。您看到的效果是每个文件都打开了`O_TRUNC`，这意味着所有内容都被破坏了。当指定多个重定向时，它们会立即再次关闭，仅保留最后一个重定向并实际接收任何数据。

`strace`这是运行命令的摘录：

```
strace -f -e open,dup2,close bash -c 'ls > one > two > three' 
```

```
...
open("one", O_WRONLY|O_CREAT|O_TRUNC|O_LARGEFILE, 0666) = 3
dup2(3, 1)                  = 1
close(3)                    = 0
open("two", O_WRONLY|O_CREAT|O_TRUNC|O_LARGEFILE, 0666) = 3
dup2(3, 1)                  = 1
close(3)                    = 0
open("three", O_WRONLY|O_CREAT|O_TRUNC|O_LARGEFILE, 0666) = 3
dup2(3, 1)                  = 1
close(3)                    = 0
... 
```

如您所见，bash 不断覆盖相同的文件描述符。所以只有最后一个会收到任何数据。一种解决方法是使用`tee`which 将接收`stdin`到的内容写入其所有参数和`stdout`：

```
ls | tee One Two Three > /dev/null 
```

在旁注中，`zsh`确实支持这一点：

```
 zsh$ setopt multios
 zsh$ ls > One > Two > Three 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T19:09:02.830

您只能重定向一次。第一个重定向打开第一个文件进行写入（删除任何以前的内容），然后在下一个重定向覆盖它时立即关闭它。

您似乎正在寻找`tee`命令。

# cookies - 网站可以访问其他网站留下的 cookie 吗？

> ID：12440168
> 
> 赞同：0
> 
> 时间：2012-09-15T18:58:04.110
> 
> 标签：cookies

网站能否访问和使用从其他网站留下的 cookie？是否有我们不能简单地从浏览器设置中删除的类似 cookie 的技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:02:21.800

不， [同源政策](http://en.wikipedia.org/wiki/Same_origin_policy) 禁止

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:03:38.557

查看其他人的 cookie？是的你可以。取决于 cookie 设置。永久cookies？你不能。浏览器不允许这种廉价的伎俩。

# node.js - 您如何调试使用 Chrome/WebKit 作为远程调试器运行的 Node.js 服务器？

> ID：12440169
> 
> 赞同：20
> 
> 时间：2012-09-15T18:58:24.953
> 
> 标签：node.js, google-chrome, webkit

如果您的节点正在运行

```
node --debug server.js 
```

这给了我一个端口号 xxxx，我应该在启动 Chrome 时使用这个端口号吗？

你从远程调试到它`Google\ Chrome --remote-debugging-port=xxxx`吗？

或者 9222 是一个神奇的端口，正如它所提到的那样。

我是否在正确的轨道上，尝试将 Chrome 启动`--remote-debugger`到 Node.js`server.js`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-08-07T01:05:24.430

**node-inspector / --debug 现在被检查器替换了见下面的更新**

```
#now deprecated / see below for update

#install node-inspector
npm install -g node-inspector

#start node-inspector, listen on port 8080 (default)
node-inspector --web-port=8080

#in another terminal session/window:
#while node-inspector is running, start your project in debug mode 
node --debug myproject.js 
```

现在您可以浏览到[http://your_server:8080](http://your_server:8080)以获取 myproject.js 的完整调试会话

如果由于防火墙或其他原因无法在远程端口上访问您的远程服务器，您可以创建一个从本地计算机上的端口 8080 到远程服务器上的 'localhost:8080' 的 ssh 隧道：

```
ssh -L 8080:localhost:8080 username@remoteserver -N 
```

并在本地机器上使用[http://localhost:8080](http://localhost:8080)调试远程 nodejs 会话时保持运行

* * *

**2017 年 8 月更新**

在检查模式下启动节点：

```
node --inspect=0.0.0.0:9229 myproject.js 
```

或者如果您希望调试器在 myproject.js 的第一行中断：

```
node --inspect-brk=0.0.0.0:9229 myproject.js 
```

然后在您的 chrome 浏览器中打开以下 URL：

```
chrome://inspect 
```

单击“配置...”按钮并添加以下目标：

```
ip-or-name-of-server-running-node:9229 
```

单击“完成”按钮后，您应该会在远程目标下看到 myproject.js。单击检查链接开始调试。不幸的是，inspect 链接在 Ubuntu 的 Chrome 58 上不起作用。它在适用于 Windows 的 Chrome 60 上运行良好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-15T21:26:43.680

用于[`node-inspector`](https://github.com/dannycoates/node-inspector)从 Chrome 远程调试您的节点应用程序，您已使用`--debug`您显示的选项启动。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-24T23:41:45.030

最新版本的 Node (> v6.3.0) 和 Chrome 现在允许您使用 Chrome 开发人员工具来[调试 Node.JS 进程](https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js)，而无需安装其他任何东西。只需传递`--inspect`给`node`：

```
$ node --inspect script.js

Debugger listening on port 9229.
Warning: This is an experimental feature and could change at any time.
To start debugging, open the following URL in Chrome:
    chrome-devtools://SOME-URL-HERE 
```

只需在 Chrome 中打开该 URL，就可以开始了。

如果您需要在 Node 启动后立即暂停脚本，您也可以传入`--debug-brk`相同的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T04:15:23.540

*   使用 $ vagrant ssh -- -L 5858:127.0.0.1:5858

    ```
     to ssh connect to VM. also this comment would start a proxy server on port 5858; 
    ```

*   您可以使用 telnet 127.0.0.1 5858 进行测试，以查看本地代理服务器是否启动。

*   在 VM 中，您可以使用命令启动节点

*   $ 节点 --debug-brk app.js

*   在 Web Storm 中设置调试配置。
*   当您在 web Storm 中开始调试时，VM 中的 node.js 服务器将在几秒钟内启动。

PS：没有必要去碰vagrant文​​件。参考：[将 WebStorm 连接到远程 node.js 调试会话](https://stackoverflow.com/questions/21633924/connecting-webstorm-to-a-remote-node-js-debugging-session)。

# mysql - 选择 mysql 上的紧急触发器

> ID：12440171
> 
> 赞同：0
> 
> 时间：2012-09-15T18:58:37.410
> 
> 标签：mysql, select, triggers

我有雇主的具体要求。我需要将 MySQL 中表 A 的 INSERT、UPDATE 和 SELECT 访问权限授予 developer_1 和 developer_2。他们都将自己的行插入到表 A 中，我将通过 INSERT 之后的 TRIGGER 来处理哪些行来自哪个开发人员。我需要的是一种拦截任何用户的 SELECT 语句并确定哪些行可以返回给特定开发人员的方法。然后我发现SELECT上没有TRIGGER！找到解决方案对我来说非常重要，因为最重要的请求是 developer_1 不能看到其他开发人员行。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T19:14:18.383

只需查看[此链接](http://dev.mysql.com/doc/refman/5.5/en/views.html)以获取视图，它应该能够在您的情况下为您提供帮助

只需创建一个行，在其中放置一些东西来识别每个开发人员（我猜你已经这样做了）

然后使用这个标识符创建 2 个不同的视图，每个都被允许给一个开发人员，知道这些视图来自同一个表

# c++ - C++ 定义字符串时出现很多错误

> ID：12440172
> 
> 赞同：0
> 
> 时间：2012-09-15T18:58:43.610
> 
> 标签：c++, string

您好，我正在学习 C++，但在制作 VISUAL APP NOT CONSOLE 时出现错误

我的问题在于字符串**Num1 = "0"**；

请向我解释为什么会这样？

字符串为 0，因为我想制作计算器，所以我需要制作 Num1 + "TheClicked number"

```
<script>
#include <windows.h>

/*  Declare Windows procedure  */
LRESULT CALLBACK WindowProcedure (HWND, UINT, WPARAM, LPARAM);

/*  Make the class name into a global variable  */
char szClassName[ ] = "Andrey App";

int WINAPI WinMain (HINSTANCE hThisInstance,
                    HINSTANCE hPrevInstance,
                    LPSTR lpszArgument,
                    int nFunsterStil)

{
    HWND hwnd;               /* This is the handle for our window */
    MSG messages;            /* Here messages to the application are saved */
    WNDCLASSEX wincl;        /* Data structure for the windowclass */

    /* The Window structure */
    wincl.hInstance = hThisInstance;
    wincl.lpszClassName = szClassName;
    wincl.lpfnWndProc = WindowProcedure;      /* This function is called by windows */
    wincl.style = CS_DBLCLKS;                 /* Catch double-clicks */
    wincl.cbSize = sizeof (WNDCLASSEX);

    /* Use default icon and mouse-pointer */
    wincl.hIcon = LoadIcon (NULL, IDI_APPLICATION);
    wincl.hIconSm = LoadIcon (NULL, IDI_APPLICATION);
    wincl.hCursor = LoadCursor (NULL, IDC_ARROW);
    wincl.lpszMenuName = NULL;                 /* No menu */
    wincl.cbClsExtra = 0;                      /* No extra bytes after the window class */
    wincl.cbWndExtra = 0;                      /* structure or the window instance */
    /* Use Windows's default color as the background of the window */
    wincl.hbrBackground = (HBRUSH) COLOR_BACKGROUND;

    /* Register the window class, and if it fails quit the program */
    if (!RegisterClassEx (&wincl))
        return 0;

    /* The class is registered, let's create the program*/
    hwnd = CreateWindowEx (
           0,                   /* Extended possibilites for variation */
           szClassName,         /* Classname */
           "Andrey App",       /* Title Text */
           WS_OVERLAPPEDWINDOW, /* default window */
           CW_USEDEFAULT,       /* Windows decides the position */
           CW_USEDEFAULT,       /* where the window ends up on the screen */
           544,                 /* The programs width */
           375,                 /* and height in pixels */
           HWND_DESKTOP,        /* The window is a child-window to desktop */
           NULL,                /* No menu */
           hThisInstance,       /* Program Instance handler */
           NULL                 /* No Window Creation data */
           );

    /* Make the window visible on the screen */
    ShowWindow (hwnd, nFunsterStil);

    /* Run the message loop. It will run until GetMessage() returns 0 */
    while (GetMessage (&messages, NULL, 0, 0))
    {
        /* Translate virtual-key messages into character messages */
        TranslateMessage(&messages);
        /* Send message to WindowProcedure */
        DispatchMessage(&messages);
    }

    /* The program return-value is 0 - The value that PostQuitMessage() gave */
    return messages.wParam;
}

/*  This function is called by the Windows function DispatchMessage()  */

LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)                  /* handle the messages */
    {
    string Num1 = "0";
    case WM_CREATE:
    {
        CreateWindow(TEXT("button"), TEXT("Beep"),    
                     WS_VISIBLE | WS_CHILD ,
                     20, 50, 80, 25,        
                     hwnd, (HMENU) 1, NULL, NULL);    

        CreateWindow(TEXT("button"), TEXT("2"),    
                     WS_VISIBLE | WS_CHILD ,
                     120, 50, 30, 30,        
                     hwnd, (HMENU) 2, NULL, NULL);  
        CreateWindow(L"STATIC", Num1, 
                     WS_CHILD | WS_VISIBLE | SS_LEFT,
                     20, 20, 300, 230,
                     hwnd, (HMENU) 1, NULL, NULL);  
        break;
    }

      case WM_COMMAND:
      {
       if (LOWORD(wParam) == 1) {
           Beep(40, 50);
       }

       if (LOWORD(wParam) == 2) {
           if(Num1 == 0){
              Num1 = 2;
              }
              else{
              Num1 + "2";
              }
       }

       break;
       }

        case WM_DESTROY:
            PostQuitMessage (0);       /* send a WM_QUIT to the message queue */
            break;
        default:                      /* for messages that we don't deal with */
            return DefWindowProc (hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:08:06.283

这是它的外观：

```
//At the top of your .cpp file

#include<string>

LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    static std::string Num1 = "0";    /* static string created once and keeps it contents for each function call */
    switch (message)                  /* handle the messages */
    {

    case WM_CREATE:
    {
        CreateWindow(TEXT("button"), TEXT("Beep"),    
                     WS_VISIBLE | WS_CHILD ,
                     20, 50, 80, 25,        
                     hwnd, (HMENU) 1, NULL, NULL);    

        CreateWindow(TEXT("button"), TEXT("2"),    
                     WS_VISIBLE | WS_CHILD ,
                     120, 50, 30, 30,        
                     hwnd, (HMENU) 2, NULL, NULL);  
        ///CreateWindow takes a LPCSTR as second arg, which is wchar_t under the covers, so need to convert
        std::wstring wstr(Num1.begin(), Num1.end());
        CreateWindow(L"STATIC", wstr.c_str(), //.c_str() returns a const char* 
                     WS_CHILD | WS_VISIBLE | SS_LEFT,
                     20, 20, 300, 230,
                     hwnd, (HMENU) 1, NULL, NULL);  
        break;
    }

      case WM_COMMAND:
      {
       if (LOWORD(wParam) == 1) {
           Beep(40, 50);
       }

       if (LOWORD(wParam) == 2) {
           if(Num1 == "0"){ //Num1 is a string, so you should check a string
              Num1 = "2";
              }
              else{
              Num1 += "2";
              }
       }

       break;
       }

        case WM_DESTROY:
            PostQuitMessage (0);       /* send a WM_QUIT to the message queue */
            break;
        default:                      /* for messages that we don't deal with */
            return DefWindowProc (hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

# java - jsoup 从 html 文件中获取特定的 id

> ID：12440174
> 
> 赞同：0
> 
> 时间：2012-09-15T18:59:09.613
> 
> 标签：java, jsoup

我有一个像

```
<div class="student">
<h4 id="Classnumber100" class="studentheading">
   <a id="studentlink22" href="/grade8/greg">22\. Greg</a>
</h4>
<div class="studentcategories">
<div class="studentneighborhoods">
</div>
</div>
</div> 
```

我想使用 JSOUP 来获取 url = /grade8/greg 和“22\. Greg”。

我试过选择器

```
 Elements listo = doc.select("h4 #studentlink22"); 
```

我无法获得价值。

其实我想根据 Classnumber100 选择 HTML 页面中有 300 条记录，唯一一致的是“Classnumber100.

所以我希望我的选择器选择classnumber100之后的所有href和文本。我怎样才能做到这一点。

我试过 doc.select("class#studentheading"); 以及许多其他可能性，但它们不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:07:15.660

select 方法查找 html 标记，这里是 h4 和 a，然后是属性（如果您告诉它这样做）。您是否去过 jsoup 网站，因为 select 的使用已经很好地描述了这种情况。

例如

```
// code not tested
Elements listo = doc.select("h4[id=Classnumber100]").select("a");

String text = listo.text(); // for  "22\. Greg"
String path = listo.attr("href"); // for  "/grade8/greg" 
```

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:11:40.947

首先，多个元素不应该共享同一个 id，所以这些元素中的每一个都不应该*有*id `Classnumber100`。但是，如果是这种情况，那么您仍然可以使用选择器选择它们`[id=Classnumber100]`。

如果你只对`a`里面的标签感兴趣，那么你可以使用`[id=Classnumber100] > a`.

`h4`重新阅读问题后，您感兴趣的标签似乎`class`共享`studentheading`. 在这种情况下，您可以使用类选择器，即

```
doc.select(".studentheading > a") 
```

# java - 为什么剪贴板监听器使用更多的 CPU 使用率？

> ID：12440177
> 
> 赞同：3
> 
> 时间：2012-09-15T18:59:33.277
> 
> 标签：java, clipboard

我编写了监听剪贴板并正常工作的程序，但我看到该程序使用了更多的 CPU 使用率。CPU 使用率超过 70%。为什么？我可以减少它吗？或者我想要侦听 Windows 复制操作的侦听器。java中有监听器吗？这是我的代码：

```
 package yoxlama;

    import java.awt.*;  
    import java.awt.datatransfer.*;  
    import java.io.IOException;
    import java.net.MalformedURLException;

    class ClipBoardListener extends Thread implements ClipboardOwner {  
      Clipboard sysClip = Toolkit.getDefaultToolkit().getSystemClipboard();  
      static ClipBoardListener b;

      Interlsoft interlsoft = new Interlsoft();
      public void run() {  
          try{
            Transferable trans = sysClip.getContents(this);  
            regainOwnership(trans);
          }catch (Exception e) {
                try {
                    b.finalize();
                } catch (Throwable e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                 b= new ClipBoardListener();
                 b.start();
              System.out.println("NESE1");
        }
        System.out.println("Listening to board...");  
        while(true) {}  
      }  

      public void lostOwnership(Clipboard c, Transferable t) {  
          try {  
                Thread.sleep(50);  
              } catch(Exception e) {  
                System.out.println("Exception: " + e);  
              } 
          try{
              Transferable contents = sysClip.getContents(this);  
              processContents(contents);  
              regainOwnership(contents); 
          }catch (Exception e) {
              try {
                  b.finalize();
                 b= new ClipBoardListener();
                 b.start();
            } catch (Throwable e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
              System.out.println("nese");
        }
      }  

      void processContents(Transferable t) throws MalformedURLException, IOException {  
          String str = getClipboard(t);
          if(str!=null){
            str=  str.replace("\n", "%0D%0A");
            str=  str.replace("\r", "");
            str=  str.replace("\t", "");
            str=  str.replace("/", "");
            str=  str.replace("-", "");
              interlsoft.translate(str);

          }
     //   System.out.println("Processing: " + getClipboard(t));  

      }  

      void regainOwnership(Transferable t) {  
        sysClip.setContents(t, this);  
      }  

      public static void main(String[] args) {  
          b = new ClipBoardListener();  
        b.start();  
      }  

      public static String getClipboard(Transferable t) {
          //  Transferable t = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(null);

            try {
                if (t != null && t.isDataFlavorSupported(DataFlavor.stringFlavor)) {
                    String text = (String)t.getTransferData(DataFlavor.stringFlavor);
                    return text;
                }
            } catch (UnsupportedFlavorException e) {
                System.out.println("BURDA1");
            } catch (IOException e) {
                System.out.println("BURDA1");
            }
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T19:01:57.967

这：`while(true) {}`

你可怜的CPU。而不是 while true，只是让该线程无限期地休眠。请参阅：[如何在一行中挂起 Java 中的线程？](https://stackoverflow.com/questions/3203139/how-do-you-hang-a-thread-in-java-in-one-line)

# cakephp - CakePHP cakeError()？

> ID：12440178
> 
> 赞同：0
> 
> 时间：2012-09-15T18:59:39.287
> 
> 标签：cakephp, error-handling

我找不到任何关于哪里`cakeError()`定义为成员函数的信息。该[文档](http://book.cakephp.org/1.3/en/view/1188/Error-Handling)仅说明该调用如下所示：

```
$this->cakeError(string $errorType [, array $parameters]); 
```

但是在我的*AppController*子类中调用它会给我`Call to undefined method EntriesController::cakeError()`.

在哪里`cakeError()`定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:06:12.663

**CakePHP 2.x:**

[http://book.cakephp.org/2.0/en/development/errors.html](http://book.cakephp.org/2.0/en/development/errors.html)

> 对于 2.0 Object::cakeError() 已被删除。相反，它已被许多例外所取代。以前称为 cakeError 的所有核心类现在都抛出异常。这使您可以选择处理应用程序代码中的错误，或者让内置的异常处理来处理它们。

**CakePHP 1.3：**

[http://api13.cakephp.org/view_source/object/#line-187](http://api13.cakephp.org/view_source/object/#line-187)

[http://api13.cakephp.org/class/object#method-ObjectcakeError](http://api13.cakephp.org/class/object#method-ObjectcakeError)

# java - ImageJ 作为库：选项的名称

> ID：12440182
> 
> 赞同：1
> 
> 时间：2012-09-15T19:00:25.430
> 
> 标签：java, imagej

我正在尝试在我的 Java 应用程序中使用 ImageJ 作为库。我已经发现我可以使用以下代码打开图像，对其进行处理并将其显示在屏幕上：

```
ImagePlus image = new Opener().openImage("image.jpg");
IJ.run(image, "Find Maxima...", "noise=150");
image.show(); 
```

此代码还将噪声参数（在 GUI 中称为“Noise Tolerance”）设置为 150。（一段时间后，我发现参数名称是 GUI 名称的第一个单词。至少它适用于我做过的测试。）

但是现在：如何指定 GUI 的“输出类型”选项？在 GUI 中，它是一个带有“单点”或“公差内的最大值”等元素的选择框。但是，如果我尝试以下操作：

```
ImagePlus image = new Opener().openImage("image.jpg");
IJ.run(image, "Find Maxima...", "noise=150 output=Single Points");
image.show(); 
```

它说“Single”不是正确的参数。但它也不适用于“single”、“singlepoints”、“single_points”、“Single_Points”……（我尝试了很多这些组合。）

我还尝试将数字指定为选择框中元素的索引，但这也不起作用。

任何人都可以帮助我并给我一个提示，我可以在哪里找到文档或如何指定选项的类似内容。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:47:19.777

您可以通过在 ImageJ 中录制宏来找到正确的参数字符串。单击插件 -> 宏 -> 记录...，然后进行图像处理。在 Recorder 窗口中，您将看到带有所有参数的命令，您可以在代码中使用`IJ.run(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:24:16.663

我自己从未使用过 ImageJ，只是一个猜测，基于以下链接：http: [//imagej.1557.n6.nabble.com/Counting-spots-within-nuclei-td3683546.html](http://imagej.1557.n6.nabble.com/Counting-spots-within-nuclei-td3683546.html)

我会试试这个：

```
ImagePlus image = new Opener().openImage("image.jpg");
IJ.run(image, "Find Maxima...", "noise=150 output=[Single Points]");
image.show(); 
```

# objective-c - 目标 C 中的日期列表

> ID：12440185
> 
> 赞同：1
> 
> 时间：2012-09-15T19:01:46.527
> 
> 标签：objective-c, xcode, macos, cocoa, nsdate

我想知道我怎样才能列出从星期一到星期日的日子......

我这样做了：

```
- (NSString *) stringWithDayNameOf:(int)day {
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"D"];
    NSDate *date = [dateFormat dateFromString:[NSString stringWithFormat:@"%i", day]];
    [dateFormat setDateFormat:@"eeee"];
    NSString* outer = [dateFormat stringFromDate:date];
    outer = [outer uppercaseString];

    return outer;

}

 for (int i = 1; i <= 7; i++) {

        NSLog(@"DAY: %@", [self stringWithDayNameOf:i]);

    } 
```

但它显示了从今天开始的几天......如何解决这个问题或让它变得更简单？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T19:21:07.553

使用`NSDateFormatter`'s`weekdaySymbols`和朋友（用于短名称等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T19:22:48.323

`%D`是“一年中的一天”的格式说明符，而不是“星期几”。星期几的数字没有说明符，因为（据我所知）没有人这样写日期。

您需要使用以下方式创建日期`NSDateComponents`，然后对其进行格式化：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"eeee"];
NSCalendar * cal = [NSCalendar currentCalendar];
NSUInteger numWeekdays = [cal maximumRangeOfUnit:NSWeekdayCalendarUnit].length;
NSDateComponents * comp = [[NSDateComponents alloc] init];
for( NSUInteger day = 1; day <= numWeekdays; day++ ){
    [comp setWeekday:day];
    [comp setWeek:0];
    NSDate * date = [cal dateFromComponents:comp];

    NSString * dayName = [dateFormat stringFromDate:date];

    NSLog(@"%@", dayName);
} 
```

此外，`NSDateFormatter`已经知道星期几的名称：[`-[NSDateFormatter weekdaySymbols]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-CJBFJBHE). 公历一周的第一天是星期日。

# jquery - div向下滑动时自动聚焦输入字段

> ID：12440188
> 
> 赞同：14
> 
> 时间：2012-09-15T19:02:13.340
> 
> 标签：jquery, css, input, autofocus

我有一个隐藏的div。单击按钮时，div 会随着输入字段向下滑动。一旦 div 向下滑动，如何使这个输入字段自动对焦？谢谢。

```
<input type="text" name="comment_field" id="comment_field" placeholder="Comment..." /> 
```

是我拥有的并且在 div 中

```
$("#status_comments_"+a).slideDown();
    $("#comment_field").focus(); 
```

我尝试使用上述方法，但没有奏效。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T19:21:51.673

您可以使用`slideDown`动画完成时执行的回调函数。

```
$("#status_comments_"+a).slideDown(function(){
    $("#comment_field").focus();
}); 
```

请注意，ID 必须是唯一的，否则您的 ID 选择器只会选择具有该特定 ID 的第一个元素。如果输入元素在 div 标签内，您还可以编写代码：

```
$("#status_comments_"+a).slideDown(function(){
    $('input', this).focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T18:39:53.373

```
 $("#divId").show().focus();

document.getElementById('divID').focus(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T19:07:05.750

隐藏字段无法获得焦点..所以你需要做的是点击你必须显示的按钮。

```
$("#status_comments_"+a).show().slideDown();
    $("#comment_field").show().focus(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-12T18:36:16.013

```
$("#divID").focus(); 
```

或者没有 jQuery：

```
document.getElementById('divID').focus(); 
```

# jquery - jQuery | 与滚动条相关的位置 div

> ID：12440191
> 
> 赞同：1
> 
> 时间：2012-09-15T19:02:34.417
> 
> 标签：jquery, css, scroll, css-position

我正在寻找一个 jQuery/CSS 解决方案来在与滚动条相关的页面上放置一个 div。

当用户从左到右滚动（水平）时，div 首先必须开始`(fixed) left: 30%`，当用户滚动到末尾（右）时，div 必须`(fixed) 30%` **从右开始**。

在滚动 div 时，必须从左到右逐渐动画..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:21:27.263

要保持 div 元素固定，请使用此 CSS

```
div{
    position:fixed;
    left:30%;
    top:0;
} 
```

如果您需要平滑的滚动动画，请使用此 jQuery

[http://www.wduffy.co.uk/blog/keep-element-in-view-while-scrolling-using-jquery/](http://www.wduffy.co.uk/blog/keep-element-in-view-while-scrolling-using-jquery/)

# asp.net - 重命名文件以上传到服务器 ASP.NET

> ID：12440193
> 
> 赞同：3
> 
> 时间：2012-09-15T19:03:20.437
> 
> 标签：asp.net, c#-4.0, file-upload, file-rename

我有一个问题 - 我想将图像上传到我项目的本地目录中`ASP.NET` `C#`，我已经成功了。

但是现在我需要在将文件上传到本地目录之前重命名它们。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:18:56.317

会是这样的

```
 protected void button1_Click(object sender, EventArgs e){

    string directory = Server.MapPath("uploads");
    string fExtension = Path.GetExtension(FileUpload1.PostedFile.FileName);
    string fileName = "newFileName" + fExtension;
    this.FileUpload1.SaveAs(Path.Combine(directory,fileName)); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:14:12.957

您不会`Rename`直接获得方法来重命名文件名.....相反，您可以使用`Move`方法来像以下方式重命名一样：

```
System.IO.File.Move(oldFile, newFile); 
```

或者，您也可以使用`Copy`方法：

```
System.IO.File.Copy(oldFile, newFile);
System.IO.File.Delete(oldFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:16:34.187

当您将其保存到本地时，它很简单地给出一个新文件名

```
 string newname = "yournewname";
   string extension = Path.GetExtension(FileUpload1.PostedFile.FileName);  
   FileUpload1.SaveAs(Path.Combine(uploadFolder + newname+ extension)); 
```

# javascript - 提交后自定义重定向

> ID：12440196
> 
> 赞同：0
> 
> 时间：2012-09-15T19:03:41.680
> 
> 标签：javascript, jquery, forms, redirect

我有这个表格： http: [//lawb.co.il/HTMLPage.html](http://lawb.co.il/HTMLPage.html)

当有人点击提交按钮`("שלח טופס" )`时，他们会被自动重定向。

`"שלח טופס"`单击按钮后如何防止此操作 ？

代码在这里[http://jsfiddle.net/TCpkb/4/](http://jsfiddle.net/TCpkb/4/)

你能帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:14:08.647

而不是`input type="submit"`使用

```
<input type="button" value"submit" onclick="dothis()"/>

<script>
function dothis(){
//do whatyever you want
//for example for custom redirect :-
window.location.href="www.google.com";
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:12:04.783

1.  您的 HTML 未在您的给定链接中格式化有两个表单标签（一个表单标签在另一个里面）首先检查您的 html

2.  在您的表单中`action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho"`，很明显您的页面重定向到操作 url

请做一些功课

[http://www.w3schools.com/tags/att_form_action.asp](http://www.w3schools.com/tags/att_form_action.asp)你可以在这里找到一个示例。

# php - Shopify API 添加产品收集错误

> ID：12440199
> 
> 赞同：1
> 
> 时间：2012-09-15T19:04:28.057
> 
> 标签：php, curl, shopify

我正在使用 Sandeep Shetty 的 PHP 适配器 (https://github.com/sandeepshetty/shopify.php) 并尝试添加 Collection。这是代码：

```
define( 'SHOPIFY_DOMAIN', 'domain.myshopify.com');
define( 'SHOPIFY_API_KEY', 'API KEY');
define( 'SHOPIFY_API_PASS', 'PASS HERE');
define( 'SHOPIFY_SECRET', 'SECRET HERE');

require 'shopify/shopify.php';

// For regular apps:
$shopify = shopify_api_client(SHOPIFY_DOMAIN, NULL, SHOPIFY_API_KEY, SHOPIFY_API_PASS, true);

// For private apps:
// $shopify = shopify_api_client($shops_myshopify_domain, NULL, $api_key, $password, true);
try
{
    // Get all products
//        $products = $shopify('GET', '/admin/products.json', array('published_status'=>'published'));

    // Create a new recurring charge
    $charge = array
    (
        "custom_collection"=>array
        (
            "title"=>"IPods",
            "collects"=>array(
                                "product_id"=>99395362
                            )
        )
    );

    try
    {
        // All requests accept an optional fourth parameter, that is populated with the response headers.
        $recurring_application_charge = $shopify('POST', '/admin/custom_collections.json', $charge, $response_headers);
//            pr($response_headers);
//            pr($recurring_application_charge);
        // API call limit helpers
        echo shopify_calls_made($response_headers); // 2
        echo shopify_calls_left($response_headers); // 298
        echo shopify_call_limit($response_headers); // 300

    }
    catch (ShopifyApiException $e)
    {
        pr($e);
        // If you're here, either HTTP status code was >= 400 or response contained the key 'errors'
    }

}
catch (ShopifyApiException $e)
{
//        $err = $e->getInfo();
    pr($e);
    /* $e->getInfo() will return an array with keys:
        * method
        * path
        * params (third parameter passed to $shopify)
        * response_headers
        * response
        * shops_myshopify_domain
        * shops_token
    */
}
catch (ShopifyCurlException $e)
{
    pr($e);
    // $e->getMessage() returns value of curl_errno() and $e->getCode() returns value of curl_ error()
} 
```

当我运行上面的代码时。我收到带有 http_status_message 的 ShopifyApiException 错误] => 内部服务器错误 [http_status_code] => 500

这是供参考的完整阵列响应。

```
ShopifyApiException Object
(
[info:protected] => Array
    (
        [method] => POST
        [path] => /admin/custom_collections.json
        [params] => Array
            (
                [custom_collection] => Array
                    (
                        [title] => IPods
                        [collects] => Array
                            (
                                [product_id] => 99395362
                            )

                    )

            )

        [response_headers] => Array
            (
                [http_status_message] => Internal Server Error
                [http_status_code] => 500
                [server] => nginx
                [date] => Sat, 15 Sep 2012 18:56:36 GMT
                [content-type] => application/json; charset=utf-8
                [transfer-encoding] => chunked
                [connection] => keep-alive
                [status] => 500 Internal Server Error
                [x-shopify-shop-api-call-limit] => 1/500
                [http_x_shopify_shop_api_call_limit] => 1/500
                [cache-control] => no-cache
                [x-request-id] => f6fdb72b6cabf22a73207d82b8ea16d9
                [x-ua-compatible] => IE=Edge,chrome=1
                [set-cookie] => _secure_session_id=cf2648422369ee231220b6f1f1efdb3b; path=/; secure; HttpOnly
                [x-runtime] => 0.047004
            )

        [response] => Array
            (
                [errors] => Error
            )

    )

[message:protected] => Internal Server Error
[string:Exception:private] => 
[code:protected] => 500
[file:protected] =>PATH.TO.FILE\shopify\shopify.php
[line:protected] => 28
[trace:Exception:private] => Array
    (
        [0] => Array
            (
                [file] => PATH.TO.FILE\index.php
                [line] => 44
                [function] => {closure}
                [args] => Array
                    (
                        [0] => POST
                        [1] => /admin/custom_collections.json
                        [2] => Array
                            (
                                [custom_collection] => Array
                                    (
                                        [title] => IPods
                                        [collects] => Array
                                            (
                                                [product_id] => 99395362
                                            )

                                    )

                            )

                        [3] => Array
                            (
                                [http_status_message] => Internal Server Error
                                [http_status_code] => 500
                                [server] => nginx
                                [date] => Sat, 15 Sep 2012 18:56:36 GMT
                                [content-type] => application/json; charset=utf-8
                                [transfer-encoding] => chunked
                                [connection] => keep-alive
                                [status] => 500 Internal Server Error
                                [x-shopify-shop-api-call-limit] => 1/500
                                [http_x_shopify_shop_api_call_limit] => 1/500
                                [cache-control] => no-cache
                                [x-request-id] => f6fdb72b6cabf22a73207d82b8ea16d9
                                [x-ua-compatible] => IE=Edge,chrome=1
                                [set-cookie] => _secure_session_id=cf2648422369ee231220b6f1f1efdb3b; path=/; secure; HttpOnly
                                [x-runtime] => 0.047004
                            )

                    )

            )

    )

[previous:Exception:private] => 
) 
```

请指导我在这里做错了什么：谢谢

# php - QNAP - 列出目录（网站）/ Web 开发的 PHP 脚本

> ID：12440201
> 
> 赞同：0
> 
> 时间：2012-09-15T19:04:41.730
> 
> 标签：php, development-environment

我有以下内容：

*   QNAP 服务器有 (MYSQL / PHP)

服务器的IP地址是`192.168.1.180`

我正在尝试做的事情：

*   要访问`http://192.168.1.180`，它将显示 PHP 文件，该文件将列出同一目录中列出的所有虚拟主机。

例子：

```
 1\. http://192.168.1.180/index.php (Main page that shows the list of directories)
 2\. http://192.168.1.180/dev-website-001 (some website)
 3\. http://192.168.1.180/dev-my-shop (some website) 
```

该脚本的想法是我只需要放入`192.168.1.180`并选择我正在处理的网站的文件夹。然后我点击了文件夹，我的网站就启动了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:59:03.900

已经找到了一个解决方案，这对我来说是一个更好的主意。我不仅可以获得所有网站的列表，而且可以将其构建成一个可以包含其他信息的漂亮开放网络。

```
http://www.evoluted.net/thinktank/web-development/php-directory-listing-script#comment-1628 
```

上面的链接是我使用过的脚本，效果很好。

# php - 从数据库中存储多个值

> ID：12440210
> 
> 赞同：-2
> 
> 时间：2012-09-15T19:06:44.007
> 
> 标签：php, mysql, database

我从数据库中调用主题中帖子的信息。我习惯`mysql_fetch_assoc()`这样做。我有第一个帖子工作，但我不知道如何访问回复。所以我想如果我得到了该主题的帖子列表，我可以这样做。

这是我正在处理的代码示例：

```
$result1 = mysql_query("SELECT * FROM posts WHERE topic_id='" . $topicinfo['id'] . "'");
  while($row = mysql_fetch_assoc($result1)){
  $postinfo = print_r($row);
} 
```

`$topicinfo[]`是关于该主题的一系列信息。

这段代码的问题是我想将结果保存在一个变量中，而不仅仅是自动打印出来。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:09:22.320

你有没有尝试过：

```
while($row = mysql_fetch_assoc($result1)){ 
    $postinfo[] = $row; 
} 
```

这会将所有内容添加到`$postinfo`.

**然而**

您应该考虑从或切换`mysql_*`到两者之一- 它们都使编写安全代码变得容易。`PDO``mysqli_*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:10:29.743

您要做的是将您从数据库中提取的所有结果推送到一个数组中。

```
$posts = array();
$result = mysql_query("SELECT * FROM posts ...");
while($row = mysql_fetch_assoc($result)){
    $posts[] = $row;
} 
```

现在数组`$posts`将包含数据库中的所有结果。语法`[]`只是简写[`array_push()`](http://php.net/manual/en/function.array-push.php)

* * *

> ### [使用旧的 MySQL 库](https://meta.stackexchange.com/a/136610/172936)
> 
> 我建议你避免使用过时的 mysql_* 函数。[强烈建议不要](http://php.net/mysql_query)将它们用于新代码。更现代的替代品可用且维护得更好。相反，请考虑学习 [准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)，以及使用 [PDO 或 MySQLi](http://php.net/manual/en/mysqlinfo.api.choosing.php)。当严格使用时，它们避免了繁琐的手动转义部分，因此变得更容易并且（作为副产品）更安全地使用。查看[此 PDO 教程](http://goo.gl/vFWnC)，了解一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T01:41:25.800

为了从数据库中存储多条记录，您需要定义一个数组变量并将这些记录推送到一个数组变量中，同时获取每条记录。

例如

```
 $resultset=array(); 
    while($row=msyql_fetch_assoc($res)) 
    {
    array_push($resultset,$row); 
    } 
```

您可以通过 $resultset 变量访问完整的 sql 查询结果集。

# c - 删除 C 中给定子字符串位置的子字符串

> ID：12440212
> 
> 赞同：0
> 
> 时间：2012-09-15T19:06:52.213
> 
> 标签：c, arrays, string, char, substring

假设我有一个`char *example`包含 20 个字符的。我想从 to 中删除每个字符`example[5]`，`example[10]`然后修复数组，以便`example[11]`在`example[4]`.

基本上将删除区域之后的所有字符移动到删除区域开始时。

有任何想法吗？

编辑：我认为可能有一种使用 memcpy 的方法？但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T19:41:41.357

您不能`memcpy()`可靠地使用，因为源和目标之间存在重叠；你可以使用`memmove()`. 由于您知道长度，因此您可以使用：

```
memmove(&example[5], &example[11], (20 - 11 + 1)); 
```

请记住，您也需要复制空终止符。

```
#include <string.h>
#include <stdio.h>

int main(void)
{
    char array[] = "abcdefghijklmnopqrst";
    char *example = array;
    printf("%.2zu: <<%s>>\n", strlen(example), example);
    memmove(&example[5], &example[11], (20 - 11 + 1));
    printf("%.2zu: <<%s>>\n", strlen(example), example);
    return(0);
} 
```

使用 C99 编译器编译，产生：

```
20: <<abcdefghijklmnopqrst>>
14: <<abcdelmnopqrst>> 
```

如果您有 C89 编译器（更具体地说，是 C 库），您将不得不担心`z`格式字符串中的 ，它表示`size_t`参数。最简单的方法是删除并转换with`z`的结果。`strlen()``(unsigned)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:48:09.273

剧透：

```
void cut_the_string(char *str, size_t cutpos, size_t cutlen)
{
  size_t len;

  len = strlen(str);

  if (cutpos >= len) return;
  if (cutpos + cutlen > len) cutlen = len-cutpos;

  memmove( str+cutpos, str+cutpos+cutlen, 1+len - cutpos - cutlen);

  return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:10:47.230

1.  在循环中移动字符或
2.  复制字符示例+11..示例+20，粘贴到示例+4 或
3.  ……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T19:11:27.050

> 有任何想法吗？

我会准备一个并行​​数组，从源数组中复制所有字符，但忽略指定范围内的那些字符。或者，如果源数组不在堆栈上，可以释放它使用的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T20:32:58.317

```
memmove(&example[5], &example[11], strlen(example) - 11 + 1); 
```

请注意，`memcpy`当内存块重叠时， 的行为是未定义的，因此`memmove`在这里更合适。

# python - Fabric：为每个主机外部任务设置配置变量

> ID：12440217
> 
> 赞同：1
> 
> 时间：2012-09-15T19:07:47.767
> 
> 标签：python, deployment, fabric

这个问题类似于 - 将[参数传递给结构任务](https://stackoverflow.com/questions/8960777/pass-parameter-to-fabric-task)

我的问题是我想将我`sphinx html documentation`的部署到`remote server`.

我还想定义一个远程目录，我将文件分别复制到每个主机，在任务功能之外，最好也在`fabfile`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:49:24.127

如果提前知道主机和路径或可以计算，请使用字典。例如：

```
env.sphinx_path = {
    'hosta': 'patha',
    'hostb': 'pathb',
}

@task
@hosts('hosta','hostb')
def foo(dummy_var):
    put('sphinx_stuff', env.sphinx_path%env.host) 
```

否则，您可以像这样传递路径：

```
fab foo:'sphinx/path' 
```

这将在上面的示例中填充 dummy_var 供您随后在任务中使用。

# sql - 使用access数据库合并三个表

> ID：12440226
> 
> 赞同：0
> 
> 时间：2012-09-15T19:09:01.853
> 
> 标签：sql, ms-access

我有三张桌子：

```
1\. user    => user_id[Pk], user_name
2\. payment => payment_id[PK], user_id[FK], amount
3\. receive => receive_id[PK], user_id[FK], amount 
```

现在我想获取如下记录：

**用户名、付款金额、应收金额**

提前致谢..

我读过[这个](https://stackoverflow.com/questions/11175227/combine-three-tables-in-ms-access-2003)，但它对我不起作用。

假设，在用户表中

user_id 用户名
1 ABC
2 XYZ

在付款表中

payment_id user_id 金额
1 1 1000
2 1 200
3 2 150

在接收表中：
receive_id user_id amount
1 2 100
2 1 200

现在我想要像这样的记录

用户名 付款金额 应收金额
ABC 1000 200
ABC 200
XYZ 150 100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:18:22.853

您可能希望按 user_id 汇总金额。

```
SELECT
    user.user_id,
    SUM(payment.amount) AS payment_amount,
    SUM(receive.amount) AS receive_amount
FROM (receive INNER JOIN [user] ON receive.user_id = user.user_id)
              INNER JOIN payment ON user.user_id = payment.user_id
GROUP BY user.user_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:14:01.350

使用内置的查询设计器。将三个表拖入其中，链接键（将字段拖放到彼此上），双击要添加到底部字段列表的字段，然后运行查询。如果需要，选择聚合表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:21:02.697

```
select t1.user_name, t2.amount payementamount, t3.amount receiveableamount from 
User t1,
payment t2,
receive t3
where
t1.user_id=t2.user_id and
t1.user_id=t3.user_id 
```

> 你可以试试这个......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T19:15:31.560

您可能需要将此调整为 MSAccess 语法，但其想法是`LEFT JOIN`与用户一起执行付款和接收表，因为这是父表，而其他两个表可能有也可能没有此用户的记录。

```
SELECT 
    u.user_name, 
    ISNULL(p.amount, 0) as paymentamount,
    ISNULL(r.amount, 0) as receivableamount
FROM 
    user u
    LEFT JOIN payment p
    ON u.user_id = p.user_id
    LEFT JOIN receive r
    ON u.user_id = r.user_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T19:17:13.277

```
select 
    user.user_name, payment.amount, receive.amount 
from user 
    join payment on user.user_id == payment.user_id 
    join receive on user.user_id = receive.user_id; 
```

# matlab - Matlab中的二等分方法代码错误

> ID：12440229
> 
> 赞同：1
> 
> 时间：2012-09-15T19:09:23.003
> 
> 标签：matlab, bisection

我需要编写二分法的正确实现，这意味着我必须解决所有可能的用户输入错误。这是我的代码：

```
 function [x_sol, f_at_x_sol, N_iterations] = bisection(f, xn, xp, eps_f, eps_x)
    % solving f(x)=0 with bisection method
    %   f is the function handle to the desired function,
    %   xn and xp are borders of search,
    %   f(xn)<0 and f(xp)>0 required,
    %   eps_f defines how close f(x) should be to zero,
    %   eps_x defines uncertainty of solution x

    if(f(xp) < 0)
       error('xp must be positive')
    end;
    if(f(xn)>0)
        error('xn must be negative')
    end;
    if (xn >= xp)
        error ('xn must be less than xp')
    end;

    xg=(xp+xn)/2; %initial guess
    fg=f(xg); % initial function evaluation

    N_iterations=1;

    while ( (abs(fg) > eps_f) & (abs(xg-xp) > eps_x) )
        if (fg>0)
            xp=xg;
        else
            xn=xg;
        end
        xg=(xp+xn)/2; %update guess
        fg=f(xg); %update function evaluation

        N_iterations=N_iterations+1;
    end
    x_sol=xg; %solution is ready
    f_at_x_sol=fg;
    if (f_at_x_sol > eps_f)
    error('No convergence')
    end 
```

这是我在 Matlab 中尝试测试时收到的错误消息：

```
 >> bisection(x.^2, 2, -1, 1e-8, 1e-10)
    Attempted to access f(-1); index must be a positive integer or logical.

    Error in bisection (line 9)
    if(f(xp)<0) 
```

我试图查看我的错误代码是否有效，但看起来不像。当我尝试在一个应该可以工作的函数上测试它时，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:32:28.537

如果 f 是函数句柄，那么您需要传递一个函数。代替

```
bisection(x.^2, 2, -1, 1e-8, 1e-10) 
```

你应该做类似的事情

```
bisection(@(x)x.^2, 2, -1, 1e-8, 1e-10) 
```

# javascript - Javascript 文档成员变量

> ID：12440230
> 
> 赞同：1
> 
> 时间：2012-09-15T19:09:23.553
> 
> 标签：javascript, variables, dom

当我发现可以使用以下语法创建变量时，我对 JavaScript 很陌生，并且正在使用它：

```
document.foo = 'bar'. 
```

据我所知，它的优势在于，当我执行以下操作时：

```
if (document.foo)
     do something; 
```

如果变量尚未启动，解释器不会抛出异常。

我不知道但想知道的是，创建这样的变量的术语是什么。它只是全局变量，还是成员变量，还是新类型。我还想知道是否有任何理由我不想以这种方式创建变量。

因此，任何希望提供大师建议的人，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:19:35.447

在 Javascript 中，有`primitive`诸如数字、字符串和布尔值之类的值。Javascript 中的其他所有内容都是`object`.

对象可能具有属性，例如，`my_array.length`并且它们可能具有方法，例如`my_array.pop()`.

在 Javascript 中，可以相当自由地添加方法和属性，几乎没有例外。

现在——问题来了——

有`native objects`Javascript 环境本身提供的，例如,`Object`等等。`Array``Number`

然后`host objects`是运行Javascript的系统提供的。在浏览器中，宿主对象包括`document`一些可能的其他对象。

胡闹`host object`可能会失败——所有的赌注都没有了。在非常标准化和公开的方式之外与它们混淆被认为是*非常糟糕的做法。*

老实说，只是`var`你的变量。如果需要，您可以创建某种`options`变量，并在其中自由更改属性......像这样：

```
var options = {};

options.foobar = true;

if (options.foobar) {
  alert("You have chosen a Foobar! Congrats");
}

if (!options.fizzban) {
  alert("You have not chosen to play cards with Captain Kirk");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:23:37.257

简短的回答：该术语是隐式声明。

有点臃肿的答案：虽然以这种方式创建变量是完全合法的，但在应用于面向对象编程和记录软件的能力时存在一些缺点。

如果您的对象在运行时具有不同的结构配置，那么您的软件状态可能会变得非常难以预测，并且维护代码变得越来越难。

我的建议是：使用某种继承模型或利用 javascripts 原型架构提前声明（并设置明智的默认值！）。这使得文档更容易，也提供了一个机会来审查你的软件目的的心智模型。

john resig 对 JS 继承的应用进行了很好的介绍：http: [//ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

# javascript - 使用正则表达式和 javascript 使链接可点击但不覆盖预先存在的链接？

> ID：12440232
> 
> 赞同：0
> 
> 时间：2012-09-15T19:09:49.120
> 
> 标签：javascript, regex, hyperlink, clickable

我需要使用 javascript 使链接可点击，我认为正则表达式将是最简单的，更不用说最快的方法了。我希望所有链接都是可点击的，并且不重写已经存在的可点击链接。

```
Example: 
Here is a link to visit http://www.example.com/page Please take a look <a href="http://www.example.com/page">here</a>.

Becomes: Here is a link to visit <a href="http://www.example.com/page">http://www.example.com/page</a> Please take a look <a href="http://www.example.com/page">here</a>.

Another example: Here is a link to visit http://www.example.com/page Please take a look here: <a href="http://www.example.com/page">http://www.example.com/page</a>

Becomes: Here is a link to visit <a href="http://www.example.com/page">http://www.example.com/page</a> Please take a look here: <a href="http://www.example.com/page">http://www.example.com/page</a>

And finally: <p id="demo">http://example.com/
<br><a href="http://example.com/123">http://example.com/123</a>
<br><a href="http://Google.ca/">http://Google.ca/</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:35:00.087

This should do the trick:

```
var pattern = new RegExp("[^\"'](http://[^ ]*)","g");
var newContent = yourString.replace(pattern," <a href=\"$1\">$1</a>"); 
```

To tace care of the comment:

```
var pattern = new RegExp("([^\"'])(http://[^ ]*)","g");
var newContent = yourString.replace(pattern,"$1<a href=\"$2\">$2</a>"); 
```

One more edit after comment, the previous one asumed the link was not at the beginning:

```
var pattern = new RegExp("([^\"']||^)(http://[^ ]*)","g");
var newContent = yourString.replace(pattern,"$1<a href=\"$2\">$2</a>"); 
```

You have probably seen the pattern already, in regular expressions what is inside () are asigned to a return parameter $1 and $2 in this case, witch is is used in the replace statement to rebuild the string.. The pattern here must probably be extended further as you come across other exceptions not catched by the pattern, for instance putting the link inside () would not give the desired result. A nice site to play with regular expressions is [regextester.com](http://regextester.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:46:34.197

```
var text = [
        "http://www.example.com/page address at the begining then a well formated a tag take a look <a href='http://www.example.com/page'>here</a>.",
        " text in front http://www.example.com/page Please take a look <a href='http://www.example.com/page'>here</a>.",
        "  http less with get vars www.example.com/page?foo=bar Please take a look  <a href='http://www.example.com/page'>here</a>.",
        '<p>http://example.com/<br /><a href="http://example.com/123">http://example.com/123</a><br /><a href="http://Google.ca/">http://Google.ca/</a></p>'
    ] ,
    reg = /([\s>]|^)((?:http:\/\/)?(?:[a-z][\w-]+)+(?:\.[\w-]+)*(?:\.[a-z]{2,3})(?:[^ <]+))(?=[\s<]|$)/g,
    output = '';
    for(var key in text){
        $('body').append(
        '<div>'+
          text[key]
                .replace(reg, '$1<a href="$2">$2</a>')
                .replace(/(href=['"])(?!http:\/\/)/g, '$1http://')+
        '</pre>'
        );
    } 
```

可以在浏览器/Firebug 控制台中进行测试。

应该进行更多测试以找到最受信任的极端分隔符/标记

# c - 程序读取一个 4 位整数并输出数字的总和

> ID：12440238
> 
> 赞同：1
> 
> 时间：2012-09-15T19:10:47.707
> 
> 标签：c, scanf

我在编程入门课程中遇到了一项作业。我们正在使用 C。作业是：

> 编写一个程序，要求用户输入一个四位数的 INTEGER 并输出整数中四位数的和。

我尝试了不同的东西，但是当我测试程序时它不起作用。当我编译它时，我没有收到任何错误，所以当我继续测试它时，它不会给我正确的答案。我尝试了不同的东西，它只是给了我一个不同的答案，但它仍然是错误的。

我得到了这个来测试程序：当被要求输入四位整数时输入 1234 并且答案必须是 10。

```
#include <stdio.h>

int
main(void)
{
    int sum,digit1,digit2,digit3,digit4;
    printf("enter four digit integer:\n");
    scanf("%d", &digit1,&digit2,&digit3,&digit4);

    digit1=(digit1%1000)/10;
    digit2=(digit2%1000)/10;
    digit3=(digit3%1000)/10;
    digit4=(digit4%1000)/10;

    /*calculation*/
    sum=digit1+digit2+digit3+digit4;

    printf ("answer is: %d\n",sum);
    return (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:13:48.677

一个问题是这个

```
scanf("%d%d%d%d", &digit1,&digit2,&digit3,&digit4); 
```

否则你只读一位数字

参见[维基百科](http://en.wikipedia.org/wiki/Scanf)。

但是......最好这样做

```
scanf("%d", &number);
sum  = 0;
do 
{
    //get a digit 
    sum += number % 10;
    //remove the digit  
    number /= 10;
} while (number > 0);
print ("%d", sum); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T19:14:28.720

当您读取用户输入时，您将其读取为一个数字：

```
printf("enter four digit integer:\n");
scanf("%d", &digit1,&digit2,&digit3,&digit4); 
```

应该：

```
printf("enter four digit integer:\n");
scanf("%d", &number); 
```

接下来，您需要使用`%`and`/`运算符从读取的数字中提取单个数字，最后将它们相加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T19:15:23.750

问题是你的，它期望你传递的每个参数都有`scanf`一个格式化程序。`%d`

所以代替这个：

```
scanf("%d", &digit1,&digit2,&digit3,&digit4); 
```

你应该有这个（如果你分别输入数字，它们之间有一个空格）：

```
scanf("%d", &digit1);
scanf("%d", &digit2);
scanf("%d", &digit3);
scanf("%d", &digit4); 
```

这将读取四个不同`int`的 s。如果你想读入一个整数然后提取单个数字，那么这就足够了：

```
scanf("%d", &digit1); 
```

`int scanf ( const char * format, ... );`

> 返回成功转换和分配的字段数

[来自 MSDN](http://msdn.microsoft.com/en-us/library/9y6s16x1%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T09:35:08.680

```
#include <stdio.h>

main()
{
    int n, rem;
    int sum=0;

    printf("enter a no.");
    scanf("%d",&n);

    while(n!=0)
    {
        rem = n%10;
        sum += rem;
        n=n/10;
    }

    printf("sum is=%d\n",sum);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-10T10:03:34.490

首先，不需要输入四个整数变量来[查找数字的数字总和](http://codeforwin.blogspot.in/2015/06/c-program-to-calculate-sum-of-digits.html)。

需要以这种方式完成

```
#include <stdio.h>  

int main()  
{  
    int num, sum=0;  

    /* 
     * Reads a number from user 
     */  
    printf("Enter any number to find sum of its digit: ");  
    scanf("%d", &num);  

    /* 
     * Finds the sum of digits  
     */  
    while(num!=0)  
    {  
        /* Find the last digit from num and add to sum */  
        sum += num % 10;

        /* Removes last digit from num as its work has been done*/  
        num = num / 10;  
    }  

    printf("\nSum of digits = %d", sum);  

    return 0;  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T02:42:50.400

为简单起见，这样的事情就可以了。

```
#include <stdio.h>
int main(void)
{

int sum,num,digit1,digit2,digit3,digit4;
printf("enter four digit integer:\n");
scanf("%d",&num);

digit1=(num/1000);
digit2=(num%1000)/100;
digit3=(num%100)/10;
digit4=(num%1000)%10;

/*calculation*/
sum=digit1+digit2+digit3+digit4;

printf("answer is: %d\n",sum);
return (0);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T13:36:49.607

下面是基于我的技术。它是通过对数字进行数学分解然后打印出单个结果来完成的。这里：

```
#include<stdio.h>
#include<stdlib.h>

int main ()

{   //Code Begins
//Variable Initialization
int digit, dig1, dig2, dig3, dig4,digi, sum;
//Acquiring input
printf("Enter 4-Digit Number:\n");
scanf("%d", &digit);
//Number resolution technique
//Digit at 1000th place
dig1 = (digit/1000);
printf ("Digit at 1000th place is: %d \n", dig1);
//Digit at 100th place
dig2 = (digit-(dig1*1000))/100;
printf ("Digit at 100th place is: %d \n", dig2);
//Digit at 10th place
digi = ((digit/100)*100);
dig3 = (digit-digi)/10;
printf ("Digit at 10th place is: %d \n", dig3);
//Digit at unit place
dig4 = ((digit-((digit/10)*10)));
printf ("Digit at unit place is: %d \n", dig4 );
//Sum of Digits
sum = dig1+dig2+dig3+dig4;
printf ("Sum of digits in the number is: %d \n\n", sum);
//Self Applaud
printf ("Isn't it Awesome ! A big hand of applaud for my technique !!! \n\n\n");
system ("Pause");
return 0;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-12-22T16:26:50.407

当用户仅输入 4 个数字时，输出正确。当用户添加超过 4 个 no 时，输出不同......

```
#include<stdio.h> 
```

无效的主要（）{

```
int num,d1,d2,d3,d4,sum;

printf("\nEnter the four digits you wish to add: ");

scanf("%d",&num);

d1=num%10;
num=num/10;
d2=num%10;
num=num/10;
d3=num%10;
d4=num/10;

sum=d1+d2+d3+d4;

printf("\n*The sum of four digits is: %d*",sum); 
```

}

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-04-12T17:32:09.213

```
#include <stdio.h>
#include <stdlib.h>
//writing program to read four digit integer and print the sum of its digits
//by nirav adatiya
main()
{
    int num,a,b,c,d,result;
    printf("enter four digit number for sum ");
    scanf("%d",&num);
    a=num%10;
    b=num%100/10;
    c=num%1000/100;
    d=num%10000/1000;
    result=a+b+c+d;
    printf("so\na=%d\nb=%d\nc=%d\nd=%d",a,b,c,d);
    printf("\nresult is%d ",result);
} 
```

# ios - 在 Map View iOS 上重新添加叠加层

> ID：12440246
> 
> 赞同：1
> 
> 时间：2012-09-15T19:12:15.060
> 
> 标签：ios, mkmapview, mkoverlay

我有个问题。想象一下，您正在获取叠加多边形数据（纬度和经度）并在地图视图上绘制叠加层。[mapView addOverlays:overlayArray];

在多边形上绘制叠加层很容易。但是，如果您使用具有不同叠加层的计时器绘制叠加层，那就很复杂了。因为您不希望将叠加层绘制在先前的叠加层上。如果您添加和删除，则会发生闪烁！！！

您正在创建天气雷达图的图像。

他们如何实现这种连续（计时器）叠加图纸？有任何想法吗）？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:47:44.760

你看过 MKMapView 参考吗？ [http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

描述了一些方法，您可以使用这些方法来操作覆盖数组。这样，您不必添加和删除整个数组。

编辑：添加和删除覆盖

```
– addOverlay:
– addOverlays:
– removeOverlay:
– removeOverlays:
– insertOverlay:atIndex:
– exchangeOverlayAtIndex:withOverlayAtIndex:
– insertOverlay:aboveOverlay:
– insertOverlay:belowOverlay:
– viewForOverlay: 
```

# mysql - MPTT 的扩展效率低吗？

> ID：12440248
> 
> 赞同：1
> 
> 时间：2012-09-15T19:12:36.527
> 
> 标签：mysql, cakephp, nosql, rdbms, mptt

我正在使用严重依赖于修改的预排序遍历树的 CakePHP ACL。我们一直担心它们是多么容易扩展。

显然，随着越来越多的行需要更新它们的列`lft`和`rght`列，插入将很快变得昂贵。

我认为有两件事我*认为*是正确的：

1.  UPDATE 查询本身不会有太大的权重，因为无论数据库大小如何，它们都将保持不变。
2.  数据库对实际文件系统的读/写操作显然开始变得越来越昂贵。

有什么我错过的吗？事情是因为这个和其他一些事情，我们真的在考虑迁移到 NoSQL DB。害怕在 Cake 上这样做，因为这意味着使用非标准数据源。

# objective-c - UIPopoverController 导航栏外观

> ID：12440250
> 
> 赞同：1
> 
> 时间：2012-09-15T19:12:51.227
> 
> 标签：objective-c, ipad, uinavigationbar, appearance

我正在使用此代码在整个应用程序中自定义导航栏图像。

```
UIImage *navBarTexture = [[UIImage imageNamed:@"NavBarTexture_iPad"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearance] setBackgroundImage:navBarTexture forBarMetrics:UIBarMetricsDefault];
    [[UINavigationBar appearance] setBackgroundImage:navBarTexture forBarMetrics:UIBarMetricsLandscapePhone]; 
```

这很有效。但是，当在 UIPopoverControllers 的导航栏上使用这个图像时，它看起来有点奇怪。我想使用它的默认 Apple 图像，我怎样才能让它保持原来的外观？

我知道我可以使用`appearanceWhenContainedIn:`，但是如果我将 nil 作为图像返回，我只会得到一个黑色空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:00:00.053

我首先想到的是在自定义之前简单地从导航栏中获取默认图像。我很震惊，它起作用了。

```
UINavigationBar *appearanceProxBar = [UINavigationBar appearance];
UIImage *defaultImage = [appearanceProxBar backgroundImageForBarMetrics:UIBarMetricsDefault];
[appearanceProxBar setBackgroundImage:navBarTexture forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearanceWhenContainedIn:[UIPopoverController class], nil] setBackgroundImage:defaultImage forBarMetrics:UIBarMetricsDefault]; 
```

此外，正如您在答案中看到的那样，WWDC 2012 - 216 - iOS 上的高级外观自定义有一个巧妙的技巧，将外观代理转换为适当类的实例，因此编译器可以警告无法识别的选择器，以及代码完成更精确。

# windows - 更改文件中的单个字节

> ID：12440252
> 
> 赞同：0
> 
> 时间：2012-09-15T19:13:10.170
> 
> 标签：windows, batch-file

使用批处理文件，是否可以修改文件的单个字节？

我希望进行以下更改：

`Address 0x829: 1B -> 1A`在文件中`a\b\c.class`

如您所见，它是对已编译的 java 类文件的编辑，如果有帮助的话，但我不想使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:17:01.533

如果您有`debug`¹，则可以编写脚本

命令`e`编辑内存

这是一个教程：[http ://www.armory.com/~rstevew/Public/Tutor/Debug/debug-manual.html](http://www.armory.com/~rstevew/Public/Tutor/Debug/debug-manual.html)

¹调试仅在 32 位系统上可用。它在 XP 中可用，但在那之后我留下了 32 位......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:25:57.170

使用纯批处理非常难以处理二进制数据，如果数据包含 NULL，那么它将完全失败。

但是你可以使用 vbscript，它可以处理它并从 WinXP 安装到 Win7

# python - C++ Python 关闭我的程序

> ID：12440265
> 
> 赞同：3
> 
> 时间：2012-09-15T19:14:10.097
> 
> 标签：python, c++, direct3d

我正在用 C++ 编写一个带有 Direct3D 和 Python 的小程序。我创建了我的窗口，一切正常。但如果我尝试调用“Py_Initialize();” 我的程序关闭。

（它以代码 1 结束）有什么问题？

编辑：这是我的代码的一些部分。

**MainIncludes.h**

```
#include "Windows.h"
#include <d3d9.h>
#pragma comment (lib, "d3d9.lib")

#include <d3dx9.h>
#pragma comment (lib, "d3dx9.lib") 
```

**main_d3dwindow.cpp**

```
int WINAPI WinMain(HINSTANCE hInstance,
               HINSTANCE hPrevInstance,
               LPSTR lpCmdLine,
               int nCmdShow)
{
HWND hWnd;
WNDCLASSEX wc;

ZeroMemory(&wc, sizeof(WNDCLASSEX));

wc.cbSize = sizeof(WNDCLASSEX);
wc.style = CS_HREDRAW | CS_VREDRAW;
wc.lpfnWndProc = WindowProc;
wc.hInstance = hInstance;
wc.hCursor = LoadCursor(NULL, IDC_ARROW);
wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
wc.lpszClassName = L"WindowClass";

RegisterClassEx(&wc);

hWnd = CreateWindowEx(NULL,
                      L"WindowClass",
                      L"Program",
                      WS_OVERLAPPEDWINDOW,
                      300, 300,
                      800, 600,
                      NULL,
                      NULL,
                      hInstance,
                      NULL);

ShowWindow(hWnd, nCmdShow);
mainWindow = hWnd;

initD3D(hWnd);
init_python();

MSG msg;

while(TRUE)
{
    while(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    if(msg.message == WM_QUIT)
        break;

    render_frame();
}

cleanD3D();

return msg.wParam;
} 
```

**main_python.cpp**

```
#include "Python.h"
void init_python() {
     Py_Initialize();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T15:26:20.427

据我所知， Py_Initialize() 只是初始化 Python 本身，而不是作为交互式解释器。此时，Python 正在运行，但正在等待执行命令。另外，你不应该忘记调用 Py_Finalize() 来释放内存。

```
void pythonShell() {
   Py_Initialize();
   std::string pythonCommand = "execfile('python_script.py')"; // file or python command
   PyRun_SimpleString(pythonCommand.c_str());
   FILE* fp = stdin;
   char filename[] = "Embedded";
   PyRun_InteractiveLoop(fp, filename);
   Py_Finalize();
} 
```

PyRun_InteractiveLoop() 函数可以根据需要从 C++ 代码中执行交互式 shell。我认为这里发生的事情是你只是初始化 Python，就是这样，它没有任何事情要做，因为你没有向它传递任何脚本/命令。

希望这可以帮助

# python - 永远运行 Python 服务器

> ID：12440269
> 
> 赞同：0
> 
> 时间：2012-09-15T19:14:22.423
> 
> 标签：python, sockets

我正在尝试在 Python 中实现一个小型聊天服务器-客户端对。我已经编写了服务器和客户端，但是尝试在我的网站上运行服务器时遇到了一点问题。

这个例子来自文档。我对其进行了一些修改以支持多个客户端：

```
#!/usr/bin/env python

import socket

TCP_IP = '127.0.0.1'
TCP_PORT = 9090
BUFFER_SIZE = 256

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((TCP_IP, TCP_PORT))
s.listen(1)

while True:
    conn, addr = s.accept()
    print('Connection address:', addr)
    while True:
        data = conn.recv(BUFFER_SIZE)
        if not data: continue
        # handle the request 
    conn.close() 
```

此服务器使用一个 while 循环，这意味着它应该只运行一次。但是，我不知道如何只运行一次服务器。

我知道我必须`socket.accept()`在一个`while`循环中执行才能与多个客户端一起工作，但问题实际上是在我的 Web 服务器上运行它并让它永远等待连接。

帮我！~机会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:22:33.030

一方面，您的服务器将处理多个客户端，但一次只能处理一个。这对于基于请求-响应的服务器（如 HTTP 服务器）来说并不是那么糟糕。在您的情况下，您可能希望与每个客户端保持开放连接。

您可能想看看[SocketServer](http://docs.python.org/library/socketserver.html)库。这个库将帮助您创建一个同时处理多个客户端的服务器。为此，您可以使用 ThreadingMixin。

为这个库提供的示例非常类似于聊天服务器，因此您可以将其用作您自己的代码的基础。

在服务器中，您需要创建已连接客户端的列表。您应该创建一个 RequestHandlder，它将在无限循环中从客户端读取传入数据。从客户端接收到数据后，它应该将数据发送给列表中的所有其他客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:23:14.910

注意：这是指初始代码示例，而不是后续注释。

因此，不确定您从哪个文档中提取了此代码示例。如果您可以包含指向该链接的链接，那就太好了。

我认为您可能需要更改此行：

```
if not data: continue 
```

对此：

```
if not data: break 
```

我记得“继续”将放弃执行剩余的语句并立即将您带回循环的顶部，而“中断”将带您到循环的底部，这应该允许其余逻辑关闭连接以完成其工作。

据我所知，这将允许一个连接，然后在随后的连接尝试中似乎没有做任何事情。我想这就是你所说的“永远奔跑”的意思。就像在运行，但似乎没有响应后续请求，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T19:24:13.873

简单的问题。1）您的嵌套 while 循环没有结束。因此，您将只接收来自一个客户端的数据。2）您可能需要为每个新连接使用单独的线程。就像是：

```
While True:
    if new_connection:
        launch_new_thread_for_it 
```

3）记得在客户端断开连接时发现情况！如果客户不在，检查是否有新数据是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T20:38:42.820

要解决多客户端问题：

```
#!/usr/bin/env python

import threading
import socket

clients = {}

class ClientThread(threading.Thread):
    def __init__(self, conn, addr):
        threading.Thread.__init__(self)
        self.conn = conn
        self.addr = addr
        print("Connected to", str(self))
    def __str__(self):
        return "{0}:{1}".format(*self.addr)
    def run(self):
        while True:
            try:
                data = self.conn.recv(256)
            except socket.error:
                print("Disconnected from", str(self))
                break
            if not data: continue
            k = str(data, "UTF-8")
            print(k)
            if k.startswith("LOGN"):
                name = k.split()[1]
                clients[name] = self
                self.conn.send(bytes("[SVR] Logged in as @" + name + "\n", "UTF-8"))
            elif k == "QUIT": break
        conn.close()

TCP_IP = '127.0.0.1'
TCP_PORT = 9090
BUFFER_SIZE = 256

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((TCP_IP, TCP_PORT))
s.listen(1)
while True:
    conn, addr = s.accept()
    ClientThread(conn, addr).start() 
```

但我仍然不知道如何在我的网站上运行它。

# android - 首选项活动中的 CheckBoxPreference 问题

> ID：12440273
> 
> 赞同：0
> 
> 时间：2012-09-15T19:15:05.633
> 
> 标签：android

我想实施一项偏好活动。

我有两个`CheckBoxPreference`：

```
CheckBoxPreference a ( default value false)
CheckBoxPreference b( default value false ) 
```

我想要这样，如果用户检查`preference a` 他**不能**检查`preference b,`，如果首先检查偏好 b 他不能检查 a。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:36:40.320

希望这些链接对你有用，你可以从这里得到一些想法......:)

```
you can try with **android:disableDependentsState="false"** or you can [Check here](http://developer.android.com/reference/android/preference/CheckBoxPreference.html) and [Here](http://developer.android.com/reference/android/R.attr.html#disableDependentsState) 
```

# android - Android SMS监听器错误的应用程序上下文

> ID：12440276
> 
> 赞同：0
> 
> 时间：2012-09-15T19:15:52.783
> 
> 标签：android, sms, broadcastreceiver, applicationcontext

我正在使用 SMS 监听器，代码如下：

```
public class SMSReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        EventEntry entry = ((MyApplication)context.getApplicationContext()).getCurrent();
        System.out.println("Received message: " + smsMessage[0].getMessageBody() + " - SILENCE IS " + ((entry != null) ? "ON" : "OFF"));
    }
} 
```

并在修改 AndroidManifest 之后

```
<application
    android:name="MyApplication" ... 
```

在我的代码的另一部分（在 AlarmManager 的 BroadcastReceiver 中），我有

```
public void onReceive(Context context, Intent intent) {
    ((MyApplication).context.getApplicationContext()).setCurrent("TESTING");
} 
```

但是，当我运行应用程序并发送示例文本时，我会收到以下调试消息：

```
09-15 15:07:30.974: I/System.out(21625): DEBUG!!!!!! Setting current event to TESTING
09-15 15:07:54.399: I/System.out(21605): DEBUG!!!!!! Getting current event: null 
```

任何想法为什么我的应用程序上下文不同步？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:46:11.067

我可以给你一个替代的解决方案，只是你可以在你的**MyApplication 类中****覆盖 onCreate()**方法。

 **```
class MyApplication extends Application {
private static MyApplication singleTon;

public MyApplication getInstance(){
return singleTon;
}

@Override
public void onCreate() {
singleTon = this;
}

...... Here your remaining code....

} 
```

现在您可以访问该类的实例，然后调用 getApplicationContex();

```
 (MyApplication.getInstance().getapplicationContext()).getCurrent(); 
```

希望对你有帮助……：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:47:27.193

如果系统面临内存不足，您的应用程序可以随时终止。所以静态变量或单例将被重新初始化。也许这就是它为空的原因。

您应该使用 SharedPreferences 而不是将其存储在应用程序类中**

# c# - 如何在 IIS 中为 ASP.NET MVC 启用 HTTP PUT 和 DELETE？

> ID：12440277
> 
> 赞同：76
> 
> 时间：2012-09-15T19:16:07.510
> 
> 标签：c#, asp.net-mvc-3, iis-7.5, http-put, http-delete

我在我的 ASP.NET MVC3 应用程序中`PUT`使用HTTP 。`DELETE`当我在本地运行它时，一切正常；但是当我将应用程序发布到服务器时，这些方法不起作用。

是否有任何特殊设置可以使 Web 服务器支持`PUT`和`DELETE`请求？我正在使用 IIS 7.5 的共享主机。

**更新：**

我启用`PUT`并`DELETE`请求`IIS manager`. `PUT`命令工作正常。但`DELETE`仍然无法正常工作。我通过以下方式创建请求`jQuery`：

我在这个页面：

```
http://domain.com/dashboard/edit-site/103323/links/ 
```

我的ajax调用是：

```
$.ajax({
    // url: same as page-url,
    cache: false,
    type: 'DELETE',
    data: { linkid: $(link).data("linkid") },
    beforeSend: function () {
        // doing something in UI
    },
    complete: function () {
        // doing something in UI
    },
    success: function (data) {
        // doing something in UI
    },
    error: function () {
        // doing something in UI
    }
}); 
```

这将创建一个这样的请求：

```
Accept: */*
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Origin: http://domain.com
Referer: http://domain.com/dashboard/edit-site/103323/links/
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
X-Requested-With: XMLHttpRequest 
```

有了这个**`Form Data`**：

```
linkid:104044 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-16T00:38:55.010

转到**IIS 管理器**中的**处理程序映射**。找到，双击它。单击**Request Restrictions...**按钮，然后在 Verbs 选项卡上，添加和。 **`ExtensionlessUrlHandler-Integrated-4.0`**`DELETE``PUT`![在此处输入图像描述](../Images/028e91f0985eefdb708548bbc2897343.png)****

 ***** * *

**编辑：可能的 WebDav Publisher 问题**

您在 2008 年服务器上运行的已删除帖子中提到过，对吗？尝试删除**webDav**角色，或从您的站点禁用它`config`：在`system.webServer`->`modules`部分，删除`WebDAVModule`模块：

```
<system.webServer>
  <modules>
    <remove name="WebDAVModule" />
  </modules>
  <handlers>
    <remove name="WebDAV" />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-12-14T12:49:57.333

如果您在 asp.net web api 的生产环境中遇到以下错误，`PUT`或者`DELETE`这些方法在本地运行良好。

> 405 - 不允许用于访问此页面的 http 动词。

只需在服务器的 web.config 中添加以下设置

```
<system.webServer>
    <handlers>
      <remove name="WebDAV" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
</system.webServer> 
```

原因：[webDAV](https://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-webdav-on-iis)模块默认阻止 PUT/DELETE 方法。所以首先删除这个模块及其处理程序。我们首先删除任何现有的 ExtensionlessUrlHandler-Integrated-4.0 设置，并添加所需的`path`和`verbs`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-06-10T12:49:40.567

您只需要在 web.config 中添加以下代码行

```
<system.webServer>
 <security>
    <requestFiltering>
        <verbs allowUnlisted="false">
            <add verb="GET" allowed="true" />
            <add verb="POST" allowed="true" />
            <add verb="DELETE" allowed="true" />
            <add verb="PUT" allowed="true" />
        </verbs>
    </requestFiltering>
</security> 
```

和

```
<modules>
    <remove name="WebDAVModule" />
</modules>
<handlers>
    <remove name="WebDAV" />
</handlers> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:02:12.227

最后我发现答案很侥幸。我将 jQuery 调用更改为下面的 tho，它现在运行良好。

```
$.ajax({ 
    url: this.href + "?linkid=" + $(link).data("linkid"), 
    cache: false, 
    type: 'DELETE', 
    // data: { linkid: $(link).data("linkid") }, 
    beforeSend: function () { 
        // doing something in UI 
    }, 
    complete: function () { 
        // doing something in UI 
    }, 
    success: function (data) { 
        // doing something in UI 
    }, 
    error: function () { 
        // doing something in UI 
    } 
}); 
```

你有什么解释为什么`DELETE`不能打电话**`Form Data`**吗？在本地时它已经并且工作正常？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-30T10:30:46.693

正确的做法是找出真正的阻碍者，然后删​​除这个来源，而不是四处猜测。请在此处检查如何：[https ://stackoverflow.com/a/70530342/592651](https://stackoverflow.com/a/70530342/592651)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-04T16:23:01.987

我遇到了同样的问题。你们只能访问服务器部署 API 并卸载 WebDAV 并完成。你可以参考这个

[https://achrafbenalaya.com/2020/10/17/405-method-not-allowed-in-iis/](https://achrafbenalaya.com/2020/10/17/405-method-not-allowed-in-iis/)****

# c++ - 多重继承的可变参数宏

> ID：12440280
> 
> 赞同：1
> 
> 时间：2012-09-15T19:16:46.793
> 
> 标签：c++, inheritance, macros

我写了一个宏，可以在类定义周围添加，这将有效地完成它（防止子类化）。这种终结方法是一种相当常见的技术，在[C++ FAQ](http://www.parashift.com/c++-faq-lite/final-classes.html)中有说明：

```
#define FINALIZE(NAME,...) \
    NAME##Finalizer {\
        private:\
            friend class NAME;\
            inline NAME##Finalizer(void) {}\
    };\
    class NAME : public virtual NAME##Finalizer, __VA_ARGS__ 
```

例如：

```
class FINALIZE(Fred) {};
//The above line evaluates to:
//  class FredFinalizer {
//      private:
//          friend class Fred;
//          inline FredFinalizer(void) {}
//  };
//  class Fred : public virtual FredFinalizer, {};

class George {};
class FINALIZE(Fred2, public George) {};
//The above line evaluates to:
//  class Fred2Finalizer {
//      private:
//          friend class Fred2;
//          inline Fred2Finalizer(void) {}
//  };
//  class Fred2 : public virtual Fred2Finalizer, public George {};

class Velma : public Fred { Velma(void) {} /*Note compile error*/ };
class Velma2 : public Fred2 { Velma2(void) {} /*Note compile error*/ }; 
```

这非常有效。问题是我现在想要一种“禁用”宏的方法。那是：

```
class FINALIZE(Fred) {};
//The above line evaluates to:
//  class Fred {};

class George {};
class FINALIZE(Fred2, public George) {};
//The above line evaluates to:
//  class Fred2 : public George {}; 
```

问题是`class Fred2 : public George {};`与没有继承（`class Fred {};`）的情况发生冲突：在第一种情况下，必须始终有一个冒号，在第二种情况下，必须没有。请注意，启用宏时这不是问题，因为该类*始终**至少*继承自NAME##Finalizer 类。

我怎样才能写一个宏来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:54:13.200

我建议制作两个宏，一个用于准备终结器，一个用于使用：

```
#define PREP_FINALIZE(NAME) \
    class NAME##Finalizer {\
        private:\
            friend class NAME;\
            inline NAME##Finalizer() {}\
    }

#define FINALIZE(NAME) virtual NAME##Finalizer 
```

所以在你的例子中：

```
PREP_FINALIZE(Fred);
class Fred : FINALIZE(Fred) {};

class George {};
PREP_FINALIZE(Fred2);
class Fred2 : FINALIZE(Fred2), public George {}; 
```

但是更重要的是，您忘记了将复制构造函数设为私有。没有它，你的方式很容易作弊：

```
// cheating :D
class Velma : public Fred, FINALIZE(Fred) { 
   Velma() : FredFinalizer(*(FredFinalizer*)0) {} /*Who said this is compiler error */ 
}; 
```

将终结器的复制构造函数设为私有。或者使用我对非常相似的问题的回答[。](https://stackoverflow.com/a/12139218/1463922)

对于 C++11，只需使用 final ;)

# javascript - 2.5/3D 世界/街道

> ID：12440284
> 
> 赞同：0
> 
> 时间：2012-09-15T19:17:25.060
> 
> 标签：javascript, html, 2d

我正在尝试使用`html5`没有`WebGL`.

不幸的是，我找不到任何可以使用的引擎。有谁知道可以做到这一点的引擎，还是我必须自己编写引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:50:15.867

我在[three.js方面取得了相当不错的成功](https://github.com/mrdoob/three.js/)

当时我在看画布和 3D，这是唯一一个突出的。轻松让您在画布渲染和 WebGL 渲染之间切换，上面的链接中有*很多*示例可供查看。

我希望只使用 Canvas 渲染，但遇到了场景中对象数量的性能问题，并转而使用[Unity3D](http://unity3d.com/)。那是另一锅鱼，但根据场景的资产，您可能会遇到相同的问题。

# bash - 在 .bashrc 中回显时 SCP 不起作用？

> ID：12440287
> 
> 赞同：86
> 
> 时间：2012-09-15T19:17:54.920
> 
> 标签：bash, ssh, scp

我在 Fedora 中有两个用户：

1.  瓦尼
2.  根（很明显！）

我的用户 Wani 的 .bashrc 的内容是：

```
# .bashrc
echo "Hello"
# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

# User specific aliases and functions 
```

现在登录到 root 后，我​​输入以下命令：

```
[root@Dell Wani]# touch try.txt
[root@Dell Wani]# service sshd start
[root@Dell Wani]# scp try.txt Wani@localhost:~/
Wani@localhost's password: 
Hello
[root@Dell Wani]# 
```

现在我登录到 Wani，然后输入：

```
[Wani@Dell ~]$ cat try.txt
cat: try.txt: No such file or directory
[Wani@Dell ~]$ 
```

现在我再次登录到 root 并输入相同的命令`-v`：

```
[root@Dell Wani]# scp -v morph.log Wani@localhost:
Executing: program /usr/bin/ssh host localhost, user Wani, command scp -v -t -- .
OpenSSH_5.6p1, OpenSSL 1.0.0j-fips 10 May 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to localhost [127.0.0.1] port 22.
debug1: Connection established.
debug1: permanently_set_uid: 0/0
debug1: identity file /root/.ssh/id_rsa type -1
debug1: identity file /root/.ssh/id_rsa-cert type -1
debug1: identity file /root/.ssh/id_dsa type -1
debug1: identity file /root/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.6
debug1: match: OpenSSH_5.6 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'localhost' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:2
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-     with-mic,password
debug1: Next authentication method: gssapi-keyex
debug1: No valid Key exchange context
debug1: Next authentication method: gssapi-with-mic
debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_0' not found

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_0' not found

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Next authentication method: publickey
debug1: Trying private key: /root/.ssh/id_rsa
debug1: Trying private key: /root/.ssh/id_dsa
debug1: Next authentication method: password
Wani@localhost's password: 
debug1: Authentication succeeded (password).
Authenticated to localhost ([127.0.0.1]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env XMODIFIERS = @im=none
debug1: Sending env LANG = en_US.UTF-8
debug1: Sending command: scp -v -t -- .
Hello
[root@Dell Wani]# debug1: client_input_channel_req: channel 0 rtype exit-status      reply      0
debug1: channel 0: free: client-session, nchannels 1
debug1: fd 0 clearing O_NONBLOCK
debug1: fd 1 clearing O_NONBLOCK
Transferred: sent 1664, received 1976 bytes, in 0.1 seconds
Bytes per second: sent 22961.5, received 27266.8
debug1: Exit status 0 
```

（在我按 Enter 后）

```
[root@Dell Wani]# 
```

谁能解释一下这里到底发生了什么？为什么文件没有从 root 复制到 Wani？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-15T21:39:58.683

使用`echo`in a `.bashrc`will break `scp`，正如`scp`预期通过标准输入/标准输出通道看到它的协议数据。有关此问题的更多讨论，请参阅[https://bugzilla.redhat.com/show_bug.cgi?id=20527](https://bugzilla.redhat.com/show_bug.cgi?id=20527)。

有一些解决方法可用：

*   'interactive' 标志的条件（例如`case $- in *i*`，由 Tripleee 建议）
*   使用该`tty`实用程序检测交互式 shell（例如`if tty > /dev/null`或`if [ -t 0 ]`）
*   检查值`$SSH_TTY`

我想你应该使用适合你的任何一个。不幸的是，我不知道最好的（最便携/最可靠的）选项是什么。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-12T16:51:01.327

要添加到 nneonneo 的选项，您还可以使用交互式标志设置条件

```
if [[ $- =~ "i" ]] 
```

我认为这可能是 bash 中最清晰的方法。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-08-05T07:05:49.720

这对我有用，
将`.bashrc`第一行添加为：

```
if [ -z "$PS1" ]; then
    return
fi 
```

[https://superuser.com/questions/690735/can-i-tell-if-im-in-an-scp-session-in-my-bashrc](https://superuser.com/questions/690735/can-i-tell-if-im-in-an-scp-session-in-my-bashrc)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-06-24T19:02:40.237

**默认**的Ubuntu`.bashrc`包含以下代码片段，它已经解决了这个问题：

```
# If not running interactively, don't do anything
case $- in
    *i*) ;;
    *) return;;
esac 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-13T15:01:54.533

在`.bashrc`中，改为使用 STDERR 作为输出：

```
echo "# Important Notice" >&2 
```

**更新：不要使用它！**`echo`我们最近遇到了一个问题，一个（封闭源代码）工具由于`.bashrc`. 该工具（使用`rcp`）完全不期望任何输出，无论是在 STDOUT 还是 STDERR 上。当它得到回声时它卡住了。经验教训：为人类和机器（脚本）分别创建帐户，或者停止通过`.bashrc`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-01T18:58:20.597

测试交互式 shell 的最便携的方法似乎是：

```
test -t 0
if [ $? -eq 0 ]
then
    # interactive
    ;
else
    # non-interactive
    ;
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-12T05:42:01.770

nneonneo 的解决方案也对我有用。但由于我的默认 shell 是 TCSH，我不得不稍微编辑修复如下（在 .tcshrc 中）：

```
if ( $?SSH_TTY ) then
    exec /bin/bash
endif 
```

只是想我会为了大家的利益分享。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-16T21:14:36.740

如果您使用的是 Red Hat Enterprise Linux (RHEL) 或变体，请将执行`echo`. 或任何您想要的脚本放入 /etc/profile.d/

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-05T12:56:45.770

如果您还想要 echo 语句，来自@Blauhirn 的回答，您可以继续将您的 echo 语句放在 case 条件之后。

```
case $- in
    *i*) ;;
    *) return;;
esac

echo "Your Greeting/Warning Message/s here!" 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-03-23T18:42:05.570

```
if [ 0 -eq $(shopt -q login_shell; echo $?) ]; then
  echo "do something?"
fi 
```

[来源](https://serverfault.com/a/328396/145930)

# javascript - 在 Shopify 中通过 Javascript 为产品价格增加 20%

> ID：12440288
> 
> 赞同：2
> 
> 时间：2012-09-15T19:18:00.467
> 
> 标签：javascript, shopify

对此可能有一个简单的答案，有人可以帮助我，但我对 Javascript 不是很好。基本上在 Shopify 中，我设置了使用他们的一种液体标签显示 +20% 的价格。除了在产品页面上，这非常有用，因为如果某个尺码缺货，有一些 Javascript 会禁用添加到购物车按钮，并将价格也更改为缺货。无论如何这里是代码：

```
<script>
    var selectCallback = function(variant, selector) {
      if (variant && variant.available) {
        // valid variant selected
        $('#add-to-cart').removeClass('disabled').removeAttr('disabled').val('Add to Cart'); // remove unavailable class from add-to-cart button, and re-enable button
        if (variant.compare_at_price == 0){
          $('.product-title .price').html(''+Shopify.formatMoney(variant.price, "{{shop.money_format}}")+' Excluding VAT');
        } else {
          $('.product-title .price').html('<span>'+Shopify.formatMoney(variant.price, "{{shop.money_format}}") + '</span> <del>' + Shopify.formatMoney(variant.compare_at_price, "{{shop.money_format}}") + ' Excluding VAT</del>');
        }
      } else {
        // variant doesn't exist
        $('#add-to-cart').addClass('disabled').attr('disabled', 'disabled').val('Sold Out'); // set add-to-cart button to unavailable class and disable button
        var message = variant ? "Sold Out" : "Unavailable";
        $('.product-title .price').text(message); // update price-field message
      }
    }; 
```

在产品列表页面上，我可以使用以下液体标签将价格增加 20%

`{{ product.price_min | times:1.20 | money }}`

我需要做的就是修改 Javascript，使其输出的价格乘以 1.20。有谁知道这样做的方法？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T19:22:06.053

尝试这个

```
<script>
var selectCallback = function(variant, selector) {
  if (variant && variant.available) {
    // valid variant selected
    $('#add-to-cart').removeClass('disabled').removeAttr('disabled').val('Add to Cart'); // remove unavailable class from add-to-cart button, and re-enable button
    if (variant.compare_at_price == 0){
      $('.product-title .price').html(''+Shopify.formatMoney((variant.price*1.2), "{{shop.money_format}}")+' Excluding VAT');
    } else {
      $('.product-title .price').html('<span>'+Shopify.formatMoney((variant.price*1.2), "{{shop.money_format}}") + '</span> <del>' + Shopify.formatMoney(variant.compare_at_price, "{{shop.money_format}}") + ' Excluding VAT</del>');
    }
  } else {
    // variant doesn't exist
    $('#add-to-cart').addClass('disabled').attr('disabled', 'disabled').val('Sold Out'); // set add-to-cart button to unavailable class and disable button
    var message = variant ? "Sold Out" : "Unavailable";
    $('.product-title .price').text(message); // update price-field message
  }
}; 
```

# ruby-on-rails - 自定义设计会话控制器未在错误时重定向（：recall => 未发生）

> ID：12440291
> 
> 赞同：4
> 
> 时间：2012-09-15T19:18:40.550
> 
> 标签：ruby-on-rails, devise, controller

我正在覆盖**设备会话控制器**......它可以工作（我可以使用 json 登录），但我无法让它重定向到另一个错误操作：

```
class Users::SessionsController < Devise::SessionsController

  def create
    resource = warden.authenticate!(:scope => resource_name, :recall => "#{controller_path}#no")
    return invalid_login_attempt unless resource
    sign_in(resource_name, resource)
    #respond_with resource, :location => redirect_location(resource_name, resource)
    respond_to do |format|
      format.json { render :status => 200, :json => { :success => true, :auth_token => resource.authentication_token, :user => resource } }
    end
  end

  def no
    puts "NO!"
    return render:json => {:success => false, :errors => alert}
  end

end 
```

我也试过：

```
 if resource.nil?
   puts "NIL!"
 end 
```

响应错误的登录凭据，我总是得到相同的默认设计 json 错误：

```
{error: "You need to sign in or sign up before continuing."} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:53:34.267

请记住，如果warden 没有从中获取用户，则进行身份验证！操作它会向失败的应用程序抛出一个符号。因此，在失败的情况下，该行之后的任何内容都无关紧要。

更改`authenticate!`为`authenticate`，它将返回用户对象以供您按照您认为合适的方式处理。

检查warden gem 中的proxy.rb 文件以获取更多详细信息。 [文档](http://rubydoc.info/gems/warden/1.2.1/Warden/Proxy#authenticate-instance_method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T22:13:23.353

根据这个类似的线程（[Extending Devise SessionsController to authenticate using JSON](https://stackoverflow.com/questions/4857855/extending-devise-sessionscontroller-to-authenticate-using-json)），您需要做的就是包含以下代码：

```
# config/initializers/devise.rb
config.navigational_formats = [:"*/*", "*/*", :html, :json] 
```

# c++ - 类 git 界面的最佳方法

> ID：12440299
> 
> 赞同：3
> 
> 时间：2012-09-15T19:19:45.103
> 
> 标签：c++, git, user-interface, executable, command-line-interface

我正在编写一个小命令行 todo 应用程序，它具有通用的类 git 界面。

它有几个可以执行的任务：`add`, `list`, `complete`, ... 所有这些都应该可以通过`todo <task>`界面访问。例如`todo list`。

与 git 一样，其中一些任务采用变量或选项，`todo`应用程序也可以采用选项（适用于任何类型的任务，例如配置文件的位置）。

最终应该能够写出类似的东西：

```
todo -c ~/.config/todorc add --desc "walk the dog" 
```

注意这里的顺序：全局选项在实际任务*之前*给出（并且只能给出） 。典型调用的骨架是：

```
todo [global options] <task> [task options/arguments] 
```

我正在用 C++ 编写这个项目，并且基本的后端库已经完成。我现在正试图弄清楚如何编写用户界面。

我应该使用一个单独`main`处理每个任务的大程序，还是应该将程序分成几个子程序并从一个简单的 shell 脚本中调用它们（如果我是正确的，这就是 git 所做的）。后者似乎更易于维护，但更难将全局选项传递给任务可执行文件。

有没有关于这个主题的文献？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:57:57.163

你写它是为了一个**小的** 命令行应用程序。然后我会选择一个二进制文件。最简单的方法可能是使用[Boost.Program_options](http://www.boost.org/doc/libs/1_39_0/doc/html/program_options.html)。

从我的角度来看，限制某些选项的位置是一个非常糟糕的主意。它会使大多数用户感到困惑。最坏的情况是位置改变了选项的语义。`gcc`使用该`-l`选项并在 10 年后您仍然发现新用户抱怨他们的程序链接不正确。

# dns - GOOGLE APP + PHP MAIL() = HOTMAIL 的垃圾邮件

> ID：12440302
> 
> 赞同：1
> 
> 时间：2012-09-15T19:20:21.917
> 
> 标签：dns, gmail, spam, hotmail

我使用 php mail() 命令发送的电子邮件被 hotmail 视为垃圾邮件。我使用谷歌应用程序。我的 Mx 记录是：

```
Pref    Hostname    
0   ASPMX.L.GOOGLE.com  
5   ALT1.ASPMX.L.GOOGLE.com 
5   ALT2.ASPMX.L.GOOGLE.com 
10  ASPMX2.GOOGLEMAIL.com   
10  ASPMX3.GOOGLEMAIL.com 
```

我的PHP代码是：

```
 $to = "to_email@hotmail.com";

    $subject = "Subject";

    //headers and subject
    $headers  = "MIME-Version: 1.0\r\n";
    $headers .= "Return-Path: <$support@my.com>\n";
    $headers .= "Content-type: text/html; charset=utf-8\r\n";
    $headers .='Reply-To: '.$to.''."\n"; 
    $headers .= "X-Sender: <www.my.com>\n";
    $headers .= "X-Mailer: PHP\n";
    $headers .= "X-Priority: 1\n";
            $headers .= "X-MSMail-Priority: High\n";
    $headers .= "X-auth-smtp-user: support@my.com\n";
    $headers .= "X-abuse-contact: support@my.com\n";
    $headers .= "From: MyName <support@my.com>\r\n";

    $body .= "My text here here : <br />" .
             "" . "<br />" . "<br />" .
             "My Name";

    mail($to, $subject, $body, $headers); 
```

也许我需要添加：

1.  **mail.my.com**的MX 记录
***   a像**mail.my.com这样****的记录。****123.89.89.09****

 **请帮忙**

# php - 魔术引号的 PHP 会计

> ID：12440305
> 
> 赞同：0
> 
> 时间：2012-09-15T19:20:52.973
> 
> 标签：php

我注意到 PHP laravel 框架中有一段类似如下的代码：

```
if (get_magic_quotes_gpc())
{
    $magics = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);

    foreach ($magics as &$magic)
    {
        $magic = array_strip_slashes($magic);
    }
} 
```

我真的不知道如何进行测试，但是如果我把它放在我包含在每个页面上的 start.php 文件中，它会处理魔术引号，所以我不必担心它们吗？

编辑：

这是来自 laravel 的 array_strip_slashes：

```
function array_strip_slashes($array)
{
    $result = array();

    foreach($array as $key => $value)
    {
        $key = stripslashes($key);

        // If the value is an array, we will just recurse back into the
        // function to keep stripping the slashes out of the array,
        // otherwise we will set the stripped value.
        if (is_array($value))
        {
            $result[$key] = array_strip_slashes($value);
        }
        else
        {
            $result[$key] = stripslashes($value);
        }
    }

    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:25:45.993

您没有`array_strip_slashes`显示，但假设它工作正常 -

是的，该功能应该撤消魔术引号效果。如果*未*打开魔术引号，则该代码根本不会运行。

正如其他人无疑也会指出的那样，最好将它们关闭。唉，在某些共享主机环境中，很难做到这一点。充其量，该代码将使您免于被烧毁。在最坏的情况下，这将是一块无害的垃圾，可以在未来某个时候当历史学家回顾魔术引语并嘲笑我们时移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:23:08.540

这将“照顾”魔术引号，因为它将删除它们，这是一件好事。关闭它们会好很多（在 PHP 5.3 中它们应该默认关闭）。

# objective-c - 将自动释放对象分配给强变量时会发生什么

> ID：12440310
> 
> 赞同：1
> 
> 时间：2012-09-15T19:21:43.630
> 
> 标签：objective-c, automatic-ref-counting, autorelease

> **可能重复：**
> [在 Objective-C 中使用 ARC 时 AutoRelease 是多余的吗？](https://stackoverflow.com/questions/9752790/is-autorelease-redundant-when-using-arc-in-objective-c)

我是 Objective C 的新手，并且了解它的内存管理。我真的很难理解强变量的行为。下面是真正让我困惑的片段。我有以下方法，我正在使用 ARC。

```
-(void) watchStrongVariable {
    MyClass * myobj = [self getMyClassObject];
    // ...
}

-(MyClass *) getMyclassObject{
    return [[[MyClass alloc] init] autorelease];
} 
```

在第 #2 行中，我将`MyClass`对象分配给局部变量`myobj`。我读到所有局部变量默认情况下都是强的，强类似于保留。因此，在上述情况下，我的假设被`myobj`保留并归方法所有，`watchStrongVariable`但问题`myobj`是，如果我们不`myobj`通过调用显式释放，则保留问题`[myobj release]`。我看到许多程序遵循相同的模式，但没有发送到的释放消息局部变量。有人可以解释一下为什么`myobj`在上述情况下不需要释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:56:28.423

One, you can't use explicit `retain`, `release` nor `autorelease` when under ARC - the compiler won't permit it.

Two, you don't have to think about this at all in this case as it's a simple one - when a strong variable goes out of scope, it's equivalent to a `release` message. So how all this works under ARC is:

```
- (void)watchStrongVariable
{
    MyClass *myobj = [self myClassObject]; // implicit retain-on-assignment
    // implicit release-on-end-of-scope
}

- (MyClass *)myClassObject
{
    return [[MyClass alloc] init]]; // implicit release-after-return
} 
```

Some advice about coding style. One, don't use `getXXXX` for getter names - that's reserved for methods which have output artuments (i. e. which accept pointers to be written to), like UIColor's `getRed:green:blue:alpha:` method. Two, for functions, the opening brace goes on a separate line, and the asterisk indicating pointer types shall be collided with the variable name and not the type. So the best is to write `int *i;` and not `int* i;` nor `int * i;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T19:25:27.900

使用 ARC 时不能使用保留、释放或**自动释放**，因为 ARC 会为您处理这些。你可以简单地这样做：

```
- (MyClass *)getMyclassObject {
    return [[MyClass alloc] init];
} 
```

编译器将为您添加自动释放调用。但是 ARC 的重点是不必再考虑太多了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T19:25:41.923

使用 ARC 时，您不需要**自动释放任何内容。**实际上，这会产生编译器错误。

所以在使用 ARC 时这是正确的：

```
-(MyClass *) getMyclassObject{
    return [[MyClass alloc] init];
} 
```

# android - Manifest.xml 中定义的 Android 活动名称

> ID：12440313
> 
> 赞同：0
> 
> 时间：2012-09-15T19:22:30.427
> 
> 标签：android

我在清单中定义了一个活动：

```
<activity
android:name=".userhistory.UserHistory"
android:configChanges="orientation"
android:launchMode="singleTop"
android:label="User History">
</activity> 
```

现在我想从我的活动代码中获取属性`value`。`label`

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:37:18.797

“伪”代码：

```
PackageManager PM = getApplicationContext().getPackageManager();
PackageInfo PI = getPackageManager().getPackageInfo(getPackageName(), 0);
String strLabel = PI.applicationInfo.loadLabel(PM).toString(); 
```

`strLabel`将包含`android:label`来自您的`AndroidManifest.xml`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T19:43:26.123

使用 string.xml 保存所有字符串，如下所示

```
<resources>
<string name="activity_name">User History</string>
</resources> 
```

然后像这样在其他xml中的任何位置使用它

.android:label="@string/activity_name"

你可以在这样的活动中使用它

```
 String activityname= getString(R.string.activity_name); 
```

# php - 将php变量传递给同一页面上的javascript函数

> ID：12440316
> 
> 赞同：0
> 
> 时间：2012-09-15T19:22:40.940
> 
> 标签：php, javascript, variables, popup, href

我有一个 php 页面，它从 SQL 表中调用数据，然后显示它们。我正在尝试创建一个弹出页面来查看与表中的一条数据相关的表（规范化数据库）。我无法弄清楚如何做到这一点。我当前的 php 表显示是 $result 是 mysqli 查询数组的位置

```
while($row = mysqli_fetch_array($result)) {
    echo '<tr>';
    echo "<td style='border:1px solid black;'>{$row['first_name']}</td>";
    echo "<td style='border:1px solid black;'>{$row['last_name']}</td>";
    echo "<td style='border:1px solid black;'>{$row['grade']}</td>";
    echo "<td style='border:1px solid black;'>{$row['gpaP']}</td>";
    echo "<td style='border:1px solid black;'>{$row['AGP']}</td>";
    echo "<td style='border:1px solid black;'>{$row['rigorP']}</td>";
    echo "<td style='border:1px solid black;'>{$row['APP']}</td>";
    echo "<td style='border:1px solid black;'>{$row['formID']}</td>";
    echo "<td style='border:1px solid black;'>{$row['total']}</td>"; 
    echo "<td style='border:1px solid black;'>{$row['date']}</td>";
    echo "<td style='border:1px solid black;'>{$row['IP']}</td>";
    echo '</tr>';
} 
```

和

```
echo "<td style='border:1px solid black;'>{$row['formID']}</td>"; 
```

是我需要更改为弹出框的热链接。弹出窗口的 href 应该是 "activities.php?form_id={$formID}" 但在处理与 php 和所有内容的所有冲突时，我无法找到一种方法。我想做的是建立一个链接

```
echo "<td style='border:1px solid black;'><a href=\"javascript:win1()\">asdfasd<a/></td>"; 
```

然后创建一个javascript函数，如

```
<script language="JavaScript">
function win1() {
    window.open("activities.php?form_ID={$formID}","Window1","menubar=no,width=460,height=360,toolbar=no");
}
</script> 
```

但这不起作用，因为 $formID 变量由于某种原因没有被加载。如果我尝试从 activity.php 中获取变量，例如

```
$getvar = $_GET['form_ID']; 
```

进而

```
echo $getvar; 
```

它什么都没有显示..有人请帮帮我，我想我的头要爆了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:34:16.320

尝试将您的功能更改为

```
function win1(formID) {
    window.open("activities.php?form_ID="+formID,"Window1","menubar=no,width=460,height=360,toolbar=no");
} 
```

和你的 PHP

```
echo "<td style='border:1px solid black;'><a href=\"javascript:win1($formID)\">asdfasd<a/></td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:55:11.010

你可以在里面使用`while`：

```
echo "<td style='border:1px solid black;'><a href=\"javascript:win1('{$row['formID']}')\">asdfasd<a/></td>"; 
```

并在此之外发挥作用`while`：

```
<script language="JavaScript">
function win1(frmid) {
    window.open("activities.php?form_ID="+frmid,"Window1","menubar=no,width=460,height=360,toolbar=no");
}
</script> 
```

# sql-server - 改进使用视图的查询

> ID：12440317
> 
> 赞同：0
> 
> 时间：2012-09-15T19:22:43.663
> 
> 标签：sql-server

除了使用 INNER JOIN 或索引来优化使用 VIEW 的查询之外，是否有有效的方法

```
CREATE VIEW tableView AS 
SELECT A1, A2, B1 as Price, C1 as ItemNumber
FROM A, B, C 
WHERE A.A1 = B.B1
AND A.A2 = C.C1; 
```

查询示例

```
 SELECT * FROM TableView WHERE Price = ‘100’ AND ItemNumber = 'R34'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T19:25:30.113

有效的方法是在基础表上使用适当的索引和 SQL Server 的一般调整。

没有什么特定于可以优化的视图（除了与常规查询相同的一般问题 - 不使用导致表读取/索引扫描与索引搜索等的函数......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:22:50.483

如果您想避免表索引，因为数据存在于两个不同的表中，那么您可以创建一个`schema bound view`允许您`composite index`在子句中的两个列上创建一个`sql where`(Price,ItemNumber)。

# c - 在 C 中使用 setsockopt() 读取 ()

> ID：12440318
> 
> 赞同：0
> 
> 时间：2012-09-15T19:22:45.820
> 
> 标签：c, setsockopt

我正在尝试编写服务器客户端代码，但我被困在了一个点上。我希望客户端阅读一定的时间和超时。我尝试使用 setsockopt() 和 SO_RCVTIMEO 指定 timeval 结构中的时间，但我的 read() 不等待我在 timeval 结构中指定的时间。问题是，如果我只是在 setsockopt() 之后使用 read()，read() 正在等待指定的时间。如果我先调用 write() 然后 read()，read() 函数会立即超时，而无需等待 timeval 结构中给出的指定时间。我的代码如下所示：

//示例客户端代码

```
 #include<stdio.h>
    #include<sys/types.h>
    #include<sys/socket.h>
    #include<netinet/in.h>
    #include<netdb.h>

    void error(char *msg)
    {
        perror(msg);
        exit(1);
    }

    int main(int argc, char *argv[])
    {
        int a=1;
        fd_set readfds,writefds;
        int ready_for_reading,reading;
        struct timeval time_out;

        int sockfd,newsockfd,portno,n;
        struct sockaddr_in serv_addr;
        struct hostent *server;
    //  server=gethostbyname(argv[1]);
        char buffer[256];
        portno=atoi(argv[2]);
        sockfd=socket(AF_INET,SOCK_STREAM,0);
        server=gethostbyname(argv[1]);
        serv_addr.sin_family=AF_INET;
        serv_addr.sin_port=htons(portno);
        bcopy((char *)server->h_addr,
            (char *)&serv_addr.sin_addr.s_addr,
            server->h_length);
        time_out.tv_sec = 15;    // 15 seconds
            time_out.tv_usec = 0;    // 0 milliseconds

    //  sockfd=socket(AF_INET,SOCK_STREAM,0);
        if(sockfd==-1)
            error("\nError creating socket");
    //      if(setsockopt (sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&time_out, sizeof (time_out)))
    //               error("\n\tsetsockopt function has a problem\n");

        n=connect(sockfd,(struct sockaddr *)&serv_addr,sizeof(serv_addr));
        if(n==-1)
            error("\nError connecting to server");
        printf("\nEnter client's msg:");
        fgets(buffer,255,stdin);
        n=write(sockfd,buffer,strlen(buffer));
        if(n<0)
            error("\nMsg not written to server");
        if(setsockopt (sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&time_out, sizeof(time_out)))
            error("\n\tsetsockopt function has a problem\n");

    //  FD_ZERO(&readfds);
    //  FD_SET(sockfd,&readfds);

        n=read(sockfd,buffer,255);
    //  ready_for_reading=select(sockfd,&readfds,NULL,NULL,&time_out);
    //  printf("\nready_for_reading=%d",ready_for_reading);
    /*  if (ready_for_reading)
            {
              //  reading = read(newsockfd, buffer, 255);
                printf("Read, %d bytes from input : %s \n", n,buffer);
            }
            else
            {
                printf(" 10 Seconds are over - no data input \n");
                return 0;
            }
    */
        if(n<0)
            printf("\nMsg not read from server");
        if(n==0)
        {
            printf("\n No ack from server");
            return 0;
        }
        printf("\nServer's ack:%s\n",buffer);

    /*  if (ready_for_reading) 
        {
            //  reading = read(newsockfd, buffer, 255);
                printf("Read, %d bytes from input : %s \n", n,buffer);
            } 
        else 
        {
                    printf(" 10 Seconds are over - no data input \n");
            return 0;
            }
    */
        return 0;
    } 
```

在我上面的代码中，我希望 read() 操作在 15 秒内超时。但它立即超时。我需要帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:54:18.607

If `read` returns zero, that means the connection is closed. There is nothing to wait for, so it cannot wait.

Also, this code is broken:

```
 printf("\nServer's ack:%s\n",buffer); 
```

You can only use the `%s` format specifier to print a C-style string. The way you've used it, there is no way it could know how many bytes to print because that's only held in the variable `n` at this point in your code.

# c++ - Qt - 对话框关闭时更改 LineEdit 的值

> ID：12440321
> 
> 赞同：1
> 
> 时间：2012-09-15T19:23:16.167
> 
> 标签：c++, qt

我该怎么做呢：

例如，标签用户名 = “用户”

我单击一个按钮，然后出现一个要求输入的对话框。我在输入框中输入“名称”，然后单击确定。现在，当我单击对话框上的确定按钮时，如何使标签用户名自动更改为“名称”？

此值转到设置值。我知道如何从设置中加载一个值，但是如果我的标签用户名和我输入“名称”的输入框位于 2 个不同的类中，我该如何进行更改？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T21:08:29.980

您需要使用信号和插槽。在你有这个 QLineEdit 的课堂上，你必须声明像这样的信号

```
class SomeClass : public QDialog     //or other inheritance
{
    /* constructors, functions and other stuff */
    signals:
         void valueChanged(const QString&);        //in QString you will send new value
} 
```

有人单击“确定”按钮后，您必须发出此信号：

```
emit valueChanged(myQLineEdit->text()); 
```

在您调用 SomeClass 的类中，您必须将此信号连接到您将更改标签值的插槽，例如：

```
void MainWindow::someMethod()
{
    SomeClass *class = new SomeClass;
    connect(class, SIGNAL(valueChanged(QString)), this, SLOT(changeValue(QString)));
    /* set other parameters, show window*/
}

void MainWindow::changeValue(const QString &newText)
{
    myQLabel->setText(newText);
} 
```

# jquery - jQuery模糊悬停效果问题

> ID：12440322
> 
> 赞同：0
> 
> 时间：2012-09-15T19:23:21.397
> 
> 标签：jquery, css, hover, blur

我又遇到了 jQuery 的问题，希望有人能帮助我。

请在此处查看投资组合部分[http://matoweb.com](http://matoweb.com)（应该有两个项目）

我正在重新设计我的投资组合网站，我想列出最后 6 个具有模糊悬停效果的投资组合项目。我设法用一张图片（第二张实际上是第一篇文章）来解决这个问题，但现在我添加了另一个测试组合项目，但有两个问题：

*   我只得到第一个帖子的模糊图像（第二个图像），第二个帖子的图像没有得到它自己的模糊版本图像
*   第二个问题是，当我将鼠标悬停在一张图片上时，它也会触发第二张图片的动画

这是这些效果的代码，但您可以在网站上查看它的实际效果：

```
 $(window).load(function(){
            $(".img_portfolio").pixastic("blurfast", {amount:1});
        });

        $(function() {
            $(".prva_stran_portfolio_single").mouseenter(function () {
                $(".normal_image").fadeOut("fast");
            }).mouseleave (function () {
                $(".normal_image").fadeIn("fast");
            });
        });
        $(function() {
        $(".roll").css("opacity","0");

        $(".roll").hover(function () {

        $(this).stop().animate({
        opacity: 0.9
        }, "fast");
        },

        function () {

        $(this).stop().animate({
        opacity: 0
        }, "fast");
        });
        }); 
```

任何帮助都将是真正的人。

我怎样才能在图像中添加某种 ID，以便在仅将鼠标悬停在其中一个上时它们不会全部模糊？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:12:56.660

我不只是悬停，而是使用 each(function) 将它们全部分开。它们不应该处于不同的功能中，真的......这样可以让事情更清洁，更容易调试。

```
$(".prva_stran_portfolio_single").each(function(){
    $(this).hover(function(){
        Run everything that happens on a hover (mouse in) here.
    },{
        Run everything that happens on a hover (mouse out) here.
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:16:44.563

您不需要使用 ID，您应该能够调用`.find("normal_image")`它将搜索所有后代元素。相反，您可以使用`.closest()`在所有祖先元素中搜索最接近的匹配元素。

我不确定为什么 pixastic 没有为这两个图像创建一个模糊的画布，我的建议是尝试将 a`.each(function() { pixastic(blur) })`与选择器一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T05:23:40.867

这是完成您想要的事情的一种干净而简单的方法。

```
var blurredImages = $( '.blur-me' );

blurredImages.on( "mouseenter", function () {
  $( this ).addClass( "blurred" );
})

blurredImages.on( "mouseleave", function () {
  $( this ).removeClass( "blurred" );
}) 
```

另外，我建议使用 CSS3 过渡而不是 jquery animate 来进行过渡时间。它要快得多。我将它包含在小提琴中。

这是一个jsfiddle：http: [//jsfiddle.net/4mE3b/](http://jsfiddle.net/4mE3b/)

# jquery - 使用 JQuery 遍历列表

> ID：12440325
> 
> 赞同：0
> 
> 时间：2012-09-15T19:23:45.720
> 
> 标签：jquery, struts

我使用以下方法从 Struts 检索我的字符串

```
$(document).ready(function( data ) 
{ 
   $('#contextsTextArea').val('<s:property value="myMessage"/>')
}); 
```

它显示正常。如果我的 struts 操作返回一个字符串列表，而不是如何使用 JQuery 遍历这个列表？这是我的尝试，但它没有显示任何内容，知道有什么问题吗？

```
$('<s:property value="myMessage"/>').each(function (key, value) { 
    alert(value); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:07:49.647

我相信最好的方法是使用[struts2-JSON 插件](http://struts.apache.org/2.2.3/docs/json-plugin.html)并从您的操作类返回 JSON 数据。

Jquery 已经自带了一个方便的 JSon 解析器机制，你可以解析返回的 List（转换成 JSON）。

# ruby-on-rails - 在 Ruby on Rails 中使用 select_tag 基于 GET 参数选择的值

> ID：12440330
> 
> 赞同：1
> 
> 时间：2012-09-15T19:24:15.060
> 
> 标签：ruby-on-rails, forms, selectall

我有一个工作表单（未绑定到模型，因此使用`form_tag`），其中包括一个选择框。

相关代码如下：

```
select_tag 'language', "<option value='ar' selected>Arabic</option>
<option value='bg'>Bulgarian</option><option value='ca'>Catalan</option>
<option value='zh-CHS'>Chinese (Simplified)</option>
<option value='zh-CHT'>Chinese (Traditional)</option>
...
<option value='tr'>Turkish</option><option value='uk'>Ukrainian</option>
<option value='vi'>Vietnamese</option>".html_safe 
```

您会注意到，阿拉伯语是默认选项，列表中大约有 35 种语言。

当用户选择他们的语言时，我单独存储值（在提交表单时通过 GET），但我希望表单在下次遇到表单时自动选择用户选择的语言。换句话说：

1.  “默认”选项是阿拉伯语；
2.  用户选择法语作为他们的语言；
3.  下次他们遇到该表单时（例如，当他们返回相关页面时），将选择法语而不是阿拉伯语。

我想到实现这一点的一种方法是通过`case...when`调用，其中`selected`属性被添加到相关选项中，但是列表中有 35 多种语言，这可能会有点繁琐，我相信有更好的/更整洁的方式。

有任何想法吗？我在想`options_for_select`是解决方案，但我不确定这将如何进入上述代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:48:40.527

哈！通常，我在发布此问题后的 10 分钟内设法解决了问题。您*可以*使用`options_for_select`，我的问题的解决方案（对于碰巧看到此问题的任何有类似查询的人）如下：

```
select_tag 'language', 
options_for_select([
["Arabic", "ar"], 
["Bulgarian", "br"], 
["Catalan", "ca"],
....
], params[:get_language]) 
```

如果`params[:get_language]`未设置，即之前没有提交过表单，那么我认为没有选择任何选项（或者，换句话说，列表中的第一个选项是默认选择）但我没有对此进行了测试（我在其他地方有更多代码可以检查是否是第一次调用此表单）。

对不起，各位，浪费了你们的时间！

# java - JAX-RS @Path 阻止加载静态资源

> ID：12440332
> 
> 赞同：2
> 
> 时间：2012-09-15T19:24:19.973
> 
> 标签：java, jax-rs, web-frameworks

我有一个`route()`在我去的时候触发`http://localhost:8080/`并且它正在工作，但它阻止了我的资源加载。例如`http://localhost:8080/mobile/css/styles.css`返回 404

我`<url-pattern>/</url-pattern>`在我的 web.xml 和`@Path("/")`我的代码中使用过。有什么想法可以在动态创建 index.html 的同时提供静态内容吗？

谢谢！

编辑 - 我想避免进行重定向并保持我的 URL 干净。如果有另一个框架可以做得更好，我愿意尝试。我没有加入 JAX-RS。

```
package com.project.router;
@Path("/")
@Produces({MediaType.TEXT_HTML})
public class Router {

    final String FULL_WEB = "";
    final String MOBILE_WEB = "C:\\workspace\\project\\web\\mobile\\index.html";

    @GET
    @Produces({MediaType.TEXT_HTML})
    public Response route(@HeaderParam("user-agent") String userAgent, @HeaderParam("accept") String accept) throws FileNotFoundException {
        UAgentInfo uAgentInfo = new UAgentInfo(userAgent,accept);
        boolean tierIphone = uAgentInfo.detectTierIphone();
        File file = null;
        if (tierIphone) {
            file = new File(MOBILE_WEB);
        } else {
            file = new File(FULL_WEB);
        }

        FileInputStream fileInputStream = new FileInputStream(file);
        return Response.ok().entity(fileInputStream).build();
    }
} 
```

web.xml

```
<servlet>
    <servlet-name>router</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.project.router</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>router</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:53:33.450

您应该`url-pattern`为您的`router`servlet 提供一个不同的值，否则所有请求都将到达您的`Router`班级。静态内容将自动工作。

也许

```
<servlet-mapping>     
    <servlet-name>router</servlet-name>     
    <url-pattern>/router</url-pattern>
</servlet-mapping> 
```

# google-app-engine - NDB：在给定游标的情况下查询多个父母

> ID：12440333
> 
> 赞同：1
> 
> 时间：2012-09-15T19:25:04.083
> 
> 标签：google-app-engine, google-cloud-datastore

我不明白这是否可能。

我需要检索所有类型“A”的实体，即“B”类型实体列表的子项。

因此，每个实体“B”都有多个子“A”。

这很容易：我得到 B 列表，我需要的类型为“B”的实体列表，对于每个，我得到孩子的列表。

现在，我可以在查询后对它们进行排序，将它们合并到一个列表中，即使这不是一个好习惯。我最大的问题是我不知道如何使用游标，因为有多个查询。

然后我想我需要一些看起来像的东西

```
A.query(ancestor in B-list).fetch(...) 
```

但我不明白我怎么能做到这一点或我应该使用什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T22:54:49.333

您只能为每个祖先指定一个查询。所以你必须做多个查询。但是，如果您有点聪明，您可以并行执行它们。这是代码的粗略草图（未经测试）：

```
futures = []
for b in B_list:
  futures.append(A.query(ancestor=b).fetch_async(...))
results = []
for f in futures:
  results.extend(f.get_result()) 
```

# perl - Perl 运算符含义 :: 和 ->

> ID：12440334
> 
> 赞同：3
> 
> 时间：2012-09-15T19:25:17.070
> 
> 标签：perl

我是 Perl 的新手，我想知道 :: 和 -> 是什么意思，它们的意思是相同还是不同？我主要在对象的变量/方法调用中看到它们？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T19:47:52.857

`::`as in是`$main::variable`命名空间分隔符；这是指`$variable`在包装中`main`。分隔符根本不是运算符。

`->`as in`$variable->{'key'}`是一个取消引用运算符。这就是您引用标量`$variable`引用的哈希值的方式（或类似地引用数组，使用方括号而不是花括号）。

所以不，这两个结构几乎没有关系。

# search - FTSearch 和 NotesDocumentCollection

> ID：12440338
> 
> 赞同：2
> 
> 时间：2012-09-15T19:25:34.080
> 
> 标签：search, collections, xpages

我在对 notesdocumentcollection 中的字段值进行 FTsearch 时遇到问题

如果我转到 notesclient 中的视图“人员”并搜索 FIELD DEPARTMENT = “Finance”，我会得到几个结果。

..当我在网上打印出查询时，它与我在客户端中输入时完全相同： FIELD DEPARTMENT = "Finance" 但仍然没有检索到结果。

```
var dc:NotesDocumentCollection = database.getView("people").getAllDocumentsByKey("people",true);

q = "\"" + r + "\""
query = "FIELD DEPARTMENT Contains " + q
dc.FTSearch(query); 
```

也试过这个

```
query = "[DEPARTMENT] Contains \"" + r + "\"";
dc.FTSearch(query); 
```

如果我在没有搜索的情况下返回“dc”，我会得到几个结果

我的查询似乎适用于 view.FTSearch 和 db.FTSearch，但不适用于 dc.FTSearch。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:11:15.230

我想我落入了同样的陷阱：你必须使用 FTSearch 的第二个参数，例如

```
dc.FTSearch(query, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:57:36.577

我解决了，现在可以了。不确定是因为我添加了“退货”还是我添加了新的退货行。下面的行有效

```
var dc:NotesDocumentCollection = database.getView("people").getAllDocumentsByKey("people",true);

query = "[DEPARTMENT] Contains \"" + r + "\"";
dc.FTSearch(query);
return dc 
```

# python - 从 Python 中的元组列表中获取每个元组的第 n 个元素的最佳方法

> ID：12440342
> 
> 赞同：12
> 
> 时间：2012-09-15T19:25:50.707
> 
> 标签：python

我有一些代码包含`zip(*G)[0]`（和其他地方，`zip(*G)[1]`有不同的 G）。 `G`是一个元组列表。这样做是将G 中每个元组的第一个（或通常，对于 th）元素的列表作为元组返回`zip(*G)[n]`。`n-1`例如，

```
>>> G = [(1, 2, 3), ('a', 'b', 'c'), ('you', 'and', 'me')]
>>> zip(*G)[0]
(1, 'a', 'you')
>>> zip(*G)[1]
(2, 'b', 'and') 
```

这非常聪明，但问题是它在 Python 3 中不起作用，因为`zip`那里有一个迭代器。此外，2to3 还不够聪明，无法修复它。所以显而易见的解决方案是使用`list(zip(*G))[0]`，但这让我想到：可能有一种更有效的方法来做到这一点。不需要创建 zip 创建的所有元组。我只需要`n`G 中每个元组的第 th 个元素。

有没有更有效但同样紧凑的方法来做到这一点？我对标准库中的任何内容都满意。在我的用例中，G 中的每个元组至少是 length `n`，因此无需担心 zip 会在最小长度的元组处停止（即，`zip(*G)[n]`将始终定义）。

如果没有，我想我会坚持将 in 包装`zip`起来`list()`。

（PS，我知道这是不必要的优化。我只是好奇而已）

**更新：**

万一有人在乎，我选择了这个`t0, t1, t2 = zip(*G)`选项。首先，这让我可以给数据起有意义的名字。My`G`实际上由长度为 2 的元组组成（代表分子和分母）。列表理解只会比 zip 更具可读性，但这种方式要好得多（因为在大多数情况下，zip 是我在列表理解中迭代的列表，这让事情变得更平坦）。

其次，正如@thewolf 和@Sven Marnach 的出色答案所指出的那样，这种方式对于较小的列表来说更快。在大多数情况下，我的 G 实际上并不大（如果它很大，那么这绝对不会成为代码的瓶颈！）。

但是有比我预期更多的方法来做到这一点，包括`a, *b, c = G`我什至不知道的 Python 3 的新特性。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-15T19:27:17.463

您可以使用列表推导

```
[x[0] for x in G] 
```

或者`operator.itemgetter()`

```
from operator import itemgetter
map(itemgetter(0), G) 
```

或序列解包

```
[x for x, y, z in G] 
```

**编辑**：这是我对不同选项的时间安排，也在 Python 3.2 中：

```
from operator import itemgetter
import timeit

G = list(zip(*[iter(range(30000))] * 3))

def f1():
    return [x[0] for x in G]
def f2():
    return list(map(itemgetter(0), G))
def f3():
    return [x for x, y, z in G]
def f4():
    return list(zip(*G))[0]
def f5():
    c0, *rest = zip(*G)
    return c0
def f6():
    c0, c1, c2 = zip(*G)
    return c0
def f7():
    return next(zip(*G))

for f in f1, f2, f3, f4, f5, f6, f7:
    print(f.__name__, timeit.timeit(f, number=1000)) 
```

我的机器上的结果：

```
f1 0.6753780841827393
f2 0.8274149894714355
f3 0.5576457977294922
f4 0.7980241775512695
f5 0.7952430248260498
f6 0.7965989112854004
f7 0.5748469829559326 
```

评论：

1.  我使用了一个包含 10000 个三元组的列表来测量实际处理时间，并使函数调用开销、名称查找等可以忽略不计，否则会严重影响结果。

2.  这些函数返回一个列表或一个元组——任何对特定解决方案更方便的方法。

3.  与[狼的回答](https://stackoverflow.com/a/12442775/279627)`tuple()`相比，我删除了对from的冗余调用`f4()`（表达式的结果已经是一个元组），并且我添加了一个`f7()`仅用于提取第一列的函数。

正如预期的那样，列表推导是最快的，还有一些不太通用的`f7()`。

**另一个编辑**：这是十列而不是三列的结果，并在适当的地方调整了代码：

```
f1 0.7429649829864502
f2 0.881648063659668
f3 1.234360933303833
f4 1.92038893699646
f5 1.9218590259552002
f6 1.9172680377960205
f7 0.6230220794677734 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-15T21:45:06.190

至少Python 2.7 中*最快*的方法是

```
t0,t1,t2=zip(*G) for SMALLER lists and [x[0] for x in G] in general 
```

这是测试：

```
from operator import itemgetter

G = [(1, 2, 3), ('a', 'b', 'c'), ('you', 'and', 'me')]

def f1():
   return tuple(x[0] for x in G)

def f2():
   return tuple(map(itemgetter(0), G))

def f3():
    return tuple(x for x, y, z in G)     

def f4():
    return tuple(list(zip(*G))[0])

def f5():
    t0,*the_rest=zip(*G)
    return t0

def f6():
    t0,t1,t2=zip(*G)
    return t0                

cmpthese.cmpthese([f1,f2,f3,f4,f5,f6],c=100000) 
```

结果：

```
 rate/sec     f4     f5     f1     f2     f3     f6
f4   494,220     -- -21.9% -24.1% -24.3% -26.6% -67.6%
f5   632,623  28.0%     --  -2.9%  -3.0%  -6.0% -58.6%
f1   651,190  31.8%   2.9%     --  -0.2%  -3.2% -57.3%
f2   652,457  32.0%   3.1%   0.2%     --  -3.0% -57.3%
f3   672,907  36.2%   6.4%   3.3%   3.1%     -- -55.9%
f6 1,526,645 208.9% 141.3% 134.4% 134.0% 126.9%     -- 
```

如果您不在乎结果是否是列表，那么列表理解会更快。

这是一个具有可变列表大小的更扩展的基准测试：

```
from operator import itemgetter
import time
import timeit 
import matplotlib.pyplot as plt

def f1():
   return [x[0] for x in G]

def f1t():
   return tuple([x[0] for x in G])

def f2():
   return tuple([x for x in map(itemgetter(0), G)])

def f3():
    return tuple([x for x, y, z in G])    

def f4():
    return tuple(list(zip(*G))[0])

def f6():
    t0,t1,t2=zip(*G)
    return t0     

n=100    
r=(5,35)
results={f1:[],f1t:[],f2:[],f3:[],f4:[],f6:[]}    
for c in range(*r):
    G=[range(3) for i in range(c)] 
    for f in results.keys():
        t=timeit.timeit(f,number=n)
        results[f].append(float(n)/t)

for f,res in sorted(results.items(),key=itemgetter(1),reverse=True):
    if f.__name__ in ['f6','f1','f1t']:
        plt.plot(res, label=f.__name__,linewidth=2.5)
    else:    
        plt.plot(res, label=f.__name__,linewidth=.5)

plt.ylabel('rate/sec')
plt.xlabel('data size => {}'.format(r))  
plt.legend(loc='upper right')
plt.show() 
```

这会为较小的数据大小（5 到 35）生成此图：

![更小](../Images/b9c07f47ae2c9a2e3d8e9261ca906d6c.png)

此输出适用于更大范围（25 到 250）：

![较大](../Images/761347d5b1acdcde0419fd8cf3000cbf.png)

你可以看到`f1`，列表理解是最快的。`f6`并`f1t`以最快的速度返回元组。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-15T20:56:41.653

一个非常聪明的**Python 3 唯一**方法是使用星号分配或[扩展可迭代解包](http://www.python.org/dev/peps/pep-3132/)：

```
>>> G = [(1, 2, 3), ('a', 'b', 'c'), ('you', 'and', 'me')]
>>> items_I_want,*the_rest=zip(*G)
>>> items_I_want
(1, 'a', 'you')
>>> the_rest
[(2, 'b', 'and'), (3, 'c', 'me')] 
```

由于您正在为两者编写代码，因此您可以使用显式解包（适用于 Python 2 和 Python 3）：

```
>>> z1,z2,z3=zip(*G)
>>> z1
(1, 'a', 'you')
>>> z2
(2, 'b', 'and')
>>> z3
(3, 'c', 'me') 
```

# heroku - heroku 部署需要很长时间

> ID：12440344
> 
> 赞同：7
> 
> 时间：2012-09-15T19:26:00.160
> 
> 标签：heroku, bundler, asset-pipeline, gemfile, deploying

我们有一个相当大的应用程序正在 Heroku 上运行......它是一个使用 browsercms 作为基础的应用程序，它建立在此之上。Gemfile 并没有那么大（我们没有比普通应用程序更多的 gem），但出于某种原因，部署需要 15 分钟。由于所有资产，编译和推送资产到 s3（通过资产同步）大约需要 5 分钟，但在此期间花费了剩余的 10 分钟：

```
----> Heroku receiving push   
-----> Removing .DS_Store files
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.2.0
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment 
```

有人知道为什么这部分需要这么长时间吗？gemfile 锁在 repo 中，并推送到 heroku，这是我们 gemfile 的要点：[https ://gist.github.com/aa44bbb06eed97736c20](https://gist.github.com/aa44bbb06eed97736c20)

编辑：我们在轨道上 3.2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:01:11.243

当 bundler 使用具有 git repo 的 gem 时，它将下载整个 git repo 以包含 gem，而不仅仅是 master 分支或主分支的任何分支。

`rails_admin`我们对sferik的 gem 也有同样的问题。

如果您像这样指定一个特定的分支，它*可能会有所帮助：*

```
gem "browsercms", "3.5.3", git: 'git://github.com/josiahivey/browsercms.git', :branch => 'master' 
```

一种判断方法是在进行更改之前和之后查看编译的 slug 大小。在我们的例子中，`rails_admin`它负责大约 30mb 的 slug 大小。Heroku 也有 100mb 的 slug 大小限制，仅供参考。

您也可以尝试运行 bundle pack 命令，如下所示：

```
bundle pack --all 
```

这会将你所有的 gem（也应该是 git 的，因为 --all 开关）放到你的 vendor/cache 目录中。

正如 bundler 项目的这个 github 问题中所指出的那样（看看最后，一个 heroku 的人回应）：

[https://github.com/carlhuda/bundler/issues/67](https://github.com/carlhuda/bundler/issues/67)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:05:35.667

有两件事加速了这个过程。Bundler 1.2.1 似乎有所帮助，[turbo sprockets](https://github.com/ndbroadbent/turbo-sprockets-rails3)节省了几分钟。现在可以忍受了。

# java - java中的继承：对象状态和行为

> ID：12440348
> 
> 赞同：1
> 
> 时间：2012-09-15T19:26:07.803
> 
> 标签：java, oop, inheritance

Java是面向对象的编程语言。继承是最重要的特性之一。我们使用封装来隐藏对象状态。在下面的程序中，我应该对年龄和计数器使用私有访问修饰符，但为了测试这种继承，我使用了公共。

1.  为什么在直接对象状态访问（原始类型或对象引用）的情况下继承不起作用。SOP 3 输出与预期不同。
2.  由于编译器在 SOP 13 和 SOP 14 行中没有给出任何错误。为什么打印父类详细信息而不是子类。

.

```
public class Father {

    public int age = 50;
    /*
     * Counter keeps track of total no of instances created so far.
     */
    public static int counter = 0;

    public Father(){
        super();
        synchronized (Father.class) {
            ++Father.counter;   
        }
    }

    public int getAge(){
        return this.age;
    }

    public static int getStaticCount(){
        return Father.counter;
    }

}

public class Child extends Father {

    public int age = 25;
    public static int counter = 0;

    public Child(){
        super();
        synchronized (Child.class) {
            ++Child.counter;    
        }
    }

    public int getAge(){
        return this.age;
    }

    public static int getStaticCount(){
        return Child.counter;
    }

    public static void main(String args[]){

        Father father = new Father();
        Father child = new Child();
        Child realChild = new Child();

        System.out.println("Expecting Father Class details to be printed");
        System.out.println("SOP 1 : Father Age : "+father.age);     //prints 50 as expected.
        System.out.println("SOP 2 : Father Age : "+father.getAge());//prints 50 as expected.

        System.out.println("Expecting Child Class details to be printed");
        /*
         * Why inheritance does not work in case of direct integer access.
         */
        System.out.println("SOP 3 : Child Age : "+child.age); //prints 50 ?? , Father Age . Why ?
        System.out.println("SOP 4 : Child Age : "+child.getAge());//prints 25 as expected.

        System.out.println("Expecting Child Class details to be printed");
        System.out.println("SOP 5 : Child Age : "+realChild.age); //prints 25 as expected.
        System.out.println("SOP 6 : Child Age : "+realChild.getAge());//prints 25 as expected.

        /*
         *Total No of static Count : proper way of accessing static field using Class Name. 
         */
        System.out.println("SOP 7 : Father Instance Count : Using Class Reference :"+Father.counter);
        System.out.println("SOP 8 : Father Instance Count : Using Class Reference :"+Father.getStaticCount());

        /*
         * Incorrect Way to use static. Since Compiler allows this lets see output.
         */

        System.out.println("SOP 9 : Father Instance Count : Using Object Reference :"+father.counter); //prints 3 as expected.
        System.out.println("SOP 10 : Father Instance Count : Using Object Reference :"+father.getStaticCount());//prints 3 as expected.

        /*
         *Total No of static Count : proper way of accessing static field using Class Name.  
         */
        System.out.println("SOP 11 : Child Instance Count : Using Class Reference :"+Child.counter); // output is 2 as expected
        System.out.println("SOP 12 : Child Instance Count : Using Class Reference :"+Child.getStaticCount()); // output is 2 as expected

        /*
         * Incorrect Way to use static.Since Compiler allows this lets see output.
         * This invokes function of parent class. Why ? Inheritance does not work for static fields.
         */
        System.out.println("SOP 13 : child Instance Count : Using Object Reference :"+child.counter); // output is 3 but expected is 2 .          why ? 
        System.out.println("SOP 14 : child Instance Count : Using Object Reference :"+child.getStaticCount()); // output is 3 but expected is 2 .  why ?

        /*
         * Incorrect Way to use static.Since Compiler allows this lets see output.
         * This invokes function of parent class. Why ?
         */
        System.out.println("SOP 15 : child Instance Count : Using Object Reference :"+realChild.counter); // output is 2 as expected
        System.out.println("SOP 16 : child Instance Count : Using Object Reference :"+realChild.getStaticCount()); // output is 2 as expected
    }

} 
```

我的问题是为什么继承只适用于实例方法。为什么 SOP 3、SOP 13 和 SOP 14 的输出不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T20:34:05.290

原因是**多态性不适用于实例变量**。您正在做的是*可变阴影*。

在 SOP 3 和 4 中，子类中具有相同名称的变量会隐藏基类中的变量。由于这是在编译时解决的，因此选择了静态类型的值。

在 SOP 13 和 SOP 14 中，发生这种情况的原因相同。在该方法的范围内，孩子的类隐藏变量是未知的。

来自 JSL：

> 在类类型 C（第 8.1.6 节）中声明或继承的成员 m 的声明范围是 C 的整个主体，包括任何嵌套类型声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T20:39:49.390

`("SOP 3 : Child Age : "+child.age);`

没有这样的事情`"overriding fields"`。您可以**隐藏字段，但不能覆盖它们。** `Fields aren't polymorphic`. `6.4.1 of the Java Language Specification`有关详细信息，请参阅部分。

**/////-------------问题结束：1--------/////**

`("SO 13 : child Instance Count : Using Object Reference :"+child.counter);`

`child.counter`指向**父类**`static counter variable`，正如我之前提到的**`Fields are not Polymorphic`**

 ****/////-------------问题结束：2-------/////**

`("SOP 14 : child Instance Count : Using Object Reference :"+child.getStaticCount());`

`child.getStaticCount()`是指向`static counter variable`类的**父亲**，

尝试一下`realChild`，**结果将是 2**`static counter variable` ，正如预期的那样，它指向**Child Class**

`System.out.println("SOP 14 : child Instance Count : Using Object Reference :"+realChild.getStaticCount());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T20:51:02.710

当编译器正在查看 SOP 3 的行时，它不知道`child`包含除`Father`实例之外的任何内容......您已将子类放入其中的事实是无关紧要的，编译器将绑定字段查找基于这是一个`Father`类......所以它访问`Father.age`整数字段，所以预期的输出是 50 而不是 25。

SOP 13 与 SOP 3 相同...唯一的区别是您正在通过实例变量访问静态字段...这被认为是不好的风格，因为它只会引起您的困惑。

SOP 14 正在通过实例访问静态方法......并且该变量再次保存了 class 的对象`Father`，所以它`Father.getStaticCount()`就是返回的。这又是一种糟糕的风格。

您可以通过访问获得类似的效果`((Father)realChild).age`，`Father.counter`并且`Father.getStaticCount`在每种情况下，您都指定您想要`Father`类的字段/方法。

这是因为 Java 中没有字段重载，并且静态方法也没有重载。

如果要从子类中访问父字段，只需调用对父类的强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T21:16:23.413

```
System.out.println("SOP 3 : Child Age : "+child.age);
System.out.println("SOP 13 : child Instance Count : Using Object Reference :"+child.counter); // output is 3 but expected is 2 .          why ? 
System.out.println("SOP 14 : child Instance Count : Using Object Reference :"+child.getStaticCount()); // output is 3 but expected is 2 .  why ? 
```

在上面的示例中，您创建了子类的对象`Father child = new Child();`并将其存储在父类引用变量中，该变量是子类的超类。如果您将尝试调用任何方法或尝试通过“子”引用变量访问任何实例变量，它首先检查超类，然后如果在超超中找到它，则进入子类超级被执行。**

# php - 对正确使用 json 的方法感到困惑

> ID：12440349
> 
> 赞同：6
> 
> 时间：2012-09-15T19:26:10.533
> 
> 标签：php, jquery, ajax, json

我是 jquery 的新手，昨晚刚开始阅读 json。 **我有一个有效的 ajax 调用，它将简单数据传递给 php 脚本，处理数据并返回单个值。**效果很好。

**在阅读大量文章说json是要走的路之后，**我想来回添加数组和非数组数据的传递！！！！**但是......而且json也不安全，......放大括号，不要放大括号 - 使用json解码，不要使用它，确保顶部项目是一个对象，有人说在顶部放一个“d”，有些使用序列化，有些不使用它。我是否必须在数据周围放置花括号？还是 Jquery。有些人说还要添加一个标头，指定 application/json 或其他一些标头……而其他人则说它破坏了 IE7……有些人说要添加……**

 **`"dataType" : json`

在ajax调用中。你明白我为什么现在糊涂了吗？

...和...在 PHP 中我是否还必须使用 rawurldecode？在 json 解码之前，因为我的 ajax 对数据进行了 urlencodes ......这太令人困惑了......

我不希望这成为一个比现在更大的安全漏洞......我想正确地做到这一点并规范。如果有规格。

谢天谢地，大多数人说......这是关于你如何使用它（jquery，JSON）等，这使它“安全”。并且通过安全...我的意思是，正确使用。客户端上没有什么是永远安全的。

我确信我坚持的很简单，但是在阅读了超过 9 个多小时后，我找不到明确的答案。为什么制作语言（Jquery）的人不能写一个例子说......现在我们已经包含了json支持，这是正确的方法！？！

是的，我在上面的部分有点罗嗦，因为我之前问过简短的问题，并且在我从不在这里问问题的情况下被否决、批评和指责没有研究事物或没有“充分调查”至少 5 小时以上的密集阅读、浏览网站等。通常我只是在超过 9 小时后才来这里...

...但是我发现的信息是破碎的，陈旧的，而且碎片太多，我想完美地做到这一点！！！:) 到目前为止，我发现的最好的网站是用于提取闪烁图片，但它没有显示如何正确发送，所以我离开那里很高兴找到这篇文章......但不知道如何将它应用于我的情况。 ..

*请查看我的代码中的注释以获取我需要的提示，甚至更好 - 修复我的代码，以便我可以来回发送这 2 个数据，并且在每种语言中，您可以为 tmp 变量分配一个值，以便我可以看到您的方式从传递的数据中提取信息？谢谢...*

JQUERY/JS（我的旧代码）（代码片段）

```
 //Here's some sample data... - HOW DO I SEND THIS AS JSON (please) back and forth?
    var myarray = new Array();
    myarray.push("One");
    myarray.push("Two");
    myarray.push("Three");
    var someOtherData = "helpmeplease";

    $.ajax({
        url: "../../ajax/ajax.php",
        type: 'POST',
        data: ({
            "testarray" : myarray,
            "somemoredata" : someOtherData
        }),
        success: function(results) {
            // what do I do with results?  please alert the 2 passed variables back from php
            // for example alert("Test:" . results[0] . results.someOtherData) or however you
            // access the returned values... 
```

PHP 从 AJAX 接收（我的旧测试代码）

```
 $test1 = rawurldecode($_POST["somemoredata"]);
     $test2 = rawurldecode($_POST["testarray"]);
     $test3 = testarray[0]; // should be One 
```

PHP 返回

```
 // please send any data back to the Ajax call 1 array, 1 normal data please and alert
     // the data please so I can see how it's pulled back out...
     return $data; // 1 array, 1 normal variable please 
```

更多关于我的东西的信息...

*   我的网站是 UTF-8 编码的

*   我的数据集将低于 4 兆。最有可能低于200k。

*   没有跨域的事情发生

*   我有一个随机数，每页令牌身份验证系统，效果很好

*   数据中可以包含什么？任何事物？任何不应包含的符号或内容会破坏 JSON 代码或来回传递数据？

*   还有其他提示、建议、警告吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T21:28:07.230

不需要以 JSON 格式发送数据，这意味着将其他库包含在内。您可以使用 jQuery 将数据作为数组发送，并在 PHP 脚本中将其作为数组读取。

例如：

1.  从 PHP 返回单个 var：

    ```
    <script type="text/javascript">
    $(window).load(function(){
        var myarray = new Array();
        myarray.push("One");
        myarray.push("Two");
        myarray.push("Three");
        var someOtherData = "helpmeplease";

        $.ajax({
            url: "../../ajax/ajax.php",
            type: 'POST',
            data: ({
                "testarray" : myarray,
                "somemoredata" : someOtherData
            }),
            success: function(results) {
                alert(results);
            }
        });
    });
    </script> 
    ```

    和你的脚本：

    ```
    <?php
        $testarray = $_POST['testarray'];
        echo $testarray[0]; // prints One
        $someOtherData = $_POST['someOtherData']; // prints helpmeplease
    ?> 
    ```

2.  将数据作为数组和其他单个变量返回给 jQuery。

    您将`dataType: "json"`数据添加并返回为 JSON：

    ```
    <script type="text/javascript">
    $(window).load(function(){
        var myarray = new Array();
        myarray.push("One");
        myarray.push("Two");
        myarray.push("Three");
        var someOtherData = "helpmeplease";

        $.ajax({
            url: "../../ajax/ajax.php",
            type: 'POST',
            dataType: 'json',
            data: ({
                "testarray" : myarray,
                "somemoredata" : someOtherData
            }),
            success: function(results) {
                alert(results.somemoredata); // will alert 'helpmeplease'
                alert(results.testarray[1]); // will alert 'Two'
            }
        });
    });
    </script> 
    ```

    和脚本：

    ```
    <?php
        // I used the same POST fields, but it can be any other data
        $array = array();
        $array = $_POST['somemoredata'];
        $array = $_POST['testarray'];
        echo json_encode($array); 
    ?> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T04:15:46.313

好的。首先，考虑 JSON 的最简单方法是 JavaScript 对象的序列化表示（或 n 维、关联/非关联数组集，如果您在 PHP 中更容易思考的话）。

作为 PHP 中的示例，您可能会执行以下操作：

```
$albums = array( array( "title" => "Dark Side of the Moon",
                        "artist" => "Pink Floyd",
                        "tracklist" => array( "Speak to Me", "Breathe", "..." ) ),

                 array( "title" => "Ten",
                        "artist" => "Pearl Jam",
                        "tracklist" => array( "Once", "Even Flow", "..." ) )
); 
```

您可以在 JavaScript 中以更紧凑的方式执行相同的操作，例如：

```
var albums = [
    {
      title : "Dark Side of the Moon",
      artist : "Pink Floyd",
      tracklist : [ "Speak to Me", "Breathe", "..." ]
    }, {
      title : "Ten",
      artist : "Pearl Jam",
      tracklist : [ "Once", "Even Flow", "..." ]
    }
]; 
```

两者是完全一样的东西。
JSON 将序列化该数组和对象的集合，看起来几乎与 JavaScript 实现一模一样。

**注意 1：** *下面的每个双引号都应该被转义，但我真的不会手动这样做*
**注意 2：** *按照标准，整个事情可能是一个 1 行双引号字符串，但是在这里这样做打破语法高亮，我认为你会从中得到更多*

```
[{"title":"Dark Side of the Moon","artist":"Pink Floyd","tracklist":["Speak to Me","Breathe","..."]},
{"title":"Ten","artist":"Pearl Jam","tracklist":["Once","Even Flow","..."]}] 
```

如您所见，JSON 并不真正需要任何模式，除非您自己创建一个模式来满足您的特定需求。
在这里，我有一系列专辑。每张专辑都有一个`title`an`artist`和 a `tracklist`，这是一个歌曲标题数组。如果您的应用程序允许，您可以转换`tracklist`为一组`track`对象，每个对象都有自己的歌曲标题和持续时间，并链接到歌词或 .mp3 或任何您想要的内容。

因为我使用的是对象的索引数组（我不需要在我的专辑集合中给每个专辑一个关联名称 - 索引数组可以保存它们），所以 JSON 字符串包含在方括号中，方式相同JS 数组是（JS 数组是***index-only***）。

与 XML 相比，它确实是轻量级的。

如果您所做的只是来回发送一些键和值，那么在 RESTful API 之上的一些简单查询参数就绰绰有余了。

如果您发送的东西更像是“关联数组”（JS 中的一个对象），那么 JSON 同样有效，如下所示：

```
{"title":"For the Record","artist":"Nerds with Guitars","tracklist":["Sympathy for the Daleks","Hero","Stereotypical"]} 
```

您只发送了一个对象，因为您只有一个对象要发送。对象在 JS 中用大括号表示，因此在 JSON 中，如果您有一个具有命名属性的对象，它将被包裹在大括号中。

**注意 3：** *如果您使用 jQuery 之类的库，或者从 Twitter Search 之类的 API 中获取 JSON，即使您只返回一个对象，它也很可能会作为单个对象返回到您的 JS 程序中，位于数组，所以阅读最后一个例子可能必须像这样：

```
var dataArr = JSON.parse(response),
    dataObj = dataArr[0]; //only object in array

displayTracklist(dataObj); 
```

如果您在 vanilla JS 中自己完成所有这些操作，您可以选择响应是作为对象返回，具有命名属性，还是作为您想要的任何数组（通常是对象数组）返回。如果您知道一个调用（例如发送登录 POST 数据）将始终返回具有命名属性的单个对象，而其他调用将返回对象列表（例如获取博客文章的评论，或者为博客滚动获取博客文章，或从服务器获取多人游戏中每个玩家的数据）。您是否想对这两种情况进行不同的处理，100% 取决于您。

在 PHP 方面，您将使用`json_decode`它们将它们转换为关联数组。一定要阅读关于......的文档`json_decode`......它默认为一维数组，这真的很愚蠢，而且很容易忘记。用于`json_encode`将您的数组（索引或关联，或两者的 n 维组合）转换为 JSON 字符串。

所以要对数据进行操作，你需要做的就是编写一些函数来遍历你自己的数组/对象结构，做你想让他们做的事情，而不是担心丑陋的基于 DOM 的节点遍历， XML 样式。

在 JavaScript 方面，您将使用`JSON.parse`并`JSON.stringify`进行解码和编码。

当您通过网络发送这些信息时，我的建议是使用简单的“文本”标题。如果您使用 MIME 类型发送它们`application/json`，则无需以任何语言进行任何解码。 ***但是***，IE6 和 IE7 绝对***没有***对 JSON 的原生支持。因此，如果您发送该 MIME 类型，它们将很适合，因为它们需要在您的应用程序中进行特殊处理，您必须在其中进行解码，但仅限于那些浏览器等......

故事的寓意：`text/plain`和`var dataObj = JSON.parse(jsonText);`

对于 IE6 和 IE7，使用 Douglas Crockford 的`json2.js`. 要么将文件的下载内容放在 的条件注释中`IE lte 7`，要么为每个人都包含它——它很小，如果你有一个支持 JSON 的浏览器，它根本不会做任何事情。JSON 的本机实现是基于 json2.js 构建的，因此，就您而言，IE6 和 IE7 将具有与 Chrome21 和 IE10 相同的 JSON 功能。

大多数 JS 库也有自己的内置 JSON 序列化器/反序列化器，基于 json2 规范。

说到规格... ...您可以在 JSON 中放入什么，不能放入什么？

好吧，基本上，您可以序列化任何基于数据的原生 JS 对象。

因此，函数、RegEx、DOM 元素、HTML5 API 以及其他你可能有的疯狂想法都已经过时了……
但是字符串、数字（所有 JS 数字都是浮点数，所以 JSON 没有数字类型）、布尔值、数组和对象都在，但有一个例外：您的结构中不能有任何循环引用。

var myObj = { 孩子 : { 父母 : myObj } };

完全有效的 JavaScript。JSON 将拒绝对其进行编码。

所以，是的，JSON 和你想要的一样安全。它不允许使用函数，所以只要你***永远不会`eval`收到***你收到的东西，而是以受控方式序列化和反序列化，访问某些东西并让它在你的脸上炸毁是没有害处的......

...当然，像往常一样清理您的输入和输出，它会像其他任何东西一样安全的数据传输机制。

**附录：**不要像某些人建议的那样费心手动构建 JSON 字符串……当您可以在更短的时间内创建数组/对象并遍历它们时，这很丑陋，容易出错，而且不值得付出努力，扩展它们，不管怎样，然后让 JSON 在你的结构中递归并随它进行序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:28:59.113

你的问题有点含糊。一般来说，您的问题清楚地传达了一件事：您不知道 JSON 是什么或如何使用它。因此，答案是“学习”。

一个普遍的答案：JSON 是用于*数据交换*。您如何使用它完全取决于您在任何特定情况下要完成的工作。例如：

**将 javascript 对象编码为 JSON 字符串：**

```
var myObj = {};
myObj.aString = 'a string of characters';
myObj.aList = ['a','b','c'];
var myJSON = JSON.stringify( myObj );
console.log( myJSON ); 
// {"aString":"a string of characters","aList":["a","b","c"]}
/*    
note - the function you use varies by browser/javascript engine.
libraries (jQuery, for example) have methods that can simplify this.
*/ 
```

**将 JSON 字符串解码为 PHP 数组**

```
$myJSON = '{"aString":"a string of characters","aList":["a","b","c"]}';
$myArray = json_decode( $myJSON,true );
print_r( $myArray );
/*
Array
    (
    [aString] => a string of characters
    [aList] => Array
        (
        [0] => a
        [1] => b
        [2] => c
        )
    )
*/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T21:28:37.900

我没有阅读整篇文章，因为很长，但你应该看看这个函数。确保以相同的格式（数组或 json 等）传递并获取变量。

```
> http://php.net/manual/en/function.json-encode.php
> http://www.php.net/manual/en/function.json-decode.php
> http://api.jquery.com/jQuery.parseJSON/ 
```**

# javascript - 在javascript中创建一个Json对象

> ID：12440350
> 
> 赞同：6
> 
> 时间：2012-09-15T19:26:14.543
> 
> 标签：javascript, jquery, json

我正在验证一个表单，我需要显示某些单选按钮，用户需要根据一些规则选择它们，可以创建多少单选按钮是动态的，所以我不能在服务器端进行验证，不能写一个预定义的java脚本代码。

每个单选按钮都会被分成几组`required`，然后再往下，它们可以被分组为,等`center`，因此用户需要从每个组中选择一个值，所以结构如下所示`left``right`

```
-Main Group (if block needs to validate based on this e.g if key=required should validate)
  |
  Sub-group (say left, right etc)
   |
   number of radio buttons based on the sub-group 
```

因此，主组密钥可用于决定是否应该对其进行验证，并且基于子组密钥我可以决定所有值将在那里并需要验证

我正计划在页面渲染时间创建一个 JSON 对象，例如

```
{"required": [
        {"center": "id1,id2,id3"},
        {"left": "id1,id2,id3"}
      ]
  "optional": [
        {"center": "id1,id2,id3"},
        {"left": "id1,id2,id3"}
      ]
}; 
```

我不确定我想的结构是否正确以及如何在 java 脚本中创建它？就像我有一个用于键的外部循环和一个用于子组的循环，最后用于子组中的按钮，

```
 for(main group key){
     for(subgroup key){
       for(list of radio button under subgroup key)
}
  } 
```

但不知道如何创建一个正确的结构，以便我以后可以用 jquery 解析它并将其用于验证。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T20:44:57.720

在 JavaScript 中。您可以使用 `JSON.stringify(myObject, replacer);`

例如。

像这样在javascript对象上创建

```
var myObject={}; 
```

现在创建 javascript 对象后，您可以将其转换为 JSON 结构，如下所示

```
var myJsonText=JSON.stringify(myObject); 
```

注意：更换器是可选的

现在，如果您想将其转换为 JSON 对象，请使用 JSON.parse 方法

```
myJsonObject=JSON.parse(myJsonText) 
```

# windows - VS.NET = 我的应用程序需要在兼容模式下运行

> ID：12440351
> 
> 赞同：2
> 
> 时间：2012-09-15T19:26:37.447
> 
> 标签：windows, visual-studio, forms, compatibility

我正在开发一个使用库来控制 OLYMPUS 相机的应用程序 - 该库来自 OLYMPUS。

我在 Windows 8 中运行 vs.net 2012。

此应用程序用于在 windows 7 下的 vs.net 中运行。在 windows 8 中，相机不可见，应用程序无法运行。因此，我构建了我的应用程序并设置在 XP 兼容模式下运行的 .exe 上，该应用程序可以运行并且可以看到相机。

但是我不能像这样开发我的应用程序 - 有没有办法在 vs.net 中调试时将应用程序设置为以兼容模式运行？

# c# - WPF中的组总和

> ID：12440352
> 
> 赞同：-2
> 
> 时间：2012-09-15T19:26:43.093
> 
> 标签：c#, wpf, grouping, observablecollection

您好，我有一个 observablecollection，允许用户使用“添加”按钮添加行。并且用户可以将具有相同名称的项目分组在同一个标​​题中。这是代码：

数据背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;
namespace WpfDataGridWithDataTable
{
    public class Article
    {
        public  Article ()
        {

        }
        private int  _modelNumber;
        public int ModelNumber
        {
            get { return _modelNumber; }
            set { _modelNumber = value; OnPropertyChanged("ModelNumber"); }
        }

        private string _modelName;
        public string ModelName
        {
            get { return _modelName; }
            set { _modelName = value; OnPropertyChanged("ModelName"); }
        }

        private decimal  _unitCost;
        public decimal UnitCost
        {
            get { return _unitCost; }
            set { _unitCost = value; OnPropertyChanged("UnitCost"); }
        }

        private string  _description ;
        public string Description
        {
            get { return _description; }
            set { _description = value; OnPropertyChanged("Description"); }
        }

        #region INotifyPropertyChanged Membres

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propName));
            }
        }
        #endregion
    }
    public class ListArticles : ObservableCollection<Article > 
    {
        public Article a;
        public ListArticles()
        {

                a = new Article();
                this.Add(a);

        }

    }

} 
```

XAML 代码：

```
<Window x:Class="WpfDataGridWithDataTable.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfDataGridWithDataTable"
        Title="Window1" Height="300" Width="300">
    <Grid
        Name="gridPanel">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <DataGrid 
            Grid.Column="0"
            Name="dataGrid1"  
            AutoGenerateColumns="True"  
            CanUserAddRows="True" 
            CanUserDeleteRows="True"
            CanUserResizeColumns="True"
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}"/>
        <ListBox 
            Grid.Column="1"
            Name="listBox1" 
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="{x:Type local:Article}">
                    <StackPanel    
                        Orientation="Horizontal">
                        <TextBlock 
                            Width="100"
                            Margin="10"  
                            Background="DarkBlue"
                            Foreground="White"
                            FontSize="14"
                            Text="{Binding ModelNumber}"/>
                        <TextBlock 
                            Width="100"
                            Margin="10" 
                            Background="DarkBlue"
                            Foreground="White"
                            FontSize="14"
                            Text="{Binding ModelName}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
            <Button 
                Grid.Row="1"
                Grid.Column="0"
                HorizontalAlignment="Left"
                Width="100"
                Name="btnAdd"
                Content="Add Item"
                Click="btnAdd_Click">
            </Button>
            <Button
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Right"
                Width="100"
                Name="btnDelete"
                Content="Delete Item"
                Click="btnDelete_Click" >
            </Button>
    </Grid>
</Window> 
```

表单背后的代码：

```
namespace WpfDataGridWithDataTable
{

    public partial class Window1 : Window
    {
        private ListArticles myList;
        public Window1()
        {
            InitializeComponent();
            myList = new ListArticles();

            this.DataContext = myList;

        }

        private void btnAdd_Click(object sender, RoutedEventArgs e)
        {
            myList.Add(new Article());
        }

        private void btnDelete_Click(object sender, RoutedEventArgs e)
        {
            myList.Remove(this.dataGrid1.SelectedItem as Article);
        }

    }
} 
```

我想添加一个名为“数量”的列，其中存储了添加到组中的每篇文章的数量。我的问题是：如何获得每组数量的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:05:36.913

使用 Linq 可以解决这个问题。（下面的代码可能有错误，我没有通过编译器传递）

```
var groupSumsQuery = from model in myList
                     group model by model.ModelName into modelGroup
                     select new 
                         {
                             Name = modelGroup.Key,
                             Sum = modelGroup.Sum(model=>model.UnitCost)
                         };

foreach(var group in groupSumsQuery)
{
    Console.WriteLine("Total price for all {0}: {1}", group.Name, group.Sum);
} 
```

# c - （C 编程）创建数组和分配空间（通过 malloc）影响另一个数组

> ID：12440354
> 
> 赞同：1
> 
> 时间：2012-09-15T19:26:51.580
> 
> 标签：c, malloc

**编辑**：我大幅更改了我的代码以类似于原始代码的实际结构（我不能发布，因为我必须编写页面和页面来解释一切是什么）。

* * *

我一直在努力解决这个问题。我有六个 int 数组 ,`ID1`和`ID2`, `ID3`and `array1`, `array2`and `array3`，其中具有相同索引的名称具有相同的长度（分别为`len1`,`len2`和`len3`）。我的想法是我在 for 循环中重新创建它们，因为这些数组的长度在其中发生了变化。我这样做如下：

```
/* Before entering the loop, I define these three arrays, where 
   len1, len2 and len3 are all equal to 100\. */

int i,S,len1,len2,len3;
len1=100;
len2=100;
len3=100;
int* ID1; 
int* ID2; 
int* ID3;
ID1=(int*) malloc((len1)*sizeof(int));
ID2=(int*) malloc((len2)*sizeof(int));
ID3=(int*) malloc((len3)*sizeof(int));
/* Then I fill the arrays with values from a loop which is not relevant 
   to my problem. Let's just fill them with a simple for loop: */
for(i=0;i<len1;i++){
    ID1[i]=i;
    ID2[i]=i;
    ID3[i]=i;
}
/* Now I enter a loop, in which I create 3 more arrays named array1, array2 
   and array3: */
for(S=98;S>=0;S--){
 printf("ID3[99]:%d (before)\n",ID3[99]); // 1st call to printf
 int* array1;
 int* array2;
 int* array3;
 array1=(int*) malloc((len1)*sizeof(int));
 array2=(int*) malloc((len2)*sizeof(int));
 array3=(int*) malloc((len3)*sizeof(int));
 printf("ID3[99]:%d (after)\n",ID3[99]);  // 2nd call to printf
 /* I do more stuff here. Here len1, len2 and len3 changes, so I have to 
    re-create the "ID" arrays and the ones named "array". The idea is to fill 
    the new "ID1", "ID2" and "ID3" arrays with the values of another set of 
    arrays that I filled with values from complex calculations named 
    "AnotherArray1", "AnotherArray2" and "AnotherArray3". 
    The lenghts are always > 100.*/
 free(ID1);
 free(ID2);
 free(ID3);
 free(array1);
 free(array2);
 free(array3);
 int* ID1;
 int* ID2;
 int* ID3;
 ID1=(int*) malloc((len1)*sizeof(int));
 ID2=(int*) malloc((len2)*sizeof(int));
 ID3=(int*) malloc((len3)*sizeof(int));
 for(i=0;i<len1;i++){
    ID1[i]=AnotherArray1[i];
 }
 for(i=0;i<len2;i++){
    ID2[i]=AnotherArray2[i];
 }
 for(i=0;i<len3;i++){
    ID3[i]=AnotherArray3[i];
 }
 /* Finally, I need to free the "AnotherArray" arrays, because in the loop 
    I need to create them again and do some complex calculations with the 
    "ID" arrays. */
 free(AnotherArray1);
 free(AnotherArray2);
 free(AnotherArray3); 
 printf("ID3[99]:%d (before, after starting the loop again)\n",ID3[99]); // 3rd call to printf
} 
```

问题是当我这样做时，`printf`函数的第 3 次调用与第 1 次和第 2 次调用不同（即，当循环再次开始时，它的某些元素中 ID3 的值突然改变了！）。我真的不知道这里发生了什么......有什么建议吗？如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:32:56.480

**/*（数组在循环开始之前创建）*/**

printf("array[0]: %d (之前)",array[0]);

printf("array[0]: %d (after)",array[0]);

**整数*数组；数组=(int*) malloc((len1)*sizeof(int));**

/* 用一些值填充数组，然后循环再次开始 */

我会注意到您每次都在为数组分配一块新的内存。由于它是不同的内存块，因此它可能具有不同的（垃圾）值。我怀疑在重新分配它之前**释放（数组）是个好主意。**

里面有一股代码味

```
len2=100;
len3=100;
int* ID1; 
int* ID2; 
int* ID3;
ID1=(int*) malloc((len1)*sizeof(int));
ID2=(int*) malloc((len2)*sizeof(int));
ID3=(int*) malloc((len3)*sizeof(int));

... 

int* ID1;
int* ID2;
int* ID3;
ID1=(int*) malloc((len1)*sizeof(int));
ID2=(int*) malloc((len2)*sizeof(int));
ID3=(int*) malloc((len3)*sizeof(int)); 
```

您正在第二次声明 ID1、ID2 和 ID3。这很可能会混淆这个问题。它实际上是第二组变量。这可能是你问题的根源。

我会注意到原始分配永远不会被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:40:54.767

问题是`array`不是在循环之前*创建的，而是在循环之前**声明*的。它保持未初始化，直到分配

```
array=(int*) malloc((len1)*sizeof(int)); 
```

最后。同时，指针指向内存中恰好可读的某个位置。但是，内存被分配给其他东西，并且某些东西不断变化。这就是为什么两个打印输出不同的原因。

一般来说，你不能在第一次赋值之前取消引用指针；它是未定义的行为，可能会返回垃圾，或者可能会使您的程序崩溃。

# visual-studio - visualstudio addin 移动宏

> ID：12440363
> 
> 赞同：2
> 
> 时间：2012-09-15T19:35:04.713
> 
> 标签：visual-studio, macros, add-in, visual-studio-2012, visual-studio-macros

VS.Net 2012 摆脱了宏。

所以我需要将我的 VS2010 宏导入到 AddIn 或 Extension 以便将它们与 VS2012 一起使用

网上有很多示例，如何在工具栏中创建带有一些动作的按钮。但我不需要按钮。我只想在 `Tools\Environment\Keyboard`.

我尝试在以下代码中的 Connect 类中添加 VS AddIn 模板（就像在我的宏中一样）：

```
Public Sub MyAction()
…
End Sub 
```

但它没有显示在`Tools\Environment\Keyboard`.

请帮忙举个简单的例子，如何将我的宏移动到 AddIn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T14:54:11.013

[您可以按照MZ-Tools HOWTO：将宏方法迁移到 Visual Studio 插件中的](http://www.mztools.com/articles/2013/MZ2013016.aspx)原样迁移宏

要创建热键，您需要有`Command`s 可以执行您迁移的宏。它们将出现在`Tools`> `Environment`>`Kexboard`菜单中，您甚至可以为它们添加菜单按钮。

如果您改变了添加按钮的想法，您可以通过`Cusomize...`上下文菜单或使用您的插件来实现它，如插件模板中所示。

# php - 原始输入端口 80

> ID：12440370
> 
> 赞同：-2
> 
> 时间：2012-09-15T19:37:21.877
> 
> 标签：php, input

我尝试了大量的代码来执行这个任务。我的服务器端口 80 有一些未格式化的输入，我需要将其记录到文件中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:08:59.770

PHP 不会让您访问原始输入。最接近数据的是 with`php://input`或`$HTTP_RAW_POST_DATA`，但那些只能访问 HTTP 正文（在标头之后）。此外，您的“未格式化”输入会在 PHP 甚至有机会处理它之前导致 Web 服务器上的解析错误。

如果您确实需要记录所有流量，甚至可能不是正确的 HTTP，您需要查看防火墙或 Web 服务器的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T20:31:25.853

检查这段代码，我用它从 POST 请求中获取原始输入，$var 将按原样存储输入，然后你可以自由地用它做任何事情

```
ob_start();
readfile("php://input");
$var = ob_get_clean(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T20:34:19.123

当您想将某些内容记录到文件中时，您不应该使用 Web 编程语言。请改用 C++ 或 C# 并监视端口并将流记录到文件中。

# javascript - 如何为视频创建交互式字幕？

> ID：12440378
> 
> 赞同：0
> 
> 时间：2012-09-15T19:38:49.823
> 
> 标签：javascript, html5-video, interactive

我正在考虑制作一个视频，然后在下面有一个标题，用户可以在其中单击并获得单词的定义，但我就是不知道该怎么做。我正在研究使用 html5 视频在 javascript 中执行此操作，任何人都可以为我指出正确的方向，或者也许有一个关于此的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:41:24.417

这个项目似乎是显示字幕的好候选：http: [//bubbles.childnodes.com](http://bubbles.childnodes.com)

# ruby-on-rails - 通过 http POST 在 Ruby on Rails 应用程序中创建对象的最合适方法是什么？

> ID：12440380
> 
> 赞同：2
> 
> 时间：2012-09-15T19:39:19.440
> 
> 标签：ruby-on-rails, ruby, http, post

一般来说，我对 Web 开发还很陌生，我一直在开发一个我希望（最终）与 Android 应用程序交互的 Ruby on Rails 应用程序。我目前正在寻找最合适和最安全的方法来从 Android 应用程序发送的 http POST 创建对象。

我接近它的方式是通过使用 chrome 的 REST 客户端扩展尝试将 POST 发送到我在 localhost 上的应用程序并让它从 POST 信息创建一个对象来初步实现这一点。

这是来自 chrome 扩展的 POST 的结果：

```
Started POST "/problems" for 127.0.0.1 at 2012-09-15 14:16:19 -0400
Processing by ProblemsController#create as */*
  Parameters: {"user"=>"7876483097", "latitude"=>"18.378383", "longitude"=>"-67.026201", "ptype"=>"2", "description"=>"Poste roto"}
  ←\[1m←\[36m (0.0ms)←\[0m  ←\[1mbegin transaction←\[0m
  ←\[1m←\[35m (0.0ms)←\[0m  rollback transaction
  Rendered problems/new.html.erb within layouts/application (31.0ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  ←\[1m←\[36mUser Load (0.0ms)←\[0m  ←\[1mSELECT "users".* FROM "users" WHERE "users"."remember_token" = 'gdmKIurcqDOMoDGWE4IBng' LIMIT 1←\[0m
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 93ms (Views: 87.0ms | ActiveRecord: 0.0ms) 
```

出现“回滚事务”的地方意味着创建方法中的@problem.save 失败。任何人都可以帮助确定我缺少什么或者我应该如何改变我的方法来正确地做到这一点。

这是我的模型架构：

```
 create_table "problems", :force => true do |t|
    t.string   "user"
    t.float    "latitude"
    t.float    "longitude"
    t.integer  "ptype"
    t.string   "description"
    t.integer  "priority"
    t.integer  "status"
    t.datetime "created_at",          :null => false
    t.datetime "updated_at",          :null => false
    t.string   "avatar_file_name"
    t.string   "avatar_content_type"
    t.integer  "avatar_file_size"
    t.datetime "avatar_updated_at"
    t.boolean  "gmaps"
    t.string   "address"
  end 
```

这是我的创建方法：

```
 def create
    @problem = Problem.new(params[:problem])
    if @problem.save
      flash[:success] = "Problema guardado"
      redirect_to @problem
    else
      @problem.errors.full_messages
      flash.now[:error] = 'Informacion incorrecta'
      render 'new'
    end
  end 
```

这是 POST 正文：

```
user=7876483097&latitude=18.378383&longitude=-67.026201&ptype=2&description=Poste+roto 
```

而且，这是问题模型和验证

```
class Problem < ActiveRecord::Base

    acts_as_gmappable :latitude => 'latitude', :longitude => 'longitude', :process_geocoding => :geocode?,
                  :address => "address", :normalized_address => "address",
                  :msg => "Lo sentimos, ni Google puede localizar esa direccion"

    attr_accessible :user, :latitude, :longitude, :ptype, :description, :avatar, :address
    validates(:user, presence: true)
    validates(:latitude, presence: true)
    validates(:longitude, presence: true)
    validates(:ptype, presence: true) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:37:54.040

问题在于您作为 POST 正文发送的字段的命名。

请注意，新实例`Problem`是使用`params[:problem]`.

因此，这些字段应该被命名为`problem[user]`,`problem[latitute]`等，而不是只是`user`or `latitude`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:12:54.410

这是 post 构造的样子：

```
Parameters: {"problem"=>{"user"=>"7876483097", "latitude"=>"18.378383", "longitude"=>"-67.026201", "ptype"=>"2", "description"=>"Poste roto"}} 
```

而不是你所拥有的：

```
Parameters: {"user"=>"7876483097", "latitude"=>"18.378383", "longitude"=>"-67.026201", "ptype"=>"2", "description"=>"Poste roto"} 
```

问题可能只是您使用其余客户端扩展构建帖子的方式。我发现通过命令行或终端使用 curl 更容易。

尝试在终端或命令行中使用类似的东西：

```
curl -H "Content-Type:application/json" -H "Accept:application/json" -d "{\"problem\":{\"user\":\"7876483097\", \latitude\":\"18.378383\", \"longitude\":\"-67.026201\",\"ptype\":\"2\",\"description\":\"posteroto\"}}" http://localhost:3000/problems 
```

# matlab - 检查正方形是否落在三角形内的最简单/有效的方法

> ID：12440381
> 
> 赞同：5
> 
> 时间：2012-09-15T19:39:22.267
> 
> 标签：matlab, math, geometry

我只是想知道是否有任何简单/有效的方法来检查正方形是否落在三角形内。或至少一个角落入内部或一些重叠。例如考虑下图，我应该可以看出 3 个方块落在里面。即正方形1明显在里面，正方形2的一个角在里面，3重叠。 ![示例图](../Images/35c84c03caf1cdd5a939c2215ba488b5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T22:42:28.160

将您的三角形视为三个向量，全部按固定的旋转顺序：A->B、B->C 和 C->A

现在，考虑对于每个三角形顶点，从该顶点到每个方形顶点都有四个向量。您计算每个三角形边矢量和每个三角形-正方形矢量（总共 12 个）之间的叉积。如果叉积都是相同的符号（或零），则您的正方形在里面。

从概念上讲，您正在尝试确定正方形顶点是在线条的左侧还是右侧。你实际上并不关心它是左还是右，或者你是顺时针还是逆时针......只是正方形顶点在所有三角形向量的同一侧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T22:34:37.143

我正在查看这个不错的[教程](http://www.blackpawn.com/texts/pointinpoly/default.html)。它解释了如何使用各种技术测试一个点是否在三角形内。当一个方角落在里面时，它似乎会有所帮助。

而且我喜欢重心技术，在这里我为 matlab 重新实现了它：

```
function d = isinside(p,a,b,c)

    % Test if a point p(x,y) is inside a triangle
    % with vertices a(x,y), b(x,y) and c(x,y)

    v0 = c - a;
    v1 = b - a;
    v2 = p - a;

    A = [dot(v0,v0) dot(v1,v0);dot(v0,v1) dot(v1,v1)];
    b = [dot(v2,v0); dot(v2,v1)];

    x  = A\b;

    % Check if point is in triangle
    if (x(1) > 0) && (x(2) > 0) && (sum(x) < 1)
        d = true;
    else
        d = false;
    end 
```

然后我会测试正方形的每个顶点，如果其中一个落在里面，我会返回。相当多的计算，但值得一试。

对于重叠，我会测试交叉点，正如在这个[线程](https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect)中讨论的那样，对于三角形和正方形的线的每个组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T20:40:10.680

新手来了 想到的一个想法如下。这可能效率不高，但相当简单。

1) 计算正方形的 4 个角。

2）选择每个角/点将“行走”的方向。基本上为该点选择一个矢量方向。

3）让这些点沿着向量“走”，看看它是否对三角形的边界感兴趣。

4）如果一个点的行走向量相交奇数次，这意味着它在里面。如果它相交偶数次，则意味着它在外面。记住 0 是偶数。

5）如果你真的沿着三角形的边缘走，必须做出特殊情况。在大多数情况下，这可以通过选择不同的方向来避免。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T15:56:26.613

也许这可以提供一个想法。

![在此处输入图像描述](../Images/14d3d988685e869e40a7c484feac6aa2.png)

创建具有 0-1 值的三角形图像（这是困难的部分）；然后对每个正方形，创建它的 0-1 图像，这很简单；添加两个图像，并计算不同三角形或正方形坐标处的值。您甚至可以计算重叠区域的面积。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:23:55.427

您实际上要做的是确定正方形是否可以与三角形*线性分离*，即您是否有一条线将两个对象分开。如果存在这样的线，则它们不相交。有几种算法可以测试线性可分性。好处是它们是通用的，因此它可以与其他多边形一起使用。不利的一面是，由于它们的普遍性，它们可能不会使用问题的特定特征来简化解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T11:54:18.883

由于您询问了matlab，并且因为其他答案解释了直接方法，所以我将提到一些可用的解决方案。您可能想看看[polyxpoly](http://www.mathworks.se/help/map/ref/polyxpoly.html)（如果您有 Mapping Toolbox）。它可以处理更一般的情况。否则，文件交换上有很多贡献，请参见[Curve Intersect 2](http://www.mathworks.com/matlabcentral/fileexchange/8908-curve-intersect-2)。[另一方面， Polygon_Intersection](http://www.mathworks.com/matlabcentral/fileexchange/18173-polygonintersection)返回重叠区域，而不仅仅是交点。

# codeigniter - 在哪里可以找到 Paypal_lib.php？

> ID：12440382
> 
> 赞同：1
> 
> 时间：2012-09-15T19:39:25.527
> 
> 标签：codeigniter, paypal

我已经搜索了很多这个文件，但找不到它。很多人都给出了这个链接，但是当我转到这个链接时，它会显示内容页面。没有下载文件。请尽快帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:28:48.837

嗨，看看这个伟大的图书馆 codeigniter 支付统一支付界面，你也可以在其中找到 paypal。

[代码点火器付款](http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T14:24:40.503

嗨，您可以在这里找到 Paypal_lib 和 paypallib_config.php.... [https://github.com/ollierattue/codeigniter-paypal](https://github.com/ollierattue/codeigniter-paypal)

# android - 仅当活动不活动时来自 BroadcastReceiver 的 postNotification

> ID：12440383
> 
> 赞同：0
> 
> 时间：2012-09-15T19:39:33.197
> 
> 标签：android, android-activity, notifications, broadcastreceiver

我有一个 BroadcastReceiver(#1) 一直在运行以捕获事件。当事件发生时，它可能需要对特定活动进行 UI 更改（如果该活动处于活动状态）。为此，我让 BroadcastReceiver#1 创建了一个新意图，该意图被活动上的第二个 BroadcastReceiver(#2) 捕获，并且仅在 Activity 未暂停时才注册/取消注册……如此处所述： [仅当它在前台时才从 BroadcastReceiver 通知 Activity](https://stackoverflow.com/questions/2282435/inform-activity-from-a-broadcastreceiver-only-if-it-is-in-the-foreground)

所有这些都在工作......但是，现在我希望 BroadcastReceiver#1 在活动未处于焦点或处于焦点但选择不处理事件时发布状态通知。因此，Activity（如果处于活动状态）需要某种方式与 BroadcastReceiver#1 进行通信。

我以为我会让 BroadcastReceiver#1 生成一个线程，该线程将在 X 秒后发布带有通知的事件......该线程将有第三个 broadcastreceiver#3，如果接收活动选择处理事件，它可以发送“不要打扰发布该通知”意图，该意图将被 BroadcastReceiver#3 捕获以中止通知。但是，这不起作用，因为Android 不允许一个BroadcastReceiver 注册另一个BroadcastReceiver。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:56:36.733

Have never used it, but should work. Just before sending broadcast query whether any broadcast recievers are ready to handle your intent .

```
PackageManager pm = context.getPackageManager();
List<ResolveInfo>  mList = pm.queryBroadcastReceivers(intent, 0);

if(mList.size() > 0){
 //broadcast intent
}else{
 //post notification
} 
```

Edit: Since this does not work on recievers registered through activites, you could track the register and unregister using Application class. Since same application and process is being used, you can make helper functtion to register and unregister and keep a count of registration and decide whether to post notification or broadcast an intent

# apache-flex - 在 HttpSession 和 FlexSession 之间共享数据

> ID：12440384
> 
> 赞同：0
> 
> 时间：2012-09-15T19:39:42.190
> 
> 标签：apache-flex, jsp, session, rtmp, lcds

我知道这听起来很傻，但这就是我们所处的情况：

1.  在 index.jsp 中，我们必须捕获包含从​​浏览器发送的工作用户的用户名的 Http Header（这有点像我们组织的单点登录）
2.  在 RemoteObject and Assembler (LCDS, ADEP) 中，我们需要检索用户名进行数据处理。

到目前为止，我们将用户名放在#1 的 HttpSession 中，然后在 #2 中检索它。幸运的是，它之所以有效，是因为 RemoteObject 在 amf（即 http）上运行。我们发现它不是很便携，因为如果将 RemoteObject 切换到 rtmp，它将无法工作。

请告知我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:38:59.557

[http://cookbooks.adobe.com/post_How_to_pass_on_dynamic_data_from_a_JSP_wrapper_to-8410.html](http://cookbooks.adobe.com/post_How_to_pass_on_dynamic_data_from_a_JSP_wrapper_to-8410.html)

我认为这个最适合我们的情况

# php - jQuery AJAX 使用淡入淡出加载内容

> ID：12440385
> 
> 赞同：1
> 
> 时间：2012-09-15T19:39:50.027
> 
> 标签：php, jquery, ajax, load, fadein

我有一个容器，内容应该从不同的 php 文件加载。所以我有这个：

```
$('ul#menu li a').click(function(){
    var page = $(this).attr('href');
    $('#wind').load('pages/'+ page +'.php');
    return false;
}); 
```

页面内容加载到 div 中，一切看起来都不错，但它立即出现并且看起来不对，有没有办法以`fadeIn()`某种方式追加？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T19:42:25.613

首先将 div`#wind`隐藏在`.load()`淡入的回调函数中。

```
$('#wind').load('pages/' + page + '.php', function () {
    $('#wind').fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T19:24:29.643

是的。您可以使用 jquery .load 函数通过 fadIn() 加载数据。

`$("#container").fadeOut("slow").load('data.php').fadeIn('slow');`

# zip - 在 Go 中压缩一个字节数组

> ID：12440387
> 
> 赞同：14
> 
> 时间：2012-09-15T19:40:50.963
> 
> 标签：zip, go

我正在尝试获取一大块字节并使用`archive/zip`Go 中的包压缩它们。但是，我完全无法理解。有没有什么例子可以说明它是如何完成的？有没有对那个神秘的包有任何解释？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-16T11:28:40.100

感谢jamessan，我确实找到了这个例子（它并没有引起你的注意）。

这是我想出的结果：

```
func (this *Zipnik) zipData() {

    // Create a buffer to write our archive to.
    fmt.Println("we are in the zipData function")
    buf := new(bytes.Buffer)

    // Create a new zip archive.
    zipWriter := zip.NewWriter(buf)

    // Add some files to the archive.
    var files = []struct {
        Name, Body string
    }{
        {"readme.txt", "This archive contains some text files."},
        {"gopher.txt", "Gopher names:\nGeorge\nGeoffrey\nGonzo"},
        {"todo.txt", "Get animal handling licence.\nWrite more examples."},
    }
    for _, file := range files {
    zipFile, err := zipWriter.Create(file.Name)
        if err != nil {
            fmt.Println(err)
        }
        _, err = zipFile.Write([]byte(file.Body))  
        if err != nil {
            fmt.Println(err)
        }
    }

    // Make sure to check the error on Close.
    err := zipWriter.Close()
    if err != nil {
        fmt.Println(err)
    }

    //write the zipped file to the disk
    ioutil.WriteFile("Hello.zip", buf.Bytes(), 0777)    

} 
```

希望对你有帮助 ：）

# ruby - 让我的基于 sinatra 的应用程序在 Heroku 上运行时出现问题

> ID：12440389
> 
> 赞同：1
> 
> 时间：2012-09-15T19:41:02.103
> 
> 标签：ruby, git, heroku, gem, sinatra

我制作了一个简单的 Sinatra 应用程序来运行主页。它已经在我的电脑上运行了。现在我想在 heroku 上托管它，但我无法让它运行。我对“Gemfile”或“Procfile”等概念并不熟悉。

我的 ruby​​ 应用需要 Sinatra、haml 和 sinatra/r18n。我的 gemfile 看起来像这样：

```
source :rubygems
gem 'sinatra'
gem 'thin'
gem 'sinatra-r18n'
gem 'haml' 
```

我的 Procfile 看起来像这样：

```
web: bundle exec ruby app.rb -p $PORT 
```

我的 app.rb 是这样开始的：

```
# app.rb

require 'rubygems'
require 'sinatra'
require 'sinatra/r18n'
require 'haml'

enable :sessions

helpers do
  def set_lang (langcode)
... 
```

如果我没记错的话，该目录中的其他文件包括通过 bundle install 创建的 Gemfile.lock 以及“r18n”、“public”、“views”的文件夹。

如果我在 heroku 上启动应用程序，“heroku ps”命令会说应用程序“启动”，但如果我使用“heroku open”，我会收到“内部服务器错误”。

这是我将其推送到heroku后的“heroku日志”：

```
2012-09-15T19:34:54+00:00 heroku[slugc]: Slug compilation started
2012-09-15T19:35:01+00:00 heroku[api]: Release v13 created by -@gmail.com
2012-09-15T19:35:01+00:00 heroku[api]: Deploy bebc79e by -@gmail.com
2012-09-15T19:35:01+00:00 heroku[web.1]: State changed from up to starting
2012-09-15T19:35:01+00:00 heroku[slugc]: Slug compilation finished
2012-09-15T19:35:02+00:00 heroku[web.1]: Starting process with command `bundle exec ruby app.rb -p 54979`
2012-09-15T19:35:05+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-09-15T19:35:05+00:00 heroku[web.1]: State changed from starting to up
2012-09-15T19:35:06+00:00 app[web.1]: == Sinatra/1.1.0 has taken the stage on 20773 for production with backup from Thin
2012-09-15T19:35:06+00:00 app[web.1]: >> Thin web server (v1.4.1 codename Chromeo)
2012-09-15T19:35:06+00:00 app[web.1]: >> Maximum connections set to 1024
2012-09-15T19:35:06+00:00 app[web.1]: >> Listening on 0.0.0.0:20773, CTRL+C to stop
2012-09-15T19:35:06+00:00 app[web.1]: >> Stopping ...
2012-09-15T19:35:06+00:00 app[web.1]:
2012-09-15T19:35:06+00:00 app[web.1]: == Sinatra has ended his set (crowd applauds)
2012-09-15T19:35:07+00:00 heroku[web.1]: Process exited with status 0 
```

有人知道这里出了什么问题吗？如果您对使用的概念更熟悉，也许会很明显。我也会提示帮助我解决问题的材料，但直到现在我所有的谷歌搜索/阅读都没有帮助。

**更新 28-09** 我现在从代码中删除了 Procfile，但仍然得到“内部服务器错误”。这是更多应该包含崩溃的日志：

```
 2012-09-28T18:04:50+00:00 heroku[web.1]: State changed from down to starting
 2012-09-28T18:04:58+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 30813`
 2012-09-28T18:05:01+00:00 heroku[web.1]: State changed from starting to up
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/views/start.haml:1:in `evaluate_source'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `instance_eval'
 2012-09-28T18:05:02+00:00 app[web.1]: Encoding::CompatibilityError - incompatible character encodings: ASCII-8BIT and UTF-8:
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `evaluate_source'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:127:in `evaluate'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:144:in `cached_evaluate'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/haml.rb:24:in `evaluate'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:452:in `render'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/app.rb:28:in `block in <top (required)>'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:370:in `haml'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1032:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1032:in `block in compile!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:620:in `instance_eval'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:620:in `route_eval'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:656:in `block in process_route'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:653:in `catch'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:604:in `block (2 levels) in route!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:653:in `process_route'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:603:in `block in route!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:602:in `each'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:602:in `route!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:530:in `block in call!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:706:in `instance_eval'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:741:in `dispatch!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:706:in `block in invoke'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:706:in `catch'
 2012-09-28T18:05:02+00:00 heroku[router]: GET fierce-crag-6255.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=73ms status=500 bytes=30
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:706:in `invoke'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:516:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:530:in `call!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1168:in `synchronize'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1142:in `block in call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1142:in `call'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
 2012-09-28T18:05:02+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
 2012-09-28T18:05:02+00:00 app[web.1]: 212.90.85.15 - - [28/Sep/2012 18:05:02] "GET / HTTP/1.1" 500 30 0.0591
 2012-09-28T18:05:03+00:00 app[web.1]: 212.90.85.15 - - [28/Sep/2012 18:05:03] "GET /favicon.ico HTTP/1.1" 200 1416 0.0109
 2012-09-28T18:05:03+00:00 heroku[router]: GET fierce-crag-6255.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=13ms status=200 bytes=1416
 2012-09-28T18:05:03+00:00 heroku[router]: GET fierce-crag-6255.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=4ms status=200 bytes=1416
 2012-09-28T18:05:03+00:00 app[web.1]: 212.90.85.15 - - [28/Sep/2012 18:05:03] "GET /favicon.ico HTTP/1.1" 200 1416 0.0026 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:55:35.800

是的，我只是自己想通了。我应该更多地关注`Encoding::CompatibilityError - incompatible character encodings: ASCII-8BIT and UTF-8:`heroku日志中的内容。我删除了所有的德语变音符号，现在它正在工作。现在编码的问题[在这里](https://stackoverflow.com/questions/12534517/characters-encoding-wrong-in-terminal-using-git)得到解决。我希望我能以某种方式解决这个问题。总之谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:02:53.260

您不一定需要 Procfile。如果您想让 heroku 以默认方式运行您的应用程序，只需将其删除。取而代之的是，以heroku中的[这个小示例](https://devcenter.heroku.com/articles/rack#frameworks)`config.ru`中的方式添加文件。

# javascript - 用替换进行 JavaScript 排序

> ID：12440390
> 
> 赞同：0
> 
> 时间：2012-09-15T19:41:11.873
> 
> 标签：javascript

我有点卡在一个地方，整天都在烦我。

我有这个代码：

```
function main() {
    function sort(a, b){
        return ($(b).text()) < ($(a).text());    
    }

    var title = $(".topictitle").sort(sort).text();
    $('body').append(title)
} 
```

我希望能够替换每个元素的文本（我的意思是我想将每个元素之前的 '.' 和 'Link:' 替换为 '' nothing）并在每个元素之后添加一个中断标签并将其发布在文档的末尾在单独的行上。我尝试的几种方法都不起作用。有任何想法吗？

的HTML：

```
<table class="tablebg" width="100%" cellspacing="1">
        <tr>
            <td class="row1">
                <a title="Публикувано на: Чет Сеп 01, 2011 11:40 am" href="./viewtopic.php?f=70&amp;t=61127" class="topictitle">]Link: The Sid Movie (CS) [Replay]</a>
            </td>
        </tr>
        <tr>
            <td class="row1">
                 <a title="Публикувано на: Чет Фев 24, 2011 11:29 am" href="./viewtopic.php?f=70&amp;t=57832" class="topictitle">Link: Project Team 9 (CS) [Replay]</a>
            </td>
        </tr>
        <tr>
            <td class="row1">
                <a title="Публикувано на: Чет Сеп 01, 2011 11:30 am" href="./viewtopic.php?f=70&amp;t=61127" class="topictitle">Link: Guilty Gear Freaks</a>
            </td>
        </tr>
        <tr>
            <td class="row1">
                 <a title="Публикувано на: Чет Фев 24, 2011 11:51 am" href="./viewtopic.php?f=70&amp;t=57874" class="topictitle">Link: Counter Strike 1.6 [GMV]</a>
            </td>
        </tr>
        <tr>
            <td class="row1">
                <a title="Публикувано на: Чет Сеп 01, 2011 11:42 am" href="./viewtopic.php?f=70&amp;t=61127" class="topictitle">Link: C&C: Generals Zero Hour [GMV]</a>
            </td>
        </tr>
        <tr>
            <td class="row1">
                 <a title="Публикувано на: Чет Фев 24, 2011 11:59 am" href="./viewtopic.php?f=70&amp;t=57874" class="topictitle">Link: King of Fighters [Replay]</a>
            </td>
        </tr>
    </table> 
```

我想得到这个： http: [//i.imgur.com/zCntf.jpg](https://i.imgur.com/zCntf.jpg)但已排序。

不必要的字符是“链接：”，“[”“]”等。

不需要点击，它应该在加载时加载到页面底部（没有花哨的东西，只需要在页面加载时执行它，当我准备好时我可以删除脚本）。

最终的 HTML 只是一个没有标签或任何东西的列表：

```
<html lang="bg" xml:lang="bg" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<body class="ltr">
[url=http://forum.website.com/viewtopic.php?f=33&t=10266]The Sid Movie (CS) [Replay][/url]
<br>
[url=http://forum.website.com/viewtopic.php?f=33&t=10265]Project Team 9 (CS) [Replay][/url]
<br>
[url=http://forum.website.com/viewtopic.php?f=33&t=9720]Guilty Gear Freaks[/url]
<br>
[url=http://forum.website.com/viewtopic.php?f=33&t=9232]Counter Strike 1.6 [GMV][/url]
<br>
[url=http://forum.website.com/viewtopic.php?f=33&t=9258]C&C: Generals Zero Hour [GMV][/url]
<br>
[url=http://forum.website.com/viewtopic.php?f=33&t=6581]King of Fighters [Replay][/url]
<br>
</body>
</html> 
```

之后我只需要能够将列表直接复制/粘贴到主题，脚本将通过 Greasemonkey 加载，并且仅出于此目的加载，如果不需要它将被禁用。

我使用的代码是这个：

```
function addJQuery(callback) {
  var script = document.createElement("script");
  script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
  script.addEventListener('load', function() {
    var script = document.createElement("script");
    script.textContent = "(" + callback.toString() + ")();";
    document.body.appendChild(script);
  }, false);
  document.body.appendChild(script);
}

function main() {
    $('.topictitle').each(function(){
      var text = '[url=' + 'http://forum.website.com' + $(this).attr('href').replace('.','') + ']' + $(this).text().replace('Link: ','') + "[/url]<br/>"
      $('body').append(text)
  })
}

addJQuery(main); 
```

这几乎是我想要的，但它需要排序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:07:31.123

[这](http://jsfiddle.net/xKUND/2/)看起来像你需要的。首先你排序，然后你迭代`.each`

# php - 以有效的方式将文件夹名称保存到数据库

> ID：12440392
> 
> 赞同：2
> 
> 时间：2012-09-15T19:41:37.997
> 
> 标签：php, indexing

我正在编写一个使用模块化结构的 PHP 应用程序。模块基本上是文件夹名称，这些文件夹包含 PHP 文件。

它看起来像这样：

```
/modules
   /module1
   /module2
   /module3 
```

我的 PHP 应用程序读取文件夹的内容并将`modules`文件夹名称保存到我数据库中的表中。我的`modules`表如下所示：

```
id | module  | active | order
1  | module1 | 1      | 2
2  | module2 | 0      | 1
3  | module3 | 1      | 3 
```

在`modules`读取文件夹并将文件夹名称保存到数据库后，我再次从表中获取行。这样我就可以很容易地看到哪些模块处于活动状态，以及我必须以什么顺序显示它们。

这种方法的问题是每次访问页面时我都必须执行上述所有操作。因为系统不知道何时从文件夹`module`中添加或删除了a。`module`因此，通过“读取文件夹/将其保存到数据库/并再次读取数据库”似乎可以提供大多数最新版本。但我可以想象这种方法效率低下。我认为这可以做得更好。

* * *

我想出了一个解决方案。但我仍然不认为这是最好的解决方案。

## 解决方案 1

当用户访问该站点时，请执行上述所有操作。读取`modules`文件夹，将文件夹名称保存到表中（先清除表后），然后从表中获取行并将其存储在`session`. 当用户浏览网站时，我可以简单地遍历`session`.

缺点：删除/添加的模块仅在浏览器关闭并重新打开时可见。

## 改进？

我敢肯定有一种更优雅的方式来做到这一点。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T20:30:25.997

流程应该如下：

1.  管理员请求模块列表
2.  脚本扫描知名目录并构建可用模块列表
3.  该脚本从数据库中读取活动模块的加载顺序
4.  相同的脚本显示一个列表，让管理员有机会激活模块并定义顺序
5.  最后一段代码将更改提交到数据库（如果有）

当普通用户请求页面时

1.  模块子系统从数据库中读取模块名称和顺序
2.  模块系统根据存储在 db 中的名称，按照 db 中定义的顺序从众所周知的目录加载模块

我认为这是最有效的方法。

*免责声明：恕我直言，这是浪费时间。你最好学习一个真正的框架，可能是像 CakePHP 这样的 MVC，或者像 Drupal、Joomla 或 Wordpress 这样的广泛使用的 CMS。这样，您将拥有 1.**工作**系统 2.**安全**系统 3\. 可重复使用的知识。即使出于学习目的，也无需重新发明轮子。你最终会通过从他人的成功（和失败）中学习来加快这个过程。*

# iphone - MPMoviePlayerController 控件不会在 iPad 中显示

> ID：12440394
> 
> 赞同：1
> 
> 时间：2012-09-15T19:41:43.287
> 
> 标签：iphone, xcode, ipad, mpmovieplayercontroller

在我的应用程序中，我正在撰写的视图显示了用户从已保存视频的存档中选择的电影。

此视图的 xib 只是在其中包含一个视图，并添加了一个 MPMoviePlayerController 作为子视图。

在 iPhone 版本（使用完全相同的代码）中，您可以点击电影，它会调出暂停、AirPlay 和全屏等控件。进入全屏模式将允许旋转它。

在 iPad 版本中，控件从不显示，也不会全屏或旋转。如果我将代码指向简单地拉出 iPhone 类，它将在 iPad 中以 iPhone 大小显示在左上角，然后全屏显示。有什么建议么？这是我的代码（同样在 iPhone 类和 iPad 类上）

```
- (void)viewDidLoad {
AVAudioSession *audioSession = [AVAudioSession sharedInstance];

NSError *setCategoryError = nil;
[audioSession setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError];
if (setCategoryError) { /* handle the error condition */ }

NSError *activationError = nil;
[audioSession setActive:YES error:&activationError];
if (activationError) { /* handle the error condition */ }
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:selectedCountry];

NSURL *newURL = [[NSURL alloc] initFileURLWithPath: pdfPath];

self.player =

[[MPMoviePlayerController alloc] initWithContentURL: newURL];

[player prepareToPlay];

player.allowsAirPlay = YES;
player.scalingMode = MPMovieScalingModeAspectFit;
self.player.view.frame = self.view.frame;

[self.view addSubview: player.view];
[self.player setFullscreen:NO animated:YES];

[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

[player play];

} 
```

# java - 根据电池是否正在充电启动和关闭应用程序

> ID：12440396
> 
> 赞同：4
> 
> 时间：2012-09-15T19:41:51.517
> 
> 标签：java, eclipse, blackberry

我想创建一个简单的黑莓应用程序，它在我为手机充电时播放音频文件，并在我拔下它时关闭应用程序。

**伪代码**

1.  插入电池电缆后启动应用程序，

2.  ~~充电时应用程序连续播放声音~~

    无法让它在没有中间间隙的情况下循环播放，而是播放声音

3.  如果用户拔掉电缆，停止流，播放声音，停止流

4.  可选：如果电池电量下降到临界/完成充电，播放声音

浏览文档，我认为没有听众可以告诉您电池电量是否为 100%。

**编辑**：通过batteryStatusChange找到了一种方法，感谢Nate帮助我

有空异常错误。

**编辑**：使用 InputStream 并且没有更多的空异常错误。将 wav 文件添加到 res 文件夹。下面的新代码以 100 的频率播放声音和两种不同的声音，一种用于 USB 连接，另一种用于 USB 断开连接。

```
public class HelloBlackBerryScreen extends MainScreen implements SystemListener2 {
    private BasicEditField basicEditField;
    private Player HEV;    
    private String wav;
    private InputStream stream;
    private int volume; //going to set volume from GUI using a drop down list, working on it currently

public HelloBlackBerryScreen() 
{
    super( MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR );
    setTitle( "HelloBlackBerry" );
    add(new RichTextField("Battery", RichTextField.TEXT_ALIGN_HCENTER));

    Application.getApplication().addSystemListener(this);

    wav = "voice_on.wav";
    stream = (InputStream)this.getClass().getResourceAsStream("/" + wav);               
    try {
        HEV = Manager.createPlayer(stream, "audio/wav");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MediaException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void batteryGood() {
    // TODO Auto-generated method stub

}

public void batteryLow() {
    // TODO Auto-generated method stub

}

public void batteryStatusChange(int status) 
{
    // TODO Auto-generated method stub
    if ((status & DeviceInfo.BSTAT_LEVEL_CHANGED) != 0)
    {
        if(DeviceInfo.getBatteryLevel() == 100)
        {
            try 
            {
                setWav("power_level_is_100_percent.wav"); 
                HEV.start();
                stream.close();
            } 
            catch (MediaException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }               

        }               

    }
}   

public void powerOff() {
    // TODO Auto-generated method stub

}

public void powerUp() {
    // TODO Auto-generated method stub

}

public void backlightStateChange(boolean on) {
    // TODO Auto-generated method stub

}

public void cradleMismatch(boolean mismatch) {
    // TODO Auto-generated method stub

}

public void fastReset() {
    // TODO Auto-generated method stub

}

public void powerOffRequested(int reason) {
    // TODO Auto-generated method stub

}

public void usbConnectionStateChange(int state) 
{
    // TODO Auto-generated method stub
    if (state == USB_STATE_CABLE_CONNECTED) 
    {           
        try 
        {
            setWav("suitchargeok1.wav"); 
            HEV.start();
            stream.close();
        } 
        catch (MediaException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       

        } 
        else if (state == USB_STATE_CABLE_DISCONNECTED) 
        {
            try 
            {
                stream.close();
                setWav("battery_pickup.wav"); 
                HEV.start();
                stream.close();
            } catch (MediaException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();                    
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
}

public String getWav() {
    return wav;
}

public void setWav(String wav) {
    this.wav = wav;
    stream = (InputStream)this.getClass().getResourceAsStream("/" + this.wav);
    try {
        HEV = Manager.createPlayer(stream, "audio/wav");
        HEV.realize();
        VolumeControl volume = (VolumeControl) HEV.getControl("VolumeControl");
        volume.setLevel(25);
        HEV.prefetch();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MediaException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public boolean onClose()
{
    UiApplication.getUiApplication().requestBackground();
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:06:37.250

我需要进一步说明您希望该应用程序如何工作（请参阅我在您问题下方的评论），但我很确定您将需要实现 a `SystemListener`（实际上是 a `SystemListener2`，这是一种`SystemListener`) 来监听 USB 状态变化。

像这样检测连接的东西：

```
void usbConnectionStateChange(int state) {
   if (state == USB_STATE_CABLE_CONNECTED) {
      // start playing your sound
   } else if (state == USB_STATE_CABLE_DISCONNECTED) {
      // stop playing your sound, and exit, or just stay in the background
   }
} 
```

[这是有关如何在设备启动时添加/注册系统侦听器的链接](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/832062/How_To_-_Write_safe_initialization_code.html?nodeid=1487426&vernum=0)

[有关检测 USB 连接，请参阅此 BlackBerry 论坛链接](http://supportforums.blackberry.com/t5/Java-Development/Differentiate-between-blackberry-connected-to-PC-and-connected/td-p/1333397#M176448)

[SystemListener2 上的 API 文档也是如此](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/SystemListener2.html#usbConnectionStateChange%28int%29)

**更新：**我相信张贴者已经想通了（基于问题中的代码更新），该`public void batteryStatusChange(int status)`方法可能是在这里使用的更直接的回调。不过，其他一切都是一样的，因为这只是`SystemListener`.

# ios - 导航栏中的推文按钮

> ID：12440398
> 
> 赞同：-2
> 
> 时间：2012-09-15T19:42:06.290
> 
> 标签：ios, uinavigationbar, ui-design

在导航栏中使用自定义按钮是否违反任何 iOS 界面指南？我在导航栏的右侧有一个带有推特图标的推特按钮。只是想确认一下。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:40:37.073

我相当肯定，我读过的任何风格指南都没有说：“不要在导航栏中放置自定义推文按钮。” 但是 UINavigationBar 和相关支持自定义按钮，所以样式指南禁止它们是愚蠢的。我见过各种各样的应用程序，上面有各种各样的定制——有的好，有的坏。

如果你的按钮设计得很好，看起来像一个按钮，有一个清晰的 twitter-y 图标，并且是你希望你的用户经常做的事情，我认为你会在可接受的使用范围内。你应该做一些可用性测试和验证。

# iphone - 重新打开应用程序时如何防止变量重置？

> ID：12440402
> 
> 赞同：-1
> 
> 时间：2012-09-15T19:42:27.317
> 
> 标签：iphone, objective-c

> **可能重复：**
> [应用程序关闭后如何保存变量？](https://stackoverflow.com/questions/6671556/how-to-save-variables-after-application-shut-down)

我正在使用objective-c在单视图应用程序中制作Iphone应用程序，我希望能够保持变量记录分数以控制可解锁字符、高分等。

问题是每次我关闭并重新打开应用程序时，变量都会重置。

有谁知道如何制作一个在重新打开时永远不会重置的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T20:54:57.117

On iOS you store variables between runs by using `NSUserDefaults`. See an example code below:

```
#define HSMEMORY @"hsMemory"  // used to prevent errors in writing it repeatedly

    // Store initial default values. Do this at the beginning of the App like in AppDelegate before the values are used and accessed.
    // This will set the initial value when the App is first run and nothing has been stored in previous runs.
        NSNumber *defaultMemory = [NSNumber numberWithDouble:0.0];
        NSDictionary *appDefaults = [NSDictionary
                                         dictionaryWithObjectsAndKeys:
                                         defaultMemory, HSMEMORY, nil];
        [[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults]; 
```

To access the variable use:

```
NSNumber *memory = [[NSUserDefaults standardUserDefaults] objectForKey:HSMEMORY]; 
```

To reset the variable use:

```
[[NSUserDefaults standardUserDefaults] setObject:memory forKey:HSMEMORY]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:46:20.297

我相信当您说“变量”时，您的意思是 NSString，所以在这种情况下，您可以使用 NSUserDefaults 来实现这一点。但请记住，NSUserDefaults，顾名思义，应该存储少量数据，所以不要继续使用它太多了。

**保存一个 NSString：**

```
//Initialize NSUserDefaults
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//Store the desired value
[defaults setObject:@"TEXT TO SAVE OR NSSTRING" forKey:@"CHOOSE A KEY-NAME"];
//To retrieve the text when the app launch
NSString *value_retrieved = [defaults objectForKey@"YOUR KEY-NAME"]; 
```

**保存 BOOL 键**

```
//Initialize NSUserDefaults
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//Save the Boolean
[defaults setBool:YES OR NO forKey:@"CHOOSE A KEY-NAME"];
//Retrieve the Boolean
[defaults boolForKey:@"YOUR KEY-NAME"]; 
```

# javascript - 在表格中添加多个用户控件

> ID：12440403
> 
> 赞同：0
> 
> 时间：2012-09-15T19:42:32.807
> 
> 标签：javascript, asp.net

我正在尝试在仪表板上放置多个用户控件。但只有一个用户控件可见。

**仪表板.aspx：**

```
<table cellpadding="0" cellspacing="0" border="0" width="220px">
<tr>
<td>
<dc:MyControl ID="c1" runat="server"/>
</td>
<td>
<dc:MyControl ID="c2" runat="server"/>
</td>
</tr>
</table> 
```

看起来在用户控件中创建的全局对象覆盖了另一个。

然后我将我的javascript代码更改为：

**MyControl.ascx：**

```
//Display gauge on the page (has some html5 elements like canvas)
<div id="gauge1" class="gauge"></div>

<script type="text/javascript">
var <%=this.ClientID%>global = new jGauge(); // Create a new gauge.
<%=this.ClientID%>global.id = 'gauge1'; // Link the new gauge to the placeholder DIV.

// This function is called by jQuery once the page has finished loading.
$(document).ready(function () {
<%=this.ClientID%>global.init(); // Put the gauge on the page by initializing it.
});
</script> 
```

但仍然只有一个用户控件可见。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:36:03.753

您仍然需要更改容器 ID ( `gauge1`) 以使其对于每个控件都是唯一的，否则它将被覆盖。像这样的东西：

```
<div id="<%=this.ClientID%>gaugecontainer" class="gauge"></div> 
```

并修改 Javascript 以使用动态 ID：

```
<%=this.ClientID%>global.id = '<%=this.ClientID%>gaugecontainer'; 
// Link the new gauge to the placeholder DIV. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:30:02.267

试试这个

```
<table cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td style="width:50%;">
            <dc:MyControl ID="c1" runat="server"/>
        </td>
        <td style="width:50%;">
            <dc:MyControl ID="c2" runat="server"/>
        </td>
    </tr> 
```

# vb.net - DataGridView VB.net 到列表

> ID：12440404
> 
> 赞同：0
> 
> 时间：2012-09-15T19:42:33.060
> 
> 标签：vb.net, datagridview, richtextbox

好的，所以我父亲的业务有大约 400 名客户，并且他有一份客户列表，他的业务进展缓慢，所以他决定花 2 天时间将每个客户的姓名输入以下格式：

*   名字和姓氏
*   地址和邮政编码

成一张大纸，然后打印。

我正在开发一个程序，该程序将他的所有客户从 mysql 数据库加载到它加载的 datagridview 中，并加载到 ID、First、Last、Phone、Address 和 Zip-code 中。

所以我的问题是，我如何能够选择一个 ID 号或多个 ID 号将其转换为 Richtextbox，以便他可以复制它甚至从那里打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:02:06.467

You'll need to run a query. My recommendation is to use [pdo](http://php.net/manual/en/book.pdo.ph).

The query should look something like this.

```
 SELECT * FROM `customers` (you could add a WHERE clause also e.g. WHERE id = 1) 
```

Next you need to grab the results from that query. You should use [fetch](http://php.net/manual/en/pdostatement.fetch.php).

Once you have the results. You could make a while loop and feet the results into a table, textarea, or anywhere!

Now you know **how** you can do it. :) Hope this helped.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:44:01.827

我建议您使用[PDO获取数据，然后使用](http://php.net/manual/en/book.pdo.php)[PHPExcel](http://phpexcel.net)将其存储在电子表格中。

查询将类似于：

```
SELECT * FROM `customers` ORDER BY `customer_name` 
```

如果一个客户有多行，您还可以使用：

```
SELECT * FROM `customers` ORDER BY `customer_name` GROUP BY `customer_name` 
```

# iphone - 我在哪里可以启动阵列？

> ID：12440405
> 
> 赞同：0
> 
> 时间：2012-09-15T19:42:36.953
> 
> 标签：iphone, objective-c, arrays, init

我有一个按钮，按下时会执行一个动作。我想向数组添加一个值。该值在按下按钮后确定。但是，当我在按钮操作中初始化数组时，数组每次都会重置，从而清除数组。我想保留数组值。如何保留数组值？我应该在其他地方初始化数组吗？如果是这样，我在哪里可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T20:26:52.650

在创建新数组之前，请检查是否还没有数组。

```
if(!array)
    array = [[NSMutableArray alloc] init];

// ...

[array addObject:myValueToAdd]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T20:35:03.703

你的声明——

```
"However, when I initialize the array in the button action, 
 the array resets every time, clearing the array" 
```

不要在按钮操作中初始化数组。在外部将其初始化为您的类的属性或使其全局化。

在您的按钮操作中，只需将项目添加到您的数组中`[self.myArray addObject:myObject]`

# ruby-on-rails - Ruby on Rails 协会 - 需要帮助

> ID：12440413
> 
> 赞同：0
> 
> 时间：2012-09-15T19:48:16.623
> 
> 标签：ruby-on-rails, activerecord

经过一段时间的中断后，我重新开始了 Ruby on Rails 的开发。我无法为我正在开发的这个简单的练习应用程序制定正确的模型关联和迁移。基本上，我有 3 个模型：

城市、标记和类别

City -> name:string, desc:text Marker -> name:string, lat:decimal, lng:decimal Category -> name:string

一个城市在地图上有多个标记。每个标记都属于一个类别（即餐厅、唱片店等）。我目前拥有的是：

```
class City < ActiveRecord::Base
  has_many :markers
end

class Marker < ActiveRecord::Base
  has_one :category
  belongs_to :city
end

class Category < ActiveRecord::Base
  belongs_to :marker
end 
```

我有一种感觉，我搞错了。即使我没有，我真正的麻烦是解决迁移问题。我想这样做：

```
rails generate migration Marker name:string lat:decimal lng:decimal city_id:integer 
```

会绑定 City/Marker 模型，但它并没有那样做。我对这一切真的很陌生，这些协会让我停了下来。任何帮助，将不胜感激！

巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:40:00.760

我认为您混淆了模型和迁移生成器。

如果要生成模型：

```
rails generate model Marker name:string lat:decimal lng:decimal city_id:integer 
```

如果要为此模型生成迁移：

```
rails generate migration AddNameToMarkers name:string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:33:38.440

这不是迁移生成器的正确语法。不过，我猜你想生成一个资源。只需在命令中替换`migration`为。`resource`

```
rails generate resource Marker name:string lat:decimal lng:decimal city_id:integer 
```

这也将生成控制器、模型和迁移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T20:35:42.647

我认为如果你想添加标记和城市之间的连接，你应该在最后添加

> 城市：参考