# StackOverflow 问答 11608000-11608999

# iphone - 使用自定义警报时方向冲突

> ID：11608001
> 
> 赞同：0
> 
> 时间：2012-07-23T07:20:13.050
> 
> 标签：iphone, ios, ipad, uialertview

在我的应用程序中，我创建了一个带有一个进度条和一个按钮的自定义警报视图，在旋转设备时，自定义警报视图也会旋转，但警报视图大小会自动更改。我该如何解决？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:28:44.127

旋转设备时，如果启用了视图的自动调整大小，则会在每个视图上检查一个属性。

您的自定义警报视图，因为它肯定是 UIView 的子类，有一个名为`autoresizingMask`. 将值设置为`UIViewAutoresizingNone`如下所示：

```
self.view.autoresizingMask = UIViewAutoresizingNone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:35:48.953

![在此处输入图像描述](../Images/66304286e29025a0ee46b975ac4f2128.png)

试试这个自动调整视图，就像给定的屏幕截图一样

# drupal - drupal 7上的管理员侧页

> ID：11608004
> 
> 赞同：0
> 
> 时间：2012-07-23T07:20:20.780
> 
> 标签：drupal, drupal-7, drupal-modules

我想用管理模板在 drupal 中创建一个页面。我知道可以使用模块来完成。如果你知道怎么做，你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:48:55.513

您需要查看文档[http://drupal.org/node/361112](http://drupal.org/node/361112)

# java - 监控和java进程

> ID：11608005
> 
> 赞同：1
> 
> 时间：2012-07-23T07:20:32.033
> 
> 标签：java, monit

我正在尝试使用 monit 来监视 java 进程。该进程的监控文件如下：

```
check process xyz pidfile /tmp/xyz.pid
start program = "/bin/bash -c 'source /home/.bashrc; source /home/xyzprog/setup.sh; /home/xyzprog/xyz start'"
stop program = "/bin/bash -c '/home/xyzprog/xyz stop'" 
```

如果我从

```
sudo monit start xyz 
```

但是如果当我在守护进程模式下启动 monit 时完全失败。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:17:24.163

好的，所以我意识到一些脚本是基于在进程的主目录中运行的，所以我将启动程序更新为以下内容：

```
check process xyz pidfile /tmp/xyz.pid
start program = "cd /home/xyzprog; /bin/bash -c 'source /home/.bashrc; source /home/xyzprog/setup.sh; /home/xyzprog/xyz start'"
stop program = "/bin/bash -c '/home/xyzprog/xyz stop'"
if failed host 192.168.1.103 port 8080 protocol http with timeout 20 seconds for 1 cycle then restart 
```

我只是在启动程序中添加了“cd /home/xyzprog”，它就起作用了！我杀死了这个过程，它马上回来了。

# facebook - “发送”按钮弹出窗口未正确显示

> ID：11608006
> 
> 赞同：0
> 
> 时间：2012-07-23T07:20:36.873
> 
> 标签：facebook, facebook-like, send

我正在使用 Facebook Like/Send 按钮以及动态生成的 HTML（通过 AJAX 请求加载）。我发现即使在页面加载时元素存在时“*发送*”按钮工作正常，动态创建的“发送”按钮也不能正常工作。单击按钮将其激活，并且按钮变灰，但不会出现弹出窗口。

这是正在发生的事情的演示：http: [//jsfiddle.net/Daniel15/VxpSj/](http://jsfiddle.net/Daniel15/VxpSj/)

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:39:45.183

是的，我可以从你的小提琴中确认问题。

```
function addLikeButton()
{
    // […]
    FB.XFBML.parse(newEl);
    document.getElementById('container').appendChild(newEl);
} 
```

出于某种原因，这似乎是“错误的方式”。*颠倒*这两行的顺序——*首先*将新元素放入 DOM，然后让 FB.XFBML.parse 解析它，*然后*（根据我用你的小提琴进行的测试）它似乎以所需的方式工作。

# charts - 如何隐藏默认图例？

> ID：11608007
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:20:41.210
> 
> 标签：charts, cognos, cognos-8, cognos-bi, cognos-tm1

我想定义条件图例。我给一件事上颜色。但是当我的报告正在运行时，是的颜色正在设置，但在图例中显示与同一事物不同的颜色。在图表中它显示我想要的颜色，但在图例中它显示在正常调色板中的不同颜色。我怎样才能解决这个问题 ？谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:49:16.373

我将使用的一个技巧是隐藏图例元素的内联 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:13:18.473

这是一个错误！您可以隐藏默认图例并将自定义图例（图像）放在图表之外。我没有得到另一个解决方案。[]的

# c# - C# 中的继承和引用包含基类的 dll

> ID：11608008
> 
> 赞同：4
> 
> 时间：2012-07-23T07:20:45.560
> 
> 标签：c#, .net, reference

我有一个场景，编译器抱怨我缺少所需的参考。

我有 3 个程序集：

*   *动态链接库*

    *   公共类 BaseClass
*   *B.DLL*（参考*A.DLL*）

    *   公共类 DerivedClass : BaseClass
*   *C.DLL*

    var 派生 = 新 DerivedClass();

在 C.DLL 中，我只引用 B.DLL（我只需要访问 DerivedClass）。

编译器给出一个错误，说我还需要引用 A.DLL

这完全破坏了封装，我不确定为什么需要这样做（因为 B.DLL 引用 A.DLL）。

**编辑：**关于“打破封装”的错误选择。我的意图是这会导致对该项目（C.DLL）的额外编译时间约束，因为我只是从 B.DLL 实例化类型，而不是从 A.DLL 实例化类型。

我希望删除这个编译时要求，主要是因为 B 和 C 位于同一个解决方案中，但 A 没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T07:23:25.863

> 这完全破坏了封装，我不确定为什么需要这样做（因为 B.DLL 引用 A.DLL）。

我看不出它是如何“完全打破封装”的。

为了执行成员解析，编译器需要知道`BaseClass`. 因此，要编译 C.dll，您需要同时引用 A.dll 和 B.dll。当有人编写访问 的实例的代码时`DerivedClass`，他们需要知道什么`BaseClass`支持，因为它可能是`DerivedClass`自身覆盖的超集。

即使你不喜欢它，也就是这样。如果您不希望在*编译*时需要 A.dll，您可以使用组合而不是继承 - 但无论如何在*执行*时您仍然需要 A.dll 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-14T13:15:11.417

> Blockquote 这完全破坏了封装，我不确定为什么需要这样做（因为 B.DLL 引用 A.DLL）。

我看到你已经修改了这个词的选择，但我想我明白你的意思。如果你想确保 A 只能*通过*B 使用 C，你想从 A 中引用 B 而不是 C。

我明白编译器需要同时使用 B 和 C，但我不明白为什么它不能根据 A 到 B 和 B 到 C 的引用进行解析。在我看来，如果我'已经告诉过你“B 依赖于 C”和“A 依赖于 B”，你可以*推断*A 也依赖于 C。

如果构建可以通过遵循依赖关系图来解析类型，那么在我看来，只要您想使用引用来强制执行特定的代码分层，您就不必求助于接口。我不知道该怎么做，但是在您真的只想要一个实现的情况下，接口只是一种负担，所以我希望这种事情是可能的。

# ruby-on-rails - 不明白为什么选择的插件不起作用

> ID：11608012
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:21:06.057
> 
> 标签：ruby-on-rails, jquery-plugins, jquery-chosen

我正在使用 RubyOnRails，所以我的所有样式表都应该自动包含在内。

我想让我的下拉列表对用户更友好，我选择了 Chsen 插件。

这是我的页面代码：

```
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/chosen.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/chosen.jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/chosen.jquery.min.js?body=1" type="text/javascript"></script>
<script src="/assets/static_pages.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

所以包括javascripts和样式表，是吗？

我的 HTML 代码（来自示例）：

```
 <select tabindex="1" style="width:350px;" data-placeholder="Choose a Country">
            <option value=""></option> 
            <option value="United States">United States</option> 
            <option value="United Kingdom">United Kingdom</option> 
            <option value="Afghanistan">Afghanistan</option> 
            <option value="Albania">Albania</option>                
          </select> 
```

在我的 application.js 文件中：

```
 $(document).ready(function(){
  $(".chzn-select").chosen();
  }); 
```

Google 控制台中没有错误，但在我的页面中它显示为默认选择列表。为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T07:29:41.237

您需要将“chzn-select”类添加到您的选择标签。您的 js 代码将所选插件应用于它找到的使用该类的任何元素。这是您的选择标签应如下所示：

```
<select class="chzn-select" tabindex="1" style="width:350px;" data-placeholder="Choose a Country">
    <option value=""></option> 
    <option value="United States">United States</option> 
    <option value="United Kingdom">United Kingdom</option> 
    <option value="Afghanistan">Afghanistan</option> 
    <option value="Albania">Albania</option>                
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T07:28:47.310

在您的选择标签上，您需要添加`class="chzn-select"`以实际启用选择。

# jquery - 将名称值对数组作为字典传递给控制器

> ID：11608015
> 
> 赞同：0
> 
> 时间：2012-07-23T07:21:28.400
> 
> 标签：jquery, asp.net-mvc

我在 Javascript 中有一个名称值对数组（就像 form.SerializeArray()），我想将它传递给我的控制器并将其作为字典对象列表接收。

是否可以 ？如果是这样，我如何传递对象？

谢谢

**编辑**

这是我要传递的 JS 对象

```
var ct = $('#frmrpt').serializeArray();
url="MyController/Print";
var vhtml = "<iframe src=" + url + " style='width: 100%; height: 100%' ></iframe>";

$('#repo').html(vhtml); 
```

这是我想在控制器上接收它的方式

```
public ActionResult Print( List<Dictionary<string, object>> prms) 
```

我使用类似下面的东西来反序列化 json 字符串

```
public static T DeserializeJSON<T>(string jsonData)
{
    if (!string.IsNullOrEmpty(jsonData))
    {
        //jsonData = jsonData.Replace('"', ' ');
        var serializer = new JavaScriptSerializer();
        return serializer.Deserialize<T>(jsonData);
    }
    return default(T);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:13:53.927

您可以使用 json.net 反序列化您的集合。

*控制器：*

```
[HttpPost]
[Authorize]
[JsonFilter(Param = "data", JsonDataType = typeof(Dictionary<string,string>))]
public ActionResult Add(Dictionary<string, string> data)
{

} 
```

*客户：*

```
$.ajax({
        type: 'POST',
        url: url,
        async: true,
        data:  JSON.stringify(data),
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {

        },
        error: function (xhr, ajaxOptions, thrownError) {

        }
    }); 
```

# windows - 如何找出用于 Windows 壁纸的纯色？

> ID：11608017
> 
> 赞同：3
> 
> 时间：2012-07-23T07:21:43.937
> 
> 标签：windows, registry, wallpaper

我知道如何从注册表中检索壁纸：

```
HKEY_CURRENT_USER\Control Panel\Desktop\Wallpaper 
```

但是如果用户选择使用纯色作为壁纸，我该如何检索该特定颜色呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T07:37:16.193

您可以从

```
HKEY_CURRENT_USER\Control Panel\Colors\Background 
```

它是一个包含空格分隔元组“RGB”的字符串，例如“255 0 0”代表红色，“255 102 0”代表橙色。

有关使用 C#、C++、F# 和 VB.NET 获取注册表值的信息，请参阅[此处。](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.getvalue.aspx)

下面是 Powershell 的示例

```
# PowerShell Registry Key example
$Registry_Key = "HCU:\Control Panel\Colors\"
Get-ItemProperty -path $Registry_Key -name Background 
```

# perl - 使用 Inline::CPP 与 SWIG - 何时？

> ID：11608021
> 
> 赞同：5
> 
> 时间：2012-07-23T07:22:26.573
> 
> 标签：perl, swig

在[这个](https://stackoverflow.com/q/11606694/632407)问题中，我看到了两个不同的答案，如何直接调用用 C++ 编写的函数

1.  [Inline::CPP](https://metacpan.org/module/Inline::CPP)（这里还有更多，如 Inline::C、Inline::Lua 等。）
2.  [痛饮](http://www.swig.org/)
3.  手工制作（正如 daxim 所说 - 大多数模块都是手写的）

我刚刚浏览了标记为 [perl][swig] 的几乎所有问题，以寻找下一个问题的答案：

*   使用（选择）SWIG 和 Inline::CPP 或手写的主要区别是什么？
*   什么时候是“好的做法”——建议使用 Inline::CPP（或 Inline:C），什么时候建议使用 SWIG 或 Handwritten？

在我考虑它的时候，使用 SWIG 对其他用途更普遍，就像[在这个问题中提出的](https://stackoverflow.com/q/25268/734304)那样，并且 Inline::CPP 是 perl 特定的。但是，*从 perl 的角度来看，*这里有一些（任何）显着差异吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T22:34:02.613

我没有用过 SWIG，所以我不能直接和它说话。但我对Inline [::CPP](https://metacpan.org/module/Inline::CPP)[非常熟悉](https://github.com/daoswald/Inline-CPP.git)。

如果您想编写可以在 Perl 中编译并变得可调用的 C++ 代码，Inline::CPP 可以帮助您实现这一点。只要 C++ 代码不变，它就应该只编译一次。如果您基于 Inline::CPP 构建模块，则代码将在模块安装时编译，因此其他用户永远不会真正看到第一次编译滞后；它发生在安装时，就在测试阶段之前。

Inline::CPP 并非 100% 没有可移植性问题。目标用户必须拥有与用于构建 Perl 的 C 编译器类似的 C++ 编译器，并且 C++ 标准库的版本应该能够生成与 Perl 兼容的二进制代码。Inline::CPP 使用 CPAN 测试仪的成功率约为 94%。而最后的 6% 几乎总是归结为安装过程中没有正确解读要使用的 C++ 编译器和库的问题。......其中，它通常归结为图书馆。

假设您作为模块作者发现自己属于 95% 的人，他们在安装 Inline::CPP 时没有问题。如果您知道您的目标受众将属于同一类别，那么基于 Inline::CPP 生成一个模块很简单。您基本上必须添加几个指令（VERSION 和 NAME），并将 Makefile.PL 的 ExtUtils::MakeMaker 调用换成 Inline::MakeMaker（它将调用 ExtUtils::MakeMaker）。您可能还需要一个 CONFIGURE_REQUIRES 指令来指定 ExtUtils::MakeMaker 在创建发行版时的当前版本；这可确保您的用户拥有更干净的安装体验。

现在，如果您正在创建用于一般消费的模块并且不知道您的目标用户是否适合可以使用 Inline::CPP 的 94% 的大多数用户，那么您最好删除 Inline::CPP 依赖项。无论如何，您可能希望这样做只是为了最小化依赖链；它对您的用户更好。在这种情况下，编写代码以使用 Inline::CPP，然后使用 InlineX::CPP2XS 将其转换为普通的旧 XS 模块。您的用户现在无需先拉入 Inline::CPP 即可进行安装。

C++ 是一门大型语言，Inline::CPP 处理其中很大一部分。注意类型映射文件，以确定可以自动传递（和转换）哪些类型的参数，以及使用“guts and API”调用更好地处理哪些类型。我不推荐使用的一项功能是自动字符串转换，因为它会产生对 Unicode 不友好的转换。更好地通过 API 调用显式处理字符串。

没有被 Inline::CPP 优雅处理的 C++ 部分是模板元编程。您可以在代码中自由使用模板，也可以自由使用 STL。但是，您不能简单地传递 STL 类型参数并希望 Inline::CPP 知道如何转换它们。它处理 POD（基本数据类型），而不是 STL 的东西。此外，如果您编写基于模板的函数或对象方法，C++ 编译器将不知道 Perl 计划在什么上下文中调用该函数，因此它不知道在编译时将什么类型应用于模板。因此，直接暴露给 Inline::CPP 的函数和对象方法需要是普通函数或方法；不是模板函数或类。

只要您知道会发生什么，这些限制在实践中并不难处理。如果您想将模板类直接暴露给 Inline::CPP，只需编写一个包装类，它可以继承或组合模板类的自身，但为其提供一个具体类型供 Inline::CPP 使用。

Inline::CPP 在为现有 C++ 库自动生成函数包装器时也很有用。该文档解释了如何做到这一点。

与 Swig相比，Inline::CPP 的优势之一是，如果您已经对[perlguts](http://perldoc.perl.org/perlguts.html)、[perlapi](http://perldoc.perl.org/perlapi.html)和[perlcall](http://perldoc.perl.org/perlcall.html)有一定的经验，那么您就会有宾至如归的感觉。使用 Swig，您必须首先学习 Swig 的做事方式，然后弄清楚如何将其应用到 Perl，以及如何以 CPAN 可分发的方式进行操作。

使用 Inline::CPP 的另一个优点是它在 Perl 社区中有点熟悉。你会发现了解 Perl XS、Inline::C 以及在某种程度上了解 Inline::CPP 的人比使用 Swig 和 Perl 的人要多得多。尽管 XS 可能会很混乱，但它比使用 Perl 和 Swig 走得更远。

Inline::CPP 也是[inline@perl.org](http://lists.perl.org/list/inline.html)邮件列表中的一个常见主题。除了我自己之外，Inline::C 的维护者和其他几位 Inline 家族的维护者也经常出现在这个列表中，并尽最大努力帮助需要帮助的人使用 Inline 模块家族。

您可能还会发现[我在 Inline::CPP 上的 Perl Mongers 演讲](https://github.com/daoswald/Inline-C-Perl-Mongers-Talk.git)有助于探索它如何为您工作。此外，[Math::Prime::FastSieve](https://metacpan.org/module/Math::Prime::FastSieve)作为基于 Inline::CPP（具有 Inline::CPP 依赖项）的模块的概念验证。此外，当前的 Inline 维护者和 InlineX::CPP2XS 的作者 Rob (sisyphus) 实际上在[InlineX::CPP2XS](https://metacpan.org/module/InlineX::CPP2XS)发行版中包含了一个示例，该示例采用我的 Math::Prime::FastSieve 并使用他的内联X::CPP2XS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:52:10.430

您可能还应该看看[ExtUtils::XSpp](https://metacpan.org/module/ExtUtils%3a%3aXSpp)。我认为它需要你声明比 Inline::CPP 或 SWIG 更多的东西，但它相当强大。

# wcf - Azure 生产中的 WCF 跟踪

> ID：11608024
> 
> 赞同：0
> 
> 时间：2012-07-23T07:22:41.080
> 
> 标签：wcf, azure, trace

如何在 Azure（生产环境）中设置 WCF 跟踪，以便记录所有 WCF 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:01:25.590

您不能为此目的使用 Windows Azure 诊断程序吗？正确配置后，您的跟踪日志将在您在代码中指定的 Windows Azure 存储帐户中可用。有关 Windows Azure 诊断的更多信息，请访问：[https](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/) ://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:12:28.363

就像 Guarav 所说，您可以简单地使用 Azure 诊断将所有错误记录到您的存储帐户（在 MSDN 杂志中有很好的阅读：[在 Windows Azure 中控制日志记录和跟踪](http://msdn.microsoft.com/en-us/magazine/ff714589.aspx)）。

现在我个人不喜欢使用 WCF 时的“平面”日志记录。我发现能够追踪活动非常重要。这就是为什么对于我使用 WCF 的所有 Azure 项目，我不使用常规诊断。

我使用了[Christian Weyer](http://weblogs.thinktecture.com/cweyer/2010/12/writing-trace-data-to-your-beloved-svclog-files-in-windows-azure-aka-xmlwritertracelistener-in-the-cloud.html)记录的技巧，在该技巧中我登录到经典的 *.svclog 文件并将这些文件发送到我的存储帐户。然后我使用 CloudBerry Storage Explorer 来简单地查看那些包含活动的日志。这可以通过创建自定义 XmlWriterTraceListener 来写入本地资源，该资源会发送到您的存储帐户。

# ajax - ASP.NET MVC 可以将 JSON 对象传递给带有动态类型参数的参数的控制器吗？

> ID：11608026
> 
> 赞同：5
> 
> 时间：2012-07-23T07:22:45.997
> 
> 标签：ajax, json, asp.net-mvc-3, c#-4.0, jquery

我的javascript中有代码，一个用于发布数据的ajax：

```
$.ajax({
                url: '/Configurations/GetSelectedPageTranslation',
                type: 'POST',
                data: { inttype: $("#some").val(), objectType:{prop1: 'adsfa', prop2: 'asdf'}},
                success: function (result) {

                },
                error: function () {
                    alert('error');
                }
            }); 
```

在控制器中，我有一个带有签名的方法：

```
public JsonResult GetSelectedPageTranslation(int inttype, dynamic objectType) 
```

我可以正确地拥有 inttype。但是 objectType 不会为空，但如果我喜欢 objectType.prop1，它会抛出错误。如果我将 JSON.stringify javascript 中的对象类型，则控制器中的 objectType 将具有字符串值。

是否可以使用如下动态数据类型直接访问控制器中的 JSON 数据： objectType.prop1 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T07:42:28.193

`dynamic`MVC3中没有对动作参数的开箱即用支持。

但是 MVC 是非常可扩展的，因此您可以添加此功能。您需要做的是创建一个自定义`IModelBinder`，您可以在其中进行 JSON 反序列化并构建一个动态对象。

幸运的是，这篇文章：[Making MVC 3 a little more...dynamic](http://blog.duc.as/2011/06/07/making-mvc-3-a-little-more-dynamic/)正在处理完全相同的问题，因此您还可以在那里找到示例代码和其他链接，它们应该可以帮助您入门。

# android - 动态微调器

> ID：11608031
> 
> 赞同：0
> 
> 时间：2012-07-23T07:23:22.517
> 
> 标签：android, spinner

我想制作一个内容取决于数据库的微调器，有没有办法做到这一点？早些时候，我读到字符串值不能通过代码更改，所以现在我想知道是否还有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:40:55.413

要么创建一个`Adapter`：

```
spinner = (Spinner)this.findViewById(R.id.spr);
adapter = ArrayAdapter.createFromResource(
        this, R.array.some_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

或者

绑定它`Listener`，每次有人与微调器交互时，检查数据库中是否有变化。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:44:22.570

您可以`Spinner`使用`Adapter`.

示例`ArrayAdapter`：

```
Spinner spinner = new Spinner(this);
ArrayAdapter<CharSequence> adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

// Then add all the values you want...
adapter.add("Item 1");
adapter.add("Item 2"); 
```

在此处查找文档：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:48:05.947

```
/Bind values to spinner through an array
String[] items = new String[] {"Karnataka", "Orissa", "Andhrapradesh"};
Spinner spinner;

spinner = (Spinner)this.findViewById(R.id.spnState);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, items);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

//Bind values to spinner through databases

//--Write a query to get all the values in a column in a table
public Cursor columnValues() throws SQLException {
SQLiteDatabase db;
        return db.query(TABLE_NAME, new String[] { ID, KEY_NAME }, null, null, null, null, KEY_NAME + " ASC", null);
    }
//--then in activity under button click write,
    Cursor cursor = db.columnValues();
        startManagingCursor(cursor);

        // create an array to specify which fields we want to display
        String[] from = new String[] { DBAdapter.KEY_NAME };
        // create an array of the display item we want to bind our data to
        int[] to = new int[] { android.R.id.text1 };

        Spinner spinner = (Spinner) this.findViewById(R.id.spinnerID);
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_spinner_item, cursor, from, to);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

//How to get selected values from spinner

                Spinner spinner = (Spinner) findViewById(R.id.spinnerID);
                String selectedItem;
                Cursor cc = (Cursor)(spinner.getSelectedItem());
                if (cc != null) {
                    selectedItem = cc.getString(cc.getColumnIndex(db.KEY_NAME));
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:54:22.463

我发现 ORMLite 在使用 Android 中的数据库时非常有用。你可以在你的代码中使用这样的东西：

```
Dao<YourTable, YourTableKeyType> tableDao = DaoManager.createDao(connectionSource,
                    YourTable.class);

List<YourTable> itemsList = tableDao.queryForAll();

tableStr = new String[tableList.size()];
int i = 0;
for (YourTable item : itemsList) {
    tableStr[i++] = item.getNom();
}
spinner = (Spinner) findViewById(R.id.spinner_id);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    R.layout.spinner_layout, tableStr);
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

# opengl - OpenCV 和 OpenGL 缩放

> ID：11608036
> 
> 赞同：0
> 
> 时间：2012-07-23T07:23:29.677
> 
> 标签：opengl, opencv

基于 Opencv 跟踪，我试图在 openGL 中覆盖对象，但我看到 OpenCV 适用于像素值，而 OpenGL 适用于 OpenGL 单元。

我现在的窗口大小是 320 x 240。
我知道我必须定义一些东西，以便在跟踪和覆盖之间实现同步。当我只改变 1 个像素*（即 1 个 OpenGL 单元）*`positiony`的 OpenGL 函数时，我在覆盖对象上得到了巨大的差异......`glTranslatef (positionx, positiony, positionz);`

 *我认为问题在于Opencv和OpenGL比例的同步......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:16:57.503

您需要使用屏幕对齐的正交投影将 OpenGL 单元与屏幕像素 1:1 映射。

```
 glViewport(0,0,320,240);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0,320,0,240,0,1);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity(); 
```

希望这可以帮助！*

# python - 检查请求条件的更好方法是什么？

> ID：11608041
> 
> 赞同：3
> 
> 时间：2012-07-23T07:24:29.647
> 
> 标签：python, django, request

在django python的开源代码中，我多次看到这样的场景

```
if request.META and 'HTTP_REFERER' in request.META: 
```

同样，我也看到了这两个 if 条件

```
if request.POST and 'next' in request.POST:
if request.GET and 'next' in request.GET: 
```

我相信在这些情况下，只有一个条件就足以检查 if 条件，例如

```
if 'HTTP_REFERER' in request.META:
if 'next' in request.POST:
if 'next' in request.GET: 
```

那么为什么大多数时候人们使用前面的一次，就像双重检查一样，或者在某些情况下，第一个双重检查条件可能有用而后面的单一检查条件可能会失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:40:47.983

它只能通过检查来实现
`request.META.get('HTTP_REFERER')` ，而
`request.REQUEST.get('next')`
不是检查*`request.POST`*或*`request.GET`*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T07:37:41.987

在一种（假设的）情况下，您的解决方案会失败：

```
>>> request.POST = None
>>> 'next' in request.POST
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: argument of type 'NoneType' is not iterable 
```

但是，如果您可以确定`request.POST`永远不会`None`，那么您的解决方案就可以了。

在空字典的情况下它会慢一点，因为`if 'foo' in request.POST`如果（快速）空性测试已经失败，则可以跳过检查。另一方面，如果字典不为空，它会更快。

```
>>> import timeit
>>> timeit.timeit(setup="a = {}", stmt="if a and 'next' in a: pass")
0.028279806566242852
>>> timeit.timeit(setup="a = {}", stmt="if 'next' in a: pass")
0.04539217556517272
>>> timeit.timeit(setup="a = {'foo':'bar'}", stmt="if a and 'next' in a: pass")
0.07471092295071458
>>> timeit.timeit(setup="a = {'foo':'bar'}", stmt="if 'next' in a: pass")
0.045236056421884996
>>> timeit.timeit(setup="a = {'next':'bar'}", stmt="if a and 'next' in a: pass")
0.0851067469988891
>>> timeit.timeit(setup="a = {'next':'bar'}", stmt="if 'next' in a: pass")
0.0520663758715898 
```

所以我想这是一个微优化的问题。在这种情况下，我调用 Python 之禅：显式优于隐式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:41:56.207

我刚刚 grepped 了 django 的整个（当前 git）源，并没有找到你提到的所有三个条件的一次出现。

*只要*您可以假设所有三个字典都已设置，那么您完全正确地满足一个条件。看看 django 代码，我相信你可以假设。

*编辑*：[django 文档](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.GET)也建议将始终设置这些字典。

# android - 画布上的表格视图

> ID：11608045
> 
> 赞同：1
> 
> 时间：2012-07-23T07:24:56.323
> 
> 标签：android, canvas, tableview

1.谁能帮我在画布视图的顶部放置一个表格视图。我在画布上画了一个圆圈，然后想在上面放置一个表格视图。我在扩展视图的类中使用 drawcircle 方法绘制了一个圆圈。2\. 如何只显示 4 个表格行并添加滚动视图以显示其余行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:49:09.483

不确定这是否真的是您想要的，但这是一种方法（根据我的理解）：

您可以定义一个布局 XML 文件，而不是直接设置`MyView`to `setContentView()`，您可以在其中将自定义视图放在相对布局中，然后在同一个 RelativeLayout 中添加 TableLayout。

我假设你的项目的包名是：com.mypackage。
让我们调用文件`my_custom_view.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!--  Your custom View -->
    <com.mypackage.MyView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <!--  the Table layout  -->
    <TableLayout >
        <!-- ......... -->
    </TableLayout>

</RelativeLayout> 
```

然后在 onCreate() 中调用：`setContentView(R.layout.my_custom_view)` 由于两个视图都在 RelativeLayout 内，因此 TableLayout 应该放在 MyView 的顶部。

# clojure - Clojure 中的拼接

> ID：11608049
> 
> 赞同：4
> 
> 时间：2012-07-23T07:25:17.120
> 
> 标签：clojure

是否有一个函数可以按顺序获取“从 x 到 y”的项目？

例如，给定`(range 10)`我想要 [5 6 7 8] （从第 6 个到第 9 个，或从第 6 个中取 4）。当然，我可以结合几个函数（例如`(take 4 (drop 5 (range 10)))`）来实现它，但似乎很奇怪，没有像 pythons 那样的内置函数`mylist[5:9]`。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:29:36.737

[向量的subvec](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/subvec)，主要是因为它是 O(1)。对于 seq，您将需要使用取/放的 O(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:05:12.457

从哲学的角度来看，没有内置运算符的原因是您不需要内置运算符来让它感觉像在 Python 中那样“自然”。

```
(defn splice [coll start stop]
  (take (- stop start) (drop start coll)))

(splice coll 6 10) 
```

感觉就像是一种内置语言，具有与任何功能一样多的“新语法”。在 Python 中，特殊`[x:y]`操作符需要语言级别的支持才能使其与单元素访问器一样自然。

因此，Clojure 并没有把（已经很拥挤的）语言核心弄得乱七八糟，而是简单地为用户或库留出了空间来实现它，如果你想要的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T06:28:49.380

`(range 5 9)`, 或`(vec (range 5 9))`.

（也许这种语法 for`range`在 2012 年年中不可用。）

# php - PHP 简单 XML 帮助

> ID：11608051
> 
> 赞同：0
> 
> 时间：2012-07-23T07:25:29.170
> 
> 标签：php, xml, simplexml, coordinates

我想在 foreach 中回显所有“gx:coord”。

这就是我现在拥有的：

```
# XML
$my_track = new SimpleXMLElement(file_get_contents('track.kml'));

echo $my_track->Document->description; 
```

但是我如何在 foreach 循环中使用 gx:coord 获得一个值？

```
<Document>
<description>Test</description>
<gx:MultiTrack>
    <altitudeMode>absolute</altitudeMode>
    <gx:interpolate>1</gx:interpolate>
    <gx:Track>
        <when>2012-07-23T15:00:44.000Z</when>
        <gx:coord>2.508616 50.641113 46.0</gx:coord>
        <when>2012-07-23T15:00:44.000Z</when>
        <gx:coord>2.508616 50.641113 46.0</gx:coord>
        <when>2012-07-23T15:00:59.000Z</when>
        <gx:coord>2.508616 50.641113 49.0</gx:coord>
    </gx:Track>
    </gx:MultiTrack>
</Document> 
```

我希望这是一个 foreach 的结果：

```
2.508616 50.641113 46.0
2.508616 50.641113 46.0
2.508616 50.641113 49.0 
```

在这方面需要真正的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:32:08.543

```
<?php

$xml = '<Document>
        <description>Test</description>
        <gx:MultiTrack>
            <altitudeMode>absolute</altitudeMode>
            <gx:interpolate>1</gx:interpolate>
            <gx:Track>
                <when>2012-07-23T15:00:44.000Z</when>
                <gx:coord>2.508616 50.641113 46.0</gx:coord>
                <when>2012-07-23T15:00:44.000Z</when>
                <gx:coord>2.508616 50.641113 46.0</gx:coord>
                <when>2012-07-23T15:00:59.000Z</when>
                <gx:coord>2.508616 50.641113 49.0</gx:coord>
            </gx:Track>
            </gx:MultiTrack>
        </Document>';

$data = simplexml_load_string( $xml );
// Or $data = simplexml_load_file( $filename );

foreach ( $data -> children() -> MultiTrack -> Track -> coord as $value ) {
    echo $value . '<br />';
}

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-16T08:28:49.813

我也遇到了同样的问题，我使用了 xpath，例如：

```
$arr = xpath('//gx:coord'); 
```

有关更多信息，请查看：

*   [http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)

以及更多使用命名空间指定

*   [http://php.net/manual/en/simplexmlelement.registerxpathnamespace.php](http://php.net/manual/en/simplexmlelement.registerxpathnamespace.php)

如果您获得没有命名空间的文件，这也将有助于解决发生的情况

# asp.net-mvc-3 - 使用 ASP.NET MVC 处理博客中每个帖子的 URL

> ID：11608053
> 
> 赞同：2
> 
> 时间：2012-07-23T07:25:54.183
> 
> 标签：asp.net-mvc-3, blogs

我正在使用 ASP.NET MVC3 制作博客引擎，

我有我的数据库设计，我想知道如何处理 mvc3 中每个帖子的 URL？

例如，一个用户写了两篇文章，标题为

*   我的第一篇文章
*   我的第二个帖子

所以现在，我可以将这些帖子的这些标题和内容插入到我的数据库中。

我不知道的是如何用 url 显示这些帖子......

*   www.example.com/2012/06/my-first-post
*   www.example.com/2012/07/my-second-post

我不确定这在 MVC 中是否很容易，请有人指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:24:27.963

亚瑟，

这会让你开始：

Global.asax 将默认路由替换为：

```
routes.MapRoute(
    "Default", // Route name
    "{year}/{month}", // URL with parameters
    new { controller = "Posts", action = "PostGroup" } 
); 
```

您在 Posts 控制器中的操作方法将类似于：

```
public ActionResult PostGroup(int year, int month)
{
    var viewModel = _serviceTasks.All<Post>()
        .Where(x => x.PostDate.Year == year
            && x.PostDate.Month == month);
    return View("Index", viewModel);
} 
```

这应该会让你> 50% 进入你的解决方案，剩下的就是你自己的辛勤劳动：-0。

# screen-scraping - 无头抓取时处理 window.open()

> ID：11608058
> 
> 赞同：0
> 
> 时间：2012-07-23T07:26:12.953
> 
> 标签：screen-scraping, window.open, phantomjs, headless

我必须点击网址[http://judis.nic.in/supremecourt/chejudis.asp](http://judis.nic.in/supremecourt/chejudis.asp)。在此处提交表单以获取应该报废的页面。我正在使用 PhantomJS 和 PJScrape 。问题是，表单提交后，结果显示在新窗口中。我浏览了 phantomjs 问题列表，发现 windown.open 无法处理。我可以在这里使用任何其他方式/框架吗？我必须坚持无头刮擦，我不能使用 Selenium 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:01:14.690

您可以像这样将页面中的javascript注入monkey-patch window.open：

```
var log = {};
window.my_open = window.open;    
window.open=function (str1,str2,str3){
    console.log("** window.open ** " + str1 + " / " + str2 + " / " + str3);
    log.open = {"url":str1, "name":str2, "features":str3};
    var new_win =  this.my_open(str1, str2,str3);
    return new_win;
} 
```

然后您可以从 PJS 中访问 url 并继续从那里抓取。

请注意， new_win 将是“未定义的”，因为 PJS 没有实现它。

# winapi - Win32(64)中如何列出所有文件映射句柄？

> ID：11608060
> 
> 赞同：0
> 
> 时间：2012-07-23T07:26:17.630
> 
> 标签：winapi

如何列出使用 CreateFileMapping()/OpenFileMapping 创建/打开的所有文件映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:51:09.390

Far Manager 插件“ProcList”显示句柄列表。查看源[handles.cpp](http://farmanager.com/svn/trunk/plugins/proclist/handles.cpp)。你需要看功能

```
bool PrintHandleInfo(DWORD dwPID, HANDLE file, bool bIncludeUnnamed, PerfThread* pThread) 
```

`DWORD dwPID`- 检查 PID， `HANDLE file`- 是输出文本文件的句柄。

# javascript - 选中第一个复选框，如果没有选中复选框

> ID：11608062
> 
> 赞同：1
> 
> 时间：2012-07-23T07:26:22.657
> 
> 标签：javascript, html

我有这个 HTML 代码

```
<input type="checkbox" name="city_pref[]" id="city_all" value="0" checked /><label for="city_all">All</label>
<input type="checkbox" name="city_pref[]" id="city_pref_1" value="Chicago" /><label for="city_pref_1">Chicago</label>
<input type="checkbox" name="city_pref[]" id="city_pref_2" value="Texas" /><label for="city_pref_2">Texas</label> 
```

而且，我已将[我的代码放在一个 fiddle](http://jsfiddle.net/heera/bGwrS/2/)中，它工作正常。我真正想做的是，当没有选中任何复选框时，我希望自动选中**所有**复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:30:20.487

尝试以下操作：

```
$('input[type=checkbox]').change(function(){
    if ($('input[type=checkbox]:checked').length == 0) {
       $('#city_all').prop('checked', true)
    }   
}) 
```

[演示](http://jsfiddle.net/bGwrS/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:30:31.660

```
$('input[type="checkbox"]').change(function(){
    if($('input[type="checkbox"]:checked').length == 0)
         $('#city_all').attr('checked', 'checked');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:47:09.520

你真正需要的只是一条线？

```
$('input[type="checkbox"][name="city_pref[]"]').on('change', function(e){
     this.checked ? $(this).siblings('[name="city_pref[]"]').prop('checked', false) : $("#city_all").prop('checked', true);
}); 
```

[小提琴](http://jsfiddle.net/bGwrS/22/)

# android - Android中的位图内存不足错误...

> ID：11608064
> 
> 赞同：6
> 
> 时间：2012-07-23T07:26:28.717
> 
> 标签：android, memory-management, memory-leaks, android-imageview

我在一个 android 应用程序中工作，我正在使用位图将图像绑定到 ImageView。我的要求是旋转那个 ImageView 并给那个 ImageView 一个边框。我已经成功实现了这一点，但是在应用程序使用此活动两三次后，出现“强制关闭”错误，提示 Bitmap out of VM memory。请帮助我尽量减少代码中的位图内存消耗。并让我知道如何修改相同的代码？

```
final int BORDER_WIDTH = 5;
        // Set the border color
        final int BORDER_COLOR = Color.WHITE;
        Bitmap res = Bitmap.createBitmap(CAPTURE_IMAGE.getWidth() + 2
                * BORDER_WIDTH, CAPTURE_IMAGE.getHeight() + 2 * BORDER_WIDTH,
                CAPTURE_IMAGE.getConfig());
        System.gc();
        Canvas canvas = new Canvas(res);
        Paint paint = new Paint();
        paint.setColor(BORDER_COLOR);
        canvas.drawRect(0, 0, res.getWidth(), res.getHeight(), paint);

        canvas.drawBitmap(CAPTURE_IMAGE, BORDER_WIDTH, BORDER_WIDTH, paint);
        Matrix mat = new Matrix();
        // Set the Imageview position
        mat.postRotate(355);

        bMapRotate = Bitmap.createBitmap(res, 0, 0, res.getWidth(),
                res.getHeight(), mat, true);
        System.gc();
        res.recycle();
        res = null;
        paint = null;
        canvas = null;
        mat = null;
        // Set the captured bitmap image in the imageview
        mShareImageView.setImageBitmap(bMapRotate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T07:42:42.797

在 mainfest 文件中添加 ---> android:largeHeap:"true"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T07:32:10.473

我认为你应该使用这样的收缩功能

```
bMapRotate = Bitmap.createBitmap(res, 0, 0, res.getWidth(),
                res.getHeight(), mat, true);

Bitmap myBitmap = ShrinkBitmap(bMapRotate , 300, 300);

mShareImageView.setImageBitmap(myBitmap );

private Bitmap ShrinkBitmap(String file, int width, int height) {
        // TODO Auto-generated method stub
        BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
        bmpFactoryOptions.inJustDecodeBounds = true;
        Bitmap bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);

        int heightRatio = (int)Math.ceil(bmpFactoryOptions.outHeight/(float)height);
        int widthRatio = (int)Math.ceil(bmpFactoryOptions.outWidth/(float)width);

        if (heightRatio > 1 || widthRatio > 1)
        {
         if (heightRatio > widthRatio)
         {
          bmpFactoryOptions.inSampleSize = heightRatio;
         } else {
          bmpFactoryOptions.inSampleSize = widthRatio;
         }
        }

        bmpFactoryOptions.inJustDecodeBounds = false;
        bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);
     return bitmap;
    } 
```

它对我有用，我避免了 Bitmap out of VM memory 异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:45:13.260

尝试将`gc()`呼叫移至末尾。它应该在您设置后运行，`res = null`以便它可以释放未使用的内存：

```
 res.recycle();
    res = null;
    paint = null;
    canvas = null;
    mat = null;
    System.gc(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T10:24:14.620

只需在清单文件中添加 android:largeHeap="true"

参考： largeHeap=true 清单标签不起作用？

# perl - 如何读写文件，语法错误

> ID：11608067
> 
> 赞同：3
> 
> 时间：2012-07-23T07:26:44.560
> 
> 标签：perl, file, file-io, handler

我最终让我的脚本将我想要进行的新更改附加到文件末尾而不是实际文件中。

```
open (INCONFIG, "+<$text") or die $!;
@config = <INCONFIG>;
foreach(@config)
{
    if ( $_ =~ m/$checker/ )
    {
        $_ = $somethingnew;
    }
print INCONFIG $_;
}
close INCONFIG or die; 
```

最终我想再次重写整个文本，但如果它与搜索条件匹配，则修改某些字符串。但到目前为止，它只将整个文件的另一个副本（带有更改）附加到旧文件的底部。

我知道我可以关闭该文件，并使用另一个写入文件-句柄并解析它。但希望能够了解我做错了什么，以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:14:36.150

据我了解`open`，对文本文件使用读/写访问权限并不是一个好主意。毕竟文件只是一个字节流：用不同长度的东西更新文件的一部分是令人头疼的东西;-)

这是我的方法：尝试模拟`-i`perl 的“就地”开关。所以本质上我们写入一个备份文件，稍后我们将对其进行重命名。（在 *nix 系统上，打开文件句柄有一些魔力可以保持已删除的文件可用，因此我们*不必**创建新文件。不管怎样，让我们​​来做吧。）*

```
my $filename = ...;
my $tempfile = "$filename.tmp";
open my $inFile,  '<', $filename or die $!;
open my $outFile, '>', $tempfile or die $!;

while (my $line = <$inFile>) {
    $line = doWeirdSubstitutions($line);
    print $outFile $line;
}

close $inFile  or die $!;
close $outFile or die $!;

rename $tempfile, $filename
  or die "rename failed: $!"; # will break under weird circumstances.

# delete temp file
unlink $tempfile or die $!; 
```

未经测试，但显而易见的代码。这对您的问题有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:18:29.580

正如其他人指出的那样，有更好的方法:)

但是如果你真的想用 读写`+<`，你应该记住，在读取文件之后，你就在文件的末尾……这说明你的输出是附加在原始内容之后的。

您需要做的是将文件指针重置为文件的开头，使用[`seek`](http://perldoc.perl.org/functions/seek.html)：

```
seek(INCONFIG ,0,0); 
```

然后开始写...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:12:16.910

您的问题是对 <+ "open for update" 的作用有误解。Perl 教程的 [Mixing Reads and Writes](http://perldoc.perl.org/perlopentut.html#Mixing-Reads-and-Writes)对此进行了讨论。

您真正想要做的是将旧文件复制到新文件，然后在事后重命名。这在[daxim](http://learn.perl.org/faq/perlfaq5.html)提到的 perlfaq5 中有讨论。此外，还有专门用于安全执行此操作的完整模块，例如[File::AtomicWrite](https://metacpan.org/module/File%3a%3aAtomicWrite)。这些有助于解决您的程序中止并给您留下一个损坏的文件的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T15:02:59.337

[`perlopentut`](http://perldoc.perl.org/perlopentut.html#Mixing-Reads-and-Writes)这是关于混合读写的

> 事实上，当涉及到更新文件时，除非您正在处理上述 WTMP 案例中的二进制文件，否则您可能不想使用这种方法进行更新。相反，Perl 的 -i 标志来拯救。

另一种方法是使用[`Tie::File`](http://p3rl.org/Tie%3a%3aFile)模块。代码简化为：

```
tie my @config, 'Tie::File', $text or die $!;

s/$checker/$somethingnew/g for @config; 
```

但**请记住**在修改程序之前备份文件，直到您调试了程序。

# jersey - Jersey REST 服务 HashMap > 返回

> ID：11608079
> 
> 赞同：2
> 
> 时间：2012-07-23T07:27:49.183
> 
> 标签：jersey

我想使用 XML 或 JSON 在 GET 方法中返回 HashMap> 类型的对象。在客户端，我得到了地图的键，但值为空。

这是返回类：

```
private HashMap<String, ArrayList<String>> hashMap = new HashMap<>();

public HashMap<String, ArrayList<String>> getHashMap() {
    return hashMap;
}

public void setHashMap(HashMap<String, ArrayList<String>> hashMap) {
    this.hashMap = hashMap;
} 
```

这是服务中的 GET 方法：

```
@GET
@Path("/mapa")
@Produces(MediaType.APPLICATION_XML)
public Test mapa() {

    Test test = new Test();

    HashMap<String, ArrayList<String>> hashMap = new HashMap<>();

    ArrayList<String> list = new ArrayList<>();
    list.add("first");
    list.add("second");

    hashMap.put("first", list);
    test.setHashMap(hashMap);

    return test;
} 
```

我在浏览器中得到这个：

```
<test>
  <hashMap>
    <entry>
      <key>first</key>
      <value/>
    </entry>
  </hashMap>
</test> 
```

为什么值是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:26:06.237

您是否尝试过使用 Response 而不是 Test Class ？

```
@GET
@Path("/mapa")
@Produces(MediaType.APPLICATION_XML)
public Response mapa() {

    Test test = new Test();

    HashMap<String, ArrayList<String>> hashMap = new HashMap<>();

    ArrayList<String> list = new ArrayList<>();
    list.add("first");
    list.add("second");

    hashMap.put("first", list);
    test.setHashMap(hashMap);

    return Response.status(200).entity(test).build();
} 
```

# android - DialogFragment 导致空指针崩溃

> ID：11608080
> 
> 赞同：2
> 
> 时间：2012-07-23T07:27:55.450
> 
> 标签：android, nullpointerexception, android-fragments

在我的应用程序中，我有几个 AsyncTasks 执行 http 请求。如果任务失败，我会向用户显示一个 DialogFragment。

```
ErrorDialogFragment newFragment = ErrorDialogFragment.newInstance(R.string.dialog_message_error);
newFragment.show(getFragmentManager(), ConstantHandler.DIALOG_ERROR); 
```

问题是用户有时会在 AsyncTask 完成之前退出 Activity 或 Application，导致 getFragmentManager 上出现空指针异常。

我的问题是，除了跟踪每个片段和活动是否仍在运行之外，是否有办法避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:34:39.607

我以前也遇到过同样的问题。我在某处的博客上看到的一个相当好的答案（我已经忘记了）如下：

为您的 AsyncTasks 提供对当前上下文的引用。当您的应用程序被最小化/旋转时，使用`onRetainNonConfigurationInstance()`和保存您的 AsyncTasks `getLastNonConfigurationInstance()`。然后，当您的应用程序重新启动时`onCreate()`，您可以检查是否有从`getLastNonConfigurationInstance()`. 如果有，请将其上下文设置为您的活动的新上下文。现在您的 AsyncTask 将能够访问新的 Context 并完成其任务。

为了彻底，您可能还想`null`在 AsyncTasks 中设置上下文，然后再使用`onRetainNonConfigurationInstance()`. 然后在您的 AsyncTask 中，在尝试使用它做某事之前检查 Context 是否为空。如果 AsyncTask 在后台尝试使用上下文，这将阻止应用程序崩溃。

# android - 在android中计算来电铃声

> ID：11608082
> 
> 赞同：2
> 
> 时间：2012-07-23T07:28:03.827
> 
> 标签：android

我正在设计一个android应用程序，它将响应来电。为此，我想**计算来电铃声**（即电话已经响了多少次）。我试着搜索它，但没有找到任何线索。我想在电话响铃特定次数后回复来电。我试图捕捉来电状态，但它并没有让我实现这一点。请帮助我摆脱困境。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:35:23.103

当您收到指示正在接收呼叫的状态更改时，您可以等待计时器到期。

# javascript - JQuery多文件事件未触发

> ID：11608083
> 
> 赞同：1
> 
> 时间：2012-07-23T07:28:04.000
> 
> 标签：javascript, jquery-plugins

我在 aspx 中有以下代码

```
<input id="fileControl" type="file" class="multi" name="fileControl"/> 
```

和

```
 $(document).ready(function () {
        var fileSelections = [];  
         $('#fileControl').MultiFile({

            onFileAppend: function () {
                //$('#F9-Log').append('<li>onFileAppend - '+value+'</li>')

                fileSelections.push(value);
            },
            onFileSelect: function () {

                fileSelections.push();
            },
            afterFileSelect: function () {

                fileSelections.push();
            },
            afterFileAppend: function () {

                fileSelections.push();
            }

        });

    }); 
```

我已将以下文件添加为 jQuery 多文件插件的一部分

```
jquery.MetaData.js
jquery.MultiFile.js
jquery.MultiFile.pack.js 
```

但是当我添加或删除文件时，不会触发事件。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:14:24.047

我遇到了同样的问题，问题是如果你想订阅事件，你不能在输入元素中设置类。

因此，您的输入元素应如下所示： `<input id="fileControl" type="file" name="fileControl"/>`

然后它应该工作。

我想这对您来说不再是问题，但是以防万一其他人需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T05:14:48.197

刚刚看到这个......已经相应地更新了文档 [http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

我几乎找不到时间来更新文档，但这是一个大问题（我收到的大多数支持查询背后的原因）所以感谢您指出！

# parsing - 使用ANTLR分析和修改源代码；我做错了吗？

> ID：11608084
> 
> 赞同：8
> 
> 时间：2012-07-23T07:28:07.180
> 
> 标签：parsing, antlr, code-analysis, antlr3

我正在编写一个程序，我需要解析 JavaScript 源文件、提取一些事实并插入/替换部分代码。给定以下代码，我需要做的各种事情的简化描述是：

```
foo(['a', 'b', 'c']); 
```

提取`'a'`, `'b'`, 并将`'c'`代码重写为：

```
foo('bar', [0, 1, 2]); 
```

我正在使用 ANTLR 来满足我的解析需求，生成 C# 3 代码。其他人已经贡献了 JavaScript 语法。源代码的解析正在工作。

我遇到的问题是弄清楚如何真正正确地分析和修改源文件。我在实际解决问题时尝试采用的每种方法都将我带入了死胡同。我不禁认为我没有按预期使用该工具，或者在处理 AST 时我只是一个新手。

我的第一种方法是使用 a 解析`TokenRewriteStream`并实现`EnterRule_*`我感兴趣的规则的部分方法。虽然这似乎使修改令牌流变得非常容易，但我的分析没有足够的上下文信息。似乎我只能访问一个扁平的令牌流，这并不能告诉我关于整个代码结构的足够信息。例如，要检测`foo`函数是否被调用，仅仅查看第一个标记是行不通的，因为它也会错误地匹配：

```
a.b.foo(); 
```

为了让我能够进行更复杂的代码分析，我的第二种方法是使用重写规则修改语法以生成更多的树。现在，第一个示例代码块生成：

```
程序
    呼叫表达
        标识符（'foo'）
        参数列表
            数组字面量
                字符串文字（'a'）
                字符串文字（'b'）
                字符串文字（'c'）

```

这对于分析代码非常有用。但是，现在我无法轻松地重写代码。当然，我可以修改树结构来表示我想要的代码，但我不能用它来输出源代码。我曾希望与每个节点关联的标记至少能给我足够的信息，让我知道我需要在原始文本中的哪个位置进行修改，但我得到的只是标记索引或行/列号。要使用行号和列号，我将不得不对源代码进行一次尴尬的第二次遍历。

我怀疑我在理解如何正确使用 ANTLR 来做我需要的事情时遗漏了一些东西。我有没有更合适的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T13:14:25.220

您正在尝试做的事情称为[程序转换](http://en.wikipedia.org/wiki/Program_transformation)，即从另一个程序自动生成一个程序。您所做的“错误”是假设解析器就是您所需要的，并且发现它不是并且您必须填补空白。

可以很好地做到这一点的工具有解析器（构建 AST），意味着修改 AST（过程和模式定向），以及将（修改后的）AST 转换回合法源代码的*漂亮打印机。*您似乎在为 ANTLR 不附带漂亮打印机这一事实而苦苦挣扎。这不是其哲学的一部分；ANTLR 是一个（精细的）解析器生成器。其他答案建议使用 ANTLR 的“字符串模板”，它们本身不是漂亮的打印机，但可以用来实现一个，但代价是实现一个。这比看起来更难做到；[请参阅我关于将 AST 编译回源代码的](https://stackoverflow.com/questions/5832412/compiling-an-ast-back-to-source-code/5834775#5834775)答案。

这里真正的问题是广为流传但*错误*的假设，即“如果我有一个解析器，我就可以很好地构建复杂的程序分析和转换工具”。请参阅我关于[解析后的生活](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)的文章对此进行了长时间的讨论；基本上，您需要更多“只是”解析器的工具来执行此操作，除非您想自己重建大部分基础架构而不是继续您的任务。实际程序转换系统的其他有用特征包括典型的源到源转换，这大大简化了在树中查找和替换复杂模式的问题。

例如，如果您具有源到源转换功能（我们的工具[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)，您将能够使用这些 DMS 转换编写部分示例代码更改：

```
 domain ECMAScript.

       tag replace;  -- says this is a special kind of temporary tree

       rule barize(function_name:IDENTIFIER,list:expression_list,b:body):
           expression->expression
        =   " \function_name ( '[' \list ']' ) "
        -> "\function_name( \firstarg\(\function_name\), \replace\(\list\))";

       rule replace_unit_list(s:character_literal):
           expression_list -> expression_list
           replace(s) -> compute_index_for(s);

       rule replace_long_list(s:character_list, list:expression_list):
           expression_list -> expression_list
           "\replace\(\s\,\list)->  "compute_index_for\(\s\),\list"; 
```

使用规则外部“元”程序“first_arg”（知道如何在给定标识符“foo”的情况下计算“bar”[我猜你想这样做），以及给定字符串文字的“compute_index_for”，知道什么整数来替换它。

单独的重写规则具有参数列表“(....)”，其中表示子树的插槽被命名，左侧充当匹配模式，右侧充当替换，两者通常在元引号中 引用*“*将重写规则语言文本与目标语言（例如 JavaScript）文本分开。元引号内有很多元转义 **，表示特殊的重写规则语言项。通常这些是参数名称，代表任何类型的参数表示的名称树，或表示外部元过程调用（例如 first_arg；您会注意到它的参数列表（ , ）是元引用的！），或者最后是一个“标记”，例如“替换”，这是一种特殊的树，代表了未来进行更多转换的意图。

这组特定的规则通过用 barized 版本替换候选函数调用来工作，并带有额外的意图“替换”来转换列表。其他两个转换通过一次处理一个列表的元素来转换“替换”来实现意图，并将替换进一步推到列表的下方，直到它最终掉到最后并完成替换。（这是循环的转换等价物）。

您的具体示例可能会有所不同，因为您确实对细节并不精确。

应用这些规则来修改解析树后，DMS 可以简单地漂亮打印结果（某些配置中的默认行为是“解析到 AST，应用规则直到耗尽，漂亮打印 AST”，因为这很方便）。

[你可以在（高中）代数作为DMS域](http://www.semdesigns.com/products/DMS/SimpleDMSDomainExample.html)看到“定义语言”、“定义重写规则”、“应用规则和漂亮打印”的完整过程。

其他程序转换系统包括[TXL](http://www.txl.org)和[Stratego](http://www.strategoxt.org)。我们将 DMS 想象成这些的工业级版本，我们在其中构建了所有基础设施，包括[许多标准语言解析器和漂亮](http://www.semanticdesigns.com/Products/FrontEnds)的打印机。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T04:35:15.783

所以事实证明，我实际上可以使用重写树语法并使用`TokenRewriteStream`. 另外，这实际上很容易做到。我的代码类似于以下内容：

```
var charStream = new ANTLRInputStream(stream);
var lexer = new JavaScriptLexer(charStream);
var tokenStream = new TokenRewriteStream(lexer);
var parser = new JavaScriptParser(tokenStream);
var program = parser.program().Tree as Program;

var dependencies = new List<IModule>();

var functionCall = (
    from callExpression in program.Children.OfType<CallExpression>()
    where callExpression.Children[0].Text == "foo"
    select callExpression
).Single();
var argList = functionCall.Children[1] as ArgumentList;
var array = argList.Children[0] as ArrayLiteral;

tokenStream.InsertAfter(argList.Token.TokenIndex, "'bar', ");
for (var i = 0; i < array.Children.Count(); i++)
{
    tokenStream.Replace(
        (array.Children[i] as StringLiteral).Token.TokenIndex, 
        i.ToString());
}

var rewrittenCode = tokenStream.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:45:35.473

你看过[字符串模板](http://www.stringtemplate.org/ "字符串模板")库吗？它是由编写 ANTLR 的同一个人编写的，他们打算一起工作。听起来它会适合你正在寻找的东西。将匹配的语法规则输出为格式化文本。

[这是一篇关于通过 ANTLR 翻译的文章](http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate "文章链接")

# objective-c - 停止本地通知

> ID：11608087
> 
> 赞同：0
> 
> 时间：2012-07-23T07:28:21.870
> 
> 标签：objective-c, ios5, ios4, xcode4.3

我在下面有一个问题：

*   当通过按主页按钮将应用程序最小化到后台时，每 5 分钟创建一个弹出的本地通知。
*   从后台删除应用程序。-->我预期的然后小狗只显示应用程序存在时，当从后台删除应用程序时它被丢弃。

我的问题是本地通知仍然处于活动状态，并且在将其从后台删除后仍每 5 分钟显示一次弹出窗口。

我怎样才能阻止它？请帮我！先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:34:13.050

把它放在应用程序委托中。当应用程序进入后台时，它将删除所有本地通知。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:48:30.530

如果您不想取消所有通知...我已经设置了一个唯一标识符，存储在通知的 userInfo 字典中。当我想删除时，我会快速枚举所有通知并选择正确的通知进行删除。

我在这里的绊脚石是记住存储我为通知创建的 UUID，还记得在快速枚举中使用 isEqualToString。我想我也可以使用特定的名称字符串而不是唯一标识符。如果有人可以让我知道比快速枚举更好的方法，请告诉我。

```
@interface myApp () {
    NSString *storedUUIDString; 
}

- (void)viewDidLoad {
    // create a unique identifier - place this anywhere but don't forget it! You need it to identify the local notification later
    storedUUIDString = [self createUUID]; // see method lower down
}

// Create the local notification
- (void)createLocalNotification {
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil) return;
    localNotif.fireDate = [self.timerPrototype fireDate];
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody = @"Hello world";
    localNotif.alertAction = @"View"; // Set the action button
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:storedUUIDString forKey:@"UUID"];
    localNotif.userInfo = infoDict;

    // Schedule the notification and start the timer
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
}

// Delete the specific local notification
- (void) deleteLocalNotification { 
// Fast enumerate to pick out the local notification with the correct UUID
    for (UILocalNotification *localNotification in [[UIApplication sharedApplication] scheduledLocalNotifications]) {        
    if ([[localNotification.userInfo valueForKey:@"UUID"] isEqualToString: storedUUIDString]) {
        [[UIApplication sharedApplication] cancelLocalNotification:localNotification] ; // delete the notification from the system            
        }
    }
}

// Create a unique identifier to allow the local notification to be identified
- (NSString *)createUUID {
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return (__bridge NSString *)string;
} 
```

在过去 6 个月的某个时候，上述大部分内容可能已从 StackOverflow 中删除。希望这可以帮助

# javascript - 使用lightsteamer时面临跨域问题（用于流式传输）

> ID：11608088
> 
> 赞同：0
> 
> 时间：2012-07-23T07:28:22.827
> 
> 标签：javascript, streaming, lightstreamer

我的 Web 服务器在 localhost:8080 上运行，而我的 lightstreamer 服务器在 localhost:8989 上运行。但是当我尝试连接到 lightstreamer 时，我遇到了跨域问题。我知道，这可以通过将我的网络应用程序放在 lightstream 服务器中来解决。但是有没有更好的解决方案呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:10:39.387

这取决于使用的版本

在旧版本上，需要使用[setDomain方法。](http://www.lightstreamer.com/docs/client_html_jsdoc/index.html)

在最新版本上，默认情况下，您不应该有这样的问题。无论如何，您可能需要检查[http://goo.gl/kwREX](http://goo.gl/kwREX)以了解如何根据您的部署环境配置服务器；默认情况下配置为全部接受。

[免责声明我工作@weswit，weswit 制作Lightstreamer]

# jsf - 将特定位置的选项卡动态添加到 TabView Primefaces

> ID：11608091
> 
> 赞同：0
> 
> 时间：2012-07-23T07:28:35.720
> 
> 标签：jsf, jsf-2, primefaces

我们如何动态地（从 java 程序）向现有的 TabView primefaces 组件添加一个选项卡。

我的情况是这样的，有一个带有一些值的下拉列表，每当用户从下拉列表中选择某个值时，我们需要在特定位置动态添加一个选项卡到 TabView。

我知道我们可以获取现有的 TabView 组件，并添加一个选项卡，但是如果我们想在特定位置添加一个选项卡，怎么办？

```
public void addTab(){
        FacesContext fc = FacesContext.getCurrentInstance();
        TabView tabView = (TabView) fc.getApplication().createComponent(
                "org.primefaces.component.TabView");
         Tab tab1 = new Tab();
         tab1.setTitle("Dynamic Tab-1");
         tabView.getChildren().add(index,tab1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T07:33:34.450

You should update the view to reflect the new tab. Use RequestContext for ajax update.

```
RequestContext context = RequestContext.getCurrentInstance();  
context.update("tabview"); 
```

# iphone - 在 iOS5 应用程序中启用 Airplay

> ID：11608092
> 
> 赞同：0
> 
> 时间：2012-07-23T07:28:42.890
> 
> 标签：iphone, ios5, airplay

我创建了一个简单的应用程序来读取视频文件，并使用 quicklook 框架打开它。现在我想集成 Airplay 支持供用户在 Apple TV 中观看。

那么我必须为它做一些快速查看还是内置的？

提前致谢

# android - 如何以 JSON 格式获取光标输出？

> ID：11608096
> 
> 赞同：0
> 
> 时间：2012-07-23T07:28:55.793
> 
> 标签：android, eclipse, json

我正在使用游标从 SQLite 检索数据，该数据以字符串格式返回结果。有什么方法可以使用光标以 JSON 格式获取输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:32:47.400

您不能将 a 的内容`cursor`直接转换为 a `JSONObject`，但您可以通过一些逻辑来做到这一点。

例如：`Strings`从 中检索`cursor`，形成`String`遵循`JSON`格式的 a ，并使用它来制作 json 对象：

```
JSONObject jFromCursor=new JSONObject(string_in_JSON_format); 
```

# php - 从数据库中计算平均年龄，合并 2 个查询

> ID：11608103
> 
> 赞同：0
> 
> 时间：2012-07-23T07:29:24.147
> 
> 标签：php, mysql

好的，所以我认为这个问题并不像标题所暗示的那么简单，但是这里有……我有这个查询：

```
SELECT age.*, job.id FROM age, job WHERE ((age.aid = job.id) AND (age.aid='$id')) 
```

这基本上加入了两个表年龄和工作并获得匹配的行

但现在我需要在表年龄下找到存储在行猜测中的最常见年龄

**数据库布局**

表：*年龄*

行：*援助 - 猜测*

表：*工作*

行：*id*

根据我发现的搜索，我需要使用 count()

例如：

```
SELECT guess, COUNT(guess) AS countguess FROM age GROUP BY guess ORDER BY countguess DESC LIMIT 1 
```

但是我怎样才能将这两个查询合并在一起呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:38:03.857

你可以做这样的事情

```
SELECT age.aid, job.id, age.guess, COUNT(age.guess) AS countguess 
FROM age, job 
WHERE ((age.aid = job.id) AND (age.aid='$id')) 
GROUP BY guess 
ORDER BY countguess DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:36:56.690

当您说合并时，我认为您的意思是加入他们。当两个表之间存在关系时，您可以加入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:37:59.110

您可以使用`UNION ALL`来完成此操作

```
SELECT aid, id, guess, SUM(countguess ) AS countguess
FROM
(
 SELECT age.aid, job.id, guess, 0 AS countguess  
 FROM age
      INNER JOIN job
          ON age.aid = job.id AND 
             age.aid='$id'

 UNION ALL

 SELECT age.aid, 0 AS job.id, guess, COUNT(guess) AS countguess 
 FROM age 
 GROUP BY guess 
 ORDER BY countguess DESC 
 LIMIT 1
) a
GROUP BY aid 
```

*注意：`UNION ALL`要求两个查询中的列数相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:38:54.277

```
SELECT age.*, job.id FROM age, job,
    (SELECT AVG(guess) AS countguess FROM age GROUP BY guess ORDER BY countguess DESC LIMIT 1) AS countguess
FROM job AS j
INNER JOIN age AS a
ON j.id = a.aid
WHERE a.aid = '{$id}' 
```

我不确定这是否是你想要的？也许

```
SELECT age.*, job.id FROM age, job,
    (SELECT AVG(guess) AS countguess FROM age WHERE guess = a.guess GROUP BY '1') AS countguess
FROM job AS j
INNER JOIN age AS a
ON j.id = a.aid
WHERE a.aid = '{$id}' 
```

# ios - 跨类创建全局对象

> ID：11608104
> 
> 赞同：0
> 
> 时间：2012-07-23T07:29:34.373
> 
> 标签：ios, ios5, object, global-variables

我需要创建一个全局对象，它可以工作并且可以在程序中的所有类中使用。我已经做了一些研究，看到解决方案似乎正在 AppDelegate 中实现它，但似乎没有太多关于如何实现这一点的解释，更重要的是，根据我的理解，这似乎并不正确AppDelegate 目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:32:09.563

你应该检查[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)：

> 在软件工程中，单例模式是一种将类的实例化限制为一个对象的设计模式。当需要一个对象来协调整个系统的动作时，这很有用。这个概念有时被推广到当只有一个对象存在时运行效率更高的系统，或者将实例化限制为一定数量的对象。该术语来自单例的数学概念。

这是示例实现的来源：[我的 Objective-C 单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)

# java - 将 Doxygen 文档与 Eclipse 中的 Java 项目联系起来？

> ID：11608117
> 
> 赞同：2
> 
> 时间：2012-07-23T07:30:43.700
> 
> 标签：java, eclipse, javadoc, doxygen

你能告诉我如何将 doxygen 文档与 Eclipse 中的 Java 项目联系起来吗？

这是背景：我参与了一个具有 Java 接口的 C++ 项目。它的文档似乎是由 doxygen 而不是 javadoc 生成的。我希望在 Eclipse 中使用此文档，但我不知道如何使用。我已经安装了 doxygen 插件 Eclox，但显然我不知道下一步该做什么。

有关信息，这是我项目的 ./doc 目录![在此处输入图像描述](../Images/2797bd17c2dc34abb7ebd0d1df728dcf.png)./doc 的一部分

# javascript - 焦点（）不工作 - 为什么？

> ID：11608119
> 
> 赞同：1
> 
> 时间：2012-07-23T07:30:45.150
> 
> 标签：javascript, jquery

我有嵌套的正文元素和 iframe。一个来自我的 html 页面，一个来自 TinyMce。在 tinymce 的正文中，我在 div 后面附加了许多文本框。他们的ID是hi1，hi2等。

这段代码：

```
$($('#petko_ifr').focus().contents()).find('#dishComments').find('#' + e.target.id) 
```

返回正确的输入元素（文本框），它有一个焦点方法。但是这个：

```
$($('#petko_ifr').focus().contents()).find('#myDiv').find('#hi1').focus() 
```

不专注！这个：

```
$($('#petko_ifr').focus().contents()).find('#myDiv').find('#hi1').val('somethingg') 
```

工作正常。为什么会发生这种情况以及如何解决这个问题？

在 Chrome 中，当我检查元素时（在 html 代码中单击，当我在文本框上直观地单击时，它被单击。但是当我不检查元素时，单击不起作用。

# c++ - 通过引用存储函数的返回值是否有任何性能提升？

> ID：11608120
> 
> 赞同：2
> 
> 时间：2012-07-23T07:30:51.083
> 
> 标签：c++, reference, return-value

通过引用存储函数的返回值是否有任何性能提升？我的意思是以下代码是首选，因为它可以防止将函数的返回值复制到变量中？

```
string Foo()
{
    string someString = "some string";
    return someString;
}

const string &str = Foo(); 
```

**编辑：**虽然在上面的示例`Foo()`中返回一个字符串，但我的问题也涉及返回其他类型的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:38:42.090

字符串在 C++ 中实现的方式是一个字符数组。因此，当您使用引用时，主要优点是可以避免按成员进行复制，并且指向的对象是本身已传递的对象。这提高了涉及大字符串或数组的性能。对于您的示例，字符串非常短，并不重要！希望这可以帮助 ：）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T07:36:48.377

不，事实上，性能可能会略有下降（尽管我对此表示怀疑）。在这种情况下，您通过使用引用获得的所有好处都是混淆。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:37:30.250

今天的编译器足够聪明，在这种情况下可能会使用 RVO（返回值优化）。所以即使按值返回也不存在复制开销

您应该遵循的主要规则是编写可读性好的代码（因为代码是为人编写的），并且仅在需要时才进行优化，并且仅在发现瓶颈后才进行优化

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T07:38:27.763

知道，您不会获得性能提升。在这种情况下，您可以使用 std::move() 来获得提升。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T08:36:52.120

您的代码目前包含两个副本`Foo`：

`string`(1) 从使用构造函数构造的类型的临时对象`const char*`，到`someString`.

(2)从变量`someString`到临时对象即是返回值`Foo`。

您正在编写`const string &str = Foo();`而不是`const string str = Foo();`为了防止第三次复制：

(3) 从作为 , 的返回值的临时对象`Foo`到`str`。

标准允许省略所有三个副本，所以问题基本上是您的编译器是否需要 3 的帮助。

根据经验，我会说不——如果你的编译器足够聪明，可以忽略副本 1 和 2，那么它很可能足够聪明，可以忽略 3。如果它不够聪明，不能忽略其中任何一个，这会让你付出代价性能，那么您需要处理函数`Foo`以及调用它的代码。但是这种情况不会出现——只要你记得打开优化，任何真正的 C++ 编译器都可以做复制省略。

可以想象，在某些特殊情况下，您需要仔细编写代码以帮助编译器找出无法删除允许删除的副本的地方。您需要在这些情况发生时找到它们，没有一般的编码指南可以（准确地）告诉您您需要担心（3）而不是（1）和（2）。

# django - 如何在 django 中使用固定装置？

> ID：11608121
> 
> 赞同：0
> 
> 时间：2012-07-23T07:30:54.307
> 
> 标签：django, fixtures

我有一个非常简单的应用程序，并且我创建了一个夹具。一个名为 fixtures 的文件夹和一个名为`initial_data.json`. 以下是我在 initial_data.json 文件中的代码：

```
[
  {
    "model": "myapp.model_in_lower_case",
    "pk": 1,
    "fields": {
      "title": "my Title",
      "description": "Description goes here..."
    }
  }
] 
```

但是当我运行 syncdb 命令时，它说找到零个固定装置并且数据没有被保存。少了什么东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:30:13.780

确保您使用 manage.py /dumpdata 来导出夹具。

将夹具保存在您的**应用程序**夹具目录下，而不是您的项目目录下。

将其命名为 initial_data.json，它应该适合您。

当 json 文件不适合您的数据库或无效时，manage.py 将抛出异常。我很肯定目前您没有将 json 文件放在正确的位置。

# performance - Geoserver - PostGIS 性能问题

> ID：11608122
> 
> 赞同：4
> 
> 时间：2012-07-23T07:31:03.647
> 
> 标签：performance, postgresql, jdbc, postgis, geoserver

我们注意到 Geoserver 实例和 Postgres/PostGIS 之间的交互有些奇怪。

在将 Geoserver 的日志级别设置为包括开发人员调试后，我设法捕获了从 Geoserver WMS 到 PostGIS 的单个请求。

（缩短的）事件序列及其时间戳：

```
12:31:22,658 - SELECT query for MSG is sent to Postgres
12:32:10,315 - Rendering for MSG layer starts
12:32:10,356 - DB Connection Closed
~ 48 seconds 
```

有趣的是，当我直接从 PgAdmin3 执行相同的查询 (MSG) 时：

```
SELECT "frp_mw",encode(ST_AsBinary(ST_Force_2D("the_geom")),'base64') as "the_geom" FROM "public"."af_msg_abba_datetime_today" WHERE ("the_geom" && GeometryFromText('POLYGON ((-27.67968749408379 -46.92207325648429, -27.67968749408379 -6.186892358058866, 75.67968748740275 -6.186892358058866, 75.67968748740275 -46.92207325648429, -27.67968749408379 -46.92207325648429))', 4326) AND (("frp_mw" >= -1 AND "frp_mw" <= 150) OR ("frp_mw" >= 151 AND "frp_mw" <= 300) OR ("frp_mw" >= 301 AND "frp_mw" <= 600) OR ("frp_mw" >= 601 AND "frp_mw" <= 50000))); 
```

我在 380 毫秒内得到 6515 行。

即，如果从 PgAdmin3 查询，Postgres 能够在 380 毫秒内返回查询结果，但 Geoserver 需要大约 48 秒才能获得相同的结果集。

这可能是某种 JDBC 问题吗？

关于我们的设置的一些细节：

主 Postgres 数据库位于与 Geoserver 不同的 VM 上，但我们复制到 Geoserver VM（同一主机）上的从属 Postgres 集群。因此，Geoserver 为其查询引用了“localhost”只读 Postgres 集群。

上面显示的 380 毫秒响应时间来自从属 Postgres 集群，与 Geoserver 使用的相同。

所有基于 Linux (Ubuntu 11.10) 的。Postgres 9.1 PostGIS 1.5 地理服务器 2.1.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:02:10.803

GeoServer 以 1000 个块为单位获取数据，渲染它们，获取下一个块，等等，以避免在许多并发请求的情况下占用大量内存。所以48s不是加载数据的时候，而是加载渲染的时候。单次加载数据更快，但无法控制内存占用。

此外，您是否在数据存储配置中使用准备好的语句？

# vb.net - 如何在 vb.NET 中将 word 应用程序置于最前面

> ID：11608123
> 
> 赞同：0
> 
> 时间：2012-07-23T07:31:04.510
> 
> 标签：vb.net, ms-word

我正在使用winforms，当我尝试以编程方式打开一个word文档时，它会随机出现在所有打开的窗口后面。我怎样才能把它带到前面？以下是我的代码。

```
 Dim pAppWord As Object = CreateObject("Word.Application") 
```

'//做我的事

```
 pAppWord.Visible = True
    pAppWord.Application.Activewindow = True
    '//pAppWord.Active() found this online but throws an error
    pAppWord.WindowState = vbNormal 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:21:20.913

对我有用的是

```
pAppWord.Activate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:30:15.800

这似乎并不简单......也许这个有帮助：[http ://social.msdn.microsoft.com/Forums/pl-PL/vblanguage/thread/fd9215cf-0893-4c61-886c-5d22fa7c2055](http://social.msdn.microsoft.com/Forums/pl-PL/vblanguage/thread/fd9215cf-0893-4c61-886c-5d22fa7c2055)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T12:05:34.860

如果您已经添加或打开了一个文档（例如 wordOb.Documents.Add），那么您可以简单地传递`wordOb.ActiveWindow.Hwnd`给 Windows API 函数`SetForegroundWindow`。

# php - 下拉菜单中的数据数组

> ID：11608126
> 
> 赞同：1
> 
> 时间：2012-07-23T07:31:30.457
> 
> 标签：php, mysql, codeigniter

我试图让我的数据库的区域表显示在下拉菜单中，但我遇到了麻烦，因为它是一个数组。

在我的控制器中，我有：`$data['city'] = $this->location->fetchCity();`

但在我看来，当我去的时候我会`<?php echo $city; ?>`得到这个`Array`，为什么？

**模型：**

```
public function fetchCity(){
    $this->db->select('area');
    $this->db->from('suburbs');

    $query = $this->db->get();

    if($query->num_rows() > 0)
    {
        $row = $query->result();
    } 
```

**更新：**

```
 <select>
        <?php foreach ($city as $key => $row): ?>

    <option value="<?php echo $row['area'];?>"><?php echo $row['area'];?></option>

        <?php endforeach; ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:34:57.910

```
<?php echo $city[$key]; ?> 
```

或者

```
<?php echo $city['area']; ?> 
```

由于您的函数调用返回一个数组，因此我建议您将其打印出来。

* * *

```
foreach ($city as $key=>$row)
{ 
   echo $row->area; 
} 
```

由于您的结果是一个对象数组，我相信这会让事情变得正确。

# ruby-on-rails-3 - 编写一个缓存版本的机械化

> ID：11608127
> 
> 赞同：1
> 
> 时间：2012-07-23T07:31:46.877
> 
> 标签：ruby-on-rails-3, activerecord, mechanize

我想要一个缓存版本的机械化。这个想法是 #get(uri...) 检查该 uri 是否先前已被获取，如果是，则从缓存中获取响应而不是访问网络。如果不在缓存中，它会访问网络并将响应保存在缓存中。

我天真的方法行不通。（我可能不需要提到 CachedWebPage 是 ActiveRecord::Base 的子类）：

```
class CachingMechanize < Mechanize

  def get(uri, parameters = [], referer = nil, headers = {})
    page = if (record = CachedWebPage.find_by_uri(uri.to_s))
             record.contents
           else
             super.tap {|contents| CachedWebPage.create!(:uri => uri, :contents => contents)}
           end
    yield page if block_given?
    page
  end

end 
```

这失败了，因为 Mechanize#get() 返回的对象是一个复杂的循环结构，YAML 和 JSON 都不想序列化以存储到数据库中。

我意识到我想要的是在 Mechanize 解析它之前捕获低级内容。

*   有没有干净的方法来做到这一点？我想我可以使用 Mechanize 的 post_connect 挂钩来访问传入的原始页面，但我看不到如何随后将缓存的原始页面传递给 Mechanize 进行解析。
*   是否有一些我应该使用的包已经进行了网页缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:11:38.600

事实证明，解决方案很简单，尽管并不完全干净。像这样缓存 Mechanize#get() 的结果是一件简单的事情：

```
class CachingMechanize < Mechanize
  def get(uri, parameters = [], referer = nil, headers = {})
    WebCache.with_web_cache(uri.to_s) { super }
  end
end 
```

... with_web_cache() 使用 YAML 序列化和缓存 super 返回的对象。

我的问题是，默认情况下，Mechanize#get() 返回一个 Mechanize::Page 对象，其中包含一些 lambda 对象，YAML 无法转储和加载该对象。解决方法是消除那些 lambda，结果证明这很简单。完整代码如下。

```
class CachingMechanize < Mechanize

  def initialize(*args)
    super
    sanitize_scheme_handlers
  end

  def get(uri, parameters = [], referer = nil, headers = {})
    WebCache.with_web_cache(uri.to_s) { super }
  end

  # private

  def sanitize_scheme_handlers
    scheme_handlers['http']      = SchemeHandler.new
    scheme_handlers['https']     = scheme_handlers['http']
    scheme_handlers['relative']  = scheme_handlers['http']
    scheme_handlers['file']      = scheme_handlers['http']
  end

  class SchemeHandler
    def call(link, page) ; link ; end
  end

end 
```

## 道德：不要尝试 YAML.dump 和 YAML.load 包含 lambda 或 proc 的对象

这不仅仅是这个例子：如果你看到一个 YAML 错误，内容如下：

```
TypeError: allocator undefined for Proc 
```

检查您尝试序列化和反序列化的对象中是否有 lambda 或 proc。如果您能够（就像我在这种情况下一样）用对对象的方法调用替换 lambda，那么您应该能够解决这个问题。

希望这对其他人有帮助。

## 更新

响应@Martin 对 WebCache 定义的请求，这里是：

```
# Simple model for caching pages fetched from the web.  Assumes
# a schema like this:
#
#   create_table "web_caches", :force => true do |t|
#     t.text     "key"
#     t.text     "value"
#     t.datetime "expires_at"
#     t.datetime "created_at", :null => false
#     t.datetime "updated_at", :null => false
#   end
#   add_index "web_caches", ["key"], :name => "index_web_caches_on_key", :unique => true
#
class WebCache < ActiveRecord::Base
  serialize :value

  # WebCache.with_web_cache(key) {
  #    ...body...
  # }
  #
  # Searches the web_caches table for an entry with a matching key.  If
  # found, and if the entry has not expired, the value for that entry is
  # returned.  If not found, or if the entry has expired, yield to the
  # body and cache the yielded value before returning it.
  #
  # Options:
  #   :expires_at sets the expiration date for this entry upon creation.
  #               Defaults to one year from now.
  #   :expired_prior_to overrides the value of 'now' when checking for
  #                     expired entries.  Mostly useful for unit testing.
  #
  def self.with_web_cache(key, opts = {})
    serialized_key = YAML.dump(key)
    expires_at = opts[:expires_at] || 1.year.from_now
    expired_prior_to = opts[:expired_prior_to] || Time.zone.now
    if (r = self.where(:key => serialized_key).where("expires_at > ?", expired_prior_to)).exists?
      # cache hit
      r.first.value
    else
      # cache miss
      yield.tap {|value| self.create!(:key => serialized_key, :value => value, :expires_at => expires_at)}
    end
  end

  # Prune expired entries.  Typically called by a cron job.
  def self.delete_expired_entries(expired_prior_to = Time.zone.now)
    self.where("expires_at < ?", expired_prior_to).destroy_all
  end

end 
```

# c# - 当根回滚时，嵌套事务是否会回滚？

> ID：11608130
> 
> 赞同：4
> 
> 时间：2012-07-23T07:32:01.697
> 
> 标签：c#, sql-server, transactions, transactionscope, rollback

在这段代码中..

```
public static TransactionScope CreateTransactionScope(bool createNew = false)
{
    return new TransactionScope(
        createNew ? TransactionScopeOption.RequiresNew : TransactionScopeOption.Required,
        new TransactionOptions() { IsolationLevel = IsolationLevel.ReadCommitted });
} 
```

* * *

其实在这一...

```
using (TransactionScope rootScope = CreateTransactionScope())
{
    using (TransactionScope nestedOne = CreateTransactionScope())
    { nestedOne.Complete(); }

    using (TransactionScope nestedTwo = CreateTransactionScope(true))
    { nestedTwo.Complete(); }

    // No committing, rollback 'rootScope'.
} 
```

哪些事务将与根事务一起回滚 - 将是唯一的`nestedOne`还是两者`nestedOne`兼而有之`nestedTwo`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T07:55:06.647

nestedOne 将加入根作用域，因此如果根作用域回滚，则nestedOne 也会回滚，但不包含作为单独事务的nestedTwo。

就像您具有将事务与封闭事务分开的“RequireNew”选项一样，您可以具有停止该范围内的事务的“抑制”选项。

查看 MSDN 中的以下列表，该列表提供了有关事务行为的重要课程。 [http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx)

# javascript - 在 javascript 中使用来自 template.html 的字符串

> ID：11608131
> 
> 赞同：0
> 
> 时间：2012-07-23T07:32:04.337
> 
> 标签：javascript, html

我想知道如何将 template.html 中的字符串分配给 javascript 变量。我正在使用将 rss 转换为 html 的 php 代码。它替换 template.html 中的字符串以显示信息。我想在 javascirpt 中分配这些替换的字符串。这是我的代码：

我的模板.html

```
 <TABLE width="100%">
        ~~~BeginItemsRecord~~~
        <TR>
            <TD>
                 ~~~ItemPubShortTime~~~
            </TD>
        </TR>
        <TR>
            <TD>
                <B>~~~ItemTitle~~~</B>
            </TD>
        </TR>
        <TR>
            <TD>
                <BR>
            </TD>
        </TR>
        ~~~EndItemsRecord~~~
    </TABLE> 
```

例如，当我运行我的程序时，而不是~~~ItemPubShortTime~~~ 你会看到像上午10.16 的时间。我想将 10.16 AM 分配给此文件中的 javascript 变量。

我的脚本如下所示：

```
<script language="javascript">
var sglm=new Array();
sglm[0]= 'Hello World';

</script> 
```

我想输入 10.16AM 而不是“Hello World”。我希望很清楚。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:40:24.513

您也可以将 JavaScript 放入模板中，然后通过 PHP 代码以相同的方式分配它，例如

```
 sglm[0]= '~~~ItemPubShortTime~~~'; 
```

然后它将与 HTML 一起被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:46:34.643

您可以在 td 字段上运行一个循环并将 textContent 写入数组中，

```
var sglm = [];
for (var i = 0, ilen = document.getElementsByTagName("TD").length; i < ilen; i++ ) {
    sglm.push(document.getElementsByTagName("TD")[i].textContent);
}
console.log(sglm[0]); //~~~ItemPubShortTime~~~​​​ 
```

看到这个[小提琴](http://jsfiddle.net/spuCk/)

如果您没有控制台，请替换`console.log`为 an `alert`or sth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:39:12.230

关于什么：

```
<TD id="theId">~~~ItemPubShortTime~~~</TD>

<script language="javascript">
var sglm=new Array();
sglm[0]= document.getElementById("theId").textContent;

</script> 
```

# iphone - 如何以上午/下午格式获取 iphone NSDateFormatter 的时间？

> ID：11608133
> 
> 赞同：55
> 
> 时间：2012-07-23T07:32:08.107
> 
> 标签：iphone, ios, time, nsdateformatter

我正在使用 NSDateFormatter 在 iPhone 应用程序中工作。我正在从 web 服务中获取时间，例如`"00:00:00", "16:00:00","15:30:00" and so on`. 我需要将这些时间转换为如果时间是`"00:00:00" to "12 AM"`，如果时间是`"16:00:00" to "4 PM"`，如果时间是“15:30:00”到“3.30 PM”。我已经使用了下面的代码，但是当我通过了`"16:00:00" the date returns null`。

```
 NSString *dats1 = @"16:00:00";
 NSDateFormatter *dateFormatter3 = [[[NSDateFormatter alloc] init] autorelease];
 [dateFormatter3 setDateStyle:NSDateFormatterMediumStyle];  
 [dateFormatter3 setDateFormat:@"hh:mm:ss"]; 
 NSDate *date1 = [dateFormatter3 dateFromString:dats1];
 NSLog(@"date1 : %@", date1); **// Here returning (null)**

 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
 [formatter setDateFormat:@"hh:mm a"];
 NSLog(@"Current Date: %@", [formatter stringFromDate:date1]); **// Here also returning (null)**
 [formatter release]; 
```

当我通过“00:00:00”时，它会正确返回“12 AM”。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-23T07:40:14.317

如果您的时间格式是`24hrs`请使用`"HH:mm:ss"`格式。请测试代码并让我知道它是否适合您。我已经测试过了，它正在返回`"4 PM"`

```
NSString *dats1 = @"16:00:00";
 NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
 [dateFormatter3 setDateStyle:NSDateFormatterMediumStyle];  
 [dateFormatter3 setDateFormat:@"HH:mm:ss"]; 
 NSDate *date1 = [dateFormatter3 dateFromString:dats1];
 NSLog(@"date1 : %@", date1); **// Here returning (null)**

 [dateFormatter setDateFormat:@"hh:mm a"];
 NSLog(@"Current Date: %@", [formatter stringFromDate:date1]); **// Here also returning (null)**
 [formatter release]; 
```

谢谢。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-01-20T14:48:28.287

您可以使用`.ShortStyle`which 将适应当前的语言环境：

```
let timeFormatter = NSDateFormatter()
timeFormatter.dateStyle = .NoStyle
timeFormatter.timeStyle = .ShortStyle
timeFormatter.stringFromDate(NSDate()) 
```

哪个返回`17:12`或`5:12 PM`取决于当前的设备语言环境。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-23T07:39:57.050

为什么又要分配`NSDateFormatter`？

您只需将其格式化为`NSDate`然后再格式化`NSString`为

```
 NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"HH:mm:ss"];

    NSDate *date = [dateFormatter dateFromString:dats1];

    [dateFormatter setDateFormat:@"hh:mm a"];

    NSString *formattedDate = [dateFormatter stringFromDate:date];

    NSLog(@"%@",formattedDate); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-23T07:42:00.307

尝试`HH:mm:ss`（注意小时格式的大写字母）

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-22T10:54:30.867

希望有人愿意在 Swift 中获得它的帮助

**斯威夫特 5.1+**

```
let dateFormatter = DateFormatter()
//if you want 12AM,5PM then use "hh mm a"
//if you want 00AM,17PM then use "HH mm a"
dateFormatter.dateFormat = "hh mm a"
let stringDate = dateFormatter.string(from: Date())
print(stringDate) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-08-07T10:33:46.597

下面的代码始终保持 12 小时格式：

```
NSLocale *12hourFomrat = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
df.locale = 12hourFomrat; 
```

这始终保持 24 小时格式

```
NSLocale *24hourFormat = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"];
df.locale = 24hourFormat 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-23T07:40:38.577

您的日期格式应为：

```
 [dateFormatter3 setDateFormat:@"HH:mm:ss"]; 
```

检查[日期格式模式 Doku](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-29T19:48:52.247

斯威夫特 5：

```
let dateFormatter = DateFormatter()
dateFormatter.dateFormat = "hh mm a"
let formattedDate = dateFormatter.string(from: Date()) 
```

# clojure - 避免 Clojure DSL 中的名称冲突

> ID：11608136
> 
> 赞同：9
> 
> 时间：2012-07-23T07:32:18.460
> 
> 标签：clojure, namespaces, dsl

作为一个附带项目，我正在创建一个用于图像合成 ( [clisk](https://github.com/mikera/clisk) ) 的 Clojure DSL。

我有点不确定函数命名的最佳方法，其中我在 DSL 中的函数类似于 Clojure 核心中的函数，例如`+`，我的 DSL 中需要函数或类似的东西来附加地组合图像/执行矢量数学运算.

据我所知，有几个选择：

1.  `+`在我自己的命名空间中使用相同的名称 ( )。在 DSL 代码中看起来不错，但会覆盖 clojure.core 版本，这可能会导致问题。人们可能会感到困惑。
2.  使用相同的名称，但需要对其进行限定 ( `my-ns/+`)。避免冲突，但`use`为了方便起见阻止人们访问命名空间，看起来有点难看。
3.  使用不同的短名称，例如 ( `v+`)。可以很`use`容易地避免冲突，但这个名字有点难看，可能很难记住。
4.  使用不同的长名称，例如 ( `vector-add`)。详细但具有描述性，没有冲突。
5.  使用多方法排除`clojure.core/+`和重新定义`+`（如 georgek 建议的那样）。

示例代码可能类似于：

```
 (show  (v+ [0.9 0.6 0.3] 
             (dot [0.2 0.2 0] 
                  (vgradient (vseamless 1.0 plasma) )))) 
```

最好/最惯用的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:49:50.240

首先，运算符在中缀表达式中的重复出现需要良好的语法，但对于带有前缀语法的 lisp，我认为这并不重要。因此，让用户为显式命名空间键入更多字符并不是犯罪。并且 clojure 对命名空间和别名有很好的支持。因此用户很容易选择自己的短前缀：`(x/+ ...)`例如。

其次，查看[阅读器文档](http://clojure.org/reader#The%20Reader--Reader%20forms)，没有太多可以使用的非字母数字符号，所以类似的东西`:+`已经出来了。所以没有“可爱”的解决方案——如果你选择一个前缀，它必须是一个字母。这意味着类似`x+`- 最好让用户选择一个别名，以多一个字符为代价，并拥有`x/+`.

所以我会说：忽略核心，但期望用户`(:require .... :as ...)`。如果他们非常喜欢你的包，他们希望它是默认的，那么他们可以`(:use ...)`明确地处理核心。但是您为运算符选择前缀似乎是一个糟糕的妥协。

（而且我认为我没有看到任何使用单字母前缀的库）。

另一种可能性是提供上述内容以及*具有*长名称而不是运算符的单独包（它们只是简单地定义以匹配原始包中的值）。那么如果人们确实想要`(:use ...)`但想要避免冲突，他们可以使用它（但实际上`(vector-add ...)`over的优势是`(vector/+ ...)`什么？）

and finally i would check how `+` is implemented, since if it *already* involves some kind of dispatch on types then georgek's comment makes a lot of sense.

(by "operator" above i just mean single-character, non-alphanumeric symbol)

# jquery - 在 Google 地图中隐藏 .click() 上的图层

> ID：11608139
> 
> 赞同：3
> 
> 时间：2012-07-23T07:32:35.340
> 
> 标签：jquery, google-maps-api-3, twitter-bootstrap

我正在使用 GoogleMaps 和 Bootstrap API。

![在此处输入图像描述](../Images/41f9310987bfc91e5de085b3cc9cd990.png) 我想要做的是添加一个按钮，单击该按钮时会隐藏给定的图层并显示新的图层，我一直在尝试使用 jQuery，但问题是我无法从按钮 .click() 事件中隐藏图层.

```
//Javascript #indicacionmapa confirmation button
infowindow.setContent('<a href="#" class="btn btn-success btn-large" id="btnconfirmaubica"> Esta es la ubicación &#x2713; </a>');

//Jquery 
$(document).load(function() {
    $("#btnconfirmaubica").click(function () {
        $("#segundopaso").slideUp("slow");
        $("#primerpaso").slideDown("slow");
    });
}); 
```

我希望你能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:41:02.297

改变：

```
$(document).load(function() { 
```

和：

```
$(document).ready(function() { 
```

同样对于动态生成的元素，您应该委托事件，请尝试以下操作：

```
$(document).ready(function() {
    $("body").on('click', '#btnconfirmaubica', function() {
        $("#segundopaso").slideUp("slow");
        $("#primerpaso").slideDown("slow");
    });
}); 
```

# asp.net - 使用 ASP.NET 和 Twilio API 验证电话号码

> ID：11608140
> 
> 赞同：1
> 
> 时间：2012-07-23T07:32:41.687
> 
> 标签：asp.net, twilio

我正在尝试使用下面的代码检查数字是否有效。这行得通吗？

```
try
    {
        TwilioRest.Account account = new TwilioRest.Account(TwilioRest.TwilioConstants.ACCOUNT_SID, TwilioRest.TwilioConstants.ACCOUNT_TOKEN);
        string strResponse = account.request(String.Format("/{0}/Accounts/{1}/OutgoingCallerIds", TwilioRest.TwilioConstants.API_VERSION, TwilioRest.TwilioConstants.ACCOUNT_SID), "GET");
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(strResponse);
        XmlNode root = xmlDoc.DocumentElement.ChildNodes[0];
        int cont = 0;
        if (root.ChildNodes.Count > 0)
        {
            for (int i = 0; i < root.ChildNodes.Count; i++)
            {
                string ss = root.ChildNodes[i].SelectSingleNode("PhoneNumber").ChildNodes[0].Value;
                if (phoneno.Trim() == ss)
                {
                    cont = 1;
                    break;
                }
            }
        }
        if (cont == 0)
        {
            btnSubmit.Visible = true;
        }
    }
    catch (TwilioRest.TwilioRestException ex)
    {
        mpValidatePhone.Show();
        ucMsgPhone.MessageType = MessageType.Error;
        ucMsgPhone.Text = TwilioErrorMessage(ex.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:51:21.113

试试这样......

```
string strResponse = account.request(String.Format("/{0}/Accounts/{1}/OutgoingCallerIds",
            TwilioRest.TiwlioConstants.API_VERSION, TwilioRest.TiwlioConstants.ACCOUNT_SID), "GET");
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(strResponse);
        XmlNode root = xmlDoc.DocumentElement.ChildNodes[0];
        foreach (XmlNode node in xmlDoc.DocumentElement.ChildNodes[0])
        {
            string nodeVal = node.SelectSingleNode("PhoneNumber").ChildNodes[0].Value.ToString();
            string fonVal = foneCountryCode + PhoneNumber.Replace("-", "");
            //if (node.SelectSingleNode("PhoneNumber").ChildNodes[0].Value == "+" + PhoneNumber.Replace("-", ""))
            if(nodeVal == fonVal)
            {
                result = true;
                break;
            }
        } 
```

# eclipse - 如何在 glassfish 的 ONE ear 项目中将不同的域指向 Web 模块？

> ID：11608141
> 
> 赞同：1
> 
> 时间：2012-07-23T07:32:42.740
> 
> 标签：eclipse, jakarta-ee, web, glassfish

我正在开发一个 SNS 程序，我计划使用 Eclipse IDE、Glassfish 服务器使用 JavaEE 技术开发该程序。为此，我有一个 Eclipse EAR 项目，其结构如下：

*   *xyz*，企业应用程序项目，它打包了下面的其他模块
*   *xyz.jpa*，JPA 项目，模型层
*   *xyz.ejb* , EJB 项目, 数据控制层
*   *xyz.api*，动态 Web 项目，移动客户端使用的 API
*   *xyz.www*，动态 Web 项目，作为网站
*   *xyz.admin*，动态 Web 项目，用于管理的 Web 控制台

这些模块作为可部署的存档文件*xyz.ear 分发*。此 EAR 中的 3 个 Web 模块中的每一个都应该有自己的域（http://api.xyz.com -> *xyz.ap*i, [http://www.xyz.com](http://www.xyz.com) -> *xyz.www* , [https： //admin.xyz.com](https://admin.xyz.com) -> *xyz.admin*）。

我怎么做？或者你会用这个程序做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:48:45.583

我想通了，Glassfish 的虚拟服务器功能正好适合我的需要。我开发 Java Web 程序的时间不长，以至于忘记了这一点，现在一切都很好。

我还是想看看你是怎么设计的。

# xcode - ipad：键盘位置错误

> ID：11608144
> 
> 赞同：0
> 
> 时间：2012-07-23T07:32:50.657
> 
> 标签：xcode, ipad, ios5, keyboard

当我切换到另一个视图（从拍照返回或切换到视图以选择表格中的内容后）时，ipad 键盘出现在错误的位置。当我选择一个文本字段时，我会在我的 Ipad 和模拟器上看到它。（还不能发布图片）。如果我转动我的 ipad（使其水平对齐）并向后旋转，键盘就会恢复正常。

[https://devforums.apple.com/servlet/JiveServlet/showImage/2-701040-19966/Screen+Shot+2012-07-20+at+16.36.20.png](https://devforums.apple.com/servlet/JiveServlet/showImage/2-701040-19966/Screen+Shot+2012-07-20+at+16.36.20.png)

我的代码切换到相机拍照...

```
- (IBAction)getCameraPicture:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsEditing = YES;
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    picker.title = @"CameraPicture";
    [self presentModalViewController:picker animated:YES];
} 
```

我的代码切换到带有表格的视图：

```
[self presentModalViewController:viewControllerSpanoTechProducts animated:YES]; 
```

选择东西后返回的代码：

```
[self dismissModalViewControllerAnimated:YES]; 
```

我的应用程序是如何工作的：你有一个带有按钮和文本字段的主屏幕来填写表格。当您按下按钮选择产品时，我会切换到另一个带有表格的视图控制器，您可以在其中选择产品和“完成”按钮。如果您单击“完成”按钮，我将切换回原始视图..希望这有帮助吗？我刚开始使用 iOS .. 任何帮助都是 appriciated！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:51:52.947

在切换用户时此代码：

```
[yourTextFieldObject resignFirstResponder]; 
```

这可能会奏效。

# c# - Java 中的拖放应用程序，例如 .Net 中的 IDesignerHost

> ID：11608146
> 
> 赞同：1
> 
> 时间：2012-07-23T07:32:54.867
> 
> 标签：c#, java, drag-and-drop

我有一个使用 IDesignerHost 的 .net 内置应用程序。此应用程序最重要的部分是拖放功能，在设计器中移动控件并自动显示所有水平和垂直对齐线，将设计保存在数据库中（我将所有 imp 属性保存在控件上）然后重新加载它选择设计时自动（我从数据库中获取所有控件及其属性）

现在我需要用 Java 构建相同的应用程序。我不是 Java 专家。当我用谷歌搜索时，我只能找到使用 SWT 或其他 Java 的简单拖放。但不像 IDesignerHost 提供的那样。有人可以给我领导吗？

注意：IDesignerHost 将允许您在应用程序中提供自己的表单设计器。使用它，您也可以构建一个与 Visual Studio 非常相似的应用程序。[http://www.codeproject.com/Articles/13272/Crafting-aC-Forms-Editor-from-scratch](http://www.codeproject.com/Articles/13272/Crafting-a-C-Forms-Editor-from-scratch)

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:16:21.450

[窗口生成器](http://www.eclipse.org/windowbuilder/)也许？自 Indigo 以来集成在 Eclipse 中。

# android - 将中央按钮与屏幕底部对齐

> ID：11608150
> 
> 赞同：0
> 
> 时间：2012-07-23T07:33:08.997
> 
> 标签：android, android-layout

在我的屏幕布局中包含一个中央按钮，我想将该按钮与屏幕底部对齐。我尝试了一些代码，但它变得很棒......

我的xml代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <Button
       android:id="@+id/btnButton1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Button 1"/>

    <RelativeLayout 
       android:id="@+id/belowLayout"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       >

    <Button
        android:id="@+id/btnButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Left"/>

    <Button
        android:id="@+id/btnButton3"
        android:layout_width="75px"
        android:layout_height="50px"
        android:layout_centerHorizontal="true"
        android:text="..."/>

    <Button 
        android:id="@+id/btnButton4"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Right"/>

      </RelativeLayout>
 </RelativeLayout> 
```

截屏

![在此处输入图像描述](../Images/a42e363546e29ce5f3c1fd28bfe49144.png)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T07:34:25.470

像这样使用`layout_alignParentBottom="true"`：

```
 <Button
        android:id="@+id/btnButton3"
        android:layout_width="75px"
        android:layout_height="50px"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:text="..."/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T07:44:32.167

试试这个

```
<Button
        android:id="@+id/btnButton3"
        android:layout_width="75px"
        android:layout_height="50px"
        android:layout_centerHorizontal="true"
        android:layout_alignBottom="@+id/btnButton2"
        android:text="..."/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:36:38.503

你必须在这里停止使用 px 。这可能是您的问题的原因。只需使用 dip 像这样尝试，

```
 <Button
        android:id="@+id/btnButton3"
        android:layout_width="75dip"
        android:layout_height="50dip"
        android:layout_centerHorizontal="true"
        android:text="..."/> 
```

**编辑 1**

```
 <Button
        android:id="@+id/btnButton3"
        android:layout_width="75dip"
        android:layout_height="25dip"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="..."/> 
```

倾角密度独立像素。

这是输出，

![在此处输入图像描述](../Images/5901a8ebc6cc90cc39196d5999dcf31c.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T07:39:59.577

像这样使用`android:layout_centerInParent="true"`：

```
<Button
    android:id="@+id/btnButton3"
    android:layout_width="75px"
    android:layout_height="50px"
    android:layout_marginTop="10dp"
    android:layout_centerInParent="true"
    android:layout_alignParentBottom="true"
    android:text="..."/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T07:46:53.677

```
<Button
android:id="@+id/btnButton3"
android:layout_width="75px"
android:layout_height="50px"
android:layout_centerHorizontal="true"
android:gravity="center"
android:layout_gravity="center_vertical|center_horizontal"
android:text="..."/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T07:36:22.863

添加`android:layout_alignParentBottom="true"`为`"@+id/btnButton3"`

# spring - 在春季使用 jndi 和 WAS？

> ID：11608152
> 
> 赞同：3
> 
> 时间：2012-07-23T07:33:11.130
> 
> 标签：spring, websphere, datasource, jndi

我想在我的 Web 应用程序中使用服务器管理的连接池，现在我正在使用 JdbcTemplate 来获取连接。如何从 WebSphere 获取数据源并在我的应用程序中使用。
我用谷歌搜索但对 JndiTemplate 和 JdbcTemplate 感到困惑..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:38:00.830

可以在[Using Spring and Hibernate with WebSphere Application Server中找到一个很好的 Websphere + Spring 指南](http://www.ibm.com/developerworks/websphere/techjournal/0609_alcott/0609_alcott.html)

# java - JClouds RackspaceUK 不会启动服务器

> ID：11608153
> 
> 赞同：2
> 
> 时间：2012-07-23T07:33:14.520
> 
> 标签：java, rackspace-cloud, jclouds

我使用了来自 JClouds ( [http://www.jclouds.org/documentation/quickstart/rackspace/](http://www.jclouds.org/documentation/quickstart/rackspace/) ) 的 Rackspace 示例代码，如果我使用我的 Rackspace 美国帐户。一切正常。

但是，如果我使用 Rackspace UK 帐户并想创建/启动服务器（访问数据和 API 是正确的），它就不起作用。Rackspace US 中的相同代码运行良好。

我不知道为什么？标头有效，我可以获取所有图像、服务器，并且可以删除服务器。但是启动一个新服务器是不可能的...... JClouds 重试 5 次以创建/启动一个没有成功的服务器，然后我得到了这个 Stacktrace；

```
java.util.concurrent.ExecutionException: task submitted from the following trace
    at org.jclouds.concurrent.config.ExecutorServiceModule$DescribedFuture.ensureCauseHasSubmissionTrace(ExecutorServiceModule.java:272) ~[jclouds-core-1.4.2.jar:1.4.2]
    at org.jclouds.concurrent.config.ExecutorServiceModule$DescribedFuture.get(ExecutorServiceModule.java:256) ~[jclouds-core-1.4.2.jar:1.4.2]
    at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:69) ~[guava-11.0.2.jar:na]
    at com.google.common.util.concurrent.Futures$ChainingListenableFuture.get(Futures.java:661) ~[guava-11.0.2.jar:na]
    at org.jclouds.concurrent.ExceptionParsingListenableFuture.get(ExceptionParsingListenableFuture.java:76) ~[jclouds-core-1.4.2.jar:1.4.2]
    at org.jclouds.concurrent.internal.SyncProxy.invoke(SyncProxy.java:137) ~[jclouds-core-1.4.2.jar:1.4.2]
    at $Proxy133.createServer(Unknown Source) ~[na:na]
    at com.myproject.rackspace.RackspaceHandler.startServer(RackspaceHandler.java:43) ~[com.myproject.rackspace-2.0-SNAPSHOT.jar:na]
    at com.myproject.project.RackspaceFuture.get(RackspaceFuture.java:78) ~[RackspaceFuture.class:na]
    at com.myproject.project.Starter.startTransfer(Starter.java:63) ~[Starter.class:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_03]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_03]
    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64) ~[spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53) ~[spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_03]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351) [na:1.7.0_03]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178) [na:1.7.0_03]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) [na:1.7.0_03]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_03]
15:56:51.174 [i/o thread 0] WARN  o.j.h.h.BackoffLimitedRetryHandler - Cannot retry after server error, command has exceeded retry limit 5: [method=CloudServersAsyncClient.createServer, request=POST https://lon.servers.api.rackspacecloud.com/v1.0/XXXXXXXXXX/servers?format=json HTTP/1.1] 
```

## 编辑 21.08.2012

今天，我也尝试了 jclouds 版本 1.5.0-beta.10，但它不起作用。我有以下代码

```
 final ComputeServiceContext context = new ComputeServiceContextFactory().createContext("cloudservers-uk", "user", "API", ImmutableSet.of(new SshjSshClientModule(), new SLF4JLoggingModule())); 
    getClient(context).createServer("SERVER_NAME", IMAGE_ID, FLAVOUR_ID); 
    context.close(); 
    private CloudServersClient getClient(final ComputeServiceContext context)
    { 
        return CloudServersClient.class.cast(context.getProviderSpecificContext().getApi());
    } 
```

以及以下依赖项

```
<dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-compute</artifactId>
    <version>1.5.0-beta.10</version>
</dependency>
<dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-allcompute</artifactId>
    <version>1.5.0-beta.10</version>
</dependency>
<dependency>
    <groupId>org.jclouds.provider</groupId>
    <artifactId>rackspace-cloudservers-uk</artifactId>
    <version>1.5.0-beta.10</version>
</dependency> 
```

问题出在哪里？谢谢你的帮助

勒内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:15:19.167

为您的提供商尝试“rackspace-cloudservers-uk”。以这种方式创建服务器后，您可以在[https://mycloud.rackspace.co.uk的 Web 界面中看到它](https://mycloud.rackspace.co.uk)

如果您仍然遇到问题，您可能想查看我的博客文章，了解如何开始使用 jclouds（和 Rackspace）。

[http://blog.phymata.com/2012/08/15/getting-started-with-jclouds/](http://blog.phymata.com/2012/08/15/getting-started-with-jclouds/)

# xmlreader - xmlreader.Create 返回无

> ID：11608155
> 
> 赞同：3
> 
> 时间：2012-07-23T07:33:22.983
> 
> 标签：xmlreader

我正在尝试从 xml 字符串中读取但是，

```
 ` XmlReader reader=XmlReader.Create(new StringReader(stringXml)` 
```

读者总是没有。为什么没有读者反对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-09T13:24:00.750

您必须调用读取功能。阅读器.Read();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:32:11.383

这是您问题的[答案](http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/794e8dcf-4b09-481c-8742-af46673dd8b3/)。似乎没有问题，XmlReader 已经可以使用了。

实际上，如果您愿意使用 .NetFramework 3.5 及更高版本，您可以从使用 Linq To Xml 中受益：

```
 XElement x = XElement.Load(new StringReader(s)); 
```

# django - Django - form.is_valid 总是返回 true

> ID：11608156
> 
> 赞同：1
> 
> 时间：2012-07-23T07:33:25.980
> 
> 标签：django, django-forms

我有以下表格：

```
from django import forms

class ContactForm(forms.Form):
    name = forms.CharField()
    email = forms.EmailField()
    message = forms.CharField(widget=forms.Textarea) 
```

以及以下观点：

```
def contact(request):
    from forms import ContactForm
    from django.contrib import messages

    if request.method == 'POST':
        form = ContactForm(request.POST)

        if form.is_valid:
            messages.success(request, 'Thank you for your feedback!')
        else:
            messages.error(request, 'Please correct the fields in red below.')

    else:
        form = ContactForm()

    t = loader.get_template('contact.html')
    c = RequestContext(request, {
        'ContactForm': form,
    })

    return HttpResponse(t.render(c)) 
```

我使用的是 Django 1.4，根据文档，默认情况下这些字段是必需的，因此我不需要`required=True`为每个字段添加。

出于某种原因，`form.is_valid`总是如此。当我提交表单时，该`Thank you for your feedback!`消息总是出现，即使`form.name/email/message.errors`填充了错误！我也尝试过`required=True`为每个字段显式设置，但没有任何区别。

这就是我显示消息的方式`contact.html`：

```
{% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
{% endfor %} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:36:19.947

代替

```
if form.is_valid: 
```

到

```
if form.is_valid(): 
```

# php - 将数据从php导出到excel

> ID：11608160
> 
> 赞同：15
> 
> 时间：2012-07-23T07:33:58.907
> 
> 标签：php, export-to-excel

我需要将数据从 php（从 mysql 数据库检索的数据）导出到 excel。我正在使用 Zend 框架。在导出到 Excel 之前，我需要对我的数据进行一些更改。实际上，我真正需要的是生成每月现金簿。

我已经阅读了很多文件，但最终一团糟。我真的不明白我应该如何开始。我真的需要梨吗？我需要下载任何类库吗？难道没有一种简单的方法可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-23T07:39:45.573

我建议你使用很棒的`PHPExcel`图书馆。它真的很强大，支持多种格式，可以进行可视化格式化并且易于使用。

你可以在他们的网页上找到更多关于它的信息： ~~[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)~~.~~（`PHPExcel`已移至[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)）~~

## 2019：

`PHPExcel`现在已被[PhpSpreadsheet GitHub](https://github.com/PHPOffice/PhpSpreadsheet)取代 。

使用示例：

```
 $objPHPExcel = new PHPExcel();
    /** You can set many properties */
    $objPHPExcel->getProperties()->setCreator("My company")
                 ->setLastModifiedBy("John Doe")
                 ->setTitle("Annual report")
                 ->setSubject("Sales")
                 ->setDescription("Annual sales report by John Doe")
                 ->setCategory("Finance");

    /** Choose one of sheets */
    $activeSheet = $objPHPExcel->setActiveSheetIndex(0);
    /** Simply set value of cell */
    $activeSheet->setCellValue("A1", 'plural'); 
```

当然，您可以做更多事情，阅读 excel 文件、设置视觉样式、创建绘图、表达式等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-14T21:09:18.153

我写了一份 94 行的库存差异报告，其中我从 MySQL 中获取数据（每个表 6k+ 条记录），从从多个表中提取的 MySQL 数据创建一个多维数组，然后将所有内容转储到一个字符串中，从而生成一个 .xls：

```
<?php
////////////////////////////////// BEGIN SETUP
    $filename ="document_name.xls";
    header('Content-type: application/ms-excel');
    header('Content-Disposition: attachment; filename='.$filename);
////////////////////////////////// END SETUP
////////////////////////////////// BEGIN GATHER
    // Your MySQL queries, fopens, et cetera go here.
    // Cells are delimited by \t
    // \n is just like you might expect; new line/row below
    // E.G:
    $stuff="PART\tQTY\tVALUE\t\n";
    $stuff=$stuff."01-001-0001\t37\t28.76\t\n";
    $stuff=$stuff."01-001-0002\t6\t347.06\t\n";
    $stuff=$stuff."01-001-0003\t12\t7.11\t\n";
////////////////////////////////// END GATHER
// The point is to get all of your data into one string and then:
////////////////////////////////// BEGIN DUMP
    echo $stuff;
////////////////////////////////// END DUMP
?> 
```

无需扩展。

唯一需要注意的是，我还没有弄清楚如何在没有 Excel 告诉我数据可能已损坏的情况下吐出 .xls - 而且我没有尝试进行任何格式化或任何比简单地“导出”数据更复杂的事情. 当然，文件/数据很好，但它确实会从 Excel 生成警告。

编辑：我应该注意“设置”和“转储”来自以下内容：[daniweb.com](http://www.daniweb.com/web-development/php/threads/124300/how-to-php-export-to-excel#post607272)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T07:48:13.133

您可以使用[phpexcel](http://phpexcel.codeplex.com/)库。它允许您写入和读取不同的电子表格文件格式

对于与 zend 的集成，您可以从以下[链接](https://stackoverflow.com/questions/4742706/phpexcel-integration-into-zend-framework)获取帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T07:38:16.213

您可以使用 CSV 为 excel 创建可导入格式。这是最简单的方法。

CSV 看起来像这样：

```
"my first cellcontent", "my second cell content", "my third cell content"
"second line, first cell content", "etc", "etc 
```

每行代表一个 Excel 行，您将单元格内容放在双引号之间，并用逗号分隔。请注意，`\r\n`如果您的数据中有一些内容，它可能会破坏您的 CSV 并创建不需要的新行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-23T07:49:04.023

用一点谷歌你会发现这个：[http ://www.the-art-of-web.com/php/dataexport/](http://www.the-art-of-web.com/php/dataexport/)

准备数据

```
$data = array(
    array( "firstname" => "Mary", "lastname" => "Johnson", "age" => 25 ),
    array( "firstname" => "Amanda", "lastname" => "Miller", "age" => 18 ),
    array( "firstname" => "James", "lastname" => "Brown", "age" => 31 ),
    array( "firstname" => "Patricia", "lastname" => "Williams", "age" => 7 ),
    array( "firstname" => "Michael", "lastname" => "Davis", "age" => 43 ),
    array( "firstname" => "Sarah", "lastname" => "Miller", "age" => 24 ),
    array( "firstname" => "Patrick", "lastname" => "Miller", "age" => 27 )
); 
```

第一步是以制表符分隔的格式输出数据（也可以使用 CSV，但稍微复杂一些）。为此，我们使用以下代码：

```
<?php
    header("Content-Type: text/plain");

    $flag = false;
    foreach( $data as $row ) {
        if( !$flag ) {
        // display field/column names as first row
        echo implode( "\t", array_keys( $row ) ) . "\r\n";
        $flag = true;
    }
    echo implode( "\t", array_values( $row ) ) . "\r\n";
}
exit;

?> 
```

我们将内容类型设置为 text/plain，以便可以更轻松地在浏览器中查看输出。否则，由于没有 HTML 格式，输出将显示为单行文本。

输出的第一行将是列标题（在这种情况下使用字段名称）。值用制表符 \t 分隔，行用换行符 \n 分隔。输出应如下所示：

```
firstname  lastname  age
Mary Johnson 25 
Amanda Miller 18 
James Brown 31 
Patricia    Williams     7 
Michael Davis 43 
Sarah Miller 24 
Patrick Miller 27 
```

这段代码中已经存在一个可能不会立即明显的弱点。如果要输出的字段之一已经包含一个或多个制表符，或者更糟的是一个换行符怎么办？由于我们依靠这些字符来指示列和换行符，这将把整个过程抛在脑后。

解决方案是“转义”制表符。在这种情况下，我们将用文字 \t 替换制表符，用文字 \n 替换换行符，这样它们就不会影响格式：

```
<?php
    function cleanData( &$str ) {
        $str = preg_replace( "/\t/", "\\t", $str );
        $str = preg_replace("/\r?\n/", "\\n", $str);
    }

    header("Content-Type: text/plain");
    $flag = false;
    foreach( $data as $row ) {
        if( !$flag ) {
            // display field/column names as first row
            echo implode( "\t", array_keys( $row ) ) . "\r\n";
            $flag = true;
        }
        array_walk( $row, 'cleanData' );
        echo implode( "\t", array_values( $row ) ) . "\r\n";
    }
    exit;

?> 
```

现在，在回显每一行之前，任何制表符都被替换为“\t”，这样我们的列就不会被打断。此外，数据中的任何换行符都将替换为“\n”。

# c# - 需要在asp.net c#中为每个患者动态创建pdf文件

> ID：11608163
> 
> 赞同：2
> 
> 时间：2012-07-23T07:34:20.080
> 
> 标签：c#, asp.net, pdf-generation

我需要为每 n 名患者一起创建单独的 pdf 文件。因此，如果有人在 gridview 中选择该患者，则应打开该患者的 pdf。请有人告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:39:09.163

使用[iTextSharp](http://nuget.org/packages/iTextSharp) DLL，帮助您轻松创建 PDF 文件

这是文章和演示：[使用 iTextSharp 创建 PDF 文档](http://www.codeproject.com/Articles/277065/Creating-PDF-documents-with-iTextSharp)

另一个很好的例子：[在 ASP.Net 4.0 和 MemoryMappedFile 中使用 iTextSharp 创建 PDF 文档](http://weblogs.asp.net/sreejukg/archive/2011/03/07/create-pdf-document-using-itextsharp-in-asp-net-4-0-and-memorymappedfile.aspx)

# r - 将多个值列重塑为宽格式

> ID：11608167
> 
> 赞同：31
> 
> 时间：2012-07-23T07:34:54.340
> 
> 标签：r, reshape, r-faq

我有以下数据框，我想使用 cast 创建一个“数据透视表”，其中包含两个值（值和百分比）的列。这是数据框：

```
expensesByMonth <- structure(list(month = c("2012-02-01", "2012-02-01", "2012-02-01", 
"2012-02-01", "2012-02-01", "2012-02-01", "2012-02-01", "2012-02-01", 
"2012-02-01", "2012-02-01", "2012-02-01", "2012-02-01", "2012-03-01", 
"2012-03-01", "2012-03-01", "2012-03-01", "2012-03-01", "2012-03-01", 
"2012-03-01", "2012-03-01", "2012-03-01", "2012-03-01", "2012-03-01", 
"2012-03-01", "2012-03-01", "2012-03-01", "2012-03-01", "2012-04-01", 
"2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", 
"2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", 
"2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", "2012-04-01", 
"2012-04-01", "2012-04-01", "2012-05-01", "2012-05-01", "2012-05-01", 
"2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", 
"2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", 
"2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", "2012-05-01", 
"2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", 
"2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", 
"2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", 
"2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", "2012-06-01", 
"2012-07-01", "2012-07-01", "2012-07-01", "2012-07-01", "2012-07-01", 
"2012-07-01", "2012-07-01", "2012-07-01", "2012-07-01", "2012-07-01", 
"2012-07-01", "2012-07-01", "2012-07-01"), 
expense_type = c("Adjustment", "Bank Service Charge", "Cable", "Clubbing", "Dining", "Education", 
"Gifts", "Groceries", "Lunch", "Personal Care", "Rent", "Transportation", 
"Adjustment", "Bank Service Charge", "Cable", "Clubbing", "Dining", 
"Gifts", "Groceries", "Lunch", "Medical Expenses", "Miscellaneous", 
"Personal Care", "Phone", "Recreation", "Rent", "Transportation", 
"Adjustment", "Bank Service Charge", "Clothes", "Clubbing", "Computer", 
"Dining", "Gifts", "Groceries", "Lunch", "Maintenance", "Medical Expenses", 
"Miscellaneous", "Personal Care", "Phone", "Recreation", "Rent", 
"Transportation", "Travel", "Bank Service Charge", "Cable", "Clothes", 
"Clubbing", "Computer", "Dining", "Electric", "Gifts", "Groceries", 
"Lunch", "Maintenance", "Medical Expenses", "Miscellaneous", 
"Personal Care", "Phone", "Recreation", "Rent", "Transportation", 
"Adjustment", "Bank Service Charge", "Cable", "Charity", "Clothes", 
"Computer", "Dining", "Education", "Electric", "Gifts", "Groceries", 
"Lunch", "Maintenance", "Medical Expenses", "Miscellaneous", 
"Personal Care", "Phone", "Recreation", "Rent", "Transportation", 
"Computer", "Gifts", "Groceries", "Lunch", "Maintenance", "Medical Expenses", 
"Miscellaneous", "Personal Care", "Phone", "Recreation", "Rent", 
"Repair and Maintenance", "Transportation"), 
value = c(442.37, 200, 21.33, 75, 22.5, 1800, 10, 233.33, 154.75, 30, 545, 32.5, 
2, 200, 36.33, 206.55, 74.5, 89, 372.68, 383.75, 144.19, 508.11, 
30, 38.4, 81.75, 1746.7, 35, 16.37, 200, 806.9, 324.81, 756, 
80.5, 100, 398.37, 326.25, 151, 29.95, 101, 90, 38.45, 61, 743.75, 
129, 228.53, 200, 39.05, 237, 40, 283.83, 141.32, 32.88, 30, 
424.4, 412, 142.75, 86.55, 1051.5, 30, 38.9, 51.5, 749.7, 35, 
10, 200, 16, 32.59, 149.81, 100, 80, 60, 31.91, 55, 397.25, 486.4, 
115.6, 47.08, 1000, 120, 41.11, 256, 761.6, 55, 10.54, 10, 342.11, 
291, 76.5, 66.8, 1008, 30, 41.11, 316, 765, 65, 62), 
percent = c(0.124025030980324, 0.0560729845967511, 0.00598018380724351, 0.0210273692237817, 
0.0063082107671345, 0.50465686137076, 0.00280364922983756, 0.0654175474797997, 
0.0433864718317362, 0.00841094768951267, 0.152798883026147, 0.00911185999697206, 
0.000506462461002391, 0.0506462461002391, 0.00919989060410842, 
0.0523049106600219, 0.018865726672339, 0.0225375795146064, 0.0943742149831854, 
0.0971774847048337, 0.0365134111259673, 0.128669320529962, 0.00759693691503586, 
0.0097240792512459, 0.0207016530934727, 0.442318990316438, 0.00886309306754183, 
0.00357276925628781, 0.0436502047194601, 0.176106750940662, 0.0708901149746392, 
0.164997773839559, 0.0175692073995827, 0.0218251023597301, 0.0869446602704567, 
0.0712043964486193, 0.0329559045631924, 0.00653661815673915, 
0.0220433533833274, 0.0196425921237571, 0.00839175185731621, 
0.0133133124394353, 0.162324198800492, 0.0281543820440518, 0.0498769064226911, 
0.0496724104530621, 0.00969853814096037, 0.0588618063868785, 
0.00993448209061241, 0.070492601294463, 0.0350985252261336, 0.0081661442784834, 
0.00745086156795931, 0.105404854981398, 0.102325165533308, 0.035453682960873, 
0.0214957356235626, 0.261152697956974, 0.00745086156795931, 0.00966128383312057, 
0.0127906456916635, 0.186197030583303, 0.00869267182928586, 0.00249044292527426, 
0.0498088585054852, 0.00398470868043882, 0.00811635349346881, 
0.0373093254635337, 0.0249044292527426, 0.0199235434021941, 0.0149426575516456, 
0.00794700337455016, 0.0136974360890084, 0.09893284520652, 0.12113514388534, 
0.0287895202161704, 0.0117250052921912, 0.249044292527426, 0.0298853151032911, 
0.0102382108658025, 0.0637553388870211, 0.189672133188888, 0.0136974360890084, 
0.00341757293956667, 0.0032424790697976, 0.110928451456846, 0.0943561409311103, 
0.0248049648839517, 0.021659760186248, 0.326841890235599, 0.00972743720939281, 
0.013329831455938, 0.102462338605604, 0.248049648839517, 0.0210761139536844, 
0.0201033702327451)), 
.Names = c("month", "expense_type", "value", "percent"), 
row.names = c(NA, -96L), 
class = "data.frame"
) 
```

这就是我想要创建的（当然，使用不同的标题名称，例如：[month]_value、[month]_percent）：

```
expenses   value     percent value.1   percent.1 value.2   percent.2 value.3   percent.3 value.4   percent.4 value.5   percent.5
1              Adjustment  442.37 0.124025031    2.00 0.000506462   16.37 0.003572769    0.00 0.000000000   10.00 0.002490443    0.00 0.000000000
2     Bank Service Charge  200.00 0.056072985  200.00 0.050646246  200.00 0.043650205  200.00 0.049672410  200.00 0.049808859    0.00 0.000000000
3                   Cable   21.33 0.005980184   36.33 0.009199891    0.00 0.000000000   39.05 0.009698538   16.00 0.003984709    0.00 0.000000000
4                 Charity    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000   32.59 0.008116353    0.00 0.000000000
5                 Clothes    0.00 0.000000000    0.00 0.000000000  806.90 0.176106751  237.00 0.058861806  149.81 0.037309325    0.00 0.000000000
6                Clubbing   75.00 0.021027369  206.55 0.052304911  324.81 0.070890115   40.00 0.009934482    0.00 0.000000000    0.00 0.000000000
7                Computer    0.00 0.000000000    0.00 0.000000000  756.00 0.164997774  283.83 0.070492601  100.00 0.024904429   10.54 0.003417573
8                  Dining   22.50 0.006308211   74.50 0.018865727   80.50 0.017569207  141.32 0.035098525   80.00 0.019923543    0.00 0.000000000
9               Education 1800.00 0.504656861    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000   60.00 0.014942658    0.00 0.000000000
10               Electric    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000   32.88 0.008166144   31.91 0.007947003    0.00 0.000000000
11                  Gifts   10.00 0.002803649   89.00 0.022537580  100.00 0.021825102   30.00 0.007450862   55.00 0.013697436   10.00 0.003242479
12              Groceries  233.33 0.065417547  372.68 0.094374215  398.37 0.086944660  424.40 0.105404855  397.25 0.098932845  342.11 0.110928451
13                  Lunch  154.75 0.043386472  383.75 0.097177485  326.25 0.071204396  412.00 0.102325166  486.40 0.121135144  291.00 0.094356141
14            Maintenance    0.00 0.000000000    0.00 0.000000000  151.00 0.032955905  142.75 0.035453683  115.60 0.028789520   76.50 0.024804965
15       Medical Expenses    0.00 0.000000000  144.19 0.036513411   29.95 0.006536618   86.55 0.021495736   47.08 0.011725005   66.80 0.021659760
16          Miscellaneous    0.00 0.000000000  508.11 0.128669321  101.00 0.022043353 1051.50 0.261152698 1000.00 0.249044293 1008.00 0.326841890
17          Personal Care   30.00 0.008410948   30.00 0.007596937   90.00 0.019642592   30.00 0.007450862  120.00 0.029885315   30.00 0.009727437
18                  Phone    0.00 0.000000000   38.40 0.009724079   38.45 0.008391752   38.90 0.009661284   41.11 0.010238211   41.11 0.013329831
19             Recreation    0.00 0.000000000   81.75 0.020701653   61.00 0.013313312   51.50 0.012790646  256.00 0.063755339  316.00 0.102462339
20                   Rent  545.00 0.152798883 1746.70 0.442318990  743.75 0.162324199  749.70 0.186197031  761.60 0.189672133  765.00 0.248049649
21 Repair and Maintenance    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000   65.00 0.021076114
22         Transportation   32.50 0.009111860   35.00 0.008863093  129.00 0.028154382   35.00 0.008692672   55.00 0.013697436   62.00 0.020103370
23                 Travel    0.00 0.000000000    0.00 0.000000000  228.53 0.049876906    0.00 0.000000000    0.00 0.000000000    0.00 0.000000000 
```

我在单个值列上使用强制转换时也遇到了以下错误：它没有考虑“值”参数。所以，即使我指定 value = "percent" 它仍然显示来自 "value" 列的值。

```
cast(expensesByMonth, expense_type ~ month, fun.aggregate = sum, value = "percent") 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-23T08:01:19.393

您最好的选择是将数据重塑为长格式，使用`melt`，然后`dcast`：

```
library(reshape2)

meltExpensesByMonth <- melt(expensesByMonth, id.vars=1:2)
dcast(meltExpensesByMonth, expense_type ~ month + variable, fun.aggregate = sum) 
```

前几行输出：

```
 expense_type 2012-02-01_value 2012-02-01_percent 2012-03-01_value 2012-03-01_percent
1              Adjustment           442.37        0.124025031             2.00       0.0005064625
2     Bank Service Charge           200.00        0.056072985           200.00       0.0506462461
3                   Cable            21.33        0.005980184            36.33       0.0091998906
4                 Charity             0.00        0.000000000             0.00       0.0000000000 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-05-28T21:37:54.217

[data.table](/questions/tagged/data.table "显示标记为“data.table”的问题")可以对多个`value.var`变量进行强制转换。这是非常直接的（和有效的）。

所以：

```
library(data.table) # v1.9.5+
dcast(setDT(expensesByMonth), expense_type ~ month, value.var = c("value", "percent")) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-20T14:42:01.983

`pivot_wider()`使用tidyr 1.0.0 中引入的新功能，现在可以使用多个值/度量列从长格式重塑为宽格式。

这优于之前的 tidyr 策略`gather()`than `spread()`，因为不再删除属性（例如，日期仍然是日期，字符串仍然是字符串）。

`pivot_wider()`(counterpart: `pivot_longer()`) 与`spread()`. 但是，它提供了额外的功能，例如多值列。为此，参数`values_from`——指示取自哪一列的值——可能采用多个列名。

`NA`s 可以使用参数来填充`values_fill`。

```
library("tidyr")
library("magrittr")

pivot_wider(expensesByMonth, 
            id_cols = expense_type,
            names_from = month,
            values_from = c(value, percent))
#> # A tibble: 23 x 13
#>    expense_type `value_2012-02-~ `value_2012-03-~ `value_2012-04-~
#>    <chr>                   <dbl>            <dbl>            <dbl>
#>  1 Adjustment              442\.               2               16.4
#>  2 Bank Servic~            200              200              200  
#>  3 Cable                    21.3             36.3             NA  
#>  4 Clubbing                 75              207\.             325\. 
#>  5 Dining                   22.5             74.5             80.5
#>  6 Education              1800               NA               NA  
#>  7 Gifts                    10               89              100  
#>  8 Groceries               233\.             373\.             398\. 
#>  9 Lunch                   155\.             384\.             326\. 
#> 10 Personal Ca~             30               30               90  
#> # ... with 13 more rows, and 9 more variables: `value_2012-05-01` <dbl>,
#> #   `value_2012-06-01` <dbl>, `value_2012-07-01` <dbl>,
#> #   `percent_2012-02-01` <dbl>, `percent_2012-03-01` <dbl>,
#> #   `percent_2012-04-01` <dbl>, `percent_2012-05-01` <dbl>,
#> #   `percent_2012-06-01` <dbl>, `percent_2012-07-01` <dbl> 
```

或者，可以使用提供更精细控制的*枢轴规范*来完成重塑（参见下面的链接）：

```
# see also ?build_wider_spec
spec <- expensesByMonth %>%
    expand(month, .value = c("percent", "value")) %>%
    dplyr::mutate(.name = paste(.$month, .$.value, sep = "_"))
pivot_wider_spec(expensesByMonth, spec = spec) 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 3 月 26 日创建)

另见：[https ://tidyr.tidyverse.org/dev/articles/pivot.html](https://tidyr.tidyverse.org/dev/articles/pivot.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-02-04T13:26:45.833

由于这个问题经常被访问，我认为它也应该得到一个完整的基本 R 答案。来自基础 R的`reshape`-function 非常通用，也可以很容易地应用于这个问题：

```
expenses <- reshape(expensesByMonth, idvar = 'expense_type', direction = 'wide',
                    timevar = 'month', sep = '_') 
```

带有`NA`-values 的单元格可以替换`0`为：

```
expenses[is.na(expenses)] <- 0 
```

它给出（排序`expense_type`以使其更容易与所需的输出进行比较）：

> ```
> > expenses[order(expenses$expense_type),]
>              expense_type value_2012-02-01 percent_2012-02-01 value_2012-03-01 percent_2012-03-01 value_2012-04-01 percent_2012-04-01 value_2012-05-01 percent_2012-05-01 value_2012-06-01 percent_2012-06-01 value_2012-07-01 percent_2012-07-01
> 1              Adjustment           442.37        0.124025031             2.00       0.0005064625            16.37        0.003572769             0.00        0.000000000            10.00        0.002490443             0.00        0.000000000
> 2     Bank Service Charge           200.00        0.056072985           200.00       0.0506462461           200.00        0.043650205           200.00        0.049672410           200.00        0.049808859             0.00        0.000000000
> 3                   Cable            21.33        0.005980184            36.33       0.0091998906             0.00        0.000000000            39.05        0.009698538            16.00        0.003984709             0.00        0.000000000
> 67                Charity             0.00        0.000000000             0.00       0.0000000000             0.00        0.000000000             0.00        0.000000000            32.59        0.008116353             0.00        0.000000000
> 30                Clothes             0.00        0.000000000             0.00       0.0000000000           806.90        0.176106751           237.00        0.058861806           149.81        0.037309325             0.00        0.000000000
> 4                Clubbing            75.00        0.021027369           206.55       0.0523049107           324.81        0.070890115            40.00        0.009934482             0.00        0.000000000             0.00        0.000000000
> 32               Computer             0.00        0.000000000             0.00       0.0000000000           756.00        0.164997774           283.83        0.070492601           100.00        0.024904429            10.54        0.003417573
> 5                  Dining            22.50        0.006308211            74.50       0.0188657267            80.50        0.017569207           141.32        0.035098525            80.00        0.019923543             0.00        0.000000000
> 6               Education          1800.00        0.504656861             0.00       0.0000000000             0.00        0.000000000             0.00        0.000000000            60.00        0.014942658             0.00        0.000000000
> 52               Electric             0.00        0.000000000             0.00       0.0000000000             0.00        0.000000000            32.88        0.008166144            31.91        0.007947003             0.00        0.000000000
> 7                   Gifts            10.00        0.002803649            89.00       0.0225375795           100.00        0.021825102            30.00        0.007450862            55.00        0.013697436            10.00        0.003242479
> 8               Groceries           233.33        0.065417547           372.68       0.0943742150           398.37        0.086944660           424.40        0.105404855           397.25        0.098932845           342.11        0.110928451
> 9                   Lunch           154.75        0.043386472           383.75       0.0971774847           326.25        0.071204396           412.00        0.102325166           486.40        0.121135144           291.00        0.094356141
> 37            Maintenance             0.00        0.000000000             0.00       0.0000000000           151.00        0.032955905           142.75        0.035453683           115.60        0.028789520            76.50        0.024804965
> 21       Medical Expenses             0.00        0.000000000           144.19       0.0365134111            29.95        0.006536618            86.55        0.021495736            47.08        0.011725005            66.80        0.021659760
> 22          Miscellaneous             0.00        0.000000000           508.11       0.1286693205           101.00        0.022043353          1051.50        0.261152698          1000.00        0.249044293          1008.00        0.326841890
> 10          Personal Care            30.00        0.008410948            30.00       0.0075969369            90.00        0.019642592            30.00        0.007450862           120.00        0.029885315            30.00        0.009727437
> 24                  Phone             0.00        0.000000000            38.40       0.0097240793            38.45        0.008391752            38.90        0.009661284            41.11        0.010238211            41.11        0.013329831
> 25             Recreation             0.00        0.000000000            81.75       0.0207016531            61.00        0.013313312            51.50        0.012790646           256.00        0.063755339           316.00        0.102462339
> 11                   Rent           545.00        0.152798883          1746.70       0.4423189903           743.75        0.162324199           749.70        0.186197031           761.60        0.189672133           765.00        0.248049649
> 95 Repair and Maintenance             0.00        0.000000000             0.00       0.0000000000             0.00        0.000000000             0.00        0.000000000             0.00        0.000000000            65.00        0.021076114
> 12         Transportation            32.50        0.009111860            35.00       0.0088630931           129.00        0.028154382            35.00        0.008692672            55.00        0.013697436            62.00        0.020103370
> 45                 Travel             0.00        0.000000000             0.00       0.0000000000           228.53        0.049876906             0.00        0.000000000             0.00        0.000000000             0.00        0.000000000 
> ```

* * *

您还可以通过以下方式实现此目的`tidyverse`：

```
library(dplyr)
library(tidyr)

expensesByMonth %>% 
  gather(k, v, 3:4) %>% 
  unite(km, k, month) %>% 
  spread(km, v, fill = 0) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-23T08:27:36.253

我更喜欢`tabulate`包中的功能`tables`。它需要因素，但这对于您拥有的数据类型来说无论如何都是一个好主意。

```
library(tables)
expensesByMonth$month= as.factor(expensesByMonth$month)
expensesByMonth$expense_type= as.factor(expensesByMonth$expense_type)
tabular(expense_type~(month)*(value+percent)*(sum),data=expensesByMonth)
# Optional formatting
tabular(expense_type~month*
   ((Format(digits=1))*value+(Format(digits=3))*percent)*sum,
   data=expensesByMonth) 
```

部分输出：

```
 value      percent  value      percent  value      percent 
expense_type           sum        sum      sum        sum      sum        sum     
Adjustment              442       0.124025    2       0.000506   16       0.003573
Bank Service Charge     200       0.056073  200       0.050646  200       0.043650
Cable                    21       0.005980   36       0.009200    0       0.000000 
```

# iphone - 使用 iPhone 识别 20-24 Hz 范围内的声音频率

> ID：11608171
> 
> 赞同：3
> 
> 时间：2012-07-23T07:35:15.203
> 
> 标签：iphone, ios, audio, signal-processing, frequency

我的老板希望我开发一个应用程序，使用 iPhone 识别人类听不到的 20-24 Hz 的声音频率。（iPhone 频率响应：20 Hz 至 20 kHz）

这可能吗？如果是的话，有人可以给我一些建议吗？从哪儿开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:47:33.337

在开始处理此问题之前，您需要确保 iPhone 硬件在物理上能够检测到如此低的频率。大多数麦克风在低频下的灵敏度非常差，而消费类模拟输入级通常具有高通滤波器，可将低于 ~ 30 Hz 的频率衰减。您需要尝试使用 iPhone 上现有的音频捕获应用程序捕获一些包含感兴趣信号的测试声音，并查看是否记录了低频分量。如果不是，那么您的应用程序将无法启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:58:11.313

您正在寻找的是快速傅立叶变换。这是用于将基于时间的信号转换为基于频率的信号的主要算法。

似乎 Accelerate 框架有一些 FFT 支持，所以我开始看一下，已经有几篇关于它的帖子。

Apple 有一些示例 openCL 代码可以在 Mac 上执行此操作，但 AFAIK openCL 尚未在 iOS 上。

您还想检查麦克风的频率响应（我认为有一些应用程序可以通过麦克风进行示波器显示，这会有所帮助）。

你的基本方法是从麦克风中取出一大块声音。过滤它，然后可能会降低它的频率，这取决于你需要用它做什么。

# android - StrictModeBuilder permitAll 不起作用

> ID：11608173
> 
> 赞同：4
> 
> 时间：2012-07-23T07:35:25.110
> 
> 标签：android, android-strictmode

我确实有一个旧应用程序拒绝在 Android 4.1 设备上运行。跳到这里的是 NetworkOnMainThreadException。

所以我试图通过以下步骤来允许这一点 - 但这些不起作用。我用 4.1 模拟器测试过。解决该错误真正需要的是-应用程序重写是没有选择的。目前我从我的应用程序中排除 4.1 设备。

一个类文件...

```
public class StrictModeWrapper {

    static {
        try {
            Class.forName("android.os.StrictMode");
        } catch (Exception exception) {
            throw new RuntimeException(exception);
        }
    }

    public static void checkAvailable() {
    }

    @SuppressLint("NewApi")
    public static void setThreadPolicy() {
        StrictMode.ThreadPolicy strictModeThreadPolicy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(strictModeThreadPolicy);
    }
} 
```

...在扩展的应用程序类中调用：

```
public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();

        try {
            StrictModeWrapper.checkAvailable();
            StrictModeWrapper.setThreadPolicy();
            } catch (Throwable throwable) {
        }
    }
} 
```

扩展的 Application 类在 Manifest 中注册并且正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:54:28.157

自 api 11 以来似乎没有任何变化`StrictMode`。一定是您使用的其他一些 android 类中的更改导致了 StrictMode 策略违规。

Android文档本身说

> “但不要觉得有必要修复 StrictMode 发现的所有内容。”

但既然它是一个`NetworkOnMainThreadException`你必须做一个彻底的检查。查看您的应用程序中的所有网络通信，并确保它们没有阻塞您的主线程。

并确保删除/禁用`StrictMode`发布版本中的代码，因为它只是用于识别意外错误的开发人员工具。

## 更新：

您的应用程序崩溃了，因为：

*   您没有在发布版本中阻止执行 StrictMode 策略设置代码。它应该只在测试时执行。
*   类中的某些更改`StrictMode`导致严格模式策略在`onCreate`.

我有 2 个问题：

1.  崩溃是否表明 StrictMode 策略正在运行？存在违反政策的行为，因此崩溃了。
2.  这是否表明您的应用程序中有一些网络代码阻塞了主线程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:35:49.780

StrictMode 在 Android 版本 >= 16 上的行为与之前的版本不同。文档建议在扩展应用程序、活动等的 onCreate() 中发出 StrictMode 调用。至少扩展应用程序中的 onCreate() 工作方式不同，并证明文档错误（截至今天）。

这是描述如何将 StrictMode 调用添加到扩展应用程序的 StrictMode 文档（从今天开始是错误的）：

[严格模式](http://developer.android.com/reference/android/os/StrictMode.html)

这是一个描述问题并提供解决方法的 Google 代码问题：

[谷歌代码问题 35298](http://code.google.com/p/android/issues/detail?id=35298)

# drop-down-menu - 下拉列表复选框

> ID：11608176
> 
> 赞同：0
> 
> 时间：2012-07-23T07:35:42.917
> 
> 标签：drop-down-menu, checkbox, for-loop

我`drodownlist`从 Db 绑定，如下所示：

```
ddlTemplates.DataSource = ObjBlTemplate.DsGetTemplate;

ddlTemplates.DataTextField = "templateTitle";

ddlTemplates.DataValueField = "templateID";

ddlTemplates.DataBind(); 
```

我需要为每个字段显示复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:00:20.200

在 asp.net 中，您没有任何内置函数来执行此操作。如果您想`javascript`与您的 asp.net 代码[链接](http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=63)一起使用， 这里有一个关于此的示例。

# python - 如何发送数组作为参数？

> ID：11608180
> 
> 赞同：0
> 
> 时间：2012-07-23T07:36:08.217
> 
> 标签：python

我想使用子进程打开一个应用程序。但是参数的数量不是固定的。解决这个问题的最佳方法是什么？

```
subprocess.call( "path/to/app", arg[0], arg[1], arg... ) 
```

最小 arg[] 为 1，但它可以变大为 10 或 20。在这种情况下，将它们发送到 aubprocess 参数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:39:25.683

你可能想做

```
subprocess.call(["path/to/app"] + arg) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:43:37.953

只有一个参数，它是一个列表：

```
>>> subprocess.call(["ls", "-l"])
0 
```

直接取自[http://docs.python.org/library/subprocess.html#subprocess.call的示例](http://docs.python.org/library/subprocess.html#subprocess.call)

你应该这样做`subprocess.call(["path/to/app", arg[0], arg[1], arg... ])`，例如：

```
subprocess.call(["path/to/app"]+arg) 
```

# dart - Dart HTML5 画布库？

> ID：11608195
> 
> 赞同：8
> 
> 时间：2012-07-23T07:37:24.243
> 
> 标签：dart

我想知道是否有像 Fabric.js 这样的 DART 的 Canvas 外部库？如果它不存在，是否有一个项目可以制作？因为我正在考虑开始这个项目，但我更愿意加入 GIT 上的现有项目。或者也许在 DART 中集成了一些我不知道的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T12:40:26.940

我没有使用过 Fabric.js，但是在查看了网站之后，我会向您指出下面列出的项目。这两个项目都不是您正在寻找的，但应该给您一个起点。

2D（Flash 对象模型） - 项目更改为 StageXL [https://github.com/bp74/StageXL](https://github.com/bp74/StageXL)

WebGL [https://github.com/johnmccutchan/spectre](https://github.com/johnmccutchan/spectre)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:53:03.180

我不知道 Dart 有任何严肃的 Canvas 抽象库，但也许这两个项目可以为创建一个提供良好的灵感基础。

1.  [拖放方法](https://github.com/financeCoding/DragDrawSquaresCanvas2D)
2.  [动画方法](https://github.com/Fiveisprime/Dart-Animation)

# mysql - MySQL查找给定子类别的超类别

> ID：11608196
> 
> 赞同：2
> 
> 时间：2012-07-23T07:37:27.020
> 
> 标签：mysql, sql

我有一个由某人创建的数据库用于开发。在那个数据库中，我有一个这样的表。这是一种模式，如果 parentID 为 0，则这些是超类别。

## catID cateName parentID

1 一个 0

2 乙 0

3 AA 1

4 BB 2

5 AAA 3

6 血脑屏障 4

导航时，我可以得到 A-> AA-> AAA

'AAA' 的上一级是'AA'，'AA' 的上一级是'A'。所以乍一看'AAA'的超级类别是'A'。我想获得任何子类别的超类别（其父类别为“0”）。此子类别流可以是无限的。感谢是否有人可以帮助我构建一个 mySQL 查询以获得给定子类别的超类别。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:50:34.720

据我所知，如果数据以这种格式存储，因为 MySQL 不支持递归查询，因此无法使用单个查询在 MySQL 中为第 n 级的子级获取根父级。

访问[http://scvinodkumar.wordpress.com/2011/01/30/managing-hierarchical-data-in-mysql/](http://scvinodkumar.wordpress.com/2011/01/30/managing-hierarchical-data-in-mysql/)

[有一个类似的讨论](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree)可能有助于解决这个问题。

# oracle - 如何在动态 sql (ORACLE PLSQL) 中获取局部临时变量中的计数 (*) 值

> ID：11608203
> 
> 赞同：8
> 
> 时间：2012-07-23T07:37:50.297
> 
> 标签：oracle, plsql, plsqldeveloper

我想`count(*)`在动态 plsql 语句中获得价值。我们可以将静态 stmt 写为：

```
select count(*) into tmp_cnt from table_info where nbr_entry='0123456789'; 
```

但是如何`tmp_cnt`在编写动态 sql 语句时获取值？或任何其他方式将`count(*)`价值转化为`tmp_cnt`变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-30T14:22:33.853

也许不同的 oracle 版本，但对我有用的是：

```
...
execute immediate 'select count(*) from ' || p_table_name into l_count;
... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T07:46:16.517

您可以通过 EXECUTE IMMEDIATE ... RETURNING INTO 来实现它：

```
function count_rows(p_table_name varchar2)
  return number
is
  l_count number;
begin
  execute immediate 'select count(*) from ' || p_table_name into l_count;
  return l_count;
end count_rows; 
```

# perl - 如何使用 Perl 将十六进制字符串转换为字节数组

> ID：11608206
> 
> 赞同：0
> 
> 时间：2012-07-23T07:37:58.883
> 
> 标签：perl, perl-data-structures

我想转换一个十六进制字符串说

[0] =0x4A ,[1] =0x06 ,[2] =0x0E ,[3] =0xF1 ,[4] =0x95 ,[5] =0x3B ,[6] =0xD9 ,[7] =0x90 ,[8 ] =0x5B ,[9] =0x63 ,[10]=0xCA ,[11]=0xA9 ,[12]=0x37 ,[13]=0xC8 ,[14]=0x8D ,[15]=0xDA ,[16]= 0x64 ,[17]=0x82 ,[18]=0x99 ,[19]=0x9F ,[20]=0xE1 ,[21]=0x1A ,[22]=0x3B ,[23]=0xB6 ,[24]=0xFC , [25]=0x68 ,[26]=0xC0 ,[27]=0xD2 ,[28]=0x7B ,[29]=0x01 ,[30]=0x21 ,[31]=0xDD }

成字节数组为

4A060EF1953BD9905B63CAA937C88DDA6482999FE11A3BB6FC68C0D27B0121DD

反之亦然，**有人**可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:55:00.210

```
$str = '[0] =0x4A ,[1] =0x06 ,[2] =0x0E ,[3] =0xF1 ,[4] =0x95 ,[5] =0x3B ,[6] =0xD9 ,[7] =0x90 ,[8] =0x5B ,[9] =0x63 ,[10]=0xCA ,[11]=0xA9 ,[12]=0x37 ,[13]=0xC8 ,[14]=0x8D ,[15]=0xDA ,[16]=0x64 ,[17]=0x82 ,[18]=0x99 ,[19]=0x9F ,[20]=0xE1 ,[21]=0x1A ,[22]=0x3B ,[23]=0xB6 ,[24]=0xFC ,[25]=0x68 ,[26]=0xC0 ,[27]=0xD2 ,[28]=0x7B ,[29]=0x01 ,[30]=0x21 ,[31]=0xDD';
$str =~ s/\s*,?\[.*?\]\s*=0x//gi;
print $str, "\n";
$str =~ s/([0-9A-F]{2})/0x$1, /gi;
print $str, "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:51:32.367

根据字节数组的含义：

```
my $dump = '[0] =0x4A ...';
my $bytes = pack 'H*', join '', $dump =~ /0x(..)/sg; 
```

反之亦然：

```
my $bytes = "\x4A\06...";
my @bytes = unpack 'C*', $bytes;
my $dump = join ', ', map sprintf("[%d] = 0x%02X", $_, $bytes[$_]), 0..$#bytes; 
```

或者：

```
my $dump = '[0] =0x4A ...';
my @bytes = map hex, $dump =~ /0x(..)/sg; 
```

反之亦然：

```
my @bytes = (0x4A, 0x06, ...);
my $dump = join ', ', map sprintf("[%d] = 0x%02X", $_, $bytes[$_]), 0..$#bytes; 
```

# excel - Excel 2007 的 ContentType 是什么

> ID：11608210
> 
> 赞同：0
> 
> 时间：2012-07-23T07:38:06.820
> 
> 标签：excel

对于`XlSheet`从数据库下载，我使用的是

```
Response.ContentType =  "application/vnd.ms-excel"; 
```

下载页面后。当我打开文件时，它显示名为 You are Opening Different Format then Specified 的弹出消息。

我认为这是一个内容类型问题。
我能做些什么来解决这个问题？

# jquery - 外部 jquery 文件中的代码在没有警报的情况下不会被触发

> ID：11608213
> 
> 赞同：0
> 
> 时间：2012-07-23T07:38:16.260
> 
> 标签：jquery, asp.net

我有一个外部 js 文件，当单击某个元素时需要触发该文件。这段代码在 ready 函数中。当我在 ready 函数中有一条警告语句时，一切正常。但是当我删除警报时，没有调用 ready 函数。这种奇怪行为的原因可能是什么？

```
alert()
    $(".monthChanger span").click(function (event) {
            event.stopPropagation();
            $(".monthChanger span ul").show();
        }); 
```

如果没有这个警报调用，上面的代码不会被触发。这段代码在 ready() 函数中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:17:42.993

我认为问题是在加载“.monthChanger span”之前加载并执行了外部文件。jQuery 中的触发器仅适用于在加载触发器时已经存在的元素（至少是您正在使用的那些触发器，还有其他 jQuery 函数（ .live ）不需要在选择器的代码之后加载准备好了，为了工作）。

要解决这个问题，您可以依靠“.live” jQuery 函数，为外部文件尝试 $(document).ready() （不过，我不确定是否可行，或者只是确保 javascript 文件是加载晚于它所依赖的元素（只需将其放置在它需要的元素下方。

# hibernate - NHibernate 中对 UINt32 的支持

> ID：11608219
> 
> 赞同：0
> 
> 时间：2012-07-23T07:38:52.980
> 
> 标签：hibernate, nhibernate

我正在尝试在我的应用程序中支持 UInt32。通过查看此位置给出的示例，我编写了我的代码。 [NHibernate - 如何将 UInt32 存储在数据库中](https://stackoverflow.com/questions/2309072/nhibernate-how-to-store-uint32-in-database)。在我的 hbm 文件中，我定义了属性标签：

```
 <property name="Uint16Var" column="Uint16Var" 
           type="datatypeSupported.UInt32Type,  datatypeSupported"  /> 
```

我还定义了一个 UInt32Type 类，如下所示：

```
 using System;
     using NHibernate;
     using NHibernate.SqlTypes;
     using NHibernate.UserTypes;

    namespace datatypeSupported
    {
     public class UInt32Type : IUserType
    {

    public object NullSafeGet(System.Data.IDataReader rs, string[] names, object owner)
    {
        int? i = (int?)NHibernateUtil.Int32.NullSafeGet(rs, names[0]);
        return (UInt32?)i;
    }

    public void NullSafeSet(System.Data.IDbCommand cmd, object value, int index)
    {
        UInt32? u = (UInt32?)value;
        int? i = (Int32?)u;
        NHibernateUtil.Int32.NullSafeSet(cmd, i, index);  
    }

    public Type ReturnedType
    {
        get
        {
            return typeof(Nullable<UInt32>);
        }
    }

    public SqlType[] SqlTypes
    {
        get
        {
            return new SqlType[] { SqlTypeFactory.Int32 };
        }
    } public object Assemble(object cached, object owner) 
    { 
        return cached; 
    } 

    public object DeepCopy(object value)
    { 
        return value;
    } 

    public object Disassemble(object value) 
    {
        return value; 
    } 

    public int GetHashCode(object x) 
    { 
        return x.GetHashCode(); 
    }

    public bool IsMutable
    {
        get { return false; }
    } 

    public object Replace(object original, object target, object owner) 
    { 
        return original; 
    } 

    public new bool Equals(object x, object y) 
    { 
        return x != null && x.Equals(y);
    }
} 
```

}

但是当我尝试保存我的实体时，它仍然给出错误“方言不支持 DbType.UInt32”。我需要做什么类型的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:07:32.050

编写一个自定义方言，增加对`UInt32`类型的支持。根据您使用的数据库，从已知方言之一继承。即，对于 SQL Server，你可以有这样的东西：

```
public class CustomMsSqlDialect : MsSql2008Dialect
{
    protected override void RegisterNumericTypeMappings()
    {
        base.RegisterNumericTypeMappings();
        RegisterColumnType(DbType.UInt32, "INT");
    }
} 
```

使用 FluentNHibernate 注册方言：

```
Fluently.Configure().Database(
    MsSqlConfiguration.MsSql2008.Dialect<CustomMsSqlDialect>()...) 
```

并使用 XML：

```
<property name="dialect">CustomMsSqlDialect, AssemblyName</property> 
```

# php - php 扩展和 windows 环境变量 PATH

> ID：11608226
> 
> 赞同：0
> 
> 时间：2012-07-23T07:39:31.773
> 
> 标签：php, windows, apache, environment-variables

我刚刚安装完 Apache2.4.2 和 pHp5.4.5 现在当声明服务器时，我收到 PHP 启动错误“无法为大约 12 个扩展加载动态库 xyz.dll。现在当我将文件从 pHp 目录复制到 system32 时，其中许多错误被删除，但我听说过环境变量，我想使用环境变量而不是将每个文件复制到 system32。

谢谢瓦伦阿格拉瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:21:55.077

*（假设 Apache 作为 Windows 服务运行）*

以下来自[桌面应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx#search_order_for_desktop_applications)的搜索顺序，描述了用于定位 DLL 的搜索顺序：

*   1.加载应用程序的目录。
*   2.当前目录。
*   3.系统目录。使用该`GetSystemDirectory()`函数获取该目录的路径。
*   4.16位系统目录。没有函数获取这个目录的路径，但是被搜索了。
*   5.Windows目录。使用该`GetWindowsDirectory()`函数获取该目录的路径。
*   `PATH`6.环境变量中列出的目录。请注意，这不包括`App Paths`注册表项指定的每个应用程序路径。计算`App Paths`DLL 搜索路径时不使用密钥。

通过修改`PATH`环境变量以包含您的 DLL 所在的目录，可以找到它们。但是，由于 Apache 作为 Windows 服务运行，不仅 Apache 需要重新启动，而且服务控制管理器也需要重新启动。重启服务控制管理器的唯一方法（据我所知）是重启机器。

* * *

要编辑系统`PATH`环境变量（无论如何在 XP 上）：

*   右键单击`My Computer`并选择`Properties`
*   在出现的对话框中选择`Advanced`选项卡`System Properties`
*   点击`Environment Variables`按钮
*   `PATH`在`System variables`列表中找到
*   单击`Edit`并添加您的目录

# playframework - BIRT over playframework - 找不到包？

> ID：11608227
> 
> 赞同：0
> 
> 时间：2012-07-23T07:39:34.243
> 
> 标签：playframework, dependencies, playframework-2.0, birt

我一直在尝试找到一个“不错的”报告工具（引擎？）来覆盖游戏框架。在探索了几个选项之后，我决定尝试 BIRT ......

不幸的是，我发现它不可能在依赖级别上集成到 Play 中！

我在 /lib 目录中添加了所有 BIRT jars（取自 eclipse 插件文件夹），编译，eclipsified（并看到 .classpath 被注入了 jars）。

但是当我尝试导入说：“org.eclipse.birt.core.*”时，我得到：

```
[info] Loading project definition from D:\dev\Play\reporting\project
[info] Set current project to reporting (in build file:/D:/dev/Play/reporting/)
[info] About to create Eclipse project files for your project(s).
[info] Compiling 1 Java source to D:\dev\Play\reporting\target\scala-2.9.1\classes...
[error] D:\dev\Play\reporting\app\controllers\Application.java:8: package org.eclipse.birt.core does not exist
[error] import org.eclipse.birt.core.*;
[error] ^
[error] 1 error
[error] {file:/D:/dev/Play/reporting/}reporting/compile:compile: javac returned nonzero exit code
[error] Could not create Eclipse project files:
[error] Error evaluating task 'dependency-classpath': error 
```

另一方面，尝试了另一个罐子......就像谷歌的收集，它工作......

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:27:24.947

一般来说，我建议使用依赖管理。请参阅 [为什么没有适用于 Eclipse Birt 3.7 的 Maven 存储库 => 有一个适用于 Birt 4.2](https://stackoverflow.com/questions/7245565/why-is-there-no-maven-repository-for-eclipse-birt-3-7-there-is-one-for-birt-4) 和[适用于 BIRT 2.6.0 的 Maven 存储库](https://stackoverflow.com/questions/3570512/maven-repository-for-birt-2-6-0) 您确定 lib 方法有效吗？

# hadoop - 为什么我接下来不能处理我的 hadoop 程序？

> ID：11608229
> 
> 赞同：0
> 
> 时间：2012-07-23T07:39:36.880
> 
> 标签：hadoop, mapreduce, hdfs

大家！我在eclipse中有一个关于hadoop的程序，源码是：

```
public class TokenizerMapper extends Mapper<Object, Text, Text, IntWritable> {
        private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();
    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {
        StringTokenizer itr = new StringTokenizer(value.toString());
        while(itr.hasMoreTokens()) {
            word.set(itr.nextToken());
            context.write(word, one);
        }
    }
}

public class IntSumReducer extends Reducer<Text, IntWritable, Text, IntWritable> {
    private IntWritable result = new IntWritable();
    @Override
    protected void reduce(Text key, Iterable<IntWritable> values,
            Context context) throws IOException, InterruptedException {
        int sum = 0;
        for(IntWritable val : values) {
            sum += val.get();
        }
        result.set(sum);
        context.write(key, result);
    }
}

public class WordCount {
    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        String[] oargs = new GenericOptionsParser(conf, args).getRemainingArgs();
        if(oargs.length != 2) {
            System.err.println("Usage: word count <in> <out>");
        }
        System.out.println("input:  "+oargs[0]);
        System.out.println("output: "+oargs[1]);
        Job job = new Job(conf, "word count");
        job.setJarByClass(WordCount.class);
        job.setMapperClass(TokenizerMapper.class);
        job.setCombinerClass(IntSumReducer.class);
        job.setReducerClass(IntSumReducer.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(IntWritable.class);
        FileInputFormat.addInputPath(job, new Path(oargs[0]));
        FileOutputFormat.setOutputPath(job, new Path(oargs[1]));
        System.out.println("==============================");
        System.out.println("start ...");
        boolean flag = job.waitForCompletion(true);
            System.out.println(flag);
        System.out.println("end ...");
        System.out.println("==============================");
    }
} 
```

结果是，请看日志：

```
rory@0303 /cygdrive/f/develop/hadoop/hadoop-1.0.3
$ ./bin/hadoop jar ./jar/wordcount.jar /tmp/input /tmp/output
input:  /tmp/input
output: /tmp/output
==============================
start ...
12/07/25 14:59:17 INFO input.FileInputFormat: Total input paths to process : 2
12/07/25 14:59:17 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/07/25 14:59:17 WARN snappy.LoadSnappy: Snappy native library not loaded
12/07/25 14:59:17 INFO mapred.JobClient: Running job: job_201207251447_0001
12/07/25 14:59:18 INFO mapred.JobClient:  map 0% reduce 0% 
```

日志不会继续下去，永远停在那里。为什么？

我正在本地模式下运行代码，通过 windows xp 系统中的 cygwin 软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:48:30.733

我想如果你问为什么你从来没有看到`end ====================`println 部分，然后检查你的代码：

```
System.exit(job.waitForCompletion(true)?0:1);
System.out.println("end ...");
System.out.println("=============================="); 
```

您使用`job.waitForCompletion(true)`a 包装调用`System.exit`，因此 JVM 将在最后两个 System.out 可以执行之前终止。

**编辑**

这里的日志附加器/记录器消息是任何其他异常可能被吞没的线索。您应该修改代码的签名以利用 ToolRunner 实用程序：

```
public class WordCount {
  public static void main(String[] args) throws Exception {
    ToolRunner.run(new WordCount(), args);  
  }

  public int run(String args[]) {
    if(args.length != 2) {
        System.err.println("Usage: word count <in> <out>");
    }
    System.out.println("input:  "+args[0]);
    System.out.println("output: "+args[1]);
    Job job = new Job(getConf(), "word count");
    Configuration conf = job.getConf();

    job.setJarByClass(WordCount.class);
    job.setMapperClass(TokenizerMapper.class);
    job.setCombinerClass(IntSumReducer.class);
    job.setReducerClass(IntSumReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    System.out.println("==============================");
    System.out.println("start ...");
    int result = job.waitForCompletion(true) ? 0 : 1;
    System.out.println("end ...");
    System.out.println("==============================");

    return results
  }
} 
```

并且您应该使用 $HADOOP_HOME/bin/hadoop 脚本将您的作业提交到集群（如下所示，您需要替换 jar 的名称和 WordCount 类的完全限定名称）：

```
#> hadoop jar wordcount.jar WordCount input output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:37:13.570

@Rory，正如托马斯所问的那样，您能否更具体地说明**“下一步做”**？这是您在屏幕上看到的整个堆栈跟踪吗？你的意思是你编译过一次然后得到结果就不能再运行了？您是否在 Eclipse IDE 上为您的程序指定了正确的输入参数，即**输入和输出目录？**

如果您的意思是第二次无法再次运行该程序，可能是您没有指定不同的输出目录。但我想在看到堆栈跟踪后情况并非如此。

# php - 在框 api 响应中显示未经授权

> ID：11608230
> 
> 赞同：0
> 
> 时间：2012-07-23T07:39:38.273
> 
> 标签：php, curl, box-api

我正在使用文档中提到的 box api。我从 api_key 获得票证，然后从 api_key 和票证获得 auth_token。

但是，当我使用此 auth_token 获取文件夹列表或文件内容等信息时，我收到未经授权的错误响应。

这是我的代码：

```
$auth_token = $_REQUEST["auth_token"];
//exit($auth_token);
$headers = array(
    "Authorization: BoxAuth api_key=".$box_api_key."&auth_token=".$auth_token
);
$http_message = curl_init("https://www.box.com/api/2.0/folders/0");
curl_setopt($http_message, CURLOPT_RETURNTRANSFER, true);
curl_setopt($http_message, CURLOPT_HTTP_VERSION, "CURL_HTTP_VERSION_1_1");
curl_setopt($http_message, CURLOPT_HTTPHEADER, $headers);
curl_setopt($http_message, CURLINFO_HEADER, true);
curl_setopt($http_message, CURLINFO_HEADER_OUT, true);
curl_setopt($http_message, CURLOPT_SSL_VERIFYPEER, false);
$response = curl_exec($http_message);

print($response); 
```

代码中可能有什么问题？

谢谢！非常感谢您提前！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:14:55.577

确保将 $box_api_key 设置为用于获取票证和身份验证令牌的 api_key。此外，虽然这与您的问题无关，但请使用主机名 api.box.com 处理所有 API V2 请求（又名[https://api.box.com/2.0/folders/0](https://api.box.com/2.0/folders/0)）

# iphone - 在 UIView 中在 2 个图像视图之间画一条线

> ID：11608234
> 
> 赞同：0
> 
> 时间：2012-07-23T07:39:57.893
> 
> 标签：iphone, objective-c, xcode

我想在 UIView 中的图像视图（如链接图像..）之间画线。我用过

```
CGContextRef context    = UIGraphicsGetCurrentContext();

CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);

CGContextSetLineWidth(context, 2.0);

CGContextMoveToPoint(context, 0,0); //start at this point

CGContextAddLineToPoint(context, 20, 20); //draw to this point

CGContextStrokePath(context); 
```

但是在这里，我的上下文是空的。我不知道是否必须导入任何框架或导入任何标题。任何建议或样品将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:54:37.747

最简单的方法是使用高度为 1 的标签。:)

```
UILabel *seperator=[[UILabel alloc]initWithFrame:CGRectMake(0, 53, 233, 1)];
seperator.backgroundColor=[UIColor redColor];

[loginView addSubview:seperator]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:52:14.937

```
UIGraphicsBeginImageContext(image_signature.image.size);
[yourImageView.image drawInRect:CGRectMake(0, 0, yourImageView.image.size.width, yourImageView.image.size.height)]; 
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), 0, 0);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), 20, 20);
CGContextStrokePath(UIGraphicsGetCurrentContext());
[yourImageView setImage:UIGraphicsGetImageFromCurrentImageContext()];
UIGraphicsEndImageContext(); 
```

...并且“yourImageView”是一个图像视图，您将在其中画线。我建议您在每个上部图像视图上画线，在最底部，这是一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:03:43.780

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
 CGContextSetLineWidth(context, 5.0); 
CGContextMoveToPoint(context, 90, 90.0); 
CGContextAddLineToPoint(context, 120.0, 150.0);
 CGContextStrokePath(context); 
```

# ruby-on-rails - 测量员宝石中的冲突模型名称

> ID：11608236
> 
> 赞同：0
> 
> 时间：2012-07-23T07:40:08.580
> 
> 标签：ruby-on-rails, gem, surveyor-gem

我正在安装surveyor gem，我按照那里的说明进行操作，但是当我执行此行来安装gem组件时：

```
script/rails generate surveyor:install 
```

我遇到了这些冲突

```
 conflict  db/migrate/20120716110951_create_questions.rb
Overwrite /home/saka/modares/db/migrate/20120716110951_create_questions.rb? (enter "h" for help) [Ynaqdh] h 
```

我知道问题在于 gem 和现有应用程序中的这些冲突模型名称，因为我已经有一个名为 Question 的模型。

如何解决这个冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:30:06.183

如何重命名您的问题模型？您基本上必须创建一个用于重命名的迁移（如果您还没有生产数据，则如果您不需要迁移，则更改初始迁移）并在您的应用程序中找到所有出现的问题/问题并相应地重命名它们。这有点工作，但不是真正的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:40:09.830

这种行为是测量员设计决策的结果。我们希望允许人们在`rails generate surveyor:install`每次升级surveyor 时运行，并获得新的迁移和更改的文件。生成器找到具有相同类名的[迁移，保留时间戳，如果不同，则将冲突呈现给用户](https://github.com/NUBIC/surveyor/blob/master/lib/generators/surveyor/install_generator.rb#L67)。可能会影响您做出决定的一件事是，如果您确实维护现有`create_questions`迁移，则每次升级 Surveyor 时都必须应对这种冲突。有几个解决方案：

1.  可以更改 Surveyor 以支持名称空间、可配置或其他可修改的模型名称。这肯定会花费一些时间，目前此功能没有[问题](https://github.com/NUBIC/surveyor/issues)（但可以随意添加）。

2.  您可以重命名您的迁移，生成器将运行。删除`create_questions`和`add_correct_answer_id_to_questions`迁移，并从`add_api_ids`迁移中删除问题。确保您的问题模型与 wiki 中记录的测量员问题模型相匹配（无法保证我们会保持图表同步）。更确切地说，您可以创建一个空白 rails 项目，添加测量员，运行生成器和迁移，然后查看`db/schema.rb`. 您必须手动使您的问题模型与测量员的模型保持同步。

3.  你可以重命名你的模型。如果它具有除测量员之外的现有功能，那么您可能无论如何都想走这条路。

# python - 是否可以添加带有列表理解的 where 子句？

> ID：11608238
> 
> 赞同：28
> 
> 时间：2012-07-23T07:40:21.643
> 
> 标签：python, python-3.x, list-comprehension, python-assignment-expression, python-3.8

考虑以下列表理解

```
[ (x,f(x)) for x in iterable if f(x) ] 
```

这会根据条件过滤可迭代对象`f`并返回`x,f(x)`. 这种方法的问题`f(x)`是计算两次。如果我们可以这样写就好了

```
[ (x,fx) for x in iterable if fx where fx = f(x) ]
or
[ (x,fx) for x in iterable if fx with f(x) as fx ] 
```

但是在 python 中，我们必须使用嵌套推导来避免对 f(x) 的重复调用，这使得推导看起来不太清晰

```
[ (x,fx) for x,fx in ( (y,f(y) for y in iterable ) if fx ] 
```

有没有其他方法可以让它更具 Python 和可读性？

* * *

**更新**

即将在 python 3.8 中推出！[政治公众人物](https://www.python.org/dev/peps/pep-0572/#syntax-and-semantics)

```
# Share a subexpression between a comprehension filter clause and its output
filtered_data = [y for x in data if (y := f(x)) is not None] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T09:22:01.767

没有`where`声明，但您可以使用以下命令“模拟”它`for`：

```
a=[0]
def f(x):
    a[0] += 1
    return 2*x

print [ (x, y) for x in range(5) for y in [f(x)] if y != 2 ]
print "The function was executed %s times" % a[0] 
```

执行：

```
$ python 2.py 
[(0, 0), (2, 4), (3, 6), (4, 8)]
The function was executed 5 times 
```

如您所见，函数执行了 5 次，而不是 10 次或 9 次。

这种`for`结构：

```
for y in [f(x)] 
```

模仿where子句。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-23T07:54:33.113

您寻求`let`在 python 列表推导中具有 -statement 语义，其范围可用于推导的`___ for..in`(map) 和`if ___`(filter) 部分，其范围取决于`..for ___ in...`.

* * *

**你的解决方案，修改：** 你的（你承认不可读的）解决方案`[ (x,fx) for x,fx in ( (y,f(y) for y in iterable ) if fx ]`是编写优化的最直接的方法。

主要思想：将 x 提升到元组 (x,f(x)) 中。

有些人会争辩说，最“pythonic”的做事方式将是原始的`[(x,f(x)) for x in iterable if f(x)]`并接受低效率。

但是，如果您打算经常这样做，您可以将其`((y,fy) for y in iterable)`分解为一个函数。这很糟糕，因为如果您希望访问比`x,fx`（例如`x,fx,ffx`）更多的变量，那么您将需要重写所有列表推导。因此，除非您确定您只需要`x,fx`并计划重用此模式，否则这不是一个很好的解决方案。

* * *

**生成器表达式：**

主要思想：使用更复杂的生成器表达式替代方法：python 可以让您编写多行。

您可以只使用生成器表达式，python 可以很好地使用它：

```
def xfx(iterable):
    for x in iterable:
        fx = f(x)
        if fx:
            yield (x,fx)

xfx(exampleIterable) 
```

这就是我个人的做法。

* * *

**记忆/缓存：**

主要思想：您还可以使用（滥用？）副作用并制作`f`一个全局记忆缓存，这样您就不会重复操作。

这可能会产生一些开销，并且需要一个关于缓存应该有多大以及何时应该进行垃圾收集的策略。因此，只有当您对记忆 f 有其他用途，或者 f 非常昂贵时，才应该使用它。但它会让你写...

```
[ (x,f(x)) for x in iterable if f(x) ] 
```

...就像您最初想要的那样，没有两次执行昂贵操作的性能`f`损失，即使您在技术上调用它两次。您可以将`@memoized`装饰器添加到`f`:[示例](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)（没有最大缓存大小）。只要 x 是可散列的（例如数字、元组、冻结集等），这将起作用。

* * *

**虚拟值：**

主要思想：在闭包中捕获 fx=f(x) 并修改列表理解的行为。

```
filterTrue(
    (lambda fx=f(x): (x,fx) if fx else None)() for x in iterable
) 
```

其中 filterTrue(iterable) 是 filter(None, iterable)。如果您的列表类型（一个 2 元组）实际上能够成为`None`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T07:54:22.317

没有人说你必须使用理解。事实上，我见过的大多数风格指南都要求您将它们限制为简单的结构，无论如何。

您可以改用生成器表达式。

```
def fun(iterable):
    for x in iterable:
        y = f(x)
        if y:
            yield x, y

print list(fun(iterable)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T08:06:57.677

地图和邮编？

```
fnRes = map(f, iterable)
[(x,fx) for x,fx in zip(iterable, fnRes) if fx)] 
```

# android - 在 android 中检索 Skype 聊天消息

> ID：11608240
> 
> 赞同：0
> 
> 时间：2012-07-23T07:40:33.887
> 
> 标签：android, skype

我想开发一个第三方应用程序，它可以从我的设备中预装的 Skype 应用程序中检索所有聊天消息。

# objective-c - 如何为 iOS 5 编译 Rabbitmq-c 库？

> ID：11608243
> 
> 赞同：1
> 
> 时间：2012-07-23T07:40:40.920
> 
> 标签：objective-c, c, rabbitmq, libraries, amqp

我从 GitHub下载[了 RabbitMQ-C 的源代码。](https://github.com/alanxz/rabbitmq-c)它是用 C 编写的。我可以将此库用于 iOS 5 应用程序吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:08:06.990

我为 ios5 编写了一个[包装器](https://github.com/profmaad/librabbitmq-objc)，禁用了 ARC，并重写了一些 vars 定义。现在一切正常。:DI 如果我有时间可能会写更多关于这个问题的文章。

# android - 如何让一个班级成为有孩子的父母 - android

> ID：11608246
> 
> 赞同：1
> 
> 时间：2012-07-23T07:40:47.547
> 
> 标签：android

我有一个 android 应用程序，有一个超类，其中包含每个活动的静态布局，下图以更好的方式显示了这一点，而不是我的描述

![在此处输入图像描述](../Images/0322b4bd01888e45210ec6eaa24e0e80.png)

这个“标题”包含一个`tabBar`包含一个`ImageButton`。我希望这个标题对于我的应用程序中的所有活动都是静态的。我试图做的是`extend`从这个超类到我的其他类。超类的代码在下面

```
public class MySuperClass extends Activity {
 MyHorizontalScrollView scrollView;
 View menu;
 View app;
 ImageButton btnSlide;
 boolean menuOut = false;
 Handler handler = new Handler();
 int btnWidth;

 Button testClass; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflater = LayoutInflater.from(this);
    scrollView = (MyHorizontalScrollView) inflater.inflate(R.layout.horz_scroll_with_list_menu, null);
    setContentView(scrollView);

    menu = inflater.inflate(R.layout.horz_scroll_menu, null);

    app = inflater.inflate(R.layout.horz_scroll_app, null);
    ViewGroup tabBar = (ViewGroup) app.findViewById(R.id.tabBar);

    ListView listView = (ListView) app.findViewById(R.id.list);

    listView = (ListView) menu.findViewById(R.id.list);

    ArrayList<MenuItem> menuItems = getMenuItems();
    listView.setAdapter(new MenuCustomAdapter(this, menuItems)); 

    btnSlide = (ImageButton) tabBar.findViewById(R.id.BtnSlide);
    btnSlide.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch(event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                btnSlide.setImageResource(R.drawable.lincolor);
                break;
            case MotionEvent.ACTION_UP:
                btnSlide.setImageResource(R.drawable.lin);
                break;
            }

            return false;
        }

    });
    btnSlide.setOnClickListener(new ClickListenerForScrolling(scrollView, menu));

    testClass = (Button) app.findViewById(R.id.button1);

    testClass.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(MySuperClass.this, TestClass.class);
            startActivity(intent); 
        }

    });

    final View[] children = new View[] { menu, app };

    // Scroll to app (view[1]) when layout finished.
    int scrollToViewIdx = 1;
    scrollView.initViews(children, scrollToViewIdx, new SizeCallbackForMenu(btnSlide));
}

public ArrayList<MenuItem> getMenuItems() {
    ArrayList<MenuItem> items = new ArrayList<MenuItem>();

    MenuItem m1 = new MenuItem(R.drawable.scroll, "Show history"); 
    items.add(m1);
    MenuItem m2 = new MenuItem(R.drawable.right, "Right"); 
    items.add(m2);

    return items;
}

/**
 * Helper for examples with a HSV that should be scrolled by a menu View's width.
 */
static class ClickListenerForScrolling implements OnClickListener {
    HorizontalScrollView scrollView;
    View menu;
    ImageButton button;
    int pressed;
    int timeout;
    /**
     * Menu must NOT be out/shown to start with.
     */
    boolean menuOut = false;

    public ClickListenerForScrolling(HorizontalScrollView scrollView, View menu) {
        super();
        this.scrollView = scrollView;
        this.menu = menu; 
    }

    @Override
    public void onClick(View v) {
        Context context = menu.getContext();

        int menuWidth = menu.getMeasuredWidth();

        // Ensure menu is visible
        menu.setVisibility(View.VISIBLE);

        if (!menuOut) {
            // Scroll to 0 to reveal menu
            int left = 0;
            scrollView.smoothScrollTo(left, 0);
        } else {
            // Scroll to menuWidth so menu isn't on screen.
            int left = menuWidth;
            scrollView.smoothScrollTo(left, 0);
        }
        menuOut = !menuOut;
    }

}

/**
 * Helper that remembers the width of the 'slide' button, so that the 'slide' button remains in view, even when the menu is
 * showing.
 */
static class SizeCallbackForMenu implements SizeCallback {
    int btnWidth;
    View btnSlide;

    public SizeCallbackForMenu(View btnSlide) {
        super();
        this.btnSlide = btnSlide;
    }

    @Override
    public void onGlobalLayout() {
        btnWidth = btnSlide.getMeasuredWidth();
        System.out.println("btnWidth=" + btnWidth);
    }

    @Override
    public void getViewSize(int idx, int w, int h, int[] dims) {
        dims[0] = w;
        dims[1] = h;
        final int menuIdx = 0;
        if (idx == menuIdx) {
            dims[0] = w - btnWidth;
        }
    }
} 
```

}

还有一个测试类，它扩展了这个超类。

```
public class TestClass extends MySuperClass {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

} 
```

}

再次，我怎样才能`tabBar`为每个活动制作静态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:01:46.913

您可以使用 TabHost 权利。通过单击每个选项卡，您可以启动单独的活动

[http://mfarhan133.wordpress.com/2010/11/17/tablayouttabhost-tutorial-for-android-reusing-layout/](http://mfarhan133.wordpress.com/2010/11/17/tablayouttabhost-tutorial-for-android-reusing-layout/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:05:18.037

我不知道这是否可能。我将发布一个替代解决方案，它需要更多代码但可以工作，并且是最佳实践，所以如果没有出现，这是最好的替代方案，可能是唯一的一个。

当您一次又一次地尝试使用某个布局时，例如您提到的选项卡栏，布局中有`<merge>`和`<include>`功能。基本思想是制作一个`layout.xml`要包含在其他布局中的文件。

这篇文章给出了一个很好的例子来说明如何使用它。[Android XML 布局中 <merge> 和 <include> 用法的简单示例](https://stackoverflow.com/questions/2732682/simple-example-of-merge-and-include-usage-in-android-xml-layouts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:06:17.707

没有办法在活动范围内实现这一点。布局独立于您的 Acitvity （好吧，直到您绑定它们）。

您的问题的解决方案可能是使用通用标题布局，保存在布局文件夹下的 xml 文件中，如下所示：

header.xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/red"
    ... /> 
```

并使用 include 标签将它们包含在您的布局中：

my_activity_layout.xml：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    ....
    .... >

    <include layout="@layout/header.xml" android:id="@+id/header" />

    <!-- Countinue your layout .... -->

</RelativeLayout> 
```

# android - 从大型 XML 填充 ListView

> ID：11608247
> 
> 赞同：3
> 
> 时间：2012-07-23T07:40:47.953
> 
> 标签：android, xml, listview, memory-management

我正在进行一项带有列表视图的活动。列表视图由从服务器提取的大型 XML 填充。我的场景通常是有一个 SAX 解析器，解析 XML 并返回带有解析数据的向量（或类似结构）。问题是 xml 太大并且 Vector 有太多元素导致内存不足错误。此外，xml 还包含指向正在下载的图像的链接，这使情况变得更糟。

在这种情况下我应该如何管理内存？我在想是否可以仅在用户滚动到列表视图中的给定行时才加载图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:55:49.393

内存不足异常的问题是图像的加载。将`Adapter`自己填充到`ListView`.

在一个业务应用程序中，我正在加载`ListView`9000 条记录，`TextView`每行 2 秒。所以我猜数据的大小应该不是问题。

使用 an`AsyncTask`从服务器获取数据。在方法中解析并填充适配器，`doInBackground()`然后`onPostExecute()`在`ListView`. 首先尝试不包含任何图像，以确保数据大小不是问题。

如果`ListView`加载正确，则尝试找到填充图像的方法。执行此操作有多种方法。如果图像一遍又一遍地相同，您应该尝试“缓存在内存中”实现，否则后台线程的“延迟加载”可能会很好地完成这项工作。

编辑：

这是一篇关于如何从后台线程延迟加载图像的非常好的帖子/教程。当您查看 a 中的所有应用程序时，它“几乎”与 android 市场使用的技术相同`GridView`，起初有一些灰色图标，然后突然出现应用程序的图像。这是从后台线程完成的，当用户可以看到确切的行时，后台线程从 Internet 获取它，填充列表并将其缓存在内存中，以便立即再次可用。[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:50:29.617

用于`service`将 XML 从服务器拉到`database`. 您比在 Google Play 中看到的`activity`延迟加载数据。`database`请参阅[CWAC EndlessAdapter](https://github.com/commonsguy/cwac-endless)。另请参阅 [适用于 Android 的 Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)以填充您`listview`的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:21:09.493

OutOfMemoryException 很可能是由图像引起的。

假设您要显示带有图片的酒店列表。您以 XML 格式获取酒店信息并将它们保存在列表（或类似结构）中。您的酒店类可能有一个类似`URL pictureURL`的成员`WeakReference<Drawable> picture`，并且在需要之前，这样的成员将是空的。

您可以让列表适配器`AsyncTask`在 getView() 方法中开始下载图像（如果图片指向 null）并将其设置为列表中的 ImageView 和`Hotel.picture`.

因为 Hotel.picture 是一个弱引用，所以当图像离开屏幕时，内存将被释放，因为`ImageViews`被回收

您的 getView 方法可能包含如下内容：

```
private class MyCustomAdapter extends BaseAdapter {
    ...
    List<Hotel> hotelList;
    ...
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ...
        Hotel hotel = hotelList.get(position);
        ImageView ivHotelPic = //your image view from the list (child of 'view')
        ...
        if (hotel.picture == null || hotel.picture.get() == null){
            new DownloadImageTask(hotel,ivHotelPic).execute(hotel.pictureURL)
        }
        else{
            ivHotelPic.setImageDrawable( hotel.picture.get() );
        }

        return view; 
    }
}

private class DownloadImageTask extends AsyncTask<URL, Integer, Drawable> {
    Hotel hotel;
    ImageView imageView;

    DownloadImageTask(Hotel hotel,ImageView imageView){
        this.hotel = hotel;
        this.imageView = imageView; 
    }       

    protected Drawable doInBackground(URL... urls) {
         assert urls.length == 1;

         Drawable image = //download image from urls[0] (or hotel.pictureURL);

         return image;
    }

    protected void onPostExecute(Drawable result) {
        imageView.setImageDrawable(result);
        hotel.picture = new WeakReference<Drawable>(result);
    }
} 
```

如果您想保留图像直到活动关闭，您也可以对图像使用常规引用，但是当下载的图像过多时，这可能会导致 OutOfMemory。

# actionscript-3 - 获取数据对象的属性以引用 as3 中同一对象的其他属性

> ID：11608252
> 
> 赞同：0
> 
> 时间：2012-07-23T07:41:06.743
> 
> 标签：actionscript-3, flash, events, data-objects

如何在 enter_frame 侦听器“animatesmoke”中获取“smokeobject”的速度属性，以引用电影剪辑“whitesmoke”，这也是“smokeobject”的属性

这是我的代码

```
public function createRocketSmoke() 
    {
        var smokeObject:Object = new Object();
         smokeObject.whiteSmoke = new Bitmap(new WhiteSmoke(0,0));
         smokeObject.whiteSmoke.x=targetX + Math.random()*4-8;
         smokeObject.whiteSmoke.y=targetY + Math.random()*4-8;

        smokeContainer=new MovieClip();
        smokeContainer.addChild(smokeObject.whiteSmoke);
        addChild(smokeContainer);

        var randomScale = Math.random();
        if(randomScale<.5)
        randomScale = randomScale+.5;
        smokeObject.whiteSmoke.scaleX= randomScale;
        smokeObject.whiteSmoke.scaleY= randomScale;
        smokeObject.speed = Math.random();
        smokeObject.whiteSmoke.rotation = Math.random()*360;
        smokeObject.whiteSmoke.addEventListener(Event.ENTER_FRAME,animateSmoke);    

    }
    public function animateSmoke(event:Event):void
    {
        //here i want the speed property of the 'smokeObject'
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:50:32.887

你想要做的事情很快就会变得非常混乱。

我建议为你的 Smoke 创建一个类并给它一个`update()`函数：

```
public class Smoke
{

    // Properties.
    private var _whiteSmoke:Bitmap;
    private var _speed:Number = 0;

    // Constructor.
    public function Smoke(targetX:Number = 0, targetY:Number = 0)
    {
        // Prepare graphics.
        _whiteSmoke = new Bitmap(new WhiteSmoke());
        _whiteSmoke.x = targetX + Math.random()*4-8;
        _whiteSmoke. y = targetY + Math.random()*4-8;
        _whiteSmoke.rotation = Math.random()*360;
        _whiteSmoke.scaleX = whiteSmoke.scaleY = 0.5 Math.random() * 0.5;

        // Apply random speed.
        _speed = Math.random();
    }

    // Update this smoke.
    public function update():void
    {
        //
        // Update this smoke here.
        //
    }

    // The graphics for this smoke.
    public function get whiteSmoke():Bitmap
    {
        return _whiteSmoke;
    }

    // The speed for this smoke.
    public function get speed():Number
    {
        return _speed;
    }

} 
```

这将允许您更轻松地使用数组和循环更新您的烟雾对象来更新它们中的每一个：

```
// This array will hold all your Smoke objects.
var allSmoke:Array = [];

// Create some Smoke.
var smoke1:Smoke = new Smoke(10, 10);
var smoke2:Smoke = new Smoke(10, 10);

// Add it to the array.
allSmoke.push(smoke1);
allSmoke.push(smoke2);

// Prepare game loop.
addEventListener(Event.ENTER_FRAME, update);
function update(e:Event):void
{
    // Loop through smoke objects and update them.
    for each(var i:Smoke in allSmoke)
    {
        i.update();
    }
} 
```

# javascript - 通过传入一个值来避免重复

> ID：11608255
> 
> 赞同：0
> 
> 时间：2012-07-23T07:41:37.377
> 
> 标签：javascript, jquery

我正在使用 javascript 将图像插入 dom，并且我想在调用函数时传入第二个类名和图像的其他一些属性。

所以我有包含代码的函数：

```
function movieCreator(movieName){

'<img class="clip terminator" src="images/terminator.png" onclick="imageControl(this);" alt="terminator" />','

};

 function movieCreator(movieName){

'<img class="clip rambo" src="images/rambo.png" onclick="imageControl(this);" alt="rambo" />'

 }; 
```

这些函数中还有其他一些东西，但我试图稍微简化一下这个问题。我想在调用函数时传入“终结者”和“rambo”这两个词

```
movieCreator(terminator);
movieCreator(rambo); 
```

但是当我试图考虑在哪里放置引号和类似的东西以便从代码中正确替换这些单词时，我的头真的卡住了。

所以我的问题是：用调用函数时传入的动态值替换单词“终止符”的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:44:07.240

调用函数如

```
movieCreator('terminator');
movieCreator('rambo'); 
```

创建函数如

```
function movieCreator(movieName){

'<img class="clip '+movieName+'" src="images/'+movieName+'.png" onclick="imageControl(this);" alt="'+movieName+'" />','

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:45:26.303

像这样的东西？

```
'<img class="clip ' + movieName + '" src="images/' + movieName + '.png" onclick="imageControl(this);" alt="' + movieName + '" />' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:45:41.450

```
 function movieCreator(movieName) {
        return '<img class="clip ' + movieName + '" src="images/' + movieName + '.png" onclick="imageControl(this);" alt="' + movieName + '" />';
    };
    movieCreator('terminator');
    movieCreator('rambo'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:45:43.653

试试这个

```
 function movieCreator(movieName){
         var imgTag= '<img class="clip '+ movieName +'" src="images/'+ movieName + '.png" onclick="imageControl(this);" alt="'+ movieName+'" />'

      }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T07:47:06.600

简单的：

```
function movieCreator(movieName){
      alert(movieName);
}

movieCreator('terminator');
movieCreator('rambo'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T07:54:16.637

您正在使用这种代码创建对文件名/位置的依赖。如果服务器管理员移动图像文件夹会发生什么？或者，如果您在调用该函数时拼错了电影名称？

这种情况我们通常更适合服务器代码根据实际电影信息（包括文件名和位置）的数据源来生成。

# c# - 是否有 ac# Webcam/Video WPF 组件可以帮助我捕获视频？

> ID：11608258
> 
> 赞同：3
> 
> 时间：2012-07-23T07:42:02.257
> 
> 标签：c#, wpf, video, wpf-controls, video-capture

我正在寻找可以与网络摄像头和视频输入设备一起使用的 WPF 应用程序组件，我需要它能够：

1.  拍摄视频
2.  捕捉静止图像
3.  使用网络摄像头

我对**开源**和**商业**图书馆都开放

谢谢

编辑：我目前正在使用[MediaKit](http://wpfmediakit.codeplex.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:13:04.360

[Aforge .NET](http://www.aforgenet.com/)是一个免费的 .net 框架库，它可以帮助您从网络摄像头捕获视频并处理视频中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:33:41.787

[DirectShow.NET](http://directshownet.sourceforge.net/)也是一种选择。

# javascript - Facebook Share 没有为自定义 url 选择完整的 url 和元名称

> ID：11608261
> 
> 赞同：1
> 
> 时间：2012-07-23T07:42:23.180
> 
> 标签：javascript, jquery, facebook, coldfusion

我正在尝试通过提供该页面的完整网址来在 FB 上共享该用户的页面。但它没有选择我在页面上给出的任何标题和其他 OG 元标记。

这是我正在使用的：-

```
<div class="img">
  <a href='http://www.facebook.com/sharer.php?s=100&p[url]=https://pad.panda.org/content  /nav_content.cfm?uNC=86290929&uXNavID=123906' target="_blank" onclick="javascript:window.open(this.href,
                 '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img src="images/facebook.jpg" alt="FaceBook" />
              </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:09:34.717

尝试摆脱[Facebook 调试工具](http://developers.facebook.com/tools/debug/og/object?q=https://pad.panda.org/content/nav_content.cfm?uNC=86290929&uXNavID=123906)中的所有警告。

# php - PHP - preg_replace

> ID：11608265
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:42:41.790
> 
> 标签：php, regex, preg-replace

我有一些 HTML 内容，我想替换一个标签：

```
<span class='c1'>MY TEXT</span> 
```

并保留我的文字。我试过：

```
$result = preg_replace('/(<span class=\'c1\'>)(.*)(<\/span>)/', '$2', $my_string); 
```

但是封闭标签仍然存在？你能帮我解释一下我的错误在哪里吗？我要提高自己！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:55:02.737

尝试使用惰性匹配`(.*?)`而不是贪婪匹配`(.*)`。

贪婪匹配意味着它会在完成之前*尽可能地*匹配，所以如果你在`</span>`某个地方有另一个，它会匹配那个。例如：

**使用贪心匹配：**

```
<span class='c1'>MY TEXT</span><span class='c1'>MY OTHER TEXT</span>
                 ^--greedy match will go from here to here--^ 
```

**使用惰性匹配：**

```
<span class='c1'>MY TEXT</span><span class='c1'>MY OTHER TEXT</span>
                 ^-lazy^                        ^---lazy----^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:54:26.990

尝试一下

```
$result = preg_replace('/(\<span class=(\'|\")?c1(\'|\")?\>)(.*)(\<\/span\>)/i', '$4', $my_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:54:46.007

您的全匹配组可能消耗太多，而您`</span>`从尾随内容中看到另一个。你应该试试

```
$result = preg_replace('/(<span class=\'c1\'>)(.*?)(<\/span>)/', '$2', $my_string); 
```

它使用了一个不贪婪的全匹配 ( `.*?`)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:13:40.550

使用[Simple HTML DOM](http://simplehtmldom.sourceforge.net)，它是处理 HTML 元素的最佳解决方案。

**例子：**

```
require_once('simple_html_dom.php');
$html = str_get_html('<span class="c1">MY TEXT</span>');
$text = $html->plaintext; 
```

或者，如果您有一个完整的 HTML 文档（而不仅仅是一个 HTML 片段）：

```
require_once('simple_html_dom.php');
$html = str_get_html('html goes here');
$text = $html->find('span.c1', 0)->plaintext; // Find text from first <span> with the class 'c1' 
```

就这么简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:15:18.533

这会给你完美的结果：

```
preg_match_all('/<span(.*?)class=\'c1\'>(.*?)<\/span>/', '$2', $my_string, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
   echo $result[0][$i];
} 
```

# c# - 在 Windows8/C# 中创建 Png

> ID：11608268
> 
> 赞同：0
> 
> 时间：2012-07-23T07:42:55.807
> 
> 标签：c#, image, png, windows-8

如何在 Windows8/C# 中创建和保存 png-image？我找到了没有 DirectX 的方法。有没有办法将一组 XAML 基元呈现为 png？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:15:09.970

您可以使用[BitmapEncoder 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapencoder.aspx)来创建 PNG 图像。使用[PngEncoderId作为](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapencoder.pngencoderid.aspx)[CreateAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br226212.aspx)的 Guid 参数。请参阅[此示例](http://code.msdn.microsoft.com/windowsapps/Simple-Imaging-Sample-a2dec2b0)。有关如何保存数据的示例，请参阅[此示例。](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)

没有像 Silverlight 中那样将视觉树腌制成图像的简单方法。

# actionscript-3 - 如何在 AS3 中获取会话变量

> ID：11608273
> 
> 赞同：0
> 
> 时间：2012-07-23T07:43:14.277
> 
> 标签：actionscript-3, flash, flash-cs5

我已经设置了一个会话变量。我需要 Flash 能够检查是否存在并使用它，否则默认为某个值。

我怎样才能在 AS3 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:08:42.087

如果它是一个 Javascript 变量，你可以使用这个 actionscript 代码：

```
var sessionValue:String = ExternalInterface.call(String(<script>function(){ return sessionValue; };</script>));
trace("sessionValue:" + sessionValue); // output to debug window 
```

如果你想从 Flash 中读取 javascript cookie，你可以尝试使用这个（未经测试）

```
trace("cookie 'sessionValue':" + readCookie("sessionValue")); // output to debug window

function readCookie(name:String):String { // quickly ported from http://www.quirksmode.org/js/cookies.html
 var nameEQ:String = name + "=";
 var cookie:String = ExternalInterface.call(String(<script>function(){ return document.cookie; };</script>));
 var ca:Array = cookie.split(';');
 for(var i:int = 0; i < ca.length; i++) {
    var c:String = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
 }
 return null;
} 
```

为了使 ExternalInterface 可用，它应该在浏览器中在线运行，并且`allowscriptaccess`应该`true`在 Flash 嵌入代码中。

**更多信息：**
Flash ExternalInterface：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)
://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6 Javascript cookies： [http://www .quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:49:17.257

您可以通过 FlashVars 将会话数据传递给 Flash。

```
<object width="" height="">
    <param name="flashvars" value="sessionVar=sessionValue" />
    <embed src="file.swf?sessionVar=sessionValue" width="" height="" />
</object> 
```

并在 AS3 中将它们拉出：

```
var embedData:Object = root.loaderInfo.parameters;
// Access via embedData.sessionVar 
```

或者，您可以设置一个 PHP 脚本来保存会话变量，然后使用 URLLoader 在 AS3 中请求它们。

# python - 从 db 中提取数据，然后将其传递给 qtreeview

> ID：11608276
> 
> 赞同：1
> 
> 时间：2012-07-23T07:43:56.143
> 
> 标签：python, sql, pyqt

我完全是 PyQt 的新手。我想到了这个项目。我想从我的数据库中搜索数据，如果找到它，它会将所选数据显示到我的 QTreeView。我已经有一个可以连接到我的 Postgresql 数据库的查询。例如，我的表由 pkey、itemcode、description 和 Quantity 组成。我的 Gui 中有一个 QLineEdit。在那个 QLineEdit 中，它将从我的表中搜索 ItemCode，当它找到一个项目时，它会自动将该项目数据及其详细信息发送到我的 QTreeView。这怎么可能。我希望你能帮助我。请。

这是我的代码：

**连接.py**

```
def createConnection(db):
    db = QSqlDatabase.addDatabase("QPSQL");
    db.setHostName("localhost")
    db.setPort(5432)
    db.setDatabaseName("posdb")
    db.setUserName("username")
    db.setPassword("password")
    if not db.open():
        QtGui.QMessageBox.Warning(None,"Test", QtCore.QString("Database Error: %1").arg(db.lastError().text()))
        sys.exit(1)
    ok = db.open()

def sqlquery():
    query = QSqlQuery(db)
    query.prepare("Select itemcode, description, srp, vat from items Where itemcode=:itemcode;");
    if query.next():
        itemcode = query.value(0).toInt()
        description = query.value(1).toString()
        srp = query.value(2).toInt()
        vat = query.value(3).toInt()
    query.bindvalue(":itemcode", QtCore.QVariant(itemcode))
    query.exec_()
    return True 
```

在我的 baseui.ui 中，我将它转换为 .py，然后在那里，它有 QLineEdit，我如何在我的 main.py 中使用它？就像把它称为函数一样。再次感谢 JDI。

这是我的 main.py

```
import baseui,connection
from baseui import Ui_Dialog
from connection import createConnection

class PosForm(QtGui.QWidget):
    def __init__(self,parent=None):
        super(PosForm,self).__init__(parent)
        self.ui = baseui()
        self.ui.setupUi(self)
        lineedit = QLineEdit(self.ui)
        selectitem = lineedit.toInt

def initializeModel(model):
    model = QSqlTableModel()
    model.setTable('items')
    model.setEditStrategy(QtSql.QSqlTableModel.OnManualSubmit)
    model.select()

def view(model):
    view = QTableView()
    view.setModel(model)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    model = QtSql.QSqlTableModel()
    initializeModel(model)
    view = PosForm()
    view.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:40:45.543

这里有很多关于如何使用 QtSql 从数据库查询中填充视图的[示例。](http://qt-project.org/doc/qt-5.0/examples-sql.html)它们都在 C++ 中，但这些示例几乎可以转换为 PyQt。

简而言之，您将使用[QSqlDatabase](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsqldatabase.html)、[QSqlTableModel](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsqltablemodel.html)和[QSqlQuery的组合](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsqlquery.html)

*   **QSqlDatabase**：使用特定驱动程序（在您的情况下为 Postgresql）创建与数据库的连接对象
*   **QSqlTableModel**：你给它你的数据库对象，它将处理接收查询结果作为数据。它可以连接到表格视图
*   **QSqlQuery**：如果要指定自定义 sql 查询，可以在 QSqlTableModel 上进行设置。

有了这些设置，你只需要 myTableView.setModel(mySqlTableModel)，其中`myTableView`是`QTableView`

**更新：反映最近的代码更新**

我不知道该代码发生了什么，但它做了很多奇怪的事情。有一些顶级函数接受参数，然后继续创建新的。就像您在 main 中创建一个 QSqlTableModel 时一样，然后将其传递给该函数并创建一个新函数。而您的创建数据库功能只是创建另一个数据库。我不太了解所有单独功能的逻辑。这只是您的代码的简化版本：

```
from PyQt4 import QtCore, QtGui, QtSql
from baseui import Ui_Dialog

class PosForm(QtGui.QWidget):
    def __init__(self,parent=None):
        super(PosForm,self).__init__(parent)
        self.ui = baseui()
        self.ui.setupUi(self)

        # save a reference to your line edit so you can refer to it
        self.lineedit = QtGui.QLineEdit(self.ui)

        selectitem = lineedit.toInt # what is this?

        # Your database needs to be created so you can pass it to your model
        db = QtSql.QSqlDatabase.addDatabase("QPSQL", "MyDatabaseConnectionName")
        db.setHostName("localhost")
        db.setPort(5432)
        db.setDatabaseName("posdb")
        db.setUserName("username")
        db.setPassword("password")
        if not db.open():
            QtGui.QMessageBox.Warning(
                self,
                "Database Connection Error", 
                "Database Error: %s" % db.lastError().text()
            )
            sys.exit(1)  # you want your whole program to exit?

        self.db = db

        # pass the database to the model
        self.model = QtSql.QSqlTableModel(self, self.db)
        self.model.setTable('items')
        self.model.setEditStrategy(QtSql.QSqlTableModel.OnManualSubmit)

        # create the view and set the model
        self.view = QtGui.QTableView(self)
        self.view.setModel(self.model)

    def setItemCode(self, itemCode):
        """ Set a new itemCode value for the sql query select """
        query = QtSql.QSqlQuery()
        query.prepare("Select itemcode, description, srp, vat from items Where itemcode=:itemcode;")
        query.bindvalue(":itemcode", itemCode)
        self.model.setQuery(query)
        self.model.select()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    view = PosForm()
    view.show()
    sys.exit(app.exec_()) 
```

需要注意的重要事项：

*   在您的 init 中，创建了数据库，然后将其传递给 QSqlTableModel。
*   您的模型设置在此处的视图上。所有的 UI 都应该在 init 中设置，除非你有一个令人信服的理由来分离逻辑。
*   我在这里定义的唯一额外方法是`setItemCode`. 这允许您传入另一个`itemCode`值并在您的模型上更新查询。
*   您`lineedit`现在是`self.lineedit`，因此您可以在其他方法中再次引用它。
*   实例方法需要一个`self`参数。你只是定义了一堆全局函数来在你的类上做一点点工作。

# c# - 你能写 Javascript 对象初始化简写 C# 风格吗？

> ID：11608277
> 
> 赞同：2
> 
> 时间：2012-07-23T07:43:55.930
> 
> 标签：c#, javascript

我有以下Javascript：

```
function TestModel()
{
        this.name = "Testvalue";
        this.id = 0;
}

var test = new TestModel();
alert(test.name); 
```

如果我想在不使用构造函数的情况下用不同的参数初始化对象，我需要调用以下代码：

```
var test = new TestModel();
test.name = "other value";
test.id = 5;
alert(test.name); 
```

我想做的是类似于 C# 风格的东西：

```
class TestModel
{
    public string name = "Testvalue";
    public int id = 0;
}

TestModel test = new TestModel() { name = "other value", id = 5 };
System.Windows.MessageBox.Show(test.name); 
```

但是，如果我在 javascript 中尝试类似的操作，它将无法正常工作。

简而言之：我试图在不使用构造函数的情况下在 1 行中初始化一个对象。这在javascript中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:46:48.657

```
function TestModel(name, id)
{
  this.name = name || "TestValue";
  this.id = id || 0;
}

var test = new TestModel("Your Name", 4638);
alert(test.name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:00:38.173

这看起来最像 C# 语法：

```
function TestModel(init)
{
   init = init || {}; 
   this.name = init.name || "Testvalue";
   this.id = init.id || 0;
}

var test1 = new TestModel( { name:'testvalue1',id:1 } );
var test2 = new TestModel( { name:'testvalue2',id:2 } ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:49:06.273

这是另一个给你的，就像 KooiInc 给出的一样，但更通用，并且还检查以确保传递的值是正确的类型......

```
function TestModel(init) {
    var defaults = {
        name: "Bunyip",
        id: 0
    }
    if (typeof init == 'object') {
        for (var prop in defaults) {
            if (defaults.hasOwnProperty(prop)) {
                if (init.hasOwnProperty(prop) && typeof init[prop] == typeof defaults[prop]) {
                    this[prop] = init[prop];
                } else {
                    this[prop] = defaults[prop];
                }
            }
        }
    } else {
        for (var prop in defaults) {
            if (defaults.hasOwnProperty(prop)) this[prop] = defaults[prop];
        }
    }
    delete defaults;
}

var test1 = new TestModel( { name:'testvalue1',id:1 } );
var test2 = new TestModel( { name:'testvalue2',id:2 } ); 
```

# c# - 在 C# 中以特定模式递增字符

> ID：11608281
> 
> 赞同：2
> 
> 时间：2012-07-23T07:44:33.367
> 
> 标签：c#, .net

程序应该接受一个参数 N 并打印出 N + 1 行。我必须输出这样的东西。

这是我必须在 N = 5 时得到的输出

> A //递增0
> 
> AB //递增1
> 
> ACE //增加 2
> 
> ADJJ //增加 3
> 
> AEIMQ //递增 4

该算法使用 N 作为每次添加之间要跳过的字符数。所以在 N=3 时，A 跳 3 到 D，跳 3 到 G，跳 3 到 J。

当程序用完大写字符时（即当N太大时），它应该以小写字符开头，如果用完小写字符，则它应该再次以大写字母开头，依此类推。我是编程新手。我真的不知道从哪里开始。我已经在循环中工作了一段时间，但仍然不知道曾经发生过什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:55:21.143

试试这个 ：

```
public string GetOutPut(int increment)
{
    string alphabets = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    string output = string.Empty;

    for(int i=0; i<=increment; i++)
    {
       int index = i*increment;

       if(index>alphabets.Length)
          index = index % alphabets.Length;

       output+= alphabets[index];
    }

    return output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:56:48.877

目前尚不清楚您如何获得所需的行数 - 因为您说过`N+1`，但您的示例仅提供`N`行数。

以下可用于生成这些单独的行中的每一行，并且`Algo`可以修改该方法以`n+1`通过将代码粘贴在 while 循环中、递减`n`并在 上`len`使用来生成行：`AppendLine``StringBuilder`

```
char[] allowedChars = Enumerable.Range('A', 26).Concat(Enumerable.Range('a', 26))
  .Select(i => (char)i).ToArray();

[TestMethod]
public void Test()
{
  Assert.AreEqual("A", Algo(0, 1));
  Assert.AreEqual("AB", Algo(1, 2));
  Assert.AreEqual("ACE", Algo(2, 3));
  Assert.AreEqual("ADGJ", Algo(3, 4));
  Assert.AreEqual("AEIMQ", Algo(4, 5));
}

public string Algo(int n, int len)
{
  StringBuilder sb = new StringBuilder();
  int nextCharIndex = 0;
  for (int f = 0; f < len; f++)
  {
    sb.Append(allowedChars[nextCharIndex]);
    //the `%`, or mod, here wraps around the next character back to upper case
    nextCharIndex = (nextCharIndex + n) % allowedChars.Length;
  }
  return sb.ToString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:18:12.830

这是另一种使用 a `Char[]`、和 a的方法，为了提高效率`modulo`，它会递增：`StringBuilder``for-loop``n`

```
readonly static Char[] letters = 
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".ToCharArray();

static String appendChars(int n)
{
    int length = n + 1;
    StringBuilder sBuilder = new StringBuilder("A", length);

    for (int i = n; sBuilder.Length < length; i += n)
    {
        Char nextChar = letters[i % letters.Length];
        sBuilder.Append(nextChar);
    }

    return sBuilder.ToString();
} 
```

测试您的样本数据：

```
int n = 5;
IEnumerable<String> allWords = Enumerable.Range(0, n).Select(i => appendChars(i));
Console.Write(string.Join(Environment.NewLine, allWords)); 
```

输出：

```
A
AB 
ACE 
ADGJ 
AEIMQ 
```

这是演示：http: [//ideone.com/0sspY](http://ideone.com/0sspY)

# c++ - 远离 vc++ 的 c++ 事件处理

> ID：11608283
> 
> 赞同：-3
> 
> 时间：2012-07-23T07:44:34.393
> 
> 标签：c++, event-handling

我想知道如何在 C++ 中创建诸如鼠标事件或 onkeypress（热键）事件等事件，而不是在 Microsoft Visual C++ 环境中......

如果您可以建议任何电子书或任何教程来学习......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:07:18.550

[boost.signals 文档和教程将为您提供良好的开端。](http://boost.cowic.de/rc/pdf/signals.pdf)

[libstdc++](http://gcc.gnu.org/libstdc++/)是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:49:14.710

C++ 中没有“事件”之类的东西。

那些只存在于特定的编程框架中。由于您提到“Visual C++”，我假设您正在考虑 Windows 窗体，它是 Win32 API 的面向对象的包装器，允许您编写面向 .NET 框架的应用程序。.NET Framework 支持事件、委托和其他方便的功能，但这些与 C++ 语言无关。

您将需要使用所需的任何环境来支持您正在编程的框架。对于 .NET WinForms 应用程序，通常是 Microsoft 的 Visual C++。但是，您可以使用任何您想要的文本编辑器。这与 IDE 无关，与编译器和目标框架有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:51:51.053

学习 Qt、wxWidgets、gtkmm——它们都有某种形式的事件。Qt 具有像 VS 中一样的视觉设计，但不需要您使用它。

C++ 本身没有标准的方式来获取 GUI、事件（实际上还有更多）......

# scorm - SCORM 2004 第 3 版中的 cmi.exit 数据模型元素

> ID：11608285
> 
> 赞同：1
> 
> 时间：2012-07-23T07:44:48.600
> 
> 标签：scorm, scorm2004

我无法理解 cmi.exit 数据模型元素的用法。

**场景 A：**假设一个活动设置它`cmi.success_status = passed`，`cmi.exit = suspend`然后触发一个`Exit All`导航请求。在这种情况下，`Objective Satisfied Status`下一次测序会议中活动的主要目标的价值是多少？

**场景 B：**假设一个活动设置它`cmi.success_status = passed`，`cmi.exit = normal`然后触发一个`Exit All`导航请求。在这种情况下，`Objective Satisfied Status`下一次测序会议中活动的主要目标的价值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:38:25.653

在这两种情况下，由于“全部退出”NAV 请求，下一个排序会话将从新数据开始。如果 SCO 将“cmi.exit”数据的值设置为“suspend”，这将在排序会话正在进行时暂停该 SCO。如果你想保留整个课程的所有数据，你应该使用“Suspend All”而不是“Exit All”。请注意，“cmi.exit”仅与触发它的 SCO 有关，它不会影响课程中的其他 SCO。

# html - 奇怪的 JSPX 问题

> ID：11608286
> 
> 赞同：1
> 
> 时间：2012-07-23T07:44:50.510
> 
> 标签：html, jstl, jspx

我在 JSPX 文件中编写这样的代码，

```
<table>
  <c:forEach var="var" items="${items}" varStatus="status">

    <c:if test="${(status.index) % 4 == 0}">
      <tr>
    </c:if>

    <td>some contents</td>

    <c:if test="${(status.index+1) % 4 == 0 || status.last}">
      </tr>
    </c:if>

  </c:forEach>
</table> 
```

问题是，`<tr>`并且`</tr>`会导致 JSPX 中的编译错误。它会说“`<tr>`应该以`</tr>`”结尾。但是，JSP 没问题。

有没有办法在 JSPX 中做这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:12:39.553

我想您可以执行以下操作：

```
<table>
  <c:forEach var="var" items="${items}" varStatus="status">

    <c:if test="${(status.index) % 4 == 0}">
      <c:out value="&lt;tr&gt;" escapeXml="false"/>
    </c:if>

    <td>some contents</td>

    <c:if test="${(status.index+1) % 4 == 0 || status.last}">
      <c:out value="&lt;/tr&gt;" escapeXml="false"/>
    </c:if>

  </c:forEach>
</table> 
```

# objective-c - 太小的注解 iOS

> ID：11608287
> 
> 赞同：1
> 
> 时间：2012-07-23T07:44:58.873
> 
> 标签：objective-c, ios, ios5, mapkit

我制作了一个模拟地图上公共汽车运动的应用程序。

公共汽车是在 MKMapview 上移动的 MKAnnotations。通过触摸注释/总线，它将显示一个定制的标注，其中包含有关总线的信息。这一切都基于公共实时数据。

我遇到的一个问题是 MKAnnotations（公共汽车）非常小，并且由于它们不断移动，因此通常很难触摸注释来显示标注。

图标为 25x25 像素，不能增大。

有没有办法制作一个不可见的矩形，这会增加注释周围的触敏区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:49:07.063

创建一个更大的注释视图并将背景颜色设置为 [UIColor clearColor]。创建一个 25x25 的 UIImageView 并将其添加到注释视图中。您可以设置 ImageView 的框架以将其放置在注释视图的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:02:20.193

我最终以非编程方式进行。

使用 Photoshop，我制作了一张 75x75pix 100% 不透明的图片，并在顶部添加了我的 25x25pix 图标。

也许不是最好的解决方案，但它确实有效。

# amazon-ec2 - 如何卸载我的 EC2 实例中存在的 EC2 临时存储

> ID：11608288
> 
> 赞同：1
> 
> 时间：2012-07-23T07:45:03.840
> 
> 标签：amazon-ec2, amazon-web-services

我是 Amazon 的新手。我有一个正在使用的 EC2 实例，包含 2 个临时存储。当我从这个实例创建新的 AMI 时，我可以看到这 2 个存储存在。有什么方法可以从我的 EC2 实例中卸载或删除？你能用boto或任何东西取悦任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:52:20.400

临时存储本质上是 EC2 附带的*“免费”存储。*您无需为此支付任何额外费用，也不会为 AMI 占用任何空间。

您可以通过以下方式强制卸载：

```
sudo umount -d /dev/sdb 
```

但是，真的，为什么要打扰。

# ruby - 如何在 Ruby 中运行 Oracle 存储过程

> ID：11608289
> 
> 赞同：1
> 
> 时间：2012-07-23T07:45:07.263
> 
> 标签：ruby, oracle, stored-procedures

我已获得对 Oracle 数据库的读取访问权限，以获取我自己的数据库的数据。DBA 给了我一个存储过程，他向我保证这是我所需要的，但我还不能从 Ruby 中运行它。

我安装了 ruby​​-oci8 gem 和 oracle 即时客户端。

这是我到目前为止所管理的。

```
require 'oci8'
conn = OCI8.new('user','pass','//remoteora1:1521/xxxx')
=> #<OCI8::RWHRUBY>
cursor = conn.parse("call REPOSITORY.GET_PMI_ADT( '722833', 'W', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null)")
=> #<OCI8::Cursor:0x56f4d50> 
```

这就是我卡住的地方。我有这个 OCI8::Cursor 对象，但我不知道如何处理它。它应该返回我一大堆结果（空值在查询中），但我什么也没得到。运行带有和不带参数的 cursor.exec （我不确定我需要什么参数）会给我错误。

cursor.exec 给出

```
OCIError: ORA-06553: PLS-:
ORA-06553: PLS-:
ORA-06553: PLS-:
ORA-06553: PLS-306: wrong number or typ
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT'
ORA-06553: PLS-306: wrong number or type of arguments in call to 'GET_PMI_ADT' 
```

ETC...

cursor.fetch 给出

```
OCIError: ORA-24338: statement handle not executed 
```

有人在这里有什么想法吗？我完全在我的头上。

此处为仍在观看的任何人提供更新。如果我将存储过程更改为

```
BEGIN REPOSITORY.GET_PMI_ADT( '722833', 'W', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null); END; 
```

我现在得到错误；

```
OCIERROR: ORA-06550: line 1, column 45:
PLS-00363: expression ' NULL' cannot be used as an assignment target 
```

这是否确认存储过程不正确？有什么明显的方法可以纠正吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:40:25.163

这应该有助于：

[http://rubyforge.org/forum/forum.php?thread_id=11295&forum_id=1078](http://rubyforge.org/forum/forum.php?thread_id=11295&forum_id=1078)

样品如下：

msi 处于 IN 变量状态，remaining_credit 是 OUT 变量

```
cursor = conn.parse ('begin ROAMFLEX.GETMSISDNSTATUS(:msi, :status, :remaining_credit); end;')
cursor.bind_param(':msi', '250979923')
cursor.bind_param(':status', nil, String, 20)
cursor.bind_param(':remaining_credit', nil, String, 50)
cursor.exec()
puts cursor[':status']
puts cursor[':remaining_credit_amount'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:06:53.950

您收到的错误

```
 PLS-00363: expression ' NULL' cannot be used as an assignment target 
```

意味着在存储过程中，一些参数被定义为IN OUT，这意味着它们必须是变量。使用参数来保存指示过程是通过还是失败的返回值是很常见的，尽管更常见的是使用可以返回布尔值 true/false 来指示成功的函数。

您需要向 DBA 提供您收到的错误消息，并要求您为正在调用的过程提供完整签名，该签名应该告诉您传入的哪些变量是 IN/OUT 变量。任何只有 IN 的都可以传递一个常量或 NULL，而那些 OUT 或 IN OUT 需要是变量，您可能需要根据您在这些变量中返回的内容来做一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-10T15:15:47.993

```
# PL/SQL records or object type parameters should be passed as Hash
# test_full_name is procedure name in oracle
# p_employee holds parameter list 
#employee_id is first param defined in stored procedure

require 'ruby-plsql'

p_employee = { :employee_id => 1, :first_name => 'First', :last_name => 'Last', :hire_date => Time.local(2000,01,31) }
 plsql.test_full_name(p_employee)   #plsql should hold connection object 
```

# html - box-sizing:border-box => 对于 IE8？

> ID：11608291
> 
> 赞同：20
> 
> 时间：2012-07-23T07:45:14.760
> 
> 标签：html, internet-explorer, css, internet-explorer-8

我想要标签`box-sizing: border-box`。`div`

对于**Mozilla Firefox**，我尝试过

```
 -moz-box-sizing: border-box; 
```

对于**IE（Internet Explorer）**，我已经尝试过以下两种方法

```
 -ms-box-sizing: border-box; 
            box-sizing: border-box; 
```

但它不能在**IE(Internet Explorer)**中工作。虽然我已经申请 `box-sizing: border-box;`了**Internet Explorer**，但它在元素的宽度上添加了边框和填充。为什么会这样？

应该是什么问题？请帮助和建议我。

**注意：**我使用的是**Internet Explorer8**和**Windows7 终极版**

**页码：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="MainPage.aspx.cs" Inherits="MainPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta http-equiv="x-ua-compatible" content="IE=8"/>

    <title></title>
    <style type="text/css">
        *
        {
            box-sizing: border-box; /*it gives error:Validation (CSS 2.1): 'box-sizing' is not a known CSS property name. */
            -ms-box-sizing: border-box; 
            -moz-box-sizing: border-box; 
            -webkit-box-sizing: border-box; 
            }
        body
        {
            background: lightblue;
            color: #000000;
            font-family: Trebuchet MS, Arial, Times New Roman;
            font-size: 12px;
        }
        #header
        {
            background: #838283;
            height: 200px;
            width: 1200px;
        }
        #wrapper
        {
            background: #FFFFFF;
            margin: 0px auto;
            width: 1200px;
            height: 1024px;
        }
        #navigation
        {
            background: #a2a2a2;
            float: left;

            margin: 0px 0px;
            width: 1200px;
            height: 25px;
            padding: 3px;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div id="wrapper">
        <div id="header">
            <h1>
                Header goes here</h1>
            <br />
            <h2 style="font-size: 60px;">
                ST ERP by Shanti Technology</h2>
        </div>
        <div id="navigation">
        </div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-23T07:49:03.020

IE8 支持无前缀版本`box-sizing`，但与所有“新”CSS 功能一样，它仅在标准模式下支持。`-ms-box-sizing`从未被任何版本的 IE 使用过。

确保您的页面具有 doctype 声明以在浏览器中触发标准模式。您还应该将 unprefixed 放在所有前缀`box-sizing` *之后*，而不是*在*它们之前，并摆脱它，`-ms-box-sizing`因为它真的不需要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-16T13:48:08.233

如果您同时使用 min-width 或 min-height，box-sizing 在 IE8（标准模式）中将卡为“content-box”，即指定border-box 将无效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T07:59:29.423

IE8+ 支持 box-sizing。

**支持：**

```
 Opera 8.5+  : box-sizing
    Firefox 1+  : -moz-box-sizing (still prefixed, though some are pushing to have it unprefixed for [Firefox 29][2]).
    Safari 3    : -webkit-box-sizing (unprefixed in modern versions)
    IE8+        : box-sizing 
```

[请查看此 jsFiddle](http://jsfiddle.net/randeep161/QqHBD/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T07:48:06.173

box-sizing 支持 IE8+

你可以[在这里看到](http://www.caniuse.com/#search=box-sizing)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T07:58:04.043

你不见了`box-sizing: border-box;`——

```
*{
  box-sizing: border-box;

  -moz-box-sizing: border-box; 
  -webkit-box-sizing: border-box; 
} 
```

IE 不需要供应商特定`-ms-box-sizing: border-box;`的 CSS 不需要

**小提琴**- [http://jsfiddle.net/ctHh3/](http://jsfiddle.net/ctHh3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-28T03:42:00.973

把它放在你的页面中，问题解决了

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"/> 
```

# sql - 如何在sql中自动索引两列

> ID：11608300
> 
> 赞同：0
> 
> 时间：2012-07-23T07:45:49.603
> 
> 标签：sql, sql-server, sql-server-2005, indexing

我在 sql 中有一个表有两个字段'JOB_NUMBER''SRno'，两者之间的关系是这样的，每个作业号都有许多从 1、2、3 开始的 SRNO，依此类推，每个新的作业号都必须有一个 SR没有起始表格1，

所以我理想的桌子应该是这样的：

```
JOB_NUMBER    SRno
   1            1
   1            2 
   1            3
   2            1
   2            2
   3            1 and so on....... 
```

我想要做的是在 sql 本身中实现这个索引，我可以这样做，是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:51:17.240

您的意思是自动编号（索引在 DBMS 中有所不同）。可以使用触发器来实现。但这是特定于 DBMS 的问题。检查您的数据库是否支持触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:11:23.440

你在找这样的东西吗..

```
select JOB_NUMBER,ROW_NUMBER() over(partition by JOB_NUMBER order by JOB_NUMBER) 
as SRno from table_jobs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:35:14.093

如果表上有另一列类似于时间戳（例如提交时间），那么您可以执行以下操作：

```
select job_number, 
   row_number() over (partition by job_number order by time_submitted asc) as SRno
from tbl 
```

你可以把它变成一个视图，你很高兴。请记住，这对数据修改很敏感（即，如果有人在另外两行之间插入一行，则插入后的行将被“重新编号”）。还要记住，这不会将 SRno 存储在表上；它必须动态计算。

# java - 我不能在 SortedSet 中放入 null 吗？

> ID：11608301
> 
> 赞同：8
> 
> 时间：2012-07-23T07:45:50.760
> 
> 标签：java, collections, treeset, sortedset

我认为这`null`是允许的`Set`。
那么为什么下面的代码：

```
SortedSet<Integer> set = new TreeSet<Integer>();  
set.add(null);  
set.add(1);  //--->Line indicated by exception 
```

给出以下异常？

> java.lang.Integer.compareTo(Unknown Source) 处
> java.lang.Integer.compareTo(Unknown Source) 处
> java.util.TreeMap.put(Unknown Source) 处的线程“main”java.lang.NullPointerException 中的异常
> 。 util.TreeSet.add（未知来源）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T07:48:23.260

是的你可以。但是当与您的集合中的任何其他内容进行比较时，您将不得不提供自己的[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)来处理这种情况。`null`应用自然排序后，Java 对象不知道如何将自己与`null`. 相反，`null`不知道如何将自己与您无法调用的任何对象进行比较`null.compareTo(object)`。

这种“空安全”的示例实现`Comparator`可以在 apache [commons-collections](http://commons.apache.org/collections/)库中找到。查看[`NullComparator`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/comparators/NullComparator.html). 你可以这样使用它：

```
// Unfortunately no support for Java generics yet, in commons-collections
@SuppressWarnings("unchecked")
SortedSet<Integer> set = new TreeSet<Integer>(new NullComparator());  
set.add(null);  
set.add(1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T07:49:29.420

TreeSet 的 API（[http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#add(E)](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#add%28E%29)）说 add 会抛出一个 NPE：

> 如果指定元素为空且此集合使用自然排序，或者其比较器不允许空元素

因此，如果您想存储 null ，则必须提供一个 Comparator 来处理此问题，并且知道 null 与 0 或所有其他值相比的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:50:16.343

您可以创建自己的“null”值，而不是创建 Comparator。

```
static final Integer NULL = Integer.MIN_VALUE;

set.add(NULL): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T09:06:45.113

您不能将空值插入 TreeSet。从 JDK 1.7 开始，TreeSet 不接受 null。将 null 值插入 TreeSet 将引发 NullPointerException，原因是在插入 null 时，它会与现有元素进行比较，并且 null 不能与任何值进行比较。直到 JDK 1.6，第一个元素插入可以为 null，但任何更多的 null 元素将导致 NullPointerException。

如果必须添加 null，在这种情况下，您必须编写自己的自定义比较器来处理 null，或者使用 commons-collections 提供的 NullComparator()。

# asp.net-mvc-3 - 如何在使用 mvc3 输入文本框时进行验证

> ID：11608302
> 
> 赞同：1
> 
> 时间：2012-07-23T07:45:53.763
> 
> 标签：asp.net-mvc-3

在我的页面中，我有 5 个`TextBoxes`和 1 个`DropDownlist`盒子

1.  名称（它应该只允许字母）
2.  用户名（它应该允许字母和数字）
3.  EmailID（电子邮件格式）
4.  电话号码（仅限整数
5.  性别
6.  密码（字母和数字的组合）

**上述内容应在键入时进行验证，如果格式正确，则应显示刻度图像.....**

如果我们在不输入数据的情况下按 Tab，则错误消息应显示在`TextBox` 请帮助我...

我对 mvc3 比较陌生。

```
Below is the code i have created. Now I need to validate.... please tell me how to do it
    <table>   

    <tr>
    <td> @Html.Label("FirstdName")</td>
           <td>  @Html.TextBox("FirstName")</td>
      <td>   @Html.ValidationMessageFor(x => x.FirstName)</td>
    </tr>

      <tr>
    <td> @Html.Label("Username")</td>
           <td>  @Html.TextBox("Username")</td>
      <td>   @Html.ValidationMessageFor(x => x.Username)</td>
    </tr>

      <tr>
    <td> @Html.Label("Password")</td>
           <td>  @Html.TextBox("Password")</td>
      <td>   @Html.ValidationMessageFor(x => x.Password)</td>
    </tr>
    <tr>

      <td> @Html.Label("ConfirmPassword")</td>
           <td>  @Html.TextBox("ConfirmPassword")</td>
      <td>   @Html.ValidationMessageFor(x => x.ConfirmPassword)</td>
    </tr>

      <tr>
    <td> @Html.Label("Phone")</td>
           <td>  @Html.TextBox("Phone")</td>
      <td>   @Html.ValidationMessageFor(x => x.Phone)</td>
    </tr>

      <tr>
       <td> @Html.Label("Gender")</td>
    <td>  @Html.DropDownListFor(Per => Per.Gender, new[]{
    new SelectListItem(){Text="Male",Value="Male"},
    new SelectListItem(){Text="Female",Value="Female"},
}, "--Select--")</td>
      <td>   @Html.ValidationMessageFor(x => x.Gender)</td>

    </tr>

      <tr>
    <td> @Html.Label("Email")</td>
           <td>  @Html.TextBox("Email")</td>
      <td>   @Html.ValidationMessageFor(x => x.Email)</td>
    </tr>
    </table>

    <input type="submit" value="Ok" />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:58:30.827

MVC 3 中的验证基于我们与视图绑定的模型的注解或属性。看看[这个](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic)，你就会知道。当您放置 Validation Attributes 时，它们会在不显眼的 javascript 的帮助下在客户端进行处理。它处理应该自动处理的方式。添加自定义逻辑可以在 jquery 的帮助下完成（比如交替显示刻度线和消息）。Raj，在这里，当您尚未尝试时，您将无法获得为您制作的代码片段。所以这是一条一般建议。提出您所面临的问题，您将得到您令人敬畏的兄弟会的帮助。和偏离轨道欢迎来到科技世界老兄！

# php - 下拉列表中的 Yii 复选框

> ID：11608318
> 
> 赞同：4
> 
> 时间：2012-07-23T07:47:00.480
> 
> 标签：php, yii, yii-extensions

我正在开发带有`Yii`框架的应用程序。我需要从带有复选框的下拉列表中作为该列表的值。我一直在寻找这个，但没有找到任何东西。有人可以帮我完成这项任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:06:25.930

这是一个 Yii 扩展的链接，它完全符合您的要求！

[Yii 框架扩展：echmultiselect](http://www.yiiframework.com/extension/echmultiselect/)

除此之外，还有其他 Yii 的多选功能扩展也很有趣！您可能还想看看这些！

[Yii 框架扩展：Select2](http://www.yiiframework.com/extension/select2/)

[Yii 框架扩展：emuliselect](http://www.yiiframework.com/extension/emultiselect)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-21T10:11:19.350

你可以这样做（在这个例子中，你的模型必须有一个公共字段 $availableLanguages）：

```
<?= $yourActiveForm->field($model, 'availableLanguages', ['template' => "
<div class='dropdown'>
    <button
    class='btn btn-default dropdown-toggle'
    data-toggle='dropdown'
    type='button'>
        <span>Select languages</span>
        <span class='caret'></span>
    </button>
    {input}
</div>"])->checkboxList(
[
    'FR'=>'France',
    'DE'=>'Germany'
],
[
    'tag' => 'ul',
    'class' => 'dropdown-menu',
    'item' => function ($index, $label, $name, $checked, $value) {
        return '<li>' . Html::checkbox($name, $checked, [
            'value' => $value,
            'label' => Html::encode($label),
        ]) . '</li>';
    }
]); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T16:41:48.067

您可以创建一个简单的文本框，当用户单击时，您会显示一个复选框列表

```
<div id="listOfDays">
                        <span><?php echo Yii::t('frontend','CHOOSE_DAY'); ?> </span>
                        </div>
                        <div id="itemslistOfDays" style="display:none;position:absolute;z-index:10;background-color:white; width:300px">
                        <?php
                        echo $form->checkBoxList($model, 'freq_details', array(
                            '1'=>Yii::t('frontend','MONDAY'),
                            '2'=>Yii::t('frontend','TUESDAY'),
                            '3'=>Yii::t('frontend','WEDNESDAY'),
                            '4'=>Yii::t('frontend','THURSDAY'),
                            '5'=>Yii::t('frontend','FRIDAY'),
                            '6'=>Yii::t('frontend','SATURDAY'),
                            '7'=>Yii::t('frontend','SUNDAY'),                       
                            )); ?>

                        </div> 
```

您必须编写一些 javascript 或 jquery 才能隐藏、显示和绑定单击事件

# c# - 使用 Socket 将文件从 Java 发送到 C#

> ID：11608322
> 
> 赞同：0
> 
> 时间：2012-07-23T07:47:19.073
> 
> 标签：c#, java, android, sockets, file-transfer

谁能给我一个关于如何将文件从 java 服务器发送到 c# 客户端以及从 c# 到 java 接收完整确认消息的小教程。实际上我是 C# 新手，不知道如何进行套接字编程。我被困在里面很久了。试了很多代码。一些代码收到不完整的文件，一些文件陷入无限循环。请在这方面帮助我。谢谢

**编辑** 这是我尝试过的：

C# 服务器：

```
{

            IPAddress ipAd = IPAddress.Parse("192.168.1.131");
            // use local m/c IP address, and 

            // use the same in the client

            /* Initializes the Listener */
            TcpListener myList = new TcpListener(ipAd, 5600);

            /* Start Listeneting at the specified port */
            myList.Start();

            Console.WriteLine("The server is running at port 5600...");
            Console.WriteLine("The local End point is  :" +
                              myList.LocalEndpoint);
            Console.WriteLine("Waiting for a connection.....");
        m:
            clientSock = myList.AcceptSocket();

            //clientSock.SetSocketOption(SocketOptionLevel.Socket,SocketOptionName.ReceiveTimeout,10000);

            Console.WriteLine("Connection accepted from " + clientSock.RemoteEndPoint);

            //byte[] b = new byte[100];
            //int k = clientSock.Receive(b);
            string fileName = "hello.wav";

            NetworkStream networkStream = new NetworkStream(clientSock);

            StreamReader sr = new StreamReader(networkStream);

            //read file length
            int length = int.Parse(sr.ReadLine());

            if (networkStream.CanRead)
            {
                BinaryWriter bWrite = new BinaryWriter(File.Open(receivedPath + fileName, FileMode.Create));
                int receivedBytesLen = -1;
                byte[] clientData = new byte[4096 * 5000];

                receivedBytesLen = networkStream.Read(clientData, 0, clientData.Length);
                bWrite.Write(clientData, 0, receivedBytesLen);

                 do
                {
                    receivedBytesLen = networkStream.Read(clientData, 0,clientData .Length);
                    bWrite.Write(clientData, 0, receivedBytesLen);
                } while (receivedBytesLen > 0);

                bWrite.Close();
                networkStream.Close();

            }

            Console.WriteLine("Client:{0} connected & File {1} started received.", clientSock.RemoteEndPoint, fileName);
            Console.WriteLine("File: {0} received & saved at path: {1}", fileName, receivedPath);

            Recognizer_2 recognizeVoice = new Recognizer_2(clientSock);
            recognizeVoice.recognize_wav(); // Acknowledgement 
            Console.WriteLine("\nResult Sent to the Client");
            goto m;
        } 
```

Java客户端：

```
 Socket socket = new Socket("192.168.1.131", 5600);

        BufferedReader response_Stream = new BufferedReader(
                new InputStreamReader(socket.getInputStream()));
        File f = new File(mFileName);
        byte[] buffer = new byte[(int) f.length()];
        FileInputStream fis = new FileInputStream(f);

        BufferedInputStream bis = new BufferedInputStream(fis);

        bis.read(buffer, 0, buffer.length);
        OutputStream outputStream = socket.getOutputStream();
        outputStream.write(buffer);

        outputStream.flush();

        String final_Result_String = "";

        if (response_Stream != null) {
            String respose_text = "";
            while ((respose_text = response_Stream.readLine()) != null) {

                final_Result_String += respose_text;

            }

        }

        Toast.makeText(getApplicationContext(), final_Result_String, 1)
                .show();
        outputStream.close();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:52:38.837

服务器或客户端使用的语言之间没有依赖关系。

只是数据的结构很重要！

您应该搜索一些关于使用 C# 进行套接字编程的教程。例如： http: [//www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-using](http://www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-using)

但语言无关紧要，了解数据在网络上发送时的格式。

编辑：您应该在数据中添加一两个字节来指示它的长度。这并不是因为您一旦收到所有数据就没有数据可读取。

# linux - 使用 awk 从文件中读取元组

> ID：11608323
> 
> 赞同：1
> 
> 时间：2012-07-23T07:47:26.770
> 
> 标签：linux, bash, shell, awk

嗨，我需要一个脚本来使用 awk 从 /proc/interrupts 文件中读取 eth 中断数，并找到每个 CPU 内核的中断总数。然后我想在 bash 中使用它们。文件的内容是；

```
 CPU0       CPU1       CPU2       CPU3

47:   33568      45958      46028      49191     PCI-MSI-edge    eth0-rx-0
48:     0          0          0          0       PCI-MSI-edge      eth0-tx-0
49:     1          0          1          0       PCI-MSI-edge      eth0
50:   28217      42237      65203      39086     PCI-MSI-edge    eth1-rx-0
51:     0          0          0          0       PCI-MSI-edge      eth1-tx-0
52:     0          1          0          1       PCI-MSI-edge      eth1
59:     114991     338765      77952     134850  PCI-MSI-edge eth4-rx-0
60:     429029     315813     710091      26714  PCI-MSI-edge eth4-tx-0
61:      5          2          1          5      PCI-MSI-edge     eth4
62:    1647083     208840    1164288     933967  PCI-MSI-edge eth5-rx-0
63:     673787    1542662     195326    1329903  PCI-MSI-edge eth5-tx-0
64:     5          6          7          4       PCI-MSI-edge      eth5 
```

我在这段代码中用 awk 读取这个文件：

```
#!/bin/bash

 FILE="/proc/interrupts"

 output=$(awk 'NR==1 {
 core_count = NF 
 print core_count
 next
}
/eth/ {
 for (i = 2; i <= 2+core_count; i++)
 totals[i-2] += $i
}

END {
 for (i = 0; i < core_count; i++)
 printf("%d\n", totals[i])
}
' $FILE)

core_count=$(echo $output | cut -d' ' -f1)

output=$(echo $output | sed 's/^[0-9]*//')

totals=(${output// / }) 
```

在这种方法中，我处理总核心数，然后处理每个核心的总中断，以便在我的脚本中对它们进行排序。但我只能处理总数数组中的数字，例如这个，

```
 totals[0]=22222
    totals[1]=33333 
```

但是我需要将它们作为具有 CPU 内核名称的元组来处理。

```
 totals[0]=(cPU1,2222)
    totals[1]=(CPU',3333) 
```

我想我必须将名称分配给一个数组，并将它们作为我的 SED 中的元组读入 bash。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:21:40.943

首先，bash 中没有“元组”这样的东西。阵列是完全平坦的。这意味着您要么有一个“标量”变量，要么有一个级别的标量数组。

您面临的任务有多种方法。任何一个：

1.  如果您使用的是足够新的 bash（4.2 AFAIR），则可以使用关联数组（散列、映射或您如何称呼它）。然后，CPU 名称将是键，数字将是值；
2.  创建一个普通数组（类似 perl 的哈希），其中奇数索引将包含键（CPU 名称），偶数索引将包含值。
3.  创建两个单独的数组，一个带有 CPU 名称，另一个带有值，
4.  只创建一个数组，CPU 名称与值之间用某个符号（即`=`或`:`）分隔。

* * *

让我们先介绍方法 2：

```
#!/bin/bash

FILE="/proc/interrupts"

output=$(awk 'NR==1 {
    core_count = NF
    for (i = 1; i <= core_count; i++)
        names[i-1] = $i
    next
}
/eth/ {
    for (i = 2; i <= 2+core_count; i++)
        totals[i-2] += $i
}

END {
    for (i = 0; i < core_count; i++)
        printf("%s %d\n", names[i], totals[i])
}
' ${FILE})

core_count=$(echo "${output}" | wc -l)
totals=(${output}) 
```

请注意我为使脚本更简单而进行的一些更改：

1.  awk 现在输出“cpu-name number”，每行一个，用一个空格分隔；
2.  核心数不是由 awk 输出的（以避免预处理输出），而是从输出中的行数推导出来的，
3.  该`totals`数组是通过展平输出创建的——空格和换行符都将被视为空格并用于分隔值。

结果数组如下所示：

```
totals=( CPU0 12345 CPU1 23456 ) # ... 
```

要对其进行迭代，您可以使用类似（简单的方法）：

```
set -- "${totals[@}}"
while [[ $# -gt 0 ]]; do
    cpuname=${1}
    value=${2}

    # ...

    shift;shift
done 
```

* * *

现在让我们为方法 1 修改它：

```
#!/bin/bash

FILE="/proc/interrupts"

output=$(awk 'NR==1 {
    core_count = NF
    for (i = 1; i <= core_count; i++)
        names[i-1] = $i
    next
}
/eth/ {
    for (i = 2; i <= 2+core_count; i++)
        totals[i-2] += $i
}

END {
    for (i = 0; i < core_count; i++)
        printf("[%s]=%d\n", names[i], totals[i])
}
' ${FILE})

core_count=$(echo "${output}" | wc -l)
declare -A totals
eval totals=( ${output} ) 
```

注意：

1.  已更改 awk 输出格式以适应关联数组语义，
2.  `totals`被声明为关联数组 ( `declare -A`)，
3.  可悲的是，`eval`必须用来让 bash 直接处理输出。

结果数组如下所示：

```
declare -A totals=( [CPU0]=12345 [CPU1]=23456 ) 
```

现在您可以使用：

```
echo ${totals[CPU0]}

for cpu in "${!totals[@]}"; do
    echo "For CPU ${cpu}: ${totals[${cpu}]}"
done 
```

* * *

第三种方法可以通过多种不同的方式完成。假设您可以允许两次读取`/proc/interrupts`，您甚至可以这样做：

```
FILE="/proc/interrupts"

output=$(awk 'NR==1 {
    core_count = NF
    next
}
/eth/ {
    for (i = 2; i <= 2+core_count; i++)
        totals[i-2] += $i
}

END {
    for (i = 0; i < core_count; i++)
        printf("%d\n", totals[i])
}
' ${FILE})

core_count=$(echo "${output}" | wc -l)
names=( $(cat /proc/interrupts | head -n 1) )
totals=( ${output} ) 
```

所以，现在 awk 再次只输出计数，而名称是通过 bash`/proc/interrupts`直接从第一行获取的。或者，您可以从方法 (2) 中获得的单个数组创建拆分数组，或者以其他方式解析 awk 输出。

结果将在两个数组中：

```
names=( CPU0 CPU1 )
totals=( 12345 23456 ) 
```

并输出：

```
for (( i = 0; i < core_count; i++ )); do
    echo "${names[$i]} -> ${totals[$i]}"
done 
```

* * *

最后一种方法：

```
#!/bin/bash

FILE="/proc/interrupts"

output=$(awk 'NR==1 {
    core_count = NF
    for (i = 1; i <= core_count; i++)
        names[i-1] = $i
    next
}
/eth/ {
    for (i = 2; i <= 2+core_count; i++)
        totals[i-2] += $i
}

END {
    for (i = 0; i < core_count; i++)
        printf("%s=%d\n", names[i], totals[i])
}
' ${FILE})

core_count=$(echo "${output}" | wc -l)
totals=( ${output} ) 
```

现在（常规）数组看起来像：

```
totals=( CPU0=12345 CPU1=23456 ) 
```

你可以像这样解析它：

```
for x in "${totals[@]}"; do
    name=${x%=*}
    value=${x#*=}
    echo "${name} -> ${value}"
done 
```

（现在请注意，拆分 CPU 名称和值发生在循环中）。

# php - 在 PHP 的每次迭代中保留一个计数器变量与使用 count()

> ID：11608329
> 
> 赞同：0
> 
> 时间：2012-07-23T07:48:08.637
> 
> 标签：php, optimization, micro-optimization

在无限循环中，我想根据数组中元素的数量进行突破。说：

```
$myarr = array();

While (True){
    //... do something that modifies $myarr ...
    if (count($myarr) > 100000) { break; }
} 
```

问题是，每次我尝试以这种方式编写代码时，微优化的想法都会在我脑海中蔓延（怪我）。我告诉自己：为什么不直接使用变量来跟踪数组中的元素数量呢？像这样：

```
$myarr = array();
$n_myarr = 0;

while (True){
    // ... do something that modifies $myarr
    if ( ... elements added ... )
        { $n_myarr += $n_elements_added; }

    else if ( ... elements removed ... )
        { $n_myarr -= $n_elements_removed; }

    if ($n_myarr > 1000000) { break; }
} 
```

据我了解，count() 的执行方式完全取决于 count() 和数组的底层实现。如果可以的话，我总是喜欢用更简单的方式编写，比如第一个代码片段。任何人都可以在这个问题上启发我吗？特别是，count() 如何在幕后工作？

谢谢你。

-蒂顿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:59:44.050

在编写了一个小基准脚本之后，我想我已经找到了答案。这是脚本的代码：

```
<?php

$n_iteration = 1e7;

$test_sizes = array(
    1e2, 1e3, 1e4, 1e5, 1e6, 2e6, 3e6, 4e6, 5e6
);

foreach ($test_sizes as $test_size){
    $test_array = range(1, $test_size);

    $start_time = microtime(true);

    for ($i = 0; $i < $n_iteration; $i++)
        { $x = count($test_array); }

    $end_time = microtime(true);
    $interval = $end_time - $start_time;
    printf(
        "Iterations: %d, Size: %8.d,"
        ." Total time: %6.3f sec, Avg. time: %1.3e sec\n",
        $n_iteration, $test_size, $interval, $interval/$n_iteration);

} 
```

使用“PHP 5.4.4-2 (cli) (built: Jun 19 2012 07:38:55)”在我的机器上运行脚本会产生以下输出：

```
Iterations: 10000000, Size:      100, Total time:  3.548 sec, Avg. time: 3.548e-7 sec
Iterations: 10000000, Size:     1000, Total time:  3.368 sec, Avg. time: 3.368e-7 sec
Iterations: 10000000, Size:    10000, Total time:  3.549 sec, Avg. time: 3.549e-7 sec
Iterations: 10000000, Size:   100000, Total time:  3.407 sec, Avg. time: 3.407e-7 sec
Iterations: 10000000, Size:  1000000, Total time:  4.557 sec, Avg. time: 4.557e-7 sec
Iterations: 10000000, Size:  2000000, Total time:  3.263 sec, Avg. time: 3.263e-7 sec
Iterations: 10000000, Size:  3000000, Total time:  3.574 sec, Avg. time: 3.574e-7 sec
Iterations: 10000000, Size:  4000000, Total time:  4.047 sec, Avg. time: 4.047e-7 sec
Iterations: 10000000, Size:  5000000, Total time:  3.628 sec, Avg. time: 3.628e-7 sec 
```

正如我们所看到的，平均。在单个 count() 中花费的时间大约是恒定的，大约为 0.4 微秒，与数组的大小无关。

**结论：**

PHP 本身以一种有效的方式跟踪数组中元素的数量（count() 的运行时间成本为 O(1)）。无需使用额外的变量来提高效率。

***count() 对于语法清晰度和效率都是健康的。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:54:43.353

如果您正在寻求更快的处理速度，第二个代码将执行得更快，因为您没有使用该功能，如果您寻找计数功能[http://bg2.php.net/manual/en/function.count.php](http://bg2.php.net/manual/en/function.count.php)您可以看到它是从一个类中实现的，而且我们都知道 OOP 比过程代码慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-23T15:21:24.850

你应该缓存 的结果`count()`，它可能不会有太大的*不同*，但它仍然是一个简单的优化。调用计数与缓存结果大约慢 4 倍。

> 代码

```
$array = range(0,100000);

for($x = 100; $x <= 1000000; $x += 100) {

    $countResults = [];
    $staticResults = [];

    for($i = 0; $i < $x; $i++) {

        $start = microtime(true);
        for($j = 0; $j < count($array); $j++) {}
        $end = microtime(true);

        $countResults[] = $end-$start;

        $start = microtime(true);
        $size = count($array);
        for($j = 0; $j < $size; $j++) {}
        $end = microtime(true);

        $staticResults[] = $end-$start;

    }

    $countSum = array_sum($countResults);

    echo sprintf(
         "Count  - Iterations: %d; Total Time: %05.6f; Avg time: %05.6f\n",
         $x,
         $countSum,
         $countSum/$x
     );

    $staticSum = array_sum($staticResults);

    echo sprintf(
         "Static - Iterations: %d; Total Time: %05.6f; Avg time: %05.6f\n",
         $x,
         $staticSum,
         $staticSum/$x
     );

} 
```

> 结果：

```
Count  - Iterations: 100; Total Time: 0.962752; Avg time: 0.009628
Static - Iterations: 100; Total Time: 0.253768; Avg time: 0.002538
Count  - Iterations: 200; Total Time: 2.258045; Avg time: 0.011290
Static - Iterations: 200; Total Time: 0.579273; Avg time: 0.002896
Count  - Iterations: 300; Total Time: 2.907984; Avg time: 0.009693
Static - Iterations: 300; Total Time: 0.786796; Avg time: 0.002623
Count  - Iterations: 400; Total Time: 3.756074; Avg time: 0.009390
Static - Iterations: 400; Total Time: 1.004253; Avg time: 0.002511
Count  - Iterations: 500; Total Time: 5.086776; Avg time: 0.010174
Static - Iterations: 500; Total Time: 1.363288; Avg time: 0.002727
Count  - Iterations: 600; Total Time: 6.626471; Avg time: 0.011044
Static - Iterations: 600; Total Time: 1.793517; Avg time: 0.002989
Count  - Iterations: 700; Total Time: 6.780818; Avg time: 0.009687
Static - Iterations: 700; Total Time: 1.816578; Avg time: 0.002595
Count  - Iterations: 800; Total Time: 7.640220; Avg time: 0.009550
Static - Iterations: 800; Total Time: 2.026010; Avg time: 0.002533
Count  - Iterations: 900; Total Time: 8.436923; Avg time: 0.009374
Static - Iterations: 900; Total Time: 2.237418; Avg time: 0.002486
Count  - Iterations: 1000; Total Time: 9.483782; Avg time: 0.009484
Static - Iterations: 1000; Total Time: 2.520293; Avg time: 0.002520
Count  - Iterations: 1100; Total Time: 10.492371; Avg time: 0.009539
Static - Iterations: 1100; Total Time: 2.803949; Avg time: 0.002549
Count  - Iterations: 1200; Total Time: 11.305185; Avg time: 0.009421
Static - Iterations: 1200; Total Time: 3.027705; Avg time: 0.002523
Count  - Iterations: 1300; Total Time: 12.249071; Avg time: 0.009422
Static - Iterations: 1300; Total Time: 3.265644; Avg time: 0.002512
Count  - Iterations: 1400; Total Time: 13.166538; Avg time: 0.009405
Static - Iterations: 1400; Total Time: 3.499845; Avg time: 0.002500
Count  - Iterations: 1500; Total Time: 14.204276; Avg time: 0.009470
Static - Iterations: 1500; Total Time: 3.776997; Avg time: 0.002518
Count  - Iterations: 1600; Total Time: 15.280157; Avg time: 0.009550
Static - Iterations: 1600; Total Time: 4.076611; Avg time: 0.002548
Count  - Iterations: 1700; Total Time: 15.938380; Avg time: 0.009376
Static - Iterations: 1700; Total Time: 4.246082; Avg time: 0.002498
Count  - Iterations: 1800; Total Time: 16.967943; Avg time: 0.009427
Static - Iterations: 1800; Total Time: 4.493304; Avg time: 0.002496
Count  - Iterations: 1900; Total Time: 17.870854; Avg time: 0.009406
Static - Iterations: 1900; Total Time: 4.749316; Avg time: 0.002500
Count  - Iterations: 2000; Total Time: 18.900052; Avg time: 0.009450
Static - Iterations: 2000; Total Time: 5.038069; Avg time: 0.002519
Count  - Iterations: 2100; Total Time: 20.487390; Avg time: 0.009756
Static - Iterations: 2100; Total Time: 5.480530; Avg time: 0.002610
Count  - Iterations: 2200; Total Time: 21.328690; Avg time: 0.009695
Static - Iterations: 2200; Total Time: 5.671044; Avg time: 0.002578
Count  - Iterations: 2300; Total Time: 22.270163; Avg time: 0.009683
Static - Iterations: 2300; Total Time: 5.906530; Avg time: 0.002568
Count  - Iterations: 2400; Total Time: 23.392992; Avg time: 0.009747
Static - Iterations: 2400; Total Time: 6.225149; Avg time: 0.002594
Count  - Iterations: 2500; Total Time: 24.346405; Avg time: 0.009739
Static - Iterations: 2500; Total Time: 6.494287; Avg time: 0.002598 
```

# iphone - GPUImage：混合两个图像

> ID：11608332
> 
> 赞同：7
> 
> 时间：2012-07-23T07:48:23.673
> 
> 标签：iphone, objective-c, image-processing, gpuimage

我正在使用 GPUImage 框架（一些旧版本）来混合两个图像（将边框覆盖添加到某个图像）。在我更新到最新的框架版本后，应用这种混合后，我得到一个空的黑色图像。

我正在使用下一个方法：

```
- (void)addBorder {
    if (currentBorder != kBorderInitialValue) {
        GPUImageAlphaBlendFilter *blendFilter = [[GPUImageAlphaBlendFilter alloc] init];
        GPUImagePicture *imageToProcess = [[GPUImagePicture alloc] initWithImage:self.imageToWorkWithView.image];
        GPUImagePicture *border = [[GPUImagePicture alloc] initWithImage:self.imageBorder];

        blendFilter.mix = 1.0f;
        [imageToProcess addTarget:blendFilter];
        [border addTarget:blendFilter];

        [imageToProcess processImage];
        self.imageToWorkWithView.image = [blendFilter imageFromCurrentlyProcessedOutput];

        [blendFilter release];
        [imageToProcess release];
        [border release];
    }
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T16:19:11.963

您忘记处理边框图像。之后`[imageToProcess processImage]`，添加以下行：

```
[border processImage]; 
```

对于要输入混合的两个图像，您必须在将`-processImage`它们添加到混合过滤器后同时使用它们。我更改了混合过滤器的工作方式以修复一些错误，这就是您现在需要做的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-09T11:10:45.537

这是我目前用于将两个图像与 GPUImageAlphaBlendFilter 合并的代码。

```
GPUImagePicture *mainPicture = [[GPUImagePicture alloc] initWithImage:image];
GPUImagePicture *topPicture = [[GPUImagePicture alloc] initWithImage:blurredImage];

GPUImageAlphaBlendFilter *blendFilter = [[GPUImageAlphaBlendFilter alloc] init];
[blendFilter setMix:0.5];

[mainPicture addTarget:blendFilter];
[topPicture addTarget:blendFilter];

[blendFilter useNextFrameForImageCapture];
[mainPicture processImage];
[topPicture processImage];

UIImage * mergedImage = [blendFilter imageFromCurrentFramebuffer]; 
```

# objective-c - 在另一个下方添加按钮

> ID：11608335
> 
> 赞同：0
> 
> 时间：2012-07-23T07:48:58.480
> 
> 标签：objective-c, ios

我想在另一个下方添加按钮。我有这个简单的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    for(int i=0 ; i<9 ; i++)
    {
        UIButton *myButton = [[UIButton alloc] init];
        myButton.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height/10); //this "10" i want also dynamically
        myButton.backgroundColor = [UIColor blackColor];
        [self.view addSubview:myButton];
    }

} 
```

我当然知道它会一个接一个。但是我可以在**不知道高度**的情况下在循环中执行它吗（因为高将取决于循环中有多少按钮）。

我想要达到的目标：

![纽扣](../Images/63028f080ba59421e92842ed554c41f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:12:17.960

试试这个：

```
- (void)viewDidLoad
  {
    [super viewDidLoad];
    int number = 10;

     for(int i=0 ; i<9 ; i++)
    {
    UIButton *myButton = [[UIButton alloc] init];
    myButton.frame = CGRectMake(self.view.frame.origin.x, (self.view.frame.size.height/number)*i + number, self.view.frame.size.width, self.view.frame.size.height/number);
    myButton.backgroundColor = [UIColor blackColor];
    [self.view addSubview:myButton];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:03:33.433

也许这可能有效？对不起，我已经很久没有使用`self.view.frame`过了，但你明白了。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    int number;

    for(int i=0 ; i<9 ; i++)
    {
        UIButton *myButton = [[UIButton alloc] init];
        myButton.frame = CGRectMake(i * self.view.frame.origin.x / number,
                                    self.view.frame.origin.y,
                                    self.view.frame.size.width,
                                    self.view.frame.size.height / number); //this "10" i want also dynamically
        myButton.backgroundColor = [UIColor blackColor];
        [self.view addSubview:myButton];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:47:59.733

您需要为正确显示定义按钮的大小，不幸**的是，如果没有按钮的大小，您将无法实现您想要**的，因为*系统如何知道您想要显示的按钮大小......？*

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    Float32 _spaceBetweenButtons = 8.f;
    Float32 _offsetY = 32.f;
    Float32 _buttonWidth = 300.f; // width fo button
    Float32 _buttonHeight = 32.f; // height of the button

    for (int i = 0 ; i < 9 ; i++) {
        UIButton *_myButton = [[UIButton alloc] initWithFrame:CGRectMake(0.f, 0.f, _buttonWidth, _buttonHeight)];
        [_myButton setBackgroundColor:[UIColor blackColor]];
        [_myButton setTitle:[NSString stringWithFormat:@"button #%d", i] forState:UIControlStateNormal]; // just add some text as title
        [self.view addSubview:_myButton];
        [_mybutton setCenter:CGPointMake(self.view.frame.size.width / 2.f, _offsetY + i * (myButton.frame.size.height + _spaceBetweenButtons))];
    }
} 
```

* * *

如果你想动态计算按钮的大小并且你想将按钮的高度与视图的高度对齐，这是一种方法：

```
NSInteger _numberOfButtons = 20;
Float32 _spaceBetweenButtons = 8.f;
Float32 _calculatedHeight = (self.view.frame.size.height - (_numberOfButtons + 1 * _spaceBetweenButtons)) / _numberOfButtons; 
```

并且方法与上面相同，但我不确定在数百个按钮的情况下您是否会获得良好的 UI。:)

# java - 在部署时连续运行类

> ID：11608342
> 
> 赞同：0
> 
> 时间：2012-07-23T07:49:13.783
> 
> 标签：java, tomcat

我有一个[监听器项目](http://java-by-ash.blogspot.com/2012/07/continuous-directory-listener.html)，我想实现一个网络版本。我需要它在部署时连续运行。换句话说，一旦应用程序部署到**Apache Tomcat 7.0.14.0**上，它就应该立即开始连续监听/运行，而不会影响 Web 应用程序的其余部分。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:56:59.360

根据您的描述，Tomcat 似乎希望 ServletContext 侦听器完成，然后再进入下一个部署阶段。在这种情况下，您可以将希望在后台进行的工作放入 Runnable 类中。

**RunClassOnDeployment.java**

```
package web.deployment;

import javax.servlet.ServletContext;

public class RunClassOnDeployment implements Runnable {

    ServletContext myServletContext; // in case you need the servelet context

    RunClassOnDeployment(ServletContext sc) {
           myServletContext = sc;
    }

    public void run() {
       Thread th = new Thread();
        try {
            for (int i = 1; i <= 100; i++) {
                System.out.println(i);
                th.sleep(1000);
            }
        } catch (InterruptedException e) {
            System.out.println("Thread interrupted! " + e);
        }
    }
} 
```

并在您的侦听器中使用 ExecutorService 将其关闭：

**MyListener.java**

```
package web.deployment;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class MyListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        System.out.println("ServletContextListener destroyed");
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
        ExecutorService executorService = Executors.newSingleThreadExecutor();
        executorService.submit(new RunClassOnDeployment(arg0.getServletContext()));
    }
} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>web.deployment.MyListener</listener-class>
    </listener>
</web-app> 
```

[下载](http://java-by-ash.blogspot.com/2012/07/threads-in-java-web-application.html)示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:39:25.207

你忘了开始你的话题

```
 @Override
    public void contextInitialized(ServletContextEvent arg0) {
        Thread th = new Thread();
....
th.start();
} 
```

但是 ExecutorService 的解决方案更安静！

而且...如果需要，您应该自动启动您的应用程序。

```
<load-on-startup>100</load-on-startup> 
```

# jquery - jQuery mobile, trigger to open when another element is clicked I have a list of options (not actual tags, just elements to click on), for example: A B C If I click A for eg., I want it to automatically open a select interface (using jQuery if

> ID：11608347
> 
> 赞同：1
> 
> 时间：2012-07-23T07:49:23.740
> 
> 标签：jquery, eventtrigger

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:59:13.153

那么你可以这样做： -

参考**[现场演示](http://jsfiddle.net/SivaCharan/WjaVk/)**

## HTML：

```
<ul>
    <li>A
        <select id="list">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </li>
    <li>B</li>
    <li>C</li>
</ul> 
```

## JS：

```
$('li').one('touchstart', function() {
    $('li #list').show();
}); 
```

**或者**

```
$('li').one('touchstart click', function() {
    $('#list', this).show();
}); 
```

基本上你应该使用`touchstart`作为事件。

# android - 在背景图像上设置可点击区域

> ID：11608348
> 
> 赞同：0
> 
> 时间：2012-07-23T07:49:26.160
> 
> 标签：android, layout

我正在开发一个适用于**移动**设备和**平板**设备的 Android 2.3.3 应用程序。

我有一个带有背景图像的主视图。此图像有按钮和其他文本，我想在这些按钮上创建一个可点击区域。它们不是真正的按钮，这些按钮是背景图像的一部分。

**我怎样才能做到这一点？**

也许我可以使用`ImageButton`没有图像，因为我不知道如何将按钮设置为透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:54:21.953

您可以使用 Framelayout 作为点击区域，只使用 ImageView 作为指示器。例如 ：

```
 <FrameLayout 
        android:id="@+id/play_button_frame"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@drawable/button_frame_colors">
        <ImageView 
            android:id="@+id/play_button_indicator"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="15dp"
            android:src="@drawable/button_indicator"
            android:background="@android:color/transparent"/>
        </FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:43:16.700

您还可以放置没有背景的布局。它肯定会如你所愿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:14:23.293

创建您的自定义 ImageView，定义区域（矩形或坐标）并侦听 onTouch 事件并在触摸事件发生时遍历您的列表，并在用户触摸定义的区域时做出反应

# cuda - 正确使用 cudaDeviceReset()

> ID：11608350
> 
> 赞同：5
> 
> 时间：2012-07-23T07:49:42.057
> 
> 标签：cuda

由于我怀疑“黑匣子”（GPU）没有在一些较大的代码中干净地关闭（[可能还有其他](https://stackoverflow.com/questions/10294595/handling-ctrlc-exception-with-gpu)代码），所以我会`cudaDeviceReset()`在`main()`. 可是等等！这将在析构函数中使用非平凡的 CUDA 代码`Segmentation fault`静态创建的所有类实例，对吗？`main()`例如

```
class A {
public:
  cudaEvent_t tt;
  cudaEvent_t uu;
  A() { 
    cudaEventCreate(&tt);
    cudaEventCreate(&uu);
  }
  ~A(){  
    cudaEventDestroy(tt);
    cudaEventDestroy(uu);
  }
}; 
```

静态实例化：

```
int main() {
  A t;
  cudaDeviceReset();
  return 0;
} 
```

退出时的段错误。问题：可能`cudaDeviceReset()`在退出时自动调用`main()`？

否则整个有用的代码`main()`应该被转移到 some `run()`，并且`cudaDeviceReset()`应该是 as last 命令`main()`，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:51:55.287

正如 Talonmies 所指出的，类 A 的析构函数是在 cudaDeviceReset() 函数已被调用之后调用的，即 main(..) 函数完成时。

我认为，您可以将 cudaDeviceReset() 带到 atexit(..) 函数中。

```
void myexit() {
  cudaDeviceReset();
}

int main(...) {
  atexit(myexit); 
  A t;
  return 0;
} 
```

# php - 正则表达式：如何检索包含 .php 后跟查询字符串的字符串

> ID：11608351
> 
> 赞同：0
> 
> 时间：2012-07-23T07:49:43.747
> 
> 标签：php, regex

根据上面的标题，你们有什么想法可以检索如下模式的图像源吗？

[http://www.google.com/test.php?uid=12345](http://www.google.com/test.php?uid=12345)

*注意：对于查询字符串值，它可以是除查询字符串值之前的任何值，它假设是一个固定字符串。

我目前的正则表达式看起来像这样......

```
/(<img[^>]*src=".*?(?:\.php\^)"[^>]*>)/i 
```

百万谢谢，如果你真的能帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:06:44.687

怎么样：

```
/(<img[^>]*src=".*?\.php(?:[^"]*)"[^>]*>)/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:21:37.787

我认为您需要使用 XPATH DOM 解析器从给定的 url 获取所有元素和内容。

**这是给你的简单例子**

```
$html = new DOMDocument();
libxml_use_internal_errors(TRUE);
@$html->loadHtmlFile('write your url here');
libxml_clear_errors();
$xpath = new DOMXPath( $html );

$nodelist = $xpath->query( "//div[@class='product-image']/img/@src" );

foreach ($nodelist1 as $n1){
    echo $n1->nodeValue;
} 
```

**此行的解释：** //div[@class='product-image']/img/@src 使用检查元素或页面视图源查找网页内的 img 标签。这里我的图像标签在 div 标签内，其类属性名称是产品图像。

有关 XPATH 的更多信息，请访问： [http](http://www.w3schools.com/xpath/xpath_syntax.asp) ://www.w3schools.com/xpath/xpath_syntax.asp http://manual.calibre-ebook.com/xpath.html

试试看.....谢谢....p2c

# asp.net - rdlc 报告中的自定义字体

> ID：11608354
> 
> 赞同：2
> 
> 时间：2012-07-23T07:50:09.807
> 
> 标签：asp.net, fonts, report, reportviewer, rdlc

我在设计模式下的 rdlc 报告中使用了一些自定义字体我可以在字体列表中看到它们并选择任何字体并将其应用于我的数据

在报表查看器中，我只看到 Verdana 字体的所有数据！

因此，如果我应该做任何配置来处理报表查看器的字体问题

我使用 asp web 报告查看器、asp rdlc 报告文件和我在系统字体中安装的自定义字体

# sockets - Jenkins 和 Active Directory 身份验证

> ID：11608360
> 
> 赞同：4
> 
> 时间：2012-07-23T07:50:21.387
> 
> 标签：sockets, active-directory, jenkins

我们正在尝试设置 Jenkins 以自动化构建。我们已经使用 Hudson 很长时间了，但现在由于 Active Directory 身份验证支持，我们正在迁移到 Jenkins。AD-plugin 已安装： [https](https://wiki.jenkins-ci.org/display/JENKINS/Active+Directory+plugin) ://wiki.jenkins-ci.org/display/JENKINS/Active+Directory+plugin 据我所知，Jenkins 正在尝试连接到 AD 服务器，但“套接字已关闭”错误。这是堆栈跟踪的一部分：

```
Failed to test the validity of the user name <SOMEUSER>
org.acegisecurity.BadCredentialsException: Failed to retrieve user information for <SOMEUSER>; nested exception is javax.naming.ServiceUnavailableException: <SOMENAME>.<SOMENAME>:636; socket closed; remaining name 'DC=<SOMENAME>,DC=<SOMENAME>'
at hudson.plugins.active_directory.ActiveDirectoryUnixAuthenticationProvider.retrieveUser(ActiveDirectoryUnixAuthenticationProvider.java:306)
at hudson.plugins.active_directory.ActiveDirectoryUnixAuthenticationProvider.retrieveUser(ActiveDirectoryUnixAuthenticationProvider.java:190)
at hudson.plugins.active_directory.ActiveDirectoryUnixAuthenticationProvider.retrieveUser(ActiveDirectoryUnixAuthenticationProvider.java:134)
at hudson.plugins.active_directory.AbstractActiveDirectoryAuthenticationProvider.loadUserByUsername(AbstractActiveDirectoryAuthenticationProvider.java:30) 
```

我 100% 确定凭据是正确的。运行 Jenkins 的服务器在域中，所以从这里开始一切正常。我想詹金斯隐藏了一些错误消息，因此我无法准确地指定问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:02:05.377

在“管理 Jenkins”>“配置系统”下：

*   启用安全性
*   安全领域 = 活动目录
*   输入您的“域名”
*   单击右侧附近的“**高级”（就在（？）按钮下方）**
*   添加**域控制器**
*   在**站点**下：添加您需要的信息（OU=<>、DC=<> 等） - 任意数量 - 我们的有 5 个 OU(s) 和 3 个 DC 字段
*   **在绑定 DN**字段下添加您的绑定用户（我们的类似于*CN=、OU=、DC=、DC=、DC=*
*   **在绑定密码**字段下添加您的绑定密码

一旦您设置了所有这些（或您需要的任意数量）：单击**测试**按钮（它应该位于右侧的绑定密码字段下方 - 靠近 (?) 帮助按钮。

如果你没有看到这些，请告诉我。

**+================================================== ================+**

**编辑：**

对于绑定用户名，你可以试试这个：

CN=,OU=SMTH,OU=SMTH,OU=SMTH,OU=SMTH,DC=SMTH,DC=SMTH,DC=SMTH

LDAP 服务名称或绑定服务名称在哪里。我还没有看到

CN=SECOND_NAME\, FIRST_NAME - USER_ID

之前的格式（不是说它是错误的，只是我不知道）。所以像

CN=MY LDAP SVC 帐户,OU=SMTH,OU=服务,OU=帐户,OU=my,DC=域,DC=com

# google-maps - 如何在黑莓中安装谷歌地图

> ID：11608362
> 
> 赞同：1
> 
> 时间：2012-07-23T07:50:20.733
> 
> 标签：google-maps, blackberry, blackberry-maps

我正在尝试从我的应用程序访问谷歌地图。我的代码如下：

```
 public void invokeGMaps(GMLocation l) {
    int mh = CodeModuleManager.getModuleHandle("GoogleMaps");
    if (mh == 0) {
        try {
            throw new ApplicationManagerException("GoogleMaps isn't installed");
        }
        catch (ApplicationManagerException e) {
            System.out.println(e.getMessage());
        }
    }
    URLEncodedPostData uepd = new URLEncodedPostData(null, false);
    uepd.append("action", "LOCN");
    uepd.append("a", "@latlon:" + l.getLatitude() + "," + l.getLongitude());
    uepd.append("title", l.getName());
    uepd.append("description", l.getDescription());
    String[] args = { "http://gmm/x?" + uepd.toString() };
    ApplicationDescriptor ad = CodeModuleManager.getApplicationDescriptors(mh)[0];
    ApplicationDescriptor ad2 = new ApplicationDescriptor(ad, args);
    try {
        ApplicationManager.getApplicationManager().runApplication(ad2, true);
    }
    catch (ApplicationManagerException e) {
        System.out.println(e.getMessage());
    }
} 
```

当我尝试启动地图时出现空指针异常，这是因为我尚未安装谷歌地图。如何安装地图以使我的应用程序运行？我必须在哪里安装地图？我访问了链接“m.google.com/maps”，但我不明白或看不到安装地图的位置？地图是否要安装在我的应用程序将运行的每台手机上？请指导。我完全迷路了。

# php - 我如何（或什么）将文件夹添加到 php 文件的末尾

> ID：11608367
> 
> 赞同：0
> 
> 时间：2012-07-23T07:50:53.523
> 
> 标签：php, directory

我一直在寻找大约一个星期的答案，但为了我，我什至不能得到一个直接的答案，主要是因为我不知道确切的问题，所以我想我会发布一个例子的问题。

如何将目录添加到 PHP 文件的末尾？或者如果它不是一个目录，它叫什么，我该怎么做？

示例：example.com/index.php?directory/some/more/things/

注意'index.php?directory/'那是我指的部分

提前致谢 - 帕特

PS 链接到文档/教程将不胜感激！

编辑：这是我正在谈论的链接之一，它在我控制的论坛上，它使用 Xenforo：

[http://forum.noxcrew.com/index.php?forums/news-and-information.21/](http://forum.noxcrew.com/index.php?forums/news-and-information.21/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:14:22.690

如果我理解正确，您正在寻找的是 Web 服务器中的 URL 重写功能。这些允许用户传递一个 URL，服务器在内部将其作为另一个 URL 处理。例如，用户可以在浏览器中输入：

```
http://www.yoursite.com/file.php/somedirectory 
```

在内部，服务器将调用您的程序

```
http://www.yoursite.com/file.php?param=somedirectory 
```

配置将取决于 Web 服务器。例如，在 apache 中，您将使用 mod_rewrite，例如，如下所示：

```
RewriteEngine on
RewriteBase /
RewriteRule /file.php\/(.*)$ /file.php?param=$1 [QSA] 
```

当然，这是一个非常简单的例子。你可以做的远不止这些。查看[Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)了解详情。当然，如果您使用不同的 Web 服务器（例如 IIS），那么您必须查看该服务器的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:56:23.743

您可能正在寻找可以在 PHP 中处理的 GET-Parameter。

更多信息可以在这里找到：http: [//php.net/manual/de/reserved.variables.get.php](http://php.net/manual/de/reserved.variables.get.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:13:12.243

我不是 100% 确定您要做什么，但如果您尝试向 php 脚本“发送”方向，那么您可以使用 GET 变量。

```
index.php?path=directory/some/more/things/ 
```

然后，您可以使用以下行在脚本中获取“目录/一些/更多/事物/”。

```
$_GET['path']; 
```

这样做是因为 url 的“路径”部分是一个变量名，然后在“=”之后是值。

[在 PHP 手册http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)上了解有关 GET 变量的更多信息

# html - 需要将我的基于 HTML5 的 Web 应用程序转换为面向所有移动设备的移动应用程序

> ID：11608371
> 
> 赞同：17
> 
> 时间：2012-07-23T07:51:10.840
> 
> 标签：html

是否可以将我现有的 HTML/jquery.js 网站转换为针对所有设备（iPhone、Android、Blackberry 等）的移动应用程序。以下是我能想到的几点。如果我错了，请纠正我。添加 jquerymobile.js 并更改 css 样式（基于访问您网站的设备）。

在将现有的基于桌面的网站转换为移动网站时，我应该考虑哪些要点。还是我应该从头开始创建移动网站（MVC4 移动网站）？如果是这种情况，那么我必须维护我不想做的 2 个代码库（1 个用于桌面，1 个用于移动）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T08:55:32.597

如果您以与设备无关的方式设计 Web 应用程序，则可以避免使用两个代码库。这意味着它可以显示在许多不同的屏幕尺寸上（从小型手机到等离子电视机），并使用许多不同的输入方法（鼠标、键盘、触摸屏、游戏手柄等）进行导航。实现这一目标的各种技术如今被称为“移动优先”或“响应式设计”。一个好的开始，请参阅：

*   [创建移动优先响应式网页设计](http://www.html5rocks.com/en/mobile/responsivedesign/)
*   [320 及以上 - '小屏幕优先' 响应式样板](http://stuffandnonsense.co.uk/projects/320andup/)
*   [移动 HTML5 样板](http://html5boilerplate.com/mobile)
*   [Initializr](http://www.initializr.com/)的响应式[移动优先模板](http://verekia.com/initializr/responsive-template)
*   [推特引导](http://getbootstrap.com/)
*   [祖布基金会](http://foundation.zurb.com/)
*   有关更多信息，请参阅：[Web 设计框架](https://twitter.com/pocztarski/status/546009375543132162)的精彩介绍（[Edreih Aldana](http://www.ealdana.com/)的视频）

请记住，如果您的应用程序非常复杂并且最终您可能会得到两个（或更多）代码库，那么这可能并不总是可行或方便，但大多数网站和 Web 应用程序都可以使用牢记这些原则。

还请记住，[Web 内容可访问性指南](http://www.w3.org/WAI/WCAG20/glance/)可以使设计可以在多种设备上使用多种输入法的网站变得更加容易。

您没有特别要求这样做，但您还可以使用[PhoneGap](http://phonegap.com/)将移动网站或 Web 应用程序转换为适用于 iOS、Android、Blackberry、Windows Phone、Palm WebOS、Bada 和 Symbian 的实际本地移动应用程序，这样您就可以使用您的应用程序用于从这些特定平台的各种应用商店安装。

# 2016 年更新

我在 2012 年写了这个答案，从那时起已经开发了一些相关工具：

*   [Ionic](http://ionicframework.com/) - 基于[Angular的混合移动应用程序框架](https://angularjs.org/)
*   [React Native](https://facebook.github.io/react-native/) - 一个基于[React构建原生应用程序的框架](https://facebook.github.io/react/)
*   [Framework7](http://www.idangero.us/framework7/) - 基于[Dom7](http://www.idangero.us/framework7/docs/dom.html)的混合移动应用程序框架（类似于 jQuery）
*   [英特尔 XDK](https://software.intel.com/en-us/intel-xdk)（以前称为 appMobi）
*   [加速器](http://www.appcelerator.com/)
*   [AppGyver](http://www.appgyver.com/)
*   [NativeScript](https://www.nativescript.org/)
*   [温泉用户界面](https://onsen.io/)
*   更多[移动框架比较图表](http://mobile-frameworks-comparison-chart.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-16T02:14:22.867

这个问题是 3 年前提出的并且有很好的答案，我只想根据我的经验添加一些信息：

最好不要创建单独的移动设计，而是使用[Bootstrap](http://getbootstrap.com/)使用响应式网页设计修改现有网页。

然后你有两个选择：

1.  [使用Apache Cordova](https://cordova.apache.org/)创建 Hybrid Web App ，与上面提到的 PhoneGap 几乎相同。我使用的是 Visual Studio，所以我使用了[VS 项目模板](https://www.visualstudio.com/en-us/features/cordova-vs.aspx)。
2.  [使用Manifoldjs](http://www.manifoldjs.com/)托管 Web 应用程序。我认为这个选项很简单，您只需将现有网站打包并创建 Web App。

如果您使用 Visual Studio，[即使没有 Manifilod 也可以创建托管 Web 应用程序](https://taco.visualstudio.com/en-us/docs/create-a-hosted-app/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T19:54:52.843

您可以尝试[PhoneGap](http://phonegap.com/)，这是一种将您的应用程序部署到各种设备的快速方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T23:46:14.477

尝试免费的[phonegap 构建服务](https://build.phonegap.com)。您上传您的 html 内容，它会自动为不同的设备生成应用程序！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-04T04:45:56.750

您还可以尝试 Appery.io 轻松构建 Web 应用程序。这是一篇向您展示如何从您的网站制作 iOS 应用程序的文章。如果您的网站是响应式的，它将自动定位所有移动屏幕尺寸。[http://www.techlivewire.com/4844/generate-an-iphone-app-for-your-website.html](http://www.techlivewire.com/4844/generate-an-iphone-app-for-your-website.html)

# android - 使用 ImageView 将自定义布局的背景设置为透明

> ID：11608377
> 
> 赞同：0
> 
> 时间：2012-07-23T07:51:27.107
> 
> 标签：android, android-layout, android-dialog

[我正在使用 Android Developer 文档链接](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)构建一个自定义对话框，为此我制作了一个布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rotatelayout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#80000000"
>

<ImageView 
    android:id="@+id/dialogimage"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />
</LinearLayout> 
```

我正在夸大这个对话框，

```
AlertDialog dialog;
AlertDialog.Builder builder;
builder = new AlertDialog.Builder(TabsActivity.this);
LayoutInflater inflator = (LayoutInflater)   getSystemService(LAYOUT_INFLATER_SERVICE);
View view = inflator.inflate(R.layout.rotate_dialog_layout, (ViewGroup) findViewById(R.id.rotatelayout));   
ImageView image = (ImageView) view.findViewById(R.id.dialogimage);
image.setOnClickListener(new RotateLockListener());
image.setBackgroundColor(Color.parseColor("#80000000"));
if(locked) 
{
    image.setImageResource(R.drawable.lock_icon);
}
else 
{
    image.setImageResource(R.drawable.unlock_icon);
}
builder.setView(view).setCancelable(true);
dialog = builder.create();
dialog.setView(view, 0, 0, 0, 0);
timerDelayRemoveDialog(time, dialog);
dialog.show(); 
```

但它仍然显示为 ![对话框如何出现](../Images/3b1bd94ebcd76f9b3ff3ce10a3ca8533.png)

我已经尝试过堆栈提供的所有帮助

[将 ImageView 背景设置为透明](https://stackoverflow.com/questions/4710025/how-to-set-transparent-background-for-image-button-in-code)，

[通过#80000000 设置透明度](https://stackoverflow.com/questions/1492554/set-transparent-background-of-an-imageview-in-android)和

[设置对话框窗口透明度](https://stackoverflow.com/questions/6059068/android-dialog-transparent)

但他们都没有工作，它仍然出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:58:28.523

或者您可以为此使用 Dialog 类，

```
Dialog dialog = new Dialog(this,
                android.R.style.Theme_Translucent_NoTitleBar);
        Window window = dialog.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,
                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        window.setLayout(ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.FILL_PARENT);
        dialog.setCancelable(true);

        dialog.setCanceledOnTouchOutside(true);
        dialog.setContentView(R.layout.temp);
        dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:57:30.063

尝试将其用作 View 的样式：

```
<style name="Dialog_Fullscreen">
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

# mysql - IN（）在mysql存储过程中不起作用

> ID：11608385
> 
> 赞同：2
> 
> 时间：2012-07-23T07:52:11.203
> 
> 标签：mysql, stored-procedures

```
DELIMITER $$

USE `employee`$$

DROP PROCEDURE IF EXISTS `selectemployeebyids`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `selectemployeebyids`(IN empid VARCHAR(100))
BEGIN
    SELECT empname,salary,department from emp where empid IN (empid) ORDER BY empid;
    END$$

DELIMITER ; 
```

谁能帮帮我吗

带着敬意

文殊K

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:37:04.243

在尝试了很多之后，我发现而不是`IN()`，`FIND_IN_SET()`为我工作。

```
DELIMITER $$

USE `employee`$$

DROP PROCEDURE IF EXISTS `selectemployeebyids`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `selectemployeebyids`(IN empid VARCHAR(100))
BEGIN
    SELECT empname,salary,department from emp where empid FIND_IN_SET(empid) ORDER BY empid;
    END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:07:58.393

试试这个

```
DELIMITER $$ 

USE `employee`$$ 

DROP PROCEDURE IF EXISTS `selectemployeebyids`$$ 

CREATE DEFINER=`root`@`localhost` PROCEDURE `selectemployeebyids`(IN empid_in VARCHAR(100)) 
BEGIN 
    SELECT empname,salary,department from emp 
        where concat(',',empid_in,',') like concat('%,'cast  (empid as varchar(10)),',%')
        ORDER BY empid; 
   END$$ 

 DELIMITER ; 
```

# mono - 是 Monodroid 中的 getRotationMatrixFromVector 吗？

> ID：11608386
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:52:13.127
> 
> 标签：mono, xamarin.android

我无法在任何版本的 Mono.Android.dll 中找到此方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:06:14.310

是静态方法

```
SensorManager.GetRotationMatrixFromVector(float[], float[]) 
```

命名空间：Android.Hardware。

它从 API 级别 9 开始工作。

# matlab - 如何计算矩阵中每列值的编号

> ID：11608394
> 
> 赞同：2
> 
> 时间：2012-07-23T07:52:40.097
> 
> 标签：matlab, matrix, counting

我有矩阵 A：

```
A= [ 1 1 0 2 2 2 2 0 0 3 3 0 0;
     0 1 1 0 0 2 2 2 2 3 3 0 0 ]; 
```

并且我想制作另一个矩阵B，以便该矩阵包含原始矩阵A的值出现次数：即每`ii`行`B`包含`ii`A的相应列中出现的次数。数字0可以忽略。

例如：在 A 的第 2 列中，只有数字 1 出现，具体两次 --> 因此 B(1,2) = 2 和 B(other,2) = 0。

对于我的示例矩阵 A，输出应该是

```
Res = [ 1 2 1 0 0 0 0 0 0 0 0 0 0;
        0 0 0 1 1 2 2 1 1 0 0 0 0;
        0 0 0 0 0 0 0 0 0 2 2 0 0 ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:28:58.807

这也是（被[低估的](http://blogs.mathworks.com/loren/2008/02/20/under-appreciated-accumarray/)）[accumarray的机会](http://www.mathworks.nl/help/techdoc/ref/accumarray.html)

```
A= [ 1 1 0 2 2 2 2 0 0 3 3 0 0;
     0 1 1 0 0 2 2 2 2 3 3 0 0 ];
N = size(A,2);
result = zeros(max(A(:)),N);

for ii=1:N
    s = accumarray(nonzeros(A(:,ii)),1);
    result(1:numel(s),ii) = s;
end 
```

太糟糕了，只有 accumarray 不能一次性完成所有操作:(

## 编辑

一次 accumarray 调用就搞定了：:p

```
A= [ 1 1 0 2 2 2 2 0 0 3 3 0 0;
     0 1 1 0 0 2 2 2 2 3 3 0 0 ];
N = size(A);
C = repmat(1:N(2),N(1),1);

result = accumarray([A(:)+1 C(:)], 1);
result = result(2:end,:) 
```

## 编辑2

如果您有一个 3 维输入矩阵，最简单的方法是先将其转换为 2 维矩阵，然后使用上述方法对其进行处理。以下代码执行此转换：

```
% example data:
A3d = repmat(A,[1 1 2])
A2d = reshape(permute(A3d,[1 3 2]),[],size(A3d,2)) 
```

结果：

```
A3d(:,:,1) =
 1     1     0     2     2     2     2     0     0     3     3     0     0
 0     1     1     0     0     2     2     2     2     3     3     0     0
A3d(:,:,2) =
 1     1     0     2     2     2     2     0     0     3     3     0     0
 0     1     1     0     0     2     2     2     2     3     3     0     0

A2d =
 1     1     0     2     2     2     2     0     0     3     3     0     0
 0     1     1     0     0     2     2     2     2     3     3     0     0
 1     1     0     2     2     2     2     0     0     3     3     0     0
 0     1     1     0     0     2     2     2     2     3     3     0     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:12:09.520

您可以使用

```
A= [ 1 1 0 2 2 2 2 0 0 3 3 0 0;
     0 1 1 0 0 2 2 2 2 3 3 0 0 ];

cell2mat(arrayfun(@(b) sum(A == b),nonzeros(unique(A)), 'UniformOutput', false)) 
```

这导致

```
ans =

     1     2     1     0     0     0     0     0     0     0     0     0     0
     0     0     0     1     1     2     2     1     1     0     0     0     0
     0     0     0     0     0     0     0     0     0     2     2     0     0 
```

如果按照评论中的要求，矩阵 a 具有三个维度，则需要沿第三个维度对结果求和：

```
sum(cell2mat(arrayfun(@(b) sum(A == b,1),nonzeros(unique(A)), 'UniformOutput', false)),3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T20:37:13.937

你可以这样做是一个函数调用：

```
Res = histc(A, 1:3); 
```

结果符合预期：

```
Res =
     1     2     1     0     0     0     0     0     0     0     0     0     0
     0     0     0     1     1     2     2     1     1     0     0     0     0
     0     0     0     0     0     0     0     0     0     2     2     0     0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T20:44:39.543

使用 SPARSE 函数的另一种选择（类似于[@GuntherStruyf](https://stackoverflow.com/a/11608886/97160)使用 ACCUMARRAY 的第二个解决方案）

```
c = repmat(1:size(A,2), [size(A,1) 1]);
M = full(sparse(A(:)+1, c(:), 1));
M = M(2:end,:); 
```

结果：

```
M =
     1     2     1     0     0     0     0     0     0     0     0     0     0
     0     0     0     1     1     2     2     1     1     0     0     0     0
     0     0     0     0     0     0     0     0     0     2     2     0     0 
```

# c# - 处理 TypedDataset 中的 Null

> ID：11608395
> 
> 赞同：2
> 
> 时间：2012-07-23T07:52:47.397
> 
> 标签：c#, .net, strongly-typed-dataset

我正在使用 TypedDataset 并将其暴露在 asmx 服务中。

**我在服务端的数据集是** ![在此处输入图像描述](../Images/96b79371b061e70ecb4dd4c6b3a714aa.png)

**在客户端生成的数据集是** ![在此处输入图像描述](../Images/7e9cbbe704af432b8f10c72ce6cf5472.png)

您可能会注意到 NullValue（如突出显示的那样），两边不一样。正因为如此，我得到了`StrongTypingException`。它让我疯狂:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-31T16:34:25.423

将客户端数据集上的值也更改为“（null）”。设计者生成的客户端和服务端数据集是独立的东西，有各自的属性值

# php - 检查用户点击了哪个菜单

> ID：11608396
> 
> 赞同：-4
> 
> 时间：2012-07-23T07:52:51.513
> 
> 标签：php, javascript, html

我想检查我的用户点击了哪个菜单？并将其作为 $_GET 获取以检查我的状况。我怎样才能做到这一点？发生连接不平衡时可以吗？这对我来说非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:59:40.220

如果你的 li 里面有一个 id：

```
$(function(){
     $('li').click(function(){
          var id = $(this).attr('id');

          $.ajax({
             type:'get',
             url:'getClickedID.php',
             data:'id='+id;
             success:function(result){
                  // do something with returned data
             }
          });
     });
}); 
```

在您的“getClickedID.php”页面中，使用`$id = $_GET['id']`捕获该值并继续执行您想要使用它执行的操作。

# node.js - Mongoose Model.find() 在未连接到数据库时挂起

> ID：11608397
> 
> 赞同：10
> 
> 时间：2012-07-23T07:52:52.957
> 
> 标签：node.js, mongodb, mongoose

我正在经历一些错误场景，试图了解如何处理这些错误。

在没有数据库连接的情况下，Mongoose`Model.find(...)`调用似乎挂起。在示例代码下方。我会假设回调是用一个`err`对象调用的，但事实并非如此。

如何防止模型调用挂起？`readyState`每次访问模型时是否必须手动检查？

```
// app.js
// Let's use a non-existing host so connecting fails:
// (callback is invoked with err object)
mongoose.connect('mongodb://localhostXXX/blog', function(err){ ... });

BlogPost  = mongoose.model('BlogPost', BlogPostSchema);

// api.js
exports.list_posts = function(req, res) {

    // Ready state is '0' = disconnected (since we used a wrong hostname)   
    console.log('DB ready state: ' + BlogPost.db.readyState);

    // This will not invoke the callback:
    BlogPost.find(function(err, threads) {
        // Never called...
    });
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:47:32.620

这不是答案，但希望它能帮助您找到解决方案。*使用护照模块时与mongoose.createConnection*有非常相似的问题 ，发现它与 *mongoose.connect工作正常*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T12:42:19.450

由于您已经在 connect 调用中使用了错误处理程序，因此明智的做法是在数据库未启动时退出您的应用程序，或者激活一些以 pretty 响应的中间件`500 Internal Server Error`。

Mongoose`node-mongodb-native`在后台使用 mongodb 连接，您可能会在其中找到其他有用的连接选项。:)

编辑：尝试设置`socketOptions.socketTimeoutMS`。显然没有设置默认超时。请参阅[http://mongodb.github.com/node-mongodb-native/api-generated/server.html](http://mongodb.github.com/node-mongodb-native/api-generated/server.html)。

我的工作机器上没有 node 可以为您尝试确切的语法，但您可能必须使用`mongoose.Connection`，它有一个`open()`方法可以接受传递给的选项`node-mongodb-native`。我不认为`mongoose.connect()`接受这些选项，但我可能是错的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T17:19:38.057

为了解决这个问题，你需要做 3 个任务：

1.  在 options.db 部分配置 bufferMaxEntries:0 （有关更多详细信息，请参见[此处](http://mongodb.github.io/node-mongodb-native/2.0/tutorials/connection_failures/)）因此，当禁用 bufferMaxEntries 时，这会导致 mongoose 停止缓冲区命令并在服务器关闭时重试发送它们。

2.  在 options.db 部分配置 autoReconnect:false 在 db 级别禁用 autoReconnet。[（在这里](http://mongodb.github.io/node-mongodb-native/2.0/tutorials/connection_failures/)查看更多信息）

3.  如果您正在使用 mongodb 副本集，那么您需要在架构级别禁用 bufferCommands（对于您创建的每个架构）

    var schema = new Schema({..}, { bufferCommands: false });

# c# - 在列表框项目和棋盘之间拖放

> ID：11608398
> 
> 赞同：0
> 
> 时间：2012-07-23T07:53:06.437
> 
> 标签：c#, wpf

我正在尝试找到一种使用 WPF 在列表框项目和棋盘之间拖放的方法。我在左边有一个列表框，在右边有一个棋盘。如何拖动一个项目，然后拖动到棋盘的一个或多个方格中。然后点击方块，这里会显示一些关于物品的信息。如果有人可以帮助我，我将不胜感激？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:54:51.520

我认为这可以帮助你：[http ://www.c-sharpcorner.com/uploadfile/dpatra/drag-and-drop-item-in-listbox-in-wpf/](http://www.c-sharpcorner.com/uploadfile/dpatra/drag-and-drop-item-in-listbox-in-wpf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:56:27.993

嗨，这是一种让您朝着正确方向前进的方法

[http://johnnblade.wordpress.com/2012/06/12/drag-and-drop-grid-control-row-devexpress-wpf/](http://johnnblade.wordpress.com/2012/06/12/drag-and-drop-grid-control-row-devexpress-wpf/)

让我知道你可以有更多的问题吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:57:41.650

这是我做的事情..但在这里我将文件从桌面拖到我的列表框

```
 ` public MainPage()
    {
        InitializeComponent();

        CompositionTarget.Rendering +=new EventHandler(CompositionTarget_Rendering);

        FileBoard.Drop += new DragEventHandler(FileBoard_Drop);
    } 
```

`

当你拖动元素时

```
 void FileBoard_Drop(object sender, DragEventArgs e)
    {

        if (e.Data != null)
        {
            FileInfo[] files = e.Data.GetData(DataFormats.FileDrop) as FileInfo[];

            foreach (FileInfo fi in files)
            {
                _files.Enqueue(fi);
            }

        }

    } 
```

创建一个列表 DATAinGrid

使用 CompositionTargetRendering 你可以将文件从队列中取出

```
private void CompositionTarget_Rendering(Object sender, EventArgs e)
    {
        if (_files.Count != 0)
        {
            // Create a photo
            FileInfo fi = _files.Dequeue();

         }
   } 
```

然后将itemsource分配给你的棋盘或棋盘项目......尝试修改我认为你会得到它的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T07:48:30.393

这很旧，但我找到了一个 KISS 解决方案。

使用网格中的文本块或图像创建您的棋盘网格。

为要传递的数据创建模型。

在 xml 中这样做：

```
<TextBlock x:Name="myname" x:Uid="myname" Grid.Row="0" Grid.Column="1" Margin="3" Text="{Binding myfield}" Style="{DynamicResource myStyle}" AllowDrop="True" Drop="Square_Drop"/>
<TextBlock x:Name="myname" x:Uid="myname" Grid.Row="1" Grid.Column="1" Margin="3" Text="{Binding myfield}" Style="{DynamicResource myStyle}" AllowDrop="True" Drop="Square_Drop"/>
//etc etc etc

<ListBox x:Name="myListBox" x:Uid="myListBox" 
                     ItemContainerStyle="{DynamicResource myListBoxListItemStyle}" Margin="10" 
                     DisplayMemberPath="myField" 
                     PreviewMouseLeftButtonDown="List_PreviewMouseLeftButtonDown"> 
```

我强烈建议您使用资源来设置 TextBlock/Image 方块的样式。（一个白色，一个黑色！）

[在这里了解如何](http://wpftutorial.net/MergedDictionaryPerformance.html)

然后在你的c#后面你将需要：

```
private void List_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (myListBox.SelectedItem != null)
        {
            ListBox parent = (ListBox)sender;
            myModel data = parent.SelectedItem as myModel;

            if (data != null)
            {
                DragDrop.DoDragDrop(parent, data, DragDropEffects.Move);
            }
        }
    }

    private void Square_Drop(object sender, DragEventArgs e)
    {
        MyModel data = e.Data.GetData(typeof(MyModel)) as MyModel;

        TextBlock tb = sender as TextBlock;

        tb.DataContext = data;

        //Add any database update code here

        refreshInterface();
    } 
```

# ajax - 如何发送 ajax 请求以检查会话超时并在 grails 中呈现重新登录消息？

> ID：11608404
> 
> 赞同：2
> 
> 时间：2012-07-23T07:53:48.287
> 
> 标签：ajax, grails

我想向用户显示一条消息，说*“您已注销，请重新登录！”* 当会话超时时，每次发送一个**ajax请求。**如果会话计时器结束，我想发送显示上述消息的最终 ajax 请求。但是这里的问题是我不知道我应该在哪里保留我的 ajax 和 jquery 代码，而且由于我对 ajax 请求了解不多，任何人都可以用代码解释这个过程。简单来说，我的要求就像 facebook 在会话超时时显示的内容，或者当多个选项卡的任何一个选项卡被注销时。我正在研究***grails 项目***。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:23:01.613

像这样做你的ajax请求

```
$.ajax({
    url:url,
    type:"POST",  // or get
    data:parameters,
    success: function(data) {
    // do procedure if success
          }
    error : function(xhr, type, error){
    // do procedure if fail
            // may be send a message to the server side to display a message that     shows session timeout
       }
}); 
```

在错误函数中处理您的会话超时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:26:38.047

我自己做了，这是它的 js 代码“gracefulSession.js”，并在你要嵌入 html 代码的页面上调用这个 javascript。

```
function checkSessionStatus() {

    var lStorage = getLocalStorage();
    if (lStorage) {
        //lStorage.setItem('poleTime',new Date());
        var poleTime = lStorage.getItem("poleTime");
        var parsedTime;
        try {
            parsedTime = new Date(poleTime);
        } catch (e) {}

        //alert(new Date()-parsedTime)
        //alert(new Date())
        //alert(parsedTime)

        //3900000 = 1H5M

        if (parsedTime && (new Date() - parsedTime) < 3900000) {
            //alert('NCATCH'+parsedTime);
        } else {
            //alert('POINT');
            poleSessionStatus();
        }
    }
}

function setlatestPoleTIme() {

    //alert("SETTING POLE TIME");
    var lStorage = getLocalStorage();
    if (lStorage) {
        lStorage.setItem('poleTime', new Date());
    }
}

function setCheckSessionTimer() {

    var lStorage = getLocalStorage();
    var isLoggedOut = false;
    if (lStorage) {
        if (lStorage.getItem('isLoggedOut') == 'true') {
            isLoggedOut = true;
        }
    }

    //console.log('checkingIfLoggedOut');

    if (!isLoggedOut) {

        setTimeout("setCheckSessionTimer();", 5000);
        //console.log("NOPT LO");
        $('#LoggedoutMessage').hide();
        checkSessionStatus();
    } else {

        setTimeout("setCheckSessionTimer();", 5000);
        //console.log("KO");
        //alert("You're Logged Out from  other tab");
        $('#LoggedoutMessage').show();

    }

}

function logout() {

    //alert("LOGGIN OUT")
    var lStorage = getLocalStorage();
    if (lStorage) {
        lStorage.setItem('isLoggedOut', 'true');
    }
}

function resetLoggedOutFLag() {

    var lStorage = getLocalStorage();
    if (lStorage) {
        lStorage.removeItem('isLoggedOut');
    }
}

function getLocalStorage() {

    var storage, fail, uid;
    try {
        uid = new Date;
        (storage = window.localStorage).setItem(uid, uid);
        fail = storage.getItem(uid) != uid;
        storage.removeItem(uid);
        fail && (storage = false);
    } catch (e) {}
    return storage
} 
```

现在，要嵌入的 HTML 代码，

```
<div id="LoggedoutMessage" style="display:none;position:absolute;background:black;height: 200%;width:100%;top: 0;z-index: 10000;opacity: 0.9;">
    <div id="login_box" style="position:fixed;left:38%;top:30%; padding:10px; width: 365px;margin: 0 auto;border: 0px solid #CCC;margin-top: 35px;height: 150px;background: white; border-radius:3px;">
        <div id="login_title">
            <h1>You have been logged out.</h1>
        </div>
        <div id="reLogin">
            <p>Please login to continue.</p>
            <g:link controller="dashBoard" action="index" target="_blank" onclick="logout();">Login</g:link>
        </div>
    </div>
</div> 
```

最后，在您保留 html 的位置，将此 javascript 代码保留在嵌入脚本标记的顶部：

```
function poleSessionStatus() {

    jQuery.ajax({
        type: 'POST',
        data: '',
        url: '<g:createLink action="ajaxCheckSession" controller="dashBoard"/>',
        success: function (data, textStatus) {
            //setTimeout ( "checkSession();", 5000);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            $('#LoggedoutMessage').show();

        },
        complete: function (XMLHttpRequest, textStatus) {
            $.unblockUI();
        }
    });
} 
```

# objective-c - 拆分nsstring并放入tableview

> ID：11608406
> 
> 赞同：0
> 
> 时间：2012-07-23T07:53:50.743
> 
> 标签：objective-c, uitableview, nsarray, xcode4.3

我正在尝试将字符串拆分为多个部分并插入到表格中我应该怎么做？

拆分数组时出现错误：-[__NSArrayI componentsSeparatedByString:]: unrecognized selector sent to instance 0x7a421e0

```
NSArray *BusRoute = alightDesc;
int i;
int count = [BusRoute count];
for (i = 0; i < count; i++)
{  
    NSDictionary *dic = [BusRoute objectAtIndex: i];
    NSDictionary *STEPS = [dic valueForKey:@"STEPS"];            
    NSString *AlightDesc = [STEPS valueForKey:@"AlightDesc"];
    NSLog(@"AlightDesc = %@", AlightDesc);

    NSArray *aDescArray = [AlightDesc componentsSeparatedByString:@","];
    NSLog(@"aDescArray = %@", aDescArray);
} 
```

这是我要拆分的字符串，我从 NSLog 得到的

```
AlightDesc = (
"Block1",
"Block2",
"Block3"
) 
```

请帮助我卡住谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:10:41.613

你的 NSString *AlightDesc 应该是这样的

```
 NSString *AlightDesc = "Block1,Block2,Block3";
 NSArray *aDescArray = [AlightDesc componentsSeparatedByString:@","]; 
```

如果你的字符串是你所说的那样

```
 AlightDesc = ("Block1","Block2","Block3"); 
```

那么你的字符串就是问题所在，因为它已经被分解了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:22:35.233

Objective C 不是强类型语言。您所知道的`[STEPS valueForKey:@"AlightDesc"]`只是它将返回一个对象（类型为`id`）。当你写`NSString *AlightDesc = [STEPS valueForKey:@"AlightDesc"]`的时候编译器没有抱怨，因为`NSString *`它是一个有效的对象类型。不幸的是，您的代码中存在逻辑错误，因此实际存储在密钥下的`@"AlightDesc"`是`NSArray`. 正如其他人所提到的，`NSArray`不响应`componentsSeparatedByString:`因此您在运行时收到错误。

解决此问题的简单方法是更正您的逻辑：`NSString`首先存储 an 或将您得到的内容视为`NSArray`. 正如@janusfidel 提到的，您可以通过使用来获取所需条目的字符串，从而`NSArray`在表格中完美使用。`objectAtIndex:`

在一些更复杂的情况下，您可能不知道您将从字典中获取特定键的内容。在这种情况下，在 Objective C 中，您可以只询问对象：

```
id anObject = [STEPS valueForKey:@"AlightDesc"];
if ([anObject isKindOfClass:[NSString class]]) {
    NSString *aString = (NSString *)anObject;
    // Treat as a string ...
} else if ([anObject isKindOfClass:[NSString class]]) {
    // Object is an array ... 
```

# iphone - Iphone 在应用程序中创建幻灯片？

> ID：11608410
> 
> 赞同：0
> 
> 时间：2012-07-23T07:53:56.117
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我想创建一个静态的 iPhone 应用程序，它的内容大约是 20 页。为此，我必须使用情节提要创建 20 个不同的视图。

我的问题是，是否有任何其他技术可以创建这样的应用程序，我可以节省我的时间？

每个屏幕事务取决于用户点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:11:56.963

您可以使用滚动视图。创建一个滚动视图并启用它的分页。

```
scrollView.pagingEnabled=YES; 
```

之后，您可以将观看次数定义为 20 或任何您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:38:45.447

您可以使用`UIScrollView`.

```
[scrollView setPagingEnabled:YES];

for (int i==0;i<=pagenumber;i++) {

    UIView *objUIView =[[UIImageView alloc] initWithFrame:CGRectMake(i*320,0,320,480)];

    [scrollView addSubview:objUIView];

    [objUIView release];
}

scrollView.contentSize=CGSizeMake(PageNumber*320, 80); 
```

# php - php 仅将引号转换为 html 代码，而不是其他特殊字符

> ID：11608411
> 
> 赞同：0
> 
> 时间：2012-07-23T07:53:57.763
> 
> 标签：php, html, quotes

所以我在我的mysql中有 `'UAB "Litofc&#371; kontora"'`

当我尝试将它放入这样的输入时

`<input type="text" value="UAB "Litofc&#371; kontora"">`由于引号，它不会显示整个内容如何使仅引号替换为 html 代码？尝试了 htmlentities 和 htmlspecialchars 但它转换`&#371;`为但我需要它是不隐蔽的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:01:24.103

在输出*输入值*之前，您必须（仅）将 all 替换`"`为。例如使用[str_replace](http://php.net/manual/en/function.str-replace.php)：`&quot;`

 *```
$sInputValue = str_replace('"', '&quot;', $sValueFromDb);
echo '<input type="text" value="' . $sInputValue . '">'; 
```

另请参阅[此 php](http://ideone.com/cq9YB)示例和[生成的 html 示例](http://jsfiddle.net/n8yRR/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:17:59.947

看起来您的问题是数据已针对 HTML 进行编码，但仅用作文本节点。

因此，解决方案是将其从 HTML 转换为文本，然后再将其转换回 HTML——但以适合放入属性的方式。

`preg_replace_callback`[PHP手册中此注释中的](http://uk3.php.net/manual/en/function.html-entity-decode.php#104617)代码，因为`html_entity_decode`似乎不支持数字实体。

```
$input = 'UAB "Litofc&#371; kontora"';
$attribute_safe = htmlspecialchars(
        html_entity_decode(
            preg_replace_callback(
                "/(&#[0-9]+;)/",
                function($m) { return mb_convert_encoding($m[1], "UTF-8", "HTML-ENTITIES"); },
                $input
            )
        )
);
echo $attribute_safe; 
```*

# string - SSIS 拆分字符串地址

> ID：11608424
> 
> 赞同：1
> 
> 时间：2012-07-23T07:54:51.593
> 
> 标签：string, ssis, split

我有一列由地址组成，如下所示。

地址

*   1 里德街，曼彻斯特，M1 2DF
*   12 自治市镇路，伦敦，E12,2FH
*   15 琼斯街，纽卡斯尔，泰恩威尔郡，NE1 3DN

等等……等等……

我想将其拆分为不同的列以导入我的 SQL 数据库。我一直在尝试使用 Findstring 以逗号分隔，但是当某些地址的“部分”比其他地址多时遇到了麻烦。有什么想法最好的方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:01:04.653

这是一个需求规范问题，而不是一个实现问题。您对地址格式的假设越多，您就能进行越详细的解析；同一枚硬币的另一面是，您对地址结构的假设越少，您被指责的错误解析就越少。

确定您是否只需要处理英国邮政电子邮件，或者是否可能出现全球地址，这一点至关重要。

根据您的示例，地址的某些部分似乎始终存在，但请检查[此资源](http://www.bitboost.com/ref/international-address-formats/united-kingdom/)以确定所有英国电子邮件地址是否真的需要它们。

如果你发现你需要的解析深度和你可以安全地做出的假设之间的匹配，你应该能够通过逗号索引（`FINDSTRING`）继续解析；确定一些从字符串左侧开始的组件，以及一些从字符串右侧开始的组件；并将所有剩余的部分保留为未解析的主体。

您也可能会发现您当前的任务是一项不可能完成的任务，尤其是与国际邮政地址有关的任务。这就是为什么大多数网站和其他数据收集器要求用户以已经解析的形式输入邮政地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:51:22.570

Hanika提出的优秀点。您的一些解析将取决于您的目标目的地的样子。作为一个无知的 yank，基于 Hanika 的链接，我认为你的输出看起来像

*   收件人
*   组织
*   建筑名称
*   建筑地址
*   地方性
*   驿站
*   邮政编码
*   *BasicsMet（布尔值，指示是否满足良好*地址 的最低标准。）
    *   在美国，仅仅因为地址无法正确[CASS](http://en.wikipedia.org/wiki/Coding_Accuracy_Support_System) ed 并不意味着它无法交付 - cip，我的祖父母住在足够多的小镇上，指定他们的姓名和城市就足以作为本地交付邮政官员*知道*他们是谁。但是，对于批量邮寄，他们的地址不符合批量邮寄费率，并且默认为头等邮件。我假设英国邮件也存在类似的情况

总体思路是，对于流经的每一行，您都希望尽最大努力将数据解析到这些存储桶中。使其“正确”的最佳解决方案是更改数据输入方法以验证并将数据捕获到这些离散桶中。由于最优永远不会发生，因此您的任务是整理渣滓以找到您的黄金。

虽然您可以使用 FINDSTRING 编写一些出色的表达式，但在这种情况下我建议您不要这样做，因为仅维护就会让您发疯。相反，添加一个脚本转换并在 .NET（vb 或 c#）中构建您的解析逻辑。然后将有一个循环通过您的转换运行数据并让某人关注结果。如果你发现了一个新的场景，你就回去调整你的业务规则。它很丑陋，它是迭代的，而且很容易产生人类不会有的结果。

滚动地址标准化逻辑的替代方案

*   买它。最终，您的业务需求超过了您应对不断变化的业务规则的能力。那里有很多供应商，但我只熟悉美国的供应商
*   升级到 SQL Server 2012 以使用[DQS](http://blogs.msdn.com/b/dqs/archive/2011/07/18/using-the-ssis-dqs-cleansing-component.aspx)（数据质量服务）。您可能仍然需要购买产品来构建您的知识库，但您可以将业务规则制定任务交给领域专家（“嘿，你一小时赚了花生。确保所有地址都来自这个外观喜欢地址”是他们在我的一项工作开始时如何涵盖这一点的方式）。

# php - 我正在尝试对 PHP 数组进行排序，但不知道如何

> ID：11608430
> 
> 赞同：0
> 
> 时间：2012-07-23T07:55:20.693
> 
> 标签：php, arrays, sorting, grouping, multidimensional-array

如何在 PHP 中转换如下所示的数组：

```
Array ( 
      [2] => B.eot
      [3] => B.ttf
      [4] => CarnevaleeFreakshow.ttf
      [5] => CarnevaleeFreakshow.eot
      [6] => TRASHED.ttf
      [7] => sub.ttf
      ) 
```

看起来像这样：

```
Array(
     [B]=>array(
               [0] => B.eot
               [1] => B.ttf
               )
     [CarnevaleeFreakshow]=>array(
               [0] => CarnevaleeFreakshow.ttf
               [1] => CarnevaleeFreakshow.eot
               )
     [TRASHED]=>array(
               [0] => TRASHED.ttf
               )
     [sub]=>array(
               [0] => sub.ttf
               )
     ) 
```

有没有做这样的事情的名字？正在从

```
 scandir 
```

大批。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:00:41.437

```
<?php

$data = array ( 
  2 => 'B.eot',
  3 => 'B.ttf',
  4 => 'CarnevaleeFreakshow.ttf',
  5 => 'CarnevaleeFreakshow.eot',
  6 => 'TRASHED.ttf',
  7 => 'sub.ttf'
 ); 

$new_data = array();
foreach ( $data as $value ) {
    $tmp = explode( '.', $value );
    $ext = '';
    if ( $tmp[1] ) $ext = '.' . $tmp[1];
    $new_data[ $tmp[0] ][] = $tmp[0] . $ext;
}

print_r( $new_data );

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:09:44.243

这是一个例子。

它可以写得更短，但我认为这是最有启发性的。

```
$ARRraw = array (
      "B.eot",
      "B.ttf",
      "CarnevaleeFreakshow.ttf",
      "CarnevaleeFreakshow.eot",
      "TRASHED.ttf",
      "sub.ttf"
      ) ;

$sorted = array();
foreach($ARRraw as $one){
  $firstPoint = strpos($one,".");
  // No point? then skip.
  if (!($firstPoint === false)){
    // Get the part before the point.
    $myKey = substr($one,0,$firstPoint);
    $sorted[$myKey][] = $one;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:00:54.323

> 有没有做这样的事情的名字？

没有。无论如何，使用循环应该相当简单：

```
<?php
$newArray = array( );

foreach( $originalArray as $fontfile ) {
    $newArray[basename( $font )][] = $fontfile;
}
echo '<pre>' . print_r( $newArray, true ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:02:25.523

据我所知，没有“简单”的方法可以做到这一点。你可以构建一个函数来处理它。

```
function convertArray($array) {
    $newArray = array();

    foreach( $array as $item ) {
        $newArray[basename($item)] = $item;
    }

    return $newArray;
} 
```

那应该做你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:03:57.770

尝试一下：

```
function subdiv(array $arr) {
$res = array();
foreach($arr as $val) {
    $tmp = explode('.', $val);
    if(!isset($res[$tmp[0]]))
        $res[$tmp[0]] = array();
    $res[$tmp[0]][] = $val;
} return $res;
} 
```

与：

```
$res = subdiv($array);
var_dump($res); 
```

# javascript - Javascript 初学者：setTimeout 隐藏/显示问题？

> ID：11608433
> 
> 赞同：4
> 
> 时间：2012-07-23T07:55:30.600
> 
> 标签：javascript, jquery

我试图通过下面的代码在 2000 毫秒后隐藏一个元素。

`setTimeout($templateElement.hide(),2000);`

我是 jquery 和 java-script 的新手。我希望任何人都能解决我的疑问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T08:00:38.347

编码

```
setTimeout($templateElement.hide(),2000); 
```

***立即执行***并将`$templateElement.hide()`其返回值（一个 jQuery 对象）传递给`setTimeout`. 您可能的意思是：

```
setTimeout(function() {
    $templateElement.hide();
}, 2000); 
```

...将函数*引用*传递给`setTimeout`, 两秒后调用。然后该函数`hide`在它被调用时执行。

# go - 我可以将 cgo 与 Windows SDK 一起使用吗？

> ID：11608434
> 
> 赞同：1
> 
> 时间：2012-07-23T07:55:35.403
> 
> 标签：go, cgo

我刚刚尝试过 tdm-gcc 并且它可以工作，但是可以将 cgo 与 Windows SDK 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:31:06.543

是的，Windows 支持 cgo。

不过，您可能仍需要查看一些[未解决的问题。](http://code.google.com/p/go/issues/list?q=label%3aos-windows)我相信自 go1 以来也有[一些修复](https://groups.google.com/forum/?fromgroups=#!searchin/golang-nuts/cgo%2420windows/golang-nuts/uYw2d-xxY3k/7MoxYOsBN_EJ)，因此您可能需要从更近的地方开始工作（我不记得他们是否在 go1.0.3 中）。

# openlayers - OpenLayers DrawFeature undo() 和 redo() 函数

> ID：11608440
> 
> 赞同：2
> 
> 时间：2012-07-23T07:55:56.677
> 
> 标签：openlayers, undo, redo

我需要在我的应用程序中实现`undo`和`redo`功能。我发现最简单的方法（？）是使用 openlayers`undo`和`redo`内置函数。-> [http://dev.openlayers.org/docs/files/OpenLayers/Control/DrawFeature-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Control/DrawFeature-js.html)

但是我在实施它们时遇到了麻烦。任何人都可以为我提供他们的实现示例（`OpenLayers.Control.DrawFeature.undo`）或提供建议，我该如何以另一种方式实现`undo`和运行？`redo`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:57:56.023

你看过它对应的例子吗？

请参阅[撤消/重做绘图](http://dev.openlayers.org/examples/draw-undo-redo.html)示例。

# mysql - 将 Null 作为字符串传递给 MySql

> ID：11608442
> 
> 赞同：0
> 
> 时间：2012-07-23T07:56:03.623
> 
> 标签：mysql

我有一个这样的字符串：

```
String s = "id:1, name:null , field3:null"; 
```

现在我想将这些值和字段传递给 INSERT 语句。field3 类型是 INT，因此 name 字段由于是 VARCHAR 而被更新为 null，但 field3 给出了一个异常，指出
INT 字段的值错误。

是否有任何关键字或我可以将其作为 sql 字段值的东西，它会自动被视为 null ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:22:38.403

您必须更改表以在 field3中接受**NULL ，使用以下查询**

```
ALTER TABLE  `tableName` CHANGE  `field3`  `field3` INT( 11 ) NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:28:15.260

更简单的方法是不在`field3`插入中指定 - 只需将其保留，mysql 就会为该`null`列分配一个

# perl - 使用 Perl 的 Win32::Registry 时，如何修复“main::HKEY_LOCAL_MACHINE”仅使用一次的警告？

> ID：11608445
> 
> 赞同：3
> 
> 时间：2012-07-23T07:56:14.203
> 
> 标签：perl, registry, warnings

我有一个可以获取注册表项值的脚本。这是代码。

```
 use strict;
    use warnings;

    my $winRegistryStatus=0;

    eval {
       require Win32::Registry;
       Win32::Registry->import();
    };
    unless($@) {
       $winRegistryStatus=1;
    }

    my $registryPath = "Self\Random";
    my $keyName = "Configure";
    my $registryKeySettings;
    my %registrySubKeyValues;

    $main::HKEY_LOCAL_MACHINE->Open($registryPath, $registryKeySettings) || die "Cannot open $registryPath: $!";
    $registryKeySettings->GetValues(\%registrySubKeyValues); # get sub keys and value -hash ref
    foreach my $subKey (keys %registrySubKeyValues) {
        my $_subKey = $registrySubKeyValues{$subKey};
        next unless $$_subKey[0] eq $keyName;
        print "Configure=" . $$_subKey[2];
    } 
```

输出

```
 Name "main::HKEY_LOCAL_MACHINE" used only once: possible typo at ....
   Configure=Yes 
```

我可以获得 Configure 的值，但它也会返回一个我不知道如何修复它的警告。

任何机构我哪里错了，可以告诉我如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:28:21.893

“仅使用一次”是一个警告，`use warnings`因为您只使用`$main::HKEY_LOCAL_MACHINE`过一次。你在这里没有错。这只是暗示您可能忘记了某些东西。

在这种情况下，您可以忽略它，或者简单地停用这种警告：没有警告“一次”。

一般来说，将这些内容包含在 a 中`BLOCK`并添加一个长长的描述性注释来解释为什么您在此处关闭这种警告是一个好主意。

```
{ # Disable 'used only once' warning because the $::HKEY_...
  # var was imported by Win32::Registry and is not used anywhere else.
  $main::HKEY_LOCAL_MACHINE->Open($registryPath, $registryKeySettings) 
    || die "Cannot open $registryPath: $!";
} 
```

`warnings` [您可以在此处](http://perldoc.perl.org/warnings.html)找到更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T10:48:59.720

这个模块相当奇怪，因为它将符号导出到`main`包中，而不管它是从哪里使用的。

但在你的情况下，这就是你想要的：你的程序在`main`你没有`package`声明的情况下，你可以省略`main::`from `$HKEY_LOCAL_MACHINE`。

至于您的问题，您显示的代码不会引发您所说的警告。问题一定出在其他地方。请您出示您的完整代码，以便我们更好地为您提供建议。

同时，请注意@Sinan Ünür 的建议 -[`Win32::TieRegistry`](http://p3rl.org/Win32%3a%3aTieRegistry)比`Win32::Registry`. 甚至 POD 文档也`Win32::Registry`这样说：

> 注意：这个模块提供了一个非常笨拙的界面来访问 Windows 注册表，目前还没有积极开发。它的存在只是为了向后兼容使用它的旧代码。要获得更强大、更灵活的注册表访问方式，请使用 Win32::TieRegistry。

* * *

**更新**

我了解看到您的问题更新后的问题，这是因为您正在执行`require Win32::Registry`运行时。这意味着它`$HKEY_LOCAL_MACHINE`在编译时不存在，因此编译器会抱怨它。

修复方法是在编译时声明它

```
our $HKEY_LOCAL_MACHINE 
```

在程序的顶部。

By the way there is no need for the `import` call if all you need is this scalar.

# vb.net - 从另一个组件在模态对话框中输入

> ID：11608451
> 
> 赞同：0
> 
> 时间：2012-07-23T07:56:36.103
> 
> 标签：vb.net, dialog, keyboard, screen, modal-dialog

我为 Visual Basic .net 中的应用程序编写了一个屏幕键盘，我尝试用它来写入模式窗口的文本框。这里的问题是我的键盘也被模态窗口挡住了。所以我不能向窗口发送任何信息。

有人知道是否有可能排除一个被对话框阻止的窗口，或者有其他想法如何从键盘窗口获取信息到模式窗口？

预先感谢您的任何回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:15:33.127

我自己试过了，效果很好。这是我所做的：

在 Visual Studio 中创建一个新的 Windows 项目并添加 2 个窗体和一个模块

在 Form1 中，添加一个标签和一个按钮

在 Form2 中，添加一个文本框和一个按钮

在 Module1 中添加一个 Public String 变量来保存将从 Form2 传递到 Form1 的字符串

```
Module Module1
    Public strMessage As String = ""

End Module 
```

回到Form1，双击Button1，编写处理其点击事件的代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim popUp As New Form2
        popUp.ShowDialog()
        Label1.Text = strMessage    
End Sub 
```

现在在 Form2 中双击 Button1 来编写它的 Button.Click 事件处理

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        strMessage = TextBox1.Text    'Save the string that the user has input before unloading the form
        Me.Close()

End Sub 
```

那应该这样做。我试了一下，Form2的文字出现在Form1的Label中

# eclipse - 在eclipse中安装jira连接

> ID：11608452
> 
> 赞同：2
> 
> 时间：2012-07-23T07:56:44.010
> 
> 标签：eclipse, plugins, jira

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:02:55.550

只需先安装 subclipse，然后再安装 atlassian

# python - python的帧缓冲模块

> ID：11608454
> 
> 赞同：8
> 
> 时间：2012-07-23T07:56:57.113
> 
> 标签：python, framebuffer

我正在寻找一个可以直接显示`jpg`或`png`归档的python模块`/dev/fb0`。

我希望模块可以像这样调用并在屏幕上显示图片：

```
show_photo(path_to_jpg, x, y, dev='/dev/fb0') 
```

我在google上搜索了这种python模块好几天，我找到了链接：[[Module] Python Frame Buffer](http://mail.python.org/pipermail/python-announce-list/2001-August/000979.html)，但没有找到该网站。

现在，我正在使用C程序并按`os.system()`函数调用，它太慢了。是否有python模块可以直接将图片显示到帧缓冲区，并支持静态图片，选框？如果模块也支持播放视频文件，如`mplayer`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T08:06:08.990

也许你可以使用 pygame。

[http://www.pygame.org/wiki/about](http://www.pygame.org/wiki/about)

> Pygame 使用 opengl、directx、windib、X11、**linux frame buffer**和许多其他不同的后端......

**更新：** 简单的例子：

```
import pygame
import sys
import time

pygame.init()

size = (pygame.display.Info().current_w, pygame.display.Info().current_h)
black = 0, 0, 0

screen = pygame.display.set_mode(size)

ball = pygame.image.load("ball.gif")
ballrect = ball.get_rect()

screen.fill(black)
screen.blit(ball, ballrect)
pygame.display.flip()

time.sleep(5) 
```

跑：

```
SDL_NOMOUSE=1 python ./ball.py 
```

# redis - Redis：从排序集中获取值作为列表中的rpop

> ID：11608456
> 
> 赞同：3
> 
> 时间：2012-07-23T07:57:14.810
> 
> 标签：redis

我想将数据作为键值存储在 Redis 中。为此使用排序集，因为列表不允许以键值格式存储数据。所以使用排序集。

但我希望数据在 redis list rpop 中工作时被弹出。

redis 的 ZREM 需要成员才能获得分数，再加上它是一个排序列表，所以我可以使用先到方法存储吗？

或者我应该改变我正在使用的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:57:08.560

这是一个解决方案，但您应该决定它的效率；）

```
ZREVRANGEBYSCORE key +inf -inf LIMIT 0 1 
```

您可以做的一件事是使用 redis`lists`并将数据存储为

```
key[FS]value 
```

例如：姓名：xxx

因此，一旦您弹出数据，您就可以在客户端手动拆分它们

# windows - 如何使用 Haml 文件制作静态网站？

> ID：11608459
> 
> 赞同：1
> 
> 时间：2012-07-23T07:57:41.560
> 
> 标签：windows, compiler-construction, haml

我想编写需要以haml格式编写的html页面（我想要这个，因为有人希望我以haml格式进行设计，他们可以在他们的动态网站中使用）。有人知道我可以用来在Windows计算机上编写haml的任何东西。

我需要一些能让我能够看到代码在浏览器上运行的东西。我的意思是编辑器中的编译器或易于对 html 执行 haml 的东西。

我已经在我的计算机中安装了 Nodejs，并在 Jade 和 Ejs 上使用它，但这些都与我的问题无关。有人知道我是否可以在nodejs中编译haml。我从人们那里听说他们在 nodejs 中编译了他们的咖啡脚本。有人知道nodejs是否有一些东西可以让我无论如何都能编译我的haml。

我只想编写haml，并想获得可以在浏览器中本地运行的html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:28:13.193

您可以使用[http://middlemanapp.com/](http://middlemanapp.com/)使用 Haml 和 Scss 创建您的站点。您也可以将其编译为静态 html/css。很棒的工具！

# makefile - make：对变量的替换引用不止一次？

> ID：11608463
> 
> 赞同：1
> 
> 时间：2012-07-23T07:58:11.953
> 
> 标签：makefile

在我的 makefile 中，“干净”目标是通过在变量`.c.bak`中使用替换引用来删除文件：`SRC`

```
rm -f $(SRC:.c=.c.bak) 
```

这会导致它删除`SRC`var 中不以`.c`.

是否有一种优雅的方法可以对变量进行多次替换？例如，我还想尝试`.cpp`用`.cpp.bak`...替换

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:04:14.920

如果可能会出现所有源文件的备份，而不仅仅是*.c*和*.cpp*文件，您可以相应地更改替换：

```
rm -f $(SRC:=.bak) 
```

或者，如果您使用的是 GNU Make，您可以使用它的文本处理功能来准确地拼出`$(SRC)`您想要影响的文件：

```
rm -f $(addsuffix .bak, $(filter %.c %.cpp,$(SRC))) 
```

更经典的方法是查看如何构造`$(SRC)`变量的值。如果它是一个明确的文件名列表（恕我直言，它应该是），那么您可以从不同类型的源文件的中间变量构建它：

```
SRC_C = foo.c bar.c
SRC_CXX = baz.cpp apple.cpp
SRC = Makefile banana.pl carrot.pl $(SRC_C) $(SRC_CXX) 
```

现在您可以正确且可移植地编写您的原始替换（即，不需要 GNU Make 工具）：

```
rm -f $(SRC_C:.c=.c.bak) $(SRC_CXX:.cpp=.cpp.bak) 
```

# sql - 添加额外的列来查看，这在表中不存在

> ID：11608464
> 
> 赞同：8
> 
> 时间：2012-07-23T07:58:18.597
> 
> 标签：sql, oracle

我想用三个表的联合创建视图。但在结果查询中，我想要一个额外的列，如“tableId”。

我的代码就像

```
CREATE OR REPLACE VIEW DETAILS
AS SELECT 
* FROM
(
SELECT 
    T1.ID,
    T1.AMOUNT,
    T1.STATUS,
    T1.ADDEDBY,
    T1.ADDEDON
FROM Table1 T1
UNION ALL
SELECT 
    T2.ID,
    T2.AMOUNT,
    T2.STATUS,
    T2.ADDEDBY,
    T2.ADDEDON
FROM Table2 T2
UNION ALL
SELECT
    T3.ID,
    T3.BILLAMOUNT,
    T3.STATUS,
    T3.ADDEDBY,
    T3.ADDEDON  
FROM Table3 T3
); 
```

这给了我所需的三个表的联合。但是如何在结果输出中获取表 ID 列？此列在三个表中的任何一个中都不存在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T08:02:17.427

听起来您只想在`SELECT`列表中添加一个额外的硬编码值

```
CREATE OR REPLACE VIEW DETAILS
AS SELECT 
* FROM
(
SELECT 
    T1.ID,
    T1.AMOUNT,
    T1.STATUS,
    T1.ADDEDBY,
    T1.ADDEDON,
    'T1' tableID
FROM Table1 T1
UNION ALL
SELECT 
    T2.ID,
    T2.AMOUNT,
    T2.STATUS,
    T2.ADDEDBY,
    T2.ADDEDON,
    'T2' tableID
FROM Table2 T2
UNION ALL
SELECT
    T3.ID,
    T3.BILLAMOUNT,
    T3.STATUS,
    T3.ADDEDBY,
    T3.ADDEDON,
    'T3' tableID  
FROM Table3 T3
); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T08:02:21.033

```
CREATE OR REPLACE VIEW DETAILS
AS SELECT 
* FROM
(
SELECT 
    T1.ID,
    T1.AMOUNT,
    T1.STATUS,
    T1.ADDEDBY,
    T1.ADDEDON,
    'Table1' as tableid
FROM Table1 T1
UNION ALL
SELECT 
    T2.ID,
    T2.AMOUNT,
    T2.STATUS,
    T2.ADDEDBY,
    T2.ADDEDON,
    'Table2' as tableid
FROM Table2 T2
UNION ALL
SELECT
    T3.ID,
    T3.BILLAMOUNT as AMOUNT,
    T3.STATUS,
    T3.ADDEDBY,
    T3.ADDEDON,    
    'Table3' as tableid
FROM Table3 T3
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:02:15.207

列的数据来自哪里？

如果您正在寻找什么，您可以添加完全静态的数据：

```
select 'hello there' from Table1;

create view v1 as select 123 as table_id, a_column from Table2;

select 'Table1' as table_id, a_column from Table1
union all
select 'Table2', a_column from Table2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T07:38:55.450

对此有更好的解决方案；

**NULL AS COLUMN_NAME**是一个标识符。

```
CREATE VIEW MY_VIEW
    AS
        (SELECT A.*,NULL AS COLUMN1,NULL AS COLUMN2,NULL AS COLUMN3
            FROM MY_TABLE A) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T11:11:18.743

我做了同样的事情。

1.  打开phpmyadmin。
2.  选择数据库。
3.  点击sql菜单
4.  运行以下命令 -

* * *

```
CREATE VIEW table_name AS SELECT tableA.id, tableA.name, tableA.duty_hours, tableA.rate, NULL AS 'additional_field1',NULL AS 'additional_field2', NULL AS 'additional_field3', tableB.name, tableB.email, tableB.charge, NULL AS 'additional_field4' FROM tableA join tableB using (id) ; 
```

这对我有用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-27T10:13:08.113

```
create or replace view view1(col1,col2,col3) as select col1,col2,nul 
```

# ios - 从后台删除我的应用程序时如何捕获事件

> ID：11608471
> 
> 赞同：0
> 
> 时间：2012-07-23T07:58:36.947
> 
> 标签：ios, objective-c

从后台删除应用程序时如何捕获事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:01:14.193

目前尚不清楚您的意思是实际从设备中删除应用程序还是只是终止正在运行的进程。但无论哪种方式，答案都是一样的：

你不能。

如果您要记录任何状态，则需要在应用程序进入后台时进行，而*不是*在应用程序被终止时进行。

文档说`applicationWillTerminate:` *可以*调用。我从未见过这种情况发生。

# php - 合并drupal中的两个表单字段

> ID：11608476
> 
> 赞同：0
> 
> 时间：2012-07-23T07:58:56.823
> 
> 标签：php, forms, drupal

我正在将表单与另一个包含基于表格的表单合并。表格包含带有复选框的列表，填写表单字段后，选中并提交复选框。

当我编写这段代码时，会生成两个具有相同 id 的表单我应该如何将这两个函数合并为一个表单。

```
function add_newHardware() {
        $output = drupal_get_form('add_new_form');
  return $output;
}

function add_new_form(&$form_state) {

 $form['#attributes']['id'] = 'myform';
  $form['device'] = array(
    '#type' => 'fieldset',
    '#collapsible' => FALSE,
    '#collapsed' => FALSE,
  );

  $form['device']['type'] = array(
'#type' => 'select',
  '#options' => listType(),

  );

 $form['device']['title'] = array(
'#type' => 'item',
      '#value' => '<h4>2\. Enter Information</h4>',

  );
  $form['table'] = array(
    '#type' => 'item',
    '#value' => drupal_get_form('selectList'),
  ); 
}

function selectList() {
 $form['#attributes']['id'] = 'myform';
...... 
$output .= theme('table', $header, $rows);
 $output .= drupal_render($form);

 return $output;
} 
```

# facebook-graph-api - 超过图形 API 限制

> ID：11608477
> 
> 赞同：1
> 
> 时间：2012-07-23T07:59:03.107
> 
> 标签：facebook-graph-api

我们有一个显示用户相册+照片+帖子的应用程序。用户可以进一步过滤此内容。我们的问题是，对于重度 FB 用户，我们遇到了超出限制的错误。

为了解决这种情况，我们计划使用 FB.login() 函数再次登录，希望我们获得新的访问令牌，然后我们可以再次查询数据。

但这种方法对我们不起作用。

有没有其他方法可以解决这个问题？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:55:29.070

在不确切知道自己在做什么的情况下很难给出建议，但一般建议是减少您进行的 API 调用次数。因此，请检查您是否没有多次查询相同的数据。此外，如果您查询不经常更改的数据，您可以将其缓存在您的服务器上，以避免每次需要该数据时调用 Facebook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:13:10.677

头顶：

*   使用 FQL 多查询大批量获取数据
*   使用`?ids=<CSV LIST OF IDS>`Graph API 文档中的语法一次检索多个对象的数据

如果这些已经到位并且您仍然达到限制，只需限制您的呼叫并在几分钟的时间内在后台慢慢进行必要的呼叫

# sql - Postgresql 在 ubuntu 中更改数据目录

> ID：11608482
> 
> 赞同：16
> 
> 时间：2012-07-23T07:59:22.203
> 
> 标签：sql, postgresql, ubuntu, terminal

> **可能重复：**
> [Postgresql 无法启动](https://stackoverflow.com/questions/11562590/postgresql-failed-to-start)

这个问题一直让我发疯，似乎没有任何效果。我需要更改 postgresql 存储数据库的位置。在终端中使用命令时，我是一个完全的新手，使用正确命令的分步说明真的很有帮助。我搜索了整个网络，但所有说明都假设对终端命令有一些先验知识。我确实尝试了一种方法，方法是在主数据文件夹中创建一个指向所需位置的符号链接。这给了我一个错误，要求我检查日志文件。但是，我不知道日志文件在哪里。很多人似乎都有这个问题，一步一步的解决方案肯定会有所帮助。我的 Psql 版本是 8.4。Ubuntu 10.10

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-23T08:31:19.533

最新的日志文件完整路径是`/var/log/postgresql/postgresql-8.4-main.log`，但符号链接不是更改数据位置的更集成/更简单的方法。

我建议通过使用 debian/ubuntu postgres 软件包附带的[pg_createcluster](http://manpages.ubuntu.com/manpages/maverick/man8/pg_createcluster.8.html)命令将整个集群创建到所需位置来实现。

1-删除您当前的集群，如果它不包含任何先前的数据：

> ```
> $ sudo pg_dropcluster --stop 8.4 main 
> ```

2-在新位置创建一个新集群

> ```
> $ sudo pg_createcluster -d /path/to/new/location 8.4 main 
> ```

3-重启postgresql

> ```
> $ sudo /etc/init.d/postgresql start 
> ```

# maven-2 - Maven：如何在组装期间移动文件

> ID：11608483
> 
> 赞同：3
> 
> 时间：2012-07-23T07:59:22.563
> 
> 标签：maven-2, maven-assembly-plugin

在组装期间，我想将发布目录中的所有文件包含到我的程序集的根目录中。如果我执行以下操作：

```
<fileSet>
  <directory>${basedir}/</directory>
  <outputDirectory>/</outputDirectory>
  <includes>
    <include>src/main/resources/release/**</include>
  </includes>
</fileSet> 
```

然后所有文件都被添加到我的版本中名为 src/main/resources/release/ 的文件夹中。有没有办法在包含字段时不包含文件夹路径？

我正在使用 2.3 版本的程序集插件。如果无法使用程序集插件执行此操作，是否可以使用其他插件执行此操作？（最好不借助 ant 插件）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T08:45:43.913

您必须像这样进行一些不同的配置：

```
<fileSet>
  <directory>src/main/resources/release/</directory>
  <outputDirectory>/</outputDirectory>
  <includes>
    <include>**</include>
  </includes>
</fileSet> 
```

# arrays - 阵列设计原则

> ID：11608484
> 
> 赞同：0
> 
> 时间：2012-07-23T07:59:25.477
> 
> 标签：arrays, language-design, offset

所有编程论坛中都有数百个数组主题。甚至可能成千上万。日常。但他们都没有涉及到这方面。

因为数组是从 0 开始索引的，所以我仍然经常从 1 开始访问我的数据。原因是零字段通常可以很好地保存列或行的总数以及状态标志，而不是过多的命名变量。阅读它总是更有意义，因为其中的第四个条目可见为 4，而不是 3。有些人称建筑物的底层为“1”，下一层称为“2”或二楼。其他人称地面上的一楼为1，依此类推。人们因此而迷失在建筑物中。在 CAD 的严苛世界中，任何打断思路的事情，无论是多么轻微的干扰，都等于收入损失。因此，我喜欢尽可能接近自然概念模型的数组。

所以第一个问题是，.. 这是可以接受的做法吗？如果没有，为什么不呢？尽管我是唯一一个阅读我自己的代码的人，但我很少分享它，我认为不要偏离惯例太远是有价值的。至少如果我以自己的血腥方式继续前进，我很清楚原因。

还有一些问题，虽然它们应该有自己的线索，但它们都以某种方式相互关联，所以我也会列出它们

我还发现，数组的某些部分通常是冗余的，因为在您的软件要使用的现实世界中，这些情况不会出现。所以问题二：与其拥有一个大数组，是否可以将数据使用重新考虑成较小的同类数组，其中这些死区被最小化？它与上述问题的关系是，这将是另一组零零场，它们本身可能变得多余。我知道有一种情绪“.. 嘿，有很多记忆”，但不知何故，我的观点只是草率的想法。

和我的最后一个问题：有时我会在我的索引中添加一个偏移量来满足处理用户历史的额外维度**

```
printf("   %s \t %d \n", foo[i],bar[i][c]);
printf("   %s \t %d \n", foo[i],bar[i][c+1]);
printf("   %s \t %d \n", foo[i],bar[i][c+2]); 
```

所以我在这里担心几件事。在每次访问时进行计算是否会影响速度？在移动应用程序的世界中，这是否代表了一些本来可以避免的电池使用情况？

** 对于阅读本文的任何初学者而言，如果您将 3 维数组视为魔方，则 4 维及以上数组很容易理解。在你坐的房间里放另一个或两个立方体，你有四个。满是房间的建筑物是第五个，依此类推，建筑物的城市街区为六，城市状态为 7，国家等及以上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:35:27.380

了解权衡的一个很好的起点是知道您正在谈论的事物的名称。这称为“基于零的编号”，您可以在 Wikipedia 上阅读它：

[http://en.wikipedia.org/wiki/Zero-based_numbering](http://en.wikipedia.org/wiki/Zero-based_numbering)

零是违反直觉的想法由来已久，直到今天，[“自然数”](http://en.wikipedia.org/wiki/Natural_number#History_of_natural_numbers_and_the_status_of_zero)一词是否应该包括它一直在争论。我觉得这很自然，并且更喜欢将包含其主要入口的建筑物的地板标记为 0（并且地下停车位为 -1、-2、-3...）

*[（再一次，我支持我们的循环常数应该是 pi 当前值的两倍的](http://hostilefork.com/2010/07/18/clocks-that-run-backwards/)想法，比这种趋势在互联网上大放异彩的几年前。）*

Dijkstra 提出了一个论点，即从零开始的索引是有意义的。他的理由是，程序员希望能够谈论范围内的数字零，而不必调用 -1 作为界限：

[http://www.cs.utexas.edu/users/EWD/transcriptions/EWD08xx/EWD831.html](http://www.cs.utexas.edu/users/EWD/transcriptions/EWD08xx/EWD831.html)

在逆势而上并使用从 1 开始编号的现代语言中，有 Rebol [by fiat](http://www.rebol.com/docs/core23/rebolcore-7.html#section-3)和 Lua [by convention](http://www.lua.org/pil/11.1.html)。我认为 Rebol 确实经过深思熟虑，但这是我不同意的决定之一。一般来说，我觉得基于一个的系统所带来的任何优势都被拥有一个标准所抵消......而且处理器架构在这一点上根本不会很快改变。

现在至于这一点：

> 我经常仍然从一个开始访问我的数据。原因是零字段通常可以很好地保存列或行的总数以及状态标志，而不是过多的命名变量。

这听起来像是一种非常危险的做法。如果您以这种方式滥用您的数组，您就是在自找麻烦，因为您正在颠覆该语言所具有的任何边界检查功能。极端情况下，这种编程方式会让您完全消除单独的变量。结构和类型系统的存在是有原因的。

至于这个：

> 有时我会在我的索引中添加一个偏移量以适应额外的维度（...），所以我在这里担心一些事情。在每次访问时进行计算是否会影响速度？在移动应用程序的世界中，这是否代表了一些本来可以避免的电池使用情况？

我向您保证，与不使用正确的数组边界所引入的错误相比，这些添加所花费的时间是您最不关心的问题。

# c++ - C++11 / VS2010：返回不可复制但可移动对象的容器

> ID：11608490
> 
> 赞同：6
> 
> 时间：2012-07-23T08:00:00.610
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, move-semantics

考虑以下代码：

```
#include <vector>
#include <boost/noncopyable.hpp>

struct A : private boost::noncopyable
{
  A(int num, const std::string& name)
    : num(num),
      name(name)
  {
  }

  A(A&& other)
    : num(other.num),
      name(std::move(other.name))
  {
  }

  int num;
  std::string name;
};

std::vector<A> getVec()
{
  std::vector<A> vec;
  vec.emplace_back(A(3, "foo"));
  // vec.emplace_back(3, "foo"); not available yet in VS10?

  return vec; // error, copy ctor inaccessible
}

int main ( int argc, char* argv[] )
{
  // should call std::vector::vector(std::vector&& other)
  std::vector<A> vec = getVec();

  return 0;
} 
```

这不会在 VS2010 下编译，因为显然`A`是`noncopyable`并且因此`std::vector<A>`无法复制。因此，我不能`std::vector<A>`从函数中返回 a 。

但是，考虑到 RVO 的概念，我觉得这种事情是不可能的。如果此处应用了返回值优化，则可以省略复制构造并且调用`getVec()`将有效。

那么这样做的正确方法是什么？这在 VS2010 / C++11 中是否可行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T08:21:41.023

如果`return vec;`不编译，VS2010 还不完全支持移动语义。通常，如果从函数返回，自动变量会被隐式移动。用作临时解决方法`return std::move(vec);`，并在脑海中记下以摆脱`std::move`将来。

完整的解释可以[在这个常见问题解答](https://stackoverflow.com/a/11540204/)的标题“移出功能”下找到。

此外，您的双参数构造函数会复制通过引用到 const 传递的字符串参数。我建议改为按值取参数并将其移至成员中：

```
A(int num, std::string name) : num(num), name(std::move(name)) { } 
```

这样，您可以最大限度地减少必要副本的数量。见[想要速度？按值传递以](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)获取详细信息。

此外，由于您的移动构造函数没有做任何特别的事情，您可以`default`：

```
A(A&& other) = default; 
```

这使得它在面对变化时更加稳健。错误很少隐藏在您不编写的代码中:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T08:07:20.490

> 但是，考虑到 RVO 的概念，我觉得这种事情是不可能的。

Elision 是命名返回值优化等东西的总称，是一种优化。这不是*必需*的。规范*允许*这样做，但即使允许这样做也不会强制任何实现这样做。

因此，为了在允许省略的编译器和不允许省略的编译器之间强制执行一致性，如果操作允许省略，编译器仍***必须***验证在代码的当前状态下是否*可以省略复制/移动。*因此，如果无法访问复制/移动构造函数，即使编译器实际上不会调用它，操作也会失败。

在这种情况下，Visual Studio 2010 在这方面似乎有些困惑。它确实认识到`return vec;`应该从`vec`. 不过貌似VS2010的`std::vector`实现需要一个move赋值操作符才能move；如果没有，它将尝试复制。

# flash - 这个动画是怎么做的[闪]

> ID：11608501
> 
> 赞同：-1
> 
> 时间：2012-07-23T08:00:56.517
> 
> 标签：flash, animation, web

谁能提示一下哪些程序可以制作出如此专业的 Flash 动画？快闪网站：http: [//intercarsmotorshow.pl](http://intercarsmotorshow.pl)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:07:15.527

1.  静态图像背景（3dmax、maya、aftereffects、photoshop）
2.  各种视频文件位于有动画的区域（3dmax、maya、后效）
3.  覆盖弹出窗口 flash stage2d 库项目包含图片和一些视频
4.  底部的图标是激活视频的动画剪辑按钮，鼠标悬停在两个背景之间的 alpha tween

# build-automation - TFS 2010 成功构建后没有复制 exe 文件

> ID：11608502
> 
> 赞同：6
> 
> 时间：2012-07-23T08:01:00.863
> 
> 标签：build-automation, exe

我正在安装 TFS 2010 和 Visual Studio 2010（也安装在服务器中），我为 C# 项目创建了构建定义。构建最终成功，但我的放置文件夹中没有 .exe 文件，但是我可以找到 dll，

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:35:46.517

这可能是您要构建的配置的问题。

在解决方案资源管理器中，右键单击解决方案并选择“配置管理器”。这将显示解决方案中所有项目的列表。创建“EXE”的项目可能设置为“x86”，创建“DLL(s)”的项目可能设置为“AnyCPU”。

您应该为其中的每一个提供一个“平台”，以及一个用于构建所有项目的“混合平台”的“平台”。

现在检查您的构建定义。查看流程选项卡并查看“要构建的项目”设置，确保您正在构建“发布|混合平台”。如果您在构建输出中仅获得 dll，我怀疑您的构建设置为“Release|AnyCPU”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:24:22.787

如果您对新的构建和设置进行排队，则可以观察到 TFS-Build 的整个流程`Verbosity = diagnostic`
构建结束后，打开它并选择“查看日志”。

A`BinariesDirectory`在 内获得它的值`Initialize Binaries Directory`。
另一个名为的变量在基于的东西中`OutputDirectory`获取它的值。MSBuild 将结果放入此. 最后，在下面的所有内容都被复制到放置位置。执行此操作的活动不关注任何扩展 - 它只是复制整个目录。`Initialize OutputDirectory``BinariesDirectory`
`OutputDirectory`
`Copy Files to Drop Location``BinariesDirectory`

`Microsoft.TeamFoundation.Build.Workflow.Activities.CopyDirectory`

为了体验您所报告的内容，您可能正在使用非默认构建过程模板 XAML，或者您的 MSBuild 参数以某种方式更改，或者 *exe-csproj 具有硬编码的输出路径。
无论如何，如果您如上所述跟踪构建日志，您应该能够找到罪魁祸首。
祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:17:49.910

感谢您的回复，这正是问题所在，三个项目之一被设置为“x86”而不是“AnyCPU”，我在组织二进制文件夹后注意到（因为默认情况下 TFS 将所有内容放在同一个文件夹中，所以它可以很难看到）使用帖子：http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/。

现在问题已经解决了。感谢您的帮助，祝您有愉快的一天。

# c - 获取类型定义指针指向的 sizeof 类型

> ID：11608511
> 
> 赞同：3
> 
> 时间：2012-07-23T08:01:41.750
> 
> 标签：c, sizeof

我的代码如下所示：

```
#include <stdio.h>
typedef struct SomeStruct* ptr;
main(){
  printf("%lu\n",sizeof(ptr));
} 
```

给定的代码将打印`struct SomeStruct*`. 不过我想要`sizeof(struct SomeStruct)`。如果我事先不知道结构的名称，有没有办法让我仍然找到指向的结构的大小`ptr`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:02:38.473

如果你有一个 type 的变量`ptr`，你可以取消引用它：

```
ptr v;
sizeof(*v) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T08:27:47.810

由于`NULL`是一个可以转换为 type 的变量，因此`ptr`只需使用它：

```
sizeof *(ptr)NULL 
```

或者，您可以避免 typedef-ing 指针的丑陋做法，这个问题完全消失了。

# rest - Spring MVC 构建的 Web 服务的属性选择，包括 XML 和 JSON

> ID：11608514
> 
> 赞同：1
> 
> 时间：2012-07-23T08:01:51.190
> 
> 标签：rest, spring-mvc

有没有人有一个好主意，可能还有关于如何为 Spring MVC 构建的 Web 服务实现类似于 Facebook 的属性选择的代码示例？我们的 Web 服务是 RESTFul 的，目前支持 JSON 和 XML。我的想法是创建一个过滤器，如果存在将使用“字段”参数来减少响应 json 文件。对于 XML，它可能更具挑战性。

# java - 计算数组中数字的出现次数

> ID：11608515
> 
> 赞同：0
> 
> 时间：2012-07-23T08:01:56.757
> 
> 标签：java, arrays

我有一阵子了。我尝试调试，但我无法找出解决方案。我正在尝试计算数字的出现。所以我的问题是当我打印输出时

```
3 occurs 1 times
1 occurs 1 times
0 occurs 1 times
2 occurs 1 times
1 occurs 2 times
3 occurs 2 times
2 occurs 2 times
0 occurs 2 times
10 occurs 1 times
4 occurs 1 times 
```

代替

```
1 occurs 2 times
0 occurs 2 times
2 occurs 2 times
3 occurs 2 time
10 occurs 1 times
4 occurs 1 times 
```

因此，如果该数字出现超过 1 次，它应该只说一次，而不是出现次数。干杯 这是代码

```
import java.util.*;

public class CountingOccuranceOfNumbers
{

    public static void main(String[] args) 
    {
        countNumbers();
    }

    public static void countNumbers()
    {
        Scanner input = new Scanner(System.in);
        Random generator = new Random();
        int[] list = new int[11];
        int[] counts = new int[150];
        int counter = 0;
        int number = 1;

        while(counter <= 10)
        {
                number = generator.nextInt(11);
                list[counter] = number;
                counter++;
        }   
        for(int i=0; i<list.length - 1; i++)
        {
            counts[list[i]]++;
//          System.out.print(list[i] + " ");

            System.out.println(list[i] +" occurs " +  counts[list[i]] + " times");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:19:00.337

使用 a`HashMap<Integer>,<integer> ht`管理您的计数

```
if (ht.get(newNumber) == null) {
     ht.put(newNumber, 1); 
} else {
     ht.put(newNumber, ++ht.get(newNumber));
} 
```

*更正及之前`HashTable`_`HashMap``++``get(..)`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T13:22:42.673

另一个选择是 guava 的 Multiset 类，它将为您跟踪计数：

```
int values[] = ...;
Multiset<Integer> ms = HashMultiset.create();
ms.addAll(Ints.asList(list));

int count0 = ms.count(Integer.valueOf(0));
int count1 = ms.count(Integer.valueOf(1)); 
```

这里，Multiset、HashMultiset 和 Ints 都是番石榴类。

请注意，Multiset 通过使用 Map 和计数器来跟踪计数器，与上面提到的内容差不多。它只是从您那里抽象出来以使您的代码更简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:21:02.087

您有一个循环来计算发生次数，这也给出了运行总数。看来您想要的是仅在计数完成时打印总数。即它应该在另一个循环中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:20:49.273

好的，我会尽量给你一两个提示。

1.  由于每个多次出现的数字都打印了几行，因此在完成计数之前，您可能不应该打印任何内容。
2.  看起来您的输出应该按照出现次数进行排序。如果是这种情况，将计数保存在数组中可能不是最好的主意。考虑改用 a `Map<Integer, Integer>`，其中键是数字，值是出现次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-03T13:21:03.080

```
 import java.io.BufferedReader;
    import java.io.InputStreamReader;

    public class NumberRepetition {

    public static void main(String[] args) throws Exception {
        int size;
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    System.out.println("enter size of array");
    size=Integer.parseInt(br.readLine());
    int el;
    int[] a=new int[size];
    for(int i=0;i<size;i++)
    {
        System.out.println("enter a number");
        el=Integer.parseInt(br.readLine());
        a[i]=el;
    }
    for(int i=0;i<size;i++)
    {
        for(int j=0;j<size-1;j++)
        {
            if(a[j]>a[j+1])
            {
                int temp=a[j];
                a[j]=a[j+1];
                a[j+1]=temp;

            }
        }
    }
    int count=0;
    for(int i=0;i<size;i++)
    {
        for(int j=0;j<size;j++)
        {
            if(a[i]==a[j])
            {
                count++;

            }

        }
        System.out.println(a[i]+" \t " +"occurence time is"+"\t"+count);
        if(count!=0)
        {
            i=i+count-1;
        }
        count=0;
    }

}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T12:49:46.847

创建一个 HashMap 并使用 key,value 将新条目放入映射中，其中 value 是 Integer。

如果遇到相同的字符，则增加与该键关联的整数值。现在它是一个新键并将值设置为 1。

```
Integer entryValue;
Map map = new HashMap();

    for ( int i =0; i < s1.length(); i++)
    {
        entryValue = (Integer)map.get(s1.charAt(i));

        if (entryValue == null)
        {
            map.put(s1.charAt(i), new Integer(1));
        }

        else
        {
                map.put(s1.charAt(i), new Integer(entryValue.intValue()+1));
        }
    } 
```

# cocos2d-iphone - cocos2d 在场景中添加图层

> ID：11608517
> 
> 赞同：0
> 
> 时间：2012-07-23T08:02:13.107
> 
> 标签：cocos2d-iphone, add, layer

我知道我的问题可能很愚蠢，但我进行了搜索，但找不到它为什么不起作用。我创建了一个具有以下实现的`CCLayer`类`BackgroundLayer`：

```
#import "BackgroundLayer.h"

@implementation BackgroundLayer

- (id)init {
    if (self != nil) {
        CCSprite *background = [CCSprite spriteWithFile:@"menu.png"];
        background.anchorPoint = ccp(0, 0);

        [self addChild:background z:-1];

        NSLog(@"test");
    }
    return self;
}

@end 
```

我想将它添加到主菜单场景中，我有：

```
#import "MainMenuScene.h"
#import "BackgroundLayer.h"

@implementation MainMenuScene

+ (id)scene { 
    CCScene *scene = [CCScene node];
    BackgroundLayer *backgroundLayer = [BackgroundLayer node];
    [scene addChild:backgroundLayer];
    return scene;
}

- (id)init {
    self = [super init];
    if (self != nil) {
    }
    return self;
}

@end 
```

我的问题是`NSLog`出现了测试，但没有加载背景。如果我在它的工作`init`方法上添加背景`MainMenuScene`......我不应该假设图层以这种方式工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:04:03.400

不确定是否相关，但您忘记`self = [super init];`了 BackgroundLayer。

尝试注释掉锚点线以查看图像是否显示。

# java - 由于 'org.hibernate.HibernateException: No Session found for current thread' 异常，需要 @Transactional 注释

> ID：11608518
> 
> 赞同：1
> 
> 时间：2012-07-23T08:02:13.433
> 
> 标签：java, spring, hibernate, transactions

所以，我读到放置@Transactional 注释的最佳位置是在包含数据库访问方法的DAO 类之外，就像在使用这些方法的服务类中一样。

现在，问题是，一旦我已经从 DAO 类中删除了这些注释，我就会启动 DAO 测试方法并引发上述异常。我将注释放回 DAO 类中，并且不再引发此异常。

然后我的问题是：我怎样才能清除我的 DAO 中的这些注释并且仍然让我的测试正常工作？

让我们添加一些代码：

**DAO 类**

```
public class UserDAO  extends IDAO implements IUserDAO {

    @Override
    //@Transactional(readOnly=true)
    public User get(int idUser) {
        return (User) currentSession().get(User.class,idUser);
    }} 
```

**IDAO类**

```
public abstract class IDAO {

    protected SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public Session currentSession()
    {
        return sessionFactory.getCurrentSession();
    }

} 
```

**测试班**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:META-INF/spring/app-context.xml" })
public class UserDAOTest extends AbstractJUnit4SpringContextTests {

    @Autowired
    private IUserDAO userDAO;

    @Test
    public void testGetUser() throws Exception {
        User user = userDAO.get(2);
        assertNotNull(user);
    }
} 
```

**应用程序配置**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url"
            value="jdbc:mysql://localhost:3306/waldb" />
        <property name="username" value="user" />
        <property name="password" value="password" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.wal.serverside.persistence.domain.User</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="userDAO" class="com.wal.serverside.persistence.DAO.UserDAO">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <context:component-scan base-package="com.wal.serverside.persistence" />

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:08:37.260

天哪，我能有多傻？

我的测试类没有从**AbstractTransactionalJUnit4SpringContextTests**扩展，所以我的测试中既没有事务也没有会话。

这解决了这一切：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:META-INF/spring/app-context.xml" })
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)
@Transactional
public class UserDAOTest extends AbstractTransactionalJUnit4SpringContextTests  {

    @Autowired
    private IUserDAO userDAO;

    public void setUserDAO(IUserDAO userDAO) {
        this.userDAO = userDAO;
    }

    @Test
    public void testGetUser() throws Exception {
        User user = userDAO.get(2);
        assertNotNull(user);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:50:30.073

尝试不仅在您的测试类上添加*@Transactional*注释，还要在*@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)*上添加。您在其中显式设置您在 xml.xml 中定义的事务管理器的名称。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:META-INF/spring/app-context.xml" })
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)
@Transactional(propagation=Propagation.REQUIRED, rollbackFor={Exception.class})
public class UserDAOTest {
     ...
} 
```

如果您在测试方法中显式创建应用程序上下文然后从中获取 bean，则事务也将不起作用：

```
ApplicationContext appContext = new ClassPathXmlApplicationContext(...);
SomeDAO someDAO = (SomeDAO) appContext.getBean(...); 
```

而不是注入它。

但我看到这不是你的情况。

# javascript - 从 firefox 扩展调用 $.ajax 不起作用

> ID：11608523
> 
> 赞同：0
> 
> 时间：2012-07-23T08:02:28.987
> 
> 标签：javascript, ajax, firefox, firefox-addon

我正在尝试制作一个将列出页面上所有视频的 Firefox 扩展。我已经让它作为一个普通的 js 脚本（不是作为扩展）工作，所以我知道这个脚本可以工作。

我的问题是我的 Firefox 扩展中的 $.ajax 根本没有被调用。如果我查看错误控制台，它会显示一条消息，例如“不安全地使用 Jquery”。我试过搜索谷歌和其他网站，但我找不到解决方案。

这是问题所在的代码：

```
 var listMainVid = function ()
{
    // Make a JSONP call. We are using JSONP instead of JSON because we have to make a cross-domain AJAX call
    $.ajax({
        url:        vidinfo_q_url + "?jsoncallback=?",      // Don't forget to put in the 'jsoncallback=' part
        dataType:   'jsonp',        // Make a JSONP request, have it received as text, and interpreted by jQuery as JSON: "jsonp text xml."
        data:       {
                        video_url:  '' + doc.document.location
                    },
        success:    function ( data, textStatus, jqXHR )    // Keep in mind that this is just the request sending success.
                    {
                        if ( data.status === 'SUCCESS' )
                        {
                            var vid_loc = data.url, img_url=data.image_url;
                            if( Object.prototype.toString.call( vid_loc ) === '[object Array]' )    // Check if it's an array
                                vid_loc = data.url[0];
                            if( Object.prototype.toString.call( img_url ) === '[object Array]' )    // Check if it's an array
                                img_url = data.image_url[0];
                            addVideoToVidDiv( data.id, vid_loc, img_url );
                        }
                        else    // Error
                        {
                            //alert ( " Error! Data=" + data.status );
                        }
                        afterMainVid();
                    },  
        error:      function( xhRequest, ErrorText, thrownError )       
                    {
                        Application.console.log( " Can't do because: " + ErrorText + ", " + thrownError );
                        afterMainVid();
                    }
    });
    afterMainVid();
} 
```

任何帮助/指针将不胜感激。

好的，我终于自己想通了。这适用于可能遇到同样问题的任何其他人。将dataType：'jsonp'，更改为dataType：'json'，就是这样！我不知道为什么，但 FF 似乎不支持来自内部扩展的“jsonp”调用。这里要注意的一件事是，在 FF 扩展中，无论如何您都不需要“jsonp”，因为扩展可以自由地进行跨域 ajax 调用。希望这会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:52:52.547

好的，正如 SomeKittens 所要求的，我正在回答我自己的问题（不知道我能做到这一点）。

解决问题的方法是将dataType：'jsonp'，改为dataType：'json'。

我不知道为什么，但 FF 似乎不支持来自内部扩展的“jsonp”调用。这里要注意的一件事是，在 FF 扩展中，无论如何您都不需要“jsonp”，因为扩展可以自由地进行跨域 ajax 调用。希望这会有所帮助。

我还在问题本身中提供了答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:06:44.400

您是否完全安装了扩展程序？您不能只执行 .xul 文件，您必须正确安装它以让 Firefox 知道您“信任”该扩展，然后再让它执行 AJAX 请求之类的操作。

# java - 当这样的方法存在时，为什么会抛出`NoSuchMethodException`？

> ID：11608526
> 
> 赞同：1
> 
> 时间：2012-07-23T08:02:53.043
> 
> 标签：java, scala, reflection, jvm, anonymous-class

我期望这段代码（在精炼类型上使用模式匹配后调用匿名类的方法）

```
(new {
    def foo : Unit = println("Called foo method")
} : Any) match {
    case f : {def foo : Unit} ⇒
        println("Has foo method")
        f.foo
} 
```

打印

```
Has foo method
Called foo method 
```

（以及未经检查的警告）。

我知道由于类型擦除，匹配总是成功，但这不应该导致问题，因为运行时类型（即使考虑擦除）`f`应该是`$anon$NameOfSomeAnonymousClassThatHasAfooMethod`

当进入 Scala REPL (2.9.1) 时，它实际上会抛出`NoSuchMethodException`：

```
<console>:11: warning: refinement AnyRef{def foo: Unit} in type pattern AnyRef{def foo: Unit} is unchecked since it is eliminated by erasure
              case f : {def foo : Unit} ⇒
                       ^
Has foo method
java.lang.NoSuchMethodException: $anon$1.foo()
        at java.lang.Class.getMethod(Class.java:1622)
        at .reflMethod$Method1(<console>:13)
        at .<init>(<console>:13)
        at .<clinit>(<console>:13)
        at .<init>(<console>:11)
        at .<clinit>(<console>)
        at $print(<console>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
        at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
        at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
        at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
        at java.lang.Thread.run(Thread.java:679) 
```

为什么？

# 编辑

事实证明，直接原因是`foo`生成为私有的。我在回答中推测了造成这种情况的原因，但我不确定。如果您有任何想法，请随时将其发布为答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:51:26.860

> 我知道匹配总是由于类型擦除而成功，但这不应该导致问题，因为 f 的运行时类型（即使考虑擦除）应该是 $anon$NameOfSomeAnonymousClassThatHasAfooMethod

从某种意义上说，它“应该”是显而易见的实现，并且是您所期望的；它不需要，正如你所发现的，它不需要。

细化上的模式匹配是盲目的。你必须有很大的信心。

> 这很奇怪，因为默认情况下 Scala 方法应该是公开的。

你在源代码中声明的方法默认是公开的。实施细节不是。

> 我怀疑原因是编译器错误地认为由于该类是匿名的，因此其定义的方法无法从类外部调用。

编译器正确地假定您必须违反安排条款才能直接调用匿名类的任何方法。你投你的参考，你抓住你的机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:31:02.063

经过更多调查，我发现该方法以某种方式被设为私有：

```
(new {
    def foo : Unit = println("Called foo method")
} : Any) match {
    case f : {def foo : Unit} ⇒
        println("Has foo method")
        f.getClass.getDeclaredMethods
} 
```

打印`res5: Array[java.lang.reflect.Method] = Array(private void $anon$1.foo())`。

这很奇怪，因为默认情况下 Scala 方法应该是公开的。

正如 Edmondo1984 指出的那样，`foo`如果您删除`: Any`.

## 投机的

我怀疑原因是编译器错误地假设由于类是匿名*的并且实例被声明为另一种类型*，因此其定义的方法无法从类外部调用。这个假设在 Java 中是有效的，但在提供结构类型的语言中是无效的。因此，在过度热心地应用[信息隐藏](https://en.wikipedia.org/wiki/Information_hiding)原则时，它将它们生成为私有的。如果是这样，这要么是编译器错误，要么是语言设计的极端情况（使用匿名函数和结构类型）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:46:00.797

正如我在评论中猜测的那样，问题在于，如果将匿名类向上转换为 Any，编译器会自动限制匿名定义方法的可见性。

```
(new {
    def foo : Unit = println("Called foo method")
} ) match {
    case f : {def foo : Unit} ⇒
        println("Has foo method")
        f.getClass.getDeclaredMethods
} 
```

根据定义，您在不属于其任何超类的匿名类中创建的方法将仅在您刚刚创建的对象上可用。但是，如果您立即将对象向上转换为 Any，则不会有匿名类的类型安全实例，您将能够安全地调用方法 foo。

# r - read.table 中的错误

> ID：11608528
> 
> 赞同：3
> 
> 时间：2012-07-23T08:03:06.210
> 
> 标签：r

我无法`row.names`在函数中指定正确的参数`read.table()`

这是简单的文字：

```
 name      sex     age  height  
1 x1        F       18   162  
2 x2        M       19   170  
3 x3        M       21   178  
4 x4        F       22   166  
5 x5        F       23   165 
```

当我读到：

```
data1=read.table('test',head=T,sep='',row.names=T)  
invalid 'row.names' specification  

data1=read.table('test',head=T,sep='',row.names=T)  
invalid 'row.names' specification 
```

其他信息：

```
> version  
               _                            
platform       i686-pc-linux-gnu             
arch           i686                           
os             linux-gnu                      
system         i686, linux-gnu                
status                                        
major          2                              
minor          15.1                           
year           2012                           
month          06                             
day            22                             
svn rev        59600                         
language       R                              
version.string R version 2.15.1 (2012-06-22)  
nickname       Roasted Marshmallows 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T08:08:11.497

在`read.table`参数`row.names`中必须输入一个数字（即包含行名称的列号）或名称向量。请参阅`?read.table`完整说明。这里：

```
data1 <- read.table('test',header=T,sep=" ",row.names=1) 
```

# database - 客户端服务器架构设计

> ID：11608529
> 
> 赞同：0
> 
> 时间：2012-07-23T08:03:08.253
> 
> 标签：database, architecture, client-server

该应用程序是客户端服务器模型。

客户端应用程序具有客户将在日常交易中使用的本地数据库。

服务器拥有另一个数据库，其中包含来自客户端的综合信息以及其他一些关键信息。

客户端和服务器需要周期性地进行通信：数据迁移、从服务器访问数据（客户端不可用）等。

客户端或服务器都没有静态 IP 地址。

如何确保客户端可以无缝连接到服务器？

由于业务需求，将所有内容都放在一个位置（例如，在云中或在数据中心）不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T22:26:34.007

如果只有一台服务器，为什么不能有静态 IP？

它总是有一个外部可见的IP吗？然后动态 DNS 适合您 - 服务器会在 IP 地址更改时通知 DNS 服务器。

如果他们都没有可公开访问的地址，您将需要一个调解器（代理），它有。现在，这个中介要么知道数据，要么将数据加密。

这样的中介可以是任何东西，例如 XMPP 服务器，其中服务器将被分配一个特定的 JID，如 server@mydomain，客户端将被分配给他们自己的 ID（如 customername@mydomain），或者可能是一些 PubSub 解决方案，或者它甚至可以是基于电子邮件的解决方案（是的，这很脏），客户端和服务器都定期读取他们的邮箱。

我想大多数 ESB 解决方案也可以。

主要的是，为了在 Internet 上创建客户端-服务器架构，服务器（或通过自己的应用程序特定协议帮助访问服务器的中介）必须是公开可访问的。

# java - 将外部化值注入 Spring 注解

> ID：11608531
> 
> 赞同：33
> 
> 时间：2012-07-23T08:03:15.220
> 
> 标签：java, spring, annotations, spring-scheduled

我一直在考虑在编译时评估注释值的 Java 特性，它似乎确实使外部化注释值变得困难。

但是，我不确定这是否真的不可能，所以我很感激任何建议或明确的答案。

更重要的是，我正在尝试外部化一个注释值，该值控制 Spring 中计划的方法调用之间的延迟，例如：

```
public class SomeClass {

    private Properties props;
    private static final long delay = 0;

    @PostConstruct
    public void initializeBean() {
        Resource resource = new ClassPathResource("scheduling.properties");
        props = PropertiesLoaderUtils.loadProperties(resource);
        delay = props.getProperties("delayValue");
    }

    @Scheduled(fixedDelay = delay)
    public void someMethod(){
        // perform something
    }
} 
```

假设它`scheduling.properties`在类路径上并且包含属性键`delayValue`及其对应的长值。

现在，这段代码有明显的编译错误，因为我们试图为`final`变量赋值，但这是强制性的，因为我们不能将变量赋值给注释值，除非它是`static final`.

有没有办法解决这个问题？我一直在考虑 Spring 的自定义注解，但根本问题仍然存在——如何将外部化的值分配给注解？

欢迎任何想法。

编辑：一个小更新 - 对于这个例子来说，Quartz 集成是多余的。我们只需要以亚分钟分辨率定期执行，仅此而已。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-05-09T14:14:29.867

Spring v3.2.2 中的`@Scheduled`注解在原来的 3 个长参数中增加了 String 参数来处理这个问题。`fixedDelayString`，现在也可用`fixedRateString`：`initialDelayString`

```
 @Scheduled(fixedDelayString = "${my.delay.property}")
 public void someMethod(){
        // perform something
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T10:39:41.443

谢谢你们的回答，你们提供了宝贵的信息，让我找到了这个解决方案，所以我对这两个答案都投了赞成票。

我选择制作自定义 bean 后处理器和自定义`@Scheduled`注释。

代码很简单（本质上它是对现有 Spring 代码的微不足道的改编），我真的想知道他们为什么不从一开始就这样做。`BeanPostProcessor`的代码数量实际上翻了一番，因为我选择处理旧注释和新注释。

如果您对如何改进此代码有任何建议，我将很高兴听到。

**CustomScheduled**类（注解）

```
@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface CustomScheduled {

    String cron() default "";

    String fixedDelay() default "";

    String fixedRate() default "";
} 
```

**CustomScheduledAnnotationBeanPostProcessor**类

```
public class CustomScheduledAnnotationBeanPostProcessor implements BeanPostProcessor, Ordered, EmbeddedValueResolverAware, ApplicationContextAware, ApplicationListener<ContextRefreshedEvent>, DisposableBean 
{
    private static final Logger LOG = LoggerFactory.getLogger(CustomScheduledAnnotationBeanPostProcessor.class);

    // omitted code is the same as in ScheduledAnnotationBeanPostProcessor......

    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    // processes both @Scheduled and @CustomScheduled annotations
    public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException {
        final Class<?> targetClass = AopUtils.getTargetClass(bean);
        ReflectionUtils.doWithMethods(targetClass, new MethodCallback() {
            public void doWith(Method method) throws IllegalArgumentException, IllegalAccessException {

                Scheduled oldScheduledAnnotation = AnnotationUtils.getAnnotation(method, Scheduled.class);
                if (oldScheduledAnnotation != null) {
                    LOG.info("@Scheduled found at method {}", method.getName());
                    Assert.isTrue(void.class.equals(method.getReturnType()), "Only void-returning methods may be annotated with @Scheduled.");
                    Assert.isTrue(method.getParameterTypes().length == 0, "Only no-arg methods may be annotated with @Scheduled.");
                    if (AopUtils.isJdkDynamicProxy(bean)) {
                        try {
                            // found a @Scheduled method on the target class for this JDK proxy -> is it
                            // also present on the proxy itself?
                            method = bean.getClass().getMethod(method.getName(), method.getParameterTypes());
                        } catch (SecurityException ex) {
                            ReflectionUtils.handleReflectionException(ex);
                        } catch (NoSuchMethodException ex) {
                            throw new IllegalStateException(String.format(
                                    "@Scheduled method '%s' found on bean target class '%s', " +
                                    "but not found in any interface(s) for bean JDK proxy. Either " +
                                    "pull the method up to an interface or switch to subclass (CGLIB) " +
                                    "proxies by setting proxy-target-class/proxyTargetClass " +
                                    "attribute to 'true'", method.getName(), targetClass.getSimpleName()));
                        }
                    }
                    Runnable runnable = new ScheduledMethodRunnable(bean, method);
                    boolean processedSchedule = false;
                    String errorMessage = "Exactly one of 'cron', 'fixedDelay', or 'fixedRate' is required.";
                    String cron = oldScheduledAnnotation.cron();
                    if (!"".equals(cron)) {
                        processedSchedule = true;
                        if (embeddedValueResolver != null) {
                            cron = embeddedValueResolver.resolveStringValue(cron);
                        }
                        cronTasks.put(runnable, cron);
                    }
                    long fixedDelay = oldScheduledAnnotation.fixedDelay();
                    if (fixedDelay >= 0) {
                        Assert.isTrue(!processedSchedule, errorMessage);
                        processedSchedule = true;
                        fixedDelayTasks.put(runnable, fixedDelay);
                    }
                    long fixedRate = oldScheduledAnnotation.fixedRate();
                    if (fixedRate >= 0) {
                        Assert.isTrue(!processedSchedule, errorMessage);
                        processedSchedule = true;
                        fixedRateTasks.put(runnable, fixedRate);
                    }
                    Assert.isTrue(processedSchedule, errorMessage);
                }

                CustomScheduled newScheduledAnnotation = AnnotationUtils.getAnnotation(method, CustomScheduled.class);
                if (newScheduledAnnotation != null) {
                    LOG.info("@CustomScheduled found at method {}", method.getName());
                    Assert.isTrue(void.class.equals(method.getReturnType()), "Only void-returning methods may be annotated with @CustomScheduled.");
                    Assert.isTrue(method.getParameterTypes().length == 0, "Only no-arg methods may be annotated with @CustomScheduled.");
                    if (AopUtils.isJdkDynamicProxy(bean)) {
                        try {
                            // found a @CustomScheduled method on the target class for this JDK proxy -> is it
                            // also present on the proxy itself?
                            method = bean.getClass().getMethod(method.getName(), method.getParameterTypes());
                        } catch (SecurityException ex) {
                            ReflectionUtils.handleReflectionException(ex);
                        } catch (NoSuchMethodException ex) {
                            throw new IllegalStateException(String.format("@CustomScheduled method '%s' found on bean target class '%s', "
                                    + "but not found in any interface(s) for bean JDK proxy. Either "
                                    + "pull the method up to an interface or switch to subclass (CGLIB) "
                                    + "proxies by setting proxy-target-class/proxyTargetClass " + "attribute to 'true'", method.getName(),
                                    targetClass.getSimpleName()));
                        }
                    }

                    Runnable runnable = new ScheduledMethodRunnable(bean, method);
                    boolean processedSchedule = false;
                    String errorMessage = "Exactly one of 'cron', 'fixedDelay', or 'fixedRate' is required.";

                    boolean numberFormatException = false;
                    String numberFormatErrorMessage = "Delay value is not a number!";

                    String cron = newScheduledAnnotation.cron();
                    if (!"".equals(cron)) {
                        processedSchedule = true;
                        if (embeddedValueResolver != null) {
                            cron = embeddedValueResolver.resolveStringValue(cron);
                        }
                        cronTasks.put(runnable, cron);
                        LOG.info("Put cron in tasks map with value {}", cron);
                    }

                    // fixedDelay value resolving
                    Long fixedDelay = null;
                    String resolverDelayCandidate = newScheduledAnnotation.fixedDelay();
                    if (!"".equals(resolverDelayCandidate)) {
                        try {
                            if (embeddedValueResolver != null) {
                                resolverDelayCandidate = embeddedValueResolver.resolveStringValue(resolverDelayCandidate);
                                fixedDelay = Long.valueOf(resolverDelayCandidate);
                            } else {
                                fixedDelay = Long.valueOf(newScheduledAnnotation.fixedDelay());
                            }
                        } catch (NumberFormatException e) {
                            numberFormatException = true;
                        }
                    }

                    Assert.isTrue(!numberFormatException, numberFormatErrorMessage);

                    if (fixedDelay != null && fixedDelay >= 0) {
                        Assert.isTrue(!processedSchedule, errorMessage);
                        processedSchedule = true;
                        fixedDelayTasks.put(runnable, fixedDelay);
                        LOG.info("Put fixedDelay in tasks map with value {}", fixedDelay);
                    }

                    // fixedRate value resolving
                    Long fixedRate = null;
                    String resolverRateCandidate = newScheduledAnnotation.fixedRate();
                    if (!"".equals(resolverRateCandidate)) {
                        try {
                            if (embeddedValueResolver != null) {
                                fixedRate = Long.valueOf(embeddedValueResolver.resolveStringValue(resolverRateCandidate));
                            } else {
                                fixedRate = Long.valueOf(newScheduledAnnotation.fixedRate());
                            }
                        } catch (NumberFormatException e) {
                            numberFormatException = true;
                        }
                    }

                    Assert.isTrue(!numberFormatException, numberFormatErrorMessage);

                    if (fixedRate != null && fixedRate >= 0) {
                        Assert.isTrue(!processedSchedule, errorMessage);
                        processedSchedule = true;
                        fixedRateTasks.put(runnable, fixedRate);
                        LOG.info("Put fixedRate in tasks map with value {}", fixedRate);
                    }
                    Assert.isTrue(processedSchedule, errorMessage);
                }
            }
        });
        return bean;
    }
} 
```

**spring-context.xml**配置文件

```
<beans...>
    <!-- Enables the use of a @CustomScheduled annotation-->
    <bean class="org.package.CustomScheduledAnnotationBeanPostProcessor" />
</beans> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T08:08:42.120

一些 spring 注释支持 SpEL。

第一的：

```
<context:property-placeholder
    location="file:${external.config.location}/application.properties" /> 
```

然后，例如：

```
@Value("${delayValue}")
private int delayValue; 
```

不过，我不确定是否`@Scheduled`支持 SPeL，但总的来说，这就是方法。

关于日程安排，请查看[我的这篇文章](http://techblog.bozho.net/?p=452)和[这个相关问题](https://stackoverflow.com/questions/6788811/taskscheduler-scheduled-and-quartz/6840970#6840970)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T08:08:45.883

更好的方法是使用任务名称空间在 xml 中定义调度

```
<context:property-placeholder location="scheduling.properties"/>
<task:scheduled ref="someBean" method="someMethod" fixed-delay="${delayValue}"/> 
```

如果您出于某种原因想要使用注解，您需要创建一个具有另一个可选属性的注解，您可以在其中指定属性名称，或者更好的是属性占位符表达式或 Spel 表达式。

```
@MyScheduled(fixedDelayString="${delay}") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-02T08:31:23.543

如果您想使用注解而不是 bean 配置 xml 来实现这一点，可以使用以下注解：@Component、@PropertySource 和 PropertySourcesPlaceholderConfigurer Bean 本身，如下所示：

```
@Component
@PropertySource({ "classpath:scheduling.properties" })
public class SomeClass {

    @Scheduled(fixedDelay = "${delay}")
    public void someMethod(){
        // perform something
    }

    @Bean
    public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }   
} 
```

# python - 在python中使用set时如何在输出中隐藏'set'关键字

> ID：11608532
> 
> 赞同：0
> 
> 时间：2012-07-23T08:03:19.127
> 
> 标签：python, comparison, set, python-2.x

好的，所以我在 python 中有两个列表

```
a = ['bad', 'horrible']
b = ['bad', 'good'] 
```

我正在使用集合运算符来比较两个列表，如果两个集合之间存在共同的单词，则给出输出。

```
print set(a) & set (b) 
```

这给出了输出，

```
set(['bad']) 
```

无论如何要删除输出中的关键字'set'？

我希望输出看起来像

```
['bad'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T08:04:31.890

只需将集合转换为列表：

```
list(set(['bad'])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:04:53.497

您可以从中列出清单：

```
list(set(['bad'])) 
```

好像

```
['bad'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:08:21.390

不创建一个列表来输出一个字符串，而只是创建一个要打印的字符串怎么样？

```
'[' + ', '.join(str(i) for i in your_set) + ']'
# or 
'[{}]'.format(', '.join(str(i) for i in your_set)) 
```

# php - 理解 if 语句中的 PHP 操作码

> ID：11608533
> 
> 赞同：8
> 
> 时间：2012-07-23T08:03:23.373
> 
> 标签：php, opcode

我试图理解一个简单代码的操作码。

代码是：

```
<?php

$a = TRUE;

$b = FALSE;

if($a && $b) {
    echo 'done';
} 
```

上述代码的操作码为：

```
php -dvld.active=1 test.php
Finding entry points
Branch analysis from position: 0
Jump found. Position 1 = 3, Position 2 = 4
Branch analysis from position: 3
Jump found. Position 1 = 5, Position 2 = 7
Branch analysis from position: 5
Jump found. Position 1 = 7
Branch analysis from position: 7
Return found
Branch analysis from position: 7
Branch analysis from position: 4
filename:       /home/starlays/learning/test.php
function name:  (null)
number of ops:  8
compiled vars:  !0 = $a, !1 = $b
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   3     0  >   ASSIGN                                                   !0, true
   5     1      ASSIGN                                                   !1, false
   7     2    > JMPZ_EX                                          ~2      !0, ->4
         3  >   BOOL                                             ~2      !1
         4  > > JMPZ                                                     ~2, ->7
   8     5  >   ECHO                                                     'done'
   9     6    > JMP                                                      ->7
  10     7  > > RETURN                                                   1

branch: #  0; line:     3-    7; sop:     0; eop:     2; out1:   3; out2:   4
branch: #  3; line:     7-    7; sop:     3; eop:     3; out1:   4
branch: #  4; line:     7-    7; sop:     4; eop:     4; out1:   5; out2:   7
branch: #  5; line:     8-    9; sop:     5; eop:     6; out1:   7
branch: #  7; line:    10-   10; sop:     7; eop:     7
path #1: 0, 3, 4, 5, 7, 
path #2: 0, 3, 4, 7, 
path #3: 0, 4, 5, 7, 
path #4: 0, 4, 7, 
```

我试图了解第 7 行发生了什么，评估是如何完成的？它在 if 的表达式中输入了多少值进行评估？它输入 3 个值，还是输入 2 个值 $a 的值和 $b 的值，然后计算 if 括号中的表达式？

我已经阅读了 [JMPZ_EX](http://php.net/manual/en/internals2.opcodes.jmpz-ex.php)的手册，我已经了解操作代码中发生的事情，直到步骤 2 之后有点混淆，我很难理解 php 正在执行的确切步骤。

我需要了解的另一件事是操作代码中的所有分支是什么，最后将使用所有分支中的哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:46:37.450

除非您精通[ASM](http://en.wikipedia.org/wiki/Assembly_language)，否则我认为了解正在发生的事情的最简单方法是通过阅读其在 PHP 中的（几乎）1:1 表示来查看相同的代码：

```
if(!$a) goto end;
if(!$b) goto end;
echo 'done';
end: return 0; 
```

中间表示基于实际子句的否定来跳过`if`块中包含的代码。

如果您想真正了解 PHP 如何将其输入转换为该操作码数组，则必须了解 PHP 内部原理，但不要在学习[龙书](https://stackoverflow.com/search?q=the%20dragon%20book)之前，特别是关于中间表示的部分，它是编译管道的一部分。

其余的操作码是“背景噪音”、中间值，甚至是一条毫无意义的指令，`9 6 > JMP ->7`这可能是因为努力让 PHP 解析器吐出最佳操作码数组是没有意义的要运行的 ZendVM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:08:12.033

```
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   3     0  >   ASSIGN                                                   !0, true
   5     1      ASSIGN                                                   !1, false
   7     2    > JMPZ_EX                                          ~2      !0, ->4
         3  >   BOOL                                             ~2      !1
         4  > > JMPZ                                                     ~2, ->7
   8     5  >   ECHO                                                     'done'
   9     6    > JMP                                                      ->7
  10     7  > > RETURN                                                   1 
```

按行号**#**

```
0 assigns true to !0, !0 is just the internal representation of $A
1 assigns true to !1, !1 is $B 
```

JMPZ 表示如果值为 0，则跳转到代码。我不确定 JMPZ_EX 的具体区别，它看起来允许返回布尔结果。

所以：

```
2 JMPZ_EX, Jump to #4 (->4) if !0 ($A) is 0 (FALSE) and assign the result to ~2

3 BOOL !1 return ~2\. ~2 is now equal to the BOOLean value of !1 ($B)
4 JMPZ ~2, Jump to #7 if ~2 is zero

5 ECHO, our echo statement. If any of the JMPZ had jumped, this part would be skipped.
6 JMP -7, jumps to #7
7 RETURN, ends the function call 
```

一些注意事项：

*   在这种情况下，JMPZ_EX 似乎是不必要的，但在需要使用该值来计算更多值的更复杂的 if 语句中会很有用。
*   6 JMP -7 可能在那里允许一个 else 块。如果这是 if 块的主要部分，完成它然后可以跳过作为 else 块的代码部分。

# asp.net - ASP.NET 的 ClickOnce：无后缀的 .application 文件是什么？

> ID：11608535
> 
> 赞同：0
> 
> 时间：2012-07-23T08:03:31.970
> 
> 标签：asp.net, clickonce

`InvalidDeploymentException`当我的清单文件出现问题时，我显然会遭受这种痛苦。我查看了发布我的应用程序的文件夹，但其中总是有多个清单文件（.application）。

一种是带版本后缀的，一种是不带后缀的。据我所知，这两个文件的内容似乎是相同的，那么为什么会自动生成一个没有版本后缀的文件呢？我找不到有关其背后机制的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:29:56.337

好的，我终于想通了。

`YourApp.application`是一个部署清单，`YourApp_#_#_#_#.application`是每个版本的部署清单的备份文件。当出现一些问题时，我们可以手动替换`YourApp.application`为`YourApp_#_#_#_#.application`，网络浏览器总是查看前一个文件。

# android - 滑动 google MapView 以转到 Android 中的另一个屏幕/活动

> ID：11608541
> 
> 赞同：0
> 
> 时间：2012-07-23T08:04:12.450
> 
> 标签：android

滑动 Google 地图视图后，我想转到另一个活动或屏幕。但它给了我例外。我正在尝试使用“ **ViewPager** ”API 来实现这一点。是否可以滑动到另一个活动。

例外情况：

> Constructor.constructNative(Native Method) 07-23 12:22:08.906: E/AndroidRuntime(806): at java.lang.reflect.Constructor.newInstance(Constructor.java:415) 07-23 12:22:08.906: E /AndroidRuntime(806): 在 android.view.LayoutInflater.createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906 : E/AndroidRuntime(806): 原因: java.lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 构造原生（本机方法）07-23 12:22:08.906：E/AndroidRuntime（806）：在 java.lang.reflect.Constructor.newInstance（Constructor.java:415）07-23 12:22:08.906：E/AndroidRuntime (806): 在 android.view.LayoutInflater.createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E /AndroidRuntime(806)：原因：java.lang.IllegalArgumentException：MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 构造原生（本机方法）07-23 12:22:08.906：E/AndroidRuntime（806）：在 java.lang.reflect.Constructor.newInstance（Constructor.java:415）07-23 12:22:08.906：E/AndroidRuntime (806): 在 android.view.LayoutInflater.createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E /AndroidRuntime(806)：原因：java.lang.IllegalArgumentException：MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 22:08.906: E/AndroidRuntime(806): 在 java.lang.reflect.Constructor.newInstance(Constructor.java:415) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 android.view.LayoutInflater .createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E/AndroidRuntime(806): 引起：java .lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 22:08.906: E/AndroidRuntime(806): 在 java.lang.reflect.Constructor.newInstance(Constructor.java:415) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 android.view.LayoutInflater .createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E/AndroidRuntime(806): 引起：java .lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 Constructor.newInstance(Constructor.java:415) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 android.view.LayoutInflater.createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 more 07-23 12:22:08.906: E/AndroidRuntime(806): Caused by: java.lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 Constructor.newInstance(Constructor.java:415) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 android.view.LayoutInflater.createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 more 07-23 12:22:08.906: E/AndroidRuntime(806): Caused by: java.lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E/AndroidRuntime(806): 引起：java。 lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多 createView(LayoutInflater.java:505) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 25 更多 07-23 12:22:08.906: E/AndroidRuntime(806): 引起：java。 lang.IllegalArgumentException: MapViews 只能在 MapActivity 的实例中创建。07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java:291) 07-23 12:22:08.906: E/AndroidRuntime(806):在 com.google.android.maps.MapView.(MapView.java:264) 07-23 12:22:08.906: E/AndroidRuntime(806): 在 com.google.android.maps.MapView.(MapView.java: 247) 07-23 12:22:08.906: E/AndroidRuntime(806): ... 28 更多

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:54:44.313

您的日志清楚地说明了错误的原因：

> 原因：java.lang.IllegalArgumentException：MapViews 只能在 MapActivity 的实例中创建

换句话说：有你的`Activity`extend `MapActivity`。

但是，除了明显的错误之外，您可能还想重新考虑您所追求的。即使你设法让 a`MapView`在 a 中工作`ViewPager`（这在技术上绝对不是不可能的），用户交互会是什么样子？a`ViewPager`和都`MapView`使用滑动动作作为主要的用户交互方法。应该偏向哪一个？如果是`ViewPager`，则无法平移地图。反之亦然，如果您允许在地图上平移，则不能在不同页面之间滑动。

无论如何，只是一个想法。当然，这完全取决于你。顺便说一句，你可能对 GitHub 上的[android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps)项目感兴趣，它可以让你`MapView`在`Fragment`.

# html - 我可以在 HTML 页面上使用 .vbs VBScript 脚本文件吗？或者我该如何复制？

> ID：11608542
> 
> 赞同：0
> 
> 时间：2012-07-23T08:04:18.893
> 
> 标签：html, vbscript, implementation, hta

我的桌面上有一个 .vbs 格式的 VBScript 脚本文件：pastebin.com/Nhj5Rs0j

我可以把它放在一个 HTML 文件中，然后通过 FTP 上传到我的网站吗？

我尝试在 Internet Explorer 上执行此操作，然后单击允许活动内容。我完成了，但页面上有错误（我刚刚意识到这一点）。

我可以使用 .hta 或其他编程语言重新创建这些事件吗？

我可以做些什么来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:08:38.893

浏览器中的 VBScript 没有任何问题（当然，仅限 IE），但是您在 pastebin 中提供的脚本永远不会起作用，因为它是基于 Windows 的脚本宿主环境的脚本，只能在操作系统本身中执行，而不是在网络浏览器中。

# php - preg_replace 替换所有匹配项

> ID：11608543
> 
> 赞同：1
> 
> 时间：2012-07-23T08:04:20.773
> 
> 标签：php, regex, forms, preg-replace

嗨，我正在创建一个生成器表单来替换我拥有的一些 CSS 代码......它会找到所有的类和 id 以及点，并将 .class 放在它们前面......

现在它只替换了我将限制设置为-1的第一场比赛......为什么它忽略它？

html:

```
<form action="get_html.php" method="post" id="form">
    html:<textarea rows="50" cols="80" id="html_box" name="html" type="text" align="texttop"></textarea>
    <input id="button" type="submit" value="submit"></input>
</form> 
```

get_html.php

```
<?php 
    $html= $_POST["html"]; 
    $string = (string)$html;
    $patterns = array();
    $patterns[0] = '/^[.]/';
    $patterns[1] = '/^[#]/';
    $patterns[2] = '/,/';
    $replacements = array();
    $replacements[0] = '.class .\1';
    $replacements[1] = '.class #\1';
    $replacements[2] = ', .class \1';
    $str= preg_replace($patterns,$replacements, $string, -1);
?>
<textarea rows="50" cols="80"><?php echo $str; ?></textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:16:38.787

您的前两个正则表达式只能在字符串的开头匹配（如果您使用修饰符`^`，则只能在每行的开头匹配）。`/m`

但是那些正则表达式可能不会做你想让他们做的事情。现在您正在寻找一个点或一个哈希，但前提是它们是字符串/行（或任何逗号）的第一个字符并将它们替换为`.class`和它们自己。这`\1`是没用的，因为您的正则表达式中没有捕获组。

# ios - Core Data 中的高级并发

> ID：11608545
> 
> 赞同：5
> 
> 时间：2012-07-23T08:04:39.643
> 
> 标签：ios, core-data

我在哪里可以找到高级 CoreData 并发的具体示例？高级是指在两个或多个线程上同时运行的上下文和 NSManagedObjects 上的操作，每个线程都可以读取和更改对象。每个对象保存上下文并监听另一个线程中的更改，每个人都正确合并更改，没有崩溃，没有不一致异常，一切都按原样完成。

我阅读了有关 Core Data 并发的官方 Apple 文档，现在我正在寻找代码示例、教程、书籍，或者至少是一些有关如何处理此类场景的更详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:15:53.833

[cocoanetics](http://www.cocoanetics.com/)有一篇非常好的博客文章：

[多上下文核心数据](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

我为异步保存示例创建了一个 github 存储库： [Multi Context Core Data GitHub](https://github.com/carlj/Multi-Context-Core-Data)

# c# - 将数据集保存到数据库

> ID：11608546
> 
> 赞同：4
> 
> 时间：2012-07-23T08:04:43.373
> 
> 标签：c#, sql-server, datagridview, dataset, tableadapter

我正在尝试将数据集保存到数据库中。我从另一个类获得了一个数据集，现在用户将在 datagridview 上对表单进行更改，然后需要将更改后的数据集保存在数据库中。

我正在使用下面的代码；它没有产生任何错误，但数据没有保存在数据库中。

```
public class myForm    
{    
    DataSet myDataSet = new DataSet();
    public void PouplateGridView()
    {
        try
        {
            SqlService sql = new SqlService(connectionString); // Valid Connection String, No Errors

            myDataSet = sql.ExecuteSqlDataSet("SELECT * FROM Qualification"); // Returns a DataSet
            myDataGridView.DataSource = myDataSet.Tables[0];
            myDataGridView.AutoGenerateColumns = true;
            myDataGridView.AutoResizeColumns();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.InnerException + Environment.NewLine + ex.Message, "Error");
            this.Close();
        }

    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        //myDataSet.AcceptChanges();EDIT:Don't know why, but this line wasn't letting the chane in db happen.
        SqlCommand sc = new SqlCommand("SELECT * FROM Qualification", sql.Connection); //ADDED after Replies
        SqlDataAdapter da = new SqlDataAdapter();
        SqlCommandBuilder scb = new SqlCommandBuilder(da); //ADDED after replies
        da.Update(myDataSet.Tables[0]);
    }
}
public class mySqlService
{
public DataSet ExecuteSqlDataSet(string sql)
        {
            SqlCommand cmd = new SqlCommand();
            this.Connect();
            SqlDataAdapter da = new SqlDataAdapter();
            DataSet ds = new DataSet();

            cmd.CommandTimeout = this.CommandTimeout;
            cmd.Connection = _connection;
            if (_transaction != null) cmd.Transaction = _transaction;
            cmd.CommandText = sql;
            cmd.CommandType = CommandType.Text;

            da.SelectCommand = cmd;

            da.Fill(ds);
            da.Dispose();
            cmd.Dispose();

            if (this.AutoCloseConnection) this.Disconnect();

            return ds;
        }
} 
```

我在这里做错了什么？网上有很多方法可以保存数据集，如果数据集是在同一个类中创建、编辑和保存的等，但我想在 mySqlService 类中有选择数据集方法。我现在应该如何将数据集保存到数据库中？

编辑：我已经评论了使代码工作所需的三行。该代码现在有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:08:01.193

为了运行*Update*方法，您`SqlDataAdapter`必须配置SqlDataAdapter和属性以及隐式配置这些命令的[SqlCommandBuilder对象。](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)`InsertCommand``DeleteCommand``UpdateCommand``SelectCommand`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T08:08:33.477

嘿，请先尝试在此处[http://support.microsoft.com/kb/308507](http://support.microsoft.com/kb/308507)遵循本教程，然后再根据您的需要进行调整。

# asp.net - LINQ 中的 ORDER BY NEWID 并绑定到中继器控件

> ID：11608548
> 
> 赞同：2
> 
> 时间：2012-07-23T08:04:46.453
> 
> 标签：asp.net, linq-to-sql, repeater

早晨，

我想知道如何在 LINQ 中编写以下 SQL 语句。

```
 SELECT TOP 6 * FROM Questions
 ORDER BY NEWID() 
```

我还想知道，如何将它绑定到 asp.net 转发器控件以显示 6 个问题。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:36:38.223

您必须能够调用该`NEWID()`函数来生成随机向导。为此，您可以在[此处](https://stackoverflow.com/questions/648196/random-row-from-linq-to-sql)获取一些提示，并首先创建一个伪方法映射到`NEWID()`数据上下文中的函数。

```
[System.Data.Linq.Mapping.Function(Name="NEWID", IsComposable=true)] 
public Guid NewId() 
{
    throw new NotImplementedException(); 
} 
```

一旦设置好，您就可以编写查询以使用此函数：

```
var query = dc.Questions
    .OrderBy(question => dc.NewId())
    .Take(6); 
```

您可以检查为此生成的 SQL 查询，它应该匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:12:06.767

Linq 风格将是

```
 Questions.OrderBy(q=>Guid.NewGuid()).Take(6) 
```

`DataSource`然后通过将其属性设置为上述属性并调用该`DataBind`方法，将其附加到中继器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-18T07:37:43.037

```
Questions.OrderBy(q=>Sql.NewGuid()).Take(6) 
```

这将在 SQL 语句中调用 NEWID()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:18:38.730

```
(from db in context.Questions
order by Guid.NewGuid()
select db).Take(6); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-24T06:31:46.423

我知道答案已经被选中，但我仍然在添加我的方法来实现这一点。今天面临同样的情况并尝试了几种方法，使用过`questions.OrderBy(q => Guid.NewGuid()).ToList()`和更多的建议。后来我想`string RandomOrder`在视图模型中添加一个新字段并在循环中分配 `Guid.NewGuid().ToString()`然后使用`questions.OrderBy(i => i.RandomOrder).ToList()`，这很好用。

`shuffleAlways`如果作者在创建评估时选择了选项，我需要对问题进行改组。如果不是，则按常规排序顺序排序。这是完整的解决方案：

```
 private List<AssessmentQuestionsViewModel> LoadAllQuestions(string assessmentId, bool shuffleQuestions)
    {
        List<AssessmentQuestionsViewModel> questions = new List<AssessmentQuestionsViewModel>();

        var items = assessmentQuestionRepository.GetAll().Where(i => i.AssessmentId == assessmentId).ToList();

        foreach (var item in items)
        {
            questions.Add(new AssessmentQuestionsViewModel
            {
                Id = item.Id,
                AssessmentId = item.AssessmentId,
                QuestionText = item.QuestionText,
                HintText = item.HintText,
                QuestionType = item.QuestionType,
                MaxMarks = item.MaxMarks,
                SortOrder = item.SortOrder,
                RandomOrder = Guid.NewGuid().ToString(),
                Answers = LoadAllAnswers(item.Id)
            });
        }

        if (shuffleQuestions)
        {
            questions = questions.OrderBy(i => i.RandomOrder).ToList();
        }
        else
        {
            questions = questions.OrderBy(i => i.SortOrder).ToList();
        }

        return questions;
    } 
```

这就像魅力一样。希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-23T08:17:29.043

我假设您使用 ORDER BY NEWID() 作为从您的问题中选择随机数据的一种方式？如果是这样，您应该避免使用 NEWID() （或它的 LINQ 等效项），这会导致为表中的每条记录生成大量新的 guid。在大型数据集上，这是毁灭性的。

相反，请参阅[Linq Orderby random ThreadSafe for use in ASP.NET](https://stackoverflow.com/questions/3339192/linq-orderby-random#)以获得随机排序的优化解决方案。然后只需添加一个 take 运算符和你的集合。

```
Random random = new Random();
int seed = random.Next();

var RandomQuestions = Questions.OrderBy( s => (~(s.Shuffle & seed)) & (s.Shuffle | seed)); // ^ seed); 

return RandomQuestions.Take(6); 
```

# android - 如何检测和计数活动何时从后台转到前台

> ID：11608549
> 
> 赞同：0
> 
> 时间：2012-07-23T08:04:45.817
> 
> 标签：android, android-activity

我想检测并计算`Activity`从背景到前景的时间（当活动可见时，增加计数）。我尝试使用标志`onPause()`，`onResume()`如下所示：

```
void onPause(){
    flag = true;
}

void onResume(){
if(flag){
 //save to shared reference.  
   saveCount(getCount(count) + 1);
 flag = false;
}

} 
```

它在用户按下`home`键并重新启动应用程序时起作用，但是当我转移`Activity`然后返回时，它仍然会增加计数，因为它调用 onPause()。如何防止这种情况？或者无论如何都要计算这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:07:50.167

使用此方法检查应用程序是否被带到后台：

```
private boolean isApplicationBroughtToBackground(Context context) {
    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningTaskInfo> tasks = am.getRunningTasks(1);
    if (!tasks.isEmpty()) {
        ComponentName topActivity = tasks.get(0).topActivity;
        if (!topActivity.getPackageName().equals(context.getPackageName())) {
            return true;
        }
    }

    return false;
} 
```

它需要 GET_TASKS 权限：

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

# php - 如何在 Jquery 通知中添加 PHP 变量

> ID：11608553
> 
> 赞同：0
> 
> 时间：2012-07-23T08:04:58.877
> 
> 标签：php, jquery

> **可能重复：**
> [将变量从 php 传递到 javascript](https://stackoverflow.com/questions/7141860/passing-variables-from-php-to-javascript)

我正在使用[这个很棒](http://dev.thrivingkings.com/read/Sticky-A-super-simple-notification-system-built-with-jQuery)的 jQuery Stick 通知插件，它在单击各种按钮时创建通知。我使用以下代码显示通知框...

```
$(".notify").click(function() {
     $.sticky('The page has loaded!');
}); 
```

我可以让它显示一些 PHP 变量来代替静态文本消息吗？

希望我已经说得够清楚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:07:39.720

如果不进行异步 HTTP 调用，您将不得不在服务器端插入 PHP 变量：

```
$(".notify").click(function() {
    $.sticky('<?php echo htmlentities($message); ?>');
}); 
```

包装它`htmlentities()`以防万一`$message`包含一些使 JavaScript 字符串无效的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:07:30.423

是的，你可以喜欢

```
$(".notify").click(function() {    
 $.sticky('<?php echo "The page has been loaded"; ?>');    
}); 
```

# python - 使用 Python os.execl* 替换自身进程

> ID：11608555
> 
> 赞同：0
> 
> 时间：2012-07-23T08:05:04.870
> 
> 标签：python, process, web2py

我想用不同的参数替换自我进程（运行 web2py），例如使用 Python os.execl* 函数绑定 IP 地址。虽然它成功替换了我发现的实例，但它并没有杀死原始进程，而只是创建了一个新的子进程。例如，原来的 web2py 进程在 10.1.1.1:8000 上运行。然后在页面的控制器中运行，

`os.execl('python', 'python', 'web2py.py', '--ip=10.1.1.2', '--port=8000', '--password=')`

好的，现在我们可以打开 10.1.1.2:8000 上的网页了。但是如果我们再次在同一个过程中改回 10.1.1.1:8000。新进程抱怨该端口已被另一个进程使用。

还有另一种方法可以自己“刷新” web2py 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:47:34.187

`os.execl`正在替换当前进程，但保留开放端口；“端口正在被另一个进程使用”的错误消息不正确，它实际上正在被当前进程使用。

在 Unix 上，打开的文件描述符通过对 的调用继承`exec`，除非 fd 被标记为 close-on-exec `FD_CLOEXEC`。[这在http://bugs.python.org/issue12107](http://bugs.python.org/issue12107)中被记录为一个问题。

您应该在重新执行进程之前告诉 web2py 关闭端口，或者使用[`fcntl`](http://docs.python.org/dev/library/fcntl.html)模块将 fd 标记为 close-on-exec：

```
fcntl.fcntl(socket, fcntl.F_SETFD, fcntl.fcntl(socket, fcntl.F_GETFD) | fcntl.FD_CLOEXEC) 
```

# objective-c - 带有 UITextVIew.text 和标签的字符串

> ID：11608556
> 
> 赞同：0
> 
> 时间：2012-07-23T08:05:05.803
> 
> 标签：objective-c, nsstring, uilabel, uitextview

```
self.tweetString = [NSString stringWithFormat:_websiteLabel.text, _detailItem]; 
```

我必须创建一个字符串，其中文本来自 textView 和标签，它们之间有空格。使用以下代码仅显示 TextView 中的文本。我该如何编码？

`_websiteLabel`是 TextView 并且`_detailItem`是标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:17:06.543

如果我正确理解你，你会寻找这个：

```
self.tweetString = [NSString stringWithFormat:@"%@ %@", _websiteLabel.text, _detailItem.text]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:18:56.017

试试`self.tweetString = [NSString stringWithFormat:@"%@ %@",_websiteLabel.text, _detailItem];` 这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:17:08.883

这可能有效：

```
self.tweetString = [NSString stringWithFormat:@"%@ %@", _websiteLabel.text, _detailItem.text]; 
```

或者

```
self.tweetString = [NSString stringWithString:_websiteLabel.text, _detailItem.text]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:17:16.503

这应该有效：

```
self.tweetString = [NSString stringWithFormat:@"%@ %@", _websiteLabel.text, _detailItem.text]; 
```

# iphone - UIButton 状态变化

> ID：11608561
> 
> 赞同：1
> 
> 时间：2012-07-23T08:05:27.477
> 
> 标签：iphone, ios, xcode

我有一个自定义的 ImagePicker。A`UIScrollView`带有我的图像，`NSDocumentDirectory`然后我将按钮添加为我的图像框架，就像缩略图视图一样。我添加的是当它被选中然后关闭时，下次视图加载/出现/显示时，它将已经有一个图像复选标记。没关系。但我需要的是，当我点击一个图像时，它已经被选中或图像“复选标记”将显示，然后当我点击同一个图像时，复选标记将消失。

这是我拥有的代码的解释：

// UISCrollView

```
- (void)viewDidLoad {

    // Create view
    UIScrollView *view = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        myButton.frame = CGRectMake(column*140+24, row*150+10, 100, 100);
        [myButton setImage:thumb forState:UIControlStateNormal];
        [myButton addTarget:self 
                     action:@selector(buttonClicked:) 
           forControlEvents:UIControlEventTouchUpInside];
        myButton.tag = i; 
        NSLog(@"%i",i);

        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSInteger selectedImageSlot1 = [prefs integerForKey:@"selected1"];

        if ( selectedImageSlot1 == i){
            [self turnButtonToSelected];
        } 
} 
```

// 当按钮被点击时

```
- (IBAction)buttonClicked:(id)sender {
    myButton = (UIButton *)sender;
    self.selectedImage = [_images objectAtIndex:myButton.tag];

    [[NSUserDefaults standardUserDefaults] setInteger:myButton.tag forKey:@"selected1"];

    [self dismissModalViewControllerAnimated:NO];
} 
```

// 选择按钮时的方法

```
 - (void)turnButtonToSelected
    {
        UIImage *bgImage = [UIImage imageNamed:@"Checkmark.png"];
        [myButton setBackgroundImage:bgImage forState:UIControlStateNormal];
        [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
        [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
        [myButton setEnabled:NO];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:32:29.597

为按钮是否被选中保留一个布尔值。在您的界面中保留一个名为`BOOL selected;`Keep track of the value 的布尔变量，并设法保存它。然后在您的 turnButtonToSelected 方法中添加：

```
- (void)turnButtonToSelected
{
   selected = !selected;
   if (selected)
   {
      UIImage *bgImage = [UIImage imageNamed:@"Checkmark.png"];
      [myButton setBackgroundImage:bgImage forState:UIControlStateNormal];
      [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
      [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
   }
   else
   {
      // set button image without the check mark
   }
} 
```

这将确保，如果之前选择了该按钮，现在再次点击该复选标记将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:27:17.933

首先，您需要保留选定的图像索引，因此创建一个 selectedImageIndex 实例变量。
然后在 viewDidLoad 中不需要调用

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSInteger selectedImageSlot1 = [prefs integerForKey:@"selected1"]; 
```

在 for 循环中...
将其放在 for 循环之前，并将所选图像索引存储在 selectedImageIndex 中。

```
- (void)viewDidLoad {

    // Create view
    UIScrollView *view = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    self.selectedImageIndex = [prefs integerForKey:@"selected1"];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count+1; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        myButton.frame = CGRectMake(column*140+24, row*150+10, 100, 100);
        [myButton setImage:thumb forState:UIControlStateNormal];
        [myButton addTarget:self 
                     action:@selector(buttonClicked:) 
           forControlEvents:UIControlEventTouchUpInside];
        myButton.tag = i+1; 
        NSLog(@"%i",i);

        if (self.selectedImageIndex == myButton.tag){
            [self turnButtonToSelected:myButton];
        } 
} 
```

删除该行`[myButton setEnabled:NO];`，`turnButtonToSelected`以便用户可以重新点击按钮以取消选择它。将 turnButtonToSelected 更改为：

```
 - (void)turnButtonToSelected:(UIButton *)button
    {
        UIImage *bgImage = [UIImage imageNamed:@"Checkmark.png"];
        [button setBackgroundImage:bgImage forState:UIControlStateNormal];
        [button setBackgroundImage:bgImage forState:UIControlStateHighlighted];
        [button setBackgroundImage:bgImage forState:UIControlStateDisabled];
    }    

    - (void)turnButtonToDeselected:(UIButton *)button
    {
        UIImage *bgImage = [UIImage imageNamed:@"Not-Checkmark.png"];
        [button setBackgroundImage:bgImage forState:UIControlStateNormal];
        [button setBackgroundImage:bgImage forState:UIControlStateHighlighted];
        [button setBackgroundImage:bgImage forState:UIControlStateDisabled];
    } 
```

然后，当用户点击图像时，您检查当前是否选择了该图像。
如果是的话-你打电话`turnButtonToDeselected`。
如果没有 - 你打电话`turnButtonToSelected`

```
- (IBAction)buttonClicked:(id)sender {
    myButton = (UIButton *)sender;
    self.selectedImage = [_images objectAtIndex:myButton.tag - 1];

    [[NSUserDefaults standardUserDefaults] setInteger:myButton.tag forKey:@"selected1"];

    if (myButton.tag == self.selectedImageIndex) {
        // user tap on a button that was selected, so we need to deselect it 
        [self turnButtonToDeselected:myButton];
    }
    else {
        // user tap on a button that wasn't selected

        // first we check if there is a selected button, if yes we need to deselect it
        if (self.selectedImageIndex > 0) {
            // get the selected button
            UIButton *selectedButton = (UIButton *)[self.view viewWithTag:self.selectedImageIndex];
            // deselect it
            [self turnButtonToDeselected:selectedButton];
        }

        // now we can select the button the user tapped on
        [self turnButtonToSelected:myButton];

        // save the selected index
        self.selectedImageIndex = myButton.tag;
    }
} 
```

还有一件事，在 viewDidLoad 中将按钮标签设置为 i+1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:19:12.793

您需要创建按钮数组。当按钮单击事件时，您需要检查按钮是否设置了复选标记图像。

```
-(IBAction)buttonclickevent:(id)sender{

  UIButton *btn=sender;

  UIButton *currentbutton=[ButtonArray objectAtIndex:btn.tag];

 if([currentbutton.currentImage isEqual:[UIImage imageNamed:@"Checkmark.png"]])

  [currentbutton setImage:[UIImage imageNamed:@"normal.png"]forState:UIControlStateNormal];

}
else {

  [currentbutton setImage:[UIImage imageNamed:@"Checkmark.png"]forState:UIControlStateNormal];
}

} 
```

# iphone - touchesEnded:withEvent: 当拖动事件移出屏幕顶部/底部时不调用

> ID：11608564
> 
> 赞同：3
> 
> 时间：2012-07-23T08:06:04.760
> 
> 标签：iphone, uiscrollview, uitouch

我的问题很奇怪但很简单。我将我的客户 UIScrollView 子类化：MyScrollView，我在其中禁用了滚动：

```
 self.scrollEnabled = NO; 
```

这意味着除了

```
 - (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

不会调用所有其他 UIScrollViewDelegate 方法，并且在 MyScrollView 我通过检测屏幕上的用户触摸移动来进行内容滚动，也就是说没有翻转，没有反弹，我的实现是在 touchesMoved:withEvent: 方法中

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{ 
    UITouch *touch = [touches anyObject];
   // NSLog(@"touch.phase:%d",touch.phase);
    CGPoint currentPosition = [touch locationInView:self];
    CGPoint lastTouchPosition = [touch previousLocationInView:self];
    CGFloat deltaY = lastTouchPosition.y - currentPosition.y;
    CGFloat contentYOffset = self.contentOffset.y + deltaY;
    [self setContentOffset:CGPointMake(0,contentYOffset) animated:NO];

} 
```

用户拖动完成后，我根据 touchesEnded:withEvent 中 MyScrollView 的内容偏移量做我自己的方法：

```
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
 {
     //some implementation according to current content offset
 } 
```

用户在屏幕上移动手指，只要手指离开屏幕表面，就会调用 touchesEnded:withEvent: 并且我可以正确实现自己的方法。

但是，当用户在屏幕表面上将手指从屏幕内部移动到顶部或底部外部，然后抬起手指时，touchesEnded:withEvent: 方法从未被调用，似乎 ios 不处理移出边界（顶部或底部）事件作为触摸结束事件，当触摸超出屏幕边界时 ios 也不知道发生了什么

有人可能会建议我检测 touchesMoved:withEvent: 中的当前位置以检查它是否是入站。这可能在运动非常缓慢时起作用，但是当您移动非常快时，系统无法检测到每个点的位置，似乎在某个时间间隔内检测到运动。任何人都可以帮助我如何检测用户手指是否已超出范围

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:22:42.023

我认为该`touchesCancelled:withEvent:`方法将被调用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:29:14.030

我已经解决了这个问题 bcs UIScrollView 做了太多的工作，我们无法自己处理一些事件，幸运的是 UIView 可以检测到触摸移动超出范围并调用该`touchesEnd:withEvent:`方法。考虑到用 UIView 替换 MyScrollView 的超类有太多工作要做，所以我想出了一个简单的解决方法：我添加了一个 UIView 的子类 TouchActionDetectView，它的工作是检测所有用户触摸事件并将这些事件传递给 MyScrollView。当然我必须清除 TouchActionDetectView 的背景颜色以避免阻塞其他视图内容。

# javascript - 单击文本框事件时冒泡

> ID：11608566
> 
> 赞同：2
> 
> 时间：2012-07-23T08:06:12.277
> 
> 标签：javascript, jquery, event-bubbling

这是我的 HTML 结构。

```
<div id="dvHirearachy" class="MarginTB10">
    <span>
        <label>Hierarchy Names</label><br />
        <input type="text" name="txtHierarchy" />
        <a id="ancRemove" href="#">Remove</a>
    </span><br />
    <a id="ancNew" href="#">New Hierarchy Name</a>
</div> 
```

单击锚标记“ancNew”时，我将再次生成上面在标记中提到的完整跨度标记。

问题在于单击文本框，并且生成了跨度结构。我在单击“ancRemove”时遇到了同样的问题，因为我试图阻止事件冒泡，它对此有效，但不适用于文本框。

我的剧本。

```
 $(document).ready(function () {

            $("#ancRemove").click(function (e) {
                RemoveHierarchy(this, e);
            });

            $("#ancNew").click(function (e) {
                generateNewHierarchy(e);
            });
});
 function generateNewHierarchy(e) {
            if (window.event) {
                var e = window.event;
                e.cancelBubble = true;
            } else {
                e.preventDefault();
                e.stopPropagation();
                var container = createElements('span', null);
                $(container).append(createElements('input', 'text'));
                $(container).append(createElements('a', null));
                $(container).append("<br/>").prependTo("#ancNew");
                $(container).children('input[type=text]').focus();
            }
        }

        function createElements(elem,type) {
            var newElem = document.createElement(elem);

            if (type != null) {
                newElem.type = "input";
                newElem.name = "txtHierarchy";
                $(newElem).addClass('width_medium');
            }

            if (elem == "a") {
                newElem.innerHTML = "Remove";
                $(newElem).click(function (e) {
                    RemoveHierarchy(this,e);
                });
            }
            return newElem;
        }

        function RemoveHierarchy(crntElem, e) {
            e.stopPropagation();
            $(crntElem).parents("span:first").remove();
        } 
```

有什么办法可以避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:21:38.557

检查这个jsfiddle：

## [http://jsfiddle.net/xemhK/](http://jsfiddle.net/xemhK/)

问题是 prepandTo 语句，它正在预填充 #ancNew 锚标记中的元素，这就是为什么所有文本框和删除锚都在传播 #ancNew 的单击事件，并且它正在调用 generateNewHierarchy() 函数。

更改`$(container).append("<br/>").prepandTo("#ancNew");`为 `$(container).append("<br/>").insertBefore("#ancNew");`

```
function generateNewHierarchy(e) {
    if (window.event) {
        var e = window.event;
        e.cancelBubble = true;
    } else {
        e.preventDefault();
        e.stopPropagation();
        var container = createElements('span', null);
        $(container).append(createElements('input', 'text'));
        $(container).append(createElements('a', null));

        //$(container).append("<br/>").prepandTo("#ancNew");
        $(container).append("<br/>").insertBefore("#ancNew");

        $(container).children('input[type=text]').focus();
    }
} 
```

并在 createElements

```
if (elem == "a") {
    newElem.innerHTML = "Remove";
    $(newElem).attr("href","#").click(function (e) {
        RemoveHierarchy(this,e);
    });
} 
```

# amazon-s3 - 亚马逊 S3。最大对象大小

> ID：11608567
> 
> 赞同：16
> 
> 时间：2012-07-23T08:06:16.120
> 
> 标签：amazon-s3

是否可以使用存储桶的策略设置最大文件（对象）大小？我在这里发现了一个这样的[问题](https://stackoverflow.com/questions/8310462/amazon-s3-bucket-policy-for-anonymously-uploading-photos-to-a-bucket)，但是示例中没有大小限制。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T03:49:01.557

不，您不能使用存储桶策略执行此操作。查看 S3 文档的[元素描述](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_ElementDescriptions.html#AvailableKeys)页面，了解您可以在存储桶策略中执行的操作的详尽列表。

但是，您*可以在*[浏览器上传](https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html)策略文档中指定`content-length-range`限制。此功能通常用于为不受信任的用户授予对您控制的 S3 存储桶中特定密钥的写入权限（例如，面向用户的媒体上传），并提供适当的工具来限制可以上传的位置、大小和数据类型，而无需需要公开您的 S3 凭据。

# oracle - oracle cursor open-for-using给出错误的结果

> ID：11608571
> 
> 赞同：0
> 
> 时间：2012-07-23T08:06:21.513
> 
> 标签：oracle, plsql

代码1：

```
OPEN P_CURSOR FOR V_STR_SQL2
        USING P_USER_ID, P_USER_ID, V_NODEID, V_PROCID, V_ADDRESSE; 
```

输出：0,0,0,0

当我将此代码更改为：

```
 V_STR_SQL2 := replace(V_STR_SQL2,':P_USER_ID',P_USER_ID);
   V_STR_SQL2 := replace(V_STR_SQL2,':V_NODEID',V_NODEID);
   V_STR_SQL2 := replace(V_STR_SQL2,':V_PROCID',V_PROCID);
   V_STR_SQL2 := replace(V_STR_SQL2,':V_ADDRESSE',V_ADDRESSE);
 OPEN P_CURSOR FOR V_STR_SQL2; 
```

输出：1,0,0,0

第二个输出是正确的。可能是什么原因？任何想法？绑定变量的数据类型如下。

1.  用户 ID varchar2，输入
2.  nodeid，procid，数字（10）
3.  地址 varchar2(250);

> -- 编辑

当我调试我的存储过程时，这是执行打开游标之前 v_str_sql2 的值。当我通过在 sqldeveloper 中给出它的值来运行这个查询时，它给了我正确的结果。但开放使用的错误结果。

```
SELECT COUNT(DECODE(ZC.STATUS, NULL, 1)) "NEW",
   COUNT(DECODE(ZC.STATUS, 'KEEP', 1)) "KEEP",
   COUNT(DECODE(ZC.STATUS, 'LOCK', 1)) "LOCK",
   COUNT(DECODE(ZC.STATUS,
                'KEEP',
                DECODE(UPPER(ZC.STATUS_BY), UPPER(:P_USER_ID), 1))) "PKEEP",
   COUNT(DECODE(ZC.STATUS,
                'LOCK',
                DECODE(UPPER(ZC.STATUS_BY), UPPER(:P_USER_ID), 1))) "PLOCK"
  FROM tab1 PARTITION(DCL_OTHERS) DCL,
   tab2      ZC,
   tab3      TC
 WHERE DCL.NODE_ID = TC.NODE_ID
   AND DCL.PROC_ID = TC.PROC_ID
   AND DCL.CASE_REF_NO = TC.CLAIM_REF_NO
   AND DCL.NODE_ID = ZC.NODE_ID(+)
   AND DCL.PROC_ID = ZC.PROC_ID(+)
   AND DCL.CASE_NAME = ZC.CASENUM(+)
   AND DCL.USER_NAME = ZC.USERNAME(+)
   AND DCL.NODE_ID = :V_NODEID
   AND (DCL.PROC_ID = :V_PROCID)
   AND (1 = 1)
   AND DCL.USER_NAME = :V_ADDRESSE 
```

> 编辑 2

我正在使用这种语法。这种语法有问题吗？

```
 CREATE OR REPLACE PROCEDURE USP_HTH_QUEUEPAGE(P_QUEUENAME VARCHAR2,
                                              P_CURSOR    OUT SYS_REFCURSOR,
                                              P_REC_CNT   OUT NUMBER) IS
BEGIN
  -- CODE TO GENERATE DYNAMIC SQL
  OPEN P_CURSOR FOR V_STR_SQL1
    USING V_ADDRESSE, V_NODEID, V_PROCID, V_STATUS, V_USER_ID, P_EP, P_SP;
  /*END IF;*/
  EXECUTE IMMEDIATE V_STR_SQL2
    INTO P_REC_CNT
    USING V_NODEID, V_PROCID, V_USER_ID, V_STATUS, V_ADDRESSE;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:08:58.817

我关心的是这里的这一行：

```
V_STR_SQL2 := replace(V_STR_SQL2,':V_ADDRESSE',V_ADDRESSE); 
```

这会将`VARCHAR2`变量的内容`V_ADDRESSE`直接放入查询中，而无需任何引用。

鉴于`V_STR_SQL2`您在调试期间获得的值，该值`V_ADDRESSE`必须是有效的 SQL 表达式。如果它的值类似于`1 High Street`，您最终会`V_STR_SQL2`包含类似

```
AND DCL_USER_NAME = 1 High Street 
```

这不是有效的 SQL。尝试执行此操作时会出错。

那么，可以`V_ADDRESSE`包含什么？我认为有两种可能性：

*   变量的值在任一端都`V_ADDRESSE`包含 a `'`，例如`'1 High Street'`.
*   您的变量的值`V_ADDRESSE`包含一个字符串，例如`00012493`并且您希望它匹配一个值`12493`。

究竟`V_ADDRESSE`包含什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:14:43.637

请尝试以下

```
EXECUTE IMMEDIATE V_STR_SQL2
INTO P_REC_CNT
USING  V_USER_ID,V_USER_ID,V_NODEID,V_PROCID, V_ADDRESSE; 
```

下面的链接会给你更多的想法为什么

[动态 SQL 语句](http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/dynamic.htm)

# objective-c - UIActionSheet firstOtherButtonIndex 设置不正确

> ID：11608574
> 
> 赞同：1
> 
> 时间：2012-07-23T08:06:30.647
> 
> 标签：objective-c, ios, ipad, uiactionsheet

我以这种方式在 iPad 上显示 UIActionSheet：

```
_actionSheet = [[UIActionSheet alloc] initWithTitle:@"Choose action"
                                           delegate:(id<UIActionSheetDelegate>)self
                                  cancelButtonTitle:nil
                             destructiveButtonTitle:nil
                                  otherButtonTitles:nil];

if (special_case) {
    _actionSheet.destructiveButtonIndex = [_actionSheet addButtonWithTitle:@"Discard Action"];
}

[_actionSheet addButtonWithTitle:@"Action One"];
[_actionSheet addButtonWithTitle:@"Action Two"];
_actionSheet.cancelButtonIndex = [_actionSheet addButtonWithTitle:@"Cancel"];

[_actionSheet showFromBarButtonItem:self.myActionButton animated:YES]; 
```

虽然两者都`cancelButtonIndex`可以`destructiveButtonIndex`正常工作，但奇怪的是在 actionSheet:didDismissWithButtonIndex: 中我`firstOtherButtonIndex`设置为`-1`，这显然是错误的，因为我的`Action One`按钮的索引为`1`，而`Action Two`索引为`2`.

显然，上面的重点是仅在特殊情况下才显示破坏性按钮（否则我会在 init 调用中传递所有标题，并且可能事情会很甜蜜）。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:35:25.957

`firstOtherButtonIndex`可能只在`initWithTitle`方法中设置。如果您手动添加按钮，则必须手动设置。该问题也可能是由于您在添加其他按钮后添加了取消按钮。通常破坏性和取消按钮的索引低于`firstOtherButtonIndex`.

用简单的方法怎么办？

```
 _actionSheet = [[UIActionSheet alloc] initWithTitle:@"Choose action"
                                           delegate:(id)self
                                  cancelButtonTitle:@"Cancel"
                             destructiveButtonTitle:(special_case ? @"Discard" : nil)
                                  otherButtonTitles:@"Action One", @"Action Two", nil]; 
```

# ms-access - 64位Access 2010下的StringFromGUID2

> ID：11608577
> 
> 赞同：2
> 
> 时间：2012-07-23T08:06:53.683
> 
> 标签：ms-access, vba, ms-access-2010

我之前使用的是：

```
Public Declare Function StringFromGUID2 Lib "ole32.dll" _
    (rclsid As GUID, ByVal lpsz As Long, ByVal cbMax As Long) As Long 
```

在 32 位和 64 位 Windows 上的 Access 2007 下为我生成 GUID。

其中 GUID 定义为：

```
Public Type GUID
Data1 As Long
Data2 As Integer
Data3 As Integer
Data4(7) As Byte
End Type 
```

（因为 VBA 不支持变体的 VT_GUID）

我现在有了一台安装了 Access 2010 64 位的新机器，现在这些东西已经坏了。

在 Access 2010 64 位下执行此操作的等效代码是什么？

我已根据需要添加了 PtrSafe 属性：

```
Public Declare PtrSafe Function StringFromGUID2 Lib "ole32.dll" _
    (rclsid As GUID, ByVal lpsz As Long, ByVal cbMax As Long) As Long 
```

这会导致实际调用中的类型不匹配：

```
Dim rc As Long
Dim stGuid As String
' 39 chars  for the GUID plus room for the Null char
stGuid = String$(40, vbNullChar)
rc = StringFromGUID2(rclsid, StrPtr(stGuid), Len(stGuid) - 1) 
```

这是意料之中的，因为 StrPtr 将在 64 位系统上返回 LongPtr ，在 32 位系统上返回 Long 。

我不是全职开发人员，所以我不确定在 32 位和 64 位系统上创建 GUID 字符串的最合适方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:23:46.013

StringFromGUID 可用于 Access 应用程序。

[Application.StringFromGUID 方法（访问）](http://msdn.microsoft.com/en-us/library/office/ff193935.aspx)

您甚至可以在查询中使用它。

# wamp - Windows 7 安全模式下的 WAMP 服务器

> ID：11608581
> 
> 赞同：1
> 
> 时间：2012-07-23T08:07:12.900
> 
> 标签：wamp

因为 Windows 7 崩溃并给了我这个消息：应用程序无法正确启动 (0xc0000022)。所以我在安全模式下启动了 win 7 来备份我的项目数据库，但是 WAMP 服务器不工作并且它的图标是红色的。

有什么方法可以备份数据库或启动 WAMP。所以请帮忙。

# c# - 提交嵌套事务时会释放页面锁吗？

> ID：11608583
> 
> 赞同：0
> 
> 时间：2012-07-23T08:07:16.660
> 
> 标签：c#, sql-server, transactions, locking, transactionscope

众所周知，事务内部的数据库锁在事务结束时被释放。所以，在这段代码中..

```
public static TransactionScope CreateTransactionScope()
{
    return new TransactionScope(TransactionScopeOption.Required,
     new TransactionOptions() { IsolationLevel = IsolationLevel.ReadCommitted });
} 
```

其实在这一...

```
using (DataContext dataContext = new DataContext())
using (TransactionScope rootScope = CreateTransactionScope())
{
    using (TransactionScope nested = CreateTransactionScope())
    {
        Ticket ticket = dataContext.ExecuteQuery<Ticket>(
          "SELECT * FROM Tickets WITH (UPDLOCK) WHERE id={0}", ticketId).First();
        nested.Complete();
    }

    // Will the lock be still ON here? Because I don't need him to be!
} 
```

何时释放行/页面锁（[UPDLOCK](http://msdn.microsoft.com/en-us/library/ms187373.aspx)） - 在处理嵌套事务或根事务之后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:09:02.433

只有在根作用域退出 using 块并释放后才会释放它。

学习这种东西的最好方法是弄脏你的手。

使用表 A 和表 B 创建一个简单的数据库，每个都包含单个列，将其命名为“TimeStamp”并创建插入时间戳（或任何类型的值）的简单控制台应用程序，您可以使用事务选项并学习行为。

# javascript - Titanium.App.addEventListener 执行了两次（Titanium Studio）

> ID：11608585
> 
> 赞同：0
> 
> 时间：2012-07-23T08:07:19.327
> 
> 标签：javascript, ios, titanium-mobile, addeventlistener

我有一个执行了两次的侦听器。

当我触发事件（oneEvent）时：

> Titanium.App.fireEvent('deleteUser');
> 
> Ti.App.addEventListener('oneEvent',function(e){ doSomething(); });

doSomething 执行了两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:23:23.927

这是因为当您访问该窗口时，每次都会添加该事件，因此如果您访问窗口超过一次，则事件会触发一次以上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:57:29.740

`Titanium.App.fireEvent('deleteUser');`在 window1.js 和`Ti.App.addEventListener('oneEvent',function(e){ doSomething(); });`window2.js中的函数中调用

# ajax - 动态包含的页面表单首次提交失败

> ID：11608595
> 
> 赞同：1
> 
> 时间：2012-07-23T08:07:50.873
> 
> 标签：ajax, jsf-2, include, viewparams

我在动态包含的页面上有一个奇怪的行为

我的第一页有一个组合可以从不同的页面中选择，包括：

```
 <h:panelGrid columns="2">
            <h:outputLabel value="Choose your page to include" />
            <h:selectOneMenu id="pageList" value="#{anyPageBean.page}">
                <f:selectItems value="#{anyPageBean.pageList}" var="w" itemValue="#{w}" itemLabel="#{w}" />
            </h:selectOneMenu>
        </h:panelGrid> 
```

AnyPageBean 只返回以下 2 个页面之一：pilotNoTemplate.xhtml 或 pipo.xhtml

```
@ManagedBean
@SessionScoped
public class AnyPageBean {

private String page;
private java.util.List<String> pageList;

public AnyPageBean() {
    super();
    pageList = new ArrayList<String>();
    pageList.add("pilotNoTemplate.xhtml");
    pageList.add("pipo.xhtml");
} 
```

当我选择该页面（pipo 页面）时，pilotNoTemplate.xhtml 正确显示。

但是当我从 PilotNoTemplate.xhtml 提交表单时，JSF 认为提交作为 POST 是可以的，但只有 Phase1 和 Phase 6 是跨越的，为什么？我有一个 PhaseListener 显示阶段，它打印：

```
INFO  IN pour /jsf2-todo-001-dynamic-page-include-v2/any.faces ¤¤¤¤¤ POST
INFO  AJAX BEFORE RESTORE_VIEW 1 for viewId=null 
INFO  AJAX AFTER  RESTORE_VIEW 1 for viewId=/any.xhtml
INFO  AJAX BEFORE RENDER_RESPONSE 6 for viewId=/any.xhtml 
INFO  AJAX AFTER  RENDER_RESPONSE 6 for viewId=/any.xhtml 
```

如果表格中填写了任何内容，它将被重置...

第二次提交没问题，所有阶段都跨越：

```
INFO IN pour /jsf2-todo-001-dynamic-page-include-v2/any.faces ¤¤¤¤¤ POST
INFO AJAX BEFORE RESTORE_VIEW 1 for viewId=null 
INFO AJAX AFTER  RESTORE_VIEW 1 for viewId=/any.xhtml
INFO AJAX BEFORE APPLY_REQUEST_VALUES 2 for viewId=/any.xhtml 
INFO AJAX AFTER  APPLY_REQUEST_VALUES 2 for viewId=/any.xhtml
INFO AJAX BEFORE PROCESS_VALIDATIONS 3 for viewId=/any.xhtml 
INFO AJAX AFTER  PROCESS_VALIDATIONS 3 for viewId=/any.xhtml
INFO AJAX BEFORE UPDATE_MODEL_VALUES 4 for viewId=/any.xhtml 
INFO AJAX AFTER  UPDATE_MODEL_VALUES 4 for viewId=/any.xhtml
INFO AJAX BEFORE INVOKE_APPLICATION 5 for viewId=/any.xhtml 
INFO AJAX AFTER  INVOKE_APPLICATION 5 for viewId=/any.xhtml
INFO AJAX BEFORE RENDER_RESPONSE 6 for viewId=/any.xhtml 
INFO AJAX AFTER  RENDER_RESPONSE 6 for viewId=/any.xhtml 
```

我的模板页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>
<h:body>
    <div>
        <h:panelGroup id="globalMessages">
            <h:messages globalOnly="false" styleClass="messages" />
        </h:panelGroup>
        <ui:insert name="content" />
    </div>
</h:body>
</html> 
```

合成页面，可以选择要包含的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" >

<ui:composition template="/layout/template.xhtml">
    <ui:define name="content">
        <h:form id="chooseForm">
            <h:panelGrid columns="2">
                <h:outputLabel value="Choose your page to include" />
                <h:selectOneMenu id="pageList" value="#{anyPageBean.page}">
                    <f:selectItems value="#{anyPageBean.pageList}" var="w" itemValue="#{w}" itemLabel="#{w}" />
                </h:selectOneMenu>
            </h:panelGrid>
            <h:commandButton id="show" value="Show page">
                <f:ajax event="click" execute="@form" render=":panelForDynaPage  :globalMessages" />
            </h:commandButton>
        </h:form>

        <h:panelGroup id="panelForDynaPage">
            <ui:include id="includeContenu" src="#{anyPageBean.page}" />
        </h:panelGroup>

    </ui:define>
</ui:composition>
</html> 
```

PilotNoTemplate.xhtml 页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition  xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <f:metadata>
        <f:viewParam id="b" name="id" value="#{pilotAction.id}" />
    </f:metadata>
    <f:event id="a" listener="#{pilotAction.prepare}" type="preRenderView" />

    <h:form id="formPilot">
        <h:panelGrid columns="2">
            <h:outputLabel value="#{appMsg['pilot.firstname']}" />
            <h:inputText id="firstname" label="#{appMsg['pilot.firstname']}" value="#{pilotHolder.pilot.firstname}"
                required="true" />
            <h:outputLabel value="#{appMsg['pilot.lastname']}" />
            <h:inputText id="lastname" label="#{appMsg['pilot.lastname']}" value="#{pilotHolder.pilot.lastname}" />
            <h:outputLabel value="#{appMsg['pilot.age']}" />
            <h:inputText id="age" label="#{appMsg['pilot.age']}" value="#{pilotHolder.pilot.age}" required="true"
                validator="#{pilotAction.validateAge}" />
        </h:panelGrid>
        <h:commandButton id="merge" action="#{pilotAction.doMerge}"
            value="#{pilotHolder.pilot.id ne null ? appMsg['pilot.update'] : appMsg['pilot.create']}">
            <f:ajax id="ajaxm" event="click" execute="@form" render=":panelForDynaPage :globalMessages" />
        </h:commandButton>
    </h:form>
</ui:composition> 
```

我注意给 xhtml 页面中的每个组件都赋予“id”，因为没有它就会出现这种问题，在我的情况下似乎是不够的。任何想法 ？

我看到其他人也有同样的问题，你找到解决办法了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:07:18.957

这是由[JSF 规范问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)引起的，该错误发生在 JSF 2.0/2.1 中，并在即将发布的 JSF 2.2 中得到修复。基本上，当 JSF ajax 更新当前`<h:form>`组件之外的组件时，该组件又包含另一个`<h:form>`组件作为子组件，那么它的视图状态将不会更新（这是一个疏忽）。只有当您在 ajax 更新中明确指定表单组件时，它才会更新。从理论上讲，您可以通过替换`<h:panelGroup id="panelForDynaPage">`来解决它`<h:form id="panelForDynaPage">`，但从技术上讲，这是错误的标记。

您可以使用以下 JS 来修复此错误。此脚本将为`javax.faces.ViewState`在 ajax 更新后未检索任何视图状态的表单创建隐藏字段。

```
var ie = /*@cc_on!@*/false;

jsf.ajax.addOnEvent(function(data) {
    if (data.status == "success") {
        var viewState = document.getElementsByName("javax.faces.ViewState")[0].value;

        for (var i = 0; i < document.forms.length; i++) {
            var form = document.forms[i];

            if (!hasViewState(form)) {
                var hidden = document.createElement(ie ? "<input name='javax.faces.ViewState'>" : "input");
                hidden.setAttribute("type", "hidden");
                hidden.setAttribute("name", "javax.faces.ViewState");
                hidden.setAttribute("value", viewState);
                hidden.setAttribute("autocomplete", "off");
                form.appendChild(hidden);
            }
        }
    }
});

function hasViewState(form) {
    for (var i = 0; i < form.elements.length; i++) {
        if (form.elements[i].name == "javax.faces.ViewState") {
            return true;
        }
    }

    return false;
} 
```

# jquery - jquery每个函数获取类值内容

> ID：11608597
> 
> 赞同：3
> 
> 时间：2012-07-23T08:07:54.693
> 
> 标签：jquery, each

**脚本**

```
$("#activities").next().next().each(function(i) { }); 
```

**html**

```
<div class="head" id="activities" >Activities</div>
<div class="sub-head"> <span class="title">Activity</span> <span class="value">Min</span> <span class="unit">Calories</span> </div>
<div class="rows"> <span class="title">bicycling</span> <span class="value">30</span> <span class="unit">174</span> </div>
<div class="rows"> <span class="title">fishing and hunting</span> <span class="value">30</span> <span class="unit">261</span> </div>
<div class="rows"> <span class="title">transportation</span> <span class="value">30</span> <span class="unit">261</span> </div>
<div id="activitiesData"></div> 
```

任何人都可以帮助我在 jquery 中使用每个从这个 div 获取数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:13:50.717

这应该这样做：

```
var sum = 0;
$('#activities').nextAll('.rows').find('.value').each(function() {
    var n = parseInt($(this).text(), 10); 
    if (!isNaN(n)) sum += n; 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:13:20.000

您可以直接选择`.rows`元素，而不是使用多种`next()`方法遍历 DOM，请尝试以下操作：

```
var sum = 0;  
$(".rows .value").each(function(){
       var val = parseInt($(this).text(), 10)
       if (!isNaN(val)) {
            sum += val
       }          
}) 
```

[演示](http://jsfiddle.net/3nYWK/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:18:15.300

请在此处查看解决方案。

```
$('#GetTitles').click(function(){
    $('div.rows .title').each(function(){
        alert($(this).text());
    });
}); 
```

[JSFiddle 示例解决方案](http://jsfiddle.net/HDrSF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:21:21.467

要获取数组中的每个单独的值：

```
var values = $(".value", ".rows").map(function(i, e) {
    return parseInt(e.innerHTML, 10);
})​; 
```

[小提琴](http://jsfiddle.net/bGwrS/24/)

获得值的组合总和

```
var value = 0;
$.each($(".value", ".rows"), function(i,e) {
    value += parseInt(e.innerHTML, 10);
}); 
```

[小提琴](http://jsfiddle.net/bGwrS/25/)

# java - 如何使用 apache POI 的事件 API 获取合并区域？

> ID：11608605
> 
> 赞同：3
> 
> 时间：2012-07-23T08:08:15.587
> 
> 标签：java, apache-poi

如何使用 Apache POI 提供的事件 API 获取 Excel 工作表的合并区域（合并单元格）？

使用“传统的”类似 DOM 的解析风格，有一些方法称为`Sheet.getNumMergedRegions()`和`Sheet.getMergedRegion(int)`。不幸的是，我需要处理巨大的 Excel 文件，即使使用允许使用的最高 Xmx 值（在此项目中），也会出现内存不足的错误。所以我想使用事件 API，但无法找到如何获取有关合并区域的信息，我需要知道这些信息才能正确“理解”内容......

使用此处给出的示例：http: [//poi.apache.org/spreadsheet/how-to.html#xssf_sax_api](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api) 我为合并区域的每个单元格获取事件（尽管只有第一个单元格包含任何文本内容）。所以也许，如果没有更直接的方法，这将有助于了解这些合并的单元格如何（安全地）与其他（空）单元格区分开来......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:59:52.143

我不确定合并的单元格信息存储在哪里，但我很确定它不会与单元格数据本身有关，因为这不是 Excel 方式。

我建议你做的是创建一个没有合并单元格的简单文件。然后，复制一份，并添加一个合并的单元格。解压缩这两个文件（.xlsx 是 xml 文件的 zip），然后区分它们。这将很快向您展示将单元格标记为合并的设置。（我的预感是它将位于工作表设置中的某个位置，靠近开始但不靠近单元格值 BICBW）

一旦知道合并单元格的详细信息所在的位置，就可以查看用于处理合并单元格的 XSSF UserModel 代码，以了解它们的工作方式、操作方式、选项等。记住这一点，您可以查看文件格式文档以获取完整的详细信息，但首先要了解的内容可能有点繁琐和详细。最后，您可以添加代码以使用合并的信息详细信息，一旦您知道从哪里获取它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-20T20:30:44.410

扩展迈克的答案。您可以创建一个`ContentHandler`来定位合并区域，例如：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.poi.ss.util.CellRangeAddress;

import org.xml.sax.Attributes;
import org.xml.sax.helpers.DefaultHandler;

public class MergedRegionLocator extends DefaultHandler {
    private final List<CellRangeAddress> mergedRegions = new ArrayList<>();

    @Override
    public void startElement (String uri, String localName, String name, Attributes attributes) {
        if ("mergeCell".equals(name) && attributes.getValue("ref") != null) {
            mergedRegions.add(CellRangeAddress.valueOf(attributes.getValue("ref")));
        }
    }

    public CellRangeAddress getMergedRegion (int index) {
        return mergedRegions.get(index);
    }

    public List<CellRangeAddress> getMergedRegions () {
        return mergedRegions;
    }
} 
```

将其与 POI 基于事件的解析一起使用的示例：

```
OPCPackage pkg = OPCPackage.open(new FileInputStream("test.xlsx"));
XSSFReader reader = new XSSFReader(pkg);
InputStream sheetData = reader.getSheetsData().next();

MergedRegionLocator mergedRegionLocator = new MergedRegionLocator();
XMLReader parser = XMLReaderFactory.createXMLReader();
parser.setContentHandler(mergedRegionLocator);
parser.parse(new InputSource(sheetData));

mergedRegionLocator.getMergedRegions(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T13:28:45.407

您需要打开流并对其进行两次解析。

第一次 - 提取合并的单元格。它们出现在标记`sheet...xml`之后的文件`<sheetData>...</sheetData>`中，如下例所示：

```
...
< /sheetData >
< mergeCells count="2" >
    < mergeCell ref="A2:C2"/ >
    < mergeCell ref="A3:A7"/ >
 </mergeCells > 
```

将其提取并保留在一些列表中。

然后再次重新打开流并像往常一样解析它，以提取行和单元格。在`endElement(...)`完成每一行的方法中，检查该行是否（部分或完全）出现在合并区域中。

# mediawiki - 如何要求“通过电子邮件确认”在 mediawiki 中创建帐户

> ID：11608607
> 
> 赞同：4
> 
> 时间：2012-07-23T08:08:25.807
> 
> 标签：mediawiki

我有一个建立在 mediawiki 上的网站。我如何确保要创建新帐户，用户必须首先通过单击发送到其电子邮件地址的链接来确认其电子邮件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T18:42:03.287

尽管您可以非常接近，但据我所知，没有内置的方法可以做到这一点。[$wgEmailConfirmToEdit](http://www.mediawiki.org/wiki/Manual%3a%24wgEmailConfirmToEdit)变量让您可以阻止人们进行编辑，除非他们已经确认了他们的电子邮件地址。只需设置：

```
$wgEmailConfirmToEdit = true; 
```

在你的 LocalSettings.php

# php - 多搜索过滤算法

> ID：11608608
> 
> 赞同：0
> 
> 时间：2012-07-23T08:08:29.170
> 
> 标签：php, mysql, codeigniter

我想构建一个算法来搜索和过滤我的数据库中的数据。我的页面上有三个下拉列表：

*   类别

*   产品

*   品牌

MySQL 数据库表具有以下字段：

```
id, title, description, category, product, brand 
```

我的目标是根据下拉列表中的选定项目进行搜索。最好的方法是什么？我应该将表单结果发送到一个函数中，在那里计算并发送到视图中吗？

你能告诉我一些连接这三个参数的方法吗？

我正在使用 CodeIgniter 在 PHP 中对其进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:22:19.213

这是通用方法

```
WHERE 
(description=@description_parameter or @description_parameter is null) and
(category=@category_parameter or @category_parameter  is null) and
(product=@product_parameter or @product_parameter is null) and
(brand=@brand_parameter or @brand_parameter is null) 
```

# android - 如何安装roboguice？

> ID：11608613
> 
> 赞同：1
> 
> 时间：2012-07-23T08:08:39.657
> 
> 标签：android, roboguice

我正在尝试在我的系统上设置 Roboguice。我按照官方的[安装步骤](http://code.google.com/p/roboguice/wiki/Installation)。所以我下载了两个jar文件并将它们粘贴到`libs`文件夹中......

现在，当我尝试创建一个扩展的模块时`AbstractAndroidModule`......我不能......这`AbstractAndroidModule`对我来说根本不可用。我只能从`AbstractModule`.. 扩展我的课程，但不能从[安装步骤](http://code.google.com/p/roboguice/wiki/Installation)`AbstractAndroidModule`中建议的那样扩展。

同样，我找不到`RoboApplication`类...

我做错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:54:38.930

在开始使用 roboguice 进行开发时，我也遇到了一些问题。所以我写了一篇非常简单的博文，介绍如何从一开始就开始使用 roboguice。Mabye 它可以帮助你，[http: //henrikm.com/blog/posts/dependency-injection-for-android-roboguice/](http://henrikm.com/blog/posts/dependency-injection-for-android-roboguice/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:35:32.160

hleinone 是对的。

由于从主页到安装说明的链接已过期，您最终获得了弃用的文档。

如果您点击主页“roboguice 主页 -> RoboGuice 2 入门！-> 安装”中的链接，您最终会看到“RoboGuice 1.1（已弃用）”文档。

请按照侧边栏顶部的安装说明进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:24:51.773

`AbstractAndroidModule`并且`RoboApplication`不再存在于 Roboguice 2.0 中。1.x 和 2.x 之间的 API 差异很大，你应该注意教程是针对哪个版本的。

# windows-8 - Windows 8、Windows Phone 8 应用程序大小限制

> ID：11608621
> 
> 赞同：0
> 
> 时间：2012-07-23T08:09:10.370
> 
> 标签：windows-8, windows-phone, marketplace, xap, windows-phone-8

是否有任何有关应用程序 (xap) 大小限制的信息

1.  Windows Phone 7 = 225MB
2.  Windows Phone 7.8 = 225MB？
3.  Windows 8（地铁）
4.  视窗电话 8

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T22:39:48.927

根据应用程序提交要求的 4.1.1，Windows Phone 8 的大小限制为 1GB，可在[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844%28v=vs.105%29.aspx)找到。这是一周前的最后一次更新（2012 年 12 月 12 日）。没有特别提到 WP7.8，所以我认为它仍然是 225MB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:54:31.913

Windows 8 Metro 风格应用程序包的大小限制为 2GB。请参阅[包格式要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694075.aspx)。就 XAP 大小而言，我不相信关于 Phone 7.8 或 Phone 8 的任何细节。

# c++ - 从 tfs 签出的 c++ 文件中获取代码模型

> ID：11608622
> 
> 赞同：1
> 
> 时间：2012-07-23T08:09:13.343
> 
> 标签：c++, .net, visual-c++, visual-studio-sdk

我目前正在构建一个签入策略插件，它基于来自 VS sdk 的 VCCodeModel 代码模型执行一些静态代码分析。

我可以通过以下方式从解决方案中的活动文档中获取代码模型

```
FileCodeModel fcm = _dte.ActiveDocument.ProjectItem.FileCodeModel; 
```

但是，如果我检查例如单个 .cpp 而不是整个解决方案，则没有可用的代码模型（因为它不是解决方案的一部分？）。

有什么方法可以从 tfs 签出的单个文件访问代码模型？

或者有没有像构建临时解决方案这样的解决方法？

如何通过文件路径/名称访问文件的代码模型？

谢谢

# mysql - MySQL 5.1.41-3 ubuntu12.10 备份文件中的未知对象

> ID：11608624
> 
> 赞同：0
> 
> 时间：2012-07-23T08:09:18.923
> 
> 标签：mysql, backup, restore, administration

我正在恢复大小为 2.6GB 的 mysql 备份文件......但在恢复时我收到“备份文件中的未知对象”异常。我怎么解决这个问题。并且 mysql 管理员中没有日志。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:47:11.247

Seems similar to [the post on SO](https://stackoverflow.com/questions/291369/what-would-lead-to-an-unknown-object-in-backup-file-problem-when-restoring-a-b)

The solution described in that bug is to increase the `max_allowed_packet` in the MySQL server configuration.

# visual-studio-2010 - 在工作区中找不到文件

> ID：11608627
> 
> 赞同：24
> 
> 时间：2012-07-23T08:09:25.603
> 
> 标签：visual-studio-2010, visual-studio, tfs, workspace

我正在使用带有 TFS 作为源代码控制的 Visual Studio 2010 专业版，一切正常。早上我来了，我打开了我的解决方案，它以脱机形式打开。我试过上网，它说

```
"Workspace for this solution could not be found." 
```

（我不记得确切的错误句子）。

我关闭了我的解决方案。我去了`pending changes window -> workspace ComboBox -> manage workspace`。我编辑了我的工作区并将我的解决方案映射到已经存在的文件夹。

现在我能够在窗口中看到我的待定更改。我再次打开了我的解决方案。我尝试签出一个文件，但出现错误：

> “在工作区中找不到文件，或者您没有访问该文件的权限。”

除了采用最新版本或特定版本之外的任何指针。在管理工作区中，我的工作区是私有的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-05T07:20:36.783

很抱歉打扰大家。最后我拿了最新版本来解决这个问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-26T18:36:24.193

TFS 与缓存一起工作。您的客户端计算机上有一个可能会出现各种混乱，因此请删除其中的文件。它的默认路径是`C:\Users\<Username>\Local Settings\Application Data\Microsoft\Team Foundation\<Version Number>\Cache`（这可能因您的操作系统而异，但它在您的配置文件中）。

您可以尝试通过转到 File -> Source Control -> Change Source Control... 来重新建立解决方案/项目的绑定...（如果此菜单项丢失，则可能意味着您需要重置菜单项）。如果源文件已经在工作区中，那么您可以单击结果对话框中工具栏中的绑定图标，将文件重新链接到源代码管理。但是，您可能仍需要执行获取或重新打开 VS 以使其停止抱怨。

我知道您提到想知道*除了*获取最新版本之外您是否可以做任何事情，但是 TFS 2010 将工作区信息存储在服务器上并且需要连接以重新建立元数据。听起来您基本上为您的工作区重新创建了映射。在这样做时，服务器需要重新建立连接。我认为处理此问题的唯一方法是在建立工作空间后执行获取。除非您使用“获取特定版本”对话框，否则您不应丢失任何内容，但为了安全起见，无论如何，在您在该工作区中执行“获取最新”之前，我都会将您的文件复制到一个临时位置。执行获取最新操作后，一切都应该没问题。

显然，您可能还想检查您对工作区映射到的文件夹的权限（搜索了一下后我找不到确切的要求）。正如您似乎知道的那样，这不太可能是问题，但是如果您不确定，那么您当然可以设置保存文件的文件夹，以便您的用户帐户递归地对其具有完整权限，看看是否有区别.

此外，请确保您已安装 Visual Studio 2010 SP1。

该[行为在 Visual Studio 和 TFS 2012 中通过所谓的*Local Workspaces*](http://blogs.msdn.com/b/bharry/archive/2011/08/02/version-control-model-enhancements-in-tfs-11.aspx)得到改进；使用*本地工作区*，有关文件的元数据存储在文件系统而不是服务器中。TFS 2012 应该很快就会上市。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T17:37:18.277

对提示说好。当解决方案打开时（它不会引用文件），在解决方案资源管理器中右键单击解决方案并选择“重新加载项目”</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T14:40:48.843

我遇到了这个错误，我检查了工作区目录的关联句柄（资源监视器中的 CPU 选项卡）。devenv 进程在里面保存一个目录。所以我重新启动了 Visual Studio，我没有收到这个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-26T08:11:36.367

我在 VS2015 上遇到了类似的问题，我发现我的机器上安装了 nuget 旧版本（VSIX（v3.3.0））。[我从nuget site](https://dist.nuget.org/index.html)下载了最新版本。它解决了我的问题

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-28T07:41:42.663

只需从项目中排除导致问题的文件并重新包含它

# c# - 在构造类的新实例时，如何避免传递对父对象的引用？

> ID：11608628
> 
> 赞同：4
> 
> 时间：2012-07-23T08:09:31.347
> 
> 标签：c#, class, object, constructor

我有两个类定义如下。

第一：

```
internal class Content {

   internal Content(Master master) {
        // code omitted
   }

// code omitted
} 
```

第二个：

```
public class Master {

     internal Content content { get; set; }

     internal Master() {
         // code omitted
     }

// code omitted
} 
```

将 Content Class 公开为 Master 的属性，我需要执行以下操作：

```
Master M = new Master(); 
M.content = new Content(M); 
```

有没有办法在 Content Constructor 中不通过 Master（M）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:14:49.670

大概`Content` *需要*一个`Master`？实际上，构造函数是一种很好的管理方式，但如果这是一个问题，您还可以执行以下操作：

```
internal class Content {
    internal void SetMaster(Master master) {this.master = master; }
    //...
}
internal class Master {
    internal void SetContent(Content content) {
        if(content == null) throw new ArgumentNullException("content");
        // maybe handle double-calls...
        this.content = content;
        content.SetMaster(this);
    }
}
...
Master M = new Master();
M.SetContent(new Content()); 
```

或默认`Master`创建`Content`。不过，坦率地说，我会“按原样”保留它，直到出现真正的“这是一个问题”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:14:36.803

为什么不使用延迟初始化 idom？

```
public class Master
{
    private Content _content;

    internal Content content
    {
        get
        {
            if (_content == null)
            {
                _content = new Content(this);
            }
            return _content;
        }
    }
} 
```

如果`Master`总是必须`content`设置属性，则在构造期间创建`Content`成员：

```
public class Master
{
    internal Content content
    {
        get; private set;
    }

    internal Master()
    {
        content = new Content(this);
    }
} 
```

您也可以使用混合方法：

```
public class Master
{
    internal Content content
    {
        get; private set;
    }

    internal Content GetOrCreateContent()
    {
        if (content == null)
        {
            content = new Content(this);
        }
        return content;
    }

    internal Master()
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:47:35.510

由于未显示类中的代码，因此我必须对您打算做什么做出一些假设。正如我从您的代码中看到的那样，`Content`需要 a`Master`并且`Master`没有`Content`.

使用我为您制定的解决方案，您可以执行以下操作：

```
void Main()
{
    Master M1 = new Master(); // content instantiated implicitly
    Master M2 = new Content().master; // master instantiated implicitly
} 
```

因此，您可以实例化 the`Master`和`Content`within 实例化，反之亦然：实例化 a`Content`和 the`Master`隐式实例化。

无论您选择了哪种替代方案：相应的其他对象始终通过属性变量进行实例化和可用。

本例中的类定义如下：

```
internal class Content  {  

    internal Master master { get; set; }

    internal Content(Master pmaster) {     
        master=pmaster;
    }

    internal Content() {     
        master = new Master() { content = this };
    }  
}

public class Master {  

    internal Content content { get; set; }  

    internal Master() {     
        content = new Content(this);
    }  

    // this is optional and can be omitted, if not needed:  
    internal Master(Content pcontent) {     
        content = pcontent;
    }  
} 
```

请注意，我尽可能地保留了您在问题中给出的结构，而您现在拥有额外的灵活性。

# java - 将 .tar 文件目录添加到 JTree

> ID：11608633
> 
> 赞同：0
> 
> 时间：2012-07-23T08:09:46.880
> 
> 标签：java, tar, jtree

我有一个 JTree，我可以毫无问题地将目录和文件添加到 JTree。现在我要添加的文件之一是`.tar`文件，我可以将`.tar`文件添加到`JTree`

我不，您可以使用如下方式解压缩`.tar`文件`GZIPInputStream`

```
InputStream is = new GZIPInputStream(new FileInputStream(file)); 
```

但是，在将文件添加到 JTree时，有没有办法在使用此代码时扩展此`.tar`文件`JTree`以查看所有子目录？`JTree``.tar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:16:33.013

无耻的自插拔：[TrueZIP](http://truezip.java.net/index.html) VFS 有一个 TFileTree 类。此类是用于显示（虚拟）目录树的 JTree，包括 TAR 文件。

这是 Javadoc 类： http: [//truezip.java.net/truezip-file/apidocs/de/schlichtherle/truezip/file/swing/TFileTree.html](http://truezip.java.net/truezip-file/apidocs/de/schlichtherle/truezip/file/swing/TFileTree.html)

以下是如何开始使用 TrueZIP：[http ://truezip.java.net/kick-start/index.html](http://truezip.java.net/kick-start/index.html)

您应该先阅读后者——它将帮助您了解一些基础知识。别担心，这真的很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:11:01.577

不是直接的。您将不得不依赖第 3 方库来提取有关 tar 内容的信息以填充您的 JTree。好的候选人包括：

*   [Apache Commons 压缩](http://commons.apache.org/compress/)
*   [焦油](http://code.google.com/p/jtar/)
*   [Java 焦油](http://www.trustice.com/java/tar/)

# java - ArrayList 的ArrayList 的ArrayList 检索不正确

> ID：11608635
> 
> 赞同：1
> 
> 时间：2012-07-23T08:09:55.393
> 
> 标签：java, arraylist

我正在创建一个 ArrayList of ArrayList of ArrayList 并按以下方式填充它。它正确填充它。我已经通过调试和`println`. 但是，当我尝试检索这些整数时，它无法正常工作，并显示文件中的最后一个整数，我已经为 ArrayList 变量的所有值读取了该整数。

下面是我填充的代码，它运行良好。

```
 Scanner sc = new Scanner(new File("e1.txt"));
    Scanner lineSc;
    String lineStr;

    String lineRegEx = "(\\d+),(\\d+)";
    Pattern linePattern = Pattern.compile(lineRegEx);
    Matcher matcher;

    Integer vertex = 0, edge = 0, length = 0;
    String strE, strL ;
    ArrayList<Integer> tmpLE = new ArrayList<Integer>() ;
    ArrayList<ArrayList<Integer>> singleV = new ArrayList<ArrayList<Integer>>() ;

    sc.useDelimiter("\\n");

    int i = 0, j = 0;
    while (sc.hasNextLine()) {
        lineStr = sc.nextLine();
        lineSc = new Scanner(lineStr);

        lineSc.nextInt(); 

        matcher = linePattern.matcher(lineStr);

        while (matcher.find()) {
                strE = matcher.group(1);
                edge = Integer.parseInt(strE);
                tmpLE.add(EI, edge);
                strL = matcher.group(2);
                length = Integer.parseInt(strL);
                tmpLE.add(LI, length);

                singleV.add(j ,tmpLE);
                graph.add(i, singleV);
                //System.out.println (graph.get(i).get(j).get(0));
                //System.out.println (graph.get(i).get(j).get(1));
                ++j;
        }
        j = 0;
        ++i;
        lineSc.close();
    }
    sc.close();

} 
```

这是我用来检索效果不佳的代码

```
 for (int i = 0; i < N; ++i) {
        Integer minLen = graph.get(i).get(0).get(LI);
        System.out.println (minLen);
        Integer choosenEdge = 0;
        for (int j = 0; j < graph.get(i).size(); ++j) {
            ArrayList<Integer> tmpArr = graph.get(i).get(j);
            System.out.print(tmpArr.get(LI) + "  " + minLen); //Wrong Output
            if (minLen > tmpArr.get(LI))
            {
                minLen = tmpArr.get(LI);
                choosenEdge = graph.get(i).get(j).get(EI);
                System.out.println (choosenEdge); // Wrong Output
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:13:26.007

您需要`ArrayList<Integer>`为每个`matcher.find()`循环创建。

```
 tmpLE = new ArrayList<Integer>() ;
 strE = matcher.group(1);
 edge = Integer.parseInt(strE);
 tmpLE.add(EI, edge);
 strL = matcher.group(2);
 length = Integer.parseInt(strL);
 tmpLE.add(LI, length);

 singleV.add(j ,tmpLE);
 graph.add(i, singleV); 
```

# android - 在 Android 中处理多个倒计时

> ID：11608637
> 
> 赞同：0
> 
> 时间：2012-07-23T08:09:58.410
> 
> 标签：android, timer, countdown

我的应用程序中有一个计时器，它的值每秒减少一个。我想在不同的活动中展示这种价值。这个计时器也在每个活动上运行。如果我启动活动 A，计时器从 50 开始。10 秒后，用户启动活动 B 并在 10 秒后返回到 A。活动 A 必须显示计时器值 30。

在每项活动中做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:13:36.347

您应该使用倒计时服务并在活动开始时绑定到它。

# playframework - Scala 表单，类型不匹配错误

> ID：11608641
> 
> 赞同：1
> 
> 时间：2012-07-23T08:10:12.437
> 
> 标签：playframework, playframework-2.0

我正在尝试对 Category 类进行 CRUD：

**categoryEdit.scala.html**：

```
@(cat: Category, myForm: Form[Category])    
@admin(title = "Category") {
  @helper.form(action = controllers.Application.categorySave) {        
    @inputText(myForm("name"))

    <input type="submit" value="Save">
  }
} 
```

**控制器**代码：

```
public static Result categorySave() {
    // save form data here ...
   return redirect(
      routes.Application.index()
  );
} 
```

Routes 文件中的条目如下所示。

```
GET   /saveCategory        controllers.Application.categorySave() 
```

我收到此错误：

```
type mismatch; found : play.mvc.Result required: play.api.mvc.Call 
```

在这条线上：`@helper.form(action = controllers.Application.categorySave) {`

我的表格有什么问题？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:24:43.467

改变你的行为怎么样？

```
controllers.routes.Application.categorySave 
```

PS：注意**路线**中的路线。

# android - android自动完成文本视图和搜索联系人列表

> ID：11608642
> 
> 赞同：0
> 
> 时间：2012-07-23T08:10:18.390
> 
> 标签：android, autocomplete

我是安卓新手。我有一个键盘和一个联系人列表。我想使用键盘和`autocompleteTextView`. 有人可以给我一些例子吗？我没有在互联网上找到此类问题的示例。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:14:01.343

```
 ========>phoneArr====> which contains ur all contacts
    if(phoneArr.length > 0 )
    {
      AutoCompleteTextView textView = (AutoCompleteTextView) this.findViewById(R.id.empphonenumber);
      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.auto_list_item, phoneArr);
      textView.setAdapter(adapter);
    } 
```

`=======>`auto_list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:textSize="16sp"
android:background="@android:color/transparent"
android:textColor="#000"> 
```

通过这种方式，您可以将适配器添加到。`Autocomplete listview`它比以前的更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:00:34.323

您需要创建 adpater 以在您的自动完成 textView 中进行设置。

参考以下链接：

[联通](http://saigeethamn.blogspot.in/2010/05/auto-complete-text-view-android.html)

[链接二](http://android-er.blogspot.in/2010/07/example-of-autocompletetextview.html)

# sql - 有没有非常轻量级的数据库 java 库？

> ID：11608643
> 
> 赞同：1
> 
> 时间：2012-07-23T08:10:19.393
> 
> 标签：sql, database, google-app-engine, servlets, java

我已经使用 servlet 和 MySQL 开发了一个 Web 应用程序。现在需要将其部署到 Google AppEngine。但是 Appengine 使用完全不同的数据存储，需要对数据库部分进行重大修改。

所以我想知道是否有任何轻量级数据库java库可以与主应用程序一起部署..

PS：数据库部分不涉及密集查询..只是简单的插入和选择查询..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:18:50.873

使用 Google Appengine 你不能在本地文件系统中存储任何东西，只能在内存中。此外，您的 GAE 应用程序没有专用服务器，代码可以在任何机器上执行，随时停止，在一台服务器上运行几分钟，在另一台服务器上运行五分钟，有时并行等。因此，将数据存储在内存中也是无用的.

所以，如果不想重写你的数据访问层，只有一个选择：付费[在 Appengine 上使用 MySQL](https://developers.google.com/cloud-sql/docs/introduction)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:29:22.200

经过长时间的研究找到了一个方便的解决方案..

**[H2GAE](http://code.google.com/p/gaevfs/wiki/H2GAE)**

它是[H2数据库](http://www.h2database.com/)和[GAEVFS的组合](http://code.google.com/p/gaevfs/)

它通过 GAEVFS 克服了 Google App Engine 的文件系统写入限制，GAEVFS 是 Google App Engine 的一个虚拟文件系统，它使用数据存储来实际存储文件数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:15:44.520

您可以尝试在 App Engine 上使用[Google Cloud SQL 。](https://developers.google.com/cloud-sql/docs/introduction)

> Google Cloud SQL 是一个位于 Google 云中的 MySQL 数据库。它具有 MySQL 的所有功能和功能，还有一些附加功能和一些不受支持的功能，如所列 [...] Google Cloud SQL 易于使用，不需要任何软件安装或维护，非常适合小型到到中型应用。

# jquery - 如何在 js/jquery 中隐藏设计的通知标签

> ID：11608645
> 
> 赞同：0
> 
> 时间：2012-07-23T08:10:39.350
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, devise

在您使用 jquery 成功登录后，我无法隐藏 devise 提供的通知。我想在显示一秒钟后隐藏它，但它不起作用。这是我所拥有的：

```
$(document).ready(function(){
    $("p.notice").delay(1000).hide("slow");
}); 
```

我知道 java 脚本正在执行，因为我在那里设置了一个警报来测试它。知道为什么它不隐藏设计“通知”段落类：

```
<p class"notice">Signed in successfully.</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:14:15.100

`.delay`仅适用于动画尝试

```
$(document).ready(function(){
   setTimeout(function(){
      $("p.notice").hide("slow");
   },1000);
}); 
```

# linux - 使用 wget 检查 ftp 上传并在必要时重试

> ID：11608652
> 
> 赞同：0
> 
> 时间：2012-07-23T08:11:30.407
> 
> 标签：linux, bash, ftp, wget

我有一个小的 bash 脚本循环，我正在尝试学习和完成，但这让我很难理解我所做的所有阅读。

我正在上传到 ftp 服务器，然后我想使用 wget spider 方法检查上传是否成功。如果它返回 OK，那么我们很好，如果不是，那么我想再次重做 ftp 上传。

我下面的代码是基于我的研究和从这里学习的。如果我可以做得更好，请帮助我修改它，以便我可以从中学习。

```
for ((i = 0 ; i < 1 ; i++ )); 
do 
    wget_output=$(wget -q --spider "http://$FTP_HOST/test.jpg")
    if [ $? -ne 0 ]; 
    then
        ftp -in $FTP_HOST <<ENDFTP
user $FTP_USER $FTP_PASSWORD
binary
put dEdLWOcOfPRqBU1.mp4.jpg
bye
ENDFTP
        $i="1";
    else
        echo "SQL CODE HERE"    
    fi
done 
```

执行时的错误是：

```
line 28: syntax error: unexpected end of file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:20:11.567

很可能您之前有空白`ENDFTP`。here-doc 应以仅包含您选择的关键字的行结束。

# java - 在maven项目中添加aspectJ jar

> ID：11608655
> 
> 赞同：0
> 
> 时间：2012-07-23T08:11:47.470
> 
> 标签：java, maven, jar, dependencies, aspectj

我创建了 AspectJ/maven project1，它可以为特定方法生成日志。Maven 创建了一个 .jar 文件，我将其添加到 maven project2 中。问题是 project2 似乎没有“看到”它，因为没有日志。当我手动将 aspectJ 类放入 project2 时，一切正常。

我应该在 POM 中添加任何依赖项吗？或者是其他东西？

编辑 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>AJDemo</groupId>
    <artifactId>AJDemo</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
        <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.8</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:00:24.263

您必须在希望应用方面的每个模块的 pom.xml 中包含包含方面的 maven 模块作为依赖项和方面库。方面库是 AspectJ 的 Maven 插件配置的一部分。您的 pom.xml 似乎根本没有配置 aspectj-maven-plugin。

[这个页面](http://mojo.codehaus.org/aspectj-maven-plugin/libraryJars.html)解释了它并有一个例子，而这个[SO 问题](https://stackoverflow.com/questions/4207478/aspectj-weaving-maven-modules)有另一个很好的提示：如果你希望你的方面无论如何都应用于项目的每个模块，只需将必要的依赖项和插件配置放入父项目的 pom.xml 中。

# cookies - Oracle ApEx 4.1.1 安全 cookie

> ID：11608661
> 
> 赞同：2
> 
> 时间：2012-07-23T08:12:06.597
> 
> 标签：cookies, https, oracle-apex

我被要求调查确保 Oracle ApEx 4.1.1 正在使用/设置的 cookie 是安全的。

我相信这方面的一个例子是：

```
Set-Cookie: expires=Thu......; path=/; 
```

显然它应该读作：

```
Set-Cookie: expires=Thu......; path=/;secure 
```

我需要在我的 SSO (Sentry) 中的哪个位置进行设置，还是在应用服务器上执行此设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:00:07.163

APEX 主要使用服务器端会话而不是 cookie。但无论如何，看起来你在这里发布了一个答案：

[https://forums.oracle.com/forums/thread.jspa?threadID=2418362](https://forums.oracle.com/forums/thread.jspa?threadID=2418362)

任何搜索的人的后续行动：

> 在应用程序正在使用的身份验证方案的会话 Cookie 属性部分中，您可以为安全属性选择是。以下是帮助中关于此选项的说明：选择“是”以允许仅当协议为 HTTPS 时从浏览器发送会话管理 cookie。选择否以允许在协议为 HTTP 或 HTTPS 时从浏览器发送会话管理 cookie。
> 
> 问候， 埃里克詹

# java - 根据布尔条件使用星号将必填字段设为必填项

> ID：11608665
> 
> 赞同：0
> 
> 时间：2012-07-23T08:12:17.830
> 
> 标签：java, jsf, required

我有一个 JSF 页面`ui:include`，其中我传递了两个`ui:param`，称为**名称**和**强制**。在包含的页面中，我以下列方式使用这两个参数。

```
<h:panelGroup>
    <h:outputText value="#{name}:" />
    <h:outputLabel rendered="#{mandatory}" value="*" />
</h:panelGroup> 
```

如何将两个参数组合成一个值？例如，向面板标题显示名称和强制条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:58:55.720

尝试类似的东西

```
<p:panel header="#{name}:#{mandatory?'*':''}" /> 
```

# android - 这些PDF库是商业用途吗？

> ID：11608670
> 
> 赞同：0
> 
> 时间：2012-07-23T08:12:52.400
> 
> 标签：android, pdf, pdflib, pdf-viewer

我读了这个帖子：[https](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android) ://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android 。

Vikas Patidar 提到 Android 上有一些开源库，例如

*   Android PDF 查看器
*   APDF查看器
*   机器人阅读器
*   安卓-pdf

其中一些获得了 GNU GPL v2 的许可。其中一些获得了 GNU GPL v3 的许可。我想问一下它们是否可以用于商业应用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:11:25.340

尝试查看 GPL 许可证而不是 PDF 库，然后您将更好地了解将其包含在您的项目中需要做什么。这里有一些资源。

[http://www.gnu.org/licenses/quick-guide-gplv3.html](http://www.gnu.org/licenses/quick-guide-gplv3.html)

[https://stackoverflow.com/questions/5197503/to-gpl-or-to-not-gpl-that-is-the-question](https://stackoverflow.com/questions/5197503/to-gpl-or-to-not-gpl-that-is-the-question)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:22:40.130

如果您只想知道是否可以在商业、闭源应用程序中使用 GPL 库而无需支付一分钱，那么答案是否定的，您不能。

# solr - 如何从 SolrNet 3.6 中的字段名称中删除空格？

> ID：11608671
> 
> 赞同：0
> 
> 时间：2012-07-23T08:12:54.960
> 
> 标签：solr, solrnet

我们正在使用 SolrNet 3.6 开发 ASP.NET MVC3 C#。我们使用了动态字段。动态字段名称中有空格：例如 Filter_SIM Slots:Single SIM。

如何从动态字段名称中删除空格？（此处为 Filter_SIM 插槽）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:15:17.900

字段名称中的空格是因为您映射到映射类中动态字段的字典对象中的键中有空格。如果您擦洗/解析键值以删除空格，则您的动态字段也应该被更正。

# ios - 检测自定义单元格中分段控件的操作

> ID：11608673
> 
> 赞同：0
> 
> 时间：2012-07-23T08:12:59.150
> 
> 标签：ios, uisegmentedcontrol, detect, custom-cell

我有一个简单的问题：

在 tableView 中，我正在显示 customCells 列表。这些单元格包含标签、SegmentedControllers....

标签、segmentedController 和其他单元格属性在特定类中声明。

在它更新的列表的类中，我如何检测单元的分段控制器是否被修改？在这堂课上，当我做类似的事情时：

```
if (cell.segmentedControl == 1) { DO MY THINGS } 
```

……什么都没有发生。

有人给点建议吗？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:34:58.800

首先，我很确定你需要使用

```
(cell.segmentedControl.selectedSegmentIndex == 1) 
```

关于知道何时更改，请使用连接到您的单元格类的 IBAction，在您的视图控制器上设置一个委托，当单击单元格控件时，它将从单元格类中获得回调。

编辑 -----------------------
在你的单元格的类 .h 中添加

```
@property (nonatomic, weak) id<NSObject> delegate; 
```

在单元格的类 .m

```
@synthesize delegate = _delegate;

- (IBAction)segmentControlChanged
{
    if ([self.delegate respondsToSelector:@selector(segmentChanged:)]) {
        [self.delegate performSelector:@selector(segmentChanged:) withObject:self];
    }
} 
```

在具有表的 ViewController 中，在`cellForRowAtIndexPath`方法中添加

```
cellname.delegate = self 
```

并添加方法

```
-(void)segmentChanged {
  // Put code here to refresh your data source
[self.tableView reloadData];
} 
```

# django - AssertionError at hours_ahead

> ID：11608678
> 
> 赞同：-2
> 
> 时间：2012-07-23T08:13:34.757
> 
> 标签：django, assertion

When i use assert false method,i get error :

```
assertionError at /time/plus/2/
No exception supplied
Request Method: GET
Request URL:    http://localhost:8000/time/plus/2/
Django Version: 1.4
Exception Type: AssertionError
Exception Location: C:\my\my\views.py in hours_ahead, line 18 
```

Here is my code:

```
from django.http import HttpResponse, Http404
import datetime

def hello(request):
    return HttpResponse("Hello World")

def current_datetime(request):
    now = datetime.datetime.now()
    html = "<html><body>it is now %s.</body></html>" % now
    return HttpResponse(html)

def hours_ahead(request, offset):
    try:
        offset = int(offset)
    except ValueError:
           raise Http404()
    dt = datetime.datetime.now() + datetime.timedelta(hours=offset)
    assert False
    html = "<html><body>In %s hours,it will be %s.</body></html>" % (offset, dt)
    return HttpResponse(html) 
```

I write code that is in The definite guide to django part2 .But it get error and i can`t understand what it is bad in this code.Thanks for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:24:14.300

assert False always throws an exception, it's meant for testing. [more information on testing here](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#writing-tests)

I suppose you can just remove that line and your function should work as expected.

# structuremap - StructureMap：不同程序集中的 PluginType 和 PluggedType

> ID：11608680
> 
> 赞同：1
> 
> 时间：2012-07-23T08:13:38.143
> 
> 标签：structuremap

我用这个撞墙，我不知道：

我有以下接口：

```
namespace SupplyOrder.Objects.Interfaces
{
    public interface ILoginRepository<T>
    {
         T GetUser(string username, string password);
    }
}

namespace SupplyOrder.Objects.Interfaces
{
    public interface ILoginService
    {
        User GetUser(string username, string password);
    }
} 
```

和实现此接口的类：

服务等级：

```
namespace SupplyOrder.Service
{
    public class LoginService : ILoginService
    {
        readonly ILoginRepository<User> _loginRepository;
        public LoginService(ILoginRepository<User> loginRepository)
        {
            _loginRepository = loginRepository;
        }

        public User GetUser(string username, string password)
        {
            return _loginRepository.GetUser(username, password);
        }

    }
} 
```

UserRepository 类：

```
namespace SupplyOrder.Dal
{
    public class UserRepository : ILoginRepository<User>
    {
        public User GetUser(string username, string password)
        {
            // call to DB
        }
    }
} 
```

在 Bootstraper.cs 文件中，我有这个：

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
    protected override IController
        GetControllerInstance(RequestContext requestContext,
        Type controllerType)
    {
        try
        {
            if ((requestContext == null) || (controllerType == null))
                return null;

            return (Controller)ObjectFactory.GetInstance(controllerType);
        }
        catch (StructureMapException)
        {
            System.Diagnostics.Debug.WriteLine(ObjectFactory.WhatDoIHave());
            throw new Exception(ObjectFactory.WhatDoIHave());
        }
    }
}

public static class Bootstrapper
{
    public static void Run()
    {
        ControllerBuilder.Current
            .SetControllerFactory(new StructureMapControllerFactory());

        ObjectFactory.Initialize(x =>
        {
            x.AddConfigurationFromXmlFile("StructureMap.xml");
        });
    }
} 
```

StructureMap.xml 配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<StructureMap>
    <DefaultInstance
        PluginType="SupplyOrder.Objects.Interfaces.ILoginRepository`1, SupplyOrder.Objects"
        PluggedType="SupplyOrder.Dal.UserRepository, SupplyOrder.Dal"
    />

    <DefaultInstance
        PluginType="SupplyOrder.Objects.Interfaces.ILoginService, SupplyOrder.Objects"
        PluggedType="SupplyOrder.Service.LoginService, SupplyOrder.Service"
    />
</StructureMap> 
```

当我运行我的 MVC3 网站时，它给了我这个错误：

```
System.TypeLoadException: Could not load type 'SupplyOrder.Dal.UserRepository' from     assembly 'SupplyOrder.Dal'. 
```

如果所有类和接口都在同一个程序集中，它可以工作，但我希望以结构化的方式拥有所有这些。

谢谢你的帮助，贾尼

# c# - 用户单击图标时如何在wp7中播放声音

> ID：11608682
> 
> 赞同：0
> 
> 时间：2012-07-23T08:13:40.870
> 
> 标签：c#, silverlight, windows-phone-7, audio

我的项目中有很多“词”。每个单词旁边都有一个收听图标。我想知道当用户单击图标时如何播放声音。我所有的声音剪辑都只有 1 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:52:50.460

使用 XNA SoundEffect 类。

[您可以在此处](https://stackoverflow.com/questions/7017517/windows-phone-7-stop-playing-sound-called-via-soundeffect-fromstream)找到一个代码示例，其中已经提出了类似的问题。

# jquery - JQM：Ajax 表单发布后重定向

> ID：11608687
> 
> 赞同：1
> 
> 时间：2012-07-23T08:13:53.680
> 
> 标签：jquery, ajax, jquery-mobile

我有一个用于 ajax 后调用的函数，如下所示：

```
function submitForm() 
    {
            $.ajax(
            {
                type:'POST',
                url:'form.php',
                data:$('#form').serialize(),
                success:function(response)
                {
             /////////////
                    $.mobile.changePage('#page1', {
                            reloadPage: true
                        }, {
                            allowSamePageTranstion: true
                        }, {
                            transition: 'none'
                        });
                    return false;
             /////////////
                }
            }
        );
    } 
```

////////////// 之间的代码是我尝试在成功提交 ajax 表单后用于导航回主菜单的代码。我确实知道它可以正常工作，因为我已尝试使用警报，并且我看到数据存储在 MySQL 中。但我不知道如何重定向回我的主页。我在提交按钮中也有 href="#page1"，但我得到的只是一个空白页，上面写着“未定义”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:16:59.897

关于成功函数

写

```
window.location.href="redirect url" 
```

# javascript - JSP中的提交按钮不会触发Servlet中的doPost

> ID：11608690
> 
> 赞同：0
> 
> 时间：2012-07-23T08:14:09.843
> 
> 标签：javascript, forms, jsp, servlets, post

我有一个存在于 .jsp 文件 (yarntree.jsp) 中的表单。当用户通过位于外部 js 文件 (map.java) 中的 javascript 函数单击 google 地图时，会填充该表单。我想将该数据发送到 sql 数据库，然后重新显示原始 jsp 页面，现在表单为空。其代码位于 .java 文件 (YarnTreeServlet.java) 中。映射位于 web.xml

我正在使用地图 API 的 V3 以及 appengine。

网络应用程序可以在这里看到：

问题：提交按钮不会导致将任何内容发送到 doPost 方法。

我在 javascript 中添加了一些代码来将值写入控制台，并且这些值已正确填充。我检查了查询，如果 doPost 工作，它将正确插入。我已经为此花费了几个小时，并且不知所措。是否有某些原因导致我无法访问表单中的值一旦填充？我知道 servlet 映射可能是问题的一部分，但我尝试了许多变体但没有成功。在这一点上，我无法判断问题出在 js、jsp、表单、doPost 还是 web.xml 中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:17:16.583

如果我错了，请纠正我，但我在`<form>`标签中看不到 servlet url。

```
 <form id="createMarkerForm" 
        method="post" 
        accept-charset="utf-8" 
        action="servletUrl"> 
```

并且 doPost 没有正确覆盖。

```
 @Override
 public void doPost(HttpServletRequest req, 
                    HttpServletResponse resp) 
                        throws ServletException, IOException{    
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:53:43.150

所以，事实证明我需要做'doGet'而不是doPost。据我了解，这是因为我需要通过 jquery 处理的参数的值，因为即使在 javascript 中也是 onclick 的结果。

谢谢你的帮助。

# javascript - li::before for IE8

> ID：11608702
> 
> 赞同：1
> 
> 时间：2012-07-23T08:15:02.917
> 
> 标签：javascript, css, internet-explorer-8, pseudo-element

我`li::before`用来摆脱一些内容，但这段代码适用于所有浏览器，但不适用于 IE8。为什么？我需要 JavaScript 解决方案吗？

这是我的代码：

```
.NewsArchive li::before, .NewsSubMenu li::before {
    content: "• ";
    display: none !important;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:16:57.530

IE8 不支持CSS3对 CSS1 和 CSS2 伪元素[的双冒号表示法。](http://www.w3.org/TR/css3-selectors/#pseudo-elements)该表示法仅受[IE9 及更高版本](https://stackoverflow.com/questions/7157405/are-css3-before-and-after-pseudo-elements-supported-by-ie9-or-not/7157425#7157425)以及其他浏览器支持。

如果您需要 IE8 支持，则必须使用单冒号：

```
.NewsArchive li:before, .NewsSubMenu li:before {
    content: "• ";
    display: none !important;
} 
```

不需要 JavaScript。你很可能也不需要那个`!important`。

# python - 方法上的描述符提供元数据但无法获取方法所在的类

> ID：11608708
> 
> 赞同：1
> 
> 时间：2012-07-23T08:15:29.460
> 
> 标签：python, decorator, descriptor

请原谅我对描述符和装饰器的互换使用。我可能在这里有一些错误。

我想编写（很多）类，这些类以声明方式指定它们的方法，如下所示：

```
class Foo:

    @method_metadata(0,1,2)
    def some_method(self,input):
        print("I received some input: "+input) 
```

目的不是改变方法的行为，只是注册 (0,1,2) 与此方法相关联。

我编写了以下描述符来实现这一点。它给了我三分之二的我需要的东西：

```
class method_metadata:

    # 1 - I need to gather three things here: the parameters passed into the method descriptor (0,1,2) in my case
    # 2 - A reference to the method so I can call it later
    # 3 - The class that the method lives in - this is the one I can't figure out

    def __init__(self,*collection_args):

        # Achieved #1 here
        self.collection_args = collection_args

    def __call__(self,decorated_function):

        #Achieved #2 here:
        self.decorated_method = decorated_method

        #I'm not sure how to achieve #3 here.

        # inspect.getmembers(decorated_function) showed some promise, not sure if I should pursue that.

        # Alternatively, if I put a descriptor on the class that contains the method, I can iterate through the attributes and get what I need.  That'll be my fall-back solution but in my case it causes a bit of a problem because some attributes aren't happy to be read yet (they throw assertions because they're not initialized, etc).

        return decorated_function 
```

有什么想法可以在 method_metadata 中找出所讨论的方法属于 Foo 类吗？

PS - 我在 Python 3.2 上，不需要向后兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:34:48.993

在定义类成员（函数或类数据成员）时，它不知道封闭类。关键字在 Python 中的工作方式是语句`class`体中的`class`表达式被求值，打包到 a 中`dict`，然后作为 . 传递给元类（默认情况下，`type`）`metaclass(classname, bases, members)`。在评估它们时（包括应用装饰器），无法引用它们最终将被添加到的类。

“处理”需要了解封闭类的元数据的方法是使用元类或类装饰器；任何一个：

```
class Foo(metaclass=supporting_metaclass): 
```

或者

```
@supporting_class_decorator
class Foo: 
```

效果上没有太大区别，类装饰器的优点是你从一个完全指定的类开始，而不是自己构建它，所以写起来更简单；此外，类装饰器可以链接。

无论哪种方式，您都需要在元/装饰类机器和方法装饰器之间建立某种程度的合作，并且最好放在金丝雀中，这样您就不会忘记其中一个（例如，使装饰方法非- 可在没有元/类装饰器的情况下调用）。

# android - 上下文之间的差异

> ID：11608709
> 
> 赞同：2
> 
> 时间：2012-07-23T08:15:30.187
> 
> 标签：android, memory-leaks, this, android-context

> **可能重复：**
> [Android - 获取上下文的各种方法有什么区别？](https://stackoverflow.com/questions/1026973/android-whats-the-difference-between-the-various-methods-to-get-a-context)

我想知道使用 , 或 之间`this`有`ClassName.this`什么`getApplicationContext()`区别`myContext`？

在下面的 Toast 中使用每个作为上下文有什么影响？

```
public class ClassName extends Activity {
    final ClassName myContext = this;
    ...
    public void onCreate(Bundle savedInstanceState) {
    ...
    button.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "This is a toast", Toast.LENGTH_LONG).show();
        }

    });
    } 
```

你能指出我对上下文的详细解释吗？[我在这里](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)读过 Romain Guy 的帖子。也许更多的例子会有所帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:41:03.243

[Activity](http://developer.android.com/reference/android/app/Activity.html)和[Application](http://developer.android.com/reference/android/app/Application.html)都派生自 Context 类。因此，`this`当您的代码是 Activity 或 Application 类的一部分时，可以使用它来代替 Context 对象。在其中之一之外（例如在[Fragment](http://developer.android.com/guide/components/fragments.html)中），您可以调用`getActivity()`以获取封闭的 Activity（并将其用作上下文）。getApplicationContext() 是您的 Activity 获取比自身更广泛的上下文的方式。如果您需要在获得它的 Activity 的生命周期之外使用 Context（例如，将其传递到一个长时间运行的后台线程），您可能需要这个。

您可能不需要 Toast 中的应用程序上下文。但是，通过使用它，即使您离开启动它的 Activity，您的 Toast 也应该能够保持可见并且不会导致任何崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:23:05.647

应用程序上下文与应用程序的生命周期相关联，而活动上下文与活动的生命周期相关联。因此，每个都有其范围，并且必须用于在该级别检索信息。

通常，您应该始终使用 Acitity Context，除非您需要一个其生命周期与当前 Activity 分开的上下文。

可能导致内存泄漏的是应用程序上下文的使用，将其绑定到应该被垃圾收集的对象，但保留这个相关属性（应用程序上下文），它们被阻止被收集。

# javascript - 密码强度脚本失败

> ID：11608714
> 
> 赞同：0
> 
> 时间：2012-07-23T08:16:11.930
> 
> 标签：javascript, jquery

我正在使用一个小脚本来检查铭文形式的密码强度，这是脚本的相关部分：

```
 $('#password').keyup(function(){

    var password = $(this).val();
    password = $.trim(password);

    var lettre_min = /[a-z]/;
    var lettre_maj =/[A-Z]/;
    var nombre = /[0-9]/;
    var symbole = /[\`\!\"\?\$\%\^\&\*\(\)\_\-\+\=\{\[\}\]\:\;\@\'\~\#\|\\\<\,\>\.\/]/;

    if(password.length != 0)
    {   
        //password moin de 8 caractères
        if(password.length <8)
        {
            $('.bar').animate({width:'50px',height:'5px'},200).show();
            $('.bar').css('background-color','red');
            $('.error').text('Too short').show();
        }else

        //password faible
        if((password.match(lettre_min)) && password.length <12)
        {
            $('.bar').animate({width:'75px',height:'5px'},200).show();
            $('.bar').css('background-color','red');
            $('.error').text('Weak').show();
        }else

        //password moyen
        //1 type
        if((password.match(lettre_min)) && (password.match(nombre)) && password.length <12)
        {
            $('.bar').animate({width:'100px',height:'5px'},200).show();
            $('.bar').css('background-color','orange');
            $('.error').text('Average').show();
        }else ... 
```

问题是：如果我在表单输入中输入字母（lettre_min）和数字（名词），他告诉我密码很弱，而他应该告诉我它是平均的。他完全忽略了第二个条件。

我不知道发生了什么=/

PS：很抱歉，如果在另一个问题中已经有这个答案，但我什至不知道问题是什么，所以我不知道要搜索什么=/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:24:13.300

实际上，我倾向于相信第三个条件没有得到评估，因为它是第二个更大的情况，考虑将第二个 If 与第三个切换，它应该可以工作。

第二个 if 可以包含小写字母但也可以包含数字，因为 match() 评估它是否包含那种东西，所以在执行第二个执行之前，第三个也会检查是否有数字，如果没有则只检查字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:25:49.290

快速解决方案：

```
//password moyen
        //1 type
        if((password.match(lettre_min)) && (password.match(nombre)) && password.length <12)
        {
            $('.bar').animate({width:'100px',height:'5px'},200).show();
            $('.bar').css('background-color','orange');
            $('.error').text('Average').show();
        } else if((password.match(lettre_min)) && password.length <12)
        {
            $('.bar').animate({width:'75px',height:'5px'},200).show();
            $('.bar').css('background-color','red');
            $('.error').text('Weak').show();
        } 
```

如果`if((password.match(lettre_min)) && (password.match(nombre)) && password.length <12)`是真的也比`if((password.match(lettre_min)) && password.length <12)`真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:37:59.637

您检查密码强度的条件顺序错误。要解决这个问题：

```
if((password.match(lettre_min)) && password.length <12){
   if(password.match(nombre)){
     //average
   }else{
     //weak
   }
}else if(password.length < 8){
   //too short
}else{
   //it must be strong
} 
```

# asp.net-mvc-3 - 将 asp.net 成员身份迁移到 Windows Azure

> ID：11608715
> 
> 赞同：2
> 
> 时间：2012-07-23T08:16:20.107
> 
> 标签：asp.net-mvc-3, azure, asp.net-membership

我正在将我的 asp.net mvc-3 项目迁移到 Windows azure。我必须将 asp.net 成员身份迁移到 Windows azure。我读[了这篇文章。](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)从这篇文章中，我了解到迁移成员的以下几点：

1) 迁移成员意味着只需更改存储用户相关信息的数据存储。就我而言，意味着我使用 SQL Server Express 2008 作为本地数据存储。我只需要将其更改为 SQL azure 数据中心。

2) 我通过 Nuget 下载了 ASP.NET 通用提供程序。这将自动将成员资格支持扩展到 SQL azure。意味着我只需要更改 web.config 文件中的连接字符串。在该连接字符串中，它需要服务器名称和数据库。为此，我必须在 Windows azure 中创建一个帐户。我可以在哪里创建数据库。从那里我可以获得现成的连接字符串，我必须将其粘贴到我的 web.config 文件中。

我想知道做完这一切之后的下一步。

我只想知道我的方向是否正确。如果我有什么遗漏或我不在正确的道路上，那么请指导正确的方向？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:38:26.190

使用 ASP.NET 通用提供程序是要走的路。对于迁移部分，我建议您简单地使用 SQL Server 的生成脚本功能（右键单击您的数据库，选择任务，选择生成脚本）。

在导出向导中，您可以选择导出到 SQL Azure，并且脚本应该包含架构和数据。这将使您可以非常轻松地将当前的本地数据库迁移到 SQL Azure。

![在此处输入图像描述](../Images/768b2ab4c9be563702bb11942d48f858.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:18:06.313

除了 Sandrino 的回答之外，我只会添加一个使用[SQL Azure 迁移向导](http://sqlazuremw.codeplex.com/)的建议，因为它比 SSMS 中的集成功能要好得多。举个简单的例子，SQL Azure 迁移向导会自动为没有聚集索引的表创建聚集索引。另一件事是，迁移向导将为您提供任何不兼容 SQL Azure 的定义/数据/语句的详细解释，而迭代的“生成脚本”只会抛出“它不兼容”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:30:37.457

首先，如果它有效@astaykov 的 SQL Azure 迁移向导建议应该是你的第一步。它会告诉您数据库的哪些部分与 SQL Azure 不兼容。SSMS 将为需要迁移的每一行生成一个插入语句。迁移向导将使用效率更高的 BCP。

大约一年前，我不得不为客户迁移会员数据库。我遇到的问题是，由于 aspnet_regsql.exe 生成的数据库包含与 SQL Azure 不兼容的元素，因此无法进行自动迁移。有一个新版本[aspnet_regsqlazure.exe](http://support.microsoft.com/kb/2006191)，它创建具有相同架构的表，但支持的存储过程与 SQL Azure 兼容。创建匹配架构后，您可以通过任何您喜欢的方式移动表内容 SSMS、迁移向导或 BCP。

同样，请务必先尝试 astaykov 的建议。如果生成的会员数据库最近发生了变化，那我必须做的事情会容易得多。

# php - php 配置文件到外部 js 文件

> ID：11608717
> 
> 赞同：0
> 
> 时间：2012-07-23T08:16:36.740
> 
> 标签：php, json, external-js

请帮助我如何实现这个
我如何将配置变量从我的 Config.php 传递/访问到外部 Php'd JS 文件

在我的 Config.php

```
define('LIBS', 'http://localhost/libs/'); 
```

我在我的外部 js 文件中这样做

```
alert(<?php echo json_encode('LIBS');) 
```

我的另一个选择是，重新初始化 php 配置变量，像这样

```
<script type="text/javascript">  
var jsLIBS= <?php echo json_encode('LIBS'); ?>
</script> 
```

在我的主 php 文件中并将其设置为全局变量

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:21:25.687

为什么不：

```
<script type="text/javascript">  
var jsLIBS= '<?php echo LIBS; ?>';
</script> 
```

# android - 如何将 logcat 输出复制到剪贴板？

> ID：11608718
> 
> 赞同：47
> 
> 时间：2012-07-23T08:16:37.707
> 
> 标签：android, eclipse, logcat

我正在 Eclipse 中开发 android 应用程序，如何将 logcat 消息发送到我的剪贴板？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-23T08:20:43.550

选择消息并按`ctrl`+ `c`。您可以使用此按钮将其保存在文本文件中：![更好的图片](../Images/bdb1ee07300a4862551bb4000d169ae3.png)

如果您使用的是 mac，解决方法是右键单击，找到类似的消息，然后从对话框中复制。- 谢谢你，Snicolas

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-23T08:20:16.100

您可以单击 LogCat 中的输出行，然后像正常一样单击`ctrl`+ ，然后正常粘贴到您想要的任何内容中。`c`您可以使用 shift 并单击来选择多行。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-29T13:28:14.287

`Ctrl`+`C`有效，但您需要确保单击任何拆分为多行的输出的第一行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-03T09:38:12.523

## 仅复制 Android Studio 中所需的内容

出于好奇，我想发布这个答案。默认情况下，Logcat 还会显示其他信息以及日期时间、进程和线程、包名称和标签等日志，如果您从 Logcat 复制一行，那么也会复制整个信息。

如果你根本不想要这个或者你不想要某个特定的东西，那么你可以做这样的事情，

第1步：

单击 Logcat 标头（设置/齿轮）图标

[![在此处输入图像描述](../Images/3d826df9f4810bb0193d1c8577a38c16.png)](https://i.stack.imgur.com/8kpcg.png)

第2步：

取消勾选您不想在日志中看到的任何内容，最终您不想复制。

[![在此处输入图像描述](../Images/5f2619757d1a7ed36ef9170f2bf30515.png)](https://i.stack.imgur.com/DNkwV.png)

就是这样。

我认为它可能会帮助某人。

PS 这个问题很老，在 Eclipse 时问过，但这个答案是新的，适用于 Android Studio。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-01T21:46:51.333

同样值得注意的是，至少从 ADT 插件版本 21 开始，当您在最大详细度上进行显示设置时，Eclipse 的 logcat 查看器中会显示一个 TID 列，但是如果您复制并粘贴此视图的内容，则不会保留线程 ID。相反，您会看到类似 [debug level] [timestamp] [invocation] (PID)... 但没有线程 ID。我不知道是否有更简单的方法可以直接从 eclipse 中获取 TID 数据，但可以使用远程 adb shell 来完成，如下所示：

从 PC 的命令行执行以下命令： adb -s [您的设备的序列号] shell "logcat -v threadtime" > [your_output_file]

您的会话看起来会挂起，但实际上设备的 logcat 输出（与 eclipse 的 logcat 视图（包括 TID）完全一样）正在实时写入您的输出文件。当您想查看内容时，使用`ctrl`+退出 logcat 转储过程`c`并在您的 PC 上打开文件。可以在 [此处] 找到其他用于 logcat 过滤等的选项。[1](http://developer.android.com/tools/debugging/debugging-log.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-18T14:28:20.153

从命令行：

```
adb logcat > log.txt 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-30T17:31:28.480

这是一种从 Logcat 复制多个数据列以粘贴到电子表格中的技术。

使用一致的填充（空格、零）格式化您的日志数据。使用标签分隔数据（标签适用于 Google 表格）。使用标签过滤 Logcat 输出。

```
Log.d("MY_TAG", String.format(Locale.ENGLISH, "value1, value2 %08d\t%03d", data1, data2)); 
```

应用程序产生一些输出后，在 Logcat 窗口中按住 ALT 键，然后向下拖动以选择列。

[![选择多个 Logcat 列](../Images/a0bbcf3f365418a758169937a6a6f32a.png)](https://i.stack.imgur.com/8NAqg.png)

使用**CTRL+C** (Windows) 复制到剪贴板。

导航到电子表格（Google 表格），选择起始单元格，然后使用**CTRL+V**将列粘贴到电子表格中。

[![在此处输入图像描述](../Images/5aa950ac632c222518b6e6a3adf6cee8.png)](https://i.stack.imgur.com/vavoM.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-28T22:19:03.343

对于那些在 Macintosh 上使用 Eclipse 的人，这里有一个解决方法：

*   突出显示要复制到剪贴板的 logcat 部分（或者只需单击选择所有内容`ctrl`-`a`当 logcat 窗口处于活动状态时）
*   点击“保存”图标（它看起来像一张软盘）
*   将其保存到方便的位置
*   在另一个文本编辑器中打开日志文件（使用你最喜欢的不是 eclipse）
*   选择你想要的
*   现在输入`ctrl`-`c`复制到剪贴板

是的，我知道；这是一个痛苦的屁股，但它的工作原理。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-03T00:27:20.297

将光标放在 logcat 窗口中。 `ctrl`-`a` 全选 `ctrl`-`c` 复制所选内容（将全部）运行 vi 然后粘贴。

# objective-c - 如何初始化 gluPerspective OpenGL 投影类型？

> ID：11608720
> 
> 赞同：0
> 
> 时间：2012-07-23T08:16:38.337
> 
> 标签：objective-c, xcode, macos, opengl, view

现在我通过以下代码初始化我的 OpenGL 视图：

```
glLoadIdentity();
glViewport(0, 0, w, h);
glMatrixMode(GL_PROJECTION);
glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT);               
glOrtho(0.0, w, 0.0, h, -1.0, 10.0); 
```

我看起来应该看起来。
但它的 Ethological 观点。我想要透视视图。所以我尝试用以下方式初始化它：

```
glLoadIdentity();
glViewport(0, 0, w, h);
glMatrixMode(GL_MODELVIEW);
glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT);               
gluPerspective(60, w/h, 0.1, 100);
glTranslatef(0.0,0.0,-5.0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:39:00.687

> 我究竟做错了什么？

您的第一个误解是考虑“初始化”。OpenGL 是一个状态机，您需要在整个程序中根据需要设置状态。那些你称之为“初始化”的调用实际上属于绘图代码。

第二：投影矩阵有点像OpenGL的“镜头”，因此各种投影都属于那里，而且只有那里，这也适用于`gluPerspective`（它不是OpenGL的一部分，而是GLU，一个第三方库，最终调用`glFrustum`） .

在您的原始代码中，您将正交限制设置为视口大小，即您将看到世界空间坐标率（0,0）到（宽度，高度）。该世界空间卷中的所有内容都将填满视图。在透视的情况下，您会得到一个以 Z 轴为中心对称的查看体积，并且取决于近平面和远平面通常会覆盖大约 (-near*aspect, -near) 到 (+near*aspect, near) 的内容剪裁平面附近。在您的情况下，这将类似于 -0.1,-0.1 到 0.1,0.1，这是一个非常小的体积，只会在很大程度上放大您的图像。

如何解决这个问题？

1.  了解 OpenGL 的工作原理
2.  停止货物崇拜编程，即只是将教程中的代码复制并粘贴到可能看起来正确的地方，而没有真正了解发生了什么。

现在，在您的情况下，我强烈怀疑您是否真的想要“将图像放在这里”背景的透视图，但仅适用于在此之上绘制的任何内容。还记得我告诉过你 OpenGL 是一个状态机吗？好吧，原因如下：因为您应该在这两个绘图阶段之间切换投影：

1.  使用正射投影绘制背景
2.  使用顶部的透视投影绘制您想要的任何其他内容。

# c# - 访问类型 T 的属性

> ID：11608732
> 
> 赞同：2
> 
> 时间：2012-07-23T08:17:18.167
> 
> 标签：c#, generics

我有一个缓存类，它将列表存储到字典中：

```
public class CacheList<T>
{
    private Dictionary<UInt64, T> _cacheItems = new Dictionary<UInt64, T>();

    public IList<T> GetItems()
    {
        return new List<T>(_cacheItems.Values);
    }

    public void Add(T item)
    {
        UInt64 key = (UInt64)(item.GetHashCode());

        if (!_cacheItems.ContainsKey(key))
            _cacheItems.Add(key, item);
    }
} 
```

现在我通过从通用 T 中获取哈希码来将项目添加到字典中。但我想指定我希望将哪个字段/属性作为键。问题是它是一个类型 T 所以它不知道这个项目中有哪些属性。

如何从通用项目访问属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:20:21.117

[我看到了泛型并想到了“约束”，但事后看来，我更喜欢[Marc 的方法](https://stackoverflow.com/a/11608814/358221)，所以我会走他的路。]

您可以创建一个接口来公开您需要的属性，然后在该接口上进行约束：

```
interface IExposeKey
{
    string Key { get; }
}

public class CacheList<T> where T : IExposeKey { } 
```

在代码中，编译器现在可以假设`T`可以`IExposeKey`相应地提供强类型访问：

```
public void Add(T item)
{
    string key = item.Key;

    if (!_cacheItems.ContainsKey(key))
        _cacheItems.Add(key, item);
} 
```

您甚至可以以这种方式公开属性名称，然后在`T`实例上使用反射，但是您为运行时错误打开了大门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:22:42.847

也许：

```
public class CacheList<T, TKey>
{
    private readonly Dictionary<TKey, T> _cacheItems = new Dictionary<TKey, T>();
    private readonly Func<T, TKey> selector;
    public CacheList(Func<T, TKey> selector)
    {
        this.selector = selector;
    }
    public IList<T> GetItems()
    {
        return new List<T>(_cacheItems.Values);
    }

    public bool Add(T item)
    {
        TKey key = selector(item);

        if (_cacheItems.ContainsKey(key)) { return false; }

        _cacheItems.Add(key, item);
        return true;
    }
    public bool TryGetValue(TKey key, out T value)
    {
        return _cacheItems.TryGetValue(key, out value);
    }
} 
```

然后：

```
var dict = new CacheList<Customer,int>(c => c.CustomerId); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:24:12.527

您可以使用 lambda 函数来指定密钥。像这样的东西：

```
public class CacheList<T, P>
{
    private Dictionary<P, T> _cacheItems = new Dictionary<P, T>();
    private Func<T, P> _getKey;

    public CacheList(Func<T, P> getKey)
    {
        _getKey = getKey;
    }

    public IList<T> GetItems()
    {
        return new List<T>(_cacheItems.Values);
    }

    public void Add(T item)
    {
        P key = _getKey(item);

        if (!_cacheItems.ContainsKey(key))
            _cacheItems.Add(key, item);
    }
} 
```

然后，您将像这样创建实例：

```
var cl = new CacheList<MyClass, string>(x => x.SomeProperty); 
```

这对你有用吗？

# regex - 避免在正则表达式中分组

> ID：11608738
> 
> 赞同：1
> 
> 时间：2012-07-23T08:17:49.250
> 
> 标签：regex

我有以下正则表达式用于检查时间格式*HHMM*

```
([0-1][0-9]|[2][0-3])([0-5][0-9]) 
```

这很完美，但现在我的应用程序遇到了问题。它要求上式的结果只返回一组时间，而不是两组。是否有可能在不分组的情况下捆绑正则表达式的某些部分？

提前致谢 ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:20:24.150

是的，使用非捕获括号：

```
(?:[01][0-9]|2[0-3])(?:[0-5][0-9]) 
```

如果您的应用程序需要至少一个组，您当然可以将整个正则表达式包含在一个捕获组中。

# jquery - 跨浏览器友好，多页全屏，滚动到布局

> ID：11608742
> 
> 赞同：1
> 
> 时间：2012-07-23T08:18:04.567
> 
> 标签：jquery, css

我想创建一个简单的 2 页布局，但在创建时遇到了一些问题。

两个页面都占据页面的全宽和全高。第二页存在，但在第一页上方（垂直）隐藏在屏幕之外。单击按钮时，第一页向下移动，第二页从上方向下移动。

我的第一次尝试涉及 2 个绝对定位的盒子。IE

```
#page1, #page2 { position: absolute; width: 100%; height: 100%; }
#page2 { margin-top: -100%; } 
```

从结构上讲，这适用于 Chrome。#page2 离开屏幕，并且 page1 可见。不幸的是，它对其他一些用户来说并不是那么好。

在使用一些简单的 jquery 单击我的按钮时，我像这样对 css 进行了动画处理：

```
$('#learnmore').click(function(){

    $('#page1').animate({'margin-top':'100%'},500);
    $('#page2').animate({'margin-top':'0'},500);
}); 
```

所以基本上，第 1 页添加了 100% 的边距，而第 2 页的边距被删除了。这在我的计算机上运行良好，但其他用户报告了问题。我认为这一定是我的布局的结构性问题。

在我看来，不同的浏览器不喜欢 width: 100% 和 height: 100% 并且正在产生一些意想不到的结果。这是真的？

有什么更好的方法来实现这一点，以便第二页隐藏在屏幕外，并在点击时从上方向下滚动？目的是让 page1 在加载时可见，屏幕上没有滚动条，然后一旦 page2 被拉下，用户可以根据需要向后滚动。

编辑：[**这是我使用不同结构的一种方式的 JSfiddle**](http://jsfiddle.net/MSAUS/3/) - 您在浏览器上看到任何问题吗？你能改进一下吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:36:56.973

考虑使用 $(window).height()，而不是使用 100% 作为 margin-top。如果您确定初始屏幕的高度为 100%，将为您提供相同的结果并适用于所有浏览器。

```
$('#learnmore').click(function(){

    $('#page1').animate({'margin-top':$(window).height()},500);
    $('#page2').animate({'margin-top':'0'},500);
}); 
```

您还需要在 document.ready() 上将 page1 的宽度和高度设置为 100%

```
$('#page1').css("height", $(window).height() + "px"); 
```

在 learnmore.click() 中为#page2 做同样的事情

# python - 提取所有文档字符串的行号？

> ID：11608747
> 
> 赞同：3
> 
> 时间：2012-07-23T08:18:25.733
> 
> 标签：python, docstring

我正在尝试提取 Python 模块中所有文档字符串的开始和结束行号。没有正则表达式有没有一种明智的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:50:22.413

最好的方法是使用[`ast`](http://docs.python.org/dev/library/ast.html)模块。特别是，[`ast.get_docstring`](http://docs.python.org/dev/library/ast.html#ast.get_docstring)几乎可以满足您的需求；它返回文档字符串的内容而不是节点，但您可以使用相同的算法来查找文档字符串节点及其位置：

```
root = ast.parse('''
def foo():
    """the foo function"""
    pass
''')
for node in ast.walk(root):
    if isinstance(node, (ast.FunctionDef, ast.ClassDef, ast.Module)):
        if (node.body and isinstance(node.body[0], ast.Expr) and
            isinstance(node.body[0].value, ast.Str)):
            print node.lineno, node.body[0].value.lineno, node.body[0].value.s 
```

虽然没有记录，但该`lineno`属性给出了节点的*最后*一行，因此`lineno`父节点的 将是文档字符串的第一行或之前的行。似乎没有一种简单的方法可以区分与`class`or`def`关键字在同一行和下一行开始的文档字符串之间的区别，尤其是当您考虑行继续`\`符 ( ) 时。

# c# - 使用连接属性扩展 EF 类

> ID：11608749
> 
> 赞同：0
> 
> 时间：2012-07-23T08:18:38.380
> 
> 标签：c#, entity-framework

我想使用来自实体导航属性的附加属性扩展我的 EF 类。

来自 Northwind 数据库的简单示例。Territories 表有“TerritoryID”、“TerritoryDe​​scription”和“RegionID”列（Region 表的外键）我也想将“RegionDescription”属性添加到我的实体类中。

所以我创建了一个部分类，但是如何填充 RegionDescription 属性呢？

```
public partial class Territory
{
    public string RegionDescription { get; set; }

    partial void OnRegionIDChanging(int value)
    {
    }

    partial void OnRegionIDChanged()
    {
    }
} 
```

也许在其中一个事件中，我的第一个想法是使用 Territory 实体类 ( RegionDescription = this.Region.RegionDescription) 的“区域”导航属性，但在事件触发时为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:26:37.847

你可以这样做，

```
public partial class Territory
{
    public string RegionDescription
    {
        get { return Region.Description; }
        set { Region.Description = value; }
    }

    partial void OnRegionIDChanging(int value)
    {
    }

    partial void OnRegionIDChanged()
    {
    }
} 
```

# jsf - org.apache.jasper.JasperException：java.util.MissingResourceException

> ID：11608750
> 
> 赞同：1
> 
> 时间：2012-07-23T08:18:40.350
> 
> 标签：jsf, jsf-2

我在启动我的应用程序时找不到资源包异常。jsps 中的路径很好，但仍然使用服务器 JBOSS AS7.2 Alpha、JSF2.0 引发异常

堆栈跟踪

13:06:10,686 INFO org.jboss.as.server（DeploymentScanner-threads - 2）JBAS018559：已部署“csaEARDev.ear” 13:06:34,580 INFO org.apache.jasper.JasperException：java.util.MissingResourceException：Can' t 找到基本名称属性的包。ApplicationDetails，语言环境 en (http-localhost/127.0.0.1:8080-2) 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。 ApplicationDetails，语言环境 en (com.csc.fs.logging.Log4JHandler:logError:190) - 2012/07/19 13:06:34.515: ResponseHeaderFilter : ERROR : :doFilter Exception - Exception [org.apache.jasper.JasperException: java .util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，locale en] 根本原因 org.apache.jasper.JasperException：java.util.MissingResourceException：Can't 查找基本名称属性的包。ApplicationDetails, locale en

> 13:06:34,581 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境（http-localhost/127.0.0.1:8080-2）org.apache .jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境
> 
> 13：06：34,581 INFO org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境（http-localhost/127.0.0.1:8080-6）错误组织。 apache.jasper.JasperException: java.util.MissingResourceException: 找不到基本名称属性的包。ApplicationDetails，语言环境 en (com.csc.fs.logging.Log4JHandler:logError:190) - 2012/07/19 13:06 ：34.515：ResponseHeaderFilter：错误：：doFilter异常-异常[org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境]根本原因org.apache.jasper。 JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境
> 
> 13：06：34,581 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的捆绑包。ApplicationDetails，在 org. apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:413)
> 
> 13:06:34,582 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
> 
> 13:06:34,582 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
> 
> 13:06:34,582 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，javax 的语言环境（http-localhost/127.0.0.1:8080-2）。 servlet.http.HttpServlet.service(HttpServlet.java:847)
> 
> 13:06:34,582 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
> 
> 13:06:34,583 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
> 
> 13:06:34,583 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at apache.catalina.core.ApplicationDispatcher.invoke（ApplicationDispatcher.java:840）
> 
> 13:06:34,583 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622)
> 
> 13:06:34,584 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560)
> 
> 13:06:34,585 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.ApplicationDispatcher.forward（ApplicationDispatcher.java:488）
> 
> 13:06:34,585 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:542)
> 
> 13:06:34,585 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:355)
> 
> 13:06:34,586 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:130)
> 
> 13:06:34,586 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:106)
> 
> 13:06:34,586 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
> 
> 13:06:34,586 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
> 
> 13:06:34,586 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，javax 的语言环境（http-localhost/127.0.0.1:8080-2）。 faces.webapp.FacesServlet.service(FacesServlet.java:313)
> 
> 13:06:34,587 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
> 
> 13:06:34,587 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
> 
> 13:06:34,587 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 csc.fs.accel.ui.filters.ResponseHeaderFilter.doFilter(ResponseHeaderFilter.java:82)
> 
> 13:06:34,587 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
> 
> 13:06:34,587 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
> 
> 13:06:34,588 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:275）
> 
> 13:06:34,588 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
> 
> 13:06:34,588 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.authenticator.AuthenticatorBase.invoke（AuthenticatorBase.java:397）
> 
> 13:06:34,588 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:156)
> 
> 13:06:34,588 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
> 
> 13：06：34,589 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 org 的语言环境（http-localhost/127.0.0.1:8080-2）。 apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
> 
> 13：06：34,589 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 org 的语言环境（http-localhost/127.0.0.1:8080-2）。 apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
> 
> 13：06：34,589 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 org 的语言环境（http-localhost/127.0.0.1:8080-2）。 apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:368）
> 
> 13：06：34,589 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 org 的语言环境（http-localhost/127.0.0.1:8080-2）。 apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
> 
> 13:06:34,590 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679)
> 
> 13:06:34,590 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931)
> 
> 13:06:34,590 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境 en (http-localhost/127.0.0.1:8080-2) at java。 lang.Thread.run（未知来源）
> 
> 13:06:34,590 错误 org.apache.jasper.JasperException: java.util.MissingResourceException: 找不到基本名称属性的包。ApplicationDetails，语言环境 (http-localhost/127.0.0.1:8080-2) 原因： java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境
> 
> 13:06:34,591 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 java 的语言环境（http-localhost/127.0.0.1:8080-2）。 util.ResourceBundle.throwMissingResourceException（未知来源）
> 
> 13:06:34,591 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 java 的语言环境（http-localhost/127.0.0.1:8080-2）。 util.ResourceBundle.getBundleImpl（未知来源）
> 
> 13:06:34,591 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，在 java 的语言环境（http-localhost/127.0.0.1:8080-2）。 util.ResourceBundle.getBundle（未知来源）
> 
> 13:06:34,591 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at com。 sun.faces.taglib.jsf_core.LoadBundleTag.doStartTag(LoadBundleTag.java:164)
> 
> 13:06:34,591 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jsp.init.aboutForm_jsp._jspx_meth_f_005floadBundle_005f0(aboutForm_jsp.java:270)
> 
> 13:06:34,592 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jsp.init.aboutForm_jsp._jspx_meth_h_005fform_005f0(aboutForm_jsp.java:190)
> 
> 13:06:34,592 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jsp.init.aboutForm_jsp._jspx_meth_f_005fview_005f0(aboutForm_jsp.java:148)
> 
> 13:06:34,592 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jsp.init.aboutForm_jsp._jspService(aboutForm_jsp.java:111)
> 
> 13:06:34,592 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
> 
> 13:06:34,592 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，javax 的语言环境（http-localhost/127.0.0.1:8080-2）。 servlet.http.HttpServlet.service(HttpServlet.java:847)
> 
> 13:06:34,593 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，区域设置 en (http-localhost/127.0.0.1:8080-2) at org。 apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
> 
> 13:06:34,593 错误 org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称属性的包。ApplicationDetails，语言环境（http-localhost/127.0.0.1:8080-2）...还有 33 个

您能否建议是否需要设置其他内容或什么？为什么即使它们在那里也找不到指定路径的捆绑包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:52:48.660

上面的错误是因为，一个资源包

> ApplicationDetails 不在类路径上。

我把它包装在

> WEB-INF\类

它奏效了。

# wordpress - IE9 奇怪的行为

> ID：11608758
> 
> 赞同：-1
> 
> 时间：2012-07-23T08:19:04.567
> 
> 标签：wordpress, class, cross-browser, internet-explorer-9

如果您使用 ie9 浏览[http://www.new-way.it/qualias](http://www.new-way.it/qualias)网站，在社交网络框附近的页脚中会出现一条奇怪的代码行：

什么是？！

使用 ie9 在页面中的另一个奇怪行为：

[http://www.new-way.it/qualias/?page_id=166](http://www.new-way.it/qualias/?page_id=166)

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:41:43.043

该代码是通过 Javascript 添加的，它是一个名为 ie7_anon ie7_class19 的类，它具有应作为文本添加的内联 CSS -> none ！important。

那么为什么会显示一些与 IE7 相关的内容呢？您的标记迫使 IE9 进入怪癖模式，所以我首先要删除您的验证错误。这可能是原因。但是，您也有一些 css 和 js 被应用到这里的所有 IE 版本；

```
 <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="http://www.new-way.it/qualias/wp-content/themes/custom-community/styleIE.css" />
             <script type="text/javascript" src="http://www.new-way.it/qualias/wp-content/themes/custom-community/js/ie7-standard-p.js"></script>
        <![endif]--> 
```

这也有一些问题需要修复（事实上它将 CSS 输出到文本）。

# google-drive-api - Google Drive SDK：关于文件的父级

> ID：11608759
> 
> 赞同：1
> 
> 时间：2012-07-23T08:19:05.457
> 
> 标签：google-drive-api

我有一个关于文件父母的问题。当我使用 $file->getParents() 检索有关父级的信息时，我收到一个数组，其中唯一的元素是有关父级的信息。

我的问题是：现在，我一直只有一个父母，但一个文件可以有更多的父母吗？如果是，在哪种情况下？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:16:11.563

一个文件在逻辑上可以是多个集合的一部分，您可以将它们视为允许层次结构的标签。当一个文件属于多个文件夹时，API 会在调用 getParents() 时返回它们的列表。

# android - 对齐两个控件，其中一个使用所有可用空间 - Android

> ID：11608762
> 
> 赞同：0
> 
> 时间：2012-07-23T08:19:31.133
> 
> 标签：android, android-layout

非常简单的问题，但我似乎无法正确配置它。

我会让 ListVieww 右对齐占用 100dp 的 layout_width，而 MapControl 占用剩余空间。（我宁愿占用剩余空间来利用手机被放置在水平位置的优势。

这就是我目前所拥有的。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

             <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_gravity="left" >

                 <com.google.android.maps.MapView
                 android:id="@+id/gmap"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:clickable="true"
                 android:layout_gravity="left"
                 />
                 </LinearLayout>

        <LinearLayout 
        android:id="@+id/maplst"
        android:layout_width="100dp"
        android:layout_gravity="right"
        android:layout_height="fill_parent"
        android:orientation="vertical" > 

        <ListView
        android:id="@+id/listView1"
        android:layout_width="118dp"
        style="@style/listViewStyle"
        android:layout_height="wrap_content" android:layout_gravity="right">
    </ListView>
    </LinearLayout>  

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:29:22.630

我认为您不需要所有这些布局（优化点）。要占用剩余空间，请`layout_width="0dp"`使用`layout_weight="1"`.

这应该是你想要的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

     <com.google.android.maps.MapView
                 android:id="@+id/gmap"
                 android:layout_width="0dp"
                 android:layout_weight="1"
                 android:layout_height="fill_parent"
                 android:clickable="true"
                 />

      <ListView
             android:id="@+id/listView1"
             android:layout_width="100dp"
             style="@style/listViewStyle"
             android:layout_height="wrap_content">
       </ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:29:25.017

这是列表视图在屏幕左侧对齐的代码，占用 100dp 空间，其余部分由地图视图占用。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/maplst"
        android:layout_width="100dp"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_toLeftOf="@+id/maplst">

        <com.google.android.maps.MapView
            android:id="@+id/gmap"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:clickable="true" />
    </LinearLayout>

</RelativeLayout> 
```

# android - Android：应用程序在一台设备上运行良好，而在另一台设备上无法运行

> ID：11608766
> 
> 赞同：1
> 
> 时间：2012-07-23T08:20:02.837
> 
> 标签：android, permissions, compatibility

我遇到了一个问题，我的应用程序在我用于调试目的[的 Galaxy Tab 7.7 GT-P6800上运行良好，在我的](http://www.gsmarena.com/samsung_p6800_galaxy_tab_7_7-4136.php)[Galaxy Pocket](http://www.gsmarena.com/samsung_galaxy_pocket_s5300-4612.php)上运行并创建一个文件夹来放置文件，甚至接受输入和所有这些事情但它没有创建文件。我正在 eclipse 中开发，该应用程序的构建 SDK 是 Android 2.3.3 (API 10)。

该应用程序的代码如下所示，找不到问题所在...

```
package com.android.app1;

public class MainActivity extends Activity {

//Timestamp for file name e.g. Data_7-19-2012
SimpleDateFormat s1 = new SimpleDateFormat("MM-dd-yyyy_hh:mm:ss");
final String format1 = s1.format(new Date()); 

final public String FileName = "Data_"+format1+".csv";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText addbarcode = (EditText) findViewById(R.id.editText1); 
addbarcode.setOnKeyListener(new OnKeyListener()
    {
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                switch (keyCode)
                {
                    case KeyEvent.KEYCODE_ENTER:

                        //to get Timestamp
                        SimpleDateFormat s = new SimpleDateFormat("MM-dd-yyyy hh:mm:ss");
                        String format = s.format(new Date());

                        //get barcode in a variable
                        Editable barcode = addbarcode.getText();

                        final String DATASTRING = new String(""+barcode+","+format+"");

                        try
                        {
                            File root = new File(Environment.getExternalStorageDirectory(), "BarcodeData");

                            if (!root.exists()) {
                                root.mkdirs();

                            }

                        //Showing file directory
                        TextView etDir= (TextView)findViewById(R.id.textView1);
                            etDir.setText(root.toString());

                            File gpxfile = new File(root, FileName);

                            BufferedWriter bW;

                            bW = new BufferedWriter(new FileWriter(gpxfile, true));
                            bW.write(DATASTRING);
                            bW.newLine();
                            bW.flush();
                            bW.close();

                        }
                        catch(IOException e)
                        {
                             e.printStackTrace();
                        }
            String readString = new String(DATASTRING);
                    TextView etData= (TextView)findViewById(R.id.textView2);

                    etData.setText(readString);

                        //Clear the editview for new entries
                        addbarcode.setText("");   
                      return true;
                    default:
                        break;
                }
            }
            return false;
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.send:

            final File dir = getFilesDir();

            final File shareFile = new File(dir, FileName);
            Uri u1  =   null;
            u1  =   Uri.fromFile(shareFile);

            Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Person Details");
            sendIntent.putExtra(Intent.EXTRA_STREAM, u1);
            sendIntent.setType("text/csv");
            startActivity(sendIntent);
            break;
    }
    return true;
}
} 
```

我什至添加了所需的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

甚至从项目属性中设置 Java Build Path 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:24:05.373

请参阅[getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)文档。

> 获取 Android 外部存储目录。如果该目录已被用户安装在他们的计算机上、已从设备中删除或发生了其他问题，则该目录当前可能无法访问。您可以使用 getExternalStorageState() 确定其当前状态。

`null`在访问它之前检查它。

# google-analytics - 带有和不带有正斜杠的 Google Analytics 双重列表

> ID：11608769
> 
> 赞同：4
> 
> 时间：2012-07-23T08:20:15.033
> 
> 标签：google-analytics

我们在 Google Analytics 中的大多数网址上都获得了双重列表，例如：

`/Home/Specials`

`/Home/Specials/`

该网站是基于 MS MVC3 的。第一个通常显示较短的加载周期，退出率几乎为零。大多数真实用户数据都在第二个（带有斜线后缀的数据）。

隐藏第一个的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:25:19.347

该问题是由 Analytics 本身和 jQuery 地址脚本（后者添加尾部斜杠）完成的重复跟踪引起的。jQuery 代码添加了对 AJAX 帖子的跟踪，因此对于搜索结果等页面非常有用。

为了解决这个问题，我们只是从 Analytics 提供的核心脚本中删除了以下行：

```
_gaq.push(['_trackPageview']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T10:36:58.397

也可以在 GA 本身内添加一个正则表达式过滤器，这将在内部添加斜杠，从而有效地消除该问题。

* * *

来自[https://www.getelevar.com/how-to/fix-duplicate-url-google-analytics/](https://www.getelevar.com/how-to/fix-duplicate-url-google-analytics/)

## 如何修复报告中的重复 URL

第 1 步：创建一个新的 GA 视图，以便您可以在将其应用于日常视图之前测试和验证此修复是否适用于您

第 2 步：使用此正则表达式创建一个新的高级过滤器（下面的屏幕截图），该过滤器对您的数据执行此操作：

> 如果一个 URL 在 URL 的末尾没有查询参数并且是一个独立的 URL 并且在 URL 的末尾没有斜杠，那么在 URL 的末尾添加一个斜杠

这是要测试的高级规则的正则表达式：

```
^(/[a-z0–9/_\-]*[^/])$ 
```

完成后，保存您的过滤器。

第 3 步：验证此新过滤器是否按预期工作。

要测试并验证它是否有效，请按照以下步骤操作：您可以使用 Google Analytics 中的实时报告来：

在一个浏览器选项卡中，转到您要测试的站点版本（例如 yourdomain.com/new-in） 在第二个附加浏览器选项卡中，转到带有斜杠的同一 URL 的版本（例如 yourdomain.com /new-in/) 转到 Google Analytics > Real Time Report > Top Active Pages，您应该有 2 个来自前面步骤的活动页面！

# c# - c# - 将类名、类方法和类属性写入文本文件

> ID：11608774
> 
> 赞同：0
> 
> 时间：2012-07-23T08:20:36.110
> 
> 标签：c#, asp.net, class, properties, methods

就像在标题中一样。如何获取类名、类属性和类方法？有一个简单的方法吗？我正在尝试构建绘制（使用乳胶）类图的程序 - 这就是我需要类名、属性和方法的原因。我必须使用正则表达式来解析类文件并获取所有内容（属性、方法）还是有更简单的方法？;)

也许你有一些建议如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:30:50.037

反射。从一个`Type`实例开始，无论是从`typeof(T)`还是从`obj.GetType()`- 它为您提供运行时类型所需的一切，例如：

```
Console.WriteLine(type.FullName);
foreach(var prop in type.GetProperties()) {
    Console.WriteLine("{0}, {1}", prop.Name, prop.PropertyType.Name);
} 
```

事件、字段、构造函数、方法等也有类似的方法。

# ruby-on-rails-3 - 如何在rails控制台中用属性值替换null

> ID：11608776
> 
> 赞同：0
> 
> 时间：2012-07-23T08:20:46.267
> 
> 标签：ruby-on-rails-3, redmine-plugins, rails-console

我正在编写一个 redmine 插件，其中 model 是`Allissue`. 我添加了两个属性`project_name`和`create_date`. 首先，我添加了列`project_name`并为它们分配了一些值。其次，我添加了一个`created_date`值变为空的列，如图所示。![在此处输入图像描述](../Images/0230468459d08a6a593ac9a8dc1581c8.png)

我想用整数值替换 null 。这是一个非常基本的问题，但我不知道，因为我是新手。你能建议我添加值的语法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:49:13.730

为了自动发生这种情况，请在您的模型中添加如下内容：

```
class Allissue
  ...
  before_save do |a|
    a.create_date = Time.now # or whatever you want it to be
  end
  ...
end 
```

或者手动，你会做（对于所有多个对象）：

```
Allissue.all.each{|a| a.create_date = Time.now; a.save} 
```

或（对于单个对象）：

```
a = Allissue.find(1)
a.create_date = Time.now
a.save 
```

我希望这有帮助。

# javascript - Openlayers 在编辑 WFS 后破坏几何图形

> ID：11608779
> 
> 赞同：0
> 
> 时间：2012-07-23T08:20:56.387
> 
> 标签：javascript, openlayers

我在编辑 WFS 图层时遇到问题。编辑对象后，我保存了一个对象，但是出了点问题。保存对象的几何图形被破坏后。尝试在 GEoservers 图层预览中观看图层，但找不到已编辑的对象。

有我的代码。

```
if(counter==0){
                    if(ppp==null){
                                if (edit==null){
                                    edit = new OpenLayers.Control.ModifyFeature(myVecLayer);
                                    map.addControl(edit);
                                    ppp=map.getControlsByClass("OpenLayers.Control.ModifyFeature");
                                }
                            }

                                map.addLayers([myVecLayer]);
                                Ffilter = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.EQUAL_TO,
                                        property: 'id',
                                        value: '170',
                                    })
                                myVecLayer.filter=Ffilter;
                                myVecLayer.refresh({force: true});
                            for(var i=0;i<ppp.length;i++){
                                ppp[i].activate();
                            }
                            counter=1;

                }
                else {
                    //FS.deactivate();
                    SS.save();
                    //myVecLayer.destroyFeatures(); 
                    map.removeLayer(myVecLayer); 
                    for(var i=0;i<ppp.length;i++){
                                ppp[i].deactivate();
                            }
                    //ppp.deactivate();
                    counter=0;
                } 
```

和 WFS

```
SS=new OpenLayers.Strategy.Save();
osm = new OpenLayers.Layer.OSM( "OpenStreet Maps");
//WFS
                            var myStyle = OpenLayers.Util.extend({},
                                OpenLayers.Feature.Vector.style['default']);
                            myStyle.strokeWidth = 1.5;
                            myStyle.strokeColor = "#ff0000";
                            myStyle.fillOpacity = 0.1;
                            OpenLayers.ProxyHost = "proxy.cgi?url=";
                            var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
                            renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;           
                            myVecLayer = new OpenLayers.Layer.Vector("Редактируемый участок", {
                                strategies: [new OpenLayers.Strategy.BBOX(), SS],
                                style: myStyle,
                                protocol: new OpenLayers.Protocol.WFS({
                                    version: "1.0.0",
                                    srsName:"EPSG:900913",
                                    url: "http://localhost:8080/geoserver/wfs",
                                    featureType: "filedata",
                                    featureNS: "http://www.opengeospatial.net/cite",
                                    defaultFilter : filter
                                }),
                                renderers: renderer
                            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:07:52.147

这是地理服务器上的图层选项的问题。为了一切正常，需要使用“保留本机 SRS”。

# wcf - 在 WCF 服务中启用 HTTP 上下文

> ID：11608780
> 
> 赞同：1
> 
> 时间：2012-07-23T08:20:57.187
> 
> 标签：wcf

我加了

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

但它给了我一个错误”

```
The service cannot be activated because it requires ASP.NET compatibility. ASP.NET compatibility is not enabled for this application 
```

似乎 WCF 服务没有与之相关的 HTTP 上下文？请帮忙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T08:24:25.280

它查看了以下链接 [http://msdn.microsoft.com/en-us/library/aa702682.aspx](http://msdn.microsoft.com/en-us/library/aa702682.aspx)

并确保你在你的网络配置中添加了这个标签

# php - 将 url 转换为可点击的链接 - domain.com/foo/bar

> ID：11608788
> 
> 赞同：0
> 
> 时间：2012-07-23T08:21:20.600
> 
> 标签：php, regex

我有一个包含一些链接的字符串。我需要将它们转换为可点击的链接，但问题是其中很多不是以 http 或 www 开头的。我怎样才能转换它们而不会无意中影响字符串的其余部分？

示例字符串： http: [//pastebin.com/bMe9pGbv](http://pastebin.com/bMe9pGbv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:07:15.923

首先，我们需要将所有链接与文本隔离开来。我们假设链接没有空格，所以我们使用空格作为分隔符创建一个带[爆炸的数组：](http://php.net/manual/en/function.explode.php)

```
$rows = explode(' ', $text); 
```

然后，从每一行中，我们识别链接，添加`http://`（如果缺少）并添加`<a>`标签：

```
foreach ($rows AS $key => $row) {
    if (preg_match("@^[^\.\n]+\.[^ \n]+$@", $row)) {
        if (!preg_match('@^http://@', $row)) {
            $row = 'http://' . $row;
        }

        $rows[$key] = '<a href="'.$row.'">'.$row.'</a>';
    }
} 
```

最后，我们重建文本，使用[implode](http://php.net/manual/en/function.implode.php)和 the`space`作为分隔符：

```
$text = implode(' ', $rows); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T08:36:30.533

这是我检测实际 URL（从方案开始）并将其替换为`<a>`.

```
<?php
echo preg_replace(
    "/(http:\/\/|ftp:\/\/|https:\/\/)([^\s,]*)/i",
    "<a href=\"$1$2\">$1$2</a>",
    $input
); 
```

检测不以方案开头的任意可点击链接需要更复杂的正则表达式和更多的猜测。

# c++ - C++ ifstream 和“变音符号”

> ID：11608790
> 
> 赞同：3
> 
> 时间：2012-07-23T08:21:24.430
> 
> 标签：c++, ifstream

我在 C++ 中遇到“变音符号”（字母 ä、ü、ö、...）和 ifstream 的问题。

我使用 curl 下载一个 html 页面，并使用 ifstream 逐行读取下载的文件并从中解析出一些数据。这一切顺利，直到我有如下一行：

```
te="Olimpija Laibach - Tromsö";
te="Burghausen - Münster"; 
```

我的代码解析这些行并将其输出如下：

```
Olimpija Laibach vs. Troms?
Burghausen vs. M?nster 
```

像直接从代码中输出变音符号这样的事情：

```
cout << "öäü" << endl; // This works fine 
```

我的代码看起来有点像这样：

```
ifstream fin("file");

while(!(fin.eof())) {
    getline(fin, line, '\n');
    int pos = line.find("te=");
    if(pos >= 0) {
         pos = line.find(" - ");
         string team1 = line.substr(4,pos-4);
         string team2 = line.substr(pos+3, line.length()-pos-6);
         cout << team1 << " vs. " << team2 << endl;
   }
} 
```

**编辑：**奇怪的是相同的代码（唯一改变的是源和分隔符）适用于另一个文本输入文件（相同的过程：使用 curl 下载，使用 ifstream 读取）。解析和输出如下一行是没有问题的：

```
<span id="...">Fernwärme Vienna</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:42:24.773

嵌入的语言环境是`fin`什么？在您显示的代码中，它将是全局语言环境，如果您没有重置它，它就是`"C"`.

如果你在盎格鲁-撒克逊世界之外的任何地方——你所展示的字符串表明你是——你首先要做的事情之一 `main`应该是

```
std::locale::global( std::locale( "" ) ); 
```

这会将全局区域设置（以及随后打开的任何流的默认区域设置）设置为在周围环境中使用的区域设置。（形式上，对于实现定义的本地环境，但在实践中，对于用户正在使用的任何东西。）在`"C"`语言环境中，编码几乎总是 ASCII；ASCII 不识别元音变音符号，根据标准，输入中的非法编码应替换为实现定义的字符（IIRC——我已经有一段时间没有真正重读本节了）。当然，在输出中，您不应该有任何未知字符，因此实现不会检查它们，然后通过。

由于`std::cin`等在您有机会设置全局语言环境之前已打开，因此您必须专门为它们灌输`std::locale( "" )`。

如果这不起作用，您可能必须找到一些特定的语言环境来使用。

# ruby-on-rails - 使用 gem 'rails_admin' 时如何更改字段的答案？

> ID：11608793
> 
> 赞同：0
> 
> 时间：2012-07-23T08:21:30.477
> 
> 标签：ruby-on-rails, ruby, sum, field, rails-admin

在我的项目中，我使用 RailsAdmin 并有两个模型，Product 和 Product_rate。

```
has_many :product_rates
belongs_to :product 
```

rails_admin.rb 中的代码是

```
config.model Product do
  ....
  list do
    field :product_rates
  end 
```

我想在“字段：product_rates”中显示 product_rates 的排名。product_rate 模型如下所示。

```
class ProductRate < ActiveRecord::Base
  belongs_to :product
  attr_accessible :rank, :product_id
end 
```

最好的结果可以显示排名和。例如：产品 XX 的排名是 0,1,0,2。我想在 product_rates 中显示排名和，即 3。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:38:57.867

您如何在模型中添加一个`total_rank`方法`Product`并使用它。

```
class Product < ActiveRecord::Base
  has_many :product_rates

  def total_rank
    product_rates.map(&:rank).inject(:+)
  end
end 
```

然后在你的`initializers/rails_admin.rb`：

```
config.model Product do
  ....
  list do
    field :total_rank do
      label "Rating"
    end
  end 
```

也许这并不能完全回答你的问题。[根据文档](https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL)，也许您想尝试这样的事情..

```
 list do
   field :product_rating do
     formatted_value do # used in form views
       value.map(&:rank).inject(:+)  # I'm assuming the value is an array of products
     end
   end
 end 
```

# c# - 在 createuserwizard 中查找验证码控件

> ID：11608802
> 
> 赞同：0
> 
> 时间：2012-07-23T08:22:10.500
> 
> 标签：c#, asp.net, captcha, createuserwizard

我在 CreateUserWizard 中集成了一个 Captcha 控件。

[我在这里从这个网站获得了验证码控制示例代码](http://archive.aspsnippets.com/post/2009/04/03/How-to-implement-Captcha-in-ASPNet.aspx)

因为我想使用 if.. else.. 语句对基于验证码的用户输入进行验证。但是，当我尝试从 createuserwizard 获取验证码控件时发生错误。

这是错误：

```
The name 'Captcha1' does not exist in the current context 
```

我曾尝试将此控件作为文本框、图像、控件，但没有成功。

这是代码：

```
 <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
              <ContentTemplate>

 <tr>
                            <td class="style4">Answer:</td>
                            <td>
                                <cc1:CaptchaControl ID="Captcha1" runat="server"
                                 CaptchaBackgroundNoise="Medium" CaptchaLength="5"
                                 CaptchaHeight="55" CaptchaWidth="200"
                                 CaptchaLineNoise="None" CaptchaMinTimeout="5"
                                 CaptchaMaxTimeout="240" FontColor = "#FF33CC" CaptchaFontWarping="Medium" />

                                 <asp:TextBox runat="server" ID="txtCaptcha" />

                            </td>
                        </tr>
 </ContentTemplate>

              </asp:CreateUserWizardStep> 
```

后面的代码：

```
protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        //Control Captcha1 = (Control)CreateUserWizardStep1.ContentTemplateContainer.FindControl("Captcha1");
        TextBox txtCaptcha = (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("txtCaptcha");

            Captcha1.ValidateCaptcha(txtCaptcha.Text.Trim());//error occurred here

        if (Captcha1.UserValidated)//error occurred here
        {

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:38:19.827

试试这个在 CreateUserWizard 中找到控件

文本框 txtCaptcha = (TextBox)CreateUserWizardStep1.CreateUserStep.ContentTemplateContainer.FindControl("txtCaptcha");

# java - 在 JUnit 故障跟踪中显示错误

> ID：11608808
> 
> 赞同：1
> 
> 时间：2012-07-23T08:22:21.647
> 
> 标签：java, selenium, junit, webdriver

我在 Eclipse 中使用 Selenium Web Driver 和 JUnit。我需要创建简单的检查页面上是否存在某些文本 - 如果是，则我需要生成错误。我希望在 JUnit 故障跟踪中显示此错误。这是我的代码：

```
public class Check  {
@Rule
public ErrorCollector errCollector = new ErrorCollector();

@FindBy(tagName="body")
@CacheLookup
private WebElement titl;
@FindBy(partialLinkText="Exception")
@CacheLookup
private WebElement excep;

public void check_false(String t, String r) {
        try {
             String bodyText = titl.getText();
             Assert.assertFalse("Exception found", bodyText.contains(t)); }
         catch (AssertionError e) {
             System.err.println(r + ": " + e.getMessage());
             System.out.println(excep.getText());
             errCollector.addError(e);   
            }    
          } 
```

如果我得到错误，它会显示在 Eclipse 控制台中，但测试是否在 JUnit 中显示为没有错误并且没有显示异常消息。我怎样才能正确检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:23:58.560

我用

> AssertJUnit.assertFalse("发现异常", bodyText.contains(t));

它来自[http://testng.org/doc/index.html](http://testng.org/doc/index.html) 参见[http://testng.org/javadoc/org/testng/AssertJUnit.html](http://testng.org/javadoc/org/testng/AssertJUnit.html)

当我的测试失败时，在eclipse中，在junit窗口中我得到了stackstrace。从未尝试收集错误。它会抛出一个

> 断言失败错误

如果测试失败但如果你抓住它，我不知道堆栈跟踪是否会在 JUnit 窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:56:53.440

这可能不是你所追求的，在这种情况下我很抱歉，但你可以简单地[失败](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#fail%28java.lang.String%29)并提供一个可选消息来说明原因。

```
public void checkText(String actual, String expected){
  try{
    if(!expected.equals(actuals){
      fail("Expected : [ " expected + " ] , actual [" + actual + "]"
  }catch(SomeOtherException soe){
      fail(soe.getMessage());
  }
 } 
```

# jakarta-ee - servlet 中的配置 og log4j：“FileNotFoundException：log4j.properties”

> ID：11608809
> 
> 赞同：0
> 
> 时间：2012-07-23T08:22:21.863
> 
> 标签：jakarta-ee, tomcat, servlets, log4j

我已经开发了一个 servlet 应用程序并想要配置 log4j，我已经通过使用 log4j api 完成了，下面是我的 log4j 属性..

```
### direct log messages to stdout ###
#log4j.appender.stdout=org.apache.log4j.ConsoleAppender
#log4j.appender.stdout.Target=System.out
#log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
#log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1} - %m%n

### direct messages to file or.log ###
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=C:/logs/sdfghjkloiuyyttt.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1} - %m%n
log4j.appender.file.append=true

### set log levels - for more verbose logging change 'info' to 'debug' ##
log4j.rootCategory=ALL, file
log4j.logger.com.saral=debug
log4j.logger.org.eclipse=debug 
```

应用程序的 web.xml 是 ..

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>FirstDemo</display-name>

  <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.properties</param-value>
</context-param>

  <servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>com.saral.MyServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/helloServlet</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>home.html</welcome-file>
  </welcome-file-list>

  <listener>
  <listener-class>com.saral.SessionCounter</listener-class>
</listener>

</web-app> 
```

我使用 Log4j 的主要课程是..

```
package com.saral;

import java.io.IOException;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class First
 */
//@WebServlet("/First")
public class MyServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;
    static final Logger logger = Logger.getLogger(MyServlet.class);

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PropertyConfigurator.configure("log4j.properties");
        logger.info("before---->");

        // TODO Auto-generated method stub
        String name=request.getParameter("txtName");
        response.setContentType("text/html");
        PrintWriter out=response.getWriter();
        out.println("Hello,"+name);
        out.println("<br> this output is generated by a simple servlet.");
        out.println("Total Number of users logged in--->"+request.getSession().getServletContext().getAttribute("sessionCount"));
        out.close();
        }} 
```

但我得到以下异常..

```
log4j:ERROR Ignoring configuration file [log4j.properties].
log4j:ERROR Could not read configuration file [log4j.properties].
java.io.FileNotFoundException: log4j.properties (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:306)
    at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:324)
    at com.saral.MyServlet.doGet(MyServlet.java:29)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
log4j:ERROR Ignoring configuration file [log4j.properties].
log4j:ERROR Could not read configuration file [log4j.properties]. 
```

请告知如何克服...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:38:18.613

据我所知，使用能力

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.properties</param-value>
</context-param> 
```

是 Spring 的[Log4jWebConfigurer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/util/Log4jWebConfigurer.html)的一部分，除非你有类似的东西，否则不会使用它

```
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

在您的 web.xml 中。没有它，log4j 只会尝试`log4j.properties`从您的类路径中读取（即，如果您将其放入`/WEB-INF/classes/log4j.properties`，那么 log4j 会自动拾取它，而不需要 spring 侦听器（它还带有警告，除非 WAR 是由您的容器自动爆炸）。

# magento - Magento：使用正则表达式将多个 URL（从）重写为一个目标（到）？

> ID：11608810
> 
> 赞同：1
> 
> 时间：2012-07-23T08:22:25.330
> 
> 标签：magento, url-rewriting

我想使用正则表达式重写我的一些 URL。这是我在模块的 config.xml 中重写的东西。

```
<rewrite>
    <My_Module>
        <from><![CDATA[#^/(abc)|(def)/configuration/#]]></from>
        <to>/config/configuration/</to>
        <complete>1</complete>
    </My_Module>
</rewrite> 
```

如您所见，我想要实现的是重写所有包含*abc/configuration*或*def/configuration*的 url 。这不起作用。那么如何在 Magento 中将多个 URL 添加到同一个重写中呢？我不在乎它是否使用正则表达式或在 config.xml 中的每次重写都使用一行，到目前为止，我都没有设法弄清楚。

谢谢！

**另外**：我现在使用以下方法*解决了这个问题：*

```
<from><![CDATA[#^/.+/configuration/#]]></from> 
```

这在我的案例中起到了作用:) ...我仍然对如何以第一种方式解决它感兴趣。如果有人知道，请无论如何发布！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T23:24:22.083

选择第一个或第二个这样写 /(first|second)/

下面的代码在 1.8 magento 中工作。

`$2`将被替换为曾经`(.*)`捕获的内容。

```
<config>
    <global>
        <rewrite>
            <My_Module>
                <from><![CDATA[#^/(abc|def)/configuration/(.*)#]]></from>
                <to><![CDATA[/config/configuration/$2]]></to>
                <complete>1</complete>
            </My_Module>
        </rewrite>
    </global>
<config> 
```

# scala - 在 OSGi 中创建 Akka 项目

> ID：11608811
> 
> 赞同：5
> 
> 时间：2012-07-23T08:22:30.560
> 
> 标签：scala, osgi, akka

我希望在 OSGi 容器 ( `apache-servicemix-4.4.1-fuse-06-03`) 中运行 Akka 项目，但在安装依赖库时遇到了一些麻烦。我已经安装了`akka-actor`，`config`如下：

*   `osgi:install -s mvn:com.typesafe.akka/akka-actor/2.1-SNAPSHOT`
*   `osgi:install -s mvn:com.typesafe/config/0.4.1`

但我无法安装`scala-library`（需要 v2.9.2）。我曾尝试使用创建自己的捆绑包，`maven-bundle-plugin`但无济于事，并且已经搜索了很长时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:40:17.077

如果您正在寻找快速解决方法，请使用 Scala IDE/Eclipse 中的 Scala 2.9.2 捆绑包。我为我的 Akka 2.1/Karaf POC 做到了这一点，它运行良好。如果您没有，请从[我的 lib 文件夹](https://github.com/jamie-allen/akka-osgi)中下载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:38:56.253

这是在 scala-users 组上发布后上传的：

[https://github.com/guofengzh/scala-lang-osgi](https://github.com/guofengzh/scala-lang-osgi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:46:45.367

[@ben1729 引用的scala-lang-osgi](https://github.com/guofengzh/scala-lang-osgi)的构建二进制文件现在可以在我们的 Bippo/Soluvas Nexus 存储库公共存储库中获得：http: [//nexus.bippo.co.id/nexus/content/groups/public/](http://nexus.bippo.co.id/nexus/content/groups/public/)

随意浏览我们的存储库[http://nexus.bippo.co.id/nexus/](http://nexus.bippo.co.id/nexus/)

用法：

```
<repository>
    <id>bippo-nexus-public</id>
    <url>http://nexus.bippo.co.id/nexus/content/groups/public/</url>
</repository> 
```

然后将其中一个或全部添加到您的 Maven POM 文件中：

```
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-library</artifactId>
  <version>2.9.2</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-compiler</artifactId>
  <version>2.9.2</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-dbc</artifactId>
  <version>2.9.2</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-swing</artifactId>
  <version>2.9.2</version>
</dependency> 
```

请在新版本发布时通知我，以便我可以将较新的工件重新部署到我们的仓库中。

**更新：** [Scala OSGi 2.10-M6](https://github.com/soluvas/scala-lang-osgi)现在在我们的存储库中可用：

```
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-library</artifactId>
  <version>2.10.0-M6</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-compiler</artifactId>
  <version>2.10.0-M6</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-dbc</artifactId>
  <version>2.10.0-M2</version>
</dependency>
<dependency>
  <groupId>org.scala-lang-osgi</groupId>
  <artifactId>scala-swing</artifactId>
  <version>2.10.0-M6</version>
</dependency> 
```

它可以与 Akka 一起使用，但使用**修补**过的Akka 2.1-M1（请参阅[http://www.assembla.com/spaces/akka/tickets/2367-osgi-manifest-references-2-9-2](http://www.assembla.com/spaces/akka/tickets/2367-osgi-manifest-references-2-9-2)）。

修补后的 Akka 在我们的存储库中可用：（在 Karaf URL 中）

`mvn:com.typesafe.akka/akka-actor/2.1-M1/jar/patch2`

Akka bug 总结：Akka 2.1-M1 需要 2.10-M6，它不适用于 2.9.2：

```
Error executing command: Error starting bundles:
nable to resolve 160.0: missing requirement [160.0] osgi.wiring.package; (&(osgi.wiring.package=scala.collection.convert)(version>=2.9.2)(!(version>=2.10.0))) 
```

但它目前导入了错误的包版本：

```
 scala.collection.convert;version="[2.9.2,2.10)",
    scala.concurrent.util;version="[2.9.2,2.10)",
    scala.concurrent.util.duration;version="[2.9.2,2.10)", 
```

# php - 会话超时 - 请解释一下

> ID：11608812
> 
> 赞同：0
> 
> 时间：2012-07-23T08:22:40.397
> 
> 标签：php, session, session-timeout

从我认为我从会议中了解到的情况来看，应该是这样的：

*   会话超时基于 php.ini 中的设置，比如说 30 分钟
*   如果用户继续浏览并且我们更新，假设 $_SESSION['last_activity']=time();，那么会话将在最后一次活动后 30 分钟内处于活动状态

但我看到的是：

*   用户登录并启动会话
*   用户继续浏览
*   30分钟后，用户被踢出并生气，必须再次登录

这是服务器配置错误吗？为什么即使用户保持活动状态它也会被破坏？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:25:37.247

确保您正在调用：

```
session_start(); 
```

在访问者访问的每个页面上。这将重置会话时钟。

# ios - 关于APNS使用的问题

> ID：11608815
> 
> 赞同：0
> 
> 时间：2012-07-23T08:22:43.440
> 
> 标签：ios, cordova, apple-push-notifications

我们正在构建 phonegap 应用程序，我们希望向我们的用户发送通知。

发送通知的费用是多少？我们只需要开发者许可证还是其他东西？

另外，我们是否必须在应用商店中发布应用才能使用 APNS ？（我们正在构建私人商业应用程序）

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:25:51.520

> 发送通知的费用是多少？

[零，如果您不使用Urban Airship](http://urbanairship.com/)等第三方服务

> 我们只需要开发者许可证还是其他东西？

是的，没有许可证您不能发送任何推送通知

> 另外，我们是否必须在应用商店中发布应用才能使用 APNS ？

不

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T19:22:14.440

我想补充上面提供的答案。并非所有第三方服务都会向您收取发送推送通知的费用。[PushWoosh](http://pushwoosh.com/)是一项免费服务，对发送的通知数量没有限制，并且成本保持为零，除非您需要一些附加功能（您可能不需要）。

# ruby-on-rails - 想使用 nokogiri 解析 ruby on rails 中的 href

> ID：11608820
> 
> 赞同：2
> 
> 时间：2012-07-23T08:23:14.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html-parsing, nokogiri

我[`nokogiri`](http://nokogiri.org/)用作我的 HTML 解析器。

```
<html>
<body>
<form>
<table>
    <tr><td>Some Text</td></tr>
    <tr>
        <td colspan="2" align="center">
            <br />
            <a href="TransportRoom?servlet=CaseSearch.jsp&amp;advancedSearch=Advanced">
                Advanced Search
            </a>
            <br />
            &nbsp;
        </td>
    </tr>
</table>
</form>
</body>
</html> 
```

在这个 html 代码中，我想解析“高级搜索”链接。此 html 保存在名为的变量中`doc1`

谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:40:42.010

应该很简单

```
doc = Nokogiri::HTML(doc1)
href = doc.css("a").first.attr('href') 
```

这就是你想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T06:18:42.003

第一个答案对我有用，但如果有 n 个链接，我们可以通过这种方式操作它

```
 html = Nokogiri::HTML(doc1)

 html.css("a").each do |element|
      if (element.text.strip == 'Advanced Search')
        advance_search_link = element.attr('href')
      end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T16:55:14.870

我会做如下：

```
require 'nokogiri'

@doc = Nokogiri.HTML <<-eotl
<html>
<body>
<form>
<table>
    <tr><td>Some Text</td></tr>
    <tr>
        <td colspan="2" align="center">
            <br />
            <a href="TransportRoom?servlet=CaseSearch.jsp&amp;advancedSearch=Advanced">
                Advanced Search
            </a>
            <br />
            &nbsp;
        </td>
    </tr>
</table>
</form>
</body>
</html>
eotl

@doc.at_xpath("//a[normalize-space(.)='Advanced Search']")['href']
# => "TransportRoom?servlet=CaseSearch.jsp&advancedSearch=Advanced" 
```

# java - 带有 FileReader 的 SwingWorker

> ID：11608822
> 
> 赞同：0
> 
> 时间：2012-07-23T08:23:16.670
> 
> 标签：java, netbeans, swingworker

我有关于使用 FileReader 应用 SwingWorker 的问题，我的观点是我需要用 SwingWorker 实现 FileReader 以使我的 UI 显示文件中的文本，这是我的代码

```
class Read1 extends SwingWorker<String,String>{
    protected Void doInBackground() throws Exception{
        FileReader read = new FileReader("msg.txt");
        BufferedReader in = new BufferedReader(read);
        String s;
        s=in.readLine();
        System.out.println(s);
        return s;
    }
   protected void done()
    {
      try{
       String show;
       show=get();
       textArea.append(show);}catch(Exception e){}}

 public static void main(String args[]) {
   Read1 r = new Form().new Read1();
   r.execute(); 
```

但是它不会在 UI 文本区域上附加任何内容

有人有解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:40:12.253

Works just fine for me:

```
public class Reader extends SwingWorker<List<String>, String> {

    protected List<String> doInBackground() throws Exception {

        ArrayList<String> lstText = new ArrayList<String>(25);

        BufferedReader in = null;
        try {

        FileReader read = new FileReader("Scanner.txt");
        in = new BufferedReader(read);
        String s = null;

        while ((s = in.readLine()) != null) {

            lstText.add(s);
            publish(s);

        }

        } finally {

            try {

                in.close();

            } catch (Exception e) {
            }
        }

        return lstText;

    }

    @Override
    protected void process(List<String> chunks) {

        for (String text : chunks) {

            fldText.append(text + "\n");

        }

    }

    @Override
    protected void done() {
    }
} 
```

# c# - 如何在 C# 中编译正则表达式

> ID：11608823
> 
> 赞同：2
> 
> 时间：2012-07-23T08:23:21.740
> 
> 标签：c#, regex

我有如下所示的代码，用于检测字符串是否与正则表达式匹配，两者都作为此方法的参数发送。

```
private bool Set(string stream, string inputdata) 
{

    bool retval = Regex.IsMatch(inputdata, stream, RegexOptions.IgnoreCase);
    return retval;
} 
```

我已经读过缓存和编译表达式将使正则表达式比较更快，我有一个下面显示的此类代码示例，但我不知道如何在`Set()`上面的原始方法中修改代码以利用汇编。

我将如何修改`Set()`方法以应用下面显示的代码？

```
static Dictionary<string, Regex> regexCache = new Dictionary<string, Regex>();

private Regex BuildRegex(string pattern)
{
    Regex exp;
    if (!regexCache.TryGetValue(pattern, out exp))
    {
        var newDict = new Dictionary<string, Regex>(regexCache);
        exp = new Regex(pattern, RegexOptions.Compiled | RegexOptions.IgnoreCase);
        newDict.Add(pattern, exp);
        regexCache = newDict;
     }

     return exp;
 } 
```

而不是`Regex.IsMatch`，我使用`exp.IsMatch`，但这是一个私有变量，所以我不知道如何继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:27:53.487

```
private bool Set(string stream, string inputdata) 
{
    var regex = BuildRegex(stream);
    bool retval = regex.IsMatch(inputdata);
    return retval;
}

static Dictionary<string, Regex> regexCache = new Dictionary<string, Regex>();

private static Regex BuildRegex(string pattern)
{
    Regex exp;

    if (!regexCache.TryGetValue(pattern, out exp))
    {
        exp = new Regex(pattern, RegexOptions.Compiled | RegexOptions.IgnoreCase);
        regexCache.Add(pattern, exp);
    }

    return exp;
} 
```

# asp.net - 我想要正则表达式来验证十进制数并且不允许值 0.00

> ID：11608824
> 
> 赞同：3
> 
> 时间：2012-07-23T08:23:40.123
> 
> 标签：asp.net, validation, textbox

我正在使用正则表达式来验证十进制或数字 (18,3) 数字，它确实不允许用户输入超过 1 个小数点以及所有这些

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ErrorMessage="Invalid" ControlToValidate="txtqty"  ValidationExpression="^[-+]?[0-9]*\.?[0-9]*([?[0-9]+)?$" ValidationGroup="save"></asp:RegularExpressionValidator> 
```

但我也想禁止用户输入任何等于 0 的值，如下所示：

0.00, 0000.00, 00.0, 0...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:44:12.400

我认为问题在于您正在使用一个验证器来执行多个任务

划分你的问题：

*   验证格式

*   验证特定值

使用一个简单`CompareValidator`的除了你的`RegularExpressionValidator`

```
<asp:CompareValidator ErrorMessage="Value must be grater than 0" ControlToValidate="TextBox1"
    runat="server" Operator="NotEqual" Type="Double" ValueToCompare="0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:05:14.840

"使用以下正则表达式：

```
^\d[1-9]*(\.\d+)|([0-9])$ 
```

它不允许以下模式的值：

```
00.00,0123.78 i.e value before decimal followed by 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:42:48.827

你可以用这个

```
^([1-9][0-9]*\.[0-9]+)|([0-9]+)$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:18:15.943

```
<asp:RangeValidator ID="RangeValidator1" runat="server" ErrorMessage="Invalid" ControlToValidate="txtqty" MaximumValue="99999" MinimumValue="1.0000" ValidationGroup="save"></asp:RangeValidator> 
```

范围验证器工作

# c++ - 我在 netbeans 上得到这些随机段错误

> ID：11608826
> 
> 赞同：0
> 
> 时间：2012-07-23T08:23:43.610
> 
> 标签：c++, netbeans, vector

我在做 c++，代码给了我这些错误：

```
 new size of the done 64
   getting next item to do (0x90b9c0 0x90bab0 0x90be40 0)
   vector wait size = 0
   running size = 1
   done size = 64
   done this align #27# #26# Gorilla_gorilla_2
   setting the done tuple to 1 to get them next
   new size of the done 65
   getting next item to do (0xbff3897200000000 0xbfda1b75f84c0030 0x30 17)
   vector wait size = 18446744073709551615
   running size = 1
   done size = 65
   getting next item to do (0xbfdcc288867fc50b 0x31 0x1 1)
   /usr/local/netbeans-7.2rc1/ide/bin/nativeexecution/dorun.sh: line 33:  8234   
   Segmentation     
   fault      (core dumped) sh "${SHFILE}" 
```

而且我想知道如何获得有关段错误的更多详细信息，例如导致它的线路，以修复它，谢谢。

编辑：

```
 bool tuple_compare(boost::tuple< ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple)
{

  if( boost::get< 3 >( tuple) == true)
 {
          return true;
 }
  else
  {
      return false;
  }
 }

void threaded_function(Model_factory &mf, ppa::Node *root)
 {
  try {

  while(true)
  {
      boost::mutex::scoped_lock lock(result_mutex);

      if(wait.empty())
      {

          lock.unlock();
          break;
      }
      else {
          lock.unlock();
          lock.lock();
          if(!running_jobs.empty())
          {
              cout << "vector wait size = " << wait.size() << endl;
              cout << "running size = " << running_jobs.size() << endl;
              cout << "done size = " << done.size() << endl;
              boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple = running_jobs.back();
              running_jobs.pop_back();
              lock.unlock();
              ppa::Node *father = boost::get<0>(tuple);
              ppa::Node *first_son = boost::get<1>(tuple);
              ppa::Node *second_son = boost::get<2>(tuple);
              bool flag = boost::get<3>(tuple);
              father->start_alignment_new(&mf);
              lock.lock();
              cout << "done this align " << father->get_name() << " " << first_son->get_name() << " " << second_son->get_name()
                      << endl;
              cout << "setting the done tuple to 1 to get them next" << endl;
              done.push_back(tuple);
              cout << "new size of the done " << done.size() << endl;
              lock.unlock();

          }
          else {
              lock.unlock();
              lock.lock();
              cout << "getting next item to do " << wait.back() << endl;
              boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> run = wait.back();
              running_jobs.push_back(run);
              wait.pop_back();
              lock.unlock();
          }
      }
    }
  }
  catch (boost::lock_error& le)
  {
      cout << "error this " << le.what() << endl;
  }
  } 
```

主要的：

```
 int main(int argc, char *argv[])
 {
clock_t t_start=clock();
ppa::Node* parent;
ppa::Node* left;
ppa::Node* rigth;
ppa::Node* check_root;
/* 
```

...

```
boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool>  tuple = dups.back();
    ppa::Node *n = boost::get<0>(tuple);
     //cout << "creating waiting thread" << endl;
   // g.create_thread( boost::bind(wait_function));
    cout << "creating other threads" << endl;
 for ( int i = 0; i < 5; ++i )
 {
   cout << "making  thread " << i << endl;
    g.create_thread( boost::bind( threaded_function, boost::ref(mf), boost::ref(n) ));
}

 cout << g.size() << endl ;
// wait for them
// sleep(15);
 g.join_all(); 
```

我很确定它来自我添加的新部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:06:30.090

代码不好，锁和解锁太多，互斥锁有锁方法不需要使用共享lock.lock()

# powershell - 无法调用此函数，因为当前主机没有实现它

> ID：11608833
> 
> 赞同：2
> 
> 时间：2012-07-23T08:24:15.787
> 
> 标签：powershell

我正在尝试从 ac# 程序执行 PowerShell 命令并遇到“无法调用函数，因为当前主机没有实现它”异常。

![截屏](../Images/0fb72f7fb890191974d5040f9fd86ea8.png)

我正在尝试从 ac# 程序执行 PowerShell 命令并遇到“无法调用函数，因为当前主机没有实现它”异常。

这是我正在执行的……</p>

```
public string RunScript(string cmd)
{
var initial = InitialSessionState.CreateDefault();
initial.ImportPSModule(new[] { @"C:\Intellitrace\Microsoft.VisualStudio.IntelliTrace.PowerShell.dll" });
var runspace = RunspaceFactory.CreateRunspace(initial);
runspace.Open();
RunspaceInvoke invoker = new RunspaceInvoke(runspace);

// results =
invoker.Invoke(
@"Start-IntelliTraceCollection ""DefaultAppPool"" C:\Intellitrace\collection_plan.ASP.NET.trace.xml C:\IntellitraceLogs"); 
```

命令 Start-IntelliTraceCollection 在 IIS 检测期间使用 Cmdlet.Write* 写入详细日志，我猜这是导致异常的 write-host 的工作方式。这个链接在这里，[如何通过自动化运行 PowerShell 脚本而不遇到主机问题](https://stackoverflow.com/questions/2656610/how-to-run-powershell-scripts-via-automation-without-running-into-host-issues)，似乎建议创建一个写入主机函数并将其注入运行空间或在应用程序中实现 powershell 托管接口。任何关于如何做到这一点的代码示例都会非常有帮助。

我在这里提到了一个类似的问题[Running a powershell command in C# errors with, "Cannot invoke this function because the current host does not implement it"](https://stackoverflow.com/questions/4219095/running-a-powershell-command-in-c-sharp-errors-with-cannot-invoke-this-functio)这建议使用`-Confirm:$false`-`Force`但我有兴趣看看如何通过实现 PSHost 来解决这个问题, PSHostUserInterface 和 PSHostRawUserInterface。如果有人可以提供有关如何完成此操作的代码示例，那将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:03:40.807

您在创建自定义主机（在 PSHostUserInterface 接口中）时提供实现的方法之一是

```
 Public Sub WriteVerboseLine(message As String) 
```

由于您没有提供主机（它反过来可以提供 PSHostUserInterface），所以您没有告诉它如何处理`write-verbose`呼叫。

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:39:01.233

使用“write-host”会导致我出现这个错误。只需直接在 qoutes 中输入您想要的任何内容，而不是“write-host”即可为我修复它。

例如：而不是

```
write-host 'ERROR! There is no free space for the selected category.' 
```

我用

```
"ERROR! There is no free space for the selected category." 
```

注意：我的 senario 正在从 c# 的文本文件中调用 powershell 脚本

# php - php-sql 对同一类别的数据进行分组

> ID：11608834
> 
> 赞同：0
> 
> 时间：2012-07-23T08:24:20.337
> 
> 标签：php, sql, categories

如何将我的提取行打印到数据组中？例如，我的数据库中有这些

```
title       category
one         number
two         number
three       number
a           letter
b           letter
c           letter 
```

我想把它打印在另一张桌子上。

```
table1      table2
number      letter
one         a
two         b
three       c 
```

这是我尝试过的。

```
$select = "SELECT * FROM `table` ORDER BY `category`";
$result = mysql_query($select);

$current_cat = null;

while ($rows = mysql_fetch_array($result)) 
    { 
        if ($rows["category"] != $current_cat) 
                    {
                        $current_cat = $rows["category"];
                        echo "<p>$current_cat</p>";
                    }
        echo"$rows[title]";
} 
```

这些代码的输出是这样的

```
number  
one
two
three

letter
a
b
c 
```

但话又说回来，我希望它在单独的表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:11:36.497

您可以添加一个 if 语句来测试 $current_cat 是否等于前面的循环 $current_cat。通过添加一个新变量 $last_cat 来做到这一点，在 while 循环结束时将其设置为等于当前迭代 $current_cat。这是一个例子

```
 $select = "SELECT * FROM `table` ORDER BY `category`";
    $result = mysql_query($select);

    $current_cat = null;
    $last_cat = null;

    while ($rows = mysql_fetch_array($result)) { 

            if ($current_cat == null) {
        // Create a table with an id name of the first table
        echo "<table id='" . $rows["category"] . "'>";
// Write the first row of the table - Category Title
echo "<tr class='categoryTitle'><td>" . $rows["category"] . "</td></tr>";
        }

    // Set the $current_cat to current loop category value
         $current_cat = $rows["category"];

    if ($last_cat != null) {
            if ($current_cat != $last_cat) {
            // Close table from previous $current_cat
        echo "</table>";
        // Create new table with id name of the category
        echo "<table id='" . $rows["category"] . "'>";
// Write the first row of the table - Category Title
echo "<tr class='categoryTitle'><td>" . $rows["category"] . "</td></tr>";
        }
    }

                            }
// Write new row in table with the value of the title
                echo "<tr><td>" . $rows[title] . "</td></tr>";

    // set the $last_cat to the value of $current_cat at the end of the loop
    $last_cat = $current_cat;
    } 

    // Close the last table after while loop ends
    echo "</table>"; 
```

这将允许您根据类别名称创建单独的表格，无论您有多少类别，并允许您根据类别名称设置表格的样式。

# c# - 文件被另一个进程使用：如何解决此错误？

> ID：11608837
> 
> 赞同：3
> 
> 时间：2012-07-23T08:24:32.277
> 
> 标签：c#

我正在尝试打开文件，但收到：

该进程无法访问该文件，因为它正被另一个进程使用。该文件是一个 XML 文档。任何人都可以帮忙吗？

```
 string activeDirectory = @"X:\SubGraph\";
  string[] files = Directory.GetFiles(activeDirectory);
  foreach (string fileName in files){
  FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:30:06.277

使用文件后，您必须关闭它，我认为：

```
foreach (string fileName in files)
{
    FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read);
    //your code 
    file.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:30:40.303

如果您在某种循环中使用这段代码，您需要在每次完成循环之前关闭 FileStream。

```
file.Close(); 
```

或者像这样使用“使用”结构：

```
using (FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read))
{
    // your code goes here
    file.Close();
} 
```

此外，您最好习惯于在不再需要之后关闭所有手动创建的流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:32:57.410

在某些情况下，Windows 会锁定文件。在您的情况下可以是：

1.  另一个进程正在锁定文件。它可能是 windows 或你的 av 软件或谁知道。为了发现谁在锁定文件，您可能需要使用[wholockme](http://www.dr-hoiby.com/WhoLockMe/)或[Unlocker](http://www.emptyloop.com/unlocker/)等工具。这些工具会告诉您哪个进程正在锁定文件，甚至允许您解锁它。
2.  也许您正在锁定自己的文件。在您的代码片段中，您似乎没有关闭您正在阅读的文件（也许您可以编辑您的问题并添加所有代码）。您应该记住包括：

    文件。关闭（）；

    ... 否则文件将保持打开状态。

# objective-c - 获取 uiview 层次结构顶部的对象

> ID：11608840
> 
> 赞同：1
> 
> 时间：2012-07-23T08:25:00.357
> 
> 标签：objective-c, ipad, views

我有一个已知位置（CGPoint），我想查询它下面或包含它的对象的视图（UIView），无论是视图本身，还是其中的按钮，或者标签或任何其他实例

然后我想抓住那个对象，找出它的类型，并调用用户点击它时发生的任何方法。

我尝试在视图上调用 touchesBegan，但似乎无法创建触摸事件或 uievents……如果我错了，请纠正我。

我在想可能有一种方法可以用 hitTest 来做到这一点，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:39:36.840

命中测试会做到这一点。

如果您不希望返回某些内容，请关闭 userInteractionEnabled

```
 //Send touch down event

        //Now, this is a bit hacky. Theres no public contrustors for UITouch or UIEvent, thus calling touches*: on the view is not possible. Instead, I search the view underneath it (with Hit Test) and call actions on that. 

        //Note. You need to allow for each type of object below, for the scope of the demo, I've allowed for only UIView and UIButton.

        UIView *v = [[self view] hitTest:pointer.frame.origin withEvent:nil]; //origin is top left, point of pointer. 

        NSLog(@"%@", [v class] );

        if([v isKindOfClass:[UIButton class]]){
            selectedButton = (UIButton *)v;

        }
        else if ([v isKindOfClass:[UIView class]] && [[v backgroundColor] isEqual:[UIColor redColor]]){
            selectedView = v;
            dragLabel.text = @"You are dragging me!";
            dragPoint = pointer.frame.origin; //record this point for later. 

        }
        else {
            NSLog (@"touched but no button underneath it");
        } 
```

# antlr - ANTLR StringTemplate 在渲染模板时无限循环

> ID：11608841
> 
> 赞同：2
> 
> 时间：2012-07-23T08:25:01.350
> 
> 标签：antlr, stringtemplate

我正在使用 antlr-3.4-complete.jar 我相信它正在使用 StringTemplate 版本 3.2.1

我在树语法中有以下产品

```
functionCall 
  : ^(FUNCCALL NCName pr+=params*) ->template(n={$NCName.text},p={$pr})"<n> <p>" 
```

上面的 StringTemplate 运行正确并且正在生成正确的输出。

我有另一个使用相同语法的产品，与上面的产品非常相似

```
step  
  :  axisSpecifier nodeTest pred+=predicate* 
       ->template(a={$axisSpecifier.st},n={$nodeTest.st},pc={$pred})"<a> <n> <pc>"
  ; 
```

但是当我打印模板时，它会无限递归，堆栈如下

```
Exception in thread "main" java.lang.StackOverflowError
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080)
    at org.antlr.stringtemplate.StringTemplate.getAttributeRenderer(StringTemplate.java:1080) 
```

上述生产的生成代码如下

```
retval.st = new StringTemplate(templateLib, "<a> <n> <pc>",new STAttrMap().put("a", (axisSpecifier14!=null?axisSpecifier14.st:null)).put("n", (nodeTest15!=null?nodeTest15.st:null)).put("pc", list_pred)); 
```

`list_pred`是包含 的 StringTemplates 的列表`predicate*`。当我调试代码时，我发现就在上述行之前，各个 StringTemplates 都很好。很好，我的意思是我可以将调试器中的值读取为字符串值。但是一旦执行了上述行，即`new StringTemplate`完成，该`toString()`方法就开始失败。不仅适用于新的 StringTemplate，而且适用于 StringTemplate`list_pred`

我无法继续我的工作，因为我认为这不是我的语法问题，因为另一个具有相同结构的作品运行良好。

由于我选择的参数名称会发生​​此错误吗？

`template(a={$axisSpecifier.st},n={$nodeTest.st},pc={$pred})"<a> <n> <pc>"`

如果我将名称从`a`, `n`,更改为`pc`其他名称会有帮助吗？如我所见，我在语法中的其他地方也使用了相同的名称。

我怀疑方法

`StringTemplate.breakTemplateIntoChunks()`可能是这里的原因？因为此方法将解析模板。

熟悉 StringTemplate 内部的人可以帮我解决这个问题吗？

谢谢，问候， Vimal

**更新：** 这是我的 AST 构造的输出，这也构成了 treeGrammar 的输入。`(VARREF abc) / (STEPS (STEP child x (PRED (< (STEPS (STEP child price)) 10)))) END`

the`PRED`是谓词，也是一个`Expr`

我的 ST 的树语法如下。

```
expr  
   :  ^('<' e1=expr e2=expr) ->template(e11={$e1.st},e21={$e2.st})"\< <e11> <e21>"  
   | mainexpr -> template(mnexpr={$mainexpr.st})"<mnexpr>"  
   ;  

mainexpr  
scope  
{  
  boolean isRLP ;  
} :   
    filterExpr ('/' {$mainexpr::isRLP = true;} relativeLocationPath)?   
     -> {$mainexpr::isRLP}? template(filtr={$filterExpr.st},rlp=  {$relativeLocationPath.st})"<filtr> <rlp>"  
     -> template(filtr={$filterExpr.st})"<filtr>"  
  | relativeLocationPath -> template(rlp={$relativeLocationPath.st})"<rlp>"  
  ;  

relativeLocationPath : ^(STEPS st+=steps+) -> template(stps={$st})"<stps>";  

steps  
  :   ^(STEP step) ->template(stp={$step.st})"<stp>"    
  ;  
step   
  :  axisSpecifier nodeTest (pred+=predicate)*  
           ->template(axs={$axisSpecifier.st},ndtst={$nodeTest.st},stppred={$pred})"<axs> <ndtst> <stppred>"  
  ;  

predicate  
  : ^(PRED expr) ->template(predexp={$expr.st})"<predexp>"  
  ; 
```

LintMode 的输出：

```
Exception in thread "main" java.lang.IllegalStateException: infinite recursion to <anonymous([])@76> referenced in <anonymous([])@69>; stack trace:  
<anonymous([])@76>, attributes=[predexp=<anonymous()@75>], references=[predexp, stppred]>  
<anonymous([])@69>, attributes=[ndtst=<anonymous()@68>, stppred, axs=<anonymous()@67>], references=[axs, ndtst, stppred]>  
<anonymous([])@70>, attributes=[stp=<anonymous()@69>], references=[stp, stppred]>  
<anonymous([])@71>, attributes=[stps=List[..<anonymous()@70>..]], references=[stps, stppred]>  
<anonymous([])@72>, attributes=[rlp=<anonymous()@71>], references=[rlp, stppred]>  
<anonymous([])@73>, attributes=[mnexpr=<anonymous()@72>], references=[mnexpr, stppred]>  
<anonymous([])@75>, attributes=[e21=<anonymous()@74>, e11=<anonymous()@73>],   references=[e11, stppred]>  
<anonymous([])@76> (start of recursive cycle) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:22:28.930

ANTLR v3.4 使用 ST v4 进行联合生成，但为了向后兼容，生成的代码使用 ST v3.2.1。

您已在其自身中嵌入了一个模板。打开 lint 模式以在模板嵌套图中找到无限循环。

# c# - C# 中的错误 401

> ID：11608843
> 
> 赞同：1
> 
> 时间：2012-07-23T08:25:13.987
> 
> 标签：c#, .net, exception-handling, http-status-code-401, c#-5.0

我正在为 Windows 8 开发我的第一个应用程序，但我遇到了一个问题，当我启动我的应用程序时，我收到错误“响应状态代码不表示成功：

> 401（需要授权）

所以是的，我需要包含用户名和密码，但我不知道我的代码在哪里：

```
var fond = new HttpClient();
var reponse = await fond.GetStreamAsync("http://example.com/search/mario%20kart" + TitleNewsGrid.Text); 
```

那么我在代码中的哪里包含用户名和密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:35:38.950

例如应该有一个`Credentials`属性`TransportSettings`

```
using (var client = new HttpClient())
{
    client.TransportSettings.Credentials = new System.Net.NetworkCredential("username", "pwd");
    ...
} 
```

如果您无权访问该`TransportSettings`属性，则需要使用该属性`HttpClientHandler`。[复制代码没有意义，这里](https://stackoverflow.com/questions/10292730/httpclient-getasync-with-network-credentials)已经有一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:34:10.770

尝试这个

```
client.TransportSettings.Credentials = new System.Net.NetworkCredential("username", "password"); 
```

更多信息 [http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)

# php - index.php 不显示。改为显示错误页面

> ID：11608844
> 
> 赞同：1
> 
> 时间：2012-07-23T08:25:18.487
> 
> 标签：php, validation

我有一个包含 4 个链接的页面，即 1st.php、2nd.php、3rd.php 和 4th.php。我的 index.php 默认显示 3rd.php。我还创建了一个 404.php（错误页面），这样当用户编辑 URL 时，它不会重定向到 index.php，而是显示错误页面。问题是当我打开我的 index.php 页面时，它会显示错误页面。需要帮忙。这是我的代码：

```
 <?php 

  $quarters = array('Q1', 'Q2', 'Q3', 'Q4');
        $quarter = 'Q3';

        if(isset($_GET['quarter']) && in_array($_GET['quarter'], $quarters)) {
          $quarter = $_GET['quarter'];  
        }

        switch($quarter) {
          case 'Q1' :
            $quarter = 'firstq2012.php';
          break;
          case 'Q2' :
            $quarter = 'secondq2012.php';
          break;
          case 'Q3' :
            $quarter = 'thirdq2012.php';
          break;
          case 'Q4' :
            $quarter = 'fourthq2012.php';
          break;
        }

    $pages = array('Q1','Q2','Q3','Q4');
    if (in_array($_GET['quarter'], $pages)){            
                    include_once $quarter;  
 }
 else {
 header('Location: 404.php');
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:30:49.923

如果之后重新初始化 $ Quarter，为什么要向季度添加 GET 数据？如果您有 1st.php 而不是 firstq2012.php，则重新初始化的 $quarter 会存储不正确的文件名。如果 $_GET['quarter'] 不存在，如果只打开 index.php 而不是 index.php?q=...，那么它会重定向。我建议在你的 switch...case 你创建变量 $filename = '1st.php'; 然后检查`if (in_array($_GET['quarter'], $pages)){
include_once $quarter;
} else { header('Location: 404.php'); }``if (in_array($quarter, $pages)) { include_once $filename; } else { ... }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:44:19.093

你的代码可以清理很多。

尝试使用这个：

```
<?php 
$quarters = array('Q1' => 'firstq2012.php', 'Q2' => 'secondq2012.php', 'Q3' => 'thirdq2012.php', 'Q4' => 'fourthq2012.php');
if(isset($_GET['quarter'])) {
    if(in_array($_GET['quarter'], array_keys($quarters))) {
        include_once $quarters[$_GET['quarter']];
    } else {
        header('Location: 404.php');
    }
} else {
    include_once $quarters['Q3'];
}
?> 
```

# xcode - 新的 Apple 地图过渡

> ID：11608845
> 
> 赞同：0
> 
> 时间：2012-07-23T08:25:24.267
> 
> 标签：xcode, ios6

如何在 iOS 6 中进行新的 appleMaps 转换，它允许您获取地图视图并抬起它以查看和设置设置菜单。我想把这个转换放在我的 xCode 应用程序中，有人知道怎么做吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:18:49.623

在 iOS6 中使用地图的新 API 被命名为“MapKit”，规格如下：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html)

希望它可以帮助你:)

# iphone - 在 SecTrustEvaluate 上总是 EXC_BAD_ACCESS

> ID：11608847
> 
> 赞同：0
> 
> 时间：2012-07-23T08:25:33.850
> 
> 标签：iphone, objective-c, validation, x509certificate, evaluation

我正在使用[Apple 的示例代码](https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html)来评估 X509 证书。我进行了一些修改以从我的捆绑包中获取证书（仅更改了文件名）。

当我运行它时，它总是与`comment 5` `status = SecTrustEvaluate(myTrust, &trustResult);`. 我总是`EXC_BAD_ACCESS`在那里。

```
- (BOOL)validateCertificate
{
    NSString *thePath = [[NSBundle mainBundle] pathForResource:@"user_signed_cert" ofType:@"crt"];
    NSData *certData = [[NSData alloc]
                        initWithContentsOfFile:thePath];
    CFDataRef myCertData = (__bridge_retained CFDataRef)certData; //1
    SecCertificateRef myCert;
    myCert = SecCertificateCreateWithData(NULL, myCertData); //2
    SecPolicyRef myPolicy = SecPolicyCreateBasicX509(); //3
    SecCertificateRef certArray[1] = { myCert };
    CFArrayRef myCerts = CFArrayCreate(
                                       NULL, (void *)certArray,
                                       1, NULL);
    SecTrustRef myTrust;
    OSStatus status = SecTrustCreateWithCertificates(
                                                     myCerts,
                                                     myPolicy,
                                                     &myTrust); //4
    SecTrustResultType trustResult;
    if (status == noErr) {
        status = SecTrustEvaluate(myTrust, &trustResult); //5 }

        NSLog(@"Status: %d", status);
        //6 if (trustResult == kSecTrustResultRecoverableTrustFailure) {
    }

    if (myPolicy)
        CFRelease(myPolicy);
} 
```

有谁知道这里出了什么问题？

提前致谢！

**更新＃1：我已将其更改为以下内容，但没有任何变化。上相同的 EXC_BAD_ACCESS `SecTrustEvaluate()`。**

```
NSMutableArray *temp = [[NSMutableArray alloc] init];
[temp addObject:certData];
OSStatus status = SecTrustCreateWithCertificates((__bridge CFArrayRef)temp, myPolicy, &myTrust); 
```

之后似乎`status`是空的，`SecTrustCreateWithCertificates()`但不包含错误。

还有其他建议有什么问题吗？

**更新 #2：我已经尝试了下面提到的解决方案并总是收到`kSecTrustResultInvalid`. 我只更改了 CA 证书创建以存储私钥，`ca.key`因为在签署请求 ( `client.csr`) 时，我收到以下错误消息：**

```
Signature ok
subject=/CN=foo-by-ZeeCA
Getting CA Private Key
unable to load CA Private Key 
```

此外，我不得不将签名请求命令更改为`openssl x509 -CA ca.pem -in client.csr -CAkey ca.key -req -set_serial 1 -out client.pem`. （补充`-CAkey ca.key`）

然后我在下面的解决方案中使用了代码，并从包中添加了我的路径。此外，我还为状态添加了一个开关盒。

```
/*
 # CA
 openssl req -x509 -new -subj /CN=ZeeCA -keyout ca.key -nodes -set_serial 1 > ca.pem
 openssl x509 -outform DER -out ca.der -in ca.pem

 # create andsign client
 openssl req  -new -subj /CN=foo-by-ZeeCA -CAkey ca.key  -keyout client.key -nodes > client.csr
 openssl x509 -CA ca.pem -in client.csr -req -set_serial 1  -out client.pem

 # format for client identity import
 openssl pkcs12 -export -out client.12 -inkey client.key -in client.pem -CAfile ca.pem -password pass:1234

 # format for trust.
 openssl x509 -in client.pem -out client.der -outform der

 */

NSString *clientPath = [[NSBundle mainBundle] pathForResource:@"client" ofType:@"der"];

//NSString *thePath = @"XXXX/client.der";

NSData *certData = [[NSData alloc]
                    initWithContentsOfFile:clientPath];
CFDataRef myCertData = (__bridge_retained CFDataRef)certData; //1

assert(myCertData);

SecCertificateRef myCert;
myCert = SecCertificateCreateWithData(NULL, myCertData); //2

assert(myCert);

SecPolicyRef myPolicy = SecPolicyCreateBasicX509(); //3

NSArray * certArray = [NSArray arrayWithObject:(__bridge id)(myCert)];

SecTrustRef myTrust;
OSStatus status = SecTrustCreateWithCertificates(
                                                 (__bridge CFArrayRef)certArray,
                                                 myPolicy,
                                                 &myTrust); //4

NSString *caPath = [[NSBundle mainBundle] pathForResource:@"ca" ofType:@"der"];
NSData *caData = [[NSData alloc]
                  initWithContentsOfFile:caPath];
CFDataRef myCaData = (__bridge_retained CFDataRef)caData; 
SecCertificateRef myCA = SecCertificateCreateWithData(NULL, myCaData); 
assert(myCA);

NSArray * myCAs = [NSArray arrayWithObject:(__bridge id)(myCA)];

SecTrustResultType xxx = SecTrustSetAnchorCertificates(myTrust, (__bridge CFArrayRef)(myCAs));
if (xxx != noErr) {
    NSLog(@"SecTrustSetAnchorCertificates failed: %d", xxx);
}

SecTrustResultType trustResult;
if (status == noErr) {
    status = SecTrustEvaluate(myTrust, &trustResult); //5 }        
    NSLog(@"Status: %d", status);
}

if (myPolicy)
    CFRelease(myPolicy);

if (status == noErr) {
    status = SecTrustEvaluate(myTrust, &trustResult); //5 }

    switch (status) {
        case kSecTrustResultProceed: // 1
            NSLog(@"Proceed");
            break;
        case kSecTrustResultConfirm: // 2
            NSLog(@"Confirm");
            break;
        case kSecTrustResultUnspecified: // 4
            NSLog(@"Unspecified");
            break;
        case kSecTrustResultRecoverableTrustFailure:  // 5
            NSLog(@"TrustFailure");
            break;
        case kSecTrustResultDeny: // 3
            NSLog(@"Deny");
            break;
        case kSecTrustResultFatalTrustFailure: // 6
            NSLog(@"FatalTrustFailure");
            break;
        case kSecTrustResultOtherError: // 7
            NSLog(@"OtherError");
            break;
        case kSecTrustResultInvalid: // 0
            NSLog(@"Invalid");
            break;
        default:
            NSLog(@"Default");
            break;
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:02:04.173

我认为您的问题出在数组的数组中。我使用下面的代码 - 即在您所谓的 myCerts 中传递一个简单的 SecCertificateRef 平面数组。

```
 NSMutableArray *serverChain = [NSMutableArray array];
        for(int i = 0; i < SecTrustGetCertificateCount(secTrustRef); i++)
            [serverChain addObject:(__bridge id)(SecTrustGetCertificateAtIndex(secTrustRef,i))];

        SecTrustRef noHostTrustRef = NULL;
        OSErr status = SecTrustCreateWithCertificates((__bridge CFArrayRef) serverChain, SecPolicyCreateSSL(NO, nil), &noHostTrustRef);

        if (status != noErr) {
            NSLog(@"SecTrustCreateWithCertificates failed: %hd", status);
            [[challenge sender] cancelAuthenticationChallenge:challenge];
        }

        NSMutableArray *certRefs = [NSMutableArray arrayWithCapacity:[acceptableCAs count]];
        for(Certificate * cert in acceptableCAs)
            [certRefs addObject:(id)[cert secCertificateRef]];

        status = SecTrustSetAnchorCertificates(noHostTrustRef, (__bridge CFArrayRef)certRefs);
        if (status != noErr) {
            NSLog(@"SecTrustSetAnchorCertificates failed: %hd", status);
            [[challenge sender] cancelAuthenticationChallenge:challenge];
        }

        status = SecTrustEvaluate(noHostTrustRef, &result);
        if (status != noErr) {
            NSLog(@"SecTrustEvaluate failed: %hd", status);
            [[challenge sender] cancelAuthenticationChallenge:challenge];
        }
        CFRelease(noHostTrustRef); 
```

如果我将您的代码放入一个简单的 cmd 行包装器中：

# 进口

int main(int argc, const char * argv[]) {

```
@autoreleasepool {

    //  openssl req -x509 -new -subj /CN=foo -out user_signed_cert.crt \
    //      -keyout /dev/null -outform DER -nodes -set_serial 1
    //
    NSString *thePath = @"XXXXX/user_signed_cert.crt";

    NSData *certData = [[NSData alloc]
                        initWithContentsOfFile:thePath];
    CFDataRef myCertData = (__bridge_retained CFDataRef)certData; //1

    assert(myCertData);

    SecCertificateRef myCert;
    myCert = SecCertificateCreateWithData(NULL, myCertData); //2
    SecPolicyRef myPolicy = SecPolicyCreateBasicX509(); //3
    SecCertificateRef certArray[1] = { myCert };
    CFArrayRef myCerts = CFArrayCreate(
                                       NULL, (void *)certArray,
                                       1, NULL);
    SecTrustRef myTrust;
    OSStatus status = SecTrustCreateWithCertificates(
                                                     myCerts,
                                                     myPolicy,
                                                     &myTrust); //4
    SecTrustResultType trustResult;
    if (status == noErr) {
        status = SecTrustEvaluate(myTrust, &trustResult); //5 }

        NSLog(@"Status: %d", status);
        //6 if (trustResult == kSecTrustResultRecoverableTrustFailure) {
    }

    if (myPolicy)
        CFRelease(myPolicy);

}
return 0; 
```

并带有明确的证书：

```
@autoreleasepool {

    /*

     # CA
     openssl req -x509 -new -subj /CN=ZeeCA -keyout /dev/stdout -nodes -set_serial 1 > ca.pem
     openssl x509 -outform DER -out ca.der -in ca.pem

     # create andsign client
     openssl req  -new -subj /CN=foo-by-ZeeCA   -keyout client.key -nodes > client.csr
     openssl x509 -CA ca.pem -in client.csr -req -set_serial 1  -out client.pem

     # format for client identity import
     openssl pkcs12 -export -out client.12 -inkey client.key -in client.pem -CAfile ca.pem -password pass:1234

     # format for trust.
     openssl x509 -in client.pem -out client.der -outform der

     */
    NSString *thePath = @"XXXX/client.der";

    NSData *certData = [[NSData alloc]
                        initWithContentsOfFile:thePath];
    CFDataRef myCertData = (__bridge_retained CFDataRef)certData; //1

    assert(myCertData);

    SecCertificateRef myCert;
    myCert = SecCertificateCreateWithData(NULL, myCertData); //2

    assert(myCert);

    SecPolicyRef myPolicy = SecPolicyCreateBasicX509(); //3

    NSArray * certArray = [NSArray arrayWithObject:(__bridge id)(myCert)];

    SecTrustRef myTrust;
    OSStatus status = SecTrustCreateWithCertificates(
                                                     (__bridge CFArrayRef)certArray,
                                                     myPolicy,
                                                     &myTrust); //4

    NSData *caData = [[NSData alloc]
                       initWithContentsOfFile:@"XXXXX/ca.der"];
    CFDataRef myCaData = (__bridge_retained CFDataRef)caData; 
    SecCertificateRef myCA = SecCertificateCreateWithData(NULL, myCaData); 
    assert(myCA);

    NSArray * myCAs = [NSArray arrayWithObject:(__bridge id)(myCA)];

    SecTrustResultType xxx = SecTrustSetAnchorCertificates(myTrust, (__bridge CFArrayRef)(myCAs));
    if (xxx != noErr) {
        NSLog(@"SecTrustSetAnchorCertificates failed: %d", xxx);
    }

    SecTrustResultType trustResult;
    if (status == noErr) {
        status = SecTrustEvaluate(myTrust, &trustResult); //5 }

        NSLog(@"Status: %d", status);
        //6 if (trustResult == kSecTrustResultRecoverableTrustFailure) {
    }

    if (myPolicy)
        CFRelease(myPolicy);

} 
```

两者似乎都对我有用？

# ios - 如何在循环中设置 UIButtons 的操作？

> ID：11608848
> 
> 赞同：0
> 
> 时间：2012-07-23T08:25:34.367
> 
> 标签：ios, uitableview, nsstring, uibutton, selector

我在 UITableView 的每个单元格中都有一个按钮。现在我想在函数中将每个按钮绑定到它的操作方法：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { ...} 
```

这是我的尝试代码：

```
 NSString* functionNamePrefix = @"actionMethod_";
    NSString* functionName = [functionNamePrefix stringByAppendingString:[NSString stringWithFormat:@"%d",indexPath.row]];
    SEL selectorFromString = NSSelectorFromString(functionName);
    [button addTarget:self action:@selector(selectorFromString:) forControlEvents:UIControlEventTouchDown]; 
```

失败是：动作选择器将“selectorFromString”作为函数名，但 SEL 我从字符串转换。

有什么建议吗？蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:32:31.003

更好的方法是为所有按钮分配相同的操作，并在操作方法中计算出按钮在按下时所在的行。否则，如果您的单元格被重复使用，每个按钮都会分配有多个操作，这将非常混乱。

[您可以使用我对这个问题](https://stackoverflow.com/questions/9274494/how-to-know-the-uitableview-row-number/9274863#9274863)的回答轻松确定按钮或其他控件所在的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:21:20.090

您应该将 selectorFromString 传递给 action 参数，而不是 @selector(selectorFromString:)

```
NSString* functionNamePrefix = @"actionMethod_";
NSString* functionName = [functionNamePrefix stringByAppendingString:[NSString stringWithFormat:@"%d",indexPath.row]];
SEL selectorFromString = NSSelectorFromString(functionName);
[button addTarget:self action:selectorFromString forControlEvents:UIControlEventTouchDown]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:21:57.467

如果您想`SEL selectorFromString`为您的 Button 使用 as 选择器，您应该更改`@selector(selectorFromString:)`为`selectorFromString`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:26:54.707

尝试这种方式，因为您已经准备好使用选择器：

```
[button addTarget:self action:selectorFromString forControlEvents:UIControlEventTouchDown]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T09:34:12.410

以这种方式尝试。

在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { ...}`

```
[button setTag:indexPath.row];
[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchDown]; 
```

在`buttonTapped`

```
-(void)buttonTapped:(UIButton *)button{

     switch(button.tag){
     //Your code here
     }
} 
```

# qt - 如何使用 Qtranslator 翻译在 Qapp 中动态添加的字符串？

> ID：11608851
> 
> 赞同：3
> 
> 时间：2012-07-23T08:25:48.200
> 
> 标签：qt, qtablewidget, qtranslate

我试图用 Qt 语言学家创建一个 Qt 应用程序多语言。我将此代码放在 MainWindow 的函数中：

```
translator.load(":/lang/English");
qApp->installTranslator(&translator);
ui->retranslateUi(this); 
```

在我的 MainWindow.h 中声明 QTranslator 和我想要翻译的所有字符串都由 tr() 括起来。但是这样一来，我的 MainWindow.cpp 的代码动态添加的所有 QObject，例如 QTableWidget 的标题，都不会被翻译。如果我在 main.cpp 中放置一个其他翻译器，我的所有字符串都会被翻译，但我必须在我的应用程序中创建语言按钮，所以我不能在 main.cpp 中放置翻译器。

你有什么想法可以帮助我吗？

谢谢你的回答。

盖特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:49:33.927

当您在应用程序中添加翻译时，`qApp->installTranslator(& aTranslator)`所有*以下*对（和类似函数）的调用`QObject::tr()`都将在翻译器中查找已翻译文本。所以你应该调用`retranslateUi()` *after* `qApp->installTranslator()`。实际上你可能不会在那里调用它，你可以重新实现`QWidget::changeEvent()`和拦截任何`QEvent::LanguageChange`事件。

```
void MainWindow::changeEvent(QEvent *e)
{
    QMainWindow::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        // Someone called qApp->installTranslator() with a new translation.
        // Let's update the user visible strings.

        // This function was created by uic from the Designer form.
        // It translates all user visible texts in the form.
        ui->retranslateUi(this);

        // This function must be written by you. It translates other user visible
        // texts that are not in the form. See down for an example.
        this->retranslateUi();
        break;
    default:
        break;
    }
} 
```

`ui->retranslateUi()`只需调用`QObject::tr()`ui 中的每个用户可见字符串。它在结束时自动调用，`setupUi()`并用翻译文本填充表单的小部件（看看，它是由`ui_MainWindow.h`文件中的 uic 定义的）。您可能希望对其他用户可见文本采取类似的方法，例如 QTableWidget 的标题。所有字符串都设置在一个函数中（可能`retranslateUi()`出于一致性而命名），该函数在应用程序启动时（或者更好的是，在创建相关小部件之后）以及每次加载新翻译时调用。

```
MainWindow::MainWindow(QWidget * parent)
  : QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    // Creates other widgets, but do not set their user visible texts.
    tableWidget = new QTableWidget(this);
    ...
    someControl = new QLineEdit(this);
    someOtherControl = new QSpinBox(this);

    someModel = new MyModel(this);
    ...

    // Ok, *now* we set their texts.
    this->retranslateUi();
}

...

void MainWindow::retranslateUi()
{
    // This function will be called (either manually or automatically by
    // `changeEvent()`) when a new translator has installed, hence all the `tr()`
    // calls will return the right translation for the last installed language.

    QStringList labels;
    labels.append(tr("First column"));
    labels.append(tr("Second column"));
    labels.append(tr("Third column"));

    tableWidget->setHorizontalHeaderLabels(labels);

    someControl->setText(tr("Control name"));
    someOtherControl->setText(tr("Other control name"));

    // Perhaps you have a model that need to be retranslated too
    // (you need to write its `retranslateUi()` function):
    someModel->retranslateUi();

    ...
} 
```

另外，请注意，如果你正在做类似的事情

```
void MainWindow::someFunction()
{
    ...

    QTranslator translator;
    translator.load(":/lang/English");
    qApp->installTranslator(& translator);

    ...
} 
```

一旦该函数返回，变量`translator`就会被销毁，因此下次`QObject::tr()`调用时存储的地址`qApp->installTranslator(& translator)`将无效。所以你必须`translator`在堆上分配（当你不再需要它时`new`可能会删除它）。`delete`一个例外是，如果您`main()`在调用之前这样做，`QCoreApplication::exec()`因为该函数是阻塞的，并且在应用程序关闭之前不会返回。

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    ...

    QTranslator translator;
    translator.load(":/lang/English");
    app.installTranslator(& translator);

    ...

    app.exec(); // This function will return only on application's exit.
                // Hence `translator` will outlive the application, there is
                // no need to worry about it.
} 
```

# macos - 如何调试 MacVim 崩溃

> ID：11608856
> 
> 赞同：1
> 
> 时间：2012-07-23T08:25:57.480
> 
> 标签：macos, vim, osx-snow-leopard, macvim

我一直在 OSX Snow Leopard 上使用 MacVim（7.3 Build 53），并且每隔一段时间，窗口就会消失，丢失我可能拥有的任何未保存的更改。它始终是活动窗口（如果我打开了多个窗口，它们不受影响）并且它不会完全退出 MacVim，因为它在任务栏上保持打开状态，只是没有打开的窗口。没有任何警告或错误。

通常要调试一个神秘的 vim 相关问题，我会首先从我的配置文件中取出所有内容，然后一点一点地构建它们，检查错误是否仍然存在，但是这个问题是相当间歇性的，（到目前为止）我不能强迫它可以重现问题，所以我无法确定问题是否已解决。

我已经查看了错误日志之类的东西，但找不到任何东西。有人对调试此类问题有任何建议吗？

# javascript - 打开新窗口，暂停 5 秒，重定向，暂停 5 秒，重定向，重复

> ID：11608860
> 
> 赞同：0
> 
> 时间：2012-07-23T08:26:28.087
> 
> 标签：javascript

是否可以有一个按钮打开一个弹出窗口，在页面加载时重定向到 mysite.com，然后在 mysite.com 上等待指定的时间然后重定向并重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:29:04.560

您可以让弹出窗口包含一个`<iframe>`, 并在弹出页面内的 JavaScript 计时器中控制目标，或者我尚未对此进行测试，获取弹出窗口的句柄并尝试更改该窗口的 window.location。

## `<iframe>`方法

```
<html>
    <head>
        <script language="javascript" type="text/javascript">
        var urls = new Array("p1.html","p2.html");
        var currentUrl = 0;
        var interval = setInterval("updateFrame()", 1000);
        function updateFrame() {
            currentUrl = currentUrl == 0 ? 1 : 0;
            document.getElementById("container").src = urls[currentUrl];
        }
        </script>
    </head>
    <body>
        <iframe id="container" frameborder="0" width="100%" height="100%"></iframe>
    </body>
</html> 
```

在这里你需要`"p1.html","p2.html"`用你自己的网址替换。`currentUrl = currentUrl == 0 ? 1 : 0;`如果您的阵列中有两个以上，您还需要进行更改。`1000`指的是毫秒 - 更改为 5000 持续 5 秒。

# html - 不要在 Ipad 上显示正确的网站

> ID：11608863
> 
> 赞同：0
> 
> 时间：2012-07-23T08:26:50.710
> 
> 标签：html, css

我再次请求您的帮助。转到此[链接](http://partssystem.ru/)并查看此块，即屏幕截图。

![在此处输入图像描述](../Images/1a4fd19ce7c225345cfc0e512e41ada3.png)

全部显示流畅准确。以下屏幕截图显示了在 Ipad 上的显示

![在此处输入图像描述](../Images/9512511c291760b7315c5df6c7032c71.png)

如您所见，该块已移动。代码似乎正确，我不明白发生了什么。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:03:38.850

您应该使用[媒体查询](https://developer.mozilla.org/en/CSS/Media_queries/)来定位特定设备并应用相关样式。

```
/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
} 
```

来源：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# java - 通过 JPL 从 SWI-Prolog 检索 ERROR 和 WARNING 消息

> ID：11608867
> 
> 赞同：0
> 
> 时间：2012-07-23T08:27:08.620
> 
> 标签：java, prolog, swi-prolog, jpl

使用 JPL 时，我在检索错误和警告消息时遇到了一些问题。例如，尝试直接从 SWI-Prolog 查询不存在的文件会产生以下输出：

```
1 ?- consult('NonExistingFile').
ERROR: source_sink `NonExistingFile' does not exist
true. 
```

但是，通过 JPL 执行此查询时，不会抛出异常，并且 Query 类的 hasMoreSolutions() 方法返回 true：

```
Query query = new Query("consult('NonExistingFile')");
query.hasMoreSolutions(); 
```

我怎样才能检测到发生了错误并且咨询 NonExistingFile.pl 实际上失败了？同样的问题适用于检索不会导致谓词执行失败的警告消息。

**编辑：将 JPL 与最高 6.0.2 的 SWI-Prolog 版本一起使用时，会发生所描述的情况**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:33:16.000

将 JPL 与 SWI-Prolog 6.1.9（当前为开发版本）一起使用时，有关咨询错误的问题已得到解决。尝试查阅不存在的文件时会引发异常。

# haskell - Haskell - 如何构建一个读取一些设置文件的程序？

> ID：11608868
> 
> 赞同：4
> 
> 时间：2012-07-23T08:27:13.847
> 
> 标签：haskell, functional-programming, monad-transformers

[根据关于的介绍`ReaderT`](http://en.wikibooks.org/wiki/Haskell/Monad_transformers)，我只能找到：

```
ReaderT Env IO String 
```

这意味着

```
...is a computation which involves reading values from some environment 
of type Env (the semantics of Reader, the base monad) and performing some 
IO in order to give a value of type String. 
```

所以执行顺序会变成

```
1\. ( Already has ) some environment values          -- ReaderT Env
2\. Do `IO` accroding to these pre-existing values   -- IO a
3\. Use the `IO a` values to do more computations    -- IO b...z 
```

这将要求我们的程序具有一些预先存在的值作为环境，但我认为大多数程序都需要**加载**这些环境值。例如数据库 URL、调试切换器或其他任何东西。

因此，我们有一个**相反**的执行顺序，根据 Monad 堆栈这是**非法的：**

```
1\. Do some `IO` to load environment settings        -- IO a first !!
2\. Do more `IO` according to these settings         -- fill the env and do IO 
```

monad 堆栈将变为：

```
IOT Env ReaderT Env 
```

这是非法的，因为`IO`monad 不能是 monad 堆栈中的基础 monad。那么，有没有一种正确的方法来使用外部设置文件初始化我的程序？

PS1。我注意到`xmonad` **编译**它的设置作为程序的一部分。我仍然不确定这是否是“加载”设置的唯一方法......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T08:42:59.140

首先，monad 堆栈中 monad 的顺序与您要执行的操作的顺序没有任何关系。

其次，您可能甚至不需要这里的堆栈。

处理配置的典型程序的结构如下：

```
data Config = ...

readConfig :: IO Config
readConfig = do
    text <- readFile "~/.config"
    let config = ... -- do some parsing here
    return config

meat :: Reader Config Answer
meat = do
    -- invoke some operations, which get config automatically through the
    -- monad

main = do
    config <- readConfig
    let answer = runReader meat config
    print answer 
```

只有当`meat`它本身需要执行一些 IO（除了读取配置）时，你才需要一个 monad 堆栈。在那种情况下，你会有

```
meat :: ReaderT Config IO Answer
meat = ...

main = do
    config <- readConfig
    answer <- runReaderT meat config
    print answer 
```

# c++ - gcc atomic builtins 这么慢是正常的吗？

> ID：11608869
> 
> 赞同：8
> 
> 时间：2012-07-23T08:27:16.683
> 
> 标签：c++, performance, gcc, atomic, built-in

我有一个应用程序，我必须在多线程方法中增加一些统计计数器。递增必须是线程安全的，所以我决定使用 gcc atomic 内置`__sync_add_and_fetch()`函数。为了了解它们的影响，我做了一些简单的性能测试，发现这些函数比简单的前/后递增要慢得多。

这是我创建的测试程序：

```
#include <iostream>
#include <pthread.h>
#include <time.h>

using namespace std;

uint64_t diffTimes(struct timespec &start, struct timespec &end)
{
  if(start.tv_sec == end.tv_sec)
  {
    return end.tv_nsec - start.tv_nsec;
  }
  else if(start.tv_sec < end.tv_sec)
  {
    uint64_t nsecs = (end.tv_sec - start.tv_sec) * 1000000000;
    return nsecs + end.tv_nsec - start.tv_nsec;
  }
  else
  {
    // this is actually an error
    return 0;
  }
}

void outputResult(const char *msg, struct timespec &start, struct timespec &end, uint32_t numIterations, uint64_t val)
{
  uint64_t diff = diffTimes(start, end);
  cout << msg << ": "
       << "\n\t iterations: " << numIterations
       << ", result: " << val
       << "\n\t times [start, end] =  [" << start.tv_sec << ", " << start.tv_nsec << "]"
       << "\n\t [" << end.tv_sec << ", " << end.tv_nsec << "]"
       << "\n\t [total, avg] = [" << diff
       << ", " << (diff/numIterations) << "] nano seconds"
       << endl;
}

int main(int argc, char **argv)
{
  struct timespec start, end;
  uint64_t val = 0;
  uint32_t numIterations = 1000000;

  //
  // NON ATOMIC pre increment
  //
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    ++val;
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("Non-Atomic pre-increment", start, end, numIterations, val);
  val = 0;

  //
  // NON ATOMIC post increment
  //
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    val++;
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("Non-Atomic post-increment", start, end, numIterations, val);
  val = 0;

  //
  // ATOMIC add and fetch
  //
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    __sync_add_and_fetch(&val, 1);
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("Atomic add and fetch", start, end, numIterations, val);
  val = 0;

  //
  // ATOMIC fetch and add
  //
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    __sync_fetch_and_add(&val, 1);
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("Atomic fetch and add", start, end, numIterations, val);
  val = 0;

  //
  // Mutex protected post-increment
  //
  pthread_mutex_t mutex;
  pthread_mutex_init(&mutex, NULL);
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    pthread_mutex_lock(&mutex);
    val++;
    pthread_mutex_unlock(&mutex);
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("Mutex post-increment", start, end, numIterations, val);
  val = 0;

  //
  // RWlock protected post-increment
  //
  pthread_rwlock_t rwlock;
  pthread_rwlock_init(&rwlock, NULL);
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
  for(uint32_t i = 0; i < numIterations; ++i)
  {
    pthread_rwlock_wrlock(&rwlock);
    val++;
    pthread_rwlock_unlock(&rwlock);
  }
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

  outputResult("RWlock post-increment", start, end, numIterations, val);
  val = 0;

  return 0;
} 
```

结果如下：

```
# ./atomicVsNonAtomic
Non-Atomic pre-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 1585375]
         [0, 1586185]
         [total, avg] = [810, 0] nano seconds
Non-Atomic post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 1667489]
         [0, 1667920]
         [total, avg] = [431, 0] nano seconds
Atomic add and fetch:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 1682037]
         [0, 16595016]
         [total, avg] = [14912979, 14] nano seconds
Atomic fetch and add:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 16617178]
         [0, 31499571]
         [total, avg] = [14882393, 14] nano seconds
Mutex post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 31526810]
         [0, 68515763]
         [total, avg] = [36988953, 36] nano seconds
RWlock post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 68547649]
         [0, 110877351]
         [total, avg] = [42329702, 42] nano seconds 
```

这是 gcc 编译：

```
g++ -o atomicVsNonAtomic.o -c -march=i686 -O2 -I. atomicVsNonAtomic.cc
g++ -o atomicVsNonAtomic atomicVsNonAtomic.o -lrt -lpthread 
```

以及相关信息和版本：

```
# gcc --version
gcc (GCC) 4.3.2
Copyright (C) 2008 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

# uname -a
Linux gtcba2v1 2.6.32.12-0.7-default #1 SMP 2010-05-20 11:14:20 +0200 i686 i686 i386 GNU/Linux 
```

现在是实际问题:) 原子操作这么慢是正常的吗？

一百万次迭代的差异是：

*   简单的后增量：431 纳秒
*   原子获取和添加操作：14882393 纳秒

当然我知道原子操作应该更昂贵，但这似乎被夸大了。为了完整起见，我还检查了 pthread 互斥锁和 rwlock。至少原子操作比 pthread 操作快，但我仍然想知道我是否做错了什么。我无法在不指定选项的情况下链接它`-march=i686`，也许这有影响？

***更新：***

我拿出了`-O2`编译器优化，能够得到更连贯的结果，如下所示：

```
# ./atomicVsNonAtomic
Non-Atomic pre-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 1647303]
         [0, 4171164]
         [total, avg] = [2523861, 2] nano seconds
Non-Atomic post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 4310230]
         [0, 7262704]
         [total, avg] = [2952474, 2] nano seconds
Atomic add and fetch:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 7285996]
         [0, 25919067]
         [total, avg] = [18633071, 18] nano seconds
Atomic fetch and add:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 25941677]
         [0, 44544234]
         [total, avg] = [18602557, 18] nano seconds
Mutex post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 44573933]
         [0, 82318615]
         [total, avg] = [37744682, 37] nano seconds
RWlock post-increment:
         iterations: 1000000, result: 1000000
         times [start, end] =  [0, 82344866]
         [0, 125124498]
         [total, avg] = [42779632, 42] nano seconds 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T08:40:18.923

答案是 GCC 优化了你的非原子增量。当它看到如下循环时：

```
for (int i=0; i<N; i++) x++; 
```

它将其替换为：

```
x += N; 
```

这可以在生成的程序集中看到，其中包含：

```
call    clock_gettime
leal    -32(%ebp), %edx
addl    $1000000, -40(%ebp)     <- increment by 1000000
adcl    $0, -36(%ebp)
movl    %edx, 4(%esp)
movl    $2, (%esp)
call    clock_gettime 
```

所以你不是在衡量你认为自己是什么。

您可以设置变量`volatile`来防止这种优化。在我的电脑上，这样做之后，非原子访问的速度大约是原子访问的 8 倍。当使用 32 位变量而不是 64 位（我正在编译为 32 位）时，差异下降到大约 3 倍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T08:40:38.847

我猜 gcc 正在将您的非原子增量操作优化为类似

```
val += numIterations; 
```

您说 10^6 增量需要 431 纳秒，每次循环迭代需要 0.000431 ns。在 4 GHz 处理器上，时钟周期为 0.25 ns，因此很明显循环正在被优化掉。这解释了您所看到的巨大性能差异。

编辑：您测量了一个原子操作需要 14 ns - 再次假设一个 4 GHz 处理器，它可以工作 56 个周期，这相当不错！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:35:10.870

任何同步机制的慢度都无法用单个线程来衡量。像 POSIX 互斥锁/Windows 临界区这样的单进程同步对象只有在它们被竞争时才真正花费时间。

您将不得不引入几个线程 - 执行反映实际应用程序时间的其他工作 - 以便同步方法真正了解它需要多长时间。

# sqlite - Rack::Lint::LintError: 状态必须 >=100 视为整数

> ID：11608870
> 
> 赞同：5
> 
> 时间：2012-07-23T08:27:21.100
> 
> 标签：sqlite, sinatra, datamapper

我将 DataMapper gem 与 Sinatra 一起使用，并按照此处的教程进行操作：http: [//net.tutsplus.com/tutorials/ruby/ruby-for-newbies-working-with-datamapper/](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-working-with-datamapper/)

我正在连接到数据库并进行迁移：

```
DataMapper.setup :default, "sqlite://#{Dir.pwd}/ex2.db"
DataMapper.auto_migrate! 
```

我的数据模型：

```
class User
    include DataMapper::Resource

    property :id       , Serial
    property :username , String
    property :email    , String
end 
```

我正在使用这个命令执行：

```
rackup config.ru 
```

但是，当我到达这一行时：

```
User.create username: "JoeSchmo", email: "joe@schmo.com" 
```

我收到错误：

```
Rack::Lint::LintError: Status must be >=100 seen as integer 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T00:13:09.853

尝试删除 SQLite DB - data_mapper 中似乎存在更改数据结构和使用旧数据的错误。对我来说，删除数据库并设置新数据库后，该错误就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:10:33.217

您使用的是哪个版本的 ruby​​，因为如果您使用的版本低于 1.9，则必须不使用`=>`哈希构造函数`:`并将冒号移到开头，因为它是一个符号。

```
User.create :username => "JoeSchmo", :email => "joe@schmo.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T15:29:15.003

我对 Sinatra 和 datamapper 也有同样的问题。使用“new”关键字而不是“create”创建我的记录，然后一一添加属性对我有用。希望你觉得它有用。

# php - 上传文件和 ajax/jquery 失败

> ID：11608877
> 
> 赞同：0
> 
> 时间：2012-07-23T08:28:25.653
> 
> 标签：php, jquery, ajax

我正在尝试将文件上传功能添加到联系表单，但由于某种原因它不起作用。上传脚本本身可以正常工作，但是当我将其添加到联系人代码时，jquery 脚本会使其失败。

如您所知，我绝不是专家。

**pontact.php**

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(function(){
        $('#contact_form').submit(function(e){
            e.preventDefault();
            var form = $(this);
            var post_url = form.attr('action');
            var post_data = form.serialize();
            $('#loader', form).html('<img src="loader.gif" /> Please Wait...');
            $.ajax({
                type: 'POST',
                url: post_url, 
                data: post_data,
                success: function(msg) {
                    $(form).fadeOut(500, function(){
                        form.html(msg).fadeIn();
                    });
                }
            });
        });
    });
    </script>
    </head>
    <body>
    <form action="process.php" method="post" id="contact_form">
        <div>
             <label for="name">Your Name:</label>
             <input type="text" name="name" id="name" value="" tabindex="1" />
        </div>
        <div>
             <label for="email">Your Email:</label>
             <input type="text" name="email" id="email" value="" tabindex="2" />
        </div>
        <div>
            <label for="message">Message:</label>
            <textarea cols="40" rows="8" name="message" id="message"></textarea>
        </div>
<div>
    <input type="hidden" name="MAX_FILE_SIZE" value="512000" />
    Send this file: <input name="userfile" type="file" />
</div>
        <div id="loader">
            <input type="submit" value="Submit" /> 
        </div>
    </form>
    </body>
    </html> 
```

**进程.php**

```
$uploaddir = '/var/www/download/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo "<p>";

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
  echo "File is valid, and was successfully uploaded.\n";
} else {
   echo "Upload failed";
}

echo "</p>";
echo '<pre>';
echo 'Here is some more debugging info:';
print_r($_FILES);
print "</pre>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:36:19.857

即使您调用`form.serialize()`.

您可以通过像使用 iFrames（关于此的好[文章）或像](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)[Uploadify](http://www.uploadify.com/)这样的基于 Flash 的上传器这样的技巧来实现相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:38:50.950

默认不能使用ajax上传文件，（[为什么我不能异步上传文件？](https://stackoverflow.com/questions/7595049/why-cant-i-upload-files-asynchronously)）

但是有一些技术，包括你可以使用的 iframe 或 flash 插件

*   [如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

*   [什么是最好的多文件 JavaScript / Flash 文件上传器？](https://stackoverflow.com/questions/207298/what-is-the-best-multiple-file-javascript-flash-file-uploader)

希望这可以帮助

# c++ - c++ 将字符串转换为十六进制

> ID：11608878
> 
> 赞同：8
> 
> 时间：2012-07-23T08:28:28.337
> 
> 标签：c++, string, hex

> **可能重复：**
> [C++ 将十六进制字符串转换为有符号整数](https://stackoverflow.com/questions/1070497/c-convert-hex-string-to-signed-integer)

我已经在谷歌上搜索过，但没有找到任何帮助。所以这是我的问题：我的字符串已经包含十六进制代码，例如：字符串 s1 = "5f0066"，我想将此字符串转换为十六进制。我需要将字符串与我在二进制文件中读取的十六进制代码进行比较。

（只需要如何转换字符串的基本概念） 5f 最好的问候和感谢。

编辑：以 unsigned char 格式获取二进制文件信息。所以它的 0x5f ......希望有相同格式的字符串

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T08:36:19.233

用作（仅在[`std:stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)C++11 中）：

```
std::string s = "5f0066";
int num = std::stoi(s, 0, 16); 
```

[在线演示](http://ideone.com/Qbgcl)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-23T08:34:10.560

使用**[stringstream](http://www.dreamincode.net/forums/topic/95826-stringstream-tutorial/)**和**[std::hex](http://www.cplusplus.com/reference/iostream/manipulators/hex/)**

```
std::stringstream str;
std::string s1 = "5f0066";
str << s1;
int value;
str >> std::hex >> value; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T08:33:18.813

`strtol(str, NULL, 16)`或者`strtoul(str, NULL, 16)`应该做你需要的。

[strtol](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/) [strtoul](http://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/)

# php - apache服务器中的URL重写

> ID：11608879
> 
> 赞同：0
> 
> 时间：2012-07-23T08:28:28.857
> 
> 标签：php, apache, .htaccess, url-rewriting

我的网页具有以下类型的 URL

```
http://mysite.com/?type=home
http://mysite.com/?type=aboutus
http://mysite.com/?type=contactus 
```

对于最终用户，我需要它显示如下：

```
http://mysite.com/home
http://mysite.com/aboutus
http://mysite.com/contactus 
```

这意味着，用户不知道 URL 中有一个请求参数“type”。

我不确定这是否可能。

请帮助我找到解决方案。

**编辑**：我搜索了很多网站以使用 .htaccess 学习 URL 重写，但无法让它们在我的服务器中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:33:24.327

把它放在你的 .htaccess 文件中

```
RewriteEngine On
    RewriteRule ^([a-zA-Z0-9-+/]+)$ ?type=$1
    RewriteRule ^([a-zA-Z0-9-+/]+)/$ ?type=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:42:05.833

是的，这绝对是可能的。

您必须确保您的主机提供商已启用 URL 重写（我不记得了，但我相信您可以在 Internet 上找到帮助来验证这一点）。

您必须在站点的根目录中创建一个“.htaccess”文件。

把这个内容放进去：

告诉服务器遵循符号链接：

```
Options +FollowSymlinks 
```

激活重写模块：

```
RewriteEngine on 
```

重写 url 的规则

```
RewriteRule ^([a-z]+)$   /index.php?type=$1 [L] 
```

请注意，这只是一个 qucik 示例，您可能想在 Google 上查看“url 重写教程”。

# silverlight - Silverlight Telerik gridview 使用 MVVM 强制绑定刷新

> ID：11608881
> 
> 赞同：0
> 
> 时间：2012-07-23T08:28:40.727
> 
> 标签：silverlight, mvvm

这是场景：

我的页面上有一个 Telerik gridview，它绑定到一个带有“GekoppeldeOntvangstRegel”类项目的 PagedCollectionView，

此类实现 INotifyPropertyChanged

有几列有一个 CellTemplate 和一个 TextBlock 绑定到此类的对象，如下所示：

```
 <TextBlock Text="{Binding ConverterParameter='aantal', Converter={StaticResource GekoppeldeRegelDecimalFormatConverter}, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True, ValidatesOnNotifyDataErrors=True}" HorizontalAlignment="Right" ToolTipService.ToolTip="{Binding ConverterParameter='aantal', Converter={StaticResource GekoppeldeRegelToolTipDecimalFormatConverter}}" /> 
```

此转换器将“Aantal”属性转换为具有特定小数位数的字符串。当我使用 OnPropertyChanged("Aantal") 从代码中更新“Aantal”属性时，绑定当然不会更新（因为文本块绑定到整个对象，而不是属性），所以旧值仍然可见。

当属性更改时，如何从我的视图模型或对象刷新列内容？

当我直接绑定到“Aantal”属性时，一切正常（除了没有应用转换器，这是必要的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:59:45.073

作为一种解决方法，我现在在“GekoppeldeOntvangstRegel”类上创建了几个额外的属性。

这些属性调用转换器并返回具有正确小数位数的正确值。在这些属性上，提高 OnPropertyChanged 确实可以刷新绑定。

我对这个解决方案不是很满意，但它现在有效。

# ruby-on-rails - 主干.js 视图中的每个集合

> ID：11608883
> 
> 赞同：0
> 
> 时间：2012-07-23T08:28:44.357
> 
> 标签：ruby-on-rails, backbone.js, backbone-views, backbone-routing

如果我在视图中循环集合，它似乎是空的，不会出现警报对话框。当我在这个视图中使用 console.log(this.collection) 时，它看起来没问题（这个集合中有 16 个元素）。

我的路由器：（集合 url：'/api/employees'，这是一个 rails json 输出）

```
Office.Routers.Employees = Backbone.Router.extend({

  routes: {
    "":   "index"
  },

  initialize: function() {
    this.collection = new Office.Collections.Employees();
    this.collection.fetch();
  },

  index: function() {
    var view = new Office.Views.EmployeesIndex({ collection: this.collection });
    view.render();
  }

}); 
```

和我的 index.js 视图：

```
Office.Views.EmployeesIndex = Backbone.View.extend({

  render: function() {
    this.collection.each( function( obj ){ alert(obj); } );
  }

}); 
```

**编辑：**

这是 console.log(this.collection) 在视图中的输出：http: [//i.stack.imgur.com/ZQBUD.png](http://i.stack.imgur.com/ZQBUD.png)

**编辑2：**

我认为 Rails 是有罪的。当我使用静态集合时，一切正常

```
var collection = new Backbone.Collection([
  {name: "Tim", age: 5},
  {name: "Ida", age: 26},
  {name: "Rob", age: 55}
]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:56:15.733

`collection.fetch()`向服务器发出**异步**请求。索引回调不等待获取返回。所以你的渲染函数正在渲染一个空集合。

您需要使用 fetch 方法的成功回调：

```
index: function() {
  this.collection.fetch({
    success: function(data) {
      var view = new Office.Views.EmployeesIndex({ collection: data });
      view.render();        
    }        
  });
} 
```

请注意，Backbone 文档建议通过将数据包含在文档本身中来[引导您需要的任何初始数据：](http://backbonejs.org/#FAQ-bootstrap)

> 当您的应用首次加载时，通常会有一组您知道您将需要的初始模型来呈现页面。与其触发额外的 AJAX 请求来获取它们，更好的模式是让它们的数据已经引导到页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:02:13.110

在您的视图呈现时，获取可能尚未完成。尝试以下操作：

```
 index: function() {
    var p, collection, view;
    collection = new Office.Collections.Employees();
    p = collection.fetch();
    view = new Office.Views.EmployeesIndex({ collection: collection });
    p.done(view.render);
  } 
```

# amazon-ec2 - 如何在 CloudWatch 中使用 ELB 的 HealthyHostCount 进行监控？

> ID：11608888
> 
> 赞同：11
> 
> 时间：2012-07-23T08:29:10.987
> 
> 标签：amazon-ec2, amazon-web-services, metrics, amazon-elb, amazon-cloudwatch

我们有三个 EC2 实例——在 eu-west-1 区域的每个可用区 (AZ) 中都有一个。它们使用 ELB 进行负载平衡。我们想使用 CloudWatch 监控在负载均衡器上注册了多少实例。问题在于：我不太了解这个`HealthyHostCount`指标。

对于部署，我们希望能够在不通知的情况下注销单个实例（将其从 LB 中取出）。所以警报会是：通知负载均衡器后面是否只有 1 个健康实例 5 分钟。

据我了解，`HealthyHostCount`（HHC）是在给定 ELB 中注册的健康实例的数量，是所有 AZ 的平均值。如果一切正常，HHC 应该为 1（无论在什么时间段内），因为每个 AZ 中有 1 个实例。

几天前，有人部署没有重新注册实例，所以只有一个实例被平衡。当我们注意到这一点时，我们创建了一个警报，当平均 HHC 在 5 分钟后降至 0.6 以下时通知我们。（如果在 ELB 中只注册了 1 个实例，则 HHC 应在任何时间段内平均为 0.33。）但是，警报从未更改为状态“ALARM”。

当我在 CloudWatch 中检查 HHC 时，HHC 是没有意义的数字（我现在只记得 5 分钟间隔的 10.0 的总和）。

这对我来说都是一团糟。每当我认为我理解了该指标时，CloudWatch 图表对我来说都是胡言乱语。

有人可以解释一下如何在只注册一个实例时使用 HHC 来获取警报吗？平均 HHC 是要走的路还是我应该使用其他指标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-09T04:30:49.083

`HealthyHostCount`每次执行健康检查时，该指标都会记录一个数据值，其中包含每个可用区的可用主机数。您的 ELB 健康检查有一个`Interval`参数，用于定义每分钟执行多少次健康检查。

如果您正在查看每 AZ 指标，健康检查`Interval`为 10 秒，该 AZ 中有 2 个健康主机，您将看到每分钟 6 个数据点 ( `60/10`)，值为 2。平均值、最大值和最小值将为2，但总和为`6*2=12`。

如果您有 3 个 AZ，每个 AZ 有 2 个主机，同样是`Interval`=10，但是您正在查看 Per-LB 指标，您将看到`3*6=18`每分钟的数据点，每个数据点的值为 2。平均值、最大值和最小值将为 2，但总和为`18*2=36`

我建议您设置一个可以除以 60 秒（5、6、10、15、20、30 或 60 秒）的间隔值。

在您的情况下，如果您的时间间隔为 30 秒，并且每个 AZ 有 3 个 AZ 和 1 个服务器：您应该期望每个 AZ 每分钟有 2 个数据点，因此设置一个警报 Per-LB，a`Period`为 1 分钟，`Sum of HealthyHostCount`当值低于 2 时触发（`2 data values * 1 Healthy AZ * 1 healthy server = 2`，不健康 AZ 的其他 4 个数据值应为 0，因此它们不会影响总和）。

更新：

事实[证明](http://theburningmonk.com/2013/07/amazon-elb-some-caveats-around-health-check-pings/)，执行的运行状况检查的数量还取决于构成 ELB 的内部实例的数量（通常每个 AZ 一个），因此，如果您遇到流量高峰，或者有足够的负载使单个 elb-internal-instance 饱和，ELB 内的内部服务器数量将会增长，并且您会意外地拥有更多的数据点。`sum`仅当您有大量流量时，这可能会影响价值。在 3 个可用区中分布的 6k RPM 的峰值负载时，我没有看到这个问题。如果这是您的情况，那么使用`average`是更安全的选择，但我建议您使用低于 0.65 作为阈值。

该[链接](http://theburningmonk.com/2013/07/amazon-elb-some-caveats-around-health-check-pings/)还让我想知道该`Cross-Zone Load Balancing`功能如何影响数据点的数量......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T19:21:44.147

这是 CloudWatch Web 控制台不公开 Cloud Watch 可以执行的所有操作的区域。正如[文档](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/US_MonitoringLoadBalancerWithCW.html)解释的那样，`HealthyHostCount`是每个可用区的指标。控制台允许您按可用性区域（但跨所有负载均衡器）或负载均衡器（但跨所有区域）拥有 HealthHostCount，但不能双向切片。

如果您只有一个负载均衡器，最简单的方法是为每个区域指标设置一个警报。如果您有多个可用区，那么您应该能够使用 api 创建跨可用区和负载均衡器的警报切片（同样，每个负载均衡器一个警报），但就我而言，您不能从 Web UI 执行此操作知道。

# html - 响应式设计：在流体设计中使用像素宽度 div

> ID：11608890
> 
> 赞同：0
> 
> 时间：2012-07-23T08:29:23.097
> 
> 标签：html, css, responsive-design

设置：

我有一个侧边栏和一个主要内容列。侧边栏的宽度为 33%，主要内容的像素宽度填充了其余空间。我希望主要内容保持其固定宽度，直到它达到某个媒体查询断点并变小。所以基本上我希望边栏在窗口调整大小时缩小直到断点。

这听起来对我来说应该很简单，但我遇到了问题。当我缩小窗口时，侧边栏的缩小速度不够快，主要内容会下降到它下面。我想这是因为由于主要内容没有缩小，它的 px 宽度占据了越来越高的屏幕百分比，而侧边栏总是只占 33%。

我觉得有一些简单的解决方案，但我想不出。有任何想法吗？

谢谢，姑娘们和伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:23:57.797

## 概述

如果您将内容框设为 67%，并注释掉 div 之间的空格，它应该可以工作。

我还添加了`box-sizing:border-box;`因为你可以添加填充，它不会添加到总宽度上。

这**不适**用于边距，如果您希望它与边距正确匹配，则必须使用边距百分比，以便边距+宽度 =100%。

背景颜色只是为了展示 div 的样子。

这是一个例子：http: [//jsfiddle.net/ZZwbF/](http://jsfiddle.net/ZZwbF/)

**HTML：**

```
<div id='container'>
<div class='sidebar'>
    Sidebar Test
</div><!--
--><div class='content'>
    Content Test
</div><!--
--></div>
​ 
```

**CSS：**

```
.sidebar
{
display:inline-block;
width:33%;
box-sizing:border-box;    
background-color:#09f;
}

.content
{
display:inline-block;
width:67%;
box-sizing:border-box;    
background-color:#0F9;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:18:23.020

我想到了。

我只需要停止尝试填满整个屏幕。考虑到人们的屏幕比我大，这毫无意义。因此，我没有在内容上设置右边距（我没有提到）以使其填充剩余空间，而是将其向左浮动。现在我将在侧边栏上放置一个最大宽度，并在调整大小赶上内容框时进行媒体查询。

# asp.net-mvc-3 - 模型未从视图更新到控制器

> ID：11608894
> 
> 赞同：0
> 
> 时间：2012-07-23T08:29:29.473
> 
> 标签：asp.net-mvc-3, razor

我正在尝试这样做：

1.  创建一个模型，将其添加到会话中并将其发送到视图。
2.  在我的视图中更改模型字段
3.  从我的控制器上更新的会话中获取模型

问题是，当我更改文本框上的值时，我的模型永远不会更新，我确信我错过了剃须刀的一些东西，查看：

```
@model MvcTestApp.Models.Car

<div class="b1">

    <div class="b2">@Html.EditorFor(e => e.KM)</div>                    
    <div class="b2">@Html.EditorFor(e => e.RegistrationNumber)</div>

</div>

@Html.ActionLink("Car", "sendCar") 
```

控制器：在 SendCar 上，我想更新模型。

```
namespace MvcTestApp.Controllers
{
    public class CarController : Controller
    {
        public ActionResult Show()
        {
            var model = new MvcTestApp.Models.Car()
            {
                RegistrationNumber ="12345",
                KM = "12345"
            };

            Session["temp"] = model;
            return View("Show",Session["temp"]);
        }

        public ActionResult sendCar()
        {
           return View("Show", Session["temp"]);
        }       

    }
} 
```

模型：

```
namespace MvcTestApp.Models
{

    public class Car
    {

        [DataType(DataType.Text)]
        public string KM { get; set;}

        [DataType(DataType.Text)]
        public string RegistrationNumber { get; set;}

    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:35:35.877

你需要让你的 sendCar 控制器更新模型。目前，您所做的所有更改都只会在本地保留，直到您离开页面。您需要将更改后的模型发布回服务器。

看看这个例子的“处理编辑”部分，看看它是如何完成的：

[Asp.net 教程](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:36:59.543

这样做的方法是将模型详细信息包装在带有提交功能的表单中。然后在您的 sendCar 方法中获取一个 Car 对象，模型绑定将负责设置新对象上的所有内容。

如果你想坚持这个（我认为这只是为了测试目的？）那么也许让你在你的 show 方法中返回的汽车成为一个类变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T08:35:45.567

您应该阅读有关 ASP.NET MVC 的[初学者教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)，它将向您解释如何将数据从表单发送到控制器，因为您似乎完全不知道如何执行此操作。

您并没有错过“某些东西”，您错过了从表单向控制器发送数据的所有内容。

# c# - 如何在 C# 中检测行首的点 (.)？

> ID：11608896
> 
> 赞同：-2
> 
> 时间：2012-07-23T08:29:40.633
> 
> 标签：c#, regex

`.`如果出现在行首，我想删除一个点（ ），例如：

```
hi,
<new line> .
<new line> How are you. 
```

我怎样才能删除这条线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:38:21.467

删除行首的一个点：

```
resultString = Regex.Replace(subjectString, @"^\.", "", RegexOptions.Multiline); 
```

如果它以点开头，则删除整行：

```
resultString = Regex.Replace(subjectString, @"^\..*\r\n", "", RegexOptions.Multiline); 
```

如果它只包含一个点，则删除整行：

```
resultString = Regex.Replace(subjectString, @"^\.\r\n", "", RegexOptions.Multiline); 
```

如果它以点开头并且可能包含尾随空格，则删除整行：

```
resultString = Regex.Replace(subjectString, @"^\.[^\r\n\S]*\r\n", "", RegexOptions.Multiline); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:34:25.050

```
string result = "hi,\n.\nHow are you.".Replace("\n.\n", "\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:34:54.443

您可以使用内置的[字符串比较](http://msdn.microsoft.com/de-de/library/system.string.startswith.aspx)- 有很多可用的。

您可以使用[RegEx](http://msdn.microsoft.com/de-de/library/system.text.regularexpressions.regex.aspx)。

但这一切都归结为一点->您尝试过什么？请[阅读文档](http://www.readthefuckingmanual.com/)。

简短的可能答案：

```
// allLines is your List/Array/Enumerable of all lines that need checking
foreach(string line in allLines){
    if(!line.Trim().StartsWith("."){
        // Do whatever you like with the found string.
        line = line.Remove(".",1);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:35:12.633

在您的情况下，“检测”是什么意思？如果只是在出现点时返回真/假，您可以只搜索`"\n."`- 换行符后跟一个点。你甚至不需要正则表达式：

```
bool weHaveDot = myString[0] == "." || (myString.IndexOf("\n.") > -1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:37:30.233

关于什么：

```
MyLine.Substring(MyLine.IndexOf("<new line> ") + 11).StartsWith(".") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T08:41:46.393

恐怕答案取决于问题的含义。

我的猜测是你有几行，你想删除那些只包含一个点的行。正确的？

那么解决方案是：

*   将字符串拆分成一个字符串数组，每个数组包含一行
*   删除所有仅由一个点组成的数组元素
*   将字符串数组重新连接在一起。

而且您不需要正则表达式。（除非您想获得一些正则表达式的经验；在这种情况下，对不起。）

# maven - 使用 maven 构建 .ear 和 .war

> ID：11608897
> 
> 赞同：0
> 
> 时间：2012-07-23T08:29:47.400
> 
> 标签：maven, maven-2, maven-plugin, maven-3

我正在使用以下命令“mvn archetype:generate -DgroupId=com.mycompany.core -DartifactId=myproject-core -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false”生成一个 maven 原型，该命令现在生成 war 文件我想使用ear文件构建它。

我浏览了网络和这里的一些帖子，需要为 ear 和 war 文件创建两种不同的原型。但我没有得到这里的起点。

我需要用于生成结构的相同原型命令还是需要更改参数？任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:06:55.703

我建议使用[正确的 archetypeArtifactId=maven-archetype-j2ee-simple](http://docs.codehaus.org/display/MAVENUSER/Archetypes+List)而不是 webapp 因为 EAR 意味着 Java EE 应用程序通常包含至少两个模块，例如：

```
 +-- root(pom.xml)
       +-- module-war (pom.xml)
       +-- module-ear (pom.xml) 
```

# r - R中没有NA的多阵列平均

> ID：11608900
> 
> 赞同：3
> 
> 时间：2012-07-23T08:30:03.157
> 
> 标签：r, multidimensional-array

我遇到了多数组平均的问题，例如，我有一个三维 4*4*3 数组`x`，

```
x
 , , 1

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]  0.5   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA

, , 2

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]  0.7   NA   NA   NA
[3,]  0.4   NA   NA   NA
[4,]   NA   NA   NA   NA

, , 3

     [,1] [,2] [,3] [,4]
[1,]   NA   NA  0.8   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA 
```

我想要得到的是没有 NA 的总和，它是非 NA 元素数量的平均值：

基本上，结果是这样的

```
 [,1] [,2] [,3] [,4]

[1,]   0   0  0.8   0
[2,]   0.6  0  0   0
[3,]   0.4  0   0   0
[4,]   0   0   0   0 
```

在matlab中我是这样做`nansum(x, 3)./sum(~isnan(x), 3)`的，我在R中尝试了很多，比如`apply(x, 3, sum, na.rm = T)`or `Reduce`，尝试先得到初步结果

```
 [,1] [,2] [,3] [,4]

[1,]     0   0  0.8   0
[2,]   1.2   0    0   0
[3,]   0.4   0    0   0
[4,]     0   0    0   0 
```

但是我还是没搞定，有没有人打的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:36:36.847

`apply`使用and ，您走在正确的轨道上`na.rm=TRUE`。您只需使用参数指定要应用的多个维度`MARGIN=c(..., ...)`。

这是使用内置数据集的示例`Titanic`：

```
str(Titanic)
 table [1:4, 1:2, 1:2, 1:2] 0 0 35 0 0 0 17 0 118 154 ...
 - attr(*, "dimnames")=List of 4
  ..$ Class   : chr [1:4] "1st" "2nd" "3rd" "Crew"
  ..$ Sex     : chr [1:2] "Male" "Female"
  ..$ Age     : chr [1:2] "Child" "Adult"
  ..$ Survived: chr [1:2] "No" "Yes" 
```

现在对第 3 维和第 4 维求和：

```
apply(Titanic, c(3, 4), sum, na.rm=TRUE)
       Survived
Age       No Yes
  Child   52  57
  Adult 1438 654 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:32:51.710

也许是这样的：

```
apply(x, c(1,2), sum, na.rm=TRUE) 
```

请注意，这是未经测试的，因为缺乏可重复的数据集。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T11:16:19.017

也许这可能有用

```
 # Creating your array, I know this is an ugly way to do it :D
 Array <- array(rep(NA, 16*3), dim=c(4,4,3))
 Array[2,1,1] <- 0.5
 Array[2:3,1,2] <- c(0.7,0.4)
 Array[1,3,3] <-0.8
 Array # this is your array, (Array is not is a very original name)
, , 1

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]  0.5   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA

, , 2

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]  0.7   NA   NA   NA
[3,]  0.4   NA   NA   NA
[4,]   NA   NA   NA   NA

, , 3

     [,1] [,2] [,3] [,4]
[1,]   NA   NA  0.8   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA

 # one way to get what you want could be...
 (result <- apply(Array, c(1,2), mean, na.rm=TRUE))
     [,1] [,2] [,3] [,4]
[1,]  NaN  NaN  0.8  NaN
[2,]  0.6  NaN  NaN  NaN
[3,]  0.4  NaN  NaN  NaN
[4,]  NaN  NaN  NaN  NaN

 # if you want zeroes instead of NaN as your desired output example shows...
 result[is.nan(result)] <- 0

 result
     [,1] [,2] [,3] [,4]
[1,]  0.0    0  0.8    0
[2,]  0.6    0  0.0    0
[3,]  0.4    0  0.0    0
[4,]  0.0    0  0.0    0 
```

# entity-framework - 防止更新实体框架中特定字段的最佳方法是什么

> ID：11608905
> 
> 赞同：8
> 
> 时间：2012-07-23T08:30:11.850
> 
> 标签：entity-framework

我使用实体框架为我的后端逻辑编写了一个带有 MVC 的 Web 应用程序。我的问题是我有一个实体，该实体具有某些不应在更新时更改的字段。我不确定解决这个问题的最佳方法是什么。我的应用程序中将处理大量数据，所以我不能仅仅破解一个解决方案。

是否可以在 POCO 实体中将字段定义为只读？或者我应该编写验证所有更新的实体框架扩展类。是否可以在 EF 和实际数据库之间的映射文件中完成？

我对EF比较陌生，所以我希望你们中的一些人能给我一些指示！

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T23:24:10.133

如果您使用的是 .NET 4.5 和 EF 5（即 MVC 4），您可以简单地在相关的各个属性上设置 IsModified = false。这样做的好处是接近默认的开箱即用 MVC 约定。

例如，如果您有一个 CreatedBy 字段，在更新记录时不应触及该字段，请在控制器中使用以下内容：

```
[HttpPost]
    public ActionResult Edit(Response response)
    {
        if (ModelState.IsValid)
        {
            db.Entry(response).State = EntityState.Modified;
            db.Entry(response).Property(p => p.CreatedBy).IsModified = false;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(response);
    } 
```

请注意，IsModified 行是默认控制器操作的唯一更改。

您必须在设置 .State = EntityState.Modified 之后放置这一行（这适用于整个记录并将记录添加到数据库上下文中）。

效果是 EF 不会在 SQL UPDATE 语句中包含该列。

我仍然（非常）震惊于没有类似于 [ReadOnly] 的 [InsertOnly] 或 [UpdateOnly] 属性。这似乎是 MVC 团队的重大疏忽。我错过了什么吗？

我对这个解决方案并不完全满意，因为它是一个 hack：当你真正想说的是“HANDS OFF”时，你告诉 EF 没有做出任何改变。这也意味着您必须在可以更新字段的任何地方使用此代码。最好在类属性上有一个属性。

（很抱歉发布到较旧的线程，但我在其他任何地方都没有看到这个解决方案。ViewModel 很强大但需要做很多工作，EF 应该让事情变得更容易，而不是更难......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T08:37:08.797

好吧，我建议不要在视图中使用 EF 类。最好的办法是构建 ViewModel 类并使用 Automapper 从 EF 类映射它们。

但是，当您更新数据库中的记录时，您可以控制 ViewModel 中的哪些字段用于更新 EF 类中的现有字段。

正常的过程是：

*   使用 Id 从数据库中获取现有对象的最新版本。

*   如果您使用的是乐观并发控制，请检查自 ViewModel 创建以来对象是否未更新（例如检查时间戳）。

*   使用 ViewModel 对象中的必填字段更新此对象。

*   将更新的对象持久化回数据库。

更新以包括 Automapper 示例：

假设您的 POCO 是

```
public class MyObject 
{
   public int Id {get;set;}
   public string Field1 {get;set;}
   public string Field2 {get;set;}
} 
```

Field1 是您不想更新的字段。

您应该声明一个具有相同属性的视图模型：

```
public class MyObjectModel 
{
   public int Id {get;set;}
   public string Field1 {get;set;}
   public string Field2 {get;set;}
} 
```

并在 Controller 的构造函数中在它们之间自动映射。

```
Mapper.CreateMap<MyObject, MyObjectModel>(); 
```

如果你愿意，你可以（虽然我更喜欢手动执行此操作，但也可以通过其他方式自动映射：

```
Mapper.CreateMap<MyObjectModel, MyObject>().ForMember(dest=>dest.Field1, opt=>opt.Ignore()); 
```

当您将日期发送到您的网站时，您将使用：

```
 var myObjectModelInstance = Mapper.Map<MyObject, MyObjectModel>(myObjectInstance); 
```

创建视图模型。

保存数据时，您可能需要以下内容：

```
public JsonResult SaveMyObject(MyObjectModel myModel)
{
    var poco = Mapper.Map<MyObjectModel, MyObject>(myModel);
    if(myModel.Id == 0 ) 
    {
       //New object
       poco.Field1 = myModel.Field1 //set Field1 for new creates only

    }
} 
```

尽管我可能会删除上面对 Field1 的排除并执行以下操作：

```
public JsonResult SaveMyObject(MyObjectModel myModel)
{
   var poco;
   if(myModel.Id == 0)
   {
     poco = Mapper.Map<MyObjectModel, MyObject>(myModel);
   }        
   else
   {
     poco = myDataLayer.GetMyObjectById(myModel.Id);
     poco.Field2 = myModel.Field2;
   }
   myDataLayer.SaveMyObject(poco);
} 
```

请注意，我相信最佳实践不会让您从 ViewModel 自动映射，而是始终手动执行此操作，包括新项目。

# javascript - 如何制作一个可以将光标指向（鼠标悬停）提交按钮图像的搜索框？

> ID：11608911
> 
> 赞同：1
> 
> 时间：2012-07-23T08:30:48.830
> 
> 标签：javascript, submit, search-engine, imagebutton, onmouseover

我在我的网站上修改了谷歌的搜索引擎。要了解它，请在[http://www.heypy.com上查看它](http://www.heypy.com)上查看它。它位于网站的左上角。我想要的是用户在搜索框中键入关键字后的鼠标悬停功能，并且可以轻松地将鼠标悬停在谷歌徽标提交按钮上，而无需单击它来开始搜索。我希望在新选项卡中打开搜索结果，而不是在新窗口中打开

也许这是一个荒谬的问题，但很难找到该案例的教程。这里的任何专家请给我一个提示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:50:01.203

如果你给你的表单一个 id 并将目标设置为“_new”

```
<form id="formID" method="get" 
action="https://www.google.com/search" target="_new"> 
```

然后将 onmouseover 添加到

```
<input id="example" type="IMAGE" ..
onmouseover="search();"> 
```

在新标签页中打开：

```
function search(){
    document.getElementById("formID").submit();
} 
```

# zend-framework - Zend 控制器不能指定布局

> ID：11608920
> 
> 赞同：1
> 
> 时间：2012-07-23T08:31:25.803
> 
> 标签：zend-framework

我有这个代码

```
class PagamentoController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        $model_pagamenti = new Model_Pagamento();
        $this->_helper->layout->setLayout('/crudabstract/index.phtml');
        $this->view->render('/crudabstract/index.phtml');
    }
... 
```

当我运行 /pagamento/index

我得到这个错误

```
An error occurred
Application error
Exception information:

Message: script 'pagamento/index.phtml' not found in path (C:/www/www/abc/application/views\scripts/)
Stack trace: 
```

为什么它不起作用？它不应该在寻找**"pagamento/index.phtml"**，而是在寻找**"/crudabstract/index.phtml"**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:45:02.790

在我自己的代码中发现了如何

```
$this->_helper->viewRenderer('crudabstract/'.$this->_request->getActionName(), null, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:57:53.237

错误消息指出没有为索引操作定义视图脚本。当您定义控制器时，zend 框架将自动查找在您的情况下未找到的相应视图文件。所以在中创建一个对应的视图文件

```
application/views/script/pagamento/index.phtml 
```

它应该可以工作。

# java - BlazeDS 如何处理 Java Bean 类中的 Map？

> ID：11608921
> 
> 赞同：1
> 
> 时间：2012-07-23T08:31:28.377
> 
> 标签：java, apache-flex, blazeds

//弹性类

```
package com.mycompany{
         import flash.utils.Dictionary;

         [Bindable]
         [RemoteClass(alias="com.mycompany.bean.MessageBundle")]

         [Bindable]
         public class MessageBundleVO{
             public var messages:Object ;

             public function getMessage(key:String):String{
                return messages.key as String;
             }
        }
    } 
```

//Java类

```
package com.mycompany.bean;

        import java.io.Serializable;
        import java.util.Map;

        public class MessageBundle implements Serializable {
            private static final long serialVersionUID = 1L;
            private Map messages;

            public Map getMessageBundle() {
                return messages;
            }

            public void setMessageBundle(Map messageBundle) {
                this.messages = messageBundle;
            }

            public String toString(){
                return messages.toString();
            }
        } 
```

一切都正确链接，MessageBundleVO 的实例不为空，但其属性消息为空。

如果我们在上面的代码中使用 RemoteClass 标签，你能告诉我什么是 Map 的 Flex 等价物。

这在 flex 方面是空的。MessageBundleVO.messages

```
 The Aodbe
    http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_4.html

    is suggesting
    Array (sparse)—->java.util.Map–&gt;java.util.Map 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:07:44.333

这里有很多东西：

*   变量名：BlazeDS 使用公共字段和公共访问器作为序列化变量名。所以从 flex 的角度来看，MessageBundle java 类只包含一个名为“messageBundle”的映射，而没有一个名为“messages”的映射
*   它将被转换为一个对象，所以这没关系
*   在您的 getMessage 函数客户端，我认为该函数不会做您认为它会做的事情:)。在当前版本中，它将获取名为“key”的属性。为了实现您的需要，您应该将“messages.key”替换为“messages[key]”
*   您不需要 2 倍的 [Bindable] 元数据

# c# - 将字符串转换为 int。或数字转文本。（“1”到“一”，“3”到“三”等）在控制台应用程序中？

> ID：11608922
> 
> 赞同：1
> 
> 时间：2012-07-23T08:31:31.863
> 
> 标签：c#, string, console, integer, console-application

我有一个控制台应用程序，它要求用户使用数字（1-9 和 0）输入一个数字。我想知道是否有一种方法可以将该数字转换为文本字符串。

谢谢。我在[网上（这里）](https://stackoverflow.com/questions/3213/convert-integers-to-written-numbers)找到了一些代码，但我不确定如何将大部分代码实现到控制台应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:40:43.713

我会写一个函数

```
string DigitToText(int digit)
{
   if (digit < 0 || digit > 9)
   {
       throw new ArgumentOutOfRangeException(
           "digit", 
           "digit must be between 0 and 9");
   }

   switch(digit)
   {
       case 0:
           return "zero";

       case 1:
           return "one";

       case 2:
           return "two";

       case 3:
           return "three";

       case 4:
           return "four";

       case 5:
           return "five";

       case 6:
           return "six";

       case 7:
           return "seven";

       case 8:
           return "eight";

       default:
           return "nine";
   }
} 
```

使用 switch 语句将节省大量不必要的数组实例化，尽管这可能看起来很冗长，但我认为生成的 IL 将是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:33:44.123

您在那里找到的代码与应用程序类型无关。只需将那里的类添加到您的项目中并使用它。

# google-visualization - Google Chart API：启用分页时可以在表格中显示页码吗？

> ID：11608923
> 
> 赞同：1
> 
> 时间：2012-07-23T08:31:35.327
> 
> 标签：google-visualization

我使用谷歌图表 API。

启用分页时可以在表格中显示页码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-16T01:11:44.183

`"page: 'enable'"`在提供表格选项时，页码将自动显示。

```
 var tab_options = {title: 'Table View',
        showRowNumber: true,
        width: '100%',
        hieght: '50%',
        page: 'enable',
        pageSize: '10',
        // pagingSymbols: {prev: ['< prev'],next: ['next >']},
        allowHtml: true,
        alternatingRowStyle: true}

    // Instantiate and Draw our Table
    var table = new google.visualization.Table(document.getElementById(div_id));

    table.clearChart();
    table.draw(TableData, tab_options); 
```

[在这里](https://developers.google.com/chart/interactive/docs/gallery/table)参考更多

# ipython - 我已经在 IPython.Stil 中安装了每个依赖项，它显示如下错误

> ID：11608925
> 
> 赞同：2
> 
> 时间：2012-07-23T08:31:46.587
> 
> 标签：ipython

在 [3] 中：ipcluster start -n 4 文件“”，第 1 行 ipcluster start -n 4 ^ SyntaxError: invalid syntax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:35:43.887

根据[http://mail.scipy.org/pipermail/ipython-user/2011-April/007477.html](http://mail.scipy.org/pipermail/ipython-user/2011-April/007477.html)，您可能正在尝试从 Python 运行命令行脚本。您应该尝试从命令行运行 ipcluster。

# apache - 仅激活我可以在 Mac OS 上使用带有 apache 的虚拟主机的网络共享

> ID：11608930
> 
> 赞同：1
> 
> 时间：2012-07-23T08:32:23.350
> 
> 标签：apache, virtualhost, osx-server

我已经配置了 httpd.conf 和 httpd-vhosts.conf，当我激活网络共享时，虚拟主机很有用，但是当我关闭网络共享并启动 apache 时，虚拟主机不起作用

这是我的虚拟主机配置

```
<VirtualHost *:80>
        DocumentRoot "/Users/lch/Sites"
        ServerName myhome.com
</VirtualHost>
<Directory "/User/lch/Sites">
        Options None
        Allow from all
</Directory> 
```

而且，这里是错误捷径：

我是 Mac OS 的新手，我来自中国。感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:16:13.307

要检查的两件事：

1.  httpd.conf 中是否未注释 httpd-vhosts.conf 的包含？我相信它默认被注释掉了。
2.  您是否已将 myhome.com 添加到您的主机文件中？确保在 /etc/hosts 中有以下条目：`127.0.0.1 myhome.com`

# vsto - 签名的 VSTO“未知发布者”错误

> ID：11608935
> 
> 赞同：0
> 
> 时间：2012-07-23T08:32:44.623
> 
> 标签：vsto

我目前正在为 powerpoint 创建一个 VSTO 插件。我正在使用 Visual Studio 2008 开发框架。当我尝试在我的机器上安装 VSTO 时，它给了我“未知发布者”错误。为了解决这个问题，我尝试了以下方法：

1.  使用带有真实证书的 Visual Studio 2008 的 powerpoint 插件项目中内置的 clickonce 工具对清单和 vsto 进行签名
2.  也使用相同的方式对 dll 进行签名。

尽管如此，我在安装 VSTO 时弹出“未知发布者”。然后我在我的机器上安装了证书，并且从未发生过“未知发布者”错误。但在未安装证书的其他机器上，它会给出相同的错误。所以我尝试了另一种方法，其中我签署了 vsto 和 dll 并通过 Mage.exe 显式显示。但是，在其他机器上安装时，它给出了同样的错误。请注意，我用于签名的证书是从证书颁发机构验证的

请谁能告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:15:54.017

阅读[配置单击一次信任提示](http://msdn.microsoft.com/en-us/library/cc176048%28v=vs.90%29.aspx)

# asp.net-mvc-3 - 在 mvc3 的新选项卡中打开视图

> ID：11608937
> 
> 赞同：0
> 
> 时间：2012-07-23T08:32:52.047
> 
> 标签：asp.net-mvc-3, telerik-mvc

我正在使用 mvc3 和 telerik mvc 网格。在网格中，我给出了自定义命令。当我们单击该命令时，应在新选项卡中打开一个新视图。比如说，打开的视图是“主页/索引”，其中 Telerik 网格在那里，网格内的自定义按钮将打开新视图，在新选项卡“帖子”中说“帖子/索引”是控制器名称，“索引”是操作名称。

我怎样才能达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:33:41.550

```
@{
Html.Telerik().Grid<Model>()
    .Name("Runs")
    .DataKeys(keys => keys.Add(r => r.ID))
    .DataBinding(dataBinding => dataBinding
        //Ajax binding
                    .Ajax()
                    .Select("Run", "Management")
                )
            .Columns(columns =>
        {
            columns.Bound(r => r.Definition.Name).Width(100);
            columns.Bound(r => r.CreateTime);
            columns.Bound(r => r.FileName); 
            columns.Bound(r => r.Status);
            columns.Bound(r => r.CreatedBy);
            columns.Bound(r => r.ID).ClientTemplate(Html.ActionLink("View", "RunDetails", new { id = "<#= ID #>" }, new { @class = "t-grid-action t-button t-state-default t-grid-edit t-button-hover" }).ToString()).Width(200).Title("Commands").Filterable(false);
        })
    .Pageable(pager => pager.PageSize(20))
    .Sortable( sorting => sorting.SortMode(GridSortMode.MultipleColumn))
    .Filterable()
    .Render();
} 
```

试试这个...

# ios - 使用 telprompt 的应用会被拒绝吗

> ID：11608940
> 
> 赞同：18
> 
> 时间：2012-07-23T08:33:13.340
> 
> 标签：ios, iphone-privateapi, telprompt

为了在通话后返回应用程序，我使用 telprompt 而不是 tel。像这样的代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://10086"]]; 
```

有人说它会被苹果拒绝，因为 telpromt 不是公共 URL Scheme。但我没有找到确定的答案 - 是或否。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-22T12:36:18.363

我注意到在 iOS 8.0 中，`tel://`URL 方案也会在调用后返回到应用程序。现在唯一的区别是`telprompt://`应用程序会在开始通话之前进行提示。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-05T07:06:18.173

`telprompt://`并且`tel://`现在都是 iOS 的有效自定义 URL 方案。

由于 Apple 没有关于 的文档`telprompt`，因此可能会在不通知的情况下删除其功能（尽管可能性很小）。

*注意：他们的行为是不同的。前者更好，因为它不会直接拨打号码，也不会在通话后停留在电话应用程序中。*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T10:09:29.817

你可能想看看[handleopenurl.com](http://handleopenurl.com/scheme/phone)一个 iOS URL 方案的索引。

我不知道telprompt。为什么不直接使用 tel://10086？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T09:52:52.803

这不会让您的申请被拒绝，因为我已经用这个上传了一个应用程序并且它现在在 App Store 上。

# ruby-on-rails - 在 Rails 应用程序中缓存 Facebook 好友的最佳实践？

> ID：11608941
> 
> 赞同：1
> 
> 时间：2012-07-23T08:33:16.707
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, devise, koala

我有一个 Rails 网络应用程序（Devise + Koala），用户使用 Facebook 登录。用户在应用程序内与他们的 Facebook 朋友互动。

出于缓存目的导入用户 Facebook 好友列表非常耗时。

这里的最佳实践是什么：我应该尽量避免朋友缓存吗？我应该在守护进程后台线程中进行导入吗？

我知道用于更新的 Facebook 实时 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:52:23.623

将列表存储在缓存中将比每次要检索用户的朋友时在 facebook 上查找它们更省时。

Postgres 有一种称为 hstore 的数据类型，它允许您将数据作为散列而不是序列化类型存储在列中。您可以使用此 gem 添加到 Rails： [https ://github.com/softa/activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore)

它使存储诸如 Facebook 好友缓存之类的东西变得更容易；您可以使用 SQL 语句搜索散列。

因此，在您的情况下，您可以告诉 facebook 订阅对用户好友连接的更改，并将其指向您的应用程序中的回调，该回调会更新用户的好友列表缓存。请注意，您需要用新列表替换整个哈希，因为不可能对 hstore 进行原子操作。祝你好运！

# couchdb - 不分离reduce键的CouchDB视图映射功能

> ID：11608946
> 
> 赞同：2
> 
> 时间：2012-07-23T08:33:25.740
> 
> 标签：couchdb, mapreduce

这是文档*“模式”*：

```
{
    type: "offer",
    product: "xxx",
    price: "14",
    valid_from: [2012, 7, 1, 0, 0, 0]
} 
```

有很多这样的文件，在过去和未来有很多有效日期，而且很多时候在同一个月有两个或三个报价。我找不到做出以下观点的方法：*给定一个日期，给我一份产品列表及其在该日期的运行报价。*

我想我需要发出该`valid_date`字段才能将查询的 endkey 设置为给定的日期，然后我需要减少该字段的最大值，这意味着我不能发出它。

我是不是搞错了？我对 map/reduce 概念完全陌生。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:03:49.870

我真的被您关于想要减少的评论所困扰，根据您的要求，您只需要一个地图功能 - 没有减少。这是根据您要求的地图功能：

```
function(d) {
  if( d.type === 'offer' ) {
    var dd = d.valid_from;

    dd[1] = ( '0' + ( dd[1] + 1 )).slice(-2);   // remove the +1 if 7 is July not August
    dd[2] = ( '0' + dd[2] ).slice(-2);

    emit( dd.slice(0,3).join('-') );
  }
} 
```

然后要显示对给定日期有效的所有优惠，您可以使用以下参数查询此视图：

```
endkey="2012-08-01"&include_docs=true 
```

# javascript - HTML5 / JS 线性规

> ID：11608947
> 
> 赞同：4
> 
> 时间：2012-07-23T08:33:27.287
> 
> 标签：javascript, html, charts

我想使用 html5 或 javascript在[融合图表中显示一个线性仪表。](http://docs.fusioncharts.com/flex/charts/Contents/Widget_XML_API/Linear_Config.html)在进行谷歌搜索时，我找不到任何类似于融合图表的开源/免费线性仪表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:10:48.607

[您可以使用http://amcharts.com](http://amcharts.com)实现几乎相同的效果，代码如下：

```
 <script type="text/javascript">
        var chart;

        var chartData = [{
            category: "",
            bad: 75,
            moderate: 15,
            good: 10
        }];

        AmCharts.ready(function () {
            // SERIALL CHART
            chart = new AmCharts.AmSerialChart();
            chart.dataProvider = chartData;
            chart.categoryField = "category";
            chart.rotate = true;
            chart.columnWidth = 1;

            // AXES
            // Category
            var categoryAxis = chart.categoryAxis;
            categoryAxis.gridAlpha = 0;
            categoryAxis.axisAlpha = 0;
            categoryAxis.gridPosition = "start";

            // value                      
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.stackType = "100%";
            valueAxis.gridAlpha = 0;
            valueAxis.autoGridCount = false;
            valueAxis.gridCount = 20;
            valueAxis.axisAlpha = 1;
            chart.addValueAxis(valueAxis);

            // GRAPHS
            // firstgraph 
            var graph = new AmCharts.AmGraph();
            graph.labelText = "Bad";
            graph.valueField = "bad";
            graph.type = "column";
            graph.lineAlpha = 0;
            graph.fillAlphas = 1;
            graph.fillColors = ["#d05c4f", "#ffb2a8"];
            chart.addGraph(graph);

            // second graph                              
            graph = new AmCharts.AmGraph();
            graph.labelText = "[[value]]";
            graph.valueField = "namerica";
            graph.type = "column";
            graph.lineAlpha = 0;
            graph.fillAlphas = 1;
            graph.lineColor = "#D8E0BD";
            chart.addGraph(graph);

            // thirdt graph              
            graph = new AmCharts.AmGraph();
            graph.labelText = "Moderate";
            graph.valueField = "moderate";
            graph.type = "column";
            graph.lineAlpha = 0;
            graph.fillAlphas = 1;
            graph.fillColors = ["#cba01e", "#fee3a0"];
            chart.addGraph(graph);

            // fourth graph 
            graph = new AmCharts.AmGraph();
            graph.labelText = "Good";
            graph.valueField = "good";
            graph.type = "column";
            graph.lineAlpha = 0;
            graph.fillAlphas = 1;
            graph.fillColors = ["#74960c","#d2e594"];
            chart.addGraph(graph);

            // WRITE
            chart.write("chartdiv");
        });

    </script>
</head>

<body>
    <div id="chartdiv" style="width: 500px; height: 100px;"></div>
</body> 
```

结果如下：

![在此处输入图像描述](../Images/e77e29b7cd3767ac8e0b0ff17c36f191.png)

# java - 如何将数据发布到其他服务器中的表单

> ID：11608952
> 
> 赞同：0
> 
> 时间：2012-07-23T08:33:49.253
> 
> 标签：java, https, forms, http-post

我正在创建自动化系统以将数据发布到表单以注册到网站

```
 URL url = new URL("https://www.walmart.com/subflow/YourAccountLoginContext/1471476370/sub_generic_login/create_account.do");
String postData = "firstName="+xlsDataList.get(0)+"&lastName="+xlsDataList.get(1)+"&userName="+xlsDataList.get(2)+"&userNameConfirm="+xlsDataList.get(3)+"&pwd="+xlsDataList.get(5)+"&pwdConfirm="+xlsDataList.get(6);
HttpsURLConnection  uc = (HttpsURLConnection) url.openConnection();
uc.setDoInput(true);
uc.setDoOutput(true);
uc.setRequestMethod("POST");
uc.setRequestProperty("Accept", "*/*");
uc.setRequestProperty("Content-Length", Integer.toString(postData.getBytes().length));
uc.setRequestProperty("Content-Type", "text/html; charset=utf-8");
OutputStreamWriter outputWriter = new OutputStreamWriter(uc.getOutputStream());
outputWriter.write(postData);
outputWriter.flush();
outputWriter.close(); 
```

我认为上面那些 postdata 只是请求属性，并进行了相应的编码。但是在仔细检查了视图源之后，我才知道这些是表单属性。我无权访问该表格。现在我如何将数据发布到表单，以便用户在网站上注册？

我必须将值设置为 formbean。请提供您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:25:01.680

您在 POST 中使用错误`Content-Type`：您需要使用`application/x-www-form-urlencoded`. 更改后，服务器会将您的请求正文解释为请求参数，并且（可能）您的“formbean”将填充数据。

上面的代码可能是一个测试用例，但您确实应该注意正确编码您尝试发布的所有数据。否则，您将面临语法无效请求（在这种情况下，服务器将拒绝请求或忽略重要参数）或引入安全漏洞，用户可以将任意请求参数注入您的 POST 的风险。我强烈推荐如下代码：

```
import java.net.URLEncoder;

String charset = "UTF-8"; // Change this if you want some other encoding
StringBuilder postData = new StringBuilder();
postData.append(URLEncoder.encode("firstName", charset));
postData.append("=");
postData.append(URLEncoder.encode(xlsDataList.get(0)), charset);
postData.append("&");
postData.append(URLEncoder.encode("lastName", charset));
postData.append("=");
postData.append(URLEncoder.encode(xlsDataList.get(1), charset));
postData.append("&");
postData.append(URLEncoder.encode("userName", charset));
postData.append("=");
postData.append(URLEncoder.encode(xlsDataList.get(2), charset));
postData.append("&");
postData.append(URLEncoder.encode("userNameConfirm", charset));
postData.append("=");
postData.append(URLEncoder.encode(xlsDataList.get(3), charset));
postData.append("&");
postData.append(URLEncoder.encode("pwd", charset));
postData.append("=");
postData.append(URLEncoder.encode(xlsDataList.get(5), charset));
postData.append("&");
postData.append(URLEncoder.encode("pwdConfirm", charset));
postData.append("=");
postData.append(xlsDataList.get(6), charset)); 
```

对像“userNameConfirm”这样的静态字符串进行编码似乎很愚蠢，但如果你养成了这种习惯，你最终会一直使用它，你的代码会更安全。

此外，您需要确保通过 发送的数据`OutputStream`是正确的`Content-Length`：您*正在*正确计算内容长度，但是您没有使用用于计算的字节发送到客户端。您希望您的代码看起来更像这样：

```
byte[] postDataBytes = postData.getBytes(charset);
uc.setRequestProperty("Content-Length", Integer.toString(postDataBytes.length));
uc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
OutputStream outputStream = uc.getOutputStream();
outputStream.write(postDataBytes);
outputStream.flush();
outputStream.close(); 
```

`HTTPUrlConnection`您可以在社区 wiki中找到非常全面的教程：[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:31:11.977

通过修改用户代理尝试欺骗浏览器。沃尔玛可能有一种安全机制，可以检测到您正在以自动方式执行此操作。

（如果您在设置用户代理时遇到问题，请参阅这篇文章：[设置 java URLConnection 的用户代理](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:08:15.173

此外，请仔细检查您发送的参数。服务器正在对输入数据进行一些验证。例如，有些字段是强制性的，有些只是数字，等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:18:47.880

如果您的项目使用 Spring 3.x 或更高版本，我建议使用 Spring RestTemplate 它非常方便地执行 http，下面的代码将记录做一个表单发布。

```
public String login(String username, String password)
    {
        MultiValueMap<String, String> form = new LinkedMultiValueMap<>();
        form.add(usernameInputFieldName, username);
        form.add(passwordInputFieldName, password);
            RestTemplate template = new RestTemplate(); 
        URI location = template.postForLocation(loginUrl(), form);
        return location.toString();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:42:07.863

我推荐使用 Apache HttpClient。它更快更容易实施。

```
PostMethod post = new PostMethod("https://www.walmart.com/subflow/YourAccountLoginContext/1471476370/sub_generic_login/create_account.do");
    NameValuePair[] data = {
      new NameValuePair("firstName", "joe"),
      new NameValuePair("lastName", "bloggs")
    };
    post.setRequestBody(data);
    InputStream in = post.getResponseBodyAsStream();
    // handle response. 
```

详情可以参考[http://hc.apache.org/](http://hc.apache.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T17:17:15.673

您在评论中描述的“HTTP 错误 500”是“内部服务器错误”。

这意味着服务器要么无法使用您的请求 (GET/POST)，要么存在特定于您尝试调用的服务器的问题。

看看你调用的 URL，我立即出现了同样的错误 500。

httqs://www.walmart.com/subflow/YourAccountLoginContext/1471476370/sub_generic_login/create_account.do 上的 GET 和 POST 请求也是如此（实时链接已停用；将“q”替换为“p”以使其正常工作。）

简而言之：WallMart 服务器通常返回的“HTTP 错误 500”会阻止您的调用成功。

**顺便一提：**

如果他们锁定您的访问权限，则收到错误 500 而不是 403 的情况并不少见。

由于您可能不拥有 WallMart 网站，并且由于您正在尝试访问其网站的值得保护免受 3rd 方访问的级别，因此很可能就是这种情况。;)

*PS：我不确定像这样在公共场合显示 AccountLogin 号码是否明智。毕竟，它是特定 WallMart 帐户持有人的客户 ID。但是，嘿，这是你的选择，不是我的。*

# c++ - gSOAP 多线程复制分段错误

> ID：11608953
> 
> 赞同：0
> 
> 时间：2012-07-23T08:33:55.917
> 
> 标签：c++, gsoap

我在我的一个项目中在 Linux 下使用 gSOAP，并且在使用服务器很长时间时遇到问题（实际上不是很长时间，大约 10 小时后出现此错误......）。我按照前段时间[在这里](https://stackoverflow.com/questions/8150380/gsoap-multithreading)给出的示例进行 gSOAP 中的多线程处理。我创建了一个肥皂服务，然后使用复制方法并将其传递给一个线程。线程函数是这样的：

```
void MyClass::SoapServer(myservice::Service* soapService)
{
    int res = soapService->serve();
    if (res != SOAP_OK)
    {
        // log error
    }
    soapService->destroy();
    soap_free(soapService);
} 
```

几个小时后，当有一个调用 SOAP 函数的常量轮询器时，我在 gSOAP 复制函数中遇到分段错误。下面我附上接受连接并创建线程的代码。

```
while(true)
{
    int error = mySoapService.accept();
    if (!soap_valid_socket(error))
{
        //error
    }
    else
    {
        myservice::Service *soapServiceCopy = NULL;
        soapServiceCopy = mySoapService.copy();
        // create thread using the SoapServer function 
        // and pass soapServiceCopy as an argument         
    }
} 
```

在我看来，肥皂服务清理工作已正确执行，有什么我遗漏的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:21:29.553

您的代码与您链接到的示例之间的区别在于您`soap_free()`用于释放 soapService 对象而我的示例使用`delete`. 将我的示例代码更改为使用`soap_free()`，然后在 valgrind 下运行它会导致报告 free / delete / delete[] 不匹配，这让我认为这`soap_free()`是建立在 free 之上的，但该`.copy()`方法使用 new 来创建副本。

# mysql - 向 mySql 中的现有表添加唯一值

> ID：11608955
> 
> 赞同：0
> 
> 时间：2012-07-23T08:34:00.293
> 
> 标签：mysql, sql, database

再会

我`NEW_TABLE`从另一个表的一些列中创建了一个表`OLD_TABLE`。

我添加了一个 `ID`double 类型的新列

我想用唯一值填充 ID 列的值，然后使其成为`NEW_TABLE`键。

有没有办法在 MySQL 中使用查询或设置命令来做到这一点？

我试过这样的事情：

```
Insert into NEW_TABLE
(select  generateId() , col1, col2 
 from ORIGINAL_TABLE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:38:47.927

通常，您在定义字段时将其设置为自动递增字段。之后，您可以使用：

```
ALTER TABLE NEW_TABLE MODIFY ID int(10) unsigned NOT NULL auto_increment; 
```

然后插入一条新记录并让它自动获得分配的 ID，只需从插入中省略该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:37:11.937

试试这个：

```
Insert into NEW_TABLE
(select   @row := @row + 1 as generateId, col1, col2 
 from ORIGINAL_TABLE, (SELECT @row := 0)row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:38:07.797

你应该使用自动增量和一个整数字段（你有什么理由想要一个双键吗？）：

```
CREATE TABLE NEW_TABLE (
     id INT NOT NULL AUTO_INCREMENT,
     col1 CHAR(30) NOT NULL,
     col2 CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:42:45.973

为什么选择`DOUBLE`而不是整数数据类型？

```
ALTER TABLE NEW_TABLE
  MODIFY ID INT UNSIGNED NOT NULL AUTO_INCREMENT ;

ALTER TABLE NEW_TABLE
  ADD CONSTRAINT new_table_pk
    PRIMARY KEY (ID) ; 
```

进而：

```
INSERT INTO NEW_TABLE 
  (col1, col2)
SELECT col1, col2 
FROM ORIGINAL_TABLE ; 
```

# c# - 命令完成后获取命令提示符窗口内容

> ID：11608959
> 
> 赞同：2
> 
> 时间：2012-07-23T08:34:08.893
> 
> 标签：c#, winforms, cmd

我希望在 C# 中完成命令后获取命令提示符窗口的内容。

具体来说，在这种情况下，我通过单击按钮发出 ping 命令，并希望在文本框中显示输出。

我目前使用的代码是：

```
ProcessStartInfo startInfo = new ProcessStartInfo("cmd.exe");
startInfo.UseShellExecute = false;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardError = true;
startInfo.Arguments = "ping 192.168.1.254";
Process pingIt = Process.Start(startInfo);
string errors = pingIt.StandardError.ReadToEnd();
string output = pingIt.StandardOutput.ReadToEnd();

txtLog.Text = "";
if (errors != "")
{
    txtLog.Text = errors;
}
else
{
    txtLog.Text = output;
} 
```

它确实有效。它至少抓取一些输出并显示它，但 ping 本身不执行 - 或者至少这是我假设给定下面的输出并且命令提示符窗口闪烁一秒钟。

**输出：**

> Microsoft Windows [版本 6.1.7601] 版权所有 (c) 2009 Microsoft Corporation。版权所有。
> 
> C:\Checkout\PingUtility\PingUtility\bin\Debug>

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T08:43:18.733

这应该这样做

```
ProcessStartInfo info = new ProcessStartInfo(); 
info.Arguments = "/C ping 127.0.0.1"; 
info.WindowStyle = ProcessWindowStyle.Hidden; 
info.CreateNoWindow = true; 
info.FileName = "cmd.exe"; 
info.UseShellExecute = false; 
info.RedirectStandardOutput = true; 
using (Process process = Process.Start(info)) 
{ 
    using (StreamReader reader = process.StandardOutput) 
    { 
        string result = reader.ReadToEnd(); 
        textBox1.Text += result; 
    } 
} 
```

输出

![在此处输入图像描述](../Images/3c1bfb57f12f75eb8b98471fc95fdbd8.png)

# javascript - 如何从 ASHX 页面读取 excel 文件？

> ID：11608965
> 
> 赞同：0
> 
> 时间：2012-07-23T08:34:24.603
> 
> 标签：javascript, asp.net, filehandler

嗨，我已将文件上传到一台 amazon s3 服务器，我如何读取 excel 文件并想将 excel 数据发送到数据库。我的代码是

```
<script type="text/javascript">
         var obj = null;
         $(function () {
             $('#fileupload').fileupload({
                 replaceFileInput: false,
                 formData: function (form) {
                     return [{ name: "name1", value: "value1" }, { name: "name2", value: "value2"}];
             $('#btnGo').click(function () {
                 obj.submit();
             });
         });
     </script> 
```

还有我的 ashx 页面，我需要在其中读取 excel 数据

```
public class AjaxFileHandler : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            var file = context.Request.Files[0];
            string fileName=fileName = Guid.NewGuid().ToString() + file.FileName;
            Stream streamContentFile = context.Request.Files[0].InputStream;

            var iFileSize = context.Request.Files[0].ContentLength;
            byte[] data = new byte[iFileSize];
            int bytes_read = 0;
            while (bytes_read < iFileSize)
            {
                int bytes_read_this_iteration = streamContentFile.Read(data, bytes_read, iFileSize - bytes_read);
            streamContentFile.Close();
            streamContentFile.Dispose();
            CommonBLL.UploadTemporaryFilesToS3Bucket(fileName, data);
//Here i need to read excel code can you provide how to do that pleas
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:41:35.500

你需要两件事：

*   允许代码读取 Excel 内容的**驱动程序**
*   **访问**此文件
*   对excel数据的**查询**

在此示例中：

*   我使用必须安装在服务器上的[ACE（Microsoft Access 数据库引擎）驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
*   文件在`App_Data`文件夹中（在你的情况下，文件应该是 CommonBLL 库，我想）
*   查询是`UPDATE`查询；您可以使用常见的 DB Snippets 替换为`SELECT`or`INSERT`查询。

    ```
    string fileName= Server.MapPath( "~/App_Data/MyFile.xls");
    string sheetName= "Sheet1";
    string connString = string.Format(
          "Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 8.0;HDR=No'"
          , fileName);
    string command = string.Format("UPDATE [{0}${1}:{1}] SET F1='{2}'", sheetName,cellName, cellValue);

       using (OleDbConnection oledbConn = new OleDbConnection(connString))
        {
            oledbConn.Open();
            using (OleDbCommand cmd = new OleDbCommand(command, oledbConn))
                cmd.ExecuteNonQuery();

            oledbConn.Close();
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:47:31.793

[我会为 excel、 EPPlus](http://epplus.codeplex.com/) (xslx) 或[NPOI](http://npoi.codeplex.com/) (xls)使用开源库。它们非常易于使用，我正在使用 EPPlus 进行大量的 excel 导入/导出，并且效果很好。这些库没有外部依赖，您可以在服务器端使用它。

# ruby-on-rails - 在活动管理员中创建相关记录时创建新关联

> ID：11608967
> 
> 赞同：2
> 
> 时间：2012-07-23T08:34:39.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我有这两个模型

```
class Case < ActiveRecord::Base
  belongs_to :client, :class_name => 'User'
end

class User < ActiveRecord::Base
  has_one :requested_case, :class_name => 'Case', :foreign_key => :requested_case_id
end 
```

我想使用 Active Admin 为案例模型创建管理接口，所以当我创建新案例时，我可以同时为其创建新客户端，所以我在 app/admin/cases.rb 文件中编写了以下代码行

```
ActiveAdmin.register Case do
    form do |f|
        f.inputs "Basic Details"
            f.input :title
            f.input :Description
        end

        f.inputs :name => "Client Details", :for => :client do |c|
            c.input :name
            c.input :mobile
        end
        f.buttons
    end
end 
```

所以当我提交客户的输入并单击提交时，我收到了这个错误

```
ActiveRecord::AssociationTypeMismatch in Admin::CasesController#create
User(#-625154418) expected, got ActiveSupport::HashWithIndifferentAccess(#82665960) 
```

所以任何帮助请这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:42:11.597

只需添加到您的`app/admin/cases.rb`文件中

```
controller do
    def new
        @case = Case.new
        @case.build_client
    end
end 
```

并且不要忘记添加`accepts_nested_attributes_for` 到您的`case`模型中

```
 accepts_nested_attributes_for :client 
```

# asp.net - 如何在 ASP .NET 中加粗文本

> ID：11608968
> 
> 赞同：2
> 
> 时间：2012-07-23T08:34:41.713
> 
> 标签：asp.net

我怎样才能像这样加粗我的输出

学生“**约翰**”分配给军官“**米克**”。

我希望**约翰**和**米克**在网络上加粗

这是我的代码 aspx ：

> this.lblAssignee.Text = "学生\"" + StudentAssign + "\" 分配给官员\"" + objAssign.FullName + "\".";

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:37:18.983

尝试这个

```
this.lblAssignee.Text = " Student \"<b>" + StudentAssign + "</b>\" assigned to Officer \"<b>" + objAssign.FullName + "</b>\"."; 
```

或者这个（更好的可维护性）

```
this.lblAssignee.Text = " Student \"<span class='highlight'>" + StudentAssign + "</span>\" assigned to Officer \"<span class='highlight'>" + objAssign.FullName + "</span>\"."; 
```

在你的样式表中

```
.highlight { font-weight: bold; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-08T19:21:30.427

另一种选择是将标签的 Font.Bold 属性设置为 True。

就像是：

```
myLabel.Font.Bold = True 
```

假设您当然可以使用多个标签。

# regex - 从 YQL 查询中提取特定的匹配文本（正则表达式？）

> ID：11608971
> 
> 赞同：1
> 
> 时间：2012-07-23T08:34:46.273
> 
> 标签：regex, yql

我想使用 YQL 从网页上的特定段落 div 中提取文本 ID。id 的格式为“ApplicationRef:NNN”。我使用的基本查询是：

```
select content from html where url="..." and content matches "ApplicationRef*" 
```

它返回包含该文本的整个段落。但是，我想进一步处理结果，以便查询只返回每个段落的 NNN 部分。这可能吗？

我意识到我可以在本地进一步处理 YQL 查询的结果，但如果我可以在 YQL 查询本身内一次性完成所有处理，那就更简洁了。

谢谢，

# apache - Apache 重写规则 - 路径样式

> ID：11608974
> 
> 赞同：0
> 
> 时间：2012-07-23T08:35:03.357
> 
> 标签：apache, mod-rewrite

我从 IIS 世界来到 Apache，希望能在重写规则方面提供一些帮助。

我想要这个相对路径：

```
/index.php?go=order&id=12345 
```

改写为：

```
/go/order/id/12345 
```

另外，如果有更多的参数，它们应该转换为路径格式：

```
/index.php?go=order&id=12345&action=process 
```

变成

```
/go/order/id/12345/action/process 
```

请问我该如何实现？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:28:15.160

尝试将其放入您的虚拟主机配置中：

```
RewriteEngine On

# Start converting query parameters to path
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?[^\ ]+
RewriteCond %{QUERY_STRING} ^([^=]+)=([^&]+)&?(.*)$
RewriteRule ^(.*)$ $1/%1/%2?%3 [L]

# done converting, remove index.php and redirect browser
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?[^\ ]+
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^/index.php/(.*)$ /$1 [R=301,L]

# internally rewrite paths to query strings
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteRule ^/([^/]+)/([^/]+)/?(.*) /$3?$1=$2 [L,QSA]

# No more path, rewrite to index.php
RewriteRule ^/$ /index.php [L] 
```

这些规则将使得如果您在`http://yourdomain.com/index.php?a=b&1=2&z=x`浏览器中输入 URL，浏览器将被重定向到`http://yourdomain.com/a/b/1/2/z/x`. 当请求干净的 URL 时，第二组规则在内部将其重写回`/index.php?a=b&1=2&z=x`. 如果要将这些规则放在 htaccess 文件中（在文档根目录中），则需要删除`RewriteRule`'s. 所以`^/`需要`^`在最后3条规则中。

请注意，如果您只是转到`http://yourdomain.com/index.php`，而没有查询字符串，则不会重写任何内容。

# c# - C# Collection 被修改；枚举操作可能无法执行

> ID：11608976
> 
> 赞同：0
> 
> 时间：2012-07-23T08:35:08.047
> 
> 标签：c#

```
List<String> employeeTimings;
    public string[] sTime = {"0000", "0030", "0100", "0130", "0200", "0230", "0300", "0330", "0400", "0430", "0500", "0530", "0600", "0630", "0700", "0730", "0800", "0830", "0900", "0930", "1000", "1030", "1100", "1130", "1200", 
                                 "1230", "1300", "1330", "1400", "1430", "1500", "1530", "1600", "1630", "1700", "1730", "1800", "1830", "1900", "1930", "2000", "2030", "2100", "2130", "2200", "2230", "2300", "2330"};

employeeTimings = new List<String>(sTime);
        int i=0;
        DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("Location", typeof(string)));
        dt.Columns.Add(new DataColumn("Station", typeof(string)));

        foreach (DataColumn dc in dt.Columns)
        {
            dt.Columns.Add(employeeTimings[i], typeof(string));
            i++;
        }
        SchedulingTableDGV.DataSource = dt; 
```

我收到错误“集合已修改；枚举操作可能无法执行。” 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:36:19.910

您不能在使用`foreach`. 您需要在`foreach`.

```
 foreach (DataColumn dc in dt.Columns)
    {
        dt.Columns.Add(employeeTimings[i], typeof(string)); // Problem.
        i++;
    } 
```

尝试这个：

```
foreach (var timing in employeeTimings)
{
    dt.Columns.Add(timing, typeof(string));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:39:00.777

您无法修改使用 foreach 循环的集合。您的情况的解决方案非常简单：由于您不在`dc`循环内部使用，为什么不使用普通的 for 循环，例如：

```
int length = dt.Columns.Length;
for (int i = 0; i < length; i++)
{
    dt.Columns.Add(employeeTimings[i], typeof(string));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T08:38:44.010

使用 LINQ，您可以：

```
 foreach (DataColumn dc in dt.Columns.OfType<DataColumn>().ToArray())
    {
        dt.Columns.Add(employeeTimings[i], typeof(string));
        i++;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:38:54.630

在迭代集合时，您正在`dt.Columns`使用该方法修改集合：`Add`

```
foreach (DataColumn dc in dt.Columns)
{
    dt.Columns.Add(employeeTimings[i], typeof(string));
    i++;
} 
```

除了*不*添加所有计时字符串之外，这还会修改您要向其中添加列的集合。

您应该枚举`employeeTimings`并添加如下列：

```
foreach(string s in employeeTimings)
{
    dt.Columns.Add(s, typeof(string));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:42:56.957

我猜您的真正意图是将完整的employeeTimings 列表添加到数据表列
如果这是正确的，那么您应该在列表而不是列上循环

```
foreach (string s in employeeTimings) 
    dt.Columns.Add(s, typeof(string)); 
```

# objective-c - 为什么我的 UIButton 没有显示在我的视图上？

> ID：11608978
> 
> 赞同：0
> 
> 时间：2012-07-23T08:35:17.873
> 
> 标签：objective-c, xcode, uiview, uibutton

我有一个使用情节提要并开启 ARC 的 iOS5 项目。

我在情节提要中有一个带有 thisViewController 类的视图，在那里我有一个较小的子视图，我将其拖入并给它类 thisView。

thisView 有一个自定义的 drawRect 函数，它可以很好地绘制我想要的东西。但我也想动态添加按钮，所以我将它们添加到 thisView 的 initWithFrame 方法中，如下所示：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"This is called <3");
        UIButton *btn= [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btn.frame = CGRectMake(0, 0, 50, 50);
        btn.backgroundColor = [UIColor redColor];
        [btn setTitle:@"Play" forState:UIControlStateNormal];
        [btn addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:btn]; 
        [self bringSubviewToFront:btn];   // last thing I tried, didn't work, thought z-index was to low or something
    }
    return self;
} 
```

自 NSLog 显示以来，正在调用该函数，但找不到该按钮

- 编辑 -

额外的信息：

ThisView.h

```
@interface RadarView : UIView <CLLocationManagerDelegate>{
    CLLocation *currentLocation;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:04:53.810

不要在 init 方法中添加 SubView。在`- (void)layoutSubviews`.

```
 - (void)layoutSubviews {
         [super layoutSubviews];

         if (![self viewWithTag:12345]) {
            UIButton *btn= [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(0, 0, 50, 50);
            btn.tag = 12345;
            btn.backgroundColor = [UIColor redColor];
            [btn setTitle:@"Play" forState:UIControlStateNormal];
            [btn addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
            [self addSubview:btn]; 
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:52:51.817

I found what the problem was thanks to some comments and the chat

There was an init in the radarviewcontroller, which triggered initwithframe, which made the NSLog display, and the initwithcoder wasn't used so I didn't see anything, that was the problem and got stuff mixed up. Thanks for commenting and helpin!

# javascript - 登录页面如何在 Jquery mobile 中工作？

> ID：11608987
> 
> 赞同：1
> 
> 时间：2012-07-23T08:35:57.290
> 
> 标签：javascript, jquery

我做了一个登录页面，我得到了 jquery 代码谁能解释我这个代码！？？逐行！这样我就知道它到底是如何工作的！我有代码，但我不知道它是如何工作的。我在服务集成和其他方面不是很好

```
$(document).ready(function() {

        $('#loginForm').submit(function() {

            $('#output').html('Connecting....');

            var postTo = 'login.php';

            $.post(postTo,{username: $('[name=username]').val() , password: $('[name=password]').val()} , `

                function(data) {

                    if(data.message) {

                        $('#output').html(data.message);

                    } else {

                        $('#output').html('Could not connect');

                    }

                },'json');

            return false;

        });

    }); 
```

` 在我的 html 中：

```
<!-- Start of first page --> 
```

```
<div data-role="header">

    <h1>Foo</h1>

</div><!-- /header -->

<div data-role="content">   

    <p id="output"></p>

    <p>

        <form method="post" id="loginForm">

            Username: <input type="text" name="username"><br /><br />

            Password: <input type="password" name="password"><br />

            <input type="submit" value="Login">

        </form>

    </p>

</div><!-- /content -->

<div data-role="footer">

    <h4>Page Footer</h4>

</div><!-- /header --> 
```

我基本上想知道 $.post 在做什么？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:11:19.897

$.post 向带有可选参数的 URL 发布请求并返回响应。

让我们来看看你的例子。

```
$.post(postTo,...... 
```

第一个参数是您向其发布请求的 URL。这存储在 postTo 变量中。在这种情况下，它已设置为 login.php。

```
$.post(postTo,{username: $('[name=username]').val() , password: $('[name=password]').val()},...... 
```

下一部分包含您传递给此脚本的数据。您正在传递 "username" 和 "password" 的值，这些值是从名为 "username" *$('[name=username]')*的元素的值和名为 "password" *$(name =password)*在这种情况下是您输入的用户名和密码。

login.php 的成功响应将触发回调函数。返回的任何数据也将可用于您的函数（*数据*）。此数据可以是 JSON、XML 或字符串

它的工作方式与标准形式相同（回调除外）。

```
<form action="login.php" method="post">
    <input type="text" name="username" />
    <input type="password" name="password" />
    <input type="submit" />
</form> 
```

在上面的代码中，整个页面将重定向到 login.php，您将在其中捕获用户名和密码并对其进行处理以执行某些操作。使用 $.post，您无需实际重定向页面即可执行相同的操作。在您的 login.php 脚本中，您捕获发布的用户名和密码并返回一个值。

例如，您可以获取用户名和密码，查询您的数据库，如果找到匹配返回“成功”，或者如果不匹配则返回“失败”。在您的 ..function(data).. 您检查返回值是否为“成功”并执行一个操作，否则您执行另一个操作

# jquery - Jquery：我如何找到这样的元素 我的标题

> ID：11608988
> 
> 赞同：3
> 
> 时间：2012-07-23T08:35:58.630
> 
> 标签：jquery, html

使用 Jquery，我如何找到和隐藏这样的元素？

```
<p>MyHeader</p> 
```

这里唯一的标识符是 MyHeader，因此尝试找到与此完全匹配的元素并将其隐藏。

编辑：我没有选择添加 id 或类选择器，这会让生活更轻松:-) 无论如何，我发现 jquery contains 似乎有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:40:07.130

```
$('p:contains(MyHeader)').hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:56:29.327

```
$("p:contains('MyHeader')").hide() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:41:13.727

一种方法是向 p 标签添加一个类。

所以你会做这样的事情：

```
 <p class="myClass">MyHeader</p> 
```

然后你可以使用下面的 jQuery 隐藏它

```
 $(".myClass").hide() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:43:14.990

Jquery API 有一个包含函数：

[http://api.jquery.com/category/selectors/content-filter-selector/](http://api.jquery.com/category/selectors/content-filter-selector/)

这是一个例子：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<div>John Resig</div>

<div>George Martin</div>
<div>Malcom John Sinclair</div>
<div>J. Ohn</div>

<script>
$("div:contains('John')").css("text-decoration", "underline");
    </script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:39:05.597

将 id 或类定义添加到 p 标签

HTML

```
<p class="header">MyHeader</p> 
```

查询

```
$('.header').hide(); 
```

# macos - 如何卸载詹金斯？

> ID：11608996
> 
> 赞同：170
> 
> 时间：2012-07-23T08:36:28.427
> 
> 标签：macos, jenkins, continuous-integration, uninstallation

这可能很简单，但我在任何地方都找不到任何提示。那么，一般来说，特别是在 Mac 上，应该如何做到这一点呢？

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2012-07-23T21:59:00.483

[如果您使用来自http://jenkins-ci.org/](http://jenkins-ci.org/)的官方 Jenkins Mac 安装程序安装，这些说明适用

**从终端执行卸载脚本：**

```
'/Library/Application Support/Jenkins/Uninstall.command' 
```

或使用 Finder 导航到该文件夹​​并双击 Uninstall.command。

最后删除*可能*被遗忘的最后一个配置位：

```
sudo rm -rf /var/root/.jenkins ~/.jenkins 
```

**如果找不到卸载脚本（旧 Jenkins 版本），请使用以下命令：**

```
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm -rf /Applications/Jenkins "/Library/Application Support/Jenkins" /Library/Documentation/Jenkins 
```

如果你想摆脱所有的工作和构建：

```
sudo rm -rf /Users/Shared/Jenkins 
```

并删除 jenkins 用户和组（如果您选择使用它们）：

```
sudo dscl . -delete /Users/jenkins
sudo dscl . -delete /Groups/jenkins 
```

在较新的 Jenkins 版本中，卸载脚本也会调用这些命令，并且也应该执行这些命令：

```
sudo rm -f /etc/newsyslog.d/jenkins.conf
pkgutil --pkgs | grep 'org\.jenkins-ci\.' | xargs -n 1 sudo pkgutil --forget 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-10-22T13:12:55.880

你是对的，这很简单。运行（需要管理员密码）：

```
'/Library/Application Support/Jenkins/Uninstall.command' 
```

可能需要使用 sudo 以管理员权限执行此操作。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-05-05T07:43:53.483

请记住，在终端中，您需要在空格前添加反斜杠，因此正确的复制/粘贴将是

> /Library/Application\ Support/Jenkins/Uninstall.command

ps抱歉回答晚了:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-07T19:07:01.693

在终端上运行：

```
sh "/Library/Application Support/Jenkins/Uninstall.command" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-23T08:45:42.853

There is no uninstaller. Therefore, you need to:

*   Delete the directory containing Jenkins (or, if you're deploying the war -- remove the war from your container).

*   Remove ~/.jenkins.

*   Remove you startup scripts.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-18T07:52:23.127

我的**詹金斯版本：1.5.39**

执行步骤：

步骤 1\. 转到文件夹`/Library/Application Support/Jenkins`

步骤 2\. 运行 Uninstall.command`jenkins-runner.sh`文件。

步骤 3\. 检查结果。

它对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-02T05:20:31.810

运行以下命令从 MacOS Sierra 中完全卸载 Jenkins。您无需更改任何内容，只需运行这些命令即可。

```
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm -rf /Applications/Jenkins '/Library/Application Support/Jenkins' /Library/Documentation/Jenkins
sudo rm -rf /Users/Shared/Jenkins
sudo rm -rf /var/log/jenkins
sudo rm -f /etc/newsyslog.d/jenkins.conf
sudo dscl . -delete /Users/jenkins
sudo dscl . -delete /Groups/jenkins
pkgutil --pkgs
grep 'org\.jenkins-ci\.'
xargs -n 1 sudo pkgutil --forget 
```

萨拉姆

沙阿

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-26T21:20:53.587

在 Mac 上；下面这两个命令完全从您的机器中删除 Jenkins。只需打开您的终端并执行它们：

1.  '/Library/Application Support/Jenkins/Uninstall.command' 和
2.  sudo rm -rf /var/root/.jenkins ~/.jenkins

谢谢

# c# - 创建已知大小数组的最快算法

> ID：11608998
> 
> 赞同：3
> 
> 时间：2012-07-23T08:36:30.403
> 
> 标签：c#, algorithm

我需要创建一个布尔值数组，其规模可能为 100,000 甚至数百万个条目。它还需要超快，因此每次迭代的每一毫秒都很重要。

在开始循环时，我已经知道数组中有多少条目。问题是，预先创建一个 bool 数组并按索引填充值会更快（这是随机访问 - 可能很慢？），还是我应该创建一个`List<bool>`，继续向列表中添加条目，然后在结束返回`.ToArray()`？

换句话说：

**选项1**

```
var array = new bool[size];
for (var n=0; n<size; n++)
  array[n] = GetValue(n);
return array; 
```

**选项 2**

```
var list = new List<bool>();
for (var n=0; n<size; n++)
  list.Add(GetValue(n));
return list.ToArray(); 
```

或者也许有更快的第三种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:39:29.650

使用 a[`System.Collections.BitArray`](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx "MSDN 参考页")并且不用担心速度。

你上面的建议只会浪费你的记忆。这对速度和大小都进行了优化，并且会`bool`很好地打包您的值（每个字节 8 个，正如神所希望的那样：）。

回复下面的评论：如果你使用 a `BitArray`，一开始一切都将是零。仅设置您拥有的那些位`GetValue == true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:18:37.153

以下代码似乎（至少对我而言）显示了本页讨论的方法，`bool[]`使用循环的简单分配是最快的。

该代码似乎还告诉我，除非`GetValue(n)`在计算上微不足道，否则分配字节的开销不是我希望优化的过程的一部分。

希望这在某种程度上有所帮助。

编辑：添加运行结果（在我的机器上）

```
--  187ms    BitArray
--  171ms    List<bool>().ToArray 
--  168ms    bool[] set only if true
--  130ms    bool[] always set
--11460ms    bool[] always set with 'complex' GetValue()

class Program
{
    static void Main(string[] args)
    {
        BitArray bitArray = new BitArray(10000000);
        bool[] boolArray = new bool[10000000];

        Stopwatch sw1 = new Stopwatch();

        sw1.Start();

        for (int i = 0; i < 10000000; i++)
        {
            bitArray[i] = GetMod2(i);
        }

        Console.WriteLine(sw1.ElapsedMilliseconds);

        sw1.Restart();

        var list = new List<bool>();
        for (int i = 0; i < 10000000; i++)
            list.Add(GetMod2(i));
        var boolArray2 = list.ToArray();

        Console.WriteLine(sw1.ElapsedMilliseconds);

        sw1.Restart();

        for (int i = 0; i < 10000000; i++)
        {
            bool nextVal = GetMod2(i);

            if (nextVal)
                bitArray[i] = true;
        }

        Console.WriteLine(sw1.ElapsedMilliseconds);

        sw1.Restart();

        for (int i = 0; i < 10000000; i++)
        {
            boolArray[i] = GetMod2(i);
        }

        Console.WriteLine(sw1.ElapsedMilliseconds);

        sw1.Restart();

        for (int i = 0; i < 10000000; i++)
        {
            boolArray[i] = GetRand(i);
        }

        Console.WriteLine(sw1.ElapsedMilliseconds);

        Console.ReadLine();
    }

    static bool GetMod2(int i)
    {
        return (i % 2) == 1;
    }

    static bool GetRand(int i)
    {
        return new Random().Next(2) == 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:43:02.570

和第一个一起去。这可能是唯一的原因。“慢”是指它是否保留来自处理器缓存外部的分页数据。

该列表将具有完全相同的问题，除了它还需要执行多个内存分配和复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:42:25.790

现在这是一个有趣的老东西。受@paul 的启发，我自己对 10,000,000 个布尔值进行了这些基准测试。鉴于对这个问题的评论中的讨论，结果（以毫秒为单位）非常令人惊讶：

> 位数组：517
> 
> BitArray + CopyTo（数组）：536
> 
> 列表 + ToArray(): 455
> 
> 布尔数组：483

这些书的投票率多么高！尽管`List<Bool>`每次都插入一条新记录，而`bool[]`and在每条记录上`BitArray`都初始化为`false`，并且我只在值应该是`true`的地方更新了它们，但`List<bool>`始终排在首位，甚至包括`.ToArray()`调用。

另一个实际应用比教科书知识更好的案例，似乎...... :)