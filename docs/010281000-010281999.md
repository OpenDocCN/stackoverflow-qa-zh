# StackOverflow 问答 10281000-10281999

# python - 读取 Wireshark 转储文件以了解数据包时间

> ID：10281002
> 
> 赞同：1
> 
> 时间：2012-04-23T12:57:41.373
> 
> 标签：python, datetime, struct, python-3.x

我的指示是读取从 Wireshark 程序转储的 wireshark.bin 数据文件并挑选出数据包时间。我不知道如何跳过标题并找到第一次。

```
"""
reads the wireshark.bin data file dumped from the wireshark program 
"""
from datetime import datetime
import struct
import datetime

#file = r"V:\workspace\Python3_Homework08\src\wireshark.bin"
file = open("wireshark.bin", "rb")
idList = [ ]
with open("wireshark.bin", "rb") as f:
    while True:
        bytes_read = file.read(struct.calcsize("=l"))        
        if not bytes_read:
            break
        else:
            if len(bytes_read) > 3:
                idList.append(struct.unpack("=l", bytes_read)[0])

                o = struct.unpack("=l111", bytes_read)[0]
                print( datetime.date.fromtimestamp(o)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:31:18.120

尝试一次读取整个文件，然后将其作为列表访问：

```
data = open("wireshark.bin", "rb").read()  # let Python automatically close file
magic = data[:4]                     # magic wireshark number (also reveals byte order)
gmt_correction = data[8:12]          # GMT offset
data = data[24:]                     # actual packets 
```

现在您可以遍历（16？）字节大小的块中的数据，查看每个块中时间戳的适当偏移量。

幻数是`0xa1b2c3d4`，它占用四个字节或两个字。`struct`我们可以通过使用模块检查前四个字节来确定顺序（大端或小端） ：

```
magic = struct.unpack('>L', data[0:4])[0]  # before the data = data[24:] line above
if magic == 0xa1b2c3d4:
    order = '>'
elif magic == 0xd4c3b2a1:
    order = '<'
else:
    raise NotWireSharkFile() 
```

现在我们有了订单（并且知道它是一个 wireshark 文件），我们可以遍历数据包：

```
field0, field1, field2, field3 = \
        struct.unpack('%sllll' % order, data[:16])
payload = data[16 : 16 + field?]
data = data[16 + field?] 
```

我把名字含糊了，因为这是作业，但这些`field?`名字代表了存储在数据包头中的信息，包括时间戳和后续数据包数据的长度。

此代码不完整，但希望足以让您继续前进。

# wcf - 以编程方式创建带有证书的 netTcp 绑定

> ID：10281005
> 
> 赞同：1
> 
> 时间：2012-04-23T12:57:46.830
> 
> 标签：wcf, tcp, nettcpbinding

我有 WCF (.net v4) 的通用托管服务。它允许以插件样式删除多个代理，每个代理都有自己的配置文件。它是作为服务编写的，因为所有站点都不会安装 IIS 或 WAS，但我们可以指定 .net v4 和我们的客户服务。

我们对 HTTP、HTTPS 或 TCP（没有凭据）没有任何问题。当我们向服务器添加证书时，它似乎可以毫无问题地启动。一旦我们尝试调用服务，我们就会得到一个通道故障。我们编写了一个小型自托管程序，该程序使用配置文件而不是以编程方式创建端点，它可以正常工作。我们只能推测我们错过了一个设置，但无法确定是哪个。

我们得到的错误如下所示。似乎由于某种原因，客户端尝试建立我们没有在主机中配置的双通道 tcp 连接。

```
Protocol Type application/negotiate was sent to a service that does not support that type of upgrade.
System.ServiceModel.Channels.ServerSessionPreambleConnectionReader.ServerFramingDuplexSessionChannel.ProcessUpgradeRequest(TimeoutHelper&amp; timeoutHelper)
System.ServiceModel.Channels.ServerSessionPreambleConnectionReader.ServerFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
System.ServiceModel.Channels.CommunicationObject.Open()
System.ServiceModel.Channels.ReliableChannelListener`3.HandleAcceptComplete(TInnerChannel channel)
System.ServiceModel.Channels.ReliableChannelListener`3.OnAcceptCompleted(IAsyncResult result)
System.ServiceModel.Channels.ReliableChannelListener`3.OnAcceptCompletedStatic(IAsyncResult result)
System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
System.ServiceModel.Diagnostics.TraceUtility.&lt;&gt;c__DisplayClass4.&lt;CallbackGenerator&gt;b__2(AsyncCallback callback, IAsyncResult result)
System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)
System.Runtime.InputQueue`1.EnqueueAndDispatch(Item item, Boolean canDispatchOnThisThread)
System.Runtime.InputQueue`1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
System.ServiceModel.Channels.TcpDuplexChannelListener.System.ServiceModel.Channels.ISessionPreambleHandler.HandleServerSessionPreamble(ServerSessionPreambleConnectionReader preambleReader, ConnectionDemuxer connectionDemuxer)
System.ServiceModel.Channels.ConnectionOrientedTransportManager`1.OnHandleServerSessionPreamble(ServerSessionPreambleConnectionReader serverSessionPreambleReader, ConnectionDemuxer connectionDemuxer)
System.ServiceModel.Channels.ConnectionDemuxer.OnSessionPreambleKnown(ServerSessionPreambleConnectionReader serverSessionPreambleReader)
System.ServiceModel.Channels.ServerSessionPreambleConnectionReader.ContinueReading()
System.ServiceModel.Channels.ServerSessionPreambleConnectionReader.StartReading(Action`1 viaDelegate, TimeSpan receiveTimeout)
System.ServiceModel.Channels.ConnectionDemuxer.OnDuplexConnection(IConnection connection, Action connectionDequeuedCallback, Int64 streamPosition, Int32 offset, Int32 size, TimeSpan timeout)
System.ServiceModel.Channels.ConnectionDemuxer.OnConnectionModeKnownCore(ConnectionModeReader modeReader, Boolean isCached)
System.ServiceModel.Channels.ConnectionDemuxer.OnConnectionModeKnown(ConnectionModeReader modeReader)
System.ServiceModel.Channels.ConnectionModeReader.Complete()
System.ServiceModel.Channels.ConnectionModeReader.ReadCallback(Object state)
System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
System.ServiceModel.Channels.TracingConnection.WaitCallback(Object state)
System.ServiceModel.Channels.SocketConnection.FinishRead()
System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP) 
```

客户：

```
 <netTcpBinding>
            <binding name="NetTcpEndPoint_ISolutionsDataAccessorV01" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="65536">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>

    </bindings>
    <client>
        <endpoint address="net.tcp://localhost:1177/TcpService" binding="netTcpBinding"
            bindingConfiguration="NetTcpEndPoint_ISolutionsDataAccessorV01"
            contract="sDAL.ISolutionsDataAccessorV01" name="NetTcpEndPoint_ISolutionsDataAccessorV01">
            <identity>
                <userPrincipalName value="abc@xyz.com" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

服务：-->

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SolutionsDALServiceBehavior">
   <serviceCredentials>
     <serviceCertificate findValue="STSTestCert"
                         x509FindType="FindByIssuerName" />
   </serviceCredentials>
    <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <!-- <serviceMetadata httpGetEnabled="true"/> -->
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/> 
```

# php - Janrain OpenId 与 lightopenid PHP 库

> ID：10281007
> 
> 赞同：3
> 
> 时间：2012-04-23T12:57:52.947
> 
> 标签：php, openid, google-openid, janrain, lightopenid

[Janrain 的 PHP OpenID](https://github.com/openid/php-openid)库的 PHP 实现与[LightOpenID](http://gitorious.org/lightopenid)有什么区别。

一个比另一个更安全吗？

根据[谷歌的最佳实践页面](http://code.google.com/googleapps/marketplace/best_practices.html#sso)：

> 正确的 OpenID 实现必须：
> 
> 1.  加密签名的封面检查
>     
>     
> 2.  随机数检查
>     
>     
> 3.  雅迪斯发现

我猜 Janrain 的库确实满足了 Google 推荐的所有这些要求，但 LightOpenID 是否满足 1 和 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:21:36.270

LightOpenID 使用无状态版本的协议，比 Janrain 的库简单很多。

无状态版本将验证（与密码学、随机数等相关的任何内容）委托给提供者，因此 LightOpenID 不会自行检查。但是，它确实遵循该规范，因此这不是安全问题。

# android - 使用 AdMob 展示我自己的广告？

> ID：10281008
> 
> 赞同：5
> 
> 时间：2012-04-23T12:57:55.463
> 
> 标签：android, admob, ads

我已将 AdMob 集成到我的应用程序中。是否可以使用 Admob 展示我自己的广告？如果不是，那么最好的选择是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T13:34:24.870

是的！Ad Mob 允许您选择使用“**自家广告系列**”选项展示您自己的广告。

话虽这么说，如果“*使用 Admob 显示我自己的广告？？* ”，您的意思是显示自定义广告，那么您可能必须单独进入广告商并使用（如评论中提到的@zapl）ImageView 或其他东西显示它们那些线。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T13:33:06.193

是的你可以。该功能称为[自家广告](https://support.google.com/admob/bin/answer.py?hl=en&answer=1619751)

# javascript - Javascript 在 if else 语句中执行多个案例

> ID：10281009
> 
> 赞同：1
> 
> 时间：2012-04-23T12:57:58.167
> 
> 标签：javascript

我对一些javascript有一个奇怪的问题。在以下代码中，浏览器将在 if、else if、else if 条件下执行多个路径。因此，例如控制台将记录“a c”或“b c”。

```
if (divs[i].row == hover_div.row && divs[i].obj != hover_div.obj)
{
    console.log("a");
    divs[i].obj.stop()
        .animate({'width':d_thin}, { duration:600, queue:false })
        .animate({'height':d_expand}, { duration:600, queue:false });
}
else if (divs[i].col == hover_div.col && divs[i].obj != hover_div.obj)
{
    console.log("b");
    divs[i].obj.stop()
        .animate({'width':d_expand}, { duration:600, queue:false })
        .animate({'height':d_thin}, { duration:600, queue:false });
}
else if (divs[i].obj != hover_div.obj);
{
    console.log("c");
    divs[i].obj.stop()
        .animate({'width':d_thin}, { duration:600, queue:false })
        .animate({'height':d_thin}, { duration:600, queue:false });
} 
```

我通过在块外添加一个计数器来检查代码没有执行两次。如果我将 if 语句嵌套在下面，整个事情都可以正常工作，但我不需要这样做吗？

```
if (divs[i].row == hover_div.row && divs[i].obj != hover_div.obj)
{
    console.log("a");
    divs[i].obj.stop()
        .animate({'width':d_thin}, { duration:600, queue:false })
        .animate({'height':d_expand}, { duration:600, queue:false });
}
else {
    if (divs[i].col == hover_div.col && divs[i].obj != hover_div.obj)
    {
        console.log("b");
        divs[i].obj.stop()
            .animate({'width':d_expand}, { duration:600, queue:false })
            .animate({'height':d_thin}, { duration:600, queue:false });
    }
    else {
        if (divs[i].obj != hover_div.obj);
        {
            console.log("c");
            divs[i].obj.stop()
                .animate({'width':d_thin}, { duration:600, queue:false })
                .animate({'height':d_thin}, { duration:600, queue:false });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T12:59:54.653

```
else if (divs[i].obj != hover_div.obj); // <-- 
```

删除分号

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T13:01:00.410

您在此行有一个尾随分号：

```
else if (divs[i].obj != hover_div.obj); 
```

这与说：

```
else if (...) {
   // do nothing
}

{
   console.log("c");
   ...
} 
```

因此块 c 总是运行。

# java - 带有图像列的 CellTable

> ID：10281011
> 
> 赞同：1
> 
> 时间：2012-04-23T12:58:01.297
> 
> 标签：java, gwt, gwt-celltable

我有 4 列的单元格表（名称大小 addedBy modifiedBy ）

在运行时填充所有值。

该表实际上显示了文件。

文件可以是pdf、txt、doc等

1.  我想在文档名称前添加图标。

2.  而且我还想要在名称列之前再添加一个图像列

到目前为止我的代码。

```
*
private CellTable<FDocument> getDocumentTable() {
        if (documentTable == null) {
            documentTable = new CellTable<FDocument>();
            documentTable.setSize("600px", "300px");
            documentTable.addColumn(nameColumnD, "NAME");
            documentTable.addColumn(sizeColumnD, "SIZE");
            documentTable.addColumn(modified_by_ColumnD, "MODIFIED BY");
            documentTable.addColumn(dateColumnD, "MODIFIED ON");

        }
        return documentTable;
    }

TextColumn<FDocument> idColumnD = new TextColumn<FDocument>() {             
            @Override
            public String getValue(FDocumentobject) {
                // TODO Auto-generated method stub
                return object.getId();
            }
        };
        TextColumn<FDocument> nameColumnD = new TextColumn<FDocument>() {
            @Override
            public String getValue(FDocumentobject) {
                return object.getName();
            }
        };          
        TextColumn<FDocument> sizeColumnD = new TextColumn<FDocument>() {
            @Override
            public String getValue(FDocumentobject) {
                return object.getSize();                            
            }
        };
        TextColumn<FDocument> modified_by_ColumnD = new TextColumn<FDocument>() {
            @Override
            public String getValue(FilenetDocument object) {
                return object.getModifiedBy();
            }
        };
        TextColumn<FDocument> dateColumnD = new TextColumn<FDocument>(){
            @Override
            public String getValue(FDocumentobject){
                return object.getModifiedOn();
            } 
        };

 private void addValuesToTable(){
        List<FDocument> FDC = null;

        /*
         * Adding data to folder Table
         */
        ArrayList<FDocument> documentsArrayList = new ArrayList<FDocument>();
        Iterator<String> iteratorDocument = documents.getDocuments().getDocumentCollection().keySet().iterator();
        while(iteratorDocument.hasNext()){
            String key = iteratorDocument.next().toString();
            FDocument value = documents.getDocuments().getDocumentCollection().get(key);
            documentsArrayList.add(new FDocument(value.getName(), value.getSize(),value.getModifiedBy(), value.getModifiedOn(),value.getId()));

        }
        FDC = documentsArrayList;

    // Create a data provider.

        ListDataProvider<FDocument> dataProvider1 = new ListDataProvider<FDocument>();

    // Connect the table to the data provider.

        dataProvider1.addDataDisplay(documentTable);

    // Add the data to the data provider, which automatically pushes it to the widget.

        List<FDocument> listDocument = dataProvider1.getList();
            for (FDocument fDocument: FDC) {

                listDocument.add(fDocument1);
            } 
```

这就是我制作桌子和价值的方式。

请任何人告诉我程序

1.  在文档名称前添加图标。

2.  而且我还想要在名称列之前再添加一个图像列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:09:20.247

使用*DefaultTableCellRenderer*针对具有所需图标的列设置自定义渲染器。如下所示，渲染器会创建一个新标签来屏蔽所选列中的所有单元格。

```
private class CellRenderer extends DefaultTableCellRenderer
{

 public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
 {
    JLabel label = new JLabel((String)value);
    label.setOpaque(true);
    Icon icon = new ImageIcon("icon.png");
    label.setIcon(icon);
    return label;
 }
} 
```

然后将其应用到您的表中，如下所示：

```
table.getColumnModel().getColumn(0).setCellRenderer(new CellRenderer()); 
```

**已编辑：** 如果您使用的是 GWT，请参阅[此处](http://www.java2s.com/Code/Java/GWT/FormatCellValuesSampleSmartGWT.htm)以获取 Grid Cell 格式的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:07:50.070

要创建图像列，您需要定义一个自定义渲染器，在标签上设置图标

```
import java.awt.Component;

import javax.swing.ImageIcon;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

public class MyRenderer extends DefaultTableCellRenderer {

  /*
   * @see TableCellRenderer#getTableCellRendererComponent(JTable, Object, boolean, boolean, int, int)
   */
  public Component getTableCellRendererComponent(JTable table, Object value,
                                                 boolean isSelected, boolean hasFocus, 
                                                 int row, int column) {
    ImageIcon icon = new ImageIcon(getClass().getResource("images/moon.gif"));
    setText((String)value);
    setIcon(icon);
    return this;
  }
} 
```

然后，在表格中使用渲染器，如下所示，

```
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableModel;

public class Sample {

  public static void main(String[] args) {
    JFrame f = new JFrame("Sample");
    f.getContentPane().setLayout(new GridLayout(1,0,0,0));
    TableModel model = new AbstractTableModel() {
      public Object getValueAt(int rowIndex, int columnIndex) {
        return rowIndex + "," + columnIndex;
      }
      public int getColumnCount() {
        return 3;
      }
      public int getRowCount() {
        return 10;
      }
    };

    JTable table = new JTable(model);
    table.getColumnModel().getColumn(1).setCellRenderer(new MyRenderer());
    JScrollPane pane = new JScrollPane(table);
    f.getContentPane().add(pane);
    f.pack();
    f.setVisible(true);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:15:59.583

这两个可能都需要自定义`TableCellRenderer`...

请参阅此处的 API 文档... [http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableCellRenderer.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableCellRenderer.html)

您基本上想要覆盖该`getTableCellRendererComponent()`方法，并添加用于渲染图像的任何其他代码。

例如，要在文档前添加一个图标，您可以执行以下操作...

```
public void MyTableCellRenderer extends DefaultTableCellRenderer {
    public MyTableCellRenderer(){
        super();
    }

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column){
        Component renderer = super.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
        if (row == 0 && renderer instanceof JLabel){ // where row == 0 is the row you want to add the icon to
            ((JLabel)renderer).setIcon(new ImageIcon("image.png"));
        }

        return renderer;
    }
} 
```

您需要将其设置`TableCellRenderer`为列或表的 。

您还可以执行类似的操作来将图像列添加到表中。

# c# - Databinding ItemsControl (DataTemplate) 不更新/仅在程序启动时接收值

> ID：10281014
> 
> 赞同：5
> 
> 时间：2012-04-23T12:58:06.947
> 
> 标签：c#, wpf, xaml, data-binding, ivalueconverter

**EDIT2：**当图表被填充时，我无法再更改这些值。即使我更改列表中的值（ItemControls 从中获取值），图表似乎也不会使用新值进行更新。

我调用计时器中的 GetDataGrafiek() 方法每 x 秒更新一次图表。

```
 Grafiek graf = new Grafiek();
        graf.GetDataGrafiek(); 
```

这是由于线程计时器在单独的线程中运行（`IsAsynchronous`中的方法`ObjectDataProvider`）还是我需要`DataContext`在我的计时器方法中访问 ItemsControl 的？

**编辑：**当程序已经运行时，我无法填充图表，所以我制作了`ObservableCollection<GrafiekBar>`静态（包含条形的填充和值的列表）并初始化如下：

```
public static ObservableCollection<GrafiekBar> listGrafiek = new ObservableCollection<GrafiekBar>()
        {
            new GrafiekBar() {Value = 0, Fill = (Brush)convertor.ConvertFromString(kleuren[0])},
            new GrafiekBar() {Value = 0, Fill = (Brush)convertor.ConvertFromString(kleuren[1])},
            new GrafiekBar() {Value = 0, Fill = (Brush)convertor.ConvertFromString(kleuren[2])}
        }; 
```

来自 MSDN：*ObjectDataProvider：“但是，如果您要绑定到已创建的对象，则需要在代码中设置 DataContext，如下例所示。”*

* * *

我有一个 ItemsControl，它显示为一个简单的条形图。当我分配值（*在我的 codeBehind 中硬编码*）时，图表会成功填充。

我所做的基本上是将最大值设置为 100%，然后计算其余条形的长度。

**问题：** 我不想硬编码图表条形值，但条形必须更改运行时间。为此`Threading.Timer`，只要我的程序正在运行，我就会使用每秒运行的 a （其他计算也发生在这个计时器中）。

*图表条值会根据此计时器内每 x 秒发生的计算进行更新。*

我已经尝试了一切，但我的程序运行时无法显示值。当我对它们进行硬编码时，我只能看到条形（参见`GetDataGrafiek()`线程末尾的区域）。我到底做错了什么/错过了什么？

`GetDataGrafiek()`（填充我的图表的 计算）在`ObjectDataProvider`.

此方法将 TimeSpan 作为输入，然后执行计算，因此我得到一个双值（基于上面解释的 100% 值），然后放置在条的值中（= dateTemplate 的宽度）。

```
<ObjectDataProvider x:Key="odpLbGrafiek" ObjectType="{x:Type myClasses:GrafiekBar}" MethodName="GetDataGrafiek"/> 
```

**我的 ItemsControl 的 DataTemplate**（这使用 Width 作为我的图表条形的值）

```
<DataTemplate x:Key="GrafiekItemTemplate">
        <Border Width="Auto" Height="Auto">
            <Grid>
                <Rectangle StrokeThickness="0" Height="30"  
                           Margin="15" 
                           HorizontalAlignment="Right" 
                           VerticalAlignment="Bottom"
                           Width="{Binding Value}"
                           Fill="{Binding Fill}">
                    <Rectangle.LayoutTransform>
                        <ScaleTransform ScaleX="20" />
                    </Rectangle.LayoutTransform>
                </Rectangle>
            </Grid>
        </Border>
    </DataTemplate> 
```

**项目控制：**

```
 <ItemsControl x:Name="icGrafiek"  
            Margin="50,3,0,0" 
            ItemsSource="{Binding Source={StaticResource odpLbGrafiek}}"
            ItemTemplate="{DynamicResource GrafiekItemTemplate}" 
            RenderTransformOrigin="1,0.5" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.RowSpan="6">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleY="-1" ScaleX="1"/>
                    <SkewTransform AngleY="0" AngleX="0"/>
                    <RotateTransform Angle="180"/>
                    <TranslateTransform/>
                </TransformGroup>
            </ItemsControl.RenderTransform>
        </ItemsControl> 
```

**GetDataGrafiek()**该区域保存硬编码值，完成后我的图表成功显示 6 个柱。当我评论该地区时，我不再看到任何可见的酒吧。

此方法返回一个带有`Double`值的列表。每个值代表一个在 中表示为 Width 的条`DataTemplate`，而 Fill 只是给它一种特定的颜色。

```
ObservableCollection<GrafiekBar> listGrafiek = new ObservableCollection<GrafiekBar>();

    public ObservableCollection<GrafiekBar> GetDataGrafiek()
    {
        var converter = new System.Windows.Media.BrushConverter();

        #region ***TEST HARDCODED BAR VALUES*** 
            int[] testWaardenUren = new int[] { 2, 1, 0, 1, 2, 0 };
            int[] testWaardenMinuten = new int[] { 58, 2, 55, 55, 2, 20 };

            for (int j = 0; j < 6; j++)
            {
                TimeSpan ts = new TimeSpan(testWaardenUren[j], testWaardenMinuten[j], 0);
                GlobalObservableCol.regStilstanden[j].Value = ts;
                GlobalObservableCol.regStilstanden[j].Name = "";
            }
        #endregion

        totalMinutesMaxValue = GetLargestValueStilstanden(); //= "100%" value

        //calculate % of stilstanden Values
        for (int i = 0; i < GlobalObservableCol.regStilstanden.Count; i++)
        {
            Double totalMin = GlobalObservableCol.regStilstanden[i].Value.TotalMinutes;
            totalMin = totalMin / totalMinutesMaxValue * 10; 
            valuesChartPercentage.Add(totalMin);
        }

        //the barChart (itemsControl) gets its final values here
        for (int j = 0; j < GlobalObservableCol.regStilstanden.Count; j++)
        {
            GrafiekBar bar = new GrafiekBar();
            bar.Value = valuesChartPercentage[j];
            bar.Fill = converter.ConvertFromString(kleuren[j]) as Brush;
            listGrafiek.Add(bar);
        }

        return listGrafiek;
    } 
```

**GrafiekBar.cls**

```
 public class GrafiekBar : INotifyPropertyChanged
{
    private double value;
    private Brush fill;

    public GrafiekBar()
    {      
    }

    public double Value
    {
        get { return this.value; }

        set
    {
            this.value = value;
            NotifyPropertyChanged("Value");
        }
    }

    public Brush Fill
    {
        get { return this.fill; }

        set
        {
            this.fill = value;
            NotifyPropertyChanged("Fill");
        }
    }

    //interface INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;

    //interface INotifyPropertyChanged
    private void NotifyPropertyChanged(String info)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

每秒运行的线程计时器（具有计算逻辑和调用的 getDataGrafiek() 调用 GUI 线程以进行更新。

```
private void MyTimerCallBack(object state)
    {
        DisplayWegingInfo();

        App.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background,
            new Action(() =>
            {
                //actions that involve updating the UI
                CaculateTimeBetweenWegingen();
            }));
    } 
```

*最好的问候彼得。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:11:26.300

如果您从另一个线程访问以下代码，这将导致问题：

```
private void NotifyPropertyChanged(String info)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
} 
```

因为另一个线程将引发一个事件，这将导致 Dispatcher 线程（如果它订阅了该事件）出错。

试试吧

```
private void NotifyPropertyChanged(String info)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (PropertyChanged != null)
    {
        if (System.Threading.Thread.CurrentThread == System.Windows.Application.Current.Dispatcher.Thread)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        else
            System.Windows.Application.Current.Dispatcher.BeginInvoke(new Action(() => PropertyChanged(this,new PropertyChangedEventArgs(info));
    }
} 
```

此外，请确保您在 WPF 中使用 UpdateSourceMethod=PropertyChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:54:31.770

这是在黑暗中拍摄的，因为我没有阅读你所有的代码，但这里有一个想法：你正在绑定到一个静态资源，对吧？它被阅读一次，就是这样，是吗？请改用 DynamicResource。

# excel - 如何从excel发送电子邮件中的嵌入图像

> ID：10281016
> 
> 赞同：6
> 
> 时间：2012-04-23T12:58:09.980
> 
> 标签：excel, outlook

我想从 VB 发送电子邮件（Outlook）正文中的 Excel 图表（不是附件），有人知道该怎么做吗？

已解决：
只是为了在下面添加更多细节来回答，您需要以下内容（可以做一些改进）。

```
Sheets(2).ChartObjects(1).Chart.Export "C:\temp\Chart2.png" 
```

……

```
 .HTMLBody = "<html xmlns:o='urn:schemas-microsoft-com:office:office'" & _
            "xmlns: x = 'urn:schemas-microsoft-com:office:excel'" & _
            "xmlns='http://www.w3.org/TR/REC-html40'> " & _
            "<head></head><body><img src='Chart2.png'></body></html>" 
```

和

```
 .Attachments.Add ("C:\temp\Chart2.png") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-15T09:22:10.360

我想除了上面的解决方案之外，我还想在这里添加我的解决方案，因为它同时使用子文件路径和临时文件路径，以防你感兴趣。

我从[这里](http://vba-useful.blogspot.fr/2014/01/send-html-email-with-embedded-images.html)更改了代码以使用临时路径插入图表（它们使用工作簿中的一系列单元格执行相同的操作）：

```
Sub createGraph(nameSheet As String, nameChart As String, nameFile As String)
  ThisWorkbook.Activate
  Worksheets(nameSheet).Activate
  With ThisWorkbook.Worksheets(nameSheet).ChartObjects(nameChart)
    .Activate
    .Chart.Export Environ$("temp") & "\" & nameFile & ".jpg", "JPG"
  End With
End Sub 
```

在 HTML 正文中放置：

```
Call createGraph("Graphs", "Chart 1", "filename")
TempFilePath = Environ$("temp") & "\"
.Attachments.Add TempFilePath & "filename.jpg", olByValue, 0
.HTMLBody = .HTMLBody & "<img src='cid:filename.jpg'>" 
```

通过使用“olByValue, 0”，附件被添加到位置 0，并且在电子邮件中作为附件不可见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T13:58:45.367

似乎最好的方法是**导出图表**：

```
Sheets(1).ChartObjects("Chart 1").Chart.Export "C:\Chart1.png" 
```

然后**将图像添加**到您的邮件**HTML 正文**中：

```
.HTMLBody = .HTMLBody & "< img src='c:\folder\filename.png'>" 
```

由[technet](http://social.technet.microsoft.com/Forums/en/excel/thread/6fc76ceb-6642-4f71-ba41-b0b438d36de9)和[mrexcel确认](http://www.mrexcel.com/forum/showthread.php?t=562877)

# sync - Dropbox DIY 与您的服务器同步：rsync + FSEvents/inotify/其他？

> ID：10281024
> 
> 赞同：1
> 
> 时间：2012-04-23T12:58:39.020
> 
> 标签：sync, dropbox, rsync, inotify, fsevents

长话短说，我需要构建一个简单的保管箱克隆来与我的服务器同步文件。

我做了功课，做了很多研究，但我找到的解决方案（代码和已经烘焙的解决方案）似乎都不够好。

我也阅读了关于 stackoverflow 的其他帖子，唯一的区别是我需要在文件系统事件上触发同步任务。此外，git 已经被用于真正的版本控制目的，我不能将它用于这个同步任务。

这是我的设置：

我在 github 上有一个 git 存储库，我使用 capistrano 进行定期部署。这是我的问题：我们有基础设施和数据影响，因此无法进行真正的本地开发。

我的代码可以存在本地，我可以在 github 上对其进行版本控制，但它*需要*在服务器上运行，即使我在做开发。为了避免牛仔发展，我想出了这个解决方案：

*   请记住，这仅针对前端层，其中涉及数百个tpl（html + smarty），css和js文件*

*   master 分支面向公众运行

*   当登录我们的实时应用程序时，开发人员可以切换到“开发人员模式”并指向服务器上存在的不同存储库。这个“幽灵”存储库只是开发人员本地工作副本的精确副本。它通过保管箱克隆与开发人员的本地存储库保持同步。

这样，这可以是我们的工作流程：

1.  开发人员在所有东西上都在本地工作
2.  每次本地更改时，“ghost”开发人员存储库也会更新，并且可以在服务器上进行测试
3.  当开发人员对结果感到满意时，他可以提交并推送到开发分支
4.  当团队准备好发布新版本时，所有提交都可以通过 capistrano 进行部署

这样一来，当涉及到 git 工作流程时，每个开发人员的 ghost 存储库就完全脱离了画面（就 git 而言，这些 ghost 存储库甚至不存在，它们只是开发人员的实用程序）。

鉴于这个（很长！）前提，这些是我需要的功能：

*   通过 ssh 同步的能力
*   触发文件系统事件的同步（创建/更新/删除文件和目录）
*   仅以 rsync 样式同步更新（增量编码），基本上只是差异
*   可能是跨平台（windows/mac）解决方案

在“已经制定”的解决方案中：

*   好同步
*   超级灵活的文件同步器
*   计时同步

只有 GoodSync 似乎提供了我需要的东西，但我无法以任何可能的方式使自动更新功能（文件系统更新同步）工作。

在我必须自己做的食谱中，我读过关于 FSEvents、inotify (linux) + rsync 选项，但它们可能有点超出我的范围（我可以做基本的 applescripts，FSEvents 可能不是很多API 或 inotify）

这就是我现在所处的位置。我对任何类型的建议持开放态度，我提前感谢您就该主题分享的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:41:41.943

# 使用 lsyncd 和 samba 共享以实现 Windows 兼容性

我会推荐一个带有 samba 共享的本地 linux 服务器，开发人员可以在该服务器上本地工作。然后，本地服务器将使用[lsyncd](https://github.com/axkibe/lsyncd#readme)（用户友好的 inotify/rsync/ssh 解决方案）与您的远程服务器同步。我已经部署了一个非常成功的解决方案，而且它很容易设置（没有高级/自定义脚本）。

还请查看以下内容：

*   [Aerofs](https://www.aerofs.com/)（跨平台）
*   [OwnCloud](http://owncloud.org/sync-clients/)（跨平台）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:32:53.717

在我看来，你正试图以艰难的方式做到这一点。

我在一个软件项目上工作，该项目有大量的源代码，最好在服务器上构建，而不是在我的家用机器上，我只是通过 ssh 进入服务器并以这种方式编辑源代码。（实际上，我使用 NX 来使用远程 X-windows 会话，但它相当于同一件事。）服务器在加利福尼亚，我在英国，延迟不是问题，所以除非你是在一个糟糕的连接上运行，我没有看到任何更好的意义。

如果您必须使用本地编辑器，请尝试使用 sshfs 挂载远程系统。这并不理想，但它有效。我不建议以这种方式扫描大量文件。

否则，如果您必须使用镜像目录，为什么它必须是自动的？开发人员肯定知道他什么时候想要测试更改并且可以点击 rsync 按钮吗？

# dll - ChilkatXML ActiveX DLL 已注册但失败

> ID：10281025
> 
> 赞同：0
> 
> 时间：2012-04-23T12:58:41.760
> 
> 标签：dll, windows-7, vb6, activex, chilkat-xml

我有一个旧的 VB6 应用程序，它广泛使用免费的 ChilkatXML ActiveX DLL。我最近在客户的 PC 上安装了这个应用程序——运行 64 位 Win7（它通常运行良好）——并且 XML 文档保存功能失败了。起初，它甚至无法打开现有文档，但我运行了完整的 Chilkat 安装程序——因为它是一个免费组件——而且该部分至少看起来是固定的。

客户承认这台 PC 之前有病毒，所以我认为清理操作可能遗漏了一些残留的操作系统损坏。我在 Dependency Walker 中打开了 DLL，它报告了未找到 SYSNTFY.DLL 模块的错误——尽管我已经检查过，并且该 DLL 确实存在于他们的 System32 文件夹中。我已经尝试将该 dll 的 32 位版本从我的系统复制到他们的 sysWOW64 文件夹中，但这也没有奏效——这并不是我真正期望的那样。

那么，关于我需要做什么来解决这个问题有什么想法吗？

# sql - 在 ms 访问中计算列之间的天数

> ID：10281029
> 
> 赞同：0
> 
> 时间：2012-04-23T12:59:02.593
> 
> 标签：sql, ms-access, count

作为标题状态，我对 sql 语句有一点问题。我有一个如下表，3 列：date_time_booking、date_time_use、member_ID

日期时间预订

*   2012 年 1 月 4 日
*   2012 年 2 月 4 日等

日期时间使用

*   2012 年 5 月 4 日
*   2012 年 10 月 4 日等

如果是 non_member 预订，则 Member_ID 为 Null，如果是会员则不是 Null

我需要一个查询来计算提前多长时间预订体育中心的会员和非会员。帮助/更正/建议表示赞赏。谢谢

**编辑**：这是我到目前为止

```
SELECT 
   Member_ID, 
   DateDiff("d",[Date_time_to_use],[Date_time_booked]) AS Day_in_advance
FROM Court_booking
GROUP BY Member_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:01:40.883

您可以在查询中使用[DateDiff](http://office.microsoft.com/en-us/access-help/datediff-function-HA001228811.aspx)。

```
SELECT DateDiff("d",[Date_time_use],[Date_time_booking]) AS Diff
FROM Table1 
```

您可以使用查询设计窗口创建查询。

编辑重新评论

```
SELECT 
   Member_ID, 
   Sum(DateDiff("d",[Date_time_to_use],[Date_time_booked])) AS Sum_Day_in_advance
FROM Court_booking
GROUP BY Member_ID 
```

# grid - 如何在表单中使用 RecId 作为外键

> ID：10281031
> 
> 赞同：3
> 
> 时间：2012-04-23T12:59:08.383
> 
> 标签：grid, x++, axapta, dynamics-ax-2012

我有一个项目表，每个项目都引用另一个表中的另一个项目。我们会说项目是人，相关项目是最喜欢的食物。

表 A：鲍勃：1，莎莉：1，苏：3

表 B：1：苹果，2：香蕉，3：橙子

“人”通过“人”表中引用的食物 RecId 与他们最喜欢的“食物”联系起来。

我有一个用于编辑人员的表单/网格。有没有办法使网格中的 FoodRecId StringView 转换其值，以便 RecId 数字在网格中不可见？

我已经编写了多列查找来轻松处理创建正确的关系，但如果网格中的 RecId 可以隐藏/替换，则表单将更易于使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:45:20.863

如果您使用的是 AX 2012，则非常简单：使用[代理键](http://axdaily.blogspot.com/2011/05/surrogate-keys-in-ax-2012.html)。`RecId`用作外键现在是最佳实践！

更新：可以在[AX Musings](http://daxmusings.blogspot.com/2011/07/ax-2012-recids-and-unitofwork-foreign.html)中找到确切的步骤。

如果使用旧版本的 AX，请查看表单`ContactPersonRecId`中的使用。`CustTable`它涉及隐藏`recId`表单中的字段，同时使用另一个编辑字段 `ContactPersonName`作为键。

虽然使用`RecId`外键并不违反最佳实践，但由于手动处理代理键的复杂性，通常会避免使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:22:29.757

布拉德，

**ReplacementKey**是您的解决方案。

现在可以在 AX 2012 中定义父/子关系，而无需在两个表中定义相同的主键。例如，直到 AX 2009，标题/行关系曾经基于一个唯一键存在，例如 SalesTable 和 SalesLine 中的 SalesId 字段。这在 AX 2012 中不再需要。此类关系在 RecIds 上定义，值显示在表单上，​​具体取决于您的**ReplacementKey**上定义的内容（这就是名称 Replacement 的原因！）而不是 RecId，您可以显示任何其他字段，如名称。

看看我的博客！ [http://amannain.blogspot.in/2012/04/table-relationships-learning-with.html](http://amannain.blogspot.in/2012/04/table-relationships-learning-with.html)

# perl - 从核苷酸序列中的每个核苷酸位置开始提取给定长度的所有子串

> ID：10281035
> 
> 赞同：0
> 
> 时间：2012-04-23T12:59:14.493
> 
> 标签：perl

如何从 Perl 语言的 fasta 文件中读取 DNA 序列并将其存储在数组中并从每个核苷酸位置开始提取给定长度的所有子字符串？我的意思是我想读取一个非常大的序列，然后将其拆分为从每个核苷酸位置开始的多个序列，这意味着第一个序列从第一个核苷酸开始到七十个，然后第二个序列从第二个核苷酸开始到七十个-一个等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:42:21.187

使用Bioperl 捆绑发行版中的[Bio::SeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/BioPerl.pm)，我想出了一个示例（如果这是您所追求的）。

```
#!/usr/bin/perl
use strict;
use warnings;
use Bio::SeqIO;

my $in  = Bio::SeqIO->new(-file   => "fasta.txt",
                          -format => 'Fasta');

while ( my $seq = $in->next_seq() ) {
    print "Sequence ", $seq->id, "\n";
    for my $i (1 .. length($seq->seq) - 10) {
        print $seq->subseq($i,$i+10), "\n";
    }
}

__END__
*** Contents of fasta.txt

>chr1
AACCCCCCCCTCCCCCCGCTTCTGGCCACAGCACTTAAACACATCTCTGC
CAAACCCCAAAAACAAAGAACCCTAACACCAGCCTAACCAGATTTCAAAT
TTTATCTTTAGGCGGTATGCACTTTTAACAAAAAANNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
GCCCATCCTACCCAGCACACACACACCGCTGCTAACCCCATACCCCGAAC
CAACCAAACCCCAAAGACACCCCCCACAGTTTATGTAGCTTACCTCNNNN
>chrM
GATCACAGGTCTATCACCCTATTAACCACTCACGGGAGCTCTCCATGCAT
TTGGTATTTTCGTCTGGGGGGTGTGCACGCGATAGCATTGCGAGACGCTG
GAGCCGGAGCACCCTATGTCGCAGTATCTGTCTTTGATTCCTGCCTCATT
CTATTATTTATCGCACCTACGTTCAATATTACAGGCGAACATACCTACTA
AAGTGTGTTAATTAATTAATGCTTGTAGGACATAATAATAACAATTGAAT
GTCTGCACAGCCGCTTTCCACACAGACATCATAACAAAANAATTTCCACC 
```

# javascript - google maps DrawingManager绘制的矩形不会触发mousemove事件

> ID：10281039
> 
> 赞同：1
> 
> 时间：2012-04-23T12:59:47.493
> 
> 标签：javascript, google-maps

我想要：

*   在谷歌地图上绘制矩形
*   最多在矩形上
*   鼠标移动时显示当前位置

所以，我想出了这个代码 - [http://jsfiddle.net/mark69_fnd/vBwf6/4/](http://jsfiddle.net/mark69_fnd/vBwf6/4/) 我订阅`rectanglecomplete`了实例的事件`DrawingManager`以处理前一个矩形，保存对新矩形的引用并订阅矩形上的 mousemove 事件。

问题是该`mousemove`事件永远不会被触发。

我做错了什么以及如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T14:57:07.763

这是一个函数，它通过与地图容器左上角相关的像素偏移量提供 GPS 坐标。

```
function getLatLngByOffset( map, offsetX, offsetY ){
    var currentBounds = map.getBounds();
    var topLeftLatLng = new google.maps.LatLng( currentBounds.getNorthEast().lat(),
                                                currentBounds.getSouthWest().lng());
    var point = map.getProjection().fromLatLngToPoint( topLeftLatLng );
    point.x += offsetX / ( 1<<map.getZoom() );
    point.y += offsetY / ( 1<<map.getZoom() );
    return map.getProjection().fromPointToLatLng( point );
} 
```

在地图的 div 元素上添加`'onmousemove'`事件监听器，然后传递与 div 的左上角相关的鼠标位置。

**更新**：[**演示**](http://jsfiddle.net/ezduA/)（在*Chrome*上测试）

# c# - 单例双重检查并发问题

> ID：10281044
> 
> 赞同：5
> 
> 时间：2012-04-23T13:00:07.443
> 
> 标签：c#, concurrency, singleton, volatile, double-checked-locking

休闲条款取自 jetbrains.net 在阅读了这篇文章和网络上的其他一些文章后，我仍然不明白在第一个线程进入锁之后如何返回 null。有人理解它可以请帮助我并以更人性化的方式解释它吗？

“考虑以下代码：

```
public class Foo
{
  private static Foo instance;
  private static readonly object padlock = new object();

  public static Foo Get()
  {
    if (instance == null)
    {
      lock (padlock)
      {
        if (instance == null)
        {
          instance = new Foo();
        }
      }
    }
    return instance;
  }
}; 
```

鉴于上述代码，初始化 Foo 实例的写入可能会延迟到实例值的写入，从而产生实例返回处于未初始化状态的对象的可能性。

为了避免这种情况，必须将实例值设为易失性。"

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T13:29:38.057

回归`null`不是问题。问题是新实例可能处于另一个线程感知的部分构造状态。考虑这个声明`Foo`。

```
class Foo
{
  public int variable1;
  public int variable2;

  public Foo()
  {
    variable1 = 1;
    variable2 = 2;
  }
} 
```

以下是 C# 编译器、JIT 编译器或硬件如何优化代码。¹

```
if (instance == null)
{
  lock (padlock)
  {
    if (instance == null)
    {
      instance = alloc Foo;
      instance.variable1 = 1; // inlined ctor
      instance.variable2 = 2; // inlined ctor
    }
  }
}
return instance; 
```

首先，请注意构造函数是内联的（因为它很简单）。现在，希望很容易看到`instance`在其组成字段在构造函数中初始化之前被分配了引用。这是一个有效的策略，因为读写可以自由地上下浮动，只要它们不越过边界`lock`或改变*逻辑*流；他们没有。所以另一个线程可以在它完全初始化之前看到`instance != null`并尝试使用它。

`volatile`修复了这个问题，因为它将读取视为*获取栅栏*并将写入视为*释放栅栏*。

*   获取栅栏：不允许其他读写在栅栏之前移动的内存屏障。
*   release-fence：一个内存屏障，不允许其他读写在栅栏之后移动。

因此，如果我们标记`instance`为，`volatile`则释放栅栏将阻止上述优化。以下是带有屏障注释的代码的外观。我使用 ↑ 箭头表示释放栅栏，使用 ↓ 箭头表示获取栅栏。请注意，不允许任何东西向下飘过 ↑ 箭头或向上飘过 ↓ 箭头。把箭头想象成把一切都推开。

```
var local = instance;
↓ // volatile read barrier
if (local == null)
{
  var lockread = padlock;
  ↑ // lock full barrier
  lock (lockread)
  ↓ // lock full barrier
  {
    local = instance;
    ↓ // volatile read barrier
    if (local == null)
    {
      var ref = alloc Foo;
      ref.variable1 = 1; // inlined ctor
      ref.variable2 = 2; // inlined ctor
      ↑ // volatile write barrier
      instance = ref;
    }
  ↑ // lock full barrier
  }
  ↓ // lock full barrier
}
local = instance;
↓ // volatile read barrier
return local; 
```

对 的 组成变量的写入`Foo`仍然可以重新排序，但请注意，内存屏障现在阻止它们在分配给 之后发生`instance`。使用箭头作为指导，想象允许和不允许的各种不同的优化策略。请记住，不允许读取*或*写入通过 ↑ 箭头或向上通过 ↓ 箭头。

`Thread.VolatileWrite`也可以解决这个问题，并且可以在没有`volatile`关键字的语言中使用，如 VB.NET。如果你看看是如何`VolatileWrite`实现的，你会看到这一点。

```
public static void VolatileWrite(ref object address, object value)
{
  Thread.MemoryBarrier();
  address = value;
} 
```

现在这乍一看似乎违反直觉。毕竟，内存屏障是在赋值*之前放置的。*将任务提交到您要求的主存储器怎么样？在分配*之后*放置障碍不是更正确吗？如果这是你的直觉告诉你的，那就**错了**。您会看到内存屏障并不是严格意义上的“新读取”或“提交写入”。这都是关于指令排序的。这是迄今为止我看到的最大的混乱来源。

可能还需要提到的是，它`Thread.MemoryBarrier`实际上会产生一个完整的屏障。因此，如果我将上面的符号与箭头一起使用，那么它看起来像这样。

```
public static void VolatileWrite(ref object address, object value)
{
  ↑ // full barrier
  ↓ // full barrier
  address = value;
} 
```

因此，从技术上讲，调用`VolatileWrite`比写入`volatile`字段所做的更多。请记住，这`volatile`在 VB.NET 中是不允许的，但`VolatileWrite`它是 BCL 的一部分，因此可以在其他语言中使用。

* * *

¹*这种优化主要是理论上的。ECMA 规范在技术上确实允许这样做，但 ECMA 规范的 Microsoft CLI 实现将所有写入视为已经具有释放栅栏语义。不过，CLI 的另一个实现可能仍然可以执行此优化。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:09:42.753

[Bill Pugh](http://www.cs.umd.edu/~pugh/)写了几篇关于这个主题的文章，并且是关于这个主题的参考。

一个值得注意的参考是，[“双重检查锁定被破坏”声明。](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)

粗略地说，问题出在这里：

在多核 VM 中，一个线程的写入可能对其他线程不可见，直到达到同步屏障（或内存栅栏）。您可以阅读“[内存屏障：软件黑客的硬件视图](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCoQFjAA&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.152.5245&rep=rep1&type=pdf&ei=f1WVT8SOHIeUOtPO-YUE&usg=AFQjCNHbXCqujXxuVMaKWKLINV_ujpmB3g)”，这是一篇关于这个问题的非常好的文章。

`A`因此，如果一个线程用一个字段初始化一个对象，并将该对象的引用存储在另一个对象`a`的字段中，我们在内存中有两个“单元格”：和。对两个内存位置的更改可能不会同时对其他线程可见，除非线程通过内存栅栏强制更改可见性。`ref``B``a``ref`

在 java 中，可以使用`synchronized`. 这是昂贵的，另一种方法是声明一个字段，`volatile`在这种情况下，对该单元格的更改始终对所有线程可见。

但是，Java 4 和 5 之间 volatile 的语义发生了变化。在 Java 4 中，您需要将`a`和都定义`ref`为 volatile，以便在我描述的示例中进行双重检查。

这并不直观，大多数人只会将其设置`ref`为 volatile。所以他们改变了这一点，在 Java 5+ 中，如果一个 volatile 字段被修改（`ref`），它会触发其他字段被修改（）的同步`a`。

编辑：我现在才看到您要求 C#，而不是 Java ...我留下我的答案，因为它可能仍然有用。

# android - 列表视图中的一对多加载Android中的另一个列表视图

> ID：10281049
> 
> 赞同：0
> 
> 时间：2012-04-23T13:00:25.783
> 
> 标签：android, android-listview, one-to-many

简单应用程序的目标是建立一对多的关系，以便当用户单击列表中的一个项目时，他们会被带到另一个列表，其中项目与单击的对象相关联。简化示例：顶部列表将包含两项：成语、短语动词。当用户点击成语时，他们被带到成语列表，当用户点击短语动词时，他们被带到短语动词列表。到达成语列表后，他们可以选择一个成语并将他们带到一个显示定义和示例的文本视图。目前，主题列表（成语和短语动词）在 ListView 中正确显示，但是当我单击其中一个时，应用程序退出并且出现许多错误，这是一个（E/AndroidRuntime(276): Caused by: android. content.res.Resources$NotFoundException：字符串数组资源 ID #0x0) 如何获得与我单击的列表项关联的一对多？我的意图正确吗？

```
<string-array name="topics">
<item>Idioms</item>
<item>Phrasal Verbs</item>

<string-array name="idioms">
    <item>Cash Chow</item>
    <item>In the Black</item>
</string-array>

<string-array name="pverbs">
    <item>Back up</item>
    <item>Back down</item>
</string-array> 
```

主活动文件如下所示，它在模拟器中正确显示。

```
public class TestActivity extends ListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String[] topics = getResources().getStringArray(R.array.topics);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.topic_list, topics));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    //@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        Intent i = new Intent(TestActivity.this, Sublist.class);
        i.putExtra("position", position);
        startActivity(i); 
```

我创建的第二个类称为 Sublist，这是我在其中的代码。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

  Bundle extras = getIntent().getExtras();
  int arrayB = extras.getInt("position");

  String[] subtopics = getResources().getStringArray(arrayB);
  setListAdapter(new ArrayAdapter<String>(this, R.layout.topic_list, subtopics));

  ListView lv = getListView();
  lv.setTextFilterEnabled(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:05:08.507

首先，我建议您将任何相关的内容放在一个数组中，如下所示：

```
<string-array name="idioms">
    <item>CashCow</item>
    <item>In the Black</item>
</string-array> 
```

之后你让你的列表正常显示。然后`OnClick`你可以使用同一个Adapter，但是更新他的数据。

```
public void onItemClick(AdapterView arg0, View arg1, int position, long arg3) {

    int textId = R.id.YOUR_TEXTVIEW_ID;
    String[] data;
    switch (position) {
    case 0:
        data = getResources().getStringArray(R.id.idioms);
        break;

    case 1:
        data = getResources().getStringArray(R.id.phrasal_verbs);
                    break;
    default:
        data = someFallback;
        break;
    }
    ArrayAdapter<String> aa = new ArrayAdapter<String>(this, textId, data);
    mListView.setAdapter(aa);
    mListView.postInvalidate();
} 
```

# c++ - using a Logitech camera in openCV

> ID：10281052
> 
> 赞同：0
> 
> 时间：2012-04-23T13:00:28.660
> 
> 标签：c++, opencv, camera, logitech

I have been trying to use my logitech camera using:

```
CvCapture* capture = cvCaptureFromCAM(1); 
```

My laptop already have a built-in camera and it's working fine I'm using openCV 2.3 in Visual Studio 2010 All sources i'm finding are using libraries for VS 2008 I don't think that they work for 2010 (I've tried one before) Is there anyway to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:26:16.567

你的罗技相机的参考是什么？这是使用 opencv 测试的兼容相机[列表。](http://opencv.willowgarage.com/wiki/FullOpenCVWiki)

# php - jQuery mobile + php: Scripting interferes with jquery.mobile-1.0.min.css

> ID：10281055
> 
> 赞同：0
> 
> 时间：2012-04-23T13:00:36.630
> 
> 标签：php, jquery-mobile

If I call the page with www.mydomain.com/gallery.php?id=40 (where id is the gallery id and it's a gallery which has pictures uploaded) the page displays just fine.

If I call the page with www.mydomain.com/gallery.php?id=70 (no pictures available for this gallery) the page just displays a white background.

However, if I check the source of gallery.php?id=70, it is completely fine and all the html is there. The php executes correctly.

I was able to trace the problem down to the jquery.mobile-1.0.min.css file which is included in the header. If I remove this file, everything works fine, php wise.

But here I am stuck. No idea how to get the problem fixed.

The HTML output for the gallery ID 40 (the one which displays correctly):

```
<!DOCTYPE html> 
    <html> 
        <head> 
            <title>fdgsdfgsdfg</title> 
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;"  />
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta http-equiv="content-type" content="text/html;charset=utf-8" />
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
            <link rel="stylesheet" href="css/style.css" />
            <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
            <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
            <script type="text/javascript" src="js/script.js"></script>

        </head> 
        <body> 
            <div data-role="page" class="page gallery-page">

                <div data-role="header" data-theme="b">
                    <a href="gallery-list.php" data-icon="arrow-l" data-rel="back" data-direction="reverse">Back</a>
                    <a href="index.php" data-icon="home" data-direction="reverse">Home</a>
                    <h1>fdgsdfgsdfg</h1>
                </div><!--/header-->

                <div data-role="content"> <!-- <div data-role="content full-width"> -->

                        <ul class="gallery four-column-gallery" id="gallery">
            <li><a href="galleries/41/3899dfe821816fbcb3db3e3b23f81585_XL.jpg" rel="external"><img src="ubergallery/cache/114-4ce29e49cff542cd885c04359d9c795c.jpg" /></a></li>
            <li><a href="galleries/41/alex.png" rel="external"><img src="ubergallery/cache/114-69e8934ae4332cae000fde07804d2665.png" /></a></li>
            <li><a href="galleries/41/board.jpg" rel="external"><img src="ubergallery/cache/114-6a0e6c37b8b05b3f4d2efe2c54bd9ef5.jpg" /></a></li>
            <li><a href="galleries/41/board2.png" rel="external"><img src="ubergallery/cache/114-2dd2928bec5b17942d651c40f7333776.png" /></a></li>
            <li><a href="galleries/41/icon-erfolg.png" rel="external"><img src="ubergallery/cache/114-dc95199136b5493f2d3aea76556e3b00.png" /></a></li>
            <li><a href="galleries/41/icon-fehler.png" rel="external"><img src="ubergallery/cache/114-c817fc1df5faed158531efdfe3d526cb.png" /></a></li>
            <li><a href="galleries/41/IMAG0010.jpg" rel="external"><img src="ubergallery/cache/114-d863cc43dd98747be69c4d63b4841751.jpg" /></a></li>
            <li><a href="galleries/41/img1.jpg" rel="external"><img src="ubergallery/cache/114-b183cf7a0a3576b8b78af43591b203bd.jpg" /></a></li>
            <li><a href="galleries/41/img2.jpg" rel="external"><img src="ubergallery/cache/114-e7e8a237a3bedfe17cb1415586782beb.jpg" /></a></li>
            <li><a href="galleries/41/img3.jpg" rel="external"><img src="ubergallery/cache/114-c0482edf6f290b2106dd6a8c77bda62d.jpg" /></a></li>
            <li><a href="galleries/41/img4.jpg" rel="external"><img src="ubergallery/cache/114-6d136ff32b3eeedb9da5807f93f0a59b.jpg" /></a></li>
            <li><a href="galleries/41/Tshirt-Android-VS-Apple-500x500.png" rel="external"><img src="ubergallery/cache/114-6c49890265d9a5f7df5650d293f6b747.png" /></a></li>
            <li><a href="galleries/41/tshirt-configurator-mockup.jpg" rel="external"><img src="ubergallery/cache/114-d0b896c10001d385fcaa0364cac28f12.jpg" /></a></li>
    </ul>

                            <div style="clear:both"></div>

                            <!-- Uploader -->
                            <link href="uploader/ajaxuploader.css" rel="stylesheet" />

                            <script type="text/javascript" src="uploader/ajaxuploader-min.js"></script>
                            <script type="text/javascript">
                                var uploader = null;
                                $().ready(function(){
                                    uploader = new Uploader();
                                    uploader.setOptions(1024 * 1024 * 15, ["jpeg", "jpg", "png", "gif"]);
                                });
                            </script>
                            <style type="text/css">
                                #wrapper { margin: 10px 0 10px 6px; padding:0; overflow: hidden; }
                            </style>

                            <div class="message" style="margin-top:10px">
                                <div id="wrapper">
                                    <div id="uploadspace"></div>
                                    <div id="buttons">
                                        <div id="addbutton" >
                                            <form enctype="multipart/form-data" method="post" action="uploader/ajaxuploader.php?uid=41"> 
                                                <input type="file" id="filechooser" onchange="uploader.enqueue();" name="filedata"/>
                                            </form>
                                        </div>
                                        <a id="startbutton" class="hidden" onclick="uploader.start(); return false;"></a>
                                        <a id="clearbutton" class="hidden" onclick="uploader.clear(); return false;"></a>
                                    </div>
                                </div>
                            </div>

                            <select name="select-choice-a" id="select-choice-a" data-mini="true" data-native-menu="false">

                                                                <option>Choose theme</option>
                                <option value="1"  />Polaroids on cord</option>

                                                                <option>Choose theme</option>
                                <option value="2"  />City silhouette</option>

                                                                <option>Choose theme</option>
                                <option value="3"  />Brickwall</option>

                                                                <option>Choose theme</option>
                                <option value="4"  />Clouds</option>

                                                                <option>Choose theme</option>
                                <option value="5"  />Nostalgic</option>

                                                                <option>Choose theme</option>
                                <option value="6"  />Party time</option>

                                                                <option>Choose theme</option>
                                <option value="7"  />Natural harmony</option>

                            </select>

                            <a href="themes/polaroids-on-wood/index.php?id=41" data-role="button" data-theme="b">Visualize it!</a>

                </div><!-- /content -->

                <div data-role="footer" data-position="fixed" class="ui-bar">
                    <a href="gallery-delete-pics.php?id=41" data-role="button" data-icon="delete">Delete images</a>
                </div>

            </div><!-- /page -->

        </body>

    </html> 
```

The HTML output for the gallery ID 70 (the one which doesn't display anything except a white background):

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>auto gal</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;"  />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
        <link rel="stylesheet" href="css/style.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript" src="js/script.js"></script>

    </head> 
    <body> 
        <div data-role="page" class="page gallery-page">

            <div data-role="header" data-theme="b">
                <a href="gallery-list.php" data-icon="arrow-l" data-rel="back" data-direction="reverse">Back</a>
                <a href="index.php" data-icon="home" data-direction="reverse">Home</a>
                <h1>auto gal</h1>
            </div><!--/header-->

            <div data-role="content"> <!-- <div data-role="content full-width"> -->

                        <div class="error">There are no images in this gallery. Click on the Add button to add pictures manually from your device.</div>

                        <!-- Uploader -->
                        <link href="uploader/ajaxuploader.css" rel="stylesheet" />

                        <script type="text/javascript" src="uploader/ajaxuploader-min.js"></script>
                        <script type="text/javascript">
                            var uploader = null;
                            $().ready(function(){
                                uploader = new Uploader();
                                uploader.setOptions(1024 * 1024 * 15, ["jpeg", "jpg", "png", "gif"]);
                            });
                        </script>
                        <style type="text/css">
                            #wrapper { margin: 10px 0 10px 6px; padding:0; overflow: hidden; }
                        </style>

                        <div class="message" style="margin-top:10px">
                            <div id="wrapper">
                                <div id="uploadspace"></div>
                                <div id="buttons">
                                    <div id="addbutton" >
                                        <form enctype="multipart/form-data" method="post" action="uploader/ajaxuploader.php?uid=69"> 
                                            <input type="file" id="filechooser" onchange="uploader.enqueue();" name="filedata"/>
                                        </form>
                                    </div>
                                    <a id="startbutton" class="hidden" onclick="uploader.start(); return false;"></a>
                                    <a id="clearbutton" class="hidden" onclick="uploader.clear(); return false;"></a>
                                </div>
                            </div>
                        </div>

            </div><!-- /content -->

            <div data-role="footer" data-position="fixed" class="ui-bar">
                <a href="gallery-delete-pics.php?id=69" data-role="button" data-icon="delete">Delete images</a>
            </div>

        </div><!-- /page -->

    </body>

</html> 
```

Besides that I noticed that jquery mobile seems to cache css files. If I link from one page which has the jquery mobile framework included to another page which has completely no jquery mobile framework included at all, it still shows the css style of the jquery mobile framework. Only after a manual page refresh will the new css styling show up.

# iphone - Xcode 3 和 Xcode 4.3.1 之间的 AppDelegate 区别

> ID：10281059
> 
> 赞同：0
> 
> 时间：2012-04-23T13:01:01.493
> 
> 标签：iphone, ios, xcode, ios5, xcode4.3

[我刚刚从 APress 出版的图书馆“ Beginning iPhone Games Development](http://www.apress.com/9781430225997) ”中挑选的一本书开始学习编写 iPhone 应用程序（可能为时已晚）。我现在开始相信它是为 XCode 3 编写的。但此时，我可以下载带有 iOS 5 SDK 的 XCode 4.3.1。

书中列出了一个代码块：

```
// XCODE 3: changing to landscape orientation in AppDelegate.m
- (void) applicationDidFinishLaunching:(UIApplication*)application {
   [application setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];
   [application setStatusBarHidden:YES animated:NO];
   [window addSubView:viewController.view];
   [window makeKeyAndVisible];
} 
```

经过一番挣扎，我得出结论，两个 XCode 版本之间存在重大变化，因为它没有提到需要对 AppDelegate.h 或连接视图/控制器 IBOutlets 进行的任何更改。

任何人都可以向我展示有关更改的良好参考以及 Xcode 4.3.1 中的相同代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:08:10.023

从 Xcode 4.3.2 中由模板创建的单视图应用程序：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

许多事情发生了变化，不仅从 iOS 3 到 iOS 5，而且从 Xcode 3 到 Xcode 4。当你使用 Xcode 4 时，你可能会发现参考为 Xcode 3 编写的书籍有点困难。

PS Apress 有一本新书《[Beginning iOS 5 Games Development](http://www.apress.com/9781430237105)》，但我没有读过，所以没有任何评论。

# android - 在我的 android 应用程序中显示 webview 时出错

> ID：10281065
> 
> 赞同：0
> 
> 时间：2012-04-23T13:01:34.457
> 
> 标签：android, webview

我需要在我的 android 应用程序中显示一个 Webview。问题是我要显示的网页出现错误：

```
"This page contains the following errors:

error on line xxx at column xxx: Entity 'abc' is not defined

Below is the rendering of the page upto the first error" 
```

该网站在我的移动浏览器和我的桌面上运行良好。另外，我没有在其他网站上收到此错误

无论如何我可以避免这个错误。请帮忙。

这是java代码：

```
public class Zero extends Activity {

    WebView wv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.zero);

        wv=(WebView) findViewById(R.id.web);
        wv.getSettings().setJavaScriptEnabled(true);
        //wv.loadUrl("http://customercare.indianrailways.gov.in/criscm/common/complaint_registration.seam");
        wv.loadUrl("http://ndtv.com");
        wv.setWebViewClient(new HelloWebViewClient());

        final Activity activity = this;

        wv.setWebChromeClient(new WebChromeClient(){

             public void onProgressChanged(WebView view, int progress) {
                     activity.setTitle("Loading...");
                     activity.setProgress(progress * 100);
                        if(progress == 100)
                           activity.setTitle("Easy Complaint Indian Railways");
                     }
    });

    }

    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && wv.canGoBack()) {
            wv.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

布局xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/web">
</WebView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:39:00.820

使用以下活动加载您的网址 :::

```
public class WebViewsScreenActivity extends Activity {

 private WebView mwebview;
 private WebViewsScreenActivity _activity;
 ProgressDialog _dilog;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);  
  getWindow().requestFeature(Window.FEATURE_PROGRESS);  
  setContentView(R.layout.webview);
  _activity = this;  
  mwebview=(WebView)findViewById(R.id.webview);
                mwebview.getSettings().setJavaScriptEnabled(true);
                mwebview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

   if(checkInternetConnection(_activity)){
    if(savedInstanceState==null)    
                             mwebview.loadUrl(webUrl);
    else
     mwebview.restoreState(savedInstanceState);
   }
   else{
   //showAlert  "Unable to Connect Server"
   }
         mwebview.setWebChromeClient(new WebChromeClient() {

            @Override
   public void onProgressChanged(WebView view, int progress) {
             if(mwebview.getVisibility()==View.VISIBLE)
             {
             WebViewsScreenActivity  .this.setProgress(progress * 100);

             }
            }
          });
        mwebview.setWebViewClient(new HelloWebViewClient());
 }

@Override
 public boolean onKeyUp(int keyCode, KeyEvent event) {
  // TODO Auto-generated method stub
  if(keyCode == KeyEvent.KEYCODE_BACK)
  {
   mwebview.goBack();
   return true;
  }
  else
   return super.onKeyUp(keyCode, event);
 }

//To check whether network connection is available on device or not
 private boolean checkInternetConnection(Activity _activity) {
  ConnectivityManager conMgr = (ConnectivityManager) _activity.getSystemService(Context.CONNECTIVITY_SERVICE);
  if (conMgr.getActiveNetworkInfo() != null
    && conMgr.getActiveNetworkInfo().isAvailable()
    && conMgr.getActiveNetworkInfo().isConnected())
   return true;
  else
   return false;
 }//checkInternetConnection()

    //HelloWebViewClient class for webview
    private class HelloWebViewClient extends WebViewClient {

  @Override
     public void onPageStarted(WebView view, String url, Bitmap favicon) {
      // TODO Auto-generated method stub
      super.onPageStarted(view, url, favicon);
     }
     @Override
     public void onReceivedError(WebView view, int errorCode,
       String description, String failingUrl) {
      // TODO Auto-generated method stub
      super.onReceivedError(view, errorCode, description, failingUrl);

     }
     @Override
     public void onPageFinished(WebView view, String url) {
      // TODO Auto-generated method stub
      super.onPageFinished(view, url);
     }
 } //HelloWebViewClient-class
}//AccountsScreenActivity-class 
```

注意：：不要忘记在您的清单文件中添加所需的权限。

# android - GNU make - 使用通配符从父目录中查找源

> ID：10281066
> 
> 赞同：4
> 
> 时间：2012-04-23T13:01:38.663
> 
> 标签：android, c, android-ndk, makefile

我重新问[这个](https://stackoverflow.com/questions/8350878/using-makes-wildcard-function-in-android-mk)问题，有点扭曲：

当文件位于 LOCAL_PATH 的父目录中时，如何指定通配符模式？

比如说，文件是`../../src/foo.cpp`and `../../src/bar.cpp`。

代码`LOCAL_SRC_FILES := $(wildcard ../../src/*.cpp)`分配一个空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:58:15.693

我找到了解决方案，但我不太确定问题出在哪里。

旧脚本：

```
LOCAL_PATH := $(call my-dir)
LOCAL_SRC_FILES := $(wildcard ../../src/*.cpp) 
```

有效的新脚本：

```
LOCAL_PATH := $(call my-dir)/..
LOCAL_SRC_FILES := $(wildcard ../src/*.cpp) 
```

我猜 my-dir 和通配符不是指同一个工作目录。

Android ndk 工具链期望在`/jni`文件夹中找到 make 文件 (android.mk)。`$(call my-dir)`似乎返回`/jni`目录（因为那是 make 文件所在的位置）。不过`$(wildcard )`似乎从当前目录看。

我不太确定我是否在这里，但实际上似乎是这样。

编辑：这是我在尝试使用通配符之前使用的工作脚本（只是为了解释为什么我最初做了我所做的）

```
LOCAL_PATH := $(call my-dir)
LOCAL_SRC_FILES := ../../src/foo.cpp \
../../src/bar.cpp 
```

# xpath - 使用 XPath 查找元素

> ID：10281069
> 
> 赞同：1
> 
> 时间：2012-04-23T13:01:43.883
> 
> 标签：xpath

我有以下标记：

```
<div>
 <div>Question1</div>
 <div>
  <button type="button">No</button>
  <button type="button">Yes</button>
 </div>
</div>

<div>
 <div>Question2</div>
 <div>
  <button type="button">No</button>
  <button type="button">Yes</button>
 </div>
</div> 
```

以下 XPath 表达式定位两个是按钮：

```
//div/div/button[text()='Yes'] 
```

但是我只想要`Yes`第一个 div 的按钮，如下所示：

```
//div/div[text()='Question1'] 
```

我怎样才能找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:25:59.663

**使用**：

```
//div[div[. = 'Question1']]
   /div/button[@type = 'button'][. = 'Yes'] 
```

这将选择任何`button`其字符串值为`"Yes"`且其`type`属性具有字符串值`"button"`并且（`button`元素）是`div`a 的子级的`div`，该子级是`div`具有字符串 value的子级的 a 的子级`"Question1"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:10:12.460

您可以像这样定位第一个`button`（如果您不想硬编码`Question1`到查询中）：

```
(//div/div/button[text() = 'Yes'])[1] 
```

另请参阅[MSDN XPath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:11:40.773

使用您的代码段测试并为我工作：

```
//div/div[preceding-sibling::*[position() = 1][.="Question1"]]/button[.="Yes"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:07:57.840

试试 //div/div[text()='Question1']/button[text()='Yes']

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:08:19.220

尝试这样的事情

```
/x:html/x:body/x:div[1]/x:div[2]/x:button[2] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T13:08:27.677

这应该可以解决问题：
`//div[div[text()='Question1']]/div/button[text()='Yes']`
或者
`//div[div/text()='Question1']/div/button[text()='Yes']`
这会选择具有 text='Yes' 的按钮并且其父级的子 div 具有 text='Question1'

此外，如果您对第一个 div 感兴趣，无论文本如何，请使用：

`//div[1]/div/button[text()='Yes']`
更具体地说，您应该指定父级：
`/div[1]/div/button[text()='Yes']`-如果它是根（如您的示例中所示） `//parentNode/div[1]/div/button[text()='Yes']`-如果是*`parentNode`*

# awk - 如何在awk中获取系统输出？

> ID：10281070
> 
> 赞同：3
> 
> 时间：2012-04-23T13:01:44.107
> 
> 标签：awk

我想将 printf 输出存储到数组中，如下所示：

```
op[i] = system( "printf \"%d\\n\" \"" SQ substr($1,i,1) "\"" ) 
```

但是当我给他们回电话时，他们只是0？！

你知道为什么吗！？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T13:20:07.740

你要

```
op[i] = sprintf("%d\n", SQ substr($1,i,1)) 
```

从外部命令捕获输出的方法：

```
cmd = "date"
cmd | getline output
close(cmd) 
```

[http://www.gnu.org/software/gawk/manual/html_node/Getline_002fVariable_002fPipe.html#Getline_002fVariable_002fPipe](http://www.gnu.org/software/gawk/manual/html_node/Getline_002fVariable_002fPipe.html#Getline_002fVariable_002fPipe)

# git - git-svn rebase “文件名太长”

> ID：10281072
> 
> 赞同：2
> 
> 时间：2012-04-23T13:02:10.700
> 
> 标签：git, svn, version-control, git-svn, dvcs

我在跑

```
$ git svn rebase 
```

几分钟后，它完成了获取并开始变基。我收到了下一条错误消息：

```
First, rewinding head to replay your work on top of it...
error: cannot stat '$73_chars_4_deep_levels_path_with_spaces/$180_chars_file_name_looks_cutted_with_spaces_too': File name too long
error: cannot stat '$73_chars_4_deep_levels_path_with_spaces/$180_chars_file_name_looks_cutted_with_spaces_too': File name too long
error: cannot stat '$73_chars_4_deep_levels_path_with_spaces/$180_chars_file_name_looks_cutted_with_spaces_too': File name too long
could not detach HEAD
rebase refs/remotes/git-svn: command returned error: 1 
```

我阅读了以下问题“ [git checkout-index：无法创建文件（文件名太长）](https://stackoverflow.com/questions/6114301/git-checkout-index-unable-to-create-file-file-name-too-long) ”

它与我密切相关，但并没有解决我的问题。

也不

```
git ls-files --stage 
```

也不

```
git ls-files 
```

未找到问题“$180_chars_file_name_looks_cutted_with_spaces_too”文件。我也不能像 bdonlan 在他的解决方案中所说的那样重命名文件（通过某种政治决定）。

除了下载每个文件夹以分离 SVN-repo 并通过移植合并之外，是否有任何解决方法或解决方案？

**更新**

我已经尝试了以上所有

```
MacOsX 10.6
git version 1.7.9.6
svn, version 1.7.4 (r1295709) 
```

提交者正在使用 NTFS 在 Windows 上完成他们的工作

**更新 2**

我做了一些研究。我认为问题在于 UTF-8 字符。我试图创建新文件

```
$ touch "$180_chars_file_name_looks_cutted_with_spaces_too"
$ ls
132_chars_file_name_with_numbers_at_the_end 
```

文件看起来已损坏。它的末尾有一些数字。您可以复制它，例如：

```
$ touch "яяяяяяяяя яя яяяя яя яяяяяяяяяя яяяяяяяяя я яяяяяя я яяя яяяяяяяяя яяяяяяяяяяяяя яяяяяяяя я яяяяяяяяяяяяяяяяяя яяяяяя яя яяяяяя яяяяяяяяяяяяя яяяяяяяя яяяяя яяяяяя я яяя яяяяя яяя"
$ ls
яяяяяяяяя яя яяяя яя яяяяяяяяяя яяяяяяяяя я яяяяяя я яяя яяяяяяяяя яяяяяяяяяяяяя яяяяяяяя я яяяяяяяяяяяяяяяяяя яяяяяя яя яяяяяя яяяя#464CDD8 
```

当 vim 编辑器成功打开“132_chars_file_name_with_numbers_at_the_end”并进行编辑时。但是当我输入 ":wq" 文件时消失了。

现在我想我找到了问题的根源，但在那之后生活并没有变得更容易）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:05:20.693

最后，我在我的情况下找到了尽可能优雅的解决方案。我已经通过 MacOs 磁盘实用程序创建了 ExFat dmg-image。之后，我安装了新的图像文件并将我的 git-repo 复制到其中。它比 VirtualBox 下的 Cygwin 更好用。

另外，我尝试过使用 NTFS，但我失败了。NTFS-3G 和 Tuxero 驱动程序也不支持长 UTF 名称。Linux 和 ReiserFS 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:36:23.467

这是我发现的一种糟糕但可行的解决方法。

MsysGit 和 Cygwin 都可以正常使用该文件。

所以，我得到了 VirtualBox 并在其中安装了带有[MSysGit-utf8 的](http://code.google.com/p/msysgit-utf8/downloads/list)Windows 。

然后我将我的项目复制到 VirtualBox 中。

**git svn rebase**它的工作就像一个魅力。

之后，我能够将更新的项目（或从中变基）复制回 MacOs 主机。当然，没有复制长名称的文件，但我现在可以跳过它们并添加到忽略列表中。

# css - 使用 3d 过渡时的怪异

> ID：10281077
> 
> 赞同：1
> 
> 时间：2012-04-23T13:02:31.467
> 
> 标签：css, 3d, css-transitions, css-transforms

我正在尝试使用 CSS3 制作某种翻转效果。

这是一个例子：http: [//jsfiddle.net/MNhK7/](http://jsfiddle.net/MNhK7/)

但是有一个问题，正如您在 Chrome 19 或 FF 11 中看到的那样，元素在过渡期间发生了位移，但结束和开始位置是应该的，为什么？

我已经设置`transform-origin`了我认为应该防止这种情况发生的设置，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:21:00.537

愚蠢的我，我当然必须指定一个`transform-origin`相同的初始值，或者它是动画的`50% 50%`

# php - 在android中解析来自PHP Webservice的响应

> ID：10281078
> 
> 赞同：2
> 
> 时间：2012-04-23T13:02:44.090
> 
> 标签：php, android, json, web-services

我正在尝试在 android 中使用带有 JSON 的 PHP Web 服务

我从服务器获得响应数据为

```
string(170) "["14","Samsung","1","15","Nokia","1","16","Sony Ericson","1","18","LG","1","19","Iphone","1","21","HTC","1","22","Motorola","1","23","Micromax","1","41","BlackBerry","1"]" 
```

我应该如何解析它以在 ListView 上显示它。我熟悉如何通过创建自定义适配器在 ListView 上显示数据，但我无法解析此输出。请帮助

我按照本教程访问 PHP Web 服务

[http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)
给我一些参考。任何帮助表示赞赏。
谢谢...

Alos 我想知道在 php 端生成的 JSONArray 的正确格式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:23:30.457

首先它不是一个有效的Json格式，Json必须有一个`label`和对应的`value`ex。*"label": "value"*，但您仍然可以像这样手动解析此字符串

```
String yourString= "["14","Samsung","1","15","Nokia","1","16","Sony Ericson","1","18","LG","1","19","Iphone","1","21","HTC","1","22","Motorola","1","23","Micromax","1","41","BlackBerry","1"]";

yourString= yourString.subString(1, yourString.length()-1);

String[] arrayValue= yourString.split(","); 
```

现在你有*arrayValue[0]= "14" arrayValue[1]= "Samsung"*等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:27:10.303

看起来像一个“愚蠢的json”数组。基本上没有问题，因为您将其视为字符串列表。通常我会建议使用一些 JSON 类，但在这种特殊的简单情况下，以下就足够了：

```
String jsonString = "["14","Samsung","1","15","Nokia","1","16","Sony Ericson","1","18","LG","1","19","Iphone","1","21","HTC","1","22","Motorola","1","23","Micromax","1","41","BlackBerry","1"]"
jsonString = jsonString.subString(1, substring.length() -1);
String[] singleValues = jsonString.split(","); 
```

这应该导致这个

```
new String[]{"14","Samsung","1",....} 
```

并且您可以在自定义 ListAdapter 中传递该字符串数组（但默认的也应该没问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:33:07.087

这是有效但奇怪的 json 响应。当你解析这个 json 时，你会得到 27 个值。14, samsung, 1, 15, nokia... 但似乎每 3 项都是像 "14,samsung,1" "15,nokia,1" 这样的对象。而那个json并没有反映这一点。

使用这样的在线 json 解析器，您可以看到可以得到的结果：

`http://jsonviewer.stack.hu/`

你可以像这样解析那个json：

```
List<String> list = new ArrayList<String>();
int counter = 0;
boolean first = true;
String json = "[\"14\",\"Samsung\",\"1\",\"15\",\"Nokia\",\"1\",\"16\",\"Sony Ericson\",\"1\",\"18\",\"LG\",\"1\",\"19\",\"Iphone\",\"1\",\"21\",\"HTC\",\"1\",\"22\",\"Motorola\",\"1\",\"23\",\"Micromax\",\"1\",\"41\",\"BlackBerry\",\"1\"]";
JSONArray getJSONArray;
try {
  getJSONArray = new JSONArray(json);

  for (int i = 0; i < getJSONArray.length(); i++) {

    Log.d("", getJSONArray.getString(i) + "-" + i % 1 + "-" + i % 2);

    if ((first == true && counter == 1) || (first == false && counter == 2)) {
      list.add(getJSONArray.getString(i));
      counter = 0;
      first = false;
    }
    else {
      counter += 1;
    }
  }
}
catch (JSONException e) {
  e.printStackTrace();
} 
```

**记录您的阵列以查看您得到了什么：**

```
for (String item : list) {
  Log.d("list", item);
} 
```

**结果：**

```
D/list    ( 1669): Samsung
D/list    ( 1669): Nokia
D/list    ( 1669): Sony Ericson
D/list    ( 1669): LG
D/list    ( 1669): Iphone
D/list    ( 1669): HTC
D/list    ( 1669): Motorola
D/list    ( 1669): Micromax
D/list    ( 1669): BlackBerry 
```

**对于服务器站点：**

通常那个json必须是这样的..

```
[
    {
        id: "14",
        brand: "Samsung",
        status: "1"
    },
    {
        id: "15",
        brand: "Nokia",
        status: "1"
    },
    {
        id: "16",
        brand: "Sony Ericson",
        status: "1"
    }
] 
```

# php - 需要像 php MySQL 这样的简单 CMS / 门户网站的推荐

> ID：10281080
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:02:47.090
> 
> 标签：php, mysql, content-management-system, portal

我正在开发我的简单门户，以获取特定的而非最高兴趣。我需要准备好使用 CMS/Portal 引擎，以便轻松连接我自己的 php 脚本。

必须是： - 仅限 php - 免费 - 简单清晰的代码或/和良好的文档 - 具有良好的注册系统 - cms 功能 - 尽可能安全 - 简单的模板系统

我知道 Joomla 和其他流行的 CMS 系统还不错，但是对于这个项目，我需要别的东西。我不希望这里有 99% 的 Joomla 功能以及其他原因。我已经找到了一些系统，但正在等待您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:22:20.423

这取决于您希望它与已经运行的 CMS 相比有多小。这是我将事情放在小范围内的地方（按顺序）：

*   最小的：[https ://stackoverflow.com/questions/694929/whats-your-no-framework-php-framework](https://stackoverflow.com/questions/694929/whats-your-no-framework-php-framework)
*   [CodeIgniter](http://codeigniter.com/)的实现非常小，但它几乎不是开箱即用的 CMS。
*   [CakePHP](http://cakephp.org/) - 更易于使用“开箱即用”，但开销更大
*   [Drupal](http://drupal.org/) - 更像是一个标准的 CMS
*   最简单：[WordPress](http://wordpress.org/) - 几乎为您完成的所有工作，尤其是与其他人的插件相结合。

我有 CakePHP 和 WordPress 的经验，如果您的主要目的是 CMS，我会推荐 WordPress 而不是 CakePHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:13:44.177

德鲁巴不错。它比 Joomla 更干净、更不臃肿。

老实说，听起来你需要一个框架。您可能想查看 Code Igniter 或 CakePHP。

祝你的项目好运！

# objective-c - @char 作为 NSDictionary 中的键

> ID：10281084
> 
> 赞同：1
> 
> 时间：2012-04-23T13:03:01.427
> 
> 标签：objective-c, ios

我尝试使用 @ char 作为 NSDictionary 中的键，但我的应用程序只是崩溃了。我搜索了“无效”键名，在任何地方都找不到@“@”。如果我使用 @"@" 以外的其他东西，一切正常。

我有一个公司列表，我得到每个公司的第一个字母，然后我创建一个 NSMutableDictionary 条目，其中第一个字母作为键，一个 NSMutableArray 作为值。

```
NSMutableDictionary indexDictionary = [[NSMutableDictionary alloc] init];

// here we have a loop on companyName
{
NSString *fristLetter = [[companyName substringToIndex:1] uppercaseString];
NSMutableArray *arrayOfIndexedCompanies = [indexDictionary valueForKey:firstLetter];

    if (arrayOfIndexedCompanies) {
       [arrayOfIndexedCompanies addObject:companyName]
    }
    else {
       NSMutableArray *newArray = [NSMutableArray array];
       [indexDictionary setObject:newArray forKey:firstLetter];
       [newArray addObject:companyName];
    }
} 
```

我在抛出时启用了断点中断，它在 [indexDictionary valueForKey:firstLetter] 处停止...仅当 firstLetter 是 @"@" 时。我有一个如果说：

```
if ([firstLetter isEqualToString:@"@"]) {
    firstLetter = @"A";
} 
```

这很好用，它将@starting 公司正确地放置在A 部分。如果我让 firstLetter 保持不变（将其保留为 @"@"），应用程序将崩溃。

另外，这不是我的代码，我只是想修复它，我对 ObjC 和 Foundation 不太熟悉，所以请温柔一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:47:27.650

[阅读文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html):)

具体来说，这一点：

> 如果 key 不以“@”开头，则调用 objectForKey:。如果键确实以“@”开头，则去掉“@”并使用键的其余部分调用 [super valueForKey:]。

我想这`super valueForKey:`不高兴被称为:)

要修复它，只需调用`objectForKey:`而不是`valueForKey:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:14:25.927

使用字符串`@"@"`作为字典键就可以了：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"Test 1", @"@", @"Test 2", @"Another @", nil];
NSString *result = [dict objectForKey:@"@"];
NSLog(@"%@", result); 
// --> Test 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:27:04.890

你可以试试@"\u0040"

# android - 在android中使用ormlite和sqlite进行不区分大小写的顺序

> ID：10281087
> 
> 赞同：6
> 
> 时间：2012-04-23T13:03:03.740
> 
> 标签：android, ormlite

我想以不区分大小写的方式从 ORMLite DAO 中订购我的数据对象。

目前，我正在使用以下 sqlite 代码区分大小写来订购我的所有者物品：

```
ownerDao.queryBuilder().orderBy("Name", true).query(); 
```

我[在这里](https://stackoverflow.com/questions/973541/how-to-set-sqlite3-to-be-case-insensitive-when-string-comparing)看到 sqlite 使用以下原始 SQL 支持不区分大小写的“order by”：

```
SELECT * FROM owner ORDER BY Name COLLATE NOCASE 
```

`queryRaw()`添加所需后缀的任何简单方法（比调用更容易）？

另一种解决方案是将[DatabaseField 注释](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#SEC7)`columnDefinition`上的属性设置为？`TEXT COLLATE NOCASE`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T17:45:48.833

我想你想要的是使用[`QueryBuilder.orderByRaw(String)`方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/QueryBuilder.html#orderByRaw%28java.lang.String%29)。它看起来像：

```
ownerDao.queryBuilder().orderByRaw("Name COLLATE NOCASE").query(); 
```

请注意，原始字符串不*包含*字符串的`ORDER BY`一部分。引用[javadocs](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/QueryBuilder.html#orderByRaw%28java.lang.String%29)：

> 将原始 SQL“ORDER BY”子句添加到 SQL 查询语句。这不应该包括“ORDER BY”。

`TEXT COLLATE NOCASE` `columnDefinition`尽管我根本没有使用它的经验，但它可能会起作用。

另外，我*不会*使用`orderBy("Name COLLATE NOCASE", true)`答案，因为通常[ORMLite 会](http://ormlite.com/)尝试转义列名并且引号会在错误的位置。

# c# - 模型重建后如何保留自定义导航属性？

> ID：10281092
> 
> 赞同：4
> 
> 时间：2012-04-23T13:03:24.997
> 
> 标签：c#, entity-framework, edmx

我有几个从“用户”表到“报告”表的导航属性。生成的导航属性显然是这样访问的：

```
USER.REPORTs.Where(x => ...)
USER.REPORTs2.Where(x => ...)
USER.REPORTs3.Where(x => ...) 
```

第一个是用户 createdId，第二个是 UserApprovedId 等等......基本的东西。

这些是极难解释的。如果不访问 EDMX 并检查导航属性，很难判断您正在导航哪个属性。

现在我知道我可以在属性管理器中创建自己的 End1/End2 导航属性，但如果重新创建模型，这些属性就会丢失。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:32:23.893

我没有尝试过，但这里有一个想法：既然所有实体类型都是部分类，为什么不将 Visual Studio 生成的导航属性包装在另一个具有方便名称的属性中？

在您的设计器文件中，您将拥有如下内容：

```
public partial class MyEntity : EntityObject
{
    #region Navigation Properties
    public EntityCollection<MyOtherEntity> Other_Entities1
    {
        // ...
    }
    #endregion
} 
```

然后，您可以创建另一个文件来包装导航属性：

```
public partial class MyEntity
{
    public EntityCollection<MyOtherEntity> OtherEntities
    {
        get { return Other_Entities1;}
    }
} 
```

您将在整个代码中使用上面的属性，并且由于在 Visual Studio 生成`.edmx`文件时使用相同的逻辑，因此包装的属性不会更改。即使包装的属性会更改其名称，您也需要在一个地方调整代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:02:44.687

我想我有同样的问题，我从你的问题中了解到。

**您希望保持导航属性名称尽可能清晰，但无论何时从 edmx 重新创建模型？！**

其实我希望如果有更好的解决方案，但这里我在做什么：

1.  将您在数据库中的关系命名为 : `FK_Users_CreateUserReport`，`FK_Users_ApprovedUserReport`... 或任何合适的名称，然后我们将重命名导航属性`ApprovedUserReport`，`CreateUserReport`等等...
2.  每当您重新创建模型时创建一个帮助代码来执行，此代码将打开您的 edmx 文件并更新您想要的所有导航属性，如下所示：

    ```
    // file here is the path to your edmx file
    if (!string.IsNullOrEmpty(file))
    {
        var ns = XNamespace.Get("http://schemas.microsoft.com/ado/2008/09/edm");
        var doc = XDocument.Load(file);
        var list = (from xElem in doc.Descendants(ns + "NavigationProperty")
                    where xElem.Attribute("Name").Value.StartsWith("REPORTs"))
                    select xElem).ToList();
        foreach (var item in list)
        {
            var newName = item.Attribute("Relationship").Value.Split('_').LastOrDefault();
            if (!newName.Contains("."))
                item.SetAttributeValue("Name", newName);
            else
            {
                var ss = newName.Split('.').LastOrDefault();
            }
        }
        doc.Save(file);
        MessageBox.Show(list.Count.ToString());
    } 
    ```

最后一件事，如果你使用纯代码模式，那么这个问题就消失了，但在这种情况下，你应该手动保持你的模型与你的数据库一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:13:26.123

我不确定我是否正确理解了您的问题，但听起来您只是想要一种“更清洁”的方式来直接从 USER 对象访问 REPORTs.Where(...) LINQ 查询的结果。如果是这种情况，我建议像这样创建 USER 对象的扩展：

```
public static class UserExtensions
{
 public static List<REPORT> ReportsWithSomeCondition(this USER user)
 {
    return user.REPORTs.Where(...).ToList();
 }
} 
```

您可以干净地调用它的方式是：

```
List<REPORT> results = USER.ReportsWithSomeCondition() 
```

如果我完全错过了重点，请澄清您的问题，我将删除此答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:34:05.313

您必须使用部分类机制将所有自定义实体代码放在单独的代码文件中。这允许生成生成的代码，而不会影响您的自定义代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T17:24:17.110

Wahid 的答案似乎是长期维护的最佳答案。我们考虑在部分类中实现接口属性，我们将其用作“伙伴类”以进行扩展和设置元数据链接。但是我们正在接口的 T4 模板中的属性仍然是公共的，它们应该是私有的。

改进瓦希德的建议；我们选择扩展它们，而不是改变我们命名外键关系的标准。

FK_Users_Report_CreateUserReport 实际上是我们的解决方案。前 2 个值的标准命名约定得到维护，在更新模型代码中，您可以强制它仅更改带有第三个下划线和第三个值的导航属性名称。如果其他导航属性名称不遵循数据库中外键的标准命名约定，请确保它们不会影响任何其他导航属性名称。

# javascript - 使用缩略图，如何将主图片更改为缩略图？

> ID：10281093
> 
> 赞同：1
> 
> 时间：2012-04-23T13:03:28.287
> 
> 标签：javascript, html, css, image, onhover

我正在尝试使用 Javascript 通过悬停更改图片。我有一个缩略图图像，当用户将鼠标悬停在顶部时，大图会发生变化，具体取决于悬停在哪个缩略图上。

这是我使用的 HTML。

```
<img onmouseover="showT(0)" src="pictures/278 Edit 10-8-11 2312.jpg" 
                    height="75" width="75" >
            <a href="#" onmouseover="showT(0)">pic 1</a>
            <a href="#" onmouseover="showT(1)">pic 2</a>
            <a href="#" onmouseover="showT(2)">pic 3</a> 
```

这是放在 header 中的 java 脚本。

```
 <!-- onhover mouse for thumbNail -->
<script language="JavaScript" type="text/JavaScript"> 
function showT(q){ 
document.getElementById('ima').setAttribute('src','0'+q+'.jpg') 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:17:44.630

这有效..我必须将“ima”添加到图像的 id 中，关闭图像标签。另外，我传递的是图像的位置，而不是索引，改变它很简单。

希望这会有所帮助，干杯。

```
<img id="ima" src="http://www.google.com/images/srpr/logo3w.png" height="75" width="75"/>

<a href="#" onmouseover="showT( 'http://www.google.com/logos/2012/cossington_smith-12-hp.jpg' )">pic 1</a>
<a href="#" onmouseover="showT( 'http://www.google.com/logos/2012/earthday12-hp.jpg' )">pic 2</a>
<a href="#" onmouseover="showT( 'http://www.google.com/logos/2012/Friedrich_Frobel-2012-hp.jpg' )">pic 3</a>

<script type="text/javascript">
    function showT( image )
    {
         document.getElementById( 'ima' ).setAttribute('src',image ) 
    }
</script>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:12:43.503

这是使用 jQuery 的一种方法：

HTML：

```
<img src="my-initial-picture.jpg" alt="Any alternative text" id="bigpic" />
<!-- store the id of the picture that should be displayed in a data-* attribute -->
<a href="#" class="thumbnail" data-index="0">pic 1</a>
<a href="#" class="thumbnail" data-index="1">pic 2</a>
<a href="#" class="thumbnail" data-index="2">pic 3</a> 
```

JS（在`<head></head>`）：

```
<script>
/* when mouse is over any HTML element that has a "thumbnail" class */
$(".thumbnail").mouseover(function() {
    /* change the "src" attribute of the element whose id is "bigpic" */
    /* the .data() method will get the picture id stored in the data-* attribute */
    $("#bigpic").attr("src", "0" + $(this).data("index") + ".jpg");
});
</script> 
```

您可以使用 Google 的 repo 添加 jQuery（在 中`<head></head>`）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# android - 嵌入式 linux/android 内核开发工作流程

> ID：10281094
> 
> 赞同：4
> 
> 时间：2012-04-23T13:03:34.543
> 
> 标签：android, c++, git, linux-kernel, embedded-linux

我受到[上一个](https://stackoverflow.com/questions/1856241/git-workflow-for-corporate-linux-kernel-development)问题的启发，但我没有了解全部情况。我正在为基于商业芯片组平台的新设备开发内核和 Android 系统。

芯片组供应商为我提供了“压缩的固定内核代码”、“android 专有源”、“调制解调器源”。所有这些部分都是成对的，*例如*，我不能（在某种程度上）改变平台元素之一（内核、调制解调器、系统）而不影响其他部分。

这也是相当有限的，如果需要更新版本会发生什么？我不能确定我会得到供应商的资源。

所以这里是我做的一些流程：

==================================================== ===========

**Workflow1: - 我不需要更新版本，我现在需要发布设备！**

1.下载芯片组提供商及其系统的最新公共内核

2.将自己的驱动加入内核

3.将专有源添加到构建中

4.compile -> 一切都已经配置好了

5.调试->小

6.patch -> 小

7.release -> 快速

8.给更新？-> 失败！？- 我需要芯片组供应商提供的新内核/系统。

==================================================== =================

**工作流程2：我不需要供应商**

1.从google/cyanogem等下载干净的android系统。

2.将我的驱动程序添加到内核

3.从芯片组供应商处获取内核补丁

3.为专有文件建立设备目录

4.configure/patch专有的与系统编译->地狱

5.面对很多低级错误->地狱

6.调试/补丁

7.错过最后期限并被解雇

知道这在主要移动设备制造商中是如何工作的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:10:24.393

我正在为其中一家芯片组供应商工作。我们为客户提供参考内核和参考 android 源。但是我们不是将它们作为“压缩源”提供，而是作为 git 存储库提供，因此客户可以看到我们放入 kernel/AFS/etc 的所有补丁并将它们合并到他们的存储库中。

因此，在您的情况下，我建议您向您的供应商询问对 git 存储库的访问权限。如果不可能，我建议您使用工作流程 1。如果您需要重大更新（例如从 GB 切换到 ICS），则无论如何您都需要新供应商的资源。可以在现有资源之上进行小幅更新。

# c - 使用您自己的页面错误处理程序

> ID：10281101
> 
> 赞同：1
> 
> 时间：2012-04-23T13:04:34.500
> 
> 标签：c, linux, gcc, linux-kernel, x86-64

我想向 Linux 中的页面错误处理程序添加代码，特别是我有兴趣修改用于写入时复制的代码，即`do_wp_page`. 然而，困境是我想要测试我的应用程序的机器不在我的控制范围内。不能在该机器上修改操作系统或内核，因为它是由多个用户使用的共享机器。

现在我正在寻找一种方法来定义我自己的页面错误处理程序，它只用于我正在运行的应用程序。也许我可以使用内核模块（我认为我也必须要求一些管理权限）或者我可以在用户空间中定义它。请注意，我不希望它用于处理 SIGSEGV 信号，所以不要说使用`mprotect`. 我想处理写页面错误时的真实副本。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:12:56.597

我建议最简单的做法是使用虚拟机 - 在 VM 中进行内核级开发意味着错误不会给其他用户带来问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:17:40.953

不幸的是 do_page_fault 和 do_wp_page 地址没有公开，因此任何实际执行您所说的操作的方式都可能不受欢迎。在 VM 上的共享机器上进行开发，然后使用专用机器来处理您的基准测试。无论如何，共享机器不会为您提供良好的读数，因为其他用户的工作负载无论如何都会干扰您的工作。

旁注：无论如何，您需要修改 Linux 上的 COW 有什么问题？

# python - 来自python的gcc编译错误

> ID：10281102
> 
> 赞同：10
> 
> 时间：2012-04-23T13:04:37.860
> 
> 标签：python, gcc, cygwin

我知道 gcc 上有很多线程，特别是“command gcc failed with exit status 1”，我已经查看了所有线程，但仍然无法解决这个问题。我只会将 gcc 或 mingw32 用于与 python 相关的任务，例如使用 Cython 或其他可能涉及编译的包。但是，它似乎永远不会起作用。

我有一台装有 Windows 7 家庭版的电脑。我已经使用 mingw32 在其上安装了 cygwin，并且我还安装了 Visual Studio 11 Beta，我很乐意卸载/重新安装任何东西以使其正常工作。

Cython 编译总是失败

```
error: command 'gcc' failed with exit status 1 
```

但即使尝试使用 pip 安装许多 python 包也会失败，并出现类似的错误。例如，我正在尝试安装一个名为“xhtml2pdf”的包。在命令提示符下运行“pip install xhtml2pdf”后，出现以下错误：

```
copying src\reportlab\lib\hyphen.mashed -> build\lib.win32-2.7\reportlab\lib

running build_ext

building '_rl_accel' extension

C:\mingw\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Pytho
n27\PC -c "C:\Users\JJ\Documents\Coding Fun\build\reportlab\src\rl_addons\rl_acc
el\_rl_accel.c" -o "c:\users\jj\documents\coding fun\build\reportlab\src\rl_addo
ns\rl_accel\_rl_accel.o"

cc1.exe: error: unrecognized command line option '-mno-cygwin'

error: command 'gcc' failed with exit status 1 
```

从 cygwin 运行相同的命令会产生不同的错误：

```
copying src\reportlab\lib\hyphen.mashed -> build\lib.win32-2.7\reportlab\lib

running build_ext

building '_rl_accel' extension

gcc -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c C:\cygwin\home\JJ\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c -o c:\cygwin\home\jj\build\reportlab\src\rl_addons\rl_accel\_rl_accel.o

error: command 'gcc' failed: No such file or directory

----------------------------------------
Command C:\Python27\python.exe -c "import setuptools;__file__='C:\\cygwin\\home\\JJ\\build\\reportlab\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record c:\users\jj\appdata\local\temp\pip-aohmse-record\install-record.txt failed with error code 1 in C:\cygwin\home\JJ\build\reportlab
Storing complete log in C:\Users\JJ\AppData\Roaming\pip\pip.log

----------------------------------------
Command C:\Python27\python.exe -c "import setuptools;__file__='C:\\Users\\JJ\\Do
cuments\\Coding Fun\\build\\reportlab\\setup.py';exec(compile(open(__file__).rea
d().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-external
ly-managed --record c:\users\jj\appdata\local\temp\pip-r8_mri-record\install-rec
ord.txt failed with error code 1 in C:\Users\JJ\Documents\Coding Fun\build\repor
tlab
Storing complete log in C:\Users\JJ\AppData\Roaming\pip\pip.log 
```

一般来说，我对编译很陌生，只使用过解释语言，所以我很沮丧地无法弄清楚如何自己解决这个问题。在安装此软件包时提供任何帮助将不胜感激。

编辑：我以前遵循过一些建议，例如尝试删除 distutils 中对“-mno-cygwin”的所有引用并创建 distutils.cfg 文件，但无济于事。

更新：重新安装 cygwin 并将我的 gcc 和 g++ 安装降级到 v3 后，我得到另一个但不同的错误：

```
copying src\reportlab\lib\PyFontify.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\pygments2xpre.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\randomtext.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\rltempfile.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\rparsexml.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\sequencer.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\set_ops.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\styles.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\testutils.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\textsplit.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\units.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\utils.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\validators.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\xmllib.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\yaml.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\lib\__init__.py -> build\lib.win32-2.7\reportlab\lib

copying src\reportlab\pdfbase\cidfonts.py -> build\lib.win32-2.7\reportlab\pdfba
se

copying src\reportlab\pdfbase\pdfdoc.py -> build\lib.win32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\pdfform.py -> build\lib.win32-2.7\reportlab\pdfbas
e

copying src\reportlab\pdfbase\pdfmetrics.py -> build\lib.win32-2.7\reportlab\pdf
base

copying src\reportlab\pdfbase\pdfpattern.py -> build\lib.win32-2.7\reportlab\pdf
base

copying src\reportlab\pdfbase\pdfutils.py -> build\lib.win32-2.7\reportlab\pdfba
se

copying src\reportlab\pdfbase\rl_codecs.py -> build\lib.win32-2.7\reportlab\pdfb
ase

copying src\reportlab\pdfbase\ttfonts.py -> build\lib.win32-2.7\reportlab\pdfbas
e

copying src\reportlab\pdfbase\_can_cmap_data.py -> build\lib.win32-2.7\reportlab
\pdfbase

copying src\reportlab\pdfbase\_cidfontdata.py -> build\lib.win32-2.7\reportlab\p
dfbase

copying src\reportlab\pdfbase\_fontdata.py -> build\lib.win32-2.7\reportlab\pdfb
ase

copying src\reportlab\pdfbase\_fontdata_enc_macexpert.py -> build\lib.win32-2.7\
reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_macroman.py -> build\lib.win32-2.7\r
eportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_pdfdoc.py -> build\lib.win32-2.7\rep
ortlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_standard.py -> build\lib.win32-2.7\r
eportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_symbol.py -> build\lib.win32-2.7\rep
ortlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_winansi.py -> build\lib.win32-2.7\re
portlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_enc_zapfdingbats.py -> build\lib.win32-2
.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_courier.py -> build\lib.win32-2.7
\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_courierbold.py -> build\lib.win32
-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_courierboldoblique.py -> build\li
b.win32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_courieroblique.py -> build\lib.wi
n32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_helvetica.py -> build\lib.win32-2
.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_helveticabold.py -> build\lib.win
32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_helveticaboldoblique.py -> build\
lib.win32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_helveticaoblique.py -> build\lib.
win32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_symbol.py -> build\lib.win32-2.7\
reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_timesbold.py -> build\lib.win32-2
.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_timesbolditalic.py -> build\lib.w
in32-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_timesitalic.py -> build\lib.win32
-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_timesroman.py -> build\lib.win32-
2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\_fontdata_widths_zapfdingbats.py -> build\lib.win3
2-2.7\reportlab\pdfbase

copying src\reportlab\pdfbase\__init__.py -> build\lib.win32-2.7\reportlab\pdfba
se

copying src\reportlab\pdfgen\canvas.py -> build\lib.win32-2.7\reportlab\pdfgen

copying src\reportlab\pdfgen\pathobject.py -> build\lib.win32-2.7\reportlab\pdfg
en

copying src\reportlab\pdfgen\pdfgeom.py -> build\lib.win32-2.7\reportlab\pdfgen

copying src\reportlab\pdfgen\pdfimages.py -> build\lib.win32-2.7\reportlab\pdfge
n

copying src\reportlab\pdfgen\pycanvas.py -> build\lib.win32-2.7\reportlab\pdfgen

copying src\reportlab\pdfgen\textobject.py -> build\lib.win32-2.7\reportlab\pdfg
en

copying src\reportlab\pdfgen\__init__.py -> build\lib.win32-2.7\reportlab\pdfgen

copying src\reportlab\platypus\doctemplate.py -> build\lib.win32-2.7\reportlab\p
latypus

copying src\reportlab\platypus\figures.py -> build\lib.win32-2.7\reportlab\platy
pus

copying src\reportlab\platypus\flowables.py -> build\lib.win32-2.7\reportlab\pla
typus

copying src\reportlab\platypus\frames.py -> build\lib.win32-2.7\reportlab\platyp
us

copying src\reportlab\platypus\para.py -> build\lib.win32-2.7\reportlab\platypus

copying src\reportlab\platypus\paragraph.py -> build\lib.win32-2.7\reportlab\pla
typus

copying src\reportlab\platypus\paraparser.py -> build\lib.win32-2.7\reportlab\pl
atypus

copying src\reportlab\platypus\tableofcontents.py -> build\lib.win32-2.7\reportl
ab\platypus

copying src\reportlab\platypus\tables.py -> build\lib.win32-2.7\reportlab\platyp
us

copying src\reportlab\platypus\xpreformatted.py -> build\lib.win32-2.7\reportlab
\platypus

copying src\reportlab\platypus\__init__.py -> build\lib.win32-2.7\reportlab\plat
ypus

copying src\reportlab\fonts\00readme.txt -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\bitstream-vera-license.txt -> build\lib.win32-2.7\re
portlab\fonts

copying src\reportlab\fonts\DarkGarden-copying-gpl.txt -> build\lib.win32-2.7\re
portlab\fonts

copying src\reportlab\fonts\DarkGarden-copying.txt -> build\lib.win32-2.7\report
lab\fonts

copying src\reportlab\fonts\DarkGarden-readme.txt -> build\lib.win32-2.7\reportl
ab\fonts

copying src\reportlab\fonts\DarkGarden.sfd -> build\lib.win32-2.7\reportlab\font
s

copying src\reportlab\fonts\DarkGardenMK.afm -> build\lib.win32-2.7\reportlab\fo
nts

copying src\reportlab\fonts\DarkGardenMK.pfb -> build\lib.win32-2.7\reportlab\fo
nts

copying src\reportlab\fonts\Vera.ttf -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\VeraBd.ttf -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\VeraBI.ttf -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\VeraIt.ttf -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_abi____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_ab_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_ai_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_a______.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\cobo____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\cob_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\com_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\coo_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_ebi____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_eb_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_ei_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\_er_____.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\Sy______.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\Zd______.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\Zx______.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\fonts\Zy______.pfb -> build\lib.win32-2.7\reportlab\fonts

copying src\reportlab\lib\hyphen.mashed -> build\lib.win32-2.7\reportlab\lib

running build_ext

building '_rl_accel' extension

C:\mingw\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Pytho
n27\PC -c C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel
.c -o c:\users\jj\documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.o

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c: In fun
ction `hex32':

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c:491: wa
rning: unsigned int format, long unsigned int arg (arg 3)

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c: In fun
ction `_instanceStringWidthU':

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c:741: wa
rning: 'L' might be used uninitialized in this function

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c:741: wa
rning: 't' might be used uninitialized in this function

C:\Users\JJ\Documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.c:741: wa
rning: 'f' might be used uninitialized in this function

writing c:\users\jj\documents\build\reportlab\src\rl_addons\rl_accel\_rl_accel.d
ef

C:\mingw\bin\dllwrap.exe -mno-cygwin -mdll -static --output-lib c:\users\jj\docu
ments\build\reportlab\src\rl_addons\rl_accel\lib_rl_accel.a --def c:\users\jj\do
cuments\build\reportlab\src\rl_addons\rl_accel\_rl_accel.def -s c:\users\jj\docu
ments\build\reportlab\src\rl_addons\rl_accel\_rl_accel.o -LC:\Python27\libs -LC:
\Python27\PCbuild -lpython27 -lmsvcr90 -o build\lib.win32-2.7\_rl_accel.pyd

_rl_accel.exp: file not recognized: File format not recognized

collect2: ld returned 1 exit status

dllwrap: gcc exited with status 1

error: command 'dllwrap' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T22:30:03.303

所以，过了一会儿，我偶然发现了一个到目前为止对我有用的帖子。

[http://www.develer.com/oss/GccWinBinaries](http://www.develer.com/oss/GccWinBinaries)

该站点提供了一个非官方的 MinGW GCC 二进制文件（MinGW 不支持/认可），旨在与 Python 完美集成，直至路径的自动更新。我安装了它并 bam，`pip install cython`刚刚开始工作。

希望这可以帮助更多人解决这个 gcc 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:37:18.183

我刚刚回答了同样的问题：为什么 dllwrap 在 pip 中给出这个错误？

```
_foo.exp: file not recognized: File format not recognized 
```

简短的回答：检查你的路径。MinGW\bin 需要靠近它的开头。

长答案：见[python pip package install failed , 'fixing' 后的 dllwrap 错误：“unable to find vcvarsall.bat”](https://stackoverflow.com/questions/5439160)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T06:59:03.117

我在 cygwin 中遇到了这个问题，直到我意识到还需要安装 gcc-g++ 包。现在我已经安装了 gcc-core 和 gcc-g++，`pip install pandas`就像一个魅力。

# c# - 如何使用 mono.cecil 添加没有默认构造函数的自定义属性

> ID：10281104
> 
> 赞同：6
> 
> 时间：2012-04-23T13:04:39.420
> 
> 标签：c#, mono.cecil

这个问题与[这个](https://stackoverflow.com/questions/8388196/adding-custom-attributes-using-mono-cecil)有关，但不是重复的。Jb 在那里发布要添加自定义属性，以下代码段将起作用：

```
ModuleDefinition module = ...;
MethodDefinition targetMethod = ...;
MethodReference attributeConstructor = module.Import(
    typeof(DebuggerHiddenAttribute).GetConstructor(Type.EmptyTypes));

targetMethod.CustomAttributes.Add(new CustomAttribute(attributeConstructor));
module.Write(...); 
```

我想使用类似的东西，但要添加一个自定义属性，其构造函数在其（唯一）构造函数中采用两个字符串参数，并且我想为那些（显然）指定值。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T13:14:17.273

首先，您必须获得对正确版本的构造函数的引用：

```
MethodReference attributeConstructor = module.Import(
    typeof(MyAttribute).GetConstructor(new [] { typeof(string), typeof(string) })); 
```

然后，您可以简单地使用字符串参数填充自定义属性：

```
CustomAttribute attribute = new CustomAttribute(attributeConstructor);
attribute.ConstructorArguments.Add(
        new CustomAttributeArgument(
            module.TypeSystem.String, "Foo"));
attribute.ConstructorArguments.Add(
        new CustomAttributeArgument(
            module.TypeSystem.String, "Bar")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T16:29:25.270

以下是如何设置自定义属性的命名参数，该属性完全绕过使用其构造函数设置属性值。请注意，您不能直接设置 CustomAttributeNamedArgument.Argument.Value 甚至 CustomAttributeNamedArgument.Argument，因为它们是只读的。

以下相当于设置 - `[XXX(SomeNamedProperty = {some value})]`

```
 var attribDefaultCtorRef = type.Module.Import(typeof(XXXAttribute).GetConstructor(Type.EmptyTypes));
    var attrib = new CustomAttribute(attribDefaultCtorRef);
    var namedPropertyTypeRef = type.Module.Import(typeof(YYY));
    attrib.Properties.Add(new CustomAttributeNamedArgument("SomeNamedProperty", new CustomAttributeArgument(namedPropertyTypeRef, {some value})));
    method.CustomAttributes.Add(attrib); 
```

# javascript - 为什么只有在我在调试模式下运行代码时才会出现预期值，但在我不调试时会中断，我该如何解决这个问题？

> ID：10281112
> 
> 赞同：1
> 
> 时间：2012-04-23T13:05:04.730
> 
> 标签：javascript, jquery, asp.net-mvc-2

我对以下代码感到头疼，想知道是否有人可以帮助我。

我有一个名为 Details.aspx 的视图，位于名为 project 的文件夹中。在详细信息视图中，我有以下关键代码片段，这让我很头疼。

```
<script type="text/javascript">
var Global_ProjectID = <%:Model.ProjectID%>; //Gets the project ID from Project Table In model
</script> 
```

在表单标签 ( `<form action="<%: ResolveUrl("~/Issue/AddIssue") %>" method="post">`) 中包含以下代码：

```
 <p>
            <input type="submit" class="submit small" value="Add Issue" onclick="return IssueSubmitForm()"/>
            or <a href="">cancel</a></p> 
```

然后我有更多的 Javascript 可以与我的控制器 IssueController 对话，方法是 AddIssue

```
<script type="text/javascript">
    var PostBackUrl = "<%:ResolveUrl("~/Issue/AddIssue")%>";

    //Front-end Validation here

    function IssueSubmitForm() {
        var PostBackData = {
            Title: $("input[name=Title]").val(),
            Details: $("textarea[name=Details]").val(),
            ReportedBy: $("input[name=ReportedBy]").val(),
            Priority: $("select[name=Priority]").val(),
            ProjectID: Global_ProjectID
        };

        $.post(PostBackUrl,PostBackData);
    }
</script> 
```

这将获取输入到表单中的信息（来自各种 Web 控件），以及来自 Global_ProjectID 的值

在我的控制器中，以下方法是从我的 javascript 调用的方法

```
 [HttpPost]
    public ActionResult AddIssue(Models.Issue issue)
    {
        Models.Issue newIssue = new Models.Issue()
        {
            Title = issue.Title,
            DateLogged = DateTime.Now,
            Status = 0,
            ReportedBy = issue.ReportedBy,
            Priority = issue.Priority,
            ProjectID = issue.ProjectID,
        };
        return View("SomeOtherViewSomewhere");
    } 
```

现在这是奇怪的部分。

我的所有字段（如标题、reportby 等）都按应有的方式填写，即它实际上包含我希望它包含的值——我填写到表单中的数据。当 ProjectID 实际上应该包含一个整数值时，它总是恰好为空。

当我在浏览器中激活我的 javascript 上的调试器时，我看到 ProjectID 确实被填充了，并且如果我添加了以下代码`Alert(Global_ProjectID);`，它还会给我一个带有我需要的值的弹出窗口。

但是，当我在不调试的情况下运行这些代码段时，ProjectID 始终为空。可悲的是，这是我必须经常使用的值，而 null 根本行不通

我该怎么做才能修复此代码？我让其他程序员看了一下，他们也和我一样难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:11:59.810

我建议研究[Javascript 作用域和提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)- JS 在变量和函数的初始化顺序方面并不总是以您期望的方式运行。

您可以通过调整`IssueSubmitForm`函数以接受`ProjectID`作为参数并`onclick="return IssueSubmitForm(Global_ProjectID)"`在提交按钮上使用来解决此问题...

或者更好的是，移除内联函数调用，并在页面加载完成后绑定一个提交 `$(document).ready()`事件。

# javascript - 有没有更好的方法来模拟 JavaScript 中的指针？

> ID：10281115
> 
> 赞同：3
> 
> 时间：2012-04-23T13:05:07.693
> 
> 标签：javascript, pointers, closures, simulate, dynamic-scope

我正在使用[动态范围](https://stackoverflow.com/q/10060857/783743 "是否可以在不使用 eval 的情况下在 JavaScript 中实现动态范围？")来模拟JavaScript 中的[指针，](http://hpyblg.wordpress.com/2010/05/31/simulating-pointers-in-javascript-part-2/ "在 JavaScript 中模拟指针，第 2 部分 «快乐博客，快乐博客")[如下所示](http://jsfiddle.net/GJMZ6/1/)：

```
var ptr = (function () {
    var ptr = "(" + String(function (value) {
    if (value === void 0) return upvalue;
    else upvalue = value;
}) + ")";

    return function (upvalue) {
        return ptr.replace(/upvalue/g, upvalue);
    };
}());

function swap(xptr, yptr) {
    var t = xptr();
    xptr(yptr());
    yptr(t);
}

var x = 2;
var y = 3;

alert([x, y]);
swap(eval(ptr("x")), eval(ptr("y")));
alert([x, y]); 
```

有没有其他方法可以达到相同的结果（即不诉诸`eval`）？这似乎是太多的样板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T00:36:46.527

由于您使用指针的唯一目的是取消引用它以访问另一个变量，因此您可以将其封装在一个属性中。

```
function createPointer(read, write) {
  return { get value() { return read(); }, set value(v) { return write(v); } };
} 
```

要创建指针，请传递读取和写入指向的变量的访问器方法。

```
var i;
var p = createPointer(function() { return i; }, function(v) { i = v; });
// p is now a "pointer" to i 
```

要取消引用指针，请访问其值。换句话说，在 C 语言中你会写`*p`在这里的地方你写`p.value`.

```
i = "initial";
alert(p.value); // alerts "initial"
p.value = "update";
alert(i); // alerts "update"
p.value += "2";
alert(i); // alerts "update2" 
```

您可以创建指向同一个变量的多个指针。

```
var q = createPointer(function() { return i; }, function(v) { i = v; });
// q is also a "pointer" to i
alert(q.value); // alerts "update2"
q.value = "written from q";
alert(p.value); // alerts "written from q" 
```

您可以通过简单地用另一个指针覆盖指针变量来更改指针指向的内容。

```
var j = "other";
q = createPointer(function() { return j; }, function(v) { j = v; });
// q is now a "pointer" to j 
```

您可以通过指针交换两个变量。

```
function swap(x, y) {
    var t = x.value;
    x.value = y.value;
    y.value = t;
} 
```

让我们使用它们的指针交换 和 的值`i`。`j`

```
swap(p, q);
alert(i); // alerts "other"
alert(j); // alerts "written from q" 
```

您可以创建指向局部变量的指针。

```
function example() {
    var myVar = "myVar as local variable from example";
    var r = createPointer(function() { return myVar; }, function(v) { myVar = v; });
    swap(p,r);
    alert(i); // alerts "myVar as local variable from example"
    alert(myVar); // alerts "other"
}
example(); 
```

通过闭包的魔力，这为您提供了一种模拟 malloc 的方法。

```
function malloc() {
    var i;
    return createPointer(function() { return i; }, function(v) { i = v; });
}
var p = malloc(); // p points to a variable we just allocated from the heap
p.value = 2; // write a 2 into it 
```

你的魔术也有效：

```
var flowers = new Misdirection(
       createPointer(function() { return flowers; }, function(v) { flowers = v; }));
flowers.abracadabra();
alert(flowers);

function Misdirection(flowers) {
    this.abracadabra = function() {
        flowers.value = new Rabbit;
    };
}

function Rabbit() {
    this.toString = function() { return "Eh... what's up doc?" };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:47:10.183

不幸的是，在 Javascript 中引用变量的唯一方法是直接访问它（我们不希望这样做，因为它进行静态绑定）或将其名称以字符串形式传递给 eval。

如果您真的想避免 eval，您可以尝试将变量放在充当作用域的对象中，因为这将允许您使用`[]`下标符号来访问给定名称的变量。请注意，如果您创建的所有指针都指向全局变量，那么情况已经如此，因为全局变量也被设为全局`window`对象的属性。

* * *

```
function pointer(scope, varname){
    return function(x){
        if(arguments.length <= 0){ //The explicit arguments.length lets us set the pointed variable to undefined too.
            return scope[varname];
        }else{
            return (scope[varname] = x);
        }
    }
};

var vars = {
    x: 1
};

var y = 2; // "normal" variables will only work if they are global.

swap( pointer(vars, 'x'), pointer(window, 'y') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:10:25.260

**编辑：**

@Tomalak - 考虑以下 JavaScript 程序：

```
var flowers = new Misdirection;
flowers.abracadabra();
alert(flowers);

function Misdirection() {
    this.abracadabra = function () {
        this = new Rabbit;
    };
}

function Rabbit() {
    this.toString = function () {
        return "Eh... What's up, doc?";
    };
} 
```

上面的程序抛出`ReferenceError: Cannot assign to 'this'`. 指针可以用来解决这个问题；虽然它不会更新`this`指针，但它会做下一件最好的事情——更新对指针的唯一引用`this`。

`this`我们可以通过替换为.来使上述程序在不使用指针的情况下工作`flowers`。然而，通过这样做，误导魔术只适用于构造函数的一个实例。指针允许我们使它适用于任意数量的实例。

`Function.call`使用、`Function.apply`或无法获得相同的结果`Array.map`。此外，如果构造函数返回一个显式值，那么`this`无论如何覆盖指针都是没有用的。我在下面编写的程序（使用指针）即使我`abracadabra`从返回函数`Misdirection`并调用`flowers()`而不是`flowers.abracadabra()`.

**原来的：**

在 JavaScript 中模拟指针是一个非常强大的技巧。例如，它可以用来执行魔术，[如下所示](http://jsfiddle.net/BU2SV/1/ "兔八哥")：

```
var flowers = new Misdirection(&flowers);
flowers.abracadabra();
alert(flowers);

function Misdirection(flowers) {
    this.abracadabra = function () {
        *flowers = new Rabbit;
    };
}

function Rabbit() {
    this.toString = function () {
        return "Eh... What's up, doc?";
    };
} 
```

这一切都很好，但当我们挑战极限时，在 JavaScript 中模拟指针的[真正](https://github.com/JediCorp/lambda "拉姆达 JS")力量就会显现[出来](http://jsfiddle.net/BU2SV/2/ "古典传承")：

```
var Square = new Class(function (ctor, uber) {
    *ctor = constructor;

    var side;

    function constructor(length) {
        side = length;
    }

    this.area = function () {
        return side * side;
    };

    return &uber;
});

var Cube = new Class(function (ctor, uber) {
    *ctor = constructor;

    function constructor(side) {
        uber(side);
    }

    this.area = function () {
        return 6 * uber.area();
    };

    return &uber;
}, Square);

var cube = new Cube(5);
alert(cube.area());

function Class(claus, Uber) {
    Claus.__proto__ = Uber === void 0 ? Class.prototype : Uber;

    return Claus;

    function Claus() {
        var self = this;
        var called;

        var uber = Uber === void 0 ? function () {
            throw new Error("No uber class specified.");
        } : function () {
            if (!called) {
                called = "Cannot call uber class constructor more than once.";

                var args = Array.prototype.slice.call(arguments);
                args = Array.prototype.concat.call([null], args);
                var base = new (Function.prototype.bind.apply(Uber, args));

                self.__proto__.__proto__ = base;
                self.__proto__.__proto__.constructor = Claus;

                *uber = base;
            } else throw new Error(called);
        };

        var constructor = new Function;
        uber = claus.call(this, &constructor, uber);
        constructor.apply(this, arguments);
    };
} 
```

显然这是太多的样板，但它确实展示了闭包的强大功能。真正令人惊奇的是，我们可以使用这个样板来模拟 JavaScript 中的经典面向对象编程。例如，可以将以下代码转编译为上述程序（尽管我们需要编写一个完整的解析器来执行此操作）：

```
class Square {
    var side;

    function constructor(length) {
        side = length;
    }

    this.area = function () {
        return side * side;
    };
}

class Cube extends Square {
    function constructor(side) {
        uber(side);
    }

    this.area = function () {
        return 6 * uber.area();
    };
}

var cube = new Cube(5);
alert(cube.area()); 
```

请注意，线条`*ctor = constructor;`和`return &uber;`已被删除。这只是使构造函数和继承工作所必需的冗余代码。此外，该`Class`函数未编写在源代码中，因为它是由转编译器自动添加的。

在上面的程序中展示了在 JavaScript 中模拟指针的美妙之处，其中`uber`类中的变量`Cube`最初是基类的构造函数。但是，当它被调用时，它会被基类的实例所取代，该实例成为`this`.

这也意味着 的实例`Cube`不会是 的实例，`Square`除非从 调用 uber 类构造函数`Cube`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:31:59.423

类似的东西？

```
function swap(a,b,scope) {
    var t = scope[a];
    scope[a] = scope[b];
    scope[b] = t; 
}

x = 2;
y = 3;
alert([x,y]);
swap('x', 'y',this);
alert([x,y]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:39:06.460

这是使用对象执行此操作的一种方法：

```
var obj = {
    x:2,
    y:3
},
swap = function(p1, p2){
    var t = obj[p1];
    obj[p1] = obj[p2];
    obj[p2] = t;
};

console.log( obj.x, obj.y );
swap('x', 'y');
console.log( obj.x, obj.y ); 
```

# mysql - 非唯一表/别名：表名

> ID：10281116
> 
> 赞同：0
> 
> 时间：2012-04-23T13:05:09.140
> 
> 标签：mysql, sql, codeigniter

我收到错误错误号：1066

不是唯一的表/别名：'fixed_asset_reissue'

```
SELECT * FROM 
(`fixed_asset_reissue`, `fixed_asset_reissue`) 
RIGHT JOIN `fixed_asset_distribution` ON 
`fixed_asset_distribution`.`fixed_asset_list_id`=
`fixed_asset_reissue`.`fixed_asset_list_id` 
WHERE `customer` = 'R/00567/00' 
```

代码是

```
$get2= $this->db->select('*')
           ->from('fixed_asset_reissue')
           ->join('fixed_asset_distribution','fixed_asset_distribution.fixed_asset_list_id=fixed_asset_reissue.fixed_asset_list_id','right')
            ->where('customer',$cust_id);
    $data['reissue']=$get1->get('fixed_asset_reissue')->result(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:25:37.803

从获取声明或从声明中删除此“fixed_asset_reissue”表格。这就是问题

# iphone - Xcode 子目标

> ID：10281118
> 
> 赞同：0
> 
> 时间：2012-04-23T13:05:10.087
> 
> 标签：iphone, ios, xcode, build, targets

根据应用程序是在模拟器中运行还是在设备中运行，我最好的选择似乎是具有特定于环境的前缀标头。

为了应用不同的前缀标头，我需要为每个环境设置一个完整的单独目标 - 一个用于本地/模拟器部署，一个用于设备部署。

这意味着我要维护两个几乎相同的目标，这是一个令人头疼的维护问题。那么我该如何改进这个设置。有没有办法创建子目标或以某种方式从同一个父目标派生两个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:09:51.710

您不需要创建新目标，只需在 *Prefix.pch 中使用它

```
#if !TARGET_IPHONE_SIMULATOR
//  device headers
#else
//  simulator headers
#endif 
```

# c# - 模态弹出窗口不适用于 AutoCompleteExtender

> ID：10281121
> 
> 赞同：0
> 
> 时间：2012-04-23T13:05:22.310
> 
> 标签：c#, ajaxcontroltoolkit, modalpopupextender

我有一个显示问题列表的自动完成扩展器。在同一个文本框中，当我输入内容并单击“搜索”按钮时，应打开一个弹出窗口并选择类别。我正在为弹出窗口使用 modalpopupextender。但是使用自动完成扩展器时模型弹出窗口不会打开。同时没有自动完成扩展器它会工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T09:49:10.330

如果您尝试在 ModalPopupExtender 中使用 AutoCompleteExtender，您会注意到自动完成选项显示在模态弹出窗口的后面。这是一个 Z-index 问题，其中 ModalPopupExtender 覆盖所有其他控件。如果您检查模态框的 Z-index，您会看到它使用 100001 作为其前景元素，因此请使用更高的值，例如 10000001。

使用此代码段：

```
<cc1:AutoCompleteExtender ID="ace" runat="server" OnClientShown="ShowOptions">
</cc1:AutoCompleteExtender>

<script language="javascript" type="text/javascript">
    function ShowOptions(control, args)
    {
        control._completionListElement.style.zIndex = 10000001;
    }
</script> 
```

# asynchronous - 如何使用异步 JQuery 确认对话框作为同步？

> ID：10281122
> 
> 赞同：4
> 
> 时间：2012-04-23T13:05:37.043
> 
> 标签：asynchronous, callback, jquery-ui-dialog, confirm

我使用了一个简单的 JavaScript 确认函数，它被我的 Asp.net 项目中的所有页面使用，我想**用 jQuery 确认对话框替换它**。我使用 Apprise jQuery 确认对话框库。但是 jQuery 确认对话框的异步工作会导致问题。让我给你一些我项目的代码示例..

**这是我的旧 JavaScript 确认功能**

```
function confirmForOperation(message) {
    if (confirm(message) == true)
        return true;
    else
        return false;
} 
```

**这是我新的异步 jQuery 确认对话框功能**

```
function confirmForOperation(message) {
    apprise(message, { 'verify': true, 'animate': true, 'textYes': 'Yes', 'textNo': 'No' },
    function (r) {
        if (r) {
            // User clicked YES..
            return true;
        }
        else {
            // User clicked NO..
            return false;
        }
    });
} 
```

**您可以让我使用以下功能**

```
function confirmForOperation(message, callBack) {
    apprise(message, { 'verify': true, 'animate': true, 'textYes': 'Yes', 'textNo': 'No' },
    function (r) {
        if (r) {
            // User clicked YES..

            if ($.isFunction(callback)) {
                callback.apply();
            }
        }
        else {
            // User clicked NO..
            return false;
        }
    });
} 
```

但是回调机制对我不起作用，因为我使用此确认对话框功能的区域（代码）之一如下：

```
<asp:Button ID="btnDelete" runat="server" CausesValidation="false" CommandName="Delete"
Text="<%$ Resources:BTNResource, BUTTON_DELETE_LABEL %>" OnClientClick="return confirmForOperation();" /> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:52:58.157

我也在看这个，答案是否定的。在此处查看此出色的解释：

[将异步 jQuery Dialog 更改为同步？](https://stackoverflow.com/questions/6962301/change-the-asynchronous-jquery-dialog-to-be-synchronous)

# navigation - 如何在 WP7.1 中导航到 backstack 中的特定页面

> ID：10281123
> 
> 赞同：0
> 
> 时间：2012-04-23T13:05:39.030
> 
> 标签：navigation, windows-phone-7.1, back-button, back-stack

如何根据 Wp7.1 中导航回栈中的页面名称导航到特定页面。我想在按下设备后退按钮时从 C 页返回说 A 页，我不知道中间有多少页。

谢谢，金谷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:09:02.197

查看“反向链接”：
[http ://www.imaginativeuniversal.com/blog/post/2010/10/09/Back-Chaining-in-WP7.aspx](http://www.imaginativeuniversal.com/blog/post/2010/10/09/Back-Chaining-in-WP7.aspx)

> 因为我们一次只能以编程方式反向导航一个页面，所以开发人员社区设计了一种称为反向链接的技术。反向链接仅涉及在您的页面中设置某些标志，这样，如果有人返回页面，它将继续向后导航。通过这种方式，我们可以将多个返回导航链接在一起，直到到达我们想要停止的页面。

# module - DNN 模块开发：创建 HTML 模块功能

> ID：10281127
> 
> 赞同：0
> 
> 时间：2012-04-23T13:05:49.483
> 
> 标签：module, telerik, dotnetnuke, save, radeditor

我正在制作一个 DNN 模块，我想添加类似于 HTML 模块的功能。所以我在 Edit.ascx 中添加了一个 Telerik Radeditor 以及 dnn:Label。我还想要一个标记为“保存”的按钮，该按钮在设置中具有相同的样式。

我想知道如何添加这样的按钮，以及我应该如何保存输入到 radeditor 的内容？它是否保存类似于设置，还是我必须将数据保存在我可用的任何数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T23:56:24.897

您只需像添加任何其他 .ascx 控件一样添加一个按钮 - 通过在页面上添加一个控件。然后，您通常会将按钮单击事件连接到您的保存例程。

您应该根据 moduleId 或 TabModuleId 将结果保存到您自己的表中，具体取决于模块的用途。您需要创建自己的表，因为您需要将生成的 html 保存到 Sql Server 中的 nText 字段中，以便您有足够的空间来存储结果。

周围有很多开源文本/编辑 html 模块。我会检查其中一个或多个的源代码以获取想法。

# web-services - 在不更改客户端代码的情况下从 Axis2 迁移到 CXF

> ID：10281129
> 
> 赞同：1
> 
> 时间：2012-04-23T13:05:55.203
> 
> 标签：web-services, cxf, axis2

我正在发布一个由少数外部客户端使用的 Web 服务。是否可以在不通知我的客户的情况下将 Web 服务发布 API 从 Axis2 迁移到 CXF？他们是否必须更改他们的客户端代码？这种迁移的其他影响是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:14:13.793

只要服务的 WSDL 保持不变，客户端代码根本不需要更改。在线soap 消息，只要它们与wsdl 匹配，就应该完全相同。

# silverlight - Radgridview 只选择一个明细行

> ID：10281130
> 
> 赞同：0
> 
> 时间：2012-04-23T13:06:01.803
> 
> 标签：silverlight, telerik, radgrid

在我的silverlight 应用程序中，我有一个带有radgridview 的页面，这个radgridview 有另一个控件作为RowDetailsTemplate。

在这个 RowDetailsTemplate 中是另一个 radgridview 与另一个控件作为 RowDetailsTemplate。这个 RowDetailsTemplate 也有一个 radgridview。

所有的网格视图都有几个绑定到我的 ViewModel（我使用过 MVVM）

层次结构是这样的：

```
 - RadGridView
      - RadGridView (in fact a seperate control with a gridview, setup as rowdetailstemplate on the parent gridview)
           -RadGridView (in fact a seperate control with a gridview, setup as rowdetailstemplate on the parent gridview) 
```

在我的设置中，您可以为每个网格/详细信息网格选择一行。

这意味着您可以在整个网格中直观地选择 1 到 N 行。这看起来很混乱，不是很用户友好。

我的问题：

更改此设置的最佳方法是什么，以便只能选择一行，而不是从 1 到 N？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:56:18.000

我不知道这是否是理想的方式..但你可以做这样的事情......

```
 Private Sub AllGrids_ItemClicked(ByVal sender As Object, ByVal e As Telerik.Web.UI.GridCommandEventArgs) _
    Handles grd1.ItemCommand, grd2.ItemCommand, grd3.ItemCommand
    dim gridSelected as New RadGrid 
    gridSelected = sender
    If e.CommandName = "RowClick" Then
       if gridSelected.ID = grd1.ID then
          For i As Integer = 0 To grdMenu.Items.Count - 1
            If grd2.Items(i).Selected Then
                grd2.Items(i).Selected = False
            End If
           Next
           For i As Integer = 0 To grdMenu.Items.Count - 1
            If grd3.Items(i).Selected Then
                grd3.Items(i).Selected = False
            End If
           Next
       end if
    End If
    '' Do this again for each of the other grids.
End Sub 
```

基本上，您将遍历不会导致事件取消选择所有内容的网格。

# database - spring hibernate 获取整个数据库的锁定

> ID：10281131
> 
> 赞同：0
> 
> 时间：2012-04-23T13:06:06.533
> 
> 标签：database, spring, hibernate, tomcat, locking

我需要运行更新生产数据库中所有表的脚本，所以我需要在唯一的应用程序服务器上锁定所有数据库。怎么做？我在我的应用程序中使用 spring、tomcat、oracle 和 hibernate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:26:53.970

人们通常为此做的是`REVOKE CONNECT ON DATABASE x FROM PUBLIC`然后强制关闭其他连接，或者修改`pg_hba.conf`文件并重新加载配置以防止不需要的登录。

# c# - 创建对象的线程中的依赖注入

> ID：10281132
> 
> 赞同：1
> 
> 时间：2012-04-23T13:06:19.737
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container

如果我有一个从主应用程序启动的线程。在此线程中生成事件。每次生成事件时都会创建一个对象。在那个对象中需要依赖，所以我想注入那个对象。如何将此依赖关系传递给创建的对象？我是否需要向下传递依赖关系（并让在线程中工作的类知道依赖关系）还是有更好的方法来做到这一点？顺便说一句，我正在使用 Unity。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:42:48.217

最安全的方法是让每个线程在开始时构建一个新的对象图。不要通过其他线程传递依赖项。

通过依赖注入，您尝试集中有关对象生命周期的知识。这个集中的地方被称为[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx). 当您开始将依赖项从一个线程传递到另一个线程时，代码的那些部分必须知道传递这些依赖项是否安全。例如，这些依赖项是线程安全的吗？在许多情况下，这可能很容易分析，但会阻止您使用其他实现更改这些依赖项，因为现在您必须记住代码中有一个地方发生了这种情况，并且您需要知道传递了哪些依赖项。您再次分散了这些知识，使得推理 DI 配置的正确性变得更加困难，并且更容易以导致竞争条件的方式错误配置容器。

您可以在此 wiki 页面上找到有关此主题的更多信息：[如何在多线程应用程序中使用依赖注入](http://simpleinjector.codeplex.com/wikipage?title=How-to#Multi_Threaded_Applications)

# vim - 使用 rails.vim 和环绕 vim 插件时如何从 erb 标签 <% -%> 中排除破折号 (-)

> ID：10281134
> 
> 赞同：0
> 
> 时间：2012-04-23T13:06:25.007
> 
> 标签：vim

我使用 rails.vim 和 round.vim 插件插入 <% -%> 标签，如本主题中所述[如何使用 Vim 插入 ERB 标签？](https://stackoverflow.com/questions/4275209/how-to-insert-erb-tags-with-vim).

我如何从这个小“模板”中删除破折号，因为它在 rails 3 中不再需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:32:19.713

跳到`rails.vim`：

`mvim ~/.vim/autoload/rails.vim`

并删除以下行中的连字符：

`call self.setvar('surround_45', "<% \r -%>")`

现在`yss-`将按照`<% %>`.

您可能希望对`end`-shortcuts 执行相同的操作 - 请参阅[此差异](https://github.com/tpope/vim-rails/commit/4eca304a673396eb41106464a9b1c6f37fe1aea9)了解详细信息*（两天前提交）*。

# c# - 将 DES 加密转换为 RSA 加密

> ID：10281136
> 
> 赞同：0
> 
> 时间：2012-04-23T13:06:41.280
> 
> 标签：c#, cryptography, rsa, des

我的 C# 程序中有一个加密部分，它使用 DES 加密进行加密。它只是加密“005”。我想要这部分，但使用 RSA 加密。我不知道如何使用 C# 代码。谁能帮助我

```
/*********************Message Encryption******************************/
string smsg = "005";
string venc;
DESCryptoServiceProvider iDESCryptoServiceProvider = new DESCryptoServiceProvider();
System.Text.Encoding iEncoding = new System.Text.UTF8Encoding();
byte[] vkey = iEncoding.GetBytes("12345678");
byte[] viv = { 1, 2, 3, 4, 5, 6, 7, 8 };
ICryptoTransform iICryptoTransform = iDESCryptoServiceProvider.CreateEncryptor(vkey, viv);
byte[] vmsg = iEncoding.GetBytes(smsg);
byte[] benc = iICryptoTransform.TransformFinalBlock(vmsg, 0, vmsg.Length);
venc = System.Convert.ToBase64String(benc);
/****************Message Encryption******************************/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:20:01.007

这更像是一项密码学任务。

无论如何，您需要做的是将 DESCryptoServiceProvider 换成 RSACryptoServiceProvider。此外，由于 RSA 是 PKI 密码，而 DES 是对称分组密码，您需要创建适当的参数等。因此，如果这是您要实现的目标之一，那么实际的加密也将使用不同的密钥完成。

最后，所有必要的代码都可以在 [http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx找到](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)

**编辑**

好的，根据我从您的回复中收集到的信息，您实际上并不想使用 RSA。只是任何其他密码，对吧？

在这种情况下，您可以选择什么，假设您想保留 .NET'`System.Security.Crytography`库作为您的源，您可以从 4 种对称加密（读取相同类型的）算法中进行选择。这些是：

*   [AES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)
*   [DES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.descryptoserviceprovider.aspx)
*   [RC2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rc2cryptoserviceprovider.aspx)
*   [三重DES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledescryptoserviceprovider.aspx)

它们都有非常相似的界面，所以只需选择其中一个（我的建议是选择 AES）并重新编写代码。它们具有相同的接口（如果我没有从快速浏览中错过某些东西），所以您真正需要做的就是用 AES 替换所有出现的 DES。就如此容易。

希望这可以帮助。

# ruby-on-rails - Rails，如何进行不使用 ID 的自定义活动记录连接

> ID：10281137
> 
> 赞同：1
> 
> 时间：2012-04-23T13:06:41.427
> 
> 标签：ruby-on-rails, ruby, activerecord

我的 RoR 应用程序中有两个模型*用户*和*友谊*

*友谊*表包含两个整数字段*user1*和*user2*，这两个字段都表示一种关系。

我将如何为存在于*user1*或*user2*字段中的给定用户 ID 选择所有朋友？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:08:15.067

您可以使用`find_by_sql`

[http://apidock.com/rails/ActiveRecord/Base/find_by_sql/class](http://apidock.com/rails/ActiveRecord/Base/find_by_sql/class)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:39:11.920

查看 ActiveRecord 的[has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)方法文档。我认为您可以执行以下操作：

```
class User
  has_many :friendships, :finder_sql => lambda { |user| ["SELECT * FROM friendships WHERE user1 = :id OR user2 = :id", :id => user.id] }

  def friends
    ids = friendships.map(&:user1) + friendships.map(&:user2)
    ids.uniq!
    ids.delete(id)
    User.find(ids)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:19:26.883

```
class User
  def friends
    user_ids = Friendship.where(["user1 = :id OR user2 = :id", :id => self.id]).inject([]) {|sum,x| sum << x.user1 && sum << x.user2 }.uniq-[self.id]
    User.find(user_ids)
  end
end 
```

# python - Python 在一个端口上扭曲了多个协议

> ID：10281145
> 
> 赞同：1
> 
> 时间：2012-04-23T13:07:02.397
> 
> 标签：python, twisted

如何在一个端口上使用多种不同的协议？或者我如何在相同的客户端操作后即时更改协议？

# oracle - 更新显式游标

> ID：10281146
> 
> 赞同：0
> 
> 时间：2012-04-23T13:07:09.960
> 
> 标签：oracle, plsql, cursor

我有一个光标可以检索火车的行程细节。当我循环浏览记录时，我会更新下一站的 ETA（到达时间）。该值再次用于计算该站的 ETD（出发时间）。我希望在记录获取该行程的下一站时使用 ETA 的更新值来计算 ETD，而不是在打开游标时使用旧值。这可能吗？

```
CURSOR CUR_SCN IS
SELECT TRIP_ID,
TRAIN_ID,
STATION_ID,
ETA
FROM TRIP_DTL
WHERE ....;

FOR rec IN CUR_SCN
   calculate and update ETD for current rec.STATION_ID

   ld_eta := Business logic goes here for calculating next station ETA for the TRIP

   UPDATE TRIP_DTL
   SET ETA = ld_eta
   WHERE STATION_ID = next station
   AND TRIP_ID = rec.TRIP_ID;
END LOOP; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:59:07.480

当光标打开时，有一个固定的数据视图。获得“新”值的唯一方法是重新查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:48:26.593

正如[Adam Hawkes](https://stackoverflow.com/a/10282009/458741)所说，没有办法在光标 for 循环中“获取”新值，但是有一些方法可以解决这个问题。

1.  使用[全局临时表](http://psoug.org/reference/gtt.html)。更新这个，再次查询，然后把所有东西都放在你的实际表中——我不太喜欢这条路线，但它会做你想做的。

2.  [将您的数据批量收集](http://psoug.org/reference/array_processing.html)到用户定义的类型中，并使用其中的值来计算您想要的。类似于以下内容。这样做的好处是在表上执行的 DML 更少，并且您可以使用 rowid 进行更新，因此更新会更快。

    ```
    declare

       cursor cur_scn is
        SELECT rowid as rid, TRIP_ID, TRAIN_ID, STATION_ID, ETA
          FROM TRIP_DTL
         WHERE ....
         ORDER BY SOMETHING;

        type t__scn is table of cur_scn%rowtype index by binary_integer;
        t_scn t__scn;

    begin

       open cur_scn;
       fetch cur_scn bulk collect into t_scn;

       for i in t_scn.first + 1.. t_scn.last loop
          t_scn(i).eta := t_scn(i - 1).eta + business_logic;
       end loop;

       forall i in t_scn.first .. t_scn.last
          update trip_dtl
             set eta = t_scn(i).eta
           where rowid = t_scn(i).rid;

       close cur_scn;

    end; 
    ```

3.  我真的不喜欢您必须始终更新所有内容的方式，但是我无法想到更好的存储数据的方法，但是您应该进行调查。

# matlab - 近似指数函数的 Matlab 代码

> ID：10281150
> 
> 赞同：4
> 
> 时间：2012-04-23T13:07:20.367
> 
> 标签：matlab, math, approximation, exp

有谁知道在处理大实数和负实数时如何使以下 Matlab 代码更准确地逼近指数函数？

例如，当 x = 1 时，代码运行良好，当 x = -100 时，当它应该更接近 3.7201e-44 时，它返回 8.7364e+31 的答案。

代码如下：

```
s=1
a=1;
y=1;
for k=1:40
    a=a/k;
    y=y*x;
    s=s+a*y;
end
s 
```

任何帮助表示赞赏，欢呼。

编辑：

好的，所以问题如下：

*这段代码近似于哪个数学函数？**（我说的是指数函数。）**当 x = 1 时它是否有效？**（是的。）**不幸的是，当 x = -100 时使用它会产生答案 s = 8.7364e+31。您的同事认为程序中存在愚蠢的错误，并请求您的帮助。仔细解释行为并给出一个简单的修复方法，从而产生更好的结果。[您必须建议对上述代码进行修改，否则它会被使用。您还必须检查您的**简单修复**工作。]*

所以我有点理解，当术语之间有 16 个（或更多）数量级时，问题围绕着大量数字，精度会丢失，但解决方案却让我望而却步。

谢谢

编辑：

所以最后我选择了这个：

```
s = 1;
x = -100;
a = 1;
y = 1;
x1 = 1;

for k=1:40
    x1 = x/10;
    a = a/k;
    y = y*x1;
    s = s + a*y;
end

s = s^10;
s 
```

不确定它是否完全正确，但它返回了一些很好的近似值。

exp(-100) = 3.720075976020836e-044
s = 3.722053303838800e-044

经过进一步分析（不幸的是提交了作业），我意识到增加迭代次数，从而增加项，进一步提高效率。事实上，以下方法更有效：

```
s = 1;
x = -100;
a = 1;
y = 1;
x1 = 1;

for k=1:200
    x1 = x/200;
    a = a/k;
    y = y*x1;
    s = s + a*y;
end

s = s^200;
s 
```

这使：

exp(-100) = 3.720075976020836e-044
s = 3.720075976020701e-044

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T13:33:41.283

正如约翰在评论中指出的那样，循环中有一个错误。y = y*k 行不能满足您的需要。更仔细地查看 exp(x) 的系列中的术语。

无论如何，我认为这就是为什么你被分配了这个家庭作业，以了解像这样的系列对于大值不能很好地收敛。相反，您应该考虑如何缩小范围。

例如，您可以使用身份

```
exp(x+y) = exp(x)*exp(y) 
```

对你有利？假设您存储 exp(1) = 2.7182818284590452353 的值...

现在，如果我让你计算 exp(1.3) 的值，你会如何使用上述信息？

```
exp(1.3) = exp(1)*exp(0.3) 
```

但是我们已经知道 exp(1) 的值。实际上，稍加思考，这将使您将指数范围缩小到仅在 abs(x) <= 0.5 时需要级数快速收敛。

编辑：还有第二种方法可以使用相同身份的变体来缩小范围。

```
exp(x) = exp(x/2)*exp(x/2) = exp(x/2)^2 
```

因此，假设您希望计算大数的指数，可能是 12.8。让它以可接受的速度快速收敛将需要简单级数中的许多项，并且会发生大量的减法抵消，因此无论如何您都不会获得良好的准确性。但是，如果我们认识到

```
12.8 = 2*6.4 = 2*2*3.2 = ... = 16*0.8 
```

那么如果您可以有效地计算 0.8 的指数，那么可以通过重复平方来轻松恢复所需的值。

```
exp(12.8)
ans =
          362217.449611248

a = exp(0.8)
a =
          2.22554092849247
a = a*a;
a = a*a;
a = a*a;
a = a*a
          362217.449611249

exp(0.8)^16
ans =
          362217.449611249 
```

请注意，当您使用此类方法进行范围缩减时，虽然您可能会由于必要的额外计算而遇到数值问题，但由于您的系列的收敛性大大增强，您通常会领先一步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T13:18:51.127

为什么你认为这是错误的答案？查看该序列的最后一项，它的大小，并告诉我为什么您期望您的答案应该接近 0。

我最初的回答说舍入错误是问题所在。这*将*是这种基本方法的一个问题，但是为什么您认为 40 项对于适当的*数学*（而不是计算机浮点算术）答案来说已经足够了。

100^40 / 40！〜= 10 ^ 31。

Woodchip 有减少射程的正确想法。这是人们用来快速实现这些功能的典型方法。一旦你弄清楚了这一切，你就可以处理交替序列的舍入误差，方法是对循环中的相邻项求和，并以 k = 1 : 2 : 40 步进（例如）。在您使用woodchips 的想法之前，这在这里不起作用，因为对于x = -100，和数会增长*很*长时间。你需要 |x| < 1 以保证中间项正在缩小，因此重写将起作用。

# oracle - 将旧的 oracle 连接转换为 ANSI SQL 连接

> ID：10281151
> 
> 赞同：2
> 
> 时间：2012-04-23T13:07:20.637
> 
> 标签：oracle, join, vertica

是否有工具可以帮助我重写数千行代码？我们将从 Oracle 服务器迁移到 Vertica，因此将不再支持较旧的 Oracle 联接，并且需要重写大量 SQL。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:47:11.720

[Toad 11.0](http://www.quest.com/toad/)（查询生成器）应该能够做到这一点。我没有非常详细地使用它，但在大多数情况下它是有效的。我会仔细检查任何工具提供的任何代码，因为没有什么是 100% 万无一失的。许多人喜欢的另一个有前途的工具似乎是[swissql](http://www.swissql.com/)。无论您使用哪种工具，您都需要进行大量手动校对，以确保生成的查询是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:26:15.730

Vertica 的 SQL 变体与 PostgreSQL 相同。所以你可能想看看是否有任何工具已经处理了这个问题。

这里有一个链接可能是一个很好的起点：[Tool for translation of Oracle PL/SQL into Postgresql PL/pgSQL](https://stackoverflow.com/questions/158310/tool-for-translation-of-oracle-pl-sql-into-postgresql-pl-pgsql)

# jquery-ui - jquery-ui 对话框中的奇怪行为

> ID：10281153
> 
> 赞同：0
> 
> 时间：2012-04-23T13:07:27.750
> 
> 标签：jquery-ui

我有这个 jquery-ui 表单：

```
<html>  
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script>
var socket = io.connect('http://localhost:8080');

$(function() {  
    $("#chat-form").dialog({
       autoOpen: false,
       height: 300,
       width: 550,
       modal: false,
           buttons: {
               Submit: function() {
                   socket.emit('send_fics_cmd', chat.val());
                   chat.val('');
               }
           }
}); 
</script>
</head>
<body>
<div id="chat-form" title="FICS Console">
    <div id="chat-window" class="text ui-widget-content ui-corner-all"></div>
    <form>
    <fieldset>
    <input type="text" name="chat" id="chat" value="" class="text ui-widget-content ui-corner-all" />
    <input type="text" style="display:none" />
    </fieldset> 
    </form>
</div>
</body>
</html> 
```

node.js/socket.io 服务器在 localhost:8080 上侦听套接字对象上的发射。

我不明白的是：没有相当荒谬的线

```
<input type="text" style="display:none" /> 
```

在 id="chat" 的输​​入文本框正下方，每当我按下 Return/Enter 键时，都会通过 GET 提交表单。不执行提交处理程序。即使提交按钮没有焦点，也会发生这种情况，这完全是非常不受欢迎的行为。

但是，当此行存在时，提交处理程序仅在具有焦点时才在按 Return/Enter 键时执行，这正是我想要的。

顺便说一句，它不适用于 type="hidden"，因此 display:none 只会使附加输入在视图中消失。

这是 jquery-ui 中的错误还是以某种方式有意义？

# php - 使用 php curl 抓取 aspx 页面

> ID：10281154
> 
> 赞同：1
> 
> 时间：2012-04-23T13:07:48.247
> 
> 标签：php, asp.net, curl, screen-scraping

我正在尝试使用 php curl 代码抓取一个 aspx 页面，其中包含明智的数据页面。最初页面使用 get 方法加载，但当我们选择页面编号时。从下拉它使用 post 方法提交页面页面。

我想通过将 postfields 传递给 curl 来查找特定页面的数据，但无法做到这一点。

我创建了一个虚拟代码来获取第 5 页的记录，但它总是返回第一页的结果。

示例代码

```
$url = 'http://www.ticketalternative.com/SitePages/Search.aspx?catid=All&pattern=Enter%20Artist%2c%20Team%2c%20or%20Venue';
$file=file_get_contents($url);
//<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value=
preg_match_all("#<input.*?name=\"__VIEWSTATE\".*?value=\"(.*?)\".*?>.*?<input.*?name=\"__EVENTVALIDATION\".*?value=\"(.*?)\".*?>#mis", $file, $arr_viewstate); 
$viewstate = urlencode($arr_viewstate[1][0]);
$eventvalidation = urlencode($arr_viewstate[2][0]); 
$options = array( 
CURLOPT_RETURNTRANSFER => true, // return web page
CURLOPT_HEADER => true, // don't return headers 
CURLOPT_FOLLOWLOCATION => true, // follow redirects 
CURLOPT_ENCODING => "", // handle all encodings 
CURLOPT_USERAGENT => "spider", // who am i 
CURLOPT_AUTOREFERER => true, // set referer on redirect 
CURLOPT_CONNECTTIMEOUT => 120, // timeout on connect 
CURLOPT_TIMEOUT => 1120, // timeout on response 
CURLOPT_MAXREDIRS => 10, // stop after 10 redirects 
CURLOPT_POST => true,
CURLOPT_VERBOSE => true,
CURLOPT_POSTFIELDS => '__EVENTTARGET='.urlencode('ctl00$ContentPlaceHolder1$SearchResults1$SearchResultsGrid$ctl13$ctl05').'&__EVENTARGUMENT='.urlencode('').'&__VIEWSTATE='.$viewstate.'&__EVENTVALIDATION='.$eventvalidation.'&__LASTFOCUS='.urlencode('').'&ctl00$ContentPlaceHolder1$SearchResults1$SearchResultsGrid$ctl13$ctl05=4');
$ch = curl_init($url); 
curl_setopt_array($ch,$options);
$result = curl_exec($ch);
curl_close($ch);

preg_match_all('/<a id=\".*?LinkToVenue\" href=\"(.*?)\">(.*?)<\/a>/ms',$result,$matches);
print_r($matches); 
```

任何人都可以帮我解决这个问题，我哪里错了，我认为它不起作用，因为第一次页面加载使用 GET 方法，当我们继续页面链接时，它使用 post。

我将如何获得特定页码的记录？

问候

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-04-24T07:48:09.733

有时当客户端需要时，我会在 php 中编写爬虫，但我永远不会尝试使用 php 来爬取 ASP.NET 站点。为此，您需要 perl python 或 ruby​​。这三个都有一个机械化库，通常很容易。

# webgl - 如何在 Scenejs 中通过 IdMapping 进行拾取？

> ID：10281155
> 
> 赞同：1
> 
> 时间：2012-04-23T13:07:48.517
> 
> 标签：webgl, framebuffer, picking, scenejs

我们有一个像这样的巨大 Json Mesh，我们用 scenejs 渲染：

```
{"vertices":[
0.0, 0.0, 0.0,
0.0, 0.0, 2.0,
1.0, 0.0, 2.0,
0.0, 2.0, 2.0, //... next object
],
"normals":[
0.0, 0.0, 1.0,
0.0, 0.0, 1.0,
0.0, 0.0, 1.0,
0.0, 0.0, 1.0, //... next object
],
"colors":[
1.0, 0.0, 0.0, 1.0,
0.0, 1.0, 0.0, 1.0,
0.0, 0.0, 1.0, 1.0,
1.0, 1.0, 1.0, 1.0, //... next object
],
"idMapColors":[
0.0, 0.0, 0.0, 0.756,
0.0, 0.0, 0.0, 0.756,
0.0, 0.0, 0.0, 0.756,
0.0, 0.0, 0.0, 0.756, //... next object
]} 
```

idMapColors 对于每个“对象”都是唯一的，可以转换为 id 以提供附加信息。

我们现在想在屏幕上使用普通颜色渲染网格，并在第二个渲染路径中使用 idMapColors。我们不想在特定点（鼠标位置）处读取第二个 FrameBuffer（用于 idMapColors）中的颜色值。

如何在 Scenejs 中执行此操作？我们可以将 idMapColors 渲染到 Framebuffer，但是如何访问它的数据呢？

在[https://github.com/xeolabs/scenejs/wiki/frameBuf](https://github.com/xeolabs/scenejs/wiki/frameBuf)的 wiki 上，我们发现拣货还在进一步工作中，目前是否有可能这样做？

# sql - 我应该从哪里开始这个数据库设计？

> ID：10281158
> 
> 赞同：0
> 
> 时间：2012-04-23T13:07:51.633
> 
> 标签：sql, database-design, normalization

我有 5 个未规范化的表，我需要创建一个 ER 模型、一个逻辑模型、规范化数据以及一堆查询。

你会从哪里开始？你会先规范化数据吗？创建 ER 模型和关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:17:48.707

有两种方法可以开始数据建模：自顶向下和自底向上。

**自上而下的方法**是询问哪些事物（有形和无形）对您的系统很重要。这些东西成为你的实体。然后，您将完成确定实体之间如何相互关联（您的关系）的过程，然后用属性充实实体。结果是您的概念或逻辑模型。如果您愿意，这可以用 ERD 形式表示。

无论是在此过程中还是在定义实体、关系和属性之后，您都会经历规范化过程并做出其他实现决策以达到您的物理模型 - 这也可以表示为 ERD。

**自下而上的方法**是获取您现有的关系 - 即您拥有的任何屏幕、报告、数据存储或任何现有数据表示，然后执行*规范合成*以将整个数据表示集简化为单个、连贯、规范化的模型。这是通过规范化您的每个数据视图并寻找可让您将项目组合到单个模型中的共性来完成的。

您使用哪种方法在一定程度上取决于个人选择，在很大程度上取决于您是否有现有的数据视图可供开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:13:03.130

我认为您应该首先准备实体和属性列表。这样您将能够获得数据信息的完整详细信息。

一旦你清楚了数据信息。您可以开始创建主表并规范化。

然后在完成数据库规范化设计后，您可以非常轻松地创建ER图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:21:35.990

我将首先评估然后准备数据中的实体和属性列表。

我会按这个顺序做。

1.  关系
2.  创建 ER 模型。
3.  规范化数据。

我知道许多其他人会有不同的意见，但这是我继续前进的方式:)

# iphone - 响应 SpringBoard 的终止而终止

> ID：10281160
> 
> 赞同：3
> 
> 时间：2012-04-23T13:07:53.477
> 
> 标签：iphone

我在控制台中收到此错误。谁能告诉我这是什么类型的错误..“**终止以响应 SpringBoard 的终止**”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:14:17.493

那是当应用程序因高内存使用或跳板崩溃而被 ios 终止时（跳板是管理其他应用程序的应用程序......又名..主屏幕），或者您退出应用程序

如果你的设备越狱了，你可以经常越狱

你收到跳板重启警报了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T22:43:59.713

我遇到了同样的问题，当我退出我的应用程序时，意外地似乎我的代码仍在尝试执行某些操作（在我的情况下，它正在为 AudioUnit 缓冲区生成数据）。我刚刚在 dealloc 方法中退出了这个生成，一切看起来都好多了。没有警告。

# windows-phone-7 - 如何获取网站的IP地址？(Windows phone 7.0)

> ID：10281162
> 
> 赞同：2
> 
> 时间：2012-04-23T13:08:08.113
> 
> 标签：windows-phone-7, dns, ip-address, web-hosting

Windows Phone 7.0 不支持 IPAddress 类、IPHostEntry 类和 Dns 类。

有任何其他类可以在 Windows phone 7.0 上获取网站的 IP 地址吗？

谢谢！

# vb.net - 通过 VB.NET 发送短信，地址正确

> ID：10281164
> 
> 赞同：0
> 
> 时间：2012-04-23T13:08:10.773
> 
> 标签：vb.net, email, sms

我正在编写一个 Web 界面分页系统。该系统的主要功能是向手机和寻呼机发送 SMS 消息，我使用电子邮件完成了这项工作。但是，当我发送一条消息时，发件人地址以 10 个数字的字符串出现。实际发件人地址在消息中。

这是我的代码：

```
 Dim mailMessage As New MailMessage()
    Dim client As New SmtpClient(gateway)
    mailMessage.From = New MailAddress(fromAddress)
    mailMessage.Body = tbMessage.Text
    mailMessage.To.Add(New MailAddress(toAddress))
    client.Send(mailMessage) 
```

我发送到手机的最后一封电子邮件是这样的：

发件人：1410000033

留言：FRM:email@provider.com 味精：测试

这对于任何被寻呼的人来说真的很烦人，因为他们的消息框中的所有随机数字而不是我发送消息的实际地址。这也很烦人，因为发件人地址使用了很多字符。

我环顾四周，它看起来是一个 ATT 网关问题。我一直在测试的手机是ATT。我确实有一位使用 Verizon 手机的同事，它似乎工作正常。

有没有人对我可以做些什么来纠正这个问题有任何想法？

# c# - Specflow 的可选参数

> ID：10281170
> 
> 赞同：9
> 
> 时间：2012-04-23T13:08:50.087
> 
> 标签：c#, bdd, specflow

我如何最好地处理我的许多步骤应该将 0、1 甚至 2 个日期作为“第一个参数”的事实？例如，我如何最好地支持 Specflow 中的可选参数

最简单的情况是日期无关紧要，只要步骤相继发生

```
 Given Peter was born 23-06-1973
 And Peter created an account
 And Peter deposited $200 
```

但通常，很多步骤是时间相关的，例如

```
 Given Peter was born 23-06-1973
 And at 1-4-2012 Peter created an account
 And at 13-4-2012 Peter deposited $200 
```

在其他时候，有两个日期，例如实时日期和发生某事的日期。例如。Peter 填写了一份 14-4-2012 的打印表格进行汇款，但表格丢失了几天，我们今天需要记录表格是几天前填写的。

```
 Given Peter was born 23-06-1973
 ...
 And at 16-4-2012 really at 14-4-2012 Completed a transfer form to transfer $100 to account 12345 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T06:58:28.440

有两件事突然出现在我的脑海中：

首先，我现在不必担心有大量步骤定义，只要它们很短（oneliners）并调用某种自动化层或 DSL 来帮助我自动化被测系统。请参阅此[出色的演示文稿](https://skillsmatter.com/podcast/agile-scrum/bdd-as-its-meant-to-be-done/)以获取灵感。

因此，从这个意义上说，您可以将每个案例的“重载”步骤定义加倍。

我对第二种解决方案的第一次尝试是使用相同的方法将属性堆叠在一起。这有效，但不适用于可选参数。（并且可选参数不适用于 DateTime 等引用类型，但 DateTime? nullable 有效）。如果您像这样加强您的步骤，您将收到如下错误：

> 参数计数不匹配！绑定方法 'Class1.MyGiven(Int32, Int32, Int32)' 应该有 1 个参数

所以我回到我的第一个解决方案是这样的：

```
 [Given(@"case one with one int '(\d+)'")]
    public void Case1(int a)
    {
        // Short but sweet step definition that calls into automation layer
    }

    [Given(@"case one with two ints '(\d+)' and '(\d+)'")]
    public void Case2(int a, int b)
    {
        // Short but sweet step definition that calls into automation layer
    }

    [Given(@"case one with three ints '(\d+)' and '(\d+)' and also '(\d+)'")]
    public void Case3(int a, int b , int c)
    {
        // Short but sweet step definition that calls into automation layer
    } 
```

我希望我来回走动不会造成太多混乱。抱歉 - 巴士上没有准备好 IDE :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T12:29:38.973

我更喜欢多个步骤的简单性，但如果你想按照你的建议去做，你需要制作一个合适的正则表达式。类似的东西（未测试）：

```
[Given(@"(at ([0-9-]+) (really at ([0-9-]+) |)|)(\w+) Completed a transfer form to transfer \$(\d+) to account (\d+)"]
public void TransferStep(string dummy1, DateTime? atDate, string dummy2, DateTime? reallyAtDate, string name, decimal amount, int account) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-01T13:47:13.723

这对我来说效果很好，重载了需要可选参数并传入默认值的函数。

如果 specflow 支持可选参数（例如`string searchTerm = ""` **，但目前不**支持），那就太好了。

```
[When(@"I request a list of managers")]
public void WhenIRequestAListOfManagers()
{
    WhenIRequestAListOfManagers("");
}

[When(@"I request a list of managers with the search term (.*)")]
public void WhenIRequestAListOfManagers(string searchTerm)
{
   //do stuff
} 
```

# asp.net-mvc-3 - 我们如何在网格视图中获取 Telerik 下拉选择更改事件

> ID：10281171
> 
> 赞同：1
> 
> 时间：2012-04-23T13:08:56.130
> 
> 标签：asp.net-mvc-3, razor, telerik

我在我的项目中使用 Telerik 控件，任何主体都告诉如何在 Telerik 网格视图中获取选择更改事件，该事件可以在插入、编辑中填充多个列文本框。那是在 mvc3+razor(cshtml) 中。

编辑器模板代码

```
@model string
<table>
    <tr>
        <td>
            @(Html.Telerik().ComboBoxFor(e => e)
               .BindTo(ViewBag.pro as SelectList)
               .ClientEvents(events => events.OnChange("getproductdesc")) )
        </td>

        <td>

        </td>
        <td>
            @Html.TextBoxFor((model => model), new { id = "textbox" })

        </td>
    </tr>
</table>

<script type="text/javascript">

    function getproductdesc(e) {
       var idmodel = $(this).val();
       alert(idmodel);
       $('#textbox').val($(this).val());             
    }
</script> 
```

网格视图代码

```
 @(Html.Telerik().Grid(Model)
    .Name("gdProductDetails")
    .ToolBar(commands => commands.Insert())
             .DataKeys(keys => keys.Add(c => c.Product_cd))
             .Pageable(paging =>
                    paging.PageSize(5)
                          .Style(GridPagerStyles.NextPreviousAndNumeric)
                          .Position(GridPagerPosition.Bottom))
                                   .Sortable(sorting => sorting
                    .SortMode(GridSortMode.MultipleColumn))
                    .DataBinding(databing => databing.Server()
                                      // .Select("DCProductDetails", "DeliveryChallan")
                                       .Insert("Addproduct", "DeliveryChallan")
                                       .Update("Editproduct", "DeliveryChallan")
                                       .Delete("Delete", "Home"))
    .Columns(columns =>
    {
        columns.Bound(c => c.Sl_no);/*EditorTemplateName("Product")*/
        columns.Bound(c => c.Product_cd).EditorTemplateName("product").Width(350);
        columns.Bound(c => c.Prouduc_desc).ClientTemplate("<input type='text' id='textbox'/>");        
        columns.Bound(c => c.Prod_rt);
columns.Command(commands =>
        {
            commands.Edit();
            commands.Delete();
        });
    })
  )  
</table>
</fieldset> 
```

控制器代码

```
var listproduct = (from i in db.MSM_PRODUCT select i);
ViewBag.pro = new SelectList(listproduct, "PRODUCT_DESC", "PRODUCT_CD"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:52:07.233

```
@model string
<table>
    <tr>
        <td>
            @(Html.Telerik().ComboBoxFor(e => e)
               .BindTo(ViewBag.pro as SelectList)
               .ClientEvents(events => events.OnChange("getproductdesc")) )
        </td>

        <td>

        </td>
        <td>
            @Html.TextBoxFor((model => model), new { id = "textbox" })

        </td>
    </tr>
</table>

<script type="text/javascript">

    function getproductdesc(e) {
       var idmodel = $(this).val();
       alert(idmodel);
       $('#textbox').val($(this).val());             
    }
</script>
grid view code

  @(Html.Telerik().Grid(Model)
    .Name("gdProductDetails")
    .ToolBar(commands => commands.Insert())
             .DataKeys(keys => keys.Add(c => c.Product_cd))
             .Pageable(paging =>
                    paging.PageSize(5)
                          .Style(GridPagerStyles.NextPreviousAndNumeric)
                          .Position(GridPagerPosition.Bottom))
                                   .Sortable(sorting => sorting
                    .SortMode(GridSortMode.MultipleColumn))
                    .DataBinding(databing => databing.Server()
                                      // .Select("DCProductDetails", "DeliveryChallan")
                                       .Insert("Addproduct", "DeliveryChallan")
                                       .Update("Editproduct", "DeliveryChallan")
                                       .Delete("Delete", "Home"))
    .Columns(columns =>
    {
        columns.Bound(c => c.Sl_no);/*EditorTemplateName("Product")*/
        columns.Bound(c => c.Product_cd).EditorTemplateName("product").Width(350);
        columns.Bound(c => c.Prouduc_desc).EditorTemplateName("Product");
        columns.Bound(c => c.Prod_rt);
columns.Command(commands =>
        {
            commands.Edit();
            commands.Delete();
        });
    })
  )  
</table>
</fieldset> 
```

函数 getproductdesc(e) { var idmodel = $(this).val(); 警报（idmodel）；$('#textbox').val($(this).val()); }

创建一个带有文本框和 id 的编辑器模板，将编辑器模板分配给带有视图名称的赞赏列，在网格视图下方编写 jquery，并分配如下值 $('#textboxid').val($(this).val( ));

# coffeescript - 带有多个回调的冰咖啡脚本

> ID：10281174
> 
> 赞同：10
> 
> 时间：2012-04-23T13:09:18.217
> 
> 标签：coffeescript, iced-coffeescript

当我刷新多个数据源时，我正在使用带有结果 js 的 Iced coffescript。刷新方法有两个回调，一个用于成功，一个用于错误，我想等待每个调用进行任一回调。

如果不添加附加功能，我看不到如何使用 idced coffescript 执行此操作。我的问题是 - 有没有一种更优雅的方式可以让我服从多个回调之一？

这是我目前的代码：

```
refreshMe = (key, value, result) =>
    value.refresh(
    (success)=>
            result success
    ,
    (fail, reason, error)=>
        result undefined, fail
    )
@refresh = () =>                
success={}
fail={}
await
    for key, value of @dataSources
    refreshMe key, value, defer success[key], fail[key] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:15:41.530

这也是我发现的唯一方法。我在 Backbone 中使用它并使用 @icedSave 包装（例如）模型的 @save 函数：

```
# An IcedCoffeescript friendly version of save
icedSave: (callback) ->
    @save {},
        success: (model, response) -> callback(true, model, response)
        error: (model, response) -> callback(false, model, response) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T17:47:54.387

这是我用于将 Promises 转换`.then (-> onSuccess), (-> onError)`为 errbacks的一些代码`(err, result) ->`：

```
# You can write like this:
await value.refresh esc defer e, result

# onError - function to be called when promise rejected.
# onSuccess - function to be called when promise is fulfilled.
module.exports = esc = (onError, onSuccess) ->
  util = require 'util'
  return (result) ->
    if util.isError result
      # Always send back an error to first handler.
      onError? result
    else if onSuccess?
      console.log onSuccess, result
      # `await fn esc done, defer result`
      onSuccess? result
    else
      # `await fn esc done`
      onError? null, result 
```

您可以稍微修改该`esc`函数以处理每个回调的多个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T17:59:36.113

[iced.Rendezvous](https://github.com/maxtaco/coffee-script/blob/iced2/iced.md#icedrendezvous)库是针对这种情况显式创建的：在多个回调的第一个处返回。从[文档](https://github.com/maxtaco/coffee-script/blob/iced2/iced.md#icedrendezvouswait-cb)：

> 这是一个展示集合点的不同输入和输出的示例。它执行两个并行 DNS 查找，并且仅在第一个返回时报告：
> 
> ```
> hosts = [ "okcupid.com", "google.com" ];
> ips = errs = []
> rv = new iced.Rendezvous
> for h,i in hosts
>     dns.resolve hosts[i], rv.id(i).defer errs[i], ips[i]
> 
> await rv.wait defer which
> console.log "#{hosts[which]}  -> #{ips[which]}" 
> ```

# cocoa - 跟踪时出现菜单异常

> ID：10281176
> 
> 赞同：0
> 
> 时间：2012-04-23T13:09:22.433
> 
> 标签：cocoa

我在 10.6 中抛出了一个严重的异常，而在 10.7 中一切都很好。当对 menuitem 调用操作时，会生成以下日志。请让我知道为什么会引发以下异常。

问候， iSight

```
23/04/12 6:26:15 PM MyApp[155]  *** Assertion failure in -[NSComboBoxCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1038.36/AppKit.subproj/NSCell.m:1531 
23/04/12 6:26:15 PM MyApp[155]  Invalid parameter not satisfying: aString != nil 
23/04/12 6:26:25 PM MyApp[155]  HIToolbox: ignoring exception '*** -[NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: NSFont)' that raised inside Carbon event dispatch 
 CoreFoundation                      0x99f3a6ca __raiseError + 41
   libobjc.A.dylib                     0x945e55a9 objc_exception_throw + 5
   CoreFoundation                      0x99f3a3f8 +[NSException raise:format:arguments:] + 13
   CoreFoundation                     0x99f3a36a +[NSException raise:format:] + 5
   Foundation           0x9469d3eb -[NSCFDictionary setObject:forKey:] + 26
   MyApp        0x000883df 0x0 + 55804
   MyApp                              0x000033d0 0x0 + 1326
   MyApp                              0x00029cf6 0x0 + 17125
   AppKit                              0x97443a26 -[NSApplication sendAction:to:from:] + 11
   AppKit      0x974438d9 -[NSMenuItem _corePerformAction] + 43
0  AppKit          0x974435ca -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 17
1  AppKit        0x974434b6 -[NSMenu performActionForItemAtIndex:] + 6
2  AppKit     0x97443469 -[NSMenu _internalPerformActionForItemAtIndex:] + 5
3  AppKit                              0x974433cf -[NSMenuItem
_internalPerformActionThroughMenuIfPossible] + 9
4  AppKit                              0x97443313 -[NSCarbonMenuImpl
_carbonCommandProcessEvent:handlerCallRef:] + 33
5  AppKit                              0x97437a55 NSSLMMenuEventHandler + 40
6  HIToolbox                  0x90acac2f
_ZL23DispatchEventToHandlersP14EventTargetRecP14OpaqueEventRefP14HandlerCallRec
+ 156
7  HIToolbox                           0x90ac9ef6 _ZL30SendEventToEventTargetInternalP14OpaqueEventRefP20OpaqueEventTargetRefP14HandlerCallRec
+ 41
8  HIToolbox                           0x90aec7f3 SendEventToEventTarget + 5
9  HIToolbox                           0x90b18e87
_ZL18SendHICommandEventmPK9HICommandmmhPKvP20OpaqueEventTargetRefS5_PP14OpaqueEventRef
+ 44
0  HIToolbox                           0x90b3db90 SendMenuCommandWithContextAndModifiers + 6
1  HIToolbox             0x90b3db47 SendMenuItemSelectedEvent + 12
2  HIToolbox              0x90b3da5d _ZL19FinishMenuSelectionP13SelectionDataP10MenuResultS2_ + 15
3  HIToolbox                           0x90cbf364
_ZL19PopUpMenuSelectCoreP8MenuData5PointdS1_tjPK4RecttmS4_S4_PK10__CFStringPP13OpaqueMenuRefPt
+ 185
4  HIToolbox                           0x90cbf6bb _HandlePopUpMenuSelection7 + 67
5  AppKit                              0x976cf6e6 _NSSLMPopUpCarbonMenu3 + 393
6  AppKit                   0x976cfa76 -[NSCarbonMenuImpl
_popUpContextMenu:withEvent:forView:withFont:] + 22
7  AppKit                              0x97848945 -[NSMenu _popUpContextMenu:withEvent:forView:withFont:] + 27
8  AppKit                              0x978489e4 -[NSMenu
_popUpContextMenu:withEvent:forView:] + 6
9  AppKit                              0x978487b7 -[NSMenu _popUpMenuWithEvent:forView:] + 5
0  AppKit     0x97a3f65d -[NSView rightMouseDown:] + 10
1  AppKit                 0x97730d1b -[NSControl _rightMouseUpOrDown:] + 53
2  AppKit         0x9751ab28 -[NSWindow sendEvent:] + 575
3  AppKit                   0x9743360b -[NSApplication sendEvent:] + 643
4  AppKit              0x973c7253 -[NSApplication run] + 91
5  AppKit                      0x973bf289 NSApplicationMain + 57
6  MyApp                          0x00002a45 0x0 + 1082
7  ???                                 0x00000002 0x0 + 2 ) 
23/04/12 6:26:37 PM MyApp[155]  NSMenu received exception *** -[NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: NSFont) during menu tracking.  The exception will be ignored. 
23/04/12 6:26:37 PM Dynamo[155] *** -[NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: NSFont) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:26:27.273

在 NSDictionary 对象中，您不能设置**nil**值

# java - 将 Mongodb 日期转换为 Java 日期时出错

> ID：10281177
> 
> 赞同：2
> 
> 时间：2012-04-23T13:09:24.920
> 
> 标签：java, json, mongodb, gson

我从 mongoDB 得到这个 JSON

```
{ 
  "_id" : ObjectId("4f95bbe3742b1eaa929b81ef"), 
  "empNo" : NumberLong(10), 
  "empName" : "abc", 
  "joinDate" : ISODate("2012-04-23T20:30:27.421Z"), 
  "address" : {
    "addNo" : NumberLong(1), 
    "addLocation" : "add0", 
    "street" : { 
      "sNo" : NumberLong(10), 
      "sName" : "Street 1" 
    } 
  } 
} 
```

我想转换`ISODate("2012-04-23T20:30:27.421Z")`为 Java 日期。

当日期属性存在时，使用 Google 的 Gson 库将 JSON 转换为对象时出现错误。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:54:01.813

Mongo 日期是 ISO 格式。您可以使用`ISODateTimeFormat`Joda [-time](http://joda-time.sourceforge.net/)库将 ISO 日期字符串转换为 java 数据对象。

查看[convert-iso8601-compliant-string-to-java-util-date](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)了解更多信息

# django - 使用 Django 社交身份验证登录后如何访问 Twitter API？

> ID：10281180
> 
> 赞同：3
> 
> 时间：2012-04-23T13:09:45.500
> 
> 标签：django, twitter, django-socialauth

我想玩 twitter API，但是在使用 django social auth 登录后，我不知道如何访问 API、获取 TimeLine、RT 等。

任何人都可以提供另一个 twitter 库的示例，在使用 Django 社交身份验证后，我可以使用它来访问流、时间线等？

我正在检查[tweepy](https://github.com/tweepy/)但如果我不需要使用 tweepy auth 方法，我看不到如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:30:46.720

[Django-social-auth 文档中的这个示例](http://django-social-auth.readthedocs.org/en/latest/tokens.html)显示了您需要的内容：

```
>>> from pprint import pprint
>>> from social_auth.models import UserSocialAuth
>>> instance = UserSocialAuth.objects.filter(provider='twitter').get(...)
>>> pprint(instance.tokens)
{u'oauth_token': u'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
 u'_token_secret': u'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'} 
```

UserSocialAuth 模型将自动存储您需要的访问令牌。您可以通过`tokens`属性访问它们。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T09:32:41.813

您需要从与用户关联的 UserSocialAuth 实例中获取令牌：

```
try:
        instance = UserSocialAuth.objects.filter(user=request.user).get()
except ObjectDoesNotExist:
        return redirect(getattr(settings,'LOGIN_URL','/login/twitter/')) 
```

检索实例后，获取密钥：

```
oauth_access_token=(instance.tokens).get('oauth_token')
oauth_access_secret=(instance.tokens).get('oauth_token_secret') 
```

有了令牌和秘密，您现在可以使用您选择的包连接到 twitter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:43:46.923

当用户授予您的应用访问 Twitter 的权限时，您将获得访问令牌和访问令牌密钥。将其保存在您的数据库中。您使用它来访问 API。

示例位于：[https ://github.com/tweepy/tweepy/blob/master/examples/oauth.py](https://github.com/tweepy/tweepy/blob/master/examples/oauth.py)

# jquery-ui - jQuery 1.8 使用对话框的意外行为

> ID：10281184
> 
> 赞同：2
> 
> 时间：2012-04-23T13:09:57.323
> 
> 标签：jquery-ui, dialog, each

我的 HTML 中有一个对话框。一些输入元素是通过向它们附加一个序列号来生成具有唯一 id 的。当用户单击“预订它！”按钮时，按钮函数使用 each() 遍历具有相同类的所有输入。这样我可以获取每个输入的 id 并使用 ajax 进行 GET 调用。该按钮第一次正常工作，但此后每次输入的序列号都会相乘。非动态生成的输入不会相乘。似乎通过使用 each() 会导致重新创建独特的元素。

在第一次单击“预订！”按钮时，URL 正确构造如下：`AddParty?pMemberId=0&pReservationType_0=34&pReservationType_1=63`

但是，随后的点击会增加长度，如下所示： `AddParty?pMemberId=0&pReservationType_0=34&pReservationType_1=63&pReservationType_0=34&pReservationType_1=63`

这是我从 servlet 返回的 HTML 文件中的对话代码。

```
<div class="reservation">
<div id="dialog-reservation-form" title="Reservation Form">
<input id="pMemberId" name="pMemberId" type="hidden" value="0"/>
<input id="pReservationType_0" class="PartyType" type="hidden" value="0"/>
<input id="pReservationType_1" class="PartyType" type="hidden" value="1"/>
</div>
<input id="plan-party" type="submit" value="Plan Party"/>
</div> 
```

这是我的 javascript 文件。

```
$(document).ready(function () {

    $("#plan-party").button().click(function (e) {
        e.preventDefault();
        $("#dialog-party-form").dialog("open");

    });

    $("#dialog-party-form").dialog( {
        autoOpen : false, height : 600, width : 700, modal : true, buttons :  {
            "Book it!" : function () {
                try {
                    var memberIdValue = document.getElementById("pMemberId").value;
                    var url = "AddParty?pMemberId=" + memberIdValue;
                    $(".PartyType").each(function () {
                        var reservationTypeIdName = $(this).attr('id');
                        var reservationTypeIdValue = $(this).attr('value');
                        url = url + "&" + reservationTypeIdName + "=" + reservationTypeIdValue;
                    });
                    var ajax = new AJAXInteraction(url, addHuntCallback);
                    ajax.doGet();
                }
                catch (e) {
                    alert(e.description);
                }
                $(this).dialog("close");
            },
            Cancel : function () {
                $(this).dialog("close");
            }
        }
    });
}); 
```

# java - 具有 ExecuterService 的多个 SwingWorker 无法正常工作

> ID：10281185
> 
> 赞同：4
> 
> 时间：2012-04-23T13:09:59.163
> 
> 标签：java, swing, swingworker, executorservice

我正在使用 swing，在我的应用程序中，我需要并行运行许多线程，例如每 5 秒检查一次互联网连接、监控文件系统更改、从服务器**同步文件。**

上面所有耗时的任务都在运行，**`SwingWorker`**所以我的 GUI 不应该冻结。

同时我需要运行一些其他耗时的任务，例如将文件上传到服务器。为此，我还使用了 swingWorker。然后我将所有这些 swingworker 提交给 executerService 进行线程池，这样它们就不会相互影响。

我的执行器服务是这样的。我认为30个线程对我来说就足够了。

```
static ExecutorService threadExecutor;
threadExecutor = Executors.newFixedThreadPool(30); 
```

然后我在同一个服务中提交线程。

```
threadExecutor.submit(monitorinternetconnectivity); //submitting swingworker obejct 
```

我在开始时提交的一些线程和一些我添加运行时的线程，当我在运行时添加时，它不会完成工作或停止运行它们的工作，比如监控互联网连接。

有没有办法像摇摆工人一样拥有相同的功能，或者使用多个摇摆工人的最佳方式。我们应该能够在运行时添加新的**Swingwoker**来`executer`服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:24:55.993

1.  SwingWorker 使用它自己的线程池。
2.  SwingWorker 应该用于长时间运行的任务（即任何需要超过几毫秒的任务），之后需要更新 GUI。
3.  不应调用更新 EDT 之外的 gui 元素（即来自 SwingWorker.done() 方法）

如果您通常遵循在 EDT 中访问 Swing 组件表单的规则（看[这里](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)），那么您应该不会遇到锁定问题。我怀疑问题在于您的代码，但要确保我们应该看到它。

# json - json_spirit 使用问题

> ID：10281190
> 
> 赞同：0
> 
> 时间：2012-04-23T13:10:13.507
> 
> 标签：json, json-spirit

我能够成功编译程序，但无法从 json 对象中检索值。我正在粘贴下面的代码，代码很简单，任何帮助表示赞赏。

```
#include <cstdio>
#include <cstring>
#include <json_spirit.h>

using namespace std;
using namespace json_spirit;

//A sample get file request 
char *jsonInput = 
"{\"request\" : { \
                \"service\" : \"fmgr\" \
                \"cookie\"  : \"Abxruyyeziyrolsu\" \
                \"req\"     : \"read\" \
                \"fname\"   : \"Junk.txt\" \
                \"size\"    :  1024 \
                \"data\"    :  \"data\" \
}}";

int main(int argc, char **argv)
{
    Value val;
    const string s = jsonInput;
    read(s, val); //read the jsonInput to the value
    Object obj = val.get_obj();
    std::string service, cookie, req, fname, data;
    uint32_t size;

    for(Object::size_type i = 0; i != obj.size(); ++i) {   
        const Pair& pair = obj[i];
        const string& name  = pair.name_;
        const Value&  value = pair.value_;

        if( name == "service" ) service  = value.get_str();
        else if( name == "cookie") cookie  = value.get_str();
        else if( name == "req" ) req = value.get_str();
        else if( name == "fname" ) fname = value.get_str();
        else if( name == "size" ) size = value.get_int();
        else if( name == "data" ) data = value.get_str();
    }
    std::cout<<service << " " << cookie << " " << req << " " << fname << " " << size << " " << data ;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:53:31.290

有两个问题：

1.  jsonInput 字符串不是有效的 JSON，缺少分隔对象对的逗号。
2.  下一个问题解释起来更复杂。顶层值本身是一个对象，因此调用 val.get_obj() 返回包含所有数据的对象。此对象中只有一对，名为“请求”。调用 val.get_obj()[0] 将检索这对。然后，您需要从这对的值中取出对象。

    值 val；读取（s，val）；//读取jsonInput的值

    const Pair& pair = val.get_obj()[0]; //获取名称：值对，命名为“请求”

    常量对象& obj = pair.value_.get_obj(); //获取服务，cookie...对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T12:47:00.320

为了简单起见，因为它们应该与 json_spirit 一起使用，请在更正 JSON 字符串中缺少的“，”分隔符后尝试以下操作。

```
std::string json_input = <your valid JSON string>
json_spirit::Value value;
auto success = json_spirit::read_string(json_input, value);
if (success == true) {
    auto object = value.get_obj();
    for (auto entry : object) {
        if (entry.name_ == "service") service = entry.value_.get_str();
        else if...
        .
        .
    }
} 
```

# bash - 将多个目录中没有扩展名的文件移动到一个目录中

> ID：10281192
> 
> 赞同：1
> 
> 时间：2012-04-23T13:10:28.227
> 
> 标签：bash

我有大约 1,000 个文件（没有扩展名，即`1105`, `1106`,`5231`等）的大量集合，分布在相应数量的文件夹中。即它是一千个像这样的文件：

`/users/me/collection/1105/1455`, `/users/me/collection/1106/1466`, `/users/me/collection/1110/1470`, 等等 等等

我想要做的是找到一种快速的方法将子目录中的所有这些文件（即`1455`, `1466`,`1470`等）移动到一个目录中（即`/users/me/collection-all/`）。

老实说，缺少扩展名让我感到厌烦，而且我似乎`find`在文件旁边保留了目录……它们实际上都是 PDF，但没有扩展名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:12:42.880

其实答案很简单：

您可以**找到**它们并排除目录：

```
cp ` find <your directory tree base> ! -type d` <your destination directory> 
```

“！-type d”自然会排除“目录”类型的结果。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:19:56.127

这个怎么样？

```
mv /users/me/collection/*/* /users/me/collection-all/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:21:32.990

我的两分钱

```
cd /users/collections/me
find . -type f -exec mv {} /users/me/collection-all/ \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-17T00:33:34.993

你可以试试这个：

```
#!/bin/bash

IFS_BACKUP=$IFS
IFS=$'\n\t'

for i in $(find $source_directory -type f -iname "*" -print)
do
  mv -nv "$i" "$target_directory"
done

IFS=$IFS_BACKUP

exit 
```

只需确保替换变量`$source_directory`并`$target_directory`使用适当的路径即可。

# android - Android MapView Tiles Overlay：图像拉伸 onZoom

> ID：10281193
> 
> 赞同：0
> 
> 时间：2012-04-23T13:10:29.493
> 
> 标签：android, overlay, android-mapview, tiles

当操纵地图放大/缩小时，我正在寻找一种方法来拉伸/缩小图块叠加层的图像（基本上是在地图上绘制平铺图像的自定义叠加层）。如果缩放实际发生，则在 Overlay 类的 draw 方法中正确重绘图块。但是当用户仍在做手势时（在他移开手指之前），瓷砖重叠或分开......我只是找不到捕捉这些手势变化并拉伸图像的方法。或者至少，不要绘制图像，以免出现奇怪的视觉效果。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:14:28.610

好的，我明白了：当我在绘制图像时，我使用了图像的宽度和高度，但是每次使用投影的 lonlatToPixels 功能都必须重新计算图像的边界。现在我已经这样做了，图像被完美地拉伸/收缩。

# ruby-on-rails - 设计中的多会话

> ID：10281195
> 
> 赞同：1
> 
> 时间：2012-04-23T13:10:53.337
> 
> 标签：ruby-on-rails, devise

如何在 Devise 中组织两个会话的使用？

我的应用程序有一些控制器将其作为 iframe 嵌入到另一个应用程序中（使用令牌进行身份验证）。这两个应用程序必须在浏览器中同时在不同用户下打开。

Rails 3.2 和设计 2

# c# - 使 WPF 导航动态 - 使用 XML 文件？

> ID：10281196
> 
> 赞同：2
> 
> 时间：2012-04-23T13:11:02.103
> 
> 标签：c#, wpf, xml, navigation

我正在开发桌面应用程序的导航部分，并且遇到了一些问题。要求导航应该是动态的，以便您可以例如切换视图的顺序而无需重新编译（理想情况下也可以添加视图而无需重新编译）。

目前我正在使用 XML 来定义要显示的窗口、它应该具有的页眉以及页脚的外观。下面是 XML 现在的样子：

```
<?xml version="1.0" encoding="utf-8" ?>
<ArrayOfViewState xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ViewState ViewName="WelcomeView" Header="Welcome to the Application" FooterButton1="Quit" FooterButton2="Back" FooterButton3="Next" />
  <ViewState ViewName="LicenseView" Header="Licence Agreement" FooterButton1="Quit" FooterButton2="Back" FooterButton3="Next" />
  <ViewState ViewName="LoginView" Header="Log in" FooterButton1="Quit" FooterButton2="Back" FooterButton3="Next" />
  <ViewState ViewName="InstallationView" Header="Installing..." FooterButton1="Cancel" FooterButton2="None" FooterButton3="Next" />
  <ViewState ViewName="UpdateView" Header="Updating..." FooterButton1="Cancel" FooterButton2="None" FooterButton3="Next" />
  <ViewState ViewName="FinishedView" Header="Finished!" FooterButton1="None" FooterButton2="None" FooterButton3="Finish" />
</ArrayOfViewState> 
```

当我在代码中匹配它时，它看起来像这样（viewState.View 是 UserControl 类型）：

```
...
case "WelcomeView":
  viewState.View = new WelcomeView();
... 
```

如您所见，我使用 XML 中的 ViewName 属性来匹配和创建我的视图（它们也有一个 ViewModel，但这是通过 XAML 和 MVVM Light ViewModel Locator 处理的）。

该解决方案在技术上允许在不重新编译的情况下稍微更改导航（例如，您可以随意调整顺序），但必须有比匹配字符串属性更好的方法来处理此问题。我已经尝试研究序列化用户控件，以便我可以将它与其他属性一起加载，但到目前为止我还没有运气。关于如何进行和改进/改变这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:52:26.220

确实，有更好的方法。:-)

查看[Microsoft 可扩展性框架 (MEF)](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。它适用于 WPF 和 MVVM。

它允许您**在运行过程中轻松地即时编写**应用程序部分。

简而言之，您可以使用 Attribute 标记要加载到其他地方的类`[Export]`：

```
[Export(typeof(ViewContainer))]
public class ViewContainer
{
   public string ViewName = "WelcomeView";
   public string Header="Welcome to the Application"

   // Do more stuff here
} 
```

在应该使用导出类的类或程序集中，您可以使用`[Import]`属性加载它：

```
public class ClassInOtherAssembly
{
   [ImportMany]
   internal ObservableCollection<ViewContainer> m_MyViews { get; set; }

   // Do other stuff here
} 
```

根据您实现的体系结构，使用 1-liner (!) 来组装所有导入的类甚至可能就足够了（这使用的方法与以下参考教程不同）：

```
CompositionInitializer.SatisfyImports(this); 
```

**就是这样！**

（不要*照*原样拿这些例子，我只是想切入正题。我建议使用 `Properties`而不是`strings`和`interfaces`而不是类导出。你会在网上找到很多更优雅的片段。:-)）

您可以在此处找到 [入门教程：Managed Extensibility Framework (MEF) 入门](http://weblogs.asp.net/zubairahmed/archive/2009/11/29/getting-started-with-managed-extensibility-framework-mef.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:14:37.573

为什么不使用反射？

您可以使用`Activator.CreateInstance`并传入您的视图字符串：

```
string asmName = "YourAssembly";
string typeName = "YourViewName";

object obj = Activator.CreateInstance(asmName, typeName).Unwrap() as UserControl; 
```

# c - 使用 nftw 时如何避免使用全局变量

> ID：10281198
> 
> 赞同：11
> 
> 时间：2012-04-23T13:11:07.877
> 
> 标签：c, global-variables, nftw

我想使用 nftw 遍历 C 中的目录结构。

但是，鉴于我想做的事情，我看不到使用全局变量的方法。

使用 (n)ftw 的教科书示例都涉及打印文件名之类的操作。相反，我想获取路径名和文件校验和并将它们放在数据结构中。但是，考虑到可以传递给 nftw 的内容的限制，我看不到这样做的好方法。

我正在使用的解决方案涉及一个全局变量。然后 nftw 调用的函数可以访问该变量并添加所需的数据。

有没有任何合理的方法可以在不使用全局变量的情况下做到这一点？

[这是上一篇关于 stackoverflow 的交流，其中有人建议我将其发布为后续内容。](https://stackoverflow.com/questions/10251390/c-can-a-function-return-a-global-variable/10251799#comment13196161_10251799)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T15:28:59.203

使用 ftw 可能非常非常**糟糕**。在内部，它将保存您使用的函数指针，如果另一个线程执行其他操作，它将覆盖函数指针。

> 恐怖场景：
> 
> ```
> thread 1:  count billions of files
> thread 2:  delete some files
> thread 1:  ---oops, it is now deleting billions of 
>               files instead of counting them. 
> ```

简而言之。你最好使用 fts_open。

如果您仍想使用 nftw，那么我的建议是将“全局”类型放在命名空间中并将其标记为“thread_local”。您应该能够根据自己的需要进行调整。

```
/* in some cpp file */
namespace {
   thread_local size_t gTotalBytes{0};  // thread local makes this thread safe
int GetSize(const char* path, const struct stat* statPtr, int currentFlag, struct FTW* internalFtwUsage) {
    gTotalBytes+=  statPtr->st_size;
    return 0;  //ntfw continues
 }
} // namespace

size_t RecursiveFolderDiskUsed(const std::string& startPath) {
   const int flags = FTW_DEPTH | FTW_MOUNT | FTW_PHYS;
   const int maxFileDescriptorsToUse = 1024; // or whatever
   const int result = nftw(startPath.c_str(), GetSize, maxFileDescriptorsToUse , flags);

  // log or something if result== -1
  return gTotalBytes;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:26:02.713

不[`nftw`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/nftw.html)，不提供任何可以传递给函数的用户参数，因此您必须在 C 中使用全局（或静态）变量。

GCC 提供了一个扩展“嵌套函数”，它应该捕获其封闭范围的变量，因此可以像这样使用它们：

```
void f()
{
  int i = 0;
  int fn(const char *,
    const struct stat *, int, struct FTW *) {
    i++;
    return 0;
  };
  nftw("path", fn, 10, 0);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:40:52.057

数据最好在一个单独的模块中给出静态链接（即文件范围），该模块仅包括访问数据所需的函数，包括传递给`nftw()`. 这样，数据在全局范围内不可见，并且所有访问都受到控制。可能调用 ntfw() 的函数也是该模块的一部分，从而使传递给 nftw() 的函数也是静态的，因此在外部不可见。

换句话说，您应该做您可能已经在做的事情，但要明智地使用单独的编译和静态链接，以使数据仅通过访问函数可见。具有静态链接的数据可由同一翻译单元中的任何函数访问，并且您可以通过仅在该翻译单元中包含作为该数据的创建者、维护者或访问者的函数来避免与全局变量相关的问题。

一般模式是：

**数据模块.h**

```
#if defined DATAMODULE_INCLUDE
<type> create_data( <args>) ;
<type> get_data( <args> ) ;
#endif 
```

**数据模块.c**

```
#include "datamodule.h"

static <type> my_data ;

static int nftwfunc(const char *filename, const struct stat *statptr, int fileflags, struct FTW *pfwt)
{
    // update/add to my_data
    ...
}

<type> create_data( const char* path, <other args>)
{
    ...

    ret = nftw( path, nftwfunc, fd_limit, flags);

    ... 
}

<type> get_data( <args> )
{
    // Get requested data from my_data and return it to caller
} 
```

# java - SOAP 请求。将字符串转换为字节数组

> ID：10281199
> 
> 赞同：2
> 
> 时间：2012-04-23T13:11:08.667
> 
> 标签：java, soap, jax-ws

我在 Java 上有 Soap WS。
这是肥皂请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:his="SCC/Lis/HistoryFormatter">
   <soapenv:Header/>
   <soapenv:Body>
      <his:formatHistoryByteArray>
         <arg0>cid:anystring</arg0>
      </his:formatHistoryByteArray>
   </soapenv:Body>
</soapenv:Envelope> 
```

FormatHistoryByteArray.class 只有一个字段

```
@XmlElement(name = "arg0", namespace = "", nillable = true)
private byte[] arg0; 
```

输入 *.xsd

```
 <xs:complexType name="formatHistoryByteArray">
    <xs:sequence>
      <xs:element name="arg0" type="xs:base64Binary" nillable="true" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType> 
```

WSDL 和 xsd 由 JaxWS 生成。
我无法理解转换字符串的逻辑**java代码中对字节[]的请求中的节点。帮助plz
*cid：*是否是requared前缀？**

 ****编辑：** 例如，如果我有要求

```
<arg0>abcdef</arg0> 
```

在 java 代码中我得到 byte[] = {105, -73, 29}

WebService 如何从字符串*abcdef*获取这个字节数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:46:43.390

`String.getBytes()`返回给定的（ASCII、UTF8、ISO-8859-1 等）编码`String`。这与 Base 64 不同。Base 64 是一种将任意字节显示为可打印字符的方式。所以他们没有理由是一样的。

查看本教程关于 Base 64 和 XML 的第 2.1 节：[http](http://www.xml.com/pub/a/2003/02/26/binaryxml.html) ://www.xml.com/pub/a/2003/02/26/binaryxml.html 。base64 位如下所示：

```
<m:data xmlns:m='http://example.org/people' >
  <photo>/aWKKapGGyQ=</photo>
  <sound>sdcfo2JTiXE=</sound>
  <hash>Faa7vROi2VQ=</hash>
</m:data> 
```

其中`photo`etc. 是 base64 元素。`cid`不需要前缀。

为了解决您的问题，`abcdef`Web 服务解组器将其解释为您收到的三个字节的 base-64 编码字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:47:51.730

该模式特别将类型声明为：“xs:base64Binary”又名：BINARY。如果您希望信息本质上是文本的，则类型应该是“xs:string”或类似的。

实际上，服务应该完全拒绝“cid:anystring”的值。这不是 base64 编码元素的有效值。**

# c# - 检查 POCO 上的属性值是否已更改

> ID：10281209
> 
> 赞同：2
> 
> 时间：2012-04-23T13:11:53.397
> 
> 标签：c#

我有一个每 N 秒更新一次的 POCO。我遇到的问题是，自上次更新以来，并非所有属性都发生了变化。

我需要知道自上次更新以来哪些属性发生了更改，以便记录更改。我可以通过保留上次更新的 POCO 副本并每次执行比较，然后可能为每个属性更改触发一个事件来做到这一点。

有没有人有更好的解决方案可以在这里使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:25:28.183

如果它真的是 POCO，那么，不，您需要保留一份副本。如果您愿意在 POCO 中添加 IsDirty 标志，则可以在更改属性时设置它。您可以将 IsDirty 标志设为位域，以便了解哪些属性已更改：

```
class POCO
{
[Flags]
enum POCOFieldsEnum
{
  Property1 = 0x01;
  Property2 = 0x02;
}

private String _Property1;
public String Property1 
{ 
  get { return _Property1; }
  set 
  { 
    if (value.Equals(_Property1)) return;
    _Property1 = value;
    DirtyFlags |= POCOFieldsEnum.Property1;
  }
}

private String _Property2;
public String Property2
{
  get { return _Property2; }
  set 
  { 
    if (value.Equals(_Property2)) return;
    _Property2 = value;
    DirtyFlags |= POCOFieldsEnum.Property2;
  }
}

POCOFieldsEnum DirtyFlags { private set; public get; }
} 
```

请注意，如果此类对象的属性已更改，然后又更改回其原始值，则仍会设置 DirtyFlag。如果您想防止这种情况，您必须保存属性的原始值（或它们的散列），以便在属性设置器中进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:30:21.317

*   [http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)这是处理数据绑定的标准方式。

*   在您只想检测与上次具有实际不同值的属性的情况下，每次进行更新时都需要将每个属性的状态保存为“旧”值 - 例如，如果您不想要某个属性自上次更新以来，从 5 变为 3 到 7 又变为 5。

*   如果您不关心这种区别，并且不想使用 propertychanged，您可以给每个属性一个 bool 值，您在 setter 中将它们设置为 true，并在每次更新时将它们设置为 false。

*   你可以创建一个 GetProperty/SetProperty 机制——你在 setter/getter 中调用这些函数，然后你可以在后台以任何你想要的方式保存实际数据和任何关于它的元数据。然而，这不再是真正的 POCO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:26:16.270

创建各种属性的哈希并将其保存为属性本身，然后在验证时再次比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:24:49.150

据我所知，.NET 没有任何“内置”功能可以跟踪类的任何属性更改。但是，以下任何一项都应该有效：

1) 在每个属性的 setter 中手动编写代码来跟踪更改。

2）编写一些代码，将“旧”副本与“更新”实例进行比较（与您在原始帖子中所说的相同）。

3) 使用 AOP 框架（如[PostSharp](http://www.sharpcrafters.com/aop.net)）为每个属性添加某种更新通知。

# javascript - 悬停时jQuery更新图像src

> ID：10281210
> 
> 赞同：1
> 
> 时间：2012-04-23T13:12:01.930
> 
> 标签：javascript, jquery, html

我不希望在链接悬停之前加载图像，所以这是脚本，但它不起作用，有人可以帮我纠正它吗？我为每个链接添加了一个事件侦听器，并在鼠标悬停时调用了一个设置图像的函数。为了让事情更有趣，我们可以在这里复制一下lazyload，并使用 data-original 属性:)

例如：这是 HTML 代码：

```
<li>
   <a href="#" class="tip_trigger">
      <img class="tip" alt="300 Grams"
              data-original="https://lh5.googleusom/-qCRpw.../300%2520.jpg"
              src='empty.gif' width="90" height="90"/>
      Alex
   </a>
</li> 
```

然后，添加一个事件监听器：

代码：

```
// call for each element with the class 'tip' that's being hovered upon
$('.tip').hover(function()
{
   // retrieve the image inside this element
   var elem = $(this).find('img');

   // set the 'src' to the 'data-original' value
   elem.attr('src', elem.attr('data-original'));
}); 
```

对于现场演示，您可以查看此页面[http://bloghutsbeta.blogspot.com/2012/04/testing-slidernav.html](http://bloghutsbeta.blogspot.com/2012/04/testing-slidernav.html) 上述部分脚本仅添加到“A”类别中的第一个字母 ALEX。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T13:15:15.917

`.tip`已经是图像，所以你找不到图像`$(this).find('img');`

试试吧

```
$('.tip_trigger').hover(function()
{
   // retrieve the image inside this element
   var elem = $(this).find('img');

   // set the 'src' to the 'data-original' value
   elem.attr('src', elem.data('original'));
}); 
```

也使用`.data()`方法代替`.attr()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:15:45.720

`var elem = $(this).find('img');` <-- 当这是图像时，您正在寻找图像。

替换您附加悬停的元素

```
$('.tip_trigger').hover(function()
{
   // retrieve the image inside this element
   var elem = $(this).find('img');

   // set the 'src' to the 'data-original' value
   elem.attr('src', elem.attr('data-original'));
}); 
```

或保持原样，不要寻找图像

```
$('.tip').hover(function()
{
   var elem = $(this);

   // set the 'src' to the 'data-original' value
   elem.attr('src', elem.attr('data-original'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:15:14.067

您已将悬停绑定到 img 元素，因此您找不到 img 子元素。只需使用它，或将悬停更改为 .tip_trigger。

```
$('.tip_trigger').hover(function() // That should do the trick
{
   // retrieve the image inside this element
   var elem = $(this).find('img');

   // set the 'src' to the 'data-original' value
   elem.attr('src', elem.attr('data-original'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:19:31.447

jQuery.find() 搜索孩子。您已经使用“.tip”-选择器找到了 img。

```
var elem = $(this); 
```

# jquery - 需要一个图像不断出现滑动jquery

> ID：10281211
> 
> 赞同：1
> 
> 时间：2012-04-23T13:12:10.307
> 
> 标签：jquery, slider, appendto

试图让图像的外观从左到右不断重复

尝试了多种方法来做到这一点，但目前正在尝试使用两张图像，然后当它出现在焦点之外时将一张附加到另一张的前面，我很接近但我哪里出错了？

[http://jsfiddle.net/Antifaith/b3pdn/](http://jsfiddle.net/Antifaith/b3pdn/) - 版本 1

[http://jsfiddle.net/b3pdn/2/](http://jsfiddle.net/b3pdn/2/) - 版本 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:29:16.677

这是我的 jQuery 插件 zip。它从 XML 读取数据并从右到左创建一个滑块。

希望这个例子能帮助你从左到右创建相同的。

请注意，以下示例仅由我创建。没有任何版权。并且非常小。如果需要，您可以自定义和优化代码。

[下载插件](https://www.dropbox.com/sh/kkiey9zp6qbw8am/6MzxlmPwXk)

**编辑：**

我已经浏览了您的两个版本的小提琴，但您似乎使用了错误的 HTML 和样式来为您的图像设置动画。

以下是问题

1.  你的两个图像的宽度不同
2.  你有`position:absolute`没有`left`和`top`位置的用途。
3.  你已经习惯了父`float:left`和`float:right`子div。
4.  没有给出任何图像的宽度，因此`float:left`没有用。

我认为您应该根据我放置在 DropBox 上的插件尝试一个正确的示例。它会给你创建一个例子的想法。我正在尝试生成相同的结果。功能准备就绪后，我会将其上传到此处供您查看。

# actionscript - 关闭孩子没有错误，但子电影不会关闭

> ID：10281212
> 
> 赞同：0
> 
> 时间：2012-04-23T13:12:23.127
> 
> 标签：actionscript, external

嗨，我已经查找了很多答案，但无法解决我的问题。我正在使用外部操作脚本，并且我使用了以下代码：

```
package
{
    import flash.display.MovieClip;
    import flash.net.*;
    import flash.events.*;
    import flash.display.Loader;
    import fl.motion.MotionEvent;
    import flash.ui.Mouse;

    public class submenu1 extends MovieClip
    {
        private var movieLoader:Loader; 

        //everything in this function is exicuted when you start the application
        public function submenu1()
        {
            movieLoader = new Loader(); 

            image3_btn.addEventListener(MouseEvent.MOUSE_DOWN,addMovie);
            image4_btn.addEventListener(MouseEvent.MOUSE_DOWN,addMovie);
            exit_btn.addEventListener(MouseEvent.MOUSE_DOWN,closeTheMovie);

        }

        private function addMovie(e:MouseEvent)
        {
            if(e.target.name=="image3_btn")
            {
                loadTheMovie("image3");
            }
            else if(e.target.name=="image4_btn")
            {
                loadTheMovie("image4");
            }

        }
        private function loadTheMovie(m:String)
        {
            var movieRequest:URLRequest = new URLRequest("../swf/" + m + ".swf");
            movieLoader.load(movieRequest);
            addChild(movieLoader);
        }

        private function closeTheMovie (e:MouseEvent)
{
        removeChild(movieLoader);
        exit_btn.addEventListener(MouseEvent.MOUSE_DOWN,closeTheMovie);
        }
        }

        } 
```

我可以让子电影打开，但我不能让 exit_btn 关闭子电影并返回到原始状态。单击以删除子项并带您返回纹理页面时，我想要 exit_btn。闪光灯本身不会出现任何错误，只是按钮不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:55:51.323

您是否将退出按钮导出到操作脚本？右键单击退出按钮，然后选择属性，然后单击名为 export for actionScript 的框。

# java - Tomcat 上的 JdbcSQLException

> ID：10281213
> 
> 赞同：1
> 
> 时间：2012-04-23T13:12:27.670
> 
> 标签：java, gwt, tomcat, maven, jdbc

我有一个 GWT/GXT 应用程序，它通过“gwt:run”（托管模式）运行良好，但在 Tomcat 服务器上它崩溃了`JdbcSQLException`，我不明白，因为导致异常的调用是服务器代码不是反正翻译成javascript。此外，我自己没有编写导致异常的代码，它包含在我的应用程序使用的库中。

有人能告诉我如何解决这个错误吗？

PS：这里根据请求抛出异常的代码语句：

```
private Connection conn;
[...]
conn = DriverManager.getConnection("jdbc:h2:"+databaseDirectory+"/"+databaseName+jdbcString, "sa", "");
[...]
PreparedStatement ps=conn.prepareStatement("SELECT * FROM QUERY_CACHE WHERE QUERYHASH=? LIMIT 1"); // throws the exception 
```

完整的堆栈跟踪：

```
org.h2.jdbc.JdbcSQLException: Connection is broken: "unexpected status 7274613" [90067-143]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:327)
    at org.h2.message.DbException.get(DbException.java:167)
    at org.h2.message.DbException.get(DbException.java:144)
    at org.h2.engine.SessionRemote.done(SessionRemote.java:558)
    at org.h2.command.CommandRemote.prepare(CommandRemote.java:68)
    at org.h2.command.CommandRemote.<init>(CommandRemote.java:47)
    at org.h2.engine.SessionRemote.prepareCommand(SessionRemote.java:421)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1052)
    at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:71)
    at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:233)
    at org.dllearner.kb.sparql.ExtractionDBCache.executeSelectQuery(ExtractionDBCache.java:183)
    at org.dllearner.kb.sparql.ExtractionDBCache.executeSelectQuery(ExtractionDBCache.java:174)
    at org.dllearner.reasoning.SPARQLReasoner.executeSelectQuery(SPARQLReasoner.java:887)
    at org.dllearner.reasoning.SPARQLReasoner.getSubClasses(SPARQLReasoner.java:766)
    at org.dllearner.reasoning.SPARQLReasoner.getSubClasses(SPARQLReasoner.java:745)
    at org.dllearner.reasoning.SPARQLReasoner.prepareSubsumptionHierarchy(SPARQLReasoner.java:124)
    at org.dllearner.algorithm.tbsl.learning.SPARQLTemplateBasedLearner.setEndpoint(SPARQLTemplateBasedLearner.java:229)
    at org.autosparql.server.search.TBSLSearch.getExamples(TBSLSearch.java:117)
    at org.autosparql.server.search.TBSLSearch.getExamples(TBSLSearch.java:105)
    at org.autosparql.server.AutoSPARQLSession.getExamples(AutoSPARQLSession.java:354)
    at org.autosparql.server.AutoSPARQLServiceImpl.getExamples(AutoSPARQLServiceImpl.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at org.dllearner.kb.sparql.SparqlQuery.convertJSONtoResultSet(SparqlQuery.java:297)
    at org.dllearner.reasoning.SPARQLReasoner.executeSelectQuery(SPARQLReasoner.java:887)
    at org.dllearner.reasoning.SPARQLReasoner.getSubClasses(SPARQLReasoner.java:766)
    at org.dllearner.reasoning.SPARQLReasoner.getSubClasses(SPARQLReasoner.java:745)
    at org.dllearner.reasoning.SPARQLReasoner.prepareSubsumptionHierarchy(SPARQLReasoner.java:124)
    at org.dllearner.algorithm.tbsl.learning.SPARQLTemplateBasedLearner.setEndpoint(SPARQLTemplateBasedLearner.java:229)
    at org.autosparql.server.search.TBSLSearch.getExamples(TBSLSearch.java:117)
    at org.autosparql.server.search.TBSLSearch.getExamples(TBSLSearch.java:105)
    at org.autosparql.server.AutoSPARQLSession.getExamples(AutoSPARQLSession.java:354)
    at org.autosparql.server.AutoSPARQLServiceImpl.getExamples(AutoSPARQLServiceImpl.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679) 
```

# python - python中有更好的预处理库或实现吗？

> ID：10281215
> 
> 赞同：2
> 
> 时间：2012-04-23T13:12:38.820
> 
> 标签：python, preprocessor, nlp, data-mining, web-mining

我需要预处理一些文本文档，以便我可以应用 fcm 等分类技术和潜在 dirichlet 分配等其他主题建模技术

为了详细说明预处理，我需要删除停用词，提取名词和关键字并执行词干提取。我用于此目的的代码是：

```
#--------------------------------------------------------------------------
#Extracting nouns
#--------------------------------------------------------------------------
for i in range (0,len(a)) :
    x=a[i]          
    text=nltk.pos_tag(nltk.Text(nltk.word_tokenize(x)))
    for noun in text:
        if(noun[1]=="NN" or noun[1]=="NNS"):
            temp+=noun[0]
            temp+=' '
documents.append(temp)
print documents

#--------------------------------------------------------------------------
#remove unnecessary words and tags
#--------------------------------------------------------------------------

texts = [[word for word in document.lower().split() if word not in stoplist]for    document in documents]
allTokens = sum(texts, [])
tokensOnce = set(word for word in set(allTokens) if allTokens.count(word)== 0)
texts = [[word for word in text if word not in tokensOnce]for text in texts]
print texts

#--------------------------------------------------------------------------
#Stemming
#--------------------------------------------------------------------------

for i in texts:
    for j in range (0,len(i)):        
        k=porter.stem(i[j])
        i[j]=k
print texts 
```

我上面提到的代码的问题是

1.  用于提取名词和关键字的 nltk 模块缺少许多单词。例如，对某些文档进行了预处理，并且诸如“Sachin”之类的名称在预处理后未被识别为关键字并被遗漏。
2.  词干不正确。有太多的词干（网络和网络到网络），有时名词也会被词干。

是否有更好的模块来满足所需的功能，或者是否有更好的相同模块实现？请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:59:42.267

试试 Pattern，我真的很喜欢： http: [//www.clips.ua.ac.be/pages/pattern](http://www.clips.ua.ac.be/pages/pattern)

# jaxb - JAXB - 类定制

> ID：10281221
> 
> 赞同：2
> 
> 时间：2012-04-23T13:12:47.417
> 
> 标签：jaxb, duplicates, conflict

当 XSD1 确实导入了定义具有相同名称的复杂类型的 XSD2 和 XSD2 时，如何避免冲突？

另外，当 XSD1 确实导入 XSD2 和 XSD3 导入 XSD2 时，两个如何应对？

# android - Android：调试和发布可以使用同一个证书吗

> ID：10281227
> 
> 赞同：1
> 
> 时间：2012-04-23T13:13:06.670
> 
> 标签：android, certificate, signing

是否可以使用相同的证书在调试和发布中签署应用程序？为什么甚至必须有两个单独的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:16:56.353

*调试证书*在开发过程中使用。

*当您需要通过 Google Play 分发您的应用程序时，将使用*发布证书。**

 *如果您不想通过 Google 分发您的应用程序，那么您可能会坚持使用调试证书。请注意，调试会显示/处理更多的日志记录，因此会使您的应用程序运行得更慢一些。*

# magento - 如何为magento中的类别设置最小订单数量（MOQ）？

> ID：10281228
> 
> 赞同：1
> 
> 时间：2012-04-23T13:13:12.380
> 
> 标签：magento

如何为类别添加购物车中允许的最小数量。

在 Magento (ver. 1.6.2.0) 后端，系统 > 配置 > 库存 > 产品库存选项选项卡，您可以设置“购物车中允许的最小数量”，但对于客户组；不适用于类别。

我们有很多类别具有绝对不同种类的物品，并且指定类别需要不同的最小起订量。

我将如何强制至少 6 件珠宝类别的产品和 7 打胸罩类别的产品？

谢谢，萨满

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:26:01.267

Magento 无法实现您所描述的内容。Magento 原生提供与类别和产品的 1:many 关系，

IE。一个产品可以有很多类别

您的建议会引发产品的*竞争条件*，如果产品存在于多个类别中，则产品的库存控制可能有 2 个可能的标准。

例如。如果您设置`Category A`的*最小起订量*为 6，最小`Category B`起*订量*为 10 并且`Product C`两者都存在 - 它继承哪个规则（最高/最低）？

因此，这在本机上是不可能的，但您可以构建一个自定义模块来实现它。

## 任何一个 ...

**通过`category->save()`观察者**

您可以为类别创建自定义属性 - MOQ，然后让您的模块“监听”类别保存，并相应地遍历所有产品以设置所述产品的 MOQ。

**优点**- 对每个产品进行更精细的控制，没有速度影响/前端开销

**缺点**- 保存类别慢

## 或者

**通过修改`isSaleable()`函数**

您可以重写确定产品是否可销售的标准函数。在您修改后的功能中，检查所述产品的类别，然后或相应地获得最小起订量（最高/最低 -*以任何一个为准*） 。`return true;``return false;`

**优点**- 更少的管理工作，无需在产品级别不断更新索引

**缺点**- 检查产品是否适销的速度较慢（前端似乎较慢）

* * *

无论哪种方式，您都需要构建一个自定义模块，或者寻求专业人士为您制作一个。

# css - CSS：禁用容器上的选择，启用子级（不适用于 Firefox）

> ID：10281229
> 
> 赞同：2
> 
> 时间：2012-04-23T13:13:18.373
> 
> 标签：css, selection, css-cascade

因此，以下内容适用于 Chrome，但不适用于 FireFox：

```
* {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input {
    -webkit-touch-callout: auto;
    -webkit-user-select: auto;
    -khtml-user-select: auto;
    -moz-user-select: auto;
    -ms-user-select: auto;
    user-select: auto;
} 
```

有没有办法禁用对容器元素的选择，但允许选择表单输入等内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:31:45.380

一些建议（尝试有创意）

1.试着简单地写：

```
:not(input) {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

此规则应适用于除 之外的所有内容`input`，因此不需要另一条恢复输入行为的规则（可能在某些 FF 版本上失败？）

* * *

2.如果这不能解决，请尝试`-moz-selection/selection`在用户选择时使用具有透明背景的伪类作弊

```
::-moz-selection { background: transparent; color: #000; }
::selection      { background: transparent; color: #000; } 

input::-moz-selection { background: blue; color: #fff; }
input::selection      { background: blue; color: #fff; } 
```

作为可用性的旁注，请避免这种限制：它们通常很烦人，如果有人想真正选择和复制页面上的文本，他可以从源代码视图轻松完成

# jquery - 如何从 jquery 库中提取单个函数？

> ID：10281231
> 
> 赞同：2
> 
> 时间：2012-04-23T13:13:30.310
> 
> 标签：jquery, load, fadein, fadeout

我只想使用 jquery 库中的三种方法，而不在我的文件中导入整个库，那么有没有办法从 jquery 中只提取fadeIn()、fadeOut()、load()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:18:09.597

您可以查看源代码并尝试删除淡入和淡出方法不需要的任何内容，但您最终可能会使用大部分库。

总体而言，jQuery 并不是为了方便使用而设计的，它被设计为一个占用空间小的库。如果它不足以满足您的需要，您可以查看[http://zeptojs.com](http://zeptojs.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:23:12.707

您将在[此处](https://github.com/jquery/jquery/blob/master/src/effects.js)找到 jQuery 效果的来源，并且您会注意到淡入/淡出只是动画不透明度的快捷方式。所以基本上你需要的是动画功能，这将需要一些其他的核心功能等。

Ajax 源代码在[这里](https://github.com/jquery/jquery/blob/master/src/ajax.js)，基本相同，load() 只是 jQuery.ajax 的一个快捷方式，而它又使用其他核心 jQuery 函数。

您可能最好按原样使用该库，或者搜索网络并尝试找到类似的纯 JS 函数来满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:24:18.783

这些`fade`方法可以通过购物车获得，但它们需要“Effects Core”。请参阅此处的“依赖项”部分[http://docs.jquery.com/UI/Effects/fade](http://docs.jquery.com/UI/Effects/fade)。您可以在此处捆绑各个库以供下载：

[http://jqueryui.com/download](http://jqueryui.com/download)

`load`似乎是 jQuery 的一部分（不是 jQuery UI），所以你可以加载 jQuery 库。正如@Karl Rosaen 提到的，您可以查看源代码并尝试提取单个函数（也可以找到它的依赖项！）。或者，您可以更加本地化并开始使用 XHR，或者找到完成相同功能的库。

# php - PHP检查字符串中是否有重复部分

> ID：10281240
> 
> 赞同：1
> 
> 时间：2012-04-23T13:13:47.997
> 
> 标签：php, arrays, string, spam

我正在尝试阻止垃圾邮件，其中很多是重复出现的单词，有没有办法检查字符串以查看字符串中是否有重复出现的短语？

```
$string = 'Hello ! Hello ! Hello ! Hello !"; 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:22:28.003

`substr_count`当你知道你在找什么时很好。如果您不知道什么是垃圾邮件词，您可以使用`str_word_count`and `array_count_values`：

```
$string = 'Hello! Hello! Hello! Hello! Lorem Ipsum';
$words = str_word_count($string, 1);
$count = array_count_values($words);
print_r($count); 
```

这会给你这个：

```
Array
(
    [Hello] => 4
    [Lorem] => 1
    [Ipsum] => 1
) 
```

您可以`sort()`使用此数组并获取字符串中最常用单词的排名。您还应该检查停用词（如“and”、“or”、“me”等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:16:52.160

一个快速的谷歌搜索给了我：

[http://php.net/manual/en/function.substr-count.php](http://php.net/manual/en/function.substr-count.php)

但是，有更好的反垃圾邮件想法。就像验证码一样。人类垃圾邮件发送者很难捕获。他们会找到绕过您的单词计数器的方法。也许您应该考虑像 Youtube 那样基于用户的垃圾邮件报告方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:16:29.817

你可以试试 substr_count()： [http ://php.net/manual/en/function.substr-count.php](http://php.net/manual/en/function.substr-count.php)

```
$string = 'hello ! hello ! hello ! hello !';
echo substr_count($string, 'hello'); 
```

当然，如果您想检查字符串中的任何单词是否多次出现……那么效率会大大降低。您可能必须跟踪“已检查单词”列表，并且对于字符串中的每个尚未检查的单词，检查它是否出现多次。

就像 Binarious 提到的，验证码是阻止垃圾邮件的更好方法；-)

# iphone - iPhone iPod 硬件摄像头的视角是多少度？

> ID：10281247
> 
> 赞同：0
> 
> 时间：2012-04-23T13:14:11.650
> 
> 标签：iphone, objective-c, camera, ipod-touch, degrees

我将实现一个自定义地图视图方向指示器，例如带有地图工具包的指南针应用程序。

**要为 iPhone 或 iPod 添加我自己的“视锥”版本，我需要知道相机一次可以看到多少度。视锥是 90 度吗？**是否有一些相机属性可以查询以找出这些信息？

![iPhone指南针地图应用](../Images/d5f9d8813a209836686a0792a47fbd92.png)

谢谢！

# flash - 有哪些替代方法可以将 WAV 循环编译为 SWF？

> ID：10281252
> 
> 赞同：0
> 
> 时间：2012-04-23T13:14:24.440
> 
> 标签：flash, audio, build-process, embed, continuous

到目前为止，当我需要在游戏中嵌入声音资源时，我总是不得不将它们引入 Flash 项目的库（一个新的 FLA），设置它们的属性（链接/类名，音质设置），然后发布它文件，所以我可以在我的主项目文件中使用它，如下所示：

```
[Embed(source="../assets/audio/audio.swf#music_track_01")]
public static const MUSIC_TRACK_01:Class; 
```

这个过程是我所知道的唯一可以制作最干净、无缝、最好的“**可循环**”曲目的方法，每次播放之间没有任何**间隙。**

所以我的问题是，是否有其他工具可以自动执行此任务？将一堆**WAV**自动编译为一个常见的**SWF**声音文件？

我曾经见过一家公司使用一种工具，该工具有自己的脚本文件，可以将*每个单独的 WAV*声音转换为*单独的 SWF*文件——所有文件都共享相同的链接名称“SWFSound”，但（我最有根据的猜测）可能是独一无二的，因为每个一个来自他们自己`ApplicationDomain`编译的 SWF。但在我看来，文件太多了！

如果那里存在某些东西，它可能是一个决定性因素，或者使用我自己的脚本来实现同样的事情（并且可能是一个*仅限 Windows 的*解决方案：P）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:40:23.450

[http://etcs.ru/pre/WAVPlayer/srcview/](http://etcs.ru/pre/WAVPlayer/srcview/)这是我知道的（它使用从 WAV 文件中提取的 PCM 数据生成 SWF - 我相信您选择 WAV 是因为它，否则很少有工具可以创建带有 MP3 数据的 SWF。这是用 AS3 编写的，因此您可以将其设为 AIR 应用程序 - 虽然如果您想在构建期间运行它并不是很有用，因为它将启动运行时，但在最坏的情况下 - 应该可以工作。

用 C# 重写代码例如使其成为 Windows 可执行文件不会有问题，基本上它所做的只是将数据从一个文件复制到另一个文件 + 添加一些标题。

# c# - 如何使用多列值获取列表中的数据总和

> ID：10281259
> 
> 赞同：3
> 
> 时间：2012-04-23T13:14:40.573
> 
> 标签：c#, linq

我有一个使用此 Linq 查询的列表

```
filterEntities = (from list in filterEntities where list.Id== 0 && list.Id== 1 && list.Id == 3 && list.Id== 6 select list).OrderBy(r => r.Id).ToList(); 
```

现在这个 linq 返回一个类似的列表

```
ID  Age
0    18
0    19
1    21
3    24
6    32
6    08 
```

我想使用返回的相同 ID 的总和生成一个列表

```
ID  Age
0    37
1    21
3    24
6    40 
```

请建议我可能的查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:21:00.080

我认为您正在寻找这样的组

```
List<int> ids = new List<int>() { 0, 1, 3, 6 };

filterEntities = (from list in filterEntities 
                  where ids.Contains(list.Id)
                  group list by list.id into g
                  orderby g.Key
                  select new 
                  {
                    ID = g.Key,
                    Age = g.Sum(x => x.Age),
                  }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:26:25.367

我会像这样清理查询，因为长表达式看起来有点混乱：

```
var idList = new List<int> { 0, 1, 3, 6};

filterEntities = from e in filterEntities 
                 where idList.Contains(e.Id)
                 group e by e.Id into g
                 select new { Id = g.Key, Sum = g.Sum(e =>e.Age) }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:20:04.990

```
filterEntities =  filterEntities.Where(l=>new[] { 0, 1, 3, 6 }.Contains(l.Id))
                                .Sum(c=>c.Age)
                                .GroupBy(r=>r.Id)                                   
                                .ToList(); 
```

# mysql - 从具有间接关系的两个表中检索数据（从另一个表中）

> ID：10281261
> 
> 赞同：3
> 
> 时间：2012-04-23T13:14:55.700
> 
> 标签：mysql, sql, subquery

我有 3 张桌子

```
Division 

id    name  
1       A 
2       B

Region

Id       name     Divsion_id
01      Rim          A

Territory

Id       name       region_id

001      a               01
002      b               01
003      c               01 
```

现在我想编写一个查询，以便用户选择部门并显示其各自的区域。

我怎样才能写这个查询，如

> Divsion和Region之间没有直接关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:18:48.653

```
select t.* from territory t
inner join region r on r.id = t.region_id
inner join devision d on d.name = r.division_id
where d.name = 'A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T13:10:15.147

另一种方法是将`IN`运算符与子查询一起使用。内部查询投影具有给定区域 id 的所有区域，外部查询查找具有选定区域的区域。尽管联接应该比嵌套查询执行得更好。

```
 select * from territory where region_id   in  (select region_id from region where devision_id=<division id>) 
```

# java - 单独模块中的 Spring bean（业务层）

> ID：10281270
> 
> 赞同：0
> 
> 时间：2012-04-23T13:15:34.473
> 
> 标签：java, spring, ejb

我正在开始新的应用程序。我希望将所有业务逻辑和域类分隔在独立模块中（类似于远程 EJB）。这是因为应用程序将至少有两个（以后可能会更多）客户端——桌面、Web（Spring MVC）。

这可能与春天？或者我应该只将 EJB 和 Spring 用于 Web 应用程序客户端中的 MVC？

谢谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:19:46.153

是的，这是可以做到的。您可以将生成的 jar 作为库放在完整的应用程序中，或者单独使用主机并使用一些远程处理系统（hessian、soap、rmi、...）在它们之间进行接口。Spring 也可以提供帮助。

# php - 西班牙语字符不正确

> ID：10281276
> 
> 赞同：0
> 
> 时间：2012-04-23T13:15:52.910
> 
> 标签：php, html, curl

我下载了一个带有 cURL 的页面，并使用“PHP Simple HTML DOM Parser”解析了 html。问题是当它显示元素的外部 html 时，西班牙语字符不正确。例如：

原文

> la puja por la compra de los derechos de publicación ha sido la más reñida del año。

显示的文字

> la puja por la compra de los derechos de publicaciÃ³n ha sido la mÃ¡s reÃ±ida del aÃ±o。

什么会导致字母改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:22:56.557

我很确定因为它在输出中显示为多个字符，这是因为您试图在单字节字符集中显示一些多字节 UTF8 字符（可能是 ISO-8859-1）。

看看我不久前写的[这篇博客文章](http://webmonkeyuk.wordpress.com/2011/04/23/how-to-avoid-character-encoding-problems-in-php/)，它应该会告诉你所有潜在的问题领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:18:43.823

不正确的字符编码 - 确保整个编码是一致的，我建议使用 UTF-8

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:18:35.830

您必须确定下载页面的编码是什么，然后（例如通过 iconv）将其转换为您的编码。

请参阅[PHP：将 curl_exec 输出转换为 UTF8](https://stackoverflow.com/questions/2510868/php-convert-curl-exec-output-to-utf8)

# visual-studio-2010 - 有没有一种简单的方法可以在 mac 上使用 xcode 将 Qt 4.8 VS2010 项目迁移到 Qt 项目？

> ID：10281277
> 
> 赞同：1
> 
> 时间：2012-04-23T13:15:55.473
> 
> 标签：visual-studio-2010, macos, qt, xcode4

我目前有一个使用 Qt 4.8 框架的 VS2010 项目。我们需要在 windows 上有一些用于视频的本地库，我们将为 mac 开发相同的库。我们现在正在将项目迁移到 Mac OS，以便我们也可以在该 OS 上发布。我是 Mac 的新手，上周五是我第一次玩弄 Mac，更不用说 xcode。我的大部分开发经验都在 Visual Studio 世界中，所以我对“制作”项目不太熟悉。我们确实有一些专业文件，但它们已经过时一年多了。在平台之间迁移项目的最佳方式是什么？任何提示或技巧？任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:40:56.643

如果您打算从 Windows 迁移到 Mac，我绝对推荐使用[CMake](http://www.cmake.org/)。

与使用硬编码的项目文件/makefile 相比，它具有许多优点。这个答案指向一些[CMake 教程](https://stackoverflow.com/questions/2186110/cmake-tutorial)。

有一些[转换工具](http://www.vtk.org/Wiki/CMake#Converters_from_other_buildsystems_to_CMake)旨在能够在其他构建系统和 CMake 之间进行转换，但我没有这方面的个人经验。

[CMake 文档](http://www.cmake.org/cmake/help/cmake-2-8-docs.html)有时还有一些不足之处，但邮件[列表](http://www.cmake.org/cmake/help/mailing.html)通常是获得帮助和建议的好地方。

# java - 使用 Oracle 序列将日志 ID 插入 jdbc 的 2 个表中？

> ID：10281278
> 
> 赞同：2
> 
> 时间：2012-04-23T13:15:57.307
> 
> 标签：java, oracle, jdbc, sequences

我正在使用 oracle 序列将日志 ID 插入到 tableA 中，如下所示，

```
String SQL_PREP_INSERT = "INSERT INTO tableA (LOG_ID,USER_ID,EXEC_TIME) VALUES"
            + " (logid_seq.nextval, ?, ?)"; 
```

然后获取最近插入的值，

```
String SQL_PREP_SEL = "SELECT max(LOG_ID) FROM tableA ";

stmt = con.prepareStatement(SQL_PREP_SEL);
stmt.execute();
ResultSet rs = stmt.getResultSet();
if (rs.next()) {
logid = rs.getInt(1);
} 
```

并将其插入到tableB中，

```
String SQL_PREP_INSERT_DETAIL = "INSERT INTO tableB (LOG_ID, RESPONSE_CODE, RESPONSE_MSG) VALUES"
                + " (?, ?)";

        stmt = con.prepareStatement(SQL_PREP_INSERT_DETAIL);
        stmt.setInt(1, logid);
        stmt.setString(2, respCode);
        stmt.setString(3, respMsg);
        stmt.execute(); 
```

有没有办法在 Java 而不是 Oracle 中生成序列并一次插入两个表中，而不是从 tableA 中选择并插入到 tableB 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:09:20.167

通常，选择`MAX(log_id)`不会为您提供与`logid_seq.nextval`提供的相同的值。假设这是一个多用户系统，其他一些用户可能已经插入了另一行，其`log_id`值大于您在执行查询之前刚刚插入的行。

假设两个`INSERT`语句都在同一个会话中运行，最简单的选择可能是`logid_seq.currval`在第二个`INSERT`语句中使用。 `currval`将返回返回到当前会话的序列的最后一个值，因此它将始终返回由`nextval`第一个语句中的调用生成的相同值。

```
INSERT INTO tableB (LOG_ID, RESPONSE_CODE, RESPONSE_MSG) 
  VALUES( logid_seq.currval, ?, ? ) 
```

或者，您可以`RETURNING`在第一条语句中使用该子句将序列值提取到局部变量中，然后在第二条`INSERT`语句中使用它。但这可能比简单地使用`currval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T17:14:37.030

```
String QUERY = "INSERT INTO students "+
               "  VALUES (student_seq.NEXTVAL,"+
               "         'Harry', 'harry@hogwarts.edu', '31-July-1980')";

// load oracle driver
Class.forName("oracle.jdbc.driver.OracleDriver");

// get database connection from connection string
Connection connection = DriverManager.getConnection(
        "jdbc:oracle:thin:@localhost:1521:sample", "scott", "tiger");

// prepare statement to execute insert query
// note the 2nd argument passed to prepareStatement() method
// pass name of primary key column, in this case student_id is
// generated from sequence
PreparedStatement ps = connection.prepareStatement(QUERY,
        new String[] { "student_id" });

// local variable to hold auto generated student id
Long studentId = null;

// execute the insert statement, if success get the primary key value
if (ps.executeUpdate() > 0) {

    // getGeneratedKeys() returns result set of keys that were auto
    // generated
    // in our case student_id column
    ResultSet generatedKeys = ps.getGeneratedKeys();

    // if resultset has data, get the primary key value
    // of last inserted record
    if (null != generatedKeys && generatedKeys.next()) {

        // voila! we got student id which was generated from sequence
        studentId = generatedKeys.getLong(1);
    }

} 
```

# perl - 当匹配也包含在引用文本中时，Vim % 匹配

> ID：10281280
> 
> 赞同：2
> 
> 时间：2012-04-23T13:15:59.800
> 
> 标签：perl, vim, match, quote

我搜索了 Vim Tips Wiki，在 IRC 上问过，现在你：

是否有一个 Vim 插件可以更改 % 匹配行为以跳过引用或转义匹配？

鉴于：

```
1  var1{
2     ...
3    { Target = 'blah blah.*}',
4     ...
5    }
6    ...
7    $fem = \};
8  } 
```

将光标放在第 1 行中的 { % 将带您到第 8 行 - 跳过第 3 行中的引用 } 和第 7 行中的转义 }。

目的是通过嵌入引用代码片段的 Data::Dumper 转储进行导航。

根据我阅读的文档，matchit 插件无法处理这种情况。

线索指针首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:21:20.570

从 :h %

```
When 'cpoptions' contains "M" |cpo-M| backslashes           
    before parens and braces are ignored.  Without "M" the          
number of backslashes matters: an even number doesn't 
match with an odd number.  Thus in "( \) )" and "\( ( \)" the first and last parenthesis match. 
```

cpo 的 M 选项：

```
M   

When excluded, "%" matching will take backslashes into          
account.  Thus in "( \( )" and "\( ( \)" the outer          
parenthesis match.  When included "%" ignores           
backslashes, which is Vi compatible. 
```

# wcf - 从命令提示符调用休息服务

> ID：10281289
> 
> 赞同：2
> 
> 时间：2012-04-23T13:16:35.770
> 
> 标签：wcf, rest, command-line

我需要从命令提示符调用 wcf 休息服务。例如，当我输入

```
C:\Users\Admin>GET http://localhost:63088/RestCatalogService.svc/ 
```

它应该返回 GET 将在浏览器中以字符串格式返回的任何内容。任何如何开始或链接到任何相关资源的想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:18:46.533

将您最喜欢的 HTTP 工具（[cURL](http://curl.haxx.se/download.html)、[wget](http://gnuwin32.sourceforge.net/packages/wget.htm)）安装到您的 PATH 中，然后使用它。

请注意，这看起来更像：

```
C:\Users\Admin>curl http://localhost:63088/RestCatalogService.svc/ 
```

或者

```
C:\Users\Admin>wget -O - http://localhost:63088/RestCatalogService.svc/ 
```

# node.js - 如何为 jEdit 突击队提供 PATH？

> ID：10281290
> 
> 赞同：1
> 
> 时间：2012-04-23T13:16:42.820
> 
> 标签：node.js, path, jedit

安装后

1.  [节点.js](http://gist.github.com/579814)，
2.  `npm`,
3.  适用于 Ubuntu的[最新 jEdit](http://jedit.org/index.php?page=download#option_two)，
4.  jEdit 控制台插件，以及
5.  一个[CoffeeScript 突击队](http://community.jedit.org/?q=node/view/4968)（原文如此！），

然后在中配置`coffee`路径`coffee.xml`，它不会运行，因为`node`找不到：

```
/home/user/local/bin/coffee -c foo.js.coffee
Process /home/user/local/bin/coffee exited with code 127
/usr/bin/env: node: No such file or directory 
```

这很可能是因为在控制台插件尝试运行时`/home/user/local/bin`缺少. 有没有办法在不修改的情况下提供这个环境变量？`PATH``coffee``/home/user/local/bin/coffee`

试图将 Plugins → Console → System Shell → Subshel​​l extra PATH 设置为`/home/user/local/bin`，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:24:43.033

看起来 jEdit / Console 中存在错误。我保存了“Subshel​​l extra PATH”选项，关闭对话框，运行`coffee`并得到相同的结果，再次检查选项，然后放弃。重新启动jEdit，发现该选项已被*删除*。再次进入它，现在`coffee`运行良好。对于遇到此问题的其他任何人：

1.  安装一切。
2.  **重新启动 jEdit。**
3.  **设置“子外壳额外路径”选项。**
4.  利润！

# c# - 如何在一行中将逗号转换为句点并将句点转换为逗号

> ID：10281293
> 
> 赞同：6
> 
> 时间：2012-04-23T13:16:54.957
> 
> 标签：c#, c#-4.0

我有一个这样的数字`12,345,678.09`，我想将其转换为`12.345.678,09` 我正在考虑将字符串拆分并将字符串`.`中的逗号更改为句点，然后用逗号将它们连接起来。

```
string value = "12,345,678.09";
string[] parts = value.Split(new char[]{'.'});
string wholeNumber = parts[0].Replace(",", ".");
string result = String.Format("{0},{1}", wholeNumber, parts[1]); 
```

我觉得这个方法很笨拙。有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T13:18:53.490

如果有一个符号没有出现在你的字符串中的任何地方，比如`'$'`，你可以这样做：

```
parts[0].Replace(",", "$").Replace(".", ",").Replace("$", "."); 
```

可以肯定的是，这在 CPU 周期方面是次优的，但它在保持单行方面确实有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T13:35:01.353

执行此操作的*正确*方法（正确的不是字符串混搭）是使用[`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)您要格式化的文化。看起来你喜欢意大利文化`it-IT`：

```
var num = 123456789.01;
var ci = new CultureInfo("it-IT");
Console.WriteLine(num.ToString("#,##0.00",ci)); //output 123.456.789,01 
```

现场示例：[http ://rextester.com/ARWF39685](http://rextester.com/ARWF39685)

请注意，在格式字符串中，您`,`用来表示“数字组分隔符”并`.`表示“小数分隔符”，但文化信息用正确的文化分隔符替换它 - 就意大利文化而言，它们完全相反（`.`是组分隔符并且`,`是小数点分隔符）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T13:24:11.013

```
string value = "12,345,678.90";
value = string.Join(".", value.Split(',').Select(s => s.Replace(".", ",").ToArray()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:34:01.437

你有

```
string value = "12,345,678.09";
value = value.replace(",", "_").replace(".", ",").replace("_", ".") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:41:22.923

你可以去：

```
string newString = Convert.ToDouble(oldString).ToString("#,0.##", new CultureInfo("de-DE")); 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/syy068tk.aspx)。
这一切都在您想要的一条线上，并且是推荐的方式。
您还可以使用其他文化，或者`CultureInfo.CurrentCulture`，以用户查看数字的方式显示数字。如果他在意大利窗户上，他将拥有`CurrentCulture == "it-IT"`相应的数字格式。`CurrentCulture`可能是您正在寻找的我假设，当我错了时纠正我。
编辑：根据 Jamiecs 的评论格式不适用于字符串，所以我添加了一个转换。但请注意：如果转换不起作用，它可能会引发异常。所以最好多用一行并使用 Double.TryParse() 或类似的东西。

# xml - flash 需要有带有 Html 参数的 XML 的动态路径

> ID：10281296
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:17:14.357
> 
> 标签：xml, flash, dynamic, path, actionscript-2

> **可能重复：**
> [如何在 Actionscript 2 中使用 HTML 参数](https://stackoverflow.com/questions/4365655/how-to-use-html-param-in-actionscript-2)

我有这个 flash mp3 播放器，它从名为“playlist.xml”的 XML 文件中读取数据，代码是：

```
if (xml == undefined && mp3 == undefined)
{
    xml = "playlist.xml"; 
```

现在我希望我的 xml 文件的路径是动态的并且在 HTML 文档中。所以我可以用php改变它。你能指导我如何更改我的代码以从 HTML 代码中的参数读取 XML 路径吗？ps 我的 Flash 文件在 Actionscript 2.0 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:25:00.583

在 HTML 中：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="#" height="#" id="XXXXX" align="middle">

<param name="flashVars" value="myXML=playlist.xml" />
<param name="movie" value="URL" /><param name="menu" value="false" /><param name="quality" value="high" /><param name="scale" value="noscale" /><param name="bgcolor" value="#000000" /><embed src="URL" menu="false" quality="high" scale="noscale" bgcolor="#000000" width="200" height="200" name="XXXXX" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashVars = "myXML=playlist.xml";/>
</object> 
```

如果闪存：

```
if (_root.myXML)
{
   xml = _root.myXML;
}
else{
    xml = "playlist.xml";
 } 
```

# jquery - 未从 jquery .post() 接收 php 文件中的日期

> ID：10281299
> 
> 赞同：0
> 
> 时间：2012-04-23T13:17:25.293
> 
> 标签：jquery, ajax, date, post

我想使用 .post() 将数据发送到页面，但没有发送日期，我

```
puzzle = JSON.stringify(puzzle);
        var today = new Date();
        $.post("script/add_grid.php",
        {Puzzle:puzzle, designer:$("#designer").val(), name: "تجربة 1", creation_date:today}); 
```

add_grid.php

```
$db_word->insert_grid($_REQUEST['Puzzle'],$designer,$name,$creation_date); 
```

我收到此错误消息：

```
<b>Notice</b>:  Undefined index: creation_date in <b>D:\xampp\htdocs\entertainment\script\add_grid.php</b> on line <b>6</b><br /> 
```

可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:19:30.850

我假设你在追求：

```
var today = new Date().getTime(); 
```

如果它是您寻找的“现在”时间戳。

# ios4 - 从 NSUserDefaults 检索后如何将 UIImage 设置为 UIImageView

> ID：10281302
> 
> 赞同：0
> 
> 时间：2012-04-23T13:17:31.203
> 
> 标签：ios4, uiimageview

我正在尝试在`uiImageView`使用时显示图像`imagePickerview`。意味着用户选择图像确定。然后我有一个按钮，上面写着 save 。所以接下来我要做的就是将图像保存在`NSUserDefaults` 然后我需要这个图像在另一个视图控制器上以在`uiImage`视图上显示相同的图像

为此，我做了以下工作。

```
 on save  button touched......

     NSData* imageData = UIImagePNGRepresentation(image.image);
    NSData* myEncodedImageData = [NSKeyedArchiver archivedDataWithRootObject:imageData];
    [[NSUserDefaults standardUserDefaults] setObject:myEncodedImageData forKey:@"myEncodedImageDataKey"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后在另一个视图控制器上检索.......作为

```
 NSData* myEncodedImageData = [[NSUserDefaults standardUserDefaults] objectForKey:@"myEncodedImageDataKey"];
UIImage* image = [UIImage imageWithData:myEncodedImageData];
imageView.image =image; 
```

但是图像没有显示在另一个视图的 imageView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:45:30.637

通过获取 NSData 对象中的 PNG 图像数据并在将其存储为默认值之前将其存档，您正在执行一个额外且不必要的步骤。NSUserDefaults 可以直接处理一个 NSData 对象。尝试取出归档/取消归档，然后使用 NSData 对象，看看是否能解决您的问题。

# php - php regex 从 html dom 获取邮政地址

> ID：10281303
> 
> 赞同：0
> 
> 时间：2012-04-23T13:17:39.230
> 
> 标签：php, regex

我正在尝试从此 html 获取邮政编码 (91150)：

```
<div>

<strong>Adresse de la commune : </strong><br>
HOTEL DE VILLE<br>91150&nbsp;ABBEVILLE-LA-RIVIERE&nbsp;
<p>Téléphone : <strong>01 64 95 67 37</strong><br>
Fax : <strong>01 69 58 80 17</strong></p>

<p>Localisation géographique : </p>
</div> 
```

在php中我做了：

```
$page = file_get_contents($url);
preg_match('`<strong>Adresse de la commune : </strong>([^[0-9]]*)<p>`', $page, $regs);
var_dump($regs);// returns empty 
```

谁能帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:24:32.443

可以肯定的是，您的邮政编码比电话和传真号码更多。使用这个想法，你可以提取它

```
preg_match('#Adresse de la commune\D+(\d{3,})#s', $page, $regs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:23:50.727

我简化了一点。这对你有用吗？

```
preg_match('/[^0-9]([0-9]{5})[^0-9]/', $page, $regs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:25:33.437

像这样转储它：

```
$postalcode = preg_match('`<strong>Adresse de la commune : </strong>([^[0-9]]*)<p>`', $page, &$regs);
var_dump($postalcode); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:26:15.577

假设邮政编码总是写为 5 个连续数字的单词，下面的代码可以提取它：

```
$matches = array();
preg_match("/\b(\d{5})\b/", $page, $matches);
echo $matches[1]; // 91150 
```

-anchors`\b`强制邮政编码成为自己的一个词。例如，这样 6 位电话号码中的 5 位数字将不匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:29:09.357

有了这个：

```
(?<![0-9])[0-9]{5}(?![0-9]) 
```

您可以匹配任何一组 5 个数字。然后，您可以根据输入字符串添加更多限制。如果之后总是有一个不间断的空间，您可以使用：

```
(?<![0-9])[0-9]{5}(?:&nbsp;) 
```

以及使您的正则表达式对您的输入更准确所需的许多其他限制。我使用了 .NET 正则表达式语法，我希望这不会带来不便。

# ruby - Ruby“枚举”比较

> ID：10281309
> 
> 赞同：2
> 
> 时间：2012-04-23T13:18:16.273
> 
> 标签：ruby

当然枚举在 Ruby 中不存在，但基于[这篇文章](https://stackoverflow.com/questions/75759/enums-in-ruby)，我使用了如下内容：

```
class PostType
   Page = 1,
   Post = 2
end 
```

我想将值传递给一个方法并将其用于比较。所以：

```
initialize(post_type)
   if post_type = PostType::Page
       # do something here
   elsif post_type = PostType::Post
       # do something else here
   end
end 
```

但这不起作用，无论我将什么传递给我的类的构造函数，它总是产生相同的结果。

关于为什么将“假枚举”传递给方法并尝试比较它不起作用的任何想法？我必须比较价值吗？即`post_type = 2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:21:50.620

你分配而不是比较

```
initialize(post_type) 
   if post_type == PostType::Page 
       # do something here 
   elsif post_type == PostType::Post 
       # do something else here 
   end 
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T13:22:05.703

除了你应该使用`Symbol`s 的事实之外，还有一个语法错误，我假设你想要不同的语义：

```
if post_type = PostType::Page 
```

应该

```
if post_type == PostType::Page 
```

所以你的代码应该看起来像

```
if post_type == :page
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T13:22:13.770

您是在分配而不是比较。使用`==`而不是`=`应该产生更好的结果。

```
 initialize(post_type)
    if post_type == PostType::Page
        # do something here
    elsif post_type == PostType::Post
        # do something else here
    end
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T14:29:25.790

您可以使用`case`：

```
case post_type
  when PostType::Page then  # Do something
  when PostType::Post then  # Do something else
  else raise 'Invalid post type'
end 
```

此外，您确实应该`Symbol`为此使用 s ：

```
case post_type
  when :page then # Do something
  when :post then # Do something else
  else raise 'Invalid post type'
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T13:37:57.560

这就是为什么这样做的好习惯：

```
def initialize(post_type)
   if PostType::Page == post_type
       # do something here
   elsif PostType::Post == post_type
       # do something else here
   end
end 
```

如果你确实犯了这样的错误，编译器会发出警告`"already initialized constant ..."`

# jquery - jQuery通过buttonclick删除动态行

> ID：10281320
> 
> 赞同：0
> 
> 时间：2012-04-23T13:19:04.177
> 
> 标签：jquery, onclick

我有一个表格，其中每一行都有一些信息和一个删除按钮作为单元格，当单击删除按钮时，按钮所在的行应该隐藏（）我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:24:41.737

你肯定使用迭代器来显示行。现在为该 del 按钮/单元格添加一些类并在 jQuery 中编写。

```
jQuery(".<class name>").click(function (){
    jQuery(this).parent("tr").hide();
}); 
```

希望它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:24:27.700

如果您的 html 如下所示：

```
<tr><td>Some info</td><td><button>Delete</button></td></tr> 
```

然后你可以把它绑定到按钮的点击事件

```
$(this).parents("tr").hide(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:47:17.400

你可以这样做：

```
 <tr>
        <td>Info Here</td><td>Another Info Here</td><td><input type="button" value="Delete Row" class="delete_button"></td>
      </tr> 
```

然后在js文件中：

```
$(".delete_button").click(function(){
  $(this).parent().parent().hide()
}); 
```

只要确保你有jquery。

# javascript - 链接悬停故障 - 基本 UL 链接使页面在悬停时跳转？

> ID：10281322
> 
> 赞同：4
> 
> 时间：2012-04-23T13:19:15.330
> 
> 标签：javascript, css, xml, wordpress, debugging

*失败日志*

* * *

-- 对于那些急切等待另一个更新**（2012 年 4 月 30 日，下午 3:23）**的人，这里是：

我已经设法通过在我的主容器中添加一个最小高度来解决这个问题。这是一个糟糕的解决方案，我讨厌它 - 因为我必须根据内容进行调整。但这是迄今为止我收集到的唯一解决方案。

*最后一分钟的提示？*...

* * *

**更新失败。2012 年 4 月 24 日，美国东部标准时间下午 4:35 //** *WildPeaks 在他的以下评论中发现了问题。*

当我的滑块切换时，我需要保持定义高度。我已经对定向 SO 参考问题中的所有建议进行了多次尝试，但似乎无法获得语法。我也尝试过不同的 FX -*帮助！*

```
<script type="text/javascript">

jQuery(document).ready(function($){
    $("#photo-rotator").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 6000);
});

</script> 
```

------**下面的原始问题：**

我在无序列表中编写了一些基本的 HTML / CSS 链接。出于一个奇怪的原因，在悬停某些链接时，页面会跳转并向上滚动。几乎就像用户点击了一个'#'。但这发生在悬停时？

这是我的*完整* `footer.php` *（这是在 Wordpress 网站内）*

```
<?php
/**
 * @package WordPress
 * @subpackage Default_Theme
 */
?>

        <div id="endPage">
            <div id="contactus">

                <br /><br />
                <p>Suggestions? Requests? Feedback? Are you talking about our books?<br />
                Send us links to your book reviews and contact us on <a href="http://twitter.com/readitforward">Twitter</a> or <a href="http://www.facebook.com/ReadItForward">Facebook</a> or email us at <a href="mailto:readitforward@randomhouse.com">readitforward@randomhouse.com</a>.
                </p>                
                </div>

<?php //<!-- =-=-=-=-=-=-=-=-=-=BEGIN RH FOOTER-==-=-=-=-=-=-=-=-= --> ?>

    <div id="footer" style="margin-top: 30px;">

    <div style="float:left;"><img src="http://www.osmproduction.com/RIF/wp-content/uploads/2012/04/RIF-Footerlogo.jpg" style="border:0px;" /></div><br />

    <div style="position: absolute; margin-right: -150px; width: 350px; height: 250px; margin-top: 50px; padding-bottom: 15px;">
    <ul id="feetnav" style="list-style: none; padding-left: 5px;">

    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=9">Free Books</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">Reader Reviews</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=7">Meet the author</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=4">Meet Editor</li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=5">Book Groups</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">Favorites</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/">All Categories</a></li>

    </ul>
    </div>

    <div id="searchfoot" style="margin-left: 550px; margin-top: 75px;">

    <?php get_search_form(); ?>

    </div>

    <br />

    <hr style="color: #fff; border: 1px solid white; height: 1px;" /></hr><br />

    <div id="footer_categories">

    <div style="">

    <ul id="feetnav2" style="list-style: none; padding-left: 5px;">

    <li style="float:left; font-color: #000;"><a href="http://www.osmproduction.com/RIF/?cat=9">The Crown Publishing Group</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">Books</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=7">Authors</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=4">Communites</li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=5">Features</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">Readers Guide</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/">Feature Sites</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">News</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/">Read It Forward</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">CrafterNews</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/">The Recipe Club</a></li>
    <li class="footlink" style="float:left;"><a href="http://www.osmproduction.com/RIF/?cat=10">Books for Better Living</a></li>
    </ul>

    <p class="copyright">Use of this site indicates your consent to the Terms of Use. Copyright &copy; 1995-2012 Random House, Inc. All rights reserved.</p>            
    </div>        
    </div>

</div>
</div>
</div>

<?php
function homepagename() {
    $homepagename = "";
    if(strlen($_SERVER['REQUEST_URI']) < 2) {
        $homepagename = "Read It Forward Homepage";
    }
    print $homepagename;
}
?> 
```

我还尝试了下面的 CSS 片段*（我猜没有太大意义，但值得一试）*

```
.footlink li:hover { 

margin: 0px;

} 
```

**LIVE URL** [ [http://tinyurl.com/cz6sawg](http://tinyurl.com/cz6sawg) ] *（将鼠标悬停在几个底部页脚链接上）*

**提示可能是我的滑块造成的？我似乎在代码中找不到任何应该导致这种情况的东西？滑块代码：**

```
<!-- Top of Page Slider -->

<div id="photo-rotator">
<?php $slide_id=1; ?>
<?php
 $featuredPosts = new WP_Query();
 $featuredPosts->query("showposts=4");
 while ($featuredPosts->have_posts()) : $featuredPosts->the_post();
 ?>

    <div id="slide-<?php echo $slide_id; $slide_id++;?>">
     <a href="<?php the_permalink() ?>" class="post-image">
         <?php the_post_thumbnail( 'rotator-post-image' ); ?>
         <span class="title"><?php the_title(); ?></span>
     </a>
     </div>

    <?php endwhile; ?><!--/close loop-->

    <ul id="slide-nav">
        <?php $nav_id=1; ?>
        <?php while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>
            <li>
                <a href="#slide-<?php echo $nav_id; ?>">
                    <span class="thumbnail" style="display:none;">
                    </span>
                    <? the_title(); $nav_id++;?>

                    <div style="">

                    <!--<?php the_excerpt(); ?>-->

                    <?php if($text= get_post_meta($post->ID, "slidetext", true)) { ?>
                         <div class="">

                         <p style="font-weight: normal; font-size: 14px;"><?php echo $text; ?></p> 

                         </div>
                        <?php } //else { print"<div>"; } ?>  

                    </div>   

                </a>
            </li>
        <?php endwhile; ?><!--/close loop-->
        </ul>
        </div>

<!-- End Top page Slider --> 
```

*这是启动滑块的 JS：*

```
<script type="text/javascript">
jQuery(document).ready(function($){
    $("#photo-rotator").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 6000);
});

</script> 
```

*（也只是尝试在标记和 CSS 中删除 UL / LI，以防 JS 以某种方式进行交互。）* :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:31:23.533

> 在大多数情况下，跳转不是由浏览器跟随“#”链接引起的。页面跳转是因为在两个选项卡窗格之间的动画中点，两个选项卡窗格都是完全透明和隐藏的（如 display: none），因此整个选项卡部分的有效高度暂时为零。
> 
> 如果零高度的选项卡式部分导致页面变短，那么页面似乎会向上跳跃以进行补偿，而实际上它只是调整大小以适应（暂时）较短的内容。说得通？

这是@wildpeaks 之前发布的问题，我想我知道问题出在哪里。如果你一直缩小，你可以看到它是导致问题的幻灯片。我认为正在发生的事情是，当幻灯片更改时，它会变为 0px，然后这会使页面变短。只需将“选项卡窗格”替换为图像幻灯片即可。

他提供的代码根本不起作用，但我会在这里发布；我认为它可以定制工作：

```
jQuery('#photo-rotator').tabs({
        fx: { opacity: 'toggle' },
        select: function(event, ui) {
                jQuery(this).css('height', jQuery(this).height());
                jQuery(this).css('overflow', 'hidden');
        },
        show: function(event, ui) {
                jQuery(this).css('height', 'auto');
                jQuery(this).css('overflow', 'visible');
        }
}); 
```

希望这可以帮助

# c - 将双精度（不是指针）转换为 void 指针

> ID：10281329
> 
> 赞同：0
> 
> 时间：2012-04-23T13:19:38.247
> 
> 标签：c, pointers, casting

以这种方式投射是否合法？

```
void probability(void **value)
{
    double v = 0.1234;
    *value = (void *) *(uint64_t *) &v;
} 
```

我知道，这是一件坏事，但我 100% 确定`sizeof(double)`= `sizeof(void *)`=`sizeof(uint64_t)`在目标机器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T13:28:01.223

这是未定义的行为，因为您的代码违反了严格的别名规则。

允许编译器假设指向大多数不相关类型的指针不指向相同的内存。您创建了一个`uint64_t *`（强制转换的结果），它指向“实际上”是双精度的内存，并且您希望从该指针中读取数据，从而为您提供一个与双精度有关的值。

严格别名规则的目的是允许编译器进行各种优化以破坏此代码 - 最有可能的是编译器可以“推断”`v`未使用的并且永远不会初始化它，因为它从未通过任何*有效*名称访问或指针，只有无效的别名。

我没有检查过这个特定的代码，但是 GCC 实际上在高度优化时确实依赖于严格的别名，并且会破坏这种代码。

解决严格混叠问题的方法是`memcpy`：

```
assert(sizeof(*value) == sizeof(v));
memcpy(value, &v, sizeof(*value)); 
```

完成此操作后，或者如果您使用的编译器不依赖于严格的别名，或者可以避免这种依赖（`--no-strict-aliasing`），那么您仍然会遇到问题。该标准实际上并不能保证与地址大小相同的每个数值实际上都可以用`void*`. 例如，实现（实际上）在指针中具有填充位是合法的，并且如果您尝试在填充位中创建具有错误值的指针值，则会崩溃。实际上，这不会发生在您称为“正常”的任何硬件上，但是该标准不允许您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:23:05.303

严格来说，没有。那个部分

```
*(uint64_t*)&v; 
```

是未定义的行为。`uint64_t`to的转换`void*`是合法的，但可能没有意义，这种转换是实现定义的（6.3.2.3）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:23:01.123

未定义的行为。不管你有多确定。

# jquery - 当使用向上/向下键更改可选选项时，jQuery 更改功能在 IE 和 FF 中不起作用

> ID：10281330
> 
> 赞同：1
> 
> 时间：2012-04-23T13:19:38.370
> 
> 标签：jquery, internet-explorer, firefox

我有这个代码`jQuery("#id").change(function (){ // do something});`

其中“id”是一个标签的 id。当我用鼠标更改可选选项时它工作正常，但如果我使用上下键更改它们，它仅适用于 chrome，不适用于 FF 或 IE。

# c# - 在单元测试中合适使用元组<>？

> ID：10281331
> 
> 赞同：3
> 
> 时间：2012-04-23T13:19:39.930
> 
> 标签：c#, unit-testing, .net-4.0, tuples

在编写一组单元测试（针对现有的遗留组件）时，我想要一种方法来关联错误代码列表（将由我模拟的服务返回）和相应错误消息列表（我的被测组件将返回）。

似乎使用 a`List<Tuple<string, string>>`是定义这种关联的一种很好的简单方法。

```
var errorCodesAndMessages = new List<Tuple<string, string>>
{
    Tuple.Create("CODE1", "Error message 1"),
    Tuple.Create("CODE2", "Error message 2")
    // etc...
}; 
```

然后，在我的单元测试中，我可以遍历`errorCodesAndMessages`，设置我的模拟服务以返回第*n 个*错误代码，并断言被测组件返回第*n 个*错误消息。

这是很好地使用 - 还是滥用 - `Tuple<>`？

## 编辑

回应表明，`Dictionary<string, string>`在这种情况下会更好。我不得不同意。但是，如果（出于某种原因）我们需要关联三段数据（例如错误代码、用户显示的错误消息和技术错误消息）怎么办？

那么这会是一个很好的用途`Tuple<>`吗？

```
Tuple.Create("CODE1", "User error message", "Technical error message") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:24:03.320

元组仍然可以工作，但是如果您想跟踪有关错误代码的详细信息，我认为如果您创建一个简单的类来编写错误代码的详细信息并仍然使用字典来保存代码，那么代码将更具可读性和可维护性跟踪错误代码键。

```
Dictionary<string, ErrorCodeDetails> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T13:25:28.480

这似乎`Dictionary<string, string>`是一种更好的处理方法，因为假设您不会有重复的错误代码是相当安全的。`Dictionary`还具有对键进行恒定时间查找的优点。

```
var errorCodesAndMessages = new Dictionary<string, string>()
{
    { "CODE1", "Error message 1" },
    { "CODE2", "Error message 2" },
    // etc...
}; 
```

代码也更短。

# c++ - C++ 重载转换运算符

> ID：10281334
> 
> 赞同：8
> 
> 时间：2012-04-23T13:19:42.100
> 
> 标签：c++, operator-overloading, const-correctness

我正在尝试创建一个允许隐式转换为某些内置类型的类，例如 unsigned long int 并且因为我试图尽可能正确地做到这一点（这是我在 C++ 中的第一个重要项目），所以我遇到了一个奇怪的问题关于 const 正确性的问题：

这有效：

```
#include <iostream>

class CustomizedInt
{
private:
    int data;
public:
    CustomizedInt();
    CustomizedInt(int input);
    operator unsigned long int () const
    {
        unsigned long int output;
        output = (unsigned long int)data;
        return output;
    }
};

CustomizedInt::CustomizedInt()
{
    this->data = 0;
}

CustomizedInt::CustomizedInt(int input)
{
    this->data = input;
}

int main()
{
    CustomizedInt x;
    unsigned long int y = x;

    std::cout << y << std::endl;

    return 0;
} 
```

但是这个：

```
#include <iostream>

class CustomizedInt
{
private:
    int data;
public:
    CustomizedInt();
    CustomizedInt(int input);
    operator unsigned long int () const;
};

CustomizedInt::CustomizedInt()
{
    this->data = 0;
}

CustomizedInt::CustomizedInt(int input)
{
    this->data = input;
}

CustomizedInt::operator unsigned long()
{
    unsigned long int output;
    output = (unsigned long int)data;
    return output;
}

int main()
{
    CustomizedInt x;
    unsigned long int y = x;

    std::cout << y << std::endl;

    return 0;
} 
```

在 Visual Studio 2010 中给了我这个错误：`error C2511: 'CustomizedInt::operator unsigned long(void)' : overloaded member function not found in 'CustomizedInt'`

现在，如果我从运算符定义中删除关键字 const，一切正常。这是一个错误吗？我读到我应该在每个（公共）方法/运算符之后使用 const 关键字，以便清楚地表明它不会以任何方式改变当前对象。

另外，我知道定义这样的运算符可能是不好的做法，但我不确定我是否完全理解相关的警告。有人可以概述一下吗？只定义一个名为 ToUnsignedLongInt 的公共方法会更好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T13:26:43.913

函数签名与函数定义不匹配。

```
operator unsigned long int () const; 
```

和

```
CustomizedInt::operator unsigned long()    { ... }
                                       ^^^
                                   const missing 
```

在这种情况下，您应该将转换运算符标记为，`const`因为它不会影响对象的内部状态。

此外，使用构造函数初始化列表来初始化您的成员变量。

```
CustomizedInt::CustomizedInt()
: data()
{
}

CustomizedInt::CustomizedInt(int input)
: data(input)
{
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T13:24:55.167

您*可以*从声明中删除`const`，但您几乎可以肯定想要将其*添加*到定义中：

```
CustomizedInt::operator unsigned long() const
{
    unsigned long int output;
    output = (unsigned long int)data;
    return output;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:23:54.313

是的，如果您的成员函数不影响对象的逻辑状态，那么您确实应该使用 后缀它`const`，以便编译器强制执行。

但是那样的话，还需要`const`在定义函数体的时候加上！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:28:05.010

您只需要将相同的函数原型复制到实现中。IE。

```
CustomizedInt::operator unsigned long int() const 
```

# sql - 将 DateTime 字段的日期部分更新为 Lastday-SQL

> ID：10281335
> 
> 赞同：2
> 
> 时间：2012-04-23T13:19:44.497
> 
> 标签：sql, tsql, sql-server-2005

我正在使用 SQL Server 2005。

在我的一个存储过程中，我有一个名为`@pstatDate`type的参数`DateTime`。

我必须简单地将参数的 datePart 更新为该月的 Lastday。

例如，如果日期是`Apr 23 2012 2:15PM`我需要它更新它`Apr 30 2012 2:15PM`

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:22:56.533

也许是这样的：

```
DECLARE @Today DATETIME
SET @Today=GETDATE()

SELECT DATEADD(DAY,-DAY(DATEADD(MONTH,MONTH(@Today)+1,@Today)),
DATEADD(MONTH,1,@Today)) 
```

你也可以这样做：

```
SELECT @Today+datediff(day, @Today, dateadd(month, 1, @Today))-
DATEPART(day,@Today) 
```

就像@Aaron Bertrand 说的：

> 我会小心使用隐式日期数学（@Today+...），因为这种语法在较新的数据类型上会失败（OP 最终可能会离开 SQL Server 2005 并被 DATE 或 DATETIME2 所吸引，或者其他读者可能已经使用日期等）

所以根据那个然后是这样的：

```
SELECT DATEADD(DD,datediff(day, @Today, dateadd(month, 1, @Today))-
DATEPART(day,@Today),@Today) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:23:00.827

```
DECLARE @pstatDate DATETIME;
SET @pstatDate = 'Apr 23 2012 2:15PM';

SELECT DATEADD(MONTH, 1, DATEADD(DAY, 0-DAY(@pstatDate), @pstatDate)); 
```

结果：

```
-----------------------
2003-04-30 14:15:00.000 
```

# c# - XAML 中的通用 IValueConverter C# WPF 用法？

> ID：10281340
> 
> 赞同：1
> 
> 时间：2012-04-23T13:20:00.033
> 
> 标签：c#, wpf, xaml, generics, ivalueconverter

基本上我在[这里](https://stackoverflow.com/questions/7405473/reversed-listbox-without-sorting)使用了发布的转换器，只是将数据类型更改为泛型。如何在 XAML 中使用通用转换器？

```
public class ReverseListConverter<T> : MarkupExtension, IValueConverter
{
    public ReverseListConverter()
    {
    }

    private ObservableCollection<T> _reversedList;

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        _reversedList = new ObservableCollection<T>();

        var data = (ObservableCollection<T>)value;

        for (var i = data.Count - 1; i >= 0; i--)
            _reversedList.Add(data[i]);

        data.CollectionChanged += DataCollectionChanged;

        return _reversedList;
    }

    void DataCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        var data = (ObservableCollection<T>)sender;

        _reversedList.Clear();
        for (var i = data.Count - 1; i >= 0; i--)
            _reversedList.Add(data[i]);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

在转换器通用之前，我刚刚使用

```
ItemsSource="{Binding Mails, Converter={tools:ReverseListConverter}}" 
```

有没有办法用 XAML 中的通用转换器做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T13:28:25.957

您可以忘记使通用转换器成为标记扩展，您不能简单地在 XAML 中创建通用对象（[在*某些*情况下，您可以](http://msdn.microsoft.com/en-us/library/ee956431.aspx)在 .NET 4 中，不知道 4.5 中是否有任何更改）。

创建实例的一种方法是使用为您构造实例的辅助类（我在[另一个问题的答案](https://stackoverflow.com/questions/8235421/how-do-i-set-wpf-xaml-forms-design-datacontext-to-class-that-uses-generic-type/8235459#8235459)中写了一个）。

# oracle - oracle怎么写一个存储过程？

> ID：10281348
> 
> 赞同：0
> 
> 时间：2012-04-23T13:20:33.333
> 
> 标签：oracle, stored-procedures, cursor

我是 oracle 新手，所以不确定如何在 oracle 中编写存储过程。目前我正在谷歌上搜索并阅读一些关于 Oracle SP 的网上文章/博客。我开始对此有了一些想法。即使这样，我也有以下几个问题。

我想做的是，

我有一个 Employee 表，其中包含 emp_id、Region、Division、Product、Title 等。

我还有 emp_update 表，其中包含 emp_id、列（更改的内容）、old_value、new_value 和日期。

例如，emp_update 表将有一行 for emp_id = 10，表示区域在 4 月 30 日从亚洲更改为英国。

同一 emp 的另一行表示产品在 4 月 30 日从 A 更改为 B。

因此，同一员工和同一日期的多个条目。

现在在那个特定的日期，我正在运行一个 cron 作业，它将运行这个 Sp 以将员工表更新为这些更新。

例如，在 4 月 30 日，更新员工集 region = UK，Product = B，其中 emp_id = 10。

我想为员工运行一条更新语句，其中包含该日期来自 emp_update 表的所有更新。

所以基本上，

从 emp_update 获取所有员工，并在今天更新。遍历员工更新，将它们组装在单个更新语句中，然后执行该更新查询。对每个员工重复。

请帮忙

**编辑1：-**

```
 CREATE OR REPLACE
PROCEDURE SP_RUN_EMPLOYEE_UPDATES 
IS

 CURSOR 
    c_emp 
 IS
    SELECT DISTINCT(employee_id) as employee_id FROM BI_EMPLOYEE_UPDATE WHERE EFFECTIVE_DATE = to_date('30-Apr-2012','dd-mm-yy');

BEGIN

FOR employee in c_emp

  LOOP

    CURSOR 
        c_emp_update 
    IS
      SELECT * FROM BI_EMPLOYEE_UPDATE WHERE employee_id = :employee.employee_id AND EFFECTIVE_DATE = to_date('30-Apr-2012','dd-mm-yy');

    FOR emp_update in c_emp_update
    LOOP

  --      dbms_output.put_line(emp_update.column_name);
    END LOOP;

  END LOOP;

END; 
```

目前这是我到目前为止所做的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:55:34.937

这个问题似乎不是关于存储过程，而是更多关于创建动态查询。基本上，你想要这个：

1.  Cron 作业调用存储过程
2.  Proc 将遍历`emp_update`具有今天日期的记录，按以下方式排序`employee_id`
3.  您将根据查询中的值开始为更新语句的*集合表达式*构建动态 SQL 。只需将“COLUMN_NAME = NEW_VALUE”一遍又一遍地连接到该employee_id/date 组合的每一列。
4.  使用模板构建您的 SQL `UPDATE EMP SET <previous string here> WHERE EMPLOYEE_ID = <emp_id>`。
5.  执行动态更新sql

# sql - 测试网站是否易受 Sql 注入攻击

> ID：10281349
> 
> 赞同：20
> 
> 时间：2012-04-23T13:20:41.307
> 
> 标签：sql

我正在阅读有关 sql 注入的信息，如果有一个用户可以输入他的用户名和登录的表单，我了解它是如何工作的。我不明白的是没有登录页面的网站如何容易受到 sql 注入的攻击。

[http://thecybersaviours.com/how-to-find-out-if-a-website-is-vulnerable-to-sql-injection](http://thecybersaviours.com/how-to-find-out-if-a-website-is-vulnerable-to-sql-injection)

它说只需附加一个'或''='来测试它。我不明白这如何帮助确定是否存在错误。查询在哪里构建。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T13:35:24.573

SQL注入是试图通过网站界面向数据库发出SQL命令，以获取其他信息。即，该信息是存储的数据库信息，例如用户名和密码。

保护附加到数据库实例的任何脚本或页面的第一条规则是**不信任用户输入**。

您的示例试图在 SQL 语句中结束错误引用的字符串。要理解这一点，首先需要[了解 SQL 语句](http://en.wikipedia.org/wiki/SQL)。在您将 a 添加`'`到参数的示例中，您的“注入”希望使用以下类型的语句：

> SELECT username,password FROM users WHERE username='$username'

通过将 a 附加`'`到该语句，您可以添加其他 SQL 参数或查询。：`' OR username --`

> SELECT username,password FROM users WHERE username='' OR username -- '$username

*那*是一种注入（一种类型；查询重塑）。用户输入成为预先编写的 SQL 语句中的*注入语句。*

SQL注入方式一般分为三种：

*   查询重塑或重定向（上）
*   基于错误消息（没有这样的用户/密码）
*   盲注

阅读[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)、[如何测试漏洞](http://www.testingsecurity.com/how-to-test/injection-vulnerabilities/SQL-Injection)、[理解和克服 SQL 注入，以及 StackOverflow 上](http://www.lassosoft.com/Understanding-and-Overcoming-SQL-Injection)[关于避免注入](https://stackoverflow.com/questions/1973/what-is-the-best-way-to-avoid-sql-injection-attacks)的这个问题（和相关问题）。

编辑：

至于测试您的站点以进行 SQL 注入，请理解它比“附加符号”要复杂得多。如果您的网站很重要，并且您（或您的公司）负担得起，请聘请专业的渗透测试员。如果做不到这一点，[这个伟大的例子/证明](http://www.unixwiz.net/techtips/sql-injection.html)可以向您展示一些可能用于执行注入测试的常用技术。还有[SQLMap](http://sqlmap.sourceforge.net/)可以自动化一些 SQL 注入和数据库接管场景的测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T13:28:35.153

SQL 注入可以在用户可以影响的任何输入上完成，这些输入在用于查询之前没有正确转义。

一个示例是这样的 get 变量：

```
http//www.example.com/user.php?userid=5 
```

现在，如果随附的 PHP 代码如下所示：

```
$query = "SELECT username, password FROM users WHERE userid=" . $_GET['userid'];
// ... 
```

您也可以在这里轻松地使用 SQL 注入：

```
http//www.example.com/user.php?userid=5 AND 1=2 UNION SELECT password,username FROM users WHERE usertype='admin' 
```

（当然，空格必须替换为`%20`，但这更具可读性。此外，这只是一个做出更多假设的示例，但想法应该很清楚。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:23:49.700

来自客户的任何输入都是易受攻击的方式。包括所有表格和查询字符串。这包括所有 HTTP 动词。

有 3rd 方解决方案可以抓取应用程序并检测何时可能发生注入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:24:51.977

登录页面并不是数据库驱动网站中唯一与数据库交互的部分。

任何用于构建数据库查询的用户可编辑输入都是 SQL 注入攻击的潜在入口点。攻击者可能不一定通过这种攻击以管理员身份登录站点，但可以做其他事情。他们可以根据应用程序与数据库交互的性质更改数据、更改服务器设置等。

将 a 附加`'`到输入通常是一个很好的测试，可以查看它是否会产生错误或在网站上产生意外行为。这表明用户输入正在用于构建原始查询，而开发人员没想到会出现单引号，这会改变查询结构。

请记住，一个页面可能对 SQL 注入是安全的，而另一页面可能不是。例如，登录页面可能会针对此类攻击进行强化。但是网站其他地方的不同页面可能是敞开的。因此，例如，如果想以管理员身份登录，则可以使用其他页面上的 SQL 注入来更改管理员密码。然后返回完全不可注入 SQL 的登录页面并以管理员身份登录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:24:25.557

测试必须在查询数据库的页面上完成，所以是的，通常这是一个登录页面，因为它是可能造成最大危害的页面，但也可能是一个不安全的页面。

通常，您会在安全登录后进行数据库查询，但是如果您只有项目列表或您不在乎的东西，如果世界看到黑客可以在查询字符串的末尾附加一些 sql 注入。

SQL 注入的关键是进行注入的人必须知道您正在查询数据库，因此如果您不查询数据库，则无法进行 sql 注入。如果您的表单正在提交到数据库，那么是的，他们可以进行 SQL 注入。使用存储过程来选择/插入/更新/删除或确保准备或转义所有将访问数据库的语句始终是一个好习惯。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T13:26:22.127

保护自己的最简单方法是使用存储过程而不是内联 SQL 语句。

然后使用“最小特权”权限，只允许访问存储过程而不是直接访问表。

# plone - Plone 3.3 -> 4 迁移：缺少 setup_tool.setImportContext()

> ID：10281354
> 
> 赞同：2
> 
> 时间：2012-04-23T13:21:04.460
> 
> 标签：plone

我正在将一些旧产品更新到 4.x 代码库。

这是旧 Install.py 中的常见模式：

```
def install(self):
    out=StringIO()

    # Install CSS, JS and other GenericProfile stuff
    setup_tool = getToolByName(self, 'portal_setup')
    original_context = setup_tool.getImportContextID()
    setup_tool.setImportContext('profile-Products.NoneMultiSelectionWidget:default')
    setup_tool.runAllImportSteps() 
```

但是， setup_tool.setImportContext() 方法不再存在。什么是正确的替换代码？我需要替换代码还是自动获取 GenericSetup XML 文件？

追溯：

```
 - __traceback_info__: ('Products.NoneMultiSelectionWidget',)
     File "/Users/moo/code/buildout-cache/eggs/Products.ExternalMethod-2.13.0-py2.6.egg/Products/ExternalMethod/ExternalMethod.py", line 234, in __call__
       return f(*args, **kw)
      - __traceback_info__: ((<PloneSite at /plone>,), {}, None)
     File "/Users/moo/code/x/src/x/Products.NoneMultiSelectionWidget/Products/NoneMultiSelectionWidget/Extensions/Install.py", line 19, in install
       setup_tool.setImportContext('profile-Products.NoneMultiSelectionWidget:default')
   AttributeError: setImportContext 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:04:57.573

我认为 setImportContext 在 Plone 3 中已经被弃用，但我不确定。无论如何，不​​应该再显式设置导入上下文，所以不要这样：

```
setup_tool = getToolByName(self, 'portal_setup')
original_context = setup_tool.getImportContextID()
setup_tool.setImportContext('profilename')
setup_tool.runAllImportSteps()
# ... restore original context ... 
```

现在很简单：

```
setup_tool = getToolByName(self, 'portal_setup')
setup_tool.runAllImportStepsFromProfile('profilename') 
```

此外，只要您的软件包只有一个 GS 配置文件，您就根本不需要此 Extensions/install.py 代码，因为配置文件会自动获取。

# php - 在 foreach 循环中从 DOMNode 中删除所有属性

> ID：10281355
> 
> 赞同：5
> 
> 时间：2012-04-23T13:21:05.837
> 
> 标签：php, dom

所以这不起作用：

```
 foreach ($element->attributes as $attribute) {
            $element->removeAttribute($attribute->name);
        } 
```

如果节点有 2 个属性，它只删除第一个。

我尝试克隆 DOMNamedNodeMap 没有成功：

```
 $attributesCopy = clone $element->attributes;
        foreach ($attributesCopy  as $attribute) {
            $element->removeAttribute($attribute->name);
        } 
```

仍然只删除第一个属性。

**这个问题在这里解释：http: [//php.net/manual/en/class.domnamednodemap.php](http://php.net/manual/en/class.domnamednodemap.php) 显然这是一个特性，而不是一个错误。但是评论中没有提到解决方案。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T13:37:25.150

简单地：

```
$attributes = $element->attributes;
while ($attributes->length) {
    $element->removeAttribute($attributes->item(0)->name);
} 
```

由于属性集合会在删除属性后立即重新索引，因此只需继续删除属性零，直到没有留下任何属性。

# clearcase - 是否可以在流上启用后期构建选项 - RTC 源代码控制？

> ID：10281356
> 
> 赞同：1
> 
> 时间：2012-04-23T13:21:09.313
> 
> 标签：clearcase, rtc

如果交付的更改破坏了构建，我已经设置了以下内容以防止开发人员交付到流：

我添加了一个流，它使用“构建后交付”将更改交付到单独的流。在构建定义上，我需要指定一个工作区来构建，但我需要从流中构建。从工作区构建仅构建单个开发人员本地的更改，而从流构建将包含多个更改。是否可以在构建定义上启用构建后选项，并且还可以从流构建而不是从工作区构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:36:18.113

[关于“如何在 Rational Team Concert 3.0.1 中保持您的流顺畅流动](https://jazz.net/library/article/649#Example_postBuildDeliver)”中描述的 RTC“构建后交付” ，该步骤是关于构建工作空间后要做什么。

但是，与 ClearCase（“工作空间”或 UCM 快照视图总是与 UCM 流相关联）相反，构建定义（有或没有“构建后交付”）总是与工作空间相关联。
如“[创建 Build Forge 构建定义](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.build.doc/topics/t_buildforgebuilddef.html)”中所述：

> 构建定义必须引用专用的构建工作区，而不是团队流，以便构建与流中正在进行的更改隔离。

当您创建所述构建存储库工作区时，您将关联一个流：

> 在 New Repository Workspace 向导的 Select a stream 页面上，选择`Flow with a stream`并在下部窗格中**选择要构建的存储库流**。
> **此选择使存储库工作区能够接受来自流的更改**。

因此，您总是从（构建）工作区构建。即使您没有激活“构建后交付”选项。
构建工作区的定义决定了您从中接受更改的 Stream。
每次启动构建时，都将接受所述更改（从流到构建工作区）。
“变更集”是指任何开发人员在构建工作区定义中提到的“流”上交付的任何变更集。

# iphone - iPhone RestKit 是否可以将核心数据对象图转换为 JSON？

> ID：10281358
> 
> 赞同：3
> 
> 时间：2012-04-23T13:21:14.617
> 
> 标签：iphone, objective-c, json, core-data, restkit

我正在为我的一个项目使用 RestKit 框架。它包括一个如何使用对象映射将 JSON 对象转换为核心数据图的示例。如果可能发生相反的情况，我正在徘徊 -**可以将使用 RestKit 的核心数据实体转换回 JSON 表示吗？**

我找到了`RKObjectSerializer`课程，但我似乎无法让它工作 - 我得到的序列化对象是 nil

```
-(void)doCoreDataToJSONConversion
{
    Article* article = [_articles objectAtIndex:0];
    RKManagedObjectMapping* articleMapping = [RKManagedObjectMapping mappingForClass:[Article class]];
    NSAssert(articleMapping!=nil,@"article mapping is nil!");
    NSLog(@"%@",[article description]);

    RKObjectSerializer* serializer =[RKObjectSerializer serializerWithObject:article mapping:articleMapping];

    NSError* error = nil;
    NSMutableDictionary* serializedObject = [serializer serializedObject:&error];

    if(error!=nil)
    {
        NSLog(@"!!!!! Error: %@",[error localizedDescription]);
    }

    //prints nil
    NSLog(@"Serialized Object: %@", [serializedObject description]);
} 
```

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:36:45.680

无法准确地告诉您有关 RestKit 的信息，但是如果您只看一下 Marcus Zarra 的这个绝对精彩的回答，您就可以轻松地将所有核心数据图转换为 JSON 并返回

[iPhone 上的 JSON 和核心数据](https://stackoverflow.com/questions/2362323/json-and-core-data-on-the-iphone/2363996#2363996)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:39:13.873

我最终使用这些方法将核心数据对象转换为 JSON。要反序列化这些对象，我需要定义不同的映射类：RKManagedObjectMapping，它与常规对象映射略有不同。

```
-(void)setupObjectSerializationMapping
{
    RKObjectManager *objectManager = [RKObjectManager sharedManager ] ;
    RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Article class]];

    [mapping mapAttributes:@"articleID", @"title", @"body", nil];

    //********************************    

    RKObjectMapping *imageMapping = [RKObjectMapping mappingForClass:[EventImage class]];

    [imageMapping mapAttributes:@"createDate", @"localFilePath", nil];
    [objectManager.mappingProvider addObjectMapping:imageMapping];
    [objectManager.mappingProvider setSerializationMapping:[imageMapping inverseMapping] forClass:[EventImage class]];
    [objectManager.mappingProvider setMapping:imageMapping forKeyPath:@"eventImages"];

    //********************************    

    RKObjectMapping *eventMapping = [RKObjectMapping mappingForClass:[Event class]];

    [eventMapping mapAttributes:@"createDate", @"note", nil];
    [eventMapping mapRelationship:@"eventImages" withMapping:imageMapping];

    [objectManager.mappingProvider addObjectMapping:eventMapping];
    [objectManager.mappingProvider setSerializationMapping:[eventMapping inverseMapping] forClass:[Event class]];
    [objectManager.mappingProvider setMapping:eventMapping forKeyPath:@"events"];

    //******************************** 
    //setup App user mapping
    RKObjectMapping *userMapping = [RKObjectMapping mappingForClass:[AppUserSubclass class]];

    [userMapping mapAttributes:@"userID",@"firstName", @"lastName",@"localDataFilepath", nil];
    [userMapping mapRelationship:@"events" withMapping:eventMapping];
    [objectManager.mappingProvider addObjectMapping:userMapping];
    [objectManager.mappingProvider setSerializationMapping:[userMapping inverseMapping] forClass:[AppUserSubclass class]];
    [objectManager.mappingProvider setMapping:userMapping forKeyPath:@"appUser"];

}

-(NSString*)generateLocalJSONData
{

    NSString* folderPath = [self dataFolderPath];
    // remember what the file was called. This will not include the documents directory and will be the same on all machines.
    NSString* localFileName = [self fileName];

    NSString* dataFile = [self fullDocumentsFilePath];
    self.localDataFilepath = dataFile;

    NSAssert(self.localDataFilepath!=nil,@"failed to save local data path");
    //********************************

    NSError* error = nil;

    //app user subclass is the same as AppUser, but is used to differentiate between file based mapping and core data mapping
    RKObjectMapping *serMap = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[AppUserSubclass class]];
    NSDictionary *d = [[RKObjectSerializer serializerWithObject:self mapping:serMap] serializedObject:&error];

    if(error!=nil)
    {
        NSLog(@"!!!!! Error: %@",[error localizedDescription]);
    }

    NSString* dataContents = [d JSONString];
    BOOL success =  [dataContents writeToFile:dataFile atomically:YES encoding:NSUTF8StringEncoding error:nil];
    if(!success)
    {
        NSLog(@"Error writing to data file!");
    }
    [[AppUser managedObjectContext] save:nil];

    return dataFile;

} 
```

# c++ - DirectSound：简单的 pcm 播放

> ID：10281360
> 
> 赞同：4
> 
> 时间：2012-04-23T13:21:23.240
> 
> 标签：c++, winapi, directsound

我正在使用 DirectSound 并尝试使用以下代码播放简单的随机 wav 数据：

```
int _tmain(int argc, _TCHAR* argv[])
{
    LPDIRECTSOUND8 dsound;
    WAVEFORMATEX format;
    const int numchunks = 8;
    LPDIRECTSOUNDBUFFER dsbuf;
    DSBUFFERDESC buf_format;
    const int chunksize = 1024;
    HRESULT res;
    uint8_t *data1,*data2;
    uint32_t size1,size2;

    memset(&format,0,sizeof(WAVEFORMATEX));

    format.wFormatTag = WAVE_FORMAT_PCM;
    format.nChannels  = 1;
    format.wBitsPerSample = 16;
    format.nSamplesPerSec = 44100;
    format.nBlockAlign = format.nChannels * format.wBitsPerSample / 8;
    format.nAvgBytesPerSec = format.nBlockAlign * format.nSamplesPerSec ;   
    format.cbSize = 0;

    assert(DirectSoundCreate8(NULL,&dsound,NULL) == DS_OK);

    assert(dsound->SetCooperativeLevel(GetDesktopWindow(),DSSCL_PRIORITY) == DS_OK);

    memset(&buf_format,0,sizeof(DSBUFFERDESC));
    buf_format.dwSize = sizeof(buf_format);
    buf_format.dwFlags = DSBCAPS_GETCURRENTPOSITION2;
    buf_format.dwFlags |= DSBCAPS_STICKYFOCUS;
    buf_format.dwBufferBytes = numchunks * chunksize;
    buf_format.dwReserved = 0;
    buf_format.lpwfxFormat = &format;

    res = dsound->CreateSoundBuffer(&buf_format,&dsbuf,NULL);
    assert(res == DS_OK );

    srand(time(NULL));

    assert(IDirectSoundBuffer_Lock(dsbuf,0,buf_format.dwBufferBytes,(LPVOID *)&data1,(LPDWORD)&size1,
                            (LPVOID *)&data2,(LPDWORD)&size2,DSBLOCK_ENTIREBUFFER) == DS_OK);

    cout << "got buffer with size "<<size1<<endl;

    for (uint32_t i = 0 ; i < size1; i ++)
        data1[i] = rand() % 256;

    IDirectSoundBuffer_Unlock(dsbuf,
                                  (LPVOID) data1, (DWORD)size1,
                                  (LPVOID) data2, (DWORD)size2);

    assert(IDirectSoundBuffer_Play(dsbuf,0,0,DSBPLAY_LOOPING) == DS_OK);

    cin.get();

    return 0;
} 
```

但在输出时我只听到沉默。输出也没有错误，我的 data1 确实是一些随机的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-01T14:02:49.810

我遇到了你的问题，我通过设置`buf_format.dwFlags`来 修复你的代码 `buf_format.dwFlags = DSBCAPS_CTRLPOSITIONNOTIFY | DSBCAPS_GETCURRENTPOSITION2 |DSBCAPS_GLOBALFOCUS | DSBCAPS_LOCSOFTWARE | DSBCAPS_CTRLPOSITIONNOTIFY | DSBCAPS_CTRLVOLUME | DSBCAPS_GETCURRENTPOSITION2;`

# position - 查找 jQuery 可拖动光标位置

> ID：10281364
> 
> 赞同：0
> 
> 时间：2012-04-23T13:21:31.070
> 
> 标签：position, jquery-ui-draggable

我有一个垂直`<ul>`列表，其中包含`draggable`附加了 jQuery 事件处理的项目。当拖动任何列表项时，*所有*列表项都将被拖动并在拖动时呈现。

问题：我的`helper`函数在不正确的垂直位置呈现被拖动的项目，除非最上面的列表项目是被拖动的项目（即用鼠标按钮单击并拖动）。这是因为我不知道拖动项的垂直位置。如果我知道，我可以设置`cursorAt` `top`属性来抵消它。

伪代码：

```
$(list items).draggable({
    cursorAt: {
       cursor: "crosshair",
       left: 5,
       top: ? // need to know vertical position of dragged item here...
    }, 
```

所以我的问题是，有没有办法找到被拖动项目的垂直位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:35:36.690

尝试了很多方法将点击位置变为`top`属性，但它不起作用。

所以我想出了一个解决方法。我没有用偏移可拖动对象`cursorAt`，而是使用 CSS hack（使用`margin-top`）来移动拖动时呈现的内容（由`helper`函数设置）：

```
 helper: function(e, ui) {
        var compensateUp = e.pageY;
        var helperHtml='<ul style="margin-top:-' + compensateUp + 'px;">';
        ... 
```

在所有主要浏览器中都像魅力一样工作。

# delphi - 数组元素的校验和

> ID：10281365
> 
> 赞同：3
> 
> 时间：2012-04-23T13:21:31.773
> 
> 标签：delphi, multidimensional-array, checksum

我有一个`Bytes`定义如下的多维数组：

```
type
  TRow = array[0..6] of Byte;
var
  All: array[0..19112079] of TRow; 
```

现在，我想生成数组包含的每一行的唯一校验和并保存到文件中，如下所示：

```
var
  I: Integer;
begin
  for I := 0 to 19112079 do
  begin
    Checksum := GenerateChecksum(All[I]);
    Writeln(F, Checksum);
  end;
end; 
```

我应该如何处理该`GenerateChecksum()`功能？我试过`xor`and `CRC32`，但它们并不真正适合这项任务，因为它们返回重复的值。我想为每一行生成一个**唯一的校验和。**

**编辑** 哦，校验和应该以允许比较行的方式计算。我想获取不同行的两个校验和，并判断其中一个是否大于另一个、小于另一个或相等。有没有机会实现这样的目标？

**EDIT2** 相邻两行中的示例数据：

```
Row x - 1: 120, 444, 323, 984, 1024, 76, 130
Row x:     120, 444, 323, 984, 1024, 76, 222
Row x + 1: 120, 444, 323, 984, 1024, 76, 121
. . .
Row x + n: 120, 444, 323, 984, 6333, 33, 935 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T13:38:50.887

你的数据对我来说听起来不连贯。您定义了一个`array[0..6] of byte`，但在您的数据示例中，您的值超出了字节范围，即 0..255，如 444、323、1024... 某处有错误。

由于每行只包含 7 个字节的数据，因此最简单的方法是将其包装成一个`Int64`值。这不是一个 crc，而只是一个类型转换。所以根据定义，这里不会有任何冲突——这是一个完美的哈希。

这是某种“穷人的哈希”，但这很容易。

```
function HashOf(const Row: TRow): Int64; inline;
begin
  result := PInt64(@Row)^ and $00ffffffffffffff;
end; 
```

我已经定义了这个函数，`inline`因为它会更快。

对于数组中的最后一个，您将有一个字节的内存访问重叠`TRow`，但它会按预期工作。为了避免这种情况，一个更慢但更安全的功能：

```
function HashOf(const Row: TRow): Int64;
begin
  result := 0;
  move(Row,result,sizeof(Row));
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:38:16.680

您将需要将其存储在至少 7 个字节中以获得您想要的唯一性属性。因此，这表明`UInt64`。只需将 a 的 7 个字节复制`TRow`到 a`UInt64`中即可。

```
function PackRow(const Row: TRow): UInt64;
begin
  Result := 0;
  Move(Row, Result, SizeOf(Row));
end; 
```

对于您的要求的排序部分，您可能需要根据行数组的哪一端最重要来反转字节的顺序。

# git - 尝试将 SSH 密钥添加到 Github 时，密钥已在使用中

> ID：10281368
> 
> 赞同：6
> 
> 时间：2012-04-23T13:21:42.627
> 
> 标签：git, ssh, github

我的一位开发人员已经发送了他的 SSH 密钥，以便我可以添加到 Github。

我收到“密钥已在使用”消息。

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T13:24:46.317

他已经有一个 GitHub 帐户。不要添加密钥，添加他的帐户（*Admin/Collaborators*）。

# java - 查看文件是否为空

> ID：10281370
> 
> 赞同：17
> 
> 时间：2012-04-23T13:21:47.400
> 
> 标签：java

> **可能重复：**
> [在 Windows 上的 Java 中检查文件是否为空的最有效方法](https://stackoverflow.com/questions/7190618/most-efficient-way-to-check-if-a-file-is-empty-in-java-on-windows)

如何在 Java 7 中检查文件是否为空？
我使用 ObjectInputStream 中的 available() 方法进行了尝试，但即使文件包含数据，它也始终返回零。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-23T13:26:32.137

```
File file = new File("file_path");
System.out.println(file.length()); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-23T13:23:55.377

```
File file = new File(path);

boolean empty = !file.exists() || file.length() == 0; 
```

可以缩短为：

```
boolean empty = file.length() == 0; 
```

因为根据文档，该方法返回

> 此抽象路径名表示的文件的长度（以字节为单位），如果文件不存在，则为 0L

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T17:01:09.120

```
File file = new File(path);

boolean empty = file.exists() && file.length() == 0; 
```

我想强调的是，如果我们要检查文件是否为空，那么我们必须考虑它是否存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T13:23:15.750

```
BufferedReader br = new BufferedReader(new FileReader("your_location"));     
if (br.readLine()) == null ) {
    System.out.println("No errors, and file empty");
} 
```

请参阅[在 Windows 上的 Java 中检查文件是否为空的最有效方法](https://stackoverflow.com/questions/7190618/most-efficient-way-to-check-if-a-file-is-empty-in-java-on-windows)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T13:23:39.937

根据J2RE javadocs：[http](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#length) ://docs.oracle.com/javase/7/docs/api/java/io/File.html#length ()

```
public long length()
    Returns the length of the file denoted by this abstract pathname. The return value is     unspecified if this pathname denotes a directory. 
```

所以`new File("path to your file").length() > 0`应该做的伎俩。抱歉 bd 之前的回答。:(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T13:28:56.820

```
 File file = new File("path.txt");
        if (file.exists()) {
            FileReader fr = new FileReader(file);
            if (fr.read() == -1) {
                System.out.println("EMPTY");
            } else {
                System.out.println("NOT EMPTY");
            }
        } else {
            System.out.println("DOES NOT EXISTS");
        } 
```

# php - hash() 与 crypt() 函数比较

> ID：10281373
> 
> 赞同：13
> 
> 时间：2012-04-23T13:22:02.843
> 
> 标签：php, encryption, hash, crypt

我目前正在实施登录系统。我想将密码和盐存储在数据库中。现在我发现有一个`hash()`和一个`crypt()`函数似乎做同样的事情（对 SHA512 有效）。

`hash()`比 . 更新并且似乎支持更多的散列算法`crypt()`。还是我应该知道/关心的任何其他差异？

**编辑：**

```
function generatePasswordHash($password){
    $salt = base64_encode(mcrypt_create_iv(8));
    $calculatedPasswordHash = crypt($password, '$1$' . $salt . '$');

    return $calculatedPasswordHash;
} 
```

结果看起来像`$1$Qh6ByGJ9$zLn3yq62egvmc9D7SzA2u.`

这是我的密码检查功能：

```
function checkLoginData($username, $password){
    global $db;

    $sql = "SELECT * FROM users WHERE username = :username";
    $result = $db->ExecuteQuery($sql, array("username"=>$username));

    if(!empty($result)){
        $result = $result[0];
        $savedPasswordHash = $result['password'];
        $splitted = explode("$", $savedPasswordHash);
        $salt = $splitted[2];
        $calculatedPasswordHash = crypt($password, '$1$' . $salt . '$');

        if($savedPasswordHash === $calculatedPasswordHash){
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T13:28:50.147

用于`hash`散列，例如在完整性检查中。它直接使用指定的哈希算法。

`crypt`是一种特殊用途的功能。它用于密码散列和密钥派生。您需要传入一个盐，它间接确定使用的散列方案。即使您选择`CRYPT_SHA512`这也不是普通的 SHA512。这是一个使用 SHA512 作为构建块的密钥派生函数。特别是这样的方案故意缓慢（隐藏暴力攻击）并以安全的方式结合盐和密码。

对于日志系统中的密码散列，`crypt`显然是正确的选择。

# ruby-on-rails - 将多个 ActiveRecord 模型声明/评估到主命名空间的正确方法？

> ID：10281378
> 
> 赞同：1
> 
> 时间：2012-04-23T13:22:19.380
> 
> 标签：ruby-on-rails, activerecord, metaprogramming

想象一个字符串数组，`["User","Article","Image"]`将它们的类声明评估到当前范围的最佳方法是什么？我在想像：

```
array.each do |element|
  instance_eval<<EOF
    class #{element} < ActiveRecord::Base
    end
EOF
end 
```

这是正确的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:47:57.913

关于什么

```
%w(User Article Image).each do |klass|
  create_class(klass, ActiveRecord::Base) do
    # ...whatever
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:43:14.347

这个怎么样？

```
array.each do |element|
  Object.const_set(element, Class.new(ActiveRecord::Base))
end 
```

# javascript - 在纯 javascript 函数中使用 jQuery 语句

> ID：10281383
> 
> 赞同：6
> 
> 时间：2012-04-23T13:22:41.550
> 
> 标签：javascript, jquery

在ready之外的普通javascript函数中使用jQuery语句是好还是坏？如果不是正确的方法是什么？

```
//** End ready **//

function doSomething() {
    selectedClickBoxIndex = parseInt( jQuery('.' + clickBoxOnClass ).attr('value') );

    // Javascript code  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:24:17.137

没有什么不对。当您包含 jquery 文件时，您正在扩展您的功能，可以在任何您想要的地方自由使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:25:57.720

没有什么不妥。jQuery 只是一个 Javascript 库，它们之间没有严格的区分。

不过，您可能想使用该功能`val`：

```
function doSomething() {
  selectedClickBoxIndex = parseInt( jQuery('.' + clickBoxOnClass ).val() );

  // Javascript code  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:24:27.830

这是完全可以接受的；只需确保在 DOM 加载后调用这些函数，无论是从文档准备好还是其他等效函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T13:24:36.437

这一点都没有错。

您要确保在 DOMReady 之前没有对 DOM 节点的引用。无论您使用`$('.someClass')`还是`document.getElementsByClassName`.

您的函数确实进行了这样的引用，但是只要在 DOMReady 之前不调用函数本身就可以了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T13:25:34.183

没有理由不在 document.ready 之外使用它。它使遍历和修改 dom 变得更加容易。

通过许多有用的 jquery 选择器抓取页面上的元素的能力是在其他地方使用它的充分理由。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-23T13:28:38.380

只要在 onLoad 事件之后触发函数 doSomething() ，就完全可以这样做。$(document).ready 只是将 JS 执行推迟到页面完全加载的一种方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-23T13:24:03.157

为什么不这样会减少代码行，并且 jquery 与所有浏览器兼容

# ruby - gem mongo 1.6.2 返回错误的计数值（光标）

> ID：10281385
> 
> 赞同：0
> 
> 时间：2012-04-23T13:22:44.997
> 
> 标签：ruby, mongodb, gem

我正在使用以下代码从 mongo 获取一些东西：

```
class BlockingMongoFetcher
  include MongoConfig

  def initialize
    configure
    @connection = Mongo::Connection.new(@server, @port)
    @collection = init_collection(@connection)
  end

  def fetch(value)
    mongo_cursor = @collection.find({ KEY => value.to_s })

    if mongo_cursor.count == 0
      # do stuff
      return nil
    end

    if mongo_cursor.count > 1
      # do stuff
    end

    mongo_cursor.first
  end
end 
```

init_collection 只是从连接中获取数据库和集合对象。在 fetch 方法中，我使用 count 方法来检查是否有结果。因为我得到了一个 0，应该有 1 个项目，所以我在 gem 中将以下代码添加到 Cursor 类的 count 方法中：

```
if response['n'].to_i == 0
  require "ruby-debug"
  debugger
  puts "stop here"
end 
```

( 响应 = @db.command(command) )

在调试器内

```
@db.command(command)['n'].to_i 
```

返回 1。如果我在 fetch 方法中调用 count 两次（一次不使用输出），一切都很好。我错过了什么吗？缓冲区或缓存问题？然而，这似乎不是确定性的……它只发生在大约 50% 的运行中。Mongodb 是 2.0.2 和 Ruby 1.9.3p125。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:51:03.270

嗯，意想不到的解决方案：

为了插入测试数据，我在规范中使用了以下语句

```
collection.insert @hash 
```

insert 方法有一个选项 :safe，请参阅[API](http://api.mongodb.org/ruby/1.6.2/Mongo/Collection.html#insert-instance_method)。使用默认值 (false)，mongodb 将其异步存储并继续执行代码。如果您事后立即查询，这可能会导致奇怪的行为，例如该值尚未在数据库中。只需使用

```
collection.insert @hash, :safe => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:19:32.367

我怀疑您在某处有错误，并建议您检查游标查询的结果（例如 p collection.find(query).to_a）与集合（例如 p collection.find.to_a）。以下适用于 Ruby 1.9.3、Mongo 2.0.4、mongo-ruby-driver 1.6.2。我希望它有所帮助，也许您可​​以验证它是否也适用于您并且可以收敛到解决方案。

MongoConfig.rb

```
require "mongo"

KEY = 'my_key'

module MongoConfig
  SERVER = 'localhost'
  PORT = Mongo::Connection::DEFAULT_PORT
  DB = 'my_db'
  COLLECTION = 'my_collection'

  attr_accessor :db, :collection

  def configure
    @server = SERVER
    @port = PORT
  end

  def init_collection(connection)
    @db = connection[MongoConfig::DB]
    @collection = @db[MongoConfig::COLLECTION]
    return @collection
  end

end 
```

blocking_mongo_fetcher_test.rb

```
$LOAD_PATH.unshift(File.expand_path("..", __FILE__))

require "test-unit"
require "MongoConfig"
require "BlockingMongoFetcher"

class BlockingMongoFetcherTest < Test::Unit::TestCase

  def setup
    clear_collection
  end

  def clear_collection
    Mongo::Connection.new[MongoConfig::DB][MongoConfig::COLLECTION].remove
  end

  def count_various_ways_and_cursor_twice_test
    value = 'my name'
    query = {KEY => value}
    count_command = {'count' => MongoConfig::COLLECTION, 'query' => { KEY => value} }
    fetcher = BlockingMongoFetcher.new

    assert_equal(0, fetcher.collection.count) # collection count
    assert_equal(0, fetcher.collection.find(query).count) # cursor count
    assert_equal(0, fetcher.db.command(count_command)['n'].to_i) # db command count
    assert_nil(fetcher.fetch(value))

    fetcher.collection.insert({KEY => value})
    fetcher.collection.insert({KEY => 'x'})

    assert_equal(2, fetcher.collection.count) # collection count
    assert_equal(1, fetcher.collection.find(query).count) # cursor count
    assert_equal(1, fetcher.db.command(count_command)['n'].to_i) # db command count
    assert_equal(value, fetcher.fetch(value)[KEY])

    cursor = fetcher.collection.find(query)
    assert_equal(1, cursor.count) # check once
    assert_equal(1, cursor.count) # check twice
  end

  test "basic test" do
    count_various_ways_and_cursor_twice_test
  end

  test "repeated test" do
    100.times do
      clear_collection
      count_various_ways_and_cursor_twice_test
    end
  end

end 
```

# css - 如何检查一个文件是否包含在另一个文件中，忽略空格更改

> ID：10281397
> 
> 赞同：0
> 
> 时间：2012-04-23T13:23:29.870
> 
> 标签：css, file, compression, minify

假设我有一些 css 文件（a.css、b.css、...、e.css），如果你连接并压缩所有 css 文件，你会生成另一个 css 文件（compressed.css）。我现在想检查每个原始 css 文件是否存在于压缩的.css 文件中。unix 或其他地方是否有任何工具可以检查某些文件是否包含在另一个文件中，而忽略空格更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:03:25.980

没有任何工具可以开箱即用地完成您需要的工作。您需要编写自己的脚本或程序来为您执行此操作。[您可以使用diff](http://www.computerhope.com/unix/udiff.htm)中的众多选项之一来编写满足您需要的脚本。

# c++ - 指向指针赋值的指针

> ID：10281400
> 
> 赞同：1
> 
> 时间：2012-04-23T13:23:32.257
> 
> 标签：c++, list, pointers

我有一个这样的链接列表：

```
typedef struct _LIST_ELEMENT
{
    T* data;
    _LIST_ELEMENT* nextItem;
    int index;

}LITEM,*P_LITEM,**PP_LITEM; 
```

和四个指向指针的指针

```
PP_LITEM _head;
PP_LITEM _tail;
PP_LITEM _current;
PP_LITEM _previous; 
```

情况是这样的：

我在列表中有 4 个元素，_head 指向第一个元素，_tail 指向最后一个元素，_current 和 _previous 作为光标一起工作。在我擦除索引为 2 的元素后，列表包含索引为 0,1 和 3 的 3 个元素，并且所有指针都指向右侧。此时如果我这样做（将光标移动到开头）：

```
(*_previous) = (*_tail);
(*_current) = (*_head); 
```

该列表缺少索引为 1 的元素，但所有指针都正确指向。如果我这样做：

```
_previous = &(*_tail);
_current = &(*_head); 
```

一切都很好，什么都没有。

如果有人知道为什么会这样，请赐教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:35:06.633

`(*_previous) = (*_tail)`并且`_previous = &(*_tail)`意味着完全不同的东西。

`(*_previous) = (*_tail)`意思是“将 所指向的事物的值设置`_previous`为等于 所指向的事物的值`_tail`。

`_previous = &(*_tail)`等价于`_previous = _tail`，因此它的意思是“设置`_previous`为指向与 相同的事物`_tail`。

# debian - apt-get 由于公钥不可用，无法验证以下签名

> ID：10281402
> 
> 赞同：0
> 
> 时间：2012-04-23T13:23:37.393
> 
> 标签：debian, gnupg, apt-get

我已经创建了自己的 Debian 存储库并遇到了这个问题。

我知道

*   `--ignore-release-gpg`

或者

*   `gpg --keyserver pgp.mit.edu --recv-keys xxxxxxxxx`
*   `gpg --armor --export xxxxxxxxx | apt-key add -`

两个问题：

1.  为什么 apt-get 不会自动从在线存储库中导入此公钥？
2.  为什么我在其他存储库中看不到此消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:19:16.733

回答 #1：它是其设计中的一种安全机制。APT 不是人类，也不知道该信任什么或信任谁。*只在您信任*的人的密钥环中导入密钥。GPG 验证可防止对包内容的中间人攻击，并验证包的完整性与上传到存档/存储库时的状态相同。这样，即使是官方镜像上的管理员也无法在您不注意的情况下篡改文件。另请参阅[此问题](https://askubuntu.com/questions/52984/should-i-install-unsigned-packages)。

#2：一些密钥是在安装时安装的。Debian 档案和 Debian Developers 的主要密钥都在包中`debian-keyring`，并标记为可信任以与 apt 一起使用。

回到您的目标 - 维护您自己的 Debian 软件包存储库而不会出现这些错误。最好的解决方案是签署存档中的所有包，并让您的存储库的用户安装您的公钥。这是它通常的工作方式，例如参见[VirtualBox.org](https://www.virtualbox.org/wiki/Linux_Downloads)如何处理这个问题。

一些随机陷阱：添加新密钥后不要忘记运行`apt-get update`（或）。`aptitude update`

如果您使用 Ubuntu 并构建免费软件，请考虑使用 PPA。Ubuntu 的 PPA（个人包档案）带有简洁的用户友好脚本来安装存储库以及用于验证的 GPG 密钥。( `apt-add-repository ppa:my-ppa/myarchive`)

一些网站提到如何通过`APT::Get::AllowUnauthenticated yes;`在其配置中设置来禁用 APT 验证。我真的不建议这样做，因为它会影响所有存储库。

# php - php重写规则

> ID：10281404
> 
> 赞同：1
> 
> 时间：2012-04-23T13:23:38.640
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我基本上知道如何使用 php 重写引擎，但是...

这是我的重写规则

网址是； [http://www.mypage.com/galeri.php?id=3](http://www.mypage.com/galeri.php?id=3)

```
RewriteEngine On
RewriteRule ^galeri/([^/]*)$ /galeri.php?id=$1 [L] 
```

结果是； [http://www.mypage.com.tr/galeri/3](http://www.mypage.com.tr/galeri/3)

它工作正常，但我必须更改页面内的所有 url 参数，例如；从

```
<script type='text/javascript' src='js/jquery.min.js?ver=1.4.2'></script>//from this to...
<script type='text/javascript' src='http://mypage.com/js/jquery.min.js?ver=1.4.2'></script> 
```

我敢肯定有一个简单的方法可以做到这一点，但如何？

* * *

伙计们，谢谢你的回答，但我想我必须把问题说清楚；

假设页面内有一个图像标签，例如；

**src="上传/image.png"**

由于重写 url，该页面将在**galeri/3/uploads/image.png**中搜索文件。有没有办法忽略重写 url 并在根目录中查找文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:26:18.273

将规则更改为：

```
RewriteRule ^galeri/([0-9]+)$ /galeri.php?id=$1 [L] 
```

这将只允许数字 ID。脚本之类的东西不会受到影响，因为它们有字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:27:44.470

使用 RewriteCond

**从：**

```
RewriteEngine On
RewriteRule ^galeri/([^/]*)$ /galeri.php?id=$1 [L] 
```

**至**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^galeri/([^/]*)$ /galeri.php?id=$1 [L] 
```

Kolink 也是对的，如果你只期望数字，那么只重写数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:28:10.327

我建议将其包含为带有 get_file_contents 的 PHP 文件并使用

```
<?php
 $file = file_get_contents("JSFILE.js");
?> 
```

然后用 PHP [http://forums.digitalpoint.com/showthread.php?t=1136535解析它](http://forums.digitalpoint.com/showthread.php?t=1136535)

# iphone - Xcode：根据文本字段中的文本量自行调整字体大小

> ID：10281410
> 
> 赞同：1
> 
> 时间：2012-04-23T13:23:56.693
> 
> 标签：iphone, ios, text, uilabel, adjustable

我创建了一个相互对应的 UIlabel 和 UItextfield。我的新挑战是让我的字体根据输入的文本量自行调整其大小以填充 UIlabel。解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:26:20.060

`UILabel`有财产`adjustsFontSizeToFitWidth`。请参考[UILabel 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html)。

`UITextField`有一个相同的，请参阅[UITextField 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UItextfield_Class/Reference/UItextfield.html)。

您可以设置一个足够大的默认字体大小，并让控件缩小文本以适应宽度。实际字体大小将介于`minimumFontSize`和 的大小设置之间`font`。

# parsing - 使用什么类型的语法来解析 PostgreSQL？

> ID：10281414
> 
> 赞同：6
> 
> 时间：2012-04-23T13:24:05.397
> 
> 标签：parsing, postgresql, grammar

使用什么类型的语法来解析 PostgreSQL？是 LR、LALR、LL 还是其他？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T20:28:54.937

[PostgreSQL 解析器](http://www.postgresql.org/docs/current/static/parser-stage.html)基于[yacc](http://linux.die.net/man/1/yacc)和 lex 。yacc 生成的解析器是 LALR(1)。[你可以在这里](https://github.com/postgres/postgres/blob/master/src/backend/parser/gram.y)阅读 postgres 的语法。

# android - 未捕获的类型错误：无法读取未定义 phonegap 的属性“行”

> ID：10281419
> 
> 赞同：2
> 
> 时间：2012-04-23T13:24:17.457
> 
> 标签：android, cordova

我对 phonegap 1.6.1 有一个 sqlite 问题。第一个查询标签返回正常，但是回调 barfs 带有**Uncaught TypeError: Cannot read property 'rows' of undefined**。由于 js 错误，jquery 不会正确刷新列表。据我所见，调用和回调具有正确的语法

有人遇到过类似的问题吗？

```
/* MY JUICES*/
function queryMyJuices(tx) {
tx.executeSql(
        'SELECT * FROM MYJUICE',
                [], queryMJSuccess, errorCB);
}

function queryMJSuccess(tx, results) {
var len = results.rows.length;

for ( var i = 0; i < len; i++) {
    $("ul#myjuices")
            .append(
                    '<li id=' 
                            + results.rows.item(i).id
                            + ' " >'
                            + results.rows.item(i).name
                            + ' </a><a rel="delete"
data-rel="dialog" href="#two">Delete</a></li>');

} $('ul#myjuices').listview('refresh');

}
/* MY JUICES*/ 
```

# jquery - javascript绑定有效但不存在

> ID：10281435
> 
> 赞同：0
> 
> 时间：2012-04-23T13:24:48.440
> 
> 标签：jquery

```
function OnIframeContentLoads(){        
  $("#iframe")
    .contents()
    .find(".text")
    .live({ 
      click: OpenSingleImageEditor, 
      mouseover: function () { HighLight(this) }, 
      mouseout: function () { OffLight(this);} 
    });    
} 
```

当我用 .bind() 绑定事件时，它的工作原理是 live()，就像上面的代码一样，它不起作用。这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:27:11.480

这是一个已知问题`.live`，请[`.on`](http://api.jquery.com/on/)改用

从文档

> 不支持链接方法。例如， $("a").find(".offsite, .external").live( ... ); 无效且无法按预期工作。

```
$("#iframe").on('click', '.text', function(){ ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:27:31.563

我注意到 .live 有一些非常具体的约束不适用于 .bind。特别是，它不适用于任何类型的缓存选择器。我认为这可能适用于 .find()/.contents()。

试试这个：

```
$("#iframe .text").live({ click: function(){ console.log('clicked') } }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:29:14.620

您将要使用 jquery on() 方法：

```
$(element).on( events [, selector] [, data], handler(eventObject) ) 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()

# html - Jquery Mobile“pageinit”没有触发

> ID：10281442
> 
> 赞同：2
> 
> 时间：2012-04-23T13:25:15.490
> 
> 标签：html, jquery-mobile, geolocation

我正在尝试将 Geolocation API 与 Jquery Mobile 一起使用。如果我从浏览器直接浏览到我的页面，一切正常。

但是，如果我从另一个页面导航到它，它不会加载。

此外，如果我使用“pageinit”命令删除代码行，我会遇到相同的问题/错误，但如果我刷新页面，它将加载。

我知道这与通过 AJAX 处理 DOM 的方式有关，但我似乎无法让它按照它应该/我想要的方式工作。

```
<!DOCTYPE html>
<html>
<head>
    <title>My Location</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>

</head>
<body>
    <div data-role="page" id="geoPage">

        <script type="text/javascript">

            $("#geoPage").live("pageinit", function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(success, error);
                } else {
                    error('Geolocation not supported');
                }
            });

            function success(position) {
            var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            var myOptions = {
                zoom: 15,
                center: latlng,
                mapTypeControl: false,
                navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var mapcanvas = $('#mapcanvas');
            var map = new google.maps.Map(mapcanvas[0], myOptions);
            var marker = new google.maps.Marker({
                position: latlng, 
                map: map, 
                title:"I am here!"
            });

            //alert(latlng);

            }

            function error(msg) {
                var errMsg = typeof msg == 'string' ? msg : "Geolocation failed";
                $('#msg').html(errMsg);
            }

            $("#continue7").click(function(e){

                $.mobile.changePage( "extension.htm", { transition: "slide"} );

            });
        </script>

        <div data-role="header">
            <h1>My Location</h1>
        </div>
        <div data-role="content">
            <div id="msg"></div>
            <div id="mapcanvas" style="height: 250px; width:250px;"></div>
            <input id="continue7" type="button" value="Conintue" />

        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:41:26.430

如何处理 pageinit 事件的[文档](http://jquerymobile.com/demos/1.1.0/docs/pages/page-scripting.html)与您的方法略有不同——至少是我正在查看的文档部分。他们的建议是你可以这样编码：

```
$( document ).delegate("#geoPage", "pageinit", function() {
    // Handle it
} 
```

如果您想以这种方式绑定，文档听起来就像您已将函数放置在最佳位置。

**编辑**：

值得注意的是，[这个特定页面](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)完全如您所展示的那样描述了绑定（但添加`event`到匿名函数中，我认为这不会影响您的情况）。这让我相信，当您从另一个页面导航时，您的开发者工具控制台中可能会出现 javascript 错误，并且该页面会出现“不工作”的外观。请务必在您选择的开发人员工具中进行检查。

**编辑**：

您的解决方案是您需要在`data-role='page'`元素中的某处包含您的 google maps javascript 'include'。每次加载 AJAX 页面时，Jquerymobile 都会忽略除此之外的所有内容。或者，您可以将所有指向此页面的链接转换为`data-ajax="false"`.

*在*您的 data-role="page" 中包含以下行或将其包含在`<head>`每个页面的 html中。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

一定要真正阅读并让原始链接沉入其中。最佳做法是`<head>`每个页面都有相同的元素并包含它而不是复制粘贴它。

# jquery - jquery mobile 加载脚本两次

> ID：10281443
> 
> 赞同：2
> 
> 时间：2012-04-23T13:25:17.133
> 
> 标签：jquery, jquery-mobile, document-ready

我试图在我的页面加载时加载一些 jquery javascript，但它总是加载两次。我正在使用 jquery 1.7.2 和 jquery mobile 1.1.0。我尝试了这 3 种不同的方法，但它总是加载脚本两次。

```
$(document).bind("ready", function() { }
$(document).ready(function() { }
$(document).live('pageinit',function(event) { } 
```

编辑：我解决了，狗屎！我100%肯定这个错误不会发生在其他人身上，我很抱歉这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T04:32:04.020

如上所述，我遇到了与 jqueryMobile 相同的问题。也就是说，放置在正文中的所有脚本都会加载两次。如果放置在 中，它们只会按预期加载一次。

我通过更改根（正文开始后的第一个 div）以包含“页面”的数据角色来解决正文中的双重加载问题：

```
<body>  
<div data-role="page"> 
```

瞧，没有更多的双重加载！

这是新 HTML5BoilerPlate 用户的常见问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:28:15.980

此时，jQuery 1.7.2 尚未与 jQuery Mobile 1.1.0 进行全面测试。您可能想要使用 jQuery 1.7.1。

> > 支持 jQuery 1.7.1
> 
> jQuery Mobile 1.1.0 现在支持 1.6.4 和 1.7.1 版本的 jQuery 核心。我们建议您使用 1.7.1 以利用最新版本中的所有重大改进。如果您坚持使用 1.0.1 一段时间，请记住仅支持 1.6.4。我们仍在测试 1.7.2，并将在未来的版本中正式支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:32:07.473

**更新：我在本地使用 jQuery 1.7.2 和 jQuery Mobile 1.1.0 进行了尝试，效果很好。我看到一个 1 呼叫`pageinit`事件。我什至尝试了多个页面，但仍然只看到一个调用`pageinit`.**

您通常不想在 jQuery Mobile 中使用 ready 事件，而是只使用该`pageinit`事件。根据[jQuery 移动事件文档](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)...

> 在初始化发生后，在正在初始化的页面上触发。我们建议绑定到此事件而不是 DOM ready()，因为无论是直接加载页面还是将内容作为 Ajax 导航系统的一部分拉入另一个页面，这都会起作用。

要获得更具体的答案，您确实需要发布实际代码；但是，随着您在问题中的混合`ready`，`pageinit`我猜测`pageinit`并且`ready`都在调用相同的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T07:49:25.287

> 我的脚本在 jQueryMobile 1.3.0 中被调用了两次，我只是通过使用**jquery-1.9.1**而不是 jquery-1.7.2 解决了这个问题。
> 您还可以使用**jQuery Migrate** 插件，
> 即 <script src="http://code.jquery.com/jquery-migrate-1.1.0.min.js"></script>
> 向后兼容以前版本的 jQuery。

# android - ANDROID：如何在类中打开网页扩展 CCLayer

> ID：10281446
> 
> 赞同：0
> 
> 时间：2012-04-23T13:25:23.143
> 
> 标签：android, cocos2d-android

我是 cocos2d 游戏开发的新手，使用 Cocos2d SDK Android 开发了 50% 的游戏。当用户玩一定级别的游戏超过 3 次时我被卡住了，然后我必须将他重定向到 google play url 来评价我的应用程序但不能要做到这一点，因为我无法像在课堂扩展活动中那样打开网页。我到处搜索，但没有找到这样的帮助来帮助我的事业。

```
Intent in = new Intent(Intent.ACTION_VIEW, Uri.parse("url"));
                startActivity(in); 
```

我的类扩展 CCLayer 是：

```
public class GameLayer extends CCLayer {
     public int count=0;
    public enum GAME_STATE {
        GS_PLAY,
        GS_PAUSE,
        GS_GAMEOVER
        };

    public CCSprite background;
    public CCSprite road;

    public ArrayList<CCSprite> backArray;
    public ArrayList<CCSprite> frontArray;

    public ArrayList<CCSprite> sunArray;
    public ArrayList<CCSprite> bloodArray;

    public CCSprite die;
    public CCSprite hit;
    public CCSprite smoke;
    public CCSprite blood;

    public CCLabel lbScore;
    public CCMenuItemToggle btPause;
    public CCMenuItemImage btMainMenu;
    public CCMenuItemImage btRetry;

    public Player player;

    public float score;
    public CCSprite scores;
    public CCLabel lbDistance;
  //  public CCLabel lbnotifi;
    public CCLabel lbCurrentScore;
    public CCLabel lbPersonalBest;
    public CCLabel lbBestScore;

    public  GAME_STATE state;   

    public float POS_X_PREV_SOUND  =  (G.rwidth / 3);
    public float POS_Y_PREV_SOUND  =  (G.rheight * 5 / 7);

    public float POS_X_NEXT_SOUND  =  (G.rwidth / 3 * 2);
    public float POS_Y_NEXT_SMOKE  = (G.rheight * 4 / 7);

    public CGPoint curDiePos;

    public GameLayer()
    {
        backArray = new ArrayList<CCSprite>();
        frontArray = new ArrayList<CCSprite>();
        sunArray = new ArrayList<CCSprite>();
        bloodArray = new ArrayList<CCSprite>();

        this.setIsTouchEnabled(true);

        background = CCSprite.sprite("background/back_ipad.png", CGRect.make(0, 0, 1024, 768));
        background.setPosition(G.rwidth / 2, G.rheight / 2);
        background.setScaleX(G.rX);
        background.setScaleY(G.rY);
        addChild(background);

        CCSprite sp = CCSprite.sprite("background/back_ipad.png", CGRect.make(0, 846, 1024, 178));
        sp.setPosition(G.rwidth / 2, sp.getContentSize().height / 2 * G.rY);
        sp.setScaleX(G.rX);
        sp.setScaleY(G.rY);
        addChild(sp);
        backArray.add(sp);

        sp = CCSprite.sprite("background/back_ipad.png", CGRect.make(0, 846, 1024, 178));
        sp.setPosition(G.rwidth * 3 / 2, sp.getContentSize().height / 2 * G.rY);
        sp.setScaleX(G.rX);
        sp.setScaleY(G.rY);
        addChild(sp);
        backArray.add(sp); 

        sp = CCSprite.sprite("background/front_mountion_ipad.png");
        sp.setPosition(G.rwidth / 2, sp.getContentSize().height / 2 * G.rY);
        sp.setScaleX(G.rX);
        sp.setScaleY(G.rY);
        addChild(sp);
        frontArray.add(sp);

        sp = CCSprite.sprite("background/front_mountion_ipad.png");
        sp.setPosition(G.rwidth * 3 / 2, sp.getContentSize().height / 2 * G.rY);
        sp.setScaleX(G.rX);
        sp.setScaleY(G.rY);
        addChild(sp);
        frontArray.add(sp);

        road = CCSprite.sprite("background/back_ipad.png", CGRect.make(0, 768, 1024, 24));
        road.setAnchorPoint(0.5f, 1);
        road.setPosition(G.rwidth / 2, G.LOAD_HEIGHT);
        road.setScaleX(G.rX);
        road.setScaleY(G.rY);
        addChild(road);

        lbScore = CCLabel.makeLabel("0", "arial", 30);
        lbScore.setScale(G.rX);
        lbScore.setPosition(G.rwidth - 70 * G.rX, G.rheight - 70 * G.rY);
        lbScore.setColor(new ccColor3B(0, 0, 0));
        addChild(lbScore);

        btPause = CCMenuItemToggle.item(this, "selPause",
                                        CCMenuItemImage.item("object/bt_pause.png", "object/bt_pause.png"),
                                        CCMenuItemImage.item("object/bt_right01.png", "object/bt_right02.png"));
        btPause.setScale(G.rX);
        btPause.setPosition(70 * G.rX, G.rheight - 70 * G.rY);

        btMainMenu = CCMenuItemImage.item("object/bt_main01.png", "object/bt_main02.png", this, "selMainMenu");
        btMainMenu.setScale(G.rX);
        btMainMenu.setPosition(G.rwidth / 4, G.rheight / 4);

        btRetry = CCMenuItemImage.item("object/bt_retry01.png", "object/bt_retry02.png", this, "selRetry");
        btRetry.setScale(G.rX);
        btRetry.setPosition(G.rwidth * 3 / 4, G.rheight / 4);

        CCMenu menu = CCMenu.menu(btPause, btMainMenu, btRetry);
        menu.setPosition(0, 0);
        addChild(menu, 5);

        player = new Player();
        player.setPosition(G.PLAYER_POS, G.LOAD_HEIGHT);
        addChild(player, 5);

        smoke = CCSprite.sprite("smoke/smoke_000.png");
        smoke.setAnchorPoint(0.5f, 0);
        smoke.setScale(G.rX);
        smoke.setPosition(player.getPosition());
        addChild(smoke);
        CCTextureCache.sharedTextureCache().removeTexture(smoke.getTexture());

        hit = CCSprite.sprite("object/c0001.png");
        hit.setAnchorPoint(0.5f, 0.5f);
        hit.setScale(G.rX);
        hit.setPosition(CGPoint.ccpAdd(player.getPosition(),
                CGPoint.ccp(player.spRun.getContentSize().width / 2 * G.rX,
                        player.spRun.getContentSize().height / 2 * G.rX)));
        addChild(hit);
        CCTextureCache.sharedTextureCache().removeTexture(hit.getTexture());

        blood = CCSprite.sprite("object/blood_000.png");
        blood.setScale(G.rX);
        blood.setPosition(0, 0);
        addChild(blood);
        CCTextureCache.sharedTextureCache().removeTexture(blood.getTexture());

        die = CCSprite.sprite("object/tombstone00.png");
        die.setAnchorPoint(0.5f, 0);
        die.setScale(G.rX);
        die.setPosition(player.getPosition());     
        addChild(die);
        CCTextureCache.sharedTextureCache().removeTexture(die.getTexture());

        scores = CCSprite.sprite("object/t_score.png");
        scores.setScale(G.rX);
        scores.setPosition(G.rwidth / 2, 670 * G.rY);
        addChild(scores);

        lbDistance = CCLabel.makeLabel("Distance:", CGSize.make(G.rwidth, 150*G.rY), TextAlignment.LEFT, "arial", 35);
        lbDistance.setAnchorPoint(0, 0.5f);
        lbDistance.setScale(G.rX);
        lbDistance.setPosition(POS_X_PREV_SOUND, POS_Y_PREV_SOUND);
        ccColor3B col = new ccColor3B(0, 90, 0);
        lbDistance.setColor(col);
        addChild(lbDistance);

//        
//        lbnotifi = CCLabel.makeLabel("Distance:", CGSize.make(G.rwidth, 150*G.rY), TextAlignment.LEFT, "arial", 35);
//        lbnotifi.setAnchorPoint(0, 0.5f);
//        lbnotifi.setScale(G.rX);
//        lbnotifi.setPosition(POS_X_PREV_SOUND, POS_Y_PREV_SOUND);
//        ccColor3B col1 = new ccColor3B(0, 90, 0);
//        lbDistance.setColor(col1);
//      //  addChild(lbDistance);

        lbCurrentScore = CCLabel.makeLabel("0", CGSize.make(200*G.rX, 150*G.rY), TextAlignment.RIGHT, "arial", 35);
        lbCurrentScore.setScale(G.rX);
        lbCurrentScore.setPosition(POS_X_NEXT_SOUND, POS_Y_PREV_SOUND);
        lbCurrentScore.setColor(col);
        addChild(lbCurrentScore);

        lbPersonalBest = CCLabel.makeLabel("Your Best Run:", CGSize.make(G.rwidth, 150*G.rY), TextAlignment.LEFT, "arial", 35);
        lbPersonalBest.setAnchorPoint(0, 0.5f);
        lbPersonalBest.setScale(G.rX);
        lbPersonalBest.setPosition(POS_X_PREV_SOUND, POS_Y_NEXT_SMOKE);
        lbPersonalBest.setColor(col);
        addChild(lbPersonalBest);

        lbBestScore = CCLabel.makeLabel("0", CGSize.make(200*G.rX, 150*G.rY), TextAlignment.RIGHT, "arial", 35);
        lbBestScore.setScale(G.rX);
        lbBestScore.setPosition(POS_X_NEXT_SOUND, POS_Y_NEXT_SMOKE);
        lbBestScore.setColor(col);
        addChild(lbBestScore);

        startGame();
    }

    public CGRect sunRect(CCSprite  sp)
    {
        CGRect rt;
        CGSize sz = sp.getContentSize();
        sz.width = sz.width * G.rX;
        sz.height = sz.height * G.rY;

        rt = CGRect.make(sp.getPosition().x, sp.getPosition().y, sz.width, sz.height);

        return rt;
    }

    public void  loadBloods()
    {
        if (bloodArray != null) {
            int arrayCount = bloodArray.size();

            if (arrayCount > 0) {
                for (int i = 0; i < arrayCount; i++)
                {
                    CCSprite spBlood = bloodArray.get(i); 
                    removeSprite(spBlood);
                }
            }
            bloodArray.clear();
        }

        CCSprite sp;

        for (int i = 0; G.DATA_BLOOD[i][0] != 0; i ++) {
            int imageNum = (int) G.DATA_BLOOD[i][1];
            sp = CCSprite.sprite(G.IMG_BLOOD[ imageNum ]);
            sp.setScale(G.rX);
            sp.setAnchorPoint(0, 1);
            sp.setPosition(G.DATA_BLOOD[i][0] * G.rX, G.LOAD_HEIGHT);
            addChild(sp);
            bloodArray.add(sp);
        }
    }

    public void  loadSuns()
    {
        if (sunArray != null) {
            int arrayCount = sunArray.size();

            if (arrayCount > 0) {
                for (int i = 0; i < arrayCount; i++)
                {
                    CCSprite sun = sunArray.get(i);
                    removeSprite(sun);
                }
            }
            sunArray.clear();

        }

        CCSprite sp;

    }

    public void  updateScore()
    {
        lbScore.setString(String.format("%d", (int)score));
    }

    public void  initPlayer()
    {
        player.state = PLAYER_STATE.PS_RUN;
        player.spRun.setVisible(true);
        player.spJump.setVisible(false);
        player.spDown.setVisible(false);
        player.runBlood.setVisible(false);

        player.timeStateUpdate(PLAYER_STATE.PS_RUN);
        player.startRunAnimation();
        player.setVisible(true);
    }

    public void  startGame()
    {
        state = GAME_STATE.GS_PLAY;
        score = 0;
        updateScore();      

        btMainMenu.setVisible(false);
        btRetry.setVisible(false);
        scores.setVisible(false);
        lbDistance.setVisible(false);
       // lbnotifi.setVisible(false);
        lbCurrentScore.setVisible(false);
        lbPersonalBest.setVisible(false);
        lbBestScore.setVisible(false);
        lbScore.setVisible(true);
        btPause.setVisible(true);
        btPause.setSelectedIndex(0);

        die.setVisible(false);

        CCTexture2D texture = CCTextureCache.sharedTextureCache().addImage("object/tombstone00.png");
        if( texture != null)
        {
            die.setTexture(texture);
        }
        CCTextureCache.sharedTextureCache().removeTexture(die.getTexture());

        hit.setVisible(false);
        hit.setOpacity(255);
        texture = CCTextureCache.sharedTextureCache().addImage("object/c0001.png");
        if( texture != null ) 
        {
            hit.setTexture(texture);
        }
        CCTextureCache.sharedTextureCache().removeTexture(hit.getTexture());

        blood.setVisible(false);
        texture = CCTextureCache.sharedTextureCache().addImage("object/blood_000.png");
        if( texture != null)
        {
            blood.setTexture(texture);
        }
        CCTextureCache.sharedTextureCache().removeTexture(blood.getTexture());

        smoke.stopAllActions();
        smoke.setVisible(false);
        texture = CCTextureCache.sharedTextureCache().addImage("smoke/smoke_000.png");
        if( texture != null) 
        {
            smoke.setTexture(texture);
        }
        CCTextureCache.sharedTextureCache().removeTexture(smoke.getTexture());

        loadSuns();
        if (G.g_gameInfo.isSmokeOn == true)
        {

            loadBloods();
        }
        initPlayer();
        this.schedule("onTime", 0.02f);

    }

    public void  selMainMenu()
    {
        G.sd_button.start();
        CCScene scene = CCScene.node();
        scene.addChild(new FirstScene(), 1);
        CCDirector.sharedDirector().replaceScene(CCFadeTransition.transition(1.0f, scene));
    }

    **public void  selRetry()
    {
        count++;
        G.sd_button.start();
        if(count==3)
        {

        }
        if(count<3){
        startGame();
        }
    }**

    public void  processMovingObjects(float dt)
    {
        float backDelta = G.VEL_BACK_MOVE * dt;
        float frontDelta = G.VEL_FRONT_MOVE * dt;
        float sunDelta = G.VEL_RUN * dt;

        score += backDelta / 2;
        updateScore();

        for (int i = 0; i < backArray.size(); i++)
        {
            CCSprite sp = backArray.get(i);
            if ( (sp.getPosition().x + sp.getContentSize().width / 2 * G.rX) < 0)
            {
                sp.setPosition(CGPoint.ccpAdd(sp.getPosition(), CGPoint.ccp(G.rwidth * 2, 0)));
            }

            sp.setPosition(CGPoint.ccpSub(sp.getPosition(), CGPoint.ccp(backDelta, 0)));
        }

        for (int i = 0; i < frontArray.size(); i++) 
        {
            CCSprite sp = frontArray.get(i);
            if ( (sp.getPosition().x + sp.getContentSize().width / 2 * G.rX) < 0)
            {
                sp.setPosition(CGPoint.ccpAdd(sp.getPosition(), CGPoint.ccp(G.rwidth * 2, 0)));
            }

            sp.setPosition(CGPoint.ccpSub(sp.getPosition(), CGPoint.ccp(frontDelta, 0)));
        }

        for (int i = 0; i < sunArray.size(); i++) 
        {
            CCSprite sp = sunArray.get(i);
            sp.setPosition(CGPoint.ccpSub(sp.getPosition(), CGPoint.ccp(sunDelta, 0)));

            if ( (sp.getPosition().x + sp.getContentSize().width / 2 * G.rX) < 0) 
            {
                sp.setPosition(CGPoint.ccpAdd(sp.getPosition(), CGPoint.ccp(G.rwidth * 5, 0)));
            }
        }

        if (G.g_gameInfo.isSmokeOn == true)
        {

            for (int i = 0; i < bloodArray.size(); i++)
            {
                CCSprite sp = bloodArray.get(i);
                sp.setPosition(CGPoint.ccpSub(sp.getPosition(), CGPoint.ccp(sunDelta, 0)));

                if ( (sp.getPosition().x + sp.getContentSize().width / 2 * G.rX) < 0)
                {
                    sp.setPosition(CGPoint.ccpAdd(sp.getPosition(), CGPoint.ccp(G.rwidth * 5, 0)));
                }
            }

        }
    }

    public void  selShowGmaeOverMenu()
    {
        btMainMenu.setVisible(true);
        btRetry.setVisible(true);
        scores.setVisible(true);
        lbDistance.setVisible(true);
        lbCurrentScore.setVisible(true);
        lbPersonalBest.setVisible(true);
        lbBestScore.setVisible(true);

        int bestScore = 0;
        switch (G.g_gameInfo.trackNum) 
        {
            case 0:
                bestScore = G.g_gameInfo.scoreTrack1;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack1 = bestScore;
                break;
            case 1:
                bestScore = G.g_gameInfo.scoreTrack2;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack2 = bestScore;

                break;
            case 2:
                bestScore = G.g_gameInfo.scoreTrack3;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack3 = bestScore;

                break;
            case 3:
                bestScore = G.g_gameInfo.scoreTrack4;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack4 = bestScore;

                break;
            case 4:
                bestScore = G.g_gameInfo.scoreTrack5;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack5 = bestScore;

                break;
            case 5:
                bestScore = G.g_gameInfo.scoreTrack6;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack6 = bestScore;

                break;
            case 6:
                bestScore = G.g_gameInfo.scoreTrack7;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack7 = bestScore;

                break;
            case 7:
                bestScore = G.g_gameInfo.scoreTrack8;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack8 = bestScore;
            case 8:
                bestScore = G.g_gameInfo.scoreTrack9;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack9 = bestScore;
            case 9:
                bestScore = G.g_gameInfo.scoreTrack10;
                if (bestScore < (int)score) {
                    bestScore = (int)score;
                }
                G.g_gameInfo.scoreTrack10 = bestScore;

                break;

            default:
                break;
        }

        G.saveHistory();

        lbCurrentScore.setString(String.format("%d", (int)score));
        lbBestScore.setString(String.format("%d", bestScore));
    }

    public void  selShowDieAni()
    {
        G.sd_fire.start();

        die.runAction(G.ani_die);
        die.setVisible(true);
        die.setPosition(curDiePos.x, G.LOAD_HEIGHT);

    }

    public void  selHideBlood()
    {
        blood.setVisible(false);
    }

    public void  selEndSmoke()
    {
        smoke.setVisible(false);
    }

    public void  gameOver()
    {
        G.sd_delay.start();

        state = GAME_STATE.GS_GAMEOVER;

        btPause.setVisible(false);
        lbScore.setVisible(false);

        for (int i = 0; i < sunArray.size(); i++)
        {
            CCSprite sun = sunArray.get(i);
            sun.stopAllActions();
        }

        this.unschedule("onTime");
        player.stopRunAnimation();
        player.setVisible(false);

//      CCSequence seqSmoke = CCSequence.actions(G.ani_smoke copy] autorelease],
//                              [CCCallFunc actionWithTarget:self selector:@selector(selEndSmoke)], nil];
        smoke.runAction(G.ani_smoke);
        selEndSmoke();

        smoke.setVisible(true);
        smoke.setPosition(curDiePos);

        if (G.g_gameInfo.isSmokeOn == true)
        {
            blood.setVisible(true);
            blood.setPosition(curDiePos.x, G.LOAD_HEIGHT + 23 * G.rX);

//          CCSequence *seqBlood = [CCSequence actions:[[ani_blood copy] autorelease],
//                                  [CCCallFunc actionWithTarget:self selector:@selector(selHideBlood)], nil];

            blood.runAction(G.ani_blood);
            selHideBlood();

            CCSequence seq = CCSequence.actions(CCCallFunc.action(this, "selShowDieAni"),
                               CCCallFunc.action(this, "selShowGmaeOverMenu"));

            this.runAction(seq);
        }
        else {

            CCSequence seq = CCSequence.actions(CCFadeOut.action(0.3f),
                               CCCallFunc.action(this, "selShowDieAni"),
                               CCCallFunc.action(this, "selShowGmaeOverMenu"));

            hit.runAction(G.ani_hit);
            hit.runAction(seq);
            hit.setVisible(true);
            hit.setPosition(curDiePos.x, G.LOAD_HEIGHT + 23 * G.rX);

        }

    }

    public void  scanCollision()
    {
        CGRect rcPlayer = player.playerRect();

        for (int i = 0; i < sunArray.size(); i++) 
        {
            CCSprite sun = sunArray.get(i);
            CGRect rcSun = this.sunRect(sun);

            if (CGRect.intersects(rcPlayer, rcSun))
            {

                curDiePos = CGPoint.ccpAdd(sun.getPosition(), CGPoint.ccp(sun.getContentSize().width / 2 * G.rX, 0));
                sun.setVisible(false);

                gameOver();
                break;
            }
        }

        if (G.g_gameInfo.isSmokeOn == true)
        {

            for (int i = 0; i < bloodArray.size(); i++) 
            {
                CCSprite spBlood = bloodArray.get(i);
                CGRect rcBlood = this.sunRect(spBlood);

                if (player.getPosition().x > rcBlood.origin.x && player.getPosition().x < rcBlood.origin.x + rcBlood.size.width)
                {
                    player.actionRunBlood();
                }
            }

        }
    }

    public void  onTime(float dt)
    {
        if(dt > 0.02f)
            dt = 0.02f;

        processMovingObjects(dt);
        scanCollision();
    }

    public void  selPause()
    {
        G.sd_button.start();

        if (btPause.selectedIndex() == 0)
        {
            CCDirector.sharedDirector().resume();
            state = GAME_STATE.GS_PLAY;
        }
        else
        {

            CCDirector.sharedDirector().pause();
            state = GAME_STATE.GS_PAUSE;
        }
    }

    public boolean  ccTouchesBegan(MotionEvent event)
    {
        CGPoint touchPoint = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));

        if (state == GAME_STATE.GS_PLAY)
        {
            if (touchPoint.x < G.rwidth / 2) {
                player.timeStateUpdate(PLAYER_STATE.PS_DOWN);
            }
            else {        
                player.timeStateUpdate(PLAYER_STATE.PS_JUMP);

            }

        }

        return true;
    }

    public boolean  ccTouchesEnded(MotionEvent event)
    {
        CGPoint touchPoint = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));

        if (state == GAME_STATE.GS_PLAY)
        {
            if (touchPoint.x < G.rwidth / 2) {
                if (player.state == PLAYER_STATE.PS_DOWN)
                {
                    player.timeStateUpdate(PLAYER_STATE.PS_RUN);
                }
            }
            else {
                if (player.state == PLAYER_STATE.PS_JUMP)
                {
                    player.timeStateUpdate(PLAYER_STATE.PS_RUN);
                }
            }

        }

        return true;
    }

    public boolean  ccTouchesCancelled(MotionEvent event)
    {
        CGPoint touchPoint = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));

        if (state == GAME_STATE.GS_PLAY) 
        {
            if (touchPoint.x < G.rwidth / 2)
            {
                if (player.state == PLAYER_STATE.PS_DOWN)
                {
                    player.timeStateUpdate(PLAYER_STATE.PS_RUN);
                }
            }
            else {
                if (player.state == PLAYER_STATE.PS_JUMP)
                {
                    player.timeStateUpdate(PLAYER_STATE.PS_RUN);
                }
            }

        }

        return true;
    }
        public void onExit()
    {
        removeCache();
        super.onExit();

    }

} 
```

请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:07:30.727

好的，对于 Cocos2d，您必须记住的基本事项是您的 ccScenes/Layers 等都在活动内部运行。

您需要在您的活动上创建和公开一个处理程序，并从您的 CCLayer 向该处理程序发布一个 Runnable。

然后，您可以在该可运行文件中扩展包含 WebView 和“关闭”按钮的布局，并将它们附加到内容视图。

从那里只需将 onClick 附加到关闭按钮即可将该布局设置为 View.GONE 并删除对象，您应该远离。

希望这可以帮助

我必须在我的应用程序上从主菜单层执行此操作，以显示基于 Web 的教程页面，这很有效。

```
} else if (i==TUTORIAL) {
//call load web url here
    Handler handler = HomeMenu.getHandler();
    handler.post(new Runnable() {
        public void run() {
            HomeMenu activity = HomeMenu.getInstance();

            LayoutInflater inflater = (LayoutInflater)activity.getLayoutInflater();
            if(inflater != null)
            {
                baseLayout = inflater.inflate(R.layout.tutoriallayout, null);
            } else {
                throw new IllegalStateException("Unable to find view inflater");
            }
            WebView wv = (WebView) baseLayout.findViewById(R.id.tutorialWeb);
            wv.loadUrl( "http://url to your tutorial here" );
            ImageView iv = (ImageView) baseLayout.findViewById(R.id.closeTutorial);
            iv.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    if (baseLayout != null) {
                        baseLayout.setVisibility(View.GONE);
                    }
                    baseLayout = null;
                }
            });

            activity.addContentView(baseLayout,  new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));
        }
    });
    break;
} 
```

和布局，如

```
<?xml version="1.0" encoding="utf-8"?>
    <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/absoluteLayout1" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content">
        <RelativeLayout android:id="@+id/rLayout1" 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content"
            android:padding="10dip">
            <android.webkit.WebView android:id="@+id/tutorialWeb" android:layout_height="fill_parent" android:layout_width="fill_parent" android:padding="10dip"></android.webkit.WebView>
        </RelativeLayout>
        <ImageView android:layout_height="wrap_content" android:layout_width="wrap_content" android:src="@drawable/delete" android:id="@+id/closeTutorial" android:adjustViewBounds="true" android:clickable="true"></ImageView>
    </AbsoluteLayout> 
```

# backbone.js - 是否可以在 Backbone.js 中使用参数创建模型和视图？

> ID：10281454
> 
> 赞同：0
> 
> 时间：2012-04-23T13:25:47.637
> 
> 标签：backbone.js

是否可以在 Backbone.js 中使用参数创建模型和视图？
我尝试简单的喜欢

```
 var TestModel = Backbone.Model.extend( {
        initialize: function(test){
        this.set('test',test);
        alert("test");
    }
}); 
```

但我收到消息**this.set is not a function**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:36:04.757

您的示例代码中存在语法错误，但这应该可以正常工作。您还需要将模型`attributes`作为第一个参数并引用一个通用`options`对象作为第二个参数（请参阅此处的代码[http://backbonejs.org/docs/backbone.html#section-28](http://backbonejs.org/docs/backbone.html#section-28)）

但是，从您的示例代码来看，您似乎只是在尝试将数据传递给模型，该模型会自动为您处理。

```
 var TestModel = Backbone.Model.extend({});

var t = new TestModel({foo: "bar"});

console.log(t.get("foo")); 
```

或者，如果您想获得一些选择，您可以这样做：

```
 var TestModel = Backbone.Model.extend({
  initialize: function(attrs, options){
    console.log(options.foo);
  }
});

var t = new TestModel(null, {
  foo: "bar"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:34:12.073

简短的回答是肯定的。您没有显示足够的代码，但这有效：

```
var TestModel = Backbone.Model.extend({});

var t = new TestModel({test: 'test'});

t.get('test');
>>> test 
```

您不能将任何内容传递给该`initialize`方法，但您可以在实例化对象时传递一个哈希值。

虽然，由于它不会在创建时进行验证（所以它总是会返回一个有效的模型），你最好这样做：

```
var t = new TestModel();
t.set('test', 'test'); 
```

因此，如果您的值无法验证，您将能够收到错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T10:07:05.357

对象“this”具有作为“属性”的所有值。因此，如果您想访问任何属性，

你可以试试

`alert(this.attributes.test)`

# c# - c# web app用户无缘无故退出

> ID：10281455
> 
> 赞同：3
> 
> 时间：2012-04-23T13:25:53.647
> 
> 标签：c#, asp.net, session, web-config

我有一个已开发并安装在服务器上的应用程序。然后，我们需要在另一个网络服务器上安装相同的应用程序，从迁移开始，我们开始发现几个问题。

目前，应用程序用户正在无缘无故地注销（没有错误，只是注销）。 [这是 Web.config](http://pastebin.com/GR4piLmb)，我还设置了 sessionState timeout="1800" 但在 2 分钟不活动后我被踢了出去。

我无法在服务器上调试它，因为服务提供商没有调试工具，而且我不是 .net 开发人员，我找不到任何解决方案。查看微软文档我没有找到任何东西，日志没有报告错误或内存限制。

我能做些什么？我可以给你所有你需要理解或帮助我找到解决这个问题的方法，问我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T15:29:16.997

为了解决这个问题，您可以做两件事。好吧，只有如果（您的表单身份验证和其他属性设置正确）。

1.  在 web.config 中创建机器密钥。
2.  将应用程序池进程空闲时间更改为更高的限制。默认为 20 分钟。

当进程空闲超过 20 分钟时，它会杀死工作进程并重新生成机器密钥。而客户端机器上的现有 cookie 是使用旧机器密钥加密的。由于它不会使用最近生成的新机器密钥进行解密，因此用户将被发送到登录页面以重新输入凭据，并创建新的持久 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:43:19.500

您的 web.config 设置为使用存储在 cookie 中的 SessionID。使用您的 Web 浏览器开发工具来验证 ASP.NET_SessionID cookie 的超时。下次您被踢出时，cookie 可能不再存在。

查看您的 web.config，您似乎没有使用 ASP.net 身份验证。如果你是，它看起来像这样。

```
<authentication mode="Forms">
   <forms name="appname" defaultUrl="Default.aspx" loginUrl="Login.aspx" 
       protection="All" path="/" timeout="480" slidingExpiration="true"/>
</authentication> 
```

模式可以设置为 Windows|Forms|Passport|None。你的设置为无。您可能仍在使用身份验证，但必须在 IIS 中进行设置。

# android - Android：如何从光标填充 Spinner 视图而无需在 SimpleCursorAdapter 构造函数上使用 @SuppressWarnings("deprecation")

> ID：10281470
> 
> 赞同：1
> 
> 时间：2012-04-23T13:26:24.180
> 
> 标签：android, spinner, deprecated, simplecursoradapter, suppress-warnings

我有一个通过游标绑定到数据库列的 Spinner。我发现的所有示例都建议使用`SimpleCursorAdapter`显然已弃用的，因此我必须使用`@SuppressWarnings("deprecation)`它才能正确编译。我有以下代码可以正常工作，但我不喜欢使用已弃用的功能。

```
private Spinner  itemCategory;
itemCategory    = (Spinner) findViewById(R.id.itemCategory);

private void loadCategoryOptions() {

    Uri uri                     = Uri.parse(GoalsContentProvider.CONTENT_URI + "/categories");
    String[] projection         = { CategoriesTable.COLUMN_ID, CategoriesTable.COLUMN_NAME };
    String selectCriteria       = CategoriesTable.COLUMN_STATUS + " > 0";
    String sortOrder            = CategoriesTable.COLUMN_NAME + " ASC";
    Cursor cursor               = managedQuery(uri, projection, selectCriteria, null, sortOrder);

    @SuppressWarnings("deprecation")
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                                                          android.R.layout.simple_spinner_item, 
                                                          cursor, new String[] { CategoriesTable.COLUMN_NAME },  
                                                          new int[] {android.R.id.text1});

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    itemCategory.setAdapter(adapter);
} 
```

我正在使用 Android 支持 v4 包。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:33:33.157

只有构造函数被弃用，而不是整个类。

请参阅 [API 版本 15 中已弃用 SimpleCursorAdapter？](https://stackoverflow.com/questions/8790659/simplecursoradapter-deprecated-in-api-version-15)

# java - Java 是否有类似于 C++ 标准库列表比较器的东西来通过变量值查找对象？

> ID：10281475
> 
> 赞同：3
> 
> 时间：2012-04-23T13:26:37.600
> 
> 标签：java, arraylist

在 Java 中是否有类似于 C++ 标准库列表的东西，它使用比较器通过其变量之一在列表中查找特定对象？

例如，不是通过检查变量比较来遍历 ArrayList 来查找特定对象。有没有办法使用比较器对象来查找特定实例？

（注意：我不想使用哈希图，因为这会创建两个单独的列表。我想要列表的功能，而不必涉及哈希图。）

像这样的东西，但对于 Java：

```
#include <algorithm>

using namespace std;

class Cperson     
{    
  string lastname, firstname, address, city;    
  int zipcode;    
  char state[3];    
  // this works for the last name    
  friend bool operator==(const Cperson& left, const Cperson& right);    
  friend bool firstEqualTo(const Cperson& left, const Cperson& right);    
};

bool operator==(const Cperson& left, const Cperson& right)    
{    
  return left.lastname == right.lastname;    
}

bool firstEqualTo(const Cperson& left, const Cperson& right)    
{    
  return left.firstname == right.firstname;    
} 
```

现在我们可以在名字字段上搜索我们的个人列表，忽略其他字段：

```
vector<Cperson> personlist;    
// fill personlist somehow

Cperson searchFor;   // should contain the firstname we want to find    
vector<Cperson>::iterator fperson;   
fperson= std::find(personlist.begin(),    
                   personlist.end(),   
                   searchFor,    
                   firstEqualTo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:30:47.333

如果您可以使用 Google Guava，请查看该问题及其答案：[Filtering on List based on one property with guava](https://stackoverflow.com/questions/5793907/filtering-on-list-based-on-one-property-with-guava)

*更新*：

如果您不喜欢 Google，因此不想使用他们的库，请尝试 Apache Commons Collections' [`CollectionUtils`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)：

```
List<Person> filteredList = new ArrayList<Person>(allPersons);
CollectionUtils.filter( filteredList, new Predicate() {
  boolean evaluate(Object object) {
    //do whatever you want
  }
}); 
```

缺点是 Commons Collections 本身不使用泛型。但是，Commons Collections 3.1有一个通用[端口](http://sourceforge.net/projects/collections/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:30:12.750

您始终可以`java.lang.Comparable`为您的特定情况添加一个实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:30:04.010

我相信 Java Set（[参见文档](http://docs.oracle.com/javase/7/docs/api/index.html)）与 C++ STL 版本几乎是直接平行的。您可以覆盖`equals`运算符以设置自定义比较。

给定一个集合，您可以调用`mySet.contains(o)`以查看该集合是否包含指定的对象。

在您的情况下，您将首先创建一个代表您的人的 Java 类，将一组 Person 对象存储在一个集合中，并确保覆盖`equals`成员函数以比较名字和姓氏，如果两者相同，则返回 true。然后，您可以检查您的集合是否包含某个“人”。

请注意，如果您覆盖`equals`，建议您也应该覆盖`hashCode`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:30:15.607

您可以使用

```
list.contains (o); 
```

检查列表是否包含特定对象。

要检查谓词，没有简单的内置方法。但是，它似乎比您的 C++ 设置更简单：

```
for (Person p: persons) {
  if (p.firstname.equals ("John")) {  
     doSomethingWith (p);
     // if you only want to handle one case, the first John:
     break; 
  }
} 
```

要创建一个“John”-集合：

```
List <Person> johns = ArrayList <Person> ();
for (Person p: persons) {
  if (p.firstname.equals ("John")) {  
     johns.add (p);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:43:56.743

我相信 Java 的[Arrays.binarySearch(T[] a, int fromIndex, int toIndex, T key, Comparator c)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28T%5B%5D,%20int,%20int,%20T,%20java.util.Comparator%29) 将满足您的需求。

或者，如果您希望按照您的说明使用 ArrayList，请尝试[Collections.binarySearch(List> list,T key, Comparator c)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T,%20java.util.Comparator%29)

请注意，在使用它之前，您必须对数组进行排序。

# c# - 当前上下文中不存在名称 XXXX

> ID：10281478
> 
> 赞同：3
> 
> 时间：2012-04-23T13:26:56.707
> 
> 标签：c#

我有以下代码：

```
public Form1()
{
    InitializeComponent();

    string strRadio = Utils.ReadFile(strTemp + @"\rstations.txt");
    string[] aRadio = strRadio.Split(new string[] { "#" }, StringSplitOptions.RemoveEmptyEntries);    
    for (int i = 0; i < aRadio.Length; i += 2)
    {
       listBox.Items.Add(aRadio[i]);
    }

}

private void listBox_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = listBox.SelectedIndex;
    MessageBox.Show(aRadio[(index+1)]);
} 
```

现在错误是`The name 'aRadio' does not exist in the current context`. 其中来自`MessageBox.Show(aRadio[(index+1)]);`. 我需要将其声明`aRadio`为公开的还是什么？如果是这样，这将如何完成？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T13:27:42.003

您在`aRadio`构造函数中声明为局部变量。您需要将其声明为*实例*变量，并在构造函数中为其赋值：

```
// TODO: Give this a better name
private readonly string[] aRadio;

// TODO: Give your form a better name too
public Form1()
{
    InitializeComponent();

    // TODO: You might want to reconsider reading files in a GUI constructor, too
    // TODO: Use Path.Combine(strTemp, "rstations.txt" instead of concatenation
    string strRadio = Utils.ReadFile(strTemp + @"\rstations.txt");
    aRadio = strRadio.Split(new string[] { "#" },
                            StringSplitOptions.RemoveEmptyEntries);

    for (int i = 0; i < aRadio.Length; i += 2)
    {
       listBox.Items.Add(aRadio[i]);
    }
} 
```

`KeyValuePair<string, string>`但是，如果您可以通过将自定义对象（或只是 a ）添加到列表框并通过属性绑定显示部分来做得比这种方法更好，我不会感到惊讶。这样你就可以得到选定的*项目*而不是选定的索引......没有必要像这样保留文本/值对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:31:00.267

```
 private string[] aRadio;

    public Form1() { 
      InitializeComponent();       
      string strRadio = Utils.ReadFile(strTemp + @"\rstations.txt");
      this.aRadio = strRadio.Split(new string[] { "#" }, StringSplitOptions.RemoveEmptyEntries);
      for (int i = 0; i < aRadio.Length; i += 2)
      {
        listBox.Items.Add(aRadio[i]);
      }
    }

    private void listBox_SelectedIndexChanged(object sender, EventArgs e) {
      int index = listBox.SelectedIndex;
      MessageBox.Show(this.aRadio[(index+1)]);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:29:55.727

您将访问在您的构造函数域中定义的变量，`form1`以便您可以执行此操作

```
//Define the variable as an attribute of class

private string[] strRadio;
public Form1()
{
        InitializeComponent();
        string strRadio = Utils.ReadFile(strTemp + @"\rstations.txt");
        aRadio = strRadio.Split(new string[] { "#" }, StringSplitOptions.RemoveEmptyEntries);

        for (int i = 0; i < aRadio.Length; i += 2)
        {
           listBox.Items.Add(aRadio[i]);
        }

    }

    private void listBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = listBox.SelectedIndex;
        MessageBox.Show(aRadio[(index+1)]);
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-12-10T04:40:09.413

System.StringSplitOptions.RemoveEmptyEntries ：以这种方式输入将解决您的问题。

不要问我为什么我只知道它是这样工作的。

# iphone - iVar 初始化的多任务挑战

> ID：10281481
> 
> 赞同：0
> 
> 时间：2012-04-23T13:27:06.587
> 
> 标签：iphone, objective-c, uiviewcontroller

我试图弄清楚如何最好地处理多任务更改的 appDelegate 方法，并且我想考虑用户的任何可能行为。

如果在视图控制器的方法中有大量 ivar 初始化和视图设置会发生什么：

`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`

当这个方法进行到一半时，用户退出了你的应用程序。但是，因为它支持多任务，当他们再次打开它时，上面的 init 方法是否会从它停止的地方继续？

如果是这样，这就是为什么最好将初始化放在上述方法而不是`viewDidLoad`因为，如果您在运行时退出应用程序，那么如果您随后运行应用程序`viewDidLoad`，它似乎`viewDidLoad`不会*从*您离开的地方继续再次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:00:30.323

`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`如果您的意思是退出，即应用程序将进入后台，该方法将完成其执行。

例如，尝试将以下内容添加到该方法中，然后按下按钮将应用程序置于后台：

```
 for (int a=0 ; a< 50000; a++) {
      NSLog(@"t");
    } 
```

将应用程序发送到后台后，您应该会看到日志记录仍在进行。

要回答您的第二个问题......您应该在 init 中进行初始化，因为您可以确定它只会在每个对象活动及其开始时被调用一次。当然，如果您销毁某些对象，例如，`viewDidUnload`您应该在 viewDidLoad 中重新创建它们。所以每次都取决于您希望 ivars 的值存在多长时间。例如，请参阅这个 SO 问题：[我在 viewDidUnload 中到底必须做什么？](https://stackoverflow.com/questions/2261972/what-exactly-must-i-do-in-viewdidunload)

# programming-languages - 关于参数传递（pass-by-value-result）

> ID：10281490
> 
> 赞同：0
> 
> 时间：2012-04-23T13:27:41.503
> 
> 标签：programming-languages, parameter-passing

如果参数传递机制是pass-by-name-result，执行完类C程序后的结果是什么？

```
procedure swap(int x, int y){
    int t = x;
    x = y;
    y = t;
}

main(){
     int v = 1;
     int list[5] = {1,3,5,7,9};
     swap(v, list[v]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:53:01.427

^(（注意：我假设问题是关于按名称调用的，正如问题的正文所暗示的那样 - 而不是标题所暗示的按值调用的结果。）)

使用按名称调用时，您可以通过在调用站点插入函数的主体并用（未评估的）参数替换函数主体中每次出现的参数名称来计算函数调用的结果。

在这种情况下，这意味着替换每次出现的`x`with`v`和每次出现的`y`with `list[v]`。如果您这样做并在脑海中执行生成的代码，您将看到结果是什么。

# javascript - 读取 HTML 并将文本设置为变量

> ID：10281498
> 
> 赞同：-2
> 
> 时间：2012-04-23T13:28:10.460
> 
> 标签：javascript, html, url, dynamic

我正在尝试在我的网站上设置一个横幅，该横幅基本上从 html 中读取页码（我不能/不会编辑），并在单击时更改横幅内的链接以指向该页面。

关键是要有一个适用于所有页面的横幅和一个根据 html 中的页码动态更新的链接

我正在寻找的 HTML 在普通页面中找到：

```
<div class="left">
<p>
<strong>Page number</strong>
</p>
163
/
XXX
</div> 
```

链接只需要反映页面，例如

.../book.html

将更新为

.../book.html?page=163

如果它是一个范围，它可以简单地转到第一页，我只是想知道如何最好地实现这一点。

沿着这条路线走

```
<a id="myAnchor">link me!</a> ... 

<script type="text/javascript"> var url = ".../book.html"; // .html is the new .com 
var myAnchor = document.getElementById('myAnchor'); 
myAnchor.href = url; 
</script> 
```

但无法想出一种方法来获取页码以将其设置为变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:38:00.517

[演示](http://jsfiddle.net/mplungjan/BkqtJ/)

jQuery：

```
$(document).ready(function() {
  var prefix = "Page number";
  var text = $('.left:contains("'+prefix+'")').text();

  if (text) $("#banner").html(text.split("/")[0]);
}); 
```

HTML：

```
<h1 id="banner"></h1>
<div class="left">
<p>
<strong>Page number</strong>
</p>
163
/
XXX
</div> 
```

要将数字作为 var 获取：

```
if (text) {
  var number = parseInt(text.replace(prefix,"").split("/")[0],10);
} 
```

# javascript - 协助 JavaScript sum 函数

> ID：10281505
> 
> 赞同：2
> 
> 时间：2012-04-23T13:28:30.797
> 
> 标签：javascript, html

刚发帖，但去过这个网站 +/- x1000。

我真的很想获得一些关于如何扩展这个脚本来计算更多表单字段的信息。

目前，此 html\jscript 页面将使用 OnChange 事件对 2 个表单字段执行 SUM 计算。一切都很好，但我无法在计算范围内添加其他字段。

以下是工作代码，如果您想查看我当前的代码尝试，请告诉我。非常感谢您提供的任何帮助。谢谢你。

```
<html> 
<head> 
<title>Calulate</title> 

<script type="text/javascript"> 
function calc(A,B,SUM) { 
  var one = Number(A); 
  if (isNaN(one)) { alert('Invalid entry: '+A); one=0; } 
  var two = Number(document.getElementById(B).value); 
  if (isNaN(two)) { alert('Invalid entry: '+B); two=0; } 
  document.getElementById(SUM).value = one + two;
} 
</script> 

<body> 
<form name="form" > 
Enter a number: 
<input name="sum1" id="op1" value="" onChange="calc(this.value,'op2','result')" /> 
and another number: 
<input name="sum2" id="op2" value="" onChange="calc(this.value,'op1','result')" /> 
<br>
Their sum is: 
<input name="sum" value="" id="result" readonly style="border:0px;"> 
</form> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:37:01.110

好吧，当然有几种方法可以编写一个计算多个输入之和的函数。我将通过扩展你已经拥有的东西来做到这一点，这样你就可以更好地理解你拥有的代码实际上在做什么。最后，可能会有更好的解决方案涉及完全重写。

您必须为数据输入添加标记：

```
and a third number: 
<input name="sum3" id="op3" value="" /> 
```

必须修改您的函数声明以接受另外一个参数：

```
function calc(A,B,C,SUM) { 
```

你的函数体必须像对待这个参数一样`A`对待`B`：

```
var three = Number(document.getElementById(C).value); 
if (isNaN(three)) { alert('Invalid entry: '+C); three=0; } 
```

您的总和必须考虑到这个新数字：

```
document.getElementById(SUM).value = one + two + three; 
```

所有三个输入字段都必须`onChange`更新它们的属性，才能传递`C`我们定义的新参数：

```
<input name="sum1" id="op1" value="" onChange="calc(this.value,'op2','op3','result')" /> 
<input name="sum2" id="op2" value="" onChange="calc(this.value,'op1','op3','result')" /> 
<input name="sum3" id="op3" value="" onChange="calc(this.value,'op1','op2','result')" /> 
```

* * *

现在，为了让您了解您可能完全不同的做法，您可以通过类名访问它们，而不是通过 ID 访问元素。例如，您可以将类名添加`calc`到所有三个输入字段。您可以让函数知道此类名称，也可以将其作为参数传递。在这种情况下，该函数不需要接收和`A`，而只需要类名和输出字段的 ID。`B``C`

```
function(className, SUM) {
    ...
} 
```

在您的函数中，您将能够找到该类名的所有元素：

```
var inputs = document.getElementsByClassName(className); 
```

并迭代它们，随时添加值：

```
var sum = 0;
for(var i = 0; i < inputs.length; i++) {
    var input = inputs[i];
    var num = Number(input.value);

    if(isNaN(num)) { 
        alert('Invalid value: ' + input.value);
        num = 0;
    }

    sum += num;
}

document.getElementById(SUM).value = sum; 
```

然后，您将添加类名并更新您的`onChange`属性，如下所示：

```
<input name="sum1" class="calc" onChange="calc('calc','result')" /> 
<input name="sum2" class="calc" onChange="calc('calc','result')" /> 
<input name="sum3" class="calc" onChange="calc('calc','result')" /> 
```

然后，您将能够添加任意数量的输入字段，并且无需修改函数即可自动计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:41:16.833

一个想法是有一个输入字段的动态列表，这些字段由特定的类标记（`numbers`在下面的代码中）。您的函数可以首先获取所有此类字段的列表并遍历所有这些字段以总结它们。

```
function calc( classId, sumId ) {
  var els = document.querySelectorAll( '.' + classId ),
      sum = 0;

  for( var i=0, max=els.length; i<max; ++i ) {
     if( isNaN( els[i].value ) ) { 
       alert('Invalid entry: '+ els[i].value );
     } else {
       sum += els[i].value;
     }
  }

  document.getElementById( sumId ).value = sum;
} 
```

您的输入字段将如下所示：

```
<input name="sum2" id="op2" value="" class="numbers" onChange="calc( 'numbers', 'result' );" /> 
```

有两点需要注意：

1.  较旧的浏览器不支持`document.querySelectorAll`. 你可能需要一个 polyfill。

2.  最好也由 JS 分配事件。

第二种可以实现如下：

```
(function(){
  var els = document.querySelectorAll( '.' + inClass ),
      classId = 'numbers',
      sumId = 'result';

  for( var i=0, max=els.length; i<max; ++i ) {
     els[i].addEventListener( 'change', function(){ calc( classId, sumId ); } );
  }
})(); 
```

# c++ - 用c ++打开文件，相对还是绝对？

> ID：10281509
> 
> 赞同：2
> 
> 时间：2012-04-23T13:28:48.457
> 
> 标签：c++, eclipse, file, directory

我正在尝试在大代码中打开文件。

有人告诉我，在处理文件时，使用绝对路径而不是相对路径可能是更好的做法。但是，此代码将由不同的人使用，他们可能会将源代码放在不同的位置（例如 /home/username 或 /home/username/desktop/），因此我认为使用相对路径可能会更好访问我的配置文件，因为我知道它与我的 cpp 文件的关系。

以下是与我的问题相关的文件位置的简短总结：

*   我要阅读的文件是 /home/me/myproject/config/myfile.txt

*   我从中读取的文件是 /home/me/myproject/src/myfile.cpp

*   包含'main'的文件也是/home/me/myproject/src/myfile.cpp（这个文件很大）。

我正在从 Eclipse 启动可执行文件。我认为eclipse将工作目录设置为'main'所在的目录（/home/me/myproject/src/）。

当我要调用 file.open() 时，工作目录 (getcwd()) 现在是 /home/me/myproject/，这让我感到困惑。显然，工作目录已被 main() 和我对 file.open() 调用之间的代码修改。

我的问题是：如果可以由程序的另一部分更改，依赖工作目录似乎很容易出错。另一方面，鉴于我不知道其他开发人员通常将他们的资源放在哪里，我应该怎么知道我的配置路径在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:43:12.637

> 我正在从 Eclipse 启动可执行文件。我认为eclipse将工作目录设置为'main'所在的目录（/home/me/myproject/src/）。

你确定吗？在我看来，它是项目文件夹的顶层（即，类似于“/home/eclipse/myproject”，而不是“/home/eclipse/src”。这可以解释原因：

> 工作目录 (getcwd()) 现在是 /home/me/myproject/。

是不是别的什么？除非您明确地做了一些事情来导致它“被程序的另一部分更改”，否则它不太可能被“更改”。

我不清楚您是否了解*source code*和**executable**之间的区别。您的源代码文件不是“运行”。它被编译成可执行文件，这就是运行的内容。使用 eclipse，这些默认放入 Release/ 或 Debug/ （看看），而不是 src/ 目录。eclipse 使用顶层目录的（可能的）原因是这些版本之间的一致性，因此您可以，例如，相对于它的输出。

> 我的问题是：依赖工作目录似乎很容易出错，

无论如何，这绝对是真的。有特定于操作系统的方法来获取用户主目录的路径。您应该得到它，并在文档中指定要保存配置的位置。如果用户不能正确地做到这一点，这不是你的错——但发出一条信息性消息，例如。“找不到配置文件！”。

> 鉴于我不知道其他开发人员通常将他们的资源放在哪里，我应该怎么知道我的配置路径在哪里？

请注意，“其他开发人员”根本不需要包含源代码，因为它不需要运行**可执行文件**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T13:45:29.600

接受文件位置作为参数总是一个好主意，因此使用您的软件的人可以轻松尝试不同的配置。

您始终可以做的是找出当前正在运行的二进制文件的位置。如果您没有找到直接的方法，请使用`getcwd()`和的组合`argv[0]`。如果进程本身不更改工作目录，则运行命令后*不会更改工作目录。*

然后你可以截取文件名并将配置文件的名称附加到路径中（在`base`以下示例中存储在字符串中）。这是一些代码，可以确定路径是绝对路径还是相对路径，并相应地附加它。你需要`boost_filesystem`它是跨平台的：

```
#ifdef WITH_BOOST_FILESYSTEM
    boost::filesystem::path basepath(base), filepath(filename);
    if (!basepath.is_complete()) {
        basepath = filepath.remove_leaf() /= basepath;
        base = basepath.string();
    }
#elif __unix__
    if (base[0] != '/') {
        char *f = strdup(filename.c_str()), *d = dirname(f);
        base = string(d).append("/").append(base);
        free(f);
    }
#else
    std::cerr << "Warning: only absolute file paths accepted." << std::endl;
#endif
    base.append("/"); 
```

# jpa - JPA：可嵌入类中的外键

> ID：10281511
> 
> 赞同：3
> 
> 时间：2012-04-23T13:28:54.403
> 
> 标签：jpa

我有以下情况要解决，但无法正常工作（尝试了 Hibernate 和 EclipseLink）：

```
Table_1:
    Column_A is Primary Key
    ... some other columns do follow 
```

.

```
Table_2:
Column_x is Primary Key and is Foreign Key to Table_1.Column_A
Column_y is Primary Key and is Foreign Key to Table_1.Column_A
Column_z is Primary Key 
```

因此，表 2 具有复合主键。

我试图通过以下方式实现它：

```
class Table_1 {
  @Id int Column_A;
} 
```

.

```
class Table_2 {
  @EmbeddedId PK key;

  @Embeddable class PK {
    @OneToOne(targetEntity=Table_1.class)
    @JoinColumn(name="Column_x",referencedColumnName="Column_A")
    int Column_x;

    @OneToOne(targetEntity=Table_1.class)
    @JoinColumn(name="Column_y",referencedColumnName="Column_A")
    int Column_y;

    int Column_z;

    public boolean equals(Object O) { ... }
    public int hashCode() { ... } 
  }
} 
```

但是，当我运行时，我从 EclipseLink 得到提示，在 @Embeddable 中我只能使用“基本”注释。因此，我的问题是如何解决上述绘制的场景？

我无权访问 Table_1 类的源代码，但必须按原样使用它。此外，很可能会有更多的类/表为 Table_1 建立外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:05:20.317

使用@IdClass。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0)

```
@IdClass(PK.class)
class Table_2 {
    @Id
    @OneToOne(targetEntity=Table_1.class)
    @JoinColumn(name="Column_x",referencedColumnName="Column_A")
    Table_1 Column_x;

    @Id
    @OneToOne(targetEntity=Table_1.class)
    @JoinColumn(name="Column_y",referencedColumnName="Column_A")
    Table_1 Column_y;

    @Id
    int Column_z;

    public boolean equals(Object O) { ... }
    public int hashCode() { ... } 
  }
}

class PK {
    int Column_x;
    int Column_y;
    int Column_z;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T19:23:01.133

使用@EmbeddedId 是对的（而不是@IdClass，它更适用于生成的ID 而不是外键）。我认为您的问题是您将这些 FK 声明为整数，而实际上应该将它们键入 Table_1 或 Table_2 类。

# c# - 在 C# 中的 RichTextBox 中清除文本

> ID：10281520
> 
> 赞同：3
> 
> 时间：2012-04-23T13:29:24.587
> 
> 标签：c#, richtextbox, visual-studio-express

我有一个 RichTextBox，我想对其进行编码，当用户在框中左键单击时，该文本框中的文本会被清除。

请问有人可以帮我吗？

我尝试过的代码是：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    richTextBox1.text = "";
} 
```

目前我有一个写有“在此处输入文本”的框（在属性部分的文本下） - 所以当用户在框内单击时，它将清除该文本，因此用户可以在那里输入文本。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:54:50.617

试试这个

```
private void richTextBox1_Click(object sender, EventArgs e)
{
  if (richTextBox1.Text == "Input Text Here")
  {
    richTextBox1.Clear();
    richTextBox1.Focus();
  }
} 
```

它会检查默认文本是否存在，如果存在则将其清除并赋予 Richbox 焦点，以便您输入文本。否则，它会进行常规的文本更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:35:16.837

订阅 rtb 的 MouseClick，然后执行：

```
 private void richTextBox1_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            richTextBox1.Clear();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:32:18.457

您正在寻找的是一个提示文本框。您可以通过一个 WINAPI 调用来完成此操作。

将此作为参考： http: [//www.codeproject.com/Articles/18858/Fully-themed-Windows-Vista-Controls](http://www.codeproject.com/Articles/18858/Fully-themed-Windows-Vista-Controls)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-25T07:03:36.367

我是 VS2015 用户。

```
richTextBox1.Clear();                 // Form
richTextBox1.Document.Blocks.Clear(); // WPF 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-24T18:26:41.700

这将起作用：

转到富文本框的“属性”。您将在第一行选项卡中看到一个黄色闪电。在那里，您将找到所有可能触发的事件。搜索“Enter”或“Click”条目，双击它。在那里你可以放任何你想要的东西（比如richTextBox1.Text = "";）

# c# - C# - 在 SortedList 中自动生成键

> ID：10281521
> 
> 赞同：0
> 
> 时间：2012-04-23T13:29:28.197
> 
> 标签：c#, sortedlist

我想用整数类型的键创建一个 SortedList，但考虑到代码的性质，我发现自己很难设置它们。

列表有没有办法自己生成密钥？比如，自动编号之类的东西？这可能很明显，但我一直在谷歌搜索，找不到任何东西！

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:30:31.193

为什么不使用标准`List<T>`？它们按索引排序，该索引始终递增。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:33:05.117

您可以使用您定义的类将 SortedList 包装起来，这可以做额外的簿记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:35:46.320

自动编号（或 IDENTITY）实际上只是一个线程安全计数器，因此您可以创建一个属性或类级别变量来检索下一个值，然后增加该值：

```
class TestAutoIncrement
    {
        int counter = 0;
        private Object thisLock = new Object();

        public int GetNextCounterValue()
        {
            lock (thisLock)
            {
                counter++;
                return counter;
            }
        }
    } 
```

# oracle - JDBC 连接失败并出现 ORA-12516

> ID：10281523
> 
> 赞同：5
> 
> 时间：2012-04-23T13:29:33.003
> 
> 标签：oracle, jdbc, oracle-xe

我有一些与 Oracle-11g XE 对话的单元测试。单独运行每个测试都可以正常工作，但是当我全部运行它们时，前几个通过，其余的在尝试创建数据库连接时失败并出现此错误：

```
ORA-12516, TNS:listener could not find available handler with matching protocol stack 
```

无论我以什么顺序运行测试都会发生这种情况，所以问题似乎是我正在使用数据库服务器上的某种资源。

我尝试缓慢运行测试，并检查运行期间使用的连接数：

```
select count(*) from v$session; 
```

会话数始终徘徊在 26 到 28 之间，并且限制设置为 49，所以我不确定问题出在哪里。

如果我快速运行测试，问题也会变得更糟。当我在没有任何额外延迟的情况下运行它们时，90% 会因此错误而失败。我在 tearDown() 中设置了一个睡眠，以便更好地了解正在发生的事情，在这种情况下，只有大约 10% 失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:15:50.873

您可能需要增加 PROCESSES 参数的值。还可以执行“lsnrctl servcies”命令来查看服务是否显示为被阻止。我记得一个类似的问题，其中侦听器很聪明并计算服务请求的连接数。在 PMON 通知它之前，侦听器不会了解断开连接。这可能是 5 或 10 分钟后。所以听众认为你有很多打开的连接，并决定积极主动，不再分发连接——直到 PMON 另有通知。如果您增加 PROCESSES 参数，您可能可以将自己提高到您可能在窗口中建立的连接数。

更新：此链接描述它：[https ://forums.oracle.com/forums/thread.jspa?threadID=360226](https://forums.oracle.com/forums/thread.jspa?threadID=360226)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:43:18.330

查看 v$parameters 以及 alert.log 和 listener.log 中的会话和进程限制 答案就在某处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T19:15:05.340

几年后...

见：[http ://www.eddgrant.com/blog/2010/01/20/increasing-the-number-of-processes-in-oracle-xe.html](http://www.eddgrant.com/blog/2010/01/20/increasing-the-number-of-processes-in-oracle-xe.html)

在 Sql Plus 中运行它解决了我的问题：

```
SQL> alter system set sessions=300 scope=spfile; 
SQL> alter system set processes=300 scope=spfile; 
```

# wordpress - wordpress 元框上的多个图像上传器

> ID：10281526
> 
> 赞同：1
> 
> 时间：2012-04-23T13:29:45.020
> 
> 标签：wordpress, image-uploading, custom-fields

我正在尝试使用 add_meta_box 创建 8 个字段以在帖子上上传图像，但由于某种原因，某些图像 (jpeg) 将不会被上传，无论它们的文件大小是否正确以及宽度和高度是否正确。

**田野：**

```
 function facilitiesimage_box_render(){
    $status_message = get_post_meta($post->ID, 'facilities_img_error', true);
            if($status_message) {
                echo '<div class="error" id="message"><p>' . $status_message . '</p></div>';
            }

            $max_no_img=8; // Maximum number of images value to be set here

            echo '<input type="hidden" name="MAX_FILE_SIZE" value="1524288">';
            echo "<table border='0' width='400' cellspacing='0' cellpadding='0' align=center>";
            for($i=1; $i<=$max_no_img; $i++){
                echo "<tr><td>Images $i</td><td><input type=file name='images[]' class='bginput'></td></tr>";
            }
            echo "<tr><td colspan=2 align=center><input type=submit value='Add Image'></td></tr>";
            echo "</form> </table>";
} 
```

**其余代码：**

```
function update_facilitiesimage($post_id, $post) {

        while(list($key,$value) = each($_FILES['images']['name'])) {
            if(!empty($value)){
                $arr_file_type = wp_check_filetype(basename($value)); 
                $uploaded_file_type = $arr_file_type['type'];
                $allowed_file_types = array('image/jpg', 'image/jpeg', 'image/gif', 'image/png');
                if(in_array($uploaded_file_type, $allowed_file_types)){
                    $upload_dir = wp_upload_dir();
                    $newname = strtolower(str_replace(' ', '-', $value));
                    $add = $upload_dir['path'] . '/' . $newname;
                    copy($_FILES['images']['tmp_name'][$key], $add);
                    list($width, $height) = getimagesize($add);
                    $upload_image_width = '630';
                    $upload_image_height = '350';
                    if($width < $upload_image_width || $height < $upload_image_height) {
                        $upload_feedback = 'Sorry, the image ' . $value . ' does not meet the minimum height/width requirements. Please upload another image.<br/>';
                        update_post_meta($post_id, 'facilities_img_error', $upload_feedback);
                        unlink($add);
                    } 
                    else {
                        $upload_image_width = '630';
                        $upload_image_height = '350';
                        $resized = image_resize($add, $upload_image_width, $upload_image_height, true);
                        unlink($add);
                        $file_name_and_location = $add;
                        $file_title_for_media_library = 'your title here';
                        $attachment = array(
                            'post_mime_type' => $uploaded_file_type,
                            'post_title' => 'Uploaded image ' . addslashes($file_title_for_media_library),
                            'post_content' => '',
                            'post_status' => 'inherit'
                        );
                        $attach_id = wp_insert_attachment( $attachment, $file_name_and_location );
                        require_once(ABSPATH . "wp-admin" . '/includes/image.php');
                        $attach_data = wp_generate_attachment_metadata( $attach_id, $file_name_and_location );
                        wp_update_attachment_metadata($attach_id,  $attach_data);
                        $ra = 'attached_facility-img' . $key;
                        $existing_uploaded_image = (int) get_post_meta($post_id, $ra, true);
                        if(is_numeric($existing_uploaded_image)) {
                            wp_delete_attachment($existing_uploaded_image);
                        }
                        update_post_meta($post_id, $ra ,$attach_id);
                        $upload_feedback = false;
                        update_post_meta($post_id, 'facilities_img_error', $upload_feedback);
                        $fname = strrchr($resized, '/');
                        $img = $upload_dir['baseurl'] . $fname;
                        $table = 'facilitiesimage-' . $key;
                        delete_post_meta($post_id, $table);
                        update_post_meta($post_id, $table, $img);
                    }
                }
                else {
                    $upload_feedback = 'Please upload only image files (jpg, gif or png).<br/>';
                    update_post_meta($post_id, 'facilities_img_error', $upload_feedback);
                }
            }
        }
    }

add_action('save_post','update_facilitiesimage',1,2); 
```

在此之前我只是在学习，所以我为我的代码中的任何 HUGE ERROR（或恐怖）道歉。

一切正常，直到我得到一些不会更新的图像，这些图像是 jpeg，文件大小和尺寸与代码中的值有关。

使用：

```
echo "<pre>";
echo "POST:";
print_r($_POST);
echo "FILES:";
print_r($_FILES);
echo "</pre>"; 
```

我发现这些值是正确的（图像通过了“验证”），但图像没有上传。请注意，该脚本上传其他 jpeg 图像没有问题。

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:30:12.803

字段没问题，这里是 update_facilitiesimage 功能，有一些改进

```
function update_facilitiesimage() {
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
    global $post;
    require_once(ABSPATH . '/wp-admin/includes/image.php');
    while(list($key,$value) = each($_FILES['images']['name'])) {
      if(!empty($value)){

        $gymname = strtolower(str_replace(' ', '-', get_the_author_meta( 'gymname' , $post->post_author )));
        $newname = strtolower(str_replace(' ', '-', $value));
        $upload_dir = wp_upload_dir();
        $add = $upload_dir['path'] . '/' . $gymname . '-' . $newname;
        copy($_FILES['images']['tmp_name'][$key], $add);
        $arr_file_type = wp_check_filetype(basename($add)); 
        $uploaded_file_type = $arr_file_type['type'];
        $allowed_file_types = array('image/jpg','image/jpeg','image/gif','image/png');
        if(in_array($uploaded_file_type, $allowed_file_types)) { 
          list($width, $height) = getimagesize($add);
          $upload_image_slideshow_width = '630';
          $upload_image_slideshow_height = '350';
          if(($width > $upload_image_slideshow_width) || ($height > $upload_image_slideshow_height)) {
            $resized = image_resize($add, $upload_image_slideshow_width, $upload_image_slideshow_height, true);
            unlink($add);
            $add = $resized;
            $fname = strrchr($add, '/');
            $img = str_replace('/', '', $fname);
            $table = 'facilitiesimage-' . $key;
            if(!get_post_meta($post_id, $table)){
              add_post_meta($post_id, $table, $img);
            } 
            else {
              $oldfile = get_post_meta($post_id, $table, true); 
              $oldfilelocation = $upload_dir['path'] . '/' . $oldfile;
              unlink($oldfilelocation);            
              update_post_meta($post_id, $table, $img);
            }
            delete_post_meta($post_id, 'facilities_img_error');            
          }
          elseif (($width < $upload_image_slideshow_width) || ($height < $upload_image_slideshow_height)) {
            $upload_feedback = 'Sorry, but the image ' . $value . ' does not meet the minimum height/width requirements. Please upload another image.';
            if(!get_post_meta($post_id, 'facilities_img_error')){
              add_post_meta($post_id, 'facilities_img_error', $upload_feedback);
            } 
            else {
              update_post_meta($post_id, 'facilities_img_error', $upload_feedback);
            }
            unlink($add);
          }
          elseif (($width == $upload_image_slideshow_width) && ($height == $upload_image_slideshow_height)) {
            $fname = strrchr($add, '/');
            $img = str_replace('/', '', $fname);
            $table = 'facilitiesimage-' . $key;
            if(!get_post_meta($post_id, $table)){
              add_post_meta($post_id, $table, $img);
            } 
            else {
              $oldfile = get_post_meta($post_id, $table, true); 
              $oldfilelocation = $upload_dir['path'] . '/' . $oldfile;
              unlink($oldfilelocation);            
              update_post_meta($post_id, $table, $img);
            }
            delete_post_meta($post_id, 'facilities_img_error');
          }          
        }
        else {
          $upload_feedback = 'Please upload only image files (jpg, gif or png).';
          if(!get_post_meta($post_id, 'facilities_img_error')){
            add_post_meta($post_id, 'facilities_img_error', $upload_feedback);
          } 
          else {
            update_post_meta($post_id, 'facilities_img_error', $upload_feedback);
          }
        }
      }
    }
  }
add_action('save_post','update_facilitiesimage'); 
```

# client-server - 发布/订阅，同时保持对系统完整状态的访问

> ID：10281527
> 
> 赞同：5
> 
> 时间：2012-04-23T13:29:45.410
> 
> 标签：client-server, activemq, messaging, publish-subscribe, stomp

我有一个维护应用程序全局状态的服务器。

客户端可以连接到服务器并获取有关全局状态更改的消息（发布/订阅机制以便服务器广播信息）。

然而，在启动时，客户端根本没有关于全局状态的信息，他们需要它。我想要的是对于订阅系统的任何新客户端，第一条通知消息是应用程序的完整状态。然后他们只收到有关此状态的更改：

1.  客户端连接到消息传递系统
2.  它订阅消息系统
3.  它收到的第一条消息是系统的完整状态
4.  然后，它只接收有关全局状态的更改

这个想法类似于多人游戏，新玩家必须首先获得游戏的完整状态，然后只发送游戏中的变化。

像 ActiveMQ 或 Stomp 这样的消息传递系统可以满足我的需求，因为它们是多语言的，并且可以与多个传输层一起使用。但是，没有发送完整状态的概念（或以连贯的方式累积最后的更改）。

当然，我可以轻松地以静态方式提供此状态（首先我获得完整状态，然后订阅发布/订阅系统），但是我必须注意同时可能发生的变化（我是否丢失了一些变化在处理完整状态时？在我刚刚检索到的全局状态中是否已经考虑到了这种变化？...）。但是，我失去了 Stomp 和 ActiveMQ 已经提供的多语言/多传输方面。

是否有一些现有的库/工具可以做到这一点？ActiveMQ 的某种扩展？类似于 Stomp 的东西？还是需要手工制作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:53:08.783

这不是消息传递域问题，而是特定用例。Pub/Sub 并非旨在了解有关生产者/消费者的任何状态信息，它只是代理消息。

也就是说，有一些不同的重新交付模式可用于缩小差距（[最后图像订阅政策](http://activemq.apache.org/subscription-recovery-policy.html)等），但我会选择更简单的解决方案。[此外，您可能会考虑使用Apache Camel 之](http://camel.apache.org)类的东西在生产者和订阅者之间提供这种额外的逻辑。

正如您所说，棘手的部分是使增量更新与检索到的完整系统映像保持同步。最重要的是，这就是我要做的...

*   提供 REST 服务以允许任何客户端提取系统的完整状态
*   为完整状态数据和增量更新数据添加递增的版本号
*   当客户上线时
    *   订阅以开始获取增量更新（暂时在内部排队）
    *   使用 REST 服务获取完整的系统状态
    *   然后，开始处理增量更新并根据版本号忽略旧的更新

# c# - 如何获取有关设备驱动器的信息

> ID：10281530
> 
> 赞同：2
> 
> 时间：2012-04-23T13:29:55.177
> 
> 标签：c#, c++, .net, c, visual-c++

如何获取有关系统设备驱动程序的信息。就像`Manufacturer,hardwareID,DriverAssembly Version of that device` 在.net编程中一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:36:48.713

我相信问题[Get PC System Information on Windows Machine](https://stackoverflow.com/questions/4742389/get-pc-system-information-on-windows-machine-c-sharp-script)，特别是处理 WMI 和[How To Always Everything IN WMI - Part 3: Hardware](http://www.codeproject.com/Articles/18268/How-To-Almost-Everything-In-WMI-via-C-Part-3-Hardw)的答案可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:28:51.283

要实现上述目的，c# 中的 ManagementObjectSearcher 就足够了。您只需要包含
使用 System.Management；
使用下面的代码 -

```
 ManagementObjectSearcher mos =
                   new ManagementObjectSearcher(@"\root\cimv2", @"Select * From Win32_PnPEntity WHERE ClassGuid = '"+deviceGuid+"'"); 
```

# iphone - 如何在 Tabbar 控制器之前显示登录视图？

> ID：10281541
> 
> 赞同：3
> 
> 时间：2012-04-23T13:30:42.000
> 
> 标签：iphone, ios, xcode, uitabbarcontroller, loginview

我目前开发了一个 iOS 应用程序，允许用户查询他们的帐户（在网站上创建帐户）。

我希望该用户可以在连接后查阅他的帐户。所以，我想要一个第一个视图，它将是一个登录视图。接受连接后，登录视图消失，第一个视图控制器加载数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:09:46.640

在 FirstViewController 的 viewDidAppear 上添加以下代码以在选项卡之前显示 Login ViewController。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    AppDelegate * delegate = [[UIApplication sharedApplication] delegate];
    if (!delegate.login) {  // BOOL value to know if user is logged in or not.If user succefully logged in set value of this as YES else NO.
    LoginViewController * lvc = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];

    [self presentModalViewController:lvc animated:NO];
    [lvc release];

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:43:43.117

您可以`presentModalViewController(_:animated:completion:)`用来呈现登录视图控制器。

成功登录后使用`dismissModalViewControllerAnimated(_:completion:)`关闭该视图控制器，以便您可以看到您的标签栏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T01:37:26.840

我尝试了模态视图控制器方法（即，在启动时以模态方式呈现您的登录视图控制器，`animated:`设置为`false`），但存在问题：如果您尝试过早呈现它（即，`viewWillAppear(animated:)`），它不会显示。如果您尝试得太晚（即，`viewDidAppear(animated:)`），底层视图控制器“显示”只是一瞬间（至少在 iOS 8 上）。

**相反**，我所做的是使用登录视图控制器作为窗口的根视图控制器（设置为主情节提要的初始视图控制器）启动我的应用程序，并且一旦身份验证成功，我“交换”我的应用程序的根视图控制器主标签栏控制器（我懒惰地实例化它形成一个单独的故事板）。

为了通过平滑过渡（动画）实现这一点，而不是立即，我在登录视图控制器中使用如下代码：

```
// Run this code when authentication succeeds:

UIView.transitionWithView(self.view.window,
            duration: 0.3,
            options: UIViewAnimationOptions.TransitionCrossDissolve,
            animations: {
                window.rootViewController = tabBarController
            },
            completion: nil
        ) 
```

（*想法取自[这里](http://jcavar.me/blog/2015/03/14/login-tabbar/)*）

不过，我遇到的一个问题是，我插入的标签栏在所选（当前）标签中包含一个导航控制器，并且在过渡期间，导航栏会向上移动并“重叠”应用程序的状态栏，只有动画完成后跳回正确位置。非常烦人......我通过将这行代码添加到导航控制器中包含的子视图控制器来解决这个问题：

```
override func viewWillAppear(animated: Bool)
{
    super.viewWillAppear(animated)

    self.navigationController?.navigationBar.layer.removeAllAnimations()
} 
```

（*修复取自[这里](https://github.com/andreamazz/SlideOutNavigation/issues/55)*）

**更新：**我注意到在某些模拟器（iPhone 6+，iOS 9.0）上，导航栏“跳转”不会发生，而是一个快速（但温和）的动画将其放置到位。

# java - 是否有可能 - Java Web 应用程序的 Drupal 插件

> ID：10281542
> 
> 赞同：0
> 
> 时间：2012-04-23T13:30:43.640
> 
> 标签：java, drupal, web-applications

这听起来可能很愚蠢，但我想知道是否可以将 Drupal 插件转换为 Java Web 应用程序？是否有某种转换器或连接器，或者可能有办法实现这一点？

我们都知道 Drupal 拥有最多的可用插件。我在想一个drupal插件通过一些过程并作为Java Web应用程序出现在技术上是否可行。听起来很傻，但如果能做到这一点，我会很感兴趣。理想的情况是我将它们作为我的 Java 门户中的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:27:04.807

不，将旨在作为 PHP 应用程序的插件运行的 PHP 代码转换为 Java Web 应用程序并没有什么魔法。

应该可行的（通过一些工作）是使用[Quercus](http://quercus.caucho.com/) PHP 引擎在 Java Web 容器中运行 Drupal 和所需的模块。Quercus 是 PHP 5 的 100% Java 实现。因此，除了在 Java 平台（JVM、Web 容器等）之上运行 PHP 代码之外，您不会转换任何东西。应用程序代码（Drupal 核心、模块、主题等）将被打包为 .war 文件以部署在 Web 容器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:30:48.480

简而言之，没有。

Drupal 插件依赖于 Drupal 钩子系统及其 API，您必须在 Java 中复制它们。鉴于 Drupal 内部结构的复杂性，仅此一项就可能非常困难。将 Drupal 移植到 Python 的努力[从未真正](https://github.com/brendoncrawford/drupy)实现过。

另一种有趣的方法是在[Quercus](http://quercus.caucho.com/)中运行 Drupal ，这将使您能够从 Java 访问 Drupal；即从JVM 中运行PHP。我知道人们已经尝试在 Quercus 中运行 Drupal，但我不确定他们是否成功。我不知道生产中的 Drupal/Quercus 实例。

# iphone - 从导航堆栈中删除视图控制器

> ID：10281545
> 
> 赞同：102
> 
> 时间：2012-04-23T13:30:50.453
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

我有一个导航堆栈，有 5 个 UIViewControllers。我想通过单击第 5 个视图控制器中的按钮来删除堆栈中的第 3 和第 4 个视图控制器。是否有可能做到这一点？如果有怎么办？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-04-23T13:34:40.017

使用此代码并享受：

```
NSMutableArray *navigationArray = [[NSMutableArray alloc] initWithArray: self.navigationController.viewControllers];

// [navigationArray removeAllObjects];    // This is just for remove all view controller from navigation stack.
[navigationArray removeObjectAtIndex: 2];  // You can pass your index here
self.navigationController.viewControllers = navigationArray;
[navigationArray release]; 
```

希望这会帮助你。

编辑：斯威夫特代码

```
guard let navigationController = self.navigationController else { return }
var navigationArray = navigationController.viewControllers // To get all UIViewController stack as Array
navigationArray.remove(at: navigationArray.count - 2) // To remove previous UIViewController
self.navigationController?.viewControllers = navigationArray 
```

编辑：删除除最后一个之外的所有 ViewController -> 左上角没有返回按钮

```
guard let navigationController = self.navigationController else { return }
var navigationArray = navigationController.viewControllers // To get all UIViewController stack as Array
let temp = navigationArray.last
navigationArray.removeAll()
navigationArray.append(temp!) //To remove all previous UIViewController except the last one
self.navigationController?.viewControllers = navigationArray 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-04-23T13:42:47.437

您可以先获取数组中的所有视图控制器，然后在检查相应的视图控制器类后，您可以删除您想要的。

这是一小段代码：

```
NSArray* tempVCA = [self.navigationController viewControllers];

for(UIViewController *tempVC in tempVCA)
{
    if([tempVC isKindOfClass:[urViewControllerClass class]])
    {
        [tempVC removeFromParentViewController];
    }
} 
```

我认为这将使您的工作更轻松。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-12-15T08:12:33.183

**斯威夫特 3 & 4/5**

`self.navigationController!.viewControllers.removeAll()`

`self.navigationController?.viewControllers.remove(at: "insert here a number")`

**斯威夫特 2.1**

移除所有：

`self.navigationController!.viewControllers.removeAll()`

在索引处删除

`self.navigationController?.viewControllers.removeAtIndex("insert here a number")`

还有很多可能的操作，例如 removeFirst、range 等。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2019-04-08T16:00:59.640

斯威夫特 5：

```
navigationController?.viewControllers.removeAll(where: { (vc) -> Bool in
    if vc.isKind(of: MyViewController.self) || vc.isKind(of: MyViewController2.self) {
        return false
    } else {
        return true
    }
}) 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-09-26T05:01:58.810

**斯威夫特 5，Xcode 13**

通过指定要从导航堆栈中删除的视图控制器，我发现这种方法很简单。

```
extension UINavigationController {

    func removeViewController(_ controller: UIViewController.Type) {
        if let viewController = viewControllers.first(where: { $0.isKind(of: controller.self) }) {
            viewController.removeFromParent()
        }
    }
} 
```

示例使用：

```
navigationController.removeViewController(YourViewController.self) 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-08-15T13:01:59.803

使用`setViewControllers`函数 from`UINavigationController`是最好的方法。还有一个`animated`参数可以启用动画。

```
func setViewControllers(_ viewControllers: [UIViewController], animated: Bool) 
```

快速提问的例子

```
func goToFifthVC() {

    var currentVCStack = self.navigationController?.viewControllers
    currentVCStack?.removeSubrange(2...3)

    let fifthVC = UIStoryboard(name: "Main", bundle: nil).instantiateViewController(withIdentifier: "fifthVC")
    currentVCStack?.append(fifthVC)

    self.navigationController?.setViewControllers(currentVCStack!, animated: true)
} 
```

我尝试了其他方式，例如`[tempVC removeFromParentViewController];`. 它做出了奇怪的行为，删除了 ViewController 导航，当弹出时仍然显示 @robin-ellerkmann 报告的那样

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-02-18T06:24:30.283

**斯威夫特 2.0：**

```
 var navArray:Array = (self.navigationController?.viewControllers)!
  navArray.removeAtIndex(navArray.count-2)
  self.navigationController?.viewControllers = navArray 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-02-05T20:14:59.327

## 细节

*   斯威夫特 5.1，Xcode 11.3.1

## 解决方案

```
extension UIViewController {
    func removeFromNavigationController() { navigationController?.removeController(.last) { self == $0 } }
}

extension UINavigationController {
    enum ViewControllerPosition { case first, last }
    enum ViewControllersGroupPosition { case first, last, all }

    func removeController(_ position: ViewControllerPosition, animated: Bool = true,
                          where closure: (UIViewController) -> Bool) {
        var index: Int?
        switch position {
            case .first: index = viewControllers.firstIndex(where: closure)
            case .last: index = viewControllers.lastIndex(where: closure)
        }
        if let index = index { removeControllers(animated: animated, in: Range(index...index)) }
    }

    func removeControllers(_ position: ViewControllersGroupPosition, animated: Bool = true,
                           where closure: (UIViewController) -> Bool) {
        var range: Range<Int>?
        switch position {
            case .first: range = viewControllers.firstRange(where: closure)
            case .last:
                guard let _range = viewControllers.reversed().firstRange(where: closure) else { return }
                let count = viewControllers.count - 1
                range = .init(uncheckedBounds: (lower: count - _range.min()!, upper: count - _range.max()!))
            case .all:
                let viewControllers = self.viewControllers.filter { !closure($0) }
                setViewControllers(viewControllers, animated: animated)
                return
        }
        if let range = range { removeControllers(animated: animated, in: range) }
    }

    func removeControllers(animated: Bool = true, in range: Range<Int>) {
        var viewControllers = self.viewControllers
        viewControllers.removeSubrange(range)
        setViewControllers(viewControllers, animated: animated)
    }

    func removeControllers(animated: Bool = true, in range: ClosedRange<Int>) {
        removeControllers(animated: animated, in: Range(range))
    }
}

private extension Array {
    func firstRange(where closure: (Element) -> Bool) -> Range<Int>? {
        guard var index = firstIndex(where: closure) else { return nil }
        var indexes = [Int]()
        while index < count && closure(self[index]) {
            indexes.append(index)
            index += 1
        }
        if indexes.isEmpty { return nil }
        return Range<Int>(indexes.min()!...indexes.max()!)
    }
} 
```

## 用法

```
removeFromParent()

navigationController?.removeControllers(in: 1...3)

navigationController?.removeController(.first) { $0 != self }

navigationController?.removeController(.last) { $0 != self }

navigationController?.removeControllers(.all) { $0.isKind(of: ViewController.self) }

navigationController?.removeControllers(.first) { !$0.isKind(of: ViewController.self) }

navigationController?.removeControllers(.last) { $0 != self } 
```

## 完整样本

> 不要忘记在**此处粘贴解决方案代码**

```
import UIKit

class ViewController2: ViewController {}

class ViewController: UIViewController {

    private var tag: Int = 0
    deinit { print("____ DEINITED: \(self), tag: \(tag)" ) }

    override func viewDidLoad() {
        super.viewDidLoad()
        print("____ INITED: \(self)")
        let stackView = UIStackView()
        stackView.axis = .vertical
        view.addSubview(stackView)
        stackView.translatesAutoresizingMaskIntoConstraints = false
        stackView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = true
        stackView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true

        stackView.addArrangedSubview(createButton(text: "Push ViewController() white", selector: #selector(pushWhiteViewController)))
        stackView.addArrangedSubview(createButton(text: "Push ViewController() gray", selector: #selector(pushGrayViewController)))
        stackView.addArrangedSubview(createButton(text: "Push ViewController2() green", selector: #selector(pushController2)))
        stackView.addArrangedSubview(createButton(text: "Push & remove previous VC", selector: #selector(pushViewControllerAndRemovePrevious)))
        stackView.addArrangedSubview(createButton(text: "Remove first gray VC", selector: #selector(dropFirstGrayViewController)))
        stackView.addArrangedSubview(createButton(text: "Remove last gray VC", selector: #selector(dropLastGrayViewController)))
        stackView.addArrangedSubview(createButton(text: "Remove all gray VCs", selector: #selector(removeAllGrayViewControllers)))
        stackView.addArrangedSubview(createButton(text: "Remove all VCs exept Last", selector: #selector(removeAllViewControllersExeptLast)))
        stackView.addArrangedSubview(createButton(text: "Remove all exept first and last VCs", selector: #selector(removeAllViewControllersExeptFirstAndLast)))
        stackView.addArrangedSubview(createButton(text: "Remove all ViewController2()", selector: #selector(removeAllViewControllers2)))
        stackView.addArrangedSubview(createButton(text: "Remove first VCs where bg != .gray", selector: #selector(dropFirstViewControllers)))
        stackView.addArrangedSubview(createButton(text: "Remove last VCs where bg == .gray", selector: #selector(dropLastViewControllers)))
    }

    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        if title?.isEmpty ?? true { title = "First" }
    }

    private func createButton(text: String, selector: Selector) -> UIButton {
        let button = UIButton()
        button.setTitle(text, for: .normal)
        button.setTitleColor(.blue, for: .normal)
        button.addTarget(self, action: selector, for: .touchUpInside)
        return button
    }
}

extension ViewController {

    private func createViewController<VC: ViewController>(backgroundColor: UIColor = .white) -> VC {
        let viewController = VC()
        let counter = (navigationController?.viewControllers.count ?? -1 ) + 1
        viewController.tag = counter
        viewController.title = "Controller \(counter)"
        viewController.view.backgroundColor = backgroundColor
        return viewController
    }

    @objc func pushWhiteViewController() {
        navigationController?.pushViewController(createViewController(), animated: true)
    }

    @objc func pushGrayViewController() {
        navigationController?.pushViewController(createViewController(backgroundColor: .lightGray), animated: true)
    }

    @objc func pushController2() {
        navigationController?.pushViewController(createViewController(backgroundColor: .green) as ViewController2, animated: true)
    }

    @objc func pushViewControllerAndRemovePrevious() {
        navigationController?.pushViewController(createViewController(), animated: true)
        removeFromNavigationController()
    }

    @objc func removeAllGrayViewControllers() {
        navigationController?.removeControllers(.all) { $0.view.backgroundColor == .lightGray }
    }

    @objc func removeAllViewControllersExeptLast() {
        navigationController?.removeControllers(.all) { $0 != self }
    }

    @objc func removeAllViewControllersExeptFirstAndLast() {
        guard let navigationController = navigationController, navigationController.viewControllers.count > 1 else { return }
        let lastIndex = navigationController.viewControllers.count - 1
        navigationController.removeControllers(in: 1..<lastIndex)
    }

    @objc func removeAllViewControllers2() {
        navigationController?.removeControllers(.all) { $0.isKind(of: ViewController2.self) }
    }

    @objc func dropFirstViewControllers() {
        navigationController?.removeControllers(.first) { $0.view.backgroundColor != .lightGray }
    }

    @objc func dropLastViewControllers() {
        navigationController?.removeControllers(.last) { $0.view.backgroundColor == .lightGray }
    }

    @objc func dropFirstGrayViewController() {
        navigationController?.removeController(.first) { $0.view.backgroundColor == .lightGray }
    }

    @objc func dropLastGrayViewController() {
        navigationController?.removeController(.last) { $0.view.backgroundColor == .lightGray }
    }
} 
```

## 结果

[![在此处输入图像描述](../Images/d987f793206848bddb686be1ed0c1372.png)](https://i.stack.imgur.com/lwLd0.png)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-04-23T13:47:03.437

如果您尝试从第 5 个视图控制器（跳过第 3 个和第 4 个）移动到第 2 个视图控制器，您想使用`[self.navigationController popToviewController:secondViewController]`.

您可以`secondViewController`从导航控制器堆栈中获取。

```
secondViewController =  [self.navigationController.viewControllers objectAtIndex:yourViewControllerIndex]; 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-05-28T12:55:31.030

用这个

```
if let navVCsCount = navigationController?.viewControllers.count {
    navigationController?.viewControllers.removeSubrange(Range(2..<navVCsCount - 1))
} 
```

它将处理 navigationController 的 ViewControllers。viewControllers 和一个在 navigationBar 中堆叠的 navigationItems。

注意：*确保至少在 viewDidAppear 之后调用它*

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-08-02T13:18:22.167

**斯威夫特 5.1，Xcode 11**

```
extension UINavigationController{
public func removePreviousController(total: Int){
    let totalViewControllers = self.viewControllers.count
    self.viewControllers.removeSubrange(totalViewControllers-total..<totalViewControllers - 1)
}} 
```

确保在前一个控制器的 viewDidDisappear() 或新控制器的 viewDidAppear() 之后调用此实用程序函数

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-07-04T07:48:31.647

这个解决方案在 swift 4 中对我有用：

```
let VCCount = self.navigationController!.viewControllers.count
self.navigationController?.viewControllers.removeSubrange(Range(VCCount-3..<VCCount - 1)) 
```

您当前在堆栈中的视图控制器索引是：

```
self.navigationController!.viewControllers.count - 1 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-16T11:03:33.583

除非另有说明，否则我使用方法编写了一个扩展，该方法删除了 root 和 top 之间的所有控制器。

```
extension UINavigationController {
func removeControllers(between start: UIViewController?, end: UIViewController?) {
    guard viewControllers.count > 1 else { return }
    let startIndex: Int
    if let start = start {
        guard let index = viewControllers.index(of: start) else {
            return
        }
        startIndex = index
    } else {
        startIndex = 0
    }

    let endIndex: Int
    if let end = end {
        guard let index = viewControllers.index(of: end) else {
            return
        }
        endIndex = index
    } else {
        endIndex = viewControllers.count - 1
    }
    let range = startIndex + 1 ..< endIndex
    viewControllers.removeSubrange(range)
} 
```

}

如果您想使用范围（例如：2 到 5），您可以使用

```
 let range = 2 ..< 5
    viewControllers.removeSubrange(range) 
```

在 iOS 12.2、Swift 5 上测试

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-13T16:34:25.253

// 按类名从堆栈中删除视图控制器，然后关闭当前视图。

```
 self.navigationController?.viewControllers.removeAll(where: { (vc) -> Bool in
      if vc.isKind(of: ViewController.self) || vc.isKind(of: ViewController2.self) 
       {
        return true
        } 
     else 
        {
         return false
         }
        })
self.navigationController?.popViewController(animated: false)
self.dismiss(animated: true, completion: nil) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-22T11:36:15.653

**斯威夫特 5.4**

去除`SpecificViewController`

```
navigationController.viewControllers.removeAll { $0 is SpecificViewController } 
```

# c# - 在各种缓存中有意义

> ID：10281546
> 
> 赞同：0
> 
> 时间：2012-04-23T13:30:56.257
> 
> 标签：c#, asp.net-mvc, caching

我有一个 asp.net-MVC 应用程序。

我想向我的应用程序添加缓存。

我知道有很多缓存实用程序，

我知道它们在应该使用的层上有所不同。

有人可以对各种缓存方法有所了解吗？

*   CurrentContext.Cache
*   MSEnterprise 缓存
*   查看数据
*   国家包
*   输出缓存 - VarByParams
*   部分视图

**更新** 我应该为 Dal 使用什么缓存？比尔? 用户界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:08:09.457

缓存方法取决于您要实现的目标。我没有使用所有这些缓存方法，但我将解释我们如何在多个层中使用缓存。

假设我们至少在多个服务器上托管了三层 Web 应用程序，并通过负载平衡器或某些代理进行访问。

对于静态数据或不需要经常更新的数据，我们使用它提供的 System.Runtime.Caching，Dictionary 并且我们将数据存储在单个服务器上。假设我们在应用程序中有一些设置，我们需要在每个请求（如站点元数据）上进行设置。我们希望通过缓存来保存行程并加载到数据库中。

对于博客之类的东西，我们使用 memcached 之类的分布式缓存，所有服务器共享一些内存来存储字典值。但是由于缓存中只有一个数据实例，因此任何服务器都可以更改或删除缓存项，并且所有服务器都会更新数据。数据库查询通常很昂贵，因此您将已处理的数据保留在缓存中，但您知道何时更改或删除数据。

对于简单的 ui 元素，我们使用输出缓存。它通常在简单的应用程序上缓存几乎没有逻辑的方法。如果数据已更改，您将无法很好地控制或删除它。我们在静态元素上使用它，例如缓存导航的部分视图。它还可以节省对数据库的访问，但如果数据库值发生更改，您将无法从业务逻辑层重新缓存它。

我们不需要任何其他方法，但缓存通常非常重要。我们更喜欢在较低级别手动缓存，编写和使用需要更多时间，但提供更好的控制。

编辑：使用缓存时，我强烈建议为缓存编写代理类，因此在测试中您可以将其关闭以查找消耗性能的代码部分。

# python-3.x - 如何从 fasta 文件中读取 biopython 序列并将它们分配为 RNAfold 的输入以进行结构预测？

> ID：10281547
> 
> 赞同：-2
> 
> 时间：2012-04-23T13:30:56.353
> 
> 标签：python-3.x, biopython

我需要一个程序从fasta文件（大约1000个序列）中读取每个序列，并将每个序列用作另一个应用程序（RNAfold）的输入以进行二级结构预测。我正在使用python。可能吗？有人可以给我一个指导代码吗？

@Lennart 我已将代码修改为以下代码：

$

```
 from Bio import SeqIO
      import subprocess, re
      PIPE = -1

    handle = open ("D:\python\hsa.fa", "rU")

for record in SeqIO.parse(handle, "fasta"):

output = subprocess.Popen("D:\python\RNAfold.exe -p -d2 --noLP -P", shell=True, stdin = PIPE, stdout = PIPE)

 print output
handle.close() 
```

并且得到以下与 RNAfold 输出无关的输出：我的代码有什么问题？

```
<subprocess.Popen object at 0x02CCEE90>
<subprocess.Popen object at 0x02CCEF30>
<subprocess.Popen object at 0x02CCEF70>
<subprocess.Popen object at 0x02CCEFB0>
<subprocess.Popen object at 0x02CCEB90>
<subprocess.Popen object at 0x02CCEE30>
<subprocess.Popen object at 0x02CCECD0>
<subprocess.Popen object at 0x02CCED90>
<subprocess.Popen object at 0x02CCEEB0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:30:42.747

首先：

```
for record in SeqIO.parse(handle, "fasta"):
         seq = record.seq 
```

将 seq 设置为最后一条记录上的 seq 。这听起来没什么用。你可能想做点别的。

其次，由于 RNAfold.exe 显然是从标准输入读取数据，因此最简单的方法是生成一个包含您想要提供的数据的文件。从 Python 调用它没有什么意义，而是将数据写入文件。

总而言之，您的程序表现出一个典型的初学者错误：您试图一口气编写整个程序，然后当它不起作用时，您尝试分析程序以发现问题。

相反，您需要一点一点地编写程序，并始终验证每个位是否确实按照您的想法进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:09:41.850

The object you call "output" is not output, it is a process object. The output comes from output.stdout.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T15:36:37.480

我也在使用 python 来运行 RNA 折叠。此代码适用于 cofold ...写入输入文件并关闭它在“读取”中打开它然后在写入中打开输出文件，运行可执行文件，然后关闭文件并读取输出文件...

```
 in_w = open('temp_RNAcofold_inputs_24544.txt', 'w')
        in_w.write(sequence1.replace(' ','') + '&' + sequence2.replace(' ',''))
        in_w.close()
        in_r=open('temp_RNAcofold_inputs_24544.txt', 'r')
        out_w = open('temp_RNAcofold_ouputs_24544.txt', 'w' )
        p = subprocess.Popen('C:/Users/s1342417/Dropbox/PhD_work/ViennaRNA_Package/RNAcofold.exe' '-a' , stdin = in_r , stdout = out_w  ,shell =True )
        p.wait()
        out_w.close()
        in_r.close()
        out_r = open('temp_RNAcofold_ouputs_24544.txt','r')
        output = ''
        for line in out_r :
            output = output + out_r.readline()
            print ('a'+str(output))
        out_r.close()
        os.remove('temp_RNAcofold_ouputs_24544.txt')
        os.remove('temp_RNAcofold_inputs_24544.txt') 
```

# iphone - 如何从 Cocos2D 返回 UIkit？

> ID：10281551
> 
> 赞同：1
> 
> 时间：2012-04-23T13:31:07.360
> 
> 标签：iphone, ios, uikit, cocos2d-iphone

在经历了许多痛苦、流泪和脱发后，我终于设法将我的 UIKit（启用 ARC）应用程序与我的 Cocos2D 游戏项目合并。基本上，我有一个 UIKit 应用程序，它（除其他外）有一个按钮来玩 Cocos2D 游戏。该按钮调用一个设置导演、eaglview 和场景等的动作，游戏按预期运行。

当你在游戏中死去时，我想通过 UIKit 中的玩游戏按钮自动返回菜单，但我完全不知道如何实现这一点。有任何想法吗？

那些愿意回答的人请记住，我对这一切有点陌生，如果你假装在和一个 5 岁的孩子说话，我没关系。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:36:46.227

我不确定您是如何将 Cocoa Touch 部分与 cocos2d 集成的，但您是否尝试过这样的事情：

```
[[[CCDirector sharedDirector] openGLView] removeFromSuperview];
[[CCDirector sharedDirector] end];
// any further cleanup, according to your integration code 
```

# java - setStorageEncryption 不产生任何效果

> ID：10281552
> 
> 赞同：9
> 
> 时间：2012-04-23T13:31:15.790
> 
> 标签：java, android, security, encryption

我在我的 Pandaboard 上玩过设备管理 API，尽管 getStorageEncryption 返回的状态为 TRUE，但 setStorageEncryption 方法似乎没有任何效果。

在熊猫板的情况下，应用程序内部存储物理放置在可移动闪存卡的某个位置（它没有任何其他闪存存储）。所以我做了以下事情：

1.  调用 setStorageEncryption(true)（来自 ApiDemos 示例的 DeviceAdminSample.java）。
2.  通过调用 getStorageEncryption、getStorageEncryptionStatus 验证加密是否处于活动状态，并将示例文件保存在内部存储中。

```
if (mDPM.getStorageEncryption(mDeviceAdminSample)) {
        string = "TRUE Encryption";
}

FileOutputStream fos = null;

fos = openFileOutput("hello_file.txt", Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

1.  从 Pandaboard 中取出 SD 卡，将其放入读卡器并将全部内容复制到我的 PC

    sudo dd if=/dev/sdc of=~/workspace/flash_card.bin

2.  尝试查找字符串：

    $ grep -Ubo --binary-files=text 'TRUE Encryption' ~/workspace/flash_card.bin

    583576877：真加密

当它找到字符串时，我得出结论，没有加密。

实际上 setStorageEncryption 是否启用了加密，或者它只请求加密，或者换句话说“声明你的意图”来加密存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:40:26.207

我相信您必须另外调用以下代码：

```
// Launch the activity to activate encryption.  May or may not return!
Intent intent = new Intent(DevicePolicyManager.ACTION_START_ENCRYPTION);
startActivityForResult(intent, REQUEST_CODE_START_ENCRYPTION); 
```

它取自设备管理示例。

# properties - C++ Builder XE - 如何实现 TFont 属性

> ID：10281556
> 
> 赞同：0
> 
> 时间：2012-04-23T13:31:30.277
> 
> 标签：properties, fonts, custom-component, c++builder-xe

我正在开发从 TCustomControl 类派生的自定义组件。我想添加新的基于 TFont 的属性，可以在设计时编辑，例如在 TLabel 组件中。基本上我想要的是为用户添加更改字体的各种属性（名称、大小、样式、颜色等）的选项，而无需将这些属性中的每一个都添加为单独的属性。

我的第一次尝试：

```
class PACKAGE MyControl : public TCustomControl
{
...
__published:
    __property TFont LegendFont = {read=GetLegendFont,write=SetLegendFont};

protected:
    TFont __fastcall GetLegendFont();
    void __fastcall SetLegendFont(TFont value);
...
} 
```

编译器返回错误“E2459 Delphi 样式类必须使用 operator new 构造”。我也不知道我应该使用数据类型 TFont 还是 TFont*。在我看来，每次用户更改单个属性时创建新对象实例效率低下。我将不胜感激代码示例如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T22:56:48.247

派生自的类`TObject`必须使用`new`运算符在堆上分配。您试图在`TFont`不使用任何指针的情况下使用，这是行不通的。您需要像这样实现您的属性：

```
class PACKAGE MyControl : public TCustomControl
{
...
__published:
    __property TFont* LegendFont = {read=FLegendFont,write=SetLegendFont};

public:
    __fastcall MyControl(TComponent *Owner);
    __fastcall ~MyControl();

protected:
    TFont* FLegendFont;
    void __fastcall SetLegendFont(TFont* value);
    void __fastcall LegendFontChanged(TObject* Sender);
...
}

__fastcall MyControl::MyControl(TComponent *Owner)
    : TCustomControl(Owner)
{
    FLegendFont = new TFont;
    FLegendFont->OnChange = LegendFontChanged;
}

__fastcall MyControl::~MyControl()
{
     delete FLegendFont;
}

void __fastcall MyControl::SetLegendFont(TFont* value)
{
    FLegendFont->Assign(value);
}

void __fastcall MyControl::LegendFontChanged(TObject* Sender);
{
    Invalidate();
} 
```

# php - SignatureDoesNotMatch - Amazon S3 API

> ID：10281557
> 
> 赞同：9
> 
> 时间：2012-04-23T13:31:30.940
> 
> 标签：php, file-upload, upload, amazon-s3, amazon

我正在为 Amazon S3 和 CloudFront- [Link](https://github.com/tpyo/amazon-s3-php-class)使用 PHP 类。但是当我尝试将文件上传到存储桶中时，我收到此错误：

> [SignatureDoesNotMatch] 我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。

如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T13:55:24.897

当您注册亚马逊时，您可以为自己创建一个密钥对（亚马逊称这些访问密钥 ID 和秘密访问密钥）。

这两个用于签署对亚马逊网络服务的请求。亚马逊会重新计算签名并比较它是否与您请求中包含的签名匹配。这样，秘密访问密钥就不需要通过网络传输。

如果您收到“签名不匹配”，很可能您使用了错误的秘密访问密钥。您可以仔细检查访问密钥和秘密访问密钥以确保它们正确吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-02T15:43:59.810

就我个人而言，由于我的元数据中的字符，我收到了这个错误。

有问题的字符是“-”字符，它在 unicode 中是“\u2013”​​，与“-”不同。

```
$result = $s3->putObject(array(
    'Bucket'       => $bucket,
    'Key'          => $keyname,
    'Metadata' => [
        'name' => 'Terminology – Blah'
    ]
)); 
```

来自文档 **[http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html#UserMetadata](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html#UserMetadata)** ...

> Amazon S3 以小写形式存储用户定义的元数据。每个名称、值对在使用 REST 时必须符合 US-ASCII，在使用 SOAP 或通过 POST 进行基于浏览器的上传时必须符合 UTF-8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-22T20:00:35.377

`putObject()`在指定`Key`以斜杠字符 ( ) 开头时出现此错误`/`- 删除斜杠后它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T14:37:42.827

AWS 返回此错误的原因通常是**密钥**不**正确**

# macos - 安装自制程序所需的root密码

> ID：10281560
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:31:40.187
> 
> 标签：macos, homebrew

我尝试安装自制软件

```
/usr/bin/ruby -e "$(/usr/bin/curl -fksSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

但它需要root密码

```
 ==> /usr/bin/sudo /bin/chmod g+rwx /usr/local/. /usr/local/bin /usr/local/include /usr/local/lib /usr/local/lib/pkgconfig /usr/local/share /usr/local/share/man /usr/local/share/man/man1

WARNING: Improper use of the sudo command could lead to data loss
or the deletion of important system files. Please double-check your
typing when using sudo. Type "man sudo" for more information.

To proceed, enter your password, or type Ctrl-C to abort.

Password: 
```

但是我没有在我的mac上设置任何密码。

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:40:20.673

这不需要root密码。该消息是关于`sudo`，它需要具有管理员权限的用户的密码。尝试仅使用您的用户帐户的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:37:24.400

大多数 UNIX 操作系统都使用空白密码禁用了 root 用户。如果您愿意提供有关您的操作系统的更多详细信息，我可以为您提供设置密码所需的信息。

# linux - 为什么amd64 linux中的系统调用号不同？

> ID：10281567
> 
> 赞同：15
> 
> 时间：2012-04-23T13:32:00.847
> 
> 标签：linux, naming-conventions, x86-64, system-calls

我注意到 x86`int $0x80`和 amd64`syscall`系统调用有不同的编号。例如，`sys_exit`在 x86 中是系统调用 1，在 amd64 中是系统调用 60。不同的系统调用编号方案是否有（历史）原因？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T13:50:57.900

系统调用接口应该非常稳定，只允许添加。谈到每个体系结构的系统调用接口不同这一事实，Linux 人员很可能决定清理一些积累的垃圾并从头开始启动 amd64 系统调用。

参考：`linux/Documentation/ABI/stable/syscalls`

> 该接口与 POSIX 接口的大部分内容相匹配，并且基于它和其他基于 Unix 的接口。它只会随着时间的推移而添加，而不会从中删除任何东西。
> 
> 请注意，对于 Linux 支持的每种体系结构，此接口都不同。有关要映射到每个系统调用的系统调用号的详细信息，请参阅特定于体系结构的文档。

# asp.net-mvc - 奇怪的路由行为（或者这是正常的）？

> ID：10281573
> 
> 赞同：0
> 
> 时间：2012-04-23T13:32:15.370
> 
> 标签：asp.net-mvc, routing, default-value

在 ASP.NET MVC 应用程序中（在其他路由中）有以下一个（在 registerRoutes 中）：

```
routes.MapRoute(
                "DealRouteForCategory", // Route name
                "{city}/{category}", // URL with parameters                    
                new {city="", category = "someCategory", controller = "Deal", action = "Details" }, // Parameter defaults   
                new { controller = "^Deal$" }                 
            ); 
```

如果城市默认值被省略（注意下面的代码片段中的城市不包含在默认值部分）

```
 routes.MapRoute(
                    "DealRouteForCategory", // Route name
                    "{city}/{category}", // URL with parameters                    
                    new {category = "someCategory", controller = "Deal", action = "Details" }, // Parameter defaults   
                    new { controller = "^Deal$" }                 
                ); 
```

然后我有问题：错误说找不到这个资源。

这是正常的吗？

我可以接受这样一个事实，即我可以使用第一个版本在运行时提供一个值，但我想知道为什么第二个版本失败了！

提前致谢

# php - 如何根据同一SELECT中的不同ID从表中获取两个值

> ID：10281574
> 
> 赞同：2
> 
> 时间：2012-04-23T13:32:17.643
> 
> 标签：php, mysql, sql

我有两张桌子：

```
Users
=====================================
id, name, country_id, nationality_id

Countries
=====================================
id, name, currency 
```

`country_id`并且`nationality_id`都使用国家表中的 id。

`country_id`并且`nationality_id`不一定相同。

我想要得到的是一个表格，其中包含给定国家/地区的每个用户的姓名、他们国家/地区的名称`nationality_id`以及他们使用的货币`country_id`。

我的问题是如何执行 WHERE 子句。这就是我所拥有的，但这是不正确的，因为货币回来了`nationality_id`而不是`country_id`.

希望这是有道理的......

```
SELECT
    Users.name,
    Countries.name,
    Countries.currency
FROM
    Users, Countries
WHERE
    Users.nationality_id = Countries.id 
AND Countries.id = 6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:36:08.693

诀窍是使用两个`Countries`具有不同别名的连接，一个用于nationality_id，另一个用于country_id。

```
SELECT
    Users.name,
    /* name from the nationality_id join */
    cn.name,
    /* currency from the country_id join */
    cc.currency
FROM
    Users
      JOIN Countries cn ON Users.nationality_id = cn.id 
      JOIN Countries cc ON Users.country_id = cc.id 
WHERE 
    Users.country_id = 6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:36:12.280

您需要两次加入`countries`餐桌 - 一次是国籍，一次是居住国。为此，您可以使用别名，如下面的查询所示。

```
SELECT
 users.*,
 nationality.name AS nationality,
 resident_country.currency
FROM
  users
INNER JOIN
  countries       AS nationality
    ON users.nationality_id = nationality.id
INNER JOIN
  countries       AS resident_country
    ON users.country_id     = resident_country.id
WHERE
  users.country_id = 6 
```

然后，您可以按`users`表格过滤所有内容。我按常驻国家/地区过滤，您可以使用`users.nationality_id = 6`或任何您喜欢的方式将其更改为国籍。如果您需要按`countries`表的内容进行过滤，您可以按适当的别名进行过滤。

*（您不能引用`countries`using `countries.???`，因为每次在查询中使用它时都会给它一个别名。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:36:40.687

```
Select * from Users u 
left join Countries c 
on c.id = u.nationality_id 
where c.id = 6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:41:56.010

不知道为什么你会做 dat 因为有 2 列使用来自不同表的相同 id 无论如何这就是我会这样做 -

```
 SELECT Users.name, nt.name, curr.currency FROM
    Users
      JOIN Countries nt ON Users.nationality_id = nt.id 
      JOIN Countries curr ON Users.country_id = curr.id 
   WHERE 
    Users.country_id = 6 
```

# javascript - 单击后隐藏菜单（淡出）

> ID：10281577
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:32:39.177
> 
> 标签：javascript, html, css

这个简单的 html css 菜单。现在它可以很好地用于页面重定向（href）。

但**我想在点击后隐藏。**

我只是在单击它时调用函数，它将调用 ajax 请求

[http://jsfiddle.net/5TBFr/](http://jsfiddle.net/5TBFr/)代码在链接中

![这是图像快照](../Images/3f75a437b40b277706ada34c033363bc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:04:38.400

我想这就是你要找的东西：http: [//jsfiddle.net/5TBFr/26/](http://jsfiddle.net/5TBFr/26/)

我在 a 元素上添加了一个点击事件，并且我返回 false，因此请求被停止。您可以在那里添加您的 ajax 请求。我做了一些工作，移动“ul”元素，让鼠标离开它并隐藏，然后我将它移回它的初始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:03:33.467

首先，如果我理解你，你想要什么，你将需要 jQuery，为什么？因为 javascript 不知道哪些 CSS 属性会影响特定元素。

其次，您使用 CSS 的方式不正确，您将设计和功能混合在一起，对于像这样的最简单的任务，您会遇到像这样的问题。即使可以，CSS 也不打算显示或隐藏菜单，CSS 甚至可以动态地设置样式，但是当涉及到用户交互时，您就完蛋了。所以要小心：P

在 jQuery 中应该是这样的：

```
$(document)​.ready(function()
{
    $('ul').on('click', 'li a', function()
    {
        $(this.parentElement.parentElement).hide();
    });
});​ 
```

[http://jsfiddle.net/5TBFr/25/](http://jsfiddle.net/5TBFr/25/)

# arrays - 确定数组是增加还是减少的最佳方法

> ID：10281578
> 
> 赞同：1
> 
> 时间：2012-04-23T13:32:42.420
> 
> 标签：arrays, algorithm

给定一个值数组，我想确定它是递增数组还是递减数组。当然，如果我们只想检测单调增加/减少，这是微不足道的。但是如果我们有一个这样的数组：

3, 3.2, 3.4, 3.3, 3.4, 3.7, 4.2, 4.8

它确实是一个递增的数组，但不是单调的，因为对于 i=3 我们有 3.3<3.4

此外，第一个和最后一个索引之间的单次检查对我来说不是一个选项，因为我可能正在使用角度，并且我可以完成多个圆圈：

270º、290º、315º、345º、5º

我会说顺时针方向也在增加，尽管 5º<270º

另外，如果我定义从 0 到 180 的角度，然后是 -180 到 0 而不是 0 到 360，这又是一个问题：

170º、175º、180º、-175º、-170º 对我来说再次增加。

我想为 C++ 编写这个，但对我来说重要的是要使用的算法。任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T13:47:00.587

使用[线性回归](http://en.wikipedia.org/wiki/Linear_regression)。根据产生的斜率，您可以决定它是增加还是减少。

![来自维基百科的线性回归示例](../Images/077bbb8371d7b426370b4334190d08d5.png)

至于循环情况：我只需将“否定”元素移动到列表前面，然后进行测试......

注意：对于像`5 4 3 2 1 1000`这样的特殊情况，仍然会告诉您它正在增加，但是由于“增加”的定义非常模糊，因此很难为您的问题给出准确的答案。（您可能想过滤掉一些疯狂的值？）

另一种简单的方法是计算相邻元素之间的增加和减少的数量，但在这种情况下`10 11 12 13 14 0 1 2 3 4`会明显增加（这可能是正确的答案，很难说..）

如果不知道更多你想要达到的目标，很难给出一个好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:43:05.847

这是python中的一个例子：

```
def angles_are_increasing(a):
    first=a[0]
    value=first
    previous=first
    for current in a:
        delta=current-previous
        if delta<180:
            delta+=360
        elif delta>180:
            delta-=360
        value+=delta
        previous=current
    last=value
    return last>first 
```

这个想法是在角度回绕时平滑跳跃，例如将 345,5 视为 345,365。如果您边做边做，您可以将最终值与第一个值进行比较，以查看这些值是否普遍增加。

# c - 程序编程中的 GOTO、CONTINUE、BREAK，它们如何影响状态？

> ID：10281579
> 
> 赞同：0
> 
> 时间：2012-04-23T13:32:43.843
> 
> 标签：c, controls, state, flow, procedural-programming

为了更好地了解过程编程，无论是用于实际用途还是学术用途，我都试图阐明 CONTINUE 和 BREAK 语句对状态的影响。

我已经明白 GOTO 基本上是被禁止的，因为如果你是一个优秀的程序员，你可以找到更好的方法。然而，我也更深层次地理解，在过程编程中应该避免它，因为它缺乏改变状态的能力。

这让我感到困惑，CONTINUE 和 BREAK 怎么能改变状态？

我最初的想法是，因为 GOTO 是这样的：

```
GOTO A;
LBL A; 
```

不计算表达式，也不更改状态。并结合CONTINUE的形式：

```
while (evalFunction(*value) == 1) {
  ..
  if ( bail == 1 ) continue;
  ..
} 
```

具有在 while 条件下更改状态的能力。

但是，这并不能解释 BREAK。

有人可以提供有关程序编程细节的更多细节吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:53:13.267

我不知道这种“改变状态的能力”是从哪里来的。

代码的最高优点是可读性。应避免使用 GOTO，因为它经常使代码*难以阅读*，而且没有其他原因。事实上，在某些情况下，使用 GOTO 的代码比避免使用 GOTO时*更容易阅读，在这些情况下，**应该*使用GOTO 。一个很好的例子是 C 的嵌套清理习语：

```
int do_something()
{
   int rv = -1; /* failure */
   Foo *foo = get_a_foo();
   if (!foo) goto out;
   Bar *bar = get_a_bar();
   if (!bar) goto out_foo;

   rv = do_something_with_foo_and_bar(foo, bar);

   release_bar(bar);
out_foo:
   release_foo(foo);
out:
   return rv;
} 
```

这比使用嵌套 if 语句的替代方案更容易阅读，因为强调了正常的控制流。（当然，在 C++ 中，您可以使用 RAII，以减少混乱。）

同样，BREAK 和 CONTINUE*会使*代码更难阅读，应该避免这样做；但是，它们几乎适用于所有现代语言，因为它们通常使代码*更易于*阅读。因此，它们*优于*循环内部复杂的 if-else 结构和/或扭曲逻辑，以便可以在循环顶部测试循环退出条件。

# visual-c++ - 错误 C2653：'boost'：不是类或命名空间名称 VC++ 2008 express

> ID：10281580
> 
> 赞同：4
> 
> 时间：2012-04-23T13:32:50.770
> 
> 标签：visual-c++, boost-python

我尝试使用 boost python 和 visual c++ 2008 express 构建简单的 hello world。

`E:\Program Files\boost\boost_1_47\`我在里面包含了路径

`|Tools|Options|VC++ Directories|` 对于包含文件（并试图将相同的路径放到所有其他文件中），

但我仍然收到错误
`'boost' : is not a class or namespace name`

源代码是：

```
#include <boost/python.hpp>
#include "stdafx.h"

using namespace boost::python;

int main( int argc, char ** argv ) {
  try {
    Py_Initialize();

    object main_module((
      handle<>(borrowed(PyImport_AddModule("__main__")))));

    object main_namespace = main_module.attr("__dict__");

    handle<> ignored(( PyRun_String( "print \"Hello, World\"",
                                     Py_file_input,
                                     main_namespace.ptr(),
                                     main_namespace.ptr() ) ));
  } catch( error_already_set ) {
    PyErr_Print();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:03:40.093

由于 Microsoft 的预编译头文件的工作方式有些奇怪，您总是需要：

```
#include "stdafx.h" 
```

...作为您使用它的任何文件中的*第一*行。*之后*需要任何其他标题，所以你想要：

```
#include "stdafx.h"
#include <boost/python.h> 
```

# c - 在套接字侦听器服务器之间建立连接

> ID：10281582
> 
> 赞同：0
> 
> 时间：2012-04-23T13:32:58.707
> 
> 标签：c, linux, sockets

我有许多服务器在不同的机器上运行并监听它们众所周知的 IP 地址和端口。我想在服务器之间建立连接（第一次尝试获胜）并根据众所周知的 IPAddress/端口对对调用者进行身份验证。

我遇到的问题是，我不能重用侦听器端口来启动新连接 - 所以这种身份验证是不可能的（即使连接套接字稍后可以通过通信实例参数唯一标识）。

我想保持合作伙伴之间的对称性（没有什么像协调节点的“主”一样）。这个问题有解决方案吗？

[据我所知，SO_REUSEADDR 不是为此而设计的……]

更新：我刚刚定义了一些包含 IPAddress 和端口号对的配置。这个想法是使用这些对来建立连接。因此，具有配置的各方可以轻松检查传入连接。后来我想把所有东西都放在 xinetd 后面，让他验证传入的地址/端口组合。

总结：如果理论上可以通过使用机器特定（IPAddress，端口）对建立网络，则不可能通过等效的通信节点（其中“一半”必须是客户端，另一半是服务器）来实现它。我对吗？[我们也可以讨论问题背后的动机，但这*不是*问题]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:50:21.150

我必须说依赖 IP 地址并不是真正的安全。但是，如果您选择这样做，您可以执行以下操作之一

*   使用 UDP 而不是 TCP。您可以轻松地从同一端口发送/接收消息。
*   为 TCP 使用一对端口。一个用于发送，另一个用于接收。

# objective-c - iOS 4.3.5 上的静态库中找不到符号错误

> ID：10281587
> 
> 赞同：3
> 
> 时间：2012-04-23T13:33:06.587
> 
> 标签：objective-c, ios

我在`iOS 4.3.5`通过临时部署（通过 HTTP 下载）安装我的应用程序的手机上看到此错误：

Dyld 错误信息：

```
 Symbol not found: _OBJC_CLASS_$_NSJSONSerialization
  Expected in: /System/Library/Frameworks/Foundation.framework/Foundation 
```

我在应用程序中的代码不会调用`iOS 5`库，除非已显示类存在（即`if(NSClassFromString(@"NSJSONSerialization")!=nil`），因此问题不在于调用`iOS 5`iOS 4 设备上的库。

该应用程序本身包含一个静态库，它是我自己的代码，并且是`NSJSONSerialization`引用所在的位置。

`iOS 4.3`如果直接从 xcode 运行（即通过 USB 电缆连接到开发机器的 iPhone），该应用程序可以在设备上完美运行。但是，当通过临时部署在同一设备上运行时，我看到了崩溃。

adhoc 存档是通过`Product->Archive`in构建的`xcode 4`，然后我使用“分发”按钮创建 Ad-Hoc 部署 .ipa 文件。

该应用程序几乎立即崩溃，让我想也许我的代码根本没有被调用，而且我的存档构建设置在这里可能不正确？

非常感谢您花时间提供帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T16:37:03.480

[这听起来与我在这个答案](https://stackoverflow.com/a/10265140/19679)中遇到的完全相同的问题。在处理构建和归档的静态库与通过 Xcode 直接安装时，处理弱链接的方式略有不同。后者似乎可以处理类和函数级的弱链接（从 Xcode 4.3 开始）。但是，在归档包含静态库的项目时，没有正确使用弱链接。

就我而言，我需要使用我的静态库在应用程序中手动弱链接有问题的 iOS 框架，以便它在构建临时或 App Store 分发时工作。为此，请转到项目的构建设置，转到 Build Phases 选项卡，然后展开 Link Binary With Libraries 分组。找到有问题的框架（在我的例子中是 CoreVideo.framework，但听起来您可能需要为 Foundation.framework 执行此操作）并将其从必需更改为可选。

这应该可以解决您的弱链接问题。我正在进一步调查这个问题，看看我是否缺少构建设置，或者这是否是链接器错误。

# charts - Dojo 烛台图 - 使用 json 更新系列

> ID：10281592
> 
> 赞同：1
> 
> 时间：2012-04-23T13:33:42.247
> 
> 标签：charts, dojo

我正在使用 Dojo 工具包来创建烛台图。我有许多不同年份的数据系列，用户可以单击按钮选择数据年份，烛台图将被更新。当我直接在代码中拥有数据时，我已经能够成功地做到这一点：

```
makeCharts = function() {

  series2012 =  [
        {open: 477, close: 471.5, high: 477,  low:  471.5,  mid:  474.2,  tooltip:"Orange  <br />Rate: 474.2"},
        {open: 524.5, close: 442.1, high: 524.5,  low: 442.1,  mid:  481.7,  tooltip:"Blue <br />Rate: 481.7"},etc.......
  series2011 =  [
        {open: 600, close: 481.5, high: 600,  low:  481.5,  mid:  490.2,  tooltip:"Orange  <br />Rate: 490.2"},
        {open: 554.5, close: 412.1, high: 554.5,  low: 412.1,  mid:  481.7,  tooltip:"Blue <br />Rate: 481.7"},etc....... 
```

添加系列：

```
chart1.addSeries("Series 1", series2012,{stroke: {color:"#003399"}, fill: "#3399cc"}); 
```

然后通过单击按钮更新系列：

```
<button onclick="chart1.updateSeries('Series 1', series2011);chart1.render();">2011</button> 
```

我真正想做的是从外部 json 文件中查询数据。添加系列时我已经能够做到这一点，但不能更新它。（请参阅 html 中的问号 - 这是我不确定要输入什么的地方）：

编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css"    href="https://serverapi.arcgisonline.com/jsapi/arcgis/2.5/js/dojo/dijit/themes/soria/soria.css" />
<style type="text/css">
    body, html { font-family:helvetica,arial,sans-serif; font-size:90%; }
    #charts {clear: both;margin-bottom: 50px;}
    .chart-area {float: left;border: 1px solid #ccc;width:  450px;height: 350px;margin: 3px;}
    .chart {width:  450px;height: 300px;}
</style>
<script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
<script type="text/javascript">
dojo.require("dojo.data.ItemFileReadStore");
dojo.require("dijit.form.Button");        
dojo.require("dojox.charting.action2d.Tooltip"); 
dojo.require("dojox.charting.plot2d.Candlesticks");
dojo.require("dojox.charting.Chart2D");
dojo.require("dojox.charting.DataSeries");
dojo.require("dojox.charting.action2d.Shake");

dojo.addOnLoad(function() {
     store4 = new dojo.data.ItemFileReadStore({
     url: "candle_update1.json"});

makeCharts = function(){ 
  chart1 = new dojox.charting.Chart2D("candleChart");
  chart1.addPlot("default", {type: "Candlesticks", gap: 2, minBarSize: 5, maxBarSize: 10});
  chart1.addAxis("x", {              
    natural: true,          
    majorLabels: true,      
    includeZero: false, 
    majorTickStep: 1,
    majorTick: {
    stroke: "black",
    length: 5
  },
  fixUpper:"major",
  stroke: "black",

  labels: [          
    {value: 1,  text: "Orange"},
    {value: 2,  text: "Red"},
    {value: 3,  text: "Blue"},
    {value: 4,  text: "Black"},
    {value: 5,  text: "Yellow"},
    {value: 6,  text: "White"},
    {value: 7,  text: "Green"},
    {value: 8,  text: "Purple"},
    {value: 9,  text: "Brown"}
  ],rotation:-45         
  });

    chart1.addAxis("y", {   
      vertical: true,
      leftBottom: true,
      includeZero: true,
      majorLabels: true,
      fixUpper: "major",
      fixed: true,
      max: 800
    });

 chart1.addSeries("Series 1", new dojox.charting.DataSeries(
  store4, {query: {series: 2012}}, {open: "open", close: "close", high: "high", low: "low", mid: "mid", tooltip: "tooltip"}));

    var anim2 = new dojox.charting.action2d.Tooltip(chart1, "default");
    var anim1a = new dojox.charting.action2d.Shake(chart1, "default");
};
dojo.addOnLoad(function(){
    makeCharts();
});
});   
</script>
</head>
<body class="soria">
    <h1>Dojo Candlesticks update test</h1>
    <div id="charts">
      <div class="chart-area">
        <div id="candleChart" class="chart"></div>
      </div>
    </div>
    <span style="font-size:14px;"><strong>Select years:</strong></span>
    <span id="btn">
      <button onclick="chart1.updateSeries('Series 1', ?????????);chart1.render();">2012</button> 
      <button onclick="chart1.updateSeries('series1', ????????);chart1.render();">2011</button> 
    </span>
</body>
</html> 
```

外部 json 文件（candle_update1.json）：

> {“标识符”：“ID”，
> “标签”：“县”，
> “项目”：[ {“县”：“橙色”，“ID”：“1”，“系列”：2012，“开放”：477 ,"close":471.5,"high":477,"low":471.5,"mid":474.2,"tooltip":"Orange
> rate:474.2"}, {"county":"Blue","id": "2","series":2012,"open":524.5,"close":442.1,"high":524.5,"low":442.1,"mid":481.7,"tooltip":"蓝
> 率:481.7" }, {"县":"红色","id":"3","series":2012,"open":508.1,"close":481,"high":508.1,"low":481,"中”：494.4,"tooltip":"红
> 率:494.4"}, {"county":"Black","id":"4","series":2012,"open":503.2,"close":439.3," high":503.2,"low":439.3,"mid":470.4,"tooltip":"黑
> 率:470.4"}, {"county":"Yellow","id":"5","series": 2012,"open":492.1,"close":430.1,"high":492.1,"low":430.1,"mid":460.3,"tooltip":"黄色tooltip":"黑率:470.4"}, {"county":"Yellow","id":"5","series":2012,"open":492.1,"close":430.1,"high": 492.1,"low":430.1,"mid":460.3,"tooltip":"黄色tooltip":"黑率:470.4"}, {"county":"Yellow","id":"5","series":2012,"open":492.1,"close":430.1,"high": 492.1,"low":430.1,"mid":460.3,"tooltip":"黄色
> rate:460.3"}, {"county":"White","id":"6","series":2012,"open":495.5,"close":425.5,"high":495.5,"low" :425.5,"mid":459.6,"tooltip":"白
> 率:459.6"}, {"county":"Green","id":"7","series":2012,"open":550.9, "close":414.4,"high":550.9,"low":414.4,"mid":478.2,"tooltip":"Green
> rate:478.2"}, {"county":"Purple","id":" 8","series":2012,"open":484.8,"close":431.5,"high":484.8,"low":431.5,"mid":457.6,"tooltip":"Purple
> rate:457.6"} , {"县":"棕色","id":"9","series":2012,"open":486.6,"close":419.6,"high":486.6,"low":419.6,"mid":452.1,"tooltip" :"
> 褐变率:452.1"}, {"county":"Orange","id":"1a","series":2011,"open":600,"close":481.5,"high":600, “低”：481.5，“中”：490.2，“工具提示”：“橙色5,"high":600,"low":481.5,"mid":490.2,"tooltip":"橙色5,"high":600,"low":481.5,"mid":490.2,"tooltip":"橙色
> rate:450.2"}, {"county":"Blue","id":"2a","series":2011,"open":554.5,"close":412.1,"high":554.5,"low" :412.1,"mid":451.7,"tooltip":"蓝
> 率:451.7"}, {"county":"Red","id":"3a","series":2011,"open":608.1, "close":481,"high":608.1,"low":481,"mid":594.4,"tooltip":"Red
> rate:474.4"}, {"county":"Black","id":" 4a","series":2011,"open":703.2,"close":409.3,"high":703.2,"low":409.3,"mid":470.4,"tooltip":"黑
> 率:470.4"} , {"县":"黄色","id":"5a","series":2011,"open":392.1,"close":230.1,"high":392.1,"low":230.1,"mid":260.3,"tooltip" :"黄
> 率:260.3"}, {"县":"白","id":"6a","series":2011,"open":495.5,"close":425.5,"high":495.5, “低”：425.5，“中”：459.6，“工具提示”：“白色5,"high":495.5,"low":425.5,"mid":459.6,"tooltip":"白色5,"high":495.5,"low":425.5,"mid":459.6,"tooltip":"白色
> rate:459.6"}, {"county":"Green","id":"7a","series":2011,"open":750.9,"close":414.4,"high":750.9,"low" :414.4,"mid":478.2,"tooltip":"绿
> 率:478.2"}, {"county":"Purple","id":"8a","series":2011,"open":584.8, "close":431.5,"high":584.8,"low":431.5,"mid":457.6,"tooltip":"Purple
> rate:457.6"}, {"county":"Brown","id":" 9a","series":2011,"open":786.6,"close":319.6,"high":786.6,"low":319.6,"mid":452.1,"tooltip":"褐变
> 率:452.1"}

]}

所以，我一直在努力如何更新这个系列。应该如何格式化或写入更新序列的数据数组部分以获取正确的数据序列？

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:48:20.407

你最好的选择是使用 store 和 Observable 对象。这样存储更新时数据会更新。

```
// Initial data
var data = [
    // This information, presumably, would come from a database or web service
    // Note that the values for site are either 1 or 2
    { id: 1, value: 20, site: 1 },
    { id: 2, value: 16, site: 1 },
    { id: 3, value: 11, site: 1 },
    { id: 4, value: 18, site: 1 },
    { id: 5, value: 26, site: 1 },
    { id: 6, value: 19, site: 2 },
    { id: 7, value: 20, site: 2 },
    { id: 8, value: 28, site: 2 },
    { id: 9, value: 12, site: 2 },
    { id: 10, value: 4, site: 2 }
];

// Create the data store
// Store information in a data store on the client side
var store = dojo.store.Observable(new dojo.store.Memory({
    data: {
        identifier: "id",
        label: "Users Online",
        items: data
    }
})); 
```

您可以通过 XHR 从外部文件加载您的商店

这就是你如何设置你的系列

```
// Adds a StoreSeries to the y axis, queries for all site 1 items
chart.addSeries("y", new dojox.charting.StoreSeries(store, { query: { site: 1 } }, "value")); 
```

# python - 使用 {% trans %} 块进行国际化

> ID：10281594
> 
> 赞同：1
> 
> 时间：2012-04-23T13:33:46.190
> 
> 标签：python, django, internationalization, web

我试图做一个简单的例子来理解 Django 国际化。

从我在 djangoproject 文档中阅读的内容来看，最简单的方法是用一个`{% trans %}`块包装你想要从模板翻译的内容。

根据我的理解和预期，在我的情况下，自动为字符串执行翻译：

```
{% for x in found_bills %}
    <tr>
        <td>{% trans x.name %}
    </td>
    </tr>
{% endfor %} 
```

并且对于 x.name 中的字符串（它是一天的名称，英文，即“星期日”）被翻译并返回到以翻译形式显示的模板。

我误解了它的工作方式吗？

**更新：**

错误：在 _argparse.py ./build/ipython/IPython/external/argparse/_argparse.py:1113 上运行 xgettext 时发生错误：警告：带有未命名参数的“msgid”格式字符串无法正确本地化：翻译器无法重新排序参数. 请考虑使用带有命名参数的格式字符串，以及参数的映射而不是元组。

**第二次更新：**

来自模板的 HTML 代码是上面的代码，下面的代码是视图中的代码。

***票据.py：***

```
def bills(request):
    bills = ps_bill.objects.all()
    return render_to_response('bills.html',"bills":bills,},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:13:14.183

国际化和本地化很复杂，[阅读文档是无可替代的](https://docs.djangoproject.com/en/1.4/topics/i18n/)。但这里是必要步骤的一个非常粗略的概述：

1.  您需要标记所有需要翻译的字符串。在[`{% trans "text" %}`](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#trans-template-tag)用于简单案例和[`{% blocktrans %} text {% endblocktrans %}`](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#blocktrans-template-tag)复杂案例的模板中。在源代码中，您使用[函数`ugettext`（](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#internationalization-in-python-code)或其变体之一）包装字符串。在 Django 1.4 中，您还可以[本地化 URL 模式](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#internationalization-in-url-patterns)。

2.  运行[管理命令](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#localization-how-to-create-language-files)[为`makemessages`](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#localization-how-to-create-language-files)您要翻译的每种语言创建一个消息文件。

3.  将消息翻译成您的目标语言。您可以在您的文本编辑器中执行此操作，但您可能希望在此步骤中使用计算机辅助翻译工具来提供帮助：[请参阅 Wikipedia](http://en.wikipedia.org/wiki/Computer-assisted_translation#Some_notable_CAT_tools)`.po`以获取使用 GNU 消息文件（扩展名）的部分工具列表。如果您有翻译人员，请与他们交谈并了解他们喜欢使用什么软件。

4.  运行[管理命令](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#compiling-message-files)[来`compilemessages`](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#compiling-message-files)编译消息文件。

5.  打开 Django 的[语言偏好检测中间件](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#how-django-discovers-language-preference)。如果您的网站有注册用户，请为他们提供语言偏好设置。对于未登录的用户，提供一种切换语言的方法（通过 URL 或通过语言首选项 cookie。）

哦，阅读文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:02:29.070

请通读[文档](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#localization-how-to-create-language-files)。`trans`tag 只是标记要翻译的字符串，正如文档所说：

> 一旦应用程序的字符串文字被标记以供以后翻译，翻译本身就需要编写（或获取）......第一步是创建一个消息po。新语言的文件...然后您有责任更改 po 文件（通过将特定语言的翻译放入其中）...最后您需要使用工具来运行所有可用的 .po 文件并创建 .mo 文件...（之后）您的翻译就可以使用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:50:28.363

A little bit late, but better than never. I came across the same error, actually I had Ipython installed in me virtualenv named env/. As I wanted to translate my project, not the packages under env/ my solution was to do the following:

```
django-admin.py makemessages -l LL --ignore=env/* (EDITED) 
```

where LL is the name you are giving to your translation.

Hope someone finds it useful since this error can be frustrating, it's a bad formatted string in the source of IPython package.

Cheers !

# python - 在 Windows 上从 PATH 运行时 Python 脚本丢失参数

> ID：10281595
> 
> 赞同：7
> 
> 时间：2012-04-23T13:33:51.133
> 
> 标签：python, windows

我知道我的标题不是描述性的，所以让我在这里尝试解释一下。

通常我像这样执行我的python脚本：

```
D:\github\Miscellaneous-Programs\Python>python check.py -h
hello
['check.py', '-h'] 
```

现在我所做的是将文件夹添加到`D:\github\Miscellaneous-Programs\Python`我的 Windows`path`环境变量中。比我尝试像这样执行我的脚本：

```
C:\Users\noob>check -h
hello
['D:\\github\\Miscellaneous-Programs\\Python\\check.py'] 
```

如您所见，它没有显示`-h`我提供给它的论点。

我的`check.py`

```
import sys
print "hello"
print sys.argv 
```

如果我`print sys.argv`从上面提到的 python 脚本中删除它在上面提到的两种情况下都可以正常工作，即它打印“hello”就好了。

所以，我的问题是如何在脚本添加到环境变量后执行一个接受一些命令行参数的 python 脚本。

我的目的是`python script`在类似于`chmod +x check.py`.

我在 cygwin 中尝试了该`chmod`选项，它适用于两种情况。

`Cygwin output`

```
noob@noob-PC ~
$ chmod +x check.py

noob@noob-PC ~
$ ./check.py h
['./check.py', 'h'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:47:03.193

Windows 没有可执行脚本文件的概念，解释器为 a `#!`，因此您打算执行的操作无法执行。Windows 所做的是调用 WinAPI 函数`ShellExecute`，该函数执行以下操作：

> 但是，它更常用于启动对特定文件进行操作的应用程序。例如，可以使用 Microsoft WordPad 打开 .txt 文件。因此，.txt 文件的打开动词将对应于类似于以下命令的内容：

```
"C:\Program Files\Windows NT\Accessories\Wordpad.exe" "%1" 
```

[见 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776886%28v=vs.85%29.aspx)

如您所见，只有第**一个**参数提供给应用程序。在您的情况下，这转化为以下内容：

```
"C:\Program Files\Python\Python.exe" "D:\github\Miscellaneous-Programs\Python\check.py" 
```

为了避免这种情况，您可以做的是创建一个`.bat`名为的小文件`check.bat`：

```
python check.py %* 
```

（有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/26551/how-to-pass-command-line-parameters-in-batch-file)。如果找不到它们，您可能还必须为 check.py 或 python 提供绝对路径）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T19:15:58.490

当您通过在命令行中编写脚本来运行某些脚本时，将文件夹放在上面`PATH`不会影响系统的行为方式。`script.py -h`系统会读取注册表以了解如何运行您提供的命令。您可以通过首先运行`reg query HKCR\.py /ve`然后获取结果（通常是`Python.File`）并运行来显示此信息`reg query HKCR\Python.File\shell\open\command /ve`。我系统上的输出是`"C:\Program Files\Python Launcher (64-bit)\py.exe" "%1" %*`. 这意味着当系统看到`script.py -h`命令时，它运行`py.exe`程序，第一个参数是脚本的名称（这就是`"%1"`意思），其余参数是给脚本的参数（这就是什么`%*`意思）。`%*`我猜你的问题是由于适当的注册表项中缺少部分引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-28T06:57:56.607

如果从 PATH 运行，您可能不想将脚本硬编码为您的 python 脚本。因此，如果您将 python 脚本相对于您的 bat 文件放置，您可以使用以下内容：

```
@echo off
SET MYPATH=%~dp0
python3.exe %MYPATH%\myscript.py %* 
```

# asp.net-mvc - Web API 路由错误

> ID：10281603
> 
> 赞同：1
> 
> 时间：2012-04-23T13:34:20.800
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试使用 MVC WEB API 运行一个测试应用程序，但我无法让它工作。我想要做的是发送一个 GET 请求并作为答案从数据库中获取日志记录作为响应。

这是我设置的：

Global.asax.cs：（未修改）

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

我的控制器称为 DBModelController：

```
 public class DBModelController : ApiController
{
    public IEnumerable<Log> GetAllLogs()
    {
        IDBModel DAO = new DBModelDAO();

        IList<Log> Logs = DAO.GetLogs(DateTime.Now, DateTime.Now); //this gives back Log objects

        return Logs;
    }

} 
```

以及我希望它如何使用：

[http://localhost:15339/api/logs](http://localhost:15339/api/logs) -- 作为回报，我得到一组序列化记录

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:58:48.407

将您的课程更改为 LogsController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:54:05.613

如果您不想将控制器类名称更改为`Logs`.

```
routes.MapHttpRoute(
    name: "log_route",
    routeTemplate: "api/logs",
    defaults: new { controller = "DBModel", action = "GetAllLogs" }
); 
```

这条路线应该放在默认路线之前。

# java - 查询 MongoDB GridFS 元数据 (Java)

> ID：10281610
> 
> 赞同：10
> 
> 时间：2012-04-23T13:34:55.433
> 
> 标签：java, mongodb, gridfs

我要做的是通过查询元数据的字段来获取 GridFS 文件的列表。例如，我得到了一个 GridFS 文件文档，如下所示：

```
{ "_id" : { "$oid" : "4f95475f5ef4fb269dbac954"} , "chunkSize" : 262144 , "length" : 3077 , "md5" : "f24ea7ac05c5032f08808c6faabf413b" , "filename" : "file_xyz.txt" , "contentType" :  null  , "uploadDate" : { "$date" : "2012-04-23T12:13:19.606Z"} , "aliases" :  null  , "metadata" : { "target_field" : "abcdefg"}} 
```

我想查询所有包含“target_field”=“abcdefg”的文件。我创建了如下查询：

```
BasicDBObject query = new BasicDBObject("metadata", new BasicDBObject("target_field", "abcdefg"));
// gridFS Object Initialization skipped
List<GridFSDBFile> files = gridFs.find(query); 
```

该列表始​​终为空。否则查询文件名或uploadDate 工作完美。是否可以通过嵌套属性获取 GridFS 文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T07:48:44.090

不幸的是，我没有让它与嵌套的 BasicDBObjects 一起工作。

最后，我使用了可以正常工作的点表示法：

```
// This query fetches the files I need
BasicDBObject query = new BasicDBObject("metadata.target_field", "abcdefg"));
List<GridFSDBFile> files = gridFs.find(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T01:42:54.110

更简单：

```
GridFSDBFile gridFile = fsDocs.findOne(new BasicDBObject("md5","1b21bc40a456befc7d2ee10b0e25fabf")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T13:13:40.060

从 MongoDB 文档（[http://docs.mongodb.org/manual/tutorial/query-documents/#exact-match-on-the-embedded-document](http://docs.mongodb.org/manual/tutorial/query-documents/#exact-match-on-the-embedded-document)）：

# 嵌入文档的精确匹配

要在整个嵌入文档上指定相等匹配，请使用查询文档 { : } 其中要匹配的文档。嵌入文档上的相等匹配需要指定的完全匹配，包括字段顺序。

# 嵌入文档中的字段相等匹配

使用点符号来匹配嵌入文档中的特定字段。嵌入文档中特定字段的相等匹配将选择集合中的文档，其中嵌入文档包含具有指定值的指定字段。嵌入的文档可以包含其他字段。

* * *

我写了一个简单的代码来**翻译“dotted notation”中的“document notation”**。我希望它有用。

```
protected static void toDottedJson(Object o, String key, DBObject query) {
    if (o instanceof Map)
        for (Entry<?, ?> c : ((Map<?, ?>) o).entrySet())
            toDottedJson(c.getValue(), key + "." + c.getKey().toString(),
                    query);
    else
        query.put(key, o.toString());
}

public static DBObject buildMetadataSearchQuery(DBObject searchQuery) {
    BasicDBObject metadatSearchQuery = new BasicDBObject();
    for (Entry<?, ?> c : ((Map<?, ?>) searchQuery).entrySet())
        toDottedJson(c.getValue(), "metadata."
                + c.getKey().toString(),
                metadatSearchQuery);
    return metadatSearchQuery;
} 
```

为了您的目的：

```
List<GridFSDBFile> files = gridFs.find(buildMetadataSearchQuery(new BasicDBObject("target_field", "abcdefg"))); 
```

# python - 在 SUNOS 上的 python 中查找最旧且大小最大的文件

> ID：10281613
> 
> 赞同：0
> 
> 时间：2012-04-23T13:35:07.193
> 
> 标签：python, unix, awk

我正在尝试创建一个仪表板，它可以显示目录中最旧的文件、最大大小的文件以及旧的和最大大小的文件。我需要一个 python 脚本，它可以递归地在我的根目录下所有可能的目录中查找文件，这些目录最旧并且具有最大大小。是否可以通过 python 执行此操作，或者您需要为此编写一个 shell 脚本/awk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:05:11.600

要递归检查目录，请使用[`os.walk()`](http://docs.python.org/library/os.html#os.walk).

用于[`os.path.getsize()`](http://docs.python.org/library/os.path.html#os.path.getsize)获取文件的大小，[`os.path.getmtime()`](http://docs.python.org/library/os.path.html#os.path.getmtime)以获取其修改时间。

```
import os
from os.path import join, getsize, getmtime

oldest_file, oldest_file_mtime = None, 9999999999
largest_file, largest_file_size = None, 0

for root, dirs, files in os.walk('/your/root'):
    for name in files:
        a_file = join(root, name)
        if getmtime(a_file) < oldest_file_mtime:
            oldest_file_mtime = getmtime(a_file)
            oldest_file = a_file
        if getsize(a_file) > largest_file_size:
            largest_file_size = getsize(a_file)
            largest_file = a_file

print "oldest file is: ", oldest_file
print "largest file is: ", largest_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:55:14.720

这不是一个完整的解决方案，但应该为您指明正确的方向：

```
>>> import os
>>> import glob
>>> for filename in glob.glob('*'):
        print filename, os.stat(filename) 
```

[全局参考](http://docs.python.org/library/glob.html)

[口译统计](http://docs.python.org/library/stat.html)

简而言之：这为您提供与 glob 匹配的每个文件的文件大小和创建时间戳，只需提取它们并根据需要进行排序。

# java - 无法使用 JList 显示来自数据库的结果

> ID：10281615
> 
> 赞同：0
> 
> 时间：2012-04-23T13:35:08.823
> 
> 标签：java, jlist

这一定很容易解决。我昨天一整天都在尝试，但我无法让这个东西正常工作。我无法从数据库中获取数据并将其显示在 JList 中。通常，我将类分开放在不同的文件中，但为了学习 Java，我将所有内容放在一个文件中。

```
public class Window extends JFrame{
private static final long serialVersionUID = 1L;

// declare global text fields
private JTextField txtCustomerID;
private JTextField txtFirstName;
private JTextField txtLastName;
private JTextField txtMiddleInitial;
private JTextField txtStreet;
private JTextField txtCity;
private JTextField txtState;
private JTextField txtZip;
private JTextField txtPhone;
private JTextField txtEmail;
private JTextField txtSearch;

// declare global list
private static JList list;
private String[] results;
private DefaultListModel model;

// declare global labels
private JLabel labFirstName;
private JLabel labLastName;
private JLabel labMiddleInitial;
private JLabel labStreet;
private JLabel labCity;
private JLabel labState;
private JLabel labZip;
private JLabel labPhone;
private JLabel labEmail;

// declare global buttons
private JButton newCustomer;
private JButton open;
private JButton update;
private JButton cancel;
private JButton remove;
private JButton search;

// function that adds components to GridBagConstraints Layout Manager
private void addComponent(JPanel panel, JComponent theComponent, int xPos, int yPos, int compWidth, int compHeight, int place, int stretch, boolean useScrollPane){
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.gridx = xPos;
    gbc.gridy = yPos;
    gbc.gridwidth = compWidth;
    gbc.gridheight = compHeight;
    gbc.weightx = 100;
    gbc.weighty = 100;
    gbc.insets = new Insets(2,2,2,2);
    gbc.anchor = place;
    gbc.fill = stretch;
    if(useScrollPane){
        JScrollPane scrollPane = new JScrollPane(theComponent);
        scrollPane.setPreferredSize(new Dimension(400, 200));
        panel.add(scrollPane, gbc);
    } else {
        panel.add(theComponent, gbc);
    }

}

// function that adds components to panel
private void addComponent2(JPanel panel, JComponent theComponent){
    panel.add(theComponent);
}

// function that connects and tests to the database
private void insertDatabase(){

    try {

        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "";
        String user = "";
        String password ="";

        connect = DriverManager.getConnection(url,user,password);

        Statement SQLStatement = connect.createStatement();
        String insert = "INSERT INTO customerinfo(FirstName," +
                "LastName, MiddleInitial, Street, City, State, ZipCode, Phone, Email) VALUES('"+ txtFirstName.getText() +"', " +
                        "'" + txtLastName.getText() +"', '" + txtMiddleInitial.getText() +"', '" + txtStreet.getText() +"', " +
                                "'" + txtCity.getText() +"', '" + txtState.getText() +"', '" + Integer.parseInt(txtZip.getText()) +"'" +
                                ", '" + txtPhone.getText() +"', '" + txtEmail.getText() +"')";
        SQLStatement.execute(insert);

        connect.close();

    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
        e.printStackTrace();
    } catch (SQLException e){
        JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
        JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
    }

}

// function that checks for empty fields
private void checkForEmptyFields(){

    String[] labValues = {labFirstName.getText(), labLastName.getText(), labMiddleInitial.getText(),
            labStreet.getText(), labCity.getText(), labState.getText(), labZip.getText(), 
            labPhone.getText(), labEmail.getText()};

    String[] values = {txtFirstName.getText(), txtLastName.getText(),
            txtMiddleInitial.getText(), txtStreet.getText(), txtCity.getText(),
            txtState.getText(), txtZip.getText(), txtPhone.getText(), txtEmail.getText()};

    for(int i=0; i<values.length; i++){
        if(values[i].length() == 0){
            JOptionPane.showMessageDialog(this, labValues[i].replace(":", "") + " field is empty");
        }
    }

}

// function that will update a field in the database
private void updateDatabase(){
    try {

        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "";
        String user = "";
        String password ="";

        connect = DriverManager.getConnection(url,user,password);

        Statement SQLStatement = connect.createStatement();
        String update = "UPDATE customerinfo SET FirstName='" + txtFirstName.getText() +"', LastName='" + txtLastName.getText() +"', " +
                "MiddleInitial='"+ txtMiddleInitial.getText() +"', Street='"+ txtStreet.getText() +"', City='"+ txtCity.getText() +"', " +
                "State='"+ txtState.getText() +"', ZipCode='"+ txtZip.getText() +"', Phone='"+ txtPhone.getText() +"', " +
                "Email='"+ txtEmail.getText() +"'" +
                "WHERE CustomerID='"+ txtCustomerID.getText() +"'";
        SQLStatement.execute(update);

    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
        e.printStackTrace();
    } catch (SQLException e){
        JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
        JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
    }
}

// function that will delete a record from the database
private void deleteRecord(){
    try {

        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "";
        String user = "";
        String password ="";

        connect = DriverManager.getConnection(url,user,password);

        Statement SQLStatement = connect.createStatement();
        String delete = "DELETE FROM customerinfo WHERE CustomerID='"+ txtCustomerID.getText() +"'";
        SQLStatement.execute(delete);

        connect.close();

    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
        e.printStackTrace();
    } catch (SQLException e){
        JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
        JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
    }
}

// function that will search for records in the database
private void searchRecord(){

    model = new DefaultListModel();
    list = new JList(model);
    list.setVisibleRowCount(3);
    list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    //list.setFixedCellHeight(27);
    //list.setFixedCellWidth(130);

    try {

        model.clear();

        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "";
        String user = "";
        String password ="";

        connect = DriverManager.getConnection(url,user,password);

        Statement SQLStatement = connect.createStatement();
        String select = "SELECT * FROM customerinfo WHERE LastName LIKE '"+ txtSearch.getText().trim() +"%'";
        ResultSet rows = SQLStatement.executeQuery(select);

        while(rows.next()){
            model.addElement(rows.getString("FirstName") + "\n");
            System.out.print(model.toString() + "\n");
        }

            System.out.print(model.getSize());
            rows.close();
            SQLStatement.close();
            connect.close();

            txtSearch.setText("");

    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
        e.printStackTrace();
    } catch (SQLException e){
        JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
        JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
    }

}

// function that clear fields once register
private void clearFields(){
    txtFirstName.setText("");
    txtLastName.setText("");
    txtMiddleInitial.setText("");
    txtStreet.setText("");
    txtCity.setText("");
    txtState.setText("");
    txtZip.setText("");
    txtPhone.setText("");
    txtEmail.setText("");
}

// Implement Action Listener
private class handler implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent e) {
        // if user clicks on New Customer Button, do the following...
        if(e.getSource() == newCustomer){
            checkForEmptyFields();
            insertDatabase();
            clearFields();
        } else if(e.getSource() == update){
            checkForEmptyFields();
            updateDatabase();
            clearFields();
        } else if(e.getSource() == remove){
            checkForEmptyFields();
            deleteRecord();
            clearFields();
        } else if(e.getSource() == cancel){
            clearFields();
        } else if(e.getSource() == open){

        } else if(e.getSource() == search){
            searchRecord();
        } 

    }

}

private class selectRow implements ListSelectionListener{

    @Override
    public void valueChanged(ListSelectionEvent event) {
        if(!event.getValueIsAdjusting()){
            String selection = list.getSelectedValue().toString();
        }

    }

}

// window constructor
public Window(){

    JPanel theMainPanel = new JPanel(new BorderLayout());

    JPanel thePanel = new JPanel();
    thePanel.setLayout(new GridBagLayout());

    JTabbedPane tabbedPane = new JTabbedPane();

    JLabel labCustomerID = new JLabel("Customer ID:");
    addComponent(thePanel, labCustomerID, 0, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtCustomerID = new JTextField(24);
    txtCustomerID.setEnabled(false);
    txtCustomerID.setBackground(Color.LIGHT_GRAY);
    addComponent(thePanel, txtCustomerID, 1, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    open = new JButton("Open");
    addComponent(thePanel, open, 1, 0, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);

    labFirstName = new JLabel("First Name:");
    addComponent(thePanel, labFirstName, 0, 1, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtFirstName = new JTextField(30);

    addComponent(thePanel, txtFirstName, 1, 1, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labLastName = new JLabel("Last Name:");
    addComponent(thePanel, labLastName, 0, 3, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtLastName = new JTextField(30);
    addComponent(thePanel, txtLastName, 1, 3, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labMiddleInitial = new JLabel("Middle Initial:");
    addComponent(thePanel, labMiddleInitial, 0, 4, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtMiddleInitial = new JTextField(30);
    addComponent(thePanel, txtMiddleInitial, 1, 4, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    labStreet = new JLabel("Street:");
    addComponent(thePanel, labStreet, 0, 5, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtStreet = new JTextField(30);
    addComponent(thePanel, txtStreet, 1, 5, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labCity = new JLabel("City:");
    addComponent(thePanel, labCity, 0, 6, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtCity = new JTextField(30);
    addComponent(thePanel, txtCity, 1, 6, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labState = new JLabel("State:");
    addComponent(thePanel, labState, 0, 7, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtState = new JTextField(30);
    addComponent(thePanel, txtState, 1, 7, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labZip = new JLabel("Zip Code:");
    addComponent(thePanel, labZip, 0, 8, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtZip = new JTextField(5);
    addComponent(thePanel, txtZip, 1, 8, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    labPhone = new JLabel("Phone:");
    addComponent(thePanel, labPhone, 0, 9, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtPhone = new JTextField(30);
    addComponent(thePanel, txtPhone, 1, 9, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    labEmail = new JLabel("Email:");
    addComponent(thePanel, labEmail, 0, 10, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtEmail = new JTextField(30);
    addComponent(thePanel, txtEmail, 1, 10, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    this.add(thePanel, BorderLayout.NORTH);

    JPanel thePanel2 = new JPanel();
    thePanel2.setLayout(new FlowLayout(FlowLayout.RIGHT));
    newCustomer = new JButton("New Customer");
    addComponent2(thePanel2, newCustomer);
    update = new JButton("Update");
    addComponent2(thePanel2, update);
    remove = new JButton("Remove");
    addComponent2(thePanel2, remove);
    cancel = new JButton("Cancel");
    addComponent2(thePanel2, cancel);
    this.add(thePanel2, BorderLayout.CENTER);

    JPanel thePanel3 = new JPanel(new GridBagLayout());
    thePanel3.setBorder(BorderFactory.createTitledBorder("Customer Action"));
    JLabel labSearch = new JLabel("Search By Last Name:");
    addComponent(thePanel3, labSearch, 0, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    txtSearch = new JTextField(15);
    addComponent(thePanel3, txtSearch, 1, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE, false);
    search = new JButton("Search");
    addComponent(thePanel3, search, 2, 0, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE, false);
    //JScrollPane scrollPane = new JScrollPane(list);
    //scrollPane.setPreferredSize(new Dimension(400,200));
    addComponent(thePanel3, list, 0, 1, 3, 1, GridBagConstraints.CENTER, GridBagConstraints.NONE, true);
    this.add(thePanel3, BorderLayout.SOUTH);

    theMainPanel.add(thePanel, BorderLayout.NORTH);
    theMainPanel.add(thePanel2, BorderLayout.CENTER);
    theMainPanel.add(thePanel3, BorderLayout.SOUTH);

    tabbedPane.addTab("Customer Info", theMainPanel);
    this.add(tabbedPane);

    handler listen = new handler();
    newCustomer.addActionListener(listen);
    update.addActionListener(listen);
    remove.addActionListener(listen);
    cancel.addActionListener(listen);
    search.addActionListener(listen);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:43:51.183

最后做`list = new JList(model);`，填充模型。

* * *

***另一个尝试：** 这次是 first()。

```
private void searchRecord() {

    model = new DefaultListModel();
    try {
        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "";
        String user = "";
        String password ="";

        connect = DriverManager.getConnection(url,user,password);

        Statement sqlStatement = connect.createStatement();
        String select = "SELECT FirstName, LastName "
            + "FROM customerinfo WHERE LastName LIKE '" +  txtSearch.getText().trim() + "%' "
            + "ORDER BY FirstName, LastName";
        ResultSet rows = sqlStatement.executeQuery(select);

        if (rows.first()) {
            do {
                model.addElement(rows.getString("FirstName"));
            } while (rows.next());
        }

        rows.close();
        sqlStatement.close();
        connect.close();

        txtSearch.setText("");

        list = new JList(model);
        list.setVisibleRowCount(3);
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    } catch (ClassNotFoundException e) {
        JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
        e.printStackTrace();
    } catch (SQLException e){
        JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
        JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:07:23.780

1.  验证 SQL 部分是否正常工作。`while(rows.next())`在循环中尝试 System.out.println() 。
2.  循环完成后，查询模型的大小。如果它是零，你有一个问题。
3.  如果模型不为空，但 JList 未显示任何内容，请验证模型是否确实触发了正确的事件（它应该，因为您使用未更改的 DefaultListModel，但在自定义实现中您可能忘记触发事件）当数据变化。为此，您可以将 ListModelListener 添加到模型中，并在触发事件时将其打印出来。
4.  检查 JList 本身。它被禁用了吗？您是否对它做了任何会阻止它显示数据的事情？去掉任何自定义代码，从一个简单的开始`panel.add(new JList(myModel))`，然后从那里开始。

# iphone - iphone在沙箱外创建文件夹

> ID：10281618
> 
> 赞同：0
> 
> 时间：2012-04-23T13:35:19.520
> 
> 标签：iphone, directory, jailbreak

我创建了一个应用程序，构建为 deb。这是为cydia。

现在我想在“/var/mobile/MyDoc”之类的路径中创建自定义文件夹，看来我使用的方法不再起作用，无法创建文件夹：

```
[[NSFileManager defaultManager] createDirectoryAtPath:MyDocPath
                                withIntermediateDirectories:YES 
                                attributes:nil 
                                error:nil]; 
```

我需要做任何其他事情来创建我的自定义文件夹吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:00:28.420

这仍然对我有用

```
NSString* DATA_DIR = @"/var/mobile/Library/MyAppName";
NSFileManager* fileManager = [NSFileManager defaultManager];

NSMutableDictionary* attributes = [[NSMutableDictionary alloc] init];
NSNumber* permission = [NSNumber numberWithLong: 0755];
[attributes setObject:permission forKey: NSFilePosixPermissions];
NSError* error = nil;
if (![fileManager createDirectoryAtPath: DATA_DIR 
            withIntermediateDirectories: YES       
                             attributes: attributes 
                                  error: &error]) 
{
    NSLog(@"Unable to create data directory: %@", [error localizedDescription]);
} 
```

# .net - 组合框自动完成：如何设置自定义“匹配模式”

> ID：10281619
> 
> 赞同：1
> 
> 时间：2012-04-23T13:35:20.797
> 
> 标签：.net, winforms, autocomplete, combobox

> **可能重复：**
> [C# 自动完成](https://stackoverflow.com/questions/796195/c-sharp-autocomplete)

我有一个标准的 winform 组合框。我已将其 AutoComplete 属性设置为 true。我想更改由 UI 自动完成的键入文本和项目文本之间的比较。

就像是：

```
autoCompleteCombo.XXXX = new Func<string, string, bool> { (search, item) => item.Contains(search) }; 
```

注意：所写的函数只是一个例子。我真正想要的更复杂一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T00:04:45.437

既然你已经更新了你的问题，我更好地理解了你的问题。您还说底层数据和功能不相关，这使得很难准确理解您要实现的目标，所以我的建议是创建一个自定义`ComboBox`，看看您是否可以自己处理匹配.

* * *

我认为编写一个函数来测试输入的文本是否是 a 中的项目的最优雅的方法是`ComboBox`使用扩展方法。您的电话将如下所示：

```
// see if the Text typed in the combobox is in the autocomplete list
bool bFoundAuto = autoCompleteCombo.TextIsAutocompleteItem();

// see if the Text type in the combobox is an item in the items list
bool bFoundItem = autoCompleteCombo.TextIsItem(); 
```

可以按如下方式创建扩展方法，您可以在其中准确自定义搜索逻辑的工作方式。在我下面写的两个扩展方法中，它们只是检查输入到的文本`ComboBox`是否在`AutoCompleteCustomSource`集合中，或者在第二个函数中，是否在`Items`集合中找到文本。

```
public static class MyExtensions
{
    // returns true if the Text property value is found in the 
    // AutoCompleteCustomSource collection
    public static bool TextIsAutocompleteItem(this ComboBox cb)
    {
        return cb.AutoCompleteCustomSource.OfType<string>()
            .Where(a => a.ToLower() == cb.Text.ToLower()).Any();
    }

    // returns true of the Text property value is found in the Items col
    public static bool TextIsItem(this ComboBox cb)
    {
        return cb.Items.OfType<string>()
            .Where(a => a.ToLower() == cb.Text.ToLower()).Any();
    }
} 
```

# .net - 如何在 VB.NET 中检查 TCP 服务器（套接字）与 TCP 客户端的连接状态

> ID：10281622
> 
> 赞同：2
> 
> 时间：2012-04-23T13:35:23.727
> 
> 标签：.net, vb.net, sockets, tcpclient

近一个星期以来，我正在阅读并试图找到使用 TCP 客户端（使用套接字类）检查连接状态的解决方案在我的场景中，我有一个连接到服务器的 TCP 客户端（它不受我控制），我希望不时检查连接状态，并在必要时重新连接。我在互联网上阅读了很多信息，但我没有找到合适的解决方案。

简而言之，这些是我在互联网上找到并尝试实施的方法。但不幸的是，我发现了一些 TCP 服务器关闭并且 TCP 客户端仍然说已连接的情况

我可以请遇到此问题的人帮助我吗？

1.示例来自 MSDN

```
Private Function IsConnected(tcpSocket As Socket) As Boolean
    Dim blockingState As Boolean = tcpSocket.Blocking
    IsConnected = False
    Try
        Dim tmp(0) As Byte
        tcpSocket.Blocking = False
        tcpSocket.Send(tmp, 0, 0)
        Return True
    Catch e As SocketException
        If e.NativeErrorCode.Equals(10035) Then
            Return True
        Else : Return False
        End If
        ThrowError(e)
    Finally
        tcpSocket.Blocking = blockingState
    End Try
End Function 
```

2.使用投票的例子

```
Function Connected() As Boolean
    Connected = False
    If (tcpSocket.Connected) Then
        If ((tcpSocket.Poll(0, SelectMode.SelectWrite)) AndAlso (Not tcpSocket.Poll(0, SelectMode.SelectError))) Then
            Dim b As Byte() = New Byte(1) {}
            If tcpSocket.Receive(b, SocketFlags.Peek) = 0 Then
                Return False
            Else : Return True
            End If
        Else
            Return False
        End If
    Else
        Return False

    End If
End Function 
```

3.使用投票

```
Private Function Connect2() As Boolean
        Connect2 = False
        If tcpSocket.Poll(0, SelectMode.SelectRead) = True Then
            Dim byteArray As Byte() = New Byte(1) {}
            If (tcpSocket.Receive(byteArray, SocketFlags.Peek)) = 0 Then Connect2 = True
        End If
        Return Connect2()
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:08:40.933

系统通常通过实现“心跳”机制来处理此类问题，在该机制中，客户端定期向服务器发送“你还活着”请求。是否有任何廉价的、非破坏性的请求可以定期发送到服务器，以确保套接字实际上是活动的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T20:57:41.087

这是我很长一段时间以来一直在努力解决的问题，但从未真正找到一个包罗万象的解决方案。不幸的是，没有 100% 可靠的方法，这就是大多数系统实现“心跳”的原因（正如 Steve Townsend 提到的）。

我能得到的最接近的是这样的（通过记忆从 C# 翻译）：

```
Public Function IsConnected() as Boolean
    Try
        Return tcpSocket <> Nothing AndAlso Not(tcpSocket.Poll(-1, SelectMode.SelectRead) _
                 AndAlso tcpSocket.Available = 0)
    Catch (ObjectDisposedException)
        Return False
    End Try
End Function 
```

我不完全了解您的设置，但您提到您正在连接到秤。也许您可以尝试定期读取它的重量作为“心跳”的一种形式。

# ms-access - ms访问中的表达式

> ID：10281624
> 
> 赞同：0
> 
> 时间：2012-04-23T13:35:27.533
> 
> 标签：ms-access

搜索查询中的这个表达式没有给出任何结果。

`code`并且`code2`是搜索表单中的组合框，`CS_Code`是表格列。

```
[CS_Code]=([Forms]![Search Form]![code] Or
[Forms]![Search Form]![code2]) Or
( [Forms]![Search Form]![code] Is Null Or
  [Forms]![Search Form]![code2] Is Null ) 
```

`CS_code`当等于`code`或时，我正在尝试从表中获取条目（搜索结果）`code2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:36:58.823

您需要重复比较：

```
 WHERE ([CS_Code]=([Forms]![Search Form]![code] 
        Or [CS_Code]=[Forms]![Search Form]![code2]) 
 Or ([Forms]![Search Form]![code] Is Null
        Or [Forms]![Search Form]![code2] Is Null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:09:33.520

您可以使用 IsNull 函数缩短它：

```
WHERE IsNull(([Forms]![Search Form]![code],[CS_Code]) = [CS_Code] 
```

对于其他领域也是如此。如果组合框为空，这将返回表字段值，该值始终等于自身。

如果您正在为多个组合框执行此操作，那么可能是时候退后一步，看看您正在尝试做什么。一种可能性是编写一个 VBA 例程来遍历表单上的所有组合框。

# scala - 获取包含在另一个对象中的对象中定义的案例类的字段名称

> ID：10281625
> 
> 赞同：2
> 
> 时间：2012-04-23T13:35:29.097
> 
> 标签：scala, reflection, inner-classes, case-class

我有两个案例类定义如下

```
object Outer {
   case class OuterCase(outerParam: Int)
   object Inner {
      case class InnerCase(innerParam: Int)
   }
} 
```

我想像这样获取他们实例的字段名称：

```
import scala.tools.nsc.interpreter.ProductCompletion

object EncapsulatedCase extends App {
   val outer = Outer.OuterCase(1)
   println("outer: " + new ProductCompletion(outer).caseNames)

   val inner = Outer.Inner.InnerCase(2)
   println("inner: " + new ProductCompletion(inner).caseNames)
} 
```

这对对象按预期工作`outer`，但对`inner`. 这是输出：

```
outer: List(outerParam)
inner: List() 
```

我看到的唯一区别是类`InnerCase`是在一个对象中定义的，它本身在另一个对象中定义，而`OuterCase`只包含在一个对象中。

为什么会有问题？为什么我可以得到 case 对象的参数名称`outer`而不是`inner`case 对象？

我在 Scala 2.9.2 中观察到了这种行为。

谢谢！

## 一些附加说明

我注意到使用`scala`或使用 sbt 从命令行运行相同的编译类是不同的。

从命令行：

```
julien@minare:~/prog/testing$ scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL
julien@minare:~/prog/testing$ scala -cp target/scala-2.9.2/classes:/Users/julien/.sbt/boot/scala-2.9.2/lib/scala-library.jar:/Users/julien/.ivy2/cache/org.scala-lang/scalap/jars/scalap-2.9.2.jar:
/Users/julien/.sbt/boot/scala-2.9.2/lib/scala-compiler.jar org.example.EncapsulatedCase
outer: List(outerParam)
inner: List() 
```

但是使用 sbt：

```
> scala-version
[info] 2.9.2
> sbt-version
[info] 0.11.2
> show external-dependency-classpath
[info] ArrayBuffer(Attributed(/Users/julien/.sbt/boot/scala-2.9.2/lib/scala-library.jar), Attributed(/Users/julien/.ivy2/cache/org.scala-lang/scalap/jars/scalap-2.9.2.jar), Attributed(/Users/julien/.sbt/boot/scala-2.9.2/lib/scala-compiler.jar))
[success] Total time: 0 s, completed Apr 24, 2012 9:20:21 AM
> run-main org.example.EncapsulatedCase
[info] Running org.example.EncapsulatedCase 
outer: List()
inner: List() 
```

任何有关找出这里发生的事情的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:45:11.700

我没有找到对正在发生的事情的解释，但我找到了一种使用 Java 反射的方法。

**因此，我仍然非常感谢解决`ProductCompletion`行为**的答案。

这是对在主构造函数中声明的类字段的尝试。这不是什么新鲜事，也不能保证有效。我将在下面简要解释原因。

```
def caseNameTypeValues(a: AnyRef) = caseFields(a).map{field => (field.getName, field.getType, field.get(a))}
def caseFields(a: AnyRef) = a.getClass.getDeclaredFields.toSeq.filterNot(_.isSynthetic).take(numConstructorParams(a)).map{field =>
        field.setAccessible(true)
        field
}
def numConstructorParams(a: AnyRef) = a.getClass.getConstructors()(0).getParameterTypes.size 
```

`numConstructorParams(AnyRef)`给出由 返回的第`N`一个构造函数的参数数量`getConstructors()`，并`caseFields(AnyRef)`返回由 返回的第一个`N`字段`getDeclaredFields()`。`caseNameTypeValues(AnyRef)`将这些字段映射到它们的名称、类型和值。

警告：这不能保证有效，因为根据[Java API](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29)`getConstructors()`和`getDeclaredFields()`方法返回的数组“没有排序，也没有任何特定的顺序” 。

如果幸运的话，这会给出预期的结果：

```
object Outer {
   case class OuterCase(outerParam: Int)
   object Inner {
      case class InnerCase(innerParam: Int)
   }
} 

println(caseNameTypeValues(Outer.OuterCase(1)))
println(caseNameTypeValues(Outer.Inner.InnerCase(2))) 
```

输出

```
ArrayBuffer((outerParam,int,1))
ArrayBuffer((innerParam,int,2)) 
```

# javascript - Visual Basic 6 中的地理自动完成？

> ID：10281627
> 
> 赞同：1
> 
> 时间：2012-04-23T13:35:46.117
> 
> 标签：javascript, google-maps, vb6, maps

我想用地理自动完成在 VB6 中实现一个文本框。可能吗？以前有人做过吗？我正在考虑使用 WebBrowse Control + Javascript，但我不确定这是否可行。任何帮助，将不胜感激。

# sql - 如何将日文字符从 SQL Server 2008 数据库导出到文本文件？

> ID：10281633
> 
> 赞同：0
> 
> 时间：2012-04-23T13:36:06.820
> 
> 标签：sql, sql-server-2008, ssis

我有一个奇怪的问题。我需要将日文字符从表中导出到原始文本文件。当我在 SQL 中运行 select 语句时，我能够看到正确显示的字符。但是，当我运行 SSIS 包以将这些值导出到文本文件时，它们显示为**`?`**'s.

该字段的数据类型是*NTEXT*。有没有人遇到过这个问题？

*SQL 语句*：

```
select cast(body as nvarchar(max)) as body from msgsMarket 
```

在 SSIS 包的平面文件连接管理器中，我已将输出编码设置为使用**`932`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:00:43.840

这不是解决方案，但可能会帮助您确定您的案例中的问题。

`UTF-8`使用带有和编码的SSIS 2008 R2 创建了一个示例 SSIS 包`Unicode`，并将 SQL Server 数据正确导出到平面文件。

文件中的示例 SQL 数据。*描述*字段是数据类型*`NVARCHAR`*。该示例还通过将描述字段的数据类型更改为*`NTEXT`*并且仍然正确导出平面文件来尝试。

![示例 SQL 数据](../Images/00326ffe5aa582010bfa626d3526f411.png)

SSIS 包是使用具有*UTF-8*和*Unicode*两个输出的数据流任务创建的。

![数据流任务](../Images/ae9c0f1911a44ad82fc56cc6874eec7d.png)

第一个平面文件连接管理器，用于生成编码*为 UTF-8 的*平面文件。

![UTF-8 编码](../Images/14ab4dc8acdc5018dd298c5a6e5dce63.png)

*使用UTF-8*编码生成的输出文件。

![UTF-8 输出文件](../Images/6c590949f4933ffe209b41e95d46ba02.png)

第二个平面文件连接管理器，用于生成编码为*Unicode*的平面文件。

![Unicode 编码](../Images/e256db0a00d309a75cd69c92da86c7f5.png)

*使用Unicode*编码生成的输出文件。

![Unicode 输出文件](../Images/723df6a73b060ff83789e019893ac6d0.png)

# c# - 使用 RowTemplate 自定义 DataGridView 在表单中使用时会出现转换错误

> ID：10281640
> 
> 赞同：1
> 
> 时间：2012-04-23T13:36:19.363
> 
> 标签：c#

我通过继承 Windows.Forms.DataGridView 创建了一个自定义 DataGridView。我还通过继承 Windows.Forms.DataGridViewRow 创建了一个自定义 DataGridViewRow。然后我使用 MyDataGridViewRow 作为 MyDataGridView 的 RowTemplate。一切正常。但是当我将 MyDataGridView 添加到表单时，它会在属于 MyDataGridViewRow 的表单设计器文件中生成属性，但由于 RowTemplate 是 DataGridViewRow，因此文件将无法编译。

我已手动将 RowTemplate 转换为 MyDataGridRow 以更正错误。但由于此代码是由 Visual Studio 自动生成的，它们将更改为原始格式。

这是我当前的代码片段

```
public class MyDataGridView : DataGridView, IMyInterface
{
    public string LuName{get; set;}

    public MyDataGridView ()
    {
        this.RowTemplate = new MyDataGridViewRow();
    }
    ...
}

public class MyDataGridViewRow : DataGridViewRow, IMyInterface2
{
    public string RowName{get; set;}

    public MyDataGridViewRow ()
    {

    }
    ...
} 
```

Form的设计器代码的一部分：

```
partial class Form4
{
    ...
    #region Windows Form Designer generated code
    this.myDataGridView1.RowTemplate.RowName= null;  // here's the error generated line
    #endregion
    ...
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:44:30.100

just found a solution for my problem.

i have override the RowTemplate Property in MyDataGridView class

```
public class MyDataGridView : DataGridView, IMyInterface
{
    public string LuName{get; set;}

    public MyDataGridView ()
    {
        this.RowTemplate = new MyDataGridViewRow();
    }

    //Soution is override the RowTemplate Property By MyDataGridViewRow

    public new MyDataGridViewRow RowTemplate
    {
        get
        {
            return (MyDataGridViewRow)base.RowTemplate;
        }
        set
        {
            base.RowTemplate = value;
        }
    }

    ...
} 
```

# javascript - 扩展 jQuery post 功能

> ID：10281642
> 
> 赞同：3
> 
> 时间：2012-04-23T13:36:30.847
> 
> 标签：javascript, jquery

我的代码中有以下功能：

```
 $.post($form.attr('action'), $form.serializeArray())
            .done(function (json) {
            } 
```

根据我从 jQuery 文档中了解到的情况，这是一条捷径。我想做的是进行更改，以便它允许我拥有一些在成功时执行的功能和一些在错误时执行的功能。这可能吗？我看到的只是一个.done？

```
$.ajax({
   url: target,
   dataType: 'json',
   type: 'POST',
   data: data,
   success: function(data, textStatus, XMLHttpRequest) { },
   error: function(XMLHttpRequest, textStatus, errorThrown) { } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:38:43.480

由于[所有 jQuery ajax 方法](http://api.jquery.com/category/ajax/)，包括`$.post()`，都返回一个对象，如果您不想使用完全调用[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)，可以使用[Deferred 对象 API](http://api.jquery.com/category/deferred-object/)`$.ajax()`。

```
$.post(/* snip */).fail(function () {/* snip */}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:38:43.120

实际上，您可以使用 .success() .error() 和 .complete() 作为 .post() 的链接方法 - [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# tridion - 如何在 SDL Tridion 2011 SP1 中将嵌入模式作为内容模式的下拉列表传递

> ID：10281646
> 
> 赞同：4
> 
> 时间：2012-04-23T13:36:46.897
> 
> 标签：tridion, tridion2009

我正在尝试在 SDL Tridion 中创建一个模式来满足这些要求。

我有两个主要领域：

1.  ABCD，它有一个子字段为“XYZ”
2.  AAAA，它有两个子字段，即“名称”和“值”

两个主要字段都是可重复的，并且应该是可移动的。

示例模式可能看起来符合要求：

```
ABCD----AAAA----ABCD---AAAA
AAAA----ABCD----ABCD----AAAA 
```

主要字段 AAAA 和 ABCD 应该从一个移到另一个。

假设我使用创建的架构创建一个组件，第一个主要字段为“AAAA”，第二个字段为“ABCD”，那么我应该能够将 ABCD 移动到 AAAA 上方。

我尝试创建一个包含两个字段的嵌入式模式：

1.  选择主字段：作为列表，我选择 ABCD 和 AAAA 作为 TEXT 类型。

2.  文字：输入文字。

将此模式作为内容模式的一部分添加为多值，允许“重新发布和重复”。

面临的问题：

*   由于两个主要字段的字段不通用，我无法为其输入数据，并且两个主要字段的公共子字段不能满足需要..

需要的解决方案：

*   如果我使用必填字段创建两个名为“ABCD”和“AAAA”的嵌入式架构，我可以将这些架构添加为主要内容架构中下拉列表的一部分吗？

*   如果用户选择嵌入模式“ABCD”，它应该只显示“XYZ”字段。如果用户选择“AAAA”，我应该将其子字段显示为“名称”和“值”。

如果这不可行，您能否建议满足要求的最佳解决方案？

我将 DWT TBB 和 XSLT TBB 用于再现部分。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:09:42.727

我不相信使用开箱即用的 SDL Tridion Web Schemas 支持这一点（尽管最近有许多很棒的未记录的模式更改已经悄悄进入产品）。Tridion Web Schemas 使用 XSD 中的序列来控制字段的顺序（和数字），这会阻止您拥有具有两种类型的 Embedded Schema 的多值字段。但是，您可以使用复杂的模式（即通过设计自己的模式或使用源选项卡修改使用 GUI 构建的模式自己建模数据），但可能不再能够使用 GUI 编辑您的内容。

无论如何，您可以使用多值组件链接字段而不是嵌入式模式吗？这样，您可以将字段链接到 AAAA 或 ABCD 类型的项目，并将它们按您想要的任何顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:18:06.643

如果您想留在 Tridion Web Schemas 的领域内，这确实是不可能的。正如 Chris 所解释的，如果您开始为此使用复杂模式，您将失去基于表单的 UI 来编辑组件。

我能想到的唯一解决方案是将 ABCD 和 AAAA 的所有字段添加到可嵌入模式中，并使所有内容都不是强制性的。如果内容验证很重要，那么您可以实现一个事件系统来检查组件的保存。在这里您可以进行条件检查，如果您的可嵌入架构的 ABCD 部分的字段已填充，它将忽略或什至可以清除 AAAA 字段，反之亦然。

您的模板代码现在需要决定要显示的内容。如果嵌入模式上的所有字段都填满，则需要选择显示什么，否则只能显示输入的内容。您应该在可嵌入Schema的字段描述中明确模板的逻辑，以便您可以引导内容编辑器进入哪个场景需要什么内容（保存时由事件系统支持以验证正确性）。

# google-app-engine - 应用引擎 ndb 在超时之前不会使缓存失效

> ID：10281651
> 
> 赞同：1
> 
> 时间：2012-04-23T13:37:08.630
> 
> 标签：google-app-engine, caching

有没有办法让 NDB api 在不使缓存失效的情况下写入数据库？这样，人们从缓存中读取直到超时到期，而不是在写入一些新数据时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:11:12.513

是的，将 use_memcache=False 传递给 put() 操作：

```
 ent.put(use_memcache=False) 
```

# api - 使用 Lync API 重新激活已终止的 Lync 对话

> ID：10281653
> 
> 赞同：0
> 
> 时间：2012-04-23T13:37:15.190
> 
> 标签：api, state, lync

使用启用了 UI 抑制模式的 Lync API，是否可以重新激活已终止的一对一对话？目前，在我的应用程序中，如果用户在对话状态终止时尝试发送消息，我会创建一个新对话并邀请其他用户加入。如果有一种简单的方法可以重新激活已终止的对话，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:13:53.823

一旦对话终止，AFAIK，它就会永远终止：你永远无法重新创建它。

但是，如果您的应用程序正在跟踪对话并在它们终止时存储有关它们的信息，那么您可以自己执行此功能。如果用户发送消息并且您知道与该用户的现有对话已经终止，您可以显示终止的对话信息，同时将用户连接到新对话。对于您的应用程序的用户来说，看起来对话从未终止过。

# wcf - 如果用户从单独的项目输入无效的数据结构，则 WCF 服务失败

> ID：10281658
> 
> 赞同：3
> 
> 时间：2012-04-23T13:37:27.140
> 
> 标签：wcf

我在 1 个项目中有一个 wcf 服务，还有一个对象模型将我的所有对象保存在另一个项目中。我在服务项目中添加了对对象模型的引用，并且能够在我的服务中使用这些对象而不会发生意外。

当我发布服务并且其他用户使用它时。他们能够输入无效的数据和架构，并且服务不会失败。

我需要将服务连接到对象模型。如果用户不遵守对象的模式，服务应该会自动失败。

我不确定我是否必须在 web.config 中设置配置？

我不明白的是，如果我将对象上的属性设置为必需。如果用户不将此属性添加到传递给服务的对象，为什么服务不会自动停止？

```
[DataMember(IsRequired = true)]
        public string VendorName { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:46:06.307

### WCF 自动化方法

要根据其 WSDL 合同自动执行 WCF 验证，您可以使用在此 MSDN 博客[`WsdlExporter`](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.wsdlexporter.aspx)中[共享的](http://blogs.msdn.com/b/martijnh/archive/2007/05/13/wcf-message-validation-1-wcf-samples-to-the-rescue.aspx)。

### WCF 原始方法

1.  您可以使用 WCF[架构验证行为扩展](http://msdn.microsoft.com/en-us/library/ff647820.aspx)。自定义[`BehaviorExtension`](http://msdn.microsoft.com/en-us/library/aa734726.aspx)将允许您强制对定义的模式进行数据验证。

2.  您还可以使用 WCF[参数验证行为扩展](http://msdn.microsoft.com/en-us/library/ff647875.aspx)来强制执行参数约束。

    请参阅 MSDN 了解 WCF[输入/数据验证常见问题解答](http://msdn.microsoft.com/en-us/library/ff647141.aspx)。

### WCF 验证评论

另请查看这篇关于为什么不执行 WCF 输入/数据验证的[精彩 SO 帖子。](https://stackoverflow.com/a/9268213/175679)

[使用 WCF 进行 XML 消息传递](http://www.innoq.com/blog/hw/2007/08/19/the_four_tenets_and_xml_messaging_with_wcf.html)的四个原则也提供了关于模式验证的有趣视角。

# java - 覆盖 JTextField 中的paint方法以绘制文本

> ID：10281659
> 
> 赞同：1
> 
> 时间：2012-04-23T13:37:35.400
> 
> 标签：java, swing, graphics, jtextfield

我希望`JTextField`通过覆盖绘制方法在 a 上绘制一个数字。这样当用户编辑文本字段时，数字不会消失。但是，目前，该数字根本没有出现，我尝试过：

```
public void paintComponent(Graphics g) {  
     super.paintComponent(g);
     if(number != 0){
            g.setColor(Color.RED);
            g.drawString(String.valueOf(number),0,0);
     }  
} 
```

任何想法，这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:55:05.627

尝试在`g.drawString(String.valueOf(number),0,0);`呼叫中使用 Y 位置。例如使用`getHeight()/2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:05:15.433

> ..当用户编辑文本字段时，数字不会消失。

正如@mKorbel 所指出的，无需重写 a`JTextField`即可获得红色数字，只需使用公共方法对其进行配置。哦..

```
g.drawString(String.valueOf(number),0,0); 
```

如果这真的都是关于数字的，也许最好的方法是将 a[`JSpinner`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSpinner.html)与 a 一起使用[`SpinnerNumberModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SpinnerNumberModel.html)，并设置一个 custom [`SpinnerUI`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/SpinnerUI.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:43:26.673

你为什么不在前面加一个小`JLabel`呢`JTextField`？可以包含数字，并且因为它不可编辑，`JLabel`所以无论用户在`JTextField`. 您还可以通过调用 格式化`JLabel`以使其变为红色`setForeground(Color.RED);`。这可能是一个更简单的解决方案？

例如，而不是这样做......

```
JPanel panel = new JPanel(new BorderLayout());
JTextField textfield = new JTextField("Hello");
panel.add(textfield,BorderLayout.CENTER); 
```

你可能会做这样的事情......

```
JPanel panel = new JPanel(new BorderLayout());

JTextField textfield = new JTextField("Hello");
panel.add(textfield,BorderLayout.CENTER);

JLabel label = new JLabel("1.");
label.setForeground(Color.RED);
panel.add(label,BorderLayout.WEST); 
```

`JLabel`这在 的左侧添加了一个红色`JTextField`，并且因为您使用`BorderLayout`的是，`JPanel`所以它会自动使其`JLabel`尽可能小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:41:26.233

也许没有理由覆盖`paintComponent()`JTextField [，](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)而不是使用

*   `JTextField.setBackground()`

*   `JTextField.setForeground()`

*   `JTextField.setFont()`

*   `JTextField.setHorizontalAlignment(javax.swing.SwingConstants.LEFT)`

*   `Html`通过放置彩色或特殊格式的文本可以进行一些黑客攻击

编辑

也许这个问题是关于

*   `KeyEvents`在过滤`Document / DocumentListener`

或者

*   `JFormattedTextField`和`Number Formatter`

# android - 如何旋转android customview？

> ID：10281660
> 
> 赞同：-6
> 
> 时间：2012-04-23T13:37:38.657
> 
> 标签：android, android-layout

我必须实现代码来旋转放置在自定义视图中的图像。请帮我。我在创建自定义视图时很笨，还必须旋转它。帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:51:34.510

由于您有一个自定义视图覆盖 onDraw() 并在该函数内调用 canvas.rotate(..) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:48:23.630

如果您创建自定义视图，您将手动绘制它，这样您就可以拥有一个表示视图状态（旋转或正常）的布尔值（或 int 角度值）。根据此值，您的 onDraw 方法的行为会有所不同（例如，坐标将被反转）

也许，这对您来说会更容易：http: [//developer.android.com/reference/android/view/animation/RotateAnimation.html](http://developer.android.com/reference/android/view/animation/RotateAnimation.html) 使用您想要的值（使用正确的构造函数）创建您的旋转动画，然后将其应用于使用 View.startAnimation 的视图。它应该做你想做的

# sql - 如何在 SQL 中对字符串进行子串化

> ID：10281662
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:37:46.240
> 
> 标签：sql

我的数据会是这样

```
IPDocument/XR/test_20120409_clearGAC.txt
IPDocument/XR/test_20120409_clearGAC_05.txt
IPDocument/XR/test_20120409_clearGAC_01.txt 
```

我想从上面提取**clearGAC.txt 。**如何在 SQL 中使用子字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:41:21.917

**我假设您想要 _05 和 _01** - 问题尚不清楚。

```
DECLARE @var VARCHAR(250)

DECLARE @table TABLE ( val VARCHAR(250) )
INSERT  INTO @table
        SELECT  'IPDocument/XR/test_20120409_clearGAC_01.txt'
        UNION ALL
        SELECT  'IPDocument/XR/test_20120409_clearGAC_05.txt'
        UNION ALL
        SELECT  'IPDocument/XR/test_20120409_clearGAC.txt' 

SELECT  SUBSTRING(val, CHARINDEX('clearGAC', val), 50),
        SUBSTRING(SUBSTRING(val, CHARINDEX('_', val)+1, 50), CHARINDEX('_', SUBSTRING(val, CHARINDEX('_', val)+1, 50))+1, 50)
FROM    @table 
```

返回这个：

```
clearGAC_01.txt
clearGAC_05.txt
clearGAC.txt 
```

CHARDINDEX 中的第三个参数可以大于长度。

**编辑：**如果您不知道是否`clearGAC`是名称，我添加了逻辑

阅读您的评论后，您可能只想要这个：

> 我将通过 ClearGAC.txt 并查看它是否在数据库中。这个 ClearGAC.txt 可以像上面的代码一样命名。

```
DECLARE @var VARCHAR(250)

DECLARE @table TABLE ( val VARCHAR(250) )
INSERT  INTO @table
        SELECT  'IPDocument/XR/test_20120409_clearGAC_01.txt'
        UNION ALL
        SELECT  'IPDocument/XR/test_20120409_clearGAC_05.txt'
        UNION ALL
        SELECT  'IPDocument/XR/test_20120409_clearGAC.txt' 

SELECT  *
FROM    @table
WHERE   val LIKE '%clearGAC%.txt' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:40:26.273

```
SELECT SUBSTRING('IPDocument/XR/test_20120409_clearGAC.txt', CHARINDEX('09_','IPDocument/XR/test_20120409_clearGAC.txt')+3, 100) 
```

结果：clearGAC.txt

# playframework - 多对多映射 + 关联表中的附加字段

> ID：10281664
> 
> 赞同：1
> 
> 时间：2012-04-23T13:37:47.053
> 
> 标签：playframework, playframework-2.0, ebean

你好

我有两个模型`Entry`，它们与注释`Entrant`有关系。`ManyToMany`在生成 DDL Ebean 时，会添加`entry_entrant`包含提到的模型 ID 的字段的表。

一般来说，我需要扩展此表，以添加字段，即关系创建日期或添加关系的用户。

这是使用注释的简化方法，还是我应该只创建两个`OneToMany`关系并添加手动`EntryEntrant`关联模型？

提前感谢，比西奥！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:52:17.767

我在休眠时遇到了类似的问题。我使用了第二种方法并创建了一个包含我需要的字段的普通类。与其他 2 个类（在您的情况下为 Entry 和 Entrant）相比，我创建了与第三类的 @OneToMany 关系。老实说，多对多的好方法是由两个一对一的聚合表创建。在这里你只是手动创建这个

# jquery - ajax 调用 web 服务：返回未定义

> ID：10281665
> 
> 赞同：0
> 
> 时间：2012-04-23T13:37:53.667
> 
> 标签：jquery, asp.net, web-services

我有一个 jquery ajax 调用 asp.net Web 服务，但它不工作。我收到一个错误：

**isValid 被低估了。**

我设置了一个断点，发现代码永远不会到达 Web 服务。查询：

```
<script src="../jquery-1.7.2.min.js" type="text/javascript"></script>
<script>
    function ValidateUserName() {
        var isValid;
        $.ajax({ type: "POST",
            url: "UserNameWebService.asmx/ValidateUserName",
            data: "{'strUsername': '" + $("#<%=TextUserName.ClientID%>").val() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                isValid = data;
            }
        });
         return isValid;
        } 
</script> 
```

网络服务代码：

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class UserNameWebService : System.Web.Services.WebService
{

    [WebMethod]
    public bool ValidateUserName(string strUsername)
    {
        \\ then return something by logic 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:47:24.753

您`isValid`在 Ajax 完成之前返回。最好的办法是编写一个在完成 Ajax 调用时调用的函数。

```
 $.ajax({ type: "POST",
        url: "UserNameWebService.asmx/ValidateUserName",
        data: "{'strUsername': '" + $("#<%=TextUserName.ClientID%>").val() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (data) {
            RenderResult(data);
        }
    }); 
```

然后在这里处理返回的数据。

```
function RenderResult(data){
    // handle the returned result here
    var isValid = data;
} 
```

# delphi - DELPHI：将计算值放入主明细中，其中明细位于网格中

> ID：10281672
> 
> 赞同：0
> 
> 时间：2012-04-23T13:38:14.630
> 
> 标签：delphi, master-detail, tclientdataset, tdbgrid

我使用 ClientDataSets（服务和插件）创建了一个主从关系。服务显示在 DBLookupComboBox (cboServices) 中，一旦选择了服务，插件就会显示在 DBGrid (grdMain) 中。

插件有一个复选框来指示插件被选中、一个名称字段、一个用户可以更改的数量字段、一个单价字段和一个总价字段。

我创建了一个 OnQuantityChange 方法来使用单价和数量更新总价，但是如何从行中获取实际数据来进行更新？如何引用各个字段以执行以下操作：

```
grdMain.GetActiveRow.Column['TotalPrice'] := 
   grdMain.GetActiveRow.Column['UnitPrice'] * grdMain.GetActiveRow.Column['Quantity']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:15:43.967

您可以使用计算字段轻松做到这一点。我建议您查看以下文章以获取有关客户端数据集的详细示例。只需在文章中搜索计算字段，您就会找到所需的内容。

[TClientDataset 示例](http://edn.embarcadero.com/article/29001)

# iphone - 任何已知的通过 USB 电缆（无 wifi）从 iPhone 浏览 PC 本地主机的方法？

> ID：10281676
> 
> 赞同：3
> 
> 时间：2012-04-23T13:38:21.250
> 
> 标签：iphone, windows, visual-studio-2010, usb, localhost

当我在 Visual Studio 2010 中运行测试移动站点时，它给了我一个 localhost:4331 我想找到一种方法通过 USB 电缆将 HTTP 端口转发到我的 iPhone，以便我可以在设备上进行测试。

他们在这里的关键是使用 USB 电缆而不是无线网络，因为我在一个非常封闭的环境中工作，没有 wifi 可用。

我希望 iPhone 通过 USB 电缆连接到互联网，因此它将使用我的 Windows LAN 连接，并且 Windows localhost 对 iPhone Safari 可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:01:16.650

I don't think you can do this. You either need to use WiFi, or have your server exposed on a public network that is accessible via your carrier. You might have some more options with a Jailbroken device.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T12:51:24.197

请按照以下步骤查看它的工作原理 -

1.  通过 USB 将 iPhone 连接到 PC
2.  找到网络共享和热点设置并在您的 iPhone 上启用“USB 网络共享”。
3.  当您的 PC 成功连接到 Internet 后，在命令提示符下键入“ipconfig”。只需复制 ipv4 地址（连同端口）并在浏览器中输入它并激活 localhost
4.  如果一切顺利，请在您的手机（连同端口）网络浏览器上输入相同的 ipv4 地址。
5.  服务器主页将在 iPhone 上打开。

我希望这有帮助。

# c# - 创建文件时的 C# XNA 发布问题

> ID：10281677
> 
> 赞同：0
> 
> 时间：2012-04-23T13:38:26.133
> 
> 标签：c#, file, xna, clickonce, publish

我一直在为我和我的朋友发布我的游戏进行测试，我已经开始在代码中制作一个文本文件以用作错误日志，但我遇到了一些问题，我在互联网上找不到任何东西帮我。

我想要它，以便用户可以获取安装文件，将其安装在自定义位置，通过快捷方式运行它，这样我就可以在用户安装它的位置创建文件以保存游戏、错误日志等。

发生的情况是，我创建了一个 clickonce 应用程序，但在使用 setup.exe 后，该快捷方式无法使用，它只是说“程序已停止响应”，因为它正在尝试创建文件，而我无法以管理员身份运行它。我只能将管理员设置为 setup.exe，游戏的快捷方式或任何 clickonce 应用程序都没有选项。而且我不知道如何让用户选择安装目录。

我搜索了谷歌和 msdn 库，但找不到任何东西。它说如果我不使用 clickonce 部署，我需要另一个安装包，但我找不到任何东西。我也尝试修改 app.manifest 转：

```
 <requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

至

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

但它不允许我发布它，因为它是一个 clickonce 应用程序，如果我在安全性中关闭它，它只会在我尝试发布它时重新打开它。有人可以告诉我我的选择吗，我只想像其他所有游戏一样正常安装游戏，这让我发疯，我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:09:16.413

这不是问题的直接答案，但它可能是您真正需要的。

~~您应该能够~~在 ClickOnce 应用程序部署文件夹中创建和使用文件，而无需任何安全限制（无需管理员权限），您可以使用

```
ApplicationDeployment.CurrentDeployment.DataDirectory 
```

请注意，更新应用程序时，此文件夹中的所有内容都将被重写，因此您应该重新创建所有日志文件等。

## 编辑

实际上，请注意 - 这篇[msdn](http://msdn.microsoft.com/en-us/library/d8saf4wy.aspx)文章另有说明：您仍然需要安全权限才能读取和写入此文件夹。

但是，它还说，[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)正是用于此目的：在部分信任的情况下读取和写入特定于应用程序的数据，例如使用未提升的 ClickOnce 应用程序：

### 隔离存储

> 隔离存储通过使用简单的 API 提供了用于创建和访问文件的 API。存储文件的实际位置对开发人员和用户都是隐藏的。
> 
> 隔离存储适用于所有版本的 .NET Framework。隔离存储也适用于部分受信任的应用程序，无需额外的权限授予。如果您的应用程序必须以部分信任的方式运行，但必须维护特定于应用程序的数据，您应该使用独立存储。

## 编辑 2

但是，在使用隔离存储之前，请尝试应用程序部署目录——它对我来说很好用！

# python - 欧拉 #18 与 Python

> ID：10281678
> 
> 赞同：-4
> 
> 时间：2012-04-23T13:38:35.473
> 
> 标签：python

我正在尝试解决[项目欧拉问题 18](http://projecteuler.net/problem=18)。 [http://projecteuler.net/problem=18](http://projecteuler.net/problem=18) 我尝试了一个贪心算法，python 从三角形底部开始工作。然后我向上移动一排并使用贪婪算法找到最大的路线并尝试连接最大的路线但它不起作用。您是否有任何提示可以让我走上正确的轨道，而不会给出问题的解决方案。

这是功能：

```
def greedy(i):
    if i%15==0:
        a=[(b[i-15],i-15),(b[i-14],i-14)]
        a=sorted(a)
        a=a[-1]
    else:
        a=[(b[i-15],i-15),(b[i-16],i-16),(b[i-14],i-14)]
        a=sorted(a)
        a=a[-1]
    return a 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:48:42.740

你听说过[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)吗？

考虑这个问题。什么使路线最好？最后一步和上一步之间有什么关系吗？另外，看看这个贪心算法没有给你正确答案的三角形：

```
 1
    2   3
  9   1   2
1   1   2   4 
```

# php - 在页面加载时将光标插入 PHP 下拉菜单

> ID：10281679
> 
> 赞同：1
> 
> 时间：2012-04-23T13:38:39.673
> 
> 标签：php, javascript, html

我想知道是否有人可以帮助我。

首先，抱歉，我确信这是一个非常简单的解决方法，但我找不到答案。

我正在使用下面的脚本来创建一个下拉菜单。一旦从中选择了一个值，就会检索相关记录。

```
<html> 
<head>  
<script type="text/javascript"> 

function ajaxFunction(name) 
{ 
var browser = navigator.appName; 
if(browser == "Microsoft Internet Explorer") 
{ 
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 

} 
else 
{// code for IE6, IE5 
xmlhttp=new XMLHttpRequest(); 

} 
xmlhttp.onreadystatechange=function() 
{ 
if (xmlhttp.readyState==4 && xmlhttp.status==200) 
{ 
document.getElementById("my_div").innerHTML=xmlhttp.responseText; 
} 
} 

xmlhttp.open("GET","getfinds.php?dateoftrip="+name,true); 
xmlhttp.send(); 
} 

function getquerystring() { 
var form = document.forms['frm1']; 
var word = form.word.value; 
qstr = 'w=' + escape(word); // NOTE: no '?' before querystring 
return qstr; 
} 

</script> 

<style type="text/css"> 
<!-- 
.style1 { 
    font-family: Calibri; 
    font-size: 14px; 
} 
--> 
</style>

</head> 
<body onLoad="document.forms.getfinds.name.focus()" > 

<form action="getfinds.php" method="get" name="getfinds"> 
<input name="field" type="hidden" id="field" value="">
<table width="148" border="0"> 

<tr> 
<td width="152"><p class="style1">Select a date from below</p> 
  <div align="center"> 
    <?php 
include("db.php"); 

$query="SELECT dateoftrip FROM finds GROUP BY dateoftrip ORDER BY dateoftrip DESC"; 
echo '<select onchange="ajaxFunction(this.value)"><option name="name" value="allrecords">Show All Records</option>';
$result=mysql_query($query); 
while($rows=mysql_fetch_array($result)){ 

echo "<option name='name' value=".$rows['dateoftrip'].">".$rows['dateoftrip']."</option>"; 

} 
echo "</select>"; 
?> 
  </div></td> 
</tr> 
</table> 
</form> 
<div id="my_div"></div> 
</body> 
</html> 
```

我正在尝试找到一种在页面加载时将光标插入下拉菜单的方法。

我尝试使用以下内容：`<body onLoad="document.forms.getfinds.dropdown.focus()" >`但是当我运行脚本时，我收到以下错误：`document.forms.getfinds.dropdown is null or not an object.`

正如我所说，我为这个简单的问题道歉，但我一直在寻找答案。

我只是想知道是否有人可以让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:40:42.327

将您的选择语句更改为：

```
echo '<select id="dropdown" name="dropdown" onchange="ajaxFunction(this.value)"> 
```

将您更改`<body>`为：

```
<body onLoad="document.getElementById('dropdown').focus()" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:50:41.613

从标签中取出`name="name"`属性。`<option>`

将属性添加`name="dropdown"`到您的`<select>`标签。

然后你`onLoad`会工作正常。无需更改它。

`<option>`标签不支持 name 属性。

阅读更多： [http ://www.w3schools.com/tags/tag_option.asp](http://www.w3schools.com/tags/tag_option.asp)

# c# - 我如何获得 ajax 视图源结果？

> ID：10281680
> 
> 赞同：0
> 
> 时间：2012-04-23T13:38:40.143
> 
> 标签：c#, javascript, ajax, perl, dom

我想从使用 ajax 的网站获取结果，当我保存视图源时，ajax 详细信息不会出现，但是当我使用 firebug 时，我可以看到源。有没有办法让这个源在 c# 或 Perl 中变成字符串？有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:03:36.097

AJAX 使用通过 http 的远程调用来更新 HTML 界面，因此您需要找出 AJAX 执行正在调用的 URL。使用正确的 URL 和参数，您可以进行 LWP::UserAgent 调用并解析响应内容。

# solr - Solr 是否需要索引 Nutch 的爬网数据？

> ID：10281681
> 
> 赞同：1
> 
> 时间：2012-04-23T13:38:41.217
> 
> 标签：solr, lucene, nutch

我发现 Nutch 1.4 只包含一个 Indexer/solrindex。Solr 是 Nutch 索引爬取数据的唯一方法吗？如果不是，还有哪些其他方法？

我也想知道为什么 Nutch 1.4 使用 Solr 来索引数据。为什么不自己做呢？不是增加了这两个项目的耦合度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:11:20.980

Solr 在内部使用 lucene。**从 2005 年开始，nutch 被指定为 Lucene 的子项目。**从历史上看，nutch 使用 lucene 索引并且是一个成熟的搜索引擎（直到 1.0 版）。它具有爬取能力，甚至支持通过浏览器索引数据和 UI 来查询索引数据（类似于谷歌搜索）。

由于最初的设计是基于 lucene 的（它是另一个 apache 项目，在那个时期赢得了很多赞誉并且仍然很摇滚），**nutch 代码没有更改或通用，因此可以使用其他索引框架**。如果您愿意，那么您需要付出很多努力才能将您的索引框架与它结合起来。

**在最近的版本**中（nutch 版本 1.3 及更高版本），Nutch 开发团队意识到由于不断变化的需求和所需的专业知识，很难跟踪索引所涉及的工作。**最好将索引的责任委托给 Solr**（它是一个基于 lucene 的索引框架）。Nutch 开发人员只关注爬行部分。所以现在 nutch 不是一个成熟的搜索引擎，而是一个成熟的网络爬虫。

希望这能回答您的问题。您可以浏览[nutch 新闻](http://nutch.apache.org/#Apache+Nutch+News)以获取更多信息。

**最新动态：**

最近正在努力为爬虫创建一个通用库（在 commons 下）。这个项目是[commons-crawler](http://code.google.com/p/crawler-commons/)，它将具有网络爬虫所需的所有功能，可用于创建爬虫。进一步的 nutch 版本将使用这个库作为依赖项。

# mysql - 数据挖掘、数据检索、分析和统计理念

> ID：10281684
> 
> 赞同：0
> 
> 时间：2012-04-23T13:38:43.647
> 
> 标签：mysql, sql, statistics

我有一个用于常规 POS 系统的数据库，其中包含`stock`, `orders`, `customers`, `employees`,...等表

我一直在添加一些简单的查询和统计信息，例如：

*   售出最多和最少的商品
*   最多和最少的客户购买
*   最多和最少的员工销售
*   最多和最少的小时数、天数、月数和天数 + 售出小时数
*   一起出售的物品 (2,3,4)

我一直在网上搜索更高级的查询、数据检索、数据分析等，这些都适用于这样的数据库，但没有运气。

我将不胜感激任何想法或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:00:22.577

根据这个[UCLA Datamining class](http://www.anderson.ucla.edu/faculty/jason.frand/teacher/technologies/palace/datamining.htm)，寻求四种类型的关系：

*   课程
*   集群
*   协会
*   顺序模式

对于您的零售示例，*课程*可能会提出以下问题

*   我有哪些类型的客户？高端？冲动？
*   高端客户买什么？
*   冲动顾客会买什么？

*集群*可能会提出类似的问题

*   如果他们买 Huggies，他们还会买什么？（婴儿食品，大学 IRA）
*   如果他们开一个活期账户，他们还会开一个货币市场账户吗？

*关联*寻找购买之间的关联。

*   啤酒，木炭，打火机液体，周末假期前的牛排。

*顺序模式*可能会寻找类似的模式

*   他买了一个准系统和一个 CPU。他购买内存和硬盘的可能性有多大？

这些关系可用于推动营销活动、追加销售（销售量超过收入）或促销活动。

有关使用数据挖掘在英国找出恐怖分子的迷人观点，请参阅Levitt 和 Dubner 的[SuperFreakonomics](https://rads.stackoverflow.com/amzn/click/com/0060889586)。

# scala - 我可以使用伴随对象来管理 Salat 案例类 DTO 的范围吗？

> ID：10281685
> 
> 赞同：1
> 
> 时间：2012-04-23T13:38:44.790
> 
> 标签：scala, playframework, playframework-2.0, salat

我一直在 Play2 webapp 中使用 Salat 进行 MongoDB 交互（通过 Leon Radley 的简洁 SBT 插件）。效果很好，但是由于嵌套（为了反映嵌套的 JSON/BSON 模型定义）我们有许多案例类 DTO，我们希望在基本模型类型的伴随对象中巧妙地定义嵌套的案例类 DTO。

这可以防止在我们的 Salat 数据访问层中激增的案例类 DTO 中的命名空间冲突。例如，我们定义了一个“描述”案例类，但它为不同的模型对象重新定义，所以我们想要一种简洁的方式来命名它。为此，我们尝试使用伴随对象，就像在这个小片段/示例中一样：

```
package models.mongo

import com.novus.salat._
import com.mongodb.casbah.Imports._
import se.radley.plugin.salat._

case class TestSalatDto(
  id: ObjectId = new ObjectId,
  title: String,
  description: TestSalatDto.Description)

object TestSalatDto {
  case class Description(
    brief: String,
    full: String)
} 
```

这一切都编译得很漂亮，但在运行时失败并出现**com.novus.salat.util.ToObjectGlitch：**在从 Mongo 解组期间参数类型不匹配。

如果我们简单地将伴随对象定义转换为包定义（封装 DTO 汤的一种稍微混乱的方式），那么一切都运行良好（解组是一种享受）。

我很困惑为什么在对象中声明案例类在运行时失败；在对象中定义案例类（Salat DTO）是否有技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:23:36.557

我不会尝试在同一个源中拥有一个案例类和一个同名的 Singleton。案例类创建它自己的与你的单例冲突的比较对象。我的解决方案将没有伴随对象，只有类 TestSalatDtoDescription （无论是什么）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:22:19.307

您的问题是 Salat 目前不支持嵌套类。

不起作用：

```
object TestSalatDto {
  case class Description(
  brief: String,
  full: String)
} 
```

工作正常：

```
case class Description( /* etc etc */)
case class TestSalatDto(description: Description, /* etc etc*/) 
```

# asp.net-mvc - MVC 3：测试控制器 VS 集成测试

> ID：10281692
> 
> 赞同：2
> 
> 时间：2012-04-23T13:39:39.593
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing

我最近开始使用 MVC，因为我听说 MVC 的主要优点是它使应用程序可单元测试。在编写了第一个单元测试后，我发现测试内部有很多逻辑的控制器并不总是那么简单（发送确认电子邮件、使用会话、上下文和其他 ASP 网络静态）。编写单元测试比编写功能花费的时间更多，而且我不相信这是有用的。

我很想将业务逻辑移动到“服务”层中，该层消除了所有 ASP Net 静态并且可以轻松测试。然后使用 Selenium 进行集成测试，以测试整个功能。

1.  当测试一个动作非常复杂（尤其是模拟输入和设置环境）时，您是否遇到过这种情况？

2.  您是否找到了一种在控制器中包含业务逻辑的好方法。或者您发现使用服务和控制器代码只是中继服务调用更好？

3.  在我看来，测试控制器更等同于集成测试而不是单元测试。你怎么看待这件事？

4.  你认为单元测试控制器比集成测试有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:56:56.293

> 我很想将业务逻辑移动到“服务”层中，该层消除了所有 ASP Net 静态并且可以轻松测试。然后使用 Selenium 进行集成测试，以测试整个功能。

这几乎就在这里。如果您的控制器很复杂，那么它们需要重构。他们根本不应该有任何业务逻辑。您可以使用 Mock 框架来模拟服务层并通过这种方式轻松测试您的控制器。

> 在我看来，测试控制器更等同于集成测试而不是单元测试。你怎么看待这件事？

我不同意这一点。您正在测试您的控制器，以确保它根据您提供的输入返回适当的响应。提供一个不存在的 id？重定向到另一个页面或返回 NotFound 视图。模型状态无效？再次返回相同的视图，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:49:58.673

> 当测试一个动作非常复杂（尤其是模拟输入和设置环境）时，您是否遇到过这种情况？

当您的控制器有很多依赖关系并且它们与它们紧密连接时，就会发生这种情况。除非它是现有代码并且对代码进行更改会带来更多麻烦，否则您应该通过接口或抽象类松散地耦合依赖关系，这使得单元测试变得如此容易。您甚至应该使用 Session、Cache 和类似对象的包装器。

正如@Dismissile 建议的那样，首先你必须重构你的控制器，然后单元测试就会很容易。

> 您是否找到了一种在控制器中包含业务逻辑的好方法。或者您发现使用服务和控制器代码只是中继服务调用更好？

控制器不是放置业务逻辑的地方。所有的业务逻辑都应该在 Model 类中。控制器的全部职责是与模型对话并将视图、json 或其他任何内容返回给客户端。如果控制器中有复杂的业务逻辑，则应将它们移至模型类。

简单地说，您应该考虑“转储视图..瘦控制器..胖模型”！

> 在我看来，测试控制器更等同于集成测试而不是单元测试。你怎么看待这件事？

集成测试与单元测试完全不同。在集成测试中，您必须设置应用程序并针对它运行测试用例。在这里，您正在测试每个测试场景中整个应用程序的行为，而不是单个单元。单元测试就是测试类中方法的功能。在单元测试中测试一个类或方法应该独立于其他类或方法。

但问题是在设计应用程序时应牢记单元测试，否则单元测试将变得与集成测试一样困难，当然它根本不是单元测试。

> 你认为单元测试控制器比集成测试有什么优势吗？

与系统级别相比，在单元级别查找和修复错误非常容易。所以答案是肯定的。

我认为在您的情况下，您有一个具有控制器的应用程序比他们必须做的更多。因此，如果您正在认真考虑单元测试，那么您必须在任何需要的地方重构和松散耦合依赖项，否则编写单元测试根本没有太大的收获。

# google-chrome - 在 Chrome 中，为什么 SVG foreignObjects 不缩放相对定位的内容？

> ID：10281695
> 
> 赞同：10
> 
> 时间：2012-04-23T13:39:52.437
> 
> 标签：google-chrome, svg

我在 SVG 中使用相对定位的 HTML 元素`foreignObject`。但是，在 Chrome 中，相对定位的内容并不尊重`scale()`或`viewBox`. 因此，它不是正确的尺寸。

[这是我在 jsFiddle 上的问题的一个例子](http://jsfiddle.net/nugWf/)。对于最终用户来说，所有三个文本片段都应该显示相同的大小......但在 Chrome 中它们不会。

这是什么原因造成的？

# Firefox 截图（如预期的那样？）

[![Firefox 中的 jsFiddle](../Images/45a87d759b78e0d086bef150857200cb.png)](https://i.stack.imgur.com/k1DoE.png)

# Chrome 屏幕截图（错误？）

[![Chrome 中的 jsFiddle](../Images/35bbd28c7d329ed6aa59f40bff1cad3f.png)](https://i.stack.imgur.com/k7wWd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:02:39.757

从

[24 个与`foreignObject`](https://bugs.webkit.org/buglist.cgi?quicksearch=foreignobject)WebKit 跟踪器和

[`foreignObject`](http://code.google.com/p/chromium/issues/list?can=2&q=foreignobject&colspec=ID+Pri+Mstone+ReleaseBlock+Area+Feature+Status+Owner+Summary&cells=tiles)与Chromium 跟踪器[相关的 19 个问题，](http://code.google.com/p/chromium/issues/list?can=2&q=foreignobject&colspec=ID+Pri+Mstone+ReleaseBlock+Area+Feature+Status+Owner+Summary&cells=tiles)

看来这很可能是意外行为。我鼓励您查看 WebKit 错误列表以了解此问题是否已知。如果不是，请尝试在另一个 WebKit 浏览器上重现此错误。如果问题在例如 Safari 中可重现，请将其作为错误提交给 WebKit；如果没有，请将其作为错误提交给 Chromium。

我的猜测是这是一个 WebKit 错误。[这个错误](https://bugs.webkit.org/show_bug.cgi?id=23113)看起来有点相似。

# tfs - 验证每个项目是否导入了我们的 Common.Targets

> ID：10281700
> 
> 赞同：0
> 
> 时间：2012-04-23T13:40:00.890
> 
> 标签：tfs, msbuild

我管理着一个相当大的团队（5 个解决方案，约 150 个项目），使用 TFS2010 和门控签到。在我们的团队中，我们要求每个项目都导入我们自己的名为 Common.Targets 的文件，该文件执行大量构建时的工作。我已经指示团队中的每个人都这样做，并在上面写了一个 wiki 条目。

但是，人们在添加新项目的时候还是会忘记导入 common.Targets，导致签入后的各种麻烦。

有没有办法 - msbuild 命令行，我可以在我的 .sln 中放入的东西等等 - 这样的项目将无法编译，因此不会通过门控签入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:28:12.840

一个经典的方法是登记政策。由于没有针对您的要求的预定义策略，您可以相当轻松地编写自己的自定义策略 - 请参阅[如何：创建自定义签入策略](http://msdn.microsoft.com/library/bb668980.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:44:32.713

2个选项：

1.  根据 KMoraz 的建议，编写自定义签入策略[（操作方法）](http://msdn.microsoft.com/library/bb668980.aspx)，将更改/添加的 .csproj 解析为 XML 并验证它们是否导入 Common.Targets。

    缺点：需要手动将其分发给团队中的所有开发人员，并管理更新（如果有）。

2.  编写自定义 CodeActivity [(How To)](http://blogs.msdn.com/b/aaronhallberg/archive/2009/06/01/writing-custom-activities-for-tfs-build-2010-beta-1.aspx)。它运行 msbuild MSBuildEmitSolution=1，将生成的 .sln.metaproj 解析为 XML 以获取 csproj 文件列表，然后按上述方式验证它们。

    缺点：开发人员只有在他的门控签入失败时才会看到错误。

我决定和2一起去。

# asp.net-mvc-3 - ajax 调用时不要延长会话过期时间

> ID：10281701
> 
> 赞同：0
> 
> 时间：2012-04-23T13:40:02.437
> 
> 标签：asp.net-mvc-3, session, extend

我在我的网站上使用slidingExpiration 会话。而且我还添加了 ajax 调用来检查每 15 分钟会话到期以在登录页面上重定向用户。调用此 ajax 时是否可以不扩展会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:05:31.633

找到答案。为避免会话过期延长，请通过 [SessionState(SessionStateBehavior.Disabled)] 属性标记控制器

# ajax - AJAX 发布到 CakePHP 控制器动作

> ID：10281703
> 
> 赞同：0
> 
> 时间：2012-04-23T13:40:15.407
> 
> 标签：ajax, cakephp, cakephp-1.3

我将一些用于注册的表单值发布到 cakePHP 控制器操作中。代码是这样的

```
var params='firstname='+encodeURIComponent(firstname) +'&lastname='+encodeURIComponent(lastname)+'&emailid='+encodeURIComponent(emailid)+'&password='+encodeURIComponent(password);

xmlhttp.open('POST', url, true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send(params); 
```

这是在发帖，我可以在 POST 部分源的 Firebug 中看到它

```
firstname=name&lastname=name&emailid=mymailid&password=123123 
```

但是当我在 action 中打印 $this->data 时，它没有显示任何值。我什至使用过 $_POST 它也返回任何东西..

我在这里做错了什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:02:28.560

try in controller like following:

```
$this->params['url']; // this will give an array of parameters 
```

Or, `$this->request['url']; // this will give an array of parameters`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:47:50.573

您缺少使用 POST 发送变量时所需的请求标头：

试试这个：

```
var params='firstname='+encodeURIComponent(firstname) +'&lastname='+encodeURIComponent(lastname)+'&emailid='+encodeURIComponent(emailid)+'&password='+encodeURIComponent(password);

xmlhttp.open('POST', url, true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.send(params); 
```

# rally - 拉力赛：按计划状态拉故事数以进行发布？

> ID：10281708
> 
> 赞同：2
> 
> 时间：2012-04-23T13:40:25.890
> 
> 标签：rally

我正在尝试从最新版本的故事计数 API 中提取，按计划状态细分。目前有一份报告可以做到这一点，但我在 API 中没有看到任何公开的方法。有谁知道这是否有可能获得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:19:36.093

您还可以通过更改查询参数来进一步过滤上面 Alan 的示例以及一些发布信息：

query=((ScheduleState = Defined) AND (Release.Name = "My Release"))

您是使用 App SDK 还是使用我们的其他 REST 工具包（ruby、.net、python）之一编写应用程序？您可以在这里找到一些更好的代码示例：

[http://developer.rallydev.com](http://developer.rallydev.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:29:44.710

您应该能够对每个计划状态进行查询，并从响应正文中获取 TotalResultCount。例如：

```
https://rally1.rallydev.com/slm/webservice/1.31/hierarchicalrequirement.js?query=(ScheduleState = "Defined")

https://rally1.rallydev.com/slm/webservice/1.31/hierarchicalrequirement.js?query=(ScheduleState = "In-Progress") 
```

等等。由于只有四个“内置”调度状态，加上一个可选的定义之前和一个可选的接受之后，最多 6 个请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:17:06.397

您也可以尝试批处理查询方法，该方法允许您只返回查询的大小而不是计算结果。请参阅 api 文档的“获取集合的大小”示例：

[https://rally1.rallydev.com/slm/doc/webservice/batch.jsp#example8](https://rally1.rallydev.com/slm/doc/webservice/batch.jsp#example8)

# objective-c - UIWebView 显示页面 - 缩小并保持缩小

> ID：10281710
> 
> 赞同：2
> 
> 时间：2012-04-23T13:40:32.903
> 
> 标签：objective-c, pdf, uiwebview, zooming

这是令人难以置信的烦人。有时我会查看一个很长的 PDF（按页面高度，而不是文档长度），所以我无法在不缩小的情况下获得完整的页面，当我将手指从屏幕上移开的那一刻，它就卡住了回到全宽。这意味着，我只能舒适地查看 PDF 页面的一小部分。

我需要捕捉到高度而不是宽度，但它不允许我缩小到比应用程序的宽度更远的地方。

这是我的设置：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 44, 1024, 704)];
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"pdf"];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:path]]];
[webView setScalesPageToFit:YES];
webView.scrollView.minimumZoomScale = 0.25;
[self.view addSubview:webView]; 
```

有人可以帮忙吗？

# c++ - 如何使用 Strtok 对 Const char* 进行标记？

> ID：10281712
> 
> 赞同：20
> 
> 时间：2012-04-23T13:40:36.633
> 
> 标签：c++, c, strtok

我有一个 const char* 变量，它的值可能类似于“OpenStack:OpenStack1”。我想使用 strtok 标记这个 const char* ，其中分隔符（它是 const char* 类型）是 ":" 。但问题是 strtok 属于以下类型： char * strtok ( char * str, const char * delimiters );

这意味着我不能将 const char* 用于第一个输入，因为它必须是 char*。你能告诉我如何将这个 const char* 转换为 char* 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-23T13:43:17.113

由于 strtok 实际上会写入您的字符串，因此您需要对其进行可写副本以进行标记；

```
char* copy = strdup(myReadonlyString);
...tokenize copy...
free(copy); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:42:42.957

将其声明为数组：

```
char tokenedStr[] = "OpenStack:OpenStack1"; 
```

如果不可能，请将其复制到 char 数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:41:47.003

您可以复制不可修改的字符串，然后使用`strtok`.

您可以便携地使用`malloc`和`strcpy`复制字符串。

# php - 如何通过 Graph API 和访问令牌从另一个用户的 facebook 用户喜欢一个公共状态

> ID：10281719
> 
> 赞同：0
> 
> 时间：2012-04-23T13:41:09.703
> 
> 标签：php, facebook-graph-api, facebook-like

我尝试`https://graph.facebook.com/POST_ID/likes/?access_token=ACCESS_TOKEN`使用`user_likes`,`friends_likes`和`publish_stream`权限`read_stream`

但是我仍然不能喜欢我通过 FB Graph API 选择的任何公共状态，

它只是返回（一个空数组）：

```
{
   "data": [

   ]
} 
```

难道我做错了什么？虽然经过大量搜索后，我看到人们使用上面显示的 URL 最好是 PHP SDK 来喜欢

目前我只是`HTTPS` `GET`请求尝试，我对 PHP SDK 有足够的了解，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:12:39.987

要创建喜欢，您应该发出`POST`请求或指定`method`参数等于`post`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T19:21:56.717

您没有添加 method=post?token_access"........

# java - 如何通过使用意图从 android 中的另一个常规活动中调用特定的选项卡活动

> ID：10281722
> 
> 赞同：0
> 
> 时间：2012-04-23T13:41:15.193
> 
> 标签：java, android, tabs, android-tabhost

我有 3 个选项卡（act1、act2、act3）并且我有没有选项卡的活动（A、B），如果用户打开活动 A 并按下按钮 OK，则警报将启动，10 秒后它将转到 act2

这一切都完成了，但我尝试了很多事情：

1-当我去 act2 它不显示选项卡。只是 act2 活动

所以我更改了代码并尝试： 2- 当我转到活动选项卡时，它向我显示第一个选项卡（act1）但我想要act2

我该怎么做我想用标签显示act2

给我任何参考或提示。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:48:31.740

试试这个：发送一个意图（通过 startActivity() 像往常一样）将活动带到包含选项卡的前面。发送一个额外的参数，其中包含您想要打开的标签或标签的某些标识符的活动。评估活动中的额外参数，其中包含选项卡，并让它切换到参数指示的选项卡。

编辑

使用参数启动选项卡活动：

```
final Intent i = new Intent(this, YourTabActivity.class);
i.putExtra(TAB_TAG, tag);  // TAB_ID see comment below, define some tags for the tabs
this.startActivity(i); 
```

从意图中提取参数：

`onNewIntent()`在选项卡活动中覆盖并引入一个字段`lastIntent`，在`this.lastIntent = this.getIntent()`那里设置。（否则，您将始终访问首先启动活动的意图，而不是最近发送的意图！）

在`onResume`处理最后一个意图：

```
final Bundle extras = this.lastIntent.getExtras();
final String tabTag = extras.getString(TAB_TAG);    // define the key TAB_TAG as static string 
```

现在用于`tabTag`设置当前选项卡。

# javascript - JS SVG getCTM 和 setCTM？

> ID：10281732
> 
> 赞同：11
> 
> 时间：2012-04-23T13:41:37.650
> 
> 标签：javascript, svg

如果我使用 getCTM() 来获取当前的转换矩阵，如果我想在以后恢复它，我该如何使用该对象来设置矩阵（我知道保存和恢复，但那些指的是画布而不是项目）

我知道我设置了属性：

```
var m = someitem.getCTM();
$(someitem).attr("transform", "matrix("+m.a+","+m.b+","+m.c+","+ m.d+","+m.e+","+m.f+")"); 
```

但这似乎还有很长的路要走。我找不到任何此类关闭功能的 setCTM 功能。

为 webkit 开发，如果这有所作为。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:21:55.040

```
function setCTM(someitem,m) {
  return someitem.transform.baseVal.initialize(
    someitem.ownerSVGElement.createSVGTransformFromMatrix(m));
} 
```

如果不是 save ，而是`someItem.getCTM()`save `someitem.transform.baseVal.getitem(0)`，您可以使用：

```
function setTransform(someitem,t) {
  return someitem.transform.baseVal.initialize(t));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T17:57:05.837

```
var transform = ownerSVGElement.createSVGTransform()

transform.setMatrix(elem.getCTM())

someelement.transform.baseVal.initialize(transform) 
```

# php - 如何知道某个资源是否存在？

> ID：10281742
> 
> 赞同：0
> 
> 时间：2012-04-23T13:42:42.393
> 
> 标签：php

例如，我想知道这些文件是否存在。

```
http://www.stackoverflow.com/favicon.ico
http://www.stackoverflow.com/reset.css 
```

然后下载它（如果明显存在）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:46:01.813

```
<?php

if( ( $file = file_get_contents( 'http://www.stackoverflow.com/favicon.ico' ) ) ) {
    echo "file exists.";
    file_put_contents( 'favicon.ico', $file );
}
else {
    echo "File does not exist.";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:54:00.797

试试这个：

```
<?php
$ch = curl_init();

$url    = 'YOUR_URL_HERE'; // the url you want to check

curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt( $ch, CURLOPT_CONNECTTIMEOUT, 20 );
curl_setopt( $ch, CURLOPT_USERAGENT, $_SERVER[ 'HTTP_USER_AGENT' ] );

// make "HEAD" request
curl_setopt( $ch, CURLOPT_HEADER, true );
curl_setopt( $ch, CURLOPT_NOBODY, true );

$res    = curl_exec( $ch );
$res    = explode( ' ', substr( $res, 0, strpos( $res, "\n" ) ) );

// if 404, file does not exist
if( $res[ 1 ] != 404 ) {
    $file = file_get_contents( $url ); 
} else {
    // This url does not exist
    $file = '';
}

curl_close( $ch );
?> 
```

希望这可以帮助。

# javascript - 如何知道何时加载了 processingjs 草图？

> ID：10281747
> 
> 赞同：3
> 
> 时间：2012-04-23T13:42:58.570
> 
> 标签：javascript, jquery, processing

我在处理中编写了自己的草图，并使用 processingjs 和 ajax 将其插入页面，如下所示：

```
$.getScript("js/libs/processingjs.js", function() {
    $('#sketch').each(function() {
        Processing.loadSketchFromSources(this, [$(this).data('processing-sources')]);

    });
}); 
```

这是画布`#sketch`所指的：

```
<canvas data-processing-sources="first-sketch.pde" id='sketch'></canvas> 
```

这可行，但是我也想使用 Javascript 与草图进行交互。当我在我的（萤火虫）控制台中输入这个时，一切都很好：

```
var sketch = Processing.getInstanceById('sketch');
sketch.addTweet(30, 30, 100); 
```

（addTweet 是草图的一个功能，一旦加载草图就可用）但是当我把它放在 javascript 中时，如下所示：

```
$.getScript("js/libs/processingjs.js", function() {
    $('#sketch').each(function() {
        Processing.loadSketchFromSources(this, [$(this).data('processing-sources')]);

        var sketch = Processing.getInstanceById('sketch');
        sketch.addTweet(30, 30, 100);

    });
}); 
```

我得到错误：

```
Uncaught TypeError: Cannot call method 'addTweet' of undefined 
```

我认为草图此时尚未加载，加载后是否有回调或运行代码的正确方法？

`script`在标签中包含 processingjs 库时，我收到相同的错误。并在 jQuery.ready 上运行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:13:05.333

这是我为我的一个项目整理的东西。它不漂亮，但它完成了工作（现在）。

```
var timer = 0,
    timeout = 3000,
    mem = setInterval(function () {
        var sketch = Processing.getInstanceById("processingCanvas");
        if (sketch) {
            console.log("SKETCH HAS LOADED");
            clearInterval(mem);
        } else {
            timer += 10;
            if (timer > timeout) {
                console.log("FAILED TO LOAD SKETCH");
                clearInterval(mem);
            }
        }
    }, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T05:45:32.257

问题是 loadSketchFromSources 不是同步的。

loadSketchFromSources 函数中添加了一个回调（github，最新）。因此，您可以将代码编写为：

```
$.getScript("js/libs/processingjs.js", function() {
    $('#sketch').each(function() {
        Processing.loadSketchFromSources(this, [$(this).data('processing-sources')], function(sketch) {
          sketch.addTweet(30, 30, 100);
        });
    });
}); 
```

您也可以使用类而不是 id。在回调中抓取草图，您不需要使用`getInstanceById`.

# mysql - MySQL：如何从两个字段中搜索？

> ID：10281750
> 
> 赞同：0
> 
> 时间：2012-04-23T13:43:07.360
> 
> 标签：mysql, search

我有一个名为 optima 的表，其中包含一些字段，我需要进行一个查询，该查询将在 field1 =`a`和 field2 =处返回结果`b`。

以表为例

```
F1 F2
_____
a  z
v  a
a  b
b  a 
```

结果必须是：

```
a  b 
```

我试图进行查询

```
SELECT * FROM `optima` WHERE `F1` LIKE 'a' AND `F2` LIKE 'b'; 
```

但它什么也没给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:44:06.883

对于完全匹配，请使用`=`运算符，例如：

```
select *
from `optima`
where `F1` = 'a' and `F2` = 'b'; 
```

# perl - 是否有可能用 Term::TermKey 捕捉光标位置？

> ID：10281757
> 
> 赞同：0
> 
> 时间：2012-04-23T13:43:17.410
> 
> 标签：perl, terminal, cursor-position, libtermkey

[是否可以使用Term::TermKey](http://search.cpan.org/perldoc?Term%3a%3aTermKey)以类似的方式获取光标位置[Term::ReadKey](http://search.cpan.org/perldoc?Term%3a%3aReadKey)可以做到这一点：

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use Term::ReadKey;

ReadMode 4;

system( 'clear' ) == 0 or die $?;
print "Hello world\n" x 4;
print "go to column 21 -> |";

print "\e[6n";
my ( $x, $y ) = getch();
say "Col: $x  -  Row: $y";

ReadMode 0;

sub getch {
    my $c = ReadKey 0;
    if ( $c eq "\e" ) {
        my $c = ReadKey 0.10;
        if ( $c eq '[' ) {
            my $c = ReadKey 0;
            if ( $c =~ /\A\d/ ) { 
                my $c1 = ReadKey 0;
                if ( $c1 ne '~' ) {
                    my $y = 0 + $c;
                    while ( 1 ) {
                        last if $c1 eq ';';
                        $y = 10 * $y + $c1;
                        $c1 = ReadKey 0;
                    }
                    my $x = 0;
                    while ( 1 ) {
                        $c1 = ReadKey 0;
                        last if $c1 eq 'R';
                        $x = 10 * $x + $c1;
                    }
                    return $x, $y;
                }
            }
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:10:37.223

还没有，但我正在制定一个计划。它可能会被报告为一种新的事件类型，如下所示：

```
use Term::TermKey;

my $tk = Term::TermKey->new;

syswrite STDOUT, "\e[6n";

while( $tk->waitkey( my $key ) ) {
  if( $key->type_is_position ) {
    printf "The cursor is at %d, %d\n", $key->line, $key->col;
  }
} 
```

首先需要底层 C 库中的一些额外支持，包括挂钩其他 CSI 序列的能力。一旦完成，将来支持更多功能应该会容易得多，例如通过 CSI 提供的许多其他状态报告。

* * *

*编辑 2012/04/26*：我现在发布了`libtermkey`0.15 和`Term::TermKey`0.14，它们具有上述 API。

# xcode - 是否可以在 Xcode 4 中自动关闭括号/括号？

> ID：10281759
> 
> 赞同：0
> 
> 时间：2012-04-23T13:43:24.150
> 
> 标签：xcode, xcode4, brackets

在 Xcode 3 中，有一个选项可以自动关闭括号和方括号。在 Xcode 4 中是否有启用此功能的选项？我找不到一个，被迫手动关闭它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:53:32.143

这在 Xcode 4.3 中可用，可以在 Xcode 首选项中找到。

![在此处输入图像描述](../Images/1de5e24744622e8ee844087a3d215422.png)

# sql - sp_MSforeachtable - 解析动态sql

> ID：10281765
> 
> 赞同：0
> 
> 时间：2012-04-23T13:43:53.537
> 
> 标签：sql, sql-server, parsing, stored-procedures, sp-msforeachtable

我最近发现了一个问题，我想使用 sp_MSforeachtable 存储过程来选择表名中带有单词 Transcode 的所有表，并在这些表上运行一些 SQL。我设法编写了一些有效的代码，但并不完美 - 对于那些我希望它能够优雅地跳过的表（即那些名称中没有转码的表），它反而会由于某些预期的列而引发错误（仅存在于转码表中）不存在于这些表中。问题似乎是在调用存储过程时解析所有 SQL，而不是仅在需要时解析 SQL（例如，当满足条件时）。

以下代码按预期工作：

```
exec sp_MSforeachtable '
print ''Table being tested: ?''
if exists (select 1 where ''?'' like ''%Transcode%'')
begin
    print ''    Do Something''
end
else
begin
    print ''    Ignored''
end
' 
```

但是，当我尝试添加功能时，我从永远不会运行的代码中得到错误；例如

```
exec sp_MSforeachtable '
print ''Table being tested: ?''
if exists (select 1 where ''?'' like ''%Transcode%'')
begin
    print ''    Do Something''

    insert ? (col1, col2, col3)
    select col1, col2, 1
    from ?
    where col3 = 0

end
else
begin
    print ''    Ignored''
end
' 
```

这一次，对于那些表名包含单词 Transcode 的输出，我得到与第一个相同的输出，但对于那些不包含 Transcode 的输出，我看到：

> 消息 207，第 16 层，状态 1，第 9 行
> 
> 无效的列名 col3

我很确定这取决于解析动态 SQL 的方式，但这是不受欢迎的行为。有没有人遇到过这个/是否有一个简单的解决方法？

这并不紧急，因为在我的情况下，由于列不存在，错误与 if 语句具有相同的效果，并且有效行能够成功运行，但我很想学习以防我需要做某事很快就会出现这种行为会导致问题的类似情况。

提前致谢，

JB

附言。复制此行为的代码如下：

```
create table DemoTranscode1 (id bigint identity(1,1) primary key clustered, col1 nvarchar(10) not null, col2 nvarchar(10)not null, col3 bit not null)
go
create table DemoTable1 (id bigint identity(1,1) primary key clustered, col1 nvarchar(10) not null, col2 nvarchar(10)not null)
go
create table DemoTranscode2 (id bigint identity(1,1) primary key clustered, col1 nvarchar(10) not null, col2 nvarchar(10)not null, col3 bit not null)
go
create table DemoTranscode3 (id bigint identity(1,1) primary key clustered, col1 nvarchar(10) not null, col2 nvarchar(10)not null, col3 bit not null)
go
insert DemoTranscode1
select 'example1', 'demo', 0
union select 'example2', 'demo', 0
union select 'example3', 'demo', 0
union select 'example4', 'demo', 0
insert DemoTable1 select col1, col2 from DemoTranscode1
insert DemoTranscode2 select col1, col2, col3 from DemoTranscode1
insert DemoTranscode3 select col1, col2, col3 from DemoTranscode1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:52:48.520

一方面，我建议远离无证和不受支持的程序，例如`sp_MSForEachTable`. 它们可以随时更改甚至从 SQL Server 中删除，并且此特定过程可能与许多针对`sp_MSForEachDb`. [（在这里](https://sqlblog.org/2020/01/31/reliable-flexible-replacement-sp_msforeachdb)和[这里](http://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/?utm_source=AaronBertrand)查看一些背景。）

这是我的做法：

```
DECLARE @sql NVARCHAR(MAX);
SELECT @sql = N'';

SELECT @sql = @sql + 'INSERT ' 
  + QUOTENAME(SCHEMA_NAME([schema_id]))
  + '.' + QUOTENAME(name) + ' (col1, col2, col3)
  SELECT col1, col2, 1 FROM '
  + QUOTENAME(SCHEMA_NAME([schema_id]))
  + '.' + QUOTENAME(name)
  + ' WHERE col3 = 0;'
FROM sys.tables 
WHERE name LIKE '%Transcode%';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

这样做的好处是在执行之前很容易验证输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:52:34.827

您可以使用该`@whereand`参数，因此您不需要签入您的代码。

```
exec sp_MSforeachtable
  @Command1 = 'print "?"',
  @whereand = ' and o.name like ''%Transcode%''' 
```

**更新：**

> 我很确定这取决于解析动态 SQL 的方式，但这是不受欢迎的行为。有没有人遇到过这个

当然。代码在执行之前进行编译，编译器会根据表检查插入语句中使用的列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:03:41.337

问题在于解析器。无论您是否在某些条件下使用 sp_msforeachtable，它仍然会解析每个表。因此，对于其他表 - 引发错误。您可以使用 exec 语句来避免它，如下所示 -

```
exec sp_MSforeachtable ' 
print ''Table being tested: ?'' 
if exists (select 1 where ''?'' like ''%Transcode%'') 
begin 
    print ''    Do Something'' 

    exec ( ''insert ? (col1, col2, col3) select col1, col2, 1 from ? where col3 = 0 '') 

end 
else 
begin 
    print ''    Ignored'' 
end 
' 
```

# html - 使用css在网页上定位对象

> ID：10281773
> 
> 赞同：2
> 
> 时间：2012-04-23T13:44:21.793
> 
> 标签：html, css

如果我创建一个 button `<Button id="Button" text="Hey" />`，我将如何将它定位在我想要的网页上，而不仅仅是在没有内容的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:45:15.177

使用[CSS 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:46:21.997

使用绝对定位。

前任：

```
position:absolute; //Place wherever we want on the page
left-margin:10px; //Move right 10px
top-margin:20px; //Move down 20px
z-index:2; //Put on top of everything with z-index of 1 or 0 
```

# php - 在 Windows Resize 上添加或删除 HTML 代码

> ID：10281774
> 
> 赞同：2
> 
> 时间：2012-04-23T13:44:28.543
> 
> 标签：php, jquery, html, ajax

我正在开发一个响应式网站。我正在使用 CSS 媒体查询和自适应图像 (http://adaptive-images.com/) 在不同的设备上正确呈现每个页面。

我的问题是即使隐藏了一些元素也会被浏览器下载！例如，具有属性 {display:none;} 的元素被下载，尽管我不想要它。

所以，这是我的问题：有没有办法根据设备的屏幕尺寸添加或删除 HTML 代码？

通过阅读“自适应图像”脚本的代码，我看到他们使用了一个存储屏幕大小值的 cookie。

```
 <script>
    document.cookie='resolution='+(window.innerWidth)+'; path=/';
    window.addEventListener("resize", function() {
        document.cookie='resolution='+(window.innerWidth)+'; path=/';
    }, false);
    </script> 
```

因此，我尝试使用 PHP 函数读取此 cookie：

```
<?php 
    $fallback_res = 481; 
    $res = !empty($_COOKIE['resolution']) ? $_COOKIE['resolution'] :  
    $fallback_resolution; // Get the viewport resolution in $res variable
?> 
```

它允许我编写一个非常有用的 PHP 条件：

```
<?php if(isset($res) AND $res >= $fallback_res) // if viewport >= 481px
{
        echo '<video>...</video>'; // Display the video 
}
else { //if the screen is smaller
    echo ''; // Echo something else 
}

?> 
```

它工作得很好。如果视口 < 481px，则不会下载视频。如果视口 > 481px，则下载视频。但它只在页面加载时有效！如果我使用 480-wide-opened-browser 加载页面（=未加载视频），然后将我的浏览器调整为更高分辨率，页面中间会有一个大洞。

我需要的是在窗口调整大小时重新加载部分代码。（每次我调整浏览器窗口的大小时，我希望 $res 条件自动更新，下面的代码也是如此）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:07:48.613

如果你将打击 jquery 代码与 ajax 结合起来，也许你可以做到这一点。

```
$(window).resize(function() {
    if($(window).width() > 480 )
    {
        #ajax code for download video
        #or use .after in jquery 
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:09:55.177

Html 看起来像

```
<div id="phone">Content For the below 450px </div>
<div id="desktop">Content For the above 450px </div> 
```

添加 jQuery

```
if($(window).width() < 450 )
    {
        $('#desktop').remove();
    }
     else 
   {
        $('#phone').remove();
   } 
```

# c++ - 如何合并斑点/轮廓

> ID：10281775
> 
> 赞同：6
> 
> 时间：2012-04-23T13:44:33.657
> 
> 标签：c++, opencv, image-processing

我`findContours`用于斑点检测。现在，我会将紧密且相似的 blob 合并在一起。

以下是一些示例图像：

![在此处输入图像描述](../Images/adc2c740da8f33e1a14f8720af215ba7.png) ![在此处输入图像描述](../Images/2acb38bf4aed47393405d555be4aa431.png) ![在此处输入图像描述](../Images/8679356963053b67a855b3ab53a73331.png)

普通的Opencv有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:09:27.903

The input images you gave us are pretty easy to work with:

![enter image description here](../Images/7bf16ba0ed2dd55520ac57f83692c0c7.png) ![enter image description here](../Images/4a2f8cf8c373e34152baf38bf024852d.png) ![enter image description here](../Images/de84580867bee5a8565cb386e72c04e8.png)

The first step is **isolate the yellow blobs from everything else** and a simple color segmentation technique can accomplish this task. You can take a look at [Segmentation & Object Detection by color](http://blog.damiles.com/2010/01/segmentation-object-detection-by-color/) or [Tracking colored objects in OpenCV](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/) to have an idea on how to do it.

![enter image description here](../Images/c8154fb54dc1e03bca7c251daf4df103.png) ![enter image description here](../Images/24a5602347b5e08acd26614d38c88947.png) ![enter image description here](../Images/1d1e50dde617b293ec5fd3904d1b43b8.png)

Then, it's time to merge the blobs. One technique in particular that can be useful is the [bounding box](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/), to **put all the blobs inside a rectangle**. Notice in the images below, that there is a green rectangle surrounding the blobs:

![enter image description here](../Images/cdfeceda83bafbab48453afc191ae80e.png) ![enter image description here](../Images/3ee1fb6e39ab132313bda632886e8241.png) ![enter image description here](../Images/475dacd5c8a66ae295acf0e885aff2d2.png)

After that, all you need to do is **fill the rectangle with the color of your choice**, thus connecting all the blobs. I'm leaving this last as homework for you.

This is the quickest and most simple approach I could think of. The following code demonstrates how to achieve what I just described:

```
#include <cv.h>
#include <highgui.h>

#include <iostream>
#include <vector>

int main(int argc, char* argv[])
{
    cv::Mat img = cv::imread(argv[1]);
    if (!img.data)
    {
        std::cout "!!! Failed to open file: " << argv[1] << std::endl;
        return 0;
    }

    // Convert RGB Mat into HSV color space
    cv::Mat hsv;
    cv::cvtColor(img, hsv, CV_BGR2HSV);

    // Split HSV Mat into HSV components
    std::vector<cv::Mat> v;
    cv::split(hsv,v);

    // Erase pixels with low saturation
    int min_sat = 70;
    cv::threshold(v[1], v[1], min_sat, 255, cv::THRESH_BINARY);

    /* Work with the saturated image from now on */

// Erode could provide some enhancement, but I'm not sure.
//  cv::Mat element = cv::getStructuringElement(cv::MORPH_RECT, cv::Size(3, 3));
//  cv::erode(v[1], v[1], element);

    // Store the set of points in the image before assembling the bounding box
    std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = v[1].begin<uchar>();
    cv::Mat_<uchar>::iterator end = v[1].end<uchar>();
    for (; it != end; ++it)
    {
        if (*it) points.push_back(it.pos());
    }

    // Compute minimal bounding box
    cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

    // Display bounding box on the original image
    cv::Point2f vertices[4];
    box.points(vertices);
    for (int i = 0; i < 4; ++i)
    {
            cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(0, 255, 0), 1, CV_AA);
    }

    cv::imshow("box", img);
    //cv::imwrite(argv[2], img);

    cvWaitKey(0);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:22:13.593

我想我做到了，感谢您的程序详细信息，我找到了这个解决方案：（欢迎评论）

```
vector<vector<Point> > contours;
    vector<vector<Point> > tmp_contours;
    findContours(detectedImg, tmp_contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

    vector<vector<Point> >::iterator it1;
    it1 = tmp_contours.begin();

    Mat test;
    test = Mat(FImage.size(), CV_32FC3);

    while (it1 != tmp_contours.end()) {
        vector<Point> approx1;
        approxPolyDP(Mat(*it1), approx1, 3, true);
        Rect box1 = boundingRect(approx1);
        float area1 = contourArea(approx1);

        if ((area1 > 50) && (area1 < 13000) && (box1.width < 100) && (box1.height < 120)) {

            vector<vector<Point> >::iterator it2;
            it2 = tmp_contours.begin();

            while (it2 != tmp_contours.end()) {
                vector<Point> approx2;
                approxPolyDP(Mat(*it2), approx2, 3, true);

                Moments m1 = moments(Mat(approx1), false);
                Moments m2 = moments(Mat(approx2), false);
                float x1 = m1.m10 / m1.m00;
                float y1 = m1.m01 / m1.m00;
                float x2 = m2.m10 / m2.m00;
                float y2 = m2.m01 / m2.m00;

                vector<Point> dist;
                dist.push_back(Point(x1, y1));
                dist.push_back(Point(x2, y2));
                float d = arcLength(dist, false);

                Rect box2 = boundingRect(approx2);
                if (box1 != box2) {

                    if (d < 25) {
                        //Method to merge the vectors
                        approx1 = mergePoints(approx1, approx2);
                    }

                }
                ++it2;

            }
            Rect b = boundingRect(approx1);
            rectangle(test, b, CV_RGB(125, 255, 0), 2);
            contours.push_back(approx1);
        }
        ++it1;
    } 
```

# java - 如果在对 JTable 列数据进行排序后出现插入，则在 DefaultTableModel 中插入行会出错

> ID：10281776
> 
> 赞同：0
> 
> 时间：2012-04-23T13:44:33.733
> 
> 标签：java, swing, jtable, rowfilter, tablerowsorter

在我的应用程序中，我已将 TableRowSorter 应用于我的 JTable 行排序工作正常，给出了行排序器的代码。

```
TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(tableModel);
tableMain.setRowSorter(sorter); 
```

我的应用程序中有 JTree 和 JTable，JTree 包含文件夹，而 Jtable 显示来自 JTree 节点的选定文件夹的数据（文件和子文件夹信息）。当我单击 JTree 中的节点时，它将正确填充 JTable 填充 JTable 的代码如下所示

```
public void populateTable(Vector<FileData> vList)
{
    treePath = treeMainView.getSelectionPath();

    FileData metaData;
    ImageIcon icon = new ImageIcon("images/folder.png");

    dtModel.getDataVector().removeAllElements();

    for (int i = 0; i < vList.size(); i++)
    {
        Vector v = new Vector();
        metaData = (FileData) vList.get(i);
        if (metaData.isIsdirectory()) {
            v.add(icon);
        } else {
            v.add(UtilClass.getIcon(metaData.getClientpath()));
        }
        v.add(metaData.getName());
        v.add(metaData.getClientpath());
        if (metaData.isIsdirectory())
        {
            v.add("");
        }
        else
        {
            v.add((FileHelper.getSizeString(metaData.getSize())));
        }
        if (metaData.isIsdirectory()) {
            v.add("");
        }
        else
        {
            v.add(new Date(metaData.getTime()));
        }
        if (metaData.isIsdirectory()) {
            v.add("Folder");
        } 
        else
        {
            v.add(UtilClass.getIcon(metaData.getClientpath()));
        }

        tableModel.insertRow(i, v);

    }
    tableMain.repaint();
} 
```

当我对 JTable 中的任何列进行排序并返回 JTree 并单击其他节点以查看其详细信息时，就会出现此问题，然后将发生异常并且 JTree 隐藏异常如下所示

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 4 >= 1
at java.util.Vector.elementAt(Vector.java:427)
at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:632)
at javax.swing.table.TableRowSorter$TableRowSorterModelWrapper.getValueAt(TableRowSorter.java:252)
at javax.swing.table.TableRowSorter$TableRowSorterModelWrapper.getStringValueAt(TableRowSorter.java:268)
at javax.swing.DefaultRowSorter.compare(DefaultRowSorter.java:935)
at javax.swing.DefaultRowSorter.access$100(DefaultRowSorter.java:95)
at javax.swing.DefaultRowSorter$Row.compareTo(DefaultRowSorter.java:1359)
at javax.swing.DefaultRowSorter$Row.compareTo(DefaultRowSorter.java:1349)
at java.util.Arrays.binarySearch0(Arrays.java:2001)
at java.util.Arrays.binarySearch(Arrays.java:1943)
at javax.swing.DefaultRowSorter.insertInOrder(DefaultRowSorter.java:983)
at javax.swing.DefaultRowSorter.rowsInserted0(DefaultRowSorter.java:1041)
at javax.swing.DefaultRowSorter.rowsInserted(DefaultRowSorter.java:851)
at javax.swing.JTable.notifySorter(JTable.java:4267)
at javax.swing.JTable.sortedTableChanged(JTable.java:4115)
at javax.swing.JTable.tableChanged(JTable.java:4392)
at javax.swing.table.AbstractTableModel.fireTableChanged(AbstractTableModel.java:280)
at javax.swing.table.AbstractTableModel.fireTableRowsInserted(AbstractTableModel.java:215)
at javax.swing.table.DefaultTableModel.insertRow(DefaultTableModel.java:359)
at org.mycom.gui.MyClass.populateTable(MyClass.java:5866)
at org.mycom.gui.MyClass$Selection.valueChanged(MyClass.java:5753)
at javax.swing.JTree.fireValueChanged(JTree.java:2820)
at javax.swing.JTree$TreeSelectionRedirector.valueChanged(JTree.java:3191)
at javax.swing.tree.DefaultTreeSelectionModel.fireValueChanged(DefaultTreeSelectionModel.java:629)
at javax.swing.tree.DefaultTreeSelectionModel.notifyPathChange(DefaultTreeSelectionModel.java:1078)
at javax.swing.tree.DefaultTreeSelectionModel.setSelectionPaths(DefaultTreeSelectionModel.java:287)
at javax.swing.tree.DefaultTreeSelectionModel.setSelectionPath(DefaultTreeSelectionModel.java:170)
at javax.swing.JTree.setSelectionPath(JTree.java:1598)
at javax.swing.plaf.basic.BasicTreeUI.selectPathForEvent(BasicTreeUI.java:2316)
at javax.swing.plaf.basic.BasicTreeUI$Handler.handleSelection(BasicTreeUI.java:3525)
at javax.swing.plaf.basic.BasicTreeUI$Handler.mousePressed(BasicTreeUI.java:3464)
at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:262)
at java.awt.Component.processMouseEvent(Component.java:6213)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
at java.awt.Component.processEvent(Component.java:5981)
at java.awt.Container.processEvent(Container.java:2041)
at java.awt.Component.dispatchEventImpl(Component.java:4583)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4413)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4556)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4217)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4150)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2475)
at java.awt.Component.dispatchEvent(Component.java:4413)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T01:48:03.280

正如[*如何使用表格：排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)中所讨论的，`JTable`视图坐标*与*`TableModel`模型坐标不同。`JTable`提供在两者之间转换的方法，在这种情况下可能需要。一个症状是表格无法通过拖动正确处理重新排序的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:44:46.237

尝试：

```
 table.convertColumnIndexToModel(viewColumnIndex)
    table.convertRowIndexToModel(viewRowIndex) 
```

检索您想要的实际行或列。

# c# - 确定 MailItem 是在撰写模式还是阅读模式下打开

> ID：10281780
> 
> 赞同：7
> 
> 时间：2012-04-23T13:44:43.140
> 
> 标签：c#, outlook, outlook-2007

有什么方法可以确定 a`MailItem`是在 a `ReadMail view`（不确定这里的术语）还是在 a中打开的`Compose view`。也就是说，我是打开一封已发送给我的邮件，还是打开一封要发送给某人的邮件。

我检查了[MailItem](http://msdn.microsoft.com/en-us/library/bb208402%28office.12%29.aspx)和[Inspector](http://msdn.microsoft.com/en-us/library/bb208374%28office.12%29.aspx)对象，但找不到任何相关的东西。不幸的是我不知道如何访问特定的属性（我在`GetProperty()`某处看到过一些方法）所以我不知道我是否可以通过它访问它..

我希望有一些我可以做的事情：

```
// where OutlookApp is my Outlok Application
Outlook.Inspector inspector = OutlookApp.ActiveInspector();
Outlook.MailItem item = inspector.CurrentItem as Outlook.MailItem;
if (item.IsOpenInComposeView)
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:20:05.947

[`_MailItem.Sent`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.sent.aspx)当消息处于**阅读模式时为真，当消息处于****撰写**模式时为假。

# php - 正则表达式在 PHP 中无法正常工作

> ID：10281782
> 
> 赞同：1
> 
> 时间：2012-04-23T13:44:58.397
> 
> 标签：php, validation, codeigniter

> **可能重复：**
> [php - 正则表达式 - PCRE 不支持 \L、\l、\N、\P、](https://stackoverflow.com/questions/3538293/php-regular-expression-pcre-does-not-support-l-l-n-p)

我有一个功能

```
public function valid_city_state($data)
{
    $data = trim($data);

    if(!$data)
    {
        return TRUE;            
    }

    $valid = preg_match("/^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$/",trim($data));

    if(!$valid)
    {
        $this->form_validation->set_message('valid_city_state', 'Please enter a valid %s.');
        return FALSE;           
    }
    else
    {
        return TRUE;
    }       
} 
```

它有正则表达式

```
$valid = preg_match("/^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$/",trim($data)); 
```

执行时出现以下错误

```
A PHP Error was encountered

Severity: Warning

Message: preg_match() [function.preg-match]: Compilation failed: PCRE does not support \L, \l, \N{name}, \U, or \u at offset 9

Filename: home/auth.php

Line Number: 1632 
```

看了一些例子，但无法得到需要的东西

[php - 正则表达式 - PCRE 不支持 \L, \l, \N, \P,](https://stackoverflow.com/questions/3538293/php-regular-expression-pcre-does-not-support-l-l-n-p)

[http://www.sitepoint.com/forums/showthread.php?748713-Preg-match-with-php-PCRE-error](http://www.sitepoint.com/forums/showthread.php?748713-Preg-match-with-php-PCRE-error)

请帮忙 。提前致谢 。

**更新**

这个正则表达式在 javascript 中工作正常

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T13:54:59.477

```
$valid = preg_match("/^[a-zA-Z\x{0080}-\x{024F}\s\/\-\)\(\`\.\"\']+$/u",trim($data)); 
```

将 s切换`u`为`x`s 并将十六进制包裹在大括号中，例如`{0080}`，还添加一个尾随`u`标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:53:03.840

也许`/^[a-zA-Z\x{0080}-\x{024F}\s\/\-\)\(\`.\"\']+$/` 因为 PCRE 不支持 \u。这是一个替代的合成器与 \p{XXXX} 左右

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:07:10.930

使用双引号时，请注意[转义序列](http://php.net/manual/en/language.types.string.php)。在你的代码中。

```
$valid = preg_match("/^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$/",trim($data)); 
```

当它同时具有 PHP 的转义序列和 PCRE 模式的转义序列时，它会更加混乱。让我们来看看，

最后一个 $ 无效。你必须使用'\$'。（当逃逸时，它将是 $）。

如果要包含“点”，则必须使用`\\\.`（粘贴为字符串后，它将`\.`用于 PCRE，PCRE 将再次转义为“点”字符。否则，如果仅`.`在 PCRE 中将表示任何字符。

preg_match 函数会让你感到困惑，最好使用 qoute 而不是 double-qoute。因此，在模式中，您只需担心[quote 的转义序列](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)。

# android - 标签的自定义 Holo 主题

> ID：10281784
> 
> 赞同：4
> 
> 时间：2012-04-23T13:44:59.213
> 
> 标签：android, android-layout, android-tabhost, android-2.3-gingerbread

我正在尝试创建一个选项卡，如下所示，它是一个 Holo Light 主题，但由于我使用的是 android 2.3.6，所以我必须自己创建它。

![在此处输入图像描述](../Images/530ba082af0863df9ab69a6bfc438d37.png)

我面临的问题是我的机器人能够像这里一样创建蓝色底部是到目前为止在可绘制对象中的代码，**有人可以告诉我如何创建相同的底部边框吗？**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="63dp">
        <shape android:shape="rectangle">
            <solid android:color="#898989" />
        </shape>
    </item>
    <item android:top="63dp" android:bottom="3px">
        <shape android:shape="rectangle">

            <solid android:color="@color/app_background" />
        </shape>
    </item>
    <item android:left="@dimen/tab_space" android:right="@dimen/tab_space"> 
        <shape android:shape="rectangle">           

            <gradient android:angle="90" android:startColor="#d9d9d9"
                android:endColor="#dfdfdf"/>        

            <!-- this is create a border but on every side -->
            <stroke android:width="3px" android:color="#38c0f4" />

        </shape>
    </item>

</layer-list> 
```

所以我不知道是创造

```
1) bottom stroke 
2) shadow under each tab 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:22:41.073

您可以将 9 个补丁图像设置为背景图像。这个图像可能包含一个中风。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:27:54.853

这是一篇很好的帖子，涵盖了我相信您所问的内容：[http](http://android-developers.blogspot.se/2011/04/customizing-action-bar.html) ://android-developers.blogspot.se/2011/04/customizing-action-bar.html 。

对不起，简短的回答。但是我很想发帖告诉大家，**Actionbarsherlock 仅适用于操作栏，它不会为您提供选项卡等的全息主题**。因此，那些可以的人，请对该答案投反对票..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T14:04:16.593

即使这不完全是您问题的主题，我建议您将项目迁移到[ActionBarSherlock](http://www.actionbarsherlock.com/)。ActionBarSherlock 允许您使用所有具有早期 API 级别的 ICS Actionbar API，并将 ICS Actionbar 样式带入至少具有 Android 2.2 的所有设备。

使用这个项目将使您的应用程序与 Ice Cream Sandwich 兼容变得非常容易，并解决您当前的设计问题。

# java - 使用 @XMLJavaTypeAdapters 进行 JAXB 解组

> ID：10281785
> 
> 赞同：4
> 
> 时间：2012-04-23T13:45:04.940
> 
> 标签：java, jaxb

我有三节课

```
@XmlRootElement
public class GeofenceParameter{

    private GeofenceCenterAddress geofenceCenterAddress;

    private GeofenceCenterCoordinates geofenceCenterCoordinates;
}

public class  GeofenceCenterAddress extends GeofenceParameter{

}

public class  GeofenceCenterCoordinate extends GeofenceParameter{

} 
```

我已经制作了两个不同的 XmlAdapter 扩展类来编组和解组 GeofenceCenterAddress 和 GeofenceCentereCoordinate 中的地理围栏参数

```
Class forGeofenceCenterCoordinate extends XmlAdapter<ValueType,BoundType>{
}

Class forGeofenceCenterAddress extends XmlAdapter<ValueType,BoundType>{
} 
```

根据 Soap 请求发送，从 GeofenceParamter 获取与 GeofenceCenterAddress 或 GeofenceCenterCoordinate 类相关的实例。

为此，我在 package-info.java 文件中使用了注释`@XmlJavaTypeAdapters{(@XmlJavaTypeAdapter(type=forGeofenceCenterCoordinate)),@XmlJavaTypeAdapter(type=forGeofenceCenterAddress)}`

但是在 Web 服务中，它会给我一个类的实例，我在注释中指定了这个类的实例，即`@XmlJavaTypeAdapter(type=forGeofenceCenterCoordinate) class not of @XmlJavaTypeAdapter(type=forGeofenceCenterAddress)`来自 GeofenceParamter。

您能否帮助我在 JAXB 继承编组和解组中获取第二类的实例。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:59:06.620

我不记得曾经使用过`@XmlJavaTypeAdapters`，但`@XmlJavaTypeAdapter`注释的正常用法只是`@XmlJavaTypeAdapter(forGeofenceCenterCoordinate.class)`.

仅当在包级别应用注释时才需要类型参数。

# c# - WF 中的属性方法

> ID：10281786
> 
> 赞同：0
> 
> 时间：2012-04-23T13:45:12.807
> 
> 标签：c#, workflow-foundation-4

我正在尝试重新托管工作流程。我有一个带有一些数据提供者的数据库。所有这些都有提供者名称和描述。因此，在我的项目中，我创建了一个类作为提供者，并为此属性设置了 get 和 set 方法。如果有可能当我输入文本框时：

```
PROVIDER. 
```

自动显示名称或描述作为典型示例：

```
string i; 
```

当你这样做时：

```
 i. 
```

出现一个带有 Clone、CompareTo、Contains.... 方法的菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:40:16.960

您要的是 IntelliSense。

快速回答：是的，可以做你想做的事。

话虽如此，重新托管的工作流设计器本身并不支持 IntelliSense。您必须自己实现[IExpressionEditorService](http://msdn.microsoft.com/en-us/library/system.activities.presentation.view.iexpressioneditorservice.aspx)。要使其正常工作，这是一项非常复杂且全面的任务。

您可以从阅读这些帖子[here](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/87064412-406a-4646-a61a-1f316280bda8)和[here开始](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/87064412-406a-4646-a61a-1f316280bda8)。

# php - php没有在临时目录中上传超过7 MB的文件

> ID：10281791
> 
> 赞同：0
> 
> 时间：2012-04-23T13:45:28.730
> 
> 标签：php, windows, iis-7.5

我有一个 php 脚本，它应该将高达 1GB 的文件上传到服务器。我正在运行一个安装了 iis 7.5 的基于 Windows 的服务器。

我已将最大上传大小更改为 2 GB，帖子大小大于最大上传大小，并且所有必需的内容都已更改。

当我在本地运行脚本时，它是工作文件，

当我将脚本上传到服务器并在服务器上运行它（因为我与该服务器有远程连接）它工作正常但是当我尝试从我的浏览器运行相同的脚本时它在 100% 后失败。

临时文件的大小在 7889 KB 之后没有增加的另一件事

## 我收到了这个错误。

内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员，告知错误发生的时间以及您可能所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:51:28.447

检查[`memory-limit`](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)，它曾经在旧版本的 PHP（5.2 之前）中默认为 8MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:48:59.177

你检查过 php 的最大执行时间吗？

# sql - 此语句更短/按顺序排列

> ID：10281794
> 
> 赞同：3
> 
> 时间：2012-04-23T13:45:35.120
> 
> 标签：sql

我可以把这个陈述写得更短吗？

```
Select S_name 
from 
  Supplier
  JOIN Nation ON Supplier.S_nationkey = Nation.N_nationkey 
  JOIN Region on Nation.n_regionkey = region.R_regionkey 
Where
  Region.r_name = 'AFRICA' 
Union
Select C_name
from 
  Customer 
  JOIN Nation ON Customer.C_Nationkey = Nation.N_nationkey 
  JOIN Region on Nation.N_regionkey = Region.R_regionkey 
Where
  Region.R_name = 'AFRICA' 
```

我想按名称订购我的输出，但我不知道为什么，因为我确实有 C_name 和 S_Name 作为输出？！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:51:14.397

如果您想要同一列中的所有数据，那么您可以在其`SELECT`周围放置 a ，然后执行`ORDER BY`.

```
 Select S_name As Names
    from Supplier 
    JOIN Nation 
        ON Supplier.S_nationkey = Nation.N_nationkey 
    JOIN Region 
        on Nation.n_regionkey = region.R_regionkey 
    Where Region.r_name = 'AFRICA' 
    Union
    Select C_name As Names
    from Customer 
    JOIN Nation 
        ON Customer.C_Nationkey = Nation.N_nationkey 
    JOIN Region 
        on Nation.N_regionkey = Region.R_regionkey 
    Where Region.R_name = 'AFRICA'
    ORDER BY Names 
```

如果您不需要同一列中的数据，那么您可以这样做：

```
Select S_name, c.C_name
from Supplier 
JOIN Nation 
    ON Supplier.S_nationkey = Nation.N_nationkey 
JOIN Region 
    on Nation.n_regionkey = region.R_regionkey 
JOIN Customer c
    on Nation.N_nationkey = c.C_Nationkey
Where Region.r_name = 'AFRICA' 
ORDER BY S_name, c.c_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:50:16.420

至于 order by 子句，试试

```
ORDER BY 1 
```

在您的查询结束时

# jquery - jQuery拖放自动对齐

> ID：10281798
> 
> 赞同：2
> 
> 时间：2012-04-23T13:45:59.240
> 
> 标签：jquery, html, drag-and-drop

我的 HTML 页面中有十个`<div>`显示为框。我曾经`$(".first").draggable();`使它们成为可拖动的。现在的情况是，当拖放一个`<div>`元素时，其他 div 元素应该自动对齐。即没有`<div>`元素应该重叠。能不能指导我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:31:51.493

jQuery UI sortable 提供了我们需要的确切内容。

```
 <meta charset="utf-8">  
    <style>
    #sortable { list-style-type: none; margin: 0; padding: 0; }
    #sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 100px; height: 90px; font-size: 4em; text-align: center; }
    </style>
    <script>
    $(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    });
    </script>
<div class="demo">
<ul id="sortable">
    <li class="ui-state-default">1</li>
    <li class="ui-state-default">2</li>
    <li class="ui-state-default">3</li>
    <li class="ui-state-default">4</li>
    <li class="ui-state-default">5</li>
    <li class="ui-state-default">6</li>
    <li class="ui-state-default">7</li>
    <li class="ui-state-default">8</li>
    <li class="ui-state-default">9</li>
    <li class="ui-state-default">10</li>
    <li class="ui-state-default">11</li>
    <li class="ui-state-default">12</li>
</ul>
</div><!-- End demo -->
<div class="demo-description">
<p>
    To arrange sortable items as a grid, give them identical dimensions and
    float them using CSS.
</p>
</div><!-- End demo-description --> 
```

它取自[jQuery UI Sortable](http://jqueryui.com/demos/sortable/#display-grid)演示。

# matlab - 寻找一种方法来播放时间序列的颤抖图

> ID：10281803
> 
> 赞同：1
> 
> 时间：2012-04-23T13:46:25.333
> 
> 标签：matlab, image-processing, plot

我有一些来自视频序列的帧，用于估计其间的光流场：

```
[u, v] = compute_optical_flow(series); 
```

我可以使用以下方式播放视频序列`implay`：

```
implay(series); 
```

我可以使用以下方法在单个图像上绘制单个流`quiver`：

```
imshow(series(123,:,:));
hold on;
quiver(u(123,:,:), v(123,:,:)); 
```

但是，我还希望能够播放存储在 u 和 v 中的整个时间序列的速度矢量（如果可能的话，在相应的图像帧之上）。所以我要寻找的`implay`只是速度场而不是图像。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:03:13.140

The simple hack is to use the `pause` MATLAB function. You code should look something like this:

```
framesPerSecond = 30;

for n = 1:N %# Here N is the number of frames you have
    imshow(series(n,:,:));
    hold on;
    quiver(u(n,:,:), v(n,:,:));
    hold off;
    pause(1/framesPerSecond);
end 
```

# javascript - 访问子页面时使父菜单项加粗

> ID：10281805
> 
> 赞同：1
> 
> 时间：2012-04-23T13:46:28.710
> 
> 标签：javascript, jquery

我有以下代码，它为菜单项提供了一个“当前”类。然后我用`font-weight:Bold;`

```
$(document).ready(function () {
    var loc = window.location.href;
    $("ul a").each(function() {
        if (loc.indexOf($(this).attr("href")) != -1) {
            $(this).addClass("current");
        }
    });
}); 
```

如果用户位于子菜单中的页面上，`ul li a`我如何`Bold`在根级别添加一个调用父 UL/LI 的类？

这是结构，如果我在 Q&Z 集团，那么关于我们需要大胆。- [http://jsfiddle.net/zZQy3/](http://jsfiddle.net/zZQy3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:50:46.213

您正在寻找[父母](http://api.jquery.com/parent/)：

```
$(this).parent("li").parent("li").addClass("bold"); 
```

请注意上面有两个父母 - 这是因为您的 a 元素在 li 内，这不是您想要的粗体。您希望 li 的父级加粗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:49:14.950

如果您将当前节点作为 jquery 变量，则可以使用`parent`. 所以，你可以使用`$(this).parent().addClass(...);`

如果你愿意，而不是使用 javascript 来实现这个逻辑，你可以使用[选择器](http://api.jquery.com/category/selectors/)：

```
$('ul li:has(a[href=' + window.location.href + '])').addclass(...); 
```

这是通过[Has](http://api.jquery.com/has-selector/)和[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器查找具有与当前 url 匹配的 href 的后代的任何 LI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:50:01.473

```
var loc = window.location.href;
$("ul a").each(function() {
    if (loc.indexOf($(this).attr("href")) != -1) {
        $(this).addClass("current");
        $(this).parent('li').parent('ul').addClass("Bold");
    }
}); 
```

# php - 未加载附加列的 Kohana 数据透视表

> ID：10281808
> 
> 赞同：3
> 
> 时间：2012-04-23T13:46:45.490
> 
> 标签：php, mysql, orm, kohana

我正在使用带有数据库和 ORM 的 Kohana v3。我发现了一个很好的问题，它可以帮助我在数据透视表中添加和读取额外的列： [Kohana 3.0.x ORM: Read additional columns in pivot tables](https://stackoverflow.com/questions/1946357/kohana-3-0-x-orm-read-additional-columns-in-pivot-tables)

我有 2 个带有附加列的数据透视表。其中一个工作完美，但我被第二个困在未知中。

有 2 个表、应用程序和合作伙伴，以及我的带有下一个 ORM 模型的数据透视表：

```
class Model_Application extends ORM
{

    protected $_has_many = array(
        'partners'=>array(
            'model'=>'partner',
            'through'=>'partners_applications',
            )
        );
}

//AND

class Model_Partner extends ORM
{

protected $_has_many = array(
    'applications' => array(
        'model'=>'application',
        'through'=>'partners_applications',
        )
    );

}

//plus my pivot table ORM model

class Model_Partners_applications extends ORM
{

    protected $_belongs_to = array(
            'partner' => array(),
            'application' => array()
        );
} 
```

当我试图得到

```
$instance = ORM::factory('partners_applications',array('partner_id' => $this->partner,'application_id' =>   $this->application))->find(); 
```

小花一直说：

```
ErrorException [ Fatal Error ]: Class 'Model_Partners_applications' not found 
```

我已经三重检查了模型名称结构，但找不到错误。在 Kohana 环境调试部分，我的两个第一个模型已加载，但未加载数据透视表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:07:23.577

Model_Partners_applications 应该在 application/classes/model/partners/applications.php 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:52:57.933

应该是`ORM::factory('partners_application')`，在 Kohana ORM 中总是期望单数形式；）

# c++ - 在实例方法中使用 find_if

> ID：10281809
> 
> 赞同：3
> 
> 时间：2012-04-23T13:46:49.660
> 
> 标签：c++, visual-studio, visual-studio-2010, visual-c++

我有一个填充字符串向量的实例方法。我试图找到一个包含特定子字符串的向量条目（目前，该子字符串是固定的 - 简单）。

我有一个`.h`：

```
namespace Data
{
namespace Shared
{

    class Logger
    {
      public:
        bool FindLogDirectoryPredicate(const string &str);
        int GetLogDirectory(string logConfigFile, string& logDirectory);
...
    }
}
} 
```

和`.cpp`：

```
#include <algorithm>
#include <vector>
#include "Logger.h"

bool Logger::FindLogDirectoryPredicate(const string &str) 
{
    // Return false if string found.
    return str.find("File=") > 0 ? false : true;
}

int Logger::GetLogDirectory(string logConfigFile, string& logDirectory)
{
    vector<string> fileContents;
    ...
    vector<string>::iterator result = find_if(fileContents.begin(), fileContents.end(), FindLogDirectoryPredicate);
    ...
} 
```

在 Visual Studio 2010 中编译它，我收到：

```
Error   7   error C3867: 'Data::Shared::Logger::FindLogDirectoryPredicate': function call missing argument list; use '&Data::Shared::Logger::FindLogDirectoryPredicate' to create a pointer to member   Logger.cpp  317 1   Portability 
```

在 find_if 调用中的函数 ref 前面加上 & 会导致：

```
Error   7   error C2276: '&' : illegal operation on bound member function expression    Logger.cpp  317 1   Portability 
```

我确实尝试将谓词函数放在类之外，但这似乎不起作用 - 给了我一个未找到函数的错误。尝试用类名限定谓词......这给了我一个不同的算法错误（标题）：

```
Error   1   error C2064: term does not evaluate to a function taking 1 arguments    c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\algorithm    83  1   Portability 
```

我从[这里开始](http://www.cplusplus.com/reference/algorithm/find_if/)的示例似乎表明这相对简单....那我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:53:26.390

问题在于它`FindLogDirectoryPredicate`是一个*实例*方法：仅指定它的名称是不够的，您必须以某种方式指定应该调用该方法*的对象。*现在这个问题的答案对我们来说是显而易见的（`this`），但对编译器却不是。

执行此操作的经典方法是

```
find_if(fileContents.begin(), 
        fileContents.end(), 
        bind1st(mem_fun(&Logger::FindLogDirectoryPredicate), this)); 
```

这里发生了什么？

[`mem_fun`](http://www.cplusplus.com/reference/std/functional/mem_fun/)“将成员函数转换为函数对象”。也就是说，它创建了一个类型的实例（具体是什么类型未指定，但我们不关心），它暴露`operator()`（这是我们关心的！）。该运算符期望第一个参数是指向定义成员函数的类型的实例的指针；在这里，这将是`Logger`.

[`bind1st`](http://www.cplusplus.com/reference/std/functional/bind1st/)然后接受这个带有两个参数的函数对象（第一个是指向实例的指针，第二个是原始`const string &`参数）并返回一个只接受一个参数的不同函数对象（the `const string &`）。另一个参数固定为`bind1st`的第二个参数 ( `this`) 的值。

或者，如果您可以制作，`FindLogDirectoryPredicate` `static`则不再需要指定要在哪个实例上调用它，因此问题将自动消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:50:32.393

做谓词`static`

```
class Logger
{
  public:
    static bool FindLogDirectoryPredicate(const string &str);
} 
```

或者，也许，使用 lambda。

```
result = std::find_if(begin(), end(), [&this] (const std::string& s) 
     { return FindLogDirectoryPredicate(s); } ); 
```

`<functional>`如果必须使用 C++98/C++03 ，还可以使用 std::mem_fun （和相关的东西）

```
result = std::find_if(begin(), end(), 
     std::bind1st(std::mem_fun(&Logger::FindLogDirectoryPredicate), this) ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T13:54:23.173

使您的谓词成为静态类成员。

```
static bool FindLogDirectoryPredicate(const string &str); 
```

# memory-management - 安卓平板浏览器内存分析仪

> ID：10281810
> 
> 赞同：1
> 
> 时间：2012-04-23T13:46:51.690
> 
> 标签：memory-management, android-widget, profiler, android

我的 .Net 网站应用程序在 IE(6-8) 上运行良好。但它会占用安卓平板浏览器的内存，响应速度慢，经常崩溃。它可能是 CSS/JavaScript/不必要的事件处理程序或任何问题。是否有任何小部件/分析器可用于分析内存消耗？任何帮助都会很棒。谢谢。

# sharepoint - SharePoint 中上传的图片文件无法显示

> ID：10281820
> 
> 赞同：0
> 
> 时间：2012-04-23T13:47:16.410
> 
> 标签：sharepoint, file-upload, web-parts

我正在为 SharePoint Foundation Server 2010 开发一个相当简单的可视化 WebPart。它应该将图像文件上传到 SharePoint 服务器并在之后显示它。虽然我可以成功地将文件上传到以前创建的文档库，但无法显示文件（IE 显示红色叉号）。当我使用 SharePoint 前端上传文件的精确副本时，它可以打开。我希望有人能告诉我我错过了什么。

您可以在下面找到成功将文件上传到服务器的代码：

```
SPContext.Current.Web.AllowUnsafeUpdates = true;
        string path = "";
        string[] fileName = filePath.PostedFile.FileName.Split('\\');
        int length = fileName.Length;
        // get the name of file from path
        string file = fileName[length - 1];
        SPWeb web = SPContext.Current.Web;
        SPFolderCollection folders = web.Folders;
        SPFolder folder;
        SPListCollection lists = web.Lists;
        SPDocumentLibrary library;
        SPList list = null;
        Guid guid = Guid.Empty;

        if (lists.Cast<SPList>().Any(l => string.Equals(l.Title, "SPUserAccountDetails-UserImages")))
        {
            list = lists["SPUserAccountDetails-UserImages"];
        }
        else
        {
            guid = lists.Add("SPUserAccountDetails-UserImages", "Enthält Mitarbeiter-Fotos", SPListTemplateType.DocumentLibrary);
            list = web.Lists[guid];
        }

        library = (SPDocumentLibrary)list;

        folder = library.RootFolder.SubFolders.Add("SPUserAccountDetails");

        SPFileCollection files = folder.Files;
        Stream fStream = filePath.PostedFile.InputStream;
        byte[] MyData = new byte[fStream.Length];
        Stream stream = new MemoryStream();
        stream.Read(MyData, 0, (int)fStream.Length);
        fStream.Close();
        bool bolFileAdd = true;
        for (int i = 0; i < files.Count; i++)
        {
            SPFile tempFile = files[i];
            if (tempFile.Name == file)
            {
                folder.Files.Delete(file);
                bolFileAdd = true;
                break;
            }
        }
        if (bolFileAdd)
        {
            SPFile f = files.Add(file, MyData);

            f.Item["ContentTypeId"] = "image/jpeg";
            f.Item["Title"] = file;
            f.Item.SystemUpdate();

            SPContext.Current.Web.AllowUnsafeUpdates = false;
            imgPhoto.ImageUrl = (string)f.Item[SPBuiltInFieldId.EncodedAbsUrl];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:03:04.313

Never mind. My code seems to mess with the file content. I'll post the solution later.

*edit*: I'm stupid and sorry :-/

I replaced this:

```
Stream fStream = filePath.PostedFile.InputStream;
byte[] MyData = new byte[fStream.Length];
Stream stream = new MemoryStream();
stream.Read(MyData, 0, (int)fStream.Length);
fStream.Close(); 
```

with this:

```
Stream fStream = filePath.PostedFile.InputStream;
byte[] MyData = new byte[fStream.Length];
BinaryReader binaryReader = new BinaryReader(fStream);
MyData = binaryReader.ReadBytes((Int32)fStream.Length);
fStream.Close();
binaryReader.Close(); 
```

and suddenly it all worked ;-)

# javascript - 使用 javascript 在页面上搜索

> ID：10281827
> 
> 赞同：3
> 
> 时间：2012-04-23T13:48:03.303
> 
> 标签：javascript

我有一个 html 页面，我想在上面找到一些数据，但主要问题是该页面是在服务器上生成的，我想在本地机器上编写 javascript 代码并运行它。那么如何在本地机器上编写和运行 javascript 代码，以便它可以找到文本，或者通过 id/class 获取元素？

注意，这很重要：只有纯 javascript，没有像 jQuerys 之类的库！

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:52:32.037

**更新答案**：

起初我不明白你想调用一个*你无法控制的*网页，然后在你的浏览器中使用 JavaScript 与之交互。

下面原始答案中的信息仍然相关，但问题是：如何使代码在正确的上下文中运行？答案是：至少有两种方法：

1.  现在任何像样的浏览器都有内置的调试工具。在菜单上查看它们，但在许多浏览器中，它们可以通过`F12`键或`Ctrl`++`Shift`访问`I`。在这些工具中，您会找到一个“控制台”，您可以在其中键入 JavaScript 并让它在您正在查看的页面的上下文中运行。

    这非常适合交互式地做事，但每次都重新输入它有点痛苦。您还可以将代码放在本地文件中（例如，`/home/tjc/foo.js`），然后当您转到页面时，使用控制台将该脚本附加到页面（这将导致它在页面的上下文中执行），例如这个：

    ```
     document.documentElement.appendChild(document.createElement('script')).src = "file:///home/tjc/foo.js"; 
    ```

2.  一旦你的脚本做你想做的事，你可能想把它变成一个[小书签](http://en.wikipedia.org/wiki/Bookmarklet)。`javascript:`这是一个使用该方案而不是通常`http:`等的浏览器书签。有关详细信息，请参阅链接。您将需要一个工具来获取您的 JavaScript 代码并为您进行必要的 URL 编码，例如[Bookmarklet Crunchinator](http://ted.mielczarek.org/code/mozilla/bookmarklet.html)或类似工具。

* * *

**原始答案**：

> ...以便它可以找到文本，或通过 id/class 获取元素...

这是三个非常不同的问题：

1.  要在页面上查找文本，您有几个选项：

    1.  如果您只想查找文本但不太关心包含它的确切元素，则可以[`innerHTML`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml)在`document.body`. `innerHTML`是一个字符串；当您访问它时，浏览器会为您调用它的元素（及其后代）中的所有 DOM 元素创建一个 HTML 字符串。请注意，这**不是**来自服务器的原始内容；这是在您访问元素时即时创建的。对于很多用例，获取此字符串然后查看它可能很有用。请注意，您正在搜索的文本是*标记*，因此，例如，如果您搜索单词“table”，您可能会在句子（“We sat up at the table.”）或标记（`<table>...`）中找到它。

        `I'm`这是一个使用以下方法计算页面上单词的示例`innerHTML`：[live copy](http://jsbin.com/isoxew/2) | [来源](http://jsbin.com/isoxew/2/edit)- 请参阅末尾有关示例的注释。

        ```
         (function() {

           var pageText = document.body.innerHTML;
           display('Count of "I\'m" on the page: ' +
                   pageText.match(/I'm/g).length);

           function display(msg) {
             var p = document.createElement('p');
             p.innerHTML = String(msg);
             document.body.appendChild(p);
           }

         })(); 
        ```

    2.  如果您需要准确找出它所在的元素，则需要编写一个遍历页面节点的递归函数，对于[`Text`nodes](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772)，查看其中的文本。这是一个基本示例（函数就是`walk`函数）：[Live copy](http://jsbin.com/isoxew) | [来源](http://jsbin.com/isoxew/edit)- 请参阅末尾有关示例的注释。

        ```
         (function() {
           var matches = [], index;

           walk(matches, document.body, "");

           function walk(matches, node, path) {
             var child;

             switch (node.nodeType) {
               case 1: // Element
                 for (child = node.firstChild; child; child = child.nextSibling) {
                   walk(matches, child, path + "/" + node.tagName);
                 }
                 break;
               case 3: // Text
                 if (node.nodeValue.indexOf("I'm") !== -1 ) {
                   matches.push("Found it at " + path);
                 }
                 break;
             }
           }

           display("Matches found (" + matches.length + "):");
           for (index = 0; index < matches.length; ++index) {
             display(matches[index]);
           }

           function display(msg) {
             var p = document.createElement('p');
             p.innerHTML = String(msg);
             document.body.appendChild(p);
           }

         })(); 
        ```

2.  要通过 查找页面上的元素`id`，请使用[`document.getElementById`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)。

3.  要通过 查找页面上的元素`class`，在大多数现代浏览器上，您可以使用[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)或[`querySelectorAll`](http://www.w3.org/TR/selectors-api/#queryselectorall)。

请注意示例：我使用的是[JSBin](http://jsbin.com)，默认情况下，它会将您在左侧看到的 JavaScript 放在您在右侧看到的 HTML 的**末尾**（就在结束`</body>`标记之前）的“源”视图中. 这符合[最佳实践](http://developer.yahoo.com/performance/rules.html)。

阅读：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:32:54.403

如果您正在寻找 imacros 解决方案，那么它是这样的：

```
 var reportDataTable = window.content.document.getElementById("yoursid");
 if (reportDataTable == null)
 {
    iimPlay("mac1.iim");
 }
 else
 {
    iimDisplay("stop!");
 } 
```

其中 mac1.iim 是宏，它会重复，直到

> window.content.document.getElementById("yoursid");

不会成立

# php - 直接在 MySQL 中将多行从一个表复制到另一个表？

> ID：10281829
> 
> 赞同：2
> 
> 时间：2012-04-23T13:48:05.043
> 
> 标签：php, mysql

我正在尝试将值直接从一个mysql表复制到另一个......但问题是，有很多行要复制，因此子选择语句将返回很多行但参数`:order_id`只写一次。

鉴于这个问题，我很难弄清楚如何编写这个过程：

```
# 1: Create new Order & Copy the cart basket to the Order basket
$order_id = addOrder($customer_id);
if ($order_id > -1) {
    $sql = "INSERT INTO tbl_order_basket(order_id, product_id, product_name,
                                         basket_qty, basket_price, subtotal)
                 VALUES (:order_id, (SELECT (cart.product_id, product.name,
                                     cart.cart_qty, cart.cart_price, cart.subtotal)
                                FROM tbl_shopping_cart AS cart
                          INNER JOIN tbl_product AS product
                                  ON cart.product_id = product.id
                               WHERE cart.php_sesskey = :session_id)
                        )
                  WHERE order_id=:order_id;";
} 
```

这是我要复制的数据：

```
ORDER BASKET            CART BASKET         PRODUCTS
FK  order_id            FK  php_sesskey
FK  product_id      <-- FK  product_id  === PK  id
    product_name    <--                 <--     name
    basket_qty      <--     cart_qty
    basket_price    <--     cart_price                              # <-- : copy to
    subtotal        <--     subtotal                                # === : join on 
```

我该怎么做呢？

*注意：我使用的是 PHP 5 和 MySQL 5.5*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:50:18.757

也许你可以用这个？

```
INSERT INTO ... SELECT ... FROM ... WHERE ... 
```

要创建查询，首先要创建一个`SELECT`它，它会为您提供要插入的所有字段。然后前置`INSERT INTO <table>`，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:49:58.030

查看[SELECT INTO TABLE](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)

```
INSERT INTO tbl_temp2 (fld_id)
SELECT tbl_temp1.fld_order_id
FROM tbl_temp1 WHERE tbl_temp1.fld_order_id > 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:15:47.673

尝试使用下面的查询；这种语法过去对我有用。由于`WHERE`MySQL`INSERT`语句（[手册](http://dev.mysql.com/doc/refman/5.1/en/insert.html)）中没有，因此我删除了该部分。`VALUES`另外，在执行`INSERT...SELECT`（[手动](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)）时不要使用关键字。

```
$sql = '
    INSERT INTO tbl_order_basket(order_id, product_id, product_name,
                                     basket_qty, basket_price, subtotal)
      SELECT :order_id, cart.product_id, product.name,
             cart.cart_qty, cart.cart_price, cart.subtotal
      FROM tbl_shopping_cart AS cart
        INNER JOIN tbl_product AS product
        ON cart.product_id = product.id
      WHERE cart.php_sesskey = :session_id)
  '; 
```

# sql - SQL - 查找具有等价性的重复项

> ID：10281830
> 
> 赞同：1
> 
> 时间：2012-04-23T13:48:11.117
> 
> 标签：sql

我在开发这个 SQL 查询时遇到了麻烦。给定以下两个表：

*   ACADEMIC_HISTORY (STUDENT_ID, TERM, COURSE_ID, COURSE_GRADE)
*   COURSE_EQUIVALENCIES (COURSE_ID, COURSE_ID_EQUIVALENT)

检测学生过去是否参加过相同（***或同等***）课程且成绩及格（C 或更高）的最佳方法是什么？

## 例子

学生 #1 参加了 ABC001 课程并获得了 C 的成绩。十年后，该课程更名为 ABC011，并在 COURSE_EQUIVALENCIES 中输入了相应的条目。学生以这个新名称重新学习了课程并获得了 B 级。我如何构建一个 SQL 查询来检测重复的课程并且只计算第一个及格的成绩？

（实际情况要复杂得多，但这应该让我开始。）

提前致谢。

**编辑：** 甚至没有必要保留或丢弃任何信息。仅显示具有重复项的类的查询就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:08:32.313

你可以使用类似的东西：

```
SELECT 
    STUDENT_ID
    ,MIN (COURSE_GRADE)
FROM (
    SELECT * FROM         
        ACADEMIC_HISTORY 
    WHERE COURSE_ID =1

    UNION

    SELECT 
        h.STUDENT_ID
        ,h2.COURSE_ID
        ,h2.COURSE_GRADE
    FROM
    ACADEMIC_HISTORY AS h
    LEFT OUTER JOIN COURSE_EQUIVELANCIES as e
        ON e.COURSE_ID = h.COURSE_ID
    LEFT OUTER JOIN ACADEMIC_HISTORY as h2
        ON h.STUDENT_ID = h2.STUDENT_ID
        AND h2.COURSE_ID = e.COURSE_ID_EQUIVELANT
    WHERE
         h.COURSE_ID =1
) AS t
WHERE STUDENT_ID =1
GROUP BY STUDENT_ID 
```

[http://sqlfiddle.com/#!3/d608f/20](http://sqlfiddle.com/#!3/d608f/20)

抱歉发布了一个错误..它更喜欢实际课程的分数而不是任何等效分数 - 现在已修复

这只寻找一个等价级别..但也许你想强制执行并拥有数据输入过程的那部分..查看所有可能的等价并输入有效的

编辑：第一次通过资格课程（使用编号条款..）

```
SELECT TOP 1
    STUDENT_ID
    ,MIN (COURSE_GRADE)
FROM (
    SELECT * FROM         
        ACADEMIC_HISTORY 
    WHERE COURSE_ID =1

    UNION

    SELECT 
        h.STUDENT_ID
        ,h2.COURSE_ID
        ,h2.TERM
        ,h2.COURSE_GRADE
    FROM
    ACADEMIC_HISTORY AS h
    LEFT OUTER JOIN COURSE_EQUIVELANCIES as e
        ON e.COURSE_ID = h.COURSE_ID
    LEFT OUTER JOIN ACADEMIC_HISTORY as h2
        ON h.STUDENT_ID = h2.STUDENT_ID
        AND h2.COURSE_ID = e.COURSE_ID_EQUIVELANT
    WHERE
         h.COURSE_ID =1
) AS t
WHERE STUDENT_ID =1

GROUP BY STUDENT_ID, TERM
ORDER BY TERM ASC 
```

[http://sqlfiddle.com/#!3/fdded/6](http://sqlfiddle.com/#!3/fdded/6)

（注意 TOP 是你需要 LIMIT 的 MySQL 的 t-sql 命令）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:37:05.697

数据（小写）

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp;
SET search_path='tmp';

CREATE TABLE academic_history
        ( student_id INTEGER NOT NULL
        , course_id CHAR(6)
        , course_grade CHAR(1)
        , PRIMARY KEY(student_id,course_id)
        );
INSERT INTO academic_history ( student_id,course_id,course_grade) VALUES
 (1, 'ABC001' , 'C' )
 , (1, 'ABC011' , 'B' )
 , (2, 'ABC011' , 'A' )
        ;

CREATE TABLE course_equivalencies
        ( course_id CHAR(6)
        , course_id_equivalent  CHAR(6)
        );
INSERT INTO course_equivalencies(course_id,course_id_equivalent) VALUES
        ( 'ABC011' , 'ABC001' )
        ; 
```

查询：

```
-- EXPLAIN ANALYZE
WITH canon AS (
        SELECT ah.student_id AS student_id
        , ah.course_id AS course_id
        , COALESCE (eq.course_id_equivalent,ah.course_id) AS course_id_equivalent
        FROM academic_history ah
        LEFT JOIN course_equivalencies eq ON eq.course_id = ah.course_id
        )
SELECT h.student_id
        , c.course_id_equivalent
        , MIN(h.course_grade) AS the_grade
FROM academic_history h
JOIN canon c ON c.student_id = h.student_id AND c.course_id = h.course_id
GROUP BY h.student_id, c.course_id_equivalent
ORDER BY h.student_id, c.course_id_equivalent
        ; 
```

输出：

```
NOTICE:  drop cascades to 2 other objects
DETAIL:  drop cascades to table tmp.academic_history
drop cascades to table tmp.course_equivalencies
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "academic_history_pkey" for table "academic_history"
CREATE TABLE
INSERT 0 3
CREATE TABLE
INSERT 0 1
 student_id | course_id_equivalent | the_grade 
------------+----------------------+-----------
          1 | ABC001               | B
          2 | ABC001               | A
(2 rows) 
```

# jquery - goMap 只加载一次

> ID：10281831
> 
> 赞同：0
> 
> 时间：2012-04-23T13:48:22.037
> 
> 标签：jquery, google-maps-api-3

用户应该能够单击一个链接，该链接将打开一个带有地图的模式。一切正常，但是当您关闭模式并再次单击链接时，模式会打开，但地图不会再次加载。

这是单击链接时打开模式的 jQuery。

```
$('.mapModal').click(function(){
    var id = $(this).attr('value');
    var address = $('#doc' + id).data('ad');
    $("#map-modal").show();
    $("#modal-map").goMap({
        address: '' + address + ', South Africa',
        zoom: 20
    });
    $.goMap.createMarker({
        address: '' + address + ', South Africa'
    });
});

$('.close').click(function(){
    $("#modal-map").html('');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:31:49.903

你需要删除data()，所以只需在$("#map-modal").show();之后 写

```
$("#map-modal").removeData();
$("#modal-map").goMap({
        address: '' + address + ', South Africa',
        zoom: 20
}); 
```

你可以再吃一次午餐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:55:54.513

goMap 正在使用 jQuery`data()`方法将数据项“goMap”添加到您的`#modal-map`元素中，这使得当您重新显示元素时，它会认为元素内部仍然存在地图。当您清除元素的 html 内容时，您需要清除该数据项。

另一种方法是使用该`hide()`方法来隐藏元素并且不破坏地图内容。

# django - UserProfile.location”必须是“Location”实例

> ID：10281840
> 
> 赞同：1
> 
> 时间：2012-04-23T13:48:46.107
> 
> 标签：django, forms, foreign-keys, instance

我在理解形式和模型形式之间的关系方面仍然遇到一些问题。我收到一个错误：UserProfile.location”必须是“Location”实例。

我在 forms.py 中将模型中的位置设置为空白=True、null=True 和 required=False。我现在真的不知道该怎么办。

我该如何解决这个问题？

```
from django.db import models
from django.contrib.auth.models import User

class Location(models.Model):
    location = models.CharField(max_length=32)
    #county = models.CharField(max_length=32)
    #province = models.CharField(max_length=32)

class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True, primary_key=True)
    location = models.ForeignKey("Location", null=True, blank=True)

    website = models.URLField("Site", null=True, blank=True)
    accepted_rules = models.BooleanField(default=False)
    accepted_rules_date = models.DateTimeField(auto_now_add=True)

    #points_count = models.IntegerField(default=0, null=True, blank=True)
    #posts_count = models.IntegerField(default=0, null=True, blank=True)
    #comments_count = models.IntegerField(default=0, null=True, blank=True) 
```

形式：

```
from django import forms
from django.forms import Form
from django.forms.models import ModelForm
from accounts.models import UserProfile, Location
from django.contrib.auth.models import User

class UserCreationForm(forms.Form):

    username = forms.CharField(max_length=32)
    password = forms.CharField(widget=forms.PasswordInput())
    email = forms.EmailField()
    #password_repeat = forms.CharField(widget=forms.PasswordInput(render_value=False))

    def clean_username(self):

        try:
            # iexact = case-insensitive match / important for validation
            User.objects.get(username__iexact=self.cleaned_data['username'])
            print "User does already exist"
    except User.DoesNotExist:
        return self.cleaned_data['username'] 
    else:
        raise forms.ValidationError("User already exists")

def clean_email(self):

    if User.objects.filter(email__iexact=self.cleaned_data['email']):
        print u'Adres email jest już używany.' 
        raise forms.ValidationError('Adres email jest już używany.') 
    else:
        return self.cleaned_data['email']

def save(self):
    user  = User.objects.create(username = self.cleaned_data['username'], email = self.cleaned_data['email'],)

    user.set_password(self.cleaned_data['password'])
    return user

class UserProfileForm(ModelForm):
    website = forms.URLField(label="website", required=False)
    location = forms.ChoiceField(required=False)

    class Meta:
        model = UserProfile
        include = ['website', 'location']
        exclude = ('user', 'type', 'accepted_rules') 
```

意见

```
contrib.auth.models import User
from django.template.response import TemplateResponse
from django.views.decorators.csrf import csrf_protect
from django.core.context_processors import csrf
from django.forms.models import inlineformset_factory
from django.http import HttpResponseRedirect

from accounts.forms import UserCreationForm, UserProfileForm

def index(request):
    return TemplateResponse(request, "base.html")

@csrf_protect
def register(request):
    form = UserCreationForm()
    user_profile = UserProfileForm()

    if request.method == "POST":

        form = UserCreationForm(prefix='user', data=request.POST or None)
        user_profile = UserProfileForm(prefix='profile', data= request.POST or None)

        if form.is_valid() and user_profile.is_valid():
            user = form.save()
            profile = user_profile.save(commit=False)
            profile.user = user
            profile.save()

            return HttpResponseRedirect("/")

    return TemplateResponse(request, 'accounts/register.html', {
                             'form':form,
                             'user_profile':user_profile ,
                             }
                            ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:58:58.227

问题就在这里。

```
class UserProfileForm(ModelForm):
    website = forms.URLField(label="website", required=False)
    location = forms.ChoiceField(required=False)

    class Meta:
        model = UserProfile
        include = ['website', 'location']
        exclude = ('user', 'type', 'accepted_rules') 
```

`ModelForm`将为您的表单生成所需的字段。您无需手动定义它们。所以你应该使用这样的东西。

```
class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        include = ['website', 'location']
        exclude = ('user', 'type', 'accepted_rules') 
```

另一件事。没有`include`选择，我想你想使用`fields`. 但是您不必同时使用`fields`和`exclude`，通常您需要使用其中之一。在你的情况下`exclude`就足够了。最后结果：

```
class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        exclude = ('user', 'type', 'accepted_rules') 
```

# c#-4.0 - 监控实体框架数据库连接（代码优先 4.3）

> ID：10281842
> 
> 赞同：3
> 
> 时间：2012-04-23T13:48:49.437
> 
> 标签：c#-4.0, frameworks, entity, dbconnection

我想知道使用实体框架管理/监视与服务器数据库的连接的最佳方法是什么。

我知道 EF DB 上下文或对象上下文为您做了主要工作。但是，在我们的场景中，用户可能会拔掉客户端的网线或在服务器机器上停止服务器等。

数据库服务器 <-> 网络 <-> 胖客户端 (EF)

因此，在上述场景中，如果网络出现故障并且客户端尝试任何需要访问数据的操作，则会出现异常（底层提供程序在打开时失败）。

检测与数据库的连接丢失的最佳方法是什么，以便客户端应用程序（数据库上下文/UoW、Rep 等所在的位置）可以正常失败？

我见过的一种解决方案是打开与服务器数据库 (DBConnection) 的手动连接，然后使用 C# 中的计时器轮询数据库并写入心跳表。然后在发生异常时捕获异常。这对我来说似乎是一个巨大的黑客攻击。

任何帮助将不胜感激......提前致谢。

# mysql - add_index 在 Rails 3 中不起作用

> ID：10281844
> 
> 赞同：0
> 
> 时间：2012-04-23T13:48:54.050
> 
> 标签：mysql, ruby-on-rails, database, rails-migrations, database-indexes

我在 Rails 3.2.3 应用程序中，我正在为我的数据库迁移中的外键添加索引。但是，在运行迁移后，键似乎没有被索引。我已经直接通过 mysql 控制台进行了测试。这就是我所做的，更好地描述：

我有一个`Car`与模型相关的`Owner`模型，例如：

```
class Car
  belongs_to :owner
end

class Owner
  has_many :car
end 
```

由于这些是现有的数据库表，我创建了另一个迁移来添加索引，我把：

```
add_index :cars, :owner_id, name: "owner_index" 
```

然后我运行了迁移，根据 Rails 一切都很好。但是当我登录到我的 mysql 并运行 EXPLAIN 查询时，我在`owner_index`列中看不到`key`：

```
mysql> EXPLAIN SELECT * FROM cars WHERE owner_id = 41;
+-------------+------+---------------+---------+-------+---------+-------------+
| select_type | type | key           | key_len | ref   | rows    | Extra       |
+-------------+------+---------------+---------+-------+---------+-------------+
| SIMPLE      | ref  | NULL          | 5       | const |  108    | Using where | 
+-------------+------+---------------+---------+-------+---------+-------------+
1 row in set (0.00 sec) 
```

理论上（根据[这篇文章](http://tomafro.net/2009/08/using-indexes-in-rails-index-your-associations)），前一个查询中的键列应该返回`owner_index`而不是`NULL`。

我做错了什么吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:59:38.507

哦，对不起，这只是我的注意力不足。只要您将`name`参数传递给`add_index`方法，我上面描述的步骤就可以正常工作。

# jasper-reports - JasperReports / IReport 中的甘特图

> ID：10281846
> 
> 赞同：0
> 
> 时间：2012-04-23T13:49:04.653
> 
> 标签：jasper-reports, ireport

我正在使用实际的 IReport Prof. 4.1.2.3

我正在尝试构建甘特图。

1)

我怎样才能将值放在这样的甘特条中（或附近）？: ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_* ___** ...

| 0:23:47 | | 00:09:31 | | 02:33:11 |

-------------------------------------------------- -----------------------------

2)

如何配置只能在类别轴中显示**X类别？**如果我让图表引擎为我工作，我会有一些小线条，但条形必须更厚。

如果我在类别轴中只有 4 个值，就会发生这种情况。

3）关于2）：

是否有一个函数/参数可以从 GANTT 配置条形高度？

谢谢和最好的问候

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:08:20.763

我希望这能回答你的问题我在 IReport 中使用甘特图，你必须输入值来自动构建所需的图表，即系列表达式、任务表达式（如任务）开始（日期/时间）、结束（日期/时间）您可以忽略的百分比您可以在我的[问题中看到示例图片](https://stackoverflow.com/questions/11097696/manipulate-gantt-with-ireport)

# php - php 解析汇率提要 XML

> ID：10281849
> 
> 赞同：2
> 
> 时间：2012-04-23T13:49:16.263
> 
> 标签：php, xml, parsing

我正在尝试使用欧洲中央银行 (ECB) [http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml的 currentcy 汇率提要](http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml)

他们提供了有关如何解析 xml 的文档，但没有一个选项对我有用：我检查了 allow_url_fopen=On 是否已设置。

[http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html](http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html)

例如，我使用过，但它没有回显任何内容，而且 $XML 对象似乎始终为空。

```
<?php
    //This is aPHP(5)script example on how eurofxref-daily.xml can be parsed
    //Read eurofxref-daily.xml file in memory
    //For the next command you will need the config option allow_url_fopen=On (default)
    $XML=simplexml_load_file("http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml");
    //the file is updated daily between 2.15 p.m. and 3.00 p.m. CET

    foreach($XML->Cube->Cube->Cube as $rate){
        //Output the value of 1EUR for a currency code
        echo '1&euro;='.$rate["rate"].' '.$rate["currency"].'<br/>';
        //--------------------------------------------------
        //Here you can add your code for inserting
        //$rate["rate"] and $rate["currency"] into your database
        //--------------------------------------------------
    }
?> 
```

更新：

由于我在测试环境中处于代理后面，因此我尝试了此操作，但仍然无法读取 XML： function curl($url){ $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_close ($ch);
返回 curl_exec($ch); }

```
$address = urlencode($address); 
$data = curl("http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml");  
$XML = simplexml_load_file($data);

var_dump($XML); -> returns boolean false 
```

请帮我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:56:12.650

我没有找到任何相关的设置`php.ini`。检查`phpinfo()`您是否有`SimpleXML`支持并`cURLsupport`启用。（你应该同时拥有它们，特别是`SimpleXML`因为你正在使用它并且它返回 false，它不会抱怨缺少功能。）

代理可能是这里的一个问题。看到[这个](https://stackoverflow.com/questions/1366824/php-simplexml-failing-on-localhost)和[这个](https://stackoverflow.com/questions/5498587/proxy-problem-using-simplexml-load-file-in-php)答案。使用[cURL](http://fi.php.net/curl)可以解决您的问题。

* * *

[这是这里](http://www.phpfreaks.com/forums/index.php?topic=325042.0)的另一种选择。

```
$url = file_get_contents('http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml');
$xml =  new SimpleXMLElement($url) ;

//file put contents - same as fopen, wrote  and close
//need to output "asXML" - simple xml returns an object based upon the raw xml
file_put_contents(dirname(__FILE__)."/loc.xml", $xml->asXML());

foreach($xml->Cube->Cube->Cube as $rate){
  echo '1&euro;='.$rate["rate"].' '.$rate["currency"].'<br/>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-27T20:48:35.367

这个解决方案对我有用：

```
$data = [];

$url = "http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml";
$xmlRaw = file_get_contents($url);

$doc = new DOMDocument();
$doc->preserveWhiteSpace = FALSE;

$doc->loadXML($xmlRaw);

$node1 = $doc->getElementsByTagName('Cube')->item(0);
foreach ($node1->childNodes as $node2) {
    $value = [];

    foreach ($node2->childNodes as $node3) {
        $value['date'] = $node2->getAttribute('time');
        $value['currency'] = $node3->getAttribute('currency');
        $value['rate'] = $node3->getAttribute('rate');

        $data[] = $value;
        unset($value);
    }
}

echo "<pre"> . print_r($data) . "</pre>"; 
```

# installation - 带有更多 MSI 的 Wix 安装程序。怎么做？

> ID：10281856
> 
> 赞同：0
> 
> 时间：2012-04-23T13:49:44.403
> 
> 标签：installation, wix, windows-installer

根据这个问题（[我应该如何在 WiX 安装程序中处理产品升级？](https://stackoverflow.com/questions/9483055/how-should-i-handle-product-upgrades-in-a-wix-installer)）我想将我的大 MSI 文件拆分为 2 个或更多更小的文件，以便进行更小的更新。

如何使用 WIX 实现微包？任何教程、文章或链接表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:11:46.340

WiX 3.6 (Beta) 有一个名为“Burn”的新引导程序。你可以在这里读到它：

[建筑安装包捆绑](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)

# oracle11g - Oracle DB：关于电子邮件触发器的建议

> ID：10281861
> 
> 赞同：0
> 
> 时间：2012-04-23T13:50:07.197
> 
> 标签：oracle11g

如果表中的特定列被更新并更新同一个表中的不同列，有人可以提供一个链接或 Oracle DB 触发器的示例，该触发器会发送电子邮件吗？

示例：一个表有多个问题，并且有两列“已添加问题”和“已发送电子邮件”，默认为“0”

```
Issue Added    Email Sent
     0             0 
```

当“已添加问题”列更新为“1”时

```
Issue Added    Email Sent
     1             0 
```

触发器发送电子邮件并更新“已发送电子邮件”列

```
Issue Added    Email Sent
     1             1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:54:33.370

尝试在触发器中发送电子邮件通常是个坏主意。

1.  如果系统无法发送邮件（例如，由于 SMTP 服务器暂时宕机），触发器将失败，触发语句将失败并回滚。您很少会因为无法发送电子邮件而真正想要停止基础交易。
2.  发送电子邮件是非事务性的。这意味着您将针对从未提交的更改发送电子邮件。而且您将多次发送电子邮件，因为 Oracle 选择回滚并重新执行全部或部分`INSERT`语句以保持写入一致性。

通常使用数据库作业会更好地为您服务，该作业会定期查找需要发送电子邮件的行，发送电子邮件，然后更新表。您可以使用较旧的`DBMS_JOB`包或更新和更复杂的`DBMS_SCHEDULER`包。类似的东西

```
CREATE OR REPLACE PROCEDURE process_issues
AS
BEGIN
  FOR i IN (SELECT * 
              FROM your_table_name
             WHERE issue_added = 1
               AND email_sent  = 0)
  LOOP
    send_email( i.issue_id );
    UPDATE your_table_name
       SET email_sent = 1
     WHERE issue_id   = i.issue_id;
  END LOOP;
END; 
```

然后计划每 5 分钟运行一次（您也可以使用该`DBMS_SCHEDULER`软件包）

```
DECLARE
  l_jobno PLS_INTEGER:
BEGIN
  dbms_job.submit( l_jobno,
                   'BEGIN process_issues; END;',
                   sysdate + interval '5' minute,
                   'sysdate + interval ''5'' minute' );
  commit;
END; 
```

您可以使用[UTL_MAIL 包](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_mail.htm#i1000954)来实现该`send_email`过程。您可能只需要`UTL_MAIL.SEND`使用适当的参数进行调用（假设您已经配置了`SMTP_OUT_SERVER`参数并且您的用户已被授予对`UTL_MAIL`包和允许您与该 SMTP 服务器通信的 ACL 的适当访问权限）。

# python - 在 Python 中，如何查询单词列表以匹配某个查询条件？

> ID：10281863
> 
> 赞同：0
> 
> 时间：2012-04-23T13:50:15.003
> 
> 标签：python, search

查询条件应支持布尔运算符和正则表达式。我读过 Booleano，但它不支持正则表达式。

如果没有任何东西可以满足这个要求，那将是开始构建的最佳技术？

下面示例中的语法只是一个示例，但它提供的功能应该存在。

```
is True if ('client/.+' and 'user_a') but (not 'limited' unless ('.+special' or 'godmode')) 
```

这等于

```
is True if 'client/.+' and 'user_a' and (not ('limited' and (not ('.+special' or 'godmode')))) 
```

适用于以下列表

```
is_true  = ['client/chat', 'user_a', 'limited', 'extraspecial']
is_false = ['client/ping', 'user_a', 'limited']
is_false = ['server/chat']
is_false = ['server/ping', 'ping'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:16:03.260

我设法通过使用 pyparsing 模块解决了这个问题。

```
import re
import pyparsing

class BoolRegEx(object):

  def Match(self, tags=[], query=""):
    self.tags = tags
    if ' ' not in query:
      return self.Search(query)
    else:
      return pyparsing.operatorPrecedence(
        pyparsing.Word(pyparsing.printables, excludeChars="()"), [
          (pyparsing.Literal("NOT"), 1, pyparsing.opAssoc.RIGHT, self.Not),
          (pyparsing.Literal("OR"),  2, pyparsing.opAssoc.LEFT,  self.Or),
          (pyparsing.Literal("AND"), 2, pyparsing.opAssoc.LEFT,  self.And),
        ]
      ).parseString(query, parseAll=True)[0]

  def Search(self, a):
    try:
      regex = re.compile(a.replace("<<", "#~").replace(">>", "~#").replace(">", ")").replace("<", "(").replace("#~", "<").replace("~#", ">"))
      for tag in self.tags:
        match = regex.match(tag)
        if match and len(match.group(0)) == len(tag):
          return True
      return False
    except:
      raise

  def And(self, t):
    for a in t[0][0::2]:
      if isinstance(a, basestring):
        v = self.Search(a)
      else:
        v = bool(a)
      if not v:
        return False
    return True

  def Or(self, t):
    for a in t[0][0::2]:
      if isinstance(a, basestring):
        v = self.Search(a)
      else:
        v = bool(a)
      if v:
        return True
    return False

  def Not(self, t):
    a = t[0][1]
    if isinstance(a, basestring):
      return not self.Search(a)
    else:
      return not bool(a)

print BoolRegEx().Match(['client/chat', 'user_a', 'limited', 'extraspecial'], "client/.+ AND user_a AND NOT ( limited AND NOT ( .+<r|i>special OR godmode ) )")
# False

print BoolRegEx().Match(['client/chat', 'user_a', 'limited', 'superspecial'], "client/.+ AND user_a AND NOT ( limited AND NOT ( .+<r|i>special OR godmode ) )")
# True 
```

为了避免冲突，我不得不用 <> 替换 regexp ()，但此时所有这些似乎都是最好的解决方案。

# ruby-on-rails-3 - 如何使用 Datamapper 迁移调整 postgreSQL DB 中的列长度？

> ID：10281864
> 
> 赞同：1
> 
> 时间：2012-04-23T13:50:16.060
> 
> 标签：ruby-on-rails-3, postgresql, datamapper

我正在使用[dm-migrations](https://github.com/datamapper/dm-migrations/)为我的数据库创建自定义迁移。

但是，我似乎找不到修改列长度的示例。有人可以解释一下这是怎么做到的吗？我在 rails 3 上使用 postgresql 数据库。

更新：

我尝试了以下方法：

```
migration 1, :modify_course_url_length do
  up do
    modify_table :hotels do
      change_column :url, String, :length => 255
    end
  end
end 
```

但看起来我需要让`change_column_type_statement`方法工作，因为它是一个 postgresql 数据库。

更新 2：

似乎问题在于输出的 SQL 是：

ALTER TABLE "酒店" ALTER COLUMN "url" VARCHAR(255)

虽然它需要

ALTER TABLE "hotels" ALTER COLUMN "url" 类型 VARCHAR(255)

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:19:37.110

您可以只为迁移编写原始 SQL，就像这样......

```
migration 1, :modify_course_url_length do
  up do
    execute(<<-SQL)
    ALTER TABLE hotels ALTER COLUMN url TYPE VARCHAR(255)
    SQL
  end
end 
```

# java - hibernate / Java：无法添加或更新子行：外键约束失败

> ID：10281868
> 
> 赞同：0
> 
> 时间：2012-04-23T13:50:24.733
> 
> 标签：java, mysql, hibernate

我有这些实体类

PlayerProfileEntity & UserInfoEntity

我加入了 userInfoEntity 和 PlaterProfileEntity 并将我的记录保存在数据库中，如下所示：

```
Session session = sessionFactory.openSession();
Transaction tr = session.beginTransaction();
Criteria crit = session.createCriteria(PlayerProfileEntity.class);
player.setUserId(new UserInfoEntity());
player.getUserId().setAddress(user.getUserId().getAddress());

session.save(player);
tr.commit(); 
```

我在我的 PlayerProfileEntity 类中使​​用了这个关联

```
@ManyToOne (fetch = FetchType.LAZY)
@Cascade({CascadeType.ALL})
@JoinColumn(name="userid")
private UserInfoEntity userId; 
```

我收到此错误：

```
com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`cricdb`.`userinfo`, CONSTRAINT `FK_teamInfo` FOREIGN KEY (`teamId`) REFERENCES `teaminfo` (`TeamId`)) 
```

任何解决方案？

# ios - 从单元测试运行时，CATextLayer 不会出现在 AVMutableComposition 中

> ID：10281872
> 
> 赞同：12
> 
> 时间：2012-04-23T13:50:35.623
> 
> 标签：ios, avfoundation, catextlayer, avmutablecomposition

**编辑：最奇怪的事情：似乎从一个完整的应用程序运行这段代码时一切正常，但我总是从我的单元测试中运行电影的创建，只有在那里它不起作用。试图弄清楚这是为什么...**

我正在尝试使用 AVMutableComposition 组合视频 + 音频 + 文本并将其导出到新视频。

我的代码基于 WWDC '10 的 AVEditDemo

我在 CATextLayer 中添加了紫色背景，因此我可以知道它已导出到电影中，但没有显示文本……我尝试使用各种字体、位置、颜色定义，但没有任何帮助，所以我决定在这里发布代码，看看是否有人偶然发现了类似的东西，可以告诉我我错过了什么。

这是代码（self.audio 和 self.video 是 AVURLAssets）：

```
CMTime exportDuration = self.audio.duration;

AVMutableComposition *composition = [[AVMutableComposition alloc] init];

AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
AVAssetTrack *videoTrack = [[self.video tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

// add the video in loop until the audio ends
CMTime currStartTime = kCMTimeZero;
while (CMTimeCompare(currStartTime, exportDuration) < 0) {
    CMTime timeRemaining = CMTimeSubtract(exportDuration, currStartTime);
    CMTime currLoopDuration = self.video.duration;

    if (CMTimeCompare(currLoopDuration, timeRemaining) > 0) {
        currLoopDuration = timeRemaining;
    }
    CMTimeRange currLoopTimeRange = CMTimeRangeMake(kCMTimeZero, currLoopDuration);

    [compositionVideoTrack insertTimeRange:currLoopTimeRange ofTrack:videoTrack
                                    atTime:currStartTime error:nil];

    currStartTime = CMTimeAdd(currStartTime, currLoopDuration);
}

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

AVAssetTrack *audioTrack = [self.audio.tracks objectAtIndex:0];
[compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, self.audio.duration) ofTrack:audioTrack atTime:kCMTimeZero error:nil];

AVMutableVideoComposition *videoComposition;

// the text layer part - THIS IS THE PART THAT DOESN'T WORK WELL
CALayer *animatedTitleLayer = [CALayer layer];
CATextLayer *titleLayer = [[CATextLayer alloc] init];
titleLayer.string = @"asdfasdf";
titleLayer.alignmentMode = kCAAlignmentCenter;
titleLayer.bounds = CGRectMake(0, 0, self.video.naturalSize.width / 2, self.video.naturalSize.height / 2);
titleLayer.opacity = 1.0;
titleLayer.backgroundColor = [UIColor purpleColor].CGColor;

[animatedTitleLayer addSublayer:titleLayer];
animatedTitleLayer.position = CGPointMake(self.video.naturalSize.width / 2.0, self.video.naturalSize.height / 2.0);

// build a Core Animation tree that contains both the animated title and the video.
CALayer *parentLayer = [CALayer layer];
CALayer *videoLayer = [CALayer layer];
parentLayer.frame = CGRectMake(0, 0, self.video.naturalSize.width, self.video.naturalSize.height);
videoLayer.frame = CGRectMake(0, 0, self.video.naturalSize.width, self.video.naturalSize.height);
[parentLayer addSublayer:videoLayer];
[parentLayer addSublayer:animatedTitleLayer];

videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

AVMutableVideoCompositionInstruction *passThroughInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
passThroughInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, exportDuration);
AVMutableVideoCompositionLayerInstruction *passThroughLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];

passThroughInstruction.layerInstructions = [NSArray arrayWithObject:passThroughLayer];
videoComposition.instructions = [NSArray arrayWithObject:passThroughInstruction];

videoComposition.frameDuration = CMTimeMake(1, 30);
videoComposition.renderSize = self.video.naturalSize;

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetMediumQuality];

exportSession.videoComposition = videoComposition;
exportSession.outputURL = [NSURL fileURLWithPath:self.outputFilePath];
exportSession.outputFileType = AVFileTypeQuickTimeMovie;

[exportSession exportAsynchronouslyWithCompletionHandler:^() {
    // save the video ...
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-11T23:26:11.870

我在不同的上下文中遇到了同样的问题。就我而言，我已将 AVMutableComposition 的准备工作移至后台线程。将这部分准备工作移回主队列/线程使 CATextLayer 覆盖再次正常工作。

这可能并不完全适用于您的单元测试上下文，但我的猜测是 CATextLayer/AVFoundation 依赖于 UIKit/AppKit 的某些部分在该线程上下文中运行/可用（绘图上下文？当前屏幕？），这可能解释我们都看到的失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-15T19:18:48.597

我遇到的问题是几乎所有东西都渲染得很好，还有带有 CALayer 和内容设置为 CGImage 的图像。除了 CGTextLayer 文本，如果我将背景颜色设置为 CGTextLayer，则 beginTime 和 duration 也完美呈现 - 只是不想出现实际文本。这一切都在模拟器上，然后我在手机上运行它：它是完美的。

结论：模拟器渲染出不错的视频......直到你使用 CATextLayer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T21:13:26.977

需要进一步调查，但 AFAICT 现在 AVMutableVideoComposition 内的 CATextLayer 根本无法在逻辑单元测试目标内工作，并且必须从常规目标测试此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T21:14:19.613

我的问题是我需要设置 contentsGravity = kCAGravityBottomLeft - 否则我的文字不在屏幕上。

# c# - 以编程方式按 Tab 键顺序选择第二个控件

> ID：10281873
> 
> 赞同：0
> 
> 时间：2012-04-23T13:50:37.933
> 
> 标签：c#, winforms

我有一个带有用户控件的对话框，并试图将选项卡顺序中的第二个控件设置为起始选项卡。即当表单被激活时，焦点控件实际上不是具有最低标签顺序的控件。我试图在构造函数中使用

```
 this.SelectNextControl(this.ActiveControl, true, true, true, false); 
```

但当时“this.ActiveControl”为空。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:02:57.733

也许这会做到：

```
tabControl1.SelectedIndex = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:04:09.173

在活动中尝试一下`Shown`。在实际显示窗口时调用此事件 - 此时，所有焦点都已完成，所有控件都已创建并且表单已准备好。在构造函数或`Load`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:04:21.243

尝试

```
tabControl1.SelectTab(1); 
```

或者

```
tabControl1.SelectTab("tabPage2"); 
```

* * *

两个版本都可以工作，当在构造函数之后立即调用`InitializeComponent()`. （已测试）

* * *

**编辑**（在你澄清之后）

使这个（现在是第二个）控制选项卡顺序中的第一个控件，而前一个控件（现在是第一个）选项卡顺序中的最后一个控件。由于按 Tab 键循环遍历所有控件，在到达最后一个控件后自动从头开始重新启动，您应该获得所需的行为。

```
+---+ +---+ +---+ +---+
| 4 | | 1 | | 2 | | 3 |
+---+ +---+ +---+ +---+

```

# c# - 更改几个表中的列参数

> ID：10281878
> 
> 赞同：2
> 
> 时间：2012-04-23T13:50:45.437
> 
> 标签：c#, .net, sql

我的数据库中有 20 个具有相同列的表。

我想更改所有表中流派（表中的列）的默认值。

可以用sql语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:59:35.647

通过快速研究，我得到了这个：

```
ALTER TABLE table_name
ALTER COLUMN column_name datatype SET DEFAULT default_value 
```

虽然我不是 SQL 专家，但这似乎可以完成这项工作。资料来源：[http](http://www.w3schools.com/sql/sql_default.asp) ://www.w3schools.com/sql/sql_default.asp 。无论如何，这是一个很好的 sql 问题资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:56:33.940

只是为了稍微扩展浮士德的答案，这可以使用 SP_MSFOREACHTABLE （未记录的过程）来完成，无需为所有表编写：

```
EXECUTE SP_MSFOREACHTABLE 
    @Command1 = 'ALTER TABLE ? ADD CONSTRAINT DF_Genre DEFAULT (''Default'') FOR Genre ',
    @WhereAnd = 'AND o.Name IN (SELECT Table_Name FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME = ''Genre'')' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:02:45.747

```
ALTER TABLE dbo.Tbl_1
    DROP CONSTRAINT DF_genre

ALTER TABLE dbo.Tbl_1 ADD CONSTRAINT
    DF_genre DEFAULT ('new value') FOR genre 
```

将“DF_genre”替换为每个表上命名的任何约束。

# sql - 每个表的最新日期时间列和计数

> ID：10281880
> 
> 赞同：0
> 
> 时间：2012-04-23T13:50:48.213
> 
> 标签：sql, sql-server

我有一个有 1000 多个表的数据库。这些表中有 100 个以三个字母为前缀（比如说“ABC”），这些表中只有一半具有 MODIFIEDDATETIME 列。

我正在尝试做一个简单的选择查询来获取每个表的所有最后更新的 MODIFIEDDATETIME 标记，该表实际上在该表上有一个 MODIFIEDDATETIME 并且也以三个字母前缀开头。

我试过使用这个功能，但它似乎没有让我到达那里。想法？

```
sp_msforeachtable '

select ''?'', modifieddatetime, count(*)
from ? 

where ? like ''%ABC%''
group by modifieddatetime
order by modifieddatetime desc
' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:40:50.573

借用[今天早些时候的另一个答案](https://stackoverflow.com/questions/10281765/sp-msforeachtable-parsing-of-dynamic-sql/10281905#10281905)：

> 一方面，我建议远离无证和不受支持的程序，例如`sp_MSForEachTable`. 它们可以随时更改甚至从 SQL Server 中删除，并且此特定过程可能与许多针对`sp_MSForEachDb`. [（在这里](https://sqlblog.org/2020/01/31/reliable-flexible-replacement-sp_msforeachdb)和[这里](http://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/?utm_source=AaronBertrand)查看一些背景。）

...但也看到[`sp_ineachdb`](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server-part-2/?utm_source=AaronBertrand).

以下是我的做法 - 最重要的是，从元数据中提取行数 - 虽然不是 100% 准确到毫秒，但通常足够接近 - 不会让您的系统陷入对每个表的扫描：

```
DECLARE @sql NVARCHAR(MAX);
SELECT @sql = N'';

CREATE TABLE #x
(
    [table]    NVARCHAR(255), 
    updated    DATETIME, 
    [rowcount] BIGINT
);

SELECT @sql = @sql + N'INSERT #x SELECT '''
  + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id])) + ''', 
  MAX(MODIFIEDDATETIME), (SELECT SUM(rows) FROM sys.partitions
    WHERE [object_id] = ' + CONVERT(VARCHAR(12), [object_id]) 
    + ') FROM ' + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id])) + ';'
FROM sys.columns 
  WHERE UPPER(name) = 'MODIFIEDDATETIME'
  AND UPPER(OBJECT_NAME([object_id])) LIKE 'ABC%';

EXEC sp_executesql @sql;

SELECT [table],updated,[rowcount] FROM #x;

DROP TABLE #x; 
```

也就是说，我不知道 using`MAX(MODIFIEDDATETIME)`是否适合知道最后一次触摸桌子的时间。如果交易失败怎么办？如果最后一个操作是删除怎么办？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:29:36.307

您可以使用动态 SQL 来做到这一点，但这在 1000 个表上可能效率不高！

```
DECLARE @SQL NVARCHAR(MAX) = ''

SELECT  @SQL = @SQL + ' UNION SELECT COUNT(' + QUOTENAME(Column_Name) + ') [Rows], MAX(' + QUOTENAME(Column_Name) + ') [MaxModifiedDate], ''' + QUOTENAME(Table_Schema) + '.' + QUOTENAME(Table_Name) + ''' [TableName] FROM ' + QUOTENAME(Table_Schema) + '.' + QUOTENAME(Table_Name)
FROM    INFORMATION_SCHEMA.COLUMNS
WHERE   Column_Name = 'ModifiedDateTime'
AND     Table_Name LIKE 'ABC%'

SET @SQL = 'SELECT MaxModifiedDate, TableName, Rows FROM (' + STUFF(@SQL, 1, 7, '') + ') t ORDER BY MaxModifiedDate DESC'
print @sql
EXEC SP_EXECUTESQL @SQL 
```

它基本上构建了一个查询，例如

```
SELECT  MaxModifiedDate, TableName, Rows
FROM    (   SELECT  'Table1' [TableName], MAX(ModifiedDate) [MaxModifedDate], COUNT(ModifiedDate) [Rows]
            FROM    Table1
            UNION
            SELECT  'Table2' [TableName], MAX(ModifiedDate) [MaxModifedDate], COUNT(ModifiedDate) [Rows]
            FROM    Table2
            UNION
            SELECT  'Table3' [TableName], MAX(ModifiedDate) [MaxModifedDate], COUNT(ModifiedDate) [Rows]
            FROM    Table3
            UNION
            ...
        ) c
ORDER BY MaxModifiedDate DESC 
```

# c# - 反序列化集合时未调用 Setter

> ID：10281882
> 
> 赞同：6
> 
> 时间：2012-04-23T13:50:58.663
> 
> 标签：c#, collections, setter, xmlserializer

我正在尝试使用 XmlSerializer 进行一些非常简单的序列化：

```
public struct XmlPerson
{
    [XmlAttribute] public string Id   { get; set; }
    [XmlAttribute] public string Name { get; set; }
}

public class GroupOfPeople
{
    private Dictionary<string, string> _namesById = new Dictionary<string, string>();

    //pseudo property for serialising dictionary to/from XML
    public List<XmlPerson> _XmlPeople
    {
        get
        {
            var people = new List<XmlPerson>();
            foreach (KeyValuePair<string, string> pair in _namesById )
                people.Add(new XmlPerson() { Id = pair.Key, Name = pair.Value });

            return people;
        }
        set
        {
            _namesById.Clear();
            foreach (var person in value)
                _namesById.Add(person.Id, person.Name);
        }
    }     
} 
```

保存这个类工作正常，我得到：

```
<?xml version="1.0" encoding="utf-8"?>
<GroupOfPeople xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <_XmlPeople>
        <XmlPerson Id="person1" Name="Fred" />
        <XmlPerson Id="person2" Name="Bill" />
        <XmlPerson Id="person3" Name="Andy" />
        <XmlPerson Id="person4" Name="Nagesh" />
    </_XmlPeople>
</GroupOfPeople> 
```

但是，当我再次读入文件时，我的 _XmlPeople 属性设置器永远不会被调用，因此字典是空的。此对象上的所有其他属性都可以正常反序列化。

我错过了一些明显的东西吗？我尝试了各种集合类型，但都没有反序列化。

**编辑**：阅读代码：

```
try
{
    using (var stream = new StreamReader(itemPath))
    {
        var xml = new XmlSerializer(typeof(GroupOfPeople));
        GroupOfPeople item = (GroupOfPeople)xml.Deserialize(stream);  
    }  
}
//snip error stuff 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T15:30:33.700

为了清楚起见，回答：

做了一些调试，发现**`XmlSerializer`没有为集合调用setter。**

而是调用**getter**，然后将项目添加到返回的集合中。因此，需要像 Felipe 那样的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:07:41.367

您是否尝试过使用 XmlArray 属性？

以您的示例为例，它将是这样的：

```
[XmlArray]
[XmlArrayItem(ElementName="XmlPerson")]
public List<XmlPerson> XmlPeople 
```

**编辑：**

在这里，尝试以下结构：

```
public struct XmlPerson
{
    [XmlAttribute] public string Id   { get; set; }
    [XmlAttribute] public string Name { get; set; }
}

public class GroupOfPeople
{
    [XmlArray]
    [XmlArrayItem(ElementName="XmlPerson")]
    public List<XmlPerson> XmlPeople { get; set; }
} 
```

我认为将代码添加到列表的 Setter 并不容易，那么当您真正需要它时获取该 Dictionary 怎么样？

像这样：

```
private Dictionary<string, string> _namesById;

public Dictionary<string, string> NamesById
{
    set { _namesById = value; }
    get
    {
        if (_namesById == null)
        {
            _namesById = new Dictionary<string, string>();

            foreach (var person in XmlPeople)
            {
                 _namesById.Add(person.Id, person.Name);
            }
        }

        return _namesById;
    }
} 
```

这样，您将从 XML 中获取项目，并且还将维护您的字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T14:15:00.313

在这个问题中，该`_XmlPeople`属性充当`_namesById`字典的“代理”，即实际存储集合元素的位置。它的 getter 和 setter 在不同类型的集合之间转换。

这不适用于反序列化，原因在[https://stackoverflow.com/a/10283576/2279059](https://stackoverflow.com/a/10283576/2279059)中指出。（反序列化调用**getter**，然后将元素添加到它返回的“临时”集合中，然后将其丢弃）。

一个通用的解决方案是将“代理集合”实现为一个单独的类，然后拥有一个作为代理集合的属性：

（在下面的代码中，“实际集合”是`_nameById`，并且`MyItem`是`XmlPerson`）

```
public class MyProxyCollection : IList<MyItem> {
  MyProxyCollection(... /* reference to actual collection */ ...) {...}
  // Implement IList here
}

public class MyModel {
  MyProxyCollection _proxy;

  public MyModel() {
    _proxy = new MyProxyCollection (... /* reference to actual collection */ ...);
  }

  // Here we make sure the getter and setter always return a reference to the same
  // collection object. This ensures that we add items to the correct collection on
  // deserialization.
  public MyProxyCollection Items {get; set;}
} 
```

这可确保获取/设置集合对象按预期工作。

# ios - Objective-C 中的可恢复上传

> ID：10281884
> 
> 赞同：1
> 
> 时间：2012-04-23T13:50:59.943
> 
> 标签：ios, objective-c, cocoa-touch, file-upload, resume-upload

我的 iOS 应用程序的一部分是将大文件上传到服务器。我的用户的互联网连接并不总是理想的。

有什么方法可以执行可恢复上传吗？

PS 请求类型为 HTTP，但如果不支持，可以切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:52:33.373

看看这个： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads)

# nlp - 短文本分类

> ID：10281893
> 
> 赞同：2
> 
> 时间：2012-04-23T13:51:59.580
> 
> 标签：nlp, classification, messages

我即将开始一个项目，我的最终目标是将短文本分类为：“可能对访问 X 地点感兴趣”：“不感兴趣或中立”。地点由一组关键字描述（例如膳食或里程类型，如“中国菜”）。所以理想情况下，我需要一些方法来基于短文本分析来模拟用户的欲望——然后根据欲望分数或欲望概率进行分类——这个领域有什么最先进的吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T16:40:14.263

这个问题和文本的情感分析完全一样。但是，与传统的二元分类不同，您似乎有“中立”的意见。情感分析的最新技术高度依赖于领域。例如，在电影分类方面表现出色的技术在商业产品上表现不佳。

此外，即使是特征选择也高度依赖于领域。例如，一元组在电影评论分类方面效果很好，但一元组和二元组的组合在分类推特文本方面表现更好。

我最好的建议是“玩转”不同的功能。由于您正在查看短文本，因此 Twitter 可能是一个很好的激励示例。我会从一元和二元作为我的特征开始。确切的算法不是很重要。SVM 通常在正确的参数调整下表现得非常好。在对更大的数据集进行实验之前，使用少量保留数据来调整这些参数。

这个问题更有趣的部分是排名！最近在以下论文中为此目的使用了“纯度分数”（我认为它们是最先进的）：

*   情感总结：评估和学习用户偏好。勒曼、布莱尔-戈尔登索恩和麦克唐纳。EACL。2009 年。
*   网络衍生极性词典的可行性。维利科维奇、布莱尔-戈尔登索恩、汉南和麦克唐纳。NAACL。2010 年。

# asp.net - 实体框架 4（使用 EDMX），如何将字段添加到数据库实际上没有该字段的模型中

> ID：10281897
> 
> 赞同：11
> 
> 时间：2012-04-23T13:52:20.993
> 
> 标签：asp.net, asp.net-mvc, entity-framework, entity-framework-4, edmx

我需要将一个字段添加到数据库实际上没有该字段的模型中。

因为，首先我尝试仅将字段添加到实体类中。

```
public partial class Weborder
{
  (Auto Generated)
  public int orderno {get; set;}
  .
  .
  .
  (Add Manually)
  public string newField1 {get; set;} //this is new field that DB does not have
  public string newField2 {get; set;} //this is new field that DB does not have
} 
```

后来，当我更新 EDXM 时，EDMX 删除了新字段，因为数据库没有该字段。:(

所以我手动将该字段添加到 EDMX 模型中。（添加 -> 标量属性）

然后编译时发生错误，错误消息说：

```
Error   1   Error 3004: Problem in mapping fragments starting at line 399:No mapping specified for properties ...
An Entity with Key (PK) will not round-trip when:... 
```

有人知道如何将新字段添加到实体类中吗？

谢谢！

**EDITED FOR：如果您的模型是您的数据库的表示并且在数据库中您没有该字段，为什么要手动添加它？**

=>

检索数据时，对象的返回类型为实体类。

在将数据从控制器传递到视图之前，我需要将更多数据（字段）添加到 IQueryable 结果中。

前任）

```
public DbSet<WEBORDERLN> WEBORDERLNs { get; set; }

//repository
public IQueryable<WEBORDERLN> WebOrderLns
{
      get { return context.WEBORDERLNs; }
} 
```

现在我在控制器中获得了 weborderln 数据。在通过视图之前，我需要

在结果中添加额外的数据。

```
var data = webOrderLnRepository.WebOrderLns.Where(e => e.PICKNO == OrderNo).ToList();

foreach (WEBORDERLN weborderln in data)
{
   weborderln.[NEW FIELD] = "EXTRA DATA";   //// FOR THIS, I NEED TO ADD NEW FILED INTO ENTITY CLASS
}

//return data 
```

我希望它可以解释这个问题:)

再次感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T14:26:49.470

您必须创建实体类的新部分（在新的 .cs 文件中）并向该类添加新字段。您不得修改自动生成创建的部分零件，因为每次更改 EDMX 文件时都会覆盖自动生成的文件。您也不能在 EDMX 中包含该字段，因为 EDMX 定义了您到数据库的映射 = 它仅包含数据库中的字段。

在与自动生成的类相同的程序集和命名空间中创建一个新文件 WebOrderPart.cs，其中包含：

```
public partial class Weborder
{
  public string newField1 {get; set;} 
  public string newField2 {get; set;} 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T14:25:36.473

[NotMapped] 不起作用。

```
 [NotMapped]
 public string newField1 {get; set;} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T14:39:21.263

首先，您不应该修改数据模型文件。该文件代表您的数据。

其次，您不应该从您的存储库中返回您的数据模型对象/集合。这是一个非常糟糕的做法，因为您正在创建控制器/视图和模型之间的依赖关系。我建议您创建自定义模型对象，其中包含您在视图中需要的属性，将您的实体映射到这些模型对象，并且只从您的存储库返回模型对象或模型对象的集合。

# git - 吉特。更新未跟踪的文件

> ID：10281898
> 
> 赞同：1
> 
> 时间：2012-04-23T13:52:31.093
> 
> 标签：git, git-add

当我使用命令`git add -u .`git 仍然不会更新未跟踪的文件。
仅当我通过路径指定它们时才有效，`git add -- filepath`
它可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:00:45.593

*无法*更新**未跟踪*的文件。他们一开始就没有被跟踪。
您需要**添加**未跟踪的文件。为此，您最常使用：*

 *```
$ git add some_untracked_file
$ # or
$ git add .  # add all files
$ # or
$ git add --all # similar to -A , add all again 
```

*all并不意味着每个文件，而是每个与**.gitignore*文件中的条目不匹配的文件。

从手册页：

> ```
>  -u, --update
>       Only match <filepattern> against already tracked files in the index rather than the working tree. That means that it will never stage
>       new files, but that it will stage modified new contents of tracked files and that it will remove files from the index if the
>       corresponding files in the working tree have been removed.
> 
>       If no <filepattern> is given, default to "."; in other words, update all tracked files in the current directory and its
>       subdirectories.
> 
>   -A, --all
>       Like -u, but match <filepattern> against files in the working tree in addition to the index. That means that it will find new files as
>       well as staging modified content and removing files that are no longer in the working tree. 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:00:22.587

参见 git 手册：

> -u, --update 只匹配索引中**已经跟踪**的文件而不是工作树。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且如果工作树中的相应文件已被删除，它将从索引中删除文件。*

# xcode - XCode 4中的代码完成工作奇怪

> ID：10281902
> 
> 赞同：0
> 
> 时间：2012-04-23T13:52:42.720
> 
> 标签：xcode, xcode4

从几个月前开始，代码补全变成了上下文不敏感的：它在同一个文件中提供了以相同字母开头的所有符号，包括注释中的单词。另一方面，它不建议其他文件中的任何内容。清理所有项目数据、重新安装和升级 Xcode 甚至升级操作系统后，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:56:52.563

我不时遇到类似的问题。删除 DerivedData 文件夹对我有用。

在这里你会发现同样的建议[http://blog.slidetorock.com/xcode-4-code-sense-autocompletion-problems](http://blog.slidetorock.com/xcode-4-code-sense-autocompletion-problems)

# javascript - 数组最大值函数给出了意想不到的结果

> ID：10281903
> 
> 赞同：1
> 
> 时间：2012-04-23T13:52:45.213
> 
> 标签：javascript, arrays, for-loop, max

我有这个函数用于返回数组的最大值：

```
Array.prototype.max = function() {

var max = this[0];
var len = this.length;

for (var i = 1; i < len; i++)
{

    if (this[i] > max)
    {       
        max = this[i];
    }
}

    return max;
} 
```

当我使用这个数组时：

```
var data1Values = ['0','0','0','0','3','0','6','12'] 
```

`data1Values.max()`返回 6 而不是 12。它以某种方式跳过了最后一个值。

我已经在循环中插入`alert(this[i])`和，它可以识别两个值（12 as和 6 as ），但它不会进入条件。`alert(max)``this[i]``max`

这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T13:53:32.657

你有一个**字符串**数组，而不是数字。字符串“6”大于字符串“12”。

尝试在值周围不带引号的情况下初始化数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:56:22.490

您正在比较字符串。“2”大于“1000”

更改为数字或添加 parseInt(this[i],10)

[演示](http://jsfiddle.net/mplungjan/cnP22/)

```
Array.prototype.max = function() {

  var len = this.length;
  var max = -1;
  for (var i=0; i < len; i++) {
    var val = parseInt(this[i],10);
    if (val > max) {       
        max = val;
    }
  }

  return max;
}

var data1Values = ['0','0','0','0','3','0','6','12']

alert(data1Values.max()); 
```

# sql - 如何查找聚合分组的列信息

> ID：10281906
> 
> 赞同：0
> 
> 时间：2012-04-23T13:52:50.880
> 
> 标签：sql, sql-server, sql-server-2000, max, derived-table

我在 SQL Server 2000 上编写了一个复杂的查询，其中部分包含对派生表的连接。不幸的是，由于基础数据与我的预期不同，该表并没有完全返回我想要的结果。假设数据是这样的：

```
USERID,OS,DATEINSTALLED
237,win,01/01/1980
237,dos,01/02/1978
237,lin,08/08/2002
132,win,03/03/1982
132,dos,03/07/2002
132,mac,03/07/2002 
```

然后我的查询看起来像这样：

```
SELECT USERID, DATEINSTALLED = max(DATEINSTALLED)
FROM INSTALLATIONS
GROUP BY USERID 
```

这将给出一个结果集

```
237,08/08/2002
132,03/07/2002 
```

但我需要的是一个结果集：

```
237,lin,08/08/2002
132,dos,03/07/2002 
```

或者

```
237,lin,08/08/2002
132,mac,03/07/2002 
```

如果它选择 mac 或 dos，我并不大惊小怪，但它不能提供 3 行；因为我需要的是每行`userid`，具有最大日期和该组合的“一个”有效操作系统。所以 mac 或 dos 是有效的，但 win 不是（对于用户 132）。

由于它是作为更复杂查询的一部分的派生表，因此由于执行时间的原因，我需要使其尽可能干净和简单（源表大小为几十万行）。正如标签所暗示的那样，我仅限于 SQL Server 2000。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:57:08.663

试试这个：

```
SELECT USERID, OS, DATEINSTALLED
FROM INSTALLATIONS
JOIN (
   SELECT USERID, DATEINSTALLED = max(DATEINSTALLED)
   FROM INSTALLATIONS
   GROUP BY USERID
) AS T
ON INSTALLATIONS.USERID = T.USERID AND INSTALLATIONS.DATEINSTALLED = T.DATEINSTALLED 
```

# ruby-on-rails - 将 twitter bootstrap 与 rails assets pipeline 和 less 一起使用

> ID：10281907
> 
> 赞同：4
> 
> 时间：2012-04-23T13:52:51.427
> 
> 标签：ruby-on-rails, twitter-bootstrap, asset-pipeline, less, sprockets

如何将[twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem 与资产管道正确集成？

我已经按照安装步骤进行操作，目前我有这个 application.css

```
 *= require_self
 *= require bootstrap_and_overrides 
```

然后在 bootstrap_and_overrides.css.less 我导入其他控制器样式表，以使它们与我在覆盖文件中定义的变量一起工作，并能够在`<controller-name>.css.less`文件中控制器特定样式表中使用引导混合。目前我正在这样做：

```
# in bootstrap_and_overrides.css.less
// generated code ...
// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;
@linkColor: #ff0000;

// import all other stylesheets
@import 'home.css.less';
@import 'users.css.less';
// and so on, once for every controller

// in home.css.less
#foobar {
    .border-radius(30px); // bootstrap mixin
    color: @linkColor;    // inherited variable 
} 
```

但是，通过这种方式，我失去了资产管道，并且在开发模式下我再也看不到单独的样式表了。有什么方法可以让 twitter-bootstrap-rails 与 sprockets 一起工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:50:33.260

认为github 上的[这个问题解释了你的问题。](https://github.com/thomas-mcdonald/bootstrap-sass/issues/79#issuecomment-4428595)（我知道这是为了sass，但无论如何解释应该是有效的）

简而言之，使用 sprocket 将单独编译每个文件，这意味着您不能使用 twitter 引导框架定义的变量和 mixin。所以我想答案是否定的:)

# jquery - 是否可以使用 jQuery 的 $.ajax 方法发布“json”并返回“文本”？

> ID：10281909
> 
> 赞同：0
> 
> 时间：2012-04-23T13:53:00.600
> 
> 标签：jquery, ajax

我将一些 JSON 数据发布到我的操作方法中，如下所示：

```
$.ajax({
        url: this.options.url,
        type: 'POST',
        dataType: 'json',
        data: values,
        success: function (html, status, response) {
            // do whatever
        },
        error: function (error) {
            // do whatever
        }
    }) 
```

我成功地访问了服务器，并且存在正确的值，没有抛出任何错误，但是错误事件被完成，而不是成功事件。在检查错误事件中的响应对象时，我可以看到我得到了 200 'OK' 回复。我还可以看到响应文本是我所期望的。

我认为这是因为我发布 JSON 但返回文本？每个方向是否可以有不同的数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:54:50.630

该`dataType`属性用于表示您期望响应调用的数据类型，而不是您发送的数据类型，因此您的调用期望 JSON 响应，而是获取纯文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:55:38.607

您指定的数据类型用于响应类型。只需将其更改为即可`text`。

引发错误是因为 jQuery 尝试将您的文本响应解析为 JSON 并因此遇到问题。

```
$.ajax({
        url: this.options.url,
        type: 'POST',
        dataType: 'text',
        data: values,
        success: function (html, status, response) {
            // do whatever
        },
        error: function (error) {
            // do whatever
        }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:56:21.190

简短的回答是，当然是的。

通过[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) dataType 指

> 您期望从服务器返回的数据类型。

不是您发送的内容。同时，如果您发送 JSON，您实际上只是发送文本——恰好包含 JSON 内容的文本。

因此，您可能只需要更改 dataType 来表示您正在返回文本，并且您可能会很成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:56:31.600

检查 dataType 属性。jQuery 期待 JSON 响应。从文档：

> “json”：将响应评估为 JSON 并返回一个 JavaScript 对象。在 jQuery 1.4 中，JSON 数据以严格的方式解析；任何格式错误的 JSON 都会被拒绝并引发解析错误。（有关正确的 JSON 格式的更多信息，请参阅 json.org。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:57:41.803

您期望数据为文本格式。

```
$.ajax({
        url: this.options.url,
        type: 'POST',
        dataType: 'text', // instead of json
        data: values,
        success: function (html, status, response) {
            // do whatever
        },
        error: function (error) {
            // do whatever
        }
    }) 
```

# powershell - 在信任之前针对本地存储的证书测试远程服务器证书

> ID：10281912
> 
> 赞同：1
> 
> 时间：2012-04-23T13:53:17.787
> 
> 标签：powershell

我有一些代码用于连接到我们拥有的 Web 服务器。服务器具有自签名证书。我目前正在与信任任何证书连接

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback {$true}. 
```

如何更改此设置，以便我可以使用自定义代码或针对本地商店中的证书测试远程服务器？例如，我可以将上面的代码更改为

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$customValidator} 
```

我想要做的是，而不是信任任何/所有证书，我只想信任它与我拥有的公钥 cer 文件匹配，或者我想使用自定义代码测试证书。我不太清楚的是如何处理自定义验证以及代码中的什么位置。我需要编写一个完整的类来处理自定义 SSL 验证还是有更好的方法来做到这一点？

```
$url = "https://myWebServer"
$web = New-Object Net.WebClient
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = { $true } 
//[System.Net.ServicePointManager]::ServerCertificateValidationCallback = { customSslCertValidation } #I would like to do something like this    
$output = $web.DownloadString($url) 
Write-Host $output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:03:48.393

尝试这样的事情：

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {
  $c = [System.Security.Cryptography.X509Certificates.X509Certificate2]$args[1]
  ($c.Thumbprint -eq "StoredOrRetrievedHash")
} 
```

这将根据字符串“StoredOrRetrievedHash”检查作为请求的一部分返回的证书的指纹。您可能希望将其替换为动态加载的证书中的详细信息。值得注意的是，脚本块委托的第一行将 $args 数组的第二个元素转换为[X509Certificate2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.aspx)类型的对象，因为裸[X509Certificate](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate.aspx)对象不公开 Thumbprint 属性。

*注意：这仅适用于 PowerShell v2 及更高版本 - 在 v1 中，将任意脚本块分配给委托是很多额外的工作，而且坦率地说，通常不值得付出努力。*

# c++ - tr1::randgen() 上的竞争条件，即使使用 #pragma omp critical

> ID：10281914
> 
> 赞同：1
> 
> 时间：2012-04-23T13:53:29.023
> 
> 标签：c++, multithreading, openmp, valgrind, tr1

为什么使用以下代码根据 valgrind 存在竞争条件？

```
#include <iostream>
#include <ctime>
#include <tr1/random>
#include <omp.h>

using namespace std;

tr1::mt19937 randgen;

int random(int min, int max)
{
    int number;
    if (min!=max)
    {
        #pragma omp critical(randgen)
        number = ((randgen() % (max - min)) + min);
        return number;

    } else
        return min;
}

int main(int argc, char *argv[])
{
    omp_set_num_threads(4);
    randgen.seed(time(NULL));
    #pragma omp parallel for
    for (int i = 0; i < 10; i++)
    {
        random(10,100);
    }

    return 0;
} 
```

编译为：

```
g++ -O3 -g -Wall -c -fmessage-length=0 -fopenmp -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
g++  -o "test"  ./main.o   -lgomp 
```

Valgrind 结果

```
valgrind --tool=drd --check-stack-var=yes --read-var-info=yes ./test
==19561== drd, a thread error detector
==19561== Copyright (C) 2006-2010, and GNU GPL'd, by Bart Van Assche.
==19561== Using Valgrind-3.6.1-Debian and LibVEX; rerun with -h for copyright info
==19561== Command: ./test
==19561== 
==19561== Thread 3:
==19561== Conflicting load by thread 3 at 0x00603420 size 4
==19561==    at 0x400A10:     _ZNSt3tr116mersenne_twisterImLi32ELi624ELi397ELi31ELm2567483615ELi11ELi7ELm2636928640ELi15E    Lm4022730752ELi18EEclEv.constprop.2 (random.tcc:323)
==19561==    by 0x400BB9: main._omp_fn.0 (main.cpp:16)
==19561==    by 0x4E3FEC9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==19561==    by 0x4C2A803: vgDrd_thread_wrapper (drd_pthread_intercepts.c:281)
==19561==    by 0x58FDEFB: start_thread (pthread_create.c:304)
==19561==    by 0x543059C: clone (clone.S:112)
==19561== Location 0x603420 is 0 bytes inside randgen._M_p,
==19561== a global variable declared at main.cpp:8
==19561== Other segment start (thread 1)
==19561==    at 0x4C2AE7D: pthread_create@* (drd_pthread_intercepts.c:440)
==19561==    by 0x4E402FB: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==19561==    by 0x400898: main (main.cpp:27)
==19561== Other segment end (thread 1)
==19561==    at 0x4E41550: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==19561==    by 0x4E406CD: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==19561==    by 0x4008A4: main (main.cpp:27) 
```

我认为通过使用 #pragma omp critical 一次只有 1 个线程可以调用给定的函数？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:16:11.200

您可以在[Valgrind 手册](http://valgrind.org/docs/manual/drd-manual.html#drd-manual.openmp)中找到答案：

> DRD 仅支持已使用此选项 [--disable-linux-futex] 配置且存在符号信息的 libgomp 库。对于大多数 Linux 发行版，这意味着您必须重新编译 GCC。

# signal-processing - 计算信号的谐波

> ID：10281915
> 
> 赞同：0
> 
> 时间：2012-04-23T13:53:32.533
> 
> 标签：signal-processing

我有包含许多样本的矢量形式的信号，并且频率为 w0。我想找到那个信号的谐波。有没有办法这样做？

假设 k = 2，对于 2*w0，我如何从样本中构造信号的谐波？这是我的前 20 个样本：

-0.239570299386578 0.1034882656331065 0.434308908352916 0.7137668996246224 0.9088106936857204 0.9963988158818323 0.9661854915005951 0.8217108676412244 0.5800958281197547 0.2698446607867672 -0.07226783043916135 -0.4058656575212867 -0.6914578691976684 -0.8952909939878536 -0.9932554094058046 -0.9737846003601184 -0.8391674550614948 -0.6053346354564043 -0.2999053926206244 0.04098635822626423

它的周期 = 18。我想通过使用这个值来找到周期为 9 的信号的幅度。

如果我的信号是 x[n] 并且它的谐波是 h[n]，我可以说 h[n] = x[2n] 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:38:53.980

您可以使用 Goertzel 算法找到任何频率或周期的幅度。

# java - Java 编译器树 api：NPE

> ID：10281918
> 
> 赞同：2
> 
> 时间：2012-04-23T13:53:36.477
> 
> 标签：java, visitor-pattern, java-compiler-api

我正在尝试使用另一个 treepathscanner 访问方法主体，但我不知道要传递哪个参数，因为我总是在 TreePath 构造函数中获得 NPE。

```
@Override
public Object visitMethod(MethodTree node, Trees p) {
    ...
    node.getBody().accept(new MethodVisitor(m, repository), node.getBody());
    ...
}

public class MethodVisitor extends TreePathScanner<Object, BlockTree> {...} 
```

例外：

```
An annotation processor threw an uncaught exception.
Consult the following stack trace for details.
java.lang.NullPointerException
    at com.sun.source.util.TreePath.<init>(TreePath.java:94)
    at com.sun.source.util.TreePathScanner.scan(TreePathScanner.java:65)
    at com.sun.source.util.TreeScanner.scan(TreeScanner.java:90)
    at com.sun.source.util.TreeScanner.visitBlock(TreeScanner.java:158)
    at com.sun.tools.javac.tree.JCTree$JCBlock.accept(JCTree.java:764)
    at cz.cvut.kbss.odpa.parser.visitor.OdpaVisitor.visitMethod(OdpaVisitor.java:93)
    at cz.cvut.kbss.odpa.parser.visitor.OdpaVisitor.visitMethod(OdpaVisitor.java:29)
    at com.sun.tools.javac.tree.JCTree$JCMethodDecl.accept(JCTree.java:676)
    at com.sun.source.util.TreePathScanner.scan(TreePathScanner.java:67)
    ... 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:38:03.267

如果有人需要它，正确的调用方式是：

```
new MethodVisitor(m, repository).scan(p.getPath(compilationUnitTree, node), node.getBody()); 
```

# c# - 将真实/建议的文件夹和文件结构映射到 xml 并最终映射到数据库

> ID：10281919
> 
> 赞同：1
> 
> 时间：2012-04-23T13:53:40.743
> 
> 标签：c#, xml, sql-server-2008, directory-structure

对于这个问题，技术集是 C# 4.0 和 SQL Server 2008。此功能将成为 Visual Studio 扩展的一部分。

我们需要实施一种策略，允许我们的用户定义特定文件夹/文件结构的外观。将提供一个 UI，允许用户在这些文件夹中添加“文件夹”或“文件”（类型无关）。然后，我们需要将用户定义的模式存储在数据结构中，并最终根据真实的文件夹结构（稍后提供）对其进行验证。所以用户进来，使用我们的 UI 来定义文件夹结构的外观。我们采用他/她的定义并将其存储在某个数据库中。稍后用户可以执行这些操作

**验证** 用户将我们指向网络共享或已根据此定义的结构设置的任何位置。然后，我们根据实际位置验证定义的模式。

**像这样** 用户将我们指向一个文件夹，其中保存了他的架构中定义的所有文件。然后，我们解析所有文件并根据用户在各个文件夹中的架构定义重新构建它们。

**每个“节点”的操作** 在定义的模式中，用户还可以将操作与每个节点相关联——定义为一组文件。因此，用户可以将 5 个文件分组到一个文件夹下，比如 A，并关联一个“将其移动到 X 位置”的操作。了解如何触发这些操作并不重要（可能来自用户定义此架构的同一 UI）。关键概念是能够在逻辑上将文件组合在一起并定义对它们的操作。

我可以想到几种不同的方法来解决这个问题。显然，XML 是首选。然而，将 XML 存储在 DB 中的问题在于，在 DB 列中正确查询 XML 会变得很烦人。更不用说由于所有标签名称等导致的 XML 文档的额外大小。

这是一个开放式的问题，我想把它介绍给 SOF 的天才们，以获得一些好的想法！

# java - 带有 apache camel 和 cxf 的 REST Web 服务：启动时出现 NullPointerException

> ID：10281920
> 
> 赞同：0
> 
> 时间：2012-04-23T13:53:49.837
> 
> 标签：java, rest, cxf, apache-camel

我不明白当我在 tomcat 中启动我的 web 服务时，有时会得到这个空指针异常。并且需要 3-4 次重新启动，然后这个异常就消失了。这是什么原因？我的堆栈跟踪是：

```
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/Beans.xml]; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4323)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4780)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:988)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:771)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:988)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:275)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:427)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:649)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:585)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415) 
```

我的 xml 文件是：

```
 <jaxrs:server id="restContainer" address="/" staticSubresourceResolution="true"> <jaxrs:serviceBeans> 
<ref bean="FooBar" />
 </jaxrs:serviceBeans>
 <jaxrs:providers> 
<bean class="org.apache.cxf.jaxrs.provider.JSONProvider"> 
<property name="dropRootElement" value="true" /> 
<property name="supportUnwrapped" value="true" /> 
</jaxrs:providers> 
<camelcxf:rsServer id="rsServer" address="/" serviceClass="com.camel.example.FooBar" /> <camel:camelContext id="camelContext-1">
 <camel:route>
 <camel:from uri="cxfrs:bean:rsServer" /> 
<camel:to uri="http://localhost:8080/Google/rest/search" /> 
</camel:route>
 </camel:camelContext> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:28:24.537

为什么不使用 cxfbeans？

看这个：

[http://camelandjava.blogspot.com/2012/05/rest-service-in-camel-using-cxf-and.html](http://camelandjava.blogspot.com/2012/05/rest-service-in-camel-using-cxf-and.html)

# .net - 如何在不阅读其全部内容的情况下中止 HTTP 帖子（.NET REST 服务）

> ID：10281921
> 
> 赞同：5
> 
> 时间：2012-04-23T13:53:56.043
> 
> 标签：.net, wcf, rest, post, httpwebrequest

我创建了一个接受二进制上传的自托管 .NET 服务。

```
[ServiceContract]
public interface IBinaryService
{

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "up/file/{fileName}/{hash}")]

    void FileUpload(string fileName, string hash, Stream fileStream); 
```

当它接收到一个文件时，它首先检查该文件是否已经在系统上，否则它从客户端流式传输文件并保存它：

```
 public void FileUpload(string fileName, string hash, Stream fileStream)
    {
        string filebasedir = basedir + @"file\"; //" 
        if (File.Exists(filebasedir + hash))
        {

            WebOperationContext.Current.OutgoingResponse.StatusCode = 
                                   System.Net.HttpStatusCode.Conflict;
            return;
        }

        using(var fileToupload = new FileStream(
                string.Concat(filebasedir, hash),
                FileMode.Create))
                {
                fileStream.CopyTo(fileToupload);
                } 
```

如果我单步执行代码，我可以看到在服务器读取参数并确定是否存在冲突之后，文件内容才会流式传输。我只需要以某种方式强制服务器不读取全部内容（可能是很多兆字节）。不幸的是，使用“return”提前退出该方法并不会这样做。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:40:37.670

如果我理解你所面临的问题正确..

客户端调用方法

```
void FileUpload(string fileName, string hash, Stream fileStream); 
```

一旦调用该函数，它就会开始将文件上传到服务器。如果服务器上已经存在文件，您希望避免或中断文件上传。

你为什么不把你的方法一分为二，一种方法会检查服务器上是否已经存在文件（它只有两个参数 filename 和 hash，不要传递 filestream ），并返回 true 或 false，如果它不存在然后使用 filestream 参数调用第二种方法。

这样它应该可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:26:50.200

框架中的内置功能（服务器端文件上传控件）没有提供更精细的粒度来处理在上传过程中以块形式接收的数据。它只是缓冲内存中的所有数据，直到到达文件末尾或遇到错误情况。

因此，您唯一的选择是：

1）通过编写二进制文件上传处理程序（httpHandler）自己完成。并非不可能，但也没有乍看起来那么微不足道。这将涉及确定请求编码方法并针对可能的变化使用适当的技术来正确解码流中的编码二进制数据。

2) 一个更简单的解决方案是只使用现有的商业控件之一，它为您实现此功能并公开您可以用来驱动自己的代码的事件。例如，以[ABCUpload.NET](http://www.websupergoo.com/abcupload.net-1.htm)为例。另一个是[PowUpload](http://www.element-it.com/asp-net-component/http-upload-control.aspx)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T21:01:27.753

可能，只返回带有错误代码的响应，而不是流式传输文件

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-01-21T13:04:53.247

你可以使用`OperationContext.Current.RequestContext.Abort()`方法。

# .htaccess - 重定向 301 htaccess

> ID：10281924
> 
> 赞同：0
> 
> 时间：2012-04-23T13:54:10.367
> 
> 标签：.htaccess, redirect, http-status-code-301

我想将我的所有 pdf 文件从特定文件夹（此处`toto`）重定向到另一个文件夹的根目录（此处`tata`），例如：

```
www.mywebsite/toto/fic1.pdf                   -> www.mywebsite/tata/
www.mywebsite/toto/fic2.pdf                   -> www.mywebsite/tata/
www.mywebsite/toto/fic3.pdf                   -> www.mywebsite/tata/
www.mywebsite/toto/fic4.pdf                   -> www.mywebsite/tata/
www.mywebsite/toto/sousDossier/fic4.pdf       -> www.mywebsite/tata/ 
```

我每个文件写了一行，但它并不漂亮......

```
RedirectPermanent /toto/fic1.pdf http://www.mywebsite/tata/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:01:07.673

```
RewriteEngine On
RewriteRule /?toto/.*\.pdf$ /tata/ [R=301,L]
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:06:42.967

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^toto/[^.]+\.pdf$ tata/ [R=301,L,NC] 
```

# scala - Play Framework Scala：带有可选参数的路由在控制器子包中不起作用？

> ID：10281926
> 
> 赞同：4
> 
> 时间：2012-04-23T13:54:23.933
> 
> 标签：scala, playframework, playframework-2.0

我正在尝试在 Playframework 2.0 (Scala) 中设置一个路由，其中​​包含查询字符串中的可选参数，遵循文档中的示例：

```
GET   /my/path   controllers.foo.Bar.list(offset: Int ?= 0, limit: Int ?= 20) 
```

但是，在编译时，我收到以下错误消息：

```
object controllers.foo.Bar does not take parameters 
```

我确保 controllers.foo.Bar.list 方法*实际上*将两个 Int 作为参数。一个关键的观察（我希望）可能是这曾经可以工作，当我直接在控制器包中拥有控制器类时，即

```
controllers.Bar.list 
```

但是，当我在 Controllers 中引入一个“foo”子包时，它就停止了工作。

任何关于我做错了什么的意见都非常感谢！

**更新：**对不起 - 我做了更多的实验，似乎原因是完全不同的（d'oh）。在我的具体情况下，我的控制器类是

```
controllers.foo.List.list 
```

这似乎引起了名称冲突。重命名为其他东西（“FooList”）解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:03:28.657

对于任何发现这个问题的人来说，这似乎很可能是由于 Play Framework 中的错误造成的。

[您可以在issue tracker ticket](https://play.lighthouseapp.com/projects/82401/tickets/384-routes-with-optional-parameters-not-working-in-controller-subpackages#ticket-384-1)上关注其进度。

# c# - WCF 忽略数据合同不起作用

> ID：10281928
> 
> 赞同：1
> 
> 时间：2012-04-23T13:54:32.380
> 
> 标签：c#, .net, wcf, serialization

我有一个托管在 IIS 上的 WCF 服务。这是我的界面：

```
[ServiceContract]
[SilverlightFaultBehavior]
public interface IETC
{
   [OperationContract]
   [PrincipalPermission(SecurityAction.Demand, Role = "XYZ")]
   string GetStampXML();

   [OperationContract]
   [PrincipalPermission(SecurityAction.Demand, Role = "XYZ")]
   List<Stamp> GetStamps();
} 
```

通过 Web 浏览器访问 WCF 服务时出现错误。错误如下：

```
Type 'System.Windows.Media.ImageSource' cannot be serialized. Consider marking it with the DataContractAttribute attribute..... 
```

我的邮票类别是：

```
[DataContract]
public class Stamp
{
    private string _Name;
    private string _SmallIcon = "";
    private string _MediumIcon = "";
    private string _LargeIcon = "";

    private BitmapImage _SmallImage;
    private BitmapImage _MediumImage;
    private BitmapImage _LargeImage;

    [DataMember]
    public string Name
    {
        get { return _Name; }
        set { _Name = value; }
    }

    [DataMember]
    public string SmallIcon
    {
        get { return _SmallIcon; }
        set { _SmallIcon = value; }
    }

    [DataMember]
    public string MediumIcon
    {
        get { return _MediumIcon; }
        set { _MediumIcon = value; }
    }

    [DataMember]
    public string LargeIcon
    {
        get { return _LargeIcon; }
        set { _LargeIcon = value; }
    }

    [IgnoreDataMember]
    public BitmapImage SmallImage
    {
        get { return _SmallImage; }
        set { _SmallImage = value; }
    }

    [IgnoreDataMember]
    public BitmapImage MediumImage
    {
        get { return _MediumImage; }
        set { _MediumImage = value; }
    }

    [IgnoreDataMember]
    public BitmapImage LargeImage
    {
        get { return _LargeImage; }
        set { _LargeImage = value; }
    }
} 
```

这就像 IgnoreDataMember 没有被识别。我在没有 IgnoreDataMember 数字的情况下尝试了它，它只会序列化 DataMember，但这也不起作用。任何想法为什么它似乎试图序列化 BitmapImage？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:20:12.757

您正在运行哪个版本的 .net？.NET 4 数据协定不要求您显式设置 Ignore 属性。您可以通过使用 DataContractSerializer 并将内容写入文件来测试正在生成的内容。创建控制台应用程序并引用您的服务项目。

```
namespace SO_10281928
{
    class Program
    {
        static void Main(string[] args)
        {
            var instance = new Stamp
                               {
                                   Name = "Test",
                                   SmallIcon = "Small Icon",
                                   LargeIcon = "LargeIcon",
                                   MediumIcon = "MediumIcon"
                               };

            using (var stream = new FileStream(@"c:\temp\stamp.xml", FileMode.Create))
            {
                var ds = new DataContractSerializer(typeof (Stamp));
                ds.WriteObject(stream, instance);
            }

            Console.WriteLine("Done.");
            Console.ReadLine();
        }
    }

    [DataContract]
    public class Stamp
    {
        private string _Name;
        private string _SmallIcon = "";
        private string _MediumIcon = "";
        private string _LargeIcon = "";

        private BitmapImage _SmallImage;
        private BitmapImage _MediumImage;
        private BitmapImage _LargeImage;

        [DataMember]
        public string Name
        {
            get { return _Name; }
            set { _Name = value; }
        }

        [DataMember]
        public string SmallIcon
        {
            get { return _SmallIcon; }
            set { _SmallIcon = value; }
        }

        [DataMember]
        public string MediumIcon
        {
            get { return _MediumIcon; }
            set { _MediumIcon = value; }
        }

        [DataMember]
        public string LargeIcon
        {
            get { return _LargeIcon; }
            set { _LargeIcon = value; }
        }

        public BitmapImage SmallImage
        {
            get { return _SmallImage; }
            set { _SmallImage = value; }
        }

        public BitmapImage MediumImage
        {
            get { return _MediumImage; }
            set { _MediumImage = value; }
        }

        public BitmapImage LargeImage
        {
            get { return _LargeImage; }
            set { _LargeImage = value; }
        }
    }

    public class BitmapImage
    {
    }
} 
```

结果是：

```
<Stamp xmlns="http://schemas.datacontract.org/2004/07/SO_10281928" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <LargeIcon>LargeIcon</LargeIcon>
    <MediumIcon>MediumIcon</MediumIcon>
    <Name>Test</Name>
    <SmallIcon>Small Icon</SmallIcon>
</Stamp> 
```

# android - 带有位图的 Android 图库

> ID：10281929
> 
> 赞同：-1
> 
> 时间：2012-04-23T13:54:39.760
> 
> 标签：android

有人可以给我一个使用位图属性的android画廊的例子。我创建了一个没有它的画廊，这给了我内存不足的错误。我是android编程的新手。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:32:38.017

每个应用程序都由 VM 分配一个内存限制。它可能是 16Mb、32 Mb ... 取决于设备。所以处理位图是一件很重要的事情。回收位图或使用软引用、LRU 缓存、磁盘缓存有助于避免 VM 预算错误。

有关处理位图的更多详细信息，请参阅 [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html 。](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# jquery - 模仿 jquery ui 对话框按钮样式

> ID：10281933
> 
> 赞同：2
> 
> 时间：2012-04-23T13:54:54.883
> 
> 标签：jquery, user-interface, dialog, styles

谁能告诉我为 html 按钮指定什么类名，例如，

```
<div id='dlg' class='dialog'>
 <input type="text" id="client" name="client" />
 <button type='button' class='WHAT_CLASS' onclick="afunction()">Cancel</button>
</div> 
```

我想要相同的按钮外观 jquery ui 'Redmond' 样式默认适用

```
$dlg.dialog({
  autoOpen: false,
  title: 'Company name',
  buttons: {
  'Cancel': function() {
    $dlg.dialog('close');
     }, ...... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:58:17.010

有多个必要的课程！您应该为此使用 jQuery UI 功能：

```
$("button").button(); 
```

[http://jqueryui.com/demos/button/](http://jqueryui.com/demos/button/)

但是，如果你不能这样做，jQuery 添加的类是： `ui-button ui-widget ui-state-default ui-corner-all`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:57:44.377

如果您的页面中包含 jQuery UI，则类名是`ui-button`. 编辑：此外还有其他类，例如`ui-state-default`等，这将取决于按钮的状态。模拟这种行为的最简单方法是根本不模拟它——按预期使用 jQuery UI。

# php - php sql 使用 php 在 javascript 中显示数据

> ID：10281936
> 
> 赞同：0
> 
> 时间：2012-04-23T13:55:04.253
> 
> 标签：php, javascript, sql, database

我对 java 脚本有疑问。我正在开发一个应用程序。它是一个活动预订系统。在前端我使用javascript。我只是收集数据并通过 php 插入数据库。现在的问题是我无法从数据库中获取数据并在前端显示**超过一列。** 我尝试了while和for循环。但它只显示一列。在此我只是将 php 包含在 javascript 代码中...请帮助我任何人.. 文件是

```
$_selc_content =mysql_query("select * from astro_booking WHERE astro_id = '9' order by id ASC");
while($_static_row = mysql_fetch_object($_selc_content))
    {
?> 
```

javascript文件是

```
return {   
    events : [          
        {
                "id":<?php echo $_static_row->id; ?>,
           "start": new Date(year, month, day + <?php echo $final_start_date; ?>, <?php echo $start_time; ?>, <?php echo $start_min_final; ?>),
           "end": new Date(year, month, day + <?php echo $final_end_date; ?>, <?php echo $end_time; ?>, <?php echo $end_min_final; ?>),
           "title":"<?php print_r($_static_row->title); ?>",
           "body":"<?php echo $_static_row->body; ?>",

} 
```

javascript示例代码是

```
{
    "id":1,
    "start": new Date(year, month, day, 12),
    "end": new Date(year, month, day, 13, 30),
    "title":"Lunch",

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:21:02.607

也许最好将 php 数组复制到 js 数组，然后你只能使用 js 数组。为此，您可以使用 php json_encode() 函数。你怎么看？

# sencha-touch-2 - 在 Sencha touch 2 中初始化文本字段

> ID：10281938
> 
> 赞同：1
> 
> 时间：2012-04-23T13:55:04.717
> 
> 标签：sencha-touch-2

我有一个煎茶触摸表单，它有两个文本字段。我想在页面加载时为它们分配一些文本。我尝试在初始化和启动函数中设置值。但是在那些功能文本字段中不可用，它们是未定义的。那么应该为此目的使用哪个事件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:08:41.800

要么使用容器的方法设置值，要么`setRecord({textFieldName1: "value", textFieldName2: "value"})`为文本字段分配一个 id 并通过容器`Ext.getCmp('textFieldName').setValue("value")`的`initialize`方法访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:40:11.330

不能`value`直接使用房产吗？设置该值将使用相应的属性`textfield`值进行填充，即在我们的示例中为“ ”等。`value``Sample Text 1`

例如

```
 { 
     xtype:'textfield,  
     value:'Sample Text 1 ',
   },
   { 
     xtype:'textfield,  
     value:'Sample Text 2 ',
   } 
```

# iphone - 升级后如何让iphone应用程序自动启动？

> ID：10281940
> 
> 赞同：1
> 
> 时间：2012-04-23T13:55:06.340
> 
> 标签：iphone, background

我们的应用程序具有 voip 后台模式。

假设应用程序正在后台运行，并且应用程序的更新显示在应用商店中。用户前往应用商店并点击“更新”或“全部更新”。

如果用户现在不等待更新完成，然后显式启动应用程序，则应用程序不再在后台运行，并且用户无法接收传入的 voip 呼叫。他只能接收传入的苹果推送消息。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:58:36.257

为什么不直接给他发消息？Cheezy，但这会让他启动你的应用程序。该消息可能类似于“感谢升级，现已启用来电”。

# objective-c - AVPlayer 缓冲百分比

> ID：10281945
> 
> 赞同：3
> 
> 时间：2012-04-23T13:55:32.050
> 
> 标签：objective-c, ios, avfoundation, avplayer

> **可能重复：**
> [AVPlayer 流式传输进度](https://stackoverflow.com/questions/7691854/avplayer-streaming-progress)

我正在使用 AVPlayer 播放来自 URL 的流式音频。我想在流式传输音频时显示缓冲百分比。我知道我可以观察到playbackBufferEmpty 和playBackLikelyToKeepUp 属性，但它只能在缓冲区加载时给我信息。

你有什么想法如何实现它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:19:11.983

AVPlayerItem 有一个loadedTimeRanges 的属性。如果您知道音频的长度，那么您可以使用此属性来确定在任何给定时间已下载音频的百分比。

# mysql - SUM on joining fields

> ID：10281948
> 
> 赞同：1
> 
> 时间：2012-04-23T13:55:44.633
> 
> 标签：mysql, sql

I've 2 tables:

**Teams:**

```
|-- id -- username --|
|__ 1  __ user1    __|
|__ 2  __ user2    __|
|__ 3  __ user3    __| 
```

**Payments:**

```
|-- id -- user_id -- amount --|
|__ 1  __ 1       __ 1000   --|
|__ 2  __ 1       __ 5000   --|
|__ 3  __ 2       __ 3000   --|
|__ 4  __ 1       __ 4500   --|
|__ 5  __ 2       __ 1000   --| 
```

**I want to get users total payments. in single query.** result like this:

```
|-- user_id -- username -- total_payment --|
|__ 1       __ user1    __ 10500         --|
|__ 2       __ user2    __ 4000          --| 
```

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:57:31.880

If you only want the `user_id` without `username`, there is no need for a join at all since the grouping need only happen against the `user_id` in `Payments`.

```
SELECT 
  user_id, 
  SUM(amount) AS total
FROM Payments
GROUP BY user_id 
```

**Edit:** The question has since been edited to include the username in output, so use the query below -- a join *is* necessary.

If you want to join in the username, it is a simple addition to the `FROM` and `GROUP BY` clauses.

```
SELECT 
  Teams.user_id, 
  username,
  SUM(amount) AS total
FROM 
  Teams
  /* LEFT JOIN used in case a user has no payments -- will still show in the list */ 
  LEFT JOIN Payments ON Teams.user_id = Payments.user_id
GROUP BY 
  Teams.user_id, 
  Teams.username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:02:40.973

```
SELECT A.user_id,B.user_name,A.total AS total_payment
FROM
(
SELECT 
  user_id, 
  SUM(amount) AS total
FROM Payments
GROUP BY user_id
) A,
Teams B
WHERE A.user_id = B.id; 
```

# login - 如何使用设计渲染对象的特定属性？

> ID：10281949
> 
> 赞同：1
> 
> 时间：2012-04-23T13:55:44.983
> 
> 标签：login, attributes, devise, render, rabl

我正在使用 devise gem，一切正常，但问题是登录后呈现整个用户对象。因此，如果我发送一个 json 请求进行登录，它将返回用户对象拥有的所有内容，我可以在注册期间使用 rabl 文件限制特定属性。我所做的只是在视图/设计/注册中创建了一个 create.rabl。但同样的事情不适用于登录。那么我如何使用设计来限制资源属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:07:45.360

查看[http://railscasts.com/episodes/322-rabl](http://railscasts.com/episodes/322-rabl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:06:41.323

登录后，设计重定向，可能到 user#show，因此创建一个`views/users/show.json.rabl`包含要返回的属性的视图文件，例如，

```
object @users

attributes :id, :name, :email 
```

# google-maps - 在 Appcelerator Titanium 中将经度/纬度转换为像素

> ID：10281952
> 
> 赞同：2
> 
> 时间：2012-04-23T13:55:51.640
> 
> 标签：google-maps, pixel, latitude-longitude

我正在寻找一种将经度/纬度转换为相对于地图视图的像素的方法。基本上，我正在寻找类似于 Projection.toPixels() 的东西，如此[处](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection)所述。

我想要做的是以下内容：我需要添加带有背景图像和文本的注释，并且由于默认注释无法实现这样的功能，我必须以某种方式计算它们在地图视图中的位置并添加标签（作为孩子们的观点），而不是。

我花了将近一个星期的时间来处理它，但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:50:08.163

我没有办法将 lat/lng 转换为像素，但我确实有办法获取注释上的图像和文本。这是一种“hackish”的方式，但它确实有效。基本上，您所做的就是创建一个自定义视图，其中包含您想要的任何内容。设置好视图后，对于注释的图像属性，将其设置为 yourCustomView.toImage()。

这是一个例子：

```
//Setup device size variables
var deviceWidth = Ti.Platform.displayCaps.platformWidth;
var deviceHeight = Ti.Platform.displayCaps.platformHeight;

//Create a new window
var w = Ti.UI.createWindow({
    width:deviceWidth,
    height:deviceHeight
})

//Create view for annotation
var annotationView = Ti.UI.createView({
    width:50,
    height:50,
    backgroundImage:'http://www.insanedonkey.com/images/bubble.png',
})

//Add text to the annotation view
var annotationText = Ti.UI.createLabel({
    width:'auto',
    height:'auto',
    text:'785k',
    font:{fontSize:12,fontWeight:'bold'},
    color:'#fff',
})
annotationView.add(annotationText);

//Create a new annotation
var newAnnotation = Titanium.Map.createAnnotation({
    latitude:36.134513,
    longitude:-80.659690,
    animate:true,
    image:annotationView.toImage() //Convert the annotationView to an image blob
});

var mapview = Titanium.Map.createView({
    region:{latitude:36.134513, longitude:-80.659690, latitudeDelta:0.0009,     longitudeDelta:0.0009},
    animate:true,
    regionFit:true,
    userLocation:true,
    annotations:[newAnnotation],
    mapType:Titanium.Map.STANDARD_TYPE,
    width:2000,
    height:2000

});

//Add the mapview to the window
w.add(mapview);

//Open the window
w.open(); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:45:34.630

注释上有一个属性来设置其图像和单击时将显示的标题（将鼠标悬停在其上）。看这里：

[http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.Map.Annotation-object](http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.Map.Annotation-object)

这不正是您想要的吗？

# css - 在另一个 div 中浮动一个移动的 div，溢出隐藏，css 修复？

> ID：10281954
> 
> 赞同：0
> 
> 时间：2012-04-23T13:55:58.923
> 
> 标签：css

我在父 div 中有一个飞机的 div `overflow: hidden`，所以看起来飞机 div 从页面上的一个元素下方飞行并用它拖动横幅。

在这里查看我的图表：

![图表](../Images/2b16b4c17f655bb62c0db45b207dd019.png)

我已经拥有的css代码是：

```
#plane{
width: 195px;
background-image: url(images/plane.png);
background-repeat: no-repeat;
height: 444px;
float: left;
position: relative;
top: 0px;
left: 0px;
}
#plane-holder {
height: 569px;
width: 960px;
overflow: hidden;
z-index: 2200;
display: inherit;
} 
```

和 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Netball Plane</title>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
</head>
<body>
<div id="header"><div id="topbar"><img src="images/contact-us-bar.gif" width="960" height="45" /></div>
</div>
<div id="content"><div id="mainbody"><div id="menubar"><div id="logo"><img     src="images/logo.gif" width="284" height="103" /></div>
<div class="menu">
Menu to go here
</div>
</div>
</div><div id="hero"><div id="information-that"><h1>Hello welcome to the site</h1>
<p></p><p>Some more text here.</p>
<p><img src="images/netball.png" alt="Rollover the netball for more information"     width="187" height="46" border="0" /></p>
</div>
</div><div id="hero-shadow"></div><script type="text/javascript">
       $(function(){
    var iCounter = 1;
    var iMaxCounter = 4;

        $( '#plane' ).animate({ 
            top: "-=450px",
            left: "+=857px"
        }, 30000, function(){
        }       
        ); 
    $('.slideshow').cycle({
      fx: 'fade', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
      after:onAfter
    });

});
        </script>
<div id="plane-holder"><div id="plane"></div>
</div><div id="base-content"><div id="footer"></div>
</body>
</html> 
```

但这显示为一个块，将这些 div 下方的其他元素推到页面下方。

您是否知道解决此问题的方法，以便飞机及其包含的 div 漂浮在我的网站上方？我试过设置 z-index，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:01:09.827

可能您应该在and （带有定义的 z-index）上使用位置`relative+absolute`设置`position: relative``container``absolute``#plane`

放置`#plane`with`top/left/right/bottom`属性

*   一开始你有`bottom : -<somepixels>, left : 0`
*   最后你有`top : 0, right : 0`

这样做其他元素不会受到平面存在的影响，保持在您放置它们的位置

`pointer-events: none`如果您想允许`click/hover`平面后面的事件也可以使用：请参阅[https://developer.mozilla.org/en/CSS/pointer-events](https://developer.mozilla.org/en/CSS/pointer-events)`IE<=8` （不幸的是，尽管已经发布了一些 js 变通方法，例如 Lea Verou，但不支持它）

# jquery - jquery ui datepicker onSelect 方法语法

> ID：10281955
> 
> 赞同：0
> 
> 时间：2012-04-23T13:56:01.633
> 
> 标签：jquery, jquery-ui, razor

大家好，我在使用 jquery ui datepicker onSelect 事件时遇到语法问题。这是我的代码：

```
$(document).ready(function () {
    $('.datePicker').datepicker({
        onSelect: function(dateText, inst) {
            var serviceID = $('#Service').val();
            var providerID = $('#Provider').val();
            $.getJSON('@Url.Action("Calendar/FreeSlots")', { serviceId: serviceID, providerId: providerID, date: dateText  }, function (slots) {
                var TimeSlots = $('#TimeSlots');
                TimeSlots.empty();
                $.each(slots, function (index, slot) {
                    TimeSlots.append($('<option/>', {
                         value: slot.value,
                         text: slot.text
                    }));//end append
                }); //end each
            }    //end onSelect
    }); //End datepicker attributes ---->  Firebug Error: missing ) after argument list 
}); ///End Document Ready 
```

我已经检查并仔细检查了，但我不知道如何修复语法。您可以在评论中看到 Firebug 告诉我语法错误。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:00:16.460

你没有`$.getJSON`挂断电话

```
$.getJSON('@Url.Action("Calendar/FreeSlots")', { serviceId: serviceID, providerId: providerID, date: dateText  }, function (slots) {
            var TimeSlots = $('#TimeSlots');
            TimeSlots.empty();
            $.each(slots, function (index, slot) {
                TimeSlots.append($('<option/>', {
                     value: slot.value,
                     text: slot.text
                }));
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:59:42.057

结束时选择您忘记关闭 $.getJson

```
$.getJSON('@Url.Action("Calendar/FreeSlots")', { serviceId: serviceID, providerId: providerID, date: dateText  }, function (slots) {
           var TimeSlots = $('#TimeSlots');
            TimeSlots.empty();
            $.each(slots, function (index, slot) {
                TimeSlots.append($('<option/>', {
                     value: slot.value,
                     text: slot.text
                }));//end append
            }); //end each
        }); //end onSelect 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:59:59.133

你`} // endOnSelect`不会结束你的 onSelect，但你的`getJSON`.

在此之前`}`，添加另一个

```
}); // end getJSON 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:00:07.023

`}`您忘记了`$.each()`通话结束：

```
}));//end append 
```

应该：

```
 }) //end append
}); //end each 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T14:03:53.800

人们解决了你的问题。但是你为什么不使用 JS 调试器呢？Firebug for firefox, Chrome 和其他一些内置的，IE 有开发者工具。你知道，它们会派上用场。

# c# - 列出属于 AD 组的所有用户

> ID：10281956
> 
> 赞同：1
> 
> 时间：2012-04-23T13:56:04.383
> 
> 标签：c#, .net, active-directory, active-directory-group

我需要一种 C# 方法来查找属于特定 AD 组的用户 ID，如果用户属于 AD 组，则返回 true。

到目前为止，我[从 AD 组获取用户列表的](https://stackoverflow.com/questions/4135485/getting-users-list-from-an-ad-group)内容是：

```
private Boolean IsMemberPartOfGroup(String groupName)
{
    var found = false;
    var ctx = new PrincipalContext(ContextType.Domain);  // fetch your group 
    var group = GroupPrincipal.FindByIdentity(ctx, groupName);  // enumerate over the group's members 
    foreach(var p in group.Members)
    {
        if (String.CompareOrdinal("group", p.StructuralObjectClass) == 0)
        {
            var g = p as GroupPrincipal;
            this.IsMemberPartOfGroup(g);
        }
        else if(p.Guid == UserPrincipal.Current.Guid)
        {
            found = true;
            break;
        }
    }
    return found;
} 
```

问题是一个组的成员是否是另一个组。属于外部组成员的内部组成员的任何人都应被视为已授权。

有一个更好的方法吗？

# architecture - 究竟什么是“OAuth 提供者”？

> ID：10281957
> 
> 赞同：5
> 
> 时间：2012-04-23T13:56:05.477
> 
> 标签：architecture, language-agnostic, oauth, oauth-2.0, oauth-provider

我想了解术语“OAuth Provider”通常是什么意思。[OAuth 规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25)中似乎没有提及它。

如果我们将 OAuth Provider 视为应用程序的一个组件，它执行哪些功能（例如授权、API 方法的实现等）？它与应用程序的其余部分有何关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T13:59:39.447

好吧，OAuth 提供者不是 OAuth 规范的一部分，因此您的问题没有“真正的”答案。但是，通常是构建受 OAuth 保护的服务的公司/个人，**或**受 OAuth 保护的服务本身。它也可以指 API 中提供 OAuth 端点的部分（通常是`/authorize`和`/access_token`）。

**编辑**：“旧”OAuth 1[社区规范](http://oauth.net/core/1.0a/)将“服务提供者”定义为

> 允许通过 OAuth 访问的 Web 应用程序。

后来在[OAuth RFC](https://www.rfc-editor.org/rfc/rfc5849)中将其重新定义为服务器，即：

> 一个 HTTP 服务器（根据[[RFC2616]](https://www.rfc-editor.org/rfc/rfc2616)）能够接受 OAuth 认证的请求（[第 3 节](https://www.rfc-editor.org/rfc/rfc5849#section-3)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:02:29.943

The OAuth Provider is provider that supplies the OAuth service for instance google, twitter, yahoo! or whoever you are asking to log in the user.

Or in other words the provider that tells that the user logged in successfully.

# html - HTML5 中是否有 minlength 验证属性？

> ID：10281962
> 
> 赞同：638
> 
> 时间：2012-04-23T13:56:22.683
> 
> 标签：html, html5-validation

似乎字段的`minlength`属性`<input>`不起作用。

HTML5 中是否还有其他属性可以帮助我设置字段值的最小长度？

* * *

## 回答 #1

> 赞同：1384
> 
> 时间：2012-04-24T08:24:58.653

您可以使用[`pattern`属性](http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-pattern)。该[`required`属性](http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-required)也是必需的，否则具有空值的输入字段将被排除在[约束验证](http://www.w3.org/TR/2011/WD-html5-20110525/association-of-controls-and-forms.html#constraint-validation)之外。

```
<input pattern=".{3,}"   required title="3 characters minimum">
<input pattern=".{5,10}" required title="5 to 10 characters"> 
```

如果要创建将模式用于“空或最小长度”的选项，可以执行以下操作：

```
<input pattern=".{0}|.{5,10}" required title="Either 0 OR (5 to 10 chars)">
<input pattern=".{0}|.{8,}"   required title="Either 0 OR (8 chars minimum)"> 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2014-06-27T09:31:18.620

[现在HTML5 规范](http://www.w3.org/TR/html5/forms.html#the-maxlength-and-minlength-attributes)**中**有一个`minlength`属性，还有接口。`validity.tooShort`

现在，所有现代浏览器的最新版本都启用了两者。有关详细信息，请参阅[https://caniuse.com/#search=minlength](https://caniuse.com/#search=minlength)。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-08-12T11:02:40.910

**这是仅限 HTML5 的解决方案**（如果您想要 minlength 5，maxlength 10 字符验证）

**[http://jsfiddle.net/xhqsB/102/](http://jsfiddle.net/xhqsB/102/)**

```
<form>
  <input pattern=".{5,10}">
  <input type="submit" value="Check"></input>
</form> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-07-06T10:52:13.877

是的，就是这样。这就像最大长度。W3.org 文档： [http ://www.w3.org/TR/html5/forms.html#attr-fe-minlength](http://www.w3.org/TR/html5/forms.html#attr-fe-minlength)

如果`minlength`不起作用，请使用`pattern`@Pumbaa80 提到的属性作为`input`标签。

**对于 textarea：** 用于设置最大值；使用`maxlength`and for min 转到[此链接](https://stackoverflow.com/questions/18184791/how-to-apply-min-and-max-on-textarea/24640346#24640346)。

你会在这里找到最大值和最小值。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-10-27T16:47:14.883

我使用了带或不带的 maxlength 和 minlength，`required`它对 HTML5 非常有用。

```
<input id="passcode" type="password" minlength="8" maxlength="10">
```

`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-23T14:11:47.267

minLength 属性（与 maxLength 不同）在 HTML5 中本机不存在。但是，如果字段包含少于 x 个字符，则有一些方法可以验证字段。

在此链接中使用 jQuery 给出了一个示例：http: [//docs.jquery.com/Plugins/Validation/Methods/minlength](http://docs.jquery.com/Plugins/Validation/Methods/minlength)

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
        <script type="text/javascript">
            jQuery.validator.setDefaults({
                debug: true,
                success: "valid"
            });;
        </script>

        <script>
            $(document).ready(function(){
                $("#myform").validate({
                    rules: {
                        field: {
                            required: true,
                            minlength: 3
                        }
                    }
                });
            });
        </script>
    </head>

    <body>
        <form id="myform">
            <label for="field">Required, Minimum length 3: </label>
            <input class="left" id="field" name="field" />
            <br/>
            <input type="submit" value="Validate!" />
        </form>
    </body>

</html> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-09-22T12:04:52.853

不是 HTML5，但无论如何都是实用的：如果你碰巧使用**AngularJS**，你可以使用[`ng-minlength`](https://docs.angularjs.org/api/ng/directive/input)(or `data-ng-minlength`) 作为输入和文本区域。另请参阅[此 Plunk](http://plnkr.co/edit/GotWYIwosmrokXCul249)。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-07-18T09:02:34.777

我注意到有时在 Chrome 中，当自动填充打开并且字段是自动填充浏览器内置方法的字段时，它会绕过最小长度验证规则，因此在这种情况下，您必须通过以下属性禁用自动填充：

**自动完成=“关闭”**

```
<input autocomplete="new-password" name="password" id="password" type="password" placeholder="Password" maxlength="12" minlength="6" required /> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-02-24T14:32:43.823

`minlength`[现在大多数浏览器](https://caniuse.com/#feat=input-minlength)都广泛支持属性。

```
<input type="text" minlength="2" required> 
```

但是，与其他 HTML5 功能一样，此全景图中缺少 IE11。因此，如果您拥有广泛的 IE11 用户群，请考虑使用[大多数浏览器](https://caniuse.com/#feat=input-pattern)（包括 IE11）`pattern`几乎全面支持的 HTML5 属性。

为了有一个好的和统一的实现并且可能是可扩展的或动态的（基于生成你的 HTML 的框架），我会投票给这个`pattern`属性：

```
<input type="text" pattern=".{2,}" required> 
```

**使用**`pattern`. _ _ 用户在使用`pattern`. 请参阅[此 jsfiddle](https://jsfiddle.net/a4cdwkgf/)或以下内容：

```
<h3>In each form type 1 character and press submit</h3>
</h2>
<form action="#">
  Input with minlength: <input type="text" minlength="2" required name="i1">
  <input type="submit" value="Submit">
</form>
<br>
<form action="#">
  Input with patern: <input type="text" pattern=".{2,}" required name="i1">
  <input type="submit" value="Submit">
</form>
```

例如，在 Chrome 中（但在大多数浏览器中类似），您将收到以下错误消息：

```
Please lengthen this text to 2 characters or more (you are currently using 1 character) 
```

通过使用`minlength`和

```
Please match the format requested 
```

通过使用`pattern`.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-01-13T17:47:42.333

我使用 jQuery 和结合 HTML5 的 textarea 解决方案需要验证来检查最小长度。

### minlength.js

```
$(document).ready(function(){
  $('form textarea[minlength]').on('keyup', function(){
    e_len = $(this).val().trim().length
    e_min_len = Number($(this).attr('minlength'))
    message = e_min_len <= e_len ? '' : e_min_len + ' characters minimum'
    this.setCustomValidity(message)
  })
}) 
```

### HTML

```
<form action="">
  <textarea name="test_min_length" id="" cols="30" rows="10" minlength="10"></textarea>
</form> 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-10-17T12:07:14.277

请参阅*[http://caniuse.com/#search=minlength](http://caniuse.com/#search=minlength)*。某些浏览器可能不支持此属性。

* * *

如果“类型”的值是其中之一：

**文本、电子邮件、搜索、密码、电话或 URL**（警告：不包括**号码**|**浏览器现在不支持“电话”** - 2017.10）

使用**minlength** (/maxlength) 属性。它指定最小字符数。

例如，

```
<input type="text" minlength="11" maxlength="11" pattern="[0-9]*" placeholder="input your phone number"> 
```

或者使用“模式”属性：

```
<input type="text" pattern="[0-9]{11}" placeholder="input your phone number"> 
```

如果“类型”是**number**，虽然不支持**minlength** (/maxlength)，但可以使用**min** (/max) 属性代替它。

例如，

```
<input type="number" min="100" max="999" placeholder="input a three-digit number"> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-03-09T16:07:25.193

新版本：

它扩展了使用（文本区域和输入）并修复了错误。

```
// Author: Carlos Machado
// Version: 0.2
// Year: 2015
window.onload = function() {
    function testFunction(evt) {
        var items = this.elements;
        for (var j = 0; j < items.length; j++) {
            if ((items[j].tagName == "INPUT" || items[j].tagName == "TEXTAREA") && items[j].hasAttribute("minlength")) {
                if (items[j].value.length < items[j].getAttribute("minlength") && items[j].value != "") {
                    items[j].setCustomValidity("The minimum number of characters is " + items[j].getAttribute("minlength") + ".");
                    items[j].focus();
                    evt.defaultPrevented;
                    return;
                }
                else {
                    items[j].setCustomValidity('');
                }
            }
        }
    }
    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
    var isChrome = !!window.chrome && !isOpera;
    if(!isChrome) {
        var forms = document.getElementsByTagName("form");
        for(var i = 0; i < forms.length; i++) {
            forms[i].addEventListener('submit', testFunction,true);
            forms[i].addEventListener('change', testFunction,true);
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-25T16:17:24.827

我写了这段 JavaScript 代码，[minlength.js]：

```
window.onload = function() {
    function testaFunction(evt) {
        var elementos = this.elements;
        for (var j = 0; j < elementos.length; j++) {
            if (elementos[j].tagName == "TEXTAREA" && elementos[j].hasAttribute("minlength")) {
                if (elementos[j].value.length < elementos[j].getAttribute("minlength")) {
                    alert("The textarea control must be at least " + elementos[j].getAttribute("minlength") + " characters.");
                    evt.preventDefault();
                };
            }
        }
    }
    var forms = document.getElementsByTagName("form");
    for(var i = 0; i < forms.length; i++) {
        forms[i].addEventListener('submit', testaFunction, true);
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-01-22T21:03:49.860

在我的情况下，我最手动验证并使用 Firefox (43.0.4)，不幸`minlength`的`validity.tooShort`是不可用。

由于我只需要存储最小长度即可继续进行，因此一种简单方便的方法是将此值分配给输入标签的另一个有效属性。在这种情况下，您可以使用[type="number"] 输入中的`min`、`max`和属性。`step`

与其将这些限制存储在数组中，不如更容易找到它存储在相同的输入中，而不是让元素 id 与数组索引匹配。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-05-22T06:17:45.977

如果需要进行此行为，请始终**在输入字段上显示一个小前缀，**否则**用户无法删除前缀**：

```
 // prefix="prefix_text"
   // If the user changes the prefix, restore the input with the prefix:
   if(document.getElementById('myInput').value.substring(0,prefix.length).localeCompare(prefix))
       document.getElementById('myInput').value = prefix; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-06-02T19:08:34.213

我使用了 max 和 min 然后需要，它对我很有效，但不确定它是否是一种编码方法。

```
<input type="text" maxlength="13" name ="idnumber" class="form-control"  minlength="13" required> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-06-09T19:57:46.920

关注@ **user123444555621**固定答案。

HTML5 中有一个`minlength`属性，但由于某种原因，它可能并不总是按预期工作。

**我有一个案例，我的输入类型文本不服从该`minlength="3"`属性。**

通过使用该`pattern`属性，我设法解决了我的问题。 **这是使用模式来确保最小长度验证的示例：**

```
const folderNameInput = document.getElementById("folderName");

folderNameInput.addEventListener('focus', setFolderNameValidityMessage);
folderNameInput.addEventListener('input', setFolderNameValidityMessage);

function setFolderNameValidityMessage() {
  if (folderNameInput.validity.patternMismatch || folderNameInput.validity.valueMissing) {
      folderNameInput.setCustomValidity('The folder name must contain between 3 and 50 chars');
  } else {
      folderNameInput.setCustomValidity('');
  }
}
```

```
:root {
  --color-main-red: rgb(230, 0, 0);
  --color-main-green: rgb(95, 255, 143);
}

form input {
  border: 1px solid black;
  outline: none;
}

form input:invalid:focus {
  border-bottom-color: var(--color-main-red);
  box-shadow: 0 2px 0 0 var(--color-main-red);
}

form input:not(:invalid):focus {
  border-bottom-color: var(--color-main-green);
  box-shadow: 0 2px 0 0 var(--color-main-green);
}
```

```
<form>
  <input
    type="text"
    id="folderName"
    placeholder="Your folder name"
    spellcheck="false"
    autocomplete="off"

    required
    minlength="3"
    maxlength="50"
    pattern=".{3,50}"
  />
  <button type="submit" value="Create folder">Create folder</button>
</form>
```

**有关更多详细信息**，这里是 HTML 模式属性的 MDN 链接：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/pattern](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/pattern)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-06-08T17:30:50.463

您可以`minlength`在输入标签中使用，也可以使用正则表达式模式来检查字符数，甚至可以输入并检查字符的长度，然后您可以根据您的要求进行限制。

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2017-05-30T08:33:38.083

添加最大值和最小值。您可以指定允许值的范围：

```
<input type="number" min="1" max="999" /> 
```

# html - 画布绘制效果

> ID：10281966
> 
> 赞同：0
> 
> 时间：2012-04-23T13:56:35.337
> 
> 标签：html, html5-canvas

我从一些简单到复杂的画布脚本开始。我想画一个圆圈。这很容易。问题是圆圈是立即绘制的。如果我想让圆圈慢慢变大怎么办（让我们说从一条垂直线到一个半圆，到一个半圆，再到一个完整的圆）画布中有什么方法可以做到这一点（本机）还是我需要做一个建立和删除几个圆圈（快速）来模拟效果的函数？

如果后者是真的，是否有任何我应该注意的性能问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:58:27.470

使用画布的任何形式的动画都需要清除画布并制作序列中的下一个绘图。Mozilla 开发网络有一个很好的关于画布和画布动画的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:28:31.650

查看[animate.js](https://github.com/gopi1410/AnimateJs)库。它正是您所需要的。用法与 jQueryUI 相同。

您需要的可以通过以下代码完成：

```
canvas_element.animateCircle(x,y,r); 
```

还有其他可选参数，例如`animateCircle(x,y,r,{'lineWidth':5, 'lineColour':'red', 'stop': function() {alert('completed');}})`& 其他一些功能。查看自述文件了解详细信息。

# c# - 相当于 PHP 中的 C# HttpRequest

> ID：10281968
> 
> 赞同：1
> 
> 时间：2012-04-23T13:56:41.070
> 
> 标签：c#, php, httprequest

我试图在 PHP 中为当前页面找到等效的 System.Web.HttpRequest，因为我想访问当前变量。大多数，我意识到，你可以从 $_SERVER 获得，但那里似乎缺少一些（例如，Referer 和 cookie）。

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T13:58:23.260

`$_SERVER`在as key中找到Referer `HTTP_REFERER`。

可以通过`$_COOKIE`和访问 Cookie `set_cookie()`。

# c# - 使用 HierarchicalDataTemplate 展开/折叠数据绑定 TreeView 项

> ID：10281975
> 
> 赞同：2
> 
> 时间：2012-04-23T13:56:58.387
> 
> 标签：c#, wpf, treeview, expand, hierarchicaldatatemplate

SO上有很多这种类型的问题，但都回答了，所以我决定创建一个快速的新问题。标题是不言自明的，所以这就是问题所在。树视图：

```
<TreeView>
    <TreeView.Resources>
        <Style TargetType="TreeViewItem">
            <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}" />
            <Setter Property="IsExpanded" Value="{Binding Path=IsExpanded, Mode=TwoWay}" />
            <Setter Property="FontWeight" Value="Normal" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </TreeView.Resources>
</TreeView> 
```

分层数据模板：

```
var labelFactory = new FrameworkElementFactory(typeof(TextBlock));
var template = new HierarchicalDataTemplate(typeof(Node)) { ItemsSource = new Binding("Children") };
labelFactory.SetBinding(TextBlock.TextProperty, new Binding("Text"));
template.VisualTree = labelFactory;
treeView.ItemTemplate = template; 
```

类型我绑定到：

```
public class Node
{
    public List<Node> Children { get; set; }

    public Node Parent { get; set; }

    public bool IsSelected { get; set; }
    public bool IsExpanded { get; set; }
} 
```

实际绑定，正确显示层次结构所需的空白根：

```
var hierarchy = Helpers.GetHierarchy();
var rootNode = new Node();
rootNode.Children.Add(hierarchy);
GVSObjectStructureTreeView.ItemsSource = rootNode.Children; 
```

需要以编程方式选择/扩展特定项目，但是当我这样做时

```
var itemToSelect = FindTreeViewItem(treeView.ItemsSource as List<Node>, elementId);
itemToSelect.IsSelected = true; 
```

什么都没发生。扩展也一样。我想问题出在绑定上，但无法弄清楚。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:33:49.627

重写服务类和问题得到解决。这是我实现的两个递归层次结构助手（可能对其他人有用）：

```
 private static Node FindTreeViewItem(IEnumerable<Node> treeViewItems, string key)
 {
      if (treeViewItems == null) return null;
      foreach (var item in treeViewItems)
      {
         if (item.AssociatedObject.ID.Equals(key))
         {
            return item;
         }
         if (item.Children != null)
         {
            var childItem = FindTreeViewItem(item.Children, key);
            if (childItem != null)
            {
               return childItem;
            }
         }
      }
      return null;
 }

 private static void ExpandTreeViewItemParents(Node treeViewItem)
 {
     if (treeViewItem == null) return;
     if (treeViewItem.Parent != null)
     {
         treeViewItem.Parent.IsExpanded = true;
     }
     ExpandTreeViewItemParents(treeViewItem.Parent);
 } 
```

在点击处理程序中使用如下：

```
var selectedItem = FindTreeViewItem(treeView.ItemsSource as List<Node>, ID);
if (selectedItem != null)
{
     selectedItem.IsSelected = true;
     ExpandTreeViewItemParents(selectedItem);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:00:20.483

它看起来不像你的类[implements](http://msdn.microsoft.com/en-us/library/ms229614.aspx) [`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，所以即使绑定是正确的也不会发生任何事情，除非你为了简洁而省略了它。

# c# - Update-Plugin CRM 2011 上的实体前后图像

> ID：10281976
> 
> 赞同：4
> 
> 时间：2012-04-23T13:56:58.337
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

我希望有人能帮助我解决我一段时间以来一直试图处理的问题。我有一个创建插件和一个更新插件。出于测试目的，我的创建插件（预操作）进行了简单的计算，并在保存后将结果放在字段中。

当我在预操作中注册它并更改我的逻辑字段时，我的更新插件工作正常。但是，如果我只更改其中一个字段（或使表单上的其他字段变脏），我会收到一个错误，即字典中不存在密钥。我已经完成了我的研究，发现您在 Pre 和 Post Entity Image 之间进行了检查，以检查哪些字段已更新，哪些未更新。但是我感到困惑的是，当我这样做时，我需要在 Post-opertion 上注册我的更新插件，这导致我的更新不再工作，如果我在代码末尾执行 service.Update(entity) 它给出我的另一个无限循环错误。在我的更新插件上，我确保我注册了两个图像（前和后）。如果有人可以建议我，我将不胜感激，如何在前后图像之间进行检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:53:36.630

我们需要查看您的代码。但我可以提供简短的解释那里发生了什么。
`service.Update(entity)`再次调用您的插件，因为这是对您的插件注册的实体的另一次更新。为避免这种无限循环，您可以查看[Depth](http://msdn.microsoft.com/en-us/library/bb959585.aspx)属性。对插件的每次新调用都会增加此属性的值。

如果您想知道更新期间更改了哪些属性，只需查看[InputParameters](http://msdn.microsoft.com/en-us/library/bb959586.aspx)。只会有更新的属性值。

实体前图像可用于更新消息，但不适用于创建（在实际创建实体实例之前不可能有图像）。但是在 Create 和 Update 消息的情况下都会显示 Post-Entity 图像。
因此，如果您需要知道更改了哪些属性，请检查 InputParameters。您可以在 Pre-Stage 插件中执行此操作。而值，InputParameters 中的更新将存储在数据库中，因此您不需要调用 service.Update。

# c++ - 成员函数的模板特化

> ID：10281978
> 
> 赞同：4
> 
> 时间：2012-04-23T13:57:02.643
> 
> 标签：c++, templates, compiler-errors, template-specialization, ofstream

我必须在（C++，我使用 MS Visual Studio 2008 SP1）中对类成员函数使用显式特化，但我无法成功编译它。得到

> 错误 C2910: 'File::operator <<' : 不能明确专门化

```
class File
{
   std::ofstream mOutPutFile;
public:
   template<typename T>
   File& operator<<(T const& data);
};

template<typename T>
File& File::operator<< (T const& data)
{
    mOutPutFile << preprosesor(data);
    return *this;
}

template< >
File& File::operator<< <> (std::ofstream& out)
{
   mOutPutFile << out;
   return *this;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:12:18.360

您对 operator << 的显式特化与声明的参数列表不匹配；`T const& data`与`std::ofstream& out`。这是在 MSVC10 中编译的。

```
template<>
File& File::operator<< <std::ofstream> (const std::ofstream& out)
  {
  mOutPutFile << out;
  return *this;
  } 
```

注意`const`在函数参数之前添加。

# python - Python：重新定义了原始的“对象”类。如何找回“对象”类？

> ID：10281984
> 
> 赞同：2
> 
> 时间：2012-04-23T13:57:42.067
> 
> 标签：python, metaclass, python-datamodel

我正在为 Squish 自动化工具使用 python 语言。这个工具用一些自定义对象和函数扩展了 python。这就是他们在[手册](http://doc.froglogic.com/squish/4.2/rgs-py.html)中所说的：

> Squish 特定于 Python 的扩展模块通过在内部执行等效于以下语句的方式自动加载：
> 
> ```
> Python
> import test
> import testData
> import object
> import objectMap
> import squishinfo
> from squish import * 
> ```
> 
> 这意味着除非您正在开发自己的独立模块，否则不必自己导入它们。

通过这样做，**他们会`object`自动**重新定义（到[this](http://doc.froglogic.com/squish/4.2/rgs-squish.html#rgss-objh)），所以我尝试做 New-Style Classes（如`class NewClass(object):`）给我一个错误：

> TypeError：调用元类库时出错。`module.__init__()` 最多接受 2 个参数（给定 3 个）

所以我正在努力`object`挽回。在阅读[了关于元类的精彩文章](https://stackoverflow.com/a/6581949/1167879)后，我尝试`object`使用以下代码获取：

```
class OrigObject:
    __metaclass__ = type

class NewClass(OrigObject):
    pass 
```

`object`我的问题是：这与从原始类继承相同吗？

**更新：**我仅限于使用**Python 2.4**（如果重要的话）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:06:59.473

从您链接的页面：

> Squish 的对象模块与所有 Python 2 新型类和所有 Python 3 类的基类同名。在实践中，这很少是一个问题。**对于 Python 2，我们可以只创建旧样式的类或者做`import __builtin__`和继承`__builtin__.object`而不是 object**。对于 Python 3，不需要做任何事情，因为我们从来没有显式地继承对象，因为如果没有指定其他类，默认情况下它会被继承。

所以：

```
>>> import __builtin__
>>> __builtin__.object
<type 'object'>
>>> class SomeOldStyleClass():
...    pass
... 
>>> SomeOldStyleClass.__subclasses__()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class SomeOldStyleClass has no attribute '__subclasses__'
>>> class SomeClass(__builtin__.object):
...    pass
... 
>>> SomeClass.__subclasses__()
[] 
```

虽然，我会注意到，我认为这对于所述模块的创建者来说是一个非常糟糕的决定，但他们应该把它叫做别的东西。即使它是针对 Python 3.x 的，如果他们为 2.x 分发它，他们应该考虑一下，将其称为其他东西对他们没有害处，并且通过调用它`object`会产生问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:02:11.260

This will get it for you: `basestring.__bases__[0]`.

# php - PHP 和 mySQL，使用当前日期？

> ID：10281986
> 
> 赞同：2
> 
> 时间：2012-04-23T13:57:49.630
> 
> 标签：php, mysql, sql, sql-insert, sql-delete

PHP 和 mySQL 问题我希望你能帮助我。我有一个更新数据库选项（通过单击一个按钮，它运行 update.php 文件），现在这个 update.php 负责尝试分离我的 PASSENGER 表。

目前，我有一个巨大的 PASSENGER 表，如果今天发生业务旅行（它是一家旅行预订公司），那么他们在 CUSTOMER 表中，但我想要任何存档的客户（例如从昨天旅行的任何人向后，放入 ARCHIVED_CUSTOMER 表中。

现在，我有一个小的 PHP 脚本，它使用当前 PASSENGER 表中的信息添加到 ARCHIVED_PASSENGER 表中，但仅限于参数是 PASSENGER ID 的地方。

我对脚本的 DELETE FROM PASSENGER 部分感到非常满意，但想知道是否有人知道允许我从数据库中收集和移动大量信息的代码，其中旅行日期是昨天起等等。它完成了通过 PASSENGER 表的 activeUntil 部分。

**非常精简的 PHP 脚本，但希望我已经说清楚了！**

```
 mysql_connect("localhost", "mysql_username", "mysql_password") or die(mysql_error());
    mysql_select_db("mysql_database") or die(mysql_error());

    $query10 = ("SELECT p.surname, p.passNo, p.activeUntil FROM PASSENGER p WHERE passNo = '20120003'");

            $result = mysql_query($query10);  
            while($row = mysql_fetch_array($result))
            {

$surname =  $row['surname'];
$passNo = $row['passNo']; 

mysql_query("INSERT INTO ARCHIVED_PASSENGER (surname, passNo) VALUES ('$surname', '$passNo')  ") 
    or die(mysql_error());  

    mysql_query("DELETE FROM PASSENGER (surname, passNo) VALUES ('$surname', '$passNo')  ") 
    or die(mysql_error());  

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:03:22.920

`NOW()` in MySQL gives the current timestamp. 24 hours ago is `DATE_ADD(NOW(),INTERVAL -1 DAY)`.

You can compare dates just like numbers: `activeUntil < DATE_ADD(NOW(),INTERVAL -1 DAY)` selects rows where the `activeUntil` was anything before 24 hours ago.

You can combine `INSERT` and `SELECT` like so:

```
INSERT INTO `archived_passenger` (columns.....) SELECT columns... FROM `passenger` WHERE ... 
```

(You can omit the first set of columns if the names of the columns in `achived_passenger` exactly match those in `passenger`, and you can use `*` instead of the second set of columns if you want to select all columns)

I think that should be enough infomation to help you do what you're trying to do. Let me know if you need any additional help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:08:26.930

假设您的“旅行日期”字段被调用`activeUntil`并且它是`DATE`or`DATETIME`数据类型：

```
... WHERE activeUntil >= DATE_ADD(NOW(), INTERVAL -1 DAY) 
```

**编辑：**或者`<=`，取决于“从昨天开始”的意思。

# java - 找不到保存在 WebContent 中的文件

> ID：10281988
> 
> 赞同：1
> 
> 时间：2012-04-23T13:57:54.477
> 
> 标签：java, file-upload

我使用 Glassfish 3 和 Eclipse 作为我的 IDE。

在应用程序中，我开发了一个小文件上传功能，将文件保存在`WebContent`. 我知道这是一种不好的做法，因为每次重新部署时我都会丢失所有文件等等。

该文件保存在：

```
E:\java\server\Glassfish3\glassfish\domains\domain1\eclipseApps\myApp\upload\story\79.png 
```

比我尝试使用以下方法在我的`.xhtml`文件中列出渲染该图片：

```
<img src = "upload/story/79.png" /> 
```

奇怪的是，在 Servlet 端（或在我的情况下为 ManagedBean）决定图像是否存在时，看起来一切正常，并且在磁盘上找到了图像。但是，在浏览器中，图像不会显示，因为它无法加载给定的 URL。

我怎么解决这个问题？

# android - Android：异步事件（意图）处理的设计模式

> ID：10281989
> 
> 赞同：0
> 
> 时间：2012-04-23T13:57:57.387
> 
> 标签：android, design-patterns, android-intent, screen, wifi

我正在开发一个与手机的 WiFi、蓝牙、移动网络交互的应用程序。该应用程序主要是一个服务，GUI 不发挥核心作用。

应用程序的核心和服务类的主要方法是一个接收应用程序需要接收的所有意图的方法：

```
public void handleIntent(Intent intent){ 
```

然后它提取意图的动作并为相应意图的动作调用特定的处理程序方法，例如当接收到**SCREEN_ON**时，它会调用

```
private void handleScreenOn(){ 
```

问题是手机上的某些任务需要一些时间，因此在任务处理过程中可能会发生一些其他事件，那应该改变处理。

例如，打开 Wifi 需要几秒钟，在实际完成之前发送几个意图**WIFI_STATE_CHANGED_ACTION 。**在启用 WiFi 的过程中，用户可以关闭屏幕以便接收**SCREEN_OFF**意图。

现在说我的应用程序的目标是在屏幕关闭时关闭 WiFi。有一种情况会出现问题：

1.  初始情况：屏幕开启，WiFi 关闭
2.  用户切换 WiFi 设置以启用它。Wifi 开始启用
3.  用户几乎立即关闭屏幕
4.  应用收到 SCREEN_OFF 意图但由于 WiFi 尚未启用，因此它认为没有必要禁用它
5.  Wifi 启用完成，尽管屏幕关闭，Wifi 仍保持启用状态。

**如何解决？**

目前，在第 5 步中，当 Wifi 最终启用时，我会测试屏幕是否关闭以再次关闭 wifi。该解决方案需要许多 if / else 处理所有可能的情况。

我敢肯定，必须有一些更清洁的方法，处理一堆意图，或者类似的东西......

任何人都有一些好的设计模式或关于如何干净地完成它的好建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:11:28.517

每当您（异步）完成对某个事件的反应时，请考虑发送“操作完成”事件。现在您可以添加一些逻辑`handleIntent()`来实现一致的状态。逻辑位于组件的中心位置，避免了代码重复。

或者，您可以尝试序列化您的事件：即当发生可能使某些尚未完成的操作的结果无效的事件时（您需要管理未完成操作的列表，可以如上所述检测到完成）将其处理推迟到所有那些动作就完成了。要确定哪些事件可能取决于其他事件，一个简单的静态查找表就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:29:49.003

另一种方法是维护正在管理的实体（全部或仅是异步实体）的状态。对于那些异步的，状态不应该是二进制的（ON|OFF），而是至少有 3 或 4 个状态：ON、TURNING_ON、OFF、TURNING_OFF。然后在您的示例步骤 4 中，当您收到 SCREEN_OFF 时，检查 WIFI 状态 ON 或 TURNING_ON，以确定是否必须将其关闭。

# javascript - 如何使用 d3.data().enter().call()

> ID：10281997
> 
> 赞同：1
> 
> 时间：2012-04-23T13:58:33.800
> 
> 标签：javascript, openlayers, d3.js

我正在尝试将 d3 项目与开放层项目链接。我想要做的是使用 d3 来找出给定节点是否存在于我的 DOM 中。

如果存在，我使用过渡。如果它不存在，我需要通过 openlayers API 插入节点。这是必需的，因为节点已向 openlayers 注册。我最初的想法是调用 d3.data( ).enter( ).call( myInsertFunction() ) 但这似乎不起作用。我希望有人可以帮助我或为我指明正确的方向。我对 d3 库相当陌生。

```
function insertNewFeature(d) {
    var word = d;
    var pixel = new OpenLayers.Pixel(word.x,word.y);
    var lonlat = map.getLonLatFromPixel(pixel);
    var point = new OpenLayers.Geometry.Point(lonlat.lon,lonlat.lat);
    var feature = new OpenLayers.Feature.Vector(point);
    feature.id = word.city+'_'+word.text,
    feature.attributes = {
        text: word.text,
        sentiment: word.sentiment,
        count: word.count
    };
    feature.style = {
        label: word.text,
        labelAlign: 'mm',
        fontColor:  word.color,
        fontFamily: word.font,
        fontSize: word.size,
        rotation: word.rotate,
        strokeColor: '#FFFFFF',
        strokeWidth: 1,
        strokeOpacity: 0.5
    }
    svgLayer.addFeatures([feature]);
}

function update(data)
{
    var text = d3.select("OpenLayers.Layer.Vector_4_troot").selectAll("text").data(data, function(d) { return d.cityCode + "_" + d.text.toLowerCase() });

    text.transition()
        .duration(1000)
        .attr("transform", function(d) { return "translate(" + [ d.x , d.y ] + ")rotate(" + d.rotate + ")"; });
    //text.style("font-size", function(d) { return d.size + "px"; });
    text.enter().call(insertNewFeature());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:18:32.220

试试这个jsfiddle：http: [//jsfiddle.net/Q8b2z/](http://jsfiddle.net/Q8b2z/)

我不肯定为什么，但你不能调用`call`. `text.enter()`相反，它应该可以调用类似的`insertNewFeature(text.enter())`.

# java - AIX7.1中Java启动很慢

> ID：10281998
> 
> 赞同：9
> 
> 时间：2012-04-23T13:58:33.957
> 
> 标签：java, performance, aix

AIX 64 位，7G 内存

```
$ uname -a
AIX server3 1 7 00036073D600

$ java -version
java version "1.6.0"
Java(TM) SE Runtime Environment (build pap6460_26sr1-20111114_01(SR1))
IBM J9 VM (build 2.6, JRE 1.6.0 AIX ppc64-64 20111113_94967 (JIT enabled, AOT enabled)
J9VM - R26_Java626_SR1_20111113_1649_B94967
JIT  - r11_20111028_21230
GC   - R26_Java626_SR1_20111113_1649_B94967
J9CL - 20111113_94967)
JCL  - 20111112_01

$ time /opt/IBM/WebSphere/AppServer/java/bin/java
...
real    0m40.62s
user    0m0.43s
sys     0m0.04s 
```

在没有任何应用程序的情况下启动 java 命令需要 40 秒。JRE（64 位）是 WebSphere V8 的一部分，需要 20 分钟。启动应用程序服务器。

在同一个 AIX 中，还有另一个 JRE（32 位），它工作得很好。

```
$ /usr/java6/bin/java -version
java version "1.6.0"
Java(TM) SE Runtime Environment (build pap3260sr9fp2-20110627_03(SR9 FP2))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 AIX ppc-32 jvmap3260sr9-20110624_85526 (JIT enabled, AOT enabled)
J9VM - 20110624_085526
JIT  - r9_20101028_17488ifx17
GC   - 20101027_AA)
JCL  - 20110530_01

$ time /usr/java6/bin/java
real    0m0.70s
user    0m0.64s
sys     0m0.05s 
```

我发现了一些使用 truss 的东西。当 java 要启动时，它在 thread_tsleep() 处被阻塞了很长时间。为什么？如何纠正它？

```
kopen("/etc/irs.conf", O_RDONLY)                Err#2  ENOENT
_thread_self()                                  = 26738737
getdomainname(0x09001000A00E44F8, 1024)         = 0
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
getdomainname(0x09001000A00E44F8, 1024)         = 0
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
kopen("/etc/hesiod.conf", O_RDONLY)             Err#2  ENOENT
_thread_self()                                  = 26738737
getdomainname(0x09001000A00E44F8, 1024)         = 0
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
getdomainname(0x09001000A00E44F8, 1024)         = 0
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
getdomainname(0x09001000A00E44F8, 1024)         = 0
_thread_self()                                  = 26738737
_thread_self()                                  = 26738737
socket(2, 2, 0)                                 = 4
getsockopt(4, 65535, 4104, 0x000001001012A934, 0x000001001012A930) = 0
connext(4, 0x00000100103F37B8, 16)              = 0
_esend(4, 0x000001001012B860, 40, 0, 0x0000000000000000) = 40
_poll(0x000001001012AA00, 1, 5000)              = 1
_enrecvfrom(4, 0x000001001012CBB0, 1024, 0, 0x000001001012B1C0, 0x000001001012A9E8, 0x0000000000000000) = 56
close(4)                                        = 0
socket(2, 2, 0)                                 = 4
getsockopt(4, 65535, 4104, 0x000001001012A934, 0x000001001012A930) = 0
connext(4, 0x00000100103F37B8, 16)              = 0
_esend(4, 0x000001001012B860, 40, 0, 0x0000000000000000) = 40
_poll(0x000001001012AA00, 1, 5000)              = 1
_enrecvfrom(4, 0x000001001012CBB0, 1024, 0, 0x000001001012B1C0, 0x000001001012A9E8, 0x0000000000000000) = 94
_esend(4, 0x000001001012B860, 25, 0, 0x0000000000000000) = 25
_poll(0x000001001012AA00, 1, 5000)              = 1
_enrecvfrom(4, 0x000001001012CBB0, 1024, 0, 0x000001001012B1C0, 0x000001001012A9E8, 0x0000000000000000) = 25
close(4)                                        = 0
socket(2, 2, 0)                                 = 4
_esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F37C8, 16, 0x0000000000000000) = 25
thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
_poll(0x000001001012AA00, 1, 5000)              = 0
close(4)                                        = 0
socket(2, 2, 0)                                 = 4
_esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F37C8, 16, 0x0000000000000000) = 25
thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
_poll(0x000001001012AA00, 1, 5000)              = 0
close(4)                                        = 0
socket(2, 2, 0)                                 = 4
_esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F37C8, 16, 0x0000000000000000) = 25
thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
_poll(0x000001001012AA00, 1, 10000)             = 0
close(4)                                        = 0
socket(2, 2, 0)                                 = 4
_esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F37C8, 16, 0x0000000000000000) = 25
thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
_poll(0x000001001012AA00, 1, 20000)             = 0
close(4)                                        = 0
getdomainname(0x000001001012CD10, 256)          = 0
kopen("/etc/hosts", O_RDONLY)                   = 4
kioctl(4, 22528, 0x0000000000000000, 0x0000000000000000) Err#25 ENOTTY
kfcntl(4, F_SETFD, 0x0000000000000001)          = 0
kioctl(4, 22528, 0x0000000000000000, 0x0000000000000000) Err#25 ENOTTY
kread(0x0000000000000004, 0x0000010010416538, 0x0000000000001000) = 0x00000000000007B0
     0x00000000: " #   = = = = = = = = = ="..
kread(0x0000000000000004, 0x0000010010416538, 0x0000000000001000) = 0x0000000000000000
     0x00000000: " #   = = = = = = = = = ="..
close(4)                                        = 0
__libc_sbrk(0x0000000000020020)                 = 0x0000010010421C20 
```

带时间戳

```
1.8662:        socket(2, 2, 0)                  = 4
1.8666:        _esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F38A8, 16, 0x0000000000000000) = 25
3.8671:        thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
1.8669:        _poll(0x000001001012AA00, 1, 5000) = 0
6.8705:        close(4)                         = 0
6.8710:        socket(2, 2, 0)                  = 4
6.8715:        _esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F38A8, 16, 0x0000000000000000) = 25
8.8723:        thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
6.8720:        _poll(0x000001001012AA00, 1, 5000) = 0
11.8726:        close(4)                        = 0
11.8729:        socket(2, 2, 0)                 = 4
11.8732:        _esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F38A8, 16, 0x0000000000000000) = 25
13.8738:        thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
11.8736:        _poll(0x000001001012AA00, 1, 10000) = 0
21.8741:        close(4)                        = 0
21.8744:        socket(2, 2, 0)                 = 4
21.8748:        _esendto(4, 0x000001001012B860, 25, 0, 0x00000100103F38A8, 16, 0x0000000000000000) = 25
23.8754:        thread_tsleep(0, 0x09001000A030F400, 0x0000000000000000, 0x0000000000000000) (sleeping...)
21.8752:        _poll(0x000001001012AA00, 1, 20000) = 0
41.8756:        close(4)                        = 0
41.8760:        getdomainname(0x000001001012CD10, 256) = 0
41.8763:        kopen("/etc/hosts", O_RDONLY)   = 4
41.8767:        kioctl(4, 22528, 0x0000000000000000, 0x0000000000000000) Err#25 ENOTTY
41.8770:        kfcntl(4, F_SETFD, 0x0000000000000001) = 0
41.8773:        kioctl(4, 22528, 0x0000000000000000, 0x0000000000000000) Err#25 ENOTTY
kread(0x0000000000000004, 0x0000010010416618, 0x0000000000001000) = 0x00000000000007B0
     0x00000000: " #   = = = = = = = = = ="..
kread(0x0000000000000004, 0x0000010010416618, 0x0000000000001000) = 0x0000000000000000
     0x00000000: " #   = = = = = = = = = ="..
41.8782:        close(4)                        = 0 
```

tp

```
Quit in sem_wait at 0x9000000002632d8 ($t3)
0x9000000002632d8 (sem_wait+0x98) e8410028          ld   r2,0x28(r1)

 thread  state-k     wchan            state-u    k-tid mode held scope function
>$t1     run                          blocked  31391751   u   no   sys  _event_sleep
_event_sleep(??, ??, ??, ??, ??, ??) at 0x9000000008365c4
_event_wait(??, ??) at 0x900000000837064
_cond_wait_local(??, ??, ??) at 0x90000000084521c
_cond_wait(??, ??, ??) at 0x900000000845808
pthread_join(??, ??) at 0x90000000082d2b0
unnamed block in ContinueInNewThread(continuation = 0x6c6f636b6c002e66, stack_size = 7310577395057127012, args = 0x5f6f72002e666574), line 2286 in "java_md.c"
ContinueInNewThread(continuation = 0x6c6f636b6c002e66, stack_size = 7310577395057127012, args = 0x5f6f72002e666574), line 2286 in "java_md.c"
unnamed block in main(argc = 0, argv = 0x000001001000c178), line 532 in "java.c"
main(argc = 0, argv = 0x000001001000c178), line 532 in "java.c"

 thread  state-k     wchan            state-u    k-tid mode held scope function
>$t2     run                          running  54329549   u   no   sys  __fd_poll
__fd_poll(??, ??, ??) at 0x90000000012c0d4
res_send.poll(??, ??, ??) at 0x9000000001021ac
res_nsend(0x100103f37a8, 0x1001012b860, 0x1900000019, 0x1001012cbb0, 0x40000000400) at 0x9000000001011d4
res_nquery(??, ??, ??, ??, ??, ??) at 0x90000000012b5d8
res_nquerydomain(??, ??, ??, ??, ??, ??, ??) at 0x90000000012ab14
res_nsearch(??, ??, ??, ??, ??, ??) at 0x90000000012af08
res_search(??, ??, ??, ??, ??) at 0x900000000107b50
dns_ho.ho_byname2(??, ??, ??) at 0x90000000013a384
gen_ho.ho_byname2(??, ??, ??) at 0x900000000163888
gethostbyname2(??, ??) at 0x9000000001060ec
getaddrinfo2(??, ??, ??, ??, ??) at 0x900000000102ba0
getaddrinfo(??, ??, ??, ??) at 0x900000000104d34
j9sock_getaddrinfo() at 0x9000000053caad8
populateRASNetData() at 0x900000005347fc0
VMInitStages() at 0x9000000053086b0
runJ9VMDllMain() at 0x90000000530bb9c
pool.pool_do() at 0x9000000052f29c8
runInitializationStage() at 0x90000000530b890
protectedInitializeJavaVM() at 0x900000005306478
j9sig_protect() at 0x9000000053a2b9c
initializeJavaVM() at 0x90000000530585c
jniinv.JNI_CreateJavaVM() at 0x90000000530ea14
jvm.JNI_CreateJavaVM() at 0x900000000ccc510
redirector.JNI_CreateJavaVM() at 0x900000000cb5574
InitializeJVM(pvm = (nil), penv = (nil), ifn = (nil)), line 1801 in "java.c"
main(argc = 0, argv = (nil)), line 810 in "java.c"

 thread  state-k     wchan            state-u    k-tid mode held scope function
>$t3     run                          running  52887625   k   no   sys  sem_wait
sem_wait(??) at 0x9000000002632d8
asynchSignalReporter() at 0x9000000053a3dcc
thread_wrapper() at 0x900000000d00ad0

!!!! ThreadDump Completed- detached from debugger !!!! 
```

更新

我找到了这个主题，并在我的 AIX 上测试了该程序。使用主机名时，DNS 查询延迟了大约 40 秒。IP 地址正常。

[Java 无法从 AIX 解析 DNS 地址：UnknownHostException](https://stackoverflow.com/questions/967717/java-cannot-resolve-dns-address-from-aix-unknownhostexception)

顺便说一句，主机名显示 server3，当我 ping 名称时，它显示： PING server3.cf1.xx.xxxx.com .....我使用 server3.cf1.xx.xxxx.com 运行程序，有没有延迟。

**更新2：**

这是IPV6的问题。如果我添加 -Djava.net.preferIPv4Stack=true，java 应用程序运行良好。但是java命令仍然使用IPV6来查询DNS。所以java命令有40s延迟，java应用程序在DNS查询上没有延迟。

我可以在 AIX 中将默认协议设置为 IPV4，而不是 java 参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:08:04.673

我对此不是 100% 确定，但至少值得一试：

在 AIX 上，32 位 Java VM 使用 IPv4 作为默认 IP 协议，而 64 位 VM 使用 IPv6。如果在操作系统中启用了 IPv6，但配置不正确，则 64 位 VM 可能会在不同的点上挂起，实际上它正在等待网络超时。这似乎与您的分析与桁架相匹配。

您可以通过在 java 命令中添加以下选项来尝试以 IPv4 作为首选网络堆栈来启动 64 位 VM：

-Djava.net.preferIPv4Stack=true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T02:03:55.710

知道了。

要解决此问题，请通过在 /etc/netsvc.conf 文件中添加以下行来禁用 IPV6 查找：

主机=本地4，绑定4

参考： [AIX 上的客户端为新连接生成过多的 IPV6 DNS 查找](http://www-01.ibm.com/support/docview.wss?uid=swg21212940)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:05:55.400

很难从你的 truss 输出中弄清楚什么需要很长时间（也许看看你是否可以在其输出中添加时间戳，我认为 truss 可以做到这一点），但是有很多 getdomainname 活动，这始终是调查时的主要嫌疑人奇怪的启动延迟。检查是否有分配给此框的无效主机名，确保主主机名在 /etc/hosts 中解析为 127.0.0.1。