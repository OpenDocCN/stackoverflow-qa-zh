# StackOverflow 问答 10314000-10314999

# codeigniter - PHPUnit + CodeIgniter 多个同名对象

> ID：10314014
> 
> 赞同：0
> 
> 时间：2012-04-25T10:41:51.857
> 
> 标签：codeigniter, phpunit

我目前使用 CIUnit (https://bitbucket.org/kenjis/my-ciunit) 使用 phpunit 测试我的 CodeIgniter 应用程序。问题是我有多个同名的控制器。我在根控制器目录中有一个名为“Blog”的控制器，并且在控制器/ajax/ 目录中有一个名为“Blog”的控制器。原因是将所有 ajax 请求与主控制器分开。

当我对这两个文件运行测试时，我收到以下错误：

> PHP致命错误：无法在...中重新声明类博客

好吧，我收到这个错误并不感到惊讶。

我有什么办法来解决这个问题？

1.  ajax 目录中的控制器前缀为“ajax”（看起来只是有点愚蠢的 url/ajax/ajax_blog）
2.  使用命名空间（我想我也需要命名空间 codeigniter）
3.  创建 3 个单独的 phpunit.xml 文件

这不是我正在寻找的真正解决方案。我还有其他选择吗？是否有可能以某种方式单独运行每个测试套件，但仍然在一个命令中？我可以在测试套件之间“清理”对象吗？还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:56:40.093

除了您提到的那些之外，没有其他选项，因为在 PHP 中“卸载”类定义是不可能的。

当您正常运行 CI 时，将两个控制器命名为相同不是问题，因为每个请求只实例化一个控制器，但应该避免这种情况。

如果它只是您不喜欢的 ajax-url，则可以在路由中覆盖它（in `config/routes.php`）：

```
$routes['ajax/blog'] = 'ajax/ajax_blog'; 
```

# linux - 从另一个用户命令获取输出

> ID：10314018
> 
> 赞同：0
> 
> 时间：2012-04-25T10:42:15.907
> 
> 标签：linux, command-line-interface

我正在尝试集成两个软件 - 一个是 Web 应用程序，第二个是命令行应用程序。问题是 CLI 应用程序必须以不同于 Web 服务器的用户身份运行。但是，我需要从 CLI 应用程序检索输出并将其传递给 Web 应用程序。我正在考虑使用某种缓冲文件，但是当一个应用程序无法读取/写入文件而另一个应用程序正在使用它时，我害怕崩溃。

我确定我曾经见过类似的解决方案，但我不记得了。任何帮助都是有价值的。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:06:21.263

使用 sudo 运行或在命令行应用程序上设置适当的所有者和 suid 位？

# dns - dns 到 directadmin ip 地址：端口

> ID：10314021
> 
> 赞同：1
> 
> 时间：2012-04-25T10:42:23.313
> 
> 标签：dns, subdomain, port, ip-address

现在我有一个安装了 DirectAdmin 的 VPS，默认情况下通过转到`31.154.241.12:2222`（示例 ip）来访问 DirectAdmin。

我正在尝试设置一个将转发`da.mysite.com`到`31.154.241.12:2222`. 在托管公司坐下来并没有给出任何错误，但是当我尝试将此行添加到我的 DirectAdmin DNS 设置时，它会给出以下错误：

无法添加记录 - 值必须是 IP 地址

这样做会给我的客户更好的使用质量，他们觉得我提供了所有的服务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:48:55.137

DNS 服务器只是将您的主机名 (da.mysite.com) 解析为 IP (31.154.241.12)。它对您的端口号一无所知。

要实现您所描述的，您必须设置某种代理...如果您正在使用它，请阅读 Apache 中的 mod_proxy 并使用 RewriteRule 实现从 hostname.com:5222 到 da.hostname.com 的重定向， 例如。

# scroll - 在 MonoTouch.DIalog 中找不到如何向 DialogControllerView 添加滚动事件

> ID：10314026
> 
> 赞同：3
> 
> 时间：2012-04-25T10:42:35.253
> 
> 标签：scroll, monotouch.dialog

我目前正在使用 Monotouch.Dialog 并且我有一个很大的项目列表。我不想立即加载所有数据，所以我（在 monodroid 上）实现了一个 LoadMore 方法，当我滚动到列表底部时，该方法会在我的列表中加载更多数据（结束前的 20 个元素，我 LoadMore ）。

所以我的问题是，如何在我的 DialogControllerView 上实现 ScrollListener 对 Monotouch 做同样的事情？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:04:50.613

因为 uitableview 是 uiscrollview 的子类，所以可以使用 uiscrollviewdelegate

```
this.TableView.Scrolled += (sender, e) => {}; 
```

我认为这应该适合你。

# http - 如何从 Java 中的 ftp 服务器获取文件 http 地址？

> ID：10314028
> 
> 赞同：0
> 
> 时间：2012-04-25T10:42:55.013
> 
> 标签：http, ftp

我的程序在 ftp 服务器中上传了一张图片，我需要获取图片的 http 地址。我该怎么做才能使其动态且独立于特定服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:45:30.613

没有任何东西说它*有*一个 HTTP 地址，如果有，它就完全在服务器配置的控制之下。没有定义的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:45:51.907

不存在将 http 地址与 ftp 地址相关联的任何固定规则。而且它不依赖于Java。

这只是一个配置问题，无论您使用什么语言；当您在 ftp 服务器上上传文件时，您必须知道该文件是否可以通过 HTTP 服务器访问，以及它将具有什么地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:51:45.280

ftp 服务器和 http 服务器上的路径不相关。我能想到的唯一解决方案是：

1.  了解 HTTP 和 FTP 服务器的“服务器根路径”
2.  知道相对于这个根的路径
3.  将这两者结合到完整路径

然而，不能保证它在每种情况下都有效。它依赖于您可以建立服务器根目录的手动映射这一事实（请参阅 EJP 的答案）。

# language-agnostic - 在矩阵中聚类相似的值

> ID：10314031
> 
> 赞同：2
> 
> 时间：2012-04-25T10:43:05.733
> 
> 标签：language-agnostic, matrix, analysis, similarity

我有一个有趣的问题，我确信有一个优雅的算法可以解决这个问题，但我无法简洁地描述它，这将有助于找到这样的算法。

我有一个比较值的对称矩阵，例如：

```
-104.2732   -180.3972   -130.6969   -160.8333   -141.5499   -139.2758   -144.7697   -114.0545   -117.6409   -140.1391
-180.3972   -93.05421   -171.618    -162.0157   -156.8562   -156.3221   -159.9527   -163.2649   -170.127    -153.2709
-130.6969   -171.618    -101.1591   -154.4978   -143.6272   -116.3477   -137.2391   -125.5645   -128.9505   -131.6046
-160.8333   -162.0157   -154.4978   -96.96312   -122.7894   -141.5103   -127.7861   -149.6883   -153.0445   -130.2555
-141.5499   -156.8562   -143.6272   -122.7894   -101.7487   -141.451    -123.9087   -138.7041   -139.2517   -125.3494
-139.2758   -156.3221   -116.3477   -141.5103   -141.451    -99.99486   -134.6553   -132.7735   -138.7249   -134.1319
-144.7697   -159.9527   -137.2391   -127.7861   -123.9087   -134.6553   -100.0683   -141.3492   -138.0292   -120.5331
-114.0545   -163.2649   -125.5645   -149.6883   -138.7041   -132.7735   -141.3492   -106.8555   -115.58 -139.3355
-117.6409   -170.127    -128.9505   -153.0445   -139.2517   -138.7249   -138.0292   -115.58 -104.9484   -140.4741
-140.1391   -153.2709   -131.6046   -130.2555   -125.3494   -134.1319   -120.5331   -139.3355   -140.4741   -101.3919 
```

对角线将始终显示最高分（因为它是自我比较）。但是我知道这些值中的一些代表相同的项目。快速浏览一下矩阵，我可以看到（并且已经手动确认）项目 0、7 和 8 以及 2 和 5 以及 3、4、6 和 9 都标识相同的项目。

现在我想做的是找到一个优雅的解决方案，如何将它们聚集在一起以产生 4 个集群。

有人知道这样的算法吗？任何帮助都将不胜感激，因为我似乎非常接近解决我的问题，但在这最后一个绊脚石上绊倒了:(

干杯!

# c# - 具有多个结果集的 Entity Framework 5 存储过程

> ID：10314032
> 
> 赞同：6
> 
> 时间：2012-04-25T10:43:09.633
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-framework-5

我目前正在使用 asp.net mvc 4.5 和 EF5 Beta 2 进行编码，并且我有一个返回多个结果集的存储过程。我找到[了这个站点](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-multiple-result-sets-from-stored-procedure.aspx)，它说新版本（我正在使用）已经支持多个结果集。

现在我似乎找不到那种支持。由于我对 EF 完全陌生，我希望我没有做错什么。

对于创建的结果集，我的数据库中没有对应的实体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T18:39:44.277

核心 EF 库支持多结果集过程。不幸的是，设计师没有——而且还不清楚它是否会在发布时。

我也发现文档有点稀疏，特别是返回多个实体类型（而不是复杂类型）。幸运的是，手动编辑 EDMX 并不太复杂。我写了一篇关于主题的博客文章......

[Entity Framework 5 – 来自存储过程的多个实体类型的结果集](http://milesquaretech.com/Blog/post/2012/03/19/Entity-Framework-5-%E2%80%93-Multiple-Entity-Typed-Result-Sets-from-a-Stored-Procedure.aspx)（*注意，我的服务器可能需要几分钟才能启动磁盘，因为没有太多人访问我不起眼的小博客*）。

它的短处是在 CSDL 部分..

```
<edmx:ConceptualModels>
  <Schema Namespace="myModel" ...>
    <EntityContainer Name="myModelEntities" ....>
    ......
    <!-- 
     this is what “function import” wrote, that I’m overwriting…         
     FunctionImport Name="MyMARS_Proc" ReturnType="Collection(myModel.Table_A)"/>
     -->
     <FunctionImport Name="MyMARS_Proc" >
        <ReturnType Type="Collection(myModel.Table_A)" EntitySet="Table_As"/>
        <ReturnType Type="Collection(myModel.Table_B)" EntitySet="Table_Bs"/>
     </FunctionImport> 
```

然后在 MSL（CS 映射部分）中，您会想要...

```
<edmx:Mappings>
  <Mapping Space="C-S" ....>
    <EntityContainerMapping  ....>

       <FunctionImportMapping FunctionImportName="MyMARS_Proc"
                               FunctionName="myModel.Store.MyMARS_Proc">
            <ResultMapping>
                <EntityTypeMapping  TypeName="myModel.Table_A"/>
            </ResultMapping>
            <ResultMapping>
                <EntityTypeMapping TypeName="myModel.Table_B"/>
            </ResultMapping>
       </FunctionImportMapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:43:03.427

这是一个很有趣的问题。我使用 .NET 4.5 Beta / VS11 Beta 玩了一段时间，我有两个观察结果：

*   看起来设计器不支持多个结果集 - 必须在以 XML 格式打开的 EDMX 中手动映射所有内容
*   看起来以前关于 June CTP 2011 的文章不再有效，因为 MSL 不允许声明多个`ResultMapping`以映射不同的结果集，并且每个`ResultMapping`只能映射单个结果集

**编辑：**

我错了。它在运行时工作。只有设计师抱怨 EDMX 验证，但 MSL 本身接受多个`ResultMapping`元素。问题中链接的原始演练仍然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T23:57:14.220

我做了这个代码

程序如下

```
 alter procedure dbo.proc_getmorethanonetable

          as
       select * from dbo.Orders
      select * from dbo.Items
     select * 
      from dbo.Users u
      inner join dbo.Orders o 
        on o.User_ID = u.User_ID
  go 
```

代码很简单，我们开始吧

```
 using (var db = new EF_DEMOEntities())
              {
                   var cmd = db.Database.Connection.CreateCommand();
                    cmd.CommandText = "[dbo].[proc_getmorethanonetable]";
                     try
                       {
                            db.Database.Connection.Open();
                            using (var reader = cmd.ExecuteReader())
                           {
                                 var orders =            
                                 ((IObjectContextAdapter)db).ObjectContext.Translate<Order>(reader);
                                 GridView1.DataSource = orders.ToList();
                                 GridView1.DataBind();
                                 reader.NextResult();
                                var items =  
                           ((IObjectContextAdapter)db).ObjectContext.Translate<Item>(reader);
                              GridView2.DataSource = items.ToList();
                              GridView2.DataBind();

                            }
                        }
                       finally
                       {
                            db.Database.Connection.Close();
                       }
                       } 
```

给你：）

# objective-c - 为什么 protocol_* 方法不适用于 Linux 上的 Clang + 现代 GCC-Runtime？

> ID：10314035
> 
> 赞同：12
> 
> 时间：2012-04-25T10:43:23.807
> 
> 标签：objective-c, clang, objective-c-runtime

我试图将我的一些 Objective-C 项目从 GCC 切换到 Linux 上的 Clang。我使用了 GCC 4.6.2 运行时，因为 Clang 编译器没有附带一个。编译和链接工作，但使用`protocol_*`方法时，它们不起作用。

以下示例适用于 GCC，但不适用于 Clang：

```
#include <objc/runtime.h>
#include <stdio.h>

@protocol MyProtocol
+ aClassMethod;
- anInstanceMethod;
@end

void doIt(Protocol *p, SEL sel)
{
    printf("the protocol: %p\n", p);
    if (!p) return;
    printf("the protocol's name: %s\n", protocol_getName(p));
    struct objc_method_description d = protocol_getMethodDescription(p, sel, YES, YES);
    printf("required: YES instance: YES → %p\n", d.name);
    d = protocol_getMethodDescription(p, sel, YES, NO);
    printf("required: YES instance: NO → %p\n", d.name);
    d = protocol_getMethodDescription(p, sel, NO, YES);
    printf("required: NO instance: YES → %p\n", d.name);
    d = protocol_getMethodDescription(p, sel, NO, NO);
    printf("required: NO instance: NO → %p\n", d.name);
}

int main(int argc, char **argv)
{
    Protocol *p1 = @protocol(MyProtocol);
    printf("P1\n");
    printf("class method first:\n");
    doIt(p1, @selector(aClassMethod));
    printf("instance method follows:\n");
    doIt(p1, @selector(anInstanceMethod));

    Protocol *p2 = objc_getProtocol("MyProtocol");
    printf("P2\n");
    printf("class method first:\n");
    doIt(p2, @selector(aClassMethod));
    printf("instance method follows:\n");
    doIt(p2, @selector(anInstanceMethod));

    printf("done\n");
    return 0;
} 
```

GCC 编译程序的预期输出：

```
P1
class method first:
the protocol: 0x804a06c
the protocol's name: MyProtocol
required: YES instance: YES → (nil)
required: YES instance: NO → 0x804b530
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
instance method follows:
the protocol: 0x804a06c
the protocol's name: MyProtocol
required: YES instance: YES → 0x804b528
required: YES instance: NO → (nil)
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
P2
class method first:
the protocol: 0x804a06c
the protocol's name: MyProtocol
required: YES instance: YES → (nil)
required: YES instance: NO → 0x804b530
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
instance method follows:
the protocol: 0x804a06c
the protocol's name: MyProtocol
required: YES instance: YES → 0x804b528
required: YES instance: NO → (nil)
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
done 
```

Clang 编译程序的意外输出：

```
P1
class method first:
the protocol: 0x804a050
the protocol's name: (null)
required: YES instance: YES → (nil)
required: YES instance: NO → (nil)
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
instance method follows:
the protocol: 0x804a050
the protocol's name: (null)
required: YES instance: YES → (nil)
required: YES instance: NO → (nil)
required: NO instance: YES → (nil)
required: NO instance: NO → (nil)
P2
class method first:
the protocol: (nil)
instance method follows:
the protocol: (nil)
done 
```

这里有什么问题？是否有一些神奇的初始化代码在使用 Clang 时不会被调用？

**[更新]**

当添加如下协议的实现时，该`objc_getProtocol()`方法有效，但`protocol_*`方法仍然无效。

```
@interface MyInstance <MyProtocol>
@end

@implementation MyInstance

+ aClassMethod
{
    return nil;
}

- anInstanceMethod
{
    return nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:56:31.943

在我的测试中，GCC 与它包含的 GNU libobjc 配合得很好，但 Clang 与 GNUstep libobjc2 配合得更好。

包含 GNU libobjc 的 GCC 4.6：通过

```
P1
类方法优先：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：YES 实例：NO → 0x10eda50
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → 0x10eda40
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
P2
类方法优先：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：YES 实例：NO → 0x10eda50
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → 0x10eda40
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
完毕

```

带有 libobjc2 1.6 的 GCC 4.6：失败

```
P1
类方法优先：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：YES 实例：NO → 0x6020a0
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602120
协议名称：MyProtocol
必需：YES 实例：YES → 0x6020b0
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
P2
类方法优先：
协议：（无）
实例方法如下：
协议：（无）
完毕

```

带有 GCC 4.6 GNU libobjc 的 Clang 3.1：失败

```
P1
类方法优先：
协议：0x602080
协议名称：（空）
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602080
协议名称：（空）
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
P2
类方法优先：
协议：（无）
实例方法如下：
协议：（无）
完毕

```

带有 libobjc2 1.6 的 Clang 3.1：通过

```
P1
类方法优先：
协议：0x602080
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602080
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
P2
类方法优先：
协议：0x602080
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
实例方法如下：
协议：0x602080
协议名称：MyProtocol
必需：YES 实例：YES → (nil)
必需：是实例：否→（无）
必需：否实例：是→（无）
必需：NO 实例：NO → (nil)
完毕

```

# php - PHP MySQL - 未考虑字符集

> ID：10314038
> 
> 赞同：0
> 
> 时间：2012-04-25T10:43:31.790
> 
> 标签：php, mysql, character-encoding

我有一个使用 pdo 将数据插入 mysql 数据库的 php 文件。当我尝试在我`référencé`的一个表的字段中插入单词时，它在 mysql 中显示，就像`rÃ©fÃ©rencÃ©`
我没有得到它一样，因为我在任何地方都将字符集指定为 utf-8。见下文。

1.  我的表设置为 innodb utf-8
2.  我的字段设置为 utf8_general_ci
3.  在我的 php 脚本的顶部，我放
    了一个。`header('Content-Type: text/html; charset=utf-8');`
    湾。`mysql_set_charset('utf8');`
    C。`mysql_query("SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'");`

在我的 pdo 连接函数下面：

```
function connexion($host, $user, $pass, $db){
    $db_host = $host;  
    $db_user = $user;  
    $db_password = $pass;  
    $db_database = $db;               
    return $connexion = new PDO("mysql:host=$db_host;dbname=$db_database", $db_user, $db_password);
} 
```

希望有人能帮助我理解。先感谢您。干杯。马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:57:24.410

好吧，显然您没有为您的 PDO 连接设置连接编码。这样做：

```
return new PDO("mysql:host=$db_host;dbname=$db_database",
               $db_user,
               $db_password,
               array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8')); 
```

请参阅[http://php.net/manual/en/ref.pdo-mysql.connection.php](http://php.net/manual/en/ref.pdo-mysql.connection.php)。

# django - 带有 zc.buildout 的 Django 1.4 开发环境

> ID：10314040
> 
> 赞同：3
> 
> 时间：2012-04-25T10:43:47.993
> 
> 标签：django, buildout

我正在尝试使用以下指南为 Django 1.4 项目创建开发环境：

[http://www.stereoplex.com/blog/a-django-development-environment-with-zc-buildout](http://www.stereoplex.com/blog/a-django-development-environment-with-zc-buildout)

**指南的virtualenv**部分运行正常，输出如下：

```
virtualenv project
New python executable in project\Scripts\python.exe
Installing setuptools................done.
Installing pip...................done. 
```

之后我就可以激活开发环境了。现在我创建名为**Source的目录，将****bootstrap.py**下载到其中并创建一个包含以下内容的**buildout.cfg ：**

```
[buildout]
parts = 
```

并运行 bootstrap.py 得到以下结果：

```
Creating directory 'C:\\Dropbox\\XYZ\\project\\Source\\bin'.            
Creating directory 'C:\\Dropbox\\XYZ\\project\\Source\\parts'.          
Creating directory 'C:\\Dropbox\\XYZ\\project\\Source\\eggs'.           
Creating directory 'C:\\Dropbox\\XYZ\\project\\Source\\develop-eggs'.   
Generated script 'C:\\Dropbox\\XYZ\\project\\Source\\bin\\buildout'. 
```

问题部分来了 -**安装 Django**我将 buildout.cfg 配置为以下内容并运行引导程序创建的 bin\buildout：

```
[buildout]
parts = django

[django]
recipe = djangorecipe
version = 1.4 
```

运行 bin\buildout 后，出现以下错误：

```
(project) C:\Dropbox\XYZ\project\Source>bin\buildout.exe                      
Traceback (most recent call last):           

File "C:\Dropbox\XYZ\project\Source\bin\buildout-script.py", line 15, in <module>                                                                               import site # imports custom buildout-generated site.py                       

File "C:\Dropbox\XYZ\project\Source\parts\buildout\site.py", line 601, in <module>                                                                              main()                                                                        

File "C:\Dropbox\XYZ\project\Source\parts\buildout\site.py", line 584, in main                                                                                  known_paths = addsitepackages(known_paths)                                    

File "C:\Dropbox\XYZ\project\Source\parts\buildout\site.py", line 328, in addsitepackages                                                                       import pkg_resources                                                        

ImportError: No module named pkg_resources 
```

虽然如果我直接在项目环境中运行 python，我可以导入 pkg_resources 而不会出错：

```
(project) C:\Dropbox\XYZ\project\Source>python                                
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32                                                                              Type "help", "copyright", "credits" or "license" for more information.          
>>> import pkg_resources                                                        
>>> pkg_resources                                                               
<module 'pkg_resources' from 'C:\Dropbox\XYZ\project\lib\site-packages\setuptools-0.6c11-py2.7.egg\pkg_resources.py'> 
```

我完全被这里打动了。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:39:04.023

我没有明确的答案，但这里有一些头脑风暴的想法：

*   为什么是虚拟环境？Buildout 本身提供了隔离，因此不需要 virtualenv。您可以仅使用 bootstrap.py 和 buildout.cfg 重试吗？所以只需使用您的系统 python 运行 bootstrap.py 吗？

*   您是否在全球范围内安装了 buildout？他们可以干涉。

*   最新的 1.5.2 版本在某些情况下对 site.py 文件有一些问题，这可能是它在 virtualenv 中失败的原因。[您可以尝试http://pypi.python.org/pypi/zc.buildout/1.5.2#system-python-and-zc-buildout-1-5](http://pypi.python.org/pypi/zc.buildout/1.5.2#system-python-and-zc-buildout-1-5)中提到的特殊 1.4.4 引导程序吗？

*   `bin/buildout -vvv`为您提供更多调试信息。

附加评论：djangorecipe 中的`version`设置在最新版本的 djangorecipe 中已弃用。你可以删除它。如果你想固定 Django，你必须把它固定在你的构建`[version]`列表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T13:39:29.267

您所遵循的指南有点过时了。`[django]`处理零件时会失败，特别是在`version`变量中。您必须以新方式指定版本，该方式显示在[djangorecipe 页面](http://pypi.python.org/pypi/djangorecipe/1.1.2)中。这是：

```
[buildout]
parts = django
versions = versions

[versions]
django = 1.4 
```

# android - 更新安卓应用程序

> ID：10314043
> 
> 赞同：1
> 
> 时间：2012-04-25T10:43:53.827
> 
> 标签：android

我做了一个安卓应用。我想把它上传到安卓市场。我以后也想更新。那么我应该采取哪些必要的步骤才能自动检测到 android 新版本并下载并安装它们

我试过谷歌搜索，但没有找到确切的教程。在编码我应该放置哪些链接以及类似的东西。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:52:16.087

-将此行设置为您的清单：

```
<manifest android:versionCode="1" android:versionName="1"> 
```

- 增加每个新版本的 versionCode 并更新 - 不要更改应用程序的包名 - 使用您的 google play 帐户中的更新功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:49:15.960

当您上传新版本的应用程序时，在 Manifest.xml 中升级其 versionCode 和 versionName。Market 将通过读取 versionCode 自动处理，并在可能的情况下通知用户设备进行升级。确保新的 versionCode 值必须大于旧的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:50:06.917

您只需要通过更改版本代码来更新清单文件

```
 <manifest android:versionName="1.6" 
  android:versionCode="7" 
```

如果版本代码没有增加，谷歌不会让你上传新版本。

发布后，用户的 google play 帐号会检测到新版本，如果他们选择了 App 自动更新，则会为他们安装。如果没有，那么当他们进入谷歌播放的“我的应用程序”部分时，它将通知他们可用的更新。

希望这可以帮助

# jquery - 阻止 jquery 添加链接...

> ID：10314049
> 
> 赞同：1
> 
> 时间：2012-04-25T10:44:10.450
> 
> 标签：jquery, if-statement

我有一个功能应该在每次克隆元素时创建一个按钮。问题是它正在向该 div 中的所有元素添加一个按钮，即使已经有一个。我确信这是一项简单的任务，但我无法理解它。

```
<h1>skapa ett moment</h1>

<?php foreach($rows as $r) : ?>

    <div class="span6 part">
        <button id="add_part" class="btn-mini btn pull-right">Lägg till</button>
        <div class="moment_content">
            <h1 class="part_heading"><?php echo $r->title; ?></h1>
            <h4 id="id" style="display:none;" class="pull-left"><?php echo $r->id;?></h4>
            <div class=""><?php echo $r->content; ?></div>
        </div>
    </div>

    <div id="result" class="span3 pull-right">
    </div>

<?php endforeach; ?>

    <script type="text/javascript">
        var knapp = $('.part').find('.btn').hide();
        $('.part').hover(function(){
            $(this).toggleClass('well');
            $(this).children('.btn').toggle();
        });

        $('button#add_part').on('click', function(){
            var add = $(this).next().clone().appendTo('#result');
            if ($('<a class="btn-mini pull-right btn" href="#">ta bort</a>').length > 0)
            {
                $('<a class="btn-mini pull-right btn" href="#">ta bort</a>').insertBefore('#result .part_heading');
            } 
            if ($('<a class="btn-mini pull-right btn" href="#">ta bort</a>').length > 1){
                $('#result a.btn').remove();
            } 
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:32:18.870

我会做类似这样[的 jsBin live example](http://jsbin.com/equgib/4/edit#javascript,html)

要工作，您需要进行一些更改：

*   删除所有`id`的
*   `btn-add-part`作为类添加到按钮
*   `<h4>`使用可移动链接更改
*   如果您想访问添加`id`的 's，我已将 's`data-content-id`作为`<div>`块的一部分
*   把`<div id="result">`你的循环放在外面（因为我假设这就是你想要的

我也设计了一些样式，以便更容易跟进......

jQuery 代码本质上是：

```
$(function(){

  // hide all "ADD" buttons
  $(".btn-add-part").hide();

  // on mouse over .part
  $(".part").hover(function() {
      $(this).toggleClass("well").find(".btn-add-part").stop().fadeToggle();
    });

  // on "ADD" click
  $(".btn-add-part").click(function() {
    // clone DOM block
    var block = $(this).closest(".part").find(".moment_content").clone(); 
    // show remove link
    block.find(".btn-rem-part").show(); 
    // append to result
    block.appendTo("#result"); 
  });

  // on "REMOVE" click
  $(".btn-rem-part").live("click", function() {
    $(this).closest(".moment_content").fadeOut("slow", function() { 
       // Now that faded, let's remove it...
       $(this).remove(); 
    });
  });

}); 
```

* * *

**添加了保存按钮**

```
 // on "SAVE"
  $(".btn-Save").click(function() {
    // empty?
    if($("#result").length > 0) {

      var r = "";
      $("#result").find(".moment_content").each(function() {
        // for each block added
        if(r.length > 0) r += ", ";
        r += $(this).attr("data-content-id");
      });

      alert("Submiting the following ID's: " + r);
      return true;

    }
    alert('Nothing to save...');
    return false;
  }); 
```

# wordpress - Nextgen wordpress 插件：画廊标签的网址

> ID：10314053
> 
> 赞同：0
> 
> 时间：2012-04-25T10:44:18.887
> 
> 标签：wordpress, tags

我开发了一个显示人员信息的插件，最后我放了一些图片。好吧，我想放一个指向画廊标签的链接，但我不知道该怎么做

对于画廊，我使用这个函数： nggShowRelatedGallery($tag, 10); 我想在链接中使用 $tag var。例如，如果我输入：[http](http://www.web.com/gallery/tag/cars) ://www.web.com/gallery/tag/cars我希望出现“汽车”标签的所有照片。

任何人都可以帮助我吗？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:05:29.563

看看[rewrite Api](http://codex.wordpress.org/Rewrite_API)。
它会让你走得更远。

# javascript - JavaScript 中 Observable 模式的使用

> ID：10314056
> 
> 赞同：6
> 
> 时间：2012-04-25T10:44:39.093
> 
> 标签：javascript

```
function Observer() {
    this.fns = [];
}

Observer.prototype = {
    subscribe : function(fn) {
        this.fns.push(fn);
    },

    unsubscribe : function(fn) {
        this.fns = this.fns.filter(
            function(el) {
                if ( el !== fn ) {
                    return el;
                }
            }
        );
    },

    fire : function(o, thisObj) {
        var scope = thisObj || window;
        this.fns.forEach(
            function(el) {
                el.call(scope, o);
            }
        );
    }
};

var fn = function() {};

var o = new Observer;
o.subscribe(fn);
o.fire('here is my data');
o.unsubscribe(fn); 
```

我无法理解这背后的整个概念。我想在我的项目中实现这种模式。我有一个表单被提交的视图，它调用一个 WebService 并返回给我响应。

**如果我必须在我的项目中实现这个，这是一个简单的请求和响应......我将如何处理它？我知道当有变化时你会通知你的观察者......让我向我的 API 发出请求，然后我得到响应......现在我希望它通过可观察模式得到通知给我的视图**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:13:46.103

Observer 似乎是您调用的构造函数，`var o = new Observer();`然后`o`将是一个引用一堆函数的对象。您可以通过 将函数添加到列表中`subscribe`。并通过从列表中删除它们`unsubscribe`

那么这一切的重点就是“ `fire`”方法，它将遍历函数列表，然后一一调用每个函数。`"observer pattern"`看起来很像单例模式

你熟悉`watch`JavaScript 中的 " " 方法吗？它是一种通过 Firefox 支持的方法，您可以在任何对象上使用它。

```
document.myform.myfield.watch('value', function (v) {
    alert(v);
    return v;
}) 
```

然后每当对象的值发生变化时，`watch`都会调用该函数。所以基本上观察者模式背后的概念是你想以跨浏览器的方式基本上模拟 Firefox 的 watch 方法

您将一堆函数或对象的引用扔到订阅`list.then`中，并`Observer.fire`在每个被监视的对象或函数上调用回调方法。**这样，如果用户执行某种操作（例如单击），则整个函数列表将通过回调函数更新**

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:05:12.843

如果您只想做一个简单的请求，那么在 jQuery（例如 with[`$.ajax(...)`](http://api.jquery.com/jQuery.ajax/)或[`$.get(...)`](http://api.jquery.com/jQuery.get/)）中看起来像这样：

```
var requestUrl = "text.html";

// Callback is defined here
var viewCallback = function(data) {
   // this will be called when the request is done
   console.log('view is notified');
   console.log('data looks like this:');
   console.log(data);

   // you could chain method calls to other callbacks here if you'd like
};

// Request is done here
$.ajax({
  url: requestUrl,
}).done(viewCallback); 
```

大多数情况下，在执行上述代码足够的请求时，您只想做一件事。使用 jQuery 或 mootools 等 javascript 库将抽象出 XMLHttpRequest 对象的奇怪之处。

但是，如果您想做更高级的事情，我建议您查看执行此类操作的库，例如[Radio.js](http://radio.uxder.com/)。

# maven - 我如何逐步迁移 OSGi 模块的 Netbeans 包装器以直接依赖于 OSGi 模块以构建 Maven，Netbeans 7.1 RCP？

> ID：10314057
> 
> 赞同：1
> 
> 时间：2012-04-25T10:44:43.930
> 
> 标签：maven, netbeans, osgi

我们有一个 Maven 构建的 Netbeans 7.1 rcp 应用程序，它通过将 OSGi 模块包装在 Netbeans 模块包装器中，成功地混合了 OSGi 模块（打包：bundle）和 Netbeans 模块（打包：nbm）。我们希望从使用这些包装器迁移到直接使用 OSGi 模块以简化构建。大约有 30 个包装器、osgi 模块对，我想解决包装器的删除问题，一次一个模块对。

但是，当我们在依赖它的模块 pom 中将特定的包装器依赖替换为其 osgi 依赖时，并使用

```
 <useOSGiDependencies>true</useOSGiDependencies> 
```

在 nbm-maven-plugin 配置中。与其他包装器的任何其他依赖项突然无法构建传递依赖项在运行时不可用错误。

项目使用传递模块 [xxx] 中的类，这些类在运行时无法访问。

-- 其中 [xxx] 是 OSGi 模块的名称。

当然，我可以通过将包装器依赖项替换为它们包装的 OSGi 模块来修复构建，但这会大大增加迁移任务的规模。一旦我通过“修复”这些临时依赖项获得了构建，我选择迁移的 OSGi 模块成功地出现在一个新的“额外”集群中。但是在运行时，rcp 找不到其他 osgi 模块，因为我猜，在构建的其他地方，它们仍然被包装器引用。

这些包装器和直接的 OSGi 依赖项有什么办法可以共存？还是我必须一次性将所有 Netbeans 包装器迁移到 OSGi？

非常感谢，

菲尔·威尔金森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:14:23.993

看起来没有办法一次做一个包装器，它与 useOSGiDependencies 是全有或全无。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T14:34:59.543

您*可以一次*将它们更改为`useOSGiDependencies=true`一个模块。

详细的分步指南可能会太长，无法找到答案，因此这里有一些通用规则：

1.  使用`nbm-maven-plugin`版本 >= 3.11。低版本有一些错误。
2.  NBM 包装器的`OpenIDE-Module`&`OpenIDE-Module-Specification-Version`必须分别与包装的捆绑包的`Bundle-SymbolicName`&匹配`Bundle-Version`。
3.  如果捆绑包具有包版本控制，则必须将其复制到 NBM 包装器`MANIFEST.MF`的`Netigso-Export-Package`.

# jquery - 添加元素 附加元素

> ID：10314063
> 
> 赞同：0
> 
> 时间：2012-04-25T10:45:35.350
> 
> 标签：jquery

 我有一个循环，在这个循环中我将添加`li`元素，然后我应该在`a`里面添加元素`li`，但是当我编写这段代码时，`a`元素将添加到所有`li`元素中。

```
var toolbarArray = new Array("Home", "About", "Contact");
var ceItem = $('#toolbar').append('<ul></ul>').find('ul');
var ceLiItem;
for (i=0; i<toolbarArray.length; i++) {
    ceLiItem = ceItem.append('<li></li>').find('li');
    ceLiItem.append('<a>'+toolbarArray[i]+'</a>');
} 
``` 

这是结果：http: [//jsfiddle.net/SKPxE/](http://jsfiddle.net/SKPxE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:49:20.667

使用`.appendTo()`这样您就不必调用`.find()`来获取引用您刚刚添加的对象的 jQuery 对象（并且很可能还有很多其他`<ul>`或`<li>`元素），如下所示：

```
var toolbarArray = new Array("Home", "About", "Contact");
var ceItem = $('<ul></ul>').appendTo('#toolbar');
var ceLiItem;
for (i=0; i<toolbarArray.length; i++) {
    ceLiItem = $('<li></li>').appendTo(ceItem);
    ceLiItem.append('<a>'+toolbarArray[i]+'</a>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:55:58.393

您的代码结构可以重新安排一下：http: [//jsfiddle.net/SKPxE/4/](http://jsfiddle.net/SKPxE/4/)

```
$(document).ready(function() {
    var toolbarArray = new Array("Home", "About", "Contact"),
        toolbar = $('<ul></ul>').appendTo('#toolbar');

    $.each(toolbarArray, function(i,o) {
        var link = $('<a></a>').attr('href','').text(o),
            celItem = $('<li></li>').append(link);
        toolbar.append(celItem);
    });   
});​ 
```

1.  每个范围只声明一个`var`会使事情变得更整洁（jsLint）。

2.  你可以用它`$.each()`来迭代一个数组（你的方法也很好，但有时 jQ 版本会派上用场

3.  您的链接很可能不仅仅是文本，因此上面的代码为您做好了准备（注意`href`属性）

4.  当您使用 jquery 创建元素时`$('<li></li>')`，您不需要使用`.find()`它来抓取它，它已经存在

5.  **编辑：**见安东尼的帖子`.appendTo()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:52:46.593

试试这个：

```
var toolbarArray = new Array("Home", "About", "Contact");
var ceItem = $('#toolbar').append('<ul></ul>').find('ul');
var ceLiItems = '';
for (i=0; i<toolbarArray.length; i++) {
    var ceLiItems+= '<li><a>'+toolbarArray[i]+'</a></li>'
}
ceItem.append(ceLiItems); 
```

这段代码更加高效和快速，因为它将节省大量无用的 DOM 遍历。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:01:58.063

这个更好

```
$(document).ready(function() {
    var toolbarArray = new Array("Home", "About", "Contact");

    var ceList = $('<ul></ul>');
    $('#toolbar').append(ceList);

    $.each(toolbarArray, function(index, value) {
        ceList.append('<li><a>' + value + '</a></li>');
    });
}); 
```

# c# - Facebook不再提供页面链接

> ID：10314068
> 
> 赞同：1
> 
> 时间：2012-04-25T10:46:00.163
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

有没有人注意到 facebook 已经停止在图形 api 中提供页面链接？

有没有人找到解决这个问题的方法？请告诉我。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:18:59.483

好像你是对的，我在页面的结果中看不到“链接”字段，即使我尝试使用“PAGE？fields=link”我也不明白。

但这不是什么大问题。您确实获得了*id*和*username*字段，因此创建页面链接非常容易：

```
"http://www.facebook.com/" + page.id
or
"http://www.facebook.com/" + page.username 
```

* * *

# 编辑

我真的想不出@GeoffChappell（在评论中）给出的示例适用于现实世界的场景，但有一个使用 FQL 的解决方案：

```
SELECT page_url FROM page WHERE page_id = PAGE_ID 
```

对于[39399781765](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q=SELECT%20page_url%20FROM%20page%20WHERE%20page_id%20=%2039399781765)，它返回： http: [//www.facebook.com/RedSox](http://www.facebook.com/RedSox)

对于[39399781765](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q=SELECT%20page_url%20FROM%20page%20WHERE%20page_id%20=%208936834181)，它返回： http: [//www.facebook.com/pages/jQuery/8936834181](http://www.facebook.com/pages/jQuery/8936834181)

# java - IBM websphere 应用服务器在 MyEclipse8.0 中没有启动

> ID：10314069
> 
> 赞同：0
> 
> 时间：2012-04-25T10:46:07.960
> 
> 标签：java, websphere, myeclipse

我已经下载并安装了 IBM Websphere Application Server6.0 并安装了它。我想在 MyEclipse8.0 的 Websphere 服务器上部署我的 EJB 应用程序。我已经使用必填字段配置了服务器。现在，当我启动 Websphere 服务器时，出现以下错误...

```
websphere6Server [Remote Java Application]  
com.ibm.ws.bootstrap.WSLauncher at localhost:2747   
    Thread [main] (Suspended (exception NullPointerException))  
        URL.<init>(URL, String, URLStreamHandler) line: 504 
        URL.<init>(URL, String) line: 462   
        URL.<init>(String) line: 411    
        XMLEntityManager.setupCurrentEntity(String, XMLInputSource, boolean, boolean) line: not available   
        XMLVersionDetector.determineDocVersion(XMLInputSource) line: not available  
        XML11Configuration.parse(boolean) line: not available   
        XML11Configuration.parse(XMLInputSource) line: not available    
        SAXParser(XMLParser).parse(XMLInputSource) line: not available  
        SAXParser(AbstractSAXParser).parse(InputSource) line: not available 
        MBeanDescriptorLoader2.load(InputStream, String) line: 156  
        MBeanDescriptorManager.loadMasterDescriptorFile(String) line: 374   
        MBeanDescriptorManager.<init>() line: 96    
        MBeanFactoryImpl.<init>(String) line: 92    
        AdminServiceImpl.<init>() line: 156 
        AdminImpl.initialize(Object) line: 177  
        ServerImpl(ContainerImpl).initializeComponent(String, Object, ComponentManager, Map, List, ConfigLocator[], ContainerImpl$ComponentStartup) line: 1161  
        ServerImpl(ContainerImpl).initializeComponents(EObject, ConfigLocator[]) line: 1015 
        ServerImpl.initialize(Object) line: 245 
        WsServerImpl.bootServerContainer(Server, ContainerImpl, RepositoryImpl, ConfigLocator[], ComponentManager) line: 157    
        WsServerImpl.start(String, String, String, String) line: 120    
        WsServerImpl.main(String[]) line: 378   
        WsServer.main(String[]) line: 50    
        NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
        NativeMethodAccessorImpl.invoke(Object, Object[]) line: 85  
        NativeMethodAccessorImpl.invoke(Method, Object, Object[]) line: 58  
        DelegatingMethodAccessorImpl.invoke(Method, Object, Object[]) line: 60  
        Method.invoke(Object, Object[]) line: 391   
        WSLauncher.main(String[]) line: 190 
C:\Program Files\IBM\WebSphere\AppServer\java\bin\javaw.exe (Apr 25, 2012 4:12:03 PM) 
```

………………………………………………………………………………………………………………………………………………

有人能帮我解决这个问题吗？我会非常感谢他/她。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:20:54.353

您可以尝试从命令行启动服务器并确保它在尝试从 Eclipse 内部启动它之前工作吗？

高温高压

芒鲁

# java - Java：如何将字符串转换为子类数据类型？

> ID：10314070
> 
> 赞同：2
> 
> 时间：2012-04-25T10:46:11.237
> 
> 标签：java

我想将String转换为子类数据类型，怎么做？或者有可能吗？

我有一个抽象类Acct

公共抽象类 SinAcct 扩展 Acct

公共类 SavAcct 扩展 SinAcct

在 SavAcct 中，有一个构造函数

```
public SavAcct(String acctNo, String name, ConsolidateAccount ownerAcct, double lastMonthBal){
        super(acctNo,name,ownerAcct,lastMonthBal);

    } 
```

一个抽象类 ConsolidateAccount 扩展了 Account

我想新建一个 SavAcct，

`new SavAcct(array[1],array[2],array[3],Double.parseDouble(array[4])`

但这是错误构造函数 SavAcct(String, String, String, double) 未定义

任何人都可以帮助我吗？请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:14:35.647

你不能这样做，因为 String 类是最终的。你能用组合代替继承吗？[http://www.artima.com/designtechniques/compoinh.html](http://www.artima.com/designtechniques/compoinh.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T11:06:31.767

你应该有一个具体的类（非抽象类）扩展`ConsolidateAccount`让我们说它是

```
public class ConcreteAccount extends ConsolidateAccount 
```

然后你可以使用这样的东西。

```
ConsolidateAccount ownerAcct = new ConcreteAccount(array[3]);
new SavAcct(array[1],array[2],ownerAcct,Double.parseDouble(array[4]); 
```

`public ConcreteAccount(String str)`并在您的 ConcreteAccount 类中创建一个构造函数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T11:08:36.880

只是为了确保您没有走错路，而不是添加一个基本上需要`super(acctNo,name,ownerAcct,lastMonthBal);`像现有构造函数一样调用的新构造函数，您为什么不尝试使用您的`array[3]`密钥创建或查找 ConsolidateAccount 实例？

例如

```
ConsolidateAccount consolidateAccount = new ConcreteConsolidateAccount(array[3]);
new SavAcct(array[1],array[2],consolidateAccount,Double.parseDouble(array[4]); 
```

`ConcreteConsolidateAccount`具体类在哪里扩展`ConsolidateAccount`。

看起来是更明智的做法。

当然我不知道周围的逻辑`ConsolidateAccount`，或者即使它有一个带 a 的构造函数`String`，但这只是给你一个想法，因为看起来你需要调用 SavAcct 正在扩展的类的构造函数（这由 super 调用指示）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T10:51:07.397

如果您真的想将 String 转换为其他类的对象。您可以有三种可能的解决方案：-

1.  创建一个以字符串为参数并进行适当转换以创建对象的构造函数。

2.  有一个工厂方法，即 getInstance()，它接受 String 参数并返回一个 Object。

3.  您可以有一种可用于与上述相同目的的方法。

**编辑**

只是忘了提到 String 是一个最终类，不能在您的应用程序中修改或继承。

```
public Static SubClass getInstance(String str){
   SubClass obj = new SubClass(); 
   // ***the choice of constructor depends upon how u have created ur class
   //use str to form the SubClass object in following lines 
   return obj;
} 
```

比你可以用它

```
SubClass newObj = SubClass.getInstance("String value here"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T10:48:24.120

不可能，字符串是最终的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T11:06:52.350

您有一个字符串数组，并且您调用的构造函数需要`ConsolidateAccount`在第三个位置。您需要实例化`ConsolidateAccount`基于该 third的子类型`String`。没有详细信息可以帮助您如何做到这一点。此外，您从 1 开始索引数组。数组是从零开始的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T10:49:05.640

该类`java.lang.String`是`final`，因此您无法扩展它。你最多可以把它包起来。

请参阅[我可以向 Java 中的 String 类添加新方法吗？](https://stackoverflow.com/q/81786/851811)

# matlab - 如何去除 dicom 图像中的背景标记

> ID：10314074
> 
> 赞同：1
> 
> 时间：2012-04-25T10:46:32.493
> 
> 标签：matlab, dicom

这听起来很傻，但它真的让我很生气。我将描述问题

一些来自数字乳房 X 线照相术的 DICOM 图像，在图像本身中包含有关乳房侧的信息，例如 Rcc、Lcc 等。

有什么方法可以删除它们 - 除了手动方式 - 吗？

dicominfo 函数（matlab 函数）中是否有与它有任何关系的字段？

还是我必须制定自己的算法来删除它们？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:32:00.213

如果您可以处理丢失一些信息的情况，您还可以尝试一系列带有重建的打开和关闭操作（形态图像处理）。这将删除小于结构元素的信息。

如果您可以发布/发送示例图片，也许我可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:32:53.737

我怀疑有一种自动的方法。

如果文本是白色的，请检查：

![在此处输入图像描述](../Images/322731fa5d803f405f76ceb160150bc0.png)

该示例查找图像中所有像素的最大值和最小值。形成白色文本字符的像素设置为最大像素值。

```
max(I(:))
ans =

4080

min(I(:))

ans =

32 
```

为了去除这些文本字符，该示例将具有最大值的所有像素设置为最小值。

```
Imodified = I;
Imodified(Imodified == 4080) = 32; 
```

![在此处输入图像描述](../Images/87a5d80a93d6fbe328caa34e06f7a4e3.png)

来源： http: [//www.mathworks.de/help/toolbox/images/f13-29508.html](http://www.mathworks.de/help/toolbox/images/f13-29508.html)

**编辑** 使用这种技术要格外小心。看评论。

# c# - 在asp.net Treeview中触发selectedNodeChanged事件时如何防止数据丢失？

> ID：10314077
> 
> 赞同：0
> 
> 时间：2012-04-25T10:46:35.990
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

每次按下树节点时都会触发 selectegNodeChanged 事件并重新加载页面。所以，我丢失了存储在 Dictionary、ArrayList 中的一些数据...如何防止这些数据丢失？

所以，我将那些 Dictionary 和 ArrayList 存储为“静态”。它现在解决了我的问题。

这是这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:50:20.310

不，不要使用`static`。尝试将这些存储在`ViewState`或`Session`代替。你可以考虑`ViewState`如果它不是大量的数据。 `static`将可以访问`Session`，这不是一个好的做法。

您可以创建属性并避免代码重复，如下所示。

```
 public ArrayList TreeNodeDataList
    {
        set
        {
            ViewState["TreeNodeDataList"] = value;
        }
        get
        {
            if (ViewState["TreeNodeDataList"] == null)
            {
                return (new ArrayList());
            }
            else
            {
                return (ViewState["TreeNodeDataList"] as ArrayList);
            }
        }
    } 
```

现在，当您要重新分配数据时，请读取`TreeNodeDataList`属性。如果 count 为`ArrayList`，`0`则从 DB 中获取，否则使用它。

希望我足够清楚。

# c - 分段故障

> ID：10314079
> 
> 赞同：-2
> 
> 时间：2012-04-25T10:46:47.157
> 
> 标签：c, segmentation-fault, netbeans-7

我正在尝试使用 C++ 中的顺序编程清楚地获得 mandelbrot 图像，但在运行时出现分段错误。我对赛格一无所知。错误，但我的程序完美编译，没有错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int file_write(unsigned int width, unsigned int height)
{
    unsigned int **color = NULL;
    FILE *fractal = fopen("mandelbrot_imageSequential.ppm","w+");
    if(fractal != NULL)
    {
        fprintf(fractal,"P6\n");
        fprintf(fractal,"# %s\n", "Mandelbrot_imageSequential.ppm");
        fprintf(fractal,"%d %d\n", height, width);
        fprintf(fractal,"40\n");
        int x = 0, y = 0;
        unsigned int R = 0, G = 0, B = 0;
        for(x = 0; x < width; ++x)
        {
            for(y = 0; y < height; ++y)
            {
                R = (color[y][x]*10);
                G = 255-((color[y][x]*10));
                B = ((color[y][x]*10)-150);
                if(R == 10)
                    R = 11;
                if(G == 10)
                    G = 11;
                if(B == 10)
                    B = 11;
                putc(R, fractal);
                putc(G, fractal);
                putc(B, fractal);
            }
        }
        fclose(fractal);
    }
    return 0;
}
int method(int x, int y, int height, int width, double min_re, double max_re, double min_im, double max_im, int max_iterations)
{
    double threshold = 4;
    double x_factor = (max_re-min_re)/(width-1);
    double y_factor = (max_im-min_im)/(height-1);
    double c_im = max_im - y*y_factor;
    double c_re = min_re + x*x_factor;
    double Z_re = c_re, Z_im = c_im;
    unsigned int col = 0;
    for(unsigned n = 0; n < max_iterations; ++n)
    {
        double Z_re2 = Z_re*Z_re, Z_im2 = Z_im*Z_im;
        if(Z_re2 + Z_im2 > threshold)
        {
            col = n;
            break;
        }
        Z_im = 2 * Z_re * Z_im + c_im;
        Z_re = Z_re2 - Z_im2 + c_re;
    }
    return col;
}
int main(int argc, char *argv[])
{
    unsigned int width;
    unsigned int height;
    unsigned int max_iterations;
    unsigned int **color = NULL;
    int x,y;
    double threshold;
    double min_re;
    double max_re;
    double min_im;
    double max_im;
    unsigned int NUM_OF_THREADS;
    if(argc != 10)
    {
        printf("There is an error in the input given.\n");
        return 0;
    }
    else
    {
        height = atoi(argv[1]);
        width = atoi(argv[2]);
        max_iterations = atoi(argv[3]);
        min_re = atof(argv[4]);
        max_re = atof(argv[5]);
        min_im = atof(argv[6]);
        max_im = atof(argv[7]);
        threshold = atoi(argv[8]);
        NUM_OF_THREADS = atoi(argv[9]);
    }
    color = (unsigned int**)malloc(height*sizeof(unsigned int*));
    printf("height = %d\twidth = %d\tmaximum_iterations = %d\tminimum_x-value = %.2f\tmaximum_x-value = %.2f\tminimum_y-value = %.2f\tmaximum_y-value = %.2f\tthreshold_value = %.2f\tno. of threads = %d\t\n",height,width,max_iterations,min_re,max_re,min_im,max_im,threshold,NUM_OF_THREADS);
    for(x = 0; x < height; x++)
    {
        color[x] = (unsigned int*)malloc(width*sizeof(unsigned int));
    }
    time_t ts,te;
    time(&ts);
    method(x,y,height,width,min_re,max_re,min_im,max_im,max_iterations);
    time(&te);
    double diff = difftime(te,ts);
    file_write(width, height);
    printf("Total Time elapsed: %f\n",diff);
    return 0;
} 
```

如何纠正这种分段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:54:49.577

至少有一个问题出在 file_write 函数中。

1.  `unsigned int **color = NULL;`
2.  `R = (color[y][x]*10);`

我假设颜色应该是一个输入参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:06:25.423

如果您在 Linux 机器上，请执行以下操作：

```
$ulimit -c unlimited 
```

然后运行代码。注意生成了一个 core.[pid] 文件。像下面这样启动 gdb

```
$gdb ./your_app core.[pid] 
```

它将带您到发生段错误的语句。在 gdb 提示符下发出“回溯”命令以查看调用层次结构。

请记住使用“-g”标志编译以获得更详细的 gdb 输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T05:54:29.970

您的代码有两个主要问题：

1.  您为数组分配内存，`color`然后使用*不同* `color`的内部`file_write()`初始化为`NULL`.

    您需要将第一个`color`作为参数传递给`file_write()`：

    ```
    int main(...)
    {
        ...
        file_write(**color**, width, height);
        printf("Total Time elapsed: %f\n",diff);
        return 0;
    } 
    ```

    并声明另一个`color`作为参数`file_write()`：

    ```
    int file_write(**unsigned int **color**, unsigned int width, unsigned int height)
    {
        /* unsigned int **color = NULL; // Removed */
       ... 
    ```

2.  你只调用`method()`一次，没有将任何东西存储到`color`. 您需要循环调用它。类似于：

    ```
    /* Untested */
    for (y = 0; y < height; y++) {
        for (x = 0; x < width; x++) {
            color[y][x] = method(x,y,height,width,min_re,max_re,min_im,max_im,max_iterations);
        }
    } 
    ```

`malloc()`然后，当然，您应该检查, `fopen()`, `fprintf()`, , ...的返回值`fclose()`，并检查输入变量是否具有合理的值等等。

我还注意到您以不同的顺序传递到`width`and 。为了避免以后的麻烦，我会将函数更改为，以便水平和垂直参数以相同的顺序传递。`height``file_write()``method()``method()``method(x, y, width, height)`

# facebook - 用于将多个评论框的评论显示到单个 iframe facebook 页面的代码？

> ID：10314080
> 
> 赞同：1
> 
> 时间：2012-04-25T10:46:52.363
> 
> 标签：facebook, comments

我在我们网站的 php 产品页面上安装了一个 facebook 评论框。这意味着评论框显示在我们所有的产品页面上

我正在使用

```
data-href="<?php echo HTTP_SERVER . $_SERVER['REQUEST_URI']; ?>" 
```

作为评论的 url，因此发布到 facebook 的 url 是用户评论过的那些。

我现在正试图将我们网站上 php 产品页面的所有评论显示到 facebook 中的 iframe 选项卡。

我尝试向 iframe 添加各种不同的代码：

```
<fb:activity 
site="fmysite"
app_id="myappid">
</fb:activity> 
```

和

```
https://www.facebook.com/plugins/comments.php?api_key=mykey 
```

和其他各种网址，但我无法在 iframe 中显示所有评论。

如果我在其中一个产品页面上放置一个带有评论的 url，它就可以正常工作。但这不是我想要达到的目标。

请问有什么办法吗？

在评论审核工具中，显示了来自所有产品页面的所有评论，那里显示所有评论的代码是什么？我可以用那个吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:11:32.263

据我所知，你不能这样做。

您可能可以在该页面中放置多个评论插件，每个产品一个或类似的东西，但这可能不是您想要的。

另一种方法是自己创建它。使用[FQL](http://developers.facebook.com/docs/reference/fql)，您可以获取所有产品的评论（使用 url），然后您可以简单地显示它们。问题是您必须对它们进行排序并自己渲染显示。

要使用 FQL 获取评论，您需要使用[comment 表](http://developers.facebook.com/docs/reference/fql/comment/)和[link_stat 表](http://developers.facebook.com/docs/reference/fql/link_stat/)，并对每个产品 url 执行以下操作：

```
SELECT username, text
FROM comment
WHERE object_id IN
    (SELECT comments_fbid
    FROM link_stat
    WHERE url ="PRODUCT_URL") 
```

*您当然可以选择更多/不同的字段，在评论*表文档中阅读您的选项。

您可以在客户端使用[*FB.api*](http://developers.facebook.com/docs/reference/javascript/FB.api/)方法（[js sdk](http://developers.facebook.com/docs/reference/javascript)的）或通过向服务器端发出 http 请求来执行此操作：

> [https://graph.facebook.com/fql?q=FQL_QUERY](https://graph.facebook.com/fql?q=FQL_QUERY)

请记住，您需要一个活动的 access_token 并且可能需要一个或多个权限（查看文档）。

# opengl - 更新一个统一的值会使整个渲染管道停止吗？

> ID：10314088
> 
> 赞同：2
> 
> 时间：2012-04-25T10:47:16.790
> 
> 标签：opengl, opengl-3

glBufferSubData[手册页](http://www.opengl.org/sdk/docs/man3/xhtml/glBufferSubData.xml)的注释部分包含以下段落：

> 考虑使用多个缓冲区对象以避免在数据存储更新期间停止渲染管道。如果管道中的任何渲染引用了由 glBufferSubData 更新的缓冲区对象中的数据，尤其是来自正在更新的特定区域的数据，则该渲染必须从管道中排出，然后才能更新数据存储。

虽然[glUniform* 手册页](http://www.opengl.org/sdk/docs/man3/xhtml/glUniform.xml)根本没有提到管道。
但是，我会认为制服与缓冲区一样重要，因为它们应该在所有着色器调用中都是统一的。
所以，如果我执行一个绘制调用，更改一个统一值，然后在同一个着色器上执行另一个绘制调用，两个绘制调用会以不同的统一值同时运行，还是第二个绘制调用必须等到*每个*阶段（vert/ geom/frag) 第一个是完整的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:17:34.360

一般形式的问题几乎无法回答。但是考虑一下：

自从 GLSL 和之前的 ARB 汇编语言出现以来，统一/参数状态一直存储在着色器对象中。只有统一块和缓冲区对象才有可能将统一状态从程序中分离出来。所以在那之前，整整 5 年多，改变制服的唯一方法就是在计划中改变它。

这意味着几乎每个使用 GLSL 的程序都以标准方式使用它：绑定程序、更改制服、渲染、更改制服、渲染等。

现在，想象一下，如果做数百个 OpenGL 程序所做的这个简单而明显的事情会导致*完整的管道停顿*。

驱动开发者并不傻；即使是英特尔的驱动程序开发人员也没有那么愚蠢。无论他们的硬件是什么样的，他们都可以找到一种方法来进行统一的更改，而不会导致管道停顿。

# eclipse - 无法放置调试点

> ID：10314089
> 
> 赞同：0
> 
> 时间：2012-04-25T10:47:27.557
> 
> 标签：eclipse

我无法放置调试点。附上图，看一下。

我不知道错误是什么。

![在此处输入图像描述](../Images/4f0448d8557888343a2739496c6a86d6.png)

**我尝试过的：**

1) 重启 Eclipse

2）它出现在所有项目中

3) 清理项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:49:47.230

单击运行菜单取消选中跳过所有断点

# programming-languages - 可逆计算平台

> ID：10314090
> 
> 赞同：11
> 
> 时间：2012-04-25T10:47:29.360
> 
> 标签：programming-languages, functional-programming, runtime, compiler-theory

从[可逆计算](http://www.cise.ufl.edu/research/revcomp/faq.html)常见问题解答：

> 在给定的比特耗散率下实现最大可能的计算性能通常不仅需要在最低级别，而且在所有计算级别——在设备、电路、架构、语言和算法中（强烈推测，但不是尚未正式证明的结果——称之为弗兰克定律）。

据我了解，当位归零时会产生能量损失。如果软件和硬件平台具有反转逻辑操作的能力，则可以减少热量产生。

是否有任何支持可逆计算的编程平台（库、运行时、语言和编译器）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T11:24:08.777

是的，至少在研究中存在一些可逆的编程语言。

我对这个领域也很感兴趣，我收集了一些指针。这两篇论文很酷：

*   [可逆编程语言的原理](http://dl.acm.org/citation.cfm?doid=1366230.1366239)
*   [一种可逆的编程语言及其可逆的自我解释器](http://dl.acm.org/citation.cfm?id=1244404)

那些我还没有读过的（但在我的待办事项列表中）并且看起来很有趣：

*   [信息效应](http://dl.acm.org/citation.cfm?id=2103667)
*   [可逆语法描述-统一解析和漂亮的打印](http://lambda-the-ultimate.org/node/4191)
*   [可逆计算的内射语言](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CD4QFjAB&url=http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.2.771&ei=Jt-XT_OPCY2SOuf50NwG&usg=AFQjCNG2slke_oZaim5fMvMmPo-oiJ-2Nw)

黑客新闻上也有[这个线程](http://news.ycombinator.com/item?id=2544117)。

关于双向转换（代码、模型、数据结构等）的文献更为丰富，这在某种程度上与可逆计算有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-07T18:41:45.610

据我了解，对于真正的可逆计算，我们需要在可逆计算机上运行算法。只需引用以下链接：

**可逆计算机**：一种计算机，其中所有芯片和电路都执行可逆功能，不会向周围环境传递热量或从周围环境传递热量。1990 年代，麻省理工学院的一个小组构建了初步的硬件，证明这种“绝热”计算是可能的。

*参考：* [http ://energy.mit.edu/news/energy-efficient-computing/](http://energy.mit.edu/news/energy-efficient-computing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-02T19:39:01.180

[Prolog](https://stackoverflow.com/a/39579839/975097)和其他语言中有各种可逆解析器的实现。因为 Prolog 允许可逆计算，所以可以[在 Prolog 中实现 Janus 编程语言的解释器](http://www.complang.tuwien.ac.at/adrian/revcomp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T19:15:51.980

> 当位清零时会产生能量损失

任何不可逆的过程（即丢失信息的过程）都伴随着能量耗散。例如，`x^2`函数是不可逆的，因为它不是双射，要实现这个函数，你应该要么

*   抹去一些信息，消散一定的能量，
*   或实施 (x, 0) -> (x, x^2) 代替。

> 是否有任何支持可逆计算的编程平台（库、运行时、语言和编译器）？

[NiLang](https://github.com/GiggleLiu/NiLang.jl)是 Julia 中的一种开源、嵌入式领域特定的可逆编程语言。该eDSL可用于[编程语言级别的自动微分](https://arxiv.org/abs/2003.04617)，性能良好。

# java - 创建新的 Changelist Perforce Java API

> ID：10314092
> 
> 赞同：0
> 
> 时间：2012-04-25T10:47:55.143
> 
> 标签：java, perforce, changelist

我正在尝试编写一种方法来使用 p4java api 在 perforce 中创建一个新的更改列表。我能够连接到服务器，获取 IFileSpec 列表，同步文件并检查文件/文件夹是否存在。

但是，我无法创建新的更改列表。我尝试了[此](http://kb.perforce.com/article/1342/common-usage-patterns-for-p4java)页面上的方法，但没有成功...如果有人有可以分享的示例，我将不胜感激！

令我失望的代码部分是，

```
167: cannot find symbol
symbol  : class OptionsServer
location: class tools.test.PerforceSyncer
                    (OptionsServer)iServer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:20:41.277

解决方案是，而不是

```
Changelist changeListImpl = new Changelist(
        IChangelist.UNKNOWN,
        iClient.getName(),
        "tom",
        ChangelistStatus.NEW,
        new Date(),
        "New changelist",
        false,
   ---->(OptionsServer)iServer
        ); 
```

本来应该

```
 Changelist changeListImpl = new Changelist(
        IChangelist.UNKNOWN,
        iClient.getName(),
        "tom",
        ChangelistStatus.NEW,
        new Date(),
        "New changelist",
        false,
   ---->(Server)iServer
        ); 
```

# nhibernate - NHibernate QueryOver 可以有一个 SQL-where 语句吗？

> ID：10314095
> 
> 赞同：1
> 
> 时间：2012-04-25T10:48:14.467
> 
> 标签：nhibernate, queryover

我是 Nhibernate 的新手。我的问题是我想通过使用不包含在我的实体中的列（即 hbm）来缩小查询范围。我想做这样的事情：

```
Session.QueryOver<MyEntity>()
    .SQL_Where("MyFlag = 1") 
```

由于我以后没有使用该标志，因此我不想将其包含到实体中

我知道我可以使用：

```
Session
    .CreateSQLQuery("SELECT A,B,C FROM ENTITY WHERE MyFlag = 1")
    .SetResultTransformer(Transformers.AliasToBean<MyEntity>())
    .List<MyEntity>(); 
```

最好使用 QueryOver<>()，如果添加列等会更安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:05:14.223

您也许可以使用过滤器：-

在您的映射类定义上放置一个过滤器，但这会影响所有返回的行

例如

```
<class name="Domain.Model.MyEntity, Domain.Model" table="MyTable" 
       where="(MyFlag=1)">
    ...
</class> 
```

或者可以将条件过滤器与 QueryOver 一起使用

```
<filter-def name="SetMyFlag">
    <filter-param name=":flag" type="System.Int"/>
</filter-def>

<class name="Domain.Model.MyEntity, Domain.Model" table="MyTable">
   ...
  <filter name="SetMyFlag" condition="(MyFlag=:flag)"/>
</class> 
```

并使用：-

```
session.EnableFilter("SetMyFlag").SetParameter("flag", 1);
session.QueryOver<MyEntity>(); 
```

虽然我从来没有对未映射的列使用条件过滤器，所以这可能行不通！

# iphone - CFNetwork 的网络请求

> ID：10314098
> 
> 赞同：1
> 
> 时间：2012-04-25T10:48:28.450
> 
> 标签：iphone, ios, ipad, network-programming, cfnetwork

**我尝试使用 CFNetwork 和 Stream Reader 编写 HTTPRequester。**它只是一个发送 GET/POST/PUT... 请求的接口，但我可以创建 CFHTTPMessageCreateRequest 并设置标头和 postbody 也创建 NSInputStream 并成功打开它，但响应回调没有被触发。

任何想法？

我找到了 ASIHttp 代码，但我无法使用它。谁能给我们一个完整的示例代码？

我的最终要求是使用套接字。通过 CFSocket 设置基于 NTLM 的经过身份验证的 GET/POST 请求。有什么帮助吗？

谁能给我一个关于如何使用 CFNetwork 发送 POST 请求的简单示例？

提前致谢，

纳文山

# python - python错误：方法只需要1个参数（给定2个）

> ID：10314102
> 
> 赞同：0
> 
> 时间：2012-04-25T10:48:54.767
> 
> 标签：python, methods, arguments

我的python程序有一个小问题，我在wxpython中工作，我试图通过一个按钮以读取模式打开一个管道，该按钮通过事件绑定到函数“checkpipe”。问题是当我单击按钮时，python 错误解释器告诉我：

```
class fenetre(wx.Frame): #on va creer une nouvelle classe pour l'interface
    def __init__(self, parent, id): #constructeur
        filecontent = ""
        wx.Frame.__init__(self, parent, id, 'Solution 1 ---> Destinataire', size = (640,480))
        panel = wx.Panel(self)
        verifybutton = wx.Button(panel,label = "Verifier", pos = (320,10), size = (80,30))
        self.currentDirectory = os.getcwd() #trouver le chemin du dossier dans lequel on se trouve
        self.Centre() #faire apparaitre la fenetre au centre
        textprocessid = wx.StaticText(panel, -1, monid, pos = (400, 213))
        self.Bind(wx.EVT_BUTTON, self.checkpipe, verifybutton)

    def alertMessagePipeEmpty(self):
        dialog = wx.MessageDialog(self, "Rien recu. Veuillez essayer plus tard","Erreur", wx.OK|wx.ICON_ERROR)
        result = dialog.ShowModal()
        dialog.Destroy()

    def closewindow(self, event):
        self.Destroy()

    def checkpipe(self,names = None):
        if not os.path.exists(fifoname):
            os.mkfifo(fifoname)
        pipein = open(fifoname, 'r') 
        contenu = pipein.read()
        if contenu == "":
            self.alertMessagePipeEmpty()
        else:
            dialog = wx.MessageDialog(self, "Vous avez un fichier a recevoir. Voulez-vous le sauvegarder","Fichier recu", wx.YES_DEFAULT|wx.ICON_ERROR)
            result = dialog.ShowModal()
            dialog.Destroy()
            if result == wx.ID_YES:
                dlg = wx.FileDialog(
                self, message="Sauvegardez le fichier",
                defaultDir=self.currentDirectory,
                defaultFile="",
                wildcard=wildcard,
                style=wx.SAVE | wx.CHANGE_DIR
                )
                if dlg.ShowModal() == wx.ID_OK:
                    paths = dlg.GetPaths()
                    pathcomplet = ""
                    for path in paths:
                        pathcomplet = pathcomplet + path
                dlg.Destroy()
                fd2 = open(pathcomplet,'w')
                fd2.write(contenu)
                os.unlink(fifoname)

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = fenetre(parent = None, id = -1)
    frame.Show()
    app.MainLoop() 
```

TypeError: checkpipe() 只接受 1 个参数（给定 2 个）

我尝试了一切，我想这是关于我错过的一些愚蠢的事情，但我似乎无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:14:14.557

wx 中处理事件的方法会自动将事件作为参数传递。

您应该将检查管道重写为： `def checkpipe(self, event, names=None)`

# c# - 在 ANTLR 中替换令牌的文本

> ID：10314104
> 
> 赞同：2
> 
> 时间：2012-04-25T10:48:55.650
> 
> 标签：c#, antlr, lexer

我正在尝试将输入程序中的某些令牌文本替换为特定的格式化文本。我使用 C# 作为输出语言。

输入示例：

```
time#1m2s 
```

我对该输入的 lex 语法：

```
fragment
DIGIT : '0'..'9'
      ;

CTE_DURATION 
    : ('T'|'t'|'TIME'|'time') '#' '-'? (DIGIT ('d'|'h'|'m'|'s'|'ms') '_'?)+
    ; 
```

我想从输入示例中获取的输出令牌文本：

```
0.0:1:2.0 
```

这意味着：0 天、0 小时、1 分钟、2 秒和 0 毫秒。

有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:22:51.067

这是一种方法（它在 Java 中，但移植到 C# 应该不难）：

```
grammar Test;

parse
 : CTE_DURATION EOF
 ;

CTE_DURATION 
 : ('T' 'IME'? | 't' 'ime'?) '#' minus='-'?
   (d=DIGITS 'd')? (h=DIGITS 'h')? (m=DIGITS 'm')? (s=DIGITS 's')? (ms=DIGITS 'ms')?
   {
     int days = $d == null ? 0 : Integer.valueOf($d.text);
     int hours = $h == null ? 0 : Integer.valueOf($h.text);
     int minutes = $m == null ? 0 : Integer.valueOf($m.text);
     int seconds = $s == null ? 0 : Integer.valueOf($s.text);
     int mseconds = $ms == null ? 0 : Integer.valueOf($ms.text);
     setText(($minus == null ? "" : "-") + days + "." + hours + ":" + minutes + ":" + seconds + "." + mseconds);
   }
 ;

fragment DIGITS : '0'..'9'+; 
```

`time#1m2s`在以下解析树中解析输入结果：

![在此处输入图像描述](../Images/079e48be36207d2c6f56dfcce0feaec3.png)

请注意，语法现在`time#`也接受（导致它产生`0.0:0:0.0`），但您可以轻松地从词法分析器规则中产生异常，以防此类输入无效。

# r - R中的npregiv：尺寸错误

> ID：10314106
> 
> 赞同：0
> 
> 时间：2012-04-25T10:48:58.450
> 
> 标签：r, stata, dimension

为了计算非参数 IV 回归，我`.dta`从我习惯工作的 Stata 中读取了一个文件。然后，我将我的向量子集为`y`（依赖）、`z`（内生的 y）和`w`（z`y`的工具）——例如：

```
y = data.frame(data$y) 
```

然后我的多元外生 x 矩阵以类似的方式。执行

```
model = npregiv(y, z, w, x) 
```

我希望一切正常，因为 y 是 nx1，z 是 nx1，w 是 nx1，x 是 nx4。在`npregiv`、z、w 和 x 允许是多变量的，并且 y 必须是单变量的（它是）。但是，执行命令后我收到错误消息：

```
Error in tww[, , 1] : incorrect number of dimensions 
```

是什么`tww[.]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:46:20.613

为了解决这个问题，我创建了一个数据框，其中包含与回归相关的所有变量，包括向量 y 和矩阵 z、w 和 x。除了调用 之外`npregiv(y=y, z=z, w=w,x=x)`，还需要指定评估数据（它说默认情况下从 x、y 和 z 获取）`npregiv(y=y, z=z, w=w, x=x, zeval=z, weval=w, xeval=x)`：

# c# - LINQ to Entities：所有方法均未产生预期结果

> ID：10314107
> 
> 赞同：4
> 
> 时间：2012-04-25T10:49:05.160
> 
> 标签：c#, entity-framework, entity-framework-4, linq-to-entities

我有一个非常简单的辅助方法来生成唯一的代码。为了确保代码是唯一的，我执行了一个 LINQ to Entities 查询来验证它是否已经被使用。

我第一次尝试编写这种方法时效果很好：

```
public string GenerateUniqueSignUpCode()
{
    while( true )
    {
        var code = Path.GetRandomFileName().Substring( 0, 6 ).ToUpper();
        if( !Context.Users.Any(e => e.SignUpCode.ToUpper() == code) )
            return code;
    }
} 
```

但是，R# 建议可以简化 LINQ 表达式，从而产生了这种方法：

```
public string GenerateUniqueSignUpCode()
{
    while( true )
    {
        var code = Path.GetRandomFileName().Substring( 0, 6 ).ToUpper();
        if( Context.Users.All(e => e.SignUpCode.ToUpper() != code) )
            return code;
    }
} 
```

这种重写会导致无限循环。运行代码时，数据库不包含任何 6 字符代码，因此它应该在第一次尝试时退出循环（如第一个方法所示）。

EF 4.3.1 中的 All 是否损坏或发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:52:58.837

`SignupCode`我的猜测是，如果任何条目为空，就会发生这种情况。比较使用`!=`不会给出“真”结果，因此`All`将返回假。

只是一个猜测，但这是我以前见过的那种东西。你可以试试：

```
if (Context.Users.All(e => e.SignUpCode == null ||
                           e.SignUpCode.ToUpper() != code)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:32:41.297

`Context.Users.All(e => e.SignUpCode.ToUpper() != code` 如果 SignUpCode 为空，则应抛出空引用异常。

我想表达一切都很好。后面的数据应该有问题

# android - 无法隐藏 EditTextPreference 的软键盘

> ID：10314109
> 
> 赞同：0
> 
> 时间：2012-04-25T10:49:08.417
> 
> 标签：android, android-edittext, android-softkeyboard, preferenceactivity

我在自定义 xml 布局中有一个 EditText，它在 EditTextPreference 中动态加载（setView）。一切正常。现在，当单击首选项并显示 editPreference 对话框时，软键盘也会显示。我不希望软键盘默认显示！

这是我尝试过的。应该工作:(！

```
public class ReportBugPreference extends EditTextPreference {

        @Override
        protected void onPrepareDialogBuilder(AlertDialog.Builder builder) {
            super.onPrepareDialogBuilder(builder);  

            View viewBugReport = LayoutInflater.from(ctx).inflate(R.layout.preference_report_bug,null);
            builder.setView(viewBugReport);

            EditText edttxtBugDesc = (EditText) viewBugReport.findViewById(R.id.bug_description_edittext);
            //edttxtBugDesc.clearFocus();

            InputMethodManager inputManager = (InputMethodManager) ctx.getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(edttxtBugDesc.getApplicationWindowToken(), 0);

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:59:44.057

为您的 EditText 执行此操作以隐藏软键盘

```
 mEditText.requestFocus();
       mEditText.postDelayed(new Runnable() {
                @Override
                public void run() {
                    InputMethodManager keyboard = (InputMethodManager)
                    getSystemService(Context.INPUT_METHOD_SERVICE);
                    keyboard.hideSoftInputFromWindow(ettext.
                                                       getWindowToken(), 0);
                }
            },200); 
```

我认为更好的方法是在代码下方：

```
 mEditText.setInputType(InputType.TYPE_NULL);
    mEditText.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
             mEditText.setInputType(InputType.TYPE_CLASS_TEXT);
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:04:18.160

可能有帮助的通用功能；

```
 public static void hideSoftKeyboard (Context context, View view) {
        try {
            InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(view.getApplicationWindowToken(), 0);
        }
        catch (Exception ex) {
            Log.w(TAG, "hideSoftKeyboard->"+ex.toString());
        }
    } 
```

# mysql - 德鲁巴 | 将变更迁移到生产环境

> ID：10314115
> 
> 赞同：0
> 
> 时间：2012-04-25T10:49:24.363
> 
> 标签：mysql, drupal, drupal-6, migration

我有一个 Drupal 站点在生产中运行。一段时间后，我对代码和管理员进行了更改，一些配置，更改了内容类型和更改了一些页面的正文等。同时生产数据库也在增长。现在我希望通过不丢失生产数据库中已经存在的数据来更改生产。一种方法是在生产中重复与 Dev 相同的步骤。这对我来说看起来不太好。是否有任何自动化程序来迁移更改？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:54:07.517

模块[功能](http://drupal.org/project/features)和[strongarm](http://drupal.org/project/strongarm)将为您解决问题。

例如，功能可以帮助您保存和迁移内容类型，而 strongarm 将帮助您迁移存储在变量中的站点设置和配置信息。

安装这两个模块后，在您的开发站点上转到管理 --> 结构 --> 功能 --> 管理，并为您想要从开发转移到生产的更改创建功能。如果您同时安装了功能和 strongarm，它将允许您创建同时捕获站点构建组件（内容类型、您创建的视图、您更改的角色和权限等）和站点设置（存储在变量中的设置 - 您安装 strongarm 模块后，您会看到可以导出的一长串设置）。创建功能时，它会导出为代码（作为模块），然后您可以将该模块添加到要添加创建功能时选择的组件的任何其他站点。

您还必须在生产环境中安装这两个模块。然后将您刚刚在开发环境中创建的功能添加到您的生产站点。但是，一旦设置完成，您就可以更轻松地在开发环境和生产环境之间转移更改！

这是功能文档：[http](http://drupal.org/node/580026) ://drupal.org/node/580026 。

希望这听起来不会太混乱！

# ruby - 瘦在每台服务器上启动两个 ruby 进程，杀死错误的一个

> ID：10314116
> 
> 赞同：0
> 
> 时间：2012-04-25T10:49:25.297
> 
> 标签：ruby, bundler, daemon, thin

我正在启动三个瘦进程`bundle exec thin start -C /etc/thin/staging.yml`

我用的是rvm，ruby版本是ree-1.8.7

内容`/etc/thin/staging.yml`：

```
---                                                             
timeout: 30                                                     
pid: /home/myuser/apps/g/shared/pids/thin.pid           
max_persistent_conns: 512                                       
servers: 3                                                      
chdir: /home/myuser/apps/g/current                      
port: 3040                                                      
require: []                                                     

log: /home/myuser/apps/g/shared/log/thin.log            
daemonize: true                                                 
address: 0.0.0.0                                                
max_conns: 1024                                                 
wait: 30                                                        
environment: staging 
```

`lsof -i :3040-3042`将显示在端口 3040-3042 上侦听的三个 ruby​​ 进程，但 pid 文件包含三个不同（略低）的 pid。所有六个进程都被调用`merb : merb : Master`

当我用 停止瘦时`bundle exec thin stop -C /etc/thin/staging.yml`，瘦首先向 pid 文件中的进程发送 QUIT 信号，然后在超时后发送 KILL 信号。

pid 文件现在消失了，精简日志显示服务器已停止，但仍有 3 个 ruby​​ 进程在侦听端口 3040-3042，因此后续`thin start`将失败。

两个进程的输出之间的唯一区别`lsof -p`是 /lib/libnss_files-2.12.so 库和 postgres 套接字。

我的问题是：

*   为什么我会在 期间超时`thin stop`？
*   为什么每台服务器有两个进程而不是一个？
*   我如何优雅地解决这个问题（不杀 -9）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:28:59.390

显然 Merb 引导程序做了一个分叉。这是多么的脑残！

设置`Merb::Config[:fork_for_class_load] = false`在您的`config.ru`.

# internet-explorer - Google+ Share Plugin - 在 IE 中获得“抛出异常但未捕获”，在 Firefox 中运行良好

> ID：10314119
> 
> 赞同：1
> 
> 时间：2012-04-25T10:49:36.503
> 
> 标签：internet-explorer, plugins, share, google-plus

我只是想将 Google+ 共享插件添加到应用程序中，它在 Firefox 中运行良好，但在 IE 中出现以下错误 - “抛出异常且未捕获”

以下是我在 Firefox 和 IE 上运行的非常基本的代码，在 Firefox 中运行良好，但在 IE9 中死亡：

```
<html>
<head>

<!-- Place this tag in your head or just before your close body tag. -->
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {lang: 'en-GB', parsetags: 'onload'}
</script>

</head>
<body>

<!-- Place this tag where you want the share button to render. -->
<div class="g-plus" data-action="share" data-annotation="bubble" data-height="24"></div>

<!-- Place this render call where appropriate. -->
<script type="text/javascript">gapi.plus.go();</script>

</body>
</html> 
```

在这方面的任何帮助将不胜感激，或者如果您可以将我重定向到可以给我一些见解的人，将不胜感激。

非常感谢，

玛丽奥康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:07:38.440

您看到的问题是一个错误。共享按钮抛出异常，因为您的测试页面没有 DTD。将此添加到页面的第一行：

```
<!DOCTYPE html> 
```

现在你的分享按钮可以工作了:)

我已在 Google+ 平台问题跟踪器中[提交了此错误。](http://code.google.com/p/google-plus-platform/issues/detail?id=217)您可以为它加注星标以订阅更新。

# php - HTTP Android 响应实践

> ID：10314126
> 
> 赞同：0
> 
> 时间：2012-04-25T10:50:09.760
> 
> 标签：php, android, mysql, json, http

我有以下两难境地，我有一个 Android 应用程序，它使用 HTTP 客户端通过 php 将请求发布到 mysql 数据库中，我正在使用 JSON 来提取响应。

这是该场景的粗略视图，

我有一个使用响应填充的 ArrayList，我们将其称为主菜单单击主菜单中的一个项目后，我将发送一个 POST 请求并等待来自服务器的响应，

所以这是我的问题，哪个是可取的和更可靠的，

1.  在运行应用程序/活动时，我会下载所有内容并隐藏不相关的项目，根据要求启用/禁用它们，例如。我只是显示菜单的第一个相关项目，或者

2.  仅在请求时向服务器请求所选菜单项的信息详细信息？就像，只需下载主菜单，主菜单的默认项目 id 1

是否有其他可用的方法，每种方法的优缺点是什么，哪种方法更可靠且更有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:57:07.950

取决于列表的长度，但有些事情需要考虑......

1.  在用户得到响应之前检索和填充菜单需要多长时间？

2.  延迟是移动设备（3G、2G 等）的杀手，因此一个较大的请求可能比多个较小的请求更快。

3.  多个较小的请求将消耗更多的电池电量，因为手机必须将收音机从睡眠中唤醒，这比唤醒一个和更大的响应消耗更多的电量。（最近发表了一些很好的研究）

# javascript - 检查 css 属性是否应用了 !important 属性

> ID：10314131
> 
> 赞同：14
> 
> 时间：2012-04-25T10:50:32.257
> 
> 标签：javascript, jquery

如果我有这样的风格——

```
​div#testdiv {position:absolute;top:10px !important;}​ 
```

我可以`top`像这样使用 jQuery 查询值 -

```
$("#testdiv").css("top"); 
```

这将返回值`10px`。是否可以使用 jQuery 或 JavaScript 来检查 `top`属性是否已`!important`应用属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T22:37:16.010

首先，jQuery中似乎不存在这样的解决方案。

提供了许多可用的 javascript 解决方案，使用该功能`getPropertyPriority()`。首先，IE6-IE8 不支持此功能（请参见[此处](http://www.quirksmode.org/dom/w3c_css.html#misc)和[此处](http://msdn.microsoft.com/en-us/library/ff974377%28v=vs.85%29.aspx)）。*其次，如果元素的样式未声明为inline*，则此函数不会直接作用于元素。因此，我们将能够在以下情况下获得重要的属性：

```
<div id="testdiv" style="top : 10px !important;">Some div</div>
<script type="text/javascript">
// should show 'important' in the console.
console.log(document.getElementById("testdiv").style.getPropertyPriority('top'));
</script> 
```

但是，如果我们可以`#testdiv`在 css 样式表中声明 的样式，我们将得到一个空字符串。该`CSSStyleDeclaration`接口在 IE6-8 中也不可用。当然，这种方式毫无用处。我们需要一种不同的方法。

我已将此方法放入[JSFiddle](http://jsfiddle.net/PCM3Z/)中。我们可以直接从包含在数组中的 css 样式表中读取 !important 属性`document.styleSheets[]`。（Opera 8 及以下不支持此数组）。在[Quirksmode](http://www.quirksmode.org/dom/w3c_css.html#access)中，您可以查看支持哪些方法访问样式表的方法。根据这些信息，我们可以执行以下操作：

*   对于 IE6-8，我们使用`styleSheets[].imports`来访问导入的样式表（并继续递归执行此操作，直到我们不再找到任何导入语句），然后`styleSheets[].rules`基本上为每个样式表添加 css 规则到一个数组中。
*   对于其他浏览器，我们用于`styleSheets[].cssRules`访问导入规则和 css 规则。我们通过检查它是否实现*CSSImportRule*接口来检测导入规则，并使用它们递归地访问导入样式表中的 css 规则。

在这两种情况下，只有当规则与 HTMLElement 匹配时（在您的情况下），我们才会将 css 规则添加到数组中`#testdiv`。这会产生一组与 HTMLElement 匹配的 css 规则。这基本上就是`getMatchedCSSRules()`webkit 浏览器中的功能。但是，我们在这里自己编写。

基于这些信息，我们编写我们的`hasImportant(htmlNode, property)`函数，其中 htmlNode 是一个 HTMLElement（您的 testdiv），属性是 css 属性（在您的情况下为“top”）。首先，我们检查 top 属性的内联样式是否有一个重要的属性。如果样式表确实包含此属性，这可以节省我们查看样式表的时间。

我们编写了一个新函数`isImportant(node, property)`，它使用了我们好的旧函数`node.style.getPropertyPriority(property)`。但是，就像我之前在此答案中提到的那样：IE6-IE8 不支持此功能。我们可以自己编写函数：在 IE 中，属性`node.style.cssText`包含声明块文本。我们在此文本块中搜索属性 ('top') 并检查其值是否包含 '!important'。我们可以`getMatchedCSSRules`通过遍历所有与 htmlNode 匹配的 css 规则并调用 isImportant 函数，在使用该函数获得的每个 css 规则上重用该函数。

以上所有内容都可以在下面的代码中找到。这是基本方法，可能应该进一步微调：

*   一些代码可能会被 jQuery 替换
*   一些代码可能会被简化
*   实现 CSSMediaRule 接口和[其他接口](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleSheet)的 css 规则可能会导致此代码出现一些问题，应执行错误检查
*   可能有更简单的方法，但我不知道有任何其他方法可以让这个跨浏览器工作。

    ```
    var debug = true;

    /**
     * Get the css rules of a stylesheet which apply to the htmlNode. Meaning its class
     * its id and its tag.
     * @param CSSStyleSheet styleSheet
     * @param HTMLElement htmlNode
     */
    function getCssRules(styleSheet, htmlNode) {
        if ( !styleSheet )
            return null;

        var cssRules = new Array();
        if (styleSheet.cssRules) {
            var currentCssRules = styleSheet.cssRules;
            // Import statement are always at the top of the css file.
            for ( var i = 0; i < currentCssRules.length; i++ ) {
                // cssRules all contains the import statements.
                // check if the rule is an import rule.
                if ( isImportRule(currentCssRules[i]) ) {
                    // import the rules from the imported css file.
                    var importCssRules = getCssRules(currentCssRules[i].styleSheet, htmlNode);
                    if ( importCssRules != null ) {
                        // Add the rules from the import css file to the list of css rules.
                        cssRules = addToArray(cssRules, importCssRules, htmlNode);
                    }
                    // Remove the import css rule from the css rules.
                    styleSheet.deleteRule(i);
                }
                else {
                    // We found a rule that is not an CSSImportRule
                    break;
                }
            }
            // After adding the import rules (lower priority than those in the current stylesheet),
            // add the rules in the current stylesheet.
            cssRules = addToArray(cssRules, currentCssRules, htmlNode);
        }
        else if (styleSheet.rules) {
            // IE6-8
            // rules do not contain the import statements.
            var currentCssRules = styleSheet.rules;

            // Handle the imports in a styleSheet file.
            if ( styleSheet.imports ) {
                // IE6-8 use a seperate array which contains the imported css files.
                var imports = styleSheet.imports;
                for ( var i = 0; i < imports.length; i++ ) {
                    var importCssRules = getCssRules(imports[i], htmlNode);
                    if ( importCssRules != null ) {
                        // Add the rules from the import css file to the list of css rules.
                        cssRules = addToArray(cssRules, importCssRules, htmlNode);
                    }
                }
            }
            // After adding the import rules (lower priority than those in the current stylesheet),
            // add the rules in the current stylesheet.
            cssRules = addToArray(cssRules, currentCssRules, htmlNode);
        }

        return cssRules;
    }

    /**
     * Since a list of rules is returned, we cannot use concat. 
     * Just use old good push....
     * @param CSSRuleList cssRules
     * @param CSSRuleList cssRules
     * @param HTMLElement htmlNode
     */
    function addToArray(cssRules, newRules, htmlNode) {
        for ( var i = 0; i < newRules.length; i++ ) {
            if ( htmlNode != undefined && htmlNode != null && isMatchCssRule(htmlNode, newRules[i]) )
                cssRules.push(newRules[i]);
        }
        return cssRules;
    }

    /**
     * Matches a htmlNode to a cssRule. If it matches, return true.
     * @param HTMLElement htmlNode
     * @param CSSRule cssRule
     */
    function isMatchCssRule(htmlNode, cssRule) {
        // Simply use jQuery here to see if there cssRule matches the htmlNode...
        return $(htmlNode).is(cssRule.selectorText);
    }

    /**
     * Verifies if the cssRule implements the interface of type CSSImportRule.
     * @param CSSRule cssRule
     */
    function isImportRule(cssRule) {
        return cssRule.constructor.toString().search("CSSImportRule") != -1;
    }

    /**
     * Webkit browsers contain this function, but other browsers do not (yet).
     * Implement it ourselves...
     *
     * Finds all matching CSS rules for the htmlNode.
     * @param HTMLElement htmlNode
     */
    function getMatchedCSSRules(htmlNode) {
        var cssRules = new Array();

        // Opera 8- don't support styleSheets[] array.
        if ( !document.styleSheets )
            return null;

        // Loop through the stylesheets in the html document.
        for ( var i = 0; i < document.styleSheets.length; i++ ) {
            var currentCssRules = getCssRules(document.styleSheets[i], htmlNode)
            if ( currentCssRules != null )
                cssRules.push.apply(cssRules, currentCssRules);
        }

        return cssRules;
    }

    /**
     * Checks if the CSSStyleRule has the property with 'important' attribute.
     * @param CSSStyleRule node
     * @param String property
     */
    function isImportant(node, property) {
        if ( node.style.getPropertyPriority && node.style.getPropertyPriority(property) == 'important' )
            return true;
        else if ( node.style.cssText && getPropertyPriority(node.style.cssText, property) == 'important' ) {
            // IE6-8
            // IE thinks that cssText is part of rule.style
            return true;
        }
    }

    /**
     * getPropertyPriority function for IE6-8
     * @param String cssText
     * @param String property
     */
    function getPropertyPriority(cssText, property) {
        var props = cssText.split(";");
        for ( var i = 0; i < props.length; i++ ) {
            if ( props[i].toLowerCase().indexOf(property.toLowerCase()) != -1 ) {
                // Found the correct property
                if ( props[i].toLowerCase().indexOf("!important") != -1 || props[i].toLowerCase().indexOf("! important") != -1) {
                    // IE automaticaly adds a space between ! and important...
                    return 'important'; // We found the important property for the property, return 'important'.
                }
            }
        }
        return ''; // We did not found the css property with important attribute.
    }

    /**
     * Outputs a debug message if debugging is enabled.
     * @param String msg
     */
    function debugMsg(msg) {
        if ( debug ) {
            // For debugging purposes.
            if ( window.console )
                console.log(msg);
            else
                alert(msg);
        }
    }

    /**
     * The main functionality required, to check whether a certain property of 
     * some html element has the important attribute.
     * 
     * @param HTMLElement htmlNode
     * @param String property
     */
    function hasImportant(htmlNode, property) {

        // First check inline style for important.
        if ( isImportant(htmlNode, property) ) {
            // For debugging purposes.
            debugMsg("Inline contains important!");
            return true;
        }

        var rules = getMatchedCSSRules(htmlNode);

        if ( rules == null ) {
            debugMsg("This browser does not support styleSheets...");
            return false;
        }

        /**
         * Iterate through the rules backwards, since rules are
         * ordered by priority where the highest priority is last.
         */
        for ( var i = rules.length; i-- > 0; ) {
            var rule = rules[i];

            if ( isImportant(rule, property) ) {
                // For debugging purposes.
                debugMsg("Css contains important!");
                return true;
            }

        }
        return false;
    }

    $(document).ready(function() {
        hasImportant($('#testdiv')[0], 'top');
    }); 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T10:53:54.437

请参阅[如何使用 .css() 应用 !important？](https://stackoverflow.com/questions/2655925/jquery-css-applying-important-styles/8894528#8894528)

那里有一个可以添加到 jQuery 的函数。然后你像这样使用它：

`console.log($('#testdiv').style().getPropertyPriority('top'));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:53:09.457

您可以尝试直接从 css 样式表中读取它。

看看这个问题的第二个答案： [get CSS rule's percent value in jQuery](https://stackoverflow.com/questions/744319/get-css-rules-percentage-value-in-jquery)

# c# - Multicast OnExceptionAspect 正在记录冒泡异常

> ID：10314133
> 
> 赞同：2
> 
> 时间：2012-04-25T10:50:38.663
> 
> 标签：c#, exception, exception-handling, log4net, postsharp

我有一个来自[Postsharp的](http://www.sharpcrafters.com/)[多播](http://www.sharpcrafters.com/blog/post/Day-2-Applying-Aspects-with-Multicasting-Part-1.aspx) [OnExceptionAspect](http://www.sharpcrafters.com/blog/post/Day-1-e28093-OnExceptionAspect.aspx) ，它应用于程序集级别。这自然意味着所有方法在抛出异常时都会调用 Aspect。

在方面中，我正在记录异常详细信息**，包括发生异常时传递的参数值**，这可以正常工作。

但是，由于这适用于程序集中的所有方法，因此会为堆栈中的每个方法创建一个日志条目，因为每个方法都会出现异常。

我对如何防止这种情况一无所知，最初我打算比较异常（看看它是否相同），但这似乎很混乱。以前一定有人遇到过这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:57:33.487

这个问题有两种解决方案。

A. 使用线程静态字段来存储已记录的任何异常。

```
[Serializable] 
public class MyAspect : OnExceptionAspect 
{ 
    [ThreadStatic]
    private static Exception lastException;

    public override void OnException(MethodExecutionArgs args) 
    { 
      if(args.Exception != lastException) 
      { 
        string msg = string.Format("{0} had an error @ {1}: {2}\n{3}",  
            args.Method.Name, DateTime.Now,  
            args.Exception.Message, args.Exception.StackTrace); 

        Trace.WriteLine(msg); 
        lastException = args.Exception;
      } 

    }  
} 
```

B. 将标签添加到 Exception 对象。

```
[Serializable] 
public class MyAspect : OnExceptionAspect 
{ 
    private static object marker = new object();

    public override void OnException(MethodExecutionArgs args) 
    { 
      if(!args.Exception.Data.Contains(marker)) 
      { 
        string msg = string.Format("{0} had an error @ {1}: {2}\n{3}",  
            args.Method.Name, DateTime.Now,  
            args.Exception.Message, args.Exception.StackTrace); 

        Trace.WriteLine(msg); 
        args.Exception.Data.Add(marker, marker);
      } 

    }  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T13:48:16.157

仅供参考——Gael 是 PostSharp 大师，因为他在那里受雇……所以你知道。

对于它的价值，您始终可以通过检查 StackTrace 来判断异常源自何处。StackTrace 通过 args.Exception.StackTrace 提供。您可以在这里尝试 Dustin Davis（另一位 PostSharp 员工）推荐的方法：[PostSharp - OnExceptionAspect - Get line number of exception](https://stackoverflow.com/questions/8230873/postsharp-onexceptionaspect-get-line-number-of-exception)

解析 StackTrace（通过此处概述的方法：[How to split a stacktrace line into namespace, class, method file and line number?](https://stackoverflow.com/questions/5148167/how-to-split-a-stacktrace-line-into-namespace-class-method-file-and-line-numbe)）然后将 args.Method.Name 与解析结果进行比较。如果您的 args.Method.Name 与原始方法相同（通过解析 StackTrace 找到），那么您知道应该记录它，否则忽略。

这里有一些代码可以让我的解决方案更加具体（基于前面提到的两个解决方案）：

```
[Serializable]
public class ExceptionWrapper : OnExceptionAspect
{
    public override void OnException(MethodExecutionArgs args)
    {
        var st = new StackTrace(args.Exception, true);
        var frame = st.GetFrame(0);
        var lineNumber = frame.GetFileLineNumber();
        var methodName = frame.GetMethod().Name;
        if(methodName.Equals(args.Method.Name))
        {
            string msg = string.Format("{0} had an error @ {1}: {2}\n{3}", 
                args.Method.Name, DateTime.Now, 
                args.Exception.Message, args.Exception.StackTrace);

            Trace.WriteLine(msg);
        }
    } 
} 
```

（或者，老实说，您可以只使用 Gael 推荐的解决方案之一。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T21:35:35.397

我可以看到完成此操作的一种方法是定义一个自定义异常，然后在您的方面抛出该异常。然后在您的方面也在登录之前检查异常，如果它不是您的自定义异常记录它，否则不要记录它并（重新抛出？）。

这就是示例代码的样子：

```
[Serializable]
public class DatabaseExceptionWrapper : OnExceptionAspect
{
    public override void OnException(MethodExecutionArgs args)
    {
      if(!(args.Exception is CustomException))
      {
        string msg = string.Format("{0} had an error @ {1}: {2}\n{3}", 
            args.Method.Name, DateTime.Now, 
            args.Exception.Message, args.Exception.StackTrace);

        Trace.WriteLine(msg);
      }

      throw new CustomException("There was a problem");
    } 
} 
```

当然，您仍然必须定义该异常和所有内容。:)

# html - 解码特殊字符

> ID：10314135
> 
> 赞同：0
> 
> 时间：2012-04-25T10:50:53.023
> 
> 标签：html, html-entities

嗨，我想解码这个特殊字符**±**。问题是，名称包含特殊字符，当我尝试用 html 编写它时，它被编码并显示为 ± 所以请帮我解码这个特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:57:12.553

尝试这样的事情

```
 &plusmn; 
```

**参考：**

[http://htmlhelp.com/reference/html40/entities/latin1.html](http://htmlhelp.com/reference/html40/entities/latin1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:40:14.113

确保字符串变量始终包含`±`字符，而不是像`&#177;`. 当您将其提供给 UTF-8 编码的 HTML 页面时，浏览器将正确显示为`±`，即使使用 PHP 之类的转义函数也是如此`htmlspecialchars()`。

# c# - 创建设置表单

> ID：10314136
> 
> 赞同：3
> 
> 时间：2012-04-25T10:50:56.907
> 
> 标签：c#, .net, forms, visual-studio

我有一个非常小的项目，我想创建一个设置表单。做这个的最好方式是什么？只需使用复选框/文本框创建另一个 Windows 窗体并使用`Properties.Settings`类保存这些设置？它可能会起作用，但我想就您认为最好的方法提供一些意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:59:20.903

我通常会制作一个新表单，其中包含更改我拥有的任何设置所需的所有控件。我通常使用 Properties.Settings 类来保存我的设置，但有时我也使用 SQLite 数据库。我想它归结为更适合的东西。使用 SQLite 时，您还必须拥有某种包装器，以便轻松地从/向数据库读取/写入您的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:53:54.100

您建议的方式是一种非常合适的方法。

# ruby-on-rails - 无法通过远程计算机重新启动瘦

> ID：10314138
> 
> 赞同：0
> 
> 时间：2012-04-25T10:51:09.273
> 
> 标签：ruby-on-rails, ruby, ssh, rubygems, thin

我使用 Thin 为位于测试机器上的 rails 应用程序提供服务。我希望能够从我的本地机器停止/开始瘦，但以下不起作用：

```
ssh luc@test_machine '/home/luc/.rvm/gems/ruby-1.9.3-p125/bin/thin -v' 
```

我收到以下错误消息：

```
/home/luc/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find thin (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
from /home/luc/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /home/luc/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1230:in `gem'
from /home/luc/.rvm/gems/ruby-1.9.3-p125/bin/thin:18:in `<main>' 
```

为什么我有分数时它只列出 6 颗宝石？

当我通过 ssh 连接到测试服务器时：

```
which thin 
```

给了我正确的道路：

```
/home/luc/.rvm/gems/ruby-1.9.3-p125/bin/thin  (question updated with correct path) 
```

**更新**

我在服务器上创建了一个基本的 test.sh 脚本：

```
#!/bin/bash
# Update path with ruby / gem
export PATH=$PATH:/home/luc/.rvm/rubies/ruby-1.9.3-p125/bin:/home/luc/.rvm/gems/ruby-1.9.3-p125/bin/
thin -v
exit 0 
```

我从本地机器调用它

```
ssh luc@test_machine '/home/luc/test.sh' 
```

但仍然是相同的“找不到薄”错误。

**更新 2**

这可能与脚本通过 ssh 运行时使用的 rubies / gemset 相关联。我已经添加了

```
rvm list
rvm gemset list 
```

在 test.sh 文件中，我的输出是：

```
rvm rubies

* ruby-1.9.3-p125 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

gemsets for system (found in /home/luc/.rvm/gems/system)
* 
```

似乎我安装的 gem 不存在......虽然不知道指定 rubies/gemset 版本以通过 ssh 调用使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:10:36.717

你使用捆绑器吗？

尝试做

```
bundle exec thin -v 
```

如果这不起作用或您不使用捆绑器，请`$PATH`通过键入检查变量

```
echo PATH 
```

如果宝石不在路径中，他将无法加载它，我敢打赌它是带有路径的东西 :) 更新它们并摇滚

在最坏的情况下，您将不得不生成 rvm gem 包装器，有关更多信息，请阅读此

[http://beginrescueend.com/integration/god/](http://beginrescueend.com/integration/god/)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:04:50.767

我用另一种方式管理这个。我没有尝试从远程机器重新启动服务器，而是安装了 gem "rerun" (https://github.com/alexch/rerun)，以便在更改某些代码时自动完成瘦服务器的重新启动。

```
rerun -- thin start 
```

这个把戏真的很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:11:39.650

这个解决方案对我有用（远程和 capistrano ！）

看看这个[答案](https://stackoverflow.com/a/10391426/1470996)！

只需放置：

```
source "/usr/local/rvm/scripts/rvm" # or ~/.rvm/..
rvm use 1.9.3 
```

在 /etc/init.d/thin

或为 capistrano

```
%w[start stop restart].each do |command|
  desc "#{command} thin server"
  task command, roles: :app do
    run "source '/usr/local/rvm/scripts/rvm' && rvm use 1.9.3 && service thin #{command}"
  end
  after "deploy:#{command}", "thin:#{command}"
end 
```

如果您为每个用户安装了 rvm，请将源路径更改为“~/.rvm/scripts/rvm”

# asp.net - Gridview 行在服务器端无法访问

> ID：10314142
> 
> 赞同：0
> 
> 时间：2012-04-25T10:51:15.893
> 
> 标签：asp.net

我使用了一个`asp:GridView`with`ClientIDMode="Static"`和 I `D="GridView2"`，它显示了一些特定的结果，比如单击按钮时的帐户详细信息。

首先，我对网格进行数据绑定，除了回发延迟和整个页面重绘之外，一切都很好。

```
(GridView2.DataSource = datatable.DefaultView;
 GridView2.DataBind();) 
```

现在我正在使用 Ajax 来更新这个网格（我在 Ajax 函数中创建网格的 html 并像这样在 Grid html 上覆盖它

```
$('#GridView2').html(html.join('')) 
```

），它正在正确绘制，但现在我无法在服务器端访问它的行。

```
for (int rows = 0; rows < mayDataGrid.Rows.Count; rows++)//.Rows.Count is always 0 but in html it is there. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:10:44.400

当 gridview 呈现时，它还会在 ViewState 中呈现其 ControlState，当页面回发网格的当前状态（行更改，如添加/编辑/删除等）时，此 ControlState 而不是 html 标记（您正在更改）在服务器上检测到。

因此，对 html 的任何更改都不会在服务器端生效。

# php - Virtuemart $变量。我在哪里可以学习/输出它们？

> ID：10314144
> 
> 赞同：2
> 
> 时间：2012-04-25T10:51:19.583
> 
> 标签：php, joomla, virtuemart

在 Virtuemart 中，我引用了类似的东西

```
 $this->product->images[0]->file_url; 
```

和

```
 $category->category_name; 
```

文档很少，是否有一些技术可以让我找到可用的变量引用？我怎么知道我是否可以访问，比如说`$this->product->product_title`. 如何在没有文档的情况下从 VM 中获取这些内容？

没有最好的猜测开发人员做什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:14:35.420

试试这个

> `print_r($this->product);exit();`

然后查看页面的源代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:19:24.500

文档有限，这里是：

[http://virtuemart.net/documentation/Developer_Manual/func.html](http://virtuemart.net/documentation/Developer_Manual/func.html)

# python - 从大型排序的元组列表中获取一系列项目

> ID：10314145
> 
> 赞同：0
> 
> 时间：2012-04-25T10:51:22.717
> 
> 标签：python, list, search, tuples

我有一个看起来像这样的元组列表：

```
[(334.99972431901307, 0.0), (335.00088248902574, 0.0), (335.0020406650446, 0.0), (335.0031988470696, 66.83868408203125), (335.00435703510072, 252.91905212402344), (335.0055152291381, 341.447509765625), (335.00667342918183, 282.1964111328125), (335.0078316352317, 125.92335510253906), (335.00898996725408, 0.0), (335.01014818531672, 0.0)] 
```

该列表的长度为 16665，并按每个元组的第一个元素排序。我想根据第一个元组值从列表中提取一定范围的元组。目前我这样做：

```
def getSpectra_mzWindow(self, mzStart, mzEnd):
    for spectrum in self.mzmlInstance:
        # loop through all the peaks
        for peak in spectrum.peaks:
            # it's ordered, so when peak[0] > mzEnd it can stop
            if float(peak[0]) > mzEnd:
                break
            if mzStart <= float(peak[0]) <= mzEnd:
                yield spectrum, peak 
```

但是，这非常慢。既然我知道它是按第一个值排序的，有没有比遍历整个列表更快的方法呢？我正在考虑实现二进制搜索，但是是否已经有一个库对排序的元组列表进行了优化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T10:57:31.187

对[分](http://docs.python.org/library/bisect.html)模块

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:03:39.203

您应该能够根据您的目的调整这些示例：http: [//docs.python.org/library/bisect.html#searching-sorted-lists](http://docs.python.org/library/bisect.html#searching-sorted-lists)。您可以返回索引，而不是检索每个函数中的值，然后使用这两个索引来提取您的范围。

# asp.net - 无法从 Web 表单中的 App_Code 文件夹调用公共列表

> ID：10314153
> 
> 赞同：0
> 
> 时间：2012-04-25T10:51:54.567
> 
> 标签：asp.net, entity-framework, static-methods, generic-list

这就是我的困境。我正在编写一个自定义的一次性内容管理系统，但我一生都无法让这种方法正常工作。我想要做的是在单独的文件夹中创建一个包含方法的洗衣清单，并在需要时在我想要调用它们的任何 Web 表单上调用它们。

我创建了一个 WebApp 并在应用程序内创建了一个名为 App_Code 的文件夹。在 App_Code 内部，有一个名为“TestimonialService”的公共类。这里是：

```
/******************** TESTIMONIAL SERVICE ****************/

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using BlueTreeSecurity.App_Code.Data;

namespace BlueTreeSecurity.App_Code.Testimonials
{
public class TestimonialService
{
    private readonly CMSObjectContext _context;
    public TestimonialService(CMSObjectContext context)
    {
        this._context = context;
    }

    #region methods

    /// <summary>
    /// Gets all testimonials
    /// </summary>
    /// <returns>testimonial collection</returns>
    public List<Testimonial> GetAllTestimonials()
    {
        var query = from t in _context.Testimonials
                    orderby t.DisplayOrder ascending
                    select t;
        if (query.Count() > 0)
        {
            var testimonial = query.ToList();
            return testimonial;
        }
        else
        {
            return null;
        }
    }

    #endregion
    }
} 
```

然后在实际的 aspx.cs 页面上，我调用这样的函数：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using BlueTreeSecurity.App_Code;
using BlueTreeSecurity.App_Code.Data;
using BlueTreeSecurity.App_Code.Testimonials;

namespace BlueTreeSecurity
{
    public partial class Testimonials : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            this.Page.Title = "Testimonials | ...";

            Bind_Data();
    }

    protected void Bind_Data()
    {
        /** when i try to use intellisense here it's not recognized. **/

        var testimonials = TestimonialService.GetAllTestimonials();

        rptTestimonials.DataSource = testimonials;
        rptTestimonials.DataBind();
    }
} 
```

}

确切的错误吐回是这样的：

```
Error   1   
An object reference is required for the non-static field, method, or property
'BlueTreeSecurity.App_Code.Testimonials.TestimonialService.GetAllTestimonials()' 
```

伙计们，任何事情都会不胜感激。我在这里扯我的头发。

这是项目结构

```
- Blue Tree Security (main project)
   - App_Code
      +  Data
      +  Testimonials
         + TestimonialService.cs
   Rest of the .aspx, .aspx.cs, and .ascx files. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:59:46.637

如果我在这里没有完全误解，那么您收到的错误消息就是告诉您问题出在哪里。将 GetAllTestimonials() 设为静态或实例化 TestimonialService 实例。

```
protected void Bind_Data()
{
    var testimonialService = new TestimonialService(yourContextObect);

    var testimonials = testimonialService.GetAllTestimonials();

    rptTestimonials.DataSource = testimonials;
    rptTestimonials.DataBind();
} 
```

# android - 填充RelativeLayout中的空间

> ID：10314154
> 
> 赞同：1
> 
> 时间：2012-04-25T10:51:55.487
> 
> 标签：android, android-layout, android-widget

`RelativeLayout`如何完全`widget`填充另一个的左边界和右边界之间的`parent`空间`widget`？

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/vsname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/seticonimage"
        android:hint="@string/entername"
        android:inputType="text" />

    <EditText
        android:id="@+id/vsdesc"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/vsname"
        android:layout_toLeftOf="@+id/seticonimage"
        android:hint="@string/shrtdesc"
        android:inputType="text" />

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/vsdesc"
        android:layout_toLeftOf="@+id/seticonimage"
        android:prompt="@string/icon_prompt" />

    <ImageView
        android:id="@+id/seticonimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/vsdesc"
        android:adjustViewBounds="true"
        android:contentDescription="@string/description"
        android:scaleType="fitStart"/>

     <TextView
        android:id="@+id/memmory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/seticonimage"
        android:text="1000 MB"
        android:textStyle="bold" />
</RelativeLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="96dp"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/cache"
            android:textSize="16dp" />

        <NumberPicker
            android:id="@+id/cache_size_picker"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="95dp"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/data"
            android:textSize="16dp" />

        <NumberPicker
            android:id="@+id/data_size_picker"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="96dp"
        android:layout_height="match_parent"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        android:padding="3dp" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/system"
            android:textSize="16dp" />

        <NumberPicker
            android:id="@+id/system_size_picker"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>
</LinearLayout> 
```

我想`@id/memmory`填充其父级的右边框和`@id/spinner`.

```
 ---------------------------------------------
|                           |                 |
|                           |                 |
|                           |                 |
|                           |    ImageView    |
|       Stuff               |                 |
|                           |                 |
|                           |                 |
|                           |-----------------
|                           |    TextView     |
----------------------------------------------
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                   Stuff                     |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
|                                             |
 --------------------------------------------- 
```

这就是它的样子，注意 TextView 是居中对齐的。我尝试将 compundDrawable 用于 textview，但遗憾的是，当我膨胀我的对话框时它没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:48:00.653

一个相对布局内的所有东西在获得这样一个屏幕时会更好，

图片 - 父顶部 - 真，父右 - 真，垂直居中 - 真，布局宽度和高度 - wrapcontent

文本视图 - 布局下方 - 图像，左对齐 - 图像，右对齐 - 图像，布局宽度和高度 - wrapcontent

东西 1 - 顶部对齐 - 图像，底部对齐 - 文本视图，左侧 - 图像，布局宽度和高度 - wrapcontent

stuff2 - stuff1 的底部，布局宽度和高度 - 填充父级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:29:08.247

我删除`ImageView`并添加`android:drawableTop`属性到`TextView`. 这按预期工作。

```
<!--    <ImageView
        android:id="@+id/seticonimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:adjustViewBounds="true"
        android:contentDescription="@string/description"
        android:scaleType="fitStart"
        android:src="@drawable/cm7_icon" /> -->

    <TextView
        android:id="@+id/icon_and_memory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:drawableTop = "@drawable/cm7_icon"
        android:gravity="center_horizontal"
        android:text="1000 MB"
        android:textStyle="bold" /> 
```

# c - 在不使用环回网络的情况下将数据包转发到同一主机中的服务

> ID：10314155
> 
> 赞同：3
> 
> 时间：2012-04-25T10:52:10.157
> 
> 标签：c, linux, networking, udp, netfilter

我有这个 libnetfilter_queue 应用程序，它根据一些 iptables 规则从内核接收数据包。在直接解决我的问题之前，我提供了一个示例可行的代码和其他工具来设置测试环境，以便我们的问题定义和可能的解决方案可以更加准确和健壮。

以下代码描述了应用程序的核心功能：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <netinet/in.h>
#include <linux/types.h>
#include <linux/netfilter.h>    /* for NF_ACCEPT */
#include <errno.h>

#include <libnetfilter_queue/libnetfilter_queue.h>
#define PREROUTING 0
#define POSTROUTING 4
#define OUTPUT 3

/* returns packet id */
static u_int32_t
print_pkt (struct nfq_data *tb)
{
  int id = 0;
  struct nfqnl_msg_packet_hdr *ph;
  struct nfqnl_msg_packet_hw *hwph;
  u_int32_t mark, ifi;
  int ret;
  unsigned char *data;

  ph = nfq_get_msg_packet_hdr (tb);
  if (ph)
    {
      id = ntohl (ph->packet_id);
      printf ("hw_protocol=0x%04x hook=%u id=%u ",
          ntohs (ph->hw_protocol), ph->hook, id);
    }

  hwph = nfq_get_packet_hw (tb);
  if (hwph)
    {
      int i, hlen = ntohs (hwph->hw_addrlen);

      printf ("hw_src_addr=");
      for (i = 0; i < hlen - 1; i++)
    printf ("%02x:", hwph->hw_addr[i]);
      printf ("%02x ", hwph->hw_addr[hlen - 1]);
    }

  mark = nfq_get_nfmark (tb);
  if (mark)
    printf ("mark=%u ", mark);

  ifi = nfq_get_indev (tb);
  if (ifi)
    printf ("indev=%u ", ifi);

  ifi = nfq_get_outdev (tb);
  if (ifi)
    printf ("outdev=%u ", ifi);
  ifi = nfq_get_physindev (tb);
  if (ifi)
    printf ("physindev=%u ", ifi);

  ifi = nfq_get_physoutdev (tb);
  if (ifi)
    printf ("physoutdev=%u ", ifi);

  ret = nfq_get_payload (tb, &data);
  if (ret >= 0)
    printf ("payload_len=%d ", ret);

  fputc ('\n', stdout);

  return id;
}

static int
cb (struct nfq_q_handle *qh, struct nfgenmsg *nfmsg,
    struct nfq_data *nfa, void *data)
{
  uint32_t ip_src, ip_dst;
  struct in_addr s_ip;
  struct in_addr d_ip;
  uint16_t src_port;
  uint16_t dst_port;
  int verdict;
  int id;
  int ret;
  unsigned char *buffer;
  struct nfqnl_msg_packet_hdr *ph = nfq_get_msg_packet_hdr (nfa);
  if (ph)
    {
      id = ntohl (ph->packet_id);
      printf ("received packet with id %d", id);
    }
  ret = nfq_get_payload (nfa, &buffer);
  ip_src = *((uint32_t *) (buffer + 12));
  ip_dst = *((uint32_t *) (buffer + 16));
  src_port = *((uint16_t *) (buffer + 20));
  dst_port = *((uint16_t *) (buffer + 22));
  s_ip.s_addr = (uint32_t) ip_src;
  d_ip.s_addr = (uint32_t) ip_dst;
  *(buffer + 26) = 0x00;
  *(buffer + 27) = 0x00;
  printf ( "source IP %s", inet_ntoa (s_ip));
  printf ( "destination IP %s", inet_ntoa (d_ip));
  printf ( "source port %d", src_port);
  printf ( "destination port %d", dst_port);
  if (ret)
    {
      switch (ph->hook)
    {
    case PREROUTING:
      printf ( "inbound packet");
      //my_mangling_fun();
      break;
    case OUTPUT:
      printf ( "outbound packet");
      //my_mangling_fun();
      break;
    }
    }
  verdict = nfq_set_verdict (qh, id, NF_ACCEPT, ret, buffer);
  if (verdict)
    printf ( "verdict ok");
  return verdict;
}

int
main (int argc, char **argv)
{
  struct nfq_handle *h;
  struct nfq_q_handle *qh;
  struct nfnl_handle *nh;
  int fd;
  int rv;
  char buf[4096] __attribute__ ((aligned));

  printf ("opening library handle\n");
  h = nfq_open ();
  if (!h)
    {
      fprintf (stderr, "error during nfq_open()\n");
      exit (1);
    }

  printf ("unbinding existing nf_queue handler for AF_INET (if any)\n");
  if (nfq_unbind_pf (h, AF_INET) < 0)
    {
      fprintf (stderr, "error during nfq_unbind_pf()\n");
      exit (1);
    }

  printf ("binding nfnetlink_queue as nf_queue handler for AF_INET\n");
  if (nfq_bind_pf (h, AF_INET) < 0)
    {
      fprintf (stderr, "error during nfq_bind_pf()\n");
      exit (1);
    }

  printf ("binding this socket to queue '0'\n");
  qh = nfq_create_queue (h, 0, &cb, NULL);
  if (!qh)
    {
      fprintf (stderr, "error during nfq_create_queue()\n");
      exit (1);
    }

  printf ("setting copy_packet mode\n");
  if (nfq_set_mode (qh, NFQNL_COPY_PACKET, 0xffff) < 0)
    {
      fprintf (stderr, "can't set packet_copy mode\n");
      exit (1);
    }

  fd = nfq_fd (h);

  for (;;)
    {
      if ((rv = recv (fd, buf, sizeof (buf), 0)) >= 0)
    {
      printf ("pkt received\n");
      nfq_handle_packet (h, buf, rv);
      continue;
    }
      /* if your application is too slow to digest the packets that
       * are sent from kernel-space, the socket buffer that we use
       * to enqueue packets may fill up returning ENOBUFS. Depending
       * on your application, this error may be ignored. Please, see
       * the doxygen documentation of this library on how to improve
       * this situation.
       */
      if (rv < 0 && errno == ENOBUFS)
    {
      printf ("losing packets!\n");
      continue;
    }
      perror ("recv failed");
      break;
    }

  printf ("unbinding from queue 0\n");
  nfq_destroy_queue (qh);

#ifdef INSANE
  /* normally, applications SHOULD NOT issue this command, since
   * it detaches other programs/sockets from AF_INET, too ! */
  printf ("unbinding from AF_INET\n");
  nfq_unbind_pf (h, AF_INET);
#endif

  printf ("closing library handle\n");
  nfq_close (h);

  exit (0);
} 
```

请注意，在回调函数中，对 my_mangling_fun() 的两次调用被注释掉了。这是我处理传入和传出数据包的地方。我认为这段代码足以描述我的情况。如果需要进一步澄清，请询问，我将发布更多详细信息。

可以说随附的 iptables 规则如下：

```
$iptables -t mangle -A PREROUTING -p udp --dport 5000 -j NFQUEUE
$iptables -t mangle -A OUTPUT -p udp --sport 5000 -j NFQUEUE 
```

让我们编译并启动 udp 的东西。

```
$gcc -g3 nfq_test.c -lnfnetlink -lnetfilter_queue
$./a.out (should be as root) 
```

现在我们可以通过 netcat 客户端和服务器模式将垃圾 udp 有效负载提供给这个东西

```
$nc -ul 5000
$nc -uvv <IP> 5000 
```

这将在标准输出中打印来自我的 netfilter_queue 应用程序的数据包。现在开发环境已经设置好了，我们可以进行下一步了。

我们正在努力实现的目标如下：

我们的服务器正在监听 5000 端口。现在所有发往 udp 端口​​ 5000 的传入数据包都将由内核排队。这个队列的句柄将交给我们之前列出的用户应用程序。这个队列机制是这样工作的：当一个数据包可用时，回调函数（我们代码中的 cb()）被调用。处理后，回调函数调用nfq_set_verdict()。**返回判决**后，下一个数据包将从队列中弹出。请注意，如果之前的数据包没有被发出判决，则该数据包不会从队列中弹出。这个判断值是 NF_ACCEPT 用于接受数据包，NF_DROP 用于丢弃数据包。

现在，如果我想在不接触客户端和服务器端代码的情况下连接传入和传出数据包的 udp 有效负载怎么办？

如果我想从我们的应用程序这个应用程序连接 udp 有效负载，那么我们需要手头有多个数据包。但是我们已经看到，在对前一个数据包发出判决之前，数据包不会从队列中弹出。

那么如何做到这一点呢？

一种可能的解决方案是向每个数据包发出 NF_DROP 并将这些数据包保存在中间数据结构中。假设我们已经做到了。但是这个数据包怎么能被传递到监听 5000 端口的服务呢？

我们不能使用网络堆栈来传递数据包，因为如果我们这样做，那么数据包将再次进入 NFQUEUE。

另一个问题是，服务器完全不知道这个应用程序。这意味着它不应该在数据包中看到任何差异。它应该看到数据包，就好像它来自原始客户端一样。

我听说应用程序可以通过编写一些文件，在不使用网络层（ip，端口）的情况下将数据发送到同一主机中的服务器。我不知道这个说法的有效性。但是，如果有人对此有所了解，那就太好了。

我可能会因为过于冗长而被否决。但我认为这可能是一个有趣的会议。我们可以一起找到解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:15:10.063

我提出以下解决方案：

*   将数据包存储在应用程序中并返回判决 NF_DROP
*   使用 RAW 套接字将数据包重新注入网络堆栈
*   使用 DSCP 标记连接的 UDP 数据包（请参阅 IP 数据包格式）
*   在 iptables 中，添加一条规则以匹配此 DSCP (--dscp) 并直接接受数据包，而不通过您的 netfilter 应用程序

如果您的提供商已经使用 DSCP 标记了某些数据包，您可以添加一些 iptables 规则来清除它们，例如：

```
iptables -t mangle -A INPUT -j DSCP --set-dscp 0 
```

我希望这可以解决您的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:34:19.357

首先，非常感谢 Aftnix！您的示例启动了我的自动数据包检查唤醒局域网项目。我想让我的家庭服务器在空闲时休眠，但是一旦有请求进来就会醒来。这个想法是检查 ddwrt 路由器上的请求，确定它是合法请求并发送 wol 包。对于 SMTP，想法是将多个数据包排队，让另一端对一些虚假响应感到满意，并透明地启动真实服务器。

我稍微修改了您的示例以将 1 个数据包排队并与下一个数据包一起发送。这只是一个概念验证，但效果很好。

```
// struct and variable needed to store 1 packet
struct packetbuffer {
  struct nfq_q_handle *qh;
  u_int32_t id;
  u_int32_t verdict;
  u_int32_t data_len;
  unsigned char *buf;
};

struct packetbuffer pbuf;
int counter = 0;

static int cb (struct nfq_q_handle *qh, struct nfgenmsg *nfmsg,
   struct nfq_data *nfa, void *data)
{
  uint32_t ip_src, ip_dst;
  struct in_addr s_ip;
  struct in_addr d_ip;
  uint16_t src_port;
  uint16_t dst_port;
  int verdict;
  int id;
  int ret;
  unsigned char *buffer;
  struct nfqnl_msg_packet_hdr *ph = nfq_get_msg_packet_hdr (nfa);
  if (ph)
  {
      id = ntohl (ph->packet_id);
      printf ("received packet with id %d", id);
  }
  ret = nfq_get_payload (nfa, &buffer);
  ip_src = *((uint32_t *) (buffer + 12));
  ip_dst = *((uint32_t *) (buffer + 16));
  src_port = *((uint16_t *) (buffer + 20));
  dst_port = *((uint16_t *) (buffer + 22));
  s_ip.s_addr = (uint32_t) ip_src;
  d_ip.s_addr = (uint32_t) ip_dst;
  *(buffer + 26) = 0x00;
  *(buffer + 27) = 0x00;
  printf ( "source IP %s", inet_ntoa (s_ip));
  printf ( "destination IP %s", inet_ntoa (d_ip));
  printf ( "source port %d", src_port);
  printf ( "destination port %d", dst_port);
  if (ret)
  {
    switch (ph->hook)
    {
      case PREROUTING:
        printf ( "inbound packet");
        //my_mangling_fun();
        break;
      case OUTPUT:
        printf ( "outbound packet");
        //my_mangling_fun();
      break;
    }
  }

  // My modification starts here
  if ((counter % 2) == 0)
  {
    pbuf.qh = qh;
    pbuf.id = id;
    pbuf.data_len = ret;
    pbuf.buf = malloc(ret);
    memcpy(pbuf.buf, buffer, ret);
    printf(" queue package %d \n", id);
  }
  else
  {
      printf(" output 1st package %d, len=%d\n", pbuf.id, pbuf.data_len);
      verdict = nfq_set_verdict (pbuf.qh, pbuf.id, NF_ACCEPT, pbuf.data_len, pbuf.buf);
      free(pbuf.buf);

      printf(" output 2nd package %d, len=%d\n", id, ret);
      verdict = nfq_set_verdict (qh, id, NF_ACCEPT, ret, buffer);
  }
  counter++;
  return 0;
} 
```

这不是所有的代码，但应该很明显改变了什么。

我知道我参加聚会有点晚了，但我决定发布这个解决方案以供将来参考，并希望得到一些批评。

编辑：嗯，也许我最好写一个像rinetd这样的用户空间进程。

# c# - 如何从日期列表中找到最近的和较大的？

> ID：10314156
> 
> 赞同：0
> 
> 时间：2012-04-25T10:52:12.990
> 
> 标签：c#

给定开始日期，我如何从列表中找到较大和最近的开始日期？

这是我的代码，但我获取最近代码的方式似乎不正确：

```
Activity oActivityNearestLarger = null;

List<Activity> oActivityByStartDateList = ClassForDBCalls.ActivityLISTByOutingID(iOutingID)
    .OrderBy(a => a.StartDate)
    .ToList();

long lLeastTicksDifference = 0; // initialize
int iIndexOfTheNearestLargerActivity = 0;

for (int i = 0; i < oActivityByStartDateList.Count; i++)
{
    // the start of the loop, set the lRecordTicksDifference
    if (i == 0)
    {
        lLeastTicksDifference = Math.Abs(oActivityByStartDateList[0].StartDate.Value.Subtract(dtStartDate).Ticks);
    }

    long lCurrentTicksDifference = Math.Abs(oActivityByStartDateList[i].StartDate.Value.Subtract(dtStartDate).Ticks);

    // get the larger, closest start datetime in the activities for the outing
    if (oActivityByStartDateList[i].StartDate > dtStartDate)
    {
        //  is the current activity startdate closer 
        //  to the to be added startdate (is it the nearest to the datetime being added?)
        if (lCurrentTicksDifference <= lLeastTicksDifference)
        {
            // if it has the least difference (meaning closer) store it for comparison in the next iteration
            lLeastTicksDifference = lCurrentTicksDifference;

            oActivityNearestLarger = oActivityByStartDateList[i];

            // set the index to be used to determine the Activity previous to it
            iIndexOfTheNearestLargerActivity = i;
        }
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:58:08.000

这不会做吗？

```
Activity nearestToStart = 
    lassForDBCalls.ActivityLISTByOutingID(iOutingID)
    .OrderBy(a => a.StartDate)
    .FirstOrDefault(a => a.StartDate >= myStartDate) 
```

还是我错过了什么？

**抱歉，刚刚看到第一次尝试有多愚蠢**

```
Activity nearestToStart = 
    lassForDBCalls.ActivityLISTByOutingID(iOutingID)
    .Where(a => a.StartDate >= myStartDate)
    .OrderBy(a => a.StartDate)
    .FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:59:46.897

您可以过滤列表以查找大于的日期`dtStartDate`，然后对其进行排序并取第一个，即*较大和最近的开始日期*。

```
var result = oActivityByStartDateList.Where(x => x.StartDate > dtStartDate).OrderBy(x => x.StartDate).First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:01:58.250

怎么样

```
var startDateList = ClassForDBCalls.ActivityLISTByOutingID(iOutingID);

oActivityNearestLarger = startDateList
    .Where(a => a.StartDate > dtStartDate)
    .OrderBy(a => a.StartDate).First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:04:10.030

我认为您还需要检查最大日期是否晚于 datetime.now。最近将给出最接近今天的日期，即使它早于今天。

```
DateTime nearest = oActivityByStartDateList.OrderBy(q => Math.Abs((q.StartDate - DateTime.Now).TotalMilliseconds)).First().StartDate;
     DateTime largest = oActivityByStartDateList.Where(p => p.StartDate.CompareTo(DateTime.Now) > 0).OrderByDescending(p => p.StartDate).First().StartDate; 
```

# qt - 如何在 Qt 中设置 QTableWidget 背景透明？

> ID：10314157
> 
> 赞同：4
> 
> 时间：2012-04-25T10:52:14.537
> 
> 标签：qt, background, transparency, qtablewidget

我正在开发一个使用 QTableWidgets 的应用程序，我需要将其背景设置为透明，我曾尝试`setStyleSheet "background:transparent;"`从表单中设置，但没有任何反应，还有其他方法吗？我发布截图

![在此处输入图像描述](../Images/928002cd33441db243df3bc3833ecd06.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T10:58:08.323

你在正确的轨道上。尝试：

```
setStyleSheet("QTableWidget {background-color: transparent;}"
              "QHeaderView::section {background-color: transparent;}"
              "QHeaderView {background-color: transparent;}"
              "QTableCornerButton::section {background-color: transparent;}");
QTableWidget *table = new QTableWidget(latticeView);
table->setRowCount(2);
table->setColumnCount(2); 
```

请注意，我在创建表格小部件之前设置样式表。我不知道为什么，但这似乎是必要的。

# android - 按字母顺序对 ListView 进行排序

> ID：10314159
> 
> 赞同：0
> 
> 时间：2012-04-25T10:52:19.357
> 
> 标签：android, listview, sorting, sql-order-by

我有一个由 JSON 文件中的对象填充的 ListView。我想根据这个对象按字母顺序对 ListView 进行排序：`vidLocation.name`

我怎么能做到这一点？

这是我的 ListView 类：

```
public class ProjectsList extends ListActivity implements OnItemClickListener, VideoLocationReceiver{
    /** Called when the activity is first created. */

    private VideoLocation[] videoLocations = null;
    private VideoLocationAdapter videoLocationAdapter = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.projects_list);

        doSync();
        //storeSharedPrefs();
        ListView lv = getListView();
        lv.setOnItemClickListener(this);

        videoLocationAdapter = new VideoLocationAdapter(ProjectsList.this, 
                R.layout.listitems, 
                new VideoLocation[0]);
        lv.setAdapter(videoLocationAdapter);

        //CREATE VideoLocation[] from Database!

        JsonDB dbhelper = new JsonDB(ProjectsList.this);
        SQLiteDatabase db = dbhelper.getWritableDatabase();

        db.beginTransaction();
        videoLocations = dbhelper.getVideoLocations(db);
        db.setTransactionSuccessful();//end transaction
        db.endTransaction();
        db.close();
    }

    @Override
    public void onResume(){
        super.onResume();
        DBSync.setVideoLocationReceiver(ProjectsList.this);
    }

    @Override
    public void onPause(){
        super.onResume();
        DBSync.setVideoLocationReceiver(null);
    }

    @Override
    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Intent listIntent = new Intent(this, ProjectDetailsActivity.class);

        VideoLocation vidLocation = videoLocations[position];

        listIntent.putExtra("documentary_video_url",vidLocation.documentary_video_url);

        listIntent.putExtra("spendino.de.ProjectDetail.position",position);
        startActivity(listIntent);

    }

    protected void storeSharedPrefs() {
        final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        if (prefs.getBoolean("first-time", true)) {
            doSync();
            prefs.edit().putBoolean("first-time", false).commit(); // record the fact that the app has been started at least once
        }
    } 

    void doSync() {
        Intent serviceIntent = new Intent(this, DBSync.class);
        startService(serviceIntent);
    }

    public class VideoLocationAdapter extends ArrayAdapter<VideoLocation> {
        public ImageLoader imageLoader; 
        ImageLoader loader = null;

        public VideoLocationAdapter(Context context, int resource, VideoLocation[] vidLocs) {
            super(context, resource, vidLocs);
            ProjectsList.this.videoLocations = vidLocs;       
            loader = new ImageLoader(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if(convertView == null){
                convertView = ProjectsList.this.getLayoutInflater().inflate(R.layout.listitems, null, true);
            }

            VideoLocation vidLocation = videoLocations[position];
            ImageView v = (ImageView)convertView.findViewById(R.id.image);
            String url = vidLocation.documentary_thumbnail_url;
            v.setTag(url);
            loader.DisplayImage(url, ProjectsList.this, v);
            TextView titleView = (TextView)convertView.findViewById(R.id.txt_title);
            titleView.setText(vidLocation.name);
            return convertView;
        }

        @Override
        public int getCount(){
            return videoLocations==null?0:videoLocations.length;
        }

        @Override
        public VideoLocation getItem(int position){
            return videoLocations[position];
        }

        @Override
        public boolean hasStableIds(){
            return true;
        }

        @Override
        public boolean isEnabled(int position){
            return true;
        }

        @Override
        public long getItemId(int position){
            return videoLocations[position].id;
        }

        public void setVideoLocationData(VideoLocation[] newData){
            ProjectsList.this.videoLocations = newData;
            VideoLocationAdapter.this.notifyDataSetChanged();
        }
    }

    @Override
    public void receivedVideoLocationData(VideoLocation[] vidLocs) {
        final VideoLocation[] locs = vidLocs;

        if (vidLocs==null) {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    //show popup and inform about missing network
                }
            });
        }else{
            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    videoLocationAdapter.setVideoLocationData(locs);
                    Log.d("ProjectsList", "updating video locations...");
                }
            });
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:58:36.027

我看到您正在从数据库中获取数据。在 sqllite 查询中，您可以给出排序顺序。我在这里找不到您查询 db 的行。尝试这样的事情

```
public Cursor fetchRow(String tableName, String[] columnslist,
            String condition) throws SQLException {
        Log.i("DB Fetch arg ", condition);
        Cursor mCursor = mDb.query(true, tableName, columnslist, condition,
                null, null, null,  "_id" + " DESC",null);

        if (mCursor != null) {
            Log.i("DB", "NOT NULL "+mCursor.getCount());
            mCursor.moveToFirst();

        }
        return mCursor;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:57:24.433

您是否在查询中设置了 DEFAULT_SORT_ORDER？如果没有，通过这样做，您可以轻松地按字母顺序列出它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:01:17.787

使用预定义的排序技术

# java - Spring - 自动装配具有构造函数的类

> ID：10314161
> 
> 赞同：5
> 
> 时间：2012-04-25T10:52:19.707
> 
> 标签：java, spring, autowired

> **可能重复：**
> [无论如何@Autowire 需要构造函数参数的bean？](https://stackoverflow.com/questions/6739566/anyway-to-autowire-a-bean-that-requires-constructor-arguments)

在我的控制器中，我想使用 @Autowired 使用方法/构造函数自动装配来注入一个类。例如使用：

```
@Autowired 
private InjectedClass injectedClass; 
```

我的问题是注入的类 injectionClass 有一个构造函数，我需要从控制器向构造函数传递一个变量。如何将值传递给构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:22:35.747

如果您使用注解，您可以将 @Autowired 注解应用到 MyClass 的构造函数，这将自动连接您传递给 MyClass 的特殊构造函数的 bean。考虑跟随例如

```
public class MovieRecommender {

  @Autowired
  private MovieCatalog movieCatalog;

  private CustomerPreferenceDao customerPreferenceDao;

  @Autowired
  public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
      this.customerPreferenceDao = customerPreferenceDao;
  }

  // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T10:56:46.103

您可以使用`@Resource(name = "x")`注释标记私有数据成员，也可以在应用程序上下文 XML 中使用构造函数注入来连接它们。

注解和 XML 配置可以在 Spring 中混合使用。它不必是全部或全部。

```
<bean id="myClass" class="foo.bar.MyClass">
    <constructor-arg ref="yourArgRefHere"/> 
</bean> 
```

# spring - Spring调度程序（石英）如何暂停所有调度程序并在resumeAll之前重新调度它们

> ID：10314166
> 
> 赞同：0
> 
> 时间：2012-04-25T10:52:41.383
> 
> 标签：spring, quartz-scheduler

需求非常明确，首先我 pauseAll 调度程序，在 resumeAll 之前，我想重新安排作业（我的意思是更改触发器表达式）并使用新的触发器表达式而不是以前的触发器表达式使它们恢复。

是否可以在暂停时重新安排调度程序？换句话说，可以通过以下方式进行吗？

```
 scheduler.pauseAll(); // pause first
        scheduler.rescheduleJob(...); // reschedule while it is paused??
        scheduler.resumeAll(); // resume All with the new job-trigger expressions as above 
```

（由于项目结构的限制，我现在无法测试确切的场景，我需要时间进行构建测试并适应项目）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:44:49.603

我今天发现即使调度程序处于暂停状态，也可以重新调度作业。因此，我通过上面提到的以下代码和平完成了它：

```
 scheduler.pauseAll(); // pause first
    scheduler.rescheduleJob(...); // reschedule while it is paused
    scheduler.resumeAll(); // resume All 
```

# php - 这种清理功能是否可以避免大多数攻击？

> ID：10314167
> 
> 赞同：0
> 
> 时间：2012-04-25T10:52:41.487
> 
> 标签：php, security, xss, sql-injection, csrf

此功能是否会将我的应用程序从大多数不正确的输入中拯救出来？用户输入只能是带有数字的文本。

```
function sanitize($data){
    $data = strip_tags($data);
    $data = htmlspecialchars($data,ENT_QUOTES);
    $data = filter_var($data,FILTER_SANITIZE_STRING);
    $data = filter_var($data,FILTER_SANITIZE_STRING,FILTER_FLAG_STRIP_LOW);
    return $data;           
} 
```

PS 需要任何其他信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:19:20.600

没有所谓的“只是清理”数据。您必须针对特定用例适当地清理数据，无论是发送到数据库、用作文件名还是回显给用户，等等。您清理数据（句号）的尝试注定要失败，因为没有清理数据（句号）之类的东西。这甚至没有意义。“清理”数据的概念只有在与您希望清理数据的上下文配对时才有意义。

特别是，如果您打算清理数据以进入数据库（不清楚 - 您的问题没有特别提及数据库，但它具有“sql-injection”标签），那么您很可能需要有关数据库连接的信息您正在使用以正确执行此操作。

# scroll - 滚动被键盘隐藏的内容。xcode 4.3.2

> ID：10314172
> 
> 赞同：0
> 
> 时间：2012-04-25T10:53:09.133
> 
> 标签：scroll, hidden, text-files

使用 xcode 4.3.2。我希望这是我最后一次求助。

我有一个带有 4 个文本字段的屏幕。编辑时，底部的 2 个被键盘隐藏。我希望能够向下滚动，以便可以编辑这 2 个隐藏字段。我已经粘贴了我的 .m 和 .h 文件。有些事情不太对劲。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController;
@property (strong, nonatomic) IBOutlet UIScrollView *scrollview;
@property (strong, nonatomic) IBOutlet UITextField *TextField1;
@property (strong, nonatomic) IBOutlet UITextField *TextField2;
@property (strong, nonatomic) IBOutlet UITextField *TextField3;
@property (strong, nonatomic) IBOutlet UITextField *TextField4;
@property (strong, nonatomic) IBOutlet UITextField *activefield;

- (IBAction)HideKeyBoard:(id)sender; 
```

视图控制器.m

```
@interface ViewController ()
@end
@implementation ViewController

@synthesize scrollview;
@synthesize TextField1;
@synthesize TextField2;
@synthesize TextField3;
@synthesize TextField4;
@synthesize activefield;

 - (void)viewDidLoad

{   

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
activefield = textField;
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
activefield = nil;
}
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];
}
// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey]
                     CGRectValue].size;
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollview.contentInset = contentInsets;
    scrollview.scrollIndicatorInsets = contentInsets;
    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, activefield.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0,
                                          activefield.frame.origin.y-kbSize.height);
        [scrollview setContentOffset:scrollPoint animated:YES];

    }     

}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
  {
   UIEdgeInsets contentInsets = UIEdgeInsetsZero;
 scrollview.contentInset = contentInsets;
 scrollview.scrollIndicatorInsets = contentInsets;
 }

 - (void)viewDidUnload
 {

[self setScrollview:nil];
[self setActivefield:nil];
[self setTextField1:nil];
[self setTextField2:nil];
[self setTextField3:nil];
[self setTextField4:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)HideKeyBoard:(id)sender {

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T00:30:48.507

[滑动 UITextFields 以避开键盘](http://cocoawithlove.com/2008/10/sliding-uitextfields-around-to-avoid.html)

我也遇到过这个问题。上面的链接真的帮助了我。我希望它也能帮助你

在 .h 文件中，您必须创建这样的属性

```
@property CGFloat animatedDistance; 
```

然后在 .m 文件中，您必须添加以下内容：

```
@synthesize animatedDistance;

static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 216;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 162; 
```

那么你必须添加这个方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    CGRect textFieldRect =
        [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
        [self.view.window convertRect:self.view.bounds fromView:self.view];

CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
CGFloat numerator =
    midline - viewRect.origin.y
        - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION)
        * viewRect.size.height;
CGFloat heightFraction = numerator / denominator;

if (heightFraction < 0.0)
{
    heightFraction = 0.0;
}
else if (heightFraction > 1.0)
{
    heightFraction = 1.0;
}

UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
if (orientation == UIInterfaceOrientationPortrait ||
    orientation == UIInterfaceOrientationPortraitUpsideDown)
{
    animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
}
else
{
    animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
}

   CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

而已。祝你好运 ： ）

# http - Pragma 和 Cache-Control 标头之间的区别？

> ID：10314174
> 
> 赞同：191
> 
> 时间：2012-04-25T10:53:10.743
> 
> 标签：http, http-headers, request, protocols, httpresponse

[我在Wikipedia](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)上读到了*Pragma*标题，它说：

> “Pragma: no-cache 标头字段是用于请求的 HTTP/1.0 标头。它是浏览器告诉服务器和任何中间缓存它想要一个新版本的资源，而不是服务器的一种方式告诉浏览器不要缓存资源。一些用户代理在响应中确实注意这个标头，但是 HTTP/1.1 RFC 特别警告不要依赖这种行为。

但是一直没看懂是干什么的？`Cache-Control`值是的标头`no-cache`和`Pragma`值也是的标头有什么区别`no-cache`？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-04-25T11:00:48.937

`Pragma`是 HTTP/1.0 实现并且`cache-control`是相同概念的 HTTP/1.1 实现。它们都是为了防止客户端缓存响应。旧客户端可能不支持 HTTP/1.1，这就是该标头仍在使用的原因。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2013-02-24T08:33:24.257

没有区别，`Pragma`只是定义为适用于客户端的请求，而客户端`Cache-Control`的请求和服务器的回复都可以使用。

因此，就标准而言，它们只能从客户端发出请求和服务器接收客户端请求的角度进行比较。[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32)将场景定义如下：

> HTTP/1.1 缓存应该将“Pragma: no-cache”视为客户端发送了“Cache-Control: no-cache”。HTTP 中不会定义新的 Pragma 指令。
> 
> ```
>  Note: because the meaning of "Pragma: no-cache as a response
>   header field is not actually specified, it does not provide a
>   reliable replacement for "Cache-Control: no-cache" in a response 
> ```

我阅读上述内容的方式：

*   如果您正在编写客户端并且需要`no-cache`：

    *   只需`Pragma: no-cache`在您的请求中使用，因为您可能不知道`Cache-Control`服务器是否支持；
    *   但在回复中，要决定是否缓存，请检查`Cache-Control`
*   如果您正在编写服务器：

    *   在解析来自客户端的请求时，检查`Cache-Control`; 如果没有找到，检查`Pragma: no-cache`并执行`Cache-Control: no-cache`逻辑；
    *   在回复中，提供`Cache-Control`.

当然，现实可能与 RFC 中所写或暗示的不同！

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-04-03T19:07:40.223

# facebook - 从 Facebook 共享中隐藏应用程序链接（在页面选项卡上）

> ID：10314176
> 
> 赞同：0
> 
> 时间：2012-04-25T10:53:24.280
> 
> 标签：facebook, tabs, share

我正在尝试确定是否可以在共享页面选项卡时从提要帖子中删除或更改应用程序链接（“XX 分钟前来自*[应用程序名称]* ”在评论旁边以及*[应用程序名称]*是指向链接的链接旁边应用程序）。但是有问题的应用程序只提供了一个自定义页面选项卡，而不是一个真正的应用程序，所以当用户被指向应用程序页面时有点烦人。

我正在使用**FB.ui**共享页面选项卡。

或者也许有人有替代解决方案来改善用户体验？

这是共享代码（由于该应用尚未公开，因此进行了一些修改：）

```
 FB.ui({
method: 'feed',
name: 'name of the page tab',
picture: 'http://url/to/image.png',
link: 'http://url/to/page/tab',
caption: 'caption',
message: 'message',
description: 'description',
actions: [
    {
    name: 'Participate',
    link: 'http://url/to/page/tab'
    }
]
}, shareComplete); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T15:00:45.940

*编辑：刚刚看到这个问题是两年前的问题，哦，好吧，我将把它留在这里以供将来参考：P

我所做的是在我的服务器上创建一个 redirect.php，它只是重定向到我想要的页面选项卡：

```
<?php

header('Location: PAGE_TAB_URL');

exit();

?> 
```

然后，在 Facebook 应用程序上，我添加了一个网站作为新平台，并将 redirect.php 网址作为网站网址。

现在，在共享 ui 上，当用户单击应用程序名称时，它会将它们重定向到页面选项卡。唯一的缺点是在将鼠标悬停在链接上时可以看到重定向 url，但我可以忍受。

# java - java.util.logging、ResourceBundles、SAAJ：加载 Glassfish OSGi webapp 包时出现异常

> ID：10314182
> 
> 赞同：0
> 
> 时间：2012-04-25T10:53:48.243
> 
> 标签：java, glassfish, osgi, java.util.logging, saaj

以下异常使我失去了理智：

```
java.lang.IllegalArgumentException: 
com.sun.xml.messaging.saaj.soap.LocalStrings != com.sun.xml.internal.messaging.saaj.soap.LocalStrings
    at java.util.logging.Logger.getLogger(Logger.java:357)
    at com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl.<clinit>(SAAJMetaFactoryImpl.java:41) 
```

当我尝试将 WAB（Web 应用程序 OSGi 包）部署到 Glassfish（3.1.1）时，就会发生这种情况。

我正在尝试通过将字符串放入文件中来使用最新版本的 SAAJ ( `com.sun.xml.messaging.saaj...`) 而不是旧的 JDK 版本（即 JDK版本） 。`com.sun.xml.internal.saaj...``com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl``META-INF/services/javax.xml.soap.MessageFactory`

似乎在 OSGi 类加载开始之前正在进行一些日志记录，因此在初始化（SAAJ 的实现）`ResourceBundle`的静态`log`字段期间返回了“错误” 。`com.sun.xml.messaging.saaj.soap.MessageFactoryImpl``javax.xml.soap.MessageFactory`

有人看过这个/提供的任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:02:55.933

从来没有深入了解这一点，但 manifest voodoo 最终使它消失了（所有`javax.xml.ws`/`javax.ws.rs`包都在`Import-Package`而不是 bundle classpath 中`WEB-INF/lib`）。

也可以通过使用来解决它

```
-Djavax.xml.soap.MessageFactory=com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl 
```

在 Glassfish 启动时，尽管显然这会强制所有`MessageFactory`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T23:05:13.847

请参阅：[JDK-6741342：Logger.getLogger() 在 saaj 类上抛出 java.lang.IllegalArgumentException](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6741342)。

> 相反，它与将 saaj 引入 JDK 6 相关......并且解决方法涉及重新排序 jar。

# android - onScrollListener 中自定义适配器的上下文是什么

> ID：10314186
> 
> 赞同：0
> 
> 时间：2012-04-25T10:54:03.897
> 
> 标签：android, android-emulator

通常我们使用

```
adapter = new CustomArrayAdapter(this, R.layout.feed_items, R.id.label, feed_products_list); 
```

但是如果我们在 setOnScrollListener 方法或类似的方法中，它不会允许“this”作为参数，那么我应该给出什么？我应该为我的自定义数组适配器添加一个新的构造函数，以 onScrollListener 作为参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:28:17.200

你可以用三样东西，

```
MyActivity.this
getApplicationContext()
this 
```

明智地使用它们:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:02:44.347

在这种情况下，我通常会为活动类创建一个类级别的私有静态实例变量，并在 onCreate 中设置它。

然后该变量可以用作私有内部 onClickListeners 等内部的上下文

编辑以提供示例

```
Public class MyClass extends Activity {

private static MyClass instance;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    instance = this;
...
    mVideoView.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            adapter = new CustomArrayAdapter(instance, R.layout.feed_items, R.id.label, feed_products_list);
.... 
```

ETC

# jquery-ui - 从自定义按钮调用 JQuery datepicker hide()，日历在 IE 中重新打开

> ID：10314187
> 
> 赞同：0
> 
> 时间：2012-04-25T10:54:11.290
> 
> 标签：jquery-ui, jquery-ui-dialog, jquery-ui-datepicker

我有一个 JQuery 对话框，其中有两个与 Jquery 日期选择器关联的文本框，用于接受日期范围。

我在 Jquery 日期选择器中添加了一个自定义按钮，称为“保存”。问题是，当我单击按钮时，与其关联的功能会执行，但日历仍保持打开状态。我必须单击日期选择器之外的区域才能关闭日历。我该如何解决？这仅在 IE 中可见。与 FF 一起工作正常。

```
var startDateTextBox = $('#StartDate');
var endDateTextBox = $('#EndDate'); 
```

这是我的自定义函数：

```
 function addSaveButton(textBoxObject)
    {
        //These variables can be ignored. Used to set limits for the other datepicker
        var idTextBox = textBoxObject.attr('id');
        var otherTextBoxObject = idTextBox == "StartDate" ? endDateTextBox : startDateTextBox;
        var optionName = idTextBox == "StartDate" ? "minDate" : "maxDate";

        setTimeout(function ()
        {
            var buttonPane = textBoxObject
                                .datepicker("widget")
                                .find(".ui-datepicker-buttonpane");

            $("<button>", {
                text: "Save",
                click: function ()
                {
                    //Get the date
                    var dateToBeSet = getDateToSet(idTextBox);

                    //Set the date
                    textBoxObject.datepicker('setDate', dateToBeSet);

                    //Set the limits for the other date picker
                    otherTextBoxObject.datepicker("option", optionName, dateToBeSet);

                    //Hide this datepicker
                    textBoxObject.datepicker("hide");

                    //Remove focus
                    textBoxObject.blur();
                }
            }).appendTo(buttonPane).addClass(".ui-datepicker-buttonpane ui-state-default ui-priority-primary ui-corner-all");
        }, 1);
    } 
```

这是我的日期选择器代码对于其中一个文本框：

```
startDateTextBox.datepicker({
        autoSize: true,
        closeText: "OK",
        showButtonPanel: true,
        constrainInput: true,
        showWeek: true,
        maxDate: "+0",
        dateFormat: 'd MM yy',
        changeMonth: true,
        changeYear: true,

        beforeShow: function (input, inst)
        {
            addSaveButton(startDateTextBox);
        },

        onChangeMonthYear: function (year, month, inst)
        {
            addSaveButton(startDateTextBox);
        },

        onSelect: function (dateText, inst)
        {
            //Set the limits for the other date picker
            instance = startDateTextBox.data("datepicker");
            date = $.datepicker.parseDate(instance.settings.dateFormat || $.datepicker._defaults.dateFormat,
                                    dateText,
                                    instance.settings);

            endDateTextBox.datepicker("option", "minDate", date);
        },

        onClose: function (dateText, inst)
        {
            //Remove focus
            startDateTextBox.blur();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:02:50.547

我更新了函数`addSaveButton(textBoxObject)`并添加了代码以暂时禁用与数据选择器关联的输入文本框并且它起作用了。

```
function addSaveButton(textBoxObject)
    {
       ...

        setTimeout(function ()
        {
            var buttonPane = textBoxObject
                                .datepicker("widget")
                                .find(".ui-datepicker-buttonpane");

            $("<button>", {
                text: "Save",
                click: function ()
                {
                    .
                    .
                    .

                    //Remove focus
                    textBoxObject.blur();

                    //Disable textbox
                    textBoxObject.attr("disabled", "disabled");

                    setTimeout(function ()
                    {
                        // Removed the 'disabled' attribute after 1 millisecond
                        textBoxObject.removeAttr("disabled");  
                    }, 1);

                }
            }).appendTo(buttonPane).addClass(".ui-datepicker-buttonpane ui-state-default ui-priority-primary ui-corner-all");
        }, 1);
    } 
```

# javascript - 将 JQuery mobile 1.7.1 框架升级到新的 1.1

> ID：10314189
> 
> 赞同：0
> 
> 时间：2012-04-25T10:54:24.683
> 
> 标签：javascript, css, jquery-mobile, stylesheet

我想将我的 JQuery 移动应用程序从以前的版本升级到新版本。这是新[JQuery Mobile的链接](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)

我犯的一个大错误是我对 jquery 移动样式表进行了大量更改。但是在 javascripts 上我没有改变任何东西。

目前我的标题中有这个

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 
    <title>Selligent Mobile</title> 
    <link rel="apple-touch-icon" href="images/app-icon.png"/>  
    <!-- CSS includes -->
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <!--<link href="css/jquery.mobile.simpledialog.min.css" rel="stylesheet" type="text/css" />-->
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css" />
    <!-- Script includes -->    

    <script src="js/jquery-1.7.1.min.js"></script> 
    <script src="js/jquery.mobile-1.0.1.min.js"></script>
    <script src="js/SelligentMobile.js"></script>
    <script src="js/jquery.mobile.simpledialog2.js" type="text/javascript"></script>

</head> 
```

有人知道我该如何正确地做到这一点吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:28:15.247

我剥离了结构和主题，将它们单独放置。我将它们分解为结构和核心主题 css。这些占据了主要 css 的大部分

我创建了一个自定义文件，其中包含我的新主题和我需要的自定义 css。这样，当我进入比较版本时，我仍然估计需要一两个小时来比较项目，因为可能需要对我的自定义进行新添加（加载是一个很好的例子）

棘手的部分是，如果主题的结构发生变化，您仍然必须与您的自定义主题进行协调，以确保不存在新的添加内容。

*   structure.css - 这包含 JQM 的基本结构（我在最顶部也有一个自定义的 reset.css - 它
    可以被打破，但我选择只是覆盖那里的现有结构）

*   core-themes.css - 包含核心主题 a、b、c、d、e

*   自定义主题 - f、g、h、i、j、k、l - 等等。

*   custom-css - 包含非常具体的覆盖

# ios - 如何同步打开/创建 UIManagedDocument？

> ID：10314190
> 
> 赞同：2
> 
> 时间：2012-04-25T10:54:34.233
> 
> 标签：ios, objective-c-blocks, uimanageddocument

如标题所述，我想`UIManagedDocument`同步打开，即我希望我的执行等到打开完成。我只在 mainThread 上打开文档。

当前打开的 API 使用块

```
[UIManagedDocument openWithCompletionHandler:(void (^)(BOOL success))]; 
```

[链接](http://omegadelta.net/2011/05/10/how-to-wait-for-ios-methods-with-completion-blocks-to-finish/)中提到的锁使用在主线程以外的线程上运行良好。如果我使用 locks on `mainThread`，它会冻结应用程序的执行。

任何意见将是有益的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:04:40.787

首先，让我说我**强烈反对**这样做。您的主线程只是等待，在等待调用完成时什么也不做。在某些情况下，如果您的应用程序在主线程上没有响应，系统会终止您的应用程序。这是非常不寻常的。

我想您应该是决定何时/如何使用各种编程工具的人。

这正是你想要的......阻塞主线程，直到完成处理程序运行。同样，我**不**建议这样做，但是，嘿，这是一种工具，我会采取 NRA 的立场：枪支不会杀人……

```
__block BOOL waitingOnCompletionHandler = YES;
[object doSomethingWithCompletionHandler:^{
    // Do your work in the completion handler block and when done...
    waitingOnCompletionHandler = NO;
}];
while (waitingOnCompletionHandler) {
    usleep(USEC_PER_SEC/10);
} 
```

另一种选择是执行运行循环。然而，这并不是真正同步的，因为运行循环实际上会处理其他事件。我在一些单元测试中使用了这种技术。它与上面类似，但仍然允许在主线程上发生其他事情（例如，完成处理程序可能会调用主队列上的操作，这可能不会在前面的方法中执行）。

```
__block BOOL waitingOnCompletionHandler = YES;
[object doSomethingWithCompletionHandler:^{
    // Do your work in the completion handler block and when done...
    waitingOnCompletionHandler = NO;
}];
while (waitingOnCompletionHandler) {
    NSDate *futureTime = [NSDate dateWithTimeIntervalSinceNow:0.1];
    [[NSRunLoop currentRunLoop] runUntilDate:futureTime];
} 
```

还有其他方法，但这些方法简单易懂，而且像拇指酸痛一样突出，所以很容易知道你在做一些非正统的事情。

我还应该注意，除了测试之外，我从未遇到过这样做的充分理由。您可以死锁您的代码，并且不从主运行循环返回是一个滑坡（即使您自己手动执行它 - 请注意，调用您的内容仍在等待并再次运行循环可能会重新输入该代码，或导致其他一些问题）。

异步 API 很棒。条件变量方法或对并发队列使用屏障是在使用其他线程时进行同步的合理方法。同步主线程与您应该做的相反。

祝你好运……并确保你登记你的枪支，并始终携带你的隐藏武器许可证。这当然是狂野的西部。总有一个约翰卫斯理哈登在那里寻找枪战。

# php - WooCommerce - 在产品页面上显示不含税价格

> ID：10314194
> 
> 赞同：1
> 
> 时间：2012-04-25T10:54:42.297
> 
> 标签：php, javascript, wordpress

我正在为 Wordpress 使用 WooCommerce 和 WooShop 主题。

我需要在单个产品页面上显示不含税的产品价格。

如果我理解正确，有两个功能：

**$_product->get_price()
$_product->get_price_ exclude_tax()**

*这是**Price.php**（在单一产品下）*

```
<p itemprop="price" class="price"><?php echo $product->get_price_html(); ?></p> 
```

这导致

```
 'price_html' => '<span class="price">'.$variation->get_price_html().'</span>', 
```

有任何想法吗？

**谢谢！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:00:25.410

我知道这个问题已经过时了，但是对于其他正在寻找以正确方式使用这些功能的答案的人来说，这是一个尝试。

我发现当我使用它时`$_product->get_price_excluding_tax()`，它会返回全价。

但是，在 WooCommerce 中调整设置后，它现在可以正确显示。

**您应该在“定义的目录价格包括税”**的方框中打勾。

![税收设置](../Images/47979affadba4db3afda03941df5b78b.png)

您还需要确保在“税收”选项卡中设置了税收规则。我为英国增值税设置了一个 20%。

![税收创造](../Images/d2a48d0ec32af870216b04ab44ed73d9.png)

希望这对将来的人有所帮助。

谢谢，米奇。

# python-2.7 - 在 python 2.7 的 add 方法中实现一个检查类型的集合的正确方法是什么？

> ID：10314201
> 
> 赞同：1
> 
> 时间：2012-04-25T10:55:03.703
> 
> 标签：python-2.7

我想将集合的元素限制为某个类的实例。我应该设置子类并覆盖 add 方法吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:19:39.947

首先，在构建一组自定义对象时，您可能需要查看[这个问题](https://stackoverflow.com/questions/2532365/python-how-do-sets-work)及其答案。简而言之，您需要定义诸如`__hash__()`和之类的方法，`__eq__()`以便您可以将它们添加到集合中：

```
class Foo:
    def __init__(self, value=0):
        self.value = value
    def __hash__(self):
        return self.value
    def __eq__(self, other):
        return isinstance(other, Foo) and self.value == other.value 
```

现在您可以比较对象和`set`罐子：

```
In [19]: a = Foo()

In [20]: b = Foo()

In [21]: c = Foo(1)

In [22]: a == b
Out[22]: True

In [23]: b == c
Out[23]: False

In [24]: s = set([a, b, c])

In [25]: s
Out[25]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>])

In [26]: s.add(Foo())

In [27]: s
Out[27]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>]) 
```

问题是，你仍然可以添加一些完全不同的东西：

```
In [28]: s.add(1)

In [29]: s
Out[29]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>,
     1]) 
```

一种方法是按照您的建议覆盖`add()`方法：`set`

```
In [30]: class FooSet(set):
   ....:     def add(self, elem):
   ....:         if isinstance(elem, Foo):
   ....:             set.add(self, elem)
   ....:         else:
   ....:             raise TypeError('%s is not a Foo' % elem)
   ....:             # or just put "pass" here for silent behavior

In [31]: s = FooSet([a, b, c])

In [32]: s
Out[32]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>])

In [33]: s.add(Foo())

In [34]: s
Out[34]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>])

In [35]: s.add(Foo(2))

In [36]: s
Out[36]: 
set([<__main__.Foo instance at 0x267f758>,
     <__main__.Foo instance at 0x267f950>,
     <__main__.Foo instance at 0x26808c0>])

In [37]: s.add(2)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

...

TypeError: 2 is not a Foo 
```

# c# - 获取列表项

> ID：10314202
> 
> 赞同：0
> 
> 时间：2012-04-25T10:55:06.140
> 
> 标签：c#, ravendb

我得到了以下文件：

```
public class TreeNode
{
    string Id;
    string Owner;  //"users/1"
    string TodoListId;  //"todolists/1"
    string ParentId; //"treenodes/1"
}

public class TodoList
{
    string Id;
    List<TodoItem> Items;
}

public class TodoListItem
{
    bool IsCompleted;
} 
```

如何获取当前用户尚未完成的所有项目？我应该重新设计任何文件吗？

我想要类似的东西：

```
from all treenodes belonging to the current user
load all todolists
and return all active items within those lists 
```

但在一次服务器往返中

**更新 2**

这是我尝试使用两个查询的方法（不支持 SelectMany）：

```
var todoListIds = _dbSession.Query<UserTreeNode>()
    .Where(x => x.UserId == user.Id)
    .Select(x => x.TodolistId);
var nodes = _dbSession.Query<Todolist>()
    .Where(x => x.Id.In(todoListIds))
    .SelectMany(x => x.Items.Where(item => !item.IsCompleted)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:10:22.020

您不能让 RavenDB 仅返回单个文档的子集，因此在您的情况下，您需要获取整个文档，`TodoList`然后仅在客户端上进行过滤。

[您可以使用Include 功能](http://ayende.com/blog/4584/ravendb-includes)在单个网络调用中执行此操作，这应该可以：

```
var todoListIds = _dbSession.Query<UserTreeNode>()
    .Include(x => x.TodoListId)
    .Where(x => x.UserId == user.Id)
    .Select(x => x.TodolistId);

foreach (var userListId in todoLisIds)
{
    //This won't cause an extra network call, because the session will have already loaded it
    var todoList = _dbSession.Load<TodoList>(userListId);

    //In-memory filtering to get the outstanding items
    var activeItems = todoList.Items.Where(x => x.IsCompleted).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:24:54.263

我认为您提供的不是真正的代码，但以下内容为您提供了 todolist 对象中未完成的项目。

```
list.Items.Where(q => q.IsCompleted == false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:59:28.553

我花了一些时间，我相信你需要一种不同的方法，（请注意它与架构相关的东西，我不能 100% 确定它，它可能需要一些修改）。似乎您想为用户创建一个 TODO 列表。我认为，如果你能以某种方式构建它可能会更好

*   一个用户可以有一个或多个待办事项列表（在我的示例中我假设了一个待办事项列表）
*   一个待办事项列表项可以有多个实际待办事项实例

我将遵循类似于以下的结构：

```
public class User
{
    public string ID { get; set; }//.... All User Attributes AND

}

public class TodoList
{
    public string Id { get; set; }
    public User owner { get; set; }

}

public class TodoListItem
{
    public string ItemID { get; set; }
    public TodoList parent { get; set; }
    public string ItemDescription { get; set; }
    public bool IsCompleted { get; set; }
} 
```

上面我有一个 User 类，它当前代表您的用户。然后我有一个 ToDoList 类，它持有 User 类对象（**不是 user 的 id**），然后我有 ToDoListItem ，它持有 ToDoList 对象作为父对象。
如果我们从数据库的角度来看，那么我们在 User 和 ToDoList 之间存在一对多关系，而在 ToDoList 和 ToDoListItem 之间又是一对多关系。
现在，如果您想搜索未完成工作的用户，只需尝试以下 linq 查询：

```
 var query = from t in listTDL
                where t.IsCompleted == false
                select t.parent.owner; 
```

您可能需要这些行来填充测试数据结构：

```
User user = new User() { ID = "User1" };

TodoList td = new TodoList() { Id = "TD1", owner = user};

List<TodoListItem> listTDL = new List<TodoListItem>();

TodoListItem tdl = new TodoListItem() { ItemID = "TDL1", ItemDescription = "Frist Item", IsCompleted = false, parent=td };
                listTDL.Add(tdl);
                listTDL.Add(new TodoListItem() { ItemID = "TDL2", ItemDescription = "second Item", IsCompleted = true, parent = td });
listTDL.Add(new TodoListItem() { ItemID = "TDL3", ItemDescription = "third Item", IsCompleted = true, parent = td });
listTDL.Add(new TodoListItem() { ItemID = "TDL4", ItemDescription = "fourth Item", IsCompleted = false, parent = td });

List<User> userList = new List<User>();
userList.Add(user); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:35:04.993

以下是我的做法：

```
var result = todoList.Where
(
  x => nodeList.Any
  (
    y => y.Owner == "ownerId" && y.TodoListId == x.Id
  )
).SelectMany(x => x.Items).Where(z => !z.IsCompleted); 
```

Ps 我对 RavenDB 不熟悉所以只是一个想法

# animation - Webkit 不考虑溢出：以边界半径隐藏

> ID：10314207
> 
> 赞同：19
> 
> 时间：2012-04-25T10:55:28.490
> 
> 标签：animation, webkit, overflow, css

我有一个使用 CSS3 的可爱的星际迷航红色警报动画。我的一个父元素有一个`border-radius`with ，`overflow:hidden`以便将任何内容裁剪为边框半径的形状。

这一切在 Firefox 中运行良好，但 Webkit 浏览器会在裁剪区域之外留下一些子元素。

这是我的代码：

[http://jsfiddle.net/doublewombat/EqK6R/embedded/result/](http://jsfiddle.net/doublewombat/EqK6R/embedded/result/)

具有`div`类名`curvedEdges`的`border-radius`和`overflow:hidden`。然而，“警报”文本的左右块悬挂在此半径之外，即使它们是`curvedEdges`. 或者用简单的英语来说，动画的左右边缘应该稍微弯曲（如在 Firefox 中），而不是笔直。

那么这是 Webkit 中的错误，还是我有什么问题？

如果您手边没有 Webkit 浏览器，它在 YouTube 上...

[http://www.youtube.com/watch?v=3vyVy21nWsE](http://www.youtube.com/watch?v=3vyVy21nWsE)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T11:44:13.570

首先，多么酷的演示！

我环顾四周，您似乎没有遇到问题。[别人的问题](https://stackoverflow.com/a/10296258/750593)的第二个答案为我解决了这个问题，尽管这对 safari 不起作用。解决方法是使用掩蔽：

```
-webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); 
```

对同一问题的公认答案有另一个修复，我认为这真的可以帮助你，但我似乎无法得到元素和边界半径的正确组合。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-19T16:47:03.717

我一直在尝试做同样的事情，并且正在使用边界半径将元素掩盖为一个圆圈。

我能够在 Safari 6.0.3 中使用遮罩和径向渐变来实现所需的效果（位置和大小的过渡）。

这是我添加到容器（屏蔽）元素的单行代码：

```
-webkit-mask-image: -webkit-radial-gradient(circle, white, black); 
```

我想我必须使用硬色标，如下所示，以获得硬边：

```
-webkit-mask-image: -webkit-radial-gradient(circle, white 100%, black 100%); 
```

但是，它在没有的情况下也是一样的（也许有人可以告诉我们为什么）。剪裁不像边界半径那样平滑，但它超出了无法预测的范围，超出了图像的范围。

您可能需要调整它以与旧版本的 Safari/Chrome 等一起使用，我没有在不同版本（又名 YMMV）上测试它。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-08-06T13:43:37.507

据报道，这似乎是浏览器问题：[https ://code.google.com/p/chromium/issues/detail?id=157218](https://code.google.com/p/chromium/issues/detail?id=157218)

基本上，当您将动画应用于元素时，出于性能原因，浏览器将在 GPU（图形处理单元）中处理它，而其余部分则由 CPU 处理。这最终会在遮罩上方渲染动画。

作为一种解决方法，您可以尝试添加一个不易察觉的`transform`属性，这也会触发 GPU 对遮罩元素的处理，将其提升到动画的同一级别：

```
#redAlert .curvedEdge {
    -webkit-transform: rotate(0.000001deg);
} 
```

我猜它可能会因浏览器版本而异，但据报道这些其他值也会触发 GPU 处理：`rotate(0)`，`translateZ(0)`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-11T14:44:11.287

这似乎是 GPU/硬件合成的问题。`transform: translateZ(0);`也应该解决这个问题。有关这方面的更多信息，请阅读[http://aerotwist.com/blog/on-translate3d-and-layer-creation-hacks/](http://aerotwist.com/blog/on-translate3d-and-layer-creation-hacks/)

```
-webkit-transform: translateZ(0);
transform: translateZ(0); 
```

我已经包含了供应商前缀，但您可以根据需要删除它们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-19T10:30:37.197

似乎它是一个混合的工作修复：

```
.wrap {
    -webkit-transform: translateZ(0);
    -webkit-mask-image: -webkit-radial-gradient(circle, white 100%, black 100%);
} 
```

[http://jsfiddle.net/qWdf6/82/](http://jsfiddle.net/qWdf6/82/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T11:42:36.843

您可以在其上放置一个绝对定位的 div，带有边框半径和粗黑色边框，它会阻止您想要隐藏的部分。

我为另一个关于 FF3.6 中类似问题的问题制作了一个演示：http: [//jsfiddle.net/vfp3v/15/](http://jsfiddle.net/vfp3v/15/)

[边界半径；溢出：隐藏，文本不被剪裁](https://stackoverflow.com/questions/5684749/border-radius-overflow-hidden-and-text-is-not-clipped/5685061#5685061)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T16:05:34.197

提醒一下，此修复仅适用于我将蒙版应用到具有边框半径但没有边框的容器上。最终我得到了这样的结果：

```
<div style="border-radius: 15px; border: 1px solid red;">
    <div style="border-radius: 15px; overflow: hidden; -webkit-mask-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);">
        <span style="position: relative; left; -20px;">Some stuff that overflows.</span>
    </div>
</div> 
```

内部 div 上有边框，剪裁并不完美。

完全奇怪。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-06T21:01:31.580

我找到了另一个可能的解决方案，使用 CSS3 剪辑路径，但它只适用于最新版本的 webkit（它似乎适用于 Chrome 24，但不适用于 Safari 6.0.2）。以下将围绕元素剪辑一个圆圈：

```
-webkit-clip-path: circle(50%, 50%, 100%); 
```

希望这将很快被更多的浏览器实现！看起来这个功能可以有很多很酷的应用程序。这是一篇相关的博客文章：[http](http://blog.romanliutikov.com/coding/css-clip-path-landed-in-webkit/) ://blog.romanliutikov.com/coding/css-clip-path-landed-in-webkit/ 。

# watir - 关闭浏览器错误 - 更改行为

> ID：10314212
> 
> 赞同：0
> 
> 时间：2012-04-25T10:55:41.640
> 
> 标签：watir, watir-webdriver, firewatir

当我想关闭浏览器时，我遇到了 Watir 的一些奇怪行为。

```
brs = Watir::Browser.new
=> #<Watir::Browser:0x1035fc1f8 url="about:blank" title="">
brs.close
=> true
brs
NoMethodError: undefined method `closed?' for nil:NilClass 
```

浏览器已正确关闭（如预期的那样），但之后我无法使用类/实例进行操作。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:23:48.543

我没有收到错误消息：

```
$ irb
1.9.3-p125 :001 > require "watir-webdriver"
 => true 
1.9.3-p125 :002 > b = Watir::Browser.new
 => #<Watir::Browser:0x7e1df9f913a40838 url="about:blank" title=""> 
1.9.3-p125 :003 > b.close
 => true 
1.9.3-p125 :004 > b
 => #<Watir::Browser:0x7e1df9f913a40838 closed=true> 
```

环境：

```
- Mac OS X 10.7.3
- Firefox 12.0

$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]

$ gem -v
1.8.23

$ gem list *webdriver
...
selenium-webdriver (2.21.2)
watir-webdriver (0.5.5)
... 
```

# jsf - EL 表达式语言中的 instanceof 检查

> ID：10314214
> 
> 赞同：38
> 
> 时间：2012-04-25T10:55:47.850
> 
> 标签：jsf, el, instanceof

`instanceof`有没有办法在 EL中进行检查？

例如

```
<h:link rendered="#{model instanceof ClassA}">      
    #{errorMessage1}
</h:link>
<h:link rendered="#{model instanceof ClassB}">      
    #{errorMessage2}
</h:link> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-25T13:47:39.250

您可以比较[`Class#getName()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getName--)，或者可能更好，[`Class#getSimpleName()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getSimpleName--)与`String`.

```
<h:link rendered="#{model['class'].simpleName eq 'ClassA'}">      
    #{errorMessage1}
</h:link>
<h:link rendered="#{model['class'].simpleName eq 'ClassB'}">      
    #{errorMessage2}
</h:link> 
```

`Object#getClass()`请注意使用大括号表示法指定的重要性，`['class']`因为`class`它是保留的 Java 文字，否则会在 EL 2.2+ 中引发 EL 异常。

类型安全的替代方法是在模型的公共基类中添加`public enum Type { A, B }`一些`public abstract Type getType()`。

```
<h:link rendered="#{model.type eq 'A'}">      
    #{errorMessage1}
</h:link>
<h:link rendered="#{model.type eq 'B'}">      
    #{errorMessage2}
</h:link> 
```

任何无效值都会在 EL 2.2+ 的运行时引发 EL 异常。

如果您使用的是[OmniFaces](http://omnifaces.org)，从 3.0 版开始，您可以使用[`#{of:isInstance()}`](http://omnifaces.org/docs/vdldoc/3.0/of/isInstance.fn.html).

```
<h:link rendered="#{of:isInstance('com.example.ClassA', model)}">      
    #{errorMessage1}
</h:link>
<h:link rendered="#{of:isInstance('com.example.ClassB', model)}">      
    #{errorMessage2}
</h:link> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T11:01:52.603

这在`EL`. 为此使用支持 bean：

```
public class MyBean {

    public boolean getIsClassA() {
        if(model instanceof ClassA) {
            return true;
        }
        return false;
    }

} 
```

然后通过调用支持 bean 进行检查：

```
<h:link outcome="#{PageNameA}?faces-redirect=true&amp;" rendered="#{myBean.isClassA}">      
    #{errorMessage}
</h:link> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-18T16:34:14.273

有用：

```
rendered="#{node.getClass().getSimpleName() == 'Logt_anno'}" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-18T13:48:13.173

定义一个静态函数，如：

```
public boolean isInstanceOf( Object obj, Class targetClass) {
        return targetClass.isInstance(obj);
    } 
```

为它定义一个自定义的 EL 函数，并使用它。我们还可以传递一个字符串名称并`forName()`在方法内部进行操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-03T05:36:37.730

有办法，看

[JSF EL：instanceof 保留但尚未实现？](https://stackoverflow.com/questions/5549999/jsf-el-instanceof-reserved-but-not-yet-implemented)

但是，该`instanceof`运算符仍然没有实现，至少在 Mojarra 2.1 中是这样。请在此处为错误投票：

[http://java.net/jira/browse/JSP_SPEC_PUBLIC-113](http://java.net/jira/browse/JSP_SPEC_PUBLIC-113)

目前最好的解决方法可能是将类名存储在支持 bean getter 中，而不是为每个类创建一个布尔测试方法：

```
public String getSelectedNodeClassName()
{
    return selectedNode.getClass().getSimpleName();
} 
```

所以它将是 BalusC 和 flash 解决方案的混合体。然而，它在 JSF 中的可读性比 BalusC 的要高得多，而且它非常类似于未来的`instanceof`运算符使用：

```
rendered="#{nodeManager.selectedNodeClassName eq 'ChapterNode'}" 
```

这不会像 flash 建议的那样在支持 bean 上为每个类测试生成一个方法。不过，这可能比 Flash 慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-31T14:31:05.557

不是很优雅，因为它混合了*JSP EL*和早期的*表达式语法*，但不需要任何额外的*Java*代码：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<c:set var="interfaceClass" value="<%=com.example.ClassA.class%>"/>
<c:set var="implementationClass" value="${model['class']}"/>
<c:if test="${interfaceClass.isAssignableFrom(implementationClass)}">
    <%-- Your logic here. --%>
</c:if> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-01T09:40:24.347

您可以为此使用辅助 bean：

```
@ManagedBean
public class Helper {
  public boolean isInstance(Object bean, String fullyQualifiedClassName) {
    return Class.forName(fullyQualifiedClassName).isInstance(bean);
  }
} 
```

用法：

```
<h:link rendered="#{helper.isInstance(model, 'package.ClassA')}">
  #{errorMessage1}
</h:link> 
```

这样做的好处是考虑了继承，并且您可以测试您无法修改的类（BalusC 解决方案的两个缺点）。

如果您喜欢使用简单的类名（并且不担心名称冲突），您可以使用手动填写的查找图或使用类路径扫描器（如[org.reflections）](https://github.com/ronmamo/reflections)：

```
@ManagedBean
@ApplicationScoped
public class Helper {
  private Map<String, Class<? extends MyBaseClass>> classes = 
      new Reflections("myrootpackage").getSubTypesOf(MyBaseClass.class).stream()
      .collect(Collectors.toMap(Class::getSimpleName, Function.identity()));

  public boolean isInstance(Object bean, String simpleClassName) {
    final Class<? extends MyBaseClass> c = this.classes.get(simpleClassName);
    return c != null && c.isInstance(bean);
  }
} 
```

您甚至可以将辅助函数移动到 ELResolver：

```
public class InstanceOfELResolver extends ELResolver {

  public Object invoke(final ELContext context, final Object base, 
      final Object method, final Class<?>[] paramTypes, final Object[] params) {
    if ("isInstanceOf".equals(method) && params.length == 1) {
      context.setPropertyResolved(true);
      try {
        return params[0] != null && Class.forName(params[0].toString()).isInstance(base);
      } catch (final ClassNotFoundException e) {
        return false;
      }
    }
    return null;
  }

  // ... All other methods with default implementation ...
} 
```

用法：

```
<h:link rendered="#{model.isInstanceOf('package.ClassA')}">
  #{errorMessage1}
</h:link> 
```

# c#-4.0 - 在gridview中单击鼠标选择一行

> ID：10314215
> 
> 赞同：2
> 
> 时间：2012-04-25T10:55:48.170
> 
> 标签：c#-4.0, ms-access-2007

我有一个问题，我想通过鼠标单击在 gridview 中选择一行。

我的代码是这样的：

```
protected void PeopleGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.cursor='hand';this.style.textDecoration='underline';";
            e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";

            e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink(this.gvdetails, "Select$" + e.Row.RowIndex);
        }
    } 
```

它不工作。我不知道为什么？

请就此向我提出建议。

“谢谢”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:11:24.147

找到关于[ASP.Net select row in gridview](http://msmvps.com/blogs/deborahk/archive/2010/01/25/asp-net-selecting-a-row-in-a-gridview.aspx)
的教程 在 ASPX 页面中的 GridView 标签下添加：

```
<SelectedRowStyle BackColor="Orange" /> 
```

在后面的代码中尝试以下操作：

```
protected override void Render(System.Web.UI.HtmlTextWriter writer) 
{ 
    foreach (GridViewRow row in PeopleGridView.Rows) { 
        if (row.RowType == DataControlRowType.DataRow) { 
            row.Attributes["onmouseover"] =  
               "this.style.cursor='hand';this.style.textDecoration='underline';"; 
            row.Attributes["onmouseout"] =  
               "this.style.textDecoration='none';"; 
            // Set the last parameter to True 
            // to register for event validation. 
            row.Attributes["onclick"] =  
             ClientScript.GetPostBackClientHyperlink(PeopleGridView, 
                "Select$" + row.DataItemIndex, true); 
        } 
    } 
    base.Render(writer); 
} 
```

然后，您可以使用 RowCommand （类似）捕获此事件。

```
private void PeopleGridView_RowCommand(object sender, System.Web.UI.WebControls.GridViewCommandEventArgs e) 
{ 
    if (e.CommandName == "Select") { 
        // Get the list of customers from the session  
        List<Customer> customerList = 
                 Session["Customers"] as List<Customer>;

         Debug.WriteLine(customerList[Convert.ToInt32(e.CommandArgument)].LastName);
    } 
} 
```

# spring - 未创建内存数据库，但日志显示已执行 DDL

> ID：10314216
> 
> 赞同：6
> 
> 时间：2012-04-25T10:55:50.227
> 
> 标签：spring, hibernate

我正在尝试设置 spring 环境以在内存数据库中运行，该数据库是根据提供的映射自动创建的。在执行期间，我可以在日志中看到执行了 DDL 语句，但是当休眠尝试将数据插入到创建的表中时，我收到“找不到表”异常。

**有什么问题？**

使用 spring 3.1.1 和 Hibernate 4.1.1 和 H2 版本 1.3.165。

日志看起来像（只剩下相关的记录）：

```
INFO at '25-04-2012 13:23:56.318' by thread 'main' from category 'org.hibernate.tool.hbm2ddl.SchemaExport':
HHH000227: Running hbm2ddl schema export
DEBUG at '25-04-2012 13:23:56.318' by thread 'main' from category 'org.hibernate.SQL':

    drop table DUMMIES if exists
Hibernate: 
    drop table DUMMIES if exists
DEBUG at '25-04-2012 13:23:56.318' by thread 'main' from category 'org.hibernate.SQL':

    create table DUMMIES (
        id bigint generated by default as identity,
        title varchar(255),
        primary key (id),
        unique (title)
    )
Hibernate: 
    create table DUMMIES (
        id bigint generated by default as identity,
        title varchar(255),
        primary key (id),
        unique (title)
    )
INFO at '25-04-2012 13:23:56.334' by thread 'main' from category 'org.hibernate.tool.hbm2ddl.SchemaExport':
HHH000230: Schema export complete
INFO at '25-04-2012 13:23:56.334' by thread 'main' from category 'org.springframework.context.support.ClassPathXmlApplicationContext':
Bean 'mySessionFactory' of type [class org.springframework.orm.hibernate4.LocalSessionFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO at '25-04-2012 13:23:56.631' by thread 'main' from category 'org.springframework.orm.hibernate4.HibernateTransactionManager':
Using DataSource [org.springframework.jdbc.datasource.SimpleDriverDataSource@a86d12] of Hibernate SessionFactory for HibernateTransactionManager
WARN at '25-04-2012 13:23:56.865' by thread 'main' from category 'org.hibernate.engine.jdbc.spi.SqlExceptionHelper':
SQL Error: 42102, SQLState: 42S02
ERROR at '25-04-2012 13:23:56.865' by thread 'main' from category 'org.hibernate.engine.jdbc.spi.SqlExceptionHelper':
Table "DUMMIES" not found; SQL statement:
insert into DUMMIES (id, title) values (null, ?) [42102-165] 
```

Beans.xml 看起来像（'mypackage' 是完整包名的替代品）：

```
<bean id="myDataSource"
    class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
    <property name="driverClass" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:mem:" />
    ...
</bean>

<bean id="mySessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="packagesToScan">
        <array>
            <value>mypackage.entities</value>
        </array>
    </property>
</bean>

<bean id="myTransactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="mySessionFactory" />
</bean>

<aop:config>
    <aop:pointcut id="daoMethods" expression="execution(* mypackage.*Dao.*(..))" />
    <aop:advisor advice-ref="requiredTxAdvice" pointcut-ref="daoMethods" />
</aop:config>

<tx:advice id="requiredTxAdvice" transaction-manager="myTransactionManager">
    <tx:attributes>
        <tx:method name="*" propagation="REQUIRED" />
    </tx:attributes>
</tx:advice>

class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />
<bean id="dummyDao" class="mypackage.DummyDaoImpl">
    <property name="sessionFactory" ref="mySessionFactory" />
</bean> 
```

hibernate.properties 看起来像：

```
hibernate.dialect=org.hibernate.dialect.H2Dialect
hibernate.show_sql=true
hibernate.format_sql=true
hibernate.id.new_generator_mappings=true
hibernate.hbm2ddl.auto=create-drop 
```

（创建也不起作用）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T11:20:55.500

当您将数据库 URL 指定为`jdbc:h2:mem:`H2 为每个连接创建新数据库时，每个 Hibernate 会话都会看到自己的空数据库。

因此，您需要指定数据库名称，才能从不同的连接访问同一个数据库。此外，您还需要防止数据库在没有活动连接时被关闭。生成的 URL 如下所示：`jdbc:h2:mem:foo;DB_CLOSE_DELAY=-1`.

另请注意，Spring 提供了对嵌入式数据库的内置支持，请参阅[12.8 Embedded database support](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html#jdbc-embedded-database-support)。

# c++ - C++ 未定义引用

> ID：10314220
> 
> 赞同：0
> 
> 时间：2012-04-25T10:55:59.860
> 
> 标签：c++, undefined-reference

嗨，在我的程序中，我有两个构造函数；

```
BinaryImage();

BinaryImage(int MM, int NN, double* input_data, double thresh); 
```

在我的主要;

```
BinaryImage BinaryImageObj(); 
```

这编译得很好，但是当我调用第二个构造函数时；

```
BinaryImage BinaryImageObj2(MM,NN,data,1); 
```

然而，这会带来错误；

main.cpp|| 未定义对 `BinaryImage::BinaryImage(int, int, double*, double)' 的引用

为什么会这样？，我错过了一些简单的东西吗？

谢谢

麦克风

这个矩阵类构造函数创建对象

```
Matrix::Matrix(int MM, int NN, double* input_data){

                      M = MM;
                      N = NN;
                      data = new double[M * N];
                      for ( int i =0; i < M; i++)
                      {
                          for (int j = 0; j < N; j++)
                          {
                              data[i* N+j] = input_data[i*N+j];
                           //   cout << data[i*N+j] <<"\t";
                          }
                      //    cout <<"\n";
                      }

           cout << "This is the Matrix Constructor being invoked" << endl ;
} 
```

binaryimage 类（继承自矩阵）

```
BinaryImage::BinaryImage(int MM, int NN, double* input_data, double thresh ):Matrix(MM, NN, input_data)
{
                      M = MM;
                      N = NN;
                      data = new double[M * N];
                      for ( int i =0; i < M; i++)
                      {
                          for (int j = 0; j < N; j++)
                          {
                              treshData(tresh);

                          }

                      }

} 
```

主要的

```
Matrix MatrixObj1(MM,NN,data2);

BinaryImage BinaryImageObj; 
```

编辑以显示发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:57:59.627

您没有实现构造函数，因此不会为它们生成任何符号。您可以在类定义中实现它们：

```
BinaryImage() { };
BinaryImage(int MM, int NN, double* input_data, double thresh) { }; 
```

或在实现文件中（推荐）。

你的第一个例子：

```
 BinaryImage BinaryImageObj(); 
```

编译是因为您声明了一个调用的函数，该函数`BinaryImageObj`不带参数并返回 a ，而不是像您想象`BinaryImage`的那样实际创建对象。`BinaryImage`

正确的语法是

```
 BinaryImage BinaryImageObj; 
```

# java - 如何在使用 Resttemplate 访问时获得经过身份验证的 jenkins xml api？

> ID：10314226
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:11.810
> 
> 标签：java, spring, rest, jenkins, resttemplate

我正在为我的应用程序使用 jenkins xml api。我需要访问 Jenkins 的特定 xml api 以查看其上的作业，但它需要密码。我如何验证会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:23:54.427

使用[CommonsClientHttpRequestFactory](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/client/CommonsClientHttpRequestFactory.html)作为底层客户端工厂，使用同一个客户端工厂调用 jenkins 认证方法。身份验证 cookie 将存储在底层客户端中，因此可供您的 RestTemplate 调用使用。

# jquery - 回发后刷新 JQuery 函数设置的样式

> ID：10314229
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:25.597
> 
> 标签：jquery, asp.net

当页面加载“lblCustomer”标签的样式时

```
style="display:inline-block" 
```

当我单击单选按钮列表时，此 jquery 代码运行

```
$('#<%=lblCustomer.ClientID %>').hide(); 
```

并将“lblCustomer”标签的样式更改为

```
style="display: none;" 
```

但是当我点击一个按钮来获取记录时，它的样式再次变为

```
style="display:inline-block;" 
```

页面上没有更新面板。我很惊讶按钮单击如何改变控件的样式。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:03:51.607

当页面发布时 - 它会像开始时一样纯净 - 没有 - 显示：块。

您应该通过输入元素中的 Js 保持状态，该状态将在每个回发中传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:45:58.933

您想要的效果可以通过更新面板完成。

当页面回发时，您会丢失页面的状态，除非您将该状态传递回服务器。更新面板允许您在不进行完整回发的情况下获取新数据，因此页面状态不会丢失。

您需要做的是在该区域周围放置一个更新面板，该区域将使用新记录进行更新，并将按钮作为外部触发器添加到更新面板。

[http://msdn.microsoft.com/en-us/library/bb399001.aspx](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

# android - 如何重新定位 ImageView

> ID：10314231
> 
> 赞同：1
> 
> 时间：2012-04-25T10:56:27.080
> 
> 标签：android, android-layout, android-imageview

我的 xml 文件中有一些`ImageViews`。在我的代码部分中，我想根据自己的意愿移动图像。为此，我已经完成`event.getx()`，`event.getY()` 然后使用`imageView.layout()`. 此过程不起作用。我怎样才能移动那个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T23:37:06.040

我认为这可能会有所帮助：

```
 package com.example.moveimageview;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    ImageView im;
    RelativeLayout rl;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //getting the wrapper layout from the xml
        rl = (RelativeLayout) findViewById(R.id.relative1);

        //getting the ImageView from xml
        im = (ImageView) findViewById(R.id.myImageView);

        rl.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent e) {
                // TODO Auto-generated method stub
                if(e.getAction()==android.view.MotionEvent.ACTION_DOWN)
                {
                    //sending the new coordinates to the method
                    //that will change the view's location
                    setImageViewLocation(e.getX(), e.getY());

                return true;
                }
                return false;
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private void setImageViewLocation(float x, float y)
    {
        //setting the coordinates
        im.setX(x);
        im.setY(y);

        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                im.invalidate();//invoking the view onDraw
            }
        });

    }
} 
```

（编辑）如果你想要你的 ImageView，这里是 onTouchListner 代码（与以前相同的代码只是用这个替换 OnTouchListner）：

```
rl.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent e) {
            // TODO Auto-generated method stub
            if(e.getAction()==android.view.MotionEvent.ACTION_DOWN)
            {
                //sending the new coordinates to the method
                //that will change the view's location
                setImageViewLocation(e.getRawX(), e.getRawY());

            return true;
            }

            if(e.getAction()==android.view.MotionEvent.ACTION_MOVE)
            {
                setImageViewLocation(e.getRawX(), e.getRawY());
                return true;
            }
            return false;
        }
    }); 
```

# c++ - 什么是未定义符号：soap_wsse？

> ID：10314233
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:33.197
> 
> 标签：c++, soap, openssl

我正在编写一个同时使用 openssl 和 soap 的库。我已经在 linux 中构建了我的项目，但是当我尝试加载构建后创建的 *.so 时，会引发类似“未定义符号：soap_wsse”的错误。

我知道我缺少包含一些库，有人可以建议我缺少哪个库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:18:07.090

WSSE 可能是 Web 服务安全 (WSE) 的 OASIS 之前的版本，因为我在 SOAP 请求和响应中看到了这个命名空间前缀。WSE 是一个 SOAP 扩展，用于应用身份验证令牌、签名和/或加密 SOAP 消息等安全性。例如：

`<wsse:Security soapenv:mustUnderstand="0" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">
<wsse:UsernameToken>
<wsse:Username xsi:type="xsd:string"> B8ffemWZ1***hidden***wYJJW4bua0+</wsse:Username>
<wsse:Password Type="wsse:PasswordDigest" xsi:type="xsd:string">`.

可能您使用的 SOAP 库依赖于实现标准 WSE 的库。

无论如何，你能在库源代码中为符号“soap_wse”“grep”吗？也许这可以给你一个线索。

# javascript - 用javascript拆分后获取字符串的其余部分

> ID：10314234
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:39.930
> 
> 标签：javascript, regex, split

鉴于我有这样的字符串

```
done?id=http://api?auth=1335357 
```

我只想得到这个

```
http://api?auth=1335357 
```

我使用这个 javascript 代码来做到这一点：

```
var paramEmbed = myString.split('=')[1] + "=" + hashes[0].split('=')[2]; 
```

但是正如您所看到的，这段代码并不是真正的最佳代码，因为如果字符串后面有另一个字符“=”，我将无法得到它。那么有没有办法在找到第一个“=”之后获取所有以下字符？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:57:46.177

我的建议，简单的解决方案。

```
'done?id=http://api?auth=1335357'.split('id=').pop(); 
```

所以 ：

```
var paramEmbed =myString.split('id=').pop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:04:21.497

尝试：

```
[yourstring].split(/={1}/).slice(1).join('=');
//e.g. for 'done?id=http://api?auth=1335357&foo=bar'
//=> http://api?auth=1335357&foo=bar 
```

# java - 数组中的随机数

> ID：10314238
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:47.097
> 
> 标签：java, random

我有一个数组

```
(1,2,2,2,3,3,4,5,5,5,5,5,5) 
```

考虑到元素的总和，我必须随机找到一个位置。例如，如果 5 - 是六次，而 1 - 只有一，那么 5 必须六次经常是随机的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:58:21.943

您需要获取数组的随机索引：

```
int randomIndex = Random.nextInt(array.length);
int randomValue = array[randomIndex] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T10:58:59.123

像这样的东西？

```
int array[] = {1,2,2,2,3,3,4,5,5,5,5,5,5};
int randomIndex = Random.nextInt(array.length);
int randomNumber = array[randomIndex]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:59:52.243

就像另一个答案所说的那样，您需要一个 int 范围为 0：length-1。

我建议使用：

```
Random r = new Random();
int index = r.nextInt(array.length);
int randomValue = array[index]; 
```

在这里你可以看到 Math.random() 和 Random 对象的 nextInt() 方法之间的区别：

[Math.random() 与 Random.nextInt(int)](https://stackoverflow.com/questions/738629/math-random-versus-random-nextintint)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:07:07.510

尝试这个：

```
 1 import java.util.Random;
  2 
  3 class Rnd {public static void main(String... args) {
  4     int[] data = new int[]{1,2,2,2,3,3,4,5,5,5,5,5,5};
  5     System.out.print(data[new Random().nextInt(data.length)]);
  6  }
  7 } 
```

`nextInt()`方法“返回一个伪随机、均匀分布的 int 值，介于 0（包括）和指定值（不包括）之间，取自该随机数生成器的序列。”。因为随机数是均匀分布的，所以你会更频繁地获得你的数字，因为它更频繁地包含在一个数组中。

# c - 我需要在我的 DLL 中添加什么才能将指针导出到 i_d？

> ID：10314239
> 
> 赞同：0
> 
> 时间：2012-04-25T10:56:47.990
> 
> 标签：c, cuda, labview

我正在尝试编写 DLL 函数来分配 cuda 内存并取回指向 cuda（设备）内存的指针。

第二个函数应该接受这个指针并进行计算。

我希望这个操作是分开的，因为我需要对相同的数据进行多次计算，并且我试图避免重复将相同的数据复制到 GPU 内存（这需要很多时间）-

问：我需要添加什么到我的 DLL 才能将指针导出到`i_d`？

我的 DLL：

主.cpp：

```
 extern "C" __declspec(dllexport) int cuda_Malloc ( float *i, void **i_d, int N ){
     for( float x=0; x<N; x++ )
        i[x]=x;
     kernel_cuda_Malloc( i, i_d, N );
     return 0;
  }

  extern "C" __declspec(dllexport) int cuda_Calculation( void *i_d, float *result, int N ) {
     kernel_cuda_calculation( i_d, result, N );
     return 0;
  } 
```

简单的.cu：

```
 __global__ void kernelTest( float *i, int N ){
    unsigned int tid = blockIdx.x*blockDim.x + threadIdx.x;
    if ( tid<N )
       i[tid] += 10;
  }

  int kernel_cuda_Malloc( float *i, void **i_d, int N ){
     cudaMalloc( (void**)&i_d, N*sizeof( float ) );
     cudaMemcpy( i_d, i, N*sizeof( float ), cudaMemcpyHostToDevice );
     return 0;   
  }

  void kernel_cuda_calculation( float *i_d, float *result, int N ){
     dim3 threads; threads.x = 240;
     dim3 blocks; blocks.x = ( N/threads.x ) + 1;
     kernelTest<<< threads, blocks >>>( i_d, N );
     cudaMemcpy( result, i_d, N*sizeof( float ), cudaMemcpyDeviceToHost );
     cudaFree( i_d ); 
```

}

我无法`i_d`从`cuda_Malloc`LabVIEW 中的函数中获取指针。

代码是对[https://decibel.ni.com/content/docs/DOC-20353的修改](https://decibel.ni.com/content/docs/DOC-20353)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:11.307

所有 CUDA 函数都在 CUDA 上下文中执行。为了能够在函数之间传输指针，还必须保留上下文。

您的代码没有多大意义。DLL 中的两个函数都称为 cuda_Malloc。这些函数实际上都没有返回任何东西。示例代码很好，但只有当您花时间提供您认为*应该*工作的内容时。

编辑：对不起，我错过了您试图通过修改作为参数传入的指针来返回指针的事实。为此，您必须传入指向指针的指针，而不仅仅是指针。

```
int kernel_cuda_Malloc( float *i, void *i_d, int N ){ 
```

应该

```
int kernel_cuda_Malloc( float *i, void **i_d, int N ){ 
```

# c# - 允许配置 Windows 服务

> ID：10314242
> 
> 赞同：5
> 
> 时间：2012-04-25T10:56:56.040
> 
> 标签：c#, .net, windows-services

我有一个正在创建的 Windows 服务，我想知道有哪些可用选项可以让开发人员配置该服务。

该服务是一个更大的开源项目的一部分，因此该服务将安装在许多不同的机器上。

正常我会为此使用 web/app.config，但我不确定这是否可行。

因此，我期待其他人如何处理此案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:59:00.080

你做你所期望的。您使用 app.config，它将`<exeName>.config`在项目构建时重命名，然后`<exeName>.config`将由名为`<exeName>`.

设置以分层方式应用，可能来自机器上的其他配置文件，例如 machine.config。您可以阅读有关[如何在 MSDN 上处理配置的信息](http://msdn.microsoft.com/en-us/library/1xtk877y.aspx)

**编辑**

回应评论：服务只会在启动时读取配置（出于性能原因）。如果您想稍后重新加载配置文件，我认为您需要自己处理。

您可以读取配置文件的最后修改日期/时间以确定文件是否已更改，或者设置[文件系统观察程序](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)`ConfigurationManager.RefreshSection("appSettings")`，然后通过调用和该部分告诉配置管理器在下次读取该部分时再次重新加载该 部分下次访问时将从磁盘重新加载。请参阅[ConfigurationManager MSDN 文档](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.refreshsection.aspx#Y102)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T10:59:58.277

您可以只使用与作为服务的 exe 同名的 .config 文件。

如果您的服务作为 MyService.exe 运行，它的配置文件将是 MyService.exe.config。

在 Visual Studio 中，只需添加一个应用程序配置文件。这会将 app.config 文件添加到项目中。

然后，您可以使用 ConfigurationManager 类访问 AppSettings 和 ConnectionStrings 等内容，就像使用 ASP.Net 应用程序一样。

# drupal - Drupal 视图在字段开头添加 1

> ID：10314246
> 
> 赞同：2
> 
> 时间：2012-04-25T10:57:28.563
> 
> 标签：drupal, drupal-7, drupal-views

我为视图编写了一个小的字段格式化程序，将原始秒数转换为漂亮的时间，比如 90 秒到 01:30，渲染的输出让我发疯。

问题是 01:30 变成 11:30，而 00:45 变成 10:45 等等......

我的功能是这样的：

```
function custom_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, &$items, $display) {
  $element = array();
  $settings = $display['settings'];
  switch ($display['type']) {
    case 'sectomin':
      foreach ($items as $delta => $item) {
        $time = intval($item['value']);
        $element[$delta] =  gmdate('i:s', $time);
        // dsm($element);
      }
      break;
  }

  return $element;
} 
```

dsm($element) 的输出是正确的：00:45、01:30 等，但在渲染输出中，它变为 10:45、11:30 等。

任何想法可能是什么问题？

* * *

编辑：好的，发现问题：

```
...
  foreach ($items as $delta => $item) {
    $time = intval($item['value']);
    $element[$delta] = gmdate('i:s', $time);
  }
... 
```

实际上应该是：

```
...
  foreach ($items as $delta => $item) {
    $time = intval($item['value']);
    $element[$delta] = array('#markup' => gmdate('i:s', $time));
  }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:00:38.043

尝试使用自定义格式化程序 - [http://drupal.org/project/custom_formatters/](http://drupal.org/project/custom_formatters/)模块。之后使用 date_parse_from_format("D, m/d/Y - H:i", $custom_date); 命令。请注意，在基于 Windows 的 Web 服务器中，此功能不存在。

# jsf - 预生成基于 JSF 的 Web 应用程序以获得更好的性能和离线模式

> ID：10314254
> 
> 赞同：1
> 
> 时间：2012-04-25T10:57:59.773
> 
> 标签：jsf, web-applications, iphone-web-app, offline-browsing

我有一个 JSF Web 应用程序，其中的动态内容基于从数据库中获取的数据。由于所有数据都是提前可用的，我想看看是否有一种方法可以在服务器上将所有页面预生成为最终的 HTML 格式，以便用户体验更好的性能而不必等待用于页面生成。此外 - 我的应用程序正在移动设备上运行，我希望可以通过提前将所有内容下载到设备来选择离线使用它（假设我不需要任何业务逻辑来实时工作）。

所以，我在这里不是在谈论 JSF 的内置缓存——我正在寻找一种将 JSF 应用程序转换为运行速度更快并且也可以离线运行的静态网站的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:41:32.833

您可以使用 HTML5 进行离线缓存。

在这里查看一些关于它的文章：

1.  [教程](http://blog.cubeanywhere.com/2010/10/html5-offline-webapps-practical-example.html)
2.  [教程](http://html5doctor.com/go-offline-with-application-cache/)

互联网上有更多关于 HTML5 和离线工作的示例

# javascript - 如何从 Web 服务提供飞行前请求

> ID：10314255
> 
> 赞同：1
> 
> 时间：2012-04-25T10:57:59.973
> 
> 标签：javascript, ajax, google-chrome, same-origin-policy, cors

我有一个可以运行的网络服务`GET`。要访问此 Web 服务，需要传递一些自定义标头。

当我尝试使用`GET`方法从 javascript 代码访问 Web 服务时，请求方法正在更改为`OPTIONS`. （域名不同）

我阅读了一些文章，发现带有自定义标头的请求将被预先发送，在这种情况下，在实际方法调用之前，将向服务器发出带有 OPTIONS 方法的请求。

但我的问题是在`OPTIONS`调用之后，真正的方法（即`GET`）没有被调用。

`OPTIONS`调用返回状态为 401 。

我怀疑这是因为我的网络服务`GET`只支持。我该如何解决这个问题？请帮忙。（我的代码在 IE 上运行良好，但不能在其他浏览器上运行，例如 Chrome）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:06:44.303

要检查的两件事（不知道您的服务器端语言/技术是什么）：

1.  您是否将`OPTIONS`其作为有效方法包含在您的`Access-Control-Allow-Methods`? 例子：

    ```
    Access-Control-Allow-Methods: GET, OPTIONS 
    ```

2.  您的请求发送的自定义标头是否被允许返回到浏览器？例子：

    ```
    Access-Control-Allow-Headers: X-PINGOTHER 
    ```

远程服务器必须在任何安全的、符合标准的浏览器（即不是旧版本的 IE）之前返回这两个（并且肯定是第二个），才能允许非来源响应通过。

因此，如果您想在 HTTP 服务器级别实现此功能并保持 Web 服务的可移植性，您可以尝试以下方法：

我们假设您的 Web 服务 URL 是`http://example.org/service`，并且服务的路径是`/srv/www/service`

如果您运行的是 Apache 2.0，附加标头的语法是`add`，在 2.2 上，使用`set`.

所以，你会修改`/srv/www/service/.htaccess`：

```
 Header set Access-Control-Allow-Methods "GET, OPTIONS"
 Header set Access-Control-Allow-Headers "X-MY_CUSTOM_HEADER1,X-MY_CUSTOM_HEADER2"
 Header set Access-Control-Allow-Origin "*" 
```

当然，`mod_headers`需要开启 Apache 模块才能使上述功能正常工作。此外，将 allow-origin 设置为通配符是有风险的，如果您发送`Access-Control-Allow-Credentials: true`标头，它实际上会导致请求失败（在这种情况下不能使用通配符）。此外，使用`SetEnvIf`Apache 的 mod，您可以微调 htaccess 文件以仅在适当的时候返回标头，而不是针对该目录的所有请求。

# backbone.js - Backbone.js - 检查复选框的最佳方法是什么

> ID：10314263
> 
> 赞同：9
> 
> 时间：2012-04-25T10:58:52.730
> 
> 标签：backbone.js, underscore.js

我的主干模型有一个布尔值（isRegistered）。当我渲染视图时，我希望根据布尔值的真/假值选中或取消选中复选框。

我目前的努力是这样的：

```
<input id="isRegisteredCheckbox" checked="<%= isRegistered ? 'checked': ''"/> 
```

这不起作用，因为根据 W3C 规范，需要完全删除选中的属性才能取消选中复选框。

我如何使用主干模板来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T11:11:51.460

您可以使用测试来附上`checked='checked'`

```
<input id="isRegisteredCheckbox" <% if (isRegistered) { %>checked="checked"<% } %> /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T11:02:46.190

你不需要这个`checked=`部分。如果需要检查，只需在标签中打印检查。

* * *

**编辑**

既然我们已经确定只打印“已签出”是有效的 html，您可以尝试为简单起见：

使成为：

```
var registered;
var tmpl = _.template(your template);
isRegistered ? registered = 'checked' : registered = '';
var tmpl_data = _.extend(this.model.toJSON(), {registered: registered}); // or whatever values you need to add
$(this.el).html(tmpl(tmpl_data)); 
```

模板：

```
<input type="checkbox" {{ registered }}> 
```

使用此方法无需在模板中使用凌乱的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:04:17.293

我曾经在这种情况下使用 a `Decorator`。我在这里公开了一个示例，说明它的外观：

```
// code simplified and not tested
var MyModelDecorator = Backbone.Model.extend({
  initialize: function( opts ){
    this.model = opts.model;
  },

  toJSON: function(){
    var json =
      _.extend(
        this.model.toJSON(),
        {
          checked: this.checked(),
          css_classes: this.cssClasses()
        }
      );

    return json;
  },

  checked: function(){
    result = "";
    if( this.model.get( "checked" ) ) result += "checked=\"true\"";
    return result;
  },

  cssClasses: function(){
    result = "";
    if( this.model.get( "checked" ) )         result += " checked";
    if( this.model.get( "key" ) == "value" )  result += " important";
    return result;
  }
}); 
```

我添加了一个额外的`css_classes` *装饰器属性*，因此您可以看到这种方法可以成为多种情况的通用解决方案。

你`View.render`可以看起来像这样：

```
// code simplified and not tested
var myView = Backbone.View.extend({
  template: _.template( "<input id=\"isRegisteredCheckbox\" <%= checked %> class=\"<%= css_classes %>\" />" ),

  render: function(){
    var decorator = new MyModelDecorator({ model: this.model });
    this.$el.html( this.template( decorator.toJSON() ) );
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T16:51:34.203

这是一个非常简单的方法。

```
<input <% if(isRegistered) print("CHECKED"); %>  type="checkbox" id="isRegisteredCheckbox" /> 
```

请注意，我使用 <% 而不是 <%= 作为条件。

您可以在模型中将 isRegistered 的值设置为“CHECKED”或“”并调用

```
<input id="isRegisteredCheckbox" <%= registered %> /> 
```

有类似的东西

```
serialize: function() {
  var isChecked = (isRegistered) ? "CHECKED" : "";
  return {registered : ischecked};
}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T02:35:51.580

我有一个类似的问题，我继承了某人的 Django + hamlpy (HAML) + Backbone.js + Undescore.js 和 Mustache 模板（真是一团糟！）

hamlpy 中的 Haml 处理并不完全像：

```
%input{ :checked => {{isChecked}} ? true : None } 
```

或任何类似的事情。我有一个 Django hamlpy 堆栈跟踪。

我设法通过使用 Mustache 的倒置部分来破解它（参见： http: [//mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)）

```
{#isChecked}
%input{:checked => 'true' }
{/isChecked}
{^isChecked}
 %input{ ... without the checked attribute ... }
{/isChecked} 
```

无论如何，希望这能帮助一些可怜的谷歌人不要浪费他们的生命力！

# r - Rgraphviz 库加载错误

> ID：10314269
> 
> 赞同：1
> 
> 时间：2012-04-25T10:59:09.820
> 
> 标签：r

我有一个关于`Rgraphviz`. 安装`Graphviz`并`Rgraphviz`正确后，我无法加载`Rgraphviz`库。错误如下所示：

```
Error : .onLoad failed in loadNamespace() for 'Rgraphviz', details:
  call: value[[3L]](cond)
  error: unable to load shared object     '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rgraphviz/libs/x86_64/Rgraphviz.so':

dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rgraphviz/libs/x86_64
  /Rgraphviz.so, 6): Library not loaded: /usr/local/lib/libgvc.5.dylib

  Referenced from:         
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rgraphviz/libs/x86_64/Rgraph  viz.so

 Reason: image not found

Check that (1) graphviz is installed on your system; (2) the
installed version of graphviz matches '2.26.3'; this is the version
used to build this Rgraphviz package; (3) graphviz is accessible to
R, e.g., the path to the graphviz 'bin' directory is in the system
'PATH' variable.  See additional instructions in the 'README' file of
the Rgraphviz 'source' distribution, available at

 http://bioconductor.org/packages/release/bioc/html/Rgraphviz.html

Ask further questions on the Bioconductor mailing list

http://bioconductor.org/docs/mailList.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:11:33.737

您需要检查 Graphviz 是否安装在R 正在寻找的同一**路径上。**如果不是，你应该

```
$ export LD_LIBRARY_PATH = path_to_graphviz 
```

在调用 R 之前。或者将此行添加到您的 bash 配置文件中以便自动运行它。

# mongodb - CouchDB 与 MongoDB（内存利用率）

> ID：10314272
> 
> 赞同：14
> 
> 时间：2012-04-25T10:59:24.490
> 
> 标签：mongodb, couchdb

在低内存环境（低于 1GB）中哪个性能更好？

我过去使用过 MongoDB，它在 512mb 的盒子上使用 250mb 的数据库似乎很难记忆，CouchDB 也一样吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T00:43:48.323

CouchDB 使用很少的内存。它已经嵌入到 iOS 和 Android 中，或多或少没有经过修改——Erlang 等等。

CouchDB 完全通过文件 i/o 工作，将缓存委托给操作系统（文件系统缓存）。CouchDB 服务器上的一个典型情况是看到非常少量的“已使用”内存，但有大量用于“缓存”。在专用的 CouchDB 服务器上，该数字基本上是 CouchDB 的数据；但是，管理和重新分配这些资源取决于它所属的操作系统。

换句话说，CouchDB 在低内存环境中表现出色。事实上，嵌入式环境（例如移动）仍然非常快，因为低内存在某种程度上通过低延迟存储设备（固态磁盘）来平衡。

# javascript - 模拟 Stack Overflow 平滑投票操作

> ID：10314279
> 
> 赞同：4
> 
> 时间：2012-04-25T10:59:55.880
> 
> 标签：javascript, asp.net, ajax

我想知道谷歌翻译器（translate.google.com）如何在没有回发的情况下节省用户率，还有其他类似的行为（例如在堆栈溢出中）用户查看没有回发（一切都如此快速和流畅）但那里是一些数据库交互，例如在 Stack Overflow 中投票问题/答案或评论，是 Ajax 吗？还是只是 JavaScript？真是太好了，如何使用VS2010、C#、ASP.NET 实现这些类型的操作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:03:00.343

### 概述

这有两个方面：

*   当你做了一些需要记录在服务器上的事情时
*   当您只是查看内容并注意到即使您没有做任何事情也会更新内容（投票指示器发生变化，您会看到诸如“此帖子已修改，点击加载”，“此问题已关闭，不再接受任何答案。”等）

### 当你做一些需要记录在服务器端的事情时（例如，投票）

它是向服务器发送 ajax 消息的 JavaScript 代码。对话的服务器端可以使用您喜欢的任何技术来实现（Web 的乐趣之一，客户端和服务器端是分离的）。具体来说，页面加载了当时的投票信息，当您单击投票按钮时，JavaScript 代码会*立即更新投票显示*，然后向服务器发送一个 ajax 请求来记录投票（因此是即时的视觉反馈）。通常，该请求会在合理的时间内完成，并且一切正常。有时会出现处理请求的错误（可能是 HTTP 错误——例如，出现问题——或者服务器拒绝投票的逻辑错误）；发生这种情况时，您会看到一条错误消息，并且代码会恢复投票的显示（因为它没有在服务器上注册）。

在 Stack Exchange 的案例中，他们在 JavaScript 代码中使用了[jQuery](http://jquery.com)库。为了让您了解这是多么容易，这里是使用 jQuery 的直接 ajax 调用的客户端：

```
$.ajax({
    url:    "/path/to/server/resource",
    method: "POST",
    data:   {action: "voteup"},
    success: function(data) {
        // Do something with the successful response from the server,
        // which can send back data
    },
    error:   function(jqXHR, textStatus, errorThrown) {
        // Do something with the error that occurred
    }
 }); 
```

服务器端只是以任何有意义的方式响应 POST 操作。

该示例使用 jQuery，但还有许多其他 JavaScript 库也使 ajax 变得非常简单，例如[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)、 [Prototype](http://prototypejs.org)或[其他几个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库中的任何一个。jQuery 是目前（迄今为止）最流行的基于浏览器的 JavaScript 任务库，但它不是唯一的。

### 当你只是在看东西

我只能从外部谈论这个，但我希望 Stack Exchange 使用几种“[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)”技术中的任何一种（网络套接字、长轮询、隐藏`iframes`等）。

我希望[网络套接​​字](http://dev.w3.org/html5/websockets/)是首选。例如，如果我在打开网络选项卡的情况下使用 Chrome 打开一个问题，我会看到一个请求`ws://sockets.ny.stackexchange.com/`，并且`ws`是与网络套接字关联[的有线协议 RFC6455 涵盖的两个方案之一](https://www.rfc-editor.org/rfc/rfc6455#section-3)`wss`（另一个是SSL 安全版本） . Web 套接字的乐趣在于，它们*正式*且健壮地允许客户端和服务器之间持久的双向通信，允许服务器在适当的时候将数据推送到客户端。

由于 IE9 和更早版本的明显遗漏， Web 套接字[现在得到了相当好的支持](http://caniuse.com/#feat=websockets)，因此对于没有它们的浏览器，SE 可能会退回到上述链接中提到的一种或多种旧技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:04:44.550

对我来说，为 Dapper 替换实体框架效果很好。速度有显着提高。

# c# - 按另一表中的最高项目数对一个表结果进行排序

> ID：10314280
> 
> 赞同：0
> 
> 时间：2012-04-25T10:59:56.880
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我有一个表 Products 用于存储我的产品，另一个表 Votes 包含用户对该产品的投票。

```
Product:
ID
Name
Price
etc..

Votes:
ID
ProductID
IpAdress
DateTimeCreated 
```

我如何在 linq to sql 中获得过去 24 小时内投票最多的产品？我真的不太擅长 L2S 自己来解决这个问题。

这是迄今为止我得到的最接近的，这个片段应该得到最后 10 票，但我需要在最后 24 小时内获得最高票：

```
 var last10Voted = (from vote in context.Votes join product in 
 context.Products on vote.ProductID equals
 product.ID orderby vote.DateTimeCreated select product).Take(10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:05:07.263

```
var last10Voted =
  ( 
    from product in context.Products
    let votes = context.Votes
                       .Where(v=>v.ProductID == product.ID 
                                && v.DateTimeCreated >= DateTime.Now.AddHours(-24))
    orderby votes.Count() descending
    select product
 ).Take(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:07:52.823

```
var topVotedProducts = 
    Votes.Where(v => v.DateTimeCreated > DateTime.Now.AddHours(-24))
        .GroupBy(v => v.ProductID)
        .Join(Products, g => g.Key, p => p.ID, (g,p) => new { cnt = g.Count(), prod = p.Name })
        .OrderByDescending(result => result.cnt); 
```

产品：ID名称价格等。

投票：ID ProductID IpAdress DateTimeCreated

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:08:58.507

```
var mostVoted =
    from product in context.Products
    let votes = context.Votes.Count(vote => vote.ProductID == product.ID && (DateTime.Now - vote.DateTimeCreated).TotalHours <= 24)
    orderby votes descending
    select product;

var top10 = mostVoted.Take(10); 
```

# hadoop - 在 Pig 中过滤

> ID：10314282
> 
> 赞同：2
> 
> 时间：2012-04-25T11:00:01.543
> 
> 标签：hadoop, filtering, apache-pig

我正在尝试对猪中的关系进行过滤，我需要所有在第一个字段字符串中出现第三个字段的记录。

我试过：（假设我的源关系是 SRC）

```
Filtered= FILTER SRC BY $0 matches 'CONCAT(".*",$2,".")';
DUMP Filtered; 
```

没有语法错误，但我没有得到 Filtered 的任何输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T18:44:22.923

Pig`CONCAT`只接受两个参数。[请参阅http://pig.apache.org/docs/r0.10.0/func.html#concat](http://pig.apache.org/docs/r0.10.0/func.html#concat)上的文档

我不确定为什么它在运行时没有抱怨，但你会想要将两个`CONCAT`语句串在一起，比如

```
CONCAT(".*", CONCAT($2, ".")) 
```

得到你想要的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:46:06.357

我不认为 CONCAT 正在解决您所期望的问题，更多的是匹配项可能试图匹配整个未评估的字符串`CONCAT(".*",$2,".")`，这就是您没有得到任何结果的原因

你能把它分成两个语句，第一个是你创建一个包含 CONCAT 评估内容的字段，第二个是执行匹配操作：

```
TMP = FOREACH SRC GENERATE $0, CONCAT(".*",$2,".");
Filtered = FILTER TMP BY $0 matches $1;
DUMP Filtered; 
```

或类似的东西（完全未经测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-17T05:04:44.197

我认为你只是有一些语法错误

*   正如 A. Leistra 所指出的，CONCAT 只接受两个参数。
*   “。” 最后应该是“。*”如果你想要双面通配符
*   FILTER 语句更喜欢参数周围的括号
*   Pig 有很多奇怪的边缘情况涉及双引号，所以尽可能使用单引号

`Filtered= FILTER SRC BY ($0 matches CONCAT('.*', CONCAT($2, '.*')));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T01:37:34.537

尝试这个，

```
Filtered= FILTER SRC BY $0 matches '(.*)$2(.*)';

DUMP Filtered; 
```

如果第三个字段包含第一个字段，则该结果将被过滤。这是通过使用正则表达式完成的。

# python - 通过python编译PySide资源

> ID：10314284
> 
> 赞同：1
> 
> 时间：2012-04-25T11:00:14.143
> 
> 标签：python, resources, pyside

我想编写一个脚本来编译一堆 PySide qrc 文件，但是我找不到 PySide 库来做这件事。我知道我可以使用 pyside-rcc 调用`subprocess`，但我更愿意直接通过 python 来调用。有谁知道如何或是否可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:00:37.483

看来答案是否定的。pyrcc 是用 C++ 编写的（尽管 pyuic 是用 Python 编写的）。

[http://qt.gitorious.org/pyside/pyside-tools/trees/master/pyrcc](http://qt.gitorious.org/pyside/pyside-tools/trees/master/pyrcc)

# qt - QML：如何在项目参数 chenge 上触发事件（并将其值传递给它）？

> ID：10314292
> 
> 赞同：0
> 
> 时间：2012-04-25T11:01:17.550
> 
> 标签：qt, qml

我有一个带有值参数的项目。我想知道如何捕捉它的变化事件？

假设有一个 RectComp.qml：

```
Item{
    property alias currentX: rect.x
       Rectangle {
           id: rect
           x: 617
           y: 450
       }
} 
```

处理`currentX`来自创建其实例的应用程序的更改 说明如何

```
 Rectangle {
           id: host
           x: 617
           y: 450
           RectComp{ id: MyRC}
           OnMyRCcurrentXChange(int){log("hello!")}
       } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:32:46.727

根据 Qt 文档“向项目添加属性会自动向项目添加值更改信号处理程序”。

因此您的代码将更改为以下

```
 Rectangle {
       id: host
       x: 617
       y: 450
       RectComp{ id: MyRC
         onCurrentXChanged:{
             console.log("Hello");
         }
       }
   } 
```

或者您可以使用连接元素

```
 Connections {
     target: MyRC
     onCurrentXChanged: {
        console.log("Hello");
     }
 } 
```

# c# - .ascx 用户控件 button_click 未触发 Sitefinity C#

> ID：10314308
> 
> 赞同：0
> 
> 时间：2012-04-25T11:02:00.687
> 
> 标签：c#, asp.net, user-controls, sitefinity, buttonclick

我遇到了这个奇怪的问题，我的按钮单击事件没有触发。我已经尝试了几乎所有的可能性，但仍然没有运气。现在谷歌搜索了几个小时，但仍然没有帮助。一些人在不同的论坛上遇到了完全相同的问题，但没有具体的答案。我尝试了 button_click 事件并尝试注册事件处理程序，但它们都不起作用。在我的场景中，我有一个 sitefinity5 自定义模块，我在其中显示员工信息和员工数据。在员工图片上单击我正在显示一个 JQUERY 对话框，其中我有这个按钮。当应用程序加载时，它会触发文件背后代码的 page_load，而且当我首先单击员工图片时，它会触发 page_load 但不会触发 button_click。任何后续点击图片甚至都不会触发 Page_Load。任何人' 非常感谢您的帮助。以下是我的代码片段。

```
<%@ Control Language="C#" AutoEventWireup="true" Inherits="SitefinityWebApp.SfCtrlPresentation.OpenAccessDataProvider_a4a794260c0b4440b466f75d11146db8" Codebehind="OpenAccessDataProvider,a4a794260c0b4440b466f75d11146db8.ascx.cs" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.PublicControls.BrowseAndEdit" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.ContentUI" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.Comments" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.Fields" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>
<%--<%@ Register TagPrefix="jq" Assembly="Telerik.Sitefinity" Namespace="Telerik.Sitefinity.Web.UI" %>--%>

<telerik:RadListView ID="dynamicContentListView" ItemPlaceholderID="ItemsContainer" runat="server" EnableEmbeddedSkins="false" EnableEmbeddedBaseStylesheet="false">
    <LayoutTemplate>
        <ul class="sfitemsList sfitemsListTitleDateTmb">
            <asp:PlaceHolder ID="ItemsContainer" runat="server" />
        </ul>
    </LayoutTemplate>

        <ItemTemplate>
      <li class="sfitem sfClearfix">
            <h2 class="sfitemTitle">
                <sf:DetailsViewHyperLink ID="DetailsViewHyperLink" TextDataField="Title" runat="server" />
            </h2>
           <sf:AssetsField ID="AssetsField1" runat="server" DataFieldName="Picture" />
           <sf:SitefinityLabel ID="SitefinityLabel1" runat="server" Text='<%# Eval("Designation")%>'  WrapperTagName="div" HideIfNoText="true" CssClass="sfitemShortTxt" />           
          <sf:SitefinityLabel ID="SitefinityLabel2" runat="server" Text='<%# Eval("CompanyName")%>' WrapperTagName="div" HideIfNoText="true" CssClass="sfitemShortTxt" />
          <sf:AssetsField ID="AssetsField2" runat="server" DataFieldName="Documents"/>
      </li>
    </ItemTemplate>
</telerik:RadListView>

<sf:Pager id="pager" runat="server"></sf:Pager>

<sf:ResourceLinks ID="resourcesLinks" runat="server">
    <sf:ResourceFile JavaScriptLibrary="JQuery" />
</sf:ResourceLinks>

<div class="dialogTest"> <br />
<br />
Please enter your email address: <input type="text" name="emailAddress" style="width: 300px;" /><br />
<br />

<asp:TextBox ID="txtBox" runat="server"></asp:TextBox> <br/>
<asp:LinkButton Runat="server" ID="btnSubmit" Text="Submit" /> <br/>
<asp:Button ID="Button1" runat="server" Text="Button" CausesValidation="False" 
        onclick="Button1_Click" />

<%--<button name="btnSubmit" onclick="btnSubmit_Click" >Submit</button>--%>
</div>

<script type="text/javascript">
$j = jQuery.noConflict();
$j(document).ready(function () {
    $j(".sfClearfix .sfimageWrp img").click(function () {
        $j(".dialogTest").addClass("open");
        //return $j(this).attr("src");
    });
});
</script>

//.cs file
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Telerik.Sitefinity.Modules.Events;
using Telerik.Sitefinity.Events.Model;

namespace SitefinityWebApp.SfCtrlPresentation
{
    public partial class OpenAccessDataProvider_a4a794260c0b4440b466f75d11146db8 : System.Web.UI.UserControl
    {
        //protected override void OnLoad(EventArgs e)
        //{
        //    base.OnLoad(e);
        //}

        protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack)
            { 
                btnSubmit.Click+= new EventHandler(btnSubmit_Click);
            }
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        { 

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:02:12.700

这是用于公共前端页面上的用户控件吗？进入页面属性（在管理员页面列表下的操作菜单中）并确保选中该框以启用 ViewState

默认情况下，Sitefinity 禁用视图状态以提高性能。

希望这有帮助！

# javascript - 如何访问包含在 html 文件中的 JavaScript 变量并且该文件是动态加载的

> ID：10314309
> 
> 赞同：-2
> 
> 时间：2012-04-25T11:02:11.747
> 
> 标签：javascript, html

我有一个名为 index.html 的 html 文件。此 html 中有一个 div 对象，在此 div 中，我们使用对象标记动态加载另一个 html 调用 abc.html。我的问题是如何从 index.html 访问 abc.html 的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:19:08.890

您的问题有点含糊，假设您使用 Ajax 将 abc.html 加载到`<div>`index.html 中的元素中。

> 现在一旦 abc.html 被加载到 index.html 的 div 中，abc.html 和 index.html 都成为一个单一的实体。

所以假设您在 abc.html 上有以下内容

```
var message = "Annoying message"; 
```

和 index.html 上的这个函数

```
function annoyingAlert() {
    alert(message);
} 
```

并且您在 index.html 中的 Ajax 的 onLoadComplete 事件中调用“annoyingAlert”方法，它应该会弹出您最初在 abc.html 上的烦人消息

*您只是在处理一个页面，其中一些内容是动态加载的。*

# variables - 在 PHP 变量中获取 JavaScript 变量值？

> ID：10314310
> 
> 赞同：0
> 
> 时间：2012-04-25T11:02:21.417
> 
> 标签：variables

我有这个 JavaScript 函数，它从 HTML 中的选择选项中获取值：

```
<script type="text/javascript">

function showUser(str) {
if (str=="") {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)  {
    var str=xmlhttp.responseText;
    var splitstr=str.split('||');

    document.getElementById("txtHint").innerHTML=splitstr[0];
    document.getElementById("txtval").innerHTML=splitstr[1];
    }
  }
xmlhttp.open("GET","getdetails.php?q="+str,true);
xmlhttp.send();
}

</script> 
```

现在，`str`是我想要获取它的值并将其放入 PHP 变量的 JavaScript 变量。

我正在使用它，但它不起作用：

```
$grade = "<script language=javascript>document.write(str);</script>";
echo $grade; 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:10:07.087

`PHP`在 Web 服务器上运行，因此它只会在页面加载时执行。因此，上面的语句将不起作用，因为它在页面加载后调用的函数中运行。

要实现您想要的，您可以通过 ajax 调用将 str 发送到 php 文件并将其存储在会话变量中。& 然后每当您需要该变量时，调用另一个将检索会话值的 ajax 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:46:04.107

您可以使用 jQuery 来处理 AJAX 调用。确保在 html 页面中包含这一行。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script> 
```

使用 javascript 调用 PHP 并发送您的 str 数据。

```
 function uploaddata(str) {
    if (str=="") {
      document.getElementById("txtHint").innerHTML="";
      return;
      }

          var fd = new FormData();
          fd.append('data1', str); 

          try {
          $.ajax({
            url: 'dosomething.php',
            data:fd,
            processData: false,
            contentType: false,
            type: 'POST',    
            success: function(data){
              var response = $.parseJSON(data);
              if (response.code !== '0'){
                alert(response.description);
              }
              else {
                alert(response.description);
              };
              },
            error: function(jqXHR, error, errorThrown)  {
              alert(jqXHR.responseText);} 
          });
            }
          catch (ex) {

          }
   } 
```

在服务器端创建 dosomething.php 将使您需要的过程。

```
<?php

// get your data at server side
   str = $_POST['data1'];

// do processing

// return answer to browser
   $ans = ['code' => '0', 'description' => 'Everything are ok'];
   echo json_encode($ans);
   return;
?> 
```

在您的 javascript 中，成功部分将被激活，您可以使用代码和描述来构建您的逻辑。

# jquery - jQuery datetimepicker 不起作用。我该如何使用它？

> ID：10314313
> 
> 赞同：0
> 
> 时间：2012-04-25T11:02:27.553
> 
> 标签：jquery, asp.net

我想使用 datetimepicker 但它给出了错误：

> TypeError: Object # has no method 'datetimepicker'

我包括了这个脚本：

```
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script> 
```

还有我的代码：

```
 TextBox dtPicker_ = new TextBox();
   dtPicker_.ID = "dt_" + i;
   dtPicker_.CssClass = "datePicker";
   dtPicker_.Attributes.Add("checkId", "ch_" + i);

   dtPicker_.Text = cell_value_format_.Trim();
   control_ = dtPicker_;

  // ConvertToTimePicker
  string csname1 = "BindDatePickerScript";
  Type cstype = this.GetType();

  // Get a ClientScriptManager reference from the Page class.
  ClientScriptManager cs = Page.ClientScript;
  // Check to see if the startup script is already registered.
  if (!cs.IsStartupScriptRegistered(cstype, csname1))
  {
       System.Text.StringBuilder cstext1 = new System.Text.StringBuilder();
       cstext1.Append("<script type='text/javascript'>");
       cstext1.Append("$('.datePicker').datetimepicker({ dateFormat: 'dd.mm.yy' });");
       cstext1.Append("</script>");

       cs.RegisterStartupScript(cstype, csname1, cstext1.ToString());
  } 
```

最后我的“日期选择器”功能正在工作

```
cstext1.Append("$('.datePicker').datepicker({ dateFormat: 'dd.mm.yy' });"); 
```

但是“datetimepicker”说没有找到

```
cstext1.Append("$('.datePicker').datetimepicker({ dateFormat: 'dd.mm.yy' });"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:32:39.417

应用`$(document).ready(function(){//Put your Script here});`以告诉 jQuery 在页面中的所有 DOM 都准备好时加载此脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:25:59.713

之前有一个类似的问题......这些答案可能会帮助你......

[检查这个](https://stackoverflow.com/questions/3173112/failing-to-cross-the-pons-asinorum-with-jquery-datepicker)和[这个...](https://stackoverflow.com/questions/8934319/uncaught-typeerror-object-object-object-has-no-method-datepicker)

# emacs - 通过指定文件名在emacs中自动打开文件

> ID：10314317
> 
> 赞同：2
> 
> 时间：2012-04-25T11:02:55.863
> 
> 标签：emacs, ctags

我在我的 Linux 机器上使用以下命令在我的 django 项目中为 emacs 创建了一个 TAGS 文件

```
ctags -eR * 
```

我现在可以使用 M- 跳转到符号定义。并指定符号名称。在我的项目中，我有 py、html 和 css 文件，所以如果我指定文件名，是否还有一种方法可以使 emacs 自动打开文件？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:43:35.140

我认为您正在寻找项目管理。在 emacs 中管理项目目录的包很少。最好的可能是`ede`。但它不容易设置。它确实有一些学习曲线及其局限性。

值得庆幸的是，有很多简单的。像 eproject。[https://github.com/jrockway/eproject/wiki](https://github.com/jrockway/eproject/wiki)

无论如何，您也可以查看 emacswiki 页面以获取更多详细信息。[http://www.emacswiki.org/ProjectSettings](http://www.emacswiki.org/ProjectSettings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:45:40.663

[http://www.emacswiki.org/emacs/find-file-in-tags.el](http://www.emacswiki.org/emacs/find-file-in-tags.el)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:55:51.537

从评论中，我认为您正在寻找与标签无关，您只需要一个更好的查找文件，它可以对仅给出文件名的路径进行良好的自动猜测。

为此，我使用了非常棒的`ido-mode`：[http ://emacswiki.org/emacs/InteractivelyDoThings](http://emacswiki.org/emacs/InteractivelyDoThings)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:09:40.463

IDO ( [Interactive Do](http://www.emacswiki.org/emacs/InteractivelyDoThings) ) 模式执行此操作。如果您激活它，Cx Cf 会以交互方式搜索与您输入的内容相匹配的文件。但请注意，可能需要一些时间来适应它。

[编辑] 搜索基于您最近访问过的文件或目录，您可以使用 Ms 强制搜索。

# php - codeigniter，使用全局变量

> ID：10314320
> 
> 赞同：0
> 
> 时间：2012-04-25T11:03:00.543
> 
> 标签：php, codeigniter

我有一个带有 5 个控制器的 codeigniter 应用程序，一个是“基础”，其余的都是从它继承的，我在基础中使用全局变量加载到视图中，但是当我加载视图时它不工作我得到（未定义的变量）我怎样才能解决这个问题？

我在基础中使用这个函数来加载视图

```
 function _setContent($tplFile) {
            ob_start();
            $this->load->view($this->theme_dir . '/' . $tplFile, $this->tplData);
            $_content = ob_get_contents();
            ob_end_clean();

            $this->tplData['_content'] = $_content;
            $this->load->view($this->theme_dir . '/default', $this->tplData);
        }

$this->tplData // is the global variable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:40:52.760

你可以使用配置类。

```
$this->config->set_item('global_variable', $my_var); 
```

现在你可以在任何你想要的地方使用这个变量

```
$this->config->item('global_variable'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:08:24.800

尝试使用`define()`而不是全局来设置你的变量 - [http://php.net/manual/en/function.define.php](http://php.net/manual/en/function.define.php)

# image - 图像配准（非刚性\非线性）

> ID：10314321
> 
> 赞同：4
> 
> 时间：2012-04-25T11:03:01.457
> 
> 标签：image, image-processing, opencv, computer-vision, registration

我正在寻找一些用于图像配准的算法（最好是如果源代码可用）。图像变形不能用单应矩阵来描述（因为我认为失真不是对称的和不均匀的），更具体地说，变形就像桶形/失真和梯形失真，可能是图像的一些旋转。我想获得两个图像的像素对，因此我可以获得“变形场”的表示。

我google了很多，发现有一些基于一些物理思想的算法，但似乎它们可以收敛到局部最大值，但不能收敛到全局。我可以将程序设置为半自动，这意味着一些简单的用户交互。

也许像 SIFT 这样的算法是合适的？但我认为它不能提供具有规则足够密度的“变形场”。

如果它很重要，则没有规模变化。

复杂字段示例 [http://www.math.ucla.edu/~yanovsky/Research/ImageRegistration/2DMRI/2DMRI_lambda400_grid_only1.png](http://www.math.ucla.edu/~yanovsky/Research/ImageRegistration/2DMRI/2DMRI_lambda400_grid_only1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:43:09.073

您正在寻找的是“光流”。搜索这些术语将为您带来大量结果。

在 OpenCV 中，有一个名为 calcOpticalFlowFarneback() 的函数（在视频模块中）可以满足您的需求。C API 仍然有一个由 Horn & Schunck (1981) 称为“确定光流”的经典论文的实现。

你也可以看看我做的这个工作，以及一些代码（但要小心，opencl内存代码中仍然存在一些神秘的错误。我将在今年晚些时候发布一个更正的版本。）：[http：/ /lts2www.epfl.ch/people/dangelo/opticalflow](http://lts2www.epfl.ch/people/dangelo/opticalflow)

除了 OpenCV 的光流（和我的 ;-）之外，您还可以在 itk.org 上查看 ITK，了解完整的图像配准链（主要针对医学成像）。

还有很多光流代码（matlab、C/C++...）可以通过google找到，例如cs.brown.edu/~dqsun/research/software.html、gpu4vision等

**-- 编辑：关于光流 --**

光流分为两类算法：密集算法和其他算法。密集算法为每个像素提供一个运动向量，非密集算法为每个跟踪特征提供一个向量。

稠密家族的例子包括 Horn-Schunck 和 Farneback（与 opencv 保持一致），以及更普遍地任何可以最小化整个图像上的某些成本函数的算法（各种 TV-L1 流等）。

非密集家族的一个例子是 KLT，在 opencv 中称为 Lucas-Kanade。

在密集族中，由于每个像素的运动几乎是自由的，它可以处理尺度变化。但是请记住，这些算法在大运动/尺度变化的情况下可能会失败，因为它们通常依赖于线性化（运动和图像变化的泰勒展开）。此外，在变分方法中，每个像素都对整体结果有贡献。因此，一张图像中不可见的部分可能会使算法偏离实际解决方案。

无论如何，使用诸如从粗到细的实现之类的技术来绕过这些限制，而这些问题通常只有很小的影响。一些算法也可以明确处理残酷的光照变化或大的遮挡/未遮挡区域，例如，参见本文，[该论文](http://dl.acm.org/citation.cfm?id=1969036)计算了光流场旁边的“创新”稀疏图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:17:50.700

我发现了一些特定于医学的软件，但它很复杂，并且不适用于简单的图像格式，但似乎它可以满足我的需要。 [http://www.csd.uoc.gr/~komod/FastPD/index.html](http://www.csd.uoc.gr/~komod/FastPD/index.html) Drop - 使用离散优化的可变形配准

# java - Android 连续 tcp 轮询

> ID：10314322
> 
> 赞同：0
> 
> 时间：2012-04-25T11:03:07.870
> 
> 标签：java, android, sockets, tcp, project

我正在做一个项目，在这个项目中，我可以在我的 Android 应用程序上看到站在门前的人的网络摄像头图像。

但我有点困惑。我已经设法在我的手机上建立了与处理图像发送的服务器的服务连接。

但是我只想在有人按下门铃时从服务器获取图像，所以我需要向我的应用程序发送通知或其他内容，这样我就知道门前有一个，我想决定是否要回答他的电话与否。

现在这就是为什么我很困惑：如果我在android服务中打开tcp套接字，我怎么知道我的服务器发送了一个'call'消息，因为在创建服务时tcp套接字是openend的。我需要保持每秒轮询吗？那我还有一点机会错过来电信息吗？

还是我必须将应用程序作为服务器运行，门铃作为客户端运行，所以客户端请求连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:08:41.273

看看云到设备消息传递，c2dm，也更节能。内置于安卓。 [https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:09:07.983

如果在创建服务时打开了 tcp 套接字，只需从服务器发送一些适当的消息到连接的客户端。如果您的客户端已连接，它将获取它。您只需要在客户端不断连接和断开连接时进行轮询，例如。像许多 HTTP 1 Web 服务一样。

# command-line - 如何让 Junit 4.10 从 Windows 上的命令行运行而不输入每个文件的路径？

> ID：10314325
> 
> 赞同：0
> 
> 时间：2012-04-25T11:03:21.527
> 
> 标签：command-line, junit, installation, classpath

我想这对其他人来说很容易，但我无法让 junit 从命令行工作。我安装 java 运行时环境没有问题，但是这个 junit 安装有更多我显然没有看到的内容。

我的课程路径是：

```
.;C:\Program Files\Java\jre6\lib\ext\QTJava.zip.;set classpath=%classpath%;C:Program Files\JUnit\junit-4.6.jar;C:\Program Files\JUnit\ 
```

我的窗口路径是：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\system32\wbem;C:\Program Files\Common Files\Teleca Shared;C:\Program Files\Java\jdk1.6.0_30\bin;C:\Program Files\JUnit\junit-4.10.jar;C:\Program Files\QuickTime\QTSystem\ 
```

有人请告诉我我做错了什么。我无法让 junit 运行它的测试文件或我编写的任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:13:44.130

您不应该将东西放在 JRE lib/ext 目录中。了解如何正确使用 CLASSPATH。

如果那个 CLASSPATH 是一个环境变量，那么你正在学习一些重要的东西：你不需要它。JVM、IDE 和应用服务器都忽略它。

正确的做法是在编译运行时对 javac.exe 和 java.exe 使用 -classpath 选项。

您也不应该更改每个 Java 项目的 PATH。将其指向 JDK/bin，以便您可以访问所需的工具，但这就是您应该做的所有事情。

# ajax - 无法引用在 Selenium 中的 Ajax 调用后填充的基础架构超 Web 网格控件

> ID：10314334
> 
> 赞同：0
> 
> 时间：2012-04-25T11:04:12.730
> 
> 标签：ajax, selenium, infragistics

我们正在从 Ajax 调用填充的超 Web 网格控件中输入值，但是当 Ajax 调用完成时，我们得到错误元素未找到。

完整的顺序如下：

页面上的元素：保存和取消图标、文本框、下拉菜单、项目选择器、弹出窗口、文本区域、空白 Infragistics ultraweb 网格。首次加载页面时，所有控件都被初始化，除了 ultraweb 网格。现在用户单击项目选择器并从弹出窗口中选择一个项目。此操作通过 Ajax 调用在页面上为项目详细信息及其数量初始化超 Web 网格。

现在我们无法在页面上引用 ultraweb 网格。请注意，我们可以引用所有其他控件。

命令顺序：

*   点击并等待 | id=lnkNew
*   点击 | id=C1_stdItemNumber_btnAuto
*   点击 | //table[@id='C1xstdItemNumberxgrd_main']//tbody/tr//td/nobr[contains(text(),'textItem')]
*   点击并等待 | //按钮[@type='按钮']
*   等待可见| id=C1xgridActivity_main
*   火灾事件 | id=C1xgridActivity_main | 重点
*   火灾事件 | css=#C1xgridActivity_rc_0_2 > nobr | 关注“这失败了”
*   点击 | css=#C1xgridActivity_rc_0_2 > nobr “这失败了”
*   双点击| id=C1xgridActivity_rc_0_8 "这失败了"
*   类型 | id=C1xgridActivity_tb | 1“这失败了”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:57:47.863

我解决了这个问题。

问题是当您加载页面时，在 DOM 中所有 CSS 对象都会被初始化，但稍后当 Ajax 调用被处理和完成时，CSS 对象无法在同一页面中重新初始化，只有 Ajax 调用处理的对象被初始化/填充.

您可以使用 XPATH 解决此问题。完成 Ajax 调用后，您可以引用页面上的所有元素。在这种情况下，将传递 WaitForElement 命令，但稍后当您尝试访问元素的值时，当您使用 CSS 引用元素时，该命令将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:26:50.613

如果您使用 jQuery 库，您可以使用以下命令等待 AJAX 调用完成`waitForCondition`：

```
 waitForCondition | selenium.browserbot.getCurrentWindow().jQuery.active == 0; | 20000 
```

# javascript - 获取对象或类的名称

> ID：10314338
> 
> 赞同：250
> 
> 时间：2012-04-25T11:04:31.093
> 
> 标签：javascript

有没有办法获取对象的函数名？

```
function alertClassOrObject (o) {
   window.alert(o.objectName); //"myObj" OR "myClass" as a String
}

function myClass () {
   this.foo = function () {
       alertClassOrObject(this);
   }
}

var myObj = new myClass();
myObj.foo(); 
```

`for (var k in this) {...}`- 没有关于`className`or的信息`ObjectName`。有可能得到其中之一吗？

* * *

## 回答 #1

> 赞同：431
> 
> 时间：2012-04-25T11:15:17.303

获取对象的[构造](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)函数，然后检查其[名称](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Name)属性。

```
myObj.constructor.name 
```

返回“我的班级”。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-11-21T13:27:05.460

例子：

```
function Foo () { console.log('Foo function'); }
var f = new Foo();
console.log('f', f.constructor.name); // -> "Foo"

var Bar = function () { console.log('Anonymous function (as Bar)'); };
var b = new Bar();
console.log('b', b.constructor.name); // -> "Bar"

var Abc = function Xyz() { console.log('Xyz function (as Abc)'); };
var a = new Abc();
console.log('a', a.constructor.name); // -> "Xyz"

class Clazz { constructor() { console.log('Clazz class'); } }
var c = new Clazz();
console.log('c', c.constructor.name); // -> "Clazz"

var otherClass = class Cla2 { constructor() { console.log('Cla2 class (as otherClass)'); } }
var c2 = new otherClass();
console.log('c2', c2.constructor.name); // -> "Cla2"
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-25T21:43:46.780

由于已经回答了这个问题，我只想指出在 JavaScript 中获取对象构造函数的方法的不同。构造函数和实际的对象/类名称之间存在差异。如果以下内容增加了您决定的复杂性，那么您可能正在寻找`instanceof`. 或者也许你应该问自己“我为什么要这样做？这真的是我想要解决的问题吗？”

**笔记：**

在较旧的`obj.constructor.name`浏览器上不可用。匹配`(\w+)`应该满足 ES6 样式类。

**代码：**

```
var what = function(obj) {
  return obj.toString().match(/ (\w+)/)[1];
};

var p;

// Normal obj with constructor.
function Entity() {}
p = new Entity();
console.log("constructor:", what(p.constructor), "name:", p.constructor.name , "class:", what(p));

// Obj with prototype overriden.
function Player() { console.warn('Player constructor called.'); }
Player.prototype = new Entity();
p = new Player();
console.log("constructor:", what(p.constructor), "name:", p.constructor.name, "class:", what(p));

// Obj with constructor property overriden.
function OtherPlayer() { console.warn('OtherPlayer constructor called.'); }
OtherPlayer.constructor = new Player();
p = new OtherPlayer();
console.log("constructor:", what(p.constructor), "name:", p.constructor.name, "class:", what(p));

// Anonymous function obj.
p = new Function("");
console.log("constructor:", what(p.constructor), "name:", p.constructor.name, "class:", what(p));

// No constructor here.
p = {};
console.log("constructor:", what(p.constructor), "name:", p.constructor.name, "class:", what(p));

// ES6 class.
class NPC { 
  constructor() {
  }
}
p = new NPC();
console.log("constructor:", what(p.constructor), "name:", p.constructor.name , "class:", what(p));

// ES6 class extended
class Boss extends NPC {
  constructor() {
    super();
  }
}
p = new Boss();
console.log("constructor:", what(p.constructor), "name:", p.constructor.name , "class:", what(p)); 
```

**结果：**

[![在此处输入图像描述](../Images/a460155a63a03083ee09b3da8e9ad668.png)](https://i.stack.imgur.com/ezBk2.png)

代码：[https ://jsbin.com/wikiji/edit?js,console](https://jsbin.com/wikiji/edit?js,console)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-04T12:08:17.023

如果您使用标准 IIFE（例如使用 TypeScript）

```
var Zamboch;
(function (_Zamboch) {
    (function (Web) {
        (function (Common) {
            var App = (function () {
                function App() {
                }
                App.prototype.hello = function () {
                    console.log('Hello App');
                };
                return App;
            })();
            Common.App = App;
        })(Web.Common || (Web.Common = {}));
        var Common = Web.Common;
    })(_Zamboch.Web || (_Zamboch.Web = {}));
    var Web = _Zamboch.Web;
})(Zamboch || (Zamboch = {})); 
```

你可以预先注释原型

```
setupReflection(Zamboch, 'Zamboch', 'Zamboch'); 
```

然后使用 _fullname 和 _classname 字段。

```
var app=new Zamboch.Web.Common.App();
console.log(app._fullname); 
```

注释功能在这里：

```
function setupReflection(ns, fullname, name) {
    // I have only classes and namespaces starting with capital letter
    if (name[0] >= 'A' && name[0] &lt;= 'Z') {
        var type = typeof ns;
        if (type == 'object') {
            ns._refmark = ns._refmark || 0;
            ns._fullname = fullname;
            var keys = Object.keys(ns);
            if (keys.length != ns._refmark) {
                // set marker to avoid recusion, just in case 
                ns._refmark = keys.length;
                for (var nested in ns) {
                    var nestedvalue = ns[nested];
                    setupReflection(nestedvalue, fullname + '.' + nested, nested);
                }
            }
        } else if (type == 'function' && ns.prototype) {
            ns._fullname = fullname;
            ns._classname = name;
            ns.prototype._fullname = fullname;
            ns.prototype._classname = name;
        }
    }
} 
```

[提琴手](http://jsfiddle.net/nk637z8q/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-26T12:06:35.887

试试这个：

```
var classname = ("" + obj.constructor).split("function ")[1].split("(")[0]; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-10T17:38:49.817

我面临着类似的困难，这里提出的解决方案都不是我正在研究的最佳解决方案。我所拥有的是一系列以模式显示内容的函数，我试图在单个对象定义下重构它，从而制作类的函数和方法。当我发现其中一种方法在模态本身内部创建了一些导航按钮时，问题就出现了，这些导航按钮使用 onClick 到其中一个函数——现在是该类的一个对象。我已经考虑（并且仍在考虑）处理这些导航按钮的其他方法，但是通过扫描父窗口中定义的变量，我能够找到类本身的变量名称。我所做的是搜索与我班级的“实例”匹配的任何内容，以防万一，

```
var myClass = function(varName)
{
    this.instanceName = ((varName != null) && (typeof(varName) == 'string') && (varName != '')) ? varName : null;

    /**
     * caching autosweep of window to try to find this instance's variable name
     **/
    this.getInstanceName = function() {
        if(this.instanceName == null)
        {
            for(z in window) {
                if((window[z] instanceof myClass) && (window[z].uniqueProperty === this.uniqueProperty)) {
                    this.instanceName = z;
                    break;
                }
            }
        }
        return this.instanceName;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-31T08:34:13.107

我们所需要的：

1.  在函数中包装一个常量（其中函数的名称等于我们要获取的对象的名称）
2.  在对象内部使用箭头函数

```
console.clear();
function App(){ // name of my constant is App
  return {
  a: {
    b: {
      c: ()=>{ // very important here, use arrow function 
        console.log(this.constructor.name)
      }
    }
  }
}
}
const obj = new App(); // usage

obj.a.b.c(); // App

// usage with react props etc, 
// For instance, we want to pass this callback to some component

const myComponent = {};
myComponent.customProps = obj.a.b.c;
myComponent.customProps(); // App
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-10T04:23:58.507

在运行时获取类名的最有效方法

`let className = this.constructor.name`

# ruby - ruby 可选参数，如果更改，对调用者的影响？

> ID：10314342
> 
> 赞同：4
> 
> 时间：2012-04-25T11:04:51.030
> 
> 标签：ruby

考虑 ruby​​ 中的以下代码，假设我从某个地方调用了 prestart：

```
def tester(process_name, *host_list)
  hosts = []
  hosts = host_list[0]
  hosts[0] = nil
end

def prestart(process_name, *host)
  host_list = ['192.168.1.1', '192.168.1.2'] 
  puts host_list.inspect  # -> ['192.168.1.1', '192.168.1.2']
  tester(process_name, host_list)
  puts host_list.inspect  # -> [nil, '192.168.1.2']
  abort
end 
```

怎么变成零了？这是红宝石的工作原理吗？如果是，我如何确保它不会影响来电者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:13:27.497

数组是对象，因此是通过引用过去的。如果你想改变它而不影响原来的，你需要通过调用它来复制`.dup`它。您可以在调用者或被调用方法中执行此操作。

# cron - 在詹金斯上安排两周一次的工作

> ID：10314343
> 
> 赞同：7
> 
> 时间：2012-04-25T11:04:54.023
> 
> 标签：cron, jenkins

我想在 jenkin 上安排每两周一次的工作。它应该每隔一个星期一运行一次。我无法弄清楚 cron 表达式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T12:07:50.777

我做了一些研究，基本上可以找到3个答案：

**快速回答**：你不能。

**复杂的答案 1**：您可以在单独的行中手动输入每隔一个星期日的条目，但是当年份变化时这会遇到问题

```
0 0 29 4 *
0 0 13 5 *
0 0 27 5 *
0 0 10 6 *
... 
```

**复杂答案 2**：创建一个每周日运行的 cron 条目，然后在构建步骤中使用手动检查（切换）的东西来解决问题的“其他”部分。（如果您需要在 SCM 步骤之前进行测试，pre-scm-buildstep 插件可能会有所帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:41:24.960

在您的项目***配置/构建触发器/计划***部分中，您可以指定`@weekly`

这将在一周的第一天午夜之后执行，具体取决于您的 JVM 语言环境。

这是您从 Jenkins 内部得到的最接近的结果。否则，您将需要使用一些外部 cron 作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:04:34.957

```
0 0 * * #1,#3 
```

据此，哈希字符应该允许[上述](http://dictionary.sensagent.com/cron+expression/en-en/#Hash_.28.23.29)表达式在每个月的第一个和第三个星期一的午夜为您提供构建。这是我能找到的最接近每隔一个星期一的地方。

# reverse-engineering - 逆向工程多维数据集以使用 SSAS 2008 构建关系数据库

> ID：10314345
> 
> 赞同：1
> 
> 时间：2012-04-25T11:05:04.047
> 
> 标签：reverse-engineering, ssas

我有一个需求，我有一个在 AS 2000 中构建的多维数据集，我所拥有的只是分析服务数据库的备份。

我必须用事实和维度构建一个关系数据库，在 2008 R2 中恢复数据库，然后根据我拥有的数据仓库在 SSAS 2008 上构建一个新的多维数据集。

我一直在编写带有交叉连接的 mdx 查询来获取维度数据和度量，但是这个过程花费了我很多内存（我目前有 4 GB 内存和 14 个维度）。当我尝试进行交叉连接时，查询能够为我提供最多 7 个维度的结果以及导致应用程序冻结（挂起）的更多结果，我不得不手动终止该进程。

谁能为我提供一个可行且有效的解决方案

提前致谢

问候，

萨维奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:06:20.497

好吧，不可能根据实际的多维数据集创建“起源”多维数据集的 DW，因为有几个 DW 结构可以生成多维数据集。

您可以做的是将您的多维数据集备份恢复到 AS 2000 实例，将其迁移到 SSAS 2008，然后在 BIDS 中创建一个新项目，选择“导入分析服务 2008 数据库”选项并指向您刚刚创建的实例。BIDS 将读取已部署多维数据集的结构并为您创建一个 SSAS 项目

# c# - 在整个应用程序中提供自定义绘图方法

> ID：10314348
> 
> 赞同：0
> 
> 时间：2012-04-25T11:05:07.580
> 
> 标签：c#, winforms

我在我的一个申请表中为标签添加了自定义边框，如下所示：

```
 private void ColorMe(PaintEventArgs e)
    {
        Color myColor = Color.FromArgb(104, 195, 198);
        Pen myPen = new Pen(myColor, 1);
        e.Graphics.DrawRectangle(myPen,
        e.ClipRectangle.Left,
        e.ClipRectangle.Top,
        e.ClipRectangle.Width - 1,
        e.ClipRectangle.Height - 1);
        base.OnPaint(e);
    }

    private void lblDisbs_Paint(object sender, PaintEventArgs e)
    {
        ColorMe(e);
    } 
```

效果很好。我所要做的就是将 ColorMe(e) 放在每个标签的 Paint Event 中。

但是我想在整个应用程序的所有表单上使用这种方法。我尝试将我的 ColorMe() 方法放在一个类中，以便以这种方式从多种表单中调用它，但它不起作用，说“基础没有 OnPaint 事件”。

我应该如何在整个应用程序中使用此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:11:26.917

创建类`LabelWithBorder`派生它`Label`，重写`OnPaint` [方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)。

```
public class LabelWithBorder : Label {
  protected override void OnPaint(PaintEventArgs e) {
    ColorMe(e);
  }
} 
```

将应用中的所有 WinForms 标签替换为您的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:48:25.823

You probably shouldn't use the `ClipRectangle` for drawing in this case, since it would produce malformed rectangles on your control.

If not using Karel Frajtak's solution, which is cleaner, you can try making a static class and then you can call it from any form:

```
internal static class LabelBorder {
  public static void ColorMe(Rectangle r, PaintEventArgs e) {
    r.Inflate(-1, -1);

    using (Pen p = new Pen(Color.FromArgb(104, 195, 198), 1))
      e.Graphics.DrawRectangle(p, r);
  }
} 
```

Example:

```
public Form1() {
  InitializeComponent();
  label1.Paint += label_Painter;
  label2.Paint += label_Painter;
}

void label_Painter(object sender, PaintEventArgs e) {
  LabelBorder.ColorMe(((Label)sender).ClientRectangle, e);
} 
```

# android - 如何播放录制的音频文件？

> ID：10314349
> 
> 赞同：0
> 
> 时间：2012-04-25T11:05:08.553
> 
> 标签：android, android-mediaplayer, android-mediarecorder

我正在使用 MediaRecorder 类来录制音频文件，并且我使用了

```
final String MEDIA_OUTPUT_FILE = "MyOutPutFile";
mediaRecorder.setOutputFile(MEDIA_OUTPUT_FILE);' 
```

为我的输出文件命名。

我也知道如何从资源中播放音频文件：

```
MediaPlayer mpRes = MediaPlayer.create(getApplicationContext(), R.raw.audiofile);
mpRes.start();' 
```

我的问题是，现在，当我不知道我的 MEDIA_OUTPUT_FILE 保存在哪里时，如何播放录制的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:21:19.943

而不是使用常量作为参数来`mediaRecorder.setOutputFile()`使用如下所示的变量。

```
private String filePath;
filePath = Environment.getExternalStorageDirectory().getAbsolutePath();
filePath += "/myrecording.mpeg"; 
```

然后将 filePath 变量作为参数传递，如下所示；

```
mediaRecorder.setOutputFile(filePath); 
```

然后您可以播放录制的文件如下；

```
mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource(filePath);
mediaPlayer.start(); 
```

就是这样。

# wpf - 绑定路径层次结构

> ID：10314357
> 
> 赞同：1
> 
> 时间：2012-04-25T11:05:24.937
> 
> 标签：wpf, binding

我开发了一个带有测量对象的用户控件。每个测量对象都有一个单元对象列表，每个单元对象都有一个测站对象列表。

Usercontrol 为每个 Station 生成一个 TextBox。目前，我将每个站的 DataContext 设置为某个站，并将 BindingPath 设置为我的值成员。

这可行，但是当我尝试显示不同的测量时，我必须将绑定设置为新测量的站。

我想实现，以一种方式设置 BindingPath，只有 Usercontrol 的 DataContext 必须设置为新的Measurement，并且所有文本框都采用新的绑定。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:41:04.910

我不确定我是否完全理解您的问题，但根据我的猜测，您可能正在寻找这样的东西：

```
<ItemsControl ItemsSource="{Binding Path=Cells}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding Path=Stations}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Value}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# android - 如何在 Android 上的 OpenGL 中显示立方体的边缘

> ID：10314360
> 
> 赞同：0
> 
> 时间：2012-04-25T11:05:46.850
> 
> 标签：android, opengl-es

我已经使用 OpenGL 绘制了立方体。现在，我必须只显示那个立方体的边缘。它应该看起来像一个立方体笼。我怎样才能做到这一点？

我的代码如下所示：

// 每个元素都是一个 16 个顶点的三角形带。

```
 vertices.put(x).put(y).put(zz);
            vertices.put(x).put(y).put(zz);
            vertices.put(xx).put(y).put(zz);
            vertices.put(x).put(yy).put(zz);
            vertices.put(xx).put(yy).put(zz);
            vertices.put(xx).put(yy).put(z);
            vertices.put(xx).put(y).put(zz);
            vertices.put(xx).put(y).put(z);
            vertices.put(x).put(y).put(z);
            vertices.put(xx).put(yy).put(z);
            vertices.put(x).put(yy).put(z);
            vertices.put(x).put(yy).put(zz);
            vertices.put(x).put(y).put(z);
            vertices.put(x).put(y).put(zz);
            vertices.put(xx).put(y).put(zz);
            vertices.put(xx).put(y).put(zz);

            int color = Color.GRAY; 
            for ( int j = 0; j < 16; ++j ) 
            {
                colors.put(color);
            }  
                   vertices.position(0);
                   colors.position(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:19:21.830

您必须使用`GL_LINES`图元绘制定义立方体边缘的线。

# android - 批量传输失败 - Android 4.0.3

> ID：10314365
> 
> 赞同：1
> 
> 时间：2012-04-25T11:06:17.177
> 
> 标签：android, usb, host

我想通过 bulkTransfer 向通过 USB 连接的相机发送一个短数据包（只有 2 个字符）。我正在使用带有 Android 4.0.3 的三星 Galaxy S2 作为主机。一切似乎都很好，接受......实际上没有发送任何数据。理论上，bulkTransfer 方法返回一个正值，表示数据已经传输，但没有可见的效果。代码如下：

```
 char ch = (char)34;
    char[] record = {'P',ch};
    String r = record.toString();
    byte[] bytes  =  r.getBytes(Charset.forName("ASCII"));
    int TIMEOUT = 10000;
    boolean forceClaim = true;
    UsbManager mUsbManager = (UsbManager) getSystemService(Context.USB_SERVICE);
    UsbInterface intf = device.getInterface(0);
     for (int i = 0; i < intf.getEndpointCount(); i++) {
          UsbEndpoint ep = intf.getEndpoint(i);
          if (ep.getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
            if (ep.getDirection() == UsbConstants.USB_DIR_OUT) {
              endpoint = ep;
              //Integer dir = endpoint.getDirection();
              UsbDeviceConnection connection = mUsbManager.openDevice(device); 
              if(connection!=null){devMessage+=" I connected";}
              connection.claimInterface(intf, forceClaim);
              Integer res = connection.bulkTransfer(endpoint, bytes, bytes.length, TIMEOUT);
              if (res>0){devMessage += "some data transfered.";}
              connection.releaseInterface(intf);
            break;

            } 
           } 
```

在开始bulkTransfer 之前，我还需要包括什么吗？在我开始 bulkTransfer 之前是否需要 controlTransfer？还有什么我可能会忘记的。请理解，因为这是我的第一个使用 USB 通信的应用程序，并且网络上的资源并不多。我已经在 developer.android 上阅读了有关 USB 主机的所有内容......所以请不要将我指向那里。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-19T17:50:27.363

**可能是接口不对**您使用 device.getInterface(0)。所以这可能是不对的。试试这个来获取界面。

```
for (int i = 0; i < device.getInterfaceCount(); i++) {
        UsbInterface usbif = device.getInterface(i);

        UsbEndpoint tOut = null;
        UsbEndpoint tIn = null;

        int tEndpointCnt = usbif.getEndpointCount();
        if (tEndpointCnt >= 2) {
            for (int j = 0; j < tEndpointCnt; j++) {
                if (usbif.getEndpoint(j).getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                    if (usbif.getEndpoint(j).getDirection() == UsbConstants.USB_DIR_OUT) {
                        tOut = usbif.getEndpoint(j);
                    } else if (usbif.getEndpoint(j).getDirection() == UsbConstants.USB_DIR_IN) {
                        tIn = usbif.getEndpoint(j);
                    }
                }
            }

            if (tOut != null && tIn != null) {
                // This interface have both USB_DIR_OUT
                // and USB_DIR_IN of USB_ENDPOINT_XFER_BULK
                usbInterface = usbif;
                endpointOut = tOut;
                endpointIn = tIn;
            }
        }

    } 
```

# jqgrid - jqgrid使用父控件调整大小

> ID：10314366
> 
> 赞同：0
> 
> 时间：2012-04-25T11:06:17.613
> 
> 标签：jqgrid

我将页面分为两部分，在一个部分中，我将 jqgrid 的 autowidth 设置为 true，如下图所示。

![在此处输入图像描述](../Images/817679e8a1bea7ff9bafae6136bfb89d.png)

现在，当使用中心栏调整 div 的大小时，我想调整网格的大小，

使用下面的代码我可以调整大小，但是滚动出现在我不想要的网格中

注意：scrollOffset 已经设置为 0。

$("#grid").jqGrid('setGridWidth', $("#gridarea").width() - 5, true);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:41:43.220

尝试使用 fluidjqgrid 插件。在使网格流动方面它非常好。

你可以在这个网站上找到它：http: [//stevenharman.net/blog/archive/2009/08/21/creating-a-fluid-jquery-jqgrid.aspx](http://stevenharman.net/blog/archive/2009/08/21/creating-a-fluid-jquery-jqgrid.aspx)

# ruby - Ruby 要求和 self.require

> ID：10314367
> 
> 赞同：4
> 
> 时间：2012-04-25T11:06:18.117
> 
> 标签：ruby, require, main, self

我 ruby​​ 1.8.7，为什么我可以在 main 中使用 require，但不能使用 self.require？

```
require('date') # ok
self.require('date') 
NoMethodError: private method `require' called for main:Object
from (irb):22
from /usr/lib/ruby/1.8/date.rb:437 
```

众所周知，main 是 Object 类：irb(main):045:0> self => main

```
irb(main):043:0> self.class
=> Object 
```

但我发现它有内核混合：

```
irb(main):042:0> self.class.included_modules
=> [Kernel] 
```

此外，我发现 require 是 self 的私有方法：

```
irb(main):037:0> self.private_methods
=> [... "require", ...] 
```

同样，我不能使用 self.attr_accessor：

```
irb(main):051:0> class X
irb(main):052:1> self.attr_accessor(:ssss)
irb(main):053:1> end
NoMethodError: private method `attr_accessor' called for X:Class
from (irb):52
from /usr/lib/ruby/1.8/date.rb:437 
```

它是怎么发生的？有人可以澄清这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:39:25.550

检查以下简单示例：

```
class Person
  def initialize(age)
    @age = age
  end

  def compare_to(other)
    # we're calling a protected method on the other instance of the current class
    age <=> other.age
  end

  # it will not work if we use 'private' here
  protected

  def age
    @age
  end
end 
```

在 ruby​​ 中，我们有隐式和显式方法接收器，检查下一个代码片段：

```
class Foo
  def a; end

  # call 'a' with explicit 'self' as receiver
  def b; self.a; end

  # call 'a' with implicit 'self' as receiver
  def c; a; end
end 
```

基本上在红宝石中，如果一个方法是`private`它只能在`implicit`接收器上调用（没有`self`关键字）。在您的示例`require`中，是一个`private`定义`Kernel`模块的方法，它只能在`implicit`主题上调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:52:00.150

`require`是私有方法。所以你不能把它称为

```
Object.require 'date' 
```

但是你可以用 ruby​​ 的 eval/send 方法来调用它：

```
Object.send(:require, 'date')
# or
self.send(:require', 'date') 
```

实际上非常相似的是

```
require 'date' 
```

例如[pry 控制台](https://github.com/pry/pry)会将其解释为

```
instance_exec do
  require 'date'
end 
```

我相信 Ruby 解释器会做几乎相同的事情。它将任何顶级命令作为一个`instance_exec`块传递给`Object`，它可以调用任何私有方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:28:37.940

私有方法只能使用隐式接收器调用。这意味着`require`将起作用，但`self.require`不会。

可以在 上调用受保护的方法`self`，并且可以在任何对象上显式调用公共方法。

这些是唯一的限制。是的，您可以在子类中使用私有方法，并且`send`会绕过所有访问控制。

# c# - 需要帮助才能摆脱异常丛林

> ID：10314368
> 
> 赞同：4
> 
> 时间：2012-04-25T11:06:20.147
> 
> 标签：c#, .net, exception, control-flow

我已经用谷歌搜索了一段时间，但我仍然不知道在哪种情况下使用哪个异常。我读过`SystemExceptions`在自己的代码中引发是不好的做法，因为这些异常最好由 CLR 引发。

但是好吧，现在我想知道`Exeption`在不同的情况下我应该提出什么。假设我有一个使用枚举作为参数调用的方法。这不是一个很好的例子——它只是从我的脑海中浮现出来。

```
public enum CommandAppearance
{
    Button,
    Menu,
    NotSpecified
}

//...

public void PlaceButtons(CommandAppearance commandAppearance)
{
    switch(commandAppearance)
    {
        case CommandAppearance.Button:
            // do the placing
        case CommandAppearance.Menu:
            // do the placing
        case CommandAppearance.NotSpecified:
            throw ArgumentOutOfRangeException("The button must have a defined appearance!")
    }
} 
```

这里会是什么？是否有某种网站，我可以在其中获得概述？是否有任何模式可以告诉您要提出什么样的异常？我只需要一些关于这个主题的提示，因为我对此很不自信。

我认为只加注`new Exception()`s 也不是好习惯，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:13:09.450

我敢肯定`ArgumentOutOfRangeException`这是最好的内置例外。[ReSharper](http://www.jetbrains.com/resharper/)也建议这样做。
如果您需要另一个..那么唯一的方法是[创建新的特殊异常](http://msdn.microsoft.com/en-us/library/ms173163.aspx) `CommandAppearanceIsNotSpecifiedException`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:24:30.643

对于您的示例场景，我建议：

*   `ArgumentOutOfRangeException`如果该方法支持枚举中的所有值并且传递了无效值。
*   `NotSupportedException`如果该方法支持枚举中值的子集。

一般来说，您希望使用异常类型尽可能[在 .net 框架](http://mobydisk.com/softdev/techinfo/dotnetexceptions.html)中查看此异常列表，这很有意义，否则您想引入自己的异常类型。这可能涉及为您的应用程序添加一个常见的应用程序异常，并添加从它继承的更具体的异常。

例如

```
public class MyAppException : Exception
{
    // This would be used if none of the .net exceptions are appropriate and it is a 
    // generic application error which can't be handled differently to any other 
    // application error.
}

public class CustomerStatusInvalidException : MyAppException
{
    // This would be thrown if the customer status is invalid, it allows the calling
    // code to catch this exception specifically and handle it differently to other 
    // exceptions, alternatively it would also be caught by (catch MyAppException) if 
    // there is no (catch CustomerStatusInvalidException).
} 
```

# asp.net-mvc - web api json反序列化失败

> ID：10314381
> 
> 赞同：0
> 
> 时间：2012-04-25T11:06:54.987
> 
> 标签：asp.net-mvc, json, asp.net-web-api

我有一个在 web api 中使用的请求端点：

```
 public HttpResponseMessage Create(IList<SlideContent> l)
    {
        ...
    } 
```

我将参数作为 json 发送，web api 将其序列化为 IList

幻灯片内容是：

```
public abstract class SlideItem
    {
       ...
    } 
```

我有专门的课程

```
 public class TitleSlideItem : SlideItem
    {
        ...
    }

    public class ParagraphSlideItem : SlideItem
    {
       ...
    } 
```

就像那样我不能调用 Create 函数，因为我得到了一个

> 缺少方法异常：无法创建抽象类

所以我不能反序列化 json 参数。如果我删除抽象修饰符，那么我没有专门的对象，每个对象的类型都是`SlideContent`. 我什至在 json 中添加了注释，但这也无济于事。

如果我没记错的话，我将不得不为抽象类编写一个自定义活页夹，但我该怎么做呢？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:56:31.003

一种可能性是使用 JSON.NET 将内置 JSON 序列化程序替换为自定义格式化程序，如[以下博客文章](http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx)所示。

```
public class JsonNetFormatter : MediaTypeFormatter
{
    private JsonSerializerSettings _jsonSerializerSettings;

    public JsonNetFormatter(JsonSerializerSettings jsonSerializerSettings)
    {
        _jsonSerializerSettings = jsonSerializerSettings ?? new JsonSerializerSettings();

        // Fill out the mediatype and encoding we support
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
        Encoding = new UTF8Encoding(false, true);
    }

    protected override bool CanReadType(Type type)
    {
        if (type == typeof(IKeyValueModel))
        {
            return false;
        }

        return true;
    }

    protected override bool CanWriteType(Type type)
    {
        return true;
    }

    protected override Task<object> OnReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext)
    {
        // Create a serializer
        JsonSerializer serializer = JsonSerializer.Create(_jsonSerializerSettings);

        // Create task reading the content
        return Task.Factory.StartNew(() =>
        {
            using (StreamReader streamReader = new StreamReader(stream, Encoding))
            {
                using (JsonTextReader jsonTextReader = new JsonTextReader(streamReader))
                {
                    return serializer.Deserialize(jsonTextReader, type);
                }
            }
        });
    }

    protected override Task OnWriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext, TransportContext transportContext)
    {
        // Create a serializer
        JsonSerializer serializer = JsonSerializer.Create(_jsonSerializerSettings);

        // Create task writing the serialized content
        return Task.Factory.StartNew(() =>
        {
            using (JsonTextWriter jsonTextWriter = new JsonTextWriter(new StreamWriter(stream, Encoding)) { CloseOutput = false })
            {
                serializer.Serialize(jsonTextWriter, value);
                jsonTextWriter.Flush();
            }
        });
    }
} 
```

然后在`Application_Start`注册格式化程序时，您可以配置序列化程序以使用 JSON 中的类型信息：

```
var formatters = GlobalConfiguration.Configuration.Formatters;
formatters.Remove(formatters.XmlFormatter);
formatters.Remove(formatters.JsonFormatter);

var serializerSettings = new JsonSerializerSettings();
serializerSettings.TypeNameHandling = TypeNameHandling.Objects;
serializerSettings.Converters.Add(new IsoDateTimeConverter());
formatters.Add(new JsonNetFormatter(serializerSettings)); 
```

然后您可以发布以下 JSON：

```
[
    { 
        "$type":"AppName.Models.TitleSlideItem, AppName",
        "Id":1,
        "Title":"some title" // this is a specific property of the TitleSlideItemclass
    },
    {
        "$type":"AppName.Models.ParagraphSlideItem, AppName",
        "Id":2,
        "Paragraph":"some paragraph" // this is a specific property of the ParagraphSlideItem class
    }
] 
```

这将在此操作中成功反序列化：

```
public HttpResponseMessage Post(IList<SlideItem> l)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:00:46.800

JsonFx 创建自定义活页夹。例如看看：

[https://code.google.com/p/jsonfx/source/browse/trunk/JsonFx/JsonFx.MvcTemplate/Global.asax.cs](https://code.google.com/p/jsonfx/source/browse/trunk/JsonFx/JsonFx.MvcTemplate/Global.asax.cs)

查看该文件中的 RegisterBinders() 函数和活页夹的源代码，或者只安装 JsonFx 并使用他们的 MVC 模板创建一个项目，看看他们是如何做到的，或者如果这对你有用，就使用他们的库。这就是我会做的。

# ruby-on-rails-3 - 在 Rails 3 中使用 select distinct 加入查询

> ID：10314386
> 
> 赞同：0
> 
> 时间：2012-04-25T11:07:11.207
> 
> 标签：ruby-on-rails-3

我有两个模型

```
class User < ActiveRecord::Base
  has_one :work
end

class Work < ActiveRecord::Base
  belongs_to :user  
end 
```

我需要从工作表中为特定国家/地区的用户提供不同的描述，我已经编写了以下查询

```
Work.includes(:user).where("users.country_name = ?",'IN').select("distinct works.description").limit(10) 
```

它有效，但并没有给我独特的作品。描述

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:01:46.213

它适用于以下查询，

```
Work.includes(:user).where("users.country_name = ?",'IN').group("works.description").limit(10) 
```

# javascript - 如何在对象和 DRY 中移动 Javascript 函数？

> ID：10314388
> 
> 赞同：1
> 
> 时间：2012-04-25T11:07:44.940
> 
> 标签：javascript, google-maps, javascript-objects, dom-events

在下面介绍的功能中重复相同的操作。我想尽可能多地移动到物体上。一旦在对象中初始化正确的方法，也许可以直接从按钮开始？

HTML：

```
<div id="map" style="width: 500px; height: 400px;"></div>
<button onclick="drawPoly()">Draw This Poly</button>
<button onclick="newPoly()">Create New Poly</button>
<button onclick="restorePolys()">Restore Polys</button>
<button onclick="dropMarker()">Drop Marker</button> 
```

JS：

```
var map;
var mapListener = null;

$(function() {
    map = new google.maps.Map(document.getElementById('map'), {
        center: new google.maps.LatLng(48.864715, 10.546875),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
});

dropMarker = function() {
    if ( !! mapListener) google.maps.event.removeListener(mapListener);

    mapListener = google.maps.event.addListener(map, 'click', function(e) {
        tools.createMarker(e.latLng);
    });
}

drawPolyline = function() {
    if ( !! mapListener) google.maps.event.removeListener(mapListener);

    mapListener = google.maps.event.addListener(map, 'click', function(e) {
        tools.addPoint(e.latLng);
    });
}

newPolyline = function() {
    if ( !! mapListener) google.maps.event.removeListener(mapListener);

    tools.createPolyline();
    mapListener = google.maps.event.addListener(map, 'click', function(e) {
        tools.addPoint(e.latLng);
    });
}

newPolygon = function() {
    if ( !! mapListener) google.maps.event.removeListener(mapListener);

    tools.createPolygon();
    mapListener = google.maps.event.addListener(map, 'click', function(e) {
        tools.addPoint(e.latLng);
    });
}

var tools = {
    polyMarkers: [],
    polyLines: [],
    polyLine: null,
    // ...

    // mapListener: null,
    // tools: function(option) {
    //     if ( !! this.mapListener) google.maps.event.removeListener(this.mapListener);
    //     this.mapListener = google.maps.event.addListener(map, 'click', function(e) {
    //         option(e.latLng);
    //     });
    // },
    // and so on 
```

**编辑**我得到了预期的功能，添加到工具中：

```
mapListener: null,

initFeature: function(type, aspect) {
    if ( !! this.mapListener) google.maps.event.removeListener(this.mapListener);

    if (aspect) this[aspect]();

    this.mapListener = google.maps.event.addListener(map, 'click', function(e) {
        tools[type](e.latLng);
    });
}, 
```

称呼：

```
tools.initFeature(type, aspect); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:15:15.337

如果我得到你想要做的事情，也许有一个构建器功能会有所帮助，这样的东西应该可以处理你的大部分案例使用。

```
function MakeNew(act1, act2) {

    return function() {

        if ( !! mapListener) google.maps.event.removeListener(mapListener);

        if ( act2 ) tools[act2]();

        mapListener = google.maps.event.addListener(map, 'click', function(e) {
            tools[act1](e.latLng);
        });
    };
};

dropMarker = MakeNew('createMarker');
newPolygon = MakeNew('addPoint', 'createPolygon');
createPolygon = MakeNew('addPoint', 'createPolyline'); 
```

# php - 用布尔值（PHP）评估数组的最短方法？

> ID：10314389
> 
> 赞同：5
> 
> 时间：2012-04-25T11:07:47.967
> 
> 标签：php, arrays, boolean

我有一个带有布尔值的数组，循环遍历它并获得最终布尔表达式的最短方法是什么？

**示例**：具有 3 个元素的数组（*true、false、true*）-> 结果应该为 false（*true && false && true* = false）

我知道我可以循环通过它，但是有更短的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-25T11:10:42.240

```
if (!in_array(false, $array)) { ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:12:08.083

我不知道 php 但你可以

首先在数组中搜索 false

如果找到搜索，则结果为假，否则结果为真。

不：这只是和算法。不是代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T11:51:46.160

```
if (array_sum($array) == count($array)) {
  // All are TRUE; 
}
else {
 // One of them is FALSE;
} 
```

# wordpress - Wordpress 重定向到远程 url

> ID：10314392
> 
> 赞同：0
> 
> 时间：2012-04-25T11:08:10.730
> 
> 标签：wordpress

我在单独的主机上有两个域。首先，我可以设置 a.mydomain1.com。第二个我可以将 wordpress 安装为 www.mydomain2.com/wordpress。现在我找到了一个重定向到外部网站的插件。

我的目标是在 a.mydomain1.com 上显示 wordpress 网站。如何在第一个域的管理面板中配置记录？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:50:56.540

我认为你应该使用[WordPress Multisite。](http://codex.wordpress.org/Migrating_Multiple_Blogs_into_WordPress_3.0_Multisite) WordPress 包含新的多站点功能，这意味着它可以在一个 WordPress 安装上运行许多博客，甚至可以使用它们自己的独立域。

# sql - 分组内的 SQL 排序

> ID：10314399
> 
> 赞同：2
> 
> 时间：2012-04-25T11:08:48.090
> 
> 标签：sql, sql-server, sorting

我需要有关 SQL (MSSQL) 的帮助，我在其中按多个布尔类型排序以便对结果进行分组，但还需要按每个类型分组中的日期字段进行排序。

以下 SQL 似乎可以正常工作：

```
Select * from staff ORDER BY admin DESC, hr DESC, sales DESC, it DESC, updated DESC 
```

诀窍是某些记录选择了超过 1 种类型，然后输出就搞砸了。我只需要在一个分组中显示员工，但他们应该在每个分组中按更新的 DESC 排序。

这是我得到的输出：

```
Name  updated    admin  hr     sales  it   
-------------------------------------------
fred  2012/04/01 true   true
bill  2011/10/01 true   true
joe   2012/04/01 true
sam   2012/03/01 true
jo    2012/02/01 true
beth  2012/03/01        true
mary  2012/02/01        true
harry 2011/02/01               true  true
gary  2012/04/01               true
bruce 2012/04/01                     true 
```

这是我需要的输出

```
Name  updated    admin  hr     sales  it   
-------------------------------------------
fred  2012/04/01 true   true
joe   2012/04/01 true
sam   2012/03/01 true
jo    2012/02/01 true
bill  2011/10/01 true   true
beth  2012/03/01        true
mary  2012/02/01        true
gary  2012/04/01               true
harry 2011/02/01               true  true
bruce 2012/04/01                     true 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:19:31.590

您可以在 order by 子句中使用 case 表达式进行条件排序。

```
SELECT *
FROM staff
ORDER BY
    admin DESC,
    CASE admin WHEN 'true' THEN updated END DESC,
    hr DESC,
    CASE hr WHEN 'true' THEN updated END DESC,
    sales DESC,
    CASE sales WHEN 'true' THEN updated END DESC,
    it DESC,
    updated DESC 
```

# tomcat - Grails 2.0 PermGem 空间与 run-war

> ID：10314400
> 
> 赞同：4
> 
> 时间：2012-04-25T11:08:50.487
> 
> 标签：tomcat, grails

我有一个基本的应用程序，当我用它运行它时工作正常`grails run-app`，我想用它运行它`grails run-war`。但是我总是`java.lang.OutOfMemoryError: PermGem space`在启动之后收到著名的tomcat错误，任何请求。

好吧，我知道我需要更改值，所以我尝试了在谷歌搜索(和)`PermSize`后找到的所有方法，现在我有以下脚本：`JAVA_OPTS``GRAILS_OPTS``grails.tomcat.jvmArgs`

```
export JAVA_OPTS="-Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m"
export GRAILS_OPTS="-Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m"
grails -Dgrails.tomcat.jvmArgs="-Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m" run-war 
```

但这无济于事。仍然有`java.lang.OutOfMemoryError: PermGen space`第一次请求。

我做错了什么？有没有其他方法可以`PermSize`为 Grails 2.0.1 配置？

更新：我运行`ps -ef | grep java`并发现 Grails 实际上得到了我的参数，但随后它为 tomcat 运行了一个新进程，没有这个参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T12:41:36.607

发现必须配置在`BuildConfig.groovy`：

```
grails.tomcat.jvmArgs= ["-Xms256m",  "-Xmx1024m", "-XX:PermSize=512m", "-XX:MaxPermSize=512m"] 
```

现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:28:27.160

看起来您获得了正确的信息`grails.tomcat.jvmArgs`，以供将来参考，使用 JDK 附带的 2 个命令很容易判断 jvm 进程正在运行哪些标志。 `jps`显示所有使用 java 运行的进程（很容易找到与此比较的 grails 进程 ot regular `ps`，`jinfo <PID>`并将转储运行 JVM 进程的所有系统属性和标志（包括内存参数）。它可以很容易地查看是否或者没有一个进程正在以您期望的所有值运行。

# actionscript-3 - Flash Player 9 或 10+

> ID：10314403
> 
> 赞同：2
> 
> 时间：2012-04-25T11:09:04.137
> 
> 标签：actionscript-3, actionscript, statistics, flash

[统计 1](http://www.adobe.com/products/flashplatformruntimes/statistics.displayTab3.html) | [统计 2](http://www.statowl.com/flash.php)

查看统计数据并考虑到我足够邪恶以至于忘记了世界上大约 5% 的人，

作为标准，在每月获得大约 100 万次独立访问的网站中继续使用 flash 10（从目前的 9 个）是否安全？

还有什么我应该解释的吗？大多数公司目前支持的最低限度是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T11:15:17.733

您应该使用您的统计代理来检查您的受众中的 Flash 版本渗透率。使用 Google 分析，转到受众、技术、浏览器，然后是 Flash 版本。使用准确的数据而不是全局统计数据做出决定。

# java - 如何将捕获的图像保存到图库

> ID：10314404
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:09:04.190
> 
> 标签：java, android, emulation, galaxy

我正在开发 Galaxy Nexus（Android 4.0.3）。我将此称为链接[https://developer.android.com/training/camera/photobasics.html](https://developer.android.com/training/camera/photobasics.html)以保存捕获的图像以直接存储到图库中，但它将图像存储到其他文件。请告诉我我必须做什么才能将其存储在画廊中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T07:45:47.550

是的画廊不是存储它显示存储在不同位置的媒体但是要将它保存在画廊中，它专门用于高分辨率更多内存消耗图像`MediaStore` 现在使用你知道只需捕获图像获取其路径（使用意图）并遵循代码将任何图像保存到图库

```
public static Uri addImageToGallery(Context context, String filepath,String title,String ) {    
    ContentValues values = new ContentValues();
    values.put(Media.TITLE, title);
    values.put(Media.DESCRIPTION, description); 
    values.put(Images.Media.DATE_TAKEN, System.currentTimeMillis());
    values.put(Images.Media.MIME_TYPE, "image/jpeg");
    values.put(MediaStore.MediaColumns.DATA, filepath);

    return context.getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:12:47.697

图库不是图像存储。这是一个显示存储在设备上不同位置的图像的应用程序。

看一下这个：

[android如何将捕获的图像保存到手机图库中](https://stackoverflow.com/questions/6027720/android-how-to-save-captured-image-into-phones-gallery)

# php - 审查委员会认证

> ID：10314407
> 
> 赞同：1
> 
> 时间：2012-04-25T11:09:37.980
> 
> 标签：php, json, authentication, review-board

我有一个在不同服务器上运行的审查委员会。我将审查委员会用作它的普通用户，并且可以评论创建它的评论，但我不是它的管理员。为了查看审查请求或对其发表评论，我需要使用我的用户名和密码对其进行身份验证。这是给我的访问权限。Review Board 是一个开源工具，许多组织都在使用它。

这是它的WEB API：-（验证链接）[http://www.reviewboard.org/docs/manual/1.5/webapi/2.0/authenticating/#logging-in](http://www.reviewboard.org/docs/manual/1.5/webapi/2.0/authenticating/#logging-in)

现在我在本地系统上使用 wamp 作为服务器。我使用 php 作为服务器端语言。我想使用 Review Board API 通过我的凭证获取数据。我正在使用 php curl 并编写此代码进行身份验证：-

```
<?php

$ch = curl_init('http://SERVERIP');
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Basic realm="Web API"')); 
$output = curl_exec($ch);  
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Basic md5encryptedusernamepassword')); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);  
$output = curl_exec($ch);  
$info = curl_getinfo($ch);  
var_dump($info);
curl_close($ch);
var_dump($output);

?> 
```

此代码未进行身份验证。请看一看。任何类型的指南都会有所帮助。我花了很多时间来理解它。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:52:31.887

你应该设置headers key:"Authorization",value:" Basic #{Base64.encode64("username:password")}"。然后你就可以访问需要认证的api了。

# ruby-on-rails - Rails Method_missing 从哈希中返回值

> ID：10314412
> 
> 赞同：0
> 
> 时间：2012-04-25T11:10:21.913
> 
> 标签：ruby-on-rails, ruby, method-missing

我正在尝试编写一个 method_missing 方法，这样当我运行一个方法时，它必须点击哈希并查看键，如果它找到匹配项以返回值。并继续。哈希是从我编写的 sql 查询中填充的，因此值永远不会保持不变。

一个例子就像

```
 @month_id.number_of_white_envelopes_made 
```

在哈希中

```
 @data_hash[number_of_white_envelopes_made] => 1 
```

所以@month_id 将返回 1。我以前从未使用过它，使用散列作为后备方法缺少的材料并不多

编辑：对不起，我忘了说如果它没有在哈希中找到方法，那么它可以继续下去，直到没有方法错误

编辑：好吧，所以我正在破解，这就是我想出的

```
 def method_missing(method)
   if @data_hash.has_key? method.to_sym
     return @data_hash[method]
   else
     super
   end
 end 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T11:23:43.537

怎么样的东西：

```
def method_missing(method_sym, *arguments, &block)
  if @data_hash.include? method_sym
    @data_hash[method_sym]
  else
    super
  end
end 
```

并且永远记得加上对应的respond_to？到你的对象：

```
def respond_to?(method_sym, include_private = false)
  if @data_hash.include? method_sym
    true
  else
    super
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:18:21.687

最短的是

```
class Hash
  def method_missing(sym,*)
    fetch(sym){fetch(sym.to_s){super}}
  end
end 
```

首先尝试`hash[:key]`然后`hash["key"]`

# linq - 出现错误：**枚举没有结果**

> ID：10314414
> 
> 赞同：1
> 
> 时间：2012-04-25T11:10:22.583
> 
> 标签：linq

我收到错误**枚举**在执行时没有产生任何结果：

```
IEnumerable<Proxy> pxys = this._ticket.AllProxies.Where(p => p.IfBusy.Equals(false)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:16:43.637

您会收到该错误消息的原因是两个原因之一，要么`this._ticket.AllProxies`不包含任何项目（例如，它是一个空集合），要么集合中的任何代理都没有`false`其`IfBusy`属性的值。

# mysql - SQL 嵌套查询作业 SQL Fiddle

> ID：10314417
> 
> 赞同：2
> 
> 时间：2012-04-25T11:10:34.550
> 
> 标签：mysql, sql, nested-query

查找成员（患者）人数最多的保险公司。

这就是数据库，也是我第一次尝试靠近：

[http://sqlfiddle.com/#!3/4b2ed/27](http://sqlfiddle.com/#!3/4b2ed/27)

```
SELECT  P.cid AS cid, COUNT ( P.pid ) AS CountP
FROM        Patient P
GROUP BY    P.cid 
```

我如何获得最大计数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:17:31.643

只需按患者数量递减的顺序排列您的结果，并且只记录第一个记录。

```
SELECT  P.cid AS cid, COUNT( P.pid ) AS CountP
FROM        Patient P
GROUP BY    P.cid
ORDER BY    CountP DESC
LIMIT 1 
```

如果不止一家保险公司可能拥有最大数量的成员，并且您想获取所有成员，则需要使用子查询：

```
SELECT  P.cid AS cid, COUNT( P.pid ) AS CountP
FROM        Patient P
GROUP BY    P.cid
HAVING      CountP = (
    SELECT   COUNT(pid) AS c
    FROM     Patient
    GROUP BY cid
    ORDER BY c DESC
    LIMIT 1
); 
```

在您在评论中描述的奇怪情况下，无法使用`LIMIT`，您可以这样做：

```
SELECT  P.cid AS cid, COUNT( P.pid ) AS CountP
FROM        Patient P
GROUP BY    P.cid
HAVING      CountP = (SELECT MAX(d.c) FROM (
    SELECT   COUNT(pid) AS c
    FROM     Patient
    GROUP BY cid
) AS d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:13:30.270

尝试以下操作：
max(count(P.pid))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:15:01.477

```
SELECT  P.cid, COUNT ( P.pid ) AS CountP
FROM    Patient P
GROUP BY    P.cid
compute max(count(p.pid)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:18:18.193

哇 - 很多限制。干得好：

```
SELECT MAX(CountP) FROM (
  SELECT P.cid, COUNT ( P.pid ) AS CountP
  FROM  Patient P
  GROUP BY  P.cid
) winner 
```

# mysql - MySQL：在 BEFORE INSERT 触发器中执行类型转换

> ID：10314420
> 
> 赞同：0
> 
> 时间：2012-04-25T11:10:41.527
> 
> 标签：mysql, triggers, insert

我有两张桌子，`pattern`和`pattern_optimized`。表中的某些字段`pattern`被定义为`BIGINT(20) DEFAULT '-1'`，这对于它们所保存的数据来说太大了；此外，`-1`用作“未设置”（零是有效值） - 否则不使用其他负值。

该`pattern_optimized`表对这些行使用新的数据格式，将它们定义为`INT(10) UNSIGNED DEFAULT NULL`. 我现在想将数据从表中复制`pattern`出来`pattern_optimized`。

这可以使用 轻松完成`INSERT INTO pattern_optimized SELECT * FROM pattern`，但显然所有负值现在都超出了范围，导致如下警告：

```
100 row(s) affected, 64 warning(s): 
1264 Out of range value for column 'version' at row 1 
1264 Out of range value for column 'triggered' at row 1
...
Records: 100  Duplicates: 0  Warnings: 357 
```

我的第一个想法是创建一个`BEFORE INSERT`触发器，如下所示：

```
CREATE TRIGGER `negativeValueFix` BEFORE INSERT ON `pattern_optimized`
FOR EACH ROW
BEGIN
    IF new.version < 0 THEN 
        SET new.version = NULL; 
    END IF;
    -- ...
END 
```

但不幸的是，这也无济于事：弹出相同的警告，并且曾经`-1`在原始表中的所有值都`0`在新表中（而不是`NULL`, 这是 - 除了在触发器中实现 - 也是默认的排）。似乎 MySQL 甚至在触发器之前就转换了值。

我知道我可以使用临时表来解决这个问题，但我不想那样做。该`pattern`表大得令人不快，我不想为此做一个存储过程。

还有其他方法还是我错过了一些简单的点？

**编辑**：原始表中有很多列受到签名问题的影响，所以我希望能稍微自动化一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:15:35.260

你能用case语句吗？就像是：

`INSERT INTO pattern_optimized SELECT CASE version WHEN -1 THEN null ELSE version END CASE AS version FROM pattern`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:17:14.340

只需在 SELECT 语句中添加小条件，例如 -

```
INSERT INTO pattern_optimized(version)
  SELECT IF(version < 0, NULL, version) version FROM pattern 
```

...添加其他字段。

# api - 如何使用流 api 跟踪带有链接的推文？

> ID：10314423
> 
> 赞同：1
> 
> 时间：2012-04-25T11:11:00.603
> 
> 标签：api, twitter, streaming

我目前正在使用流 API 来跟踪带有特定主题标签的推文，但是否可以进一步过滤它们以仅包含带有链接的推文？我尝试在搜索 api 中添加“filter:links”，但它没有返回任何内容，即使当我在 twitter 网站中搜索“#myhashtag filter:links”时它确实返回了新推文。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T10:10:47.880

[DataSift](http://datasift.com)允许这样做。您可以搜索链接的域、URL、标题或转推计数，以及在推文的文本内容中搜索关键字或#hashtags。查看[DataSift 文档](http://dev.datasift.com)或[DataSift 技术博客](http://dev.datasift.com/blog)了解更多信息

# android - 单个 android 应用程序中的多个 android 库

> ID：10314426
> 
> 赞同：0
> 
> 时间：2012-04-25T11:11:10.417
> 
> 标签：android, android-library

我正在开发一个包含外部库的 android 应用程序。1) **com_facebook_android** 2) **com_viewpagerindicator**

我在使用单个外部库（即 facebook 库）时工作正常，但是当我尝试添加第二个外部库时，即查看寻呼机库**Android 应用程序**显示错误。我尝试了但无法找出该错误，因为该错误不存在于任何资源或该项目的 java 文件中。当我在其中添加该外部库时，它变得可见。下图将帮助您更好地理解。![在此处输入图像描述](../Images/666a1d24f229ada77b2c1c72b090b06c.png)

# c - 如何在 c 中解决具有许多不同级别（它们是递归的）的问题

> ID：10314438
> 
> 赞同：1
> 
> 时间：2012-04-25T11:11:45.323
> 
> 标签：c, algorithm, recursion

我想知道如何处理在 c 中问题的许多不同“级别”中使用的过程的问题，最好以“惯用”方式。我知道我解释得不够好，所以让我举个例子：

考虑制作一个游戏求解器的一般问题，它应该打印最好的下一步动作。我认为它应该在一个`for`循环中检查所有可能的动作，看看它是否是一个获胜的动作（在这一轮中）如果是，则返回移动，否则检查对手可以针对您的移动（for循环）进行的所有可能移动并调用该函数以再次找到最佳移动。

但是，我发现这种方法有一些限制，例如性能（程序将花费时间运行调用函数所需的样板代码等）和有限的灵活性，因为函数必须找到一种方法来与调用者沟通如何找到了一个很好的举动。也就是说，如果它可以做到的话。

```
bestmove()
{
  for (;i<maxmove;i++)
   {
    if(checkifwinning(moves[i])) return;
    for (;n<maxopponentmove;n++)
     {
      bestmove();
     }
   } 
```

我已经和haskell 搞混了一段时间，所以我担心我的想法是寻求递归解决方案。我希望你能告诉我一种以'c native'方式编写这个函数的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:16:25.993

C 语言允许递归函数。但是，它没有尾递归调用的概念（但在某些情况下，最近的 GCC 编译器能够将一些尾递归调用优化为纯迭代的机器代码）。

在编写递归函数时，您应该避免太深的递归和太大的本地调用帧（所以使用堆内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:23:29.433

我认为你真正需要的是一个类似[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)的算法：保留一个“开放”移动列表（即尚未考虑）和一个“封闭”移动列表（即，已经考虑）。在 C 中，最好用两个队列（打开和关闭）来实现。然后你会有一个如下的算法：

```
while (open is not empty)
{
   pop gameState from open
   if (gameState in closed)
      continue;
   push gameState to closed
   for (eachMove)
   {
       computeNewState();
       addStateToOpen();
   }
} 
```

与递归方法相比，这样做有几个优点：

*   你确定每个游戏状态只考虑一次
*   你不会“压倒”堆栈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:48:25.113

您正在谈论搜索游戏树以找到最佳移动；你可以使用像[minimax](http://en.wikipedia.org/wiki/Minimax)这样的标准算法。您的方法似乎是对树的深度优先搜索，该树在找到的第一个获胜动作处终止；请注意，这不会找到通往获胜动作的最短路径，也不会防止对手获胜。

有一些方法可以加快游戏树的搜索速度，例如[alpha-beta pruning](http://en.wikipedia.org/wiki/Alpha-beta_pruning)。这样的标准算法是要走的路——比担心在 C 中调用函数等的开销要好得多。C 函数调用并不昂贵。在编写 C 代码时要小心这种“优化”——无论如何，优化器可能更擅长这些事情。至少，首先以最直接的方式编写一个版本，这样你就有了可以作为基准的东西。你的工作是找到一个好的算法。

# sql - 规范化数据库后，您如何处理额外的表？

> ID：10314448
> 
> 赞同：0
> 
> 时间：2012-04-25T11:12:18.727
> 
> 标签：sql, database, normalization

我已经标准化了我的数据库，但现在我有很多额外的表。原则上，这些仍然是一张桌子，只是分成更小的桌子，还是我需要为每个桌子命名，它们是否独立于最后一张桌子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:21:58.540

当您规范化关系时，您会用新关系替换原始关系。您没有任何“额外”表格。每一个新的关系都是成熟的，需要一个名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:20:29.367

如果您做的一切正确，您的数据将分布在几个成熟的表中（带有名称:)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:20:49.270

规范化后，您将获得冗余较少的表。标准化后得到的表是相互依赖的。但实际上它们是不同的，你必须给每一个命名。

结论：“你需要给每一个名字。”

# git - 推送到多个遥控器的 Git 代理

> ID：10314449
> 
> 赞同：6
> 
> 时间：2012-04-25T11:12:33.543
> 
> 标签：git, heroku, proxy

我正在寻找一款我希望有人构建的软件。我将在这里描述这个软件，希望有人听说过这样的事情，并能指出我正确的方向。

我正在开发一个部署在 Heroku 上的网络应用程序。由于 Heroku 的限制，我陷入了为同一个存储库拥有四 (4) 个远程 Git 存储库的不幸境地。

为什么是四个？

我们在 Heroku 上有多个“应用程序”。一个用于生产和几个登台“应用程序”。这些都是针对同一个实际应用程序的，但在 Heroku 上它们是单独的“应用程序”，因此我们可以在将它们推向生产之前在暂存中进行尝试。

Heroku 上的每个应用程序都有自己独立的 Git 存储库，并在`master`每次将新提交推送到该分支时自动部署该`master`分支。Heroku 的这项政策是我们问题的症结所在。因为这意味着我们在 Heroku 上有 3 个不同的存储库，以及我们的 GitHub 存储库。

为什么有 4 个不同的 Git 遥控器会出现问题？因为这意味着当您开发和创建新提交时，您必须（1）仅推送到一个远程或（2）推送到所有远程。

做（1）意味着考虑你想推送到哪个遥控器。我讨厌不得不考虑这个问题。当我开发时，我不关心遥控器，我承诺并推动并重新开始工作。例如，如果我想将一个分支部署到登台服务器 1 中，我会将该分支合并到该`staging_1`分支中并推送它。我不喜欢选择要推送到哪个遥控器。

(1) 的另一个缺点是您的遥控器不同步。

我想要的是（2）。我希望每个推送操作都推送到我们所有的四个存储库。

但这有两个问题：

问题 1：Heroku 上的暂存“应用程序”部署了`master`. 我不希望他们那样做。我想将`staging_1`我的仓库中的`master`分支映射到登台服务器 Git 仓库上的分支。

问题 2：让我的计算机推送到所有 4 个存储库需要**很长时间**。即使是 1 Heroku 推送操作也需要很长时间。有时可能需要 40 秒。

* * *

# 建议的解决方案

这就是我想要的。我想要一个专门的 Git 服务器来充当代理。每当我从本地计算机推送到这个 Git 服务器时，它会将这些相同的分支推送到我们的 4 个**并行存储库中**。这样，从我的本地计算机的角度来看，推送似乎是即时的，而此代理服务器将在后台自动处理 Heroku 存储库。

如果推送到 4 个遥控器中的任何一个由于任何原因失败，我希望这个代理以某种方式报告回来，这样我就会知道有什么东西坏了并可以修复它。

该代理必须做的另一件事是`master`映射。每次我将`staging_1`分支推送到它时，它都会将它推`staging_1`送到所有遥控器，但是对于属于登台服务器的遥控器，它也会将该分支推送为`master`，因此 Heroku 会知道部署它。

（很遗憾，Heroku 的设计方式让我需要这样的代理，但这就是我必须处理的。）

就是这样了。这就是我想要的解决方案。有人知道这样的程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:56:52.340

创建一个新的存储库，您可以在希望推送传播时推送到该存储库，并编写一个 post-receive 挂钩以在您推送到此存储库时传播更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:51:14.867

这对我来说似乎有点疯狂。我在 Heroku 上有多个运行不同环境的应用程序。我有一个 Github 存储库，然后是适用于不同环境的 Heroku 遥控器。我也倾向于维护一个与 Heroku 遥控器匹配的 Git 分支。

然后通过以下方式完成部署（如 John 所说）：

```
git push heroku_remote local_branch:master 
```

我在这里记录了这种基本方法：

[http://neilmiddleton.com/deploying-topic-branches-to-heroku/](http://neilmiddleton.com/deploying-topic-branches-to-heroku/)

但是，据我所知，您需要完全自动化。您可以使用诸如[TDDium 之](https://addons.heroku.com/tddium)类的服务来为您执行此类操作，查看 Git 分支，然后在您的测试套件通过时推送到远程分支（例如 Heroku 远程）。

[http://neilmiddleton.com/continuous-deployment-with-heroku/](http://neilmiddleton.com/continuous-deployment-with-heroku/)

我很确定 TDDium 方法会通过额外的 CI 层为您提供所需的东西。

# php - php脚本文件未上传

> ID：10314456
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:13:20.063
> 
> 标签：php, zend-framework

我正在研究 zend 框架，当我尝试上传文件时，它会给我以下错误。请让我知道如何授予上传文件的权限，并且不会导致上传流失败

警告：move_uploaded_file(C:\inetpub\wwwroot\webmin\application\uploads\1335352110_123.avi) [function.move-uploaded-file]：无法打开流：C:\inetpub\wwwroot\webmin\application\ 中的权限被拒绝第 266 行的控制器\StimulusController.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:18:14.687

尝试更改目录 *C:\inetpub\wwwroot\webmin\application\uploads* 的访问权限

# iphone - 'tochesBegan' 和 'touchesMoved' 之间的延迟

> ID：10314459
> 
> 赞同：1
> 
> 时间：2012-04-25T11:13:28.940
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用我的应用程序的手绘部分。

当我尝试绘制非常非常细的线（如 2~3 像素）时，它仍然只有一个像素。并进一步移动我的 thouch，然后跳转到 4 个像素。:(

这不是性能问题。'tochesBegan' 和 'touchesMoved' 事件之间存在延迟。

我认为这与此有关： [touchesBegan 何时变为 touchesMoved？](https://stackoverflow.com/questions/1122616/when-does-a-touchesbegan-become-a-touchesmoved)

奇怪的是它没有在 iOS Simulator 和 SketchBookX（一个流行的绘图应用程序）上发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:23:22.420

哦，我终于找到了我的错！

![在此处输入图像描述](../Images/1321ff947449da41e5a438b36f167e3e.png)

如果触摸在“touchesBegan”之后移动很短，则不会触发“touchesMoved”。

但是当 'touchesEnd' 它给出移动点 X(

这有点奇怪，但最后我已经完成了:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T13:13:21.030

如果有延迟，为什么要消除延迟？只需处理它并在您收到的最后一点和新点之间画一条线。用户甚至看不到 4 像素或 2 到 3 像素 - 仅他们的手指将覆盖 45 像素的半径，因此当他们拖动手指进行绘制时，2 / 3 / 4 不会被注意到，而且无论如何都不重要如果你正在连接点

# windows - 我需要什么 Windows api 来构建像 TeamViewer 这样的远程桌面工具？

> ID：10314461
> 
> 赞同：0
> 
> 时间：2012-04-25T11:13:30.270
> 
> 标签：windows, winapi, remote-desktop

从低带宽占用来看，我猜 TeamViewer 不只是逐个像素地传输屏幕。那么这样的工具会使用什么 api 来获取图形特征以进行高效传输呢？是否有像“穷人的 TeamViewer”这样的开源应用程序在代码中展示了这一点？

ETA：我不是要求“复杂任务”的“特定 api”。我的问题归结为“在从 Windows 获取图形信息方面，TeamViewer 是如何工作的？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:03:13.153

考虑[Windows 桌面共享 API](http://msdn.microsoft.com/en-us/library/bb968809.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:15:12.733

你可以看看[VNC](http://en.wikipedia.org/wiki/VNC)。但是要求一个特定的 API 来完成一项相当复杂的任务可能是徒劳的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:34:56.823

您可以使用 Win VNC [http://dotnetvnc.sourceforge.net/](http://www.realvnc.com/)下载并使用他们的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:36:30.000

好的，这不是对我问题的直接回答，但仍然是对这个问题的有趣讨论[TeamViewer 怎么这么快？](https://stackoverflow.com/questions/9498877/how-is-teamviewer-so-fast). OP 提出了一个与我类似的问题，并提供了他对竞争系统的经验分析。他说 Windows 远程桌面比 VNC 快得多，大概是因为它传输 Windows 绘图命令而不是位图差异，他还说 TeamViewer 甚至比这还要快，原因他想了解。

# css - CSS浮动div，不缩小到内容

> ID：10314463
> 
> 赞同：3
> 
> 时间：2012-04-25T11:13:32.437
> 
> 标签：css, css-float

这对我来说很奇怪，虽然我已经搜索过，但每个人似乎都有与我相反的问题（浮动 div 缩小）！

我有这个页面：[http](http://www.tameside.gov.uk/test/news) ://www.tameside.gov.uk/test/news ，它使用 PHP 为各种新闻故事生成顶部的 div，它工作正常。然而，这些项目（它们是浮动的 div）位于一个向左浮动的 div 中，由于某种原因，它并没有缩小到这些项目（这是它唯一的内容）。

据我所知，浮动 div 总是缩小到它的内容，但这个特定的 div 正在扩展到页面的 100%。我已将包含 div 的背景涂成灰色，以向您展示我的意思。

我希望它缩小到内容，以便我可以使用居中技巧，然后无论热门新闻项目中有多少 div，它都会使 div 居中。但是因为它没有缩小，所以这个技巧显然行不通。

每个新闻项目 div 的 CSS 如下：

```
.news-top-item {
    border-radius: 10px;
    border-color: #3f7dae;
    border-style: solid;
    border-width: 2px;
    float: left;
    width: 19%;
    text-align: center;
    margin-right: 0.5%;
    height: 13em;
    padding-top: 0.5em;
    cursor: pointer;
    position: relative;
} 
```

他们还有一个内部有一个小 CSS 的跨度，以使整个事情成为一个链接：

```
.news-top-item span {
    display: inline;
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left: 0;
    z-index: 2;
    background-image: url('/tmbc_images/include/1pixel.gif');
    cursor: pointer;
} 
```

我怀疑这会造成干扰，但以防万一。

外部 div 只有“float: left”和应用到它的背景颜色。

任何帮助将非常感激。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:34:25.273

You shall remove float:left and use display:inline-block instead

```
.news-top-item {
    border-radius: 10px;
    border-color: #3f7dae;
    border-style: solid;
    border-width: 2px;
    display:inline-block;
    width: 19%;
    text-align: center;
    margin-right: 0.5%;
    height: 13em;
    padding-top: 0.5em;
    cursor: pointer;
    position: relative;
} 
```

And add text-align:center in your containing div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:30:13.190

```
width:100%;
height:100%; 
```

是 100% 的窗口大小...试试

```
width:auto;
height:auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:52:08.417

使用绝对单位而不是百分比来定义内部元素的度量：

```
.news-top-item {
    border-radius: 10px;
    border-color: #3f7dae;
    border-style: solid;
    border-width: 2px;
    float: left;
    width: 200px; /* <--- */
    text-align: center;
    margin-right: 2px; /* <--- */
    height: 13em;
    padding-top: 0.5em;
    cursor: pointer;
    position: relative;
} 
```

# javascript - 检查键盘或鼠标事件在 Div 中完成

> ID：10314464
> 
> 赞同：2
> 
> 时间：2012-04-25T11:13:33.817
> 
> 标签：javascript

如何检查键盘或鼠标事件是否在 div 内完成？

一旦我检查了 div 的 onmousemove() 事件，它就可以工作，但是 onkeyup、onkeypress 等对 div 不起作用。

这是什么原因？

```
<div onmousemove="alert(1);" onkeypress="alert(2);"> 
```

这里将显示 alert(1) 但不显示 alert(2)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:18:33.950

看看这个[小提琴](http://jsfiddle.net/GDYH2/)。您不能在不允许您聚焦和输入的元素上触发键事件...这可能是可能的，`contenteditable`但我不确定...当您在小提琴的输入中执行按键操作时，div 的 onkeypress正在触发

编辑：我刚刚发现您还可以在 div 上设置 tabindex="0" 并因此使其可聚焦（请参阅更新的[新小提琴](http://jsfiddle.net/GDYH2/1/)）然后不需要输入但是当使用 TAB 键通过可聚焦元素时它会干扰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:22:36.243

div 必须有焦点。
这是您的操作方法：

## 1-标签索引：

```
// JQ
$("#divID")
    .attr("tabindex", "0")
    .keydown(function(){ /* ... bla bla bla ... */ return false; }); 
```

或者

```
// JS
<div id="divID"
     width="500px"
     height="500px"
     tabindex="1">
</div> 
```

## 2-将 contentEditable 设置为 true：

```
$("#divID").attr("contentEditable", "true") 
```

或者

```
$("#divID")[0].contentEditable = true; 
```

## 链接：

[如何使用 jquery 为 HTML 画布提供键盘焦点？](https://stackoverflow.com/questions/1829586/how-do-i-give-an-html-canvas-the-keyboard-focus-using-jquery)
[如何将焦点设置到 HTML5 画布元素？](https://stackoverflow.com/questions/56771/how-do-you-set-focus-to-the-html5-canvas-element)

# delphi - 如何从 Delphi XE2 加速文字自动化

> ID：10314472
> 
> 赞同：4
> 
> 时间：2012-04-25T11:14:09.520
> 
> 标签：delphi, automation, ms-word, ole

我使用 Delphi 应用程序中的 Word 自动化，它非常慢。我已将我的代码精简到最低限度，并希望有经验的人能告诉我哪里出错了（实际上我希望我*出错*了，这样我可以加快速度）

我的应用程序中自动化的本质是处理书签。该应用程序打开一个带有一些特殊书签的文档，遍历这些书签并根据它们的名称更改它们。真实版本还大量处理文档变量和域代码。一个典型的文档有 50-80 个书签，其中一些是嵌套的。我还使用一些临时文档来构建文本和图像块，它们被连续放置在要生成的文档中。附加的代码是一个非常精简的版本，没有此功能，但它显示了不需要的行为（即生成文档的时间）。在随附的示例中，生成文档大约需要 2.5 秒。对于典型的真实文档，大约需要 30-40 秒，有时甚至更多。

我希望有人说“你做错了。当从 Delphi 做 Word Automation 时，你必须永远记住 XXX！”。

由于整个项目，即使完全剥离，也相当大，我做了这个小应用程序。如果我这样做的方式有明显的错误，希望从这段代码中可以明显看出。

请创建一个新的 VCL 表单应用程序。打开 Word，然后创建一个新文档。在第一行输入一些文本，标记它并插入书签。在第二行输入一些文本，并将其也添加为书签。将文件另存为 'c:\temp\bm.doc' 作为 Word 97-2003 文档。运行应用程序后，您应该有一个新文档（'c:\temp\bm_generated.doc'），第一行有一个随机数，没有书签。

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, OleServer, WordXP, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public

  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  vWordApp    : TWordApplication;
  vDoc        : WordDocument;
  vFileName   : OleVariant;
  vIndex      : OleVariant;
  vBookmark   : Bookmark;
  vSave       : OleVariant;
begin
  vWordApp := TWordApplication.Create(nil);
  try
    vWordApp.ConnectKind := ckNewInstance;
    vWordApp.Connect;
    vFileName := 'c:\temp\bm.doc';
    vDoc := vWordApp.Documents.Open(vFileName, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam);

    //Replace bookmark text with random string:
    vIndex := 1;
    vBookmark := vDoc.Bookmarks.Item(vIndex);
    vBookmark.Range.Text := inttostr(random(10000)); //Will also delete the bookmark!

    //Delete bookmark content and bookmark
    vIndex := 1; //This will be the bookmark that was originally the first, since that was deleted when we sat the text
    vBookmark := vDoc.Bookmarks.Item(vIndex);
    vWordApp.Selection.SetRange(vBookmark.Range.Start, vBookmark.Range.End_);
    vWordApp.Selection.Text := '';

    vFileName := 'c:\temp\bm_generated.doc';
    vDoc.SaveAs2000(vFileName, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam);

    vWordApp.NormalTemplate.Saved := true; //For å slippe spørsmål om "normal.dot" skal lagres
    vSave := wdDoNotSaveChanges;
    vWordApp.Quit(vSave);
    vWordApp.Disconnect;
  finally
    vWordApp.Free;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:57:15.023

你可以试试：

```
vWordApp.ScreenUpdating := False; 
```

也许还有

```
vWordApp.Visible := False; 
```

（记得在完成后设置回以前的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:21:07.510

您是否尝试过向 VBA 提供参数并在 word 中进行替换？几年前，我在 Word 文档中为客户做了几百个宏。根据我的记忆，这是一个更快的实现。那是来自 Java 代码库。

Word 首先花费大量时间加载和解析文档。这可能是大部分时间花费的地方。我会通过不更换书签来确定计时测试的基准。另一件事是它可能正在为每个替换进行全文扫描。这可能是 VBA 工作得更好的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T15:34:53.013

If you do just basic stuff with bookmarks and fieldcodes (mind you NO IF constructions) you might think about converting the document(s) to RTF and change everything in there. I did that can run code inside 0.005 of a second per document. Saving the document takes about 0.2 - 2 seconds, depending on the speed of the diskdrive.

# ios - iPhone UINavigationBar - 设置 rightBarButtonItem 的宽度和边距

> ID：10314478
> 
> 赞同：3
> 
> 时间：2012-04-25T11:14:27.193
> 
> 标签：ios, ios5

我有一个按钮的背景图像，尺寸为 80x30 像素。

我使用下面的代码在我的视图控制器中设置背景，结果是这样的：

![顶部和角落很吵](../Images/dd260ad54500c8d43e536dddb7518d01.png)

如您所见，右侧按钮的角和顶部被弄乱了。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIImage *favoriteBtnImgNormal = [[UIImage imageNamed:@"favorite-btn-normal"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 30, 30, 0)];
    UIImage *favoriteBtnImgTouch = [[UIImage imageNamed:@"favorite-btn-touch"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 30, 30, 0)];

    [self.navigationItem.rightBarButtonItem setBackgroundImage:favoriteBtnImgNormal forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [self.navigationItem.rightBarButtonItem setBackgroundImage:favoriteBtnImgTouch forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
    [self.navigationItem.rightBarButtonItem setBackgroundImage:favoriteBtnImgTouch forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [self.navigationItem.rightBarButtonItem setTitlePositionAdjustment:UIOffsetMake(-10.0, 0.0) forBarMetrics:UIBarMetricsDefault];
} 
```

请注意，我在单个视图控制器中执行此操作，我使用外观 API 来设置一般样式。但在这里我想覆盖一般外观。

如果我只得到没有可调整大小的图像，它看起来像这样：

![太大了](../Images/1f1a62a7902f082e1c2ab6e39f58a530.png)

现在边缘和角落都很好，但是按钮太大了。

我确定我做错了，所以我需要有人指出我可以做些什么来正确缩放按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:34:41.187

```
UIImage *image = [UIImage imageNamed:@"YourImage"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

button.bounds = CGRectMake( 0, 0, image.size.width, image.size.height );

[button setImage:image forState:UIControlStateNormal];
[button addTarget:self action:@selector(YourAction) forControlEvents:UIControlEventTouchUpInside];

button.contentEdgeInsets = (UIEdgeInsets){.right=-10};

self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:button] autorelease]; 
```

# c# - 如何从 MS SQL 数据表中检索列默认值

> ID：10314483
> 
> 赞同：5
> 
> 时间：2012-04-25T11:14:51.530
> 
> 标签：c#, database-schema, dataadapter

我正在使用`DataAdapter.FillSchema`从 MS SQL 中检索表的架构。不幸的是，这不会返回列的默认值。当我需要检查数百个表时，有没有办法以快速有效的方式检索此值作为架构的一部分？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T05:33:38.307

默认值仅在插入行时确定。

作为替代方案，您可以利用[Information_schema](http://msdn.microsoft.com/en-us/library/ms188348.aspx)

```
SELECT TABLE_NAME, COLUMN_NAME, COLUMN_DEFAULT
FROM AdventureWorks2012.INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'Person'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:38:59.660

尝试以下查询：

```
SELECT object_definition(default_object_id) AS definition
FROM   sys.columns
WHERE  name      ='ColumnName'
AND    object_id = object_id('TableName') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:10:20.850

使用 FillSchema 无法做到这一点。有关详细信息，请查看以下链接 [http://msdn.microsoft.com/en-us/library/229sz0y5.aspx](http://msdn.microsoft.com/en-us/library/229sz0y5.aspx)

INFORMATION_SCHEMA 是您应该查看的地方。INFORMATION_SCHEMA 包含许多系统视图，可以显示数据库结构的详细信息。例如

INFORMATION_SCHEMA.TABLES ：显示数据库中的表列表 INFORMATION_SCHEMA.COLUMNS ：显示数据库所有表中的列及其属性的列表。请查看以下位置以获取更多详细信息。

[http://msdn.microsoft.com/en-us/library/ms186778.aspx](http://msdn.microsoft.com/en-us/library/ms186778.aspx)

要使用查询获取默认值，您可以使用以下查询：

```
SELECT *
FROM INFORMATION_SCHEMA.Columns
WHERE TABLE_NAME = 'YourTableName' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T05:30:40.833

您应该尝试这样的方法来检索表架构。

```
public partial class Form1 : Form
{
    //create connectionString variable
    const string conString = @"Data Source=.\SQLEXPRESS; Initial Catalog=DBTest; Integrated Security=SSPI";

    SqlConnection cn = null;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.getTableSchema();
    }

 //function to get the schemas from the Tables in MSSQLSERVER
    private void getTableSchema()
    {
        try
        {

            cn = new SqlConnection(conString);
            cn.Open();

            //call the getSchema Method of the SqlConnection Object passing in as a parameter the schema to retrieve
             DataTable dt = cn.GetSchema("tables");

           //Binded the retrieved data to a DataGridView to show the results.
            this.dataGridView1.DataSource = dt;

        }
        catch (Exception)
        {

            throw;
        }
    }

} 
```

编辑：关闭报价 conString

# c# - 在 Visual Studio 中为数据访问、业务规则和业务对象创建项目

> ID：10314485
> 
> 赞同：1
> 
> 时间：2012-04-25T11:15:00.390
> 
> 标签：c#, asp.net, data-access-layer, business-rules

我在 Visual Studio 中创建了一个解决方案来尝试实现一个基本的 3 层 C# 应用程序。我已经研究了这个概念，现在我正在尝试将它放在一起，使用每个层的不同项目，即我有项目`DataAccess`，`BusinessRules`和`BusinessObjects`。

项目是否应该`BusinessRules`包含对`DataAccess`和`BusinessObject`项目的引用？（而且`DataAccess`不`BusinessObjects`应该参考`BusinessRules`？）

设置完成后，我意识到虽然我了解每个层的职责，但我不知道您是否应该使用层中的数据填充业务对象`DataAccess`，或者层是否`DataAccess`应该将请求的数据传递`BusinessRules`给然后填充对象 - 推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:47:03.870

虽然它可能对您的问题没有帮助，但答案将始终是“视情况而定”。在这方面，没有“一环来统治他们”。如果有，就不需要建筑师了。

话虽这么说，在我的特殊情况下，我喜欢：

*   让数据访问层对业务对象进行操作。这假设 DAL 全部在代码中，而不是在代码和数据库中存储的过程之间拆分。
*   让业务规则层对业务对象进行操作。再次假设所有代码而不是存储过程。
*   数据访问的业务规则是一个棘手的问题。这在很大程度上取决于应用程序的类型和规则。如果您需要您的业务规则来更新商店，我可能会从 DAL 中提取接口，以便业务规则可以仅依赖于接口。

同样，这些项目适用于我的情况。他们对你来说可能是完全错误的。此外，您没有提到用户界面层、服务层、等等等等。可能有很多部分。

没有任何硬性规则必须遵循才能正确。你必须看看你的需要、你的要求和你有什么限制。

祝你好运。

# facebook - fb:name 会完全停止工作吗？

> ID：10314487
> 
> 赞同：1
> 
> 时间：2012-04-25T11:15:06.523
> 
> 标签：facebook, fbml

我看到 fbml 将在 2012 年 6 月 6 日停止工作。所以我假设这些是 fb:name 等标签。

fb:name 也是 xfbml 并且 xbml 也会停止工作吗？

我还能如何显示未经身份验证的用户他自己的名字？

我尝试了以下方法，但为此我需要一个访问令牌，所以它没有用： [http ://graph.facebook.com/me?fields=name](http://graph.facebook.com/me?fields=name)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:08:09.503

`XFBML`与 不同`FBML`，只有后者已被弃用，因此`fb:name`将继续工作。

# sql - 从两列中选择？

> ID：10314494
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:15:21.937
> 
> 标签：sql, oracle10g

```
CREATE TABLE Player
(playerID CHAR(3) ,
name CHAR(36),
year NUMBER,
team CHAR(50),
totalNoms NUMBER,
awardsWon NUMBER) 
```

如何创建一个从数据库中的两列（球队和球员人数）中进行选择的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:20:48.070

取决于你想要你可以做什么

```
select team, count(PlayerID) as NoOfPlayers
from Player
where team = 'Lackers' 
```

或者

```
select team, count(PlayerID) as NoOfPlayers
from Player
group by team 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:26:57.467

```
 SELECT team,COUNT(playerID) As NoOfPlayers from Player group by team 
```

![在此处输入图像描述](../Images/045907f64a199c14cf5f5d82edab9553.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:24:05.433

```
Select distinct p.team, (
Select count(*) from Player where team=p.team
) 
from Player p 
```

输出将是（例如）：

*   团队 1 25
*   团队 2 34
*   团队 3 11

# java - ANTLR myParser.java 未生成

> ID：10314495
> 
> 赞同：1
> 
> 时间：2012-04-25T11:15:24.173
> 
> 标签：java, eclipse, antlr

您知道为什么在创建空语法时未生成解析器吗？（是的，我已经保存了文件）

我希望将 antlr 集成到 Eclipse 中。我安装了 Eclipse indigo 3.7、所需的更新（GEF 3.2、ZEST 1.3、DLTK 3.0），然后安装了 antlr IDE 插件 v2.1.2 和 antlr3.4。

当把所有东西放在一起时，我意识到我定义的语法（组合/词法分析器+解析器）没有生成任何 .java 文件（词法分析器/解析器）。

肯定和语法代码本身没有关系。。一定是设置错误或者烦人的bug。

运行 Eclipse indigo 3.7 Antlr 3.4

--------现在修复------------我肯定有一个有效的语法。我设法通过使用旧版本来修复它。（antlr 3.2 和 eclipse 3.5.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:51:33.333

如果配置正确，这确实适用于 Indigo、IDE 2.1.2 和 antlr 3.4。[在这里](https://stackoverflow.com/questions/8343488/antlr-ide-in-eclipse-doesnt-work)查看我的答案。

# css - HTML5 SHIV 和 display: block - 但样式仍然在 IE<9- 中中断 - 为什么？

> ID：10314497
> 
> 赞同：1
> 
> 时间：2012-04-25T11:15:35.787
> 
> 标签：css, html, internet-explorer

如果我的网站在 IE9 中运行良好，并且我已经包含了 HTML5 SHIV 代码，但 CSS 在 IE8、7 中仍然中断，是否有一些明显的问题我应该首先解决？

这是我的网站，在 IE9 中运行良好，在 IE 8-7 中中断（顶部导航丢失格式、定位）。 [http://bitstream.ca/beta3/#](http://bitstream.ca/beta3/#)

我也加入了

```
header,nav,article,footer,section,aside,figure,figcaption{display:block} 
```

在我的页面 CSS

并且还在我的 CSS 之后包含了 shiv 脚本，但仍然在我的 head 标签中，根据这个建议 [Can't style HTML5 elements in IE (尽管 shiv 和 display:block)](https://stackoverflow.com/questions/9368971/cant-style-html5-elements-in-ie-despite-shiv-and-displayblock)

对于以前没有遇到过这些类型的 CSS -IE 错误的人来说，很难解决这些类型的问题，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:45:51.243

在 IE 中使用开发人员工具时，您需要确保同时更改**文档模式**和**浏览器模式**，例如

测试 IE7 的设置 -
浏览器模式：IE7
文档模式：IE7 标准

测试 IE8 的设置 -
浏览器模式：IE8
文档模式：IE8 标准。

等等

# c# - 奇怪的 lambda 表达式行为 C#

> ID：10314500
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:15:41.797
> 
> 标签：c#, .net, linq, lambda

有一个代码：

```
 private Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        try
        {
            //TODO: this lambda-expression starts infinite loop
            return Plugins.Keys.First(x => x.FullName == args.Name);
           /* this code works fine
            foreach (Assembly xx in Plugins.Keys)
                if (xx.FullName == args.Name) return xx;
            return null;
            */
        }
        catch
        {
            return null;
        }
    } 
```

这是怎么回事？或者可能是我在工作日结束时？:)

**编辑：** 代码没有例外。我运行了调试器，然后*返回 Plugins.Keys.First(x => x.FullName == args.Name);* 方法一次又一次地以 args.Name = "System.Core.resources bla bla bla" 开始。当我使用 foreach 语句方法成功返回并且没有循环时。这似乎是装配解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:18:44.360

我可以看到您的代码没有任何问题，因此无限循环一定是由其他原因引起的。

除此之外，最好只使用

```
// no need for try/catch
return Plugins.Keys.FirstOrDefault(x => x.FullName == args.Name); 
```

# f# - 在 F# 上通过引用调用

> ID：10314503
> 
> 赞同：1
> 
> 时间：2012-04-25T11:15:52.543
> 
> 标签：f#

是否有通过引用调用函数的选项？

例如：如果我在 func1 中有一个变量 x 并且我想将它发送到 func2 以便它可以更改它（而不返回它的新值等）

```
let func1 =
    let mutable x = 1
    func2 x
    System.Console.WriteLine(x)

let func2 x =
    x <- x + 1 
```

所以调用 func1 将打印“2”..

是否可以？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:32:02.917

您可以使用`&`运算符和`byref`关键字。

```
let func1 =
    …
    func2 (&x)
    …

let func2 (x : int byref) =
    … 
```

有关详细信息，请参阅[MSDN：参考单元 (F#)](http://msdn.microsoft.com/en-us/library/dd233186.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:42:07.777

从 C# 风格代码的严格翻译是这样的：

```
let func2 (x : byref<_>) =
    x <- x + 1

let func1 =
    let mutable x = 1
    func2 &x
    System.Console.WriteLine(x) 
```

但强烈建议坚持参考。

*编辑*：正如所指出的（见评论），你可能意味着 func1 将是一个函数：

```
let func2 (x : byref<_>) =
    x <- x + 1

let func1 () =
    let mutable x = 1
    func2 &x
    System.Console.WriteLine(x) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T13:42:37.270

您要求的是可能的，但这与 F# 鼓励的功能方法几乎相反。有什么强有力的理由你不能这样做：

```
let func2 x =
   x + 1

let func1() =
    let x = 1
    let y = func2 x
    System.Console.WriteLine(y) 
```

这是在函数式编程（和 F#）中做这类事情的更惯用的方式。或者如果你必须改变 x 那么这个怎么样：

```
let func2 x =
   x + 1

let func1() =
    let mutable x = 1
    x <- func2 x
    System.Console.WriteLine(x) 
```

顺便说一句，在 F# 中，必须在使用 func2*之前*对其进行定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T11:32:32.123

您可以使用参考单元格：

```
let func1 ref = 
  ref := !ref+1

let func2 () = 
  let x = ref 1
  func1 x
  System.Console.WriteLine(!x) 
```

但是用函数式语言做这些事情并不是“最佳实践”（委婉地说）

# qt - ld.exe：最终链接失败：构建 qt 时内存耗尽

> ID：10314505
> 
> 赞同：3
> 
> 时间：2012-04-25T11:15:57.353
> 
> 标签：qt, gcc, compilation, linker

最后，我从源代码编译了 qt，方法是：
在 qt 的源文件夹中配置，然后运行 ​​mingw32-make。
但现在我收到以下错误：
ld.exe：最终链接失败：内存耗尽
我有 4GB 内存，1.3TB 硬盘。这怎么可能。我该如何解决这个问题，以便我可以链接那些目标文件？

# iphone - 如何在 iOS 中使用 AvAudiorecorder 将音频录制为 mp3 文件

> ID：10314510
> 
> 赞同：11
> 
> 时间：2012-04-25T11:16:26.693
> 
> 标签：iphone, record, avaudiorecorder

如何使用 AvAudiorecorder 将音频录制为 mp3 文件？我使用以下代码进行录音机设置

```
recordSetting =  [NSDictionary dictionaryWithObjectsAndKeys:
                  [NSNumber numberWithInt:AVAudioQualityMin],AVEncoderAudioQualityKey,
                  [NSNumber numberWithInt:16], 
                   AVEncoderBitRateKey,
                   [NSNumber numberWithInt: 2], 
                   AVNumberOfChannelsKey,
                   [NSNumber numberWithFloat:44100.0], 
                   AVSampleRateKey,nil]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T11:52:02.860

添加

```
[NSNumber numberWithInt:kAudioFormatMPEGLayer3] forKey:AVFormatIDKey 
```

然而，由于版税的原因，在 iPhone 上编码 mp3 格式是不可能的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T16:08:31.557

虽然您可以使用 播放 MP3 文件`AVAudioPlayer`，但不能使用 MP3 格式录制`AVAudioRecorder`（请参阅[此 SO 帖子](https://stackoverflow.com/questions/6867994/what-are-the-formats-supported-in-avaudiorecorder-for-recording-sound)和[此 SO 帖子](https://stackoverflow.com/questions/4871940/how-to-record-an-audio-file-in-mp3-format)）。如果您需要压缩格式，但不一定是 MP3，我建议以 AAC 格式录制。

# iphone - 如何将下载的数据保存到设备的文件系统

> ID：10314511
> 
> 赞同：4
> 
> 时间：2012-04-25T11:16:40.583
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我正在从服务器下载 pdf 文档：

```
- (void)downloadSingleDocument:(NSURL *)url
{
    [pdfData release];
    pdfData = [[NSMutableData alloc] init];
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    [req addValue:@"Basic **************=" forHTTPHeaderField:@"Authorization"];
    downloadConnection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    NSLog(@"Connection did receive data");
    [pdfData appendData:data];
} 
```

在 connectionDidFinishLoading 上，我想将下载的 pdf 文件保存到 Documents 目录中的文件系统，文件名与服务器上的文件名相同。最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:48:00.970

如果您有大文件，请使用此方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse*)response
{
  filepath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:save_name];
  [[NSFileManager defaultManager] createFileAtPath:filepath contents:nil attributes:nil];
  file = [[NSFileHandle fileHandleForUpdatingAtPath:filepath] retain];// Here file is object of NSFileHandle and its declare in .h File

  [file seekToEndOfFile];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

 [file seekToEndOfFile];

 [file writeData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection 
 {
  [file closeFile];
// After you download your data. you can copy your data from here to filesystem. and remove from here
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:40:16.813

~~使用[`NSURLDownload`](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLDownload.html).~~

抱歉，这仅适用于 Mac，不适用于 iOS。

创建一个临时文件，并将接收到的数据附加到`connection:didReceiveData:`. 在`connectionDidFinishLoading:`中，将文件移动到正确的位置，在 中`connection:didFailWithError:`，删除临时文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T11:32:12.970

这应该这样做

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *documentsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

    NSString *filename = [con.originalRequest.URL lastPathComponent];
    NSString *path = [documentsDirectory stringByAppendingString:filename];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager createFileAtPath:path contents:pdfData attributes:nil];

} 
```

# jquery - 将 $.post 转换为 $.ajax

> ID：10314515
> 
> 赞同：-4
> 
> 时间：2012-04-25T11:17:03.377
> 
> 标签：jquery, ajax, .post

我想将我`$.post`的呼叫转换为`$.ajax`呼叫，因为我需要为每个呼叫清理缓存。

我的`$.post`电话如下：

```
 $.post("test",   
            function(data) {
                $("#test").html(data);
                initTest();
            }
        ).success(function(){
            $('.box1').hide("slide", {direction: "left"}, 1000);
            $('.box3').show("slide", {direction: "right"}, 1000);
        }); 
```

我试过这个，但它不起作用......

```
 $.ajax({
          type: "POST",
          url: "test",
          success: function (data) {
              $("#test").html(data);
              $('.box1').hide("slide", {direction: "left"}, 1000);
              $('.box3').show("slide", {direction: "right"}, 1000);
          },
          dataType: "json",
          cache: false
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:20:37.447

```
$.ajax({
   method:"POST",
   url : "test.php",
   success : function(data) {
                $("#test").html(data);
                initTest();
                 $('.box1').hide("slide", {direction: "left"}, 1000);
     $('.box3').show("slide", {direction: "right"}, 1000);
            },
   cache : false
}); 
```

更新我认为您在解析数据时遇到问题。`$.post`默认情况下是`html dataType`. 在`$.ajax`通话中，您将其更改为“json”。如果没有响应 json，那么您有解析错误和成功处理程序不调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:22:32.063

```
 $.ajax('test')
    .done(function() {
      $('.box1').hide('slide', {direction: 'left'}, 1000);
      $('.box3').show('slide', {direction: 'right'}, 1000);
    })
    .fail(function() { alert('error'); })
    .always(function() { alert('complete'); }); 
```

# asp.net - ASPxGridView：如何在客户端处理关闭事件？

> ID：10314525
> 
> 赞同：0
> 
> 时间：2012-04-25T11:17:33.987
> 
> 标签：asp.net, devexpress

我正在使用 DevExpress v.10 我在网页上有一个 ASPxGridView 网格。我想为其添加以下功能。当一个 EditForm 表单被关闭（通过取消按钮）时，我需要一个带有警告的消息框：“你真的要关闭表单而不保存吗？是/否'

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:58:48.647

有必要实现并使用自定义关闭按钮来完成此任务：

[按 ID 查找如何使用“不再询问我”选项实现删除确认对话框](http://www.devexpress.com/Support/Center/p/E1120.aspx)

[GridViewCommandColumn.CustomButtons 属性](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewCommandColumn_CustomButtonstopic)

# android - 引起：java.lang.OutOfMemoryError：位图大小超出VM预算

> ID：10314527
> 
> 赞同：27
> 
> 时间：2012-04-25T11:17:55.417
> 
> 标签：android, android-layout, bitmap

在我的应用程序中，当我尝试启动它时强制关闭并且错误指向“setContentView(R.layout.Menu);”行 的布局。在 XML 文件中，它在我的布局中显示“OutOfMemoryError”图像视图。我真的很困惑。请指导我进一步行动。

**编辑：**

我的应用程序使用数据库，并在第一次解析一些 XML 数据并插入到 Sqlite 数据库中。我的内存不足问题仅在第一次出现。第二次它工作正常。我试过 System.gc()。有没有这方面的问题。

**这是我的日志：**

```
E/dalvikvm-heap(2712): 105376-byte external allocation too large for this process.
VM won't let us allocate 105376 bytes

    FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Test/com.Test.Menu}: android.view.InflateException: Binary XML file line #13: Error inflating class <unknown>
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class <unknown>
    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
    at android.app.Activity.setContentView(Activity.java:1657)
    at com.Test.Menu.onCreate(Menu.java:32)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    ... 11 more
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
    ... 23 more
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
    at android.content.res.Resources.loadDrawable(Resources.java:1709)
    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
    at android.widget.ImageView.<init>(ImageView.java:118)
    at android.widget.ImageView.<init>(ImageView.java:108) 
```

* * *

**这是我的 XML 代码：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<RelativeLayout
    android:id="@+id/RL_Title"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="8"
    android:onClick="onTitleClick" >

    <ImageView
        android:id="@+id/Img_Title_bg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="center"
        android:src="@drawable/title_bg" />

    <Button
        android:id="@+id/Btn_Title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="5dp"
        android:background="@drawable/title_al"
        android:drawableRight="@drawable/pro"
        android:gravity="center"
        android:onClick="onTitleClick" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/RL_MainMenu"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" android:onClick="onDoNothing">

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="4"
        android:src="@drawable/main_bg" android:scaleType="centerCrop"/>

    <ImageView
        android:id="@+id/Img_logo"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="4"
        android:scaleType="center"
        android:src="@drawable/logo_al" />

    <LinearLayout
        android:id="@+id/LI_Menu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/RL_ExtraOption"
        android:layout_alignTop="@+id/Img_logo"
        android:layout_margin="2dp"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/Img_Buyer"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="@drawable/bt_blink"
            android:onClick="Nextclick"
            android:scaleType="fitCenter"
            android:soundEffectsEnabled="true"
            android:src="@drawable/buyer_icon" />

        <ImageButton
            android:id="@+id/Img_Seller"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="@drawable/bt_blink"
            android:onClick="Nextclick"
            android:scaleType="fitCenter"
            android:src="@drawable/seller_icon" />

        <ImageButton
            android:id="@+id/Img_Lender"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="@drawable/bt_blink"
            android:onClick="Nextclick"
            android:scaleType="fitCenter"
            android:src="@drawable/lender_icon" />

        <ImageButton
            android:id="@+id/Img_myTitleRep"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="@drawable/bt_blink"
            android:onClick="Nextclick"
            android:scaleType="fitCenter"
            android:src="@drawable/my_title_rep_icon_al" />

        <ImageButton
            android:id="@+id/Img_Setup"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="@drawable/bt_blink"
            android:onClick="Nextclick"
            android:scaleType="fitCenter"
            android:src="@drawable/setup_icon" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/RL_ExtraOption"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@drawable/main_bottom_bg" >

        <TextView
            android:id="@+id/txt_RepName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            android:textColor="@color/white"
            android:textSize="@dimen/font_size" />

        <TableRow
            android:id="@+id/TR_ContactRep"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:gravity="center" >

            <Button
                android:id="@+id/Btn_ContactRep"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="3dp"
                android:background="@drawable/contact_rep_blink"
                android:onClick="ContactRep_Click" />

            <Button
                android:id="@+id/Btn_MoreOption"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dp"
                android:background="@drawable/main_more_blink"
                android:onClick="onMoreClick" />
        </TableRow>
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/ln_Mainmore"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/dialog_bg" android:layout_alignParentBottom="true" android:visibility="gone">

        <LinearLayout
            android:id="@+id/LinearLayout02"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:orientation="vertical" >
        </LinearLayout>

        <TableLayout
            android:id="@+id/TableLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center" >

            <TableRow
                android:id="@+id/TableRow04"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:layout_marginTop="20dp"
                android:gravity="center" >

                <Button
                    android:id="@+id/Btn_Rate"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:background="@drawable/property_blue_blink"
                    android:onClick="onRate"
                    android:singleLine="true"
                    android:text="Rate/Testimonial"
                    android:textColor="@color/white"
                    android:textSize="@dimen/font_size"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow01"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:gravity="center" >

                <Button
                    android:id="@+id/btn_SubFeature"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:background="@drawable/property_blue_blink"
                    android:onClick="onSubFeature"
                    android:singleLine="true"
                    android:text="Submit A Feature"
                    android:textColor="@color/white"
                    android:textSize="@dimen/font_size"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow03"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:gravity="center" >

                <Button
                    android:id="@+id/Btn_ReferFrnd"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:background="@drawable/property_blue_blink"
                    android:onClick="onReferAFrnd"
                    android:text="Refer A Friend"
                    android:textColor="@color/white"
                    android:textSize="@dimen/font_size"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow02"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:gravity="center" >

                <Button
                    android:id="@+id/Btn_cancel"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:background="@drawable/property_cancel_blink"
                    android:onClick="onClose"
                    android:text="Cancel"
                    android:textColor="@color/black"
                    android:textSize="@dimen/font_size"
                    android:textStyle="bold" />
            </TableRow>
        </TableLayout>

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-02T06:40:16.690

我想问题不在于您的布局；问题出在代码中的其他地方。而且**您可能正在某处泄漏上下文**。

其他可能的原因是您在解析 XML 时必须创建大量的多个对象（正如您提到的，这在您解析 XML 时第一次发生）。虽然 Java 有自动垃圾回收的方法，但你仍然不能完全依赖它。**当您不再需要它们时**，取消您的集合实例或清除您的对象内容是一种很好的做法。

 **但是我仍然准备了一个重要的点列表，在 Android 上处理位图时应该记住这些点。

**1）**您可以在每个位图上调用回收并将它们设置为空。（`bitmap.recycle()`将释放此位图使用的所有内存，但不会使位图对象无效）。

**2）**您也可以`drawables`在活动被销毁时解除与布局关联的绑定。试试下面给出的代码，也看看这个链接[链接](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)。

```
 private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
            view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            ((ViewGroup) view).removeAllViews();
        }
    }

// Call this method from onDestroy()

    void onDestroy() {
        super.onDestroy();
        unbindDrawables(findViewById(R.id.RootView));
        System.gc();
    } 
```

**3）**您可以将您的转换`hashmaps`为`WeakHashmaps`，以便在系统内存不足时释放其内存。

**4）**您可以缩放/调整所有位图的大小。要缩放位图，您可以尝试以下操作：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 8;
    Bitmap preview_bitmap=BitmapFactory.decodeStream(is, null, options); 
```

这个 inSampleSize 选项减少了内存消耗。

这是一个完整的方法。首先它读取图像大小而不解码内容本身。然后它找到最好的 inSampleSize 值；它应该是 2 的幂。最后，图像被解码。

```
// Decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        // The new size we want to scale to
        final int REQUIRED_SIZE=70;

        // Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2 >= REQUIRED_SIZE && o.outHeight/scale/2 >= REQUIRED_SIZE)
            scale*=2;

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    }
    catch (FileNotFoundException e) {
    }
    return null;
} 
```

看看这个[链接。](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue/823966#823966).

**5）**您可以覆盖`onLowMemory()`活动中的方法，当整个系统内存不足时会调用该方法。你可以在那里释放一些资源。

**6）**您可以制作您的对象`SoftReference`or `Weakreference`，以便它们在内存不足的情况下被释放。

我观察到的一个非常常见的内存泄漏是由于内部类的实现和`Handler`在`Activity`. [此链接更详细地讨论了相同的内容](http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html#more)。

我希望这有助于消除您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T14:15:24.950

这是在旧设备上使用带有大图像的 Android 时的典型问题`ImageView`（即使文件大小只有几个 Kbs）。*用于解码图像的名为skia*的本机图形库根据图像的尺寸分配本机内存，因此文件大小不会直接影响这一点。

即使您`src`在 XML 布局定义中省略 - 属性以在您的`onCreate()`方法中自己加载图像，也会触发相同的错误。解决此问题的唯一方法是在解码期间使用`inSampleSize`in`BitmapFactory.decodeStream`直接执行下采样（例如，请参阅[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)）。这本身就提出了如何确定这个比例因子的问题。

我在处理大图像时发现的最佳解决方案是用`ImageView`a替换`WebView`并加载一些最小的 HTML，如下所示：

```
webView.loadUrl("file:///android_res/raw/background.html"); 
```

其中的内容`raw/background.html`可能是这样的：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style type="text/css">
        body {
            margin: 0;
        }

        img {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
</head>
<body>
    <img src="file:///android_res/drawable/background.png" />
</body> 
```

WebView 中使用的 WebKit 引擎以更有效的方式执行图像加载，因此那些内存分配错误应该消失。

您甚至可以将不同的图像用于纵向和横向，只需将它们放入`drawable-port`和`drawable-land`. 但是您必须`clearCache(false)`在您的方法中调用 WebView 实例，`onDestroy()`否则将始终使用第一次加载时缓存的图像（禁用 WebView 实例上的缓存不起作用）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-16T11:00:14.830

在这个问题上花了很多时间后，我找到了解决方案！您需要做的就是要求更多的内存。将此代码放在您的android清单中：

```
<application>: 
```

放：

```
android:largeHeap="true" 
```

对我来说很棒！请注意，此解决方案仅适用于 API 11 及更高版本。

更多信息[在这里。](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-30T10:47:32.113

许多设备的每个设备可用的内存非常有限。许多旧设备为您的应用程序分配 16MB 内存，而一些更现代的设备可能会分配 24MB 甚至 32MB（我见过只有 14MB 的设备）。

每当您将如此多的图像加载到内存中时，这个空间很快就会被填满，从而导致 OutOfMemoryError 被抛出。为了克服这个问题，您应该（如先前的答案所说）将图像缩小为缩略图，只将缩略图保留在设备内存中（减少内存占用）并将图像保存到 SDCARD。

您可以从 Eclipse 的 DDMS 布局中查看您的程序使用了多少内存。我相信您还可以覆盖 Application 类来监听“内存不足”警告功能。

当您通过 BitmapFactory 读取位图时，将 BitmapFactory.Option inScaled 参数设置为 2 或 4（或任何适合您的值）以创建更小、内存占用更少的图像。

通常，只有一种解决方案：使用较小的图像。如果没有代码，很难说到底出了什么问题。您可以尝试降低图像尺寸。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-05T18:05:23.710

除了人们在这里写的内容之外，我建议观看 google 的这个视频，它指出了一些常见的内存问题以及如何找到内存问题的原因：

[Android 应用程序的内存管理](https://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-19T16:59:12.127

我之前遇到过同样的问题，我在 S4 android 4.3 上进行调试。解决方案是：**将图像从 mdpi 文件夹复制到 hdpi 文件夹（因此它们现在位于两个文件夹中）**

我知道奇怪！但这解决了我的问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-23T09:17:11.097

它看起来像你的图像很大，所以你可以解码你的图像并使用 **android:largeHeap="true"。**应用程序标签的清单内部

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-05T00:11:58.057

您可能已经完成了上述所有解决方案，但仍然试一试。在找到解决方案之前，我一直在寻找解决方案。这可能适用于您的情况（在这种情况下请原谅）。

myIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TASK); myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

在你调用你的活动之前放置这些。**

# sql - 为什么插入单行比一次插入 x 行快 x 倍

> ID：10314528
> 
> 赞同：5
> 
> 时间：2012-04-25T11:17:55.780
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

> **可能重复：**
> [多个 INSERT 语句与具有多个 VALUES 的单个 INSERT](https://stackoverflow.com/questions/8635818/multiple-insert-statements-vs-single-insert-with-multiple-values)

我对博客文章的批处理事务进行了一些性能分析，我注意到当您使用批处理插入语句时，它的执行速度比等效的单个 SQL 语句要慢得多。

如下插入 1000 行大约需要 3 秒

```
INSERT TestEntities (TestDate, TestInt, TestString) VALUES  
('2011-1-1', 11, 'dsxcvzdfdfdfsa'),
('2011-1-1', 11, 'dsxcvzdfdfdfsa'),
('2011-1-1', 11, 'dsxcvzdfdfdfsa') 
```

如下插入 1000 行需要 130 毫秒

```
INSERT TestEntities (TestDate, TestInt, TestString) VALUES ('2011-1-1', 11, 'dsxcvzdfdfdfsa')
INSERT TestEntities (TestDate, TestInt, TestString) VALUES ('2011-1-1', 11, 'dsxcvzdfdfdfsa')
INSERT TestEntities (TestDate, TestInt, TestString) VALUES ('2011-1-1', 11, 'dsxcvzdfdfdfsa') 
```

这似乎只在您第一次在表上使用批量插入时发生，但它是可重现的。

另请注意，即时插入的数据是随机的（但两个查询相同）

**编辑：**

这是我用于此案例的虚拟随机数据的复制案例：[https ://gist.github.com/2489133](https://gist.github.com/2489133)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:56:53.127

根据[Multiple INSERT statements vs. single INSERT with multiple VALUES](https://stackoverflow.com/questions/8635818/multiple-insert-statements-vs-single-insert-with-multiple-values) ，这里的问题是，当 SQL 获取查询时，它必须在第一次执行时计算查询计划。对于单次插入来说，这既好又快，因为不需要计算太多，而且在构建查询计划之后，它只是重复使用了 1000 次。

在批处理场景中，需要将 3k 个变量构建到查询计划中，这需要更长的时间来计算。

@MartinSmith 指出的一个疯狂特性是，在高达 250 行的批处理大小附近有一个神奇的性能数字，这意味着计划计算非常低。

将我的上述查询分成 5 200 行语句将 1000 行的执行时间减少到 94 毫秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:50:07.603

第一项是必须解析的大型语句，因此花费的额外时间在于一个大型解析作业而不是 1000 个小型作业的开销。

虽然我没有测试所有1000行，但我测试了3行，发现单个insert语句的执行计划更大。另请注意，对于 3 个单独的插入，只有一个小计划被重复使用。

![在此处输入图像描述](../Images/d70afd47a0dacf82122901829a10bd99.png)

![在此处输入图像描述](../Images/47ef11efedc9400a9b227d56c63edf5f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:46:26.467

第一个是作为单个事务运行的单个语句。第二个是 1000 个语句，开销为 1000 个事务。当您将第二个包含在`begin transaction`和中时，差异应该会变小`commit transaction`。

# c# - 尝试测试自定义会员提供程序

> ID：10314533
> 
> 赞同：5
> 
> 时间：2012-04-25T11:18:20.283
> 
> 标签：c#, tdd, nunit, asp.net-membership

我正在尝试测试我的自定义会员提供程序，如此[处所述](http://highoncoding.com/Articles/379_Unit_Testing_Membership_and_Role_Providers.aspx)

在测试我有 System.TypeLoadException：

```
Could not load type 'Domain.WebProviders' from assembly 'System.Web, Version=4.0.0.0, Culture=neutral...., 
```

这是我的代码 **TestBase.cs**

```
public class TestBase
    {
        protected string _username;
        protected string _password;
        protected string _email;
        protected CustomMembershipProvider _provider;
        protected NameValueCollection _config;
        protected MembershipCreateStatus _status = new MembershipCreateStatus();

        [SetUp]
        public void initialize()
        {
            _username = "james";
            _password = "bondjamesbond";
            _email = "jamesbond@mi6.uk";

            // setup the membership provider
            _provider = new CustomMembershipProvider ();

            _config = new NameValueCollection();
            _config.Add("applicationName", "My App");
            _config.Add("name", "CustomMembershipProvider ");
            _config.Add("requiresQuestionAndAnswer", "false");
            _config.Add("connectionStringName", "ConnectionString");
            _provider.Initialize(_config["name"], _config);

            _status = new MembershipCreateStatus();

        }, ... 
```

**MembershipTests.cs**

```
[TestFixture]
    class MembershipTests : TestBase
    {
        [Test]
        public void CanUserBeCreated()
        {
            using (ISession open session ....)
            {
                using (ITransaction begin transaction ... )
                {
                    _provider.CreateUser(_username, _password, _email, null, null, true, null, out _status);
                    tx.Commit();
                }
                Assert.AreEqual(MembershipCreateStatus.Success, _status);                
            }            
        } 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="ConnectionString" connectionString="...." />
  </connectionStrings>
  <system.web>
    <!-- Membership provider -->
    <membership defaultProvider="CustomMembershipProvider">
      <providers>
        <clear />
        <add name="CustomMembershipProvider" type="Domain.WebProviders.CustomMembershipProvider"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="false"
             requiresUniqueEmail="true"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="6"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>
    <!-- Ends membership provider section-->
    <!-- Role provider -->
    <roleManager enabled="true" defaultProvider="MyRoleProvider">
      <providers>
        <clear />
        <add applicationName="/"
            name="MyRoleProvider"
            type="Domain.WebProviders.MyRoleProvider" />
      </providers>
    </roleManager>
    <!-- Ends role provider -->
  </system.web>

</configuration> 
```

更新了 App.config 行

```
<add name="CustomMembershipProvider"
         type="Domain.WebProviders.CustomMembershipProvider, "Domain.WebProviders" 
```

现在我报告的异常是

```
System.IO.FileNotFoundException : Could not load file or assembly 'Domain.WebProviders' or one of its dependencies 
```

引用了 Domain.WebProviders ，很困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T11:51:11.703

我可能是因为您的成员资格部分没有定义程序集名称。

```
<add name="CustomMembershipProvider"
         type="Domain.WebProviders.CustomMembershipProvider"
         ... /> 
```

尝试将其更改为：

```
<add name="CustomMembershipProvider"
         type="Domain.WebProviders.CustomMembershipProvider, <assemblyname>"
         ... /> 
```

# javascript - 如何防止网页检测到我正在运行脚本？

> ID：10314534
> 
> 赞同：3
> 
> 时间：2012-04-25T11:18:27.393
> 
> 标签：javascript, facebook, security, greasemonkey, userscripts

在 facebook.com 上尝试了脚本后，我注意到有几分钟它不允许我连接到 facebook.com。这发生了不止一次，所以我怀疑 Facebook 不喜欢使用用户脚本来弄乱他们的代码。

Stack Overflow 问题*[网站可以知道我是否正在运行用户脚本吗？](https://stackoverflow.com/questions/8548141/can-a-website-know-if-i-am-running-a-userscript)*回答网站检测脚本的多种方式。

现在我想知道如何欺骗网站而不检测我可能正在运行的任何脚本。有没有办法知道我的用户脚本 HTML 更改在网站上触发了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:05:54.690

对于 Firefox 和 Chrome 来说，没有什么灵丹妙药可以阻止检测，它是一个过程和一门艺术......

网站检测脚本的 3种*主要*方式是：

1.  乱序或过于频繁的 AJAX 请求。

2.  更改页面代码（HTML、全局 JS 甚至 CSS）。

3.  不自然的鼠标或键盘动作。

请参阅[“网站可以知道我是否正在运行用户脚本吗？”](https://stackoverflow.com/q/8548141/331508) 了解更多信息。

**一些对策：**

1.  对于您的脚本发出的 AJAX 请求：

    1.  使用[Wireshark](http://www.wireshark.org/)或类似工具来分析正常 AJAX 调用的流量。确保以相同的顺序发送相同类型的呼叫。
    2.  确保您的请求显示与页面相同的标题和数据。
    3.  发送 AJAX 请求的速度不要超过页面正常发送的速度或超过用户可以合理触发的速度。
    4.  考虑为您的脚本请求添加随机延迟，以使它们的时间不统一。
    5.  请注意页面请求中不断变化的字段。确保您知道如何生成正确的值；不要只是剪切和粘贴。

2.  对于您对页面代码所做的更改：
    页面可以使用自己的 javascript 完全在本地处理这些，也可以将状态或代码片段发送回服务器。

    1.  阻止并替换页面的 javascript。NoScript、RequestPolicy、防火墙和代理等工具可用于阻止 JS。
        然后使用 Greasemonkey 添加您***编辑***的页面 JS 版本。即使页面的所有 JS 被禁用，Greasemonkey 也会运行。

    2.  如果页面将状态返回主页，并且该状态响应脚本的更改而更改，则拦截并替换这些消息。（如果您使用以前的方法，则不需要这样做。）您将需要自定义防火墙、代理或路由器来执行此操作。

3.  对于您触发的事件（鼠标点击、填写字段等）：

    1.  如果页面对此进行了检查，请将其查找的内容提供给它。例如`click`，您可能需要`mouseover`, `mousedown`, `mouseup`,`mouseout`序列而不是事件。
    2.  如果这还不够，那么应对措施与更改页面代码相同（替换 JS，拦截状态消息）。

**重要的！**
在极少数情况下，您*正在*与试图阻止用户脚本的网站作战，这就像一场战争。站长可以适应你在做什么，环境可以不断变化。因此，为这样的网站编写脚本是一个持续的过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:25:53.283

脚本在用户端执行——你的端。因此，站点的服务器代码无法知道您是否运行任何东西。

不过有两点需要注意：

1.  站点可以提供一些脚本以在您的计算机上运行，​​这些脚本将检查其环境并在必要时进行报告。这些通常用于检测站点所有者不希望在其环境中具有的**某些特定脚本。**
2.  站点作者可以检查您的请求并分析它们是否与来自站点提供的表单或 AJAX 的常规通信匹配的模式不匹配。缺少键或键与查询中的硬编码顺序不匹配、标识自动化客户端的标头或缺少浏览器标头等。如果您自动执行请求的速度比人类用户快得多，那么达到节流限制也应该适合此类别。

否则，如果您生成完全相同的响应并且不在全局可访问的环境中留下痕迹，则站点无法判断您是在使用带有服务器端检查还是客户端检查的用户脚本。

# ios - 如何让我的应用程序出现在位置服务列表中？

> ID：10314548
> 
> 赞同：0
> 
> 时间：2012-04-25T11:19:23.523
> 
> 标签：ios, settings, cllocationmanager

我正在开发一个 CLLocation 应用程序。在极少数情况下，应用程序不会启动指南针。

我预计问题出在位置服务上。

如何让我的应用程序出现在位置服务设置列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:21:52.593

它会自动出现在那里。您的问题不是您没有出现在列表中，您的问题是：

> 在极少数情况下，应用程序不会启动指南针。

我建议您发布一个关于此的问题，包括有关发生这种情况的情况、您使用的代码以及任何其他相关信息的信息。

# php - php中的图像取消链接

> ID：10314550
> 
> 赞同：-3
> 
> 时间：2012-04-25T11:19:28.533
> 
> 标签：php

我在单个 ID 中添加的图像多于图像，但如果在删除按钮中删除该图像。只有一个图像删除该文件夹其余图像不删除该文件夹。如何删除剩余的图像??????

```
$sql = mysql_query("select * from urbanesqe_completed_image WHERE id ='".$_GET['del']."'");
////echo "select * from urbanesqe_completed_image WHERE id ='".$_GET['del']."'";
$res = mysql_fetch_array($sql);
$product_image = $res['product_image'];
$image_path = "../images/completed/".$product_image;
unlink($image_path);
mysql_query("DELETE FROM urbanesqe_completed WHERE id ='".$_GET['del']."'");
mysql_query("DELETE FROM urbanesqe_completed_image WHERE id ='".$_GET['del']."'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:31:47.823

如果表中有多个记录，`urbanesqe_completed_image`则进行循环，例如

```
while($res = mysql_fetch_array($sql)){
  $product_image = $res['product_image'];
  $image_path = "../images/completed/".$product_image;
  unlink($image_path);
} 
```

所以它将删除所有图像

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-25T11:28:56.267

您需要`mysql_fetch_array`循环调用。[手册](http://php.net/mysql_fetch_array)中有一个例子

# java - 从没有索引值的 HashMap 访问值？

> ID：10314551
> 
> 赞同：2
> 
> 时间：2012-04-25T11:19:29.787
> 
> 标签：java, jsp

我的哈希图中有两个值...如何在不使用 for 循环的情况下访问这些值..

这是我的哈希图代码：

```
HashMap<Integer, Integer> obMap = new HashMap<Integer, Integer>();
obMap.put(new Integer(1),PartnerID);
obMap.put(new Integer(2),numwidgets);
return obMap; 
```

我正在将值返回给 java 脚本方法...如果我进入 obMap，如何在 JSP 中读取值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:23:41.327

```
HashMap<Integer, Integer> obMap = new HashMap<Integer, Integer>();
obMap.put(1,PartnerID);
obMap.put(2,numwidgets);
System.out.println(obMap.get(1));
System.out.println(obMap.get(2)); 
```

请注意，您不需要`new Integer(1)`. 这是自动装箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:23:01.610

你应该可以直接从java脚本调用obMap.get(key)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:30:05.217

如果你在 JSP 中工作，并且你`HashMap`的 jsp 中有 objMap，那么你可以在你的 javascript 中使用这个 scriplet 简单地访问它：

`<%=obMap.get(1)%>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:38:23.557

在 JSP 页面中，您可以`HashMap`通过以下方式访问您的：

```
<%=obMap.get(0)%> <!-- The first value in the map -->
<%=obMap.get(1)%> <!-- The second value in the map --> 
```

这可以放在 JSP 页面的 JavaScript 部分中的 JavaScript 函数或块中。
请注意，JSP 页面中的 Java 脚本分别以 <% 和 %> 开始和结束。
当您想将值直接包含到 JavaScript 变量中时，<%= 和 %> 用于像上面一样开始和结束值。

希望这个答案对您有所帮助。

# c# - 如何使用 linq to sql 一次更新多行？

> ID：10314552
> 
> 赞同：103
> 
> 时间：2012-04-25T11:19:30.380
> 
> 标签：c#, sql, entity-framework, linq, linq-to-sql

桌子：

```
id     userid  friendid   name    status
1      1        2         venkat  false
2      1        3         sai     true
3      1        4         arun    false
4      1        5         arjun   false 
```

如果用户发送`userid=1,friendids=2,4,5 status=true`

我将如何编写查询来更新上述内容？所有`friendids`状态都是真实的。[一次2,3,4]？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-04-25T11:27:25.390

要在此处更新一列，请使用一些语法选项：

**选项1**

```
var ls=new int[]{2,3,4};
using (var db=new SomeDatabaseContext())
{
    var some= db.SomeTable.Where(x=>ls.Contains(x.friendid)).ToList();
    some.ForEach(a=>a.status=true);
    db.SubmitChanges();
} 
```

**选项 2**

```
using (var db=new SomeDatabaseContext())
{
     db.SomeTable
       .Where(x=>ls.Contains(x.friendid))
       .ToList()
       .ForEach(a=>a.status=true);

     db.SubmitChanges();
} 
```

**选项 3**

```
using (var db=new SomeDatabaseContext())
{
    foreach (var some in db.SomeTable.Where(x=>ls.Contains(x.friendid)).ToList())
    {
        some.status=true;
    }
    db.SubmitChanges();
} 
```

**更新**

根据评论中的要求，展示如何更新多个列可能是有意义的。因此，为了本练习的目的，假设我们不仅要更新`status`at 。我们想要更新`name`和匹配`status`的地方。`friendid`以下是一些语法选项：

**选项1**

```
var ls=new int[]{2,3,4};
var name="Foo";
using (var db=new SomeDatabaseContext())
{
    var some= db.SomeTable.Where(x=>ls.Contains(x.friendid)).ToList();
    some.ForEach(a=>
                    {
                        a.status=true;
                        a.name=name;
                    }
                );
    db.SubmitChanges();
} 
```

**选项 2**

```
using (var db=new SomeDatabaseContext())
{
    db.SomeTable
        .Where(x=>ls.Contains(x.friendid))
        .ToList()
        .ForEach(a=>
                    {
                        a.status=true;
                        a.name=name;
                    }
                );
    db.SubmitChanges();
} 
```

**选项 3**

```
using (var db=new SomeDatabaseContext())
{
    foreach (var some in db.SomeTable.Where(x=>ls.Contains(x.friendid)).ToList())
    {
        some.status=true;
        some.name=name;
    }
    db.SubmitChanges();
} 
```

**更新 2**

在我使用 LINQ to SQL 的答案中，在这种情况下提交到数据库的用法是：

```
db.SubmitChanges(); 
```

但是对于实体框架来说，提交更改是：

```
db.SaveChanges() 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-03-07T11:34:23.877

**不要**使用`ToList()`已接受答案中的方法！

运行 SQL 探查器，我验证并发现该`ToList()`函数从数据库中获取所有记录。性能真的很差！！

我将通过纯 sql 命令运行此查询，如下所示：

```
string query = "Update YourTable Set ... Where ...";    
context.Database.ExecuteSqlCommandAsync(query, new SqlParameter("@ColumnY", value1), new SqlParameter("@ColumnZ", value2)); 
```

这将一次性操作更新，而无需选择一行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-30T18:37:00.110

这就是我所做的：

**英法：**

```
using (var context = new SomeDBContext())
{
    foreach (var item in model.ShopItems)  // ShopItems is a posted list with values 
    {    
        var feature = context.Shop
                             .Where(h => h.ShopID == 123 && h.Type == item.Type).ToList();

        feature.ForEach(a => a.SortOrder = item.SortOrder);
    }

    context.SaveChanges();
} 
```

希望能帮助某人。

**注意：** 5 年后，正如评论中所说，它不是一个好的选择，因为我正在调用数据库来获取里面的一些数据`foreach`。如果您不这样做，那么可以使用。

# c# - DllImport 返回的 IntPtr 指向的字符串的内存是否需要手动释放？

> ID：10314554
> 
> 赞同：1
> 
> 时间：2012-04-25T11:19:33.607
> 
> 标签：c#, .net, memory-management, pinvoke, dllimport

我有几个关于以下问题的问题：

```
[DllImport("libmp3lame.dll", CharSet = CharSet.Ansi)]
static extern IntPtr get_lame_version();

public static string GetLameVersion()
{
    IntPtr pVersion = get_lame_version();
    string version = Marshal.PtrToStringAnsi(pVersion);
    return version;
} 
```

1.  `pVersion`分配的字符串指向的内存在哪里？
2.  `pVersion`超出范围时是否会自动释放此内存？
3.  如果是，那是怎么发生的？
4.  如果没有，我该如何释放内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:22:57.717

此函数返回的字符串是静态分配的，您不需要释放该内存。这意味着您当前的代码已经正是您所需要的。

这是一个开源项目，因此通过网络搜索可以找到实现此功能的[源代码](http://www.leidinger.net/lame/doxy/html/version_8c-source.html)以确认这一点。

顺便说一句，您的 p/invoke 是不正确的，尽管它是良性的。它应该是：

```
[DllImport("libmp3lame.dll", CallingConvention=CallingConvention.Cdecl)]
static extern IntPtr get_lame_version(); 
```

`CharSet`由于该函数没有文本参数，因此无需指定。在任何情况下`Ansi`都是默认的，所以你仍然不需要指定它。一般来说，调用约定很重要，需要为所有 LAME 导入设置。对于没有参数的函数实际上并不重要，但是指定调用约定是一个很好的习惯。

# jquery - 根据 mysql 数据库中的项目数将 top 属性应用于 div

> ID：10314557
> 
> 赞同：1
> 
> 时间：2012-04-25T11:19:57.207
> 
> 标签：jquery, mysql

我有一个包含多个项目的 mysql 数据库，我想通过 jquery 更改页脚部分的顶部属性，具体取决于此 mysql 数据库中的项目数。

这是 newsletter.php 的服务器端部分

```
<?php
    //allow sessions to be passed so we can see if the user is logged in
    session_start();
    //connect to the database so we can check, edit, or insert data to our users table
    $con = mysql_connect('localhost', 'user', 'pwd') or die(mysql_error());
    $db = mysql_select_db('newsletter', $con) or die(mysql_error());
    $SQL = "SELECT * FROM papers";
    if(array_key_exists('rowcount', $_GET)) {
      $query = mysql_query("select count(*) as total FROM papers");
      $result = mysql_fetch_array($query);
      $json = array('rowCount' => $result); // can add more data here
      return json_encode($json);
    }
?> 
```

这是 newsletter.php 的客户端部分

```
<script>
    $.getJSON('newsletter.php?rowCount', function(data) {
        var jsonData = $.parseJSON(data);
        var ntop = jsonData.rowCount * 250;
        $('#footer').css('top', ntop);
    });
</script> 
```

这是理论上的解决方案，但浏览器发送错误日志 'jsonData is null'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:34:10.920

一种方法是提供一个端点 JQuery 可以通过 $.post、$.get、$.ajax 进行查询，例如

```
$.getJSON('ajax.php?rowcount', function(data) {
  var jsonData = $.parseJSON(data);

  var ntop = jsonData.rowCount * 250;
  $('#footer').css('top', ntop);
} 
```

和一个类似的php脚本：

```
if(array_key_exists('rowcount', $_GET)) {
  $query = mysql_query("select count(*) as total from table_name");
  $result = mysql_fetch_array($query);
  $json = array('rowCount' => $result); // can add more data here
  return json_encode($json);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:25:10.073

```
function redraw(){
    var ntop = <?php echo $result['total'];?> * 250
    .....
} 
```

那是你要的吗？

# android - 发布表单包括 httpPost 的验证码

> ID：10314558
> 
> 赞同：2
> 
> 时间：2012-04-25T11:19:59.333
> 
> 标签：android, forms, http-post, captcha

我想使用具有这种形式的页面：

```
<form method="post" action="modules.php?name=search">
<input onkeypress=FKeyPress(this); onkeydown=FKeyDown(this); type="text" style="text-align:center" name="name"        size="30">&nbsp;</p>
 <img src='captcha.php' id='captcha' /><br /><br /><a href='#'  onclick='document.getElementById("captcha").src="captcha.php?"+Math.random();document.getElementById("captchaf").focus ();'id='change-image'>change</a><br/><p><strong>Enter captcha</strong><br>
 <input name="captcha" id="captchaf" type="text" style="text-align:center"></p><br />
 <input name="fbrsecured" type="hidden" value="">
 <input name="action" type="hidden" value="FBSend">
 <p><input type="submit" name="submit" value="search"></p>
 </form> 
```

我展示了使用这个：

```
 EditText edcap = (EditText) findViewById(R.id.cap);
    ImageView cap = (ImageView) findViewById(R.id.capt);
    try{
        String url1 = "mysiteaddress/captcha.php";
        URL ulrn = new URL(url1);
        HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
        InputStream is = con.getInputStream();
        Bitmap bmp = BitmapFactory.decodeStream(is);
        if (null != bmp)
            cap.setImageBitmap(bmp);
        else
            System.out.println("The Bitmap is NULL");

        }catch(Exception e){}
    String capt = edcap.getText().toString();
    HttpPost httpPost = new HttpPost("http://eservice.postcode.post.ir/modules.php?name=Postalcode2");  
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
    nameValuePairs.add(new BasicNameValuePair("name", Name));  
    nameValuePairs.add(new BasicNameValuePair("captcha", Capt)); 
    nameValuePairs.add(new BasicNameValuePair("fbrsecured", ""));
    nameValuePairs.add(new BasicNameValuePair("action", "FBSend"));
    nameValuePairs.add(new BasicNameValuePair("submit", "search")); 
```

我显示验证码并输入 edcap 但出现不正确的验证码错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:54:19.420

最后我找到了答案，我使用了 2 个 httpclient，这改变了 cookie 并导致了 Incorrect Captcha 错误

# c# - 使用 IComparable 比较对象时出现问题

> ID：10314559
> 
> 赞同：0
> 
> 时间：2012-04-25T11:20:00.097
> 
> 标签：c#, object, compare, icomparable

这是我试图开始工作的一些代码。如果一组中的项目与另一组中的项目不匹配，则将 0 添加到所有比较项目的列表中。如果最终列表不包含除 0 以外的任何其他值，则表示第一个集合中的项目在第二个集合中根本不存在。由于某种原因，我在结果列表中不断得到错误的值，所以某处一定有一个错误，只是我似乎找不到它。

```
 public class CompareItem : IComparable
    {
        public string CustId { get; set; }
        public string TechId { get; set; }

        public CompareItem(string custId, string techId)
        {
            CustId = custId;
            TechId = techId;
        }

        public int CompareTo(object obj)
        {
            CompareItem Temp = (CompareItem)obj;
            if (this.CustId != Temp.CustId || this.TechId != Temp.TechId)
            {
                return 0;
            }
            else
            {
                return 1;
            }
        }
    }

    static void Main(string[] args)
    {
        List<CompareItem> LeftCompareSet = new List<CompareItem>();

        LeftCompareSet1.Add(new CompareItem("0000", "0001"));
        LeftCompareSet1.Add(new CompareItem("0001", "0001"));
        LeftCompareSet1.Add(new CompareItem("0002", "0002"));
        LeftCompareSet1.Add(new CompareItem("0003", "0003"));
        LeftCompareSet1.Add(new CompareItem("0002", "0004"));

        List<CompareItem> RightCompareSet = new List<CompareItem>();

        RightCompareSet1.Add(new CompareItem("0005", "0005"));
        RightCompareSet1.Add(new CompareItem("0004", "0004"));
        RightCompareSet1.Add(new CompareItem("0003", "0003"));
        RightCompareSet1.Add(new CompareItem("0002", "0002"));
        RightCompareSet1.Add(new CompareItem("0006", "0002"));

        int state = 0;

        List<int> tlc = new List<int>();
        List<int> trc = new List<int>();

        foreach (CompareItem lc in LeftCompareSet)
        {
            foreach (CompareItem rc in RightCompareSet)
            {
                state = lc.CompareTo(rc);
                if (state == 0)
                {
                    tlc.Add(0);
                }
                else
                { 
                    tlc.Add(1);
                }
            }

            if (tlc.Contains(1))
            {
                Console.WriteLine("Cust: " + lc.CustId + ", Tech: " + lc.TechId + ", Not missing");
            }
            else
            {
                Console.WriteLine("Cust: " + lc.CustId + ", Tech: " + lc.TechId + ", Missing");
            }
        }

        foreach (CompareItem rc in RightCompareSet)
        {
            foreach (CompareItem lc in LeftCompareSet)
            {
                state = rc.CompareTo(lc);
                if (state == 0)
                {
                    trc.Add(0);
                }
                else
                {
                    trc.Add(1);
                }
            }

            if (trc.Contains(1))
            {
                Console.WriteLine("Cust: " + rc.CustId + ", Tech: " + rc.TechId + ", Not missing");
            }
            else
            {
                Console.WriteLine("Cust: " + rc.CustId + ", Tech: " + rc.TechId + ", Missing");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:26:02.337

你`CompareTo`错了。如果两个对象相同，则返回 0，如果一个小于另一个，则返回 -1，如果大于另一个，则返回 1。看[这里](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:48:52.603

您只想确认第一个列表中的项目是否存在于第二个列表中？

如果我是对的，那么你已经走了很长一段路。只需从一个列表中取出一个项目并检查它是否存在于第二个列表中

例子 ：

secondList.Exists(first[0]);

它将返回布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:43:26.767

我认为这种方法存在几个问题：

1.  该代码包含一个小错误：它必须是 LeftCompareSet 而不是 LeftCompareSet1

2.  在 CompareTo 中，您错过了检查对象的类型，如果使用错误的对象调用该方法，您会得到一个异常。

3.  我认为您真正需要的是实现 Equals 方法： public override bool Equals(object obj) （不要忘记 GetHashCode）

4.  不确定您真正想要实现什么，可能设置操作更有帮助

5.  你没有写出结果有什么问题，如果我执行你的代码，我会得到以下结果：

    *   客户：0000，技术：0001，失踪
    *   客户：0001，技术：0001，失踪
    *   客户：0002，技术：0002，不缺
    *   客户：0003，技术：0003，不缺
    *   客户：0002，技术：0004，不缺
    *   客户：0005，技术：0005，失踪

# xml - XQuery 返回错误..？

> ID：10314562
> 
> 赞同：2
> 
> 时间：2012-04-25T11:20:30.143
> 
> 标签：xml, xpath, xquery, basex

以下是 XML 文件 -

```
<Continents>
  <Continent n="Asia">
    <Country n="Thailand">
      <City>
        <Name>Bangkok</Name>
        <Desc>Capital on Thailand</Desc>
      </City>
    </Country>
    <Country n="India">
      <City>
        <Name>New Delhi</Name>
        <Desc>Capital on India</Desc>
      </City>
      <City>
        <Name>Mumbai</Name>
        <Desc>Financial capital on India</Desc>
      </City>
      <City>
        <Name>Chennai</Name>
        <Desc>A very good city</Desc>
      </City>
    </Country>
  </Continent>
</Continents> 
```

使用 baseX，我正在编写一个查询来显示`Name`包含单词**Capital**但返回错误的城市。查询是 -

```
/Continents/Continent[contains(Country/City/Desc,'Capital')]/Country/City/Name 
```

错误是 - **错误：[XPTY0004] 预期单个项目，（元素 Desc { ... }，元素 Desc { ... }，...）找到。**

请帮帮我.. 是否需要使用 FLWOR 进行此类查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:43:17.807

您的原始查询可能已重写如下...

```
/Continents/Continent[
  some $x in Country/City/Desc satisfies contains($x,'Capital')]
  /Country/City/Name 
```

...或者...

```
/Continents/Continent[
  for $x in Country/City/Desc
  where contains($x,'Capital')
  return $x]/Country/City/Name 
```

...但是这两个查询都将返回包含包含“首都”的城市描述的*任何大陆的**所有*国家/地区。相反，这可能是您正在寻找的：

 *```
/Continents/Continent/Country/City[contains(Desc,'Capital')]/Name 
```

您也可以使用[contains 文本](http://docs.basex.org/wiki/Full-Text) 表达式来忽略关键字中的大小写、变音符号等：

```
/Continents/Continent/Country/City[Desc contains text 'Capital']/Name 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:39:03.943

您的谓词`[contains(Country/City/Desc,'Capital')]`选择包含该元素的所有`Desc`节点，因此它评估为三个元素。要解决此问题，只需将谓词移动到元素（毕竟，您要过滤元素，而不是）。我没有测试它，但我希望它能够工作：`'Capital'``Continent``City``City``Continent`

```
/Continents/Continent/Country/City[contains(Desc,'Capital')]/Name 
```*

# objective-c - 使用自定义名称初始化组件

> ID：10314563
> 
> 赞同：0
> 
> 时间：2012-04-25T11:20:34.383
> 
> 标签：objective-c, ios, xcode

我有一个包含 15 个图像和标签的视图。我已经将它们全部展示了，但在某些情况下我不想全部展示它们。例如我有 IBOutlet UIImageView* image1 ；....................* 图像2；.................................................*图像；

我有一个包含对象的列表，但如果我没有 n 个对象，而我只是不想显示从 m 到 n 的图像。在 for 循环中我想要一些东西 - > string componentToShow = "image" + i ; 现在 (componentToShow) .....设置为可见和不同的 prop 。

谢谢， 拉卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:31:15.240

如果我理解正确，您有不同数量的对象，并且您希望为您拥有的对象显示随附的视图。您已经在 nib 文件中布置了最大数量的伴随视图，现在正在努力隐藏您不想要的视图。那是对的吗？

我会这样做：

从笔尖中取出随附的视图。创建代表单个对象（例如标签和图像一起）的第二个笔尖。在视图控制器的`viewDidLoad`方法中，加载代表对象的 nib 并将其存储在实例变量中。当发生创建新对象的事件时，实例化 nib 并将生成的视图添加到视图控制器的视图层次结构中。

或者，如果您的对象表示足够简单，请跳过第二个 nib，直接在代码中创建视图。

# c - 用opencv在内存中加载一组图片

> ID：10314570
> 
> 赞同：0
> 
> 时间：2012-04-25T11:20:54.247
> 
> 标签：c, opencv

我正在使用 C API OpenCV 更新 C 中的旧代码，我需要在内存中加载至少 300 张图像才能使用它们进行一些算法。

所以，我一直在想，我可以将这些图像加载到内存中以使操作更快，而不是从磁盘加载并每个操作进行一次操作。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:49:51.667

如果您正在使用 C 代码，那么您的图像将自动保留在内存中，直到您明确释放它们为止。只需调用`cvLoadImage`您希望从磁盘加载的每个图像。我建议您将`IplImage*`指针存储在一个大数组中，这样您就不会忘记它们。完成后，只需调用即可`cvReleaseImage`释放所有内存。

正如您所提到的，您在加载时必须注意不要耗尽内存。如果这样做，您将别无选择，只能将一个子集加载到内存中，并将其余部分保存在磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:45:26.243

我想对于大多数应用程序而言，这样做带来的性能提升是如此之小，以至于它甚至不值得麻烦。确保有任何收益的唯一方法是这样做并测量时间。

您的方法的问题在于，根据图像的大小，您可能会用完 RAM 内存来一次存储它们。

# c++ - 使用打开的句柄删除文件

> ID：10314573
> 
> 赞同：0
> 
> 时间：2012-04-25T11:21:03.023
> 
> 标签：c++, file, winapi

我不应该能够删除带有打开句柄的文件，对吗？所以我创建了一个文件，然后我立即尝试删除它，希望这会失败。还是我错了，在删除文件之前不必关闭句柄？

```
HANDLE hFile = CreateFile (TEXT(file),      
                  GENERIC_WRITE,          
                  0,                      
                  NULL,                   
                  OPEN_ALWAYS,          
                  FILE_ATTRIBUTE_NORMAL,  
                  NULL);                  

if (hFile == INVALID_HANDLE_VALUE)
{
    //FAIL
}

if(DeleteFile(file))
{
    //Should it ever get here cos i dont close the handle?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:43:12.490

这取决于文件的打开方式。如果指定了共享模式`FILE_SHARE_DELETE`，则可能会被其他人删除。

即使您对文件进行了内存映射，并且已使用此标志（以及读/写共享）打开它，那么它仍然可以被 shell 删除（至少我已经尝试过并且它发生了，但也许文件已经只是被重命名并移至回收站）。在这种情况下，随后访问内存将导致“InPageError”C 样式异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:25:32.440

是的，它会失败。

> 如果应用程序尝试删除为正常 I/O 打开的文件或作为内存映射文件打开的文件，DeleteFile 函数将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:32:30.860

你试过这个吗？MS 文档指出：

> 如果应用程序尝试删除为正常 I/O 打开的文件或作为内存映射文件打开的文件，DeleteFile 函数将失败。

因此，如果您没有得到这种行为，我建议这取决于您打开文件的方式。您确定您对文件是否打开的检查是完全全面的吗？您是否尝试过先写入文件？你能在你自己的代码之外看到这个文件吗？（即来自资源管理器）查看[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363915%28v=vs.85%29.aspx)了解更多详细信息。

# c - WinMain中hPrevInstance的作用是什么

> ID：10314575
> 
> 赞同：13
> 
> 时间：2012-04-25T11:21:19.593
> 
> 标签：c, windows, winapi, hwnd, hinstance

的[定义`WinMain`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633559(v=vs.85).aspx)是：

```
int CALLBACK WinMain(
    _In_ HINSTANCE hInstance,
    _In_ HINSTANCE hPrevInstance,
    _In_ LPSTR     lpCmdLine,
    _In_ int       nCmdShow
); 
```

我的理解是：

*   `hInstance`是应用程序实例的句柄，[当不是 DLL 时，可以使用`GetModuleHandle(NULL)`](https://stackoverflow.com/questions/21718027/getmodulehandlenull-vs-hinstance)
*   `szCmdLine`是命令行参数，可以重试[`GetCommandLine()`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683156(v=vs.85).aspx)
*   `nCmdShow`通常是`SW_SHOW`

但是，我*从来*没有遇到过 的*任何*用法，即使是在*1990 年代*`hPrevInstance`后期的书中。那么，如果有的话，它的用途是什么，它到底*是*什么？*`hPrevInstance`*

 *** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T11:23:34.303

那是遗留的东西。Raymond Chen 对[The Old New Thing](http://blogs.msdn.com/b/oldnewthing/archive/2004/06/15/156022.aspx)（2004 年 6 月 15 日）提供了很好的解释。这是（带有更正链接）：

> 一旦您的普通 GUI 程序启动，控制就从您的[WinMain 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633559(v=vs.85).aspx)开始。第二个参数 hPrevInstance 在 Win32 程序中始终为零。当然它在某些时候有意义吗？
> 
> 当然是的。
> 
> 在 16 位 Windows 中，有一个名为 GetInstanceData 的函数。该函数接受一个 HINSTANCE、一个指针和一个长度，并将内存从该实例复制到您的当前实例中。（它有点相当于[ReadProcessMemory](https://msdn.microsoft.com/en-us/library/windows/desktop/ms680553(v=vs.85).aspx)的 16 位，但限制是第二个和第三个参数必须相同。）
> 
> （由于 16 位 Windows 有一个公共的地址空间，GetInstanceData 函数实际上只不过是一个 hmemcpy，许多程序都依赖于此，只是使用原始 hmemcpy 而不是使用文档化的 API。Win16 实际上是设计有可能强加在未来的版本中单独的地址空间 - 观察像 GMEM_SHARED 这样的标志 - 但是像 hmemcpy'ing 你以前的实例这样的技巧的流行将这种可能性降低到一个未实现的梦想。）
> 
> 这就是 WinMain 的 hPrevInstance 参数的原因。如果 hPrevInstance 不为 NULL，则它是已在运行的程序副本的实例句柄。您可以使用 GetInstanceData 从中复制数据，让自己更快地起步。例如，您可能希望将主窗口句柄从前一个实例中复制出来，以便与它进行通信。
> 
> hPrevInstance 是否为 NULL 会告诉您您是否是该程序的第一个副本。在 16 位 Windows 下，只有程序的第一个实例注册了它的类；第二个和后续实例继续使用第一个实例注册的类。（事实上​​，如果他们尝试过，注册将会失败，因为类已经存在。）因此，如果 hPrevInstance 为非 NULL，所有 16 位 Windows 程序都会跳过类注册。
> 
> 设计 Win32 的人发现自己在移植 WinMain 时遇到了一些问题：为 hPrevInstance 传递什么？毕竟，整个模块/实例的东西在 Win32 中并不存在，单独的地址空间意味着在第二个实例中跳过重新初始化的程序将不再工作。所以Win32总是传NULL，让所有程序都认为自己是第一个。
> 
> 令人惊讶的是，它确实奏效了。**

# php - 如何定义应用程序中随处可用的全局常量？

> ID：10314582
> 
> 赞同：4
> 
> 时间：2012-04-25T11:22:11.543
> 
> 标签：php, yii

如何定义一个`UPLOAD_DIR`常量（或等效项）以便我可以在任何地方使用它？

我尝试将此作为应用程序配置参数

```
'params'=>array(
            'upload_dir'=>Yii::app()->baseUrl . '/images/uploads/',
), 
```

但`Yii::app()->baseUrl`不能在配置文件中使用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T11:26:12.737

您可以`index.php`在调用之后`Yii::createApplication`和之前在内部执行此操作`Yii::app()->run()`：

```
define ('UPLOAD_DIR', Yii::app()->baseUrl . '/images/uploads/'); 
```

然后，您可以像使用任何其他 PHP 常量一样使用它，例如`echo UPLOAD_DIR`.

**编辑：**当我说 after`createApplication`和 before`run`时，我的意思是准确的（另外，并不是同时存在 a`createWebApplication`和 a `createApplication`，这是前者的更通用版本）。

所以如果你目前有

```
Yii::createWebApplication(...)->run(); 
```

你必须把它分成

```
Yii::createWebApplication(...);
define ('UPLOAD_DIR', Yii::app()->baseUrl . '/images/uploads/');
Yii::app()->run(); 
```

* * *

另一种选择是将另一个属性添加到您的应用程序类中。例如，如果您的目录中有一个`class MyApplication`，`protected/components`那么您可以简单地执行以下操作：

```
class MyApplication extends CWebApplication {
    // ...other code...
    public function getUploadDir() {
        return $this->baseUrl.'/images/uploads/';
    }
} 
```

然后，您将作为`Yii::app()->uploadDir`.

# java - android webview后退按钮setOnClickListener

> ID：10314583
> 
> 赞同：2
> 
> 时间：2012-04-25T11:22:14.900
> 
> 标签：java, android, eclipse, android-webview

我在我的主布局上设置了一个按钮，该按钮应该执行在另一个布局上设置的 webview 的 goBack 方法。当 backButton 的 setOnClickListener 时应用程序崩溃。我做错了什么？谢谢你。

网络视图类，

```
 public class webPush extends Activity {

        WebView webview; 
        Button backButton;

        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.webview); 

            webview = (WebView) findViewById(R.id.webview1);

            backButton = (Button)findViewById(R.id.button1);

            backButton.setOnClickListener(new OnClickListener() 
            {
                  @Override 
                  public void onClick(View arg0) 
                  {
                      webview.goBack();
                  }
            });

            webview.getSettings().setJavaScriptEnabled(true);       

            webview.setWebViewClient(new WebViewClient());

            webview.loadUrl("http://www.google.com");

        } 
```

从主要布局，

```
<Button
                 android:id="@+id/button1"
                 style="?android:attr/buttonStyleSmall"
                 android:layout_width="78dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="0.02"
                 android:text="Back" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:24:28.943

我认为你有空指针异常......因为......`webview is null`

将此行放在 setcontentview 之后...

```
 webview = (WebView) findViewById(R.id.webview1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:26:22.793

尝试添加这个：

```
if (ourBrowser.canGoBack()) {
            ourBrowser.goBack();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:39:02.677

您在哪个布局中放置了按钮？是在 main.xml 还是 webview 布局中？如果按钮在 main.xml 中，则 setContentView(R.layout.main);

# for-loop - 可读性：使用 get_first/get_next 进行列表迭代，“while”与“for”循环

> ID：10314584
> 
> 赞同：1
> 
> 时间：2012-04-25T11:22:16.077
> 
> 标签：for-loop, while-loop, readability

假设您想使用初始 get_first() 遍历列表，随后调用 get_next() 在列表末尾返回 NULL。

你更喜欢读哪一本？

```
element = get_first(list);
while (element)
{
    process(element);
    element = get_next(list);
} 
```

对比

```
for (element = get_first(list); element; element = get_next(list))
{
    process(element);
} 
```

迭代的状态保存在列表结构中。

我个人更习惯这个`while`版本，但是当我看到有人使用这个`for`版本时，我也很容易理解发生了什么，所以现在我想知道哪个对大多数人来说更容易阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:10:31.147

两者都非常易读。你不会混淆你的读者与任何一个。while 循环可以说更具可读性（但人们的里程可能会有所不同......）所以如果列表只迭代一次，我可能会使用它，否则使用更简洁的 for 循环。

# c# - 从 .NET/C# 连接到 Oracle DB

> ID：10314586
> 
> 赞同：1
> 
> 时间：2012-04-25T11:22:25.823
> 
> 标签：c#, oracle

找到[本教程](http://www.codeproject.com/Articles/18692/Instant-Oracle-Using-C)后，我下载并提取了所需的文件。但是当我尝试添加他们的参考时，我收到了这个错误消息：

> 无法添加对“..\oci.dll”的引用。请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:29:14.550

您应该下载并安装 ODP.NET（Oracle Data Provider for .NET）

[http://www.oracle.com/technetwork/topics/dotnet/index-085163.html](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)

有关部署，请查看[http://www.oracle.com/technetwork/issue-archive/2008/08-nov/o68odpnet-101744.html](http://www.oracle.com/technetwork/issue-archive/2008/08-nov/o68odpnet-101744.html)，但基本上是 V4Vendetta 指出的 xcopy 部署

更新：客户端应用程序需要这些 dll（32 位版本）：

```
oci.dll 
Oracle.DataAccess.dll 
oraociei11.dll 
OraOps11w.dll 
```

# jquery - 如何获取当前元素的子 n？

> ID：10314591
> 
> 赞同：2
> 
> 时间：2012-04-25T11:22:42.687
> 
> 标签：jquery

我有一个类似于以下结构的页面：

```
<div id="row_2">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div> 
```

假设我不能使用该 id，我如何获得 row_2 的第 n 个孩子（例如，我在 row_1 上并且我正在移动到下一个）

我尝试了以下方法：

```
current.parent().next().children().filter(":nth-child("+i+")"); 
```

其中“current”是前一个“row div”上的一个项目，“i”是一个项目的索引，但这不起作用。我也尝试使用 0 代替“i”来测试它，但这也不起作用 - 错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:25:24.617

假设我正确理解了您的问题，您正在寻找[`eq`](http://api.jquery.com/eq/)，而不是`nth-child`：

```
current.parent().next().children().eq(i); 
```

正如文档所述`eq`：

> 将匹配元素集减少到指定索引处的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:25:39.380

我不完全确定你在做什么，但我建议：

```
current.parent().next().find(":nth-child("+i+")"); 
```

或者：

```
current.parent().next().children().eq(i); 
```

如果您需要使用`filter()`，我建议（尽管不知道到底发生了什么）也许可以尝试：

```
current.parent().next().children().filter(
    function(){
        return $(this).is(":nth-child("+i+")");
    }); 
```

但我看不到优势，除非您也想过滤其他标准。

参考：

*   [`eq()`](http://api.jquery.com/eq/).
*   [`filter()`](http://api.jquery.com/filter/).
*   [`find()`](http://api.jquery.com/find/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:25:59.037

### 如果您的起点是`row_1`，那么：

```
var row2child3 = row1.next().children().eq(2); // zero-based index, 2 = third child 
```

[实例](http://jsbin.com/umapiz)| [资源](http://jsbin.com/umapiz/edit)

假设`row_1`和`row_2`是紧邻的，例如：

```
<div id="row_1">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div>
<div id="row_2">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div> 
```

如果没有，您可能想要`.nextAll("some selector here").first()`而不是`.next()`.

### 如果您的起点是 中的*项目*之一`row_1`，则：

..`parent()`在那里插入一个：

```
var row2child3 = item.parent().next().children().eq(2); // zero-based index, 2 = third child 
```

[实例](http://jsbin.com/umapiz/2)| [资源](http://jsbin.com/umapiz/2/edit)

# google-drive-api - Google Drive API：列出集合

> ID：10314593
> 
> 赞同：4
> 
> 时间：2012-04-25T11:22:44.537
> 
> 标签：google-drive-api

我们如何使用 Google Drive API 管理 Google Drive，这需要

1.  列出集合及其子集合
2.  创建文件和集合
3.  重命名/移动/复制文件和集合

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:17:36.420

我还不能尝试这个，因为我无法访问谷歌驱动器，但据我所知，谷歌驱动器是谷歌文档的更名，所以如果你需要使用集合，旧的谷歌文档 API 可能仍然有效。[https://developers.google.com/google-apps/documents-list/#managing_collections_and_their_contents](https://developers.google.com/google-apps/documents-list/#managing_collections_and_their_contents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T06:49:51.127

现在我们有了 Google Drive SDK v2，据说可以解决您的问题。

# asp.net - ASP.NET 登录控制重置失败文本

> ID：10314595
> 
> 赞同：1
> 
> 时间：2012-04-25T11:22:55.523
> 
> 标签：asp.net, login-control

我在 asp.net 页面中有一个登录控件。在 MSDN 上，指定 FailureText 属性（如果未指定）默认为“您的登录尝试失败。请重试”。

我需要在 Login1_LoggingIn 事件中输入关于登录失败的自定义消息，这样当密码输入错误 4 次时，帐户被锁定，我会在此事件中通知用户。

但是，锁定时间到期后，我需要恢复默认的“您的登录尝试失败。请重试”消息。有什么方法可以将 FailureText 属性恢复为默认状态？

问题是，如果我在上述事件上覆盖 FailureText，那么所有后续回发都会保持这种状态。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:46:18.737

您应该能够挂钩到 Login1_LoginError 事件并从那里更改消息，然后您可以决定每次发生故障时显示什么，即

```
private void Login1_LoginError(object sender, EventArgs e)
{
    failureCount++; //Retrieve this from Database or something

    if (failureCount >= 4)
    {
        Login1.FailureText = "Account is locked";
    }
    else
    {
        Login1.FailureText = "Your login attempt has failed. Please try again";
    }
} 
```

# php - jquery ui自动完成无缘无故停止工作

> ID：10314602
> 
> 赞同：1
> 
> 时间：2012-04-25T11:23:10.367
> 
> 标签：php, jquery, jquery-ui

在网站 cms 中，我使用 jquery 自动完成功能。我的工作就像一个魅力。但突然，几周后，它停止了工作。在此期间绝对没有更改任何代码。我正在使用 jquery 1.6.2 和 jquery ui 1.8.13。这是代码：

```
$(function() {
    var artists = [<?php getArtists(); ?>];
    $("#artistsearch").autocomplete({
        source: artists,
        select: function(event, ui){
            $("#artistsearch").val(ui.item.artistsearch);
        },
        change: function(event, ui) { $("#search").submit(); }
    });
}); 
```

该数组`artists`是正确的数组，但太长，无法在此处发布。我希望这里有人可以帮助我解决这个问题。

在此先感谢，理查德

我有一个带有字段的表格`artistsearch`

编辑：谢谢大家..

我没有收到通知邮件，所以我的回复有点晚了。

回声在 getArtist() 函数中，并提供了一个不错的数组。正如我在最初的问题中所说，整个事情确实有效，但突然停止工作，没有更改任何代码。起初我认为它可能是数组中的无效项，所以我硬编码了一个简单的 2 项数组，它也不起作用。

会不会是服务器问题？我真的对此感到困惑，而且我以前在我的职业生涯中没有看到这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:30:25.403

需要如下（假设您的`getArtists()`函数还没有`echo`），每当您在 JavaScript/JQuery 中使用 PHP 变量时，您**必须**回显它们:)**或者您可以使用短标签（感谢 diEcho）**：

```
$(function() {
    var artists = [<?php echo getArtists(); ?>];
    $("#artistsearch").autocomplete({
        source: artists,
        select: function(event, ui){
            $("#artistsearch").val(ui.item.artistsearch);
        },
        change: function(event, ui) { $("#search").submit(); }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:05:05.373

问题解决了！

事实证明，一些数组项破坏了数组。在 getArtist 函数中，我切换了引号，例如："'" 到 '"'

理查德

# image-processing - 实时 Cuda 图像处理建议

> ID：10314606
> 
> 赞同：1
> 
> 时间：2012-04-25T11:23:25.213
> 
> 标签：image-processing, opencv, matrix, cuda, gpu

我正在尝试为相机获得 1000fps 的系统实现算法，我需要获取所有图像中每个像素的值，并对 N 个图像中像素 [i] [j] 的演变进行不同的计算, 对于图像中的所有像素。我有 (unsigned char *ptr) 我想将它们传输到 GPU 并开始实现算法。但我不确定实时处理的最佳选择是什么。我的系统： CPU Intel Xeon x5660 2.8Ghz（2 个处理器） GPU NVIDIA Quadro 5000

我有以下问题：

1.  我需要向 CUDA 添加任何图像处理库吗？如果是的话，你有什么建议？

2.  我可以为像素 [i,j] 创建一个矩阵，其中包含图像大小中每个像素的图像 [1:n] 的值吗？例如，对于 1000 个 200x200 大小的图像，我最终会得到 40000 个矩阵，每个矩阵包含一个像素的 1000 个值？CUDA 是否为我提供了一些选项，例如 OpenCV 以获得矩阵？还是向量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:57:23.753

> 1 - 我需要向 CUDA 添加任何图像处理库吗？

苹果和橙子。每个都有不同的目的。像 OpenCV 这样的图像处理库提供的不仅仅是简单的加速矩阵计算。也许您不需要 OpenCV 在这个项目中进行处理，因为您似乎更愿意直接使用 CUDA。但是您仍然可以使用 OpenCV，以便更轻松地从磁盘加载和写入不同的图像格式。

> 2 - CUDA 是否为我提供了一些选项，例如 OpenCV 以获得矩阵？

绝对地。前段时间我写了一个简单的（教育）应用程序，它使用 OpenCV 从磁盘加载图像并使用 CUDA 将其转换为灰度版本。该项目名为[cuda-grayscale](http://code.google.com/p/cuda-grayscale/)。我还没有使用 CUDA 4.x 对其进行测试，但代码显示了在结合 OpenCV 和 CUDA 时如何进行基本操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:28:27.170

听起来您将有 40000 次独立计算，其中每个计算仅在一个（时间）像素内起作用。如果是这样，这对 GPU 来说应该是一个很好的任务。您的 352 核 Fermi GPU 应该能够击败您的 12 个超线程 Xeon 内核。

您计划运行的算法是通用操作吗？听起来可能不是，在这种情况下，您可能必须编写自己的内核。

是的，您可以在 CUDA 中拥有任何类型的元素数组。

将这种“面向流”的方法用于 GPU 实现是有好处的，因为与通过 PCIe 总线的传输相比，它最大化了计算数量。它也可能会带来困难，如果您想以特定顺序处理给定像素的 1000 个值（例如，从最旧到最新），您可能希望避免连续移动内存中的所有帧（以使最新框架的空间）。这会使您对像素值的寻址稍微复杂化，但为了避免移动帧，最好的方法可能是每次添加新帧时用最新帧覆盖最旧的帧。这样，您最终会得到一个有序的“帧堆栈”，但在其中某处的旧帧和新帧之间存在不连续性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:49:15.933

> 我需要向 CUDA 添加任何图像处理库吗？？？如果是的话，你有什么建议？

披露：我公司开发和营销 CUVILib

对于还提供通用功能的 GPU 加速成像库，几乎没有选择。CUVILib 是提供以下选项的选项之一，非常适合您的特定需求：

1.  CuviImage 对象，它将您的图像数据和图像保存为 2D 矩阵
2.  您可以编写自己的 GPU 函数并将 CuviImage 用作 2D GPU 矩阵。
3.  CUVILib 已经提供了一组丰富的成像功能，如颜色操作、图像统计、特征检测、运动估计、FFT、图像变换等，因此您很有可能会找到所需的功能。

至于 GPU 是否适合您的应用的问题：是的！成像是并行计算的理想领域之一。

链接：

*   CUVILib：[http ://www.cuvilib.com](http://www.cuvilib.com)
*   [金枪鱼代码： http](http://www.tunacode.com) ://www.tunacode.com

# facebook - 如何开发可以安装在用户页面上的 Facebook 应用程序？

> ID：10314615
> 
> 赞同：-3
> 
> 时间：2012-04-25T11:24:02.353
> 
> 标签：facebook, admin

我想开发一个可以安装在用户系统管理 Facebook 页面上的 Facebook 应用程序。

是否可以制作此应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:31:37.890

**第 1 步：** 您必须首先在`http://facebook.com/developers`.

**第 2 步：** 在页面选项卡中填写网站链接（您的画布链接）。

**第 3 步：** 访问`http://www.facebook.com/add.php?api_key=123456789`

将上述[URL中的](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)**123456789**替换为您的**应用程序 ID**。

# ios5 - 如何保存带有多个框的 NSS 字符串的保存数据

> ID：10314616
> 
> 赞同：1
> 
> 时间：2012-04-25T11:24:03.723
> 
> 标签：ios5, nsstring, uitextfield, xcode4.3

我使用以下代码保存数据并重新加载。

```
- (IBAction)savefirstline:(id)sender {
NSString *savecontents = firstlineofadsress.text; 
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:savecontents forKey:@"savecontents2"];
[defaults synchronize];

- (IBAction)loadfirstline:(id)sender {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadstring = [defaults objectForKey:@"savecontents2"];
[firstlineofadsress setText:loadstring]; 
```

我的问题是如何向此方法添加更多文本字段。目前，我必须为每个文本框设置两个按钮，以启用字符串的保存和加载，我确信这不可能是正确的，因为我有大约 5 个文本字段。我尝试将其他 textfields.text 添加到 NSSstring 但不断收到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:33:00.320

您可以给每个文本字段一个 unqie 标记号，然后创建一个处理每个文本字段的开关。

所以像：

```
 switch ([sender tag]) {
    case 1:
    [defaults setObject:savecontents forKey:@"savecontents2"];
    [defaults synchronize];
    case 2:
    //...
    case 3:
    //...
    case 4:
    case 5:
 } 
```

# wordpress - 在子目录中使用 Wordpress 博客时，根目录中存在 .htaccess 文件

> ID：10314620
> 
> 赞同：0
> 
> 时间：2012-04-25T11:24:09.427
> 
> 标签：wordpress, .htaccess, rewrite, robots.txt, canonical-link

我在所有站点的根目录中都有一个 .htaccess 文件，用于处理规范重写。.htaccess 文件的全部内容如下：

```
Options +Indexes
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain\.com
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=permanent,L]
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://www.domain.com/$1/ [L,R=301] 
```

问题是，当我在子目录 (/blog) 中安装 Wordpress 博客时，WP 博客变得无法运行。我无法登录 wp-admin 区域。我的主机告诉我这是因为根目录中的 .htaccess 文件。因此需要将其删除。

那么，如果根目录中没有 .htaccess 文件，如何实现相同的规范 URL 重写指令呢？我可以在根目录的 robots.txt 文件中包含这些说明吗？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:35:26.760

如果你记录 root`/var/www/my-site/`并且你想有 wordpress，`/var/www/my-site/blog`你需要执行以下操作：

1.) 创建一个`index.php`文件，内容如下`/var/www/my-site`

```
<?php
    define('WP_USE_THEMES', true);
    require('./blog/wp-blog-header.php');
?> 
```

2.) 将以下 .htaccess 放入`/var/www/my-site`

```
# Redirect http://example.com to http://www.example.com
RewriteCond %{HTTP_HOST} ^example\.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 

# BEGIN WordPress
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

现在您访问管理区域的方式是[http://www.example.com/blog/wp-admin](http://www.example.com/blog/wp-admin)

然后在您的仪表板中，转到设置并设置`WordPress Address URL`为`http://www.example.com/blog`和`Site URL``http://www.example.com`

# spring - JdbcTemplate 和 SimpleJdbcTemplate

> ID：10314622
> 
> 赞同：19
> 
> 时间：2012-04-25T11:24:19.537
> 
> 标签：spring, jdbctemplate, spring-jdbc

我是 Spring 3.0 的新手。对于 DAO 访问，我选择了 SpringJDBC。SpringJDBC 提供了 JDBC Template 和 SimpleJDBCTemplate 。哪个最好。我在一些论坛中读到 SimpleJDBCTemplate 将在 Spring 3.1 中被弃用。这两者有什么区别。指导我哪一个最好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-25T11:43:34.320

在 Spring 3.x 中，您应该使用`JdbcTemplate`.

在以前的 Spring 版本中，`SimpleJdbcTemplate`利用了 Java 5 的新特性，同时`JdbcTemplate`保持了与 Java 5 之前的环境的兼容性。但现在 的所有功能`SimpleJdbcTemplate`都已添加到`JdbcTemplate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-27T12:44:19.733

在 spring 4.1.3 中，SimpleJdbcTemplate 已被弃用，并且在 4.3.3 中已完全删除

# mysql - 如何使用 GROUP BY 检索 CASE 字段的字母顺序优先的结果集？

> ID：10314627
> 
> 赞同：0
> 
> 时间：2012-04-25T11:24:31.010
> 
> 标签：mysql

在我问的上一个问题中，有人建议`MAX(value)`优先考虑字母化的语法

[如何使用 GROUP BY 检索按字母排序优先的结果集](https://stackoverflow.com/questions/10313037/how-to-use-group-by-to-retrieve-a-result-set-with-priority-on-alphabeticization)

但是，我正在处理该`CASE`语句并且 using`MAX(CASE statement)`在语法上不正确。

```
SELECT id, 
CASE
    WHEN filename LIKE '%.mp3' THEN 'song'
    ELSE 'other' END as type
FROM filenames

1   song
2   song
2   other
3   other
3   song

SELECT id, 
CASE
    WHEN filename LIKE '%.mp3' THEN 'song'
    ELSE 'other' END as type
FROM filenames
GROUP BY id;

1   song
2   song
3   other 
```

`type`对于按字母顺序排在最后的字段，我将如何优先考虑该字段？前任。结果集应该是

```
1   song
2   song
3   song 
```

如果可能的话，我想避免嵌套语句。这可以用`MAX(type)`语法来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:31:43.470

您可以使用以下

```
SELECT id, 
CASE
    WHEN filename LIKE '%.mp3' THEN 'song'
    ELSE 'other' END as type
FROM filenames
GROUP BY id DESC; 
```

DESC会给你降序

# javascript - D3.js 从 json 更新条形图

> ID：10314630
> 
> 赞同：4
> 
> 时间：2012-04-25T11:24:43.953
> 
> 标签：javascript, charts, bar-chart, d3.js

我正在使用 d3.js 制作条形图，条形图应该能够对应于新的 json 数据。

```
var m = [30, 5, 5, 5],
    w = 375 - m[1] - m[3],
    h = 260 - m[0] - m[2];

var format = d3.format(",.0f");

var wdthnew = d3.scale.linear().range([0, w]),
    wdth = d3.scale.linear().range([0, w]).domain([0, 25000]),
    hght = d3.scale.ordinal().rangeRoundBands([0, h], .1);

var svg = d3.select("body").append("svg")
    .attr("width", w + m[1] + m[3])
    .attr("height", h + m[0] + m[2])
  .append("g")
    .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

d3.json("barchartjson.php", function(data) {

  data.sort(function(a, b) { return b.value - a.value; });
  hght.domain(data.map(function(d) { return d.orientation; }));

  var bar = svg.selectAll("g.bar")
      .data(data)
    .enter().append("g")
      .attr("class", "bar")
      .attr("transform", function(d) { return "translate(0," + hght(d.orientation) + ")"; });

  bar.append("rect")
      .attr("id", "activebar") 
      .attr("width", 0)
      .attr("height", hght.rangeBand())
    .transition()
    .delay(100)
    .duration(1000)    
      .attr("width", function(d) { return wdth(d.value); });    
});

function makebar(date1, date2) {
var barchartjson = "barchartjson.php?df="+date1+"&dl="+date2;

d3.json(barchartjson , function(datanew) { 

  datanew.sort(function(a, b) { return b.jumlah - a.jumlah; });

  wdthnew.domain([0, d3.sum(datanew, function(d) { return d.value; })]);

  console.log("SUM datanew: "+ d3.sum(datanew, function(d) { return d.value; }));
  console.log("Array datanew: ");
  console.log(datanew);
  var updatebar = svg.selectAll("#activebar");

  updatebar.transition().duration(1000)
        .attr("width", function(a) { console.log("update width: wdthnew("+a.value+") = "+wdthnew(a.value));
        return wdthnew(a.value); });  
});
} 
```

这是第一次使用的 barchartjson.php 中的 json：

```
[{"orientation":"negatif","value":"15964"},{"orientation":"netral","value":"2788"},{"orientation":"positif","value":"9701"}] 
```

该栏第一次正确显示。**问题是调用 makebar() 时，会使用新的 json 数据更新条形宽度。每个条形宽度都会更新，但在某些情况下它们超出范围。** 这是 console.log 的输出：

```
SUM datanew: 2520
Array datanew: 
[Object
value: "1411"
orientation: "negatif"
__proto__: Object
, 
Object
value: "846"
orientation: "positif"
__proto__: Object
, 
Object
value: "263"
orientation: "netral"
__proto__: Object
]
update width: wdthnew(15964) = 2312.246031746032
update width: wdthnew(9701) = 1405.1051587301588
update width: wdthnew(2788) = 403.81746031746036 
```

成功调用了一个新的 json，但显示 wdthnew 的日志一直在扩展旧的 json。

```
 updatebar.transition().duration(1000)
        .attr("width", function(a) { console.log("update width: wdthnew("+a.value+") = "+wdthnew(a.value));
        return wdthnew(a.value); }); 
```

结果：

```
update width: wdthnew(15964) = 2312.246031746032 
```

尽管 15694 来自旧 json，但 wdthnew(d.value) 实际上是从 wdthnew(1411) 返回一个值，即 2312 并且超出范围..

有人可以帮我解决这个问题吗？或者指出我做错了什么？我是 d3.js 和 javascript 的新手。我很抱歉语法不好。英语不是我的母语。

jsFiddle在这里：http: [//jsfiddle.net/saido/5mREA/](http://jsfiddle.net/saido/5mREA/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:35:55.030

原来问题出在`function makebar():` 我应该附加新数据的这一行：

```
var updatebar = svg.selectAll("#activebar").data(datanew); 
```

现在 console.log 显示和计算正确的值。

抱歉，我不确定如何更详细地解释技术问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:26:21.170

也许创建一个缓冲区数组/对象，在使用它之前存储数据......然后创建一个在新数据到达之前不会更新的更新间隔。

**更新：**这是一个例子

```
var data = [{x: 1, y: 3},
            {x: 2, y: 4},
            {x: 3, y: 5},
            ...
            ];

var incomingData = [];

/* incoming data gets .pushed(...) in every 1 or
    2 seconds, depending on network traffic */

var updateDelay = 3000;

setInterval(function() {
        for (var index = 0; index < data.length; index++) {
            seriesData.shift();
            seriesData.push(incomingData.shift());
            redrawGraph();
        }
    }, updateDelay); 
```

# firefox - selenium 会记录萤火虫和篡改数据操作吗？

> ID：10314631
> 
> 赞同：1
> 
> 时间：2012-04-25T11:24:47.027
> 
> 标签：firefox, selenium, request

我正在编写一个自动化测试脚本。到目前为止，Selenium 帮助了我。现在，我有一个测试用例，我应该在其中篡改请求并添加参数，然后提交请求。我是通过使用 tamperdata 手动完成的。

我现在想自动化这个测试用例。问题是，selenium 没有记录我添加参数然后提交请求的操作。我知道 selenium 是一种记录播放的工具。如果它无法记录篡改数据或做错了，有人可以确认我吗？

如果不能，您如何使这些测试用例自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:03:39.843

Selenium 确实不是为这种类型的工作而设计的。如果普通用户不能发出被篡改的请求（没有 Firebug 等），那么 Selenium 通常也不能。无论如何，您可以拥有 FireBug：[如何在 Selenium WebDriver (Selenium 2) 中运行 Firebug？](https://stackoverflow.com/questions/3421793/how-do-i-run-firebug-within-selenium-2). 控制它，这就是问题所在——我认为这不值得研究。

做到这一点的一种方法可能是`HttpUrlConnection`在 Java 中，在 Java 中发出和发送请求......请参阅那些 SO 问题：[如何在 Java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java),[使用 java.net.URLConnection 来触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# ruby-on-rails - 控制器中的 Rails 嵌套属性检索

> ID：10314633
> 
> 赞同：3
> 
> 时间：2012-04-25T11:25:07.093
> 
> 标签：ruby-on-rails

这是我的代码的结构。我在每个 cresponse 中都附有一个视频，据我所知，我已经成功上传了它。当我需要在保存结构后对其进行转换时，问题就来了。我希望访问新更新的嵌套属性（请参阅课程控制器），但不知道如何去做。

非常感谢！

码头。

课程.rb

```
class Lesson < ActiveRecord::Base
    has_one :user
    has_many :comments, :dependent => :destroy
    has_many :cresponses, :dependent => :destroy
    acts_as_commentable

    accepts_nested_attributes_for :comments, :reject_if => lambda { |a| a[:body].blank? },         :allow_destroy => true
    accepts_nested_attributes_for :cresponses 
```

这是 cresponse.rb

```
class Cresponse < ActiveRecord::Base
   belongs_to :lesson
   attr_accessible :media, :accepted, :description, :user_id

   # NOTE: Comments belong to a user
   belongs_to :user, :polymorphic => true

   # Paperclip
   require 'paperclip'
   has_attached_file :media, 
   :url => "/system/:lesson_id/:class/:basename.:extension",
   :path => ":rails_root/public/system/:lesson_id/:class/:basename.:extension" 
```

这是我的 HTML 视图

```
<% @cresponse = @lesson.cresponses.build %>

<%= form_for @lesson, :html => { :multipart => true } do |f| %>

<td class="list_discussion" colspan="2">
    <div class="field">
     <%= f.fields_for :cresponses, @cresponse, :url => @cresponse, :html => { :multipart => true } do |builder| %>
                Upload : <%= builder.file_field :media %><br />
                Description : <%= builder.text_field :description %>
                <%= builder.hidden_field :user_id , :value => current_user.id %>

    <% end %>
    </div>
</td> 
```

这是lesson_controller.rb - 更新

```
def update
    @lesson = Lesson.find(params[:id])

    respond_to do |format|
  if @lesson.update_attributes(params[:lesson])

    **if @lesson.cresponses.** <-- not sure how to find the cresponse that I need to convert
      puts("Gotta convert this")
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:20:48.740

认为我应该回答我自己的问题..

基本上是为lesson_controller.rb

```
params[:lesson][:cresponses_attributes].values.each do |cr|
@cresponse_user_id = cr[:user_id]
@cresponse_description = cr[:description]
if cr[:media] 
    .... and so on 
```

# javascript - 如何更改地理编码 + senchatouch2 移动中的信息窗口大小？

> ID：10314635
> 
> 赞同：2
> 
> 时间：2012-04-25T11:25:10.317
> 
> 标签：javascript, sencha-touch, geocoding

我正在尝试更改的大小，`infowindow`但它没有改变。

```
var infowindow = new google.maps.InfoWindow({
    content: 'point1',            
    //setOptions:{maxWidth : 50,},
    //maxWidth : 50,
    //infoWindowOptions:{maxWidth : 50,},
}); 
```

上面的所有设置选项也不起作用。

请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:03:33.310

maxWidth 有效，您可以从地图文档中查看此示例： [infowindow with max size 200](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)

但我认为至少有大约 200px，我认为不可能使窗口大小小于那个

# c# - WF 4：以编程方式定义 SendReply 活动

> ID：10314640
> 
> 赞同：0
> 
> 时间：2012-04-25T11:25:47.073
> 
> 标签：c#, c#-4.0, workflow-foundation-4

我正在尝试在 Windows 工作流基础 4 上定义 SendReply 活动。我正在使用以下代码

```
 SendReply reply = new SendReply();
        ResponseParameter = new Variable<string>("ResponseParameter");
        reply.Content = new SendParametersContent { Parameters = { "out1", new InArgument<string>(ResonseParameter) } }; 
```

我在这一行得到以下错误：“”out1”，新的InArgument（“ResonseParameter”）”

集合初始值设定项的最佳重载 Add 方法 'System.Collections.Generic.ICollection>.Add(System.Collections.Generic.KeyValuePair)' 有一些无效参数

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:30:28.343

`Parameters`是字典，所以你需要使用字典初始化器，而不是列表初始化器。换句话说，使用*两组*花括号：

```
reply.Content = new SendParametersContent { 
    Parameters = { 
        { "out1", new InArgument<string>(ResonseParameter) } 
    }
}; 
```

# java - JNI - 多线程

> ID：10314645
> 
> 赞同：11
> 
> 时间：2012-04-25T11:25:54.153
> 
> 标签：java, c++, multithreading, java-native-interface

我有一个用于从 C 调用的 Java 函数的 JNI 包装器......我试图从不同的线程调用一些方法，但在尝试获取 JNIEnv 指针的新副本时出现错误......我的代码m using is below 并在每个方法中调用：

```
 JNIEnv* GetJniEnvHandle(){
        ThreadInfo();
        JNIEnv *envLoc; 
        //if(Thread::CurrentThread->IsBackground || Thread::CurrentThread->IsThreadPoolThread)  
        jint envRes = vm->GetEnv((void**)&envLoc, JNI_VERSION_1_4);
        if(envRes == JNI_OK){
            if(ThreadId != Thread::CurrentThread->ManagedThreadId)
                jint res = vm->AttachCurrentThread((void**)&envLoc, NULL);
        }else{          
            Log("Error obtaining JNIEnv* handle");  
        }
        return envLoc;
    } 
```

JVM 已经被实例化，并且这个（和其他方法）在从主/初始线程调用时运行。当我获得 envRes 的值时，它在子线程中为 -2。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T11:39:39.200

请参阅章节的[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html)`Attaching to the VM`。

在使用任何 JNI 函数之前，您需要`AttachCurrentThread()`为每个本机线程调用至少一次。
在 Java 中创建的线程已经附加。
因此，每当`GetEnv`呼叫失败时，我都是您的示例`AttachCurrentThread()`，您应该没问题。或者确保在创建子线程时将其附加到 VM。

# logging - Autofac 2.6.1 AOP 拦截

> ID：10314653
> 
> 赞同：1
> 
> 时间：2012-04-25T11:26:13.330
> 
> 标签：logging, aop, autofac, interception

伙计们，有没有人成功地将 AOP 拦截与最新版本的 Autofac 一起使用。我能找到的大多数早期拦截示例都依赖于 AutofacContrib.DynamicProxy2，现在看来它已经过时了。谢谢迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:43:09.527

AutofacContrib.DynamicProxy2 正在工作，是的，该空间没有太多活动。有几个具体的问题是开放的，但它们是具体的。

[http://code.google.com/p/autofac/issues/detail?id=359](http://code.google.com/p/autofac/issues/detail?id=359)

[http://code.google.com/p/autofac/issues/detail?id=355](http://code.google.com/p/autofac/issues/detail?id=355)

在 2.6.1 中使用拦截时，您是否遇到过任何具体问题？

# php - 用户保存（更新）PDO

> ID：10314655
> 
> 赞同：1
> 
> 时间：2012-04-25T11:26:33.653
> 
> 标签：php, pdo

```
public function save(User $user_object)
{
    $data = array();

    $data[] = $user_object->username;
    $data[] = $user_object->email;
    $data[] = $user_object->password;

    if (is_null($user_object->id)) {
        $data[] = $user_object->salt;
        $data[] = time();
        $sth = $this->db->prepare("INSERT INTO users (username, email, password, salt, created) VALUES (?, ?, ?, ?, ?)");  
        $sth->execute($data);
    } else {
        //Update User
    }
} 
```

正如您所看到的，如果没有 id，就会有一个插入，如果有一个 ID，就会有一个更新。但是我不确定 PDO 中的 UPDATE 语句会是什么样子，我想推入所有数据即在 ID = $user_object->id 的数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:51:11.770

没有“PDO 中的 UPDATE 语句”。只有通常的 SQL UPDATE 查询。PDO 没有自己的 SQL。它只是一个向数据库服务器发送 SQL 查询的 API。

因此，只需使用占位符编写常用 SQL

```
UPDATE users SET username=?, email=?, password=?, salt=? WHERE id=? 
```

# php - 在三列而不是一列中排序数据

> ID：10314663
> 
> 赞同：1
> 
> 时间：2012-04-25T11:27:18.160
> 
> 标签：php, row

目前，使用下面的代码，我的数据如下所示：

[http://img27.imageshack.us/img27/8083/29769986.jpg](http://img27.imageshack.us/img27/8083/29769986.jpg)

但我希望它像这样显示：

[http://img259.imageshack.us/img259/3233/24033830.jpg](http://img259.imageshack.us/img259/3233/24033830.jpg)

显示的数据的代码，就像它在第一张图片上一样，是：

```
<div id="content">
  <?php foreach ($categories as $category) { ?>
  <div class="manufacturer-list">
    <div class="manufacturer-heading"><?php echo $category['name']; ?><a id="<?php echo $category['name']; ?>"></a></div>
    <div class="manufacturer-content">
      <?php if ($category['manufacturer']) { ?>
      <?php for ($i = 0; $i < count($category['manufacturer']);) { ?>
      <ul>
        <?php $j = $i + ceil(count($category['manufacturer']) / 4); ?>
        <?php for (; $i < $j; $i++) { ?>
        <?php if (isset($category['manufacturer'][$i])) { ?>
        <li><a href="<?php echo $category['manufacturer'][$i]['href']; ?>"><?php echo $category['manufacturer'][$i]['name']; ?></a></li>
        <?php } ?>
        <?php } ?>
      </ul>
      <?php } ?>
      <?php } ?>
    </div>
  </div>
  <?php } ?>
</div> 
```

我为了得到“HTC”文本下的“Hewlett-Packard”文本，我已将“/4”更改为“/1”，但我不知道如何使数据显示为三列（像第二张图片），而不是现在的一张（如第一张图片所示）。

提前致谢。

**编辑：**我真正需要的是对这段代码进行计数和计算：

```
<?php foreach ($categories as $category) { ?>
.
.
.
<?php } ?> 
```

所以它需要计算类别的数量，进行计算，并将代码呈现为三列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:52:10.470

试试这个。

```
<div id="content">
<div class="content-column">
  <?php 
    $cols = 3; // Change to columns needed.
    $catcount = count($categories);
    $catpercol = ceil($catcount / $cols);
    $c = 0;
    foreach ($categories as $category) { 
      if ( $c == $catpercol ) {
        $c = 0;
        print "</div><div class='content-column'>";
      }
 ?>
  <div class="manufacturer-list">
    <div class="manufacturer-heading"><?php echo $category['name']; ?><a id="<?php echo $category['name']; ?>"></a></div>
    <div class="manufacturer-content">
      <?php if ($category['manufacturer']) { ?>
      <?php for ($i = 0; $i < count($category['manufacturer']);) { ?>
      <ul>
        <?php $j = $i + ceil(count($category['manufacturer']) / 4); ?>
        <?php for (; $i < $j; $i++) { ?>
        <?php if (isset($category['manufacturer'][$i])) { ?>
        <li><a href="<?php echo $category['manufacturer'][$i]['href']; ?>"><?php echo $category['manufacturer'][$i]['name']; ?></a></li>
        <?php } ?>
        <?php } ?>
      </ul>
      <?php } ?>
      <?php } ?>
    </div>
  </div>
  <?php $c++; } ?>
</div>
</div> 
```

添加`.content-column { float: left; width: 33.33333%; }`到您的 CSS。

详细信息： `$cols = 3;`使您能够设置所需的列数（注意：您可能需要相应地更改 CSS）。

`$catcount = count($categories);`为您提供即将呈现的类别总数。

`$catpercol = ceil($catcount / $cols);`将该总数平均划分为所需的列数，最后一列的项目最终少于其他列。

`$c = 0;`是你的柜台。它在外部 foreach 循环结束时增加。

在循环中，`$c`检查它是否与`$catpercol`数字匹配，如果匹配，则关闭当前父 div 并创建一个新 div。您最终会得到与需要列一样多的父 div。只需添加适当的 CSS 以使它们彼此并排显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:37:09.203

我认为可以通过 html/css 创建三列布局，而无需更改您的 PHP 代码。只需使用`float:left; width: 33%`. 由于边距和边框，您还可以对宽度属性使用绝对值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:38:04.847

了解以下代码，根据您的要求，代码只是根据您给定的屏幕截图给出实现所需的提示 [http://img259.imageshack.us/img259/3233/24033830.jpg](http://img259.imageshack.us/img259/3233/24033830.jpg)

```
echo "<table>";
echo "<tr>";

$i = 1;

do{

  // column range
  $range = 3;

  echo "<td>" . $i;

  if( $i % $range == 0 ){
  echo "</tr>";
  echo "<tr>";
  }

  echo "</td>";

  $i++;

}while( $i <= 10 );

echo "</tr>";
echo "</table>"; 
```

希望对你有帮助

# oracle - 如何找到两个时间戳列之间的差异

> ID：10314664
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:27:18.393
> 
> 标签：oracle, date-arithmetic

`Empid`我有表名记录，它在数字列中具有以下列，`dat`在时间戳中

具有以下值

```
empid    dat
======   ====
101      4/9/2012 9:48:54 AM
101      4/9/2012 9:36:28 AM
101      4/9/2012 6:16:28 PM
101      4/10/2012 9:33:48 AM
101      4/10/2012 12:36:28 PM
101      4/10/2012 8:36:12 PM
101      4/11/2012 9:36:28 AM
101      4/11/2012 4:36:22 PM 
```

这里我需要显示以下列，

`empid`,`min(dat)`作为开始,`max(dat)`作为结束和`difference(max(dat)-min(dat)`每一天

这里存在 3 个不同的日期，因此它应该返回 3 条记录以及上述列。

请给出一些方法来获得这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:30:00.753

只需减去它们：`max(dat) - min(dat)`

```
SELECT empid,
       min(dat) as strt,
       max(dat) as end,
       max(dat) - min(dat) as diff
FROM the_table
GROUP BY empid; 
```

如果您想按天而不是 empid 进行分组，请使用这个：

```
select trunc(dat),
       min(dat) as strt,
       max(dat) as end,
       max(dat) - min(dat) as diff       
from the_table
group by trunc(dat) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:53:03.007

Oracle 中的日期算术非常简单：两个日期之间的差作为天数返回。小于一天的值将返回为 *decimals"。也就是说，75 分钟是 1.25 小时而不是 1.15。如果你想要它作为小时和分钟，你需要使用[间隔](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions103.htm)。

内部查询计算每个员工每天的最小和最大数据之间的差异，并将其转换为 DAY 间隔。外部查询从该间隔中提取 HOUR 和 MINUTES。

```
select empid
       , tday
       , sdt
       , edt
       , extract(hour from diff) diff_hours
       , extract (minute from diff) diff_minutes
from (
    select empid
           , trunc(dat) tday
           , min(dat) sdt
           , max(dat) edt
           , numtodsinterval(max(dat) - min(dat), 'DAY') diff
    from t42
    group by empid, trunc(dat)
) 
```

# web-services - 通过soap向webservice发出请求并获得响应经典asp

> ID：10314669
> 
> 赞同：4
> 
> 时间：2012-04-25T11:27:43.817
> 
> 标签：web-services, asp-classic

我在以下链接有网络服务：http: [//abc.com/asmx](http://abc.com/asmx)

我已使用以下代码向 webservice getcustomers 发出请求：

```
<%
DIM PostData, strStatus, strRetVal, postUrl

PostData = _
"<?xml version=""1.0"" encoding=""utf-8""?>" &_
"<soap:Envelope xmlns:env=""http://www.w3.org/2001/XMLSchema-instance"" &_
"xmlns:xsd='http://www.w3.org/2001/XMLSchema'" &_
"xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">" &_
  "<soap:Body>" &_
  " <getCustomer xmlns=""http://3dcart.com/"">" &_
  "<storeUrl>www.abc.stores.com/</storeUrl>" &_
  "<userKey>sdfsf</userKey>" &_
  "<batchSize>1</batchSize>" &_
  "<startNum>1</startNum>" &_
   "<customersFilter>firstname=John</customersFilter>"&_ 
    "<callBackURL></callBackURL>"&_ 
    "</getCustomer>"&_
     "</soap:Body>" &_
"</soap:Envelope>"

response.write("req=" & Server.HTMLEncode(PostData) & "<br/>len=" & len(PostData))
postUrl = "http://abc.com/cart.asmx?op=getCustomer"
Set xmlHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
xmlHTTP.open "POST", postUrl, false
xmlHTTP.setRequestHeader "Content-Type", "text/xml; charset=utf-8" 
'xmlHTTP.setRequestHeader "SOAPAction", "http://AvailReceive/AvailRq"
xmlHTTP.send PostData
strStatus = xmlHTTP.Status
strRetval = xmlHTTP.responseText
set xmlHTTP = nothing
response.write("<br/>") 
response.write("status=" & strStatus & "<br/>resp=" & strRetval)
%> 
```

但我收到错误：resp=soap:ReceiverServer 无法处理请求。---> 'http' 是一个意外的标记。期待空白。第 1 行，位置 163。

你能告诉我为什么会出现这个错误，解决方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T22:13:47.277

是的：

您收到 500 错误（“预期空白”）的原因是您的消息格式错误。您在 xml 消息中有几个 xmlns 声明，并且由于 vbscript 中的错误，它们之间没有空格。结果是无效的 XML，服务器因此返回错误。

还：

*   您实际上不需要前缀`env`和`xsd`消息中的名称空间声明。它们从不使用。
*   您也不需要`soap`前缀。您可以只设置默认的 XML 命名空间。
*   您可以对 xmlns 声明使用单引号。这可以使代码更具可读性。
*   您可以在 xml 消息中插入换行符和空格。这也可以使代码更具可读性，特别是出站消息的代码。

使用这些建议的更改，以下是一些正常工作的代码：

```
Dim msg, strStatus, strRetVal, postUrl

msg = "<?xml version='1.0' encoding='utf-8'?>" &_
         "<Envelope xmlns='http://schemas.xmlsoap.org/soap/envelope/'>" & VbCrLf &_
         "  <Body>" & VbCrLf &_
         "    <getCustomer xmlns='http://abc.com/'>" & VbCrLf &_
         "      <storeUrl>www.abc.com/</storeUrl>" & VbCrLf &_
         "      <userKey>345</userKey>" & VbCrLf &_
         "      <batchSize>1</batchSize>" & VbCrLf &_
         "      <startNum>1</startNum>" & VbCrLf &_
         "      <customersFilter>firstname=John</customersFilter>"& VbCrLf &_
         "      <callBackURL></callBackURL>"& VbCrLf &_
         "    </getCustomer>" & VbCrLf &_
         "  </Body>" & VbCrLf &_
         "</Envelope>"

Response.write("req=" & Server.HTMLEncode(msg) & "<br/>len=" & len(msg))

postUrl = "http://abc.com/cart.asmx?op=getCustomer"

Set xmlHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
xmlHTTP.open "POST", postUrl, false
xmlHTTP.setRequestHeader "Content-Type", "text/xml; charset=utf-8"
'xmlHTTP.setRequestHeader "SOAPAction", "http://AvailReceive/AvailRq"
xmlHTTP.send msg

strStatus = xmlHTTP.Status
strRetval = xmlHTTP.responseText
set xmlHTTP = nothing
Response.write("<br/>")
Response.write("status=" & strStatus & "<br/>resp=" & strRetval) 
```

但是……这段代码在 .ASMX 脚本中发现了一个运行时错误。

> resp=尝试从存储中获取数据时出错。技术描述：无法解析远程名称：'www.abc.com'

如果我修改传出消息以将主机名指定为`abc.com`而不是`www.abc.com`，那么我会得到一个看起来合理的响应。

# actionscript-3 - Flash Builder 调试器错误：Flash builder 无法连接到正在运行的应用程序

> ID：10314673
> 
> 赞同：2
> 
> 时间：2012-04-25T11:28:06.277
> 
> 标签：actionscript-3, flex4, flash-builder

我正在尝试一个简单的事件处理代码。我在事件的动作脚本代码行上应用了断点。我想查看调试窗口以检查生成了哪个事件。它没有显示任何错误，但是每当我单击调试按钮时，我都会遇到以下问题

> Flash Builder 调试器无法连接到正在运行的应用程序。确保这件事：
> 
> 1.  对于浏览器内应用程序，您正在运行 Flash Player 的调试器版本。
> 2.  对于移动设备上的网络调试，您需要与设备建立可靠的网络连接，并且您的计算机防火墙上的端口 7935 已打开。

我的项目在显示所需输出的浏览器中正确运行，但它显示我启动失败的对话框并出现上述错误。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:14:08.220

当上述方法不起作用时，您可以尝试另一件事对我有用 - 在项目属性的 Flex 编译器中，取消勾选生成 HTML 包装文件，应用它，然后再次勾选并再次应用。似乎以某种方式清理/重置项目，而“清理项目”没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:09:36.480

尝试在任务管理器中关闭“adl.exe”，发现旧的adl.exe占用了7935端口，flashplayer无法创建新的。

我就是这样解决的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:38:48.663

它发生了很多次，但您可以通过 4 种方式解决它 1）清理项目并尝试。2）关闭flex builder并重新打开它。试试看，如果这不起作用，则选择 3 选项 3）更改您的工作区并将该项目导入其中，或者最好创建新的并在其中进行更改，有时工作区会损坏，因此会发生... 4) 如果上述 3 选项比重新安装 Flex builder 不起作用，请确保正确卸载 flex builder。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T14:55:20.213

我正是那个症状。空白浏览器窗口，57% 冻结 2 分钟和相同的错误消息。

问题是我的 javascript 中的一个错误。像往常一样，它只是默默地中止它正在做的任何事情。结果，SWF 从未启动，调试器无法连接到正在运行的程序。

因此，如果浏览器窗口保持空白，则可能是 javascript 错误。显示 javascript 控制台以查看发生了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-20T10:34:24.307

当我遇到这个问题时，我必须做的是重新安装 adobe flash debugger version for firefox，Flash 可以在调试模式下成功运行

**错误原因**：firefox 更新了 flash builder 版本，该版本由于某种原因不适用于 Adob​​e Flash Builder 4.6

您可以按照以下步骤让 Flash 应用程序在调试器模式下运行：

1) 转到[https://www.adobe.com/support/flashplayer/debug_downloads.html](https://www.adobe.com/support/flashplayer/debug_downloads.html)

2) 下载：`[Download the Flash Player content debugger for Firefox - NPAPI][1]`

3) 安装下载的可执行文件并将其安装在您拥有的任何版本的 Adob​​e Flash builder 上。

4) 重新启动 Flash Builder 并在调试器模式下运行应用程序并检查它是否工作。

# wcf - 无法使用 wcfTestClient.exe 打开 svc 文件

> ID：10314676
> 
> 赞同：0
> 
> 时间：2012-04-25T11:28:19.573
> 
> 标签：wcf, visual-studio-2010, web-services

我刚刚在我的网站上添加了 wcf 服务。web.config 看起来像这样：

```
<system.serviceModel>
<services>
  <service name="Realstuf.Service">

    <host>
      <baseAddresses>
        <add baseAddress = "http://ismyrealstuff/Services/" />
      </baseAddresses>
    </host>

    <!-- Service Endpoints -->
    <endpoint address ="http://ismyrealstuff/Services/Service.svc" binding="wsHttpBinding" contract="Realstuf.IService" behaviorConfiguration="FirstServiceBehaviour"/>

    <!-- Metadata Endpoints -->
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="FirstServiceBehaviour">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

添加了一个svc文件，并在app_code目录下添加了service.cs和Iservice.cs文件。未找到 Assemblyinfo.cs 文件。

当我尝试在 wcftestclient 中打开 svc 文件时，生成了“无法添加服务”错误。错误详细信息说：

> 错误：无法读取 D:\Projects\IsMyRealStuf\IsMyRealStuffWeb\Services\Service.svc。无法将文件 D:\Projects\IsMyRealStuf\IsMyRealStuffWeb\Services\Service.svc 作为程序集加载。查看 FusionLogs 了解更多信息。无法加载文件或程序集 'file:///D:\Projects\IsMyRealStuf\IsMyRealStuffWeb\Services\Service.svc' 或其依赖项之一。该模块应包含程序集清单。

如果我添加任何 assemblyinfo.cs 文件，这是解决方案吗？那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:32:01.623

添加`http://ismyrealstuff/Services/Service.svc`为服务，而不是磁盘上的文件。

# android - div align 在 android textview 上不起作用

> ID：10314677
> 
> 赞同：0
> 
> 时间：2012-04-25T11:28:22.777
> 
> 标签：android, alignment

我正在尝试在 android textview 中使用 div align to right 但由于某种原因它不起作用。

```
<string name="Avot">
<![CDATA[
<div align="right">
 my text ....
<br />     
</div>     
]]>
</string> 
```

请不要建议我使用 webview，因为它通常不支持希伯来语提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:01:18.923

字符串资源仅支持`<b>`、`<i>`和`<u>`标签。`Html.fromHtml()`不支持`<div>`标签上的属性。

# jsp - 通过jsp页面中的href链接传递数据时如何隐藏url

> ID：10314679
> 
> 赞同：1
> 
> 时间：2012-04-25T11:28:45.967
> 
> 标签：jsp

单击链接时，如何将数据从一个 JSP 传递到另一个 JSP `href`。那时我需要将数据隐藏在`url`.

```
<table  id="results" class="ex2 headQ"  width="550px" >
        <%
            for (int i = 0; i < list.size(); i++) {
        %>
        <tr></tr>

        <tr class="mycolor">  
            <%
                Query studentDetailsDTO = (Query) list.get(i);
                out.println("<td class='divClass'><a href=''>" +studentDetailsDTO.getTitle()+"</a></td>");
            %>
        </tr>

        <tr>  
            <%
                out.println("<td class='wrapword'> " + studentDetailsDTO.getQuestion() + "</td>");
            %>
        </tr>
        <%
            }
        %>
</table> 
```

# c - 我可以在任何系统上使用 GPU 作为 GPGPU

> ID：10314680
> 
> 赞同：0
> 
> 时间：2012-04-25T11:28:47.947
> 
> 标签：c, linux, gcc, x86-64, gpgpu

我希望将系统的 GPU 用作 GPGPU。这台机器是远程的，我没有管理权限，而且我对它的驱动程序一无所知。我所知道的是它有一个 Matrox VGA 卡。我可以将 C 代码和 gcc 编译器用作 GPGPU，还是需要某种驱动程序？或者我可以只使用 OpenGL 并扭曲逻辑以适应我的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:26:55.850

使用 OpenGL 没有简单的方法可以做到这一点。如果您知道显卡支持 GPGPU 功能，这将很容易做到。即 CUDA、OpenCL 或 AMD 流。然后，您可以使用其中一个 API 编写使用 GPU 进行计算的程序。为此，您将需要相应的 SDK。但是，即使使用这些 API，使用 GPU 进行复杂计算也并非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:59:37.930

**一些 Matrox 视频卡支持 OpenGL 和/或 DirectX，因此您可以通过使用OpenGL/GLSL**或**DirectX/HLSL**编写的着色器来完成您想做的事情。

检查您的视频卡的规格。

警告：这些卡并不知道有特别好的 GPU。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T18:46:15.213

使用显卡的 OpenCL/CUDA/Stream 功能需要公开该功能的驱动程序。除此之外，较旧的卡（例如 ATI X800 系列）没有有效执行 GPGPU 所需的硬件，因此无法用于此类目的。

我怀疑 Matrox VGA 卡是否支持任何 GPGPU。

# c++ - 用户输入（cin） - 默认值

> ID：10314682
> 
> 赞同：6
> 
> 时间：2012-04-25T11:28:55.013
> 
> 标签：c++, visual-c++

在要求用户输入时，我不知道如何使用“默认值”。我希望用户能够只按 Enter 并获取默认值。考虑下面的代码，你能帮我吗？

```
int number;
cout << "Please give a number [default = 20]: ";
cin >> number;

if(???) {
// The user hasn't given any input, he/she has just 
// pressed Enter
number = 20;

}
while(!cin) {

// Error handling goes here
// ...
}
cout << "The number is: " << number << endl; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T11:48:59.600

用于[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)从 中读取一行文本`std::cin`。如果该行为空，请使用您的默认值。否则，使用 a[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)将给定的字符串转换为数字。如果此转换失败，将使用默认值。

这是一个示例程序：

```
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

int main()
{
    std::cout << "Please give a number [default = 20]: ";

    int number = 20;
    std::string input;
    std::getline( std::cin, input );
    if ( !input.empty() ) {
        std::istringstream stream( input );
        stream >> number;
    }

    std::cout << number;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-25T11:49:45.237

这可以替代已接受的答案。我想说`std::getline`的是有点矫枉过正。

```
#include <iostream>

int main() {
    int number = 0;

    if (std::cin.peek() == '\n') { //check if next character is newline
        number = 20; //and assign the default
    } else if (!(std::cin >> number)) { //be sure to handle invalid input
        std::cout << "Invalid input.\n";
        //error handling
    }

    std::cout << "Number: " << number << '\n';    
} 
```

这是一个具有三种不同运行和输入的[实时示例。](http://coliru.stacked-crooked.com/a/000e3acc53b0f8a3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:35:59.340

```
if(!cin)
   cout << "No number was given.";
else
   cout << "Number " << cin << " was given."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:49:14.767

我很想将该行作为字符串读取`getline()`，然后您（可以说）对转换过程有更多控制权：

```
int number(20);
string numStr;
cout << "Please give a number [default = " << number << "]: ";
getline(cin, numStr);
number = ( numStr.empty() ) ? number : strtol( numStr.c_str(), NULL, 0);
cout << number << endl; 
```

# java - imagick 使用 im4java 在 java 中将 png 转换为 jpg

> ID：10314684
> 
> 赞同：3
> 
> 时间：2012-04-25T11:29:05.590
> 
> 标签：java, imagick, im4java

我需要从PNG转换为JPG。

但是，iMagick 为其添加了黑色背景。

我看到了这个针对 PHP 的[问题](https://stackoverflow.com/questions/6610739/php-imagick-convert-png-to-jpg)，并尝试为 java 编写同样的问题，如下所示：

```
// create the a jpg image
ConvertCmd cmd = new ConvertCmd();
// create the operation, add images and operators/options
IMOperation op = new IMOperation();
op.addImage(brandingURL);
op.format("JPEG");
op.composite();
op.background("white");
op.addImage(imageLocation);
//op.transparent();
// execute the operation
cmd.run(op); 
```

但是，图像仍然带有黑色背景。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T13:31:01.647

I had to write the code like this:

```
 Info imageInfo = new Info(brandingURL, true);
 IMOperation op = new IMOperation();
 op.addImage(brandingURL);
 op.size(imageInfo.getImageWidth(), imageInfo.getImageHeight());
 op.addImage("xc:white", "c://write//test.jpeg");
 op.addImage("c://write//test.jpeg");
 CompositeCmd composite = new CompositeCmd();
 composite.run(op); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:07:38.533

调用 to`background`不应该是必要的。根据[文档](http://www.imagemagick.org/script/command-line-options.php?ImageMagick=2tq973nkgi1iqdi5a65kmjfv32)，默认背景是白色的，这对我来说可能是你的一张图片有一个黑色背景，覆盖/阻止了默认（可能是那个`brandingURL`？）。

引用 ImageMagick 的上述链接文档：

> -背景颜色
> 
> 设置背景颜色。
> 
> 使用 -fill 选项下描述的格式指定颜色。默认背景颜色（如果未指定或在图像中未找到）为白色。

如果您使用它正是因为其中一个图像*确实*指定了（黑色）背景，我建议您将`background`调用移至添加该图片之前或操作结束（不确定 ImageMagick 是如何操作的）

# html - 站点更新页面显示旧内容后

> ID：10314685
> 
> 赞同：0
> 
> 时间：2012-04-25T11:29:05.693
> 
> 标签：html, flash

有没有办法使任何 swf 更改后，网站会重新打开。问题是，如果我上传新的 swf，并使用 Chrome 浏览器进入网站，它会向我显示旧内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:01:21.580

在你加载你的 swf 的地方，包括一个每一个变化的参数，比如：（在 asp.net c# 中）

```
<object data="shockwave.swf?<%= DateTime.Now.Ticks %>"></object> 
```

这应该始终确保您的 swf 每次都加载新的，而不是缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:25:17.330

而不是每次尝试`CTRL`+`F5`刷新页面时都清除整个浏览器历史记录。

这应该重新加载所有缓存的内容（您的 swf）。

# javascript - 动态添加jQuery的滑块

> ID：10314690
> 
> 赞同：3
> 
> 时间：2012-04-25T11:29:24.077
> 
> 标签：javascript, jquery

我有一个简单的上传表单来允许多次上传，并且对于每个选择的文件，它需要创建一个新的滑块。

我已经创建了一个新的滑块，它们每个都有单独的 ID。我遇到的唯一问题是我希望滑块在每次滑动或更改时将其值输入到文本框中。它适用于普通滑块，不是动态添加的，但动态添加的滑块不会更新它们各自的文本框。

这是添加滑块和文本框的代码：

```
var pagesslider = $('<div id="pages'+(x + 1)+'" class="pages"></div><input name="anewslider" id="pages-box'+(x + 1)+'" type="text" onchange="$(\'#pages'+(x + 1)+'\').slider({ value: this.value });updatevalues();updatepages(\''+x+'\');" value="1" />');
$('#pages-holder').append(pagesslider);

addSlider('pages'+(x + 1)); 
```

addSlider 函数如下：

```
function addSlider(element) {
var slider = $('.pages').slider({
    range: "min",
    value: 1,
    min: 1,
    max: 1000,

    slide: function(event, ui) {
        slide(element, ui.value);
    },
    change: function(event, ui) { 
        slide(element, ui.value);
    }
});
$(element).val(slider.slider('value'));
} 
```

而滑动功能只是对文本框进行简单的值更改。

```
$(element).attr('value', changevalue); 
```

当您在文本框中手动键入一个数字时，滑块的位置会更新 - 这样就可以正常工作。但反过来也行不通。我猜这是因为页面加载时滑块没有加载，但我不知道修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:53:58.527

动态添加任何新 jquery 滑块的最简单方法是：

```
var fieldvalue = '<input type="range" name="loan_term" class="textbox" id="my_new_slider" min="12" max="36" step="12" value="24" />';

$('#divelement').html(fieldvalue);

$("#my_new_slider").rangeinput({
     progress: true
}); 
```

我希望它可以帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:37:29.547

所以伙计们.. 如果你得到正确的 ID，它会有所帮助。

# windows - 查找在日期之间创建/访问/修改的文件，批处理脚本

> ID：10314693
> 
> 赞同：1
> 
> 时间：2012-04-25T11:29:28.013
> 
> 标签：windows, command-line, batch-file, timestamp

我需要生成在 Windows 系统上分别创建、修改和访问的所有文件的列表。

我在`forfiles`这里找到了命令[http://technet.microsoft.com/sv-se/library/cc753551(v=ws.10).aspx](http://technet.microsoft.com/sv-se/library/cc753551(v=ws.10).aspx)但显然这不使用创建和访问的时间戳，我也需要那些（在单独的列表）。

我也研究过使用该`dir`命令，但我只在帮助部分中找到了对排序而不是过滤的引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T03:14:39.540

你的问题有一些不清楚的细节，所以我做了一些假设。

下面的批处理文件创建三个单独的文本文件：created.txt、modified.txt 和accessed.txt，以及当前文件夹中的文件列表；每个列表都有 YYYYMMDDHHMMSS 格式的相应日期，后跟文件名，因此可以轻松处理。

```
@echo off
setlocal DisableDelayedExpansion
for %%f in (created modified accessed) do if exist %%f.txt del %%f.txt
set "folder=%CD:~2%"
for /F "skip=1 tokens=1-3*" %%a in (
    '"wmic datafile where (path='%folder:\=\\%\\') get InstallDate, LastModified, 

LastAccessed, Name"'
                                   ) do (
   for /F "delims=." %%A in ("%%a") do echo %%A %%d>> created.txt
   for /F "delims=." %%B in ("%%b") do echo %%B %%d>> modified.txt
   for /F "delims=." %%C in ("%%c") do echo %%C %%d>> accessed.txt
)

rem Process each list this way:
for /F "tokens=1*" %%a in (created.txt) do echo %%a - %%b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:05:52.903

在主题中还有“日期之间” :) 那怎么样？

forfiles 不允许放置 2 个日期条件（“+”和“-”）。

我也对 wmic 中不相等的日期条件有疑问。

例如：

```
wmic datafile where (path='%folder:\=\\\\%\\\\' and lastmodified ^> "20120713" and lastmodified ^< "20120714") get Name 
```

什么都不返回（我需要在 '<' 和 '>' 之前使用转义符 ('^') 来运行命令）。

```
wmic datafile where (path='%folder:\=\\\\%\\\\' and lastmodified ^> "20120713") get Name 
```

仅返回之后修改的文件`20120714000000`（以 wmic 表示法）。

# tfs - 如何将源代码从一台 TFS 服务器迁移到另一台？

> ID：10314697
> 
> 赞同：2
> 
> 时间：2012-04-25T11:29:57.677
> 
> 标签：tfs

如果我们在一个域中托管一些代码，我们有一个 TFS 2005（我认为）。现在我们希望客户自己托管代码，并且他们购买了新版本的 TFS 2010。我如何将代码从旧服务器迁移到新服务器。在这一点上，我们不关心历史，因为如果发生紧急情况，我们将使旧系统运行至少一年。

到目前为止，我所做的如下：

1.  在新版本中创建master分支，将旧版本复制到新版本中没有问题。
2.  从 master 分支创建了一个开发分支。
3.  现在我想将开发代码从旧的 tfs 迁移到新的 tfs，这似乎很复杂。

我最初认为这就像在新 TFS 中检查整个开发分支一样简单，删除所有文件并粘贴旧开发分支中的文件。但事实并非如此。

也许我可以使用一个简单的工具来代替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:57:48.493

我知道你说过你不关心历史，但如果你能免费得到它，你会接受吗？最好的办法是升级或导入团队项目集合。如果您备份所有 2005 数据库并在 TFS 2010 数据层上恢复它们​​，则可以运行“ [tfsconfig.exe import](http://msdn.microsoft.com/en-us/library/ff407080.aspx) ”。这是将数据从一台服务器获取到另一台服务器的最受支持的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:25:59.237

在新服务器中执行以下步骤：

1.  创建主分支，签入。
2.  在主分支位置的新服务器的本地工作区中从旧服务器复制源
3.  签入以将源提交到新服务器。
4.  使用 Master 分支的最新变更集从 Master 分支创建 Dev 分支。这会将 Master 分支的整个结构复制到 Dev 分支。
5.  退出 Visual Studio
6.  使用 Windows 资源管理器，删除新服务器本地工作区中 Dev 分支的所有内容。
7.  在 Dev 分支位置的新服务器的本地工作区中复制 Dev 分支的旧服务器的源。
8.  使用 Team Foundation Power Tools 的**TFPT.EXE ONLINE**命令模拟离线/在线切换，该切换将创建 Dev 分支的新内容（从旧服务器复制的文件）的挂起更改。小心你拥有你希望它在 TFS 中的一切。该命令类似于`tfpt.exe online /adds /deletes /modify /recurse .`（检查命令的帮助）
9.  报到。

然后，您将拥有两个分支和您想要的内容之间的关系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T11:36:40.660

看看[TFS 集成平台](http://tfsintegration.codeplex.com/)

# html - 表单内的IE9 tabbable div不提交？

> ID：10314704
> 
> 赞同：3
> 
> 时间：2012-04-25T11:30:15.823
> 
> 标签：html, internet-explorer, accessibility

在表单中创建可选项卡的 div 时，大多数浏览器不会在 div 获得焦点并按下 enter 时提交表单。

见这个例子：http: [//jsfiddle.net/SBfKs/3/](http://jsfiddle.net/SBfKs/3/)

IE9 出于某种原因。有谁知道如何在 IE9 中覆盖它以使其在浏览器中保持一致？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:07:03.407

有趣的是，我不知道 IE 在这种情况下会提交表单。

您可以捕获按键（IE 在 上提交`keydown`）并取消默认行为（如果在`<div>`. 如果`<div>`是您要添加关注的唯一元素，这应该可以解决问题（jQuery 解决方案）：

```
$(document).ready(function() {
    var $form = $('#foo');
    $form.on('keydown', 'div', function(e) {
        code = (e.keyCode ? e.keyCode : e.which);
        if (code === 13) {
            e.preventDefault();
        }
    });
}); 
```

[在这里提琴](http://jsfiddle.net/SBfKs/9/)

# c# - 如何使用动态 LINQ 库构建嵌套查询

> ID：10314708
> 
> 赞同：4
> 
> 时间：2012-04-25T11:30:27.600
> 
> 标签：c#, linq, .net-3.5, dynamic-linq

如何使用 Dynamic Linq 库 (System.Linq.Dynamic) 构建以下 LINQ 查询？

```
var roles = rolesCollection.Where(r => r.AssignedUsers.Where(u => u.Name.FirstName == "Patrick").Count() > 0); 
```

rolesCollection 和 AssignedUsers 是实现 IEnumerable 接口的集合。

我正在考虑做这样的事情：

```
rolesCollection.Where("AssignedUsers.Where(\"Name.FirstName == 'Patrick'\").Count() > 0");
```

但这不起作用。引发带有消息“没有适用的聚合方法 'Where' 存在”的 ParseException。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T11:38:49.807

试试这个：

```
rolesCollection
    .Where("AssignedUsers.Where(Name.FirstName == \"Patrick\").Any()"); 
```

或者

```
var userName = "Patrick";
rolesCollection
    .Where("AssignedUsers.Where(Name.FirstName == @0).Any()", userName); 
```

# c# - 元素上的 Selenium webdriver 操作将在错误的位置执行

> ID：10314710
> 
> 赞同：0
> 
> 时间：2012-04-25T11:30:48.813
> 
> 标签：c#, firefox, selenium, location, webdriver

我正在尝试使用 selenium 构建我的第一个测试并遇到问题。

我正在寻找一个元素，没问题。我可以点击它，获取元素中的文本......一切都很好。但是双击该元素是行不通的。Selenium 在错误的位置单击。我对这种情况做了一个截图：

[截屏](http://i.stack.imgur.com/49ovb.jpg)

要查找行，我使用 xpath 并在单元格中搜索文本，但此文本是唯一的（我检查过）

```
private readonly string _identityPath = ".//td[.= 'All Employees']";

...

mainPage.FindElement(By.XPath(_identityPath)).Click(); //Works(dotted box)

Actions builder = new Actions(mainPage);

IAction doubleClick = builder.DoubleClick(mainPage.FindElement(By.XPath(_identityPath))).Build();
doubleClick.Perform(); //wrong location/element

/*
Actions action = new Actions(mainPage);
action.DoubleClick(mainPage.FindElement(By.XPath(_identityPath))); 
action.Perform(); *///wrong location/element 
```

这个页面在一个 iframe 中，而网格是一个 dojo 组件......也许问题来自那里。有什么想法有什么问题吗？我不知道这是从哪里来的。：/

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:08:55.747

动作生成器不起作用是常见问题。使用 JavaScript 应该会有所帮助 - 在此线程中找到答案：

[Selenium 2/Webdriver - 如何双击表格行（打开一个新窗口）](https://stackoverflow.com/questions/3982442/selenium-2-webdriver-how-to-double-click-a-table-row-which-opens-a-new-window)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T18:00:01.717

如果元素在 iframe 中，则需要切换到该 iframe 才能与元素交互。

# android - Android上“提醒”的推荐方式类似于iPhone的图标徽章

> ID：10314714
> 
> 赞同：0
> 
> 时间：2012-04-25T11:31:47.167
> 
> 标签：android, widget

由于 Android 没有直接的图标徽章，我想使用应用小部件作为提醒。

这背后的想法是，如果用户想提醒她/他自己在我的应用程序中执行某个任务，则应用程序小部件应该显示它，否则应用程序小部件不在屏幕上（如果可能的话）或小部件只是从本质上表明一切正常。

理想情况下，我希望有一个应用程序（不是小部件），它只显示一个小部件作为提醒。

这是执行此操作的“推荐”方式，还是我只需要制作一个改变其外观并忘记应用程序的小部件？

**我真的可以让应用小部件在应用中出现和消失吗？**

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:37:46.250

> 我真的可以让应用小部件在应用中出现和消失吗？

如果“消失”是指“除了占用空间什么都不画”，当然。使用`RemoteViews`具有透明内容的 ，然后使用 更新应用小部件`RemoteViews`。

就个人而言，我不喜欢这样的用户体验，我建议您在没有提醒时允许用户在“不可见”或“默认”应用小部件内容之间进行选择。

# php - 为什么 json_encode 添加反斜杠？

> ID：10314715
> 
> 赞同：60
> 
> 时间：2012-04-25T11:31:47.333
> 
> 标签：php, json

我已经使用`json_encode`了很长时间，到目前为止我还没有遇到任何问题。现在我正在使用上传脚本，并尝试在文件上传后返回一些 JSON 数据。

我有以下代码：

```
print_r($result); // <-- This is an associative array
echo json_encode($result); // <-- this returns valid JSON 
```

这给了我以下结果：

```
// print_r result
Array
(
    [logo_url] => http://mysite.com/uploads/gallery/7f/3b/f65ab8165d_logo.jpeg
    [img_id] => 54
    [feedback] => Array
        (
            [message] => File uploaded
            [success] => 1
        )

)

// Echo result
{"logo_url":"http:\/\/mysite.com\/uploads\/gallery\/7f\/3b\/f65ab8165d_logo.jpeg","img_id":"54","feedback":{"message":"File uploaded","success":true}} 
```

谁能告诉我为什么要`json_encode`加斜杠？

**更新**

@Quentin 说 and 之间发生了一些事情`json_encode`，`.parseJSON`他是对的。

做一个`alert(data.toSource());`给我的结果是：

```
({response:"{\"logo_url\":\"http:\\/\\/storelocator.com\\/wp-content\\/uploads\\/gallery\\/7f\\/3b\\/71b9520cfc91a90afbdbbfc9d2b2239b_logo.jpeg\",\"img_id\":\"62\",\"feedback\":{\"message\":\"File uploaded\",\"success\":true}}", status:200}) 
```

这不是有效的 JSON。它还添加了`status:200`，我不知道这是从哪里来的。

可能是`Plupload bind`对我返回的数据有什么影响吗？

这是我的 js 脚本：

```
 uploader.bind('FileUploaded', function(up, file, data) {
    alert(data.toSource());
    $('#' + file.id + " b").html("100%");
  }); 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2016-07-06T17:01:30.753

只需使用“JSON_UNESCAPED_SLASHES”选项（在 5.4 版之后添加）。

```
json_encode($array,JSON_UNESCAPED_SLASHES); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-08-11T14:26:32.907

我刚刚在我的一些脚本中也遇到了这个问题，它似乎正在发生，因为我正在将 json_encode 应用于包装在另一个数组中的数组，该数组也是 json 编码的。如果您在创建数据的脚本中有多个 foreach 循环，这很容易做到。始终在最后应用 json_encode。

这就是发生的事情。如果你这样做：

```
$data[] = json_encode(['test' => 'one', 'test' => '2']);
$data[] = json_encode(['test' => 'two', 'test' => 'four']);
echo json_encode($data); 
```

结果是：

```
["{\"test\":\"2\"}","{\"test\":\"four\"}"] 
```

所以，你真正需要做的是：

```
$data[] = ['test' => 'one', 'test' => '2'];
$data[] = ['test' => 'two', 'test' => 'four'];
echo json_encode($data); 
```

这将返回

```
[{"test":"2"},{"test":"four"}] 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-04-25T11:34:41.910

> 谁能告诉我为什么 json_encode 添加斜杠？

`<`当嵌入到 HTML 脚本元素中时，正斜杠字符可能会导致问题（当前面有 a 时，它会触发“脚本元素结尾”的 SGML 规则）。作为预防措施，他们被逃脱了。

> 因为当我尝试使用 jQuery.parseJSON(response); 在我的 js 脚本中，它返回 null。所以我猜它与斜线有关。

它没有。在 JSON`"/"`中`"\/"`是等价的。

您在问题中列出的 JSON 是有效的（您可以使用[jsonlint](http://jsonlint.com/)对其进行测试）。`json_encode`您的问题很可能与和之间发生的事情有关`parseJSON`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-16T06:34:01.420

发生这种情况是因为 JSON 格式使用 ""(Quotes) 并且这些引号之间的任何内容都是有用的信息（键或数据）。

假设您的数据是：`He said "This is how it is done".` 那么实际数据应该是这样的`"He said \"This is how it is done\"."`。

这可确保将其`\"`视为`"(Quotation mark)`JSON 格式而不是 JSON 格式。这被称为`escape character`。

这通常发生在尝试对已经 JSON 编码的数据进行编码时，这是我见过的一种常见方式。

尝试这个

`$arr = ['This is a sample','This is also a "sample"']; echo json_encode($arr);`

输出：

```
["This is a sample","This is also a \"sample\""] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-30T23:50:44.703

确保您的 php 脚本具有正确的标头，否则它将添加斜杠标头（'Content-Type: application/json'）;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-29T15:47:27.430

我有一个非常相似的问题，我有一个准备发布的数组。在我的帖子功能中，我有这个：

```
json = JSON.stringfy(json); 
```

这里的细节是我在 laravel 中使用刀片来构建一个三视图表单，所以我可以前后移动，我在每个后退和前进按钮验证之间，当我在不重新加载页面的情况下返回表单时json 被反斜杠填充。我`console.log(json)`在每次验证中都意识到 json 被视为字符串而不是对象。

总之，我不应该`json = JSON.stringfy(json)`分配，而是将其分配给另一个变量。

```
var aux = JSON.stringfy(json); 
```

这样我把 json 作为一个对象，而不是一个字符串。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-25T11:39:57.617

`json_encode`将始终添加斜杠。

[在此处](http://in2.php.net/manual/en/function.json-encode.php)查看手册中的一些示例

这是因为如果有一些字符需要转义，那么它们就会产生问题。

要使用 json，请解析您的 json 以确保删除斜杠

好吧，无论您是否删除斜杠，eval 都会毫无问题地解析 json。

```
<?php
$array = array('url'=>'http://mysite.com/uploads/gallery/7f/3b/f65ab8165d_logo.jpeg','id'=>54);
?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
var x = jQuery.parseJSON('<?php echo json_encode($array);?>');
alert(x);
</script> 
```

这是我的代码，我能够解析 JSON。

检查您的代码可能是您在解析 JSON 时遗漏了什么

# iphone - 透明度/Alpha 和 MKOverlayView 问题

> ID：10314717
> 
> 赞同：2
> 
> 时间：2012-04-25T11:31:52.440
> 
> 标签：iphone, ios, mkmapview, alpha, mkoverlay

在与 MKOverlayViews 和 MKMapKit 的许多问题作斗争之后，我发现自己又遇到了一个问题。我正在使用 MKOverlayPathView 子类在屏幕上绘制一个奇异的大覆盖（它目前覆盖伦敦）。在那个叠加层中有很多彩色方块供争论：

```
- (void)drawMapRect:(MKMapRect)mapRect
          zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)context
{
    int size = 0;
    min = 0;
    max = 0;
    CGFloat alpha = 0.4f;
    int recursionLevel = 4;
    QuadNodeOverlay *quadNodeOverlay = (QuadNodeOverlay *)self.overlay;

    Cluster *clusters = quadtree_clusters(quadNodeOverlay.quadTree, recursionLevel, &size);

    if (clusteringMethod == 1) {
        /* Draw paths/squares */
        CGPathRef *paths = [self createPaths:clusters size:size];
        for (int i = 0; i < size; i++) {
            CGPathRef path = paths[i];
            Cluster cluster = clusters[i];
            CGContextBeginPath(context);
            CGContextAddPath(context, path);
            //CGContextSetFillColorWithColor(context, colors[cluster.depth]);
            CGColorRef gradientColor = [self newColor:cluster.count];
            CGContextSetFillColorWithColor(context, gradientColor);
            CGContextDrawPath(context, kCGPathFillStroke);
            CGColorRelease(gradientColor);
            CGPathRelease(path);
        }

        free(paths);
    } else if (clusteringMethod == 2) {
       // CUT
    }

    [self setAlpha:alpha];
} 
```

上面的代码不完整，但为这个问题提供了坚实的基础。无论我要绘制多少个正方形，该代码都可以正常工作并且执行得非常快。我遇到的问题是低于某个点，我没有绘制此叠加层；我在包含地图的视图控制器中管理它：

```
- (void)mapView:(MKMapView *)map regionDidChangeAnimated:(BOOL)animated {
    self.annotations = [locationServer itemsForMapRegion:map.region withMapView:map maxCount:100];
    NSLog(@"There are like %d cards dude.",[self.annotations count]);
    if ( [self.annotations count] > 40) {
        [mapView removeAnnotations:annotations];
        // Cluster
        if (![[mapView overlays] containsObject:quadClusters]) {
            [mapView addOverlay:quadClusters];
        }
    } else {
        // Don't
        [mapView removeOverlay:quadClusters];

        // Add pins.
        [mapView removeAnnotations:annotations];
        [mapView addAnnotations:annotations];
    }
} 
```

同样，这段代码现在可以很好地满足我的目的。问题是当我放大到不显示集群的级别时，但是当我缩小时，单个注释是在我缩小覆盖层时呈现的，没有透明度。可见：

![Overlay Cluster 部分失去透明度/Alpha](../Images/b48df4af6c3004d8660ce144d1815df1.png)

作为脚注。从覆盖中删除 setAlpha 并修改绘制正方形的代码以读取：

```
 CGColorRef gradientColor = [self newColor:cluster.count];
        CGColorRef alphaGradientColor = CGColorCreateCopyWithAlpha(gradientColor, alpha);
        CGContextSetFillColorWithColor(context, alphaGradientColor); 
```

解决了这个问题，但是将 alpha 通道应用到整个覆盖层肯定会更有效。

# java - GWT中服务器端复选框的getvalue

> ID：10314723
> 
> 赞同：0
> 
> 时间：2012-04-25T11:32:25.927
> 
> 标签：java, gwt, gwt2

我正在使用 GWT。我有一个`chkBox`并且`fileupload`添加到`formPanel`.

formPanel.submit() 之后；

在服务器端

我想要的价值`chkbox`

所以

```
if (item.isFormField()) {
        if (item.getFieldName().equalsIgnoreCase("chkbox")) {
                        chkbox= Streams.asString(item.openStream());
                    }

                } 
```

什么时候，服务器`chkbox.getvalue`端`true`的值为**On**并且`chkbox.getValue`是`false` 我`null`在服务器端获取的值。

我需要的值，`chkbox`以便我可以**根据值对文件执行操作** `chkbox`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:55:44.870

[*“开”是未提供表单值*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/CheckBox.html#setFormValue%28java.lang.String%29)时复选框的默认值。

该值仅在选中该框时才会发送到服务器（没有该字段表示未选中）：[http ://www.w3.org/TR/html5/form-submission.html#constructing-form-data -放](http://www.w3.org/TR/html5/form-submission.html#constructing-form-data-set)

如果您*真的*想发送其他任何内容，请不要为您的复选框*命名*，而是使用[`Hidden`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Hidden.html)您`ValueChangeHandler`在`Checkbox`.

# android - Java/Android：如何在 Eclipse 中正确导入库？

> ID：10314724
> 
> 赞同：1
> 
> 时间：2012-04-25T11:32:26.770
> 
> 标签：android, eclipse, import

我正在开发一个 Android 项目，我需要导入一个名为 XOM 的 XML 库。我发现的唯一方法是右键单击项目名称-> 属性-> 库选项卡-> 单击“添加外部 Jar”。但这只是从它的原始路径引用它，当我编译应用程序并将其移动到我的手机时会发生什么？罐子会在那里吗？

可能是一个愚蠢的问题，如果是这样的话，对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:34:25.140

这样做很好，但我通常做的是创建一个名为的文件夹`lib`，然后从那里添加罐子。我发现这样可以更轻松地查看我的应用程序中有哪些罐子。

您原始方法的主要缺点是，如果该库的路径在外部意外更改了怎么办？那么你的程序将无法编译。最好将所有东西都放在一个地方以使事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:55:22.043

在您的根目录下创建一个名为“libs”的目录。你可以这样做，

*   右键单击 Eclipse 的 Package Explorer 窗口中的项目。
*   新建 -> 文件夹 -> 将“libs”作为文件夹名称
*   复制您的 jar 文件并将其粘贴到“libs”文件夹中
*   展开“libs”文件夹
*   右键单击您复制的 jar 文件 -> 构建路径 -> 添加到构建路径

而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:44:34.003

`.apk`只不过是文件的集合或压缩版本。它包含所有资源和编译的java文件。
因此，您不必担心包含您的库文件。如果您在 Eclipse 中为您的库设置了正确的路径，那么这些将包含在您的 apk 文件中。

# facebook - Facebook 无法获取部分用户的 /me/likes 数据

> ID：10314727
> 
> 赞同：0
> 
> 时间：2012-04-25T11:32:32.467
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

这是可以制作的最简单的应用程序：

```
<?php
include_once "inc/fb/facebook.php";
$facebook = new Facebook(array(
    'appId'     => 'xxx',
    'secret'    => 'yyy'
));
$user = $facebook->getUser();
var_dump( $facebook->api("/me/likes/") );
?>` 
```

作为回报，我应该得到一个用户已经喜欢的页面数组。问题是，它对某些用户不起作用。不知何故，在一个过程中，我发现了这个错误：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in (...)/fb/base_facebook.php on line 1039 
```

我试图通过以下方式强制获取令牌：

```
$access_token = $facebook->getAccessToken(); 
```

它为每个用户获取令牌，但仍然没有关于用户喜欢什么的表格。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:02:31.537

问题很简单：

```
$loginUrl = $facebook->getLoginUrl(array(
'scope'         => 'publish_stream,user_about_me',
'redirect_uri'  => $mySettings->app_url,
));
echo "<script> top.location.href='" . $loginUrl . "'</script>"; 
```

我忘记了范围内的 user_likes 权限。但对我来说奇怪的是 - 为什么它对大多数用户都有效？

# macos - 如何更改 shell 脚本中现有快捷方式的图标

> ID：10314733
> 
> 赞同：0
> 
> 时间：2012-04-25T11:32:43.743
> 
> 标签：macos, shell, icons, shortcuts

我已经使用 packagemaker 安装程序安装了我的 flash 应用程序。我使用 shell 脚本创建了到桌面的快捷方式。现在我想更改默认的快捷方式图标。请告诉我 shell 脚本来更改快捷方式图标。

MAC 操作系统 10.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:10:13.087

Mac OS X 没有“快捷方式文件”。它具有别名文件或符号链接（符号链接）。

我想您创建了一个符号链接，因为您是在 shell 中工作的。符号链接不能有自定义图标。他们几乎没有自己的真实数据或元数据。

我不知道如何从 shell 为别名文件（或任何其他文件）设置图标。我的第一个想法是 AppleScript，您可以通过`osascript`命令从 shell 中使用它。但我发现 Finder 的 AppleScript 支持不包括使用文件图标。有一个`icon family`类的定义，但它被标记为“NOT AVAILABLE YET”。

# windows-phone-7 - 从 web 浏览器获取 windows phone 'mango' 的响应

> ID：10314737
> 
> 赞同：1
> 
> 时间：2012-04-25T11:33:04.380
> 
> 标签：windows-phone-7, browser

我是我的应用程序，我想使用将使用 Wifi 的 Webbrowser，在 Webbrower 打开链接（task.URL）后，我想检查链接是否打开或失败的响应。我该怎么做这意味着得到回应？

```
WebBrowserTask task = new WebBrowserTask();
task.URL = "https://www.goggle.com/";
task.Show(); 
```

好心的帮助

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:46:34.167

通常，要捕获此使用 NavigationFailed 事件，如下所示：

```
void WebPage_Loaded(object sender, RoutedEventArgs e)
{
    this.webHome.Navigate(new Uri(www,UriKind.Absolute));
    this.webHome.NavigationFailed += webHome_NavigationFailed;

}

void webHome_NavigationFailed(object sender, System.Windows.Navigation.NavigationFailedEventArgs e)
{
    this.webHome.NavigateToString("No web page available.");
} 
```

# hadoop - Hadoop 文件大小说明

> ID：10314739
> 
> 赞同：0
> 
> 时间：2012-04-25T11:33:25.343
> 
> 标签：hadoop

我正在澄清有关使用 Hadoop 处理大约 200 万个大文件的问题。我有包含 200 万行的文件数据，我想将每行拆分为单个文件，将其复制到 Hadoop 文件系统中，并使用 Mahout 执行词频计算。Mahout 以分布式方式使用 map-reduce 计算。但是为此，假设我有一个包含 200 万行的文件，我想将每一行作为计算词频的文档。我最终将拥有一个目录，其中包含 200 万个文档，每个文档由一行组成。这是否会为 n 个文件创建 n 个映射，这里为该过程创建 200 万个映射。这需要大量的计算时间。是否有任何替代方法来表示文档以加快计算速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:05:52.997

200 万个文件对于 hadoop 来说是很多的。不仅如此 - 运行 200 万个任务将有大约 200 万秒的开销，这意味着几天的小型集群工作。我认为问题在于算法性质 - 如何以您将拥有适度数量的映射器的方式将您的计算映射到 map reduce 范式。请写几行关于您需要的任务，我可能会建议算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T10:28:56.170

Mahout 具有计算文本的 TF 和 IDF 的实现。检查 mahout 库，并将每一行拆分为一个文件在 hadoop map reduce 框架中并不是一个好主意。

# javascript - 从谷歌地方获取附近的位置并从结果中在谷歌地图上添加标记

> ID：10314741
> 
> 赞同：4
> 
> 时间：2012-04-25T11:33:36.227
> 
> 标签：javascript, google-maps-api-3, geolocation, google-places-api

编辑：已解决。问题代码下方的正确代码。

我无法让我的代码正常工作。我想要做的是使用地理位置来确定用户的位置。然后我想做一个搜索以从一个字符串中找到一些东西（在这种情况下，“Systembolaget”，半径为 2000，并在谷歌地图上显示结果。我在地图上得到了自己的位置，但我很难获得位置结果。

我究竟做错了什么？我没有太多的javascript经验，所以所有的帮助都是很好的帮助。

如果您想知道 cordova 脚本，这是必要的，因为我正在做一个 phonegap 应用程序。

```
<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script src="cordova-1.6.0.js"></script>
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=MYAPIKEY&sensor=true"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script type="text/javascript">
// Determine support for Geolocation and get location or give error
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(displayPosition, errorFunction);
} else {
    alert('It seems like Geolocation, which is required for this page, is not enabled in your browser. Please use a browser which supports it.');
}

// Success callback function
function displayPosition(pos) {
    var mylat = pos.coords.latitude;
    var mylong = pos.coords.longitude;
    //Load Google Map
    var latlng = new google.maps.LatLng(mylat, mylong);
    var myOptions = {
    zoom: 16,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

// Places
var request = {
    location: latlng,
    radius: '2000',
    name: ['Systembolaget']
};

var service = new google.maps.places.PlacesService(map);
service.search( request, callback );

function callback(results, status) 
{
    if (status == google.maps.places.PlacesServiceStatus.OK) 
    {
        for ( var i = 0; i < results.length; i++ ) 
        {
            var place = results[i];
            var loc = place.geometry.location;
            var marker = new google.maps.Marker
            ({
                position: new google.maps.LatLng(loc.Pa,loc.Qa)
            });
            marker.setMap(map);  
        }
    }
}

var marker = new google.maps.Marker({
     position: latlng, 
     map: map, 
     title:"You are here"
 });
}

// Error callback function
function errorFunction(pos) {
    alert('It seems like your browser or phone has blocked our access to viewing your location. Please enable this before trying again.');
}
</script>
</head>
<body>
        <div id="map_canvas"></div>
</body> 
```

解决了！正确的代码！

```
<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />

<title name="title"></title>

<link rel="stylesheet" type="text/css" href="style.css">
<script src="cordova-1.6.0.js"></script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script type="text/javascript">

// Determine support for Geolocation and get location or give error
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(displayPosition, errorFunction);
} else {
    alert('It seems like Geolocation, which is required for this page, is not enabled in your browser. Please use a browser which supports it.');
}

// Success callback function
function displayPosition(pos) {
    var mylat = pos.coords.latitude;
    var mylong = pos.coords.longitude;
    //Load Google Map
    var latlng = new google.maps.LatLng(mylat, mylong);
    var myOptions = {
    zoom: 16,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.HYBRID
};

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

// Places
var request = {
    location: latlng,
    radius: '20000',
    name: ['whatever']
};

var service = new google.maps.places.PlacesService(map);
service.search( request, callback );

function callback(results, status) 
{
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            var place = results[i];
            createMarker(results[i]);
            }
        }
    }

    function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
        map: map,
        position: place.geometry.location
        });
        }

var marker = new google.maps.Marker({
     position: latlng, 
     map: map, 
     title:"You're here"
 });

}

// Error callback function
function errorFunction(pos) {
    alert('It seems like your browser or phone has blocked our access to viewing your location. Please enable this before trying again.');
}
</script>
</head>
<body>
    <div id="map_canvas"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:05:11.393

很难给你具体的帮助，因为你还没有真正描述你是如何失败的。但我马上注意到的一件事是，您似乎试图加载 google.maps 脚本两次，`sensor`每次都包含不同的信息。在您的第一个 google.maps 脚本标记中，您包含必须不正确的文字文本*MYAPIKEY 。*如果您在变量中有一个真正的键，我会期望类似：

```
src="http://maps.googleapis.com/maps/api/js?key=" + MYAPIKEY + "&sensor=true" 
```

然后在您的第二个脚本标签中，您似乎正确加载了地点库，但是您的传感器标签设置为：`sensor-false`。您的第二个脚本标签对我来说似乎更正确，所以我建议删除第一个脚本标签作为开始。

从那里，您能否提供有关您的页面如何失败的更多详细信息以及指向该页面的链接？

一些额外的观察：

*   您最初的 if-else 看起来好像会调用该`displayPosition`函数，但其​​中的代码`displayPosition`不会加载谷歌地图；它只是创建一些变量，然后在函数结束时超出范围。
*   在`displayPosition`函数之外，您创建了一个新的 google Map 实例，但它引用`myOptions`了 ，此时代码中不再存在，因为它只存在于`displayPosition`函数范围内。

我建议将与地图创建相关的代码更改为：

```
var map = null;
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(displayPosition, errorFunction);
} else {
    alert('It seems like Geolocation, which is required for this page, is not enabled in your browser. Please use a browser which supports it.');
}

// Success callback function
function displayPosition(pos) {
    var mylat = pos.coords.latitude;
    var mylong = pos.coords.longitude;
    //Load Google Map
    var latlng = new google.maps.LatLng(mylat, mylong);
    var myOptions = {
        zoom: 16,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
} 
```

# android - 在 Android 设备上，如何防止点击地址启动地图应用程序？

> ID：10314742
> 
> 赞同：0
> 
> 时间：2012-04-25T11:33:52.177
> 
> 标签：android, google-maps, user-experience

我有一个显示 WebView 的应用程序，它显示的信息包括街道地址，例如“123 Main St., Citytown, NY”。但是，当点击这些地址中的任何一个时，它会短暂突出显示并触发启动谷歌地图应用程序的通常浏览器行为。

我想防止这种行为发生，因为某些地址不是可选择的。有什么我可以做的吗？

* * *

**更新：**

一位评论者要求我粘贴一个触发该行为的示例 HTML 片段。

```
<hgroup class="unit list_item_body">
  <h2 class="thick truncated heading">
    <a href="/locations/1234">Foobar</a>
  </h2>
  <h3 class="truncated subheading">
    123 East Market St., Charlottesville, VA, 22902
  </h3>
</hgroup> 
```

请注意，地址上没有链接。然而，点击地址会触发启动地图的行为。无论我是通过 WebView 访问站点还是查看站点本身，都会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:58:34.027

我想通了。此元标记将阻止浏览器控件劫持地址字符串：

```
<meta name="format-detection" content="address=no"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:56:18.760

看一眼[`WebViewClient.shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

```
webView.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        boolean shouldHandle = true;
        //Check if you want to override the loading of the URL and set shouldHandle accordingly
        return shouldHandle ;
    }
}); 
```

# c# - 在同一个 IIS 容器中托管 WCF Web 服务和 WCF Net.Tcp 服务？

> ID：10314743
> 
> 赞同：1
> 
> 时间：2012-04-25T11:33:54.423
> 
> 标签：c#, wcf, web-services, iis, nettcpbinding

我正在尝试构建一个系统，其中包括：

1.  集中式 IIS 组件
2.  用 .Net 编写的客户端应用程序
3.  第三方应用程序。

.Net 客户端应在启动时连接到 IIS 应用程序上的 WCF Net.Tcp 绑定，并将其自身注册为请求的使用者（回调）。

然后，第三方应用程序将对 IIS 服务器进行 Web 服务调用，该服务器会将请求分流给 .Net 客户端。

如何托管多个 WCF 服务 IIS？这可能吗？

我假设我必须将 web.config 中的服务实例化为端点，但我不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:17:49.217

您可以使用[托管在同一应用程序中的多个 SVC 文件，](http://msdn.microsoft.com/en-us/library/bb332338.aspx)也可以使用[MVC 样式的路由](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)来建立多个[`ServiceHosts`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx).

这是一个使用 web.config 和 SVC 文件[在 IIS 中托管 WCF 的 MSDN 示例。](http://msdn.microsoft.com/en-us/library/ms733766.aspx)

# magento - Magento - 在购物车前为产品设置折扣

> ID：10314744
> 
> 赞同：0
> 
> 时间：2012-04-25T11:33:58.583
> 
> 标签：magento, cart, discount

我是 magento 的新手，我正在开发一个允许用户选择并让他购买的产品具有 gfit 的模块。我的问题是，如何在结账时为特定产品设置折扣？我用过：我在事件的观察者中进行了修改

> checkout_cart_add_product_complete

.

```
$_cart_products = Mage::getModel("checkout/cart") -> getItems();

//foreache...
//if ...

$_cart_product->setDiscountAmount($realPrice-$giftPrice);
$_cart_product->setBaseDiscountAmount($realPrice-$giftPrice);
$_cart_product->save(); 
```

但它不工作谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:09:21.103

您不需要为此编写代码，只需进入管理员，您将看到促销选项卡，只需选择此选项，您可以从这里定义产品的促销规则

# android - 如果屏幕没有被触摸或在特定的时间间隔内保持不活动状态，那么做一些事情

> ID：10314745
> 
> 赞同：0
> 
> 时间：2012-04-25T11:33:59.840
> 
> 标签：android, touch

如果在特定时间间隔内没有触摸屏幕或保持不活动状态，我希望做某事（调用函数）。如何在 Android 中实现这一点？

有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:38:06.093

您可以在方法中向 UI 线程的处理程序发送延迟消息`onResume()`：

```
handler.sendEmptyMessageDelayed(SCREEN_INACTIVE_MSG, DELAY_MILIS); 
```

然后，在 onTouchEvent 中删除消息并再次插入：

```
handler.removeMessages(SCREEN_INACTIVE_MSG);
handler.sendEmptyMessageDelayed(SCREEN_INACTIVE_MSG, DELAY_MILIS); 
```

在您的处理程序中，覆盖`handleMessage()`方法来处理消息：

```
public void handleMessage (Message msg) {
    switch(msg.what) {
        case SCREEN_INACTIVE_MSG:
            handleIdleScreenMetohd();
            break;
    }
} 
```

此外，从`onPause()`.

这假设您的活动一直处于活动状态（未暂停等）。在您的应用程序之外处理屏幕不活动似乎是不可能的。

# facebook - 如何将 Flash 游戏添加到我的 Facebook APP

> ID：10314746
> 
> 赞同：0
> 
> 时间：2012-04-25T11:34:02.917
> 
> 标签：facebook, flash

我尝试将 Flash 游戏添加到我的 APP。

我查看了（可怕的）facebook 开发者网站。我发现的只是这个页面： [http ://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Freference %2Ffbml%2Fswf%2F&ei=e-CXT4SAMMfpOamGqb8G&usg=AFQjCNGCKaCIDbWs0PrItofyEIlR4MSasg](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http://developers.facebook.com/docs/reference/fbml/swf/&ei=e-CXT4SAMMfpOamGqb8G&usg=AFQjCNGCKaCIDbWs0PrItofyEIlR4MSasg)

但它说这将是遗留代码，我应该使用一种新方法......我不知道该方法是什么或在哪里可以找到它。

我尝试了这些行：

```
<embed type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://mywebsite.com/game.swf" /> 
```

和

```
<fb:swf swfsrc='http://mywebsite.com/game.swf' imgsrc='http://www.myurl.com/myflash.jpg' width='400′ height='300′ /> 
```

都失败了......我在这里很绝望，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:36:46.387

只需创建一个 iframe 应用程序。这意味着创建一个页面让您的 Flash 游戏自行运行，然后将 iframe 应用程序指向该 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T18:34:52.903

就像在[http://ugamesfree.com](http://ugamesfree.com)上一样 在 facebook 上创建一个画布应用程序。但请记住，您需要有 SSL 证书才能使用 iframe 和重定向。

# tfs - 在 TFS 中，分支的父子关系的方向很重要

> ID：10314747
> 
> 赞同：5
> 
> 时间：2012-04-25T11:34:05.790
> 
> 标签：tfs, branching-and-merging

分支之间父子关系的方向重要吗？父/子是否只是一个抽象概念，用于识别哪个是源哪个是目的地，或者是否存在只能在一个方向上执行的特定操作，因此，关系的方向很重要？

这里有一些背景信息来解释这个问题的原因..

我们最近实施了一个新的分支策略，并决定采用这个简单的设置：

```
Dev -------------------------------
          \
      Main >-----------------------
                  \
        Production >--------------- 
```

这似乎对我们有用，但我阅读的所有推荐指南都建议 Main 应该是根。因此，它应该看起来像这样：

```
 Dev  >-----------------------
          /
Main ------------------------------
                  \
        Production >--------------- 
```

这非常相似，但显然 Main 和 Dev 之间的父子关系是颠倒的。

如果我们以 Dev 为根，而 Main 为它的子，我们会给自己带来什么问题？我能看到的唯一问题是，如果我们从 main 中取出第二个 Dev 分支。它与 Main 的父子关系与另一个 Dev 分支相反，但我再次问这有什么意义？

感谢您的关注，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T20:18:01.567

**短期：**短期内告诉大家将 DEV 视为 MAIN 的子级，即使它在 TFS 中看起来像父级。

注意：您可以在 TFS 中重新设置 DEV 分支......如果您认为特定团队的概念术语和流程风险将大于更正 TFS 分支结构的风险，则可能应该这样做。

## **其他想法**

我将重申分支方向在技术上对 TFS 并不重要。但是要非常小心那些更容易混淆的人类。重要的是，每个在分支之间进行合并（或创建新分支）的人都清楚地了解分支层次结构并遵循您团队的官方术语和分支/合并过程。

**MAIN（又名 Root 或 Trunk 或 Ancestor 分支）：** 您可以任意指定任何分支为“Main”、“root”、“trunk”等分支。请记住，这些术语通常可以互换使用，特别是对于从不同公司雇用的新开发人员。只要每个进行合并和分支的人都知道您将 MAIN 分支视为团队的根/主干分支，那么您就可以了。如果你随便要求某人从根分支上发布一个新版本并且他们决定 root=DEV 分支，那么你就有问题了（即使你的分支图清楚地支持“根”分支是 DEV 的想法）。

**合并方向：** FI（从父级到子级的正向集成）和 RI（从子级到父级的反向集成）是用于描述合并方向的最常用术语。我订阅了 FIRI（“Fiery”）合并模式，以确保在 RI 合并到父级之前，父级中的所有更改都被 FI 合并到子级（解决所有冲突并根据需要进行测试）。这确实有助于保持父分支比子分支更稳定。这个想法对您的问题很重要，因为目前 FI 意味着从 DEV（父）到 MAIN（子）。如果您和所有分支/合并人员总是可以假装 DEV 是一个子分支，那么您可以说“在合并到 MAIN 分支之前你做了 FI 吗？”。同样，您团队的分支/合并公会可以明确声明“**重要：**在本指南（以及一般性讨论）中，始终将 DEV 分支视为 MAIN 的子项，即使在技术上是 TFS 中的父项（截至 2012 年 4 月 25 日）。” 然后所有语句都可以使用标准术语，而无需经常使用反向术语讨论 DEV 分支。

（如果您已经在团队中使用了其他术语，例如“合并”和“合并”，那没关系......只要包括新员工在内的每个人都清楚地理解这些术语的含义。（另请注意“向上”和“ down”的分支机构在不同的公司中以不同的方式绘制，因此该术语可能会引起混淆。）

**新分支：** 如果您的团队决定从 MAIN 创建一个新的 DEV_FeatureX 分支，那么它将是一个子分支。（TFS 强制每个分支只有一个父级......您目前不能是两个母亲所生的孩子:-)。）同样，如果您按版本分支（现在或以后），这些分支将是 MAIN 分支的新子级. 随着时间的推移，这将

请记住，计算机犯错误的频率远低于人类。享受！-*泽潘*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:09:59.603

方向与分支无关。一个给定的分支可以“基于”另一个分支，然后创建关系，但您可以从任一方向合并完全相同的好处。

唯一的区别是在其他地方，这是一个很大的区别。

让我们来看看你的第一个图表，其中 Production 来自 Main，而 Main 来自 Dev：

*   您将能够有效地从 Dev 合并到 Main、Main 到 Dev、Main 到 Prod 以及 Prod 到 Main。
*   **但是**从 Dev 合并到 Prod 或从 Prod 合并到 Dev 将是一个真正的痛苦。

为什么 ？因为当源分支和目标分支**直接相关**时，您将受益于**三向合并**。如果源分支和目标分支是间接相关的（例如 Dev 和 Prod），那么 TFS 只能进行双向合并，这会导致更多的冲突。

 **如果您想了解有关三向合并的更多信息，请参阅[维基百科链接](http://en.wikipedia.org/wiki/Merge_%28revision_control%29)

**总结一下：**两张图在 TFS 方面是相同的，这完全取决于您选择哪种分支模型。**

# php - 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::__construct() [ datetime.--c

> ID：10314749
> 
> 赞同：0
> 
> 时间：2012-04-25T11:34:14.240
> 
> 标签：php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:36:41.537

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:36:46.207

您需要在将结果用作变量之前获取结果！

```
$bdate = new DateTime(mysql_result($result, 0, 0)); 
```

见[mysql_result()](http://php.net/mysql_result)

# eclipse - 将 Eclipse 中的现有 Maven 导入为 WTP

> ID：10314750
> 
> 赞同：5
> 
> 时间：2012-04-25T11:34:16.347
> 
> 标签：eclipse, maven, m2eclipse, eclipse-wtp

我必须重新安装我的 Eclipse，现在我必须将所有现有项目导入新的工作区。Eclipse 以前的版本是 Galileo，这个版本是 Indigo。插件已安装，但在“导入现有 Maven 项目”之后，项目未显示为 WTP（WebApp 项目）...

我需要其他东西来设置或配置吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:39:36.203

是的，您需要安装其他软件。“Eclipse WTP 的 Maven 集成”

见这里：[http ://marketplace.eclipse.org/node/96737](http://marketplace.eclipse.org/node/96737)

更新站点：http: [//download.jboss.org/jbosstools/updates/m2eclipse-wtp/](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T16:43:48.330

您可以将 maven 项目转换为 Eclipse WTP 项目。之后，您只需将该项目作为任何其他项目导入。

要转换的命令是：

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

# delphi - Delphi将数组变体转换为字符串

> ID：10314757
> 
> 赞同：5
> 
> 时间：2012-04-25T11:34:41.120
> 
> 标签：delphi

在我的 delphi 程序中，我正在与 web 服务进行通信。

在 WSDL 导入时，我创建了以下函数-

```
 function  call(const sessionId: WideString; const resourcePath: WideString;
 const args: Variant): Variant; stdcall; 
```

现在当我在我的代码中调用它时，我想看看返回值是什么

```
var
p:WideString;
v:variant;
VarArray:variant;
begin

   //varArray := VarArrayCreate([0,50],varVariant);

   v := (httprio1 as  Mtest).call(a,'giftgit.gift', '28184');

   //p := VarArrayget(V,[1] ) ;
   p := vartostr(v[1]); 
```

我在最后一行收到此错误

无法将类型（数组变体）的变体转换为类型（字符串）

我尝试使用 varArray 但同样的问题。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T17:40:41.290

该错误表明 V[1] 是一个变体数组。您可以检查它是否确实与`VarIsArray(V[1])`

我有几种方法可以帮助您显示它：

```
 TPsVarDataType = (
    vdtDefault, // varEmpty
    vdtNull,
    vdtSmallint,
    vdtInteger,
    vdtSingle,
    vdtDouble,
    vdtCurrency,
    vdtDate,
    vdtOleStr,  // varOleStr, varString, varUString
    vdtDispatch,
    vdtError,
    vdtBoolean,
    vdtVariant,
    vdtUnknown,
    vdtDecimal,
    vdtUndefined,
    vdtShortint,
    vdtByte,
    vdtWord,
    vdtLongWord,
    vdtInt64,
  {$IFDEF D2009_OR_LATER}
    vdtUInt64,
  {$ENDIF}
    vdtUnsupported
    {Usupported types
    VT_UI8  = 21,
    VT_INT  = 22,
    VT_UINT = 23,
    VT_VOID = 24,
    VT_HRESULT  = 25,
    VT_PTR  = 26,
    VT_SAFEARRAY    = 27,
    VT_CARRAY   = 28,
    VT_USERDEFINED  = 29,
    VT_LPSTR    = 30,
    VT_LPWSTR   = 31,
    VT_RECORD   = 36,
    VT_FILETIME = 64,
    VT_BLOB = 65,
    VT_STREAM   = 66,
    VT_STORAGE  = 67,
    VT_STREAMED_OBJECT  = 68,
    VT_STORED_OBJECT    = 69,
    VT_BLOB_OBJECT  = 70,
    VT_CF   = 71,
    VT_CLSID    = 72,
    VT_VERSIONED_STREAM = 73,
    VT_BSTR_BLOB    = 0xfff,
    VT_VECTOR   = 0x1000,
    VT_ARRAY    = 0x2000,
    VT_BYREF    = 0x4000,
    VT_RESERVED = 0x8000,
    VT_ILLEGAL  = 0xffff,
    VT_ILLEGALMASKED    = 0xfff,
    VT_TYPEMASK = 0xfff
    }
  );

const
  SPsVarDataTypes: array [TPsVarDataType] of string  = (
    'Default',
    'Null',
    'Smallint',
    'Integer',
    'Single',
    'Double',
    'Currency',
    'Date',
    'OleStr',
    'Dispatch',
    'Error',
    'Boolean',
    'Variant',
    'Unknown',
    'Decimal',
    'Undefined',
    'Shortint',
    'Byte',
    'Word',
    'LongWord',
    'Int64',
  {$IFDEF D2009_OR_LATER}
    'UInt64',
  {$ENDIF}
    'Unsupported'
  );

const
  SPsVarDataTypes: array [TPsVarDataType] of string  = (
    'Default',
    'Null',
    'Smallint',
    'Integer',
    'Single',
    'Double',
    'Currency',
    'Date',
    'OleStr',
    'Dispatch',
    'Error',
    'Boolean',
    'Variant',
    'Unknown',
    'Decimal',
    'Undefined',
    'Shortint',
    'Byte',
    'Word',
    'LongWord',
    'Int64',
  {$IFDEF D2009_OR_LATER}
    'UInt64',
  {$ENDIF}
    'Unsupported'
  );

  SPsVarArray = 'Array of %s';
  SPsVarByRef = '%s (Reference)';

function VariantToStr(V: Variant; IncludeType: Boolean = False): string;
begin
  if VarIsArray(V) then
    Result := VarArrayToStr(V)
  else
    case VarType(V) of
      varError:
        Result := Format('Error($%x)', [TVarData(v).VError]);
      varNull:
        Result := '#NULL';
      varEmpty:
        Result := '#EMPTY';
      varDate:
        Result := FormatDateTime(ShortDateFormat + ' ' + LongTimeFormat + '.zzz', V)
    else
      Result := VarToStr(V);
    end;
  if IncludeType then
    Result := Format('%s{%s}', [Result, VarTypeToString(VarType(V))]);
end;

function VarArrayToStr(v: Variant; Delimiter: Char = #0; LineDelimiter: Char =
    #13): string;
var
  i,j,d: Integer;
  line: string;
begin
  if VarIsArray(v) then
  begin
    if Delimiter = #0 then
      Delimiter := ListSeparator;
    if LineDelimiter = #0 then
      LineDelimiter := ListSeparator;
    d := VarArrayDimCount(v);
    // The elements
    case d of
      1:
      begin
        Result := '';
        for i := VarArrayLowBound(v,1) to VarArrayHighBound(v,1) do
          Result := Result + VariantToStr(v[i]) + Delimiter;
        if Length(Result) > 0 then
          SetLength(Result, Length(Result)-1);
      end;
      2:
      begin
        Result := '';
        if (VarArrayLowBound(v,1) <= VarArrayHighBound(v,1)) and
          (VarArrayLowBound(v,2) <= VarArrayHighBound(v,2)) then
        begin
          for i := VarArrayLowBound(v,1) to VarArrayHighBound(v,1) do
          begin
            line := '';
            for j := VarArrayLowBound(v,2) to VarArrayHighBound(v,2) do
              line := line + VariantToStr(v[i,j]) + Delimiter;
            if Length(Result) > 0 then
              SetLength(line, Length(line)-1);
            Result := Result + LineDelimiter + Format('[%s]', [line]);
          end;
        end;
      end // 2
    else
      Result := 'Array Dim=' + IntToStr(d);
    end;
    Result := Format('[%s]', [Result]);
  end
  else
    Result := VarToStr(v);
end;

function VarTypeToString(varType: Integer): string;
var
  T: TPsVarDataType;
begin
  if varType = varString then
    Result := 'string'
  else
  begin
    T := VarTypeToPsVarDataType(varType);
    if T = vdtUnSupported then
      Result := IntToStr(varType and varTypeMask)
    else
      Result := SPsVarDataTypes[T];
  end;
  if (varType and varArray) <> 0 then
    Result := Format(SPsVarArray,[Result]);

  if (varType and varByRef) <> 0  then
    Result := Format(SPsVarByRef,[Result]);
end;

function VarTypeToPsVarDataType(Value: Word): TPsVarDataType;
var
  v: Word;
begin
  debugEnter('VarTypeToPsVarDataType');
  v := Value and varTypeMask;
  debugInt('Value', v);
  if v < Word(vdtUnsupported) then
    result := TPsVarDataType(v)
  else if v = varString then
    result := vdtOleStr
  {$IFDEF D2009_OR_LATER}
  else if v = varUString then
    result := vdtOleStr
  {$ENDIF}
  else
    result := vdtUnsupported;
  debugLeave;
end;

function PsVarDataTypeToVarType(Value: TPsVarDataType; IsArray: Boolean =
    False): Word;
begin
  if Value = vdtUnsupported then
    Result := varEmpty
  else
  begin
    Result := Word(Value);
    if IsArray then
      Result := Result or varArray;
  end;
end; 
```

更新 2012-09-20：好像我错过了字符串常量。添加。2012 年 11 月 2 日更新：TPsVarDataType、VarTypeToPsVarDataType() 和 VarTypeToPsVarDataType()；

# linux - 是否可以从一点创建多个独立的持久 VPN 连接？

> ID：10314761
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:34:49.540
> 
> 标签：linux, vpn

我们有几个网络。我们的网络完全由我们控制，并且我们有 Amazon EC2 服务器。其他网络不受我们控制，我们无法认真更改其配置。这些网络包含自己的物理服务器。

我们需要在我们的服务器和其他服务器之间创建几个持久的 VPN 连接。同时，我们连接的服务器应该无法访问其网络外计算机上的信息。

比如我有服务器A。有服务器B、C、D。每台服务器都在独立的网络中，通过VPN连接到A。

*   B 应该无权访问 C 和 D。
*   C 不应访问 B 和 D。
*   D 应该无权访问 B 和 C。
*   A 应该可以访问 B、C 和 D。

是否可以创建这样的配置？关于我应该查看和使用的技术有什么有用的想法吗？也许您有一些此类配置的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:14:41.283

当然可以创建这样的配置。您正在创建一个简单的星形拓扑，其中节点 A 作为各种网络之间的路由器。在这个位置，您可以在节点 A 上实施防火墙和路由规则，以限制各种网络之间的通信。

您可以使用多种工具来实施 VPN。我偏爱[OpenVPN](http://openvpn.net/)，它可能已为您的发行版预先打包。

[OpenVPN HOWTO](http://openvpn.net/index.php/open-source/documentation/howto.html)是一个很好的起点，它包含有关在同一台机器上设置多个 OpenVPN 实例的信息（这是创建多个不同网络的方法）。

# ios - 如何更改 iOS UITextField 中的行数

> ID：10314764
> 
> 赞同：0
> 
> 时间：2012-04-25T11:35:00.273
> 
> 标签：ios, xcode, uitextfield

如何以编程方式和图形方式更改文本编辑中的行数（在界面生成器中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:43:18.517

你没有。文本*字段*具有单行文本。

如果您需要多行文本，则应使用该`UITextView`组件。

# spotify - Xcode iPhone SDK (5.x) - CocoaLibSpotify iOS，加载和查看播放列表

> ID：10314769
> 
> 赞同：2
> 
> 时间：2012-04-25T11:35:38.177
> 
> 标签：spotify

iOS Spotify API。

我阅读了该示例的[文档](https://developer.spotify.com/technologies/libspotify/docs/11.1.60/browse_8c-example.html "文件")`browse.m`，该文档似乎包含我正在寻找的内容。

但我真的不知道如何使用它。

当播放列表的列表被调用时，我如何将其显示在一个`UITableView`？

如果我可以开始比赛，我可能会弄清楚并完成我想要的。

所以基本上我需要一个“kickstart”帮助代码，我会在路上（语音图）。

（顺便说一句，是的，我有所需的 AppKey.c 并且我成功#imported API）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:09:05.023

请参阅 CocoaLibSpotify 中包含的示例项目，了解如何与库交互的总体思路。

至于显示播放列表，播放列表存储在一个中`NSArray`，并且每个都有一个`name`属性等，因此您可以将它们放入表格视图中，就像您在 iOS SDK 中的任何其他数据列表一样。

# asp.net-mvc - 是否可以使用 MongoDB 作为后端创建单页应用程序？

> ID：10314770
> 
> 赞同：1
> 
> 时间：2012-04-25T11:35:38.747
> 
> 标签：asp.net-mvc, mongodb, asp.net-web-api

我正在尝试使用即将推出的 Visual Studio 中的新单页应用程序项目，我想知道是否可以使用 MongoDB 后端为 DBContext 创建应用程序。似乎 upshot.js 库在很大程度上依赖于此（对于 inst 的元数据，对于 DBDataController，......）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:15:46.137

不幸的是，MongoDB 没有实体框架的包装器/支持，也没有[DBContext 接口](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)。MongoDB 不能用作实体框架的后端。见[这里](https://stackoverflow.com/questions/6798304/entity-framework-and-mongodb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:41:16.547

您不能将 MongoDB 与实体一起使用。但是对于一页应用程序，您可以使用[MongoRepository](http://mongorepository.codeplex.com/) 非常快速地做一些事情，而不是花时间在 mongoDb 暗示上。

# sql - 这个sql表定义和关系对吗？

> ID：10314771
> 
> 赞同：0
> 
> 时间：2012-04-25T11:35:39.767
> 
> 标签：sql, database-design

问题不大，但有时逻辑会变得困难，所以同样存在。我必须将客户数据保存到 sql 表中。客户记录在 Excel 表格中看起来像这样。合同期限为 6 个月或 12 个月。每个客户在一个月后分期付款。每个月有两个记录分期付款金额和佣金金额。excel表有这样的记录数据

```
SR,
CustomerID,
Customername,
CompanyName,
relationType,
ContractStartDate,
ContractDuration,
TotalInstallment,
Comission,
paymentMode,
JanuaryInstallment,
JanuaryCommision,
...
DecemberMonthInstallment,
DecemberMonthCommision 
```

为此，我在 sql 中定义了这些表： ![在此处输入图像描述](../Images/a3b62e66386c928f2434c5f61c1141d4.png)

这些表格是否正确？而且我对月份名称记录感到困惑，我是否将其放在分期付款表中，例如（`firstInstallmentMonth`，，）`firstinstallment``firstinstallmentCommision`

迷茫了，请各位前辈指点一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:44:39.463

我认为您想将分期付款表标准化为类似

```
Table INSTALMENT
    contract_id     -- FK to contract table
    date            -- used to specify month and date
    instalment      -- the instalment amount
    commission      -- the commission amount
    primary key (contract_id, date) 
```

您可以浏览您的 excel 表并为每期创建一个条目（注意，这是伪代码）：

```
insert into INSTALMENT 
   (contract_id, to_date('01-01-year', 'DD-MM-YYYY'), JanuaryInstalment, JanuaryCommission)
insert into INSTALMENT 
   (contract_id, to_date('01-02-year', 'DD-MM-YYYY'), FebruaryInstalment, FebruaryCommission)
insert into INSTALMENT 
   (contract_id, to_date('01-03-year', 'DD-MM-YYYY'), MarchInstalment, MarchCommission) 
```

等等

EDIT2：添加了伪`to_date`日期格式以避免混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:39:12.507

我建议阅读： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

我会将月份放在“分期付款”表中，因为每个分期付款都有不同的月份

# jsf - Primefaces数据网格加载后回调事件

> ID：10314773
> 
> 赞同：0
> 
> 时间：2012-04-25T11:35:40.527
> 
> 标签：jsf, datagrid, callback, primefaces

我正在使用 Primefaces 2，Datagrid 组件。在 Primefaces 的用户指南中查找时，我没有看到任何回调函数（oncomplete、onsuccess 等......）。在数据网格中的整个数据完全成功加载​​后，我如何知道和处理 Javascript 函数？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:33:34.213

我认为没有为datagrid和datalist开发任何回调函数。请参阅此未决问题[http://code.google.com/p/primefaces/issues/detail?id=2119](http://code.google.com/p/primefaces/issues/detail?id=2119) [1](http://code.google.com/p/primefaces/issues/detail?id=2119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T00:45:58.550

我看到了另一种选择。首先，如果您需要在整个页面加载时发生的数据网格加载回调，您可以使用 Jquery 的“就绪”功能。

第二种情况是在应用搜索过滤器之后，因此，您可能会使用一个按钮来发布过滤器文本。在这种情况下，按钮中存在回调“oncomplete”，而不是 datagrid 。

[a4j:命令按钮](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_commandButton.html)

[素面-p](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html)

# wcf - 用于 WCF 重定向的 HttpModule 或 HttpHandler

> ID：10314774
> 
> 赞同：1
> 
> 时间：2012-04-25T11:35:44.500
> 
> 标签：wcf

我想要一个将 WCF-a 请求重定向到另一个 WCF 的 HttpHandler 或 HttpModule，比如 WCF-b。

下面的代码不起作用。

```
public class Router : IHttpModule
    {
        public void Init(System.Web.HttpApplication Appl)
        {
            Appl.Context.RewritePath(@"~/WCFGateWayKid.svc");
        }
        public void Dispose()
        { }
    } 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:04:45.167

终于有了解决办法。System.ServiceModel.Routing.RoutingService 是 .Net 4.0 的新特性之一请参考：[这个](https://stackoverflow.com/questions/10313167/wcf-url-redirection-using-httpmodule/10315987#10315987)链接

# iframe - 提交表单后的 IE-8 Iframe 页面重定向问题

> ID：10314776
> 
> 赞同：2
> 
> 时间：2012-04-25T11:35:51.603
> 
> 标签：iframe, redirect

我有一个 php 页面 form.php。一旦用户填写表格并单击“提交”，所有数据都会保存在数据库中，并且他会被重定向到 list.php。

现在我在另一个站点的 iframe 中添加了 form.php。问题出在 IE-8 中。在 iframe 中，一旦用户提交数据，数据就会保存在数据库中，但用户不会重定向到 list.php，但 user.php 页面会以空白表单刷新。

它在 IE 开发工具栏的 IE-Tes​​ter 和 IE-8 模式下工作，但在 IE-8 中不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:04:31.250

我认为你在你的问题中遗漏了一些东西。

可能有一些cookie问题。

在头文件中添加以下代码并检查

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

谢谢

# android - 想要创建布局

> ID：10314781
> 
> 赞同：1
> 
> 时间：2012-04-25T11:36:09.140
> 
> 标签：android, android-layout, android-emulator, android-widget

我想创建一个如下图所示的布局，谁能告诉我在 xml 布局上显示的这个组件是什么以及如何使用它。

![在此处输入图像描述](../Images/9c05a234743b94b0057a8833d1fdd0ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:39:55.737

您可以在 Android 中实现[滑动抽屉](http://developer.android.com/reference/android/widget/SlidingDrawer.html)。

# java - Java 导入中的通配符如何工作？

> ID：10314782
> 
> 赞同：4
> 
> 时间：2012-04-25T11:36:15.337
> 
> 标签：java, syntax, import

我一直注意到我`import`的 s 出现了一些意想不到的结果，我希望了解真正发生的事情。我从以下内容开始：

```
import java.util.*;
import java.io.*;
import java.nio.*;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption.*;
import java.nio.file.Paths; 
```

然后发现`ArrayList`并`ListIterator`没有用......所以我添加了

```
import java.util.ArrayList;
import java.util.ListIterator; 
```

一切正常。

我会假设这`java.util.*`也会导入`ArrayList`和`ListIterator`. 为什么没有呢？

我倾向于对我的类/方法/变量名称过于冗长，并且在程序的其余部分中我没有找到任何*接近*保留字的内容。

我在文档中找不到任何说明为什么会发生这种情况的内容，而且关于 Stack 的大部分讨论都是关于使用 * 与显式编码导入的优化。

任何人都知道我还能看什么来了解这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T11:46:17.900

`import java.util.*` **绝对**是进口`java.util.ArrayList`和该包中的所有其他东西。请注意，没有子包的概念，因此它不会从`java.util.x`or导入任何内容`java.util.y`，但您的问题似乎并非如此。

如果代码不起作用，您的代码肯定有其他问题，导入语句的行为肯定与您描述的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:47:17.657

我在eclipse中试过。

```
import java.util.*; 
```

这两个类都不需要再次导入。

```
import java.util.ArrayList;
import java.util.ListIterator; 
```

因为通配符 * 表示导入所有子类和包（记住不是包子类）

如果你进口

```
import java.util.*; 
```

我将导入**java.util.jar**包但不导入 jar 子类:)

# android - 更改为新 Activity 时在 Android Native 中崩溃

> ID：10314789
> 
> 赞同：1
> 
> 时间：2012-04-25T11:36:47.933
> 
> 标签：android, android-ndk, openfeint, cocos2d-x

我的应用程序无法打开 OpenFeint 仪表板方法。原生 c++ 库的实现使用 cocos2d-x 作为图形库，但它有一个处理程序和一个包装器以允许使用 OpenFeint 函数。**OpenFeint 初始化和非活动方法正常工作。**

当从 Jni 调用或 Java onCreate 初始化中调用诸如 openLaderBoards 或 openAchievements 之类的 UI 仪表板函数时，应用程序将崩溃。

编辑：我已经测试过，我尝试的任何活动更改都会发生这种情况，甚至是我自己的新课程。

EDIT2：我有一个类似问题的+100赏金，任何想出答案的人都会得到它。

**代码**

活动：

```
public class App extends Cocos2dxActivity{
private Cocos2dxGLSurfaceView mGLView;

OpenFeintX m_kOpenFeintX;

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    // get the packageName,it's used to set the resource path
    String packageName = getApplication().getPackageName();
    super.setPackageName(packageName);

    InternetConnection.setM_kActivity(this);

    m_kOpenFeintX = new OpenFeintX( this);      

    setContentView(R.layout.applayout);
    mGLView = (Cocos2dxGLSurfaceView) findViewById(R.id.game_gl_surfaceview);
    mGLView.setTextField((EditText)findViewById(R.id.textField));                  

// Testspace for new Activities, OpenFeint or self-made
//
// Intent myIntent = new Intent(this, TestActivity.class);
// startActivityForResult(myIntent, 0);
// Dashboard.open();

// Cocos2d-x scene opens after this

}

 static {
     System.loadLibrary("TestProject");
     // Native library loaded for cocos2d-x
 } 
```

包装：

```
public class OpenFeintX {

private static OpenFeintXHandler ms_kOpenFeintHandler;

public OpenFeintX(Activity kActivity) {
    initializeOpenFeint("TestApp", "derp",
            "hurr", "6546516516541",
            kActivity, ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    ms_kOpenFeintHandler = new OpenFeintXHandler();

}

public static void openLeaderBoards() {     
    Message msg = new Message();
    msg.what = OpenFeintXHandler.SHOW_LEADERBOARDS;
    ms_kOpenFeintHandler.sendMessage(msg);
} 
```

处理程序 openDashboard 函数：

```
private void openLeaderBoards() {
    System.out.println("Opening Dashboard");
    Dashboard.openLeaderboards();
} 
```

显现：

```
<application
    android:debuggable="true"
    android:label="@string/app_name">
    <activity
        android:configChanges="orientation"
        android:label="@string/app_name"
        android:name=".App"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        

    <activity android:name="com.openfeint.internal.ui.IntroFlow"
              android:label=".IntroFlow"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@style/OFNestedWindow" />
    <activity android:name="com.openfeint.api.ui.Dashboard"
              android:label=".Dashboard"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@style/OFNestedWindow"/>
    <activity android:name="com.openfeint.internal.ui.Settings"
              android:label=".Settings"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@style/OFNestedWindow"/>
    <activity android:name="com.openfeint.internal.ui.NativeBrowser"
              android:label=".NativeBrowser"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@style/OFNestedWindow"/>
</application> 
```

Stacktrace（不会在 SO 中缩进）：

[http://pastebin.com/jsmSbgw4](http://pastebin.com/jsmSbgw4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:57:23.830

答案很简单但很复杂。当应用程序更改为新活动时，将调用 cocos2d-x MessageJNI 中的 nativeOnPause 方法。这个方法应该调用 CCApplication::sharedApplication()，但是我的一个类之前调用​​了 CCApplication 析构函数，它将共享单例清除为空。

尽管答案很容易修复并且是针对特定项目的，但我还是会就让我找到它的原因给出一些建议。请记住，我所有的工具都是 windows 和 cygwin。

**首先，让 Eclipse 在 clean 上为您执行 ndk-builds。**

右键单击您的项目-> 属性-> C/C++ 构建。生成器设置选项卡，命令

```
 C:\NVPACK\cygwin\bin\bash.exe -c "cd /cygdrive/path/to/project && ./build_script.sh" 
```

**其次，设置你的调试器。**

使用[本教程](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)。到达那里可能需要一些时间和尝试，但这是值得的。我的 adb-server 调用脚本是

```
export ANDROID_NDK_ROOT=/cygdrive/c/NVPACK/android-ndk-r6b/
cd $ANDROID_NDK_ROOT
./ndk-gdb-eclipse --adb=/cygdrive/c/NVPACK/android-sdk-windows/platform-tools/adb     --project=/cygdrive/c/project/path --force --verbose 
```

**第三，将您的 logcat 设置为详细。**

**更新：现在可以跳过最后一步，因为最新版本的 Logcat 输出整个堆栈跟踪的类和行。**

你会得到很长的堆栈跟踪，就像我的问题中的那个一样。要检查堆栈跟踪错误指向的位置，请遵循此[其他教程。](http://www.codexperiments.com/android/2010/08/tips-tricks-debugging-android-ndk-stack-traces/)我访问图书馆的脚本是

```
C:\NVPACK\android-ndk-r6b\toolchains\x86-4.4.3\prebuilt\windows\bin\i686-android-linux-addr2line.exe -C -f -e c:\path\to\project\libMyLib.so 
```

# php - 与 uploadify 一起从输入字段发送信息

> ID：10314790
> 
> 赞同：0
> 
> 时间：2012-04-25T11:36:52.740
> 
> 标签：php, jquery, html, file-upload, uploadify

如何将输入字段中的值与我上传到服务器的文件一起***发布 UPLOADIFY***？

```
<tr>
    <th>text:</th>
    <td><input type="text" name="userInput" id="userInput" /></td>
</tr>
<tr>
    <th>files:</th>
    <td><input id="file_upload" name="file_upload" type="file" /></td>
</tr>

<script type="text/javascript">
'onUploadStart' : function(){
    $('#file_upload').uploadifySettings(
            'postData', 
            {
                "userInput": $("#userInput").val()
            }
    );
},
</script> 
```

这还行不通，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:45:44.707

尝试：

```
 $(document).ready(function() {
    $('#fileInput').uploadify({
        'uploader'  : 'uploadify.swf',
        'script'    : 'upload.php',
        'cancelImg' : 'cancel.png',
        'auto'      : true,
        'folder'    : '/your_folder_to_upload',
        'onOpen' : function(){
        $('#file_upload').uploadifySettings(
            'scriptData', 
            {'userInput':$("#userInput").val()}
            );
        }
    });
}); 
```

希望能帮助到你

# linux - 由于 tail 选项，无法查看显示日志的全部内容

> ID：10314791
> 
> 赞同：0
> 
> 时间：2012-04-25T11:37:05.420
> 
> 标签：linux

我正在使用 Putty 登录 Linux 服务器并查看日志。

我使用了命令`tail -f -n 1000 MyLog.log`

它开始显示最后 1000 行，在显示的内容上，但我可以将光标移动到整个显示的内容，我只能在缓冲区内容内移动。

请告诉我是否有任何其他选项以便我能够看到整个内容（即 1000 行）

谢谢你 。

我需要在哪里更改设置

![在此处输入图像描述](../Images/eac7737fce48d34f8fc3938ebdf159f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:41:32.820

这可能是因为 Putty，默认情况下有 200 行回滚。您可以通过转至 更改此设置`Putty - Window - Lines of scrollback`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:39:15.410

您可以使用寻呼机，**少**即是多！

像这样跑

```
tail -f -n REQD_LINE_NOS FILENAME | less 
```

# java - 从 SAX java XML 解析器中，我如何知道“DOCTYPE”关键字的大小写？

> ID：10314793
> 
> 赞同：1
> 
> 时间：2012-04-25T11:37:08.633
> 
> 标签：java, xml, xml-parsing, sax

我正在使用 Java SAX 解析器（org.xml.sax.ext.DefaultHandler2 的实现）来解析 XML 文档，并且该文档有一个指向 DTD 的 DOCTYPE 声明。由于一些奇怪的原因，我需要知道“doctype”关键字本身已经写在原始文档中的大小写，以便我可以使用完全相同的大小写输出文档。

也就是说，我需要能够区分：

```
<!DOCTYPE thing SYSTEMID ...> 
```

...从：

```
<!doctype thing SYSTEMID ...> 
```

有没有办法从解析器本身实现这一点？（我的意思是，在执行解析器之前不读取流的前 n 个字节）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:23:08.143

如果输入是 XML，则 DOCTYPE 为大写。相反，如果 DOCTYPE 为小写，则输入不是 XML。因此，如果 SAX 解析器成功通过 DOCTYPE 声明，您就知道它是大写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:34:25.490

最后，Java XML 解析器似乎无法告诉您 DOCTYPE 子句的原始情况，因为它会认为它始终是大写的（这是 XML 规范所说的，但可能不是如果您尝试使用此类 XML 解析器来解析 HTML5，则为 true）。

我解决这个问题的方法是实现我自己的 java.io.Reader，它允许我读取文件的字节并确定 DOCTYPE 子句的原始大小写，然后在 XML SAX 解析器中使用这个 Reader。解析完成后，我会问读者对象该子句的情况是什么，我会得到正确的答案。

它又脏又丑，但是……似乎是唯一真正的选择。

# database - 数据库中查询失败的原因是什么？

> ID：10314795
> 
> 赞同：3
> 
> 时间：2012-04-25T11:37:28.237
> 
> 标签：database

给定一个数据库，查询在 99% 的时间返回正确的输出，但是在 1% 的时间，它返回错误的输出。可能的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:48:13.533

查询返回“错误”或“非预期”结果集的原因有多种：

1.  “错误”的数据被添加到数据库/表中。
2.  查询读取未提交的记录或幻像记录（请参阅数据库隔离级别）
3.  您的数据可能尚未编入索引（如果是全文索引）或全文服务正在重建索引
4.  查询中没有 ORDER BY 子句，系统负载很高。在这种情况下，我们可能会观察到“旋转木马扫描”：

> 例如，假设您有一个包含 500,000 页的表。UserA 执行需要扫描（并检索一些记录）表的 Transact-SQL 语句。当该扫描处理了 100,000 页时，UserB 执行另一个 Transact-SQL 语句来扫描同一个表。数据库引擎在 100,001 之后为页面安排一组读取请求，并将每个页面中的行传递回两次扫描。当扫描到达第 200,000 页时，UserC 执行另一个扫描同一个表的 Transact-SQL 语句。从第 200,001 页开始，数据库引擎将其读取的每个页面的行传递回所有三个扫描。读取第 500,000 行后，对 UserA 的扫描完成，对 UserB 和 UserC 的扫描返回并开始读取从第 1 页开始的页面。当数据库引擎到达第 100,000 页时，对 UserB 的扫描完成。然后对 UserC 的扫描继续进行，直到它读取到第 200,000 页。至此，所有的扫描都完成了。更多关于这里优化的信息：[旋转木马扫描](http://msdn.microsoft.com/en-us/library/ms191475.aspx)

1.  在分布式数据库的情况下，可以在数据库的不同副本上执行查询（因为“数据库负载平衡器”）。因此，在复制过程中，某些数据库副本可能在某些时候具有不同的数据。

如果有其他想法出现 - 我会更新我的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:39:18.797

我想也许他们没有检查特殊字符，并且 1% 的时间用户可能会插入特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:40:01.737

缓存、同步/复制、资源不足等

# java - 迭代集合时为隐藏字段分配动态 id

> ID：10314797
> 
> 赞同：2
> 
> 时间：2012-04-25T11:37:33.250
> 
> 标签：java, javascript, jsf, primefaces

有没有办法为`h:inputHidden`组件分配动态 ID？

**编辑1**

我试图`ui:repeat`在迭代元素集合时分配标签内的 id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:27:38.387

无法根据 的迭代值设置 ID `<ui:repeat>`。但无论如何你都不需要它。默认情况下，它们将根据迭代索引获得动态且唯一的 ID。

例如

```
<h:form id="form">
    <ui:repeat value="#{bean.list}" var="item">
        <h:inputHidden id="hidden" value="#{item.value}" />
    </ui:repeat>
</h:form> 
```

将在视图渲染期间生成此 HTML

```
<form id="form" name="form">
    <input type="hidden" id="form:0:hidden" name="form:0:hidden" value="item1value" />
    <input type="hidden" id="form:1:hidden" name="form:1:hidden" value="item2value" />
    <input type="hidden" id="form:2:hidden" name="form:2:hidden" value="item3value" />
</form> 
```

如果要手动控制 ID，则需要使用`<c:forEach>`，因为`<ui:repeat>`它不会生成多个 JSF 组件，而是让其子级（`<h:inputHidden>`在上面的示例中为单个）多次生成 HTML。这`<c:forEach>`将生成多个 JSF 组件，然后每个组件只生成一次 HTML（因此您实际上最终会`<h:inputHidden>`在 JSF 组件树中得到多个组件）。

例如

```
<h:form id="form">
    <c:forEach items="#{bean.list}" var="item">
        <h:inputHidden id="#{item.id}" value="#{item.value}" />
    </c:forEach>
</h:form> 
```

它基本上会在视图构建期间生成这个 JSF 组件树

```
<h:form id="form">
    <h:inputHidden id="item1id" value="#{bean.list[0].value}" />
    <h:inputHidden id="item2id" value="#{bean.list[1].value}" />
    <h:inputHidden id="item3id" value="#{bean.list[2].value}" />
</h:form> 
```

这反过来将在视图渲染期间生成此 HTML

```
<form id="form" name="form">
    <input type="hidden" id="form:item1id" name="form:item1id" value="item1value" />
    <input type="hidden" id="form:item2id" name="form:item2id" value="item2value" />
    <input type="hidden" id="form:item3id" name="form:item3id" value="item3value" />
</form> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:44:42.343

默认情况下，它们会被分配一个动态 ID。您还可以指定`id="#{..}`对其进行自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:59:38.217

您也可以动态添加任何随机数 ( `id="#{}"`)，但是

将***功能相关的 id 添加到隐藏组件***中，这将很有帮助

例如，如果它是员工表格，您可以在其中添加 empid。

# java - 视图或片段库为常见数据类型组成 UI

> ID：10314798
> 
> 赞同：8
> 
> 时间：2012-04-25T11:37:46.140
> 
> 标签：java, android, user-interface, android-intent, android-widget

## 问题

*   [Reusables@common.com](http://mailto%3aReusables@common.com)
*   1,000,000 英镑
*   [www.inventing-a-wheel.ee](http://msdn.microsoft.com/en-us/library/ff921153%28PandP.40%29.aspx#sec2)
*   操作快捷方式：`C`

我需要让用户输入电子邮件、选择日期、编辑网页、选择图像等 - 有许多常见的演示任务不**直接**由 Android SDK 小部件库提供，所以我认为可能有专门处理此类 UI 问题的专用存储库或框架。

[*例如，虽然 Android 提供了可以变成特定电子邮件编辑器的小部件，但这里的问题是找到一个专门针对此类常见数据类型的现成组件库，即专门用于呈现此类数据的 UI 元素，出开箱即用，并提供验证。*]

## 现有来源？

`Android`所以我用, `widget`, `library`, `view`, `toolkit`, `fragment`,等术语的组合搜索了网络`repository`，但只找到了误报。

您能否向我推荐任何提供类/ XML 布局列表的集体努力，这些类/ XML 布局[实现了常见的特定于数据的输入/编辑/配置元素](http://wpftoolkit.codeplex.com/wikipage?title=IntegerUpDown&referringTitle=Home)？

所以我可以在 ActivityA1、ActivityA3、ActivityB1、ActivityN9 中做这样的事情：

*   新的电子邮件编辑文本（）
*   新的 UrlTextView()
*   新的 IPView() ...

## 将数据与视图匹配？

我真正在寻找的是一组将根据需要呈现的数据进行解析的小部件，可能类似于[隐式意图解析](http://developer.android.com/guide/topics/intents/intents-filters.html#ires)？

因此，从我的域模型中，我将提供一些具有特定数据类型的数据，这些数据应该以某种方式适当地显示。但我没有明确设置什么视图将呈现这些数据，而是在两者之间有一个匹配器，用于过滤可用的特定用途视图列表并为给定的数据类型选择最合适的视图。

已经有类似的东西了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:19:50.793

不幸的是，Android 并没有你想要的，但不用担心 - 肯定有一些东西可以让你的生活更轻松。

例如，您可以[`inputType`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)在 EditText 上设置 以更改键盘的外观（例如，对于电子邮件，您有“@”和“.com”按钮，对于电话号码，您有数字）并使用[InputFilter](http://developer.android.com/reference/android/text/InputFilter.html)来控制数据入口。

您甚至可以使用它`EditText.setTransformationMethod()`来更改数据的呈现方式（例如在电话号码中添加空格）。

如果你想选择一张图片，你可以发送一个意图来请求它：[http ://android-er.blogspot.se/2011/02/select-image-using-android-build-in.html](http://android-er.blogspot.se/2011/02/select-image-using-android-build-in.html)

通过组合这些方法来构建您自己的一组小部件应该不会太难，这些小部件可以满足您的需求。

**更新：**现在有一个库可以使表单验证更容易：[https ://github.com/vekexasia/android-form-edittext](https://github.com/vekexasia/android-form-edittext)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:52:20.150

有一个日期[滑块](http://code.google.com/p/android-dateslider/)组件来实现混合日期时间输入元素。

然而，根据[我的经验](https://stackoverflow.com/questions/9721860/how-to-consume-reusable-gui-element-widget-with-resources-in-android)，当前的 android 开发工具 adt（至少版本 17，但可能直到版本 19）目前无法正确处理带有资源的 jar 文件。您必须包含库源才能使用小部件构建项目。

# javascript - 烧瓶 url_for Javascript 中的 URL

> ID：10314800
> 
> 赞同：44
> 
> 时间：2012-04-25T11:37:48.840
> 
> 标签：javascript, python, flask, url-for

使用烧瓶时在 Javascript 文件中创建动态 URL 的推荐方法是什么？在 jinja2 模板和 python 视图中使用，在文件`url_for`中执行此操作的推荐方法是什么？`.js`因为它们不被模板引擎解释。

基本上想要做的是：

```
// in comments.js
$.post(url_for('comment.comment_reply')); 
```

这是不可能的。

但很自然，我可以在模板中执行它：

```
<script>
    $.post(url_for('comment.comment_reply'));
</script> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-01-05T17:25:05.270

@dumbmatter 的建议几乎被认为是事实上的标准方式。但我认为会有更好的方法来做到这一点。所以我设法开发了这个插件：[Flask-JSGlue](http://stewartpark.github.io/Flask-JSGlue/)。

添加后`{{ JSGlue.include() }}`，您可以在源代码中执行以下操作：

```
<script>
    $.post(Flask.url_for('comment.comment_reply', {article_id: 3}));
</script> 
```

或者：

```
<script>
    location.href = Flask.url_for('index', {});
</script> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-26T14:38:27.087

[Flask 文档](http://flask.pocoo.org/docs/patterns/jquery/#where-is-my-site)建议在您的 HTML 文件中使用来`url_for`设置一个包含您可以在其他地方访问的根 URL 的变量。然后，您必须在此基础上手动构建视图 URL，尽管我猜您可以将它们存储为类似于根 URL。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-23T23:13:54.480

正在寻找解决方案，他们想出了这个解决方案

*   **无需附加组件**

*   **没有硬编码 URL**

关键是要实现`Jinja2`开箱即用的 javascript 渲染能力。

* * *

将您的模板文件夹设置为如下所示：

```
/template
    /html
        /index.html
    /js
        /index.js 
```

* * *

在你的意见.py

```
@app.route("/index_js")
def index_js():
    render_template("/js/index.js") 
```

* * *

现在而不是从您的静态文件夹中提供 javascript。你会使用：

```
<script src="{{ url_for('index_js') }}"></script> 
```

毕竟，您正在动态生成 javascript，它不再是静态文件。

* * *

现在，在您的 javascript 文件中，只需`url_for`像在任何`html`文件中一样使用 。

例如`Jquery`用于发出 Ajax 请求

```
$.ajax({
  url: {{ url_for('endpoint_to_resource') }},
  method: "GET",
  success: call_back()
}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T16:04:07.447

@jeremy 的答案是正确的，可能是更常见的方法，但作为替代答案，请注意`dantezhu`编写并发布了一个[烧瓶扩展](https://github.com/dantezhu/flask_util_js)，声称可以执行评论中建议的确切 url-route-map-to-javascript 翻译。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T10:53:28.740

我使用这个肮脏和丑陋的技巧：

```
"{{url_for('mypage', name=metadata.name,scale=93,group=2)}}"
.replace('93/group',scale+'/group') 
```

`scale`我想用于 AJAX 请求的 javascript 变量在哪里。因此， url_for 生成一个 URL 并且 JavaScript 在运行时替换该参数。生成的代码类似于：

```
"/ajaxservive/mynam/scale/93/group/2".replace('93/group',scale+'/group') 
```

这很奇怪，但仍然找不到更优雅的解决方案。

事实上，[查看](https://github.com/dantezhu/flask_util_js/blob/master/flask_util_js.py)链接的烧瓶扩展的代码，它做同样的事情，但管理一般情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-26T00:47:54.580

就我而言，我试图动态创建网址

我按如下方式解决了我的问题（注意：我已将 Angular 的语法换成了 {[x]}：

```
<ul>
    <li ng-repeat="x in projects">
        {[x.title]}
        {% set url = url_for('static',filename="img/") %}

        <img src="{{url}}{[x.img]}">
    </li>
</ul> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-23T20:16:44.393

通过将“tojson”与 Jinja2 和 Flask 一起使用，我能够将动态创建的 url 路由传递给 javascript 函数。

要将动态 url 从 html 模板传递给 js，只需在 jinja 语句的末尾添加“|tojson”即可将其转换为适当的格式。

代替：

```
<script>
 $.post(url_for('comment.comment_reply'));
</script> 
```

尝试：

```
<script>
 var route = {{ url_for('comment.comment_reply')|tojson }};
 yourJavaScriptFunction(route);
</script> 
```

然后，您将能够将 js 函数中的路由用作您需要的任何正确路由。

```
yourJavaScriptFunction(route){
 console.log(route);
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-08-14T11:03:20.117

按下按钮时，我试图调用 FLASK 路由。它应该收集响应并更新一个 div。该页面不应重新加载。

我使用 jquery 来做到这一点。

**这是代码：**

```
@app.route('/<name>')
def getContent(name):
    return 'This is %s' % name 
```

**HTML：**

```
 <div id="mySpace" class="my-3">Count</div>

    <button id="next_id" class="btn btn-primary">Press</button>

    <script>
        $('#next_id').click(function (){
            $.get('/aroy', function(data, status){
            $('#mySpace').html(data);
        });
        });
    </script> 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-09-09T10:16:14.437

我建议这样做：

```
<script src="{{ url_for('static', filename='js/jquery.js') }}" type="text/javascript">
</script> 
```

对我来说很好

# ruby - nokogiri 解析错误

> ID：10314801
> 
> 赞同：1
> 
> 时间：2012-04-25T11:37:55.857
> 
> 标签：ruby, nokogiri

我正在尝试解析来自客户端计算机的 xml 文档。我正在使用 ruby​​ 1.8.7 和 nokogiri。我收到一个错误：“nokogiri 解析 PCDATA 无效字符值 3 时出错”但我无法理解消息导致问题的字符串是：Devd\003\002\b\017.exe 我该如何解决这个问题或者只是跳过这个条目（它导致解析直接进入救援块）谢谢！

# javascript - 是否可以使用这种方法实现数组乘法

> ID：10314803
> 
> 赞同：3
> 
> 时间：2012-04-25T11:38:00.950
> 
> 标签：javascript

嗨，我正在尝试以下方法来计算数字数组的乘积。

```
 var str = [1,2,3];
 alert(str.join('*') * 1);​ 
```

但它返回我`NaN`。

有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:40:33.133

理想的情况是使用[`Array.reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
alert(str.reduce(function (acc, curr) { return acc * curr; }, 1)); 
```

[**看到它在行动**](http://jsfiddle.net/rShML/)。

`Array.reduce`在 IE 9 之前的版本中不可用，但应该有很多实现可以找到（例如[这个](https://gist.github.com/1043790)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:41:32.350

您正在寻找的是将字符串评估为表达式：

```
alert(eval(str.join('*')));​ 
```

但是，与往常一样，如果您正在使用，`eval`您应该认真问自己是否做错了什么。

考虑只循环：

```
var result = 1;
for (var i = 0; i < str.length; i++) result *= str[i];
alert(result); 
```

# facebook - WP7 Facebook 集成使用 C# SDK

> ID：10314804
> 
> 赞同：1
> 
> 时间：2012-04-25T11:38:01.933
> 
> 标签：facebook, windows-phone-7, facebook-c#-sdk

我希望我的玩家能够从 WP7 游戏将游戏得分发布到他的 Facebook 墙上。我已经完成了以下教程

1>[教程：使用 Windows Phone 7 (Silverlight) 登录 Facebook](http://www.designersilverlight.com/2012/01/25/tutorial-logging-into-facebook-with-windows-phone-7-silverlight/)（源代码从他们的网站下载。）

问题：运行示例项目后，我可以登录 facebook，但不知道如何发布消息。

2> 我从[github](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)下载了示例项目。

问题：当我为 WP7 打开项目时，会弹出一个窗口，提示“此版本的应用程序不支持解决方案文件夹。解决方案文件夹 '.nudget' 将显示为不可用。” 我已尝试按照[Prabir's Blog 的](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx)建议下载[nuget 更新](http://nuget.codeplex.com/releases)。

3> 通过[本](http://dotnetslackers.com/articles/net/wFace-windows-phone-7-facebook-integration-part-1.aspx)教程，我可以登录 facebook。

问题：无法发布任何消息。它在模拟器中显示“远程服务器返回错误：NotFound”。

如果您发现这个问题不合适或缺乏研究，请告诉我，我会立即删除问题。我对 WP7 和 C# 都是新手。请帮我纠正上述问题。提前致谢

**编辑：** 最后通过在 PGLogin.xaml.cs 中进行小的更改来完成第三个工作，只需在“wbLogin_LoadCompleted”方法中将“PRE”更改为“pre”。但仍然没有太大的满足感。因为它的工作，有时不。它不稳定。并且不知道如何注销。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:04:21.157

另一个用户遇到了这个确切的问题，使用以下代码解决了这个问题：

```
var args = new Dictionary<string, object>(); 
 args["name"] = "Check this out"; 
 args["link"] = "www.xyz.com"; 
 args["caption"] = ""; 
 args["description"] = "description"; 
 args["picture"] = ""; 
 args["message"] = "Check this out"; 
 args["actions"] = ""; 

FacebookAsyncCallback callBack = new FacebookAsyncCallback(this.postResult); 
 fbApp.PostAsync("me/feed", args, callBack);   

    private void postResult(FacebookAsyncResult asyncResult) 
    { 
        System.Diagnostics.Debug.WriteLine(asyncResult); 
    } 
```

[使用 WP7 和 Facebook.dll 发布到 Facebook 墙上](https://stackoverflow.com/q/4757924/218159)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:52:59.043

```
ShareLinkTask shareLinkTask = new ShareLinkTask();
shareLinkTask.Title = "Divum Photo Browser";
shareLinkTask.LinkUri = new Uri(list_photos.ElementAt(index_).imageUrl, UriKind.Absolute);
shareLinkTask.Show(); 
```

# mysql - MySQL触发器，不活动后删除一行？

> ID：10314806
> 
> 赞同：0
> 
> 时间：2012-04-25T11:38:07.373
> 
> 标签：mysql, sql, triggers

我已经做了一些谷歌搜索，但无法真正获得太多相关信息。我正在尝试根据活动为要删除的某些行设置日期/时间。如果激活，除非再次激活，否则时间将推迟到以后。否则将被删除。在活动中激活（插入/更新）时，我已设法对行进行排序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:04:18.470

首先，如果您有数百万行需要删除，请不要将此更新/删除放在触发器中，您将看到插入/更新的性能受到巨大影响。这不是最好的地方。您可以按照 Filype 的建议创建一个 cron 作业。或者，如果您想将其全部保存在 MySQL 中，请使用 MySQL 事件调度程序。

转到此页面以阅读有关在 MySQL 中调度事件的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

MySQL Event 允许您定期在 MySQL 上安排事情。

代码看起来像

```
 CREATE EVENT myevent
 ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR
 DO
  DELETE FROM MyTable Where Expired< NOW(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:02:10.467

这是一个建议，我还没有尝试过，您可能会认为用 deleted=1 更新行而不是实际删除记录。

```
CREATE TRIGGER deleteInactiveRecords AFTER UPDATE,INSERT ON myTable
    FOR EACH ROW BEGIN
        DELETE FROM myTable WHERE updated < (updated-((60)*60*24))
    END; 
```

# jquery - 在 Galleria 全屏主题中禁用右键单击

> ID：10314807
> 
> 赞同：2
> 
> 时间：2012-04-25T11:38:08.323
> 
> 标签：jquery, galleria

我正在为我的图像使用 Drupal 7 和 Galleria 全屏主题。我不想单击右键并保存图像。所以，我在我的 jQuery 文件中添加了这段代码：

```
$('img').bind('contextmenu', function(e){
    return false;
}); 
```

此功能适用于我的网站图像，但不适用于 Galleria 全屏。这是我的 Galleria 全屏 js：

```
(function($) {

Galleria.addTheme({
    name: 'fullscreen',
    author: 'Galleria',
    version: '2.0',
    css: 'galleria.fullscreen.css',
    defaults: {
        transition: 'fade',
        image_crop: true,
        thumb_crop: 'height'
    },
    init: function(options) {

        this.addElement('thumbnails-tab');
        this.appendChild('thumbnails-container','thumbnails-tab');

        var tab = this.$('thumbnails-tab');
        var loader = this.$('loader');
        var thumbs = this.$('thumbnails-container');
        var list = this.$('thumbnails-list');
        var infotext = this.$('info-text');
        var info = this.$('info');

        var OPEN = false;
        var POS = 0;

        if (Galleria.IE) {
            this.addElement('iefix');
            this.appendChild('container','iefix');
            this.setStyle(this.get('iefix'), {
                zIndex:3,
                position:'absolute',
                backgroundColor: '#000',
                opacity:.4
            })
        }

        if (options.thumbnails === false) {
            thumbs.hide();
        }

        var fixCaption = this.proxy(function(img) {
            if (!(img || img.width)) {
                return;
            }
            var w = Math.min(img.width, $(window).width());
            infotext.width(w-40);
            if (Galleria.IE && this.options.show_caption) {
                this.$('iefix').width(info.outerWidth()).height(info.outerHeight());
            }
        });

        this.bind(Galleria.RESCALE, function() {
            POS = this.stageHeight - tab.height()-2;
            thumbs.css('top', OPEN ? POS - list.outerHeight() + 2 : POS);
            var img = this.getActiveImage();
            if (img) {
                fixCaption(img);
            }
        });

        this.bind(Galleria.LOADSTART, function(e) {
            if (!e.cached) {
                loader.show().fadeTo(100, 1);
            }
            $(e.thumbTarget).css('opacity',1).parent().siblings('.active').children().css('opacity',.5);
        });

        this.bind(Galleria.LOADFINISH, function(e) {
            loader.fadeOut(300);
            this.$('info,iefix').toggle(this.hasInfo());
        });

        this.bind(Galleria.IMAGE, function(e) {
            fixCaption(e.imageTarget);
        });

        this.bind(Galleria.THUMBNAIL, function(e) {
            $(e.thumbTarget).click(function() {
                if (OPEN) {
                    tab.click();
                }
            });
        });

        this.trigger(Galleria.RESCALE);

        this.addIdleState(thumbs, { opacity:0 });
        this.addIdleState(this.get('info'), { opacity:0 });

        if (Galleria.IE) {
            this.addIdleState(this.get('iefix'), { opacity:0 });
        }

        this.attachKeyboard({
            up: function(e) {
                if (!OPEN) {
                    tab.click();
                }
                e.preventDefault();
            },
            down: function(e) {
                if (OPEN) {
                    tab.click();
                }
                e.preventDefault();
            }
        });

        this.$('image-nav-left, image-nav-right').hover(function() {
            //$(this).animate({opacity:1},100);
        }, function() {
            //$(this).animate({opacity:0});
        }).show();

        tab.click(this.proxy(function() {
            tab.toggleClass('open', !OPEN);
            if (!OPEN) {
                thumbs.animate({
                    top: POS - list.outerHeight() + 2
                },400,'galleria');
            } else {
                thumbs.animate({
                    top: POS
                },400,'galleria');
            }
            OPEN = !OPEN;
        }));

        this.$('thumbnails').children().hover(function() {
            $(this).not('.active').children().css('opacity', 1);
        }, function() {
            $(this).not('.active').children().fadeTo(200, .5);
        }).children().css('opacity',.5)

        this.enterFullscreen();
    }
});

})(jQuery); 
```

如何在我的 Galleria 全屏模式下禁用右键单击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:49:55.463

尝试：

```
$('.galleria-images').on('contextmenu','img',function(e){
   alert('Images you are attempting to download are copyrighted material.');
   e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:51:56.393

像这样禁用右键单击

```
$('body').mousedown(function(event) {
    switch (event.which) {
       case 3: return false; break;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:46:57.343

您是否尝试使用 live 而不是 bind？这样，与您的选择器匹配的 img 将始终拥有它

```
$('img').live('contextmenu', function(e){
return false; 
```

});

[jQuery .live()](http://api.jquery.com/live/)

希望能帮助到你！

# .net - 如何查找筛选的 BindingSource 是否包含来自基础 DataSet 的项目？

> ID：10314810
> 
> 赞同：1
> 
> 时间：2012-04-25T11:38:47.033
> 
> 标签：.net, vb.net, linq, combobox, bindingsource

对于正在发生的事情的略微模糊的描述，请提前道歉。我很确定自己做了什么，只是不确定正确的术语。我会尽我所能尽快回复任何澄清请求。

我的应用程序中有一个数据绑定查询，它正在查询我们数据库中的“客户”表。我在设计视图中直接从 ComboBox 的数据源创建器创建了它。

设计器中创建的各种代码包括：

```
Me.CustomerBindingSource.DataSource = Me.CustomerDataSet
Me.ComboBox_Customers.DataSource = Me.CustomerBindingSource 
```

我在开发此功能的第一阶段所做的是向我的用户显示一个 ComboBox，它通过对 BindingSource 应用过滤器来显示客户列表的特定子集。

```
Me.CustomerBindingSource.Filter = "someColumn = 3" 
```

第二遍我想做的是允许用户在文本框中输入特定的信息，并检查它是否`Me.CustomerDataSet`像这样出现：

```
Dim x As IEnumerable(Of CustomerDataSet.customerRow) = From cust In Me.CustomerDataSet.customer Where cust.custno.Trim = "test"
If x.Count <> 0 Then 
```

**实际问题**

在这一点上，我有一个`customerRow`对象。我想检查这个 customerRow 对象是否出现在`Me.ComboBox_Customers`通过过滤后呈现给用户的列表中`Me.CustomerBindingSource`。`Me.CustomerBindingSource`不（直接）包含`customerRow`对象，它包含`Object`对象。

如何确定是否`Me.CustomerBindingSource`包含较低级别的 customerRow 对象？

还

一旦确定`Me.CustomerBindingSource`包含该项目，如何在 ComboBox 中选择该条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:48:55.897

我确定的答案是调用一个基本上可以执行的函数：

```
For Each customerIn As DataRowView In Me.CustomerBindingSource
    If customerIn .Row Is x(0) Then
        Me.ComboBox_Customers.SelectedItem = customerIn 
    End If
Next
`Otherwise do nothing 
```

所以`Is`我正在寻找的比较是`Me.CustomerBindingSource.Item(index).Row`因为虽然`Me.CustomerBindingSource`只包含`Object`对象，但它们都是类型的对象，`DataRowView`它们都有一个`Row`属性，其中包含`DataRow`我已经从我的 LINQ 查询中检索到的对象`Me.CustomerDataSet`。

如果有人对这个问题有任何比`For`循环更棒的答案，我很乐意学习它们。

# c# - 尝试以编程方式编译和执行 C# 代码

> ID：10314815
> 
> 赞同：4
> 
> 时间：2012-04-25T11:38:56.313
> 
> 标签：c#

以下是我的代码：

```
using System;
using System.Collections.Generic;
using System.Text;

using System.CodeDom.Compiler;
using System.IO;
using Microsoft.CSharp;
using System.Reflection;

namespace DynaCode
{

class Program
{

    static void Main(string[] args)
    {

        string content = File.ReadAllText(@"D:\hi.cs");
        string[] code = new string[content.Length];
        char[] seperators = { '\n','\r','\t' };
        code = content.Split(seperators);

        CompileAndRun(code);

        Console.ReadKey();

    }

    static void CompileAndRun(string[] code)
    {
        CompilerParameters CompilerParams = new CompilerParameters();
        string outputDirectory = Directory.GetCurrentDirectory();

        CompilerParams.GenerateInMemory = true;
        CompilerParams.TreatWarningsAsErrors = false;
        CompilerParams.GenerateExecutable = false;
        CompilerParams.CompilerOptions = "/optimize";

        string[] references = { "System.dll"};

        CompilerParams.ReferencedAssemblies.AddRange(references);

        CSharpCodeProvider provider = new CSharpCodeProvider();
        CompilerResults compile = provider.CompileAssemblyFromSource(CompilerParams, code);

        if (compile.Errors.HasErrors)
        {
            string text = "Compile error: ";
            foreach (CompilerError ce in compile.Errors)
            {
                text += "rn" + ce.ToString();
            }
            throw new Exception(text);
        }

        //ExpoloreAssembly(compile.CompiledAssembly);

        Module module = compile.CompiledAssembly.GetModules()[0];
        Type mt = null;
        MethodInfo methInfo = null;

        if (module != null)
        {
            mt = module.GetType("DynaCore.DynaCore");
        }

        if (mt != null)
        {
            methInfo = mt.GetMethod("Main");
        }

        if (methInfo != null)
        {
            Console.WriteLine(methInfo.Invoke(null, new object[] { "here in dyna code" }));
        }
    }

    static void ExpoloreAssembly(Assembly assembly)
    {
        Console.WriteLine("Modules in the assembly:");
        foreach (Module m in assembly.GetModules())
        {
            Console.WriteLine("{0}", m);

            foreach (Type t in m.GetTypes())
            {
                Console.WriteLine("t{0}", t.Name);

                foreach (MethodInfo mi in t.GetMethods())
                {
                    Console.WriteLine("tt{0}", mi.Name);
                }
            }
        }
    }
}
} 
```

hi.cs文件内容如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace DynaCore
{
class DynaCore
{
    static public void Main(string[] args)
    {

     Console.WriteLine("hello, this is good");

    }
}
} 
```

这是我尝试运行此程序时遇到的错误：

```
System.Exception was unhandled
  Message="Compile error: rnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.16.cs(1,19) : error CS1514: { expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.16.cs(1,19) : error CS1513: } expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.18.cs(1,1) : error CS0116: A namespace does not directly contain members such as fields or methodsrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.20.cs(1,19) : error CS1514: { expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.20.cs(1,19) : error CS1513: } expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.20.cs(1,11) : error CS0101: The namespace '<global namespace>' already contains a definition for 'DynaCore'rnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.22.cs(1,5) : error CS0116: A namespace does not directly contain members such as fields or methodsrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.24.cs(1,23) : error CS1518: Expected class, delegate, enum, interface, or structrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.24.cs(1,40) : error CS1001: Identifier expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.24.cs(1,42) : error CS1518: Expected class, delegate, enum, interface, or structrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.26.cs(1,9) : error CS0116: A namespace does not directly contain members such as fields or methodsrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.30.cs(1,10) : error CS0116: A namespace does not directly contain members such as fields or methodsrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.35.cs(1,9) : error CS1022: Type or namespace definition, or end-of-file expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.37.cs(1,5) : error CS1022: Type or namespace definition, or end-of-file expectedrnc:\\Documents and Settings\\simonjef\\Local Settings\\Temp\\mftbafdt.39.cs(1,1) : error CS1022: Type or namespace definition, or end-of-file expected"
  Source="Compiling"
  StackTrace:
       at DynaCode.Program.CompileAndRun(String[] code) in C:\Documents and Settings\simonjef\My Documents\Visual Studio 2008\Projects\Compiling\Compiling\Program.cs:line 72
       at DynaCode.Program.Main(String[] args) in C:\Documents and Settings\simonjef\My Documents\Visual Studio 2008\Projects\Compiling\Compiling\Program.cs:line 42
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T11:42:34.787

我相信这是问题所在：

```
string content = File.ReadAllText(@"D:\hi.cs");
string[] code = new string[content.Length];
char[] seperators = { '\n','\r','\t' };
code = content.Split(seperators); 
```

这个想法（我相信）是[`CompileAssemblyFromSource`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromsource.aspx)不需要*单独的行*- 数组中的每个字符串都是一个完整的 C# 源文件。所以你可能*只*需要：

```
string[] code = new[] { File.ReadAllText(@"D:\hi.cs") }; 
```

请注意，即使您的第一个块正在做正确的事情，您仍然会无缘无故地创建一个字符串数组 - 将其编写为更简单：

```
string content = File.ReadAllText(@"D:\hi.cs");
char[] seperators = { '\n','\r','\t' };
string[] code = content.Split(seperators); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:44:23.750

您不需要将代码拆分为这样的数组。

该数组用于传递多个源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-02T10:48:52.680

你可以尝试制作这样的代码

```
 string content = File.ReadAllText(@Path.GetDirectoryName(Application.ExecutablePath) + "\\r.cs");

                char[] seperators = { '\n', '\r', '\t' };
                string[] code = content.Split(seperators);

                CompilerParameters CompilerParams = new CompilerParameters();
                string outputDirectory = Directory.GetCurrentDirectory();

                CompilerParams.GenerateInMemory = true;
                CompilerParams.TreatWarningsAsErrors = false;
                CompilerParams.GenerateExecutable = false;
                CompilerParams.CompilerOptions = "/optimize";
                CompilerParams.GenerateExecutable = false;
                CompilerParams.OutputAssembly = "r.dll";
                FileStream fileStream = File.Open(Path.GetDirectoryName(Application.ExecutablePath) + "\\Output\\r.dll",FileMode.Open);
                string references =  fileStream.Name;

                CompilerParams.ReferencedAssemblies.Add(references);
                fileStream.Close();
                CSharpCodeProvider provider = new CSharpCodeProvider();
                CompilerResults compile = provider.CompileAssemblyFromFile(CompilerParams, Path.GetDirectoryName(Application.ExecutablePath) + "\\r.cs");

                if (compile.Errors.HasErrors)
                {
                    string text = "Compile error: ";
                    foreach (CompilerError ce in compile.Errors)
                    {
                        text += "rn" + ce.ToString();
                    }
                    throw new Exception(text);
                }

                Module module = compile.CompiledAssembly.GetModules()[0];
                Type mt = null;
                MethodInfo methInfo = null;
                MemberInfo[] memberInfo;
                //var dll = Assembly.LoadFile(references);

                if (module != null)
                {
                    mt = module.GetType("materialclassifier.ClassifierFiles");
                }

                if (mt != null)
                {
                    memberInfo = mt.GetMembers();
                    methInfo = mt.GetMethod("main");
                }

                if (methInfo != null)
                {
                    Console.WriteLine(methInfo.Invoke(null, new object[] { "here in dyna code" }));

                } 
```

它在我的代码中没有任何错误地工作

# php - PHPStorm 4 游标

> ID：10314818
> 
> 赞同：18
> 
> 时间：2012-04-25T11:39:04.950
> 
> 标签：php, ide, editor, phpstorm

我不知道是否有人尝试过全新的[PHPStorm 4](http://www.jetbrains.com/phpstorm/download/index.html)，但我遇到了这个新版本的问题，而我之前的主要版本（PHPStorm 3）没有。

基本上，当我单击代码视图空白处的任意位置时，光标会设置在此位置，而不是转到我单击的行上可用的第一个字符：

![PHPStorm 游标示例](../Images/ae6495b9a516e0f1790a832af1acc561.png)

我最初认为这是 PHPStorm 团队的预期选择，但我的同事在他的 Mac 上安装了这个软件（我在 Windows 上），对他来说，光标确实转到了行首。

这很烦人，您有指向此配置选项的指针吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T11:41:27.233

在设置中转到`IDE Settings -> Editor -> Allow placement of caret after end of line`并取消选中该选项。

![在此处输入图像描述](../Images/08f30ad5ae7947d2e6ca54e70c083c27.png)

# c# - 如何创建ajax更新时间？

> ID：10314820
> 
> 赞同：0
> 
> 时间：2012-04-25T11:39:13.040
> 
> 标签：c#, ajax, asp.net-mvc, json, asp.net-mvc-3

我正在创建部分视图。我需要获取自 2012.04.01 以来经过的秒数

```
public PartialViewResult SitePowered()
{
    var dateTime = new DateTime(2012, 4, 1);
    var totalSeconds = (DateTime.Now - dateTime).TotalSeconds;
    ViewBag.TotalSeconds = totalSeconds;
    return PartialView("SitePowered");
} 
```

看法：

```
<script type="text/javascript">
    $(function () {
        $.getJSON("/Home/SitePowered", null, setTime);
    });
</script>
@ViewBag.TotalSeconds секунд 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:44:22.240

你必须做这样的事情：

**行动：**

```
public ActionResult SitePowered()
{
    var dateTime = new DateTime(2012, 4, 1);
    var totalSeconds = (DateTime.Now - dateTime).TotalSeconds;
    return Json(new { seconds = totalSeconds });
} 
```

**客户端：**

```
<script type="text/javascript">
    $(function () {
        $.getJSON("/Home/SitePowered", function(result) {
              // Do something here with result.seconds
              alert(result.seconds);
        });
    });
</script> 
```

希望能帮助到你。

# php - 使用 PHP 获取远程 Web 服务器信息（指纹）

> ID：10314826
> 
> 赞同：0
> 
> 时间：2012-04-25T11:39:39.103
> 
> 标签：php

想使用 php 获取远程 Web 服务器的 Web 服务器信息。例如： www.foo.com 会产生 -->

Apache/2.2.13 (FreeBSD) mod_ssl/2.2.13 OpenSSL/0.9.8e DAV/2 PHP/5.2.11 with Suhosin-Patch

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:48:56.120

```
$info = get_headers($url); 
```

然后 $info 将包含该站点发送的标头数组。您可以选择要保留的信息，或者如果您希望将其全部作为字符串：

```
$string = implode(' ', $info); 
```

请参阅此处的[get_headers](http://php.net/manual/en/function.get-headers.php)信息。

**注意**- 您只能获得远程服务器显示的尽可能多的信息。如果他们选择隐藏此信息，您将看不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:08:44.357

固定 -->

```
<?php $info = get_headers($url);

$string0 = implode(' ', $info);
$string1 = explode('Server:', $string0);

//BEGIN EXTRACTING SERVER DETAILS
$pattern = '#^Server:#i';
$matches = preg_grep($pattern, $info);
?> 
```

# ruby-on-rails - 如何显示时间写出来？

> ID：10314828
> 
> 赞同：0
> 
> 时间：2012-04-25T11:39:51.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, date

使用 Rails，我如何写超时，如下所示：

`2 days 12 hours 5 minutes and 14 seconds`

我觉得有一个 Date 助手可以做到这一点，但是在文档中挖掘并没有发现任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:19:07.040

[humantime](https://github.com/jfi/humantime)是一种选择，但 Rails 已经有了[time_ago_in_words](http://apidock.com/rails/ActionView/Helpers/DateHelper/time_ago_in_words)和[distance_of_time_in_words](http://apidock.com/rails/ActionView/Helpers/DateHelper/distance_of_time_in_words)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:23:23.993

您可以使用 DateTime.strftime。它的工作原理与 C strftime 相同，因此您可以在 Web 上找到文档。

```
DateTime.strftime("%j days %H hours %M minutes and %S seconds") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:18:48.933

它看起来像[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)

如果没有，你可以从这个助手的源代码中得到启发

# android - 通过图像映射在图像页面上实现不同的可点击区域

> ID：10314829
> 
> 赞同：0
> 
> 时间：2012-04-25T11:39:52.057
> 
> 标签：android, imagemap

```
 A B C D
                                E F G H  --figure. 
```

我正在开发 Android 上的 Book App。在我的书应用程序中，有很多图像页面。在第一个图像页面中有 26 个字母（AZ），4 个原始字母（如我的图片所示）。

我的问题是：

1.  我想为每个字母 (AZ) 开发一个可点击区域。当用户单击或触摸任何字母时，应出现一个方形框，如“单击图像 A”（如上图所示）。

2.  在每次触摸或单击字母图像（AZ）时，我都会传递相应的声音。意味着我想为单个图像页面上的不同区域调用不同的侦听器。

我不知道如何在图像上实现可点击区域，可点击区域或坐标不会因模拟器而异。

请给我一些示例代码或想法或参考链接。

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:51:26.727

我记得几天前回答了一个非常相似的问题。为了将其实现为图像，您需要知道图像的哪些区域意味着什么（即，如果您获得触摸事件的坐标，这些坐标将对应于哪个动作）。如果你有这些信息，你就可以`OnTouchListener`用你的 ImageView 注册：

```
imageView.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch (View v, MotionEvent event) {
        int x = event.getX();
        int y = event.getY();
        //now deal with coordinates (x, y)
    }
}); 
```

但是，在您的情况下，我建议使用具有 26 个按钮的布局，并且只`OnClickListener`与每个按钮一起使用。您可以轻松地将按钮设置为您想要的形状，并且可以轻松地为它们设置单独的背景可绘制对象，使其看起来像一个完整的图像。

# android - 带有复选框的Android自定义列表视图？

> ID：10314834
> 
> 赞同：0
> 
> 时间：2012-04-25T11:40:02.647
> 
> 标签：android, mobile

我是 android 新手，我正在启动一个新的应用程序，我必须在其中列出一些用户。该列表包括图像、姓名和手机号码，并且该列表还包括一个复选框。仅当我单击“下载”之类的按钮时，才必须启用该复选框。到目前为止，我有带有复选框的列表视图。我的问题是如何仅在单击“下载”按钮时启用该复选框？还有如何捕获复选框的状态？任何帮助将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:41:30.790

尝试查看本教程[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters)。这是我学习如何做到这一点的地方......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:48:04.920

您将需要在 Android 中自定义列表视图。

*   [拳头在这里学习Andriod](http://developer.android.com/resources/tutorials/views/hello-listview.html)中ListView的基础知识然后学习
*   关于自定义[ListView 在这里](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)
*   [然后在此处](http://www.vogella.com/articles/AndroidListView/article.html)和[此处](http://xjaphx.wordpress.com/2011/06/12/create-application-launcher-as-a-list/)了解有关 ListView 的更多信息

然后实现自己的listview

祝你一切顺利。

# iphone - 在 shouldStartLoadWithRequest 方法中修改 URL 请求并在 Webview 中显示

> ID：10314835
> 
> 赞同：1
> 
> 时间：2012-04-25T11:40:08.777
> 
> 标签：iphone, ipad, uiwebview

我有一个 webview 和 3 个 url。

因此，当应用程序启动时，我在 webview 中显示 URL1。

现在，当我选择 webview 的任何部分时，它将重定向到 URL2。

但只有我想从 URL2 获取一些数据并且不想将其显示给用户。

我可以通过使用 shouldStartLoadWithRequest: 返回 NO 的方法来做到这一点。

但现在我需要在我的 Webview 中显示从 URL2 接收到的数据的 URL 3。

但它没有显示任何东西，我该怎么做？

为此，我使用以下代码

```
-(void)viewDidLoad
{
//Normal showing of URL1 in webview

}

- (BOOL)webView:(UIWebView*)webViewRef shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
{
if(selectedDataExist){

//get data from URL2
//Make New URL3 string
[webView loadRequest: [NSURLRequest requestWithURL:[NSURL URLWithString:myNewUrlString]]];
return NO;
}
else
{
//by default URL1 comes 
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T01:58:39.140

我这样做了：

我试图通过 GET 方法发送信息，所以我将任何请求的 url 的最后 10 个字符（在我的情况下）子串，如果它没有 GET 方法，它会发出一个新请求，将 GET 方法附加到 url 和返回 NO，下次调用此函数时，它将具有 GET 方法，因此它将继续。

```
 -(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

NSString *urls = [request.URL absoluteString];
NSString *code = [urls substringFromIndex: [urls length] - 10];

if (![code isEqualToString:@"?iphone=si"]) {
    NSURL *nueva = [NSURL URLWithString:[NSString stringWithFormat:@"%@?iphone=si",urls]];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:nueva];
    [self.mywebview loadRequest:requestObj];
    return NO;
}
return YES;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T07:01:04.307

我就是这样做的

```
 NSURL *LocalUrl = [[NSURL alloc] initWithString:[newUrl stringByAddingPercentEscapesUsingEncoding: NSASCIIStringEncoding]];

                NSURLRequest *objNSURLRequest;

                objNSURLRequest = [NSURLRequest requestWithURL:LocalUrl];

                [yourwebview loadRequest:ObjNSURLRequest];

                [LocalUrl release];

                return NO; 
```

# php - 如何在php中将4-1显示为月份和日期

> ID：10314836
> 
> 赞同：0
> 
> 时间：2012-04-25T11:40:10.480
> 
> 标签：php

我正在开发一个 php web 应用程序。在这里，我在格式为“m/d”的变量中有日期

```
$var='04/25' 
```

我已将此值作为 strtotime 存储在我的表中

```
$var2=strtotime($var); 
```

然后我需要显示这个值，`4-25`即从 04 中删除 0。如果日期是 1，我需要显示 1 而不是 01

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:42:14.953

使用[PHP 日期函数](http://php.net/manual/en/function.date.php)。在你的情况下，我会说`date("n-j", $var2);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:42:27.820

有太多方法可以做到这一点，所以让我们选择其中一种：

```
ltrim( $var, '0' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:42:50.587

我总是存储时间戳，这样它们可以很容易地与 date() 函数一起使用，将它们转换为我需要的任何格式。

```
$now = time();
print date("n-d",$now); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:02:59.150

试试这个：复制下面的代码并在test.php中过去，运行后你得到输出：4-25

```
 <?php

        $date = "04/25";
        $temp = strtotime($date);
        echo date('n-j',$temp);

   ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T11:43:46.420

只需使用`date`函数： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

```
echo date('n-j', $var2); 
```

# vb.net-2010 - 如何从 ELM327 读取数据？

> ID：10314845
> 
> 赞同：0
> 
> 时间：2012-04-25T11:40:47.763
> 
> 标签：vb.net-2010

我现在正在使用 ELM327 软件来帮助我扫描汽车。但现在我在乞讨，所以我怎样才能让我的软件从 ELM327 读取，还有任何源代码可以帮助我的项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:11:56.800

这取决于您使用的是蓝牙还是 USB。通常，如果您购买 elm 327 设备，您将获得软件来读取它。如果您希望自己的软件读取它，那么您必须向它发送 AT 命令，以获得响应

# python - 将映射应用于部分参数

> ID：10314859
> 
> 赞同：13
> 
> 时间：2012-04-25T11:41:52.507
> 
> 标签：python, functional-programming

给定以下带有两个参数的函数 f，将 map 仅应用于 x 的标准方法是什么？

```
def f (x,y):
    print x,y 
```

更具体地说，我想在一行中使用 map 执行以下操作。

```
list=[1,2,3]
fixed=10
for s in list:
    f(s,fixed) 
```

一种方法是：

```
import functools
map(functools.partial(lambda x,y:f(y,x),fixed),list) 
```

有什么更好的方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-25T11:46:35.930

首先，没有必要使用 lambda AND partial - 它们是替代品：

```
map(lambda x:f(x,fixed),srclist) 
```

其次，`partial`只要您知道参数的名称，您就可以将第二个参数与 绑定：

```
map(functools.partial(f,y=fixed),srclist) 
```

或者，使用列表推导：

```
[f(x, fixed) for x in srclist] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T14:52:27.990

> 给定以下带有两个参数的函数 f，将 map 仅应用于 x 的标准方法是什么？

*关于柯里化和偏应用的一点讨论*

用 FP 术语来说，你的函数`f`是[“uncurried”](http://en.wikipedia.org/wiki/Currying)的——虽然它在概念上需要两个参数，但它们被捆绑在一个产品结构中。在 Python 中，一切都是非咖喱的，一直都是。你必须一次给出所有论点，或者一个都不给出。

为了解决这个问题，有各种技巧，但从概念上讲，你只想“咖喱”这个函数。也就是说，transform `f(x,y)`into `f(x)`which 返回一个新函数`g(y)`。

在默认使用柯里化的语言中，您可以轻松地编写此翻译：

```
-- curry: take a function from (x,y) to one from x to a function from y to z
curry :: ((x,y) -> z) -> (x -> y -> z)
curry f x y     = f (x, y) 
```

因此`curry`，将您的 curried`f`及其产品参数分开，并在它们都可用时应用它们。相反的也很简单：

```
uncurry :: (x -> y -> z) -> ((x,y) -> z)
uncurry f (x,y) =  f x y 
```

这与部分应用有何关系？

*   Currying 接受一个接受*1* ( *n* -product) 参数结构的函数，并返回一个接受*n 个*参数的新函数。
*   部分应用采用*n 个*参数的函数并将它们应用于*k*个参数，产生一个剩余*nk*个参数的函数。

在非柯里化语言中，每个参数都可以依次应用（例如，部分地，关于函数的数量）。在柯里化语言中，您必须首先使用一些技巧来取消函数的柯里化，如上面的示例所示。

我认为在 curried-by-default 环境中更灵活，因为部分应用程序是免费的。在这样的环境中，通常将[修改数据结构的函数链接到管道](https://stackoverflow.com/questions/5863128/ordering-of-parameters-to-make-use-of-currying)中。例如整数修改的管道：

```
(+1) . (*2) . (^3) $ 7 
```

只是一个部分应用的、非柯里化的函数链，由组合而成，每个函数都对前一个函数的输出进行操作。这可能很好，因为它在视觉上分离了关注点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-25T11:46:52.290

```
map(lambda x: f(fixed,x), thelist) 
```

或者根本不使用`map()`，而是使用列表推导。

```
[f(fixed, x) for x in thelist] 
```

PS：不要`list`用作变量名，它是一个重要的内置名称（列表类型）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T14:30:23.893

有什么问题：

```
def add(x, y):
    return x + y

l = [1, 2, 3]

from functools import partial
plus10 = map(partial(add, y=10), l)
print plus10

## [11, 12, 13] 
```

# nhibernate - QueryOver - 如何从三个表的连接中只选择一个对象

> ID：10314861
> 
> 赞同：2
> 
> 时间：2012-04-25T11:41:58.973
> 
> 标签：nhibernate, queryover

假设我有类似的对象：

```
public class User
{
    public int UserId { get; set; } 
    public IList<UsersRentingLog> UsersRentLog { get; set; }
}

public class Car 
{
    public int CarId { get; set; } 
    public IList<UsersRentingLog> CarRentLog { get; set; }
}

public class UsersRentingLog
{
    public Userid { get; set; }
    public CarId { get; set; }
} 
```

现在，我想选择所有租用特定汽车的用户..

用于此的 sql 将是

```
select c.*
from [User] u
    inner join UsersRentingLog l on u.userid = l.UserId
    inner join Car c on l.CarId = c.CarId
where u.userid = @UserId 
```

我试图让这个查询在 QueryOver、NHibernate 中工作，到目前为止，我得到了这个：

```
DetachedCriteria dc = QueryOver.of<User>()
    .where(r => r.UserId == userId)
    .JoinQueryOver<UsersRentingLog>(l => l.UsersRentLog)
    .JoinQueryOver<Car>(c => c.Car)
    .DetachedCriteria
    ; 
```

正如预期的那样，这是从所有三个连接表中选择每个属性，但我实际上只想选择 Cars。请问我该怎么做？

* * *

**更新正确答案**

所以，在回答之后，我不得不做一些修改（主要是轻微的语法错误），并认为我会发布工作版本。

因为我的用户没有直接引用汽车，所以我不得不修改别名来配合这个

```
UsersRentingLog logAlias = null; 
var subQuery = QueryOver.of<User>()
    .Where(user => user.UserId == userId)
    .JoinAlias(user => user.UsersRentLog, () => logAlias)
    .subQuery.Select(Projections.Distinct(Projections.Property(() => logAlias.Car.Id)));

var query = _session.QueryOver<Car>();
    query.WithSubquery.WhereProperty(car => car.Id).In(subQuery)
    .TransformUsing(Transformers.DistinctRootEntity)
    .List<Car>(); 
```

上面一点，我使用的是分离的标准，所以我重写了第二个代码块，如下所示：

```
DetachedCriteria dc = QueryOver.Of<Car>()
    .WithSubquery.WhereProperty(car => car.Id).In(subQuery)
    .TransformUsing(new NHibernate.Transform.DistinctRootEntityResultTransformer())
    .DetachedCriteria
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:15:48.427

```
Car carAlias = null;
var subQuery = QueryOver.of<User>()
    .Where(user => user.UserId == userId)
    .JoinAlias(user => user.Cars, () => carAlias)
    subQuery.Select(Projections.Distinct(
      Projections.Property(() => carAlias.Id)));

var query = _session.QueryOver<Car>();
query.WithSubquery.WhereProperty(car => car.Id).In(subQuery);
.TransformUsing(Transformers.DistinctRootEntity)
.List<Car>(); 
```

# android - 需要日期选择器在 Android 中设置或取消侦听器

> ID：10314864
> 
> 赞同：0
> 
> 时间：2012-04-25T11:42:09.950
> 
> 标签：android

我需要 DatePicker 对话框取消按钮或设置按钮事件侦听器，以便我可以通过按任何按钮移动到特定活动，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T19:19:43.853

```
 public void onDateSet(DatePicker view, int year, int month, int day) {

} 
```

当单击设置或完成（在以后的某些操作系统中）时，会调用此方法并简单地使用它来处理我的场景

# javascript - Dojo ValidationTextArea 小部件在无效时如何突出显示？

> ID：10314870
> 
> 赞同：2
> 
> 时间：2012-04-25T11:42:37.047
> 
> 标签：javascript, validation, dojo, widget

我正在尝试创建一个继承自 ValidationTextBox 的自定义 Dojo ValidationIdBox 小部件。我的自定义小部件将添加与后端服务器的异步重复 ID 检查。

我对 dijit.form.ValidationTextBox 进行了子类化并修改了两个方法：isValid() 和 validate()。但是，我无法让验证完全正常工作。该小部件捕获并突出显示缺少所需输入等问题。它甚至可以捕捉到重复 ID（出现工具提示），但无法按预期突出显示该字段。

我试图用下面的简化代码片段来隔离我的问题。它主要是原始的 Dojo 代码，稍作修改。我的一般策略是让小部件作为常规 ValidationTextBox 进行验证，然后测试重复 ID。我将 isValid() 修改为具有两种模式：普通验证和具有唯一性检查的验证。目前，唯一性测试故意总是失败。

以类似的方式，我修改了 validate() 来做正常的事情，然后如果正常验证成功但唯一性测试验证失败，则进行一些额外的处理。我尝试镜像与 ValidationTextBox 处于`error`状态时相同的逻辑，但未镜像相同的效果：出现“ID 不可用”工具提示，但未出现带有感叹号的红色轮廓。

我检查了[ValidationTextBox 的代码](http://download.dojotoolkit.org/release-1.7.2/dojo-release-1.7.2/dijit/form/ValidationTextBox.js)，但我无法弄清楚这种特殊样式是如何触发的……**有人可以解释一下 ValidationTextArea 是如何工作的吗？**具体来说，我不太确定如何使用`this._maskValidSubsetError`,`aria-invalid`和`this.state`。

（有时，我希望出现工具提示，但不希望出现红色样式。喜欢在处理 AJAX 重复 ID 检查请求时显示。）

```
// If ValidationTextBoxValidates
isValid: function(isFocused, requireUnique) {
    if (typeof requireUnique === 'undefined') requireUnique = false;

    var isValid = this.inherited(arguments);
    var isUnique = false;

    return (requireUnique ? (isValid && isUnique) : isValid);
},

validate: function(/*Boolean*/ isFocused){
    // summary:
    //        Called by oninit, onblur, and onkeypress.
    // description:
    //        Show missing or invalid messages if appropriate, and highlight textbox field.
    // tags:
    //        protected
    var message = "";
    var isValid = this.disabled || this.isValid(isFocused);
    if(isValid){ this._maskValidSubsetError = true; }
    var isEmpty = this._isEmpty(this.textbox.value);
    var isValidSubset = !isValid && isFocused && this._isValidSubset();
    this._set("state", isValid ? "" : (((((!this._hasBeenBlurred || isFocused) && isEmpty) || isValidSubset) && this._maskValidSubsetError) ? "Incomplete" : "Error"));
    this.focusNode.setAttribute("aria-invalid", isValid ? "false" : "true");

    if(this.state == "Error"){
        this._maskValidSubsetError = isFocused && isValidSubset; // we want the error to show up after a blur and refocus
        message = this.getErrorMessage(isFocused);
    }else if(this.state == "Incomplete"){
        message = this.getPromptMessage(isFocused); // show the prompt whenever the value is not yet complete
        this._maskValidSubsetError = !this._hasBeenBlurred || isFocused; // no Incomplete warnings while focused
    }else if(isEmpty){
        message = this.getPromptMessage(isFocused); // show the prompt whenever there's no error and no text
    }

    /// Begin custom widget code
    if (isValid && !this.isValid(isFocused, true) ) {
        isValid = false;

        var isValidSubset = !isValid && isFocused && this._isValidSubset();

        this._maskValidSubsetError = isFocused && isValidSubset; // we want the error to show up after a blur and refocus
        message = 'ID not available';

        this.focusNode.setAttribute("aria-invalid", isValid ? "false" : "true");
    }
    /// End custom widget code

    this.set("message", message);
    return isValid;
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:44:09.253

可能会错过明显的，隐藏在一堆内联 &&|| 中 ;)))))

模糊/按键机制的要点是工具提示仅在当前显示的框上可见，因此 _maskValid

你试过`this.set("state", this.isUnique() ? "" : "Error");`吗？？

小部件是有状态的，而 .set 可能只是解决问题，触发事件或发布主题

# php - Rijndael-256 PHP 中的加密解密

> ID：10314886
> 
> 赞同：0
> 
> 时间：2012-04-25T11:43:37.630
> 
> 标签：php, drupal, mcrypt, rijndael, rijndaelmanaged

我有一种情况，我必须在 PHP 中加密和解密 SOAP xml。我正在尝试加密肥皂 xml 的信封。加密有效，但解密无效。对于加密和解密，我使用本文中指定的代码：

[http://blog.djekldevelopments.co.uk/?p=334](http://blog.djekldevelopments.co.uk/?p=334)

如果输入字符串包含任何特殊字符（例如：'<>'），则解密不起作用。我该如何解决这个问题？

```
function decrypt($string = "")
  {
$keyfile = "./AES.keyz";
$keyfile = file($keyfile);
    $key = base64_decode($keyfile[0]);
    $iv = base64_decode($keyfile[1]);
$string = base64_decode($string);
return strippadding(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $string,MCRYPT_MODE_CBC, $iv));
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:14:49.587

MCRYPT_RIJNDAEL_256 不是带有 256 位密钥的 AES，它的 RIJNDAEL 具有 256 位块大小。

要解密 256 位 AES ，您需要使用 MCRYPT_RIJNDAEL_128 和 256 位密钥。

# javascript - 如何使用 (function(global) { ... })(this);

> ID：10314891
> 
> 赞同：10
> 
> 时间：2012-04-25T11:43:52.040
> 
> 标签：javascript, function

在[这个线程](https://stackoverflow.com/a/10136565/671639)中，我找到了一个我想要使用的 JavaScript 代码片段。

代码如下所示：

```
(function(global) {
  // the function code comes here
})(this); 
```

如何调用此函数来执行代码？我必须为这个`global`变量传递什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T11:45:41.303

该函数会立即执行，您不要通过调用它来执行它。

它是一个函数字面量定义，后跟两个导致该函数立即调用的括号。阅读更多：[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

无论您在其中放置什么代码都会立即运行。任何放在调用括号中的东西都会作为参数传递给函数。假设您的示例代码是在全局范围内定义的，`this`是`window`对象，并且`global`在函数体内被引用。这是封装程序以避免变量冲突、强制严格模式等的好方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-25T11:47:03.333

这个构造定义了一个函数：

```
function(global) {
  // the function code comes here
} 
```

`this`并立即调用它，作为参数传递：

```
([function])(this) 
```

标识符`global`只是函数体内此参数的名称。例如，尝试

```
console.log(this); // outputs something
(function(global) {
    console.log(global); // outputs the same thing as above
})(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:46:08.877

> 如何调用此函数来执行代码？

它已经被调用：`(this)`

> 我必须为这个全局变量传递什么？

`this`

# ruby-on-rails - Rails 3 模板：inject_into_file 的奇怪行为

> ID：10314893
> 
> 赞同：1
> 
> 时间：2012-04-25T11:44:02.747
> 
> 标签：ruby-on-rails, ruby, templates

我正在为 Rails 3 编写一个模板（你可以在[这里](https://gist.github.com/2489048)找到它），我遇到了以下几行的问题：

```
# 8\. config/database.yml modifications
if yes?("Do you want to set the database host to '/var/run/postgresql'?")
  inject_into_file "config/database.yml", " host: /var/run/postgresql\n", :after => "development:\n"

  # FIXME these two won't work :(((( why????
  # inject_into_file "config/database.yml", " host: /var/run/postgresql\n", :after => "production:\n"
  # inject_into_file "config/database.yml", " host: /var/run/postgresql\n", :after => "test:\n"

  # Not finding other solutions, I rewrite the two blocks above with two seds
  run %q(sed -i '/test:/a\ \ host: /var/run/postgresql' config/database.yml)
  run %q(sed -i '/production:/a\ \ host: /var/run/postgresql' config/database.yml)
end 
```

也就是说，第一个 inject_to_file 有效，并且在 config/database.yml 我有

```
development:
  host: /var/run/postgresql 
```

但是其他两个inject_to_file都申请成功了，但是不要修改config/database.yml！所以我有

```
test:
  adapter: postgresql 
```

和

```
production:
  adapter: postgresql 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T03:18:49.080

您必须指定`:force => true`多次注入相同文本的选项。看：

[http://rdoc.info/github/wycats/thor/master/Thor/Actions#insert_into_file-instance_method](http://rdoc.info/github/wycats/thor/master/Thor/Actions#insert_into_file-instance_method)

这个版本适用于我：

[https://gist.github.com/2573325](https://gist.github.com/2573325)

不要问我为什么这个选项有任何意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T17:05:52.967

我在这里偶然发现了一个稍微不同的问题的解决方案：

rails 文档说以这种方式使用 inject_into_file

```
inject_into_file 'name_of_file.rb', after: "#The code goes below this line. Don't forget the Line break at the end\n" do <<-'RUBY'
  puts "Hello World"
RUBY
end 
```

但是，这并不总是对我有用。在某些情况下，它实际上会将单词“puts”和一些 ruby​​ 代码输出到我试图注入的文件中。

最后我发现你可以只传递`inject_into_file`一个字符串，这要容易得多。

```
inject_into_file 'name_of_file.rb', :after => "#The code goes below this line. Don't forget the Line break at the end\n" do
  "Hello World"
end 
```

# c# - 使用继承处理跨项目事件

> ID：10314896
> 
> 赞同：0
> 
> 时间：2012-04-25T11:44:10.073
> 
> 标签：c#, c++, .net, wpf, c++-cli

我有 2 个项目；- 我的应用程序是用 C++ 编写的，其中一些项目文件设置为使用 /clr - 我的 C# WPF 控件库，其中包含一些表单

在 C++ 应用程序中，我从 C# dll 加载表单并将它们显示在 STAThread 中，同时我在后台运行一些其他本机内容。

我想在我的 C++ 应用程序中处理来自 C# 表单的表单事件。这是我启动表单的代码；

```
using namespace System::Windows;
using namespace System::Windows::Controls;
using namespace MyProject::Interface::Views;

public ref class MyProjectApplication : public Application
{
};

[STAThread]
void ManagedMain()
{
    CLILicenseView^ winLicenseAgreement = gcnew CLILicenseView();

    MyProjectApplication^ MyProjectCLI = gcnew MyProjectApplication();
    MyProjectCLI->Run(winLicenseAgreement);
} 
```

我的原始表单称为“License.xaml”，我尝试继承它并覆盖事件，因为我认为它可能有助于我处理事件，但我不知道我在做什么。

```
using namespace System;
using namespace System::Windows;
using namespace System::Windows::Controls;
using namespace MyProject::Interface::Views;

namespace MyProject
{
    public class CLILicenseView : License
    {
        public void CLILicenseView()
        {
            //
        }
    }
} 
```

这是最好的方法吗？如果不是，我如何处理来自 C++ 应用程序的表单事件（即：按钮点击）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:59:53.193

我认为组合在这里是正确的工具，而不是继承。在我从事的 C++/CLI 项目（只是一个类库，没有 UI）中，ref 类通常包含一个指向 C++ 业务逻辑的未管理指针。当用户想要与业务逻辑交互时，他们调用托管方法，然后通过指针调用非托管代码。在您的情况下，当表单想要与非托管代码交互时，它应该回调到`MyProjectApplication`该代码中，然后调用您的非托管代码。

# java - JDK7 中没有 com.sun.tools.javac

> ID：10314904
> 
> 赞同：12
> 
> 时间：2012-04-25T11:44:43.507
> 
> 标签：java, jdk1.6, java-7

我在 Windows 7 64 位中使用 JDK7 和 Eclipse Indiago。我将环境变量 JAVA_HOME 设置为 F:\JDK7 并在路径中添加 %JAVA_HOME%\bin 。这是我的示例代码：

```
com.sun.tools.javac.Main m1 = new com.sun.tools.javac.Main();
m1.compile(source); 
```

我得到的错误：

> com.sun.tools 类型无法解析为类型

为什么没有 com.sun.tools ？有什么问题 ？

[![在此处输入图像描述](../Images/682382e08999dbe8aa1ce2bbf21f14ed.png)](https://i.stack.imgur.com/l5a3e.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-25T11:48:51.187

看起来您正在使用 Eclipse。默认情况下，Eclipse 只导入 JRE jar，而不是来自 JDK 的。

解决方案1：

1.  转到 Eclipse 首选项（在 Windows 上：Window-->Preferences）
2.  打开首选项 Java-->Installed JREs
3.  选择您的 JRE 并按编辑
4.  使用“添加外部 jars”来包含 tools.jar（在 JDK_HOME/lib 中找到）

解决方案2：

编辑您的项目构建路径并添加一个外部库：在 JDK_HOME/lib 中找到的 tools.jar

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T11:47:24.250

您最好使用[JavaCompiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)，而不是尝试直接调用 tools.jar 中的 javac。如果您使用它，API 将为您添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-07T10:44:03.370

javac 在 JDK bin 目录中，但不在 JRE bin 中。

我有一个类似的问题，结果我错误地将我的 JAVA_HOME 变量设置为 JRE 而不是 JDK，即

```
C:\Program Files\Java\jre1.8.0_60 instead of 
C:\Program Files\Java\jdk1.8.0_60 
```

因为我“知道”我复制了正确的目录名称，所以我花了很长时间才看到这两个不同的字符并解决了问题。

# javascript - 字符串的字段验证以及javascript中的数字

> ID：10314906
> 
> 赞同：0
> 
> 时间：2012-04-25T11:44:45.703
> 
> 标签：javascript, validation

我有一种形式的密码字段。现在我必须以这种方式验证字段值应该是一个 7 位字符串和一个数字。否则它将返回false。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:54:22.743

我敢肯定有更好的方法，但类似：

```
if ( /.{7}/.test(str) && /\d/.test(str) ) {
    //OK
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:54:48.593

在您的 javascript 中，您可以使用 RegExp 对象。

```
var regEx = new RegExp(pattern, modifiers); 
```

或更简单地说：

```
var pattern = /pattern/modifiers; 
```

例如

```
var password = "abcdefg1";
var pattern = /\w{7}\d/i;

var isMatch = pattern.test(password); 
```

以下是一些表达方式：

```
[abc]   Find any character between the brackets
[^abc]  Find any character not between the brackets
[0-9]   Find any digit from 0 to 9
[A-Z]   Find any character from uppercase A to uppercase Z
[a-z]   Find any character from lowercase a to lowercase z
[A-z]   Find any character from uppercase A to lowercase z
[adgk]  Find any character in the given set
[^adgk] Find any character outside the given set
(red|blue|green)    Find any of the alternatives specified 
```

元字符：

```
.   Find a single character, except newline or line terminator
\w  Find a word character
\W  Find a non-word character
\d  Find a digit
\D  Find a non-digit character
\s  Find a whitespace character
\S  Find a non-whitespace character
\b  Find a match at the beginning/end of a word
\B  Find a match not at the beginning/end of a word
\0  Find a NUL character
\n  Find a new line character
\f  Find a form feed character
\r  Find a carriage return character
\t  Find a tab character
\v  Find a vertical tab character
\xxx    Find the character specified by an octal number xxx
\xdd    Find the character specified by a hexadecimal number dd
\uxxxx  Find the Unicode character specified by a hexadecimal number xxxx 
```

量词

```
n+  Matches any string that contains at least one n
n*  Matches any string that contains zero or more occurrences of n
n?  Matches any string that contains zero or one occurrences of n
n{X}    Matches any string that contains a sequence of X n's
n{X,Y}  Matches any string that contains a sequence of X to Y n's
n{X,}   Matches any string that contains a sequence of at least X n's
n$  Matches any string with n at the end of it
^n  Matches any string with n at the beginning of it
?=n Matches any string that is followed by a specific string n
?!n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:09:01.423

```
 Create regex first

    Var regex =  /\w{7}\d/i;
    var yourvalue=$("#passwordid").value;

    regex.test(yourvalue){

    return true;

    }
else{
return false
} 
```

# sass - 获取 sass/compass 中的文件列表

> ID：10314907
> 
> 赞同：9
> 
> 时间：2012-04-25T11:44:59.480
> 
> 标签：sass, compass-sass

我正在使用 sass 和 compass，我正在尝试为匹配给定模式的图像创建 css 类。预期/产生的 css 大多看起来像这样：

```
.class1 { background-image: url(class1.png); }
.class2 { background-image: url(class2.png); } 
```

虽然可以使用指南针精灵功能（[http://compass-style.org/help/tutorials/spriting/](http://compass-style.org/help/tutorials/spriting/)），但在我的情况下它很不方便（因为它会生成新文件），因为图像本身已经是精灵表.

所以能够做类似的事情

```
@each $clazz in listFiles("images/*") {
  .#{$clazz} {
    background-image: url('#{$clazz}.png');
  }
} 
```

会很好。有或多或少简单的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T21:31:29.887

您可以通过使用您自己的自定义 Ruby 函数补充内置的 SASS/Compass 函数来完成此操作。[（请参阅此处](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html)SASS 参考中标题为“添加自定义函数”的部分。）只需使用您的自定义代码定义一个 Ruby 文件（例如“list-files.rb”），如下所示：

```
module Sass::Script::Functions
    def listFiles(path)
        return Sass::Script::List.new(
            Dir.glob(path.value).map! { |x| Sass::Script::String.new(x) },
            :comma
        )
    end
end 
```

然后，您可以从您的指南针配置文件（例如“config.rb”）中包含此文件：

```
require File.join(File.dirname(__FILE__), 'list-files.rb') 
```

并在您的 SASS 样式表中访问它，就像您想要的那样：

```
@each $clazz in listFiles("images/*") {
  .#{$clazz} {
    background-image: url('#{$clazz}.png');
  }
} 
```

然后，您可以`compass compile -c config.rb`像往常一样使用 编译。

# ruby-on-rails - 向heroku控制台发送命令

> ID：10314908
> 
> 赞同：0
> 
> 时间：2012-04-25T11:45:01.157
> 
> 标签：ruby-on-rails, heroku, cedar

在 Cedar 上向 heroku 控制台发送命令的正确方法是什么？

`heroku console 2+2`适用于较旧的堆栈 - 它警告我`heroku run console`在雪松上使用。

当我跑

`heroku run console 2+2`

它加载不需要的`"2+2"`环境并打开一个控制台。

```
Loading 2+2 environment (Rails 3.2.3)
irb(main):001:0> 
```

那么在 Cedar 上向 heroku 控制台发送命令的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:05:14.143

这不是最漂亮的解决方案，但是通过管道输入命令确实有效。

```
echo "2 + 2" | heroku run console 
```

查看[代码](https://github.com/heroku/heroku/blob/master/lib/heroku/command/run.rb)，似乎没有（当前）内置方法可以做到这一点。

# testing - 如何自动测试 C 程序使用文件？

> ID：10314909
> 
> 赞同：0
> 
> 时间：2012-04-25T11:45:03.100
> 
> 标签：testing

我有一个 C 程序，我需要使用包含一些测试数据的文件对其进行测试并自动输出结果。我怎样才能做到这一点？我应该修改程序还是应该使用 C 或 Python 之类的其他东西编写另一个程序？哪个更容易？

这是我的 C 程序：

```
int main()
{
    double wh,sh,salary;
    int num = 0;
    int valid = 1;
    printf("Please input two non-negative numbers as a employee's working hours in one week and salary per hour.\n");
    printf("Notice that the salary per hour can't be greater than 1000\nAlso you can't input more than 10 sets of data\n");
    printf("Input them like this:\n20,34\nthen enter the Enter key\n");
    while(scanf("%lf,%lf",&wh,&sh) == 2 && num < 10)
    {
        if(sh <0 || wh <0)
        {
            printf("Salary per hour or salary per hour can't be negative!\n");
        }
        else if(wh > 168)
        {
            printf("Working hours in one week can't be more than 168!\n");
        }
        else if(sh > 1000)
        {
            printf("Salary can't be greater than 1000!\n");
        }
        else
        {
            num ++;
            if(wh <= 40)
            {
                if(sh <= 1000)
                {
                    salary = wh * sh;
                }
                else if(sh > 1000 )
                {
                    salary = wh * 1000;
                }
            }
            else if(wh > 40 && wh <= 50)
            {
                if(sh*1.5 < 1000)
                {
                    salary = 40*sh + (wh-40)*1.5*sh;
                }
                else if(sh*1.5 > 1000 && sh < 1000)
                {
                    salary = 40*sh + (wh-40)*1000;
                }
                else if(sh > 1000)
                {
                    salary = wh * 1000;
                }
            }
            else if(wh > 50)
            {
                if(sh*3 < 1000)
                {
                    salary = 40*sh + 10*1.5*sh + (wh-50)*3*sh;
                }
                else if(sh*1.5 < 1000 && sh*3 >=1000)
                {
                    salary = 40*sh + 10*1.5*sh + (wh-50)*1000;
                }
                else if(sh*1.5 >= 1000 && sh <= 1000)
                {
                    salary = 40*sh + (wh-40)*1000;
                }
                else if(sh > 1000)
                {
                    salary = wh*1000;
                }
            }
            printf("The total working hours is %lf, and salary per hour is %lf, salary is %lf\n",wh,sh,salary);
        }
    }
    return 0;
} 
```

在这一刻，请忽略这些漂浮的文字。

我想包含测试数据的文件是这样的：

```
1,2
34,34
67,43
... 
```

我真的不知道这个测试自动化是如何工作的，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:52:44.100

在 cmd 提示符下

进入

c:\>myprog.exe < input.txt > output.txt

将所有测试用例放入 input.txt

你的输出将打印在 output.txt 文件中

# java - java jdbc设计模式：处理许多插入

> ID：10314911
> 
> 赞同：3
> 
> 时间：2012-04-25T11:45:08.980
> 
> 标签：java, mysql, multithreading, jdbc, batch-insert

我想就我的问题寻求一些建议。我有一个批处理可以进行一些计算（多线程环境）并在表中进行一些插入。我想做一些像批量插入这样的事情，这意味着一旦我得到一个查询，等待有 1000 个查询，然后执行批量插入（不是一个一个地做）。

我想知道这是否有任何设计模式。我有一个解决方案，但它有点复杂：

*   构建一个将接收查询的方法

*   将它们添加到列表（字符串和/或语句）

*   在列表有 1000 个项目之前不要执行

问题：我该如何处理结束？我的意思是，最后的 999 个查询，我什么时候执行它们，因为我永远不会达到 1000 ？我应该怎么办 ？

我正在考虑每 5 分钟唤醒一次并检查列表中项目数的线程。如果他醒来两次并且数字相同，则执行现有查询。

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:57:24.950

您的数据库驱动程序需要支持批量插入。 [看到这个。](http://roseindia.net/jdbc/Jdbc-batch-insert.shtml)

您是否确定您的系统因服务和数据库之间的通信过多而阻塞网络流量？如果没有，我不会担心批处理，直到你确定你需要它。

你提到在你的计划中你想每 5 分钟检查一次。那是永恒。如果您要在 5 分钟内获得 1000 个项目，则不需要批处理。大约是每秒 3 次。

假设您确实想要批处理，让进程每 2 秒唤醒一次并提交排队的任何内容。不要等五分钟。它可能会提交 0 行，也可能会提交 10 行……谁在乎……使用这种方法，您不必担心没有达到您的任意阈值。

我假设插入物一次插入一个。如果您的传入数据一次进入 n ，我将提交每个传入请求，无论发生多少插入。如果您的消息以某种消息传递系统的形式传入，那么无论如何它都是异步的，因此您不必担心批处理。在高负载下，传入的消息只是等到有能力处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:51:21.563

向该 API添加`commit`一种方法，该方法将被调用以确认已添加所有项目。此外，最佳批量大小在 20-50 范围内。在那之后，潜在的收益被越来越多的报表所必需的簿记所抵消。您没有明确提及它，但是您当然必须使用 JDBC 中的专用批处理 API。

如果您需要跟踪许多作者，每个作者都在自己的线程中，那么您还需要`begin`一种方法，并且您可以计算它被调用的次数，与被调用的次数相比`commit`。类似引用计数的东西。当你达到零时，你知道你可以刷新你的语句缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:40:35.837

这是最令人惊奇的概念，我遇到过很多次。因此，根据您的问题，您正在创建一个批次，并且该批次有 1000 个或更多的 insert 查询。但是，如果您以重复的方式插入到同一个表中。

为了避免这种情况，您可以像这样进行插入查询：-

INSERT INTO table1 VALUES('4','India'),('5','Odisha'),('6','Bhubaneswar')

它只能使用多个值执行一次。因此，最好将所有值保留在任何集合元素（arraylist、list 等）中，最后像上面一样进行查询并插入一次。

您也可以使用 SQL Transaction API.(Commit,rollback,setTraction()) 等。

希望，它会帮助你。一切顺利。

# python - matplotlib 可以打印网格交叉点，而不是绘图上的网格线吗？

> ID：10314913
> 
> 赞同：7
> 
> 时间：2012-04-25T11:45:18.067
> 
> 标签：python, matplotlib

我想在绘图上有一些网格线，但实际上全长线太多/分散注意力，甚至是浅灰色虚线。我去手动对 SVG 输出进行了一些编辑，以获得我正在寻找的效果。这可以用matplotlib完成吗？我查看了网格的 pyplot api，唯一能看到的可能是 xdata 和 ydata Line2D kwargs。

![在此处输入图像描述](../Images/a6410ec9cb39234a19b7fc18cf8875dc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:42:19.940

这无法通过基本 API 完成，因为网格线仅使用两个点创建。网格线需要在每个刻度线处都有一个“数据”点，以便绘制一个标记。这在以下示例中显示：

```
import matplotlib.pyplot as plt

ax = plt.subplot(111)
ax.grid(clip_on=False, marker='o', markersize=10)
plt.savefig('crosses.png')
plt.show() 
```

这导致：

![在此处输入图像描述](../Images/287b2d1c358ba64604a0652f5e5faa77.png)

请注意`'o'`标记仅位于 Axes 边缘的开头和结尾，因为网格线仅涉及两个点。

您可以编写一个方法来模拟您想要的东西，使用一系列创建十字标记`Artists`，但仅利用基本绘图功能来绘制十字图案会更快。

这就是我在以下示例中所做的：

```
import matplotlib.pyplot as plt
import numpy as np

NPOINTS=100

def set_grid_cross(ax, in_back=True):
    xticks = ax.get_xticks()
    yticks = ax.get_yticks()
    xgrid, ygrid = np.meshgrid(xticks, yticks)
    kywds = dict() 
    if in_back:
        kywds['zorder'] = 0
    grid_lines = ax.plot(xgrid, ygrid, 'k+', **kywds)

xvals = np.arange(NPOINTS)
yvals = np.random.random(NPOINTS) * NPOINTS

ax1 = plt.subplot(121)
ax2 = plt.subplot(122)

ax1.plot(xvals, yvals, linewidth=4)
ax1.plot(xvals, xvals, linewidth=7)
set_grid_cross(ax1)
ax2.plot(xvals, yvals, linewidth=4)
ax2.plot(xvals, xvals, linewidth=7)
set_grid_cross(ax2, in_back=False)

plt.savefig('gridpoints.png')
plt.show() 
```

结果如下图：

![在此处输入图像描述](../Images/22e2d2bd991d1fbc96ff66e1ca50a46f.png)

如您所见，我使用 x 和 y 中的刻度线来定义一系列我想要网格标记 ('+') 的点。我使用`meshgrid`两个 1D 数组并制作 2 个 2D 数组，这些数组对应于每个网格点上的双循环。我用标记样式将其绘制为`'+'`，并且我已经完成了......几乎。这会在顶部绘制十字，并且我添加了一个额外的关键字来重新排序与绘图关联的线条列表。`zorder`如果要在所有内容后面绘制网格标记，我会调整它们。*****

该示例显示了默认情况下网格位于后面的左侧子图，而右侧子图禁用了此选项。如果您遵循每个图中的绿线，您会注意到差异。

如果您对边界上的网格交叉感到困扰，您可以在定义网格之前删除 x 和 y 的第一个和最后一个刻度线`set_grid_cross`，如下所示：

```
xticks = ax.get_xticks()[1:-1] #< notice the slicing
yticks = ax.get_yticks()[1:-1] #< notice the slicing
xgrid, ygrid = np.meshgrid(xticks, yticks) 
```

我在以下示例中执行此操作，使用更大的不同标记来说明我的观点：

![在此处输入图像描述](../Images/178b2265d4d56cc4f5947f70957cfcae.png)

***** 感谢@fraxel 的回答指出了这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T16:02:03.273

您可以在刻度点的每个交点处绘制线段。它很容易做到，只需抓住`get_ticklocs()`两个轴的刻度位置，然后遍历所有组合，使用`axhline`and绘制短线段`axvline`，从而在每个交叉点创建一个十字准线。我已经设置`zorder=0`好首先绘制十字准线，以便它们位于绘图数据的后面。它易于控制颜色/alpha 和十字线大小。几个轻微的“陷阱”......在你得到刻度位置之前做图......而且`xmin`和`xmax`参数似乎需要标准化。

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(1,1,1)    
ax.plot((0,2,3,5,5,5,6,7,8,6,6,4,3,32,7,99), 'r-',linewidth=4)

x_ticks = ax.xaxis.get_ticklocs()
y_ticks = ax.yaxis.get_ticklocs()    
for yy in y_ticks[1:-1]:
    for xx in x_ticks[1:-1]:
        plt.axhline(y=yy, xmin=xx / max(x_ticks) - 0.02, 
                xmax=xx / max(x_ticks) + 0.02, color='gray', alpha=0.5, zorder=0)
        plt.axvline(x=xx, ymin=yy / max(y_ticks) - 0.02, 
                ymax=yy / max(y_ticks) + 0.02, color='gray', alpha=0.5, zorder=0)
plt.show() 
```

![在此处输入图像描述](../Images/c49ccad453ebc70c0a73df730439cad1.png)

# actionscript-3 - 在 Flash CS 5 发布设置中 - 新的 Flash 播放器不在下拉选项中

> ID：10314914
> 
> 赞同：1
> 
> 时间：2012-04-25T11:45:18.807
> 
> 标签：actionscript-3, flash-cs5, flash

我最新的 Flash Player 版本是 11.2。但是我的项目仍然在 10 和 10.1 下编译，并且没有选项可以将其切换到 11.2。我需要做什么才能获得该选项？我需要安装一些东西吗？

![在此处输入图像描述](../Images/4fffef56e13b4b8b3ac8d39223784c99.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:59:06.533

仅仅因为你有*播放器*并不意味着你有合适的工具来*编译*flash 11

Adobe 提供[了一些](http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)可能对您有所帮助的信息。这也是谷歌上“flash 11 support cs5”的第一个结果

# matlab - Matlab：避免用于拜耳模式去马赛克的 for 循环

> ID：10314927
> 
> 赞同：2
> 
> 时间：2012-04-25T11:46:06.757
> 
> 标签：matlab

我实现了拜耳去马赛克，到目前为止效果很好，但速度很慢。我是 matlab 的新手，并且已经认为 for 循环通常是一种不好的做事方式。

那是我在伪代码中的算法，任何人都可以给我一个提示如何将它更多地matlabize吗？

```
pic = zero(width, height, 3)
for i=1:Width
   for j=1:Height
       if isbluevalue(i, j)
          pic(i,j) = getOtherTwoValues(...)
       if isredvalue(i,j)
          //do accordingly
       if isgreenvalue(i,j)
          //do accordingly
 end
end 
```

有没有办法摆脱for循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:47:50.323

Matlab 中有一个内置函数可以进行拜耳去马赛克。

```
 RGB = demosaic(I, sensorAlignment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:45:46.533

您可以使用 Matlab 的*逻辑索引*来做您想做的事情。例如，你可以写

```
pic(isbluevalue(pic)) = getOtherTwoValues(...) 
```

请注意，这仅适用于您的函数`isbluevalue()`适用于 pic 的元素，而不是数字`i`和`j`.

如果这没有帮助，请更全面地解释您的需求。

# windows-phone-7 - 是否可以在 Windows Phone 7 中预加载程序集？

> ID：10314930
> 
> 赞同：1
> 
> 时间：2012-04-25T11:46:16.667
> 
> 标签：windows-phone-7

我有一个应用程序，其中有很多参考资料，加载时间对我来说是不可接受的。我已经删除了初始屏幕图像并创建了一个动画加载屏幕，方法是创建一个不引用主应用程序的单独项目，然后导航到应用程序其余部分的第一页。它现在确实启动很快，但仍然有点缺乏。

我想在加载屏幕消失之前做另一个动画。我能想到的唯一方法是实际预加载导航到下一页所需的程序集，制作动画，然后导航。

我努力了

*   `OnNavigatedFrom`但是动画没有时间运行，因为从那时起页面将很快被新页面替换。
*   `OnNavigatingFrom`也无济于事，因为我一打电话就打电话`NavigationService.Navigate();`
*   搜索网络和堆栈溢出 :)
*   我还考虑通过让下一页显示加载屏幕的副本并在那里做最后一个动画来伪装它，但它无法匹配加载屏幕动画的当前状态并且更难维护

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:21:04.277

如果要强制加载程序集，只需从该程序集中引用一个类型。

例如，类似`Console.WriteLine(typeof(YourAssembly.SomeType));`的东西会强制加载`YourAssembly`.

现在对于您的问题，也许您可​​以使用用户控件？将主页的内容放在用户控件中。显示加载页面，在后台创建用户控件，让动画播放，然后当动画播放完毕后，将页面内容替换为用户控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:42:26.027

It turns out that you can preload by just creating a new instance of the page you are going to navigate to. Unfortunately that has to be done on the UI thread which can cause animation slowdown, at least in my experience.

Here is a sample of how to do an animation, then preload, then do another animation before navigating. :

```
public partial class LoadScreen : PhoneApplicationPage
{
    public LoadScreen()
    {
        InitializeComponent();
        this.Loaded += OnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        var sb = new Storyboard();
        // create your animation here

        sb.Completed += (sender, args) => PreLoad();
        sb.Begin();
    }

    private void PreLoad()
    {
        // this is the part that actually takes time and causes things to get loaded
        // you may need it in a try/catch block depending on what is in your constructor
        var page = new PageToNavigateTo();

        // now create an animation at the end of which we navigate away
        var sbOut = new Storyboard();
        // create your animation here

        sbOut.Completed += (sender, args) => NavigateToNextScreen();
        sbOut.Begin();
    }

    private void NavigateToNextScreen()
    {
        // navigate here
    }

    protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);

        // remove the loading screen from the backstack so the user doesn't see it again when hitting the back button
        NavigationService.RemoveBackEntry();
    }

} 
```

# php - FOSUserBundle 使用电子邮件登录 (Symfony2)

> ID：10314932
> 
> 赞同：15
> 
> 时间：2012-04-25T11:46:22.497
> 
> 标签：php, symfony, fosuserbundle

我对 Symfony 2.0.x 的 FOSUserBundle 有疑问。在那里的文档中，您可以找到一种方法来更改登录以使用用户名和电子邮件。效果很好！但我想登录以仅使用电子邮件。因此，我在我的 CustomUserManager 中添加了一个功能（从原始版本扩展），以确保您可以使用您的电子邮件登录。

```
namespace Frontend\UserBundle\Model;

use FOS\UserBundle\Entity\UserManager;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;

class CustomUserManager extends UserManager
{
    public function loadUserByUsername($email)
    {
        /*$user = $this->findUserByUsernameOrEmail($username);

        if (!$user) {
            throw new UsernameNotFoundException(sprintf('No user with name "%s" was found.', $username));
        }

        return $user;*/

        //Change it to only email (Default calls loadUserByUsername -> we send it to our own loadUserByEmail)
        return $this->loadUserByEmail($email);
    }

    public function loadUserByEmail($email)
    {
        $user = $this->findUserByEmail($email);

        if (!$user) {
            throw new UsernameNotFoundException(sprintf('No user with email "%s" was found.', $email));
        }

        return $user;

    }
} 
```

但是现在我有一个问题，我需要控制保存在会话中的值。他将我的用户名保存在会话中，当系统检查时，将没有可用的电子邮件（因为他只检查电子邮件）。

所以我的问题是如何/在哪里可以更改存储在用户名变量中的值。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-25T12:33:07.577

This can be done by overriding setters in the User entity:

```
<?php

namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity(repositoryClass="Acme\UserBundle\Entity\UserRepository")
 * @ORM\Table(name="users")
 */
class User extends BaseUser
{

    // ...

    // override methods for username and tie them with email field

    /**
     * Sets the email.
     *
     * @param string $email
     * @return User
     */
    public function setEmail($email)
    {
        $this->setUsername($email);

        return parent::setEmail($email);
    }

    /**
     * Set the canonical email.
     *
     * @param string $emailCanonical
     * @return User
     */
    public function setEmailCanonical($emailCanonical)
    {
        $this->setUsernameCanonical($emailCanonical);

        return parent::setEmailCanonical($emailCanonical);
    }

    // ...

} 
```

It's not clear from your question, but from your namespaces I assume that you have your own child bundle that uses FOSUserBundle as its parent bundle (as per [FOSUserBundle documentation](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_templates.md), example "b").

If you do, you can then easily override Forms and templates in order to remove any `username` fields from the UI and replace them with `email` fields. Since you have overridden the email setters as per above, `username` property will be populated properly.

Although this works, it's not a very nice solution. The downside is that you will still have `username` and `usernameCanonical` columns in the database. We originally wanted to remove these altogether, but this would require too many changes in FOSUserBundle (the username attribute is required by `\FOS\UserBundle\Model\UserInterface`, and bundle code depends on it).

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-07T10:29:28.473

我找到了一个非常简单的解决方案，也许不是最好的，但简单就是力量！;)

我在这里写下来以防万一它对任何人都有好处。

我将用户名/电子邮件登录选项放在提供者中：

在 app/conf/security.yml 中：

```
providers:
    fos_userbundle:
        id: fos_user.user_provider.username_email 
```

然后在您的登录表单的视图中，我只允许使用输入 type="email" 登录：

```
<input type="email" class="form-control" id="username" placeholder="E-Mail" name="_username" required="required"/> 
```

# c# - 通过互联网连接到数据库

> ID：10314937
> 
> 赞同：2
> 
> 时间：2012-04-25T11:46:45.317
> 
> 标签：c#

我创建了一个 3 层 Windows 窗体应用程序。它在局域网上运行良好。但我现在面临的问题是我希望客户端应用程序能够通过互联网连接到服务器数据库。为什么要通过互联网？因为服务器电脑和客户端电脑有可能相距250公里。

另一件事是，我希望这种连接是安全的。这意味着只允许特定的计算机连接到该数据库。

有没有办法做到这一点？有没有我可以阅读的电子书，可以帮助我解决这个问题？

提前致谢

# c# - 列表框迭代 WPF

> ID：10314944
> 
> 赞同：3
> 
> 时间：2012-04-25T11:47:05.690
> 
> 标签：c#, .net, wpf, windows-phone-7

我有一个绑定到可观察集合的列表框，XAML 片段显示每个项目将包含的内容（文本块和 Slidercontrol） Slidercontrol 最初设置为不可见

```
 ListBox.ItemTemplate>
             <DataTemplate>
               <StackPanel Orientation="Vertical" Width="500">

                 <stackPanel Orientation="Horizontal">
                   <TextBlock Margin="0,0,0,0"  Width="100"........
                   <TextBlock Margin="200,10,0,0" Width="100"........ 
                 </StackPanel>

                <Slider Margin="0,0,0,0" Height="100".................

                 <StackPanel Orientation="Horizontal">
                   <TextBlock Width="100" TextWrapping="Wrap"..............
                   <TextBlock Width="100" TextWrapping="Wrap"...............
                 </StackPanel>                                
              </StackPanel>
            </DataTemplate>
         </ListBox.ItemTemplate> 
```

我想首先检查 observableCollection 列表对象的某些 Time 属性，如果时间在当前系统时间之内，我想激活相应的滑块控件 ListBox Item 并更新它，silder 指示及时进度并更新到结束时间，用户无法移动它，但是我如何访问或迭代 ListBoxitem 以便我可以通过 visualhelptree.HELP 激活 Slider 控件！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:14:30.103

**再次更新**

* * *

首先，只要您只是使用`Slider`来控制时间进度，那么正确使用的控件就是`ProgressBar`控件（`Slider`控件用于让用户更改值，例如更改媒体播放器的音量）。此外，您可以更轻松地实现这一点，而无需使用`TreeVisualHelper`. 假设您绑定到以下`ObservableCollection`对象：

```
ObservableCOllection<MyObject> Collection; 
```

编辑`MyObject`类并添加`double`属性以指示 的进度值，此外`ProgressBar`添加一个`Timer`对象以每 5 分钟触发一次以检查两次并通过更改布尔值来决定是否启用 Slider，如下所示：

```
public class MyObject
{
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }

    public double ProgressValue { get; set; }
    private System.Timers.Timer TimeChecker;

    public MyObject()
    {
         // 5 Minutes = 5 * 60 Seconds = 5 * 60 * 1000 Milliseconds
         TimeChecker = new Timer(300000);
         TimeChecker.Elapsed += CheckTimes;
    }

    public CheckTimes()
    {
         // Check StartTime and EndTime to decide whether to enable the slider or not.
         if(...)
         {
              // Here you can add the appropriate value to indicate the current progress
              ProgressValue == ....;
         }
         else
              ProgressValue == ....;
    }
} 
```

然后，在项目模板中，将您`ProgressBar.Value`的属性绑定到该`ProgressValue`属性，它将类似于以下内容：

```
<BrogressBar Value="{Binding ProgressValue}"/> 
```

这样每个项目都有自己的计时器。一个更好的选择是只有一个计时器每 5 分钟遍历一次集合并执行必要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:52:49.067

试试 ValueConverter - 你需要这样的东西：

```
<Slider Margin="0,0,0,0" Height="100" IsEnabled="{Binding Path=Time, Converter={StaticResource IsTimeNearSystemTimeConverter}}" /> 
```

**编辑**

听起来你需要使用 multivalueconverter 进行多重绑定

```
public class BetweenTimesMultiValueConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var time1 = (DateTime)values[0];
        var time2 = (DateTime)values[1];
        var current = DateTime.Now;
        return time1 > current && time2 < current;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

将上述类作为静态资源添加到您的 xaml 中，然后像这样使用它：

```
<Slider Margin="0,0,0,0" Height="100">
    <Slider.IsEnabled>
        <MultiBinding Converter="{StaticResource betweenTimeConverter}">
            <Binding Path="EarlyTime" />
            <Binding Path="LateTime" />
        </MultiBinding>
    </Slider.IsEnabled>
</Slider> 
```

# c++ - 如何将抽象类型数组作为函数参数传递？

> ID：10314945
> 
> 赞同：0
> 
> 时间：2012-04-25T11:47:14.483
> 
> 标签：c++, inheritance, polymorphism, abstract-class, parameter-passing

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:53:12.333

The short answer is: you can't. Arrays are not polymorphic in C++; this is for good reason - see e.g. [What is object slicing?](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c). Remember that to do e.g. `arr[i]`, the compiler needs to know how big each element is (to calculate the address offset); this calculation will be wrong, in general, for derived types.

You consider using a function template, or perhaps an array/container of (smart) pointers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:59:52.467

You can't have an array of objects and then cast it to array of other objects. Think of it, if Vecteur sizeof is 16 and Testable sizeof is 4, how could this even work?

What you want is an array of pointers to objects.

```
void commencerTest(Testable* testables[], int nTestables)
{
    for (int i=0; i < nTestables; i++)
        testables[i]->afficher();
}

int main()
{
    Testable* vect[10];

    for(int i=0; i<10; i++)
        vect[i] = new Vecteur();

    commencerTest(vect, 10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:05:28.677

Try this:

```
template <typename Type>
  void Testeur::commencerTest(Type *testables, int nTestables, string titre) { 
```

The code will eventually complain about not knowing the size of the array. Polymorphism will work through a pointer but not an array as others have noted.

As another possibility, you can use compile-time polymorphism for both type and number for static arrays:

```
template<typename Type, size_t Num>
  void Testeur::commencerTest(Type (&testables)[Num], string titre) { 
```

Also, the standard library containers are a good solution.

# .net-4.0 - ':' 字符，十六进制值 0x3A，不能包含在名称中

> ID：10314946
> 
> 赞同：-3
> 
> 时间：2012-04-25T11:47:17.277
> 
> 标签：.net-4.0, xml-parsing, linq-to-xml

我已经看到了这个问题，但我没有看到答案..

所以我得到这个错误：

```
The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

在此代码上：

```
 XDocument XMLFeed = XDocument.Load("http://feeds.foxnews.com/foxnews/most-popular?format=xml");
    XNamespace content = "http://purl.org/rss/1.0/modules/content/";

    var feeds = from feed in XMLFeed.Descendants("item")
        select new
        {
            Title = feed.Element("title").Value,
            Link = feed.Element("link").Value,
            pubDate = feed.Element("pubDate").Value,
            Description = feed.Element("description").Value,
            MediaContent = feed.Element(content + "encoded")
        };

    foreach (var f in feeds.Reverse())
    {
        ....
    } 
```

一个项目看起来像这样：

```
<rss>    
<channel>

....items....

<item>
<title>Pentagon confirms plan to create new spy agency</title>
<link>http://feeds.foxnews.com/~r/foxnews/most-popular/~3/lVUZwCdjVsc/</link>
<category>politics</category>
<dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/" />
<pubDate>Tue, 24 Apr 2012 12:44:51 PDT</pubDate>
<guid isPermaLink="false">http://www.foxnews.com/politics/2012/04/24/pentagon-confirms-plan-to-create-new-spy-agency/</guid>
<content:encoded xmlns:content="http://purl.org/rss/1.0/modules/content/"><![CDATA[|http://global.fncstatic.com/static/managed/img/Politics/panetta_hearing_030712.jpg<img src="http://feeds.feedburner.com/~r/foxnews/most-popular/~4/lVUZwCdjVsc" height="1" width="1"/>]]></content:encoded>
<description>The Pentagon confirmed Tuesday that it is carving out a brand new spy agency expected to include several hundred officers focused on intelligence gathering around the world.&amp;amp;#160;</description>
<dc:date xmlns:dc="http://purl.org/dc/elements/1.1/">2012-04-4T19:44:51Z</dc:date>
<feedburner:origLink>http://www.foxnews.com/politics/2012/04/24/pentagon-confirms-plan-to-create-new-spy-agency/</feedburner:origLink>
</item>

....items....

</channel>
</rss> 
```

我想要的只是获取“http://global.fncstatic.com/static/managed/img/Politics/panetta_hearing_030712.jpg”，然后在此之前检查 content:encoded 是否存在..

谢谢。

**编辑：** 我找到了一个示例，我可以显示和编辑尝试处理它的代码..

**EDIT2：** 我以丑陋的方式做到了：

```
text.Replace("content:encoded", "contentt").Replace("xmlns:content=\"http://purl.org/rss/1.0/modules/content/\"",""); 
```

然后以正常方式获取元素：

```
MediaContent = feed.Element("contentt").Value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:55:59.147

您应该使用 XNamespace：

```
XNamespace content = "...";

// later in your code ...
MediaContent = feed.Element(content + "encoded") 
```

[在此处](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx)查看更多详细信息。

（当然，您要分配给内容的字符串与中相同`xmlns:content="..."`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:23:47.440

以下代码

```
 static void Main(string[] args)
    {

            var XMLFeed = XDocument.Parse(
@"<rss>    
<channel>

....items....

<item>
<title>Pentagon confirms plan to create new spy agency</title>
<link>http://feeds.foxnews.com/~r/foxnews/most-popular/~3/lVUZwCdjVsc/</link>
<category>politics</category>
<dc:creator xmlns:dc='http://purl.org/dc/elements/1.1/' />
<pubDate>Tue, 24 Apr 2012 12:44:51 PDT</pubDate>
<guid isPermaLink='false'>http://www.foxnews.com/politics/2012/04/24/pentagon-confirms-plan-to-create-new-spy-agency/</guid>
<content:encoded xmlns:content='http://purl.org/rss/1.0/modules/content/'><![CDATA[|http://global.fncstatic.com/static/managed/img/Politics/panetta_hearing_030712.jpg<img src='http://feeds.feedburner.com/~r/foxnews/most-popular/~4/lVUZwCdjVsc' height='1' width='1'/>]]></content:encoded>
<description>The Pentagon confirmed Tuesday that it is carving out a brand new spy agency expected to include several hundred officers focused on intelligence gathering around the world.&amp;amp;#160;</description>
<dc:date xmlns:dc='http://purl.org/dc/elements/1.1/'>2012-04-4T19:44:51Z</dc:date>
<!-- <feedburner:origLink>http://www.foxnews.com/politics/2012/04/24/pentagon-confirms-plan-to-create-new-spy-agency/</feedburner:origLink> -->
</item>

....items....

</channel>
</rss>");
            XNamespace contentNs = "http://purl.org/rss/1.0/modules/content/";
            var feeds = from feed in XMLFeed.Descendants("item")
                        select new
                                   {
                                       Title = (string)feed.Element("title"),
                                       Link = (string)feed.Element("link"),
                                       pubDate = (string)feed.Element("pubDate"),
                                       Description = (string)feed.Element("description"),
                                       MediaContent = GetMediaContent((string)feed.Element(contentNs + "encoded"))
                                   };
            foreach(var item in feeds)
            {
                Console.WriteLine(item);
            }
        }

        private static string GetMediaContent(string content)
        {
            int imgStartPos = content.IndexOf("<img");
            if(imgStartPos > 0)
            {
                int startPos = content[0] == '|' ? 1 : 0;

                return content.Substring(startPos, imgStartPos - startPos);
            }

            return string.Empty;
        } 
```

结果是：

```
{ 标题 = 五角大楼确认创建新间谍机构的计划，链接 = http://feeds.f
oxnews.com/~r/foxnews/most-popular/~3/lVUZwCdjVsc/，pubDate = 2012 年 4 月 24 日星期二 1
2:44:51 PDT，描述 = 五角大楼周二证实，它正在削减
 一个全新的间谍机构，预计将包括数百名专注于
全球情报收集。 , MediaContent = http://global
.fncstatic.com/static/managed/img/Politics/panetta_hearing_030712.jpg }
按任意键继续 。. .

```

几点：

*   您永远不想将 Xml 视为文本 - 在您的情况下，您删除了命名空间声明，但实际上如果命名空间被声明为内联（即没有绑定到前缀）或将定义不同的前缀，您的代码将无法工作，即使语义上两个文档将是等效的
*   除非您知道 CDATA 中的内容以及如何处理它，否则您总是希望将其视为文本。如果你知道它是别的东西，你可以在解析后以不同的方式对待它 - 有关更多详细信息，请参阅下面我对 CDATA 的详细说明
*   为了避免在元素丢失时出现 NullReferenceExceptions，我使用了显式转换运算符（字符串）而不是调用 .Value
*   您发布的 Xml 不是有效的 xml - feedburner 前缀缺少命名空间 Uri

**这不再与问题有关，但可能对某些人有帮助，所以我离开了**

就编码元素的内容而言，它在 CDATA 部分内。CDATA 部分中的内容不是 Xml，而是纯文本。CDATA 通常用于不必编码 '<'、'>'、'&' 字符（如果没有 CDATA，它们必须编码为 < > 和 & 以不破坏 Xml 文档本身），但 Xml 处理器将字符处理为CDATA 就好像它们已被编码（或更正确地对它们进行编码）。如果您想嵌入 html，CDATA 很方便，因为嵌入的内容在文本上看起来像原始内容，但如果 html 不是格式良好的 Xml，它不会破坏您的 xml。由于 CDATA 内容不是 Xml 而是文本，因此不可能将其视为 Xml。您可能需要将 is 视为文本并使用例如正则表达式。*它是一个有效的 Xml，您可以再次将内容加载到 XElement 并对其进行处理。在您的情况下，您的内容混合在一起，因此除非您使用一些肮脏的技巧，否则这并不容易。如果您只有一个顶级元素而不是混合内容，那么一切都会很容易。hack 是添加元素以避免所有麻烦。在 foreach 外观中，您可以执行以下操作：*

 *```
var mediaContentXml = XElement.Parse("<content>" + (string)item.MediaContent + "</content>");
Console.WriteLine((string)mediaContentXml.Element("img").Attribute("src")); 
```

同样，它并不漂亮，而且它是一种 hack，但如果编码元素的内容是有效的 Xml，它将起作用。更正确的做法是让我们将 ConformanceLevel 设置为 Fragment 的 XmlReader 并适当地识别各种节点以创建相应的 Linq to Xml 节点。*

# magento - Magento 安装问题（未找到安装）

> ID：10314948
> 
> 赞同：0
> 
> 时间：2012-04-25T11:47:20.433
> 
> 标签：magento, hyperlink, installation

我目前正在尝试在运行最新版本 Ubuntu Server 的虚拟机上安装最新版本的 Magento。Ubuntu 已使用 Nginx 和 PhpMyAdmin 正确设置。我遇到的问题与 Magento 本身的安装有关。我的站点文件夹“magento.dev”根目录下的 /magento/ 文件夹中有 magento CMS，但是当我通过输入“http://magento.dev/magento”安装 CMS 时，我被重定向到“我采取的 http://magento.dev/magento/index.php/install/" 是正常的，表明重写工作正常，但问题是我得到一个链接似乎已损坏的错误。我也试过“http://magento.dev/magento/install.php”和其他几个但没有运气。

我通过取消注释“RewriteBase /magento/”来编辑 .htaccess 以反映 magentos 根文件夹。

我已经广泛搜索了这个问题的修复方法，但到目前为止还没有真正找到任何有用的东西。

希望你们能帮助我。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:09:05.750

nginx 配置的语法与 apache 不同（但更简洁）。

您可能正在使用 apache2 的 nginx 配置

PS：nginx配置文件一般是/etc/nginx/sites-available/websitename

看看这个问题，它可能会对你有所帮助。[https://serverfault.com/questions/24243/nginx-support-for-htaccess-rewrite-rules-differences-from-apache](https://serverfault.com/questions/24243/nginx-support-for-htaccess-rewrite-rules-differences-from-apache)

# c++ - 写入大型二进制文件时，ofstream::write 中途失败

> ID：10314949
> 
> 赞同：0
> 
> 时间：2012-04-25T11:47:22.837
> 
> 标签：c++, ofstream

在运行期间，我的程序会同时创建两个大型二进制文件并将其写入磁盘。文件 A 大约 240GB，文件 B 大约 480GB。这两个文件由两个`ofstream`对象维护，写操作是通过成员函数`write`循环执行的。

现在的问题是：每次整个写文件过程达到63~64%，写文件操作就会失败。第一次在文件 A 上失败，第二次在文件 B 上失败。

这几天程序运行期间，我楼的电源恰好在升级中。巧合的是，每次程序失败时，电工都恰巧在切断和恢复中央空调和部分办公室的电源。所以，我很想知道写文件失败是不是电源不稳定造成的。

我确定失败不是由文件大小限制引起的，因为我尝试使用相同的方法写入单个 700GB 文件而没有任何问题。

有什么方法可以查出详细原因吗？我觉得标志（`badbit`和`eofbit`）`failbit`没有`ofstream`提供太多信息。现在我正在尝试使用`errno`并`strerror`获取详细的错误消息。但是，我看到 is 的可能值`errno`，`EIO`它表示“I/O 错误”，它再次没有提供有用的信息。

有没有人遇到过这种情况？

顺便说一句，当文件 A 和文件 B 的大小很小时，程序运行不会出错。

PS：这次程序在 55% 处失败，errno 值为 EINVAL: Invalid argument。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:00:38.987

已确认，原因确实是 NTFS 的一个错误：[NTFS 卷中的碎片严重的文件可能不会增长到超过一定大小](http://support.microsoft.com/default.aspx?scid=kb;EN-US;967351)。这意味着 CreateFile 和 WriteFile 也不能从根本上解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:04:36.350

好吧，我已经用 Win32 API 解决了这个问题：CreateFile 和 WriteFile。

# android - 创建 Android 应用构建

> ID：10314952
> 
> 赞同：0
> 
> 时间：2012-04-25T11:47:29.717
> 
> 标签：android, android-build

如何创建类似于 Windows 代码构建的 Android 应用构建？我将我的 Android 应用程序代码库签入到 Tortoise SVN。但我也签入了二进制文件 - 即 apk 文件等，而不仅仅是源代码。每次发生更改时，我都会在 Eclipse 上手动构建它，然后更新 apk 和代码文件夹。是否没有像在 Windows 上那样创建构建的机制，您可以在其中运行运行 Visual Studio exe 的批处理文件来创建构建和二进制文件。我需要这个，否则它只是每次都替换 apk。我不知道这个简单的细节非常令人沮丧，所以请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:28:20.203

您可以使用 ant 构建脚本（详见[http://developer.android.com/guide/developing/building/building-cmdline.html](http://developer.android.com/guide/developing/building/building-cmdline.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:51:53.060

实际上，您只需将项目签入到 SVN。当其他团队成员甚至您将其加载到另一个工作空间（另一台 PC 或差异 Eclipse WorkSpace）时，Eclipse 将抛出错误。

只需清理项目，它就会再次为您重建应用程序和 APK 文件。没什么好担心的。我和我的朋友已经做了好几次了。

如我错了请纠正我。

# mysql - 按日期时间区分最后两条记录的值

> ID：10314953
> 
> 赞同：2
> 
> 时间：2012-04-25T11:47:32.630
> 
> 标签：mysql, sql

我有一个表，我需要在每个 *item_id* 的最后两次*运行*`id, item_id, value (int), run (datetime)`之间选择*值差异。*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:01:26.430

```
SELECT item_id, ABS(value1 - value2) AS diff
FROM (  SELECT h.item_id, h.value AS value1, h2.value AS value2
        FROM (  SELECT id, item_id, value
                FROM table_name
                GROUP BY item_id
                ORDER BY run DESC) AS h
        INNER JOIN (    SELECT id, item_id, value
                        FROM table_name
                        ORDER BY run DESC) AS h2
        ON h.item_id = h2.item_id AND h.id != h2.id
        GROUP BY item_id) AS h3 
```

我相信这应该对你有用。只需替换`table_name`为正确的名称。

**说明：**
基本上我将表与自身按`run DESC`顺序加入，根据 item_id 和 id 加入它们。然后我再次对它们进行 GROUP BY 以删除潜在的第 3 次等情况。最后我通过 ABS(value1 - value2) 计算它们之间的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:24:05.770

```
 SELECT t2.id, t2.item_id, (t2.value- t1.value) valueDiff, t2.run
    FROM ( table_name AS t1 
           INNER JOIN 
           table_name AS t2 
           ON t1.run = (SELECT MAX(run) FROM table_name where run < t2.run) 
                 and t1.item_id = t2.item_id) 
```

这是假设您想要记录与上次*运行的记录之间的差异**

# sharepoint - SharePoint 2007 网站的 MasterPage 能否打开？

> ID：10314954
> 
> 赞同：0
> 
> 时间：2012-04-25T11:47:33.353
> 
> 标签：sharepoint, master-pages

有一个 Sharepoint 2007 网站无需接触代码即可维护。人们通过使用 UI 中的链接、SiteActions>>（在 Look & Feel 下）MasterPage 选择 default.master 来设置他们的母版页。

现在，他们需要在母版页中进行一些更改。

当我在 Sharepoint Designer 2007 中打开该站点时，母版页被引用为 MasterPageFile="~masterurl/default.master"。

我想打开他们引用的这个母版页 ~masterurl/default.master。

我检查了 _catalogs 文件夹中的每个 .master，但没有任何结果。

我的任务是确定他们使用的母版页并对其进行修改。

帮我找到母版页~masterurl/default.master

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:56:13.007

您是否尝试过在母版页库中编辑母版页？转到站点设置 -> [画廊] 母版页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:00:44.633

`MasterPageFile="~masterurl/default.master"`是一个动态令牌，`/_catalogs/masterpage/default.master`默认设置为“”。

查看 msdn 了解更多信息： http: [//msdn.microsoft.com/en-us/library/ms476046 (office.12).aspx](http://msdn.microsoft.com/en-us/library/ms476046(office.12).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:01:00.530

您可以从母版页库中打开母版页。但不要只是编辑它，用新名称保存它，然后再编辑它。您可以稍后将母版页分配给您的页面。

请参阅： http: [//office.microsoft.com/en-us/sharepoint-server-help/create-or-edit-a-master-page-HA010157775.aspx](http://office.microsoft.com/en-us/sharepoint-server-help/create-or-edit-a-master-page-HA010157775.aspx)

# postgresql - 匿名函数 postgresql 的返回值

> ID：10314963
> 
> 赞同：28
> 
> 时间：2012-04-25T11:48:16.607
> 
> 标签：postgresql, anonymous-function, plpgsql

如何？

举个简单的例子。我有一个简单的功能：

```
DO LANGUAGE plpgsql $$ DECLARE
BEGIN
EXECUTE 'SELECT NOW()';
END $$; 
```

如何从匿名函数返回“NOW()”的值或其他值？该函数作为示例给出我有一个更复杂的函数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T13:36:04.297

```
DO LANGUAGE plpgsql $$ DECLARE
BEGIN
execute '
create temporary table t
as
SELECT NOW()
';
END $$;

select * from t; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-25T12:18:14.670

它不是匿名函数，而是[匿名代码块](http://www.postgresql.org/docs/current/interactive/sql-do.html)。

*   如果您需要*返回*值，请考虑[创建真正的函数](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)；
*   如果您需要输出一些调试信息，只需[`RAISE NOTICE`](http://www.postgresql.org/docs/current/interactive/plpgsql-errors-and-messages.html).

# objective-c - CoreData：findAll 返回对象，但简单的 fetchRequest 确实返回 0 个对象

> ID：10314978
> 
> 赞同：0
> 
> 时间：2012-04-25T11:49:20.147
> 
> 标签：objective-c, ios, core-data, nsfetchrequest

我正在使用 CoreData 并执行以下命令会返回许多对象：

```
 [Contact findAll]; 
```

但是，当我像这样设置一个简单的`NSFetchrequest`东西时，我得到了 0 个对象。

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    fetchRequest.entity = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:self.context];
    fetchRequest.sortDescriptors = [NSArray arrayWithObject:[[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] 
                                     initWithFetchRequest:fetchRequest
                                     managedObjectContext:self.context
                                     sectionNameKeyPath:nil
                                     cacheName:nil];

    NSError *error;
    NSArray *array = [self.context executeFetchRequest:fetchRequest error:&error]; 
```

请告诉我我在这里做错了什么。由于我没有 Predicate 集，我希望得到相同数量的对象，但我得到一个包含 0 个对象和`error = nil`.

请注意，这`self.context`不是零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:30:06.273

如果您使用的是 RESTKit，我猜 RESTKit 正在设置自己的核心数据上下文/存储，当您手动执行此操作时，您使用的是 Apple 的 Xcode 模板提供的默认设置。停止使用`self.context`并从 RESTKit 获取上下文，或使用 RESTKit 的一种便捷方法，例如`objectsWithFetchRequest:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:57:33.707

RestKit 从 0.10 开始维护每个线程的对象存储。如果 RestKit 还没有完成您的数据，这可能会很棘手（即：您的 RKRequestQueue 已经完成，但它仍在处理您的映射）。

您可以使用 Active Record 类别访问外国商店，即：

```
NSManagedObjectContext *restContext = [[[RKObjectManager sharedManager] objectStore] managedObjectContextForCurrentThread];
NSArray *allTexts = [TextEntity findAllInContext:restContext]; 
```

希望这可以帮助！

# asp.net - 如何在 web.config 文件中为用户、管理员和其他人授予权限？

> ID：10314979
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:49:23.407
> 
> 标签：asp.net, vb.net, web-config

我很困惑在 web.config 中授予用户、管理员和其他人的权限。这是我的 web.config

```
 <authorization>      
  <deny users="*"/>
  <allow users ="neerajjadon"  roles ="Admin">     
</authorization> 
```

现在我用名称 neerajjadon 登录，然后一个新页面出现在这个页面上，我有一个链接按钮可以移动到另一个页面。如果我点击这个链接按钮，那么它不会进入下一页，它将再次登录页面。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:00:40.430

如果另一个页面位于子文件夹中，那么也许您可以在该目录中添加单独的 web.config：

```
 <authorization>  
   <deny users="*"/> 
   <allow users ="neerajjadon"  roles ="Admin">   
 </authorization> 
```

或其他选项，可能不实用，但您可以向特定页面添加授权，例如：

```
 <location path="page 1.aspx">
    <system.web>
      <authorization>
       <allow users ="neerajjadon"  roles ="Admin"> 
       <deny users="*"/>
      </authorization>
     </system.web>
   </location> 
```

# java - 在 java 的 freeTTS 中检测 Speak 的结尾

> ID：10314980
> 
> 赞同：5
> 
> 时间：2012-04-25T11:49:24.523
> 
> 标签：java, freetts

我正在使用[freeTTS](http://freetts.sourceforge.net/docs/index.php)库将文本转换为语音。我可以使用这个库来编写我的代码，我可以使用以下代码播放特定文本的语音：

```
Voice voice = VoiceManager.getInstance().getVoice("kevin16");
if (voice != null) {
    voice.allocate();
}
voice.speak("Hello world"); 
```

当 tts 库完成发言过程时，有没有一种方法可以让我得到回调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:13:30.157

我自己找到了答案.. 当 lib 完成发言过程时，我们不需要回调。只有当说话过程结束时，控制才会进入下一行。

我就是这样做的：

```
 Thread t = new Thread() {
        @Override
        public void run() {
            super.run();
            try {
            voice = initializeTTS(); // a func to initialize TTS lib.
            voice.speak("Hello world");
            // do whatever you want to do from here only.
            } catch (Exception e) {
               e.printStackTrace();
            }
        }
};
t.start(); 
```

# jquery - 自动化工作流程设计

> ID：10314984
> 
> 赞同：0
> 
> 时间：2012-04-25T11:49:46.270
> 
> 标签：jquery, ajax, asp.net-mvc

我正在实现一个 MVC 应用程序，因为我有一个要求，比如在网页中呈现动态工作流。下面是示例场景：

我有一个需要完成 10 个步骤的任务，我只在整个任务中完成了 4 个步骤。我需要在图表中显示所有 10 个步骤（在此决策制定场景中也适用）并仅突出显示我以彩色完成的步骤。

asp.net/ajax/jquery 中是否有任何可用的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:33:00.330

你可以试试 JsPlumb。有一个状态机（工作流程）的演示。JsPlumb 仅提供 UI，您需要编写逻辑以更改颜色等...

# opengl - 与 GLSL 中的 texture2D() 和 OpenGL 中的 glTexImage2D() 相关的内部格式

> ID：10314986
> 
> 赞同：1
> 
> 时间：2012-04-25T11:49:48.163
> 
> 标签：opengl, format, textures

我对与 GLSL 中的 texture2D() 和 OpenGL 中的 glTexImage2D() 相关的内部格式感到困惑，当我使用时（注意`third`和`eighth`参数）：

```
glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F_ARB, WINDOW_SIZE, WINDOW_SIZE, 0, GL_RGBA, 
            GL_FLOAT, floatDataPtr); 
```

我在`nonclampedvalue`glsl 中得到了 sampler2D ，而没有钳制到 [0, 1]：

```
vec4 nonclampedvalue = texture2D(my16floattex2d, texcoord1); 
```

当我使用：

```
glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA8, WINDOW_SIZE, WINDOW_SIZE, 0, GL_RGBA, 
            GL_UNSIGNED_BYTE, byteDataPtr); 
```

我将`clampedvalue`glsl 中的 sampler2D 夹在 [0, 1] 上：

```
vec4 clampedvalue = texuture2D(myunsignedbytetex2d, texcoord2); 
```

所以我的问题是这样的：

1.  当像这样调用 glTexImage2D 时，我将在 glsl 中获得什么值（夹紧或不夹紧）：

    ```
    glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA8, WINDOW_SIZE, WINDOW_SIZE, 0, GL_RGBA, 
           GL_FLOAT, floatDataPtr); 
    ```

2.  当像这样调用 glTexImage2D 时，我将在 glsl 中获得什么值（夹紧或不夹紧）：

    ```
    glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F_ARB, WINDOW_SIZE, WINDOW_SIZE, 0, GL_RGBA,
            GL_UNSIGNED_BYTE, byteDataPtr); 
    ```

3.  由于我在OpenGL官方网站上找不到详细信息，调用时传递给纹理的数据的不同内部格式以及不同类型（例如上面提到的GL_FLOAT或GL_UNSIGNED_BYTE）的sampler2D纹理中将返回什么值glTexImage2D（）？所有的规则是什么？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:08:21.113

> 当像这样调用 glTexImage2D 时，我将在 glsl 中获得什么值（夹紧或不夹紧）：

这仅由[“内部格式”参数](http://www.opengl.org/wiki/Image_Format)控制。规范化的内部格式是……规范化的。它们不存储浮点值；它们存储被*解释*为浮点数的*整*数值。最大整数值变为 1.0，最小值变为 0.0（如果是 SNORM 格式，则为 -1.0）。

 *> 由于我在OpenGL官方网站上找不到详细信息

下次再仔细看看；它就在 Wiki 上。用于创建[纹理](http://www.opengl.org/wiki/Textures#Texture_Objects)和[渲染缓冲区](http://www.opengl.org/wiki/Renderbuffer_Object)的[“内部格式”](http://www.opengl.org/wiki/Image_Format)。它甚至解释了最后三个参数控制[像素传输操作](http://www.opengl.org/wiki/Pixel_Transfer)：将数据上传到图像。*

# javascript - Chrome 有时会调用不正确的构造函数

> ID：10314992
> 
> 赞同：10
> 
> 时间：2012-04-25T11:50:17.963
> 
> 标签：javascript, jquery, google-chrome

我们有一个广泛使用 jQuery 的网站，它在 Firefox 和 IE 中运行良好。然而，在 Chrome 中，我们经常（和半随机地）获得`Uncaught TypeError: Cannot call method 'apply' of undefined`（其他 jQuery 方法也出现在 的位置`apply`）。

我们设法将问题追溯到 jQuery 方法`pushStack()`。

原始源代码（jQuery 1.7.1）：

```
// Take an array of elements and push it onto the stack
// (returning the new matched element set)
pushStack: function( elems, name, selector ) {
   // Build a new jQuery matched element set
   var ret = this.constructor();

   // (etc.)
} 
```

检测代码：

```
pushStack: function( elems, name, selector ) {
   if (!(this instanceof jQuery.fn.init)) throw this;

   // Build a new jQuery matched element set
   var ret = this.constructor();

   if (!(ret instanceof jQuery.fn.init)) {
          console.log("pushStack>this: " + this.constructor);
          console.log("pushStack>ret: " + ret.constructor);
          throw ret;
   }

   // (etc.)
} 
```

在大多数情况下`pushStack()`运行正确。然而，有时 Chrome 会构造一个类型的对象`Object`而不是`jQuery.fn.init`. 控制台输出：

```
pushStack>this: function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
    }
pushStack>ret: function Object() { [native code] }
Uncaught #<Object> 
```

有没有人遇到过类似的问题？它是 Chrome 的（已知）错误吗？

**更新**

我设法简化了我们的页面，以便它可以自己加载。[我在 Chromium 项目](http://code.google.com/p/chromium/issues/detail?id=125148)项目中填写了错误，复制问题的页面附在此处。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T17:32:22.810

Chromium 错误跟踪器中的响应似乎确认这是 Chrome 浏览器的错误。

解决方法是`pushStack()`在 jQuery 中“修复”函数：

```
// Take an array of elements and push it onto the stack
// (returning the new matched element set)
pushStack: function( elems, name, selector ) {
   // Build a new jQuery matched element set
   var ret = this.constructor();

   // Workaround for Chrome bug
   if ((this instanceof jQuery.fn.init) && !(ret instanceof jQuery.fn.init)) {
       // console.log("applying pushStack fix");
       ret = new jQuery.fn.init();
   }

   // etc.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T21:12:08.163

这是一个“不引人注目”的解决方案（例如，如果您从 CDN 中提取 jQuery）。将其保存在 .js 文件中，并在拉入 jQuery 后将其包含在内。

```
(function ($) {
    var pushStackOrig, pushStackChrome;

    pushStackOrig = $.fn.pushStack;

    pushStackChrome = function ( elems, name, selector ) {
        // Build a new jQuery matched element set

        // Invoke the correct constructor directly when the bug manifests in Chrome.
        //var ret = this.constructor();
        var ret = new jQuery.fn.init(); 

        if ( jQuery.isArray( elems ) ) {
            push.apply( ret, elems );

        } else {
            jQuery.merge( ret, elems );
        }

        // Add the old object onto the stack (as a reference)
        ret.prevObject = this;

        ret.context = this.context;

        if ( name === "find" ) {
            ret.selector = this.selector + ( this.selector ? " " : "" ) + selector;
        } else if ( name ) {
            ret.selector = this.selector + "." + name + "(" + selector + ")";
        }

        // Return the newly-formed element set
        return ret;
    };

    $.fn.pushStack = function (elems, name, selector) {
        var ret;

        try {
            ret = pushStackOrig.call(this, elems, name, selector);
            return ret;
        } 
        catch (e) {
            if (e instanceof TypeError) {
                if (!(ret instanceof jQuery.fn.init)) {
                    ret = pushStackChrome.call(this, elems, name, selector);
                    return ret;
                }
            }

            throw e;
        }
    };

}).call(this, jQuery); 
```

# c# - 根据现有值更改 dataGridView 中的值

> ID：10314996
> 
> 赞同：2
> 
> 时间：2012-04-25T11:50:52.627
> 
> 标签：c#, datagridview

我正在重新制作我的客户拥有的应用程序（这意味着我没有创建原始应用程序），其中一个请求是简化 dataGridViews 之一中显示的数据（数据是从现有数据库中提取的）。问题是在这个显示使用的数据表中，其中一列代表了某个产品的一种使用类型，并且用一个普通的数字来表示。到目前为止，我的客户必须从另一个文档中读取特定数字的含义。现在他要我用描述性字符串替换数字（他给我发了一个列表，描述哪个数字指的是哪个描述），但我不允许更改数据库。如何更改该列的内容（仅在我的 dataGridView 中，不在数据库中）以显示文本而不是数字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:07:00.500

通常的方法是[`CellFormatting`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)使用`DataGridView`.

这是一个简单的例子：

```
dataGridView1.CellFormatting += new DataGridViewCellFormattingEventHandler(dataGridView1_CellFormatting);

void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.Value == null)
        return;

    string stringValue = (string)e.Value;
    stringValue = stringValue.ToLower();

    if (e.Value == "1")
    {
        e.Value = "string for one";
        e.FormattingApplied = true;
    }
} 
```

eventargs 有一个 ColumnIndex 属性，您可以使用它来确保您只格式化正确的列。

需要注意的一点是，每当单元格绘制时都会引发此单元格格式化事件，因此您不应该在事件处理程序中做繁重的工作。例如，为您的值查找数据库将是一个大错误！而是将其存储在内存字典中。

单元格格式化事件不会影响基础数据，因此您的数据源中仍然会有整数。

[有关此](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件的更多信息在 MSDN 上。