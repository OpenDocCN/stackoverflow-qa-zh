# StackOverflow 问答 11314000-11314999

# windows-8 - 使用 WinJS 自定义数据源？

> ID：11314000
> 
> 赞同：2
> 
> 时间：2012-07-03T15:15:45.900
> 
> 标签：windows-8, datasource

我目前正在 Windows8 应用程序中实现自定义数据源。但是，我遇到了一些麻烦：没有数据显示。

首先，这里是代码：

```
var dataArray = [
    { title: "Basic banana", text: "Low-fat frozen yogurt", picture: "images/60banana.png" },
    // Other data taken from Windows8 ListView quick start
    { title: "Succulent strawberry", text: "Sorbet", picture: "images/60strawberry.png" }
];

var searchAdDataAdapter = WinJS.Class.define(

     function () {},  // Constructor

     {
         itemsFromIndex: function (requestIndex, countBefore, countAfter) {

             var that = this;

            if (requestIndex >= that._maxCount) {
                return WinJS.Promise.wrapError(new WinJS.ErrorFromName(UI.FetchError.doesNotExist));
            }

            var fetchSize, fetchIndex;

            // See which side of the requestIndex is the overlap.
            if (countBefore > countAfter) {

                // Limit the overlap
                countAfter = Math.min(countAfter, 10);

                // Bound the request size based on the minimum and maximum sizes.
                var fetchBefore = Math.max(
                    Math.min(countBefore, that._maxPageSize - (countAfter + 1)),
                    that._minPageSize - (countAfter + 1)
                );

                fetchSize = fetchBefore + countAfter + 1;
                fetchIndex = requestIndex - fetchBefore;

            } else {
                countBefore = Math.min(countBefore, 10);
                var fetchAfter = Math.max(Math.min(countAfter, that._maxPageSize - (countBefore + 1)), that._minPageSize - (countBefore + 1));
                fetchSize = countBefore + fetchAfter + 1;
                fetchIndex = requestIndex - countBefore;
            }

            // Create an array of IItem objects:
            // results =[{ key: key1, data : { field1: value, field2: value, ... }}, { key: key2, data : {...}}, ...];
            for (var i = 0, itemsLength = dataArray.length ; i < itemsLength ; i++) {

                var dataItem = dataArray[i];
                results.push({
                    key: (fetchIndex + i).toString(),
                    data: dataArray[i]
                });
            }

            // Get the count.
            count = dataArray.length;

            return {
                items: results, // The array of items.
                offset: requestIndex - fetchIndex, // The index of the requested item in the items array.
                totalCount: count
            };

        },

        getCount: function () {
            return dataArray.length;
        }
    }
);

var searchAdDataSource = WinJS.Class.derive(WinJS.UI.VirtualizedDataSource, function () {
    this._baseDataSourceConstructor(new searchAdDataAdapter());
});

// Create a namespace to make the data publicly
// accessible. 
var publicMembers = {
    itemList: new searchAdDataSource()
};

WinJS.Namespace.define("DataExample", publicMembers); 
```

我知道代码有点长，但主要部分来自微软官方自定义数据源快速入门。

我试图调试它，但似乎*itemFromIndex*中包含的代码从未使用过（我的断点从未到达）。

HTML 代码是：

```
<div id="basicListView" data-win-control="WinJS.UI.ListView" 
    data-win-options="{itemDataSource : DataExample.itemList.dataSource}">
</div> 
```

我暂时不使用任何模板，以尽可能简化代码。数据通常以这种方式以文本形式显示（但什么也没有出现）。

对这个伟大的社区有任何想法吗？

此外，即使有文档，我也不了解*countBefore*和*countAfter*参数。有人可以用其他语言向我解释吗？

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:50:54.280

尝试将您的 HTML 代码修改为以下内容：

```
<div id="basicListView" data-win-control="WinJS.UI.ListView" 
    data-win-options="{itemDataSource : DataExample.itemList}">
</div> 
```

无需调用 .datasource 成员，因为您直接与数据源对话。

# c# - 图像裁剪无法正常工作

> ID：11314001
> 
> 赞同：2
> 
> 时间：2012-07-03T15:15:47.427
> 
> 标签：c#, image, graphics, bitmap, memorystream

该代码片段应该裁剪图像，但是裁剪的大小是正确的，但是裁剪从左上角开始。这些图像更清楚地说明了问题![这里](../Images/a19478114e17fc891d7976d7e17c3521.png)，并且![这里](../Images/778add71b85aeadfb2448ca148fd5833.png)。

坐标大约是：x=68，y=28，width=176，height=174。下面是裁剪代码。

```
/// <summary>
/// Handles the Click event of the UploadButton control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
/// <remarks></remarks>
protected void UploadButton_Click(object sender, EventArgs e)
{

    String path = HttpContext.Current.Request.PhysicalApplicationPath + "images\\";

    Boolean FileOK = false;
    Boolean FileSaved = false;

    if (Upload.HasFile)
    {
        Session["WorkingImage"] = Upload.FileName;

        String FileExtension = Path.GetExtension(Session["WorkingImage"].ToString()).ToLower();

        String[] allowedExtensions = { ".png", ".jpeg", ".jpg", ".gif" };

        for (int i = 0; i < allowedExtensions.Length; i++)
        {
            if (FileExtension == allowedExtensions[i])
            {
                FileOK = true;
            }
        }
    }

    if (FileOK)
    {
        try
        {
            Upload.PostedFile.SaveAs(path + Session["WorkingImage"]);
            FileSaved = true;
        }

        catch (Exception ex)
        {
            ErrorLabel.Text = "File could not be uploaded." + ex.Message;
            ErrorLabel.Visible = true;
            FileSaved = false;
        }
    }

    else
    {
        ErrorLabel.Text = "Cannot accept files of this type.";
        ErrorLabel.Visible = true;
    }

    if (FileSaved)
    {
        UploadPanel.Visible = false;
        CropPanel.Visible = true;
        CropImage.ImageUrl = "~/Images/" + Session["WorkingImage"];
    }
}

/// <summary>
/// Handles the Click event of the CropButton control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
/// <remarks></remarks>
protected void CropButton_Click(object sender, EventArgs e)
{
    String path = HttpContext.Current.Request.PhysicalApplicationPath + "Images\\";

    string ImageName = Session["WorkingImage"].ToString();
    int w = Convert.ToInt32(Convert.ToDouble(W.Value));
    int h = Convert.ToInt32(Convert.ToDouble(H.Value));
    int x = Convert.ToInt32(Convert.ToDouble(X.Value));
    int y = Convert.ToInt32(Convert.ToDouble(Y.Value));

    byte[] CropImage = Crop(path + ImageName, w, h, x, y);

    using (MemoryStream ms = new MemoryStream(CropImage, 0, CropImage.Length))
    {
        ms.Write(CropImage, 0, CropImage.Length);

        using (Image CroppedImage = Image.FromStream(ms, true))
        {
            string SaveTo = path + "crop" + ImageName;
            CroppedImage.Save(SaveTo, CroppedImage.RawFormat);
            CropPanel.Visible = false;
            CroppedPanel.Visible = true;
            this.CroppedImage.ImageUrl = "~/Images/crop" + ImageName;
        }
    }
}

#endregion

#region Methods

/// <summary>
/// Crops the specified image.
/// </summary>
/// <param name="image">The image.</param>
/// <param name="width">The width.</param>
/// <param name="height">The height.</param>
/// <param name="x">The x value.</param>
/// <param name="y">The y value.</param>
/// <returns></returns>
/// <remarks></remarks>
private static byte[] Crop(string image, int width, int height, int x, int y)
{
    try
    {
        using (Image OriginalImage = Image.FromFile(image))
        {
            using (Bitmap bmp = new Bitmap(width, height))
            {
                //bmp.SetResolution(OriginalImage.HorizontalResolution, OriginalImage.VerticalResolution);

                using (Graphics Graphic = Graphics.FromImage(bmp))
                {
                    Graphic.SmoothingMode = SmoothingMode.AntiAlias;
                    Graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
                    Graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
                    //Graphic.DrawImage(OriginalImage, new Rectangle(0, 0, width, height), x, -y, width, height,GraphicsUnit.Pixel);
                    Graphic.DrawImage(OriginalImage, new Rectangle(0, 0, width, height), x, y, width, height, GraphicsUnit.Pixel);
                    MemoryStream ms = new MemoryStream();
                    bmp.Save(ms, OriginalImage.RawFormat);

                    return ms.GetBuffer();
                }
            }
        }
    }
    catch (Exception e)
    {
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:35:25.207

裁剪看起来不像是从左上角开始，而是在左上角附近。在我看来，`x`和`y`坐标是错误的。我建议手动插入你自己的`x`和`y`值，直到你得到你想要的图像，然后找出为什么`x`和`y`值与你期望的不同。

我将它与我拥有的一些裁剪代码（并且我知道有效）进行了比较，并且我没有发现您的实际`Crop`方法有任何问题。

# sql - 选择所有相关表的前 N 个

> ID：11314007
> 
> 赞同：1
> 
> 时间：2012-07-03T15:16:06.623
> 
> 标签：sql, foreign-keys, relational-database

我有一张名为“用户”的表

用户表有 UserId 作为主键，它是其他 15 个表的外键。

是否有一个查询模板可以一次性从用户和所有相关表中选择前 200 行？所以我不需要在查询中输入所有其他 15 个表。

Query 会动态查找并从相关表中获取列吗？

它可以对表之间的所有关系使用内连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:52:38.790

我承认这是超级丑陋的，可能需要更多的工作，但它会基于 PK/FK 关系生成基本的查询。如果任何 FK 表可能缺少相应的 PK 记录，您可能应该将内连接更改为左连接。

```
declare @table varchar(50);
set @table = 'Users';

declare @pk_table varchar(50);
declare @fk_table varchar(50);
declare @pk_column varchar(50);
declare @fk_column varchar(50);
declare @curr_table varchar(50);
set @curr_table = '';

declare @sql varchar(8000);
set @sql = 'select top 200 * from ' + @table + char(10)
DECLARE table_cursor CURSOR FOR 
SELECT
    K_Table = FK.TABLE_NAME,
    FK_Column = CU.COLUMN_NAME,
    PK_Table = PK.TABLE_NAME,
    PK_Column = PT.COLUMN_NAME--,
    --Constraint_Name = C.CONSTRAINT_NAME
FROM
    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK
    ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
    ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU
    ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
            SELECT
                i1.TABLE_NAME,
                i2.COLUMN_NAME
            FROM
                INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
            INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2
                ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
            WHERE
                i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
           ) PT
    ON PT.TABLE_NAME = PK.TABLE_NAME
where PK.TABLE_NAME = @table   

OPEN table_cursor
FETCH NEXT FROM table_cursor INTO @fk_table, @fk_column, @pk_table, @pk_column

WHILE @@FETCH_STATUS = 0
BEGIN
    if @curr_table <> @fk_table
    begin
        -- create join
        set @sql = @sql + ' inner join ' + @fk_table + char(10)
        set @sql = @sql + ' on ' + @pk_table + '.' + @pk_column + ' = ' + @fk_table + '.' + @fk_column + char(10)
    end
    else
    begin
        -- create join on fields
        set @sql = @sql + ' and ' + @pk_table + '.' + @pk_column + ' = ' + @fk_table + '.' + @fk_column + char(10)
    end
FETCH NEXT FROM table_cursor INTO @fk_table, @fk_column, @pk_table, @pk_column
END

CLOSE table_cursor
DEALLOCATE table_cursor

print @sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:27:24.773

[这](http://www.codeproject.com/Articles/21234/Implementing-Dynamic-WHERE-Clause-in-Static-SQL)就是你要找的。动态`Where`声明。跳至`Case statements`了解如何在查询中使用案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:18:41.553

你可以这样做：

```
select top 200 columns....
from tablename
inner join table1 ....
inner join table2 ....
...
inner join table15... 
```

您需要`inner join`使用所有表格制作，然后选择`top 200`结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:31:18.410

有一种方法，但它有点复杂。您可以从 information_schema 中选择所有表名和表列，并使用它们构建 SQL 查询。

这样的事情应该让你开始：

```
With TableNames
AS
(
select * from INFORMATION_SCHEMA.TABLES where  table_name like 'User%'
),
ColumnNames 
AS
(
select * 
from INFORMATION_SCHEMA.COLUMNS c
join TableNames n
on n.TABLE_NAME=c.TABLE_NAME
)
/* Construct SQL query */ 
```

您可以执行“exec 'SELECT ' + Columns + ' FROM ' + TableName + 'WHERE ... '”，然后对每个表执行查询。

# oracle - 如何限制在 Oracle 中的 Group By 中分组的结果数量？

> ID：11314008
> 
> 赞同：1
> 
> 时间：2012-07-03T15:16:18.790
> 
> 标签：oracle

我有一个参数表，值和记录这些值的时间。

我有一个需要时间的程序，并且需要在该时间范围内 -15/+5 秒的时间窗口内获得每个参数值的平均结果。最重要的是，我想确保在过去的时间之前不超过 15 条记录，之后不超过 5 条记录。

例如，也许我每秒都在记录一些参数的值。如果我在 21:30:30 的时间过去，我想获得 21:30:15 和 21:30:35 之间的值。但如果我每半秒记录一次，我实际上会拥有比我想要的更多的适合那个时间框架的参数，这就是我需要限制我的结果的地方。

我已经阅读[了这个问题](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)和[这篇文章](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)，它们似乎与我正在尝试做的事情非常相关，但不幸的是我正在处理 Oracle 而不是 MySQL，所以我不能使用“限制”。

我目前有一些看起来像这样的东西：

```
std_values as
(
    select
        V.ParameterId,
        V.NumericValue,
    from
        ValuesTable V 
    where
        V.ValueSource = pValueSource 
        and V.Time >= pSummaryTime - 15/86400
        and V.Time <= pSummaryTime + 5/86400
)
select
    ParameterId,
    avg(NumericValue) as NumericValue
from 
    std_values
group by 
    ParameterId 
```

`pValueSource`只是让我过滤掉我正在查看的值类型的东西，并且`pSummaryTime`是我基于时间框架的输入时间。这里的目标是获取该`pSummaryTime`窗口之前的 15 条记录，以及之后的 5 条记录，并将其用作平均值。目前我并没有限制“之前”和“之后”结果的数量，所以我最终得到了落在该时间窗口内的*所有内容的平均值。*如果没有“限制”之类的东西，我不确定如何在 Oracle 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:43:42.780

听起来你想要一个移动窗口聚合函数。这是 Oracle 分析功能特性的一部分。

这不是我的强项，而且由于您没有包含示例表/数据来构建测试用例，所以我只会将您指向 Oracle 文档，这里是： http: [//docs.oracle.com/cd/B14117_01/ server.101/b10736/analysis.htm#i1006709](http://docs.oracle.com/cd/B14117_01/server.101/b10736/analysis.htm#i1006709)

你可能想要这样的东西：

```
AVG(NumericValue) over (order by pSummaryTime RANGE BETWEEN 15 PRECEDING AND 5 FOLLOWING) 
```

但是，就像我说的那样，不是我的强项，而且完全未经测试，但是，我希望它能传达这个想法。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:38:20.830

感谢[Mark Bobak 的回答](https://stackoverflow.com/a/11314537/134310)让我走上了正轨，我最终得到了这个解决方案。

```
with 
values_before as
(
    select
        V.ParameterId,
        V.NumericValue,
        row_number() over (Partition by V.ParameterId order by V.Time desc) as RowNumber
    from
        ValuesTable V
    where
            V.ValueSource = pValueSource 
        and V.Time >= pSummaryTime - 15/86400
        and V.Time <= pSummaryTime
),
values_after as
(
    select
        V.ParameterId,
        V.NumericValue,
        row_number() over (Partition by V.ParameterId order by V.Time desc) as RowNumber
    from
        ValuesTable V
    where
            V.ValueSource = pValueSource 
        and V.Time <= pSummaryTime + 5/86400
        and V.Time > pSummaryTime
),
values_all as
(
    select * from values_before where RowNumber <= 15
    union all
    select * from values_after where RowNumber <= 5
)
select ParameterId, avg(NumericValue) from values_all group by ParameterId 
```

毫无疑问，有更好的方法可以做到这一点，但它至少似乎给出了正确的结果。关键是使用分析函数来设置前 15 和后 5 的行号和顺序，然后将我的结果过滤到这些。

# php - 尝试将多个 JSON 数据传递给 Highcharts 但没有成功

> ID：11314010
> 
> 赞同：0
> 
> 时间：2012-07-03T15:16:24.103
> 
> 标签：php, javascript, ajax, highcharts, highstock

我正在尝试使用采样数据创建一些 Highstock 图表（Highcharts），但是当我运行它时得到的只是一个空白页。

这是我的 php 代码：

```
<?php
header("Content-type: text/json");
$horas_muertas = array(array(1296518400000,4),array(1296604800000,2),array(1296691200000,3),array(1296777600000,3));
$horas_trabajadas = array(array(1296518400000,2),array(1296604800000,3),array(1296691200000,4),array(1296777600000,5));
$datos = array(json_encode($horas_muertas),json_encode($horas_trabajadas));    

$datosj = json_encode($datos);

echo $datosj[0];

?> 
```

如您所见，我尝试访问 JSON 的第一个位置，它返回了这个，所以我确定那里有问题：

```
[ 
```

但是当我将此代码用于图表时（我删除了不相关的代码）：

```
function requestData() {
            $.ajax({
                url: 'data.php',
                datatype: 'json',
                success: function(data) {                       
                    //alert(data);                      
                    chart.series[0].setData(data[0]);
                    chart.series[1].setData(data[1]);
                },
                cache: false
            });
        }
$(function() {
var chart = new Highcharts.StockChart({

                chart: {
                    renderTo: 'container',
                    type: 'column',
                        events: {
                        load: requestData
                    }
                },
                series: [{
                    name: 'Horas Prendidas',
                data: []},
                {
                    name: 'Horas Trabajadas',
                data: []}]
            });
        });​ 
```

我得到的只是一个空白页，当我至少应该得到一个没有任何数据的图表时，关于如何解决这个问题的任何想法？非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:23:41.470

Use `chart.series[0].addPoint(data[0]);` instead of `chart.series[0].setData(data[0]);`

# coffeescript - 我在 Stripe 中的咖啡脚本有什么问题？

> ID：11314013
> 
> 赞同：5
> 
> 时间：2012-07-03T15:16:33.800
> 
> 标签：coffeescript, stripe-payments

我一直在努力将 Stripe 集成到我的 Web 应用程序中，但它似乎不起作用。为了帮助我，我一直在使用 Ryan Bates 的 Rails Cast 来集成 Stripe。每当我尝试运行付款表单时，都会收到一条错误消息，提示“我的信用卡有问题”。我认为问题出在我的咖啡脚本文件中，但也许我错了。我已将条带用户令牌作为我的用户模型的一部分，而不是将其放入自己的订阅模型中。这是我的咖啡脚本代码：

```
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  subscription.setupForm()

user =
  setupForm: ->
    $('#new_user').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        user.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, user.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 500
      $('#user_stripe_card_token').val(response.id)
      $('#new_user')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false) 
```

在编程方面，我是初学者，所以你能给我的任何帮助都会很棒。

这是我尝试注册时在终端中遇到的错误：

参数：{"utf8"=>"✓", "authenticity_token"=>"Xas+iA+a3op7jUi57qTr7XWQSClPscA7fR19rkclkEE=", "user"=>{"stripe_card_token"=>"", "name"=>"Jack", " email"=>"email@example.com", "phone_number"=>"203-xxx-xxxx", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit "=>"创建我的帐户"}

用户存在 (0.2ms) SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('jjets718@yahoo.com') LIMIT 1 创建客户时出现条带错误：令牌 ID 无效：

我对注册的看法是这样的：

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
    <div class="span6 offset3">
        <%= form_for(@user) do |f| %>
            <%= render 'shared/error_messages' %>

            <%= f.hidden_field :stripe_card_token %>

            <%= f.label :name %>
            <%= f.text_field :name %>

            <%= f.label :email %>
            <%= f.text_field :email %>

            <%= f.label :phone_number, "Your cell phone number" %>
            <%= f.text_field :phone_number %>

            <%= f.label :password %>
            <%= f.password_field :password %>

            <%= f.label :password_confirmation, "Password confirmation" %>
            <%= f.password_field :password_confirmation %>

            <%= label_tag :card_number, "Credit Card Number" %>
            <%= text_field_tag :card_number, nil, name: nil %>

            <%= label_tag :card_code, "Security Code on Card (CVV)" %>
            <%= text_field_tag :card_code, nil, name: nil %>

            <%= label_tag :card_month, "Card Expiration" %>
            <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"}%>
        <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"} %>

    <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
</div>
</div>

<div id="stripe_error">
  <noscript>JavaScript is not enabled and is required for this form. First enable it in your web browser settings.</noscript>
</div> 
```

我的控制器代码是用于 create 方法的：

```
 def create
    @user = User.new(params[:user])
    if @user.save_with_payment
     sign_in @user
      flash[:success] = "Welcome to the Sample App!"
     redirect_to edit_user_path(current_user)
     UserMailer.welcome_email(@user).deliver
    else
      render 'new'
    end
  end 
```

我的用户令牌数据库迁移代码是这样的：

```
class AddStripeToUsers < ActiveRecord::Migration
  def change
    add_column :users, :stripe_customer_token, :string
  end
end 
```

我的模型中 save_with_payment 方法的代码是这样的：

```
 def save_with_payment
     if valid?
       customer = Stripe::Customer.create(description: email, plan: 1, card: stripe_card_token)
       self.stripe_customer_token = customer.id
       save!
     end

   rescue Stripe::InvalidRequestError => e
     logger.error "Stripe error while creating customer: #{e.message}"
     errors.add :base, "There was a problem with your credit card."
     false
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T19:39:52.933

我可能是错的，但在这一点上：

```
handleStripeResponse: (status, response) ->
  if status == 500
    $('#user_stripe_card_token').val(response.id) 
```

除了改成`if status == 500`，`if status == 200`这条线`$('#user_stripe_card_token').val(response.id)`可能还需要`$('#new_user_stripe_card_token').val(response.id)`。确保检查输入 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:59:47.663

想到的2件事：

1.  您应该检查 200 的状态，而不是 500
2.  您可能需要在 application.js 中使用 coffeescript 文件
    *   例如 //= 要求用户

# php - HTML DOM 跨度搜索

> ID：11314015
> 
> 赞同：0
> 
> 时间：2012-07-03T15:16:40.523
> 
> 标签：php, dom

我有一个 HTML 代码块，如下所示

```
<div class="searchDetailPanelRgt">
  <p>
   <span>ID: 10605814  |  Jun 26, '12</span> 
   <br />                                       
   <a href="somelink" target="_blank">View on Map</a>
   <a target='_blank' href='somelink' ></a>
  </p>
</div> 
```

我想`Jun 26,12`在 php 中使用 HTML DOM 库访问该值。

```
$html->find(???) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:29:24.527

```
<?php

$html = <<<HTML
<div class="searchDetailPanelRgt">
  <p>
   <span>ID: 10605814  |  Jun 26, '12</span>
   <br />
   <a href="somelink" target="_blank">View on Map</a>
   <a target='_blank' href='somelink' ></a>
  </p>
</div>
HTML;

$document = new DOMDocument();
$document->loadHTML($html);

$spans = $document->getElementsByTagName("span");
$the_first_span = $spans->item(0);
$the_first_spans_content = explode(" | ", $the_first_span->textContent);

echo $the_first_spans_content[1]; 
```

# javascript - 在 Codeigniter 中仅在一个视图中使用的 JS 放在哪里

> ID：11314019
> 
> 赞同：0
> 
> 时间：2012-07-03T15:16:50.157
> 
> 标签：javascript, codeigniter

我正在开发一个 Codeigniter 应用程序，我使用[模板系统](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)来构建我的视图。

在开发过程中，我刚刚将我的 jQuery 包含在实际视图中。这样做的问题是它最终出现在页面的正文中。我宁愿把它放在页脚。

大多数 jQuery 只在特定视图中使用一次，所以我看不到将其全部放入页脚部分的意义。

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:24:29.477

The template library by [Williams Concepts](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html) has a method for you to add JavaScript on an adhoc basis.

You can then add the JavaScript in the method being called, something like;

```
$this->template->add_js($script, $type = 'import', $defer = FALSE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:20:52.277

> 在开发过程中，我刚刚将我的 jQuery 包含在实际视图中。这样做的问题是它最终出现在页面的正文中。我宁愿把它放在页脚。

那么将 jQuery 包含移动到页脚？意味着您必须在此之后加载其他脚本，这对于模板来说效果不佳：-\ 如果您只需要在某些地方加载 jQuery，请参见下文。

> 大多数 jQuery 只在特定视图中使用一次，所以我看不到将其全部放入页脚部分的意义。

所以把它放在视图中。`<script>`是一个标签，就像其他任何东西一样。仅在需要时包含它。如果您可能重复加载此部分，请像这样测试它：`<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>`如果尚未加载，它应该为您插入页面，如果已加载，则跳过插入。这样你就有了一种即时的 jQuery 加载模式。

# android - 巨大的内存（本机堆）增加设置布局

> ID：11314023
> 
> 赞同：3
> 
> 时间：2012-07-03T15:17:01.060
> 
> 标签：android, android-layout, memory

当我预计会增加约 0.1 MB 时，我会增加 6 MB 的本机堆使用量

我是如何得出这些数字的：

```
Log.d("test", "before setting layout");
showMemoryStats();

setContentView(R.layout.my_layout);

Log.d("test", "after setting layout");
showMemoryStats(); 
```

showMemoryStats 在哪里：

```
public static void showMemoryStats() {
    Log.i("test", "----------------------------------------------------------------------------------------------------------------------------");
    Log.i("test", "showing memory stats in xx");
    double nativeUsage = Debug.getNativeHeapAllocatedSize(); 
    Log.i("test", "nativeUsage: " + nativeUsage);
    //current heap size 
    double heapSize =  Runtime.getRuntime().totalMemory();
    Log.i("test", "heapSize: " + heapSize);
    //amount available in heap 
    double heapRemaining = Runtime.getRuntime().freeMemory();   
    Log.i("test", "heapRemaining: " + heapRemaining);
    double memoryAvailable = Runtime.getRuntime().maxMemory() - (heapSize - heapRemaining) - nativeUsage;
    Log.i("test", "memoryAvailable: " + memoryAvailable);
    Log.i("test", "----------------------------------------------------------------------------------------------------------------------------");
} 
```

输出：

> 07-03 16:50:40.127: D/test(18647): 在设置布局之前
> 
> 07-03 16:50:40.127: I/test(18647): ---------------------------------- -------------------------------------------------- --------------------------------------
> 
> 07-03 16:50:40.127: I/test(18647): 在 xx 中显示内存统计信息
> 
> 07-03 16:50:40.127: I/test(18647): nativeUsage: 5706008.0
> 
> 07-03 16:50:40.127: I/test(18647): heapSize: 4905968.0
> 
> 07-03 16:50:40.127: I/test(18647): heapRemaining: 1815456.0
> 
> 07-03 16:50:40.127: I/test(18647): memoryAvailable: 2.4757912E7
> 
> 07-03 16:50:40.127: I/test(18647): ---------------------------------- -------------------------------------------------- --------------------------------------
> 
> 07-03 16:50:40.348: D/dalvikvm(18647): GC_EXTERNAL_ALLOC 释放 100K，49% 释放 2924K/5639K，外部 0K/0K，暂停 45ms
> 
> 07-03 16:50:40.518: D/dalvikvm(18647): GC_EXTERNAL_ALLOC 释放 9K，49% 释放 2917K/5639K，外部 2700K/3371K，暂停 51ms
> 
> 07-03 16:50:40.638: D/dalvikvm(18647): GC_EXTERNAL_ALLOC 释放 4K，49% 释放 2928K/5639K，外部 3952K/4356K，暂停 51ms
> 
> 07-03 16:50:40.698: D/dalvikvm(18647): GC_EXTERNAL_ALLOC 释放 2K，48% 释放 2933K/5639K，外部 5963K/6027K，暂停 24ms
> 
> 07-03 16:50:40.718: D/test(18647): 设置布局后
> 
> 07-03 16:50:40.718: I/test(18647): ---------------------------------- -------------------------------------------------- --------------------------------------
> 
> 07-03 16:50:40.718: I/test(18647): 在 xx 中显示内存统计信息
> 
> 07-03 16:50:40.718: I/test(18647): nativeUsage: 1.2101904E7
> 
> 07-03 16:50:40.718: I/test(18647): heapSize: 4734944.0
> 
> 07-03 16:50:40.718: I/test(18647): heapRemaining: 1716432.0
> 
> 07-03 16:50:40.718: I/test(18647): memoryAvailable: 1.8434016E7
> 
> 07-03 16:50:40.718: I/test(18647): ---------------------------------- -------------------------------------------------- --------------------------------------

数学：

12101856 字节 - 5703424 字节 = 6398432 字节 = 6.10202 mb

我浏览了我的布局文件并添加了所有使用的可绘制对象的大小，总大小为 124 kb -> 0.121094 mb

那么到底是什么导致本机堆增加 6 mb 呢？

我可以放置布局文件，如果有人要求，不知道这是否有意义......只是一堆带有 id 和 drawable 的布局，正如我所说的，我已经检查了 drawable 的大小。

非常感谢提前...

**编辑：在我的情况下，这是解决方案 - 为了总结响应和评论：我将图像存储在“可绘制”文件夹中并使用 hdpi 设备。解决方案：将图像放在文件夹 drawable-hdpi 中。原因：系统将我的图像从“drawable”拉伸以匹配 hdpi 分辨率，尽管它们已经是 hdpi 分辨率。这使得它们占用的内存超出了应有的 2 倍。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:53:21.323

问题是当android必须在屏幕上绘制你的drawable时，它们比它们在你的res文件夹中要大得多。例如，如果您有一个 100 Kb 的 PNG，那么这就是压缩后的大小。当 android 在屏幕上绘制 PNG 时，它会将其放大到默认大小（4 字节）*（像素高度）*（像素宽度）的正常大小。这是因为它为图像的每个像素存储 4 个字节的颜色信息。这意味着如果您的图像是例如 800 x 600 像素，那么 android 生成的结果位图是 800x600x4 字节 = 1920000 字节 = 接近 2 Mb。

如果你想解决这个问题，你必须使用较小的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:53:53.820

好吧，位图占用了大量空间。

每个像素需要 4 个字节！

所以一个1M像素的图片就是4MB！！！我假设您正在使用许多较小的图像，但它们很快就会加起来。

解决此问题的一种方法是以较低的分辨率加载位图（在大多数情况下，您不会注意到任何差异，因为它们无论如何都不会以最大分辨率显示）。对此`BitmapFactory.Options.inSampleSize`进行调查。

引用自 android

> 位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），立即耗尽某些设备上的每个应用程序的限制。

[这是一个很好的链接，可以更好地解释它](http://developer.android.com/training/displaying-bitmaps/index.html)。

# php - $_SERVER VARS 为空

> ID：11314027
> 
> 赞同：0
> 
> 时间：2012-07-03T15:17:24.160
> 
> 标签：php

我在 Windows 系统上使用 PHP 5.3.12，我正在尝试使用一些`$_SERVER`变量，但以下`$_SERVER`变量对我来说是空的

```
$_SERVER['SERVER_NAME']
$_SERVER['SERVER_PORT']
$_SERVER['REQUEST_URI'] 
```

我已经`ServerName`在配置文件中设置了，但是`SERVER_NAME`两者`SERVER_PORT`都是空的，我不知道为什么会这样，我怎样才能设置这些变量并防止它们为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:50:42.983

我很确定它的 IIS 并在 REQUEST_URI 尝试使用之前看到过这种情况

```
$_SERVER['REQUEST_URI']=$_SERVER['PHP_SELF'].'?'.$_SERVER['argv'][0]; 
```

# c - 如何避免使用 ++ 和 -- 运算符

> ID：11314030
> 
> 赞同：1
> 
> 时间：2012-07-03T15:17:35.383
> 
> 标签：c, bit-manipulation

好的，我以一种很好的方式完成了代码，并使用了递增 ++ 和递减 -- 运算符。

```
unsigned int atob(const char* input)
{

    int i = 0;

    while (input[i] == '0' || input[i] == '1') i++;

    unsigned result = 0;
    unsigned currentBit = --i;

    while ((*input == '0') || (*input == '1')) {
        char isCurrentBitSet = *input == '1';
        unsigned setValue = (isCurrentBitSet << currentBit--);
        result |= setValue;
        input++;
    }

    return result;
} 
```

现在，我需要删除所有 dec(--)/inc(++)，除了 while 语句底部的 input++。我对如何执行此实现感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:33:48.747

干得好：

```
unsigned int atob(const char* input)
{
  unsigned result = 0;

  while ((*input == '0') || (*input == '1')) {
    result = (result << 1) | (*input++ - '0');
  }

  return result;
} 
```

也节省了一些堆栈空间:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:22:14.903

通常的方法是从结果集开始为 0。然后对于输入的每个字符，将结果左移一位，`or`在当前位中，并重复直到到达输入字符串的末尾（或者不是 a`0`或`1`， 反正）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:32:34.710

决定彻底改变我的解决方案：

```
unsigned int atob(const char* input)
{
    unsigned val; 

    for (val = 0; *input; input++) {
        if (*input == '1') val = (val << 1) | 1;
        else if (*input == '0' ) val <<= 1;
        else break;
    }

    return val;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:24:02.757

将 i++ 替换为 i = i + 1？这似乎很容易。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T15:24:52.470

[考虑通过调用strtol](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)来替换整个函数

# sql - 从另一台计算机访问 SQL 表

> ID：11314033
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:17:48.027
> 
> 标签：sql, database, html, network-programming

我认为解释这一点的最好方法是告诉你我的总体目标是什么。我正在尝试开发一个 Web 应用程序来读取和写入位于中央计算机上的表。当从其他设备读取表格时，从一个设备所做的更改应该是可见的。

我现在拥有的：

*   现在我没有我想要的中央桌子。因为我认为正在发生的是每个设备都在创建自己的 SQL 表进行编辑。
*   每个设备都连接到联网计算机以显示网页/用户界面（在其中编辑自己的表格）
*   如果这意味着什么，我正在使用 JavaScript

如果有人能帮助我，那就太好了，或者如果有人能指出我正确的方向，我将不胜感激！

我完全不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:34:08.627

您显然必须连接到同一`SQL`台服务器才能访问同一数据库。

假设您正在使用 C#.Net 进行编程，并且想要连接到托管在另一台计算机上的数据库。您将有一个连接字符串：

`SqlConnection myConnection = new SqlConnection(@"Server=SERVER_NAME;Database=DATABASE_NAME;User id=Your_Id; Password=Your_Password");`

其中 SERVER_NAME 是您在其他地方托管的服务器的名称，DATABASE_Name 是您要使用的数据库的名称。

托管单个服务器。

您应该为您的数据库开发一个结构。所有表、视图和存储过程（mysql 中的例程）。这样，设备将只读取/写入表中的信息。

我不太明白允许设备在哪种情况下创建表。如果没有必要，不要让他们这样做。如果您的表已经在您的服务器上创建并且设备尝试在其中读/写，那么设备将无法创建自己的副本。

# cakephp - CakePHP 在助手之间共享代码

> ID：11314036
> 
> 赞同：0
> 
> 时间：2012-07-03T15:17:55.990
> 
> 标签：cakephp, helpers

我有两种相似但不同的数据。他们有一些他们共享的展示代码，但有些他们以不同的方式实现。

我在想我会在一个助手中拥有一个工厂函数（Tracker 是一个 TrackerHelper），就像这样；

```
$this->Tracker->getInstance("boolean"); // Returns a BooleanTrackerHelper 
```

但我不确定如何从另一个助手中返回另一个助手。我不认为我可以这样做，`return new BooleanTrackerHelper()`因为 CakePHP 可能有它自己想要通过的例程，此外；这将迫使我将所有类放在同一个文件中。

手册中有一个功能允许您从视图 ( `$this->Helpers->load()`) 中加载帮助器，但我想从另一个帮助器加载帮助器。

更普遍; 如果您不想在一堆不同的视图中重复，如果数据是 A 类型，则使用助手 A，如果是 B 类型，则使用助手 B，并且助手 A 和 B 共享一些代码，您会怎么做。

如果是这样，可能有更聪明的方法来解决这个问题；请随时分享！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:24:06.197

If you simply want to use one helper from within another helper, just include it in the `$helpers` array where you want to use it:

```
class TrackerHelper extends AppHelper {
    public $helpers = array('BooleanTracker');

    public function someMethod() {
        // Using the other helper
        $this->BooleanTracker->someOtherMethod();
    }
} 
```

# php - 在 codeigniter 中用于多个应用程序的 mod_rewrite

> ID：11314040
> 
> 赞同：2
> 
> 时间：2012-07-03T15:18:08.723
> 
> 标签：php, .htaccess, codeigniter, url-rewriting, codeigniter-url

我是 url re-writng 的新手，目前正面临在 codeigniter 中为多个应用程序重写 url 的问题。我已经用一些可能的答案扫描了整个stackoverflow，但它仍然没有完全解决我的问题

我的根目录就是这样

*   -应用
*   - 行政人员
*   - 前端

我正在寻找的是让我的用户使用[http://www.mydomain.com/](http://www.mydomain.com/)访问我的网站（前端）和我的管理员（后端）作为[http://www.mydomain.com/admin/](http://www.mydomain.com/admin/)

我当前的 .htaccess 就是这样

```
<IfModule mod_rewrite.c>
    RewriteEngine On
# If the user types just "admin".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin$ administrator.php [L,QSA]

# If the user enter in any admin section, like "admin/section".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin\/(.*)$ administrator\.php/$1 [L,QSA]

# If the user types any site section, like "site/section".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index\.php/$1 [L,QSA]

    ErrorDocument 404 /index.php
</IfModule> 
```

来自[CodeIgniter 多应用程序 .htaccess 问题的代码](https://stackoverflow.com/questions/3531504/codeigniter-multi-application-htaccess-problem)

通过上面的.htaccess，我可以在前端得到我想要的东西，但我不能让它在我的后端工作。基本上，www.domain.com/admin 给出了 404 page not found 错误。

请就这个问题给我建议。另外，请指导我应该将这个 .htaccess 文件放在哪里？在根？在应用程序文件夹中？或分别在前端和管理员文件夹中。

非常感谢。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:43:04.247

为什么不在你的根目录中有这样的东西。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|update\.php|assets|admin|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这基本上会忽略任何目录，例如“admin”以路由到前端应用程序。您必须`config.php`从控制器中设置并删除 index.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:30:57.917

已经找到了解决这个问题的方法。这不是一种非常聪明的方法，但至少有效。

首先，我在根目录中创建了一个“admin”文件夹，其中包含应用程序 index.php 的副本，这有效地使我的目录看起来像这样。

```
 -admin
    --.htaccess
    --index.php
    -application
    --frontend
    --administrator
    -index.php
    -.htaccess 
```

对于此解决方案，您需要在不同位置有两个 .htaccess 文件。对于根目录下的 .htaccess，它应该如下所示。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|update\.php|administrator\.php|assets|admin|robots\.txt|favicon\.ico)
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

对于 admin 文件夹中的 .htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^/(.*)$ index.php/$1 [L]

        RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

虽然这适用于 localhost，但值得注意的是，它可能不适用于租用的服务器，因为您主机中的文件系统可能不同。

# c# - 托管到 AppHarbor 后写入 Excel 工作表失败。用 C# 完成

> ID：11314041
> 
> 赞同：1
> 
> 时间：2012-07-03T15:18:13.143
> 
> 标签：c#, wcf

我在 C# 中编写了 2 个方法。一种用于从 excel 表中获取记录，另一种用于插入到 excel 表中。当我在我的本地系统中运行时，这两种方法都可以正常工作。但是当我将它托管到 appHarbor.com 时，获取记录成功但插入失败。

这是插入方法

```
private bool AddBlessingToExcel(Blessing blessing)
{
    try
    {

        string path = System.Web.HttpContext.Current.Server.MapPath("Data") + "/WeddingSheets.xls";

        OleDbConnection myConnection = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=Excel 8.0");

        // always read from the sheet1.

        OleDbCommand myCommand = new OleDbCommand("Insert into [Blessings$] (GuestName, GuestLocation, GuestMessage)" + " values ('" + blessing.GuestName + "', '" + blessing.GuestLocation + "', '" + blessing.GuestMessage + "')");

        myConnection.Open();

        myCommand.Connection = myConnection;

        int val = myCommand.ExecuteNonQuery();

        //Close the connection.
        myConnection.Close();
        return true;
    }
    catch(Exception ex)
    {
        //throw ex;
        return false;
    }
} 
```

我不知道问题到底是什么，但我的猜测是因为文件权限..任何人都可以尽快为我提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:21:10.110

在应用程序的“设置”页面中，在页面顶部，您应该会看到一个名为“启用文件系统写入访问”的选项，旁边有一个复选框。

这应该给你的应用写访问权限。但是，我相信每次构建时都会重置它，因此您可能必须在新部署后再次启用它。

# excel - 在 Excel 中直观地表示用户可调整大小的数据范围

> ID：11314043
> 
> 赞同：0
> 
> 时间：2012-07-03T15:18:15.530
> 
> 标签：excel, user-interface, vsto

**精简版**

有没有办法在 Excel 中直观地表示用户可调整大小的数据范围？（如果是这样，通过 VSTO？）

**长版**

我正在编写一个 Excel 加载项，它有助于将任意工作簿中的数据导出到现有数据库表。数据或多或少是表格的，但几乎总是以不同的方式排列。我希望使该过程尽可能无错误但尽可能快。例如，表格数据范围的列的标题名称根据与预定字段名称列表的相似性进行排名。然后将排名输入[分配问题](http://en.wikipedia.org/wiki/Assignment_problem)的求解器。这允许以惊人的高精度将列自动映射到字段。

然而，检测表格数据的范围是不可行的——通常并不是所有的数据都需要导出。因此，我希望为用户制作一个熟悉而又快速操作的用户界面，以便在工作簿中指定表格数据范围。

一种这样的用户界面是让用户绘制并重新调整他们想要导出的范围。因此，我正在寻求做到这一点。但是，如果其他用户界面想法更有利于实施但仍然易于使用，我对它们持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:06:10.700

我最终得到的解决方案是创建工作表的草稿副本并管理它的格式以突出显示它的各个部分——而不是通过选择单元格来“绘制”它们的用户可调整大小的区域。（界面采用熟悉的绘图程序的形式，带有各种工具，可让您以某些方式操作单元格信息。）数据导出区域和正常模式通过切换底部切换。

从本质上讲，这不是一个漂亮、优雅的解决方案，但对于最终用户来说却是相当巧妙的。

# ssh - 从目标机器禁用多跳 SSH？

> ID：11314045
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:18:21.590
> 
> 标签：ssh

这可能已经在某个地方被问过，但我一生都找不到它。

我目前正在设置一台服务器机器，我想让它只有直接通过 SSH 连接到服务器并拥有授权密钥的计算机才能进入。我已经得到了可以工作的密钥，但我没有不知道我应该如何确保人们不能多跳进入服务器机器。我想知道：

*   是否可以仅通过更改服务器机器上的设置来禁用多跳？
*   如果是，我该怎么做？
*   如果没有，我还有哪些其他选择才能实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:31:25.353

我不相信仅通过更改服务器上的设置是可能的。

如果您的服务器被调用`server`并且网络上的另一台机器被调用`aux`，那么您需要禁止以下多跳方法，可能还有其他方法：

1.  `ssh -t aux ssh server`
2.  `ssh -o ProxyCommand='ssh aux /usr/bin/nc %h %p' server`
3.  `ssh -N -L 2222:server:22 aux & ssh -p 2222 localhost`

所以你需要确保

*   `ssh`在您网络上的任何其他机器上运行时将拒绝连接到`server`，除非用户在本地登录（不是通过 ssh）
    *   或者，确保网络上所有其他计算机上 的 sshd 设置`AllowAgentForwarding`设置为`no`
        *   手册页指出，这“不会提高安全性，除非用户也被拒绝 shell 访问，因为他们总是可以安装自己的转发器”
*   netcat 和等价物未安装在网络上的任何其他计算机上
*   sshd 设置在您网络上的所有其他计算机上 `AllowTcpForwarding`设置为`no`
    *   手册页指出，这“不会提高安全性，除非用户也被拒绝 shell 访问，因为他们总是可以安装自己的转发器”

这可能有点多。

也许您可以将私钥嵌入可能不会离开建筑物的硬件令牌上？不过，这超出了我的经验范围。

如果您在 ServerFault.com 上提问，您应该会得到更好的答案，希望您的问题很快就会被迁移到那里。

# css - 在 CSS 中使图像适合浏览器大小

> ID：11314047
> 
> 赞同：1
> 
> 时间：2012-07-03T15:18:27.520
> 
> 标签：css, image, browser

我正在努力解决几个小时的新问题，并且无法正确处理。我的CSS技巧很纯，所以请理解。

所以我想要实现的是我在网站上有图像，当我改变浏览器窗口的大小时，图像大小必须调整到浏览器大小，这样才能看到整个图像。图像也必须位于页面的中心。谢谢你的帮助。

索引.php：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
<title>James Laycock</title>
</head>
<body>
<div id="main">
<div id="content">
<div id="image_container">
<a href="index.php?page=1"><img src="images/01.jpg" class="image" /></a></div>
</div></div></body></html> 
```

样式.css：

```
body{
margin: 0; 
padding: 0; 
padding-top: 10px;
text-align: center;}

#main {
height: 90%;
width: 1000px;
position: absolute;
border: 0px;
padding: 0;
margin: 0 auto;}

#content{
height: 90%;
width: auto;
margin-top: 10px;
margin-right:10px;}

#image_container{
height: 100%;
max-height:100%;
width: auto;}

.image{
height: 100%; 
width: auto;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:21:20.897

尝试放置图像容器

> 文本对齐：居中

并且，在实际图像上以百分比形式放置高度/宽度。

编辑：不要忘记将图像容器居中，或将其宽度设置为全屏。

# java - 如何在 NetBeans 上编辑库源文件？

> ID：11314059
> 
> 赞同：3
> 
> 时间：2012-07-03T15:18:50.803
> 
> 标签：java

我正在做基于 SSJ（Java 中的随机模拟）库的 JAVA 项目。在我的项目中，我已按照所需的步骤导入 SSJ 库文件和源文件。

在项目的库分支中查看 SSJ 库文件时，只显示类文件，但是当我打开它们时，我可以查看源代码（我以前不能，因为我没有导入源代码）所以我假设一切都正确导入。

当我运行库提供的示例时，一切都运行良好且符合预期。但是，如果我尝试更改库的源代码，例如更改输出中的文本，我对源文件所做的更改不会反映在 java 程序的输出中。

关于我可能做错了什么的任何提示？

我知道这可能很难理解或测试，因为我无法为此创建和 SSCCE。库文件托管在这里 (http://www.iro.umontreal.ca/~simardr/ssj/ssj-20120216.zip) 和源代码在这里 (http://www.iro.umontreal.ca/~simardr /ssj/ssj-source.html)。

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:39:42.050

将源代码添加到库中用于调试和文档目的。这并不意味着 Netbeans 会自动检测更改并重新编译类。

您应该为库本身创建一个项目，以便从源代码重新创建它。更改是，如果您有源代码，将有一个`build.xml`或一个`pom.xml`包含编译库的步骤，并允许创建*Java 自由形式项目*或*具有现有 POM*的项目。

然后，您将删除对库本身的引用并向项目添加依赖项。

其他选择是将库源添加到您正在使用的同一项目中（并且再次删除对库的引用），但我不建议这样做，除非它是一个非常小的简单库。

**编辑。特定的 ssj 信息。**

`ssj`是一个库，其中原始源代码位于`.tex`文件中，它需要几个可用的程序来生成`.java`文件然后编译它们。所有这些信息都可以在`COMPILE.txt`原始文件中找到。

由于源代码分发包含`.java`文件，因此可以仅使用 Netbeans 生成一个`.jar`，但它需要修改`build.xml`以仅编译 Java 源文件。此外，在创建*Java Free Form Project*时，需要选择`lib`作为*Build Project*的目标。

这是Netbeans 7.1 从 Java 源代码编译的[最小构建 xml 。](http://pastebin.com/raw.php?i=Z9LmKgfN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T00:55:25.357

为了从 *.tex 文件创建新的 *.java 文件，您需要发行版中提供的 tcode.jar。您是否已将 tcode.jar 作为外部 jar 添加到您的项目中？

umontreal.iro.lecuyer.tcode.Texjava 在 tcode.jar

# google-chrome-devtools - 如何在 Chrome 的开发者工具“脚本”选项卡中按名称过滤脚本

> ID：11314064
> 
> 赞同：1
> 
> 时间：2012-07-03T15:19:12.567
> 
> 标签：google-chrome-devtools

有些网站有很多脚本。例如[orionhub](http://orionhub.org)。在这种情况下，Chrome 的开发者工具会变得有点混乱（见图）。有没有办法过滤显示的脚本，例如按名称？

![一个网站上有许多脚本](../Images/b18b6cd83380e4463dfb54b252316f33.png)

**编辑：**我发现当我在“脚本”上下文中时，我可以开始输入，并且将选择与我迄今为止输入的单词匹配的第一个脚本。

![增量搜索选择](../Images/c20b31d85b11d993071e990204d9bd3d.png)

没关系，尽管如果该功能支持匹配子字符串和通配符会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:30:49.170

尝试按 Ctrl/Cmd+O 以打开“打开资源”对话框。它允许按名称快速搜索文件并支持驼峰式搜索（输入 yAS 表示 yetAnotherScript）。您可以按“？”查看其他有用的快捷方式 在开发人员工具中。

# python - 为什么 **kwargs 不使用 python ConfigObj 进行插值？

> ID：11314068
> 
> 赞同：7
> 
> 时间：2012-07-03T15:19:37.587
> 
> 标签：python, keyword-argument, configobj

我在 python 中使用带有模板样式插值的[ConfigObj 。](http://www.voidspace.org.uk/python/configobj.html)通过 ** 展开我的配置字典似乎并没有进行插值。这是功能还是错误？有什么好的解决方法吗？

```
$ cat my.conf
foo = /test
bar = $foo/directory

>>> import configobj
>>> config = configobj.ConfigObj('my.conf', interpolation='Template')
>>> config['bar']
'/test/directory'
>>> '{bar}'.format(**config)
'$foo/directory' 
```

我希望第二行是`/test/directory`. 为什么插值不适用于 **kwargs？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:33:31.423

解包关键字参数时，会创建一个新对象：类型为`dict`. 该字典包含配置的原始值（无插值）

示范：

```
>>> id(config)
31143152
>>> def showKeywordArgs(**kwargs):
...     print(kwargs, type(kwargs), id(kwargs))
...
>>> showKeywordArgs(**config)
({'foo': '/test', 'bar': '$foo/directory'}, <type 'dict'>, 35738944) 
```

要解决您的问题，您可以像这样创建配置的扩展版本：

```
>>> expandedConfig = {k: config[k] for k in config}
>>> '{bar}'.format(**expandedConfig)
'/test/directory' 
```

另一种更优雅的方法是简单地避免拆包：这可以通过使用函数[string.Formatter.vformat](http://docs.python.org/library/string.html#string.Formatter.vformat)来实现：

```
import string
fmt = string.Formatter()
fmt.vformat("{bar}", None, config) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T14:03:08.220

我有一个类似的问题。

一种解决方法是使用 configobj 的函数“.dict()”。这是因为 configobj 返回一个真实的字典，Python 知道如何解压。

您的示例变为：

```
>>> import configobj
>>> config = configobj.ConfigObj('my.conf', interpolation='Template')
>>> config['bar']
'/test/directory'
>>> '{bar}'.format(**config.dict())
'/test/directory' 
```

# java - 正则表达式电子邮件地址超出 xml

> ID：11314069
> 
> 赞同：0
> 
> 时间：2012-07-03T15:19:39.490
> 
> 标签：java, xml, regex, parsing

**我的问题：**解析以下信息的好方法是什么？

我有一个从 XML 获取输入的 java 程序。我有一个功能，如果处理过程中出现任何问题，它会发送一封错误电子邮件。因为解析 XML 可能是一个问题，所以我想要一个能够从 xml 中正则表达式电子邮件的功能（因为如果解析是问题，那么我无法正常从 xml 中获取错误电子邮件）。

**要求：**

*   我希望能够分别解析 to、cc 和 bcc 属性
*   还有其他元素必须具有 to、cc 和 bcc 属性
*   空格无关紧要，因此我的示例可能会在换行符上显示属性，但情况并非总是如此。
*   属性的顺序无关紧要。

这是一个xml的例子：

```
<error_options
  to="your_email@your_server.com"
  cc="cc_error@your_server.com"
  bcc="bcc_error@your_server.com"
  reply_to="someone_else@their_server.com"
  from="bo_error@some_server.org"
  subject="Error running System at @@TIMESTAMP@@"
  force_send="false"
  max_email_size="10485760"
  oversized_email_action="zip;split_all"
> 
```

我试过这个`error_options.{0,100}?to="(.*?)"`，但这符合我的要求`reply_to`。这让我觉得可能有一些我可能会错过的案例，这就是我将其作为问题发布的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:53:51.640

这篇文章会将您的所有属性`String s="<error_options..."`放入地图中：

```
 Pattern p = Pattern.compile("\\s+?(.+?)=\"(.+?)\\s*?\"",Pattern.DOTALL);
    Map a = new HashMap() ;
    Matcher m = p.matcher(s) ;
    while( m.find() ) {
        String key = m.group(1).trim() ;
        String val = m.group(2).trim() ; 
        a.put(key, val) ;
    } 
```

...然后您可以从该地图中提取您感兴趣的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:25:43.047

这个问题类似于[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。永远不要使用正则表达式解析 XML 或 HTML。Java 中有许多 XML 解析器实现来正确执行此任务。阅读文档并一一解析属性。

不要介意，如果用户的 XML 格式不正确，解析器可以处理很多草率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:26:19.133

```
/<error_options(?=\s)[^>]*?(?<=\n)\s*to="([^"]*)"/s;
/<error_options(?=\s)[^>]*?(?<=\n)\s*cc="([^"]*)"/s;
/<error_options(?=\s)[^>]*?(?<=\n)\s*bcc="([^"]*)"/s; 
```

# bash - 如何使用 bash 中可用的工具生成一系列非周末日期？

> ID：11314070
> 
> 赞同：2
> 
> 时间：2012-07-03T15:19:44.510
> 
> 标签：bash, shell, sed, awk, unix-timestamp

我想生成一个名称包含的文件列表，`${filename}.${date}`例如`file.20111101`，`file.20120703`从`November 1, 2011`今天开始，它应该不包括周末。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:36:20.233

2011 年试试这个

```
for y in 2011; do
  for m in {1..12}; do
    for d in  `cal -m $m $y|tail -n +3|cut -c 1-15`; do
      printf "file.%04d%02d%02d\n" $y $m $d;
    done;
  done;
done 
```

或者这个适用于 2011 年 11 月到 2013 年 12 月

```
for ym in {2011' '{11,12},{2012..2013}' '{1..12}}; do
  read y m <<<$ym;
  for d in  `cal -m $m $y|tail -n +3|cut -c 1-15`; do
    printf "file.%04d%02d%02d\n" $y $m $d;
  done;
done 
```

或直到本月底“艰难”

```
for ym in {2011' '{11,12},2012' '{1..7}};do
  read y m <<<$ym;
  for d in  `cal -m $m $y|tail -n +3|cut -c 1-15`;do
    printf "file.%04d%02d%02d\n" $y $m $d;
  done;
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:35:26.097

这可能对你有用（GNU date、sed 和 Bash）：

```
seq 0 $((($(date +%s)-$(date -d 20111101 +%s))/86400)) |
sed '5~7d;6~7d' |
xargs -l1 -I '{}' date -d '+{} days 20111101' +file.%Y%m%d 
```

解释：

*   `seq`提供从`20111101`到的天数`today`
*   `sed`过滤掉周末
*   `xargs``date`为命令提供日期参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T03:02:08.160

另一种选择是使用`dateseq`( `dateutils`http://www.fresse.org/dateutils/#dateseq ) [。](http://www.fresse.org/dateutils/#dateseq)

```
$ dateseq 2017-03-25 $(date +%F) --skip sat,sun -ffile.%Y%m%d
file.20170327
file.20170328
file.20170329
file.20170330
file.20170331
file.20170403
file.20170404
file.20170405
file.20170406
file.20170407 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:55:08.530

gawk 的解决方案：

```
gawk -v START_DATE="2011 11 01 0 0 0" -v FILE="file" '
  BEGIN {

    END_DATE   = strftime( "%Y %m %d 0 0 0", systime() )

    while ( START_DATE <= END_DATE ) {
      split( START_DATE, DATE )
      if ( strftime( "%u", mktime( START_DATE ) ) < 6 ) print FILE "." DATE[ 1 ] DATE[ 2 ] DATE[ 3 ]
      START_DATE = strftime( "%Y %m %d 0 0 0", mktime( DATE[ 1 ] " " DATE[ 2 ] " " ( DATE[ 3 ]+1 ) " 0 0 0" ) )
    }

  }
' 
```

这使用了*mktime*的一个很好的属性，当您增加一个日期组件（例如，“2012-02-33”变为“2012-03-04”）时，它会自动找到正确的日期。

# visual-studio-2012 - VS2012：在代码审查模式下仅显示 _one_ 文件

> ID：11314071
> 
> 赞同：0
> 
> 时间：2012-07-03T15:19:46.917
> 
> 标签：visual-studio-2012, tfs-code-review

我正在使用内置工具（TFS？）在 VS2012RC 中进行代码审查

已经对文件进行了大量重构，因此 diff 毫无意义。我只想查看新文件（即没有差异）。有没有办法将代码审查视图配置为只看到一个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:34:18.777

您寻求的功能是在称为 Review Assistant的[替代代码审查工具中实现的。](http://www.devart.com/review-assistant/)它是 Visual Studio 2010 和 2012 的加载项，可与 TFS 一起使用。

# iphone - iOS 上的自由手写

> ID：11314072
> 
> 赞同：0
> 
> 时间：2012-07-03T15:19:54.773
> 
> 标签：iphone, ocr, textinput, handwriting

我想将手写作为文本输入到我的项目中。

是否有任何现有的代码或库可以帮助我完成此任务？如果没有，iPhone 4 是否有像中文键盘这样的手写选项，它有手写工具，但是是英文的？

当我做了一些研究时，我找不到任何东西，也许我只是在寻找错误的地方？有人可以帮助我吗？

如果可能的话，我希望输入延迟小于一秒，但最好是半秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:23:11.387

iOS上没有英文的手写识别。至于延迟——那是因为系统需要为识别进行计算——所以不，你无能为力。

# java - RESTful WS 中的依赖注入

> ID：11314073
> 
> 赞同：2
> 
> 时间：2012-07-03T15:19:56.420
> 
> 标签：java, rest, dependency-injection, ejb, jax-ws

我有简单宁静的 WS

```
@Path("basic")
public class ServiceRS
{

   private IServiceJAX service;

   @GET
   @Produces(MediaType.APPLICATION_JSON)
   @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
   public String find(@FormParam("searchRequest") final String searchRequest)
   {
//...
      final List<Info> response = service.find(search);
//...
   }

} 
```

jax-webservice`IServiceJAX`的接口在哪里。`@Local`我可以注入`IServiceJAX`使用`ServiceRS`注释吗？
我不想使用 JNDI 查找...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:57:24.493

你当然可以。尽管我认为还有其他方法，但我已经成功运行了一个简单的测试项目，该项目`@Stateless` `@WebService`通过注释将 的`@Local`实现`interface`注入到使用.`@EJB``@Stateless``@Path`

这不是您所要求的正确的 CDI 注入，但它工作得很好，并且可能无论如何都符合您的需求。

**IServiceJAX**类：

```
public interface IServiceJAX {
    public String hello(String txt);
} 
```

**IServiceJAXImpl**类：

```
@WebService(serviceName = "NewWebService")
@Local
@Stateless
public class IServiceJAXImpl implements IServiceJAX {

    @WebMethod(operationName = "hello")
    @Override
    public String hello(@WebParam(name = "name") String txt) {
        return "Hello " + txt + " !";
    }
} 
```

**服务RS**类：

```
@Path("basic")
@Stateless
public class ServiceRS {

    @EJB private IServiceJAX wsi;

    @GET
    @Path("{id}")
    @Produces(MediaType.APPLICATION_JSON)
    public String result(@PathParam("id") String id) {
        return wsi.hello(id);
    }
} 
```

**更新**

如果你更喜欢 CDI 注入，你可以保留上面的代码并简单`@Local`地`@Stateless`从`IServiceJAXImpl`. 您可以使用以下方法注入此类的实例：

```
@Inject private IServiceJAX wsi; 
```

代替

```
@EJB private IServiceJAX wsi; 
```

# algorithm - 排除数字的算法

> ID：11314077
> 
> 赞同：20
> 
> 时间：2012-07-03T15:20:04.420
> 
> 标签：algorithm, language-agnostic

你得到一个整数 N，它适合 long（小于 2^63-1）和 50 个其他整数。你的任务是找出从 1 到 N 有多少个数字不包含这 50 个数字的子串？

这个问题来自采访。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T19:26:13.523

This is only an explanation of what larsmans already wrote. If you like this answer, please vote him up in addition.

A finite automaton, FA, is just a set of *states*, and rules saying that if you are in state `S` and the next character you are fed is `c` then you transition to state `T`. Two of the states are special. One means, "start here" and the other means "I successfully matched". One of the characters is special, and means "the string just ended". So you take a string and a finite automaton, start in the starting state, keep feeding characters into the machine and changing states. You fail to match if you give any state unexpected input. You succeed in matching if you ever reach the state "I successfully matched".

Now there is a well-known algorithm for converting a regular expression into a finite automaton that matches a string if and only if that regular expression matches. (If you've read about regular expressions, this is how DFA engines work.) To illustrate I'll use the pattern `^.*(44|3).*$` which means "start of the string, any number of characters, followed by either 44 or 3, followed by any number of characters, followed by the end of the string."

First let's label all of the positions we can be in in the regular expression when we're looking for the next character: `^`A`.*(4`B`4|3)`C`.*$`

The states of our regular expression engine will be subsets of those positions, and the special state matched. The result of a state transition will be the set of states we could get to if we were at that position, and saw a particular character. Our starting position is at the start of the RE, which is {A}. Here are the states that can be reached:

```
S1: {A}   # start
S2: {A, B}
S3: {A, C}
S4: {A, B, C}
S5: matched 
```

Here are the transition rules:

```
S1:
  3: S3
  4: S2
  end of string: FAIL
  any other char: S1
S2:
  3: S3
  4: S3
  end of string: FAIL
  any other char: S1
S3:
  4: S4
  end of string: S5 (match)
  any other char: S3
S4:
  end of string: S5 (match)
  any other char: S4 
```

Now if you take any string, start that in state `S1`, and follow the rules, you'll match that pattern. The process can be long and tedious, but luckily can be automated. My guess is that larsmans has automated it for his own use. (Technical note, the expansion from "positions in the RE" to "sets of positions you might possibly be in" can be done either up front, as here, or at run time. For most REs it is better to do it up front, as here. But a tiny fraction of pathological examples will wind up with a very large number of states, and it can be better to do those at run-time.)

We can do this with any regular expression. For instance `^([1-9]|1[0-9]|2[0-7])$` can get labeled: `^`A`([1-9]|1`B`[0-9]|2`C`[0-7])`D`$` and we get the states:

```
T1: {A}
T2: {D}
T3: {B, D}
T4: {C, D} 
```

and transitions:

```
T1:
  1: T3
  2: T4
  3-9: T2
  any other char: FAIL
T2:
  end of string: MATCH
  any other char: FAIL
T3:
  0-9: T2
  end of string: MATCH
  any other char: FAIL
T4:
  0-7: T2
  end of string: MATCH
  any other char: FAIL 
```

OK, so we know what a regular expression is, what a finite automaton, and how they relate. What is the intersection of two finite automata? It is just a finite automaton that matches when both finite automata individually match, and otherwise fails to match. It is easy to construct, its set of states is just the set of pairs of a state in the one, and a state in the other. Its transition rule is to just apply the transition rule for each member independently, if either fails the whole does, if both match they both do.

For the above pair, let's actually execute the intersection on the number `13`. We start in state `(S1, T1)`

```
state: (S1, T1)  next char: 1
state: (S1, T3)  next char: 3
state: (S3, T2)  next char: end of string
state: (matched, matched) -> matched 
```

And then on the number `14`.

```
state: (S1, T1)  next char: 1
state: (S1, T3)  next char: 4
state: (S2, T2)  next char: end of string
state: (FAIL, matched) -> FAIL 
```

Now we come to the whole point of this. Given that final finite automata, we can use dynamic programming to figure out how many strings there are that match it. Here is that calculation:

```
0 chars:
  (S1, T1): 1
    -> (S1, T3): 1 # 1
    -> (S1, T4): 1 # 2
    -> (S3, T2): 1 # 3
    -> (S2, T2): 1 # 4
    -> (S1, T2): 5 # 5-9
1 chars:
  (S1: T2): 5      # dead end
  (S1, T3): 1
    -> (S1, T2): 8 # 0-2, 5-9
    -> (S2, T2): 1 # 3
    -> (S3, T2): 1 # 4
  (S1, T4): 1
    -> (S1, T2): 6 # 0-2, 5-7
    -> (S2, T2): 1 # 3
    -> (S3, T2): 1 # 4
  (S2, T2): 1      # dead end
  (S3, T2): 1
    -> match:    1 # end of string
2 chars:
  (S1, T2): 14     # dead end
  (S2, T2): 2      # dead end
  (S3, T2): 2
    -> match     2 # end of string
  match:    1
    -> match     1 # carry through the count
3 chars:
  match:    3 
```

OK, that's a lot of work, but we found that there are 3 strings that match both of those rules simultaneously. And we did it in a way that is automatable and scaleable to much larger numbers.

Of course the question we were originally posed was how many matched the second but not the first. Well we know that 27 match the second rule, 3 match both, so 24 must match the second rule but not the first.

As I said before, this is just larsmans solution elucidated. If you learned something, upvote him, vote for his answer. If this material sounds interesting, go buy a book like *Progamming Language Pragmatics* and learn a lot more about finite automata, parsing, compilation, and the like. It is a very good skillset to have, and far too many programmers don't.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-03T15:39:50.263

你没有指定一个基数，但我会假设十进制而不失一般性。

首先，认识到这是一个字符串问题，而不是数字问题。

构建一个有限自动机*A*以将 50 个整数识别为其他字符串的子字符串。例如，两个整数 44 和 3 被 RE 识别为子字符串

```
^.*(44|3).*$ 
```

构建一个有限自动机*B*以识别所有小于*N*的数字。例如，要识别十进制的 1 到 27（包括），这可以通过编译 RE

```
^([1-9]|1[0-9]|2[0-7])$ 
```

计算自动机*A*和*B*的交集*C*，这又是一个 FA。

 **使用动态编程算法来计算*C*识别的语言的大小。*从A*识别的语言的大小中减去它，由相同的算法计算。

（我并不是说这是渐近最优的，但它的速度足以解决许多欧拉计划问题：）**

# c++ - 发送 WM_SETTEXT 时如何避免 EN_CHANGE 通知？

> ID：11314082
> 
> 赞同：9
> 
> 时间：2012-07-03T15:20:21.933
> 
> 标签：c++, visual-studio, user-controls, mfc

我有一个 CEdit 派生控件，当底层数据为空时，它会显示字符串“N/A”。我最近添加了代码来清空控件(SetWindowText("");) 当它获得焦点并设置 if back to "N/A"(SetWindowText("N/A")) 当焦点丢失时如果用户离开控制空。

唯一的问题是将窗口文本设置为“”或“N/A”会触发 EN_CHANGE，因此我的对话框认为数据已更改。

调用 SetWindowText (WM_SETTEXT) 时如何避免 EN_CHANGE 被触发？

笔记

-我知道我可以将编辑控件设置为 Multiline=TRUE 但这对我来说是不可接受的。

- 我的应用程序是 MBCS，所以我不能使用 SetCueBanner

-我想要一个优雅的解决方案。将父窗口临时设置为 NULL 并不是一个优雅的解决方案。

编辑：

- 我希望解决方案在我的自定义控件中，而不是在每个对话框中

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T16:02:03.053

我以前做过的方式（上次，比如 20 分钟前；事实上我在考虑问同样的问题），是设置一个标志。当我要以编程方式设置文本时，我设置了标志，并在 EN_CHANGE 处理程序中检查它：

```
void CMyDialog::MyFunction()
{    
    setEditTextProgramatically = true;  
    c_Edit.SetWindowText(_T("Whatever"));  
    setEditTextProgramatically = false;
}

void CMyDialog::OnEnChangeEdit()
{
    if (!setEditTextProgramatically)
    {
        // Do whatever you need to do
    }
} 
```

我知道这不是最优雅的解决方案，但它有效，至少对我而言。

我一直想知道为什么 MFC 没有提供一种方法来区分用户输入和代码更改，但事实就是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T19:21:29.023

我终于找到了一个合适的解决方案来解决我的问题。

首先，我在派生控件的头文件中添加了一个标志，并在构造函数中将其初始化为 false

```
bool m_bNoEnChange; 
```

* * *

我在派生控件的头文件中覆盖了 OnChildNotify，在实现中，我使用 EN_CHANGE 参数检查了 WM_COMMAND 消息。然后我返回 TRUE 以防止将消息发送给父级（对话框/页面）

```
virtual BOOL OnChildNotify(UINT message, WPARAM wParam, LPARAM lParam, LRESULT* pLResult); 
```

* * *

```
BOOL CADEdit::OnChildNotify(UINT message, WPARAM wParam, LPARAM lParam, LRESULT* pLResult) 
{
    if(message == WM_COMMAND && HIWORD(wParam) == EN_CHANGE)
    {
        //If the flag is set, don't send the message to the parent window
        if(m_bNoEnChange)
            return TRUE;
    }

    return CEdit::OnChildNotify(message, wParam, lParam, pLResult);
} 
```

* * *

最后，当控件获得和失去焦点时，我用我的标志包装了有问题的 SetWindowText

```
m_bNoEnChange = true;
SetWindowText(_T(""));
m_bNoEnChange = false; 
```

* * *

这个解决方案对我来说是最好的，因为我不必修改每个对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:29:30.883

您可以在发送之前禁用`(EnableWindow(FALSE)`或`WM_ENABLE`使用参数 FALSE 发送控件，`WM_SETTEXT`然后再启用它。这应该防止`EN_CHANGE`

可能有一些更优雅的方法：p

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-19T15:29:54.497

以下代码使用 C++ 11 功能，但可以轻松更改。

标题

```
// CEditOptionalNotify.h
//
// CEdit derived class allowing the control's text value to be
// set without (optionally) causing EN_CHANGE processing.
//
#pragma once

class CEditOptionalNotify : public CEdit
{
    //DECLARE_DYNAMIC(CEditOptionalNotify)
    // Enable use of RUNTIME_CLASS macro and CObject::IsKindOf()

public:

    CEditOptionalNotify();
    virtual ~CEditOptionalNotify();

    enum class PerformOnChangeProcessing { No, Yes };
    void vSetText(const TCHAR* pText, PerformOnChangeProcessing e);

protected:

    afx_msg BOOL bConsiderEnChangeAsHandled();

    bool m_bChangeNotificationsEnabled;

    DECLARE_MESSAGE_MAP()
}; 
```

执行

```
// EditOptionalNotify.cpp : implementation file
//

#include "stdafx.h"
#include <EditOptionalNotify.h>

//IMPLEMENT_DYNAMIC(CEditOptionalNotify, CEdit)

CEditOptionalNotify::CEditOptionalNotify() :
    m_bChangeNotificationsEnabled(true)
{ 
}

CEditOptionalNotify::~CEditOptionalNotify()
{
}

BEGIN_MESSAGE_MAP(CEditOptionalNotify, CEdit)
    ON_CONTROL_REFLECT_EX(EN_CHANGE, bConsiderEnChangeAsHandled)
END_MESSAGE_MAP()

BOOL CEditOptionalNotify::bConsiderEnChangeAsHandled()
{
    return (m_bChangeNotificationsEnabled ? FALSE : TRUE);
}

void CEditOptionalNotify::vSetText(const TCHAR* pText, PerformOnChangeProcessing e)
{
    bool bChangeNotificationsDesired = (PerformOnChangeProcessing::No == e ? false : true);

    if (bChangeNotificationsDesired != m_bChangeNotificationsEnabled)
    {
        m_bChangeNotificationsEnabled = bChangeNotificationsDesired;
        CEdit::SetWindowText(pText);
        m_bChangeNotificationsEnabled = (bChangeNotificationsDesired ? false : true);
    }
    else
        CEdit::SetWindowText(pText);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-05T07:16:05.517

```
LRESULT CMainDlg::OnEnUpdateEditID(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& /*bHandled*/)
{   
    //using static variable
    static bool isCodeChangeText = false;
    if(isCodeChangeText) 
        return 0;

    ……//Deal Window Text

    if(old == new)
        return 0; 

    int nSel = m_editPID.GetSel();//record cursor pos

    isCodeChangeText = true;
    m_editID.SetWindowText(new);
    m_editID.SetSel(nSel);
    isCodeChangeText = false;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-20T15:24:00.717

万一其他人发现这个讨论......

正如 Steven 所写，UpdateData 不会导致发送 EN_CHANGE。

在引擎盖下 MFC 调用 AfxSetWindowText 可以指定一个 hwnd。

# php - 将参数从索引传递到新的（Symfony 1.2）

> ID：11314084
> 
> 赞同：0
> 
> 时间：2012-07-03T15:20:38.050
> 
> 标签：php, symfony1

我需要当我从列表（indexSuccess）中单击“新建”链接时，新操作（executeNew）可以接收参数“'commercer_id='.$commerce_id”。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:36:52.563

试试下面，

应用程序/前端/配置/路由.yml

```
index:
  url:   /New/:commercer_id
  param: { module: index, action: new } 
```

在锚 src 中使用波纹管功能

```
url_for(array(
  'module'   => 'index',
  'action'   => 'new',
  'commercer_id'=>$commercer_id,
)) 
```

阅读有关[路由器的更多信息](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05)

希望能帮助到你！

# c# - WPF 在焦点上隐藏文本框文本

> ID：11314091
> 
> 赞同：0
> 
> 时间：2012-07-03T15:20:53.760
> 
> 标签：c#, wpf

我的界面上有一个包含十进制值的文本框，只要用户选择它，我就想清除它。

但是，如果用户不进行任何更改并选择另一个界面元素，我需要将文本恢复为清除之前的任何内容。

到目前为止，我有以下风格：

```
<Style x:Key="CustomTextBoxStyle" TargetType="{x:Type TextBox}">
     <Setter Property="Text" Value="{Binding RelativeSource={RelativeSource Self}, Path=Tag}"/>
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="Text" Value="{x:Null}" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

然后使用以下样式：

```
<TextBox Style="{DynamicResource CustomTextBoxStyle}" 
                     Tag="{Binding myDecimalValue, StringFormat=#.###}" 
                     TabIndex="1" /> 
```

但是，在这种情况下，即使用户输入了新值，该值也会恢复为原来的值。

谁能告诉我实现这一目标的最佳方法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:23:31.397

这里的解决方案不是隐藏文本，而是将其存储在变量中以备后用。在 C# 中，代码类似于：

```
string _originalValue;

public OnFocus(){
    _originalValue = TextBox.Text;
    TextBox.Text = "";
}
public LostFocus(){
    if(TextBox.Text == "")
        TextBox.Text = _originalValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:34:00.343

如果合适，您可以将前景色设置为透明以隐藏文本。

如果您真的想删除文本，您应该按照 Ryan Amies 在视图模型上的建议执行操作，您应该能够通过 datacontext 获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:20:04.763

感谢您的帮助，但我能够通过使用以下描述的 AttachedProperty 来实现我想要的并遵守 MVVM 原则：

[https://stackoverflow.com/a/7972361/1466960](https://stackoverflow.com/a/7972361/1466960)

这允许我将 IsFocused 属性绑定到我的视图模型中的一个值，并以与 Ryan Amies 描述的方式类似的方式进行。

查看型号：

```
bool isFocused = false;
double original;

public bool IsFocused
{
    get
    {
        return isFocused;
    }
    set
    {
        isFocused = value;

        if (isFocused)
        {
            original = current;
            current = "";
        }
        else
        {
            if (HundredPercentLine == "")
                current = original;
        }

        OnPropertyChanged(new PropertyChangedEventArgs("IsFocused"));
    }
} 
```

# android - 在收件箱/发件箱中获取电话号码

> ID：11314093
> 
> 赞同：1
> 
> 时间：2012-07-03T15:20:57.183
> 
> 标签：android

我目前正在使用

```
ContentResolver cr = getContentResolver();
Uri uri = Uri.parse("content://sms/");
Cursor messagesCursor = cr.query(uri, new String[] { "_id", "address", "body", "person" }, null, null, null);

if (messagesCursor.getCount() > 0) {
    while (messagesCursor.moveToNext()) {
        colName = getContactName(messagesCursor.getString(messagesCursor.getColumnIndex("address"))) + "\n";
    }
} 
```

获取用户收件箱中的所有文本。从那里，`messagesCursor.getColumnIndex("address")`将获得短信的号码。然后它将放置在`getContactName()`从联系人列表中获取联系人姓名的位置。

此方法将花费很长时间，因为它会通过每条短信，获取号码，然后获取联系人的姓名，检查姓名是否存在于数组中，如果它没有放入数组中，则从那里创建一个 ListView。

如果用户的收件箱包含大量文本，则应用程序在启动时将需要很长时间才能加载。

有什么特殊方法可以从收件箱中获取唯一号码吗？里面的东西`cr.query`？

提前致谢。（：

* * *

**编辑 ：**

我正在创建一个简单的收件箱应用程序。它从原始收件箱消息中读取并列出其中的消息。

对于这个项目，我所做的是通读所有“地址”，即电话号码，将其放入 ArrayList，最后放入 ListView。当它循环浏览收件箱中的所有消息时，启动需要很长时间。

例如 ：

*收件箱消息*

*   人 1

    人 1

    人 1

    人 2

    人 2

    人 3

    人 3

    人 3

    人 3

* * *

**我当前的代码做了什么：**

阅读每一条消息

检查名称是否在 ArrayList

如果是，请跳过。如果没有，请添加数组。

将 ArrayList 扔到 ListView 中。

* * *

**我的意图是：**

仅读出的代码：

人 1

人 2

人 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:38:08.490

尝试仅在投影中使用“地址”（这意味着，甚至不包括“_id”） - 我不确定这一点，但它可能会解决这个问题。

# matlab - 'for' 循环不会循环

> ID：11314094
> 
> 赞同：0
> 
> 时间：2012-07-03T15:21:04.390
> 
> 标签：matlab, loops, for-loop, mathematical-optimization

我有以下代码

```
for i = 1:8760
    A = [PVtech(i,:) WTtech(i,:)];
    b = demand(i);
    f = [CRF * PVtechcost(i,:) .* PVcap(i,:) ./ PVtech(i,:) CRF*WTtechcost(i,:) .* WTcap(i,:) ./ WTtech(i,:)];
    x(i) = linprog(f, A,b,[], [], lb);
end 
```

我正在尝试优化`linprog`8760 数据集，但似乎无法让每一行的循环都进行。
当我运行它时，我得到的大小为 1x30（当它应该是 8760 x 30 时）。

有谁看到我在哪里编码错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:30:36.763

是的，每次运行它时，您都会用单行 [PVtech(i,:) WTtech(i,:)] 覆盖 A

试试这个：`A = [A; PVtech(i,:) WTtech(i,:)];`即垂直连接

使用预分配，您的代码将如下所示：

```
numRows = 8760;
A = zeros(numRows, 30);

for i = 1:numRows

    A(i,:) = [PVtech(i,:) WTtech(i,:)];

    b = demand(i);

    f = [CRF*PVtechcost(i,:).*PVcap(i,:)./PVtech(i,:) CRF*WTtechcost(i,:).*WTcap(i,:)./WTtech(i,:)];

    x(i) = linprog(f, A,b,[], [], lb);

end 
```

# python - 在执行前将局部变量注入动态加载的模块

> ID：11314095
> 
> 赞同：1
> 
> 时间：2012-07-03T15:21:05.997
> 
> 标签：python

我正在尝试在 python 中构建一种脚本系统，允许在运行时在 python 中选择和执行小片段代码。

本质上我希望能够加载一个小的python文件，比如

```
for i in Foo: #not in a function.
    print i 
```

我在程序的其他地方指定 Foo 将是什么。好像 Foo 充当整个加载的 python 文件的函数参数，而不是单个函数

所以在别的地方

```
FooToPass = GetAFoo ()
TempModule = __import__ ("TheSnippit",<Somehow put {'Foo' : FooToPass} in the locals>) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:24:19.927

It is considered bad style to have code with side effects at module level. If you want your module to do something, put that code in a function, make `Foo` a parameter of this function and call it with the desired value.

Python's import mechanism does not allow to preinitialise a module namespace. If you want to do this anyway (which is, in my opinion, confusing and unnecessary), you have to fiddle around with details of the import mechanism. Example implementation (untested):

```
import imp
import sys

def my_import(module_name, globals):
    if module_name in sys.modules:
        return sys.modules[module_name]
    module = imp.new_module(module_name)
    vars(module).update(globals)
    f, module.__file__, options = imp.find_module(module_name)
    exec f.read() in vars(module)
    f.close()
    sys.modules[module_name] = module
    return module 
```

# c# - C# WPF 应用程序中的可插拔报告工具

> ID：11314096
> 
> 赞同：0
> 
> 时间：2012-07-03T15:21:06.347
> 
> 标签：c#, wpf, reporting-services, reporting

我的应用程序需要创建和生成报告的能力，似乎 2 个主要选项是 SSRS 或 Crystal Reports，还有许多其他选项，如 Infragistics、Active Reports 等。

由于该应用程序将在各种不同的公司环境中使用，因此他们的报告工具将有不同的偏好。因此，例如，一位客户可能是 SSRS 用户，而另一位客户可能认为 Crystal 是有史以来最好的东西。

这意味着重要的是不要将我的应用程序绑定到一个特定的报告工具，而是能够从许多列表中插入相关的一个。

有没有人做过类似的事情？在一般层面上，您将如何实施这一点以及我应该注意哪些问题？

提前感谢您的帮助

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:30:59.820

您可能遇到的问题是所有这些系统都使用自己的数据源对象和渲染引擎，您需要使用自己专有的查看器控件分别实现每个系统。您可能会将所有查看器的样式设置为看起来相同，但他们会喜欢并非所有查看器都具有相同的功能。

如果您使用业务对象作为数据源，我强烈建议您先将数据发送到数据库，因为如果您直接从数据库中提取数据，您会发现每个报告解决方案的开销要少得多。

每个报表查看器（来自每个不同报表解决方案的查看器）都允许您从查看器中剥离除主报表视图窗格之外的所有内容。然后，您可以实现自己的按钮，例如“打印、导出为 PDF、XLS、缩放、翻页、向前翻页。还有更多。然后您可以将按钮连接到报表查看器控件上的功能，即 Viewer.Zoom(100) . 您可能会在此浪费大量时间，因为重新编码已经存在且功能正常的按钮需要付出很多努力，以使它们看起来相同。

# uikit - 我们可以将 pdf 上绘制的内容保存为新的 pdf 吗？代码

> ID：11314097
> 
> 赞同：0
> 
> 时间：2012-07-03T15:21:06.803
> 
> 标签：uikit, xcode4.2, pdf-generation, cgpdfdocument

我们可以将绘制在pdf上的内容保存为pdf吗，我尝试将pdf与内容一起保存但没有运气，它保存为空白pdf

编码：

```
- (void)drawRect:(CGRect)rect
{
NSString *pathToPdfDoc = [[NSBundle mainBundle] pathForResource:@"myPDF" ofType:@"pdf"];
NSURL *pdfUrl = [NSURL fileURLWithPath:pathToPdfDoc];
document = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfUrl);
size_t count = CGPDFDocumentGetNumberOfPages (document);// 3

if (count == 0)
{
    NSLog(@"PDF needs at least one page");
    return;
}

CGRect paperSize = CGRectMake(0.0,0.0,595.28,841.89);

CGContextRef currentContext = UIGraphicsGetCurrentContext();

// flip context so page is right way up
CGContextTranslateCTM(currentContext, 0, paperSize.size.height);
CGContextScaleCTM(currentContext, 1.0, -1.0); 

CGPDFPageRef page = CGPDFDocumentGetPage (document, 1); // grab page 1 of the PDF 

CGContextDrawPDFPage (currentContext, page); // draw page 1 into graphics context

// flip context so annotations are right way up
CGContextScaleCTM(currentContext, 1.0, -1.0);
CGContextTranslateCTM(currentContext, 0, -paperSize.size.height);

////////////////////////////////

[curImage drawAtPoint:CGPointMake(0, 0)];
CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
CGPoint mid2 = midPoint(currentPoint, previousPoint1);

CGContextRef context = UIGraphicsGetCurrentContext(); 

[self.layer renderInContext:context];

CGContextMoveToPoint(context, mid1.x, mid1.y);
CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, self.lineWidth);
CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

CGContextStrokePath(context);

[super drawRect:rect];

// get a temprorary filename for this PDF

NSString* path = [[NSBundle mainBundle] pathForResource:@"sampleData" ofType:@"plist"];
path = NSTemporaryDirectory();
self.pdfFilePath = [path stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.pdf", [[NSDate date] timeIntervalSince1970] ]];

UIGraphicsBeginPDFContextToFile(@"test.pdf", paperSize, nil);

[@"annotation" drawInRect:CGRectMake(100.0, 100.0, 200.0, 40.0) withFont:[UIFont systemFontOfSize:18.0]];
} 
```

我试图在按钮单击时关闭 PDF

```
- (IBAction)buttonPressed:(UIButton *)button {
 UIGraphicsEndPDFContext();
 return;
} 
```

但它不起作用。

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:31:15.310

想通了，这是创建带有绘制或注释内容的pdf的功能

```
-(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName: (NSString*)aFilename

{
// Creates a mutable data object for updating with binary data, like a byte array
NSMutableData *pdfData = [NSMutableData data];

// Points the pdf converter to the mutable data object and to the UIView to be converted
UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

[aView.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext();

// Retrieves the document directories from the iOS device
NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];
NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

// instructs the mutable data object to write its context to a file on disk
[pdfData writeToFile:documentDirectoryFilename atomically:YES];
NSLog(@"documentDirectoryFileName: %@",documentDirectory);
} 
```

并在按钮单击时调用该函数。

# spring - Spring 控制器和 Webflow 操作的 AspectJ 自动代理问题

> ID：11314099
> 
> 赞同：3
> 
> 时间：2012-07-03T15:21:12.697
> 
> 标签：spring, aop, aspectj, spring-webflow, autoproxy

我有两个关于 spring/AspectJ AOP 的相关问题。我有一个典型的记录器方面，它记录从我的应用程序中的任何类抛出的异常，包括服务、daos、控制器和 webflow 操作......

```
@Aspect
public class AspectLogger {

    @AfterThrowing(pointcut = "execution(* com.myapp..*.*(..))", throwing = "t")
    public void logGustavoException(JoinPoint joinPoint, Throwable t) {

        Log logger = LogFactory.getLog(joinPoint.getTarget().getClass());
        logger.error(t.getMessage(), t);
    }
} 
```

在我的应用程序上下文中，我有一个同样典型的配置......

```
<context:annotation-config />

<!-- AOP logging config --> 
<aop:aspectj-autoproxy>
    <aop:include name="aspectLogger" />
</aop:aspectj-autoproxy>

<bean id="aspectLogger" class="com.myapp.AspectLogger" /> 
```

这在大多数情况下都很好，我遇到的问题是实现接口的 webflow 操作和控制器。

**1 - 实现接口的控制器......**

我们的一个控制器实现了一个接口，该接口定义了一个方法，并定义了几个用作@RequestMapping 处理程序的公共方法......

```
@Controller
public class AmazingController implements OutstandingInterface {

    // implements the method from OutstandingInterface
    @Override
    public Object doSomethingOutstanding(){
        ...
    }

    @RequestMapping(value="/amazingUrl.htm", method = RequestMethod.GET)
    public String doSomethingAmazing(HttpSession session, ModelMap model) {
        return "anAmazingViewName";
    }

    ...
} 
```

这里的问题是，由于控制器实现了一个没有定义其所有公共方法的接口（即控制器请求映射方法），因此为控制器创建了一个代理，该代理仅代理来自OutstandingInterface 的“doSomethingOutstanding”方法。因此，当请求进入 /amazingUrl.htm 时，Spring 不会将其路由到适当的请求处理程序 - 就好像请求映射不存在一样。*我已经通过为控制器定义一个接口来解决这个问题，该接口扩展了OutstandingInterface，并且还定义了控制器所需的请求处理程序方法，但对我来说，必须为控制器定义一个接口以便AspectJ的东西不'不'隐藏'请求处理程序*......

```
@Controller
public interface IAmazingController extends OutstandingInterface{

    @RequestMapping(value="/amazingUrl.htm", method = RequestMethod.GET)
    public String doSomethingAmazing(HttpSession session, ModelMap model);

}

...

public class AmazingController implements IAmazingController {

    @Override
    public Object doSomethingOutstanding(){
        ...
    }

    @Override
    @RequestMapping(value="/amazingUrl.htm", method = RequestMethod.GET)
    public String doSomethingAmazing(HttpSession session, ModelMap model) {
        return "anAmazingViewName";
    }

    ...
} 
```

**2 - 网络流操作**

第二个问题非常相似。引入 AspectJ 配置后，我的 webflow Action 类都没有被正确地自动装配——我不断收到“找不到 FantasticAction 类型的 bean”之类的错误。同样，我为所有 Action 类引入了接口，这解决了问题，因为它是在运行时注入的代理，而不是实际的操作实现类。

*所以最后......*这两种情况下的问题是 - 有没有一种方法可以解决这些 AspectJ 问题，而不必为我想要建议的每个类定义接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:41:45.193

你应该在你的类路径中添加 CGLIB 依赖，这样你就不需要创建接口来使用 AOP

看看[文档](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch08s06.html)。

# iphone - 没有故事板或 xib 文件的 iOS 通用应用程序

> ID：11314100
> 
> 赞同：4
> 
> 时间：2012-07-03T15:21:18.143
> 
> 标签：iphone, objective-c, ios

我有一个关于通用应用程序的问题。我的应用程序不会有情节提要或 xib 文件。没有它有可能编写通用的 iPhone/iPad 应用程序吗？我找到了一些教程如何**使用**情节提要创建通用应用程序，但我不想（我不能）在我的项目中使用此功能。

如果可能，我该怎么办？如果我必须只在 ViewControllers 中进行更改？我开始这样做了，我不会改变旧项目，所以我可以做任何事情 - 我应该学习什么/我应该记住什么？

我的目标是iOS 5。

**编辑：**

我在资源文件中有一个屏幕信息，我的 rootViewController 或任何其他 ViewController 将在编译时创建，所以我不能有 xib 文件，我不能用 Interface Builder 在 xib 上放置按钮，因为我什至没有知道我将有多少按钮。在我的项目中运行之前，我不知道我有多少个屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-27T02:27:05.033

你不仅可以在没有`Interface Builder`. 在 IB 风格的项目中，有些`auto layout`技巧也很困难（不可能？）。

有一个令人难以置信的令人印象深刻的库`Masonry`，称为包装`NSLayoutContraint`语法。这使得对视图进行子类化非常令人愉快，而不必使用丑陋的 VFL 或令人难以置信的冗长`NSLayoutContraint`语法（甚至不去解决框架设置……blech！）。IB 风格的应用程序还促进了不良的软件开发实践和反模式（只是将所有内容都倾倒在视图控制器演示中。没有关注点分离！）。此外，由于合并问题，在使用 Nibs、Xibs 和 Storyboard 的同时，在大型团队（恕我直言，甚至是小型团队）上工作也更加困难。

最重要的是，在以这种方式编写代码时（再次恕我直言），您可以更深入地了解您正在使用的类（`UIView`、、等）。`UIResponder`有一篇有趣的文章更详细地概述了其中一些问题：http: [//doing-it-wrong.mikeweller.com/2013/06/ios-app-architecture-and-tdd-1.html](http://doing-it-wrong.mikeweller.com/2013/06/ios-app-architecture-and-tdd-1.html) 这绝不是唯一一篇讨论这个问题的文章。此外，这将有助于您的应用程序委托：[创建一个通用的基于窗口的 iphone 应用程序而不生成 xib 文件](https://stackoverflow.com/questions/4418736/creating-a-universal-window-based-iphone-app-without-generated-xib-file)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T15:25:25.080

这当然是可能的，在我发布的许多应用程序中，我只使用过一次故事板。至于不使用 XIB，我不确定您*为什么*要这样做。您可以在运行时在 init 方法中布置您的视图，但我觉得这只会让您自己过分困难。您可以为 iPad 设置一个 XIB，为 iPhone 设置一个，这样您就可以专门为每个设备定制 UI。

也许如果您更详细地了解为什么要对自己施加此要求，我们可以讨论是否值得沿着这条路付出努力。

祝你好运。

# apache - Htaccess 重定向所有版本的 Internet Explorer，除了 9

> ID：11314106
> 
> 赞同：1
> 
> 时间：2012-07-03T15:21:43.993
> 
> 标签：apache, internet-explorer, .htaccess, redirect

我正在尝试通过 htaccess 将 Internet Explorer 的所有版本（最后一个版本 9）重定向到另一个页面。但它仍然失败。

我试过这样的事情：

```
RewriteEngine On

RewriteCond %{HTTP_USER_AGENT} "MSIE [4-8]" [NC,OR]
RewriteRule ^(.*)$ http://sitioweb.com [R=301,L] 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:56:37.817

`,OR`从上面的规则中删除对我有用：

```
RewriteCond %{HTTP_USER_AGENT} "MSIE [4-8]" [NC]
RewriteRule ^(.*)$ http://sitioweb.com [R=301,L] 
```

# ibm-mq - WebSphere MQ Q 程序

> ID：11314113
> 
> 赞同：2
> 
> 时间：2012-07-03T15:22:09.077
> 
> 标签：ibm-mq

[关于Q Program SupportPac](http://www-01.ibm.com/support/docview.wss?rs=171&uid=swg24000647&loc=en_US&cs=utf-8&lang=en)的简单问题。我们是在 MQ 服务器还是 MQ 客户端上安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:30:07.737

任你选。Q 可以使用绑定或客户端模式进行连接，因此可以将它放在您需要的任何地方。如果您有一个正在尝试调试的客户端应用程序，Q 可以使用相同的通道和 CONNAME。（如果通道使用 SSL 并且您的应用程序是 Java，您可能需要先将密钥库转换为 kdb 格式。）当然，与队列管理器位于同一服务器上的 Q 可以在绑定模式下访问 MQ，前提是您有足够的这样做的权力。

# php - PHP elseif 语句

> ID：11314119
> 
> 赞同：-2
> 
> 时间：2012-07-03T15:22:17.837
> 
> 标签：php

我正在使用 PHP 浏览器检测并希望使用 else if 语句将它们重定向到取决于浏览器的不同页面或包含某个文件。现在我正在采样重定向。

我收到语法错误，我很困惑为什么，这里是代码：

```
if($browser['name'] . $browser['version'] == "firefox" . "13.0.1"){
    header("Location: newff.php");
  elseif($browser['name'] . $browser['version'] != "firefox" . "13.0.1"){
    header("Location: oldff.php");
  } elseif($browser['name'] . $browser['version'] == "msie" . "13.0.1") {
    header("Location: newie.php");
  } elseif($browser['name'] . $browser['version'] != "msie" . "13.0.1") {
    header("Location: oldie.php");
  } elseif($browser['name'] . $browser['version'] == "chrome" . "20.0.1132.47"){
    header("Location: newchrome.php");
  } elseif($browser['name'] . $browser['version'] != "chrome" . "20.0.1132.47"){
    header("Location: oldchrome.php");
  } elseif($browser['name'] . $browser['version'] == "safari" . "534.57.2"){
    header("Location: newsafari.php");
  } elseif($browser['name'] . $browser['version'] != "safari" . "534.57.2") {
    header("Location: oldsafari.php");
  } else {
    header("Location: other.php");
  } 
```

谢谢

本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:23:49.437

You forgot to use closing bracked after first if:

```
if($browser['name'] . $browser['version'] == "firefox" . "13.0.1") {
    header("Location: newff.php");
} // this is missing 
```

# sencha-touch - 如何更改标题栏中标题的颜色

> ID：11314120
> 
> 赞同：0
> 
> 时间：2012-07-03T15:22:30.543
> 
> 标签：sencha-touch, themes, sencha-touch-2

在我的应用程序中，我正在尝试更改标题的颜色。为此，我将一些主题放在 app.scss 文件中。我可以更改标题栏的背景颜色。但是标题的颜色没有改变。我的 app.scss 文件是这样的：

```
 $base-color: #588aad; // go big blue!$include_default_icons: false;
@import 'sencha-touch/default/all';
@include sencha-panel;
@include sencha-buttons;
@include sencha-sheet;
@include sencha-picker;
@include sencha-tabs;
@include sencha-toolbar;
@include sencha-toolbar-forms;
@include sencha-indexbar;
@include sencha-list;
@include sencha-layout;
@include sencha-form;
@include sencha-msgbox;
@include sencha-loading-spinner;

@include pictos-iconmask("bookmarks");
@include pictos-iconmask("compose");
@include pictos-iconmask("trash");
@include pictos-iconmask("search");
@include pictos-iconmask("bookmark2");

@include sencha-toolbar-ui('blue', #EEEEEE,'matte');
.x-toolbar .x-toolbar-title {
    color: #5a3d23;
} 
```

这是我的面板代码：

```
 Ext.define('MyApp.view.TitlePanel', {
    extend: 'Ext.Panel',

    config: {
        modal: false,
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                height: 120,
                ui: 'blue',
                title: 'Teritree Bussiness Portal',
                items: [
                    {
                        xtype: 'image',
                        docked: 'left',
                        height: 118,
                        width: 202,
                        src: 'resources/images/Logo.PNG'
                    }
                ]
            }
        ]
    }

}); 
```

有人可以帮忙吗？？？提前致谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T17:55:24.820

使用**Firebug 或 Safari（或 Chrome）检查器**来找出 div 是如何嵌入到 DOM 中的。

如果我检查标题栏的标题，这就是我所拥有的

您可以看到一个带有`my-titlebar`class 的 div，其中包含另一个带有 class的 div `x-title`。如果你看右边，你可以看到颜色属性是由`x-title`CSS 类携带的。因此，您需要覆盖这个类，而不是向另一个类添加颜色属性。

![在此处输入图像描述](../Images/ef1ec66caa5116abd8f0f62f4ae627b5.png)

所以这是你应该做的：

**将 cls 属性添加到标题栏**

```
xtype: 'titlebar',
cls:'my-titlebar',
docked: 'top',
height: 120, 
```

**编写 CSS**

```
.my-titlebar .x-title{
  color:white;
} 
```

给你：

![在此处输入图像描述](../Images/6af64a648111ef65810b711923bcf147.png)

`!important`最后一条建议，只有在别无选择时才应使用。否则没有意义。

希望这可以帮助

# asp.net - 有没有办法在没有 JS 的情况下创建消息框？

> ID：11314123
> 
> 赞同：0
> 
> 时间：2012-07-03T15:22:37.340
> 
> 标签：asp.net, visual-studio-2010, webforms

有没有办法在不使用 Javascript 或 System.Windows.Forms.MessageBox 的情况下在网络表单中创建带有是/否按钮的消息框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:25:04.983

是的，当然——只需创建一个带有几个按钮的适当样式的面板；显然，您将不得不应对回发，因此它的性能不会那么高，但绝对可行。就像是：

```
<asp:Panel runat="server" ID="myDialogBox">
    <p>Are you sure you want to continue?</p>
    <div>
        <asp:Button runat="server" ID="btnYes" Text="Yes" OnClick="btnYes_Click" />
        <asp:Button runat="server" ID="btnNo" Text="Yes" OnClick="btnNo_Click" />
    </div>
</asp:Panel> 
```

留给您实现的事件处理程序

# java - 可以处理大量三角形和纹理的渲染器

> ID：11314124
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:22:37.673
> 
> 标签：java, opengl, lwjgl

**渲染许多三角形和纹理的最佳方法是什么？**

我想在我的游戏中建造一座城市，其中包含有数千个三角形和多达 20 个纹理的建筑物。目前我知道的唯一方法是为所有具有相同纹理的三角形渲染一批。但这真的很慢。我需要更快的东西，但仍然很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:49:56.107

*   如果您的纹理很小，您可以将它们分组到图集纹理中，然后您将在一次绘制调用中批处理更多三角形。
*   也许在批处理和绘制它们之前消除不在视野中的三角形会更快。如果我们谈论很多三角形，这可能会有所不同。
*   你说你批量处理三角形。你在使用 VBO 吗？如果没有，您可以尝试使用 VBO。它应该更快。

您还可以查看以下链接：

*   [https://developer.apple.com/library/mac/#technotes/tn2004/tn2093.html](https://developer.apple.com/library/mac/#technotes/tn2004/tn2093.html)
*   [http://www.mesa3d.org/brianp/sig97/perfopt.htm](http://www.mesa3d.org/brianp/sig97/perfopt.htm)

您也可以尝试为 Open GL 使用分析器。它也应该在 Java 2 中工作，因为 Java 应该与主机 opengl 驱动程序交互。- [http://www.opengl.org/wiki/Debugging_Tools](http://www.opengl.org/wiki/Debugging_Tools)

# performance - 为什么 Document.html() 这么慢？

> ID：11314126
> 
> 赞同：4
> 
> 时间：2012-07-03T15:22:44.553
> 
> 标签：performance, jsoup

我的印象是 Jsoup 的 API 中最昂贵的方法是[parse()](http://jsoup.org/cookbook/input/load-document-from-file)。

但我刚刚发现[Document.html()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#html%28%29)可能会更慢。

鉴于这是（即这是*在*`Document`解析之后）的输出，我觉得这令人惊讶。`parse()`

 *为什么`Document.html()`这么慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T04:16:02.170

自己回答。[Element.html()](http://grepcode.com/file/repo1.maven.org/maven2/org.jsoup/jsoup/1.6.1/org/jsoup/nodes/Element.java?av=f)方法实现为：

```
public String html() {
  StringBuilder accum = new StringBuilder();
  html(accum); 
  return accum.toString().trim();
} 
```

使用 StringBuilder 代替 String 已经是一件好事了，使用`StringBuilder.toString()`and`String.trim()`可能无法解释 的慢`Document.html()`，即使对于比较大的文档也是如此。

但是在中间，我们的方法调用了一个重载版本，`Element.html(StringBuilder)`它循环遍历文档中的所有子节点：

```
private void html(StringBuilder accum) {
  for (Node node : childNodes)
    node.outerHtml(accum);
} 
```

因此，如果文档包含很多子节点，它*会*很慢。

看看是否可以更快地实现这一点会很有趣。

例如，如果**Jsoup****存储**通过`Jsoup.parse()`. 当然，作为一种选择，以保持向后兼容性和内存占用小。*

# python - Django：地理定位应用程序中 ForeignKey 的自定义小部件

> ID：11314130
> 
> 赞同：1
> 
> 时间：2012-07-03T15:22:59.887
> 
> 标签：python, django, geolocation, widget, foreign-keys

我正在开发一个管理网站位置的应用程序。此应用程序（位置）包含模型（简化）：

```
class Location(models.Model):
    """ Model for storing locations, places and addresses """

    address = models.CharField(_('address'), max_length=100, blank=True)
    """ Location address """

    latitude = models.FloatField(_('latitude'), blank = True)
    """ Latitude info point """

    longitude = models.FloatField(_('longitude'), blank = True)
    """ Longitude info point """ 
```

因此，想要存储位置的其他应用程序和模型实际上包含此模型的 ForeignKey。此外，位置应用程序定义了一个小部件，它不显示与 ForeignKey 字段关联的典型选择，而是呈现由 javascript 支持的 google 地图，该地图将纬度、经度和地址保存在 HiddenInput 字段中（也简化了）：

```
class LocationEditWidget(HiddenInput):

    def __init__(self, attrs=None):
        default_attrs = {}

        if attrs:
            default_attrs.update(attrs)
        super(LocationEditWidget, self).__init__(default_attrs)

    class Media:
        js = (
                'http://maps.google.com/maps/api/js?sensor=true',
                'js/gmaps.js',
                'js/location-select.js',
            )

    def render(self, name, value, attrs=None):
        self.attrs['id']            = self.attrs.get('id', 'unique')
        self.attrs['latitude']      = self.attrs.get('latitude', 'auto')
        self.attrs['longitude']     = self.attrs.get('longitude', 'auto')
        self.attrs['geocoding']     = self.attrs.get('geocoding', 'True')
        self.attrs['geolocation']   = self.attrs.get('geolocation', 'True')
        self.attrs['width']         = self.attrs.get('width', '400')
        self.attrs['height']        = self.attrs.get('height', '400')

        output = super(LocationEditWidget, self).render(name, '%s,%s,%s' % (value.latitude, value.longitude, value.address), attrs)
        map_html = render_to_string('./select_location.html',
                                {
                                    "id"                : self.attrs['id'],
                                    "geocoding_button"  : self.attrs['geocoding'],
                                    "geolocation_button": self.attrs['geolocation'],
                                    "latitude"          : self.attrs['latitude'],
                                    "longitude"         : self.attrs['longitude'],
                                    "width"             : self.attrs['width'],
                                    "height"            : self.attrs['height']
                                })

        return mark_safe(output+map_html) 
```

这个想法是任何其他需要处理位置的模型都有一个与 Location 模型关联的 ForeignKey 字段，例如：

```
class Event(models.Model):
    """
    `Events` main model.
    """

    title = models.CharField(_('title'), max_length=100, blank=True)
    """ Title. """

    place = models.ForeignKey(Location, verbose_name=_('place'), related_name="place", blank=True)
    """ Location. """

    meeting_point = models.ForeignKey(Location, verbose_name=_('place'), related_name="meeting_point", blank=True)
    """ Meeting Point """

    duration = models.PositiveIntegerField(_('duration days'), blank=True)
    """ Duration, specified in days. """

    price = models.DecimalField(_('price'), max_digits=7,  decimal_places=2, blank=True)
    """ Price. """ 
```

因此，当您发送表单时（除了按惯例保存所有其他模型字段），将使用提供的位置信息（纬度、经度和地址）创建一个新的 Location 对象，并将其存储在数据库中。最后使用这个新的 Location 对象建立与 ForeignKey 字段（之前模型中的“地点”）的关系。

目前，除了用纬度、经度和方向填充 HiddenInput 之外，该小部件可以正常工作并呈现地图而不是典型的选择小部件。

在我的事件/forms.py 中：

```
class NewEventForm(forms.ModelForm):

    def save(self):

        value = self.data['place'].split(',');
        location = Location(latitude=value[0], longitude=value[1], address=value[2:])
        self.instance.place = location

        new_event = super(NewEventForm, self).save(commit=False)
        new_event.save()

        return new_offer

    class Meta:
        model = Event
        fields = ('title', 'duration', 'price', 'place')
        widgets = {
                    'place': LocationEditWidget(),
                   } 
```

在我的 events/views.py 中：

```
@login_required
def event_new(request):
    new_event = Event(price=0, owner=request.user)

    if request.method == 'POST':
        # Form submited
        Event_form = NewEventForm(request.POST, instance=new_event)

        if event_form.is_valid():
            # Form succesfully validated
            event_form.save()
            return HttpResponseRedirect('/Event/%s/edit' % new_event.id) 

    else:
        # Initial form
        event_form = NewEventForm(instance=new_event)

    return render_to_response(  'events/event_new.html',
                                {'event_form':event_form},
                                context_instance=RequestContext(request)) 
```

但我是 Django 新手，在理解小部件、表单、字段和表单字段之间的关系时遇到了一些问题。问题是表单无法正确验证，如果我强制验证（通过'event_form.is_valid（）'）保存到数据库时会出错。另一方面，似乎不太正确（因为 DRY）必须为每个使用位置的应用程序/模型子类化 ModelForm。

我需要创建自定义字段和自定义表单字段吗？关于如何定位它的任何想法？我可以将小部件用于 ForeingKey 吗？

预先感谢，请原谅我的英语不好。

# database-replication - Error in symmetricds client set up

> ID：11314132
> 
> 赞同：0
> 
> 时间：2012-07-03T15:23:03.157
> 
> 标签：database-replication, symmetricds

Unable to set up client which is derby and server is mysql

C:\symmetric-ds-3.0.1-server\symmetric-ds-3.0.1\samples>..\bin\dbimport --engine client1 --format XML create_sample.xml Log output will be written to ../logs/symmetric.log [] - AbstractCommandLauncher - Option: name=engine, value={client1} [] - AbstractCommandLauncher - Option: name=format, value={XML} [client1] - DerbySymmetricDialect - The DbDialect being used is org.jumpmind.sym metric.db.derby.DerbySymmetricDialect [client1] - ExtensionPointManager - Found 2 extension points that will be regist ered [client1] - JdbcSqlTemplate - Table/View 'item_selling_price' already exists in Schema 'SYMMETRIC'.. Failed to execute: CREATE TABLE "item_selling_price" ( "price_id" INTEGER NOT NULL, "price" DECIMAL(10,2) NOT NULL, "cost" DECIMAL(10,2), PRIMARY KEY ("price_id") ). [client1] - JdbcSqlTemplate - Table/View 'item' already exists in Schema 'SYMMET RIC'.. Failed to execute: CREATE TABLE "item" ( "item_id" INTEGER NOT NULL, "price_id" INTEGER NOT NULL, "name" VARCHAR(100), PRIMARY KEY ("item_id") ). [client1] - JdbcSqlTemplate - Table/View 'sale_transaction' already exists in Sc hema 'SYMMETRIC'.. Failed to execute: CREATE TABLE "sale_transaction" ( "tran_id" INTEGER NOT NULL, "store" VARCHAR(5) NOT NULL, "workstation" VARCHAR(3) NOT NULL, "day" VARCHAR(10) NOT NULL, "seq" INTEGER NOT NULL, PRIMARY KEY ("tran_id") ). [client1] - JdbcSqlTemplate - Table/View 'sale_return_line_item' already exists in Schema 'SYMMETRIC'.. Failed to execute: CREATE TABLE "sale_return_line_item"

```
(
    "tran_id" INTEGER NOT NULL,
    "item_id" INTEGER NOT NULL,
    "price" DECIMAL(10,2) NOT NULL,
    "quantity" INTEGER NOT NULL,
    "returned_quantity" INTEGER,
    PRIMARY KEY ("tran_id")
).
[client1] - JdbcSqlTemplate - Table/View 'sale_tender_line_item' already exists
in Schema 'SYMMETRIC'..  Failed to execute: CREATE TABLE "sale_tender_line_item"

(
    "tran_id" INTEGER NOT NULL,
    "tender_type" VARCHAR(254) NOT NULL,
    "tender_amount" DECIMAL(10,2) NOT NULL,
    "account_number" VARCHAR(255) NOT NULL,
    PRIMARY KEY ("tran_id")
).
[client1] - JdbcSqlTemplate - Constraint 'fk_item_price_id' already exists in Sc
hema 'SYMMETRIC'..  Failed to execute: ALTER TABLE "item"
ADD CONSTRAINT "fk_item_price_id" FOREIGN KEY ("price_id") REFERENCES "item_sell
ing_price" ("price_id").
[client1] - JdbcSqlTemplate - Constraint 'fk_srli_tran_id' already exists in Sch
ema 'SYMMETRIC'..  Failed to execute: ALTER TABLE "sale_return_line_item"
ADD CONSTRAINT "fk_srli_tran_id" FOREIGN KEY ("tran_id") REFERENCES "sale_transa
ction" ("tran_id").
[client1] - JdbcSqlTemplate - Constraint 'fk_srli_item_id' already exists in Sch
ema 'SYMMETRIC'..  Failed to execute: ALTER TABLE "sale_return_line_item"
ADD CONSTRAINT "fk_srli_item_id" FOREIGN KEY ("item_id") REFERENCES "item" ("ite
m_id").
[client1] - JdbcSqlTemplate - Constraint 'fk_tndr_tran_id' already exists in Sch
ema 'SYMMETRIC'..  Failed to execute: ALTER TABLE "sale_tender_line_item"
ADD CONSTRAINT "fk_tndr_tran_id" FOREIGN KEY ("tran_id") REFERENCES "sale_transa
ction" ("tran_id").

C:\symmetric-ds-3.0.1-server\symmetric-ds-3.0.1\samples> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:42:11.937

看起来您正在尝试创建属于[SymmetricDS 教程](http://www.symmetricds.org/doc/3.0/html/tutorial.html)的示例表，并且这些表已经存在于数据库中。您可能会运行该命令两次而不是一次。第一次运行它时，它会创建所有表。第二次运行它，它抱怨表已经存在。

我刚刚使用 SymmetricDS 3.0.10 完成了本教程，并获得了在 Apache Derby 10.5.3.0_1 和 MySQL 5.5.25a 之间复制的示例数据库。我注意到的一件事是我需要指定属性文件，如下所示：

..\bin\dbimport --engine client1 --format XML **--properties client.properties** create_sample.xml

在没有指定属性文件的情况下，我以为我是在客户端上创建表，但它仍在使用服务器的属性文件，这给了我同样的错误。

# c# - Setting a Service's run credentials

> ID：11314135
> 
> 赞同：7
> 
> 时间：2012-07-03T15:23:12.403
> 
> 标签：c#, .net, windows, service, windows-services

I have a service with an app.config file that is consumed during install. In the ProjectInstaller class there is code to read the app.config file, pull out credentials and set them. The goal is to *not* show the user/password prompt.

In the below examples `serviceUser` and `servicePassword` are just object wide private strings.

The following block (resides in the ProjectInstaller ctor) works correctly. That is, it sets the logon details for the service and never prompts the user:

```
public ProjectInstaller()
{
   InitializeComponent();
   LoadServiceSettings();

   //Install the service as a specific user:
   serviceProcessInstaller1.Account = ServiceAccount.User;
   serviceProcessInstaller1.Username = "MYDOMAIN\\myUser";
   serviceProcessInstaller1.Password = servicePassword; //pulled out of app.config by LoadServiceSettings call
} 
```

However, the following does not work:

```
public ProjectInstaller()
{
   InitializeComponent();
   LoadServiceSettings();

   //Install the service as a specific user:
   serviceProcessInstaller1.Account = ServiceAccount.User;
   serviceProcessInstaller1.Username = serviceUser; //both get pulled out of app.config by LoadServiceSettings() call;
   serviceProcessInstaller1.Password = servicePassword;

   WriteLog("The service user is *" + serviceUser + "*");
   // The above line outputs:
   // The service user is *MYDOMAIN\myUser*

   WriteLog("Are the strings the same? " + (serviceUser == "MYDOMAIN\\myUser").ToString());
   // The above line outputs:
   // Are the strings the same? True

   WriteLog("Values: *" + serviceUser + "*" + servicePassword + "*");
   // The above line outputs:
   // Values: *MYDOMAIN\myUser*myPassword*

   WriteLog("Values: *" + serviceProcessInstaller1.Username + "*" + serviceProcessInstaller1.Password + "*");
   // The above line outputs:
   // Values: *MYDOMAIN\myUser*myPassword*
} 
```

Why does it matter whether the string is hardcoded or not? Also worth noting is that in my app.config I don't escape the slash...because it's not an xml escape character.

Why is this failing?

EDIT: By "failing" I mean the service installer prompts for a password, and whatever the user puts in overrides `serviceUser` and `servicePassword`.

# asp.net-membership - 成员资格 ASP.NET GetPassword

> ID：11314136
> 
> 赞同：1
> 
> 时间：2012-07-03T15:23:14.590
> 
> 标签：asp.net-membership

我想对 MembershipUser 执行 GetPassword() 但应用程序中的自定义成员资格提供程序抛出 NotImplemented 异常，让我知道一些解决方法来获取任何用户密码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:05:01.940

如果您使用的是自定义成员资格提供程序，则意味着您创建了一个继承`MembershipProvider`. 当您继承此类时，Visual Studio 通常会继续并自动生成您从 MembershipProvider 继承的抽象方法。其中一种方法是 GetPassword()，由您来为其编写逻辑。默认情况下，它会抛出该异常，提醒您尚未为其编写逻辑。

![在此处输入图像描述](../Images/b23d16351bbf2a0aac62c8ef533209dc.png)

如果您不想做自定义成员资格提供程序，您可以改用 a`SqlMembershipProvider`并让 Visual Studio 创建必要的表和存储过程来处理所有事情。当您想要完全控制编程逻辑时，使用自定义成员资格提供程序。

# php - PDO count rows where username matches

> ID：11314137
> 
> 赞同：2
> 
> 时间：2012-07-03T15:23:17.930
> 
> 标签：php, oop, class, pdo, return

I am trying to match a username in the database. If the username match it returns true otherwise it returns false.

At the moment it will always return false even when the username is correct.

Here is the class and call I'm using:

```
class register{
  private $result;

  public function __construct($post_data, PDO $dbh){

    $this->post_data = array_map('trim', $post_data);
    $this->dbh = $dbh;

  }

  public function checkUsername(){
    $stmt = $this->dbh->prepare("COUNT(*) FROM oopforum_users WHERE username = ?");
    $stmt->bindParam(1, $this->post_data['reg_username'], PDO::PARAM_STR);
    $stmt->execute();
    $this->result = $stmt->rowCount();
    if($this->result == 0){
        return false;
    }else{
        return true;
    }
  }

}

$register = new register($_POST, $dbh);
if($register->checkUsername()){
    //continue
}else{
    echo 'ERROR: That username is taken, please choose another one.';
} 
```

Why is it returning false even though the username's do match?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:25:09.140

你忘了`SELECT`声明：

```
$stmt = $this->dbh->prepare("SELECT COUNT(*) FROM oopforum_users WHERE username = ?"); 
```

除此之外，您的查询将始终返回一行（正好是 1 行），但该行的内容可能包含 0 作为行数，因此您需要更改逻辑：选择一个真实列而不是`COUNT(*)`使用`$stmt->rowCount()`或读取计数的值并检查。

# android - Android Date To Milles (ISO 8601)

> ID：11314142
> 
> 赞同：0
> 
> 时间：2012-07-03T15:23:30.443
> 
> 标签：android, android-widget

am working on countdown widget .The problem is explained below

```
'2012-07-04T15:00:00Z' - >  '1341414000000'

 '1341414000000' - > indicate 2012 july 4th 20:30 
```

why this happend? . Am using joda

```
final String format = "yyyy-MM-dd'T'HH:mm:ssZ";

DateTimeFormatter formatter = DateTimeFormat.forPattern(format);
            DateTime endTime = formatter.parseDateTime(strDate);
                long diff=endTime.getMillis(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:17:43.497

```
String time="2012-07-04T15:00:00Z";
        DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'", Locale.US);
        df.setTimeZone(TimeZone.getTimeZone("UTC"));
      //  time.replace("Z","");
        try {
            Date date=df.parse(time);
            long diff=date.getTime()-System.currentTimeMillis();
            System.out.println("Date "+diff);
        } catch (ParseException e) {

            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T02:50:59.373

这似乎是一个老问题，但无论如何我都会回答，因为其他人可能会发现这个。

在 Joda 中有一个用于 ISO 8601 格式的类，因此您可以使用该类而不是手动指定格式，如下所示：

```
import org.joda.time.format.DateTimeFormatter;
import org.joda.time.format.ISODateTimeFormat;
import org.joda.time.DateTime;

String strDate = "2012-07-04T15:00:00Z";

DateTimeFormatter formatter = ISODateTimeFormat.dateTimeNoMillis();
DateTime endTime = formatter.parseDateTime(strDate);
long diff=endTime.getMillis(); 
```

另一方面，您似乎遇到的问题与时区有关。当您从毫秒转换回日期字符串时，它会使用本地时区进行转换。如果您想以 UTC 格式获取日期，您应该执行以下操作：

```
import org.joda.time.DateTimeZone;
import org.joda.time.DateTime;

DateTime dt = new DateTime(1341414000000).withZone(DateTimeZone.UTC); 
```

它将按预期返回 2012-07-04T15:00:00.000Z。如果要在没有毫秒的情况下对其进行格式化，可以使用与以前相同的格式化程序：

```
import org.joda.time.DateTimeZone;
import org.joda.time.format.DateTimeFormatter;
import org.joda.time.format.ISODateTimeFormat;
import org.joda.time.DateTime;

DateTimeFormatter formatter = ISODateTimeFormat.dateTimeNoMillis();
DateTime dt = new DateTime(1341414000000).withZone(DateTimeZone.UTC);
formatter.print(dt) 
```

它将返回 2012-07-04T15:00:00Z。

# spring - Integrate Grails GORM with Spring

> ID：11314144
> 
> 赞同：2
> 
> 时间：2012-07-03T15:23:33.460
> 
> 标签：spring, grails, grails-orm

I am not able to integrate grail's stand alone GORM with Spring.I am getting following compilation error.

```
Groovy:Unable to run AST transform org.codehaus.groovy.grails.compiler.injection.EntityASTTransformation: missing class org/grails/datastore/gorm/GormValidationApi: are you attempting to use groovy classes in an 
 AST transform in the same project in which it is defined? http://groovy.codehaus.org/Eclipse+Plugin+2.0.0+FAQ#EclipsePlugin2.0.0FAQ-Q.DoesitsupportcustomASTtransformations%3F @ line 0, column 0. 
```

and following jars in lib

```
grails-2.0.4.jar
grails-bootstrap-2.0.4.jar
grails-core-2.0.4.jar
grails-hibernate-2.0.4.jar
grails-spring-2.0.4.jar
grails-web-2.0.4.jar 
```

# android - Looking to enable and disable (toggle) ADB or USB debugging using command line or in app

> ID：11314145
> 
> 赞同：4
> 
> 时间：2012-07-03T15:23:36.620
> 
> 标签：android, adb

I'm trying to enable ADB (USB debugging) only when my application is running and disabling it when my application is not. I have full access to the phone and it is rooted, `su` available, etc., but I cannot find a way to do the toggling.

What I've tried so far:

```
Process proc = Runtime.getRuntime().exec(new String [] { "su", "-c", "setprop", "persist.service.adb.enable", "0"});
proc.waitFor();
Process proc2 = Runtime.getRuntime().exec(new String [] { "su", "-c", "stop", "adbd"});
proc2.waitFor(); 
```

This however causes the phone to enter a reboot loop instantaneously.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T15:18:24.433

有效的代码很简单：

```
Settings.Secure.putInt(getContentResolver(),Settings.Secure.ADB_ENABLED, 0); // 0 to disable, 1 to enable 
```

**编辑/更新：感谢@MohanT 提供以下更新：**

```
Settings.Global.putInt(getContentResolver(),Settings.Global.ADB_ENABLED, 0); // 0 to disable, 1 to enable 
```

但是，该应用程序必须是系统应用程序才能使用它。为了摆脱对它的签名，构建一个自定义的 rom 等等。我做了以下事情来让它成为一个系统应用程序。

首先，我使用 eclipse 定期安装它，然后使用 adb shell：

```
> su
# mount -o remount,rw -t yaffs2 /dev/block/mtdblock3 /system
# cat /data/app/filename.apk > /system/app/filename.apk
# mount -o remount,ro -t yaffs2 /dev/block/mtdblock3 /system
# reboot 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-09T06:26:12.467

您可以通过以下步骤来实现：

1.  检查当前是否启用了 ADB。为此，您可以使用相关的全局常量：

    *   [`Settings.Global.ADB_ENABLED`](https://developer.android.com/reference/android/provider/Settings.Global.html#ADB_ENABLED)适用于 API 17 及更高版本。
    *   [`Settings.Secure.ADB_ENABLED`](https://developer.android.com/reference/android/provider/Settings.Secure.html#ADB_ENABLED)在 API 17 之前。
2.  使用隐式[`Intent`](https://developer.android.com/reference/android/content/Intent.html)操作[`Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS`](https://developer.android.com/reference/android/provider/Settings.html#ACTION_APPLICATION_DEVELOPMENT_SETTINGS)打开开发人员选项，用户可以在其中启用或禁用 ADB。

代码示例：

**爪哇**

```
public static final int API = Build.VERSION.SDK_INT;
public static final int ENABLED=1, DISABLED=0;

public static boolean adbEnabled(Context context){
    if(API>16)
       return ENABLED == Settings.Global.getInt(context.getContentResolver(), Settings.Global.ADB_ENABLED,DISABLED);
    else 
       return ENABLED == Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.ADB_ENABLED,DISABLED);
}

public void checkAdb(Context context){
    //if ADB disabled
    if(!adbEnabled(context)){
        //open developer options settings 
        Intent intent = new Intent(Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS);
        context.startActivity(intent);
    }
} 
```

**科特林**

```
val API = Build.VERSION.SDK_INT
val ENABLED = 1
val DISABLED = 0

fun adbEnabled(context: Context): Boolean {
    return if (API > 16)
        ENABLED == Settings.Global.getInt(context.contentResolver, Settings.Global.ADB_ENABLED, DISABLED)
    else
        ENABLED == Settings.Secure.getInt(context.contentResolver, Settings.Secure.ADB_ENABLED, DISABLED)
}
fun checkAdb(context: Context) {
    //if ADB disabled
    if (!adbEnabled(context)) {
        //open developer options settings
        val intent = Intent(Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS)
        context.startActivity(intent)
    }
} 
```

> **仅供参考：**
> 
> 在 API 3 之前（可能不再相关）[`Settings.System.ADB_ENABLED`](https://developer.android.com/reference/android/provider/Settings.System.html#ADB_ENABLED)被使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-29T22:12:14.883

克里斯的回答是正确的，除了 Secure 类中的 ADB_EN​​ABLED 字段已被贬值并且字符串已移至 Global 类。所以你可以使用下面的命令 -

```
Settings.Global.putInt(getContentResolver(),Settings.Global.ADB_ENABLED, 0); // 0 to disable, 1 to enable 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T07:46:35.470

根据我使用 setprop 的经验，它并不总是可靠的，甚至可能与 Settings > Applications > Development > USB Debugging 选项发生冲突。除此之外，如果启用了 USB 调试但 adb 不起作用等，这可能会很烦人。因此，使用 Settings.Secure.ADB_EN​​ABLED 是首选方式......另外，您总是在状态面板中看到通知。

如果您不想在仅尝试访问 Settings.Secure.ADB_EN​​ABLED 时在系统分区上安装应用程序的麻烦，那么您可以依赖另一个已经在执行此工作的应用程序：

这个应用程序叫做 ADB Toggle。您可以在 Google Play 中找到它：

[https://play.google.com/store/apps/details?id=com.ramdroid.adbtoggle](https://play.google.com/store/apps/details?id=com.ramdroid.adbtoggle)

通过 ADB Toggle 访问 USB 调试设置的库可在此处获得：

[https://github.com/ramdroid/AdbToggleAccessLib](https://github.com/ramdroid/AdbToggleAccessLib)

# javascript - Debugging ExtJS 4 using console.log()

> ID：11314146
> 
> 赞同：1
> 
> 时间：2012-07-03T15:23:37.337
> 
> 标签：javascript, extjs, firebug, aptana

I am very new to ExtJS and still going through the Docs in Sencha site. I've seen a lot of [**examples**](http://docs.sencha.com/ext-js/4-0/#!/guide/data) in ExtJS4 using console.log() for debugging. However I couldn't figure out how to deal with console.log().

I am using Aptana Studio 3 for development, and I don't think Aptana can run console.log() (correct me if im wrong). So we need to debug it in Firebug? Then how to incorporate script files like ext-all.js, ext-debug.js into Firebug?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:42:46.157

是的，`console.log()`你的脚本输出到你正在使用的任何浏览器的开发工具的控制台窗口（例如，Firefox 的 Firebug）。浏览器开发者工具从浏览器所在的位置获取脚本文件；即，但是您将它们加载到您的网页中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T18:40:26.877

我建议你使用谷歌浏览器。它有一个非常好的开发工具。除了 ExtJs，在进行任何开发时，请使用 ext-all-dev.js 文件而不是 ext-all.js 或 ext-all-debug.js。这将非常有帮助。检查[此链接](http://atechiediary.blogspot.com/2013/06/extjs-ext-all-debugjs-vs-ext-all-devjs_18.html)以获取更多详细信息。

`debugger;`您也可以通过简单地使用javascript 文件中的命令来设置断点。但要完成这项工作，请确保 firebug/developer 工具正在运行。

希望这可以帮助。

# c++ - it is giving segmentation fault . i am trying to implement ford fulkerson algorithm ,here i am reading from file

> ID：11314148
> 
> 赞同：0
> 
> 时间：2012-07-03T15:23:42.607
> 
> 标签：c++, ford-fulkerson

```
int main()
{
    int i,j,k,l,m;
    int maxflow=0;
    int first,second,capac;

    int residual[100][100];
    //reading from file
    FILE*fp;
    fp=fopen("ford.txt","r");
    fscanf(fp,"%d %d",&node,&edge);
    cout<<"nodes are"<<node<<"\n"<<"edges are"<<edge<<"\n";
    for(j=1;j<=node;j++)
    {
        for(k=1;k<=node;k++)
        {
            capacity[j][k]=0;
        }  
    }
    for(i=0;i<edge;i++)
    { 
        fscanf(fp,"%d %d %d",&first,&second,&capac);
        cout<<first<<"->"<<second<<"="<<capac<<"\n"; //it is printing this
        capacity[first][second]=capac;//crashes here at last i/p i.e.1=edge-1

    }
    cout<<"abc"; //this is not printed
    for(l=1;l<=node;l++)
    {
        for(m=1;m<=node;m++)
        {
            flow[l][m]=capacity[l][m];
            flow[m][l]=0;
        }
    }
    return 0;
} 
```

It is not even printing the "abc" in the cout statement. I am trying to implement the Ford-Fulkerson algorithm. Here I am reading from a file and initializing capacity flow matrices. After that I am calling maxflow function, which I have omitted here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:11:51.307

就目前而言，您的代码更像是 C 而不是 C++。虽然（正如@jrok 评论的那样）缩进和间距之类的东西可以使用一些改进，但我认为更大的变化会更有帮助。与其将一堆不相关的“东西”打包成`main`，您真的需要/想要将事物拆分为函数（可能还有类来表示程序中的逻辑“片段”）。

至少从外观上看，您可能希望从`matrix`具有（至少）I/O 函数的类开始。那可能应该使用 a`std::vector`来存储数据，因此它可以从文件中读取大小，然后分配适当的空间来保存该数据。

```
class matrix { 
    std::vector<int> data;
    size_t rows;
    size_t columns;
public:
    std::istream &read(std::istream &infile);
    std::ostream &write(std::ostream &outfile);
}; 
```

有了一个不错的矩阵定义，您现在拥有的大部分代码似乎都会变成这样的：

```
std::ifstream in("ford.txt");

matrix capacity;
capacity.read(in); // or `in >> capacity;`

matrix flow = capacity; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:47:12.520

您没有检查以确保您的数组访问在数组的范围内。这是一些执行此操作的代码。我假设流量的定义与容量和残差相同，因为您没有为其提供定义。

此外，我已将循环索引更改为从 0 开始，因为 C 和 C++ 中的数组从 0 开始索引，而不是 1。如果您打算保持数组的第一行和第一列不变，那么您可以将它们更改回来将`<`s更改为`<=`s。

此外，我使用 std::endl 刷新输出缓冲区。如果程序在执行该语句后很快崩溃，则输出缓冲可能导致 cout<<"abc" 执行但不输出任何内容。

```
#define WIDTH 100
#define HEIGHT 100
int capacity[WIDTH][HEIGHT];
int flow[WIDTH][HEIGHT];
int node, edge;
int main() {
    int maxflow=0;
    int first,second,capac;
    int residual[WIDTH][HEIGHT];
    //reading from file
    FILE*fp;
    fp=fopen("ford.txt","r");
    fscanf(fp,"%d %d",&node,&edge);
    cout<<"nodes are"<<node<<"\n"<<"edges are"<<edge<<"\n";
    //check if node is out of bounds...
    if(node >= WIDTH || node >= HEIGHT) {
        //if it is, warn
        cout<<"Warning: node is at least "
            <<WIDTH<<" or "<<HEIGHT<<"."
            <<std::endl;
    }
    //prevent accessing out-of-bounds locations by comparing
    // xIdx and yIdx against WIDTH and HEIGHT, respectively
    for(int xIdx=0; xIdx < node && xIdx < WIDTH; xIdx++) {
        for(int yIdx=0; yIdx < node && yIdx < HEIGHT; yIdx++) {
            capacity[xIdx][yIdx]=0;
        }  
    }
    for(i=0;i<edge;i++) { 
        fscanf(fp,"%d %d %d",&first,&second,&capac);
        cout<<first<<"->"<<second<<"="<<capac<<"\n";
        if(first < WIDTH && second < HEIGHT) {
            capacity[first][second]=capac;
        }
        //Stop execution if one of first or second is out of bounds
        else {
            cout<<"ERROR: ["<<first<<"]["<<second<<"]"
                <<" not within ["<<WIDTH<<"]["<<HEIGHT<<"]"
                <<std::endl;
            return -1;
        }
    }
    cout<<"abc"<<std::endl;
    for(int xIdx=0; xIdx < node && xIdx < WIDTH; xIdx++) {
        for(int yIdx=0; yIdx < node && yIdx < HEIGHT; yIdx++) {
            flow[xIdx][yIdx]=capacity[xIdx][yIdx];
            flow[yIdx][xIdx]=0;
        }
    }
    return 0;
} 
```

# c++ - 从我的 Mac 上的文件安装 g++ 到终端

> ID：11314156
> 
> 赞同：2
> 
> 时间：2012-07-03T15:24:05.103
> 
> 标签：c++, macos, g++

当我尝试在我的 Mac 终端中编译一个 c++ 程序时，我收到以下错误：

-bash：g++：找不到命令

但我相信我的 Mac 上有运行编译器所需的所有文件。我有 Developer 文件夹，其中包含 Applications 中的 Xcode、usr/bin 文件夹中的 g++ 和一堆其他文件夹。

如何使用这些文件来安装 g++ 编译器。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:27:31.903

`Install`假设您拥有最新的 Xcode，请转到 Xcode Preferences、Downloads，然后单击`Command Line Tools`. 这应该会自动安装并将所有内容放入您的`PATH`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:24:25.903

houbysoft 上面的回答是正确的，但是 OP 需要更多细节。

基本思想是您需要安装“命令行工具”环境。但多年来，该环境的名称以及安装方式已多次更改。因此，houbysoft 的步骤适用于 4.3.3，但不适用于 3.2.6。

在 3.2 时代，这些工具被称为“UNIX 开发”。而且，它们不是从 Xcode 中下载和安装，而是作为 Xcode mpkg 的一部分出现，并作为初始 Xcode 安装的一部分进行安装。在大多数版本中，有一个名为“UNIX Development”的复选框，通常默认选中，但在某些版本中，这是一个单独的步骤。查看当前可从 Apple 获得的“Xcode 3.2.6 和 IOS SDK 4.3”磁盘映像，它是一个复选框。无论如何，这是获得它们的唯一官方支持的方法，但还有很多其他方法可以工作……这是您的选择：

*   扔掉 Xcode 3.2.6（只是垃圾整个 /Developer）并安装 4.3.3，然后按照 houbysoft 的步骤获取命令行工具。除非有充分的理由不能使用 4.3，否则这几乎可以肯定是最好的答案。
*   扔掉 Xcode 3.2.6 并重新安装它，这次确保“UNIX 开发”复选框已打开。
*   只需重新运行 3.2.6 安装程序，并确保“UNIX 开发”复选框已打开。
*   登录 developer.apple.com 并查看名为“UNIX Development Tools”、“Developer Tools CLI”、“CLI Developer Environment”、“Command Line Tools”或与 3.2.6 对应的类似软件包的下载。大多数（但不是所有）Xcode 版本都有这样的包，可用于设置带有或不带有 Xcode 的命令行构建环境。
*   查看 Xcode 磁盘映像上的不可见包。我不记得您是否只需要 DeveloperToolsCLI.pkg 或其他一些，但一些试验和错误或谷歌搜索应该可以让您到达那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:26:26.647

如果一切都安装正确，听起来您需要做的就是`PATH`修改您的“”环境变量。

[这个密切相关的 SuperUser 问题](https://superuser.com/questions/69130/where-does-path-get-set-in-os-x-10-6-snow-leopard)应该提供您需要的答案，至少如果您在 Snow Leopard 下运行。 这是关于为 Lion [设置环境变量的另一个问题。](https://stackoverflow.com/questions/7501678/set-environment-variables-on-mac-os-x-lion)

# image - upload image as offline using knockout javascript file in html5

> ID：11314157
> 
> 赞同：2
> 
> 时间：2012-07-03T15:24:05.637
> 
> 标签：image, html, upload, knockout.js, offline

I would like to upload image as offline(later based on network connectivity it will be synchronised) using knockout.js file.

at the moment, i can save textbox, checkbox data using knockout.js file but failed to store image files.

i am developing html5 based application.

thank you all in advance..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:41:38.997

请尝试我创建的[**示例。**](http://jsfiddle.net/dmitry_zaets/rSArN/20/)

另请参阅我使用过的文章：http: [//www.html5rocks.com/ru/tutorials/file/dndfiles/](http://www.html5rocks.com/ru/tutorials/file/dndfiles/)

# sql - 将多个 SQL 行转换为一行

> ID：11314159
> 
> 赞同：1
> 
> 时间：2012-07-03T15:24:16.730
> 
> 标签：sql, sql-server, sql-server-2008

Stack Overflow 的下午好人。

我正在尝试做一些我不确定如何用我的 SQL 知识实现的事情，但我很清楚我想要什么，所以希望这对人们有意义。

我有一些看起来像这样的 perfmon 磁盘结果：

```
DatabaseName    ObjectName      CounterName         InstanceName                Server      Average
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     Server1     13.616
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     Server2     17.508
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     Server3     12.775
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     Server4     13.148
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     Server5     10.091 
```

这些是基于此查询的示例行：

```
SELECT
e14_db.DatabaseName AS [DatabaseName],
d.ObjectName,
d.CounterName,
d.InstanceName,
d.Server,
AVG(Value) * 1000 AS [Average]
FROM E14_Perfmon_MBX AS d
INNER JOIN E14_Databases AS e14_db
ON e14_db.LogFolderPath = d.InstanceName
WHERE d.ObjectName = 'logicaldisk'
AND d.CounterName = 'avg. disk sec/read'
AND d.DateTime > (DATEADD(hh, -4, GETDATE()))
AND d.Value < 1
GROUP BY d.ObjectName, d.CounterName, d.InstanceName, d.Server, e14_db.DatabaseName
ORDER BY e14_db.DatabaseName, d.Server 
```

我想要的是这样的：

```
DatabaseName    ObjectName      CounterName         InstanceName                Server1     Server2     Server3     Server4     Server5
DAG1DB01        logicaldisk     avg. disk sec/read  d:\mountpoints\DAG1DB01     13.616      17.508      12.775      13.148      10.091 
```

有谁知道我怎么能做到这一点？基本上将行应用到自己身上？

如果需要任何澄清，请随时询问。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:45:26.440

[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28SQL.90%29.aspx)运算符专为此类场景而设计。这应该给你你正在寻找的东西：

```
SELECT DatabaseName, 
    ObjectName, 
    CounterName, 
    InstanceName, 
    Server1, 
    Server2, 
    Server3, 
    Server4, 
    Server5 
FROM (SELECT
        e14_db.DatabaseName AS [DatabaseName],
        d.ObjectName,
        d.CounterName,
        d.InstanceName,
        d.[Server],
        d.Value * 1000 AS [Value]
    FROM E14_Perfmon_MBX AS d
        INNER JOIN E14_Databases AS e14_db
            ON e14_db.LogFolderPath = d.InstanceName
    WHERE d.ObjectName = 'logicaldisk'
        AND d.CounterName = 'avg. disk sec/read'
        AND d.DateTime > (DATEADD(hh, -4, GETDATE()))
        AND d.Value < 1) sub
PIVOT
(
    AVG(Value)
    FOR [Server] IN ([Server1], [Server2], [Server3], [Server4], [Server5])
) AS PivotTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:53:51.713

以下语句以固定数量的列（从 1 到 5）计算每个服务器的单独平均值：

```
SELECT e14_db.DatabaseName AS [DatabaseName]
, d.ObjectName, d.CounterName, d.InstanceName
, AVG(CASE WHEN d.Server = 'Server1' THEN Value ELSE NULL END) *1000 AS [Server1]
, AVG(CASE WHEN d.Server = 'Server2' THEN Value ELSE NULL END) *1000 AS [Server2]
, AVG(CASE WHEN d.Server = 'Server3' THEN Value ELSE NULL END) *1000 AS [Server3]
, AVG(CASE WHEN d.Server = 'Server4' THEN Value ELSE NULL END) *1000 AS [Server4]
, AVG(CASE WHEN d.Server = 'Server5' THEN Value ELSE NULL END) *1000 AS [Server5]
FROM E14_Perfmon_MBX AS d
INNER JOIN E14_Databases AS e14_db
ON e14_db.LogFolderPath = d.InstanceName
WHERE d.ObjectName = 'logicaldisk'
AND d.CounterName = 'avg. disk sec/read'
AND d.DateTime > (DATEADD(hh, -4, GETDATE()))
AND d.Value < 1
GROUP BY d.ObjectName, d.CounterName, d.InstanceName, e14_db.DatabaseName
ORDER BY e14_db.DatabaseName 
```

您也可以使用`PIVOT`，但更广泛的 SQL*风格*支持此语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:00:47.383

**方法#1**

[点击这里查看演示](http://sqlfiddle.com/#!3/fc580/4)

```
declare @Servers varchar(1000) = ''
declare @Query varchar(8000) = ''

select @Servers = ISNULL(QuoteName(Server) + ',', '') + @Servers from MyTable

set @Servers = SUBSTRING(@Servers,0,len(@Servers))

Set @Query = 'Select DatabaseName, obectName, CounterName, InstanceName , ' + 
@Servers + ' From 
(
    Select DatabaseName, obectName, CounterName, InstanceName, 
    Server, Average from Mytable
)K Pivot
(
    max(Average) FOR Server IN (' + @Servers + ')
) AS pvt'

EXEC(@Query) 
```

**方法#2**

[点击这里查看演示](http://sqlfiddle.com/#!3/fc580/3)

```
Select DatabaseName, obectName, CounterName, InstanceName , Server1, Server2, 
Server3, Server4, Server5
From 
(
    Select Select DatabaseName, obectName, CounterName, InstanceName, 
    Server, Average from Mytable FROM Mytable
)K
Pivot
(
    Max(Average) FOR Server IN (Server1, Server2, Server3, Server4, Server5)
) AS pvt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:37:55.867

尝试为每台服务器加入一次 PERFMON 表，如下所示：

```
FROM E14_Databases AS e14_db
INNER JOIN E14_Perfmon_MBX AS server1
ON e14_db.LogFolderPath = server1.InstanceName 
AND server1.Server = 'Server1'
AND server1.ObjectName = 'logicaldisk'
AND server1.CounterName = 'avg. disk sec/read'
AND server1.DateTime > (DATEADD(hh, -4, GETDATE()))
AND server1.Value < 1
INNER JOIN E14_Perfmon_MBX AS server2
ON e14_db.LogFolderPath = server2.InstanceName 
AND server2.Server = 'Server2'
AND server2.ObjectName = 'logicaldisk'
AND server2.CounterName = 'avg. disk sec/read'
AND server2.DateTime > (DATEADD(hh, -4, GETDATE()))
AND server2.Value < 1 
```

然后为每个连接添加一列：

```
AVG(Server1.Value) * 1000 AS [Server1] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T15:42:50.770

查看此处链接中所示的 PIVOT 表语法。

[数据透视表示例](http://www.kodyaz.com/articles/t-sql-pivot-tables-in-sql-server-tutorial-with-examples.aspx)

这将允许你做你所要求的。确保查看动态生成列标题的部分。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-03T15:32:25.220

修改表以包含额外的列，并运行更新 Where server = 'Server2'

update d set server2 = 先前服务器条目的值（例如，其中 server = 'server2'）

这样做很痛苦，但唯一的其他选择是在不使用 SQL 语句的情况下物理编辑表。

编辑：我建议制作两张表，一张包含所有信息（数据库名称等），然后一张包含分数

# vala - 没有实例方法或闭包的目标无法创建委托是什么意思

> ID：11314163
> 
> 赞同：4
> 
> 时间：2012-07-03T15:24:32.693
> 
> 标签：vala

我正在使用瓦拉。这是给出编译时错误的源代码：

```
private Gee.HashMap<string,VoidFunc> fill_actions()
{
    var actions = new Gee.HashMap<string,VoidFunc>();
    MainWindow win = window;
    actions["t"] = () => _puts(win.title);
    return actions;
} 
```

首先，我尝试直接访问 this.window ，但这给出了另一个错误，所以我使用本地范围变量进行了尝试。

直接执行 this.window 时出错：

```
This access invalid outside of instance methods 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T17:30:55.053

听起来 VoidFunc 是用 [CCode (has_target = false)] 声明的。这意味着没有上下文信息传递给它，而 AFAIK 是委托作为泛型类型参数工作的唯一方式。这样做的原因是 C 语言的限制，所以假设 VoidFunc 看起来像这样：

```
[CCode (has_target = false)]
public delegate void VoidFunc (); 
```

你会在 C 中得到的东西是这样的：

```
typedef void (*VoidFunc)(); 
```

如果您没有 [CCode (has_target = false)]，则与类似的情况相反：

```
typedef void (*VoidFunc)(gpointer user_data); 
```

当您在 C 中传递回调时，通常会使用一到三个参数。所有这三个的东西看起来像这样：

```
void foo (VoidFunc void_func, gpointer user_data, GDestroyNotify notify); 
```

第一个参数是实际功能。第二个参数是作为 user_data 传递给回调的值，它是 Vala 用来将上下文信息传递给回调的值（这允许它充当实例方法，甚至是闭包）。第三个参数用于指定在不再需要时释放 user_data 的函数。

[CCode (has_target = false)] 的意思是委托没有 user_data 参数，因此不能用作闭包或实例方法。

这对于泛型参数来说是必要的原因是泛型在 C 级别看起来像这样：

```
void foo_bar (gpointer data, GDestroyNotify notify); 
```

第一个参数是您要用作通用值的数据，第二个参数实际上只有在拥有通用参数时才添加（就像在 Gee 中的 set 方法的情况下一样），并使用 user_data 作为不再需要 user_data 时的参数。

如您所见，当尝试将委托用作泛型时，没有地方可以放置 user_data 参数，这就是为什么 Vala 只允许没有目标的委托作为泛型参数。

解决方案基本上是将委托包装在一个类中：

```
public delegate void VoidFunc ();

public class YourClass {
  private class VoidFuncData {
    public VoidFunc func;

    public VoidFuncData (owned VoidFunc func) {
      this.func = (owned) func;
    }
  }

  private Gee.HashMap<string,VoidFuncData> fill_actions() {
    var actions = new Gee.HashMap<string,VoidFuncData>();
    string win = "win";
    actions["t"] = new VoidFuncData (() => GLib.debug (win));
    return actions;
  }
} 
```

# search - Sitecore 高级数据库爬虫空日期

> ID：11314164
> 
> 赞同：0
> 
> 时间：2012-07-03T15:24:35.570
> 
> 标签：search, sitecore, lucene.net

我的索引中有一个属性（使用高级数据库爬虫）作为存档日期。

我想查找日期为空或将来的所有项目......日期范围搜索将完成第二部分，但第一部分呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:23:10.170

您不能对 Lucene进行*空搜索。*我过去所做的是测试空字段并在索引中插入单词“EMPTY”。然后在查询索引时，您需要添加一个测试来检查该术语的存在（或不存在）。这样做感觉有点脏，但这是我在与 Sitecore 和 Lucene 合作的 3 年中能够找到或想出的唯一解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:26:57.997

在 DateFieldCrawler 类中，我们修改了以下代码：

```
public override string GetValue()
{
 if (String.IsNullOrEmpty(_field.Value))
 {
     return DateTools.DateToString(DateTime.MinValue, DateTools.Resolution.DAY);
 }

 if (FieldTypeManager.GetField(_field) is DateField)
 {
    var dateField = new DateField(_field);

    if(dateField.DateTime > DateTime.MinValue)
    {
       return DateTools.DateToString(dateField.DateTime, DateTools.Resolution.DAY);
    }
 }

 return String.Empty;
} 
```

通过存储此值，我们能够执行以下查询以包含空值日期：

```
DateRangeSearchParam.DateRange toFirstDate =
                    new DateRangeSearchParam.DateRange(EVENT_FIRST_DATE,     
                    DateTime.MinValue, toDate.Value);
toFirstDate.InclusiveEnd = false;
eventDates.Add(toFirstDate); 
```

# javascript - 下拉联系表格 - 一旦表格动画下来，更改按钮上的背景图像

> ID：11314165
> 
> 赞同：2
> 
> 时间：2012-07-03T15:24:36.323
> 
> 标签：javascript, html, css

我正在创建一个下拉联系表单，您可以查看以下代码：

[http://jsfiddle.net/VtQbE/4/](http://jsfiddle.net/VtQbE/4/)

基本上目前有一个黑色按钮，按下它会触发jquery下拉并显示表单。

我想要做的是有一个显示“向下箭头”的背景图像，然后在按下按钮并下拉显示表单后，我想要一个“向上箭头”

看起来很简单，但我还没有找到一种方法来解决这个问题。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:35:06.003

在你的函数中添加一个向下箭头的背景图像，然后`<div id="contactLink"></div>`像这样`<div id="contactLink" style="background:url('arrowdown.png')"></div>`

```
$("#contactLink").click(function(){
   if ($("#contactForm").is(":hidden")){
      $("#contactForm").slideDown("slow");
      $('#contactLink').css('background', "url('arrowup.png')");
   }else{
      $("#contactForm").slideUp("slow");
      $('#contactLink').css('background', "url('arrowdown.png')");
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:43:08.823

[http://jsfiddle.net/VtQbE/6/](http://jsfiddle.net/VtQbE/6/)在这里，希望它是你需要的:)

我用的是网上找的图，用你自己的。如果要将图像放置在黑条内的其他位置，还可以添加一些 css。

# wamp - 如何通过 wamp 使用 php 发送电子邮件？

> ID：11314167
> 
> 赞同：1
> 
> 时间：2012-07-03T15:24:49.663
> 
> 标签：wamp, wampserver, php

我想使用 wamp 作为我的开发服务器，我正在尝试通过我的电子邮件 => gmail、hotmail、yahoo 发送电子邮件。我正在尝试实现一个简单的电子邮件 php 应用程序。

是否有可能在 wamp 中做到这一点？

是否可以在不更改 php.ini 的情况下使用 ini_set();

我试过改变我的 php.ini

```
using my yahoo mail
SMTP = smtp.mail.yahoo.com
; http://php.net/smtp-port
smtp_port = 587
auth_user = me@yahoo.com    
auth_pass = password 
```

并收到此错误消息“警告：mail() [function.mail]：SMTP 服务器响应：需要 530 身份验证 - 如需帮助，请访问[http://help.yahoo.com/help/us/mail/pop/pop-11](http://help.yahoo.com/help/us/mail/pop/pop-11.html)第 12 行 C:\wamp\www\9dot_disc_alt\abc.php 中的[.html "](http://help.yahoo.com/help/us/mail/pop/pop-11.html)

```
using gmail
SMTP = smtp.gmail.com
; http://php.net/smtp-port
smtp_port = 587
auth_user = me@gmail.com    
auth_pass = password 
```

SMTP 服务器响应：530 5.7.0 必须先发出 STARTTLS 命令。pc6sm6631754pbc.47 在 C:\wamp\www\9dot_disc_alt\abc.php 第 12 行

这是我当前的代码：

```
$to = "me@yahoo.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "me@my.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent."; 
```

先生/女士，您的回答将有很大帮助，我们将不胜感激。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:31:34.977

当您使用 wamp 时，您的 SMTP 必须是您的 FAI，例如，如果您有 free ：

=>SMTP = smtp.free.fr（或 .com）

编辑：你可以试试这个： http: [//glob.com.au/sendmail/](http://glob.com.au/sendmail/)，我是一个简单的 Windows 控制台应用程序，例如模拟 sendmail 的 wamp；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:50:14.280

我发现了一篇在线文章，允许我使用 wamp + php mailer 发送电子邮件

[http://nikunj-solutions.blogspot.com/2011/08/send-email-using-wamp-server.html](http://nikunj-solutions.blogspot.com/2011/08/send-email-using-wamp-server.html)

# c# - 使用 ffmpeg 获取海报框架（缩略图）

> ID：11314170
> 
> 赞同：3
> 
> 时间：2012-07-03T15:24:56.203
> 
> 标签：c#, ffmpeg, screenshot

我正在尝试使用 ffmpeg 从视频文件中获取海报帧。

我一直在关注本[教程](http://nolovelust.com/post/Another-Simple-C-Wrapper-For-FFmpeg.aspx)并提出以下代码（取自/改编自我提供的链接）：

```
public bool GetVideoThumbnail(string path, string saveThumbnailTo, int seconds)
        {
            string parameters = string.Format("-i {0} {1} -vcodec mjpeg -ss {2} -vframes 1 -an -f rawvideo", path, saveThumbnailTo, seconds);

            if (File.Exists(saveThumbnailTo))
            {
                return true;
            }
            else
            {
                using (Process process = Process.Start(pathToConvertor, parameters))
                {
                    process.WaitForExit();
                }
                return File.Exists(saveThumbnailTo);
            }
        } 
```

目前，此代码已成功在正确的目的地（saveThumbnailTo）中创建文件，只有图片是全黑的。我尝试更改代码中的秒值，以确保我不只是从视频开始获得一张空白图片。顺便说一下，路径是指我的视频存储的位置。

我目前正在调用上面的代码，如下所示：

```
GetVideoThumbnail(videoPath, folderPath + "/poster.jpg", 100) 
```

..然后将其传递给我的视图以显示图片。我只是想知道“.jpg”是否是我应该给这个文件的扩展名，因为我不完全确定？

**编辑：**当我从命令行运行相同的命令时，出现以下错误：

> 编解码器“mjpeg”的像素格式“yuv420p”不兼容，自动选择格式“yuvj420p”

以黄色显示，并且

> [image2 @ 02S96AE0] 无法从模式“poster.jpg”an_interleaved_write_frame() 中获取帧文件名编号 2：无效参数

以红色显示。

任何人都可以帮助我使其正常工作，因为我完全不熟悉 ffmpeg 命令行并且不确定我做错了什么。我尝试删除 vcodec 参数并得到相同的错误消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T16:35:39.990

试试这个：

```
public bool GetVideoThumbnail(string path, string saveThumbnailTo, int seconds)
{
    string parameters = string.Format("-ss {0} -i {1} -f image2 -vframes 1 -y {2}", seconds, path, saveThumbnailTo);

    var processInfo = new ProcessStartInfo();
    processInfo.FileName = pathToConvertor;
    processInfo.Arguments = parameters;
    processInfo.CreateNoWindow = true;
    processInfo.UseShellExecute = false;

    File.Delete(saveThumbnailTo);

    using(var process = new Process())
    {
        process.StartInfo = processInfo;
        process.Start();
        process.WaitForExit();
    }

    return File.Exists(saveThumbnailTo);
} 
```

简短说明：

*   **f image2** : 输出是图像
*   **vframes 1** : 从输入中取一帧
*   **y** : 覆盖输出文件
*   **“processInfo.CreateNoWindow = true”**：不显示 ffmpeg 窗口

尝试多次使用不同的“秒”参数值。另外，确保“pathToConvertor”是正确的。

这对我有用，最近在 Windows 机器上构建了 ffmpeg.exe。

让我知道事情的后续。

# java - 以某种方式将.class文件放在war文件夹中

> ID：11314171
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:24:57.097
> 
> 标签：java, jakarta-ee, ant, build, war

这是一个比较简单的问题。我正在构建一个 Web 应用程序，我必须将项目的 .class 文件放入我正在部署的 war 文件中。所以每次修改源代码时，我都想把编译好的类文件放到war文件夹中。如何使用命令行类编译来完成。

我认为 Apache ANT 可能对此有用。我以前没有使用过它。有人可以告诉这是否是解决这件事的方法吗？

如果是，是否有人有使用 Ant 做同样事情的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:39:12.527

[***您在教程：Hello World with Apache Ant***](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)中有一个关于使用 ANT 的精彩教程
[](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

 *在此之前，您可能想了解 ANT 是什么以及如何使用它？所以请阅读
[***Apache Ant™ 1.8.2 手册***](http://ant.apache.org/manual/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:39:21.770

您应该开始考虑使用[Maven](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)进行构建。

Maven 使用[*约定优于配置*](http://en.wikipedia.org/wiki/Convention_over_configuration)，这意味着需要遵循几个步骤，其中一个主要的事情是源树的布局。

出于您的考虑，这是一种设置所需内容的简单方法：

`directory layout`

```
+- pom.xml
  +- src
    +- main
      +- java
      +- resources
      +- webapp
        +- WEB-INF
          +- web.xml 
```

你的`pom.xml`会是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q11314171</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <build>
        <finalName>webapp</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
            </plugin>
        </plugins>
    </build>

</project> 
```

如果您安装 Maven，那么您需要在根文件夹（`pom.xml`文件所在的位置）中执行`mvn install`.

然后，您将`war`在新创建的`target`文件夹中有一个文件。该`war`文件将包含`src/main/java`路径中的已编译类以及必要的资源文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T19:49:16.170

实际上，这是我应该做的 -> 转到 java 构建路径并将路径放在那里你想在源代码部分中放置 .class 文件的位置。让你可以轻松获取war文件夹中最新的class文件！不需要 Ant/Maven。*

# active-directory - 冒充另一个域上的用户，一种方式信任

> ID：11314172
> 
> 赞同：0
> 
> 时间：2012-07-03T15:24:59.473
> 
> 标签：active-directory, impersonation

我试图冒充另一个域上的用户，以查询该域。有关某些背景，请参阅[从单向信任访问用户信息。](https://stackoverflow.com/questions/11004574/accessing-user-info-from-a-one-way-trust)

当我使用本地域用户时，我的模拟工作正常。当我指定目标域时，它也通过 LDAPS 端口 636，它不起作用。我的模拟返回 null。

我的模拟代码

```
public static WindowsImpersonationContext ImpersonateUser(ConnectionCredentials user)
    {
        WindowsIdentity tempWindowsIdentity;
        IntPtr token = IntPtr.Zero;
        IntPtr tokenDuplicate = IntPtr.Zero;

        if (RevertToSelf())
        {
            if (LogonUser(user.UserName, user.Domain, user.Password, LOGON32_LOGON_INTERACTIVE,
                LOGON32_PROVIDER_DEFAULT, ref token) != 0)
            {
                if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                {
                    tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                    impersonationContext = tempWindowsIdentity.Impersonate();
                    if (impersonationContext != null)
                    {
                        CloseHandle(token);
                        CloseHandle(tokenDuplicate);
                        return impersonationContext;
                    }
                }
            }
        }
        if (token != IntPtr.Zero)
            CloseHandle(token);
        if (tokenDuplicate != IntPtr.Zero)
            CloseHandle(tokenDuplicate);
        return impersonationContext;
    } 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:52:37.427

我的问题是我将用户名作为用户名@域发送，并指定了域名。如果用户名包含域名，LogonUser 的域名需要为空

```
if (LogonUser(user.UserName, null, user.Password, LOGON32_LOGON_INTERACTIVE,
                LOGON32_PROVIDER_DEFAULT, ref token) != 0) 
```

谢谢！

# java - Maven shade插件将dependency-reduced-pom.xml添加到基本目录

> ID：11314182
> 
> 赞同：65
> 
> 时间：2012-07-03T15:25:23.870
> 
> 标签：java, maven, maven-shade-plugin

maven shade 插件正在创建一个名为*dependency-reduced-pom.xml*和*artifactname-shaded.jar 的文件*，并将它们放在基本目录中。

这是一个错误吗？应该在目标目录中。任何解决方法？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-04T05:31:38.147

`createDependencyReducedPom`您可以通过设置为 false来避免创建它。

例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>${maven-shade-plugin.version}</version>
    <configuration>
        <createDependencyReducedPom>false</createDependencyReducedPom>
    </configuration>
    ....
    ....
</plugin> 
```

从 apache查看[更多细节](http://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#createDependencyReducedPom)

![在此处输入图像描述](../Images/3315939893554e626be903b49fe6c6a2.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-16T13:57:43.363

基于**bmargulies**的回答和他对**Xv 的评论。**的答案，我决定将减少依赖的 POM 配置为输出到`target/`，这在我的 VCS 中已经被忽略了。

为此，我只是将`dependencyReducedPomLocation`元素添加到`configuration`插件的元素中，即

```
<configuration>
  <dependencyReducedPomLocation>${project.build.directory}/dependency-reduced-pom.xml</dependencyReducedPomLocation>
  (...)
</configuration> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-03T15:33:00.843

请参阅[https://issues.apache.org/jira/browse/MSHADE-121](https://issues.apache.org/jira/browse/MSHADE-121)和[https://issues.apache.org/jira/browse/MSHADE-124](https://issues.apache.org/jira/browse/MSHADE-124)。

可以选择将 drp 移动到其他地方，但您可能不喜欢这样的后果。

你对 -shaded jar 的看法是错误的，它总是以 target/ 结尾，除非你把它移到别处。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-16T16:46:03.163

您可以使用旧版本的插件。1.7 版的 maven-shade-plugin 写入 /target。

从 1.7.1 版本开始，减少依赖的 pom.xml 被写入 basedir。请参阅问题[MSHADE-124](http://jira.codehaus.org/browse/MSHADE-124)以了解执行此操作的某些原因以及后果。如果您尝试设置*dependencyReducedPomLocation*，您可能会遇到生成站点打开问题[MSHADE-145](http://jira.codehaus.org/browse/MSHADE-145)的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T15:57:43.860

[http://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html](http://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html)上的文档说：

> createDependencyReducedPom boolean - 标记是否为着色工件生成简化的 POM。如果设置为 true，则已包含在 uber JAR 中的依赖项将从生成的 POM 部分中删除。精简后的 POM 将被命名为 dependency-reduced-pom.xml 并存储在与阴影工件相同的目录中。除非您还指定了dependencyReducedPomLocation，否则插件将在项目 basedir 中创建一个名为dependency-reduced-pom.xml 的临时文件。默认值为：真。

dependency-reduced-pom.xml*没有*存储在与阴影工件（目标目录）相同的目录中......它实际上是在基本目录中生成的，而不是目标

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-19T00:59:23.210

要忽略该文件，您可以将其添加到 DVCS 的忽略指令中。对于`git`，`.gitignore`创建一个包含以下内容的文件：

```
dependency-reduced-pom.xml 
```

您还可以[将其添加到`maven-clean-plugin`配置](https://maven.apache.org/plugins/maven-clean-plugin/examples/delete_additional_files.html)中，以便在[干净的生命周期阶段](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#lifecycle-reference)将其删除：（以下假设默认值，例如版本，在[POM`pluginManagement`部分](https://maven.apache.org/pom.html#Plugin_Management)中定义。）

```
 <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-clean-plugin</artifactId>
                    <configuration>
                        <filesets>
                            <fileset>
                                <directory>.</directory>
                                <includes>
                                    <include>**/dependency-reduced-pom.xml</include>
                                </includes>
                                <followSymlinks>false</followSymlinks>
                            </fileset>
                        </filesets>
                    </configuration>
                </plugin>
            </plugins>
        </build> 
```

请注意，上述配置是对非自定义清洁默认值的附加。

# php - 管理不同服务器之间的会话

> ID：11314184
> 
> 赞同：0
> 
> 时间：2012-07-03T15:25:26.710
> 
> 标签：php, asp.net

当负载均衡器与后端的不同 Web 服务器一起使用时，如何维护同一用户的会话。换句话说，假设有一个负载平衡器在不同的服务器之间分配负载，并且用户被定向到存储其会话的一个服务器，然后下次同一用户被定向到第二个服务器。服务器如何知道它是否是同一个用户？如何保持它在两台服务器上都是同一个用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:27:42.873

我通过将会话存储表单文件更改为另一个可以处理 tcp 连接的系统（在我的情况下为 memcache，但您甚至可以使用 mysql）

memcache 解决方案：用于 memcache 扩展

```
session.save_handler = memcache 
session.save_path = "tcp://localhost:11211" 
```

对于内存缓存D

```
session.save_handler = memcached 
session.save_path = "localhost:11211" 
```

，但是当然，您应该将 localhost 更改为您的 dns/ip

在手动[会话支持中检查它](http://php.net/manual/en/memcached.sessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:28:26.787

您的负载均衡器可以配置为将同一用户/客户端定向到同一服务器。这变得“棘手”的唯一一次是在 SSL 和不安全流量之间跳转时，但这仍然可以在您的负载均衡器上进行配置。

如果由于某种原因您无法执行此操作，您可以在 SQL 服务器中存储/检索会话状态。请参阅[这篇文章以获取指导。](http://support.microsoft.com/kb/317604)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:30:13.447

使用数据库进行会话存储。（注意 SQL 注入，因为保存 PHPSESSID 的 cookie 来自客户端。）

从这里开始：http: [//php.net/manual/en/function.session-set-save-handler.php](http://php.net/manual/en/function.session-set-save-handler.php)

# javascript - 多次触摸：仅在 touchmove 发生时触发 touchend 事件

> ID：11314185
> 
> 赞同：12
> 
> 时间：2012-07-03T15:25:26.853
> 
> 标签：javascript, ios, safari, multi-touch, touchmove

我想在我的 javascript 应用程序从 ios 设备（以后可能是 android）访问它时添加一些多点触控功能。

我想提供一个*类似 shiftkey 的*功能：用户可以用一根手指按住屏幕上的一个按钮，当这个按钮被按下时，屏幕其余部分的点击动作的行为与经典的点击略有不同。

我遇到的问题是，除非为按住**shiftkey**按钮的第一根手指触发*touchmove* ，否则我不会收到任何点击手指的**touchend事件。**

 ***因为屏幕非常敏感，**所以 touchmove**事件很容易触发，并且在大多数情况下一切正常。

但是当用户的手指有点太静止时，直到用户稍微移动他的手指才检测到轻敲。这会在点击和屏幕上发生的动作之间引起可变的“延迟”（如果用户非常平静，延迟可能会有所不同并持续几秒钟）。我的猜测是，这种延迟会导致用户再次点击，从而再次触发动作，这是我*不*想要的！

你可以在这里用你的 ipad/iphone 测试它：http: [//jsfiddle.net/jdeXH/8/](http://jsfiddle.net/jdeXH/8/)

尝试在点击红色 div 的同时将手指非常静止地放在青色 div 上，让身体保持绿色几秒钟。

这种行为是可以预期的吗？是否有一些已知的解决方法？我原以为当手指从屏幕上移开时会立即触发 touchend 事件。

*我用 iOS 5.1.1（ipad1 和 iphone4s）测试了这个*

编辑：发现一个类似的问题[Multitouch touchEvents not trigger as they should on Safari Mobile](https://stackoverflow.com/questions/8839333/multitouch-touchevents-not-triggered-as-they-should-on-safari-mobile)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:48:14.987

好吧，似乎这个错误[比我更困扰一些人](http://www.phoboslab.org/log/2012/07/what-the-fucking-fuck-apple)，他们直接向苹果提交了一个错误，几年后它现在在 iOS6 中得到修复:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:25:06.077

好吧，这很头疼。是的，有两个已知问题。首先，Safari 有时不会触发 touchEnd 事件，除非某处有 touchMove，即使 touchMove 并没有真正做太多。

其次，Chrome Mobile 也是一种不错的体验，因为在许多 Android 设备上，无论您做什么，touchEnd 事件都不会触发。所以根据我的经验：

*   实现一个 touchStart 事件，注册开始坐标等
*   实现一个与 touchEnd 完全相同的 touchMove 事件，但要确保回调不会多次触发。使用在更高范围内定义的布尔标志或类似的东西。
*   使用在更高范围中定义的相同布尔标志实现正常的 touchEnd 事件，该事件仅在 touchMove 尚未触发回调时触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:37:45.933

好的，我已经实施了这个解决方案，它似乎有效。

```
//Initialize the tap touch
function ManageTapTouch() {
    this.__enabled__ = false;
}

ManageTapTouch.prototype.init = function(){
    $("#hold").bind('touchstart', $.proxy(this.__enable__, this));
    $('#hold').bind('touchend', $.proxy(this.__disable__, this));
    $('#tap').bind('touchstart',  $.proxy(this.__changeColorOnHold__, this));
    $('#tap').bind('touchend',  $.proxy(this.__changeColorOnOut__, this));
};
ManageTapTouch.prototype.__enable__ = function(event) {
    this.__enabled__ = true;
};
ManageTapTouch.prototype.__disable__ = function(event) {
    this.__enabled__ = false;
    $('body').css('background-color', 'blue'); 
};
ManageTapTouch.prototype.__changeColorOnHold__ = function(event) {
    if (this.__enabled__){
        $('body').css('background-color', 'black');
    }
};
ManageTapTouch.prototype.__changeColorOnOut__ = function(event) {
    $('body').css('background-color', 'blue');
};

new ManageTapTouch().init(); 
```

你可以看到它在这里运行：http: [//jsfiddle.net/Tb6t6/15/](http://jsfiddle.net/Tb6t6/15/)

您也可以在 iPhone 上尝试使用多点触控的另一种方式：`event.originalEvent.touches[0].pageX`并且`event.originalEvent.touches[0].pageY`index 是屏幕上的手指， event 是触发的事件`TouchStart`。有了这个主题，你可以实现你自己版本的这个动作，或者使用我在这里建议的那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T02:30:12.897

因此，您似乎已经遇到了无法避免的情况之一，并且只会有错误的黑客攻击。您正在创建一个尚不完全“规范”的 UI 功能，但似乎有一些承诺（我喜欢......我喜欢）。在技​​术这一点上要问自己的问题是“*我怎样才能强迫用户滑动手指以保持 shift* ”。

在一位优秀设计师的帮助下，我认为您可以创建一个类似于[翻转开关](http://jquerymobile.com/demos/1.2.0/docs/forms/switch/)的滑动切换按钮......用户必须拖动并按住才能“打开”开关。释放后，开关将弹回“关闭”位置。我提到了一个设计师，因为按钮需要看起来像它的行为。也许有些评论可以变得有创意。***

# jquery - 验证没有表单的asp自定义控件中的文本框

> ID：11314196
> 
> 赞同：0
> 
> 时间：2012-07-03T15:26:06.667
> 
> 标签：jquery, asp.net, validation, textbox, custom-controls

我在 asp.net webform 的自定义用户控件中有 5 个文本框和按钮。我在尝试弄清楚如何在提交之前验证所有这些文本框时遇到了麻烦。该按钮不执行回发，我需要检查文本框在 jQuery 中是否有效，如果有效，我将发布到 webmethod。

我无法弄清楚如何使用 jQuery Validate 执行此操作，因为您不能在自定义控件中使用表单标记。我也不能使用 .net 中内置的验证，因为它需要在客户端而不是服务器端进行验证。

现在我对每个文本框都有 onblur 并使用正则表达式检查它们，然后如果它们失败，则会有一个错误标签显示消息。然后提交按钮检查每个错误标签以查看它们是否 = "" ，但问题是如果没有在任何文本框中输入任何内容并且没有显示任何错误，则 if 显然会通过。

有没有一种简单的方法来验证没有表单标签的文本框，并在客户端检查所有验证？

# jmeter - 如何使用 Jmeter 打印所有值

> ID：11314197
> 
> 赞同：1
> 
> 时间：2012-07-03T15:26:08.957
> 
> 标签：jmeter

我需要在 Web 应用程序的表中打印特定列名的所有值。我已经提取了特定的记录 ID 和列名。我只打印第一个值。我总是得到匹配计数=1。

我需要打印所有与相关性匹配的值，即我想要类似于 Load Runner 的“ORD=All”之类的东西。在 Jmeter 中，除了模板 $1$、$2$ 之外，我是否有任何功能或方法可以打印所有捕获的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:24:13.873

至少看看这些：

*   [JMeter 正则表达式提取器 forEach 控制器](https://stackoverflow.com/questions/10582100/jmeter-regex-extractor-foreach-controller/)
*   [使用 RegEx Extractor 从 JSON 响应中提取多个值](https://stackoverflow.com/questions/8125896/pulling-multiple-values-from-json-response-using-regex-extractor/)
*   [使用 BSF 后处理器中使用的变量作为另一个采样器中的参数](https://stackoverflow.com/questions/11272565/using-variables-used-in-bsf-post-processor-as-a-parameter-in-another-sampler)

# javascript - 在全选之前完成了一行

> ID：11314199
> 
> 赞同：1
> 
> 时间：2012-07-03T15:26:09.877
> 
> 标签：javascript, d3.js

我有一个带有列标题的数组，我希望我的第一个单元格有“A1”作为标题。我试过这样：

```
var title=mtable.append("thead").append("tr");
title.append("td").text("A1");
title.selectAll("td")
        .data(lTitre)
        .enter().append("td")
        .text(function(d) { return d.key; }); 
```

我的代码没有绘制第一列标题：2007（如下所示）。我该如何解决这个问题？

```
<thead>
  <tr>
    <td>A1</td>
 !!!! <td>2007</td> !!!!! is missing here 
    <td>2008</td>
    <td>2009</td>
    <td>2010</td>
    <td>2011</td>
  </tr>
</thead> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:46:14.353

使用您当前的代码，如果您检查`__data__`绑定到`<td>A1</td>`，您会看到它有`__data__.key == 2007`. 发生这种情况是因为只要您的`selectAll()`语句匹配当前选择中的任何元素，该`.data()`函数就会在创建输入选择之前将数据绑定到现有元素。要解决此问题，只需使用`selectAll()`与任何现有元素都不匹配的函数：

```
var title = mtable.append("thead").append("tr");
title.append("td").text("A1");
title.selectAll(".new")
        .data(lTitre)
        .enter().append("td")
        .text(function(d) { return d.key; }); 
```

# linq - 使用具有多个 where 条件的 Linq

> ID：11314203
> 
> 赞同：18
> 
> 时间：2012-07-03T15:26:21.243
> 
> 标签：linq, linq-to-entities, oracle10g

我有一个类表示定义的数据库表：

```
public class MyClass{
    public int MyClassId{get;set;}
    public string Name{get;set;} 
    public string LastNamw{get;set;}
    public DateTime From{get;set;}
    public DateTime To{get;set;}
} 
```

我想对 oracle 数据库运行一些搜索查询。

现在的问题是：

```
var list = context.MyClass
    .Where(x => x.From>= FromMyDate)
    .Where(x => x.To <= ToMyDate);

var list = context.MyClass
    .Where(x => x.From>= FromMyDate && x.To <= ToMyDate); 
```

**使用带有 where 条件的多行还是一个更好？为什么...请**

据我了解，当我想搜索第一个条件的结果时，我使用了多个 where 子句。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T15:44:04.077

没关系

您只是在创建传递给 Oracle 提供者的表达式树，提供者的工作是创建生成的 SQL 查询。即使表达式树在两者之间会略有不同，它仍然应该产生相同的 sql。我喜欢使用 sql profiler 来确保我的 linq 查询产生高效的 sql。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T11:45:44.990

我将关注 Vossad01 发布的 John Skeet 的回答。

[正确的 Linq where 子句](https://stackoverflow.com/questions/6359980/proper-linq-where-clauses/6360037#6360037)

# javascript - 在文档加载之前从 php 服务器获取数据

> ID：11314209
> 
> 赞同：0
> 
> 时间：2012-07-03T15:26:39.983
> 
> 标签：javascript

为了从服务器恢复数据，我使用 XMLHttpRequest，我的代码是这样的（它工作正常）

```
window.onload = function getArtists() {
    xmlhttpLoad=new XMLHttpRequest();           
    xmlhttpLoad.onreadystatechange=function() {
        if (xmlhttpLoad.readyState==4 && xmlhttpLoad.status==200) {
            // put data in an invisible HTML elem           
        }
    }
} 
```

现在我想使用一个特定的库，但它要求在文档 document.onload 被触发之前加载这些数据。我怎样才能做到这一点？我可以使用上面的代码，但在加载数据之前阻止 HTML 解析？我的意思是

```
<head>
    <script>
        // block parsing until data are loaded
        // put data from server in a variable
    </script>
    <script src="newLib.js"></script>
<head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:30:34.970

您可以尝试将 AJAX 调用设置为`async = false`，因此它将停止页面执行，直到完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:34:35.530

如果你不使用`load`事件而直接运行代码，它会在脚本块被解析后立即启动。

要使下一个块的解析等待 AJAX 响应，您必须发出同步请求。您可以通过`false`在调用中提供第三个参数（异步）来做到这一点`open`：

```
<head>
  <script type="text/javascript">

  xmlhttpLoad=new XMLHttpRequest();
  xmlhttpLoad.onreadystatechange=function() {
    if (xmlhttpLoad.readyState==4 && xmlhttpLoad.status==200) {
        // put data in an invisible HTML elem           
    }
  }
  xmlhttpLoad.open("get", "somepage", false);

  </script>
  <script type="text/javascript" src="newLib.js"></script>
<head> 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:44:36.040

您可以在数据准备好时加载库：

```
xmlhttpLoad=new XMLHttpRequest();
xmlhttpLoad.onreadystatechange=function() {
    if (xmlhttpLoad.readyState==4 && xmlhttpLoad.status==200) {
        // put data in an invisible HTML elem
        var script = document.createElement("script");
        script.src = "newLib.js";
        document.getElementsByTagName("head")[0].appendChild(script);
    }
}
xmlhttpLoad.open("get", "somepage", false); 
```

# sitecore - Sitecore：匿名页面预览

> ID：11314212
> 
> 赞同：0
> 
> 时间：2012-07-03T15:26:57.617
> 
> 标签：sitecore, sitecore6, sitecore-workflow

是否可以在 SiteCore 中实现匿名页面预览？我们要求在发布内容之前向一组人发送授权电子邮件以对其进行审核，但要求用户在预览链接生效之前先登录 SiteCore 会破坏用户体验。理想情况下，我们需要一个可以在工作流程过程中生成（或派生）的 URL，它本质上是页面的公共预览。

这可能吗？

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:05:46.970

是的。不过，这需要一些工作。

[http://sitecoreblog.alexshyba.com/2010/09/publish-to-pre-production-web-database.html?m=1](http://sitecoreblog.alexshyba.com/2010/09/publish-to-pre-production-web-database.html?m=1)

# mysql - 您应该在更改状态列上使用 MySQL 分区吗？

> ID：11314214
> 
> 赞同：3
> 
> 时间：2012-07-03T15:27:03.123
> 
> 标签：mysql, database-partitioning

我们有一个表，它充当要处理的项目队列。此表有一个状态列，可以包含 0 或 1，以指示记录是否仍处于活动状态。该表目前有大约 4MM 行，并且会快速增长。

行的分布约为状态 = 0 的 5% 和状态 = 1 的 95%。典型查询仅查找状态 = 0 的记录。

随着表的增长，查询开始变慢。这是因为 MySQL 优化器没有在状态列上使用索引，因为它的基数太低。

我们正在考虑按状态列将表划分为 2 个分区。我们的想法是我们可以利用分区修剪，因此通常只需要分析总记录的 5%。我们仅出于存档原因保留 status=1 记录。

我的问题是这种方法是否会产生我正在寻找的预期效果，或者负面影响是否会超过好处？将行从 status=0 更新到 status=1 会导致性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:11:43.877

如果更新状态列的性能是一个问题，那么只创建一个单独的表来仅存储归档记录，然后在服务器的安静时间每隔一段时间安排将归档记录从原始表移动到这个归档表呢？

这样，在第一次迁移之后，您最终会得到更小的“活动”表，并且最终用户不会意识到将状态从“0”更改为“1”的 I/O 缓慢。

# sql - 表格行数

> ID：11314215
> 
> 赞同：1
> 
> 时间：2012-07-03T15:27:07.073
> 
> 标签：sql, sql-server, sql-server-2008

我正在运行以下查询并检查它是否返回任何结果，如果没有，我需要在我的 sp.xml 中实现一些逻辑。我从我的 sp 中给出了下面的几个代码块。

```
select * from temp
where (select * table1 where Id='4728')=0 
```

如果 table1 没有任何记录，它不应该返回任何结果，我需要知道我是否正确检查它。

```
INSERT INTO #companies
    SELECT DISTINCT c.Company_Id
    FROM COMPANY C
        INNER JOIN Request_Summary rs ON c.Company_ID=rs.Company_ID
        WHERE
            rs.IsMember_Ind <> 0            
            AND (SELECT COUNT(*) FROM Monitor_Request mr WHERE mr.Company_ID=c.Company_ID)< 5
                       -- I am checking it here
            AND EXISTS(SELECT COUNT(*) FROM Monitor_Request mr2 WHERE mr2.Company_ID=c.Company_ID)
            AND NOT EXISTS(
                SELECT * FROM TaskAction ta WHERE 
                ta.FirstActionTypeId = @firstActionTypeId and 
                ta.TaskTypeId = @taskTypeId and 
                ta.NextActionTypeId is not null and
                ta.EntityId = c.Company_ID and
                ta.EntityTypeId = 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:33:49.317

> 如果 table1 没有任何记录，则不应返回任何结果

由于您处于存储过程中，您可能只想这样做

```
IF Exists(select * table1 where Id='4728')
BEGIN 
     Select...

END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:28:42.607

改用`WHERE EXISTS`：

```
SELECT * 
FROM temp 
WHERE EXISTS
(
    SELECT * 
    FROM table1 
    WHERE Id='4728'
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T15:34:05.097

这是另一个解决方案：

```
IF (SELECT COUNT(1) FROM table1 WHERE Id='4728') = 0
BEGIN
    SELECT * FROM temp
END 
```

还有另一个解决方案，正如 Aaron 在评论中提出的那样：

```
IF EXISTS(SELECT 1 FROM table1 WHERE Id='4728')
BEGIN 
     SELECT * FROM temp
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:21:05.953

嗯，我想我会将该查询重组为以下内容：

```
INSERT INTO #companies
SELECT c.company_Id  -- presumes that company_Id is DISTINCT initially
FROM Company c
WHERE EXISTS (SELECT '1'
              FROM Request_Summary s
              WHERE s.company_Id = c.company_Id
              AND s.isMember_Ind <> 0)
AND EXISTS (SELECT '1'
            FROM Monitor_Request m
            WHERE m.company_Id = c.company_Id
            GROUP BY m.company_Id
            HAVING COUNT(*) < 5)
AND NOT EXISTS (SELECT '1'
                FROM TaskAction t
                WHERE ta.FirstActionTypeId = @firstActionTypeId 
                AND t.TaskTypeId = @taskTypeId 
                AND t.NextActionTypeId IS NOT NULL 
                AND t.EntityId = c.Company_ID 
                AND t.EntityTypeId = 1) 
```

永远不要打扰一个`SELECT COUNT(*)`内部`WHERE EXISTS`子句，因为优化器*可能*会计算所有行（即使我们只关心一个）。如果 a`JOIN`为您提供了不止一行，但您只是在检查是否存在（即，您不需要其中的任何数据），请使用`EXISTS`子句。

我实际上对您的整个 SP 感到好奇，而不仅仅是这个查询——尤其是当您插入会话/临时表时。这是应该变成CTE的东西吗？

# javascript - 为什么我的 JavaScript 中的 CSS 不起作用？

> ID：11314217
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:27:09.350
> 
> 标签：javascript, html, css

当我点击它时，我试图弹出一个框。这是盒子的 HTML：

```
<div id="content_1">
    <p>Hello</p>
    <p>Please push the button</p>
    <p><input type="button" id="go_button" value="Go"/> </p>
</div>
<div id="box">
    <p>hello</p>
</div> 
```

这是JavaScript和CSS：

```
$(document).ready(function() {
    $("#content_2").on("click",function(){
    .css("z-index",3);
    }
} 
```

这是样式以防万一：

```
#go_button {

}
#content_1 {
margin:20px auto;
position:fixed;
width:1000px;
text-align:center;
border:1px solid #d0d0d0;
box-shadow:1px 1px 5px #aaa;
border-radius:15px;
background:#99FF99;
z-index:3;
}
#box {
position:fixed;
top:100px;
left:300px;
z-index:1;
width:600px;
height:300px;
background:green;
}
body {
background:#f7f7f7;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:30:37.863

您不能在没有任何东西的情况下调用方法链来启动它。`content_2`我们在您的标记中看不到具有 id 的元素。也许您的意思是将此应用于`#content_1`.

```
$(document).ready(function() {
    $("#content_2").on("click",function(){
        // Apply to this
        $(this).css("z-index",3);
    });
}); 
```

如果要将 CSS 应用于其他元素而不是`content_2`( `this`)，请改用其选择器。

```
$(document).ready(function() {
    $("#content_2").on("click",function(){
        $('#box').css("z-index",3);
    });
}); 
```

请注意，除非您指定 `position: absolute`or `position: fixed`，`z-index`否则不会有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:31:12.900

尝试这个

```
$(document).ready(function() {
    $("#content_2").on("click",function(){
    $(this).css("z-index",3);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:31:30.953

看起来您没有将 css 应用于任何东西：

```
$(document).ready(function() {
$("#content_2").on("click",function(){
        $('#box').css("z-index",3);
    }
} 
```

另外，`#content_2`未定义。

# python - 使用 HtmlXPathSelector 返回包 含 HTML 实体的字符串

> ID：11314220
> 
> 赞同：0
> 
> 时间：2012-07-03T15:27:21.883
> 
> 标签：python, html, json

我有一个从网页解析的 JSON 字符串，我正试图用`json.loads()`它来将其转换为 Python 字典。但是，JSON 字符串中的某些值包含双引号，例如

```
'{"title": "The "Star Wars Kid": Where is he now?"}' 
```

显然这不是一个正确的 JSON 字符串，并且会`json.loads()`抱怨。使用类似的东西`string.replace('"', '\\"')`也不起作用，因为这是一个单一的字符串，这样做会影响正确的双引号以及坏的双引号。

顺便说一句，这不会在抓取时导致 HtmlXPathSelector 错误，因为在网页上，错误的引号是这样编码的

```
'{"title": "The &#34;Star Wars Kid&#34;: Where is he now?"}' 
```

如何正确解析此字符串`json.loads()`？

**编辑**：我知道在编码的引号被解码之前解析字符串会很简单（如第二个示例所示），所以我想我真正要问的是如何从python HtmlXPathSelector。

如果我正在抓取的 HTML 文档包含此字符串

```
'{"title": "The &#34;Star Wars Kid&#34;: Where Is He Now?"}' 
```

如何让 HtmlXPathSelector 在不解码编码引号的情况下返回该确切字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:29:34.123

```
{"title": "The &#34;Star Wars Kid&#34;: Where is he now?"} 
```

这是您想要解码 JSON 的时候。然后稍后替换“坏引号”。

# python - Django：初始验证从对象实例创建的表单，而不是 POST

> ID：11314222
> 
> 赞同：2
> 
> 时间：2012-07-03T15:27:26.070
> 
> 标签：python, django

我有一个表格，我想在最初显示之前对其进行验证。基本上我想要的行为是，当用户打开表单时，初始值（从对象实例中提取）已经被检查，如果无效，则标记为附加错误。

这个想法是有两种形式：

```
def DraftForm(forms.ModelForm):
    class Meta:
        model = Project

def FinalForm(DraftForm):
    def __init__(self, *args, **kwargs):
        super(FinalForm, self).__init__(*args, **kwargs)
        self.fields['text'].required = True 
```

第一个用于编辑草稿，第二个用于检查是否填写了发布所需的所有字段等。

我认为在“编辑项目”视图中这样的事情会起作用，并使初始表单显示错误：

```
# redirected from some other form, so no POST at this point:
if request.session.get('trying_to_publish', False):
    form = FinalForm(instance=project)
    form.is_valid()
else:
    form = DraftForm(instance=project)
... 
```

但不是; full_clean() 也不会触发错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:42:36.983

您需要绑定表单。代替请求对象，您可以只使用一个空字典。

```
if request.session.get('trying_to_publish', False):
    form = FinalForm({}, instance=project)  
    form.is_valid() 
```

is_valid [()](https://docs.djangoproject.com/en/1.4/ref/forms/api/#django.forms.Form.is_valid)文档有助于解释这一点（如果你知道你在找什么）。必须先绑定表单，然后才能对其进行验证。即使是传递一个空字典的表单也会被[绑定](https://docs.djangoproject.com/en/1.4/ref/forms/api/#bound-and-unbound-forms)。

# html - 如何使用 jQuery 创建具有唯一 ID 的可重复表

> ID：11314225
> 
> 赞同：0
> 
> 时间：2012-07-03T15:22:34.643
> 
> 标签：html, javascript, jquery

我需要创建一个可以“复制”并填充一组新数据的表结构。但是，对于以后必须访问它们的函数，每个表都必须具有唯一的 ID。例如：

```
<table class="main">
    <thead><tr><th class="header"></th></tr></thead>
    <tbody>
        <tr class="row"><td class="col0"></td><td class="col1"></td></tr>
    </tbody>
</table> 
```

我目前的想法是使用 jQuery 将表格从单独的 html 文件加载到变量中。使用这个保存的表，我可以创建一个复制它的函数，遍历表以向需要从单独的数据源附加信息的每个部分添加一个 ID，然后返回这个新表。

我是 jQuery 新手，感觉我可能错过了一种更简单/更好的方法来实现这一点。对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:39:51.540

您可以像这样克隆表行[http://jsfiddle.net/ambiguous/LAECx/](http://jsfiddle.net/ambiguous/LAECx/)但请记住使用数据库 id 等唯一值设置 id 属性，然后在单击编辑时，您可以获得您设置的 id 值并将其用于删除或更新。我建议您查看 jquery 中的 DOM 主题。

假设您通过 ajax 获取数据，您可以使用它来设置唯一 ID

```
for(var i = 0; i < data.length; i++) {
       var item = data[i];
       $('.client-content').append("<li id='"+item [0]+"'>"+"<b>"+i +"</b>" + " : " +item[0] + " : " + item[1]+"<a href='#' class='link-right'>Edit</a>" + "<a href='#' class='link-right'>Delete</a>"+"</li>" + "<br/>"); 
```

希望有帮助。

# google-apps-script - Google Apps 脚本在 Google 站点上执行期间重新启动

> ID：11314226
> 
> 赞同：0
> 
> 时间：2012-07-03T15:27:40.380
> 
> 标签：google-apps-script

我正在创建一个带有按钮和文本框的 UI 面板，以便在 Google 网站上使用。脚本似乎有时会重新启动（全局重新加载，日志清除） - 尽我所能认为它是在按下按钮后。按钮处理程序中没有任何内容会导致错误。按钮处理程序运行良好（doGet 似乎不再运行）。
使用以下设置按钮处理程序。也许这里是什么原因造成的？

```
//container is the app

//textOnButton = "Next"

//handler ="submitNext_"   - name of method that handles click

//vPanel is the panel containing the button

var submitButton = container.createButton().setId(textOnButton);

submitButton.setText(textOnButton);

// submit handlers

var submitServerHandler = container.createServerClickHandler(handler);

submitServerHandler.addCallbackElement(vPanel);  

submitButton.addClickHandler(submitServerHandler); 
```

关于这种行为的任何想法？主要问题是我的几个全局常量并不是真正的常量，它们在重新启动时被重新设置。我可以将它们存储在 UserProperties 作为解决方法，但想了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:56:41.463

这是故意行为。每个回调都运行一个“新”脚本，因此不建议使用不是真正常量的常量。请参阅此处的类文档：

[https://developers.google.com/apps-script/class_serverhandler](https://developers.google.com/apps-script/class_serverhandler)

Serge，这些方法已被弃用，仅仅是因为我们将它们全部替换为适用于任何类型处理程序的 createServerHandler。所有老旧的 createServerXXXHandler 方法仍然有效；它们只是 createServerHandler 的同义词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:52:03.473

这可能与[今天在这里看到的另一篇文章](https://stackoverflow.com/questions/11308103/execution-of-a-script/11308291#11308291)有​​关，因为您正在使用的处理程序`createServerClickHandler(handler)`已于[2012 年 6 月弃用](https://stackoverflow.com/questions/11308103/execution-of-a-script/11308291#11308291)

不确定但值得一试吗？

# multithreading - Spring bean 和线程

> ID：11314227
> 
> 赞同：0
> 
> 时间：2012-07-03T15:27:41.770
> 
> 标签：multithreading, spring, javabeans

我必须在 webapp 中创建一个进度条。我需要一个执行工作的线程和一个测试该线程以获得他的状态的控制器。
如何使用 bean 设置它（在那个线程中我需要自动装配一些服务）？我可以将线程用作非单例 bean 吗？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:40:31.400

我会为此创建一个小型包装类。您可以让类中的所有 setter 来处理注入的服务，您可以使用它`InitializingBean`来启动线程，并且可以将 bean 注入到其他类中，以便它们可以调用 getter`volatile`或`synchronized`字段。就像是：

```
public class ProgressBar implements InitializingBean, Runnable, DisposableBean {
    private volatile int someField;
    private Thread thread;
    // start the thread after the properties are set
    public void afterPropertiesSet() {
        thread = new Thread(this);
        // maybe make it a daemon thread
        // thread.setDaemon(true);
        thread.start();
    }
    // stop it when spring is shutting down
    public void destroy() {
        thread.interrupt();
    }
    public void run() {
       ... thread code goes here
    }
    // spring setter
    public void setSomeService(SomeService someService) {
       this.someService = someService;
    }
    // getter used by other beans to get some value from this class
    public int getSomeField() {
        return someField;
    }
} 
```

当然，您也可以为此使用一些 spring 的计时器类，尽管它们对于经常运行的重复性任务更有效。

# http - RESTful Web 服务 - 修改日期和带有子对象的对象

> ID：11314231
> 
> 赞同：2
> 
> 时间：2012-07-03T15:27:53.963
> 
> 标签：http, rest

想象一个具有两个实体/对象的 Web 服务，Room 和 Person，其中 Room 通过 Room.Occupants 属性集合公开其中的人员。每个实体都有一个 LastModified 日期。

如果一个房间的新表示被 PUT 到服务中，并且一个居住者被移除，这是否应该改变房间上的 LastModified？

答案对缓存有影响。

您可以认为实际修改的实体是 Person，因为它的 RoomId 设置为 NULL。

但是对 http../rooms 的修改日期的有条件请求将无法反映房间的完整表示的变化，包括它的居住者。

如果您认为 Room*应该*更改其 LastModified，那么您需要更新可能有两个 Room 的时间戳，只要将 Person 写入服务并且其 RoomId 已更改。

如果 Person 拥有 PersonalBelongings 集合怎么办？这可能很快就会失控，所以对象的表示是否应该排除表示任何关联的集合以避免所有这些复杂性？

卢克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:48:54.210

由您决定在您的领域中什么是有意义的。

当有人离开房间时，这会“修改”房间吗？我不认为有一个正确的答案，尽管从隐喻中得出的直觉是*不，当有人进入或离开时房间没有被修改。* 这是对房间在现实世界中的行为方式的常识性理解，尽管我知道您仅将房间和人用作示例类型，并且您的实际场景中的问题可能并不那么明确。

关键是要保持一致。

第一步是说“存在的房间不允许 PUT”。您可以通过 PUT 使“添加房间”成为不可能，这将消除您的初始场景的可能性，即 PUT 一个房间里少一个人。要将一个人从一个房间“移动”到另一个房间，您可以向具有给定 ID 的人发布信息。

另一方面，您可能希望向房间发布消息以更新房间中的居住者列表。在这种情况下，您可能不希望允许反向 POST 移动一个人。

您选择哪个选项取决于您 - 只要它是一致且合理的，就可以了。

* * *

另一个合理的步骤是适当地命名“LastModified”。在您的 Room 和 Person 场景中，更合适的名称可能是“LastContentsChange”或“LastOccupantsChange”。

接下来的合理问题是，*我的应用程序是否需要知道房间的住户组上次更改的时间？*当然，这是一个只有你才能回答的问题。

所以你迭代——你做出一些临时的设计决定，然后考虑当你在行动中使用该设计时的含义。然后你重新审视和改变一些设计决策，并进行一些新的测试。等等。

能够使用简化的后备存储快速对您的设计进行原型设计，只是为了尝试想法，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:19:50.230

当您继续使用实体和对象等术语定义基于 REST 的系统时，您将遇到这样的问题。REST 处理资源和表示，虽然这看起来像是微不足道的文字游戏，但在处理此类问题时会产生巨大的差异。

HTTP 关心的 LastModified 日期是表示的最后修改日期。如果我们关心的资源是`/room/45/occupants`它的表示显示房间里的人和刚刚离开房间的人，那么我会说毫无疑问，表示应该有一个新的 LastModfied 值。

隐藏在 REST 接口后面的房间和人员实体发生的事情的细节是一个完全独立的问题。

资源和表示的设计与域实体的设计不同，就像域实体与用于存储这些实体的数据库结构不同一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:52:00.810

你以经典的鸡和蛋问题结束。你必须决定 Persons 是否在房间“外面”有生命。如果是这种情况，那么您可以找到具有 NULL RoomId 的 Persons，*并且*Persons 将住*在*房间外，因此 Room.occupants 将保存对 Persons 的引用（URL）（而不是*包含*人员）。

如果 Persons 只存在于房间内，那么您不能拥有 RoomID 为 NULL 的 Persons，因为对 Persons 的所有集合管理都是在 Rooms 内进行的（添加新的 Person，删除一个），并且可以有效地修改/更新 LastModified、入住人数等。

然后，您必须决定由谁管理交易。在第二种情况下（人不住在房间外），房间本身存储所有状态，因此更新状态不需要事务（您只需删除或添加一个人，房间的状态就会改变）。

在第一种情况下，请注意房间和人员是相互关联的。如果事务由客户端管理，则客户端必须确保在删除人员时始终执行必要的步骤。那是：

1.  删除人员
2.  使用 PUT 更新房间（修改 occupants 中的引用以反映 Person 删除）

如果在服务器中进行状态管理，删除 Person 会使 Room 被修改。这会在删除 Person 时强制使 Room 副本无效，并且由服务器将对 Person 的更改级联到 Room（即更新其 LastChanged）。这是服务器中的硬编码逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:05:28.137

一般来说，我认为一个资源的更改将意味着先前获取的包含该资源的集合现在无效。我希望获取该集合的新`HEAD`请求`GET`将具有更新的`Last-Modified`标`ETag`头。

我认为@Darrel Miller 在资源和域实体之间的区别上是正确的。对我来说，这也意味着它们的*生命周期*不同，应该单独跟踪。在我看来，一个资源的变化*会触发*相关集合资源的变化。

话虽如此，您将如何在不失控的情况下实施它？我已经看到存储在数据库中的资源状态（与实体分开）。它可以像将 URL 映射到日期戳一样简单，但这实际上取决于您的资源布局。

至于更新，我已经看到使用数据库触发器来更新资源状态。虽然它是直截了当的。我发现它不是可扩展的，只是简单的混乱。我最喜欢的策略是在服务实现内部创建*应用程序事件。*这允许我在资源更改时异步发布事件。事件处理程序相应地更新其他资源状态。我看到了许多实现应用程序事件的方法。它类似于记录或记录历史，所以我认为应用程序事件是一个[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)。所以，我喜欢使用[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，但你应该使用任何可行的方法。

# asp.net - Current.Request.Files.Count == 0

> ID：11314232
> 
> 赞同：0
> 
> 时间：2012-07-03T15:27:54.890
> 
> 标签：asp.net, xml, inputstream, httpcontext

我正在编写外部站点将向其发送 XML 的 .aspx 页面的 c# 组件。我的页面需要能够接收 XML 并对其进行解析，但我正在等待接收 XML。

我的页面被 XML 页面击中，但 Request.Files.Count==0 和 Request.InputStream.Length==0，即使我知道这两个语句都应该是错误的，因为页面正在记录接收文件和 HttpContext.Current ！= null。我正在使用以下代码：

```
 Stream stream = HttpContext.Current.Request.InputStream;
    stream.Position = 0;
    XmlTextReader reader = new XmlTextReader(stream);

    log("" + Request.Files.Count, tw);
    log("Does the current request exist?",tw);
    log(HttpContext.Current != null ? "Yes" : "No",tw);
    log("XML Retrieved!", tw);
    log("Byte Length of " + stream.Length, tw); 
```

我的 log.txt 文件有以下输出：

```
 0
    Does the current request exist?
    Yes
    XML Retrieved!
    Byte Length of 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:12:25.670

问题已解决，在这种情况下，我需要引用 Page.Request.InputStream 而不是 HttpContext.Current.Request.InputStream。

我用于接收 XML 并将其读入字符串的代码：

```
 Page.Response.ContentType = "text/xml";
    StreamReader sr = new StreamReader(Page.Request.InputStream);
    String main = Server.UrlDecode(sr.ReadToEnd()); 
```

# jquery - 试图 AJAX 一个 ASP 页面，但它从来没有成功

> ID：11314234
> 
> 赞同：0
> 
> 时间：2012-07-03T15:28:02.397
> 
> 标签：jquery, asp.net, html, ajax

我正在编写一些代码，但似乎无法理解为什么这总是失败。我曾尝试调试它，但是正在引用的 asp 页面不会遇到断点。（提示可能它没有获取页面？？）。对于数据：我在发帖之前就有了它，试图查看它是否会执行 JSON.stringify({variables}) 以查看它是否也能正常工作，但它没有

我在这里做错了什么吗？

```
$.ajax({
        type: 'POST',
        url: 'AutoComplete.asmx/getWebFormDesignFieldContents',
        data: {
            'fe_name': "*",
            'count': 200,  //this might need to be adjusted slightly.  I may want to make it more OR less.
            'also_search_fe_desc': true,
            'opts': opts
        },
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (result) {
            //success
            $("div.modal").replaceWith($(result));
            $("div.modal").fadeIn();
        },
        error: function (result) {
            //error
            //alert("Error: "+result.statusText);
            $("div.overlay").fadeOut();
        }
    }); 
```

在 ASP 的服务器端部分，我有：

```
public String getWebFormDesignFieldContents(String fe_name, int count, bool also_search_fe_desc, String opts)
{
   String retValue = "";
   ...
   return retValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:32:06.400

你需要用`[WebMethod]`属性装饰你的方法

```
[WebMethod]
public String getWebFormDesignFieldContents(
     String fe_name, 
     int count, 
     bool also_search_fe_desc, 
     String opts) 
```

您需要更改的其他内容是您的 json 格式。你必须传递一个字符串。

```
data:'{"fe_name": "*", "count": 200, "also_search_fe_desc": true, "opts":' + opts + '}' 
```

您可以使用`JSON.stringify`但考虑到旧浏览器不支持它，因此您可能需要处理这种情况。

您还需要处理返回逻辑。现在我只看到你返回一个空字符串。如果您显示更多代码，我们也可以为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:32:29.853

您需要将 retValue 编码为 json

```
System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string jsonresult = serializer.Serialize(retValue ); 
```

# android - 使用内容提供者将一个数据库的内容复制到另一个数据库

> ID：11314235
> 
> 赞同：0
> 
> 时间：2012-07-03T15:28:07.573
> 
> 标签：android, sqlite, android-contentprovider, android-contentresolver

我正在尝试使用[此](https://stackoverflow.com/questions/9070689/copy-share-configurations-between-paid-free-versions-of-android-app)方法将数据库内容从我的免费应用程序复制到我的付费应用程序，但在最后一步我很迷茫：

*检查提供者的存在并将数据加载到您的付费应用程序中。*

我可以像这样检查提供者的存在：

```
 List<ProviderInfo> providers = getPackageManager().queryContentProviders(
    "com.mypackagename.content.MyProvider",android.os.Process.myUid(), 0); 
```

但我不知道如何进行复制？

我尝试获得这样的 ContentResolver：

```
 ContentResolver resolver = getContentResolver();
    ContentProviderClient client = resolver.acquireContentProviderClient(Uri.parse("content://com.mypackagename")); 
```

我还没有能够对此进行测试，但即使它有效，我也会迷失下一步。我如何将数据从一个数据库中获取到另一个数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:01:26.650

所以我解决了这个问题。这根本不是太棘手。

我的 ContentProviderClient 代码走在了正确的轨道上。

```
ContentResolver resolver = getContentResolver();
ContentProviderClient client = resolver.acquireContentProviderClient(Uri.parse("content://com.mypackagename.free")); 
```

然后，您需要要从中复制的表的 URI，我相信这些必须是硬编码的。

```
Uri CONTENT_URI_TABLE1 = Uri.parse("content://com.mypackagename.free/table1"); 
```

然后需要查询客户端

```
Cursor table1Cursor = client.query(CONTENT_URI_TABLE1, null, null, null, null); 
```

现在你需要一个函数，它可以从游标创建一个对象，你遍历游标创建项目，然后将它们添加到你的数据库中。在查询表后，您可能已经有了它来创建项目。

```
table1Cursor.moveToFirst();
FancyItem tempItem = providerUtils.createFancyItemFromCursor(table1Cursor); 
```

然后，您使用之前用来执行此操作的任何函数将此临时项添加到新数据库中。

```
 providerUtils.addFancyItem(tempItem); 
```

遍历光标，就是这样。

# java - Java - 从同一个方法/类打开程序、网站或文件夹

> ID：11314237
> 
> 赞同：1
> 
> 时间：2012-07-03T15:28:14.650
> 
> 标签：java, windows, url, process

现在，我有将近一年的 JAVA 经验，但遇到了一个（大）问题！

我正忙于一个程序，它是 Windows 的一种替代开始菜单。它看起来像这样：

> **选项卡 1**
> 
> *JButton* : Google.com *JButton* : GMail.com *JButton* : Google Agenda 等...
> 
> **选项卡 2**
> 
> *JButton* : Word *JButton* : OneNote
> 
> **选项卡 3**
> 
> *JButton* : 坦克世界 *JButton* : BeGone
> 
> **选项卡 4** *JButton*：Xampp *JButton*：文档

* * *

如您所见，我已经用所有按钮填充了所有选项卡。这些按钮来自类 ShortCut 并且该类扩展了 JButton （当然:)）。ShortCut 类有一个 String 巫婆是 URL，比如[http://www.google.com/](http://www.google.com/)。

**我的问题**

我想，如果单击按钮，将打开其中保存的 url 女巫。但我有 2/3 不同的网址：

1.  网站链接（如“http://www.google.nl/”）
2.  程序链接（如“c:\myProgram.jar”）
3.  文件夹链接（如“c:\Users”）

--> 我真正想要的是获得一个可以打开所有这三种链接的函数或类！有人有这样的功能吗？

--> 如果这不可能，有人可以告诉我如何实现这3种url的开放吗？

你真的可以帮助我，因为我坚持这一点！

提前致谢，

戴夫

ps：对不起我的英语不好！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:31:36.720

在这里查看桌面[http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)

# c - 非数字输入导致无限循环

> ID：11314246
> 
> 赞同：2
> 
> 时间：2012-07-03T15:28:46.710
> 
> 标签：c, loops, input, do-while

出于某种原因，如果用户输入了错误的数据类型，例如 'j' 或 '%'，循环将停止要求输入，并且会`"Enter an integer >"`一遍又一遍地显示。如何让程序处理错误的输入？为什么输入非数值会导致这种奇怪的行为？

```
#define SENTINEL 0;
int main(void) {
  int sum = 0; /* The sum of numbers already read */
  int current; /* The number just read */

  do {
    printf("\nEnter an integer > ");
    scanf("%d", &current);
    if (current > SENTINEL)
      sum = sum + current;
  } while (current > SENTINEL);
  printf("\nThe sum is %d\n", sum);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:30:48.177

如果`scanf()`找不到匹配的输入，`current`变量将保持不变：检查返回值`scanf()`：

```
/* scanf() returns the number of assignments made.
   In this case, that should be 1\. */
if (1 != scanf("%d", &current)) break; 
```

如果您希望在无效输入后继续接受输入，则需要读取无效数据，因为它将保留，正如评论中的[pmg](https://stackoverflow.com/users/25324/pmg)`stdin`所指出的那样。一种可能的方法是使用读取输入但不执行赋值的格式说明符：`"%*s"`

```
if (1 != scanf("%d", &current))
{
    scanf("%*s");
}
else
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:30:55.803

One way would be to read the input into a string and then convert the string to the data type you want.

My C is a bit rusty, but I recall using `fgets()` to read the string, and then `sscanf()` to parse/"read" the string into the variables I was interested in.

# solr - 在 Solr 的不同字段中搜索不同的令牌

> ID：11314250
> 
> 赞同：1
> 
> 时间：2012-07-03T15:29:03.283
> 
> 标签：solr, tokenize

我想在 Apache Solr 3.6 中编写一个自定义标记器，它将尝试识别某些类型的标记，并根据它们在不同字段上的类型搜索。

例如，如果搜索是`2in screw`，我将让自定义标记器识别`2in`引用值和度量单位以及`screw`引用类别。

然后，我想将搜索限制为度量字段中的“in”和类别字段中的“screw”。

我意识到这可以通过从外部分解术语然后形成查询并将其传递给 Solr 来完成，但是我想知道完全使用 Solr 分析器完成此操作的最佳方法是什么。

*如果您认为这甚至应该*在 Solr 中完成，或者最好先使用外部标记器准备数据，请告诉我。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:18:56.903

我认为你应该做这两个中的任何一个：

1.  在外部执行此操作并向 solr 发送正确的 url
2.  或在 solr 中但在查询解析器中执行此操作，而不是在标记器中执行此操作

# asp.net - ASP.NET 网页中的注释部分

> ID：11314251
> 
> 赞同：1
> 
> 时间：2012-07-03T15:29:08.147
> 
> 标签：asp.net, webmatrix

我在详细信息页面中创建了一个评论部分，但是当有人在一个特殊页面中评论时，可以在详细信息页面的每一页中看到它。我不知道问题出在哪里。

特别是我陷入了代码中的 foreach 循环。

这是代码：

```
 @{
dynamic item = null;
if(!Request["id"].IsEmpty() && Request["id"].IsInt()) {
var db = Database.Open("Classifieds");
var sql = "SELECT * FROM Items, Categories WHERE Id = @0";
item = db.QuerySingle(sql, Request["id"]);
Page.Title = item.Title + "-" + item.Id;
}

if(IsPost) {
if(Request["name"].IsEmpty()) {
ModelState.AddError("name", "Please provide a name");
}
if(Request["email"].IsEmpty()) {
ModelState.AddError("email", "Please enter your E-mail");
}
if(!Request["email"].IsEmpty() && !Functions.IsValidEmail(Request["email"])) {
ModelState.AddError("email","Please provide a valid email");
}
if(Request["comment"].IsEmpty()) {
ModelState.AddError("comment", "Please fill the comment form");
}
if(!ModelState.IsValid) {
ModelState.AddFormError("Please fix the errors below before submitting your comment");
}

else {
**var db = Database.Open("Classifieds");
var msql = @"INSERT INTO Comments (Name, Email, Comment, DatePosted) VALUES (@0, @1,   @2, GetDate())";
var parameters = new[]{Request["name"],Request["email"],Request["comment"]};
db.Execute(msql, parameters) ;
Response.Redirect("~/Details.cshtml?id=" + item.Id);**
}
}
**var dbs = Database.Open("Classifieds");
var tsql = @"SELECT Id, Name, Email, Comment, DatePosted FROM Comments";
var data = dbs.Query(tsql).OrderByDescending(c => c.Id);**

}

<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title></title>
<script type="text/javascript">
function resetForm() {
document.getElementById("name0").value = "";
document.getElementById("email0").value = "";
document.getElementById("comment0").value = "";
}
</script>
</head>
<body>
@if(item != null) {
<h2>Details</h2>
<h3>@item.Title</h3>
<p>@item.Description</p>
<p>Price: @item.Price.ToString("c")</p>
<p>Condition: @item.Condition</p>
<p>Posted on @item.DatePosted.ToString("D") in the @item.Category category</p>
}

<br><br><hr>

<div>@Html.ValidationSummary(true)</div>

<form id="post-advert" method="post" action="@Href("~/Details.cshtml?id=" + item.Id)">
<div data-href="@Href("~/Details.cshtml?id=" + item.Id)">
**@if(item.Id == Request["id"].AsInt()) {
foreach(var dt in data) {
<div id="namecomment">Posted by @dt.Name at @dt.DatePosted</div><br>
<div id="commentsection">@dt.Comment</div><hr>
Cache.Remove(dt.ToString());
}
}**

</div><br><br><br>

<div><label for="name">Name* : </label></div>

<div><input type="text" name="name" id="name0" value="@Request["name"]">
@Html.ValidationMessage("name")
</div>

<div><label for="email">E-mail* : </label></div>
<div>

<input type="text" name="email" id="email0" value="@Request["email"]">
@Html.ValidationMessage("email")
</div>

<div><label for="comment">Comment* : </label></div>
<div>
<textarea name="comment" cols="40" rows="10" id="comment0" >@Request["comment"]</textarea>
@Html.ValidationMessage("comment")
</div><br>
<div><input type="submit" value="Post Comment"></div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:39:20.780

发生这种情况是因为您没有任何东西可以唯一标识评论的用途。存储/检索您提供的评论时

*   姓名
*   电子邮件
*   评论
*   发布日期

没有指定您要显示的详细信息页面。您应该将您的 Id 添加到表和后续查询中。

# java - 将 ascii 值转换回字符

> ID：11314252
> 
> 赞同：0
> 
> 时间：2012-07-03T15:29:08.940
> 
> 标签：java, char, int, ascii

好的，我有一个字符串，其中包含从 0-9 弓的数字的 ascii 值我想拿那个字符串并将其分解回原来的值

字符串应该看起来像这样：

52 52 54 49 - 空格也是字符串中的字符

我想取现在由 2 个字符 4 和 5 组成的数字 45 我想将它们恢复为原始值 4 但我不知道如何

这是我尝试执行此操作的示例代码-

```
String st = "43 54 21";
int first=st.charAt(0);
int second=st.charAt(1);
int total=first*10+second;

System.out.println((char)total); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T03:52:25.693

```
void convertToString()
{
    char redo;
    int letter;
    int length;
    do{
    cout<< "How long is your word \n";
    cin >> length;

    cout << "Type in the letter values \n";

        for (int x = 0; x < length; x++)
    {
        cin >> letter;
        cout << char (letter);
    }
        cout << "\n To enter another word hit R" << endl;
        cin >> redo;
    }while (redo == 'R');

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-09T04:27:52.337

您可以使用扫描仪实现此目的：

```
public String parseBytes(String s){
 StringBuilder sb = new StringBuilder(1000);
 Scanner scanner = new Scanner(s);
 while(scanner.hasNext()){
  char ch = (char)scanner.nextInt();
  sb.append(ch);
 }
return sb.toString();
} 
```

# c++ - 在 Windows 上编译+分发 Linux 代码

> ID：11314253
> 
> 赞同：2
> 
> 时间：2012-07-03T15:29:08.697
> 
> 标签：c++, python, windows, linux, porting

我有一个更大的代码在 Linux 中运行，用 c++ (c++11) 和 python 编写，并使用许多库（VTK、boost、pyqt、OpenGL）并编译为 python 扩展模块（和这些模块的插件）和纯 python 模块（主程序是一个python脚本）。该代码是跨平台的（有一些例外，例如`dlopen`，`gettimeofday`可以通过#ifdef 替换为 Windows 等效项）和编译器无关（它使用 编译`-ansi`，并且一些特定于编译器的东西`__attribute__`也可以，希望，被替换，如果需要的话）。

我正在尝试在 Windows 上进行编译，但我完全不知道应该如何进行（我对 Linux 的开发经验相当丰富，但自 90 年代后期以来我就没有使用过 Windows）。

我应该选择 mingw 还是 MSVC 编译器？我会更好地交叉编译吗？我是否需要通过从网上下载安装程序来“手动”安装依赖项？我也需要编译这些吗？是否有包含文件的标准路径，或者是否都可以检测到？如果我设法编译它，如何制作某种包（它是纯 python 模块和共享库的捆绑包）？

我假设我不是第一个试图了解它在 Windows 下如何工作的人（我认为我被包管理器和 Linux 中所有对开发人员友好的东西宠坏了），也许在某个地方有一个有用的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:46:18.620

我认为您在这里的选择取决于您在 Windows 下编译的目标。您是否准备让其他可以选择他们的开发平台的开发人员参与进来？您想使用不同的编译器来生成额外的警告吗？您是否希望在 Windows 平台上部署应用程序？提出这些问题应该可以帮助您做出更明智的决定。

这里有一些建议...

*   尝试 MSVC 并没有什么坏处。2010 express edition 是最后一个支持标准 C++ 开发的免费版本。未来的快速版本仅适用于“Metro”应用程序。我会根据你的 Windows 开发目标权衡它并做出相应的选择。
*   对于跨平台构建，看看您是否可以实现标准化的构建系统，例如 CMake 或 SCons。
*   无论最终决定如何，我都不会附带依赖项。开源要求开发人员单独下载依赖项是标准做法。只要确保包含当前稳定版本与您的应用程序不向后兼容的任何内容的版本信息。（或者更好的是，修复这些问题，以便您从 3rd 方代码中的最新修复程序中受益。）Python 至少应该是开发人员的责任。它是要安装的，pywin32 扩展将在 Windows 安装的系统注册表中注册 COM 项。
*   至于招募开源开发人员，您可能会发现要求在开发人员的机器上安装 MinGW 会阻止一些专门的 MSVC 用户从事该项目。

# java - 注释如何访问参数信息？

> ID：11314257
> 
> 赞同：2
> 
> 时间：2012-07-03T15:29:13.000
> 
> 标签：java, reflection, spring-mvc

在 spring-mvc 中，可以使用 @RequestParam 构建对控制器调用的查询。如果您不提供该值，则默认为方法参数名称。

例子 ：

```
@RequestMapping("/hello")
@ResponseBody
public String hello(@RequestParam String name)
{
    return "hello "+name; 
} 
```

映射到

```
/hello?name=x 
```

我的问题是这个。spring 如何绑定这些信息（甚至访问它）？在运行时没有丢弃参数名称吗？它是否使用像 paranamer 这样的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:46:49.120

仅当您在[此处](https://stackoverflow.com/a/2243328/1089998)编译类时启用了调试功能，它才有效。然后编译器保留信息。

作为最后一个春季版本的一部分，他们将其扩展为包括构造函数。对我来说似乎很糟糕 - 如果您忘记添加调试选项，那么您的应用程序将停止工作！

因此，一种可能的方法（将调试设置为 true）似乎是使用字节码操作，并且有使用 asm 时获取它们[的](https://stackoverflow.com/a/2729907/1089998)示例。我不知道这是否与 Spring 的做法相同。

# iphone - 为什么dismissViewControllerAnimated后父框架大小不一样？

> ID：11314258
> 
> 赞同：6
> 
> 时间：2012-07-03T15:29:16.320
> 
> 标签：iphone, objective-c, ios, presentmodalviewcontroller

我已经从苹果下载了 PageControl 示例代码。这是一个带有`UIPageControl`. 我已经改变了它，以便`UIScrollView`有不同的观点。对于我要添加的每个视图，我都创建了`UINavigationController`a`rootViewController`作为 or 的子`UIViewController`类`UITableViewController`。然后我添加到`UIScrollView`, 的视图中`navigationController`。

假设我现在处于第一个视图。我想展示一个模态视图控制器。当我关闭它时，父视图控制器（`HomeViewController`在我的示例中）处于全屏状态，而不是之前的大小，这将在底部显示页面控件。我可以让它正常工作的唯一方法是在关闭后调整框架的大小，但这是一个糟糕的用户体验，因为它是在显示父视图控制器之后调用的。`HomeViewController`关于在关闭模式视图控制器时如何避免调整框架大小的任何想法？

```
-(void)dismissMVC:(id)sender {
    CGRect frame = self.view.frame;
    [self dismissViewControllerAnimated:YES completion:^{
        self.view.frame = frame;
    }];    
}

- (void)loadScrollViewWithPage:(int)page
{
if (page < 0)
    return;
if (page >= kNumberOfPages)
    return;

// replace the placeholder if necessary
switch (page) {
    case Home:
    {
        HomeViewController *controller = [viewControllers objectAtIndex:page];

        if ((NSNull *)controller == [NSNull null])
        {
            controller = [[HomeViewController alloc] initWithPageNumber:page];
            [viewControllers replaceObjectAtIndex:page withObject:controller];
            [controller release];
        }

        // add the controller's view to the scroll view
        if (controller.view.superview == nil)
        {
            UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller];
            navController.navigationBar.barStyle = UIBarStyleBlack;
            [navController setNavigationBarHidden:YES];
            CGRect frame = scrollView.frame;
            frame.origin.x = frame.size.width * page;
            frame.origin.y = 20;
            frame.size.height = frame.size.height - 20;
            navController.view.frame = frame;
            controller.view.frame = frame;
            [controller setNavController:navController];

            [scrollView addSubview:navController.view];
            [navController release];
        }
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T20:03:19.783

当将 veiwControllers 推送到导航堆栈时，由于内存不足，可能会释放不是当前正在显示的视图的视图控制器。

如果您在 appdelegate 或您最初推送的 viewcontroller 实例中维护 HomeViewController 的实例，则可以调用 HomeViewController.view 强制加载它的视图，然后在调用dismissViewControllerAnimated之前为其提供所需的帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T10:36:20.977

将viewcontroller的view添加为subview时，还需要添加为childViewController。

在您的代码中：

[scrollView addSubview:navController.view];

缺少的行：[scrollView addChildViewController:navController];

# java - 有没有办法将数组名称作为字符串获取，以便我可以在我的程序中调用正确的名称？

> ID：11314260
> 
> 赞同：0
> 
> 时间：2012-07-03T15:29:21.630
> 
> 标签：java, string, multidimensional-array, nested-loops

我需要能够搜索多个二维数组并搜索数组中的数据，并将其与调用时放入方法中的数据进行比较。但是，我尝试使用`.getClass().getSimpleName()`仅返回`int[][]`我正在搜索的所有数组都属于这种类型，因此它不会帮助我区分它们。

我正在使用这一系列代码来确定要调用的正确数组：

```
 public void tempSelection78 (int fRate, int wbTemp, int rcTons, int a, int r)
  {
    setTitle(TONS_05_78.getClass().getSimpleName());
     for (int model = 0; model < 7; model++)
    {
      String tonChart = tons78FCharts[model];
      for (int col = 0; col < 9; col++)
      {
        for (int row = 0; row < 8; row++)
        {
          int t = 0;

          if (tonChart.equals(TONS_03_78.getClass().getSimpleName()))
          {
            t = TONS_03_78[col][row];
          }
          if (tonChart.equals(TONS_04_78.getClass().getSimpleName()))
          {
            t = TONS_04_78[col][row];
          } 
          if (tonChart.equals(TONS_05_78.getClass().getSimpleName()))
          {
            t = TONS_05_78[col][row];
          }
          if (tonChart.equals(TONS_07_78.getClass().getSimpleName()))
          {
            t = TONS_07_78[col][row];
          }
          if (tonChart.equals(TONS_09_78.getClass().getSimpleName()))
          {
            t = TONS_09_78[col][row];
          }
          if (tonChart.equals(TONS_11_78.getClass().getSimpleName()))
          {
            t = TONS_11_78[col][row];
          }
          if (tonChart.equals(TONS_15_78.getClass().getSimpleName()))
          {
            t = TONS_15_78[col][row];
          }
          if (rcTons == t)
          {
            tableButton = new JButton(new ImageIcon(tablesFor78[model], tablesFor78[model]));
            break;
          }
          else 
          {
            tableButton = new JButton(new ImageIcon("CANNOT_FIND_MODEL.GIF", "SCROLL"));
          }
        }
      }
    }
    for (int model = 0; model < 7; model++)
    {
      String flowChart = flow78FCharts[model];
      for (int col = 0; col < 9; col++)
      {
        for (int row = 0; row < 8; row++)
        {
          int t = 0;
          if (flowChart.equals(FLOW_03_78.getClass().getSimpleName()))
          {
            t = FLOW_03_78[col][row];
          }
          if (flowChart.equals(FLOW_04_78.getClass().getSimpleName()))
          {
            t = FLOW_04_78[col][row];
          } 
          if (flowChart.equals(FLOW_05_78.getClass().getSimpleName()))
          {
            t = FLOW_05_78[col][row];
          }
          if (flowChart.equals(FLOW_07_78.getClass().getSimpleName()))
          {
            t = FLOW_07_78[col][row];
          }
          if (flowChart.equals(FLOW_09_78.getClass().getSimpleName()))
          {
            t = FLOW_09_78[col][row];
          }
          if (flowChart.equals(FLOW_11_78.getClass().getSimpleName()))
          {
            t = FLOW_11_78[col][row];
          }
          if (flowChart.equals(FLOW_15_78.getClass().getSimpleName()))
          {
            t = FLOW_15_78[col][row];
          }
          if (fRate == t)
          {
            tableButton = new JButton(new ImageIcon(tablesFor78[model], tablesFor78[model]));
            break;
          }
          else 
          {
            tableButton = new JButton(new ImageIcon("CANNOT_FIND_MODEL.GIF", "SCROLL"));
          }
        }
      }
    } 
```

我想要发生的事情是`tonChart`设置为包含可能的二维数组的字符串之一，以通过它进行搜索。然而，`.getClass().getSimpleName`永远不会被设置为除此之外的任何东西，`int[][]`并导致程序总是在每个三重嵌套循环结束时转移到 else 语句。

有什么建议么？

以下是调用的数组的示例：

```
public final int [][] TONS_03_78 = 
  {{27, 32, 37, 41, 45, 48, -1, -1, -1},
    {-1, 41, 45, 50, 55, 59, 64, 68, 70},
    {-1, 49, 55, 60, 65, 70, 75, 80, 85}, 
    {-1, -1, 64, 70, 75, 81, 86, 91, 97},
    {-1, -1, -1, 80, 86, 92, 98, 103, 109},
    {-1, -1, -1, -1, 97, 103, 109, 116, 122},
    {-1, -1, -1, -1, -1, 114, 122, 128, 135},
    {-1, -1, -1, -1, -1, -1, -1, -1, -1}};
  public final int [][] FLOW_03_78 = 
  {{205, 160, 137, 122, 112, 103, -1, -1, -1},
    {-1, 203, 170, 150, 137, 127, 120, 113, 105},
    {-1, 245, 205, 180, 163, 150, 140, 133, 127}, 
    {-1, -1, 240, 210, 188, 173, 162, 152, 145},
    {-1, -1, -1, 240, 215, 197, 183, 172, 163},
    {-1, -1, -1, -1, 242, 220, 205, 193, 183},
    {-1, -1, -1, -1, -1, 245, 228, 213, 202},
    {-1, -1, -1, -1, -1, -1, -1, -1, -1}}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:33:38.470

您可以将数组放在地图中：`Map<String, int[][]>`

然后你可以用正确的对填充你的地图`map.put("TONS_09_78", TONS_09_78)`：

而你的一系列 if 变成（+一些空处理）：

```
return map.get(tonChart)[col][row]; 
```

现在您的设计看起来很可疑，并且可能有更好的方法来首先声明您的数组，这将使处理它们更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:36:35.460

我会改变你的范式。

我不完全确定你的具体问题是什么，所以下面的方法可能会改变，但如果我是你，我会构建一个包含二维数组和某种标识符的类或结构。（它可以是一个字符串、一个整数、一个枚举，或者任何你想要的）。

这种方法不仅会减少您的代码大小，而且会使其对您和我们都更具可读性。

# draw2d-js - 如何在 diamond 中创建两个输入端口和两个输出端口？

> ID：11314269
> 
> 赞同：1
> 
> 时间：2012-07-03T15:29:53.837
> 
> 标签：draw2d-js, graphiti-js

我想创建两个输入端口和两个输出端口，我已经尝试过菱形：

```
this.createPort("input");
this.createPort("input");
this.createPort("output");
this.createPort("output"); 
```

但是上面的代码不能按要求工作，它确实创建了端口，但是在这里和那里，而不是在钻石的顶点上。所以请任何人建议我如何做到这一点。

我也试过这个例子：[http](http://draw2d.org/graphiti/jsdoc/#!/example/galerie_shape_analog) ://draw2d.org/graphiti/jsdoc/#!/example/galerie_shape_analog ，（恢复桥的例子类似于菱形）但这个例子现在包含混合端口我想要的是输入和输出端口.

因此，如果有人有任何想法，请告诉我。在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:42:22.007

解决方案是使用**Locator**。定位器响应于相对于其父形状布局端口。

在您的示例中，您没有在“createPort”方法中使用定位器......在这种情况下，端口将以默认行为进行布局。

-> 左侧的 InputPorts

-> 右侧的输出端口

这里是一个形状的 init 方法的示例，它添加了一些带有定位器的端口。

```
/**
 * @constructor
 * Create a new instance
 */
init:function(){
   this._super();

   this.inputLocator = new this.MyInputPortLocator();
   this.outputLocator = new this.MyOutputPortLocator();

   this.createPort("hybrid",this.inputLocator);
   this.createPort("hybrid",this.inputLocator);

   this.createPort("hybrid",this.outputLocator);
  this.createPort("hybrid",this.outputLocator); 
```

},

简单定位器的代码：

```
// custom locator for the special design of the ResistorBridge Input area
MyInputPortLocator : graphiti.layout.locator.Locator.extend({
    init:function( ){
      this._super();
    },    
    relocate:function(index, figure){
        var w = figure.getParent().getWidth();
        var h = figure.getParent().getHeight();

        figure.setPosition(w/2+1, h*index);
    }
}), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:32:41.330

```
MyInputPortLocator : graphiti.layout.locator.Locator.extend({
    init:function( ){
      this._super();
    },    
    relocate:function(index, figure){
        var w = figure.getParent().getWidth();
        var h = figure.getParent().getHeight();

        figure.setPosition(w/2+1, h*index);
    }
}),

MyOutputPortLocator : graphiti.layout.locator.Locator.extend({
    init:function( ){
      this._super();
    },    
    relocate:function(index, figure){
        var w = figure.getParent().getWidth();
        var h = figure.getParent().getHeight();

        figure.setPosition(w*(index-2), h/2);
    }
}),

init:function(){
    this._super();

    this.inputLocator = new this.MyInputPortLocator();
    this.outputLocator = new this.MyOutputPortLocator();

    this.createPort("input",this.inputLocator);
    this.createPort("input",this.inputLocator);

    this.createPort("output",this.outputLocator);
    this.createPort("output",this.outputLocator);
} 
```

我已经尝试过这样的事情，但是当我在所有地方使用“混合”端口时，上面的代码工作正常，但是当我使用两个输入和两个输出端口时，端口对齐会失真，请更正我上面的代码，以便所有端口都在它们各自的钻石的顶点。

# awk - 使用 awk substr

> ID：11314271
> 
> 赞同：2
> 
> 时间：2012-07-03T15:30:00.873
> 
> 标签：awk

我有这样的文件：

```
1       17      A       G       R:560:500:60:10.71%:1.6329E-19  Pass:1.0:276:0:57:0:1E0 15      17      0       0       R:24:20:4:16.67%:5.461E-2 R:22:20:2:9.09%:2.4419E-1 R:27:24:3:11.11%:1.1792E-1 R:26:23:3:11.54%:1.1765E-1 A:16:16:0:0%:1E0 A:23:23:0:0%:1E0 A:11:10:1:9.09%:5E-1
1       36      C       T       Y:560:499:61:10.89%:7.7026E-20  Pass:1.0:275:0:58:0:1E0 15      17      0       0       Y:24:20:4:16.67%:5.461E-2 Y:22:20:2:9.09%:2.4419E-1 Y:27:24:3:11.11%:1.1792E-1 Y:26:23:3:11.54%:1.1765E-1 C:16:16:0:0%:1E0 C:23:23:0:0%:1E0 C:11:10:1:9.09%:5E-1 
```

我以前一直在使用下面的 awk on liner 从 $11 开始提取每个字段的第一个字符。

```
awk '{n=11; while (n<18) {{$n = substr($n, 0, 1)} n++} print $0}' 
```

我正在寻找一种简单的方法来修改它，以便我只能从这些字段中提取百分比（字段第 4 个冒号之后的值）。输出将如下所示：

```
1       17      A       G       R:560:500:60:10.71%:1.6329E-19  Pass:1.0:276:0:57:0:1E0 15      17      0       0       16.67% 9.09% 11.11% 11.54% 0% 0% 9.09%
1       36      C       T       Y:560:499:61:10.89%:7.7026E-20  Pass:1.0:275:0:58:0:1E0 15      17      0       0       16.67% 9.09% 11.11% 11.54% 0% 0% 9.09% 
```

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:36:20.937

这将打印包括“%”在内的百分比：

```
split($5, arr, ":"); print arr[5] 
```

调整`split()`语句中的字段编号以适合您的数据。

您不需要使用`while`循环并自己管理增量变量，只需使用`for`循环即可。这是使用上述技术和`for`循环的完整工作脚本：

```
awk 'BEGIN {OFS = "\t"} {for (n = 11; n < 18; n++) {split($n, arr, ":"); $n = arr[5]}; print $0}' 
```

样本输出：

```
1   17  A   G   R:560:500:60:10.71%:1.6329E-19  Pass:1.0:276:0:57:0:1E0 15  17  0   0   16.67%  9.09%   11.11%  11.54%  0%  0%  9.09%
1   36  C   T   Y:560:499:61:10.89%:7.7026E-20  Pass:1.0:275:0:58:0:1E0 15  17  0   0   16.67%  9.09%   11.11%  11.54%  0%  0%  9.09% 
```

# android - 如何停止和启动 ProgressBar

> ID：11314272
> 
> 赞同：34
> 
> 时间：2012-07-03T15:30:02.123
> 
> 标签：android, progress-bar

我无法阻止`ProgressBar`. 它的风格是`ProgressBarStylesmall`。我怎样才能开始和停止一个圆形，小`ProgressBar`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-07-20T03:55:25.117

默认情况下，您可以让 progressBar 可见并在不需要时将其隐藏，如下所示：

```
progressBar.setVisibility(View.GONE); 
```

如果您想以编程方式控制它，那么您可以通过以下方式实现：

```
progressBar.setVisibility(View.VISIBLE); //to show
progressBar.setVisibility(View.GONE); // to hide 
```

你甚至可以使用 ProgressDialog：

```
private ProgressDialog progressDialog;
...

public void showProgressDialog() {
    if (progressDialog == null) {
        progressDialog = new ProgressDialog(PhotographerDetailActivity.this);
        progressDialog.setIndeterminate(true);
        progressDialog.setCancelable(false);
    }
    progressDialog.setMessage("your message");
    progressDialog.show();
}

public void dismissProgressDialog() {
    if (progressDialog != null ) {
        progressDialog.dismiss();
    } 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T09:50:28.603

您需要为此处理 AsyncTasks。

```
/*
 * We set the visibility to true. If it was already visible 
 * there's no need of doing this but we do it for the sake of readability.
 */
final ProgressBar progressBar = (ProgressBar)findViewById(R.id.progressBar1);
progressBar.setVisibility(View.VISIBLE);
new AsyncTask<Void,Void,Void>(){

//The variables you need to set go here

    @Override
    protected Void doInBackground(final Void... params){
         // Do your loading here. Don't touch any views from here, and then return null
         return null;
    }

    @Override
    protected void onPostExecute(final Void result){
         // Update your views here
         progressBar.setVisibility(View.GONE);
    }
}.execute() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T16:14:51.497

我不知道这是否有帮助，但您可以使用`ProgressDialog`. 假设您有一个可以使用的跑步`ProgressDialog`名称。只需确保您正在解雇的实例是实际显示的实例。你可以用. 开始一个：`progressDialog``progressDialog.dismiss();``ProgressDialog``ProgressDialog``progressDialog.isShowing();``ProgressDialog`

```
progressDialog = ProgressDialog
                    .show(myActivityContext,
                            "ProgressDialog Title",
                                "ProgressDialog Body"); 
```

默认情况下，`ProgressDialog`用户界面是圆形的，就像您需要的一样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-20T03:36:22.717

隐藏进度条： `progressBar.setVisibility(View.INVISIBLE);`

显示进度条： `progressBar.setVisibility(View.VISIBLE);`

阅读 GONE VS。[在这里](https://stackoverflow.com/questions/11556607/android-difference-between-invisible-and-gone)看不见

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-12T11:46:12.617

有“不确定”的进度条，它会旋转和“确定”，而不会。坚持后者，你会没事的。要使其“确定”，请将进度属性添加到它的 xml 元素中，设置

```
 style="?android:attr/progressBarStyleHorizontal"
        android:indeterminate="false" 
```

[Android Circular 确定 ProgressBar](https://stackoverflow.com/questions/12776587/android-circular-determinate-progressbar/37160724)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-30T15:24:40.117

遇到了这个较老的话题，并注意到每个人都在谈论 ProgressDialog。需要注意的是 ProgressDialog 已被弃用，而应使用 ProgressBar 类。

来自安卓文档：

> ## 避免 ProgressDialog
> 
> Android 包含另一个名为 ProgressDialog 的对话框类，它显示带有进度条的对话框。此小部件已弃用，因为它会阻止用户在显示进度时与应用程序交互。如果您需要指示加载或不确定的进度，您应该遵循[Progress & Activity](https://developer.android.com/design/building-blocks/progress.html)的设计指南并在布局中使用 ProgressBar，而不是使用 ProgressDialog [。](https://developer.android.com/reference/android/app/ProgressDialog.html)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-06-12T04:14:07.723

任务开始时 setAlpha 值为 1 并在任务完成时变回 0 但 setAlpha 仅适用于 API 级别 11 或更高版本

# c# - 服务器端的持久数据

> ID：11314274
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:03.610
> 
> 标签：c#, .net, persistent

我正在使用 C# 代码隐藏页面创建一个网络服务器。我想要的是让一个用户在页面上查看和提交一些东西，并且数据存储在服务器端，以一种持久的方式，并且另一个用户可以查看这些数据。

我是否仅限于将其保存到平面文件或数据库中，或者我可以在 C# 或 .NET 中为此目的使用某种功能，例如永久跨会话变量或其他东西？（对于每个不同的用户来说，普通的静态变量会有所不同，对吧？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:35:42.433

任何静态变量对所有用户都是通用的，但您应该使用 Application. 它类似于 Session，但对所有用户都是通用的。如果您需要应用程序重置的持久性，请使用数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:35:13.433

您可以测试这些缓存变量

```
Cache["Key"] = yourValue;

Application["Key"] = yourValue; 
```

您有另一个与会话关联的缓存，但它不是全局的：

```
Session["Key"] = value; 
```

您的页面中有另一个缓存

```
ViewState["Key"] = value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:36:18.720

如果您没有太多数据，请将其存储到内存中，然后使用`XmlSerializer`或将其写入磁盘`BinaryFormatter`。

您将希望将数据作为应用程序单例存储在内存中，可以从您的页面集中的任何位置访问。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-03T15:33:48.620

> 我是否仅限于将其保存到平面文件或数据库中，或者我是否可以在 C# 或 .NET 中为此目的使用某种功能？

不能有其他功能。请看，一个平面文件（即您编写的文件或其他服务编写的文件）和数据库（可以是 SQL 数据库、文档数据库或任何其他形式）在逻辑上涵盖了持久化数据的所有可能性。从理论上讲，我认为不可能有任何其他方式不属于平面文件（即您管理的文件）或数据库（某个驱动程序或服务器进程管理的文件）。

你问的是“我有一台收音机，它可以打开或关闭。它还能处于其他状态吗？” - 坏消息，不，它是打开还是关闭。

.NET 框架中的任何功能都可以归结为您最后提到的两个功能中的任何一个。

# ajax - JSF 更新/重新渲染 ui：使用 ajax 重复数据

> ID：11314275
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:04.307
> 
> 标签：ajax, jsf, primefaces

我的这个 search.xhtml 页面在表单中有一些属性。有一个搜索按钮，它通过支持 bean 中的方法从数据库中获取列表。我在 ui:repeat 中使用的列表。现在，当用户单击搜索按钮时，我希望视图（xhtml）中的列表和数据被 ajax 更新。

到目前为止，我已经尝试过了。我的 search.xhtml 页面

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="../Styles/homepage-style.css" />
        <link rel="stylesheet" type="text/css" href="../Styles/profile.css" />
        <title>Shadi Bandhan | We find the best match for you</title>

        <script src="../jquery/jquery-1.7.2.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){  
                // all the code goes here! including functions!!!  

                $('#loading').fadeOut();

                $('div#searchResults').hide();
                $('div#searchResults').fadeIn(3000);
                //                $('div#searchResults').fadeIn(3000);

                function callme(){
                    $('#loading').fadeIn(3000);
                    $('div#searchResults').fadeOut(1000);
                    $('div#searchResults').fadeIn(); 
                }
                function showLoading(){  
                    $('#loading')  
                    .css({visibility:"visible"})  
                    .css({opacity:"1"})  
                    .css({display:"block"})  
                    ;  
                }

            });

        </script>
    </h:head>

    <h:body>

        <div id="header">
            <ui:insert name="header" >
                <ui:include src="header.xhtml" />
            </ui:insert>
        </div>

        <div id="main-content">
            <p:growl autoUpdate="true" />

            <div id="left-pane">

                <div id="profile-info-area">
                    <div id="profile-info">

                        <span>
                            <img class="profileImg" src="../#{myProfileManagedBean.profileImgPath}" width="185" height="200" />
                        </span>

                        <center>
                            <p:commandButton type="submit" value="Upload Photo" action="#{profileAlbumManagedBean.getUserAlbum}" styleClass="upload-photo-btn" />
                        </center>

                        <p:commandLink value="My Photos" action="#{profileAlbumManagedBean.getUserAlbum}" /> <br />
                        <a href="friends.xhtml">My Friends</a> <br />
                        <a href="planPackages.xhtml">My Packages</a> <br />
                        <p:commandLink value="Privacy Settings" action="#{myProfileManagedBean.getProfileSetting}" /> <br />
                        <a href="#">FAQs</a>

                    </div>

                    <div id="pesonal-attributes">

                        <h:form id="searchForm2">
                            <table width="190" height="200" border="0">
                                <tr>
                                    <td>Age:</td>
                                    <td><select name="select" class="search-select" >
                                            <option>18-22</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Religion:</td>
                                    <td><select name="select2" class="search-select" >
                                            <option>Islam</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Cast:</td>
                                    <td><select name="select3" class="search-select" >
                                            <option>Malik</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Country:</td>
                                    <td><select name="select4" class="search-select" >
                                            <option>Pakistan</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>City:</td>
                                    <td><select name="select5" class="search-select" >
                                            <option>18-22</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Gender:</td>
                                    <td><select name="select6" class="search-select" >
                                            <option>18-22</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Education</td>
                                    <td><select name="select7" class="search-select" >
                                            <option>18-22</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Marital Status</td>
                                    <td><select name="select8" class="search-select" >
                                            <option>Single</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Interests</td>
                                    <td><select name="select9" class="search-select">
                                            <option>Reading</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Family</td>
                                    <td><select name="select10" class="search-select" >
                                            <option>Simple</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>Occupation</td>
                                    <td><select name="select11" class="search-select" >
                                            <option>Doctor</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td>

                                        <p:commandButton id="search" onclick="callme();" value="Search" actionListener="#{searchManagedBean.searchExactMatch2}" styleClass="p-search-btn" >

                                            <f:ajax render=":searchResultsForm" />
                                        </p:commandButton>
                                    </td>
                                    <td>

                                        <p:commandButton value="Reset" styleClass="p-search-btn" />
                                    </td>
                                </tr>
                            </table>
                        </h:form>

                    </div>
                </div>

                <div id="home-main-area">

                    <div id="interests-expressions-wrapper">

                        <div id="interests-expressions-header">

                            <div id="search-heading">
                                Search Matches
                            </div>

                            <div id="m-search">

                                <div id="loading">
                                    <p>Please wait while we search</p><img src="../images/loading.gif" width="30" height="30" />
                                </div>

                            </div>

                        </div>

                        <div id="searchResults">

                            <h:form id="searchResultsForm">

                                <h:panelGroup>

                                    <ui:repeat id="userSearchResults" var="user" value="#{searchManagedBean.searchResults}">

                                        <center><img class="h-diff" src="../images/differentiator-profile.jpg" width="437" height="1" /></center>
                                        <div class="intExpression">
                                            <div id="senderImg">
                                                <img class="senderImg" src="../images/profile-pic.jpg" width="50" height="50" />
                                            </div>

                                            <div id="intExpression-area">

                                                <div id="senderName">
                                                    <p:commandLink id="senderNameLink" styleClass="senderName" value="#{user.profileFullname}" action="#{myProfileManagedBean.getOtherProfileInfo(userFriend.profileId)}"></p:commandLink>
                                                </div>
                                                <div id="intExpression-body">
                                                    #{user.profileAge} <br />
                                                    #{user.profileReligion} <br />
                                                    #{user.profileLocation} <br />

                                                </div>

                                            </div>
                                        </div>
                                    </ui:repeat>
                                </h:panelGroup>

                                <p:blockUI block="userSearchResults" trigger=":searchForm2:search" /> 

                            </h:form>

                        </div>
                    </div>

                </div>
            </div>

            <div id="right-pane">
                <ui:insert name="right-pane" >
                    <ui:include src="right-pane.xhtml" />
                </ui:insert>
            </div>
        </div>

        <div id="footer">
            <ui:insert name="footer" >
                <ui:include src="footer.xhtml" />
            </ui:insert>
        </div>

    </h:body>
</html> 
```

在 SO 上搜索了几个小时，但就是不知道该怎么做。使用 JSF 2.0、Primefaces 3.3、休眠 3

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:53:21.643

您正在混合 primefaces 和核心 JSF 方法。尝试坚持使用 primefaces 开始并替换

```
<p:commandButton id="search" onclick="callme();" value="Search" actionListener="#{searchManagedBean.searchExactMatch2}" styleClass="p-search-btn" >
  <f:ajax render=":searchResultsForm" />
</p:commandButton> 
```

和

```
<p:commandButton id="search" onclick="callme();return true;" value="Search" actionListener="#{searchManagedBean.searchExactMatch2}" styleClass="p-search-btn" update=":searchResultsForm"/> 
```

I have added return true to onclick to make sure the event won't be ignored and used `update` attribute instead of `f:ajax` tag. I'm not 100% sure about the colon in primefaces `update`, you may also try without it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:41:43.163

Replace *ui:repeat* by *c:forEach*

Old:

```
<ui:repeat id="userSearchResults" var="user" value="#{searchManagedBean.searchResults}">
..
</ui:repeat> 
```

New:

```
<c:forEach id="userSearchResults" var="user" items="#{searchManagedBean.searchResults}" >
..
</c:forEach> 
```

Namespace definition for *c:forEach*:

```
xmlns:c="http://java.sun.com/jsp/jstl/core" 
```

# hosting - 在托管空间中保存不需要的文件

> ID：11314277
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:08.613
> 
> 标签：hosting

我有一个网站为我提供 200GB 的托管空间。所有文件都在`/public_html/`文件夹下，我只使用其中的 1-2MB。所以，我保存了许多有用的文件 [比如我的图片、视频，其中包含大约。15GB；这样我就永远不会失去它们。这些文件也保存在下面`/public_html`，我已将其设为私有。]。我只是想问一下，这是否会以任何方式影响我网站的加载时间或带宽。我认为不会；但我仍然想在这里问它，因为我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:37:36.420

*   我不会在我的共享网络托管服务器上保存任何敏感/私人的东西。托管服务器受到损害并不少见。因此，您不想在其中存储任何私人文件。
*   如果您真的想将您的托管空间用作备份空间，请不要将它们存储在`/public_html`. 理想情况下，其中的任何内容都可以通过 URL 寻址。不过，我不确定您是如何将其设为私有的。考虑将其提高一级（在外部的新文件夹中`/public_html`）。这样，它们就在文档根目录之外，并且无法通过 URL 访问。
*   现在回答您的问题 - 不，它不会影响您网站的加载时间和/或带宽。

# facebook-graph-api - 组事件 - 访问权限和图形 API

> ID：11314278
> 
> 赞同：1
> 
> 时间：2012-07-03T15:30:10.500
> 
> 标签：facebook-graph-api, facebook-group

我在获取 Facebook 群组的事件数据时遇到问题。我正在使用应用程序访问密钥来验证访问权限。

我的问题是：

1.  Graph API 似乎没有将 Group Event 数据作为其 FQL 的一部分。这是否意味着不打算提取此数据。

2.  我尝试由组所有者交替拉取： `FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid='.''.')`，但访问权限不正确。这是否意味着我需要一个用户密钥，或者如果他们“授权应用程序”就足够了吗？（我怎样才能找到他们验证应用程序的屏幕）？

# php - 记录每个脚本的 PHP 错误

> ID：11314279
> 
> 赞同：1
> 
> 时间：2012-07-03T15:30:12.320
> 
> 标签：php, logging, error-handling

有没有一种简单的方法可以将 PHP 错误记录到特定脚本的日志中。所以说我有 5 个不同的脚本，每个脚本都有自己的错误日志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:35:42.827

您可以结合使用 ( PHP docu ) 和`ini_set()`( [PHP docu](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-log) [)](http://php.net/manual/en/function.ini-set.php)`error_log`来修改日志文件的名称：

```
ini_set( 'error_log', 'yourFileName' ); 
```

如果您在每个脚本中指定不同的文件，您将拥有各自的日志文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T15:33:43.310

是的，您可以为每个脚本设置单独的**set_error_handler 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:37:08.167

请参阅[error_log](http://www.php.net/manual/en/function.error-log.php)。除此之外，您可以使用`ini_set`（参见[Sirko 的回答](https://stackoverflow.com/a/11314386/1494505)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:33:03.570

您可以简单地自己创建它。 [http://php.net/manual/de/function.file-put-contents.php](http://php.net/manual/de/function.file-put-contents.php)

只需构建一个小函数并在 5 个脚本中的每一个中调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T15:37:05.343

如果您纯粹在 Apache 下执行此操作，则可以将以下内容组合在一起：

```
<Location /path/to/script1.php>
   php_value error_log script1.log
</Location>

<Location /path/to/script2.php>
    php_value error_log script2.log
</Location>

etc... 
```

在您的 .htaccess/httpd.conf 中。

# java - Tomcat 管理器未显示嵌入式版本

> ID：11314282
> 
> 赞同：2
> 
> 时间：2012-07-03T15:30:14.187
> 
> 标签：java, maven, tomcat6, maven-tomcat-plugin

我正在使用 tomcat maven 插件，版本 2.0-beta-1 和 tomcat6 版本。我可以使用命令

```
mvn tomcat6:run 
```

我可以访问我的网络应用程序。但我无法访问管理器应用程序。我尝试时得到一个空白页：

```
http://localhost:8080/manager
http://localhost:8080/manager/html 
```

我试图配置 tomcat-users.xml 文件，但仍然没有...

这会是关机命令不起作用的原因吗？

```
mvn tomcat6:shutdown 
```

知道为什么它不起作用吗？我已经用谷歌搜索了很长时间，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:31:26.900

当然@olamy 是正确的（他应该知道，他构建了它），因为 Tomcat Maven 插件不运行管理器应用程序。

但是，如果您只想在 Eclipse 中运行 WAR 并对 servlet 容器进行大量控制，我强烈建议您在简单的 Java 命令行应用程序中运行嵌入式 Tomcat。您甚至可以调试您的 WAR 代码，当它退出时，它也会关闭 Tomcat。

我写了一个小包装应用程序来满足我的需求（它也托管 Jetty 和 Glassfish，但不完全）： [https ://bitbucket.org/mckamey/war-bootstrap](https://bitbucket.org/mckamey/war-bootstrap)

我使用的专门设置和运行 Tomcat 的代码基本上如下所示：

```
Tomcat server = new Tomcat();
server.setBaseDir(new File("tomcat").getCanonicalPath());
server.setPort(port);

// I have a Map<String,String> of CONTEXT=WAR pairs
for (String contextPath : contexts.keySet()) {
    String warPath = contexts.get(contextPath);
    server.addWebapp(contextPath, warPath);
}

server.start();

// do something to prevent this thread from ending
System.out.println("Press ENTER to exit.");
System.in.read();

server.stop();
server.destroy(); 
```

还有更多的例子：http:
[//people.apache.org/~markt/presentations/2010-11-04-Embedding-Tomcat.pdf](http://people.apache.org/~markt/presentations/2010-11-04-Embedding-Tomcat.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:01:47.877

管理器应用程序未与嵌入式版本一起部署。你的用例是什么？CTRL+c 将关闭 maven 和嵌入的 tomcat。

# wpf - 数据网格组标题中的绑定

> ID：11314283
> 
> 赞同：1
> 
> 时间：2012-07-03T15:30:16.787
> 
> 标签：wpf, datagrid, groupstyle

我想在数据网格的组标题中看到每列的一些附加信息。标头由一个 Stackpanel 组成，其中包含一些子 Stackpanel。由于用户可以调整数据网格列的大小，我必须调整单个标题部分的大小，将它们的宽度绑定到相应列的宽度：

```
 <ControlTemplate TargetType="{x:Type GroupItem}">
     <Expander IsExpanded="False">
         <Expander.Header>
             <StackPanel Orientation="Horizontal">
                  <StackPanel 
                       Orientation="Horizontal"
                       Width="{Binding Source={x:Reference TextCol01}, Path=ActualWidth}" >
                       <TextBlock Text="{Binding Path=Name}" />
                       <TextBlock Text=" ("/>
                       <TextBlock Text="{Binding Path=ItemCount}" FontSize="13" FontWeight="Bold"/>
                       <TextBlock Text=")"/>
                   </StackPanel>
                   <StackPanel 
                       Orientation="Horizontal">
                       <TextBlock Text="{Binding Path=Name}" />
                       <TextBlock Text=" ("/>
                       <TextBlock Text="{Binding Path=ItemCount}" FontSize="13" FontWeight="Bold"/>
                       <TextBlock Text=")"/>
                   </StackPanel>
                </StackPanel>
             </Expander.Header>
          <ItemsPresenter />
      </Expander>
  </ControlTemplate> 
```

如果不绑定 Width (Width="{Binding Source={x:Reference TextCol01}, Path=ActualWidth}")，则绑定到 CollectionViewGroup 的 Name 和 ItemCount 效果很好。但是绑定宽度它失败了。

我想这与绑定源有关。这会改变上下文。但我不知道它到底有什么问题。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:20:59.203

我想到了。这种绑定宽度的方法效果很好：

```
Width="{Binding ElementName=TextCol01, Path=ActualWidth}" 
```

这不起作用：

```
Width="{Binding Source={x:Reference TextCol01}, Path=ActualWidth}" 
```

它独立工作，但与 ItemCount 和 Name 的绑定一起会导致失败。

# c++builder - 如何使用 Indy 10 处理多个客户端

> ID：11314284
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:17.203
> 
> 标签：c++builder, indy10

目前我已经成功地使用**TIdTCPServer**和**TIdTCPClient** Indy 组件完全制作服务器和客户端，但是当两个客户端同时连接到服务器时我遇到了麻烦。我有两个网络`192.168.10.23`，`localhost`当客户端使用 localhost 连接时很好，第二个客户端尝试连接到`192.168.10.23`那里仍然等待第一个客户端断开连接。

谁能给我建议如何使用 Indy10 处理多个客户端。

添加：

这是我的代码：

```
void __fastcall TfrmServer::TCPServerConnect(TIdContext *AContext)
{
    TList *list = TCPServer->Contexts->LockList();
    try
    {
        for (int j=0; j < list->Count; j++)
        {
            TIdContext *myContext = static_cast<TIdContext*>(list->Items[j]);
            CLIENT_AUTH(myContext);

            INFO_CLIENT *br = ((INFO_CLIENT*)brb);
            br->ClientIP    = myContext->Binding()->IP;
            br->ClientPort  = myContext->Binding()->Port;
            br->peerIp      = myContext->Binding()->PeerIP;
            br->peerPort    = myContext->Binding()->PeerPort;

            if (myContext->Connection->Connected())
            {
                for (int i=0; i < list->Count; i++)
                {
                    ListIt = ListClient->Items->Add();
                    ListIt->Caption = String(i+1); // number
                    ListIt->SubItems->Add(br->UserName); // Name
                    ListIt->SubItems->Add(br->ClientIP); // Ip
                    ListIt->SubItems->Add(br->peerIp); // Peer Ip
                    ListIt->SubItems->Add(br->ClientPort); // port
                    ListIt->SubItems->Add(br->peerPort); // port
                    ListIt->SubItems->Add("Connected"); // Status
                }
            }
        }
    }
    __finally
    {
        TCPServer->Contexts->UnlockList();
    }
} 
```

此代码是否支持多个客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:23:30.477

`TIdTCPServer`支持多个网络上的多个同时连接，并且效果很好。如果您的客户端正在相互序列化，那么问题必须出在您自己的代码或网络设置中。Indy 不会阻止多个客户端同时连接到同一个服务器。

**更新：**试试这个：

```
class TAddToListSync : public TIdSync
{
protected:
    TIdContext *FContext;

    void __fastcall DoSynchronize()
    {
        TListItem *ListIt = frmServer->ListClient->Items->Add();
        ListIt->Caption = String(ListIt->Index+1); // number
        ListIt->SubItems->Add(...); // Name
        ListIt->SubItems->Add(FContext->Binding()->IP); // Ip
        ListIt->SubItems->Add(FContext->Binding()->PeerIP); // Peer Ip
        ListIt->SubItems->Add(FContext->Binding()->Port); // port
        ListIt->SubItems->Add(FContext->Binding()->PeerPort); // port
        ListIt->SubItems->Add("Connected"); // Status
    }

public:
    __fastcall TAddToListSync(TIdContext *AContext)
        : TIdSync(), FContext(AContext)
    {
    }

    static void Add(TIdContext *AContext)
    {
        TAddToListSync *sync = new TAddToListSync(AContext);
        sync->Synchronize();
        delete sync;
    }
};

void __fastcall TfrmServer::TCPServerConnect(TIdContext *AContext) {
{
    CLIENT_AUTH(AContext);
    TAddToListSync::Add(AContext);
} 
```

# .net - 如何通过 COM 公开 WPF 用户控件

> ID：11314285
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:31.453
> 
> 标签：.net, wpf, com, powerbuilder

我们有一个 WPF 用户控件，我们需要从唯一的 COM 感知语言 (Powerbuilder) 中使用它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:15:09.947

我最近写了一篇关于在 Powerbuilder 中使用 .Net 组件的文章。

[在 PB Classic 中使用 C# 可视化控件](http://anvil-of-time.com/wordpress/powerbuilder/powerbuilder-using-c-visual-objects-in-pb-classic-applications/)

# wordpress - wordpress 搜索：创建字段以从搜索结果中排除单词或短语

> ID：11314291
> 
> 赞同：0
> 
> 时间：2012-07-03T15:30:42.877
> 
> 标签：wordpress, search, phrase

例如，如果我用 wordpress 建立了一个工作委员会，我正在搜索“营销”，但我想删除所有带有“仅佣金”的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:37:35.367

为搜索功能编写您自己的查询。您可以在 SQL 中使用 LIKE 条件：

```
SELECT * FROM table WHERE tag = 'marketing' and category not like 'commission only' 
```

# performance - 如何使用 Elastic Beanstalk 提高 SSL 性能

> ID：11314297
> 
> 赞同：1
> 
> 时间：2012-07-03T15:30:56.930
> 
> 标签：performance, ssl, amazon-web-services, load-balancing, amazon-elastic-beanstalk

我真的很喜欢 Elastic Beanstalk，并设法在 Tomcat7 64 位容器上使用 SSL 启动并运行我的 web 应用程序（Spring MVC、Hibernate 等）。

我主要关心的是性能（我认为在这里使用亚马逊云会有所帮助）。

为了对我的服务器性能进行基准测试，我使用了 blitz.io（它使用亚马逊云让多个客户端同时访问我的网络服务）。

我的第一个简单性能测试已经让我想知道：我对健康检查 url 进行了基准测试（基本上只是打印“我没事”）。

没有 SSL：看起来不错。13 Hits/s，响应时间为 9ms 230 Hits/s，响应时间为 8ms

使用 SSL：不太好。13 Hits/s，响应时间为 44ms（好吧，由于加密开销，这应该有点大） 30 Hits/s，响应时间为 3.6s！

走高给我留下了连接超时（超时= 10s）。

我尝试在后台使用更大的 EC2 实例，结果基本相同。

如果我没记错的话，EC2 实例之前的负载均衡器用作 SSL 加密的端点。如何提高这种性能？

这可以用弹性豆茎完成吗？还是我需要设置自己的负载均衡器等？

我还使用 Heroku 进行了一些测试（尽管技术堆栈略有不同，play! vs. SpringMVC）。在这里，我还看到响应时间增加了，但基本保持不变。我假设他们正在使用性能相当好的 SSL 端点。我如何为 Elastic Beanstalk 获得它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:43:11.260

看来我的测试方法有缺陷。

Amazon 的弹性负载均衡器似乎每秒可以处理 10k SSL 请求。

请参阅这篇精彩的文章：http: [//blog.mattheworiordan.com/post/24620577877/part-2-how-elastic-are-amazon-elastic-load-balancers](http://blog.mattheworiordan.com/post/24620577877/part-2-how-elastic-are-amazon-elastic-load-balancers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:57:03.303

SSL 需要在打开安全传输通道之前进行握手。一旦握手完成，这涉及到几个往返，数据就会被传输。

当您只是使用负载测试器点击页面时，它会为每次点击进行握手。它没有重用已经建立的会话。

这不是浏览器要做的事情。Browse 将进行一次握手，然后在一段时间内为所有后续请求重用打开的加密会话。

所以，我不会很担心结果。我建议您尝试使用 www.browsermob.com 之类的工具来查看包含许多图像、js、css 等的完整页面需要多长时间才能通过 SSL 与非 SSL 加载。这将是一个公平的比较。

有帮助吗？

# xcode - 在 xcode 中对类进行分组

> ID：11314301
> 
> 赞同：0
> 
> 时间：2012-07-03T15:31:10.250
> 
> 标签：xcode, xcode4, directory, categories

在 Xcode（最新版本）中，是否可以选择对 app 文件夹中的类进行分组/放入文件夹/orginize-in-any-other-way 类？我只是问，因为我正在构建一个应用程序，它已经有一百多个课程，并且在它们中导航真的很痛苦。对它们进行分类的好方法确实有助于使开发更容易。另外，如果有办法这样做，它是否也适用于 nib 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:02:51.837

可以通过创建组在 Xcode 项目中列出的文件组织中创建结构。您可以选择要组合在一起的项目，然后通过右键单击选择在可用的上下文菜单中选择“从选择中新建组”，或从文件菜单中选择新建->从选择中组合。一个组在 Xcode 中显示为一个文件夹。这些组对您的代码没有功能影响，它们只是帮助人们组织项目。您可以通过在现有组中创建新组或通过单击和拖动移动组来将组嵌套在其他组中。

Xcode 的项目导航器不一定反映存储在文件系统中的文件组织。Xcode 项目中列出的每个文件都是磁盘上文件的链接。因此，此分组不会移动文件系统中的项目。如果您需要在 Xcode 中通过对文件进行分组来查看 Finder 组织，则必须在 Finder 中重复分组。在 Finder 中移动项目可能会破坏 Xcode 项目中的链接，因此必须将文件重新添加到 Xcode 项目中。

# ruby - 在 ruby 单元测试中使用策略模式

> ID：11314305
> 
> 赞同：1
> 
> 时间：2012-07-03T15:31:25.610
> 
> 标签：ruby, unit-testing, strategy-pattern

首先让我承认我通常是一名 Java 程序员，但我正在努力学习 ruby​​。

我正在使用 Ruby 1.9.3 并安装了 test-unit gem（我不知道如何使用 minitest 创建测试套件）。

我有两个类（称它们为 A 和 B），它们旨在支持相同的 API，但是，它们由不同的数据存储支持（为了论证，文件系统与数据库）。

由于它们支持相同的 API，我想编写一个测试集合，但让该集合同时针对 A 类和 B 类运行。

在 Java 中，我将创建三个测试类：

*   AbstractTest ：它将列出所有测试方法，并有一个抽象方法 getTestee() ，其实现预计将返回类 A 或类 B 的实例。每个测试方法都将调用 getTestee() 然后执行其测试返回的对象。

*   ATest ：它将扩展 AbstractTest，并实现 getTestee() 返回类 A 的实例。

*   BTest ：它将扩展 AbstractTest，并实现 getTestee() 返回类 B 的实例。

然而，当我在 ruby​​ 中构建类似的测试类层次结构时，测试框架似乎创建了 AbstractTest 的实例，而不是 ATest 或 BTest。AbstractTest 没有定义 getTestee() 所以我得到一个

```
NoMethodError: undefined method `getTestee' for test_list(AbstractTest):AbstractTest 
```

无论如何，我的一位同事建议了一个策略，我似乎重新定义了 AbstractTest 类并在事后添加 getTestee 方法。就像是：

```
require 'tests/abstract_test'

require 'a'

class AbstractTest
  def getTestee
    A.new
  end
end 
```

和

```
require 'tests/abstract_test'

require 'b'

class AbstractTest
  def getTestee
    B.new
  end
end 
```

但这真的让我很困惑，看起来像是一种代码味道。感觉就像我现在拥有三个不同的 AbstractTest 类，并且无法在 TestSuite 中单独引用它们。

那么，对于这种情况，ruby 普遍接受的测试实践是什么？

彼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:01:47.170

What I would do is create a base *module* with all the tests you want to run, and then initialize the objects in your derived classes. Something like this (using Ruby's built-in Test::Unit library):

```
module Testers
  def test_something
    assert_equal "expected result", @myobject.function_call
  end

  # ....
end 
```

Then later on your actual test classes:

```
require 'test/unit'

class TestA < Test::Unit::TestCase
  def setup
    @myobject = A.new
  end

  include Testers
end

class TestB < Test::Unit::TestCase
  def setup
    @myobject = B.new
  end

  include Testers
end 
```

The magic here is that using a *mixin* (combination of a `module` and `include`) you can have some of the nice aspects of multiple inheritance without actually having multiple inheritance.

# android - 在android中删除应用程序插入的日历事件

> ID：11314306
> 
> 赞同：0
> 
> 时间：2012-07-03T15:31:25.950
> 
> 标签：android, android-calendar

我知道如何在 Android 中删除和插入事件。
但问题是如何删除我自己的应用程序插入的日历事件。

**我是否需要存储我的应用插入的事件的所有 event_id？**

**不过好像不太靠谱吧？**event_id 可能已经成为其他事件的 id。例如，用户可以手动删除我的应用程序插入的事件并插入他们自己的可能具有相同 event_id 的事件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:08:24.473

我能想到的一种解决方案是使用其中一个字段来携带您的应用程序独有的某种标签。就像，在描述中你可以有#MyBooksApp，然后按该标签搜索事件。

当然，用户可以手动修改事件，它不会被找到，但显然没有办法解决这个问题。

另一种方法可能是在内部存储事件的副本或名称和描述的散列，并在删除之前使用散列检查它是否是同一事件。

# java - Java 应用程序崩溃

> ID：11314312
> 
> 赞同：4
> 
> 时间：2012-07-03T15:31:37.010
> 
> 标签：java, multithreading, serialization, parallel-processing, jvm-crash

我一直在研究一个大型的 Java 应用程序。它是相当并行的，并且使用了几个固定线程池（每个线程池有 8 个线程）。我在一台有 2 个内核的计算机上运行它，每个内核有 4 个处理器。我的程序正在分析大量数据，并且在每组数据之后都会保存（序列化）分析，尽管它可以跨数据集工作，因此每次运行新数据时都会重新加载（然后保存）。我的问题是：在运行 4-5 个数据集后（大约需要 2 天，我对我的编码效率非常满意）它会在第 5 组完全相同的时间后崩溃（无论哪个数据集我用）。该程序是重复的，因此此时代码中没有任何新内容。它是可重现的，我不知道该怎么做。如果有帮助，我可以发布完整的错误日志...

我一直在测试不同的设置以查看是否有任何帮助，现在我正在使用以下参数运行。

-Xmx6g -Xmx12g -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC

谢谢，乔

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0000000000000000, pid=18454, tid=140120548144896
#
# JRE version: 7.0_03-b147
# Java VM: OpenJDK 64-Bit Server VM (22.0-b10 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea7 2.1.1pre
# Distribution: Ubuntu precise (development branch), package 7~u3-2.1.1~pre1-1ubuntu2
# Problematic frame:
# C  0x0000000000000000
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# If you would like to submit a bug report, please include
# instructions on how to reproduce the bug and visit:
#   https://bugs.launchpad.net/ubuntu/+source/openjdk-7/
# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:38:37.533

只是一个很难的猜测...

可能无法创建更多文件

如果你在linux中运行这个尝试运行

```
ulimit -c unlimited 
```

在你运行你的java程序之前......这应该有两个方面的帮助

1.  它应该增加文件创建限制
2.  如果发生任何错误，它将创建核心转储。

查看程序运行时它使用了多少文件 IO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:41:55.943

[我会用Visual VM](http://visualvm.java.net/)之类的东西来检测它。它将在您的应用程序运行时实时显示内存、线程、CPU、创建的对象等中发生的情况。

我拥有的好版本仅适用于 Oracle/Sun JVM。JDK 附带了一个，但我认为它显示的细节不如安装了所有插件的 1.6.3 版那样详细。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T13:58:48.277

只需在 eclipse.ini 文件中添加 -Dorg.eclipse.swt.browser.DefaultType=mozilla 。

# magento - Magento -> 修改订单确认字符集

> ID：11314313
> 
> 赞同：0
> 
> 时间：2012-07-03T15:31:51.553
> 
> 标签：magento, character-encoding

我拼命尝试将订单确认电子邮件的默认字符集修改为 iso-8859-1。但是，它继续返回 UTF-8。

调用 getCharset 调用

```
Mage::getStoreConfig('design/head/default_charset'); 
```

但我不知道该值存储在哪里。

我要如何更改这些电子邮件的默认字符集，因为我想在其中包含西班牙语。我得到的只是拉丁字符：

```
� 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:32:33.413

您将需要重载该`Mage_Core_Model_Email_Template::send`方法并更改 'to' 和 'subject' 调用中的编码，并在 Zend_Mail 对象的 setBodyHTML/setBodyText 调用中传入可选的编码参数。

# iphone - 修复应用恢复执行后的通知中心方向

> ID：11314314
> 
> 赞同：2
> 
> 时间：2012-07-03T15:32:02.797
> 
> 标签：iphone, ios, ios5

我有一个仅以横向模式显示的视图，并且运行良好。但是如果您将应用程序发送到后台然后恢复它，通知中心将出现在您恢复应用程序时设备的方向（通常是纵向模式），所以当我检测到从左到右滑动时，有时通知中心会出现。有什么想法可以让系统知道它应该以横向模式显示通知中心吗？

**编辑**：视图应以横向模式显示，问题仅出在通知中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:04:17.523

设置状态栏方向设置应用程序方向。警报、通知中心它们都使用 [UIApplication sharedApplication].statusbarOrientation 作为*方向*。

-(BOOL)shouldAutorotateToInterfaceOrientation 应该为您完成这一切，但如果如您所说，不是那么您可以自己设置方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:54:10.203

您可以通过编程方式停止在该方法中发挥作用的肖像模式`shouldAutorotateToInterfaceOrientation`，以下代码是您如何做到这一点的：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{

    if (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft){
        return YES;
    }
    else {
        return NO;
    }

} 
```

# ios - 构建 MonoDevelop 项目时出错 - 您的 .NET 运行时不支持“-win32icon”

> ID：11314319
> 
> 赞同：0
> 
> 时间：2012-07-03T15:32:15.103
> 
> 标签：ios, xamarin.ios, monodevelop

尝试使用 MonoDevelop 构建示例项目时出现以下构建错误：

```
Error CS8088: Your .NET Runtime does not support `-win32icon'. Please use the latest Mono runtime instead. (CS8088) 
```

我唯一做的就是创建一个新的空项目并添加一些 PNG 文件作为应用程序图标和 Spotlight & Settings 图标。我知道该错误在某种程度上与这些图标有关，但我找不到对此特定问题的任何参考。PNG 文件是使用 GIMP 从 EPS 文件创建的。

我的系统信息如下：

*   MonoDevelop 3.0.3.2
*   NET 运行时 => Mono 2.10.9（默认）
*   uname -a => Darwin unknown406c8f2c1099 11.4.0 Darwin Kernel Version 11.4.0: Mon Apr 9 19:32:15 PDT 2012; 根：xnu-1699.26.8~1/RELEASE_X86_64 x86_64

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:48:31.640

看起来您在项目选项中设置了一个 Win32 exe 图标。看起来 MonoTouch C# 编译器已被修改为此类图标，因为它们在 iOS 上完全是多余的。它也应该从项目选项 UI 中删除，所以它不会被意外设置。

要修复此错误，请从项目选项的构建->常规部分中清除“Win32 图标”字段。

# cocoa - 为什么人们说启用 NSDebugEnabled YES，而 NSDebug.h 注释似乎说这是默认设置？

> ID：11314325
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:32:41.543
> 
> 标签：cocoa, debugging

正如在问题中一样，我试图正确理解使用环境变量，并利用它们的力量，但我对我的发现感到困惑。

警告：这里是可可和 Xcode 3.2.6。

评论引用是：

> 这是启动时从环境初始化的变量/值的表。

**NSDebugEnabled** 将 DEFAULT 列为“YES”。

如果我不更改任何内容，此评论是否试图传达这就是设置的方式？

也许，我喝了太多咖啡，但这令人困惑。

有人可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:22:06.610

如果您没有定义任何内容，`NSDebugEnabled`则为 NO，并且不会被使用。一旦我们在环境变量中设置为是，那么只有它才会起作用。

# c++ - 在 C++11 中使函数模板参数无符号

> ID：11314328
> 
> 赞同：9
> 
> 时间：2012-07-03T15:32:46.027
> 
> 标签：c++, templates, c++11

在一个看起来像这样的模板函数中：

```
template<typename T> constexpr T foo(T a, T b) { return /*recursive call*/; } 
```

我收到一个关于比较有符号和无符号的警告（由于比较`sizeof`），我想消除它。

从概念上讲，需要这样的东西：

```
template<typename T> constexpr T foo(T a, unsigned T b) { ... }
    or
template<typename T> constexpr T foo(T a, std::make_unsigned<T>::type b) { ... } 
```

不幸的是，第一个版本不是有效的 C++，第二个版本破坏了构建，因为当编译器看到`make_unsigned`.

有没有真正有效的解决方案？

[（注意：在某种程度上与Get the signed/unsigned variant of an integer template parameter without explicit traits](https://stackoverflow.com/q/2824431/572743)相关/几乎相同，尽管是函数而不是类（所以没有 typedefs），特征或 C++11 的任何特性明确欢迎，并且可以工作解决方案（即*不是* `make_unsigned<T>`）首选。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T15:35:16.647

您忘记了“类型名称”

```
template<typename T>
constexpr T foo(T a, typename std::make_unsigned<T>::type b) { ... } 
```

在 C++14 中，您应该能够编写

```
template<typename T>
constexpr T foo(T a, std::make_unsigned_t<T> b) { ... } 
```

或者您可以自己在 C++11 中实现：

```
template<typename T>
using make_unsigned_t = typename std::make_unsigned<T>::type; 
```

# git - 如何从 git 服务器中排除提交？

> ID：11314337
> 
> 赞同：0
> 
> 时间：2012-07-03T15:33:08.207
> 
> 标签：git

我已经将所有更改推送到服务器。

这是我提交到服务器的顺序：-

```
Commit G - ......
Commit F - ......
Commit E - .......
**Commit D - .......**
Commit C - .......
Commit B - .......
Commit A - ....... 
```

提交 G 是我需要释放的那个。但是 Commit D 是错误的，我必须从这个版本中摆脱它。但同时我不想完全删除它，我需要保留 Commit D 以备后用。

我将如何使用 git？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:36:46.670

`git revert COMMIT_D_HASH`将引入一个提交来还原 D 中的更改。

它仍将载入史册。

你最终会得到：

```
Revert of Commit D - .....
Commit G - ......
Commit F - ......
Commit E - .......
**Commit D - .......**
Commit C - .......
Commit B - .......
Commit A - ....... 
```

# audio - IMFMediaEngine 和一个字节数组

> ID：11314338
> 
> 赞同：2
> 
> 时间：2012-07-03T15:33:12.527
> 
> 标签：audio, windows-runtime, ms-media-foundation

我有一个包含多个媒体资产的大包文件（一个文件中有 5 个 mp3）。我正在读取包文件并检索一个字节数组（以及数组的大小）。我怎样才能将此信息转发给`IMFMediaEngine`它以播放它？

目前我正在`IRandomAccessStream`从一个解压缩的文件创建一个并将其转换为`IMFByteStream`by`MFCreateMFByteStreamOnStreamEx`然后将其发送到`SetSourceFromByteStream`.

我宁愿只使用`byte* data`并`size_t size`提供媒体对象。可能吗？

# python - 使列宽占用 wxPython ListCtrl 中的可用空间

> ID：11314339
> 
> 赞同：14
> 
> 时间：2012-07-03T15:33:30.373
> 
> 标签：python, wxpython

我的`wx.ListCtrl(size=(-1,200))`. 我希望列在创建后填满 ListCtrl 的宽度。理想情况下，第一列可以扩展以填充可用的额外空间。第二和第三列不需要扩展，最好不要改变宽度（格式化ocd）。

目前，每个 ListCtrl 列都是使用`(width=-1)`.

我有一种感觉，我可以利用这部分代码来发挥我的优势......

```
# Expand first column to fit longest entry item
list_ctrl.SetColumnWidth(0, wx.LIST_AUTOSIZE) 
```

伪代码（也许）：

```
# After wx.ListCtrl creation
Get width of ListCtrl control
Get width of each ListCtrl column
Calculate unused width of ListCtrl
Set first column width to original width + unused width 
```

# 添加：

鉴于以下示例，我不明白如何启动 autowidthmixin。目前，我正在尝试将 listctrl 放在折叠面板中。foldpanel 是一个类，类中的一个函数创建 listctrl。考虑到我目前的代码结构，我什至不相信这可以做到！

```
class MyPanel(wx.Panel):

    def __init__(self, parent, dictionary):
        self.dictionary = dictionary
        """Constructor"""
        wx.Panel.__init__(self, parent)

        # Layout helpers (sizers) and content creation (setPanel)
        self.mainSizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(self.mainSizer)
        list_ctrl = self.setPanel()
        self.mainSizer.Add(list_ctrl, 0, wx.ALL | wx.EXPAND, 5)
        self.GetSizer().SetSizeHints(self)

    def setPanel(self):
        index = 0

        list_ctrl = wx.ListCtrl(self, size=(-1, 200),
                                style=wx.LC_REPORT | wx.BORDER_SUNKEN)

        list_ctrl.InsertColumn(0, "Variable", format=wx.LIST_FORMAT_LEFT, width=-1)
        list_ctrl.InsertColumn(1, "x", format=wx.LIST_FORMAT_RIGHT, width=-1)
        list_ctrl.InsertColumn(2, u"\u03D0", format=wx.LIST_FORMAT_RIGHT, width=-1)

        for key, value in self.dictionary.iteritems():
            list_ctrl.InsertStringItem(index, str(key))
            list_ctrl.SetStringItem(index, 1, ("%.2f" % value[0]))
            list_ctrl.SetStringItem(index, 2, ("%.8f" % value[1]))
            index += 1

        list_ctrl.SetColumnWidth(0, wx.LIST_AUTOSIZE)
        list_ctrl.SetColumnWidth(1, wx.LIST_AUTOSIZE)
        list_ctrl.SetColumnWidth(2, wx.LIST_AUTOSIZE)

        return list_ctrl 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T15:57:52.000

您需要使用 ListCtrlAutoWidthMixin 混合类。wxPython 演示应用程序在 ListCtrl 演示中有一个示例。根据[文档](http://wxpython.org/docs/api/wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin-class.html)，您可以使用它的 setResizeColumn 方法来告诉它要调整哪一列的大小。默认值为最后一列。

**编辑（07/05/2012）：**在您的代码中，创建一个类似于演示中的 ListCtrl 类。它看起来像这样：

```
 class TestListCtrl(wx.ListCtrl, listmix.ListCtrlAutoWidthMixin):
    def __init__(self, parent, ID, pos=wx.DefaultPosition,
                 size=wx.DefaultSize, style=0):
        wx.ListCtrl.__init__(self, parent, ID, pos, size, style)
        listmix.ListCtrlAutoWidthMixin.__init__(self)
        self.setResizeColumn(0) 
```

然后当你实例化它时，你只需调用 list_ctrl = TestListCtrl(arg1, arg2...argN)

Note that I included a call to setResizeColumn() in my code above. It's not tested, but it should work.

# git - 管理 R 包中的外部资产

> ID：11314342
> 
> 赞同：27
> 
> 时间：2012-07-03T15:33:37.507
> 
> 标签：git, r

我正在编写一个名为的 R 包`slidify`，它可以轻松地从 R Markdown 文件生成可重现的 HTML5 幻灯片。该包利用了现有的几个HTML5幻灯片生成框架中的文件，例如`css`，等。目前，我已将这些外部资源的下载版本组织在文件夹中，以便用户在安装时自动使用。虽然这种方法很简单，但也有一些缺点：`js``dzslides``deck.js``inst/libraries``slidify`

1.  这些框架在`github`. 在当前设置下，每次更新这些框架中的任何一个时，我都必须推送新版本的包。

2.  `css`如果我对这些框架附带的默认设置进行任何调整`js`，那么我需要仔细合并更新，以免丢失`slidify`特定的自定义设置。

我对如何管理这个有几个想法。

1.  不要将这些库与`slidify`. 相反，提供一个`function`允许用户添加他们想要的框架的工具。

2.  将这些框架添加到`inst\libraries`文件夹上`slidify`，但作为`submodules`. 现在，我不知道`submodules`如果有人要使用`devtools::install_github`.

**所以我的问题是，在编写 R 包时，如何管理不断更新的外部非 R 依赖项？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:23:13.030

一种类似的情况是查看包`xlsx`和`XLConnect`.

这两个包都依赖于 Java 库。定义（并依赖于）一个仅包含库`xlsx`的独立包。`xlsxjars`

通过这种方式，下游代码与库解耦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:31:34.830

我通过使用解决了类似的问题`git-subtree`。看看：[在源代码控制下管理代码使用的第 3 方源代码和二进制文件](https://stackoverflow.com/questions/11318738/managing-3rd-party-sources-and-binaries-used-by-code-under-source-control)

# php - onclick 单选按钮转到 url

> ID：11314346
> 
> 赞同：-2
> 
> 时间：2012-07-03T15:33:46.890
> 
> 标签：php, html

我想将单选按钮的 onclick 事件链接到新网页。网页是用php开发的，语法如下

```
echo """<input class="radio" type="radio" name="alg_Type" id="HP" value="HP" onclick="location.href='highP.php'"/>  <label class="choice" for="HP">High precision</label>"""; 
```

我收到以下错误解析错误：解析错误，期待`','' or`';''

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:36:30.127

```
echo '<input class="radio" type="radio" name="alg_Type" id="HP" value="HP" onclick="location.href=\'highP.php\'"/>  <label class="choice" for="HP">High precision</label>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:36:37.420

你严重滥用引号。尝试：

```
<?php 
  //some code
  ?>
  <input class="radio" type="radio" name="alg_Type" id="HP" value="HP" onclick="location.href='highP.php'"/>
  <label class="choice" for="HP">High precision</label>
  <?
  //more php code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:37:09.953

尝试 ：

```
echo '<input class="radio" type="radio" name="alg_Type" id="HP" value="HP"  onclick="location.href=\'highP.php\'"/>  <label class="choice" for="HP">High precision</label>'; 
```

# ruby - 标记（lex？解析？）正则表达式

> ID：11314350
> 
> 赞同：2
> 
> 时间：2012-07-03T15:33:50.043
> 
> 标签：ruby, regex

使用 Ruby，我想获取一个 Regexp 对象（或代表有效正则表达式的字符串；您的选择）并将其标记化，以便我可以操作某些部分。

具体来说，我想采用这样的正则表达式/字符串：

```
regex = /var (\w+) = '([^']+)';/
parts = ["foo","bar"] 
```

并创建一个替换字符串，用数组中的文字替换每个捕获：

```
"var foo = 'bar';" 
```

一种简单的基于正则表达式的解析正则表达式的方法，例如：

```
i = -1
result = regex.source.gsub(/\([^)]+\)/){ parts[i+=1] } 
```

…对于嵌套捕获组、非捕获组或在字符类中带有括号的正则表达式等内容将失败。因此，我希望将正则表达式正确地分解为语义有效的部分。

是否有可用于 Ruby 的现有正则表达式解析器？是否有一个（恐怖的）已知正则表达式可以完全匹配正则表达式？有没有我没找到的宝石？

*这个问题的动机是希望为这个问题找到一个简洁明了的[答案](https://stackoverflow.com/questions/11311794/replace-capture-with-value-then-return-the-entire-matched-pattern/11313732#11313732)。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:43:07.393

我在 GitHub 上有一个 JavaScript 项目，名为：[Dynamic (?:Regex Highlighting)++ with Javascript！](https://github.com/jmrware/DynamicRegexHighlighter/)你可能想看看。它解析以自由间距和非自由间距模式编写的 PCRE 兼容正则表达式。由于正则表达式是用功能较少的 JavaScript 语法编写的，因此这些正则表达式可以很容易地转换为 Ruby。

请注意，正则表达式可能包含任意嵌套的括号结构，而 JavaScript 没有递归正则表达式功能，因此代码必须从内到外解析嵌套括号树。它有点棘手，但效果很好。[请务必在荧光笔演示页面](http://jmrware.com/articles/2010/dynregexhl/DynamicRegexHighlighterTester.html)上尝试一下，您可以在其中输入并动态突出显示任何正则表达式。[此处](http://jmrware.com/articles/2010/dynregexhl/DynamicRegexHighlighter.html)记录了用于解析正则表达式的 JavaScript 正则表达式。

# c# - 使用 jQuery 从 ASP.Net JSON 服务获取数据

> ID：11314352
> 
> 赞同：3
> 
> 时间：2012-07-03T15:34:00.243
> 
> 标签：c#, jquery, asp.net

我正在尝试调用 Google Maps 地理编码 API，以从 lat/long 对中获取格式化地址，然后将其记录到控制台。我正在尝试获取为给定位置返回的第一个“formatted_address”项目。我很简单无法从 JSON 中提取该项目，我不知道为什么。提取数据所需的代码行将不胜感激。

的JavaScript：

```
//Gets the current location of the user
function getLocation()
{
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition);
    }

}

function showPosition(position)
{
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    $.ajax({
        type: "POST",
        url: "ReportIncident.aspx/ReverseGeocode",
        data: "{latitude:" + latitude + ",longitude:" + longitude + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (returnedData)
        {
         // console.log(/****formatted_address Here Please****/);
        }
    });
} 
```

C#：

```
 [WebMethod]
        public static string ReverseGeocode(decimal latitude, decimal longitude)
        {
            // Create the web request  

            string url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + latitude + "," + longitude +
                         "&sensor=true";
            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

            // Get response  
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                // Get the response stream  
                StreamReader reader = new StreamReader(response.GetResponseStream());

                // Console application output  
                return reader.ReadToEnd();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:01:00.243

你的 JSON 被转义，因为你从你的返回一个字符串`WebMethod`，而不是让内置`JavascriptSerializer`的东西去做。

粗略地说，您会看到：

```
"\{ /*data*/ \}" 
```

而不是这个：

```
{ /*data*/ } 
```

您可以通过运行返回的字符串来解决此问题，`eval()`但请注意我不推荐它......只是说*你可以*

**编辑**：

```
 $.ajax({
    type: "POST",
    url: "ReportIncident.aspx/ReverseGeocode",
    data: "{latitude:" + latitude + ",longitude:" + longitude + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (returnedData)
    {
        var realReturnedData = eval(returnedData.d);
        //realReturnedData now has the google maps data structure you're expecting
    }
}); 
```

再次...... *eval 是邪恶的*（如果你不 100% 信任来源）。我建议从您的网络方法返回不同的数据类型...

**编辑 2**：

```
[WebMethod]
public static MyClass ReverseGeocode(decimal lat, decimal long) {
   MyClass obj = new MyClass();
   //do stuff
   return obj;
} 
```

但我真正的问题是，您为什么要通过对服务器的 Web 服务调用来执行此操作？您可以直接从 Javascript 到 google 的 API 进行地理编码[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:50:03.213

我认为 API 返回如下内容：

```
{
    "results" : [
    {
        "address_components" : [/***/],
        "formatted_address": "..."
        /* other */
    }],
    "status" : "OK"
} 
```

你可以试试：

```
if(returnedData.results.length > 0) {
    console.log(returnedData.results[0].formatted_address);
} 
```

编辑：查看 API 文档[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# java - 希伯来语键盘更改编辑文本重力

> ID：11314356
> 
> 赞同：0
> 
> 时间：2012-07-03T15:34:07.303
> 
> 标签：java, android

我有一个`EditText`我应该在其中输入 RTL 的希伯来语文本，因此重力设置为右，但这适用于英文键盘，但对于希伯来语键盘，重力再次更改为左。如何解决这个问题呢？

我希望重力始终正确。

我确实配置了键盘的更改条目，并在`onConfigurationChanged()`功能`setGravity`上回到了右侧。这样就够了吗？

# wordpress - WordPress 永久链接系统如何工作？

> ID：11314358
> 
> 赞同：5
> 
> 时间：2012-07-03T15:34:15.087
> 
> 标签：wordpress, url, content-management-system, blogs, permalinks

我是一名 php 开发人员，目前正在开发一个 CMS/博客系统。我想添加一个永久链接系统，比如 WordPress。我很好奇 WordPress 如何解析永久链接。例如，如何从以下位置获取`id`数据`post name`：

```
example.com/id/123/post/example/ 
```

简而言之，我想要一个系统来获取`id`和`post name`从 url。我想让用户使用以下标签更改永久链接结构，如 WordPress：

```
id/%postid%/post/%postname%/ 
```

如何获取变量中的数据，例如值将在哪里`$id`和？请帮我。提前致谢。`$post_name``123``example`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T15:50:10.593

常用的 apache 模块**mod_rewrite**可以帮助您解决这个问题。您所做的是在 .htaccess 文件中编写重写规则，并通过重写，通常类似于文件系统的精美结构作为 $_GET 参数发送到 PHP 文件。

例如，如果您想替换以下内容`?reactor=13`：`/reactor/13/`

在 .htaccess 文件中写入此重写规则：

```
RewriteEngine on
RewriteRule reactor/([0-9]+)/$ index.php?id=$1 
```

现在，如果你打开 /reactor/13/ 而不是 index.php，你的 index.php 文件应该在 $_GET 中看到：

```
Array
(
    [id] => 13
) 
```

现在，对于您的 HTML 代码，由您来制作 URL 并遵守您深思熟虑的结构。

这些重写规则可能会令人困惑，但它们遵循逻辑正则表达式模式。

WordPress 采用比插入这些编辑 .htaccess 文件更强大的方法，将所有内容发送到 WP，然后 WP 通过内部规则解决/路由其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:48:40.937

这取决于您使用的服务器软件，但如果您计划在 Apache 上使用脚本，通常会涉及使用称为文件的东西`mod_rewrite`，特别是`.htaccess`文件。

我建议从阅读有关此主题的教程开始。[像往常一样，谷歌是你的朋友](http://www.google.com/search?q=.htaccess+php+tutorial)。

# android - Android SDK 管理器不显示要安装的包

> ID：11314359
> 
> 赞同：13
> 
> 时间：2012-07-03T15:34:16.200
> 
> 标签：android, sdk

我已经安装了 Android SDK 和软件包。由于在 Eclipse 上打开新项目时出现错误，我决定卸载 SDK 并重新安装。现在的问题是我没有看到要安装的包，我只能看到 Android SDK 工具。

如何重新安装它并查看所有软件包？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-24T20:20:29.590

对于遇到此问题的每个人：打开 SDK Manager 单击顶部菜单中的工具 -> 选项并打开 **强制 hِttps://...sources**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T10:30:29.623

当我运行我的 SDK 时，我也遇到了同样的问题，除了没有任何分支的 android SDK 工具和附加功能外，我什么也没得到。我使用的代理不允许 SDK 管理器下载所有项目。

*   打开 SDK Manager Tool -> options -> Give the proxy settings Packages -> Reload

以上 3 个步骤重新加载了我渴望看到 2 天的所有包裹:)。

如果不是至少对少数人来说，这可能会有所帮助

谢谢哈里

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T07:44:28.437

对于那些已经遇到此问题的人：
您可能应该更改代理设置。

我在 SDK 管理器工具中测试代理设置。但没有帮助。

*   在控制面板中打开 Java 控制面板
*   在网络设置下更改代理设置

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T15:43:17.693

> 现在的问题是我没有看到要安装的包，我只能看到 Android SDK 工具。

首先安装该软件包，然后将出现所有其他软件包（您可能需要重新启动管理器）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-27T17:32:30.917

我使用 VPN 软件，所以在 Android Studio 中，我转到*Default Settings -> System Settings -> HTTP Proxy*并选中*Auto-detect proxy settings*。这个对我有用。

![在此处输入图像描述](../Images/7e7009d74d05a16174eda5aba2e4bb20.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-22T08:39:12.883

从 SDK 管理器窗口尝试此工具 > 选项 > 清除缓存，然后包 > 重新加载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-03T13:21:13.860

在 Mac 上：转到 Android SDK MANAGER -> Preferences -> “Force http ...”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-22T08:29:55.513

还是没有找到合适的答案？

转到包 -> 标记为选中所有前三个包

✓ 1-显示更新/新包

✓ 2-显示安装包

✓ 3 显示过时的包

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-26T18:46:56.350

在 Windows 上，右键单击`android-sdk`主目录中的 SDK Manager 和`Run as administrator`. 这为我解决了它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-27T13:28:48.657

**以管理员身份运行 SDK Manager。**

执行以下 2 个步骤

1.  右键单击 SDK 管理器。
2.  选择以管理员身份运行。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-13T17:15:18.970

对于遇到此问题的每个人，我都可以通过终端安装所需的依赖项来解决它：

sudo apt-get install libc6-dev-i386 lib32z1 default-jdk。

之后，所有其他 API 包都出现了

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-29T16:57:12.593

使用 VPN 连接谷歌服务器并获取包

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-09T14:19:21.687

在新版本的 android studio 中转到 Tools-> sdk tools-> android sdk-> sdk update site，添加这个存储库[https://dl.google.com/android/repository](https://dl.google.com/android/repository)

# jquery - 如何在 jQuery UI 中使除第一个选项卡之外的所有选项卡都可关闭

> ID：11314360
> 
> 赞同：1
> 
> 时间：2012-07-03T15:34:25.983
> 
> 标签：jquery, jquery-ui

我正在尝试创建一个选项卡式菜单，我想要除第一个选项卡之外的所有选项卡，它是可关闭的菜单选项卡。很像 yahoo 邮件 GUI。收件箱和联系人选项卡不可关闭，而后续选项卡可关闭。

这是我的代码：

```
jQuery(function() {
       var mytabs = jQuery("#tabs").tabs({tabTemplate: "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>"});

       jQuery( "#tabs span.ui-icon-close" ).live( "click", function() {
         var index = jQuery( "li", mytabs ).index( jQuery( this ).parent() );
         $tabs.tabs( "remove", index );
       });

 });

<script type="text/javascript">

function openComplaintDiv(complaint, complaintNo,demographic_no) {
var htmlContent= "complaint = '"+complaint+"'complaintNo ='"+complaintNo+"'for user = '"+demo_no+"'";
jQuery("#tabs").tabs().tabs('add', '#vtab_'+complaint.replace(" ","_"), complaint.replace(" ","_"));
jQuery("#vtab_"+complaint.replace(" ","_")).html(htmlContent);
return false;
}

</script>

<style>
    #tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
</style>

<html>
    <body>
            <div id="tabs">
    <ul>
        <li><a href="#mainMenu">Home</a></li>

    </ul>

    <div id="mainMenu">

        <div id="addTab" onclick="addNewComplaintDiv();"><a style="padding:6px 6px 6px 17px;text-decoration:none;position:relative" href="#" id="addTab_1" class="ui-state-default ui-corner-all">
            <span style="position:absolute;top:4px;left:1px" class="ui-icon ui-icon-plus"></span>
            Add new complaint
        </a></div>
        <table class="normal">
        <% 

            for (Integer key : complaintMap.keySet()) {  %> 
            <tr><td style="height:50px;"><div id="openComplaint_<%=key%>" onclick="openComplaintDiv('<%=complaintMap.get(key)%>',<%=key%>,<%=demo_no%>);"><a style="padding:6px 6px 6px 17px;text-decoration:none;position:relative" href="#" id="addTab_1" class="ui-state-default ui-corner-all">
                    <%=complaintMap.get(key)%>
                </a></div> </td></tr>
            <%  } %>
            </table>
    </div>
</div>

 </body>
 </html> 
```

此代码使所有选项卡都可以关闭，但我不希望“mainMenu”选项卡可以关闭。此外，每次单击“主菜单”选项卡中的“投诉 div”时，我都会添加一个新选项卡。如果尚未创建，我实际上想创建一个新选项卡，如果已创建，则选择相应的选项卡。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:53:10.803

在初始化时，使用

```
disabled: [1]

var mytabs = jQuery("#tabs").tabs({
    tabTemplate: "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",
    disabled: [1]
}); 
```

# objective-c - 保存在 webView 中呈现的可编辑文本

> ID：11314362
> 
> 赞同：0
> 
> 时间：2012-07-03T15:34:27.457
> 
> 标签：objective-c, ipad, ios5, xcode4.3

在我的 iPad 应用程序中，我创建了一个富文本编辑器，即 webView 中的一些富文本内容可通过一些格式化按钮（如粗体、斜体等）进行编辑。我想将通过编辑器所做的更改保存到 HTML 文件中，以便下一个当文件在 webView 中呈现时，这些更改是可见的。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:38:57.687

就在这里。首先，您要保存 html 文件。然后您可以获取它的路径并让 webview 从该位置加载 html。

```
//Retrieve location of file
       NSString *myFile= [NSBundle pathForResource:@"myHtmlFile" ofType:@"html" inDirectory:nil]; 
//Load your locally stored html text
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:myFile]]]; 
```

希望有帮助。

# video - 使用 actionscript 3.0 将视频与计时器同步

> ID：11314364
> 
> 赞同：0
> 
> 时间：2012-07-03T15:34:34.713
> 
> 标签：video, actionscript

是否可以将视频与全局计时器同步？例如，我有关于何时开始视频、何时暂停、何时倒退和何时转发等信息。我需要根据这些信息控制视频。访问视频和信息是通过 xml 文件。是否可以使用 Actionscript 3.0 来实现这一点？

注意：这里的时间参考不是视频的时间。它是从信息中获得的时间。所以我不认为我们可以使用提示点。

我在代码的帮助下解释了以下内容。

我当前播放视频的 fla 文件如下所示

```
import fl.video.*;
var video_x:Number;
var video_y:Number;
var myvideos:XMLList;
var mylogfile:XMLList;
var main_container:Sprite;
var my_player:FLVPlayback;
var myxmlfile:URLLoader = new URLLoader();
myxmlfile.load(new URLRequest("config.xml"));
myxmlfile.addEventListener(Event.COMPLETE,processxml);
function processxml(e:Event):void{
var myxml:XML = new XML(e.target.data);
video_x=myxml.@video_x;
video_y=myxml.@video_y;
myvideos=myxml.VIDEO; // reads the video tag from xml
mylogfile=myxml.LOG;// reads the log tag from xml
playvideo();// play the video 
 }
 function playvideo():void {
my_player = new FLVPlayback();
my_player.x = video_x;
my_player.y = video_y;
my_player.width = 480;
my_player.height = 270;
my_player.source = myvideos[0].@url;
addChild (my_player);
 } 
```

我的 xml 文件看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<playlist video_x="30" video_y="10">
<VIDEO title="stephen" url="video/stephen.flv"/>
<LOG realtime="100" state="PLAY" videotime="0"/>
<LOG realtime="200" state="PAUSE" videotime="100"/>
<LOG realtime="400" state="PLAY" videotime="100"/>
<LOG realtime="500" state="REWIND" videotime="40"/>
<LOG realtime="900" state="STOP" videotime="440"/>
</playlist> 
```

xml 文件中的 videotime 表示视频的时间。xml 文件中的实时表示全球时间。现在基于 xml 文件中的实时，我需要控制视频。

在此先感谢您的帮助，

托塔德里

# visual-studio-2010 - 在 Visual Studio 中搜索时排除注释

> ID：11314366
> 
> 赞同：51
> 
> 时间：2012-07-03T15:34:36.390
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

有没有办法在 Visual Studio 中执行搜索（在文件中查找/查找）将排除评论中的匹配项？虽然有时它很有用，但有时却相反。对于提供的所有选项，我认为它会在那里，但如果是的话我找不到它。

顺便说一句，我正在使用 VS 2010/2012。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-08-24T12:03:18.683

这是适用于较新版本的 Visual Studio 的正则表达式：

```
^(?![ \t]*//).*your_search_term 
```

请注意，从 VS 2012 开始，语法发生了变化：

> Visual Studio 2012 使用 .NET Framework 正则表达式来查找和替换文本。在 Visual Studio 2010 及更早版本中，Visual Studio 在查找和替换窗口中使用自定义正则表达式语法。

参考：[https ://msdn.microsoft.com/en-us/library/vstudio/2k3te2cs(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/vstudio/2k3te2cs(v=vs.110).aspx "MSDN 文档")

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-04T02:50:23.873

您可以尝试如下正则表达式：

```
^~(:b*//).*your_search_term 
```

简短说明：

*   `^`从行首
*   `~(`不是以下
*   `:b*`任意数量的空格，后跟
*   `//`评论开始
*   `)`非结束
*   `.*`任何字符都可以出现在前面
*   `your_search_term`你的搜索词:-)

[在另一个帖子中看到了这个。](https://stackoverflow.com/questions/2153876/how-can-i-search-in-visual-studio-and-get-it-to-ignore-what-is-commented-out)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:25:28.403

我不相信这是VS中的一个选项。您可以尝试正则表达式，但这些都受到您的创造力的限制。似乎使用正则表达式搜索不以 // 开头的行并不完全困难。

# java - 如何从 jpa/hibernate 类中快速生成 persistence.xml

> ID：11314368
> 
> 赞同：1
> 
> 时间：2012-07-03T15:34:41.607
> 
> 标签：java, hibernate, persistence.xml

有时将类名手动添加到persistence.xml 文件以进行休眠配置是很乏味的。有没有办法快速生成`<class>com.something.Entity1</class>` 文件的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:21:21.303

找到了一个简单的方法，使用来自[dzone 的代码。](http://dzone.com/snippets/get-all-classes-within-package)只需将它们打印出来并从控制台复制即可。这里适合任何有兴趣的人。

```
Class[] classex = getClasses(Entity1.class.getPackage().getName());
    for (Class c : classex) {
        if (c.getName().contains("$")) continue;
        if (!c.isAnnotationPresent(javax.persistence.Entity.class)) continue;
        System.out.println("<class>" + c.getName() + "</class>");
    } 
```

# symfony - 是否可以让 symfony2 记录缺少翻译字符串，以便我知道需要添加到我的 xilff 文件中的内容？

> ID：11314371
> 
> 赞同：2
> 
> 时间：2012-07-03T15:34:57.480
> 
> 标签：symfony, internationalization, xliff

我有一个 symfony 项目，我在其中浏览了我的 twig 模板，并在适当的地方添加`{% trans %}...{% endtrans %}`或添加了翻译。`{{ title|trans }}`我还添加了一个 messages.de.xliff 文件，这对于我尝试过的少数翻译来说非常有效。

有没有办法从我的 xliff 文件中获取缺少的字符串列表？在我添加时，很难跟踪每一个翻译。似乎它应该在某处的日志文件中记录翻译失败，但我一直在谷歌搜索一段时间，找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:12:53.700

嗨尝试关注可能会有所帮助。

[https://github.com/schmittjoh/JMSTranslationBundle/blob/master/Resources/doc/index.rst](https://github.com/schmittjoh/JMSTranslationBundle/blob/master/Resources/doc/index.rst)

非常强大的工具，绝对可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:59:33.757

这是一个非常糟糕的补丁，可以满足`vendor/symfony`我的需要。可能不会在生产服务器上运行！

```
diff --git a/src/Symfony/Component/Translation/MessageCatalogue.php b/src/Symfony/Component/Translation/MessageCatalogue.php
index b55676f..98a5cba 100644
--- a/src/Symfony/Component/Translation/MessageCatalogue.php
+++ b/src/Symfony/Component/Translation/MessageCatalogue.php
@@ -128,6 +128,8 @@ class MessageCatalogue implements MessageCatalogueInterface
             return $this->fallbackCatalogue->get($id, $domain);
         }

+        error_log('Translation not found: "' . $id . '"');
+
         return $id;
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:32:00.347

我的解决方案是覆盖`Translator`and`MessageCatalogue`类。

**译者：**

```
class RegisteringTranslator extends \Symfony\Component\Translation\Translator
{
    protected function loadCatalogue($locale)
    {
        parent::loadCatalogue($locale);

        if ( ! $this->catalogues[$locale] instanceof RegisteringMessageCatalogue) {
            $registeringCatalogue = new RegisteringMessageCatalogue($locale);
            $registeringCatalogue->addCatalogue($this->catalogues[$locale]);
            $this->catalogues[$locale] = $registeringCatalogue;
        }
    }
} 
```

**目录：**

```
class RegisteringMessageCatalogue extends \Symfony\Component\Translation\MessageCatalogue
{
    public function get($id, $domain = 'messages')
    {
        if ( ! $this->has($id, $domain)) {
            error_log('Translation not found: "' . $id . '"');
        }

        return parent::get($id, $domain);
    }

} 
```

当然，您需要使用新的 Translator 类。

也不是很好，因为它使用了`Translator`类的受保护方法和属性。但比直接更改 Symfony 代码要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T08:59:37.330

通常你应该能够`debug:translation`通过`app/console`.

像这样的东西：

```
$ php app/console debug:translation --only-missing <locale> <Bundle Name> 
```

一个具体的例子是：

```
$ php app/console debug:translation --only-missing nl AppBundle 
```

那将输出：

```
 ----------- ---------- ------------------------------------------------------------------------------------------------------- ------------------------------------------
  State       Domain     Id                                                                                                      Message Preview (nl)
 ----------- ---------- ------------------------------------------------------------------------------------------------------- ------------------------------------------
   missing    messages   Create a clean selection                                                                                Create a clean selection
   missing    messages   New Selection                                                                                           New Selection
   missing    messages   login.labels.geoserver_url                                                                              login.labels.geoserver_url 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T20:34:02.937

我知道这是一个老问题，但我在这里发帖以防万一有人仍然有同样的问题。

从 Symfony 2.6 开始，您会发现 Web 调试工具栏添加了一个非常不错的功能，可以显示您缺少多少翻译。

[![在此处输入图像描述](../Images/8159f3246e9f28cbd64f4a0a389a11c9.png)](https://i.stack.imgur.com/WKhXI.png)

通过单击它，分析器将显示缺失翻译的详细列表。

开箱即用，无需任何配置。

# php - 在 PHP 中创建登录系统

> ID：11314373
> 
> 赞同：5
> 
> 时间：2012-07-03T15:35:01.263
> 
> 标签：php, login, passwords

有人可以帮帮我吗？我的用户名是 Blimeo，密码是“密码”，但是当我输入凭据时，它显示“拒绝访问”，就像我告诉它的那样。我 100% 确定我正确配置了我的 mySQL 数据库。

```
<html>
<body>
<?php
echo sha1('Blimeo');
if (isset($_REQUEST['attempt'])) {

    $link = mysql_connect('localhost', 'root', 'password') or die('Could not connect to database');
    $user = mysql_real_escape_string($_POST['user']);
    $password = sha1(mysql_real_escape_string($_POST['password']));
    mysql_select_db('test_users');
    $query = mysql_query(
        "SELECT user 
        FROM users 
        WHERE user = '$user' 
        AND password = '$password'
        ") or die(mysql_error());
    mysql_fetch_array($query);
    $total = mysql_num_rows($query);
    if ($total > 0) {
        session_start();
        $_SESSION['user'] = 'blah';
        header('location: dashboard.php');
    }
    else {
        echo '<br>Access denied!';

    }
}

?>
<form method="post" action="login.php?attempt">
    Enter your username:<input type="text" name="user"/><br/>
    Enter your password:<input type="password" name="password"/><br/>
    <input type="submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T17:44:50.080

**更新，2016**

请仅使用现有的登录系统，这些系统几乎在每个 PHP 框架中都是开箱即用的！完全没有理由自己写这篇文章，因为用户身份验证是一个很大的话题，编写一个严肃、稳定和现代的登录解决方案需要几个月（几年）的时间。

**原文，自 2012 年起：**

由于登录系统是一个安全问题，每个人都会一遍又一遍地犯同样的错误，我可以清楚地说：

使用专业的脚本并通过代码来了解发生了什么，什么是散列和加盐以及会话可能会出现什么问题。

[删除过时的链接]

以下是您可能需要的三个项目：

[https://github.com/panique/php-login-one-file](https://github.com/panique/php-login-one-file)

[https://github.com/panique/php-login-minimal](https://github.com/panique/php-login-minimal)

[https://github.com/panique/huge](https://github.com/panique/huge)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:41:50.650

首先，您应该在页面的第一行开始您的会话。

您还应该更新代码以使用 PDO 语句而不是 mysql 函数。这些速度较慢且易于使用 mysqli。

然后，您需要检查返回的行数是否等于 1 且不大于 0。这将是一个安全问题，因为您的脚本可以被操纵以返回超过 1 行，然后它将验证并输入安全区域。

在我看来，问题在于，您的密码与数据库不匹配。回显密码的 sha1 并查看它是否与表格匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:43:18.943

似乎脚本在测试 mysql_num_rows() 时出现问题。

就在之前：

```
if ($total > 0)
{ 
```

也许尝试添加以下行来测试并确保 $total 确实 > 0：

```
echo $total; 
```

除此之外，尝试测试 mysql 查询以确保它会从数据库返回至少 1 行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T09:24:41.550

```
make database in mysql then run this code::

<table border="0" align="center" cellpadding="0" cellspacing="0" width="300">
<tr>
    <td>
        <form method="post" action="flogin.php">
            <table width="100%" cellpadding="7" cellspacing="0" border="0">
                <tr>
                    <td colspan="3"><center><strong>Insert Values In DataBase </strong></center><br /></td><br />
                </tr>
                <tr>
                <td width="30%">Name</td>
                <td width="10%">:</td>
                <td width="60%"><input type="text" name="name" /></td>
                </tr>
                <tr>
                <td width="30%">Last Name</td>
                <td width="10%">:</td>
                <td width="60%"><input type="text" name="lastname" /></td>
                </tr>
                <tr>
                <td width="30%">Email</td>
                <td width="10%">:</td>
                <td width="60%"><input type="text" name="email" /></td>
                </tr>
                <tr>
                <td colspan="3"><center><input type="submit" name="submit" /></center><br /></td>
                </tr>
            </table>
        </form>
    </td>
</tr>
</table>

<?php
mysql_connect("localhost", "root", "") or die("can not connect to database");
mysql_select_db("flogin")or die("can not connect");

if (isset($_POST['submit'])){
    $name=$_POST['name'];
    $lastname=$_POST['lastname'];
    $email=$_POST['email'];

    $query=mysql_query("INSERT INTO info(name, lastname, email)VALUES('$name', '$lastname', '$email')");
    if($query){
        echo "successful";
        echo "<br>";
        echo "<a href='insert.php'>Back to main page</a>";
    }
    else {
        echo "error";
    }

    }
?>
<?php
mysql_close();
?> 
```

# android - Android在上传到服务器之前压缩视频

> ID：11314375
> 
> 赞同：8
> 
> 时间：2012-07-03T15:35:12.153
> 
> 标签：android, video, compression

在上传到远程服务器之前，如何在 Android 中压缩视频文件？我不想压缩文件，因为我认为这不会有太大帮助。我想压缩视频并以较低的比特率或分辨率重新编码。我们的想法是从每台设备上获取标准的 360х480、30 FPS 视频文件。这样我就可以避免拥有更好相机的用户被迫上传巨大的视频文件。

我知道 iOS 让强制视频文件分辨率变得相当简单。在 iPhone 4 上录制的 10 秒视频：

*   高 (1280х720) = ~14MB = ~11Mbit/s
*   640 (640х480) = ~4MB = ~3.2Mbit/s
*   中等 (360х480) = ~1MB = ~820Kbit/s
*   低 (144х192) = ~208KB = ~170Kbit/s

在Android中有没有简单的方法来做到这一点？我是否需要找到一些外部库来重新编码视频文件，然后将其保存到 SD 卡（或覆盖旧视频文件），然后上传该文件？主要是在这里寻找总体方向，而不是复制和粘贴代码，尽管任何事情都有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-03T06:36:30.760

我遇到了类似的问题。我必须在服务器中上传大小在 5.4mb 以内的视频。但由于不同手机的摄像头分辨率不同，出现了问题。这些是我选择的解决方案

```
mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
mediaRecorder.setVideoEncodingBitRate(690000 ); 
```

希望这些对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-25T13:34:19.037

我之前开发的一个应用程序要求压缩后发送视频文件。以下是我遵循的有效步骤：

1.  [使用 android 中的Silicompressor](https://github.com/Tourenathan-G5organisation/SiliCompressor)库压缩文件。在后台线程上运行压缩任务。

2.  输出文件格式将具有 mime 类型“video/raw”。您可以在 logcat 中检查。因此，您需要在您的服务器中添加此 mime 类型，以便成功上传压缩文件格式。

3.  完成后，尝试发送压缩文件，它应该可以工作。

确保您上传到服务器的文件的 MIME 类型被服务器接受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-27T06:39:21.377

阅读关于这个图书馆，它最适合配备全高清摄像头的新手机

[为 Java 和 Kotlin 压缩高质量的视频](https://github.com/AbedElazizShe/LightCompressor)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T21:33:57.223

我们决定将此功能保存到项目的另一个迭代中。我们选择警告用户大数据负载（特别是如果他们不在 Wi-Fi 上）。我相信这是可以做到的，tabbykitten 提供的链接是迄今为止我在这个主题上找到的最好的相关 SO 帖子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-07T04:33:40.897

从 API 级别 18 开始，您可以直接使用 android API 来进行视频编码，但如果您的目标是低于 API 级别 18，那么它就不是直截了当

以下链接进行编码 [https://github.com/google/grafika/blob/master/src/com/android/grafika/VideoEncoderCore.java](https://github.com/google/grafika/blob/master/src/com/android/grafika/VideoEncoderCore.java)

# ruby - 如何在ruby中动态定义实例方法？

> ID：11314377
> 
> 赞同：14
> 
> 时间：2012-07-03T15:35:13.753
> 
> 标签：ruby, metaprogramming

我想通过父类的类方法动态创建子类的实例方法。

```
class Foo
  def self.add_fizz_method &body
    # ??? (This is line 3)
  end
end

class Bar < Foo
end
Bar.new.fizz #=> nil

class Bar
  add_fizz_method do
    p "i like turtles"
  end
end
Bar.new.fizz #=> "i like turtles" 
```

在第 3 行写什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T15:43:03.530

像这样使用`define_method`：

```
class Foo
  def self.add_fizz_method &block
    define_method 'fizz', &block
  end
end

class Bar < Foo; end

begin
  Bar.new.fizz 
rescue NoMethodError
  puts 'method undefined'
end

Bar.add_fizz_method do
  p 'i like turtles'
end
Bar.new.fizz 
```

输出：

```
method undefined
"i like turtles" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T15:38:51.567

```
define_method 'fizz' do
  puts 'fizz'
end 
```

...或接受一个块

```
define_method 'fizz', &block 
```

# maven - 其他属性的 Maven 密码加密

> ID：11314379
> 
> 赞同：6
> 
> 时间：2012-07-03T15:35:18.797
> 
> 标签：maven, encryption, mojo

我想使用 Maven 的密码加密，例如它用于 Mojo 属性的节点。我尝试将加密密码粘贴到 mojo 的正确属性中，但它会将其视为纯文本。我*希望*我可以在 Mojo 属性的注释上设置一个属性来解释它可以被加密，如果是这样，使用系统主密码来解密，但我在文档中看不到任何内容那。

有没有人设法将 Maven 的密码加密用于服务器密码节点以外的任何东西？很想为我的 Mojo 做这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:27:28.507

不是一个完整的答案，但希望指向正确的方向......

[maven-scm-plugin](http://maven.apache.org/scm/maven-scm-plugin/examples/bootstrapping-with-pom.html)、[maven-release-plugin](http://maven.apache.org/plugins/maven-release-plugin/faq.html#credentials)和[tomcat6-maven-plugin](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat6-maven-plugin/deploy-only-mojo.html#server)都允许从文件的`<servers>`部分读取密码`${user.home}/.m2/settings.xml`。

也许如果您查看这些插件/目标的源代码，您会发现一个 Maven 核心或共享组件，它允许您做您想做的事情，并且您可以根据需要对其进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T03:01:23.913

@user944849 让我朝着正确的方向开始，这就是解决方案。

如果您使用的是 Maven 2，则需要将以下依赖项添加到您的 mojo：

```
<dependency>
  <groupId>org.sonatype.plexus</groupId>
  <artifactId>plexus-sec-dispatcher</artifactId>
  <version>1.4</version>
  <scope>compile</scope>
</dependency> 
```

并将以下内容放入`src/main/resources/META-INF/plexus/components.xml`：

```
<?xml version="1.0" encoding="utf-8" ?>
<component-set>
  <components>
    <component>
      <role>org.sonatype.plexus.components.sec.dispatcher.SecDispatcher</role>
      <role-hint>mng-4384</role-hint>
      <implementation>org.sonatype.plexus.components.sec.dispatcher.DefaultSecDispatcher</implementation>
      <requirements>
        <requirement>
          <role>org.sonatype.plexus.components.cipher.PlexusCipher</role>
          <role-hint>mng-4384</role-hint>
          <field-name>_cipher</field-name>
        </requirement>
      </requirements>
      <configuration>
        <_configuration-file>~/.m2/settings-security.xml</_configuration-file>
      </configuration>
    </component>
    <component>
      <role>org.sonatype.plexus.components.cipher.PlexusCipher</role>
      <role-hint>mng-4384</role-hint>
      <implementation>org.sonatype.plexus.components.cipher.DefaultPlexusCipher</implementation>
    </component>
  </components>
</component-set> 
```

然后在您的 Mojo 中，将密码作为普通属性获取，并将 a`SecDispatcher`作为具有相同`roleHint`. 如果它不是 Maven 加密字符串，则该`decrypt`方法`String`将返回字符串本身。

```
import org.apache.maven.plugin.AbstractMojo;
import org.apache.maven.plugin.MojoExecutionException;
import org.sonatype.plexus.components.sec.dispatcher.SecDispatcher;
import org.sonatype.plexus.components.sec.dispatcher.SecDispatcherException;

/**
 * @goal echopass
 * 
 * @phase process-sources
 */
public class MyMojo extends AbstractMojo {
  /**
  * The password
  * @parameter expression="${password}"
  */
  private String password;

  /**
   * Plexus component for the SecDispatcher
   * @component roleHint="mng-4384"
   */
  private SecDispatcher secDispatcher;

  private String decrypt(String input) {
    try {
      return secDispatcher.decrypt(input);
    } catch (SecDispatcherException sde) {
      getLog().warn(sde.getMessage());
      return input;
    }
  }

  public void execute() throws MojoExecutionException {
    String s = decrypt(password);
    getLog().info("The password is " + s);
  }
} 
```

该字符串可以在 中的属性中`settings.xml`，在配置文件中，或者您甚至可以在命令行上将加密字符串作为系统属性传递。

参考：

*   [http://jira.codehaus.org/browse/MNG-4384](http://jira.codehaus.org/browse/MNG-4384)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:43:18.000

看看这段代码作为一个示例[SqlExecMojo](https://github.com/mojohaus/sql-maven-plugin/blob/sql-maven-plugin-1.5/src/main/java/org/codehaus/mojo/sql/SqlExecMojo.java#L834)。如果您在插件中，则可以获取密码并对其进行解密。如果您想使用它来过滤资源插件中的属性，我们可能需要编写资源插件的自定义版本。我有一个类似的问题可能最终会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T15:53:16.223

使用 Colselaws 解决方案我得到了一个空指针异常。未设置 SecDispatcher 组件。我需要将注释更改为：

```
//Plexus component for the SecDispatcher
@Component(role = SecDispatcher.class, hint = "mng-4384")
private SecDispatcher secDispatcher; 
```

请注意，这在任何文档注释之外，并且必须从 Maven 注释插件中导入组件。

# java - 虚拟轨迹球实现

> ID：11314384
> 
> 赞同：5
> 
> 时间：2012-07-03T15:35:38.103
> 
> 标签：java, math, opengl, quaternions

在过去的几天里，我一直在尝试为类似 3D 图形的程序的用户界面制作一个虚拟轨迹球的工作实现。但我遇到了麻烦。

查看数字和许多测试，问题似乎是我的四元数的实际串联，但我不知道或不这么认为。我以前从未使用过四元数或虚拟轨迹球，这对我来说是全新的。我正在使用`Quaternion`JOGL 提供的类。我试着自己做，它奏效了（或者至少据我所知），但它完全是一团糟，所以我只选择了 JOGL 的。

当我不连接四元数时，我看到的轻微旋转似乎是我想要的，但是当它只向任何方向移动一点点时当然很难。此代码基于OpenGL wiki 上的[轨迹球教程。](http://www.opengl.org/wiki/Trackball)

当我使用`Quaternion`类的`mult (Quaternion q)`方法时，图形几乎不会移动（甚至比不尝试连接四元数还要少）。

当我尝试使用 Quaternion `class's`add (Quaternion q)` 方法来获得乐趣时，我得到的东西至少可以旋转图形，但不是以任何连贯的方式。当我移动鼠标时，它会闪烁并随机旋转。有时我会得到完全用 NaN 填充的四元数。

在我的代码中，我不会显示其中任何一个，我不知道如何处理我的四元数。我知道我想将它们相乘，因为据我所知，这就是它们的连接方式。但就像我说的我没有成功，我假设搞砸了在我的代码中的其他地方。

无论如何，我的设置有一个`Trackball`带有`public Point3f projectMouse (int x, int y)`方法和一个的类，我在`public void rotateFor (Point3f p1, Point3f p2)`哪里`Point3f`创建了一个类。另一个名为的类`Camera`有一个`public void transform (GLAutoDrawable g)`方法，该方法将调用 OpenGL 方法以根据轨迹球的四元数进行旋转。

这是代码：

```
public Point3f projectMouse (int x, int y)
{
    int off = Screen.WIDTH / 2;  // Half the width of the GLCanvas

    x = x - objx_ - off;         // obj being the 2D center of the graph
    y = off - objy_ - y;

    float t = Util.sq(x) + Util.sq(y); // Util is a class I made with
    float rsq = Util.sq(off);          // simple some math stuff
                                       // off is also the radius of the sphere
    float z;

    if (t >= rsq)
        z = (rsq / 2.0F) / Util.sqrt(t);
    else
        z = Util.sqrt(rsq - t);

    Point3f result = new Point3f (x, y, z);
    return result;
} 
```

这是旋转方法：

```
public void rotateFor (Point3f p1, Point3f p2)
{
    // Vector3f is a class I made, I already know it works
    // all methods in Vector3f modify the object's numbers
    // and return the new modify instance of itself
    Vector3f v1 = new Vector3f(p1.x, p1.y, p1.z).normalize();
    Vector3f v2 = new Vector3f(p2.x, p2.y, p2.z).normalize();

    Vector3f n = v1.copy().cross(v2);
    float theta = (float) Math.acos(v1.dot(v2));

    float real = (float) Math.cos(theta / 2.0F);
    n.multiply((float) Math.sin(theta / 2.0F));

    Quaternion q = new Quaternion(real, n.x, n.y, n.z);

    rotation = q;  // A member that can be accessed by a getter

    // Do magic on the quaternion
} 
```

编辑：

我越来越近了，我发现了一些简单的错误。

1：JOGL 实现将 W 视为实数，而不是 X，我使用 X 表示实数

2：我不是从四元数开始的 1 + 0i + 0j + 0k

3：我没有将四元数转换为opengl的轴/角度

4：我没有将角度转换为opengl的度数

同样正如马库斯指出的那样，我没有使正常正常化，当我这样做时，我看不到太多变化，认为很难说，但他是对的。

现在的问题是，当我做整个事情时，图表会以一种你永远不会相信的剧烈震动。它（有点）朝着你想要的方向移动，但是癫痫发作太猛烈了，无法从中做出任何事情。

这是我的新代码，有一些名称更改：

```
public void rotate (Vector3f v1, Vector3f v2)
{
    Vector3f v1p = v1.copy().normalize();
    Vector3f v2p = v2.copy().normalize();
    Vector3f n = v1p.copy().cross(v2p);

    if (n.length() == 0) return; // Sometimes v1p equals v2p

    float w = (float) Math.acos(v1p.dot(v2p));

    n.normalize().multiply((float) Math.sin(w / 2.0F));
    w = (float) Math.cos(w / 2.0F);

    Quaternion q = new Quaternion(n.x, n.y, n.z, w);
    q.mult(rot);

    rot_ = q;
} 
```

这是OpenGL代码：

```
 Vector3f p1 = tb_.project(x1, y1); // projectMouse [changed name]
    Vector3f p2 = tb_.project(x2, y2);
    tb_.rotate (p1, p2);

    float[] q = tb_.getRotation().toAxis(); // Converts to angle/axis
    gl.glRotatef((float)Math.toDegrees(q[0]), q[1], q[2], q[3]); 
```

改名的原因是因为我删除了`Trackball`课堂上的所有内容并重新开始。可能不是最好的主意，但哦，好吧。

编辑2：

我可以非常肯定地说，投影到球体上没有任何问题。

我也可以说，就整个事情而言，问题似乎是向量。角度看起来很好，但矢量似乎跳来跳去。

编辑3：

**问题是两个四元数的乘法，我可以确认其他一切都按预期工作。在乘法过程中，轴出现了问题！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T23:09:55.463

问题是两个四元数的乘法，我可以确认其他一切都按预期工作。在乘法过程中，轴出现了问题！

你完全正确！！我最近刚刚提交了一个正确的乘法，Jogamp 接受了我的更改。他们在 mult(quaternion) 上的乘法不正确。

我敢肯定，如果您获得最新的 jogl 版本，它将具有正确的 mult(Quaternion)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T18:23:55.500

我做到了！

多亏了[这个](http://www.visgraf.impa.br/Projects/3dp/doc/html2/trackball_8cpp-source.html)C++ 实现，我才能够开发出一个可以工作的轨迹球/弧球接口。我的天哪，我仍然不确定问题出在哪里，但我重写了所有内容，甚至编写了自己的`Quaternions`课程，突然整个事情都奏效了。我还`Vectors`为向量做了一个类。我以前有一个`Vector3f`类，但是`Quaternions`and`Vectors`类充满了静态方法并接受数组。为了便于对四元数进行向量计算，反之亦然。我将在下面链接这两个类的代码，但`Trackball`这里只显示该类。

今天早上我很快就完成了这两节课，所以如果有任何数学错误，嗯，呃，哎呀。我只使用了我需要使用的东西，并确保它们是正确的。这些课程如下：

四元数：http: [//pastebin.com/raxS4Ma9](http://pastebin.com/raxS4Ma9)

载体： http: [//pastebin.com/fU3PKZB9](http://pastebin.com/fU3PKZB9)

这是我的`Trackball`课：

```
public class Trackball
{
    private static final float RADIUS_ = Screen.DFLT_WIDTH / 2.0F;
    private static final int REFRESH_ = 50;
    private static final float SQRT2_ = (float) Math.sqrt(2);
    private static final float SQRT2_INVERSE_ = 1.0F / SQRT2_;

    private int count_;
    private int objx_, objy_;
    private float[] v1_, v2_;
    private float[] rot_;

    public Trackball ()
    {
        v1_ = new float[4];
        v2_ = new float[4];
        rot_ = new float[] {0, 0, 0, 1};
    }

    public void click (int x, int y)
    {
        v1_ = project(x, y);
    }

    public void drag (int x, int y)
    {
        v2_ = project(x, y);

        if (Arrays.equals(v1_, v2_)) return;

        float[] n = Vectors.cross(v2_, v1_, null);
        float[] o = Vectors.sub(v1_, v2_, null);

        float dt = Vectors.len(o) / (2.0F * RADIUS_);

        dt = dt > 1.0F ? 1.0F : dt < -1.0F ? -1.0F : dt;

        float a = 2.0F * (float) Math.asin(dt);

        Vectors.norm_r(n);
        Vectors.mul_r(n, (float) Math.sin(a / 2.0F));

        if (count_++ == REFRESH_) { count_ = 0; Quaternions.norm_r(rot_); }

        float[] q = Arrays.copyOf(n, 4);
        q[3] = (float) Math.cos(a / 2.0F);

        rot_ = Quaternions.mul(q, rot_, rot_);
    }

    public float[] getAxis ()
    {
        return Quaternions.axis(rot_, null);
    }

    public float[] project (float x, float y)
    {
        x = RADIUS_ - objx_ - x;
        y = y - objy_ - RADIUS_;

        float[] v = new float[] {x, y, 0, 0};
        float len = Vectors.len(v);
        float tr = RADIUS_ * SQRT2_INVERSE_;

        if (len < tr)
            v[2] = (float) Math.sqrt(RADIUS_ * RADIUS_ - len * len);
        else
            v[2] = tr * tr / len;

        return v;
    }
} 
```

您可以看到 C++ 示例有很多相似之处。另外我想指出，目前还没有设置`objx_`and`objy_`值的方法。这些用于设置可以移动的图形中心。只是说，所以你不会对这些领域摸不着头脑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:57:32.120

两个归一化向量的叉积本身并未归一化。它的长度是`sin(theta)`。试试这个：

```
n = n.normalize().multiply((float) Math.sin(theta / 2.0F)); 
```

# iphone - 用于视频录制的 ios 数字变焦。如何高效实施？

> ID：11314391
> 
> 赞同：6
> 
> 时间：2012-07-03T15:35:58.987
> 
> 标签：iphone, objective-c, ios, avfoundation

我搜索发现sdk不支持数字放大或缩小，您必须间接进行。我在stackoverflow上找到的方法是`AVCaputureVideoPreviewLayer`在录制的同时进行转换，并对输出视频进行相应的转换后处理（我现在的想法是使用`AVMutableVideoCompositionLayerInstruction's`转换斜坡函数。）。

问题是如何记录用户缩放活动的所有连续过程，我认为这可能是非常复杂的放大和缩小行为我的意思是，例如，我为用户设计了一个滑块来控制缩放，用户可以按住滑块慢慢放大 4 倍（比如最后 3 秒），并且在不松开滑块的情况下快速缩小到 2 倍（比如最后 0.5 秒），我必须根据时间线记录所有这些变化。

我真的觉得这个记录很复杂，另外你还必须保证它不会花费太多的资源来保持视频录制过程的流畅性能！或任何其他实现数码变焦的方式？感谢任何帮助者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T13:22:36.750

您可以`AVCaputureVideoPreviewLayer`在录制时进行转换并使用缩放值来操作`AVCaptureVideoDataOutput`委托中的帧。委托方法`captureOutput:didOutputSampleBuffer:fromConnection:`可用于处理视频帧。请参阅 AVFoundation 文档[AVFoundation 文档](http://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/AVFoundationPG.pdf)、媒体捕获 > 处理视频帧。

# objective-c - 在视图控制器中维护子视图的链接

> ID：11314392
> 
> 赞同：2
> 
> 时间：2012-07-03T15:36:06.880
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

这是我的情况：我有一个`UIViewController`管理子视图层次结构的，可能如下所示：

![查看层次结构](../Images/76c2ba12f1c1da54845d921c8200df64.png)

此视图是从`.xib`. 我希望能够保持对 topView 的每个子视图的访问——也就是说，我想要一个指向每个子视图的指针，这样我就可以说：

```
[button1 setText:@"Hello!"]; 
```

通常，要做到这一点，我会使用 Interface Builder 连接我想要访问的每个元素，从而生成一个看起来像这样的标题：

```
@interface MyViewController : UIViewController
{
    __weak IBOutlet UIView *view;
    __weak IBOutlet UILabel *label;
    __weak IBOutlet UIButton *button1;
    __weak IBOutlet UIButton *button2;
}

@end 
```

这些实例变量是`__weak`，这很好，因为当我的视图控制器“获取”它们时，它们已经由我的视图控制器的根视图拥有（令人困惑的是，我在快速图中将其标记为“topView”）。事实上，我希望这些引用是弱的——当我的根视图被释放时，它的所有子视图也应该被释放。伟大的。

但是假设我想创建一个新的 UI 元素，也许是一个自定义按钮，完全在代码中。我将调用这个元素`CustomViewClass`，它将从`UIView`. 我将创建的实例`CustomViewClass`将被调用`customButton`。与我的视图的其他子视图一样，我希望“访问”`customButton`以便与它进行交互。然而，我知道，像任何其他子视图一样，`customButton`它的父视图将拥有它，这就是它应该的样子——再次，我希望它在我的视图被释放时被释放。这让我觉得我应该将此视图声明`__weak`为我的视图控制器的实例变量或属性。让我们这样做：

```
@interface MyViewController : UIViewController
{
    __weak IBOutlet UIView *view;
    __weak IBOutlet UILabel *label;
    __weak IBOutlet UIButton *button1;
    __weak IBOutlet UIButton *button2;
    __weak CustomViewClass *customButton;
}

@end 
```

然后，在我的实现中：

```
@implementation MyViewController
- (void)viewDidLoad
{
    [super viewDidLoad];

    customButton = [[CustomViewClass alloc] init];
    [[self view] addSubview:customButton];
}
@end 
```

正如您可能已经意识到的那样，这不起作用，编译器将发出警告以启动。就像是：

```
Assigning retained object to weak variable; object 
will be released after assignment 
```

我目前用一些非常糟糕的风格来躲避这种警告：

```
@implementation MyViewController
- (void)viewDidLoad
{
    [super viewDidLoad];

    CustomViewClass *customButtonLocal = [[CustomViewClass alloc] init];
    [[self view] addSubview:customButtonLocal];
    customButton = customButtonLocal;
}
@end 
```

这样，我得到了我想要的：

1.  屏幕上的 CustomViewClass 实例...
2.  ...只有一个所有者，它的超级视图...
3.  ...并且没有挥之不去的变量（customButtonLocal 在块结束后立即释放）。

但这不可能是做到这一点的“正确”方式。所以，最后，我的问题：

**在不使用这种中间人解决方法的情况下，我*应该*如何分配和实例化这个以编程方式创建的变量？`__weak`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:50:02.157

做`CustomViewClass *customButton`一个强有力的参考。

您通常为子视图声明变量的原因`__weak IBOutlet`是这些链接的存在并不意味着所有权。子视图归从 NIB/Storyboard 实例化的对象所有。你直接拥有那个对象，你也间接拥有它的依赖对象。

这`customButton`是一个不同的故事：您以编程方式创建它，因此您的 NIB/Storyboard 不拥有它。因此，您应该引用它`__strong`（这是没有 ARC 修饰符时的默认值）。

# google-apps-script - 如何将文档添加到文件夹

> ID：11314393
> 
> 赞同：2
> 
> 时间：2012-07-03T15:36:08.917
> 
> 标签：google-apps-script

我正在使用 Google App Script 生成一个文档（特别是一个文档，而不是电子表格），我需要能够将它添加到我称为“测试文档”的文件夹中。

我努力了

```
doc.addToFolder("Test Documents"); 
```

但是，在调试模式下，我收到了找不到方法 addToFolder 的错误。我正在尝试使用此功能：[https ://developers.google.com/apps-script/class_file#addToFolder](https://developers.google.com/apps-script/class_file#addToFolder)

有人可以给我一个例子来说明我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T15:44:43.590

addToFolder 方法是 DocsList 服务的一部分，这里是一个例子：

```
 var Doc = DocsList.getFileById('1INkRIviwdjMC-PVT9io5LpiiLW8VwwIfgbq2E4xvKEo');
  var gas = DocsList.getFolderById('0B3qSFd3iikE3NWY0dndsMTFZMDQ')
  Doc.addToFolder(gas) 
```

# eclipse - 如何使用 Maven 和 Jetty 在 Eclipse 中创建新的 JSP 项目

> ID：11314394
> 
> 赞同：0
> 
> 时间：2012-07-03T15:36:14.267
> 
> 标签：eclipse, jsp, web-applications, jetty, maven-3

我不熟悉需要在项目中一起使用的许多技术。我已经为 Eclipse 安装了一个 Jetty 插件，并且还让 maven3 使用它。

我想从头开始一个新的 web 应用程序项目，它将使用 JSP，但我希望它遵循 Maven 项目的约定。

我已经知道 JSP，所以学习这不是这里的挑战，只需设置项目即可。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:39:09.060

你可以按照这里的教程

[http://wiki.eclipse.org/Jetty/Tutorial/Jetty_and_Maven_HelloWorld](http://wiki.eclipse.org/Jetty/Tutorial/Jetty_and_Maven_HelloWorld)

您真正想要的唯一区别是，在该示例中，您将使用 .jsp 和您希望分别使用的标签，而不是 index.html。

maven、servlet 和 jetty 的用法仍然几乎相同。

# python - 从可变长度字符串解析值的最佳方法是什么？

> ID：11314395
> 
> 赞同：2
> 
> 时间：2012-07-03T15:36:15.423
> 
> 标签：python

假设我有一串由可变长度的逗号分隔的整数。拆分字符串并使用值更新变量（如果存在）的最佳方法是什么？

目前，我有以下内容。

```
a, b, c = 10, 10, 1    #default values
mylist = [int(x) for x in input.split(',')]
if len(mylist) == 2: a, b = mylist
else: a, b, c = mylist 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:49:10.933

```
a, b, c = 10, 10, 1    #default values
mylist = [int(x) for x in input.split(',')]
a, b, c = mylist + [a, b, c][len(mylist):] 
```

我认为这很难看的原因是聚合处理局部变量是非 Pythonic 的。实例成员会更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:54:39.493

您可以使用辅助函数：

```
def f(a=10, b=10, c=1):
    return a, b, c

a, b, c = f(*map(int, input.split())) 
```

这不会更快——这只是我想到的另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:47:55.257

使用切片将用户输入与默认参数列表结合起来：

```
>>> defaults = [10, 10, 1]
>>> user_input = '15 20'
>>> user_ints = map(int, user_input.split())
>>> combined = user_ints + defaults[len(user_ints):]
>>> a, b, c = combined 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T15:40:03.463

```
defaults=[10,10,1]
mylist=[int(x) for x in ipt.split(',')]
defaults[:len(mylist)]=mylist
a,b,c=defaults 
```

不过，这会发生变化`defaults`......为了避免这种情况，这样的事情会起作用：

```
defaults=[10,10,1]
mylist=[int(x) for x in ipt.split(',')]
temp_defaults=defaults[:]
temp_defaults[:len(mylist)]=mylist
a,b,c=temp_defaults 
```

此外，请小心`input`用作变量名。它是 python 内置的名称，因此您正在删除对该函数的轻松访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T15:58:47.720

`izip_longest`如果更长，则允许采用默认值的长度：

```
>>> from itertools import izip_longest
>>> inp = '3, 56'
>>> a, b, c = [i if i else j for i, j in izip_longest([int(x) for x in inp.split(',')], (10, 10, 1))]
>>> a, b, c
(3, 56, 1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T16:21:35.140

```
a, b, c = (map(int, user_input.split(',')) + [20,20,10])[:3] 
```

或者

```
def parse(user_input, *args):
    return (map(int, user_input.split(',')) + list(args))[:len(args)]

>>> a, b, c = parse('1,2', 20, 20, 10)
>>> a, b, c
(1, 2, 20)
>>> a, b, c, d = parse('1,2,3,4,5', 0, 0, 0, 0)
>>> a, b, c, d
(1, 2, 3, 4) 
```

# performance - 不变性会导致性能问题吗？

> ID：11314399
> 
> 赞同：2
> 
> 时间：2012-07-03T15:36:22.623
> 
> 标签：performance, functional-programming, immutability

我刚刚进入函数式编程并试图了解何时应该使类/属性可变。

当处理大量字符串连接时，我们知道最好使用 StringBuilder，例如：

```
using System;
using System.Diagnostics;
using System.Text;

namespace ConsoleApplication3
{
    internal class Program
    {
        private static string myStr;
        private static readonly StringBuilder mySb = new StringBuilder();

        private static void Main(string[] args)
        {
            Profile("+", 100000, () => myStr = myStr + "a"); // Takes 2236 ms
            Profile("SB", 100000, () => mySb.Append("a")); // Takes 1 ms
        }

        private static void Profile(string description, int iterations, Action func)
        {
            // clean up
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();

            // warm up 
            func();

            Stopwatch watch = Stopwatch.StartNew();
            for (int i = 0; i < iterations; i++)
            {
                func();
            }
            watch.Stop();
            Console.Write(description);
            Console.WriteLine(" Time Elapsed {0} ms", watch.ElapsedMilliseconds);
        }
    }
} 
```

这是众所周知的情况，在这种情况下，通过与运算符连接字符串的性能要高**得多**。我的假设是通过创建更少的字符串来实现更好的性能。`StringBuilder``+``StringBuilder`

性能和不变性之间是否存在平衡，或者这种情况是出于某种原因的例外？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T15:46:55.800

有效地连接字符串不是关于可变结构与不可变结构，而是更多关于选择正确的数据结构和评估策略以支持*O(1)*追加。

通常，各种树用于支持快速追加，从而最大限度地提高共享，并最大限度地减少复制。示例结构包括[绳索](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)和[手指树](http://en.wikipedia.org/wiki/Finger_tree)。

在某些情况下，惰性求值也有帮助（例如，如果连接涉及复制，则可以延迟到是否以及何时实际需要字符串的尾部）。在这种情况下，严格的数据结构可能会产生额外的复制开销，做的工作超出了必要的范围。

在您的情况下，我怀疑`+`涉及参数的严格副本（即*O(n+m)*）工作，而字符串构建器可以通过摊销字符串缓冲区的重新分配来避免一些工作（为您提供树状性能，以要求线性使用结构和失去线程安全为代价）。

# macos - 带有命令行界面的 Core Data Cocoa 应用程序

> ID：11314400
> 
> 赞同：3
> 
> 时间：2012-07-03T15:36:26.420
> 
> 标签：macos, core-data, command-line, osx-lion

我想开发一个带有命令行界面的 Cocoa 应用程序。应用程序使用核心数据来持久化数据。

是否可以在两种模式之间共享 Core Data 模型？

编辑：我想让用户同时使用命令行和 GUI 作为具有相同数据的相同应用程序。如何做到这一点？

编辑2：这发生在很久以前，但我认为更新我解决问题的方式很好。

由于必须要求在两个应用程序之间共享数据，因此我将数据存储在一个由 sqlite 支持的 Core Data 中的固定文件位置。然后对 GUI 和命令行应用程序使用相同的东西。我以为会有线程安全的情况，没有为它写任何具体的代码。即使两个应用程序同时运行，也没有数据损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:31:56.083

MVC 模式旨在让您的模型在不依赖其表示的情况下工作。

所以，如果你做得正确，不管你是使用图形界面还是命令行。

# c# - 当第二个键已经被按下时如何检测键向下/向上

> ID：11314401
> 
> 赞同：2
> 
> 时间：2012-07-03T15:36:27.113
> 
> 标签：c#, winforms, keyboard

在我的应用程序中，我允许用户通过使用.按住*右箭头键*`ProcessCmdKey`来滚动电影。现在我想让用户能够在需要时增加滚动速度。理想情况下，用户应该能够按住*右箭头键*，然后当他决定增加速度时，他应该在不释放*右箭头键*的情况下，同时*按住 Shift 键*，当他决定回到正常速度时，他应该简单地释放*Shift 键*。因此，滚动速度的差异应仅从应添加或删除的*Shift 键*修饰符到*右箭头键*压力中给出。

我尝试了这样的代码，但没有成功（在这个测试示例中，我的表单中有一个简单的标签）：

```
int count = 0;
bool keyRightDown = false;

protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == Keys.Right)
    {
        keyRightDown = true;
        count++;
        label.Text = "count = " + count.ToString();
        return true;
    }
    if (keyData == (Keys.Shift | Keys.ShiftKey) && keyRightDown)
    {
        count += 10;
        label.Text = "count = " + count.ToString();
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

protected override bool ProcessKeyMessage(ref Message m)
{
    if ((Keys)m.WParam == Keys.Right)
    {
        if (m.Msg == 0x101) // KEYUP
        {
            keyDown = false;
            return true;
        }
    }
    return base.ProcessKeyMessage(ref m);
} 
```

当用户将*Shift 键*添加到*右箭头*时，`keyData`不包含`(Keys.Shift | Keys.Right)`我所期望的但`(Keys.Shift | Keys.ShiftKey)`. 但是这个问题仍然可以通过 boolean 来解决`keyRightDown`。主要问题是，当用户通过此时仅按下*右箭头来释放**Shift 键*时，不会触发任何其他调用。我怎样才能实现我的目标？*`ProcessCmdKey``ProcessKeyMessage`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:20:30.937

我发现的唯一方法是结合使用调用`GetKeyState`API 函数 (user32.dll) 和`Timer`. 这是它在测试应用程序上的工作：

```
System.Windows.Forms.Timer keyManagerTimer = new System.Windows.Forms.Timer();
int count = 0;

public Form1()
{
    InitializeComponent();

    this.keyManagerTimer.Tick += (s, e) => ProcessKeys();
    this.keyManagerTimer.Interval = 25;
}

protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if ((keyData & Keys.Right) != 0)
    {
        keyManagerTimer.Enabled = true;
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void ProcessKeys()
{
    bool isShiftKeyPressed = IsKeyPressed(Keys.ShiftKey);
    bool isRightKeyPressed = IsKeyPressed(Keys.Right);

    if (isRightKeyPressed && !isShiftKeyPressed)
    {
        count++;
    }
    else if (isRightKeyPressed && isShiftKeyPressed)
    {
        count += 10;
    }
    label.Text = "count = " + count.ToString();
}

public static bool IsKeyPressed(Keys key)
{
    return BitConverter.GetBytes(GetKeyState((int)key))[1] > 0;
}

[DllImport("user32")]
private static extern short GetKeyState(int vKey); 
```

在我的真实代码中，我禁用了我拥有视频`Timer`的`Leave`事件。`Control`可能另一种解决方案是使用 IMessageFilter（参见[此处](https://stackoverflow.com/a/1927644/622884)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:28:22.177

一种可能的解决方案是将所有可能的按键存储在 bool 数组中，然后检查 bool 数组是否为真。在按住按钮的情况下，您可以将按钮键设置为 true，并在释放键时将其设置为 false。当我需要检查多个按键时，我通常倾向于使用此选项。*

# xml - 使用 XSLT 从 XML 中删除空节点

> ID：11314402
> 
> 赞同：0
> 
> 时间：2012-07-03T15:36:27.333
> 
> 标签：xml, xslt

我无法使用 XSLT 从我的 XML 中删除空节点。例如，XSLT 中的这个区域：

```
 <RCPNT_NM>
                <snm>
                    <xsl:value-of select="SNM"/>
                </snm>
                <gv_nm>
                    <xsl:value-of select="GVN_NM"/>
                </gv_nm>
                <init>
                    <xsl:value-of select="INIT"/>
                </init>
            </RCPNT_NM> 
```

其中一些节点内的数据完全是空的，但我仍在取回它们。我尝试将`match="node()|@*"`模板区域应用于 xslt，但这也不起作用。这是整个 XSLT 文件：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" version="2.0">
<xsl:output encoding="UTF-8" indent="yes" method="xml" version="1.0"/>
<xsl:output indent="yes" omit-xml-declaration="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/">
    <Return>
        <xsl:apply-templates select="//IPERSON/item"/>
    </Return>
</xsl:template>
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="*[not(@*) and not(*) and (not(text()) )]"/>
<xsl:template match="IPERSON/item">
    <T5018Slip>
        <RCPNT_NM>
            <snm>
                <xsl:value-of select="SNM"/>
            </snm>
            <gv_nm>
                <xsl:value-of select="GVN_NM"/>
            </gv_nm>
            <init>
                <xsl:value-of select="INIT"/>
            </init>
        </RCPNT_NM>
        <sin>
            <xsl:value-of select="SIN"/>
        </sin>
        <rcpnt_bn>
            <xsl:value-of select="RCPNT_BN"/>
        </rcpnt_bn>
        <CORP_PTNRP_NM>
            <l1_nm>
                <xsl:value-of select="CORPL1_NM"/>
            </l1_nm>
            <l2_nm>
                <xsl:value-of select="CORPL2_NM"/>
            </l2_nm>
        </CORP_PTNRP_NM>
        <rcpnt_tcd>
            <xsl:value-of select="RCPNT_TCD"/>
        </rcpnt_tcd>
        <RCPNT_ADDR>
            <addr_l1_txt>
                <xsl:value-of select="ADDR_L1_TXT"/>
            </addr_l1_txt>
            <addr_l2_txt>
                <xsl:value-of select="ADDR_L2_TXT"/>
            </addr_l2_txt>
            <cty_nm>
                <xsl:value-of select="CTY_NM"/>
            </cty_nm>
            <prov_cd>
                <xsl:value-of select="PROV_CD"/>
            </prov_cd>
            <cntry_cd>
                <xsl:value-of select="CNTRY_CD"/>
            </cntry_cd>
            <pstl_cd>
                <xsl:value-of select="PSTL_CD"/>
            </pstl_cd>
        </RCPNT_ADDR>
        <bn>
            <xsl:value-of select="BN"/>
        </bn>
        <sbctrcr_amt>
            <xsl:value-of select="SBCTRCR_AMT"/>
        </sbctrcr_amt>
        <rpt_tcd>
            <xsl:value-of select="RPT_TCD"/>
        </rpt_tcd>
    </T5018Slip>
    <xsl:for-each select="Return/T5018Summary/slp_cnt">
        <xsl:value-of select="SLP_CNT='1'"/>
        <xsl:if test="slp_cnt='1'">
            <T5018Summary>
                <bn>
                    <xsl:value-of select="BN1"/>
                </bn>
                <PAYR_NM>
                    <l1_nm>
                        <xsl:value-of select="L1_NM"/>
                    </l1_nm>
                    <l2_nm>
                        <xsl:value-of select="L2_NM"/>
                    </l2_nm>
                    <l3_nm>
                        <xsl:value-of select="L3_NM"/>
                    </l3_nm>
                </PAYR_NM>
                <PAYR_ADDR>
                    <addr_l1_txt>
                        <xsl:value-of select="PAYRADDR_L1_TXT"/>
                    </addr_l1_txt>
                    <addr_l2_txt>
                        <xsl:value-of select="PAYRADDR_L2_TXT"/>
                    </addr_l2_txt>
                    <cty_nm>
                        <xsl:value-of select="PAYRCTY_NM"/>
                    </cty_nm>
                    <prov_cd>
                        <xsl:value-of select="PAYRPROV_CD"/>
                    </prov_cd>
                    <cntry_cd>
                        <xsl:value-of select="PAYRCNTRY_CD"/>
                    </cntry_cd>
                    <pstl_cd>
                        <xsl:value-of select="PAYRPSTL_CD"/>
                    </pstl_cd>
                </PAYR_ADDR>
                <CNTC>
                    <cntc_nm>
                        <xsl:value-of select="CNTC_NM"/>
                    </cntc_nm>
                    <cntc_area_cd>
                        <xsl:value-of select="CNTC_AREA_CD"/>
                    </cntc_area_cd>
                    <cntc_phn_nbr>
                        <xsl:value-of select="CNTC_PHN_NBR"/>
                    </cntc_phn_nbr>
                    <cntc_extn_nbr>
                        <xsl:value-of select="CNTC_EXTN_NBR"/>
                    </cntc_extn_nbr>
                </CNTC>
                <PRD_END_DT>
                    <dy>
                        <xsl:value-of select="DY"/>
                    </dy>
                    <mo>
                        <xsl:value-of select="MO"/>
                    </mo>
                    <yr>
                        <xsl:value-of select="YR"/>
                    </yr>
                </PRD_END_DT>
                <slp_cnt>
                    <xsl:value-of select="SLP_CNT"/>
                </slp_cnt>
                <tot_sbctrcr_amt>
                    <xsl:value-of select="TOT_SBCTRCR_AMT"/>
                </tot_sbctrcr_amt>
                <rpt_tcd>
                    <xsl:value-of select="RPT_TCD"/>
                </rpt_tcd>
            </T5018Summary>
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:01:44.177

You can try the following XSLT.

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" method="xml"/>

    <xsl:template match="*[not(child::node())]"/>

    <xsl:template match="@*|node()">
       <xsl:copy>
          <xsl:apply-templates />
       </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

The first template will get rid of any node that is empty.

Second template, lets the other node copy as it is.

# visual-studio-2010 - VS2012RC：如何向现有代码审查添加变更集？

> ID：11314404
> 
> 赞同：1
> 
> 时间：2012-07-03T15:36:29.343
> 
> 标签：visual-studio-2010

我创建了一个代码审查，然后收到了反馈（发现了错误），现在我想上传一个变更集，其中修复了相同的代码审查的错误。我如何在带有 TFS 的 VS2012RC 中做到这一点？

# javascript - 从上到下，从左到右更改图像的加载

> ID：11314408
> 
> 赞同：1
> 
> 时间：2012-07-03T15:36:37.177
> 
> 标签：javascript, css

我正在使用本教程[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)创建一个带有延迟加载的网格，正如您在此处看到的那样[http://jsfiddle.net/gaz2A/](http://jsfiddle.net/gaz2A/)

问题是图像加载像

```
1|3|5|7
2|4|6|8 
```

代替

```
1|2|3|4
5|6|7|8 
```

并在大多数情况下将开始屏幕留空。

我怎样才能改变这个？

*我尝试了无限滚动的砌体插件，但是我不想依赖静态页面，所以砌体不是我的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:04:38.237

图像将按照它们在 DOM 中呈现的顺序加载。

要么更改 DOM 表示，以便图像以正确的顺序附加到 DOM 中（例如，并排优先），要么使用一些基于 JS 的预加载来按您想要的顺序预加载图像。

# c# - 当有多个区域时，在流畅的安全中检查哪里发生了违规

> ID：11314409
> 
> 赞同：1
> 
> 时间：2012-07-03T15:36:42.183
> 
> 标签：c#, asp.net-mvc-3, fluent-security

我正在开发一个应用程序，并使用 Fluent Security 对其进行保护。我在 Web 应用程序中有 2 个不同的区域，即管理区域和成员区域。我按照 fluent 安全网站中的指南实施了我的策略违规处理程序。一切正常，除了抛出异常时我需要重定向到错误页面。这些根据您所在的地区而有所不同。例如，管理区域的 ForbiddenAccess 错误页面与成员区域的错误页面不同。

我的 IPolicyViolationHandler 实现如下。

```
public class DenyAnonymousAccessPolicyViolationHandler : IPolicyViolationHandler
{
    public ActionResult Handle(PolicyViolationException exception)
    {
        return
            new RedirectToRouteResult(
                new RouteValueDictionary(new { action = "AnonymousError", controller = "Error", area = "Admin" }));
    }
} 
```

我需要找到错误发生的位置，以便当我重定向我的区域是“管理员”或“成员”时，我无法弄清楚如何从异常中获取该信息。如果我能得到这些信息，重定向到适当的页面是微不足道的。任何帮助、建议，或者如果不可能，请提供解决方法。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:41:04.257

**目前无法从 FluentSecurity 中提取该信息，但无论如何应该很容易做到。**

下面是两个扩展方法，可以帮助您获取当前区域名称。

```
public static string GetAreaName(this RouteData routeData)
{
    object value;
    if (routeData.DataTokens.TryGetValue("area", out value))
    {
        return (value as string);
    }
    return GetAreaName(routeData.Route);
}

public static string GetAreaName(this RouteBase route)
{
    var areRoute = route as IRouteWithArea;
    if (areRoute != null)
    {
        return areRoute.Area;
    }

    var standardRoute = route as Route;
    if ((standardRoute != null) && (standardRoute.DataTokens != null))
    {
        return (standardRoute.DataTokens["area"] as string) ?? string.Empty;
    }

    return string.Empty;
} 
```

这里是你将如何使用它：

```
public class DenyAnonymousAccessPolicyViolationHandler : IPolicyViolationHandler
{
    public ActionResult Handle(PolicyViolationException exception)
    {
        var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(HttpContext.Current));
        var areaName = routeData.GetAreaName();
        return
            new RedirectToRouteResult(
                new RouteValueDictionary(new { action = "AnonymousError", controller = "Error", area = areaName }));
    }
} 
```

随意为其[添加功能请求](https://github.com/kristofferahl/FluentSecurity/issues)。

# java - HttpServlet 使用 @Path("/path") 和 @POST 与 doPost

> ID：11314418
> 
> 赞同：2
> 
> 时间：2012-07-03T15:37:17.690
> 
> 标签：java, servlets

我对 @Path("/path") 与 @POST 方法与 doPost(HttpServletRequest request, HttpServletResponse response) 方法的 HttpServlet 用法有点困惑。我见过很多很好的 @Path 用法示例，但从来没有一个 doPost 的有效示例。当我尝试使用 doPost 时，它永远不会被调用。

首先，有什么区别，哪个是更好的方法？另外，我在 doPost 上做错了什么

```
public class PostExample extends HttpServlet{

@Override
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

    // HttpServlet doPost never gets called
    System.out.println("hit test doPost "+request.getRequestURI());

}
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:55:21.060

```
"what's the difference, and which is a better way to go" 
```

@GET、@PUT、@POST、@DELETE 和 @HEAD 注释是 JAX-RS 的一部分：用于 RESTful Web 服务规范的 Java API，用于指定资源的 HTTP 请求类型，并在 Jersey 和 Apache 等 Web 服务框架中实现CXF，在您实际使用这些框架之前，您不会使用它们。

[维基 JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)

```
"what am I doing wrong with the doPost" 
```

您需要在 web.xml 中指定 servlet

```
<servlet>
  <servlet-name>PostExample</servlet-name>
  <servlet-class>com.examples.PostExample</servlet-class>
</servlet>
<servlet-mapping>
   <servlet-name>PostExample</servlet-name>
   <url-pattern>/myservlet/*</url-pattern>
</servlet-mapping> 
```

# git - 路径规范应该如何工作？

> ID：11314419
> 
> 赞同：2
> 
> 时间：2012-07-03T15:37:19.343
> 
> 标签：git, git-status

我在使用带有路径规范的 git-status 时观察到一种奇怪的行为。我希望您对它是预期行为还是 git 中的未定义行为提出意见。

**初始设置**

```
$ mkdir main && cd main
$ git init .
Initialized empty Git repository in d:/temp/main/.git/
$ touch test[1].txt
$ touch test[2].txt 
```

**以下几条可以理解**

```
$ # 1\. escaped square brackets
$ git status test\[1\].txt --short        
?? test[1].txt

$ # 2\. escaped square brackets with range
$ git status test\[[1-9]\].txt --short    
?? test[1].txt
?? test[2].txt

$ # 3\. unmatched range, with what looks like a fallback to literal comparison
$ git status test[1].txt --short          
?? test[1].txt 
```

**意外行为的附加设置**

```
$ touch test1.txt 
```

**意外行为**

```
$ # 4\. matched range, so no fallback to literal comparison (this one looks OK)
$ git status test[1].txt --short
?? test1.txt

$ # 5\. escaped square brackets => I would expect only test[1].txt to be returned
$ git status test\[1\].txt --short
?? test1.txt
?? test[1].txt

$ # 6\. escaped square brackets with range => I would expect only test[1].txt 
$ # and test[2].txt to be returned
$ git status test\[[1-9]\].txt --short
?? test1.txt
?? test[1].txt
?? test[2].txt

$ # 7\. only escaping the last square bracket
$ # result looks similar to the 5th case
$ git status test[1\].txt --short
?? test1.txt
?? test[1].txt 
```

**额外设置带来更多乐趣**

```
$ git add test1.txt
$ rm test1.txt
$ touch test2.txt 
```

**更多意外行为**

```
$ # 8\. ???
$ git status test[1].txt --short
AD test1.txt
?? test[1].txt

$ # 9\. We lost test1.txt ???
$ git status test[1-2].txt --short
?? test2.txt

$ # Woo... Should this really work?
$ git status test[*.txt --short
AD test1.txt
?? test2.txt
?? test[1].txt
?? test[2].txt 
```

我在那里有点困惑。我已经阅读了与[pathspec](http://git-scm.com/docs/gitglossary.html)相关的 Git 文档，但并没有那么详细。

谁能帮我理解背后的逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:03:08.637

这里有很多事情要讨论，但我会尽量关注：**1.**这背后的逻辑，**2.**它如何修改行为。

# 逻辑

大多数*路径扩展*是由 shell 完成的（因此我的评论）。有些是由 git 完成的，当它有它需要的时候。

# 一些测试

## 设置

我用这个程序来调查这个问题：

```
include <stdio.h>

int
main(int argc, char **argv)
{
    int i;

    for (i = 1; i < argc; i++) {
            puts(argv[i]);
    }
} 
```

我知道，这是非常高技能的编程。

## 测试

我们现在可以看看发生了什么，看看 shell 如何修改 git 接收的内容：

**第 1、2、3、4 点**：一切正常，运行小程序也会给你同样的结果。

```
$ ./a.out test\[1\].txt test\[[1-9]\].txt test[1].txt
test[1].txt
test[1].txt
test[2].txt
test[1].txt 
```

**第 5、6、7 点**：这次由 Git 处理，行为并不令人惊讶（同时进行全局和文字比较）

```
$ ./a.out test\[1\].txt test\[[1-9]\].txt test[1\].txt
test[1].txt
test[1].txt
test[2].txt
test[1].txt 
```

**第 8、9、10 点**：嗯，根据我们之前所见，这不再令人惊讶。对于**9.**，没有与 test1.txt 匹配的 bash 比较（已删除，因此，...已删除）

```
$ ./a.out test[1].txt                         
test[1].txt

$ ./a.out test[1-2].txt          
test2.txt

$ ./a.out test[*.txt
test[1].txt
test[2].txt 
```

## 结论

如果你想测试 Git 处理 pathspec 的方式，你应该用双引号将你的路径括起来：

```
$ ./a.out "test[*.txt" "test[1\].txt"
test[*.txt
test[1\].txt 
```

希望有帮助，

# android - PROPFIND Box.com 和 WebDav (JackRabbit)

> ID：11314420
> 
> 赞同：0
> 
> 时间：2012-07-03T15:37:25.327
> 
> 标签：android, webdav, jackrabbit, box-api

为了绕过 Box 文件/文件夹 ID 并支持许多其他服务，我决定使用 WebDAV 实现，因为我对我的 linux 机器上的它有点熟悉。我选择了一个基于 JackRabbit 的库，经过修改后可以在 Android 上运行，这似乎适合我的需求。然而，没过多久，我就遇到了问题。

当试图列出 Box 的根条目时，multiStatus.getResponses() 返回一个空数组。当访问另一个 webdav 服务器时，我得到了预期的响应。两台服务器都按预期返回状态代码 207。

我的代码在下面，有什么想法吗？

编辑：我*可以*移动文件，但列出目录的条目不起作用：/

```
 String host = "https://www.box.com/dav/";
            //String host = "http://demo.sabredav.org/";
            hostConfig = new HostConfiguration();
            hostConfig.setHost(host); 
            HttpConnectionManager connectionManager = new MultiThreadedHttpConnectionManager();
            HttpConnectionManagerParams params = new HttpConnectionManagerParams();
            int maxHostConnections = 20;
            params.setMaxConnectionsPerHost(hostConfig, maxHostConnections);
            connectionManager.setParams(params);    
            client = new HttpClient(connectionManager);
            Credentials creds = new UsernamePasswordCredentials("BOXEMAILADDRESS", "MYBOXPASSWORD");
            //Credentials creds = new UsernamePasswordCredentials("testuser", "test");
            client.getState().setCredentials(AuthScope.ANY, creds);
            client.setHostConfiguration(hostConfig);
            try
            {
                String propfindUri = host;
                DavMethod method = new PropFindMethod(propfindUri, DavConstants.PROPFIND_ALL_PROP, DavConstants.DEPTH_1);
                client.executeMethod(method);
                Log.i("Status: " + method.getStatusCode());
                MultiStatus multiStatus = method.getResponseBodyAsMultiStatus();
                MultiStatusResponse[] responses = multiStatus.getResponses();
                Log.i("Length: " + responses.length);
                for(MultiStatusResponse response : responses)
                {
                    Log.i("File: " + response.getHref());
                }
            }
            catch (Exception e) 
            {
                Log.printStackTrace(e);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:32:20.273

虽然 Box 对 WebDAV 有一些支持，但我们目前只在 iOS 上正式支持它。我们的测试表明，我们的 DAV 实现与 Windows 本机 DAV 客户端以及 Panic-Transmit Mac 特定客户端配合得非常好。虽然那里的互动并不完全完美。

Box WebDAV 不适用于本机 osX (Mac) webDAV 客户端。预计会有巨大的延迟，因为看起来客户端会在显示任何内容之前尝试加载整个树。

Linux 用户可能会在 StackTrace 上告诉您他们尝试过的各种操作系统 webDAV 客户端/库中的哪些以及哪些比其他的运行得更好。

We do have plans to turn the crank and 10x improve our webDAV support sometime later this year, but we do not have a specific date, and just the nature of webDAV clients is such that even when we fix many of the issues with it, some client experiences on webDAV may still suck. For that reason we may only officially endorse a couple webDAV clients/libs per platform.

Hope that helps.

# java - Gson gson = new Gson().toJson(data) - 不兼容的类型

> ID：11314422
> 
> 赞同：2
> 
> 时间：2012-07-03T15:37:29.617
> 
> 标签：java, json, gson

我一直在关注关于将对象数组转换为 JSON 的教程，但我遇到了一些我找不到解决方案的错误。

**代码**

60 - 64 号线

```
Gson gson = new Gson().toJson(data);
response.setContentType("application/json"); 
response.setCharacterEncoding("utf-8");
response.getWriter().write(gson); 
```

**错误**

60 号线

```
incompatible types
found   : java.lang.String
required: com.google.gson.Gson
            Gson gson = new Gson().toJson(data); 
```

第 64 行

```
cannot find symbol
symbol  : method write(com.google.gson.Gson)
location: class java.io.PrintWriter
            response.getWriter().write(gson); 
```

有谁知道如何正确地做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:43:34.527

从您的错误消息中当然可以看出它应该是

```
String gson = new Gson().toJson(data); 
```

这似乎解决了这两个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:47:29.517

利用

> toJson() – 将 Java 对象转换为 JSON 格式
> 
> fromJson() – 将 JSON 转换为 Java 对象

示例：

```
Employee obj = new Employee(); // Your java object
...

Gson gson = new Gson();

// convert java object to JSON format,
// and returned as JSON formatted string
String json = gson.toJson(obj);

response.getWriter().write(json); 
```

# c# - 是否有任何 .net 的网络浏览器引擎可以返回响应 cookie 及其路径？

> ID：11314425
> 
> 赞同：2
> 
> 时间：2012-07-03T15:37:34.353
> 
> 标签：c#, .net, cookies, webbrowser-control

我需要一个用于在我的 C# 应用程序中使用的 Web 浏览器引擎（与 .Net 的“WebBrowser”相同）。我需要一个引擎，它可以为每个请求返回一个 cookie 集合，但具有完整的详细信息，例如路径/域等...我尝试了许多浏览器引擎，但无法找到一个可以将这个微不足道的事情还给我的引擎实际上，.Net 的“WebBrowser”对我来说是完美的，但我只能从中获取 cookie 名称和值。

有谁知道这样的浏览器引擎可以完成这项工作？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:27:08.217

我记得 HttpWebRequest 可以为您完成这项工作：

```
 HttpWebRequest request =
               (HttpWebRequest)WebRequest.Create("http://your.site");
                request.Method = "GET";
                request.CookieContainer = new CookieContainer();
                HttpWebResponse response = loginReq.GetResponse() as HttpWebResponse;
                CookieCollection cookies = response.Cookies; 
```

将`cookies`包含来自该站点的所有 cookie。

# nhibernate - 将 TimeSpan 属性持久化到时间类型 Mysql 列时出错

> ID：11314426
> 
> 赞同：3
> 
> 时间：2012-07-03T15:37:34.650
> 
> 标签：nhibernate, fluent-nhibernate

我有一个 TimeSpan 属性，我想使用 Nhibernate 将其持久化到 DB。Mysql 列类型是时间。我读了一遍

> CustomType("TimeAsTimeSpan")

应该解决问题，但它没有。

> session.Save(对象)

将导致以下 MySqlException

> MySqlTimeSpan 错误只能序列化 TimeSpan 对象

我试图坚持的时间戳属性是一个有效的时间戳。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T14:45:58.967

这是 NHibernate 中的一个错误。我刚刚通过创建 TimeAsTimeSpan 类的克隆来解决这个问题。

用法：

```
CustomType(typeof(TimeAsTimeSpanTypeClone)); 
```

班级：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using NHibernate.Engine;
using NHibernate.SqlTypes;
using NHibernate.Type;

namespace DataAccess.NhibernateFixes
{
    /// <summary>
    /// Clone of the Nhibernate class: NHibernate.Type.TimeAsTimeSpanType
    /// This one actually works though...
    /// </summary>
    [Serializable]
    public class TimeAsTimeSpanTypeClone : PrimitiveType, IVersionType, IType, ICacheAssembler
    {
        private static readonly DateTime BaseDateValue = new DateTime(1753, 1, 1);

        public override string Name
        {
            get
            {
                return "TimeAsTimeSpan";
            }
        }

        public override System.Type ReturnedClass
        {
            get
            {
                return typeof(TimeSpan);
            }
        }

        public IComparer Comparator
        {
            get
            {
                return (IComparer)Comparer<TimeSpan>.Default;
            }
        }

        public override System.Type PrimitiveClass
        {
            get
            {
                return typeof(TimeSpan);
            }
        }

        public override object DefaultValue
        {
            get
            {
                return (object)TimeSpan.Zero;
            }
        }

        static TimeAsTimeSpanTypeClone()
        {
        }

        public TimeAsTimeSpanTypeClone()
            : base(SqlTypeFactory.Time)
        {
        }

        public override object Get(IDataReader rs, int index)
        {
            try
            {
                object obj = rs[index];
                if (obj is TimeSpan)
                    return (object)(TimeSpan)obj;
                else
                    return (object)((DateTime)obj).TimeOfDay;
            }
            catch (Exception ex)
            {
                throw new FormatException(string.Format("Input string '{0}' was not in the correct format.", rs[index]), ex);
            }
        }

        public override object Get(IDataReader rs, string name)
        {
            try
            {
                object obj = rs[name];
                if (obj is TimeSpan)
                    return (object)(TimeSpan)obj;
                else
                    return (object)((DateTime)obj).TimeOfDay;
            }
            catch (Exception ex)
            {
                throw new FormatException(string.Format("Input string '{0}' was not in the correct format.", rs[name]), ex);
            }
        }

        public override void Set(IDbCommand st, object value, int index)
        {
            DateTime dateTime = TimeAsTimeSpanTypeClone.BaseDateValue.AddTicks(((TimeSpan)value).Ticks);
            ((IDataParameter)st.Parameters[index]).Value = (object)dateTime.TimeOfDay; // <<<<  fix here. Added ".TimeOfDay"
        }

        public override string ToString(object val)
        {
            return ((TimeSpan)val).Ticks.ToString();
        }

        public object Next(object current, ISessionImplementor session)
        {
            return this.Seed(session);
        }

        public virtual object Seed(ISessionImplementor session)
        {
            return (object)new TimeSpan(DateTime.Now.Ticks);
        }

        public object StringToObject(string xml)
        {
            return (object)TimeSpan.Parse(xml);
        }

        public override object FromStringValue(string xml)
        {
            return (object)TimeSpan.Parse(xml);
        }

        public override string ObjectToSQLString(object value, NHibernate.Dialect.Dialect dialect)
        {
            return (string)(object)'\'' + (object)((TimeSpan)value).Ticks.ToString() + (string)(object)'\'';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:13:45.940

Well since no one answered my question and I tried many different approaches with no result, I decided to go with a work around.I converted my timestamp object to string when inserting to a varchar column Type (No longer a Time Type) and will cast the string back to a timestamp object when reading from the DB. Here is the code for that conversion just in case.

> > `DateTime.Parse(startTimebtn.Text).TimeOfDay.ToString();`

# c++ - 在屏幕中选择并移动 Qwidget

> ID：11314429
> 
> 赞同：7
> 
> 时间：2012-07-03T15:37:42.347
> 
> 标签：c++, qt, mouseevent, qwidget

我正在使用 QTCreator 并创建了一个 QWidget，然后我用 `setWindowFlags(Qt::CustomizeWindowHint);`.

但我无法选择或移动我的小部件。如何使用 mouseEvent 来解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T15:53:19.313

如果您希望能够通过单击和拖动（同时按住鼠标按钮）在屏幕上移动窗口，这是一种简单的方法：

```
#include <QtGui>

class W: public QWidget
{
    Q_OBJECT

    public:
        explicit W(QWidget *parent=0) : QWidget(parent) { }

    protected:
        void mousePressEvent(QMouseEvent *evt)
        {
            oldPos = evt->globalPos();
        }

        void mouseMoveEvent(QMouseEvent *evt)
        {
            const QPoint delta = evt->globalPos() - oldPos;
            move(x()+delta.x(), y()+delta.y());
            oldPos = evt->globalPos();
        }

    private:
        QPoint oldPos;
}; 
```

在`mousePressEvent`中，您保存鼠标所在位置的全局（屏幕坐标）位置，然后在 中`mouseMoveEvent`，您计算​​鼠标移动的距离并按该数量更新小部件的位置。

Note that if you have enabled mouse tracking, you'll need to add more logic to only move the window when a mouse button is actually pressed. (With mouse tracking disabled, which is the default, `mouseMoveEvent`s are only generated when a button is held down).

# sql - 必须声明标量

> ID：11314433
> 
> 赞同：2
> 
> 时间：2012-07-03T15:38:01.393
> 
> 标签：sql, sql-server-2008

我的函数中有三个单独的表变量，其中 1 个没有给我任何错误，另外两个是，我没有发现它们之间有任何不同的语法，但也许我需要更多的咖啡因。

我收到的错误是

> 必须声明标量变量“@DispoTable”。

```
DECLARE @CIDdisp INT

DECLARE @DispoTable TABLE 
(
    CaseID INT,
    Code INT,
    Description VARCHAR(150)
)
--Gather Data From filter
SELECT @CIDdisp = CaseID, @Code = Code, @Description = Description
FROM fnRecidFilter3(@CaseID,01,01)
-- Insert into Temp table
INSERT INTO @DispoTable (CaseID, Code, Description)
VALUES (@CIDdisp, @Code, @Description)
-- Merge the Temp Table with RecidReport Table
INSERT INTO RecidReport(Code, Description)
SELECT Code, Description 
FROM @DispoTable
WHERE (@DispoTable.CaseID) = CaseID 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:41:00.390

你不能说：

```
WHERE (@DispoTable.CaseID) = CaseID 
```

相反，您需要使用别名：

```
FROM @DispoTable AS d
WHERE d.CaseID = CaseID 
```

但无论如何，这个条款毫无意义。您的意思是在这里使用变量吗？也许：

```
FROM @DispoTable AS d
WHERE d.CaseID = @CIDdisp 
```

?

# typo3 - TYPO3 扩展输出被 TYPO3 改变？

> ID：11314435
> 
> 赞同：0
> 
> 时间：2012-07-03T15:38:03.610
> 
> 标签：typo3

TYPO3 似乎改变了我的前端扩展的输出。

简单的测试用例：

```
function main($content, $conf)
{
        $this->conf = $conf;
        $this->pi_setPiVarDefaults();
        $this->pi_loadLL();

        return '<a href="#test">test</a>';
} 
```

当我在前端调用带有此扩展名的页面时，我得到：

```
<a href="pagename/?no_cache=1&action=show&id=3378#test">test</a> 
```

基本上，它将我用来访问页面的路径添加到锚链接。什么可能导致这种行为？真实网址？

我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:56:03.917

您可能在 TS 模板（在设置中）中启用了前缀：

```
config.prefixLocalAnchors = all 
```

请注意，如果您已设置`config.baseURL=http://some.tld/`并启用`RealURL`这是必需的，否则所有锚链接将被重定向到主页：

```
http://some.tld/#test 
```

代替

```
http://some.tld/pagename/sub/other-sub#test 
```

# ruby-on-rails-3 - Rails ActiveRecord 如何对 has_many 关系进行自定义排序

> ID：11314442
> 
> 赞同：1
> 
> 时间：2012-07-03T15:38:38.207
> 
> 标签：ruby-on-rails-3, activerecord

假设我有两个模型一个业务和一个时间段，关系是`business has_many :timeslots`. 每个时间段都有一个日期列，其中存储日期名称等`'Monday', 'Tuesday'`。

当我做

```
bussiness.time_slots 
```

我得到未排序的时间段。我希望时间段按天名排序（不是按字母顺序）。'Monday' 的时间段比 'Tuesday' 排在第一位，依此类推。

我认为 SQL 无法帮助我，因为排序是自定义的，我需要在阅读后进行排序，但我担心将哪些代码放在哪里

我可以做类似的事情

在我的控制器中

```
b = current_business
TimeSlot.find_sorted_with_busines(b) 
```

在我的时隙模型中

```
def find_sorted_with_business(b)
   b.time_slots
   # sort timeslots using custom sorting here and return
end 
```

但我不喜欢将业务对象或 id 传递给 TimeSlot 模型的想法，我应该能够做类似的事情

```
b = current_business
b.sorted_timeslots 
```

我怎样才能做到这一点 ？

也欢迎有关如何根据日名进行自定义排序的想法:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:55:54.847

您应该考虑在数据库中存储整数而不是日期名称。它会使事情更容易排序，并且可能会更高效。

然后，您可以覆盖`day`getter（从整数返回日期名称）和 setter（存储与日期名称对应的整数）。根据您从表单中获得的内容，您可能不必覆盖 setter。

不要忘记进行自定义验证，以检查整数是否在 1 到 7 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:19:32.803

您可以使用 sql 进行自定义排序：

```
SELECT *
FROM my_table
ORDER BY CASE 
        WHEN dayname = 'Monday' THEN 1
        WHEN dayname = 'Tuesday' THEN 2
        .
        .
        WHEN dayname = 'Sunday' THEN 7
        ELSE 8
     END 
```

但最好的方法是只使用一个 int 作为列类型，如 robin 建议的，然后使用数字来获取日期名称，顺序会更简单

# python - 当我只更改一个时，Python 会填充 2D 列表（或数组）的所有元素

> ID：11314444
> 
> 赞同：1
> 
> 时间：2012-07-03T15:38:45.880
> 
> 标签：python, arrays, list

> **可能重复：**
> [Python：如何在列表中追加新元素？](https://stackoverflow.com/questions/11219949/python-how-to-append-new-elements-in-a-list-of-list)

我在 Python 中提出了这种非常奇怪的（对我而言）行为。

我有一个空的 2D 列表（或数组，如果您愿意），当我将一个元素添加到其中一个列时，所有其他列都会添加相同的值。

这是代码：

```
row = [1, 2, 3, 4]
yChannel = 4*[[]]

sectorPlace = 0
for sector in yChannel:
    sector.append(row[sectorPlace])
    sectorPlace += 1

print yChannel 
```

和输出：

> [[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:40:09.157

`yChannel`包含相同列表的 4 个副本。比较你所拥有的：

```
yChannel = [[], [], [], []] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:41:14.920

线

```
yChannel = 4*[[]] 
```

创建一个具有四倍相同列表对象的列表。修改这个单个列表对象似乎会修改所有子列表，因为它们实际上都是相同的列表对象。你应该使用

```
yChannel = [[] for dummy in range(4)] 
```

创建一个包含四个*独立*子列表的列表。

# c# - 方法定义中的术语 VARIANT 是什么意思？

> ID：11314449
> 
> 赞同：1
> 
> 时间：2012-07-03T15:38:58.757
> 
> 标签：c#

我在 ABBYY Flexicapture 中工作，它允许用 C#.NET 编写一些脚本，我从来没有使用过 C#.NET，但它与 Java 已经足够接近了。我有一个`method`声明，显示以下内容：

```
Document:
    Property (name: string) : VARIANT
        Description: Retrieves the value of a specified property by its name. The returned value can be in the form of a string, a number or time.
        Properties names and returned values: 
            Exported - when the document was exported 
            ExportedBy - who exported the document 
            Created - when the document was created 
            CreatedBy - who created the document 
```

因此，我试图获取“导出者”值，但是当我尝试以下任何行时，我会收到错误：

```
string = Document.Property("CreatedBy"); // Returns Error: Cannot implicitly convert type 'object' to 'string'. An explicit conversion exists (are you missing a cast?) (line 95, pos 21)
string = Document.Property(CreatedBy);  // Returns Error: Error: The name 'CreatedBy' does not exist in the current context (line 95, pos 39)
string = Document.Property("CreatedBy").Text; //Error: 'object' does not contain a definition for 'Text' (line 95, pos 52 
```

我以前从未见过`VARIANT`使用过的，有人可以向我解释一下。我缺少明显的语法错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:43:58.693

我对 ABBYY Flexicapture 不熟悉，但我以前做过一些 COM，并且大量使用了 VARIANT。它基本上是一个值类型，可以是字符串、数字或日期。

这似乎与您引用的声明中给出的描述一致：

> 返回值可以是字符串、数字或时间的形式。

VARIANT 类似于 javascript 等弱类型（脚本）语言中的变量。

有关更多详细信息，请查看[维基百科](http://en.wikipedia.org/wiki/Variant_type)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:29:02.113

Variant 实际上是不同类型的“联合”。一个很好的表达方式就是

```
object o = Document.Property("CreatedBy"); 
```

您现在可以检查的确切类型`o`：

```
if (o is string)
{
    string s = (string)o;
    // work with string s
}
else if (o is int)
{
    int i = (int)o;
    // work with int i
}
// etc. for all possible actual types 
```

或者，您可以将对象转换为字符串表示 ( `o.ToString()`) 并使用它。

# ruby-on-rails - 如何保护 link_to @variable 跨站脚本漏洞

> ID：11314450
> 
> 赞同：5
> 
> 时间：2012-07-03T15:39:01.170
> 
> 标签：ruby-on-rails, brakeman

我刚刚开始使用刹车器 gem 来探索我的 rails 应用程序是否存在安全漏洞。

除了几个跨站点脚本警告之外，我已经设法让一切都变得整洁。

这些都有以下共同点：

*   它们都是 link_to 标签
*   它们在类、alt 或 title 属性中都有实例变量
*   实例变量都代表一个包含关联模型的活动记录查询
*   实例变量都是“可评论的”。这描述了用户生成评论的多态关联，类似于[此 Railscast](http://railscasts.com/episodes/154-polymorphic-association)的修订版本。

例如

```
<%= link_to "Click" , :class=> @model.association.attribute, :alt=> @model.association.attribute, :title=> @model.association.attribute, @model.association %> 
```

在哪里

```
@model = @commentable = Model.includes(:association1, association2: {:nested-association1, :nested-association2}).find(params[:id]) 
```

这是我需要关注/采取行动的事情吗？我认为 Rails 3.2 默认会避开这些。

我欢迎提供建议，以帮助我更好地理解这个问题，并确定我应该采取哪些步骤（如果有的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:54:29.287

我无法从您提供的代码中重现任何警告。你用的是什么版本的刹车？实际的警告是什么（根据需要进行了编辑）？

我*怀疑*您收到警告，因为在链接的 href 值中检测到用户输入。有关为什么这可能很危险的更多信息，请参阅[此拉取请求](https://github.com/presidentbeef/brakeman/pull/45)。

不幸的是，如果没有更多信息，我无法判断这是需要修复的误报还是合法警告。

*编辑*：

好的，现在我在测试时看到警告`@model = @commentable = ...`这是 Brakeman 处理分配的问题。

如果您链接到模型的实例，则不应出现警告。如果您链接到模型属性，那么这将被视为用户输入。

是的，Rails 会转义 HTML，但它不处理以 XSS 开头`javascript:`或`data:`可[用于 XSS](http://palpapers.plynt.com/issues/2010Oct/bypass-xss-filters/)的链接。

# delphi - 使用 delphiXE 中的 pchar 参数调用 delphi 2006 dll

> ID：11314454
> 
> 赞同：1
> 
> 时间：2012-07-03T15:39:11.857
> 
> 标签：delphi, dll, unicode, char, delphi-xe

由于我已经从 delphi 5 升级到 XE，所以我很难使用前一段时间编译的特定 Dll。我的阻塞点似乎与 unicode/ansi 字符有关，但我还没有找到解决问题的方法

下面是一个程序示例：

```
procedure GetFilename(Buffer: PChar; BufSize: Integer); stdcall; 
```

在我的代码中，我这样称呼

```
implementation    
procedure GetFilename; external 'myDll.dll' name 'GetFilename';
procedure myproc
var
  buffer : Array [0..255] of Char;
begin
  GetFilename(buffer, length(buffer)-1);
  Showmessage(buffer); //This gives me chinese character
end; 
```

缓冲区包含以下内容：

```
byte((@buffer[0])^); // 67 which is the ASCII for C
byte((@buffer[1])^); // 92 which is the ASCII for \ 
```

我期望正常的是一个以“C：\”开头的字符串

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:02:29.373

由于 dll 是使用非 Unicode 版本的 Delphi 创建的，因此您必须将声明从

```
procedure GetFilename(Buffer: PChar; BufSize: Integer); stdcall; 
```

至

```
procedure GetFilename(Buffer: PAnsiChar; BufSize: Integer); stdcall; 
```

和缓冲区变量

```
buffer : Array [0..255] of Char; 
```

至

```
buffer : Array [0..255] of AnsiChar; 
```

此外，要了解 Delphi Unicode 支持，请查看[`Delphi and Unicode`](http://edn.embarcadero.com/article/images/38980/Delphi_and_Unicode.pdf)Marco Cantú 的白皮书。

# javascript - 表达 res.redirect() 的行为非常奇怪

> ID：11314458
> 
> 赞同：0
> 
> 时间：2012-07-03T15:39:29.763
> 
> 标签：javascript, node.js, redirect, express, connect

我正在使用自定义版本的`vhost`connect/express 中间件，并在其中检查`www`子域。如果我找到那个子域，那么我会重定向到没有`www`. 例如，如果我去`www.google.com`我想重定向到`google.com`. 我打电话：

```
if (subdomain === "www") {
  res.redirect(req.headers.host.split('.').slice(1).join('.') + req.url);
} 
```

但是，这会将我重定向到：`www.google.comgoogle.com`因为它将新的 URL 附加到原始 URL。为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:42:31.867

尝试预先添加协议：

```
res.redirect('http://' + req.headers.host.split('.').slice(1).join('.') + req.url); 
```

# jquery - jquery多复选框过滤器

> ID：11314462
> 
> 赞同：0
> 
> 时间：2012-07-03T15:39:46.753
> 
> 标签：jquery, filter, checkbox

我正在尝试根据页面上住宿部分的不同参数来过滤页面。我不能让过滤器一起工作，所以如果用户点击一个部分，它将与另一个部分一起工作。

小提琴是[http://jsfiddle.net/ktcle/YEtgM/2/](http://jsfiddle.net/ktcle/YEtgM/2/)

谢谢你的帮助

```
$('input').change(function(){
$('input').each(function(){
    var checked = $(this).attr('checked') || false;
    var numberofrooms = $(this).data('bedrooms');
    var sitelocation = $(this).data('location');
    $('li').each(function(){
        if ($(this).data('bedrooms')==numberofrooms){
            checked ? $(this).show() : $(this).hide();
        }

        if ($(this).data('location')==sitelocation){
            checked ? $(this).show() : $(this).hide();
        }

    });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:22:42.023

像这样**[的 jsFiddle 示例](http://jsfiddle.net/j08691/YEtgM/5/)**怎么样？

我给你的输入值有几个原因，但这里是 jQuery：

```
$('input').change(function() {
    var room_array = new Array(),
        loc_array = new Array();
    $('.br').each(function() {
        if ($(this).is(':checked')) {
            room_array.push($(this).data('bedrooms'));
        }
    });
    $('.loc').each(function() {
        if ($(this).is(':checked')) {
            loc_array.push($(this).data('location'));
        }
    });
    $('li').each(function() {
        if ($.inArray($(this).data('location'), loc_array) > -1 && $.inArray($(this).data('bedrooms'), room_array) > -1) {
            $(this).show();
        } else {
            $(this).hide();
        }
    });
});​ 
```

# php - Netbeans：PHP 插件安装错误

> ID：11314469
> 
> 赞同：0
> 
> 时间：2012-07-03T15:40:04.997
> 
> 标签：php, plugins, netbeans-7

我正在使用 Netbeans 7.1.2，我正在尝试安装 PHP 插件，但收到此错误：

> 在版本 >= 2.1（发布版本 2）中请求插件编辑器库，但仅找到 3.17.1.19.25（与 2 不同的发布版本）。

我已经安装了以下插件：
![已安装的插件](../Images/04c0f9993d54e021316bc91e6b824726.png)
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:55:17.053

正如 Parahat Melayev 在评论中建议的那样，在现有安装上下载和安装仅支持 PHP 的 Netbeans 解决了这个问题。

# algorithm - 简化这种指数算法的 Big-O 复杂性

> ID：11314472
> 
> 赞同：6
> 
> 时间：2012-07-03T15:40:17.520
> 
> 标签：algorithm, big-o, combinatorics, exponential, binomial-coefficients

我有一个计数算法，我正在尝试获得一个一般的 big-o 描述。它是可怕的嵌套和可怕的指数。这里是：

```
 1\. For each T_i in T
 2\. For k = 1 to max_k
 3\. For each of 2^k*(n choose k) items
 4\. For each t in T_i
 5\. check if the item is in t...etc. 
```

这是每个运行时间的逐行想法

1.  这是一个简单的分区，我将只给它一个常量 c1。
2.  max_k 是一个很小的数字，总是小于 n，可能在 4 或 5 左右。我将在下面使用 k。
3.  此循环始终运行 2^k*(n 选择 k) 次
4.  通过考虑第 1 行的常数，我们可以概括这条线，并且知道在最坏的情况下它总共不会触发超过 2^n 次，但通常会运行 2^n 次的一小部分，所以我们称之为 (2^n n)/c2
5.  这是所有这些循环中的简单 if 语句操作，所以 c3.

将所有这些相乘得到：

```
c1 * k * 2^k * (n choose k) * (2^n)/c2 * c3 
```

由于我想要一个大 O 表示，忽略常量给出：

```
k * 2^k * (n choose k) * (2^n) 
```

已知 (n choose k) 以 (n * e / k)^k 为界，所以：

```
O(k * 2^k * (n * e / k)^k * (2^n)) 
```

我的问题是，我可以在这里忽略什么... 2^n 肯定是主要术语，因为 n 总是大于 k，而且通常更大。这可以简化为 O(2^n) 吗？还是 O(2^terrible)？还是我应该留在 2^k 中，如 O(2^k * 2^n)？（或保留所有条款？）

我的理解是，如果 k 或 max_k 可以竞争或超过 n，那么它们至关重要。但是由于它们总是被支配，它们可以像多项式运行时间的低阶项一样被丢弃吗？我想所有指数运行时间的混乱都让我感到困惑。任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T15:50:11.153

> 我的理解是，如果 k 或 max_k 可以竞争或超过 n，那么它们至关重要

是的，但反过来不是 - 意思是 - 当涉及到大 O 符号时，它不能被忽略，即使它不与 n 竞争。**仅当 max_k 以常数为界时才可以忽略它**（有一个常数`c`使得`k <= c`）。例如 -`O(n * logk)`算法不是，因为 k 因子是无界的，因此对于每个常量都`O(n)`存在一个`k`这样的。`nlogk > c*n``c`

由于你得到的表达式是一个产品，你可以忽略的是常量，在你的情况下 - 只是`e`得到你`O(k*2^k * (n/k)^k * 2^n)`。

如果`k`是*有界*的，那么你也可以用大 O 表示法从表达式中删除它，你会得到`O(n^k* 2^n)`。请注意，即使在这种情况下，尽管`n^k << 2^n`，它仍然不能被忽略，因为对于每个常数 c 都存在一些`n`这样的`c*2^n < n^k *2^n`，所以算法不是`O(2^n)`一个。

当涉及到加法时，可以忽略较小的因素。如果`k < n`then ，因为对于 all :`O(n + k) = O(n)`有一个常量，但是在处理产品时当然不是这样。`c,N``n > N``c*n < n + k`

# vim - Jinja Vim 插件不工作

> ID：11314473
> 
> 赞同：2
> 
> 时间：2012-07-03T15:40:27.393
> 
> 标签：vim, twig, vim-plugin, jinja2

我想让我的`.html.twig`文件突出显示为 Jinja 文件。（那里似乎没有适合 Vim 的 Twig 插件，所以我改用 Jinja。）我`jinja.vim`从[这里](http://www.vim.org/scripts/script.php?script_id=1856)下载并将 at `~/.vim/ftplugin/jinja.vim`. 我还将这些行添加到我的`~/.vimrc`：

```
filetype plugin on
au BufRead,BufNewFile *.twig set filetype=jinja
au BufRead,BufNewFile *.html.twig set filetype=jinja 
```

但是，当我打开一个`.html.twig`文件时，没有任何语法高亮显示。我以前没有安装过 Vim 插件，所以我猜我错过了一些步骤。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T09:11:40.477

请试试：

```
au BufRead,BufNewFile *.twig set syntax=jinja 
```

（“语法”而不是“文件类型”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:46:39.500

将 jinja.vim 文件放入`~/.vim/syntax`而不是`~/.vim/ftplugin`. 如果仍然没有语法突出显示，请尝试键入`:syntax on`. 如果可行，您需要添加一行，说明`syntax on`您的`~/.vimrc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:56:41.260

添加

```
syntax on 
```

到你的`~/.vimrc`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-30T08:15:22.727

我也有在 VIM 中突出显示 Twig 的问题。

所以我使用了这个插件：[https ://github.com/evidens/vim-twig](https://github.com/evidens/vim-twig)

如果您需要 Twig 支持自定义文件扩展名（就像我一样），请在 .vimrc 中添加以下行：

```
" highlight syntax in .tpl files as Twig
au BufNewFile,BufRead *.tpl set filetype=html.twig 
```

样本结果： ![在此处输入图像描述](../Images/d9706b4f9091c691e3f0c4e48e4d74f8.png)

# javascript - 在 mustache 模板中包含 javascript

> ID：11314477
> 
> 赞同：15
> 
> 时间：2012-07-03T15:40:46.847
> 
> 标签：javascript, mustache

我有一个 javascript 块，用于显示我希望在页面上每 n 次包含的广告。

我使用 Mustache 作为我的模板语言，但无法弄清楚如何包含 js，因此它作为脚本运行，而不仅仅是作为字符串插入。

```
<script id="mustache-post-advert" type="text/mustache">
<article id="post-{{id}}" class="post">

    {{{  <script type="text/javascript">GA_googleFillSlot("MPU")</script>  }}}

</article>

</script> 
```

我已经尝试过三重 { 我希望它会逃脱，但遗憾的是它没有。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T14:37:07.763

您的 json-input 应该引用要调用的脚本：

## JSON

```
 var json = {
   id: "someid",
   gaFillSlot: function(){
     GA_googleFillSlot("MPU");
   }
 } 
```

## 模板

```
 <script id="mustache-post-advert" type="text/mustache">
   <article id="post-{{id}}" class="post">
     {{gaFillSlot}}
   </article>
 </script> 
```

确保“GA_googleFillSlot”可以在模板时从 mustache 的上下文中调用。

这符合 Mustache 的无逻辑特性：您想要的任何逻辑都应该嵌入到您传递给 Mustache 以开始使用的 json 中。

没有对此进行测试，但这应该可以。高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:44:43.537

您已经在脚本标签内，无需添加另一个：

```
<script id="mustache-post-advert" type="text/mustache">
  <article id="post-{{id}}" class="post">
    {{ GA_googleFillSlot("MPU") }}
  </article>
</script> 
```

**编辑**

再想一想，这可能还不够；有关从 mustache 模板中调用函数的信息，请参见此处：

[http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-using-the-mustache-template-library/](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-using-the-mustache-template-library/)

# javascript - JQuery 选项卡内容帮助 - 1.4

> ID：11314478
> 
> 赞同：0
> 
> 时间：2012-07-03T15:40:47.783
> 
> 标签：javascript, jquery, html, css

我一直在尝试在我的网站上创建一些标签，这里是：

```
<ul class="tabContainer">
       <!--Tabs Here -->
    </ul>

    <div class="clear"></div>

    <div id="tabContent">
        <div id="contentHolder">
            <!-- The content goes here -->
        </div>
    </div> 
```

现在，我已经看到使用以下内容，但我想知道是否有可能代替单个内容页面来获取单个 div：

所以而不是：

```
var Tabs = {
    'Music' : 'pages/page1.html',
    'DVD' : 'pages/page2.html'.
} 
```

改用这个：

```
var Tabs = {
    'Music' : 'div#fragment-1',
    'DVD' : 'div#fragment-2'.
} 
```

这可能吗？或者是否有另一种解决方案可以用来以某种方式获取内容？我只想要一个简单的 ish 解决方案，我可以在 2 个内容选项卡之间切换，但只能在 JQuery 1.4 中使用？

希望你能帮忙，

蛇盘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:50:14.390

您可以尝试以下方法：

JS

```
$(function(){

function contentSwitcher(settings){
    var settings = {
       contentClass : '.content',
       navigationId : '#navigation'
    };

    //Hide all of the content except the first one on the nav
    $(settings.contentClass).not(':first').hide();
    $(settings.navigationId).find('li:first').addClass('active');

    //onClick set the active state, 
    //hide the content panels and show the correct one
    $(settings.navigationId).find('a').click(function(e){
        var contentToShow = $(this).attr('href');
        contentToShow = $(contentToShow);

        //dissable normal link behaviour
        e.preventDefault();

        //set the proper active class for active state css
        $(settings.navigationId).find('li').removeClass('active');
        $(this).parent('li').addClass('active');

        //hide the old content and show the new
        $(settings.contentClass).hide();
        contentToShow.show();
    });
}
contentSwitcher();
}); 
```

html

```
<div id="navigation">
  <ul class="tabbedContent">
<li><a href="#page1">link 1</a></li>
    <li><a href="#page2">link 2</a></li>
<li><a href="#page3">link 3</a></li>
<li><a href="#page4">link 4</a></li>    
    <li><a href="#page5">link 5</a></li>                                
   </ul>
</div>

<div id="page1" class="content">

</div>               
<div id="page2" class="content">

</div>               
<div id="page3" class="content">

    </div>

<div id="page4" class="content">

</div>
<div id="page5" class="content">

</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:57:07.323

将**script.js – Part 2 中第 31 行到第 43 行**的代码替换为以下代码：

```
if(!element.data('cache'))
{
    var msg - $(element.data('page')).html()
    $('#contentHolder').html(msg);
    element.data('cache',msg);
}
else $('#contentHolder').html(element.data('cache')); 
```

附带说明.. 如果在现有代码中包含 jQuery UI 不是什么大问题，为什么不使用 jQuery UI 提供的选项卡。

# sublimetext2 - Sublime Text 2 中的状态栏可以显示你所在的 Symbol 吗？

> ID：11314483
> 
> 赞同：5
> 
> 时间：2012-07-03T15:41:01.767
> 
> 标签：sublimetext2

在 Textmate 中，您可以通过查看状态栏来查看您所在的符号（又名函数）：（红色轮廓）

![在此处输入图像描述](../Images/eaa4abecd0bff58ed797901b3c79ada3.png)

我知道在 Sublime Text 2 中，我可以使用 command + r 快速找到一个符号，但是有没有办法获得类似于 ST2 中显示的 Textmate 状态栏的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T19:02:23.130

I use [this plugin: `function name display`](https://github.com/akrabat/SublimeFunctionNameDisplay), which does exactly that. You can set it to show any combination of file/ class/ function/ arguments. Its nice.

# javascript - 将卸载事件添加到 div

> ID：11314484
> 
> 赞同：1
> 
> 时间：2012-07-03T15:41:05.027
> 
> 标签：javascript, jquery

我正在尝试将事件添加到页面卸载时触发的元素。我想将事件附加到元素上，因为我需要访问私有函数。

我决定尝试向我的元素添加一个卸载事件，然后在 window.unload 事件期间调用此函数，因为该元素通常不会传递卸载事件。

可悲的是，我设法创建了一个无限循环，我尝试使用 jQuery 函数 'one' 来尝试停止循环，并且还尝试在第一次调用后手动删除卸载甚至绑定。仍然没有运气。我做了一个 JsFiddle 但决定不链接它，因为它会使你的浏览器崩溃，所以这里是代码。

```
<div id="myDiv"></div>
$('#myDiv').one('unload', function() { alert('Infinite loop incomming. Sorry :( '); });
$(window).unload(function() { $('#myDiv').unload(); }); 
```

任何人都可以提供任何建议或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:08:45.317

我在另一个问题中找到了我想要的东西 - [Add jQuery function to specific elements](https://stackoverflow.com/questions/4709822/add-jquery-function-to-specific-elements)。

本质上，我可以使用 jQuery 'bind' 和 'trigger' 将自定义事件添加到 DOM 元素并稍后调用它。

例子：

```
 <div id="myDiv"></div>

    $('#myDiv').bind('myUnloadFunction', function() { alert('No more loop :D'); });

    $(window).unload(function() { $('#myDiv').trigger('myUnloadFunction'); }); 
```

# google-bigquery - GAE 上的 BigQuery：根据开发人员的访问权限运行数据

> ID：11314488
> 
> 赞同：0
> 
> 时间：2012-07-03T15:41:23.743
> 
> 标签：google-bigquery

我正在使用 bigquery 开发应用程序，并且我拥有所有基础数​​据。我想向用户展示这些数据的一个子集，他们的访问范围由我要实现的权限控制确定。我不想授予他们对 bigquery 表的任何访问权限。

我的问题是：我该如何设置，以便当他们运行某些东西时，它基于我对表格的访问？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:48:23.357

你打算让用户编写他们自己的查询吗？如果是这样，那么这将很困难，除非您可以按用户将数据分区到表中。或者您可以通过重写查询来玩游戏——如果他们这样做`select foo from bar ...`了，您可以将表名替换为`(select allowed columns from underlying.table where user_id = 'current_user')`.

如果您要代表用户生成查询，那么您可以只使用自己的凭据（或您的服务帐户的凭据）来访问 bigquery。本质上，您只需要一个 OAuth2 刷新令牌，这应该永远有效。一种思考方式是，如果您有一个 mysql 数据库，您将使用自己的凭据而不是用户的凭据来访问它。

# sql - 你如何摆脱 SQL 服务器中的 �（utf8 无效字符）

> ID：11314496
> 
> 赞同：0
> 
> 时间：2012-07-03T15:41:43.603
> 
> 标签：sql, sql-server, sql-server-2008, utf-8

我们有一家商店，我们的产品描述中有很多 � 字符。我们尝试运行`update queries like UPDATE {table} SET description=REPLACE(description,'�','')` This 在某些情况下有效，但我们不断发现更多。有谁知道一个简单的方法来摆脱它们？

我们的商店在使用 SQL SERVER 2008 的 Volusion 上运行，但它们限制了您可以运行的查询类型。如有必要，我们还在 mysql 数据库中拥有所有产品信息的更新副本，我们可以做任何我们想做的事情并上传更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:57:12.680

PHP mysql 连接默认为 latin1 连接，因此，连接后的第一个查询应该是：

mysql_query("SET NAMES 'utf8'");

也许^^

# php - WordPress 自定义评论

> ID：11314504
> 
> 赞同：0
> 
> 时间：2012-07-03T15:41:56.767
> 
> 标签：php, wordpress, function

我有一个客户网站，它为特定类别的帖子请求了自定义评论格式。

在我的循环模板中，我有这个：

```
<div id="gallery-commentlist">
     <ul class="gallery-commentlist">
          <?php wp_list_comments( 'type=comment&callback=gallery_comment'); ?>
     </ul>
</div><!-- #gallery-commentlist --> 
```

在我的functions.php文件中，我有这个：

```
<?php function gallery_comment($comment, $args, $depth) {
   $GLOBALS['comment'] = $comment; ?>
   <li <?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>">
     <div id="comment-<?php comment_ID(); ?>">
        <div class="gallery-comment-body">
            <p><span class="gallery-comment-author"><?php comment_text() ?>:</span> <?php comment_text() ?></p>
        </div>
        <div class="comment-meta commentmetadata"><a href="<?php echo esc_url( get_comment_link( $comment->comment_ID ) ) ?>"> &ndash; 
        <?php get_comment_date() ?> at <?php get_comment_time() ?></a><?php edit_comment_link(__('(Edit)'),'  ','') ?>
        </div>
    </div>
<?php }?> 
```

它没有返回任何评论，对于我的生活，我无法弄清楚为什么。我按照 WP 法典中的说明进行操作。有什么我忽略的吗？

谢谢你的帮助！

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:37:22.163

显然有某种查询调用作为`comments_template()`调用的一部分发生，就像循环调用一样。

当我将自定义函数放在评论模板中时，它可以完美运行。

我尝试将评论模板的内容放入我的自定义循环单模板中，但没有成功。

The solution wound up being placing an if{} statement in the comments template, and then setting up two different layouts based upon the results.

Now it all works like it should.

# shell - 有没有办法在shell脚本中正确传递带引号和空格的字符串作为参数

> ID：11314511
> 
> 赞同：1
> 
> 时间：2012-07-03T15:42:12.780
> 
> 标签：shell, sh

描述非常抽象，实际上我正在尝试将参数传递给`%configure`RPM .spec 文件中的宏。但行为是一样的。

使用这样的脚本`sh -x`：

```
#! /bin/sh

VAR1=" \
--enable-modules=dir so com \
--disable-userdir"

./configure $VAR1 
```

给我：

```
+./configure --enable-modules=dir so com --disable-userdir 
```

我需要的是：

```
+./configure --enable-modules='dir so com' --disable-userdir 
```

问题：有什么方法可以正确传递引号和空格？将引号`'dir so com'`放在`$VAR1`所有字符串的废墟中。$"" 什么都不做， qoutes 引用最近的不带空格的字符组，等等。我几乎尝试了所有方法。

## **编辑：**

请在推荐任何东西之前尝试一下。如果这很简单，那将不是问题。而且我不是说回声，我需要将参数传递给宏/外部脚本。sed/cat 化学是可以接受的，但我不能`./configure`直接通过“反引号”或其他方式直接`rpmbuild`调用，因为它本身带有一些额外的参数。在没有 qoutes 的情况下传递参数可以正常工作。

```
VAR1=" \
--enable-modules=dir so com \
--disable-userdir" 
```

做：

```
$ sh -x test.sh
+ VAR1=' --enable-modules="dir so com" --disable-dir --disable-actions --disable-userdir'
+ ./configure '--enable-modules="dir' so 'com"' --disable-dir --disable-actions --disable-userdir` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:15:11.390

不，我很害怕。在`./configure $VAR1`变量`$VAR1`中将在 IFS 字符处拆分并导致零个或多个单词。**这意味着严格**按照 IFS 字符进行拆分。引号/转义识别发生在变量扩展之前，这意味着作为变量值的一部分的引号或转义没有任何影响（它们代表自己）。时间不早了，快跑！

你可以做的或者是像

```
set -- "--enable-modules=dir so com" --disable-userdir
./configure "$@" 
```

这将覆盖您的位置参数，例如`$1`and`$2`是 , 之后的两个参数`--`，然后使用`"$@"`which 扩展回这两个词。

您也可以使用`bash`数组而不是滥用 set 数组（据`sh`我所知只有一个全局数组），但我的印象是您已经能够保留一些品味并且不想使用 bash。

你也可以做类似的事情

```
VAR1="--enable-modules=dir so com%--disable-userdir"
OLDIFS=$IFS
IFS=%
./configure $VAR1
IFS=$OLDIFS 
```

但是，是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:47:46.467

你可以像这样逃避你的'报价中的报价'

```
#!/bin/sh

VAR1=" \
--enable-modules=\"dir so com\" \
--disable-userdir"

echo $VAR1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T07:41:37.917

选择以下任一策略。

## 替换位置参数

启动一个子shell，在其中替换位置参数并使用特殊扩展`"$@"`来启动程序。

```
(set -- "--enable-modules=dir so com" --disable-userdir; ./configure "$@") 
```

## 使用 IFS 的特殊值

选择一个没有你的论点的角色，假设`|`会做。现在准备你的参数向量分割每个参数`|`并相应地启动你的脚本：

```
 configure_argv="--enable-modules=dir so com|--disable-userdir"
 IFS='|' ./configure $configure_argv 
```

## 使用 xargs

回想一下，`xargs`可以在 character 处拆分参数`\000`。这给

```
 configure_argv()
 {
     printf '--enable-modules=dir so com\000'
     printf '--disable-userdir\000'
 }
 configure_argv | xargs -0 ./configure 
```

# controller - 编写 Visualforce 控制器扩展时出错

> ID：11314515
> 
> 赞同：1
> 
> 时间：2012-07-03T15:42:35.813
> 
> 标签：controller, salesforce, apex-code, visualforce

我正在尝试编写我的第一个控制器扩展，但遇到了一个错误：

错误：编译错误：字段表达式的初始项必须是具体的 SObject：第 26 行第 34 列的 LIST

这是产生错误的代码：

```
public class CustFinAcctRelatedList{
private households__Household__c RG;

private List<households__HouseholdMember__c> RGMembs;
private List<Account> Accts;
private List<Financial_Account__c> finAccts;

//Get Household Record from VisualForce Page//
public CustFinAcctRelatedList(ApexPages.StandardController controller) {
    this.RG = (households__Household__c)controller.getRecord();
}

public List<Financial_Account__c> getFinAccts()
{
    //Get Household Members (junction object between Account and Household) from Household//
    RGMembs = [
        SELECT id, households__Household__c, households__Account__c
        FROM households__HouseholdMember__c 
        WHERE households__HouseholdMember__c.households__Household__c = :RG.id
    ];

    //Get Accounts from Household Members (junction object between Account and Household)//
    Accts = [
        SELECT id
        FROM Account
        //****THE FOLLOWING LINE IS CAUSING THE ERROR****//
        WHERE Account.id IN :RGMembs.households__Account__c.id
    ];

    //Get Financial Account from Accounts//
    finAccts = [
        SELECT id, name, Client__r.name, Current_Value__c, Account_Type__c
        FROM Financial_Account__c
        WHERE Financial_Account__c.Client__c IN :Accts.id
    ];

    return finAccts;
}
} 
```

知道为什么会产生这个错误吗？

我将使用返回数据在 Visualforce 页面上创建自定义相关列表。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:03:51.983

`RGMembs`此时是一个列表，因此您需要使用索引器，例如`RGMembs[0].households__Account__c.id`

您还可以`LIMIT 1`在查询中使用语法，因为这将分配一个对象作为查询的结果。不过要小心，如果查询返回 0 行，那么它将引发异常。

同样在 RGMembs 查询中，您需要选择`households__Acount__c.id`否则当您尝试引用 Accts 查询中未查询的字段时会遇到问题。

再看看您的`finAccts`查询，您最终会遇到与之前查询相同的具体 SObject 错误。要解决这个问题，只需删除`.id`IN 语句中的`IN :Accts`

希望这会有所帮助。

- 更新 -

回顾您的代码，我认为您不需要中间查询。第一个查询为您提供了属于家庭成员的所有帐户。然后，您可以使用此帐户列表来帮助您选择与这些帐户对象相关的所有财务帐户。我会这样实现：

```
Set<Id> RGMembers = new Set<Id>();

for(households__HouseholdMember__c member :  [SELECT households__Account__c.id FROM households__HouseholdMember__c WHERE households__HouseholdMember__c.households__Household__c = :RG.id]){
    RGMembers.add(member.households__Account__c.id);
}

finAccts = [SELECT id, name, Client__r.name, Current_Value__c, Account_Type__c FROM Financial_Account__c WHERE Financial_Account__c.Client__c.id IN :RGMembers]; 
```

这更接近您想要实现的目标吗？

# ruby - Chef Ohai：如何将新安装的 Ruby 与 gem_package 一起使用

> ID：11314523
> 
> 赞同：6
> 
> 时间：2012-07-03T15:42:50.937
> 
> 标签：ruby, chef-infra

使用`chef`我有一个安装 gem 的简单配方，例如：

```
gem_package "passenger" do
  version node['passenger']['version']
end 
```

我还想用另一本说明书安装 ruby​​，对于某些服务器可能是 Ruby 1.9.3，对于其他服务器可能是 Ruby Enterprise 1.8.7。所以我想我可以使用`gem_binary`并`ohai`做到这一点，就像这样：

```
gem_package "passenger" do
  version node['passenger']['version']
  gem_binary "#{languages['ruby']['bin_dir']/gem}"
end 
```

但随后问题开始了，因为`languages['ruby']`安装新的 ruby​​ 时没有改变。Ruby Enterprise 安装到via 中`/opt/ruby-enterprise`并将其自身添加到`PATH`via中，但在同一运行期间`/etc/profile.d/ree.sh`不会被拾取`ohai`，但会在下一次运行中被拾取。

在第一次运行时，`ohai`说`languages['ruby']`安装在`/opt/vagrant_ruby/bin/ruby`使用`vagrant`和`chef_solo`配置时。乘客宝石安装到错误的红宝石中。

我怎样才能`ohai`识别新安装的红宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:48:57.037

我认为有一种方法可以在运行 chef recipe 期间重新加载 ohai 属性：

您需要使用 ohai 资源：

```
ohai "reload" do
  action :reload
end 
```

在此处查看更多信息：[http ://wiki.opscode.com/display/chef/Resources#Resources-Ohai](http://wiki.opscode.com/display/chef/Resources#Resources-Ohai)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T00:56:40.637

通常我正在使用具有相同问题的 RVM。我通常在那里对 gem 二进制文件的路径进行硬编码，并将最后一位保留为属性。

例如

就像是

```
 5   node["rvm"]["rubies"].each do |ruby|
  6     gem_package "[#{ruby}]-passenger" do
  7       package_name "passenger"
  8       version node[:passenger][:version]
  9       gem_binary "/usr/local/rvm/bin/gem-#{ruby}"
 10       options "--no-ri --no-rdoc"
 11     end
 12   end 
```

或者，我们使用`bash`了块并获取了适当的文件。请注意，当使用 bash 块时，仅使用块中的最后一项来确定成功，将它们链接起来通常是明智的`&&`

# websocket - Pusher vs Pubnub vs 开源 Socket.io / SignalR.net / Faye / jWebSocket

> ID：11314528
> 
> 赞同：74
> 
> 时间：2012-07-03T15:43:18.333
> 
> 标签：websocket, socket.io, signals, pubnub, ably-realtime

我目前正在评估 Pusher 和 PubNub，以便在我的主要 Web 客户端和服务器之间启用双向实时通信。两者看起来都令人印象深刻，Pusher 的文档似乎更好，PubNub 的可扩展性和可靠性显然是他们的强项。

然而，当我管理预算时，我担心 Pusher 和 PubNub 的成本可能会成为我们的一个问题，因此我正在考虑使用其中一种开源替代品——我主要关注的是 Socket.io、Faye 和jWebSocket。

虽然我自己运行服务，但我有我的担忧：

*   之前有没有人真正将 Socket.io 或其他开源解决方案扩展到多台服务器？PubNub 声称每秒处理 100 万**条消息！**，我有点怀疑 Socket.io 是否可以在没有大量服务器的情况下做到这一点，如果它可以工作的话。
*   如果我使用开源解决方案，我可能会错过付费服务中的某些功能吗？
*   如果我的服务器仍然在 AWS 上，延迟真的会成为一个问题吗？PubNub 位于多个位置，因此我希望这应该会减少延迟，尽管如果需要将消息从美国发送到日本，那么在日本拥有服务器无助于延迟，因为它仍然需要以一种或另一种方式到达那里。

感谢您的建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-04T02:09:55.480

Faye 使用 Node.js 对我来说很容易设置，并且最初在测试中表现非常好。然而，即使我的应用程序上的负载只有大约每秒 10 个请求，大约有 3000 个打开的连接——当我将它切换到实时 node.js 时，cpu 使用率被固定为 100%（我的盒子上有 8 个内核中有 1 个内核可用）。我对此有点失望，并期待更多。

我考虑过使用 redis 或在不同端口上运行多个节点实例，然后在我的应用程序端拆分负载，但看看 PubNub 的价格，将所有这些都卸载给他们似乎要容易得多。

在尝试了 Pusher 和 PubNub 之后，我发现 PubNub 对我来说既便宜又低得多（我在新加坡托管，而 Pusher 对我来说大约是 500 毫秒，而 PubNub 从我的应用程序来说是大约 250 毫秒的往返）。但是，如果您在美国托管，则差异可能会小得多。

我还查看了 Ape-Server，但没有找到任何用于设置发布/订阅模型的好的教程/文档，因此跳过了它 - 但也许你比我聪明，并且会有更好的体验 :)

# c# - 调用显示数组内容的方法

> ID：11314530
> 
> 赞同：0
> 
> 时间：2012-07-03T15:43:18.517
> 
> 标签：c#, arrays

我对将什么作为“输出（）”的参数感到困惑；

我需要让它显示已创建的数组的内容，但我很困惑，因为它是一个数组而不仅仅是一个变量......我认为它应该是 output(value); 但是你可能会说的许多其他猜测都没有奏效。

我被教导你把你在 main 中创建的变量放在那里，但这不起作用。

```
using System;

namespace Lab16
{
class Program
{
    static void Main(string[] args)
    {

        int value;

        Console.Write("How big of an Array? ");
        int arraySize = int.Parse(Console.ReadLine());
        int[] arr = new int[arraySize];

        for (int i = 0; i <= arraySize - 1; i++)
        {
            Console.Write("First Value: ");
            value = int.Parse(Console.ReadLine());
            arr[i] = Convert.ToInt32(value);
        }

        output();
    }

    static void output(ref int value, ref Array arr, ref int arraySize)
    {

        foreach (int i in arr)
        {
            for (int v = 1; v <= arraySize; v++)
            {
                string number = "Number: ";

                Console.WriteLine("{0}{1} {2}", number, v, i);
                Console.ReadLine();
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:47:09.993

首先，为什么所有的裁判？它们似乎没有任何用途，以及从未使用过的第一个参数：

```
static void output(Array arr, int arraySize)
    {

        foreach (int i in arr)
        {
            for (int v = 1; v <= arraySize; v++)
            {
                string number = "Number: ";

                Console.WriteLine("{0}{1} {2}", number, v, i);
                Console.ReadLine();
            }
        }
    } 
```

现在使用

```
output(arr, arraySize); 
```

第二个参数也可以去掉，因为 C# 数组将它们的长度保存在一个字段中：

```
static void output(Array arr)
    {

        foreach (int i in arr)
        {
            for (int v = 1; v <= arr.Length; v++)
            {
                string number = "Number: ";

                Console.WriteLine("{0}{1} {2}", number, v, i);
                Console.ReadLine();
            }
        }
    } 
```

并使用：

```
 output(arr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:47:26.583

您应该将数组作为参数发送到此方法：

```
static void output(int[] arr)
{
    for (int i = 0; i< arr.Length; i++)
    {

        string number = "Number: ";
        Console.WriteLine("{0}{1} ", number, arr[i]);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T15:49:16.020

用这个 ：

```
 static void output(int[] myArray)
 {
    for (int i = 0; i< myArray.Length; i++)
   {

    string number = "Number: ";
    Console.WriteLine("{0}{1} {2}", number, v, i);
    Console.ReadLine();
   }
 } 
```

但不要忘记在调用函数时传递参数：

`output(myArray)`

因为输出期望接收一个数组。也删除所有参考。

`myArray.Length`已经存储了数组的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:46:33.283

我不确定 value 参数的用途，但 arr 将是您的数组，arr 和 arraySize 是您的变量 arraySize。输出（值，arr，arraySize）也是如此

# ios - 我可以使用什么机制只允许购买的 iOS 应用程序访问网络服务？

> ID：11314534
> 
> 赞同：1
> 
> 时间：2012-07-03T15:43:36.063
> 
> 标签：ios, web-services

我正在开发一个服务器来为 iOS 应用程序提供在线服务。我们希望将对该服务器的访问限制为实际购买该应用程序的人。

从 MacOS App Store 购买应用程序时，应用程序商店会在交付时将收据打包在应用程序的捆绑包中。然后，我们可以将此收据发送到我们的服务器，该服务器可以验证该应用程序是否合法。

iOS App Store 有类似的功能吗？是否有购买应用程序本身的收据？我知道应用内购买，但我们希望应用本身的所有购买者都可以使用这项服务；我们不希望他们在购买应用程序后不得不采取额外的步骤或花费额外的钱。

有人知道使这成为可能的机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:49:24.793

如果他们想使用在线服务，你可以让它免费并让他们为应用内购买付费，但这不是重点。

要回答您的问题，有一些方法可以检测应用程序是否“被破解”或者只是阻止它被破解，例如：[http ://www.funkyspacemonkey.com/anticrack-prevent-iphone-apps-cracked](http://www.funkyspacemonkey.com/anticrack-prevent-iphone-apps-cracked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:48:30.843

购买 iOS 应用程序时，您不会获得任何可以处理的收据，我建议实施一些其他解决方案来限制访问，例如使用用户令牌，但解决方案不会像 Mac 中那样简单

# .net - 从 Server\PrinterName 获取打印机 IP 地址

> ID：11314535
> 
> 赞同：0
> 
> 时间：2012-07-03T15:43:38.007
> 
> 标签：.net, networking, printing, ip

我在网络上安装了一台打印机，我正在寻找一种将 IP 地址解析为名称的方法，反之亦然。

因此，首先将打印机插入网络插座。它有自己的名称和静态 IP 地址。
像这样，我可以通过打开与 IP 地址的连接并向其发送数据流 (ZPL) 来向其发送文本。

其次 - 打印机安装在打印服务器上。
\\PRINT_SERVER\Windows_Printer_Name
检查属性我可以在“端口”和“配置端口”下找到它的 IP 地址。（而不是像 COM1 或 LPT1 这样的本地端口，它使用 TCP/IP '端口'，它是一个 IP 地址）

我需要一种从 Windows 路径中自动查找此 IP 地址的方法。

好吧，我实际上需要做的是反过来工作。从 IP 地址中，找到服务器/名称 - 但我可以看到这并不容易..

我在 .NET 中工作，因此通过该方法的方法将是完美的，但如果有必要，我可能会从命令行解析某些内容。假设有可能吗？

谢谢

* * *

为清晰起见进行了编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:05:04.827

过去的一个命令行参数曾经是 nbtstat ，它“使用 NBT（TCP/IP 上的 NetBIOS）显示协议统计信息和当前 TCP/IP 连接”和 -A 开关

```
nbtstat -A 192.168.0.1 
```

假设您的服务器 ipname 是 192.168.0.1

从服务器名获取 ip 将使用 ping :)

```
ping servername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T13:36:55.407

聚会迟到了，但任何人都对命令行脚本感兴趣。这列出了打印机的队列名称和端口值。我认为真实的IP地址并不那么容易解析，端口值并不总是IP地址，有时会有1.2.3.4_IP后缀或IP_前缀字符串。

```
' c:> cscript -nologo scriptname.vbs

Option Explicit

Dim StdOut: Set StdOut = WScript.StdOut
Dim owshNetwork: Set owshNetwork = CreateObject("WScript.Network")
Dim oPrinters
Dim idx

Set oPrinters = owshNetwork.EnumPrinterConnections

for idx=0 to oPrinters.count/2-1
    StdOut.WriteLine "Name=" & oPrinters.Item(idx*2+1) & ", Port=" & oPrinters.Item(idx*2)
next 
```

# ssrs-2008 - SSRS 中除以零误差

> ID：11314538
> 
> 赞同：0
> 
> 时间：2012-07-03T15:43:43.053
> 
> 标签：ssrs-2008, reporting-services

我正在尝试调试另一个开发人员创建的 SSRS 报告中的错误。据我所知，这是一个除以零的问题。报告在这里所做的只是在最后计算一个百分比。存储过程在返回结果之前将所有空值转换为零，所以我看不出这里有什么问题。有任何想法吗？

```
=
Sum(IIf(Fields!ConstructionTradeDesc.Value = "Journeyman", 
    Fields!BlackF.Value + Fields!HispanicF.Value + Fields!AsianPacificF.Value  + Fields!NativeAmericanF.Value + Fields!OtherF.Value, 
Nothing)) 
/ 
Sum(IIf(Fields!ConstructionTradeDesc.Value = "Journeyman" 
    and 
Fields!BlackM.Value + Fields!BlackF.Value + Fields!HispanicM.Value + Fields!HispanicF.Value + Fields!AsianPacificM.Value + Fields!AsianPacificF.Value + 
Fields!NativeAmericanM.Value + Fields!NativeAmericanF.Value + Fields!OtherM.Value + Fields!OtherF.Value > 0, 

Fields!BlackM.Value + Fields!BlackF.Value + Fields!HispanicM.Value + Fields!HispanicF.Value + Fields!AsianPacificM.Value + Fields!AsianPacificF.Value + 
Fields!NativeAmericanM.Value + Fields!NativeAmericanF.Value + Fields!OtherM.Value + Fields!OtherF.Value, 
1)) 
* 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:08:43.833

SSRS 不会自动为您处理除以零错误，但看起来您正试图在代码中解决这个问题，这将是正确的方法。您是否在所有显示中看到任何错误 - 例如在“错误列表”窗口（您可以从“查看”菜单中打开）？

问题可能是您需要将 IIF 函数放在表达式的外部而不是内部。所以是这样的：

```
=
Iif(Fields!ConstructionTradeDesc.Value = "Journeyman", 
    sum(Fields!BlackF.Value + Fields!HispanicF.Value + Fields!AsianPacificF.Value  + Fields!NativeAmericanF.Value + Fields!OtherF.Value), 
Nothing)
/ 
Iif(Fields!ConstructionTradeDesc.Value = "Journeyman" 
    and 
sum(Fields!BlackM.Value + Fields!BlackF.Value + Fields!HispanicM.Value + Fields!HispanicF.Value + Fields!AsianPacificM.Value + Fields!AsianPacificF.Value + 
Fields!NativeAmericanM.Value + Fields!NativeAmericanF.Value + Fields!OtherM.Value + Fields!OtherF.Value) > 0, 

sum(Fields!BlackM.Value + Fields!BlackF.Value + Fields!HispanicM.Value + Fields!HispanicF.Value + Fields!AsianPacificM.Value + Fields!AsianPacificF.Value + 
Fields!NativeAmericanM.Value + Fields!NativeAmericanF.Value + Fields!OtherM.Value + Fields!OtherF.Value), 
1)
* 100 
```

# objective-c - UIScrollView 捏手势识别器调用什么选择器？

> ID：11314543
> 
> 赞同：1
> 
> 时间：2012-07-03T15:44:13.557
> 
> 标签：objective-c, ios, uigesturerecognizer, uipinchgesturerecognizer

我有一个自定义捏合手势识别器，我正在用它替换 UIScrollView 的捏合手势识别器。假设我希望这个捏合手势识别器的行为与 UIScrollView 的捏合手势识别器完全一样 100%。我可以以某种方式设置手势识别器的选择器来实现这一点吗？

或许像

```
GPinchGestureRecognizer *graphPinch = [[GPinchGestureRecognizer alloc] initWithTarget:scrollView action:@selector(pinchHandler:)]; 
```

或者其他的东西？

实际上，我确实希望识别器的行为与 UIScrollView 附带的几乎完全相同，除了在 UIScrollView 中包含的视图中我覆盖 setTransform 并且我想根据此自定义捏识别器中设置的标志来限制转换更改。尝试对 UIScrollView 的捏合手势识别器所做的调用堆栈更高层的所有内容进行逆向/猜测工程已被证明是困难且烦人的。我需要我的自定义识别器对设置一些在 setTransform 中读取的标志的触摸进行一些算术运算，但除此之外，我还想要完全标准的 UIScrollView 捏合行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:56:07.813

为什么不直接将滚动视图的属性用于捏合手势识别器。

就像是。

```
myScrollView.pinchGestureRecognizer = graphPinch; 
```

编辑：哎呀，没关系，那是只读的。

相反，使用 pinchGestureRecognizer 来覆盖你想要的行为。您还可以使用 UIScrollView 的其他属性来捕捉它何时滚动。

方法在这里列出：

[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

[UIPinchGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIPinchGestureRecognizer)

# c - 将枚举定义转换为 unsigned int

> ID：11314545
> 
> 赞同：7
> 
> 时间：2012-07-03T15:44:27.140
> 
> 标签：c, casting, enums, unsigned-integer, iar

根据这篇 SO 帖子：
[C 中枚举的大小是多少？](https://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c)
枚举类型有`signed int`类型。

我想将枚举定义从 转换`signed int`为`unsigned int`。

例如，在我的平台上，an`unsigned int`是 32 位宽的。我想创建一个枚举：

```
typedef enum hardware_register_e
{
    REGISTER_STATUS_BIT = (1U << 31U)
} My_Register_Bits_t; 
```

我的编译器抱怨上面的定义超出了范围（它适用于 a `signed int`）。

如何声明`unsigned int` `enum`值？

## 编辑1：

1.  首选不扩展到 64 位（因为代码驻留在嵌入式系统中）。
2.  由于技能限制，此项目不允许使用 C++。:-(

## 编辑2：

*   编译器是用于 ARM7 的 IAR Embedded Workbench。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:51:24.897

> 根据这篇 SO 帖子：C 中枚举的大小是多少？枚举类型具有带符号的 int 类型。

问题是`enum`类型*可以*是`int`类型，但它们不在`int`C 中。在`gcc` ^(1))上，默认情况下`enum`是类型`unsigned int`。

`enum`常量是`int`但`enum`类型是实现定义的。

在您的情况下，`enum`常量是`int`，但您给它的值不适合 a `int`。你不能`unsigned int` `enum`像 C 所说的那样在 C 中有常数`int`。

* * *

[1）gcc实现定义的枚举类型文档：“通常，如果枚举中没有负值，则类型为无符号整数，否则为整数” [http://gcc.gnu.org/onlinedocs/gcc/Structures-unions-enumerations -and-bit_002dfields-implementation.html](http://gcc.gnu.org/onlinedocs/gcc/Structures-unions-enumerations-and-bit_002dfields-implementation.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:57:31.060

不幸的是，ISO C 标准（c99 6.4.4.3）声明枚举常量的类型是`int`. 如果你用 eg 编译上面的代码`gcc -W -std=c89 -pedantic`，它会发出警告`ISO C restricts enumerator values to range of ‘int’ [-pedantic]`。一些嵌入式编译器可能根本不接受代码。

如果您的编译器比较挑剔，您可以使用以下方法解决该问题

```
typedef enum hardware_register_e
{
    REGISTER_STATUS_BIT = -2147483648   /* 1<<31, for 32-bit two's complement integers */
} hardware_register_t; 
```

但只有`int`在您的体系结构上是 32 位二进制补码类型时，它才能正常工作。它适用于我曾经使用或听说过的所有 32 位和 64 位架构。

编辑添加：ARM7 使用 32 位二进制补码`int`类型，所以上面应该可以正常工作。我只建议您保留解释实际值为`1<<31`. 你永远不知道是否有人移植了代码，或者使用了另一个编译器。如果新编译器发出警告，同一行的注释应该可以轻松修复。就个人而言，我会将代码包装在一个条件中，也许

```
typedef enum hardware_register_e
{
#ifdef __ICCARM__
    REGISTER_STATUS_BIT = -2147483648   /* 1<<31, for 32-bit two's complement integers */
#else
    REGISTER_STATUS_BIT = 1 << 31
#endif
} hardware_register_t; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:50:07.113

检查您的编译器是否有选项或编译指示使枚举无符号。如果不是，那么您只需要使用普通`unsigned int`（或固定宽度类型，例如`uint32_t`）而不是枚举，使用`#define`s 来定义它可以采用的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T15:50:18.067

您不能（至少可移植地）更改枚举的类型。标准很清楚，枚举常量具有 type `int`。要摆脱警告，您可以使用演员表：

```
typedef enum hardware_register_e
{
    REGISTER_STATUS_BIT = (int)(1U << 31U)
} My_Register_Bits_t; 
```

**可能的替代方案**

如果这不必在标头中，则可以使用`const`所需类型的对象而不是枚举常量：

```
const unsigned int REGISTER_STATUS_BIT = (1U << 31); 
```

否则，您可以使用定义：

```
#define REGISTER_STATUS_BIT (1U << 31) 
```]

# java - 使用 IIR 滤波器生成粉红噪声

> ID：11314547
> 
> 赞同：1
> 
> 时间：2012-07-03T15:44:40.167
> 
> 标签：java, math, signal-processing

我实现了来自 ''Proceedings of the IEEE'', N. Jeremy Kasdin (page 825) [pdf](http://www.umbc.edu/photonics/Menyuk/Phase-Noise/kasdin_ProcIEEE_950501n.pdf)的以下代码。但我不明白这些行，因为我没有数字食谱书：

```
/* perform the discrete Fourier transform */  
realft (hfa,n_pts, 1); 
realft (wfa,n_pts, 1);

wfa[1]=wfa[1]*hfa[1]; 
wfa[2]=wfa[2]*hfa[2]; 

for(i=3;i<=nn;i+=2) { 
wr=wfa[i]; 
wi=wfa[i+1]; 
wfa[il=wr*hfa[i]-wi*hfa[i+1]; 
wfa[i+l]=wr*hfa[i+1]+wi*hfa[i];
} 
```

有人可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:03:31.820

NR 中的`realft`函数执行以下操作。你给它一个由 N 个实数组成的数组。（N 必须是 2 的幂。）它的离散傅立叶变换由 N 个遵循共轭对称关系的复数组成：F(k) 和 F(Nk) 是共轭的。特别是，F(0) 和 F(N/2) 是实数。所以`realft`返回N个实数，如下：F(0)，F(N/2)，F(1)的实部，F(1)的虚部，F(2)的实部，...，虚部F(N/2-1) 的一部分。

NR 最初都是 Fortran，并且（至少在旧版本中）使用基于 1 的索引而不是基于 0 的索引。即使在 C 中也是如此。这就是为什么代码从对元素 1 进行操作开始并以`nn`包含方式而不是排他方式运行的原因。

因此，您已经采用了`hfa`和的 FT `wfa`。其余的代码只是计算结果的元素乘积——前两行是简单的实数乘法，其余的是复数相乘。

我猜在那之后还有另一个调用`realft`with`-1`作为最后一个参数（意思是做逆运算）。所以整个事情是：FT of `hfa`and of `wfa`; 将它们逐元素相乘；逆FT。换句话说，卷积。

# c# - object.update() 中的 Xna timer++

> ID：11314552
> 
> 赞同：0
> 
> 时间：2012-07-03T15:44:56.040
> 
> 标签：c#, xna

英语不是我的母语，所以请提前原谅我。

由于计算机性能，我应该在计时器上使用游戏时间吗？

喜欢，替换这个

```
float timer = 0;

Update()
{
...code...
timer++;
...code...
} 
```

经过

```
float timer = 0;

Update()
{
...code...
timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;
...code...
} 
```

我对此有点困惑。我知道游戏时间是执行 1 个循环的时间（=1 帧）所以，计算 Fps = (1000 / gameTime.ElapsedGameTime.TotalMilliseconds;)

但我真的不知道什么时候在我的代码中使用游戏时间：s

如果有人可以帮助我...

奇怪的是，我没有找到很多谈论 GameTime 的网站。我认为这是基本的！=x

谢谢阅读 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:58:25.280

[GameTime](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime_members.aspx)类包含有关不同时间值的信息，您可以使用这些信息在游戏中执行操作。

例如，以恒定速度移动的精灵的当前位置（仅说 X）由下式给出

> totalTimeInMilliSecondsSinceStartOfGame * 速度

，其中*速度*是一些因素。现在，无论您在哪台机器上运行此代码（帧率），这个精灵都会以相同的速度移动。

这是 GameTime 类的真正目的。

希望这可以帮助。

# html - 谷歌搜索框不工作，没有控制台错误

> ID：11314553
> 
> 赞同：1
> 
> 时间：2012-07-03T15:44:58.483
> 
> 标签：html, ajax, jquery

我正在练习编写 jQuery 和 Ajax 代码并制作一个普通的 Google 搜索框，但它不起作用。没有控制台错误，Chrome 中的调试也无济于事。这是代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#button").click(function() {
            $.ajax({
                url : "http://www.google.com/search",
                dataType : "html",
                success : function(data) {
                    $("#show").html(data)
                },
                fail : function() {
                    alert("failed lol")
                }
            })
        })
    })
</script>
</head>
<body>
    <div id="search">
        <form name="input" method="get">
            Google it: <input type="text" name="googleit" /> <br /> <br /> <input
                id="button" type="button" value="let me google that for you" />
        </form>
    </div>
    <div id="show"></div>
</body>
</html> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:49:07.980

您不能那么容易地进行跨域调用，它受[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的限制。检查您的网络选项卡，它应该说明请求失败。

此外，您甚至没有交出输入字段的值。您应该像这样将它附加到 url `?q=hello`。

```
 $.ajax({
            url : "http://www.google.com/search?q=" + $("input").val(),
            dataType : "html", 
```

您需要一个所谓的[JSONP 调用](http://en.wikipedia.org/wiki/JSONP)来访问其他域。

看看[Google 搜索 API](https://developers.google.com/custom-search/v1/overview)。

# optimization - 如何在 Web 浏览器中测试我的解决方案的渲染速度？

> ID：11314554
> 
> 赞同：1
> 
> 时间：2012-07-03T15:45:01.833
> 
> 标签：optimization, rendering, benchmarking, load-testing

好的，我需要在网络浏览器中测试我的解决方案的速度，但是我有一些问题，有两个版本的网络解决方案，在服务器 A 上的原始版本和在服务器 B 上的“固定”版本.

我有 VS2010 Ultimate，所以我可以在解决方案 B 上进行 Web 和负载测试，但我无法在我的 IDE 上加载 A 解决方案。

我试图使用[fiddle2](http://fiddler2.com/fiddler2/)和[jmeter](http://jmeter.apache.org/)，但它们只给了我浏览器与服务器的请求和响应时间，我还想要浏览器渲染整个页面所需的时间。

也许我滥用了一些工具......

我不知道这是否有用，但是：

*   解决方案 A 在 VB 6.0 上
*   解决方案 B 在 VB.Net 上

它需要在 IE、FF、Chrome、Opera 和 Safari 中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-25T06:43:10.163

如果您的组织已经拥有应用程序性能管理，那么这是最好的选择。你会追随他们的 javascript 注入技术。基本上，它将 JavaScript 添加到网页并测量指标，主要使用 Navigation Timings API。

[https://w3c.github.io/navigation-timing/](https://w3c.github.io/navigation-timing/)

Nav Timings 将为您提供诸如网络加载时间、dom 构建时间和页面渲染时间等指标。

我猜你可能不想花钱。我没有使用过这个开源库，但它说它会为你安排导航时间。可能值得一试。

[https://github.com/sitespeedio/sitespeed.io](https://github.com/sitespeedio/sitespeed.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:02:04.597

YSlow is great in firefox, as is PageSpeed in google, but these are browser specific.

You might look at JQuery as it has a $(document).ready which will run some javascript upon the document being loaded. This should enable you to time when the page is done loading across different browsers.

Another option would be to use [selenium](http://seleniumhq.org/). There is a discussion at [https://groups.google.com/forum/?fromgroups#!topic/selenium-test-tool/zR_U57obJz8](https://groups.google.com/forum/?fromgroups#!topic/selenium-test-tool/zR_U57obJz8) that might be helpful.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:00:59.157

您正在寻找的流行语是[应用程序性能监控/管理 (APM)](http://en.wikipedia.org/wiki/Application_performance_management) ......特别是解决方案，包括呈现网页的跨浏览器用户体验指标。

有几种方法可以检测 Web 应用程序，但您对经典 VB 6.0 的要求确实限制了选项。

需要考虑的一些可能性：

*   一种简单的方法是添加网页分析（例如[Google Analytics](http://www.google.com/analytics/)、[Piwik](http://piwik.org/)等），其中包括呈现的页面加载时间，并让您按特定浏览器版本和操作系统进行细分。典型的集成级别是在您的 Web 应用程序中包含 JavaScript。

*   对于 .NET 等更现代的框架，还有一些特定的 APM 工具，例如[New Relic](http://newrelic.com/)和[Application Dynamics](http://www.appdynamics.com/)。这些通常从应用程序、数据库和服务器级别开始进行性能测量，并扩展到最终用户体验。典型的集成级别是通过在您的服务器上运行的 Web 服务器模块和/或代理。

还有许多特定于浏览器的插件，但这些插件通常需要为每次测试运行手动收集数据......并且在比较跨浏览器性能方面没有太大帮助，因为测量方法不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T00:24:17.563

如果您需要回答第 7 层问题 (GUI)，请使用第 7 层工具，例如 Selenium

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:02:00.147

你的答案在你的问题中。要在浏览器中获取站点的页面加载时间，您应该使用浏览器。浏览器不仅将成为浏览器的最准确表示，而且您会惊讶于要获得一个合成工具来记录页面加载时间的真实、主观数字是多么困难。如果您还想要 FF、Chrome 等的数据，请安装并使用它们。跨浏览器页面加载调整的最佳（唯一？）方法是跨多个浏览器重复测试！

所以，这是客户端的东西（又名 WPO）。

对于服务器，您可以使用 JMeter 之类的工具，这将加载您的服务器，而不是您的客户端。您希望将服务器与客户端分开测试，并且在测试服务器时，您应该专注于服务器而几乎忽略客户端。JMeter 和它的朋友不是浏览器，但他们非常擅长模拟来自浏览器的*服务器调用*，并且应该在这个级别（HTTP 级别）执行此任务。所以，回顾一下，这是以*服务器*为中心的活动，而不是客户端。

一旦你完成了所有这些，是的，客户端工具对自动化和回归很有用，但它们实际上只对你已经调整过的东西有用。

合成工具不如秒表和人脑的原因。

1.  大多数工具会记录加载所有内容所需的时间，但如今这与用户体验并不总是相同。我们努力将加载内容推送到页面的背景或底部（首屏下方），但合成工具看不到这些内容。

2.  同样，js 和图像可能仍在加载，但从用户的角度来看，页面是完整的。工具不会看到这一点，人脑会。

3.  页面加载的*方式*可能会略有不同，这可能对人类体验没有太大影响，但可能会导致工具出现问题。例如。第三方调用可能会超时，但如果这不会阻止页面，用户甚至可能看不到它。

# c# - 在 C# 上模拟 CTRL-C 以关闭 Java 应用程序

> ID：11314556
> 
> 赞同：1
> 
> 时间：2012-07-03T15:45:04.350
> 
> 标签：c#, java, shutdown-hook

我创建了一些代码来从 C# 控制台应用程序正确关闭 java 应用程序，`InputSimulator`但是当我尝试它时，它没有给我预期的结果。

**当我使用键盘 CTRL-C 关闭我的 Java 应用程序时**

```
...
[INFO] 2012-07-03 19:29:36 - Packet: [C] 0x02
[INFO] 2012-07-03 19:29:40 - Shutdown hook raised, shutting down...
[INFO] 2012-07-03 19:29:45 - All data saved. Good luck! 
```

**当我使用 InputSimulator 关闭我的 java 应用程序时**

> 全线程转储 Java HotSpot(TM) 客户端 VM（20.6-b01 混合模式）：
> 
> “DestroyJavaVM”prio=6 tid=0x4b524000 nid=0x6f4 等待条件 [0x00000000] java.lang.Thread.State: RUNNABLE
> 
> “线程 1”prio=6 tid=0x4b523800 nid=0x65c 等待条件 [0x4cd0f000] java.lang.Thread.State: TIMED_WAITING (sleeping) at java.lang.Thread.sleep(Native Method) at gameserver.utils.DeadlockDetector .run(DeadlockDetector.java:76) at java.lang.Thread.run(Unknown Source)
> 
> “server-rdc-acceptor”prio=6 tid=0x4b523000 nid=0x102c 可运行 [0x4cc7f000] java.lang.Thread.State: 在 sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method) 在 sun.nio 处可运行。 ch.WindowsSelectorImpl$SubSelector.poll(Unknown Source) at sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(Unknown Source)
> 
> ```
>  at sun.nio.ch.WindowsSelectorImpl.doSelect(Unknown Source)
>     at sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
>     - locked <0x3e057ef0> (a sun.nio.ch.Util$2)
>     - locked <0x3e057ee0> (a java.util.Collections$UnmodifiableSet)
>     - locked <0x3e057cc0> (a sun.nio.ch.WindowsSelectorImpl)
>     at sun.nio.ch.SelectorImpl.select(Unknown Source)
>     at sun.nio.ch.SelectorImpl.select(Unknown Source)
>     at commons.ngen.network.Acceptor.run(Acceptor.java:259) 
> ```

**我的 InputSimulator 使用：**

```
private void StartServer()
{

                ProcessStartInfo info = new ProcessStartInfo();
                info.UseShellExecute = false;
                info.FileName = "java"
                info.Arguments = "-Xms512m -Xmx1024m server.jar gameserver.Server"
                ServerProcess = new Process();
                ServerProcess.StartInfo = info;
                ServerProcess.Start();

                Thread.Sleep(60000);
                CloseCorrectly(ServerProcess);
}

private void CloseCorrectly(Process pr)
{
  IntPtr hWnd = pr.MainWindowHandle;
  if (hWnd != null)
            {
                    SetForegroundWindow(hWnd);
                    Thread.Sleep(1000);
                    InputSimulator f = new InputSimulator();

                    f.Keyboard.ModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.CANCEL);

                Thread.Sleep(1000);
            }
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:56:31.863

主页（[http://inputsimulator.codeplex.com/](http://inputsimulator.codeplex.com/)）建议 ctrl-C 可以通过以下方式完成：

```
InputSimulator.SimulateModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_C); 
```

文档没有说明取消是什么，但幸运的是，JamesB 勇敢地搜索了源代码，发现它指的是中断。

试试上面的代码，它应该有望模拟一个真正的 ctrl-c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:59:50.987

我了解您已经在使用 InputSimulator，问题是针对 SimulateModifiedKeyStroke

但是你可以通过调用来实现这一点

```
Sendkeys.SendWait("^c") 
```

# wpf - 绑定到由 ContentControls 组成的集合时，不应用 HierarchicalDataTemplate

> ID：11314557
> 
> 赞同：1
> 
> 时间：2012-07-03T15:45:20.367
> 
> 标签：wpf, binding, treeview, wpf-controls, hierarchicaldatatemplate

我将一个树视图绑定到一个集合，其中项目的类型是 ContentControl。我的分层数据模板（以及样式）未应用于项目。

```
<TreeView Name="tvCategories" ItemsSource="{Binding Items}">
<TreeView.Resources>
    <HierarchicalDataTemplate DataType="{x:Type EmailClient:EmailFolder}" ItemsSource="{Binding Messages}">
        <StackPanel Orientation="Horizontal">
            <Image Source="{Binding ImageSource}" Stretch="Fill" Width="{Binding RelativeSource={RelativeSource Self}, Path=Source.PixelWidth}" Height="{Binding RelativeSource={RelativeSource Self}, Path=Source.PixelHeight}" SnapsToDevicePixels="True"/>
            <TextBlock Text="{Binding Title}" />
        </StackPanel>
    </HierarchicalDataTemplate>
</TreeView.Resources> 
```

DataTemplate 本身是正确的 - 如果我将它用作 Treeview.ItemTemplate，那么一切都很好。如果我的项目不是 ContentControl 的后代，那么一切都会再次正常。

为什么会这样？

# sql - 访问 SQL 查询，根据日期从 1 个表中返回 6 个计数

> ID：11314565
> 
> 赞同：0
> 
> 时间：2012-07-03T15:45:50.180
> 
> 标签：sql, ms-access

抱歉，如果之前有人问过这个问题，我的数据库表结构如下：

```
AgentName | Sold1 | SoldDate1 | Sold2 | SoldDate2 | Sold3 | SoldDate3
Geoff     | True  | 20/06/2012 | False | Null     | True  | 20/04/2012
Alex      | True  | 13/02/2012 | True  | 26/06/2012 | False | Null 
```

基本上我要做的是计算上个月 Geoff 在 Sold1 中售出的数量，但首先它必须检查 sold1 是否为真，然后对 Sold2 和 Sold3 再次进行同样的检查。

我的目标是让返回的数据按 AgentName 分组并显示为：

```
AgentName     TotalSold1       TotalSold2      TotalSold3 
```

我希望有人能提供帮助，因为我整天都在寻找解决方案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:07:41.230

table_name 是表的名称

```
select t0.AgentName, CountSold1, CountSold2, CountSold3 from (
  select distinct AgentName from table_name
) t0 left join (
  select AgentName, count(*) CountSold1 from table_name
  where Sold1 = 'True' and SoldDate1 between '01-JUN-2012' and '30-JUN-2012'
  group by AgentName
) t1 on t0.AgentName = t1.AgentName left join (
  select AgentName, count(*) CountSold2 from table_name
  where Sold2 = 'True' and SoldDate2 between '01-JUN-2012' and '30-JUN-2012'
  group by AgentName
) t2 on t1.AgentName = t2.AgentName left join (
  select AgentName, count(*) CountSold3 from table_name
  where Sold3 = 'True' and SoldDate3 between '01-JUN-2012' and '30-JUN-2012'
  group by AgentName
) t3 on t2.AgentName = t3.AgentName 
```

# c++ - 如何设置水平标题QHeaderView的高度？

> ID：11314566
> 
> 赞同：0
> 
> 时间：2012-07-03T15:45:57.753
> 
> 标签：c++, qt, qheaderview

我需要调整两个表格的标题，彼此靠近，因为标题有不同的文本行。这似乎是不可能的。

请任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:16:14.410

创建一个派生自的类`QHeaderView`并提供您自己的实现，`sizeHint`以返回您想要的正确高度。IE

```
QSize MyCustomHeaderView::sizeHint() const
{
    // Get the base implementation size.
    QSize baseSize = QHeaderView::sizeHint();

    // Override the height with a custom value.
    baseSize.setHeight( 25 );

    return baseSize;
} 
```

# django - Django 的 loaddata 无法识别我的 manytomanyfield

> ID：11314567
> 
> 赞同：2
> 
> 时间：2012-07-03T15:46:09.123
> 
> 标签：django, django-models

我正在尝试加载一个具有`ManyToManyField`.

这是我的 JSON 代码：

```
[ 
{
"pk": 1, 
"model": "myapp.unipart", 
"fields": {
  "last_updated": "2012-06-12 16:27:01", 
  "description": "My description", 
  "coverart": "", 
  "url": "http://sjjdd.pdf", 
  "source": "sdfsdf", 
  "part": "sfsdfsd", 
  "shortdesc": "ssds3", 
  "dsfd": [], 
  "category_id": [1,2,3,4,5,10,11], 
  "uid": 123, 
  "manufacturer": "dsfsd"
}
  }
] 
```

导致问题的字段是`category_id`. 我不得不手动输入这些值，因为转储数据`category_id`留空。所以不确定这是否与它有关。

我知道这不是很多数据，但我很难过。我输入键值的方式是否`category_id`正确？

关于如何转储字段或进行一些调试以找出它为什么不能正确读取的任何其他想法？

顺便说一句，我验证了 category_id 中的所有值确实存在于它映射到的类别表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T23:57:48.493

事实证明，我存储为`category_id`'s 的值不是表的主键`Category`，因此 Django 无法在表中找到任何对应的条目。我在那里有整数——这就是它令人困惑的原因，但它们指的是表中的另一个字段。

因此，如果这也发生在您身上，请确保您正在映射到您的多对多表链接到的表的主键 ID！

# java - 尝试中断和加入 main 时 Java 线程挂起

> ID：11314570
> 
> 赞同：3
> 
> 时间：2012-07-03T15:46:15.550
> 
> 标签：java, multithreading, concurrency, freeze, runnable

因此，我已经为这个问题苦苦挣扎了一整天，并且在查阅了一些线程教程和示例后，仍然无法达到我想要的结果。

我有一个线程，其唯一的工作是轮询字符串的 LinkedBlockingQueue，然后使用 PrintWriter 通过套接字将字符串传递给客户端。该功能运行良好，但我现在正试图通过允许它在连接中断和重新启动时正常失败来增强它。为了实现这一点，我在线程上调用中断，然后加入，最终目标是重新创建 Thread 对象以重新开始。不幸的是，线程挂在 join 的调用上，这一定意味着线程实际上永远不会死掉，但我完全不知道为什么会这样。相关代码如下。

```
try {
    resultSetStreamer.interrupt();
    resultSetStreamer.join();
    logger.info("Streamer finished.");
} catch (InterruptedException e) {} 
```

实际线程代码；

```
class ResultSetStreamer implements Runnable {

    GZIPOutputStream gzos = null;
    Socket clientSocket = null;

    @Override
    public void run() {

        try {
            logger.debug("Thread started.");

            // Blocks and waits for an external connection.
            clientSocket = serverSocket.accept();

            // Creates a compression stream using best possible compression
            // to the external connection.
            gzos = new GZIPOutputStream(clientSocket.getOutputStream()) {
                {
                    def.setLevel(compression);
                }
            };
            PrintWriter toClient = new PrintWriter(new BufferedWriter(
                    new OutputStreamWriter(gzos), bufferSize), false);

            while (true) {
                if (Thread.interrupted()) {
                    throw new InterruptedException();
                }
                if (moreRowsToReceive || !dataBuffer.isEmpty()) {
                    // Synchronisation point.
                    String row = dataBuffer.poll(pollTime,
                            TimeUnit.MILLISECONDS);
                    if (row != null) {
                        toClient.println(row);
                        logger.trace("Current row: " + ++currentCount + ".");
                    }
                } else {
                    toClient.flush();
                    break;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            try {
                gzos.finish();
                clientSocket.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        logger.debug("Thread finished.");
    }
} 
```

要看的主要地方是 while(true) 循环，它应该始终循环并检查线程是否已被中断，在这种情况下，它会抛出在底部捕获的异常以允许线程死亡。我不认为 PrintWriter 应该阻止代码的执行。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:02:57.647

JVM 不强制中断来终止线程。您需要确保您的代码调用的所有阻塞调用都支持中断。

例如，如果客户端没有接收数据，输出缓冲区将填满，toClient.println() 将阻塞，但此调用不支持中断，因此调用 .interrupt() 不会终止它。

我建议添加更多调试日志以确定代码块的确切位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:42:01.517

在您正在运行的机器上，尝试启动 jconsole 并附加到您正在运行的程序。在“线程”选项卡下，您应该能够单击每个线程并查看它当前在做什么。这应该让您知道您的 Runnable 对象上的哪些语句尚未完成。

# debugging - Intellitrace 11 和桌面应用程序

> ID：11314577
> 
> 赞同：0
> 
> 时间：2012-07-03T15:46:59.263
> 
> 标签：debugging, intellitrace

我尝试通过 Intellitrace 11 调试我的桌面应用程序。但我发现只有一本关于 Intellitrace 11 的手册（[这里](http://msdn.microsoft.com/en-us/vs11trainingcourse_diagnosingissues_topic2.aspx)），但这里是关于调试 Web 应用程序的，它托管在 IIS 上。Web 中的所有其他手册类似，并且都是关于调试 Web 应用程序的。

是否可以通过 Intellitrace 11 调试 desctop 应用程序（独立，没有测试管理器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:21:36.223

是的，使用独立 IntelliTrace 收集桌面应用程序是 Visual Studio 2012 中支持的方案。以下帖子可能是您正在寻找的内容：http: [//msdn.microsoft.com/en-us/library/hh398365.aspx#BKMK_Collect_Data_from_Executables](http://msdn.microsoft.com/en-us/library/hh398365.aspx#BKMK_Collect_Data_from_Executables)

如果您使用的是 Visual Studio 2010，您将不走运。

# tridion - Tridion - 超时错误

> ID：11314578
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:46:59.430
> 
> 标签：tridion

对全局出版物进行更改会导致超时错误

```
database error occurred while executing Stored Procedure "EDA_SYSTEM_GETBLUEPRINT".
Timeout expired.  The timeout period elapsed prior to completion of the operation
or the server is not responding. 
```

同样 CP 给出错误

```
The timeout period elapsed prior to completion of the operation or the server
is not responding
A database error occurred while executing Stored Procedure
"EDA_PUBLICATIONS_FINDBPCONFLICTS 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:16:55.643

正如 Frank 所提到的，任何 Tridion DB 性能的第一步都是优化。如果您强制重建索引并重新编译统计信息，错误是否仍然出现？您还可以使用 SQL Server 中的 FULLSCAN 选项（或 Oracle 中的 100% 样本大小）重新编译统计信息 - 如果您的内容不均匀地存储在文件夹/结构组中，这会有所帮助。

您还可以简单地增加 Tridion Content Manager MMC 管理单元中的查询超时值（在“超时设置”下）。

您没有提及 Tridion 的版本（或数据库类型），但如果您使用的是 Tridion 2011 GA HR1，您可能需要查看修补程序 CM_2011.0.1.75219。这可以在这里下载（需要登录）： [https ://www.sdltridionworld.com/Login.aspx?ReturnUrl=/downloads/hotfixes/SDL_Tridion_2011/index.aspx](https://www.sdltridionworld.com/Login.aspx?ReturnUrl=/downloads/hotfixes/SDL_Tridion_2011/index.aspx)

请注意，此修补程序包含在 2011 SP1 中。

# c++ - 在 C++11 中，如何指定隐式“this”参数“[[carries_dependency]]”？

> ID：11314580
> 
> 赞同：21
> 
> 时间：2012-07-03T15:47:16.343
> 
> 标签：c++, c++11, this, member-functions, carries-dependency

在**[dcl.attr.depend]/1**中，我读到：

> 属性[...] `carries_dependency`[...] 可以应用于函数声明或 lambda 中`declarator-id`的`parameter-declaration`该对象的转换（4.1）。该属性也可以应用于`declarator-id`函数声明，在这种情况下，它指定返回值（如果有）携带对函数调用表达式求值的依赖。

我缺少的是一种将属性应用于隐式`this`参数的方法。

例如，考虑这个自由函数：

```
void fun(int i, Foo * [[carries_dependency]] f); 
```

它是等效的（但对于属性）成员版本：

```
void Foo::fun(int i); // can't add [[carries_dependency]] here? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:32:46.527

我不确定并且没有支持此测试的编译器，但这里有一个可能性：我认为语法 [gram.decl] 表明你应该能够把它（“attribute-specifier_opt” ) 在同一个地方，你可以用 "const" 来表示一个常量 this 指针 ("cv-qualifier-seq_opt")，这是有道理的：

```
parameters-and-qualifiers:
    ( parameter-declaration-clause ) attribute-specifier_opt cv-qualifier-seq_opt
        ref-qualifier_opt exception-specification_opt 
```

例如

```
struct X{
    void f(int i) [[carries_dependency]];
}; 
```

# java - 使用 java 创建 XML 将 CR 转换为 HTML 实体

> ID：11314582
> 
> 赞同：2
> 
> 时间：2012-07-03T15:47:18.893
> 
> 标签：java, xml, utf-8, html-entities

我在使用标准 java 对象创建 XML 时遇到了一个非常严重的问题，我的代码如下：

```
//Generate DOM
DOMSource source = this.generateDomDocument(params...);

//WRITE XML FILE
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();

//Properties
transformer.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM, STRING_FIELD_DTD);
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");

//Convert and write to disk
transformer.transform(source, new StreamResult(
                      new OutputStreamWriter(new FileOutputStream(fileName), "UTF-8"))); 
```

问题是，转换器正在转换实体中的回车，`&#13;`而我在生成的 XML 中不应该有这些实体。这是一个示例，我有一个结果文件，其中包含用几种不同语言编写的翻译（这就是我使用 UTF-8 的原因），当它们在文本中包含 CarriageReturns 时它们都是相同的：

```
<content langID="EN">
                    <desc> Test string&#13;
do not copy.</desc> 
```

澄清一下，这是我在 XML 中所期望的：

```
<content langID="EN">
                    <desc> Test string
do not copy.</desc> 
```

我在谷歌和这里也查到了这个问题，但似乎没有解决方案或解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:20:10.420

经过大量工作，我找到了两种解决我自己问题的方法，它们比真正的解决方案更多：

**解决方案 1**

创建一个扩展 FilterOutputStream 的类，并实现必要的方法以将每个字符写入最终流（在上述情况下为 File），除了那些不需要的，即`&#13;` 写入流只需添加过滤器：

```
 StreamResult result = new StreamResult(
                           new OutputStreamWriter(
                               new XMLFilterOutputStream(
                                   new FileOutputStream(filename)),"UTF-8"));
 transformer.transform(source, result); 
```

**解决方案 2**

创建 DOM 树时，只需转义 \r 字符（从而从原始文本中删除每个回车符）：

```
String util = //original string data

Element desc = doc.createElement("desc");                   
Node text = doc.createTextNode((util!=null ? stringEscape(util).trim() : ""));
desc.appendChild(text);
externalElement.appendChild(desc); 
```

并以这种方式完成转义方法：

```
private String stringEscape(String str){
    StringBuffer st = new StringBuffer(str);
    for(int i=0; i < st.length();i++){
        String s = st.substring(i,i+1);
        if("\r".equals(s)){
            st.replace(i,i+1,"");   
        }
    }
    return st.toString();
} 
```

我知道，这很*可怕*，但有效。

正确的解决方案 AFAIK 应该是访问 XALAN 中的 HTMLEntities 文件并修改该文件，从而强制转换器省略一些实体。

# sql - 如何从 VB 运行 ORACLE .SQL 文件

> ID：11314585
> 
> 赞同：0
> 
> 时间：2012-07-03T15:47:33.057
> 
> 标签：sql, vb.net, oracle

我有一个关于通过 VB.NET 执行文件 .sql 的问题。我一直在谷歌搜索并试图找到答案，但不幸的是，这个问题没有直接的答案。

解释 ：

将有一个用于删除、创建和插入的脚本，而不是来自 .sql 文件。

非常感谢

我的解决方案：

考虑了一段时间后，最好的方法就是创建 PL/SQL 或存储过程并通过 VB.NET 脚本执行

希望这对你有帮助 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:51:44.750

这是一个非常广泛的问题，不适合本网站：

查看[此网站](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/dotnet/GettingStartedVBVersion/GettingStartedNET_VBVersion.htm)或[此网站](http://msdn.microsoft.com/en-us/library/ms971488.aspx)了解 ADO.NET 与 Oracle 的介绍

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:54:23.580

我不知道任何简单的“运行这个脚本”的方法。因此，除非您可以在单独的进程中启动某种命令行，否则我认为您会发现您需要自己完成这项工作：

1.  将脚本加载到字符串中（签出`File.ReadAllText`）
2.  建立与数据库的连接
3.  为连接创建命令
4.  将命令的文本设置为脚本文件的内容
5.  执行命令

如果您在完成任何这些任务时遇到困难，请提出另一个问题，我相信每个人都会很乐意为您提供更具体的答案。

# php - 第三方支付处理并在支付完成后授予用户访问权限

> ID：11314588
> 
> 赞同：0
> 
> 时间：2012-07-03T15:47:47.957
> 
> 标签：php, paypal, payment

我正在使用 PayPal 在我的网站上使用类似于下面的表格处理付款。我的网站是一个服务提供商，为了让用户创建帐户，用户必须提交付款，这样他们才能完全访问网站提供的服务。我想知道在实际创建用户帐户并授予用户访问权限之前，是否有一种简单的方法可以确保使用下面的表格处理了付款？

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="business" value="example@gmail.com">
                <input type="hidden" name="lc" value="US">
                <input type="hidden" name="item_name" value="apples">
                <input type="hidden" name="item_number" value="1701">
                <input type="hidden" name="amount" value="119.00">
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="button_subtype" value="services">
                <input type="hidden" name="no_note" value="0">
                <input type="hidden" name="tax_rate" value="0.000">
                <input type="hidden" name="shipping" value="0.00">
                <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynow_SM.gif:NonHostedGuest">
                <input type="image" src="http://www.zaptel.com/zaptel/customer/zaptel/images/btn_checkout.gif" border="0" name="submit">
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:52:03.170

您可以使用[Paypal 的 IPN（即时付款通知）](https://www.paypal.com/ipn/)接收付款通知，然后更新他们的帐户以授予他们访问该内容的权限。Paypal 提供[代码示例](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)以帮助您入门。

# java - 如何通过触摸屏输入修改 Opengl 形状？

> ID：11314592
> 
> 赞同：0
> 
> 时间：2012-07-03T15:48:07.990
> 
> 标签：java, android, opengl-es

如何通过触摸屏输入修改/重新绘制 Opengl 形状？

我当前的尝试监听触摸事件，获取 x 和 y 值，我想用它们来根据 XY 平面中的触摸屏输入重写形状矩阵中的顶点：

编辑：我已经能够读取触摸事件并更新形状矩阵的条目`verticies`

但是，每当我运行程序时，它都会启动，但是一旦我输入触摸事件就会崩溃；

这是我更新的代码：

```
public class MainActivity extends Activity{
float x;
float y;
public float verticies[]={3,4,0,3,-4,0,-3,-4,0,-3,4,0};
public FloatBuffer vertBuff;

    GLSurfaceView mysurface; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        mysurface = new GLSurfaceView(this);

        mysurface.setRenderer(new MyRenderer());
        setContentView(mysurface);

        mysurface.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);

    }
    @Override
    public boolean onTouchEvent(MotionEvent e) {
        // MotionEvent reports input details from the touch screen
        // and other input controls. In this case, you are only
        // interested in events where the touch position changed.

        switch (e.getAction()) {

        case MotionEvent.ACTION_MOVE:
             x = e.getX()/100;
            y = e.getY()/100;

            verticies[0]=x;
            verticies[1]=y;
            vertBuff.put(verticies);      

                mysurface.requestRender();
                break;
        } 
```

我猜它要么 OnDrawframe 不喜欢我更新顶点输入，要么缓冲区重新刷新存在一些不规则，无论哪种方式我都会收到空指针异常错误：

```
 07-05 19:52:12.067: W/dalvikvm(633): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
07-05 19:52:12.087: E/AndroidRuntime(633): FATAL EXCEPTION: main
07-05 19:52:12.087: E/AndroidRuntime(633): java.lang.NullPointerException
07-05 19:52:12.087: E/AndroidRuntime(633):  at com.example.touch_test.MainActivity.onTouchEvent(MainActivity.java:57)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.app.Activity.dispatchTouchEvent(Activity.java:2367)
07-05 19:52:12.087: E/AndroidRuntime(633):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1840)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.view.View.dispatchPointerEvent(View.java:5662)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.os.Looper.loop(Looper.java:137)
07-05 19:52:12.087: E/AndroidRuntime(633):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-05 19:52:12.087: E/AndroidRuntime(633):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 19:52:12.087: E/AndroidRuntime(633):  at java.lang.reflect.Method.invoke(Method.java:511)
07-05 19:52:12.087: E/AndroidRuntime(633):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-05 19:52:12.087: E/AndroidRuntime(633):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-05 19:52:12.087: E/AndroidRuntime(633):  at dalvik.system.NativeStart.main(Native Method) 
```

我应该如何进行？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:52:36.597

看起来，*verticies*在初始化时获得了它的 *_x* 和 *_y* ，但之后不会更新。如果您在*touchEvent*中再次设置顶点，它可能会按假设工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T00:09:43.093

事实证明，为了做到这一点，我必须重新设置并清除缓冲区——为此只需在循环中使用 clear buffer 命令。这将允许延迟更新组成形状的顶点

# reflection - 通过 mixin 列出类的方法

> ID：11314596
> 
> 赞同：5
> 
> 时间：2012-07-03T15:48:29.913
> 
> 标签：reflection, d, mixins

我想在 mixin 中列出一个类的方法。

为此，我假设我必须在 mixin 中打开包含源代码的文件，但是找到该文件的名称比我想象的要难。

我尝试使用

```
__FILE__ 
```

但它给出了 mixin 声明的文件......所以我必须在每个文件中定义 mixin......这没有任何意义，因为目标是减少样板代码。

现在我的解决方案是在类的构造函数中将文件名作为参数传递，然后从那里调用 mixin。由于我将在从同一个父类继承的所有类中执行此操作，因此理想情况下我希望将其放在父类的构造函数中并注册子类的方法。

有没有更好的方法来做到这一点？任何可以在类中搜索方法而无需打开文件的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:53:34.783

这应该是一个很好的起点：[http ://dlang.org/traits.html#allMembers](http://dlang.org/traits.html#allMembers)

然后您可以使用其他特征来确定哪些成员是方法。

# c++ - 使用 Python GTK GUI 前端和 C++ 后端

> ID：11314599
> 
> 赞同：4
> 
> 时间：2012-07-03T15:48:33.393
> 
> 标签：c++, python, gtk, x11, libvlc

我有一些 C++ 代码，现在正在为应用程序构建 GUI。过去，我使用 python 和 pygtk 进行 GUI 编程，偶尔会链接到一些 C++ 代码来完成一些繁重的工作。我想继续这一趋势，但有一个关于在这种情况下如何做到这一点的问题。部分 C++ 代码从相机获取图像，我想在 GUI 上显示这些图像。我过去使用过 libvlc，可以将 xid 从 DrawingArea 传递给 vlc 以在其上绘制视频。我想做同样的事情，但似乎无法弄清楚如何使用 xid。我已经稍微研究了 vlc 代码，但还没有弄明白。如何将 python 中 gtk 小部件的 xid 传递给 C++ 并让 C++ 代码在 gtk 小部件上绘制图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:07:21.967

如果你有一个绘图区，你可以这样做：

```
#include <gdk/gdkx.h>

GtkWidget *drawing_area;
GdkWindow *window;
Window xid;

if (gtk_widget_get_realized (drawing_area)) {
    window = gtk_widget_get_window (drawing_area);
    xid = gdk_x11_window_get_xid (window);
} 
```

然后你可以将 xid 传递给你想要的任何东西。

请注意，小部件只有在实现时才会创建它们的窗口。所以，在绘图区域的“实现”信号发出之前，不要进行上述操作。

您需要使 Python 代码中的绘图区域可用于 C++ 代码。我不太了解 pygtk 的内部结构，所以这取决于你:)

# java - 如何将 Saxon 设置为 Java 中的 Xslt 处理器？

> ID：11314604
> 
> 赞同：34
> 
> 时间：2012-07-03T15:48:59.017
> 
> 标签：java, xslt, sax

这是一个简单的问题，但我找不到答案。我有一个 XSLT 2.0 样式表，正在尝试用 Java 处理。它依赖于来自 Saxon 的 XSL 元素。

我当前的课程适用于简单的 XSLT 1.0，但我在使用 Saxon 构建的 2.0 XSLT 时遇到了关于无法识别元素的错误。

我不知道如何告诉 Java 使用 Saxon 作为处理器。我在课堂上使用 javax.xml.transform。这是我可以设置的属性吗？我把它设置成什么？谢谢！

**编辑** 我想出了如何设置属性以使用撒克逊语，但现在我收到了这个错误。

```
Provider net.sf.saxon.TransformerFactoryImpl not found 
```

如何在我的申请中包含撒克逊人？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-07T22:54:04.823

有多种方法可以做到这一点（按照查找优先顺序）：

## 直接实例化

显式实例化[撒克逊工厂](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/sax/SAXTransformerFactory.html?is-external=true)（对迈克尔上面的评论表示赞同）：

```
TransformerFactory fact = new net.sf.saxon.TransformerFactoryImpl() 
```

*这种方法意味着您的代码在编译时被锁定为使用 Saxon。这可以被视为优势（没有使用错误处理器运行的风险）或劣势（没有机会在执行时配置不同的处理器 - 甚至是 Saxon Enterprise Edition）。*

对于 Saxon-PE，替换为`com.saxonica.config.ProfessionalTransformerFactory`. 对于 Saxon-EE，替换为`com.saxonica.config.EnterpriseTransformerFactory`.

## 指定类名

构造时指定工厂类：

```
TransformerFactory fact = TransformerFactory.newInstance(
        "net.sf.saxon.TransformerFactoryImpl", null); 
```

注意：[从 Java 6 开始可用](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/TransformerFactory.html#newInstance%28java.lang.String,%20java.lang.ClassLoader%29)。[Java 5 版本](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/TransformerFactory.html)没有这个方法。

*这种方法允许您在执行时选择处理器，同时仍然避免类路径搜索的成本和风险。例如，您的应用程序可以提供一些配置机制，通过在各种 Saxon 工厂类之间进行选择，允许它使用不同的 Saxon 版本运行。*

## 使用系统属性

`javax.xml.transform.TransformerFactory`在创建实例之前设置系统属性：

```
System.setProperty("javax.xml.transform.TransformerFactory",    
        "net.sf.saxon.TransformerFactoryImpl"); 
```

或在命令行上（为便于阅读而换行）：

```
java -Djavax.xml.transform.TransformerFactory=
        net.sf.saxon.TransformerFactoryImpl YourApp 
```

*这种方法的缺点是系统属性会影响整个 Java VM。将此属性设置为选择 Saxon 可能意味着应用程序中的某些其他模块（您可能甚至不知道）开始使用 Saxon 而不是 Xalan，如果该模块使用特定于 Xalan 的 XSLT 构造，则该模块可能会因此失败。*

## 使用属性文件

创建以下文件：

```
JRE/lib/jaxp.properties 
```

具有以下内容：

```
javax.xml.transform.TransformerFactory=net.sf.saxon.TransformerFactoryImpl 
```

*这种方法与使用系统属性具有相似的后果。*

## 服务加载器

在 CLASSPATH 上的任何 JAR 中创建以下文件：

```
META-INF/services/javax.xml.transform.TransformerFactory 
```

具有以下内容：

```
net.sf.saxon.TransformerFactoryImpl 
```

*这种方法的缺点是对类路径的微小更改可能会导致应用程序使用不同的 XSLT 引擎运行，可能是应用程序从未测试过的引擎。*

## 平台默认

如果以上均未完成，则将`TransformerFactory`加载平台默认实例。可以在[此处](http://onjava.com/pub/a/onjava/excerpt/java_xslt_ch5/index.html?page=3#plug_layer)找到此可插入层的友好描述。

*请注意，这里的“平台”是指 Java VM，而不是运行它的硬件或操作系统。对于所有当前已知的 Java VM，平台默认是 Xalan 版本（仅支持 XSLT 1.0）。无法保证将来每个 Java VM 都将如此。*

我认为这个答案是反对 Java 做事方式的论据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:52:25.133

您可以显式构造 required`Source`和`Result`objects 以确保它们是 Saxon 实现而不是默认实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T08:45:43.793

我为 Saxon 解析器编写了一个包装器，以使其使用简单，我称它为“ [EasySaxon](http://easysaxon.sblendorio.eu) ”：您可以在[此处](http://easysaxon.sblendorio.eu)找到它，其中包含一些示例代码片段。

希望能帮助到你。

弗朗切斯科

# c# - IQueryable：在不同的上下文中重用查询

> ID：11314608
> 
> 赞同：2
> 
> 时间：2012-07-03T15:49:09.677
> 
> 标签：c#, linq, entity-framework, linq-to-entities

可能是一个答案很愚蠢的问题，但是：有没有办法定义一个 IQueryable，然后在不同的上下文中重用它？

有人认为（伪代码）：

```
public IQueryable<myItem> MyQuery()
{
   using(MyContext context = new MyContext())
   {
        return (from myItem in context.MyItems
                select ...);
   }
} 
```

这将以如下“某种”方式使用。

```
public void MyMethod()
{
    using(MyContext context = new MyContext())
    {
        context.ExecuteQueryUnderContext(MyQuery());
    }

    using(MyContext context2 = new MyContext())
    {
        context2.ExecuteQueryUnderContext(MyQuery());
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:01:41.440

您可以将查询定义为未知现有查询的函数：

```
// You can add any paramaters you want to this method
// You can also turn this into an extension method
public Func<IQueryable<TItem>, IQueryable<TItem>> MyQuery()
{
   return (IQueryable<TItem> items) => (items.Select...);
} 
```

然后像这样使用它：

```
using (var context = new MyContext())
{
    return MyQuery(context.Items).ToList();
} 
```

或者像这样：

```
using (var context = new MyContext())
{
    return MyQuery(context.Items.Where(item.Size > 3)).FirstOrDefault();
} 
```

**这样您就可以重用甚至链接查询。**

甚至像这样：

```
public Item GetItem(Func<IQueryable<TItem>, IQueryable<TItem>> query)
{
    using (var context = new MyContext())
    {
        return query(context.Items).SingleOrDefault();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:57:57.040

```
public static class Extension
    {
        public static IQueryable<MyItem> MyQuery(this IQueryable<MyItem> items, int someId)
        {
            return items.Where(x => x.ID == someId);
        }
    } 
```

使用它：

```
using(MyContext context = new MyContext())
{
       var item = context.MyItems.MyQuery(5);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:00:04.123

你可以使用编译查询；

```
public static readonly Func<MyContext, IQueryable<MyItem>> dbGetMyItems =
CompiledQuery.Compile<MyContext, IQueryable<MyItem>>
(context) => from myItem in context.MyItems
                select ...); 
```

然后像这样称呼它；

```
public void MyMethod()
{
    using(MyContext context = new MyContext())
    {
      var query = dbGetMyItems(context);
    }
} 
```

这也为您提供了缓存查询计划的好处，从而提高了性能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:52:12.213

我会将上下文作为参数传递给您的 Query 方法

```
public IQueryable<myItem> MyQuery(MyContext context)
{

        return (from myItem in context.MyItems
                select ...);
}

public void MyMethod()
{
    using(MyContext context = new MyContext())
    {
      var query = MyQuery(context);
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-12T11:29:48.193

您可以使用我的助手：

```
 public static class QueryHelper
{
    static object Get_FieldValue(object obj, string name, bool isBase)
    {
        if (isBase)
        {
            var _internalContext2 = obj.GetType().BaseType.GetField(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.GetField);
            return _internalContext2.GetValue(obj);
        }
        var _internalContext = obj.GetType().GetField(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.GetField);
        return _internalContext.GetValue(obj);
    }

    static FieldInfo Get_Field(object obj, string name, bool isBase)
    {
        if (isBase)
        {
            var _internalContext2 = obj.GetType().BaseType.GetField(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.GetField);
            return _internalContext2;
        }
        var _internalContext = obj.GetType().GetField(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.GetField);
        return _internalContext;
    }

    static object Get_PropertyValue(object obj, string name, bool isBase)
    {
        if (isBase)
        {
            var _internalContext2 = obj.GetType().BaseType.GetProperty(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
            return _internalContext2.GetValue(obj);
        }
        var _internalContext = obj.GetType().GetProperty(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
        return _internalContext.GetValue(obj);
    }

    static PropertyInfo Get_Property(object obj, string name, bool isBase)
    {
        if (isBase)
        {
            var _internalContext2 = obj.GetType().BaseType.GetProperty(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
            return _internalContext2;
        }
        var _internalContext = obj.GetType().GetProperty(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
        return _internalContext;
    }

    public static void SetInternalContextOfQuery(object old, object newobj)
    {
        var _internalQuery = Get_Field(old, "_internalQuery", false);
        var value = _internalQuery.GetValue(old);
        var _internalContext = Get_Field(value, "_internalContext", false);
        var _newInternalContext = Get_Property(newobj, "InternalContext", false);
        var _internalContextValue = _newInternalContext.GetValue(newobj);

        _internalContext.SetValue(value, _internalContextValue);

        var _ObjectContext = Get_Property(_internalContextValue, "ObjectContext", false);
        var _ObjectContextValue = _ObjectContext.GetValue(_internalContextValue);

        var _objectQuery = Get_Field(value, "_objectQuery", false);
        var _objectQueryValue = _objectQuery.GetValue(value);

        var _providerProperty = Get_Property(_objectQueryValue, "ObjectQueryProvider", false);
        var justV = _providerProperty.GetValue(_objectQueryValue);

        var _provider = Get_Field(_objectQueryValue, "_provider", true);
        var _providerValue = _provider.GetValue(_objectQueryValue);
        var _provider_context = Get_Field(_providerValue, "_context", false);

        var context = Get_Property(_objectQueryValue, "Context", false);

        _provider_context.SetValue(_providerValue, _ObjectContextValue);

        var _query = Get_Property(_objectQueryValue, "QueryState", false);
        var _queryValue = _query.GetValue(_objectQueryValue);
        var _query_context = Get_Field(_queryValue, "_context", true);

        //context.SetValue(_objectQueryValue, _ObjectContextValue);

        _query_context.SetValue(_queryValue, _ObjectContextValue);

        var expersionProperty = Get_Property(value, "Expression", false);
        var expersion = (System.Linq.Expressions.MethodCallExpression)Get_PropertyValue(value, "Expression", false);
        var result = System.Linq.Expressions.Expression.Lambda(expersion).Compile();
        var target = (System.Runtime.CompilerServices.Closure)Get_PropertyValue(result, "Target", false);
        var exProvider = Get_FieldValue(target.Constants[0], "_provider", true);
        var exProviderField = Get_Field(exProvider, "_context", false);

        exProviderField.SetValue(exProvider, _ObjectContextValue);

        var ex_queryProvider = Get_PropertyValue(target.Constants[0], "QueryState", true);
        var ex_queryProviderField = Get_Field(ex_queryProvider, "_context", true);
        //System.Linq.Expressions.Expression.Call()
        ex_queryProviderField.SetValue(ex_queryProvider, _ObjectContextValue);

        var ObjectQuery = Get_PropertyValue(value, "ObjectQuery", false);
        var QueryState = Get_PropertyValue(ObjectQuery, "QueryState", false);
        var _expression = Get_Field(QueryState, "_expression", false);
        var a = expersion.Arguments.ToArray();
        List<System.Linq.Expressions.ConstantExpression> items = new List<System.Linq.Expressions.ConstantExpression>();
        foreach (var item in ((System.Runtime.CompilerServices.Closure)result.Target).Constants)
        {
            items.Add(System.Linq.Expressions.Expression.Constant(item));
        }
        System.Linq.Expressions.MethodCallExpression methodCall =
            System.Linq.Expressions.Expression.Call(expersion.Method, items);

        //var exV=  System.Linq.Expressions.Expression.Lambda(methodCall);
        _expression.SetValue(QueryState, methodCall);
    }
} 
```

用法：

```
 IQueryable<DataBase.Models.UserInfo> query = null;
                    using (var context = new HealthFamilyContext(false))
                    {
                        query = from p in context.UserInfoes where p.Id == 1 select p;
                    }

                    using (var context = new HealthFamilyContext(false))
                    {
                        QueryHelper.SetInternalContextOfQuery(query, context);

                        var data = query.ToList();
                    } 
```

# java - Java - 位集替换

> ID：11314610
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:49:11.747
> 
> 标签：java

在我的代码中，我试图获取哈希图中是否存在数字。我的代码如下：

```
BitSet arp = new BitSet();

for i = 0 to 10 million

HashMap.get (i)

if number exist
arp.set(i , true)

else
arp.set(i , false) 
```

之后从 bitset 我得到我是否存在数字。但是，我发现这个 bitset 操作很慢（`string = string + 0/1`也尝试过，更慢）。任何人都可以帮助我如何用更快的操作替换此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:52:43.740

你的代码真的很难读清楚，但我怀疑你只是想在`BitSet`你的`HashMap`?

在这种情况下，您的代码应该或多或少

```
BitSet bits = new BitSet(10000000);
for (Integer k : map.keySet()) {
  bits.set(k);
} 
```

即使这不是您的意思，但一般来说，`BitSet`它的速度很快；我怀疑这是你的代码的*其余部分很慢。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:59:49.857

如果您提供了实际的相关代码，我们可能一开始就发现了一些性能错误。但是假设您的代码没问题并且您*分析了您的应用程序*以确保`BitSet`操作实际上很慢：

如果你有足够的可用内存空间，你总是可以选择 a`boolean[]`而不是 a `BitSet`。

`BitSet`内部用于`long[]`存储单独的位，因此在内存方面非常好，但有时可能有点太慢。

# java - Eclipse - 生成 JavaDoc - NullPointerException

> ID：11314612
> 
> 赞同：4
> 
> 时间：2012-07-03T15:49:18.640
> 
> 标签：java, eclipse, nullpointerexception, javadoc

我已经为我工作了大约一个月的 Android 项目生成了 JavaDocs。我刚试过，我得到以下输出（没有输出到我的输出目录）：

```
Building tree for all the packages and classes...
java.lang.NullPointerException
    at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:83)
    at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:44)
    at com.sun.tools.javadoc.ClassDocImpl.superclassType(ClassDocImpl.java:496)
    at com.sun.tools.doclets.internal.toolkit.util.Util.getAllInterfaces(Util.java:447)
    at com.sun.tools.doclets.internal.toolkit.util.Util.getAllInterfaces(Util.java:485)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.processType(ClassTree.java:184)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.buildTree(ClassTree.java:136)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.<init>(ClassTree.java:91)
    at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:123)
    at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:83)
    at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:63)
    at com.sun.tools.doclets.standard.Standard.start(Standard.java:39)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:280)
    at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:160)
    at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:397)
    at com.sun.tools.javadoc.Start.begin(Start.java:167)
    at com.sun.tools.javadoc.Main.execute(Main.java:59)
    at com.sun.tools.javadoc.Main.main(Main.java:49)
2016 warnings 
```

我正在项目级别（Android）构建文档，其中包括 ActionBarSherlock 和 Facebook 的 Android 项目。不管我是否包含它们，文档仍然失败。

我正在尝试在 Eclipse Java EE IDE for Web Developers、Indigo、Build 20120216-1857 中运行它

JavaDoc 命令是：

```
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/bin/javadoc 
```

稍微玩一下配置，我收到以下错误：

`full/path/BaseModelListAdapter.java:147: error: unmappable character for encoding ASCII * @param parent?`

该行是：

`* @param parentß`

删除该行会删除其中一个错误，但我仍然会遇到一些奇怪的错误，例如无法找到基本的 Android 软件包：

`/full/path/CompositeCategoryAdapter.java:7: error: package android.view does not exist import android.view.View; ^`

和符号错误：

```
BaseModelListAdapter.java:420: error: cannot find symbol
public static BaseModelItemRowViewHolder createInstance( View v )
                                                         ^
symbol:   class View
location: class BaseModelItemRowViewHolder 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:08:56.927

您可能需要运行：

```
javadoc -encoding utf-8 
```

或者，您可以只使用 Unicode 转义符（例如`\u0000`）而不是直接包含 Unicode 字符。

可能相关的问题：[javadoc 和注释中的 Unicode？](https://stackoverflow.com/questions/10363188/unicode-in-javadoc-and-comments)

# sql - SQL Case 语句摆脱空值

> ID：11314613
> 
> 赞同：0
> 
> 时间：2012-07-03T15:49:18.280
> 
> 标签：sql, database, tsql

我有两个由 ID 绑定的表的数据。问题是我不想选择列名，而是选择里面的实际数据。所以我决定使用 SELECT CASE 语句，但它会生成一个包含许多空值的表。我将如何选择不为空的数据？

```
column value   column name
200              car
300              boat 
```

SQL查询：

```
SELECT 
CASE WHEN  b.name = 'car' THEN a.value END as 'car',
CASE WHEN  b.boat= 'car' THEN a.value END as 'boat' 
WHERE a.id = b.id 
```

输出是

```
CAR  BOAT
200  NULL
NULL 300 
```

我如何只选择无空值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:52:48.813

`GROUP BY`对于`MAX`其他列：

```
SELECT a.id,
       MAX(CASE WHEN  b.name = 'car' THEN a.value END) as 'car',
       MAX(CASE WHEN  b.boat= 'car' THEN a.value END) as 'boat' 
WHERE a.id = b.id   
GROUP BY a.id 
```

# c# - NUnit - 无法在程序集中找到测试

> ID：11314614
> 
> 赞同：1
> 
> 时间：2012-07-03T15:49:18.357
> 
> 标签：c#, nunit

我在 Visual Studio 2010 中的类库中添加了一个测试。但是，当我尝试在 NUnit 中加载程序集时，出现以下错误：

测试加载失败！

System.ApplicationException：无法在程序集中找到测试。

有什么问题？测试有以下简单代码：

```
using NUnit.Framework;

namespace Web.Tests
{
    [TestFixture]
    public class Test
    {
        [Test]
        public void ShouldLoadController()
        {
            Assert.AreEqual(1,1);
            Assert.IsTrue(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:26:41.913

答案似乎是注释掉 Nunit 配置文件中对 2.0 的引用：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <!-- Comment out the next line to force use of .NET 4.0 -->
    <!--<supportedRuntime version="v2.0.50727" />-->
    <supportedRuntime version="v4.0.30319" />
  </startup>
</configuration> 
```

我不确定为什么这是必要的，因为它似乎应该能够选择正确的运行时间。

# objective-c - 用facebook登录，然后注册一个用户名

> ID：11314615
> 
> 赞同：1
> 
> 时间：2012-07-03T15:49:19.390
> 
> 标签：objective-c, ios, xcode, facebook, login

我很困惑尝试在我的 iOS 应用程序中使用 facebook 创建登录名，然后会要求用户创建用户名和密码以完成他的第一次登录。

我已成功集成 facebook 登录，但在 facebook 登录后，我希望我的用户使用自己的用户名和密码注册为用户，他们应该在从应用程序注销后使用这些用户名和密码。

一个很好的例子是 Instagram，用户可以使用 facebook 登录，然后创建自己的用户名和密码。他们的用户名应该是他们的用户 ID。

有没有人可以帮助我提供代码？

我将衷心感谢您的帮助！:)

# ruby - 使用 ruby mechanize gem 时出现 SSL Reuse 错误

> ID：11314616
> 
> 赞同：0
> 
> 时间：2012-07-03T15:49:24.297
> 
> 标签：ruby, nokogiri, mechanize

在出现以下错误之前，我的 mechanize 脚本运行了大约 3 个小时：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent- 
2.7/lib/net/http/persistent/ssl_reuse.rb:29:in `initialize': 
A connection attempt failed because the connected party did not properly 
respond after a period of time, or established connection failed because
connected host has failed to respond. - connect(2) (Errno::ETIMEDOUT) 
```

我假设这是因为它已经运行了 2-3 个小时，但想知道是否有人对这个错误有任何特别的见解

这是我的脚本

```
require 'rubygems'
require 'mechanize'

def next_button(web_page)
  web_page.page.search('.next a').each do |next_button|
    web_page.click(next_button)
    web_page.page.search('.listing_content').each |info|
      get_info(info)
    end
  next_button(web_page)
  end
end

def get_info(info)
  infos = info.at_css('.url').text.strip
  address = info.css('.street-address').text.strip
  city = info.css('.locality').text.strip
  state = info.css('.region').text.strip 
  zip = info.css('.postal-code').text.strip
end

web_page = Mechanize.new                     
web_page.user_agent_alias = "Linux Firefox"
web_page.get(HOME_URL)

web_page.page.search('.page-navigation a').each do |pagination_link|
 web_page.page.search('.categories-list a').each do |link|  

    web_page.click(link)
    web_page.page.search('.listing_content').each do |info|  

      get_info(info)
    end
    next_button(web_page, worksheet)
  end

  web_page.click(pagination_link)
end 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:59:37.510

在我看来，持久连接带来的麻烦多于其价值。当这种情况发生在我身上时，我会检查以确保我拥有最新版本的 mechanize，如果仍然发生，我会退回到不使用持久连接的 mechanize 1.0.0。

# cakephp - Cakephp isPut() 保存逻辑

> ID：11314619
> 
> 赞同：0
> 
> 时间：2012-07-03T15:49:39.110
> 
> 标签：cakephp, cakephp-1.3

帮我修复 isPut 或 isPost 以保存逻辑，在下面的代码中，我可以查看 from 中的数据，但是当我尝试保存它时它不起作用，我尝试过 ispost 和 isput 逻辑都不起作用。我认为问题在于控制器部分没有视图这里是我的表单视图，

```
<?php 

    echo $this->Form->create('Role',array('url'=>array('controller'=>'Organisations','action' => 'edit_profile'),'id' => 'role'));
    echo $this->Form->input('RoleLanguage.rolename',array('label'=>'Profile Name:','id'=>'rolename'));

    $options = array('A' => 'Approve', 'P' => 'Pending', 'D' => 'Delete');
    echo $this->Form->input('Role.status', array(
    'options'=>$options,
    'empty' => false,
    'label'=>'Status',
     'style'=>'width:100px',

    'id'=>'status'
    ));
    $id= array('value' => $id);
    //print_r($id);die();
    echo $this->Form->hidden('rle_id', $id);
    echo "<br>";
    $options = array('R' => 'Role', 'P' => 'Position', 'T' => 'Team','C'=>'Core Strategic Profile');

     echo $this->Form->input('Role.type', array(
    'options'=>$options,
    'empty' => false,
    'label'=>'Type of Job Profile:',
     'style'=>'width:100px',

    'id'=>'type'
    ));
      echo "<br>";
      echo $this->Form->input('RoleLanguage.external_document_URL',array('label'=>'External Document URL:','id'=>'external_document_URL','type'=>'text'));
      echo "<br>";
      echo $this->Form->input('RoleLanguage.description', array('style'=>'width:420px','rows' => '5', 'cols' => '5','label'=>'Description','id'=>'description'));

    ?> 
```

这是控制器逻辑

```
function edit_profile($id=NULL)
{
     $this->layout='Ajax'; 

         //print_r($id);die();
         $this->set('id',$id); 
                $this->Role->recursive = 0;     
                $this->Role->id = $id;
                $language = $this->getLanguage('content');
                $this->Role->unBindModel(array("hasMany" => array('RoleLanguage')));
                $this->Role->bindModel(array("hasOne" => array('RoleLanguage'=> array('foreignKey' => 'rle_id', 'className' => 'RoleLanguage', 'type' => 'INNER', 'conditions' => array('RoleLanguage.language' => $language)))));

                $this->data = $this->Role->read();

                //print_r($this->data);die();

     if ($this->RequestHandler->isPut())
            {
            $this->data=array(null);
            $this->autoRender = false;
            $acc_id = $this->activeUser['User']['acc_id'];

            $this->data['Role']['acc_id'] = $acc_id;

            unset($this->Role->RoleLanguage->validate['rle_id']);
             print_r($this->data);die();
            $this->Role->saveAll($this->data);
            }
} 
```

我正在另一个视图中序列化数据，我从中调用 qbove 视图代码

```
$.ajax({
                                                    type: 'Put',
                                                    url: $('#role').attr('action'),
                                                    data: $('#role').serialize() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:42:56.607

可能是数据未通过调用 saveAll 时发生的模型验证测试。您是否尝试打印 $this->Role->invalidFields() 以查看是否有任何内容？

# ruby - 如何在 Ruby 中将一个块传递给另一个块？

> ID：11314622
> 
> 赞同：8
> 
> 时间：2012-07-03T15:49:55.700
> 
> 标签：ruby, block

假设我有以下过程：

```
a = Proc.new do
    puts "start"
    yield
    puts "end"
end 
```

还假设我传递`a`给另一个方法，该方法随后`instance_eval`使用该块调用另一个类，我现在如何将一个块传递到该方法的末尾，该方法在`a`.

例如：

```
def do_something(a,&b)
    AnotherClass.instance_eval(&a) # how can I pass b to a here?
end

a = Proc.new do
    puts "start"
    yield
    puts "end"
end

do_something(a) do
    puts "this block is b!"
end 
```

输出当然应该是：

```
start
this block is b!
end 
```

如何将辅助块传递给`instance_eval`?

我需要这样的东西作为我正在研究的 Ruby 模板系统的基础。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:06:03.753

您不能在`a`. 相反，您必须传递一个`Proc`对象。这将是新代码：

```
def do_something(a,&b)
    AnotherClass.instance_exec(b, &a)
end

a = Proc.new do |b|
    puts "start"
    b.call
    puts "end"
end

do_something(a) do
    puts "this block is b!"
end 
```

`yield`仅适用于方法。在这个新代码中，我使用`instance_exec`了（Ruby 1.9 中的新代码），它允许您将参数传递给块。因此，我们可以将 Proc 对象`b`作为参数传递给`a`，它可以使用`Proc#call()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:25:11.847

```
a=Proc.new 做 |b|
    放“开始”
    b.调用
    把“结束”
结尾
def do_something(a,&b)
  AnotherClass.instance_eval { a.call(b) }
结尾

```

# dojo - Dojo EnhancedGrid 和程序化选择

> ID：11314627
> 
> 赞同：1
> 
> 时间：2012-07-03T15:50:05.283
> 
> 标签：dojo, dojox.grid

这是我的问题：在我的应用程序中，我有一个 Dojo EnhancedGrid，由 ItemFileReadStore 支持。页面流程如下所示：

1.  用户从选择列表中选择一个值。
2.  列表中的项目发布在服务器上，然后使用来自服务器的数据更新网格（不要问为什么，这就是它应该工作的方式）
3.  新项目在网格中突出显示。

现在，前两个步骤就像一个魅力；然而，第三步让我有些头疼。数据成功 POST 到服务器后（通过 dojo.xhrPost() ），以下代码运行：

```
myGrid.store.close();
myGrid._refresh();
myGrid.store.fetch({
    onComplete : function(items) {
        for ( var i = 0; i < items.length; i++) {
             if (items[i].documentType[0].id == documentTypeId) {                                               
                 var newItemIndex = myGrid.getItemIndex(items[i]);
                 exportMappingGrid.selection.deselectAll();
                 exportMappingGrid.selection.addToSelection(newItemIndex);
             }
     }
      }
     }); 
```

现在，网格的选择已更新（即选择对象的 selectedIndex > 0），但视觉上没有响应，除非我将鼠标悬停在“选定”行上。如果我删除 .deselectAll() 行（我怀疑它是罪魁祸首），那么有时我会一次选择两个项目，尽管 grid *selectionMode*属性设置为*single*。

对这个有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:06:05.670

你需要使用 setSelected()，像这样

```
exportMappingGrid.selection.setSelected(newItemIndex, true); 
```

第二个参数为true选择行，false取消选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T19:04:27.017

这对我有用：

```
grid.selection.clear();
grid.selection.addToSelection(newItemIndex);
grid.selection.getFirstSelected(); 
```

乔恩

# maven - Maven 发布插件在发布标签下添加主干文件夹以进行发布：准备目标

> ID：11314632
> 
> 赞同：3
> 
> 时间：2012-07-03T15:50:15.723
> 
> 标签：maven, pom.xml, maven-release-plugin

我的单片机连接信息：

```
<scm>
    <connection>scm:svn:https://repo/project/trunk</connection>
    <developerConnection>scm:svn:https://repo/project/trunk</developerConnection>
</scm> 
```

我的发布插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <tag>RC</tag>
        <autoVersionSubmodules>true</autoVersionSubmodules>
    </configuration>
</plugin> 
```

现在，当我运行时，它不会`mvn release:prepare`在下提交我的标记发布。如何阻止它添加到下？`tags/RC``tags/RC/trunk``trunk``RC`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T19:30:25.247

Brian，您可能是 Maven 不完整`release:rollback`功能的受害者。请参阅我[在 StackOverflow 上](https://stackoverflow.com/questions/16464598/maven-release-prepare-perform-after-rollback-incorrectly-succeeds-with-wrong-co)的问题及其答案。如果你的标签已经存在，Subversion（不是 Maven）会认为你想在现有标签*内复制主干。*删除标签，它会工作 - 一次。再试一次，你会得到`RC/trunk`。再试一次，你会从 Subversion 得到一个错误。

解决方案是`svn delete`在您尝试复制到标签之前先处理标签 - 我们在 Maven 期间`release:perform`通过将几个插件绑定到`deploy`阶段成功地做到了这一点。

基本上：

*   让我们`release:prepare`做它的事情，创建一个具有唯一名称的标签。
*   绑定`org.codehaus.mojo:exec-maven-plugin:exec`到`deploy`阶段以使其在`release:perform`. 将其配置为调用`svn delete <path to RC tag>`.
*   绑定`maven-scm-plugin:branch`到`deploy`以使用 Maven 的 SCM 插件创建新标签。

这对我们有用，它还有一个额外的好处，就是它也为我们提供了独特的标签以供参考。最坏的情况，您可以忽略这些标签。

# python - 翻阅教科书，我在编写自己的 excersie 时似乎对返回函数有困难

> ID：11314633
> 
> 赞同：0
> 
> 时间：2012-07-03T15:50:17.957
> 
> 标签：python, python-2.7, return

```
year = raw_input("What year were you born?: ")

def age_calc(f):
    print "To calculate your age, I will subtract the current year from your birthyear!"
    return 2011 - "%d" % (f)

age = age_calc(year)

print age 
```

这是我写的代码练习，这是我无法解决的错误......

```
File "agecalc.py", line 7, in <module>
  age = age_calc(year)
File "agecalc.py", line 5, in age_calc
  return 2011 - "%d" % (f)
TypeError: int argument required 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:53:00.903

问题是您在计算中混淆了字符串和数字。在原始代码中

```
return 2011 - "%d" % (f)
         ^      ^
         |      |
     integer   string 
```

从整数中减去一个字符串 - 这会导致错误消息：`TypeError: int argument required`

这是一个改进的版本：

```
def age_calc(yr):
    print "To calculate your age, I will subtract the current year from your birthyear!"
    return 2011 - yr

year = int(raw_input("What year were you born?: ")) # convert string to int
age = age_calc(year)

print age 
```

请注意，我将用户输入从字符串转换为`int`提示输入的位置，然后使用数字而不是字符串和数字进行所有计算。

在原始代码中，您传递一个字符串`age_calc()`，然后使用它从数字 2011 中减去。现在您发送一个整数，`age_calc()`从另一个整数（2011）中减去一个整数没有问题。

我还为您的函数参数使用了一个更具描述性的标识符，`yr`而不是`f`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:52:56.310

`%d`想`f`成为一个整数，而在你的情况下它是一个字符串。

```
`return 2011 - "%d" % (f)` 
```

同样在`2011 - "%d" % (f)`你试图从一个数字中减去一个字符串，这也是错误的。

**您的代码的工作版本：**

```
year = int(raw_input("What year were you born?: ")) #convert to int using int()

def age_calc(f):
    print "To calculate your age, I will subtract the current year from your birthyear!"
    return 2011 - f # or return "{0}".format(2011-f)  if you want to return a string 

age = age_calc(year)

print age 
```

# ruby-on-rails - Rails 路由没有路由匹配 {:action=>"revert", :controller=>"the_name"

> ID：11314640
> 
> 赞同：0
> 
> 时间：2012-07-03T15:50:51.910
> 
> 标签：ruby-on-rails, routes

我已经搜索并尝试了很多不同的东西。没有一个工作。我的路线中缺少什么导致此错误？

```
resources :the_name do
  member do
    get 'revert'
  end
end 
```

在我的控制器中

```
def revert
  ...
end 
```

我的观点在召唤

```
revert_the_name_path(@some_var) 
```

@some_var 只是模型的一个实例。即：@some_var = SomeModelName.new

我试过了

```
resources :the_name do
  collection do
    get 'revert'
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:58:57.383

如果您的实例是新记录（例如 SomeModelName.new ），这将不起作用

您需要 id 来生成成员路径。确保 @some_var.id 不为零。

# delphi - 方法指针和正则过程不兼容

> ID：11314641
> 
> 赞同：16
> 
> 时间：2012-07-03T15:50:54.617
> 
> 标签：delphi, pointers, methods, delphi-2010

我有一个应用程序，它有多种形式。所有这些表单都有一个 PopupMenu。我以编程方式构建菜单项，所有这些都在一个共同的根菜单项下。我希望所有菜单项都调用相同的过程，并且菜单项本身基本上是作为一个参数......

当我只有一个表单执行此功能时，我就可以进行此工作。我现在有多种表格需要这样做。我正在将所有代码移动到一个公共单元。

```
Example.
Form A has PopupMenu 1\.  When clicked, call code in Unit CommonUnit.
Form B has PopupMenu 2\.  When clicked, call code in unit CommonUnit. 
```

当我需要从每个窗体调用弹出窗口时，我调用我的顶级过程（在 CommonUnit 单元中），将每个窗体的顶级菜单项的名称传递给公共单元中的顶级过程。

我正在使用代码向我的 PopupMenu 添加项目。

```
M1 := TMenuItem.Create(TopMenuItem);
M1.Caption := FieldByName('NAME').AsString;
M1.Tag := FieldByName('ID').AsInteger;
M1.OnClick := BrowseCategories1Click;
TopMenuItem.Add(M1); 
```

我在编译时收到一条错误消息。具体来说， OnClick 行正在抱怨

不兼容的类型：“方法指针和常规过程”。

我已经定义了 BrowseCategories1Click，就像我之前在单个表单上执行此操作时一样。唯一的区别是它现在是在一个通用单元中定义的，而不是作为表单的一部分。

它被定义为

```
procedure BrowseCategories1Click(Sender: TObject);
begin
//
end; 
```

解决这个问题的最简单方法是什么？

谢谢 GS

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-03T19:21:59.050

一点背景...

Delphi 有 3 种程序类型：

*   *像这样声明的独立*或单元范围的函数/过程指针：

    `var Func: function(arg1:string):string;`
    `var Proc: procedure(arg1:string);`

*   *方法*指针声明如下：

    `var Func: function(arg1:string):string of object;`
    `var Proc: procedure(arg1:string) of object;`

*   而且，自 Delphi 2009 以来，*匿名*（见下文）函数/方法指针声明如下：

    `var Func: reference to function(arg1:string):string;`
    `var Proc: reference to procedure(arg1:string);`

*独立*指针和*方法*指针不可互换。原因是`Self`方法中可访问的隐式参数。Delphi 的事件模型依赖于*方法*指针，这就是为什么不能将*独立*函数分配给对象的事件属性的原因。

所以你的事件处理程序必须被定义为*一些*类定义的一部分，*任何*类定义来安抚编译器。

正如 TOndrej 建议的那样，您可以绕过编译器，但如果这些事件处理程序在同一个单元中，那么它们应该已经相关，所以您不妨继续将它们包装到一个类中。

我还没有看到的另一个建议是回溯一点。让每个表单实现自己的事件处理程序，但让该处理程序将责任委托给在新单元中声明的函数。

```
TForm1.BrowseCategoriesClick(Sender:TObject)
begin
  BrowseCategories;
end;

TForm2.BrowseCategoriesClick(Sender:TObject)
begin
  BrowseCategories;
end; 
```

* * *

```
unit CommonUnit

interface
procedure BrowseCategories;
begin
//
end; 
```

这样做的另一个好处是将对用户操作的响应与触发该操作的控件分开。您可以轻松地将工具栏按钮和弹出菜单项的事件处理程序委托给相同的功能。

您选择哪个方向最终取决于您，但我提醒您关注哪个选项将使将来的可维护性更容易，而不是当前最方便的选项。

**匿名方法**

匿名方法是完全不同的野兽。匿名方法指针可以指向*独立*函数、*方法*或内联声明的未命名函数。最后一种函数类型是他们从中获得*匿名*名称的地方。匿名函数/方法具有捕获在其范围之外声明的变量的独特能力

```
function DoFunc(Func:TFunc<string>):string
begin
  Result := Func('Foo');
end;

// elsewhere
procedure CallDoFunc;
var
  MyString: string;
begin
  MyString := 'Bar';
  DoFunc(function(Arg1:string):string
         begin
           Result := Arg1 + MyString;
         end);
end; 
```

这使它们成为最灵活的过程指针类型，但它们也可能具有更多开销。变量捕获和内联声明一样消耗额外的资源。编译器使用隐藏的引用计数接口进行内联声明，这增加了一些小开销。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-03T16:13:05.600

您可以将您的过程包装到一个类中。此类在单独的单元中可能如下所示：

```
unit CommonUnit;

interface

uses
  Dialogs;

type
  TMenuActions = class
  public
    class procedure BrowseCategoriesClick(Sender: TObject);
  end;

implementation

{ TMenuActions }

class procedure TMenuActions.BrowseCategoriesClick(Sender: TObject);
begin
  ShowMessage('BrowseCategoriesClick');
end;

end. 
```

并将操作分配给不同单元中的菜单项就足够了：

```
uses
  CommonUnit;

procedure TForm1.FormCreate(Sender: TObject);
begin
  PopupMenuItem1.OnClick := TMenuActions.BrowseCategoriesClick;
end; 
```

***更新：***

根据 David 的建议更新为使用类过程（而不是对象方法）。对于那些想要使用对象方法需要对象实例的人，请关注[`this version`](https://stackoverflow.com/revisions/11315011/1)帖子。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-03T16:11:01.583

这是“程序”和“对象程序”之间的区别

被`OnClick`定义为`TNotifyEvent`：

> `type TNotifyEvent = procedure(Sender: TObject) of object;`

您不能将过程分配给 ，`OnClick`因为它是错误的类型。它需要是一个对象的过程。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-03T16:13:10.577

您可以选择以下之一：

1.  从共同的祖先派生您的表单并在其中声明方法，以便后代可以使用
2.  使用所有表单共享的类（例如数据模块）的全局实例
3.  使用过程作为伪方法，如下所示：

* * *

```
procedure MyClick(Self, Sender: TObject);
begin
  //...
end;

var
  M: TMethod;
begin
  M.Data := nil;
  M.Code := @MyClick;
  MyMenuItem.OnClick := TNotifyEvent(M);
end; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-03T16:09:52.663

一种解决方案是将 OnClick 方法放入 TDatamodule 中。

# php - 使用 PHP 替代标准 MySQL

> ID：11314643
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:08.203
> 
> 标签：php, mysql, pdo, mysqli, mariadb

是的，我是另一个人来回答这个烦人的问题……但到目前为止我还不相信，所以就这样吧！

我正在研究一个严重依赖 MySQL 和 PHP 的项目，它使用与 php/mysql/setup 一起打包的标准 mysql 函数，因此没有“额外酷的东西”。

我应该将引擎更改为像 MariaDB 或类似的替代品，还是只使用 mysqli？或者像 PDO 之类的东西？

当涉及到整体性能和可用性时，任何替代方案以及最终“更好”的东西都是很好的了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:56:27.210

PDO，因为它不仅支持 MySQL。而 MySQLI 显然只支持 MySQL。如果您使用 PDO，您将更容易从 MySQL 过渡到例如 PostgreSQL。

[PDO 的一个很好的参考](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:00:52.720

If you want to rewrite the entire database logic I recommend you to give a try to [Doctrine2 ORM](http://www.doctrine-project.org/projects/orm.html). It is really powerful and handle a lot of DBM (through PDO or custom connectors in order to support MongoDB in example).

If you don't, PDO might be your best option.

# java - 简单 jar 文件上的 NoClassDefFoundError

> ID：11314645
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:17.863
> 
> 标签：java, jar, export, noclassdeffounderror

```
public class RunScript {
    public static void main(String[] args) {
        System.out.println("Hello World");
    }
} 
```

我创建了一个 Java 项目和一个名为 com.klong 的包

在包里面，我有一个 .java 文件，里面有上面的代码。我将它导出到一个可运行的 jar 文件中。然后我尝试使用以下命令在命令行中运行 jar：java test.jar

当我尝试这样做时，我收到以下错误

```
C:\Users\IBM_ADMIN\Tracing stuff>java test.jar
Exception in thread "main" java.lang.NoClassDefFoundError: test.jar
Caused by: java.lang.ClassNotFoundException: test.jar
    at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:653)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:619)
Could not find the main class: test.jar.  Program will exit. 
```

我已经修改了导出到普通的 jar 文件等。我已经查看了有关此错误的其他问题。我试过使用诸如 set classpath=BLEH 之类的命令

这个项目非常简单，希望你能帮助我找出这个讨厌的错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:53:28.267

您需要运行`java -jar test.jar`，您当前正在做的是要求`java`查找名称为 test.jar 的已编译类。

# iphone - 如何在 ipad 应用程序的核心图中定义 x 和 y 轴的末端

> ID：11314646
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:19.480
> 
> 标签：iphone, ipad, graph, core-plot

我正在为 iPad 应用程序绘制图表，我能够完美地绘制图表，但我无法弄清楚如何在任一轴上的最大值和最小值之后结束 y 或 x 轴。现在，我只能使用轴标签（删除、隐藏、更改值），但直线仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:33:17.557

我假设您没有数据经过您不想让轴停止的地方。因此，最简单的方法是减小 CPTGraphHostingView 的大小，以便您的图表位于边缘，或者为图表设置填充值：

```
CGFloat BoundsPadding = 10.0;
graph.paddingLeft = boundsPadding;
graph.paddingRight = boundsPadding;
graph.paddingTop = boundsPadding;
graph.paddingBottom = boundsPadding; 
```

或在您的 plotAreaFrame 上设置填充：

```
graph.plotAreaFrame.paddingLeft = 10; 
```

# sftp - sshpass 抛出错误“无法获得伪终端：成功”

> ID：11314647
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:21.450
> 
> 标签：sftp, pty, pts

我正在尝试运行 sshpass 工具来自动执行 sftp 操作。

在另一台服务器上，该命令有效，但在该服务器上它只返回一行错误消息。

这是我正在使用的命令：

```
sshpass -p Password sftp Uname@Host 
```

我得到了错误：

```
Failed to get a pseudo terminal: Success 
```

我已经用许多不同的主机和 root 用户尝试过它，我可以毫无问题地 sftp，所以我很确定它是 sshpass 或伪终端问题。

我对伪终端知之甚少，似乎找不到任何有关错误的信息。文件夹 /dev/pts 为空， cat /proc/sys/kernel/pty/nr 为 0，我认为这意味着没有任何运行。从 ptya0 到 ptyzf 共有 256 个 pty** 项目，这让我相信我可能已经达到了伪终端数量的限制。我认为我的最大终端数（通过查看 cat /proc/sys/kernel/pty/max）是 4096。

有没有其他人遇到过这个错误或知道可能出了什么问题？它是一个生产服务器，所以我不能让它停机。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:32:38.843

弄清楚了。对于遇到类似错误的任何人，pts 目录由于某种原因被卸载。执行以下操作可以解决问题：

```
rm -rf /dev/ptmx
mknod /dev/ptmx c 5 2
chmod 666 /dev/ptmx 
umount /dev/pts
rm -rf /dev/pts
mkdir /dev/pts
vim /etc/fstab
    (added: none  /dev/pts  devpts  defaults 0 0)
mount /dev/pts 
```

# bazaar - 如何撤消 bzr 添加

> ID：11314648
> 
> 赞同：6
> 
> 时间：2012-07-03T15:51:21.807
> 
> 标签：bazaar

有时我输入`bzr add`并没有注意到我不在分支的根目录中，而是在一个被忽略的子文件夹中。然后，这会将所有文件添加到该文件夹​​中 - 通常它是一个包含大量文件的构建文件夹。因此问题是：如何撤消`bzr add`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T13:03:59.187

有不需要 xargs 的内置方式：`bzr remove --new --keep`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:51:23.117

这个答案是无耻地从[这里](https://answers.launchpad.net/bzr/+question/132154)偷来的，以使其更容易获得（对我来说也是如此）。

这将撤消错误的`bzr add`：

`bzr added -0 | xargs -0 bzr rm --keep`

# jquery - 根据 jqueryMobile 中的 URL 变量加载 PAGE

> ID：11314652
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:24.630
> 
> 标签：jquery, jquery-mobile

我有一个页面**gameList.html**，它在列表视图中列出了所有游戏。列表项有一个指向页面**gameDetails.html**的链接，我将一个URL变量gametype传递**给**页面。页面**gameDetails.html**有三个具有简单、高级和中等 ID 的页面。我尝试根据 URL 变量的值加载适当的页面。我该如何实现？

```
<li><a href="../WebApp/gameDetails.html?gametype=Simple" data-ajax="false">
<li><a href="../WebApp/gameDetails.html?gametype=Advanced" data-ajax="false">
<li><a href="../WebApp/gameDetails.html?gametype=Medium" data-ajax="false"> 
```

这就是我在正文中的**gameDetails.html中得到的**

```
<div id="pageSimple" data-role="page"> 

  <div data-role="header">
     <h1>Simple/h1>
  </div>

  <div data-role="content">            

  </div>        

  <div data-role="footer> 
  </div> 

</div>

<div id="pageAdvanced" data-role="page"> 

  <div data-role="header">
     <h1>Advanced/h1>
  </div>

  <div data-role="content">            

  </div>        

  <div data-role="footer> 
  </div> 

</div>

<div id="pageMedium" data-role="page"> 

  <div data-role="header">
     <h1>Medium/h1>
  </div>

  <div data-role="content">            

  </div>        

  <div data-role="footer> 
  </div> 

</div> 
```

我已经开始工作了。但我现在面临另一个问题。正在加载正确的页面，但是当我在高级和中页面上点击后退按钮时，它会将我带到简单页面。是否可以采取我回到**gameList.html**吗？

我在**gameDetails.html中写的js**

//NM.Utils.getUrlVars()是我用来获取URL变量值的

```
$(function(){   
$.mobile.changePage("#page"+NM.Utils.getUrlVars()["gametype"], {transition:'pop'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:09:33.430

您不需要任何 JavaScript 来完成此操作，您只需要添加[`rel="external"`](http://jquerymobile.com/demos/1.1.0/docs/pages/page-links.html)到您的链接。

例如

```
<li><a href="../WebApp/gameDetails.html?gametype=Simple" rel="external"> 
```

# asp.net - 在 IE6 中打开网页会触发 OnClick 事件

> ID：11314656
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:45.337
> 
> 标签：asp.net, events

我编写了一个网页，提供了可以查看的报告的下拉列表。小提琴在这里：http: [//jsfiddle.net/ZrdUY/1/](http://jsfiddle.net/ZrdUY/1/)。小提琴中的图像正是您在 Firefox (13.0.1) 中打开页面时看到的图像，但是当在 IE6 中打开页面时，似乎通过下拉列表中的可见选择触发了“查看报告”事件因此立即呈现该报告。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:41:27.230

奇怪的。问题就这样消失了。

# perl - 在 Perl 数组中移动值

> ID：11314657
> 
> 赞同：0
> 
> 时间：2012-07-03T15:51:47.720
> 
> 标签：perl

我很难以一致的格式放置数组列。我有以下输出：

```
Mon,Jun,25,14:39:29,2012,971,29,0,25,0,0,0,4,Mon,Jun,25,14:39:29,2012,25,mod_was_ap22_http.c
    Mon,Jun,25,14:40:29,2012,972,28,0,25,0,0,0,3,Mon,Jun,25,14:40:29,2012,3,mod_sm22.cpp,22,mod_was_ap22_http.c
    Mon,Jun,25,14:41:29,2012,973,27,0,24,0,0,0,3,Mon,Jun,25,14:41:29,2012,24,mod_was_ap22_http.c
    Mon,Jun,25,14:42:29,2012,974,26,0,20,0,0,0,6,Mon,Jun,25,14:42:29,2012,1,mod_sm22.cpp,19,mod_was_ap22_http.c
    Mon,Jun,25,14:43:29,2012,971,29,0,26,0,0,0,3,Mon,Jun,25,14:43:29,2012,2,mod_sm22.cpp,24,mod_was_ap22_http.c
    Mon,Jun,25,14:44:30,2012,957,43,0,41,0,0,0,2,Mon,Jun,25,14:44:30,2012,1,mod_sm22.cpp,40,mod_was_ap22_http.c
    Mon,Jun,25,14:45:30,2012,963,37,0,35,0,0,0,2,Mon,Jun,25,14:45:30,2012,2,mod_sm22.cpp,32,mod_was_ap22_http.c
    Mon,Jun,25,14:46:30,2012,972,28,0,24,1,1,0,2,Mon,Jun,25,14:46:30,2012,24,mod_was_ap22_http.c,1,ApacheModule.cpp
    Mon,Jun,25,14:47:30,2012,961,39,1,37,0,0,0,1,Mon,Jun,25,14:47:30,2012,37,mod_was_ap22_http.c,1,ApacheModule.cpp
    Mon,Jun,25,14:48:30,2012,968,32,0,30,0,0,0,2,Mon,Jun,25,14:48:30,2012,30,mod_was_ap22_http.c
    Mon,Jun,25,14:49:30,2012,972,28,0,25,0,0,0,3,Mon,Jun,25,14:49:30,2012,1,mod_sm22.cpp,24,mod_was_ap22_http.c 
```

我希望显示的列：DayOfWeek,Month,Day,Time,Year,Rdy,Bsy,Rd,Wr,Ka,Log,Dns,Cls, **AP22,SM22,ApacheModule**

目前，粗体列的顺序不正确（其余的都是正确的）。每一行都与该格式不一致。该行有时先有 ap22，有时先有 sm22，有时没有或全部三个模块。模块前的数字与模块相关。如何将数据转换为一致的格式？

请注意，每行中的第二个日期 mod_was_http.c、mod_sm22.cpp 和 ApacheModule.cpp 将在最终数组中删除。

到目前为止，这是我的代码：

```
# This program parses a error log for necessary information and outputs in CSV format.

# chunks of your input to ignore, see below... 
my %ignorables = map { $_ => 1 } qw([notice mpmstats: rdy bsy rd wr ka log dns cls bsy: in);  

# 3-arg open is safer than 2, lexical my $fh better than a global FH glob 
open my $error_fh, '<', 'iset_error_log';   

sub findLines {
    my($item,@result)=("");
    # Iterates over the lines in the file, putting each into $_ 
    while (<$error_fh>) {      

        # Select only those fields that have the word 'notice'
        if (/\[notice/) {          

            # Place those lines with the word 'rdy' on the next line
            if (/\brdy\b/){
                push @result,"$item\n";
                $item="";

            }
            else {
                $item.=",";
            }

            # Split the line into fields, separated by spaces, skip the %ignorables         
            my @line = grep { not defined $ignorables{$_} } split /\s+/;    

            # More cleanup         
            s/|^\[|notice|[]]//g for @line; # remove unnecessary elements from the array

            # Output the line.  
            @line = join(",", @line);          
            s/,,/,/g for @line;
            map $item.=$_, @line;
            }
        } 
        @result
    }  

my @array = &findLines;
foreach $line (@array){
    print $line; #This is where I would like to organize the lines if possible.
} 
```

我的输入文件如下所示：

```
[Mon Jun 25 07:51:17 2012] [notice] mpmstats: rdy 990 bsy 10 rd 0 wr 7 ka 0 log 0 dns 0 cls 3
[Mon Jun 25 07:51:17 2012] [notice] mpmstats: bsy: 2 in mod_sm22.cpp, 5 in mod_was_ap22_http.c
[Mon Jun 25 08:08:17 2012] [notice] mpmstats: rdy 974 bsy 26 rd 1 wr 24 ka 0 log 0 dns 0 cls 1
[Mon Jun 25 08:08:17 2012] [notice] mpmstats: bsy: 1 in mod_sm22.cpp, 23 in mod_was_ap22_http.c, 1 in ApacheModule.cpp        Mon,Jun,25,14:38:29,2012,962,38,0,36,0,0,0,2,Mon,Jun,25,14:38:29,2012,3,mod_sm22.cpp,33,mod_was_ap22_http.c

    [Mon Jun 25 21:54:41 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 0 ka 0 log 0 dns 0 cls 1
    [Mon Jun 25 21:55:41 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 0 ka 0 log 0 dns 0 cls 1
    [Mon Jun 25 21:59:41 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 21:59:41 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c
    [Mon Jun 25 22:00:41 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:00:41 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c
    [Mon Jun 25 22:03:41 2012] [notice] mpmstats: rdy 998 bsy 2 rd 0 wr 2 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:03:41 2012] [notice] mpmstats: bsy: 2 in mod_was_ap22_http.c
    [Mon Jun 25 22:08:42 2012] [notice] mpmstats: rdy 998 bsy 2 rd 0 wr 2 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:08:42 2012] [notice] mpmstats: bsy: 2 in mod_was_ap22_http.c
    [Mon Jun 25 22:21:42 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:21:42 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c
    [Mon Jun 25 22:22:42 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:22:42 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c
    [Mon Jun 25 22:31:42 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 0 ka 0 log 0 dns 0 cls 1
    [Mon Jun 25 22:32:42 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 22:32:42 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c
    [Mon Jun 25 23:06:43 2012] [notice] mpmstats: rdy 999 bsy 1 rd 0 wr 1 ka 0 log 0 dns 0 cls 0
    [Mon Jun 25 23:06:43 2012] [notice] mpmstats: bsy: 1 in mod_was_ap22_http.c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:30:13.627

您可能希望在仍然有拆分的情况下重新排序列，然后再使用 join 将它们转回一行文本。

你只需要做一个交换。

```
# 0        ,1    ,2  ,3   ,4   ,5  ,6  ,7 ,8 ,9 ,10 ,11 ,12 ,13  ,14  ,15
# DayOfWeek,Month,Day,Time,Year,Rdy,Bsy,Rd,Wr,Ka,Log,Dns,Cls,AP22,SM22,ApacheModule
#
# Sometimes the last 2 fields are missing and 13 comes before 14 and 15 in the 
# input, so fix that.
if (@line < 16) {
    push @line, '', ''; # or whatever you want for blanks
}

@line = @line[0..12,14,15,13]; # rearrange the array 
```

此外，如果您使用空白字符串 ( ) 作为空字段，您的正则表达式`s/,,/,/g`将会破坏这一点。`''`缺少最后一个字段的短线将恢复为缺少正确的 13 和 14 字段。

根据此处和之前提出的各种问题，我强烈建议您获取一份[Modern Perl](http://onyxneon.com/books/modern_perl/)（可下载或购买）或[学习 Perl](http://shop.oreilly.com/product/9780596001322.do)，以更好地掌握整个语言。我最近阅读了很多前者并喜欢它，并且从后者的早期版本中获得了我最初的大部分 Perl 知识。

# ruby-on-rails - 在这种情况下使用 Redis 合适吗？

> ID：11314662
> 
> 赞同：4
> 
> 时间：2012-07-03T15:52:07.710
> 
> 标签：ruby-on-rails, ruby, performance, mongodb, redis

我正计划创建一个拥有大量用户的应用程序（Rails）——它会从小规模开始，但我希望它能够处理一百万或更多。

我想构建一个每秒能够处理 2500 多个请求的系统。每个请求都需要写入（用于记录目的）以及从庞大的用户列表中读取，由用户名索引（我建议为此目的使用 MongoDB），读取的结果将发送回用户.

我有点不清楚 mongo 将如何处理读取和写入，所以我有这样的想法，即使用 Mongo 来永久存储记录，然后每次服务器启动时将它们加载到 Redis 中，以便更快地访问，以便 Mongo除了写入之外，不需要处理任何事情。

这听起来合理还是对 Mongo 和 Redis 的严重滥用？

交货速度至关重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:11:59.030

实际上，仅使用 Redis 就可以创建整个应用程序。你想做的是研究 Redis 的设计模式。一个不错的起点是 Karl Seguin 的 PDF，名为[The Little Redis book](http://openmymind.net/redis.pdf)。

例如，使用 Redis 的哈希值来保存所有用户的信息。

此外，如果计划得当，您不需要将其他持久性存储（例如 Mongo 或 MySQL）与 Redis 结合使用，因为 Redis 本身就是持久性的。你只需要选择一个好的分片/复制策略，它可以让你足够灵活地应对未来的系统变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:06:28.357

我认为您所询问的堆栈肯定是一个非常好的解决方案，并且针对高性能站点进行了相当多的战斗测试。Trello（由创建此站点的同一个人创建）使用类似的架构以及 craigslist。

[Trello 技术栈文章](http://blog.fogcreek.com/the-trello-tech-stack/)

[Craigslist 也使用这个](http://www.slideshare.net/jzawodn/living-with-sql-and-nosql-at-craigslist-a-pragmatic-approach)

Redis 速度很快，除了正常的失效类型功能外，它还具有出色的 pub/sub 机制，这使其成为大多数缓存中的佼佼者。Mongo 是一个我非常熟悉的数据库，我认为它非常适合各种数据存储目的，并且是一个可扩展的可靠企业数据库，保护数据完整性并检查 SLA 企业术语清单中的一堆标记

我认为这是一个很好的组合，但真正的问题应该是我是否需要这个。对于您的负载，我认为 Mongo 本身可以很好地处理这个问题（并提供数据完整性），如果您真的想要，您可以在具有足够内存的服务器上运行它，以确保您的数据集适合内存（非规范化和良好的模式设计是关键） . Foursquare 仅在内存中运行在 Mongo 上。

所以想想这是否有必要，但记住简单总是赢。Redis/Mongo 非常强大，但要掌握两个数据存储并管理它们也需要更多的工作。

谢谢， 普拉西斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:30:31.230

正如其他人所提到的，使用单一服务对我来说更有意义。不过，有理由将日志记录数据保存在内存中。如果您需要分发写入，我会尝试使用简单的东西，如果可能的话使用日志文件，或者使用 Scribe 或 Flume。

# oracle - Groovy/Grails 无法加载 oracle.jdbc.driver.OracleDriver

> ID：11314664
> 
> 赞同：1
> 
> 时间：2012-07-03T15:52:16.437
> 
> 标签：oracle, grails, groovy

我正在尝试测试连接到 sql 服务器的 grails 应用程序，目前，我正在使用我自己的一个。这是我的 datasource.groovy

```
 dataSource {
        configClass = GrailsAnnotationConfiguration.class
        pooled = true
        driverClassName = "oracle.jdbc.driver.OracleDriver"
        dialect = "org.hibernate.dialect.Oracle10gDialect"
        dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
        url = "jdbc:oracle:thin:@127.0.0.1:1521/xe"
        username = "blah"
        password = "blah"
        properties {
            validationQuery="select 1 from dual"
            testWhileIdle=true
            timeBetweenEvictionRunsMillis=60000
        }
    } 
```

我从另一个应用程序借用了这段代码，只是更改了 url 和用户/密码。另一个应用程序运行良好，但我的应用程序抛出了一个很长的异常，归结为这个

```
Caused by SQLNestedException: Cannot load JDBC driver class 'oracle.jdbc.driver.OracleDriver'
stack trace
Caused by ClassNotFoundException: oracle.jdbc.driver.OracleDriver 
```

我已将 ojdbc6.jar 复制到我的应用程序 lib/ 中，但恐怕我不知道下一步该做什么。

**编辑**我已经更新`oracle.jdbc.driver.OracleDriver`到`oracle.jdbc.OracleDriver`，但没有进展

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:21:03.723

跑

```
grails compile --refresh-dependencies 
```

当您将 jar 添加到 lib 目录时，Grails 会将其添加到类路径中。这是 2.0+ 的新要求

不相关 - 您可以删除

```
configClass = GrailsAnnotationConfiguration.class 
```

因为这是现在的默认设置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T15:55:58.947

班级不应该是：

```
driverClassName = "oracle.jdbc.OracleDriver" 
```

我相信另一个已被弃用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T18:36:32.100

所以，问题出在@tim_yates 的建议上。从那以后我遇到的问题是，即使我正在刷新依赖项，正如@burt 所说，但我从未重新加载过配置文件。

`grails clean`然后我就跑了`grails compile --refresh-dependencies`，瞧，问题解决了。感谢@burt 和@tim_yates 帮助我

# html - 带有 CSS 的 HTML 用于进度条

> ID：11314666
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:52:27.100
> 
> 标签：html, css

我有一个这样的DIV：

```
<div class="prog" style="width:100%">
<div class="prog" style="width:78%">
<div class="prog" style="width:43%"> 
```

我怎样才能使这个带有渐变的 div 背景从 div 的 44% 开始。就像图片一样。如果我们将宽度设置为 43%，那么只会显示此颜色 #9c45c4。如果我们设置的宽度超过 43%，则渐变将开始。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:20:54.113

[http://jsfiddle.net/Tcndj/2/](http://jsfiddle.net/Tcndj/2/)

我通常使用包装器 div，就像在我的示例中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:54:16.277

将 设置`background-size`为进度条的包含元素的大小。

在您提供的屏幕截图中，我没有看到任何“条件渐变”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:36:49.100

这是一个非常好用的进度条实现。每当我需要进度条时，我都会使用它。 [http://www.bram.us/projects/js_bramus/jsprogressbarhandler/#what](http://www.bram.us/projects/js_bramus/jsprogressbarhandler/#what)

# html - HTML5 中的 span 标签可以包含哪些元素？

> ID：11314668
> 
> 赞同：39
> 
> 时间：2012-07-03T15:52:33.587
> 
> 标签：html, w3c-validation, web-standards

因此，在我的大部分职业生涯中，我一直是 PHP 的 CLI 或 Cron 开发人员，现在我正在了解为什么我不喜欢在学校工作的 UI ;) 我正在处理 HTML5 验证，但我没有找到一个问题的答案出于好奇。我在我的主页上运行了 W3C HTML5 验证，我在 div 中遇到了几个错误`<span>`，这是不允许的。我尝试将所有`<div>`范围内的内容更改为 a`<p>`但收到几乎相同的错误。 [http://www.w3schools.com/html5/tag_span.asp](http://www.w3schools.com/html5/tag_span.asp)没有明确说明 a 中允许哪些元素`<span>`，验证器的错误也没有：

> 第 85 行，第 69 列：在此上下文中，元素 p 不允许作为元素 span 的子元素。（抑制来自该子树的更多错误。）

2个问题：

1) a 中允许哪些元素（如果有）`<span>`？

2）我在哪里可以参考另一个允许哪些元素？我用谷歌搜索过，但没有看到上面有“W3C”标记的东西。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-03T15:56:15.603

内联元素中只能包含内联元素。`span`是一个内联元素。`a`因此，像, `img`,等这样的标签`sup`可以在一个范围内，但块级元素像`div`和`p`不能。

**更新**

实际上，默认为内联显示的不同元素的行为不同。一些“内联”元素可能允许块元素（`a`例如），而另一些则不允许（例如`span`）。

如果您对 HTML 标记可能包含的内容感兴趣，您最官方的来源是关于 HTML 元素的 WHATWG 页面。您可以检查任何 HTML 元素并查看允许的内容（请参阅每个元素的“内容模型”）：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/#auto-toc-4](http://www.whatwg.org/specs/web-apps/current-work/multipage/#auto-toc-4)

这是 span 标签的定义，它表示只允许“短语”内容。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-span-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-span-element)

# java - 谷歌分析跟踪代码移动

> ID：11314669
> 
> 赞同：0
> 
> 时间：2012-07-03T15:52:34.727
> 
> 标签：java, android, mobile, google-analytics

我不明白为什么有这么多网址，以及它们的用途......

在 -- Admin --> Profiles Tab --> Profile Settings 下有一个网站 URL 选项卡

在 Admin --> Property Settings 下有另一个 URL 的选项卡

然后在 Java 代码中，您可以使用方法 tracker.trackPageView("/whateverYouWant.com"); 输入另一个 URL；

我注意到 tracker.trackPageView 设置了分析设置的位置这些是做什么用的？我找不到这方面的好文档。

请记住，这与网站的正常分析不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:02:59.650

Google Analytics for mobile devices is a low-effort port of their existing website-oriented infrastructure. You need to phrase all of your app's events as website-like operations. And you need to configure the analytics infrastructure as if your app was a website.

This blog post has some more suggestions for how to map android/mobile state to the webbish analytics state: [http://bitiotic.com/blog/2012/05/20/mapping-google-analytics-to-an-android-game-with-libgdx/](http://bitiotic.com/blog/2012/05/20/mapping-google-analytics-to-an-android-game-with-libgdx/)

# symfony - Symfony2 + Doctrine 一对多关系

> ID：11314672
> 
> 赞同：3
> 
> 时间：2012-07-03T15:52:39.487
> 
> 标签：symfony, doctrine

我正在尝试将 Doctrine 应用于在两个表之间具有 OneToMany 关系的现有数据库：Commerce 和 Area。我从数据库生成了 yml 模式，结果如下：

```
Area:
  type: entity
  table: area
  fields:
    id:
      id: true
      type: integer
      unsigned: false
      nullable: false
      generator:
        strategy: IDENTITY
    name:
      type: string
      length: 255
      fixed: false
      nullable: true
  lifecycleCallbacks: {  }

Commerce:
  type: entity
  table: commerce
  fields:
    id:
      id: true
      type: integer
      unsigned: false
      nullable: false
      generator:
        strategy: IDENTITY
    name:
      type: string
      length: 255
      fixed: false
      nullable: true
  manyToOne:
    area:
      targetEntity: Area
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        area_id:
          referencedColumnName: id
      orphanRemoval: false
  lifecycleCallbacks: {  } 
```

从该架构中，我生成了实体：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * Model\EntitiesBundle\Entity\Area
 *
 * @ORM\Table(name="area")
 * @ORM\Entity
 */
class Area
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255, nullable=true)
     */
    private $name;

    /**
     * @return string
     */
    public function getName()
    {
        return $this->name;
    }

}

use Doctrine\ORM\Mapping as ORM;

/**
 * Model\EntitiesBundle\Entity\Commerce
 *
 * @ORM\Table(name="commerce")
 * @ORM\Entity
 */
class Commerce
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255, nullable=true)
     */
    private $name;

    /**
     * @var Area
     *
     * @ORM\ManyToOne(targetEntity="Area")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="area_id", referencedColumnName="id")
     * })
     */
    private $area;

    /**
     * @return \Model\EntitiesBundle\Entity\Area
     */
    public function getArea()
    {
        return $this->area;
    }

    /**
     * @return string
     */
    public function getName()
    {
        return $this->name;
    }
} 
```

当我尝试时，我的问题来了：

```
$commerce = $em->getRepository('ModelEntitiesBundle:Commerces')
               ->find($id);
echo $commerce->getArea()->getName(); 
```

Area 实体具有空属性。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:33:14.693

我解决了这个问题。它在其他地方，我有两个实体管理器，而我需要的不是默认的。

# kohana - Kohana 3 使用查询生成器进行跨表更新

> ID：11314673
> 
> 赞同：2
> 
> 时间：2012-07-03T15:52:39.940
> 
> 标签：kohana, kohana-3, kohana-db

使用 DB 查询构建器在 Kohana 3 中构建跨表更新的正确方法是什么？

目前我只使用 DB::expr 但我知道查询生成器比这更聪明。

```
// update record
$rows_updated = DB::update(DB::expr('user_list_permissions INNER JOIN users ON user_list_permissions.user_id = users.id'))
->set($params)
->where('user_list_permissions.id', '=', $user_list_permission_id)
->where('users.account_id', '=', $this->account_id)
->execute(); 
```

是的，当然我尝试使用“join”方法，就像在构建 SELECT 查询时一样，但是我收到一个错误：

```
ErrorException [ 1 ]: Call to undefined method Database_Query_Builder_Update::join() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:49:00.807

因此，您使用表达式进行连接，可以在“on”函数上使用内置的“join”函数来实现此行为。

所以在你的例子中，它看起来像：

```
$rows_updated = DB::update('user_list_permissions')
->join('users','INNER')
->on('user_list_permissions.user_id','=','users.id')
->set($params)
->where('user_list_permissions.id', '=', $user_list_permission_id)
->where('users.account_id', '=', $this->account_id)
->execute(); 
```

[内容不多，但文档在http://kohanaframework.org/3.2/guide/database/query/builder#joins](http://kohanaframework.org/3.2/guide/database/query/builder#joins)上确实有一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T16:43:12.173

这是一个旧帖子，但只是为了记录我在 Kohana 的经历。

如果您使用的是 MySQL，它可以让您进行跨表更新，避免使用连接，如下所示：

```
UPDATE table1, table2
SET table1.some_field = 'some_value'
WHERE table1.foreign_key = table2.primary_key AND table2.other_field = 'other_value' 
```

请注意，条件**table1.foreign_key = table2.primary_key**与您在带有 JOIN 的 ON 子句中使用的条件相同。所以你可以在 Kohana 中编写一个跨表更新，遵循该模式避免 JOIN：

```
$rows_updated = DB::update(DB::expr('user_list_permissions, users'))
->set($params)
->where('user_list_permissions.user_id', '=', DB::expr('users.id'))
->where('user_list_permissions.id', '=', $user_list_permission_id)
->where('users.account_id', '=', $this->account_id)
->execute(); 
```

# c - 使用嵌入式 FPGA 的 MAC 地址与套接字通信

> ID：11314674
> 
> 赞同：2
> 
> 时间：2012-07-03T15:52:40.227
> 
> 标签：c, sockets, embedded, protocols, fpga

我有一个小型 FPGA，需要通过以太网与在 Ubuntu 机器上运行的 C 程序进行通信。FPGA 太小，无法使用 TCP 等。我可以发送帧并仅使用以太网端口的 MAC 地址在 Wireshark 中接收它们，但要与 CI 通信需要使用 RAW 套接字，但是在创建套接字时它需要一个协议值，是否有任何协议允许我仅使用 MAC 地址进行通信。

框架具有以下结构

```
Destination MAC address
Source MAC address
Protocol - 0x55aa
Data 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:54:30.513

如果您使用`PF_PACKET`而不是，`PF_INET`那么您的`0x55aa`值就是您的协议号：

```
#include <sys/socket.h>
#include <netpacket/packet.h>

packet_socket = socket(PF_PACKET, SOCK_RAW, ntohs(0x55aa)); 
```

# c++ - C++ 前向声明和继承

> ID：11314676
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:52:43.803
> 
> 标签：c++, inheritance, visitor-pattern

我有这样的情况

啊

```
#ifndef _CLASSA
#define _CLASSA
class B;

class A {
    virtual void addTo(B*) {}
};

#endif 
```

溴化氢

```
#ifndef _CLASSB
#define _CLASSB

#include "A.h"

class B : public A {
    B();
    void addTo(B* b) {
         // blah blah blah
    }
};

#endif 
```

B.cpp

```
#include "B.h"

B::B() : A() {} 
```

主文件

```
#include "B.h"

int main() {
    A* b = new B();
    B* d = new B();
    b->addTo(d);
} 
```

该项目将无法编译。如果我在 A 标头中转发声明 B，编译器会抱怨 Bh 中的类的期望 如果我在 Ah 中包含 Bh 标头，编译器将无法解析基类。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:53:39.607

是的，包含`A.h`in`B.h`并转发声明`B`in `A.h`。

> 如果我在 A 标头中转发声明 B，编译器会抱怨 Bh 中的类的期望

您现在拥有代码的方式应该可以工作。但我怀疑您实际上是`B`在 method 内部使用`addTo`，在这种情况下，前向声明是不够的。您需要将实现分离到一个实现文件并包含`B`在其中。

编辑：正如 DeadMg 所指出的，`class B : class A {`这不是有效的语法，你可能想要`class B : A`or `class B : public A`。

# javascript - Internet Explorer 8、9 window.open 问题

> ID：11314680
> 
> 赞同：0
> 
> 时间：2012-07-03T15:53:01.830
> 
> 标签：javascript, html, translation

在 IE 8 和 9 中打开代码时，它只打开**http://translate.google.com/**没有语言代码和句子。它在 Chrome 和 Firefox 中运行良好。

```
function DoTransGg(){
window.open('http://translate.google.com/#en|de|I want to travel with him.','_blank')
}
<input type='button' value='Google Translate' onclick='DoTransGg()'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:03:04.963

IE exhibits this behaviour only when used on localhost. With a remote webserver, it functions correctly, and includes the hash when executing `window.open(url...#...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:05:43.393

我创建了一个与您提供的代码一起使用的[jsFiddle ，只需稍作改动。](http://jsfiddle.net/ByAE3)我在句子中使用了 encodeURIComponent() 以确保您的 URL 格式正确。

# winforms - OpenGL混叠？

> ID：11314681
> 
> 赞同：0
> 
> 时间：2012-07-03T15:53:01.910
> 
> 标签：winforms, opengl, visual-studio-2008, antialiasing

我正在使用 Forms 开发 win7 microsoft visual studio 08。我刚换了显卡，我的应用程序中出现了某种混叠。

[![图像](../Images/ddf1ab2261d5405c6fb34fde997725c0.png)](https://i.stack.imgur.com/yMSPd.png)

可以看出，灰线有点混叠，也是几乎不可见的参考系统。

知道如何解决这个问题吗？

我将发布部分代码以防万一：1：绘画功能

```
private: void Paint(){

        int w = glControl1->Width;
        int h = glControl1->Height;

        float aspect_ratio = w / (float)h;
        Matrix4 perpective = Matrix4::CreatePerspectiveFieldOfView(MathHelper::PiOver4, aspect_ratio, 0.1f, 100000.0f);
        GL::MatrixMode(MatrixMode::Projection);
        GL::LoadMatrix(perpective);

        GL::MatrixMode(MatrixMode::Modelview);
        GL::LoadIdentity();
        GL::Viewport(0, 0, w, h);

        //Situacion de la camara en el espacio
        Matrix4 lookat = Matrix4::LookAt(100, 100, 100, 0, 0, 0, 0, 0, 1);
        GL::LoadMatrix(lookat);

        GL::Scale(this->zoom, this->zoom, this->zoom);

        GL::Rotate(xrot, 1.0f, 0.0f, 0.0f);
        GL::Rotate(yrot, 0.0f, 1.0f, 0.0f);
        GL::Clear(ClearBufferMask::ColorBufferBit | ClearBufferMask::DepthBufferBit);
           GL::ClearColor(Color::LightGray);

        Draw3Daxis();
        if (allowDraw){
            DrawSurface();
            }
        } 
```

2：绘制图片中显示的所有内容的函数（它只是一堆GL::Vertex3）

```
System::Void Draw3Daxis(){
         OpcionesPlot* opciones;
         opciones=OpcionesPlot::Instance();
         int extra=2;
         int sqrnumber=10;

        //Planos en los ejes
        GL::Color3(Color::White);
        GL::Begin(BeginMode::Quads);
        if(opciones->draw3DXYaxis){
            GL::Vertex3(0,0,0);
            GL::Vertex3(LENGTH,0,0);
            GL::Vertex3(LENGTH,LENGTH,0);
            GL::Vertex3(0,LENGTH,0);
         }
         if(opciones->draw3DXZaxis){
             GL::Vertex3(0,0,0);
             GL::Vertex3(LENGTH,0,0);
             GL::Vertex3(LENGTH,0,LENGTH);
             GL::Vertex3(0,0,LENGTH);
         }
         if(opciones->draw3DYZaxis){
             GL::Vertex3(0,0,0);
             GL::Vertex3(0,LENGTH,0);
             GL::Vertex3(0,LENGTH,LENGTH);
             GL::Vertex3(0,0,LENGTH);
        }
         GL::End();

         // ejes XYZ
         GL::Color3(Color::Black);
         GL::Begin(BeginMode::Lines);
         if(opciones->draw3DXYaxis){
            GL::Vertex3(0,0,0);
            GL::Vertex3(LENGTH+extra,0,0);
            GL::Vertex3(0,0,0);
            GL::Vertex3(0,LENGTH+extra,0);
         }
         if(opciones->draw3DXZaxis){
             GL::Vertex3(0,0,0);
             GL::Vertex3(LENGTH+extra,0,0);
             GL::Vertex3(0,0,0);
             GL::Vertex3(0,0,LENGTH+extra);
         }
         if(opciones->draw3DYZaxis){
             GL::Vertex3(0,0,0);
             GL::Vertex3(0,LENGTH+extra,0);
             GL::Vertex3(0,0,0);
             GL::Vertex3(0,0,LENGTH+extra);
        }

         //--> lineas de los planos
         GL::Color3(Color::DarkGray);
         for(int i=1;i<=sqrnumber;i++){
             if(i==sqrnumber)
                 GL::Color3(Color::Black);
             if(opciones->draw3DXYaxis){
                 GL::Vertex3(LENGTH/sqrnumber*i,0,0);
                 GL::Vertex3(LENGTH/sqrnumber*i,LENGTH,0);
                 GL::Vertex3(0,LENGTH/sqrnumber*i,0);
                 GL::Vertex3(LENGTH,LENGTH/sqrnumber*i,0);
             }
             if(opciones->draw3DXZaxis){
                 GL::Vertex3(LENGTH/sqrnumber*i,0,0);
                 GL::Vertex3(LENGTH/sqrnumber*i,0,LENGTH);
                 GL::Vertex3(0,0,LENGTH/sqrnumber*i);
                 GL::Vertex3(LENGTH,0,LENGTH/sqrnumber*i);

             }
             if(opciones->draw3DYZaxis){
                 GL::Vertex3(0,0,LENGTH/sqrnumber*i);
                 GL::Vertex3(0,LENGTH,LENGTH/sqrnumber*i);
                 GL::Vertex3(0,LENGTH/sqrnumber*i,0);
                 GL::Vertex3(0,LENGTH/sqrnumber*i,LENGTH);
             }

         }
        GL::End();
        // triangulos para los ejes
        //----->cuadrado
        GL::Color3(Color::Black);
        GL::Begin(BeginMode::Quads);
        float quadside=0.7;
        if(opciones->draw3DXYaxis){
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);

            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);

         }
         if(opciones->draw3DXZaxis){
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);

            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);
         }
         if(opciones->draw3DYZaxis){
            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);

            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);

        }
        GL::End();

        // --> triangulos para hacer la punta
        GL::Begin(BeginMode::Triangles);
        if(opciones->draw3DXYaxis){
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);

            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);

        }
        if(opciones->draw3DXZaxis){
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,-quadside,quadside);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,-quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);
            GL::Vertex3((float)LENGTH+extra,quadside,-quadside);
            GL::Vertex3((float)LENGTH+extra,quadside,quadside);
            GL::Vertex3(LENGTH+extra+5,0,0);

            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
         }
         if(opciones->draw3DYZaxis){
            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(-quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(-quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);
            GL::Vertex3(quadside,(float)LENGTH+extra,-quadside);
            GL::Vertex3(quadside,(float)LENGTH+extra,quadside);
            GL::Vertex3(0,LENGTH+extra+5,0);

            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(-quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(-quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);
            GL::Vertex3(quadside,-quadside,(float)LENGTH+extra);
            GL::Vertex3(quadside,quadside,(float)LENGTH+extra);
            GL::Vertex3(0,0,LENGTH+extra+5);

        }
        GL::End();
        Write3D(LENGTH,3,3,GLUT_BITMAP_9_BY_15,"X");
        Write3D(3,LENGTH,3,GLUT_BITMAP_9_BY_15,"Y");
        Write3D(3,3,LENGTH,GLUT_BITMAP_9_BY_15,"Z");
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:02:31.830

Try disabling depth testing before drawing each set of objects (reference planes first, axes second and then the reference grid).

It looks like your axes are Z-fighting the reference planes.

You have multiple options -

1.  Disable depth test when drawing the lines (not the planes). This will make sure that no z-fighting occurs.
2.  Keep depth testing on, but use glPolygonOffset when drawing the planes to offset them so that z-fighting does not happen at all.
3.  Use GL_LEQUAL (or whatever else) as the DepthFunc when drawing the planes, but use GL_EQUAL when drawing the lines. This *should* make things ok.

# c++ - 在 65536 位置访问迭代器的指针运算符会导致段错误

> ID：11314685
> 
> 赞同：0
> 
> 时间：2012-07-03T15:53:16.573
> 
> 标签：c++, macos, stl, osx-snow-leopard

巧合的是，代码似乎在无符号短路最大值的确切数量上失败。

```
map<int,vector<string> > backofflist;

for (int k = backofflist.size(); k > 0; k--) // for ($i=$#backofflist;$i>0;$i--)
{
    vector<string>::iterator backofflist_iter;
    int i = 0;
    for (backofflist_iter=backofflist[k].begin();
        backofflist_iter!=backofflist[k].end();
        backofflist_iter++) // foreach $x (@($backofflist[$i]))
    {
        cout << i++ << endl;
        string x;
        try
        {
            x = *backofflist_iter; //foreach $x (@{$backofflist[$i]})
        }
        catch (exception &e)
        {
            cout << e.what() << endl;
            exit(1);
        } 
```

产生以下输出：

```
...   
65532
65533
65534
65535
65536
{segfault} 
```

我认为向量的容量是无限的？有什么我想念的吗？我正在 Snow Leopard 中的 XCode 上编写这个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:20:39.963

此问题的唯一解决方案是`std::vector`在调用此代码之前将错误插入到映射中，否则会损坏现有的`std::vector`. 这个特定的代码部分总是定义明确的行为，如果不一定是你期望的行为，如果你期望`backofflist`的键不完整的话。

当然，缩进表明这不是你的整个循环，这可能就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:32:51.960

尝试评论这一行

```
x = *backofflist_iter; //foreach $x (@{$backofflist[$i]}) 
```

重新编译，然后粘贴答案。如果你有另一个段错误。打印完整的错误信息。

# java - 奇异矩阵和 Jama

> ID：11314688
> 
> 赞同：2
> 
> 时间：2012-07-03T15:53:23.000
> 
> 标签：java, matrix, jama

我正在使用 Jama API 来解决线性代数问题。但这给了我一个错误：`java.lang.RuntimeException: Matrix is singular.`

我想当矩阵是奇异的时，可能有多种解决方案。Jama API 中是否有办法获得这些解决方案之一，或者是否有任何其他 API 可以帮助我。

下面是我正在使用的代码片段：

```
Matrix A = new Matrix(input);
Matrix B = new Matrix(startState);
Matrix X = A.solve(B);
answer = X.getArray();
return answer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:36:54.183

检查矩阵的行列式 - 如果为零，则表示矩阵没有逆矩阵（组成矩阵的行不是独立的）。在这种情况下，您可以查看 SVD、Gauss-Siedel、Jacobi 迭代等。此外，作为备用库，如果有帮助，您可以查看 apache commons math。

# drupal - Drupal：数据库中的内容类型不在结构>内容类型中的内容类型列表中

> ID：11314691
> 
> 赞同：4
> 
> 时间：2012-07-03T15:53:32.380
> 
> 标签：drupal

前段时间我创建了两种内容类型：'protocol' 和 'protocol2' 它们有点不同，我还不确定哪一种最适合我的目的，所以我尝试了这两种类型并为每种类型创建了一些内容。经过一番测试后，我得出结论，“protocol2”是我要使用的那个，我希望它被称为“protocol”而不是“protocol2”。但我想保存协议内容类型的另一个版本，所以我教我简单地切换他们的名字。

所以我尝试改变他们的名字，但在这个过程中，我想使用的“protocol2”内容类型出了点问题，它就消失了。或者我是这么教的。无论如何，我将“协议”重命名为“协议 1”（名称和机器名称）。并重建了消失的那个。我给它起了名字协议，并试图给它机器名“协议”，但这没有用，所以我最终不得不再次将它命名为protocol2。

我现在发现数据库中的 node_type 表中实际上有一个机器名称为“protocol”的内容类型，当我查看页面上的 Structure>Content types 时，它没有显示出来。我可以简单地从那张桌子上清除它，还是有其他更合适的方法来做到这一点？

我一直在使用有机组，并且有与某些组关联的“协议”或“协议2”类型的内容类型（我不记得是哪个）。而且我认为它搞砸了小组页面上的一个观点。标题为“将内容发布到组”的列表由“发布”和一个空列表元素组成。我在哪里可以控制这个列表？这不应该是风景吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:29:52.563

在`node_type`表中，确保所有“协议”类型`locked`为 0 和`disabled`0。更改其所有`orig_type`值以匹配其当前`type`值。清除 Drupal 中的缓存`admin/config/development/performance`。

它们现在应该都出现在您的“内容类型”列表中，您可以从那里开始工作。

这是 Drupal 8 的一个活跃错误，在[Drupal 问题 515454](http://drupal.org/node/515454)下，任何补丁都可能被反向移植。

# html - 项目符号列表类型：没有不起作用

> ID：11314692
> 
> 赞同：0
> 
> 时间：2012-07-03T15:53:32.697
> 
> 标签：html, html-lists

www.example.com 上的项目符号采用 guillemets（角度引号»）的形式，而不是常规的黑色圆圈。现在，我特别想要侧边栏上的角度引号，所以这是可行的，但我不希望它们出现在页面的正文内容中......

你能弄清楚为什么子弹仍然像在侧边栏中一样，我怎样才能让它们正常？我已经尝试过 list-type:none ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:59:55.677

因为它们不是用`list-style-type`（不允许引号）设置的，而是用[生成的内容设置的](http://blog.gabrieleromanato.com/2012/02/css-generated-content-tutorial/)

只需`.entry ul li:before,`从声明中删除

```
.entry ul li:before, #sidebar ul ul li:before {
    content: "» ";
} 
```

在第 373 行`style.css`

如果您想要内容中的项目符号，请以`style.css`这种方式编辑第 369 行：

```
html > body .entry li {
    list-style-type: disc;
    margin: 7px 0 8px 10px;
    padding-left: 10px;
} 
```

如果您愿意，您可以调整边距和填充以适应您的需要

# python - 我可以将 Python Pandas 数据框导出到 MS SQL 吗？

> ID：11314693
> 
> 赞同：7
> 
> 时间：2012-07-03T15:53:33.030
> 
> 标签：python, sql, sql-server-2008, pandas

我正在使用`pymssql`Pandas sql 包将数据从 SQL 加载到`dataframe`带有 frame_query 的 Pandas 中。

我想使用 write_frame 将它发送回 SQL 数据库，但我找不到太多关于此的文档。特别是有一个参数flavor='sqlite'。这是否意味着到目前为止 Pandas 只能导出到 SQLite？我的公司正在使用 MS SQL Server 2008，所以我需要导出到那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:39:22.140

不幸的是，是的。目前`sqlite`是唯一支持的“风味” `write_frame`。见[https://github.com/pydata/pandas/blob/master/pandas/io/sql.py#L155](https://github.com/pydata/pandas/blob/master/pandas/io/sql.py#L155)

```
def write_frame(frame, name=None, con=None, flavor='sqlite'):
    """
    Write records stored in a DataFrame to SQLite. The index will currently be
    dropped
    """
    if flavor == 'sqlite':
        schema = get_sqlite_schema(frame, name)
    else:
        raise NotImplementedError 
```

不过，写一个简单的`write_frame`应该相当容易。例如，这样的事情可能会起作用（未经测试！）：

```
import pymssql                                                        
conn = pymssql.connect(host='SQL01', user='user', password='password', database='mydatabase')
cur = conn.cursor()                                                   

# frame is your dataframe                                             
wildcards = ','.join(['?'] * len(frame.columns))                      
data = [tuple(x) for x in frame.values]
table_name = 'Table' 

cur.executemany("INSERT INTO %s VALUES(%s)" % (table_name, wildcards), data)
conn.commit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:59:16.003

只是为了拯救其他试图使用它一段时间的人。原来这条线：

```
wildcards = ','.join(['?'] * len(frame.columns)) 
```

应该：

```
wildcards = ','.join(['%s'] * len(frame.columns)) 
```

希望有帮助

# c# - 访问 MarkupExtension.ProvideValue 中的构造函数参数

> ID：11314699
> 
> 赞同：2
> 
> 时间：2012-07-03T15:53:47.963
> 
> 标签：c#, wpf, xaml, .net-4.0

我有没有默认构造函数的*MyListYExtension*标记扩展。因此只能使用构造函数语法创建它。另一个*GetValueExtension*标记扩展尝试确定所要求的值的目标类型，以便它可以进行必要的转换。例如，如果您将第二个扩展的值分配给*Double*类型的属性，*GetValueExtension*会理解它并返回 2.0 而不是“2”。虚拟示例：

```
{MyListX Capacity={GetValue ListCapacityParam}} 
```

*如果我将GetValueExtension*分配给一个属性，一切都会好起来的。然后可以通过*MarkupExtension.ProvideValue*访问目标类型

```
((IProvideValueTarget)serviceProvider).TargetProperty.PropertyType 
```

但是当我应用*GetValueExtension*作为 MyListYExtension 构造函数的参数时*，* TargetProperty*为*空：

```
<!-- no default constructor in MyListY -->
<!-- the first parameter of MyListY is "int capacity" -->
{MyListY {GetValue ListCapacityParam}} 
```

当 XAML 解析器为属性分配值时，它会执行默认转换。但是当它从标记扩展中获取值时它不会这样做。它会导致无法将字符串值分配给 double 属性的异常。为避免这种情况，我尝试模拟默认转换，但为此需要知道目标类型。

**我找不到任何解决方法来确定***MarkupExtension.ProvideValue*调用中构造函数参数的实际类型。

我可以修改*GetValueExtension*但不能修改*MyListYExtension*。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:10:56.960

它看起来像鸡和蛋的问题。问题是构造函数可以重载，为了找到合适的构造函数，框架需要知道你试图传递给它的参数的类型。

换句话说，在`ProvideValue`调用 时，不知道将使用哪个构造函数，因此无法提供有关目标类型的信息。

# mercurial - 防止在 Mercurial 中合并 ascii 文件

> ID：11314705
> 
> 赞同：1
> 
> 时间：2012-07-03T15:53:58.400
> 
> 标签：mercurial

有没有办法告诉 Mercurial 指定的 ascii 文件在以后的更新过程中应该被完全覆盖而不是合并，类似于二进制文件的处理？

Git 使用 .gitattribues 处理此问题，如下所述：[Git mark file as binary to Avoid line separator conversion](https://stackoverflow.com/questions/7994811/git-mark-file-as-binary-to-avoid-line-separator-conversion)。有水银等价物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:42:04.943

看看`merge-patterns`（在`hgrc`）。这允许您指定`internal:other`为合并操作。

# android - 销毁活动堆栈

> ID：11314706
> 
> 赞同：1
> 
> 时间：2012-07-03T15:54:06.910
> 
> 标签：android

在某些应用程序中，您可以随时注销。例如，您登录，然后浏览。您使用操作栏或菜单按钮注销。我可以在那个时候调用finish()，但它只会弹出最后一个活动。即使我将用户向前移动到 Home Activity，堆栈仍然保留在内存中。有没有办法销毁剩余的堆栈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:59:50.117

执行此操作的最简单方法是将堆栈清除回您的 home 或第一个活动，并传递一个标识符以退出应用程序。例如：

```
public class ActivityOne extends Activity {
    public static final String FINISH_THIS = "FINISH_THIS";
    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        if(intent.hasExtra(FINISH_THIS)) {
            finish();
        }
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(getIntent().hasExtra(FINISH_THIS)) {
            finish();
        }
    }
}

public class ActivityTwo extends Activity {
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if(item.getItemId() == R.id.logout) {
            Intent intent = new Intent(this, ActivityOne.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.putExtra(ActivityOne.FINISH_THIS, true);
            startActivity(intent);
        }
        return true;
    }
} 
```

如果 ActivityOne 是堆栈的根，而 ActivityTwo 是用户选择注销选项的位置，则启动一个清除回 ActivityOne 的意图将摆脱后台堆栈。如果您希望应用程序在注销时退出，您可以像我对 FINISH_THIS 所做的那样传递一个额外的信号来指示 root/home 活动完成。

另一种方法是在调用`setResult(FINISH_THIS)`FINISH_THIS 是 int 标识符之前调用`finish()`. 然后在堆栈中的所有其他活动中，您将覆盖`onActivityResult`并检查结果以查看该活动是否需要完成。如果是这样，您再次设置结果并继续传递它。

使用我在开头概述的意图方法是清除堆栈的首选方法，因为它不依赖菊花链结果，但两个选项都运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:57:50.740

一种快速而肮脏的方法是 onResume 验证您是否仍然登录，如果没有，则完成它。这样，如果他们反击，它将在尝试打开它们时关闭每个活动。这也可以防止有人在您希望它关闭时使用应用程序管理器重新输入您的活动。

另一个想法是[Android: Clear the back stack](https://stackoverflow.com/questions/5794506/android-clear-the-back-stack)

# .net - 使用 WCF 服务时出现奇怪的异常（可能是字符编码异常？）

> ID：11314707
> 
> 赞同：0
> 
> 时间：2012-07-03T15:54:07.940
> 
> 标签：.net, wcf, http, character-encoding, windows-services

我正在调用我之前创建的 WCF 服务，该服务查询语义数据库并返回 dbpedia.org 链接，这些链接带有实体的名称，例如，您会找到“http://dbpedia.org/resource/ Barack_Obama”或“http://dbpedia.org/resource/Brazil”

我面临的问题是，在调用返回提到的 URI 的方法时，大多数情况下该方法都有效，但很少发生此错误：

底层连接已关闭：服务器关闭了预期保持活动状态的连接。

```
Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ClientReliableChannelBinder`1.RequestClientReliableChannelBinder`1.OnRequest(TRequestChannel channel, Message message, TimeSpan timeout, MaskingMode maskingMode)
   at System.ServiceModel.Channels.ClientReliableChannelBinder`1.Request(Message message, TimeSpan timeout, MaskingMode maskingMode)
   at System.ServiceModel.Channels.ClientReliableChannelBinder`1.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Security.SecuritySessionClientSettings`1.SecurityRequestSessionChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at ComparisonServiceInterface.Compare(String[] URIs)
   at ComparisonServiceInterfaceClient.Compare(String[] URIs)

Inner Exception:
The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

Inner Exception:
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)

Inner Exception:
An existing connection was forcibly closed by the remote host
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

我想也许有些资源有不同的编码，比如'ü'字符的“http://dbpedia.org/resource/Sergio_Agüero”或者什么？

我在发回之前尝试对 uri 进行编码，它仍然抛出相同的异常。

服务配置文件如下所示：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true"/>
  </system.web>  
  <system.serviceModel>
    <services>
      <service name="mergedServices.MergedService">
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.RelationGeneratorServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.keywordSearchServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.QAServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.CompareWithOnePredicateServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.ComparisonServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.ProfileConstructorInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/mergedServices/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:05:26.630

在故障中临时包含异常详细信息，这将允许您获得真正的错误。此外，您应该在服务中重新抛出异常之前记录它们，这样您就知道真正的问题是什么，而无需在故障中包含异常详细信息。

```
<serviceDebug includeExceptionDetailInFaults="True"/> 
```

# symfony - 如何在 Symfony 2 中指定参数转换器的优先级？

> ID：11314714
> 
> 赞同：0
> 
> 时间：2012-07-03T15:54:40.273
> 
> 标签：symfony, doctrine, doctrine-orm

我是 Symfony 2 项目，将为[继承](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)自`TenantableEntityInterface`. 框架本身提供了一个默认值，[`DoctrineConverter`](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/Request/ParamConverter/DoctrineParamConverter.php)而我自己的转换器非常相似，但**应该是唯一要执行的**（也是出于性能原因）。

参数转换器如何指定优先级？

```
/**
 * @Service("request.doctrine_tenantable_entity_converter")
 * @Tag("request.param_converter")
 */
class DoctrineTenantableEntityConverter implements ParamConverterInterface
{
} 
```

我试图将优先级传递给转换器，但它不起作用：

```
/**
 * @Route("/show/{id}")
 * @Method("GET")
 * @ParamConverter("message", class="MyBundle:Message", priority=10)
 * @Template
 */
public function showAction(Message $message)
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:05:00.063

好的，在一个不起眼的页面上找到它。应在**服务定义**级别指定优先级（-10 到 10）（我使用的是 JMSDiExtraBundle）。

更高的**优先级**意味着您自己的转换器在之前执行`DoctrineConverter`：

```
/**
 * @Service("request.doctrine_tenantable_entity_converter")
 * @Tag("request.param_converter", attributes = {"priority" = "10"})
 */
class DoctrineTenantableEntityConverter implements ParamConverterInterface {} 
```

# android - 如何设置安卓模拟器进行实时人脸检测？

> ID：11314716
> 
> 赞同：4
> 
> 时间：2012-07-03T15:54:49.487
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich, face-detection

我有一个运行 4.1 Android 的模拟器。设置虚拟设备，使其具有由网络摄像头模拟的摄像头。这部分工作正常。

但是`Camera.Parameters.getMaxNumDetectedFaces()`总是返回 0，这意味着不支持人脸检测（尽管它在静态图像上工作正常）。

为了在 Android 模拟器上启用实时人脸检测，有什么可以做的吗？我说的是 API 级别 14 附带的人脸检测，而不是第三方库。

谢谢，维克托。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:18:10.013

不可以。很遗憾，API 14 人脸检测需要硬件支持。

# wordpress - 如何重写 timthumb.php 图像 url？

> ID：11314717
> 
> 赞同：0
> 
> 时间：2012-07-03T15:54:59.023
> 
> 标签：wordpress, mod-rewrite

嗨，我想“压缩” timthumb.php 网址，例如：

```
http://mydomain.com/wp/themes/mymagazinetheme/timthumb.php?
src=http://mydomain.com/wp/media/sampleimage.jpg&h=400&w=580&zc=1 
```

至：

```
http://mydomain.com/wp/media/sampleimage-400-580-1.jpg 
```

有可能吗？所以请帮助我这里是我的 thumb.php 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:20:25.623

这有点长，但也许你正在寻找这样的东西？

```
RewriteRule ^wp/media/([^\-/]+)-([0-9]+)-([0-9]+)-([0-9]+)\.(jpe?g|png|gif|bmp)$ /wp/themes/mymagazinetheme/timthumb.php?src=http://%{HTTP_HOST}/wp/media/$1.$5&h=$2&w=$3&zc=$4 [L,R=301] 
```

# cytoscape-web - cytoscape-panzoom 插件上缺少图标

> ID：11314718
> 
> 赞同：0
> 
> 时间：2012-07-03T15:55:04.143
> 
> 标签：cytoscape-web

我想使用随 Cytoscape.js 分发的 cytoscape-panzoom 插件。在我的 html 页面中，我包含了 cytoscape-web/plugins 目录中的相应文件，以及 jquery 和 jquery-ui：

```
<link rel="stylesheet" href="javascript/jquery.cytoscapeweb-panzoom.css" />
<script type="text/javascript" src="javascript/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="javascript/jquery.cytoscapeweb-panzoom.js"></script> 
```

在 css 文件`jquery.cytoscapeweb-panzoom.css`中，我按照评论中的建议修改了包含 ui-icons 的 png 文件的位置（png 文件是可访问的，当我将链接粘贴到浏览器中时可以看到它们）：

```
.ui-cytoscapeweb-panzoom-zoom-button .ui-icon {
    /*background-image: url("../images/ui-icons_ffffff_256x240.png"); /* point to your copy of the img */
    background-image: url("http://cpdb.molgen.mpg.de/download/ui-icons_ffffff_256x240.png");
}

.ui-cytoscapeweb-panzoom-pan-button .ui-icon {
    /*background-image: url("../images/ui-icons_000000_256x240.png"); /* point to your copy of the img */
    background-image: url("http://cpdb.molgen.mpg.de/download/ui-icons_000000_256x240.png");
}

.ui-cytoscapeweb-panzoom-static .ui-cytoscapeweb-panzoom-zoom-button .ui-icon {
    /*background-image: url("../images/ui-icons_000000_256x240.png"); /* point to your copy of the img */
    background-image: url("http://cpdb.molgen.mpg.de/download/ui-icons_000000_256x240.png");
} 
```

但是，在页面加载后，panzoom 控件（圆圈、滑块等）丢失了它们的图标，如此屏幕截图所示（资源不再存在）。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:05:26.617

如果您从 master 分支构建，您可能需要重新下载样式表。我认为自从名称更改以来，您拥有的选择器已经过时了。类名将不再包含`cytoscapeweb`在名称中。

# java - 集合包含对象但无法删除它

> ID：11314721
> 
> 赞同：0
> 
> 时间：2012-07-03T15:55:20.630
> 
> 标签：java, collections

我有一个包含多个集合的类，我在从其中一个集合中删除一些对象时遇到问题。如果我调用 collection.contains(object) 它返回 true 然后在下一行我调用 collection.remove(object) 并且对象不会被删除。

这是无效的原始代码。所有的集合都是 SortedSet。让我感到困惑的是，男性集合是直接从 people 集合中填充的，但是当您尝试从 people 集合中删除男性对象时，并非所有对象都会被删除。

```
 for(Person person : peopleBin.getPeople())
    {
        if(person.isMale())
        {
            peopleBin.getMen().add(person);
        }
    }
    peopleBin.getPeople().removeAll(peopleBin.getMen()); 
```

Person 有一个这样的 equals 方法

```
public boolean equals( Object obj ) 
{
    if ( obj == null )
        return false;
    if ( !(obj instanceof Person) )
        return false;
    Person that = (Person)obj;
    return
        that.age == age &&
        that.id == id &&
        that.someCount == someCount ;
} 
```

现在，当我用这个替换第一个片段的 removeAll 行时，我得到了奇怪的行为。

```
 for(Person person: personBin.getMen())
    {
        if(personBin.getPeople().contains(person)) 
            personBin.getPeople().remove(person);
    } 
```

if(personBin.getPeople().contains(person)) 总是返回 true，但 personBin.getPeople().remove(person) 并不总是删除。有时会，有时不会。

我已将所有类名和字段名更改为通用的，以便在公共论坛上发布。

任何帮助将不胜感激！

编辑：这里是 compareTo impl

```
 public int compareTo (Object o)
{
    if ( ! ( o instanceof Person) ) 
    {
        throw new ClassCastException();
    }

    Person that = (Person)o;

    int comparison = 0;

    return 
        ( (comparison = this.age () - that.age ()) != 0 ? comparison :
        ( (comparison = this.id - that.id) != 0 ? comparison :
        ( (comparison = this.someCount - that.someCount ))));
} 
```

编辑：这里是 hashCode impl

```
public int hashCode() {
    int result = 31;
    result = 61*result + age;
    result = 61*result + id;
    result = 61*result + someCount;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:27:56.583

要从集合中删除项目，最好的方法是使用迭代器来避免任何问题：

用这个循环替换你，然后再试一次：

```
for(Iterator<Person> iterator =  personBin.getMen().iterator();iterator.hasNext();){
            Person person = iterator.next();
            if(personBin.getPeople().contains(person)){
                iterator.remove();
            }
        } 
```

# windows - 我们如何安全地创建和删除文件？

> ID：11314723
> 
> 赞同：0
> 
> 时间：2012-07-03T15:55:23.097
> 
> 标签：windows, file, delete-file

有没有一种方法可以让程序创建一个文件（这一切都在 Windows 环境中），例如 PDF，该文件在 7 天内设置为“过期”。过期是指一旦时间段过去，它将被删除。如果 PDF 包含敏感数据，我们是否有信心以安全的方式实施此类流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:57:02.470

您不能自行创建自毁文件。您必须创建一个运行 x 分钟/小时/天、搜索过期文件并删除它们的服务。有关某些基于 Windows 的调度程序，请参阅[此问题](https://stackoverflow.com/questions/132971/what-is-the-windows-version-of-cron)。

# php - PDO 连接尝试捕获包括

> ID：11314730
> 
> 赞同：1
> 
> 时间：2012-07-03T15:55:54.483
> 
> 标签：php, include, pdo, connection

我是 PDO 的新手，我想从一开始就这样做——我将在一个站点上替换我的旧 mysql_ 函数。

我做对了吗？：

我是否应该将连接代码放在 try/catch 中并将其保存到文件中，并将其包含在页面顶部。然后将查询也放入 try/catch 中。

或者：

我应该将连接代码放在一个文件中并将其包含在查询上方的 try/catch 语句的顶部吗？

版本 1：

```
include('pdo.php'); // try/catch in file

try { 

    $stmt = $conn->prepare('SELECT * FROM myTable WHERE id = :id');
    $stmt->execute(array('id' => $id));

    while($row = $stmt->fetch()) {
        print_r($row);
    }
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

版本2：

```
try {
    include('pdo.php'); // no try/catch in file

    $stmt = $conn->prepare('SELECT * FROM myTable WHERE id = :id');
    $stmt->execute(array('id' => $id));

    while($row = $stmt->fetch()) {
        print_r($row);
    }
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

或者我应该在两个地方都放 try/catch 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:24:38.403

你应该同时做甚至更多：

*   设置一个向用户显示消息并停止 PHP 的错误处理程序（请参阅 参考资料[`set_error_handler`](http://php.net/manual/fr/function.set-error-handler.php)）
*   启动连接时，添加 try/catch 并在捕获异常时抛出错误。我猜如果没有数据库连接，您的网站将无法运行。
*   围绕您的查询进行尝试/捕捉以从错误中优雅地恢复（如果可以）

# javascript - Chrome 中的图像映射：事件未触发！在 IE7 中运行良好

> ID：11314732
> 
> 赞同：0
> 
> 时间：2012-07-03T15:55:59.143
> 
> 标签：javascript, jquery, image, google-chrome, map

我有一组映射到它的区域的图像。每个区域，当点击时都会调用一个函数来做某事。这整个考验在 IE7 中非常有效！这一次，是 Chrome 困扰着我。Chrome 不会在这些区域触发任何事件，我无法确定问题所在。以下是相关代码：

```
<div id="containerRemote">
<img src="resources/buttons/RC64_small.png" width="170" height="590"
alt="" usemap="#remotemap" />
<map id="remotemap" name="remotemap">
    <area shape="circle" coords="37,47.5,12" alt="TV Input" />
    <area shape="circle" id="format" coords="37,78.5,12.5" alt="Format" />
    <area shape="circle" coords="85.5,60.5,13" alt="Power" />
    <area shape="circle" id="poweron" coords="140.5,50.5,12.5" alt="DTV Power On" />
    <area shape="circle" id="poweroff" coords="140.5,79.5,12" alt="DTV Power Off" />
    <area shape="circle" id="play" coords="87.5,134,17" alt="Play" />
    <area shape="circle" id="stop" coords="87.5,95.5,13" alt="Stop" />
    <area shape="circle" id="rewind" coords="43,134,14" alt="Rewind" />
    <area shape="circle" id="fastforward" coords="133.5,134,14" alt="Fast Forward" />
    <area shape="circle" id="pause" coords="61.5,164.5,13" alt="Pause" />
    <area shape="circle" id="record" coords="116,162.5,13" alt="Record" />
    <area shape="circle" id="replay" coords="61.5,101.5,13" alt="Replay" />
    <area shape="circle" id="advance" coords="116,105,13" alt="Advance" />
    <area shape="circle" id="guide" coords="40.5,205.5,15" alt="Guide" />
    <area shape="circle" id="active" coords="68.5,187.5,17" alt="Active" />
    <area shape="circle" id="list" coords="106.5,187.5,14" alt="List" />
    <area shape="circle" id="exit" coords="133.5,209,15" alt="Exit" />
    <area shape="circle" id="select" coords="89,243.5,18" alt="Select" />
    <area shape="circle" id="up" coords="89,209,12.5" alt="Up" />
    <area shape="circle" id="up2" coords="73.5,211.5,12.5" alt="Up" />
    <area shape="circle" id="up3" coords="104.5,211.5,12.5" alt="Up" />
    <area shape="circle" id="down" coords="89,279,12.5" alt="Down" />
    <area shape="circle" id="down2" coords="73.5,271.5,12.5" alt="Down" />
    <area shape="circle" id="down3" coords="104.5,271.5,12.5" alt="Down" />
    <area shape="circle" id="left" coords="53.5,243.5,12.5" alt="Left" />
    <area shape="circle" id="left2" coords="56,224.5,12.5" alt="Left" />
    <area shape="circle" id="left3" coords="53.5,257,12.5" alt="Left" />
    <area shape="circle" id="right" coords="122.5,243.5,12.5" alt="Right" />
    <area shape="circle" id="right2" coords="121,224.5,12.5" alt="Right" />
    <area shape="circle" id="right3" coords="119.5,257,12.5" alt="Right" />
    <area shape="circle" id="back" coords="40.5,288,15" alt="Back" />
    <area shape="circle" id="menu" coords="86.5,305,17" alt="Menu" />
    <area shape="circle" id="info" coords="133.5,290,15" alt="Info" />
    <area shape="circle" id="red" coords="45,320,12" alt="Red" />
    <area shape="circle" id="green" coords="70.5,334.5,12" alt="Green" />
    <area shape="circle" id="yellow" coords="100,334.5,12" alt="Yellow" />
    <area shape="circle" id="blue" coords="125,320,12" alt="Blue" />
    <area shape="circle" coords="47,356,15" alt="Volume Plus" />
    <area shape="circle" coords="51,399.5,14" alt="Volume Minus" />
    <area shape="circle" coords="49,428.5,12" alt="Mute" />
    <area shape="circle" id="channelup" coords="130.5, 356.5,15" alt="Channel Plus" />
    <area shape="circle" id="channeldown" coords="127.5,399,14" alt="Channel Minus" />
    <area shape="circle" id="previous" coords="126.5,428.5,12" alt="Previous Channel" />
    <area shape="circle" id="one" coords="49,456.5,12" alt="One" />
    <area shape="circle" id="two" coords="87.5,456.5,12" alt="Two" />
    <area shape="circle" id="three" coords="125,456.5,12" alt="Three" />
    <area shape="circle" id="four" coords="49,486.5,12" alt="Four" />
    <area shape="circle" id="five" coords="87.5,486.5,12" alt="Five" />
    <area shape="circle" id="six" coords="125,486.5,12" alt="Six" />
    <area shape="circle" id="seven" coords="49,513.5,12" alt="Seven" />
    <area shape="circle" id="eight" coords="87.5,513.5,12" alt="Eight" />
    <area shape="circle" id="nine" coords="125,513.5,12" alt="Nine" />
    <area shape="circle" id="dash" coords="49,539.5,12" alt="Dash" />
    <area shape="circle" id="zero" coords="87.5,539.5,12" alt="Zero" />
    <area shape="circle" id="enter" coords="125,539.5,12" alt="Enter" />
</map>
</div> 
```

我不喜欢用这个庞大的地图区域列表来骚扰你，但地图中可能存在我遗漏的一些错误。这是将函数调用绑定到这些区域的 onclick 事件的 JS。下面也是我添加的一段 JQuery 代码，它为每个区域映射分配一个 href 属性。

```
 $("#remotemap area").click(function() {
    if($(this).attr("id") != undefined) {
        logRCCommand($(this).attr("id"));
    }
    return false;
});

    $("#remotemap area").attr("href", "javascript: void(0);"); 
```

CSS：

```
#containerRemote{
position: absolute; /* this line, when commented, fixes the problem, but ruins layout         */
width: 170px; 
} 
```

有趣的是，在图像的最底部是三个可以正常工作的区域，尽管它们的大小不正确。这让我相信我有某种格式错误，而不是语法或逻辑错误。即便如此，我也不知道是什么原因造成的。我在网上搜索了线索，但无济于事！

谢谢

更新：我认为这个问题与 CSS 有关。我为包含此地图的 div 注释掉了某行 CSS。瞧！一切正常，但现在整个页面的布局已经下地狱了。我不知道这应该是一个新问题还是只是对当前问题的更新。无论如何，我更新了我的代码以包含更多相关行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:30:56.560

您需要将 href 属性添加到所有区域元素

```
<area shape="circle" coords="37,47.5,12" alt="TV Input" href="#" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:37:41.070

感谢 Rodolfo 的评论，我能够弄清楚我的图像映射的单独 div ADJACENT 比我想象的要宽，并且它的一部分（没有内容的部分，使该部分不可见）覆盖了我的图像映射，使其实际上无法使用，除了 div 未覆盖的一小部分。

我不明白其他 div 是如何变得如此广泛的，但这是我以后有时间时要弄清楚的事情：P

无论如何，我更改了包含我的图像映射的 div 的 z-index

```
#containerRemote {
  position: absolute;
  width: 170px;
  z-index: 11;
} 
```

现在一切正常！我的问题不是 Chrome 没有触发事件，而是 Chrome 的内容布局和 IE7 的布局之间的差异。

感谢大家的帮助！

# ruby - Ruby RSpec 不运行测试

> ID：11314737
> 
> 赞同：0
> 
> 时间：2012-07-03T15:56:22.237
> 
> 标签：ruby, selenium, rspec, rake

我的 rakefile selenium 任务没有运行任何测试并且没有给出错误。我的文件：

```
Rakefile

desc 'Selenium test'
task :selenium => [:init] do

    RSpec::Core::RakeTask.new() do |t|
        t.pattern = 'test/selenium/*.rb'
        t.verbose = true
    end
    print 'wtf'
end 
```

测试/硒/test1.rb：

```
require "selenium-webdriver"
require "rspec"
include RSpec::Expectations
describe "Test" do

  before(:each) do
    @driver = Selenium::WebDriver.for "ie"
    @base_url = "my site"   
    @driver.manage.timeouts.implicit_wait = 10
    @verification_errors = []
    @driver.get(@base_url)
  end

  after(:each) do
    @driver.quit
    @verification_errors.should == []
  end

  it "test_" do
    #verify { element_present?(:link, "Edit campaign").should be_true }
    verify { element_present?(:link, "Campaign list").should be_true }
    (@driver.find_element(:link, "Campaign list").text).should == "Campaign list"
  end

  def element_present?(how, what) 
```

结果：

```
wtf 
```

测试未运行，未显示错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T07:16:41.840

改名：

```
test/selenium/test1.rb 
```

至：

```
test/selenium/test1_spec.rb 
```

# php - 自动更新列表滚动

> ID：11314739
> 
> 赞同：1
> 
> 时间：2012-07-03T15:56:29.157
> 
> 标签：php, jquery, html, css

我基本上是在制作一个自动更新的图像滚动器。当 jQuery 发送 ajax 请求并发现新图像已上传时，我需要发生这种情况

![在此处输入图像描述](../Images/f7516184d7ab286cfd908a96f93786bb.png)

我什至无法开始理解我是如何做到这一点的。

我应该让ajax返回文件吗？我怎样才能使滑动与新的更新完全配合？目前我让它使用一个隐藏的图像，然后位置为左：-36px；所以它被隐藏在屏幕上，然后我将其更改为 left:0px; 它在移动其他人的同时滑过，这很好用，但我怎样才能让它可以处理多个imgs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:18:21.360

你可以像这样附加你的新图像：

```
$("#slide").append('<img id="newimg"src="image.png"  />'); 
```

或使用 before() 或 after() 定义新图像的位置[http://api.jquery.com/before/](http://api.jquery.com/before/)

在你的CSS中#slide溢出。

```
overflow-y: hidden; 
```

# wordpress - 替换 wp_query 值

> ID：11314743
> 
> 赞同：0
> 
> 时间：2012-07-03T15:56:38.813
> 
> 标签：wordpress

我有一个使用自定义查询按国家/地区搜索帖子的网站。

搜索结果很好，但底部的分页反映了网站中的帖子总数，而不是搜索结果中的帖子总数。

管理这个的插件使用全局 $wp_query 来确定帖子的数量，而不是自定义查询。默认情况下，它的工作方式如下：

```
function wp_page_numbers($start = "", $end = "")
{
    global $wp_query;
    global $max_page;
    global $paged;
    if ( !$max_page ) { $max_page = $wp_query->max_num_pages; }
    if ( !$paged ) { $paged = 1; }

    $settings = get_option('wp_page_numbers_array');
    $page_of_page = $settings["page_of_page"];
    $page_of_page_text = $settings["page_of_page_text"];
    $page_of_of = $settings["page_of_of"];

    $next_prev_text = $settings["next_prev_text"];
    $show_start_end_numbers = $settings["show_start_end_numbers"];
    $show_page_numbers = $settings["show_page_numbers"];

    $limit_pages = $settings["limit_pages"];
    $nextpage = $settings["nextpage"];
    $prevpage = $settings["prevpage"];
    $startspace = $settings["startspace"];
    $endspace = $settings["endspace"];

    if( $nextpage == "" ) { $nextpage = "&gt;"; }
    if( $prevpage == "" ) { $prevpage = "&lt;"; }
    if( $startspace == "" ) { $startspace = "..."; }
    if( $endspace == "" ) { $endspace = "..."; }

    if($limit_pages == "") { $limit_pages = "10"; }
    elseif ( $limit_pages == "0" ) { $limit_pages = $max_page; } 
```

我尝试将其修改为：

```
if ($gallery_query){ $page_query=$gallery_query; }else {$page_query=$wp_query;}
    global $max_page;
    global $paged;
    if ( !$max_page ) { $max_page = $page_query->max_num_pages; }
    if ( !$paged ) { $paged = 1; } 
```

但这不会返回任何页面。

理想情况下，我应该用 $gallery_query 值替换 $wp_query 值，但我不知道如何。显而易见的`$wp_query = $gallery_query`不起作用。

有什么建议么？

谢谢！

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:22:53.343

Thanks to [TheDeadMedic](https://wordpress.stackexchange.com/users/1685/thedeadmedic) for this:

```
function wp_page_numbers_custom( $wp_query, $start = '', $end = '' )
{
    $_backup = array(
        'wp_query' => @ $GLOBALS['wp_query'],
        'max_page' => @ $GLOBALS['max_page'],
           'paged' => @ $GLOBALS['paged'],  
    );

    $GLOBALS['wp_query'] = $wp_query;
    $GLOBALS['max_page'] = $wp_query->max_num_pages;
       $GLOBALS['paged'] = max( $wp_query->get( 'paged' ), 1 );

    wp_page_numbers( $start, $end );

    foreach ( $_backup as $var => $val )
        $GLOBALS[ $var ] = $val;
}

// Example usage: wp_page_numbers_custom( $gallery_query ); 
```

It totally solved my issue!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:57:12.960

我在使用 WP Page Numbers Plugin 时遇到了同样的问题。该问题的另一个解决方案是修改搜索结果的 $wp_query，然后在需要返回原始结果时执行 wp_reset_query。

# dll - Azure：在工作角色中使用框架/SDK（带有 .dll）的最佳实践

> ID：11314746
> 
> 赞同：1
> 
> 时间：2012-07-03T15:56:42.060
> 
> 标签：dll, architecture, azure, snapshot, drive

我想在 Azure 上的工作角色中使用[GDal/OGR](http://www.gdal.org/ogr/)。

要使用 OGR 类和方法，我必须在 WorkerRole 中配置 EnvironmentVariable 并能够访问我的["OGR directory"](https://i.stack.imgur.com/i664H.jpg)。

如何在工作角色的每个实例（可能是很多实例）中部署这个目录（以及所有这些内容）。

我看到 4 首曲目：

1.  在我的工作角色项目中复制我的目录（VS2010）

    *   pro：安装难度为零但很痛苦
    *   缺点：不仅仅是当我有一个层次结构很大的目录/切换到另一个版本的 OGR 时很痛苦
2.  创建一个 .vhg（虚拟磁盘）并在每个实例上挂载它的快照

    *   亲：容易切换到新版本的OGR
    *   缺点：如果快照存储得比快照的本地存储/成本更远（？）
3.  创建一个.vhg，挂载它，复制目录，卸载它并工作

    *   亲：容易切换到新版本的OGR
    *   缺点：在 Run 方法的开头访问并发？
4.  创建一个 .zip，将其存储在 blob 中，下载并在每个实例中解压缩。

    *   亲：容易切换到新版本的OGR/others？
    *   缺点：我不知道，我说

目前，我使用第一个，但是当我创建其他项目或工人角色时，它看起来很痛苦。

我不太清楚使用 zip 方法。

如果您有意见、其他方式、偏好，我正在倾听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:12:02.383

Benjamin，我为合作伙伴创建了几个类似的项目，并讨论了对于此类项目的最佳方法，其中整个代码 + 运行时 + 静态数据，它们都捆绑在一起并部署到 Worker Role，我个人的偏好是在你的清单。看看我的[Tomcat/Azure in Worker Role](http://tomcatazure.codeplex.com/)，它们也遵循相同的部署模型。

您可以将上述部署模型用于将 OGR 应用程序部署到 Windows Azure Worker Role。

我也不确定，您是否希望使用新发布的[Windows Azure 虚拟机](https://www.windowsazure.com/en-us/manage/windows/)，因为您可以选择 Windows Azure VM 来获取 VM 并直接部署，而不依赖于 Windows Azure SDK/Worker 角色（如果适用，请考虑一下到你的项目）

# java - Java 中的 NotifyPropertyChanged - Android

> ID：11314747
> 
> 赞同：0
> 
> 时间：2012-07-03T15:56:43.640
> 
> 标签：java, android

有谁知道Java中是否有与`NotifyPropertyChanged`C#类似的东西？我一直在寻找，没有正确的答案。

这是senerio：事实上，我正在开发一个android应用程序。应用程序将通过蓝牙套接字从远程蓝牙设备读取数据。一旦从套接字接收到数据，数据将从解码器（它是一个类）中解码，并将值更新到 UI。但是，我有一个解码器类来解码来自蓝牙设备的数据和一个设法将值显示到 UI 的活动。我需要将解码器的解码值传递给 UI。我想我需要一个 notifypropertychanged 事件，这样当解码中有一些更新的值时，它会通知 ACTIVITY 类来更新 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:25:15.913

纯 Java（不是特定于 Android）确实有一个接口，通常用于 bean 来处理您可以使用的属性更改事件。涉及的类是：

*   `PropertyChangeSupport`是您为了在 setter 方法中触发更改通知而扩展的类。
*   `PropertyChangeListener`实例注册并监听更改事件。
*   `PropertyChangeEvent`对象封装了随更改传递的数据。

[这是 Oracle 文档中的一篇文章](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)，更详细地描述了该接口。

# php - 来自数组 php 的匹配模式

> ID：11314748
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:56:47.340
> 
> 标签：php, arrays, pattern-matching, match

我有一个数组，例如这个例子：

```
Array
(
    [0] => cinema
    [1] => school
    [2] => college
    [3] => social
    [4] => cinema
    [5] => School
    [6] => COllEGE
    [7] => Ccccccc
) 
```

我只想要从“C”或“S”开始的整个单词一次，单词中的重复字符是允许的，无论它们是大写还是小写

示例输出：

```
cinema
college
ccccccc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:10:35.317

使用[`array_filter`](http://php.net/manual/fr/function.array-unique.php)简单的过滤器（正则表达式或`$val[0] == "c"`例如）和[`array_unique`](http://php.net/manual/fr/function.array-unique.php)

这是一个示例（未测试）：

```
$data = array(...data...);

function check_value($val) {
  return preg_match('/^c/i', $val);
}

$output = array_unique(array_filter($data, 'check_value')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:08:12.150

[数组函数](http://us2.php.net/manual/en/book.array.php)的php手册列表和[字符串函数](http://us2.php.net/manual/en/book.strings.php)的列表可能有用：

```
<?php
  $arr =  array ( 'cinema', 'school', 'college', 'social', 'cinema', 'School', 'COllEGE' );
  $massaged_array = massage($arr);
  $result = array_count_values($massaged_array);
  foreach ($result as $key => $value) {
    if (substr_compare($key, 'C', 0, 1) || substr_compare($key, 'S', 0, 1)){
      echo $key;
    }
  }    

  function massage ($arr) {
    $result = array();
    foreach ($arr as $value) {
      $result[] = strtolower($value);
    }
    return $result;
  } 
```

# c++ - 如何使用 TreeView_SortChildrenCB 的示例

> ID：11314749
> 
> 赞同：0
> 
> 时间：2012-07-03T15:56:47.813
> 
> 标签：c++

雷蒙德陈写道：

> “`TreeView`公共控件不支持将项目移动到新的父级。如果你想>移动一个项目相对于它的兄弟姐妹（但保持在同一个父级下），你可以使用 >`TreeView_SortChildrenCB`并传递一个自定义排序函数，该函数对子级排序你>想要的方式。”

是否有任何地方确切地说明如何`TreeView_SortChildrenCB`根据任意顺序调用排序（例如，排序双精度数或字符串）？对于经验丰富的 C++ 程序员但不熟悉此功能的人来说，该文档一目了然。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:17:12.447

首先，您填充 TVSORTCB 的一个实例。hParent 应该是您希望在其下排序的树中的项目，lpfnCompare 应该是一个看起来像这样的静态函数

```
int CALLBACK CompareFunc(LPARAM lParam1, LPARAM lParam2, LPARAM lParamSort)
{
    /*your casting of lParams and sorting code here*/
} 
```

该函数的目的是确定 lParam1 是否“小于”lParam2。

结构中的 lParam 值是您希望作为回调 (lParamSort) 的第三个参数传递的任何值，可以为 0

然后将该结构实例的地址作为 TreeView_SortChildrenCB 的第二个参数传递

传递给回调 (lParam1/2) 的 2 个参数是与插入到树中的每个项目相关联的值。在大多数（如果不是所有）常用控件上，您可以将 lParam 值与控件中的每个可选项目相关联。[在这种情况下，这是您传递给 TreeView_InsertItem ( http://msdn.microsoft.com/en-us/library/windows/desktop/bb773898(v=vs.85)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773898%28v=vs.85%29.aspx)的 TVINSERTSTRUCT 中 TVITEM 结构中的 lParam 值。 [.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773898%28v=vs.85%29.aspx) )

通常这只是一个包含字符串或其他可比较结构的表的索引。如果您将 TVSORTCB 的 lParam 设置为指向该表，则该表可能可以通过将回调的第三个参数转换为该表结构来访问。

抱歉，如果不清楚。win32 api 倾向于过度使用 lParam 机制来将数据与 GUI API 中的几乎每个句柄相关联。不要陷入分配字符串/结构并将新内存地址分配给树项的 lParam 的陷阱。如果您未能删除树中每个项目的分配，您将泄漏内存。

# gnuplot - 用 gnuplot 拟合直线

> ID：11314751
> 
> 赞同：2
> 
> 时间：2012-07-03T15:56:54.033
> 
> 标签：gnuplot

我想使用 gnuplot 为许多曲线获取一次多项式方程 (F(x)=a*x+b) 的拟合参数。一些曲线精确地表示为直线。

例如，如果我的数据看起来像

```
1 1
2 2
3 3
4 4 
```

可以用 f(x)=x (参数 a=0, b=0) 来表示。

但是下面的gnuplot代码

```
# regression line
f(x) = a*x + b
fit f(x) './test.dat' u 1:2  via a, b 
```

无法计算适合参数，给出以下消息

```
Singular matrix in Invert_RtR 
```

更新：如果我为拟合函数定义迭代次数，gnuplot 似乎不会“崩溃”

```
FIT_MAXITER = 1
# regression line
f(x) = a*x + b
fit f(x) './test.dat' u 1:2  via a, b 
```

它应该是 a=1 和 b=0。但是 gnuplot 给出了

```
Final set of parameters            Asymptotic Standard Error
=======================            ==========================

a               = 0.989067         +/- 0.004339     (0.4387%)
b               = 0.0761393        +/- 0.02692      (35.36%) 
```

我如何“强制”gnuplot 计算 a 和 b 的正确值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:31:26.207

我找到了两个解决方案：

1）为您的拟合函数添加一个微小的偏移量：

```
f(x) = a*x + b + 1e-9 
```

这可以防止奇点问题，并导致完全正确的拟合（a = 1，b=-1e-9）。

2）完全消除b参数

```
f(x) = a*x 
```

这假设您的拟合线将全部通过 0，这当然可能不是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:24:11.293

正如我所看到的，问题可能是`f(x)`可以完全适合数据。如果向任何数据**添加任何非零值**，则不会出现错误。在现实生活中，这种精确的拟合根本不会发生（你有噪音）。无论如何，不​​管 gnuplot 说“拟合期间的错误”，似乎 gnuplot 正确地拟合了函数。

通过添加您的解决方案`FIT_MAXITER = 1`可能是一种解决方法。您为 FIT_MAXITER 定义的值越高，您获得的拟合效果就越好。但是如果你给它的值太高，拟合就会很精确（误差会小于数字精度）。

尝试拟合`f(x)`您的真实数据并告诉我们您得到了什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T09:15:11.313

你有几个选择：

*   用 替换你的变量`b`，`(b+1)`然后从结果中减去 1。这样，您的变量不会消失，当 gnuplot 算法发现数字错误已达到零时，它将成功拟合并退出而不会出现错误消息。

*   给 一个很小的起始值`b`。

拟合的一般规则：您的参数需要具有相同的数量级，并被初始化为正确的数量级。

# winforms - 图像未在 Winforms 中显示

> ID：11314754
> 
> 赞同：0
> 
> 时间：2012-07-03T15:57:11.387
> 
> 标签：winforms, image, resources

我正在使用 Winforms (C#.NET)。当我将资源（图像）添加到资源查看器时，我可以看到它们。

![在此处输入图像描述](../Images/0ee325cf5f45d8ace26412ff4a8bfbf7.png)

但是当我将它们添加到表单时，只有灰色背景可见 - 图像不可见。

![在此处输入图像描述](../Images/0ec48c117d7799601ce42bec93335070.png)

但是当从本地资源加载图像时，它显示得很好。我认为问题出在项目资源文件上。我有事吗？？

* * *

编辑：这是设计器代码...

```
 <data name="addemployee" type="System.Resources.ResXFileRef, System.Windows.Forms">
<value>..\Resources\addemployee1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>

</data>
  <data name="addmovie" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\addmovie1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="buytickets" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\buytickets1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="changepassword" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\changepassword1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="customerregistration" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\customerregistration1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="deleteemployee" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\deleteemployee1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="movietheater" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\movietheater1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="welcomeadmin" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\welcomeadmin1.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="welcomeform3" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\welcomeform31.png;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data>
  <data name="welcomeform4" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\welcomeform41.jpg;System.Drawing.Bitmap, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:32:42.460

问题是 Visual Studio 的错误。尝试重新启动将对此有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:06:34.163

尝试将图像的属性更改为资源而不是内容并试一试

# objective-c - UIViewController 实例的 CGRectMake

> ID：11314756
> 
> 赞同：0
> 
> 时间：2012-07-03T15:57:14.327
> 
> 标签：objective-c, xcode, uiviewcontroller

`UIViewController`我知道在另一个中显示 a 是不明智的，`UIViewController`但我不知道该怎么做。我有一个 3D 视图控制器 ( `ThreeDViewController`)，它显示一个 3D 对象并允许用户旋转和放大对象。我希望能够对`ThreeDViewController`仍然允许在我的`SideBySideViewController`.

```
 self.ViewInstance = [[ThreeDViewController alloc]init];
  [self.view addSubview:self.ViewInstance.view]; 
```

这就是我到目前为止所拥有的，但它只导入了它，`UIViewController`所以它占据了整个屏幕，我想要一个固定大小的盒子。并且`initWithFrame`不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:51:09.463

```
float scaleFactor = 0.5;
    CGRect temp = CGRectMake(self.ViewInstance.view.frame.origin.x, self.ViewInstance.view.frame.origin.y,self.ViewInstance.view.frame.size.width*scaleFactor, self.ViewInstance.view.frame.size.height*scaleFactor);
    self.ViewInstance.view.frame = temp; 
```

# javascript - 我应该如何从 html 调用 javascript 类方法？

> ID：11314765
> 
> 赞同：0
> 
> 时间：2012-07-03T15:57:49.817
> 
> 标签：javascript, class, object

我有一个javascript类如下：

```
function Apple (type) {
    this.type = type;
    this.color = "red";
}

Apple.prototype.getInfo = function() {
    return this.color + ' ' + this.type + ' apple';
}; 
```

现在我想从我的 html 文件中调用方法 getinfo 来处理事件。说我有一个像下面这样的 div：

```
<div ... onmouseover="getinfo()"></div> 
```

现在我知道上面不是调用 getinfo 的正确方法。那么最好的方法是什么？

一种方法可能如下，我在 windowonload() 调用中定义了一个类对象，并使用该对象调用方法 getinfo()。但是，如果我有很多用于一个大项目的类和很多对象怎么办。然后我需要在 windowonload() 调用中定义每个对象，这对我来说似乎不正确。必须有一种方法可以动态创建对象。请指导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:03:34.560

Declare your *class*:

```
function Apple (type) {
    this.type = type;
    this.color = "red";
}

Apple.prototype.getInfo = function() {
    return this.color + ' ' + this.type + ' apple';
}; 
```

Create an instance of it:

```
var apple = new Apple("pink lady"); 
```

Then play with it:

```
<div ... onmouseover="alert(apple.getInfo())"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:04:17.153

要调用该方法，您需要创建对象的实例，例如：

```
new Apple('Granny Smith') 
```

您可以将对象的引用保存在变量中，并使用该变量调用方法：

```
var green = new Apple('Granny Smith');
var info = green.getinfo(); 
```

或者您可以即时创建对象并直接调用该方法：

```
var info = new Apple('Granny Smith').getinfo(); 
```

通常，在页面加载时创建对象的实例并稍后使用它是有意义的。

# java - OnNewIntent 不显示 Toast

> ID：11314768
> 
> 赞同：1
> 
> 时间：2012-07-03T15:57:54.693
> 
> 标签：java, android

> **可能重复：**
> [在 Android 框架中显示 Toast 通知](https://stackoverflow.com/questions/11304267/displaying-a-toast-notification-in-android-framework)

我有一个活动，在 onResume 中有以下代码：

```
super.onResume();
Intent intent = new Intent(this, this.getClass());
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
nfcAdapter.enableForegroundDispatch(this, pendingIntent, null,null); 
```

在 onNewIntent(Intent intent) 函数中，我有：

```
super.onNewIntent(intent);
setIntent(intent)
..
...

Toast.makeText.... 
```

但是 Toast 没有出现 - 有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:01:13.413

你可以试试这个：

```
CharSequence text = "Your Text";
int duration = Toast.LENGTH_LONG;
Toast toast = Toast.makeText(getContext(), text, duration); 
```

然后`toast.show();`只要你想显示你的信息就使用它。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:10:54.260

> 但是 Toast.makeText 没有出现 - 有人可以解决这个问题吗？

很可能您忘记了调用`show()`方法。

```
Toast.makeText(getApplicationContext(), "Hello", Toast.LENGTH_SHORT).show(); 
```

# php - 如何在多个表中使用关键字进行搜索

> ID：11314770
> 
> 赞同：0
> 
> 时间：2012-07-03T15:57:58.913
> 
> 标签：php, mysql, codeigniter

我的数据库书中有三个表，作者，出版...我希望用户可以在三个表中搜索，如果他写了任何相关的单词。如果在 book 表中找不到相同的单词，它将在另一个表中搜索，依此类推……我这样做了，但有些事情错了，我想在一个 mysql 句子中找到它。请任何人帮助我

```
function getsomeword($keyword) {
    $result1 = $this->db->query("SELECT bo_id,bo_name,bo_state,bo_about FROM d_book where (bo_name like '%$keyword%' or bo_about like '%$keyword%') and bo_state = '1'");
    $result1 = $result1->num_rows();
    $result2 = $this->db->query("SELECT au_id,au_name,au_state,au_info FROM d_author where (au_name like '%$keyword%' or au_info like '%$keyword%') and au_state = '1'");
    $result2 = $result2->num_rows();
    $result3 = $this->db->query("SELECT pub_id,pub_name,pub_state,pub_info FROM d_publishing where (pub_name like '%$keyword%' or pub_info like '%$keyword%') and pub_state = '1'");
    $result3 = $result3->num_rows();
    return $result1 + $result2 + $result3;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:03:40.620

您正在寻找 UNION 关键字：

```
SELECT ...
UNION [ALL | DISTINCT] SELECT ...
[UNION [ALL | DISTINCT] SELECT ...] 
```

[http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

不要忘记清理您的输入，好像您将`$keyword`值放入查询中而之前没有转义/清理它。您应该研究`PDO::prepare`以防止 SQL 注入 (http://www.php.net/manual/fr/pdo.prepare.php)。

# javascript - 谷歌脚本：如何从服务器处理程序关闭 ui，而另一个函数正在运行

> ID：11314772
> 
> 赞同：0
> 
> 时间：2012-07-03T15:58:21.900
> 
> 标签：javascript, google-apps-script, google-apps

我正在尝试打开一个 UI，它向用户询问两个变量，然后在“ok”上，关闭 ui，并以这两个变量作为参数执行一个函数......

我的问题是 ui 保持打开状态，并且来自 serverhandler 的代码正在循环执行，直到 ui 打开。如果我在我的代码中看不到任何循环，如果我在没有 ui 的情况下直接执行相同的函数，它运行良好......我错过了我的处理程序上的一些东西？

```
 function doGet() {
  var app = UiApp.createApplication();

  var mygrid = app.createGrid(3, 2);
  mygrid.setWidget(0, 0, app.createLabel('Date de début:'));
  mygrid.setWidget(0, 1, app.createDateBox().setId('dateA'));
  mygrid.setWidget(1, 0, app.createLabel('Date de fin:'));
  mygrid.setWidget(1, 1, app.createDateBox().setId('dateB'));

  var mybutton = app.createButton('OK');
  mybutton.setId("mybutton");
  var mypanel = app.createVerticalPanel();
  mypanel.setId('mypanel');
  mypanel.add(mygrid); 
  mypanel.add(mybutton);
  app.add(mypanel);

  var handler = app.createServerHandler('summaryOnDemand');
  handler.addCallbackElement(mypanel);
  mybutton.addClickHandler(handler);

  return app;
}

function summaryOnDemand(e) {
  var app = UiApp.getActiveApplication();
  var dateA = e.parameter.dateA;
  var dateB = e.parameter.dateB;
  var panel = app.getElementById('mypanel');
  panel.setVisible(false);
  app.close();
 //   var mydoc = SpreadsheetApp.openById("0AiK_IybPWcGcdEV5V2JQUHhtUHp1dEhEN3NuQjdrVWc");

  var file = summary(dateA,dateB,true);
  var folder = DocsList.getFolderById("0ByK_IybPWcGcX1lUTlRET0dQVXc");
  file.addToFolder(folder);
  MailApp.sendEmail(Session.getActiveUser().getEmail(),"Rapport réclamation à la demande","Le document ce trouve dans google drive à présent, pour y accéder directement : " + file.getUrl())

  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:23:30.417

Waqar 的回答确实是正确的，当它作为 web 应用程序运行时，您无法关闭 UI，但如果他建议切换到“电子表格模式”的解决方案不符合您的要求，则还有另一种可能性。

简而言之，您可以将所有元素设置为“不可见”并显示确认用户请求执行的标签。这是实现该目标的可能代码：

```
 function doGet() {
  var app = UiApp.createApplication();

  var mygrid = app.createGrid(3, 2);
  mygrid.setWidget(0, 0, app.createLabel('Date de début:'));
  mygrid.setWidget(0, 1, app.createDateBox().setId('dateA'));
  mygrid.setWidget(1, 0, app.createLabel('Date de fin:'));
  mygrid.setWidget(1, 1, app.createDateBox().setId('dateB'));

  var mybutton = app.createButton('OK');
  mybutton.setId("mybutton");
  var mypanel = app.createVerticalPanel();
  mypanel.setId('mypanel');
  mypanel.add(mygrid);
  var label = app.createHTML('<BR><BR>Your request is being processed, <BR><BR>thanks for submitting').setId('Label').setStyleAttribute('padding', '15').setVisible(false).setWidth('300').setHeight('300');// adjust dimensions to your needs  
  mypanel.add(label)
  mypanel.add(mybutton);
  app.add(mypanel).add(label);

  var handler = app.createServerHandler('summaryOnDemand');
  handler.addCallbackElement(mypanel);
  mybutton.addClickHandler(handler);
   var Chandler = app.createClientHandler();
   Chandler.forTargets(mygrid,mybutton).setVisible(false)
   mybutton.addClickHandler(Chandler)        
  return app;
}

function summaryOnDemand(e) {
  var app = UiApp.getActiveApplication();
  var Label = app.getElementById('Label');
  Label.setVisible(true);// show the masking label with message
  var dateA = e.parameter.dateA;
  var dateB = e.parameter.dateB;
  return app
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:07:01.733

您不能关闭 UI 以响应`UiApp`. `UiApp`不能与浏览器对象交互。 `app.close;`仅当电子表格中包含的 Apps 脚本且未作为服务发布时才有效。你修改的代码应该是这样的

```
 function doGet() {
var doc = SpreadsheetApp.getActiveSpreadsheet();
  var app = UiApp.createApplication();

  var mygrid = app.createGrid(3, 2);
  mygrid.setWidget(0, 0, app.createLabel('Date de début:'));
  mygrid.setWidget(0, 1, app.createDateBox().setId('dateA'));
  mygrid.setWidget(1, 0, app.createLabel('Date de fin:'));
  mygrid.setWidget(1, 1, app.createDateBox().setId('dateB'));

  var mybutton = app.createButton('OK');
  mybutton.setId("mybutton");
  var mypanel = app.createVerticalPanel();
  mypanel.setId('mypanel');
  mypanel.add(mygrid); 
  mypanel.add(mybutton);
  app.add(mypanel);

  var handler = app.createServerHandler('summaryOnDemand');
  handler.addCallbackElement(mypanel);
  mybutton.addClickHandler(handler);

  doc.show(app);
} 
```

# google-app-engine - 使用 openid 检查用户是否在 appengine 应用程序中被禁用

> ID：11314774
> 
> 赞同：1
> 
> 时间：2012-07-03T15:58:33.633
> 
> 标签：google-app-engine, openid, python-2.7

我有一个用 Google App Engine (Python 2.7) 编写的应用程序，用户可以使用 OpenID 进行身份验证。`disabled`根据我在`UserProfile`表格上的一个字段，我希望能够禁用对其中一些用户的访问。

是否可以在 OpenID 身份验证中添加一个步骤，以便在往返 OpenID 提供程序之后检查用户是否处于活动状态，然后再将其转发到`continue`参数的值？还是有其他解决方法？

# objective-c - Objective-C ARC 和实例变量 iOS SDK

> ID：11314775
> 
> 赞同：8
> 
> 时间：2012-07-03T15:58:38.983
> 
> 标签：objective-c, ios

我们是否应该将我们希望保留的所有实例变量转换为私有属性，还是我遗漏了一些明显的东西？

```
@interface SomethingElse : Something  {

    NSMutableArray *someArray;

} 
```

在此示例中， someArray 在具有 [NSMutableArray initWithObject:someObject] 的方法中被初始化，但未保留。

我的特殊情况是我正在更新游戏，有很多实例变量，所以我想确保我这样做是为了未来版本的 sdk。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T16:12:03.793

> 我们是否应该将我们希望保留的所有局部变量转换为私有属性，还是我遗漏了一些明显的东西？

首先，您在示例中显示的变量是实例变量，而不是局部变量。局部变量在代码块内声明（例如在函数或方法内，或在某些子块内，例如条件语句的主体内），并且其生命周期仅限于声明它们的块的执行. 实例变量在类中声明；该类的每个*实例*都有自己的该类声明的实例变量的副本。

其次，不，您不需要将所有实例变量都转换为属性。[在 ARC 下，实例变量默认被视为强引用。](https://developer.apple.com/library/archive/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW16)属性实际上只是一个承诺，即类为某些访问器提供某些语义。仅仅拥有一个实例变量并不意味着您必须为该 ivar 提供访问器。（有些人可能会说你*应该*这样做，但你不必这样做。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:12:32.333

@property 与实例变量相同，除非您使用默认存储修饰符以外的其他修饰符，该修饰符对对象来说很强大。例如，如果您想`@property (copy) NSString *s;`使用实例变量并记得在每次设置变量时调用 copy，或者使用 @property（这更容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:02:30.330

ARC's version of `retain` is called `strong`.

Basically, you would declare it using something like:

```
@property (strong) NSMutableArray *someArray; 
```

See [What does the "strong" keyword do](https://stackoverflow.com/questions/6613186/what-does-the-strong-keyword-do) for details.

It's generally better to use properties instead of local variables, because the properties get you accessors/setters for "free", and are generally easier to use.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:44:41.960

您在其他一些评论中描述了 BAD_ACCESS 问题。这里还有其他事情发生。在 ARC 中，除非有其他条件，否则您的 ivars 很强大（在非 ARC 中，它们不会代表您发布）。

例如，此 ARC 代码运行良好，没有 BAD_ACCESS，因为您在对其他答案的评论中报告：

```
@interface ArcTestViewController ()
{
    NSMutableArray *_someArray;
}
@end

@implementation ArcTestViewController

- (void)dealloc
{
    _someArray = nil;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _someArray = [[NSMutableArray alloc] initWithObjects:@"Mo", @"Larry", @"Curly", nil];
}

- (IBAction)checkIvarTouchUpInside:(id)sender 
{
    NSLog(@"%s _someArray = %@", __FUNCTION__, _someArray);
}

@end 
```

您可能必须向我们展示您获得 BAD_ACCESS 的示例，因为它必须是其他东西。

在回答“属性”或“ivar”问题时，虽然我对“始终使用属性”的论点表示同情，但我个人将属性用于需要提供外部访问器的任何东西，否则我会使用私有 ivars（不在.h，而是在 .m 文件的私有接口中）。这使得我的 .h 文件中的公共接口在几个月后返回时非常干净且易于理解。如果您确实采用“始终使用属性”的方法，我只建议您对这些属性的公开声明应尽可能限制（如果可以，将属性设为私有，如果不这样做，则将属性的公开声明设为只读） '不需要提供读写访问等）。

顺便说一句，*Cocoa 编码指南的*[命名属性和数据类型](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html)是最佳实践的一个很好的参考。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T16:07:46.590

对于 Obj-C 2.0 及更高版本，似乎没有什么理由使用 iVars。我个人从来没有用过一个。属性只是为您做一切！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T16:30:24.987

谢谢大家的回复。

如果我调用需要对象的方法（使用 cocos2d 游戏引擎方法）：

```
[self schedule:@selector(someMethod) interval:3.0]; 
```

如果我直接调用它而不将它放在 cocos2d 调度程序中，则该对象被取消引用：

```
[self someMethod]; 
```

然后仍然有一个有效的指针。只是为了测试，我保留了它并且它一直存在。

所以现在的问题是我们如何强制保留以防止 ARC 认为我们已经完成并释放它？

将实例变量更改为私有属性可以安全地进行，因此我们将以此作为答案。*

# web-services - 使用我的网络服务的客户如何绕过他们的 ISP 的透明代理缓存来确保他们的请求到达我的服务器？

> ID：11314777
> 
> 赞同：9
> 
> 时间：2012-07-03T15:58:46.510
> 
> 标签：web-services, http, proxy, transparentproxy

我编写了一个 RESTful Web 服务，它只被设备使用，而不是浏览器。这些设备通过所有者现有的家用路由器访问互联网，并通过每隔 30 秒通过路由器发送 HTTP 请求来与 Web 服务通信。这些请求主要是“轮询”请求，以查看 Web 服务是否有设备的任何新信息。

我想防止任何 ISP 透明代理拦截请求并返回缓存的响应。我已经读过这样做的一种方法是将随机查询字符串附加到请求的 URL 的末尾，以欺骗代理认为这是一个唯一的请求。例如：

```
http://webservicedomain.com/poll/?randomNumber=384389 
```

我有能力做到这一点，但这是最好的方法吗？有点像黑客。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T13:40:01.840

您应该使用[HTTP 的 Cache-Control 标头来](http://pretty-rfc.herokuapp.com/RFC2616#header.cache-control)实现这一点。

在回复中，您应该发送：

```
Cache-Control: private, must-revalidate, max-age=0 
```

*   **private** - 表示响应消息的全部或部分是针对单个用户的，并且不能由共享缓存缓存。
*   **max-age=0** - 表示客户端愿意接受年龄不大于 0 秒的响应。即响应立即过时。
*   **must-revalidate** - 当缓存接收到的响应中出现时，该缓存在它变得陈旧后不得使用该条目来响应后续请求，而无需首先使用原始服务器重新验证它。

您还应该为传统的 HTTP/1.0 中间服务器发送一个[Pragma 标头：](http://pretty-rfc.herokuapp.com/RFC2616#header-pragma)

```
Pragma: no-cache 
```

相关阅读：

*   HTTP 规范的[缓存章节](http://pretty-rfc.herokuapp.com/RFC2616#caching)；
*   [Mark Nottingham 的 HTTP 缓存教程](http://www.mnot.net/cache_docs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:32:44.807

您可以尝试使用加密连接。我认为缓存代理不应该存储来自加密通信的响应。

一种解决方案可能是在您的服务器上配置 HTTPS，另一种可能是将客户端配置为使用[SSL 代理之一](http://proxy.org/ssl_proxies.shtml)向您的 HTTP 服务器发送请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:34:40.497

当然，使用适当的 Cache-control 和其他标头，使用 POST 和瞧！这可以解决你所说的问题。

你可能想看这个——[关于缓存的讨论](https://stackoverflow.com/q/626057/559849)

然后也可以避免额外的参数传递。

# lua - 在 lua 中设置的变量上运行代码

> ID：11314781
> 
> 赞同：1
> 
> 时间：2012-07-03T15:58:55.103
> 
> 标签：lua

我正在用lua编写脚本，我需要做的是每次设置变量时运行一段代码。

我的代码是：

```
plane = {}
plane.status = "foo"
plane.status = "bar" 
```

每次将值分配给平面中的变量时，我都想运行它

```
print "status=" + <value> 
```

我该怎么办？我认为它与 __newindex 有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:21:57.063

是的，您为它设置了一个*代理*表`plane`并为其设置了一个`__newindex`元方法。

```
function managed(t,f)
        return setmetatable({},{__index=t, __newindex=f})
end

plane = managed({},print)
plane.status = "foo"
plane.status = "bar" 
```

实际上，在元方法中`__newindex`，您将使用`rawset`.

# django - 使用表单扩展 Django 模板

> ID：11314786
> 
> 赞同：1
> 
> 时间：2012-07-03T15:59:15.520
> 
> 标签：django, django-forms, django-templates

我有一个简单的笔记，我想将我的应用程序的一部分合并到一个 html 页面中。一页有提交笔记的表格，而另一页显示结果。我想在同一页面上同时显示表单和结果。

我正在尝试使用 Django 的模板继承来实现这一点，但结果并没有按计划工作。当以我的方式（显然不正确）使用它时，结果不显示，只显示表单中的“提交”按钮；不是实际的形式。

这应该相当简单，但我已经尝试了几种变体并研究了几个小时的潜在解决方案和模板文档，但没有成功。

如果有人可以说明我做错了什么，将不胜感激。

这是带有基本表单模板的代码：

```
{% extends 'base.html' %}
{% block page_title %}Notebook{% endblock %}
{% block headline %}Notebook{% endblock %}
{% block content %}
<h2>Headline</h2>
    <div class="row">
    <div class="span8">

<form action="" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" class="btn btn-primary" value="Submit" />
</form>
    </div>

    </div>

{% endblock %} 
```

这是尝试的扩展形式，理想情况下包含形式和结果：

```
{% extends 'report/write_note.html' %}

{% block extendscontent %}
    <div class="span4 offset8">
            {% if notes %}
            {% for note in user.notes.all reversed %}
             <h3>{{ note.title }}</h3>
             <p>{{ note.date }}</p>
             <p>{{ note.copy }}</p>
            {% endfor %}

            {% else %}
            <p>You have no notes stored.</p>

           {% endif %}
     </div>
 {% endblock extendscontent %} 
```

以下是观点：

```
@login_required
def submit_note(request):
    if request.method == 'POST':
        notes_form = NotesForm(request.POST, request.FILES)
        if notes_form.is_valid():
            new_note = notes_form.save(commit=False)
            new_note.author = request.user
            new_note.save()
            return HttpResponseRedirect( "" )
    else:
        notes_form = NotesForm()
    return render_to_response("report/write_note.html", {'form': notes_form},   context_instance=RequestContext(request))

@login_required
def all_notes(request):
    all_notes = Notes.objects.all().order_by('-date')
    paginate = paginated_stories(request, all_notes)
    return render_to_response("report/notes.html",
                           {'notes': paginate},
                            context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:19:45.787

我认为通过结合您的观点，您可以在同一页面上同时拥有表单和注释。即类似的东西 -

```
@login_required
def notes_view(request):
    all_notes = Notes.objects.all().order_by('-date')
    paginate = paginated_stories(request, all_notes)
    # form processing and other code
    # -------------------------------
    # return both form and notes to your template context
    return render_to_response("report/notes.html",{
        'notes': paginate,
        'form': notes_form,
    },context_instance=RequestContext(request)) 
```

或者您可以创建一个自定义`templatetag`来呈现注释或 notes_form

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:07:25.570

尝试这个：

```
{% extends 'report/write_note.html' %}

{% block content %}
    {{ block.super }}

    <div class="span4 offset8">
            {% if notes %}
            {% for note in user.notes.all reversed %}
             <h3>{{ note.title }}</h3>
             <p>{{ note.date }}</p>
             <p>{{ note.copy }}</p>
            {% endfor %}

            {% else %}
            <p>You have no notes stored.</p>

           {% endif %}
     </div>
 {% endblock %} 
```

当您覆盖一个块时，您只需覆盖该块，您不会向它添加“扩展”。并且，`{{ block.super }}`可用于从块的父版本中获取内容。

# r - GEOquery 库中的 sql 查询

> ID：11314787
> 
> 赞同：0
> 
> 时间：2012-07-03T15:59:21.337
> 
> 标签：r

我正在尝试从 GEO db 下载有关“乳腺癌细胞系时间序列基因表达谱”实验的所有条目。我正在使用 GEOquery R 包，我提交的查询如下：

```
> sql <- paste("SELECT DISTINCT gse.title,gse.gse", "FROM", 
               " gsm JOIN gse_gsm ON gsm.gsm=gse_gsm.gsm", 
               " JOIN gse ON gse_gsm.gse=gse.gse", 
               " JOIN gse_gpl ON gse_gpl.gse=gse.gse", 
               " JOIN gpl ON gse_gpl.gpl=gpl.gpl", "WHERE", 
               " gsm.molecule_ch1 like '%total RNA%' AND", 
               " gse.title LIKE '%breast cancer cell lines time series gene expression profiles%' AND",  
               " gpl.organism LIKE '%Homo sapiens%'",  sep = " ")

>rs <- dbGetQuery(con, sql) 
```

现在，输出是 1 个数据集。它似乎太少而且太错误了，因为我们当然知道已经在乳腺癌细胞系上进行了很多时间序列实验。我想，我在我的 sql 查询中可能在“标题”中犯了一个错误。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:54:31.583

您的查询查找子字符串 `breast cancer cell lines time series gene expression profiles`：单词必须完全按此顺序出现，中间没有任何内容。例如，您可以尝试拆分它（您可能需要进一步拆分它）：

```
 gse.title LIKE '%breast cancer cell lines%'
AND gse.title LIKE '%time series%'
AND gse.title LIKE '%gene expression profiles%' 
```

对于某些数据库，`LIKE`区分大小写：在这种情况下，`ILIKE`可能更可取。

# java - Amazon SWF 初学者 - 如何开始执行一个工作流程循环

> ID：11314793
> 
> 赞同：0
> 
> 时间：2012-07-03T15:59:48.687
> 
> 标签：java, amazon-web-services, amazon-swf

我正在查看可用于 Amazon SWF 和 Flow Framework（即 Java）的示例——在这些示例中，我注意到有一个带有“main”的类可以启动工作流执行——还有其他类似的带有“main”的类启动工作流工作者和活动工作者（即工作流主机和活动主机）。

这是否意味着要运行工作流，我必须将所有 3 个类的执行代码放入我的 void main 中？即我必须自己启动工作流主机、活动主机并启动工作流吗？还是我只需要以指定格式定义 WorkFlow Host 和 Activity Host 类，然后使用 Workflow 客户端工厂启动工作流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:27:24.613

SWF 工作流中包含三个组件 - Worker、Activity 和 Client。工作流宿主类启动工作流工作者，而活动宿主启动活动工作者。工作流和活动工作者必须始终启动并运行以处理各种工作流任务。因此，您必须将这些类包含在您的`void main`.

客户端（使用工作流客户端工厂）可以在需要时请求启动工作流。

例如，为简单起见，可能已将所有三个类包含在同一个主方法中，但理想情况下，客户端应该是不同应用程序/主程序的一部分，它可以随时调用启动/结束工作流，而活动和工作人员应该连续运行。

# xamarin.ios - MonoDev 部署问题：AMDeviceInstallApplication 返回：0xe800002d

> ID：11314795
> 
> 赞同：2
> 
> 时间：2012-07-03T15:59:49.707
> 
> 标签：xamarin.ios

我一直在使用以下工具集开发和部署到各种 iOS 设备而没有问题：MonoDevelop 3.0.3.2 运行时：Mono 2.10.9 (tarball) GTK 2.24.10 GTK# (2.12.0.0) 包版本：210090011 Apple 开发人员工具：Xcode 4.3.2 (1177) Build 4E2002 Monotouch: 5.2.12 Mono for Android 未安装

我将我的一台设备（ipod touch 4G）更新到 iOS 6，以便将内存使用情况与 iOS 5 进行比较。我使用 monoDev 构建应用程序并将其上传到 iOS 6 ipod 但是，XCode 4.3.2 Instruments 无法连接到 iOS 6 设备，所以我下载并运行 XCode 4.5（从桌面）并使用它的 Instruments 来分析我的应用程序。

测试完成后，我使用运行 iOS 5.1.1 的 iPad 重新开始开发，但无法从 MonoDev 进行部署。我使用 Xamarin 示例应用程序 (MediaCapture) 之一进行了测试，结果相同。我尝试“上传到设备”时遇到的错误如下：

/Developer/MonoTouch/usr/bin/mtouch -sdkroot "/Applications/Xcode.app/Contents/Developer" -installdev "/Users/don/Source/Learning/xamarin-monotouch-samples-eb64016/MediaCapture/MediaCapture/bin/ iPhone/Release/MediaCapture.app" 请确保您的设备已连接...已连接到：iPad2 正在初始化文件服务...正在上传应用程序 正在完成文件服务...正在安装应用程序 安装失败：AMDeviceInstallApplication 返回：0xe800002d 应用程序被终止信号：SIGHUP

使用 Organizer 查看 iPad 上的控制台，我看到：

7 月 3 日 10:50:15 未知 mobile_installation_proxy[126]：主要：无法接收来自主机的请求。

错误 0xe800002d 显然是“同步失败”，但我必须使用 iTunes 同步 iPad 时出现问题。

配置文件都很好，因为我可以使用 Organizer 将相同的应用程序安装到 iPad 并且运行良好。使用 XCode 4.3.2 构建和运行示例应用程序可以正常工作。

我试过重新启动一切，但没有帮助。

我认为这个问题一定与我运行 XCode 4.5 的事实有关，但我真的不知道如何。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:35:07.717

这是运行最新的 Xcode 4.5 时发生的问题。系统库 (MobileDevice.framework [1]) 已更新，这会导致 MonoTouch 出现问题（并且由于它是系统库，因此无助于降级 Xcode）。

它将在即将发布的 MonoTouch 5.3.5 测试版中修复，同时您将不得不以某种方式降级您的 MobileDevice.Framework（可能来自您未安装 Xcode 4.5 的另一台机器）。

[1] /System/Library/PrivateFrameworks/MobileDevice.framework

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:41:18.970

Rolf 的回答是正确的，确实为我节省了数小时的时间。谢谢！:)

只是想补充一点，如果您仍然安装了 Xcode 4.3，您可以再次运行 MobileDevice.framework 安装脚本，而不是从另一台机器复制：

> 转到 /Applications/ 并右键单击“Xcode”，然后从弹出菜单中选择“显示包内容”——这将显示 Xcode.app 包的内容。
> 
> 然后进入内容和资源，然后进入包（因此，您的文件路径现在应该是 /Applications/XCode.app/Contents/Resources/Packages/），然后双击“MobileDevice.pkg”安装程序文件。

[从这里](http://iphone-ipad-code.blogspot.com/2012/03/how-install-mobile-device-framework-in.html)引用。

# java - 什么时候应该让应用程序因为 Java 中的异常而崩溃（设计问题）？

> ID：11314796
> 
> 赞同：6
> 
> 时间：2012-07-03T15:59:50.427
> 
> 标签：java, exception, crash

在大多数情况下，可以在 Java 中捕获异常，甚至是未经检查的异常。但是，不一定可以对此做些什么（例如内存不足）。

对于其他情况，我试图解决的问题是设计原则问题。我正在尝试建立一个设计原则或一组规则，指示何时应该放弃异常情况，即使及时发现也是如此。目标是尽量不让应用程序崩溃。

是否有人已经对此进行了头脑风暴并进行了沟通？我正在寻找特定的通用案例和可能的解决方案，或拇指规则。

**更新**

到目前为止的建议：

*   如果数据一致性可能受到损害，请停止运行
*   如果可以删除数据，则停止运行
*   如果您对此无能为力，请停止运行（内存不足...）
*   如果关键服务不可用或变得不可用且无法重新启动，则停止运行

*   方法/服务应该检查它是否可以从稳定状态执行其职责，如果不能，它应该通知用户（日志）并且什么都不做

*   如果必须停止应用程序，请尽可能优雅地降级
*   在数据库事务中使用回滚
*   自定义异常可用于提供有关如何通过处理程序解决情况的提示
*   尽可能多地记录相关信息
*   通知开发商
*   尽可能保持状态和数据的一致性

*   快速修复可能是有害的，在调试时，最好让应用程序崩溃并详细分析导致它的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:50:10.503

Java 和 .Net 的创建者决定使用抛出的异常对象的 TYPE 来确定何时应该捕获它以及何时应该考虑解决它，这个设计决策可能是由 C++ 处理异常的方式推动的。尽管 C++ 异常处理在许多方面都比以前存在的改进了，但它使用异常对象的类型作为确定捕获哪些异常的主要手段并不是它更好的特性之一。

因为异常捕获是由异常类型控制的，所以没有标准的异常方法来指示失败的操作是否改变了系统中任何对象的状态，或者失败是否是由处于损坏状态的对象引起的（与一种状态，虽然调用者可能出乎意料并且与传入的参数不兼容，但被调用的方法会认为它是完全合法的）。在许多情况下，如果为了响应用户请求，系统调用了一个尝试做某事但不能做的方法，但该方法不会对任何对象的状态产生不利影响，并且问题不是由具有损坏状态，通常最好简单地通知用户请求的操作无法执行并继续。很遗憾，没有办法将上述类型的“无害”异常与表示严重系统范围问题的异常区分开来。虽然 99% 的异常可能相对无害，但一小部分是由可能导致打开文档损坏的条件引起的。如果打开的文档已损坏，则程序立即彻底崩溃可能比让它用损坏的副本替换磁盘上的良好副本更好。

如果抛出自定义异常，可能会在异常类型中包含属性，这将允许代码更有用地决定应该对异常执行什么操作。不幸的是，许多抛出的异常，无论是否无害，都不会包含这些属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:12:29.613

应用程序崩溃取决于应用程序的关键级别和部署架构。

例如，如果应用程序从地球控制火箭，则应用程序不应崩溃（不可控情况和数据优先级除外）。

在设计应用程序时，您应该将它们设计为不会删除或更改数据存储中的数据。

得出的结论是，当应用程序崩溃时，没有硬性和快速的方法来制定规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:29:38.450

为什么以及何时让应用程序崩溃并没有特别的规则……我让我的应用程序崩溃的原因如下：

**1.**快速修复可能会产生反作用并且存在潜在风险。在不知道我的代码崩溃的实际原因是什么的情况下，我觉得修复这个错误是不合适的。让应用程序崩溃会导致我的代码出现错误。

**2.**让代码崩溃有助于我更好地理解编程语言和逻辑错误。

这就是我让应用程序崩溃的原因..

# php - 正则表达式：指定组不应该是某个词

> ID：11314798
> 
> 赞同：0
> 
> 时间：2012-07-03T15:59:52.790
> 
> 标签：php, regex

`/^(.+?) (is|was) an? (.+?)$/``preg_match`是我当前对 PHP函数的正则表达式。

但我不希望它与句子匹配：`"what is a dog"`或`"who is a dog"`。所以我必须以某种方式指定“what”和“who”这两个词不应该与第一组匹配。

我该怎么做呢？

谢谢。

编辑：澄清一下，我希望它匹配诸如`"Buddy is an animal"`and之类的句子`"jsbvsjvdhbjsbjhv is a dog"`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:02:36.960

您可以在组之前使用否定的lookbehind `(is|was)`：

```
/^(.+?)(?<!what|who) (is|was) an? (.+)$/ 
```

请注意，我从最后一个子模式中删除了不贪婪的量词 - 因为您希望尽可能多地匹配以到达字符串的末尾，所以告诉它尽可能少地匹配是低效的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T16:13:07.543

```
/^((([^w]|w[^h]|wh[^ao]|wha[^t]|what.|who.).* is)|(.+?) was) an? (.+?)$/ 
```

:)

更正，误解了问题：（`what was a.*`也`who was a.*`应该排除）。所以更简单：

```
/^([^w]|w[^h]|wh[^ao]|wha[^t]|what.|who.).* (is|was) an? (.+?)$/ 
```

# for-loop - VBscript 的递归问题

> ID：11314799
> 
> 赞同：3
> 
> 时间：2012-07-03T15:59:55.033
> 
> 标签：for-loop, recursion, vbscript

我正在尝试在 vbscript 中实现一些递归。

```
Function largest_prime_factor (ByVal num)

    For i = 2 to num/2
        If num mod i = 0 Then   'this number is not prime
            largest_prime_factor (num / i)
        End If
    Next

    largest_prime_factor = num ''if at this point, we have reached the largest prime

End Function 
```

正如你所看到的，它是一个脚本，基本上是为了给我一个数字的最大素数而设计的。但是，当我运行打印时，这个脚本仍然会向我吐回估算的数字。经过调试，我发现脚本确实会进入for循环内的条件，但是它不会递归（即：它将继续运行for循环，然后在那个点之后结束）

关于 VBscript 中的递归，我错过了什么？我也尝试了一些效果

```
largest_prime_factor = largest_prime_factor (num / i) 
```

在条件内部，这也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:34:35.760

在上面发布的代码中，您犯了两个小错误

1.  您已经创建了返回数字的函数，在递归调用它时，您应该在变量“num”中获取该数字以进行进一步处理。
2.  您犯的第二个错误是在获得所需输出后没有退出循环。这会导致进一步循环，直到 i = num & 在所有情况下，您的答案都是 1。

工作代码---

```
Function largest_prime_factor (ByVal num)
 For i = 2 to num/2
        If num mod i = 0 Then   'this number is not prime
              num= largest_prime_factor (num / i)
              Exit For 
        End If
 Next
largest_prime_factor = num ''if at this point, we have reached the largest prime
End Function 
```

# python - 分箱数据

> ID：11314802
> 
> 赞同：1
> 
> 时间：2012-07-03T16:00:02.430
> 
> 标签：python, perl, statistics, bioinformatics

我有一个看起来像这样的数据集

```
-9030   KIR3DX1
-75     SLC12A6
8005    C14orf79
-251    ARAP1
65994   EFNB1
-12111  SLC7A5
-11643  CAMK2G
-19749  PRPS2
-23324  MIR198
10012   LOC100506172
-77     CCDC88A
12171   MMP14 
```

其中第 1 列表示第 2 列中的元素（基因）在任一方向上与 0 的距离（以碱基对为单位）。我想把这些数据放在一个 50 个碱基对的窗口中。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:47:22.330

程序（希望 Perl 没问题）：

```
#!/usr/bin/perl

# Create a histogram of some data

# Denis Howe 2012-07-03 - 2012-07-03 18:40

use strict;
use warnings;

# my $n_bins = 10;
my $width = 50;

# Read lines into @d
my @d = <DATA>; chomp @d;

# Split each line containing a digit into a pair
@d = map [split(/\s+/, $_)], grep /\d/, @d;

# Find range
my $min = 9E9; my $max = -9E9;
foreach (@d)
{
    $min = $_->[0] if ($_->[0] < $min);
    $max = $_->[0] if ($_->[0] > $max);
}

# Round down to multiple of $width
$min = int($min/$width) * $width;

# Ensure there's a bin for max value
# my $width = ($max*1.01 - $min) / $n_bins;
my $n_bins = int(($max - $min) / $width) + 1;

# Allocate data to bins
my @bin;
foreach (@d)
{
    push @{$bin[($_->[0]-$min)/$width]}, $_;
}

# Show content of each bin
foreach (0 .. $n_bins-1)
{
    next unless ($bin[$_]);             # Ignore empty bins
    printf "%6d - %6d", $min + $_*$width, $min + ($_+1)*$width;
    print map("  " . $_->[0] . ":" . $_->[1], @{$bin[$_]}), "\n";
}

__DATA__
-9030   KIR3DX1
-75     SLC12A6
8005    C14orf79
-251    ARAP1
65994   EFNB1
-12111  SLC7A5
-11643  CAMK2G
-19749  PRPS2
-23324  MIR198
10012   LOC100506172
-77     CCDC88A
12171   MMP14
EOF 
```

输出：

```
-23300 - -23250  -23324:MIR198
-19750 - -19700  -19749:PRPS2
-12150 - -12100  -12111:SLC7A5
-11650 - -11600  -11643:CAMK2G
 -9050 -  -9000  -9030:KIR3DX1
  -300 -   -250  -251:ARAP1
  -100 -    -50  -75:SLC12A6  -77:CCDC88A
  8000 -   8050  8005:C14orf79
 10000 -  10050  10012:LOC100506172
 12150 -  12200  12171:MMP14
 65950 -  66000  65994:EFNB1 
```

HtH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:33:43.917

非常简单的单行：

```
perl -MPOSIX=floor -anE'push@{$f{floor($F[0]/50)}},$F[1]}{$,=" ";for(sort{$a<=>$b}keys%f){$i=$_*50;say"$i -",$i+49,": @{$f{$_}}"}' 
```

请注意，此单行代码为测试数据生成正确的输出（例如，查看 -23324 MIR198，它肯定在 -23350 - -23301 中）：

```
-23350 - -23301 : MIR198
-19750 - -19701 : PRPS2
-12150 - -12101 : SLC7A5
-11650 - -11601 : CAMK2G
-9050 - -9001 : KIR3DX1
-300 - -251 : ARAP1
-100 - -51 : SLC12A6 CCDC88A
8000 - 8049 : C14orf79
10000 - 10049 : LOC100506172
12150 - 12199 : MMP14
65950 - 65999 : EFNB1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:03:10.187

```
s='''
-9030   KIR3DX1
-75     SLC12A6
8005    C14orf79
-251    ARAP1
65994   EFNB1
-12111  SLC7A5
-11643  CAMK2G
-19749  PRPS2
-23324  MIR198
10012   LOC100506172
-77     CCDC88A
12171   MMP14
'''

import re
from collections import defaultdict

bin = defaultdict( list )
for distance, gene in re.findall('^(\S+)\s+(\S+)',s,re.M):
    bin[int(distance)//50].append(gene)

print( bin ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:10:18.093

这行得通吗？

```
 from collections import defaultdict

 binner=defaultdict(list)
 with open(datafilename) as f:
     for line in f:
         i=int(line.split()[0])
         binner[i//50].append(line) 
```

我只是将整条线装箱，因为我不知道您实际上想要保留哪些信息（对于混乱的数据集，这有点不清楚）......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T16:15:15.497

我将假设您希望基因名称按碱基对中的距离进行分类：

```
from collections import defaultdict, Counter

bins = defaultdict(Counter)
binsize = 50

with open(datafile) as inf:
    for line in inf:
        data = line.split('<', 1)[0]
        offset, name = data.split()
        bins[int(offset)//binsize][name] += 1 
```

然后

```
keys = sorted(bins)
for key in keys:
    values = ', '.join('{1} {0}'.format(a,b) for a,b in bins[key].most_common())
    print('{:>7} - {:>7} : {}'.format(binsize*key, binsize*(key+1)-1, values)) 
```

在您的样本数据上导致

```
 -23350 -  -23301 : 1 MIR198
 -19750 -  -19701 : 1 PRPS2
 -12150 -  -12101 : 1 SLC7A5
 -11650 -  -11601 : 1 CAMK2G
  -9050 -   -9001 : 1 KIR3DX1
   -300 -    -251 : 1 ARAP1
   -100 -     -51 : 1 CCDC88A, 1 SLC12A6
   8000 -    8049 : 1 C14orf79
  10000 -   10049 : 1 LOC100506172
  12150 -   12199 : 1 MMP14
  65950 -   65999 : 1 EFNB1 
```

# eclipse - Eclipse 插件：调试与导出类路径

> ID：11314804
> 
> 赞同：0
> 
> 时间：2012-07-03T16:00:18.037
> 
> 标签：eclipse, eclipse-plugin, osgi

这个问题是这个问题的后续[问题](https://stackoverflow.com/questions/11125399/bizarre-noclassdeffound-error)。[Paul Webster](https://stackoverflow.com/users/713646/paul-webster)慷慨地帮助我解决了许多问题，但仍然存在一个烦人的问题，而且我相当确定在我*导出*插件时它归结为类路径问题，而不是在我*调试*插件时.

到目前为止，这是我通过从网络上的各种来源收集信息（[此页面](http://ekkes-corner.blogspot.com/2008/09/pde-and-3rdparty-bundles-in-osgi.html)是非常宝贵的资源）得出的可疑信息：

*   插件完全依赖**`Bundle-Classpath`**于 MANIFEST.MF 文件中的。如果在 JRE 系统库、插件依赖项或文件夹或 JAR 中的任何一个中都找不到该类，则会发生`Bundle-Classpath`a `NoClassDefFound`or`NoClassFound`异常。
*   仅用于**`Require-Bundle`**我正在创建的捆绑包。（换句话说，我的工作区中的捆绑包。这意味着，我的`Require-Bundle`列表将非常短。）
*   用于**`Import-Package`**我的捆绑包需要的 3rd-party 包。这个列表可能相当大，这取决于我使用了多少个 3rd-party 包。
*   如果我需要一个 3rd-party 包，但它没有被导出，我需要为它创建一个包并导出该包。然后，在需要它的包中，我需要导入导出包。
*   如果一个包本身包含包内的包并导出它们，切勿将这些包也作为导入包放入清单中。（换句话说，不要重新导出已经被捆绑包导出的包。）

（我会在社区更正时更新上面的信息。）

因此，考虑到所有这些，我重新设计了我的 MANIFEST.MF 文件，使其符合上述规则。当我调试应用程序时，一切都运行良好。找到了所有类，插件按预期运行，但是当我去导出插件时，事情变得很难看。

当我尝试导出插件时，所有项目都编译除了一个。日志文件包含以下消息：

```
# 7/3/12 10:09:57 AM EDT
# Eclipse Compiler for Java(TM) 0.A76_R36x, 3.6.2, Copyright IBM Corp 2000, 2010\. All rights reserved.
----------
1\. ERROR in E:\NotesDev\NotesPlugin\com.auth.lotusplugin.popdlg\src\com\auth\lotusplugin\popdlg\SettingsDialog2.java (at line 0)
    package com.auth.lotusplugin.popdlg;
    ^
The type com.ibm.rcp.swt.swidgets.SCoolBar cannot be resolved. It is indirectly referenced from required .class files
----------
1 problem (1 error) 
```

现在，我确定它`com.ibm.rcp.swt.swidgets.SCoolBar`是由 导出的`com.ibm.rcp.swtex.win32_6.2.2.20100729-1241.jar`，而它也恰好是由 导出的`com.ibm.rcp.jfaceex_6.2.2.20100729-1241.jar`。在我的项目中，我做了以下事情：

1.  通过 Dependencies 选项卡`com.ibm.rcp.jfaceex`作为附加包添加。`build.properties`
2.  在 Dependencies 选项卡上添加`com.ibm.rc.swt.swidgets`为导入包。

尽管如此，当我尝试导出插件时找不到该类。在这一点上，我假设插件在调试时的编译方式与导出时的编译方式之间存在一些根本差异，并且我不知道这种差异是什么。

如果有人可以帮助我解决最后一个问题，我将不胜感激。

以下包括相关部分`MANIFEST.MF`和`build.properties`文件以供参考。

**清单文件**

```
Require-Bundle: com.ibm.lotuslabs.context.service,
 com.ibm.lotuslabs.ui,
 com.SatuitCRM.WebServices
Import-Package: com.ibm.rcp.jface.action,
 com.ibm.rcp.swt.swidgets,
 javax.swing,
 lotus.domino,
 lotus.notes,
 org.eclipse.jface.action,
 org.eclipse.jface.window,
 org.eclipse.swt,
 org.eclipse.swt.events,
 org.eclipse.swt.graphics,
 org.eclipse.swt.layout,
 org.eclipse.swt.widgets,
 org.eclipse.ui.plugin,
 org.osgi.framework
Export-Package: com.auth.lotusplugin.popdlg;
   uses:="com.ibm.rcp.jface.action,
   com.ibm.lotuslabs.context.service.document,
   com.ibm.lotuslabs.ui,
   com.ibm.rcp.jface.action,
   com.ibm.rcp.swt.swidgets,
   com.satuit.core,
   com.SatuitCRM.WebServices,
   javax.swing,
   lotus.domino,
   lotus.notes,
   org.eclipse.jface.action,
   org.eclipse.jface.window,
   org.eclipse.swt,
   org.eclipse.swt.events,
   org.eclipse.swt.graphics,
   org.eclipse.swt.layout,
   org.eclipse.swt.widgets,
   org.eclipse.ui.plugin,
   org.osgi.framework"
Bundle-ClassPath: .,
 com.satuit.core.jar,
 com.ibm.lotuslabs.ui.jar,
 com.ibm.lotuslabs.context.service.jar,
 com.SatuitCRM.WebService.jar,
 lib/activation-1.1.1.jar,
 lib/commons-lang3-3.1.jar,
 lib/mail.jar,
 lib/SatuitCRM_XML_API2.jar 
```

**build.properties**

```
source.. = src/
output.. = bin/
bin.includes = META-INF/,\
               plugin.xml,\
               lib/commons-lang3-3.1.jar,\
               lib/activation-1.1.1.jar,\
               lib/mail.jar,\
               lib/SatuitCRM_XML_API2.jar,\
               .
additional.bundles = com.ibm.rcp.browser.ie,\
                     com.ibm.rcp.jfaceex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:28:48.293

没有明确的答案，但也许这些有帮助：

我*认为*您只需要正确设置目标平台即可。确保您的目标平台包含您需要但不在您的工作区中的所有捆绑包。指定依赖项时，您可以使用 Require-Bundle（或者更好的是 Import-Package），无论该包是在您的工作区还是在您的目标平台中。

对于其余的：

*   从你的包中导出系统包（如 javax.swing）通常是一个坏主意，因为它可能会在以后搞砸分辨率。你真的应该只从那个包中的包中导出东西

*   我对“additional.bundles”结构不太熟悉，它不是标准的 OSGi，我认为你不需要它。

# java - 如何在 Netbeans 中调试多个 JUnit 测试套件？

> ID：11314805
> 
> 赞同：7
> 
> 时间：2012-07-03T16:00:19.153
> 
> 标签：java, debugging, testing, netbeans, junit

我使用 Netbeans 7.0.1（和 JUnit 4）并且有一个 java 项目，其中包含不同包中的多个测试套件。我可以通过 Alt+F6 运行所有测试或右键单击项目并选择“测试”。另外，我可以通过 Ctrl+Shift+F6 单独调试每个测试文件，或者右键单击项目并选择“调试测试文件”。但显然不可能一次调试所有测试文件。如果选择了项目或多个测试文件，并且如果我右键单击项目，则 Ctrl+Shift+F6 不起作用，则没有调试测试文件的选项。

但是在 Eclipse 中，通过右键单击项目和“调试为”->“JUnit 测试”可以轻松实现这样的选项

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T14:16:59.943

我正在使用 netbeans 7.2，它在上下文菜单中有“调试测试文件”选项。但是您必须选择要运行的所有测试文件（CTRL + 左键单击），然后右键单击并选择此选项。这对我来说已经足够好了，但我不知道如何调试所有测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-09T19:35:33.343

调试/测试整个项目我

1.  右键单击项目
2.  选择的属性
3.  选择的动作
4.  更新了具有以下属性的测试项目：

test=${packageClassName}
forkMode=once
maven.surefire.debug=-Xdebug -Xrunjdwp:transport=dt_socket,server=n,address=${jpda.address}
jpda.listen=true

# gradle - 如何解决“无法读取 zip 文件”的 gradle 依赖问题？

> ID：11314806
> 
> 赞同：0
> 
> 时间：2012-07-03T16:00:22.640
> 
> 标签：gradle

我有一个项目，它使用 gradle 在 maven 存储库中进行编译，并带有依赖项。

它已经工作了好几个月，但是在设置新机器时，我无法编译，访问依赖文件时出错。

```
[ant:javac] error: error reading /Users/rayj/.gradle/caches/artifacts-4/com.google.guava/guava/c12498cf18507aa6433a94eb7d3e77d5/jars/guava-11.0.2.jar; cannot read zip file
I was able to reproduce on another machine by removing my gradle cache ("~/.gradle/caches/artifacts-4/"). 
```

我能够确定“损坏”的 jar 文件的行为不同于“未损坏”的 jar 文件。对于“未损坏”的 jar 文件，我可以重命名为“.zip”并提取 zip 以查看文件的内容（如预期的那样）。对于“损坏”的 jar 文件，如果我重命名为“.zip”并提取 zip，则输出是另一个 jar 文件（意外）。如果我再次重命名/提取，则它会正确提取为文件的内容（预期）。

我可以通过以下方式手动解决此问题：

```
for each corrupt jar file { 
  rename to .jar to .zip and extract to create a new jar //this turns a corrupt jar into a non-corrupt jar)
} 
```

这表明该问题仅与“损坏”的 jar 文件有关。

尽管这可行，但对于自动构建来说，这是一个痛苦的解决方案 =)

我正在寻找有关可能导致此问题的原因以及如何解决根本问题的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:55:03.200

正如上面@peter-niederwieser 所建议的，通过升级 Gradle 解决了这个问题！很容易。

# mysql - 成员和组表

> ID：11314808
> 
> 赞同：1
> 
> 时间：2012-07-03T16:00:34.060
> 
> 标签：mysql, sql

我正在考虑一种数据库设计，它将有两个表成员和组。每个成员将至少属于一个组 - 但成员可能有多个组。反映这一点的最佳方法是为组成员创建一个 id 数组并将其作为外键存储在成员的记录中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:05:10.523

N:M 关系通常被建模为数据库中的一个额外表。因此，您将拥有一个`Member`-table、一个`Group`-table 和一个`MemberInGroup`-table，您将在其中存储两个主键。

像这样：

```
 +----+----------------+      +----+---------------+      +-----+----+----+
    |m_id|member          |      |g_id|group          |      |mg_id|m_id|g_id|
    +----+----------------+      +----+---------------+      +-----+----+----+
    |1   |tom             |      |1   |groupA         |      |1    |1   |1   |
    |2   |tim             |      |2   |groupB         |      |2    |1   |2   |
    |3   |michael         |      +----+---------------+      |3    |2   |1   |
    +----+----------------+                                  +-----+----+----+ 
```

您的想法 - 在您的 -table 中存储多值属性`Member`与第一个范式（[http://en.wikipedia.org/wiki/Database_normalization#Normal_forms](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms "维基百科上的范式")）冲突，后者指出每个属性必须是单个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:09:06.807

这是一个经典[的多对多关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)。

需要一个[联结表](http://en.wikipedia.org/wiki/Junction_table)，这将包含两个表中的主键。

您将需要 3 个表 - 成员、组和新的联结表，您可以将其称为 members_groups。

# objective-c - 如何以非阻塞方式检查 iOS 上的网络可达性？

> ID：11314819
> 
> 赞同：3
> 
> 时间：2012-07-03T16:01:08.140
> 
> 标签：objective-c, ios, reachability

在我的 iOS 项目中，我想在某些网络操作之前​​向用户显示一条连接到 Internet 的消息，所以我使用 Apple 的 Reachability 类编写了以下检查：

```
Reachability *reach = [Reachability reachabilityWithHostName:@"google.com"];
if([reach currentReachabilityStatus] == NotReachable) {
    // ...prompt user to establish an internet connection
} else {
    // ...send an asynchronous request with a timeout
} 
```

然而，这有一个非常大的问题——当设备在一个非常有损的网络上时（例如，当 OS X Lion 的[Network Link Conditioner](http://9to5mac.com/2011/08/10/new-in-os-x-lion-network-link-conditioner-utility-lets-you-simulate-internet-and-bandwidth-conditions/)上的上行链路数据包丢失设置为 100% 时），`[Reachability reachabilityWithHostName:@"google.com"]`会阻塞主线程 30 秒之前确定连接不可用。但是，以下代码不会阻塞：

```
if([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] == NotReachable) {
    // ...prompt user to establish an internet connection
} else {
    // ...send an asynchronous request with a timeout
} 
```

查看 Reachability 的实现表明这两种方法都使用`SystemConfiguration.framework`，但第一种方法使用`SCNetworkReachabilityCreateWithName`，而第二种方法使用`SCNetworkReachabilityCreateWithAddress`。为什么第一种方法会阻塞，而第二种方法不会呢？第二种方法是检查连通性的好方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:32:58.117

检查此功能：

```
- (BOOL)isNetworkAvailable
{
CFNetDiagnosticRef diag;        
diag = CFNetDiagnosticCreateWithURL (NULL, (__bridge CFURLRef)[NSURL URLWithString:@"www.apple.com"]);

CFNetDiagnosticStatus status;
status = CFNetDiagnosticCopyNetworkStatusPassively (diag, NULL);        

CFRelease (diag);

if ( status == kCFNetDiagnosticConnectionUp )
{
    //NSLog (@"Connection is up");
    return YES;
} else {
    NSLog (@"Connection is down");
    return NO;

}
} 
```

这会很好..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:09:04.747

第一个测试它是否可以到达`google.com`，而第二个只是检查是否有任何可能的互联网连接（它认为存在，即使有数据包丢失）。

基本上只是把它放在一个线程或后台队列中。可靠地知道您是否有良好连接的唯一方法是对其进行测试，并且任何测试都将是阻塞或异步的。您根本无法立即使用它。

# android - Running a shell command to copy files from Android App

> ID：11314821
> 
> 赞同：3
> 
> 时间：2012-07-03T16:01:20.767
> 
> 标签：android, shell, process, command, root

i'm trying to get an app started so I can backup my apps to sdcard. I ran:

```
 Process p = Runtime.getRuntime().exec("su");
    Process c = Runtime.getRuntime().exec(
            "cp /data/app/com.ebay.mobile-1.apk"
                    + Environment.getExternalStorageDirectory()
                    + "/ebay.apk");
    Log.d("copy", "done"); 
```

When it runs I can grant super user then it says it's done but there is no file is not copied. I'm just using the eBay app as an example and test.

Thanks for any help.

Fix: thanks for the help below but i found a full fix and kinda different way of doing things here "http://stackoverflow.com/questions/10735273/copy-folders-in-data-data-to-sdcard-viceversa?rq=1"

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:10:45.413

Android 不支持`cp`命令。为此，您必须使用**cat**命令（**仅来自 shell**），

```
cat source_file > dest_file 
```

或者在您的应用程序中使用**BusyBox 。**

**编辑：**

你也可以使用命令，

```
dd if=source_file of=dest_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T18:18:56.750

这个 QA 帮助了我很多，所以我想在各种 exec 答案中添加一些东西。与其使用 Runtime.getRuntime().exec(String)，不如考虑使用 Runtime.getRuntime().exec(String[])。这应该可以防止带有空格的文件路径对您的文件系统造成严重破坏。

尝试

```
Process copy = Runtime.getRuntime().exec(
new String[]{
    "dd", 
    "if=" + inputFile.getAbsolutePath(), 
    "of=" + outputFile.getAbsolutePath()
}); 
```

# java - Data structure libraries in memcached

> ID：11314823
> 
> 赞同：0
> 
> 时间：2012-07-03T16:01:36.147
> 
> 标签：java, data-structures, memcached

It's possible to write queues, stacks, vectors, linked list, sets, etc. all in memcached. I'm wondering if there are any libraries that have implemented any of these data structures? We'll be in Java probably and will otherwise have a need to write some of these by ourselves.

"Thread-safety" is important, in that two processes living on different machines should be able to use the same library to manipulate these structures concurrently.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:22:47.513

假设我没有误解你的问题——这很有可能:)

您可以查看 HazelCast（Java API - 分布式地图、mutitmaps、集合、列表队列、主题）、Redis（Jedis Java API - 集合、地图、列表、主题等）。Hazelcast 复制非常简单（您必须指定是要使用基于 tcp 的复制还是多播复制）-使用 redis，您可以考虑使用消息传递进行复制（我认为集群在稳定版本中不可用，但您应该做自己的尽职调查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T15:00:04.287

You may use [Redisson](https://github.com/mrniko/redisson). It implements distributed and scalable Java data structures (Set, Map, ConcurrentMap, List, Queue, Lock, AtomicLong, CountDownLatch, Publish / Subscribe) on top of Redis.

# sql - SQL 查询问题 - 对于绑定到同一表中其他记录的记录，始终返回 null

> ID：11314824
> 
> 赞同：0
> 
> 时间：2012-07-03T16:01:36.780
> 
> 标签：sql

我有我的记录（在示例 1000 上），它与使用 parentid 的其他记录相关。我想在它的所有“孩子”都处于关闭状态时选择该记录！

表是 T1：

```
ID       PARENTID     STATUS
1000      null        PENDING
1001      1000        CLOSED
1002      1000        CLOSED 
```

我写了 SQL，但它返回我 null 尽管它不应该（“不在”不能很好地工作）

```
SELECT ID
FROM T1
WHERE PARENTID IS NULL AND ID NOT IN (SELECT PARENTID FROM T1 WHERE STATUS!='CLOSED' ) 
```

但它返回的是我的 null 虽然`SELECT PARENTID FROM ID WHERE STATUS!='CLOSED'`不返回 1000。为什么？如果“NOT IN”子句不起作用，如何选择。

非常非常重要的事情是我不能使用`"WHERE PARENTID=ID"`，虽然我知道这将是解决方案，但我必须以不同的方式来做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:15:52.837

IN 子句不适用于 null。在查询中使用 nvl 绕过（Oracle） -

```
select ID from T1 where PARENTID is null and ID not in (select nvl(parentid,0) from T1 where status != 'CLOSED'); 
```

或者，如果您使用的是 db2 -

```
select ID from T1 where PARENTID is null and ID not in (select coalesce(parentid,0) from T1 where status != 'CLOSED'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:10:06.613

原因是您的子查询正在返回`NULL`。当 ansi_nulls 打开时，PARENTID <>`NULL`是未知的，因此您不会得到任何行。

试试这个：

```
select ID
from T1
where PARENTID is null and ID not in (
        select isnull(PARENTID, -1)
        from T1
        where status != 'CLOSED'
        ) 
```

有关更多信息，请参阅：

[处理 SQL NULL 的 4 条简单规则](http://www.sqlservercentral.com/articles/Advanced+Querying/fourrulesfornulls/1915/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:27:30.930

另一种方法是

```
SELECT ID
FROM T1 T1Name
WHERE PARENTID IS NULL AND 
not exists(select 1 from T1 where ID=T1Name.parentid and status!='CLOSED') 
```

# c - Why does the print to stdout not happen when using fprintf?

> ID：11314825
> 
> 赞同：16
> 
> 时间：2012-07-03T16:01:37.670
> 
> 标签：c, stdout, stderr, printf

I have this code:

```
#include <stdio.h>
#include <unistd.h>
int main()
{
        while(1)
        {
                fprintf(stdout,"hello-out");
                fprintf(stderr,"hello-err");
                sleep(1);
        }
        return 0;
} 
```

The output is `hello-err` `hello-err` `hello-err` `hello-err` `hello-err` `hello-err` at 1 sec intervals. I want to know why hello-out never gets printed.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T16:02:26.957

You need to `fflush` `stdout` because usually `stdout` is line buffered and you don't issue a new line character in your program.

```
 fprintf(stdout,"hello-out");
            fflush(stdout); 
```

`stderr` is not fully buffered by default so you don't need to `fflush` it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:07:23.607

stdout 默认情况下是行缓冲的，这意味着缓冲区将在每个行尾 ( `'\n`') 处刷新。stderr 是无缓冲的，因此每个字符都会自动发送而无需刷新。

`\n`您可以通过在 stdout 输出的末尾放置 a 来确认这一点。这样，两行都将以 1 秒的间隔打印。

# javascript - changing the color of individual data points flotr2

> ID：11314829
> 
> 赞同：0
> 
> 时间：2012-07-03T16:01:49.097
> 
> 标签：javascript, flotr

I was wondering if it was possible to change the color of individual data points. I have tried writing my own function into it like in tickFormatter, but it doesn't seem to be working. This is kinda what I'm talking about:

```
graph = Flotr.draw(container, [ 
            { data : dataset, label : 'Scores1', lines:{show:true}, 
                points: {
                    show: true,
                    color: function(o){
                        return 'yellow';
                    }
                }},
            { data : patient_average, label : 'Scores2',  lines:{show:true}, points: {show:true}},
            { data : overall_average, label : "Scores3", lines : {show:true, color:'#FFCD00'}, points: {show:true, color: '#FFCD00'}}
            ], { 
```

Right now I was just trying to get it to show yellow so that I knew that the function would work. If that works I basically want it so that depending on what the value of the data point is I would color it into a certain color. But with the code above it just displays the points as grey meaning that it doesn't understand my code. Is this even possible? Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:49:59.367

请尝试使用： `lines:{show: true, fill: true, fillColor:'#000000'}`代替您的代码。

它应该运作良好。积分也是一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:06:56.760

在我看来应该有'fillColor'而不是'color'。还要检查另一个属性：'fill: true'。

# text - 寻找有关打开大型文本文件的程序的建议

> ID：11314831
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:01:56.307
> 
> 标签：text

我有几个文件需要检查我目前正在使用超编辑并且它可以工作，但我正在寻找可以处理比超编辑更好的真正大文件的东西。它完全太慢并且崩溃了很多。文件大小为 10+ GB。我试过十六进制编辑器，但它给我的信息格式错误。有什么建议>？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:05:47.917

对于需要编辑的大文件，我使用 Vim 和[LargeFile插件。](http://www.vim.org/scripts/script.php?script_id=1506 "大文件")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T04:15:25.687

您可以尝试使用[Sublime Text](http://www.sublimetext.com/)打开文件。

# javascript - Jquery dropdown menu onclick

> ID：11314835
> 
> 赞同：0
> 
> 时间：2012-07-03T16:02:18.803
> 
> 标签：javascript, jquery, html

I am trying to make a simple dropdown menu with jquery but I cant seem to get any of the javascript to work. I have tried calling it externally. I am not sure what the problem can be, if you see a problem please let me know. Thanks.

```
 <html>
    <head>
        <title></title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

    <style type="text/css">
    #container{width:978px;}
    .content {
        display: none;
        padding-left: 5px;
        left: 0px;
        width: 100%;
        top: 30px;
        background: yellow;
    }
    ul{width: 100%;}
    li{
        float: left;
        padding: 5px;
        background: #e5e5e5;}

    #div{
        background: #9e9e9e;
        height: 20px;
        width: 978px;
    }
    br{
        clear: left;
    }​
    </style>

    <script type="text/javascript">
        $(function() {
        $('.action').click(function() {          
            var name = $(this).attr("name");
            var content = $('.content[name=' + name + ']');
            $('.content').not(content).hide('fast');
            content.slideToggle('fast');
        });
    });​

    </script>
     </head>
    <body>

    <div id="container"><ul>
        <li>
            <a href="#" class="action" name="summer">summer</a>
        </li>
        <li>
            <a href="#" class="action" name="winter">winter</a>
        </li>
        <li>
            <a href="#" class="action" name="weather">weather</a>
        </li>
        </ul></div><br>
        <div class="content" name="summer">
            <a href="link">june</a>
            <a href="link">july</a>
        </div>
        <div class="content" name="winter">
                <a href="link">november</a>
                <a href="link">december</a>
            </div>
        <div class="content" name="weather">
                <a href="link">rain</a>
                <a href="link">sun</a>
        </div>

        <div id="div"></div>​

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:13:02.250

试试 SuperFish => [http://users.tpg.com.au/j_birch/plugins/superfish/#getting-started](http://users.tpg.com.au/j_birch/plugins/superfish/#getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:11:20.417

样式和脚本标签应该在你的 head 标签内。（尽管有些人将所有脚本都放在结束正文标记之前）

如果没有 doctype，就会发生奇怪的事情。在打开的 html 标记之前添加“<!doctype html>”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T18:25:36.537

我复制了你的代码，在第 42 行，第二个“});”之后有一个非法字符。我删除了它，它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:26:18.990

不知道为什么你有一个双斜杠：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

除非你的意思是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# jquery - 如何将 jQuery 对象带入函数中？

> ID：11314841
> 
> 赞同：0
> 
> 时间：2012-07-03T16:02:39.907
> 
> 标签：jquery

我有这个需要拉入函数的 jQuery 对象，这可能吗？请看代码片段：

```
 var input;
    jQuery('.upload').live('click', function()
    {
    input = jQuery(this).find(".image-path");
    tb_show(title, 'media-upload.php?type=image&amp;TB_iframe=true');

    return false;
    }); 

    window.send_to_editor = function( html ) 
    {
         if (input)
         {
              console.log(input); // works and defined at this point...
              var data {
              action: "doFunction"
              };
              jQuery.post( ajaxurl, data, function( response ) 
              {
                   console.log(input); // does not work, not defined...why??
                   input.val(response); // this gives me input.val(response) is not a function
              });
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:15:41.113

您可能没有在 window 对象中定义 imageObj 。我想您在功能块中调用它的定义。

这个小提琴演示了它的工作原理：http: [//jsfiddle.net/dystroy/fDd7P/](http://jsfiddle.net/dystroy/fDd7P/)

```
var imageObj = jQuery(".image"); // pulls <img src="#" class="image" />

function custom() {
 console.log(imageObj.attr('src')); // and this would be undefined.
}

custom(); // logs '#', type F12 to see it 
```

​如果你`var imageObj = jQuery(".image");`在一个`$(window).load(...`块中编写，请确保`var`从这一点删除并在`var imageObj;`之前声明`$(window).load(...`它以使其成为全局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:19:53.957

**由于 OP 已经披露了他们的实际代码，因此进行了**重大编辑：****

 **问题是`input`直到稍后单击上传按钮时才设置的值，但是您在此之前尝试使用该值，因此它仍然未初始化。您应该将代码更改为以下内容：

```
jQuery('.upload').live('click', function()
{
    var input = jQuery(this).find(".image-path");
    if (input.length) {
        var data {
            action: "doFunction"
        }
        jQuery.post( ajaxurl, data, function( response ) {
            input.val(response); // this gives me input.val(response) is not a function
        });
    }
    return false;
}); 
```

我仍然不确定您的 jQuery 是否与您的 HTML 相匹配，因为您尚未披露您的 HTML。您当前的代码正在寻找一个对象，`class="image-path"`该对象是单击按钮的子对象。这是一种不寻常的 HTML 形式，这让我怀疑您的 jQuery 不适合您的 HTML，这将是另一个需要解决的问题。

* * *

OP 披露其实际代码之前的原始答案。

你所要做的就是两件事：

1.  确保`imageObj`在正确的范围内定义它，以便在您的响应回调中可用。
2.  确保 jQuery 对象解析为具有`.val()`方法的正确类型的 DOM 对象。由于通常`<input>`是具有`.val()`有效方法的对象，而`<input>`对象通常不是容器对象，因此我怀疑这至少是您问题的一部分。

有两种方法可以确保`imageObj`在正确的范围内声明它：

1.  全局声明它，以便它可以作为全局变量使用（通常不推荐）。
2.  在父作用域中声明它，以便在回调函数中可用。这是在父范围中声明它的示例。

像这样：

```
function myFunc() {

    var imageObj = jQuery(this).parents('.image-wrapper');

    var data = {
    action: "doAjax"
    };

    jQuery.post(ajaxURL, data, function(response) 
    {
        imageObj.val(response); // this is undefined when run
    });  

} 
```

为了确保`imageObj`解析为正确类型的 DOM 对象，您可以添加调试代码以首先检查是否`imageObj.length`为非零，然后您需要确保父对象`class="image-wrapper"`实际上`<input>`是具有工作的对象`.val()`方法。由于输入对象通常不是容器对象，这可能是您的问题的一部分。如果您向我们展示您的 HTML，我们可以提供更具体的建议。

这是一个工作示例：http: [//jsfiddle.net/jfriend00/EJ8yu/](http://jsfiddle.net/jfriend00/EJ8yu/)**

# ruby-on-rails - 在 OSX 上运行古老的 Rails 1.2 项目失败

> ID：11314842
> 
> 赞同：0
> 
> 时间：2012-07-03T16:02:56.303
> 
> 标签：ruby-on-rails, webrick

我正在尝试在我的 OSX 上运行 1.2 rails 项目，但是我遇到了这个我以前从未见过的错误，我无法谷歌解决方案，有什么提示吗？

```
Mac@MKK.local:~/projects/rails/ktb/script$./server -p 3001
=> Booting WEBrick...
/Users/Mac/.rvm/gems/ruby-1.8.7-p370@tjener/gems/transaction-simple-1.4.0.2/lib/transaction/simple.rb:41: warning: already initialized constant Messages
/Users/Mac/.rvm/gems/ruby-1.8.7-p370@tjener/gems/transaction-simple-1.4.0.2/lib/transaction/simple.rb:46: warning: already initialized constant TRANSACTION_SIMPLE_VERSION
/Users/Mac/.rvm/gems/ruby-1.8.7-p370@tjener/gems/transaction-simple-1.4.0.2/lib/transaction/simple.rb:469: warning: already initialized constant SKIP_TRANSACTION_VARS
=> Rails application started on http://0.0.0.0:3001
=> Ctrl-C to shutdown server; call with --help for options
[2012-07-03 17:59:05] INFO  WEBrick 1.3.1
[2012-07-03 17:59:05] INFO  ruby 1.8.7 (2012-06-29) [i686-darwin11.4.0]
[2012-07-03 17:59:05] INFO  WEBrick::HTTPServer#start: pid=16431 port=3001
#<ArgumentError: Anonymous modules have no name to be referenced by>
["../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:404:in `to_constant_name'", 
"../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:214:in `qualified_name_for'", 
"../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:476:in `const_missing'", 
"../config/../vendor/rails/railties/lib/dispatcher.rb:117:in `reset_after_dispatch'", 
"../config/../vendor/rails/railties/lib/dispatcher.rb:51:in `dispatch'", 
"../config/../vendor/rails/railties/lib/webrick_server.rb:113:in `handle_dispatch'", 
"../config/../vendor/rails/railties/lib/webrick_server.rb:79:in `service'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'",
 "/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'",
 "/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'",
 "/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'",
 "/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'", "/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'", "../config/../vendor/rails/railties/lib/webrick_server.rb:63:in `dispatch'", 
"../config/../vendor/rails/railties/lib/commands/servers/webrick.rb:59", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'", 
"/Users/Mac/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'", 
"../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:495:in `require'",
"../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:342:in `new_constants_in'", 
"../config/../vendor/rails/activesupport/lib/active_support/dependencies.rb:495:in `require'", 
"../config/../vendor/rails/railties/lib/commands/server.rb:39", 
"./server:3:in `require'", 
"./server:3"]
[2012-07-03 17:59:08] ERROR `/' not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:18:17.580

试试这个

```
$ cd ~/projects/rails/ktb
$ ./script/server -p 3001 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:11:42.460

原来是项目出了点问题，我重新下载了一遍，开箱即用……

# ruby - warning: method redefined; discarding old decode_www_form and errors

> ID：11314848
> 
> 赞同：0
> 
> 时间：2012-07-03T16:03:12.427
> 
> 标签：ruby, rubygems, sprockets, rake-test

I have forked the ruby gem sprockets and tried to run rake test. I have the following output and really don't know where to begin. Any pointers as to why I am missing the encode method would be very helpful!

```
$ bundle exec rake
(in /Users/michaelirey/Development/ruby/gems/sprockets)
/Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.4.1/lib/rack/backports/uri/common_192.rb:20: warning: method redefined; discarding old decode_www_form
/Users/michaelirey/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/common.rb:836: warning: previous definition of decode_www_form was here
/Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.4.1/lib/rack/backports/uri/common_192.rb:32: warning: method redefined; discarding old decode_www_form_component
/Users/michaelirey/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/common.rb:761: warning: previous definition of decode_www_form_component was here
Loaded suite /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/rake_test_loader
Started
.........................................................................................................................................................................................................................EE..................................................................EE.........................................................................................................
Finished in 19.936621 seconds.

  1) Error:
test "eco templates"(TestEnvironment):
NoMethodError: undefined method `encode' for #<Sprockets::BundledAsset:0x00000103087858>
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/encoding.rb:23:in `encode'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:9:in `initialize'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `new'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `compile'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/module.rb:27:in `compile'
    /Users/michaelirey/Development/ruby/gems/sprockets/test/test_environment.rb:63:in `block in <module:EnvironmentTests>'

  2) Error:
test "ejs templates"(TestEnvironment):
NoMethodError: undefined method `encode' for #<Sprockets::BundledAsset:0x0000010305b168>
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/encoding.rb:23:in `encode'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:9:in `initialize'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `new'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `compile'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/module.rb:27:in `compile'
    /Users/michaelirey/Development/ruby/gems/sprockets/test/test_environment.rb:69:in `block in <module:EnvironmentTests>'

  3) Error:
test "eco templates"(TestIndex):
NoMethodError: undefined method `encode' for #<Sprockets::BundledAsset:0x00000101624740>
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/encoding.rb:23:in `encode'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:9:in `initialize'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `new'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `compile'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/module.rb:27:in `compile'
    /Users/michaelirey/Development/ruby/gems/sprockets/test/test_environment.rb:63:in `block in <module:EnvironmentTests>'

  4) Error:
test "ejs templates"(TestIndex):
NoMethodError: undefined method `encode' for #<Sprockets::BundledAsset:0x000001015f5710>
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/encoding.rb:23:in `encode'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:9:in `initialize'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `new'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/runtime.rb:44:in `compile'
    /Users/michaelirey/.rvm/gems/ruby-1.9.2-p290/gems/execjs-1.4.0/lib/execjs/module.rb:27:in `compile'
    /Users/michaelirey/Development/ruby/gems/sprockets/test/test_environment.rb:69:in `block in <module:EnvironmentTests>'

392 tests, 995 assertions, 0 failures, 4 errors, 0 skips

Test run options: --seed 36185
rake aborted!
Command failed with status (1): [/Users/michaelirey/.rvm/rubies/ruby-1.9.2-...]

Tasks: TOP => default => test
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:04:39.527

我从主存储库中将更新提取到我的 fork 中，现在测试通过了！

# mysql - SQL table with 70 plus columns

> ID：11314849
> 
> 赞同：1
> 
> 时间：2012-07-03T16:03:14.480
> 
> 标签：mysql, sql, database

I'm designing a database table for a manufacturing company, amongst the tables required is a part applications table (meaning this product applies to x and y product), my current issue is that most product lines have about 3 to 10 applications, but 2 specific lines have up to 100 applications.

At first I thought about storing product applications as a comma separated string, but that would violate the first normal form.

Then I read about storing said applications as a blob, however in the interest of both search optimization and general DB performance this doesn't seem to be a possibility.

My question is this, is there a way to store part applications in a table without having to create the 70+ columns, while mantaining normal forms and not compromising performance??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:07:07.783

为了满足`not compromising performance`要求，您需要确切地知道您将运行哪些查询。

但在像这样的正常情况下，你会有一个多：多映射表......

```
CREATE TABLE map_part_application (
  part_id         INT,
  application_id  INT,
  PRIMARY KEY (part_id, application_id)
)

INSERT INTO map_part_application VALUES (1,1)
INSERT INTO map_part_application VALUES (1,2)
...
INSERT INTO map_part_application VALUES (1,100)
INSERT INTO map_part_application VALUES (2,1)
INSERT INTO map_part_application VALUES (2,2)
...
INSERT INTO map_part_application VALUES (1,12) 
```

我建议将这种方式作为标准做法，并且仅在您发现需要在构建后期进行优化时才查看其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:06:29.523

您想要添加一个查找表和一个多对多桥接表。

第三范式通常是好的。为关联的应用程序创建一个表。存储一个引用 ID，它是对您考虑在其中包含此数据的任何其他表的约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:05:56.113

为什么不为您的产品表创建一个带有 fk 的产品线表？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:10:50.023

这样做的方法是将零件应用程序存储为单独的行，而不是同一行中的列。

如果表中只有部分应用程序，则只需在行中创建几行而不是几列。

如果表中还有其他数据，请创建另一个表，仅用于将该数据连接到多个部分应用程序。

# c# - package in java equals to what in C#?

> ID：11314850
> 
> 赞同：1
> 
> 时间：2012-07-03T16:03:20.540
> 
> 标签：c#, java

There is a package in JAVA named for example:

```
 package android.media.videoeditor; 
```

and I know that there is something like that name in C#, so how do I get to that package in C#?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:04:18.080

您要查找的术语是[`namespace`](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:13:15.310

`using namespace_name`; 在`c#`

`import package_name;`在`java`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:11:58.690

正如其他人指出的那样，Java 中的“包”类似于（但*不*完全相同！）C# 和 VB.Net 中的“命名空间”。

至于 C# 中的“视频编辑器”，请看这里：

*   [C#视频编辑器？](https://stackoverflow.com/questions/8022535/c-sharp-video-editor)

*   [.Net sdk 用于视频编辑，如 Windows Movie Marker](https://stackoverflow.com/questions/5027753/net-sdk-for-video-editing-like-windows-movie-marker)

# javascript - 使用 Modernizr 检测音频元素

> ID：11314860
> 
> 赞同：0
> 
> 时间：2012-07-03T16:04:09.033
> 
> 标签：javascript

我在我的代码中使用 html 5 音频元素：

```
var audioElement = document.createElement('audio'); 
```

我正在使用这个对象来播放来自特定来源的音频。

如何使用modernizr检测上述代码？

任何答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:07:36.410

您可以`audioElement`改为检查：

```
if (audioElement) { ... audioElement is defined ... } 
```

...当您在该部分中定义此元素时`<head>`，它实际上变成了全局的。

此代码检测您是否定义了 audioElement。如果您需要检测浏览器是否支持 HTML5 音频，我想您应该测试`Modernizr.audio` [property](http://modernizr.com/docs/#features-html5)，如下所示：

```
if (Modernizr.audio) {
  var audio = new Audio();
  audio.src = Modernizr.audio.ogg ? 'background.ogg' :
              Modernizr.audio.mp3 ? 'background.mp3' :
                                    'background.m4a'
            ;
  audio.play();
} 
```

这是[一个演示](http://jsfiddle.net/d764Y/1/)；当然，您应该使用自己的链接，而不是“something.mp3”。)

# abap - 使 SELECT by 字段为空？

> ID：11314862
> 
> 赞同：4
> 
> 时间：2012-07-03T16:04:13.123
> 
> 标签：abap, is-empty, opensql

我需要知道如何在 SELECT 中对必须为空的字段进行比较。

我正在尝试从 bkpf 中选择一些字段，其中字段 stblg 为空。我是这样做的：

```
 SELECT c~kunnr a~belnr d~spart c~bldat c~waers a~hwaer f~mwskz
      INTO CORRESPONDING FIELDS OF TABLE lt_data
        FROM ( ( ( bsis AS f
      INNER JOIN bkpf AS a ON f~belnr = a~belnr )
      INNER JOIN bsad AS c ON c~belnr = a~belnr )
      INNER JOIN vbrk AS d ON d~vbeln = c~belnr )
      WHERE a~gjahr IN gjahr
        AND a~bukrs IN bukrs
        AND c~augdt IN augdt
        AND a~stblg = ' '
        AND f~hkont = '0034930020'. 
```

这是正确的还是我必须使用其他东西？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:18:51.843

在您的情况下，您可以使用`AND a~stblg = ' '`或已经提到的`AND a~stblg EQ SPACE`- 没有区别（我建议使用`SPACE`。`' '`如果您想检查一个空格或者如果您忘记在 ' 中填写某些内容，您无法确定。）

在数据库级别*空*可以有另一种含义。`space`数据库在或*没有值*`' '`之间产生差异（）。*`NULL`*

 *您可以通过以下方式签`NULL`入 SAP：

```
AND a~stblg IS NULL 
```

In your case, this statement should select nothing, because SAP normally stores *space* for empty character values.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:47:28.560

或者，您可以使用：

```
AND a~stblg EQ SPACE 
```

--

塔尔哈*

# java - JavaFX 双向绑定不适用于控件变得不可编辑

> ID：11314863
> 
> 赞同：6
> 
> 时间：2012-07-03T16:04:14.730
> 
> 标签：java, binding, javafx-2

给出一个非常基本的类（导入解析为 javafx 包）：

```
public class T07 extends Application implements Initializable{ 
```

一些字段表示在 .fxml 文件中定义的控件：

```
@FXML TextField text01; 
```

以及以最基本的方式使用属性包装器的数据模型：

```
public static class DataModel {

    StringProperty first = new SimpleStringProperty();
    //getter
    public String getFirst() {return first.get();}
    //setter
    public void setFirst(String first) {this.first.set(first);}
    //new "property" accessor
    public StringProperty firstProperty() {return first;}

} 
```

我尝试将 ui 控件与初始化中的数据模型绑定：

```
@Override
public void initialize(URL arg0, ResourceBundle arg1) {

   Bindings.bindBidirectional(text01.textProperty(), dm.firstProperty());

} 
```

但这样做，**我得到一个不可编辑的控件**。注释掉 Bindings.bindBidirectional 行，控件变为正常可编辑，并且其值可通过 text01 字段访问。

这个装订收据中缺少什么成分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T08:44:53.410

双向绑定示例：

```
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class JavaFXApplication10 extends Application {

    private Model model = new Model();

    @Override
    public void start(Stage primaryStage) {

        final TextField textField = new TextField();

        Bindings.bindBidirectional(textField.textProperty(), model.firstProperty());

        // Track the changes
        model.firstProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> arg0, String arg1, String arg2) {
                System.out.println("model old val: " + arg1);
                System.out.println("model new val: " + arg2);
                System.out.println();
            }
        });

        textField.textProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> arg0, String arg1, String arg2) {
                System.out.println("textField old val: " + arg1);
                System.out.println("textField new val: " + arg2);
                System.out.println();
            }
        });

        Button btn = new Button();
        btn.setText("Change the model's text");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                model.setFirst("changed from button action");
                System.out.println("Done.");
            }
        });

        BorderPane root = new BorderPane();
        root.setTop(textField);
        root.setBottom(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    // Data Model
    public static class Model {

        StringProperty first = new SimpleStringProperty();
        //getter

        public String getFirst() {
            return first.get();
        }
        //setter

        public void setFirst(String first) {
            this.first.set(first);
        }
        //new "property" accessor

        public StringProperty firstProperty() {
            return first;
        }
    }
} 
```

双向绑定：
1 方式 - 输入到 textField 的文本将反映到模型的第一个 stringProperty。
第二种相反的方式 - 通过单击按钮，您会注意到当设置模型的第一个 stringProperty 时，文本字段的文本值也会更改。

# vnc - vncserver 支持 unix 域套接字

> ID：11314866
> 
> 赞同：1
> 
> 时间：2012-07-03T16:04:23.367
> 
> 标签：vnc, vnc-server

你能帮我找到一个支持 UNIX 域套接字或任何其他调整的 vncserver

tightvnc 在 /tmp/.X11-unix/X${display_number} 下创建一个套接字文件，但我不确定这是否可行

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-24T19:42:39.360

你可以用 Tigervnc 或 X2go 来做：

* * *

# 老虎vnc

Tigervnc 添加了带有[`-rfbunixpath`](https://tigervnc.org/doc/Xvnc.html).

您可以通过两种方式获得 Tigervnc，使用官方版本或您的操作系统软件包系统，它们略有不同（对于 Debian，也许其他操作系统也是如此）：

*   ### 官方版本（首选）：

您可以从源代码构建它，也可以像这样使用[此处](https://bintray.com/tigervnc)的二进制文件：

```
curl -sSfL -o tigervnc-1.10.0.x86_64.tar.gz https://bintray.com/tigervnc/stable/download_file?file_path=tigervnc-1.10.0.x86_64.tar.gz
tar xz -f tigervnc-1.10.0.x86_64.tar.gz 
```

然后将其复制到`/usr/local`您喜欢的任何位置。

创建一个密码来保护 vnc 服务器：`vncpasswd`

运行服务器：

```
vncserver :1 -geometry 1600x1000 -rfbunixpath /tmp/vnc_myunixSocket -nolisten tcp 
```

例如，您现在可以通过以下方式远程连接 ssh：

```
ssh -fx -e none -o ExitOnForwardFailure=yes -L 4321:/tmp/vnc_myunixSocket user@IP & 
vncviewer localhost:4321 
```

*   ### 使用包管理器（Debian apt）

Debian (buster) 的 Tigervnc 与官方版本不同，并且他们的 vncserver (perl 脚本) 有问题，你不能使用 Unix 套接字，因为他们检查开放端口，如果没有找到，那么脚本认为 vncserver 得到了一个问题并关闭它。要解决这个问题，您可以从该脚本中删除检查或直接使用 xtigervnc 而不使用这样的 vncserver 脚本：

```
Xtigervnc :1 -auth ~/.Xauthority -geometry 1600x1000 -depth 24 -rfbwait 30000 -rfbauth ~/.vnc/passwd -pn -localhost -SecurityTypes VncAuth -nolisten tcp -rfbunixpath /tmp/vnc_myunixSocket 
```

如您所见，它并不好，但它可以工作，这就是我更喜欢官方版本的原因。

* * *

# x2go

x2go 也使用 Unix 域套接字，并且不需要在服务器中打开任何端口。我一直使用官方[网站](https://wiki.x2go.org/doku.php/doc:installation:x2goserver)来安装它，但现在我看到它也被添加到了 Debian 存储库。它也可以正常工作，这对于低资源服务器来说更好，因为它在您的客户端 PC 中使用 X 服务器（VNC 使用服务器的 X，因此消耗更多资源）

# c# - 在 ASP.NET MVC 中添加 Create 方法

> ID：11314867
> 
> 赞同：1
> 
> 时间：2012-07-03T16:04:33.480
> 
> 标签：c#, asp.net-mvc

当我在我的控制器中添加 2 Create Method 时，如下所示

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult Create()
    {
        Product.Models.Product p = new Models.Product();
       //update DB
        try
        {
            return RedirectToAction("GetAll");
        }
        catch (Exception)
        {

            return View(p);
        }

    } 

    //
    // POST: /Product/Default1/Create

     [AcceptVerbs(HttpVerbs.Posr)]
    public ActionResult Create(FormCollection collection)
    {
        try
        {
            if (myProduct.Products == null)
            {
                myProduct.Products = new List<Models.Product>();
            }
            Product.Models.Product p = new Product.Models.Product();
            p.Name =  collection["Name"];
            p.ProductType = collection["ProductType"];
            p.Id = myProduct.Products.Count + 1;

            myProduct.Products.Add(p);

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

如果我评论 GET 动作动词并运行应用程序，应用程序会抛出错误资源未找到。它不会触发创建操作。我的 html 有 @using (Html.BeginForm())

我将表格更改为即使这样我也得到了同样的错误。如果我取消注释 GET 动作动词，那么总是 GET 方法启动。我想调用 POST Create action 。可以any1指导我如何解决。

我的 MVC 项目中有产品有区域。其中有 ProductsController.cs 请帮助我如何调用 POST 操作 Create 方法。

-马亨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:59:39.543

尝试以下操作：

```
@using (Html.BeginForm("Create", "Default1", new { area = "Product" }, FormMethod.Post)) {
// Your Form
} 
```

请使用

```
[HttpGet]
[HttpPost] 
```

而不是 AcceptVerbs，它更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:08:58.283

```
[HttpGet] // Or even if you dont put this, it will be treated as GET
public ActionResult Create()
{
     // your code goes here
}

[HttpPost]
public  ActionResult Create(Model yourModel)
{
    // your code goes here 
}

in your view 
@using(Html.BeginForm("HandleForm", "Home") 
```

# visual-studio-2010 - NuGet 包还原已退出，代码为 -1

> ID：11314880
> 
> 赞同：7
> 
> 时间：2012-07-03T16:05:24.743
> 
> 标签：visual-studio-2010, nuget

我在输出窗口中收到以下错误：

```
D:\{solutionPath}\.nuget\nuget.targets(76,9): error : 
D:\{solutionPath}\.nuget\nuget.targets(76,9): error : Unhandled Exception: OutOfMemoryException.
D:\{solutionPath}\.nuget\nuget.targets(76,9): error MSB3073: The command ""D:\{solutionPath}\.nuget\nuget.exe" install "D:\{pathToConfigLocation}\packages.config" -source "" -o "D:\{solutionPath}\packages"" exited with code -1. 
```

以上是 NuGet.targets 自带的。

```
D:\{solutionPath}\.nuget\nuget.targets(76,9): error : 
D:\{solutionPath}\.nuget\nuget.targets(76,9): error : Unhandled Exception: OutOfMemoryException.
D:\{solutionPath}\.nuget\nuget.targets(76,9): error MSB3073: The command ""D:\{solutionPath}\.nuget\nuget.exe" install "D:\{pathToConfigLocation}\packages.config" -source "{localPackageDir}" -o "D:\{solutionPath}\packages"" exited with code -1. 
```

与我在 NuGet.targets 中的包源

当构建发生时，它会创建尽可能多的 nuget.exe 进程以耗尽所有内存，然后它会失败并再次尝试。

我已经接受了命令并通过 cmd 运行它。

```
"D:\{longPah}\.nuget\nuget.exe" install "D:\{longPah}\packages.config" -source "\\{longPah}\NuGetPackages" -o "D:\{longPah}\packages" 
```

这给了我以下错误：

```
Unhandled Exception: System.IO.FileLoadException: Could not load file or assembl
y 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or
 one of its dependencies. Exception from HRESULT: 0x800705AF
   at Bootstrapper.Program.Main(String[] args) 
```

我的机器上有.net 4。

如果可以的话请帮忙。

谢谢，大卫

### 编辑

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Company.Common.Library" version="0.1.2" targetFramework="net35" />
</packages> 
```

packages.config 根据要求。

### 编辑

我尝试通过 Visual Studio 命令提示符（以管理员身份运行）运行该命令，但它会引发以下异常：

> 未处理的异常：OutOfMemoryException。

### 编辑 - 可能的修复

我想我已经找到了问题......它似乎与 .nuget 文件夹中的 nuget.exe 有关。

我有几个解决方案，并找到了几个有效的解决方案，花费大量时间查看文件权限（被告知这是问题所在），然后考虑检查每个解决方案中的 nuget.exe 属性。

在有效的解决方案中，我发现：

![在此处输入图像描述](../Images/583c59a054a2fdf95e5ceda5491807d0.png)

在我找不到的解决方案中：

![在此处输入图像描述](../Images/932a176315d6b71dbffcb7c7cfed6cdc.png)

如您所见，两者的文件大小截然不同。所有项目都是由团队中的不同人员添加的，这可能是开发人员机器上安装的 nuget 版本的问题吗？

如果是这样，当您选择为解决方案启用包还原时，是否有人知道哪个版本的 nuget 会导致上述问题？顺便说一句，我的机器上安装了最新版本的 NuGet。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T02:52:48.587

它们都会导致错误。较小的文件只是一个 shell，它将命令传递给它下载到 %LOCALAPPDATA%\NuGet 的真实版本。它每 10 天检查一次较新的版本。

看看这个问题：[http](http://nuget.codeplex.com/workitem/2390) ://nuget.codeplex.com/workitem/2390（nuget 包还原假定可以访问 Internet）- 可能是 18K shell 正在尝试将完整的 nuget.exe 下载到 %LOCALAPPDATA%\ NuGet 文件夹，由于某种原因不能。

当 NuGet 2.0 发布时，它附带了包还原的选择同意。看看[http://blog.nuget.org/20120619/nuget-2.0-released.html](http://blog.nuget.org/20120619/nuget-2.0-released.html)和[http://blog.nuget.org/20120518/package-restore-and-consent.html](http://blog.nuget.org/20120518/package-restore-and-consent.html)，其中详细说明了需要什么必须完成才能让它工作。

或者，您可以使用 NugetEnablePackageRestore 包永久接受全部同意 - [http://nuget.org/packages/NuGetEnablePackageRestore](http://nuget.org/packages/NuGetEnablePackageRestore) - 请注意，此修复程序将为包括构建服务器在内的所有未来用户修复它。

# html - 如何居中 li 标签列表

> ID：11314883
> 
> 赞同：1
> 
> 时间：2012-07-03T16:05:34.080
> 
> 标签：html, css

我正在网站中显示标签列表。这就是它现在的显示方式

![在此处输入图像描述](../Images/6c97d91d1c669b2fa848e299ac2f6589.png)

[*我创建了一个 JSFiddle，请检查。*](http://jsfiddle.net/hxbB9/3/)

现在标签左对齐，我需要将标签对齐到中心。尝试添加`text-align: center;`到`.tags`类，但它没有使标签居中。

这是我的 HTML 和 CSS 代码

**HTML**

```
<div class="tags">
    <ul>
        <li><a href="">tag 0000000</a></li>
        <li><a href="">tag 1111111111111</a></li>
        ...
    </ul>
</div>​ 
```

**CSS**

```
.tags
{
    display:table;
}

.tags li
{
    float:left;
    list-style-type: none;
    text-decoration: none;
    margin: 10px 0 0 0;
}

.tags ul a
{
    text-decoration: none;
    padding: 4px;
    border: 1px solid #F2F0F0;
    margin: 2px;
} 
```

我需要在一行中显示尽可能多的标签，但行的内容必须居中对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:10:41.373

[http://jsfiddle.net/hxbB9/18/](http://jsfiddle.net/hxbB9/18/) 另一个不需要在`.tags`div上设置宽度的替代解决方案

```
.tags
{

}

.tags li
{ 
    display:inline-block;
    list-style-type: none;
    text-decoration: none;
    margin: 10px 0 0 0;
}

.tags ul a
{
    text-decoration: none;
    padding: 4px;
    border: 1px solid #F2F0F0;
    margin: 2px;
}

.tags ul
{
    text-align:center;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:13:58.423

我相信这就是您正在寻找的：

```
.tags ul
{
    text-align: center;
    list-style-type: none;
}
.tags ul li {
    display: inline-block;
}
.tags ul a
{
    display: inline-block;
    text-decoration: none;
    padding: 4px;
    border: 1px solid #F2F0F0;
    margin: 2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:07:52.923

[http://jsfiddle.net/hxbB9/6/](http://jsfiddle.net/hxbB9/6/)

这是你要找的吗？

# python - 从 Tiff 图像中获取描述/关键字？

> ID：11314894
> 
> 赞同：3
> 
> 时间：2012-07-03T16:06:04.727
> 
> 标签：python, tiff, exif, iptc

我有许多 TIFF 文件，其中包含描述和“关键字”（正如 OS X 在文件检查器中所说的那样）。但是，我很难从图像中收集这些元数据。

我尝试使用[tifffile.py](http://www.lfd.uci.edu/~gohlke/code/tifffile.py.html)、[PIL](http://www.pythonware.com/products/pil/)的 exif 命令和[IPTCInfo](https://bitbucket.org/gthomas/iptcinfo)，虽然 tifffile.py*会*得到描述，但我似乎仍然无法使用这些库中的任何一个解析文件中的“关键字”。

存储关键字的 TIFF 与 JPEG 是否使用不同的“规范”？解析这些关键字的最佳方法是什么？

**编辑**

除了来自 的评论`abarnert`，我在文本编辑器中打开了一个 TIFF 文件，发现有包含“关键字”的 XML 数据*。*片段如下：

```
...
<rdf:Description rdf:about=""
xmlns:dc="http://purl.org/dc/elements/1.1/">
<dc:description>
<rdf:Alt>
 <rdf:li xml:lang="x-default">OLYMPUS DIGITAL CAMERA</rdf:li>
</rdf:Alt>
</dc:description>
<dc:format>image/tiff</dc:format>
<dc:subject>
<rdf:Bag>
 <rdf:li>Foo</rdf:li>
 <rdf:li>Bar</rdf:li>
 <rdf:li>A long keyword</rdf:li>
</rdf:Bag>
</dc:subject>
</rdf:Description>
... 
```

看起来这可以存储为二进制表示；tifffile.py 列出了一些本质上是整数元组的标签。但是，我不确定如何转换它。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:54:31.373

> 存储关键字的 TIFF 与 JPEG 是否使用不同的“规范”？

这得看情况。

TIFF 容器只有一组非常有限的元数据标记，并且无法指定任意关键字。

JPEG 根本不是容器类型。它是一种图像压缩编解码器，可用于各种不同的容器，包括 TIFF。但通常当您说“JPEG 文件”时，您指的是 JFIF，它是 JPEG 组指定的容器格式之一，并且与 TIFF 一样，JFIF 具有一组非常有限的元数据标记。

Exif 是另一种容器格式，就结构而言与 TIFF 相同，但它定义了新标签，专门用于元数据，这意味着您可以将 TIFF 简单地包装为 Exif，它仍然是合法的 TIFF，并且有点偷偷摸摸地你可以还将 JFIF 包装为 Exif，这种方式不是完全合法的 JFIF，但几乎所有软件都接受它。

Exif 是向 JFIF 添加元数据的唯一常用方法（不包括 DCF，它与 Exif 基本相同），但它是向 TIFF 添加元数据的多种不同方法之一。IPTC 是另一个，XMP、OME 和许多其他可能也是如此。

因此，一些 TIFF 文件使用与 JFIF-wrapped-in-Exif 相同的规范存储“关键字”，但其他文件则不这样做。

> 解析这些关键字的最佳方法是什么？

好吧，您需要知道它们以什么格式存储。

不用说，PIL 的 exif 命令只支持 Exif，IPTCInfo 只支持 IPTC，而 tifffile 大多支持……嗯，各种不同的东西。

我相信 tifffile.py 可以存储未知标签类型是原始二进制数据，您可以对其进行迭代并查看您缺少的内容。这至少会涵盖所有使用 TIFF 容器结构的扩展。如果您在那里找不到关键字，那么……至少排除了许多常见格式。

无论如何，一旦您知道要查找的格式，您就可以寻找可以处理它的库。（或者，如果它是基于 XML 的标签之一，只需使用 tifffile 将标签读取为二进制数据，然后将其解析为 UTF-8 XML，这可能比查找其他库更容易。）

# android - Android 进程在使用硬件加速的 ViewPager 中使用 WebView 崩溃

> ID：11314895
> 
> 赞同：2
> 
> 时间：2012-07-03T16:06:12.273
> 
> 标签：android, webview, crash, hardware-acceleration

我有一个 ViewPager 活动，我用它来浏览包含“随机”网页的片段 Web 内容不受我控制。我正在使用 FragmentStatePagerAdapter 和最新的支持库。每个 Fragment 的布局都包含一个加载“随机”页面的 web 视图。用户可以无限期地向前翻转。

当我打开硬件加速时，在几次滑动后我会遇到段错误崩溃（转储在下面）。关闭 Activity 的硬件加速后，不会发生崩溃，但当然 webview 滚动和视图寻呼机转换非常不稳定。另外，我无法在 youtube 等页面上播放嵌入的视频。

崩溃不会发生在特定页面上。重现崩溃所需的滑动次数也各不相同 - 有时是第一次滑动，有时需要几次，但它非常一致。我在运行应用程序时检查了内存使用情况，它看起来很好（ram 和 vram） - 很好，因为我认为我没有使用太多，而且我没有收到任何低内存警告。

到目前为止，我已经在我尝试过的所有 3.0+ 设备上遇到了这个问题：

*   东芝regza运行4.0.3
*   摩托罗拉xoon运行3.2.1
*   运行 4.0.4 的 Galaxy nexus 手机（fwiw，在手机上发生的频率较低）

这是一个已知的问题？任何解决方法？

```
07-02 15:12:30.187: I/DEBUG(111): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***

07-02 15:12:30.187: I/DEBUG(111): Build fingerprint: 'TOSHIBA/tostab05/tostab05:4.0.3/IML74K/05.3.0012:user/release-keys'

07-02 15:12:30.187: I/DEBUG(111): pid: 1538, tid: 1538  >>> xxx <<<

07-02 15:12:30.187: I/DEBUG(111): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000043e
07-02 15:12:30.187: I/DEBUG(111):  r0 0000000b  r1 02514ba0  r2 befbf378  r3 0000043e

07-02 15:12:30.187: I/DEBUG(111):  r4 020a43e8  r5 02070958  r6 00000000  r7 00000006

07-02 15:12:30.187: I/DEBUG(111):  r8 00000000  r9 020a2364  10 01d2d108  fp befbf6e4

07-02 15:12:30.187: I/DEBUG(111):  ip 409da55c  sp befbf330  lr 409c3487  pc 409c349a  cpsr 80000030

07-02 15:12:30.187: I/DEBUG(111):  d0  4488000044800000  d1  0000000044800000

07-02 15:12:30.187: I/DEBUG(111):  d2  4480000044801000  d3  00000000000000af

07-02 15:12:30.187: I/DEBUG(111):  d4  3f800000170000e0  d5  4480000044800000

07-02 15:12:30.187: I/DEBUG(111):  d6  4488000000000000  d7  4260000000000000

07-02 15:12:30.187: I/DEBUG(111):  d8  0000000000000000  d9  0000000300000038

07-02 15:12:30.187: I/DEBUG(111):  d10 00000000000002f0  d11 0000000000000000

07-02 15:12:30.187: I/DEBUG(111):  d12 0000000000000000  d13 0000000000000000

07-02 15:12:30.187: I/DEBUG(111):  d14 0000000000000000  d15 0000000000000000

07-02 15:12:30.187: I/DEBUG(111):  d16 0000000000000000  d17 3ff0000000000000

07-02 15:12:30.187: I/DEBUG(111):  d18 3fe0000000000000  d19 3fe000000112a880

07-02 15:12:30.187: I/DEBUG(111):  d20 3ff0000000000000  d21 8000000000000000

07-02 15:12:30.187: I/DEBUG(111):  d22 c000000000000000  d23 0000000000000000

07-02 15:12:30.187: I/DEBUG(111):  d24 0000000000000000  d25 3ff0000000000000

07-02 15:12:30.187: I/DEBUG(111):  d26 4010000000000000  d27 3ff0000000000000

07-02 15:12:30.187: I/DEBUG(111):  d28 0000000000000000  d29 3ff0000000000000

07-02 15:12:30.187: I/DEBUG(111):  d30 0000000000000000  d31 3ff0000000000000

07-02 15:12:30.187: I/DEBUG(111):  scr 80000013

07-02 15:12:30.335: I/DEBUG(111):          #00  pc 0000c49a  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #01  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #02  pc 0000c682  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #03  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #04  pc 0000c682  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #05  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #06  pc 0000c682  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #07  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #08  pc 0000c682  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #09  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.343: I/DEBUG(111):          #10  pc 0000c682  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):          #11  pc 00010d3c  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):          #12  pc 00057874  /system/lib/libandroid_runtime.so
07-02 15:12:30.351: I/DEBUG(111):          #13  pc 0001ebf0  /system/lib/libdvm.so (dvmPlatformInvoke)
07-02 15:12:30.351: I/DEBUG(111):          #14  pc 00058eac  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)

07-02 15:12:30.351: I/DEBUG(111): code around pc:

07-02 15:12:30.351: I/DEBUG(111): 409c3478 f7fe6781 9010ffa3 f0044628 9f0df81f  .g......(F......

07-02 15:12:30.351: I/DEBUG(111): 409c3488 ab13aa12 920b3701 9711930e 900f3801  .....7.......8..

07-02 15:12:30.351: I/DEBUG(111): 409c3498 f853e2fe 98107b04 990d463a f7fe67a3  ..S..{..:F...g..

07-02 15:12:30.351: I/DEBUG(111): 409c34a8 2f23fedf 82f4f200 f017e8df 0037002e  ..#/..........7.

07-02 15:12:30.351: I/DEBUG(111): 409c34b8 0043003a 00810061 0095008c 00ad00a2  :.C.a...........

07-02 15:12:30.351: I/DEBUG(111): code around lr:

07-02 15:12:30.351: I/DEBUG(111): 409c3464 460db095 920c4604 0800f04f 4646930d  ...F.F..O.....FF

07-02 15:12:30.351: I/DEBUG(111): 409c3474 1080f8d0 f7fe6781 9010ffa3 f0044628  .....g......(F..

07-02 15:12:30.351: I/DEBUG(111): 409c3484 9f0df81f ab13aa12 920b3701 9711930e  .........7......

07-02 15:12:30.351: I/DEBUG(111): 409c3494 900f3801 f853e2fe 98107b04 990d463a  .8....S..{..:F..

07-02 15:12:30.351: I/DEBUG(111): 409c34a4 f7fe67a3 2f23fedf 82f4f200 f017e8df  .g....#/........

07-02 15:12:30.351: I/DEBUG(111): stack:

07-02 15:12:30.351: I/DEBUG(111):     befbf2f0  00000000  

07-02 15:12:30.351: I/DEBUG(111):     befbf2f4  befbf30c  [stack]

07-02 15:12:30.351: I/DEBUG(111):     befbf2f8  0237c55c  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf2fc  befbf364  [stack]

07-02 15:12:30.351: I/DEBUG(111):     befbf300  409da430  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):     befbf304  01d8c2d8  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf308  409daa10  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):     befbf30c  409c7d05  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):     befbf310  00000000  

07-02 15:12:30.351: I/DEBUG(111):     befbf314  020a2364  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf318  01d2d108  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf31c  409c23f1  /system/lib/libhwui.so

07-02 15:12:30.351: I/DEBUG(111):     befbf320  020a43e8  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf324  02070958  [heap]

07-02 15:12:30.351: I/DEBUG(111):     befbf328  df0027ad  

07-02 15:12:30.359: I/DEBUG(111):     befbf32c  00000000  

07-02 15:12:30.359: I/DEBUG(111): #00 befbf330  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf334  3f800000  

07-02 15:12:30.359: I/DEBUG(111):     befbf338  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf33c  44800000  /dev/ashmem/dalvik-heap (deleted)

07-02 15:12:30.359: I/DEBUG(111):     befbf340  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf344  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf348  3f800000  

07-02 15:12:30.359: I/DEBUG(111):     befbf34c  02370001  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf350  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf354  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf358  befbf378  [stack]

07-02 15:12:30.359: I/DEBUG(111):     befbf35c  befbf378  [stack]

07-02 15:12:30.359: I/DEBUG(111):     befbf360  befbf6a0  [stack]

07-02 15:12:30.359: I/DEBUG(111):     befbf364  00000005  

07-02 15:12:30.359: I/DEBUG(111):     befbf368  befbf37c  [stack]

07-02 15:12:30.359: I/DEBUG(111):     befbf36c  0000000b  

07-02 15:12:30.359: I/DEBUG(111):     befbf370  01d8c2d8  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf374  00000006  

07-02 15:12:30.359: I/DEBUG(111):     befbf378  44800000  /dev/ashmem/dalvik-heap (deleted)

07-02 15:12:30.359: I/DEBUG(111):     befbf37c  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf380  44880000  /dev/ashmem/dalvik-heap (deleted)

07-02 15:12:30.359: I/DEBUG(111):     befbf384  020a43e8  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf388  02070958  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf38c  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf390  409c7d05  /system/lib/libhwui.so

07-02 15:12:30.359: I/DEBUG(111):     befbf394  00000000  

07-02 15:12:30.359: I/DEBUG(111):     befbf398  020a2364  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf39c  01d2d108  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf3a0  befbf6e4  [stack]

07-02 15:12:30.359: I/DEBUG(111):     befbf3a4  409c7d41  /system/lib/libhwui.so

07-02 15:12:30.359: I/DEBUG(111): #01 befbf3a8  42600000  /dev/ashmem/dalvik-heap (deleted)

07-02 15:12:30.359: I/DEBUG(111):     befbf3ac  020a43e8  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf3b0  00000040  

07-02 15:12:30.359: I/DEBUG(111):     befbf3b4  020a41a0  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf3b8  02070958  [heap]

07-02 15:12:30.359: I/DEBUG(111):     befbf3bc  409c3685  /system/lib/libhwui.so 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:40:59.883

好的，我找到了解决方法和崩溃的“原因”。我将“原因”放在引号中，因为我认为我在原始代码中没有做错任何事情。

我的片段中有以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    ...
    setHasOptionsMenu(true);
    ...
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    inflater.inflate(R.menu.options_menu, menu);
}

@Override
public void onPrepareOptionsMenu(Menu menu)
{
    ... // apply a menu strategy that enables/disables some items based on app state
} 
```

出于某种原因，如果我取出通货膨胀代码，则不再发生崩溃。解决方法是在活动级别膨胀菜单，然后仍然在片段级别应用菜单策略。不知道为什么会这样。如果它有所作为，我目前没有使用 ABSherlock。

# mysql - Wordpress 按自定义字段查询顺序缺少帖子

> ID：11314896
> 
> 赞同：4
> 
> 时间：2012-07-03T16:06:13.247
> 
> 标签：mysql, wordpress, custom-fields

这是我当前的查询：

```
query_posts(array_merge(array('tag' => $pagetag,'meta_key'=>priority,'orderby' =>meta_value, 'order' =>'ASC','paged' => get_query_var('paged')))); 
```

我的问题是查询只显示了我的“meta_key”值的帖子，这意味着“优先级”不为 NULL。我该如何改进这个查询，以便它仍然会按我的 meta_key 排序，但也会显示所有不为 NULL 的帖子？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:24:27.537

问题是，只要您在条件中提及，WordPress 就会`INNER JOIN`在表格中添加一个。解决此问题的一种方法是在子句上添加一个过滤器，如下所示：`wp_postmeta``meta_key``order by`

```
function so_orderby_priority($original_orderby_statement) {
    global $wpdb;

    return "(SELECT $wpdb->postmeta.meta_value
               FROM $wpdb->postmeta
              WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id
                AND $wpdb->postmeta.meta_key = 'priority') ASC";
}

add_filter('posts_orderby', 'so_orderby_priority');

query_posts(
    array(
        'tag' => $pagetag,
        'paged' => get_query_var('paged')
    )
);

remove_filter('posts_orderby', 'so_orderby_priority'); 
```

注意 MySQL 首先对 NULL 进行排序 - 如果您希望它们最后排序，请尝试这样的操作（假设您所有的优先级都按字母顺序排在 ZZZZZ 之前）：

```
function so_orderby_priority($original_orderby_statement) {
    global $wpdb;

    return "IFNULL(
               (SELECT $wpdb->postmeta.meta_value
                  FROM $wpdb->postmeta
                 WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id
                   AND $wpdb->postmeta.meta_key = 'priority'),
                'ZZZZZ') ASC";
} 
```

**编辑**

这里有更多解释，假设您至少了解一点 SQL。

您的原始`query_posts`结果导致对数据库运行以下查询：

```
SELECT wp_posts.*
FROM   wp_posts
       INNER JOIN wp_term_relationships ON ( wp_posts.id = wp_term_relationships.object_id )
       INNER JOIN wp_postmeta ON ( wp_posts.id = wp_postmeta.post_id )
WHERE  1 = 1
       AND ( wp_term_relationships.term_taxonomy_id IN ( 3 ) )
       AND wp_posts.post_type = 'post'
       AND ( wp_posts.post_status = 'publish'
              OR wp_posts.post_status = 'private' )
       AND ( wp_postmeta.meta_key = 'priority' )
GROUP  BY wp_posts.id
ORDER  BY wp_postmeta.meta_value ASC
LIMIT  0, 10; 
```

这`INNER JOIN wp_postmeta`就是从您的结果中删除任何没有优先权的帖子的原因。

从您的中删除`meta_*`相关条件`query_posts`：

```
query_posts(
    array(
        'tag' => $pagetag,
        'paged' => get_query_var('paged')
    )
); 
```

解决了这个问题，但排序顺序仍然错误。新的 SQL 是

```
SELECT wp_posts.*
FROM   wp_posts
       INNER JOIN wp_term_relationships ON ( wp_posts.id = wp_term_relationships.object_id )
WHERE  1 = 1
       AND ( wp_term_relationships.term_taxonomy_id IN ( 3 ) )
       AND wp_posts.post_type = 'post'
       AND ( wp_posts.post_status = 'publish'
              OR wp_posts.post_status = 'private' )
GROUP  BY wp_posts.id
ORDER  BY wp_posts.post_date DESC
LIMIT  0, 10; 
```

过滤器`posts_orderby`允许我们更改`ORDER BY`子句：`wp_posts.post_date DESC`被过滤器返回的内容替换。最终的 SQL 变为：

```
SELECT wp_posts.*
FROM   wp_posts
       INNER JOIN wp_term_relationships ON ( wp_posts.id = wp_term_relationships.object_id )
WHERE  1 = 1
       AND ( wp_term_relationships.term_taxonomy_id IN ( 3 ) )
       AND wp_posts.post_type = 'post'
       AND ( wp_posts.post_status = 'publish'
              OR wp_posts.post_status = 'private' )
GROUP  BY wp_posts.id
ORDER  BY (SELECT wp_postmeta.meta_value
           FROM   wp_postmeta
           WHERE  wp_posts.id = wp_postmeta.post_id
                  AND wp_postmeta.meta_key = 'priority') ASC
LIMIT  0, 10 
```

它可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T15:48:00.430

我需要在 users.php 页面上为我添加的自定义列执行类似的任务，并使用我从 Hobo 修改的以下代码

```
add_action('pre_user_query', 'qd_users_column_orderby');

function qd_users_column_orderby($userquery){
  if('my_last_login'==$userquery->query_vars['orderby']) { //check if my cusomt meta_key is the column being sorted

    global $wpdb;

    $userquery->query_orderby = " ORDER BY(SELECT $wpdb->usermeta.meta_value
        FROM $wpdb->usermeta
        WHERE $wpdb->users.ID = $wpdb->usermeta.user_id
        AND $wpdb->usermeta.meta_key = 'my_last_login') ".($userquery->query_vars["order"] == "ASC" ? "asc " : "desc ")." , wp_users.user_login ".($userquery->query_vars["order"] == "ASC" ? "asc " : "desc ");
  }
} 
```

希望这可以帮助需要此信息的人。

为了贯穿始终，完成我的个人任务所需的其余代码如下。

```
add_filter('manage_users_columns', 'qd_add_user_login_column');

function qd_add_user_login_column($columns) {
  $columns['my_last_login'] = 'Last Logged In';
  return $columns;
}

add_action('manage_users_custom_column',  'qd_show_user_login_column_content', 10, 3);

function qd_show_user_login_column_content($value, $column_name, $user_id) {
  $user = get_userdata( $user_id );
  if ( 'my_last_login' == $column_name ){
    $lastLogin = get_the_author_meta('my_last_login', $user_id);
    if(!$lastLogin){
      return "Never";
    }else{
      date_default_timezone_set(get_option('timezone_string'));
      return date('m/d/y g:ia', $lastLogin); 
    }
  }
  return $value;
}

add_filter( 'manage_users_sortable_columns', 'qd_users_table_sorting' );

function qd_users_table_sorting( $columns ) {
  $columns['my_last_login'] = 'my_last_login';
  return $columns;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T15:12:36.650

**问题：**按自定义字段排序，不排除没有为该自定义字段设置值的帖子。

流浪汉的回答很好地解释了这一点。在这里，我将提供一个更简单的替代方案，在我的情况下最终变得更容易（请注意，如果需要分页，这将无法正常工作）。

我决定在查询完成后在 PHP 中进行排序。好的部分是我可以更好地控制具有空值的帖子的最终位置（我希望它们最后出现）。

```
$query = new WP_Query($args); 

//sort by rank
function customSort($a, $b)
{
    $a = get_field("sort_ranking", $a);
    $b = get_field("sort_ranking", $b);

    //handle nulls
    $a = is_numeric($a) ? $a : 9999;
    $b = is_numeric($b) ? $b : 9999;

    if ($a == $b) return 0;
    return ($a < $b) ? -1 : 1;
 }
 usort($query->posts, "customSort"); 
```

在这里，我有一个名为的数字自定义字段`sort_ranking`，我正在使用它对 ASC 进行排序。此字段为空值的帖子被分配 9999，以便它们最终结束。（注意：我使用的是 ACF，因此是`get_field`函数）

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-16T04:36:56.657

最简单的方法是使用`save_post` 操作插入自定义字段，因此发布的每个帖子都有自己`meta_key`的默认值。

使用 MySQL 查询添加`post_meta`到所有帖子没有元。就是这样。

如果您/任何人需要这方面的代码帮助，请回复:)

**更新**

正如 Timusan 所要求的，在更改元键名称后，将此代码添加到您的 functions.php 文件中：

```
add_action('save_post', 'sidati_post_views_metakey');

function sidati_post_views_metakey ($post_id){

    /*
    * $post_id = is the post ID
    * 'sidati_post_views' => is your metakey name (sidati is prefix always nice to add your prefix)
    * 0 => the inital value
    * true => (bool) add true if you want this metakkey become unique
    */

    add_post_meta($post_id, 'sidati_post_views', 0, true);

}

// THIS ACTION MUST RUN ONLY ONE TIME
add_action('init', 'sidati_allposts_must_have_this');

function sidati_allposts_must_have_this(){

    /* Call the WordPress DataBase class */
    global $wpdb; 

    /* This Query will get us all the posts and pages without "sidati_post_views" metakey. */
    $ids = $wpdb->get_row("SELECT ID FROM wpdb->posts WHERE post_type IN ('post', 'page') AND post_status = 'publish' AND ID NOT IN (SELECT post_id FROM $wpdb->postmeta WHERE meta_key = 'sidati_post_views')");

    /* After get all posts/pages, now you need to add the meta keys (this may take a few munites if you have many posts/pages)*/
    foreach ($ids as $post_id) {
        add_post_meta($post_id, 'sidati_post_views', 0, true);
    }
} 
```

# wsdl - 如何从带有不推荐使用的注释的 WSDL 生成 Java 类？

> ID：11314900
> 
> 赞同：2
> 
> 时间：2012-07-03T16:06:21.573
> 
> 标签：wsdl, jax-ws, cxf, deprecated

在我正在处理的项目中，我们有几个被视为接口的 WSDL。我们正在从 WSDL/XSD 生成 Java 代码。

问题是我必须删除其中一个接口，但在此之前我想生成带有@deprecated 注释的类。

我还有一些 WSDL 绑定和 XSD 绑定文件，但只有默认的 JAXB 属性（主要是包命名和 generateIsSetMethod）。

我将 cxf-codegen-plugin 与 maven 2 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:48:45.270

使用 annox 插件，我现在可以将用于 WSDL 中方法的 in 和/或 out 的参数包装器标记为已弃用。

使用 WSDL portType 中的文档标记我不能使用@deprecated Javadoc 注释将接口标记为已弃用。（但仅在 Javadoc 中）。

我正在寻找更多：

*   将接口标记为已弃用（在代码中）
*   将生成的客户端存根标记为已弃用。

# ruby - 结果集中标题节点的 xpath 选择

> ID：11314903
> 
> 赞同：1
> 
> 时间：2012-07-03T16:06:28.853
> 
> 标签：ruby, xpath, xhtml, xpath-2.0

我有一个如下所示的 xml 文档。我试图选择一个带有特定值的标题节点说`"![CDATA[ 1234 ]]"`。该`Title`节点可以在任何`Type`节点中。我正在使用这个 xpath 查询

```
/Results/ResultSet/Type[Title="![CDATA[ 1234 ]]"] 
```

但没有选择任何东西。有人可以帮忙吗？

```
<Results>
    <Info>...</Info>
    <ResultSet num="4">

     <Type type="A">

      <Title>
      <![CDATA[ 1234 ]]>
      </Title>

      <Description>
      <![CDATA[ 1234 ]]>
      </Description>

      <Domain>
      <![CDATA[1234 ]]>
      </Domain>

      <Target>
      <![CDATA[]]>
      </Target>

     </Type>

    <Type type="A">

    <Title>
    <![CDATA[ abcdef ]]>
    </Title>

    <Description>
    <![CDATA[abcdef]]>
    </Description>

    <Domain>
    <![CDATA[abcdef]]>
    </Domain>

    <Target>
    <![CDATA[abcdef]]>
    </Target>

    </Type> 
```

编辑：包括我正在使用的红宝石代码

```
 doc = Nokogiri::HTML(html)
       Element = doc.xpath('/Results/ResultSet/Type/Title[text()=" 1234 "]')
    if Element.empty?()
          puts "not there "
    else
       Element.each do |node|
       puts  "Found Title: #{node.text}" 
       end
    end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:11:12.100

XPath 错误：

用这个：

```
/Results/ResultSet/Type/Title[text()=" 1234 "] 
```

根据为 XML 发布的链接 OP，这里是有效的 XPath：

```
/QuigoResults/ResultSet/Listing/Title[text()=" location in DYNAMICREGION "] 
```

# python - request.user 返回一个 SimpleLazyObject，我如何“唤醒”它？

> ID：11314905
> 
> 赞同：68
> 
> 时间：2012-07-03T16:06:29.687
> 
> 标签：python, django, django-users, django-contrib

我有以下方法：

```
def _attempt(actor):
    if actor.__class__ != User:
        raise TypeError 
```

从视图中调用：

```
self.object.attempt(self.request.user) 
```

如您所见， _attempt 方法期望 actor 是 type `django.contrib.auth.models.User`，但对象似乎是 type `django.utils.functional.SimpleLazyObject`。为什么会这样？更重要的是，如何将`LazyObject`（显然是用户对象的一种包装器）转换为`User`对象？

更多信息`Request.user`可在此处获得：[https](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.user) ://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.user该文档似乎表明`request.user`应该是一个`User`对象...

======后期编辑=====

我现在有以下方法：

```
def _attempt(obj, action, actor, msg): 
    actor.is_authenticated() 
    if isinstance(actor, LazyObject): 
        print type(actor) 
```

我正在传递一个用户，但是`if`条件仍然是 true，actor 仍然是`LazyObject`. 为什么会这样？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-03T17:00:00.663

请参阅[我对类似问题的回答](https://stackoverflow.com/a/10507200/654031)。

Django 延迟加载`request.user`，因此它可以是`User`或`AnonymousUser`取决于身份验证状态。它仅在访问属性时“唤醒”并返回适当的类。不幸的是，`__class__`这不算数，因为这是一个原始的类属性。有时您可能需要知道这实际上是一种`SimpleLazyObject`类型，因此将其代理到`User`or是错误的`AnonymousUser`。

总而言之，您根本无法进行这种比较。但是，你*真正*想在这里实现什么？例如，如果您试图检查它是否是 a`User`或`AnonymousUser`，那么就是`request.user.is_authenticated()`这样。

不过，作为一般规则，您不应该滥用鸭子类型。参数应该始终是特定类型或子类型（`User`或`UserSubClass`），即使它不是*必须*的。否则，你最终会得到令人困惑和脆弱的代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-09T08:14:44.427

这应该这样做：

```
# handle django 1.4 pickling bug
if hasattr(user, '_wrapped') and hasattr(user, '_setup'):
    if user._wrapped.__class__ == object:
        user._setup()
    user = user._wrapped 
```

我必须写这个，所以我可以将一个用户添加到会话字典中。（SimpleLazyObjects 不可腌制！）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-30T16:29:14.457

```
user= request.user._wrapped if hasattr(request.user,'_wrapped') else request.user 
```

然后你使用`user`而不是`request.user`.

这类似于 UsAaR33 的答案，但单行更适合转换对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-15T19:22:47.563

对于任何想为您的代码编写失败的“小型”单元测试的人，您可以生成一个包装`User`并将其填充到请求中。

```
from django.contrib.auth import get_user_model
from django.test import RequestFactory
from django.utils.functional import SimpleLazyObject

user = get_user_model().objects.create_user(
    username='jacob',
    email='jacob@…',
    password='top_secret',
)

factory = RequestFactory()
request = factory.get('/')
request.user = SimpleLazyObject(lambda: user) 
```

看：

*   [https://github.com/django/django/blob/master/tests/utils_tests/test_lazyobject.py](https://github.com/django/django/blob/master/tests/utils_tests/test_lazyobject.py)用于惰性对象的当前测试。

*   [https://docs.djangoproject.com/en/dev/topics/testing/advanced/#django.test.RequestFactory](https://docs.djangoproject.com/en/dev/topics/testing/advanced/#django.test.RequestFactory)获取有关`RequestFactory`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-24T09:38:28.610

这可能对其他人有帮助并且更清洁。

如果 SimpleLazyObject 包含的实例属于提供的类，则python 方法**isinstance(instance, class)返回。**

```
if isinstance(request.user, User):
    user = request.user 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-22T10:21:38.843

像这样更改您的代码，应该没有问题：

```
from copy import deepcopy

def _attempt(actor):
    actor = deepcopy(actor)
    if actor.__class__ != User:
        raise TypeError 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-13T18:14:31.600

这是`auth_user`Django 中表的模式 -

```
id
password
last_login
is_superuser
username
last_name
email
is_staff
is_active
date_joined
first_name 
```

现在，如果您想`id`这样写-

```
req.user.id 
```

如果你想`username`这样写 -

```
req.user.username 
```

# c# - 在 .NET 中模拟 Python 的 random.choice

> ID：11314908
> 
> 赞同：8
> 
> 时间：2012-07-03T16:06:45.207
> 
> 标签：c#, .net, random

Python的模块“随机”有一个功能[`random.choice`](http://docs.python.org/library/random.html#random.choice)

> **`random.choice(seq)`**
> 从非空序列 seq 返回一个随机元素。如果`seq`为空，则提高`IndexError`.

如何在 .NET 中模拟它？

```
public T RandomChoice<T> (IEnumerable<T> source) 
```

* * *

编辑：几年前我听说这是一个面试问题，但今天这个问题在我的工作中自然而然地出现了。面试问题的陈述有限制

*   '序列太长，无法保存到内存'
*   '你只能在序列上循环一次'
*   '序列没有长度/计数方法' (à la .NET IEnumerable)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T16:16:11.190

要创建一个只迭代一次源的方法，并且不必分配内存来临时存储它，你计算你迭代了多少项目，并确定当前项目应该是结果的概率：

```
public T RandomChoice<T> (IEnumerable<T> source) {
  Random rnd = new Random();
  T result = default(T);
  int cnt = 0;
  foreach (T item in source) {
    cnt++;
    if (rnd.Next(cnt) == 0) {
      result = item;
    }
  }
  return result;
} 
```

当你在第一个项目时，它应该被使用的概率是 1/1（因为这是你迄今为止看到的唯一项目）。当您在第二项时，它应该替换第一项的概率是 1/2，依此类推。

* * *

正如 dasblinkenlight 指出的那样，这自然会使用更多的 CPU，因为它会为每个项目创建一个随机数，而不仅仅是一个随机数来选择一个项目。您可以`IList<T>`按照 Dan Tao 的建议检查源是否实现了 ，并使用使用这些功能获取集合长度并按索引访问项目的实现：

```
public T RandomChoice<T> (IEnumerable<T> source) {
  IList<T> list = source as IList<T>;
  if (list != null) {
    // use list.Count and list[] to pick an item by random
  } else {
    // use implementation above
  }
} 
```

注意：您应该考虑将`Random`实例发送到方法中。否则，如果您两次调用该方法的时间太接近，您将获得相同的随机种子，因为种子是从当前时间创建的。

* * *

测试运行的结果，从包含 0 - 9 的数组中选择一个数字，1000000 次，以表明所选数字的分布没有倾斜：

```
0: 100278
1: 99519
2: 99994
3: 100327
4: 99571
5: 99731
6: 100031
7: 100429
8: 99482
9: 100638 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T16:10:39.347

为了避免对序列进行两次迭代（一次用于计数，一次用于元素），在获取随机元素之前将序列保存在数组中可能是个好主意：

```
public static class RandomExt {
    private static Random rnd = new Random();
    public static T RandomChoice<T> (this IEnumerable<T> source) {
        var arr = source.ToArray();   
        return arr[rnd.Next(arr.Length)];
    }
    public static T RandomChoice<T> (this ICollection<T> source) {
        return source[rnd.Next(rnd.Count)];
    }
} 
```

**编辑**[Chris Sinclair](https://stackoverflow.com/questions/11314908/emulate-pythons-random-choice-in-net/11314962#comment14891681_11314908)实现了一个非常好的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T16:10:03.340

```
private static Random rng = new Random();

...
return source.Skip(rng.next(source.Count())).Take(1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T16:12:47.147

```
 public T RandomChoice<T> (IEnumerable<T> source)
        {
            if (source == null)
            {
                throw new ArgumentNullException("source");
            }

            var list = source.ToList();

            if (list.Count < 1)
            {
                throw new MissingMemberException();
            }

            var rnd = new Random();
            return list[rnd.Next(0, list.Count)];
        } 
```

或扩展名

```
 public static T RandomChoice<T> (this IEnumerable<T> source)
    {
        if (source == null)
        {
            throw new ArgumentNullException("source");
        }

        var list = source.ToList();

        if (list.Count < 1)
        {
            throw new MissingMemberException();
        }

        var rnd = new Random();
        return list[rnd.Next(0, list.Count)];
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T16:14:43.000

我会选择[dasblinkenlight 的答案](https://stackoverflow.com/a/11314962/105570)，但有一点小改动：利用可能已经是索引集合的事实`source`，在这种情况下，您真的不需要填充新数组（或列表）：

```
public static class RandomExt
{
    public static T Choice<T>(this Random random, IEnumerable<T> sequence)
    {
        var list = sequence as IList<T> ?? sequence.ToList();
        return list[random.Next(list.Count)];
    }
} 
```

请注意，我还修改了上述答案的界面，使其与您在问题中引用的 Python 版本更加一致：

```
var random = new Random();
var numbers = new int[] { 1, 2, 3 };
int randomNumber = random.Choice(numbers); 
```

**编辑**：实际上，我更喜欢[Guffa 的回答](https://stackoverflow.com/a/11315054/105570)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T16:09:31.100

好吧，获取序列中所有元素的列表。向随机数生成器询问索引，按索引返回元素。定义什么是 Sequence - IEnumerable 是最明显的，但您需要将其具体化为一个列表，然后才能知道随机数生成器的元素数量。这是顺便说一句，不是模仿，它是实施。

这是一些家庭作业初学者学习课程的问题吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T10:59:02.563

假设有一个扩展方法`IEnumerable.MinBy`：

```
var r = new Random();
return source.MinBy(x=>r.Next()) 
```

该方法`MinBy`不会将序列保存到内存中，它的工作方式类似于`IEnumerable.Min`进行一次迭代（参见[MoreLinq](http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs)或[其他地方](https://stackoverflow.com/a/11326714/284795)）

# javascript - 带有回调的 Node.js setTimeout

> ID：11314909
> 
> 赞同：2
> 
> 时间：2012-07-03T16:06:46.283
> 
> 标签：javascript, debugging, node.js

我正在运行一个 node.js 应用程序，并且有一个每 500 毫秒运行一次的进程。有很多逻辑正在完成，有时我们发现它可能运行超过 500 毫秒 - 这在使用 setInterval 时会导致问题。

我们重新设计了它以使用带有回调的 setTimeout，例如：

```
 var start = function() {

            self.performProcesses(function() {
                setTimeout(function() {
                    start();
                }, 500);
            });
        }

    start(); 
```

问题是有时会停止，这意味着沿途某处回调`performProcesses`没有被击中。有数千行代码可以访问多个对象和文件。

有人会推荐一个好方法来尝试调试它并隔离可能中断的位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:06:23.617

你试过[web-inspector](https://github.com/dannycoates/node-inspector/)吗？

您还可以在循环控制中尝试[使用 Paul Irish anim shim 。](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)如果你调用`requestAnimFrame`after `self.performProcess`，它将以 500ms 的间隔调用。

```
var requestAnimFrame = function (callback) { setTimeout(callback, 500); };

(function animloop () {
  self.performProcesses();
  requestAnimFrame(animloop);
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:11:45.503

当我用 JavaScript 编程时，我使用[Aptana](http://www.aptana.com/ "阿普塔纳")。它是一个名为 Appcelerator 的集合的一部分，它几乎是 Eclipse。Aptana 让您使用 JavaScript 进行开发和调试，因此您可以使用 StepInto、StepOver 等等。

# ios - 为什么 CALayer 不维护它的内容？

> ID：11314910
> 
> 赞同：0
> 
> 时间：2012-07-03T16:06:47.910
> 
> 标签：ios, core-animation, core-graphics

我正在使用 CALayers 来显示几个图像。我通过创建图层并将其内容属性设置为 CGImageRef 来做到这一点。我没有在我的 CALayer 上设置委托。

该层显示正常，但是当另一层移动到第一层之上时，较低层的内容被“擦除”。我假设 CALayer 正在调用默认委托并且什么都不画。如何让我的 CALayer 持久化其内容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:59:50.853

不应通过在顶部添加新图层来擦除较低的图层。我的猜测是下层被您添加的层覆盖（并因此被遮盖）。尝试使新层小于原始层作为测试。

请注意，如果您在图层上调用某些方法（如 setNeedsDisplay），则会导致图层丢弃其内容。

您是否有任何代码可能会强制图层重绘？（就像调用 setNeedsDisplay 一样，如上所述。）这会导致您看到的症状。

# mysql - 在 ac 脚本中连接到 mysql？

> ID：11314912
> 
> 赞同：4
> 
> 时间：2012-07-03T16:06:51.973
> 
> 标签：mysql, c, g-wan

我不熟悉使用 gwan 服务器（[链接](http://gwan.com/)）以及在 c 中编程。我想知道在 gwan 服务器的 ac 脚本中使用 mysql 的最简单方法是什么？

[我已经尝试过这里](http://forum.gwan.com/index.php?p=/discussion/120/sample-model-view-controller-mvc-with-g-wan/p1)使用的 dbi.c，项目页面可以在[这里](http://libdbi.sourceforge.net/)找到，但也发现 mysql 本身有 ac API，你可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/c.html)找到。

有人有使用其中一个或两个的经验吗？有哪些优点/缺点？对于像我这样的菜鸟来说，是否有其他库可以让连接到 mysql 变得容易？

任何帮助表示赞赏。

谢谢！

**[编辑]** libdbi 线程也是安全的吗？似乎不是。

**[编辑 2]** 似乎 mysql lib 本身是一种简单的方法，除非您认为以后可能会切换数据库类型，因为 libdbi 似乎能够拥有不同的驱动程序，这对抽象很有好处。

如果我在处理程序的主函数中有任何“mysql 代码”，对我来说与 GWAN 相关，**它似乎不安全**并且间歇性地导致随机错误，但是如果我将“mysql 代码”放入 init 函数并**放入我需要的任何数据**在从全局指针之一访问**的 kv 存储中，***随机错误完全消失了*。（我使用的是 libdbi，我认为 mysql api 是一样的）

希望这可以帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:07:01.003

我总是更喜欢使用本机 c api...

```
#pragma link "/usr/lib/libmysqlclient.so"

#include "gwan.h"
#include <mysql/mysql.h>

int
main (int argc, char **argv)
{
  MYSQL_RES *result;
  MYSQL_ROW row;
  MYSQL conn, *conn_h;

  conn_h = mysql_init (&conn);
  if (!conn_h)
    {
      return 200;
    }

  if (!mysql_real_connect (conn_h, "localhost", ctx->usr, ctx->psw, NULL, 0, NULL, 0))
    {
      mysql_close (conn_h);
      return 200;
    }

  mysql_select_db (conn_h, "");

  char *query = "";

  if (mysql_query (conn_h, query))
    {
      mysql_close (conn_h);
      return 200;
    }

  result = mysql_store_result (conn_h);
  if (!result)
    {
      mysql_close (conn_h);
      return 200;
    }

  if (mysql_num_rows (result) == 0)
    {
      return 200;
    }

  while ((row = mysql_fetch_row (result)))
    {
      /* do something with row[i] */
    }

  mysql_free_result (result);
  mysql_close (conn_h);

  return 200;  // Ok
} 
```

请记住，如果您计划生成线程，则需要初始化 mysql 库（此代码不是线程安全的）。

希望这对您有所帮助。

# excel - CSV 将日期从美国格式转换为英国格式只会改变一些，而不是全部

> ID：11314915
> 
> 赞同：0
> 
> 时间：2012-07-03T16:07:08.223
> 
> 标签：excel, csv

我有一个包含几个日期列的 CSV 文件。它是使用美国格式 dd/mm/yyyy 创建的。我需要将这些日期切换到英国 dd/mm/yyyy。保存文件似乎很好。但是当我重新打开文件时，如果第一个数字是一个，那么许多日期都没有零。一个例子：

保存为 - 2012 年 3 月 3 日重新打开时 - 2012 年 3 月 3 日

我正在使用 Excel 2007 并从 xlsx 保存到所有可能的 CSV 选项（mac、windows、ms-dos ..）

任何人都知道为什么会发生这种情况，或者更重要的是解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:11:48.113

对于 Windows 用户，请转到控制面板，选择区域和语言选项，然后选择您想要的日期格式。在 Windows XP 中，dd/mm/YYYY 格式选项只有在您选择“英语（英国）”时才会出现。我没有尝试导出，但这修复了 csv 文件的导入。

# php - 在 PHP5 中通过引用返回是否有有效的技术用途

> ID：11314916
> 
> 赞同：0
> 
> 时间：2012-07-03T16:07:09.097
> 
> 标签：php, oop, php-5.3

我的问题是对以下问题的跟进：[用 & 符号启动 php 函数是什么意思？](https://stackoverflow.com/questions/1676897/what-does-it-mean-to-start-a-php-function-with-an-ampersand)

问题中使用的示例代码是这样的：

```
class FacebookRestClient {
...
    public function &users_hasAppPermission($ext_perm, $uid=null) {
        return $this->call_method('facebook.users.hasAppPermission', 
        array('ext_perm' => $ext_perm, 'uid' => $uid));
    }
...
} 
```

当我们已经有一个引用（$this）时，为什么还需要一个引用？

选择的[答案](https://stackoverflow.com/a/1676911/671191)引用了[PHP 手册中关于返回参考的以下内容](http://php.net/manual/en/language.references.return.php)

> 当您想使用函数查找应该将引用绑定到哪个变量时，按引用返回很有用。不要使用按引用返回来提高性能。引擎会自行自动优化。仅在您有正当的技术理由时才返回参考资料。

第二[个答案](https://stackoverflow.com/a/1676963/671191)给出了 PHP4 需要这种技术的原因。但是我没有找到为什么 PHP5 需要它的答案非常有说服力。

有人知道在 PHP5 中使用这种技术的任何正当理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:12:32.200

是的，这是我的代码库中的一个示例。

我为每个模型都有一个“工厂”类，例如 UserFactory。当我调用 UserFactory::findOne() 时，我返回对模型的引用，该引用存储在 UserFactory 的数组中。

我这样做是为了如果我获取用户模型并修改其中的某些内容，然后稍后在我的代码中再次获取它，即使我从未返回数据库，它也会使用新信息进行更新。

例如：

```
<?php
$user = UserModel::findOne([ '_id' => 151 ]);
$user->status = 'disabled';

// Much later
$user = UserModel::findOne([ '_id' => 151 ]);
if ( $user->status != 'disabled' ) {
    // Do stuff
} 
```

通过引用返回是完成此任务的好方法，而无需对我的数据库进行两次调用。

# asp.net - 使用“后退”按钮时，强制“页面已过期”消息而不是从服务器刷新页面

> ID：11314917
> 
> 赞同：0
> 
> 时间：2012-07-03T16:07:13.340
> 
> 标签：asp.net, caching, browser-cache

我创建了一个包含两个页面的简单 ASP.NET 3.5 Web 应用程序。每个页面都有一个显示时间的标签和一个回发按钮。在每个页面的 Page_Load 中，我有以下内容：

```
 Response.ClearHeaders();
        Response.AppendHeader("Cache-Control", "no-cache"); //HTTP 1.1 
        Response.AppendHeader("Cache-Control", "private"); // HTTP 1.1 
        Response.AppendHeader("Cache-Control", "no-store"); // HTTP 1.1 
        Response.AppendHeader("Cache-Control", "must-revalidate"); // HTTP 1.1 
        Response.AppendHeader("Cache-Control", "max-stale=0"); // HTTP 1.1  
        Response.AppendHeader("Cache-Control", "post-check=0"); // HTTP 1.1  
        Response.AppendHeader("Cache-Control", "pre-check=0"); // HTTP 1.1  
        Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.1  
        Response.AppendHeader("Keep-Alive", "timeout=3, max=993"); // HTTP 1.1  
        Response.AppendHeader("Expires", "Mon, 26 Jul 1997 05:00:00 GMT"); // HTTP 1.1 
```

如果用户单击“返回”按钮，我想强制显示“页面已过期”消息。但是，正在发生的事情是后退按钮显示上一页，而不是从缓存中提取，而是刷新页面。标签将更新为当前时间。我不希望页面刷新，而是显示“页面已过期”消息。我怎么能强迫它？我已经使用 IE9 对此进行了测试，但我需要所有浏览器的行为都相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:12:48.523

“页面已过期”消息通常在浏览器向页面发送 POST 请求并且用户希望刷新或返回该页面时给出。要强制它，您必须使每个页面都成为 POST 请求。[该线程](https://stackoverflow.com/questions/9748593/jquery-convert-get-url-to-post)可能能够为您提供将所有链接（即 GET 请求）转换为 POST 请求的 JavaScript 代码。

或者，您可以使用 JavaScript 或 cookie 来保存访问过的页面的历史记录，如果用户试图返回某个页面，您可以使用它来重定向它们或给他们一条消息。

# xna-4.0 - 如何在一段时间后结束游戏（在 XNA 中）

> ID：11314922
> 
> 赞同：1
> 
> 时间：2012-07-03T16:07:27.720
> 
> 标签：xna-4.0

我使用 XNA Game Studio 创建了一个游戏。它由一个随机移动到任何地方的正方形组成，单击它时，分数会增加一。

现在，我想做的是，我想在 100 秒的时间间隔后结束它。那么我该怎么做呢？我应该在哪里写这部分代码？也就是说，用什么方法？我对 XNA 很陌生。距离我开始学习它只有两天时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:20:35.203

在您的更新循环中，检查经过的游戏时间是否大于 100 秒：

```
int counter = 0;

protected override void Update(GameTime gameTime)
{
    counter += gameTime.ElapsedGameTime.TotalSeconds;
    if ( counter > 100 )
    {
        //end the game...
    }
} 
```

如果您想要游戏开始后的总游戏时间，您可以使用该`TotalGameTime`属性代替，那么您将不需要计数器。

# php - array_multisort 和自然排序

> ID：11314923
> 
> 赞同：2
> 
> 时间：2012-07-03T16:07:32.823
> 
> 标签：php, mysql

很高兴认识你的家人。

我有这个多维数组：

```
$data[] = array('name' => 'Mini 16', 'id' => 105);
$data[] = array('name' => 'Mini 15', 'id' => 5650);
$data[] = array('name' => 'Mini 100', 'id' => 9889);
$data[] = array('name' => 'Mini 20', 'id' => 587); 
```

我想在自然排序中按名称列排序数组，但对我来说很难。

```
$data[] = array('name' => 'Mini 15', 'id' => 5650);
$data[] = array('name' => 'Mini 16', 'id' => 105);
$data[] = array('name' => 'Mini 20', 'id' => 587);
$data[] = array('name' => 'Mini 100', 'id' => 9889); 
```

我希望你的帮助问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:13:50.463

您可以使用[`usort()`](http://php.net/usort)自定义函数对数组进行排序，并使用[`strnatcmp()`](http://php.net/strnatcmp)对两个字符串进行自然比较，如下所示：

```
usort( $data, function( $el1, $el2) { return strnatcmp( $el1['name'], $el2['name']); }); 
```

所以之前，你的数组是这样的：

```
array(4) {
  [0]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 16"
    ["id"]=>
    int(105)
  }
  [1]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 15"
    ["id"]=>
    int(5650)
  }
  [2]=>
  array(2) {
    ["name"]=>
    string(8) "Mini 100"
    ["id"]=>
    int(9889)
  }
  [3]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 20"
    ["id"]=>
    int(587)
  }
} 
```

[现在它看起来](http://viper-7.com/KTp0lg)像：

```
array(4) {
  [0]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 15"
    ["id"]=>
    int(5650)
  }
  [1]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 16"
    ["id"]=>
    int(105)
  }
  [2]=>
  array(2) {
    ["name"]=>
    string(7) "Mini 20"
    ["id"]=>
    int(587)
  }
  [3]=>
  array(2) {
    ["name"]=>
    string(8) "Mini 100"
    ["id"]=>
    int(9889)
  }
} 
```

请注意，对于较低版本的 PHP，您将无法使用匿名函数，而是需要以下内容：

```
usort( $data, create_function( '$el1, $el2', 'return strnatcmp( $el1[\'name\'], $el2[\'name\']);' )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:49:21.647

如果您使用的是 PHP 5.4 或更新版本，则可以使用`array_multisort`该`SORT_NATURAL`标志。只需遵循[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)文档中的示例 #3，但添加`SORT_NATURAL`选项。

# php - 列名的占位符

> ID：11314930
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:07:46.077
> 
> 标签：php, mysql, sql, placeholder

我正在编写 sql 代码，它获取它应该从自定义 php 代码中查找表的列的名称。

这部分与位置有关，即国家、州、邮政编码等。我有它，以便在 php 代码上，用户填写与他们的表格中的这些相对应的字段。然而，尽管这些都是可能的，但它们可能并不具备所有的可能性，比如邮政编码。

如果我的 php 没有得到任何 zip 列名，它会抛出整个代码。Null 列对我来说没问题，但我正在努力寻找一种方法来为该列制作占位符。如果用户没有输入任何内容并因此为空，是否有一个 sql 占位符我可以告诉 php 变量变为？

```
$addressColumn = $_POST["address"];
$stateColumn = $_POST["state"];
$zipColumn = $_POST["zip"]; 
$cityColumn = $_POST["city"];
$countryColumn = $_POST["country"];
$database = $_POST["database"]; 
```

如果其中之一未发布在 html 页面上，则代码中断。建议？如果有人知道 sql 将接受的占位符值，我可以将 null 值更改为其他值，然后在我获取行时将 null 放在它下面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:36:31.697

我认为从列名开始工作不是一个好主意。SQL 没有像 stree 或 ZIP 这样的概念，而只是 stings 和数字或日期。

我建议您创建一个将所有表列作为属性的*类*，将业务逻辑放在正确的位置（PHP），以便“查询”方法（查询数据库的那个）可以验证/操作/管理状态你的对象。

绘制 for 的 PHP 可以从类中获取所有信息（例如： *get_object_vars* ）而不是 DB。

如果您担心将数据库映射到类中，可以查看**ActiveRecords**。

# scorm - 当 writeSatisfiedStatus 应该发生

> ID：11314938
> 
> 赞同：1
> 
> 时间：2012-07-03T16:08:20.823
> 
> 标签：scorm, scorm2004

如果本地目标的 writeSatisfiedStatus 设置为 true，在这种情况下，**什么时候**应该将目标满足状态从本地目标准确地复制到全局目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:26:20.260

一旦学习者完成 SCO，LMS 就会触发汇总过程，将满意状态的值设置为真或假。如果没有发生这种情况，满意状态的值将保持为空。

# python - 将多维数组从 perl 脚本传递到 python 脚本

> ID：11314940
> 
> 赞同：1
> 
> 时间：2012-07-03T16:08:32.850
> 
> 标签：python, arrays, perl

这就是我正在做的事情：

我正在获取一个多维数组，或者更确切地说，是一个哈希数组，并尝试将它从我的 perl 脚本传递到 python 脚本中。目前我正在将其转换为 json，然后将 json 字符串作为文字字符串作为参数传递给 python 脚本。

哈希数组类似于以下示例：

```
 %HoH = (
id10001 => {
    lat   => "180",
    long  => "-180",
},
id10002 => {
    lat   => "180",
    long  => "-180",
},
id10003 => {
    lat   => "180",
    long  => "-180",
}
); 
```

然后我在我的 perl 脚本中，变成一个 json 字符串：

```
{
    "id10001": { "lat": "180", "lon": "-180" },
    "id10002": { "lat": "180", "lon": "-180" },
    "id10003": { "lat": "180", "lon": "-180" },
} 
```

然后将其传递给python脚本。python 脚本将 json 字符串解码回原始构造的数组结构。

**有没有更好的方法将数组或多维数组从 perl 脚本传递到 python 脚本？**

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:14:58.610

不，根据其定义，序列化是通过纯字符缓冲区（例如命令行参数、文件或其他任何内容）传递数据的唯一方法。只要特定的序列化格式——JSON 就是这种情况——自然地涵盖特定于语言的结构，你就准备好了。

如果您愿意，您可以尝试使用 Perl 和 Python 都可用的序列化格式的基准测试库，看看哪种情况会更快，但至少 Perl 的 JSON 的 XS 实现速度非常快，并且通常在速度上优于其他可用的序列化器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:17:40.073

您的 JSON 结构似乎很奇怪；与您在 Perl 中显示的结构类似的结构更像

```
{
    "id10001": { "lat": "180", "lon": "-180" },
    "id10002": { "lat": "180", "lon": "-180" },
    "id10003": { "lat": "180", "lon": "-180" },
} 
```

（尽管您在 Perl 中有括号约定，但您有一个散列散列，而不是一个散列数组。此外，对于纬度/经度值使用字符串而不是数字有什么特别的原因吗？）

但除此之外，你有正确的想法。

# java - 在 Java 中读取平面文件中的 XML 文件

> ID：11314943
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:08:53.710
> 
> 标签：java

我正在读取一个 xml 格式的文件（具有元素、属性、..）。但是，文件中的内容没有回车或空格，并且所有内容都在一行中。

我正在搜索一个元素，并且需要解析该元素的值。

我正在考虑使用 XMLStreamReader 来读取和解析值。

内容是否都在一行中是否重要？或者，还有其他我应该研究的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:10:47.737

不，所有内容都在一行上并不重要 - XML 解析器将忽略回车等空格！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:12:11.780

不，没关系。将会发生的是，当解析器创建 DOM 结构时，它将忽略 while 空格或换行元素。XMLStreamReader 将内容视为事件因此，如果您没有空格，则不会触发空格或换行事件。它只会返回您的 xml 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:11:48.347

内容是否在元素之间有空格无关紧要。

```
<foo><bar></bar></foo> 
```

是相同的

```
<foo>
  <bar>
  </bar>
</foo> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T16:14:04.350

查看 XMLStreamReader 上的[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamReader.html#next%28%29)，您应该没有任何问题。您只需调用 next() ，它将迭代到下一个元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T16:19:53.090

试试这个............

如果文件是 XML 格式，则`whether all the xml script is in one line or divided into` `multiple lines, its` **ONE AND THE SAME.......**

**要解析**XML 文件，**请使用以下方法之一**

**1.** SAX（简单 XMAL 解析器）

**2.** DOM（文档对象模型）

**3.**拉解析器

# php - 从移动版切换到完整网站（桌面版）

> ID：11314944
> 
> 赞同：8
> 
> 时间：2012-07-03T16:08:56.037
> 
> 标签：php, mobile

我正在使用此代码将用户从桌面版本引导到我的移动网站。

```
 <?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://mywebsite.com/mobile');
?> 
```

我想为用户提供从移动网站切换回桌面版本的选项，但此代码会将他们重定向回移动网站。我想知道是否可以创建一个 if 语句来强制浏览器停留在该页面上。例如，如果我可以使用 www.mywebsite.com?device=desktop 从移动网站链接回来并修改代码以识别 url。我对 PHP 的了解有限，因此将不胜感激任何帮助。

解决方案：

** 我尝试使用评论中建议的会话功能，但我遇到了移动设备问题。似乎某些移动浏览器不能很好地处理会话。

** 我改用 cookie 并在这篇[文章](https://stackoverflow.com/questions/5844966/view-full-site-mobile-site-option)的帮助下解决了这个问题。下面是我正在使用的代码。

** 注意：您可以修改 setcookie 的检测代码和时间以满足您的需要

```
 <?php

    if (isset($_COOKIE['nomobile'])) {
      $version = "desktop";
    } else {

    if (preg_match('/iPhone|(...etc...)/', $_SERVER['HTTP_USER_AGENT'])) {
       $version = "mobile";
    } 

if ($version == "mobile") {
header('Location: http://yourwebsite.com/mobile');
}

    ?> 
```

您可以使用此代码创建 cookie

```
<?php 
setcookie('nomobile', 'true');
   header('Location: http://yourwebsite.com');
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:21:15.597

当用户单击“完整站点”链接时，您可以通过将变量附加到 URL 来将变量传递给 PHP。以下是移动网站上 HTML 链接的示例：

```
<a href="http://mywebsite.com/?v=desktop">Full Site</a> 
```

在 PHP 中，您传入的变量将存储在其中`$_GET['v']`（'v' 是版本，但命名是任意的）。在您的 PHP 代码中，您首先需要检查是否`$_GET['v']`已设置。如果*已*设置，则需要检查它是否设置为“桌面”。如果两者都为真，那么您应该设置一个*会话*变量，这样如果用户刷新页面，他们就不会再次被重定向到移动站点。

现在您需要检查会话变量以查看是否应该重定向用户。同样，您需要首先检查是否`$_SESSION['v']`已设置。如果*未*设置，则应重定向用户。如果*已*设置，则需要检查它是否设置为“桌面”。如果*未*设置为“桌面”，则应重定向用户。下面是代码的样子：

```
// Set a session variable if the user prefers the desktop version
if (isset($_GET['v']) && $_GET['v'] == 'desktop') {
    $_SESSION['v'] == 'desktop';
}

// Detect browser and redirect mobile users unless they've already opted out
if (!isset($_SESSION['v']) || (isset($_SESSION['v']) && $_SESSION['v'] != 'desktop')) {
    // Place browser detection and redirection code here
} 
```

PHP 的优点之一是它会为您处理会话，但您必须明确告诉 PHP 这样做。您可以使用需要成为会话一部分的**每个**`session_start()`页面顶部的函数来执行此操作。在这种情况下，您需要在桌面网站页面和移动网站页面的顶部添加一个声明。**`session_start()`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:16:51.213

```
<?php 
    $useragent = $_SERVER['HTTP_USER_AGENT']; 
    if(preg_match('ultralongregex', substr($useragent,0,4)) && (!isset($_GET['device']) || $_GET['device'] != 'desktop'))
    header('Location: http://mywebsite.com/mobile'); 
?> 
```

使用 $_GET 您可以获取 query_string 中的变量（带有 url 的 ?hello=foo&bar=world）。使用 $_GET['device'] 您可以显式使用 ?device=desktop。

我们问：如果变量未设置或变量不是桌面（设置时）我们重定向到移动页面。

**编辑：** 为了改进这一点，您可以将 GET 存储在 SESSION 变量中（会话将在您打开页面时启动，并且只会在您关闭浏览器时删除）：

只需添加一些部分并修改代码：

```
<?php 
    //Check if GET['device'] is set AND the session variable is not set. If true, set the session variable
    if(isset($_GET['device']) && !isset($_SESSION['device'])) $_SESSION['device'] = $_GET['device'];
    //code from top
    $useragent = $_SERVER['HTTP_USER_AGENT']; 
    //Modify here: $_SESSION instead of $_GET
    if(preg_match('ultralongregex',substr($useragent,0,4)) && (!isset($_SESSION['device']) || $_SESSION['device'] != 'desktop'))
    header('Location: http://mywebsite.com/mobile'); 
?> 
```**

# ruby-on-rails-3 - F 选择显示数据库中的当前值

> ID：11314948
> 
> 赞同：0
> 
> 时间：2012-07-03T16:09:25.533
> 
> 标签：ruby-on-rails-3

我有以下作为我的 f 选择

如何修改以显示数据库中的内容？

```
 <%= f.select :phase_names, options_for_select([["Select One", "", @phase_names_string_value], "RFP Stage", "Pre Contract", "Awarded", "Unsuccessful", "Completed"]), :class => 'inputboxes' %> 
```

阶段名称来自数据库中的第二个表。但是，每个项目一次只能处于一个阶段。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:35:07.547

```
options_for_select(container, selected = nil) 
```

容器是 display\value 组合，所以你需要`[[value,name],[value,name]]`或者如果它相同`[name]`

喜欢`["RFP Stage", "Pre Contract", "Awarded", "Unsuccessful", "Completed"]`

现在您有了容器，您需要一些东西来匹配所选值

```
@current_value = MyModel.find(1).vari  # Assume MyModel table with id has col vari=Completed 
```

然后，你可以做

```
select_tag "select_name", options_for_select(["RFP Stage", "Pre Contract", "Awarded", "Unsuccessful", "Completed"].insert(0, "Select One"), @current_value) 
```

另一种方法是拥有一个对象集合，其中包含选项，让我们说`:name`（显示）和`:value`（用作值）其中 selected 有`:phase_names = :value`

```
f.collection_select :phase_names, [:name => "rStage", :value => "Pre Contract"] , :value, :name, {:include_blank => 'Select one'} 
```

就像 activerecord 类一样工作

# iphone - iPhone在关闭模式视图后重用发件人

> ID：11314958
> 
> 赞同：0
> 
> 时间：2012-07-03T16:10:27.187
> 
> 标签：iphone, objective-c

我的应用程序上有 15 个按钮，它们显示为图像。当我单击图像时，会调用 getEventContact 函数，该函数会调出模态视图控制器。在下一个视图中，选择了一个联系人 - 模式视图被关闭并运行 setEventContact 函数（以返回选定的联系人（这是它自己的类））。

有没有办法确定触发 getEventContact 函数的前一个发件人，因为它可能是 15 个按钮之一。

```
-(IBAction)getEventContact:(id)sender {
    [self performSegueWithIdentifier:@"selectContact" sender:self];
}

-(void)setEventContact:(Contact *)selectedContact
{
    //do something
} 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:56:32.987

```
SomeType *someVariable;

-(IBAction)getEventContact:(id)sender 
{
    someVariable = sender;
    [self performSegueWithIdentifier:@"selectContact" sender:self];
}

-(void)setEventContact:(Contact *)selectedContact
{
    //not a real method
    [someVariable someMethod];
} 
```

# asp.net-mvc-3 - 将图像发布到墙用户推特

> ID：11314967
> 
> 赞同：0
> 
> 时间：2012-07-03T16:10:50.700
> 
> 标签：asp.net-mvc-3, c#-4.0, twitter, oauth-2.0

我知道可以使用 TweetWithMedia 在用户 Twitter 的墙上发布图像，

问题是：有可能只发布一个 url 并且 twitter 检测到这是一张图片吗？不使用 TweetWithMedia（TweetWithMedia 上传图片，我不想上传图片）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:29:55.883

当然，只需使用普通`statuses/update`端点上传包含图像链接的推文。然后实现新的[Twitter Cards](https://dev.twitter.com/docs/cards)功能以将它们链接为图像。

# dotnetnuke - Dot Net Nuke 网站别名

> ID：11314968
> 
> 赞同：1
> 
> 时间：2012-07-03T16:10:53.377
> 
> 标签：dotnetnuke

我的 DNN 问题还在继续。站点别名是 s-fr-dnn/MNTCDNN/accr2011（我没有设置）。有人建议我删除别名的 MNTCDNN 部分（现在它是 s-fr-dnn/accr2011）。我这样做了，现在我得到“找不到资源错误”。因此，我决定将其改回 s-fr-dnn/MNTCDNN/accr2011，但我不断收到“此站点别名无效”错误。怎么可能无效？它只是被贴上了这样的标签。

在 ISS 中，有一个默认网站，其下是 MNTCDNN（如果这有帮助的话）。

这里有什么问题的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:26:26.917

埃里克，

一些想法。

1.  要从路径中删除虚拟目录，您必须物理移动服务器上的文件。这就是为什么你的第一轮尝试是一个问题。
2.  关于您的更改，由于您直接在数据库中进行了更改，因此 DNN 会大量缓存门户别名。您将需要回收应用程序池以使您的更改可用。

# c# - 重新排序用户控件在 ASP.NET 页面上的位置

> ID：11314973
> 
> 赞同：0
> 
> 时间：2012-07-03T16:11:06.147
> 
> 标签：c#, jquery, asp.net, webforms

我正在处理具有以特定布局排列的用户控件的页面。我正在修改该页面以支持根据用户的偏好重新排序位置。所以，基本上，在加载时，我有关于我需要放置不同用户控件的位置的信息。

我可以想到两种方法：

*   在客户端进行重新排序。这对用户来说并不理想，因为他们看到重新排序正在发生。
*   在服务器端进行重新排序。这需要我进行大量重写以根据偏好动态加载用户控件。

还有其他方法可以完成我想做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:16:26.340

我建议在客户端重新安排，因为

1.  您将保存回发。
2.  您将使网站无缝。

你怎么能这样

1.  使用一个包含所有控件的主 div 和另一个包含加载图像的主 div。在使用 javascript 重新排列控件时切换可见性，或
2.  您可以设置可见性：隐藏到您的身体，然后重新安排设置可见性：可见

这种方法的缺点是您必须使用绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:16:20.720

有一种更简单的方法；渲染由渲染它们的父容器控制。可以创建一个容器，并完全控制其子项的呈现顺序（通过覆盖 RenderChildren 方法）。这不是最简单的选择，但它可以工作。步骤是：

*   创建一个继承自 ContainerControl 的类
*   覆盖 RenderChildren 方法
*   在此方法中，它将呈现容器中的子项，覆盖它，不调用它的基类版本，并将实例获取到控件并呈现它们。这就是出现并发症的地方，因为您必须这样做。

# uitableview - 表格视图顶部的工具栏

> ID：11314975
> 
> 赞同：1
> 
> 时间：2012-07-03T16:11:15.723
> 
> 标签：uitableview, ios5, uitoolbar, uistoryboard

我正在尝试实现在 tableview 顶部显示工具栏。我正在使用故事板为 iOS5 工作我需要一个工具栏，因为它需要以导航控制器不允许我这样做的方式进行自定义。下图显示了我想要实现的目标：

![客观的](../Images/cbd38dacaeb2d3599798a10a7ee2b4af.png)

左右白色箭头是我认为使用导航控制器无法实现的。现在我必须显示所有内容（屏幕截图来自 iphone 模拟器），但我的问题是工具栏随表格滚动，我希望它保持在顶部。我认为这是因为我在故事板中连接事物的方式。下一张图片显示了故事板中视图的快照：

![大纲](../Images/1bc23678bcc66a47e2ae04bf864ef1ae.png)

控制器是 UITableViewController 的子类。工具栏位于 tableview 内，因为 StoryBoard 编辑器不允许我将其放在其他任何地方。

我试图从情节提要创建一个新的通用视图控制器，删除一个工具栏和一个表格视图，然后将控制器的类型设置为我的自定义 UITableViewController。然后情节提要确实允许我将工具栏放在顶部，然后是表格视图。问题是当我运行这个版本时，程序以

```
libc++abi.dylib: terminate called throwing an exception 
```

所以现在我不知道该怎么办。有什么办法可以让工具栏保持在顶部？我可以使用导航控制器（使用情节提要）来完成我的目标，从而使事情变得更容易吗？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:42:14.993

根据您的行为方式，静止或滚动。您可以将子视图添加到

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, toolbarHeight)];
[self.navigationController.navigationBar addSubview:myView] 
```

在“myView”中，您可以添加您需要的所有按钮。然后您可以将第一个单元格留空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:15:43.653

我将从一个简单的 ViewController 开始，而不是使用 TableViewController，然后添加一个 TableView 和一个工具栏。这将需要更多代码，但我看不出任何“模板”控制器如何让你做你想做的事。

# interpreter - C89 中的高级解释语言

> ID：11314977
> 
> 赞同：0
> 
> 时间：2012-07-03T16:11:20.947
> 
> 标签：interpreter, c89

我需要任何用 C89 编写的高级语言解释器。我有哪些选择？

我想采用这种语言并可能对其进行扩展，以支持主机平台的一些低级操作系统相关功能。

解释语言可以是任何高级脚本风格的风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:48:11.440

经过一番寻找，我想要的是一种扩展语言。最强的竞争者是Lua。

这里有一个很好的讨论： [这里](http://developers.slashdot.org/story/04/01/05/2143227/lightweight-scriptingextension-languages)

# python - 如何递归调用jinja2中的宏？

> ID：11314980
> 
> 赞同：10
> 
> 时间：2012-07-03T16:11:30.307
> 
> 标签：python, code-generation, jinja2

这是我的 jinja 模板，用于从我的数据模型生成 C# 代码

```
using System;

namespace {{ domain["ns"] }} {
{% for class in domain["content"] %}
    public class {{ class["name"] }} {

    #region Inners
        {{ class["innerClass"] }}
    #endregion

    #region Props
    {% for field in class["content"] %}
        {% if field["readonly"] == "true" %}
            {% set readonly="private" %}
        {% else %}
            {% set readonly="" %}
        {% endif %}
        public {{ field["type"] }} {{ field["name"] }} {get;
                {{ readonly }} set{

                    if ({{ field["constraint"] }}){
                        {{ field["name"] }}=value;
                    }else {
                        throw new Exception("Inserted value for {{ field["name"] }} is not valid!");
                    }
                }
        }
    {% endfor %}
    #endregion
    }
{% endfor %}
} 
```

这是我的问题，为了生成内部类，我想在我的数据模型上递归循环，如何将 class["innerClass"] 作为参数传递给我的第一个 for 语句？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T18:14:54.213

您可以使用[宏](http://jinja.pocoo.org/docs/templates/#macros)，编写一个用于类渲染的宏，然后递归调用它：

```
{% macro render_class(class) -%}
class {{ class.name }}
{
{% for field in class.fields %}
    int {{ field }};
{% endfor %}
{% for subclass in class.subclasses %}
{{ render_class(subclass) }}
{% endfor %}
}
{%- endmacro %}

{% for class in classes %}
{{ render_class(class) }}
{% endfor %} 
```

这很好用，但**没有处理 subclasses 的正确缩进**，产生如下代码：

```
class Bar
{
    int meow;
    int bark;

class SubBar
{
    int joe;
    int pete;
}
} 
```

# html - 计算 HTML 元素的内部文本字母

> ID：11314986
> 
> 赞同：1
> 
> 时间：2012-07-03T16:11:51.870
> 
> 标签：html, selenium

有没有办法计算 HTML 元素的内部文本的字母，而不计算内部元素文本的字母？

我使用 Selenium 库尝试了“WebElements”的“.getText()”方法，但这计算了 (eG "<body><div>test</div></body>" 中的内部 web 元素的内部文本“div”**和**“body”元素产生 4 个字母，而不是“body”元素的**0**）

我是否必须使用额外的 HTML 解析库，如果是，您会推荐哪个？

我正在使用Java 7 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:40:18.603

基于[this answer for a similar question](https://stackoverflow.com/a/9956009/1273080)，我为您准备了一个解决方案：

这段 JavaScript 接受一个元素，遍历它的所有子节点，如果它们是文本节点，它会读取它们并将它们连接起来返回：

```
var element = arguments[0];
var text = '';
for (var i = 0; i < element.childNodes.length; i++)
    if (element.childNodes[i].nodeType === Node.TEXT_NODE) {
        text += element.childNodes[i].textContent;
    }
return text; 
```

我将此脚本保存到一个`script.js`文件中，并将其加载到单个`String`via[`FileUtils.readFileToString()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File,%20java.lang.String%29)中。你也可以使用 Guava's [`Files.toString()`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/io/Files.html#toString%28java.io.File,%20java.nio.charset.Charset%29)。或者只是将其嵌入到您的 Java 代码中。

```
final String script = FileUtils.readFileToString(new File("script.js"), "UTF-8");
JavascriptExecutor js = (JavascriptExecutor)driver;

...

WebElement element = driver.findElement(By.anything("myElement"));
String text = (String)js.executeScript(script, element); 
```

# c# - C# Linq to Entites，从一组具有相同日期的实体中获取第一个实体

> ID：11314987
> 
> 赞同：1
> 
> 时间：2012-07-03T16:11:54.037
> 
> 标签：c#, linq-to-entities

我有一个看起来像这样的表：
关键日期...姓名...状态...
**（ID）五月**...
（ID）五月...
（ID）五月...
**（ID）六月**...
（ ID）六月...
（ID）六月...
**（ID）七月**...
（ID）七月...

我需要以粗体显示实体，因为这是集合的整体属性。所以它看起来像：

(ID) 五月 ...
(ID) 六月 ...
(ID) 七月 ...

实体集通过以下方式检索：

```
var status = from a in ObjectContext.InspectionReadings
                     where a.InspectionID == new Guid(inspID)
                     && a.DateTaken > before
                     && a.DateTaken <= DateTime.Now
                     orderby a.DateTaken descending, a.Status descending
                     select a; 
```

现在我只需要过滤掉我不想要的。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:18:14.583

您需要使用该`group by`子句...

```
var status = from a in ObjectContext.InspectionReadings
             where a.InspectionID == new Guid(inspID)
             && a.DateTaken > before
             && a.DateTaken <= DateTime.Now
             group a by a.DateTaken.Month into g
             from m in g
             select new 
             {
               g.Key, g.OrderBy(x => x.DateTaken).First()
             }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:18:35.587

您可以通过[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534492.aspx)调用来完成此操作[`First`](http://msdn.microsoft.com/en-us/library/bb535183.aspx)。

例如，给定您的原始查询`status`，您可以执行以下操作：

```
var firstStatuses = 
    status.GroupBy(i => i.DateTaken).Select(g => g.First()); 
```

请注意，LINQ-to-Entities 可能无法根据基础数据库中 select 子句的要求正确分组数据。

有了它，您可以随时调用[`AsEnumerable`](http://msdn.microsoft.com/en-us/library/bb335435.aspx)以强制查询发生在内存中的对象上：

```
var firstStatuses = 
    status.AsEnumerable().GroupBy(i => i.DateTaken).Select(g => g.First()); 
```

需要注意的是，您可能应该根据要退回的物品订购每个组（如果它们尚未正确订购）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T16:35:31.243

您可以编写一个仅查看 DateTaken 字段的 IEqualityComparer，然后像这样使用 Distinct()：

```
public class DateTakenComparer : IEqualityComparer<InspectionReading>
{
    public bool Equals(InspectionReading x, InspectionReading y)
    {
        return x.DateTaken == y.DateTaken;
    }

    public int GetHashCode(InspectionReading obj)
    {
        return obj.GetHashCode();
    }
} 
```

接着：

```
var statuses = ObjectContext.InspectionReadings
    .Distinct(new DateTakenComparer())
    .OrderByDescending(x => x.DateTaken)
    .ToList(); 
```

# r - R中最少2个向量

> ID：11314989
> 
> 赞同：-3
> 
> 时间：2012-07-03T16:11:58.550
> 
> 标签：r, for-loop, min

> **可能重复：**
> [计算一对向量的最小值](https://stackoverflow.com/questions/7770535/compute-the-minimum-of-a-pair-of-vectors)

我有两个相同长度的向量：

```
a <- rnorm(40)
b <- rnorm(40) 
```

现在，我想创建第三个向量 c，它的每个点都有 a 和 b 的次要值。这可能是一个解决方案：

```
for (i in 1:40)
{c[i] <- min(a[i],b[i])} 
```

但是，我想有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T16:14:51.607

这正是`pmin`……记录在`?min`.

```
a <- rnorm(40)
b <- rnorm(40)
minab <- pmin(a,b) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:18:51.627

约书亚的回答无疑是您问题的最佳解决方案。但是，我个人有时喜欢使用简单的工具并创建自己的代码或函数。这是解决问题的另一种方法：

```
apply(data.frame(v1 = rnorm(40), v2 = rnorm(40)),1,min) 
```

# r - R将图例添加到绘图

> ID：11314993
> 
> 赞同：0
> 
> 时间：2012-07-03T16:12:07.003
> 
> 标签：r, loops, title

我编写了以下脚本以在 for 循环中生成几个绘图，效果很好：

```
stat <- list.files("D:/...", pattern = "met")

par(mfrow = c(4, 4))
for (x in stat) {
plot((assign(x, read.csv(x, head=TRUE, sep=""))),typ="l", col="red")
} 
```

我现在想要实现的是根据读取的文件的名称递归地添加每个图形的标题。

希望这很清楚，

最好的，

PS我还有另一个好奇心，但我可能会留到以后。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:20:11.297

添加标题 ( `main`) 参数是否`plot`可以满足您的需求？

```
plot((assign(x, read.csv(x, head=TRUE, sep=""))),typ="l", col="red", main=x) 
```

为 OP 评论编辑

你可以用`gsub`这个。

```
plot((assign(gsub('\\.txt', '', x), 
      read.csv(x, head=TRUE, sep=""))),
     typ="l", 
     col="red", 
     main=gsub('\\.txt', '', x)) 
```

但是，您正在使用的循环分配构造是养成使用习惯的危险构造。通常这是通过将所有文件作为列表读取然后`lapply`遍历它们来完成的，或者该主题的一些变体。

除非您在此绘图步骤之后进行其他处理，否则您应该能够`assign`完全跳过该步骤。

```
plot(read.csv(x, head=TRUE, sep=""),
     typ="l",
     col="red",
     main=gsub('\\.txt', '', x)) 
```

# android - 为什么本机堆在应用程序的 onCreate() 中已经有 5 mb

> ID：11314995
> 
> 赞同：0
> 
> 时间：2012-07-03T16:12:15.870
> 
> 标签：android, memory, heap-memory

我把它放在 Application 类的 Create() 的第一行：

```
@Override
public void onCreate() {
    Log.i("test", "application oncreate");
    showMemoryStats();
    super.onCreate();
} 
```

其中 showMemoryStats() 是：

```
public static void showMemoryStats() {

    double nativeUsage = Debug.getNativeHeapAllocatedSize(); 
    Log.i("test", "nativeUsage: " + nativeUsage);
    //current heap size 
    double heapSize =  Runtime.getRuntime().totalMemory();
    Log.i("test", "heapSize: " + heapSize);
    //amount available in heap 
    double heapRemaining = Runtime.getRuntime().freeMemory();   
    Log.i("test", "heapRemaining: " + heapRemaining);
    double memoryAvailable = Runtime.getRuntime().maxMemory() - (heapSize - heapRemaining) - nativeUsage;
    Log.i("test", "memoryAvailable: " + memoryAvailable);

} 
```

我在完全卸载后启动应用程序。我得到：

> 07-03 17:39:05.212: I/test(19016): nativeUsage: 5649968.0
> 
> 07-03 17:39:05.212: I/test(19016): heapSize: 4710384.0
> 
> 07-03 17:39:05.212: I/test(19016): heapRemaining: 1705056.0
> 
> 07-03 17:39:05.212: I/test(19016): memoryAvailable: 2.4899136E7

这在本机堆中已经是 5 mb，为什么？这正常吗？

# extjs - EXT JS 4 Combo 只读

> ID：11314999
> 
> 赞同：0
> 
> 时间：2012-07-03T16:12:34.530
> 
> 标签：extjs

我有一个 readOnly 最初设置为 false 的组合。单击按钮后，将启动一个事件，我希望该组合现在具有 true 的只读配置。这怎么可能，我似乎找不到任何提供此功能的方法。

谢谢

我对此的解决方案是

```
combo.setConfig({readOnly : true});
combo.reset(); 
```

这是在我意识到有一个名为 setReadOnly() 的方法之前。我知道在某个地方必须有一种方法。谢谢你们的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:19:53.233

有什么理由不能使用[setReadOnly](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Trigger-method-setReadOnly)组合框实例方法吗？