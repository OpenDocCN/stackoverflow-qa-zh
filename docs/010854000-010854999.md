# StackOverflow 问答 10854000-10854999

# java - 没有问题的 XML 到 Java 绑定

> ID：10854001
> 
> 赞同：3
> 
> 时间：2012-06-01T16:23:39.143
> 
> 标签：java, xml, data-binding

我到处寻找将 XML 元素绑定到 Java 类的好方法。这听起来是一件相当容易实现的事情（对于一些简单的价值），但无论我看哪里，都需要 XSD、显式映射和一堆其他真正妨碍我的东西。

这是我（可能不完整）对表示站点地图的 Java 对象的想法。

```
public class Sitemap {

    private List<Url> urls;

    public List<Url> getUrls() {
        return urls;
    }

    public void setUrls(List<Url> urls) {
        this.urls = urls;
    }
} 
```

我正在寻找可以让我做的事情：

```
Sitemap sitemap = (Sitemap) Foo.fromXml("sitemap.xml") 
```

类似的东西，或者至少类似的东西。有没有这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:11:30.340

以下是如何使用 JAXB ( [**JSR-222**](http://jcp.org/en/jsr/detail?id=222) ) 完成此操作。Java SE 6 中包含一个实现。还有其他实现，例如[**EclipseLink MOXy**](https://wiki.eclipse.org/EclipseLink/FAQ/MOXy)（我是技术主管）。

**简短的回答**

您可以将以下 API 调用与带有任何注释或 XML 模式的 JAXB 一起使用。

```
Sitemap sitemap = JAXB.unmarshal(xml, Sitemap.class); 
```

**长答案**

下面是一个更详细的例子。

**网站地图**

我稍微修改了你的课程。我不确定`Url`课程是什么，所以我将其更改为`java.net.URL`. 请注意域模型上不需要注释。

```
package forum10854001;

import java.net.URL;
import java.util.List;

public class Sitemap {

    private List<URL> urls;

    public List<URL> getUrls() {
        return urls;
    }

    public void setUrls(List<URL> urls) {
        this.urls = urls;
    }
} 
```

**演示**

我创建了一个`JAXBContext`. JAXBContext 是一个线程安全的对象，表示所有已初始化的元数据。`Marshaller`和`Unmarshaller`对象提供了对`JAXB`类的额外灵活性。

下面的代码演示了如何读取 XML 并将其写回：

```
package forum10854001;

import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Sitemap.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource xml = new StreamSource("src/forum10854001/input.xml");
        JAXBElement<Sitemap> jaxbElement = unmarshaller.unmarshal(xml, Sitemap.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(jaxbElement, System.out);

    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<sitemap>
    <urls>http://www.eclipse.org/eclipselink/moxy.php</urls>
    <urls>http://jaxb.java.net</urls>
</sitemap> 
```

**了解更多信息**

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:33:57.987

您也可以考虑[XStream](http://xstream.codehaus.org/)。下面是与 Blaise 的代码大致等效的代码，尽管为了多样化而以相反的方向工作（从 Object 开始，而不是 XML）：

```
public class Sitemap{
      private List<URL> urls = new ArrayList();

      // I left out the setters and getters

      public static void main(String[] args) throws IOException {
         Sitemap sitemap = new Sitemap();
         sitemap.urls.add(new URL("http://www.eclipse.org/eclipselink/moxy.php"));
         sitemap.urls.add(new URL("http://jaxb.java.net"));

         XStream xs = new XStream(new DomDriver());
         String xmlString = xs.toXML(sitemap);
         System.out.println(xmlString);
         Sitemap readBack = (Sitemap) xs.fromXML(xmlString);
      }
   } 
```

产生以下输出：

```
<com.your.name.here.Sitemap>
  <urls>
    <url>http://www.eclipse.org/eclipselink/moxy.php</url>
    <url>http://jaxb.java.net</url>
  </urls>
</com.your.name.here.Sitemap> 
```

您可以在调试器中设置断点并查看 readBack，它具有两个 URL。

# ruby - 在 Ruby 中反转可枚举

> ID：10854002
> 
> 赞同：11
> 
> 时间：2012-06-01T16:23:39.713
> 
> 标签：ruby, enumerable

我试图在不使用`reverse`方法但使用`reverse_each`迭代器的情况下反转 Enumerable（如 Array）。

我希望，以下代码就足够了：

```
p [1,2,3].reverse_each {|v| v } 
```

但是该块不会以相反的顺序返回数组。我当然可以写

```
[1,2,3].reverse_each {|v| p v } 
```

但我想以第一种方式收集物品。如果这种行为的来源是什么，我应该如何写我的表达来满足要求？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-01T16:25:52.693

从 1.8.7 开始，`Enumerable#each_*`方法在没有提供块时[返回一个枚举](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reverse_each)器，因此那些最初的命令式方法现在可以在纯表达式中使用。

因此，如果您想收集项目，请`Enumerable#map`在该枚举器上使用：

```
reversed_values = [1, 2, 3].reverse_each.map { |x| 2*x }
#=> [6, 4, 2] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-13T17:08:15.287

(1..3).reverse_each {|v| 光伏 }

产生：

1 2 3

它构建一个临时数组并以相反的顺序遍历该数组，但不返回转换后集合的反向副本

如果没有给出块，则返回一个枚举器。

但是ruby的map方法

为枚举中的每个元素返回一个新数组，其中包含一次运行块的结果。

p [1,2,3].reverse_each.map {|v| v }

reverse_each - 将充当迭代器

map - 将形成一组新的集合

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-27T12:24:53.697

另一种方法是`[1, 2, 3].reverse_each.to_a`

# ssl - 如何检查 x509 证书是否格式正确？

> ID：10854003
> 
> 赞同：0
> 
> 时间：2012-06-01T16:23:45.373
> 
> 标签：ssl, openssl, certificate, x509, der

如果 openssl（例如 x509 或 s_client）认为 DER 编码的 x509 自签名证书格式正确，我可以明确地说证书格式正确吗？例如，openssl 能够加载证书，但广泛使用的闭源框架却不能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:54:10.217

一般来说，是的，如果 OpenSSL 可以加载它，那么格式很可能没有固有问题。但是，一些库和应用程序不处理未定义长度的 ASN.1 (DER) 标签。这是您的证书最有可能出现的情况。

# python - 为什么我在 python 中得到重叠的饼图

> ID：10854004
> 
> 赞同：0
> 
> 时间：2012-06-01T16:23:48.463
> 
> 标签：python

我正在使用`walk`函数 > 搜索 .cnt 文件 > 计算感兴趣的值 > 在饼图中绘制它们的目录行走。但问题是当我的 prog 处理第一个文件夹和绘图时，它运行良好。但之后它读取和绘图的任何文件夹都会重叠。无法理解我的代码中是否存在错误。我用过：

```
for root,dirs,files in os.walk(path):
    aspCount = 0
    gluCount = 0
    aspCountCol1 = 0
    aspCountCol2 = 0
    gluCountCol1 = 0
    gluCountCol2 = 0

    listOfFile = glob.iglob(os.path.join(root,'*.cnt'))
    for filename in listOfFile:
        inp = open(filename,'r').read().strip().split('\n')
        for line in map(str.split,inp):

            k = line[-1]
            m = line[0]
            if k == 'ASP':
               aspCountCol1 += 1
            elif m == 'ASP':
               aspCountCol2 += 1
            if k == 'GLU':
               gluCountCol1 += 1
            elif m == 'GLU'
               gluCountCol1 +=1
                     # here lies the problem for me !!!!
        aspCount = aspCountCol1 + aspCountCol1
        gluCount = gluCountCol1 + gluCountCol1
        #now plotting......
        from pylab import *
        figure(1, (figsize=(8,8))
        labels = 'asp','glu'
        fracs = [asp_count,glu_count]
        pie(fracs,explode=None,labels=labels,autopct='%1.1f%%',shadow=False)
        c = 'fig.png'
        savefig(os.path.join(root,c)) 
```

现在，问题是：使用此代码，如果我处理具有包含 .cnt 文件的各种子文件夹的目录，则它不会出错。但是第一个文件夹生成的图形很好，但是当 prog 去处理下一个文件夹时，它成功地处理了数据，但是生成的图形与前一个文件夹重叠。
我正在处理的文件是：

```
LYS  ARG
ASP  GLU
GLU  SAP
JAS  ASP
SAK  GLU 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:00:55.430

您需要使用`clf()`.

另外，没有理由`from pylab import *`多次。

`matplotlib`（在这样的循环中绘制时，我更喜欢使用api）

# java - 如何将 1.337363185441E9 形式的 GMT 时间戳字符串解析为 Joda DateTime？

> ID：10854007
> 
> 赞同：0
> 
> 时间：2012-06-01T16:23:53.700
> 
> 标签：java, jodatime

我正在使用一个返回 GMT 时间戳的 API，例如 1.337363185441E9。如何将其格式化为 Joda DateTime 对象？我不知道这甚至是一种有效的时间戳格式。也许这是问题的一部分......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:38:43.817

这看起来像是自纪元以来的几秒钟。在我的脑海中，这将是：

```
long l = Double.valueOf("1.337363185441E9").longValue();
l = l * 1000;
DateTime d = DateTime(l); 
```

# xml - 无法使用 powershell 提取 XML 节点的值

> ID：10854009
> 
> 赞同：19
> 
> 时间：2012-06-01T16:23:54.900
> 
> 标签：xml, powershell

我正在尝试从 xml 文件中提取一些信息并根据需要更新/创建应用程序池。这是我正在阅读的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appPool name="MyAppPool">
  <enable32BitAppOnWin64>true</enable32BitAppOnWin64>
  <managedPipelineMode>Integrated</managedPipelineMode>
  <managedRuntimeVersion>v4.0</managedRuntimeVersion>
  <autoStart>true</autoStart>
</appPool> 
```

这是我正在尝试做的事情：

```
#read in the xml
$appPoolXml = [xml](Get-Content $file)

#get the name of the app pool
$name = $appPoolXml.appPool.name

#iterate over the nodes and update the app pool
$appPoolXml.appPool.ChildNodes | % {
     #this is where the problem exists
     set-itemproperty IIS:\AppPools\$name -name $_.Name -value $_.Value
} 
```

`$_.Name`返回正确的节点名称（即`enable32BitAppOnWin64`），但该`.Value`属性不返回任何内容。如何提取我想要的数据？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-01T16:33:03.640

更正答案：

你想要`$_.'#text'`而不是`$_.Value`.

也考虑一下，它使用对象的`InnerText`属性`System.Xml.XmlElement`：

$xml.appPool.ChildNodes | % { $ *.Name; $* .InnerText };

# .net - 在 F# 中组合谓词

> ID：10854010
> 
> 赞同：22
> 
> 时间：2012-06-01T16:24:18.663
> 
> 标签：.net, f#, functional-programming, composition

在 F# 中是否有逻辑组合谓词的标准方法？例如，假设我有`isCar x`，`isBlue x`然后我想要一些能给我的东西：

```
let isBlueCar x = isCar x && isBlue x 
```

但是使用某种组合，而不是调用，可能像：

```
let isBlueCar x = isCar && isBlue 
```

最好是，某些东西能够接受大量/任意数量的谓词。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-01T16:48:56.637

您可以定义一个组合器。

```
let (<&>) f g = (fun x -> f x && g x) 
```

然后做

```
let isBlueCar = isCar <&> isBlue 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T16:54:22.737

```
let meetsAll preds = preds |> Seq.fold (fun p q x -> p x && q x) (fun _ -> true)
// or     let meetsAll preds x = preds |> Seq.forall (fun p -> p x) 
```

如在

```
let isEven x = x%2 = 0
let isDiv5 x = x%5 = 0
let isDiv7 x = x%7 = 0

let div257 = meetsAll [isEven; isDiv5; isDiv7]

for i in 1..100 do
    if div257 i then
        printfn "%d" i 
```

它没有标准的库函数，但是您可以自己定义大量的单行代码，正如此处的答案所证明的那样。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-01T16:49:54.457

您可以执行以下操作：

```
let predicates = [isCar; isBlue]
let isBlueCar x = predicates |> List.forall (fun predicate -> predicate x) 
```

更普遍：

```
let combinePredicates predicates =
    fun x -> predicates |> List.forall (fun predicate -> predicate x)

let isBlueCar = combinePredicates [isCar;isBlue] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T16:47:04.120

这是你要找的吗？

```
> let (&&<) a b x = a x && b x

val ( &&< ) : ('a -> bool) -> ('a -> bool) -> 'a -> bool

> let isBlueCar = isCar &&< isBlue

val isBlueCar : (int -> bool) 
```

# iphone - 为哪个 iOS 版本开发？

> ID：10854016
> 
> 赞同：0
> 
> 时间：2012-06-01T16:24:31.257
> 
> 标签：iphone, sdk

我正在 iPhone 中启动一个新项目，我想将应用程序从 android 移植到 iPhone，但我不知道哪个版本。

我可以为一个版本开发应用程序并让它在所有其他版本中运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:30:25.490

是的。选择您的最低 iOS 版本并为其编写代码。它将在任何更高版本的 iOS 上运行。如果您开发 iPhone 应用程序，它将在 iPad 上以兼容模式运行。或者，您可以编写一个包含 iPhone 和 iPad 屏幕的通用应用程序。**（如果您开发仅**iPad 的应用程序，它将无法在 iPhone 上运行。）

## 为什么你应该瞄准 iOS 5

几乎没有理由不为 iOS 5.0 及更高版本编写代码。自 3GS 以来的每一部 iPhone*都*可以升级到 iOS 5。

据一位消息人士称，iOS 5 目前拥有超过 80% 的市场（至少[80% 的市场对新应用感兴趣](http://www.game4mob.com/index.php/tech-articles/67-ios-5-penetration-percentage)）。

此外，关于这方面的另一篇精彩文章是[iOS Ebb and Flow](http://pxldot.com/post/18754186750/ios-ebb-and-flow)。Android 的东西可能不会告诉你任何你不知道的东西，但是看看他比较的 iPhone 号码（现在已经有几个月了）。也就是说，截至 2012 年 3 月 1 日，iOS 5 在多个开发者的应用程序中占据了所有 iOS 用户的 76%。

而且，如果您针对的是较旧的产品，您不仅要避免使用较新的功能（故事板，自动引用计数的完整版本），而且您将**很难找到要测试的设备**。仅针对 iOS 4、在 iOS 5 上进行测试并声明它可以在 iOS 4 上运行是不够的。如果没有一些修复，它可能不会。

您还将只针对随 3GS 引入的 armv7 CPU 架构。Apple 最近在为 armv6 生成代码时遇到了问题。虽然我很确定他们正在尝试，而且我并不是要轻视这些努力，但这并不是说他们仍在运送带有 armv6 的设备。所以很明显，他们将在 armv6 上花费更少的精力。

无法运行 iOS 5 的最新款 iPhone 已于 2010 年 6 月停产。自 2010 年 11 月以来，Apple 一直没有为其发布软件更新。它不仅不运行 iOS 5，而且不运行最新版本的 iOS 4\. 即使某人在两年合同的最后几天购买了该手机，该合同将在您完成应用程序之前到期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T18:43:12.453

简短的快速回答是为您拥有的设备进行开发，并且可以有效地进行测试。

正确的做法是为 IOS 5 及更高版本开发，除了它在设计和编码方面提供的所有增强功能外，它还适用于早在 3gs 的手机（就智能手机而言，这相当史前） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:27:44.420

您应该决定哪个 iOS 版本符合您的功能集（可能是 4.0+）并在此基础上实现，这样您就可以支持尽可能多的 iOS 版本......这就是我会做的，但话又说回来了一些功能使 UI通过 IB 更易于管理的东西（例如围攻）你可能想要使用，所以你会被 5.0+ 困住，因为它们只在 5.0 中可用。

> 我可以为一个版本开发应用程序并让它在所有其他版本中运行吗？

答案是，如果您为 4.0 进行开发，那么您的代码很可能适用于 4.0 之后的所有内容，因此它适用的版本取决于您所针对的最低版本

# javascript - IE ajax 发送 utf8 字符为？

> ID：10854017
> 
> 赞同：2
> 
> 时间：2012-06-01T16:24:31.523
> 
> 标签：javascript, jquery, internet-explorer, utf-8

考虑`$("#"+id).val()`到

```
var field = document.getElementById( id );
/* ... */
if( field.value != "" )
    var jqxhr = $.get( "/user/ajaxtag/tag/" + $("#"+id).val(), function( data ) {
        suggestionText = data;
        //does something which i thing is non of problem's business
        var arr = getListItems( field.value );
        if ( field.value.length > 0 ){
            createList( arr );
        } else {
            clearList();
        };
        // end of non of business
    }); 
```

当在输入框中使用英文触发这段代码更改时，ajax请求响应成功，但是当使用像“س”这样的波斯语时，IE会发送这个

```
GET /user/ajaxtag/tag/??_=1338567574102 HTTP/1.1\r\n 
```

（我在wireshark上得到了这个信息）并用？替换了utf8字符，当我使用firefox时不会出现问题，只在ie中（这并不奇怪哈？）我在标题中有这一行

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

在 stackoverflow.com 上的另一个问题中，有人建议更改 php.ini，但我在共享主机上并且无权访问该文件。

我做到了`alert( $( "#" + id ).val() )`，但警告的事情不是？是输入字符.. 就像 س

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:26:42.683

您需要使用 encodeURIComponent() 函数对参数名称和值进行编码。

或使其符合 RFC3986，您可以使用此功能：

```
/** 
 * encodeURIComponent() function is not 100% compatible with
 * RFC3986 http://www.faqs.org/rfcs/rfc3986.html
 */
function encodeRFC3986(value) {
  return encodeURIComponent(value)
    .replace(/!/g,  "%21")
    .replace(/\*/g, "%2A")
    .replace(/\(/g, "%28")
    .replace(/\)/g, "%29")
    .replace(/'/g,  "%27");
} 
```

# android - 屏幕方向更改后，片段（支持的库）在 onActivityCreated() 中看不到活动

> ID：10854020
> 
> 赞同：2
> 
> 时间：2012-06-01T16:24:43.230
> 
> 标签：android, android-fragmentactivity, android-support-library

我正在使用 Android 支持库 v13。有一件奇怪的事情我无法理解。

创建新活动时，我将片段加载为：

主要活动布局：

```
...
<FrameLayout
    android:id="@+id/fragment_1"
    ... /> 
```

主要`onCreate()`活动：

```
mFragment = (FragmentActivity) getSupportFragmentManager().findFragmentById(R.id.fragment_1);
// if screen orientation changed, no need to create new instance of fragment
if (mFragment == null) {
    mFragment = ...; // create new instance of fragment

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_1, mFragment);
    // because this is called ONCE, we can use this method
    ft.commitAllowingStateLoss();
} 
```

现在，一切都在模拟器 1.5、1.6 和 2.2 中完美运行。我有一部手机*2.2.2*。

但是有一个例外：如果应用程序正在运行，并且屏幕方向发生了变化。里面`onActivityCreated()`，`getActivity()` *有时*返回`null`。这只发生在模拟器 1.5/ 1.6/ 2.2 中。

我的手机*2.2.2*运行良好，我测试了数百次，但从未发现该错误。甚至其他模拟器 3.x、4.x 也能正常工作。不幸的是，我没有手机 1.5/ 1.6/ 2.2。

那么你有这方面的经验吗？这是支持库或模拟器的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:27:20.433

`onCreate`我相信，更改 Android 设备方向会让人想起您的方法。结果，奇怪的事情往往会发生。您可能会做两件事：

1-您可以尝试捕捉方向变化并在那里做一些代码来尝试防止方向变化导致的问题：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.main);
        // etc.
} 
```

2-或者通过在 `android:screenOrientation="portrait"`
您的主要活动标签中添加以下内容来完全防止方向改变：以阻止此问题再次发生..也就是说，如果您愿意阻止方向改变。

我通常为我的应用程序使用选项 2，因为方向更改往往会导致各种问题。

旁注：我看到有人说他们添加`android:configChanges="orientation|keyboardHidden"`到他们的主要活动清单中也可以解决一些方向问题，所以这也值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:56:54.767

当方向改变时，动作是：

分离 -> 重新创建视图 -> 附加

如果附加没有发生，getActivity() 将返回 null。如果您使用的是 FragmentPagerAdapter，则会自动处理此问题。保持对适配器外部片段的引用通常会导致此类问题。

（片段管理器将继续保留参考资料，并在这些情况下将它们归还给您）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:37:29.880

使用这些链接作为参考。 [Android 内存泄漏，没有静态变量](https://stackoverflow.com/questions/10679255/android-memory-leak-no-static-variables/10679370#10679370)和[Activity 在旋转时重启 Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

我相信这就是你要问的。

# qtwebkit - QtWebKit QWebView 和 Data-URI 协议 - 不支持？

> ID：10854028
> 
> 赞同：4
> 
> 时间：2012-06-01T16:25:19.027
> 
> 标签：qtwebkit

我们在 QWebView 中加载简单的 HTML，使用 data-uri 协议的每个图像都不起作用。相反，我们看到了默认的占位符图像。我们正在使用使用 QTWebKit 的 Arora 浏览器进行测试，但也通过 cpp 文件加载 QWebView 进行了测试。

**我做过的一些研究：**

*   根据这个来源，Arora 浏览器不支持 data-uri 协议 - （因此也不支持 QTWebKit？）： [http ://web-browsers.findthebest.com/q/14/2604/What-protocol-support-features -does-the-web-browser-Arora-made-by-Benjamin-C-Meyer-have](http://web-browsers.findthebest.com/q/14/2604/What-protocol-support-features-does-the-web-browser-Arora-made-by-Benjamin-C-Meyer-have)

*   以下关于 data-uri 支持的比较文章没有明确列出 Arora 或 QTWebkit 支持 data-uri： [http ://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support)

*   在以下参考页面上，QT 显然支持数据 url 样式表，但没有明确调用图像 - 也许这仅在 c++ 代码中：http: [//harmattan-dev.nokia.com/docs/library/ html/qtwebkit/qwebsettings.html](http://harmattan-dev.nokia.com/docs/library/html/qtwebkit/qwebsettings.html)

*   同样在这里，在支持标准的 webkit 列表中，他们没有列出 data-uri 协议： [http ://trac.webkit.org/wiki/QtWebKitSupportedStandards](http://trac.webkit.org/wiki/QtWebKitSupportedStandards)

在其他网络参考资料中，人们提到了使用 data-uri 图像，但在每种情况下，他们都是在 c++ 代码中谈论的。我还没有看到对在 QWebView 中工作的 data-uri 协议的引用——这正是我们所需要的。

**这是我们尝试加载的图像的示例：**

```
<img src="data:image/png;charset=utf-8;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyADIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD03JoyaSnxJ5kqR5xuYD866jIdBbzXLbYkLHvjoKutpE8cDyyOPlGdqjca3oYY4IhHGoVRT6xdR9C+U43Joya09ato4ZkkQBfMzkD1Hf8AWsutU7q5DVhcmikopgFTWgJvIQoyd4OPxqGpIJfJuI5cZ2sDj1pMDr6KQEMAQcg8ilrmNTG14HbA2PlBYE/lWLWxrs2XihHYbjWPW8PhM5bhRRRViCigAk4AyT2q/b6Rcz4Ljyl9W6/lSbS3CxsaWzPp0JY5OCB9AcVcpqII41ReigAU6ud6s1Ryt+7PfzlzyHIH0HSq1b+paY9zL50TLuxgqe/41iTQSwNtljZD7jrW8WmjNojoooqhG/oiJ9lL7V37iN2Oa1KKK557mkdgoooqRhTXRXUq6hlPYjIooprcDkZQBK4HA3GiiiukyP/Z"> 
```

最初我在没有字符集的情况下加载，这在 Chrome 中没有什么不同。这些图像在 chrome btw 中加载良好。

所以要清楚，我试图找出 QtWebKit QWebView 是否支持 data-uri 协议。

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T09:26:13.713

在我的 qt 4.8 应用程序中无法使用 data-uri 图像时，我遇到了和你一样的麻烦。来回走动我发现我没有加载 gif 和 jpeg 插件。一旦我将它们添加到应用程序路径，data-uri 就开始工作了。

对于 OS X，这是适合我的解决方案：

1.  构建应用程序（我使用 qmake -spec macx-g+++；make clean；make）
2.  使用 qmake -query 查找插件目录
3.  将 imageformats 目录复制到 AppName.app/Contents/PlugIns
4.  运行 macdeployqt（确保插件指向 AppName.app/Contents/Frameworks）

完毕。

ps 我的应用程序不会从路径中的所有图像格式库开始，所以我只得到了 gif 和 jpeg 库，没有进一步调查

pps你不需要png图像的插件

# android - ACRA with android：如何在报告崩溃之前执行代码

> ID：10854031
> 
> 赞同：3
> 
> 时间：2012-06-01T16:25:25.130
> 
> 标签：android, acra

我正在使用 ACRA 和我的 android 应用程序。我的问题是，当发生崩溃时，如何确保在报告崩溃之前执行一些代码。我的意思是我想在崩溃发生时添加一些自定义变量，以便我知道应用程序处于什么状态？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:19:58.060

[按照此处](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Implementing_your_own_sender)的描述实现您自己的发件人。它可以只是一些现有发件人的包装器，在那里转发发送功能。

在发送者代码中，您可以在实际发送报告之前采取任何特殊操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T23:50:15.867

这就是我使用带有 HttpSender 后端的 ACRA 4.5.0 的方法。我在 Cloudant 上使用 Acralyzer。

原始代码：

```
@ReportsCrashes(
    mode = ReportingInteractionMode.DIALOG,
    resDialogText = R.string.crash_dialog_text,
    resDialogCommentPrompt = R.string.crash_dialog_comment_prompt,

    formUri = "https://kpc.cloudant.com/acra-openconnect/_design/acra-storage/_update/report",
    formUriBasicAuthLogin="[restricted reporter login]",
    formUriBasicAuthPassword="[restricted reporter password]",
    reportType = org.acra.sender.HttpSender.Type.JSON,
    httpMethod = org.acra.sender.HttpSender.Method.PUT,

    formKey = ""
)

public class Application extends android.app.Application {

    public void onCreate() {
        super.onCreate();
        ACRA.init(this); 
```

我的应用程序在内存中保留一个带有日志消息的循环缓冲区。这不会写入磁盘，我也不想在每次添加条目时将其呈现为字符串并调用 putCustomData()。因此，我调用我的静态“转储程序”方法 VPNLog.dumpLast()，在 HttpSender.send() 运行之前修改报告。新代码如下所示：

```
@ReportsCrashes(
    mode = ReportingInteractionMode.DIALOG,
    resDialogText = R.string.crash_dialog_text,
    resDialogCommentPrompt = R.string.crash_dialog_comment_prompt,

    formUri = "https://kpc.cloudant.com/acra-openconnect/_design/acra-storage/_update/report",
    formUriBasicAuthLogin="[restricted reporter login]",
    formUriBasicAuthPassword="[restricted reporter password]",
    // reportType and httpMethod are now defined below

    formKey = ""
)

public class Application extends android.app.Application {

    public void onCreate() {
        super.onCreate();
        ACRA.init(this);
        ACRA.getErrorReporter().setReportSender(
            new HttpSender(org.acra.sender.HttpSender.Method.PUT,
                           org.acra.sender.HttpSender.Type.JSON,
                           null) {

                @Override
                public void send(CrashReportData report) throws ReportSenderException {
                    report.put(ReportField.APPLICATION_LOG, VPNLog.dumpLast());
                    super.send(report);
                }

            }); 
```

我要添加的值是一个长（100+ 行）字符串；Acralyzer 正确地将其分成单独的编号行。

另一种选择是使用多个键/值对填充 ReportField.CUSTOM_DATA：

```
report.put(ReportField.CUSTOM_DATA, "key0=value0\nkey1=value1\n"); 
```

Acralyzer 将在 HTML 表格中显示这些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T18:03:18.073

Acra 使用 Thread.setDefaultUncaughtExceptionHandler(...);

您可以设置自己的未捕获异常处理程序，然后调用 ACRA 生成报告：

```
public class My_Exception_Interceptor implements Thread.UncaughtExceptionHandler {

    /**
     * Sets up to catch an exception. 
     * Call this after initializing ACRA.
     */
    public void setUpFatalExceptionHandling() {
        Thread.setDefaultUncaughtExceptionHandler(this);
    }

    /**
     * Called by the JVM on an uncaught exception. 
     * @param t - the thread
     * @param e - the throwable
     */
    @Override
    public void uncaughtException(@Nullable Thread t, @NonNull Throwable e) {
        ...your code...
        ACRA.getErrorReporter().handleException(e, true);
    }
} 
```

# jquery - jQuery - 如何使用 javascript 在页面上放置 html 元素

> ID：10854032
> 
> 赞同：1
> 
> 时间：2012-06-01T16:25:24.750
> 
> 标签：jquery, html

我是一个 jQuery 新手。我正在尝试做这样的事情：

```
function putJStorageValues () { 
  var keys = getJStorageValues();
  var test = "";
  jQuery.each(keys, function(index, item) {
    test += "<br>" + item;
  });
  $("#storageValues").text(test);
} 
```

但这以“
myItem”结束。我将如何打印 HTML 以便有一个换行符，然后是项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:28:32.597

`$("#storageValues").text(test);`<-- 将文本放在元素上（剥离 HTML） `$("#storageValues").html(test);`<-- 将 HTML 放在元素中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T16:36:56.393

您最好使用文本中的 .html 方法，`<br/>`否则您可能希望文本中包含其他 html 元素。

```
$("#storageValues").html(test); 
```

.html() - 这个 jQuery 函数获取/设置任何元素的 HTML。.text() - 这个 jQuery 函数获取/设置任何元素的文本（内部文本）。[`Details`](http://jquerybyexample.blogspot.com/2011/02/difference-between-jquery-text-and-html.html)

```
function putJStorageValues () {

var keys = getJStorageValues();
var test = "";
jQuery.each(keys, function(index, item) {
    test += "<br>" + item;
});
$("#storageValues").html(test);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:30:22.773

你会想要使用[`append()`](http://api.jquery.com/append/)

```
function putJStorageValues () {

     var keys = getJStorageValues();
     var test = "";
     jQuery.each(keys, function(index, item) {
          test += "<br>" + item;
     });

     $("#storageValues").append(test);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T16:39:00.460

通常 DOM 操作是通过`appendChild`函数或`append`在 jQuery 中完成的。这需要*创建*要追加的 DOM 元素。

```
function putJStorageValues () {

 var keys = getJStorageValues();
 jQuery.each(keys, function(index, item) {
  var toInsert = document.createElement("p");
  p.innerHTML = item;
  $("#storageValues").append(toInsert);
 });
} 
```

# html - IE 无法正确对齐图像

> ID：10854043
> 
> 赞同：0
> 
> 时间：2012-06-01T16:25:58.727
> 
> 标签：html

简单的 HTML 代码：

```
<section class="">

<article class="">
  <h1>Staff Outing - June 29</h1>
  <p><img src="<?php echo base_url(); ?>images/homepage/pointPlay.jpg" width="150" height="113" align="right" >Join us this year on Friday, June 29, 2012, from 10:00am for the annual agency outing. Your <a href="<?php echo base_url(); ?>eventsCommittee">Events Committee</a> has everything in place for a fun and relaxing time for you and your family! Parking will be available, lunch will be provided and plenty of activities will be available for everyone to enjoy. For more information or for questions, please contact an <a href="<?php echo base_url(); ?>eventsCommittee">Events Committee</a> member!</p>
</article> 
```

虽然 IE8 没有对齐图像？它当前与左侧对齐。没有比这更简单的了，对吧？

这与文章/部分标签有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:29:14.120

如果我明白你想做什么，而不是 align='right' 做 style='float:right'

# scala - .withSession() 在 Play 2.0 中不起作用

> ID：10854047
> 
> 赞同：1
> 
> 时间：2012-06-01T16:26:06.730
> 
> 标签：scala, playframework, playframework-2.0

我正在尝试在 Play Framework 中创建一个新会话，但它似乎并没有坚持下去。

获得 OpenID 结果后，我想将它们重定向回索引（无论如何现在），以及他们刚刚返回的 OpenID 信息。

```
Redirect(routes.Application.index).withSession(
            "id" -> info.id,
            "email" -> info.attributes.get("email").getOrElse("unknown@unknown.com"),
            "timestamp" -> (System.currentTimeMillis() / 1000L).toString) 
```

这将调用以下函数：

```
def index = Action { implicit request ⇒
    Ok(html.index(request))
  } 
```

但是，根据 Eclipse，隐式请求具有空 cookie 和空会话。这里发生了什么？

如果有帮助，这是 OpenID 信息的完整功能：

```
def openIDCallback = Action { implicit request ⇒
    AsyncResult(
      OpenID.verifiedId.extend(_.value match {
        case Redeemed(info) ⇒ {
          Redirect(routes.Application.index).withSession(
            "id" -> info.id,
            "email" -> info.attributes.get("email").getOrElse("unknown@unknown.com"),
            "timestamp" -> (System.currentTimeMillis() / 1000L).toString)
        }
        case Thrown(t) ⇒ {
          // Here you should look at the error, and give feedback to the user
          Redirect(routes.Application.index)
        }
      }))
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:48:37.740

所以显然 Eclipse 调试器没有意识到某些值是惰性的。它只是说它们是空的。意思是， Session*看起来*为空，即使它不是一被调用。

真正的问题是，在应该使用 Session 的部分代码中，我使用的是 request.cookies.get() 而不是 request.session.get()。尽管会话是一个 cookie，但它是一个具有自己的特殊 val 的命名 cookie。因此，我的代码因不同的原因而在不同的位置中断。

# objective-c - MPMoviePlayerViewController 帧大小

> ID：10854050
> 
> 赞同：0
> 
> 时间：2012-06-01T16:26:10.530
> 
> 标签：objective-c, ios

我有这个方法：

```
-(void) playMov: (NSString*) title{
 //   play a movie!!
NSString *movpath = [[NSBundle mainBundle] pathForResource:title ofType:@"mp4"];
self.mpviewController =[[MPMoviePlayerViewController alloc]initWithContentURL:[NSURL fileURLWithPath:movpath]];

[self.mpviewController.view setFrame: CGRectMake(0, 0, self.view.frame.size.width, 275)];

self.mpviewController.view.backgroundColor = [UIColor clearColor];
[self.mpviewController.view setBackgroundColor:[UIColor clearColor]];

[self.view addSubview:mpviewController.view];

 MPMoviePlayerController *mp = [mpviewController moviePlayer];
mp.contentURL = [NSURL fileURLWithPath:movpath];
 CGRect playerFrame = CGRectMake(0, 0, self.view.frame.size.width, 275);

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerPlaybackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:mp];

 [mp.view setFrame:playerFrame];
 mp.view.backgroundColor = [UIColor clearColor];
 [mp prepareToPlay];
 [[mpviewController moviePlayer] play];  
} 
```

第一次加载视图 - 它是黑色背景的全屏。第一次之后是想要的尺寸（0, 0, self.view.frame.size.width, 275）还是黑色背景。我希望它每次都是这个大小和清晰的背景颜色。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:40:32.770

尝试使用类的`backgroundView`属性`MPMoviePlayerController`。

# wpf - WPF 和 ClickOnce：清单中的引用与下载的程序集 WpfApplication1.exe 的标识不匹配

> ID：10854056
> 
> 赞同：0
> 
> 时间：2012-06-01T16:26:31.527
> 
> 标签：wpf, deployment, clickonce, manifest

我正在 Visual Studio 2010 中测试虚拟 WPF 浏览器应用程序的部署。

如果我单击 localhost xbap 它运行正常。

然后我将它发布到文件服务器 \Bebrus1002\Intranet\it\ABS\WpfBrowserApplication1.xbap 上，但是当我单击已部署的 xbap 时出现此错误：

```
Following errors were detected during this operation.
* [1/06/2012 18:14:34] System.Deployment.Application.InvalidDeploymentException (RefDefValidation)
    - Reference in the manifest does not match the identity of the downloaded assembly WpfApplication1.exe.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.DownloadManager.ProcessDownloadedFile(Object sender, DownloadEventArgs e)
        at System.Deployment.Application.FileDownloader.DownloadModifiedEventHandler.Invoke(Object sender, DownloadEventArgs e)
        at System.Deployment.Application.FileDownloader.OnModified()
        at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
        at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
        at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
        at System.Deployment.Application.DownloadManager.DownloadDependencies(SubscriptionState subState, AssemblyManifest deployManifest, AssemblyManifest appManifest, Uri sourceUriBase, String targetDirectory, String group, IDownloadNotification notification, DownloadOptions options)
        at System.Deployment.Application.DeploymentManager.SynchronizeCore(Boolean blocking)
        at System.Deployment.Application.DeploymentManager.SynchronizeAsyncWorker() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:43:08.043

我可以通过删除对另一个项目的剩余引用来解决它。

# objective-c - 从函数绘制到视图

> ID：10854058
> 
> 赞同：0
> 
> 时间：2012-06-01T16:26:43.467
> 
> 标签：objective-c, ios5, xcode4

我可以通过将以下内容放入 UIView 并将其连接到情节提要视图来绘制一条线。

```
- (void)drawRect:(CGRect)rect {
CGContextRef  context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 5.0);
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
CGFloat components[] = {0.0, 0.0, 1.0, 1.0};
CGColorRef color = CGColorCreate(colorspace, components);
CGContextSetStrokeColorWithColor(context, color);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 10, 50);
CGContextStrokePath(context);
CGColorSpaceRelease(colorspace);
CGColorRelease(color); 
```

}

但是，我想做的是在按下按钮时画一条线。为此，我假设我需要将一些代码写入 IBAction。我的问题是我不能简单地将上面的代码放入 IBAction 中，因为它给了我一个错误。

```
- (IBAction)draw:(id)sender{
 //Place code here 
```

}

我的问题是，每次按下按钮时如何画一条线？

如何连接类似的代码以绘制按下按钮时将触发的不同线条

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:01:08.767

要在 UIView 上绘图，您必须将 UIView 子类化

在.h

```
 @MyCustomView : UIView {
    }

    @end 
```

米

```
@implementation MyCustomView

- (void) drawRect: (CGRect) rect
{
        CGContextRef  context = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(context, 5.0);
        CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
        CGFloat components[] = {0.0, 0.0, 1.0, 1.0};
        CGColorRef color = CGColorCreate(colorspace, components);
        CGContextSetStrokeColorWithColor(context, color);
        CGContextMoveToPoint(context, 0, 0);
        CGContextAddLineToPoint(context, 10, 50);
        CGContextStrokePath(context);
        CGColorSpaceRelease(colorspace);
        CGColorRelease(color);
    } 
```

在您的视图控制器中

```
-(void)methodCallCustomView{

       } 

- (IBAction)draw:(id)sender{
   [self methodCallCustomView];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:28:17.997

因此，您希望在按下按钮时调用 drawRect: 方法吗？如果是这样，将消息 setNeedsDisplay 发送到具有 drawRect: 代码的视图。

# .net - 检查并从字符串转换为日期 vb.net

> ID：10854062
> 
> 赞同：3
> 
> 时间：2012-06-01T16:26:59.713
> 
> 标签：.net, vb.net, date-format

我是 VB.NET 的初学者，我被一个非常简单的东西困住了，日期格式。

我正在开发一个将数据从 excel 表上传到 sql server 数据库的应用程序。应用程序仅接受 mm/dd/yyyy 格式的日期。否则它应该拒绝所有日期。

现在我正在努力检查它的格式。这是我的代码。

```
Dim ROHSDate As String
ROHSDate = Trim(filterString(holdingTank))
... 
here i need to check if it is in mm/dd/yyyy format 
```

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T16:31:57.600

使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)，它允许您指定格式 - 它会尝试解析它，成功时将解析的值放入输出参数，并返回成功/失败：

```
Dim dt As DateTime
If (DateTime.TryParseExact(ROHSDate, "mm/dd/yyyy", \
                           CultureInfo.InvariantCulture, \
                           DateTimeStyles.None, \
                           Out dt))
    UseDateTime(dt)
End If 
```

显然，`Else`如果需要，请添加子句等。

（我相信在现代 VB 中，续行可能是不必要的，但是嘿......希望你明白这一点。）

请注意，我已明确使用`CultureInfo.InvariantCulture`，因此如果代码在使用不同日期分隔符或不同日历的机器上运行，则不会有任何区别。

# python - Python Fabric 任务不设置变量？

> ID：10854064
> 
> 赞同：2
> 
> 时间：2012-06-01T16:27:03.753
> 
> 标签：python, fabric

我不确定为什么会发生这种情况，但是当我尝试设置这样的变量时，在织物中：

```
@task
def deploy_small_ec2_ami(name):
    a = local("/usr/bin/ldapsearch -x -w secret -D 'cn=admin,dc=example,dc=net' -b 'dc=example,dc=net' -h ldap-01  -LLL 'cn=%s'" %(name))
    if a:
        sys.exit(1) 
```

无论变量“a”是什么，即使名称存在于 ldap 中，也永远不会设置，因此退出永远不会生效。我试图添加'print a'，但我也没有看到任何东西，但我知道该命令有效，因为我得到如下输出（ldap 中确实存在的主机）：

```
user:~/Projects/fabtask$ fab deploy_small_ec2_ami:bob,ldap
[localhost] local: /usr/bin/ldapsearch -x -w secret -D 'cn=admin,dc=example,dc=net' -b 'dc=example,dc=net' -h ldap-01  -LLL 'cn=bob'
dn: cn=bob,ou=hosts,dc=example,dc=net
cn: bob
environment: production
ipHostNumber:
objectClass: device
objectClass: ipHost
objectClass: puppetClient
objectClass: top
puppetClass: cassandra 
```

我在其他脚本中使用 var = local('some_command') 并且效果很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:38:35.657

我没有看到`capture=True`你的`local()`电话；这似乎是捕获命令输出所必需的。否则`local()`总是返回`None`，它`False`在`if`语句中求值。请参阅[此处的文档](http://docs.fabfile.org/en/1.4.0/api/core/operations.html#fabric.operations.local)。

# iphone - 通过没有专辑的 URL 方案打开 iTunes Store

> ID：10854066
> 
> 赞同：0
> 
> 时间：2012-06-01T16:27:17.557
> 
> 标签：iphone, xcode, url-scheme

我正在开发一个音乐播放器应用程序。如果用户没有有声读物或播客，我将显示一个按钮，该按钮将用户带到 iTunes 商店，就像它在本机音乐播放器应用程序中发生的一样。

我在开发人员指南中查看了打开 iTunes Store 应用程序的 url 方案，它看起来像这样：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewAlbum?i=156093464&id=156093462&s=143441"]]; 
```

它的作用是，它打开带有特定专辑的 iTunes 商店，我不想打开带有特定专辑的商店。所以我尝试将专辑参数删除为：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewAlbum?"]]; 
```

但有了这个，我收到一条警报，您的请求无法完成，可能是因为 iTunes 商店找不到任何专辑。

那么无论如何我可以在不传递专辑详细信息的情况下打开 iTunes Store，或者打开 iTunes Store 的搜索选项卡吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:16:15.277

似乎您可以执行以下操作来启动 iTunes 应用程序的“音乐”选项卡：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString@"http://itunes.apple.com"]]; 
```

# java - BeanUtils 调用集合的 size() 方法（不是 setter）

> ID：10854070
> 
> 赞同：2
> 
> 时间：2012-06-01T16:27:36.827
> 
> 标签：java, reflection, apache-commons-beanutils

我有一个带有 getter 和 setter 的类：

```
class A
{
  private Set<Offers> offers;

  public Set<Offers> getOffers(){
    return offers;
  }

  public void setOffers(Set<Offers> offers){
    this.offers = offers;
  }

} 
```

现在我想使用 Apache Commons PropertyUtils 获取报价的 size()：

```
PropertyUtils.getProperty(myAInstance, "offers.size"); 
```

这应该基本上与以下内容相同：

```
myAInstance.getOffers().size(); 
```

但是使用 PropertyUtils 不起作用并给了我一个：

> java.lang.NoSuchMethodException：类'class java.util.LinkedHashSet'上的未知属性'size'

对其他对象的所有 getter 和 setter 使用 PropertyUtils 工作正常。

我怀疑这是因为 Collection 的 size() 方法没有遵循 getXXX 和 setXXX bean 约定。

还有其他方法可以使用 PropertyUtils / 或 BeanUtils（或 Apache Commons 中的其他任何东西）来调用我的集合的 size() 方法吗？

谢谢克里斯托夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:12:55.783

PropertyUtils 被命名为“PropertyUtils”是有原因的。它适用于 Java bean 约定。“size()”方法不符合该约定，因此您不能将其称为属性。

也许您最好使用支持属性导航和函数调用的 MVEL 或 GroovyScript。这是 mvel 的示例，它应该可以工作

```
Integer size = (Integer) MVEL.eval("offers.size()", instanceOfA); 
```

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:00:34.190

一种解决方法（无法让它工作）+我同意戴夫“不完全清楚你为什么想要”

将此添加到您的 A 类

```
public int getOfferSize(){
    return offers == null ? 0 : offers.size();
} 
```

然后使用

```
PropertyUtils.getProperty(myAInstance, "offerSize"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:31:20.760

您可以直接通过良好的旧反射来做到这一点，避免使用任何库。

首先，你得到了吸气剂：

```
Method get = A.class.getDeclaredMethod("getOffers"); 
```

现在调用 getter 并获取表示集合的对象。然后创建一个新的 Method 来表示 Set 中定义的 size 方法：

```
Object setFromA= get.invoke(yourAObject);
Method size = Set.class.getDeclaredMethod("size"); 
```

最后，将方法转换为 setFromA 并获取大小，将 setFromA 对象转换为所需的类型：

```
Integer listSize = (Integer) size.invoke(get.getReturnType().cast(setFromA)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T16:40:46.880

不完全清楚您为什么要这样做，尽管它确实提供了一些围绕反射 API 的薄包装器。

您将需要使用[`MethodUtils`该类](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/MethodUtils.html)，特别是其中一个[`invokeExactMethod`](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/MethodUtils.html#invokeExactMethod%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)或[`invokeMethod`变体](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/MethodUtils.html#invokeMethod%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)。

# javascript - 尝试锁定自定义控件，但在页面中有多个控件时出现问题

> ID：10854071
> 
> 赞同：0
> 
> 时间：2012-06-01T16:27:40.660
> 
> 标签：javascript, jquery, asp.net

我有一个自定义控件，我在页面上加载了三次。

自定义控件由一个文本框和一个自定义日期选择器控件组成。

我正在尝试为所有人锁定日期选择器控件。

我在我的控件中尝试了以下代码。

```
$(document).ready(function() {
    debugger;
    var mySelector = '#' + $('[id$=\'_SignatureNonPoliceControl\']', $(this)).attr('id');
    $(mySelector.replace('_SignatureNonPoliceControl', '_SignatureDatePicker_DatePickerControl')).BaseControlPlugin(BaseControlMethodsEnum.SetLocked, true);
}); 
```

但是，这只会锁定第一个并执行三遍。

我的控件是这样设置的

```
 <uc8:SignatureCaptureNonPolice ID="DetaineeSignature" runat="server" Caption = "Person's Signature to Comments " RetainValueWhenDisabled="true" />

            <uc1:GenericDropDownList Caption="Reason For Not Signing " ID="DetaineeReasonNotSignedGenericDropDownList" runat="server" />

            <uc8:SignatureCaptureNonPolice ID="AppropriateAdultSignature" runat="server" Caption = "Appropriate Adults<br />Signature to Comments " RetainValueWhenDisabled="true" />

            <uc8:SignatureCaptureNonPolice ID="InterpreterSignature" runat="server" Caption = "Interpreter's Signature<br />to Comments " RetainValueWhenDisabled="true" /> 
```

我必须使用 $(this). 我对此很陌生。

帮助！

谢谢

凯夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:33:44.627

你的日期选择器有一个共同的班级吗？您可以选择：

```
$('.className') 
```

另一种选择是用逗号分隔一个选择器中的所有 ID：

```
$('#firstID,#secondID,#thirdID') 
```

然后我假设你想对他们应用一个锁定的类？

```
$('.className').addClass("locked"); 
```

您可以通过执行以下操作轻松检查该逻辑：

```
if (this.hasClass("locked") {
    // this is locked.
} 
```

在此处阅读有关选择器的更多信息：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# jquery - 在 Firefox 中单击并拖动不适用于 jQuery UI iframeFix

> ID：10854073
> 
> 赞同：3
> 
> 时间：2012-06-01T16:27:43.077
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

这有点难以解释，所以我在这里设置了一个简化的测试用例：http: [//jsfiddle.net/5Z6h6/1/](http://jsfiddle.net/5Z6h6/1/)。基本上发生的事情是我将 jQuery UI 传递`.draggable`给 iFrame 的内容，并使用 jQuery UI 的内置 iframeFix 来避免 iFrame 捕获鼠标事件的问题。

这很好用，除了在 Firefox 中，点击和拖动似乎不再起作用；相反，您必须单击、释放、拖动，然后再次单击以放置。这是预期的行为吗？有没有解决的办法？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:28:44.380

升级您的 Firefox 版本并再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:00:41.333

魔术是在 mousedown 开始时轻弹 iframe：

```
$iframe.css('display', 'none'); 
```

然后设置可拖动和触发事件：

```
$draggable.trigger(event); 
```

然后再次显示 iframe：

```
$iframe.css('display', 'block'); 
```

该功能应该运行得足够快，所以你不应该看到任何闪烁 - 我反复试验才找到这个，但这解决了我在 Firefox 中的 iframe 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T15:54:13.803

这花了我很长时间才弄清楚，这里发布的解决方案不起作用，而且它似乎仍然是 jQuery 中的一个问题。

问题是在 Firefox 中，mousedown、mouseup 和 mousemove 事件似乎不会从 iframe 冒泡到父文档。

我使用的解决方法是这样的：

```
// From parent document
// Get iframe 'document'
var $iframe = $('iframe').$el.content();

// Then bind listeners for events, and trigger them on parent document
$iframe.on({
    mousemove: function(e){
        $(document).trigger(e);
    },
    mousedown: function (e) {
        $(document).trigger(e);
    },
    mouseup: function (e) {
        $(document).trigger(e);
    }
}); 
```

希望这可以节省人们一些时间。

# extjs - 使用 /echo/json 在 jsfiddle 上的 Ext.view.View 的简单示例

> ID：10854084
> 
> 赞同：0
> 
> 时间：2012-06-01T16:28:25.620
> 
> 标签：extjs

我无法弄清楚我在 jsfiddle 上的代码有什么问题。我正在尝试创建一个减少来使用 Ext-JS 提交错误。这是我正在使用的代码。[http://jsfiddle.net/qGBYT/](http://jsfiddle.net/qGBYT/)

```
Ext.define('test.Model', {
     extend: 'Ext.data.Model',
     fields: ['id'],
     idProperty: 'id',
     proxy: {
         // Have also tried 'ajax'
         type: 'rest',
         url: '/echo/json',        
         reader: {
            type: 'json',
            root: 'records'
         }
     }
 }, 

 function(){
     var store = new Ext.data.Store({model:'test.Model'});
     var list = new Ext.view.View({
         itemTpl: '<div>{id}</div>',
         renderTo: Ext.getBody(), 
         width: 300,
         height: 500,
         store: store
     });

     store.load({params: {json: '{"records":[{"id":1}]'}});

 }); 
```

我得到的错误信息是

```
Uncaught TypeError: Cannot read property 'type' of undefined 
```

这是由上面代码中的第一行引起的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:44:51.650

我试图从回调外部移动您的商店创建代码，它工作正常 -

[http://jsfiddle.net/qGBYT/11](http://jsfiddle.net/qGBYT/11)

不知道为什么不喜欢原版

# facebook - 将 Faceook 的社交图存储在我们的数据库中是否违反了服务条款？

> ID：10854085
> 
> 赞同：0
> 
> 时间：2012-06-01T16:28:30.047
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我们正在创建一个应用程序，它会向用户询问他们朋友的权限，然后将他们的friends_ids 存储在我们的数据库中，这是否违反服务条款？如果是这样，我们在哪里可以找到这种违规行为，因为我似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:37:49.797

请参阅[平台政策](http://developers.facebook.com/policy/)，第 II 节。

您可以存储数据，但一定要让用户清楚。您不能在应用程序之外使用数据或出售它（显然）。对于好友列表，您应该每 24 小时更新一次列表以说明新/删除的好友。

# php - 使用 PHP 检测爬网（搜索引擎的访问）

> ID：10854090
> 
> 赞同：-1
> 
> 时间：2012-06-01T16:28:50.913
> 
> 标签：php, seo, search-engine, user-agent

当搜索引擎访问一个网页时，它的`get_browser()`作用和`$_SERVER['HTTP_USER_AGENT']` 返回是什么？

此外，当搜索引擎抓取网页时，PHP 提供的其他可能证据是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:45:32.777

*   [get_browser()](http://php.net/manual/en/function.get-browser.php)函数*尝试确定*浏览器的功能（以数组形式） `non standard user-agents`，但由于 相反，对于一个严肃的应用程序，构建你自己的。

*   这`$_SERVER["HTTP_USER_AGENT"]`是一个“描述”用户浏览器的长字符串，可以用作上述函数中的第一个参数（可选）；**提示**：使用这个来发现用户的浏览器而不是 get_browser() 本身！还要为*丢失*的用户代理做好准备！这个字符串的一个例子是：
    **Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en) AppleWebKit/418 (KHTML, like Gecko) Safari/417.9.3**

*   [遵循规则](http://www.cs.washington.edu/lab/policies/draft/crawlers.html)的搜索引擎或机器人或蜘蛛或爬虫将根据存储在您网站根目录中的**robots.txt**的信息访问您的页面。如果没有 robots.txt，*蜘蛛可以抓取整个网站*，只要它在您的网页中找到**链接；**如果你有这个文件，你可以编写它来告诉蜘蛛要搜索**什么**；**注意：**此规则仅适用于“好”蜘蛛，而不适用于[坏蜘蛛](http://www.w3.org/wiki/Bad_RDF_Crawlers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:11:31.847

`get_browser()`&`$_SERVER['HTTP_USER_AGENT']`将返回给你`Useragents`，它应该是这样的：

谷歌 ：

*   Mozilla/5.0（兼容；Googlebot/2.​​1；+http://www.google.com/bot.html）
*   Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_1 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8B117 Safari/6531.22.7 (compatible; Googlebot-Mobile/ 2.1；+http://www.google.com/bot.html)
*   Googlebot-Image/1.0

兵：

*   Mozilla/5.0（兼容；bingbot/2.​​0；+http://www.bing.com/bingbot.htm）
*   Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534+ (KHTML, like Gecko) BingPreview/1.0b
*   msnbot/2.​​0b (+http://search.msn.com/msnbot.htm)
*   msnbot-media/1.1 (+http://search.msn.com/msnbot.htm)

雅虎：

*   Mozilla/5.0（兼容；Yahoo! Slurp；[http://help.yahoo.com/help/us/ysearch/slurp](http://help.yahoo.com/help/us/ysearch/slurp)）

-> 要完全控制（和限制）抓取，请不要使用**robots.txt**，请使用**.htaccess**或**http.conf**规则。（好的爬虫在 robots.txt 中有一半时间不会对您的禁止规则发表意见）

# excel - 使用 OLE2 的 Oracle Forms 未在 3 层设置上保存 Excel 文档

> ID：10854093
> 
> 赞同：0
> 
> 时间：2012-06-01T16:29:07.430
> 
> 标签：excel, ole, oracleforms

系统设置：

```
3-Tier environment
Client Machine - doesn't matter
Web-Tier - Not sure.  Probably Windows Server 2008 64 bit
       -Jdk 7u3
App Server - Windows Server 2008 64 bit
       -Weblogic Server 10.3.6
       -Excel 2010
       -Jdk 7u3
Database Server - Not sure. Probably Windows Server 2008 64 bit.
       -Oracle Database 11g

Programming using Oracle Forms 11.1.1.6 
```

现在，我的问题是，当我们设计他们的系统时，除了数据库之外的所有东西都在一台 PC 上。我能够读取和写入 Excel 文档完全没有问题。然后，我们将所有内容都转移到分层设置中，其中包含客户端、应用程序服务器和数据库服务器。一切仍然很好。最后他们建立了三层系统，这就是我遇到问题的地方。

当我让 Oracle Forms 写入 Excel 文档时，代码似乎执行没有任何错误，直到我尝试使用 Webutil 从 App Server 复制文件。

```
PROCEDURE Export_to_Excel IS
 -- Declare the OLE objects
 application OLE2.OBJ_TYPE;
 workbooks OLE2.OBJ_TYPE;
 workbook OLE2.OBJ_TYPE;
 worksheets OLE2.OBJ_TYPE;
 worksheet OLE2.OBJ_TYPE;
 --cell OLE2.OBJ_TYPE;
 range OLE2.OBJ_TYPE;
 range_col OLE2.OBJ_TYPE;

 -- Declare handles to OLE argument lists
 args OLE2.LIST_TYPE;
 p_filename VARCHAR(255);

 --p_file TOOL_RES.RFHANDLE;
 p_file Text_IO.File_Type;
 p_filename_client      VARCHAR2(500);
 v_filename                     VARCHAR2(500);
 v_error                            VARCHAR2(500);
 passed_filename            VARCHAR2(500);
BEGIN

 -- Retrieve user specific directory to create new file in
 p_filename := Webutil_file_transfer.get_work_area;

 -- Start Excel 
 application:=OLE2.CREATE_OBJ('Excel.Application');

 -- Return object handle to the Workbooks collection 
 workbooks:=OLE2.GET_OBJ_PROPERTY(application, 'Workbooks');

 -- Add a new Workbook object to the Workbooks collection
 workbook:=OLE2.GET_OBJ_PROPERTY(workbooks,'Add');

 -- Return object handle to the Worksheets collection for the Workbook
 worksheets:=OLE2.GET_OBJ_PROPERTY(workbook, 'Worksheets');

 -- Set up the Header worksheet
 args:=OLE2.CREATE_ARGLIST; 
 OLE2.ADD_ARG(args, 1);
 worksheet:=OLE2.GET_OBJ_PROPERTY(worksheets,'Item',args);
 OLE2.DESTROY_ARGLIST(args);
 OLE2.set_property(worksheet,'Name','Header');

 -- Build header form
 populate_header(worksheet);

 -- Autofit columns
 range := OLE2.GET_OBJ_PROPERTY( worksheet,'UsedRange');
 range_col := OLE2.GET_OBJ_PROPERTY( range,'Columns');
 OLE2.INVOKE( range_col,'AutoFit' );
 OLE2.RELEASE_OBJ( range );
 OLE2.RELEASE_OBJ( range_col );

 -- Set up the Item worksheet
 args:=OLE2.CREATE_ARGLIST; 
 OLE2.ADD_ARG(args, 2);
 worksheet:=OLE2.GET_OBJ_PROPERTY(worksheets,'Item',args);
 OLE2.DESTROY_ARGLIST(args);
 OLE2.set_property(worksheet,'Name','Item List');

 -- Build Item sheet
 populate_item_sheet(worksheet);

 -- Delete the last worksheet that excel automatically creates
 args:=OLE2.CREATE_ARGLIST; 
 OLE2.ADD_ARG(args, 3);
 worksheet:=OLE2.GET_OBJ_PROPERTY(worksheets,'Item',args);
 OLE2.DESTROY_ARGLIST(args);
 OLE2.invoke(worksheet, 'Delete');

 -- Save as worksheet
 OLE2.SET_PROPERTY(application,'DisplayAlerts',FALSE);
 IF p_filename is not null THEN
        args := OLE2.CREATE_ARGLIST;
        OLE2.ADD_ARG( args, p_filename || :PARAMETER_B1.FILENAME || '.xlsx');
        OLE2.ADD_ARG( args, 56 );
        OLE2.INVOKE( workbook,'SaveAs',args );
        OLE2.DESTROY_ARGLIST( args );
 END IF;

 -- Close workbook
 OLE2.INVOKE( workbook ,'Close');

 -- Release the OLE objects
 OLE2.RELEASE_OBJ(worksheet);
 OLE2.RELEASE_OBJ(worksheets);
 OLE2.RELEASE_OBJ(workbook);
 OLE2.RELEASE_OBJ(workbooks);
 OLE2.INVOKE(application, 'Quit');
 OLE2.RELEASE_OBJ(application); 

 --Check if file was writen correctly
 p_file := text_io.fopen(p_filename || :PARAMETER_B1.FILENAME || '.xlsx','r');
 Text_IO.Fclose(p_file);

 --Added the following code
 passed_filename := :PARAMETER_B1.FILENAME || '.xlsx';
 v_filename := p_filename || passed_filename;

 -- Popup a dialog box to allow user to select the location to save the file
 p_filename_client := CLIENT_GET_FILE_NAME ( 'C:\', passed_filename, NULL, 'Select A Directory', SAVE_FILE, FALSE );

 if p_filename_client is null then
      message ('Creation of the spreadsheet has been canceled.');
        raise form_trigger_failure;
 end if;

 -- File Transfer to Client
 PROCESS_COMM_FILE_CLIENT.FILE_TRANSFER('O', p_filename_client, v_filename, null, v_error);

 EXCEPTION
      WHEN others THEN
        Text_IO.Fclose(p_file);
                message( SQLERRM( SQLCODE ) ) ;
        if p_filename_client is not null then
          MESSAGE('An error occurred while creating file.');
      end if;
END; 
```

代码在 FILE_TRANSFER 处失败，因为表单没有像预期的那样在 App Server 上创建。

发生的一个相关问题是，当我尝试上传 excel 文档并将其读入 oracle 时，我收到 ORA-305500 错误。我已尝试让 DBA 卸载并重新安装 Excel，并确保在安装过程中包含所有功能/附加组件，但问题仍未解决。

有人可以给我一些关于如何解决这个问题或继续解决这个问题的建议吗？

谢谢，

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:47:36.123

检查您的`$ORACLE_HOME/forms/server/webutil.cfg`, 读取目录是否有任何限制。

基本上，检查参数`"transfer.appsrv.read.<n>=/.../.../".`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:42:00.827

如果问题与使用 OLE 实际生成文件有关，那么我建议您创建目录：

```
C:\Windows\System32\config\systemprofile 
```

Oracle Forms 中的 OLE 代码在此目录中检查 OLE 配置设置。目录是否为空无关紧要，只要它存在！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:14:54.857

如果我理解您的问题，您打算将文件保存在客户端计算机中。现在假设您使用的是 WEB_FORMS（即您使用 Web 浏览器访问表单应用程序），您可以使用下面的代码将文件从 AS 保存到客户端计算机，而不是`PROCESS_COMM_FILE_CLIENT.FILE_TRANSFER`. OLE 对象在 AS 上创建文件，您需要将文件从 AS（应用服务器）获取到本地机器-

```
l_success := webutil_file_transfer.AS_to_Client_with_progress 
     (clientFile => 'c:\fine.xlsx' 
     ,serverFile => 'c:\data\file.xlsx' 
     ,progressTitle => 'Save file in progress' 
     ,progressSubTitle => 'Please wait');
if l_success then 
     message('File saved successfully'); 
else 
     message('Cannot save file'); 
end if; 
```

上面的代码应该显示一个带有进度条的“正在保存文件”弹出框，以显示您的文件正在保存到本地机器。

# java - Java 在不使用引号的情况下向 json 对象添加函数。

> ID：10854094
> 
> 赞同：4
> 
> 时间：2012-06-01T16:29:12.520
> 
> 标签：java, javascript, jquery, json

我正在用java构建一个json对象。我需要将一个函数传递给我的 javascript 并使用 jquery $.isFunction() 对其进行验证。我遇到的问题是我必须将 json 对象中的函数设置为字符串，但是 json 对象将周围的引号与对象一起传递，导致函数无效。如何在脚本中不出现引号的情况下执行此操作。

示例 Java

```
JSONObject json = new JSONObject();
json.put("onAdd", "function () {alert(\"Deleted\");}"); 
```

jQuery 脚本

```
//onAdd output is "function () {alert(\"Deleted\");}" 
//needs to be //Output is function () {alert(\"Deleted\");} 
//in order for it to be a valid function.
if($.isFunction(onAdd)) { 
    callback.call(hidden_input,item);
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-14T23:00:52.833

您可以实现 JSONString 接口。

```
import org.json.JSONString;

public class JSONFunction implements JSONString {

    private String string;

    public JSONFunction(String string) {
        this.string = string;
    }

    @Override
    public String toJSONString() {
        return string;
    }

} 
```

然后，使用您的示例：

```
JSONObject json = new JSONObject();
json.put("onAdd", new JSONFunction("function () {alert(\"Deleted\");}")); 
```

输出将是：

```
{"onAdd":function () {alert("Deleted");}} 
```

如前所述，它是无效的 JSON，但可能适合您的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T16:30:16.013

你不能。JSON 格式不包含函数数据类型。如果要通过 JSON 传递函数，则必须将函数序列化为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:33:16.580

跑步

```
onAdd = eval(onAdd); 
```

应该把你的字符串变成一个函数，但在某些浏览器中它是错误的。

IE 中的解决方法是使用

```
onAdd = eval("[" + onAdd + "]")[0]; 
```

请参阅[eval() 和 new Function() 是否相同？](https://stackoverflow.com/questions/4599857/is-eval-and-new-function-the-same-thing/4599932#4599932)

# django - boto.exception.S3ResponseError: S3ResponseError: 403 Forbidden

> ID：10854095
> 
> 赞同：55
> 
> 时间：2012-06-01T16:29:12.903
> 
> 标签：django, amazon-s3, boto, django-storage

我试图让 django 将静态文件上传到 S3，但我得到了 403 禁止错误，我不知道为什么。

**完整的堆栈跟踪：**

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 89, in handle_noargs
    self.copy_file(path, prefixed_path, storage, **options)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 184, in copy_file
    if not self.delete_file(path, prefixed_path, source_storage, **options):
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 115, in delete_file
    if self.storage.exists(prefixed_path):
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/storages/backends/s3boto.py", line 209, in exists
    return k.exists()
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/boto/s3/key.py", line 391, in exists
    return bool(self.bucket.lookup(self.name))
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/boto/s3/bucket.py", line 143, in lookup
    return self.get_key(key_name, headers=headers)
  File "/home/levi/Projects/DoneBox/.virtualenv/local/lib/python2.7/site-packages/boto/s3/bucket.py", line 208, in get_key
    response.status, response.reason, '')
boto.exception.S3ResponseError: S3ResponseError: 403 Forbidden 
```

**settings.py 的内容：**

```
import os
DIRNAME = os.path.dirname(__file__)
# Django settings for DoneBox project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': os.path.join(DIRNAME, "box.sqlite"),                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Denver'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = "d1eyn4cjl5vzx0.cloudfront.net"

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(DIRNAME, "static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = "d280kzug7l5rug.cloudfront.net"

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(DIRNAME, "main", "static"),
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '<snip>'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'DoneBox.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(DIRNAME, "main", "templates"),
    os.path.join(DIRNAME, "templates"),
    os.path.join(DIRNAME, "basic", "blog", "templates"),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sitemaps',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'storages',
    'django.contrib.admindocs',
    'main',
    'contacts',
    'piston',
    'registration',
#    'contact_form',
    'basic',
    'basic.blog',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'DEBUG',
            'propagate': True,
        },
        'django.db.backends': {
            'handlers': ['mail_admins'],
            'level': 'DEBUG',
            'propagate': True,
        }
    }
}

DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = '<snip>'
AWS_SECRET_ACCESS_KEY = '<snip>'
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_STORAGE_BUCKET_NAME = "donebox-static"
STATIC_FILES_BUCKET = "donebox-static"
MEDIA_FILES_BUCKET = "donebox-media"
ACCOUNT_ACTIVATION_DAYS = 7

EMAIL_HOST = "email-smtp.us-east-1.amazonaws.com"
EMAIL_HOST_USER = '<snip>'
EMAIL_HOST_PASSWORD = '<snip>'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
     "django.core.context_processors.debug",
     "django.core.context_processors.i18n",
     "django.core.context_processors.media",
     "django.core.context_processors.static",
     "django.contrib.messages.context_processors.messages",
     "DoneBox.main.context_processors_PandC",
     ) 
```

**requirements.pip 的内容：**

```
django==1.3
django-storages==1.1.4
django-registration==0.8
django-piston==0.2.3
django-tagging==0.3.1
django-extensions==0.8
BeautifulSoup==3.2.1
boto==2.4.1
mysql-python==1.2.3
tweepy==1.9
feedparser==5.1.2
pycrypto==2.6 
```

谷歌搜索这个例外并没有发现任何有趣的东西。我怀疑我配置错误，虽然我不确定。有人能指出我正确的方向吗？感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-04T16:48:29.570

我将 Amazon IAM 用于特定的密钥 ID 和访问密钥，只是碰到了相同的 403 Forbidden... 结果你需要提供**同时**针对存储桶根及其子对象的权限：

```
{
  "Statement": [
    {
      "Principal": {
          "AWS": "*"
      },
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": ["arn:aws:s3:::bucket-name/*", "arn:aws:s3:::bucket-name"]
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-06-05T09:07:55.763

我建议您尝试单独测试您的 AWS 凭证，以验证凭证是否确实有权读取和写入 S3 存储桶的数据。以下应该有效：

```
>>> import boto
>>> s3 = boto.connect_s3('<access_key>', '<secret_key>')
>>> bucket = s3.lookup('donebox-static')
>>> key = bucket.new_key('testkey')
>>> key.set_contents_from_string('This is a test')
>>> key.exists()
>>> key.delete() 
```

您应该对另一个存储桶（'donebox-media'）尝试相同的测试。如果这可行，则权限是正确的，问题出在 Django 存储代码或配置上。如果这以 403 失败，那么：

*   access_key/secret_key 字符串不正确
*   access_key/secret_key 是正确的，但该帐户没有写入存储桶的必要权限

我希望这会有所帮助。请报告您的发现。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2014-05-26T08:31:37.903

我遇到了同样的问题，最后发现真正的问题是服务器时间。它配置错误，AWS 以 403 FORBIDDEN 响应。

使用 Debian，您可以使用 NTP 自动配置：

> ntpdate 0.pool.ntp.org

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-16T13:12:51.070

如果您的机器的时间设置不正确，也会发生这种情况

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-16T12:14:06.053

如果这对任何人都有帮助，我必须添加以下配置条目`collectstatic`才能工作并且不返回 403：

```
AWS_DEFAULT_ACL = '' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-22T16:26:49.933

也可能使用了错误的凭据。核实：

```
import boto
s3 = boto.connect_s3('<your access key>', '<your secret key>')
bucket = s3.get_bucket('<your bucket>') # does this work?
s3 = boto.connect_s3()
s3.aws_access_key_id  # is the same key being used by default? 
```

如果没有，请查看`~/.boto`和。`~/.aws/config``~/.aws/credentials`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-06T16:04:17.470

这是一个具有最小权限的改进。在所有情况下，如[其他地方](https://stackoverflow.com/questions/12961910/what-permissions-does-django-storages-require-for-an-s3-iam-user) `s3:ListAllMyBuckets`所讨论的，对所有存储桶都是必要的。

在它的默认配置中，django-storages 会将文件上传到具有公共读取权限的 S3 - 请参阅[django-storages Amazon S3 后端](https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html)

反复试验表明，在此默认配置中，唯一需要的两个权限是`s3:PutObject`首先上传文件并将`s3:PutObjectAcl`该对象的权限设置为公共。

不需要额外的操作，因为从那时起，向前读取在对象上是公开的。

**IAM 用户政策 - 公开阅读（默认）：**

```
{
   "Version": "2012-10-17",
   "Statement": [
       {
           "Effect": "Allow",
           "Action": "s3:ListAllMyBuckets",
           "Resource": "arn:aws:s3:::*"
       },
       {
           "Effect": "Allow",
           "Action": [
               "s3:PutObject",
               "s3:PutObjectAcl"
           ],
           "Resource": "arn:aws:s3:::bucketname/*"
       }
   ]
} 
```

让对象公开可读并不总是可取的。这是通过在设置文件中设置相关属性来实现的。

**Django 设置.py：**

```
...
AWS_DEFAULT_ACL = "private"
... 
```

然后`s3:PutObjectAcl`不再需要，最小权限如下：

**IAM 用户政策 - 私有：**

```
{
   "Version": "2012-10-17",
   "Statement": [
       {
           "Effect": "Allow",
           "Action": "s3:ListAllMyBuckets",
           "Resource": "arn:aws:s3:::*"
       },
       {
           "Effect": "Allow",
           "Action": [
               "s3:PutObject",
               "s3:GetObject"
           ],
           "Resource": "arn:aws:s3:::bucketname/*"
       }
   ]
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-17T15:01:52.707

另一种避免自定义策略并使用 AWS 预定义策略的解决方案：

*   为您的 S3 用户添加 S3 完全访问权限。

    *   **IAM** /**用户**/**权限**和**附加策略**
    *   添加策略**“AmazonS3FullAccess”**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-16T10:16:06.563

**也许您实际上无权访问您尝试查找/获取/创建的存储桶。**

请记住： ***存储桶名称在整个 S3***生态系统中必须是唯一的，因此如果您尝试访问（查找/获取/创建）名为“test”的存储桶，您将无法访问它。

# php - 在空表上选择但仍然获得列名

> ID：10854097
> 
> 赞同：7
> 
> 时间：2012-06-01T16:29:22.967
> 
> 标签：php, mysql, pdo

我想在一个空表上执行 SELECT，但我仍然想用所有列名返回一条记录。我知道还有其他方法可以从表中获取列名，但我想知道是否可以使用某种 SELECT 查询。

当我直接在 MySQL 中运行它时，我知道它可以工作：

```
SELECT * FROM cf_pagetree_elements WHERE 1=0; 
```

但我正在使用 PHP + PDO (FETCH_CLASS)。这只是给了我一个空对象，而不是包含所有列名（具有空值）的行。因此，出于某种原因，该查询不适用于 PDO FETCH_CLASS。

```
$stmt = $this->db->prepare ( $sql );
$stmt->execute ( $bindings );
$result = $stmt->fetchAll ( \PDO::FETCH_CLASS, $class );
print_r($result); // Empty object... I need an object with column names 
```

有人知道我是否可以尝试另一种方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-26T13:31:25.607

除了[w00 回答](https://stackoverflow.com/a/10854780/1919921)的内容之外，还有一个甚至不需要虚拟表的解决方案

```
SELECT tbl.* 
FROM (SELECT 1) AS ignore_me 
    LEFT JOIN your_table AS tbl 
        ON 1 = 1 
LIMIT 1 
```

在 MySQL 中，您可以更改`WHERE 1 = 1`为`WHERE 1`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T17:23:58.007

对于发布有关 SHOW COLUMNS 和信息方案的其他答案。OP 明确表示：“**我知道还有其他方法可以从表中获取列名**，但我想知道是否可以使用某种 SELECT 查询。”

学着阅读。

* * *

无论如何，回答你的问题；不，你不能。您不能从空表中选择一行。甚至没有来自空表的空值行。

但是，您可以应用一个技巧来执行此操作。

创建一个名为“dummy”的附加表，其中只有一列和一行：

**表：**假人

```
dummy_id: 1 
```

就这样。现在您可以执行如下选择语句：

```
SELECT * FROM dummy LEFT OUTER JOIN your_table ON 1=1 
```

这将始终返回一行。然而，它也包含“dummy_id”列。但是，您当然可以忽略这一点，并随心所欲地处理（空）数据。

再说一次，这只是使用 SELECT 语句的一个技巧。没有默认方法可以完成此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T16:39:41.587

```
SHOW COLUMNS FROM cf_pagetree_elements; 
```

这将给出一个解释表结构的结果集。你可以很容易地用 PHP 解析结果。

另一种方法是查询信息模式表：

```
SELECT column_name FROM information_schema.columns WHERE table_name='cf_pagetree_elements'; 
```

虽然不是很推荐！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T16:35:58.703

你可以试试：

```
SELECT * FROM information_schema.columns
WHERE table_name = "cf_pagetree_elements" 
```

不确定您的特定 PHP+PDO 方法（可能会有并发症），但这是获取列标题（字段名称）的标准方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-07T16:23:53.153

这将列出支持 getColumMeta 的 PDO 驱动程序的任何查询的列。我将它与 SQL 服务器一起使用，即使在具有别名表、子查询和联合的非常复杂的查询上也能正常工作。即使结果为零也给我列

```
<?php 

    // just an example of an empty query.
    $query =$PDOdb->query("SELECT  * from something where 1=0; "); 
    for ($i=0; $i<$query->columnCount(); $i++) {
        echo $query->getColumnMeta($i)['name']."<br />";
    }

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T16:34:39.060

即使没有 PDO，数据库也不会返回没有至少一行的结构。您可以这样做并忽略数据行：

```
SELECT * FROM cf_pagetree_elements LIMIT 1; 
```

或者你可以简单地

```
DESC cf_pagetree_elements; 
```

并处理每个字段一行。

`WHERE 1=0`对我不起作用。它总是返回`empty set`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-14T10:03:33.713

SQLSVR 的最新 PDO 绝对适用于 get column meta。

只需设置您的语句并使用它来获取一系列有用的信息：

```
$stmt->execute();
$meta= array();
foreach(range(0, $stmt->columnCount() - 1) as $column_index)
   {
    array_push($meta,$stmt->getColumnMeta($column_index));
   } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-19T11:14:27.300

Oracle 或 MySQL 的完整解决方案

对于任何或某些列（我的目标是获得与 DB 中完全相同的任意列，无论大小写）

对于任何表（w 或 w/o 行）

```
 $qr = <<<SQL
SELECT $cols 
FROM (SELECT NULL FROM DUAL)
LEFT JOIN $able t ON 1 = 0
SQL;

    $columns = array_keys($con->query($qr)->fetchAll(PDO::FETCH_ASSOC)[0]);

    if($cols === "*") {
        array_shift($columns);
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-06-01T16:39:17.887

您可以将 MetaData 用于；

```
 $cols = mysql_query("SHOW COLUMNS FROM $tableName", $conn); 
```

# iphone - CMAttitude 和 CATransform3D 是否与旋转矩阵相关？

> ID：10854099
> 
> 赞同：6
> 
> 时间：2012-06-01T16:29:42.077
> 
> 标签：iphone, ios, matrix, core-motion, catransform3d

我正在查看核心运动类`CMAttitude`，它可以将设备的方向表示为 3x3 旋转矩阵。同时，我查看了`CATransform3D`，它封装了视图的态度以及缩放。是`CATransform3D`一个 4x4 矩阵。

我已经看到 OpenGL 旋转矩阵是 4x4 并且只是在第 4 行和第 4 列中填充了 0001。

**如果 CMAttitude 的旋转矩阵与 CATransform 的矩阵有关，我在徘徊？**

我可以使用通过旋转矩阵获得的设备在空间中的旋转来转换 UIView`CATransform3D`吗？我的意图是让用户移动手机并将相同的转换应用于屏幕上的 UIView。

**额外的问题：如果它们是相关的，我如何将 CMAttitude 的旋转矩阵转换为 CATransform3D？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:37:15.480

*陀螺仪仅*用于确定设备在空间中的方向。有很多方法可以参数化方向本身（有关理论信息，请参阅[SO(3)](http://en.wikipedia.org/wiki/Rotation_group_SO%283%29)组的信息） - 四元数、欧拉角和 3x3 矩阵就是其中之一。

将 3x3 矩阵“嵌入”到 4x4 矩阵中并不是 GL 特有的技巧。它是平移组（与所有 3D 向量同构）和旋转组（上面提到的 SO(3)）的[“半直接乘积” 。](http://en.wikipedia.org/wiki/Semidirect_product)

要从 CMAttitude 获取 CATransform3D 矩阵，您必须假设对象的某个位置。如果它为零，那么就像你所说的那样用 0001 填充矩阵。

这个问题你可能会感兴趣：[Apple gyroscope sample code](https://stackoverflow.com/questions/3245733/apple-gyroscope-sample-code)

# vb.net - 将文件从 .exe 上传到服务器

> ID：10854106
> 
> 赞同：0
> 
> 时间：2012-06-01T16:30:16.640
> 
> 标签：vb.net, winforms, upload

我想知道如何将文件从我的 WinForms .exe 应用程序上传到我的服务器。我试过了：`My.Computer.Network.UploadFile(myFile, myServer)`但我收到此错误“远程服务器返回错误：（404）未找到。” 有人知道从.exe 将文件上传到我的服务器的另一种方法吗？谢谢。

我正在使用 VB 和 .Net Framework 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:36:20.013

这是另一种方式，但听起来您上传到了错误的页面（HTTP 错误 = **404**）。 **检查您的网址**。

```
Dim fileName As String = AskUserForFileName()
Dim web As New WebClient()
web.UploadFile(uriString, fileName) 
```

# jquery - 如果具有类值的语句不起作用

> ID：10854111
> 
> 赞同：-1
> 
> 时间：2012-06-01T16:30:31.953
> 
> 标签：jquery, class, if-statement

有人可以向我解释为什么这不起作用。从逻辑上讲这是有道理的，但是有更好的方法吗？

```
$('#n2').click(function() {
    if ($('#b0').attr('class') == 'box position0') {
        movedown2
    }
})​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:34:48.207

你可以像下面这样，

```
$('#b0').is('.box.position0')) 
```

[**演示**](http://jsfiddle.net/Qrw7x/)

或者

```
$('#b0')[0].className == 'box position0' 
```

你也缺少函数调用`()`。

```
$('#n2').click( function(){ 
   if( $('#b0').is('.box.position0') ) {
     movedown2(); //Note the () added which was missing in your orig code
   } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:35:47.423

正如您从这个小提琴中看到的那样，您拥有的 jQuery 应该可以很好地进入您的 if 语句：

[http://jsfiddle.net/6TbT5/](http://jsfiddle.net/6TbT5/)

你在那里漂浮的事实`movedown2`可能是你的问题。您必须为我发布您的 HTML 以确保。

# php - 在 .htaccess 中使用 PHP 处理程序时撇号变成问号

> ID：10854113
> 
> 赞同：0
> 
> 时间：2012-06-01T16:30:38.417
> 
> 标签：php, apache, .htaccess

我在网站上有一个 .htm 页面，由于我不会进入的原因，无法将其重命名为 .htm 页面`.php`。

我在页面顶部添加了一些 PHP 代码（它设置了一个 cookie 并重定向到另一个页面），并将以下内容添加到`.htaccess`将文件解析`.htm`为 PHP：

```
 AddHandler application/x-httpd-php5 .html .htm 
```

一旦这被添加到`.htacces`s 所有撇号的变化变成问号。我正在使用字符集 UTF-8。

谁能提供不涉及重命名文件的解决方案`.php`？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:07:26.580

如果您的服务器允许您使用*.php*文件，而您只是想保留 url，则可以使用 mod_rewrite：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{SCRIPT_FILENAME} !-d
   RewriteRule ^myfilename\.htm$ myfilename.php [NC,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:37:09.903

撇号很可能不是您认为的常规撇号字符（ascii 39）。它们可能是在文字处理器中生成并粘贴的时髦字符。在您最喜欢的编辑器中打开文件，并在假撇号上退格，然后重新键入一个普通的撇号。

# java - 在 Java 中，发送 JSON POST 时使用 HttpPost (apache commons HttpClient) - 我应该对正文进行 URL 编码吗？

> ID：10854115
> 
> 赞同：4
> 
> 时间：2012-06-01T16:30:45.803
> 
> 标签：java, json, rest, url-encoding, apache-httpclient-4.x

我正在使用[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/)发送一个 RESTful JSON POST 请求（到第 3 方 API）

*   我应该对 JSON 正文进行 URL 编码吗？

*   如果内容中的某些内容已经经过 URL 编码（例如，我发送的 HTML 包含一些带有 URL 编码字符的链接，例如 @22），我是否应该期望在另一端获得内容而不对其进行解码？

例如，如果我正在做这样的事情

```
String html = "<a href='http://example.com?charOfTheDay=%22'>click me</a>";
// Build the JSON object 

JSONObject jsonObj = new JSONObject();
jsonObj.put("html", html);
jsonObj.put("otherKey",otherValue);
//...

// Create the POST object and add the parameters
HttpPost httpPost = new HttpPost(url);
StringEntity entity = new StringEntity(jsonObj.toString(), HTTP.UTF_8);
entity.setContentType("application/json");
httpPost.setEntity(entity);
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(httpPost); 
```

在获得“html”键的值之后，我是否应该期望在接收端获得相同的值？

例如在接收端

```
//after parsing the request string to a JSON object
String html = inputJsonObject.get("html") 
// should return "<a href='http://example.com?charOfTheDay=%22'>click me</a>" 
```

我需要做任何其他步骤来确保我发送的内容是“按原样”接收的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:16:46.520

您必须在这里担心两种情况：

1.  **JSON**
    你必须确保你生成的 JSON 是有效的 JSON (duh)。这意味着确保所有`{ }`and`[ ]`语法都在正确的位置，并确保您插入 JSON 对象的字段值被安全转义（例如转义问题中的 HTML 片段——一些引号字符需要被逃脱）。 **但是**因为您使用的是标准 JSON Java 库，所以您不必担心这一点……它会为您处理所有这些。

2.  **HTTP**
    然后必须将 JSON 字符串插入到 HTTP 请求正文中。这里不需要转义——只需插入原始 JSON 字符串。HTTP 作为一种协议，将接受请求/响应正文中的**任何内容**，包括原始二进制数据。

无论如何，这有点长，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:03:54.220

您的 http 标头中的 Content-Type 应该是 application/json，因此您不应该对 http 请求的正文进行 URL 编码。

URL 编码旨在防止用户使用表示 URL 的特殊字符（例如“/”）。

您也不必担心内容中的链接被解码，除非您在 http 标头中使用 Content-Type 建议服务器应该解码正文，例如 application/x-www-form-urlencoded

# java - 使用 JavaFileManager 编译项目

> ID：10854116
> 
> 赞同：4
> 
> 时间：2012-06-01T16:30:48.117
> 
> 标签：java, compiler-construction, multiple-projects

我目前正在创建一个允许用户编译单个或多个项目的系统。我一直在做一些研究，并决定使用 JavaCompilerAPI 来做到这一点。我一直在玩它，并设法编译单个 java 文件和编译单个 java 文件的列表。

我不能做的是编译一个java项目，更不用说一组了。我在某处读到您可以使用 JavaFileManager 来执行此操作，并且我已经阅读了一些内容，但是我找不到任何示例，所以我被卡住了。

这是我到目前为止所做的：

```
public List doCompilation(String sourceCode, String locationOfFile) {
   List<String> compile = new ArrayList<>();

    SimpleJavaFileObject fileObject = new DynamicJavaSourceCodeObject(locationOfFile, sourceCode);
    JavaFileObject javaFileObjects[] = new JavaFileObject[]{fileObject};

    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

    StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(null, Locale.getDefault(), null);

    Iterable<? extends JavaFileObject> compilationUnits = Arrays.asList(javaFileObjects);

    String[] compileOptions = new String[]{"-d", "C:/projects/Compiler/TempBINfolder/bin"};
    Iterable<String> compilationOptions = Arrays.asList(compileOptions);

    DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();

    CompilationTask compilerTask = compiler.getTask(null, stdFileManager, diagnostics, compilationOptions, null, compilationUnits);

    boolean status = compilerTask.call();

    if (!status) {//If compilation error occurs 
        // Iterate through each compilation problem and print it
        for (Diagnostic diagnostic : diagnostics.getDiagnostics()) { 
            compile.add(diagnostic.getKind().toString()+" on line  "+ diagnostic.getLineNumber() +"\nIn file:  \n"+ diagnostic.toString()+"\n\n");
        }
    }
    try {
        stdFileManager.close();//Close the file manager
    } catch (IOException e) {
        e.printStackTrace();
    }

    return compile;
} 
```

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:47:37.043

*   尝试使用[收缩包装](http://www.jboss.org/shrinkwrap)，它非常易于使用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:23:23.570

您可以枚举指定项目目录下的文件（和递归的目录，如果需要），并按照您现在的方式逐一编译它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:44:38.423

您需要在编译器类路径中包含输出目录。请注意我如何包含`targetDirectory`在下面的类路径中：

```
/**
 * Compiles Java source-code.
 * <p/>
 * @author Gili Tzabari
 */
public final class JavaCompiler
{
    private List<Path> sourcePath = new ArrayList<>();
    private List<Path> classPath = new ArrayList<>();
    private final Set<DebugType> debugOptions = new HashSet<>(Arrays.asList(DebugType.LINES,
        DebugType.SOURCE, DebugType.VARIABLES));

    /**
     * Sets the compiler classpath.
     * <p/>
     * @param sourcePath the paths to search for the source format of dependent classes
     * @throws NullPointerException if sourcePath is null
     * @throws IllegalArgumentException if sourcePath refers to a non-existent path or a non-directory
     * @return the JavaCompiler
     */
    public JavaCompiler sourcePath(List<Path> sourcePath)
    {
        Preconditions.checkNotNull(sourcePath, "sourcePath may not be null");
        for (Path path: sourcePath)
        {
            if (!Files.exists(path))
            {
                throw new IllegalArgumentException("sourcePath refers to non-existant path: " + path.
                    toAbsolutePath());
            }
            if (!Files.isDirectory(path))
            {
                throw new IllegalArgumentException("sourcePath refers to a non-directory: " + path.
                    toAbsolutePath());
            }
        }

        this.sourcePath = ImmutableList.copyOf(sourcePath);
        return this;
    }

    /**
     * Sets the compiler classpath.
     * <p/>
     * @param classPath the paths to search for the compiled format of dependent classes
     * @throws NullPointerException if classPath is null
     * @throws IllegalArgumentException if classPath refers to a non-existent path
     * @return the JavaCompiler
     */
    public JavaCompiler classPath(List<Path> classPath)
    {
        Preconditions.checkNotNull(classPath, "classPath may not be null");
        for (Path path: classPath)
        {
            if (!Files.exists(path))
            {
                throw new IllegalArgumentException("classPath refers to non-existant path: " + path.
                    toAbsolutePath());
            }
        }

        this.classPath = ImmutableList.copyOf(classPath);
        return this;
    }

    /**
     * Indicates the kind of debugging information the generated files should contain.
     * <p/>
     * @param debugOptions the kind of debugging information the generated files should contain. By
     * default all debugging information is generated.
     * @return the JavaCompiler object
     */
    public JavaCompiler debug(DebugType... debugOptions)
    {
        this.debugOptions.clear();
        this.debugOptions.addAll(Arrays.asList(debugOptions));
        return this;
    }

    /**
     * Compiles the source code.
     * <p/>
     * @param sourceFiles the source files to compile
     * @param targetDirectory the directory to compile into. This path included in the compiler
     * classpath.
     * @throws IllegalArgumentException if sourceFiles, targetDirectory are null; or if sourceFiles
     * refers to a non-existent file or a non-file; or if targetDirectory is not a directory
     * @throws CompilationException if the operation fails
     */
    public void run(final Collection<Path> sourceFiles, final Path targetDirectory)
        throws IllegalArgumentException, CompilationException
    {
        if (sourceFiles == null)
            throw new IllegalArgumentException("sourceFiles may not be null");
        if (sourceFiles.isEmpty())
            return;
        for (Path file: sourceFiles)
        {
            if (!Files.exists(file))
            {
                throw new IllegalArgumentException("sourceFiles refers to a non-existant file: "
                    + file.toAbsolutePath());
            }
            if (!Files.isRegularFile(file))
            {
                throw new IllegalArgumentException("sourceFiles refers to a non-file: "
                    + file.toAbsolutePath());
            }
        }
        if (targetDirectory == null)
            throw new IllegalArgumentException("targetDirectory may not be null");
        if (!Files.exists(targetDirectory))
        {
            throw new IllegalArgumentException("targetDirectory must exist: " + targetDirectory.
                toAbsolutePath());
        }
        if (!Files.isDirectory(targetDirectory))
        {
            throw new IllegalArgumentException("targetDirectory must be a directory: " + targetDirectory.
                toAbsolutePath());
        }
        Set<Path> uniqueSourceFiles = ImmutableSet.copyOf(sourceFiles);
        Set<Path> uniqueSourcePath = ImmutableSet.copyOf(sourcePath);
        final javax.tools.JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        if (compiler == null)
        {
            throw new AssertionError("javax.tools.JavaCompiler is not available. Is tools.jar missing "
                + "from the classpath?");
        }
        final DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<>();
        final StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null,
            null);

        Iterable<? extends JavaFileObject> compilationUnits;
        try
        {
            Set<File> modifiedFiles = getModifiedFiles(uniqueSourceFiles, uniqueSourcePath,
                targetDirectory, new HashSet<Path>());
            if (modifiedFiles.isEmpty())
                return;
            compilationUnits = fileManager.getJavaFileObjectsFromFiles(modifiedFiles);
        }
        catch (IOException e)
        {
            throw new CompilationException(e);
        }
        final List<Path> effectiveClasspath = new ArrayList<>();
        effectiveClasspath.add(targetDirectory);
        effectiveClasspath.addAll(classPath);
        final List<String> options = new ArrayList<>();
        options.add("-cp");
        options.add(Joiner.on(File.pathSeparatorChar).join(effectiveClasspath));

        final StringBuilder debugLine = new StringBuilder("-g:");
        for (DebugType type: debugOptions)
        {
            switch (type)
            {
                case LINES:
                {
                    debugLine.append("lines,");
                    break;
                }
                case SOURCE:
                {
                    debugLine.append("source,");
                    break;
                }
                case VARIABLES:
                {
                    debugLine.append("vars,");
                    break;
                }
                default:
                    throw new AssertionError(type);
            }
        }
        if (!debugOptions.isEmpty())
        {
            debugLine.deleteCharAt(debugLine.length() - ",".length());
            options.add(debugLine.toString());
        }

        if (!uniqueSourcePath.isEmpty())
        {
            options.add("-sourcepath");
            options.add(Joiner.on(File.pathSeparatorChar).join(uniqueSourcePath));
        }
        options.add("-s");
        options.add(targetDirectory.toString());
        options.add("-d");
        options.add(targetDirectory.toString());
        final Writer output = null;
        final CompilationTask task = compiler.getTask(output, fileManager, diagnostics, options, null,
            compilationUnits);
        final boolean result = task.call();
        try
        {
            printDiagnostics(diagnostics, options, sourceFiles);
        }
        catch (IOException e)
        {
            throw new BuildException(e);
        }
        if (!result)
            throw new CompilationException();
        try
        {
            fileManager.close();
        }
        catch (IOException e)
        {
            throw new BuildException(e);
        }
    }

    /**
     * Returns the java source-code file corresponding to a class name.
     * <p/>
     * @param className the fully-qualified class name to look up
     * @param sourcePath the source-code search path
     * @return null if no match was found
     */
    private static File getJavaSource(String className, Set<File> sourcePath)
    {
        // TODO: check for class files instead of source
        for (File path: sourcePath)
        {
            File result = classNameToFile(path, className);
            if (!result.exists())
                continue;
            return result;
        }
        return null;
    }

    /**
     * Converts a class name to its source-code file.
     * <p/>
     * @param sourcePath the source-code search path
     * @param className the fully-qualified class name
     * @return the source-code file
     */
    private static File classNameToFile(File sourcePath, String className)
    {
        return new File(sourcePath, className.replace(".", "/") + ".java");
    }

    /**
     * Displays any compilation errors.
     * <p/>
     * @param diagnostics the compiler diagnostics
     * @param options the command-line options passed to the compiler
     * @param sourceFiles the source files to compile
     * @throws IOException if an I/O error occurs
     */
    private void printDiagnostics(final DiagnosticCollector<JavaFileObject> diagnostics,
        final List<String> options, final Collection<Path> sourceFiles) throws IOException
    {
        Logger log = LoggerFactory.getLogger(JavaCompiler.class.getName() + ".stderr");
        int errors = 0;
        int warnings = 0;
        boolean firstTime = true;
        for (Diagnostic<? extends JavaFileObject> diagnostic: diagnostics.getDiagnostics())
        {
            if (firstTime)
            {
                firstTime = false;
                StringBuilder message = new StringBuilder();
                message.append("Invoking: javac ");
                for (String token: options)
                    message.append(token).append(" ");
                message.append(Joiner.on(" ").join(sourceFiles));
                log.debug(message.toString());
            }
            JavaFileObject source = diagnostic.getSource();
            if (source == null)
                log.error(diagnostic.getMessage(null));
            else
            {
                StringBuilder message = new StringBuilder();
                message.append(source.getName());
                if (diagnostic.getLineNumber() != Diagnostic.NOPOS)
                    message.append(":").append(diagnostic.getLineNumber());
                message.append(": ").append(diagnostic.getMessage(null));
                log.error(message.toString());
                try (BufferedReader reader =
                        new BufferedReader(new InputStreamReader(source.openInputStream())))
                {
                    String line = null;
                    for (long lineNumber = 0, size = diagnostic.getLineNumber(); lineNumber < size;
                        ++lineNumber)
                    {
                        line = reader.readLine();
                        if (line == null)
                            break;
                    }
                    if (line != null)
                    {
                        log.error(line);
                        message = new StringBuilder();
                        for (long i = 1, size = diagnostic.getColumnNumber(); i < size; ++i)
                            message.append(" ");
                        message.append("^");
                        log.error(message.toString());
                    }
                }
            }
            switch (diagnostic.getKind())
            {
                case ERROR:
                {
                    ++errors;
                    break;
                }
                case NOTE:
                case OTHER:
                case WARNING:
                case MANDATORY_WARNING:
                {
                    ++warnings;
                    break;
                }
                default:
                    throw new AssertionError(diagnostic.getKind());
            }
        }
        if (errors > 0)
        {
            StringBuilder message = new StringBuilder();
            message.append(errors).append(" error");
            if (errors > 1)
                message.append("s");
            log.error(message.toString());
        }
        if (warnings > 0)
        {
            StringBuilder message = new StringBuilder();
            message.append(warnings).append(" warning");
            if (warnings > 1)
                message.append("s");
            log.warn(message.toString());
        }
    }

    /**
     * Returns the source-code files that have been modified.
     * <p/>
     * @param sourceFiles the source files to process
     * @param sourcePath the source file search path
     * @param targetDirectory the directory to compile into
     * @param unmodifiedFiles files that are known not to have been modified
     * @return all changed source-code files that are accepted by the filter
     * @throws IOException if an I/O error occurs
     */
    private Set<File> getModifiedFiles(final Set<Path> sourceFiles,
        final Set<Path> sourcePath, final Path targetDirectory, final Set<Path> unmodifiedFiles)
        throws IOException
    {
        // TODO: Right now all files are assumed to have been modified
        Set<File> result = new HashSet<>();
        for (Path path: sourceFiles)
            result.add(path.toFile());
        return result;
    }

    /**
     * Returns the command-line representation of the object.
     * <p/>
     * @param sourceFiles the source files to compile
     * @param targetDirectory the directory to compile into
     * @param sourcePath the source file search path
     * @return the command-line representation of the object
     * @throws IllegalArgumentException if the classpath contains non-file components
     * @throws IOException if an I/O error occurs
     */
    private List<String> toCommandLine(final Collection<Path> sourceFiles, final Path targetDirectory,
        final Collection<Path> sourcePath)
        throws IOException
    {
        final List<String> result = Lists.newArrayList("javac");
        if (!classPath.isEmpty())
        {
            result.add("-cp");
            try
            {
                final StringBuilder line = new StringBuilder();
                for (final Iterator<Path> i = classPath.iterator(); i.hasNext();)
                {
                    line.append(i.next().getParent().toString());
                    if (i.hasNext())
                        line.append(File.pathSeparatorChar);
                }
                result.add(line.toString());
            }
            catch (IllegalArgumentException e)
            {
                // Occurs if URL does not refer to a file
                throw new IllegalStateException(e);
            }
        }
        for (File javaFile: getModifiedFiles(ImmutableSet.copyOf(sourceFiles),
            ImmutableSet.copyOf(sourcePath), targetDirectory, new HashSet<Path>()))
        {
            result.add(javaFile.getPath());
        }
        result.add("-d");
        result.add(targetDirectory.getParent().toString());
        return result;
    }

    @Override
    public String toString()
    {
        return getClass().getName() + "[classPath=" + classPath + "]";
    }

    /**
     * The type of debugging information that generated files may contain.
     * <p/>
     * @author Gili Tzabari
     */
    @SuppressWarnings("PublicInnerClass")
    public enum DebugType
    {
        /**
         * No debugging information.
         */
        NONE,
        /**
         * Line number information.
         */
        LINES,
        /**
         * Local variable information.
         */
        VARIABLES,
        /**
         * Source file information.
         */
        SOURCE
    }
} 
```

# c++ - 在 Mac OS 上测量 deltatime 毫秒的最佳方法？

> ID：10854118
> 
> 赞同：3
> 
> 时间：2012-06-01T16:31:00.287
> 
> 标签：c++, c, macos, macos-carbon

自 Mac 启动以来，我找到了一个获取毫秒数的函数：

```
U32 Platform::getRealMilliseconds()
{
   // Duration is a S32 value.
   // if negative, it is in microseconds.
   // if positive, it is in milliseconds.
   Duration durTime = AbsoluteToDuration(UpTime());
   U32 ret;
   if( durTime < 0 )
      ret = durTime / -1000;
   else 
      ret = durTime;

   return ret;
} 
```

问题是，大约 20 天后，AbsoluteToDuration 一直返回 INT_MAX，直到 Mac 重新启动。

我尝试使用下面的方法，它有效，但看起来 gettimeofday 需要更多时间并且会减慢游戏速度：

```
timeval tim;
gettimeofday(&tim, NULL);
U32 ret = ((tim.tv_sec) * 1000 + tim.tv_usec/1000.0) + 0.5; 
```

有没有更好的方法来获取自某个时期以来经过的毫秒数（最好是自应用程序启动以来）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:06:19.973

我的首选方法是`mach_absolute_time`- 请参阅[此技术说明](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)- 我使用第二种方法，即`mach_absolute_time`获取时间戳并`mach_timebase_info`获取将时间戳之间的差异转换为实际时间值（具有纳秒分辨率）所需的常量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T16:51:59.047

您真正的问题是您正在尝试将正常运行时间（以毫秒为单位）值放入 32 位整数中。如果您这样做，无论您如何获得价值，您的价值将始终在 49 天或更短的时间内归零（或饱和）。

一种可能的解决方案是使用 64 位整数来跟踪时间值；这样算账的日子就会推迟几百年，所以你不必担心这个问题。这是它的 MacOS/X 实现：

```
uint64_t GetTimeInMillisecondsSinceBoot()
{
   return UnsignedWideToUInt64(AbsoluteToNanoseconds(UpTime()))/1000000;
} 
```

...或者如果您不想返回 64 位时间值，则最好在程序启动时记录当前的毫秒时间值，然后始终从值中减去该值你回来。这样，在您自己的程序运行至少 49 天之前，事情不会中断，我认为这对于游戏来说不太可能。

```
uint32_t GetTimeInMillisecondsSinceProgramStart()
{
   static uint64_t _firstTimeMillis = GetTimeInMillisecondsSinceBoot();
   uint64_t nowMillis = GetTimeInMillisecondsSinceBoot();
   return (uint32_t) (nowMillis-_firstTimeMillis);
} 
```

# java - 计算包括节假日在内的工作日

> ID：10854119
> 
> 赞同：10
> 
> 时间：2012-06-01T16:31:04.300
> 
> 标签：java, date, calendar

我需要计算两个日期之间的工作日。例如：我们在 7 月 4 日放假（在美国）。所以如果我的日期是 date1 = 07/03/2012 date2 = 07/06/2012

由于 7 月 4 日是假期，因此这些日期应为 1 个工作日。

我有一个下面的方法来计算工作日，它只计算周末而不是假期。还有什么方法可以计算假期....请帮助我。

```
 public static int getWorkingDaysBetweenTwoDates(Date startDate, Date endDate) {  
    Calendar startCal;  
    Calendar endCal;  
    startCal = Calendar.getInstance();  
    startCal.setTime(startDate);  
    endCal = Calendar.getInstance();  
    endCal.setTime(endDate);  
    int workDays = 0;  

    //Return 0 if start and end are the same  
    if (startCal.getTimeInMillis() == endCal.getTimeInMillis()) {  
        return 0;  
    }  

    if (startCal.getTimeInMillis() > endCal.getTimeInMillis()) {  
        startCal.setTime(endDate);  
        endCal.setTime(startDate);  
    }  

    do {  
        startCal.add(Calendar.DAY_OF_MONTH, 1);  
        if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY   
       && startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {  
            ++workDays;  
        }  
    } while (startCal.getTimeInMillis() < endCal.getTimeInMillis());  

    return workDays;  
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-11-26T09:47:45.763

由于接受的答案仍然使用过时的`Calendar`类 - 这是我使用包中提供的更新的 Java 日期和时间 API 的两分钱`java.time`。

您必须从某个地方获取假期的日期，没有标准的 Java 库。无论如何，这将过于本地化，因为假期在很大程度上取决于您所在的国家和地区（众所周知的假期除外，例如圣诞节或复活节）。
例如，您可以从假期 API 中获取它们。在下面的代码中，我将它们硬编码为 a `Set`of `LocalDate`s。

### 爪哇 9

```
LocalDate startDate = LocalDate.of(2012, 3, 7);
LocalDate endDate = LocalDate.of(2012, 6, 7);

// I've hardcoded the holidays as LocalDates
// and put them in a Set
final Set<LocalDate> holidays = Set.of(
    LocalDate.of(2018, 7, 4)
);
// For the sake of efficiency, I also put the business days into a Set.
// In general, a Set has a better lookup speed than a List.
final Set<DayOfWeek> businessDays = Set.of(
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY
);

List<LocalDate> allDates =

    // Java 9 provides a method to return a stream with dates from the
    // startdate to the given end date. Note that the end date itself is
    // NOT included.
    startDate.datesUntil(endDate)

        // Retain all business days. Use static imports from
        // java.time.DayOfWeek.*
        .filter(t -> businessDays.contains(t.getDayOfWeek()))

        // Retain only dates not present in our holidays list
        .filter(t -> !holidays.contains(t))

         // Collect them into a List. If you only need to know the number of
         // dates, you can also use .count()
        .collect(Collectors.toList()); 
```

### 爪哇 8

该方法`LocalDate.datesUntil`在 Java 8 中不可用，因此您必须以不同的方式获取这两个日期之间的所有日期的流。我们必须首先计算使用该`ChronoUnit.DAYS.between`方法之间的总天数。

```
long numOfDaysBetween = ChronoUnit.DAYS.between(startDate, endDate); 
```

然后我们必须生成一个整数序列，其长度与开始日期和结束日期之间的天数完全相同，然后从中创建`LocalDate`s，从开始日期开始。

```
IntStream.iterate(0, i -> i + 1)
    .limit(numOfDaysBetween)
    .mapToObj(startDate::plusDays) 
```

现在我们有了一个`Stream<LocalDate>`，然后您就可以使用 Java 9 代码的剩余部分了。您还需要替换 的用法`Set.of()`，因为它在 Java 8 中不可用。可能是`new HashSet<>(Arrays.asList(MONDAY...FRIDAY))`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T16:53:35.090

正如您所提到的，假设您有一个包含所有假期的列表。

```
ArrayList<Integer> holidays = ... 
```

只需在您的`if`条件中添加一个条件`do-while`：

```
do {
          startCal.add(Calendar.DAY_OF_MONTH, 1);
          if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY
          && startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY
          && !holidays.contains((Integer) startCal.get(Calendar.DAY_OF_YEAR))) {
              ++workDays;
          }
} while (startCal.getTimeInMillis() < endCal.getTimeInMillis()); 
```

为简单起见，我假设`holiday`包含格式与`Calendar.DAY_OF_YEAR`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-09T21:27:10.937

# 纳格日期

您可以使用[Nager.Date](https://github.com/nager/Nager.Date)项目的[JSON API](http://date.nager.at/Api)。它支持美国、加拿大和欧洲。您可以将每年可用的数据保存在自己的数据库中。

**例子**

```
//https://github.com/FasterXML/jackson-databind/
ObjectMapper mapper = new ObjectMapper();
MyValue value = mapper.readValue(new URL("http://date.nager.at/api/v1/get/US/2017"), PublicHoliday[].class); 
```

**PublicHoliday.class**

```
public class PublicHoliday
{
    public String date;
    public String localName;
    public String name;
    public String countryCode;
    public Boolean fixed;
    public Boolean countyOfficialHoliday;
    public Boolean countyAdministrationHoliday;
    public Boolean global;
    public String[] counties;
    public int launchYear;
} 
```

检索到的示例 JSON 数据。

```
[
  {
    "date": "2017-01-01",
    "localName": "New Year's Day",
    "name": "New Year's Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-01-16",
    "localName": "Martin Luther King, Jr. Day",
    "name": "Martin Luther King, Jr. Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-01-20",
    "localName": "Inauguration Day",
    "name": "Inauguration Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": false,
    "counties": [
      "US-DC",
      "US-LA",
      "US-MD",
      "US-VA"
    ],
    "launchYear": null
  },
  {
    "date": "2017-02-20",
    "localName": "Washington's Birthday",
    "name": "Presidents' Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-05-29",
    "localName": "Memorial Day",
    "name": "Memorial Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-07-04",
    "localName": "Independence Day",
    "name": "Independence Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-09-04",
    "localName": "Labor Day",
    "name": "Labor Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-09-09",
    "localName": "Columbus Day",
    "name": "Columbus Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": false,
    "counties": [
      "US-AL",
      "US-AZ",
      "US-CO",
      "US-CT",
      "US-DC",
      "US-GA",
      "US-ID",
      "US-IL",
      "US-IN",
      "US-IA",
      "US-KS",
      "US-KY",
      "US-LA",
      "US-ME",
      "US-MD",
      "US-MA",
      "US-MS",
      "US-MO",
      "US-MT",
      "US-NE",
      "US-NH",
      "US-NJ",
      "US-NM",
      "US-NY",
      "US-NC",
      "US-OH",
      "US-OK",
      "US-PA",
      "US-RI",
      "US-SC",
      "US-TN",
      "US-UT",
      "US-VA",
      "US-WV"
    ],
    "launchYear": null
  },
  {
    "date": "2017-11-10",
    "localName": "Veterans Day",
    "name": "Veterans Day",
    "countryCode": "US",
    "fixed": false,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  },
  {
    "date": "2017-12-23",
    "localName": "Thanksgiving Day",
    "name": "Thanksgiving Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": 1863
  },
  {
    "date": "2017-12-25",
    "localName": "Christmas Day",
    "name": "Christmas Day",
    "countryCode": "US",
    "fixed": true,
    "countyOfficialHoliday": true,
    "countyAdministrationHoliday": true,
    "global": true,
    "counties": null,
    "launchYear": null
  }
] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T16:37:37.510

我没有任何代码示例或类似的东西，但我做了一些搜索，发现了这个 Stack Overflow 线程，其中有一些指向 Web 服务的链接，可以为你返回假期日期，这可能会帮助你到达你想要的地方需要：[国庆节网络服务](https://stackoverflow.com/questions/59934/national-holiday-web-service)

该线程中的最佳答案链接到此 Web 服务： http: [//www.holidaywebservice.com/](http://www.holidaywebservice.com/)

我不确定为这类事情使用网络服务是否是矫枉过正，但肯定有更好的方法。抱歉，我不是最有经验的程序员，所以我无法为您提供尽可能多的帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-29T14:12:12.093

我发现最快的方法是使用一些数学（借用[SO](https://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java/44942039#44942039) post）：

```
public static int totalBusinessDaysBetween(LocalDate start, LocalDate end) {
    Objects.requireNonNull(start, "Start date must not be null");
    Objects.requireNonNull(end, "End date must not be null");
    long daysBetweenWithoutWeekends = calculateNumberOfDaysBetweenMinusWeekends(start, end);
    final Set<LocalDate> holidayForYearRange = getUSFederalHolidayForYearRange(start.getYear(), end.getYear());
    for (LocalDate localDate : holidayForYearRange) {
        if (localDate.isAfter(start) && localDate.isBefore(end)) {
            daysBetweenWithoutWeekends--;
        }
    }
    return (int) daysBetweenWithoutWeekends;
} 
```

和：

```
private static long calculateNumberOfDaysBetweenMinusWeekends(LocalDate start, LocalDate end) {

    final DayOfWeek startW = start.getDayOfWeek();
    final DayOfWeek endW = end.getDayOfWeek();

    final long days = ChronoUnit.DAYS.between(start, end);
    final long daysWithoutWeekends = days - 2 * ((days + startW.getValue()) / 7);

    //adjust for starting and ending on a Sunday:
    return daysWithoutWeekends + (startW == DayOfWeek.SUNDAY ? 1 : 0) + (endW == DayOfWeek.SUNDAY ? 1 : 0);
} 
```

[我在这里](https://github.com/jimador/fun-time)把更完整的东西放在一起。

# javascript - 使用 jQuery/Javascript 编辑 CSS3 动画

> ID：10854142
> 
> 赞同：1
> 
> 时间：2012-06-01T16:33:04.967
> 
> 标签：javascript, jquery, animation, css

是否可以编辑这样的动画

```
@-webkit-keyframes rotation {
  0%   { -webkit-transform: rotate(0deg); }
  85% { -webkit-transform: rotate(1442deg); }
  94% { -webkit-transform: rotate(1438deg); }
  100% { -webkit-transform: rotate(1440deg); }
} 
```

使用 JavaScript？

先感谢您，

马泰奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T11:25:06.513

最简单的方法应该是jQueryKeyframes插件： [https ://github.com/jQueryKeyframes/jQuery.Keyframes](https://github.com/jQueryKeyframes/jQuery.Keyframes)

它为您提供了简单的语法，因此您的示例应如下所示：

```
$.keyframe.define([{
    name: 'rotation',
    0%   { 'transform': 'rotate(0deg)' },
    85% { 'transform': 'rotate(1442deg)' },
    94% { 'transform': 'rotate(1438deg)' },
    100% { 'transform': 'rotate(1440deg)' }
}]); 
```

通过 JS 注入 CSS 的手动方式也应该有效。

# java - onResume 在从其他活动返回时表现不如预期

> ID：10854148
> 
> 赞同：2
> 
> 时间：2012-06-01T16:33:34.280
> 
> 标签：java, android, oncreate, onresume

我有一个小应用程序可以计算到指定日期和时间的时间。它运作良好。

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.concurrent.TimeUnit;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Menu;
import android.widget.DigitalClock;
import android.widget.TextView;

public class Day2GoActivity extends Activity {
private TextView tvWeeks, tvDays, tvHours, tvMinutes, tvSeconds, timeUntil;

public Date curDateTime = new Date();
public Calendar today = Calendar.getInstance();
public Calendar leaving = Calendar.getInstance();
protected SimpleDateFormat sdf = new SimpleDateFormat("E dd-MMM-yyyy HH:mm");

protected Handler h = new Handler();
protected Runnable r = new Runnable() {
    public void run() {
        afficher();
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tvDays = (TextView) findViewById(R.id.tvDays);
    timeUntil = (TextView) findViewById(R.id.timeUntil);
    tvWeeks = (TextView) findViewById(R.id.tvWeeks);
    tvHours = (TextView) findViewById(R.id.tvHours);
    tvMinutes = (TextView) findViewById(R.id.tvMinutes);
    tvSeconds = (TextView) findViewById(R.id.tvSeconds);
}

@Override
protected void onResume() {
    super.onResume();
    Log.i("TAG", "Resuming");
    SharedPreferences sharedPreferences = getSharedPreferences("preferences", MODE_PRIVATE);
    Log.i("MyActvity", "Year = " + sharedPreferences.getInt("year", Calendar.YEAR));

    leaving.set(sharedPreferences.getInt("year", Calendar.YEAR), sharedPreferences.getInt("month", Calendar.MONTH),
            sharedPreferences.getInt("dayOfMonth", Calendar.DAY_OF_MONTH), sharedPreferences.getInt("hour", Calendar.HOUR_OF_DAY),
            sharedPreferences.getInt("minute", Calendar.MINUTE));
    timeUntil.setText("Time until: " + sdf.format(leaving.getTime()));
    r.run();
    Log.w("TAG", "Resumed");

}

private void afficher() {
    today = Calendar.getInstance();
    long millisToGo = leaving.getTimeInMillis() - today.getTimeInMillis();
    long seconds2go = TimeUnit.MILLISECONDS.toSeconds(millisToGo);
    tvSeconds.setText(String.format("%,d seconds", seconds2go));
    long minutes2go = TimeUnit.MILLISECONDS.toMinutes(millisToGo);
    tvMinutes.setText(String.format("%,d minutes", minutes2go));
    long hours2go = TimeUnit.MILLISECONDS.toHours(millisToGo);
    tvHours.setText(String.format("%d hours", hours2go));
    tvDays.setText(String.format("%d days %d hours", (int) hours2go / 24, hours2go % 24));
    long days2go = TimeUnit.MILLISECONDS.toDays(millisToGo);
    tvWeeks.setText(String.format("%d weeks %d days", (int) days2go / 7, days2go % 7));
    h.postDelayed(r, 1000);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Intent myIntent = new Intent(getApplicationContext(), editDate.class);
    startActivity(myIntent);
    return true;
} 
```

但是，当用户更改日期和时间时，我遇到了问题。`Activity`正如你所见，我有第二个在`onCreateOptionsMenu`. 它也可以正常工作。

```
import java.util.Calendar;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.DatePicker;
import android.widget.TimePicker;

public class editDate extends Activity {

protected DatePicker dp1;
protected TimePicker tp1;
protected Calendar c;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit);
    dp1 = (DatePicker) findViewById(R.id.datePicker1);
    tp1 = (TimePicker) findViewById(R.id.timePicker1);
    tp1.setIs24HourView(true);
    LoadPreferences();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    SavePreferences();
}

private void SavePreferences() {
    SharedPreferences sharedPreferences = this.getSharedPreferences("preferences", MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();

    editor.putInt("year", dp1.getYear());
    editor.putInt("month", dp1.getMonth());
    editor.putInt("dayOfMonth", dp1.getDayOfMonth());
    editor.putInt("hour", tp1.getCurrentHour());
    editor.putInt("minute", tp1.getCurrentMinute());
    editor.commit();
}

private void LoadPreferences() {
    SharedPreferences sharedPreferences = this.getSharedPreferences("preferences", MODE_PRIVATE);
    c = Calendar.getInstance();

    try {
        dp1.init(sharedPreferences.getInt("year", c.YEAR), sharedPreferences.getInt("month", c.MONTH),
                sharedPreferences.getInt("dayOfMonth", c.DAY_OF_MONTH), null);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        dp1.init(2012, 5, 1, null);
    }
    tp1.setCurrentHour(sharedPreferences.getInt("hour", c.HOUR_OF_DAY));
    tp1.setCurrentMinute(sharedPreferences.getInt("minute", c.MINUTE));
}

} 
```

该应用程序运行良好，Log cat 文件中包含所有预期的条目：

```
06-01 18:21:04.049: I/ApplicationPackageManager(7750): cscCountry is not German : XEU
06-01 18:21:04.079: I/TAG(7750): Resuming
06-01 18:21:04.089: I/MyActvity(7750): Year = 2014
06-01 18:21:04.089: W/TAG(7750): Resumed
06-01 18:21:05.459: W/KeyCharacterMap(7750): No keyboard for id 0
06-01 18:21:05.459: W/KeyCharacterMap(7750): Using default keymap:    /system/usr/keychars/qwerty.kcm.bin
06-01 18:21:05.519: I/ApplicationPackageManager(7750): cscCountry is not German : XEU
06-01 18:21:05.619: W/Picker(7750): beforeTextChanged: 01, 0, 2, 2
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 01
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 01, 0, 2, 2
06-01 18:21:05.619: W/Picker(7750): aftertextchanged: 01
06-01 18:21:05.619: W/Picker(7750): beforeTextChanged: 01, 0, 2, 2
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 01
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 10, 0, 2, 2
06-01 18:21:05.619: W/Picker(7750): aftertextchanged: 10
06-01 18:21:05.619: W/Picker(7750): beforeTextChanged: 2012, 0, 4, 4
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 2012
06-01 18:21:05.619: W/Picker(7750): onTextChanged: 2014, 0, 4, 4
06-01 18:21:05.619: W/Picker(7750): aftertextchanged: 2014
06-01 18:21:08.239: E/DatePicker(7750): adjustMaxDat : 31 10
06-01 18:21:08.239: W/Picker(7750): beforeTextChanged: 10, 0, 2, 2
06-01 18:21:08.249: W/Picker(7750): onTextChanged: 10
06-01 18:21:08.249: W/Picker(7750): onTextChanged: 01, 0, 2, 2
06-01 18:21:08.249: W/Picker(7750): aftertextchanged: 01
06-01 18:21:08.259: W/Picker(7750): beforeTextChanged: 01, 0, 2, 2
06-01 18:21:08.259: W/Picker(7750): onTextChanged: 01
06-01 18:21:08.259: W/Picker(7750): onTextChanged: 10, 0, 2, 2
06-01 18:21:08.259: W/Picker(7750): aftertextchanged: 10
06-01 18:21:08.259: W/Picker(7750): beforeTextChanged: Jun, 0, 3, 3
06-01 18:21:08.259: W/Picker(7750): onTextChanged: Jun
06-01 18:21:08.259: W/Picker(7750): onTextChanged: Jul, 0, 3, 3
06-01 18:21:08.269: W/Picker(7750): aftertextchanged: Jul
06-01 18:21:10.759: I/TAG(7750): Resuming
06-01 18:21:10.759: I/MyActvity(7750): Year = 2014
06-01 18:21:10.759: W/TAG(7750): Resumed 
```

但是它不会更新`TextView`. `timeUntil()`我可以相信我在这里做错了什么，但有两个问题。首先，在启动时（之后）运行时`timeUntil()`更新，其次，如果您更改屏幕的方向，则更新。我知道屏幕重新定向会重新运行，这表明它在一个之后工作，但在单独运行时不工作。我完全不知所措。`onResume()``onCreate()``timeUntil()``onCreate()``onResume()``onCreate()`

有没有人有任何想法？

根据 Proxy32 的输入（见下文），我已将`onResume`void 更改为

```
@Override
protected void onResume() {
    super.onResume();

    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            h.post(new Runnable() {
                @Override
                public void run() {
                    Log.i("TAG", "Resuming");
                    SharedPreferences sharedPreferences = getSharedPreferences("preferences", MODE_PRIVATE);
                    Log.i("MyActvity", "Year = " + sharedPreferences.getInt("year", Calendar.YEAR));

                    leaving.set(sharedPreferences.getInt("year", Calendar.YEAR), sharedPreferences.getInt("month", Calendar.MONTH),
                            sharedPreferences.getInt("dayOfMonth", Calendar.DAY_OF_MONTH),
                            sharedPreferences.getInt("hour", Calendar.HOUR_OF_DAY), sharedPreferences.getInt("minute", Calendar.MINUTE));
                    Log.d("TAG", "date " + sdf.format(leaving.getTime()));
                    timeUntil.setText("Time until: " + sdf.format(leaving.getTime()));
                    timeUntil.invalidate();
                    today = Calendar.getInstance();
                    long millisToGo = leaving.getTimeInMillis() - today.getTimeInMillis();
                    long seconds2go = TimeUnit.MILLISECONDS.toSeconds(millisToGo);
                    tvSeconds.setText(String.format("%,d seconds", seconds2go));
                    long minutes2go = TimeUnit.MILLISECONDS.toMinutes(millisToGo);
                    tvMinutes.setText(String.format("%,d minutes", minutes2go));
                    long hours2go = TimeUnit.MILLISECONDS.toHours(millisToGo);
                    tvHours.setText(String.format("%,d hours", hours2go));
                    tvDays.setText(String.format("%,d days %d hours", (int) hours2go / 24, hours2go % 24));
                    long days2go = TimeUnit.MILLISECONDS.toDays(millisToGo);
                    tvWeeks.setText(String.format("%,d weeks %d days", (int) days2go / 7, days2go % 7));
                }
            });
        }
    }, 0, 1000);
    Log.w("TAG", "Resumed");

} 
```

我也删除了affcher。这现在做了我想要它做的事情。问题解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:51:13.760

我不确定我是否理解这个问题，但我会尽力澄清我能做的。

onResume 在 onStart（和/或 onRestart）之后在 onCreate 之后被调用。这就是为什么它会在您更改屏幕配置后或应用程序首次启动时按照您的建议运行。

有关详细信息，请参阅：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

这也意味着当您返回原始主要活动时，应该更新 timeUntil。但是，我没有在您的代码中看到您完成补充活动的位置。此外，您所说的“自行运行”是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:31:09.373

设置文本后尝试 TextView invalidate() 方法

# objective-c - 如何访问不同类中的数组

> ID：10854150
> 
> 赞同：-3
> 
> 时间：2012-06-01T16:33:45.363
> 
> 标签：objective-c, xcode, class, properties, nsmutablearray

我使用@property 在我的AppDelegate 中创建了一个数组（NSMutablearray），我无法在其他类中访问这个数组（尽管我使用了#import“AppDelegate”）。

这是我的数组属性的减速：

```
@property(nonatomic,strong) NSMutableArray *photoArray; 
```

这是我的数组初始化（Appdelegate.m）：

```
 photoArray = [[NSMutableArray alloc] init];
    PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];
    PhotoItem *photo2 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"2.jpg"] name:@"roy's hand" photographer:@"roy"];
    PhotoItem *photo3 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"3.jpg"] name:@"sapir first" photographer:@"sapir"];
    PhotoItem *photo4 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"4.jpg"] name:@"sapir second" photographer:@"sapir"];
    [photoArray addObject:photo1];
    [photoArray addObject:photo2];
    [photoArray addObject:photo3];
    [photoArray addObject:photo4]; 
```

现在，我想访问其他类中的数组对象，我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:59:27.873

创建一个单例类并将其命名为 commonData 以保留要在屏幕之间使用的数组和公共数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:39:16.360

要访问您的 AppDelegate 属性，您必须获取委托的实例。

```
MyAppDelegate *delegate = (MyAppDelegate*)[[UIApplication SharedApplication] delegate];
delegate.photoArray //Do something 
```

这允许您使用 delegate.photoArray 访问它。

还有其他几种方法，但这对于简单的访问来说既快速又容易。

# apache-flex - 如何在不放大的情况下连接相机以填充手机屏幕？

> ID：10854151
> 
> 赞同：0
> 
> 时间：2012-06-01T16:33:47.213
> 
> 标签：apache-flex, mobile, adobe

我有一个 flex 视频捕获移动应用程序，它将其相机连接到 UIComponent，如下所示：

```
 var camera:Camera = Camera.getCamera();
 camera.setQuality(0,100);

 video = new Video(width, height);
 video.attachCamera(camera);

 var uiVideo:UIComponent = new UIComponent();
 uiVideo.width = video.width;
 uiVideo.height = video.height;
 uiVideo.addChild(video);
 videoGroup.addElement(uiVideo); 
```

*宽度和高度是手机的屏幕尺寸。

上述代码的问题在于，与录制的视频相比，用户在放大录制时看到的视频/相机。发生这种情况可能是因为，尺寸为 20x30 的相机被拉伸到 60x90 的屏幕尺寸，从而产生 3 倍的变焦。

我怎样才能避免这种情况？

有没有办法在不放大的情况下拉伸相机以填充手机屏幕（当屏幕的比例与相机的比例不同时，失真是可以的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:51:29.430

你试过[Camera.setMode()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode%28%29)吗？您可以传入宽度、高度、每秒帧数和第四个参数。如果相机不支持您指定的分辨率，它将尝试使用支持的类似分辨率。

# google-play - 应用内结算订阅问题

> ID：10854153
> 
> 赞同：3
> 
> 时间：2012-06-01T16:33:57.657
> 
> 标签：google-play

随着 In-App Billing API 新订阅选项的发布，我们开始对服务进行概念验证，并发现了一些问题。有没有其他人尝试过并且会为我们提供一些答案？以下是我们迄今为止面临的问题：

1 – 在测试退订功能时，Google Play 界面显示一个带有“未找到项目”消息和重试按钮的白页。是因为应用程序尚未发布吗？如果是，我们如何在不先发布的情况下测试此流程？

2 – 设备间同步。在一台设备上进行订阅时，绑定到同一帐户的其他设备未收到 OnPurchaseStateChange 事件。又是因为应用程序没有发布吗？或者订阅是否绑定到特定设备而不是帐户？

3 – 在我们的 Google 商家页面上，当我们取消购买时，设备不会收到通知订阅已被取消的通知。这是一个错误吗？作为一种解决方法，我们手动检查当前时间并与到期日期进行比较以强制恢复事务调用。此时，我们可以看到订阅不再有效。您认为这是一个可以接受的解决方案吗？

4 – 订阅后，Google Merchant 页面上会显示两项交易：一项价值为 0 美元的 FAILED 交易和一项价值为我们收取的有效交易。这是预期的行为吗？$0 FAILED 交易的目的是什么？

如果有人遇到过类似的问题，我们想知道。也许这些可能是谷歌的错误，或者我们没有 100% 理解它应该如何工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:37:21.173

1.我有同样的问题，在我发布（后来取消发布）我的应用程序后，我可以在市场上看到应用程序页面，所以你可以发布而不是取消发布。

2.我没有通过订阅检查它，但是对于托管项目，我没有按预期在两个不同的设备上获得 purchaseStateChange。

3.我取消订阅后确实会过期，但只是在一段时间后。我不明白您如何获得到期日期？您只能通过访问 play developer api 来获得它。恢复交易将为您提供与购买商品时相同的 purchaseStateChange。*在开发人员指南中，建议仅在首次使用应用程序时使用恢复事务。

4.我有同样的问题，我听说至少有大约 10 人收取相同的 0 美元费用。

# apache - 在 SSL 卸载程序和 Apache 之后的 Glassfish HTTPS 重定向

> ID：10854155
> 
> 赞同：0
> 
> 时间：2012-06-01T16:34:00.707
> 
> 标签：apache, ssl, https, glassfish, mod-proxy

我有这个配置：

*   端口 443 上的 HTTPS 负载平衡器/SSL 卸载程序
*   Apache httpd 在 80 端口（不同的 IP），使用 ProxyPass、ProxyPassReverse 转发到...
*   多个 Glassfish 域在不同端口上侦听

问题：Glassfish 和 Apache 都不知道请求是 HTTPS。重定向到诸如“/index.jsp”之类的 URL 在 Glassfish 中被重写为`http://internal_ip/index.jsp`，然后 ProxyPassReverse 重写为`http://public_ip/index.jsp`. 问题是，我需要那个 URL`http*s*://public_ip/...`

我该如何解决 - 是否有一些 Glassfish 配置可以更改，或者 Apache httpd.conf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:13:49.283

我看到了两种解决方案：

1) 使用您的负载均衡器来操作 apache 响应（F5 中的 iRule，A10 负载均衡器的 flex 等）

2) 在负载均衡器上设置一些东西，以向通过 HTTP 传入的请求发送另一个重定向以使用 HTTPS

# xcode4 - 如何创建用于 Xcode 构建设置值的变量？

> ID：10854156
> 
> 赞同：52
> 
> 时间：2012-06-01T16:34:06.293
> 
> 标签：xcode4, xcode5

XCode 有许多内置变量，用于在构建设置中方便使用，例如`"$(PRODUCT_NAME)"`或`"$(CURRENT_ARCH)"`.

我可以定义自己的变量吗？如何/在哪里？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-08-27T17:47:10.497

在 XCode 5 中，这略有改变。

1.  在编辑器左侧选择项目或目标
2.  转到顶部菜单栏中的编辑器菜单
3.  选择“添加构建设置”，然后选择“添加用户定义的构建设置”

![在此处输入图像描述](../Images/2a1ca56214da649cb73072b341100880.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T18:37:58.103

创建用户定义的构建设置。要在 Xcode 4 中创建一个，请从项目导航器中选择您的项目以打开项目编辑器。从编辑器的左侧选择您的项目或目标。单击编辑器顶部的构建设置按钮。单击编辑器底部的 Add Build Setting 按钮，然后选择 Add User-Defined Setting。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-04-21T10:01:03.783

它位于 Xcode 10 中构建设置面板的顶部。

[![在此处输入图像描述](../Images/8910c2788ac4700f8ab3996673465161.png)](https://i.stack.imgur.com/OwS6Q.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-19T14:10:35.710

可以在 Xcode 中添加用户定义的设置，如下所示：

Xcode 4.x：

选择 PROJECT / TARGETS -> “Add Build Setting”（Xcode 右下角的选项） -> “Add User-Defined Setting”</p>

![在此处输入图像描述](../Images/e8286b4158e89190d70dac077476e2bd.png)

Xcode 5.x：

选择 PROJECT / TARGETS -> Editor menu -> “Add Build Setting” -> “Add User-Defined Setting”</p>

![在此处输入图像描述](../Images/eeca23df5271d9c6742991aab311c6e6.png)

这将添加用户定义的设置。输入键值进行设置。

# javascript - 通过 Firefox 中的书签更改 about:config 参数

> ID：10854158
> 
> 赞同：0
> 
> 时间：2012-06-01T16:34:10.333
> 
> 标签：javascript, firefox, bookmarklet

在 Firefox 中，我可以编写一段 JavaScript 代码（并将其分配给书签）来更改 about:config 参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:37:59.517

你不能。当您单击书签时，书签会以您正在查看的网页的权限运行，并且网页无法更改用户首选项...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T18:33:36.150

由于书签栏和菜单所在的上下文，您不能，但也许您想查看“自定义按钮：” [https://addons.mozilla.org/en-US/firefox/addon/custom-纽扣/](https://addons.mozilla.org/en-US/firefox/addon/custom-buttons/)

它作为 XUL 覆盖在“chrome”上下文中运行，因此可以访问 about:config 设置。

这是我制作的示例脚本，当 HTML 标头中未指定编码时，将“后备字符编码”更改为日语的“Shift_JIS”：

（主代码选项卡）

```
/* toggle between SHIFT_JIS and 'default for locale' character encoding. */

var prefsManager = Components.classes["@mozilla.org/preferences-service;1"]
                    .getService(Components.interfaces.nsIPrefBranch);
var defaultCharEncoding = prefsManager.getCharPref( "intl.charset.fallback.override" );

if ( defaultCharEncoding !== "Shift_JIS" ) {
/* change button icon to the hiragana 'あ'. Originally I had a base64 encoded PNG here. */
    document.querySelector('toolbarbutton#custombuttons-button1.toolbarbutton-1.chromeclass-toolbar-additional').image="file:///path/to/icon/a-jp1.svg";
    prefsManager.setCharPref("intl.charset.fallback.override","Shift_JIS");
} else {
/* can't use clearUserPref() on the default branch */
    prefs = prefsManager.getBranch("intl.charset.fallback.");
/* set button icon to the letter 'a'. Originally I had a base64 encoded PNG here. */
    document.querySelector('toolbarbutton#custombuttons-button1.toolbarbutton-1.chromeclass-toolbar-additional').image="file:///path/to/icon/a-en1.svg";
/* reset the 'intl.charset.fallback.override' entry to it's default (blank) */
    prefs.clearUserPref("override");
} 
```

请注意，我是为 seamonkey 执行此操作的，因此查询选择器可能会有所不同。这里的一切都绝对适用于 Firefox。该插件适用于 seamonkey、firefox 和 Thunderbird。

# php - PHP（或jQuery）有没有办法检查一个字符串是否是人类可读的？

> ID：10854159
> 
> 赞同：4
> 
> 时间：2012-06-01T16:34:18.630
> 
> 标签：php, jquery, validation

人类可读，这意味着字符串是一个真实的单词。这本质上是一个表单验证。理想情况下，我想测试表单响应的“纹理”，以确定实际用户是否填写了表单，而不是寻找表单漏洞的人。可能对发布的数据使用字典查找，然后给出返回的“真实单词”的阈值。

我在 PHP 文档中没有看到任何内容，Google 机器也没有提供任何内容，至少是这个特定的。我怀疑有人已经编写了一个 PHP 类，甚至是一个 jQuery 插件，可以做到这一点。像这样：

```
$string = "laiqbqi";

is_this_string_human_readable($string); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T16:39:00.373

这可以使用一种叫做[马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain)的东西来完成。

从本质上讲，他们通读给定语言（英语、法语、俄语等）的大量文本，并确定一个字符接一个字符的概率。

例如，“q”出现在“z”之后的概率比元音（如“a”）要低得多。

在较低级别上，这实际上是作为状态机实现的。

根据 Mike 的评论，可以在[此处](https://github.com/buggedcom/Gibberish-Detector-PHP)找到它的 PHP 版本。

为了风味，关于马尔可夫链的一篇有趣[的每日 WTF 文章。](http://thedailywtf.com/Articles/The-Automated-Curse-Generator.aspx)

# regex - 正则表达式 - 如何提取落在指定 ID 上的数字？

> ID：10854161
> 
> 赞同：1
> 
> 时间：2012-06-01T16:34:22.983
> 
> 标签：regex, jmeter

我正在尝试提取出现在我输入的 ID 行上的数字“1”（即 12072）。

在过去的 2 个小时里，我一直在尝试让这个正则表达式工作，但我不知所措。到目前为止我有

```
12072.*?(\d+)(?!.*\d) 
```

但这会提取我从 12072 到 1 的所有内容。这是文本：

```
<td id="12072" scope="#999999" bgcolor="#999999" style="width: 65; color:#999999" align="center"  onclick="DaySelect(this)" title="">1</td>
<td id="12073" scope="#999999" bgcolor="#999999" style="width: 65; color:#999999" align="center"  onclick="DaySelect(this)" title="">1</td> 
```

如何**仅**匹配指定 ID 行尾的数字 1，肯定有办法做到这一点？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:37:24.547

您的比赛将在第 1 组

```
"12072"[^>]*>(\d+) 
```

这是一个解释

```
Match the characters “12073” literally «12073»
Match any character that is NOT a “&gt;” «[^>]*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
Match the character “&gt;” literally «>»
Match the regular expression below and capture its match into backreference number 1 «(\d+)»
   Match a single digit 0..9 «\d+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+» 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:49:01.720

您可以使用 xpath 查询尝试更好的[XPath Extractor ，例如](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)

```
//td[@id='${id}']/text() 
```

jmeter 变量在哪里`${id}`设置为您需要的值（例如 12072），或者只是

```
//td[@id='12072']/text() 
```

如果您不需要参数化。

注意：确保在 XPath Extractor 的控制面板上选中[Use Tidy（容错解析器）](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)选项 - 使用 xpath 处理 html 响应是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:41:22.750

```
"12072"[^>]+\>([^\<]) 
```

包括引号，以防您搜索 120。如果没有引号，它将匹配两行。

还获取标签的所有文本内容，只是数字。

< 和 > 可能不需要在 jmeter 中转义。如果没有，请删除前导斜杠。

# android - 在 Android 中快速处理 zip 文件

> ID：10854173
> 
> 赞同：0
> 
> 时间：2012-06-01T16:35:23.223
> 
> 标签：android, zip, osmdroid

OSMdroid 在运行时非常有效地打开 zip 文件，你知道，他们的 svn 中的哪个类能够有效地打开 zip 文件？现在我被 ZipEntry 困住了，这对我的应用程序来说非常慢。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:38:29.943

> OSMdroid 在运行时非常有效地打开 zip 文件，你知道，他们的 svn 中的哪个类能够有效地打开 zip 文件？

他们[似乎使用`ZipEntry`](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/ZipFileArchive.java).

> 现在我被 ZipEntry 困住了，这对我的应用程序来说非常慢。有任何想法吗？

使用[Traceview](http://developer.android.com/guide/developing/debugging/debugging-tracing.html)并具体找出您的问题所在。

# javascript - 如何使用敲除使窗口大小可观察

> ID：10854179
> 
> 赞同：8
> 
> 时间：2012-06-01T16:35:52.053
> 
> 标签：javascript, jquery, knockout.js

尝试对浏览器窗口做一些事情：

1.  是否可以使用 Knockout 使窗口大小 ( `$(window).width(), $(window).height()`) 可观察？
2.  如何将**未来添加的元素**保持在窗口的中心？**使用jquery live 方法**或**淘汰赛自定义绑定**可以做些什么吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:09:58.420

使它们可观察的唯一方法是将它们代理为可观察的属性。

```
var yourViewModel = {
   width: ko.observable(),
   height: ko.observable()
};

var $window = $(window);
$window.resize(function () { 
    yourViewModel.width($window.width());
    yourViewModel.height($window.height());
}); 
```

我真的不明白你的第二个问题。你不能只使用css吗？

**编辑**

第二个问题。一种可能性是编写一个绑定处理程序来执行此操作（未经测试）。

```
ko.bindingHandlers.center {
   init: function (element) {
       var $el = $(element);

       $el.css({ 
           left: "50%", 
           position: "absolute", 
           marginLeft: ($el.width() / 2) + 'px' 
       }); 
   }
} 
```

50% 和左边距是在场景中居中的好方法，因为即使调整了窗口大小，它也会自动工作。显然，如果 div 本身调整大小，您需要重新计算左边距，这可能总是绑定到 viewmodel 上的值。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-30T19:58:15.460

为了详细说明 Dean 对他的`winsize`自定义 bindingHandler 的评论，它是如何使用的：

**JS**

```
ko.bindingHandlers.winsize = {
    init: function (element, valueAccessor) {
        $(window).resize(function () {
            var value = valueAccessor();
            value({ width: $(window).width(), height: $(window).height() });
        });
    }
}

self.windowSize = ko.observable(); 
```

**HTML**

```
<div data-bind="winsize: windowSize"></div> 
```

# php - 单击并使用 jquery 提交按钮 ID

> ID：10854181
> 
> 赞同：0
> 
> 时间：2012-06-01T16:35:57.750
> 
> 标签：php, jquery, mysql

我的目标是使用 jquery 将按钮 id 提交到数据库中，我只对按钮感兴趣而不是它的值。

```
$("#button").click(function() {
    var p = $(this).attr("id");

    $.ajax({
        type: "POST",
        url: "subpage.php",
        data: 'b=' + p,
        cache: false,
        success: function(html) {
            //process live
        }
    });
    return false;
}); 
```

子页面.php

```
$item = $_POST['b'];
$query = mysql_query("SELECT * FROM table WHERE  id = '25' AND bttnid = '$item'");
if(count($query)==0){
    mysql_query("INSERT INTO table VALUES ('','25','$item') ");
} 
```

它不提交。请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:57:18.910

问题不在 jquery 中，问题出在 php 语句中.. 已更改

```
if(count($query)==0){/../} 
```

至

```
if(mysql_num_rows($query)==0){/../} and it works. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:50:54.443

`count($query)`是错的。您需要使用`mysql_num_rows($query)`来获取返回的行数。

除此之外，使用`{b: p}`for`data`代替字符串，以便 jQuery 正确编码`p`（即使在这种特殊情况下很可能不需要，因为 ID 不应该包含任何特殊字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:37:31.623

修复报价并像这样，

```
$.ajax({
  type: "POST",
  url: "subpage.php",
  data: {b: p},
  cache: false,
  success: function(html)
  {
    //process live

  }
 }); 
```

让jQuery处理`urlencoding`数据对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T16:56:58.500

这里只有 1 条建议：你绝对应该看看 jQuery API，它可能会给你正在寻找的答案:)

例如：（取自 .ajax() API 页面的示例）

```
var menuId = $("ul.nav").first().attr("id");
var request = $.ajax({
  url: "script.php",
  type: "POST",
  data: {id : menuId},
  dataType: "html"
});

request.done(function(msg) {
  $("#log").html( msg );
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

您已经在这里获得了模板，剩下要做的就是将原始值修改为您的 Web 应用程序的值。

链接：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# objective-c - 自定义 QLPreviewController 的操作表

> ID：10854184
> 
> 赞同：3
> 
> 时间：2012-06-01T16:36:01.660
> 
> 标签：objective-c, ios5, uibarbuttonitem, uiactionsheet, qlpreviewcontroller

我想在操作表中添加另一个菜单项，而不是打印项。我写了一个自定义的 QLPreviewController。因此，希望将下面的电子邮件按钮添加到操作表的打印按钮中。

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:25:27.410

我也想这样做，但我假设我们不必添加到该菜单，而是必须创建一个带有新菜单的新按钮，其中包含我们自己的项目。诀窍是找出这些默认项目（即打印）是如何生成的。

# php - PHP 使用正则表达式捕获 GPS 位置元素

> ID：10854188
> 
> 赞同：0
> 
> 时间：2012-06-01T16:36:30.430
> 
> 标签：php, gps

嗨，我有一些这样的输入：

```
$string = "0°25'30"S, 91°7'W" 
```

我想在 php 中制定一个正则表达式来捕获各个元素，以便我最终得到：

```
$position_array = array([0] => 0 [1] => 25 [2] => 30 [3] => S [4] => 91 [0] => 7 [0] => W) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:39:21.583

在我的头顶上，我会试试这个：

```
$array = array_filter(preg_split("/[^A-Za-z0-9]/",$string), function ($segment) {
    return strlen(trim($segment));
}); 
```

# c# - Entity Framework DateTime 更新极慢

> ID：10854190
> 
> 赞同：1
> 
> 时间：2012-06-01T16:36:38.277
> 
> 标签：c#, wcf, entity-framework, datetime, entity-framework-4

我目前在使用实体框架时遇到这种情况：

```
using (TestEntities dataContext = DataContext)
            {
                UserSession session = dataContext.UserSessions.FirstOrDefault(userSession => userSession.Id == SessionId);
                if (session != null)
                {
                    session.LastAvailableDate = DateTime.Now;
                    dataContext.SaveChanges();
                }
            } 
```

这一切都很完美，除了它与我预期的相比非常慢（每秒 14 次调用，经过 100 次迭代测试）。当我通过此命令手动更新此记录时：

```
dataContext.Database.ExecuteSqlCommand(String.Format("update UserSession set LastAvailableDate = '{0}' where Id = '{1}'", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fffffff"), SessionId)); 
```

我每秒接到 55 个电话，这已经足够快了。但是，当我不更新 session.LastAvailableDate 而是使用 Entity Framework 更新整数（例如 session.UserId）或字符串时，我每秒会收到 50 个调用，这也足够快。只有日期时间字段非常慢。

因子 4 的差异是不可接受的，我想知道如何改进这一点，因为当我也可以使用实体框架时，我不喜欢使用直接 SQL。

我正在使用 Entity Framework 4.3.1（也尝试过 4.1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:43:05.023

需要指出的是，您的 sql 命令只是一个查询，而您的 EF 命令是两个查询（获取数据，然后保存它），所以在那里您可以看到 2 倍的差异。

此外，您可能会发现通过 ID 查询而不是 ad-hoc 查询可以获得更好的性能。假设 SessionId 是主键查找。

```
UserSession session = dataContext.UserSessions.Find(SessionId); 
```

# node.js - 这种静态文件服务方法在 node.js 中是否安全？（潜在的安全漏洞？）

> ID：10854193
> 
> 赞同：2
> 
> 时间：2012-06-01T16:36:56.477
> 
> 标签：node.js

我想创建最简单的 node.js 服务器来提供静态文件。

这是我想出的：

```
fs = require('fs');
server = require('http').createServer(function(req, res) {
    res.end(fs.readFileSync(__dirname + '/public/' + req.url));
});
server.listen(8080); 
```

显然，这将映射`http://localhost:8080/index.html`到`project_dir/public/index.html`，对于所有其他文件也是如此。

我的一个担忧是有人可能会滥用它来访问`project_dir/public`. 像这样的东西，例如：

```
http://localhost:8080/../../sensitive_file.txt 
```

我尝试了一点，但它不起作用。但是，似乎我的浏览器正在删除“..”本身。这让我相信有人会滥用我可怜的 node.js 服务器。

我知道有做静态文件服务的 npm 包。但我真的很想在这里写我自己的。所以我的问题是：

1.  这安全吗？

2.  如果是这样，为什么？如果不是，为什么不呢？

3.  而且，如果进一步，如果不是，那么“正确”的方法是什么？我的一个限制是我不想为每个可能的文件都有一个 if 子句，我希望服务器为我放入目录中的任何文件提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:07:09.160

1.  不，这不安全。
2.  因为你提到的原因。
3.  使用[`fs.realpath()`](http://nodejs.org/api/fs.html#fs_fs_realpath_path_callback)or[`fs.realpathSync()`](http://nodejs.org/api/fs.html#fs_fs_realpathsync_path)并检查规范化路径是否指向您想要的位置。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-01T17:30:53.697

这是不安全的，所以使用类似的东西：

```
if (req.url.indexOf('..') !== -1) {
    res.writeHead(404);
    res.end();
} 
```

PS：顺便说一句，使用 readFile 而不是 readFileSync 并注意错误...即使是示例，您的实现也太糟糕了-_-

# javascript - 从字符串调用对象下的函数

> ID：10854195
> 
> 赞同：0
> 
> 时间：2012-06-01T16:37:14.313
> 
> 标签：javascript

我有一个脚本，可以从 div 在页面上创建拖放上传器。我的 DIV 看起来像

```
<div class="well uploader"
    data-type="image"
    data-callback="product.addimage"
    data-multi="1"></div> 
```

然后我会有一个类似的功能

```
var product = new function(){
    /* Some random stuff */
    this.addimage = function(image){
        alert('W00T! I HAZ AN IMAGE!');
    }
    /* More random stuff */
} 
```

上传完成后，我需要调用`data-callback`（本例中为product.addimage）中的函数。我知道您可以使用全局函数，`window[callback]()`但我不确定使用对象下的函数执行此操作的最佳方法。

我的第一个想法是做类似*

```
var obj = window;
var parts = callback.split('.');
for(part in parts){
    obj = obj[parts[part]];
}
obj(); 
```

但这似乎有点脏，有没有更好的方法不使用 eval 因为 eval 是邪恶的？

[我还没有测试过，所以我不知道它是否会起作用]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:39:41.820

是的，它会工作，虽然我会这样编码：

```
function followPropPath (obj, propPath) {
    var pathParts = propPath.split(".");
    for (var i = 0; i < pathParts.length; ++i) {
        obj = obj[pathParts[i]];
    }
    return obj;
}

var obj = { x: { y: { z: { f: function() { alert(this); } } } } };

followPropPath(obj, "x.y.z")["f"](); // `this` is `z`
followPropPath(obj, "x.y.z.f")(); // `this` is `window` 
```

# ruby-on-rails-3 - has_many ：通过名称建议

> ID：10854196
> 
> 赞同：-1
> 
> 时间：2012-06-01T16:37:19.360
> 
> 标签：ruby-on-rails-3, activerecord, associations

我有三个模型，用户、成就、徽章，我计划使用 has_many :through 而不是 has_many_and_belongs_to，因为我将在连接表中有一些额外的字段。

根据我观看的 Railscast，使用这种方法需要提出新的模型名称，而不是 user_badge 或 user_achievement。

对于我的用户成就加入，您如何看待成就？

对于我的用户徽章加入，您如何看待 Distinction？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:41:18.910

是的，这很完美。它读作“用户通过成就获得了许多成就”

# ruby-on-rails-3 - 当 cache_classes 为 false 时，为什么 ActiveRecord 查询很慢？

> ID：10854207
> 
> 赞同：0
> 
> 时间：2012-06-01T16:38:03.297
> 
> 标签：ruby-on-rails-3, activerecord

我使用的是 Rails 3.0.12，在我的开发环境中，当我的开发环境中有 config.cache_classes=false 时，ActiveRecord 查询非常慢。执行 3 个查询的控制器操作在本地需要超过 200 毫秒。

```
[INFO: 06/01 12:34:16 #10831] Started GET "/api/v1/subscription.json" for 127.0.0.1 at 2012-06-01 12:34:16 -0400
[INFO: 06/01 12:34:16 #10831] Processing by Api::V1::SubscriptionsController#show as JSON
[DEBUG: 06/01 12:34:16 #10831] User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."apikey" = 'xyz' LIMIT 1
[DEBUG: 06/01 12:34:16 #10831] Site Load (0.6ms)  SELECT "sites".* FROM "sites" WHERE "sites"."id" = 1 LIMIT 1
[DEBUG: 06/01 12:34:16 #10831] Subscription Load (1.9ms)  SELECT "subscriptions".* FROM "subscriptions" WHERE ("subscriptions".site_id = 1) LIMIT 1
[INFO: 06/01 12:34:16 #10831] Completed 200 OK in 236ms (Views: 1.5ms | ActiveRecord: 3.3ms) 
```

请注意，实际的 AR 查询非常快，但总时间为 236 毫秒。另一个不执行任何 AR 查询的控制器操作需要 1 毫秒。

当我在我的开发环境中设置 config.cache_classes=false 时，运行 AR 查询的操作会在 4 毫秒内执行，正如我所期望的那样。

AR 类真的会随着每个请求重新加载吗？我认为 cache_classes 只处理 app 目录中的东西。关于如何改进这一点的任何想法？我显然希望使用 cache_classes=false 运行，因此我不必在每次更改时都重新启动 rails，但我的 API 运行速度太慢，目前无法进行任何有意义的测试。

# c# - C# - UPDATE 语句中的语法错误

> ID：10854208
> 
> 赞同：0
> 
> 时间：2012-06-01T16:38:08.917
> 
> 标签：c#, sql

我正在尝试使用 C# 更新数据库，但出现错误：“UPDATE 语句中的语法错误”。我环顾四周寻找此错误的其他示例，发现很多，但每个都不同。很多事情都可能导致这个错误，我就是无法解决这个错误。

```
query = String.Format(@"UPDATE PAYMENT 
                    SET MONTANT={0}, TYPE='4-Comptant',note='PPA',flag='O', date='{2:yyyyMMdd}'       
                    WHERE num_payment={1}", -payment, id, dt);
                    daUpdate.UpdateCommand.CommandText = query;
                    daUpdate.UpdateCommand.ExecuteNonQuery();  //update the table in the database 
```

在调试模式下，这就是字符串最终的样子：

```
更新付款
                                                SET MONTANT=-390, TYPE='4-Comptant',note='PPA',flag='O', date='20120601'
                                                哪里 num_payment=8

```

在数据库中，num_payment 是一个长整数和一个主键。MONTANT 是一个替身，其他一切都是文本。

编辑：按照人们的建议，我做了一些修改，但我仍然遇到同样的错误。这是它现在的样子：

```
 OleDbCommand cmd = _con.CreateCommand();
                    cmd.CommandText = @"UPDATE PAYMENT 
                    SET MONTANT=@montant, [TYPE]='4-Comptant',note='PPA',flag='O', [date]=@theDate 
                    WHERE num_payment=@numPayment";

                    cmd.Parameters.AddWithValue("@montant", -payment);
                    cmd.Parameters.AddWithValue("@theDate", String.Format("{0:yyyyMMdd}", dt));
                    cmd.Parameters.AddWithValue("@numPayment", id);
                    cmd.ExecuteNonQuery(); 
```

调试输出看起来和以前一样，只是现在我看到的是“@something”而不是实际值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:19:27.097

在 [TYPE] 和 [DATE] 周围加上方括号，这些是 SQL 关键字。

```
query = String.Format(@"UPDATE PAYMENT  
                SET MONTANT={0}, [TYPE]='4-Comptant',note='PPA',flag='O', [date]='{2:yyyyMMdd}'        
                WHERE num_payment={1}", -payment, id, dt); 
                daUpdate.UpdateCommand.CommandText = query; 
                daUpdate.UpdateCommand.ExecuteNonQuery();  //update the table in the 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:06:19.393

'note' 和 'flag' 字段需要有 [] 围绕它们。我添加了这些，现在查询不再给出该错误。

# c++ - 在 C++ 中使用删除的 malloc 的行为

> ID：10854210
> 
> 赞同：30
> 
> 时间：2012-06-01T16:38:15.110
> 
> 标签：c++, malloc, delete-operator

```
int *p=(int * )malloc(sizeof(int));

delete p; 
```

当我们使用 malloc 分配内存时，我们应该使用 free 释放它，当我们在 C++ 中使用 new 分配时，我们应该使用 delete 释放它。

但是如果我们使用malloc分配内存然后使用delete，那么应该会有一些错误。但是在上面的代码中，C++ 中没有错误或警告。

此外，如果我们使用 new 反转和分配并使用 free 释放，那么也没有错误或警告。

为什么会这样？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-01T16:40:31.513

这是未定义的行为，因为无法可靠地证明指针后面的内存已正确分配（即通过`new`for`delete`或`new[]`for `delete[]`）。确保此类事情不会发生是你的工作。当您使用正确的工具（即智能指针）时，这很简单。每当你说`delete`，你做错了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-01T16:55:39.300

> 那么应该有一些错误

有。只是不一定很明显。

C++ 标准（以及 C++ 标准所依据的 C 标准）将这种错误称为*未定义行为*。未定义*意味着*任何事情都可能发生。程序可能会正常继续，可能会立即崩溃，可能会产生明确定义的错误消息并优雅退出，可能会在实际未定义行为事件发生后的某个时间开始出现随机错误，或者[调用鼻恶魔](http://www.catb.org/jargon/html/N/nasal-demons.html)。

您有责任注意并消除这些错误。没有任何事情可以保证在它们发生时提醒您。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-01T16:40:56.757

`free()`不使用`delete`。

如果你`malloc`那么你必须调用`free`释放内存。

如果您`new`必须调用`delete`以释放内存。

[这](https://stackoverflow.com/questions/184537/in-what-cases-do-i-use-malloc-vs-new)是一个解释它的链接。

# android - Android - 将输入流存储在文件中

> ID：10854211
> 
> 赞同：66
> 
> 时间：2012-06-01T16:38:16.670
> 
> 标签：android, input, stream

我正在从 url 检索 XML 提要，然后对其进行解析。我需要做的是将其存储在手机内部，这样当没有互联网连接时，它可以解析保存的选项而不是实时选项。

我面临的问题是我可以创建 url 对象，使用 getInputStream 获取内容，但它不会让我保存它。

```
URL url = null;
InputStream inputStreamReader = null;
XmlPullParser xpp = null;

url = new URL("http://*********");
inputStreamReader = getInputStream(url);

ObjectOutput out = new ObjectOutputStream(new FileOutputStream(new File(getCacheDir(),"")+"cacheFileAppeal.srl"));

//--------------------------------------------------------
//This line is where it is erroring.
//--------------------------------------------------------
out.writeObject( inputStreamReader );
//--------------------------------------------------------
out.close(); 
```

有什么想法可以保存输入流，以便以后加载。

干杯

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-06-01T21:12:03.017

在这里，输入是你的`inputStream`. 然后使用相同的文件（名称）并`FileInputStream`在将来读取数据。

```
try {
    File file = new File(getCacheDir(), "cacheFileAppeal.srl");
    try (OutputStream output = new FileOutputStream(file)) {
        byte[] buffer = new byte[4 * 1024]; // or other buffer size
        int read;

        while ((read = input.read(buffer)) != -1) {
            output.write(buffer, 0, read);
        }

        output.flush();
    }
} finally {
    input.close();
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-01-24T23:15:18.260

### Simple Function

Try this simple function to neatly wrap it up in:

```
// Copy an InputStream to a File.
//
private void copyInputStreamToFile(InputStream in, File file) {
    OutputStream out = null;

    try {
        out = new FileOutputStream(file);
        byte[] buf = new byte[1024];
        int len;
        while((len=in.read(buf))>0){
            out.write(buf,0,len);
        }
    } 
    catch (Exception e) {
        e.printStackTrace();
    } 
    finally {
        // Ensure that the InputStreams are closed even if there's an exception.
        try {
            if ( out != null ) {
                out.close();
            }

            // If you want to close the "in" InputStream yourself then remove this
            // from here but ensure that you close it yourself eventually.
            in.close();  
        }
        catch ( IOException e ) {
            e.printStackTrace();
        }
    }
} 
```

*Thanks to Jordan LaPrise and his [answer](https://stackoverflow.com/a/18793899/293280).*

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-05-10T08:57:18.127

**Kotlin**版本（经过测试，无需库）：

```
fun copyStreamToFile(inputStream: InputStream, outputFile: File) {
    inputStream.use { input ->
        val outputStream = FileOutputStream(outputFile)
        outputStream.use { output ->
            val buffer = ByteArray(4 * 1024) // buffer size
            while (true) {
                val byteCount = input.read(buffer)
                if (byteCount < 0) break
                output.write(buffer, 0, byteCount)
            }
            output.flush()
        }
    }
} 
```

我们利用了`use`最后会自动关闭两个流的功能。

即使发生异常，流也会正确关闭。

[https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html)
[https://kotlinlang.org/docs/tutorials/kotlin-for-py/scoped-resource-usage.html](https://kotlinlang.org/docs/tutorials/kotlin-for-py/scoped-resource-usage.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-10T10:28:43.730

一个较短的版本：

```
OutputStream out = new FileOutputStream(file);
fos.write(IOUtils.read(in));
out.close();
in.close(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-19T16:45:21.247

这是一个处理所有异常并基于先前答案的解决方案：

```
void writeStreamToFile(InputStream input, File file) {
    try {
        try (OutputStream output = new FileOutputStream(file)) {
            byte[] buffer = new byte[4 * 1024]; // or other buffer size
            int read;
            while ((read = input.read(buffer)) != -1) {
                output.write(buffer, 0, read);
            }
            output.flush();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            input.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-08T15:34:37.133

1.  在您的应用程序**`build.gradle`**文件中添加**`dependencies`**：

```
 implementation 'commons-io:commons-io:2.5' 
```

2.  在您的代码中：

```
import org.apache.commons.io.FileUtils;

// given you have a stream, e.g.
InputStream inputStream = getContext().getContentResolver().openInputStream(uri);

// you can now write it to a file with
FileUtils.copyToFile(inputStream, new File("myfile.txt")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-09T17:37:49.803

有IOUtils的方式：

```
copy(InputStream input, OutputStream output) 
```

它的代码与此类似：

```
public static long copyStream(InputStream input, OutputStream output) throws IOException {
    long count = 0L;
    byte[] buffer = new byte[4096]; 
    for (int n; -1 != (n = input.read(buffer)); count += (long) n)
        output.write(buffer, 0, n);
    return count;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-29T06:31:36.913

你可以使用[谷歌番石榴](https://github.com/google/guava)

```
 import com.google.common.io.ByteStreams; 
```

代码：

```
 try (FileOutputStream fos = new FileOutputStream(new File("C:\\example.txt"))){
      ByteStreams.copy(inputStream, fos)
 } 
```

# silverlight - 在 DataTemplate 中将模板项绑定到 Converter 的 Value 属性

> ID：10854220
> 
> 赞同：0
> 
> 时间：2012-06-01T16:38:42.850
> 
> 标签：silverlight, xaml, mvvm, silverlight-4.0, datatemplate

我正在使用 Silverlight 4。

我为 DataGrid 定义了一个 DataTemplate，它允许我成功地显示我喜欢的值。我在这个 DataTemplate 中有一个 Rating 控件，它在 Value 属性上有一个 Converter，就像这样..

```
<DataTemplate>
    <toolkit:Rating Value="{Binding Converter={StaticResource MyConverter}" ItemCount="5" />
</DataTemplate> 
```

当我单步执行代码并进入转换器时，我看到 value 参数不是与模板呈现的行相对应的项目，而是我的 ViewModel，即 DataGrid 本身的 DataContext！

现在，如果我像这样稍微调整一下，

```
<DataTemplate>
    <toolkit:Rating Value="{Binding SomeProperty Converter={StaticResource MyConverter}" ItemCount="5" />
</DataTemplate> 
```

传递给 MyConverter 的值是 DataTemplate 呈现的项目的 SomeProperty。

有谁知道这可能是为什么？如何绑定到模板引用的项目而不是 DataGrid 的 DataContext？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:07:28.187

尝试`"{Binding ., Converter={StaticResource MyConverter}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:03:00.237

我想通了。

在 Silverlight 的 DataGrid 的 MeasureOverride 阶段，正在调用我的转换器。感觉就像 DataGrid 的 MeasureOverride 实现中的一个错误，忽略了

```
<DataGrid ItemsSource="{Binding MySource}"></DataGrid> 
```

在此阶段针对已定义的 DataTemplate 绑定表达式并使用 DataGrid 的 DataContext，这肯定会导致典型的 Converter 失败。

我现在的创可贴解决方案是在我的转换器实现中添加一个 if 语句，以确保我得到的值类型是我所期望的，因此它通过了 MeasureOverride。

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if (value is ExpectedType)
        //do things
    else
       //return an instance of targetType
} 
```

谁能确认这是否仍然发生在 SL5 中？

# c# - 在quartz.net xml 作业定义文件中使用参数配置作业

> ID：10854222
> 
> 赞同：1
> 
> 时间：2012-06-01T16:38:47.963
> 
> 标签：c#, .net-4.0, quartz.net

我有一个作业，它有一个包含参数的构造函数，我想知道是否可以通过传递作业配置文件中定义的参数来配置石英以实例化对象。我试过使用 job-data-map 元素，但这似乎不起作用。这是可能吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T13:27:09.163

作业必须有一个不需要参数的构造函数。为了通过 xml 将参数传递给作业，请像这样使用 xml：

```
<job>
  <name>nativeJobExample</name>
  <group>nativeJobExampleGroup</group>
  <description>Sample job for Quartz Server</description>
  <job-type>Quartz.Job.NativeJob, Quartz</job-type>
  <job-data-map>
    <entry>
      <key>command</key>
      <value>native_job_example.bat</value>
    </entry>
    <entry>
      <key>consumeStreams</key>
      <value>true</value>
    </entry>
  </job-data-map>
</job> 
```

然后就可以通过传入job的execute方法的data map来访问数据了：

```
 public virtual void Execute(IJobExecutionContext context)
    {
        JobDataMap data = context.MergedJobDataMap;

        string command = data.GetString(PropertyCommand); 
```

# c# - Visual Studio C# 捕获文本框中的 Enter 键

> ID：10854225
> 
> 赞同：5
> 
> 时间：2012-06-01T16:38:56.730
> 
> 标签：c#, visual-studio

我正在尝试在 Windows 窗体文本框中捕获 Enter 键。我从教程中得到了这段代码：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    //
    // Detect the KeyEventArg's key enumerated constant.
    //
    if (e.KeyCode == Keys.Enter)
    {
        MessageBox.Show("You pressed enter! Good job!");
    }
    else if (e.KeyCode == Keys.Escape)
    {
        MessageBox.Show("You pressed escape! What's wrong?");
    }
} 
```

但现在我的代码引发了编译/构建错误：

```
The event 'System.Windows.Forms.Control.Enter' can only appear on the left hand
side of += or -=    Line 44 Column 84 
```

一方面我不明白错误信息。另一方面，第 44 行是只有换行符的空白行。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:55:17.543

检查设计器文件 (form.Designer.cs)

您的设计师应该是：

```
this.textBox1.KeyDown += new System.Windows.Forms.KeyEventHandler(this.textBox1_KeyDown); 
```

您可能已经订阅了 Enter 事件。那实际上不是 Enter 键。那是为了在上面，它与离开事件配对。

# python - Python：带三角函数的小数

> ID：10854229
> 
> 赞同：5
> 
> 时间：2012-06-01T16:39:04.277
> 
> 标签：python, math, floating-point, decimal, trigonometry

我有一个小问题，看看：

```
>>> import math
>>> math.sin(math.pi)
1.2246467991473532e-16 
```

这不是我在微积分课上学到的（实际上是 0）

所以，现在，我的问题：

我需要用 Python 执行一些繁重的三角计算。我可以使用什么库来获取正确的值？

我可以使用十进制吗？

编辑：

对不起，我的意思是另外一回事。

我想要的是某种方法：

```
>>> awesome_lib.sin(180)
0 
```

或这个：

```
>>> awesome_lib.sin(Decimal("180"))
0 
```

我需要一个执行良好三角学的库。每个人都知道 sin 180° 是 0，我也需要一个可以做到这一点的库。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T16:42:40.643

`1.2246467991473532e-16`接近 0——小数点和第一个有效数字之间有 16 个零——就像`3.1415926535897931`（的值`math.pi`）接近 pi。答案正确到小数点后十六位！

因此，如果您想`sin(pi)`等于 0，只需将其四舍五入到合理的小数位数即可。15 对我来说看起来不错，对于任何应用程序都应该足够了：

```
print round(math.sin(math.pi), 15) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-01T16:45:17.263

Pi 是一个[无理数](http://en.wikipedia.org/wiki/Irrational_number)，因此无法使用有限的位数精确表示。但是，您可以使用一些库进行符号计算，例如[sympy](http://www.sympy.org/en/index.html)。

```
>>> sympy.sin(sympy.pi)
0 
```

关于你问题的第二部分，如果你想使用度数而不是弧度，你可以定义一个简单的转换函数

```
def radians(x):
    return x * sympy.pi / 180 
```

并按如下方式使用它：

```
>>> sympy.sin(radians(180))
0 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-01T16:50:09.637

如果你发现结果出乎意料，我敢建议你看看这篇文章： [What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

这真的很值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:06:28.493

你也可以试试 gmpy 或 real

在 gmpy 中，您可以明确指定精度：

```
 gmpy.pi(256) 
```

在 real.py 中你可以使用 pa() 函数：

```
 from real import pa,pi
    pa(pi) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-11T07:03:13.720

**简短答案 -** Decimal.cos() 和 Decimal.sin() 都可以从 Decimal.exp() 实现中实现，方法是将所有偶数项拆分为 cos() 函数，将所有奇数项拆分为 sin() 函数并交替在这两个系列中的正负之间的每个术语的符号。循环中不需要更改，它只根据配置的精度（Decimal.getcontext().prec）计算 N 项。

**长答案 -** Python decimal.Decimal 支持 exp() 函数，该函数仅接受一个实数参数（与 R 语言中的 exp() 不同），并根据配置的精度（decimal.Decimal.getcontext）计算无限级数，直到项数().prec)。

目前偶数项计算 cosh()，奇数项计算 sinh()。它们的总和作为 exp() 的结果返回。如果修改每个项的符号以在每个系列中在正负之间交替，则偶数系列将计算 cos()，奇数系列将计算 sin()。

此外，与 R 语言一样，此更改可以使 Decimal.exp() 支持复杂参数，因此 exp(1j*x) 可以返回 Decimal.cos(x) + 1j * Decimal.sin(x)。

# javascript - 无法在 Wordpress 中使用 Javascript 打开弹出窗口

> ID：10854233
> 
> 赞同：1
> 
> 时间：2012-06-01T16:39:32.100
> 
> 标签：javascript, wordpress, content-management-system, dom-events

我正在尝试在 wordpress 中使用 javascript 打开一个弹出窗口

我在编辑页面选项中输入了以下代码：

```
<a href="javascript:void()" onclick="window.open('http://www.google.com', 'mywindow', 'location=no,status=1,scrollbars=1,width=500,height=650');">Click here</a> 
```

上面的代码似乎在 localhost 上运行良好，但在我的实际 Wordpress 站点上却没有运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:23:32.743

它确实有效：

[http://jsfiddle.net/aPmMe/](http://jsfiddle.net/aPmMe/)

但是，如果您仍然遇到问题：

```
<a href="#" onclick="window.open('http://www.google.com', 'mywindow', 'location=no,status=1,scrollbars=1,width=500,height=650');return false;">Click here</a> 
```

# html - 100% 高度 div 切断内部 div

> ID：10854234
> 
> 赞同：2
> 
> 时间：2012-06-01T16:39:32.363
> 
> 标签：html, css

我正在开发一个高度和宽度为 100% 的网站。左侧有一个面板，右侧是主要内容区域，可滚动。

但是，在内容区域中，里面的最后一个 div 被截断了。我不明白为什么。我已经在 Firefox 和 Chrome 上对此进行了测试，两者都在做同样的事情。

这是查看它的链接： *已删除*

正如你所看到的，它被切断了，添加一个大的边距底部（50px +）似乎可以解决它，但这看起来很糟糕。

PS：不用担心图片丢失，因为我只上传了这个页面，而不是整个网站。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T16:55:27.153

1.  高度：100%；在大多数浏览器中相当不一致。尽量避免它。
2.  我不完全确定您的布局通常是如何工作的，但设置溢出：隐藏；在您的 CSS 重置中的所有内容都会从一开始就让事情变得不稳定。

取出“溢出：隐藏；” 你可以看到问题。您的内容窗格与您的身体高度相匹配，因此，您将失去页面底部“topBar”的高度。因为身体隐藏了溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:03:13.940

是的——试试溢出：滚动；或溢出：可见；此外，我想看看你是否可以在没有 float:right; 的情况下让它工作，因为这会使其脱离正常的流程，并且会对你的盒子调整造成严重破坏。

ETA：我想我看到了问题；您的每个小内容 div 都有左右浮动，这会使边距变得无用，因为就浏览器而言，每个框的内容都超出了页面的正常流程。

ETA(2)：你有溢出：隐藏；在您的第一条规则中，您可以为一百个不同的元素设置默认样式。那是你的主要问题。将其更改为溢出：可见；（或任何你喜欢的）并在其他地方设置适当的溢出属性，你应该会很好。我能够通过这样做来缓解这个问题。仍然需要进行调整，但这解决了基本问题。我仍然会摆脱内联浮动，也是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:55:07.543

从 main-style.css 第 5 行：

```
overflow:hidden 
```

和 main-style.css 第 127 行：

```
overflow-y:auto 
```

都导致页面切断底部。但是，当您更正此问题时，它表明您的包装 div 没有拉伸到 100% 的窗口高度（因为背景渐变在页面结束之前停止），并且主 div 内的内容变得不稳定。这些是其他发帖人讨论过的，它们是正确设置页面格式的主要障碍。

请在[此处查看此 JsFiddle。](http://jsfiddle.net/HrpsH/) 它适用于 Chrome、FF、IE 6-8 和 Safari。

不确定如何解决 100% 高度问题，但要解决浮动 div 内容问题，请确保在左右浮动内容上声明 50% 的宽度（另外，您可以制作右浮动内容`text-align:right`为了使它真正保持在 div 的右侧）。

```
 <div class="centerText messageWrapper">
        <div class="messgaeHeader">
            <div style="float:left; width:50%">
                From: 12345678<br />
            </div>
            <div style="float:right; width:50%; text-align:right">
                Date: 123456789<br />
            </div>

        </div>
        1234567890
 </div> 
```

也许有人可以解决现在造成的 100% 高度问题。我意识到这不是一个完整的答案，我的解决方案以不同的方式打破了页面，但也许这对你或其他可能有解决方案的人来说是一个起点。

# excel - 在 Excel 2003 的“查找和替换”对话框中修改结果

> ID：10854240
> 
> 赞同：0
> 
> 时间：2012-06-01T16:39:51.710
> 
> 标签：excel, excel-2003

我的最终目标是让“查找和替换”获取一个额外的参数，并在我单击“查找全部”时在“结果”表中显示一个自定义列。

当我在电子表格中搜索“值”并单击“查找全部”时，对话框会显示每个包含“值”的单元格的书、工作表、名称、单元格、值、公式。但我希望它也能显示该行中另一个单元格的内容。我希望该单元格来自我输入搜索参数时指定的列。

我对编程比较陌生，并且确信我可以用 Python 或 AutoHotKey 找出一些东西。但如果没有更好的方法，我会感到惊讶。

我不想要与电子表格或工作簿相关的东西，所以它需要是 Excel 的一部分或独立的（不是我理解的宏）。是否可以修改 Excel 中的“查找和替换”对话框？

非常感谢您指出正确的方向，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T01:01:26.737

修改内置搜索功能以添加参数并显示不同的输出是不可能的（至少通过任何合理的努力）。您需要使用您选择的语言创建一个类似的工具，并构建您的新需求。

# mysql - 一起执行查询以提高效率

> ID：10854242
> 
> 赞同：0
> 
> 时间：2012-06-01T16:40:06.300
> 
> 标签：mysql, database, jdbc

目前我正在使用准备好的语句在数据库上执行查询或更新。虽然是预编译的（因此速度很快），但我认为如果可以有这样的安排，它会更有效率：

设想：

假设我必须在数据库表中插入 100 行。我使用准备语句，因此我准备了一条语句并将其发送到数据库以执行。所以每次查询的形式是：

```
insert into user values(....); 
```

现在在我查询表单时考虑这种情况

```
insert into user values (...), (...), ....,(...); 
```

通过这种方式，我们可以最大限度地减少表访问并一次性执行查询。

有什么方法可以使用准备好的语句或这样的安排来执行此操作，我们可以指示数据库一起执行接下来的 100 次更新。顺便说一句，我目前正在研究 mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:53:27.363

有什么理由不将其作为[批量插入](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)操作吗？

可能有更好的方法，但我只是将“文件”写入 /dev/shm 然后在 LOAD DATA INFILE 语句中引用，因此永远不会在客户端计算机上敲击磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:05:43.823

> 使用 VALUES 语法的 INSERT 语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。例子：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

尝试类似的东西

```
st = con.createStatement();
  st.addBatch("INSERT INTO tbl_name VALUES(1,2,3)");
  st.addBatch("INSERT INTO tbl_name VALUES(4,5,6)");
  st.addBatch("INSERT INTO tbl_name VALUES(7,8,9)");
  st.executeBatch(); 
```

# c# - 进程是否在远程机器上运行？

> ID：10854245
> 
> 赞同：7
> 
> 时间：2012-06-01T16:40:31.810
> 
> 标签：c#, process, wmi, remote-connection

我有三台远程连接的远程 PC。我正在尝试编写一个简单的 Windows 应用程序，该应用程序将在单个窗口中显示特定进程是否在任何一台机器上运行，例如

Server1：Chrome 未运行

Server2：Chrome 正在运行

Server3：Chrome 正在运行

我使用了 WMI 和 C#。到目前为止，我有这么多：

```
 ConnectionOptions connectoptions = new ConnectionOptions();

            connectoptions.Username = @"domain\username";
            connectoptions.Password = "password";

            //IP Address of the remote machine
            string ipAddress = "192.168.0.217";
            ManagementScope scope = new ManagementScope(@"\\" + ipAddress + @"\root\cimv2");
            scope.Options = connectoptions;
            //Define the WMI query to be executed on the remote machine
            SelectQuery query = new SelectQuery("select * from Win32_Process");

            using (ManagementObjectSearcher searcher = new
                        ManagementObjectSearcher(scope, query))
            {

                ManagementObjectCollection collection = searcher.Get();
                foreach (ManagementObject process in collection)
                {
                    // dwarfs stole the code!! :'(                        
                }
            } 
```

我认为这一切都设置正确，但是如果我在 foreach 循环中使用 MessageBox.Show(process.ToString()) ，我会得到一大堆带有以下文本的消息框：

```
\\username\root\cimv2:W32_Process.Handle="XXX" 
```

我有点卡住了。有什么办法可以将 XXX“翻译”为进程名称？或者，如何才能真正获得进程的名称，以便我可以使用 if 语句来检查它是否是“chrome”进程？

或者......我的实现是不是有点矫枉过正？有没有更简单的方法来实现这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T16:55:58.530

在你的 foreach 中，试试这个：

```
Console.WriteLine(process["Name"]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T16:54:14.300

您可以在 WQL 语句中过滤要监视的进程的名称，因此您可以编写类似这样的内容

```
 SelectQuery query = new SelectQuery("select * from Win32_Process Where Name='Chrome.exe'"); 
```

试试这个示例应用

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_Process Where Name='Chrome.exe'");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                  //for each instance found, do something  
                  Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T16:43:39.223

试试`Process.GetProcesses("chrome", "computerName")`；

在 System.Diagnostics.Process 中定义为

```
public static Process[] GetProcessesByName(
   string processName,
   string machineName) 
```

# java - Struts2 帖子列表> 返回一个动作

> ID：10854247
> 
> 赞同：0
> 
> 时间：2012-06-01T16:40:41.203
> 
> 标签：java, jsp, struts2, ognl, xwork

我正在使用 struts 2.1.8 和 ognl 2.7.3。

在我的动作课上，我有一个字段（地图的键：'foo'，'bar'）：

```
public class TestAction extends ActionSupport {

private static Log log = LogFactory.getLog(TestAction.class);

private static final long serialVersionUID = -4684320206927996693L;

private List<Map<String, Long>> myData = new ArrayList<Map<String,Long>>();

public TestAction() {
    super();
}

public String execute() {

    Map<String,Long> obj1 = new HashMap<String,Long>();
    obj1.put("foo", 111L);
    obj1.put("bar", 112L);

    Map<String,Long> obj2 = new HashMap<String,Long>();
    obj2.put("foo", 551L);
    obj2.put("bar", 552L);

    myData.add(obj1);
    myData.add(obj2);

    return INPUT;
}

public String save() {
    log.info("In save()");

    log.info("--> " + CollectionUtil.dump(myData));

            return SUCCESS;
}

public List<Map<String, Long>> getMyData() {
    return myData;
}

public void setMyData(List<Map<String, Long>> myData) {
    this.myData = myData;
}
} 
```

我可以在 JSP 页面上显示内容，但是当我尝试提交回操作时出现转换错误。

JSP 代码为：

```
<s:form action="Test_save">

    <s:if test="myData != null && myData.size > 0">
          <s:iterator value="myData" status="status">
              <tr>
                  <td>
                      <s:textfield name="myData[%{#status.index}].foo" />
                  </td>
                  <td>
                      <s:textfield name="myData[%{#status.index}].bar" />
                  </td>
              </tr>
          </s:iterator>
    </s:if>

    <s:submit value="Submit"></s:submit>
</s:form> 
```

以下是日志文件中的输出：

```
[75913] 调试 com.opensymphony.xwork2.interceptor.StaticParametersInterceptor 调试 -> 设置静态参数 {}
[75913] 调试 com.opensymphony.xwork2.interceptor.ParametersInterceptor 调试 -> 设置参数 myData[0].bar => [112] myData[0].foo => [111] myData[1].bar => [552 ] myData[1].foo => [551]
[75917] 调试 com.opensymphony.xwork2.conversion.impl.XWorkConverter 调试 -> 属性：CreateIfNull_myData
[75918] 调试 com.opensymphony.xwork2.conversion.impl.XWorkConverter 调试 -> 类：com.mcw.web.actions.TestAction
[75923] 警告 com.opensymphony.xwork2.ognl.OgnlValueStack 警告 -> 错误设置值
java.util.Map - 类：java.lang.ClassFile：Class.javaMethod：newInstance0 行：340 - java/lang/Class.java:340:-1
在 com.opensymphony.xwork2.ognl.accessor.XWorkListPropertyAccessor.getProperty(XWorkListPropertyAccessor.java:102)
    在 ognl.OgnlRuntime.getProperty(OgnlRuntime.java:2210)
    在 ognl.ASTProperty.getValueBody(ASTProperty.java:114)
    在 ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)
    在 ognl.SimpleNode.getValue(SimpleNode.java:258)
    在 ognl.ASTChain.setValueBody(ASTChain.java:222)
    在 ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:220)
    在 ognl.SimpleNode.setValue(SimpleNode.java:301)
    在 ognl.Ognl.setValue(Ognl.java:737)
    ……
    引起：java.lang.InstantiationException：java.util.Map
    在 java.lang.Class.newInstance0(Class.java:340)
    在 java.lang.Class.newInstance(Class.java:308)
    在 com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:119)
    在 com.opensymphony.xwork2.ognl.accessor.XWorkListPropertyAccessor.getProperty(XWorkListPropertyAccessor.java:100)
    ... 82 更多

```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:47:57.617

我认为你的提交是错误的，因为没有值会返回到提交动作，你只是在浏览器中显示数据，但没有数据提交给 test_save 动作，你应该添加一些输入，它们的值就是显示数据。

# javascript - 将数字转换为 5 个字母并在 php 或 js 中随着数字的增加而重复

> ID：10854248
> 
> 赞同：-2
> 
> 时间：2012-06-01T16:40:45.290
> 
> 标签：javascript, php, letters-and-numbers

将数字转换为 5 个字母并随着 php 或 js 中的数字增加而重复

作为循环数字++ y 需要一个等效的字母，例如：

1 = C
2 = D
3 = E
4 = F
5 = G

6 = C
7 = D
8 = E
9 = F
10 = G

11 = C
12 = D
13 = E
14 = F
15 = G

16 = C
等等

你知道怎么做吗？

非常感谢联合国提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:43:19.867

使用包含 5 个字母的字符串或数组，并使用模数来获取您应该使用的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:48:24.373

```
var letters = new Array('C', 'D', 'E', 'F', 'G');​​​​​

for (var i = 0; i < 25; i++) {
    $("#result").append(letters[i%letters.length]);
}
​ 
```

[演示](http://jsfiddle.net/x8kXx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:49:34.527

尝试

```
 $arr = array("C", "D", "E", "F", "G");
 $MAX = 100; //Maximum iterations

 for ($i=0; $i++; $i<$MAX) {
    echo $i+1 + " = ";
    echo $arr[ $i % 5 ];
    echo "\n";
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T16:50:10.053

Javascript：

```
function GetLetter(num)
{
    var letters = ["C","D","E","F","G"];
    return letters[(num - 1) % 5];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T16:48:23.853

您还需要知道“C”的值，因此您知道起始编号，以及“G”的值，因此您知道结束编号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-07T14:16:09.407

使用内置`fromCharCode`（'A' = 65 的 ASCII 码）：

```
for (var i = 1; i <= 16; i++) {
    console.log(i, String.fromCharCode(65 + 2 + (i - 1) % 5));
} 
```

# ios - 如何响应 revmob sdk uialertview 委托？

> ID：10854253
> 
> 赞同：1
> 
> 时间：2012-06-01T16:41:09.017
> 
> 标签：ios, popup, uialertview, banner-ads, revmob

我正在尝试实现 revmob sdk，它工作正常，但他们的文档没有太多细节并且支持不响应。(http://sdk.revmob.com/sdks/ios/docs/index.html)

有没有办法使用委托来了解警报框的状态？

这是我目前用来称呼的：

```
[BCFAds showPopupWithAppID:@"appId" withDelegate:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:41:09.330

在开始提出问题后，我找到了答案，所以如果其他人有这个问题，这里就是解决方案。

1.  在您的 .h 文件中添加一个名为 BCFAdsDelegate 的委托。
2.  添加#import“BCFAds.h”
3.  在调用 sdk 的 .m 文件中添加 `[BCFAds showPopupWithAppID:@"appId" withDelegate:self];`
4.  使用你想要的方法：

`- (void)popupDidDismissActive;` // 当用户返回应用程序时调用

`- (void)popupDidReceive;` // 当弹出窗口可用时调用

`- (void)popupDidFail;` // 当弹出窗口不可用时调用

`- (void)popupDidBecomeActive;` // 当弹出窗口显示时调用

`- (void)popupDidDismissActive;` // 当用户返回应用程序时调用

`- (void)userWillLeaveApplication;` // 当用户点击并即将离开应用程序时调用

# android - [Android]操作另一个应用

> ID：10854255
> 
> 赞同：0
> 
> 时间：2012-06-01T16:41:18.847
> 
> 标签：android, android-intent

我用HTC的手机。我的手机锁屏可以显示添加在我的主屏幕底部栏中的图标。该栏允许我添加应用程序和快捷方式。如果我输入密码来解锁我的手机，我花了 10 秒。所以我有一个想法：

我编写了一个应用程序来创建一个快捷方式，该快捷方式可以广播到记录应用程序以开始记录。

`{ Intent shortCutContain =new Intent("example.app.REC"); shortCutContain.setClassName("example.app", "example.app.AudioService"); shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,shortCutContain); }`

这就是我所做的......但它失败了

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:08:48.630

这是启动记录器的代码：

```
Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
startActivityForResult(intent, RQS_RECORDING);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
if(requestCode == RQS_RECORDING){
savedUri = data.getData();
Toast.makeText(AndroidIntentAudioRecording.this,"Saved: " + savedUri.getPath(),
Toast.LENGTH_LONG).show();
 }
} 
```

`onCreate()`如果您想自动启动记录器，请将此代码放在您的身上。

# c# - ASP.NET 中嵌套 SqlDataReader 的“已经是打开的 DataReader”异常

> ID：10854267
> 
> 赞同：5
> 
> 时间：2012-06-01T16:41:44.210
> 
> 标签：c#, asp.net, sqldatareader

我想在下面的代码中使用嵌套的 SqlDataReader，但我做不到。我得到“System.InvalidOperationException：已经有一个打开的 DataReader 与此命令关联，必须先关闭”代码。有什么建议么

```
 c = "select user_Reps.rep_key,Officers.Officer_Name from user_Reps left join Officers on user_Reps.rep_key = Officers.Officer_code where [user_key]="+userCode;
            if (c == null)
                c = sr.ReadToEnd();
            try
            {

                SqlCommand cmd = new SqlCommand(c, cn);
                cn.Open();
                SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
                List<Dictionary<string, object>> list = new List<Dictionary<string, object>>();
                SqlDataReader rdr2;
                while (rdr.Read())
                {
                    string c2 = "select Active_Clients.Clients_code,Active_Clients.Clients_Name,Active_Clients.Geo_code  from Active_Clients where Active_Clients.[Officer_code] =" + rdr.GetValue(0) + " order by Clients_Name";
                    SqlCommand cmd2 = new SqlCommand(c2, cn);

                    rdr2 = cmd2.ExecuteReader(CommandBehavior.CloseConnection);

                    Dictionary<string, object> d = new Dictionary<string, object>(rdr.FieldCount+rdr2.FieldCount);
                    while (rdr2.Read())
                    {
                        int i = 0;
                        for (; i < rdr.FieldCount; i++)
                        {
                            d[rdr.GetName(i)] = rdr.GetValue(i);
                        }

                        for (; i < rdr2.FieldCount; i++)
                        {
                            d[rdr2.GetName(i)] = rdr2.GetValue(i);
                        }

                        list.Add(d);
                    }

                    rdr2.Close();

                    //list.Add(d);
                }
                JavaScriptSerializer j = new JavaScriptSerializer();
                Response.Write(j.Serialize(list.ToArray()));

            } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T16:45:13.873

错误消息有点误导。除非您`MultipleActiveResultSets=True`的连接字符串中有，否则每个连接只能有一个活动结果集。如果每个读者都有自己的单独的 SqlCommand 对象，情况仍然如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T16:46:30.900

您不能在同一连接上同时有两个打开的 DataReader。

此问题的常见解决方案是在打开下一个 DataReader 之前将第一个 DataReader 的内容加载到 DataTable 或 List<> 中。您还可以为嵌套查询打开一个新连接。

**编辑**或者，正如@Mithrandir 提到的，您可以在连接字符串上使用 MultipleActiveResultSets=true 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:49:18.253

假设它在 sql server 2005 或更高版本上，启用多个活动结果集 (MARS) 应该可以解决我认为的问题。[http://msdn.microsoft.com/en-us/library/h32h3abf%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/h32h3abf%28v=vs.80%29.aspx)。如果 MARS 不是一个选项，则应为第二个命令打开不同的连接。

# silverlight - 如何在 Silverlight 应用程序中使用非 Silverlight DLL？

> ID：10854270
> 
> 赞同：1
> 
> 时间：2012-06-01T16:41:55.340
> 
> 标签：silverlight

如何在 Silverlight 应用程序中使用非 Silverlight DLL？我无法在我的 Silverlight 应用程序中引用它们，但我可以在运行 Silverlight 应用程序的 Web 项目中引用它们。有没有办法让我的 Silverlight 应用程序以某种方式在 Web 项目中使用 DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:01:56.047

Silverlight 使用称为 CoreCLR 的 CLR 子集。您需要针对 CoreCLR 重新编译您的 CLR 程序集才能在 Silverlight 中使用它们。

# c++ - 如何从 std::list 中正确删除指针？

> ID：10854274
> 
> 赞同：1
> 
> 时间：2012-06-01T16:42:18.613
> 
> 标签：c++, list, pointers, delete-operator

我正在通过 创建一个对象`new`，然后在设置对象后将指针添加到 std::list 。

删除指针并从列表中擦除数据而不导致内存泄漏的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:00:05.883

而不是手动循环来搜索元素，我宁愿使用`std::find_if`

```
auto it = std::find_if(lst.begin(), 
                       lst.end(), 
                       [&val](datalist const &d) { return d.index == val; });

if ( it != lst.end() )
{
    delete *it;
    lst.erase(it);
} 
```

这并不是说你做错了。

但是，如果您考虑使用某种形式的智能点（例如 、 或 boost 的智能指针），您的代码将会得到改进`std::unique_ptr`，`std::shared_ptr`那么您不必自己管理内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T18:43:19.397

如果您更改`std::list`为保存`datalist`实例而不是`datalist*`指针，那么您不必再`delete`手动`datalist`保存实例。当您从`std::list`（或任何其他 STL 容器）中删除元素时，该元素的数据会自动为您释放。如果元素是定义了析构函数的类/结构，则将调用析构函数。

尝试这个：

```
std::list<datalist> m_DataList; 
```

.

```
datalist AR; // <-- local variable on the stack, freed when out of scope
AR.index = ...;
AR.number = ...;
mylist.push_back(AR); // <-- pushes a copy-constructed instance of the variable 
```

.

```
std::list<datalist>::iterator Iter1 = m_DataList.begin();
while(Iter1 != m_DataList.end()) 
{ 
    if (Iter1->index == m_SomeVar)     
    { 
        m_DataList.erase(Iter1); // <-- copied datalist instance is freed automatically
        break; 
    } 

    ++Iter1; 
} 
```

# sql - 如何在 dtsConfig 文件中为 SQL 数据源使用服务器别名

> ID：10854275
> 
> 赞同：1
> 
> 时间：2012-06-01T16:42:21.050
> 
> 标签：sql, ssis, configuration-files, alias

我使用 SQL Server 客户端网络实用程序为配置为使用 TCP/IP 网络库的 SQL Server 实例设置服务器别名。

在我原来的 dtsConfig 文件中，我有一个带有数据源值的连接字符串，其中包含服务器和实例名称（这有效）：

```
<Configuration ConfiguredType="Property" Path="\Package.Connections[BRADS].Properties[ConnectionString]" ValueType="String">
        <ConfiguredValue>**Data Source= ServerName\Instance,Port#**;User ID=id;Password=password;Initial Catalog=databaseName;Provider=SQLNCLI10.1;Persist Security Info=True;Auto Translate=False;Application Name=SSIS-PackageName-{58F9ABE7-4F56-43BA-AEA2-AD62756E2ADB}ServerName\Instance,Port#;;</ConfiguredValue> 
```

当我更改数据源属性以使用别名时，我收到登录超时错误（无法找到实例）：

```
<Configuration ConfiguredType="Property" Path="\Package.Connections[BRADS].Properties[ConnectionString]" ValueType="String">
        <ConfiguredValue>**Data Source= AliasName**;User ID=id;Password=password;Initial Catalog=databaseName;Provider=SQLNCLI10.1;Persist Security Info=True;Auto Translate=False;Application Name=SSIS-PackageName-{58F9ABE7-4F56-43BA-AEA2-AD62756E2ADB}ServerName\Instance,Port#;;</ConfiguredValue> 
```

我尝试删除 Data Source 属性并使用 Server 属性，但无济于事。有什么建议么？先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:19:07.553

正如我在上面的帖子中提到的，我使用 SQL Server 客户端网络实用程序来设置我的服务器别名。检查 SQL Server 配置管理器后，有 2 个节点用于 SQL Native Client 10.0 配置（一个用于 32 位）。网络实用程序默认为 64 位配置。将别名添加到 32 位配置后，我没有任何问题。谢谢！

# c# - 从下拉列表中生成动态文本框（C#）

> ID：10854277
> 
> 赞同：0
> 
> 时间：2012-06-01T16:42:38.570
> 
> 标签：c#, asp.net, .net

我在 VS 2010 中使用 C# 开发网页。

以下是我用来为某个下拉选项开发动态文本框的内容...我面临的问题是当我选择该选项时没有生成文本框。它仅在我单击按钮或做一些活动。

一旦我选择下拉控件中的选项，我应该做哪些更改或将代码放置在何处以生成文本框

```
 TextBox new_textbox = new TextBox();
        new_textbox.ID = "txt" + 1;
        new_textbox.Text = "";
        PlaceHolder1.Controls.Add(new_textbox);
        Label5.Visible = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:00:34.087

在下拉列表中设置 AutoPostBack="True"

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True"> 
```

当 AutoPostBack 属性设置为“true”时，只要用户从列表中选择一个项目，就会自动回发到服务器。默认情况下，它设置为“假”。

# java - 使用 ANT 复制多个文件和目录

> ID：10854281
> 
> 赞同：4
> 
> 时间：2012-06-01T16:42:54.997
> 
> 标签：java, ant

我有一个 Ant 脚本，使用 ANT LIBRARY 如何将多个文件/文件夹复制到多个目录。我使用一个包含

```
FileToCopy = DestinationFolder
FolderToCopy = FolderDestination 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T16:54:33.820

复制单个文件

```
<copy file="myfile.txt" tofile="mycopy.txt"/> 
```

将单个文件复制到目录

```
<copy file="myfile.txt" todir="../some/other/dir"/> 
```

将一个目录复制到另一个目录

```
<copy todir="../new/dir">
   <fileset dir="src_dir"/>
 </copy> 
```

将一组文件复制到一个目录

```
<copy todir="../dest/dir">
  <fileset dir="src_dir">
     <exclude name="**/*.java"/>
   </fileset>
</copy>

 <copy todir="../dest/dir">
    <fileset dir="src_dir" excludes="**/*.java"/>
 </copy> 
```

[复制蚂蚁任务](http://ant.apache.org/manual/Tasks/copy.html)的例子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-17T07:25:13.013

[sergiofbsilva](https://stackoverflow.com/users/317605/)回答的一些附加信息，因为我正在寻找这样的例子。

还可以在单​​个`copy`任务中指定多个文件集。

例子：

```
<copy todir="${temp.dir}">
  <fileset dir="${classes.dir}"/>
  <fileset dir="${basedir}">
    <include name="log4j.xml"/>
    <include name="config.properties"/>
    <include name="kfatransfer.bat"/>
  </fileset>
</copy> 
```

`1.10.6`在 Windows 上用 ant 测试。

# java - 从 MySQL Select 语句中获取整数

> ID：10854285
> 
> 赞同：-2
> 
> 时间：2012-06-01T16:43:18.350
> 
> 标签：java, mysql, database, integer

我想将保存在 MySql DB 中的整数转换为 Java 中的 Integer。我有一个表，其中包括 PlayerName 和 Level。我想从特定玩家那里获得关卡（整数）。然后将整数“值”添加到它。然后将其放回数据库中。到目前为止，我的代码是：

```
public void addinputPData(String loc, int value, Player player, String playername){
    //add input Player Data
    try{
        logm("Putting Kill Death Int Data into  " +player.getName() + "'s Profile!");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/WebCom", "root", "MyPW");

            int ovalue = -1;    
        Statement stmt = (Statement) con.createStatement();
        ResultSet rs = stmt.executeQuery("SELECT "+loc+" FROM PlayerData WHERE PlayerName='"+playername+"'");
        if(rs.next()){
            ovalue= rs.getInt(loc);
        }
        if(ovalue == -1){
            logm("Error Occured");

        }
        int nvalue = value + ovalue;

        String insert = "UPDATE PlayerData SET "+ loc + "='" + nvalue + "' WHERE PlayerName='" + playername + "'";

        stmt.executeUpdate(insert);

        con.close();

    }catch(Exception e){

        logm("Could Not Send Data To MYSQL DATABASE SERVER s: "+ e.getMessage());
    }
} 
```

我不知道为什么这不起作用，我有什么明显的遗漏吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:17:26.127

所以首先你必须明白的是，当你不使用时`parametrized statements`，会有很大的危险`SQL Injection`。所以你的代码写得很脏。所以无论如何，使用`PreparedStatement`参数**化**的 SQL 语句可以获得更好的性能。现在像这样重写你的代码：

```
final String SELECT_QUERY = "SELECT level FROM PlayerData WHERE PlayerName = ?";
final String UPDATE_QUERY = "UPDATE PlayerData SET level = ? WHERE PlayerName = ?";

public boolean dataMethod(String playerName) {
   Connection con = null;
   PreparedStatement ps = null;
   PreparedStatement ps1 = null;
   ResultSet rs = null;
   int dataLevel = 0;

   try {

   // getConnection etc...
   ps = con.prepareStatement(SELECT_QUERY);
   ps.setString(1, playerName) // first param is order of ? param, starts with 1(not 0)
   rs = ps.executeQuery();
   while (rs.next()) {
      dataLevel = rs.getInt();
   }
   if (dataLevel > 0) {
       ps1 = con.prepareStatement(UPDATE_QUERY);
       ps1.setInt(1, dataLevel);
       ps1.setString(2, playerName);
       ps1.executeUpdate();   
   }
   return true;
   }
   catch (SQLExcetion ex) {
      Logger.getLogger(YourClass.class.getName()).log(Level.SEVERE, null, ex);
      return false;
   }
   finally {
      if (con != null) {
         con.close();
      }
   }
} 
```

一步一步，首先初始化你的语句，如果你有设置参数，那么当你使用 select 时，你将在`ResultSet`查询生成的数据表中检索数据。隐式光标在`ResultSet`第一行之前的位置，因此您必须使用`next()`方法进入当前行，并在 getter 方法的帮助下将数据添加`ResultSet`到变量中。然后检查它是否正确，如果正确，则初始化第二条语句并执行它。就这样。

但是您应该考虑当您使用超过 1 个操作时，设置`autoCommit`为 false 并且所有操作都将在 one 中完成`Transaction`，因为隐含地`JDBC`是一个操作 = 一个事务。其次，您应该考虑使用**SQL 存储过程**来添加任何数据、更新数据或删除。它更安全，代码更少。所以让数据库在它能够做到的时候工作，当然它也更快。最后，你真的应该考虑这种方法，让你的代码更安全、更快、更干净。不看简单，而是看效率、兼容性和安全性。

更多关于[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)

当您决定使用**存储过程**时，您可以像这样使用它：

```
CREATE OR REPLACE PROCEDURE SOME_NAME(VARCHAR v_name PlayerData.name%type)
AS
BEGIN
   SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
   // body
   COMMIT;
EXCEPTION
   WHEN OTHERS THEN
      ROLLBACK;
END; 
```

所以现在你必须为调用过程创建字符串。

```
final String CALL_SOMENAME = "{call SOME_NAME(?)}"; 
```

然后`PreparedStatement`你必须使用`CallableStatement`那个`interface`用来执行 SQL 存储过程的东西。

```
cs.prepareCall(CALL_SOMENAME); // Creates a cs object for calling db stored procedures
cs.setString(1, playerName);
cs.execute(); 
```

我不知道为什么很多人在寻找最简单的方法来做某事而不看代码的性能和可读性。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:52:13.347

在 UPDATE 语句中，您将“loc”列的值作为字符串插入（值周围有单引号）。如果数据库列是整数，那么这可能会导致问题。

**提示：** JDBC 提供了一个名为`PreparedStatement`. 此类允许您安全地构建 SQL 查询。它确保所有用户输入都被正确转义，以避免安全漏洞。

```
PreparedStatement ps = con.prepareStatement("UPDATE PlayerData SET " + loc + " = ? WHERE PlayerName = ?");
ps.setInt(1, nvalue);
ps.setString(2, playername);
ps.execute(); 
```

# javascript - 在 RaphaelJS 中创建复杂的文本节点

> ID：10854289
> 
> 赞同：1
> 
> 时间：2012-06-01T16:43:38.353
> 
> 标签：javascript, svg, raphael

如何在 RaphaelJS 中创建这种结构？

```
<text style="font-size:12.00014973px"  y="812.64771" x="-266.26767" transform="matrix(0.7359908,-0.67699154,0.67699154,0.7359908,0,0)">
<tspan style="fill:#1a171b;font-family:AccidentalPresidency" x="-266.26767" y="812.64771" font-size="20">S</tspan>
<tspan style="fill:#1a171b;font-family:AccidentalPresidency" x="-258.86755" y="812.64771" font-size="20" rotate="-0.89999998">P</tspan>
<tspan style="fill:#1a171b;font-family:AccidentalPresidency" x="-251.36746" y="812.54773" font-size="20" rotate="-1.7" >A</tspan>
</text> 
```

结果将是一个圆线后面的文本。我尝试这样做，但失败了：

```
var text = paper.print(300, 350, "SPA", accidentalFont, 20);
text[1].transform("...."); 
```

但是 text[1] 是一个 DOM 节点对象...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:56:38.960

paper.print 的结果是一条路径——这似乎与以前版本的 Raphael 不同。

如果你要在曲线后面做很多文本，我会使用这样的解决方案：

```
function PathPrint( canvas, pathString, text, font, options )
{
    var path = canvas.path( pathString ).attr( { stroke: 'none', fill: 'none' } );
    if ( options.print_attr == undefined )
        options.print_attr = { fill: 'black', stroke: 'none' };

    var text_length = text.length;
    var offset = 0;    
    for ( var i = 0; i < text_length; i++ )
    {
        var letter = text[i];
        if ( letter == " " || letter == "\n" )
        {            
            offset += options.size ? options.size : 20;
            continue;
        }
        var p = path.getPointAtLength( offset );
        var alpha = p.alpha;
        if ( alpha >= 360 )     //  alpha is misbehaving
            alpha -= 180;
        var tstr = "R" + Math.floor( alpha + 180 ) + " T" + Math.floor( p.x ) + "," + Math.floor( p.y );        
        var letterpath = canvas.print( 0, 0, letter, font, options.size ? options.size : 20, options.origin ? options.origin : "middle", options.spacing ? options.spacing : 0 )
                .attr( options.print_attr )
                .attr( { transform: tstr } );
        var b = letterpath.getBBox();

        offset += b.width;
    }
    path.remove();
} 
```

...

```
var pathString = "M200,300 C200,150 400,150 500,250 C500,450 200,300 400,250 C600,200 750,300 750,400";

PathPrint( canvas, pathString, "I am a big orange geek and proud of it, but I do not allow it to go to my head.", canvas.getFont( "neue" ), {} ); 
```

这有效地将字符串中的每个字母创建为其自己的路径，然后将其移植到引导路径上的一个点上，对每个字符的变换字符串应用适当的旋转。

试图解决这个问题，我对 path.getPointAtLength() 返回的 alpha 值感到非常沮丧——它们的行为似乎符合我不完全理解的标准 =( 但这种方法可能值得一试。

# iphone - 无法自定义 uibarbuttonitem，iphone

> ID：10854293
> 
> 赞同：0
> 
> 时间：2012-06-01T16:43:58.963
> 
> 标签：iphone, uitabbaritem

我现在拥有的是（uibarbuttonitem 连接到头文件中的那个）

![在此处输入图像描述](../Images/98209a246b4ce1989142be288341f04d.png)

然后我做如下定制

```
- (void)viewDidLoad
{
    [super viewDidLoad];        
    UIButton    *back   =   [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 55, 32)];
    [back setBackgroundImage:[UIImage imageNamed:@"back_button01.png"] forState:UIControlStateNormal];
    [back setTitle:@"Back" forState:UIControlStateNormal];
    [back addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
    backButton =    [[UIBarButtonItem alloc] initWithCustomView:back];
} 
```

但是，在运行我的应用程序后，该 uibarbuttonitem 根本没有改变。我确实尝试将上面的代码放入`initWithNibname`但没有运气

请指教并指出我是否在中间犯了错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:46:09.683

你需要`self.navigationItem.leftBarButtonItem = backButton;`在最后。

# mysql - 为什么我的查询以列而不是行的形式返回结果？

> ID：10854295
> 
> 赞同：2
> 
> 时间：2012-06-01T16:44:07.030
> 
> 标签：mysql, database, perl

有一个有效的 SQL 语句：

```
my $q_it = $dbh->prepare("SELECT customdata.Field_ID,
    customdata.Record_ID,
    customdata.StringValue
    FROM customdata
    WHERE customdata.Field_ID='10012' && (StringValue LIKE '1%' OR StringValue LIKE   '2%' OR StringValue LIKE '9%');
   "); 
```

我为我的客户编写了一个非常简单的 Perl 脚本，以便在他们的服务器/数据库上运行。我无法直接对其进行测试，但我将代码传递给了他们的 DBA：

```
 $q_it->execute();
   open (MYFILE, '>>data.txt');
    while (my @row=$q_it->fetchrow_array)
    {
       print MYFILE $row[0].$row[1].$row[2];
    }
   close (MYFILE); 
```

$q_it 只是一个普通的 SQL Select 语句。我会假设 data.txt 将包含许多记录（行）。然而，令人惊讶的是，它在单列中返回结果，但有许多行，例如：

```
 100012
      100012
       ...
      100012
      315941
      315667
       ...
      315633 
      2011-06
      2011-06
       ...
      2011-06 
```

几乎没有正确的。“100012”、“31”值和日期字符串的行数。理想情况下，它应该是

```
100012  315941 2011-06
100012  315667 2011-06
100012  315633 2011-06 
```

可能是我在 Perl 中做错了什么，还是因为他们的 MySQL 数据库有不同的结构？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:00:01.547

我猜您正在查看先前转储数据库的尝试。要获取第一列的所有值，然后是第二列的所有值，等等。需要一个与您显示的程序非常不同的程序。

不要忘记您正在为*append*打开文件，这将在文件开头留下任何旧数据。我原以为这里适合*写入*，因为失败尝试的输出没有什么价值。

我还会检查使用`open`状态

```
open MYFILE, '>', 'data.txt' or die $!; 
```

除此之外，除非您设置`$\`了换行符，否则您需要用换行符终止打印输出以分隔记录。也更容易写

```
print "@row\n"; 
```

而不是明确提及每个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:50:50.797

我真的很喜欢使用这样的东西：

```
sub fetch_result_rows {
    my ($dbh, $sql, @bind_params) = @_; 
    try {
        return $dbh->selectall_arrayref($sql, { RaiseError => 1, Slice => {}, }, @bind_params);
    } catch {
        confess("Unable to run SQL:\n$sql\nBIND PARAMS: @{[ join(', ', @bind_params) ]}");
    }   
} 
```

魔法就在 Slice 中，它导致返回作为哈希引用的数组引用返回。对我来说，性能开销是值得的，因为结果如下所示：

```
[
{ column1 => value, column2 => value, column3 => value }, # row1
{ column1 => value, column2 => value, column3 => value }, # row2
...

] 
```

在 perldoc DBI 中阅读以获取更多信息

# html - 如何通过 Haml 的视图助手渲染 doctype

> ID：10854296
> 
> 赞同：0
> 
> 时间：2012-06-01T16:44:07.080
> 
> 标签：html, ruby-on-rails, haml

我可以将以下代码放在 *.html.haml 视图文件中：

```
!!! 
```

HAML 将呈现：

```
<!DOCTYPE html> 
```

但是我找不到等效的 HAML 视图帮助器方法来达到相同的效果。

# .net - 使用 Asp.net MVC 4 制作 Steve 在 Techdays 上介绍的移动应用程序？

> ID：10854297
> 
> 赞同：1
> 
> 时间：2012-06-01T16:44:08.603
> 
> 标签：.net, asp.net-mvc, jquery-mobile, knockout.js, upshot

我一直在做 asp.net mvc 一段时间，最近遇到了[这个 techdays 教程](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159?format=html5)。

这似乎很有趣，但让我对如何开始做类似的事情感到困惑。

目前我有一个使用

```
1\.  Jquery
2\.  Asp.net mvc 3 razor
3\.  Nhibernate 
```

我的应用程序基本上是一个带有几个选项卡的页面，一切都由 ajax 和 jquery 模型对话框控制。

我按照这个图案来做我的东西

视图 -> 视图模型 -> 控制器 -> 服务层（在单独的库中）-> nhibernate

```
[HttpGet]
public ActionResult Courses()
{
    // get all courses back from service layer
    // automap domain results to view model
    return View(vm);
}

[HttpPost]
public ActionResult CreateCourse(CourseFormViewModel vm)
{
   // check if data meets basic validation
    if (ModelState.IsValid)
    {
       //map back to domain object
        // send to service layer
        // return data back view through json.

        return Json(data);

    }
    // return errors back to server
    return Json(wrapper);
} 
```

// 我的视图模型包含基本验证

```
 public class CourseFormViewModel
    {
        public int CourseId { get; set; }

        [Required(ErrorMessage = "Course name is required")]
        [StringLength(40, ErrorMessage = "Course name cannot be this long.")]
        public string CourseName { get; set; }
    } 
```

// 看法

我的视图几乎有一些使用视图模型的强类型 html 帮助。

// Javascript

正如我提到的，我使用了很多 Ajax。大多数时候，我会使用 serliazeArray，然后将数据发布到控制器 Action Result(CreateCourse)，然后再绑定视图模型的值。

// 服务层

在我的服务层中，我将执行一些业务逻辑，然后在需要时使用 nhibernate 保存到数据库中。如果我觉得有必要，我将制作域传输对象，否则我将只使用我的域对象。

我最近一直在研究 jquery 手机和手机的差距，因为我被安排在一个使用这种技术的项目上，它们看起来非常有用。由于我对 asp.net mvc 非常熟悉，因此我开始考虑是否可以在混合中使用 mvc，那时我看到了我在这篇文章顶部发布的视频。

我仍然不是 100% 在单页应用程序上销售，例如，如果我要查看我正在制作的当前个人项目并想要制作它的移动版本，那么应用程序在向其展示数据时必须完全不同用户。

例如，我的 Web 应用程序有一个表格，它只需要大量空间来显示所有内容，而且在移动设备上可能看起来不太好。这将导致我要么不得不修剪表格，要么考虑以不同的方式显示它（我可能会这样做）。

我喜欢史蒂夫所做的可以在所有移动设备上运行的事实，我想尝试类似于他正在做的事情，但我要制作的版本将只适用于移动设备，也许是小型平板电脑。

我认为可以支持 1024 和更高分辨率的所有其他东西都应该使用当前的 Web 应用程序。

我只是不知道从哪里开始以及如何使它适合我正在使用的东西。

1.  他正在使用 webapi 和实体框架工作，但我如何使用 nhibernate 进行这项工作？

2.  我不再使用视图模型了吗？似乎他只是连接了他的域模型并将其全部发送到视图。我对此并不太疯狂，因为我喜欢视图模型。

3.  他使用 Knockout.js 及其所有绑定内容，例如绑定到他用来将数据发送回服务器的按钮。这很好，但是当您使用 jquery 对话框和生成自己的按钮的东西时会发生什么。在这些情况下，你如何挂钩淘汰赛？

4.  他提到，然后他可以接受他的项目并使用诸如phonegap之类的东西将其投放市场。如果他使用 asp.net mvc 代码作为电话间隙仅支持 html/javascript/css，他怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:45:06.977

关于第 3 点。我正在使用带有 jqQuery 对话框的 Knockout 没有任何问题。首先，您不能将数据绑定附加到对话框创建的按钮。我不确定你真的需要。对话框按钮充当单击事件处理程序。在这些处理程序中，您可以对绑定的视图模型执行您需要的所有操作。

* * *

**编辑** 我在[http://jsfiddle.net/ex5Qy/3/上放了一个演示](http://jsfiddle.net/ex5Qy/3/)

要记住的一件事是 Knockout 的设计目的。它将视图模型绑定到 html 元素。就这样。您仍然需要所有其余的正常逻辑来使页面执行您需要的操作。

# android - 将（已经渲染的）屏幕的一部分作为纹理

> ID：10854305
> 
> 赞同：1
> 
> 时间：2012-06-01T16:44:57.367
> 
> 标签：android, opengl-es, framebuffer, render-to-texture

我正在制作一个 android opengl es 2d 应用程序，并尝试将渲染屏幕的一部分用作广告牌的纹理。到目前为止，我在 glCopyTexSubImage 方面取得了部分成功——它只适用于某些手机。

我读到的所有地方都建议使用 frameBufferObject 渲染到纹理，但我不知道如何使用它，所以如果有人能帮我得到这个，我会非常感谢他们。

1.  如果我使用绑定到纹理的 FBO，是否可以只渲染屏幕的一部分？如果没有，那是不是有点矫枉过正？（还有更多的工作纹理映射和移动纹理。纹理必须足够大，以便我不需要模糊的部分）

2.  我需要获取应该渲染到屏幕上的东西的快照，这是否意味着我必须每帧渲染我的场景两次（一个用于我的纹理，另一个用于实际渲染）？我在这里错过了什么吗？

# android - 是否可以刷新 3rd 方小部件？

> ID：10854314
> 
> 赞同：0
> 
> 时间：2012-06-01T16:45:41.170
> 
> 标签：android, android-widget

我正在编写一个更改屏幕亮度的应用程序。我还使用了一个 3rd 方小部件，它既可以更改屏幕亮度，又可以显示当前亮度值。我的程序和第 3 方小部件具有不同的功能，我想继续使用它们。但是，当我的应用程序更改屏幕亮度时，第 3 方小部件不会自动刷新以反映此更改。所以，我的问题是：

*   我的应用程序是否可以调用第 3 方小部件进行刷新？

*   如果是这样，这是通过刷新手机上的每个小部件来完成的，还是我可以针对该特定小部件（例如，通过包名称）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:05:37.000

> 我的应用程序是否可以调用第 3 方小部件进行刷新？

不容易，而且很可能根本不会。

> 如果是这样，这是通过刷新手机上的每个小部件来完成的吗

AFAIK，这是不可能的。

> 或者我可以定位那个特定的小部件（例如，通过包名称）？

在这件事上你别无选择。

这可能起作用的唯一方法是，如果您使用系统用于更新第三方应用程序小部件`sendBroadcast()`的相同方式进行调用。`Intent`您需要指定`ComponentName`其他应用程序的`AppWidgetProvider`. 而且，您无法知道该特定`Intent`附加组件的应用小部件 ID 是什么。如果第三方`AppWidgetProvider`在此广播中期待您未提供的某些内容（例如，应用小部件 ID），则它可能会崩溃。这个广播也有可能是安全的，不能被其他应用程序发送——我从来没有试过这个。

# command-line - 仅按名称打开文件，无扩展名

> ID：10854315
> 
> 赞同：1
> 
> 时间：2012-06-01T16:45:45.567
> 
> 标签：command-line, batch-file, cmd

如何通过仅提供文件名而不提供扩展名来打开 .bat 中的任何类型的文件？我想让 Windows 决定要使用的应用程序。

例子：

%SystemRoot%\explorer.exe E:\SomeFolder\

%SystemRoot%\explorer.exe E:\SomeFolder\file1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:11:19.777

使用 START 命令：

```
start "Any title" E:\SomeFolder\
start "Any title" E:\SomeFolder\file1 
```

取自开始帮助：

```
If Command Extensions are enabled, external command invocation
through the command line or the START command changes as follows: 
```

.

```
non-executable files may be invoked through their file association just
    by typing the name of the file as a command.  (e.g.  WORD.DOC would
    launch the application associated with the .DOC file extension).
    See the ASSOC and FTYPE commands for how to create these
    associations from within a command script. 
```

.

```
When searching for an executable, if there is no match on any extension,
then looks to see if the name matches a directory name.  If it does, the
START command launches the Explorer on that path.  If done from the
command line, it is the equivalent to doing a CD /D to that path. 
```

请注意，前面的描述暗示纯文件名还必须执行正确的应用程序，没有 START 命令。要获取具有给定名称的第一个文件：

```
for %%f in (name.*) do set "filename=%%f" & goto continue
:continue 
```

...并执行它：

```
%filename% 
```

PS - 请注意，您希望“让 Windows 决定要使用的应用程序”，但在您的示例中，您明确选择`%SystemRoot%\explorer.exe`了要使用的应用程序。所以？

# xcode4 - Xcode 4 中的打包操作失败

> ID：10854316
> 
> 赞同：6
> 
> 时间：2012-06-01T16:45:46.490
> 
> 标签：xcode4, app-store, distribution, application-loader, xcode-organizer

当我使用 Xcode 4 创建应用程序 IPA 文件时，我转到 Product --> Archive 以获取 Xcode Archive。**[我最近在这里](https://stackoverflow.com/questions/5640851/submitting-app-to-app-store-with-xcode4-summary-of-key-steps-please-correct)**阅读了 SO 帖子，详细介绍了如何在 AppStore 中分发应用程序。我按照这篇文章中的说明进行操作，但我的错误仍然存​​在。

![Xcode Archive 的 Xcode 管理器选项](../Images/66ea3ad7c30dcfc2a73b111e0ca91147.png)

首先，我从验证开始。当我单击验证我登录时，选择正确的代码签名 ID，然后得到以下错误：

![打包操作失败错误](../Images/970a4331706d5ad1b4238f89921526ce.png)

当我尝试分发到 AppStore 时，我收到了相同的错误消息。

关于为什么我不能共享和/或分发我的应用程序的任何想法？

* * *

**编辑**

以前，我在验证和分发时遇到问题，因此我会收到以下错误：

![没有找到合适的申请记录](../Images/3971115c3e89a94e3d3714a344c3349b.png)

我通过在 iTunes Connect 中完成我的 CCAT / 加密注册解决了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T10:16:11.240

我遇到了同样的错误并找到了这个解决方案（Xcode 4.4）。

在构建设置/代码签名中，我在第一次存档尝试中遇到了“不要代码签名”。

然后我放了一个有效的分发证书（在发布标识中），归档后，包的验证完美无缺。

感谢 Apple 在每个版本中都做了一些与之前版本不同的事情（未记录）。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T14:55:09.247

晚了几个月，但万一其他人遇到这个问题并找到这个问题（就像我一样）并且其他建议都不适合你。阅读其他答案后，此错误似乎有多种原因。

就我而言，这是因为我的项目方案将其存档构建配置设置为发布，而不是分发。将其更改为 Distribution 后，我能够毫无问题地提交应用程序。

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:51:06.803

我有类似的情况和标准解决方案，例如删除带有前缀 _ 的文件。证书实验并没有取得成功。

英文版的构建分发有效，但本地化为克罗地亚语没有。所以我使用了重型武器。我安装了克罗地亚语键盘布局。你猜怎么着？从那一刻起，一切都解决了！

所以也许这个地方还有其他东西，但我建议你至少检查一下这是否符合你的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T17:03:03.700

您的证书/配置文件可能存在错误。这是我对 Xcode 4.3 的证书任务的简短摘要：

1.  确保（在 developer.apple.com 中）您已创建分发证书
2.  确保您在 Xcode 中的应用程序 ID 与 developer.apple.com 中的应用程序 ID 完全匹配
3.  在 itunesconnect.apple.com 中创建您的应用程序
4.  在您的密钥链中加载分发证书为您的应用程序创建分发配置文件（确保在创建配置文件时添加所有设备）
5.  在 Xcode 管理器、LIBRARY 部分、Provisioning Profiles 中拖动配置文件。
6.  制作你的档案。
7.  在 Xcode 管理器中，验证您的应用程序，然后临时分发它。
8.  最终（如果你有耐心的话）Xcode 会提议将 IPA 保存在某个地方。保存它，将 IPA 放在测试人员可以下载的地方。
9.  下载后，测试人员可以在 iTunes (LIBRARY) 中拖动 IPA，并最终同步设备（当且仅当您创建/修改配置文件时检查了他们的设备 UDID）。

或多或少。祝你好运。

附言。AppStore 中有一个免费的应用程序，获取 UDID。让您的测试人员使用它并向您发送设备详细信息，这将为您省去 40 多个字符长的设备 ID 的烦恼。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T06:42:07.513

当我尝试从**Xcode DEVELOPER PREVIEW**分发应用程序时，它发生在我身上。从 XCode 的实际版本 - 一切正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T16:41:52.620

我也看到了这个莫名其妙的错误，并尝试了这里的所有建议，但没有成功。我终于去删除了我的本地证书和配置文件，并从 Apple 的配置网站再次下载了它们。在确保在我的构建设置中正确设置了代码签名选项后，我清理了项目并再次存档，这一次当我运行验证步骤时错误消失了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-02T10:28:15.177

检查项目和目标的代码签名条目是否正确（包含分发配置文件）。即使只有项目设置正确，也可以归档项目。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-29T21:31:54.830

对我来说，答案是在我的应用程序提交到 MacAppStore 失败后尝试验证它。我认为通过验证它，我应该得到更详细的错误消息，而不是这个“打包操作错误”。它来了：

![在此处输入图像描述](../Images/8b83aa7d2137c194bad4901bfdbc1eee.png)

那是因为我不得不吊销我的证书（至于为什么我必须吊销它们，不要问，我不知道，它发生在每 2 次提交中......）。而且我只重新创建了 Mac 提交证书。实际上，您还需要安装程序之一。太晚了，我想我真的需要这个吗？...因此，我终于在 Keychain.app -> Request Certificate from a Certificate Authority... 等中做了两次小舞，上传到 itunesconnect，然后下载回来。在那之后，它奏效了。

# php - 将具有 1.3 MIL 记录的表从一个 MySQL Server 移动到另一个（在不同的物理服务器上）

> ID：10854321
> 
> 赞同：0
> 
> 时间：2012-06-01T16:46:16.390
> 
> 标签：php, mysql, database

我们运行了一个查询，它是一个从 Select 语句中插入的语句，它实际上在几秒钟内完成 - 并且能够轻松插入 130 万条记录。

我们有新的要求。正在创建和插入的表现在必须存在于同一子网上的不同 mysql 服务器上。

如何才能做到这一点？最有效的方法是什么？我们是否应该在文件级别备份表，并将其复制到新服务器？

或者我们应该对两个数据库都运行一个查询，如果是这样 - 需要多长时间？

我们需要手动执行此过程 -

这是我们用来执行此操作的当前代码的示例：

```
$populateNewTable = "insert into tbl_free_minutes_".strtolower(date("M")).date("Y")." (cust_id,telephone_number,state,created_datetime,plan_id,requested_planid) SELECT id,telephone_number,state,created_datetime,plan_id,requested_planid FROM tbl_customer WHERE created_datetime <= '".$date." 23:59:59' AND account_status IN ( 'Active', 'ActiveLL','Suspend') AND  plan_id IN ('14','13','15','16','17','19','20','21','22','23','24','60','26', '27','28','29','30','31','32','33','34','38','39','40','44','45','46','47','48', '49','50','51','52','53','54','55','56','57','58','59','35','36','66','63','64', '65','67','68','69',76,77,78,79,82,83,84,85,86,87,88,89,93,94,95,96) and unlimited_plan != 'Y' "; 
```

萨斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:56:02.907

我建议使用“SELECT ... INTO OUTFILE”在第一台服务器上提取您的数据。
然后将查询创建的文件传输到第二台服务器。
最后，在第二台服务器上使用“LOAD DATA INFILE”将数据加载到表中。

一些链接： http:
[//dev.mysql.com/doc/refman/5.5/en/select-into.html](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)
[http://dev.mysql.com/doc/refman/5.5/en/load-data.html](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

# cuda - 缺乏 CUDA 5 动态并行示例

> ID：10854325
> 
> 赞同：5
> 
> 时间：2012-06-01T16:46:22.450
> 
> 标签：cuda, nvidia, hpc

我一直在谷歌搜索，并且只能在[从此处](http://developer.nvidia.com/cuda-toolkit)链接的技术简报之一中找到 Compute Capability 3.0 中新动态并行性的[一个简单示例](http://developer.nvidia.com/sites/default/files/akamai/cuda/files/CUDADownloads/TechBrief_Dynamic_Parallelism_in_CUDA.pdf)。我知道 HPC 专用卡可能要到明年这个时候[才可用（在 nat'l 实验室得到他们的之后）。](http://www.hpcwire.com/hpcwire/2012-03-22/nvidia_launches_first_kepler_gpus_at_gamers_hpc_version_waiting_in_the_wings.html?page=1)是的，我意识到他们给出的简单示例足以让您继续前进，但**越多越好**。

 **还有其他我错过的例子吗？

为了省去您的麻烦，以下是技术简介中给出的完整示例：

```
__global__ ChildKernel(void* data){
    //Operate on data
}
__global__ ParentKernel(void *data){
    ChildKernel<<<16, 1>>>(data);
}
// In Host Code
ParentKernel<<<256, 64>>(data);

// Recursion is also supported
__global__ RecursiveKernel(void* data){
    if(continueRecursion == true)
        RecursiveKernel<<<64, 16>>>(data);
} 
```

编辑：GTC 谈论[CUDA 编程模型中的新功能](http://www.gputechconf.com/gtcnew/on-demand-gtc.php?sessionTopic=&searchByKeyword=&submit=&select=%20&sessionEvent=&sessionYear=2012&sessionFormat#1403)主要关注 CUDA 5 中的新动态并行。该链接包含视频和幻灯片。仍然只是玩具示例，但比上面的技术简介要详细得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T04:05:50.510

这是您需要的动态并行编程指南。充满细节和例子：[http ://docs.nvidia.com/cuda/pdf/CUDA_Dynamic_Parallelism_Programming_Guide.pdf](http://docs.nvidia.com/cuda/pdf/CUDA_Dynamic_Parallelism_Programming_Guide.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T12:11:02.057

只是为了确认动态并行性仅在计算能力为 3.5 以上的 GPU 上受支持。

我有一个安装了 cuda 5.0 的 3.0 GPU 我已经编译了动态并行示例 nvcc -arch=sm_30 test.cu

并收到以下编译错误 test.cu(10): error: 从全局函数("parent_launch") 调用**全局**函数( **"** child_launch") 仅允许在 compute_35 架构或更高版本上使用。

 **显卡信息

设备 0：“GeForce GT 640”CUDA 驱动程序版本/运行时版本 5.0/5.0 CUDA 能力主要/次要版本号：3.0

希望这可以帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T23:36:10.723

我将问题标题编辑为“...CUDA 5...”，因为动态并行是 CUDA 5 中的新功能，而不是 CUDA 4。我们还没有任何可用的公共示例，因为我们没有可用的公共硬件可以运行它们。CUDA 5.0 将支持动态并行，但仅限于 Compute Capability 3.5 及更高版本（例如 GK110）。这些将在今年晚些时候推出。

我们将在硬件可用时发布一些带有 CUDA 5 候选版本的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T14:04:10.413

我认为计算能力 3.0 不包括动态并行性。它将包含在 GK110 架构（又名“Big Kepler”）中，我不知道将分配什么计算能力编号（3.1？也许）。这些卡要到今年年底才能上市（我等得太久了）。据我所知，3.0 对应于 GK104 芯片，例如用于笔记本电脑的 GTX690 或 GT640M。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T23:32:30.747

鉴于最近发布了 CUDA 5 RC，我只是想与大家一起检查一下。我查看了 SDK 示例，但在那里找不到任何动态并行性。如果我错了，有人纠正我。我通过搜索“<<<”在内核中搜索内核启动，但一无所获。****

# ios - 在界面生成器中更改 SearchDisplayController 委托

> ID：10854327
> 
> 赞同：0
> 
> 时间：2012-06-01T16:46:31.937
> 
> 标签：ios, ios5, delegates, interface-builder, uisearchdisplaycontroller

我试图在表格上方显示一个搜索栏，其中包含最近搜索的列表，一旦有人输入搜索词，这些搜索将切换到匹配的搜索结果。

我想设置一个自定义类`MySearchViewController`作为执行搜索和管理将搜索结果显示回表的委托，以便我可以分离代码并且在默认控制器中没有条件语句。

我找到了一堆描述如何在代码中执行此操作的示例，但我无法弄清楚如何使用 Interface Builder 来执行此操作。

我已经尝试将一个新的视图控制器拖到我的 xib 中，并将自定义类设置为`MySearchViewController`，然后从`SearchDisplayController`这里拖出插座：http: [//goo.gl/RgmwG](http://goo.gl/RgmwG)

我还尝试将 Object 拖入 objects 列并将此类更改为`MySearchViewController`.

但我感觉完全迷失了，真的只是随机尝试。我猜我还需要为`SearchDisplayController`某个地方创建一个属性/IBOutlet，但又丢失了。

如果有人对如何去做这件事有参考，我会很高兴！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:59:12.033

像大多数问题一样，回想起来似乎很明显。

*   在界面生成器（橙色立方体）中添加一个“对象”占位符。
*   将对象自定义类更改为您希望成为委托的类 - 例如`MySearchViewController`
*   从标准中删除默认插座`SearchDisplayContoller`以与`MySearchViewController`对象连接（见屏幕截图）
*   确保新委托有一个到父视图的出口（在我的例子中`View`）
*   确保委托类是从某个地方启动的

    ```
    // I did this from the parent ViewConroller, but probably better from the main app delegate?  
    @property (strong, nonatomic) IBOutlet MSSearchViewController *searchViewController; 
    ```

希望这可以帮助其他也被卡住的人！

![MySearchViewController 的插座](../Images/c62530fe31c5c86a0607c74fbd63c847.png)

# android - 微调器：当所选项目保持不变时，不调用 onItemSelected

> ID：10854329
> 
> 赞同：53
> 
> 时间：2012-06-01T16:46:53.150
> 
> 标签：android, spinner, listener, android-actionbar, actionbarsherlock

我有一个`OnItemSelectedListener`for my `Spinner`，但是当所选项目与前一个项目相同时，它不会被调用。显然`OnClickListener`不是 a 的选项`Spinner`。每次用户单击某个项目时，我都需要捕捉。任何的想法？

也许这`Spinner`是在`ActionBar`扰乱正常行为的事实？

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.tracklist_menu, menu);
    Spinner spinner = (Spinner) menu.findItem(R.id.option_ordering_spinner)
            .getActionView();
    spinner.setAdapter(mSpinnerAdapter);
    spinner.setSelection(PrefsHelper.getOrderingSpinnerPos(prefs));
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
            String str = "selected";
            System.out.println(str);
            if (optionMenuInitialized) {

                switch (position) {
                case 0:
                    // rdm
                    getActivity()
                            .sendBroadcast(
                                    new Intent(
                                            MyIntentAction.DO_RESHUFFLE_PLAYLIST));
                    smp.setCurrentTracklistCursorPos(-1);
                    trackAdapter.notifyDataSetChanged();
                    break;
                case 1:
                    // artist
                    getActivity()
                            .sendBroadcast(
                                    new Intent(
                                            MyIntentAction.DO_ORDER_PLAYLIST_BY_ARTIST));
                    smp.setCurrentTracklistCursorPos(-1);
                    trackAdapter.notifyDataSetChanged();
                    break;
                case 2:
                    // folder
                    getActivity()
                            .sendBroadcast(
                                    new Intent(
                                            MyIntentAction.DO_ORDER_PLAYLIST_BY_FOLDER));
                    smp.setCurrentTracklistCursorPos(-1);
                    trackAdapter.notifyDataSetChanged();
                    break;
                }
                PrefsHelper.setOrderingSpinnerPos(prefEditor, position);
                prefEditor.commit();
            }
            optionMenuInitialized = true;
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-27T13:53:39.373

好的，我终于找到了一个解决方案，通过创建我自己的扩展 Spinner 的类：

```
public class MySpinner extends Spinner {
OnItemSelectedListener listener;

public MySpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public void setSelection(int position) {
    super.setSelection(position);
    if (listener != null)
        listener.onItemSelected(null, null, position, 0);
}

public void setOnItemSelectedEvenIfUnchangedListener(
        OnItemSelectedListener listener) {
    this.listener = listener;
}
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-08-25T02:14:19.153

我发现了这项工作，而不是提供的工作

```
/** Spinner extension that calls onItemSelected even when the selection is the same as its previous value */
public class NDSpinner extends Spinner {

  public NDSpinner(Context context)
  { super(context); }

  public NDSpinner(Context context, AttributeSet attrs)
  { super(context, attrs); }

  public NDSpinner(Context context, AttributeSet attrs, int defStyle)
  { super(context, attrs, defStyle); }

  @Override public void
  setSelection(int position, boolean animate)
  {
    boolean sameSelected = position == getSelectedItemPosition();
    super.setSelection(position, animate);
    if (sameSelected) {
      // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
      getOnItemSelectedListener().onItemSelected(this, getSelectedView(), position, getSelectedItemId());
    }
  }

  @Override public void
  setSelection(int position)
  {
    boolean sameSelected = position == getSelectedItemPosition();
    super.setSelection(position);
    if (sameSelected) {
      // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
      getOnItemSelectedListener().onItemSelected(this, getSelectedView(), position, getSelectedItemId());
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-30T22:52:33.247

尽管选择了最后一个索引的值，但要使微调器更改，只需使用：

```
spinner.setSelection(0); 
```

在调用您的其他选择之前

```
spinner.setSelection(number); 
```

这样，微调器将触发两次*OnItemSelected*事件。只要确保它第二次做你需要的任何事情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-22T14:32:03.743

重写了通用解决方案，但使用：

1.  牢记androidx
2.  延伸自`AppCompatSpinner`
3.  使用内置`OnItemSelectedListener`监听器而不是创建自己的监听器
4.  添加了初始侦听器调用黑客

这里：

```
import android.content.Context;

import androidx.annotation.Nullable;
import androidx.appcompat.widget.AppCompatSpinner;

public class FixedSpinner extends AppCompatSpinner {
    // add other constructors that you need
    public FixedSpinner(Context context, int mode) {
        super(context, mode);
    }

    private void processSelection(int position) {
        boolean sameSelected = position == getSelectedItemPosition();
        final OnItemSelectedListener listener = getOnItemSelectedListener();
        if (sameSelected && listener != null) {
            // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
            listener.onItemSelected(this, getSelectedView(), position, getSelectedItemId());
        }
    }

    @Override
    public void setSelection(int position) {
        processSelection(position);
        super.setSelection(position);
    }

    @Override
    public void setSelection(int position, boolean animate) {
        processSelection(position);
        super.setSelection(position, animate);
    }

    @Override
    public void setOnItemSelectedListener(@Nullable OnItemSelectedListener listener) {
        // This hack fixes bug, when immediately after initialization, listener is called
        // To make this fix work, first add data, only then set listener
        // Having done this, you may refresh adapter data as many times as you want
        setSelection(0, false);
        super.setOnItemSelectedListener(listener);
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-25T09:10:32.813

这里有一个更好的实现：

```
public class SpinnerPlus extends Spinner {
    AdapterView.OnItemSelectedListener listener;

    public SpinnerPlus(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setSelection(int position) {
        super.setSelection(position);
        if (listener != null)
            listener.onItemSelected(this, getSelectedView(), position, 0);
    }

    public void setOnItemSelectedEvenIfUnchangedListener(
            AdapterView.OnItemSelectedListener listener) {
        this.listener = listener;
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-14T11:25:29.840

这是一个更好的实现 -

自定义微调器类 -

```
import android.content.Context;
import android.util.AttributeSet;
import androidx.appcompat.widget.AppCompatSpinner;

public class CSpinner extends AppCompatSpinner {

    private int lastPosition = 0;

    public CSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setSelection(int position) {
        super.setSelection(position);
        boolean sameSelected = lastPosition == getSelectedItemPosition();
        OnItemSelectedListener onItemSelectedListener = getOnItemSelectedListener();
        if (sameSelected && onItemSelectedListener != null) {
            onItemSelectedListener.onItemSelected(this, getSelectedView(), position, getSelectedItemId());
        }
        lastPosition = position;
    }
} 
```

设置监听器 -

```
spn.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            Log.d("onItemSelected", String.valueOf(position));
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-09T17:52:47.093

如果它仍然是实际的，正确的回调调用应该是

```
@Override
public void setSelection(int position) {
    super.setSelection(position);
    if(listener != null)
        listener.onItemSelected(this, getChildAt(position), position, 0);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-06T11:37:29.293

最简单的解决方案：

spinner.performItemClick（视图，位置，id）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-22T09:51:43.130

我有同样的问题，我通过在每次适配器更改项目时设置 onItemSelectedListener 来解决它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-27T15:19:14.653

进一步从@Vishal Yadav 的答案，如果你想设置一个初始位置而不触发 OnItemSelectedListener 通过调用`spinner.setSelection(pos, false);`然后自定义微调应该是：

```
public class CSpinner extends AppCompatSpinner {

    private int lastPosition = 0;

    public CSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setSelection(int position, boolean animate) {
        OnItemSelectedListener listener = getOnItemSelectedListener();
        setOnItemSelectedListener(null);
        super.setSelection(position, animate);
        lastPosition = position;
        setOnItemSelectedListener(listener);
    }

    @Override
    public void setSelection(int position) {
        super.setSelection(position);
        boolean sameSelected = lastPosition == getSelectedItemPosition();
        OnItemSelectedListener onItemSelectedListener = getOnItemSelectedListener();
        if (sameSelected && onItemSelectedListener != null) {
            onItemSelectedListener.onItemSelected(this, getSelectedView(), position, getSelectedItemId());
        }
        lastPosition = position;
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-17T11:44:51.330

我找到了一个简单的解决方案

只需再次调用 setAdapter 来代替第二个微调器的 notifyDataSetChanged

# django - Django 中的国际化没有被激活

> ID：10854330
> 
> 赞同：1
> 
> 时间：2012-06-01T16:46:53.587
> 
> 标签：django

我已按照文档说明如何执行 i18n，但这些单词仍以英文显示。

**设置.py：**

```
USE_I18N = True
LANGUAGES = (
  ('en', 'English'),
  ('de', 'German'),
)
LANGUAGE_CODE = 'de' 
```

**意见：**

```
from django.utils.translation import ugettext as _
...
messages.set_level(request, messages.SUCCESS)
messages.success(request, _(u'An invitation was sent to %s.') % invitation.email) 
```

我正在 Ubuntu 上开发并安装了 gettext。在命令行中，我输入这些：

```
django-admin.py makemessages -l de 
```

我得到一个 .po 文件并相应地对其进行编辑：

```
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-06-01 17:42+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n != 1)\n"

#: MyBookmarks/templates/friend_invite.html:3
#: MyBookmarks/templates/friend_invite.html:4
msgid "Invite A Friend"
msgstr "hhhhh"

#: MyBookmarks/templates/friend_invite.html:11
msgid "send invite"
msgstr "gggggggggg"

#: MyBookmarksApp/forms.py:8
msgid "Friend's Name"
msgstr "ffffffffff"

#: MyBookmarksApp/forms.py:9
msgid "Friend's Email"
msgstr "ddddddddd"

#: MyBookmarksApp/views.py:123
#, python-format
msgid "An invitation was sent to %s."
msgstr "ssssssssssss %s"

#: MyBookmarksApp/views.py:127
msgid "An error happened when sending the invitation."
msgstr "aaaaaaa" 
```

然后我运行这个命令：

```
django-admin.py compilemessages 
```

并创建 .mo 文件。我运行该应用程序，一切仍然是简单的英语。我错过了什么？

**更新 2：**

我现在尝试了一种新方法：

我已经添加了

```
'django.middleware.locale.LocaleMiddleware', 
```

到 settings.py 中的 MIDDLEWARE_CLASSES

然后我在 url.py 中添加了以下内容：

```
# i18n
(r'^i18n/', include('django.conf.urls.i18n')), 
```

在我的 base.html 模板中，我添加了这个：

```
{% load i18n %}
...
<div id="footer">
    <form action="/i18n/setlang/" method="post">
      <select name="language">
        {% for lang in LANGUAGES %}
          <option value="{{ lang.0 }}">{{ lang.1 }}</option>
        {% endfor %}
      </select>
      <input type="submit" value="Go" />
    </form>
  </div> 
```

现在我可以在我的页面上看到一个下拉菜单来更改语言。即使将语言更改为德语，也没有任何变化。1.4中似乎有些东西坏了......

**更新 3：**

我创建了一个新的简单测试项目来演示这个问题。

这是一个非常简单的项目，您可以在主页上切换德语和英语。您会看到所选语言代码实际上发生了变化，这是一个好兆头，但翻译根本没有发生。我想知道这是否是一个需要报告的错误。非常感谢您的合作。

请从这里下载：http: [//www.chasebot.com/TestProject.zip](http://www.chasebot.com/TestProject.zip)

（一旦在 settings.py 中提取，您需要更改数据库的绝对路径）

请让我知道您是否可以复制它。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T18:44:57.877

你使用 set_language() 方法吗？[https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#set-language-redirect-view](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#set-language-redirect-view)

您如何更改当前语言？使用表格？你确定语言变了？打印 html 模板中的当前语言。可能是一些 cookie 已经存储在浏览器中，并且具有非“DE”值，从而阻止切换到所需的语言。

**更新**：好的，似乎 Django 找不到语言环境目录。目录结构似乎有点混乱。在这里阅读：[https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations)

```
The directories listed in LOCALE_PATHS have the highest precedence, with the ones appearing first having higher precedence than the ones appearing later.

Then, it looks for and uses if it exists a locale directory in each of the installed apps listed in INSTALLED_APPS. The ones appearing first have higher precedence than the ones appearing later. 
```

因此，您在 settings.py 中没有 LOCALE_PATHS，并且 locale/ 不是应用程序的子目录，包含在 INSTALLED_APPS 中。

只需添加

```
LOCALE_PATHS = ('/path/to/locale/', ) 
```

这应该可以解决问题（我已经用你的测试项目进行了测试）。

# java - Android Context对象如何处理

> ID：10854333
> 
> 赞同：2
> 
> 时间：2012-06-01T16:47:00.657
> 
> 标签：java, android, android-context

这不是关于 Context 对象本身的问题。我想知道管理对它的引用的最佳方法是什么。当我创建 Activity、Service 等 android 对象时 - 上下文已经随处可访问。

但是我有很多不同的数据访问类、各种共享实用程序等。我发现自己编写每个调用并单独传递上下文。我想知道是否有任何处理上下文的好方法。也许是静态的？像这样将引用存储在我自己的 Application 对象中是个好主意吗？

```
public class MyApplication extends Application
{
    public static Context Context; 
```

这样我就可以从应用程序的任何地方访问上下文。这似乎是个好主意？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T17:02:14.923

Make`public static Context mContext;`作为一个全局变量，并在开头`onCreate()`添加`mContext = this;`. 它使访问变得更加容易。通过将其设为公开和静态，其他文件可以看到您的主要活动的上下文，您不必将其作为参数传递给任何函数。在我看来，这可能是管理对它的引用的最好/最简单的方法。它还整理了对`MainActivity.this`.

alexsc 的评论显示了一个有用的链接，指向由此可能发生的问题。

# spring - JPA2 Criteria-API: select... in (select from where)

> ID：10854334
> 
> 赞同：2
> 
> 时间：2012-06-01T16:47:01.623
> 
> 标签：spring, jpa-2.0, criteria-api, specifications

我有以下数据库模型：

```
A
aId

AB
aId
bId

B
bId
status 
```

在 Spring 数据规范中，我想在 B.status 为“X”时返回 A 的实例。JPQL 代码如下：

```
select a from A a where a in
     (select ab.id.a from AB ab where ab.id.b.status= :status) 
```

这些是模型类：

```
@Entity
public class A {
     private Long aId;

     @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = "id.a")
     private Set<AB> ab;
}

@Entity
public class B {
     private Long bId;
     private String Status;

     @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = "id.b")
     private Set<AB> ab;
}

@Entity
public class AB {
     private ABPK id;
}

public class ABPK {
     @ManyToOne
     @JoinColumn(name="aId")
     private A a;

     @ManyToOne
     @JoinColumn(name="bId")
     private B b;
} 
```

Spring 规范中的 JPA 标准如何？

```
public class ASpecifications {
     public static Specification<A> test(final String status) {
          return new Specification<Party>() {
          @Override
          public Predicate toPredicate(Root<A> a, CriteriaQuery<?> query, CriteriaBuilder cb) {
            return null;
          }
        };
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:56:11.200

使用 Criteria API 返回 A 实例的规范如下：

```
public class ASpecifications {
     public static Specification<A> test(final String status) {
          return new Specification<Party>() {
          @Override
          public Predicate toPredicate(Root<A> a, CriteriaQuery<?> query, CriteriaBuilder cb) {
            Subquery<A> sq = query.subquery(A.class);
            Root<AB> ab = sq.from(AB.class);
            sq.select(ab.get(AB_.id).get(ABPK_.a));
            sq.where(cb.equal(ab.get(AB_.id).get(ABPK_.b).get(B_.status), status));

            Predicate p = cb.in(a).value(sq);
            return cb.and(p);
          }
        };
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:18:06.190

上一篇文章中包含一些很好的示例，这些示例准确地解决了您在此处尝试完成的任务：[jpa-2-0-criteria-api-subqueries-in-expressions](https://stackoverflow.com/questions/4483576/jpa-2-0-criteria-api-subqueries-in-expressions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:51:32.143

我想您想从 B 处于提供状态的 AB 实体中选择“A 实体”：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<A> cq = cb.createQuery(A.class);
Root<AB> ab = cq.from(AB.class);
cq.select(ab.get("id").get("a"));
cq.where(cb.equal(ab.get("id").get("b.status"), status)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-29T10:58:46.957

Select In - 是一个选项，但您可以通过双重连接获得相同的结果。并且更容易制定这样的 jpa 规范：
`SELECT A.ID FROM A LEFT JOIN AB ON A.ID = AB.A_ID LEFT JOIN B ON AB.B_ID = B.ID WHERE B.STATUS = 'STATUS'`
方法如下所示：

```
public static Specification<A> findB(String input) {
    return new Specification<A>() {
        @Override
        public Predicate toPredicate(Root<A> root, CriteriaQuery<?> cq, CriteriaBuilder cb) {
            Join<A,AB> AjoinAB = root.joinList(A_.AB_LIST,JoinType.LEFT);
            Join<AB,B> ABjoinB = AjoinAB.join(AB_.B,JoinType.LEFT);
            return cb.equal(ABjoinB.get(B_.NAME),input);
        }
    };
} 
```

或者更短

```
public static Specification<A> findB(String input) {
    return (Specification<A>) (root, cq, cb) -> {
        Join<A,AB> AjoinAB = root.joinList(A_.AB_LIST,JoinType.LEFT);
        Join<AB,B> ABjoinB = AjoinAB.join(AB_.B,JoinType.LEFT);
        return cb.equal(ABjoinB.get(B_.NAME),input);
    };
} 
```

我知道这个问题已经很久没有出现了，但是当我尝试做同样的事情时我遇到了它。这是我的解决方案，我希望它可以帮助某人。

下面的实体

```
@Entity
public class A {
    @Id
    private Long id;
    private String name;
    @OneToMany(mappedBy = "a")
    private List<AB> abList;
}
@Entity
public class B {
    @Id
    private Long id;
    private String status;
    @OneToMany(mappedBy = "b")
    private List<AB> abList;
}
@Entity
public class AB {
    @Id
    private Long id;
    private String name;
    @ManyToOne
    @JoinColumn(name = "a_id")
    private A a;
    @ManyToOne
    @JoinColumn(name = "b_id")
    private B b;
} 
```

# java - 如何将库添加到 android 项目？

> ID：10854337
> 
> 赞同：2
> 
> 时间：2012-06-01T16:47:19.047
> 
> 标签：java, android, eclipse, sockets, tcp

我从 eneter.net 下载了一个消息传递框架库。在 Eclipse 中，我已将库导入 /libs 文件夹。我右键单击该库，然后将其添加到构建路径中。我知道代码是正确的，但是当我编译它并尝试运行它时，它说它找不到类。奇怪的是，当我在压缩程序中打开 apk 时，该库在编译时并未添加到 apk 中。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:51:15.700

尝试在 Eclipse 的项目资源管理器中右键单击您的项目，然后点击`Properties`. 转到标有标签的选项卡`Java Build Path`并点击`Add Library...`（或者如果它是一个 jar 文件，`Add JARs...`如果你已经将 Jar 添加到你的项目中并且`Add External JARs...`它还没有在项目中）。从那里，浏览要添加的库并将其添加到项目中。重新编译（甚至可能是 Project->Clean）并尝试运行它，看看现在是否添加了库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:00:14.503

> 我右键单击库，然后将其添加到构建路径

从 Eclipse 中 ADT 插件的 R17 版本开始，这不是必需的。此外，如果您这样做，可能会导致问题。

> 有谁知道为什么会这样？

可能是因为您的目录名称中有拼写错误，因此未命名为`libs/`. 通过手动将其添加到您的构建路径，您正在针对它进行编译，但构建工具不会将其添加到 APK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:53:52.683

这个库是一个完整的Android项目的形式吗？然后通过转到该项目的属性，选择 Android 选项卡，然后在下部窗口中找到并选择该库，将其与另一个 Android 项目一起使用。

# java - 在需要 .txt 文件的 html 中嵌入 .jar 文件（java）

> ID：10854339
> 
> 赞同：0
> 
> 时间：2012-06-01T16:47:42.367
> 
> 标签：java, applet, acm-java-libraries

我正在为我的 Java 程序使用 acm 库，并且我想通过 HTML 将我的程序嵌入到我的网站中。通过使用

```
<applet archive="file.jar, acm.jar"
code="main.class"
width=400 height=600 /> 
```

但是发现当嵌入到 HTML 中时，当程序到达它应该加载 .txt 文件的部分时，它会有点吓坏并停止响应。

我隐约记得我的 AP CompSci 老师告诉我们，网络浏览器中的 java 阻止了 .txt 文件的导入，但我可能记错了。下面是我的java代码：

```
public NameSurferDataBase(String filename) {
    nameEntry = new HashMap<String, NameSurferEntry>();
    try {
        BufferedReader rd = new BufferedReader(new FileReader(filename));
        while (true) {
            String line = rd.readLine();
            if (line == null) break;
            NameSurferEntry entry = new NameSurferEntry(line);
            nameEntry.put(entry.getName().toUpperCase(), entry);                
        }
    } catch (IOException ex) {
        throw new ErrorException(ex);
    }
} 
```

因此，我不仅不知道如何在运行之前将 .txt 文件实际添加为要使用的东西，我什至不知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:06:23.570

这是因为在运行小程序时，安全管理器不允许您使用文件系统（除非您专门更改插件设置，这是一个坏主意）。如果您只是想阅读，请将文件放在类路径中，然后使用 ClassLoader.getResourceAsStream(String resource) 来获取输入流。

# apache - 使用 mod_proxy_ajp 时无限重定向？

> ID：10854341
> 
> 赞同：1
> 
> 时间：2012-06-01T16:47:53.123
> 
> 标签：apache, tomcat

我正在尝试从端口 80 的根上下文配置访问以重定向到我的 tomcat 应用程序。我的配置设置为

```
<VirtualHost *:80>
   ServerName localhost
   ErrorLog /var/log/apache2/ajp.error.log
   CustomLog /var/log/apache2/ajp.log combined

   <Proxy *>
     AddDefaultCharset Off
     Order deny,allow
     Allow from all
   </Proxy>

   ProxyPass / ajp://localhost:8009/testApp
   ProxyPassReverse / http://localhost/testApp
</VirtualHost> 
```

这是正确的方法吗？它目前导致无限重定向循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:16:18.440

您的 ProxyPassReverse 配置错误。你要：

```
 ProxyPass        / ajp://localhost:8009/testApp
   ProxyPassReverse / ajp://localhost:8009/testApp 
```

ProxyPass 和 ProxyPassReverse 行应该具有相同的参数。

由于您正在更改应用程序路径，因此您可能会遇到各种其他问题，包括但不限于：

*   路径错误的 cookie
*   使用错误路径的嵌入链接
*   一些使用错误路径将路径放置在自定义 HTTP 标头中的库

通常，如果将 testApp 重命名为 ROOT，生活会容易得多。

# c++ - 为什么 Doxygen 将此方法报告为属性？

> ID：10854344
> 
> 赞同：2
> 
> 时间：2012-06-01T16:48:19.747
> 
> 标签：c++, documentation, doxygen

我有一个头文件，其中包含：

```
class ClassName {
...

////////////////////////////////////////////////////////////////////////////////////////////////////
/// \fn boost::function<int(void *, char *)> ClassName::getFnPtr();
///
/// \brief ...
///
/// \author ...
/// \date ...
///
/// \return A boost function object ...
////////////////////////////////////////////////////////////////////////////////////////////////////

boost::function<int(void *, char *)> getFnPtr();

...
}; 
```

运行 Doxygen 时，`getFnPtr()`报告在“公共属性”而不是“公共成员函数”下。谁能帮我让 Doxygen 把它放在正确的地方？

我是 Doxygen 的新手，但熟悉 Javadoc。我正在使用 Doxygen GUI 1.8.1。

编辑：我认为 Doxygen 对涉及 boost 函数对象的模板化返回类型感到窒息。这篇文章 - [Doxygen 无法解析模板化返回类型](https://stackoverflow.com/questions/5653356/doxygen-cannot-handle-return-value)- 表明 Doxygen 不处理最新的 C++ 更改。哪个版本的 C++ 开始支持 boost 函数对象返回类型？谁能指出我用于提升函数对象返回类型的 Doxygen 的其他示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:18:05.657

尝试使用 typedef。这些方面的东西：

```
typedef boost::function<int(void *, char *)> myfunc_t;
myfunc_t getFnPtr(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:19:28.210

问题是 doxygen 有一些简单的启发式方法来区分函数和函数指针类型的变量。在这种情况下，返回类型的模板参数是触发错误决定的原因。

我将在下一个版本 (>1.8.1) 中更正此问题，同时您可以按照 nm 的建议使用 typedef 的解决方法。相关的错误报告是[https://bugzilla.gnome.org/show_bug.cgi?编号=677315](https://bugzilla.gnome.org/show_bug.cgi?id=677315)

# php - CodeIgniter 分页：不创建首页的链接

> ID：10854347
> 
> 赞同：2
> 
> 时间：2012-06-01T16:48:28.863
> 
> 标签：php, codeigniter, activerecord, pagination

我的分页问题仍然存在；

我只是用简单的东西进行分页：

```
 $config['base_url'] = site_url('admin/index/page/');
        $this->load->database();
        $config['total_rows'] = $this->db->count_all('sms');
        $config['per_page'] = 20;
        $offset = $this->uri->segment(4, 0);
        $this->pagination->initialize($config) 
```

我的视图页面有这个视图分页命令：

```
 <?php echo $this->pagination->create_links(); ?> 
```

超过 20 行后，分页开始分页列表，但 html 输出显示如下：

 **1**  [2](http://www.xxx.com/index.php/admin/index/page/20)  [3](http://www.xxx.com/index.php/admin/index/page/40) 

如所见，第一页没有链接，也没有跳转下一页，第1页没有链接。只是它的强。

我的第二个问题是：我只有 30 条记录，但 CI 分页创建了带有空行的第三页！

我不确定为什么某些类（特别是分页给用户带来这么多麻烦？）如果我需要支付一些费用（可能是隐藏的许可证？）以摆脱麻烦，而不是使用简单的分页类而不会浪费太多时间来搜索问题互联网，我准备好了！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T02:24:11.390

因为这个分页问题，​​我很生气，我正在研究分页库的源代码，我看到了这个 -- var $uri_segment = 3; 分页库的默认值使用第 3 个 uri 段，在您的情况下，在我的情况下，我们想使用第 4 个 uri 段。为了满足我们的需要，更改此代码：

```
 $config['base_url'] = site_url('admin/index/page/');
    $this->load->database();
    $config['total_rows'] = $this->db->count_all('sms');
    $config['per_page'] = 20;
    $offset = $this->uri->segment(4, 0);
    $this->pagination->initialize($config)

   TO

    $config['base_url'] = site_url('admin/index/page/');
    $this->load->database();
    $config['total_rows'] = $this->db->count_all('sms');
    $config['per_page'] = 20;
    $offset = $this->uri->segment(4, 0);

    $config['uri_segment'] = 4;      // add this line to override the default

    $this->pagination->initialize($config) 
```

如果这可以解决您的问题或者问题仍然存在，请在此处回复，以便我可以提供帮助:)

Nwei 这不在分页类文档中。我希望这将被添加到文档中，因为我看到许多开发人员在使用分页类时遇到了困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:03:55.447

如果您熟悉分页的工作原理，那么您应该知道分页不会将链接标签添加到当前页面。所以我不确定你在问什么关于“分页类不会创建 1 页链接”。

另外，我看不到您在分页功能中使用的偏移量。好像你设置了它，但你不使用它。这可能会导致不正确的分页结果，我认为这就是您获得比预期更多的分页链接的原因。

```
 $offset = $this->uri->segment(4, 0);
    $this->pagination->initialize($config); 
```

更改“当前页面”链接标记的一种方法是“自定义“当前页面”链接”

```
$config['cur_tag_open'] = '<a href="#">'; 
```

“当前”链接的开始标签。

```
$config['cur_tag_close'] = '</a>'; 
```

“当前”链接的结束标签。

另一种选择是深入分页类并删除它具有的不添加到当前页面的链接的功能。

确实，如果您在当前页面上，则链接到您已经在其上的同一页面不会增加任何好处，我假设这是当前页面没有链接的原因。如果您转到第 2 页，则第 2 页将被禁用。希望这有点道理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T23:50:58.620

使用段号 4 时，我在分页中也遇到了同样的问题。我通过使用段号 3 解决了它。这也是我的问题，因为我真的需要使用段号 4 但是哦，它有错误。我希望这可以尽快解决。或者如果你现在真的需要解决这个问题，你可以尝试 fork 分页类的源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:04:33.453

不，不需要支付任何费用......CI分页完美运行......你看到这个库[http://codeigniter.com/user_guide/libraries/pagination.html](http://codeigniter.com/user_guide/libraries/pagination.html)

确保您的 `$config['total_rows'] = $this->db->count_all('sms');`此代码工作正确并提供正确的行数，而且我还想建议使用 ..`$config['uri_segment'] = 3;`或`$config['uri_segment'] = 4; depend on your uri`而不是使用 `$offset = $this->uri->segment(4, 0);`

幸好这些改变对你有用....

# mysql - 如何在数据库中组织漫画书位置信息？

> ID：10854349
> 
> 赞同：2
> 
> 时间：2012-06-01T16:48:55.190
> 
> 标签：mysql, database

我正在从事漫画书数据库项目，我需要能够在特定漫画问题中包含各个位置。我必须解决几个问题：

*   地点通常位于其他地点内（“号角日报大楼”在“第 39 街和第二大道的拐角处”在“纽约市”在“纽约”等）
*   虽然位置的层次结构非常标准（Universe->Dimension->Galaxy->System->Planet->Continent->Country->State->City->Street->Building->Room），但并非所有父位置每个位置都必须知道（例如，漫画可能涉及非洲某个未命名国家的命名建筑物）。
*   有一些地方不适合那种漂亮的等级制度，但在某些时候会分支（例如，“野蛮之地”是南极洲的一个巨大丛林，所以虽然它的父级是一个大陆，但它不是一个国家） .

我的主要目标是能够搜索任何位置并获取具有该位置或该位置内任何位置的所有问题。第二个目标是能够在应用程序的管理方面能够自动完成完整的位置（即，我为一个问题键入一个新建筑物并指定它在纽约市，它会拉出所有“纽约市“实例——是的，数据库中不止一个:P——让我选择Earth-616中的一个或Earth-1610中的一个，或者我可以在不同的父位置下添加一个新的纽约市） . 我能做的所有前端工作，并在时机成熟时弄清楚，我只是不确定此时的数据库设置。

任何帮助，将不胜感激！

**更新：**

在与几个同行进行了多次头脑风暴之后，我想我想出了一个比建议的嵌套模型更简单的解决方案。

位置表如下所示：

*   ID
*   姓名
*   类型（前面提到的类别的枚举列表，包括“其他”选项）
*   Uni_ID（父 Universe 的 ID，如果不适用，则为 null）
*   Dim_ID（父维度的 ID，如果不适用，则为空）
*   Gal_ID（父 Galaxy 的 ID，如果不适用，则为 null）

...等等通过所有类别...

*   Bui_ID（父建筑物的ID，如果不适用则为空）

因此，虽然有很多字段，但搜索和自动完成工作真的很容易。任何给定位置的所有父级都在行中，任何位置的所有子级都可以通过单个查询找到，并且一旦为新位置定义了类型，自动完成就可以轻松工作。在这一点上，我倾向于这种方法而不是嵌套模型，除非有人能指出我没有看到的这种设置的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:08:10.380

对于分层数据，我总是更喜欢使用嵌套集模型而不是父->子（邻接）模型。[在这里](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)寻找一个很好的解释和示例查询。这是一个更复杂的数据模型，但它使查询和搜索数据变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:13:57.890

我真的很喜欢@King Isaac 之前关于嵌套集合模型的链接。我对链接所说的唯一论点是可扩展性。如果你定义你的 lft 和 rgt 边界，你必须知道你有多少元素，或者你必须设置任意大的数字，只是希望你永远不会达到它。我不知道这个数据库会有多大以及您将拥有多少条目，但最好实现一个不需要重新索引等的模型。这是我的修改版本

```
create table #locations (id varchar(100),
                         name varchar(300),
                         descriptn varchar(500),
                         depthLevelId int)

create table #depthLevel(id int,
                         levelName varchar(300))

                     ***Id level structuring*** 

                            10--level 1
              100                               101-- level 2           
     1000            1001               1010             1011       --level 3
 10000   10001   10010   10011     10100    10101    10110    10111     --level 4 
```

从本质上讲，这使得查询变得超级简单。重要的部分是子 id 由父 id 加上你想给它的任何随机 id 组成。它甚至不必是连续的，只要是唯一的。你想要宇宙中的一切吗？

```
SELECT * 
FROM #locations
WHERE id like '10%' 
```

你想要第四层以下的东西吗？

```
SELECT * 
FROM #locations 
WHERE id like '10000%' 
```

当您下降这么多级别时，id 可能会有点长，但是当您编写简单的查询时，这真的很重要吗？而且由于它只是一个字符串，因此您可以拥有非常大的可扩展性，而无需重新索引。

# ember.js - Ember.CollectionView 应该尊重 layoutName 吗？

> ID：10854351
> 
> 赞同：1
> 
> 时间：2012-06-01T16:48:57.707
> 
> 标签：ember.js

编辑：问题被撤销。CollectionViews 作为 ContentViews 的子类，不尊重布局，令人沮丧。

CollectionViews 似乎不适用于布局。例如：

测试用例：http: [//jsfiddle.net/73sWp/](http://jsfiddle.net/73sWp/)

模板：

```
<script type="text/x-handlebars" data-template-name="layoutTest">
    <div class="my-collection">
        <h1>{{title}}</h1>
        {{yield}}
    </div>
</script>       

<script type="text/x-handlebars" data-template-name="layoutTest-child">
    <div class="an-item">
        Hi there.
    </div>
</script> 
```

脚本：

```
var TestView = Ember.CollectionView.extend({
    layoutName: "layoutTest",
    title: "My Collection",
    childViews: [
        Ember.View.create({
            templateName: 'layoutTest-child'
        }),
        Ember.View.create({
            templateName: 'layoutTest-child'
        })
    ]
});
$(function () {
    TestView.create().appendTo(document.body);
}); 
```

预期的：

```
<div class="my-collection">
    <h1>My Collection</h1>
    <div class="an-item">
        Hi there.
    </div>
    <div class="an-item">
        Hi there.
    </div>
</div> 
```

实际的：

```
<div class="an-item">
    Hi there.
</div>
<div class="an-item">
    Hi there.
</div> 
```

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T23:27:08.873

Layouts are template based and CollectionViews have been intended to be used without templates.

This issue has been discussed a bit and I think the consensus is that we'd like to support using layouts with ContainerViews.

A pull request has been submitted that adds this functionality: [https://github.com/emberjs/ember.js/pull/928](https://github.com/emberjs/ember.js/pull/928)

# css - 为什么这个 CSS 在 IE8 中不起作用？

> ID：10854352
> 
> 赞同：0
> 
> 时间：2012-06-01T16:48:59.173
> 
> 标签：css, internet-explorer-8

这在 Chrome 中运行良好，但在 IE8 中不行。它应该只给 div 一个带有圆角的浅蓝色背景和一个阴影：

```
.ppanel
{
    background-color: rgba(0, 0, 255, .2);
    color: black;
    padding: 10px 10px 10px 40px;
    margin: 10px 20px 20px 20px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 5px 5px 5px black;
    -webkit-box-shadow: 5px 5px 5px black;
    box-shadow: 5px 5px 5px black;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:54:32.503

Internet Explorer 8 默认不支持圆角。但是，您可以使用[CSS3 PIE](http://css3pie.com/)之类的工具获得所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:54:49.947

Internet Explorer`border-radius`直到 IE9 才支持。您可以在此处找到详细信息：http: [//davidwalsh.name/css-rounded-corners](http://davidwalsh.name/css-rounded-corners)。

# c++ - 私有转换函数导致“模糊默认类型转换”错误（c++）

> ID：10854354
> 
> 赞同：5
> 
> 时间：2012-06-01T16:49:05.657
> 
> 标签：c++, g++, type-conversion

首先，一个演示问题的小例子：

```
struct Bar {
    enum Baz {aa, bb, cc};
    Baz baz_;

    operator Baz() const { return baz_; }
    private:
        template<typename T> operator T() const;
};

int main() {
    Bar bar;
    switch (bar) {
        case Bar::aa:
            break;
        case Bar::bb:
            break;
        case Bar::cc:
            break;
        default:
            break;
    }
    return 0;
} 
```

使用 g++ 4.7.0 编译此代码会出现以下错误：

```
foo.cpp: In function ‘int main()’:
foo.cpp:12:16: error: ambiguous default type conversion from ‘Bar’
foo.cpp:12:16: error:   candidate conversions include ‘template<class T> Bar::operator T() const’ 
```

我的理解是，由于 struct 对象被“打开”，编译器将尝试找到一个转换为整数或枚举类型的函数。我明确地为 Bar::Baz 枚举类型提供了一个公共转换函数，并希望它使用它。

令我困惑的部分是编译器也找到了*私有*转换函数，然后无法决定使用哪个。为什么还要考虑私有函数？如果我添加一个显式转换，比如`switch((int)bar)`，那么*只有*私有转换函数匹配并且编译器正确地抱怨它不能使用它，因为它是私有的。那么，既然不能在这种情况下使用私有转换功能，为什么两者之间的选择不明确呢？

有趣的是，我相信（虽然我不是 100% 确定）这段代码在 g++ 4.6 上编译没有错误。

**编辑：**正如 James McNellis 在评论中指出的那样，私有转换函数被模板化的事实也与此相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T16:55:21.100

访问控制出现*在*重载解决之后。这在标准 §13.3 中有规定

> 重载解析是一种机制，用于在给定作为调用参数的表达式列表和可以根据调用上下文调用的一组候选函数的情况下选择要调用的最佳函数。最佳函数的选择标准是参数的数量、参数与候选函数参数类型的匹配程度、对象与隐含对象参数的匹配程度（对于非静态成员函数）以及候选函数。[注意：重载决议选择的函数不能保证适合上下文。其他限制，例如函数的可访问性，可能使其在调用上下文中的使用格式错误。]

所以重载决议可以选择一个不适合给定上下文的函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T16:54:33.090

```
switch(expression) 
```

表达式必须是整数类型或可以明确转换为整数类型的类类型。

# html - 如何使用黄瓜测试 HTML5 页面中的错误条件？

> ID：10854357
> 
> 赞同：20
> 
> 时间：2012-06-01T16:49:19.727
> 
> 标签：html, cucumber, bdd

我正在使用 Cucumber 测试 Web 应用程序的行为（在后台使用 Selenium 和 Watir）。我的网络应用程序有 HTML5 页面并使用新的“必需”属性。如果我有一个包含必填字段的数据输入表单，并且我提交了该字段为空白的表单，我想验证 Web 应用程序是否正确响应错误条件。

不幸的是，在使用 HTML5 Web 浏览器进行测试时，Cucumber 似乎无法通过 Web 驱动程序访问字段验证失败时弹出的错误消息。在任何情况下，都不会提交表单，页面仍保留在数据输入表单上。

另一方面，当测试无头或使用不兼容 HTML5 的浏览器时，表单可能会提交，从而允许我的 Web 应用程序捕获错误并将用户发送回带有错误消息的表单页面。

在第二种情况下，我可以轻松测试错误消息的存在，因为它是页面中交付的 HTML 的一部分。我的问题是我看不到如何编写一个测试场景来验证无头浏览器和 HTML5 浏览器情况的错误情况。

在 Selenium 和 Watir Web 驱动程序的当前状态下，这可能是不可能的。但是，如果有人知道如何验证 HTML5“必需”错误弹出消息，那将是一个很大的帮助。

### 编辑 2012-06-02：

这是一个包含 HTML5 浏览器警告示例的[示例页面。](http://railsdotnext.com/stackoverflow/required.html)

有一个必需的文本和选择，一个显示内部提示文本的文本框，以及一个带有正则表达式输入验证的文本框。该页面没有任何 CSS 或 javascript 来混淆问题，它只是普通的 HTML5。请参阅[w3schools 页面中有关 HTML5 字段属性](http://www.w3schools.com/html5/html5_form_attributes.asp)的完整分类。假设表单成功，表单提交给一个简单的 CGI 脚本，该脚本只是回显表单输入。提交失败将保留在示例表单页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:50:34.830

我以前没有使用过 HTML5`required`属性。但从外观上看，该`required`属性只是提醒浏览器必须填写该表单字段（即 DOM 不会更改）。

在我看来，仅断言该`required`属性存在于相应表单字段的 HTML 中是合理的。该测试应该通过 HTML5 浏览器和非 HTML5 浏览器。

在我看来，试图断言更多的东西就像你在测试浏览器的功能一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:23:04.647

除了验证创建的 HTML 是否正确以启用浏览器验证之外，我不确定你能做多少并不等于测试浏览器而不是你的代码。

使用 watir 或 watir-webdriver 您可以使用 .type 来验证输入是否设置了正确的类型（例如电子邮件），这是控制浏览器验证的一件事。另一个是 required 属性的存在，这有点小技巧 .attribute_value("required") 可能会起作用，但通常会返回属性的值，因此不确定该方法将如何响应布尔属性。其他选择可能是查看 .attribute_list 和

Watir 在这里添加 .required 似乎也是一个很好的理由？输入元素的方法，可以让您轻松检查该属性是否已设置。所以我要求该功能[https://github.com/watir/watir-webdriver/issues/189](https://github.com/watir/watir-webdriver/issues/189)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-30T13:18:30.137

一种解决方案是不使用 Cucumber 来测试错误行为，而是测试您是否已配置字段。

所以用 Cuke 的话，你可能会有类似的东西

```
Given I am filling in my form
Then I should see that my name is required 
```

然后在名称字段的 html 标记上编写一些查找所需选项的内容。

不仅如此，测试的是浏览器而不是您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-25T13:21:09.867

您应该使用 CSS 选择器来定位特定字段并查找错误标识符。如果它可见或不可见。需要有详细的步骤定义。

# vba - FileSystemObject 代码已开始抛出错误

> ID：10854358
> 
> 赞同：3
> 
> 时间：2012-06-01T16:49:25.273
> 
> 标签：vba, vb6, excel, filesystemobject

不知道为什么，但以下代码已开始引发未知错误。当宏运行时 Excel 停止响应。

*   为什么会出现这个错误？
*   具有相同功能的替代路线是什么？

此代码位于 Windows 7 计算机上的 Excel 2010 xlsm 文件中。

```
 Sub CopyFolderToCasinoDirectory()

        'reference Microsoft Scripting Runtime
        On Error Resume Next

        Dim fso As Scripting.FileSystemObject
        Set fso = New Scripting.FileSystemObject
        fso.CopyFolder _
              "\\xxxfileserve\department$\DBA\Opers\All Operators\yyy", _
              "\\xxxfileserve\department$\DBA\Cas\yyy", _
              True

        On Error GoTo 0
        Set fso = Nothing

    End Sub 
```

好的-我已经更改了路径，以便它尝试移动更少的文件-它犹豫不决，但最终还是通过了。我怀疑上述失败是因为指定目录中的文件太多？目前有 753 个文件 - 可能太多了？

[RonDeBruin](http://www.rondebruin.nl/folder.htm)给了我很多关于如何测试或改变逻辑的想法。一种可能性可能是首先在目标文件夹上使用 DeleteFolder，然后在目标文件夹上使用 CopyFolder？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:25:57.753

抱歉这么晚才回复。我无法获取网络目录，我想在发布代码之前对其进行测试:)

尝试这个。运行它`Sub Sample()`是否仍然挂起？您还将在 Windows 对话框中看到正在传输的文件。

```
Private Declare Function SHFileOperation _
Lib "shell32.dll" Alias "SHFileOperationA" _
(lpFileOp As SHFILEOPSTRUCT) As Long

Private Type SHFILEOPSTRUCT
    hWnd As Long
    wFunc As Long
    pFrom As String
    pTo As String
    fFlags As Integer
    fAborted As Boolean
    hNameMaps As Long
    sProgress As String
End Type

Private Const FO_COPY = &H2

Sub Sample()
    Dim path1 As String, path2 As String

    path1 = "\\xxxfileserve\department$\DBA\Opers\All Operators\yyy"
    path2 = "\\xxxfileserve\department$\DBA\Opers\All Operators\yyy"

    If CopyFolder(path1, path2) Then
        MsgBox "Copied"
    Else
        MsgBox "Not copied"
    End If
End Sub

Private Function CopyFolder(ByVal sFrom As String, _
ByVal sTo As String) As Boolean
    Dim SHFileOp As SHFILEOPSTRUCT
    On Error GoTo Whoa
    CopyFolder = False
    With SHFileOp
        .wFunc = FO_COPY
        .pFrom = sFrom
        .pTo = sTo
    End With
    SHFileOperation SHFileOp
    CopyFolder = True
    Exit Function
Whoa:
    MsgBox "Following error occurred while copying folder " & sFrom & vbCrLf & _
    Err.Description, vbExclamation, "Error message"
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:34:20.873

## 关于方法有几点`fso.CopyFolder`：

*   *如果目标不存在，则复制源文件夹及其所有内容。这是通常的情况。*
*   *如果目标是现有文件，则会发生错误。*
*   *如果destination 是一个目录，则会尝试复制该文件夹及其所有内容。*
*   *如果源中包含的文件已存在于目标中，则如果覆盖为 False，则会发生错误。否则，它将尝试将文件复制到现有文件上。*
*   *如果目标是只读目录，则如果尝试将现有只读文件复制到该目录并且覆盖为 False，则会发生错误。*

***确保没有任何这些成为您的`sub`.***

***但是像这样用另一种方式测试它***

```
fso.CopyFolder _
              "\\xxxfileserve\department$\DBA\Opers\All Operators\yyy\*", _
              "\\xxxfileserve\department$\DBA\Cas\yyy", _
              True 
```

* * *

希望这可以帮助。

# sharepoint-2010 - 面向外部客户的 Sharepoint 站点

> ID：10854362
> 
> 赞同：4
> 
> 时间：2012-06-01T16:49:35.607
> 
> 标签：sharepoint-2010

我有一个 SP 网站，员工可以在其中提交报告。提交一份报告，公司信息作为元数据附加在共享点库中。

对于一家公司，在我们的 AD 中有一个单独登录的客户，这些客户都属于一个单独的用户组。

我想创建一个单独的网站，让他们的客户可以登录并阅读他们的报告

我的第一个问题是在站点之间共享一个库，以便客户可以访问在我们内部站点中提交的报告。

第二个问题是在公司和客户登录之间创建连接，以便我可以过滤报告，以便客户只能看到他们的报告。

你会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:37:36.557

根据我对这种情况的理解，我将与客户共享报告作为内容部署练习。不确定您是否想要一个站点供所有公司的所有客户登录，或者您是否想要为每个公司创建一个站点。内部列表上的事件接收器或工作流的定制开发将在上传（并且可能 - 批准）后处理报告的“发布”（即，将文档复制到客户端可访问列表）。

如果有一个公共站点，则需要根据公司元数据考虑项目级别权限设置。如果您为每家公司都有一个站点，那么安全性应该会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:58:43.430

如果您的目标只是共享报告，那么使用单独的站点进行客户登录或每个客户使用站点是恕我直言，这是巨大的矫枉过正，几乎没用。

解决您的问题非常简单：一个站点为每个客户提供单独的文档库。1 个客户 = 1 个站点和 1 个客户 = 1 个库之间没有太大区别，除了简单的场景外，我发现在单个站点上维护多个库比在基本上只有一个库的情况下维护多个站点要容易得多。但是，如果您计划与客户（现在或将来）进行更多的互动和“共享”，则可以选择为每个客户提供单独的站点。

脚步：

1.  在站点级别定义自定义文档内容类型，包含您的报告所需的所有元数据
2.  使用这种新内容类型为每个客户创建文档库
3.  定义文档库级别的权限 - 每个客户只能访问一个指定的库（需要在现场具有读取权限）

您的员工需要将报告上传到客户库，以便客户可以看到。如果权限设置正确，那么客户只能看到指定的图书馆，您可以轻松设置管理员（可以查看全部）和超级用户（可以查看多个图书馆/客户）。

通过使用自定义工作流和/或接收器，将所有报告放在单个站点中将简化其他业务逻辑的开发过程。管理员或超级用户的搜索和聚合也容易得多。

# git - 源代码行的 git 历史记录

> ID：10854370
> 
> 赞同：9
> 
> 时间：2012-06-01T16:50:37.010
> 
> 标签：git, version-control

我一直在研究 git diff 和 git log 选项，以找到一种方法来跟踪 repo 中给定的源代码行历史记录（分支、作者、提交消息等），但我没有看到类似的东西。

有没有第三方 git 工具可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:29:12.650

你要

```
git blame 
```

如果代码行来自历史上某个时间点的另一个文件并且您想要跟踪它，您可以

```
git blame -M 
```

# sql - rails 3 sql 选择 current_user.comments (@comment.article_id = @article.id)

> ID：10854372
> 
> 赞同：0
> 
> 时间：2012-06-01T16:50:54.063
> 
> 标签：sql, ruby-on-rails-3

我用谷歌搜索了我的问题，但似乎我不知道我在寻找什么。
我基本上想要的是选择 current_user 或其他用户的评论。它们应该显示在文章下方作为可能的特征，但重要的是只显示属于当前文章的用户评论。现在，当我调用 current_user.comments 时，会显示所有用户的评论，但我只想要那些评论的 article_id 与当前文章匹配的评论。
这些事情在 Rails 中是如何完成的？
任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:00:34.197

```
current_user.comments.where(:article_id => params[:article_id]) 
```

# php - PHP，异常

> ID：10854376
> 
> 赞同：0
> 
> 时间：2012-06-01T16:51:14.233
> 
> 标签：php, exception-handling

我正在研究 W3schools 的例外情况 在此[链接](http://www.w3schools.com/php/php_exception.asp)上，在标题之前的链接内：

“重新抛出异常”

有一句话说：

> “如果抛出的异常属于 customException 类并且没有 customException 捕获，只有基本异常捕获，则异常将在那里处理。”

如果有人可以给我一个这句话的例子，我将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T16:54:04.483

基本上他们是说，如果您没有设置 catch 语句来捕获`customException`它，它将落入一般的`Exception`catch 语句。

在此示例中，第一个 catch 语句将捕获`customException`，因为它明确设计为这样做。

```
try {
    // fail
    throw new customException();
}
catch (customException $e) {
    // catch custom exception
}
catch (Exception $e) {
    // catch any uncaught exceptions
} 
```

在下一个示例中，因为缺少通用`Exception`catch 块的子句将改为捕获它：

```
try {
    // fail
    throw new customException();
}
catch (Exception $e) {
    // catch any uncaught exceptions
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T16:54:24.270

查看PHP 手册[此页面上的示例 #2](http://uk.php.net/manual/en/language.exceptions.extending.php)

w3schools 不是学习 PHP 的最佳场所，它以错误闻名

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T16:55:37.453

假设您有一个自定义异常定义为

`class CustomException extends Exception`.

现在在您的代码中的某处：

```
try
  {
  // do something that throws a CustomException
  }

catch(Exception $e) // you are only catching Exception not CustomException,
// because there isn't a specific catch block for CustomException, and
// because Exception is a supertype of CustomException, the exception will 
// still be caught here.
  {
  echo 'Message: ' .$e->getMessage();
  } 
```

那么它的意思是，因为CustomException是Exception的子类，所以只要你在没有针对更具体的子类类型的catch块的情况下捕获超类的Exception类型，它仍然会被捕获

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T16:55:37.683

示例中有两个`catch`块。仅第一个捕获`customException`；下一个抓住任何`Exception`。如果第一个块捕获任何东西，你永远不会到达第二个块。但是由于 a`customException`也是 a 的一个例子，`Exception`如果我们没有第一个`catch`块，它就会被捕获。这样，第一个 catch 就会捕获它，并且执行永远不会到达第二个。

同时，阅读我在上面发布的链接，以及为什么 w3schools 是一个坏主意。

# mysql - MAC OS X lion中的Mysql连接错误

> ID：10854382
> 
> 赞同：0
> 
> 时间：2012-06-01T16:51:42.533
> 
> 标签：mysql, installation

我已经尝试了之前在 stackoverflow 中描述的所有访问 mysql 的解决方案。当我输入mysql并且终端要求输入密码时，当我输入密码并按回车时，它说`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)`

任何想法，这个问题让我发疯。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:59:53.657

确保首先启动 mysql 服务器。命令是`sudo mysqld_safe`。还可以尝试查看 my.cnf（可能在 中`/etc/`）并搜索“socket”。您可能需要将套接字位置更改为 /tmp/mysql.sock。

# java - Take EditText with decimals value for preforming mathematics

> ID：10854391
> 
> 赞同：0
> 
> 时间：2012-06-01T16:52:39.537
> 
> 标签：java, android

All- I have an EditText field where the user enters a currency value (eg. "120.45"). I need to take that value and use it in an equation. The problem is, the decimal point gets ignored so instead of multiplying 120.45 by 2 it multiples 12,045 by 2\. Is there any way to make the equation see this value as "120.45". Here is my XML:

```
<EditText android:id="@+id/edit_bill"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"               
    android:layout_toRightOf="@id/view_dollar_sign" 
    android:layout_alignBaseline="@id/view_dollar_sign" 
    android:padding="5dp"
    android:singleLine="true"
    android:hint="@string/edit_bill"
    android:digits="0123456789."
    android:maxLength="6" 
    android:gravity="right"
    android:layout_alignBottom="@id/view_dollar_sign"
     /> 
```

Here is my code:

```
EditText text = (EditText)findViewById(R.id.edit_bill);             
    String value = text.getText().toString();       
    if(!value.contains("."))
        value = "."+value;
    float bill = Float.parseFloat(value); 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:57:49.857

You can parse your strings to floats or doubles first, e.g.

```
 x = Double.parseDouble(editTextName.getText().toString()); 
```

Then perform operations as necessary!

Afterwards you could could change it back to a output TextView like this:

```
 answerTextView.setText("" + x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:57:58.910

**remove if condition from yourcode**

```
EditText text = (EditText)findViewById(R.id.edit_bill);             
    String value = text.getText().toString();       
    // if(!value.contains("."))   <---REMOVE THESE LINES
       //  value = "."+value;    <---REMOVE THESE LINES
    float bill = Float.parseFloat(value); 
```

# eclipse - 尝试在 Eclipse 中创建 Web 服务客户端

> ID：10854392
> 
> 赞同：0
> 
> 时间：2012-06-01T16:52:50.637
> 
> 标签：eclipse, service, web

我遵循了在 Eclipse 中创建 Web 服务客户端的小教程：

[http://px.pats.no/px/Eclipse_tutorial.html](http://px.pats.no/px/Eclipse_tutorial.html)

但是，我 relaized 我没有以下我认为用于访问 Web 服务的类。我收到一条错误消息。

导入 org.csapi.www.schema.parlayx.common.v2_1.PolicyException；
导入 org.csapi.www.schema.parlayx.terminal_location.v2_2.LocationInfo；
导入 org.csapi.www.wsdl.parlayx.terminal_location.v3_0.service.TerminalLocation；
导入 org.csapi.www.wsdl.parlayx.terminal_location.v3_0.service.TerminalLocationServiceLocator；

我真的很感激任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:34:26.280

我发现[本教程](http://www.craigsprogramming.com/2011/03/tutorial-consume-any-web-service-using.html)很有用。它使用 Axis 作为客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:56:44.627

您需要在您的应用程序中添加 2 罐 parlays。
如果您在教程中提到它，您可能已经拥有它们，或者您可以从以下网址下载它：
[http ://www.findjar.com/index.x;jsessionid=96A5E1162D798BCF3CB77305955A359E?query=parlayx](http://www.findjar.com/index.x;jsessionid=96A5E1162D798BCF3CB77305955A359E?query=parlayx)

或 [http://www.parlayx.com/][2]

[2]： http: [//www.parlayx.com/](http://www.parlayx.com/)
请注意 jar 的版本，因为包/类名称可能不同，您必须相应地更改它们

# actionscript-3 - 开始使用 Stage3D 是否为时过早？

> ID：10854394
> 
> 赞同：2
> 
> 时间：2012-06-01T16:52:57.133
> 
> 标签：actionscript-3, air, stage3d

我开始在 AS3 中编写一个新应用程序，我希望获得移动和桌面支持。我查看了几个 Stage3D 框架，例如 Starling，我知道支持硬件加速的移动设备和桌面具有巨大的性能优势。我担心的是那些没有能够使用 Stage3D 的显卡的台式机。我知道有软件回退，但我听说性能无论如何都会受到影响，而且应用程序实际上运行得更好，而无需在不支持硬件加速的桌面上使用 Stage3D。我倾向于 Stage3D，但我想知道是否还有其他需要记住的事情。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:16:41.630

使用的软件回退总是比原生 Flash 绘图 API 更快。我建议如果该框架具有您需要的所有功能，那么没有理由不使用它。如果您将 Starling 版本与原始版本进行比较，您肯定会看到性能提升。他们网站上的演示证明了它是多么流畅，即使使用软件后备也是如此。

如果缺少你需要的框架中没有的功能那么公平，这是一个艰难的决定，但你必须平衡利弊。但就性能而言，Stage3D 绝对是要走的路。

# jquery - jquery添加的onclick函数被调用了两次

> ID：10854397
> 
> 赞同：0
> 
> 时间：2012-06-01T16:53:22.097
> 
> 标签：jquery, onclick

```
var filters_used = new Array();
$('#filter-text').keyup(function(k) {
    $('#error').html('');
    if (k.keyCode == 13) {
        $('#add-filter').click();
    }
});

function reg_remove() {
    $('.remove-filter').click(function() {
        console.debug("remove-filter.click()");
        var col = $(this).children('td:nth-child(2)').html();
        var index = $.inArray(col, filters_used);
        filters_used.splice(index, 1);
        $(this).parents('.filter').remove();
        return false;
    });
}

function check_value() {
    var flag = true;
    var value = $('#filter-text').val();
    var col = $('#filter-type').val();
    var reg = /[^0-9a-zA-Z\s\-]/;
    if (value.match(reg) || value.trim() === "") {
        flag = false;
        $('#error').html('Only letters, numbers, spaces, and dashes (-) are allowed.');
    } else if ($.inArray(col, filters_used) >= 0) {
        flag = false;
        $('#error').html('That column is already being filtered.');
    }
    return flag;
}
$('#add-filter').click(function() {
    if (check_value()) {
        var value = $('#filter-text').val();
        var col = $('#filter-type').val();
        $('#filter-text').val('');
        appendstr = '<tr class="filter"><td>' + value + '</td><td>' + col + '</td><td>' + '<a href="" class="remove-filter">Remove</a></td></tr>';
        $('#filter-form').after(appendstr);
        filters_used.push(col);
        reg_remove();
        //queryDB();
    }
});

function get_filters() {

}? 
```

[链接到包含我的代码的小提琴我](http://jsfiddle.net/nosepickle/eZ5SA/21)
试图让用户创建一个过滤器列表，本质上。添加它们似乎工作正常，但是 remove() 函数仅在只有一个过滤器项时才能正常工作。如果您创建第一个，然后单击底部项目上的删除，该项目的 onclick() 函数将被调用两次，我终生无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:56:09.723

看不到小提琴正在运行，但您可能想从代码中更改

```
$('#add-filter').click(function() { 
```

到

```
$('#add-filter').click(function(e) {
    e.preventDefault() 
```

（与其他点击相同）

编辑：哦，现在我可以看到它正在运行。在我看来，实际问题是，当您添加“删除”链接时，您会重新绑定 click for .remove-filter （包括已经创建的链接）。相反，您只能使用`.on`一次，它适用于您拥有的所有元素以及您创建的任何新元素。就像是...

```
$('table').on("click", ".remove-filter", function() {
... 
```

这样做一次`document.ready`，应该这样做（在添加“删除”链接后删除对 reg_remove 的调用）

PD`.on`适用于 jquery 1.7 及更高版本，如果您使用早期版本，您将使用`.live`or`.delegate`来实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:08:26.713

是的，将框架更改为 jquery 以使您的小提琴工作..

发生的事情是你在每个条目上调用 .remove ，当你有多个删除按钮时，它会为每个创建的按钮调用 click （每次创建一个新的，你添加一个新的 click 事件到 .删除选择器...您需要这些是固有的。在创建时，添加一个仅记录该记录的匿名函数调用，您将不再遇到此问题

当您有 3 个删除按钮时，它会被调用 3 次，2 个按钮，两次，因为在每次添加时，您都会将另一个单击处理程序添加到列表中。

# core-data - ARC 中的 CoreData 模型对象使用保留

> ID：10854399
> 
> 赞同：10
> 
> 时间：2012-06-01T16:53:26.027
> 
> 标签：core-data, automatic-ref-counting

当我在 ARC 模式下在 CoreData 中为我的实体创建模型对象时，它会改为生成保留或强保留。那么保留工作并在 ARC 模式下编译吗？我认为在 ARC 模式下我们不能使用 release、autorelease 和 retain 关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:56:28.623

请查看此答案：[https ://stackoverflow.com/a/10036821/662605](https://stackoverflow.com/a/10036821/662605)

它的要点是，如果你是你`@synthesize`的属性，那么引擎盖下生成的代码将依赖于`retain`类型（`retain`, `assign`, `copy`）。

生成的托管对象子类使用`@dynamic`not `@synthesize`，所有这些东西都在为你神奇地发生，所以实际上，虽然它令人困惑，`retain`但似乎没有使用关键字，因此 ARC 没有抱怨......我很确定那是它。

尽管我确实尝试交换实现以使用`@synthesize`并且仍然没有出错，但我认为我们可以通过链接上的答案找到一些东西

任何其他见解都会很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T02:04:32.083

你的意思是它会生成这样的`@property`声明吗？

```
@property (nonatomic, retain) MyObject *object; 
```

`retain`property 属性表示`strong`在 ARC 下。

[4.1.1。财产声明](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)

# php - 在 PHP 中过滤字符串上的单词

> ID：10854401
> 
> 赞同：2
> 
> 时间：2012-06-01T16:53:30.490
> 
> 标签：php, string, preg-replace

我有一个字符串，其中每个单词的所有开头都大写。现在我想过滤它，如果它可以检测到单词链接“as, the, of, in, etc”，它将被转换为小写。我有一个替换并将其转换为小写的代码，但仅适用于 1 个单词，如下所示：

```
$str = "This Is A Sample String Of Hello World";
$str = preg_replace('/\bOf\b/', 'of', $str);

output: This Is A Sample String of Hello World 
```

所以我想要的是过滤其他单词，例如像“is, a”这样的字符串。为每个要过滤的单词重复 preg_replace 很奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:02:01.147

由于您知道确切的单词和格式，因此您应该使用[str_replace](http://us.php.net/str_replace)而不是 preg_replace；它要快得多。

```
$text = str_replace(array('Is','Of','A'),array('is','of','a'),$text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T16:55:03.227

使用[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$str = "This Is A Sample String Of Hello World";
$str = ucfirst(preg_replace_callback(
       '/\b(Of|Is|A)\b/',
       create_function(
           '$matches',
           'return strtolower($matches[0]);'
       ),
       $str
   ));
echo $str; 
```

[显示“这是 Hello World 的示例字符串”。](http://codepad.org/uqamuPiA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:59:05.853

尝试这个：

```
$words = array('Of', 'Is', 'A', 'The');  // Add more words here

echo preg_replace_callback('/\b('.implode('|', $words).')\b/', function($m) {
    return strtolower($m[0]);
}, $str);

// This is a Sample String of Hello World 
```

# ssrs-2008 - 根据另一个参数填充一个参数

> ID：10854404
> 
> 赞同：4
> 
> 时间：2012-06-01T16:53:38.057
> 
> 标签：ssrs-2008, reporting-services

我是 SSRS 的新手，所以如果这个问题太简单了，我深表歉意。

我有两个数据集：

*   帐户（AccountId、AccountName、AccountGroupId）
*   ChildAccounts (ChildAccountId, ChildAccountName)

这个想法是用户从 AccountName 组合框中选择一个帐户，然后使用来自所选 AccountName 的 AccountGroupId 填充 ChildAccounts 数据集（和组合框）。

所以我有参数：

*   带有设置的@AccountId 参数：可用值/从查询中获取值/数据集：帐户，值字段：AccountId，标签字段：AccountName。
*   @AccountGroupId 设置：默认值/从查询中获取值/数据集：帐户，值字段：AccountGroupId。

然后应使用 @AccountId 和 @AccountGroupId 作为存储过程的参数填充 ChildAccounts 数据集。但是，@AccountId 似乎已正确传递，但 @AccountGroupId 似乎只是使用 Accounts 数据集中的 AccountGroupId 的第一个值，而不是所选 AccountName 的正确值。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:04:31.160

Relatively trivial but what you want to do is use the variable for the Accounts parameter in your dataset for your second parameter (set under available values). In this case it should be @. So, for example, a parameter named accounts will define a variable called @accounts.

Just make this second dataset (for your other parameters available values) something similar to:

```
select  AccountGroupID
from    Accounts
where   AccountName = @accounts 
```

Any questions let me know :)

# css - 导入与链接方法对包含 css 文件的重要性是什么？

> ID：10854405
> 
> 赞同：-1
> 
> 时间：2012-06-01T16:53:38.713
> 
> 标签：css

添加的问题

Q.1-Import VS Link Method to include css file有什么区别？

Q.2-导入 VS 链接方法以包含 css 文件的优点/缺点是什么？

Q.3-通常首选哪一个，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:58:50.830

1.  该`link`标记用于从 HTML 引用外部样式表。该`import`关键字用于从 CSS 中引用样式表。

2.  使用`link`标签的好处是当 CSS 引用被加载时，它们是非阻塞的。`import`将导致一次加载一个 CSS - 这可能会影响页面加载性能。

3.  由于上述原因，`link`它非常受欢迎`import`。

[Steve Souders 的这篇文章](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)总结了您所有三个问题的答案，以及您可能遇到的任何其他疑问。

# java - 由于未解决的依赖关系，Netbeans 构建失败，而 mvn install 工作正常

> ID：10854406
> 
> 赞同：2
> 
> 时间：2012-06-01T16:53:39.460
> 
> 标签：java, maven, netbeans, build, dependencies

当我尝试使用 Netbeans 7.1.2 构建/清理和构建/运行我的项目时，我总是遇到以下错误。

当我从命令行运行 mvn install 时，它工作正常。当我从本地 Maven 存储库中删除所有文件时，第一次出现该错误。

有人知道如何解决这个问题吗？

> 无法在项目实体上执行目标：无法解析项目 pl.zsk.samples:Entities:jar:1.2-SNAPSHOT 的依赖项：无法收集 [junit:junit:jar:4.10 (test)、org.apache.derby 的依赖项:derby:jar:10.8.2.2 (测试), org.apache.derby:derbyclient:jar:10.8.2.2 (测试), org.dbunit:dbunit:jar:2.4.8 (测试), org.slf4j:slf4j- jdk14:jar:1.6.4 (测试), org.eclipse.persistence:javax.persistence:jar:2.0.3 (提供), org.eclipse.persistence:eclipselink:jar:2.3.2 (测试), pl.zsk .samples:Exceptions:jar:1.2-SNAPSHOT (test), org.apache.commons:commons-lang3:jar:3.1 (provided)]: 无法读取 pl.zsk.samples:Exceptions:jar:1.2- 的工件描述符快照：未能在[http://repo1.maven.org/maven2中找到 pl.zsk.samples:ProjektBazowy:pom:1.2012-SNAPSHOT](http://repo1.maven.org/maven2)已缓存在本地存储库中，直到 Maven2 的更新间隔已过或强制更新后才会重新尝试解析 -> [帮助 1]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-24T12:48:56.023

你真的不需要复制文件。在您的 Netbeans 中，只需转到：

```
Tools -> Options -> Java -> Maven -> Execution 
```

并指向`Maven Home`您的本地安装而不是那个`Bundled`。

[![在此处输入图像描述](../Images/cc62a1788b9b6151240f5c51cd5fbca7.png)](https://i.stack.imgur.com/VIUkN.png)

此设置内部存储在：

```
/home/<user>/.netbeans/8.1/config/Preferences/org/netbeans/modules/maven.properties 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:29:36.727

我有一个独立于我的 Netbeans 的 Apache Maven 安装。每当我升级我的 Netbeans 时，我必须记住将我的 [maven_home]/conf/settings.xml 复制到 [netbeans_home]/java/maven/conf/ 目录，所以所有我使用的存储库可用于我的应用程序。这是它将从命令行而不是从 Netbeans 工作的通常原因。

# python - 将浮点数转换为以 .5 结尾的最接近的数字

> ID：10854410
> 
> 赞同：-2
> 
> 时间：2012-06-01T16:54:17.880
> 
> 标签：python

我怎样才能转换

```
1.0 -> 0.95
0.91 -> 0.95
0.9 -> 0.85 
```

等等

我正在做 0（不包括）和 1（包括）范围内的值的直方图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:01:08.610

当你做一个直方图时，你不会对数字进行四舍五入。您定义了一堆 bin 并计算每个 bin 中的点数。

您可以自己编写代码来执行此操作，或者只使用[`numpy.histogram`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html#numpy.histogram).

# iphone - 使用 ASIHTTPRequest 或 NSURLConnection 将 authlogic 与 iPhone 客户端一起使用

> ID：10854419
> 
> 赞同：3
> 
> 时间：2012-06-01T16:54:38.703
> 
> 标签：iphone, ruby-on-rails, ios, asihttprequest, authlogic

我目前正在为使用 vanilla authlogic 进行身份验证的 Rails 服务开发 iPhone 前端。我完全不知道如何使用 ASIHTTPRequest 或可能的 NSURLConnection 从 iPhone 登录到 authlogic。登录后如何获取当前用户？我在 Stack Overflow 上发现了许多类似的问题，但没有一个提供好的、深入的答案。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:46:03.727

我已经想通了！Authlogic 支持 http 基本身份验证，这里有一个说明[Rails: Basic Authentication with Authlogic](https://stackoverflow.com/questions/2285474/rails-basic-authentication-with-authlogic)这是 ASIHTTPRequest 使用的。

希望这可以帮助像我一样迷路的其他人。

# apache-flex - 如何在 flex air 应用程序上向用户显示谷歌文档列表？

> ID：10854423
> 
> 赞同：0
> 
> 时间：2012-06-01T16:55:00.580
> 
> 标签：apache-flex, air, google-docs, google-docs-api

我正在开发一个小型 Flex Air 应用程序，我需要让用户能够查看包含他的 Google 文档的列表并使用它们做更多的事情。我想知道，我有什么选择来完成这个？

非常感谢！

-大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:09:27.160

您可以使用 Documents List API 来检索用户的文档列表：

[https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files)

没有原生的 Flex 客户端库（我对 Flex 了解不多），但您应该能够发送 HTTP 请求来实现 API 协议。例如，要检索用户的文档列表，您必须向[https://docs.google.com/feeds/default/private/full](https://docs.google.com/feeds/default/private/full)发送授权的 GET 请求。

有关授权机制的更多详细信息，请查看文档中的相关部分：[https ://developers.google.com/google-apps/documents-list/#authorizing_requests](https://developers.google.com/google-apps/documents-list/#authorizing_requests)

# java - 阻止用户访问 .jsp，除非通过转发

> ID：10854425
> 
> 赞同：2
> 
> 时间：2012-06-01T16:55:13.180
> 
> 标签：java, servlets

我有一个使用 Java 技术的 MVC 网站。我有许多 .jsp，当通过适当的 servlet 路由到它们时工作正常，但直接访问时似乎不起作用。我想阻止我的用户直接寻址 .jsps。

那就是他们可以使用`www.url.com/Website/MyServlet`，然后将它们转发到`www.url.com/Website/MyServlet.jsp`，但我想阻止它们直接寻址到，`www.url.com/Website/MyServlet.jsp`因为它们`HttpServletRequest`将缺少属性并且无法正确显示。当然这一定是常见的做法？我该如何配合这个，我可以编写一个映射，将所有 *.jsp 重定向到 not founds，除非它是一个转发？

我敢打赌我可以编写一个过滤器来提取映射到 *.jsp 的所有非 FORWARD 指令（包括请求等）并为它们发送 404，但我认为必须有更简单的方法？有人有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:00:19.463

将它们放在`/WEB-INF`文件夹中并相应地更改正向路径。

```
request.getRequestDispatcher("/WEB-INF/MyServlet.jsp").forward(request, response); 
```

`/WEB-INF`（和）文件`/META-INF`夹中的文件不可公开访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:03:25.360

默认情况下，Web Containers 不允许`WEB-INF`直接访问文件夹下的资源。你可以把jsp的里面的`WEB-INF`文件夹。

然后，您可以将过滤器写入`include/forward`jsp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:00:26.110

将代码放入检测是否满足必要条件并采取适当行动的 JSP 中，例如转发到控制器 servlet 或将用户引导到适当的地方，如果不满足必要条件，则不会尝试渲染“正确”的 JSP .

# java - 使用 Jackson/Gson Java 解析 JSON

> ID：10854426
> 
> 赞同：0
> 
> 时间：2012-06-01T16:55:15.473
> 
> 标签：java, arrays, json, jackson, gson

我有以下Json

```
{
   "messages":[
      {
         "message":{
            "body":"Foo",
            "username":"XYZ"
         }
      },
      {
         "message":{
            "body":"HI",
            "username":"ABC"
         }
      }
   ],
   "response":{
      "status":200
   },
   "more":true
} 
```

我构建自定义类我的容器类结果包含一个列表对象一个响应对象，其中包含一个状态和一个布尔值。

```
public class Message { 

  @SerializedName("body") 
  public String body; 

  @SerializedName("username") 
  public String username; 

  @Override public String toString() { 
    return "Message{" + "body=" + body + ", username=" + username + '}'; 
  } 
}

public class Response { 
  public int status; 
} 

public class SearchResponseST { 
  @SerializedName("messages") 
  public Message[] messages; 
  public Response response; 
  public boolean more;
} 
```

在我的主要课程中，我会：

```
SearchResponseST response = 
   gson.fromJson(reader, SearchResponseST.class); Message[] results = response.messages; 
```

如果我消除“消息”：并直接启动数组，我可以使用 Gson 成功反序列化。

我应该如何用当前结构解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:09:18.570

对于这样的 JSON

```
 {
       "messages":
        [
          {"body": "Foo", "username": "XYZ"   },
          {"body": "HI",  "username": "ABC"  }

        ],
        "response": {"status": 200 },
        "more": true
    } 
```

尝试设计的容器对象

```
Container { List<Message> messages;Response response;boolean more;} 
```

但是对于您发布的 JSON，容器对象应该是

```
Container { public HashMap[] messages;  public boolean more;    public Response response; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:05:19.150

虽然这不能直接回答你的问题，因为我不使用 Gson。我一直使用 org.json.simple 包来解析 JSSON。您可以在这里阅读：[http](http://www.mkyong.com/java/json-simple-example-read-and-write-json/) ://www.mkyong.com/java/json-simple-example-read-and-write-json/ 只需将 JSON 放入解析器，然后获取您想要的数据。访问数据就像访问 HashMap（对于 JSONObject）或 ArrayList（对于 JSONArray）一样。

编辑解析代码：

```
 JSONParser parser = new JSONParser();
    JSONObject obj = (JSONObject) parser.parse(new FileReader("file.txt"));
    JSONArray array = (JSONArray) obj.get("messages");
    for (Object o : array) {
      JSONObject jo =(JSONObject)o;
      JSONObject messageObject = (JSONObject)jo.get("message");
      System.out.println(messageObject.get("body"));
      System.out.println(messageObject.get("username"));
    } 
```

# iphone - Unrar4iOS 错误，File::tell() 抛出 asm 代码，我该怎么办？

> ID：10854429
> 
> 赞同：1
> 
> 时间：2012-06-01T16:55:17.587
> 
> 标签：iphone, ios, ipad, rar, unrar

当我调用该方法时，我在 XCode 中使用 Unrar4iOS 框架显示了一个错误 File::tell()：

```
-(NSArray)unrarListFiles; 
```

编译器向我显示了一堆错误，堆栈中的最后一个错误是 ftell，如果有人知道，如果我可能错了，请回复...我想要做的完整过程是提取 int 号归档的文件，来自以下代码：

```
int nuberOfPages = 0;
NSLog(@"Filepath: %@", filePath);
Unrar4iOS *_unrar = [[Unrar4iOS alloc] init];
BOOL ok = [_unrar unrarOpenFile:filePath];
if (ok) {

    NSArray *files = [_unrar unrarListFiles];
    for (NSString *filename in files) {
        NSLog(@"File: %@", filename);
    }
    nuberOfPages = files.count;

    [unrar unrarCloseFile];
} else {
    [unrar unrarCloseFile];
}
[_unrar release];
return nuberOfPages; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:11:55.897

这是因为那个。在源代码中。

```
-(BOOL) unrarOpenFile:(NSString*)rarFile

-(BOOL) unrarCloseFile 
```

上面的功能。他们什么也没做。

这个函数做真正的打开和真正的关闭；

```
-(NSArray *) unrarListFiles {
int RHCode = 0, PFCode = 0;

    //here  if you opened a file that is not rar.
    //this function RARReadHeaderEx will EXC_BAD_ACCESS (SIGSEGV)
    //so, you can check it return value
[self _unrarOpenFile:filename mode:RAR_OM_LIST];

NSMutableArray *files = [NSMutableArray array];
while ((RHCode = RARReadHeaderEx(_rarFile, header)) == 0) {
    NSString *_filename = [NSString stringWithCString:header->FileName encoding:NSASCIIStringEncoding];
    [files addObject:_filename];

    if ((PFCode = RARProcessFile(_rarFile, RAR_SKIP, NULL, NULL)) != 0) {
        [self _unrarCloseFile];
        return nil;
    }
}

[self _unrarCloseFile];
return files; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:46:44.233

我相信这是`Unrar4iOS`通过读取损坏的 RAR 存档（或根本不是 RAR 存档的文件）触发的错误。它尝试读取磁盘上不属于存档一部分的地址，并抛出`EXC_BAD_ACCESS (SIGSEGV)`. 我将此作为一个问题发布在 GitHub 项目中：[https ://github.com/ararog/Unrar4iOS/issues/6](https://github.com/ararog/Unrar4iOS/issues/6)

Matt Gallagher 在[Cocoa with Love](http://cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)上写了一篇文章，展示了如何尝试将错误很好地呈现给用户，但*不*应该使用该代码来保持应用程序运行，因为它可能会产生不可预知的结果。

**更新**：为了它的价值，我将 Unrar4iOS 分叉到一个新项目[UnrarKit](https://github.com/abbeycode/UnrarKit)`NSError`中，它使用而不是抛出异常来处理错误。

# jquery - 如何：单击标记时 - 使地图变暗并在地图顶部显示一个大 div 而不是带有信息的信息框

> ID：10854431
> 
> 赞同：1
> 
> 时间：2012-06-01T16:55:21.880
> 
> 标签：jquery, google-maps, google-maps-api-3, google-maps-markers, jquery-ui-map

我有一个带有可过滤标记的**谷歌地图**`info-boxes`，并包含有关每个标记的简单信息（*当您单击它们时*），但想知道这是否可能：

当您在标记上时 -地图顶部会出现一个带有选项卡的大图标，`click`而不是默认选项，该选项卡显示了我将通过**JSON**（图像、链接、图片）提供的有关标记的所有可能数据。`info-box``div`

 **您将如何实现此功能？

![在此处输入图像描述](../Images/96798d18e2a74c885fc21e68ac4e09df.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:20:44.220

在添加标记的循环中，添加如下内容：

```
google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
           ... your code ...
        }
     })
) 
```

在您的代码中，您需要确定地图大小并在顶部放置一个半透明的 DIV，然后在地图的 weapping 元素中显示您自己的 HTML 绝对定位的 DIV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T12:42:26.393

您还可以在单​​击标记时更改地图样式。

```
google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
       map.set('styles', markerSelectedStyles);
    }
 }) 
```

)

您需要创建自己的深色地图版本。

[地图样式向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

并创建这样的样式，例如：

```
var markerSelectedStyles = [ {
"stylers": [
  { "invert_lightness": true }
]}
] 
```**

# c++ - C++/C 实时 Flash 流处理

> ID：10854432
> 
> 赞同：0
> 
> 时间：2012-06-01T16:55:23.847
> 
> 标签：c++, c, flash-media-server

我学过 C 并且也用 C 做过一些套接字编程。我也做过基本的 C++，但没有做过模板。我渴望了解有关处理实时视频流（不是点播或录制的流）的更多信息。有人可以推荐一本好书或网站吗？

我不打算建立一个媒体播放器。我想使用 C++/C 打开一个 Flash 媒体流，然后使用该数据；例如，将其分成 4KB 的片段并重新发送给另一个客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:59:32.880

您可以使用[DirectShow](http://en.wikipedia.org/wiki/DirectShow)。 [参考](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)

正如你所问的——[一本书](http://www.microsoft.com/learning/en/us/book.aspx?ID=6381&locale=en-us)。

一旦您对此感到满意，您就可以流式传输到任何播放器。（还有被网络浏览的玩家）

# python - 您如何设置 SQLAlchemy 的自定义 SQL 构造中处理参数的顺序？

> ID：10854434
> 
> 赞同：0
> 
> 时间：2012-06-01T16:55:28.187
> 
> 标签：python, sqlalchemy

在 SQLAlchemy 中，我试图在自定义构建的 group_concat 调用中嵌套一个内置的“concat”调用。两者都作为参数传递字符串，但在呈现/执行查询时字符串被反转。

例子：

```
from sqlalchemy.ext.compiler import compiles
from sqlalchemy.sql import expression
from sqlalchemy import create_engine, MetaData
from sqlalchemy import Table, Column, Integer, String
from sqlalchemy.sql import select
from sqlalchemy.sql.functions import concat

class group_concat(expression.FunctionElement):
    name = "group_concat"

@compiles(group_concat, 'mysql')
def _group_concat_mysql(element, compiler, **kw):
    separator = compiler.process(element.clauses.clauses[1]) \
                    if len(element.clauses) == 2 else "','"
    return "GROUP_CONCAT(%s SEPARATOR %s)" % (
                compiler.process(element.clauses.clauses[0]),
                separator,
            )

table = Table(
    'test_constructs', MetaData(),
    Column('id', Integer, primary_key=True),
    Column('column1', String(255)),
    Column('column2', String(255)),
    Column('foreign_id', Integer(11)),
)

def select_records():
    column1 = table.c.column1
    column2 = table.c.column2
    test_query = select([
        table.c.foreign_id,
        expression.label('clean_test_column',
                         group_concat(concat(column1,
                                             ',',
                                             column2),
                                      '|')),
    ]).group_by(table.c.foreign_id)
    res = engine.execute(test_query) 
```

日志输出是：

```
2012-06-01 09:48:29,552 INFO sqlalchemy.engine.base.Engine SELECT test_constructs.foreign_id, GROUP_CONCAT(concat(test_constructs.column1, %s, test_constructs.column2) SEPARATOR %s) AS clean_test_column FROM test_constructs GROUP BY test_constructs.foreign_id
2012-06-01 09:48:29,552 INFO sqlalchemy.engine.base.Engine ('|', ',') 
```

...请注意，被替换到查询中的参数的顺序是相反的。'|' 被替换为 CONCAT 并且 ',' 被 GROUP_CONCAT 使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:02:37.527

这个问题是因为分隔符首先被“编译”，但第二次被添加到字符串中。因此，它在语句中以正确的顺序结束，但在参数中以相反的顺序结束。

相反，我正在做：

```
@compiles(group_concat, 'mysql')
def _group_concat_mysql(element, compiler, **kw):
    return "GROUP_CONCAT({0} SEPARATOR {1})".format(
                compiler.process(element.clauses.clauses[0]),
                compiler.process(element.clauses.clauses[1]) \
                    if len(element.clauses) == 2 else ",",
            ) 
```

...这似乎工作正常。

# ember.js - 状态管理器中的动画视图状态

> ID：10854438
> 
> 赞同：3
> 
> 时间：2012-06-01T16:55:48.980
> 
> 标签：ember.js

我有一个具有 2 个视图状态的状态管理器实现。我想推迟状态的正常删除，并在视图被销毁并且状态管理器正在转换到另一个状态时添加自定义动画。

这是一个 jsFiddle：http: [//jsfiddle.net/Xkg6X/](http://jsfiddle.net/Xkg6X/)

出于某种原因，没有触发每个视图状态的隐藏功能，我可以在其中创建自定义动画以进行删除。

参考：[推迟删除视图，使其可以动画化](https://stackoverflow.com/questions/9925171/deferring-removal-of-a-view-so-it-can-be-animated)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T23:11:40.913

你永远不会调用 hide 函数，所以它不会被执行。

您可以使用状态管理器的异步转换功能来实现您想要做的事情。这是一个 jsFiddle：http: [//jsfiddle.net/Xkg6X/1/](http://jsfiddle.net/Xkg6X/1/)

# iphone - 具有非 GPL 许可的 iOS SIP 库

> ID：10854442
> 
> 赞同：7
> 
> 时间：2012-06-01T16:56:07.600
> 
> 标签：iphone, objective-c, ios, sip, voip

是否有任何非 GPL SIP 库/SDK 可以让我为 iOS 实现 SIP？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T08:57:19.377

这些是我所知道的：

**所有权：**

*   [vaxvoip](http://www.vaxvoip.com/)

**开源：GPL/LGPL**

*   [索非亚啜饮](http://sofia-sip.sourceforge.net/development.html)
*   [手机](http://www.linphone.org)
*   [外露](http://savannah.nongnu.org/projects/exosip/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T13:33:08.253

[oSIP](http://www.gnu.org/software/osip/ "oSIP")是**LGPL**，因此可以在商业和闭源项目中使用（作为库）。它很容易为 arm 编译。是 linphone for iPhone 使用的 SIP 库；但是，linphone 是 GPL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-14T22:50:22.090

如今，基于 WebRTC 的 SIP 越来越受欢迎。它使用谷歌提供的 SIP 信令和 WebRTC 作为媒体。

如果您避免陷入 SIP 级别的复杂性，以下选项也非常好。

[https://alqatech.com/services/webrtc-sdk-android/](https://alqatech.com/services/webrtc-sdk-android/)

[https://alqatech.com/services/webrtc-sdk-ios/](https://alqatech.com/services/webrtc-sdk-ios/)

# django - 将 Django-CMS Wymeditor 用于 ZInnia 条目

> ID：10854445
> 
> 赞同：1
> 
> 时间：2012-06-01T16:56:30.293
> 
> 标签：django, django-cms, wymeditor

有没有办法使用 Django-cms WYMeditor（以及它的所有插件功能）作为 Zinnia 的编辑器？

目标是能够上传照片/视频作为条目中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:57:06.510

您可以在[这里查看](http://pypi.python.org/pypi/cmsplugin_zinnia/)并将这一行添加到您的项目设置中：

```
ZINNIA_ENTRY_BASE_MODEL = 'cmsplugin_zinnia.placeholder.EntryPlaceholder' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:31:11.107

我使用 django-file-picker 来让它工作。我不得不根据[http://django-file-picker.readthedocs.org/en/latest/wymeditor.html编辑 zinnia/admin/entry.py 文件](http://django-file-picker.readthedocs.org/en/latest/wymeditor.html)

我编辑了 templates/admin/base_site.html 文件，将这两行添加到“extrastyle”块中：

```
<script type="text/javascript" src="/static/admin/js/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.jquerytools.org/1.2.5/full/jquery.tools.min.js"></script> 
```

我必须确保百日草没有使用它自己的 WYMeditor：

```
ZINNIA_WYSIWYG = None 
```

这不是理想的解决方案，因为我必须实际编辑百日草的源文件，但它适用于今天。下周我会寻找更优雅的解决方案。

# c++ - 如何在有安全限制的情况下安全地编译和执行 c++ 程序？

> ID：10854446
> 
> 赞同：0
> 
> 时间：2012-06-01T16:56:40.527
> 
> 标签：c++, security, compilation

我正在寻找一种在文件夹中编译和执行 c++ 程序的方法，这样它就无法访问正在执行它的文件夹之外的其他文件夹或程序。我正在尝试构建一个在线 c++ 编译器。

我想从程序中避免的事情是访问文件夹外的任何文件，更改/删除任何文件或创建新文件并在新位置复制。所有这些都是为了使服务器免受正在执行的恶意代码并导致系统崩溃。

我有一个 windows 环境，但如果有更好的方法来实现，那么 linux 会做得很好。我已经在 windows 中寻找用户角色、访问权限和一些 3d 派对应用程序（如沙盒），但对其中的任何一个都不相信。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:34:16.323

`chroot`在 *nix 系统上用于此目的，但请确保您还以具有足够受限权限的用户身份运行代码，以阻止他们只是撤消 chroot： http: [//kerneltrap.org/Linux/Abusing_chroot](http://kerneltrap.org/Linux/Abusing_chroot)

对于 Windows 等效项：[https](https://serverfault.com/questions/161507/is-there-a-windows-equivalent-to-chroot) ://serverfault.com/questions/161507/is-there-a-windows-equivalent-to-chroot ，尽管看起来这个问题并没有引起很多关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:00:29.290

您可以应用分配给用户的系统范围权限，让他们只能在特定文件夹内读取/写入/执行。所以他/她不能访问外部世界，也不能创建文件/文件夹等。

# jquery-mobile - JQMobile 1.1.0 App 在 WebWorks 上崩溃

> ID：10854454
> 
> 赞同：1
> 
> 时间：2012-06-01T16:57:13.737
> 
> 标签：jquery-mobile, cordova, blackberry-webworks

我正在尝试使用 webworks、phonegap 和 jquery mobile 1.1.0 为 BB 编写应用程序。我正在尝试运行 phonegap(cordova) 1.7 BB 示例。如果我完全按照 phonegap 的方式保留该示例，则该示例运行正常，但我立即将任何引用添加到 jquery 移动库，该应用程序不会超过启动屏幕。

我曾尝试使用 Jquery mobile 1.0.1，但我仍然得到相同的结果

谁能告诉我发生了什么事以及我可以做些什么来让 Jquery mobile 工作？

# node.js - 除了 process.cwd() 之外，还有更透明的方式来访问 Node.js 应用程序的根目录吗？

> ID：10854455
> 
> 赞同：0
> 
> 时间：2012-06-01T16:57:18.130
> 
> 标签：node.js, filesystems

除了 process.cwd() 之外，还有更透明的方式来访问 Node.js 应用程序的根目录吗？- 我知道这是非常透明的，但我只是对那些以后可能会拿起应用程序并且不知道 cwd() 可能推断出什么的人感到好奇。

澄清一下 - 如果我的应用程序位于 /var/www/node-app 中，我想从 /var/www/node-app/any/nested/path 访问该路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:58:03.177

假设您在路径 var/www/node-app 中有一个名为 node-app 的应用程序，其入口点为 index.js。然后在 index.js 中定义如下

```
 exports.path = __dirname; 
```

现在假设另一个应用程序位于 var/www/some-other-deeper-path/new-app 中，并且我们需要知道 node-app 所在的路径，我们必须在 new-app 中使用 node-app

```
 var node-app = require('node-app');
  console.log(node-app.path); // this will log var/www/node-app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:19:40.413

如果 Node.js 应用程序是 Root `__dirname`，则不是`process.cwd()`

ps：等等...从技术上讲，没有应用程序的根之类的东西。所以你应该澄清你的意思是什么。

# android - 从 AlertDialog 的 ListView 获取特定视图

> ID：10854457
> 
> 赞同：2
> 
> 时间：2012-06-01T16:57:19.960
> 
> 标签：android

我正在尝试制作一个包含列表的 AlertDialog，但我需要列表中的某些项目具有不同的文本颜色或背景颜色，因此我试图获取每个项目的各个视图，但它似乎不可用。

这是我的代码：

```
final String[] listItems = new String[listQuestion.size()];

for(int i=0; i<listQuestion.size(); i++) {
    listItems[i] = "" + (i+1) + ". " + listQuestion.get(i).question;
}

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setItems(listItems, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        currentQuestion = which;
        loadQuestion();
    }

});

outlineDialog = builder.create();

// THE LINE BELOW RETURNS NULL
//System.out.println(outlineDialog.getListView().getAdapter());

outlineDialog.show(); 
```

注释行是我计划如何获取单个视图，但适配器返回 null，如果我只获取 ListView，它会返回一个名为“RecycleListView”的东西。有任何想法吗？谢谢！

# php - 它在 textarea 中显示“[Object] [object]”

> ID：10854460
> 
> 赞同：0
> 
> 时间：2012-06-01T16:57:28.607
> 
> 标签：php, javascript, jquery, ajax

[我在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)有一个应用程序，我想将“问题”添加到文本区域中，但不是在文本区域中显示“问题”，而是在文本区域中显示“[对象] [对象]”，我怎样才能得到它显示选择到测试区的问题？

要使用该应用程序，请执行以下步骤：

1.  当您打开应用程序时单击绿色加号按钮，这将打开一个模式窗口。
2.  您将在模态窗口中看到一个搜索栏，在搜索栏中输入“AAA”并单击“搜索”
3.  您将看到搜索结果出现。单击其中一行旁边的“添加”按钮，我想要的是要在文本区域中显示的“问题”字段行中的内容。目前它正在显示“[Object] [object]”。

下面是代码：

```
<head>
<script type="text/javascript">

var plusbutton_clicked;

function plusbutton() { 
    // Display an external page using an iframe 
    var src = "previousquestions.php"; 
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
} 

function closewindow() {     

    $.modal.close(); 
    return false;
} 

$('.plusimage').live('click', function() {
    plusbutton($(this));
});

function plusbutton(plus_id) {
    // Set global info
    plusbutton_clicked = plus_id;
    // Display an external page using an iframe
    var src = "previousquestions.php";
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
}

function addwindow(questionText) { 

    if(window.console) console.log();
        var txt = $(this).val(questionText);

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(txt);
        }

    $.modal.close(); 
    return false;
} 

</script>

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

<div id="detailsBlock">
<table id="question">
<tr>
    <td rowspan="3">Question:</td> 
    <td rowspan="3">
        <textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea>
    </td>
</tr>
</table>

<table id="plus" align="center">
<tr>
<th>
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
</th>
</tr>
</table>

</div>
<hr/>

</form>

</body> 
```

以下是在搜索结果中输出“问题”字段的代码：

```
<?php 

$output = ""; 

        while ($questionrow = mysql_fetch_assoc($questionresult)) { 
$output .= " 
<table> 
      <tr> 
      <td class='addtd'><button type='button' class='add' onclick='parent.addwindow();'>Add</button></td> 
      </tr>"; 
        } 
        $output .= "        </table>"; 

        echo $output; 

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:21:21.637

您的`addwindow`函数试图将值设置为`mainTextarea`jQuery 对象，而不是字符串。内联评论。

```
function addwindow(questionText) {

    // this line tries to set the `value` property of window to questionText, which makes no sense
    var txt = $(this).val(questionText);

    // also, that line returns the jQuery object (because of chaining), so `txt` is now a jQuery object holding the window object        

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') {
        $('#mainTextarea').val(txt);  // txt is the jQuery object, stringified to [object Object]
    }
    ....
} 
```

该行`var txt = $(this).val(questionText);`没有任何意义，因为它*设置*了`this`（当前是`window`对象）的值并设置`txt`为 jQuery 对象。也许你的意思是`txt = questionText;`？由于所有全局变量和不规则的缩进，我很难遵循您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:22:42.637

当您调用时，`parent.addWindow()`您没有传递参数并且函数需要一个参数。

`var txt = $(this).val(questionText);`设置`txt`为`$(this)`。

这就是它打印出来的原因`[object object]`。

编辑：修复了错误信息。

编辑：根据评论在下面添加

```
function addwindow(questionText) { 
    if(window.console) console.log();
    var txt = $(this).val(questionText);
    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(txt);
    }
    $.modal.close(); 
    return false;
} 
```

应该：

```
function addwindow(questionText) { 
    if(window.console) console.log();
    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(questionText);
    }
    $.modal.close(); 
    return false;
}

<?php 
$output = ""; 
while ($questionrow = mysql_fetch_assoc($questionresult)) { 
    $output .= " 
    <table> 
        <tr> 
            <td class='addtd'><button type='button' class='add' onclick='parent.addwindow();'>Add</button></td> 
        </tr>"; 
} 
$output .= "        </table>"; 
echo $output; 
?> 
```

应该：

```
<?php
$output = "";
while ($questionrow = mysql_fetch_assoc($questionresult)) {
    $output .= '
    <table>
        <tr>
            <td class="addtd"><button type="button" class="add" onclick="parent.addwindow(\''.$questionrow['text'].'\');">Add</button></td>
        </tr>';
}
$output .= "        </table>";
echo $output;
?> 
```

# xquery - XQuery 简单的第一次问题

> ID：10854462
> 
> 赞同：2
> 
> 时间：2012-06-01T16:57:40.557
> 
> 标签：xquery

我是 XQuery 的新手，我只是想检查并确保我已经正确地解决了最初的几个问题，看看是否有任何反馈。

查找价格低于 100 的打印机元素。

```
let $products := doc("products.xml")
for $e in $products/Products/Maker/Printer
where $e/Price < 100
return $e 
```

做同样的事情，但现在生成由标签包围的这些元素的序列。

```
let $products := doc("products.xml")
for $e in $products/Products/Maker/Printer
where $e/Price < 100
return <CheapPrinters>$e</CheapPrinters> 
```

产品.xml

```
<Products>
<Maker name = "A">
  <PC model = "1001" price = "2114">
    <Speed>2.66</Speed> 
    <RAM>1024</RAM> 
    <HardDisk>250</HardDisk>
  </PC>
  <PC model = "1002" price = "995">
     <Speed>2.10</Speed>
     <RAM>512</RAM>
     <HardDisk>250</HardDisk>
  </PC>
  <Laptop model = "2004" price = "1150">
     <Speed>2.00</Speed>
     <RAM>512</RAM>
     <HardDisk>60</HardDisk>
     <Screen>13.3</Screen>
  </Laptop>
  <Laptop model = "2005" price = "2500">
     <Speed>2.16</Speed>
     <RAM>1024</RAM>
     <HardDisk>120</HardDisk>
     <Screen>17.0</Screen>
  </Laptop>
</Maker>
<Maker name = "E">
  <PC model = "1011" price = "959">
 <Speed>1.86</Speed>    
 <RAM>2048</RAM>    
 <HardDisk>160</HardDisk>   
  </PC> 
  <PC model = "1012" price = "649">
 <Speed>2.80</Speed>    
 <RAM>1024</RAM>    
 <HardDisk>160</HardDisk>   
  </PC> 
  <Laptop model = "2001" price = "3673">
 <Speed>2.00</Speed>
 <RAM>2048</RAM>    
 <HardDisk>240</HardDisk>   
 <Screen>20.1</Screen>  
  </Laptop> 
  <Printer model = "3002" price =   "239">
     <Color>false</Color>
     <Type>laser</Type> 
  </Printer>
</Maker>    
<Maker name = "H">  
  <Printer model = "3006" price = "100">
     <Color>true</Color>
     <Type>ink-jet</Type>   
  </Printer>    
  <Printer model = "3007" price = "200">
     <Color>true</Color>
     <Type>laser</Type>
  </Printer>
 </Maker>
 </Products> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:27:44.417

# 过滤结果

> 查找价格低于 100 的打印机元素。

没有比 100 美元便宜的打印机。我用 200 作为我的例子。:)

您正在查询一个元素，而不是属性。`@`在属性名称前添加一个。此外，XQuery 区分大小写，您必须使用`@price`：

```
let $products := doc("products.xml")
for $e in $products/Products/Maker/Printer
where $e/@price < 200
return $e 
```

您还可以尝试更短的 XPath 等效项（它是 XQuery 的子集）：

```
doc("products.xml")/Products/Maker/Printer[@price<200] 
```

# 元素构造

> 做同样的事情，但现在生成由标签包围的这些元素的序列。

Now you will have to use "real" XQuery. You example is mostly fine (apart from the error fixed above), but currently you will return "$e" for each line. There are two ways to construct elements, also have a look at this [handy tutorial](http://www.datadirect.com/resources/dis/xquery-guided-tour/creating-nodes.html):

1.  Curly brackets

    `return <CheapPrinters>{$e}</CheapPrinters>`

2.  Element Constructors

    `return element {"CheapPrinters"} {$e}`

# assembly - 如何将两个字节转换为一个 16 位数字？

> ID：10854466
> 
> 赞同：11
> 
> 时间：2012-06-01T16:58:03.580
> 
> 标签：assembly, embedded, byte, bit

我知道 1 个字节将包含一个 0-255 的数字。一个 16 位的数字在 0-65535 之间。

如果我尝试使用两个单独的 8 位寄存器来表示 16 位数字……我该怎么做？数学是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T17:10:24.053

数学计算如下：

```
sixteenBitNumber = 256*upperByte + lowerByte; 
```

使用移位和按位运算：

```
sixteenBitNumber = (upperByte<<8) | lowerByte; 
```

在大多数 CPU 中，即使是一些过时的 8 位 CPU，这种解释都是在硬件中完成的：您将字节加载到 16 位寄存器的一部分或可以作为 16 位对工作的单独的 8 位寄存器中，而硬件像处理单个 16 位数字一样处理数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:55:42.050

在十进制中，我如何取 7 和 9 并得到 79？(7*10)+9 还是 12 和 34 得到 1234？(12*100)+34。没有不同的 0x12 和 0x34 和 0x1234。(0x12 * 0x100) + 0x34。位移 (0x12 << 8 ) + 0x34 更清晰。你可以或者也可以 (0x12<<8) | 0x34。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T04:26:51.473

你想和他们一起工作吗？这简单

假设您有数字**2643 - 以 10 为底**。如果你把它分成两半，你会得到像 26 和 43 这样的东西，对吧？你知道，如果你乘以 2，你必须从右到左相乘，然后进位。这样做 - 乘以右侧，如果有溢出，将其添加到左侧，然后乘以左侧。

例如：

```
(37 82) *2     ->     ((37*2) + overflow) + 64     ->     (74 + 1) 64     ->     75 64 
```

看看效果如何？除法也一样-需要携带吗？从较高位窃取。想要添加或减去数字？毕竟没那么难！

二进制数的工作方式相同。

```
(01110110 10110011) * 10 = (0)     <-     1110110(1)     <-     01100110 
```

基本上你计算下端，然后计算上端，然后应用溢出。

# yesod - 哈姆雷特文件和 18N

> ID：10854467
> 
> 赞同：3
> 
> 时间：2012-06-01T16:58:08.060
> 
> 标签：yesod

我无法调整生成的站点（yesod init）以使用 I18N。具体来说，我正在尝试在生成的 default-layout-wrapper.hamlet 文件中使用本地化字符串，使用`_{Msg...}`. 我已将 Foundation.hs 更改为：

```
ihamletToRepHtml $(ihamletFile "templates/default-layout-wrapper.hamlet") 
```

但我收到以下错误：

```
The function `pageHead' is applied to three arguments,
but its type `PageContent url0 -> HtmlUrl url0' has only two
In a stmt of a 'do' expression:
    pageHead pc _mrender[a522] _urender[a521] 
```

我还没有触及页面内容创建，它说：

```
 pc <- widgetToPageContent $ do
        $(widgetFile "normalize")
        addStylesheet $ StaticR css_bootstrap_css
        $(widgetFile "default-layout") 
```

所以看起来我需要在 hamlet 模板中调整 pc 创建代码或调用代码（例如代码`<title>#{pageTitle pc}`），但我不知道如何，并且通过 API 文档和各种教程和博客文章没有给我答案（它可能在那里，但我错过了）。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:13:34.833

我认为您可以定义如下函数：

```
toHtmlUrlI hu _msgRender urlRender = hu urlRender 
```

然后在 中`default-layout-wrapper.hamlet`，将嵌入替换为`pageHead`：

```
^{toHtmlUrlI $ pageHead pc} 
```

发生的事情是，由于您使用的是 ihamlet，因此嵌入式模板应为以下类型：

```
type HtmlUrlI18n msg url = Translate msg -> Render url -> Html 
```

但是，`pageHead pc`实际上是类型：

```
type HtmlUrl url = Render url -> Html 
```

所以你必须忽略那个`Translate msg`参数。

顺便说一句，我认为您可以使用`const`代替`toHtmlUrlI`，但我发现后者更清晰一些。

# php - 链式选择 ajax 调用仅在值是数字时才有效

> ID：10854468
> 
> 赞同：2
> 
> 时间：2012-06-01T16:58:10.463
> 
> 标签：php, mysql, ajax, json

我有以下 ajax 片段链接 2 个选择框，并使用 mysql 表中的值动态填充。

如果 callType 列是一个类似于我的数据列 SPG_CallType 中的数值，则此方法非常有用。当我将其更改为使用与字母联系的列时，它会破坏它。我假设这是因为代码仅适用于数值？如何更新片段的那部分以接受字母或数字？

```
if (isset($_GET['key'])) {
    $key = $_GET['key'];
    switch ($key) {
        case 'callTypeSelect':
            $select = new SelectBox('Repair Type?','Choose a category');
            $res = mysql_query('SELECT DISTINCT SPG_CallType FROM ' . DB_TABLE . ' ORDER BY SPG_CallType ASC');
            $callTypes = array();
            for ($i = 0; list($callType) = mysql_fetch_row($res); $i++) {
                $callTypes[] = $callType;
                $select->addItem($callType, 'brandSelect-' . $callType);
            }
            header('Content-type: application/json');
            echo $select->toJSON();
            break;
        default:
            if (strpos($key, 'brandSelect-') === 0) {
                $callType = str_replace('brandSelect-', '', $key);
                $resBrands = mysql_query('SELECT SPG_Brand FROM ' . DB_TABLE
                    . ' WHERE SPG_CallType = ' . mysql_real_escape_string($callType) . ' ORDER BY SPG_Brand ASC');
                $select = new SelectBox('Choose a Manufacturer', 'Pick a brand');
                for ($i = 0; list($brand) = mysql_fetch_row($resBrands); $i++) {
                    $select->addItem($brand, 'result-' . $brand . '-' . $callType);
                }
                header('Content-type: application/json');
                echo $select->toJSON(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:08:14.900

@roryok 回答了这个问题，但没有办法给予评论？

```
$select->addItem('\'' . $callType . '\'', 'brandSelect-' . $callType); 
```

# ruby-on-rails - 在 Rails 中查看部分更新查询

> ID：10854470
> 
> 赞同：0
> 
> 时间：2012-06-01T16:58:42.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图在视图中显示用户生成的部分更新查询。

为了保存一个属性，我用这个..

```
@pin.update_attributes(params[:pin]) 
```

我可以在终端中看到更新查询......并且只更新了更改的复选框（这是正确的）

```
UPDATE "pins" SET "rose" = 't', "updated_at" = '2012-06-01 16:51:51.942695' WHERE "pins"."id" = 41 
```

有没有办法在视图中显示这条线？我尝试只使用@pin.update_attributes(params[:pin]).to_s，但这并没有拉出上面的查询（只是说真的）。

谢谢你。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:35:25.307

泰这个

```
@pin.update_attributes(params[:pin]).to_sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:26:45.123

您可以稍微更改一下代码：

```
@pin.attributes = params[:pin]   # Will not save the @pin object
@changes = @pin.changed          # Contains the attributes that have been changed
@pin.save                        # Saves the changes 
```

# search - vim 增量搜索在文件末尾停止

> ID：10854471
> 
> 赞同：51
> 
> 时间：2012-06-01T16:58:46.780
> 
> 标签：search, vim

在 Vim 中，当我通过输入对“x”进行增量搜索时，`/x`然后按下`n`以跳转到下一个匹配项。如果我刚刚匹配了文件中的最后一个匹配项，那么当我按下`n`光标时，将开始在文件的开头查找匹配项——它将循环回到开头。 **我不希望它循环回到开头。** 我想`n`在它到达最终出现后不再找到任何匹配。我想要这种行为的原因是，当我搜索整个文件时，我可以很容易地看到。

有谁知道如何影响这种行为？

仅供参考：我正在使用以下 .vimrc 选项：

```
colorscheme zenburn   " zenburn colorscheme

set nocompatible      " prevent Vim from emulating Vi's bugs
set scrolloff=5       " keeps cursor away from top/bottom of screen
set nobackup          " don't make automatic backups

set incsearch         " incremental searching
set ignorecase        " case insensitive matching
set smartcase         " smart case matching
set showmatch         " show matching bracket

set autoindent        " indentation
set smartindent       " indentation
set cindent           " indenting for C code
set tabstop=4         " 4-space tabs
set shiftwidth=4      " 4-space tabs

syntax on             " syntax highlighting
filetype on           " behavior based on file type
filetype plugin on    " behavior based on file type
filetype indent on    " behavior based on file type

set visualbell        " replace beeping with flashing screen

set gfn=Lucida_Sans_Typewriter:h10:cANSI 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-01T17:00:04.097

关闭该`'wrapscan'`选项。

```
set nowrapscan 
```

# css - @font-face 适用于 mac 所有浏览器，但不适用于 windows ff 和 ie

> ID：10854481
> 
> 赞同：0
> 
> 时间：2012-06-01T16:59:32.893
> 
> 标签：css, font-face

这应该很简单，但它不起作用，我有以下来自 Font Squirrel 的代码：

```
@font-face {
font-family: 'ResagokrRegular';
src: url('resagokr-webfont.eot');
src: url('resagokr-webfont.eot?#iefix') format('embedded-opentype'),
     url('resagokr-webfont.woff') format('woff'),
     url('resagokr-webfont.ttf') format('truetype'),
     url('resagokr-webfont.svg#ResagokrRegular') format('svg');
font-weight: normal;
font-style: normal;
}

@font-face {
    font-family: 'ResagokrBold';
    src: url('resagokrbold-webfont.eot');
    src: url('resagokrbold-webfont.eot?#iefix') format('embedded-opentype'),
         url('resagokrbold-webfont.woff') format('woff'),
         url('resagokrbold-webfont.ttf') format('truetype'),
         url('resagokrbold-webfont.svg#ResagokrBold') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'ResagokrLight';
    src: url('resagokrlight-webfont.eot');
    src: url('resagokrlight-webfont.eot?#iefix') format('embedded-opentype'),
         url('resagokrlight-webfont.woff') format('woff'),
         url('resagokrlight-webfont.ttf') format('truetype'),
         url('resagokrlight-webfont.svg#ResagokrLight') format('svg');
    font-weight: normal;
    font-style: normal;
    } 
```

它适用于所有mac浏览器，但不适用于ff或windows，顺便说一句，chrome适用于windows。不确定我哪里出错了尝试将 ' 更改为 " 仍然没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:42:09.410

给出的信息非常有限，但如果它在 ff 和 ie 中不起作用，我敢打赌它在你的标题中：将它添加到你的 .htaccess 文件中：

AddType application/vnd.ms-fontobject .eot

AddType 字体/ttf .ttf

AddType 字体/otf .otf

<FilesMatch ".(ttf|otf|eot)$">

<IfModule mod_headers.c>

标头集 Access-Control-Allow-Origin "*"

</IfModule>

</文件匹配>

参考： [http ://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html](http://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html)

如果您仍然遇到 IE 问题，我敢打赌这是 IIS 问题

# c++ - win32 API createFile 函数：转换为 LPCTSTR

> ID：10854482
> 
> 赞同：0
> 
> 时间：2012-06-01T16:59:36.623
> 
> 标签：c++, winapi

我有以下代码从函数中获取文件名，然后将其传递给 createFile（扩展为 createFileA）。较早的一个问题告诉我使用 file.c_str() 将文件名转换为 createFileA 使用的 LPCTSTR。但是，这不起作用，因为每次调用 createFileA 时文件的句柄都无效。我究竟做错了什么？

```
string file = getFilename();
HANDLE hf = CreateFile(file.c_str(),GENERIC_READ | GENERIC_WRITE,(DWORD) 0,NULL,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,(HANDLE) NULL);
if (hf == INVALID_HANDLE_VALUE)
   {
     MessageBox( hwnd,"CreateFile","Error", MB_OK);
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:12:22.077

如果它编译，那么 .c_str() 必须是正确的类型！

ERROR_INVALID_NAME 的最常见原因是文件名中的非法字符、额外的“：”或制表符，或者您使用的是保留的文件名。检查文件名的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:13:05.240

根据对问题的评论，问题是您提供的名称包含`:`. 此字符对于 Windows 中的文件名是非法的，并且是问题的根源。删除该字符，代码应该可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:31:07.237

我刚刚注意到，如果您使用以下代码

std::stringstream ss；ss << "C:\文件名.txt" <

然后执行 ss.str() 以获取 std::string。然后如果你做 c_str() 传递给 CreateFile

这不适用于 CreateFile 并且很难跟踪根本原因，但它是“endl;”，它被流式传输到缓冲区中，因此路径将无效

总会报错123 文件名无效

宽版本也会发生这种情况。

# css - jquery ui-autocomplete-loading 类被添加但样式不适用

> ID：10854483
> 
> 赞同：1
> 
> 时间：2012-06-01T16:59:37.630
> 
> 标签：css, jquery-ui, jquery, jquery-ui-autocomplete

我使用 jquery ui 自动完成在我的网站上进行搜索。我想在返回结果时添加一个简单的加载微调器。加载结果时，jquery ui 会自动添加类“ui-autocomplete-loading”。我在这个类中添加了一些 CSS，以便在它处于活动状态时添加背景图像。奇怪的是，类的添加和删除非常好，但没有应用样式。但是，如果我手动添加 ui-autocomplete-loading 类，则会显示样式。我一直在拔头发试图弄清楚这一点！

自动添加“ui-autocomplete-loading”

[http://i.stack.imgur.com/DyLNj.jpg](http://i.stack.imgur.com/DyLNj.jpg)

手动添加“ui-autocomplete-loading”

[http://i.stack.imgur.com/BReHS.png](http://i.stack.imgur.com/BReHS.png)

CSS：

```
.ui-autocomplete-loading {
  background: red url('/static/images/ajax-loader.gif') no-repeat right center!important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T14:50:25.360

如果您查看 jQuery UI 脚本，您将看到`.ui-autocomplete-loading`该类已自动应用。可以在您的 CSS 中覆盖此样式以显示您选择的图像或样式。

其中一个问题是可能与您的其他样式发生 CSS 冲突。您可以通过调试 DevTools、Firebug 等中的脚本，然后在应用元素样式时检查它们是否存在问题。

简单的解决方法是增加类的特异性。例如，`input`在 CSS 中添加元素可能会起到作用。`input.ui-autocomplete-loading { background:url('img/loading.gif') no-repeat right center; }`

您可以在下面的示例中看到，我检查了 CSS 规则，发现 Foundation 框架中的样式覆盖了我的`.ui-autocomplete-loading`样式。我能够通过在调试脚本时取消选中样式来验证这一点。

![在此处输入图像描述](../Images/d6bf3082cf0c87baaa26954c6d073710.png)

所以，我修改了我的 CSS，你可以在这里看到更新的样式。

![在此处输入图像描述](../Images/4c7260f7628afd2d3e6f51e994e7d80f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:23:25.100

这里有点困难，因为您正试图覆盖现有背景。

您可以做的是在输入字段中添加一个按钮。然后，您可以为自动完成加载添加样式。只需使用负边距来定位图标。

例如

```
<input><button class="search_icon"><button></input>

.search_icon 
{
    margin-left: -20px;
    background: #fff url(/assets/images/search-icon.png) no-repeat;
    border-style: none;
    width: 15px;
}

.ui-autocomplete-loading
{
   background: #fff url(/assets/images/ajax-loader.gif) no-repeat 95%;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-05T10:09:53.677

这是 jquery-ui 本身在其网站 [https://jqueryui.com/autocomplete/#remote](https://jqueryui.com/autocomplete/#remote)上使用的代码。

确保图像目录包含“ui-anim_basic_16x16.gif”。

```
<style>

       .ui-autocomplete-loading {

       background: white url("/images/ui-anim_basic_16x16.gif") right center no-repeat;

       }

</style> 
```

# javascript - 正则表达式不验证

> ID：10854488
> 
> 赞同：1
> 
> 时间：2012-06-01T16:59:50.977
> 
> 标签：javascript, regex

我在 javascript 中有以下用于密码验证的正则表达式：

```
^[!#\$%\(\)\*,\-\./:;=\?@\[\\\]\^_`\{\|\}~a-zA-Z0-9]*$

   <script type="text/javascript">
        var regex = "^[!#\$%\(\)\*,\-\./:;=\?@\[\\\]\^_`\{\|\}~a-zA-Z0-9]*$";
        var value = 'test';
        if (value.match(regex) == false) {
            alert('password invalid');
        }
    </script> 
```

正则表达式规则是：

*   12-25 个字符
*   至少有一个大写字母
*   至少一个小写字母
*   至少一位数字
*   至少一个特殊字符：!#$%()*,-./:;=?@[]^_`{|}~

但是，正则表达式似乎不起作用。它匹配任何字符。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:25:31.827

使用正向前瞻可以在一个匹配调用中验证您的正则表达式。使用这个正则表达式：

```
 var regex =
     /(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!#$%()\*,/:;=?@\[\\\]\^_`{}|.-])^.{12,25}$/;
 var value = 'aaaAaaaaa?test2';
 if (!value.match(regex))
     document.writeln('invalid');
 else
     document.writeln('valid'); 
```

[`See this code live in action`](http://jsfiddle.net/FYtSy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:31:44.267

尝试：

```
/^(?=(?:.*[a-z]){1})(?=(?:.*[A-Z]){1})(?=(?:.*\d){1})(?=(?:.*[!#$%()*,-./:;=?@[]^_`{|}~ ]){1,}).{12,25}$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:33:30.747

此正则表达式有效：

```
^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[-|^!#$%()*,./:;=?@_`{}~[\]]).{12,25}$ 
```

它使用前瞻技术来确保至少有 1 位数字、小写字符、...

此外，请查看Regex 表达式以获取类似挑战[的密码规则](https://stackoverflow.com/questions/10729347/regex-expression-for-password-rules/10729398#10729398)

# airprint - UIPrintInteractionController 打印问题

> ID：10854492
> 
> 赞同：3
> 
> 时间：2012-06-01T17:00:02.810
> 
> 标签：airprint

我在自定义 QLPreviewController 的 navigationItem 中添加了一个操作按钮。当点击操作按钮时，我会呈现一个 UIPrintInteractionController。我正在从我的应用程序的 Documents 目录中获取文件。预览它们时没有问题。但是当我通过点击操作按钮打印相同的文件时，[UIPrintInteractionController canPrintData:data] 返回 false。但是，如果文件位于我的应用程序根目录内，它就可以工作。

下面是代码，当点击操作按钮时执行。

```
- (void)tappedPrintButton:(id) sender { 
UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];

NSURL *fileURL = (NSURL *)[self currentPreviewItem];

NSData *data = [NSData dataWithContentsOfURL:fileURL];

if  (pic && [UIPrintInteractionController canPrintData:data] ) {

    pic.delegate = self;

    UIPrintInfo *printInfo = [UIPrintInfo printInfo];

    printInfo.outputType = UIPrintInfoOutputGeneral;

    printInfo.jobName = [(NSURL *)[self.files objectAtIndex:0] lastPathComponent];

    printInfo.duplex = UIPrintInfoDuplexLongEdge;

    pic.printInfo = printInfo;

    pic.showsPageRange = YES;

    pic.printingItem = data;

    void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =

    ^(UIPrintInteractionController *pic, BOOL completed, NSError *error) {

        if (!completed && error)

            NSLog(@"FAILED! due to error in domain %@ with error code %u",

                  error.domain, error.code);

    };

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        [pic presentFromBarButtonItem:self.myActionBarButton animated:YES

                    completionHandler:completionHandler];

    } else {

        [pic presentAnimated:YES completionHandler:completionHandler];

    }
}
} 
```

我无法想象这个问题。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:19:06.243

的`printingItem`属性`UIPrintInteractionController`被[记录](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPrintInteractionController_Class/Reference/Reference.html)为仅支持 PDF 和图像数据：

> 该对象必须是 NSURL、NSData、UIImage 或 ALAsset 类的实例。前两种类型的对象必须引用或包含图像数据或 PDF 数据。

如果要用于`UIPrintInteractionController`打印 Office 文档等非 PDF、非图像数据，则必须改为使用该`printFormatter`属性。

您可以通过其打印格式化程序打印`UIWebView`,`UITextView`和`MKMapView`内容，而无需任何自定义逻辑。这记录在[UIViewPrintFormatter 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewPrintFormatter_Class/Reference/Reference.html)中：

> UIViewPrintFormatter 类的一个实例布置视图的绘制内容以进行打印。视图的内容可以跨越多个页面。
> 
> 三个系统类的实例为应用程序提供可用的视图打印格式化程序：UIKit 框架的 UIWebView 和 UITextView，以及 Map Kit 框架的 MKMapView。要获取打印作业的视图打印格式化程序，请调用 UIView 方法 viewPrintFormatter 并初始化打印格式化程序继承的布局属性。

不幸的`QLPreviewController`是，没有记录为返回有效的`viewPrintFormatter`. 这意味着您将无法使用`QLPreviewController`. 取而代之的是，您可以考虑使用 a`UIWebView`来呈现文档。

# javascript - 是否有任何保留换行符的 javascript minifiers？

> ID：10854507
> 
> 赞同：8
> 
> 时间：2012-06-01T17:00:37.973
> 
> 标签：javascript, minify

客户端的错误报告总是在第 1 行报告错误（因为文件被缩小了）不是很有用。我想在保留换行符的同时缩小我的代码，以便获得有意义的行号。

是否有任何 javascript minifiers 可以选择保留换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:17:46.657

看看Google 的[闭包编译器](http://closure-compiler.appspot.com/home)启用了漂亮的打印选项

如果您使用命令行工具，还有很多选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:42:45.733

我一直在寻找同样的东西，虽然我没有找到我想要的东西，但我刚刚看到（现已弃用）[YUI Compressor](http://yui.github.com/yuicompressor/)有一个`--line-break 0`开关，它会导致在每个分号后插入一个换行符。因为无论如何我都在使用 YUI Compressor，所以我认为这将用于我的调试目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:38:37.570

我认为就是这样： [https ://developers.google.com/closure/compiler/docs/inspector](https://developers.google.com/closure/compiler/docs/inspector)

正如 Fabien 所说的 Closure 编译器......但是在第三次寻找这个之后，我发现 Closure 编译器可以生成优化代码和原始源之间的映射文件:)

您也不限于使用网络服务，您可以将其作为独立应用程序下载 :)

[https://developers.google.com/closure/compiler/](https://developers.google.com/closure/compiler/)

双赢

# php - 特定服务器上的递归失败

> ID：10854508
> 
> 赞同：0
> 
> 时间：2012-06-01T17:00:41.960
> 
> 标签：php, recursion

有通常的递归函数。它迭代两次——第一次主迭代和第二次内部迭代：

```
function recursive() {
    global $a, $stop;

    $stop++;

    foreach($a as $val) {
        echo $val;
        if ( $stop < 2 )
            recursive();
    }
}

$a = array(1,2);
$stop = 0;
recursive(); 
```

结果是`1122`。一切都是对的。第二次迭代在第一次内：`1(12)2`

我改变了我的服务器和新的服务器 echos `112`。第一个循环在第二次迭代后停止：`1(12)`.
它总是停止。只有一次迭代是可能的，然后就完成了。

这台服务器有什么问题？它是任何php的选项还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:03:31.170

尝试使用静态值而不是全局变量（在您的情况下没用）：

```
function recursive($a) {
    static $stop = 0;

    $stop++;
    foreach($a as $val) {
        echo $val;
        if ( $stop < 2 )
            recursive($a);
    }
}

$a = array(1,2);
recursive($a); 
```

演示：[http ://codepad.org/rP7HVKXx](http://codepad.org/rP7HVKXx)

# android - 我应该在方法 startactivity 中添加什么？

> ID：10854511
> 
> 赞同：0
> 
> 时间：2012-06-01T17:01:06.350
> 
> 标签：android

我正在创建一个带有列表视图的应用程序。我想从列表视图中的一个项目转到另一个活动。我有以下代码：

```
 package be.intec.brussel;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Topstores<TextView> extends Activity{

    String[] items = {"C&A", "H&M","Esprit", "Tommy Hilfinger", "Shoe Discount", "Brantano", "Bell&Bo", "Scapino", "Zara", "Kruidvat"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.topstores);
        ListView ShopView = (ListView) findViewById(R.id.ShopView);

        ShopView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.test_list_item, items));

    }

    protected void onListItemClick(ListView ShopView, View v, int position, long id) {
        if("C&A".equals(items[position])){
            startActivity(Rating.class);
        }

    }

    private void startActivity(Class<Rating> class1) {

    }
} 
```

我的问题是：我应该在 startactivity 方法之后放什么？

而且我还想知道如何在其他活动的文本视图中设置项目的名称（标题）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:03:44.567

我认为没有必要像这样创建方法，`startActivity` 因为我们已经有了......

```
ListView ShopView = (ListView) findViewById(R.id.ShopView);
ShopView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.test_list_item, items));
ShopView.setOnItemClickListener(new OnItemClickListener() {
          @Override
          public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                        long arg3) {

               if("C&A".equals(items[position])){
                       Intent intent = new Intent(Topstores.this,Rating.class);
                       intent.putExtra("itemname",items[position]); 
                       startActivity(intent);
                }
          }}); 
```

**现在在评分活动中...**

```
class Rating extends Activity{

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ratingxml);

   Bundle b =getIntent().getExtras();
   String itemname = b.getString("itemname");//here you get name 
   System.out.println(itemname);

   textview.setText(itemname);//here set item in textview

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:09:36.150

```
private void startActivity(Class<Rating> clazz) {
    Intent intent = new Intent(Topstores.this, clazz);
    startActivity(intent);
} 
```

该代码为 Rating 类创建一个明确的意图并启动 Rating 活动。

# c++ - 在 C++ 中使用变量创建部分文件名

> ID：10854514
> 
> 赞同：0
> 
> 时间：2012-06-01T17:01:21.647
> 
> 标签：c++, variables, filenames

我正在制作一个使用“graphics.h”标题的 C++ 程序/游戏，并且我正在尝试创建一个带有瓷砖的地图。有 66 个图块，每个文件名都不同。我想将它们全部显示出来，而不必一遍又一遍地编写几乎相同的行。

这是我到目前为止所拥有的（伪代码）：

```
filename = a + number + b;
readimagefile (filename, left, top, right, bottom); 
```

其中 a 是“bg(”，后跟 1 到 66 之间的数字，然后是 b，即“).bmp”。我希望文件名是这样的：“bg(number).bmp”。但是，我上面显然是不正确的语法。

我该怎么做呢？提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T17:04:01.347

```
std::stringstream str;
str << a << number  <<  b << ".bmp"; 
```

然后`str.str()`返回一个 c++ std::string 并`str.str().c_str()`返回一个 'c' 类型的字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:07:20.450

`to_string`在 C++11 中，可以使用(或)将数字转换为其字符串表示形式`to_wstring`。例如，

```
a + std::to_string(number) + b 
```

（Visual C++ 2012 标准库实现包括`to_string`和`to_wstring`。）

这比创建 a`std::stringstream`来进行格式化要简单得多（代码更少，更容易阅读）（它的功能也更小，也更受限制，但是对于像您描述的那样的简单用例，这就足够了）。

或者，可以使用[Boost.LexicalCast将对象转换为字符串；](http://www.boost.org/libs/conversion/lexical_cast.htm)在内部它使用 a `std::stringstream`，但它可以针对数字类型和其他类型进行优化，对于这些类型，使用流将是矫枉过正的。使用`boost::lexical_cast`：

```
a + boost::lexical_cast<std::string>(number) + b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:04:29.727

```
for(int i=0; i<66; i++)
{
   stringstream stream;
   stream << "bg(" << i << ").bmp";
   string fileName = stream.str();
} 
```

# sql - 如何创建 SQL DELETE 语句来删除第三个表中的行？

> ID：10854520
> 
> 赞同：3
> 
> 时间：2012-06-01T17:02:18.340
> 
> 标签：sql, sqlite

这是我的 SQLite 数据库的结构： ![在此处输入图像描述](../Images/9b188165ee53a3f5fdf4af7afd5d275a.png)

我正在尝试删除属于特定 CustData.Cust_ID 的选择 OrderInfo.Cust_ID 的所有 OrderData。这是我的 DELETE 语句，它给了我错误：“没有这样的列：CustData.Customer_ID”

```
DELETE FROM OrderData
   WHERE CustData.Customer_ID = OrderInfo.Cust_ID 
   AND OrderData.Order_ID = OrderInfo.Order_ID 
   AND CustData.Bus_Name = 'Albertsons' 
```

我知道 SQLite 不支持 DELETE 语句中的 JOIN，所以我只剩下 WHERE 和 AND；有人可以告诉我正确的说法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:08:52.797

您可以尝试使用 IN 子句的子查询。就像是：

```
DELETE FROM OrderData WHERE OrderData.Order_ID IN
(SELECT OrderInfo.Order_ID 
FROM OrderInfo
JOIN CustData on OrderData.Order_ID = OrderInfo.Order_ID 
WHERE CustData.Bus_Name = 'Albertsons') 
```

要在删除之前测试查询，只需执行以下操作：（将返回将被删除查询删除的所有行）

```
SELECT * FROM OrderData WHERE OrderData.Order_ID IN
(SELECT OrderInfo.Order_ID 
FROM OrderInfo
JOIN CustData on OrderData.Order_ID = OrderInfo.Order_ID 
WHERE CustData.Bus_Name = 'Albertsons') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:07:23.523

你不能。

> SQLite（v3.6.19 下）不支持外键约束

，但您可以使用`triggers`例如 Check [this](http://www.sqlite.org/cvstrac/wiki?p=ForeignKeyTriggers)它会帮助您。

如果您有 v 3.6.19，它已经支持 ON`UPDATE`或`DELETE CASCADE` Read [SQLite Foreign Key Support的外部约束](http://www.sqlite.org/foreignkeys.html)

**编辑：**

**或喜欢写@Paul Sasik**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:09:44.007

尝试

```
DELETE FROM OrderData
WHERE OrderData.Order_ID IN (SELECT oi.Order_ID FROM OrderInfo oi 
  INNER JOIN CustData cd ON oi.Cust_id = cd.Customer_Id WHERE cd.Bus_Name='Albertsons') 
```

# javascript - 如何在 JSF2 中禁用 .css 和 .js 等静态资产的缓存？

> ID：10854522
> 
> 赞同：4
> 
> 时间：2012-06-01T17:02:55.130
> 
> 标签：javascript, css, jsf, websphere, browser-cache

我正在尝试设置一个不缓存静态资产 .css 和 .js 的项目。对于某些人来说，我们似乎遇到了一些内部缓存问题，我希望这能解决这个问题。

我有一个相位监听器，基本上是这个[http://turbomanage.wordpress.com/2006/08/08/disable-browser-caching-in-jsf/的略微修改版本](http://turbomanage.wordpress.com/2006/08/08/disable-browser-caching-in-jsf/)

我的课：

```
package com.ods.common.jsf.phaselistener;

import javax.faces.context.FacesContext;
import javax.faces.event.PhaseEvent;
import javax.faces.event.PhaseId;
import javax.faces.event.PhaseListener;
import javax.servlet.http.HttpServletResponse;

public class CacheControlPhaseListener implements PhaseListener
{
public PhaseId getPhaseId()
{
    return PhaseId.RENDER_RESPONSE;
}

public void afterPhase(PhaseEvent event)
{
}

public void beforePhase(PhaseEvent event)
{
    FacesContext facesContext = event.getFacesContext();
    HttpServletResponse response = (HttpServletResponse) facesContext
            .getExternalContext().getResponse();
    response.setHeader("Cache-control", "no-cache"); // HTTP 1.1
    response.setHeader("Cache-control", "no-store"); // HTTP 1.1
    response.setHeader("Cache-control", "must-revalidate"); // HTTP 1.1
    // response.setHeader("Pragma","no-cache"); //HTTP 1.0
    response.setHeader("Allow", "GET"); // Allowing GET Method only
    response.setHeader("Allow", "POST");// Allowing POST Method only
    response.setDateHeader("Expires", -1); // prevent caching at the proxy server

            /*what I've added*/
    response.setHeader("Pragma", "no-cache");
    response.setHeader("Content-type", "x-javascript");
            //below are the content types I'm seeing for the css/js assets via Firebug
    response.setHeader("Content-type", "application/x-javascript");
    response.setHeader("Content-type", "text/css");
}
} 
```

我对 faces-config.xml 的补充：

```
<lifecycle>
    <phase-listener id="nocache">com.ods.common.jsf.phaselistener.CacheControlPhaseListener</phase-listener>
</lifecycle> 
```

我的 .xhtml 页面过去有一个 expires 标头：

```
Expires Thu, 01 Jan 1970 00:00:00 GMT 
```

所以这似乎有点工作......我假设这个日期来自 Expires -1（将其设置为 unix 时代）。

如您所见，我尝试为一些 javascript 和 css 设置适当的内容类型标头，但这些资产的到期日期是未来一周。

有人有想法么？另外，我是前端开发人员，而不是后端 Java 人。我可以乱用 Java，但我绝对不是 Java 开发人员。这也是我在 JSF 的第一份工作，所以尽可能地低调一点就好:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T17:11:03.560

随着`setHeader()`您覆盖任何先前设置的标题。而是使用`addHeader()`，或者只是将所有值以逗号分隔作为标题值。这是完整的集合：

```
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
response.setDateHeader("Expires", 0); // Proxies. 
```

你的另一个错误是 a`PhaseListener`不是最好的地方。它仅在 JSF 页面请求上调用，而不是在由 web 浏览器独立调用的静态资源请求上调用。换句话说，只有 JSF 页面本身禁用了缓存，但所有`<script>`, `<link>`,`<img>`等都会生成不会调用的新请求，`PhaseListener`因为这些不是 JSF 页面。

而是使用[`Filter`](https://stackoverflow.com/tags/servlet-filters/info).

```
@WebFilter("/*")
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0); // Proxies.
        chain.doFilter(req, res);
    }

    // ... (just keep init() and destroy() NO-OP)
} 
```

如果您以 Servlet 3.0 容器（Tomcat 7、Glassfish 3 等）为目标，则不需要`web.xml`（或）注册。`faces-config.xml`将`@WebFilter("/*")`自动注册它并将其映射到一个 URL 模式`/*`，从而覆盖**所有**请求。

### 也可以看看：

*   [如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407#2068407)

* * *

**与具体问题无关**，完全禁用静态资产缓存并不是最好的主意。它不必要地消耗网络带宽。而是寻找不同的解决方案，例如在查询字符串中包含服务器启动时间戳。

例如

```
<script src="foo.js?#{startup.time}"></script> 
```

之内`faces-config.xml`

```
<managed-bean>
    <managed-bean-name>startup</managed-bean-name>
    <managed-bean-class>java.util.Date</managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
</managed-bean> 
```

此示例将强制浏览器在服务器重新启动时重新加载资产。

# tridion - Tridion Schema 锁定特定组

> ID：10854524
> 
> 赞同：6
> 
> 时间：2012-06-01T17:03:10.120
> 
> 标签：tridion, tridion-2011

我正在尝试将一些模式锁定到特定组。例如; 架构“SuccessStroy”将不适用于“GroupB”。我将权限应用于架构所在的文件夹。文件夹权限的方式是“无读取”访问“GroupB”。我将启用的隐藏组织项目设置为 true。

从 GUI 中，当 GroupB 用户登录并尝试创建组件时，他们会在下拉菜单中看到模式“SuccessStory”，但当他们选择时，他们会看到一条消息“您无权访问..”。所以权限肯定是正确的，但是当下拉菜单出于某种原因显示时，它不尊重权限并且仍然为用户提供选择受限模式的选项。

有人经历过这种行为吗？

环境：Tridion 2011 GA + HR 1、Windows 2008 R2 Sp1、.net 4。

注意：行为不仅限于模式，我注意到页面模板和组件模板也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:10:00.667

这是 2011 GA 上的缺陷，我不确定是否有修补程序，但它肯定已在 SP1 上修复。

我找不到专门解决此问题的修补程序，如果您在升级前需要修补程序，可能值得与客户支持联系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:11:17.980

**解决方案/修复：** Tridion 客户支持为 2011 GA + HR # 1 提供了 hotifx，该问题现已解决。如果有人遇到同样的问题，请联系客服。

理想情况下，如果您可以迁移到问题已经修复的 Tridion 2011 SP1 版本，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:37:31.960

我们在页面模板方面也遇到了这样的问题。并且那个时间修补程序不可用。根据 Nuno Linhares 的建议，我们联系了客户支持。页面模板的修补程序不可用。

# php - 最小化同一张表Mysql上的选择查询

> ID：10854529
> 
> 赞同：0
> 
> 时间：2012-06-01T17:03:26.520
> 
> 标签：php, mysql, database, select

我一直在试图弄清楚如何将这些**php-mysql**查询减少到最低限度。我想写成一个单独的查询来获取所有数据。

* * *

```
$db_u = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='username'"));
$db_p = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='password'"));
$db_e = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='email'"));
$db_t = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='tag'"));
$db_a = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='active'"));
$db_v = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='version'"));
$db_ti = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='time'"));
$db_wa = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='warn'"));
$data_dis = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='dis'")); 
```

* * *

执行上述操作有点让 Ram 陷入困境。任何帮助表示赞赏。

检查了其他问题，没有一个符合要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:06:36.193

尝试**IN** 而不是这么多查询

```
 SELECT * FROM u_settings WHERE setting IN ('username', 'password','email','tag','active','version','time','warn','dis'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:08:43.023

是的，编写一个没有 WHERE 子句的 SELECT 查询。这将从表中获取所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:15:54.553

如果要保留每个变量，可以创建一个数组并以这种方式进行。

```
$keys = array(
'db_u' => 'username',
'db_p' => 'password',
'db_t' => 'tag'
);

foreach($keys as $key => $value) {
    &$keys[$key] = mysql_fetch_array(mysql_query("SELECT * FROM u_settings WHERE setting='{$value}'"));
} 
```

我没有检查代码，但我想你明白了。它将每个结果存储在一个数组中。

可能有一种更简单的方法可以做到这一点。

# php - XML 到字符串以保存在 SQL (PHP) 中

> ID：10854530
> 
> 赞同：0
> 
> 时间：2012-06-01T17:03:28.993
> 
> 标签：php, sql, xml, string

我有一个 simplexml 变量，它存储一个 xml 文件，我需要做的就是将其转换为字符串，然后将其保存在 SQL 数据库文件中，我试过：

```
echo $xml->asXML(); 
```

但它只显示标签的内容，我需要获取所有结构来保存它。

有没有办法从 PHP 中的 XML 变量中获取完整的字符串？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:51:56.130

好的，就像有人说的那样，只需使用

```
$test = $xml_variable->asXML(); 
```

它将整个 xml 存储在 $test 变量中，唯一的问题是，当您回显它时，它只会显示标签值，而不是标签本身。这就是为什么我认为它不起作用。

无论如何，我更新了我的 sql 表中的 xml 字段，并用格式正确的 xml 字符串填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:24:31.123

您可以使用 php xml 解析功能。

php.net/manual/en/function.xml-parse.php#87920

```
 <?php
function xml2array($url, $get_attributes = 1, $priority = 'tag')
{
    $contents = "";
    if (!function_exists('xml_parser_create'))
    {
        return array ();
    }
    $parser = xml_parser_create('');
    if (!($fp = @ fopen($url, 'rb')))
    {
        return array ();
    }
    while (!feof($fp))
    {
        $contents .= fread($fp, 8192);
    }
    fclose($fp);
    xml_parser_set_option($parser, XML_OPTION_TARGET_ENCODING, "UTF-8");
    xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
    xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1);
    xml_parse_into_struct($parser, trim($contents), $xml_values);
    xml_parser_free($parser);
    if (!$xml_values)
        return; //Hmm...
    $xml_array = array ();
    $parents = array ();
    $opened_tags = array ();
    $arr = array ();
    $current = & $xml_array;
    $repeated_tag_index = array ();
    foreach ($xml_values as $data)
    {
        unset ($attributes, $value);
        extract($data);
        $result = array ();
        $attributes_data = array ();
        if (isset ($value))
        {
            if ($priority == 'tag')
                $result = $value;
            else
                $result['value'] = $value;
        }
        if (isset ($attributes) and $get_attributes)
        {
            foreach ($attributes as $attr => $val)
            {
                if ($priority == 'tag')
                    $attributes_data[$attr] = $val;
                else
                    $result['attr'][$attr] = $val; //Set all the attributes in a array called 'attr'
            }
        }
        if ($type == "open")
        {
            $parent[$level -1] = & $current;
            if (!is_array($current) or (!in_array($tag, array_keys($current))))
            {
                $current[$tag] = $result;
                if ($attributes_data)
                    $current[$tag . '_attr'] = $attributes_data;
                $repeated_tag_index[$tag . '_' . $level] = 1;
                $current = & $current[$tag];
            }
            else
            {
                if (isset ($current[$tag][0]))
                {
                    $current[$tag][$repeated_tag_index[$tag . '_' . $level]] = $result;
                    $repeated_tag_index[$tag . '_' . $level]++;
                }
                else
                {
                    $current[$tag] = array (
                        $current[$tag],
                        $result
                    );
                    $repeated_tag_index[$tag . '_' . $level] = 2;
                    if (isset ($current[$tag . '_attr']))
                    {
                        $current[$tag]['0_attr'] = $current[$tag . '_attr'];
                        unset ($current[$tag . '_attr']);
                    }
                }
                $last_item_index = $repeated_tag_index[$tag . '_' . $level] - 1;
                $current = & $current[$tag][$last_item_index];
            }
        }
        elseif ($type == "complete")
        {
            if (!isset ($current[$tag]))
            {
                $current[$tag] = $result;
                $repeated_tag_index[$tag . '_' . $level] = 1;
                if ($priority == 'tag' and $attributes_data)
                    $current[$tag . '_attr'] = $attributes_data;
            }
            else
            {
                if (isset ($current[$tag][0]) and is_array($current[$tag]))
                {
                    $current[$tag][$repeated_tag_index[$tag . '_' . $level]] = $result;
                    if ($priority == 'tag' and $get_attributes and $attributes_data)
                    {
                        $current[$tag][$repeated_tag_index[$tag . '_' . $level] . '_attr'] = $attributes_data;
                    }
                    $repeated_tag_index[$tag . '_' . $level]++;
                }
                else
                {
                    $current[$tag] = array (
                        $current[$tag],
                        $result
                    );
                    $repeated_tag_index[$tag . '_' . $level] = 1;
                    if ($priority == 'tag' and $get_attributes)
                    {
                        if (isset ($current[$tag . '_attr']))
                        {
                            $current[$tag]['0_attr'] = $current[$tag . '_attr'];
                            unset ($current[$tag . '_attr']);
                        }
                        if ($attributes_data)
                        {
                            $current[$tag][$repeated_tag_index[$tag . '_' . $level] . '_attr'] = $attributes_data;
                        }
                    }
                    $repeated_tag_index[$tag . '_' . $level]++; //0 and 1 index is already taken
                }
            }
        }
        elseif ($type == 'close')
        {
            $current = & $parent[$level -1];
        }
    }
    return ($xml_array);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:26:00.130

也许试试 DomDocument：

```
$xml = new DomDocument();
$xml->loadXML($xml_str);
echo $xml->saveXML(); 
```

供参考：[http ://us.php.net/manual/en/domdocument.loadxml.php](http://us.php.net/manual/en/domdocument.loadxml.php)

# python - psycopg2 列的类型为 date[]，但表达式的类型为 text[]

> ID：10854532
> 
> 赞同：1
> 
> 时间：2012-06-01T17:03:43.563
> 
> 标签：python, django, psycopg2

我正在尝试保存一组日期。我提供了一个日期对象列表，但 psycopg2 抛出了上述错误。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:11:45.107

这是 PostgreSQL 错误：您需要显式转换。`::date[]`在值或占位符之后添加。

# performance - 用于检测出现在长列表中的对的算法

> ID：10854534
> 
> 赞同：3
> 
> 时间：2012-06-01T17:03:47.467
> 
> 标签：performance, algorithm, list, search, count

给定一个长序列的 N（不一定是不同的）数字，比如说

```
{1, 50, 3, 99, 1, 2, 100, 99, 4, 100, 4, 100} (could be very long) 
```

和一小组 M 有序对，比如说

```
(1, 2)

(2, 1)

(1, 3)    

(99, 50)

(99, 100) 
```

我想检测有序对是否出现在列表中的**任何位置**（它们可以分开，但**顺序很重要**）。例如，上面的计数将是：

```
(1, 2): 2 (each 1 pairs with the later 2)

(2, 1): 0 (no 1's come after the 2)

(1, 3): 1 (only one of the 1's come before the 3)

(99, 50): 0 (no 99's come before the 50)

(99, 100): 5 (3 times for the first 99 and 2 times for the second) 
```

假设有序对中的每个数字都保证出现在列表中，是否存在一种算法可以比简单的 O(N * M) 时间更快地提取这些计数（通过蛮力搜索每个有序对来实现）？

作为一个附带问题，如果我们将自己限制为仅出现布尔值而不是计数，是否会有一种快速算法？那是：

```
(1, 2): yes

(2, 1): no

(1, 3): yes

(99, 50): no

(99, 100): yes 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T17:14:37.117

保留两个哈希值，一个映射数字到它们出现的最小位置，一个映射数字到它们出现的最大位置。如果 minimum[a] < great[b] （并且两个哈希键都存在），则有序对 (a, b) 按顺序出现。预处理时间是线性的，空间使用是线性的，查询时间是恒定的（在关于散列复杂性的标准假设下）。

至于计数版本，我能想到的最好的方法是保持一个哈希将每个数字映射到它按排序顺序出现的位置。要查询一对，“合并”位置列表，跟踪到目前为止 a 元素的数量和对出现的数量。When a b-element is selected to be next, increment the number of pairs by the number of a-elements. When an a-element is selected to be next, increment the number of a-elements. （如果 a == b，返回长度选择 2。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:14:07.097

这是一个 O(n) 解决方案...

```
unordered_map<int, unordered_set<int>> pairs = ...;

void process(int n)
{
    // keep list of pairs that have their first seen, indexed by second...
    static unordered_map<int, vector<pair<int,int>>> live;

    // if next item is in live list, we have found some pairs...
    for (auto found_pair : live[n])
        process(found_pair);

    // add pairs to live list that have a first of the current item
    for (auto pair : pairs[n])
        for (auto second : pair.second)
           live.insert(second, make_pair(pair.first, second));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:26:39.967

您可以保留活动对的列表，并循环遍历数字列表。每当您找到一对中的第一个数字时，您就将该对复制到活动列表中。每当您在活动列表中找到一对的第二个数字时，就增加该对的计数。

C# 中的示例：

```
public class Pair {

  public int First { get; private set; }
  public int Second { get; private set; }
  public int Count { get; set; }

  public Pair(int first, int second) {
    First = first;
    Second = second;
    Count = 0;
  }

}

int[] values = {1, 50, 3, 99, 1, 2, 100, 99, 4, 100, 4, 100};

List<Pair> pairs = new List<Pair>();
pairs.Add(new Pair(1, 2));
pairs.Add(new Pair(2, 1));
pairs.Add(new Pair(1, 3));
pairs.Add(new Pair(99, 50));
pairs.Add(new Pair(99, 100));

List<Pair> active = new List<Pair>();

foreach (int value in values) {
  foreach (Pair p in active) {
    if (p.Second == value) {
      p.Count++;
    }
  }
  foreach (Pair p in pairs) {
    if (p.First == value) {
      active.Add(p);
    }
  }
}

foreach (Pair p in pairs) {
  Console.WriteLine("({0},{1}) : Count: {2}", p.First, p.Second, p.Count);
} 
```

输出：

```
(1,2) : Count: 2
(2,1) : Count: 0
(1,3) : Count: 1
(99,50) : Count: 0
(99,100) : Count: 5 
```

改进思路：

*   您可以将 a`Dictionary<int, List<Pair>>`用于对的列表。
*   您可以在对中放置一个活动计数，因此您无需在活动列表中添加另一个引用，而是增加活动计数。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-01T17:10:32.757

假设所有数字都不同，您不认为蛮力解决方案是唯一的解决方案。

# jquery - Keyup 和 Change 功能传输和删除文本

> ID：10854541
> 
> 赞同：0
> 
> 时间：2012-06-01T17:04:20.297
> 
> 标签：jquery

让我以此作为开头：我对事物的编码方面非常陌生，我来自设计背景......但是我们开始......

我正在使用 keyup 并更改 jquery 以将值传输到将要打印的显示图像（这些值也插入到数据库中）。

我的问题是我的输入选项包括大小和描述，但我想用 keyup/change 传输的只是大小。

```
 Cake Type: <select name="Cake" id="cake">
    <option value="5 3/8&#34; Cake Pie" >5 3/8" - Cake Pie</option>
    <option value="5 7/8&#34; Pretzal Pie" >5 7/8" - Pretzal Pie</option>
    <option value="5 1/2&#34; Wing Ding" >5 1/2" - Wing Ding</option>
    <option value="5 1/2&#34; Objectonator" >5 1/2" - Objectonator</option>
    </select> 
```

目前我使用这个keyup并更改jquery来传输值：

```
$("#cake").change(function () {
    var value = $(this).val();
    $("#cake_transfer").text(value);
}).keyup();
$("#cake").keyup(function () {
    var value = $(this).val();
    $("#cake_transfer").text(value);
}).keyup(); 
```

那么是否可以删除描述并仅转移尺寸（即：5 1/2"）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:10:51.663

```
$("#cake").on('change keyup', function() {
    var value = $('option:selected', this).text();
    $("#cake_transfer").text(value.split('-')[0]);
}).keyup(); 
```

**[演示](http://jsfiddle.net/thecodeparadox/8ELQM/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:07:40.293

尝试这样的事情：

```
$("#cake").on('change keyup', function () {
    var value = $(this).val().split(' ');  // split into words
    var size = value[0] + " " + value[1];  // first 2 words
    $("#cake_transfer").text(size);
});​ 
```

我正在使用[`.on()`](http://api.jquery.com/on/)，以便您可以组合 2 个事件（`keyup`和`change`）并将值拆分为单词 - 只需获取 2 个单词 - 问题在于它相当固定......如果你可以用 a`-`或`%`它分隔大小和描述会容易得多

[这里的工作示例](http://jsfiddle.net/manseuk/rLRFx/)

# python - 如果列表中的项目存在：做事

> ID：10854542
> 
> 赞同：0
> 
> 时间：2012-06-01T17:04:25.830
> 
> 标签：python, regex, indexing

假设我有一个我已经编辑过的列表，所以它不再只是被称为“列表”了

```
my_list = ['a b', 'b c d e', 'c', 'd e f g h', 'e f g h i j', 'f g h', 'g h'] 
```

我正在尝试检查列表中的特定元素，并查看其中一个元素是否包含某个字符串。我一直在使用以下代码中的内容：

```
for i in range(len(my_list)):
    splitList = my_list[i].split(' ')
    if splitList[3] == "c":
        print "True"
    else:
        print "False" 
```

但我真正想做的是检查 splitList[3] 是否存在，如果存在，如果它 == "c" 或简单地打印元素中的第三个 "thing"。（我的问题很笼统，但我的实际数据正在寻找一个特定的 3 个字符串）我确信正则表达式会解决我所有的问题，但我已经寻找完美的正则表达式解决方案好几天了，不知所措并且没有解决方案。我的数据非常可预测，我只需要检查列表元素中的第二个单词是否存在。

**有没有一种简单的pythonic方法来检查a列表是否甚至在特定索引处有某些东西，以及它是否从那里继续？**

* * *

如果您想建议一个正则表达式解决方案，我列表中的第 24 个元素始终是“G# Abc”，“#”可以是 1-12（含），然后第 25 个元素也可能是
“G# Abc”，“#”为 1-12如果第 25 个元素不是“G# Abc”格式，则该元素与任何其他元素不相关。如果它的格式为“G# Abc”，我需要将数字添加到新列表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T17:07:51.620

> [有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)

```
relevant_elements = set()
for values in my_list:
    try:
        elt = values.split()[3]
    except IndexError:
        continue
    else:
        if is_correct_format(elt):
            relevant_elements.add(elt) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T17:11:59.543

使用函数式编程的力量。

使用 Python2：

```
from itertools import imap
for i in (x[3] for x in imap(str.split, input_strings) if len(x) >= 4):
     print i 
```

使用 Python3：

```
for i in (x[3] for x in map(str.split, input_strings) if len(x) >= 4):
     print(i) 
```

（[@thg435](https://stackoverflow.com/users/989121/)提到：“您可以使用`from future_builtins import map`and`from __future__ import print_function`使 py2 解决方案与 py3 相同。”）

解释：

*   [`str.split`](http://docs.python.org/library/stdtypes.html#str.split)是一个函数，它将输入拆分为（运行）空白字符。
*   [`map`](http://docs.python.org/library/functions.html#map)分别 [`imap`](http://docs.python.org/library/itertools.html#itertools.imap)将其应用于列表的所有成员。这两个函数都会生成一个[生成器](https://stackoverflow.com/questions/3795656/what-are-python-generators)。
*   测试`if len(x) >= 4`是否存在第四项（位于索引 3）。
*   生成一个生成器，它采用拆分字符串列表的`(x[3] for x in ... if ...)`第四个元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T17:09:58.313

给定一个任意字符串`'x y z'`，用 拆分成一个列表`['x', 'y', 'z']`，`'x y z'.split()`测试索引是否存在的简单 Python 方法是`len`。稍微修改上面的代码：

```
# don't use `list` as a variable name; it masks the built-in `list` constructor
str_list = ['a b', 'b c d e', 'c', 'd e f g h', 'e f g h i j', 'f g h', 'g h']
for s in str_list:
    split_list = s.split(' ')
    if len(split_list) > 3 and split_list[3] == 'c':
        print "True"
    else:
        print "False" 
```

# c++ - 如何处理具有完全不同构建系统的第三方库？

> ID：10854544
> 
> 赞同：25
> 
> 时间：2012-06-01T17:04:27.270
> 
> 标签：c++, c, dependencies, build-dependencies

C++（和 C，尽管在那儿不太重要）标准规定程序中的所有翻译单元都需要具有相同的定义；这包括编译器开关之类的东西。例如，在 MSVC++ 上，必须在所有翻译单元中链接到正确版本的 C 运行时库（ `/MT`vs `/MD`vs `/MTd`vs ）。`/MDd`

但是，我们想使用一些第三方依赖项，其中有几件事：

*   他们都使用不同的构建系统（有一个 autoconf，有一个 cmake，还有一个似乎有它自己的手卷的东西..）
*   构建系统并非都在其配置中公开这些类型的开关，并且硬编码的开关在不同的系统中设置不同。（例如，一个图书馆力量`/MD`and `/MDd`，而另一个力量`/MT`and `/MTd`）

我们不确定处理这类事情的最佳方法是什么。我们讨论了以下选项：

*   围绕任何第三方依赖项构建我们自己的构建系统。
    *   PRO：我们知道事情会匹配
    *   PRO：我们知道我们可以以正确的方式进行跨平台支持
    *   CON：我们并不确切知道每个第三方构建系统是如何工作的
    *   缺点：很多很多的工作
    *   CON：如果第三方依赖发生变化则中断
*   尝试使用第三方构建系统，并尝试修改它们以做我们需要的事情。
    *   PRO：似乎工作量更少
    *   CON：我们可能会破坏第三方系统
    *   CON：如果第三方依赖发生变化则中断
    *   CON：迫使我们自己的构建变得非常复杂

我们不知道该怎么做；我们无法相信只有我们一个人遇到这些问题。我们应该做上面的选择之一，还是我没有想到的第三种选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T18:37:06.527

严格来说，您并不需要所有库都链接到同一个运行时。假设它们是 DLL，那么只有当它们通过 DLL 边界传递 CRT 数据结构时才会出现问题。使用一个运行时在 DLL 中创建一个`FILE*`DLL，并从链接到另一个运行时的 DLL 中使用它是灾难的根源。使用一个运行时调用`malloc`或`new`从 DLL 调用，和`free`/`delete`从另一个运行时会导致很多有趣的问题。

但只要所有与 CRT 相关的内容都保存在 DLL 内部，您就可以安全地链接到使用另一个 CRT 的 DLL。这也意味着您的调试版本可以使用与发布 CRT 链接的库。同样，只要您不尝试跨库混合 CRT 数据结构。

另请注意，大多数编译器标志不会影响 ABI，因此它们可以在库（或文件）之间安全地不同。改变 ABI 的通常是显而易见的，例如强制打包或堆栈对齐。

所以我们所做的基本上是这样的：

*   只要有可能，我们都会自己建造图书馆。在大多数情况下，这意味着我们可以通过相当简单的方式控制它应该链接到哪个运行时。这可能需要对构建系统进行少量调整，但通常只需指定是构建调试版本还是发布版本，大多数构建系统都有选择。（如果库使用 Visual Studio 作为其构建系统，我们会尽可能将其升级到 2010）
*   我们使用图书馆自己的构建系统。其他任何事情都只是痛苦的秘诀。您希望能够相信构建系统实际上与库源代码保持同步，而确保这一点的最简单方法是使用源代码附带的构建系统。
*   如果构建库不可行，我们只需按原样使用它，然后我们只需分发它链接的任何运行时。我们试图避免这种情况，但是当没有其他选项可用时这样做是足够安全的。
*   当我们建立一个库时，我们会在我们的内部 wiki 上*准确记录它是如何完成的。*如果我们必须升级到更新版本的库或重建它，这将是一个巨大的帮助。

我们目前依赖于三个不同的 VS 运行时（2005、2008 和 2010），处理起来很痛苦，但它确实*有效*。对于其中一两个，我们总是使用发布版本，即使是在我们自己的代码的调试版本中。

维护起来有点混乱，但它确实*有效*。而且我真的找不到更好的方法来做到这一点。

当然，你应该尽量减少你有多少第三方依赖，当你选择第三方库时，它的构建系统绝对应该是一个考虑因素。有些人*比*其他人更痛苦。

但最终，您可能最终不得不使用一些没有良好构建系统的库，或者构建起来非常痛苦以至于不值得努力，或者您可以使用的库。 t 创建库的调试版本。然后拿走你能得到的。让它使用它喜欢使用的任何运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T18:13:44.910

我假设您故意不提及任何特定的库？

无论如何，你应该问问自己，你是否真的需要在*你的*构建系统中使用这个 3rd 方代码。

我们使用的第 3 方库编译一次（使用它们各自的构建脚本）并检查正确的 VC 开关，然后将 DLL 或 LIB 文件检入使用该库的应用程序的源代码控制中。

因此，第 3 方库的编译是我们在每个第 3 方版本中只做一次的事情，并且我们不会因为构建第 3 方库的复杂性而给构建系统带来负担。

我想这两种方法都有有效的论据，也许您可​​以在问题中提供一些详细信息，为什么您需要/想要在构建系统中拥有 3rd 方库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T18:28:30.200

你是对的——你不是唯一一个遇到这些问题的人！

根据我们的经验，松散的依赖关系（我猜是手动复制文件的一种奇特方式）和修改第 3 方构建系统是最有效的——尤其是在为 Windows 构建时。

我们发现一些有用的东西：-

记录您必须为特定版本应用的更改（我们使用 wiki 页面），并包括此处所需的任何步骤/依赖项（例如，构建 OpenSSL 所需的 Perl 解释器）并在使用构建之前运行任何/所有包含的测试。

我们发现重命名输出库以便始终根据 ABI 标记它们在这里非常有用，而不是使用第 3 方生成的名称。

所以第 3 方 C++ 依赖 X 最终在我们的目录结构中（提交给 svn）为

X/[version_number]/include（使用 lib 的头文件）

X/[version_number]/lib/Windows（手动构建、测试和重命名的库）

例如

X-vc100.lib X-vc100-gd.lib

ETC

（我们实际上从提升名称[http://www.boost.org/doc/libs/1_49_0/more/getting_started/windows.html#library-naming](http://www.boost.org/doc/libs/1_49_0/more/getting_started/windows.html#library-naming)复制了我们的命名，因为它们看起来完全合理）

然后，您的构建系统可以选择特定的第 3 方依赖项（对于 VS，我们使用继承的属性表，其中所有依赖项都命名为用户宏，因此只需将 $(x_inc) 添加到项目的包含目录和 $(x_lib ) 添加到库中 - 然后这些宏选择该特定项目所需的版本和 abi。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T19:07:38.457

没有明确的答案，这取决于第三方代码接口是如何设计的。如果接口是紧耦合的，例如共享非透明数据类型，最好使用您自己的构建和选项重新构建它们。您必须分析接口并确定如何集成它们。另一方面，如果接口简单且易于解耦，则可以将它们构建为dll并按需调用。当然，您将有不同版本的 C 库加载到应用程序中，它们都有不同的 io 缓冲区、内存管理等实例。

如果您有可用的源代码，更好的选择是投入更多时间将它们集成到您自己的构建中。

# actionscript-3 - 闪存桌面应用程序

> ID：10854549
> 
> 赞同：1
> 
> 时间：2012-06-01T17:04:59.017
> 
> 标签：actionscript-3, flash

当我使用窗口投影仪将 .fla 文件发布到 .exe 文件时，如何删除 Flash 应用程序顶部的默认菜单（文件、视图、控制和调试）？另外，当我发布它时，我正在尝试将我的自定义菜单添加到我的 Flash 应用程序的顶部。

我使用了其他论坛上讨论的以下代码，但没有用。请帮帮我。

```
stage.showDefaultContextMenu = false; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:13:35.490

我不认为你可以单独使用代码轻松做到这一点。您可以通过将投影仪置于全屏模式来解决它，这意味着您将看不到它。

或者，当您使用 Actionscript 3 时，为什么不构建一个 AIR 应用程序，它可以让您从应用程序中删除 chrome（窗口边框）。

# c# - 使用相同的参数启动程序的第二个副本

> ID：10854550
> 
> 赞同：6
> 
> 时间：2012-06-01T17:05:03.790
> 
> 标签：c#

应用程序使用相同参数重新启动自身的另一个副本的正确方法是什么？

我目前的方法是执行以下操作

```
static void Main()
{
    Console.WriteLine("Start New Copy");
    Console.ReadLine();

    string[] args = Environment.GetCommandLineArgs();

    //Will not work if using vshost, uncomment the next line to fix that issue.
    //args[0] = Regex.Replace(args[0], "\\.vshost\\.exe$", ".exe");

    //Put quotes around arguments that contain spaces.
    for (int i = 1; i < args.Length; i++)
    {
        if (args[i].Contains(' '))
            args[i] = String.Concat('"', args[i], '"');
    }

    //Combine the arguments in to one string
    string joinedArgs = string.Empty;
    if (args.Length > 1)
        joinedArgs = string.Join(" ", args, 1, args.Length - 1);

    //Start the new process
    Process.Start(args[0], joinedArgs);
} 
```

然而，那里似乎有很多忙碌的工作。忽略 vshost 的条带化，我仍然需要将带有空格`"`的参数包装起来，并将参数数组组合成一个字符串。

有没有更好的方法来启动程序的新副本（包括相同的参数），也许只需要传入[Enviroment.CommandLine](http://msdn.microsoft.com/en-us/library/system.environment.commandline)或使用字符串数组作为参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:28:11.970

您必须引用包含空格（可能还有其他字符，我不确定）的命令行参数。也许是这样的：

```
var commandLine = string.Join(" ", args.Select(s => s.Contains(' ') ? "\"" + s + "\"" : s));
var newProcess = Process.Start("yourapplication.exe", commandLine); 
```

此外，而不是使用

```
string[] args = Environment.GetCommandLineArgs(); 
```

您可以在您的`Main`方法中接受它们：

```
public static void Main(string[] args)
{
    var commandLine = string.Join(" ", args.Select(s => s.Contains(' ') ? "\"" + s + "\"" : s));
    var newProcess = Process.Start(Environment.GetCommandLineArgs()[0], commandLine);
} 
```

您现在拥有的 vshost 解决方法似乎很好，或者您可以通过取消选中项目调试选项卡上的“启用 Visual Studio 托管进程”来禁用整个 vshost。当你这样做时，某些调试功能确实会被禁用。[这](http://msdn.microsoft.com/en-us/library/ms242202%28v=vs.80%29.aspx)是一个很好的解释。

**编辑**：

解决它的更好方法是将代码库获取到入口点程序集：

```
public static void Main(string[] args)
{
    var imagePath = Assembly.GetEntryAssembly().CodeBase;
    var commandLine = string.Join(" ", args.Select(s => s.Contains(' ') ? "\"" + s + "\"" : s));
    var newProcess = Process.Start(imagePath, commandLine);
} 
```

无论是否启用 vshost，这都可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:37:49.197

好的，我猜这应该可行。

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto)]
private static extern System.IntPtr GetCommandLine();
static void Main(string[] args)
{
  System.IntPtr ptr = GetCommandLine();
  string commandLine = Marshal.PtrToStringAuto(ptr); 
  string arguments = commandLine.Substring(commandLine.IndexOf("\"", 1) + 2);
  Console.WriteLine(arguments);
  Process.Start(Assembly.GetEntryAssembly().Location, arguments);
} 
```

参考： http: [//pinvoke.net/default.aspx/kernel32/GetCommandLine.html](http://pinvoke.net/default.aspx/kernel32/GetCommandLine.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T17:07:42.837

这足够了吗？

```
static void Main(string[] args)
{
    string commandLineArgs = args.Join(" ");
} 
```

# javascript - 使用 javascript 驱动程序运行 RSpec/Capybara 时数据库超时

> ID：10854564
> 
> 赞同：5
> 
> 时间：2012-06-01T17:06:08.457
> 
> 标签：javascript, ruby-on-rails, database, rspec, capybara

我正在尝试使用 javascript 驱动程序（w/Webkit 或 Poltergeist）获取一些与 Capybara 一起使用的 RSpec 示例，但是在更新表时数据库存在锁定问题。以下是相关示例的一部分：

```
 scenario 'by changing the contract attributes', js: true do
    login_as @admin, scope: :user

    contract = Contract.create(number: '123',
                               start_at: Date.today,
                               end_at: Date.today + 1.month)

    visit "/contracts/#{contract.id}/edit" 
```

我正在使用设计和`Warden::Test::Helpers`登录。

运行 RSpec 需要一段时间，我得到的只是：

```
 Failure/Error: visit "/contracts/#{contract.id}/edit"
 Capybara::Driver::Webkit::WebkitInvalidResponseError:
   Unable to load URL: http://127.0.0.1:46520/contracts/1/edit 
```

日志显示存在数据库锁定问题：

```
Started GET "/contracts/1/edit" for 127.0.0.1 at 2012-06-01 12:10:26 -0400
   (0.2ms)  BEGIN
   (51083.3ms)  UPDATE `users` SET `last_sign_in_at` = '2012-06-01 16:10:26', `current_sign_in_at` = '2012-06-01 16:10:26', `last_sign_in_ip` = '127.0.0.1', `current_sign_in_ip` = '127.0.0.1', `sign_in_count` = 1, `updated_at` = '2012-06-01 16:10:26' WHERE `users`.`id` = 1
Mysql2::Error: Lock wait timeout exceeded; try restarting transaction: UPDATE `users` SET `last_sign_in_at` = '2012-06-01 16:10:26', `current_sign_in_at` = '2012-06-01 16:10:26', `last_sign_in_ip` = '127.0.0.1', `current_sign_in_ip` = '127.0.0.1', `sign_in_count` = 1, `updated_at` = '2012-06-01 16:10:26' WHERE `users`.`id` = 1
   (0.8ms)  ROLLBACK 
```

我已经尝试了很多事情（这个问题似乎最接近实际的解决方案：[Capybara with :js => true 导致测试失败](https://stackoverflow.com/questions/8178120/capybara-with-js-true-causes-test-to-fail)）但没有任何效果，甚至摆脱了 DatabaseCleaner。还有什么我可以尝试的吗？

**编辑**：这是`spec_helper.rb`所要求的文件：[https ://gist.github.com/2855631](https://gist.github.com/2855631)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T23:06:01.247

几乎可以肯定

```
config.use_transactional_fixtures = true 
```

为了获得干净的数据，它试图在事务中运行您的示例。由于您使用的是 Database Cleaner，因此您已经拥有此功能，因此请将其设置为 false，您应该一切顺利。

[https://www.relishapp.com/rspec/rspec-rails/docs/transactions](https://www.relishapp.com/rspec/rspec-rails/docs/transactions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T10:55:31.543

对我来说，解决方案正好相反:)

我已将其设置为`false`：

```
config.use_transactional_fixtures = false 
```

这一切都奏效了。它`true`不像以前那样工作。

# javascript - 将 Django 模板标签放置在 Google 地图标记的脚本标签中

> ID：10854566
> 
> 赞同：0
> 
> 时间：2012-06-01T17:06:16.560
> 
> 标签：javascript, python, django, geolocation

有一个非常令人沮丧的时间来解决这个问题。我有一个自动存储用户纬度和经度的模型。我正在尝试使用该信息在谷歌地图上为该模型的每个实例放置标记。看起来很简单。使用 JavaScript 似乎是最简单的方法，只要脚本标签在模板上，Django 模板标签显然可以放在脚本标签中。但是，循环遍历模型似乎不起作用。这里可能只是一个简单的错误，但我的 JavaScript 很弱，Firebug 说明了究竟是什么错误。

缺少一些简单的东西吗？也许有更好的方法可以通过特定的 Django 视图或 Python 包装器来更好地实现此目的？非常感谢任何见解或专业知识。

这是页面：

```
{% extends 'base.html' %}

{% block page_title %}Stentorian{% endblock %}
{% block headline %}Stentorian Storyline{% endblock %}

 {% block content %}

<div class="row">
    <div class="span12">

        <h2>Welcome <a href="{% url profiles_profile_detail user.username %}">{{ user.username }}</a></h2>
<br />
                       <div id="map_canvas" style="width: 300px; height: 200px; border-right: 1px solid #666666; border-bottom: 1px solid #666666; border-top: 1px solid #AAAAAA; border-left: 1px solid #AAAAAA;"></div>
<br />

        <div class="accordion" id="story_accordion">

        {% for story in stories %}
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle story-header" data-toggle="collapse" data-parent="#story_accordion" href="#story_{{ story.id }}">
                        {{ story.author }} - {{ story.title }} - {{ story.date }}
                    </a>
                </div>
                <div id="story_{{ story.id }}" class="accordion-body collapse{% if forloop.counter0 == 0 %} in{% endif %}">
                         <div class="accordion-inner">
                            <!-- <h2><a href="{% url detail story.id %}">{{story.title}}</a></h2>-->
                             <span><a href="{% url profiles_profile_detail story.author.username %}}">{{story.author}}</a> </span><br>

                            <span>{{story.topic}}</span><br>
                            <span>{{story.zip_code}}</span><br>

                            <span>{{story.date}}</span><br>

                            <p>{{story.copy}}</p>
                        </div>
                    </div>
                </div>

                <br>

            {% endfor %}
            </div>

        </div>
    </div>
<script>
function mainGeo()
    {
         if (navigator.geolocation) 
            {
              navigator.geolocation.getCurrentPosition( mainMap, error, {maximumAge: 30000, timeout: 10000, enableHighAccuracy: true} );
        }
        else
        {
              alert("Sorry, but it looks like your browser does not support geolocation.");
        }
    }

    var map;

     function mainMap(position)
     {
           // Define the coordinates as a Google Maps LatLng Object
           var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

           // Prepare the map options
           var mapOptions =
          {
                      zoom: 15,
                      center: coords,
                      mapTypeControl: false,
                      navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                      mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            // Create the map, and place it in the map_canvas div
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            // Place the initial marker
            var marker = new google.maps.Marker({
                      position: coords,
                      map: map,
                      title: "Your current location!"
            });
        }

function error() {
            alert("You have refused to display your location. You will not be able to submit stories.");
        }

mainGeo();

function loadMarkers(){
             {% for story in stories %}
            var point = new google.maps.LatLng({{story.latitude}},{{story.longitude}});
            var marker = new google.maps.Marker({
            position: point,
            map: map
        });
        {% endfor %}    
    }

loadMarkers();
    </script>
    {% endblock content %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:35:10.703

我不是 Django 专家，但通常当您发现自己使用服务器端代码生成 javascript 代码时，有更好的方法——通过 AJAX 调用来加载您需要的数据，或者至少定义数据在脚本的顶部，然后将客户端逻辑放在后面。

```
//set up a method on your model that returns your markers in JSON format,
//then load via ajax using jQuery or another library
$.get('/path/to/getMapMarkers', loadMarkers);

//or use the template to define it on the page so it looks like this
var stories = [{latitude:123.345,longitude:45.567},
    {latitude:123.345,longitude:45.567},
    {latitude:123.345,longitude:45.567}];

loadMarkers(stories);

//then either way, your function could look like this:
function loadMarkers(stories){
    for (var s in stories){
        var story = story[s];
        var point = new google.maps.LatLng(story.latitude, story.longitude);
        var marker = new google.maps.Marker({position: point, map: map}});
    }
} 
```

这不会改变代码的行为，但会清理它并提供更好的代码分离并使其更容易修复。如果您仍需要更多帮助，请发布您生成的 javascript。

# python - Twisted IRC Bot 线程

> ID：10854573
> 
> 赞同：1
> 
> 时间：2012-06-01T17:07:06.363
> 
> 标签：python, multithreading, twisted, irc, bots

我需要 Twisted IRC Bot 的帮助。如果在使用某些命令（例如！text）时调用了一个大文本 - 我需要等待机器人在执行其他命令之前完成发送该文本。

是否可以使 !text 线程化，以便在侦听和执行其他命令的同时不断将文本发送到通道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:00:22.387

你真的不需要使用线程来完成这样的事情。发送文本几乎是立即发生的；Twisted 会为你缓冲它，你可以去做其他事情。特别是在 IRC 的情况下，您可以[`lineRate`](http://twistedmatrix.com/documents/12.0.0/api/twisted.words.protocols.irc.IRCClient.html)在客户端上设置属性，并且消息将自动被限制到特定的速度（以避免被洪水踢，这是我认为您真正要问的），而您的代码没有做任何事。

# xpages - XPage 上的 ReplaceItemValue 抛出错误

> ID：10854575
> 
> 赞同：0
> 
> 时间：2012-06-01T17:07:16.580
> 
> 标签：xpages, lotus, serverside-javascript, lotus-domino, xpages-ssjs

在 XPage 上工作。

有一个按钮，单击时使用 SSJS 将“b_BugNum”字段的值设置为“2”：

```
document1.ReplaceItemValue("b_BugNum","2"); 
```

运行时不断收到此错误：

> [TypeError] 在“NotesXspDocument [Static Java Wrapper, com.ibm.xsp.model.domino.wrapped.DominoDocument]”类型的对象上调用方法“ReplaceItemValue(string, string)”时出错

b_BugNum 字段是一个编辑框，没有修改就放置在表单上。

将链接更改为：

```
currentDocument.ReplaceItemValue("b_BugNum","2"); 
```

并且仍然给出错误。

将数据源设置为 Notes 文档，其他字段绑定到文档上的字段并显示正确的值。

关于为什么错误的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:14:34.253

错误消息表明您正在调用的方法不存在或参数数量错误/参数数据类型错误。

在您的情况下，错误是没有名为 ReplaceItemValue 的方法。正确的大小写是 replaceItemValue。Java 区分大小写。

在命名类方法时，所有好的 Java API 都使用 camelCase。如果您习惯于 LotusScript，一开始可能会感到困惑。

# css - 如何让包装器 div 的背景颜色随高度扩展

> ID：10854576
> 
> 赞同：3
> 
> 时间：2012-06-01T17:07:17.623
> 
> 标签：css, html

我有一个 div 包装了用户可以采取的许多操作。这个 div 就像您会在表格顶部看到的 actionBar。它有 3 个元素：1）一个按钮组，2）一组选择和 3）分页控件。

我有前两个元素向左浮动，最后一个元素向右浮动。当浏览器窗口足够宽以容纳所有内容时，这很有效，并且一切都很好。但是，当屏幕分辨率较小或用户使浏览器太窄时，元素会换行。我喜欢的包装，但 div 不会扩展它的高度（和相关的背景颜色）以适应被包装的元素。

如何使 div 扩展其高度以适应这些包裹的元素。

请参阅[http://jsfiddle.net/mraible/bJQCL/](http://jsfiddle.net/mraible/bJQCL/)中的实际问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T17:11:07.410

删除包装器上的固定高度并添加`overflow:auto`到它。

**[jsFiddle 示例](http://jsfiddle.net/j08691/bJQCL/3/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:18:11.417

只需删除包装器 div 固定高度并将溢出：隐藏或自动添加到该 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:25:11.247

首先，去掉 上的静态高度`.wrapper`。然后，您有两个选择：

1.  用于`overflow:auto`强制`.wrapper`包含其内容（[示例](http://jsfiddle.net/bJQCL/7/)）：

    ```
    .wrapper {
        background-color: #CBE6A5;
        background-image: -webkit-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: -moz-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: linear-gradient(top, #CBE6A5, #E2F1CD);
        overflow:auto;
    } 
    ```

    ***注意：**这可能会导致不需要的滚动条，其内容宽度超过 100%（[示例](http://jsfiddle.net/bJQCL/8/)）。*

2.  用于`:after`强制`.wrapper`包含其内容（[示例](http://jsfiddle.net/bJQCL/6/)）：

    ```
    .wrapper {
        background-color: #CBE6A5;
        background-image: -webkit-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: -moz-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: linear-gradient(top, #CBE6A5, #E2F1CD);
    }
    .wrapper:after {
        display:block;
        content:".";
        font-size:0;
        height:0;
        color:transparent;
        clear:left;
    } 
    ```

    ***注意：**这在 IE7 及以下版本中不起作用。*

3.  在（[示例](http://jsfiddle.net/bJQCL/9/)`div`）末尾添加“清除” ：`.wrapper`

    ```
    <div class="clear"></div> 
    ```

    ```
    .wrapper {
        background-color: #CBE6A5;
        background-image: -webkit-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: -moz-linear-gradient(top, #CBE6A5, #E2F1CD);
        background-image: linear-gradient(top, #CBE6A5, #E2F1CD);
    }
    .clear {
        clear:left;
    } 
    ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T17:10:45.963

看看这个[小提琴](http://jsfiddle.net/FghLm/)

只需添加 height:auto 和 auto 溢出。

```
.wrapper {
    background-color: #CBE6A5;
    background-image: -webkit-linear-gradient(top, #CBE6A5, #E2F1CD);
    background-image: -moz-linear-gradient(top, #CBE6A5, #E2F1CD);
    height: auto;
    overflow:auto;
} 
```

# jquery - 动态生成的表上的 tableToGrid

> ID：10854585
> 
> 赞同：0
> 
> 时间：2012-06-01T17:07:41.470
> 
> 标签：jquery, jqgrid

我正在使用 jqgrid 3.8 版并使用 tableToGrid 插件将动态生成的 html 表转换为 jqgrid。我的代码看起来像这样

```
tableToGrid("#content", {
             rowNum: 10,
             rowList: [10, 20, 30]
         }); 
```

其中内容是表 ID，我在单击按钮时执行此操作，在服务器端生成 html 并将 html 拍打到 div 上。

我在这里遇到的问题是，我仍然没有看到 html 表有任何变化，这意味着我没有得到排序选项、搜索等。

我最近开始使用 jqgrid 所以在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:17:08.603

在选项参数中，您需要声明网格是可排序的，默认情况下它是假的。

```
tableToGrid("#content", {
             rowNum: 10,
             rowList: [10, 20, 30],
             sortable: true
         }); 
```

以下是可用的网格[选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)。

```
tableToGrid(selector, options) 
```

# apache - 配置 Apache 模块 mod_xsendfile：我要修改哪个 .htaccess 文件？

> ID：10854589
> 
> 赞同：0
> 
> 时间：2012-06-01T17:08:01.550
> 
> 标签：apache, drupal, download, apache-modules

我们的软件更新位于公共根目录之外的私人文件夹中。要下载它们，用户必须登录我们的 Drupal 社区，以便它可以在检索文件之前检查他们的权限。但是，当前检索这些文件的方式通常会在文件变大时失败，而是下载一个 0kb 的空文件。

我被称为 Apache 模块 mod_xsendfile 作为解决方案。[说明](https://tn123.org/mod_xsendfile/)讨论了对文件进行修改，`.htaccess`但我不确定要编辑哪个，或者是否应该创建一个全新的。

对于初学者，我的 Drupal 社区位于我的主域的子目录中：`http://example.com/community`-- 所以那里有一个 .htaccess 文件。在根 example.com 公用文件夹中还有另一个 .htaccess 文件。如果是这些文件中的任何一个，我认为它是`/community`.

还是应该在其他地方创建一个不同的 .htaccess 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:13:25.293

您应该能够在您的 Web 根文件夹中创建一个 .htaccess 文件，它应该可以工作。如果你想在 apache 中全局启用 x-sendfile，你可以编辑 apache 的 httpd.conf 文件。（不确定其他操作系统，但在 Mac os x 中它位于 /etc/apache2/）。

希望这可以帮助。

# navigation - Wicket PagingNavigator 模拟 onClick 去一个页面

> ID：10854590
> 
> 赞同：0
> 
> 时间：2012-06-01T17:08:02.407
> 
> 标签：navigation, wicket, paging

我有一个检票口 PagingNavigator 就像一个魅力，但我想知道如何强制导航器转到特定页面。我有典型的 First < 1 2 3 4 5 6 7 8 9 10 > Last nav 链接，但如果我知道还有其他页面不可见（例如第 13 页），我可以强制导航器重定向到该页面吗？我已经看到了很多关于创建基本导航器甚至使用 CSS 自定义导航器的好例子，但没有什么可以描述移动到某个随机页面的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:41:06.213

```
pagingNavigator.getPageable().setCurrentPage(13); 
```

# c# - windows phone 7 的边框

> ID：10854592
> 
> 赞同：1
> 
> 时间：2012-06-01T17:08:07.923
> 
> 标签：c#, windows-phone-7

如何在 wp7 的网格（命名为 Holder）上方创建边框？我尝试的是，当我将网格创建为全屏并在屏幕顶​​部创建边框后，但是当我调试它时，边框不可见。谁能帮我这个？提前感谢您的辛勤工作！

```
<Grid x:Name="BrowserHost" GotFocus="BrowserHost_GotFocus" Grid.RowSpan="2">

<StackPanel x:Name="Stack" Background="Transparent">
        <Border x:Name="Border" Background="{StaticResource PhoneAccentBrush}">
            <TextBox x:Name="UrlTextBox" KeyDown="UrlTextBox_KeyDown" Background="White" Margin="0,0,98,0">
        </Border>
</StackPanel> 
```

**主页 xaml.cs**

```
public partial class MainPage : PhoneApplicationPage
{
    private const int NumTabs = 4;

    private int currentIndex;
    private string[] urls = new string[NumTabs];
    private WebBrowser[] browsers = new WebBrowser[NumTabs];

    public MainPage()
    {
        InitializeComponent();
        ShowTab(0);
    }

    private void ShowTab(int index)
    {
        this.currentIndex = index;
        UrlTextBox.Text = this.urls[this.currentIndex] ?? "";
        if (this.browsers[this.currentIndex] == null) 
        {
            WebBrowser browser = new WebBrowser();
            this.browsers[this.currentIndex] = browser;
            BrowserHost.Children.Add(browser);
        }
        for (int i = 0; i < NumTabs; i++) 
        {
            if (this.browsers[i] != null) 
            {
            this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed;
        }
    }
}

private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter) 
    {
        Uri url;
        if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url)) 
        {
            this.urls[this.currentIndex] = UrlTextBox.Text;
            this.browsers[this.currentIndex].Navigate(url);
        }
        else
            MessageBox.Show("Invalid url");
    }
} 
```

但是在我调试之后，边框和 UrlTextBox 都不可见。

图片：

![这是我想发布的图像](../Images/5680c704bc47f10b9d8d9a4a8a9681f3.png)

我将 GotFocus 事件用于 BrowserHost 网格。这意味着，当我触摸网格（BrowserHost）时，UrlTextBox 和边框应该被折叠（我得到了这个东西）。我需要的是 BrowserHost 应该在 Border 和 UrlTextBox 折叠后达到全屏。但对我来说，这并没有发生。请看下图。当用户触摸 BrowserHost 时，我想让 BrowserHost 全屏显示。我希望用 BrowserHost 填充空白空间。

![在此处输入图像描述](../Images/194b6878a1105addb7712f961ad8b894.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:12:37.483

您需要为边框指定 BorderBrush 和 BorderThickness 属性，如下所示

```
<Border Background="LightBlue" 
    BorderBrush="Green" 
    BorderThickness="2" > 
```

更新：还将 Grid.Row="0" 设置为您的堆栈面板。

然后修改你的cs代码

```
WebBrowser browser = new WebBrowser();
browser.Height = 400;
Grid.SetRow(browser, 1);
BrowserHost.Children.Add(browser); 
```

# iphone - 如何为通用应用程序使用默认启动画面？

> ID：10854596
> 
> 赞同：1
> 
> 时间：2012-06-01T17:08:26.757
> 
> 标签：iphone, ios, ipad, splash-screen, beginanimations

我有一个通用的应用程序。在此应用程序中，我将介绍图像设置为启动画面。对于 iPhone，我需要设置不同的图像作为启动屏幕，而对于 iPad，我需要设置不同的图像。当我使用下面的代码时，它适用于 iphone 但不适用于 ipad。这是我的代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
   [self copyDatabaseIfNeeded];
   [window addSubview:navigationController.view];
   [window makeKeyAndVisible];

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    splashViewBg = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 768, 1004)];
    splashViewBg.image = [UIImage imageNamed:@"jamil.png"];
    //splashViewBg.contentMode = UIViewContentModeScaleAspectFill;
    [window addSubview:splashViewBg];

    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 768, 1004)];
    splashView.image = [UIImage imageNamed:@"jamil.png"];
    //splashView.contentMode = UIViewContentModeScaleAspectFill;
    splashView.alpha = 0.0f;
}
else
{
    splashViewBg = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    splashViewBg.image = [UIImage imageNamed:@"defualt.png"];
    //splashViewBg.contentMode = UIViewContentModeScaleAspectFill;
    [window addSubview:splashViewBg];

    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    splashView.image = [UIImage imageNamed:@"defualt.png"];
    //splashView.contentMode = UIViewContentModeScaleAspectFill;
    splashView.alpha = 0.0f;
}

[UIView beginAnimations:@"show" context:NULL];
[UIView setAnimationDuration:1.0f];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
[UIView setAnimationDelegate:self];
splashView.alpha = 1.0f;
[UIView commitAnimations];

[self performSelector:@selector(removeSplash) withObject:nil afterDelay:2.0];

[self performSelector:@selector(removeSplashBg) withObject:nil afterDelay:3.5];

return YES;
 }

 - (void) removeSplash {
   [UIView beginAnimations:@"hide" context:NULL];
   [UIView setAnimationDuration:1.0f];
   [UIView setAnimationCurve:UIViewAnimationCurveLinear];
   [UIView setAnimationDelegate:self];
   splashView.alpha = 0.0f;
  [UIView commitAnimations];
}

  - (void) removeSplashBg {
      [splashView removeFromSuperview];
      [splashViewBg removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:47:33.077

我知道这并不能直接回答您的问题，但 Apple 的指导方针明确表示不要使用启动画面图像。强烈建议不要这样做，并且可能会为您的用户带来非常糟糕、不一致的体验。如果您必须在应用程序加载时显示屏幕，则无需编写任何代码即可。只需将图像命名为 Default.png 和 Default@2x.png。它们将自动加载并显示为闪屏。请参阅[“启动图像”的文档](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)。

# regex - 正则表达式：刚果共和国，但不是刚果民主共和国

> ID：10854603
> 
> 赞同：2
> 
> 时间：2012-06-01T17:09:01.657
> 
> 标签：regex, perl, r

我正在努力编写一个与 perl 兼容的正则表达式，该表达式在区分指刚果共和国和刚果民主共和国的字符串方面相当聪明。我将在`R`'`grep`函数的程序中使用这个表达式，如果正则表达式匹配字符串，则返回 True，否则返回 False。

我有兴趣识别的国家有时可以用不同的顺序/方式书写。例如：

> 刚果共和国
> 
> 刚果共和国
> 
> 刚果共和国
> 
> 刚果共和国

我不想匹配的国家有类似的模式：

```
democratic republic of the congo

congo, democratic republic of the

dem rep of the congo 
```

我想，我正在寻找的是一个匹配 rep 和 congo 的正则表达式，但只要字符串中有一个“dem”就会失败。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:20:20.930

```
> countries <- scan(what="character")
1:     'republic of congo'
2:     'republic of the congo'
3:     'congo, republic of the'
4:     'congo, republic'
5: 'democratic republic of the congo'
6: 'congo, democratic republic of the'
7: 'dem rep of the congo'
8: 
Read 7 items
> grep("dem", countries, ignore.case=TRUE,value=TRUE, invert=TRUE)
[1] "republic of congo"      "republic of the congo"  "congo, republic of the" "congo, republic" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:25:23.437

我不知道 R，但是这个正则表达式将与您描述的完全匹配，*一个正则表达式将匹配`rep`and ，但只要字符串中`congo`有 a 就会失败`dem`*

```
/^(?=.*rep)(?=.*congo)(?!.*dem)/i; 
```

它还可以根据需要过滤您的示例字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:20:07.200

这与您的第一个示例字符串匹配并忽略第二个

```
^(.(?<!dem))*congo(.(?<!dem))*$ 
```

在 Perl 这变成

```
if ($subject =~ m/^(.(?<!dem))*congo(.(?<!dem))*$/m) {
    # Successful match
} else {
    # Match attempt failed
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:34:23.880

它在**python**中对我有用：

```
pattern = (?!democratic\s+)(?:republic)\s+of\s+(?:the\s+)?congo|congo,\s+republic(?:\s+of\s+the)?

// A String holding positive and negative examples mixed
string = 'republic of congo, republic of the congo, congo, republic of the, congo, republic, democratic republic of the congo, congo, democratic republic of the, dem rep of the congo'

re.findall(pattern, string) // return ['republic of congo', 'congo, republic of the', 'congo, republic', 'republic of the congo'] 
```

# php - 什么 Wordpress 脚本使用 curl - SSL CA 身份验证存在问题

> ID：10854606
> 
> 赞同：1
> 
> 时间：2012-06-01T17:09:20.093
> 
> 标签：php, wordpress, curl

我是 Wordpress 的新手，我正在尝试使用标准的 RSS 小部件在我的网站上包含一个 twitter 提要。输入 RSS URL 很简单：[https ://twitter.com/statuses/user_timeline/mytwitterfeed.rss](https://twitter.com/statuses/user_timeline/mytwitterfeed.rss)

但是，我收到以下错误：RSS 错误：WP HTTP 错误：SSL 证书问题，请验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

我了解*快速*解决方法是将其添加到 curl_exec() 之前的脚本中： curl_setopt($resCurl, CURLOPT_SSL_VERIFYPEER, false);

但是，我找不到哪个带有调用 curl 的 wp-admin/wp-content/wp-plugins 的 php 脚本。

wp-plugins 似乎只包含新插件来扩展核心 WP 站点提供的内容。标准小部件存储在哪里？

我已经尝试了所有明显的地方，并且 Windows 7 内容搜索没有为“curl”这个词找到任何结果。（我尝试了很多变化！）

请问有人可以帮我吗？

亲切的感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:04:22.467

有两种选择：

*   如果您想要没有 SSL 麻烦的 Twitter 提要，只需安装 Twitter 提要插件之一，例如 Jetpack 并将提要添加到您的侧边栏中。这通常是最简单的方法。
*   联系您的托管服务提供商，让他们“修复” SSL 问题。我个人不会打开 SSL 验证，它绝对达不到目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:43:08.250

您只需将此过滤器添加到您的主题或插件中

```
add_filter('https_ssl_verify', '__return_false'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:29:52.020

我在名为 WP_Http_Curl 的 PHP 类中的 wp-includes\class-http.php 中找到 curl_exec

对我来说，这意味着 WP 可能将 curl 用于内部目的。您应该可以在那里嵌入 curl_setopt 调用。但这将对所有请求禁用此验证。

您的验证错误可能是由于 curl 不包括 WP 内部 curl 使用的 CA 证书包引起的。有关如何更新的更多详细信息，请参阅[http://curl.haxx.se/docs/sslcerts.html 。](http://curl.haxx.se/docs/sslcerts.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T07:59:52.557

只需更改您的 rss 提要网址

`https://twitter.com/statuses/user_timeline/mytwitterfeed.rss`

至

```
http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=twitter 
```

提要仍然有效。

只需检查此链接

[http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=twitter](http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=twitter)

# jquery - 集成 Spring MVC 、 Jquery 、 Ajax 和 Tiles

> ID：10854610
> 
> 赞同：1
> 
> 时间：2012-06-01T17:09:52.283
> 
> 标签：jquery, ajax, spring, model-view-controller, apache-tiles

我正在尝试在我的 weapp 中实现 ajax 功能，我正在使用 Spring MVC 和 Tiles，对于 Ajax 调用，我正在使用 jquery。

一切正常，除了 ajax 功能

相关代码如下：

**瓷砖配置：**

```
<beans:bean class="org.springframework.js.ajax.AjaxUrlBasedViewResolver" id="tilesViewResolver">
        <beans:property name="viewClass" value="org.springframework.js.ajax.tiles2.AjaxTilesView"/>
    </beans:bean>

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/plantilla/plantilla.xml</beans:value>
            <!-- Scan views directory for Tiles configurations -->
            <beans:value>/WEB-INF/views/**/vistas.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 
```

**我的控制器：**

```
@RequestMapping(value = "clientes/listarProvincias", method = RequestMethod.GET,headers="Accept=*/*")
public @ResponseBody List<Provincia> listarProvincias(@RequestParam(value = "departamento", required = true)String codigoDepartamento){
    logger.info("Ingresando al Metodo Listar Provincias con Ajax");
    Integer codDep = Integer.parseInt(codigoDepartamento);
    return this.provinciaDAO.listarProvinciaPorDepartamento(codDep);
} 
```

**我的 JSP**

```
 <script type="text/javascript">
$(document).ready(function() { 
    $('#departamento').change(
            function() {
                $.getJSON('clientes/listarProvincias', {
                    departamento : $(this).val(),
                    ajax : 'true'
                }, function(data) {
                    alert("Ingresando a JSON");
                    var html = '<option value="">Departamento</option>';
                    var len = data.length;
                    for ( var i = 0; i < len; i++) {
                        html += '<option value="' + data[i].name + '">'
                                + data[i].name + '</option>';
                    }
                    html += '</option>';

                    $('#provincias').html(html);
                });
            });
});
</script> 
```

**表格的一部分**

```
 <p>
                        <label>Departamento</label>
                        <span class="field">
                            <form:select path="departamento.codDpto" id="departamento">
                                <form:option value="" ></form:option>
                                <c:forEach items="${departamentos}" var="departamento">
                                    <form:option value="${departamento.codDpto}">${departamento.descripcion}</form:option>
                                </c:forEach>
                            </form:select>
                            <label class="error">
                                <form:errors path="estaReg" cssClass="error"></form:errors>
                            </label>
                        </span>
                    </p>

                    <p>
                        <label>Provincia</label>
                        <span class="field">
                            <form:select path="provincia.codprovincia" id="provincias">
                                <form:option value="" ></form:option>
                                <c:forEach items="${provincias}" var="provincia">
                                    <form:option value="${provincia.codprovincia}">${provincia.descripcion}</form:option>
                                </c:forEach>
                            </form:select>
                            <label class="error">
                                <form:errors path="estaReg" cssClass="error"></form:errors>
                            </label>
                        </span>
                    </p> 
```

Google Chomre 工具显示：

```
GET http://localhost:8080/sictem/clientes/listarProvincias?departamento=5&ajax=true 404 (No Encontrado) 
```

**日志**

```
 DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - No HttpSession currently exists
DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: null. A new one will be created.
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 4 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 5 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 6 of 10 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG: org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG: org.springframework.security.web.session.SessionManagementFilter - Requested session ID46A28166F0557A3A00BB916481349AC8 is invalid.
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/clientes/listarprovincias'; against '/*'
DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Public object - authentication not attempted
DEBUG: org.springframework.security.web.FilterChainProxy - /clientes/listarProvincias?departamento=6&ajax=true reached end of additional filter chain; proceeding with original chain
DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
DEBUG: org.springframework.security.web.access.ExceptionTranslationFilter - Chain processed normally
DEBUG: org.springframework.security.web.context.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed 
```

我不知道我做错了什么。此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T20:39:31.773

检查您是否还需要更改控制器声明

```
 @RequestMapping(value = "json", headers = "Accept=application/json")
    @ResponseBody
    public ResponseEntity<java.lang.String> listJson(@RequestParam String nombre) {
        HttpHeaders headers = new HttpHeaders();

        // PAY ATTENTION TO THIS:
        headers.add("Content-Type", "application/json; charset=utf-8");

        List<Medico> result = null;
        if (org.apache.commons.lang3.StringUtils.isEmpty(nombre)) {
            result = Provincia.findProvinciaEntries(0, 10);
        } else result = Provincia.findProvinciaEntries(0, 10);

        // NEED TO CREATE JSON ARRAY
        String data = "{\"items\":" + Provincia.toJsonArray(result) + " }";
        return new ResponseEntity<String>(data, headers, HttpStatus.OK);
    } 
```

希望这对你有帮助

# javascript - jQuery .delay() 和 .fadeIn() 到购物车

> ID：10854613
> 
> 赞同：0
> 
> 时间：2012-06-01T17:10:00.603
> 
> 标签：javascript, jquery, fadein

```
 $(document).ready(function(){$(".wooo").bloooming_shop();$("body").append('<div id="panel"><div id="panelcontent"></div><div class="panelbutton" id="hidepanel" style="display: none;"><a><font class="cartfont2">hide cart</font></a></div></div><div id="showpanel" class="panelbutton" style="display: visible;"><a><font class="cartfont">shopping cart</font></a></div><div id="btntarget"></div>');$("#panelcontent").hide();$.ajax({type:"GET",url:"/wooo/cart.php",async:false,dataType:"html",success:function(a){$("#panelcontent").html(a)}}); 
```

对不起，它被缩小了，大声笑..

我尝试了这两个建议，但没有奏效。我完全不确定我是否完全遵循了指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:51:32.397

你有没有尝试过：

```
$('#panelcontent').html(html).delay(3333).fadeIn(3333); 
```

在 AJAX 成功处理程序中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:50:20.053

试试看：

```
function docReady() {  
    $('.wooo').bloooming_shop();

    $('body').append('<div id="panel"><div id="panelcontent"></div><div class="panelbutton" id="hidepanel" style="display: none;"><a><font class="cartfont2">hide cart</font></a></div></div><div id="showpanel" class="panelbutton" style="display: visible;"><a><font class="cartfont">shopping cart</font></a></div><div id="btntarget"></div>');
    $('#panelcontent').hide();

    $.ajax({
        type: "GET",
        url: "/wooo/cart.php",
        async: false,
        dataType: "html",
        success: function(html){
            $('#panelcontent').html(html);
        }
    });
}

$(document).ready(function() {
    setTimeout("docReady()", 3333);
    $('#panelcontent').fadeIn(3333);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:26:39.027

既然你有 jquery，你可以将 fadeIn 包装在 jQuery(document).ready 中的 setTimeout 中吗？

```
jQuery(document).ready(function() {
   setTimeout(function() {
       $('#panelcontent').html(html).fadeIn(3333);
   }, 3333);
}); 
```

# android - 为什么我的 SimpleCursorAdapter 会覆盖我的其他 SimpleCursorAdapter？

> ID：10854618
> 
> 赞同：0
> 
> 时间：2012-06-01T17:10:32.793
> 
> 标签：android, sqlite, simplecursoradapter, android-cursor

在我的 onCreate 方法中，我调用了其他方法，即 fillData() 和 fillImages。fillData 的作用是，它用文本填充 Listview 中的一行，fillImages 将图像放入该行中。到现在为止还挺好。显然，当我只在 onCreate 方法中调用 fillData 时，只会显示文本。当我调用 fillImages 时也会发生同样的情况。

问题是当我同时调用它们时，只会显示我最后调用的方法的内容。示例：当我调用这个时：

```
@Override
public void onCreate() {
    //Here is some content left away that is not important.
    fillData();
    fillImages()
} 
```

我只得到了 fillImages() 方法的内容。

我究竟做错了什么？下面是我的 onCreate()、fillData() 和 fillImages() 方法的代码。

更新：我该如何解决这个问题？？？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reminder_list);
    mDbHelper = new RemindersDbAdapter(this);
    mImageHelper = new ImageAdapter(this);
    mDbHelper.open();
    mImageHelper.open();
    fillData();
    fillImages();
    registerForContextMenu(getListView());
}

//
// Fills the ListView with the data from the SQLite Database.
//
private void fillData() {
    Cursor remindersCursor = mDbHelper.fetchAllReminders();
    startManagingCursor(remindersCursor);

    // Creates an array with the task title.
    String[] from = new String[] {RemindersDbAdapter.KEY_TITLE, RemindersDbAdapter.KEY_BODY};

    // Creates an array for the text.
    int[] to = new int[] {R.id.text1, R.id.text2};

    // SimpleCursorAdapter which is displayed.
    SimpleCursorAdapter reminders = new SimpleCursorAdapter(this, R.layout.reminder_row, remindersCursor, from, to);
    setListAdapter(reminders);

}

//
// Fills the ListView with the images from the SQLite Database.
//
private void fillImages() {
    Cursor imageCursor = mImageHelper.fetchAllImages();
    startManagingCursor(imageCursor);

    // Creates an array with the image path.
    String[] fromImage = new String[] {ImageAdapter.KEY_IMAGE};

    // Creates an array for the text.
    int[] toImage = new int[] {R.id.icon};

    // SimpleCursorAdapter which is displayed.
    SimpleCursorAdapter images = new SimpleCursorAdapter(this, R.layout.reminder_row, imageCursor, fromImage, toImage);
    setListAdapter(images);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:32:44.753

> 为什么我的`SimpleCursorAdapter`覆盖我的另一个`SimpleCursorAdapter`？

您使用的术语`override`不正确。**方法覆盖**是指子类提供其超类中提供的方法的特定实现。这与您遇到的问题完全无关。

> 我究竟做错了什么？

您的代码不起作用的原因是因为您调用`setListAdapter`了两次。第二次调用`setListAdapater`取消绑定第一个适配器，然后将第二个适配器绑定到您的`ListView`，从而使您的第一次调用完全无用。您`ListActivity`的`ListView`只能有一个适配器（因此您需要以某种方式合并两个适配器的实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:18:41.537

您`setListAdapter`使用这两种方法设置了两个，最后一个`setListAdapter(images);`列表只设置了最后一个适配器数据...

# android - android.content.ActivityNotFoundException：找不到明确的活动类 {nco.surt/android.net.wifi.WifiConfiguration$Status}

> ID：10854622
> 
> 赞同：0
> 
> 时间：2012-06-01T17:10:59.047
> 
> 标签：android

每当我尝试单击按钮时都会出现此错误：

```
public class NncActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button b = (Button) findViewById(R.id.loginButton);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(NncActivity.this, Status.class));

            }
        });
    }
} 
```

我已经添加了

```
<activity android:name=".Status"></activity> 
```

在第一个之后到清单，`</activity>` 但我仍然收到那个错误！

有人知道为什么吗？

这就是 Logcat 显示的内容

```
> threadid=1: thread exiting with uncaught exception (group=0x40015560)
FATAL EXCEPTION: main
android.content.ActivityNotFoundException: Unable to find explicit activity class {nco.surt/android.net.wifi.WifiConfiguration$Status}; have you declared this activity in your AndroidManifest.xml?
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
at android.app.Activity.startActivityForResult(Activity.java:2827)
at android.app.Activity.startActivity(Activity.java:2933)
at nco.surt.NncActivity$1.onClick(NncActivity.java:23)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:19:28.370

似乎`Status.class`您在意图中使用的是指`android.net.wifi.WifiConfiguration$Status`而不是您的`Status`活动。检查您`#import`的 s 以查看您没有得到错误的导入，或者`Status`在您的意图中使用限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:17:07.153

此活动与您的主要活动在同一个包上？如果没有，请添加包名称的所有扩展名。例如， package: br.com.test 并且您的 Activity 在那里，所以...

```
<activity android:name="br.com.test.Status"></activity> 
```

如果问题仍然存在，请尝试清理您的项目。

# grails - 替换默认的 TomcatServerFactory

> ID：10854625
> 
> 赞同：1
> 
> 时间：2012-06-01T17:11:07.583
> 
> 标签：grails

我想通过 grails run-app 使用我的实现更改默认的 org.grails.plugins.tomcat.TomcatServerFactory 用户，但我无法做到。

查看源代码（grails 2.0.4）我在运行应用程序脚本中看到

grails-core/scripts/_GrailsRun.groovy

```
93    String defaultServer = "org.grails.plugins.tomcat.TomcatServerFactory"
94    def containerClass = getPropertyValue("grails.server.factory", defaultServer) 
```

我试图用我的类设置 grails.server.factory 但它似乎被 grails 忽略了。

我已经测试了将配置放入 BuildConfing 或使用 -D running grails 传递它，但没有成功。

我的错误是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:38:26.823

问题是Tomcat插件在从命令行中读取您的值后强制该值`scripts/_Events.groovy`

您可以通过在 Tomcat 插件之后但在使用之前触发的事件处理程序中设置它来使其工作，例如

```
eventRunAppStart = {
   System.setProperty 'grails.server.factory', 'my.class.name'
} 
```

如果你想让它保持动态，你可以将它的值设置为你自己的系统属性，例如

```
eventRunAppStart = {
   System.setProperty 'grails.server.factory',
         System.getProperty('my.grails.server.factory')
} 
```

并将 run-app 调用更改为

```
grails -Dmy.grails.server.factory=my.class.name run-app 
```

# php - 删除字符串开头的一个或多个点

> ID：10854626
> 
> 赞同：2
> 
> 时间：2012-06-01T17:11:09.030
> 
> 标签：php, string

如何删除开始字符串的点？

```
$string = ". Hello world ."; 
```

我只想删除第一个点，而不是最后的点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-05T14:21:37.803

```
ltrim('. Hello World! .','.'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T19:40:57.973

简单模式将匹配字符串开头的任何句点（或序列，因为您建议这样做），或字符串末尾的（在下面的评论中来自 OP 的请求之后）：

```
preg_replace( "/^\.+|\.+$/", "", "....Hello...." ); 
```

演示：[http ://codepad.org/Nst5EX1k](http://codepad.org/Nst5EX1k)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T20:25:26.980

使用`$stripped = trim($string, ' .');`可能会更好，并且会去除任何空间或点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:16:27.983

在我看来，您正在使用 PHP。尝试：

```
$string = ". Hello World! .";
$pos = strrpos($string, ".");
$stripped = substr($string, $pos + 1); 
```

# ruby-on-rails - 有没有什么叫做方法的东西就像符号来处理一样

> ID：10854629
> 
> 赞同：0
> 
> 时间：2012-06-01T17:11:16.667
> 
> 标签：ruby-on-rails, ruby

```
> %w(action_controller/railtie action_mailer/railtie).map &method(:require)
 => [true, true] 
```

并且方法调用返回一个Method的实例。

```
> method(:require)
 => #<Method: Object(Kernel)#require> 
```

所以方法中必须有一个 to_proc 定义，它应该类似于

```
class Method
  def to_proc
    proc { |obj| self.send(obj) }
  end
end 
```

我的问题是 rails 在 Method 中是否覆盖了这个 to_proc 或者什么。

为什么以下命令的行为方式与其行为方式相同

```
> %w(action_controller/railtie action_mailer/railtie).map &method(:require)
 => [true, true] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:00:21.133

`method#to_proc`返回一些东西，当你调用`call`它时，方法，传递提供的参数。例如

```
method(:puts).call("hello world") 
```

输出你好世界。该方法“记住”它的来源，在这种情况下，您的脚本的顶级对象。`puts`, 之类的方法`require`是在 Object 上定义的（通过内核），因此该方法绑定到什么对象并不重要（当然假设该类没有定义自己的 require 方法！）

所以`%w(action_controller/railtie action_mailer/railtie).map &method(:require)`相当于调用 require 一次传入这些字符串并收集返回值（恰好是`true`- 不要太注意 require 的返回值。

这不是 Rails 的事情——你可以在 vanilla irb 会话中使用任何可用的文件做同样的事情。我不是我会这样做——这让我觉得选择“可爱”而不是“可以理解”。

# codeigniter - Codeigniter 使用 ON DUPLICATE KEY UPDATE 的方式

> ID：10854630
> 
> 赞同：1
> 
> 时间：2012-06-01T17:11:21.120
> 
> 标签：codeigniter, codeigniter-2

你能告诉我应该如何以 codeigniter 的方式使用 ON DUPLICATE KEY UPDATE 吗？我在这里找到了类似的问题[How would use ON DUPLICATE KEY UPDATE in my CodeIgniter model?](https://stackoverflow.com/q/3361490/1209690) . 但是找不到确切的答案。

我已经尝试了以下但它不工作

```
$this->db->on_duplicate_update('id');
 $this->db->insert('voucher', $data); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:34:41.687

`on_duplicate()`和之间有区别`insert()`。每当我用一些数据解析文件时，我希望新文件中的所有重复行都在旧行上更新（没有重复）并插入新行 -`on_duplicate()`与表上的唯一索引一起使用

如果不需要更新旧行（重复），请`insert()`改用。

# javascript - 使用 jQuery 设置多个选择，使用每个

> ID：10854638
> 
> 赞同：1
> 
> 时间：2012-06-01T17:12:07.373
> 
> 标签：javascript, jquery

我有一个充满选择的页面，它们都有一个共同的类。我需要将它们中的每一个都设置为他们的第一个选项。容易，对吧？但是我最终开始工作的感觉就像一个黑客......有没有更好的方法？

```
$('.myclass').each(function() {
    var firstOptSelector = '#' + $(this).attr('id') + ' option:first'; // HACK
    $(firstOptSelector).attr('selected','selected');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:13:15.790

尝试如下，

```
$('.myclass').each(function() {
   this.selectedIndex = 0;
}); 
```

**演示：http:** [//jsfiddle.net/ZDYjP/](http://jsfiddle.net/ZDYjP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:15:37.950

这个短的怎么样？

```
​$(".myclass :first-child").prop("selected", true);​​​​​​​​​ 
```

**演示：http:** [//jsfiddle.net/u8S54/](http://jsfiddle.net/u8S54/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:14:17.347

像这样做：

```
$('.myclass').each(function() {
    $(this).find('option:first').attr('selected','selected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:17:07.740

您不需要使用每个。这是[一个例子](http://jsfiddle.net/azizpunjani/zUyb2/)。

```
​$('.select').find('option:first').prop('selected', true ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T17:24:32.343

```
$("option:first", ".myselect").prop('selected', true); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/69wxq/1/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T18:18:48.440

如果您删除选定的属性，则默认情况下第一个是显示的。

```
$('.myclass').find('option:selected').removeAttr("selected"); 
```

# sql - 需要随机化用户表中的名称

> ID：10854642
> 
> 赞同：0
> 
> 时间：2012-06-01T17:12:28.153
> 
> 标签：sql, tsql

我有以下查询，它允许我按行号连接两个表，我正在尝试修改它，以便它使用随机名称表中的随机名称更新订阅者表。

```
select fo.*, so.*
from (select *, 
              row_number() over (order by FirstName) as rn
      from randomnames
) fo
join (select *,
             row_number() over (order by ID) as rn
       from subscribers) so on fo.rn = so.rn 
```

我将其更新为以下内容以使其正常工作

```
update subscribers set 
FirstName = fo.Firstname,
LastName = fo.LastName
from
 (select *, 
              row_number() over (order by firstname) as rn
      from _randomnames
) fo
join (select *,
             row_number() over (order by ID desc) as rn
       from subscribers) so on fo.rn = so.rn

       where so.ID = subscribers.ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:17:57.033

尝试以下查询：

```
;WITH CTE AS
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY ID) AS rn
    FROM subscribers
)
UPDATE so
SET so.[Name] = fo.[Name]
FROM CTE so
INNER JOIN (SELECT *, ROW_NUMBER() OVER (ORDER BY FirstName) AS rn
            FROM randomnames) fo
ON fo.rn = so.rn 
```

# java - Hibernate 生成值策略

> ID：10854643
> 
> 赞同：8
> 
> 时间：2012-06-01T17:12:35.353
> 
> 标签：java, sql, hibernate, hql

我在休眠中使用此代码。

```
@Id @GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="RightID", unique=true, nullable=false) 
```

问题是当我删除一行时，“RightId”不会按顺序保留。我想要类似的东西，休眠应该检查 id，如果缺少某些 id 值，它必须将该值提供给“RightsId”，否则正常进行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T17:39:32.407

我认为hibernate中没有任何这样的选项。除了自动，您还可以尝试以下策略选项：

1.  **GenerationType.TABLE** - 持久性提供程序使用数据库表来管理密钥。

2.  **GenerationType.SEQUENCE** - 持久性提供程序使用数据库序列来生成密钥。数据库必须支持序列

3.  **GenerationType.IDENTITY** - 持久性提供者根据数据库生成密钥。数据库必须支持 IDENTITY 列类型。

另一点：他们可能没有提供这样的选项，因为它也会降低性能。对于每个插入，它必须搜索整个**ID**列。你可以想象它会对性能产生多大的影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T17:33:51.753

数据库不关心序列中是否存在漏洞。此外，一般来说，更改应用程序设计是可能的并且很可能更容易，这样它就不会期望 id 值列表不包含漏洞。

如果一些奇怪的原因迫使这样的设计，你必须使用自定义生成器。实现细节可以通过这个问题找到：[Hibernate ID Generator](https://stackoverflow.com/questions/495536/hibernate-id-generator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T12:24:05.913

内部不支持此功能的主要原因是*安全性*。让我给你举个例子，

**1\. 安全**

我们有一个具有唯一标识号的移动 SIM 卡数据库。如果您的 SIM 卡丢失，然后您将其停用。但是，假设其他用户购买了一个新的 sim 卡，并且该 sim 卡给出了您的 sim 卡拥有的旧唯一编号（根据您的逻辑）。那么它可能会导致一个问题。就像假设新用户做了一些恐怖行为，然后警察会追踪那个 sim 号码并可能会来找你。（因为他是新用户，有些地方 sim 仍然只显示你的名字）......

**2\. 延迟**

肯定存在*性能*问题。每次查找未使用序列号的搜索都将是**O(n)**而不是直接的**O(1)**。

# apache-poi - Apache Poi：从 HSSF 转换为 SS？

> ID：10854646
> 
> 赞同：1
> 
> 时间：2012-06-01T17:12:44.427
> 
> 标签：apache-poi, poi-hssf

我已经将 HSSF 中的所有旧代码都转换为 SS，除了我制作工作簿的部分。

* * *

**旧代码：** HSSFWorkbook wb = new HSSFWorkbook(new FileInputStream(file));

* * *

**新的非工作代码：** Workbook[] wb2 = new Workbook[] {new FileInputStream};

* * *

这是该网站提供的转换示例：

新：Workbook[] wbs = new Workbook[] { new HSSFWorkbook(), new XSSFWorkbook() }; 旧：HSSFWorkbook wb = new HSSFWorkbook();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:12:29.203

工作簿是一个接口，你不能实例化它。相反，您想要的是[WorkbookFactory](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/WorkbookFactory.html)。传递一个文件或一个输入流，它会给你适当的工作簿实例

你的旧代码：

```
HSSFWorkbook wb = new HSSFWorkbook(new FileInputStream(file)); 
```

变成：

```
Workbook wb = WorkbookFactory.create(file); 
```

# javascript - 为展开/折叠功能更改图像 src（JQ 或 JS）

> ID：10854648
> 
> 赞同：2
> 
> 时间：2012-06-01T17:12:53.023
> 
> 标签：javascript, jquery, html

我已经尝试了在这个站点上找到的几种方法来让我的脚本更改“+”和“-”展开/折叠按钮图像，但我还没有找到合适的修复/方法。

目前，我使用纯JS如下：

```
function swapimg(id) {
if(document.getElementById(id).src='images/bullet_expand.png')
{document.getElementById(id).src='images/bullet_expanded.png'}
else {document.getElementById(id).src='images/bullet_expand.png'}
} 
```

和按钮：

```
<a href="javascript:void();" onclick="toggle_visibility('item1'); swapimg('phb');">
<img src="images/bullet_expand.png" border="0" style="padding-right: 5px;" id="phb" alt="">
</a> 
```

第一次点击确实改变了图像，但第二次点击什么也没做。我感觉使用“getElementById”可能不是标准调用，所以使用 JQuery 也是我会考虑的一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:14:36.703

而不是比较你正在分配的价值，你需要`==`而不是`=`

而不是这个：

```
document.getElementById(id).src='images/bullet_expand.png' 
```

利用

```
document.getElementById(id).src=='images/bullet_expand.png' 
```

jQuery：

```
if(jQuery('#'+id).attr('src') == 'images/bullet_expand.png') {
   jQuery('#'+id).attr('src','images/bullet_expanded.png');
} else {
   jQuery('#'+id).attr('src','images/bullet_expand.png');
} 
```

Javascript：

```
if(document.getElementById(id).src.indexOf('/images/bullet_expand.png') > 0) {
    document.getElementById(id).src='images/bullet_expanded.png';
}
else {
    document.getElementById(id).src='images/bullet_expand.png';
} 
```

# php - 在php中添加前导零到日期

> ID：10854658
> 
> 赞同：5
> 
> 时间：2012-06-01T17:13:56.787
> 
> 标签：php, html, date

我正在尝试在日期 1 到 9 的前面添加 0，因为日期列在下拉菜单中。这是我的代码，我认为使用 d 会添加前导零，但似乎不起作用。我没有太多的 php 经验，所以这是一个远景......提前谢谢你！

```
<?PHP 

FUNCTION DateSelector($inName, $useDate=0) 
{ 
    /* create array so we can name months */ 
    $monthName = ARRAY(1=> "January", "February", "March", 
        "April", "May", "June", "July", "August", 
        "September", "October", "November", "December"); 

    /* if date invalid or not supplied, use current time */ 
    IF($useDate == 0) 
    { 
        $useDate = TIME(); 
    } 

    /* make month selector */ 
    ECHO "<SELECT NAME=" . $inName . "month>\n"; 
    FOR($currentMonth = 1; $currentMonth <= 12; $currentMonth++) 
    { 
        ECHO "<OPTION VALUE=\""; 
        ECHO INTVAL($currentMonth); 
        ECHO "\""; 
        IF(INTVAL(DATE( "m", $useDate))==$currentMonth) 
        { 
            ECHO " SELECTED"; 
        } 
        ECHO ">" . $monthName[$currentMonth] . "\n"; 
    } 
    ECHO "</SELECT>"; 

    /* make day selector */ 
    ECHO "<SELECT NAME=" . $inName . "day>\n"; 
    FOR($currentDay=1; $currentDay <= 31; $currentDay++) 
    { 
        ECHO "<OPTION VALUE=\"$currentDay\""; 
        IF(INTVAL(DATE( "d", $useDate))==$currentDay) 
        { 
            ECHO " SELECTED"; 
        } 
        ECHO ">$currentDay\n"; 
    } 
    ECHO "</SELECT>"; 

    /* make year selector */ 
    ECHO "<SELECT NAME=" . $inName . "year>\n"; 
    $startYear = DATE( "Y", $useDate); 
    FOR($currentYear = $startYear - 0; $currentYear <= $startYear+2;$currentYear++) 
    { 
        ECHO "<OPTION VALUE=\"$currentYear\""; 
        IF(DATE( "Y", $useDate)==$currentYear) 
        { 
            ECHO " SELECTED"; 
        } 
        ECHO ">$currentYear\n"; 
    } 
    ECHO "</SELECT>"; 

} 
?> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T17:17:28.713

如果我理解正确，你需要这个：

```
$day = 1;    
echo str_pad($day, 2, 0, STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:18:32.380

您可以更换：

```
ECHO INTVAL($currentMonth); 
```

和：

```
printf("%02s", $currentMonth); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T17:19:14.680

```
$day_with_leading_zeroes = sprintf("%02d", $day); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T02:45:58.720

```
$date =4
$month = 6
$year = 2013 
```

如果想以这种格式显示在上面。2013 年 4 月 6 日

```
printf('%02d/%02d/%04d', $date, $month, $year);
$date =14
$month = 12
$year = 2013 
```

如果想以这种格式显示在上面。2013 年 12 月 14 日

```
printf('%02d/%02d/%04d', $date, $month, $year); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T17:24:37.910

代替：

```
ECHO ">$currentDay\n"; 
```

你可以输入：

```
echo ">".($currentDay<10 ? "0" : "").$currentDay."\n"; 
```

# z3 - 带求解器的 Z3 超时

> ID：10854664
> 
> 赞同：1
> 
> 时间：2012-06-01T17:14:29.837
> 
> 标签：z3

我有一个简单的问题。如何使用以下 API 确定求解器是否超时 -

```
Z3_lbool Z3_API Z3_solver_check (Z3_context c, Z3_solver s ) 
```

由于 Z3_lbool 只是 true、false 或未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:35:21.083

您可以使用 API `Z3_string Z3_solver_get_reason_unknown(Z3_context c, Z3_solver s)`。如果您使用的是 C++，对象求解器会提供方法`std::string reason_unknown()`. 这是一个使用它的小例子：

```
context c;
expr x = c.real_const("x");
expr y = c.real_const("y");
solver s(c);

s.add(x >= 1);
s.add(y < x + 3);

params p(c);
p.set(":timeout", static_cast<unsigned>(1)); // in milliseconds
s.set(p);

std::cout << s.check() << std::endl;
std::cout << "reason unknown: " << s.reason_unknown() << std::endl; 
```

# iphone - 创建新类时的 Xcode 构建错误

> ID：10854668
> 
> 赞同：0
> 
> 时间：2012-06-01T17:14:35.993
> 
> 标签：iphone, ios, xcode, singleton

我创建了一个类型为 NSObject 的新类，它创建了两个文件——一个 .h 和一个 .m 文件。这是两个文件中的代码：

套接字连接.h

```
#import <Foundation/Foundation.h>

@interface SocketConnection : NSObject
{

}

+ (SocketConnection *)getInstance;

@end 
```

套接字连接.m

```
#import "SocketConnection.h"
#import "imports.h"

static SocketConnection *sharedInstance = nil;

@implementation SocketConnection

- (id)init
{
    self = [super init];

    if (self) 
    {
        while(1)
        {
            Socket *socket;
            int port = 11005;
            NSString *host = @"199.5.83.63";

            socket = [Socket socket];

            @try
            {
                NSMutableData *data;
                [socket connectToHostName:host port:port];
                [socket readData:data];
                //  [socket writeString:@"Hello World!"];

                // Connection was successful //
                [socket retain]; // Must retain if want to use out of this action block.
            }
            @catch (NSException* exception) 
            {
                NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
                NSLog(errMsg);
                socket = nil;
            }
        }
    }
    return self;
}

+ (SocketConnection *)getInstance
{
    @synchronized(self) 
    {
        if (sharedInstance == nil) 
        {
            sharedInstance = [[SocketConnection alloc] init];
        }
    }
    return sharedInstance;
}

@end 
```

而且我似乎遇到了链接器错误。当我注释掉 SocketConnection.h/SocketConnection.m 中的所有代码时，错误就消失了。我的项目中有几个视图。我有一个名为“imports.h”的头文件，我已经导入了 SocketConnection.h，并在我的 SocketConnection.m 文件中包含了“imports.h”。任何帮助将不胜感激，因为我似乎被困在这里：/。谢谢！

错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_Socket", referenced from:
objc-class-ref in SocketConnection.o
(maybe you meant: _OBJC_CLASS_$_SocketConnection)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:17:02.957

您需要在 .m 文件的顶部 #import "Socket.h"。

这里的错误

```
 "_OBJC_CLASS_$_Socket", referenced from:
objc-class-ref in SocketConnection.o 
```

是说 SocketConnection 正在引用一个名为“Socket”的 Objective-C 类，它不知道。

# python - 如何在 SQLAlchemy 中为其他类中描述的表发出 CREATE 语句？

> ID：10854671
> 
> 赞同：0
> 
> 时间：2012-06-01T17:14:37.860
> 
> 标签：python, sql, sqlalchemy

我正在研究包含电子零件数据的 SQL 数据库的 python 接口。有一个表示主零件编号参考表的基类，所有零件类型类都从该参考表继承。每个子类都有自己的表来保存参数数据。还有其他几个包含诸如供应商数据之类的信息的类，其中每个 Part 实例都有一个或多个实例。继承层次结构如下所示：

```
Part
    PartTypeA
    PartTypeB 
```

Part 类与描述供应商信息等的其他表有几个关系。

我有一个单独的 DatabaseManager 类来处理向数据库添加部件（管理和控制 SQLAlchemy 引擎的实例）。即使表是在其他类中定义的，如何使用 SQLAlchemy 为所有表发出 CREATE 语句？

我尝试了以下方法（这是在数据库管理器类中）：

```
self.db_engine = create_engine(db_uri, echo=False)
Part.metadata.create_all(self.db_engine) 
```

这实际上有效，但我不确定为什么（可能是因为 Part 包含与某些表的 SQLAlchemy 关系，而其他表都是 Part 的子类？）。SQLAlchemy 文档中的示例似乎假设引擎被定义在与数据库表相同的位置。

有谁知道这是否是正确的方法？如果不是，让 SQLAlchemy 发出 CREATE 语句的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:02:55.327

这是正确的方法。
关键是`metadata.create_all(db_engine)`，它将基本上创建`metadata`实例中定义的所有数据对象。因此，您的用法是正确的，这`Part.metadata`只是获取`metadata`实例的一种方法，所有其他映射对象都映射到该实例。虽然，您的`DatabaseManager`类可能会`MetaData`直接引用该实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:09:20.823

我尝试将此代码移植到 MySQL，但没有像使用 sqlite 时那样发出创建语句。这是我为使代码在 MySQL 中工作所做的工作：

```
# Create an instance of each class and bind it's metadtata
items = []
for cls in self.get_class_list():
    temp = cls()
    temp.__table__.metadata = metadata
    items.append(temp)

# Issue CREATE statements
for item in items:
try:
    item.__table__.create()
        except Exception as e:
            print e 
```

# eclipse - 有没有办法只使用键盘在 Eclipse 中平铺编辑器？

> ID：10854673
> 
> 赞同：0
> 
> 时间：2012-06-01T17:15:03.263
> 
> 标签：eclipse, editor, tiling

在 Eclipse 中处理多个文件时，我通常将编辑器组织成图块。但是，有时我需要关闭所有打开的编辑器才能打开一组不同的文件。但是，当我打开新批次时，它默认将所有编辑器堆叠在一个图块中。我希望布局基本保持不变，或者通过快捷键进行更改。也许接近 AwesomeWM、ion3 等所做的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:06:28.180

不要这么想。eclipse中没有这样的选项。您需要使用鼠标来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:11:43.427

熟悉 emacs 的可以安装[emacs+](http://www.mulgasoft.com/)插件，它实现了窗口分割（Cx 2、Cx 3）和许多其他相关的窗口/缓冲区操作。非常适合我的需求。我不认为内置的 emacs 方案可以做到这一点。

# .htaccess - How to redirect actions to be "mock" controllers in Zend?

> ID：10854676
> 
> 赞同：0
> 
> 时间：2012-06-01T17:15:17.310
> 
> 标签：.htaccess, url-rewriting, zend-framework2

I'm working on a site where the IndexController holds some pages like "about", "contact" and etc. I'd like for either Zend or a .htacess config to redirect /about to /index/about, but without URL re-writing (or at least, have it be transparent to the user).

So it'd perform something like this:

mysite.com/about => mysite/index/about (w/o showing said URI to the user).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:09:28.463

Using the new Service Manager config:

```
'controller' => array(
    'classes' => array(
        'index_controller' => 'MyModule\Controller\IndexController',
    ),
),

'router' => array(
'routes' => array(

    'activities_list' => array(
        'type'    => 'Literal',
            'options' => array(
            'route' => '/about', <- The requested URL
            'defaults' => array(
                'controller' => 'index_controller', <- What will process the request
                'action'     => 'about',
            ),
        ),
    ),

), // End of routes
), // End of router 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T18:11:09.297

You don't need anything special to do that, ZF2 is perfectly equipped to handle custom routes. The [ZF2 tutorial by Akrabat](http://akrabat.com/zend-framework-2-tutorial/) shows it all well. You'll end up doing something like this in your config:

```
'Zend\Mvc\Router\RouteStack' => array(
    'parameters' => array(
        'routes' => array(
            'default' => array(
                'type'    => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route'    => '/[:controller[/:action]]',
                    'constraints' => array(
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Application\Controller\IndexController',
                        'action'     => 'index',
                    ),
                ),
            ),
            'about' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\IndexController',
                        'action'     => 'about',
                    ),
                ),
            ),
        )
    )
) 
```

Of course you can also automatize these things by extending the ActionController or by writing a Controller Plugin.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T18:12:16.927

Try adding this to the .htaccess file in your document root in somewhere appropriate:

```
RewriteEngine On
RewriteRule ^about(.*)$ /index/about$1 [L] 
```

# ruby-on-rails - RESTful 设计多对多关系到 DELETE 一个请求

> ID：10854684
> 
> 赞同：1
> 
> 时间：2012-06-01T17:15:45.303
> 
> 标签：ruby-on-rails, rest, many-to-many

我正在创建一个 RESTful API，供 n+ 个客户端通过 HTTP 使用。

如果我有一个 Users <= Friendships => Friends 多对多关系，我是否应该满意为了删除任何用户的友谊，我首先必须查询 GET Friendships#index 以获取友谊的 ID我打算删除，然后发出删除请求？

```
GET /friendships?user_id=123&friend_id=456
=> {id:"999",user_id:"123",friend_id:"456"}
DELETE /friendships/999
=> "Friendship deleted" 
```

为了让用户删除好友关系，应用程序需要提供好友关系“id”，但为了让用户知道他们正在删除哪个好友，他们需要查看好友“名称”。

换句话说，是否有一种 RESTful 方式在同一个 HTTP 请求中请求 Friend 模型数组及其各自的 Friendship 模型数组？

以下是我当前的设置：

```
# Models
class User < ActiveRecord::Base  
  has_many :friendships, :dependent => :destroy
  has_many :friends, :through => :friendships
  # disregard inverse for now
end

class Friendship < ActiveRecord::Base
  belongs_to :user
  belongs_to :friend, :class_name => "User"
  validates_uniqueness_of :user_id, :scope => :friend_id
end

# Tables
create_table :users do |t|
  t.string :name
  t.timestamps
end

create_table :friendships do |t|
  t.integer :user_id, :null => false
  t.integer :friend_id, :null => false
  t.integer :status, :null => false, :default => 0
  t.timestamps
end

# routes.rb
resources :friendships, :only => [:create, :destroy, :index]
resources :users do
  member do
    get :friends # index-like action returning array of friends
  end
end 
```

...是的，我一直在寻找几天:)

我正在使用 Rails，但这个问题代表任何框架。是的，我知道我有一百万种方法可以“完成”，但我正在寻找 RESTful 方式来做到这一点，这样我就可以使用任何客户端框架，而不必过多地自定义 I/O .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:16:14.683

我认为您不需要发出两个单独的请求。我认为，如果您处于只知道 user_id 和 follower_id 的位置，您可以在 Friendship 模型中实现一个查找器，以根据 user_id 和friend_id 查找友谊，然后删除找到的那个。不过，我认为如果您想走纯粹的宁静方式，最好在显示友谊关系时拉出friendship.id服务器端。[在sample_app 的 Rails 教程代码库中](https://github.com/railstutorial/sample_app)有一个很好的例子来说明如何做到这一点。在这里，连接模型称为关系，并且有一个具有创建和销毁操作的关系控制器。用于处理销毁操作的表单位于 /app/views/users/_unfollow.html.erb 中，如下所示：

```
<%= form_for(current_user.relationships.find_by_followed_id(@user),
             :html => { :method => :delete },
             :remote => true) do |f| %>
  <div class="actions"><%= f.submit "Unfollow" %></div>
<% end %> 
```

在这里，用户模型上有一个 has_many :relationships，然后它使用 ActiveRecord 中的 find_by_followed_id 动态查找器返回要删除的特定关系对象。这似乎是最 RESTful 的方式。

# java - Java继承：Java中不允许的情况下如何实现类似于“多重继承”的东西？

> ID：10854685
> 
> 赞同：5
> 
> 时间：2012-06-01T17:15:49.763
> 
> 标签：java, swing, inheritance

这是一个主要关于Java继承的问题。我正在开发一个有 2 个窗口的程序，这两个窗口都将在单独的类中开发，这些类将扩展 JPanel。第一类是“FileSub1”，第二类是“FileSub2”。

这两个类有很多共同的方法，所以我想创建一个名为“Files”的类，并将“FileSub1”和“FileSub2”作为其子类。但是Java不支持多重继承！我可以在这里做什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T17:21:50.513

[更喜欢组合而不是继承](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

在您的 JPanel 子类中包含 FileThing，而不是使其成为 FileThing*和*JPanel。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-01T17:18:48.930

我不明白为什么你需要多重继承。据我所知，使用实现常用方法的抽象基类应该没问题：

```
public abstract class AbstractFilePanel extends JPanel
{
    public void commonMethod1() {}
}

public class FileSub1 extends AbstractFilePanel 
{
    public void sub1Method() {}
}

public class FileSub2 extends AbstractFilePanel 
{
    public void sub2Method() {}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T17:22:25.330

您可以执行以下操作

```
public class Files extends JPanel{
}

public class FileSub1 extends Files{
}

public class FileSub2 extends Files{
} 
```

# javascript - 用 javascript 读取 RSS

> ID：10854693
> 
> 赞同：1
> 
> 时间：2012-06-01T17:16:58.340
> 
> 标签：javascript, rss

我正在尝试阅读 RSS 提要（此处为 Google 新闻提要）并使用 Javascript 从原始代码中获取特定信息。当第二行中的 URL 在 Firefox 中更改为本地文件（我复制粘贴 gNews 并保存为 xml）时，以下代码有效，但当它是如下外部页面时则无效。该代码在 IE 或 Chrome 中的任何条件下都不起作用。有什么建议么？

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","https://news.google.com/news/feeds?ned=us&topic=h&output=rss",false);
try {
    xmlhttp.send();
}
catch(exception){
    document.write(exception+"");
}
var xmlDoc=xmlhttp.responseXML; 
var x=xmlDoc.getElementsByTagName("item");
for (i=0;i<4;i++) {
  if(i%2==0) {
    document.write("<div id='bottombox'>");
  }
  var raw=x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;<br />
  var toWrite=""+raw.substring(0,raw.indexOf(" - ",0));
  document.write("<a href="+x[i].getElementsByTagName('link')[0].childNodes[0].nodeValue+" style='font-family:Verdana, Geneva, sans-serif; font-size:13px; color:#FFF;'>");
  document.write(toWrite);
  document.write("</a>");
  document.write("<br />");
  if(i%2!=0) {
      document.write("</div>");
  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:19:32.230

这是跨域安全违规行为，您的浏览器禁止这样做。

有关详细信息，请参阅[“同源策略”](http://en.wikipedia.org/wiki/Same_origin_policy)和[“跨源资源共享”](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

# jquery - 在调整模态大小之前，jQuery 不会在 ajax 加载的模态中运行

> ID：10854694
> 
> 赞同：0
> 
> 时间：2012-06-01T17:17:00.390
> 
> 标签：jquery, asp.net-mvc, fullcalendar

我有一个模型，打开时会加载部分视图。

局部视图有一个 jQuery 函数。打开模式时，jQuery 不会运行。

只要我完全调整模态的大小，就会运行 jQuery 并出现预期的结果。

这是加载 html 并打开模式的代码

```
 $(document).ready(function () {
        $("#reschedule").button().click(function () {

                            var url = $("#rescheduleUrl").attr('href');

                            $.ajaxSetup({ cache: false });
                            $.ajax({
                                url: url,
                                success: function (data) {
                                    $("#rescheduleDiv").html(data);
                                    $("#rescheduleDiv").dialog('open');
                                }
                            });
        });
    }); 
```

从加载的部分视图来看，这是我需要立即运行的 jQuery。

```
$('#calendar').fullCalendar({
    theme: true,
    header: {
        left: 'month,agendaWeek,agendaDay',
        center: 'title',
        right: ''
    },
    defaultView: 'agendaWeek',
    editable: false,
    minTime: 5,
    maxTime: 20,
    events: "/ServiceTicket/GetCalendarEvents/",
    allDaySlot: false
}); 
```

我也试过把它包裹起来

```
 $(document).ready(function() {
     ...
   }); 
```

结果相同。

有什么想法我需要做些什么才能让它立即运行？我在萤火虫中看过它，当模态框重新调整大小时它会运行，但直到那时才运行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:21:34.140

我认为您还需要将部分视图 JQuery 包装在 document.ready 函数中。这就是我们如何让 JQuery 在从局部视图“弹出”的颜色框模式中触发

```
 $(document).ready(function () {
$('#calendar').fullCalendar({
    theme: true,
    header: {
        left: 'month,agendaWeek,agendaDay',
        center: 'title',
        right: ''
    },
    defaultView: 'agendaWeek',
    editable: false,
    minTime: 5,
    maxTime: 20,
    events: "/ServiceTicket/GetCalendarEvents/",
    allDaySlot: false
});
}); 
```

**编辑**

我认为在您的父页面中反转加载/显示功能可能会解决问题。

```
success: function (data) {    
    $("#rescheduleDiv").dialog('open');
    $("#rescheduleDiv").html(data);
 } 
```

通过在“显示”对话框之前填充 html，在您与对话框交互之前， doc.ready 函数可能永远不会与您的事件处理程序一起触发。如果您先显示它，然后加载 html 数据，您的事件处理程序会按预期显示工作。

# dependency-injection - 使用 Castle Windsor 解析 HttpControllerContext

> ID：10854701
> 
> 赞同：28
> 
> 时间：2012-06-01T17:17:22.757
> 
> 标签：dependency-injection, castle-windsor, asp.net-web-api, self-hosting

在[ASP.NET Web API](http://www.asp.net/web-api)中，HttpControllerContext 实例提供了很多关于当前环境的信息，包括当前请求的 URI。

如果服务依赖于此类信息（例如请求 URI），则应该可以将该信息注入到服务中。

使用 Poor Man 的 DI 很容易做到这一点：只需[实现一个自定义 IHttpControllerActivator](http://blog.ploeh.dk/2012/04/17/InjectingHttpControllerContextWithTheASPNETWebAPI.aspx)。

然而，有了温莎城堡，这突然变得非常困难。之前，[我已经描述了一种非常复杂的方法](http://blog.ploeh.dk/2012/04/19/WiringHttpControllerContextWithCastleWindsor.aspx)来解决这个问题，但是它取决于 PerWebRequest 生活方式，事实证明这种生活方式在自托管场景中不起作用，因为 HttpContext.Current 是空的。

到目前为止，我已经能够通过将所需信息作为内联参数从自定义 IHttpControllerActivator 传递给 Resolve 方法来完成这项工作：

```
public IHttpController Create(
    HttpControllerContext controllerContext,
    Type controllerType)
{
    var baseUri = new Uri(
        controllerContext
            .Request
            .RequestUri
            .GetLeftPart(UriPartial.Authority));

    return (IHttpController)this.container.Resolve(
        controllerType,
        new { baseUri = baseUri });
} 
```

但是，默认情况下，这仅在立即请求的类型依赖于参数时才有效（即，如果请求的 Controller 本身依赖于`baseUri`）。如果依赖关系在`baseUri`依赖层次结构中更深，则默认情况下它不起作用，因为内联参数不会传播到更深层。

可以使用自定义 IDependencyResolver（Castle Windsor IDependencyResolver，而不是 ASP.NET Web API IDependencyResolver）更改此行为：

```
public class InlineDependenciesPropagatingDependencyResolver :
    DefaultDependencyResolver
{
    protected override CreationContext RebuildContextForParameter(
        CreationContext current, Type parameterType)
    {
        if (parameterType.ContainsGenericParameters)
        {
            return current;
        }

        return new CreationContext(parameterType, current, true);
    }
} 
```

请注意，`true`它作为`propagateInlineDependencies`构造函数参数而不是`false`作为默认实现传递。

为了将容器实例与 InlineDependenciesPropagatingDependencyResolver 类连接起来，它必须以这种方式构造：

```
this.container = 
    new WindsorContainer(
        new DefaultKernel(
            new InlineDependenciesPropagatingDependencyResolver(),
            new DefaultProxyFactory()),
        new DefaultComponentInstaller()); 
```

我想知道这是否是解决此问题的最佳方法，或者是否有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:11:57.947

为了完整起见，我在 Twitter 上从 Krzysztof Koźmic（Castle Windsor 的当前维护者）那里得到的回答表明，问题中概述的方法确实是实现这一特定目标的正确方法。

（但是，我无法链接到该推文，因为 Krzysztof 的推特帐户受到保护（推文不公开可见。））

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:48:00.660

在我看来，您的 InlineDependenciesPropagatingDependencyResolver 实际上掩盖了一些对您的应用程序架构相当重要的东西：您的一个或多个组件具有无法从容器或动态上下文中静态可靠地解析的依赖项。

它违反了大多数开发人员在将内联依赖项传递给 Resolve() 时所做的假设（它们只传递了一级依赖项解析），并且在某些情况下可能导致依赖项错误地覆盖某些其他配置的服务。（例如，如果您有另一个组件向下许多级别具有相同类型和名称的依赖项）。这可能是导致很难识别的错误的潜在原因。

这个问题的核心对于 DI 来说是一个难题，并且确实表明 IoC 并不是真正可行的（即我们的依赖项需要被“推送”并且不能被容器为我们“拉取”）。在我看来，有两种选择：

1）纠正阻止“反转”的问题。即包装 HttpControllerContext/HttpContext，扩充该包装器以在自托管场景中按要求运行，并让您的组件依赖该包装器，而不是直接依赖 HttpControllerContext/HttpContext。

2）反映您正在使用的环境的缺点（它不完全支持“反转”），并使解决这些缺点的解决方法非常明确。在您的场景中，这可能涉及使用类型化工厂（接口）来实例化`baseUri`您的`IHttpControllerActivator.Create()`. 这意味着如果这个组件在依赖层次结构中更靠后，你需要显式地建立你的依赖层次结构，直到你有你的控制器。

我可能会选择第二个选项，因为当约定不削减它时，我更喜欢尽可能明确。

***更新*** 假设我们有一个控制器类型`A`，它依赖于组件`B`，而组件又依赖于 baseUri，第二个选项可能看起来像：

```
// Typed factories for components that have dependencies, which cannot be resolved statically
IBFactory bFactory; 
IAFactory aFactory;

public IHttpController Create(HttpControllerContext controllerContext, Type controllerType)
{
    if (controllerType == typeof(A))
    {
        // Special handling for controller where one or more dependencies
        // are only available via controllerContext.
        var baseUri = new Uri(controllerContext.Request.RequestUri.GetLeftPart(UriPartial.Authority));
        B b = this.bFactory.Create(baseUri);
        return this.aFactory.Create(b);
    }
    // Default for all other controllers 
    return (IHttpController)this.container.Resolve(controllerType);
} 
```

关键点是，这明确地处理了我们环境的缺点，它将受影响的类型与我们强制提供的依赖覆盖特别绑定，并确保我们不会意外覆盖任何其他依赖。

# c# - 标准处置模式？为什么我们需要在虚拟方法中使用“disposing”参数，而终结器不是总是在 dispose 之后被调用？

> ID：10854708
> 
> 赞同：9
> 
> 时间：2012-06-01T17:17:53.243
> 
> 标签：c#, .net, c#-3.0

为什么我们需要在下面的代码片段中配置**参数。**

此外，我们在终结器中使用 false 调用 dispose，它不会释放或进行清理。

那么如果 dispose 永远不会被调用呢？

不是总是在终结器之前调用 dispose 吗？

```
using System;
public class MyClass : IDisposable 
{ 
    private bool disposed = false;  
    protected virtual void Dispose(bool disposing) 
    {    
        if (!disposed)
        {
            **//Do we really need this condition?
            if (disposing)**
            { 
                // called via myClass.Dispose().    
                // OK to use any private object references
            }
            disposed = true; 
        } 
    }
    public void Dispose() 
        // Implement IDisposable     
    {
        Dispose(true);   
        GC.SuppressFinalize(this); 
    } 
    ~MyClass() // the finalizer
    {
        //why do we need to call with false?
        Dispose(false);    
    }
} 
```

换句话说，为什么不呢？

```
using System;
public class MyClass : IDisposable 
{ 
    private bool disposed = false;  
    protected virtual void Dispose(bool suppressFinalize) 
    {    
        if (!disposed)
        {
            //Do we really need this condition?

                // called via myClass.Dispose().    
                // OK to use any private object references            
            disposed = true; 
        }
        if (!suppressFinalize)
        {
            GC.SuppressFinalize(this); 
        }
    }
    public void Dispose() 
        // Implement IDisposable     
    {
        Dispose(true);   

    } 
    ~MyClass() // the finalizer
    {
        //why do we need to call with false?
        Dispose(false);    
    }
} 
```

事实上，我真的需要终结器吗？为什么不是这个？

```
using System;
public class MyClass : IDisposable 
{     
    public void Dispose() 
        // Implement IDisposable     
    {
        //just do the cleanup and release resources
        GC.SuppressFinalize(this);
    } 

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T17:22:28.117

> 此外，我们在终结器中使用 false 调用 dispose，它不会释放或进行清理。

确实 - 它会假设其他类在这种情况下处理自己的清理，并且只清理直接的非托管资源。

> 那么如果 dispose 永远不会被调用呢？

*然后会*调用终结器，它会清理任何*直接*的非托管资源，但不用担心*间接*资源。

> 不是总是在终结器之前调用 dispose 吗？

如果没有人出于某种原因调用它，则不会。

我认为这种模式比它需要的更复杂，因为它试图解释作为*可能*需要终结器的其他类的基类的类。密封你的课程，你就可以完全实现你所期望的:)

您可能还想阅读 Joe Duffy 的[“Never write a finalizer again”](http://joeduffyblog.com/2005/12/27/never-write-a-finalizer-again-well-almost-never/)博客文章和[对该模式的详细解释](http://joeduffyblog.com/2005/04/08/dg-update-dispose-finalization-and-resource-management/)。

# android - 在android中实现后退按钮

> ID：10854711
> 
> 赞同：0
> 
> 时间：2012-06-01T17:18:15.233
> 
> 标签：android, android-4.0-ice-cream-sandwich, back-button, softkeys

我正在为android中的状态栏隐藏时创建一组主页/返回键。我设计了一个按钮来模拟 Home 键按下

```
private void InjectKey(final int keyEventCode) {
       new Thread(new Runnable() {
        @Override
        public void run() {
               new Instrumentation().sendKeyDownUpSync(keyEventCode);
        }
       }).start(); 
```

}

这适用于主页按键。但是，当我尝试对后退按钮应用相同的解决方案时，应用程序显然只是在自身上调用了 finish()。

我的问题是：如何实现后退按钮，以便它在最新的应用程序及其本身上调用“返回”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:58:28.037

在第二个活动中，如果您使用自己的后退按钮并使用 finish(); 要停止该活动，然后将调用以下方法。所以在你的第二个活动中覆盖以下方法并将所需的代码放入其中

```
@Override
    public void onStop() {
        super.onStop();
        Toast.makeText(Activity2.this, "STOP", Toast.LENGTH_SHORT).show();
    } 
```

在第二个活动中，您可以使用 Override 以下方法，该方法将在调用后退按钮时调用

```
@Override
    public void onBackPressed() {
            Toast.makeText(Activity2.this, "BACK", Toast.LENGTH_SHORT).show();
            super.onBackPressed(); // allows standard use of backbutton for page 1
    } 
```

将所需的代码放入此方法中。

# android - 为什么 match_parent 替换了 fill_parent？

> ID：10854717
> 
> 赞同：2
> 
> 时间：2012-06-01T17:18:43.800
> 
> 标签：android

> **可能重复：**
> 
> [match_parent 和 fill_parent 有什么区别？](https://stackoverflow.com/questions/5761960/what-is-the-difference-between-match-parent-and-fill-parent-property-in-android)
> 
> [不推荐使用的单词是fill_parent和match_parent之间的唯一区别](https://stackoverflow.com/questions/8516825/is-deprecated-word-the-only-difference-between-fill-parent-and-match-parent)

`fill_parent`被弃用。`match_parent`应改为使用。它们在功能上是等效的，唯一的区别是名称。出了什么问题`fill_parent`？我喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:20:34.797

错误在于它没有*填充*父级，而是使其具有与父级相同的维度，或者换句话说*与*父级维度匹配。它*填充*父级的唯一情况是视图是布局中的单个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:23:05.643

`match_parent`意味着孩子想要和父母一样大……也许他们想让它听起来更真实？

# jquery - 当用户尝试对数据进行排序时显示加载微调器

> ID：10854720
> 
> 赞同：2
> 
> 时间：2012-06-01T17:19:07.270
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-load, tablesorter

我需要帮助修改我的 jquery tablesorter 插件。

我正在使用位于[http://tablesorter.com/docs/的插件](http://tablesorter.com/docs/)

```
<script type="text/javascript">
    $(document).ready(function() { 
        $('table').tablesorter({
        });
    }); 
    </script> 
```

我得到了用户的帮助，现在工作正常。由于我有大量数据要排序，所以有点慢。

因此，当用户单击它时，我希望用户知道它正在尝试对数据进行排序。所以我想要一个提示或在执行排序时显示“正在加载”或“排序”或显示忙碌符号的东西有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:50:38.277

从[文档中](http://tablesorter.com/docs/example-triggers.html)：

```
$(document).ready(function() { 
    // call the tablesorter plugin, the magic happens in the markup 
    $("table").tablesorter(); 
    //assign the sortStart event 
    $("table").bind("sortStart",function() { 
        $("#overlay").show(); 
    }).bind("sortEnd",function() { 
        $("#overlay").hide(); 
    }); 
}); 
```

说明：插件实现了两个回调挂钩 -`sortStart`和`sortEnd`. 所以在人类语言中，上面的代码意味着*在排序开始之前显示覆盖，并在排序完成后立即隐藏它*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:43:00.917

这是一个如何[轻松](http://jsfiddle.net/edelman/7JKAs/)使用加载叠加微调器（[创建自己的微调器](http://ajaxload.info)）的示例。

只需连接`$('.overlay').show()`到您的点击事件，并确保`$('.overlay').hide()`在您的数据完成排序时调用。

# jquery - jQuery AJAX 转换器 jsonp

> ID：10854727
> 
> 赞同：0
> 
> 时间：2012-06-01T17:19:42.217
> 
> 标签：jquery, ajax, jsonp, converters

我正在尝试拦截 ajax jsonp 响应以进行一些响应过滤。我的猜测是，我可以使用自定义转换器来做到这一点。但是转换器功能永远不会运行。我错过了什么？

```
var ajax_options = {
    dataType: 'jsonp',
    jsonp: 'callback',
    url: url,
    data: parameters,
    success: success,
    converters: {
        "jsonp": function (raw) {
            console.log(raw);
            return raw;
        }
    }
};
$.ajax(ajax_options); 
```

谢谢，麦克法兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:28:29.997

从[docs](http://api.jquery.com/jquery.ajax/)，转换器是：

> 数据类型到数据类型转换器的映射。每个转换器的值都是一个返回响应的转换值的函数。

因此，它用于从一种数据类型转换为另一种数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:45:12.077

我现在听了常识，并决定不滥用可怜的转换器。我创建了一个解决方案，使用 $.proxy() 来拦截每个 JSONP 响应，同时在回调函数中保持正确的上下文。

因为我的解决方案在很大程度上依赖于 jQueryMX，所以我不会在这里粘贴我的源代码。

# javascript - 如何使用 javascript 检索有关 mp3 的信息？

> ID：10854728
> 
> 赞同：0
> 
> 时间：2012-06-01T17:19:44.773
> 
> 标签：javascript, html, mp3, id3, id3v2

我已经对这个主题进行了一些研究，但无法得到关于如何去做的明确答案。我尝试了以下方法：

```
<script type="text/javascript" src="../binaryajax/binaryajax.js" ></script>
<script type="text/javascript" src="id3.js" ></script>

var file = "mymusicfile.mp3";
// define your own callback function
function mycallback() {
// either call ID3.getAllTags([file]) function to return object holding all the tags
alert(
    "All tags in this file: " + ID3.getAllTags(file).toSource()
);
// or call ID3.getTag([file], [tag]) to get a specific tag
alert(
    "Title: " + ID3.getTag(file, "title") + " by artist: " + ID3.getTag(file, "artist")
);
}
ID3.loadTags(file, mycallback); 
```

第一种方法 (getAllTags) 不允许我的脚本运行，第二种方法为我所有 mp3 的标题和艺术家返回 null。

信息来源：http: [//blog.nihilogic.dk/2008/08/reading-id3-tags-with-javascript.html](http://blog.nihilogic.dk/2008/08/reading-id3-tags-with-javascript.html)

我知道这些方法使用的是 ID3(v1)，所以这可能是问题所在。要么，或者我认为 mp3 可能不包含 ID3 信息。但是，如果有人可以提供一些关于如何做到这一点的见解，或者如何识别我的 mp3 是否包含 ID3 信息以及它是 v1 还是 v2，那就太好了。

编辑：我应该说，我正在通过 Blob URL 访问文件，因为我正在开发的应用程序让用户在他们的计算机上选择一个目录，然后在文件中查询媒体文件。在这样做时，您无法访问文件的绝对路径，但您仍然可以访问文件信息并使用该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:23:47.877

供其他人使用：这对我来说效果很好:)

github.com/aadsm/JavaScript-ID3-Reader/tree/master/src 使用项目仓库

# mysql - 在不同的时间点多次选择单列

> ID：10854729
> 
> 赞同：0
> 
> 时间：2012-06-01T17:19:46.217
> 
> 标签：mysql, sql, select

我有一个包含 4 列的简单表 - ID、日期、类别、值。

我有 5 个不同的类别，每天都有特定的值。我想在不同的时间点选择值列并显示结果以及适当的类别。

这是我正在使用的代码：

```
select
Category,
case when date=DATE_SUB(CURDATE(),INTERVAL 1 DAY) then value else 0 end as Today,
case when date=DATE_SUB(CURDATE(),INTERVAL 1 MONTH) then value else 0 end as "Month Ago",
case when date=DATE_SUB(CURDATE(),INTERVAL 1 Year) then value else 0 end as "Year Ago"
from table
group by category 
```

它不工作。我正在使用 mysql 数据库，但将通过 ODBC 连接在 SSRS 中运行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:46:53.537

这种类型的查询最好使用三个单独的查询来完成：

```
SELECT 'Today' AS `When`, Category, value FROM `table`
  WHERE date = DATE_SUB(CURDATE(),INTERVAL 1 DAY)
UNION ALL
SELECT 'Month Ago' AS `When`, Category, value FROM `table`
  WHERE date = DATE_SUB(CURDATE(),INTERVAL 1 MONTH)
UNION ALL
SELECT 'Year Ago' AS `When`, Category, value FROM `table`
  WHERE date = DATE_SUB(CURDATE(),INTERVAL 1 YEAR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:47:21.903

您的查询的问题是，如所写，case 语句需要嵌入聚合函数中：

```
select Category,
       avg(case when date=DATE_SUB(CURDATE(),INTERVAL 1 DAY) then value end) as Today,
       avg(case when date=DATE_SUB(CURDATE(),INTERVAL 1 MONTH) then value end) as "Month Ago",
       avg(case when date=DATE_SUB(CURDATE(),INTERVAL 1 Year) then value end) as "Year Ago"
from table
group by category 
```

我选择了“avg”，因为如果有多个值并且“value”列是数字，这似乎是合理的。您可能更喜欢 min() 或 max() 来获取其他值。

另外，我删除了“else 0”子句，所以当没有值时你会看到 NULL 而不是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:58:35.200

尝试这样的事情：

```
SELECT
    t1.Category, t1.Value, t2.Value, t3.Value
    FROM YourTable t1
    LEFT OUTER JOIN YourTable t2 ON t1.Category=t2.Category 
                                    AND Date=DATE_SUB(CURDATE(),INTERVAL 1 Month)
    LEFT OUTER JOIN YourTable t3 ON t1.Category=t3.Category 
                                    AND Date=DATE_SUB(CURDATE(),INTERVAL 1 Year)
    WHERE Date=DATE_SUB(CURDATE(),INTERVAL 1 DAY) 
```

这假设您每个间隔只有一行。如果每个间隔有多行，则需要确定要为该间隔显示哪个值（最小值、最大值等）。然后，您需要汇总多行。如果是这种情况，OP 应该提供一些示例数据和预期的查询输出，以便可以进行测试。

# asp.net - ReportViewer 控件 (v10) 和高度

> ID：10854730
> 
> 赞同：0
> 
> 时间：2012-06-01T17:19:52.683
> 
> 标签：asp.net, ssrs-2008, reportviewer, reportingservices-2005

我们曾经有 SSRS 2005，并且在我们的 asp.net 环境中使用 ReportViewer v9。为了正确实现控件的高度（100%），我经历了一大堆调整大小的 javascript 函数和其他技巧。我的理解是控件的 v9 无法将高度渲染为 100%，因为它使用的是 IFRAME。现在我们升级到 SSRS 2008，我正在实施 ReportViewer v10 控件。不幸的是，即使这个版本不再使用 IFRAME，似乎高度问题仍然存在。有没有人正确实现了宽度=100%、高度=100% 和 AsyncRendering=true 的 asp.net ReportViewer v10 控件？我想摆脱以前版本中所有额外的 javascript/hacks，但我不确定我能不能，因为似乎高度问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:24:46.807

就像更新一样，是的 ReportViewer 版本 10，如果页面上还有其他控件，仍然存在高度被搞砸的问题。如果其他人有这个问题，这里是我的脚本，可以让控件的高度正常工作并调整大小：rv1 是我的报表查看器控件，fl 是我们用于报表参数的自定义参数面板。

```
Sys.Application.add_load(function() { $find('rv1').add_propertyChanged(viewerPropertyChanged); });
$(window).resize(resize);

function viewerPropertyChanged(sender, e) {
    if (e.get_propertyName() === 'isLoading') {
        var viewer = $find('rv1');
        if (!viewer.get_isLoading())
            resizeWithOffset();        
    }
}

function resizeWithOffset() {
    resize(11);
}

function resize(offset) {
    if (typeof (offset) == 'object' || offset == 'undefined')
        offset = 0;

    // only apply if filter parameter panel is present
    var parameterHeight = $('#fl').height();
    if (parameterHeight != null) {

        // get height of the report viewer toolbar
        var toolbarHeight = $('#rv1_fixedTable > tbody > tr:nth-child(4)').height();

        // get height of the padding between actual report content and toolbar
        var paddingHeight = $('#rv1_fixedTable').height() - ($('#rv1_fixedTable > tbody > tr:nth-child(5) > td:nth-child(3)').height() + toolbarHeight);

        // set new height.        
        var newHeight = ($(window).height() - (parameterHeight + toolbarHeight + 11)) + offset;
        $('#rv1_fixedTable > tbody > tr:nth-child(5) > td:nth-child(3)').height(newHeight);
        $('#rv1_fixedTable > tbody > tr:nth-child(5) > td:nth-child(3) > div').height(newHeight);
    }
} 
```

# c++ - 如何使用结构参数委托构造函数？

> ID：10854731
> 
> 赞同：0
> 
> 时间：2012-06-01T17:20:02.613
> 
> 标签：c++, constructor, c++11

我的问题是关于新的 C++11 特性委托构造函数。因此，我的班级中有两个相似的 ctor，我想简化它们的实现。它们都有结构作为参数的问题，当我尝试委托它们时，发生编译器错误：

```
error: type ‘MyClass’ is not a direct base of ‘MyClass’ 
```

所以这里是之前：

```
MyClass::MyClass ( const timeval & TV ) :
      Seconds ( TV.tv_sec),
      USeconds ( TV.tv_usec ),
{
}

MyClass::MyClass ( const timespec & TS ) :
        Seconds ( TS.tv_sec),
        USeconds ( TS.tv_nsec * 1000 ),
{
} 
```

后：

```
MyClass::MyClass ( const timeval & TV ) :
      MyClass ( timeval { TV.tv_sec, TV.tv_usec/1000 } )
{
}

MyClass::MyClass ( const timespec & TS ) :
        Seconds ( TS.tv_sec),
        USeconds ( TS.tv_nsec * 1000 ),
{
} 
```

有谁知道我怎样才能正确地从第一个 ctor 中调用第二个 ctor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:34:08.970

除了明显的错误（您试图委托给同一个构造函数）之外，代码是正确的并且应该在 g++4.7 上工作

```
MyClass::MyClass ( const timeval & TV ) :
      MyClass ( timespec { TV.tv_sec, TV.tv_usec/1000 } )
{
}

MyClass::MyClass ( const timespec & TS ) :
        Seconds ( TS.tv_sec),
        USeconds ( TS.tv_nsec * 1000 ),
{
} 
```

这可能是您的编译器/版本的问题。

# jquery - jquery ThemeSwitcher 有 HTTPS 问题

> ID：10854736
> 
> 赞同：2
> 
> 时间：2012-06-01T17:20:21.477
> 
> 标签：jquery, themeroller, jquery-ui-theme

我在我的项目中使用 jquery 主题滚轮，我注意到它正在创建一个 Chrome 警告：

```
The page at https://mysite/ displayed insecure content from http://static.jquery.com/ui/themeroller/images/themeGallery/theme_90_dark_hive.png. 
```

最糟糕的是，它使“绿色横幅”（安全站点）再次变为白色。

所以我一直在研究，我发现这个问题的根源在于`jquery.ui.themeswitcher.js`它有一个带有非 SSL URL 的变量：

```
imgPrefix:"http://static.jquery.com/ui/themeroller/images/themeGallery/theme_90_", 
```

如果我将其更改为“https”，则不会加载图像（实际上，似乎没有启用该协议）。所以问题是：是否有任何启用 HTTPS 的站点可以让我获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:22:55.713

我有类似的错误，所以我从[http://jqueryui.com/themeroller/themeswitchertool/](http://jqueryui.com/themeroller/themeswitchertool/)下载了 js ，将其保存为 jquery.themeswitcher.js 并将所有 http jquery-ui url 替换为 google apis https url。

唯一的变化是在每个链接的 var switcherpane 中：

```
<li><a href=
"http://jqueryui.com/themeroller/css/parseTheme.css.php?....">
<img src=
"http://jqueryui.com/themeroller/images/themeGallery/theme_90_ui_dark.png" alt=
"UI Darkness" title="UI Darkness" /> <span class="themeName">UI
darkness</span></a></li> 
```

我替换为：

```
<li><a href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/ui-lightness/jquery-ui.css">
<img src="content/images/theme_90_ui_light.png" alt="UI Lightness" title=
"UI Lightness" /><span class="themeName">UI lightness</span></a></li> 
```

如果您在文件中搜索，还有一些其他的 html 图像会被进一步引用。

[你可以在这里](https://github.com/harborhoffer/Super-Theme-Switcher)找到所有的图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T22:34:34.233

您可以简单地将 src 链接设置为“https”，它会正常工作。

```
<link rel="stylesheet" href="themes/MyTheme.min.css" />
<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.1/jquery.mobile.structure-1.4.1.min.css" />    
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>    
<script src="https://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:25:20.333

我不确定自定义主题，但微软的 CDN 托管了预构建的主题，即使列出了 http，它们也与 https 兼容。

[http://www.asp.net/ajaxlibrary/CDNjQueryUI1820.ashx](http://www.asp.net/ajaxlibrary/CDNjQueryUI1820.ashx)

# version-control - 如何在 TFS 2010 中为所有团队项目定义全局通用迭代

> ID：10854738
> 
> 赞同：0
> 
> 时间：2012-06-01T17:20:22.700
> 
> 标签：version-control, tfs

**背景**

我正在努力在 TFS 2010 下的单个集合中更新大约 40 个团队项目。每个团队项目将使用相同的相对迭代路径来支持常见的团队查询、报告、仪表板等。

**挑战**

尽管迭代的相对名称是相同的，但它们确实在路径中包含了团队项目，这使得它们在查询和报告等方面有所不同。

我的目标是：

1.  消除为每个团队项目更改每个团队查询、报告和其他相关工件的迭代路径的巨大开销。理想情况下，我会将工件从一个项目拖放到下一个项目，而无需修改。
2.  基于所有团队项目的共同迭代进行报告或查询

**当前定义：**
项目 A/当前开发/迭代 X、项目 Z/当前开发/迭代 X ...

**理想定义：**
当前开发/迭代 X

这将提供一个真正通用的迭代，以满足上述目标。

关于是否以及如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:15:32.887

This would certainly make a useful feature, but currently there's no OOTB support for it. You can use the `In` operator to avoid multiple `And` conditions. Then you can simply copy-paste the entire condition row to other queries.

```
Field           Operator    Value
Iteration Path  In          Project A\Current Development\Iteration X,Project Z\Current Development\Iteration 1 
```

# c# - 计算从日历中选择的两个日期之间的天数（C#）

> ID：10854745
> 
> 赞同：2
> 
> 时间：2012-06-01T17:20:46.303
> 
> 标签：c#, .net, visual-studio-2010, webpage

我正在使用 vs 2010。

下面的代码是我如何在 2 个文本框中输入 2 个日期。我想知道如何计算编号。他们之间的天数。如果可能的话，你能告诉我如何提前从那个数字起飞星期天吗？thnx

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Calendar1.Visible = true;

}
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
    TextBox3.Text = Calendar1.SelectedDate.ToLongDateString();
    Calendar1.Visible = false;
}
protected void LinkButton2_Click(object sender, EventArgs e)
{
    Calendar2.Visible = true;

}
protected void Calendar2_SelectionChanged(object sender, EventArgs e)
{
    TextBox4.Text = Calendar2.SelectedDate.ToLongDateString();
    Calendar2.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:22:40.600

这应该有效。

```
var days = (Calendar1.SelectedDate - Calendar2.SelectedDate).TotalDays; 
```

但是，这并不排除周日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:24:33.437

您可以使用[DateTime.Substract](http://msdn.microsoft.com/en-us/library/8ysw4sby.aspx)进行计算。
使用返回的 TimeSpan 对象计算和删除星期日应该很容易。
**编辑**
Jon 的评论是正确的，并且仅使用 TimeSpan 来获取星期天并不是一件容易的事。下方评论中提供的链接（由 louis 提供）似乎完成了这部分工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:31:00.253

`TimeSpan`通过减去两个`DateTime`值来计算 a 。

以下代码应该可以帮助您入门。

```
 if ( Calendar2.SelectedDate != null && Calendar1.SelectDate != null )
 {
      TimeSpan Value;
      if ( Calendar2.SelectedDate >= Calendar1.SelectedDate )
           Value = (Calendar2.SelectedDate - Calendar1.SelectedDate).TotalDays;
      else
          Value = (Calendar1.SelectedDate - Calendar2.SelectedDate).TotalDays; 
 } 
```

我目前无法访问 Visual Studio，我相信这可以编译，它只是一个快速而肮脏的建议。

> 公共 Nullable SelectedDate { 获取；放; }

# powershell - 如何找到给定 cmdlet 的模块？

> ID：10854746
> 
> 赞同：24
> 
> 时间：2012-06-01T17:20:58.550
> 
> 标签：powershell

如何确定给定 cmdlet 的模块，以便从覆盖 cmdlet 的函数直接调用？

例如，我应该如何找出 Start-Transcript 位于 Microsoft.Powershell.Host 中？

```
Get-Module Start-Transcript 
```

不产生任何东西

* * *

更新下面的答案。

这是输出：

```
PS C:\Windows> Get-Command -type cmdlet start-transcript | fl *

HelpUri             : http://go.microsoft.com/fwlink/?LinkID=113408
DLL                 : C:\Windows\assembly\GAC_MSIL\Microsoft.PowerShell.ConsoleHost\1.0.0.0__31bf3856ad364e35\Microsoft
                      .PowerShell.ConsoleHost.dll
Verb                : Start
Noun                : Transcript
HelpFile            : Microsoft.PowerShell.ConsoleHost.dll-Help.xml
PSSnapIn            : Microsoft.PowerShell.Host
ImplementingType    : Microsoft.PowerShell.Commands.StartTranscriptCommand
Definition          : Start-Transcript [[-Path] <String>] [-Append] [-Force] [-NoClobber] [-Verbose] [-Debug] [-ErrorAc
                      tion <ActionPreference>] [-WarningAction <ActionPreference>] [-ErrorVariable <String>] [-WarningV
                      ariable <String>] [-OutVariable <String>] [-OutBuffer <Int32>] [-WhatIf] [-Confirm]

DefaultParameterSet :
OutputType          : {}
Name                : Start-Transcript
CommandType         : Cmdlet
Visibility          : Public
ModuleName          : Microsoft.PowerShell.Host <------------ HERE IT IS
Module              :
Parameters          : {[Path, System.Management.Automation.ParameterMetadata], [Append, System.Management.Automation.Pa
                      rameterMetadata], [Force, System.Management.Automation.ParameterMetadata], [NoClobber, System.Man
                      agement.Automation.ParameterMetadata]...}
ParameterSets       : {[[-Path] <String>] [-Append] [-Force] [-NoClobber] [-Verbose] [-Debug] [-ErrorAction <ActionPref
                      erence>] [-WarningAction <ActionPreference>] [-ErrorVariable <String>] [-WarningVariable <String>
                      ] [-OutVariable <String>] [-OutBuffer <Int32>] [-WhatIf] [-Confirm]} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T17:44:37.813

利用

```
Get-Command Start-Transcript | fl * 
```

查找有关命令的信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-10T15:12:11.520

PowerShell 中有几个选项。为了将结果缩小到您正在寻找的特定信息 - 可以使用以下方法之一：

```
(Get-Command -Name Start-Transcript).ModuleName 
```

或者

```
Get-Command -Name Start-Transcript | Select-Object -Property ModuleName 
```

或者

```
Get-Command -Name Start-Transcript | Format-List -Property ModuleName 
```

笔记：

当您在 PowerShell 脚本中使用它或开发自定义 PowerShell 模块时，通常认为使用完整的 cmdlet 名称而不是别名（如 fl、ft、select 等）是一种很好的做法。它增加了代码的可读性。

# ssrs-2008 - 批量上传图片到 SSRS

> ID：10854748
> 
> 赞同：2
> 
> 时间：2012-06-01T17:21:10.240
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我们使用优秀的[RSBuild](http://rsbuild.codeplex.com)将报告批量上传到 SQL Server Reporting Services (SSRS)，但我找不到批量上传图像的方法。使用报告管理器一次上传一张图像是愚蠢的。困难在于 RSBuild 使用的 SQL Server Reporting Web 服务不支持图像上传。有没有办法以其他方式将图像批量上传到 SSRS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:21:10.443

您需要先手动上传一张图片，以便读取目录表中插入 ReportServer 数据库的图片行的内容，并在以下脚本中使用 ParentId、PolicyId 和 CreatedById 和 ModifiedById。

当然，这可以进一步抽象成一个应用程序，更棒。

```
BEGIN TRAN
    DECLARE @ReportFolderPath NVARCHAR(MAX)
    DECLARE @ImageFolderPath NVARCHAR(MAX)
    DECLARE @ImageFileName NVARCHAR(MAX)
    DECLARE @ImageFullFileName NVARCHAR(MAX)
    DECLARE @ImageFileExtension NVARCHAR(MAX)
    DECLARE @ImageMime NVARCHAR(MAX)
    DECLARE @ImageFullPath NVARCHAR(MAX)
    DECLARE @ParentId NVARCHAR(MAX)
    DECLARE @PolicyId NVARCHAR(MAX)
    DECLARE @CreatedModifiedId NVARCHAR(MAX)
    DECLARE @SqlToGetImageContent NVARCHAR(MAX)
    DECLARE @ImageContent VARBINARY(MAX)

    SET @ReportFolderPath = '/MyReports/'
    SET @ImageFolderPath = 'C:\Users\jdoe\Desktop\Reports\images\'
    SET @ImageFileName = 'logo'
    SET @ImageFileExtension = 'bmp' 
    SET @ImageFullFileName = @ImageFileName + '.' + @ImageFileExtension
    SET @ImageFullPath = @ImageFolderPath + @ImageFileName  
    SET @ParentId = '0AAFF0D8-0616-4E63-9B1D-EBF99153B443'      
    SET @PolicyId = '8632B07A-EE75-4097-970C-18BE9958F7A2'                                                          
    SET @CreatedModifiedId = 'C6121121-D0E4-4B25-BD4E-177EDA709ECB'
    SET @SqlToGetImageContent = 'SELECT @ImageContent = BulkColumn FROM Openrowset(Bulk '''+ @ImageFolderPath + @ImageFullFileName +''', Single_Blob) AS ImageData'

    IF(@ImageFileExtension = 'jpg')
        BEGIN
            SET @ImageMime = 'image/jpeg'
        END
    ELSE
        BEGIN
            SET @ImageMime = 'image/' + @ImageFileExtension
        END

    EXEC SP_EXECUTESQL 
        @Query  = @SqlToGetImageContent
      , @Params = N'@ImageContent VARBINARY(MAX) OUTPUT'
      , @ImageContent = @ImageContent OUTPUT

    INSERT INTO [ReportServer$DEV2012].[dbo].[Catalog] (ItemID, [Path], Name, ParentID, [Type], Content, [Intermediate], SnapshotDataID,    LinkSourceID,   Property,   [Description],  Hidden, CreatedByID,    CreationDate,   ModifiedByID,   ModifiedDate,   MimeType,   SnapshotLimit,  Parameter,  PolicyID, PolicyRoot, ExecutionFlag, ExecutionTime, SubType, ComponentID)
    VALUES(
            NEWID(),
            @ReportFolderPath + @ImageFullFileName, 
            @ImageFullFileName, 
            @ParentId,  
            3,  
            (SELECT @ImageContent),
            NULL,   
            NULL,   
            NULL,   
            '<Properties />',   
            NULL,   
            0,  
            @CreatedModifiedId, 
            GETDATE(),  
            @CreatedModifiedId,
            GETDATE(),  
            @ImageMime, 
            NULL,   
            NULL,   
            @PolicyId,  
            0,  
            1,  
            NULL,   
            NULL,   
            NULL
        )
COMMIT TRAN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T16:29:41.730

为了在 SSRS 解决方案中加载多个图像，我使用了以下方法。这很简单首先，在报表管理器中创建一个新的图像文件夹，您要在其中链接报表中的外部图像

1.  打开 Visual Studio
2.  导航到文件
3.  选择打开
4.  选择文件
5.  创建一个名为“图像”或其他的新文件夹
6.  将所需的所有图像粘贴到此文件夹中
7.  现在，导航到解决方案资源管理器
8.  选择“报告”并右键单击
9.  选择添加，然后选择“现有项目”
10.  导航到刚刚创建的新文件夹
11.  将底部的文件类型更改为“所有文件”
12.  选择所有需要的图像。全选快捷键是 Ctrl 键加上字母 A
13.  点击“添加”
14.  所有图像都将添加到解决方案资源管理器中的任何报告下方
15.  导航到“调试”菜单并选择解决方案属性，如此处所示 [解决方案属性](https://i.stack.imgur.com/odncW.png)

16.  临时更改 TargetReportFolder 以匹配您在报表管理器中创建的新图像文件夹的名称

17.  在解决方案资源管理器中，右键单击所有图像（不是报告）
18.  选择“部署”

在 Visual Studio 中验证部署是否成功，然后导航到 Report Manager 文件夹并验证图像是否存在！

不要忘记：将 TargetReportFolder 重置为之前的值！

[报表管理器图像文件夹](https://i.stack.imgur.com/aLcld.png)

# algorithm - 对于 Permute-By-Sorting 算法，所有优先级都是唯一的概率是多少？

> ID：10854753
> 
> 赞同：1
> 
> 时间：2012-06-01T17:21:49.327
> 
> 标签：algorithm, probability

我希望有人可以帮助我回答以下问题。谢谢！

这是 Permute-By-Sorting 算法的伪代码：

```
Permute-By-Sorting (A)

    n = A.length

    let P[1..n] be a new array

    for i = 1 to n

        P[i] = Random (1,n^3)

    sort A, using P as sort keys 
```

在上述算法中，数组 P 表示数组 A 中元素的优先级。第 4 行在 1 和 n^3 之间选择一个随机数。

问题是 P 中所有优先级都是唯一的概率是多少？以及如何获得概率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:12:20.250

其他人已经给了你概率计算，但我认为你可能问错了问题。

我假设您询问优先级唯一性的概率的原因，以及首先选择 n^3 的原因是因为您希望它们是唯一的，并且选择相对于 n 的较大范围似乎是实现唯一性的合理方式。

确保值是唯一的要容易得多。只需使用数字 1 .. n 填充优先级数组，然后使用[Fisher-Yates 算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)（又名算法 P，来自计算机编程艺术，第 2 卷，半数字算法，Donald Knuth 编写）对它们进行洗牌。

然后将使用已知的唯一优先级值执行排序。

（还有其他获得随机排列的方法。可以使用阶乘数（或阶乘数系统）生成序列的第 n 个字典排列，从而为 [ 1 .. n!]。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:57:43.427

您正在`n`从中选择数字`1...n^3`并询问它们都是唯一的概率是多少。

有一些`(n^3) P n = (n^3)!/(n^3-n)!`方法可以唯一地选择 n 个数字，也`(n^3)^n`可以选择 n 个总数。

所以数字唯一的概率只是第一个方程除以第二个方程，它给出

```
3！     _
--------------
 (n 3 -n)！n 3n

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:09:54.393

调和已经给出的答案：对于选项 i = 0，...，n - 1，鉴于尚未选择重复项，对于第 i 个值，总共有 n^3 - i 个非重复选择 n^3 . 因此概率是 (1 - i/n^3) 的 i = 0, ..., n - 1 的乘积。

sdcwc 使用联合绑定来将此概率降低 1 - O(1/n)。事实证明，这个估计基本上是正确的。证明草图是 (1 - i/n^3) 是 exp(-i/n^3 + O(i^2/n^6))，所以乘积是 exp(-O(n^2)/ n^3 + O(n^-3))，大于等于 1 - O(n^2)/n^3 + O(n^-3) = 1 - O(1/n)。我相信 math.SE 的优秀人士会很乐意为您“正确”地进行这种推导。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:30:22.763

所以排序部分是无关紧要的

假设“随机”是真正的随机，概率只是

```
 n^3!
----------------
 (n^3-n)!n^(3n) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T18:08:19.547

设 A [ij]为事件：第 i 个和第 j 个元素发生碰撞。显然 P(A [ij] )=1/n ³。

最多有 n ²对，因此至少一次碰撞的概率最多为 1/n。

如果您对确切的事情感兴趣，请参阅 BlueRaja 的答案，但在随机算法中，通常足以给出这种类型的界限。

# android - 在新类中将文本获取到 var 时应用程序崩溃

> ID：10854756
> 
> 赞同：1
> 
> 时间：2012-06-01T17:22:22.330
> 
> 标签：android

我刚刚开始编写我的第一个应用程序。
我有 EditText 字段，我想在其中获取它的内容（文本）...
我创建了一个包含多个字段的新类，其中一个是 EditText 字段内容的目标。
如果我创建一个本地 String var 并写：（当 name 是本地 var。）
name=(order_name.getText().toString());
一切正常。
但是当我尝试使用我创建的包含公共字符串字段的类时：
order.setName(order_name.getText().toString());
我得到一个FC。
我还尝试从值直接插入到字段中，当崩溃时我尝试使用 set 函数，如图所示。
该类首先是使用 Eclipse 新类向导创建的，之后我使用 AndroidManifest.xml 向导重新创建了它。

**日志 ：**

```
06-01 17:06:42.104: E/AndroidRuntime(1190): FATAL EXCEPTION: main<br>
06-01 17:06:42.104: E/AndroidRuntime(1190): java.lang.NullPointerException<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at com.Sagi.MyOrders.new_order_activity$1.onClick(new_order_activity.java:46)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.view.View.performClick(View.java:2408)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.view.View$PerformClick.run(View.java:8816)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.os.Handler.handleCallback(Handler.java:587)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.os.Handler.dispatchMessage(Handler.java:92)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.os.Looper.loop(Looper.java:123)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at android.app.ActivityThread.main(ActivityThread.java:4627)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at java.lang.reflect.Method.invokeNative(Native Method)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at java.lang.reflect.Method.invoke(Method.java:521)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>
06-01 17:06:42.104: E/AndroidRuntime(1190):     at dalvik.system.NativeStart.main(Native Method) 
```

**多谢你们 ！**

代码 ：

```
 public class new_order_activity extends Activity {
    DatabaseHelper DBHelper;
    // LAYOUT VARS
    Button saveButton,clearButton;
    EditText order_name,link,price;
    CheckBox paid,alert;
    DatePicker date;
    // LOCAL VARS
    Order order;
    String name1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_order_layout);
    date = (DatePicker)findViewById(R.id.order_date_field);
    alert = (CheckBox)findViewById(R.id.alert_checkbox);
    paid = (CheckBox)findViewById(R.id.paid_checkbox);
    price = (EditText)findViewById(R.id.price_field);
    order_name = (EditText)findViewById(R.id.order_name_field);
    link = (EditText)findViewById(R.id.link_field);

    saveButton = (Button) findViewById(R.id.save_button);
    clearButton = (Button) findViewById(R.id.clear_button);
    DBHelper=new DatabaseHelper(this);

    saveButton.setOnClickListener(  
        new View.OnClickListener() {
            public void onClick(View view) {
Line46:             **order.setName(order_name.getText().toString());**
                order.link=link.getText().toString();
                order.price=price.getText().toString();
                order.paid=paid.isChecked();
                order.alert=alert.isChecked();
                order.year=date.getYear();
                order.month=date.getMonth();
                order.day=date.getDayOfMonth();
                submitOrder(order);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:45:39.697

当您尝试`setName`在您的`order`变量上运行时，它还没有被实例化，所以它会抛出一个异常，因为它没有一个实际的对象来调用该方法。您需要在 onCreate 方法中实例化它（以任何您希望的方式调用其构造函数），以便使用 Activity 创建它（除非您想在`order`每次单击时创建一个新对象 - 然后在您的 onClickListener 函数中实例化它，但在尝试设置其名称之前请确保它是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:50:32.597

`order`为空，所以它给了 NPE ...你必须先初始化它

```
Order order = new Order();//initialize your class using new as per Order Constructor...
order.setName(order_name.getText().toString()); 
```

# ipad - 获取托管对象与获取特定值

> ID：10854760
> 
> 赞同：1
> 
> 时间：2012-06-01T17:22:29.740
> 
> 标签：ipad, nsfetchrequest

假设我已经创建了一个核心数据实体：

```
NSDate *firstDate
NSDate *secondDate
NSData *image 
```

使用 executeFetchRequest 执行获取时，请求是使用它获取整个图像还是仅获取指向图像的指针？

换句话说：当我不需要直接图像时，如果我获取所有实体或仅使用 firstDate/secondDate 的 NSDictionary，它是否会对性能和内存产生很大影响？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:28:56.990

你可以改变你的 NSFetchRequest 行为。阅读来自 Apple 的[Fetching Managed Objects文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)

# javascript - IE8/9 中的 CSS3 动画

> ID：10854761
> 
> 赞同：9
> 
> 时间：2012-06-01T17:22:36.183
> 
> 标签：javascript, internet-explorer, animation, css

我知道 CSS3 动画在 IE 中不起作用。我只是想知道这个问题是否有 JavaScript 解决方法。

这是我想在 IE 中重新创建的链接：http: [//animation.kashoo.co.uk/](http://animation.kashoo.co.uk/)

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T14:21:04.550

在谷歌快速搜索后，我发现了一个 jQuery 插件，它改变了 jQuery 的标准 $.animate() 函数，以便它尽可能使用 CSS3 过渡：

[$.animate-enhanced](http://playground.benbarnett.net/jquery-animate-enhanced/)

**编辑：**

在我的网站上尝试了上述插件后，该网站崩溃了。我不确定您是否会遇到同样的问题，但这是我的解决方法：

**您将需要[Modernizr.js](http://modernizr.com/)**

基本上，您检查（使用 Modernizr）浏览器是否支持给定的功能，然后决定是否使用 CSS3 或 Javascript 制作动画。

例如：

（假设您正在动画对象向右移动 200 像素）

```
if(Modernizr.csstransitions) {
    // use your appropriate browser prefixes
    yourDomObject.style.transition = 'left 2s';
    yourDomObject.style.left = parseInt(yourDomObject.style.left) + 200 + 'px'

} else {

    var left = parseInt($(yourDomObject).css('left')) + 200 + 'px';
    $(yourDomObject).animate({
        'left' : left
    },2000,'easeOutExpo');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T17:25:45.113

查看 jQuery 的动画函数： [http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:25:22.993

有许多提供动画的 JQuery 插件。这是一个具有类似于您正在寻找的翻转效果的翻转效果。[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

# security - 将信息发布到贝宝 NVP API - 两个站点都需要安全吗？

> ID：10854770
> 
> 赞同：0
> 
> 时间：2012-06-01T17:23:07.250
> 
> 标签：security, api, ssl, paypal

我有一个自助服务终端应用程序，它使用机器上的内置 Web 服务器。我将用户信用卡信息发布到贝宝 API，我想知道如果我没有 SSL 证书并且只发布到安全的贝宝网站，它是否安全？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:10:29.337

就 SSL 而言：是的，如果您直接发布到 PayPal API 端点，那么这很好。

但是，PCI DSS 很棘手，如果您在信息亭本身上运行网络服务器，那么您实际上是在每个信息亭上接受卡数据。因此要求您在所有这些上都符合 PCI 标准。

[您确定使用PayPal Website Payments Pro Hosted Solution](https://www.x.com/developers/paypal/products/website-payments-pro-hosted-solution)之类的东西不会更容易吗？

# ruby-on-rails-3 - 尝试使用 ruby rake 任务上传文件

> ID：10854771
> 
> 赞同：0
> 
> 时间：2012-06-01T17:23:08.040
> 
> 标签：ruby-on-rails-3, file-io, spree, rake-task

所以我在 Ruby on Rails 中使用 Spree 作为我的购物车。Spree 是 1-1-stable 版本，Ruby 是 v1.9.3，Ruby on Rails 是 v3.2.3。

我有一个远程主机，其中包含我想为我的 Spree 购物车下载的图像。这是我用来拉它的代码。其中一些可能没有意义，因为我正在尽我所能让它工作，所以它可以使用一点清洁。

```
# Add image to the product
        vendor_id = plink_and_pull(item, "VendorID")
        image_name = plink_and_pull(item, "ImageName")
        # TODO: add if image exists to this unless
        unless image_name.nil? || vendor_id.nil? || plink_and_pull(item, "ImageFound").to_i == 0 || File.exists?("/public/prod_images/#{vendor_id}/#{image_name.gsub(' ', '%20')}")
            unless Dir.exists? "/public/prod_images/#{vendor_id}"
                Dir.mkdir("/public/prod_images/#{vendor_id}", 777)
            end
            file = File.new("public/prod_images/#{vendor_id}/#{image_name.gsub(' ', '%20')}", 'w+')
            file.binmode

            open(URI.parse("http://login.xolights.com/vendors/#{vendor_id}/large/#{image_name.gsub(' ', '%20')}")) do |data|
                file.write data.read
            end
            img = Spree::Image.create({:attachment => "public/prod_images/#{vendor_id}/#{image_name}",
                                      :viewable => product}, :without_protection => true)
        end 
```

但是我得到的错误是“没有这样的文件或目录 - /public/prod_images/29”，它引用了那里的“Dir.mkdir”行。但是，我手动创建了这个目录来尝试让它工作。在我的异常救援中，我打印了工作目录，这是我机器上应用程序的基本目录。（我在 localhost atm 上运行它。）

我在想也许我需要在我的 routes.rb 文件中做一些事情？但我在 Ruby on Rails 路线上是个新手，我不知道从哪里开始......或者即使这就是这里的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:20:55.220

我对 RubyMine 不是很熟悉。但请放心，这与路线无关。它不是特定于 Rails 的。它是 Ruby（和操作系统）特定的，因为 Dir.mkdir 是标准 Ruby 库的一部分。只需从路径中删除前导 / 并查看它是否有效。（因此，实际路径是 {your Ra​​ils app's root directory}/public/prod_images

# windows-7 - 如何使用 vbscript 添加或更改注册表项的权限？

> ID：10854772
> 
> 赞同：2
> 
> 时间：2012-06-01T17:23:21.233
> 
> 标签：windows-7, scripting, registry

我想使用 vbscript（或我可以在 Windows 7 机器上本地运行的一些脚本语言）并更改注册表项的*权限*。

我看到了 regini，但它很旧，我不知道如何使用它来满足我的需要。具体来说，作为一个例子，我需要添加：

`nt service\BFE`到`HKLM\currentcontrolset\services\bfe\parameters\policy`. 然后我要使用advanced，添加bfe，然后使用set、read、query value、delete等特定权限，但不能完全控制。

如何使用脚本语言以编程方式执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:52:22.037

使用[**regini.exe**](https://technet.microsoft.com/en-us/library/hh875566%28v=ws.11%29.aspx)。

所以我将无法设置用户完全控制，但每个人都完全控制。

有关 regini 脚本中使用的值的详细信息，请参阅以下文章：

*   [如何使用 Regini.exe 设置注册表项的权限](http://support.microsoft.com/kb/237607)

*   [如何：使用脚本从命令行更改注册表权限](http://support.microsoft.com/kb/245031/EN-US)

在这里，您有将使用 regini.exe 及其脚本的 VBScript：

```
' Create a temp file with the script that regini.exe will use
'
set oFSO = CreateObject("Scripting.FileSystemObject")
strFileName = oFSO.GetTempName
set oFile = oFSO.CreateTextFile(strFileName)
oFile.WriteLine "HKEY_LOCAL_MACHINE\Software\Classes\AlejaCMaTypelib [1 5 7 11 17]"
oFile.WriteLine "HKEY_LOCAL_MACHINE\Software\AlejaCMaCo\AlejaCMaApp [1 5 7 11 17]"
oFile.Close

' Change registry permissions with regini.exe
'
set oShell = CreateObject("WScript.Shell")
oShell.Run "regini " & strFileName, 8, true

' Delete temp file
'
oFSO.DeleteFile strFileName

WScript.Echo "Done!" 
```

# asp.net-mvc - LINQ 连接 2 个要搜索的字段

> ID：10854773
> 
> 赞同：0
> 
> 时间：2012-06-01T17:23:29.647
> 
> 标签：asp.net-mvc, vb.net, json, linq

我正在尝试连接 LINQ 中的两个字段，以便我可以使用关键字进行过滤。我在[这里](https://stackoverflow.com/questions/5676040/search-two-columns-in-linq-to-sql)发现了一个我认为是我的答案的问题，但由于某种原因我得到了 0 条记录。这应该为自动完成文本框返回 JSON 结果（当我不连接字段时它可以工作）。

这是我的代码：

```
Function CostCodeList(ByVal term As String) As ActionResult

        Dim results = From c In db.ORG_CHART_V
                      Let Fullname = CStr(c.COSTCTR_CD & " - " & c.BREADCRUMB)
                      Where Fullname.ToUpper.Contains(CStr(term).ToUpper)
                      Order By Fullname
                      Select New With {.label = Fullname, .id = c.ORG_NODE_ID}

        Return Json(results.ToArray, JsonRequestBehavior.AllowGet)
  End Function 
```

我在退货时也遇到了这个错误：

> 未找到类型“DbQuery(Of VB$AnonymousType_3(Of String,Integer))”上的公共成员“ToArray”。

在尝试连接这两个字段之前，我分别成功地搜索了它们。但是当我将它们连接起来时，似乎我尝试的每件事都会给我一个错误和/或零记录。

这是一个确实有效的不同功能：

```
Function RoleList(ByVal term As String) As ActionResult
        Dim list As New ArrayList
        Dim results As IQueryable(Of JOB_ROLE)

        If IsNumeric(term) Then
            results = From c In db.JOB_ROLE
                      Where CStr(c.JBROLE_NO).StartsWith(term)
        Else
            results = From c In db.JOB_ROLE
                      Where c.JOB_ROLE_NAME.ToUpper.Contains(CStr(term).ToUpper)
        End If

        results = results.OrderBy(Function(e) e.JOB_ROLE_NAME)

        For Each item In results
            list.Add(New With {.label = item.JOB_ROLE_NAME, .id = item.JOB_ROLE_ID})
        Next

        Return Json(list.ToArray, JsonRequestBehavior.AllowGet)
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:49:03.083

这是按预期工作的新功能：

```
 Function CostCodeList(ByVal term As String) As ActionResult
        Dim list As New ArrayList

        Dim results = db.ORG_CHART_V.Where(Function(e) (CStr(e.COSTCTR_CD) + " - " + e.BREADCRUMB).Contains(CStr(term).ToUpper)).OrderBy(Function(o) o.COSTCTR_CD)

        For Each item In results
            list.Add(New With {.label = item.COSTCTR_CD & " - " & item.BREADCRUMB, .id = item.ORG_NODE_ID})
        Next

        Return Json(list.ToArray, JsonRequestBehavior.AllowGet)
    End Function 
```

# java - Java 从 ZIP 中间检索内容的最有效方法

> ID：10854775
> 
> 赞同：1
> 
> 时间：2012-06-01T17:23:36.927
> 
> 标签：java, zip

我正在寻找最有效的方法（在速度方面）从 ZIP 文件的中间检索一些文件。

例如，我有 ZIP 文件，其中包括 700 个文件夹（标记为 1 到 700）。每个文件夹等于图片和 mp3 文件。有一个名为 Info 的特殊文件夹，其中包含 XML 文件。问题是，我需要遍历此 ZIP 文件以查找 XML 文件，然后显示来自所需文件夹的图像。我正在使用 ZipFile 方法（因此我正在遍历整个 ZIP 文件，即使我想要文件夹 666，我也需要浏览 ZIP 文件中的 665 个项目）-> 从 ZIP 文件中选择非常慢。

我想问你，如果你遇到过类似的问题，你是怎么解决的？Java中是否有任何方法可以将我的ZIP文件转换为虚拟文件夹以更快地浏览它？是否有任何外部库，在时间方面效率最高？

源代码片段：

```
try {
  FileInputStream fin = new FileInputStream(
      "sdcard/external_sd/mtp_data/poi_data/data.zip");
  ZipInputStream zin = new ZipInputStream(fin);
  ZipEntry ze = null;
  while ((ze = zin.getNextEntry()) != null) {
    // Log.d("ZE", ze.getName());
    if (ze.getName().startsWith("body/665/")) {
      // Log.d("FILE F", "soubor: "+ze.getName());
      if (ze.getName().endsWith(".jpg")
          || ze.getName().endsWith(".JPG")) {
        Log.d("OBR", "picture: " + ze.getName());

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int count;

        while ((count = zin.read(buffer)) != -1) {
          baos.write(buffer, 0, count);
        }
        byte[] bytes = baos.toByteArray();

        bmp = BitmapFactory.decodeByteArray(bytes, 0,
            bytes.length);
        photoField.add(bmp);
        i++;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T17:28:37.350

和方法可用于访问 ZIP 存档中的特定文件`ZipFile.getEntry()`。`ZipFile.getInputStream()`例如：

```
ZipFile file = ...
ZipEntry entry = file.getEntry("folder1/picture.jpg");
InputStream in = file.getInputStream(entry); 
```

# emacs - 消除所有缩进的 Emacs 函数

> ID：10854776
> 
> 赞同：2
> 
> 时间：2012-06-01T17:23:39.490
> 
> 标签：emacs

是否有一个 emacs 函数可以消除区域中的所有缩进（即第一个非空白字符之前的所有空白）？

如果没有，我应该在我的 .emacs 中添加什么代码片段来完成这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T18:03:51.657

```
(defun my-delete-indentation (start end)
  "Delete all leading whitespace within the current region."
  (interactive "*r")
  (replace-regexp "^[[:space:]]+" "" nil start end)) 
```

（注意 Emacs 中有一个`delete-indentation`函数，但它的作用与此完全不同。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T20:38:31.863

You can try `C-u -1000 M-x indent-code-rigidly RET`.

# regex - 应该使用什么正则表达式来避免在 perl 中的文本之前使用符号？

> ID：10854781
> 
> 赞同：0
> 
> 时间：2012-06-01T17:23:58.257
> 
> 标签：regex, perl

我有以下变量。如果变量有“imoport/canada/campingplaces/tobermory”而不是#或任何东西，我只想打印yes。对于这类事情，应该在正则表达式中插入什么。

```
 my $textfile = "# imoport/canada/campingplaces/tobermory
                    imoport/canada/campingplaces/tobermory
                  #imoport/canada/campingplaces/tobermory";
  my $textNeeded= "imoport/canada/campingplaces/tobermory" 
```

这就是我正在使用的

```
 if ($textfile =~ m/$textNeeded/i) {
       print "yes working"

  } 
```

注意：- 我从不同的文本文件中获取数据，因此某些文本文件可能只有“#imoport/canada/campingplaces/tobermory”。我想避免那些

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:43:55.487

尽管问题描述相当模糊，但我想我对你的意思感到困惑。您的意思是您可能有文本被注释掉的行`#`，并且您希望避免匹配这些行。

```
print "yes" if $textfile =~ /^\s*$textNeeded/im; 
```

这将匹配`$textfile`其中包含换行符后跟可选空格后跟您的字符串的任何字符串。该`/m`选项使正则表达式多行，这意味着它`^`与`$`由换行符表示的行结尾匹配更大的字符串。

您可能希望警惕搜索字符串中的正则表达式元字符。例如，如果您的搜索字符串是`foo[bar].txt`，则这些括号将被解释为字符类。在这种情况下，您将使用

```
/^\s*\Q$textNeeded\E/im 
```

反而。这`\Q ... \E`将使里面的文本只匹配文字字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:30:10.963

如果您的目标字符串出现在该行的开头，我认为您需要创建一个 Anchor 来表示您想要匹配。这使用了上克拉符号：

if ($textfile =~ m/ **^** $textNeeded/i) { print "是的工作"

}

如果您的 textNeeded 字符串之前有空格或制表符，则不会报告匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:52:55.190

要简单地返回没有前导哈希的行，如下所示：

```
my $textfile = "# imoport/canada/campingplaces/tobermory
                    imoport/canada/campingplaces/tobermory
                  #imoport/canada/campingplaces/tobermory";

for (split /^/, $textfile) {
  print $_ if(m/^\s*[a-zA-Z].*/);
} 
```

回报：

```
 imoport/canada/campingplaces/tobermory 
```

# string-search - 在字符串中查找不相邻的子序列

> ID：10854782
> 
> 赞同：1
> 
> 时间：2012-06-01T17:24:29.180
> 
> 标签：string-search

假设我在字符串中搜索子序列，其中元素不一定必须相邻，但必须出现在 N 个字符内。所以，

```
search("abc","aaabbbccc",7) => True
search("abc","aabbcc",3) => False 
```

我正在寻找一种有效的数据结构/算法来执行这种比较。我可以想到一些方法，例如搜索内部通配符的所有有效组合，例如

```
search("abc",whatever,4) => "abc","a*bc","ab*c" 
```

并使用任何多字符串搜索算法（可能是[Aho–Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)），但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:13:40.787

我附上了一个 python 代码示例，可以满足您的要求。它遍历要搜索的字符串，如果找到搜索字符串的第一个字母，则会创建一个长度=max_length 的子字符串并将其发送到另一个函数。此函数只是在子字符串中移动，试图按顺序查找所有搜索字符串字母。如果找到它们，则返回 True，否则返回 False。

```
def check_substring(find_me, substr):
    find_index = 0
    for letter in substr:
        if find_me[find_index] == letter:
            find_index +=1
        # if we reach the end of find_me, return true
        if find_index >= len(find_me):
            return True
    return False

def check_string(find_me, look_here, max_len):
    for index in range(len(look_here)):
        if find_me[0] == look_here[index]:
            if check_substring(find_me, look_here[index:index + max_len]):
                return True
    return False

fm = "abc"
lh = "aabbbccceee"
ml = 5

print check_string(fm, lh, ml) 
```

# iphone - iOS 版 Facebook URL 方案 - 发布照片

> ID：10854795
> 
> 赞同：0
> 
> 时间：2012-06-01T17:25:23.777
> 
> 标签：iphone, ios, facebook, photo, facebook-page

有许多 URL 方案可用于 iOS 上的 facebook。

是否可以使用这些 URL 方案之一将照片发布到粉丝页面？

我试图使用`fb://publish/photo/(initWithUID:)/(aid:)/(pid:)`，`fb://upload/(initWithSource:)/profile/(uid:)`但没有任何运气。

我不确定`initWithSource:`.

有没有人在这方面取得任何成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:49:41.850

您可以从这里获得一些想法，然后根据您的要求将此代码合并到您自己的代码中[在粉丝页面上发布照片](https://stackoverflow.com/questions/4259573/posting-photos-to-facebook-fan-page-with-ios-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:04:04.813

您可以使用 ShareKit 框架将图像分享到 Facebook。您需要做的很简单，如下所示。

```
SHKItem *item = [SHKItem image:myImage title:@"Title"];
SHKFacebook *sharer = [[[SHKFacebook alloc] init] autorelease];
[sharer loadItem:item];
[sharer share]; 
```

ShareKit 非常有用且易于使用。

# grails - GRAILS：在单独的 WebLogic 10.3 实例上对 500 个状态代码的处理不一致

> ID：10854796
> 
> 赞同：0
> 
> 时间：2012-06-01T17:25:24.633
> 
> 标签：grails, groovy, weblogic, http-status-codes

我有一个简单的 Grails 应用程序 (1.3.7)，我在其中测试异常并将特定的 HTTP 状态代码返回给客户端。

我禁用了默认设置`"500" (view: '/error')`以`URLMappings`防止 Grails 使用标准`error`视图呈现响应。

我的控制器中有一个简单的闭包，我在捕获异常后重定向到该闭包，并呈现响应......

```
def remoteError = {
   response.status = 500
   render ([__error: "A remote error occurred"] as JSON)
} 
```

在 WebLogic 10.3 的一个实例上，当抛出测试异常时，响应如下...

```
{
  __error: "A remote error occurred"
} 
```

..正是我所期望的。

但是部署到另一个 WebLogic 10.3 实例的完全相同的 WAR 文件会产生标准的 Grails 错误页面，如下所示。由于 WAR 文件没有改变，我试图找出 WebLogic 中的什么设置导致它与其他实例相比表现不同。

![在此处输入图像描述](../Images/012337803e07feea9d7c3d5c9cc7d560.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:46:24.640

原来这个问题与我们的部署 WAR 中缺少插件有关。在 WebLogic 的一个实例上，该插件位于 maven/ivy 缓存中，但在另一个实例中却不在，这就是为什么 WAR 表现不同的原因。

# c# - 如何让我的程序引用另一个文件夹中的程序集？

> ID：10854798
> 
> 赞同：1
> 
> 时间：2012-06-01T17:25:39.287
> 
> 标签：c#, visual-studio-2010, dll, reference

**背景**
首先，我确实在别处寻找解决方案并找到了[这个解决方案](https://stackoverflow.com/questions/2009047/load-a-dll-reference-from-a-different-folder)，但这并没有解决我的问题。

我在 Visual Studio 的主项目中引用了一个程序集，但我需要**从我的项目外部加载它，而不是在子文件夹**中。我可以通过调用加载程序集...

```
System.Reflection.Assembly.LoadFrom(myExternalAssemblyPath); 
```

...但程序将无法运行并给我以下错误：

> FileNotFoundException 未处理
> 
> 无法加载文件或程序集“MyAssembly，Version=2.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

在调用程序集之前我没有调用程序集来加载它，但是程序仍然希望，甚至在它`Main`显然进入函数之前，DLL 位于程序的文件夹中。

**问题：**
如何让我的程序在 Visual Studio 中仍然引用它，但在实际运行程序时从不同的位置加载它？我需要在某处指定一个指令来告诉程序等待加载它吗？还有其他解决方案吗？

注意：我不想将文件夹和 DLL 添加到 PATH 变量中。这不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:33:26.890

诀窍是在您的应用程序域上实现`AssemblyResolve`事件。

[http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)

在这里，您可以帮助运行时找到它尝试加载但使用默认搜索策略无法找到的程序集。这应该很简单，运行时将为每个缺少的程序集调用您的处理程序，您只需要自己从自定义路径加载它并从处理程序返回。

需要记住的重要一点：在 .NET 中，JIT 在调用方法之前将其完全处理（到本机代码中）。如果您的 Main 方法使用您尝试加载的程序集中的**任何**类型或方法，则它不会执行 Main。因此，Main 应该**只**设置程序集加载。所有其他代码（尤其是与相关程序集相关的代码）**必须**移动到另一个方法，因此它会单独进行 JIT-ted。

# grails - Grails，存储应用程序自己的设置（单例域类？）

> ID：10854800
> 
> 赞同：2
> 
> 时间：2012-06-01T17:25:47.270
> 
> 标签：grails, configuration, grails-orm

我正在使用[Grails](http://grails.org/)开发一个应用程序，并且我想将一些应用程序范围的配置设置存储在某个地方。我想到的唯一方法是创建一个存储配置值的域类，并使用查询该域类的服务。我看到的问题是该域类应该只有一个实例，但我还没有找到任何可以强制执行该限制的方法。

可能还有其他最佳实践来存储我可能不知道的应用程序自己的配置，欢迎所有建议。

编辑：这些设置应该可以在应用程序中进行配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T17:30:37.570

有一个特别的地方：`/grails-app/conf/Config.groovy`。您可以在那里添加值，例如：

```
my.own.x=1 
```

并通过以下方式读取值：

```
def x = grailsApplication.config.my.own.x 
```

有关详细信息，请参阅文档：http: [//grails.org/doc/latest/guide/conf.html#config](http://grails.org/doc/latest/guide/conf.html#config)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T18:12:51.227

有一个插件：[设置](http://grails.org/plugin/settings)。它允许您创建`my.own.x`不同类型（字符串、日期、BigDecimal 和整数）的命名设置，并为您提供基本的 CRUD 页面来管理它们。

您可以从任一 gsp 访问设置：

```
<g:setting valueFor="my.own.x" default="50" encodeAs="HTML"/> 
```

或控制器/服务/域

```
Setting.valueFor("my.own.x", 50) 
```

我在几个项目中使用它并认为它工作得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T07:29:55.163

您可以通过自定义验证器强制执行您的单个域类数据库条目：

```
// No more than one entry in DB
class MasterAccount {
    boolean singleEntry = true
    static constraints = {
         singleEntry nullable: false, validator: { val, obj ->
              if(val && obj.id != getMasterAccount()?.id && MasterAccount.count > 0){
                    return "Master account already exists in database"
              }
         }
    }
    MasterAccount static getMasterAccount(){
         MasterAccount.list()?.first()
    }
} 
```

您可以将其配置和持久性推迟到`Bootstrap.groovy`，这将达到相同的效果`Config.groovy`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T10:53:05.073

如果您使用的是 1.3.*，您可以尝试 grails 动态配置插件 (http://www.grails.org/plugin/dynamic-config)。“此插件使您的应用程序能够在不重新启动应用程序的情况下更改配置属性。在安装插件后首次运行应用程序时，Config.groovy 中的值会保存在数据库中。”

我从未在 grails 2.0.* 项目中使用过它。

# c# - 如果我的类实现了 IDisposable，为什么我需要终结器？

> ID：10854801
> 
> 赞同：2
> 
> 时间：2012-06-01T17:25:55.767
> 
> 标签：c#, .net, c#-3.0

下面的一次性图案呢？

```
using System;
public class MyClass : IDisposable 
{     
    public void Dispose() 
        // Implement IDisposable     
    {
        //just do the cleanup
        GC.SuppressFinalize(this);
    } 

} 
```

## 更新

我的意思是说，如果没有非托管资源，我需要终结器吗？上面的一次性图案还不够好吗？是的，即使用户/开发人员不调用 dispose，GC 不默认调用 dispose 吗？

GC 调用 dispose 和 finalizers 的顺序又如何呢？

请参阅[此问题](https://stackoverflow.com/questions/10854708/standard-dispose-pattern-why-do-we-need-disposing-parameter-in-the-virtual-me)以获取更多详细信息。

换句话说，当我们有终结器时，为什么我们要`Dispose`以 false 作为参数调用？

* * *

从[http://msdn.microsoft.com/en-us/magazine/cc163392.aspx#S2](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx#S2)，看起来总是建议从终结器而不是托管引用中释放非托管资源。

始终建议从 Dispose 方法释放非托管资源。阅读这篇文章时，我仍然没有得到全部要点。

但是如果没有非托管资源，下面的模式应该可以工作。

* * *

根据 msdn.microsoft.com/en-us/magazine/cc163392.aspx#S2，msdn.microsoft.com/en-us/library/fs2xkftw.aspx 建议在终结器中释放本机资源，并使用 dispose( ）。如果显式调用 dispose()，它可以抑制终结器，即如果没有本地资源，我们不需要终结器。

```
using System;
public class MyClass : IDisposable 
{ 
    private bool disposed = false;  
    protected virtual void Dispose(bool suppressFinalize) 
    {    
        if (!disposed)
        {
            //Just do the cleanup
            //and release resources
            disposed = true; 
        }
        if (!suppressFinalize)
        {
            GC.SuppressFinalize(this); 
        }
    }
    public void Dispose() 
        // Implement IDisposable     
    {
        Dispose(true);           
    } 
    ~MyClass() // the finalizer
    {     
        Dispose(false);    
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T17:27:39.580

因为您可能有对非托管资源（例如 Windows 句柄）的*直接*引用，并且即使没有人调用，您也希望释放它们`Dispose`。

不过这种情况非常少见——通常你只有通过其他*托管*类型间接引用非托管资源，如果需要它们，它们将具有终结器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T17:35:48.477

.Net 中的Finalization +`IDisposable`实际上是两个不同的问题，试图用单一的一次性模式来解决。

*   托管资源清理
*   非托管资源清理

非托管资源是不受 CLR 和垃圾收集器控制的项目。文件句柄、从 PInvoke 返回的内存等项目......如果这些资源没有被用户代码显式释放，它们将泄漏并在进程生命周期的剩余时间内存在。他们被释放是至关重要的。

这就是终结器的用武之地。它将在对象被 CLR 收集之前在对象上运行。这不需要消费者遵循一次性模式，因此是确保释放非托管资源以防止泄漏的一个很好的后备方案。

如果您的代码不包含任何直接持有的非托管资源，则没有理由使用终结器。拥有非托管资源的代码有责任拥有终结器。

# php - 如何连接到 routes.php 文件 CAKEPHP 上的插件路由

> ID：10854806
> 
> 赞同：1
> 
> 时间：2012-06-01T17:26:43.833
> 
> 标签：php, cakephp, cakephp-2.2

我有一个名为 Manager 的插件。我想将 /login 上的路由映射到插件上仪表板控制器的索引操作。像这样的东西：

```
Router::connect('/login', array('controller' => 'dashboard', 'action' => 'index', 'plugin => 'manager')); 
```

如何在 Cakephp 2.2 上实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:22:46.300

插件安装完成后`/app/Plugin`，您可以通过 URL 访问它`/plugin_name/controller_name/action`。在您的 Manager 插件示例中，您将在`/manager/dashboard`.

您是否尝试过使用插件语法，例如：

```
Router::connect('/login', 
    array('controller' => 'Manager.dashboard', 'action' => 'index')
); 
```

使用数组`'plugin'`中的键也应该完成这项工作：`$options`

```
Router::connect('/login', 
    array('plugin' => 'manager','controller' => 'dashboard', 'action' => 'index')
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T22:48:50.180

如果使用像“用户插件”这样的插件，请尝试插件的路由文件（routes.php）

# android - Android 9-patch 和 drawable-mdpi

> ID：10854807
> 
> 赞同：0
> 
> 时间：2012-06-01T17:26:49.387
> 
> 标签：android, drawable, nine-patch

我为 Android 创建了一个简单的 9-patch 图像。倒入文件夹drawable-mpdi。一切正常，但上框架丢失了。目前尚不清楚为什么。看截图：

![在此处输入图像描述](../Images/e22202ef8267b3349796e764c1a3b077.png)

这是我的 9 补丁文件：

![在此处输入图像描述](../Images/4276505631c764acd41d25a8953aa45b.png)

[https://dl.dropbox.com/u/30086473/input_login_active2.9.png](https://dl.dropbox.com/u/30086473/input_login_active2.9.png)

我的 XML 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:background="@drawable/login_bg"
        android:orientation="vertical">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/auth_logo"/>
            <EditText
                android:layout_width="273dip"
                android:id="@+id/login"
                android:layout_marginTop="20dip"
                android:layout_height="wrap_content"
                android:background="@drawable/auth_edit_text"
                android:hint="@string/auth_login"/>
            <EditText
                android:layout_width="273dip"
                android:id="@+id/password"
                android:layout_height="wrap_content"
                android:background="@drawable/auth_edit_text_left"
                android:hint="@string/auth_login_left"
                android:layout_marginLeft="17dip"/>
    </LinearLayout>
</LinearLayout> 
```

问题是什么？如何回收9-patch，元素上方有一个蓝框？

有@drawable/auth_edit_text：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/t" />
</selector> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:32:47.133

您的像素边框似乎不正确（可能颠倒了）。试试这个：

![在此处输入图像描述](../Images/e815220119cf80366eb0a8deeadc55e9.png)

使用您的原件，您还将拉伸电话图标，而不仅仅是气泡。此外，您将顶部和底部的内容区域和拉伸区域颠倒了（我在附件中将它们颠倒了）。虽然我不知道这会具体导致您显示的问题，但我会尝试一下，看看会发生什么。

**编辑**：试试这个：

![在此处输入图像描述](../Images/818da958ef9f19d48a0b93fa7eefbeca.png)

**来自评论**的编辑答案：我认为您的问题可能是它正在寻找 ldpi 图像，没有找到一个，然后回退到默认值并缩小它。由于边框只有 1 px，因此在缩小时它会简单地消失。

# pyqt4 - PyQt4.9.1 视图从不调用model.data

> ID：10854808
> 
> 赞同：1
> 
> 时间：2012-06-01T17:27:12.390
> 
> 标签：pyqt4, python-3.2, model-view

我试图弄清楚如何使用 PyQt4.9.1 中的模型和视图，但我遇到了一些问题。

这是重要的代码：

```
class TestModel(QtGui.QStandardItemModel):
    def __init__(self,parent=None):
        QtGui.QStandardItemModel.__init__(self,parent)
        self.initData()
        self.headings = ['name','value','']

    def initData(self):
        self.rows = [['name {0}'.format(i), i] for i in range(20)]

    def data(self, index, value, role):
        print ("foo")
        if not index.isValid():
            return 
        if (role == QtCore.Qt.DisplayRole):
            row = index.row()
            col = index.column()
            if  (col == 3):
                return "BUTTON GOES HERE"
        return self.rows[row][col]

    def headerData(self,section,orientation,role):
        if (role == QtCore.Qt.DisplayRole):
            if (orientation == QtCore.Qt.Horizontal):
                 return self.headings[section]

    def rowCount(self,parent):
        return len(self.rows)

    def columnCount(self,parent):
        return 3

class MainWindow(QtGui.QWidget):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.m = TestModel()
        self.initUi()

    def initUi(self):   
        layout = QtGui.QVBoxLayout()
        widget = QtGui.QTableView()
        widget.setModel(self.m)
        layout.addWidget(widget)
        self.setLayout(layout)
        self.show() 
```

以下是我启动应用程序的 MainWindow 时发生的情况：没有错误消息，表格的绘制行数和列数以及正确的标题，但表格是空的。您可能会注意到模型的 draw 方法以 print 语句开始。该声明从未达到。有什么我想念的吗？我根本找不到 PyQt4.9.1 的任何教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:14:26.240

`data()`没有任何`value`参数，但删除它并不能解决问题。

每当需要创建`index(row, column, parent)`a 时调用的虚方法总是返回一个无效的索引，除非 a是为请求的索引显式创建的。当索引无效时，视图可能不会尝试显示单元格，因此永远不会被调用。`QModelIndex``QStandardItemModel``QStandardItem``data()`

如果您继续从 继承`QStandardItemModel`，则需要重新实现`index()`以创建有效索引，但由于您使用自己的结构而不是使用来存储数据`QStandardItem`，因此您可以简单地继承自`QtCore.QAbstractTableModel`：

```
class TestModel(QtCore.QAbstractTableModel):
    def __init__(self,parent=None):
        super(TestModel, self).__init__(parent)
        self.initData()
        self.headings = ['name','value','']

    def initData(self):
        self.rows = [['name {0}'.format(i), i] for i in range(20)]

    def data(self, index, role):
        if index.parent().isValid():
            return None             
        if (role == QtCore.Qt.DisplayRole):
            row = index.row()
            col = index.column()
            # 3rd column index is 2 not 3
            if  (col == 2):
                return "BUTTON GOES HERE"
            # that return should also be "inside" the role DisplayRole
            return self.rows[row][col]
        return None

    def headerData(self,section,orientation,role):
        if (role == QtCore.Qt.DisplayRole):
            if (orientation == QtCore.Qt.Horizontal):
                return self.headings[section] 
```

此外，如果您不代表树模型，则只应为顶级项目（没有父项的项目）返回非零行/列数：

```
 def rowCount(self,parent):
        if not parent.isValid():
            return len(self.rows)
        return 0

    def columnCount(self,parent):
        if not parent.isValid():
            return 3
        return 0 
```

# perl - 如何使用 perl Archive::Zip 递归遍历存档文件？

> ID：10854809
> 
> 赞同：3
> 
> 时间：2012-06-01T17:27:20.417
> 
> 标签：perl, archive

我有一个小的 perl 脚本，用于在档案中搜索匹配名称的成员。我想增强这一点，以便如果它在档案中找到任何也是档案（zip、jar 等）的成员，它将递归地扫描这些，寻找原始所需的模式。

我浏览了“Archive::Zip”文档，我想我知道如何做到这一点。我注意到“fh()”和“readFromFileHandle()”方法。但是，在我的测试中，对存档成员的“fh()”调用似乎返回了包含存档的文件句柄，而不是成员。也许我做错了，但我会很感激一个如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:33:44.323

如果不从存档文件中提取，您将无法读取任何类型的存档成员（无论是文本、图片还是其他存档）的内容。

一旦您确定了要查看的成员，您必须调用`extractMember`（或者，更可能的是，`extractMemberWithoutPaths`如果该文件是临时文件）将其解压缩到磁盘文件。然后您可以创建一个新`Archive::Zip`对象和`read`新文件，同时保持旧文件处于打开状态。

`unlink`一旦你对它的内容进行了编目，你可能会想要存档文件。

* * *

**编辑**

我以前没有遇到过这个[`Archive::Zip::MemberRead`](https://metacpan.org/module/Archive%3a%3aZip%3a%3aMemberRead)模块。看来您在正确的轨道上使用`readFromFileHandle`. 我猜它应该像这样工作，但我现在测试它会很尴尬。

```
my $zip = Archive::Zip->new;
$zip->read('myfile.zip');

my $zipfh  = Archive::Zip::MemberRead->new($zip, 'archive/path/to/member.zip');

my $newzip = Archive::Zip->new;
$newzip->readFromFileHandle($zipfh) 
```

# ruby-on-rails - 当我尝试将记录添加到我的数据库时出现错误

> ID：10854813
> 
> 赞同：1
> 
> 时间：2012-06-01T17:27:43.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我正在使用在 Mac OS X Lion 上运行的 Rails 1.9.3。我正在尝试向我的数据库添加一条记录，但出现以下错误：

```
hisham-agil:twitster hisham$ rails console
Loading development environment (Rails 3.2.5)
1.9.3p194 :001 > User.new(name: 'hilarl', email: 'hilaal@gmail.com', password_digest: 'food', password_confirmation: 'food')
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: password_digest
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.5/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.5/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.5/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.5/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.5/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.5/lib/active_record/base.rb:498:in `initialize'
    from (irb):1:in `new'
    from (irb):1
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.5/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.5/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.5/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation

end

enter code here 
```

我的数据库架构：

```
ActiveRecord::Schema.define(:version => 20120601171139) do

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
  end

end 
```

我使用默认的 sqlite3 作为数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:34:14.727

批量分配通常意味着将属性传递到创建对象的调用中，作为属性散列的一部分。

尝试这个：

```
@user = User.new(name: 'hilarl', email: 'hilaal@gmail.com')
@user.password_digest = 'food'
@user.save 
```

另见：

```
http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:33:47.147

`password_digest`在您的用户模型中不是 attr_accessible 。

将第一行更改为：

`attr_accessible :email, :name, :password, :password_confirmation, :password_digest`

# python - 不间断睡眠是否是我的 Python 程序非常慢的原因（如果是，我该如何解决这个问题？）？

> ID：10854817
> 
> 赞同：16
> 
> 时间：2012-06-01T17:27:55.107
> 
> 标签：python, linux, performance, sqlite, sleep

我有以下选择语句（使用 sqlite3 和 pysqlite 模块）：

```
self.cursor.execute("SELECT precursor_id FROM MSMS_precursor "+
  "JOIN spectrum ON spectrum_id = spectrum_spectrum_id "+
  "WHERE spectrum_id = spectrum_spectrum_id "+
  "AND ROUND(ion_mz,9) = ? AND ROUND(scan_start_time,4) = ? "+
  "AND msrun_msrun_id = ?", select_inputValues) 
```

在 Python 中运行需要 55 秒。直接在 SQLite 命令行上运行它只需要 15 毫秒。现在，我注意到当它在这一步中时，Python 程序进入不间断的睡眠（`31283 ndeklein 18 0 126m 24m 3192 D 1.0 0.0 2:02.50 python`，顶部输出中的 D ）并且它从 100% CPU 下降到大约 1% CPU。[既然我在此查询期间注意到了这一点，那么在运行我在这里](https://stackoverflow.com/questions/10531898/why-is-the-same-sqlite-query-being-30-times-slower-when-fetching-only-twice-as-m)询问的查询时，我还查看了顶部输出。在此期间，top 还显示它进入了不间断的睡眠，尽管它在 R 和 D 之间来回切换并且仅减慢到 50% 左右（它会根据它是处于 D 还是 R 状态而波动）。

所以现在我*认为*这是减慢我查询速度的原因（如果不间断的睡眠与程序速度无关，请纠正我）。如果这是真的，我如何确保程序不会进入这种状态？

* * *

# 更新1：

使用 Python 的 EXPLAIN QUERY PLAN 返回：

```
(0, 0, 1, u'SCAN TABLE spectrum (~50000 rows)') 
```

使用 sqlite 命令行的 EXPLAIN QUERY PLAN 返回：

```
0|0|1|SCAN TABLE spectrum (~50000 rows)
0|1|0|SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~2 rows) 
```

使用 Python 的解释返回：

```
(0, u'Trace', 0, 0, 0, u'', u'00', None) 
```

使用 sqlite 的解释返回：

```
0|Trace|0|0|0||00|
1|Real|0|1|0|438.718658447|00|
2|Real|0|2|0|692.6345000000001|00|
3|Integer|1|3|0||00|
4|Goto|0|39|0||00|
5|OpenRead|1|33|0|13|00|
6|OpenRead|0|39|0|5|00|
7|OpenRead|2|41|0|keyinfo(1,BINARY)|00|
8|Rewind|1|35|0||00|
9|Column|1|8|5||00|
10|RealAffinity|5|0|0||00|
11|Integer|4|6|0||00|
12|Function|2|5|4|round(2)|02|
13|Ne|2|34|4||6a|
14|Column|1|12|4||00|
15|Ne|3|34|4|collseq(BINARY)|6c|
16|Column|1|0|8||00|
17|IsNull|8|34|0||00|
18|Affinity|8|1|0|d|00|
19|SeekGe|2|34|8|1|00|
20|IdxGE|2|34|8|1|01|
21|IdxRowid|2|7|0||00|
22|Seek|0|7|0||00|
23|Column|1|0|9||00|
24|Column|2|0|10||00|
25|Ne|10|33|9|collseq(BINARY)|6b|
26|Column|0|1|5||00|
27|RealAffinity|5|0|0||00|
28|Integer|9|6|0||00|
29|Function|2|5|11|round(2)|02|
30|Ne|1|33|11||6a|
31|Column|0|0|13||00|
32|ResultRow|13|1|0||00|
33|Next|2|20|0||00|
34|Next|1|9|0||01|
35|Close|1|0|0||00|
36|Close|0|0|0||00|
37|Close|2|0|0||00|
38|Halt|0|0|0||00|
39|Transaction|0|0|0||00|
40|VerifyCookie|0|31|0||00|
41|TableLock|0|33|0|spectrum|00|
42|TableLock|0|39|0|MSMS_precursor|00|
43|Goto|0|5|0||00| 
```

iostat 返回：

```
io-bash-3.2$ iostat
Linux 2.6.18-194.26.1.el5 (ningal.cluster.lifesci.ac.uk)         06/04/2012

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           14.35    0.00    0.30    0.01    0.00   85.34

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               1.16         4.55        17.22    1520566    5752802
sda1              0.00         0.02         0.00       5074         34
sda2              1.16         4.53        17.22    1515184    5752768
sdb               0.00         0.02         0.00       5108          0
dm-0              2.29         3.88        16.70    1297226    5579336
dm-1              0.00         0.00         0.00        928          0
dm-2              0.11         0.65         0.52     216106     173432 
```

* * *

# 更新 2

我将数据库迁移到 MySQL，在这里查询只需要大约 0.001 秒，尽管对于我正在执行的所有其他查询，它实际上比 sqlite 慢（我针对 sqlite 进行了优化，所以这可能会或可能不会令人惊讶）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:15:44.670

正如我在[回答您之前提出的问题时提到的](https://stackoverflow.com/questions/10412604/how-can-i-speed-up-fetching-the-results-after-running-an-sqlite-query)那样，您是否尝试过 sqlite 模块 apsw ？[从网站](http://code.google.com/p/apsw/)：

> APSW 是 SQLite 嵌入式关系数据库引擎的 Python 包装器。与 pysqlite 等其他包装器相比，它专注于作为 SQLite 的最小层，试图将完整的 SQLite API 转换为 Python。该文档有一节介绍了 APSW 和 pysqlite 之间的差异。

我自己尝试过，它似乎确实更好地反映了“真正的”Sqlite（即客户端或 C 库）如何执行 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:45:06.927

SQLite 和 Python 存在性能问题。阅读此线程以获取更多信息。那里有一些建议 - 尝试一下，它可能会起作用 - 例如向连接字段添加索引或使用 pysqlite。

[http://www.mail-archive.com/python-list@python.org/msg253067.html](http://www.mail-archive.com/python-list@python.org/msg253067.html)

# java - 如何在 Restful 服务中捕获或引发 Viewable 对象内的异常

> ID：10854821
> 
> 赞同：2
> 
> 时间：2012-06-01T17:28:14.697
> 
> 标签：java, rest, jersey

给定页面名称作为 PathParam，我希望能够从 restful 服务返回特定的 jsp 页面。部署应用程序后，这些页面将由不同的人添加和删除。

我相信使用[Viewable](http://jersey.java.net/nonav/apidocs/1.1.0-ea/jersey/com/sun/jersey/api/view/Viewable.html)对象是一种不错的方式（我愿意接受更好/正确的方式。）

```
@GET
@Produces(MediaType.TEXT_HTML)
@Path("{page}") 
public Response showJSP(@PathParam("page") String page) {
    Viewable loadPage = null;

    try {
      loadPage = new Viewable("/" + page, null);
    } catch (Exception e) {
        return Response.status(404).build();
    }

  Response ret = Response.ok(loadPage).build();

//    if (ret.getStatus() == 500){
//          ret = Response.status(404).build();
//      }

 return ret;
} 
```

以上是我的*实验*代码，包含我处理错误的尝试。

只要页面名称是有效的 jsp 页面，它就可以正常工作。如果我传入一个无效页面，我会得到

```
500 Internal Server Error

java.io.IOException: The template name, /someWrongFileName, could not be resolved to a fully qualified template name..... 
```

我发现这个错误是在 Viewable 对象内部生成的，因此它不会引发异常，并且响应当然是一个有效页面，因此检查 500 状态不起作用。

我可以破解一些我很确定是错误的事情，例如，我真的不想为生成的页面和正则表达式添加错误文本。

我希望能够检测到页面无效并简单地返回 404。

我是在正确的道路上还是有更好的方法？

如果我在正确的路径上，如何检测错误的页面名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:14:13.207

我试过像你一样捕捉错误，但这似乎很难。我想这个类从来没有打算以这种方式使用。

Viewable 接口允许您使用 JSP 作为一种可视化应用程序资源表示的方法。通常，资源由您序列化为 JSON、XML 或传递给 Viewable 构造函数的 POJO 表示。

据我了解，您在这里尝试做的事情有些不同。您的资源是 JSP 本身，您似乎只想让页面对客户端可用，而不将任何对象传递给 Viewable 构造函数。

HTTP 404 错误意味着找不到资源。在您的情况下（将 JSP 视为资源），当 JSP 的路径不正确时，这正是发生的情况，所以我理解您为什么要使用状态码。

但是，我认为您尝试使用的界面的创建者对此事有不同的看法。他们没有将 JSP 视为资源，而是将其视为代表它们的工具。视图的构建在这里被视为完全不同的事情。服务器内部的事情，应该对客户端隐藏的事情。客户端必须接收包含 HTML 字符串的响应。它如何发生根本不重要。在这种情况下，HTTP 500 是完全可以理解的。

如果您只想使用 GET 请求来获取 JSP 的内容，您可以忽略 Viewable 接口甚至 Jersey 本身。如果您的 web.xml 设置得当，那么这些页面无论如何都应该可以访问。您不必将 JSP 名称传递给带注释的方法。只需使用文档本身的路径即可。自定义 404 也可以在 web.xml 中处理。

假设您有一个名为 MyApp 的项目并部署到该路径`<host>:<port>/MyApp`

其网页目录结构如下。

```
-Web pages
|-META-INF
|-WEB-INF
|-error
|\-error404.jsp
|-package1
||-ResourceClass
||\-page1.jsp
|-pages
||-plainpage1.jsp
|\-plainpage2.jsp
\-index.jsp 
```

现在，让我们假设 web.xml 看起来像这样：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>ServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>ServletAdaptor</servlet-name>
    <url-pattern>/resources/ *</url-pattern>
</servlet-mapping>
<error-page>
    <error-code>404</error-code>
    <location>/err/err404.jsp</location>
</error-page>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

您可以使用 Viewable 界面为您的实际资源显示一个页面。这就是应该如何使用接口的方式。作为**显示资源的 html 表示的一种方式**，而不是**资源本身**。

```
package package1;

@Path("/")
public class ResourceClass {    

@Path("/POJO/{id}")
@GET
public Response tryToGetBadView(@PathParam("id") String id) {
    MyPOJOClass entity = null;
    //fetch your POJO from database/file/whatever          
    return Response.ok().entity(new Viewable("page1",entity)).build();        
}
} 
```

您可以使用以下路径获得适当的视图：

```
<host>:<port>/MyApp/resources/POJO/1 
```

同时**也**能够在没有 Jersey Servlet Container 帮助的情况下获得普通的 JSP。这些文件就在那里，它们不需要任何其他的表示，而不是它们自己。Jersey Servlet 容器的路径指定为

```
<host>:<port>/resources/* 
```

因此，您可以省略容器并从您的 Web Apps 文件夹中访问普通文件。图像、css 和 JSP。像这样：

```
<host>:<port>/MyApp/pages/plainpage1.jsp 
```

和你得到的一样

```
<host>:<port>/MyApp/index.jsp 
```

甚至是您通常用来构造 Viewable 对象的页面（不保证它可以在不传递 POJO 的情况下正常工作）

```
<host>:<port>/MyApp/package1/ResourceClass/page1.jsp 
```

对于这些“静态”文件，每次选择不存在页面的名称时都会收到 404。显示的错误页面将是 web.xml 中指定的页面

我就是这样做的。使用 Jersey 来提供普通的 JSP 似乎有点过头了，而且会带来不必要的复杂性。如果这不是你的意思，我建议重新考虑设计。

请注意，虽然没有使用 Jersey，但仍然可以以您认为 RESTful 的方式访问页面。

如果你真的想坚持你的实验代码，你也可以尝试使用 IO API 访问 Web Pages 文件夹中的目录并手动检查请求的文件是否存在。这会很丑陋，但它可能会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T22:10:37.770

[我在另一篇文章](https://stackoverflow.com/a/5669386/1296150)中找到了我正在寻找的内容，并在下面修改了我的方法。

```
@GET
@Produces("text/html")
@Path("{page}") 
public void showJSP(@Context HttpServletResponse response,
                    @Context HttpServletRequest request,
                    @PathParam("orderId") String orderId) throws ServletException, IOException {
    request.getRequestDispatcher(page + ".jsp").forward(request, response);
} 
```

这给了我我正在寻找的 404，我的所有服务仍然有效。

如果这是执行此操作的“错误”方式，我仍然愿意接受想法，但现在它有效。

# tfs - MSF for Agile v5.0 没有“已解决”状态

> ID：10854827
> 
> 赞同：2
> 
> 时间：2012-06-01T17:28:58.567
> 
> 标签：tfs

我们最近开始使用 TFS，并且正在使用 MSF for Agile v5.0 模板。我创建的任务似乎只有两种状态。活动和关闭。在阅读我发现的文档时......它表明还应该有一个“已解决”状态，以便开发人员完成后他们可以将其标记为已解决，然后一旦任务经过测试，就可以将其标记为已关闭。

有人可以帮助我了解我所缺少的吗？在此过程中是否缺少我的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:42:18.743

您没有使用正确的流程模板，只有**MSF Agile for CMMI Improvement**具有已解决状态，MSF Agile Software Development 仅在 5.0 版中具有 Active 和 Closed 状态。

不过，您在 4.0 版中确实有 Resolved 状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:26:50.550

Assaf Stone 的回答是我提出的部分问题的准确解决方案，但我现在明白我真的“错过”了一些东西。

在花时间使用 TFS 之后，我弄清楚了为什么他们从 Task 中删除了“已解决”状态。任务应该与用户故事相关联，因为用户故事是测试或下一步的位置。任务不需要“已解决”状态。

现在，如果您想为“代码审查”之类的任务添加一个额外的步骤，这将是有效的，但任务本身不需要“已解决”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T06:19:40.497

确实如此，但您可以轻松地从用户故事 WIT 定义中复制工作流。只需使用 witadmin 导出这两个，然后将工作流从用户故事复制到任务。

# jquery - Jquery 不是选择器难度

> ID：10854829
> 
> 赞同：0
> 
> 时间：2012-06-01T17:29:12.083
> 
> 标签：jquery, html, css, jquery-selectors

编辑：好的，为了弄清楚这一点，您使用 not 选择器来过滤特定标签中的属性而不是过滤子元素？

有人可以帮我解决这里是否有某种语法错误，还是我不理解这个概念？

我有列表项，当您单击时，它们会更改正文的字体大小。现在列表项在正文中，因此其字体更改为。我希望这个 UL 保持相同的字体。所以我使用 .not("#ulSize") 如下所示。但这不起作用。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#liSmall").click(function () {
                $('body').not('#ulSize').removeClass('large normal').addClass('small');
            });
            $("#liNormal").click(function () {
                $('body').not('#ulSize').removeClass('large small').addClass('normal');
            });
            $("#liLarge").click(function () {
                $('body').not('#ulSize').removeClass('small normal').addClass('large');
            });
        });
    </script>
    <style type="text/css">
        .large
        {
            font-size: large;
        }

        .normal
        {
            font-size: medium;
        }

        .small
        {
            font-size: small;
        }
    </style>
</head>
<body>
    <ul id="ulSize">
        <li id="liSmall">Small Font</li>
        <li id="liNormal">Normal Font</li>
        <li id="liLarge">Large Font</li>
    </ul>
        Text in here!!!
</body>
</html> 
```

谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:36:51.397

我建议将您的 JS 重构为以下内容：

```
$(function(){
  $('#liSmall, #liNormal, #liLarge').on('click', function(e){
    $('body').removeClass('small medium large');
    switch(this.id){
      case 'liSmall': $('body').addClass('small'); break;
      case 'liMedium': $('body').addClass('medium'); break;
      case 'liLarge': $('body').addClass('large'); break;
    }
  });
}); 
```

然后在列表上硬编码一个字体大小`#ulSize`，让浏览器完成剩下的工作。

```
#ulSize {
    font-size: 16px !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:33:52.770

试试看：

```
<script type="text/javascript">
    $(document).ready(function () {
        var $DefaultULSize = $('#ulSize').css('font-size');

        $("#liSmall").click(function () {
            $('body').removeClass('small normal large').addClass('small');
            $('#ulSize').css('font-size', $DefaultULSize);
        });
        $("#liNormal").click(function () {
            $('body').removeClass('small normal large').addClass('normal');
            $('#ulSize').css('font-size', $DefaultULSize);
        });
        $("#liLarge").click(function () {
            $('body').removeClass('small normal large').addClass('large');
            $('#ulSize').css('font-size', $DefaultULSize);
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:34:37.917

摆脱`.not('#ulSize')`你的 JavaScript 并添加`#ulSize { font-size: medium !important; }`到你的 CSS 中。不要像其他人推荐的那样不必要地膨胀你的 JS，这是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T17:35:34.403

试试这个，[**现场演示**](http://jsfiddle.net/qwSt2/3/)

```
$('body').children().not('#ulSize').removeClass('large normal').addClass('small'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T17:35:55.153

selection.not(filter) 返回选择中匹配过滤器的元素集。

您在这里所做的是过滤没有“ulSize”id 的“body”标签，因此您的 .not() 过滤器是无用的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T17:38:11.403

这应该有效：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#liSmall").click(function () {
                $('body').removeClass('large normal').addClass('small');
            });
            $("#liNormal").click(function () {
                $('body').removeClass('large small').addClass('normal');
            });
            $("#liLarge").click(function () {
                $('body').removeClass('small normal').addClass('large');
            });
        });
    </script>
    <style type="text/css">
        .large
        {
            font-size: large;
        }

        .normal
        {
            font-size: medium;
        }

        .small
        {
            font-size: small;
        }
        #ulSize
        {
        font-size: 16px !important;
        }
    </style>
</head>
<body>
    <ul id="ulSize">
        <li id="liSmall">Small Font</li>
        <li id="liNormal">Normal Font</li>
        <li id="liLarge">Large Font</li>
    </ul>
        Text in here!!!
</body>
</html>​ 
```

工作小提琴[http://jsfiddle.net/cYa9q/](http://jsfiddle.net/cYa9q/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T17:53:53.860

如果你想增加页面的字体大小，为什么要对*每个元素*都这样做？

在 body-tag（或 HTML-tag）上添加/删除类并相应地设置 CSS 会更容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-01T18:23:24.713

这个怎么样。更简单的 Jquery 编码和使用 NOT 选择器？

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#ulSize > li').click(function(event){
        $('body').children(':not(#ulSize > li)').removeClass('small normal large').addClass($(this).attr('id').substr(2).toLowerCase());
    });
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-01T20:24:58.810

好的，你正在做一个教程，所以你想要详细的 jQuery，我明白了。

`.not()`出于同样的原因，您还想做语法。我明白了。

我修饰了这个例子，所以用边框显示什么没有改变。

所以，这样做：

```
var noto = $('#ulSize, #ulSize > li'); // stuff to NOT select/change
noto.css('border', 'solid lime 1px');// stuff that should not change
noto.addClass('normal');// avoid inheriting from the body.

var selecter = $('body').not(noto); // stuff TO change but NOT the noto stuff above.
selecter.css('border', 'solid red 1px');// border around stuff that should change.
// verbose click events for the demo
$("#liSmall").click(function() {
    selecter.removeClass('large normal').addClass('small');
});
$("#liNormal").click(function() {
    selecter.removeClass('large small').addClass('normal');
});
$("#liLarge").click(function() {
    selecter.removeClass('small normal').addClass('large');
}); 
```

为了好玩，给每个 li 他们正在设置的课程：

```
<body>
    <ul id="ulSize"> 
        <li id="liSmall" class='small'>Small Font</li> 
        <li id="liNormal" class='normal'>Normal Font</li> 
        <li id="liLarge" class='large' >Large Font</li> 
    </ul>
    <div id='myclass'>
    Text in here!!! 
    </div>
Text in the body
</body> 
```

然后使用它：

```
var noto = $('#ulSize, #ulSize > li');
var selecter = $('body').not(noto);
$('#liSmall, #liNormal, #liLarge').click(function(e) {
    selecter.removeClass('small normal large').addClass($(this).attr('class'));
}); 
```

# java - JTable 中的 JPanel 中的工具提示不起作用

> ID：10854831
> 
> 赞同：3
> 
> 时间：2012-06-01T17:29:23.217
> 
> 标签：java, swing, jtable, tooltip

我有一个`JTable`. 一列包含 a`JPanel`其中包含`JLabels`一些`ImageIcons`。我创建了一个自定义单元格渲染，除了`JLabel`. 当我将鼠标悬停在其中任何一个上时，`JLabels`我需要显示`Tooltip`那个特定的`JLabel`. 它没有显示`JLabel`.

这里是`CustomRenderer`.

```
private class CustomRenderer extends
            DefaultTableCellRenderer implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {   

            if (value != null && value instanceof List) {

                JPanel iconsPanel = new JPanel(new GridBagLayout());
                List<ImageIcon> iconList = (List<ImageIcon>) value;
                int xPos = 0;
                for (ImageIcon icon : iconList) {
                    JLabel iconLabel = new JLabel(icon);
                    iconLabel.setToolTipText(icon.getDescription());
                    GridBagConstraints gbc = new GridBagConstraints();
                    gbc.gridy = 1;
                    gbc.gridx = xPos++;
                    iconsPanel.add(iconLabel, gbc);
                }
                iconsPanel.setBackground(isSelected ? table
                        .getSelectionBackground() : table.getBackground());
                this.setVerticalAlignment(CENTER);
                return iconsPanel;
            }
            return this;
        }
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T18:17:57.420

问题是您在 CellRenderer 返回的组件的子组件上设置了工具提示。要执行您想要的操作，您应该考虑覆盖`getToolTipText(MouseEvent e)`JTable。从事件中，您可以使用以下方法找到鼠标所在的行和列：

```
java.awt.Point p = e.getPoint();
int rowIndex = rowAtPoint(p);
int colIndex = columnAtPoint(p); 
```

然后，您可以从那里重新准备单元格渲染器，找到位于鼠标位置的组件并最终检索其工具提示。

以下是如何覆盖 JTable getToolTipText 的片段：

```
@Override
public String getToolTipText(MouseEvent event) {
    String tip = null;
    Point p = event.getPoint();

    // Locate the renderer under the event location
    int hitColumnIndex = columnAtPoint(p);
    int hitRowIndex = rowAtPoint(p);

    if (hitColumnIndex != -1 && hitRowIndex != -1) {
        TableCellRenderer renderer = getCellRenderer(hitRowIndex, hitColumnIndex);
        Component component = prepareRenderer(renderer, hitRowIndex, hitColumnIndex);
        Rectangle cellRect = getCellRect(hitRowIndex, hitColumnIndex, false);
        component.setBounds(cellRect);
        component.validate();
        component.doLayout();
        p.translate(-cellRect.x, -cellRect.y);
        Component comp = component.getComponentAt(p);
        if (comp instanceof JComponent) {
            return ((JComponent) comp).getToolTipText();
        }
    }

    // No tip from the renderer get our own tip
    if (tip == null) {
        tip = getToolTipText();
    }

    return tip;
} 
```

# eclipse - Eclipse 修复了许多文件中的相同错误

> ID：10854832
> 
> 赞同：0
> 
> 时间：2012-06-01T17:29:25.547
> 
> 标签：eclipse

我最近在一个eclipse项目中导入了大量的源文件。不幸的是，他们都有错误的包声明。有没有办法修复所有文件中的错误（每个文件 1 个错误）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:31:29.347

在编辑器上下文菜单中尝试 Source / Refactor / Rename（或类似的东西，我现在没有它）。

# python - 为什么 << export PYTHONPATH=$PYTHONPATH >> 将当前工作目录放在 sys.path 上？

> ID：10854837
> 
> 赞同：1
> 
> 时间：2012-06-01T17:29:44.883
> 
> 标签：python

将该行放在 .bashrc（Mac 上的 .profile）中，工作目录在路径上。放开它，它不是。

```
export PYTHONPATH=$PYTHONPATH 
```

我注意到带有该行的 shell 在其 env 输出中有一个 PYTHONPATH= 行，而那些没有的则没有，所以也许这很重要。如果 PYTHONPATH 有一些有效目录但以 ':' 字符开头，Python 也会添加当前工作目录。（只需将 PYTHONPATH 设置为某个有效目录就会破坏工作目录的包含。）

为什么会这样？确保当前工作目录位于 sys.path 上的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:31:31.503

如果要确保它，则显式添加`.`到 pythonpath：

```
export PYTHONPATH=.:$OTHER_DIRS:$PYTHONPATH 
```

如果您还想在您的当前工​​作目录中`sys.path`设置`PYTHONPATH`其他内容，那么您可以尝试在您的[`sitecustomize.py`或`usercustomize.py`](http://docs.python.org/library/site.html)通过插入以下内容进行设置：

```
sys.path.append(os.getcwd()) 
```

* * *

附加说明：

由于引入了[每个用户的站点包](http://www.python.org/dev/peps/pep-0370/)，因此最好将您的用户包放在那里（您可以使用 获取文件夹名称`site.USER_SITE`）。pip 还可以使用该`--user`选项轻松安装软件包，所以我发现至少对我来说很少有必要搞乱`PYTHONPATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T18:25:22.407

根据文档，（这应该可以消除您的疑虑）

> PYTHONPATH 是一个环境。VARIABLE 增加了模块文件的默认搜索路径。格式与shell 的PATH 相同：一个或多个由os.pathsep 分隔的目录路径名（例如Unix 上的冒号或Windows 上的分号）。不存在的目录会被静默忽略。
> 
> 除了普通目录之外，单个 PYTHONPATH 条目可能引用包含纯 Python 模块（源代码或编译形式）的 zipfile。扩展模块不能从 zip 文件中导入。
> 
> 默认搜索路径取决于安装，但通常以 prefix/lib/pythonversion 开头（参见上面的 PYTHONHOME）。它始终附加到 PYTHONPATH。
> 
> 如上文接口选项中所述，将在 PYTHONPATH 前面的搜索路径中插入一个附加目录。搜索路径可以在 Python 程序中作为变量 sys.path 进行操作。

# javascript - 我应该对 jQuery 插件的缩小版本进行版本控制吗？

> ID：10854845
> 
> 赞同：10
> 
> 时间：2012-06-01T17:30:27.240
> 
> 标签：javascript, version-control

假设我编写了一个 jQuery 插件并将其添加到我的存储库（在我的例子中是 Mercurial）。它是一个文件，比如说`jquery.plugin.js`. 我正在使用 BitBucket 来管理这个存储库，它的功能之一是下载页面。因此，我将其添加`jquery.plugin.js`为下载之一。

现在我想提供我的插件的缩小版本，但我不确定最佳实践是什么。我知道它应该在“下载”页面上可用`jquery.plugin.min.js`，但我是否应该在每次更新它以反映未缩小的版本时对其进行版本控制？

我看到的版本控制缩小版本最明显的问题是，每次对未缩小版本进行更改时，我可能会忘记更新它。

那么，我应该对缩小文件进行版本控制吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T20:12:01.080

不，您不需要将生成的最小化版本置于源代码控制之下。

由于 TFS 将本地文件设置为只读的方式，我们在将生成的文件添加到源代码控制 (TFS) 时遇到了问题。在构建过程中生成文件的工具会出现写访问问题（这可能不是其他版本控制系统的问题）。

**但重要**的是，所有：

*   工具
*   脚本
*   源代码
*   资源
*   第三方库

构建、测试和部署产品所需的任何其他内容都应受版本控制。

您应该能够从源代码控制中检出特定版本（通过标签或修订号或等效项）并完全按照当时的状态重新创建软件。即使在“新”机器上。

构建不应依赖于不受源代码控制的任何内容。

**脚本**：构建脚本，无论是 ant、make、MSBuild 命令文件还是您正在使用的任何文件，以及您可能需要的任何部署脚本都需要处于版本控制之下——而不仅仅是在构建机器上。

**工具**：这意味着编译器、最小化器、测试框架——构建、测试和部署脚本工作所需的一切——应该在源代码控制之下。您需要这些工具的确切版本才能重新创建到某个时间点。

《[持续交付](https://rads.stackoverflow.com/amzn/click/com/0321601912)》这本书教会了我这一课——我强烈推荐它。

*虽然我相信这是一个好主意 - 并尽可能坚持下去 - 但有些领域我不是 100% 确定的。例如操作系统、Java JDK 和持续集成工具（我们使用的是 Jenkins）。*

你练习持续集成吗？这是测试您是否已控制上述所有内容的好方法。如果您必须在持续集成机器上进行任何手动安装才能构建软件，那么可能是出了点问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T20:16:53.597

我的简单经验法则：

**这可以在构建过程中自动生成吗？**

1.  如果是，那么它是资源，而不是源文件。不要检查它。
2.  如果不是，那么它是一个源文件。检查它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T18:13:38.330

以下是我自己使用的 Repositories™ 的明智规则：

1.  如果需要将 blob 作为源包的一部分进行分发，以便在源代码树中构建、使用或测试它，则它应该处于版本控制之下。
2.  如果可以根据需要从版本化源重新生成资产，请改为这样做。如果你可以（GNU）制作它，（Ruby）rake 它，或者只是简单地伪造它，不要将它提交到你的存储库。
3.  您可以使用版本化符号链接、维护脚本、子模块、外部定义等来区分差异，但结果通常不令人满意且容易出错。必要时使用它们，并尽可能避免使用它们。

这绝对是您的里程可能会有所不同的情况，但是三个明智的规则对我来说效果很好。

# xml - 数千个文档（pdf 和/或 xml）的可搜索存档的最佳实践

> ID：10854858
> 
> 赞同：45
> 
> 时间：2012-06-01T17:32:06.623
> 
> 标签：xml, pdf, lucene, full-text-search, elasticsearch

重新审视一个停滞不前的项目，并寻求对数千份“旧”文件进行现代化改造并通过网络提供它们的建议。

文档以各种格式存在，有些已过时：（. **doc**、**PageMaker**、硬拷贝 (OCR)、**PDF**等）。资金可用于将文档迁移为“现代”格式，并且许多硬拷贝已经被 OCR 转换为 PDF - 我们最初认为 PDF 将是最终格式，但我们愿意接受建议（XML？） .

一旦所有文档都采用通用格式，我们希望**通过 Web 界面使它们的内容可用和可搜索**。我们希望能够灵活地只返回整个文档中找到“命中”的部分（页面？）（我相信 Lucene/elasticsearch 使这成为可能？！？）如果内容都是 XML，会不会更灵活？如果是这样，如何/在哪里存储 XML？直接在数据库中，还是作为文件系统中的离散文件？文档中嵌入的图像/图表怎么样？

好奇其他人如何处理这个问题。没有“错误”的答案我只是在寻找尽可能多的输入来帮助我们继续。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-06-02T09:45:35.780

总结：我将推荐[ElasticSearch](http://www.elasticsearch.org)，但让我们分解问题并讨论如何实现它：

这有几个部分：

1.  从您的文档中提取文本以使其可索引
2.  将此文本作为全文搜索提供
3.  返回文档的突出显示片段
4.  知道在文档中的哪里可以找到这些片段以允许分页
5.  返回完整的文档

ElasticSearch 可以提供什么：

1.  ElasticSearch（如 Solr）使用[Tika](http://tika.apache.org/)从各种文档[格式中提取文本和元数据](http://tika.apache.org/1.1/formats.html)
2.  很明显，它提供了强大的全文搜索。它可以配置为以适当的语言分析每个文档，使用词干、提高某些领域的相关性（例如标题比内容更重要）、ngram 等，即标准的 Lucene 东西
3.  它可以为每个搜索结果返回[突出显示的片段](http://www.elasticsearch.org/guide/reference/api/search/highlighting.html)
4.  它不知道这些片段出现在您的文档中的什么位置
5.  它可以将原始文档存储为[附件](http://www.elasticsearch.org/guide/reference/mapping/attachment-type.html)，也可以存储并返回提取的文本。但它会返回整个文档，而不是一页。

您可以将整个文档作为附件发送到 ElasticSearch，然后您将获得全文搜索。但症结在于上面的 (4) 和 (5)：知道您在文档中的位置，并返回文档的部分内容。

存储单个页面可能足以满足您的 where-am-I 目的（尽管您同样可以进入段落级别），但您希望它们以一种在搜索结果中返回文档的方式进行分组，即使出现搜索关键字在不同的页面上。

首先是索引部分：将您的文档存储在 ElasticSearch 中：

1.  使用 Tika（或您喜欢的任何东西）从每个文档中提取文本。将其保留为纯文本或 HTML 以保留某些格式。（忘记 XML，不需要它）。
2.  还提取每个文档的元数据：标题、作者、章节、语言、日期等
3.  将原始文档存储在文件系统中，并记录路径以便以后提供
4.  在 ElasticSearch 中，索引一个包含所有元数据的“doc”文档，可能还有章节列表
5.  将每个页面索引为“页面”文档，其中包含：

    *   包含“doc”文档 ID的[父字段](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html)（请参阅下面的“父子关系”）
    *   文本
    *   页码
    *   也许是章节标题或编号
    *   您希望可搜索的任何元数据

现在进行搜索。您如何执行此操作取决于您希望如何呈现结果 - 按页面或按文档分组。

按页面显示结果很容易。此查询返回匹配页面的列表（每个页面都完整返回）以及页面中突出显示的片段列表：

```
curl -XGET 'http://127.0.0.1:9200/my_index/page/_search?pretty=1'  -d '
{
   "query" : {
      "text" : {
         "text" : "interesting keywords"
      }
   },
   "highlight" : {
      "fields" : {
         "text" : {}
      }
   }
}
' 
```

显示按“doc”分组的结果并带有文本中的高亮显示有点棘手。它不能通过单个查询来完成，但是一个小的客户端分组会让你到达那里。一种方法可能是：

第 1 步：执行[top-children-query](http://www.elasticsearch.org/guide/reference/query-dsl/top-children-query.html)以查找其子级（“page”）与查询最匹配的父级（“doc”）：

```
curl -XGET 'http://127.0.0.1:9200/my_index/doc/_search?pretty=1'  -d '
{
   "query" : {
      "top_children" : {
         "query" : {
            "text" : {
               "text" : "interesting keywords"
            }
         },
         "score" : "sum",
         "type" : "page",
         "factor" : "5"
      }
   }
} 
```

第 2 步：从上述查询中收集“doc”ID 并发出新查询以从匹配的“page”文档中获取片段：

```
curl -XGET 'http://127.0.0.1:9200/my_index/page/_search?pretty=1'  -d '
{
   "query" : {
      "filtered" : {
         "query" : {
            "text" : {
               "text" : "interesting keywords"
            }
         },
         "filter" : {
            "terms" : {
               "doc_id" : [ 1,2,3],
            }
         }
      }
   },
   "highlight" : {
      "fields" : {
         "text" : {}
      }
   }
}
' 
```

第 3 步：在您的应用程序中，将上述查询的结果按 doc 分组并显示。

使用第二个查询的搜索结果，您已经拥有可以显示的页面全文。要移至下一页，您只需搜索即可：

```
curl -XGET 'http://127.0.0.1:9200/my_index/page/_search?pretty=1'  -d '
{
   "query" : {
      "constant_score" : {
         "filter" : {
            "and" : [
               {
                  "term" : {
                     "doc_id" : 1
                  }
               },
               {
                  "term" : {
                     "page" : 2
                  }
               }
            ]
         }
      }
   },
   "size" : 1
}
' 
```

或者，给“页面”文档一个由`$doc_id _ $page_num`（例如 123_2）组成的 ID，然后您可以检索该页面：

```
curl -XGET 'http://127.0.0.1:9200/my_index/page/123_2 
```

**亲子关系：**

通常，在 ES（和大多数 NoSQL 解决方案）中，每个文档/对象都是独立的——没有真正的关系。通过在“文档”和“页面”之间建立父子关系，ElasticSearch 确保子文档（即“页面”）存储在与父文档（“文档”）相同的分片上。

这使您能够运行[top-children-query](http://www.elasticsearch.org/guide/reference/query-dsl/top-children-query.html)，它将根据“页面”的内容找到最匹配的“文档”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T18:07:13.830

我已经构建并维护了一个索引和搜索 70k+ PDF 文档的应用程序。我发现必须从 PDF 中提取纯文本，将内容存储在 SQL 中并使用 Lucene 索引 SQL 表。否则，性能很糟糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T18:09:40.577

使用[Sunspot](http://sunspot.github.com/)或[RSolr](https://github.com/mwmitchell/rsolr)或类似的，它处理大多数主要的文档格式。他们使用 Solr/Lucene。

# php - 更改电子邮件脚本以在成功后打开一个 php 页面

> ID：10854859
> 
> 赞同：1
> 
> 时间：2012-06-01T17:32:07.400
> 
> 标签：php, javascript, jquery, email

我正在使用一个电子邮件脚本，它在 div (#errorEmail) 中给我一个成功声明。

相反，我想在成功后执行“inv_fc_mail_success.php”。

我将如何替换这一行：success: function(){$('#errorEmail').html('Email Sent');

```
if (validateEmail(email)&& email!=""){ 
    $.ajax({
      url: "inv_fc_mail.php?email="+email,
      success: function(){
      $('#errorEmail').html('Email Sent');
      setTimeout(function(){$("#FCemail").dialog('close', function()   
      {$('#errorEmail').hide();});}, 3000);

      }
    });
}
else {$('#errorEmail').html('Email Not Valid').show();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:40:00.123

2种可能性：

1.  成功部分内的另一个 ajax 调用
2.  完全跳过 Ajax，只需重定向到您想要的 php 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:41:20.800

要将浏览器重定向到成功页面：

```
window.location = "inv_fc_mail_success.php"; 
```

请注意，`window.`在大多数最新的浏览器中，该引用是不必要的，但保持它与旧浏览器兼容是一种很好的做法。

**[参考](https://developer.mozilla.org/en/DOM/window.location)**

或者更具体地说：

```
success: function(){ window.location = "inv_fc_mail_success.php"; } 
```

# ios - 指定 maven nar 插件编译器和链接器可执行路径

> ID：10854861
> 
> 赞同：2
> 
> 时间：2012-06-01T17:32:15.993
> 
> 标签：ios, maven

我需要指定编译器可执行文件的完整路径以使用 maven-nar 构建。

aol.properties 文件似乎只接受编译器名称的某些预定义值。

我如何告诉 nar 插件我的编译器和链接器可执行文件的确切位置。在这种情况下，我正在尝试从 macosx 编译 ios。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:03:09.380

看起来唯一的方法是将编译器添加到 CppTasks 并在您的构建主机上安装“黑客”版本。这是我将用作起点的版本：http: [//duns.github.com/maven-nar-plugin/cpptasks.html](http://duns.github.com/maven-nar-plugin/cpptasks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:31:14.133

开始努力合并 NAR 分支 [https://github.com/maven-nar/maven-nar-plugin](https://github.com/maven-nar/maven-nar-plugin)

值得在那里提出问题。

对于 Windows 32/64 位，如果想要在不更改环境变量的情况下运行一次 maven 以构建两个平台，则在需要时支持不同的编译器路径。

有一个工作正在进行中，已经使用了一段时间，但还没有真正发表。我只使用Windows，从未在Mac上尝试过。

[https://github.com/GregDomjan/maven-nar-plugin/tree/multi](https://github.com/GregDomjan/maven-nar-plugin/tree/multi)

我的目标是将它与主干合并，但还没有机会加载允许提供路径和其他一些设置所需的匹配 cpptasks 更改。不幸的是，还有一堆其他可能在配置方面不必要的更改。

# excel - Excel - 检查范围内的单元格是否匹配然后替换单元格

> ID：10854863
> 
> 赞同：2
> 
> 时间：2012-06-01T17:32:29.320
> 
> 标签：excel, duplicates, excel-formula

我需要检查单元格`A5`（歌曲名称）、`B5`（专辑）、 （艺术家）是否与分别来自、、`C5`的工作表 2 中的任何文本相同。`A5:A104``B5:B104``C5:C105`

如果是这样，我希望我正在编写此公式的单元格`E5:E104`从工作表 2 更改为相同的值。

这是我做的，它不起作用：

```
=IF(AND(A5='Worksheet 2'!A5:A104,B5='Worksheet 2'!B5:B104,C5='Worksheet 2'!C5:C104),'Worksheet 2'!E5,"") 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:59:09.927

您需要使用数组公式来执行此操作。`Ctrl`您尝试做的几乎是正确的，但除非您通过按+ `Shift`+将其作为数组公式输入，否则它将无法按预期工作`Enter`。试试这个，作为数组公式输入：

```
=IFERROR(INDEX('Worksheet 2'!$E$1:$E$104,MIN(IF(A5='Worksheet 2'!$A$5:$A$104,IF(B5='Worksheet 2'!$B$5:$B$104,IF(C5='Worksheet 2'!$C$5:$C$104,ROW('Worksheet 2'!$E$5:$E$104),2000000),2000000),2000000))),"No match found.") 
```

由于您必须使用可以从数组中返回单个值的函数（`MIN()`在此公式中），因此逻辑变得复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T18:07:27.813

`=IF(ISERROR(MATCH(A5&B5&C5,'Worksheet 2'!A5:A104&'Worksheet 2'!B5:B104&'Worksheet 2'!C5:C104,0)),"",'Worksheet 2'!E5)`
使用 Ctrl+Shift+Enter 作为数组函数输入

# c# - SerialPort.Close() 从 components.Components 中移除串口

> ID：10854864
> 
> 赞同：1
> 
> 时间：2012-06-01T17:32:40.557
> 
> 标签：c#, winforms, serial-port

在 C# 中，我的`System.IO.Ports.SerialPort`Windows 窗体上有一个组件。我的代码中有几个地方像这样循环：

```
foreach (SerialPort in components.Components)
{
    // Do something.
} 
```

`components.Components`但是当我运行 a 时，每个 SerialPort 都会从类中删除`mySerialPort.Close()`，因此所有后续循环都会错过它。这是一个错误吗？还是这是故意的？为什么它会按照设计那样表现？

内部文档说该`Close()`方法仅处理其中的`Stream`对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:40:15.600

这是设计使然。与所有其他 .NET 框架类一样，SerialPort.Close() 方法调用其 Dispose() 方法。继承自其基类 Component。它使用处置模式，调用虚拟的 Dispose(bool) 方法。哪个 SerialPort 覆盖以关闭其流。并调用 Component 用来从集合中删除组件的 base.Dispose(bool) 方法。

否则这是自然行为，可以将 SerialPort 拖放到表单上，以便在表单关闭时自动释放它。在创建窗口时打开端口并保持打开直到关闭也是完全正常的。在程序执行中途关闭端口只会引起麻烦。但在其他方面支持，您只需要自己跟踪对象。

# powerbuilder - 如何在 PowerBuilder 库中使用 PBD

> ID：10854865
> 
> 赞同：0
> 
> 时间：2012-06-01T17:32:46.467
> 
> 标签：powerbuilder

我有一个要在 PowerBuilder 库中使用的 PBD 文件。我不太确定如何做到这一点。我已将 PBD 添加到库列表中，应用程序将运行。但是，当调用该方法时，它会引发错误的运行时函数引用。

我正在使用 PowerBuilder Classic 12.0 Build 5530 并尝试使用 PbniRegex 扩展。

[http://sebastien.kirche.free.fr/powerbuilder/en.html](http://sebastien.kirche.free.fr/powerbuilder/en.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:43:17.567

你把`pbniregex.pbx`与项目的文件对应`.pbd`的？它`.pbx`实际上是一个 dll，`.pbd`它只是一个将其方法声明给 PB 的包装器。

# java - 如何解决生产系统上的内存不足错误

> ID：10854868
> 
> 赞同：1
> 
> 时间：2012-06-01T17:33:07.493
> 
> 标签：java, jvm, out-of-memory, java-5, jboss-4.0.x

我们在 Windows 上使用 JBoss_4_0_4_GA 和 JDK 1.5.0（无更新）

JBoss 服务器在 Wrapper（版本 3.2.3）[http://wrapper.tanukisoftware.org](http://wrapper.tanukisoftware.org)中运行。

由于 JVM 太老了，我什至不能在 JVM 上使用 -XX:+HeapDumpOnOutOfMemoryError 选项。

找出问题的方法是什么？

像往常一样，内存不足异常发生在应用程序的不同部分。

我无权立即升级 JVM。

```
 The current VM settings
    Java Additional Parameters
    wrapper.java.additional.1=-Xms512m
    wrapper.java.additional.2=-Xmx1024m
    wrapper.java.additional.3=-Dsun.rmi.dgc.client.gcInterval=3600000
    wrapper.java.additional.4=-Dsun.rmi.dgc.server.gcInterval=3600000
    wrapper.java.additional.5=-Dorg.xml.sax.driver=org.apache.xerces.parsers.SAXParser
    wrapper.java.additional.6=-Djava.endorsed.dirs=D:/jboss-4.0.4.GA/lib/endorsed 
```

异常片段

> 信息 | 虚拟机 1 | 2012/05/31 11:25:03 | 11:25:03,502 错误 [SOAPFaultExceptionHelper] SOAP 请求异常信息 | 虚拟机 1 | 2012/05/31 11:25:03 | java.rmi.RemoteException: java.lang.OutOfMemoryError: Java 堆空间；嵌套异常是：INFO | 虚拟机 1 | 2012/05/31 11:25:03 | java.util.concurrent.ExecutionException：java.lang.OutOfMemoryError：Java 堆空间
> 
> 信息 | 虚拟机 1 | 2012/05/31 11:25:03 | 引起：java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space INFO | 虚拟机 1 | 2012/05/31 11:25:03 | 在 java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:205) 信息 | 虚拟机 1 | 2012/05/31 11:25:03 | 在 java.util.concurrent.FutureTask.get(FutureTask.java:80)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:10:13.383

您可以尝试使用[jmap](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jmap.html)进行内存转储（在您提到的标签中`java 5`，所以这应该是可能的）。当服务器仍然工作时（例如每隔一小时左右）进行几次转储。

然后在[Eclipse MAT](http://www.eclipse.org/mat/)中分析它们。搜索在每次转储时变大的对象或对象集合。这很可能是您的内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:05:27.957

我看到两个选项，每个选项都有其优点和缺点：

1.  安装探查器代理并在您的应用程序上连接探查器。这当然会产生一些严重的性能影响，这在您的生产环境中可能是不可接受的。但这将允许您监视应用程序并在堆空间几乎已满时执行内存转储。

2.  在其他地方重现您的生产环境，并使用分析器。如果您的问题仅在大负载时出现，您可能必须创建负载测试才能达到 OOME。

使用分析器是查找内存泄漏的最佳机会。

否则，您总是可以尝试使用 PMD 和 Findbugs（以及其他静态分析工具）执行静态代码审查，这可能会发现一些错误。

# android - Android：对于嵌套视图，getX() 和 gety() 相对于什么？

> ID：10854871
> 
> 赞同：3
> 
> 时间：2012-06-01T17:33:32.727
> 
> 标签：android, android-layout, android-view

我有一个带有嵌套视图 V 的自定义布局，如下所示：LinearLayout L1 ---> LinearLayout L2 ---> View V。

我为 V 注册了一个 OnTouchListener。在触摸事件中，我需要获取触摸事件相对于视图 V 边缘的坐标。

event.getX() 和 event.getY() 返回的值相对于什么？我用谷歌搜索并看到相互矛盾的陈述，有人说这些值已经与视图 V 的边缘相关，但其他人说我需要从 event.getX() 和 event.getY() 中减去视图 V 的边缘坐标以获得相对坐标。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T18:15:34.770

来自谷歌的文档

**getX()**方法：

> 此视图的视觉 x 位置，以像素为单位。这相当于translationX 属性加上当前的left 属性。

**setTranslationX()**方法：

> 设置此视图相对于其左侧位置的水平位置。除了对象的布局放置它的任何位置之外，这有效地定位了布局后的对象。

**getLeft()**方法：

> 此视图相对于其父视图的左侧位置。

因此，getX() 返回视图相对于其父视图的水平位置。

**更新：**

因为`event.getX()`你得到的结果也是相对于父母的。您可以通过在水平居中的 RelativeLayout 中放置一个按钮来进行简单的测试，并在单击按钮时检查值

在您的布局 xml 中：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_centerHorizontal="true">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</RelativeLayout> 
```

在您的活动中：

```
 mBtn = ((Button) findViewById( R.id.button1 ));
    mBtn.setOnTouchListener( new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d("", "getX = " + event.getX());
            return false;
        }
    }); 
```

如果单击其左边距的按钮，您将获得接近 0.0 的值。

# html - 输入类型 DateTime - 值格式？

> ID：10854874
> 
> 赞同：56
> 
> 时间：2012-06-01T17:33:46.973
> 
> 标签：html, datetime, html-input

我应该以哪种格式输入日期和时间，以便在带有`datetime`类型的 HTML5 输入元素中使用？

我努力了：

*   `1338575502`
*   `01/06/2012 19:31`
*   `01/06/2012 19:21:00`
*   `2012-06-01`
*   `2012-06-01 19:31`
*   `2012-06-01 19:31:00`

它们似乎都不起作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-01T17:55:02.353

为了`<input type="datetime" value="" ...`

> 表示全局日期和时间的字符串。
> 
> **值**：[RFC 3339] 中定义的有效日期时间，具有以下附加条件：
> 
> • 日期/时间语法中的文字字母 T 和 Z 必须始终为大写
> 
> • 整年产生式被定义为代表大于 0 的数字的四位或更多位
> 
> **例子**：
> 
> 1990-12-31T23:59:60Z
> 
> 1996-12-19T16:39:57-08:00

[http://www.w3.org/TR/html-markup/input.datetime.html#input.datetime.attrs.value](http://www.w3.org/TR/html-markup/input.datetime.html#input.datetime.attrs.value)

**更新：**

> 此功能已过时。尽管它在某些浏览器中可能仍然有效，但不鼓励使用它，因为它可能随时被删除。尽量避免使用它。
> 
> HTML 是用于输入日期和时间（小时、分钟、秒和秒的几分之一）以及时区的控件。此功能已从 WHATWG HTML 中删除，并且不再受浏览器支持。
> 
> 相反，浏览器正在实现（并鼓励开发人员使用） datetime-local 输入类型。

[为什么 HTML5 输入类型 datetime 从已经支持它的浏览器中删除？](https://stackoverflow.com/questions/21263515/why-is-html5-input-type-datetime-removed-from-browsers-already-supporting-it/21291028)

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-08T21:58:25.253

对于它的价值，iOS7 放弃了对`datetime`您需要使用`datetime-local`不**接受时区部分**的支持（这是有道理的）。

不起作用（无论如何iOS）：

```
 <input type="datetime-local" value="2000-01-01T00:00:00+05:00" /> 
```

作品：

```
<input type="datetime-local" value="2000-01-01T00:00:00" /> 
```

PHP 的价值（Windows 安全）：

```
strftime('%Y-%m-%dT%H:%M:%S', strtotime($my_datetime_input)) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-01T17:36:53.807

[本文](http://html5doctor.com/the-time-element/)似乎显示了可接受的有效类型

```
<time>2009-11-13</time>
 <!-- without @datetime content must be a valid date, time, or precise datetime -->
<time datetime="2009-11-13">13<sup>th</sup> November</time>
 <!-- when using @datetime the content can be anything relevant -->
<time datetime="20:00">starting at 8pm</time>
 <!-- time example -->
<time datetime="2009-11-13T20:00+00:00">8pm on my birthday</time>
 <!-- datetime with time-zone example -->
<time datetime="2009-11-13T20:00Z">8pm on my birthday</time>
 <!-- datetime with time-zone “Z” --> 
```

[这个](http://www.aquim.com/web-article-240.html)涵盖了在`<input>`现场使用它：

> `<input type="date" name="d" min="2011-08-01" max="2011-08-15">`这个 HTML5 输入类型“日期”的示例结合属性 min 和 max 显示了我们如何限制用户可以输入的日期。属性 min 和 max 不相互依赖，可以独立使用。
> 
> `<input type="time" name="t" value="12:00">`HTML5 输入类型“时间”允许用户选择以 24 小时格式显示的相应时间。如果我们不包括默认值“12:00”，则时间将设置为用户本地计算机的时间。
> 
> `<input type="week" name="w">`HTML5 输入类型 week 将显示由“W”表示的数字版本以及相应的年份。
> 
> `<input type="month" name="m">`HTML5 输入类型 month 完全符合您的预期。它显示月份。准确地说，它显示月份的数字版本以及年份。
> 
> `<input type="datetime" name="dt">`HTML5 输入类型 Datetime 显示 UTC 日期和时间代码。用户可以以一分钟为增量向前或向后更改时间步长。如果您希望显示用户的本地日期和时间，您将需要使用下一个示例 datetime-local
> 
> `<input type="datetime-local" name="dtl" step="7200">`由于 datetime 每次步进一分钟，您可能希望通过使用属性“step”来更改默认增量。在下面的示例中，我们将通过将属性 step 设置为 7200（60 秒 X 60 分钟 X 2）将其增加两个小时。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-12-08T22:00:07.473

这真是浪费了我一个小时的时间。对于热心的海狸，以下格式对我有用：

```
<input type="datetime-local" name="to" id="to" value="2014-12-08T15:43:00"> 
```

规范让我有点困惑，它说要使用 RFC 3339，但是在我的 PHP 服务器上，当我使用 DATE_RFC3339 格式时，它没有初始化我的 hmtl 输入:( DATE_RFC3339 的 PHP 常量是“Ymd\TH:i:sP “在撰写本文时，您应该摆脱时区信息是有道理的（我们使用的是 datetime-LOCAL，伙计们）。所以对我有用的格式是：

```
"Y-m-d\TH:i:s" 
```

我认为能够在 datepicker 显示日期时设置 datepicker 的值更直观，但我猜它的显示方式因浏览器而异。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-16T09:47:12.927

这适用于设置 INPUT 的值：

```
strftime('%Y-%m-%dT%H:%M:%S', time()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T13:18:20.370

对于那些寻找这个的人来说，那个正确地显示为 HTML5-Tag：

```
<input type="datetime" name="somedatafield" value="2011-12-21T11:33:23Z" /> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-03-02T10:54:01.563

我用momentjs

```
moment(value).format("YYYY-MM-DDTHH:mm:ss") 
```

# visual-c++ - 带有派生类的 Visual C++ (C++/CLI) 前向声明？

> ID：10854878
> 
> 赞同：0
> 
> 时间：2012-06-01T17:33:57.263
> 
> 标签：visual-c++, c++-cli, forward-declaration

好的，所以我在 Visual Studios C++ (C++/CLI) 中的前向声明遇到了麻烦。代码如下：

啊

```
#include "B.h"

#ifdef B_H
#pragma once

public ref class A : public base_class  //base_class is public, memory managed 
{
    B^ b;
}

#endif 
```

溴化氢

```
#define B_H

#pragma once

ref class A;

ref class B 
{
    A^ a;
}

#include "A.h" 
```

#ifdef/#pragma 守卫应该保持 *.h 不被读取两次，并强制 bh 首先被读取，并且从编译器输出中我很确定它们是。（我什至不确定#pragma once 和#include 放置是否需要#ifdef/#define）

但是，编译器抱怨*路径/啊：错误 C2011：“类”类型重新定义。查看文件路径/Bh*

我应该对 A 的前向声明做些什么，因为它是实际类定义中的派生类，还是我在吠叫错误的树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:32:54.203

需要进行两项更改：

1.  在类定义的右大括号后添加分号。
2.  在 Ah 中，将 移动`#pragma once`到文件的第一行。`#ifdef`把这个放在街区里会搞砸的。

另外，请注意，更简单的方法是不让任何一个头文件包含另一个，并在两个文件中使用前向声明：

啊：

```
#pragma once
ref class B;
public ref class A : public base_class  //base_class is public, memory managed 
{
    B^ b;
}; 
```

溴化氢

```
#pragma once
ref class A;
ref class B 
{
    A^ a;
}; 
```

# couchdb - 检索刚刚删除的文档

> ID：10854883
> 
> 赞同：28
> 
> 时间：2012-06-01T17:34:19.833
> 
> 标签：couchdb

我删除了一个文档，但我仍然可以在 中看到它`_changes`，所以我可以看到 last valid `_rev`，它已被删除，所以获取带有 id 的文档，最后一个修订版只返回：

```
{
  "_id":"25efa4ec8489d8b89b34c5cad6000059",
  "_rev":"3-a982bd6dccce8f405433f8453ab86880",
  "_deleted":true
} 
```

并且没有其他属性。

在这种情况下我该如何恢复？以前的修订版中看不到`_changes`。编写空文档（设置`_deleted`为`false`）是否有助于查看所有修订信息？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-01T21:05:50.547

好的，想通了，如果有人感兴趣：

1.  获取已删除的历史记录，例如：

    ```
    curl http://example.iriscouch.com/test/_changes 
    ```

2.  您会看到已删除的文档`$id`和`$rev`，将空文档作为新版本，例如：

    ```
    curl -X PUT http://example.iriscouch.com/test/$id?rev=$rev -H "Content-Type: application/json" -d {} 
    ```

3.  现在您可以获得所有修订信息，例如：

    ```
    curl http://example.iriscouch.com/test/$id?revs_info=true 
    ```

4.  获取删除前的版本，例如：

    ```
    curl http://example.iriscouch.com/test/$id?rev=$prev_rev 
    ```

5.  把它放回couchdb，例如：

    ```
    curl -X PUT http://example.iriscouch.com/test/$id?rev=$rev -H \'Content-Type: application/json\' -d \'$data\' 
    ```

如果您有更好的方法或脚本，请告诉我。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-30T02:40:53.313

刚刚从 couchdb 恢复已删除的数据。这就是我在 couchdb irc 上的好人的一点帮助下解决它的方法。

1) 获取您的数据库名称`$db/$id?revs=true&open_revs=all`在哪里的请求，并且是您删除的文档的 ID。`$db``$id`

2）清理响应。奇怪的是，这个请求的结果不是有效的 json，需要清理。以下对我有用：

var 已删除文档 =`JSON.parse(xhReq.responseText.substring(xhReq.responseText.indexOf("{"), xhReq.responseText.lastIndexOf("}") + 1));`

生成的对象如下所示：

```
 {
       "_id":"37b580b03b903da2b50f88587d89c15d",
       "_rev":"2-bf3a2888dfe1ce0facef18720dcf97e2",
       "_deleted":true,
       "_revisions":{
              "start":2,
              "ids":["bf3a2888dfe1ce0facef18720dcf97e2","85f141069731f6bc77c910b0341e599f"]
             }
     } 
```

3) 现在我们可以构造最后一个修订号，也就是它被删除之前的那个。拉出 _revisions.ids 数组中的第二个 guid 并附加 _revisions.start - 1 和一个“-”字符。这会为您提供文档在被删除之前的修订版本。

```
var preDeleteRevisionNumber = (deletedDoc._revisions.start - 1) + "-"+ deletedDoc._revisions.ids[1]; 
```

4）现在收集原始（预删除数据）并获取`$db/$id?rev=$preDeleteRevisionNumber`

5）要覆盖旧的已删除条目，您必须发布或放回具有正确 id 和最新修订号的文档（不是删除前的修订号，而是文档现在已被删除的修订号）。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-02T08:01:21.317

我找到了一种简单的方法来恢复已删除的文档，只需将以前的（未删除的）修订复制到“自身”。它也适用于附件。

[https://docs.couchdb.org/en/stable/api/document/common.html#copying-from-a-specific-revision](https://docs.couchdb.org/en/stable/api/document/common.html#copying-from-a-specific-revision)

在您找到文档的 id 和 rev 之后（正如 avalez 解释的那样：[https](https://stackoverflow.com/a/10857330/846168) ://stackoverflow.com/a/10857330/846168 ）

无需检索数据并将其放回，只需使用操作 COPY 并将其 $id 作为目标：

```
COPY http://example.iriscouch.com/test/$id?rev=$rev HTTP/1.1
Accept: application/json
Destination: $id 
```

或卷曲：

```
curl -X COPY "http://example.iriscouch.com/test/$id?rev=$rev" -H "Destination: $id" 
```

# objective-c - 游戏中心的玩家属性

> ID：10854889
> 
> 赞同：0
> 
> 时间：2012-06-01T17:35:00.950
> 
> 标签：objective-c, game-center

我会让这个简短而甜蜜：
我正在寻找关于球员属性的建议。
从苹果到玩家属性的官方指南有 4 个属性掩码——但我只需要两个。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:21:08.713

您需要将对象设置`playerAttributes`为`GKMatchRequest`2。然后像这样定义您的角色：

```
#define Role_1 0xFFFF0000
#define Role_2 0x0000FFFF 
```

欲了解更多信息，请访问[Game Kit Programming Guide](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Matchmaking/Matchmaking.html)（我猜你已经去过那里了）。

# ruby - 如何将我的 Rails 应用程序变成静态内容？

> ID：10854899
> 
> 赞同：0
> 
> 时间：2012-06-01T17:36:09.563
> 
> 标签：ruby, ruby-on-rails-3

我的 rails 应用程序每天一次获取一堆 xml 提要，将它们加载到数据库中，然后将它们汇总显示。我想如果我只是将页面输出为静态文件并让它们直接由前端服务器（在我的例子中是 nginx）提供服务，我可以节省服务器内存。我在 IRC 房间询问，并被告知不要使用 rails 并使用 rake 任务创建文件。但是，我想知道最简单的方法是什么。布局，资产文件和内容显然在rails中的不同位置，所以我想我需要结合布局和内容，然后插入css/javascript。

欢迎任何想法/想法。

[解决了]

我最终使用了[来自 rake 任务的 render_to_string](https://stackoverflow.com/questions/2619823/render-to-string-from-a-rake-task)中的示例，并进行了一些调整以在我的 rake 任务中获取以下代码：

```
views_path = Rails.root.to_s + "/app/views"
av = ActionView::Base.new(views_path)
av.class_eval do
  include ApplicationHelper
end

products = Product.all
a = av.render(:template => "products/show", :layout => "layouts/application", :locals => { :@products => products } ) 
```

然后，这会渲染模板和布局，并允许在模板内使用 @products 实例变量，就像使用控制器一样。

然后我只需要将渲染的输出写入文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:51:08.637

对于这样的任务，您可以使用[Rails 的内置缓存机制](http://guides.rubyonrails.org/caching_with_rails.html)。

还有[另一个堆栈溢出帖子](https://stackoverflow.com/questions/2619823/render-to-string-from-a-rake-task)，它显示了一些示例代码，说明如何构建代码以从 rake 任务等手动写入缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:59:11.013

也许可以使用[中间人](http://middlemanapp.com/)或[jekyll ？](http://jekyllrb.com/)

我只使用了中间人，但您可以使用 rake 任务和支持脚本来获取最新的 xml 提要并将其粘贴到中间人数据目录（即`data/feeds.yml`）中，然后使用您现有的布局来呈现该 yaml 文件。Middleman 和 rails 在渲染等方面有很多相似的技术。

您必须稍微修改布局。

如果您愿意，您可能会找到 gem 来用其他东西替换 yaml。

# python - 是什么导致 PIL fromarray 函数中与维度相关的 AttributeError？

> ID：10854903
> 
> 赞同：5
> 
> 时间：2012-06-01T17:36:56.777
> 
> 标签：python, numpy, python-imaging-library, attributeerror

在指示的行中，我从以下 Python3 代码中收到错误消息。x、y 和 z 都是相同的普通 2D numpy 数组，但大小相同，并且应该工作相同。然而它们的行为不同，y 和 z 崩溃，而 x 工作正常。

```
import numpy as np
from PIL import Image

a = np.ones( ( 3,3,3), dtype='uint8' )
x = a[1,:,:]
y = a[:,1,:]
z = a[:,:,1]

imx = Image.fromarray(x)  # ok
imy = Image.fromarray(y)  # error
imz = Image.fromarray(z)  # error 
```

但这有效

```
z1 = 1*z
imz = Image.fromarray(z1)   # ok 
```

错误是：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python3\lib\site-packages\PIL\Image.py", line 1918, in fromarray
    obj = obj.tobytes()
AttributeError: 'numpy.ndarray' object has no attribute 'tobytes' 
```

那么 x, y, z, z1 有什么不同呢？没有什么我能说的。

```
>>> z.dtype
dtype('uint8')
>>> z1.dtype
dtype('uint8')
>>> z.shape
(3, 4)
>>> z1.shape
(3, 4) 
```

我在 Windows 7 Enterprise 机器上使用 Python 3.2.3，一切都是 64 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T18:43:37.090

[我可以在http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)上使用 Python 3.2.3、numpy 1.6.1 和 PIL 1.1.7-for-Python 3 在 ubuntu 12.04 上重现。之所以会出现差异，是因为 x 的 array_interface 没有步幅值，但 y 和 z 有：

```
>>> x.__array_interface__['strides']
>>> y.__array_interface__['strides']
(9, 1)
>>> z.__array_interface__['strides']
(9, 3) 
```

因此这里采用了不同的分支：

```
if strides is not None:
    obj = obj.tobytes() 
```

文档提到`tostring`，而不是`tobytes`：

```
# If obj is not contiguous, then the tostring method is called
# and {@link frombuffer} is used. 
```

PIL 1.1.7 的 Python 2 源代码使用`tostring`：

```
if strides is not None:
    obj = obj.tostring() 
```

所以我怀疑这是在进行 str/bytes 更改的 2 到 3 转换期间引入的错误。只需替换`tobytes()`为`tostring()`in即可`Image.py`：

```
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy as np
>>> from PIL import Image
>>> 
>>> a = np.ones( ( 3,3,3), dtype='uint8' )
>>> x = a[1,:,:]
>>> y = a[:,1,:]
>>> z = a[:,:,1]
>>> 
>>> imx = Image.fromarray(x)  # ok
>>> imy = Image.fromarray(y)  # now no error!
>>> imz = Image.fromarray(z)  # now no error!
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T11:23:48.670

同意帝斯曼。PIL 1.17 我也遇到了同样的问题。

就我而言，我需要传输 ndarray int 图像并保存它。

```
x = np.asarray(img[:, :, 0] * 255., np.uint8)
image = Image.fromarray(x)
image.save("%s.png" % imgname) 
```

我遇到了和你一样的错误。

我随机尝试了其他方法： scipy.msic.imsave 直接保存图像。

```
scipy.msic.imsave(imgname, x) 
```

有用！不要忘记图像名称中的“.png”。

# sql - 删除条目并从唯一键索引中释放

> ID：10854906
> 
> 赞同：0
> 
> 时间：2012-06-01T17:37:12.690
> 
> 标签：sql, sqlite, web-sql, unique-key

对于具有离线存储的项目，我创建了一个数据库，其中包含 id 的主键以及保存日期的唯一字段。

当我删除一个条目时，我无法创建一个与已删除条目具有相同日期的新条目。

删除该条目时，我该怎么做才能从索引中获取日期？

这就是我创建表的方式：

```
CREATE TABLE IF NOT EXISTS userdata (id INTEGER PRIMARY KEY ASC, entrydate DATE UNIQUE, strength, comments 
```

我想知道我是否需要添加一些东西来告诉数据库服务器允许我在它再次空闲时再次使用相同的值。也许我需要运行某种更新，SQLite 更新其内部记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:55:43.900

我认为这里有几种可能性。

1.  您的删除语句在一个[未提交的事务](http://grox.net/doc/sqlite/lang_transaction.html)中。因此，在您尝试插入之前，该唯一值实际上并未从表中删除。

2.  您要删除的值和要插入的新值实际上不是同一个值。运行选择并确保您尝试插入的值实际可用。

3.  您有一个损坏的索引，需要重新[索引它](http://www.sqlite.org/lang_reindex.html)。

# android - Android - 每次意图后都会弹出免责声明

> ID：10854908
> 
> 赞同：0
> 
> 时间：2012-06-01T17:37:20.400
> 
> 标签：android, sharedpreferences

先简单介绍一下我的应用程序。它是一个测验应用程序。它有一个显示问题的主屏幕，该问题会立即加载，箭头`previous`指向`next`其他测验问题。我一遍又一遍地使用相同的布局，只是通过传递不同的问题数据，所以当我点击“下一步”按钮时，它只会`intent`向同一个类启动一个不同的数据。在我的单一布局开始时，我会稍微检查一下用户是否单击以隐藏免责声明。

所以我的免责声明会在应用程序开始时弹出。它有一个`dismiss`按钮和一个`Dont show this again`复选框。我可以让复选框完美地工作，但是当他们按下按钮`SharedPreferences`时会出现问题。`Dismiss`由于我重复使用相同的布局，因此每当用户导航到新问题时，都会弹出免责声明。我只希望它在第一个屏幕上弹出，例如当应用程序加载时。

我尝试设置另一个`SharedPreference` 以在用户点击时隐藏免责声明，`dismiss`但一旦我隐藏它，它就再也不会回来了，因为当用户再次加载应用程序时，仍然设置了共享偏好。我的问题是知道在哪里设置偏好！我尝试重置它，`onPause()`但没有奏效。

所以，我要问的是，如何确定一个活动是否是第一个要加载的活动，所以我只能在那时进行免责声明检查，而不是在随后的每个屏幕中进行检查？

谢谢。

编辑：这是我的`OnCreate()`方法：

```
final static String disclaimerShownPref = "disclaimerShown";
final static String disclaimerShownOnce = "disclaimerShownThisSession";

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
    //Checks to see if the boolean is set
    //The second argument is the default to use if the preference can't be found
    if(!mPrefs.getBoolean(disclaimerShownPref, false))
    {
        if(!mPrefs.getBoolean(disclaimerShownOnce, true))
        {
            new Disclaimer(this);
        }
    }

    topMostLayout=buildHomeScreen();
    setContentView(topMostLayout);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:52:00.817

在您的情况下，我建议在您的活动中使用静态变量：

```
private static boolean sFirstTime = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    if( sFirstTime )
    {
        /*
         * Place the disclaimer check here 
         */
        sFirstTime = false;
    }
    else
    {

    } 
```

话说回来。我会考虑一种更好的方法来在您的活动的同一实例中切换问题，而不是每次都创建一个新问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:32:51.703

与其使用 Intent 启动新版本的活动，不如直接使用 onClickListener 调用 setText() 并更改显示问题？这可能会使 Activity 生命周期更直观，并可能简化您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T18:07:56.053

而不是每次用户在问题之间导航时重新启动活动，您应该只编写一个函数，当单击上一个或下一个时，将使用新的问题数据重新填充视图。至于免责声明，如果您希望每次启动应用程序时都显示它，那么使用共享首选项设置变量并不是最好的方法。应用程序关闭时不会删除共享首选项，只有在您手动删除它们或完全卸载应用程序时才会删除它们。而是在您的活动中创建一个变量来跟踪是否单击了“关闭”。只要应用程序正在运行，对话框就不会显示，但是当应用程序重新启动时，所有变量（包括跟踪显示对话框的变量）都将被重置并再次显示。

# macos - OS X 上的 WriteProcessMemory 等效项

> ID：10854910
> 
> 赞同：4
> 
> 时间：2012-06-01T17:37:48.960
> 
> 标签：macos, delphi, hook, delphi-xe2

我在我的库中使用[方法挂钩/绕行。](https://stackoverflow.com/questions/6905287/how-to-change-the-implementation-detour-of-an-externally-declared-function)

由于 WriteProcessMemory/ReadProcessMemory 是 Windows API 函数，OS X 上的方法挂钩/绕行的解决方案是什么？

编辑：

好的，让我在这里提供更多信息，以便更清楚我为什么要问这个问题：

[在我的DSharp](http://code.google.com/p/delphisorcery/)库中即将推出的功能中，我有以下代码：

```
procedure FreeInstance(Self: TObject);
begin
  ...

  Self.CleanupInstance;
  FreeMem(Pointer(Self));
end;

var
  FreeInstanceBackup: TXRedirCode;

initialization
  ...
  HookCode(@TObject.FreeInstance, @FreeInstance, FreeInstanceBackup);

finalization
  UnhookCode(@TObject.FreeInstance, FreeInstanceBackup);
  ...

end. 
```

事实是，我需要连接到 TObject.FreeInstance 方法以收到每个对象销毁的通知（是的，我知道，如果有人决定覆盖它并且不调用继承，它可能不会被调用）。

另一个使用 WriteProcessMemory 的单元是[ReturnTypePatch.pas](http://code.google.com/p/delphisorcery/source/browse/trunk/Source/Core/ReturnTypePatch.pas)，它修复了[QC #98687](http://qc.embarcadero.com/wc/qcmain.aspx?d=98687)，这对于像我的 Mocking 库和来自 Vincent Parrett 的 Delphi Mocks 是必需的（在我们都意识到这个问题之前，他基本上有一个用户报告了这个问题）。

WriteProcessMemory 的另一个用途是在 DSharp 的 AOP 部分中，我基本上将一个类的 VMT 替换为从 RTTI 的 TVirtualMethodInterceptor 类创建的代理类 VMT。使用 TVirtualMethodInterceptor，您只能代理现有对象 - 我的实现为整个类执行此操作（因此所有现有和未来的对象，即使继承）。

在所有情况下，无法使用 Move 写入内存，因为它们受到保护（在调用 CopyMemory 替换 WriteProcessMemory 时获取 AV）。

希望这是关于我正在使用这些功能做什么的足够信息 - 有人可以为我指出一个适用于 OS X 的解决方案（不幸的是我没有，所以我无法测试任何东西）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T19:13:48.860

与 WriteProcessMemory/ReadProcessMemory 最直接等效的是 Mach 调用 vm_write/vm_read。您需要一个 Mach 任务（您可以通过 task_for_pid 获得）而不是 HPROCESS，当然还有很多小差异。

由于 Apple 已帮助删除了这些函数的联机帮助页，并且没有在任何 Xcode 文档集中记录它们，因此您必须处理稍微过时的非 Apple Mach/MK/Gnu-Mach 文档，即头文件评论（非常好）和/或第三方文章，例如[http://www.uninformed.org/?v=4&a=3](http://www.uninformed.org/?v=4&a=3)和[http://www.phrack.org/issues.html?issue=66&id =16](http://www.phrack.org/issues.html?issue=66&id=16)（您可能仅从 URL 中就可以猜到他们的目标受众是谁）。但这很容易。将“内存作弊工具”从 Windows 移植到 Mac，您将花费更多时间重写 GUI，而不是实现低级的东西。

但这可能不是进行方法挂钩的最佳方式。特别是如果您要挂钩 ObjC 方法，甚至是 C API。更详细地描述你想做什么，我可以提供更好的选择。

# css - eclipse 网页编辑器：div 不在行中

> ID：10854917
> 
> 赞同：2
> 
> 时间：2012-06-01T17:38:28.977
> 
> 标签：css, html, alignment

我正在使用提供所见即所得功能的 Web 工具平台在 Eclipse 中工作。现在我遇到了问题，两个容器没有显示在同一行中。真正奇怪的是，当我将文件导出到桌面并用浏览器打开时，两个容器排成一行，但没有边距。为什么会有两种不同的外观？我的意思是，eclipse插件可能无法正常工作，但最迟当我在浏览器中打开文件时，它应该显示我的代码还是不显示？

这是我想解释的两张图片：

![在此处输入图像描述](../Images/15c1ce9d2bafae259e7776ba79694694.png)

![在此处输入图像描述](../Images/62e0d38b64ea4eaadc808368bd00a23c.png)

这是html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="mainStyle2.css" />
<title>title</title>
</head>
<body>
    <div id="container">
        <div id="header"><b>main title</b></div>

        <div id="navigation" style="float:left">
            <b>Navigation</b> <br /><hr />
            Welcome<br />
            Team<br />
            Links<br />
            Screenshots<br />
        </div>
        <div id="contCont" style="float:left">
            Content
        </div>
    </div>
</body>
</html> 
```

...和css文件：

```
@CHARSET "ISO-8859-1";

#container{         background-color:#00FF59;
                    width:1200px;}

#header{            background-color:#99FF99;
                    text-align:center;
                    font-family:bookman old style;
                    font-size:50px;
                    margin-top:20; margin-bottom:10;
                    margin-left:20; margin-right:20;}

#navigation{        background-color:#99FF99;
                    width:200px; height: 800px;
                    font-family:bookman old style;
                    font-size:20;
                    margin-top:10; margin-bottom:10;
                    margin-left:20; margin-right:20;}

#contCont{          background-color:#99FF99;
                    width:1000px; height: 800px;
                    font-family:bookman old style;} 
```

注意：我已经`float:left`在 "navigation" 和 "contCont" 中对其进行了测试，但没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:43:10.730

尝试为#contCont 添加一些边距，这也有助于创建一个用于反复试验的jsfiddle，通常所见即所得不是开发的最佳想法。您还应该将边距添加到容器的整体宽度中，因此如果导航的宽度为 200px，每边边距为 20px，并且内容 div 为 1000px，则容器的宽度应为 1240px

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:45:54.053

IDE 提供的 WYSIWYG 通常不是很可靠。

不管怎样，试试这个：

```
#navigation{        background-color:#99FF99;
                width:200px; height: 800px;

                font-family:bookman old style;
                font-size:20px;
                margin-top:10px; margin-bottom:10px; float: left;
                margin-left:20px; margin-right:20px;}

#contCont{          background-color:#99FF99;
                width:960px; height: 800px; float:right;
                font-family:bookman old style;} 
```

还将导航和 contCont 包装在另一个 div 中。

另一件需要注意的事情是浏览器有 html 标签的默认样式。您应该重置它们，例如：

```
*{
margin: 0;
padding-left: 0;
padding-right: 0;
padding-top: 0;
padding-bottom: 0;
font-weight: normal;
font-style: normal;
} 
```

我注意到的另一件事是，对于您的利润，您没有指定任何单位？将其固定在顶部的原始代码上。这就是为什么边距不会在真正的浏览器中显示的原因。

同样如前所述，您的容器太小，因为您没有考虑边距。

# android - Android sqlite - 仅将新记录添加到表中

> ID：10854919
> 
> 赞同：2
> 
> 时间：2012-06-01T17:38:36.680
> 
> 标签：android, sqlite

我正在将电话的通话记录收集到表格中。

这很好用：

```
public long populate_Calls(String name, String phone, String type, String duration, String date, String contactid) {
        ContentValues cv = new ContentValues();
             cv.put(KEY_NAME, name);
             cv.put(KEY_PHONE, phone);
             cv.put(KEY_TYPE, type);
             cv.put(KEY_DURATION, duration);
             cv.put(KEY_DATE, date);
             cv.put(KEY_CONTACTID, contactid);

        return ourDatabase.insert(DATABASE_TABLE, null, cv);        
    } 
```

假设该表包含 455 条记录。现在用户进行了一些调用，并刷新了表格。我只想将新的呼叫数据添加到表中。我一直在尝试使用这段代码（虽然我不太明白）但是每次刷新表格时，都会添加越来越多的记录。在模拟器中它工作正常（我只有 12 个拨出电话）。

我想我只需要查看电话号码和日期，因为它可以识别呼叫。如果具有该编号且在该日期的记录已经存在，则只需跳转到下一条记录。如果不存在，请将其添加到表中。正确的？

```
 public void populate_Calls2(String name, String phone, String type, String duration, String date, String contactid) {
 ourDatabase.execSQL("INSERT INTO " + DATABASE_TABLE + " (" + KEY_NAME + "," + KEY_PHONE + "," + KEY_TYPE + "," + KEY_DURATION + "," + KEY_DATE + "," + KEY_CONTACTID + ") SELECT * FROM (SELECT '" + name  + "'," + phone + "," + type + "," + duration + "," + date + "," + contactid + ") WHERE NOT EXISTS (SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_PHONE + " = '" + phone + "' AND " + KEY_DATE + " = '" + date + "') LIMIT 1;");    

    } 
```

我也试过这个，但我明白了

> 准备'INSERT INTO CallTable VALUES(name,phone,type,duration,date,contactid) SELECT * FROM CallTable WHERE NOT EXISTS (SELECT * FROM CallTable WHERE phone = '30411552 ' AND 日期 = '1338569074976') 限制 1;'。

和语法错误：

```
ourDatabase.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES(" + KEY_NAME + "," + KEY_PHONE + "," + KEY_TYPE + "," + KEY_DURATION + "," + KEY_DATE + "," + KEY_CONTACTID + ") SELECT * FROM " + DATABASE_TABLE + " WHERE NOT EXISTS (SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_PHONE + " = '" + phone + "' AND " + KEY_DATE + " = '" + date + "') LIMIT 1;"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T18:25:33.883

如果您在创建表时将其设置为为您执行此操作，则无需检查数据库是否存在重复项。

您的表创建字符串可能如下所示：

```
private static final String CREATE_TABLE = "create table "
        + YOUR_TABLE + " (_id integer primary key autoincrement, "
        + KEY_NAME + " text not null,"
        + KEY_PHONE + " text not null,"
        + KEY_TYPE + " text not null,"
        + KEY_DURATION + " text not null,"
        + KEY_DATE + " text not null,"
        + KEY_CONTACTID + " integer not null,"
        + "UNIQUE(" + KEY_PHONE + "," + KEY_DATE + ") ON CONFLICT IGNORE);"; 
```

设置它，以便如果您的电话和日期组合相同，则记录将导致违反约束，并且该记录的插入/更新将被忽略（您可以将最后一位更改为 ON CONFLICT FAIL 以使它会抛出一个您可以捕获的错误，而不是静默地跳过插入/更新操作）。

无论您使用 insert()、update() 还是 replace()，这都会使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:12:13.190

您还可以创建一个唯一字段，您可以在其中根据包含日期和电话号码保护生成的代码。由于该字段是唯一的，如果代码已经存在则不会添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T18:12:35.560

你也可以试试 updateOrInsert。因此，首先您可以尝试更新数据，如果数据存在，它通常会返回行 ID。如果更新没有返回行 ID，则可以插入数据。 [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

您看到数据的另一种情况可能是因为您在重建应用程序时没有清除应用程序数据。在您的设备上转到设置 -> 应用程序 -> 管理应用程序 -> “您的应用程序”清除数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T18:19:52.420

> 我想我只需要查看电话号码和日期，因为它可以识别呼叫。如果具有该编号且在该日期的记录已经存在，则只需跳转到下一条记录。

要执行“插入或替换”：

1.  `KEY_PHONE`使用字段和为表创建复合主键`KEY_DATE`。

2.  使用您当前使用的`replace (..)`方法`SQLiteDatabase`而不是`insert (...)`您当前使用的方法。因此，您的`populate_Calls`退货声明应如下所示：

    `return ourDatabase.replace(DATABASE_TABLE, null, cv);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T18:07:42.317

**编辑**

我提出的查询不起作用，所以我删除了它！

**更新的答案**

你应该做什么嗯。建议。在你的数据库中创建一个独特的列，你用电话+持续时间+日期之类的东西填充它，然后做

```
"INSERT OR IGNORE INTO " + DATABASE_TABLE + " values(" + THE_VALUES + ");" 
```

插入新值时，旧值将被忽略。

# jquery - 基于单选按钮切换 div

> ID：10854920
> 
> 赞同：0
> 
> 时间：2012-06-01T17:38:36.947
> 
> 标签：jquery, forms, radio-button, jquery-animate

嗨，我只需要解开我的 jQuery。

如果选中单选按钮，我需要在单选按钮之后显示下一个 div。并隐藏其他所有内容。

这是我的html：

```
<div class="radio-perk">
    <input class="perkdrop" id="tab1" type="radio" name="amount" value="250">
    <label for="tab1">10 frames</label>
</div>   // I added this as it seemed to be missing @ManseUK
<div id="tabs-250" class="dropdown">
    <p>2131</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab2" type="radio" name="amount" value="400">
    <label for="tab2">1 sekund, DVD</label>
</div>
<div id="tabs-400" class="dropdown">
    <p>123</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab3" type="radio" name="amount" value="600">
    <label for="tab3">Invitasjon Wrapfest</label>
</div>
<div id="tabs-600" class="dropdown">
    <p>2342</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab4" type="radio" name="amount" value="900">
    <label for="tab4">Invitasjon f&oslash;rpremiere</label>
</div>
<div id="tabs-900" class="dropdown">
    <p>223</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab5" type="radio" name="amount" value="1200">
    <label for="tab5">En dag p&aring; settet</label>
</div>
<div id="tabs-1200" class="dropdown">
    <p>23132</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab6" type="radio" name="amount" value="1600">
    <label for="tab6">To dager p&aring; settet</label>
</div>
<div id="tabs-1600" class="dropdown">
    <p>23123</p>
</div>
<div class="radio-perk">
    <input class="perkdrop" id="tab7" type="radio" name="amount" value="2500">
    <label for="tab7">Assosiate Producer</label>
</div>
<div id="tabs-2500" class="dropdown">
    <p>23312</p>
</div> 
```

到目前为止，这是我的 jQuery：

```
$(".perkdrop").change(function () {
    if ($(this).is(':checked')) {
        $(this).next("div").slideToggle("normal");
    }
}); 
```

这是我的相关CSS：

```
.dropdown {
   display: none;
} 
```

我不明白为什么我可以选择下一个 div 项？我如何让其他一切都关闭？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:44:31.033

尝试如下，

```
$(".perkdrop").change(function() {
    $('.dropdown').slideUp();
    if ($(this).is(':checked')) {
        $(this).parent().next().slideToggle("normal");
    }
}); 
```

另外我认为你搞砸了第一个组 div （结构与其他组不同）。我认为并非如此。

[http://jsfiddle.net/DBexG/2/](http://jsfiddle.net/DBexG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:42:37.333

试试这个

```
 $(".perkdrop").change(function() {
    $('.dropdown').hide();
    if ($(this).is(':checked')) {
        $(this).parent().next(".dropdown").slideToggle("normal");
    }

 });​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/PgEkA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:43:19.753

该`.next()`函数在 DOM 中查找与 jQuery 对象中的其他元素处于同一级别的元素。由于您的单选按钮位于 div 内，因此您实际上想要执行以下操作：

```
$(this).parent().next('div').slideToggle('normal'); 
```

为了关闭所有其他 div，您可以在该行之前使用标准类选择器选择它们，然后选择`.slideUp()`或`.hide()`，具体取决于您是否要为关闭设置动画。完整的东西看起来像这样：

```
$(".perkdrop").change(function() {
    if(this.checked)  {
        $('.dropdown').slideUp();
        $(this).next("div").slideToggle("normal");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:43:37.760

`.next()`只搜索兄弟姐妹...试试这个

```
$(".perkdrop").change(function() {
    $(".dropdown").slideUp('normal');  // slide up all open divs
    if ($(this).is(':checked')) {
        // get parent (div) then next DOM element with class "dropdown"
        $(this).parent().next('.dropdown').slideToggle("normal");
    }
});​ 
```

[工作示例](http://jsfiddle.net/manseuk/nSbmx/)

# javascript - 克隆表单字段由先前字段的值填充

> ID：10854922
> 
> 赞同：0
> 
> 时间：2012-06-01T17:38:51.067
> 
> 标签：javascript, jquery, html, forms

当用户单击添加按钮时，此函数会在 div 中克隆一组文本输入字段：

```
function addRows(label, maxRows, minRows) {
  $('.add-' + label).live('click', function() {
    if ($("." + label + "-group").length < maxRows) {
      $('#' + label + '-template')
        .clone()
        .removeAttr('id')
        .insertAfter($(this).closest('.' + label + '-group'))
        .find('.minus')
        .show();
    }
  });
} 
```

当用户填写一个字段，然后单击添加按钮时，它会显示一个新的字段行，但它们会填充用户在前一行中输入的值。

解决此问题的最佳方法是什么？我想我可以清空该行实例的所有输入文本字段。

我只是不知道如何清除相应的行。

字段名称为：`first_name[], last_name[], phone[]`

因此，当它将这三个字段克隆到新行时，它们将与上面的字段具有相同的名称。

当用户提交时，我将遍历每个值`first_name[], last_name[], phone[]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:42:06.400

试试这个，调用`val()`其他方法，如`appendTo`或`insertAfter`

```
$('#' + label + '-template').clone().val("")... 
```

[http://jsfiddle.net/pnQhh/](http://jsfiddle.net/pnQhh/)

# iphone - 从不同的视图控制器问题访问数组

> ID：10854927
> 
> 赞同：0
> 
> 时间：2012-06-01T17:39:41.643
> 
> 标签：iphone, objective-c, ios, arrays

我正在尝试从自定义子类访问数组`UITableViewCell`。该数组是在我的 tableViewController 中创建的。这真让我抓狂。我一直在访问其他视图控制器的对象`ViewController *vcInstance`。我实际上需要从我的单元格子类编辑数组，但我什至不能`NSLog`从我的单元格视图控制器中编辑它。该数组完美地记录在我的 tableViewController 中。我得到的只是`null`细胞子类。

`CustomCell.h`

```
@property (retain, nonatomic) SongsViewController *vc; 
```

`CustomCell.m`

```
@synthesize vc;

-(IBAction)setStateOfObjects
{
    NSMutableArray *array = [[NSMutableArray alloc] initWithArray:vc.parseTrackArray];
    NSLog(@"%@", array);
} 
```

我也简单地尝试过：`CustomCell.m`

```
-(IBAction)setStateOfObjects
{
    SongsViewController *vc;
    NSLog(@"%@", vc.parseTrackArray);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:47:23.847

保留您的 SongsViewController 似乎是个坏主意。如果您使用的是 iOS 5，那可能会很弱，如果在 iOS 5 之前，请分配。您可能会创建一个保留周期（内存泄漏）。

当您在 SongsViewController 中创建 CustomCell（可能在 tableView:cellForRowAtIndexPath:) 时，您是否设置了它的 vc 属性？

```
[yourCell setVc:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:53:57.533

编辑：您不太了解对象引用的工作原理。当您从数组或其他“保留”它的对象中请求一个对象时，您并没有创建一个新对象。因此，您最终不会得到“以前的对象”和“更新的对象”。考虑一下：

```
NSMutableDictionary *dict = [array objectAtIndex:index];
[dict setObject:@"Hello" forKey:@"Status"];
//You don't need to add *dict back to the array in place of the "old" one
//because you have been only modifying one object in the first place
[array replaceObjectAtIndex:index withObject:dict]; //this doesn't do anything 
```

考虑到...

你这样做的方式是倒退的。在您的 UITableVieCell 子类中为您的数组创建一个属性

```
interface CustomCell : UITableViewCell
@property (nonatomic,retain) NSMutableArray *vcArray;
@end

#import CustomCell.h
@implementation CustomCell
@synthesize vcArray;

-(IBAction)setStateOfObjects { 
    NSMutableDictionary *dictionary = [parseTrackArrayToBeModified objectAtIndex:currentIndex]; 
    [dictionary setObject:[NSNumber numberWithBool:YES] forKey:@"sliderEnabled"]; 

    //THIS LINE IS REDUNDANT
    //[parseTrackArrayToBeModified replaceObjectAtIndex:currentIndex withObject:dictionary]; 
    //END REDUNDANT LINE

 }

//in your ViewController's delegate method to create the cell
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //assume previous code has CustomCell created and stored in variable
    CustomCell *cell;
    cell.vcArray = self.parseTrackArray;
    return cell;
} 
```

# java - 从控制台java读取带有新行的字符串

> ID：10854928
> 
> 赞同：1
> 
> 时间：2012-06-01T17:39:46.493
> 
> 标签：java, stringreader

我想读取这个字符串（从控制台而不是文件），例如：

```
one two three
four five six
seven eight nine 
```

所以我想每行读取它并将每一行放入一个数组中。我该如何阅读它？因为如果我使用扫描仪，我只能读取一行或一个单词（下一行或下一行）。

我的意思是阅读例如：`one two trhee \n four five six \n seven eight nine...`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T17:42:24.530

你应该自己做！还有一个类似的例子：

```
public class ReadString {

   public static void main (String[] args) {

      //  prompt the user to enter their name
      System.out.print("Enter your name: ");

      //  open up standard input
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

      String userName = null;

      //  read the username from the command-line; need to use try/catch with the
      //  readLine() method
      try {
         userName = br.readLine();
      } catch (IOException ioe) {
         System.out.println("IO error trying to read your name!");
         System.exit(1);
      }

      System.out.println("Thanks for the name, " + userName);

   }

}  // end of ReadString class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T18:56:51.417

要回答第一个答案的评论中阐明的问题：

对于要阅读的每一行，您必须调用 Scanner 的 nextLine() 方法一次。这可以通过循环来完成。您将不可避免地遇到的问题是“我怎么知道我的结果数组应该是大的？” 答案是您无法知道您是否没有在输入本身中指定它。您可以修改程序输入规范以要求读取的行数如下：

```
3
One Two Three
Four Five
Six Seven Eight 
```

然后你可以用这个读取输入：

```
Scanner s = new Scanner(System.in);
int numberOfLinesToRead = new Integer(s.nextLine());
String[] result = new String[numberOfLinesToRead];
String line = "";
for(int i = 0; i < numberOfLinesToRead; i++) { // this loop will be run 3 times, as specified in the first line of input
    result[i] = s.nextLine(); // each line of the input will be placed into the array.
} 
```

或者，您可以使用更高级的数据结构，称为[ArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)。ArrayList 在创建时没有设定长度；您可以根据需要简单地向其中添加信息，使其非常适合在您不知道要读取多少输入时读取输入。例如，如果我们使用您的原始示例输入：

```
one two trhee
four five six
seven eight nine 
```

您可以使用以下代码读取输入：

```
Scanner s = new Scanner(System.in);
ArrayList<String> result = new ArrayList<String>();
String line = "";
while((line = s.nextLine()) != null) {
    result.add(line);
} 
```

因此，与其创建一个固定长度的数组，我们可以简单地将每一行添加到 ArrayList 中，因为我们在输入中遇到它。我建议您在尝试使用它们之前阅读更多关于 ArrayLists 的信息。

tl; dr：您为要使用循环读取的每一行调用 next() 或 nextLine() 。

有关循环的更多信息：[Java 循环](http://www.tutorialspoint.com/java/java_loop_control.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-03T17:58:13.440

看看这段代码：

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class SearchInputText {

  public static void main(String[] args) {
    SearchInputText sit = new SearchInputText();
    try {
        System.out.println("test");
        sit.searchFromRecord("input.txt");
        System.out.println("test2");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

private void searchFromRecord(String recordName) throws IOException {
    File file = new File(recordName);
    Scanner scanner = new Scanner(file);
    StringBuilder textFromFile = new StringBuilder();
    while (scanner.hasNext()) {
        textFromFile.append(scanner.next());
    }
    scanner.close();

    // read input from console, compare the strings and print the result
    String word = "";
    Scanner scanner2 = new Scanner(System.in);
    while (((word = scanner2.nextLine()) != null)
            && !word.equalsIgnoreCase("quit")) {
        if (textFromFile.toString().contains(word)) {
            System.out.println("The word is on the text file");
        } else {
            System.out.println("The word " + word
                    + " is not on the text file");
        }
    }
    scanner2.close();

 }

} 
```

# c# - 如果在输出中使用“+”或不使用“+”有什么区别？

> ID：10854929
> 
> 赞同：3
> 
> 时间：2012-06-01T17:39:47.877
> 
> 标签：c#, string, text

```
Div1.InnerHtml = (someString); 
```

-VS-

```
Div1.InnerHtml += (someString); 
```

我注意到他们都做同样的事情，但我是否有任何真正的区别`+`？另外.. & 和
有什么区别？`InnerText``InnerHtml`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:40:52.813

`+=`将附加`(someString)`到 的现有值`Div1.InnerHtml`，而`=`将用*替换*的值。`Div1.InnerHtml``(someString)`

如果结果相同，则 的起始值`Div1.InnerHtml`很可能是`null`( )`string.Empty``""`

关于`InnerText`vs `InnerHtml`: `InnerHtml`可能会返回类似`<h1>Hello World</h1>`while`InnerText`会返回的东西`Hello World`（没有实际 HTML 元素的元素的值）。

考虑以下情况：

```
string someString = "Hello";
string innerHtml = "";

innerHtml += someString; // result will be "Hello" 
```

* * *

```
string someString = "Hello";
string innerHtml = "";

innerHtml = someString; // result will be "Hello" 
```

* * *

```
string someString = "Hello";
string innerHtml = "World";

innerHtml += someString; // result will be "HelloWorld" 
```

* * *

```
string someString = "Hello";
string innerHtml = "World";

innerHtml = someString; // result will be "Hello" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T17:42:29.613

**第一个问题的答案**

[C# String Append](http://www.dotnetperls.com/string-append) -: += 用现有字符串追加字符串

另一个例子是

```
string s = "abc";
s+="cde";

output
s = "abcde" 
```

**第二个问题的答案**

innerText 将按原样检索值，但如果它包含标记，它将按原样呈现文本，而 innerHTML 通过应用 HTML 标记（如果有）来检索值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T17:43:19.323

它们根本*不是*一回事。这是关于字符串操作，而不是与 ASP.NET 相关的特定内容
。第一个将 someString 放在 Div1 的字符串属性 InnerHtml 中，
第二个将 InnerHtml 设置为 InnerHtml +(someString)，例如，如果 InnerHtml 包含字符串“aa " 在此操作之前，后一种情况下将变为“aaSomeString”，前一种情况下将变为“SomeString”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T17:43:23.420

他们只是在做同样的事情，因为当你做 += 时 Div1 是空的

+= 是附加的，所以如果你连续几次这样做，你会看到你得到了你可能没有预料到的数据。

赋值运算符 (=) 将简单地将 Div1 的值设置为左侧的任何值，而不管之前的值是什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T17:45:52.043

1.  `+=`是连接（a = a + b 的缩写）

    `=`将用右侧的新值覆盖该值

2.  `innerHtml`将允许您添加标签，如`<p>`和`div`

    `innerText`将这些标签编码为`&lt;p&gt;`和`&lt;div&gt;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T17:52:25.223

`+=`是**速记运算符**

例如

```
i = i + (some value) and i+=(some value) both is same. 
```

所以，一般来说，

```
Left_Val (operator)= right_val and Left_Val = Left_Val (operator) right_val are same 
```

请注意，**运算符**应该是二进制的。**速记运算符**不能与一元（如一**元减号**）和三元运算符（如**?:**）一起使用。

# java - 无法对非静态方法（Android getApplicationContext()）进行静态引用

> ID：10854930
> 
> 赞同：7
> 
> 时间：2012-06-01T17:39:49.443
> 
> 标签：java, android, android-fragments, android-context, static

我一直在使用 android.app.Application 的子类在我的 Android 应用程序中存储跨活动所需的全局变量，如 Soonil 所述（在[如何在 Android 中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)）。

该方法如下所示：

```
class MyApp extends Application {

    private String myState;

    public String getState(){
    return myState;
    }
        public void setState(String s){
        myState = s;
    }
}

class Blah extends Activity {

    @Override
    public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
    }
} 
```

到目前为止，这种方法可以很好地从我的任何活动中访问全局变量。但是今天使用相同的方法，我得到了以下错误：

```
Cannot make a static reference to the non-static method getApplicationContext()
from the type ContextWrapper 
```

与之前的关键区别在于，新的 Activity 实际上是一个 Fragment（准确地说是 SherlockFragmentActivity）。

任何想法为什么我不能像以前一样访问 appState，有没有好的解决方法？

非常感谢。

* * *

编辑：很好，Matt B。事实证明，我实际上调用 getApplicationContext() 的地方是在另一个类中。这是调用点：

```
public class MyActivity extends SherlockFragmentActivity {
    public static class AccountListFragment extends SherlockListFragment {
        MyApp appState = ((MyApp)getApplicationContext());
        ...
    }
    ...
} 
```

此外，如下所述，当我将调用更改为

```
MyApp appState = ((MyApp)getActivity().getApplicationContext()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:44:50.257

```
getActivity().getApplication() 
```

应该可以正常工作。

您首先需要引用活动，然后是应用程序

不同之处在于您现在从 Fragment（即使您将其命名为“Activity”）而不是 Activity 调用此函数

# google-drive-api - 如何在多个帐户上获取 Google Drive 应用程序

> ID：10854933
> 
> 赞同：5
> 
> 时间：2012-06-01T17:40:00.257
> 
> 标签：google-drive-api

对于尝试从多个帐户使用 Google Drive 应用程序的用户来说，我遇到了一个严重的可用性问题。为了让应用能够代表用户使用 Drive API，用户必须*在以该用户身份登录时*安装关联的 Chrome 网上应用店应用。问题是 Chrome 网上应用店似乎在寻找每个浏览器安装的应用程序，而 Drive API 需要为每个用户安装应用程序。

据我所知，在同一个（Chrome）浏览器中为多个用户安装同一个应用程序的唯一方法是与一个用户一起安装，然后以第二个用户身份登录，卸载应用程序（CWS 说已经已安装），然后重新安装（以便云端硬盘将应用程序标记为已为第二个用户安装）。这是一个非常令人困惑的体验，因为在此过程中，应用程序和 CWS 向用户发送关于应用程序是否已安装的混合消息。

我不确定是否有一个规范的应用程序可以测试这样的系统错误。DrEdit 住在某个地方吗？但是，如果您想查看我们实现中的问题行为，请以一个用户身份安装[Desmos.com 的图形计算器](https://chrome.google.com/webstore/detail/bhdheahnajobgndecdbggfmcojekgdko)，启动它并使用谷歌驱动器登录并验证一切正常。然后从应用程序中注销，并使用[https://accounts.google.com](https://accounts.google.com)以其他用户身份登录 google，然后再次尝试使用该应用程序。该应用程序会告诉您它没有安装（这是 Drive 的 API 告诉我们的），并将您定向到 CWS，它声称该应用程序*已*安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T00:25:36.790

我们知道这个问题。我同意这对于使用相同浏览器（和相同 Chrome 会话）的用户来说是一种非常糟糕的体验。问题之一是您登录 chrome 的帐户可能与您登录 Google Web 的帐户（Gmail、Chrome 网上应用店、Drive 等）不同，因此 Chrome 网上应用店必须做出选择在浏览器或 Web Google 帐户上使用应用程序的安装状态。

如果您为您的用户编写一个常见问题解答，也许您可​​以建议为第二个用户安装应用程序的最有效方法是使用其他浏览器（如 Firefox）简单地安装它。特别是因为 Firefox 不会受到此问题的影响，因为该应用程序不会安装在 Firefox 上，仅安装在 Drive 帐户上:)

该错误是在内部提交的，现在我们只能等待它被确定优先级并修复/整理。我们还在研究其他方式，让应用程序拥有不涉及 Chrome 网上应用店的安装流程，这样它就不会受到所有 Chrome 网上应用店/Chrome 浏览器复杂性的影响。

我会确保在这个问题上再次联系我们的工程团队。

# winforms - DevExpress 列一个多选字段

> ID：10854934
> 
> 赞同：0
> 
> 时间：2012-06-01T17:40:01.940
> 
> 标签：winforms, devexpress

我正在尝试使用复选框在 dev express 中创建一个下拉/组合框，以允许用户选择多个选项。

像这样的东西：

[![无标题](../Images/4a715fdb4ec0e60f708919cbdce57149.png)](http://www.flickr.com/photos/76579226@N04/7315493046/ "Flickr 上的 ____________BOb 未命名")

我找到了一些文档，但没有告诉我该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:55:40.573

使用 checkedComboBoxEdit 控件并根据需要使用它的下拉列表..

参考 - [CheckedComboBoxEdit - 添加 AllowMultiSelect 属性](http://www.devexpress.com/Support/Center/p/S134210.aspx)devexpress 线程和附加示例..

您可以使用一段代码轻松地手动实现所需的逻辑。只需处理 SelectedIndexChanged 事件并检查所选项目。

希望这有助于...

# android - Android: Using ObjectAnimator to translate a View with fractional values of the View's dimension

> ID：10854940
> 
> 赞同：45
> 
> 时间：2012-06-01T17:40:21.160
> 
> 标签：android, animation

It appears that the old view animations (`translate`, `scale`, and so on) are no longer accepted by the `AnimationInflater`, at least as of ICS. I read its code in 4.0.4, and it explicitly expects only the XML elements `set`, `objectAnimator`, `animator`.

Even though the documentation at [http://developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html) continues to include the view animations, they appear to be deprecated. Trying to use them results in, for instance, the error `java.lang.RuntimeException: Unknown animator name: translate`.

As such, it becomes necessary to use Android's `ObjectAnimator`. However, it does not accept fractional values of the associated dimension of itself or its parent (width for `translationX`, for example) as the old view animations did in the form `"75%p"`.

Constructing the `ObjectAnimator` manually at runtime, by programmatically fetching the size of the Fragment, isn't feasible because the `FragmentTransaction` only accepts declarative animations specified by a resid.

My goal is to translate offscreen a Fragment that is filling up an entire Activity (I'm basically doing a shift transition between two fragments). This is the existing `TranslationAnimation` implementation (`slide_in_right.xml`, which along with its counterpart `slide_out_left.xml` is for some reason not exposed in `android.R.anim`, and I therefore have to duplicate them in my codebase):

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate
    android:fromXDelta="100%p"
    android:toXDelta="0"
    android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

My API level is set to 14.

Thanks!

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-13T13:24:57.363

Actually object animators accept fractional values. But maybe you didn't understand the underlying concept of an objectAnimator or more generally a value animator. A value animator will animate a value related to a property (such as a color, a position on screen (X,Y), an alpha parameter or whatever you want). To create such a property (in your case xFraction and yFraction) you need to build your own getters and setters associated to this property name. Lets say you want to translate a FrameLayout from 0% to 25% of the size of your whole screen. Then you need to build a custom View that wraps the FrameLayout objects and write your getters and setters.

```
public class SlidingFrameLayout extends FrameLayout
{
    private static final String TAG = SlidingFrameLayout.class.getName();

    public SlidingFrameLayout(Context context) {
        super(context);
    }

    public SlidingFrameLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public float getXFraction()
    {
        int width = getWindowManager().getDefaultDisplay().getWidth();
        return (width == 0) ? 0 : getX() / (float) width;
    }

    public void setXFraction(float xFraction) {
        int width = getWindowManager().getDefaultDisplay().getWidth();
        setX((width > 0) ? (xFraction * width) : 0);
    }
} 
```

Then You can use the xml way to declare the object animator putting xFraction under the property xml attribute and inflate it with a AnimatorInflater

```
<?xml version="1.0" encoding="utf-8"?>
<objectAnimator 
xmlns:android="http://schemas.android.com/apk/res/android"
android:propertyName="xFraction" 
android:valueType="floatType"
android:valueFrom="0"
android:valueTo="0.25" 
android:duration="500"/> 
```

or you can just use the java line code

```
ObjectAnimator oa = ObjectAnimator.ofFloat(menuFragmentContainer, "xFraction", 0, 0.25f); 
```

Hope it helps you!

Olivier,

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-20T03:27:06.753

Android SDK implementation of `FragmentTransaction` expects an `Animator` while, for some obscure reason, the support library implementation expects an `Animation`, if you use Fragment implementation from support library your translate animation will work

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-25T16:25:09.453

Here is an important *gotcha* for those who are trying to create view animations like `translate` and `scale`.

Property animations are located in a directory named "*animator*": `res/animator/filename.xml`

BUT, view animations must be put in a directory simply called "*anim*": `res/anim/filename.xml`

I first put my view animation in an "animator" folder, and was confused about Android Studio complaining about how translate was not a valid element. So, *NO*, view animations are not deprecated. They just have their own location for some confusing reason.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-13T15:09:04.217

here is complete working example (works as outlined by author of accepted answer.)

Pressing the button toggles between 2 fragments A and B (by slide animation right to left). The fragments are just stupid text (AAAAAA and BBBBB) with different backgrounds.

MainActivity.java

```
package com.example.slidetrans;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    private static final String TAG = "Main";

    boolean showingA = true;
    Button button;

    A a;
    B b;

    private void incarnate(FragmentManager fm){
        int layoutId = R.id.frame;
        boolean fragmentWasNull = false;
        Fragment f = fm.findFragmentById(layoutId);
        if (f == null){
            Log.i(TAG, "fragment is null");
            if (showingA){
                f = a = new A();
            } else {
                f = b = new B();
            }
            fragmentWasNull = true;
        } else {
            Log.i(TAG, "fragment is not null");
            showingA = (f instanceof A);
            updateButtonText();
        }
        if (fragmentWasNull){
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(layoutId, showingA ? a : b,  "main").commit(); 
        }
    }
    private void updateButtonText(){
        button.setText(showingA ? "slide in B" : "slide in A");
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        FragmentManager fm = getFragmentManager();
        button = (Button)findViewById(R.id.button);
        incarnate(fm);
        OnClickListener listener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                FragmentManager fm = getFragmentManager();
                FragmentTransaction transaction = fm.beginTransaction();
                transaction.setCustomAnimations(R.anim.in, R.anim.out);
                transaction.replace(R.id.frame, showingA ? new B() : new A()).commit();
                showingA = !showingA;
                updateButtonText();
            }
        };
        button.setOnClickListener(listener);
    }
} 
```

LL.java

```
package com.example.slidetrans;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.LinearLayout;

public class LL extends LinearLayout {

    public LL(Context context) {
        super(context);
    }

    public LL(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public float getXFraction() {
        final int width = getWidth();
        if (width != 0) return getX() / getWidth();
        else return getX();
    }

    public void setXFraction(float xFraction) {
        final int width = getWidth();
        float newWidth = (width > 0) ? (xFraction * width) : -9999;
        setX(newWidth);
    }
} 
```

main.xml (layout)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
>
    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="slide in B" />

    <FrameLayout
        android:id="@+id/frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

    </FrameLayout>

</LinearLayout> 
```

a.xml (layout)

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.slidetrans.LL xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#00FF00"
>

    <TextView
        android:id="@+id/aText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="AAAAAAAAAAAAAAAAAA"
        android:textSize="30sp"
        android:textStyle="bold"
    />

</com.example.slidetrans.LL> 
```

b.xml (layout)

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.slidetrans.LL xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#FFFF00"
>

    <TextView
        android:id="@+id/bText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:textStyle="bold"
        android:text="BBBBBBBBBB"
    />

</com.example.slidetrans.LL> 
```

in.xml (anim)

```
<?xml version="1.0" encoding="utf-8"?>
<set  xmlns:android="http://schemas.android.com/apk/res/android">
    <objectAnimator
    android:duration="500"
    android:interpolator="@android:anim/linear_interpolator"
    android:propertyName="xFraction"
    android:valueFrom="1.0"
    android:valueTo="0.0"
    android:valueType="floatType" />

</set> 
```

out.xml (anim)

```
<?xml version="1.0" encoding="utf-8"?>
<set  xmlns:android="http://schemas.android.com/apk/res/android">
    <objectAnimator
    android:duration="500"
    android:interpolator="@android:anim/linear_interpolator"
    android:propertyName="xFraction"
    android:valueFrom="0.0"
    android:valueTo="-1.0"
    android:valueType="floatType" />

</set> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T07:28:35.723

View animations are not deprecated. If you are using Eclipse you can find them under tween animation as a resource type when creating a new Android XML file.

# c++ - 什么时候在 C++ 中生成默认构造函数

> ID：10854948
> 
> 赞同：1
> 
> 时间：2012-06-01T17:41:24.497
> 
> 标签：c++

根据“内部 C++ 对象模型”，仅当以下四个条件中的至少一个为真时，编译器才会生成（如果程序员未声明）复制构造函数：

1.  当类包含存在复制构造函数的类的成员对象时（由类设计器显式声明，如前面的 String 类的情况，或由编译器合成，如 Word 类的情况）

2.  当类派生自存在复制构造函数的基类时（同样，显式声明或合成）

3.  当类声明一个或多个虚函数时

4.  当类派生自一个或多个基类是虚拟的继承链时

这意味着如果我有一个只有构造函数的类，那么编译器将不会提供复制构造函数。

举个例子：

```
class test
{
    test(){}
};
int main()
{
    test obj1;       //statement 1
    test obj2(obj1); //statement 2
} 
```

上面的代码工作正常。现在问题来了，当我在类测试中添加以下行时：

```
test(const test& rhs) = delete; 
```

"= delete" 确保不会自动提供复制构造函数。添加以上行后，我收到语句 2 的错误，其中`Use of deleted function test::test(const test&)`.

我的问题是：根据“内部 C++ 对象模型”，我不需要上述类的复制构造函数，所以当我明确表示不生成复制构造函数（使用删除）时，为什么会出现错误？因为我期望编译器不需要上述类的复制构造函数。

我正在使用 gcc 版本 4.6.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T17:47:46.337

要使类可复制，它需要有一个复制构造函数。无论您是自己编写，还是编译器为您生成一个，都没有关系——它必须是可用的，`test a; test b(a);`才能成为有效的操作。

您显式地强制编译器删除复制构造函数——这是旧的“使复制构造函数私有”技巧的新版本。它不允许复制。所以不要对你不能复制感到惊讶。因为你告诉编译器不允许它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:48:08.747

隐式生成的复制构造函数的标准词是*[class.copy]/7*：

> 如果类定义没有显式声明复制构造函数，则隐式声明。如果类定义声明了移动构造函数或移动赋值运算符，则隐式声明的复制构造函数定义为已删除；否则，它被定义为默认值（8.4）。如果类具有用户声明的复制赋值运算符或用户声明的析构函数，则不推荐使用后一种情况。

和*[class.copy]/13*：

> 一个默认且未定义为已删除的复制/移动构造函数，如果它被 odr-used (3.2) 或在其第一次声明后显式默认，则被隐式定义。[注意：复制/移动构造函数是隐式定义的，即使实现省略了它的 odr-use (3.2, 12.2)。—尾注] 如果隐式定义的构造函数满足 constexpr 构造函数 (7.1.5) 的要求，则隐式定义的构造函数是 constexpr。

因此，仍然会为 生成一个*复制构造函数*`test`，并且它被语句 2 调用。我相信“内部 C++ 对象模型”正在谈论*复制构造函数*不是微不足道的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:47:36.357

这一行：

```
test obj2(obj1) 
```

正在尝试调用复制构造函数。

# python - Tornado 停止后对活动请求做了什么？

> ID：10854950
> 
> 赞同：0
> 
> 时间：2012-06-01T17:41:56.120
> 
> 标签：python, tornado, supervisord

问题几乎说明了一切。如果我在带有 Supervisor 的服务器上运行 Tornado，当我部署代码并需要重新启动 Tornado 服务器时，活动请求会发生什么情况？他们在请求中被丢弃了吗？他们可以完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:56:49.343

Supervisord 向 tornado 进程发送一个 HUP 或 TERM 之类的信号，最重要的一点是 tornado 如何处理它。

不幸的是，tornado 会在收到 HUP、TERM、INT 等信号时简单地退出。

Tornado 有一个名为 autoreload 的子模块，它使应用程序可以检测到代码文件的变化并重新加载应用程序，但它只适用于一个进程的调试模式，而不适用于 WSGI 应用程序。是开发工具。

但是，我们可以在 run tornado.autoreload._reload 函数中手动定义一个函数，并将其注册到 HUP sigal。[tornado.autoreload.add_reload_hook](http://www.tornadoweb.org/documentation/autoreload.html#tornado.autoreload.add_reload_hook)可以添加函数，应该在重新加载时调用。

因为tornado在fork模式下不能很好的管理进程，所以建议为不同的端口运行多个独立的进程。在这种模式下，_reload 将像设置调试标志一样工作。

毕竟，对其进行测试和基准测试以确保它在您的应用程序中运行良好。

# c# - MVC3 writing LINQ in Model

> ID：10854952
> 
> 赞同：0
> 
> 时间：2012-06-01T17:41:59.723
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq

It is said that the models should be fat and the Views should be thin.We put our business logic inside the Model [(https://stackoverflow.com/questions/235233/asp-net-mvc-should-business-logic-exist-in-controllers)](https://stackoverflow.com/questions/235233/asp-net-mvc-should-business-logic-exist-in-controllers).We normally write the LINQ inside the controller,but is it possible that we should write the query in models,If yes then how we will get the results in the View?

Second Question

```
 public ActionResult Index()
  {
            using (NORTHWNDEntities c = new NORTHWNDEntities())
            {

                var x = c.Employees.Count();
                ViewData["count"] = x;

                return View(x);       
            }
    } 
```

When we do this are we passing the variable x to the View? I tried to access the `ViewData` in View

```
<% ViewData["count"] %> 
```

But it gives an error error ,Anyone who can help me with this Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:52:49.943

If you are trying to display the value of `ViewData["count"]` in your view, you can use the following syntax:

```
<%= ViewData["count"] %> 
```

Note the `=` in the opening tag. This is the equivalent of

```
<% Response.Write(ViewData["count"]) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:06:42.887

there is better approach for doing this.and is very straight forward.create a Model that meets your needs and pass it to view.

```
public class MyModel
{
    public int Count{get;set;}
} 
```

and your controller can looks like

```
public ActionResult Index()
  {
            using (NORTHWNDEntities c = new NORTHWNDEntities())
            {

                var x = c.Employees.Count();
                var model = new MyModel{Count = x};    
                return View(model);       
            }
    } 
```

and then create an strongly typed view

Razor Syntax :

```
@model MyModel

@Model.Count 
```

ASPX syntax :

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Models.MyModel>" %>
<%= Model.Count %> 
```

and the code can get even better if you do the following:

```
public class EmployeeService
{

     public int GetEmployeeCount()
     {
            using (NORTHWNDEntities c = new NORTHWNDEntities())
            {
                var count = c.Employees.Count();                   
                return count;       
            }
     }
} 
```

and the controller most change as well:

```
public ActionResult Index()
  { 
                EmployeeService srvc = new EmployeeService();
                var x = srvc.GetEmployeeCount();
                var model = new MyModel{Count = x};    
                return View(model);   
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:54:25.427

The query have to be into the *Data Access Layer* and the logic in MVC is into the Controller, not into the Model.

[Here](http://sample.codeplex.com/wikipage?title=Modular%20architecture) you can find an example of a layered architecture with MVC.

At the end you have always to use a Model into the View, [don't](https://stackoverflow.com/questions/5863094/asp-net-mvc-using-viewdata-in-javascript) pass data using the ViewData.

# delphi - 如何获取正在运行的可执行文件的版本？

> ID：10854958
> 
> 赞同：5
> 
> 时间：2012-06-01T17:42:31.660
> 
> 标签：delphi, winapi, resources, versioning, delphi-5

如何获取正在运行的应用程序的版本？

* * *

我一直在使用[`GetFileVersionInfo(ParamStr(0), ...)`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)：

```
filename := PChar(ExtractShortPathName(ParamStr(0)));

//Get the number of bytes he have to allocate for the file information structure
dwInfoLength := GetFileVersionInfoSize(lptstrFilename, {var}dwHandle);

//Get version info
GetMem(pInfoData, dwInfoLength);
GetFileVersionInfo(lptstrFilename, dwHandle, dwInfoLength, pInfoData);

//Set what information we want to extract from pInfoData
lpSubBlock := PChar(Chr(92)+Chr(0));

//Extract the desired data from pInfoData into the FileInformation structure
VerQueryValue(pInfoData, lpSubBlock, PFileInformation, LengthOfReturned); 
```

这种技术的问题在于它需要 Windows 加载程序[在读取资源之前加载图像](http://blogs.msdn.com/b/oldnewthing/archive/2012/04/18/10294731.aspx)。[`IMAGE_FILE_NET_RUN_FROM_SWAP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313(v=vs.85).aspx)我使用图像标志构建我的应用程序（[以避免在繁琐的网络上出现页面内异常](https://stackoverflow.com/questions/6953739/are-there-risks-associated-with-image-file-removable-run-from-swap-or-image-file)）。

*这会导致 Windows 加载程序再次*通过网络加载整个图像，而不仅仅是查看***“我”***。由于我在启动时检查并保存了我自己的版本，因此 6 秒的应用程序启动变成了 10 秒的应用程序启动。

我如何阅读我的版本*，我*正在*运行*的应用程序？

 ** * *

我会假设 Windows 没有 API 来读取正在运行的进程的版本，只有我从中加载的文件（如果文件不再存在，则它无法读取任何版本信息）。

但我也假设有可能从我的进程自己的内存中读取版本资源（当然不是管理员或调试器组的成员）。

我可以阅读*我*的流程版本吗？

* * *

**相关奖励问题**：如何从*我*这里而不是通过网络加载`PE Image`资源？

 ** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T19:08:03.197

在 Stackoverflow 上找到它：

[如何确定 Delphi 应用程序版本](https://stackoverflow.com/questions/1717844/how-to-determine-delphi-application-version)

我已经*知道*如何确定应用程序版本，但@StijnSanders 提出了“更好”的方法，这正是我遇到的原因：

> 当您想知道当前正在运行的可执行文件的版本时，我强烈建议不要使用 GetFileVersion！我有两个很好的理由这样做：
> 
> *   可执行文件可能无法访问（断开驱动器/共享），或已更改（.exe 重命名为 .bak 并被新的 .exe 替换，而没有停止正在运行的进程）。
> *   您尝试读取的版本数据实际上已经加载到内存中，并且通过加载此资源可供您使用，这总是比执行额外（相对较慢）的磁盘操作更好。

我适应了：

```
function GetModuleVersion(Instance: THandle; out iMajor, iMinor, iRelease, iBuild: Integer): Boolean;
var
    fileInformation: PVSFIXEDFILEINFO;
    verlen: Cardinal;
    rs: TResourceStream;
    m: TMemoryStream;
    resource: HRSRC;
begin
    //You said zero, but you mean "us"
    if Instance = 0 then
        Instance := HInstance;

    //UPDATE: Workaround bug in Delphi if resource doesn't exist    
    resource := FindResource(Instance, 1, RT_VERSION);
    if resource = 0 then
    begin
       iMajor := 0;
       iMinor := 0;
       iRelease := 0;
       iBuild := 0;
       Result := False;
       Exit;
    end;

    m := TMemoryStream.Create;
    try
        rs := TResourceStream.CreateFromID(Instance, 1, RT_VERSION);
        try
            m.CopyFrom(rs, rs.Size);
        finally
            rs.Free;
        end;

        m.Position:=0;
        if not VerQueryValue(m.Memory, '\', (*var*)Pointer(fileInformation), (*var*)verlen) then
        begin
            iMajor := 0;
            iMinor := 0;
            iRelease := 0;
            iBuild := 0;
            Exit;
        end;

        iMajor := fileInformation.dwFileVersionMS shr 16;
        iMinor := fileInformation.dwFileVersionMS and $FFFF;
        iRelease := fileInformation.dwFileVersionLS shr 16;
        iBuild := fileInformation.dwFileVersionLS and $FFFF;
    finally
        m.Free;
    end;

    Result := True;
end; 
```

* * *

**警告**：由于 Delphi 中的错误，上述代码有时会崩溃：

```
rs := TResourceStream.CreateFromID(Instance, 1, RT_VERSION); 
```

如果没有版本信息，Delphi 会尝试引发异常：

```
procedure TResourceStream.Initialize(Instance: THandle; Name, ResType: PChar);
   procedure Error;
   begin
      raise EResNotFound.CreateFmt(SResNotFound, [Name]);
   end;
begin
   HResInfo := FindResource(Instance, Name, ResType);
   if HResInfo = 0 then Error;
   ...
end; 
```

当然，错误在于`PChar`它并不总是*指向 ansi char*的指针。对于未命名的资源，它们是整数常量，转换为`PChar`. 在这种情况下：

```
Name: PChar = PChar(1); 
```

当 Delphi 尝试构建异常字符串并取消引用`0x00000001`它触发和访问冲突的指针时。

解决方法是先手动调用`FindResource(Instance, 1, RT_VERSION)`：

```
var
    ...
    resource: HRSRC;
begin
    ...
    resource := FindResource(Instance, 1, RT_VERSION);
    if (resource = 0) 
    begin
       iMajor := 0;
       iMinor := 0;
       iRelease := 0;
       iBuild := 0;
       Result := False;
       Exit;
    end;

    m := TMemoryStream.Create;
    ... 
```

> **注意**：任何代码都会发布到公共领域。无需归属。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T18:03:44.113

您可能想尝试`FindResource`/ `LockResource`API 以访问`VERSIONINFO`正在运行的模块的资源。MSDN 文章在示例部分链接了一个示例，还有一个带有[C++ 示例代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648047%28v=vs.85%29.aspx)的社区评论正是这样做的。这从已经加载的模块开始，而不是从文件名开始（据说是单独加载的，带有指示“仅加载资源”的标志，因此可能忽略图像已经映射到进程中的事实）。

请注意 - 根据提供的代码片段 - 您可以找到模块的资源，然后重用标准`VerQueryValue`API 以从那里继续资源解析。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T19:00:55.177

我建议您阅读 JCL 中的代码 JclFileUtils.pas。“TJclFileVersionInfo”类有一些重载的构造函数，允许从文件和模块句柄获取版本信息。

您可以使用 JCL 类，或者至少阅读它以详细了解它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-10T16:37:26.997

Delphi 10.3.3 提供了一种合理的方法来从运行的 exe 中读取 ProductVersion。在项目 exe 的 [Options] [ProductVersion] 中设置此值。

将变量设置为：

```
var
  major, minor, build: Cardinal;
  Version: String; 
```

设置代码为：

```
// [GetProductVersion] uses 1st 3 values separated by decimal (.)
// as: major, minor, build. 4th optional parameter is ignored.
//
// Gui may display -- Major, Minor, Release, Build
// but reports as -- Major, Minor, Build

if GetProductVersion(Application.ExeName, major, minor, build) then
  Version := 'v' + major.ToString() + '.' + minor.ToString()
    + ' Beta Build ' + build.ToString(); 
```**

# c# - 如何将按钮处理程序视为方法调用？

> ID：10854959
> 
> 赞同：0
> 
> 时间：2012-06-01T17:42:35.123
> 
> 标签：c#, asp.net

我有一个非常大的 asp.net 应用程序，它在项目中有许多不同的 .cs 文件。我想从另一个项目触发一个按钮处理程序的方法。原因是在按钮处理程序所在的 .cs 文件中，使用了许多私有的变量和方法，我不想将它们的可访问性更改为公共的以访问它们。

简单的说。如何从不同的 .cs 文件中的另一个方法调用方法“protected void try_validate(object sender, EventArgs e)”？

![在此处输入图像描述](../Images/ebddaf863e17f04a30443fefc3cc8328.png)

我正在尝试从项目中的不同 .cs 文件访问 resetPage。我已经将 resetPage 的代码放入了一个名为 WriteToDB 的新方法中，但即使这样我也无法从其他 .cs 文件中调用

![在此处输入图像描述](../Images/58b3c6cc0b7c8bf0fea956f06807b357.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:45:21.623

如果您将处理程序中的逻辑放入另一个公共方法中，然后从您需要的任何地方调用它，是否有可能？

# objective-c - 将文本写入 UIImage

> ID：10854961
> 
> 赞同：1
> 
> 时间：2012-06-01T17:42:50.997
> 
> 标签：objective-c, xcode, cocoa-touch, uiimage

我正在尝试在块的图像内写一个数字。我一直在寻找如何做到这一点，我发现了几种不同的方法来做到这一点。问题是，它们都不起作用。我已经尝试过[这个](https://stackoverflow.com/questions/2250057/add-text-to-the-image)和[这个](http://iphonesdksnippets.com/post/2009/05/05/Add-text-to-image-%28UIImage%29.aspx)，但它们都导致联系日志中出现错误，上面写着`invalid context 0x0`。有谁知道是什么原因造成的？

编辑：

我可能应该提到我试图在哪里实现这一点。我有一个类`Blok`，它扩展了 NSObject 并拥有一个 UIImage。该 UIImage 用于另一个类的`drawRect`方法，也是我想要的文本。

这是我初始化图像的地方：

```
-(id)initWithType:(NSString*)theType andSymbol:(NSString*)theSymbol {

    self = [super init];
    if (self) {

        image = [[UIImage alloc] init];

        type = theType;
        symbol = theSymbol;
    }
    return self;
} 
```

这是稍后设置的位置：

```
-(void)setImage:(UIImage*)theImage {

    image = theImage;

    image = [self addText:symbol atPoint:CGPointMake(0, 0) withFont:[UIFont fontWithName:@"Helvetica" size:12] ofColor:[UIColor blackColor]];

} 
```

方法调用如下所示的方法，由 H2CO3 给出：

```
- (UIImage *) addText: (NSString *) str atPoint: (CGPoint) point withFont: (UIFont *) font ofColor: (UIColor *) color {

    int w = image.size.width;
    int h = image.size.height;

    // create empty bitmap context
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB ();
    CGContextRef ctx = CGBitmapContextCreate (NULL, w, h, 8, w * 4, colorSpace, kCGImageAlphaPremultipliedFirst);
    CGContextSetInterpolationQuality (ctx, kCGInterpolationHigh);

    // draw the image and the text on the bitmap context
    CGContextDrawImage (ctx, CGRectMake (0, 0, h, w), image.CGImage);
    char *text = (char *)[str cStringUsingEncoding: NSASCIIStringEncoding];
    CGContextSetTextDrawingMode (ctx, kCGTextFill);
    CGFloat *comp = CGColorGetComponents ([color CGColor]);
    CGContextSetRGBFillColor (ctx, comp[0], comp[1], comp[2], comp[3]);
    CGContextSelectFont (ctx, [[font fontName] UTF8String], [font pointSize], kCGEncodingMacRoman);
    CGContextShowTextAtPoint (ctx, point.x, h - point.y, text, strlen (text));

    // get the image as a UIImage and clean up
    CGImageRef imageMasked = CGBitmapContextCreateImage (ctx);
    UIImage *img = [UIImage imageWithCGImage: imageMasked];
    CGContextRelease (ctx);
    CGImageRelease (imageMasked);
    CGColorSpaceRelease (colorSpace);

    return img;

} 
```

我稍微调整了一下以适应程序。不幸的是，这似乎导致了错误的访问错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:46:36.163

看看我是如何在这里实现的：[https ://github.com/H2CO3/UIImage-Editor/blob/master/UIImage%2BEditor.m](https://github.com/H2CO3/UIImage-Editor/blob/master/UIImage%2BEditor.m)

特别是，看看

```
- (UIImage *) addText: (NSString *) str atPoint: (CGPoint) point withFont: (UIFont *) font ofColor: (UIColor *) color 
```

方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:39:19.293

在处理这个问题比我想要的时间长一点之后，我将在`drawRect`方法中使用 UILabel 。

编辑：`drawAtPoint`在`drawRect`方法中使用，现在工作得很好。

# python - 空输出文件

> ID：10854963
> 
> 赞同：1
> 
> 时间：2012-06-01T17:43:01.813
> 
> 标签：python

我有以下内容，无论我在输入文件中有什么，最后都会给我一个空文件，但我不知道为什么，所以如果可能的话，我想寻求你的帮助，谢谢。

```
 import re
    import sys
    import os

    if len(sys.argv) > 1 :
         inf = sys.argv[1]
         if os.path.isfile(inf) :
             pass
         else :
              print "Nincs ilyen file!"
              sys.exit(0)
    else :
        print "Nincs argumentum!"

    infile = open(sys.argv[1],"r")
    outfile = open("out.txt","w")

    for t in infile :
         lista = t.split(";;;")
    for i in range(0,len(lista)):
         if lista[i] == "begin" :
              outfile.write("def "+lista[i-1]+"\n")
         elif lista[i] == "end;" :
              outfile.write(lista[i+1]+"\n")
         else :
              outfile.write("    "+lista[i]+"\n") 
```

编辑：

我什至尝试过让它在输出文件中写入一些东西，但它仍然没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:07:28.393

完成写入后，不要忘记关闭输出文件。否则你的写语句将不会被保存。

在脚本末尾添加：

```
outfile.close() 
```

最佳做法也是关闭您正在读取的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:57:09.410

您在检查任何行之前阅读了整个文件。因此`lista`代表文件的*最后*一行。可能您希望第二个循环在第一个循环*内*`for`缩进，以便它针对文件的每一行运行，而不仅仅是最后一行。

 *另外，请不要`for i in range(...)`访问列表，这会使婴儿耶稣哭泣。`for item in lista`会好很多，然后你只需测试`if item == "begin"`等等。*

# c++ - C++ 初始化查询

> ID：10854964
> 
> 赞同：0
> 
> 时间：2012-06-01T17:43:01.853
> 
> 标签：c++, initialization

有人可以告诉我这个初始化是否有任何错误：

```
static unsigned char* var[1]   
var[0] = new unsigned char[ 800 * 600 ] 
```

这是在 var[0] 创建一个二维数组吗？这甚至有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:46:30.200

它创建了一个包含 480,000 个元素（又名 800*600）的数组并将其存储在 var[0] 中。它不是创建二维数组。只要`var[0]`是`unsigned char*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T18:00:55.310

它在 var[0] 处创建一个长度为 (800*600) 的一维数组。您将能够通过以下方式访问其元素：

```
var[0][0]
var[0][1]
...
var[0][800*600-1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:48:41.757

~~您的代码不正确，因为`var[0]`不再是指针。~~

您可能想要执行以下操作：

```
static unsigned char* var;
var = new unsigned char[800 * 600]; 
```

这不会创建二维数组。它只是一个一维数组。话虽如此，如果您自己计算偏移量，则可以将其用作二维数组。例如访问位置 (row, col) 你可以这样做：

```
var[row * 600 + col] 
```

如果你真的想要一个“真正的”二维数组，你将需要使用例如：

```
static unsigned char** var;
var = new unsigned char*[600];
for (int i = 0; i < 600; i++)
    var[i] = new unsigned char[800]; 
```

当然，如果你不需要在运行时动态指定数组大小，你可以只使用静态分配的数组：

```
static unsigned char var[600][800]; 
```

顺便说一句，我假设 600 是行数，800 是列数（就像在矩阵中一样）。这就是为什么我总是在第一个索引中使用 600。否则，只需交换值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T17:51:47.490

我认为您想要更像的东西（尽管我可能打错了问题）；

```
static unsigned char* var = new char*[800]

for (int i =0; i < 800; i++)
     var[i] = new char[600] 
```

这将为您提供 800x600 二维字符数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T18:07:53.070

是的，使用`new[]`. 您正在寻找的是`std::vector<unsigned int> var(800 * 600);`.

# lua - luasql 零值

> ID：10854971
> 
> 赞同：3
> 
> 时间：2012-06-01T17:43:24.483
> 
> 标签：lua, luasql

我尝试按照[http://www.keplerproject.org/luasql/examples.html上的示例进行操作](http://www.keplerproject.org/luasql/examples.html)

```
Lua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio
> require "luasql.postgres"
> env = assert (luasql.postgres())
stdin:1: attempt to index global 'luasql' (a nil value)
stack traceback:
    stdin:1: in main chunk
    [C]: in ?
> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T19:32:32.467

你可以试试

```
luasql = require "luasql.postgres"
env = assert (luasql.postgres()) 
```

# mysql - mysql性能问题

> ID：10854993
> 
> 赞同：2
> 
> 时间：2012-06-01T17:46:09.857
> 
> 标签：mysql, query-optimization

我有一个没有连接的简单查询，运行速度非常慢（20 秒以上）。查询的表有大约 400k 行，并且 where 子句中使用的所有列都被索引。

```
SELECT deals.id, deals.title, 
       deals.amount_sold * deals.sale_price   AS total_sold_total
FROM deals  
WHERE deals.country_id = 33 
  AND deals.target_approved = 1 
  AND deals.target_active = 1 
  AND deals.finished_at >= '2012-04-01' 
  AND deals.started_at <= '2012-04-30'
ORDER BY total_sold_total DESC 
LIMIT 0, 10 
```

自上周以来我一直在努力解决这个问题，请我帮忙:)

更新 1

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  deals   index_merge NewIndex3,finished_at_index,index_deals_on_country_id,index_deals_on_target_active,index_deals_on_target_approved   index_deals_on_target_active,index_deals_on_target_approved,index_deals_on_country_id   2,2,5   \N  32382   Using intersect(index_deals_on_target_active,index_deals_on_target_approved,index_deals_on_country_id); Using where; Using filesort 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:38:46.473

要改进选择，请使用 WHERE 子句中的列按指定顺序创建以下复合索引：

```
(country_id, target_approved, target_active, finished_at)
(country_id, target_approved, target_active, started_at) 
```

您首先需要具有较高基数的列，最后是范围。MySQL 不能[利用第一个范围之外的任何关键部分](http://dev.mysql.com/doc/refman/5.0/en/range-optimization.html#range-access-multi-part)，这就是为什么我们有两个独立的索引，它们在 WHERE 子句 (`>=`和`<=`) 的范围内发散。

如果 MySQL 没有通过索引合并使用这两个索引，那么您可能会考虑删除其中一个。

不幸的是，MySQL 仍然必须返回所有行，计算 total_sold_total，然后才能对行进行排序。换句话说，MySQL 必须在检索到整个数据集后手动对行进行排序。

排序所需的时间将与结果集的大小成正比。

不能使用 LIMIT 优化，因为 LIMIT 是在排序之后应用的。

不幸的是，在 WHERE 子句中有范围会阻止您将预先计算的 total_sold_total 列添加到索引的末尾以按顺序返回结果，这将阻止手动排序。

# objective-c - initWithFormat 在 xcode 目标 c 中不起作用

> ID：10854994
> 
> 赞同：0
> 
> 时间：2012-06-01T17:46:15.253
> 
> 标签：objective-c, xcode

我正在关注我在网上找到的关于如何在 xcode 中制作计算器的教程。我正在使用 3.2.6 版的 xcode，这是给我带来问题的函数：

```
-(IBAction) calculate
{
    float x= ([textField1.text  floatValue]);
    float c= x*([textField2.text floatValue]);

    label.text = [[NSString alloc] initWithFormat:@"%2.f", c];
} 
```

我在 label.text 行中得到这些编译器错误： Expected ':' before ';' 令牌并且对早期的错误救助感到困惑。

关于什么可能是错误的任何想法？我是否必须包含一个特殊的头文件才能使用 initWithFormat？或者这是一个语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:53:27.660

确保您在某处没有隐形角色。

我经常以错误的行结尾结束。最简单的判断方法是将光标放在一行上并按 ctrl-a。如果光标跳到上一行的开头，则它是一个错误的行尾。删除行尾并回车。

（就我而言，这是由于 20 年的 emacs 使用导致的一些神经硬连线）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:05:38.207

你`NSLog`有`label`和`label.text`之前`label.text = [[NSString alloc] initWithFormat:@"%2.f", c];`吗？也许你的`label`.

# iphone - 制作精美的 tabBar 图标

> ID：10854999
> 
> 赞同：2
> 
> 时间：2012-06-01T17:46:37.550
> 
> 标签：iphone, ios, icons, uitabbarcontroller

我们知道 tabBar 的默认图标大小是 30x30 点。我有一个带有细线的图标，显示属性不是很好。它的边缘并不锋利。但我发现music.app 的tabBar 图标非常漂亮，边缘锋利。有什么我应该知道的技巧吗？提前致谢！

![music.app tabBar 图标](../Images/844614e55e55c3edcb7e05554f58ca34.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:50:44.593

它是 30x30 点，可以是 30x30 像素或 60x60 像素，具体取决于设备是否具有视网膜显示屏。该图像看起来显示在视网膜设备上。

例如，如果您有一个名为 MusicTabIcon.png 的图像，则有两个版本...

1.  一个名为 MusicTabIcon.png 的 @ 30x30 像素
2.  一个名为 MusicTabIcon@2x.png 的 @ 60x60 像素