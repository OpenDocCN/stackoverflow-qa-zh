# StackOverflow 问答 10007000-10007999

# symfony - 使用 Symfony2 包含 3rd 方文件的最佳方法

> ID：10007010
> 
> 赞同：6
> 
> 时间：2012-04-04T07:55:20.117
> 
> 标签：symfony

我想知道在 symfony2 中包含 3rd 方 php 文件的最佳方法是什么。我正在使用不同的 php - ajax 包在我的 symfony2 应用程序中上传文件。该软件包为我提供了一些我需要在我的 symfony 控制器中使用的 php oops 代码。我正在我的控制器中创建该代码的对象。所以我想知道我可以把第三方代码或文件放在哪里，以及如何在我的 symfony2 控制器中包含或创建该代码的对象。我们是否也在 symfony2 中使用 require 或 include 。如果是这样，那是唯一的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:08:49.623

我不太确定尝试将命名空间添加到第三方库。例如，Twig 不使用名称空间。而且真的没有必要。例如，考虑一个您想使用 Zend_Framework 1 库中的 PDF 组件的情况。

在您的 app/autoload.php 文件中，您可以执行以下操作：

```
$loader->registerPrefixes(array(
    'Twig_Extensions_' => $ws . 'Symfony/vendor/twig-extensions/lib',
    'Twig_'            => $ws . 'Symfony/vendor/twig/lib',
    'Zend_'            => $ws . 'ZendFramework-1.0.0/library',
));

// And since Zend internally uses require/include we need to set an include path
ini_set('include_path','.' .

    PATH_SEPARATOR . $ws . 'ZendFramework-1.0.0/library'

); 
```

此时，我们应该能够在控制器内创建第三部分对象，同时让自动加载系统负责查找和包含类：

```
 $page = new \Zend_Pdf_Page(\Zend_Pdf_Page::SIZE_A4);
    $doc->pages[] = $page;

    $font1 = \Zend_Pdf_Font::fontWithName(\Zend_Pdf_Font::FONT_HELVETICA);
    $font2 = \Zend_Pdf_Font::fontWithName(\Zend_Pdf_Font::FONT_COURIER_BOLD); 
```

您必须使用 \ 来解决缺少命名空间的问题。

这个答案确实假设您的第 3 部分库遵循或多或少的标准类命名约定。如果它有自己的自动加载功能，那么也只需从 autolaod.php 调用它。如果您根本不想使用自动加载，那么只需设置包含路径并包含。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:16:04.160

[文档](http://symfony.com/doc/current/quick_tour/the_architecture.html#using-vendors)详细解释了目录结构。

基本上，您可以将它们放在您想要的任何位置，但为了保持一致性和遵循最佳实践，您应该将您的第三方库放在`vendor/`目录中。

您可以将相关文件包含在命名空间中。

# c# - 从浏览器调用 Windows 服务

> ID：10007012
> 
> 赞同：1
> 
> 时间：2012-04-04T07:55:23.410
> 
> 标签：c#, php, .net, sockets, windows-services

我想通过同一台机器上的浏览器应用程序将数据发送到驱动程序软件。如果此驱动程序可以继续通过套接字作为 Windows 服务侦听外部连接，我可以编写一个 Web 应用程序以使用 php、applet 或 .net 将数据发送到此驱动程序。驱动程序是用 C# 编写的。这是否可能，如果可以，有人可以向我展示路径/建议或与此相关的任何资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:27:50.357

我对驱动程序了解不多...

但是，如果您可以在 C# 驱动程序中自托管 WCF 服务，那么您就可以在同一台机器上进行 IPC（进程间通信）。WCF 可以公开多个端点，即）http、namedpipe 或 tcp，并且 .NET Web 应用程序可以订阅该服务并将数据发送到 C# 驱动程序。

此外，如果您使用 http 或 tcp 端点，我相信 Web 应用程序将能够从另一台机器连接到 C# 驱动程序。

WCF 参考：http: [//msdn.microsoft.com/en-us/library/ms731082.aspx](http://msdn.microsoft.com/en-us/library/ms731082.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:16:13.787

您可以使用网络套接字[WebSocket](http://en.wikipedia.org/wiki/WebSocket)，但是您的驱动程序必须处理握手。

# javascript - Ember.js - 为目标应用创建动态 filterProperty 值

> ID：10007013
> 
> 赞同：2
> 
> 时间：2012-04-04T07:55:30.493
> 
> 标签：javascript, ember.js

首先，让我先说我对 Ember.js 是全新的，对软件开发相对较新。我正在尝试构建一个活动记录应用程序，用户可以在其中发布类似于 twitter 或 facebook 的小文本更新，还可以创建每周目标，并且可以通过在发布更新时从目标下拉列表中选择来选择将帖子“应用”到目标。除了计算用户将帖子“应用”到特定目标的次数之外，我已经能够让一切正常工作。所以这是下面代码的精简版本：（另外，我整理了一个 jsfiddle [http://jsfiddle.net/jjohnson/KzK3B/3/](http://jsfiddle.net/jjohnson/KzK3B/3/)）

```
App = Ember.Application.create({});

App.Goal = Ember.Object.extend({
    goalTitle: null,
    timesPerWeek: null

});

App.Post = Ember.Object.extend({
    postContent: null,
    goal_name: null
});

App.postsController = Ember.ArrayController.create({
  content: [
      App.Post.create({ postContent: "went and played golf today, shot 69", goal_name: "Play a round of golf" }),
      App.Post.create({ postContent: "went and played golf today, shot a 70", goal_name: "Play a round of golf" }),
      App.Post.create({ postContent: "went to the range for an hour", goal_name: "Range practice" })
  ]

});

App.goalsController = Ember.ArrayController.create({
    content: [
        App.Goal.create({ goalTitle: 'Play a round of golf', timesPerWeek: 2 }),
        App.Goal.create({ goalTitle: 'Range practice', timesPerWeek: 3 })
                        ],

    timesThisWeek: function() {
            var value = "Play a round of golf";
            var value2 = this.goalTitle;
        return App.postsController.filterProperty('goal_name', value).get('length');
      }.property('@each.goal_name')

}); 
```

所以，我想我已经接近解决这个问题了，但即使我确定我忽略了一些非常简单的事情，我也不能完全理解。当我在 timesThisWeek 函数中放置一个静态目标名称值时，（var value） timesThisWeek 计数适用于该特定目标。但是，如果我尝试为车把迭代器（var value2）添加一个“this”，我不能让 timesThisWeek 为相关目标工作。

我敢肯定这是非常基本的，但任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:14:20.200

让它运行`CollectionView`，并在视图中移动项目的绑定过滤@ [http://jsfiddle.net/MikeAski/KzK3B/5/](http://jsfiddle.net/MikeAski/KzK3B/5/)

在模板中：

```
{{view Ember.CollectionView contentBinding="App.goalsController" itemViewClass="App.GoalView"}} 
```

视图的 JS：

```
App.GoalView = Ember.View.extend({
    templateName: "goal-view",
    timesThisWeek: function() {
        return App.postsController.filterProperty('goal_name', Ember.getPath(this, "content.goalTitle")).get('length');
    }.property('App.postsController.content.@each')
}); 
```

但是您也可以将此属性作为成员或`Goal`模型移动*（这取决于您的实际用例：我假设您也有不同的结果时间框架等）*。

**编辑**

最新版本：http: [//jsfiddle.net/MikeAski/z3eZV/](http://jsfiddle.net/MikeAski/z3eZV/)

# tornado - tornado.options.Error：选项已在

> ID：10007015
> 
> 赞同：3
> 
> 时间：2012-04-04T07:55:34.827
> 
> 标签：tornado

我现在正在学习tornado，我认为这是一个很好的框架。一切都很好，直到我从 main.py 中分离出一些方法。

例如：

在我的服务器启动程序 main.py 中。我使用 tornado.options.define 来定义一些这样的属性：

```
define("port", default=8888, help="run on the given port", type=int)
define("mysql_host", default="127.0.0.1:3306", help="blog database host")
define("mysql_database", default="forum", help="database name")
define("mysql_user", default="root", help="database user")
define("mysql_password", default="passwd", help="database password") 
```

其中有一个 BaseHandler ：

```
class BaseHandler(tornado.web.RequestHandler):
@property
def db(self):
    return self.application.db

def get_current_user(self):
    return self.get_secure_cookie("username") 
```

而在另一个文件中，比如 topic.py，topic.py 中的每个处理程序都会扩展 main.py 中的 BaseHandler，所以我像这样导入 BaseHandler：

```
from main import BaseHandler 
```

然后当我启动程序时出现问题：

```
Traceback (most recent call last):
  File "/Users/abc/money/main.py", line 85, in <module>
    define("port", default=8888, help="run on the given port", type=int)
  File "/Library/Python/2.7/site-packages/tornado-2.2-py2.7.egg/tornado/options.py", line 93, in define
options[name].file_name)
tornado.options.Error: ('Option %r already defined in %s', 'port', '/Users/suyejun/Dropbox/money/main.py') 
```

我怎样才能避免这种问题？还是有另一种编写代码的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:52:13.163

您需要将 BaseHandler 移动到与 main.py 不同的文件中。您遇到的问题是您有效地加载了 main.py 的代码两次。一次是在您启动应用程序时，另一次是在您将代码导入 topic.py 时。

我建议制作一个名为“pagemanager.py”之类的单独文件，并将任何共享类、函数、代码放在那里。然后将它们导入 main.py 和 topic.py，而不会导致特定于 Tornado 初始化的代码出现问题。

# python - matplotlib：使用共享 X 轴但单独的 Y 轴值创建两个（堆叠）子图

> ID：10007016
> 
> 赞同：13
> 
> 时间：2012-04-04T07:55:44.793
> 
> 标签：python, matplotlib

我在 Ubuntu 10.0.4 上使用 matplotlib 1.2.x 和 Python 2.6.5。我正在尝试创建一个由顶部图和底部图组成的单一图。

X 轴是时间序列的日期。顶部图包含数据的烛台图，底部图应包含条形图 - 具有自己的 Y 轴（也在左侧 - 与顶部图相同）。这两个图不应重叠。

这是我到目前为止所做的一个片段。

```
datafile = r'/var/tmp/trz12.csv'
r = mlab.csv2rec(datafile, delimiter=',', names=('dt', 'op', 'hi', 'lo', 'cl', 'vol', 'oi'))

mask = (r["dt"] >= datetime.date(startdate)) & (r["dt"] <= datetime.date(enddate))
selected = r[mask]
plotdata = zip(date2num(selected['dt']), selected['op'], selected['cl'], selected['hi'], selected['lo'], selected['vol'], selected['oi'])

# Setup charting 
mondays = WeekdayLocator(MONDAY)        # major ticks on the mondays
alldays    = DayLocator()               # minor ticks on the days
weekFormatter = DateFormatter('%b %d')  # Eg, Jan 12
dayFormatter = DateFormatter('%d')      # Eg, 12
monthFormatter = DateFormatter('%b %y')

# every Nth month
months = MonthLocator(range(1,13), bymonthday=1, interval=1)

fig = pylab.figure()
fig.subplots_adjust(bottom=0.1)
ax = fig.add_subplot(111)
ax.xaxis.set_major_locator(months)#mondays
ax.xaxis.set_major_formatter(monthFormatter) #weekFormatter
ax.format_xdata = mdates.DateFormatter('%Y-%m-%d')
ax.format_ydata = price
ax.grid(True)

candlestick(ax, plotdata, width=0.5, colorup='g', colordown='r', alpha=0.85)

ax.xaxis_date()
ax.autoscale_view()
pylab.setp( pylab.gca().get_xticklabels(), rotation=45, horizontalalignment='right')

# Add volume data 
# Note: the code below OVERWRITES the bottom part of the first plot
# it should be plotted UNDERNEATH the first plot - but somehow, that's not happening
fig.subplots_adjust(hspace=0.15)
ay = fig.add_subplot(212)
volumes = [ x[-2] for x in plotdata]
ay.bar(range(len(plotdata)), volumes, 0.05)

pylab.show() 
```

我已经设法使用上面的代码显示了这两个图，但是，底部图有两个问题：

1.  它完全覆盖了第一个（顶部）图的底部 - 几乎就像第二个图在与第一个图相同的“画布”上绘制 - 我看不出在哪里/为什么会发生这种情况。

2.  它用自己的索引覆盖现有的 X 轴，X 轴值（日期）应该在两个图之间共享。

我在代码中做错了什么？有人能发现是什么导致第二个（底部）图覆盖了第一个（顶部）图 - 我该如何解决这个问题？

这是上面代码创建的绘图的屏幕截图：

![错误的情节](../Images/a7f56d7e3fe67f286f6df1d0def724c3.png)

**[[编辑]]**

按照 hwlau 的建议修改代码后，这是新的情节。它比第一个更好，因为这两个地块是分开的，但是仍然存在以下问题：

1.  X 轴应由两个图共享（即 X 轴应仅显示为第二个 [底部] 图）

2.  第二个图的 Y 值似乎格式不正确

![部分正确的情节](../Images/3ca037bd9d00fa9b178a2da04416df2d.png)

我认为这些问题应该很容易解决，但是我的 matplotlib fu 目前不是很好，因为我最近才开始使用 matplotlib 编程。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T12:27:12.697

您的代码似乎有几个问题：

1.  如果您使用`figure.add_subplots`它的完整签名`subplot(nrows, ncols, plotNum)`可能会更明显，您的第一个图要求 1 行和 1 列，而第二个图要求 2 行和 1 列。因此，您的第一个情节正在填充整个数字。而不是`fig.add_subplot(111)`后面跟着 `fig.add_subplot(212)` use`fig.add_subplot(211)`后面跟着`fig.add_subplot(212)`.

2.  共享轴应该在`add_subplot`命令中使用`sharex=first_axis_instance`

我整理了一个您应该能够运行的示例：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as mticker
import matplotlib.dates as mdates

import datetime as dt

n_pts = 10
dates = [dt.datetime.now() + dt.timedelta(days=i) for i in range(n_pts)]

ax1 = plt.subplot(2, 1, 1)
ax1.plot(dates, range(10))

ax2 = plt.subplot(2, 1, 2, sharex=ax1)
ax2.bar(dates, range(10, 20))

# Now format the x axis. This *MUST* be done after all sharex commands are run.

# put no more than 10 ticks on the date axis.  
ax1.xaxis.set_major_locator(mticker.MaxNLocator(10))
# format the date in our own way.
ax1.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))

# rotate the labels on both date axes
for label in ax1.xaxis.get_ticklabels():
    label.set_rotation(30)
for label in ax2.xaxis.get_ticklabels():
    label.set_rotation(30)

# tweak the subplot spacing to fit the rotated labels correctly
plt.subplots_adjust(hspace=0.35, bottom=0.125)

plt.show() 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T10:18:56.843

你应该改变这一行：

```
ax = fig.add_subplot(111) 
```

到

```
ax = fig.add_subplot(211) 
```

原始命令意味着有一行和一列，因此它占据了整个图形。所以你的第二张图 fig.add_subplot(212) 覆盖了第一张图的下部。

**编辑**

如果您不想要两个图之间的间隙，请使用 subplots_adjust() 更改子图边距的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-28T12:59:47.590

@Pelson 的示例已简化。

```
import matplotlib.pyplot as plt
import datetime as dt

#Two subplots that share one x axis
fig,ax=plt.subplots(2,sharex=True)

#plot data
n_pts = 10
dates = [dt.datetime.now() + dt.timedelta(days=i) for i in range(n_pts)]
ax[0].bar(dates, range(10, 20))
ax[1].plot(dates, range(10))

#rotate and format the dates on the x axis
fig.autofmt_xdate() 
```

共享 x 轴的子图在一行中创建，当您需要两个以上的子图时，这很方便：

```
fig, ax = plt.subplots(number_of_subplots, sharex=True) 
```

要在 x 轴上正确格式化日期，我们可以简单地使用`fig.autofmt_xdate()`

[![共享 x x 轴](../Images/2cf610ddb45829db002f22f4325538c2.png)](https://i.stack.imgur.com/MUqY2.png)

有关其他信息，请参阅pylab 示例中的[共享轴演示](http://matplotlib.org/examples/pylab_examples/shared_axis_demo.html)和[日期演示](http://matplotlib.org/examples/pylab_examples/date_demo_convert.html)。此示例在 Python3、matplotlib 1.5.1 上运行

# javascript - ASP.NET Web 应用程序相对路径

> ID：10007017
> 
> 赞同：2
> 
> 时间：2012-04-04T07:55:45.803
> 
> 标签：javascript, jquery, asp.net, .net, html

遵循相对路径有什么区别？

```
<script type="text/javascript" src="../Scripts/jquery-1.2.6.js"></script>
<script type="text/javascript" src="../../Scripts/jquery-1.2.6.js"></script>
<script type="text/javascript" src="/Scripts/jquery-1.2.6.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-1.2.6.js"></script> 
```

*   哪个指的是什么？
*   例如，我有一个 Web 应用程序名称 ASPWP1 和文件夹结构如下

*   ASPWP1->文件夹1

*   ASPWP1->文件夹1->JS1.js
*   ASPWP1->Folder1->Sample1.aspx
*   ASPWP1->文件夹2
*   ASPWP1->文件夹2->JS2.js
*   ASPWP1->Folder2->Sample2.aspx
*   ASPWP1->文件夹3->JS3.js, JS4.js

* * *

*   如何在 sample1.aspx 中引用 JS1？
*   如何在 Sample2.aspx 中引用 JS1？
*   Sample1.aspx 中如何引用 JS3/JS4

请指导我理解相对路径。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:00:27.720

波浪号 (~) 指的是 HttpRuntime.AppDomainAppVirtualPath，它通常是虚拟目录的路由。

你测试过吗：<script type="text/javascript" src="~/Scripts/jquery-1.2.6.js">

我很惊讶它实际上会引用没有 runat="server" 标记的文件，因为 JavaScript 无法确定 HttpRuntime.AppDomainAppVirtualPath 的值。

我包含了一个 MSDN 源代码，您应该阅读它以帮助您更好地理解这一点。

[http://msdn.microsoft.com/en-us/library/ms178116.aspx](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

# php - 如何检查字符串是否是已知值之一？

> ID：10007019
> 
> 赞同：11
> 
> 时间：2012-04-04T07:55:54.030
> 
> 标签：php

```
<?php
$a = 'abc';

if($a among array('are','abc','xyz','lmn'))
    echo 'true';
?> 
```

假设我有上面的代码，如何写语句“if($a between...)”？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T07:57:03.250

使用该[`in_array()`](http://php.net/manual/en/function.in-array.php)功能。

手册说：

> 除非设置了严格，否则使用松散比较在 haystack 中搜索针。

例子：

```
<?php
$a = 'abc';

if (in_array($a, array('are','abc','xyz','lmn'))) {
    echo "Got abc";
}
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T07:57:54.170

像这样：

```
if (in_array($a, array('are','abc','xyz','lmn')))
{
  echo 'True';
} 
```

此外，虽然在您给出的示例中，技术上允许不使用大括号，但我强烈建议您使用它们。如果您稍后回来并在条件为真时添加更多逻辑，您可能会忘记添加大括号，从而破坏您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:58:12.890

有[in_array](http://php.net/manual/en/function.in-array.php)函数。

```
if(in_array($a, array('are','abc','xyz','lmn'), true)){
   echo 'true';
} 
```

***注意：*** 您应该将第三个参数设置`true`为使用严格比较。

`in_array(0, array('are','abc','xyz','lmn'))`将返回`true`，这可能不是您所期望的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:00:24.247

**尝试这个：**

```
if (in_array($a, array('are','abc','xyz','lmn')))
{
  // Code
} 
```

[http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

> **in_array** —*检查一个值是否存在于数组中*
> 
> bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) 除非设置了严格，否则使用松散比较搜索 haystack 中的针。

# xml - 如何使用 XSLT 组合 XML 元素

> ID：10007021
> 
> 赞同：1
> 
> 时间：2012-04-04T07:56:01.683
> 
> 标签：xml, xslt

我有以下 XML：

```
<root>
<section>
    <item name="a">
        <uuid>1</uuid>
    </item>
</section>
<section>
    <item name="b">
        <uuid>2</uuid>
    </item>
</section>
</root> 
```

我想将其转换为以下 XML：

```
<root>
<section>
    <item name="a">
        <uuid>1</uuid>
    </item>
    <item name="b">
        <uuid>2</uuid>
    </item>
</section>
</root> 
```

提前致谢。

**更新。**

稍有不同的示例包含其他元素和属性。

输入：

```
<root age="1">
<description>some text</description>
<section>
    <item name="a">
        <uuid>1</uuid>
    </item>
</section>
<section>
    <item name="b">
        <uuid>2</uuid>
    </item>
</section>
</root> 
```

我想将其转换为：

```
<root age="1">
<description>some text</description>
<section>
    <item name="a">
        <uuid>1</uuid>
    </item>
    <item name="b">
        <uuid>2</uuid>
    </item>
</section>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:08:49.100

以下 Xsl 应该可以工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="section item"/>
    <xsl:template match="/root">
        <root>
            <section>
                <xsl:apply-templates select="section"/>
            </section>
        </root>
    </xsl:template>

    <xsl:template match="item">
        <xsl:copy-of select="."/>
    </xsl:template>

</xsl:stylesheet> 
```

它给：

```
<root>
   <section>
      <item name="a">
         <uuid>1</uuid>
      </item>
      <item name="b">
         <uuid>2</uuid>
      </item>
  </section>
</root> 
```

**更新：**

对于第二个示例，您可以使用以下 Xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="root item"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
   </xsl:template>

   <xsl:template match="description">
       <xsl:copy-of select="."/>
       <section>
           <xsl:apply-templates select="following-sibling::section/item"/>
       </section>
   </xsl:template>

   <xsl:template match="section" />

   <xsl:template match="item">
      <xsl:copy-of select="."/>
   </xsl:template>

</xsl:stylesheet> 
```

# html - 处理 html 输入标签中的 utf8 编码字符

> ID：10007026
> 
> 赞同：1
> 
> 时间：2012-04-04T07:56:10.110
> 
> 标签：html, encoding, utf-8

我正在动态添加输入标签的值。这些值是从服务器返回的，在某些情况下它们是 UTF8 编码的。长话短说，输入标签的值仍然保留编码字符，例如呈现`S&aacute;bado`给用户。

在我的跨度标签中，该值根据需要呈现，这意味着输出了“Sábado”。我确实使用

```
<META http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:01:40.213

这些字符串不是“UTF8 编码”，而是**HTML 实体**。

不要 HTML 转义这些值。可能你在某个地方双重逃避它们。
如果没有有关您的代码的详细信息，很难给出更具体的建议。

# java - 在 Play framework 2.0 中使用 MySQL 数据库所需的步骤

> ID：10007029
> 
> 赞同：91
> 
> 时间：2012-04-04T07:56:20.207
> 
> 标签：java, playframework, playframework-2.0, ebean

我是 Play 框架的新手。我正在尝试将 MySQL 数据库配置为与 Play Ebeans 一起使用的数据源。

您能否解释一下使用 Play 2.0 框架配置 MySQL 所需的步骤（例如，下载驱动程序、添加依赖项等）。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-04-04T08:03:28.597

从 Play 的文档中查看[此页面。](http://www.playframework.org/documentation/2.0/JavaDatabase)它说：

> 除了主要用于开发模式的 h2 内存数据库之外，Play 2.0 不提供任何数据库驱动程序。因此，要在生产中部署，您必须将数据库驱动程序添加为应用程序依赖项。
> 
> 例如，如果使用 MySQL5，则需要为连接器添加一个依赖项：

```
val appDependencies = Seq(
    // Add your project dependencies here,
    ...
    "mysql" % "mysql-connector-java" % "5.1.18"
    ...
) 
```

SBT 将为您下载驱动程序。您还应该查看[有关管理依赖项的部分](http://www.playframework.org/documentation/2.0/SBTDependencies)。

要连接到 MySQL，您还需要更改以下设置中的一些设置`application.conf`：

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="mysql://root:secret@localhost/myDatabase" 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-04-04T08:31:30.753

正如 Carsten 所写，它可以从文档中获取，但是这里有一个摘要：

确保您已在其中配置了依赖项`/project/Build.scala`

```
val appDependencies = Seq(
    // Add your project dependencies here,
    "mysql" % "mysql-connector-java" % "5.1.18"
) 
```

在以下位置添加适当的数据库配置（替换默认 H2 配置）`/conf/application.conf`：

（不要从 URL 中删除编码）：

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://localhost/your_db_name?characterEncoding=UTF-8"
db.default.user=your_login
db.default.password=your_pass 
```

在同一个文件中找到并确保该行没有被注释：

```
ebean.default="models.*" 
```

就是这样，重新启动您的应用程序（或在开发模式下运行），然后它将创建一个 DDL 并要求您应用它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-12T09:22:05.800

我正在使用 play 2.2.0，我只需将以下行添加到项目根文件夹中的 build.sbt 中。

```
 "mysql" % "mysql-connector-java" % "5.1.27" 
```

并播放自动下载驱动程序。似乎不再需要 Build.scala 了。如上述评论员所述，应应用对 application.conf 的更改。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-21T11:35:04.167

我遇到的大多数访问 mysql 数据库的方法都没有解释如何建立连接并从模型中检索数据。在我的应用程序中，我同时使用 mongoDB 和外部 mysql 数据库。所以这就是我做事情的方式（mysql方面）：

1.  对于 Play 2.3.3，在 build.sbt 文件中的 libraryDependencies 中添加 mysql 特定行：

    ```
    libraryDependencies ++= Seq(
        "mysql" % "mysql-connector-java" % "5.1.27"
    ) 
    ```

2.  在 /conf/application.conf 文件中添加：

    ```
    db.myotherdb.driver = com.mysql.jdbc.Driver
    db.myotherdb.url = "jdbc:mysql://xxx.xxx.xxx.xxx/NameOfOtherDB?characterEncoding=UTF-8"
    db.myotherdb.user = MyOtherDbUSername
    db.myotherdb.password = MyOtherDbPass 
    ```

    如果您想使用默认数据库或您想使用的任何其他名称，您可以将“myotherdb”替换为“default”。将“xxx.xxx.xxx.xxx”替换为数据库所在服务器的 IP 地址（如果是外部数据库）或本地数据库的 localhost（或 127.0.0.1）。将“NameOfOtherDB”替换为您要使用的数据库名称，将“MyOtherDbUSername”替换为您的数据库用户名，将“MyOtherDbPass”替换为您的数据库密码。

3.  在您的模型 (/app/models/MyModel.scala) 中添加以下内容：

    ```
    val connection = DB.getConnection("myotherdb") 
    ```

4.  创建语句、查询并执行它：

    ```
    val statement = connection.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY)
    val query = "SELECT * FROM myTableName"
    val resultset = statement.executeQuery(query) 
    ```

5.  然后，您可以继续对检索到的数据进行任何操作。例如：

    ```
    while (resultset.next()) {
        resultset.getString("columnName")
    } 
    ```

    其中“columnName”是您要检索的数据库表列/字段的名称。

最后但并非最不重要的一点是，我想指出您可能希望通过调用*close()来关闭连接*

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-19T00:41:04.763

在我找到这个之前，我一直坚持我的 MySQL 配置。

最重要的事情取自@biesior 答案：

*   在项目的依赖项中添加 MySQL 连接器/J（在里面`/project/Build.scala`）
*   添加依赖后，运行`play dependencies`解析新添加的 MySQL connector/J 依赖
*   取消注释默认的 ebean 配置行`ebean.default="models.*"`
*   使用正确的字符编码正确配置 MySQL 数据库`db.default.driver=com.mysql.jdbc.Driver db.default.url="jdbc:mysql://www.sample.com:3306/test?characterEncoding=UTF-8" db.default.user=playuser db.default.pass=playuser`

它拯救了我的一天。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-09T18:15:32.730

## **播放 2.4.3 和 MYSQL 5.7.9**

通过将所有先前答案的信息拼凑在一起，我能够完成这项工作。所以这是另一个，希望对那些有类似环境的人来说是最新的或有用的。

**环境细节：（**这*是我正在使用的*）

*   玩 2.4.3 这个自带*activator-1.3.7-minimal*
*   JDK8，你应该已经有了这个，因为我认为这个版本的 play 不适用于 JDK7
*   MYSQL 5.7.9

**应用程序配置文件**

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://localhost:3306/testSchema?characterEncoding=UTF-8"
db.default.user=yourDBUserName
db.default.password=yourDBUserPass 
```

**笔记：**

*   URL 中的 testSchema 是您的数据库名称，如果您使用的是[MYSQL 工作台](https://dev.mysql.com/downloads/workbench/)之类的东西，您将在 SCHEMAS 部分下看到它。我打电话给我的 testSchema。其他人可能会称之为“myDatabase”
*   端口应该是 MYSQL 端口。不是您的应用程序端口。我放入`3306`示例是因为这通常是 MYSQL 的默认设置。

**构建.sbt**

将此行添加到您的 build.sbt 文件中。这应该在`libraryDependencies ++= Seq()`声明之后进行。

```
libraryDependencies += "mysql" % "mysql-connector-java" % "5.1.36" 
```

**最后**

*   从项目根目录运行此命令 ->`activator reload`
*   重新启动您的应用程序

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-06-27T00:56:30.407

对于**播放 2.3.1**，请按照以下步骤操作。

1）在项目的依赖项中添加MySQL连接器/J（在/project/build.sbt中）

```
libraryDependencies ++= Seq( javaJdbc, javaEbean, "mysql" % "mysql-connector-java" % "5.1.29" 
```

2）取消注释默认ebean配置行ebean.default="models.*"

3) 使用正确的字符编码正确配置 MySQL 数据库

```
db.default.driver=com.mysql.jdbc.Driver    //this is com. and not org.
db.default.url="jdbc:mysql://127.0.0.1/test?characterEncoding=UTF-8"
db.default.user=playuser
db.default.pass=playuser 
```

4) 大多数印象。在控制台中运行**重新加载**命令。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-25T06:41:29.507

使用 SBT 玩 java 项目

在“build.sbt”中将 libraryDependency 更改为 llok

```
libraryDependencies ++= Seq(
  javaJdbc,
  javaEbean,
  cache,
  javaWs,
  "mysql" % "mysql-connector-java" % "5.1.27"
) 
```

使用“activator run”运行你的项目

播放将关闭所需的 jdbc 连接器。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-14T08:26:34.550

我在带有激活器 1.3.6 的最新播放框架 2.4.x 中遇到了同样的问题。

以下是步骤。我按照这里描述的步骤[https://www.playframework.com/documentation/2.4.x/JavaDatabase](https://www.playframework.com/documentation/2.4.x/JavaDatabase)

这是我的`application.conf`

```
# MySQL DB Configuration
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://{hostname or ipaddres}/{db name}?characterEncoding=UTF-8"
db.default.username=username  // Note that user id deprecated, instead use username. Though that is not a major issue
db.default.password="password"

# JPA Configurations
jpa.default=defaultPersistenceUnit
PlayKeys.externalizeResources = false

# JavaEbean configuration
ebean.default = ["models.*"]
```

这是`build.sbt`

```
libraryDependencies ++= Seq(
  javaJdbc,
  cache,
  javaWs,
  javaJpa,
  evolutions,
  "mysql" % "mysql-connector-java" % "5.1.27"
)
```

`plugins.sbt`

```
// The Play plugin
addSbtPlugin("com.typesafe.play" % "sbt-plugin" % "2.4.3")

// Web plugins
addSbtPlugin("com.typesafe.sbt" % "sbt-coffeescript" % "1.0.0")
addSbtPlugin("com.typesafe.sbt" % "sbt-less" % "1.0.6")
addSbtPlugin("com.typesafe.sbt" % "sbt-jshint" % "1.0.3")
addSbtPlugin("com.typesafe.sbt" % "sbt-rjs" % "1.0.7")
addSbtPlugin("com.typesafe.sbt" % "sbt-digest" % "1.1.0")
addSbtPlugin("com.typesafe.sbt" % "sbt-mocha" % "1.1.0")

// Play enhancer - this automatically generates getters/setters for public fields
// and rewrites accessors of these fields to use the getters/setters. Remove this
// plugin if you prefer not to have this feature, or disable on a per project
// basis using disablePlugins(PlayEnhancer) in your build.sbt
addSbtPlugin("com.typesafe.sbt" % "sbt-play-enhancer" % "1.1.0")

// Play Ebean support, to enable, uncomment this line, and enable in your build.sbt using
// enablePlugins(SbtEbean). Note, uncommenting this line will automatically bring in
// Play enhancer, regardless of whether the line above is commented out or not.
addSbtPlugin("com.typesafe.sbt" % "sbt-play-ebean" % "1.0.0")
```

这是重要的一步。

> 配置上述步骤后，转到命令行，停止激活器并运行命令`activator run`。在我的情况下，我不断收到错误消息`unable to find mysql drivers`。运行后`activator run`，激活器实际上会下载 MySQL 驱动程序并解决依赖关系。这是解决我的问题的重要一步。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-12T07:58:39.590

对我来说，这项工作，请将以下行添加到您的依赖项中：

```
"mysql" % "mysql-connector-java" % "5.1.36" 
```

这是代码：

```
import java.sql.Connection

val driver = "com.mysql.jdbc.Driver"
val url = "jdbc:mysql://localhost/world"
val username = "root"
val password = "root"
var connection: Connection = null

try {
    // make the connection
    Class.forName(driver)
    connection = DriverManager.getConnection(url, username, password)

    // create the statement, and run the select query
    val statement = connection.createStatement()
    val resultSet = statement.executeQuery("SELECT id , name FROM bar")

    val sql: SqlQuery = SQL("select * from products order by name asc")

    while (resultSet.next()) {
        val id = resultSet.getString("id")
        val name = resultSet.getString("name")
        println(id, name)
    }
} catch {
case e: Exception => println("exception caught: " + e);
}
connection.close() 
```

# scala - 运行 ensime-source-buffer-loaded-hook 时出错 - 带有 ENSIME 和 Emacs 的 OSX

> ID：10007030
> 
> 赞同：2
> 
> 时间：2012-04-04T07:56:23.983
> 
> 标签：scala, emacs, ensime

尝试通过 Emacs 在 OSX 上启动 ENSIME 时出现以下错误

```
Error running ensime-source-buffer-loaded-hook 
```

我正在按照[github 源页面的说明进行操作](https://github.com/aemoncannon/ensime)

1.  Scala 模式正在运行
2.  ENSIME Server*似乎*已安装，有什么方法可以验证吗？
3.  插件已安装，`sbt`我`.ensime`生成了一个配置文件

启动 Emacs 给了我上述错误。当我手动尝试时，`M-x ensime`我得到以下信息：

```
Failed to connect to Swank: server process exited. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:17:02.323

好的，这就是我解决它的方法：

找到`ensime`文件夹并运行`bin/server /tmp/ensime.port`. 我得到了错误：

```
java -classpath ... org.ensime.server.Server ./port
Unrecognized VM option '+DoEscapeAnalysis'
Could not create the Java virtual machine. 
```

我不知道有什么`DoEscapeAnalysis`用，但是我尝试从中删除它`bin/server`，现在一切似乎都正常了。

见这里：[https ://gist.github.com/2300737](https://gist.github.com/2300737)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T10:00:17.820

对于我在 Windows 7 上的情况，具有相同的错误消息，但根本原因是最大堆大小的原始设置 -Xmx1512M 太大，我不得不更改为 -Xmx768M 以克服错误消息。

我还删除了字节编译的 elisp 代码，并重新启动以避免另一个“调用超时”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T23:23:53.660

我在使用 emacs 24.3.1 的 linux 上也遇到了这个错误，并通过在 bin/server 中指定 java 的完整路径来解决它。

# php - 如何在wordpress的parmalink结构中传递城市名称

> ID：10007034
> 
> 赞同：2
> 
> 时间：2012-04-04T07:56:46.590
> 
> 标签：php, wordpress

我在 Wordpress 中有一个静态首页，我想在永久链接中使用城市名称，以便我可以根据检测到的城市更改页面内容。但是，当我尝试添加规则时，它会将我带到错误的页面。这是我尝试使用的代码示例：

```
$wp_rewrite->add_rule('^city-([^/]*)/?$','index.php?cityNameParma=$matches[1]','top'); 
```

它用于显示企业目录列表的页面。单击后，我添加了一条新规则，该规则应允许内页按预期工作：

```
$wp_rewrite->add_rule('^city-([^/]*)/wpbdm-category/([^/]*)/?$','index.php?wpbdm-category=$matches[2]&cityNameParma=$matches[1]','top'); 
```

然后我从 URL 中获取城市名称

```
$wp_query->query_vars['cityNameParma']; 
```

剩下的唯一问题是如何在调用静态主页时获取该值，以及如何像对内页所做的那样发送参数值。

请帮助我，因为我已经融化了我的大脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:17:03.130

我认为您还必须将新参数添加到接受的查询参数中：

```
function my_query_vars( $qvars )
{
    $qvars[] = 'cityNameParma';
    return $qvars;
}
add_filter('query_vars', 'my_query_vars'); 
```

然后您可以像您描述的那样在模板文件中访问它：

```
global $wp_query;
$wp_query->query_vars['cityNameParma']; 
```

# android - 为特定板编译ICS源代码+冲突解决

> ID：10007041
> 
> 赞同：1
> 
> 时间：2012-04-04T07:57:10.597
> 
> 标签：android, compiler-construction, android-source

```
build/core/base_rules.mk:166: *** system/core/allwinner_a10_core/adb:
MODULE.HOST.EXECUTABLES.adb already defined by system/core/adb.  Stop. 
```

我可以理解ICS源代码的adb与实际板子提供的adb之间存在冲突导致冲突。

我想知道为了解决这个冲突我必须更改哪里和什么文件，即告诉编译器使用哪个 adb。（更一般地使用哪个库，因为我知道这是一个通用问题）

我希望通过google的参考文档更好地解释编译过程！

# javascript - 集合在模板中不起作用

> ID：10007042
> 
> 赞同：0
> 
> 时间：2012-04-04T07:57:21.387
> 
> 标签：javascript, backbone.js, underscore.js

我将模型发送到模板。该模型有一个集合。在模板中，我回显了一些变量和函数：

```
console.log(comments);
console.log(_.size(comments));
console.log(comments instanceof App.Collections.Comments);
console.log(_.pluck(comments, 'created'));
_.each(comments, function(com) {
    console.log(com);
}); 
```

前三个有效，但后两个下划线函数无效。Pluck 给出 3x undefined 并且每个都不会迭代。

```
Object { length=3, models=[3], _byId={...}, more...}
3
true
[undefined, undefined, undefined] 
```

如何使下划线功能起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:33:38.847

Backbone 集合[混合了一些 Underscore 方法，](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)因此您可以直接在集合实例上使用 Underscore 方法：

```
console.log(comments.pluck('created'));
comments.each(function(com) { console.log(com) }); 
```

演示：http: [//jsfiddle.net/ambiguous/3jRNX/](http://jsfiddle.net/ambiguous/3jRNX/)

这个：

```
console.log(_.size(comments)); 
```

对你来说很好，因为`_.size`看起来像这样：

```
_.size = function(obj) {
  return _.toArray(obj).length;
}; 
```

并`_.toArray`调用集合的`toArray`：

```
// Safely convert anything iterable into a real, live array.
_.toArray = function(iterable) {
  if (!iterable)                return [];
  if (iterable.toArray)         return iterable.toArray();
  if (_.isArray(iterable))      return slice.call(iterable);
  if (_.isArguments(iterable))  return slice.call(iterable);
  return _.values(iterable);
}; 
```

它解开集合的数据，为您提供正确的长度。以上取自 1.3.1 源，[当前 Github master 版本](https://github.com/documentcloud/underscore/blob/master/underscore.js#L310)的`_.size`实现不同，因此您的`_.size`调用可能会在升级期间中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:25:38.980

您需要直接在集合上调用 pluck，因为 Collection 类支持它：

[http://documentcloud.github.com/backbone/#Collection-pluck](http://documentcloud.github.com/backbone/#Collection-pluck)

所以而不是：

```
_.pluck(comments, 'created') 
```

你应该打电话：

```
comments.pluck('created'); 
```

# c# - IRepository 概念，在哪里创建指定的存储库

> ID：10007043
> 
> 赞同：1
> 
> 时间：2012-04-04T07:57:28.043
> 
> 标签：c#, asp.net-mvc-3, repository

我是存储库概念的新手并遇到一些问题。我在我的 MVC 应用程序中创建了简单的存储库类。

```
 public interface IRepository<TEntity> where TEntity : class
    {
        List<TEntity> FetchAll();
        IQueryable<TEntity> Query { get; }
        void Add(TEntity entity);
        void Delete(TEntity entity);
        void Save();
    }

    public class SqlRepository<T> : IRepository<T> where T : class
    {
        readonly DataContext _db;
        public SqlRepository(DataContext db)
        {
            _db = db;
        }

        #region IRepository<T> Members

        public IQueryable<T> Query
        {
            get { return _db.GetTable<T>(); }
        }

        public List<T> FetchAll()
        {
            return Query.ToList();
        }

        public void Add(T entity)
        {
            _db.GetTable<T>().InsertOnSubmit(entity);
        }

        public void Delete(T entity)
        {
            _db.GetTable<T>().DeleteOnSubmit(entity);
        }

        public void Save()
        {
            _db.SubmitChanges();
        }

        #endregion
    } 
```

在我的控制器中，我为指定的表类初始化存储库类，如下所示

```
 public class AdminController : Controller
    {

        private readonly SqlRepository<User> _userRepository = new SqlRepository<User>(new DataContext(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString()));
        private readonly SqlRepository<Order> _orderRepository = new SqlRepository<Order>(new DataContext(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString()));        

//Skip code
} 
```

但是我在我的应用程序的许多地方一次又一次地复制了这段代码。实例化这些存储库类的最佳位置是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:01:31.033

我认为您应该通过它的界面引用存储库：

```
public class AdminController : Controller
{
   private readonly IRepository<User> _userRepository;
   private readonly IRepository<Order> _orderRepository;

   public AdminController(IRepository<User> userRepository, 
                          IRepository<Order> orderRepository)
   {
       _userRepository = userRepository;
       _orderRepository = orderRepository;
   }
   //Skip code
} 
```

并通过一些依赖注入框架注入实现。

更新

您可以使用[Ninject](http://www.ninject.org)对控制器进行依赖注入。这是如何将 DependencyResolver 添加到您的应用程序的[示例。](http://www.shahnawazk.com/2010/12/dependency-injection-in-aspnet-mvc-3.html)在您的情况下，您可以通过以下方式配置内核：

```
IKernel kernel = new StandardKernel();
var connectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
kernel.Bind(typeof(DataContext)).ToMethod(context => new DataContext(connectionString));
kernel.Bind(typeof(IRepository<>)).To(typeof(SqlRepository<>)); 
```

就是这样。没有重复。依赖关系已解决。您的课程不依赖于具体的存储库。您可以轻松地模拟依赖项进行测试。

# objective-c - 在保存为状态的单例中初始化 NSMutableArray

> ID：10007044
> 
> 赞同：0
> 
> 时间：2012-04-04T07:57:38.780
> 
> 标签：objective-c

我正在使用《Learning Cocos2D》一书中的模式。我有一个 GameState 类，它是一个可以保存为状态的单例。第一次创建类 gest 时，BOOL soundOn 将 init 设置为 false，但数组 levelProgress 不存在。我对尝试初始化数组的所有行发表了评论。该类使用加载和保存数据的助手。当我尝试 1 或 2 时，我得到“在类方法中访问的实例变量 'levelProgress'”错误。

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface GameState : NSObject <NSCoding> {
    BOOL soundOn;
    NSMutableArray *levelProgress; 
}

+ (GameState *) sharedInstance;
- (void)save;

@property (assign) BOOL soundOn;
@property (nonatomic, retain) NSMutableArray *levelProgress;
@end

#import "GameState.h"
#import "GCDatabase.h"

@implementation GameState

@synthesize soundOn;
@synthesize levelProgress;

static GameState *sharedInstance = nil;

+(GameState*)sharedInstance {
    @synchronized([GameState class]) 
    {
        if(!sharedInstance) {
            sharedInstance = [loadData(@"GameState") retain];
            if (!sharedInstance) {
                [[self alloc] init]; 
                // 1\. levelProgress = [[NSMutableArray alloc] init];
            }
        }
        return sharedInstance; 
    }
    return nil; 
}

+(id)alloc 
{
    @synchronized ([GameState class])
    {        
        NSAssert(sharedInstance == nil, @"Attempted to allocate a \
                 second instance of the GameState singleton"); 
        sharedInstance = [super alloc];
        // 2\. levelProgress = [[NSMutableArray alloc] init];
        return sharedInstance; 
    }
    return nil;  
}

- (void)save {
    saveData(self, @"GameState");
}

- (void)encodeWithCoder:(NSCoder *)encoder {
    // 3\. levelProgress = [[NSMutableArray alloc] init];
    [encoder encodeBool:currentChoosenCountry forKey:@"soundOn"];
    [encoder encodeObject:levelProgress forKey:@"levelProgress"];
}

- (id)initWithCoder:(NSCoder *)decoder {
    if ((self = [super init])) {
        // 4\. levelProgress = [[NSMutableArray alloc] init];    
        soundOn = [decoder decodeBoolForKey:@"soundOn"];
        levelProgress = [decoder decodeObjectForKey:@"levelProgress"];
    }
    return self;
}
@end 
```

**解决方案：** **我刚刚添加了 av init 方法...* *

```
-(id)init {
    self = [super init];
    if (self != nil) {
        levelProgress = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:16:54.957

试试这个（这段代码可能包含语法或逻辑错误——我在记事本中写的）：

```
@interface GameState : NSObject <NSCoding>

@property (nonatomic, readwrite) BOOL soundOn;
@property (nonatomic, retain) NSMutableArray *levelProgress;

+ (GameState *)sharedState;
- (void)writeDataToCache;

@end 
```

//

```
@implementation GameState

@synthesize soundOn, levelProgress;

#pragma mark - Singleton

static GameState *sharedState = nil;

+ (void)initialize {
    static BOOL initialized = NO;
    if (!initialized) {
        initialized = YES;
        if ([[NSFileManager defaultManager] fileExistsAtPath:[NSString stringWithFormat:@"%@/gameState", pathCache]]) {
            NSData *encodedObject = [[NSData alloc] initWithContentsOfFile:[NSString stringWithFormat:@"%@/gameState", pathCache]];
            data = [NSKeyedUnarchiver unarchiveObjectWithData:encodedObject];
        }
        else
            data = [[GameState alloc] init];
    }
}
+ (GameState *)sharedState {
    return sharedState;
}

#pragma mark - Initialization

- (id)init {
    if (self = [super init]) { // will be inited while application first run
        soundOn = NO;
        levelProgress = [[NSMutableArray alloc] init];

        return self;
    }
    return nil;
}

#pragma mark - Coding Implementation

- (void)writeDataToCache { // use this method to save current state to cache
    NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject:self];
    if([[NSFileManager defaultManager] fileExistsAtPath:[NSString stringWithFormat:@"%@/GameState", pathCache]])
        [[NSFileManager defaultManager] removeItemAtPath:[NSString stringWithFormat:@"%@/GameState", pathCache] error:nil];
    [[NSFileManager defaultManager] createFileAtPath:[NSString stringWithFormat:@"%@/GameState", pathCache] contents:encodedObject attributes:nil];
    NSLog(@"GameState was saved successfully.");
}
- (void)encodeWithCoder:(NSCoder*)encoder {
    [encoder encodeBool:self.soundOn forKey:@"soundOn"];
    [encoder encodeObject:self.levelProgress forKey:@"levelProgress"];
}
- (id)initWithCoder:(NSCoder*)decoder {
    if ((self = [super init])) {
        self.soundOn = [decoder decodeBoolForKey:@"soundOn"];
        self.levelProgress = [decoder decodeObjectForKey:@"levelProgress"];

        NSLog(@"GameState was inited successfully");
        return self;
    }
    return nil;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:17:39.710

1 和 2 是一个错误 - 如果不指定实例，您将无法访问实例变量。

您可以通过将行更改为 来修复 1 `sharedInstance.levelProgress = ...`。

2 只是一个坏主意，你打破了使用`init...`方法初始化的常见约定，它可能会让其他程序员感到惊讶并导致稍后将使用相同代码的其他程序员出现问题。

3 和 4 都可以，但如果`loadData`失败，它们将不会被执行，并且对象将用普通初始化，`init`数组将是`nil`指针：

```
[[self alloc] init]; 
```

您还应该覆盖`init`并初始化那里的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:01:47.213

1 和 2 是相同的（并且不应该工作，因为 levelProgress 是一个实例变量），3 和 4 应该对数组进行编码/解码，而不是重新初始化它。

# mysql - MySQL 存储不同时区的播放列表

> ID：10007046
> 
> 赞同：0
> 
> 时间：2012-04-04T07:57:46.280
> 
> 标签：mysql, datetime, timezone, timestamp

我需要在数据库中创建一个播放列表，以了解播放器何时播放每个视频。我将使用这样的东西： `table playlist with: id, video_id, play_time`例如，如果 play_time 是 2012-04-10 14:00:00，则视频应在 2012-04-10 的 14:00:00 播放，但与用户所在的时区有关。

这个日期时间或时间戳最好使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:48:15.363

# c#-4.0 - 数据表到字符串数组

> ID：10007051
> 
> 赞同：0
> 
> 时间：2012-04-04T07:58:00.157
> 
> 标签：c#-4.0

DataTable：每个元素都是String。

```
20120206 ATM Withdrawal                                              100.00           4,000.00
20120117 CHEQUE          To : 001345889                              400.00           3,600.00
20120119 CASH                                       500.00                            4,100.00
20120209 CASH                                       600.00                            5,100.00
20120119 CASH                                       700.00                            5,800.00 
```

它必须转换为字符串数组并分解为具有 2 行和 3 行的表或字符串数​​组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:48:25.317

```
public ArrayList ConvertDT(ref DataTable dt)
{
    ArrayList converted = new ArrayList(dt.Rows.Count);
    foreach (DataRow row in dt.Rows)
    {
        converted.Add(row);
    }
    return converted;
} 
```

# cordova - Phonegap InsertID 未定义

> ID：10007053
> 
> 赞同：0
> 
> 时间：2012-04-04T07:58:10.283
> 
> 标签：cordova

我遇到了一些麻烦，我希望有人可以提供帮助。

我需要获取刚刚插入的数据库记录的 ID，以便我可以与其他表中的其他一些行进行 FK 连接。

```
CREATE TABLE IF NOT EXISTS [Jobs] ( "ID" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "SourceID" guid,"Version" integer DEFAULT 0, "IsActive" bit DEFAULT 1, "LastUpdated" datetime DEFAULT (CURRENT_TIMESTAMP), "JobGPSLocation" nvarchar(100) COLLATE NOCASE)

    Job.prototype.Insert = function () {
        "use strict";
        try {
            console.log('Started: Job.prototype.Insert');
            console.log('ID of item been inserted ' + this.SourceID);
            var sqlcmd = 'INSERT INTO Jobs(ID,';
            sqlcmd += 'SourceID,';
sqlcmd += 'JobGPSLocation,';
            sqlcmd += 'IsActive , LastUpdated, Version) VALUES ';
            sqlcmd += '(NULL,';
            sqlcmd += '"' + this.SourceID + '",';
            sqlcmd += '"' + MakeDBSafe(this.JobGPSLocation) + '",';
            sqlcmd += this.IsActive + ',';
            sqlcmd += '"' + DateToSqlite(this.LastUpdated) + '",';
            sqlcmd += this.Version;
            sqlcmd += ')';
            console.log('B4 ClientDB.Transaction ' + sqlcmd);
            if ((ClientDB !== null) && (loggeduser !== null)) {
                var tempobj = this;
                ClientDB.transaction(function (tx) { JobInsert(tx, sqlcmd, tempobj); }, JobprototypeInsertErrorHandler);
            }
            else {
                console.log('Error: Job.prototype.Insert -- ClientDB And/Or loggeduser is null');
            }
        }
        catch (e) {
            console.log('Error: Engineer.prototype.Insert' + e);
        }
        function JobInsert(tx, sqlcmd, objref) {
            console.log('Started: JobInsert');
            console.log(sqlcmd);
            tx.executeSql(sqlcmd, [],
            function (transaction, results) {
                objref.ID = results.insertId;
                console.log('JobInsert insertId ' + results.insertId);
                console.log('JobInsert rowAffected ' + results.rowAffected);
                console.log('JobInsert rows ' + results.rows);
                console.log('JobInsert rows count ' + results.rows.length);

                for (var i = 0; i < results.rows.length; i++) {
                    for (prop in results.rows) {
                        str += prop + " value :" + obj[prop] + "\n"; //Concate prop and its value from object
                    }
                }

            }, JobprototypeInsertErrorHandler);
            console.log('Finished: JobInsert');
            console.log('JobInsert ID after insert ' + objref.ID);
        }
        var JobprototypeInsertErrorHandler = function (transaction, error) {
            console.log('JobprototypeInsertErrorHandler -- ' + error);
        };
    }; 
```

但是上面的代码总是返回

> JobInsert insertId 未定义

任何帮助，将不胜感激

提前致谢

麦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:32:17.993

在插入后直接调用另一个 sql 语句来获取最大 ID，这不是最想要的方式，而是我可以让它工作的唯一方式。

# database - 在数据库中记录编辑历史的最佳方法是什么

> ID：10007056
> 
> 赞同：1
> 
> 时间：2012-04-04T07:58:15.060
> 
> 标签：database, database-design, jakarta-ee, jpa

我正在开发一个带有 Java EE 和 JPA 的系统，用户可以在其中更改实体。需要在需要时追溯更改。因此，每次进行更新时，都必须记录所有更改和用户。记录更改的最佳方法是什么。

例如，有一个名为 Investigation 的实体。它具有名称、类别、价格、数量等属性。用户可以搜索单个调查并在一个实例中更改名称，在另一个实例中，另一个用户可以更改价格。所有这些更改完成的场合以及更改的用户都需要在需要时进行追溯。

[此链接](https://stackoverflow.com/questions/2631959/best-approach-to-optimize-a-record-history-database)中描述的一种方法是将对象标记为旧编辑并创建具有更新值的新对象，但问题是来自不同实体的其他几个对象引用旧对象。

[此链接](https://stackoverflow.com/questions/3749019/what-is-the-best-way-to-keep-changes-history-to-database-fields)中描述的另一种方法是在新表中使用版本控制字段。在 JPA 中可以通过创建一个扩展主实体的新实体来实现。

在这些方法中，最佳实践是什么？是否有任何其他优化方法可以在 Java Persistence 中保留记录编辑历史？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:03:43.530

如果您不介意使用 Hibernate，[Envers](http://www.jboss.org/envers)可能对您来说很有趣。它自动执行审计，可选择附加元数据，如当前用户。

对于每个被审计的实体，它都会创建一个包含以前版本的历史表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:05:50.987

EclipseLink 支持历史。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/History](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History)

# css - 在不使用只读的情况下更改禁用的文本框字体颜色

> ID：10007059
> 
> 赞同：1
> 
> 时间：2012-04-04T07:58:22.883
> 
> 标签：css

我们有一个巨大的 C# ASP.Net Web 应用程序。现在需要更改禁用文本框中文本的字体颜色。问题是大多数文本框都设置了“禁用”属性而不是“只读”。如果我将属性更改为“只读”，我将不得不修改 javascript 代码中的所有检查位置

if(document.getElementByID('Element1').disabled == 'true') 等存在。这些检查存在于数千个地方。如果开始改变这一切，我将陷入螺旋式下降，远离人类，消失在一个我永远无法摆脱的深渊中。请帮助我。

我应该补充一点，我需要它仅适用于 IE8。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:07:03.247

以下对我有用：

```
input[disabled] {
    background-color: GrayText !important; 
    color: White !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:17:40.597

不幸的是，您无法更改 IE8 中禁用文本框的字体颜色。

# ruby - 以编程方式设置或读取 Gmail 中的辅助邮箱地址

> ID：10007063
> 
> 赞同：1
> 
> 时间：2012-04-04T07:58:37.900
> 
> 标签：ruby, oauth, gmail, oauth-2.0

是否可以通过编程方式读取或设置 Gmail 中的辅助邮箱地址？例如通过 OAuth。

我需要为 Ruby on Rails 中的 Web 应用程序执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:07:56.737

是的，您可以通过网页请求，使用 gem（例如 mechanize）或系统工具（例如 curl）来完成。

[https://support.google.com/mail/bin/answer.py?hl=en&answer=6566](https://support.google.com/mail/bin/answer.py?hl=en&answer=6566)

据我所知，没有 API 方法可以为普通的 gmail 用户更改它。

Google Apps 用户可能拥有其他功能，Google Apps 管理员也是如此，如果您能够使用这些功能，请在此处阅读有关管理员和配置的信息：

[https://developers.google.com/google-apps/email-settings/?hl=en](https://developers.google.com/google-apps/email-settings/?hl=en)

可以通过 HTTP 检索域管理员的辅助电子邮件地址：

[http://code.google.com/apis/apps/admin_settings/docs/1.0/admin_settings_developers_guide_protocol.html#RetrievingAdminSecondEmail](http://code.google.com/apis/apps/admin_settings/docs/1.0/admin_settings_developers_guide_protocol.html#RetrievingAdminSecondEmail)

更改域管理员的辅助电子邮件地址也是如此；请参阅上面的相同链接。

# java - Android如何在“强制停止”应用程序后获得最后一个重点活动

> ID：10007064
> 
> 赞同：0
> 
> 时间：2012-04-04T07:58:42.873
> 
> 标签：java, android

我正在开发具有许多活动的 android 应用程序。应用程序的要求是**当我手动“强制停止”应用程序（设置-> 应用程序-> 管理应用程序-> APP_NAME-> 强制停止）时，要显示最后一个焦点活动（UI 页面）。**我可以在***FORCESTOP** *ing 应用程序后获得最后一个重点活动吗？请帮助我提供示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:55:26.373

您应该跟踪每个活动更改并在更改发生时立即将其保存到文件（例如，在您的共享首选项中）。像这样的东西

```
protected void onResume() {
    SharedPreferences.Editor edit =  PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext()).edit();
    edit.putString("LastActiveActivity", this.getClass().getName());
    edit.commit();
    super.onResume();
} 
```

确保将当前活动保存在**所有**`onResume()`活动的方法中。

 **当您重新启动时，您可以从您的偏好中读取最后一个活动。这应该在`onCreate()`您的主要活动的方法中完成（在您的清单中指定为“LAUNCHER”的方法）。然后用你读过的名字开始活动。**

# c# - 禁止在进程中创建窗口

> ID：10007065
> 
> 赞同：1
> 
> 时间：2012-04-04T07:58:43.343
> 
> 标签：c#, process

我正在创建一个流程来做一些工作。但该过程正在启动一个黑色窗口（如 cmd）。我试图设置 CreateNoWindow = true 但这没有帮助。

是否有另一种方法来禁止创建窗口？

这是我的代码：

```
var worker1 = new Process();

worker1.EnableRaisingEvents = true;
worker1.StartInfo.CreateNoWindow = true;
worker1.StartInfo.ErrorDialog = true;
worker1.StartInfo.Arguments = job.BtcFilePath;
worker1.StartInfo.FileName = job.ExeFilePath;
worker1.Exited += new EventHandler(Worker1Exited);

Processors.Add(worker1);

Processors.Last().Start();
Processors.Last().PriorityClass = ProcessPriorityClass.BelowNormal; 
```

*处理器是处理器列表

BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:08:18.473

```
worker1.StartInfo.CreateNoWindow = true;
worker1.StartInfo.UseShellExecute = false; 
```

在类似的情况下，这对我有用。

```
worker1.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

这似乎是另一种选择。（没有对此进行测试，但在浏览[http://www.dotnetperls.com/png](http://www.dotnetperls.com/png)时发现了这个）

# android - 单击 main.xml 中定义的按钮时如何启动另一个活动

> ID：10007070
> 
> 赞同：0
> 
> 时间：2012-04-04T07:59:15.930
> 
> 标签：android, button, android-activity, android-intent

我有两节课。一个是Main，另一个是HelloWorld。当我单击 main.xml 中定义的按钮时，我希望它显示 HelloWorld 类中定义的消息以启动。当我单击按钮时，它不执行任何操作。代码如下。如果还有什么需要提出的，请告诉我。谢谢

主.java

```
public class Main extends MapActivity implements LocationListener {
/** Called when the activity is first created. */
MapView map;
long start;
long stop;
int x, y;
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;
LocationManager lm;
String towers;
int lat ;
int longi; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button orderButton = (Button)findViewById(R.id.button1);

    orderButton.setOnClickListener(new View.OnClickListener() {

      public void onClick(View view) {
        Intent intent = new Intent(Main.this, HelloWorld.class);
        startActivity(intent);
      };
    });

    map = (MapView)findViewById(R.id.mv);
    map.setBuiltInZoomControls(true);

    Touchy t = new Touchy();
    overlayList = map.getOverlays();
    overlayList.add(t);

    d = getResources().getDrawable(R.drawable.pinn);

    //Placing pintpoint
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);

    if (location != null){
        lat = (int) (location.getLatitude() *1E6);
        longi= (int) (location.getLongitude() *1E6);

        GeoPoint ourLocation = new GeoPoint(lat,longi);
        OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
        CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
        custom.insertPinpoint(overlayItem);
        overlayList.add(custom);
    }else{
       Toast.makeText(Main.this, "Couldnt get provider", Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub

    super.onPause();
    lm.removeUpdates(this);
}

     @Override
protected void onResume() {
    // TODO Auto-generated method stub

    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this );
}

    @Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent e, MapView m){
    if (e.getAction() == MotionEvent.ACTION_DOWN){
        start = e.getEventTime();

    }
    if (e.getAction() == MotionEvent.ACTION_UP){
        stop = e.getEventTime();
        x = (int) e.getX();
        y = (int) e.getY();
        touchedPoint = map.getProjection().fromPixels(x, y);

    }
    if (stop - start > 1500){
        AlertDialog alert = new AlertDialog.Builder(Main.this).create();
        alert.setTitle("Pick Option");

        alert.setButton("Hello", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

    OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
        CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

        }
        });
    alert.setButton3("Get Address", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
    try{
    List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() /      1E6, touchedPoint.getLongitudeE6() / 1E6 , 1);
                if (address.size() > 0){
                    String display = "";
        for (int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){

                display += address.get(0).getAddressLine(i) + "\n";
                    }
    Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                    t.show();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally{
            }
        }});
    alert.setButton2("Toggle View", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                if (map.isSatellite()){
                    map.setSatellite(false);
                    map.setStreetView(true);
                }else{
                    map.setStreetView(false);
                    map.setSatellite(true);
                }
            }
});

    alert.setButton("Place a Pin", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

    OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
           CustomPinPoint custom = new CustomPinPoint(d,Main.this); 
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

            }

        });
        alert.show();
        return true;
    }

        return false;
    }

}

public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int) (l.getLatitude() *1E6);
    longi = (int) (l.getLongitude() *1E6);
    GeoPoint ourLocation = new GeoPoint(lat,longi);
    OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
    CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);

}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

    } 
```

HelloWorld.java

```
import com.google.android.maps.OverlayItem;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class HelloWorld extends Activity
{

        protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v)
            {
                Toast.makeText(HelloWorld.this, "you clicked on button![enter image description here][3]", Toast.LENGTH_LONG).show();
            }
}); 
```

} }

我也写过

```
 <activity android:name=".HelloWorld" /> 
```

在我的清单中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:05:32.640

您的第二个活动`HelloWorld`没有设置内容视图，因此它找不到`Button`并且您抛出`NullPointerException`. 您必须设置一个`setContentView`包含`Button`id的 contentView，`R.id.button1`就像您在`MainActivity`.

您的`HelloWorld` 活动：

```
public class HelloWorld<AlertDialogActivity> extends Activity{

             protected void onCreate(Bundle icicle) {
             super.onCreate(icicle);
             setContentView(R.layout.layout_hello);

             final Button button = (Button) findViewById(R.id.button1);
             button.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View view) {
      Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
                 }
             });
    }
} 
```

where`R.layout.layout_hello`代表文件夹中的一个 xml 文件`res/layout`（名为`layout_hello.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button1" />
</LinearLayout> 
```

这和你在`MainActivity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:06:12.573

你为什么评论那条线？`//setContentView(R.layout.content_layout_id);`

活动正在寻找的按钮`R.id.button1`是一个空视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:36:09.763

是的，您必须使用 setContentView()

取消注释该代码并重试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:04:20.503

简单的方法

包括`android:onClick="onClickMyButton"`作为`Button`in的属性`main.xml`

`onClickListener`从此删除`Button`

现在在您的主要活动中定义此方法

```
public void onClickMyButton(View view){

Intent intent = new Intent(Main.this, HelloWorld.class);
        startActivity(intent);

} 
```

现在启动您的应用程序它应该可以正常工作

# php - 使用 PHP 的 Google 日历 ACL 规则

> ID：10007071
> 
> 赞同：0
> 
> 时间：2012-04-04T07:59:20.717
> 
> 标签：php, google-calendar-api

为什么它返回此输出“错误：请求的 URL 返回错误：400”而不是发送请求

```
$headers = array("授权：GoogleLogin auth= " . $this->auth . "",
                      "GData 版本：2.0",
                      "传输编码：分块",
                      “内容类型：应用程序/原子+xml”
                      );

 `$xmlstr = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'
                    xmlns:gd='http://schemas.google.com/g/2005'
                    gd:etag='W/\"DU4ERH47eCp7ImA9WxRVEkQ.\"'>
                    <category scheme='http://schemas.google.com/g/2005#kind'
                    term='http://schemas.google.com/acl/2007#accessRule'/>
                    <gAcl:scope type='user' value='$email_id'></gAcl:scope>
                    <gAcl:role value='http://schemas.google.com/gCal/2005#read'></gAcl:role>
                </entry>";

    $url = "http://www.google.com/calendar/feeds/$cal_id/acl/full/user%3A".urlencode($email_id)."";

    curl_setopt($this->curl, CURLOPT_URL, $url);
    curl_setopt($this->curl, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($this->curl, CURLOPT_CUSTOMREQUEST, 'DELETE');
    curl_setopt($this->curl, CURLOPT_POSTFIELDS, $xmlstr);
    curl_setopt($this->curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($this->curl, CURLOPT_AUTOREFERER, true);
    curl_setopt($this->curl, CURLINFO_HEADER_OUT, false);
    curl_setopt($this->curl, CURLOPT_VERBOSE, true);
    curl_setopt($this->curl, CURLOPT_FAILONERROR, true);
    curl_setopt($this->curl, CURLOPT_COOKIESESSION, true);
    curl_setopt($this->curl, CURLOPT_HEADER, 0);
    curl_setopt($this->curl, CURLOPT_UNRESTRICTED_AUTH, true);

    $response = curl_exec($this->curl);` 

            回答 #1

赞同：1

时间：2012-04-12T03:16:04.517

请注意 PHP API 使用的是 V1，当然是最旧的版本 :( 因此，我们用于更新 ACL 的 xml 与 V2 上的指南略有不同。

我正在使用的是：

```
<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007' >
          <category scheme='http://schemas.google.com/g/2005#kind'
            term='http://schemas.google.com/acl/2007#accessRule'/> 
```

请注意我不要使用“gd:etag”元素。

其余的 xml 对你来说是一样的。另一个建议是将您的 url 更改为**HTTPS**，而不是**HTTP**，并添加 'xoauth_requestor_id=' 。urlencode($USER) 如果需要。

然后你准备好了，让我们知道它是否有帮助。  

```

# wcf - 通过 Windows phone 的 WCF 在第一次不起作用

> ID：10007074
> 
> 赞同：1
> 
> 时间：2012-04-04T07:59:23.627
> 
> 标签：wcf, silverlight, windows-phone-7

我有一个 Windows Phone 应用程序，它使用 WCF 服务在数据库中获取和存储数据。我添加了对 WCF 服务的服务引用，VS 生成了客户端代理和配置文件。

当我尝试调用服务器上的方法时，问题就开始了。

第一次调用导致超时，服务器甚至没有收到请求。 **只有在第二次**调用中，服务器才会收到请求。

```
Win7MobileServiceClient client = new Win7MobileServiceClient();

client.GetUserCompleted += new EventHandler<ServiceReference1.GetUserCompletedEventArgs>(client_GetUserCompleted);

client.GetUserAsync(int.Parse(txtID.Text)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:11:23.670

这可能是由于服务的预热过程。**第一次调用 WCF 服务需要一些时间（我认为正在编译它）**。如果您回收应用程序池，它将再次发生。

为了确保尝试这个

1.  部署 WCF 服务
2.  从 Windows 调用 WCF 服务
3.  从 windows mobile 调用它

如果是这种情况，可能原因是 Windows 移动客户端中的默认超时可能小于标准（1 分钟）。您可以采取多种解决方案

*   增加 windows 移动超时
*   每次部署时调用服务（例如在 Selenium 中进行某种冒烟测试。这种方法的问题是在回收应用程序池后您将再次遇到同样的问题）

您可以检查这个类似的问题：[WCF Performance Slow for the first call](https://stackoverflow.com/questions/3350960/wcf-performance-slow-for-the-first-call)

# sql - postgresql 最后插入 id 并发

> ID：10007075
> 
> 赞同：2
> 
> 时间：2012-04-04T07:59:25.523
> 
> 标签：sql, postgresql

我想插入一个用户并获取它的 ID，例如最后一个插入 ID。通过 sql。

```
CREATE OR REPLACE FUNCTION create_user(registration_ip inet)
  RETURNS integer AS
insert into users(registration_ip)
   values($1);
select max(id) from users;
LANGUAGE sql VOLATILE 
```

这个功能安全吗？我的意思是并发安全吗？例如，正在同时创建 n 个用户，是否保证它会返回当前用户的 id？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:06:19.257

使用[返回](http://www.postgresql.org/docs/current/interactive/sql-insert.html)：

```
CREATE OR REPLACE FUNCTION create_user(registration_ip inet)
  RETURNS integer AS
INSERT INTO users(registration_ip)
   VALUES($1) RETURNING id;
LANGUAGE sql VOLATILE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:03:44.340

不，这**不安全**（而且速度非常慢！）

您应该为此目的使用序列。

如果 id 列定义为序列，则会自动为您创建一个序列，您可以使用 检索最后生成的数字`currval('users_id_seq')`。

# javascript - 调用 onClick 函数并将元素的 data-* 属性中的值传递给它

> ID：10007078
> 
> 赞同：3
> 
> 时间：2012-04-04T07:59:34.123
> 
> 标签：javascript, jquery

我有这样的链接：

```
<li><a href="#" data-value="Codes">Get codes</a></li>
<li><a href="#" data-value="Product">Get products</a></li> 
```

我怎样才能做到这一点，以便当我单击链接时调用一个函数，传递数据值中包含的值？

```
function refreshGrid(value) { } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:03:13.917

尝试以下操作：

```
$('li > a[href="#"][data-value]').click(function (e) { // On click of all anchors with a data-value attribute and a href of # that are immediate children of li elements (nb this selector can be modifed to suit your needs)
  e.preventDefault(); // prevent the default (navigate to href)
  refreshGrid($(this).data('value')); // call your refreshGrid function with the value contained in the 'data-value' attribute
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:02:33.537

```
var linkValue = $("li a").attr("data-value"); 
```

# 编辑：更好的例子

```
$("li a").click(function () {
    var myDataValue = $(this).attr("data-value");
    refreshGrid(myDataValue);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:07:34.853

[这是一个快速示例](http://jsfiddle.net/b2Qpr/1/)

```
$('ul').on('click','a[data-value]',function(){
    refreshGrid(this.getAttribute('data-value'));
    return false;
}); 
```

# javascript - 单击按钮时，验证是否必须使用 Jquery 将至少一行移动到自定义表中

> ID：10007079
> 
> 赞同：3
> 
> 时间：2012-04-04T07:59:40.703
> 
> 标签：javascript, jquery, validation

我首先在我的项目中使用 MVC3，EF 模型。

我有一个包含 4 个表的视图，然后`CustomPickedTable,`每当用户单击这 4 个表中的行时，我都会看到该行移动到`CustomPickedTable`表，这是它的代码：

```
<script type="text/javascript">
        $(function () {
            $('.questionsForSubjectType tbody tr').click(function () {
                var origin = $(this).closest('table').attr('id');
                $(this)
        .appendTo('#CustomPickedTable tbody')
        .click({ origin: origin }, function (evt) {
            $(this).appendTo('#' + evt.data.origin);
                });
            });
        });
</script> 
```

我正在寻找的是某种验证，即当用户单击提交按钮时，应该有一条规则确保这 4 个表中的每一个中的至少一行必须移动到，`CustomPickedTable`如果不是，它不应该发布表单但是给用户一个错误信息。

这是我的 4 个表之一，这些表是由 MVC 中带有剃刀的 foreach 循环生成的

```
 <div class="questionsForSubjectType" id="questionsForSubjectType_1">              
              <table class="box-style2" id="RandomID_c5b9bc7a-2a51-4fe5-bd3a-75b4b3934ade">
                <thead>
                  <tr>
                    <th>
                    Kompetens
                    </th>
                  </tr>
                </thead>
                  <tbody>
                   <tr>
                     <td data-question-id="16">Har konsulten F&#246;rm&#229;ga att l&#228;ra sig nytt?</td>   
                   </tr>
                  </tbody>
                  <tbody>
                   <tr>
                     <td data-question-id="17">Har konsulten r&#228;tt kompetens?</td>   
                   </tr>
                  </tbody>
               </table>
    </div> 
```

我的自定义表：

```
<table id="CustomPickedTable" class="box-style2">
<thead><tr><th>Choosen Questions</th></tr></thead>
<tbody>
</tbody>
</table> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:41:51.327

可能有更好的方法。

但是我会为您可以移动的每个 TD 添加一个数据属性或某个类，并在提交时检查每个所需的值。

在这里创建了一个例子：http: [//jsfiddle.net/y35Qf/1/](http://jsfiddle.net/y35Qf/1/)

基本上，我添加了一个名为 data-row 的属性，每个表都有自己的值，在提交时我要求这些值中的每一个都在 CustomPickedTable 中 - 如果没有，我会提醒缺少某些东西 - 否则提醒成功。

您可以轻松添加，以便提醒哪些行丢失或您想要的任何其他验证。

这是你想要的吗？

# android - 我的应用程序适用于 android 2.3.3 到 android 3.1，但在 4.0 + 上停止并出现错误

> ID：10007081
> 
> 赞同：5
> 
> 时间：2012-04-04T07:59:44.357
> 
> 标签：android, crash, splash-screen, android-4.0-ice-cream-sandwich

我昨天刚刚发布了我的第一个 android 应用程序。我没有在 android 4.0 上进行测试，我的朋友只是告诉我我的应用在他的 Galaxy S2 (4.0.3) 上崩溃了

在我的闪屏活动中几秒钟后它就崩溃了，它只是几行代码，也许你们可以检查一下：

```
 @Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splashscreen);

    try
    {

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    overridePendingTransition(0 , 0);

    // thread for displaying the SplashScreen
    Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
               // finish();

                try
                {
                  /*
                   Intent i = new Intent();
                    i.setClass(SplashScreen.this, MainActivity.class);
                    startActivity(i);
                    finish();
                    */
                }
                catch(Exception e)
                {
                    ki(e);
                }

                stop();
            }
        }
    };

    splashTread.start();

    }
    catch(Exception ex)
    {
        ki(ex);
    }

 }

@Override
public void onBackPressed() {
   return;
}   

 //Toaster
    public void ki(Exception message)
    {

    Toast myToast = Toast.makeText(getApplicationContext(), message.toString(), 1);
    myToast.show();

} 
```

在 Android 2.3 到 3.1 上运行良好，但我无法弄清楚 4.0+ 有什么问题

请帮忙谢谢！

编辑：

如果我删除我的线程一切正常。所以我的新问题是...... 4.0 中的线程有什么新功能？我只是运行了一个什么都不做的线程，甚至我也遇到了崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T08:20:32.553

`Thread.stop()`, `resume()`, 并且`suspend()`不再适用于 Android 4.0。源代码如下：

```
/**
 * Requests the receiver Thread to stop and throw ThreadDeath. The Thread is
 * resumed if it was suspended and awakened if it was sleeping, so that it
 * can proceed to throw ThreadDeath.
 *
 * @deprecated because stopping a thread in this manner is unsafe and can
 * leave your application and the VM in an unpredictable state.
 */
@Deprecated
public final void stop() {
    stop(new ThreadDeath());
}

/**
 * Throws {@code UnsupportedOperationException}.
 *
 * @throws NullPointerException if <code>throwable()</code> is
 *         <code>null</code>
 * @deprecated because stopping a thread in this manner is unsafe and can
 * leave your application and the VM in an unpredictable state.
 */
@Deprecated
public final synchronized void stop(Throwable throwable) {
    throw new UnsupportedOperationException();
} 
```

由于这个原因，很多应用程序在 Android 4.0 上崩溃了。这不是谷歌的错。从几年前开始，Java SDK 一直不鼓励在线程上使用 stop()。

引用更新日志：

```
Commit: a7ef55258ac71153487357b861c7639d627df82f [a7ef552]
Author: Elliott Hughes <enh@google.com>
Date: 2011-02-23 6:47:35 GMT+08:00

Simplify internal libcore logging.

Expose LOGE and friends for use from Java. This is handy because it lets me use
printf debugging even when I've broken String or CharsetEncoder or something
equally critical. It also lets us remove internal use of java.util.logging,
which is slow and ugly.

I've also changed Thread.suspend/resume/stop to actually throw
UnsupportedOperationException rather than just logging one and otherwise
doing nothing.

Bug: 3477960
Change-Id: I0c3f804b1a978bf9911cb4a9bfd90b2466f8798f 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T08:41:22.513

正如@Yuku 所说，`Thread.stop()`在 ICS 中并没有以某种方式被破坏，它被专门更改为抛出异常，因为它不安全：

[http://developer.android.com/reference/java/lang/Thread.html#stop](http://developer.android.com/reference/java/lang/Thread.html#stop) ()

> 公共最终同步无效停止（Throwable throwable）
> 
> 自：API 级别 1 此方法已弃用。因为以这种方式停止线程是不安全的，并且会使您的应用程序和 VM 处于不可预测的状态。
> 
> 引发 UnsupportedOperationException。如果 throwable() 为 null，则抛出 NullPointerException

如果你希望你的线程被强制停止，而不是[`threadName.interrupt()`](http://developer.android.com/reference/java/lang/Thread.html#interrupt%28%29)在你的线程外部使用。在你的线程生命周期中自然结束编程，以便在任务完成时自然停止。

在您的示例中，您可以简单地删除命令`stop()`，因为线程将在其方法结束时自然停止执行`run()`。

**EDIT** `finish()`是要求您`Activity`完成，而不是您的`Thread`. 在上面的示例中，`Thread`无论如何都会自然退出，但请不要与停止 a`Thread`和完成a 混淆，`Activity`因为它们是完全不同的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T08:16:33.330

`stop()`我在 Android 4.0上使用时遇到了同样的问题。尝试`finish()`改用，这解决了我的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T08:13:45.373

我想这`stop()`不再适用于 ICS。

我[在 droidnova.com](http://www.droidnova.com/how-to-create-a-splash-screen,561.html)上的教程没有更新为在 ICS 上工作，抱歉，没有时间。今天我将使用处理程序而不是单独的线程。更容易使用和更强大。

# css - What's the difference between CSS3 translate method and CSS2 relative positioning?

> ID：10007093
> 
> 赞同：10
> 
> 时间：2012-04-04T08:00:29.023
> 
> 标签：css, css-transforms

It seems that both of them could make the element move from its current position. Are these two methods interchangeable?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:07:03.920

The two methods are not exactly the same thing: Translating an element will not require to change its `top`, `left`, `right` or `bottom` CSS properties, so in the same way `offsetTop/offseLeft` Javascript properties are not affected by a CSS translation. Beside, the position of the element could be also `static` (and thus no `z-index` is required)

If you use `position: relative` instead, you will change those properties to visually achieve the same effect.

Example Fiddle: [http://jsfiddle.net/LkLey/](http://jsfiddle.net/LkLey/)

Of course if you have to deal with old browser (like `IE8` or `FF2`) the necessary choice is relative positioning, otherwise I can't see a clear convenience on choosing one of the two methods (well, to be honest relative positioning has no need of multipe prefixes `-moz-`, `-webkit-` ... to work everywhere) so the choice is up to you (and it depends on the layout).

# android - java.lang.IllegalStateException：指定的孩子已经有一个父母

> ID：10007094
> 
> 赞同：99
> 
> 时间：2012-04-04T08:00:30.143
> 
> 标签：android, android-layout, android-fragments

我正在使用片段，当我第一次实例化片段时。但我第二次得到这个例外。我找不到出现错误的行？

```
 04-04 08:51:54.320: E/AndroidRuntime(29713): FATAL EXCEPTION: main
    04-04 08:51:54.320: E/AndroidRuntime(29713): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3013)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.view.ViewGroup.addView(ViewGroup.java:2902)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.view.ViewGroup.addView(ViewGroup.java:2859)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.view.ViewGroup.addView(ViewGroup.java:2839)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.NoSaveStateFrameLayout.wrap(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.BackStackRecord.run(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.os.Handler.handleCallback(Handler.java:587)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.os.Handler.dispatchMessage(Handler.java:92)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.os.Looper.loop(Looper.java:132)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at android.app.ActivityThread.main(ActivityThread.java:4126)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at java.lang.reflect.Method.invokeNative(Native Method)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at java.lang.reflect.Method.invoke(Method.java:491)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
    04-04 08:51:54.320: E/AndroidRuntime(29713):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我单击列表片段的元素时所做的事情。

```
// If we are not currently showing a fragment for the new
 // position, we need to create and install a new one.
 RouteSearchFragment df = RouteSearchFragment.newInstance(index);

 // Execute a transaction, replacing any existing fragment
 // with this one inside the frame.
 FragmentTransaction ft = fragmentManager.beginTransaction();
 ft.replace(R.id.details_full, df);
 ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
 ft.commit(); 
```

第一次就ok了，我点list中的element2，也ok；但是当我返回 element1 时，我得到了这个错误。

谢谢大家！

* * *

## 回答 #1

> 赞同：369
> 
> 时间：2012-10-19T00:47:40.613

很抱歉发布一个旧问题，但我能够使用完全不同的解决方案来解决它。我遇到了这个异常，但我改变了 onCreatView 覆盖的第一行：

```
View result = inflater.inflate(R.layout.customer_layout, container); 
```

...对此：

```
View result = inflater.inflate(R.layout.customer_layout, container, false); 
```

我不知道为什么，但使用接受布尔值作为第三个参数的覆盖来修复它。我认为它告诉片段和/或活动不要使用“容器”作为新创建的视图的父级。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-04-15T11:54:50.517

我多次面临这个问题。请添加以下代码以解决此问题：

```
@Override
    public void onDestroyView() {
        super.onDestroyView();
        if (view != null) {
            ViewGroup parentViewGroup = (ViewGroup) view.getParent();
            if (parentViewGroup != null) {
                parentViewGroup.removeAllViews();
            }
        }
    } 
```

谢谢

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-04-04T12:09:36.360

当您在课堂上覆盖`OnCreateView`时，您`RouteSearchFragment`是否有

```
if(view != null) {
    return view; 
} 
```

代码段？

如果是这样，删除 return 语句应该可以解决您的问题。

如果您不想重新生成视图数据，则可以保留代码并返回视图，并且 onDestroyView() 方法可以从其父视图中删除此视图，如下所示：

```
 @Override
    public void onDestroyView() {
        super.onDestroyView();
        if (view != null) {
            ViewGroup parent = (ViewGroup) view.getParent();
            if (parent != null) {
                parent.removeAllViews();
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-07-18T07:52:00.613

如果你有这个说法..

```
View view = inflater.inflate(R.layout.fragment1, container);//may be Incorrect 
```

然后试试这个.. 添加 false 作为第三个参数.. 可能会有所帮助..

```
View view = inflater.inflate(R.layout.fragment1, container, false);//correct one 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-09-04T11:29:51.843

我在一个片段中有这段代码，如果我尝试回到这个片段，它就会崩溃

```
if (mRootView == null) {
    mRootView = inflater.inflate(R.layout.fragment_main, container, false);
} 
```

在这个线程上收集答案后，我意识到 mRootView 的父级仍然将 mRootView 作为子级。所以，这是我的解决方法。

```
if (mRootView == null) {
    mRootView = inflater.inflate(R.layout.fragment_main, container, false);
} else {
    ((ViewGroup) mRootView.getParent()).removeView(mRootView);
} 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-12-19T20:37:24.803

当 onCreateView() 返回的视图不是被膨胀的视图时，也会发生这种情况。

例子：

```
View rootView = inflater.inflate(R.layout.my_fragment, container, false);

TextView textView = (TextView) rootView.findViewById(R.id.text_view);
textView.setText("Some text.");

return textView; 
```

* * *

使固定：

```
return rootView; 
```

代替：

```
return textView; // or whatever you returned 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-13T14:00:38.497

我遇到了这个问题，无法用 Java 代码解决。问题出在我的 xml 上。

我试图将 textView 添加到容器中，但已将 textView 包装在 LinearLayout 中。

这是原始的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:paddingLeft="16dp"
        android:paddingRight="16dp"
        android:textColor="#fff"
        android:background="?android:attr/activatedBackgroundIndicator"
        android:minHeight="?android:attr/listPreferredItemHeightSmall"/>

</LinearLayout>
```

现在删除了 LinearLayout：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:paddingLeft="16dp"
        android:paddingRight="16dp"
        android:textColor="#fff"
        android:background="?android:attr/activatedBackgroundIndicator"
        android:minHeight="?android:attr/listPreferredItemHeightSmall"/>
```

这对我来说似乎并不多，但它确实起到了作用，而且我根本没有更改我的 Java 代码。这一切都在xml中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-04T08:21:17.203

您正在将 a 添加`View`到 a`layout`中，但 View 已经在另一个 中`layout`。一个视图不能在多个地方。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-18T06:32:11.520

此解决方案可以帮助：

```
public class FragmentItem extends Android.Support.V4.App.Fragment
{
    View rootView;
    TextView textView;

    public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (rootView != null) 
        {
            ViewGroup parent = (ViewGroup)rootView.Parent;
            parent.RemoveView(rootView);
        } else {
            rootView = inflater.Inflate(Resource.Layout.FragmentItem, container, false);
            textView = rootView.FindViewById<TextView>(Resource.Id.textViewDisplay);            
        }
        return rootView;
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-26T10:45:59.413

我通过设置to解决`attachToRoot`了它。`inflater.inflate()``false`

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_overview, container, false);
    return view;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-15T07:38:32.457

在您的 xml 文件中，您应该将 layout_width 和 layout_height 从 wrap_content 设置为 match_parent。它对我来说是固定的。

```
<FrameLayout
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

# solr - 使用 Solr 返回网页摘要

> ID：10007095
> 
> 赞同：0
> 
> 时间：2012-04-04T08:00:42.173
> 
> 标签：solr, nutch

我已经使用 Nutch 成功爬取了一个站点，并尝试使用 Solr 作为索引器/搜索器返回突出显示的摘要。因此，如果我查询“海洋”，那么我想仅从包含该查询词的网页文本（不是标题或 URL）中返回一个 20-30 字的摘要。

我已将 Nutch schema.xml 复制为我的 Solr schema.xml。

所以我有两个问题： 1\. Nutch schema.xml 中的“content”字段是网页正文元素的字段吗？2\. 如果这个字段没有被存储，有没有办法让 Solr 在搜索时检索该字段，以便突出显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:54:23.107

1.  我很长时间没有使用 Nutch，但我认为假设“内容”是您想要突出显示的领域是相当安全的。

2.  您需要存储该字段才能使用突出显示，如果您想使用[FastVectorHighlighting](http://wiki.apache.org/solr/HighlightingParameters)，您需要为该字段启用以下属性：termVectors、termPositions 和 termOffsets。

如果您使用 FVH，您还可以在 Solr 3.5 及更高版本中使用边界扫描器。

# objective-c - 如何修复 Xcode 功能“填补空白”

> ID：10007096
> 
> 赞同：0
> 
> 时间：2012-04-04T08:00:43.827
> 
> 标签：objective-c, xcode4.3

我的 XCode 4.3.2 有问题。
XCode 具有“填补空白”的功能。

我们输入“uil”，XCode 显示带有淡白色和下拉菜单的“UILabel”文本。

但是我的 Xcode 不能像上面提到的那样工作。

在博客中，说
1\. 打开管理器。
2\. 选择标签“项目”。
3\. 选择您的项目名称。
4\. 点击带有“派生数据”部分的“删除”按钮。

我确实在上面提到过，它看起来工作得很好。
但过了一会儿，它就不再起作用了。
我怎么解决这个问题？
谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:32:29.550

我没有直接的答案，但搜索“代码完成”一词可能会得到更好的结果，因为这就是该功能在英语中的名称。

# .net - WCF NetMSMQBinding 与非 WCF 客户端

> ID：10007097
> 
> 赞同：1
> 
> 时间：2012-04-04T08:00:47.087
> 
> 标签：.net, wcf, netmsmqbinding

我有一个与 WCF netMsmqBinding 相关的查询。

`netMsmqBinding`非 .Net 客户端是否可以使用 wcf ？说一个Java客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:09:30.577

否 - 所有名为 'net'* 的绑定都不可互操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:19:40.123

您可以使用 MsmqIntegrationBinding 允许非 .net 客户端通过 msmq。

但是，要支持 java 客户端，您需要弥合 java/msmq 互操作差距。

有几种方法可以做到这一点，请参见[此处](https://stackoverflow.com/questions/506022/java-and-msmq)

# facebook-fql - Facebook：用于获取托管页面上所有帖子的 FQL 会引发两个异常之一

> ID：10007099
> 
> 赞同：0
> 
> 时间：2012-04-04T08:01:08.053
> 
> 标签：facebook-fql, restfb

我正在使用 RestFB 客户端来获取 Facebook 页面的所有 post_id。

查询是

```
select post_id from stream where source_id=265813166783408 
```

我正在查询的页面的 id if 在哪里。可以在[这里找到](http://www.facebook.com/pages/Rowz/265813166783408)

我最初尝试在没有访问令牌的情况下执行此操作。这给出了**104：需要**来自 Facebook 的有效签名错误。

我查了这个错误，许多人在 SO 上给出的解决方案是使用访问令牌。但是，如果我尝试使用 accessToken（具有权限：manage_pages、publish_stream、read_stream、offline_access、read_insights），那么 Facebook 会给出不同的错误**190：Impersonated access tokens can only be used with the Graph API**。

这是否意味着我不应该使用 FQL 来获取页面帖子。Facebook 文档没有在这些行中提及任何内容，但就像我说的那样，它在这两个错误之间不断交替。

PS：我可以使用带有访问令牌的 Graph API 来获取帖子，但对于我的特定场景，我觉得 FQL 会是一个更好的选择，因为我可以将此查询嵌套到评论表上的查询中（最终目标）。

谢谢你。

**更新：**

请参阅 Facebook 开发人员以获取有关[此特定问题](http://developers.facebook.com/bugs/416084548430182?ref=notif&notif_t=open_graph_comment)的讨论如果您使用的是 RestFB 库，则另请参阅[相关问题](https://github.com/revetkn/restfb/issues/34)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:57:31.203

我们遇到了同样的问题，发现这是使用 fbclient 库和页面访问令牌的问题。我们切换到直接调用 API（使用 Apache HttpClient），并且我们的 FQL 使用页面访问令牌运行良好。

# internet-explorer - 重定向IE7浏览器但不是windows phone 7

> ID：10007100
> 
> 赞同：1
> 
> 时间：2012-04-04T08:01:08.630
> 
> 标签：internet-explorer, redirect, windows-mobile

我无法调试和测试 Windows 7 手机，但是我有以下代码

```
<!--[if lte IE 7]><meta http-equiv="refresh" content="0; url=/index_ie.html" /><script type="text/javascript"><![CDATA[ window.top.location = "/index_ie.html";]]></script><![endif]--> 
```

但是我刚听朋友说这对他的windows手机有影响，有这个代理：

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows Phone OS 7.0; Trident/3.1; IEMobile/7.0) 
```

有没有办法排除 Windows 移动浏览器触发此重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:42:34.440

他的 Windows 手机具有 IE Mobile 7，因此 lte IE7 评估为 true 并触发重定向是有道理的。你可以试试这个：

```
<!--[if !IEMobile]>
<![if lte IE 7]>      
...
<![endif]>
<![endif]--> 
```

有关更多想法，请参见此处：[Conditional Comments to target Windows Phone 7 Internet Explorer 9](https://stackoverflow.com/questions/8865130/conditional-comments-to-target-windows-phone-7-internet-explorer-9)和[Is there a way to target Windows Mobile 7.5 browser using conditional comments？](https://stackoverflow.com/questions/8500684/is-there-a-way-to-target-windows-mobile-7-5-browser-using-conditional-comments)

# python - 使用设置工具将现有的鸡蛋打包成其他鸡蛋

> ID：10007102
> 
> 赞同：0
> 
> 时间：2012-04-04T08:01:20.537
> 
> 标签：python, setuptools, egg

我的python项目依赖于一个第三方的egg，我不希望这个egg安装在我的python环境中。我可以通过在运行时将此鸡蛋添加到我的 PYTHONPATH 来执行我的代码，它运行良好。但是，我想知道是否可以将这个第三方 egg 包含到我自己的 egg 中，以便我通过部署 1 个单独的 egg 文件在其他盒子上运行我的应用程序，而无需显式更改我的 PYTHONPATH。任何想法？谢谢，J。

# c# - 等待 UI 控件的最佳方式是什么？

> ID：10007106
> 
> 赞同：1
> 
> 时间：2012-04-04T08:01:33.013
> 
> 标签：c#, backgroundworker, wait

我有一个用户控件，其中逐渐出现一条消息，几秒钟后它会再次消失。此控件使用 backgroundWorker。它工作正常。但是我应该为负责将消息显示为的方法添加一个重载：

```
ShowMessage(string message, bool waitToHide) { .. } 
```

现在，我需要知道让调用线程（UI 线程）等待上述方法的最佳方法是什么。

* * *

我试图引发一个事件来通知调用范围内部的backgroundWorker已经完成，但是由于这种方法在主应用程序中已经被频繁使用，我必须将许多统一的范围分解成一些分散的范围。

```
{
    // before code snippet..
    messageDisplayer1.ShowMessage("test", true);
    // after code snippet..
} 
```

将转向：

```
{
    // before..
    messageDisplayer1.ShowMessage("test", true);
}

void messageDisplayer1_Done()
{
    // after..
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:09:12.027

如果您必须在没有异步 CTP 的情况下坚持使用 .NET 3.5 或 .NET 4，我认为您将无法避免拆分代码（除非您想用[DoEvents](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)乱扔代码，这绝对不推荐）。

另一方面，[异步扩展](http://msdn.microsoft.com/en-us/vstudio/gg316360)（.NET 4 的 CTP 或 .NET 4.5 中包含的版本）允许您执行以下操作：

```
{ 
    // before code snippet.. 
    await messageDisplayer1.ShowMessage("test", true); 
    // after code snippet.. 
} 
```

然后编译器会*自动*将您的“后代码片段”放入一个单独的代码块（一个*continuation*）中，该代码块在 ShowMessage 发出完成信号后立即运行。同时，控制权返回到 Windows 消息循环，让程序的 UI 响应。

# php - 从 php 中的 flash 文件获取请求时检查 ip

> ID：10007109
> 
> 赞同：3
> 
> 时间：2012-04-04T08:01:42.327
> 
> 标签：php, flash, security

我有一个 Flash 文件，它每 5 分钟向 php 文件发送一些请求。如何检查来自 flash 文件的请求是从我的网站还是从其他地方发送的。我想确保有人没有从其他位置发送请求。出于安全原因，这非常重要。以下 PHP 代码可以工作吗？

```
if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
    {
        $user_ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
        $user_ip=$_SERVER['REMOTE_ADDR'];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:01:12.783

如果您想要真正安全的解决方案，您需要某种令牌机制。

当客户端请求 Flash 文件时，您的服务器端 PHP 会构建以下字符串：

```
user_id(if any):client_ip:clinet_forwarded_ip(if any):some_random_string 
```

然后，您需要使用 AES256 等对称安全算法加密此字符串。所以这将是您闪存的访问令牌。然后，您通过 flashvars 将此令牌传递给 flash，并且在每次请求时，flash 都需要发回此令牌以验证其身份。

在收到令牌时，您需要对其进行解密，因此首先如果它解密，则意味着您拥有此令牌是通过匹配密钥加密的，我假设只有您拥有。然后您需要验证封装到令牌中的所有字段是否与发送请求的客户端匹配。如果任何字段不匹配，您需要拒绝该请求。

# android - Eclipse + android SDK：启动应用程序进行测试时出错

> ID：10007112
> 
> 赞同：0
> 
> 时间：2012-04-04T08:01:51.953
> 
> 标签：android, eclipse

每次我对 XML 文件进行更改并按下运行按钮时，它都会生成 0 字节的 XML 输出文件并报告错误。

因此，测试应用程序的唯一方法是保存项目，刷新它，然后它才能正常启动应用程序。很烦人 我已经安装了：

面向 Web 开发人员的 Eclipse Java EE IDE。版本：Indigo Service Release 2 内部版本 ID：20120216-1857

在 Mac OS X 10.7.3 上

和最新的安卓 SDK。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:07:04.647

当您在执行您的 xml 文件的 java 文件上时尝试运行代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:32:20.033

删除那个 .out 文件

并尝试右键单击项目并作为android应用程序运行

# c++ - 随机数生成和并行化 c++/Qt

> ID：10007113
> 
> 赞同：2
> 
> 时间：2012-04-04T08:01:57.820
> 
> 标签：c++, random, parallel-processing, random-sample

我想知道这是否会更糟糕地并行生成随机数。我在这里使用 Qt 和 QtConcurrent。是否值得使用并行化而不是连续生成 N 个数字？哪个可能是生成数字的临界数量？我的代码在这里，非并行化：

```
double** sampled = Matrix::allocMatrice(n,m_ndim,true);

Random* generator_ = new Random();
generator_->newSeed();

double* temp_;

for(int k=0;k<n;k++)
{
    for(int j=0;j<m_ndim;j++)
    {
        sampled[k][j] = generator_->run(lower[j],upper[j]); 
    }
} 
```

whre Random 是一个遵循 Marsaglia 生成方法的自制随机生成器。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:35:29.923

如果你想要真正的并行随机数生成，你几乎肯定不走运。我知道没有真正的多线程算法可以有效且确定地使用引擎盖下的不同线程生成多个随机数。

我之前所做的并建议您现在做的是设置 N 个不同的生成器（显然，具有 N 个不同的种子），并*手动*将生成分布在 N 个线程上。结果将是可重现的，并且是高度多线程的。

# jquery - Jquery 日期选择器，其中一些日期以粗体格式显示

> ID：10007116
> 
> 赞同：4
> 
> 时间：2012-04-04T08:02:06.533
> 
> 标签：jquery

我们怎样才能使日期以粗体显示？

```
var events = {};
events[new Date('02/14/2011')] = new Event('Valentines Day', 'mybold');
events[new Date('02/18/2011')] = new Event('Payday', 'mybold');
    $('#calender').datepicker({
        changeMonth : true,
        changeYear : true,
        beforeShowDay : function(date) {
            var event = events[date];
            if (event) {
                return [ true, 'mybold', event.text ];
            } else {
                return [ true, '', '' ];
            }
        }
    });
.
.
.
.
<style>
.mybold>a {
    font-weight:bold;
    background-color: yellow !important; 
    background-image: none !important;
}
</style> 
```

它显示背景颜色为黄色但未以粗体显示文本？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:21:48.200

你应该做

```
.mybold>a.ui-state-default {
    font-weight:bold;
    background-color: yellow;
    background-image: none;
} 
```

在这里摆弄[http://jsfiddle.net/3dHWh/2/](http://jsfiddle.net/3dHWh/2/)

这是有效的，因为使用类定位元素比一般定位元素更强，因此您没有覆盖标准 ui 主题（所以根本不需要`!important`）

# c - 如何用 C 创建一个大型二维数组

> ID：10007117
> 
> 赞同：1
> 
> 时间：2012-04-04T08:02:07.023
> 
> 标签：c

我想要一个大的二维数组，比如

```
int myArray[10000][2]; 
```

有人告诉我这样构建的数组是不合适的，应该使用malloc在堆中构建。有人可以告诉我如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:05:40.770

```
#include <stdlib.h> 
```

**//分配**

```
int **vv = malloc(2 * sizeof(int *));
for(int i = 0; i < 2; i++)
   vv[i] = malloc(10000 * sizeof(int)); 
```

**//自由的**

```
for(int i = 0; i < 2; i++)
    free(vv[i]);
free(vv); 
```

# android - 如何使用 Crittercism 手动发送异常？

> ID：10007119
> 
> 赞同：10
> 
> 时间：2012-04-04T08:02:17.960
> 
> 标签：android, exception, crittercism

我正在使用 android crittercism 库并在捕获错误级别异常时尝试发送报告。

但我找不到有关如何执行此操作的文档。这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T04:41:05.887

他们暂时将该功能移至测试版。如果您向支持人员发送电子邮件，他们将启用您的帐户以处理异常。以下是示例 Android 代码：

```
try
{
    throw new Exception("Exception Reason");
}
catch (Exception exception)
{
    Crittercism.logHandledException(exception);
} 
```

以防万一您需要它，这里是 iOS 上的示例代码：

```
@try {
    [NSException raise:NSInvalidArgumentException
            format:@"Foo must not be nil"];
} @catch (NSException *exception) {
    // Pass it on to us!
    [Crittercism logHandledException:exception]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T05:03:44.377

我是[Crittercism](http://www.crittercism.com)的联合创始人兼 CTO 。如果你给我发了一封很棒的电子邮件，我可以为你的帐户启用它。我是抢劫 [at] :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-02T16:23:48.333

```
Crittercism.logHandledException(new Throwable("test")); 
```

您实际上不必抛出`Exception`（或`Throwable`，在这种情况下）。它将出现在 Crittercism 网站上的“已处理的异常”下。

# java - 使用 LogBack 登录到数据库

> ID：10007132
> 
> 赞同：1
> 
> 时间：2012-04-04T08:03:33.203
> 
> 标签：java, log4j, logback

使用 log4j，我曾经有一个附加程序，可以直接记录到我数据库中的一个表中。附加程序如下：

```
 <appender name="DATABASE_LOG" class="org.apache.log4j.jdbc.JDBCAppender">
        <param name="URL" value="jdbc:postgresql://localhost/registrationdb" />
        <param name="Driver" value="org.postgresql.Driver"/>
        <param name="User" value="postgres"/>
        <param name="Password" value="********/>
        <layout class="org.apache.log4j.EnhancedPatternLayout">
            <param name="ConversionPattern" value="INSERT INTO user (user_id,creation_datetime,comment,user_type) VALUES ('%X{userId}','%d{yyyy-MM-dd HH:mm:ss}','%X{comment}','%X{userType}')"/>
        </layout>
        <filter class="org.apache.log4j.varia.LevelRangeFilter">
            <param name="LevelMin" value="DEBUG" />
            <param name="LevelMax" value="INFO" />
        </filter>
  </appender> 
```

log4j 是部署在 JBoss 4.2 上的 Web 应用程序的一部分。log4j 的问题在于它没有关闭它正在打开的数据库连接，即使我们在 Web 服务器上尝试使用 Postgres 数据源，它也会耗尽池中的所有连接（这是一个完全不同的问题）。这就是为什么我们决定尝试 LogBack，看看它是否更好。有趣的是，当我阅读 LogBack 文档时，它清楚地提到了以下内容：

> DBAppender 以独立于 Java 编程语言的格式将日志记录事件插入到三个数据库表中。
> 
> 这三个表是 logging_event、logging_event_property 和 logging_event_exception。在使用 DBAppender 之前，它们必须存在。

据我了解，这意味着我必须绑定到这 3 个表才能登录到数据库。

在互联网上搜索解决方案的结果很少涉及扩展`AppenderBase`类，这对我现阶段来说不方便，因为这意味着必须进行更多测试，因为我们知道我们还有很多其他要求要测试。问题是：我可以为 LogBack 定义一个与上面的 log4j appender 功能相似的 appender 吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:13:50.030

是的，Logback 需要 3 个数据库表，您不能跳过其中任何一个~~, 你只能自定义他们的名字~~. 这实际上是一个优势，Log4J 根本不记录异常，而 Logback 使用单独的表来记录堆栈跟踪行。它还记录[mdc](/questions/tagged/mdc "显示标记为“mdc”的问题")属性（第三个表）。

如果您希望自定义表和/或列名称，您可以实现[`DBNameResolver`](http://logback.qos.ch/apidocs/ch/qos/logback/classic/db/names/DBNameResolver.html).

# javascript - div滑下后跳转

> ID：10007139
> 
> 赞同：5
> 
> 时间：2012-04-04T08:03:46.740
> 
> 标签：javascript, jquery, html

我使用 HTMl 创建了一个新页面，当用户单击我的一个链接时，我想要一个 div 在它的底部向下滑动。问题是当我在我的页面中使用此代码时，它会在我的标题左侧向下滑动，然后它会跳到我的链接下方。我将代码保存在`jSfiddle`：

[http://jsfiddle.net/GMSvk/1/](http://jsfiddle.net/GMSvk/1/) 在`jsFiddle`它滑下来后跳起来。请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:06:56.837

添加`clear:both`到`#Specifications`

[http://jsfiddle.net/GMSvk/3/](http://jsfiddle.net/GMSvk/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:07:14.130

我只是使用了一个`<br />`标签，它起作用了。:)

```
 </div>
</div>
<br />
  <div id="Specifications">
     wq  we  q
   </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:09:03.727

只需添加哪个应该`overflow:hidden`可以`.topLeftBand`解决问题。

```
.topLeftBand {
    overflow:hidden;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:42:07.683

我已经编辑了你的代码请检查 - [http://jsfiddle.net/GMSvk/4/](http://jsfiddle.net/GMSvk/4/)

固定跳跃问题，对齐问题。如果您有任何疑问，请回复我

# c - 运算符优先级和三元运算符

> ID：10007140
> 
> 赞同：1
> 
> 时间：2012-04-04T08:03:48.067
> 
> 标签：c, operator-precedence, ternary

我在 C 中有一个问题。

```
#include<stdio.h>
int main()
{
    int a = 10, b = 0, c = 7;
    if (a ? b : c == 0)
        printf("1");
    else if (c = c || a && b)
        printf("2");
    return 0;
} 
```

此代码打印 2 但我认为 a?b:c 返回 b=0 并且 0==0 返回 1。您能解释一下代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T08:08:34.677

条件运算符 ( `?:`) 具有最低优先级之一。特别是低于`==`。你的说法是这样的：

```
if(a ? b : (c == 0)) { ... } 
```

不是这个：

```
if((a ? b : c) == 0) { ... } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:07:10.367

你的条件写得不正确。

在第一个 if 语句中：

```
 if (a ? b : c == 0) 
```

如果你把值，那么它变成

```
if(10 ? 0 : 7 == 0) 
```

意味着，它将始终返回 0。

这就是为什么控制权转到 else 部分，在那里，它变成

```
else if (7 = 7 || 10 && 0) 
```

因为您在这里使用了“=”运算符（c = c），所以它总是正确的，因此它打印“2”。

现在您希望该代码应返回“1”，然后以这种方式更改您的 if 语句。

```
 if( (a ? b:c) == 0){...} 
```

因为“==”运算符的优先级高于三元运算符。

# tsql - 使用 TSQL 的具有开始和结束日期的对象的每月计数

> ID：10007141
> 
> 赞同：1
> 
> 时间：2012-04-04T08:03:48.367
> 
> 标签：tsql, count

我想创建一个条形图，显示每月可用的对象数量。所有行都有开始和结束日期。我知道如何计算一个月：

```
SELECT COUNT(*) As NumberOfItems
FROM Items
WHERE DATEPART(MONTH, Items.StartDate) <= @monthNumber 
AND DATEPART(MONTH, Items.EndDate) >= @monthNumber 
```

现在我想创建 SQL 来使用单个 SELECT 语句获取月份数和项目数。

有什么优雅的方法可以做到这一点吗？我知道我必须考虑年份。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:22:42.253

假设 Sql Server 2005 或更新版本。

CTE 部分将返回跨越 @startDate 和 @endDate 之间年份的月份数。主体将月份数字与对 Items.StartDate 和 Items.EndDate 执行相同转换的项目连接起来。

```
; with months (month) as (
  select datediff (m, 0, @startDate)
  union all
  select month + 1
    from months
  where month < datediff (m, 0, @endDate)
)
select year (Items.StartDate) Year,
       month (Items.StartDate) Month,
       count (*) NumberOfItems
  from months
  inner join Items
     on datediff (m, 0, Items.StartDate) <= months.month
    and datediff (m, 0, Items.EndDate) >= months.month
  group by 
       year (Items.StartDate),
       month (Items.StartDate) 
```

注意：如果您打算跨越一百个月，您将需要`option (maxrecursion 0)`在查询结束时。

# javascript - xul 中的窗口 id

> ID：10007142
> 
> 赞同：0
> 
> 时间：2012-04-04T08:03:51.447
> 
> 标签：javascript, firefox, firefox-addon, xul

我对 xul 中的窗口 id 有疑问。我的 xul 文件中有类似的东西，我想从 javascript 访问这个窗口。基本上，我想要一个函数使用它的名称返回对该窗口的引用。有什么功能可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:25:31.410

如果您有一个顶级 XUL 窗口，您可以使用[nsIWindowMediator](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIWindowMediator)获得对它的引用，如下所示：

```
Components.utils.import("resource://gre/modules/Services.jsm");

Services.wm.getMostRecentWindow("navigator:browser"); 
```

`navigator:browser`是浏览器窗口的类型，您必须使用窗口的[`windowtype`属性值](https://developer.mozilla.org/en/XUL/Attribute/windowtype)。请注意，这没有使用`id`属性 - ID 是另一回事，并且对于应用叠加层最有用。

要获得多个相同类型的窗口，您可以编写：

```
var enumerator = Services.wm.getEnumerator("navigator:browser");
while (enumerator.hasMoreElements())
  alert(enumerator.getNext().QueryInterface(Components.interfaces.nsIDOMWindow)); 
```

# c# - 使用自定义 ServiceHostFactory、WAS 时 NServiceBus 传输为 NULL

> ID：10007145
> 
> 赞同：0
> 
> 时间：2012-04-04T08:04:13.107
> 
> 标签：c#, wcf, nservicebus, was

我们目前正在尝试在我们的 WCF 服务中实现 NServiceBus 3.0。

我们使用自定义的 ServiceHostFactory 来初始化 WAS 中的服务。我们使用 net.tcp 来访问服务并使用以下代码进行设置：

```
public class DoServiceServiceHostFactory : DefaultServiceHostFactory
{
    private static IWindsorContainer _container;

    public DoServiceServiceHostFactory()
        : base(CreateKernel())
    {
    }

    private static IKernel CreateKernel()
    {
        _container = new WindsorContainer();

        IocModules.Configure(_container, new WcfConfigurationModule());
        IocModules.Configure(_container, new WcfAdapterModule());
        IocModules.Configure(_container, new ManagerModule());
        IocModules.Configure(_container, new FactoryModule());

        IBus bus = Configure.WithWeb()
                .DefineEndpointName("OurProjectPublisher")
                .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MY.Bus.Contracts.Events"))
                .CastleWindsorBuilder()
                .Log4Net()
                .XmlSerializer()
                .MsmqTransport()
                .UnicastBus()
                .CreateBus()
                .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
        //_container.Register(Component.For<IBus>().Instance(bus).LifeStyle.Singleton);

        WindsorServiceLocator serviceLocator = new WindsorServiceLocator(_container);
        ServiceLocator.SetLocatorProvider(() => serviceLocator);

        return _container.Kernel;
    }
} 
```

当我们调用服务时，我们收到此错误：

```
 Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 33:             IocModules.Configure(_container, new FactoryModule());
Line 34: 
Line 35:             IBus bus = Configure.WithWeb()
Line 36:                     .DefineEndpointName("OurProjectPublisher")
Line 37:                     .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MY.Bus.Contracts.Events"))

Source File: xxx\ServiceHostFactory.cs    Line: 35 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction) in d:\BuildAgent-03\work\nsb.masterbuild0\src\unicast\NServiceBus.Unicast\UnicastBus.cs:762
   xxx.ServiceHostFactory.CreateKernel() in xxx\ServiceHostFactory.cs:35
   xxx.ServiceHostFactory..ctor() in xxx\ServiceHostFactory.cs:21

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeConstructor(IRuntimeMethodInfo method, Object[] args, SignatureStruct& signature, RuntimeType declaringType) +0
   System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +651
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1204
   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +50
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +1132

[ServiceActivationException: The service '/MembershipService.svc' cannot be activated due to an exception during compilation.  The exception message is: Exception has been thrown by the target of an invocation..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +890624
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +180062
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +136 
```

**以及web.config**中的配置部分

 **```
 <configSections>
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
<section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
<section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
<section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
<section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
</configSections>
<MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
<MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5" />
<UnicastBusConfig ForwardReceivedMessagesTo="auditqueue">
<MessageEndpointMappings>
  <add Messages="MY.Bus.Contracts" Endpoint="OurProjectPublisher" />
</MessageEndpointMappings>
</UnicastBusConfig> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:41:08.200

通常（至少在 2.6 中），您会将 Windsor Container 的实现传递给`.CastleWindsorBuilder`配置。这允许 NSB 在初始化时创建正确的对象图。所以，它看起来像：

```
 _container = new WindsorContainer();

        IocModules.Configure(_container, new WcfConfigurationModule());
        IocModules.Configure(_container, new WcfAdapterModule());
        IocModules.Configure(_container, new ManagerModule());
        IocModules.Configure(_container, new FactoryModule());

        IBus bus = Configure.WithWeb()
                .DefineEndpointName("OurProjectPublisher")
                .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MY.Bus.Contracts.Events"))
                .CastleWindsorBuilder(_container)  // added here
                .Log4Net()
                .XmlSerializer()
                .MsmqTransport()
                .UnicastBus()
                .CreateBus()
                .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
        //_container.Register(Component.For<IBus>().Instance(bus).LifeStyle.Singleton); 
```

这有帮助吗？**

# java - 获取 IllegalBlockSizeException：使用 rsa 时数据不能超过 256 字节

> ID：10007147
> 
> 赞同：58
> 
> 时间：2012-04-04T08:04:31.300
> 
> 标签：java, rsa, encryption

我正在使用 rsa 密钥加密一个长字符串，我将发送到我的服务器（将使用服务器的公钥和我的私钥对其进行加密）但是它抛出了一个异常，就像`javax.crypto.IllegalBlockSizeException: Data must not be longer than 256 bytes` 我觉得我直到现在还没有正确理解 rsa 的工作（使用内置库是造成这种情况的原因）。
有人可以解释为什么抛出这个异常。根本不可能发送加密的长字符串吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-04T08:14:37.343

> RSA 算法只能加密最大字节长度为 RSA 密钥长度（以位为单位）除以 8 减去 11 个填充字节的数据，即最大字节数 = 以位为单位的密钥长度 / 8 - 11。

所以基本上你将密钥长度除以 8 -11（如果你有填充）。例如，如果您有一个 2048 位密钥，您可以加密 2048/8 = 256 个字节（如果有填充，则为 11 个字节）。因此，要么使用更大的密钥，要么使用对称密钥加密数据，然后使用 rsa 加密该密钥（这是推荐的方法）。

这将要求您：

1.  生成对称密钥
2.  使用对称密钥加密数据
3.  使用 rsa 加密对称密钥
4.  发送加密密钥和数据
5.  使用 rsa 解密加密的对称密钥
6.  使用对称密钥解密数据
7.  完毕 ：）

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2017-10-19T11:02:19.853

基于@John Snow的回答，我做了一个例子

1.  生成对称密钥（128 位 AES）

    ```
    KeyGenerator generator = KeyGenerator.getInstance("AES");
    generator.init(128); // The AES key size in number of bits
    SecretKey secKey = generator.generateKey(); 
    ```

2.  使用 AES 加密纯文本

    ```
    String plainText = "Please encrypt me urgently..."
    Cipher aesCipher = Cipher.getInstance("AES");
    aesCipher.init(Cipher.ENCRYPT_MODE, secKey);
    byte[] byteCipherText = aesCipher.doFinal(plainText.getBytes()); 
    ```

3.  使用 RSA 公钥加密密钥

    ```
    KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(2048);
    KeyPair keyPair = kpg.generateKeyPair();

    PublicKey puKey = keyPair.getPublic();
    PrivateKey prKey = keyPair.getPrivate();

    Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    cipher.init(Cipher.PUBLIC_KEY, puKey);
    byte[] encryptedKey = cipher.doFinal(secKey.getEncoded()/*Seceret Key From Step 1*/); 
    ```

4.  发送加密数据（byteCipherText）+加密AES密钥（encryptedKey）

5.  在客户端，使用 RSA 私钥解密对称密钥

    ```
    cipher.init(Cipher.PRIVATE_KEY, prKey);
    byte[] decryptedKey = cipher.doFinal(encryptedKey); 
    ```

6.  使用解密的对称密钥解密密文

    ```
    //Convert bytes to AES SecertKey
    SecretKey originalKey = new SecretKeySpec(decryptedKey , 0, decryptedKey .length, "AES");
    Cipher aesCipher = Cipher.getInstance("AES");
    aesCipher.init(Cipher.DECRYPT_MODE, originalKey);
    byte[] bytePlainText = aesCipher.doFinal(byteCipherText);
    String plainText = new String(bytePlainText);` 
    ```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-04T08:37:22.527

您不应该直接在您的秘密数据上使用 RSA。*您应该只对伪随机*或*完全随机*的数据使用 RSA ，例如会话密钥或消息验证码。

您在 256 字节处遇到了问题——那是因为您可能正在使用 2048 位密钥。密钥能够将范围内的任何整数加密到相同的`0`范围`2^2048 - 1`内，这意味着您的数据必须为 256 字节或更小。

如果您打算加密更多，请使用一种 RSA 加密来加密对称算法的会话密钥，并使用*它*来加密您的数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-07T14:26:15.970

为了继续上面 John Snow 的回答，我创建了一个简单的随机对称加密库，您可以使用该库使用私钥简单地加密任何长度的数据。

[您可以在GitHub 上](https://github.com/william-ferguson-au/random-symmetric-crypto)找到该库- random-symmetric-crypto

```
 final RandomSymmetricCipher cipher = new RandomSymmetricCipher();

 // Encrypt the data and the random symmetric key.
 final CryptoPacket cryptoPacket = cipher.encrypt(inputData, PRIVATE_KEY_BASE64);

 // Convert the CryptoPacket into a Base64 String that can be readily reconstituted at the other end.
 final CryptoPacketConverter cryptoPacketConverter = new CryptoPacketConverter();
 final String base64EncryptedData = cryptoPacketConverter.convert(cryptoPacket);
 System.out.println("Base64EncryptedData=" + base64EncryptedData);

 // Decrypt the Base64 encoded (and encrypted) String.
 final byte[] outputData = cipher.decrypt(base64EncryptedData, PUBLIC_KEY_BASE64); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-07-19T03:26:42.563

您需要通过 publicKey 拆分数据

```
int keyLength = publicKey.getModulus().bitLength() / 16;
String[] datas = splitString(data, keyLength - 11);
String mi = ""//the data after encrypted;
for (String s : datas) {
    mi += bcd2Str(cipher.doFinal(s.getBytes()));
}
return mi;

public static String bcd2Str(byte[] bytes) {
    char temp[] = new char[bytes.length * 2], val;

    for (int i = 0; i < bytes.length; i++) {
        val = (char) (((bytes[i] & 0xf0) >> 4) & 0x0f);
        temp[i * 2] = (char) (val > 9 ? val + 'A' - 10 : val + '0');

        val = (char) (bytes[i] & 0x0f);
        temp[i * 2 + 1] = (char) (val > 9 ? val + 'A' - 10 : val + '0');
    }
   return new String(temp);
} 
```

# asp.net - 如何使用 VB.NET 代码更改数据列表项的背景？

> ID：10007150
> 
> 赞同：0
> 
> 时间：2012-04-04T08:04:51.890
> 
> 标签：asp.net, vb.net, datalist

我想`datalist`在绑定数据时在某些条件下更改项目背景的颜色？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:12:48.203

将`ItemDataBound`事件处理程序添加到数据列表

ASPX：

```
<asp:DataList ID="DataList1" runat="server" 
        onitemdatabound="DataList1_ItemDataBound">
</asp:DataList> 
```

代码背后：

```
Protected Sub DataList1_ItemDataBound(sender As Object, e As DataListItemEventArgs)             
    If e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then
         ' check condition and change styles
    End If
End Sub 
```

# c++ - 跨 c++ 库的 barrowing 函数（新手）

> ID：10007151
> 
> 赞同：-1
> 
> 时间：2012-04-04T08:04:54.493
> 
> 标签：c++, eigen, armadillo

我想知道如何将功能从一个开源 c++ 库添加到另一个库。为了使事情具体化，这里有一个例子。我真的很喜欢犰狳库中的[“查找”功能](http://arma.sourceforge.net/docs.html#find)，现在我发现自己更多地使用[eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)，我有点想念它。编写一个完全集成到特征中的等效“查找”（即使用特征对象等......）有多难？如何做到这一点？我在哪里可以找到“查找”功能的源代码？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:18:28.770

考虑到库之间的差异，您必须自己编写它。不过，它可能需要一些关于您尝试扩展的库的知识。

从阅读犰狳的代码开始，了解它们在这个函数中做了什么。然后继续了解在 eigen 中如何实现类似结构并修改代码。如果你想将它集成到特征中，那么你只需要链接一个库（只有你的自定义特征，而不是标准特征和你的自定义特征扩展），你需要编译特征并将你的文件添加到 Makefile/Cmake （或任何特征正在使用）。

您可以在此处的 tar.gz 存档中找到犰狳的来源：http: [//arma.sourceforge.net/download.html](http://arma.sourceforge.net/download.html)

如果您询问`find`犰狳来源中的操作员在哪里，请检查`include/armadillo_bits/op_find_bones.hpp`并`include/armadillo_bits/op_find_meat.hpp`

# asp.net - 在 ASP.NET 页面中播放视频

> ID：10007154
> 
> 赞同：3
> 
> 时间：2012-04-04T08:05:12.153
> 
> 标签：asp.net, video

我有一个视频，我需要在我的 ASP.NET 页面的主页中播放它，只要该主页加载，它就应该在自定义的小区域中播放。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:08:48.960

如果`HTML5`将其转换为`ogg,mp4,WebM`然后将其上传到您的服务器，那么它会更容易，您可以这样做：

```
<video width="320" height="240" controls="controls">
  <source src="yourmovie.mp4" type="video/mp4" />
  <source src="yourmovie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

编辑：

实际上，网络上有大量的样本。这里是其中的一些。

[http://www.aspnet-video.com/aspnetvideo_Demonstration-PlayList-Presentation.aspx](http://www.aspnet-video.com/aspnetvideo_Demonstration-PlayList-Presentation.aspx)

[http://www.c-sharpcorner.com/UploadFile/scottlysle/CsharpWebVideo04212007133218PM/CsharpWebVideo.aspx](http://www.c-sharpcorner.com/UploadFile/scottlysle/CsharpWebVideo04212007133218PM/CsharpWebVideo.aspx)

[http://videoplayer.codeplex.com/](http://videoplayer.codeplex.com/)

# c# - 这是否使用字典线程安全？

> ID：10007155
> 
> 赞同：3
> 
> 时间：2012-04-04T08:05:12.990
> 
> 标签：c#, .net, thread-safety

这是我的两个方法变体，它返回一个字符串，与枚举值相关联（保存在字典中）。第一个变体较慢，但线程安全，第二个变体更快，但我不知道它是否是线程安全的。第一的：

```
string GetStringForEnum (SomeEnum e)
{
   string str = null;
   lock (someDictionary) //someDictionary is not used anywhere else (only in this method)
   { if (!someDictionary (e, out str)) { someDictionary.Add (e, "somehowCreatedString"); }
   return str;
} 
```

第二种变体：

```
string GetStringForEnum (SomeEnum e)
{
   string str = null;
   if (!someDictionary (e, out str))
   {
     lock (someDictionary) //someDictionary is not used anywhere else (only in this method)
     { if (!someDictionary (e, out str)) { someDictionary.Add (e, "somehowCreatedString"); }
   }
   return str;
} 
```

第二种变体不是每次都使用“锁”，但它是否是线程安全的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:13:30.840

这里有2个问题：

*   `lock (someDictionary)` - 不建议这样做，即使字典没有在其他地方使用。这是一个理论上的论点，但 Dictionary 类的（未来）代码可能会锁定自身。

*   `if (!someDictionary (e, out str))`没有锁。我认为这是对`TryGetValue()`. 这根本不是线程安全的，您的读取可能会被另一个线程中的写入中断。这可能会导致各种错误（索引超出范围、空引用）。错误将非常罕见（= 难以重现）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T08:08:38.033

上的[文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)`Dictionary`有一个关于线程安全的部分：

> A`Dictionary(Of TKey, TValue)`可以同时支持多个读取器，**只要不修改集合**即可。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。
> 
> 有关线程安全的替代方案，请参阅`ConcurrentDictionary(Of TKey, TValue)`。

所以：

*   [`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)从多个线程中使用是安全的，因为它是只读的。但是，当其他代码同时编写字典时（您的代码正在这样做），这是不安全的*。*
*   除非您锁定字典，否则添加值永远不会安全。
*   使用 a`ConcurrentDictionary`是一个简单的解决方案，但它可能不会比您的第一个版本快（我假设它会锁定每个操作）。

附带说明：不建议使用非私有字段（这里是该字段`someDictionary`，我们不知道它是否是`private`）作为目标，因为理论上外部代码也可以在您不知情的情况下`lock`决定它（实际上这是`lock`不会发生，但为什么在理论上也不正确？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T08:08:03.820

如果您使用 .NET 4，则可以`ConcurrentDictionary`用于线程安全。

# ios - UITableView -> 如何在向下滚动时加载附加条目？

> ID：10007164
> 
> 赞同：5
> 
> 时间：2012-04-04T08:05:50.907
> 
> 标签：ios, uitableview, load

我想在向下滚动时为我的 tableView 加载我的数据。

我有一个 JSON API，我可以从中获取数据。它是一个私人消息系统。每次我将获得 20 个条目时，我可以选择一个页面（0 到 x）获取第一个到 x 个条目（每次 20 个条目）。所以目前我有我的桌子，我加载了一个包含 20 个条目的列表并显示它们。

现在我想在我到达最后一个条目时立即加载接下来的 20 个条目。

我尝试在 StakcOVerflow 上阅读很多关于它的内容，并用它查看一个 Github 项目，但根本不理解它。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T08:21:26.560

可以使用`willDisplayCell`UITableview 的方法。例如，查看一行是否有“加载更多”按钮（如果有的话）。

看到[这个](https://stackoverflow.com/questions/7170821/how-to-make-dynamically-adding-of-rows-when-user-reached-to-the-last-row-of-the)帖子。

一个[Github](https://github.com/stephenjames/ContinuousTableview)项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T08:44:47.317

你可以实现这个委托

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
//把数据放到你的数组中
[tableView 重载数据];
}
```

# java - 索引时的lucene 3.5.0堆栈溢出错误

> ID：10007169
> 
> 赞同：0
> 
> 时间：2012-04-04T08:06:06.487
> 
> 标签：java, lucene, stack-overflow

我开始学习使用 Lucene，并首先尝试从我找到的一本书中为 Indexer 类编译示例。该类如下所示：

```
public class Indexer 
{

private IndexWriter writer;

public static void main(String[] args) throws Exception 
{
    String indexDir = "src/indexDirectory";
    String dataDir = "src/filesDirectory";

    long start = System.currentTimeMillis();
    Indexer indexer = new Indexer(indexDir);
    int numIndexer = indexer.index(dataDir);
    indexer.close();
    long end = System.currentTimeMillis();

    System.out.println("Indexarea a " + numIndexer + " fisiere a durat "
            + (end - start) + " milisecunde");
}

public Indexer(String indexDir) throws IOException
{
    Directory dir = new FSDirectory(new File(indexDir), null) {};

    writer = new IndexWriter(dir, new StandardAnalyzer(Version.LUCENE_35), true, IndexWriter.MaxFieldLength.UNLIMITED);
}

public void close() throws IOException
{
    writer.close();
}

public int index(String dataDir) throws Exception
{
    File[] files = new File(dataDir).listFiles();

    for (int i=0;i<files.length; i++)
    {
        File f = files[i];

        if (!f.isDirectory() && !f.isHidden() && f.exists() && f.canRead() && acceptFile(f))
        {
            indexFile(f);
        }
    }

    return writer.numDocs();
}

protected boolean acceptFile(File f)
{
    return f.getName().endsWith(".txt");
}

protected Document getDocument(File f) throws Exception
{
    Document doc = new Document();
    doc.add(new Field("contents", new FileReader(f)));
    doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES, Field.Index.NOT_ANALYZED));

    return doc;
}

private void indexFile(File f) throws Exception
{
    System.out.println("Indexez " + f.getCanonicalPath());
    Document doc = getDocument(f);
    if (doc != null)
    {
        writer.addDocument(doc);
    }
} 
```

}

当我运行它时，我得到

```
Exception in thread "main" java.lang.StackOverflowError
at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:345)
at org.apache.lucene.store.Directory.openInput(Directory.java:143) 
```

并且这样持续了几十次。

我的班级的构造函数

```
public Indexer(String indexDir) throws IOException
{
    Directory dir = new FSDirectory(new File(indexDir), null) {};

    writer = new IndexWriter(dir, new StandardAnalyzer(Version.LUCENE_35), true, IndexWriter.MaxFieldLength.UNLIMITED);
} 
```

有一个`IndexWriter`已弃用的调用（因为本书是为 lucene 3.0.0 编写的）并使用此方法 `IndexWriter.MaxFieldLength.UNLIMITED`（也已弃用）。这会导致溢出吗？如果是这样，我应该改用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:05:20.153

不，不要创建自己的 FSDirectory 匿名子类！改用 FSDirectory.open，或实例化 Lucene 提供的 FSDirectory 的具体子类，如 NIOFSDirectory（但在这种情况下，您必须仔细阅读所选实现的 Javadoc，每个都有特定于操作系统的缺陷）。即使在 3.0 版中，Lucene 也从未期望您创建自己的 FSDirectory 子类。

# mysql - SQL 随机查询

> ID：10007171
> 
> 赞同：0
> 
> 时间：2012-04-04T08:06:16.327
> 
> 标签：mysql, sql, random

在我的 MySQL 数据库中，所有条目都有一个等级（一个整数）。现在我想要一个随机提供 10 个元素的 SQL 查询。正如您可能猜到的那样，一个元素被采用的机会应该是 RatingOfThisElement/AllRatings。我怎样才能做到这一点。（我知道如何在 php 中执行此操作，但由于性能原因，我希望有一个 SQL 查询）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:10:42.503

谷歌应该帮助你：[http ://akinas.com/pages/en/blog/mysql_random_row/](http://akinas.com/pages/en/blog/mysql_random_row/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:11:42.603

您可以使用 ORDER BY RAND() LIMIT 10，例如[MySQL: Alternatives to ORDER BY RAND()](https://stackoverflow.com/questions/1823306/mysql-alternatives-to-order-by-rand)但如果以某些方式使用，MySQL 中的 ORDER BY RAND 会出现问题。它可以解决巨大的性能问题，您最好在 PHP 中执行它 - [ORDER BY RAND 的替代品](http://www.electrictoolbox.com/msyql-alternative-order-by-rand/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:19:16.907

这是解决方案

```
SELECT * FROM yourtablename ORDER BY RAND() LIMIT 0,10; 
```

# c# - 我应该在我的 Android 应用程序和 ASP.NET Webservice 之间使用什么解密？

> ID：10007175
> 
> 赞同：0
> 
> 时间：2012-04-04T08:06:26.890
> 
> 标签：c#, android, asp.net, encryption

我正在寻找一种在我的 Android 应用程序和用 C# 构建的 ASP.NET Web 服务之间加密和解密用户身份验证数据的好方法。

我想在我的 Android 应用程序上进行用户注册，并将身份验证发送到后端服务器，这是一个用 C# 构建的 ASP.NET Web 服务，然后每次应用程序调用 Web 服务时，它都应该发送一个带有身份验证信息的散列字符串，所以webservice 现在是什么用户。

什么是最好的做法，我错过了什么，请给我一些想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:11:27.950

如果您只是发送一个散列或加密字符串，任何捕获它的人都可以重新发送它，并在不知道密码的情况下进行身份验证等（重播）。使用 HTTPS（基于 SSL 的 HTTP），您不必担心加密通信通道。

# search-engine - 如何使用 Apache Nutch 保存原始 html 文件

> ID：10007178
> 
> 赞同：5
> 
> 时间：2012-04-04T08:06:35.227
> 
> 标签：search-engine, web-crawler, nutch

我是搜索引擎和网络爬虫的新手。现在我想将特定网站中的所有原始页面存储为 html 文件，但是使用 Apache Nutch 我只能获取二进制数据库文件。如何使用 Nutch 获取原始 html 文件？

Nutch 支持吗？如果没有，我还可以使用哪些其他工具来实现我的目标。（支持分布式爬取的工具更好。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T03:30:27.380

嗯，nutch 会将爬取的数据以二进制形式写入，因此如果您希望将其保存为 html 格式，则必须修改代码。（如果您是 nutch 新手，这会很痛苦）。

如果您想要获取 html 页面的快速简便的解决方案：

1.  如果您打算拥有的页面/url 列表非常低，那么最好使用`wget`为每个 url 调用的脚本来完成它。
2.  或使用[HTTrack](http://www.httrack.com/)工具。

**编辑：**

写一个你自己的 nutch 插件会很棒。您的问题将得到解决，而且您可以通过提交您的工作为 nutch 做出贡献！！！如果您是 nutch 新手（在代码和设计方面），那么您将不得不投入大量时间来构建一个新插件……否则它很容易做到。

**帮助您主动的几点建议：**

[这](http://wiki.apache.org/nutch/WritingPluginExample)是一个讨论编写自己的 nutch 插件的页面。

[从Fetcher.java](http://javasourcecode.org/html/open-source/nutch/nutch-1.3/org/apache/nutch/fetcher/Fetcher.java.html)开始。见第 647-648 行。这是您可以基于每个 url 获取获取的内容的地方（对于那些成功获取的页面）。

```
pstatus = output(fit.url, fit.datum, content, status, CrawlDatum.STATUS_FETCH_SUCCESS);
updateStatus(content.getContent().length); 
```

您应该在此之后添加代码以调用您的插件。将对象传递`content`给它。到目前为止，您已经猜到这`content.getContent()`是您想要的 url 的内容。在插件代码中，将其写入某个文件。文件名应该基于 url 名称，否则很难使用它。网址可以通过`fit.url`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T11:01:56.577

您必须[在](http://wiki.apache.org/nutch/RunNutchInEclipse)[**Eclipse**](http://wiki.apache.org/nutch/RunNutchInEclipse)[中运行**Nutch**](http://wiki.apache.org/nutch/RunNutchInEclipse)**进行修改。**

 **当您能够运行时，打开 Fetcher.java 并在“内容保护程序”命令行之间添加行。

```
case ProtocolStatus.SUCCESS:        // got a page
            pstatus = output(fit.url, fit.datum, content, status, CrawlDatum.STATUS_FETCH_SUCCESS, fit.outlinkDepth);
            updateStatus(content.getContent().length);'

            //------------------------------------------- content saver ---------------------------------------------\\
            String filename = "savedsites//" + content.getUrl().replace('/', '-');  

            File file = new File(filename);
            file.getParentFile().mkdirs();
            boolean exist = file.createNewFile();
            if (!exist) {
                System.out.println("File exists.");
            } else {
                FileWriter fstream = new FileWriter(file);
                BufferedWriter out = new BufferedWriter(fstream);
                out.write(content.toString().substring(content.toString().indexOf("<!DOCTYPE html")));
                out.close();
                System.out.println("File created successfully.");
            }
            //------------------------------------------- content saver ---------------------------------------------\\ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-09T14:16:22.813

要更新此答案-

可以从您的 crawldb 段文件夹中后处理数据，并直接读取 html（包括 nutch 存储的其他数据）。

```
 Configuration conf = NutchConfiguration.create();
    FileSystem fs = FileSystem.get(conf);

    Path file = new Path(segment, Content.DIR_NAME + "/part-00000/data");
    SequenceFile.Reader reader = new SequenceFile.Reader(fs, file, conf);

    try
    {
            Text key = new Text();
            Content content = new Content();

            while (reader.next(key, content)) 
            {
                    System.out.println(new String(content.GetContent()));
            }
    }
    catch (Exception e)
    {

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-12T08:49:52.860

这里的答案已经过时了。现在，很容易获得带有`nutch dump`. 请看[这个答案](https://stackoverflow.com/a/29426580/8376759)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-21T07:36:00.317

在 apache Nutch 2.3.1
中，您可以通过编辑 Nutch 代码来保存原始 HTML，首先按照[https://wiki.apache.org/nutch/RunNutchInEclipse在 eclipse 中运行 nutch](https://wiki.apache.org/nutch/RunNutchInEclipse)

在 Eclipse 编辑文件 FetcherReducer.java 中运行完 nutch 后，将此代码添加到输出方法中，再次运行 ant eclipse 以重建类

最后，原始 html 将添加到数据库中的 reportUrl 列

```
if (content != null) {
ByteBuffer raw = fit.page.getContent();
if (raw != null) {
    ByteArrayInputStream arrayInputStream = new ByteArrayInputStream(raw.array(), raw.arrayOffset() + raw.position(), raw.remaining());
    Scanner scanner = new Scanner(arrayInputStream);
    scanner.useDelimiter("\\Z");//To read all scanner content in one String
    String data = "";
    if (scanner.hasNext()) {
        data = scanner.next();
    }
    fit.page.setReprUrl(StringUtil.cleanField(data));
    scanner.close();
} 
```**

# php - 在注册期间对客户进行分组（在 Magento 中）

> ID：10007182
> 
> 赞同：0
> 
> 时间：2012-04-04T08:07:05.433
> 
> 标签：php, magento, customization

我正在使用**Magento CE** 1.6 电子商务引擎，我需要在注册过程中自动为我的客户**分配一个组。**

逻辑过程很简单：*如果注册邮箱地址域被列为特殊添加到`special`组，否则什么都不做*。我还需要创建和管理这个特殊的域列表。

例如：如果`foo.com`被列为特殊域，用户`bar@foo.com`将被添加到`special`组中。

需要一些方法来扩展控制器？从哪里开始做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:55:08.210

我的建议是使用 Magento Observers 并环顾`customer_save`or`customer_save_before`事件。

# authentication - Moodle上的网址登录

> ID：10007190
> 
> 赞同：0
> 
> 时间：2012-04-04T08:07:31.673
> 
> 标签：authentication, plugins, moodle, tweak

我希望可以将用户从站点重定向到我的 Moodle 安装，在 url 中提供两个加密参数。基于这些参数，Moodle 应该对用户进行身份验证并授予或拒绝访问权限。

有没有人熟悉这个，谁能指出我正确的方向？

我应该构建一个新插件，修改 index.php 吗？两个都 ？

基本上处理 GET 参数的 php 代码已经准备好了，但我不知道如何以及在哪里将它插入 Moodle 代码。

为帮助喝彩，非常感谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:28:09.463

这是以前解决过很多次的问题。安全地执行此操作的最佳选择是使用现有的身份验证插件之一。如果站点在同一台服务器上，或者您愿意允许直接访问数据库以便 Moodle 可以从您其他站点的数据库中读取密码哈希，那么您可以使用最简单的 db auth。否则，您将需要某种基于 cookie 的。我之前使用过 CAS 身份验证，但 shibboleth 也是一种选择。这可能看起来有点矫枉过正，但实际上并非如此。只需在 url 中包含身份验证令牌，您就会容易遭受暴力破解密码猜测攻击，因此这些插件提供的质询-响应机制非常重要。

# ruby-on-rails - 在 Sonar 中访问自定义的数据库表

> ID：10007191
> 
> 赞同：0
> 
> 时间：2012-04-04T08:07:33.493
> 
> 标签：ruby-on-rails, activerecord, sonarqube

我在声纳数据库中有一个自定义的表，我想从声纳插件访问它，我目前正在使用声纳、Web 服务/控制器访问现有的表，那么我该如何完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:01:46.650

Sonar 没有定义任何扩展来添加自定义数据库表，因此没有您想要实现的 API。

现在，无论您创建自定义数据库表的原因是什么（实际上我想知道它们），您都必须创建自己的 Sonar 分支才能在 Java 的 Sonar 端添加 MyBatis 映射器和 DAO，和/或添加RoR 端的 Ruby 模型，以便能够从 Web 端查询表。

# c++ - 如何以编程方式创建 CDialog 窗口？

> ID：10007195
> 
> 赞同：1
> 
> 时间：2012-04-04T08:07:41.373
> 
> 标签：c++, visual-c++, mfc

我不想使用“图形资源”来创建对话框！

到目前为止我所拥有的：

```
CDialog *dlgWin = new CDialog();
dlgWin->Create("hello");  // <-- but this Errors: "Debug Assertion failed!" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:10:03.837

您需要在资源编辑器中创建对话框模板，并将其提供给`CDialog`构造函数。

这是[文档](http://msdn.microsoft.com/en-us/library/132s802t%28v=vs.80%29.aspx)，他们还解释了如何在内存中动态创建对话框，这不是微不足道的，我建议不要这样做。我建议不要完全使用 MFC。

MSDN 文档通常写得很好，请阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T00:15:38.410

我为所有对话框使用一个空对话框模板，然后使用我自己的 GUI 布局库来生成和管理 MFC 小部件的大小。不知道您是否真的想这样做，因为它需要大量额外的工作，会带来问题但也有功能。

使用 Qt oder GTK 可能是一种方式，但我不喜欢它们。

# java - 解析标记库描述符时出错 - 连接重置

> ID：10007200
> 
> 赞同：0
> 
> 时间：2012-04-04T08:07:53.867
> 
> 标签：java, jakarta-ee, struts, taglib

当我尝试部署我的应用程序时，我收到如下错误：

```
<4/04/2012 03:24:08 PM EST> <Warning> <HTTP> <developer> <AdminServer> <[STANDBY] 
ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>>
 <> <> <1333517048130> <BEA-101196> <[/]: Error while parsing the Tag Library 
 Descriptor at "/opt/apps/domains/servers/AdminServer/tmp/_WL_user/app-war.war/WEB-INF
/tlds/xkins.tld".
 com.ctc.wstx.exc.WstxIOException: Connection reset 
```

部署可以成功完成，但此错误会使过程比正常时间长。

我检查了有这个问题的 tld，dtd uris 是： [http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd](http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd) http://java.sun.com/dtd/web-jsptaglibrary_1_2.dtd

但我无法通过浏览器访问这两个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:36:31.543

如果您使用的是jsp2+，那么我们可以使用内置的taglibs。jsp2.0提供了jstl，内置的displaytag taglibs。不需要将tlds放在我们的web-inf中。除了这些tag-libs，我们必须在web.xml中进行配置。

# c# - 在时区之间转换时间

> ID：10007208
> 
> 赞同：9
> 
> 时间：2012-04-04T08:08:17.617
> 
> 标签：c#, .net, timezone

我正在使用 TimeZoneInfo.ConvertTime 方法将时间从一个转换为另一个。

将日期时间 2006 年 1 月 1 日凌晨 2 点从珀斯转换为 Sri Jeyawardenepura 时，其转换为 2005 年 1 月 31 日晚上 11 点 30 分

从 Sri Jeyawardenepura 到珀斯的同一时间（2005 年 1 月 31 日晚上 11 点 30 分）转换为 2006 年 1 月 1 日凌晨 3 点。

为什么时区转换时差一小时？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-06T03:17:06.177

哇，这是双重打击！我只是偶然发现了这篇文章并且根本不会发布任何内容，因为它太旧了而且 OP 没有显示任何代码。但后来好奇心控制了我，所以我检查了它。

仅使用 .NET BCL：

```
string tzid1 = "W. Australia Standard Time"; // Perth
TimeZoneInfo tz1 = TimeZoneInfo.FindSystemTimeZoneById(tzid1);

string tzid2 = "Sri Lanka Standard Time"; // Sri Jeyawardenepura
TimeZoneInfo tz2 = TimeZoneInfo.FindSystemTimeZoneById(tzid2);

DateTime dt1 = new DateTime(2006, 1, 1, 2, 0, 0);
Debug.WriteLine(dt1); // 1/1/2006 2:00:00 AM
DateTime dt2 = TimeZoneInfo.ConvertTime(dt1, tz1, tz2);
Debug.WriteLine(dt2); // 12/31/2005 11:30:00 PM
DateTime dt3 = TimeZoneInfo.ConvertTime(dt2, tz2, tz1);
Debug.WriteLine(dt3); // 1/1/2006 3:00:00 AM 
```

果然，OP所描述的存在差异。起初我认为这一定是由于某种 DST 问题，所以我检查了[Sri Lanka](http://www.timeanddate.com/worldclock/clockchange.html?n=389&year=2006)和[Perth](http://www.timeanddate.com/worldclock/clockchange.html?n=196&year=2006)。虽然两者都在 2006 年进行了过渡，但在这一天都没有接近它。不过，我认为我应该检查 using`DateTimeOffset`以避免任何歧义问题：

```
string tzid1 = "W. Australia Standard Time"; // Perth
TimeZoneInfo tz1 = TimeZoneInfo.FindSystemTimeZoneById(tzid1);

string tzid2 = "Sri Lanka Standard Time"; // Sri Jeyawardenepura
TimeZoneInfo tz2 = TimeZoneInfo.FindSystemTimeZoneById(tzid2);

DateTime dt = new DateTime(2006, 1, 1, 2, 0, 0);
DateTimeOffset dto1 = new DateTimeOffset(dt, tz1.GetUtcOffset(dt));
Debug.WriteLine(dto1);  // 1/1/2006 2:00:00 AM +08:00
DateTimeOffset dto2 = TimeZoneInfo.ConvertTime(dto1, tz2);
Debug.WriteLine(dto2);  // 12/31/2005 11:30:00 PM +05:30
DateTimeOffset dto3 = TimeZoneInfo.ConvertTime(dto2, tz1);
Debug.WriteLine(dto3);  // 1/1/2006 3:00:00 AM +09:00 
```

它仍然关闭。你可以看到它认为目标时间应该在`+09:00`，但珀斯直到 2006 年 12 月 3 日才切换到那个。一月份它显然是静止`+08:00`的。

所以我想…… [野田时间](http://nodatime.org)来救援！

首先让我们检查使用相同的 Windows .NET BCL 时区。

```
string tzid1 = "W. Australia Standard Time"; // Perth
DateTimeZone tz1 = DateTimeZoneProviders.Bcl[tzid1];

string tzid2 = "Sri Lanka Standard Time"; // Sri Jeyawardenepura
DateTimeZone tz2 = DateTimeZoneProviders.Bcl[tzid2];

LocalDateTime ldt1 = new LocalDateTime(2006, 1, 1, 2, 0, 0);
ZonedDateTime zdt1 = ldt1.InZoneStrictly(tz1);
Debug.WriteLine(zdt1.ToDateTimeOffset()); // 1/1/2006 2:00:00 AM +08:00
ZonedDateTime zdt2 = zdt1.WithZone(tz2);
Debug.WriteLine(zdt2.ToDateTimeOffset()); // 12/31/2005 11:30:00 PM +05:30
ZonedDateTime zdt3 = zdt1.WithZone(tz1);
Debug.WriteLine(zdt3.ToDateTimeOffset()); // 1/1/2006 2:00:00 AM +08:00 
```

嘿，这似乎解决了它，对吧？如果是这样，那就意味着问题*不*在于 Windows 时区数据，因为 Noda Time 的 BCL 提供程序使用完全相同的数据。所以肯定有什么东西确实有缺陷`TimeZoneInfo.ConvertTime`。有**Whammy #1**。

因此，为了检查一切是否正常，让我们对 IANA TZDB 数据进行同样的尝试。众所周知，它毕竟更准确：

```
string tzid1 = "Australia/Perth";
DateTimeZone tz1 = DateTimeZoneProviders.Tzdb[tzid1];

string tzid2 = "Asia/Colombo"; // Sri Jeyawardenepura
DateTimeZone tz2 = DateTimeZoneProviders.Tzdb[tzid2];

LocalDateTime ldt1 = new LocalDateTime(2006, 1, 1, 2, 0, 0);
ZonedDateTime zdt1 = ldt1.InZoneStrictly(tz1);
Debug.WriteLine(zdt1.ToDateTimeOffset()); // 1/1/2006 2:00:00 AM +08:00
ZonedDateTime zdt2 = zdt1.WithZone(tz2);
Debug.WriteLine(zdt2.ToDateTimeOffset()); // 1/1/2006 12:00:00 AM +06:00
ZonedDateTime zdt3 = zdt1.WithZone(tz1);
Debug.WriteLine(zdt3.ToDateTimeOffset()); // 1/1/2006 2:00:00 AM +08:00 
```

我的朋友们，那里是**Whammy #2**。注意中间时间是使用`+06:00`偏移量吗？我认为这是错误的，但是当我再次检查时发现[TZDB](http://www.timeanddate.com/worldclock/clockchange.html?n=389&year=2006)数据是正确的。那时*的*斯里兰卡。直到四月`+06:00`才切换。`+05:30`

因此，回顾一下 Whammys：

*   Windows`TimeZoneInfo.ConvertTime`功能似乎有缺陷。
*   该区域的 Windows 时区数据`"Sri Lanka Standard Time"`不正确。

**最好总是使用 Noda Time 和 TZDB！**

## 更新

感谢 Jon Skeet 帮助确定第一个问题是班级`"W. Australia Standard Time"`解释区域的方式。`TimeZoneInfo`

我对 .NET Framework 参考源代码进行*了更*深入的研究，我相信这发生在私有静态方法`TimeZoneInfo.GetIsDaylightSavingsFromUtc`中。我相信他们没有考虑到 DST 并不总是在同一日历年开始和停止。

在这种情况下，他们将 2006 年调整规则与 2005 年一起应用，并在`endTime`of`1/2/2005`之前得到一个`startTime`of `12/4/2005`。他们确实试图调和这应该是在 2006 年（通过错误地添加一年），但他们不认为数据是倒序的。

这个问题可能会出现在任何在冬季开始 DST 的时区（例如澳大利亚），并且它会在任何时候转换规则发生变化时以一种或另一种形式出现 - 它在 2006 年发生了变化。

我在[这里提出了关于 Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/800191/timezoneinfo-is-incorrectly-applying-dst-rules-for-zones-in-the-southern-hemisphere)的问题。

我提到的“第二次打击”只是因为斯里兰卡的历史数据不存在于 Windows 时区注册表项中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-10T19:35:18.083

只是为了在马特的回答中添加更多信息，B​​CL 似乎对自己的珀斯数据感到非常困惑。似乎认为在 2005 年底前后发生了*两次*转变——一次在世界标准时间下午 4 点，一次在八小时后。

演示：

```
using System;

class Test
{    
    static void Main()        
    {
        var id = "W. Australia Standard Time"; // Perth
        var zone = TimeZoneInfo.FindSystemTimeZoneById(id);
        var utc1 = new DateTime(2005, 12, 31, 15, 59, 0, DateTimeKind.Utc);
        var utc2 = new DateTime(2005, 12, 31, 16, 00, 0, DateTimeKind.Utc);
        var utc3 = new DateTime(2005, 12, 31, 23, 59, 0, DateTimeKind.Utc);
        var utc4 = new DateTime(2006, 1, 1, 0, 0, 0, DateTimeKind.Utc);
        Console.WriteLine(zone.GetUtcOffset(utc1));
        Console.WriteLine(zone.GetUtcOffset(utc2));
        Console.WriteLine(zone.GetUtcOffset(utc3));
        Console.WriteLine(zone.GetUtcOffset(utc4));
    }
} 
```

结果：

```
08:00:00 // 3:59pm UTC
09:00:00 // 4:00pm UTC
09:00:00 // 11:59pm UTC
08:00:00 // 12:00am UTC the next day 
```

这是非常奇怪的，*可能*与[利比亚时区中断](https://connect.microsoft.com/VisualStudio/feedback/details/787282/libyan-time-zone-has-incorrect-initial-transition#details)有关——尽管这没有*两个*转换，只有一个错位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T08:16:34.753

您必须发布特定的代码才能确定。可能存在问题，例如，一个转换应用了夏令时，而另一个转换不应用。

时区管理可能存在细微差别。建议您查看[此 Jon Skeet 博客](https://msmvps.com/blogs/jon_skeet/archive/2010/12/01/the-joys-of-date-time-arithmetic.aspx)以获得很好的概述。

事实上，正确使用 .NET 时间类非常棘手，以至于 Jon 将[Joda-Time](http://www.joda.org/joda-time/)移植到 .NET，称为[Noda Time](http://nodatime.org)。

对于任何支持多个时区的项目，都值得认真考虑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:29:14.237

您在转换时间时是否考虑过夏令时？请参考以下链接，您将得到答案。显示的时间绝对正确

[http://www.timeanddate.com/worldclock/timezone.html?n=196&syear=2000](http://www.timeanddate.com/worldclock/timezone.html?n=196&syear=2000)

# iphone - 重叠 CAShapeLayer 轮廓

> ID：10007210
> 
> 赞同：1
> 
> 时间：2012-04-04T08:08:18.523
> 
> 标签：iphone, ios, cgpath, outline, cashapelayer

我有一个由几个 CAShapeLayers 组成的 3D 相似图形对象。所有的形状（天花板和墙壁）都必须被抚摸。一些形状共享一个边缘——这似乎是问题的根源。

然而，轮廓似乎是围绕另一个形状的现有轮廓绘制的。所以我在一些形状周围得到了那些丑陋的长矛。

如何摆脱那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:19:27.003

检查 lineJoin 和 lineCap 属性，将其设置为 kCALineJoinRound 和 kCALineCapRound 可能会对您有所帮助。

[https://developer.apple.com/documentation/quartzcore/cashapelayer](https://developer.apple.com/documentation/quartzcore/cashapelayer)

# windows-phone-7 - 更改 SystemTray 进度指示器颜色

> ID：10007211
> 
> 赞同：8
> 
> 时间：2012-04-04T08:08:22.460
> 
> 标签：windows-phone-7, styling, progress-indicator

我需要改变颜色的`SystemTray.ProgressIndicator`颜色，我该怎么做？

我尝试设置`ForegroundColor`，`SystemTray`它仅适用于文本而不适用于 Inicator。指示器始终使用 PhoneAccent 颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:44:55.093

根据[Jamie Rodregez 的说法，这是不可能的](http://blogs.msdn.com/b/jaimer/archive/2011/06/04/system-tray-progress-indicator.aspx)。您可以使用普通的[ProgressBar](http://msdn.microsoft.com/en-us/library/system.windows.controls.progressbar%28v=vs.95%29.aspx)或[PerformanceProgressBar](http://www.jeff.wilcox.name/2010/08/performanceprogressbar/)并设置它的样式，使其像进度指示器一样位于页面顶部吗？

# javascript - 页面加载时的 Twitter 引导进度条动画

> ID：10007212
> 
> 赞同：42
> 
> 时间：2012-04-04T08:08:33.617
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个带有几个引导进度条的页面。设置它们的值最初可以正常工作。虽然我希望进度条在用户打开页面时动画/转换到它们的特定状态。

当您单击其中一个栏时，此 JS 工作正常。在酒吧的“onload”事件中，我需要类似的东西。但是“onload”事件对 s 不可用

```
//animate progress bars
$('.progress .bar').on("click", function(event) {
  var me = $(this);
  perc = me.attr("data-percentage");
  me.css('width', perc+'%');
}); 
```

如何在页面加载时为页面上的所有进度条实现此行为？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-04T08:16:14.403

**编辑**

*   类名在 v3.1.1 中从 更改`bar`为`progress-bar`

**HTML**

```
<div class="container">
    <div class="progress progress-striped active">
        <div class="bar" style="width: 0%;"></div>
    </div>
</div>​ 
```

**CSS**

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 30px;
    width: 400px;
}​ 
```

**jQuery**在下面和上面的小提琴中使用`document.ready`

```
$(document).ready(function(){

    var progress = setInterval(function() {
        var $bar = $('.bar');

        if ($bar.width()>=400) {
            clearInterval(progress);
            $('.progress').removeClass('active');
        } else {
            $bar.width($bar.width()+40);
        }
        $bar.text($bar.width()/4 + "%");
    }, 800);

});​ 
```

**演示**

~~[JSFiddle](http://jsfiddle.net/xXM2z/)~~

[更新了 JSFiddle](http://jsfiddle.net/5w5ku/1/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-04T10:32:31.023

虽然 Tats_innit 的回答对它有很好的触感，但我不得不做一些不同的事情，因为我在页面上有多个进度条。

这是我的解决方案：

JSfiddle：http: [//jsfiddle.net/vacNJ/](http://jsfiddle.net/vacNJ/)

HTML（示例）：

```
<div class="progress progress-success">
<div class="bar" style="float: left; width: 0%; " data-percentage="60"></div>
</div>

<div class="progress progress-success">
<div class="bar" style="float: left; width: 0%; " data-percentage="50"></div>
</div>

<div class="progress progress-success">
<div class="bar" style="float: left; width: 0%; " data-percentage="40"></div>
</div> 
```

​</p>

JavaScript：

```
setTimeout(function(){

    $('.progress .bar').each(function() {
        var me = $(this);
        var perc = me.attr("data-percentage");

        var current_perc = 0;

        var progress = setInterval(function() {
            if (current_perc>=perc) {
                clearInterval(progress);
            } else {
                current_perc +=1;
                me.css('width', (current_perc)+'%');
            }

            me.text((current_perc)+'%');

        }, 50);

    });

},300); 
```

@Tats_innit：使用 setInterval() 动态重新计算进度是一个不错的解决方案，谢谢队友！;)

**编辑：**

我的一个朋友为自定义 twitter 引导进度条编写了一个不错的 jquery 插件。这是一个演示： http: [//minddust.github.com/bootstrap-progressbar/](http://minddust.github.com/bootstrap-progressbar/)

这是 Github 存储库： [https ://github.com/minddust/bootstrap-progressbar](https://github.com/minddust/bootstrap-progressbar)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-10T16:46:38.240

Bootstrap 使用 CSS3 过渡，因此当您通过 javascript / jQuery 设置 .bar 槽的宽度时，进度条会自动设置动画。

[http://jsfiddle.net/3j5Je/](http://jsfiddle.net/3j5Je/) ..看到了吗？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-07-04T10:21:37.953

为 ellabeauty 的回答做出贡献。您还可以使用此动态百分比值

```
$('.bar').css('width',  function(){ return ($(this).attr('data-percentage')+'%')}); 
```

并且可能会在你的 CSS 中添加自定义缓动

```
.bar {
 -webkit-transition: width 2.50s ease !important;
 -moz-transition: width 2.50s ease !important;
   -o-transition: width 2.50s ease !important;
      transition: width 2.50s ease !important;
 } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-24T12:29:24.533

这是一个跨浏览器的纯 CSS 解决方案。希望能帮助到你！

[演示](http://codepen.io/tuiaverde/details/KgJbGx/)

```
.progress .progress-bar {
    -moz-animation-name: animateBar;
    -moz-animation-iteration-count: 1;
    -moz-animation-timing-function: ease-in;
    -moz-animation-duration: .4s;

    -webkit-animation-name: animateBar;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function: ease-in;
    -webkit-animation-duration: .4s;

    animation-name: animateBar;
    animation-iteration-count: 1;
    animation-timing-function: ease-in;
    animation-duration: .4s;
}

@-moz-keyframes animateBar {
    0% {-moz-transform: translateX(-100%);}
    100% {-moz-transform: translateX(0);}
}
@-webkit-keyframes animateBar {
    0% {-webkit-transform: translateX(-100%);}
    100% {-webkit-transform: translateX(0);}
}
@keyframes animateBar {
    0% {transform: translateX(-100%);}
    100% {transform: translateX(0);}
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<div class="container">

  <h3>Progress bar animation on load</h3>

  <div class="progress">
    <div class="progress-bar progress-bar-success" style="width: 75%;"></div>
  </div>
</div>
```

# objective-c - 检测 Twitter 的 iOS 版本？

> ID：10007218
> 
> 赞同：2
> 
> 时间：2012-04-04T08:09:09.333
> 
> 标签：objective-c, xcode, ios5, twitter, oauth

显然，我对 Twitter oAuth（令牌请求）的使用在 iOS 5 中不起作用......我如何为 iOS 5 以下的任何内容保留此代码并使用适用于 iOS 5+ 的新 Twitter 框架？

是否可以检测 iOS 版本？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T08:21:23.630

您（几乎）永远不想查询 iOS（甚至框架）版本。这（通常）意味着您正在解决错误的问题。

在这种情况下，你真的很想知道“我可以使用 Twitter.framework 吗？”

由于弱链接的魔力，您可以尝试以下操作：

```
if ([TWTweetComposeViewController canSendTweet]) {
    // Do something
}
else {
    // Use your original code
} 
```

您还可以检查较低级别的框架组件，例如：

```
if ([TWRequest class]) {
    // Do something
}
else {
    // Use your original code
} 
```

（显然，您需要链接 Twitter.framework 并包含必要的标头。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:17:45.453

```
if([[[UIDevice currentDevice] systemVersion] floatValue] >= 5.0) {
   //tweet
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:18:47.393

首先，其他答案是正确的——您应该避免使用 iOS 版本号来检查功能是否存在。

但是：如果您确实有充分的理由检查 iOS 版本，我一直以来最喜欢的检查 iOS 版本号的答案就是[这个 StackOverflow 答案](https://stackoverflow.com/a/5337804/670400)。如此优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:21:27.223

检测 Twitter 类是否在已安装的操作系统中：

```
if (NSClassFromString(@"TWTweetComposeViewController")) {
   //use Twitter Framework
} 
```

不要忘记在框架列表中将 Twitter 框架设为可选。

# python - 如何模拟使用 elementree 方法解析 xml 的方法

> ID：10007224
> 
> 赞同：2
> 
> 时间：2012-04-04T08:09:21.247
> 
> 标签：python, mocking, elementtree

我需要使用 Mock 模块为具有不同功能的 Python 代码编写单元测试：

*   `_read_file()`：打开一个 URL，然后使用元素树解析 xml 并返回元素树实例。
*   `validate_field`：此文件将参数作为 field_value 和 order。
    `tree.findall`函数用于获取`fields_values`列表中的所有内容，然后使用该字段的顺序将确切值存储在字段中。然后将此文件与接收到的参数进行比较，并根据比较返回 true 或 false。

我已经为上述功能编写了单元测试。我已经模拟`urllib.urlopen`了被调用函数的返回值，但它给出的错误如下：

```
IndexError: list index out of range 
```

请指导我。

下面的代码：

```
class test:

    def __init__(self, host, service_path='/policy/test.xml'):
        self.base_url = 'https://' +host + service_path
        self.service_path = service_path
        self.host = host

    def _read_policy(self, url):
        policy_xml = urllib.urlopen(url)
        self.tree = ElementTree.parse(policy_xml)
        return self.tree

    def compare(self, arg1, arg2):
        if arg1 == arg2:
            return 'true'
        else:
            return 'false'

    def validate_email(self, email, order):
        index = int(order) - 1
        email_list = self.tree.findall("testList/test/email")
        xml_email = email_list[index].text
        _resp = self.compare(xml_email, email)
        return(_resp) 
```

测试类：

```
class test_validate_email(unittest.TestCase):

    def test_validate_email(self):
        myMock = Mock( return_value = StringIO.StringIO("""<?xml version="1.0" encoding="utf-8"?><email>*@test.com</email>"""))
        urllib.urlopen = myMock
        print 'urllib.urlopen', urllib.urlopen()

        cp = test(DEFAULT_HOST)
        tree = cp._read_policy("some data")
        ElementTree.dump(tree)

        myMock2 = Mock(return_value = 'true')        
        _resp = myMock2
        print 'test_resp', _resp()

        resp = cp.validate_email('*@ashishtest.com','1')
        print 'resp', resp
        self.assertEqual(resp, 'true')

if __name__ == '__main__':
    unittest.main() 
```

# mysql - MySQL - 在单个查询中更新列的顺序

> ID：10007229
> 
> 赞同：1
> 
> 时间：2012-04-04T08:09:49.887
> 
> 标签：mysql

我正在使用 MySQL InnoDB。

我想更新一个表并控制每列更新的顺序。如果可能的话，多合一查询。原因是我有一个游戏队列系统。当你完成 queue_1 我希望它被分配 queue_2 的值，然后擦除 queue_2。

现在我得到了不可预测的结果。有时total_price_2 设置为零，然后加载到total_price_1。两者都归零。（不是我想要的。）

我读到数据库决定运行更新的顺序。如果我必须进行两次更新，那很好。我的目标是表现。

```
UPDATE
queue
SET     
queue_1 = queue_2,
total_price_1 = total_price_2,
total_wait_1 = total_wait_2,
queue_2 = '',
total_price_2 = 0,
total_wait_2 = 0 
WHERE id IN(1,2,3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:29:32.020

[根据MichaelRushton](https://stackoverflow.com/users/215384/michaelrushton)的建议，检查更新之前的`total_price_2`情况。`0`

在 MySQL 中，单表`UPDATE`查询是从“从左到右”处理的，在`UPDATE`语句文档中有说明：

> 单表 UPDATE 分配通常从左到右进行评估。对于多表更新，不能保证以任何特定顺序执行分配。（[来源](http://dev.mysql.com/doc/refman/5.6/en/update.html)）

具体来说，请注意以下示例：

> 以下语句中的第二个赋值将 col2 设置为当前（更新的）col1 值，而不是原始 col1 值。结果是 col1 和 col2 具有相同的值。此行为不同于标准 SQL。

```
UPDATE t1 SET col1 = col1 + 1, col2 = col1; 
```

**边注**

附带说明一下，您还可以使用子句显式指定要更新的*行的顺序：*`ORDER BY`

> 如果没有 WHERE 子句，所有行都会更新。如果指定了 ORDER BY 子句，则按指定的顺序更新行。（[来源](http://dev.mysql.com/doc/refman/5.6/en/update.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:20:59.003

将更新查询拆分为`queue_1`和`queue_2`。

`queue_1`对和 进行一个更新查询`queue_2`，因为 MySQL 在更新值时会感到困惑，并且它会在更新`queue_2`之前更新`queue_1`，这会产生结果`0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:53:31.543

值得注意的是，如果您依赖于服务器相关的行为，例如 所暗示的`This behavior differs from standard SQL`，您以后需要小心。如果你改变数据库怎么办？或者其他人在没有意识到排序的重要性的情况下更新了代码？

您最好将更新拆分为两个清晰的语句，并使用事务来确保它们以原子方式运行。

# javascript - 通过知道内部 div 的大小来实现 html 页面最大宽度

> ID：10007230
> 
> 赞同：0
> 
> 时间：2012-04-04T08:09:51.177
> 
> 标签：javascript, jquery, css, html, fluid-layout

这是我的 HTML 代码

```
<div class="container">
    <div class="menu-vertical">menu-vertical</div>
    <div class="mainContent">mainContent</div>
</div>​ 
```

这是我的 CSS

```
.container {
    border: 3px solid #666;
    overflow: hidden
}
.menu-vertical {
    width: 230px;
    float: left;
    padding: 10px;
    border: 2px solid #f0f
}
.mainContent {
    overflow: hidden;
    padding: 30px;
    border: 2px solid #00f
}​ 
```

现在我想在固定大小的范围`div`内制作一些内容，但是如果宽度变成了，可以说我将连续 4 个，然后再连续 4 个。所以 4意味着它将是，因此我将拥有额外的空间。`mainContent``150px``mainContent``650px``div``div``600px``50px`

现在最后我想要做的是检测这个空白空间并将其`mainContent` `max-width`设为 600px`。任何可以做到这一点的技巧。Javascript什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:51:53.550

这是使用jquery的解决方案：

```
$(function(){
   var outerdiv = $('.mainContent');
   var innerdivs = $('.mainContent > div'); 
   var sum =0;

    innerdivs.each(function(index){
        sum += $(this).width();    //calculate and add the widths of every div
    });   

    //outerdiv.width(sum);        //set new width for .maincontent

    outerdiv.css("max-width", sum);   //you can also set max-width like this.
}); 
```

您可以在这里查看 jsfiddle：http: [//jsfiddle.net/jqYK6/](http://jsfiddle.net/jqYK6/)

问候，
索拉布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:58:39.093

[https://stackoverflow.com/a/10011466/1182021](https://stackoverflow.com/a/10011466/1182021)

这是答案的链接......等待很长时间后，我想到了这个。

# android - 为什么我的自定义 SimpleCursorAdapter 在 ListView 滚动时返回不同的结果

> ID：10007231
> 
> 赞同：0
> 
> 时间：2012-04-04T08:09:58.207
> 
> 标签：android, listview, simplecursoradapter

我正在尝试实现自定义 SimpleCursorAdapter 以切换 ListView 中的布局，但滚动时得到非常随机的结果。

我的问题是，当我上下滚动时，ListView 似乎是随机的，混淆了布局。例如，一行一开始可以有 listview_item_row 布局，但是当滚动进出屏幕时，它可以被 listview_item_reply_row 替换并再次返回。我不能说我真的了解 newView 是如何工作的。我已经成功地能够使用 bindView 来确定我是否要在布局中隐藏图像，但是对于它的实现以及为什么列表滚动的行为方式，新视图对我来说是黑暗的。

我的目标是有一个包含 x 个项目的列表。根据该项目是回复还是新消息，我想在该行上加载特定布局。根据行是否有图像，我想在行布局中显示/隐藏图像视图。

我在代码中省略的是导入和行布局。我正在尝试通过在 v4 支持包中使用 Fragments 和 SimpleCursorAdapter 来实现这一点。ListFragment 的行布局明显不同，但包含相同的小部件。

ListView 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/text_feed_header_random"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal"
    android:padding="4dp"
    android:text="Allmänt"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#FFF" />

<!--
The frame layout is here since we will be showing either
the empty view or the list view.

-->

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/text_feed_header_random"
    android:layout_above="@+id/footer" >

    <!--
         Here is the list. Since we are using a ListActivity, we
         have to call it "@android:id/list" so ListActivity will
         find it

    -->

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:drawSelectorOnTop="false" />

    <!-- Here is the view to show if the list is emtpy -->

    <TextView
        android:id="@android:id/empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="No items."
        android:textAppearance="?android:attr/textAppearanceMedium" />
</FrameLayout>

<LinearLayout
    android:id="@+id/footer"
    style="@android:style/ButtonBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_random_post"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Gör ett inlägg!" />

    <Button
        android:id="@+id/button_random_refresh"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Refresh list!" />
</LinearLayout>
</RelativeLayout> 
```

使用上述布局的浓缩片段：

```
public class RandomFragment extends ListFragment implements LOG {
private DatabaseHelper mDbHelper;
private KarenfeedCursorAdapter mAdapter;
private Cursor mCursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "RANDOMFRAGMENT START!");

    mDbHelper = new DatabaseHelper(getActivity());
    mDbHelper.open();
    mDbHelper.setTable(Posts.TABLE_RANDOM_POSTS);

    //TODO: Replace SimpleCursorAdapter with a FragmentList instead...
    mCursor = mDbHelper.getAllPostsSortedCursor();
    String[] columns = {    Posts.COLUMN_ID,        Posts.COLUMN_CREATED,   Posts.COLUMN_USER,  Posts.COLUMN_COMMENT };
    int[] to = {            R.id.imageItemPhoto,    R.id.textItemDate,      R.id.textItemUser,  R.id.textItemComment };
    int flags = 0;
    mAdapter = new FeedCursorAdapter(getActivity(), R.layout.listview_item_row, mCursor, columns, to, flags);
    this.setListAdapter(mAdapter);
    initFeedList(); // This call in the end executes mCursor = mDbHelper.getAllPostsSorted(); mAdapter.changeCursor(mCursor); mAdapter.notifyDataSetChanged();
}
} 
```

ListFragment 连接到的 SimpleCursorAdapter：

```
public class FeedCursorAdapter extends SimpleCursorAdapter implements LOG {
private Context mContext;
private int mLayout;

public FeedCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) {
    super(context, layout, c, from, to, flags);
    // TODO Auto-generated constructor stub
    mContext = context;
    mLayout = layout;
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View view;
    int id = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_ID));
    int parentId = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_PARENT_ID));
    Log.d(TAG, "id: " +id+ " parentId: " +parentId);
    int hasImage = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_IMAGE));
    if(id == parentId) {
        view = inflater.inflate(R.layout.listview_item_row, parent, false);
    } else {
        view = inflater.inflate(R.layout.listview_item_reply_row, parent, false);
    }
    return view;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    Log.d(TAG, "bindView()");
    int id = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_ID));
    int parentId = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_PARENT_ID));
    int hasImage = cursor.getInt(cursor.getColumnIndex(Posts.COLUMN_IMAGE));
    String date = cursor.getString(cursor.getColumnIndex(Posts.COLUMN_CREATED));
    String user = cursor.getString(cursor.getColumnIndex(Posts.COLUMN_USER));
    String comment = cursor.getString(cursor.getColumnIndex(Posts.COLUMN_COMMENT));
    TextView dateView = (TextView) view.findViewById(R.id.textItemDate);
    TextView userView = (TextView) view.findViewById(R.id.textItemUser);
    TextView commentView = (TextView) view.findViewById(R.id.textItemComment);
    ImageView imageView = (ImageView) view.findViewById(R.id.imageItemPhoto);

    dateView.setText(date);
    userView.setText(user);
    commentView.setText(comment);
    if(hasImage == 0) {
        imageView.setVisibility(ImageView.GONE);
    } else {
        String bitmapPath = Environment.getExternalStorageDirectory().getPath() + "/feed/" + id + "_thumb.jpg";
        Bitmap bitmap = BitmapFactory.decodeFile(bitmapPath);
        BitmapDrawable bitmapDrawable = new BitmapDrawable(bitmap);
        imageView.setImageDrawable(bitmapDrawable);
        imageView.setVisibility(ImageView.VISIBLE);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:48:29.043

在阅读了您的问题和代码后，我认为您应该知道，每当您向上或向下滚动列表视图时，它都会与适配器通信以填充进入焦点的新项目，并且对于不同数据的不同行的情况，您应该制作一个arraylist 将包含背景不同的项目的名称或 id，然后您在每次调用适配器时根据需要开始制作背景。

# c# - 在 asp 向导中禁用按钮 onclick

> ID：10007235
> 
> 赞同：0
> 
> 时间：2012-04-04T08:10:26.130
> 
> 标签：c#, javascript, asp.net, aspwizard

我的页面上有一个包含三个步骤的 asp 向导。

```
<asp:Wizard ID="wizardBestellen" runat="server" ActiveStepIndex="0" DisplaySideBar="False" onfinishbuttonclick="wizard_NextButtonClick" onnextbuttonclick="wizard_NextButtonClick" onpreviousbuttonclick="wizard_PreviousButtonClick">
          <StartNavigationTemplate></StartNavigationTemplate>
          <StepNavigationTemplate></StepNavigationTemplate>
          <FinishNavigationTemplate></FinishNavigationTemplate>
          <WizardSteps>
            <asp:WizardStep runat="server" ID="step1" StepType="Start">
              <uc1:control ID="uc1" runat="server" />
            </asp:WizardStep>
            <asp:WizardStep runat="server"ID="step2" StepType="Step">
              <uc2:control ID="uc2" runat="server" />
            </asp:WizardStep>
            <asp:WizardStep ID="step3" runat="server" StepType="Finish">
              <uc3:control ID="uc3" runat="server" />
            </asp:WizardStep>
          </WizardSteps>
        </asp:Wizard> 
```

现在每个控件都有一个下一个和一个上一个按钮，单击后会验证您的数据并将您发送到下一步。按钮都看起来像：

```
<asp:LinkButton ID="bntPrevious" runat="server" CommandName="MovePrevious" CssClass="buttonOrange" CausesValidation="false"><span>Previous</span></asp:LinkButton>
<asp:LinkButton ID="btnNext" runat="server" CommandName="MoveNext" CssClass="buttonOrange" CausesValidation="true"><span>Next</span></asp:LinkButton> 
```

到目前为止，一切都很完美。现在我想在点击按钮后禁用按钮并显示一个带有加载器图像的 div。所以我创建了一个名为的 div`divLoader`和一个 javascript 函数，它隐藏了按钮所在的 div 并使用加载器显示 div。

```
function ToggleDiv(divButton, divLabel)
{

        if (divButton.style.display == 'block')
        {
            divButton.style.display = 'none';
            divLabel.style.display = 'block';
        }
        else
        {
            divButton.style.display = 'block';
            divLabel.style.display = 'none';
        }
} 
```

但我不能让它工作。ToggleDiv 函数在另一种情况下效果很好，所以这不是问题。我尝试从链接按钮中的 OnClick 属性调用该函数，但这给了我一个错误。我尝试了 OnClientClick，但这不起作用，我还尝试在后面的代码中设置 onclick 属性，这也是死路一条。

任何人都可以向我解释我做错了什么还是有另一种方法可以防止用户点击按钮两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:24:08.870

听起来你没有让绑定工作。

我要做的第一件事是通过查看源来检查发出的控件 ID。.NET 框架的某些实现为这些控件 ID 添加了额外的绒毛，因此不能保证它与表单上显示的相同。

接下来，我会尝试一些 JavaScript 后期绑定。如果你有一个 JavaScript 文件，把它放在那里。如果不创建一个或在表单的底部添加一个 JavaScript 块（根据偏好创建一个新文件）。

使用 jQuery 之类的 JAvaScript 库，这一切都会变得容易得多，但目前让我们假设您没有库。

添加窗口 onload 事件处理程序

```
window.onload = function(){
    //code to go here
} 
```

现在为您的按钮添加点击绑定：

```
window.onload = function(){
    document.getElementById("***YOUR BUTTON ID***").onclick = function(){
        ToggleDiv(this, document.getElementById("***YOUR LABEL ID***"));
    }
} 
```

我说使用 jQuery 会更轻松一些，嗯，这是等效的实现：

```
$(document).ready(function(){
    $("#***YOUR BUTTON ID***").click(function(){
        $(this).toggle();
        $("#***YOUR LABEL ID***")).toggle();
    });
}); 
```

上面的示例完全消除了对您的`ToggleDiv`功能的需求。

# asp.net-mvc - ASP.NET MVC3 应用程序可以在不更改特定代码的情况下托管在云中吗？

> ID：10007236
> 
> 赞同：2
> 
> 时间：2012-04-04T08:10:33.047
> 
> 标签：asp.net-mvc, cloud-hosting, appharbor

我使用以下方法创建了一个 ASP.NET Web 应用程序：

*   ASP.NET MVC 3 Web 窗体
*   LINQ转SQL
*   MS SQL Server 数据库
*   WCF

需要做什么才能将其托管在云服务上？我是否应该将其转换为 Azure 应用程序。我可以直接在云中上传我的 ASP.Net MVC Web 应用程序，而无需在托管之前进行特定的代码更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:21:43.660

Please understand that there is no need to change your code to host your application in cloud. Cloud hosting is nothing but a traditional hosting with advanced infrastructure. Yes, you can directly upload my ASP.Net MVC Web application in a Cloud without specific code changes

You only need to change your code, if you want to add CDN hosting with the cloud.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:32:52.967

您无需修改​​即可将您的应用程序推送到[AppHarbor](https://appharbor.com/)，我们将在云中运行和扩展您的应用程序而无需修改。

（免责声明，我是 AppHarbor 的联合创始人）

# c - C 代码循环性能 [续]

> ID：10007243
> 
> 赞同：83
> 
> 时间：2012-04-04T08:11:33.050
> 
> 标签：c, performance, intel, instructions, assembly

这个问题继续我的问题here（根据Mystical的建议）：

[C 代码循环性能](https://stackoverflow.com/questions/9992054/c-code-loop-performance)

* * *

继续我的问题，当我使用打包指令而不是标量指令时，使用内在函数的代码看起来非常相似：

```
for(int i=0; i<size; i+=16) {
    y1 = _mm_load_ps(output[i]);
    …
    y4 = _mm_load_ps(output[i+12]);

    for(k=0; k<ksize; k++){
        for(l=0; l<ksize; l++){
            w  = _mm_set_ps1(weight[i+k+l]);

            x1 = _mm_load_ps(input[i+k+l]);
            y1 = _mm_add_ps(y1,_mm_mul_ps(w,x1));
            …
            x4 = _mm_load_ps(input[i+k+l+12]);
            y4 = _mm_add_ps(y4,_mm_mul_ps(w,x4));
        }
    }
    _mm_store_ps(&output[i],y1);
    …
    _mm_store_ps(&output[i+12],y4);
    } 
```

该内核的测量性能约为每个周期 5.6 FP 操作，尽管我希望它恰好是标量版本性能的 4 倍，即每个周期 4.1,6=6,4 FP 操作。

考虑到权重因子的移动（感谢您指出），时间表如下所示：

![日程](../Images/0ab6a2c096c4257e38433446565e48b6.png)

看起来时间表没有改变，尽管在`movss`将标量权重值移动到 XMM 寄存器然后用于`shufps`将这个标量值复制到整个向量中的操作之后有一条额外的指令。`mulps`考虑到从负载到浮点域的切换延迟，权重向量似乎已经准备好及时使用，因此这不应该产生任何额外的延迟。

这个内核中使用的`movaps`（对齐的、打包的移动）`addps`和`mulps`指令（用汇编代码检查）具有与其标量版本相同的延迟和吞吐量，因此这也不应该产生任何额外的延迟。

假设这个内核可以获得的最大性能是每个周期 6.4 FP ops 并且它以每个周期 5.6 FP ops 运行，是否有人知道每 8 个周期的这个额外周期花在哪里？

* * *

顺便说一下，这里是实际装配的样子：

```
…
Block x: 
  movapsx  (%rax,%rcx,4), %xmm0
  movapsx  0x10(%rax,%rcx,4), %xmm1
  movapsx  0x20(%rax,%rcx,4), %xmm2
  movapsx  0x30(%rax,%rcx,4), %xmm3
  movssl  (%rdx,%rcx,4), %xmm4
  inc %rcx
  shufps $0x0, %xmm4, %xmm4               {fill weight vector}
  cmp $0x32, %rcx 
  mulps %xmm4, %xmm0 
  mulps %xmm4, %xmm1
  mulps %xmm4, %xmm2 
  mulps %xmm3, %xmm4
  addps %xmm0, %xmm5 
  addps %xmm1, %xmm6 
  addps %xmm2, %xmm7 
  addps %xmm4, %xmm8 
  jl 0x401ad6 <Block x> 
… 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:14:07.827

尝试在 Vtune 中使用 EMON 分析，或类似 oprof 之类的等效工具

*   [Vtune for Linux](http://software.intel.com/en-us/articles/intel-vtune-performance-analyzer-for-linux-installation-limitations-for-vtune-analyzer-90-for-linux/)（可以搜索Windows版本）
*   [oprofile](http://oprofile.sourceforge.net/about/)

EMON（事件监控）分析 => 类似于基于时间的工具，但它可以告诉您是什么性能事件导致了问题。虽然，您应该首先从基于时间的配置文件开始，看看是否有特定的指令跳出。（可能还有相关事件会告诉您该 IP 多久出现一次退休摊位。）

要使用 EMON 分析，您必须运行一系列事件，范围从“通常的嫌疑人”到...

在这里，我将从缓存未命中、对齐开始。我不知道您使用的处理器是否有针对 RF 端口限制的计数器——它应该有——但我很久以前就添加了 EMON 分析，而且我不知道它们通过添加适合微架构的事件来跟上的效果如何。

也有可能是前端，取指令，停顿。无论如何，这些指令中有多少字节？也有 EMON 事件。

* * *

回应 Nehalem VTune 看不到 L3 事件的评论：不正确。这是我要添加评论的内容，但不适合：

实际上，有 LL3 / L3$ / 所谓的 Uncore 的性能计数器。如果 VTune 不支持它们，我会感到非常惊讶。请参阅[http://software.intel.com/sites/products/collat​​eral/hpc/vtune/performance_analysis_guide.pdf](http://software.intel.com/sites/products/collateral/hpc/vtune/performance_analysis_guide.pdf)指向 VTune 和其他工具，例如 PTU。事实上，即使没有 LL3 事件，正如 David Levinthal 所说：“英特尔® 酷睿™ i7 处理器有一个‘延迟事件’，它与安腾® 处理器家族数据 EAR 事件非常相似。此事件对负载进行采样，记录在指令执行和数据实际传送之间循环。如果测量的延迟大于编程到 MSR 0x3f6 位 15:0 的最小延迟，则计数器递增。计数器溢出启动 PEBS 机制，并在下一个满足延迟阈值的事件，测量的延迟，虚拟或线性地址和数据源被复制到 PEBS 缓冲区中的 3 个附加寄存器中。因为虚拟地址被捕获到已知位置，采样驱动程序还可以执行虚拟到物理的转换并捕获物理地址。物理地址标识 NUMA 主位置，原则上允许分析缓存占用的详细信息。”他还在第 35 页指出了 VTune 事件，例如 L3 CACHE_HIT_UNCORE_HIT 和 L3 CACHE_MISS_REMOTE_DRAM。有时您需要查找数字代码并将它们编程到 VTune 的低级界面中，但我认为在这种情况下，它在漂亮的用户界面中是可见的。

* * *

好的，在[http://software.intel.com/en-us/forums/showthread.php?t=77700&o=d&s=lr](http://software.intel.com/en-us/forums/showthread.php?t=77700&o=d&s=lr)俄罗斯的一位 VTune 程序员（我认为）“解释”你不能在 Uncore 上采样事件。

他错了——例如，您可以只启用一个 CPU，然后进行有意义的采样。我也相信有能力在 L3 丢失数据返回 CPU 时对其进行标记。事实上，总体而言，L3 知道它将数据返回到哪个 CPU，因此您绝对可以进行采样。您可能不知道哪个超线程，但您可以再次禁用，进入单线程模式。

但看起来，这很常见，你必须在 VTune 周围工作，而不是使用它，才能做到这一点。

首先尝试延迟分析。这完全在 CPU 内部，VTune 的人不太可能把它搞砸了。

而且，我再说一遍，很可能你的问题出在核心，而不是 L3。所以 VTune 应该能够处理这个问题。

* * *

试试 Levinthal 的“循环会计”。

# plone - 如何为灵巧创建上传/参考小部件/字段

> ID：10007245
> 
> 赞同：1
> 
> 时间：2012-04-04T08:11:56.170
> 
> 标签：plone, dexterity

我在许多项目中使用 archetypes.uploadreferencewidget，因为它让我的客户拥有一个与所有内容类型共享的文件夹“图像”，以生成共享内容引导图像。

现在我想灵活地做到这一点，但我从未创建过 z3cform 小部件/或字段。我已经搜索过这种小部件，但我没有找到它。

那么我应该如何创建这个。一个简单的 z3cform 小部件是否可以像 archetypes.uploadreferencewidget 一样实现上传和可配置？我觉得这是该领域的责任，但不明白为什么/为什么不。

欢迎任何想法。

# c++ - c 在 c++ 中强制转换，编译时还是运行时？

> ID：10007248
> 
> 赞同：3
> 
> 时间：2012-04-04T08:12:06.893
> 
> 标签：c++, c, casting

有谁知道，例如，我是否正在用 C++ 编写以下代码：

```
int a;
void *ptr = &a;
ptr = (char *)ptr + 1; //<-- this is the interesting line; 
```

是否`(char *)`唯一告诉编译器如何处理这个变量？
还是它实际上在运行时添加了更多计算？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:16:31.633

在这种情况下，不会进行额外的计算。

但是，在某些情况下，强制转换在技术上是一种转换，主要是数字输入。例如，下面可以引入运行时代码（前提是它没有被优化，在像这样的一个小例子中你会期望它是这样的）：

```
int x = 42;
double d = (double)x; 
```

在这里，int 和 double 的内部表示意味着您不能只更改编译器查看变量的方式，还必须更改数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T08:12:48.640

在这里，它纯粹是编译时转换。

在一般情况下，C 风格的强制转换*可能*会导致添加一两条指令，例如，如果需要缩小/扩大变量，但这种情况很少见，并不完全影响性能。

我知道的唯一运行时演员表是`dynamic_cast`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T08:14:35.377

对于您的具体示例，它只是绕过编译器。你基本上是在说“我知道这不是一个`char*`，但我知道我在做什么，相信我”。

**但是**，如果您有用户定义的类型，则可以重载强制转换运算符，它将执行您告诉它的操作：

```
struct A
{
   char* x;
   A() : x("abc") {}
   operator char() { return x[0]; }
   operator char*() { return x; }
};

int main()
{
   A a;
   char x = (char)a;   // x == 'a'
   char* y = (char*)a; // y == "abc"
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:15:41.790

这取决于演员表，我觉得 C 有点不满意。我宁愿有单独的机制来将一种类型转换为另一种类型并将一块内存视为特定类型。

然而，对于指针，它始终只是编译时的事情。A与 a`char*`具有完全相同的表示形式`void*`（它们只是一个内存地址），因此无需转换它们。

# ios - 使用虚拟机在 Windows 上制作 iOS 应用程序

> ID：10007255
> 
> 赞同：0
> 
> 时间：2012-04-04T08:12:55.083
> 
> 标签：ios, virtual-machine

> **可能的重复：**
> [Windows 上的 iPhone 开发](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

所以我试图找到一种在 PC 上制作 iOS 应用程序的方法。我没有钱购买 Mac，所以这不是一个选择。我正在考虑使用虚拟机在 Windows 上安装 Mac OSX。我知道如果不是在 Mac 上编译，Apple 不会接受我的应用程序。但是，如果我将代码提供给拥有 Mac 的人只是为了编译它，他们会接受吗？另外，您能否给我一些关于使用 windows 制作 iOS 应用程序的提示（缺点等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:24:02.403

如果您在 Windows 内或任何非 Apple 制造的硬件上运行它，您将违反 OSX 许可证。虽然很多人都逃脱了这一点，但我不会出于开发软件的目的而这样做。如果您想编写 iOS 应用程序，请像其他人一样遵守规则并购买 Mac。

# facebook - Facebook Javascript SDK 本地主机错误消息

> ID：10007257
> 
> 赞同：3
> 
> 时间：2012-04-04T08:12:57.200
> 
> 标签：facebook, facebook-c#-sdk, facebook-javascript-sdk

我正在尝试登录 facebook，这是我的代码：

```
<body>
<form id="form1" runat="server">
    <div id="fb-root"></div>
    <script>    
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=221385331301885";
            fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
    </script> 
    <div class="fb-login-button" data-show-faces="false" data-width="300"></div>
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '221385323101885', // App ID
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });

            // Additional initialization code here
        };

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));
    </script>
</form>
</body> 
```

当我运行此代码时，我收到此错误消息：

![在此处输入图像描述](../Images/df47b5f6cfa4be262b557c6b4c434049.png)

[我尝试使用https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)调试窗口中的 URL，但是它一直告诉我 URL 不可抓取：/ 如果您想尝试调试，URL 如下：

```
https://www.facebook.com/dialog/oauth?api_key=221385331301885&app_id=221385331301885&client_id=221385331301885&display=popup&domain=127.0.0.1&locale=en_GB&origin=1&redirect_uri=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%23cb%3Df4b3e7f08%26origin%3Dhttp%253A%252F%252F127.0.0.1%253A81%252Ff22a06766%26relation%3Dopener%26transport%3Dpostmessage%26frame%3Df23609e538&response_type=token%2Csigned_request&sdk=joey 
```

我更改了我的主机文件以添加 127.0.0.1 localhost.local 的条目以匹配我的 Facbook 应用程序设置。以下是我的主机文件和我的 facebook 应用程序设置的屏幕截图：

![主机文件](../Images/d2b42c5865475a108a580fff9ee5a62f.png)

![Facebook 应用程序设置](../Images/06d1eafe67b2490177eeb4fb4e52c40e.png)

如您所见，hosts 文件和 facebook 应用程序设置中的域是相同的。关于如何解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:46:12.580

我想我找到了你的问题，但我不确定它为什么会发生......

我试图完全按照您所做的那样做，但是使用*移动网络*时，我在*网站选项中有**http://localhost*（并且移动设备是空的）。一切正常。

 *当我将它从*网站*切换到*移动网络*时，我收到了与您报告的相同的错误。您**必须**使用移动选项吗？

此外，您正在加载 fb sdk 两次，不知道为什么，第一次使用此源：

> //connect.facebook.net/en_GB/all.js#xfbml=1&appId=221385331301885

然后再次使用此来源：

> “//connect.facebook.net/en_US/all.js”

重点是什么？简单地这样做有什么问题：

```
<div id="fb-root"></div>
<div class="fb-login-button" data-show-faces="false" data-width="300"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
        appId: '221385323101885', // App ID
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true  // parse XFBML
        });

        // Additional initialization code here
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script> 
```

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T20:45:20.867

为我添加`Site URL : http://localhost`作品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T17:24:34.440

现在您必须在 Apache 中创建一个虚拟主机*

# c++ - 为什么 printf 不格式化 unicode 参数？

> ID：10007261
> 
> 赞同：8
> 
> 时间：2012-04-04T08:13:12.557
> 
> 标签：c++, c, visual-studio-2010, unicode

使用 printf 将双字节字符串格式化为单字节字符串时：

```
printf("%ls\n", L"s:\\яшертыHello");   // %ls for a wide string (%s varies meaning depending on the project's unicode settings). 
```

显然，有些字符不能表示为 ascii 字符，所以有时我看到双字节字符变成“？”的行为。标记字符。但是，这似乎取决于特定的字符。对于上面的 printf，输出是：

```
s:\ 
```

我希望我可能会得到类似的东西：

```
s:\??????Hello 
```

恐怕我已经失去了这个例子，但我认为对于一个字符串，当它遇到 unicode 字符时，将第一个字符串替换为“？” 然后放弃了剩下的。

所以，我的问题是，当您将宽字符串格式化为单字节字符串时会发生什么。此处的文档：http: [//msdn.microsoft.com/en-us/library/hf4y5e3w.aspx](http://msdn.microsoft.com/en-us/library/hf4y5e3w.aspx)说“字符显示到第一个空字符”。但是，我没有看到。这是 printf 中的错误，还是我在某处看到的行为记录在哪里，如果是，在哪里。

谢谢你的帮助。

**更新**

感谢人们为我提供使用 printf 的替代方案的回答。我将改用另一种方法，但出于好奇，我真的很感兴趣 printf 为什么没有可靠的记录行为。似乎它的实施者竭尽全力使这不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T08:31:46.353

我希望您的代码能够正常工作——它可以在 Linux 上工作——但它取决于语言环境。这意味着您必须设置语言环境，并且您的语言环境必须支持使用的字符集。这是我的测试程序：

```
#include <locale.h>
#include <stdio.h>

int main()
{
    int c;
    char* l = setlocale(LC_ALL, "");
    if (l == NULL) {
        printf("Locale not set\n");
    } else {
        printf("Locale set to %s\n", l);
    }
    printf("%ls\n", L"s:\\яшертыHello");
    return 0;
} 
```

这是一个执行跟踪：

```
$ env LC_ALL=en_US.utf8 ./a.out
Locale set to en_US.utf8
s:\яшертыHello 
```

如果它说没有设置语言环境或设置为“C”，那么您没有得到您期望的结果是正常的。

编辑：请参阅[此问题](https://stackoverflow.com/questions/4324542/what-is-the-windows-equivalent-for-en-us-utf-8-locale)的答案，以获取相当于 Windows 的 en_US.utf8 的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T08:26:33.287

在 C++ 中，我通常`std::stringstream`用来创建格式化文本。我还实现了一个自己的运算符来使用 Windows 函数进行编码：

```
ostream & operator << ( ostream &os, const wchar_t * str )
{
  if ( ( str == 0 ) || ( str[0] == L'\0' ) )
   return os;
  int new_size = WideCharToMultiByte( CP_UTF8, 0, str, -1, NULL, NULL, NULL, NULL );
  if ( new_size <= 0 )
    return os;
  std::vector<char> buffer(new_size);
  if ( WideCharToMultiByte( CP_UTF8, 0, str, -1, &buffer[0], new_size, NULL, NULL ) > 0 )
    os << &buffer[0];
  return os;
} 
```

此代码转换为 UTF-8。对于其他可能性检查：[`WideCharToMultiByte`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)。

# javascript - Javascript textContent 返回未定义

> ID：10007263
> 
> 赞同：1
> 
> 时间：2012-04-04T08:13:22.783
> 
> 标签：javascript, jquery, syntax

这是我的代码：

```
var text1 = "↵,<strong>bla bla</strong>";//here text1 has value
text1 = text1.textContent;//here it is undefined 
```

为什么？以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:15:03.277

`text1`是纯字符串，而不是 DOM 元素。

正如您[在 MDN](https://developer.mozilla.org/En/DOM/Node.textContent)中看到的，`textContent`是`Node`对象的属性。[`String`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String)相反，对象[不具有这样的属性](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String#Properties_2)。

而且由于删除标签是一项非常简单的任务，添加一个相当大的库是没有意义的（尽管只要你想用 DOM 做更多的事情， jQuery**就很棒），这里有一个简单的方法来做到这一点：**

```
var elem = document.createElement('div');
elem.innerHTML = '<strong>hi &amp; bye</strong>';
alert(elem.textContent || elem.innerText || ''); // displays "hi & bte" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T08:15:20.780

`text1`是一个字符串，而不是一个 DOM 节点。

您需要将 HTML 转换为 DOM（通过使用 JS DOM 解析器将其添加到文档中`innerHTML`或通过编写/查找 JS DOM 解析器），然后才能在其上使用 DOM 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T08:44:09.767

其他人已经给你答案了，我只是评论一下。

虽然[textContent](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent)自 DOM 3 Core 以来（大约 8 年）就已经存在，但大多数浏览器已经实现了（MS 专有的）[innerText](http://msdn.microsoft.com/en-us/library/ms533899%28v=vs.85%29.aspx)属性。所以如果你有一个节点，你可以这样做：

```
var theTextContent = typeof node.textContent == 'string'? node.textContent : node.innerText; 
```

或者写一个更健壮的函数。

### 编辑

这是一个完整的解决方案：

```
function getText(el) {
  return el.textContent || el.innerText || '';
}

var text1 = "<strong>bla bla</strong>"
var d = document.createElement('div');
d.innerHTML = text1;

alert(getText(d)); // bla bla 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-04T08:19:20.207

您可以使用 jQuery 来完成此类任务。

首先添加对jQuery库的引用，然后就这么简单：

```
var text1 = "↵,<strong>bla bla</strong>";//here text1 has value
text1 = $("<div>").html(text1).text();
alert(text1);​ 
```

[现场测试用例](http://jsfiddle.net/5BsjQ/1/)。

# android - 如何在 Android webview 中显示印地语字体

> ID：10007267
> 
> 赞同：4
> 
> 时间：2012-04-04T08:13:37.817
> 
> 标签：android, html, css

我们如何在 android webview 中显示印地语，我从 github 获得了示例，但这是针对泰米尔语的，使用如下内容：

jpUkiy nfhOk;G Fz;LtPr;R epfo;Tfisg; ghu;f;f Kd;du; ,e;j epfo;tpd; jhf;fj;ijNa khw;wpaikj;j xUtiug; gw;wp rpy tupfs; vOjNtz;Lk;.

伊帕杜; l; gpu;rhy; (Leonard Birchall) xU fNdba tpkhd Xl;b。rpWtajpy; ,Ue;Nj,tupw;F gwf;Fk; 先生。xe;jhupNah khdpyj;jpy; gpwe;j,tu; 1933 年 努海；fNdba,uhZtf; fy;Y}upapy; gbj;Jg; gl;lk; ngw;whu;. 1937 年 jdJ gapw;rpia Kbj;J fNdba Nwhay; tpkhdg; 吉拉比；tpkhd Xl;bahf ,ize;J nfhz;lhu;.

n\l;yhd;l; jPTfspy；jdJ gzpia Vw;Wf; nfhz;l ypNahdhl; gpd;杜; ig;ghdpau;fs; 新泽西州; fpof;F Mrpa ehLfisf; ifg;gw;wj; njhlq;fpaJk; ,yq;iff;F khw;wg;gl;lhu;. ,yq;ifapy; gwe;J fz;fhzpg;Gr; nra;AK; gzpapy; ,你;

4 Vg;uy; 1942 md;W ypadhu;l; nfhf;fiy gpuNjrj;jpy; ,Ue;J gwf;Fk; glF (mJjhd; ePupy; jiuapwq;Fk; tpkhdk;) fl;lyPdhtpy; 大众汽车；gwf;fj; njhlq;fpdhu;. 鲁库；thdj;jpy; vl;L kzp Neuq;fs; Rw;wp fz;fhzpg;G gzpapy;

ngupa Ig;ghdpaf; flw;gilj; njhFjp xd;W,yq;if Nehf;fp tpiue;Jnfhz;bUe;jJ。，日元; 即;J tpkhde; jhq;fpf; fg;gy;fSk; ,Ue;jJ. gu gug;ghd ypadhl; jdJ tpkhdj;jpy; ,Ue;j rf tPuu;fs; %yk; jiuf;F jftiy tpiue;J njuptpj;jhu;.

,tu;fspd; tpkhdj;ijf; fz;l Ig;ghdpa fg;gy; jkJ fg;gypy; ,Ue;J jhf;Fjy; tpkhdj;ij Vtp ypadhu;l;bd; tpkhdj;ij Nehf;fpr; Rlj;njhlq;fpaJ。ntWk; fz;fhzpg;G tpkhdk; vd;gjdhy; jpUg;gpr; rz;il $lg; Nghl Kbahky; R+L gl;L 飞行; tPo;e;jJ ypadhu;l; gadpj;j fl;lyPdh ,uf tpkhdk;.

这是什么格式，我们如何才能获得特定文本的格式？是否有任何转换器？请帮我解决这个问题..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:50:48.477

您将不得不使用以下 CSS hack :) 确保使用非 unicode 字体。Unicode fons 失败了。

```
@font-face {
 font-family: MyCustomFont;
 src: url("file:///android_asset/Bamini.ttf") /* TTF file for CSS3 browsers */
} 
```

和

```
body {
 font-family: MyCustomFont, Verdana, Arial, sans-serif;
 font-size: medium;
 color: black
} 
```

有关详细信息，请参阅我的开源项目[@GitHub](https://github.com/mayooresan/Japs-Attack-Ceylon--Android-App/blob/master/assets/japs/Index.html)。

您可以找到许多在线字体转换器。例如，我使用了[Suratha 网站上提供的 Bamini 字体转换器](http://www.suratha.com/uni2bam.htm)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:18:28.267

您必须将要使用的印地语字体放在`asset`项目的文件夹中，然后从那里您可以使用`css`.
详细解释张贴在[这个问题](https://stackoverflow.com/questions/1344080/how-to-use-custom-font-with-webview)

# ruby-on-rails - 为什么模型 object.save 会触发 missing_method (rails 2.2)

> ID：10007268
> 
> 赞同：0
> 
> 时间：2012-04-04T08:13:40.117
> 
> 标签：ruby-on-rails, ruby

我有三个模型。1- 产品 2- 自行车 3- 汽车

这些模型具有多态关联。Product 模型包含 Bike 和 Car 的共同点：价格、颜色等。

现在我想直接通过像 Bike_obj.price 这样的 Car 或 Bike 的对象来访问 Products 的方法

```
def method_missing(meth, *args, &blk)
    product.send(meth, *args, &blk)
rescue NoMethodError
    super
end 
```

现在我能够做到这一点

```
>> Car.last.price
=> 1000 
```

但问题是 Car 模型的 SAVE 方法已停止工作。当我执行 Car.last.save 时，我不知道为什么它会出现在 method_missing 中。它引发了这个异常

```
NoMethodError: undefined method `<=>' for #<Car:0x7fcdd39ef2c0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:14:45.710

`respond_to?`每当您覆盖时，您都应该覆盖`method_missing`：

```
 def respond_to?(method, include_private = false)
    super || product.respond_to?(method, include_private)
  end 
```

# httpwebrequest - 捕获 HTTP 请求

> ID：10007273
> 
> 赞同：1
> 
> 时间：2012-04-04T08:13:56.127
> 
> 标签：httpwebrequest

我正在尝试捕获传出的 HTTP 请求并将其替换为另一个。例如，我有一个发起请求的应用程序，`www.xxxxxxxxxx.com/something`
我需要捕获这个请求，而不是去 www.xxxxxxxxxx.com/something 我必须将它重定向到`www.yyyyyyyyyyyy.com/somethingElse.`

该请求是由我无权访问源代码的应用程序发出的，因此必须在应用程序之外完成。

任何人都可以给我一个提示如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:15:01.277

您可以为此使用提琴手自动响应器

显然，这只有在您可以完全访问客户端机器时才有效。如果这需要从服务器完成，您可以在服务器上设置代理以将请求中继到不同的网页。

检查此博客条目以获取详细信息

*   [http://blogs.msdn.com/b/fiddler/archive/2010/06/21/capturing-and-chang-websites-using-fiddler.aspx](http://blogs.msdn.com/b/fiddler/archive/2010/06/21/capturing-and-changing-websites-using-fiddler.aspx)

这篇博文描述了如何修改请求，但您也可以轻松地将它们转发到不同的域。

也可以使用生成的证书通过 HTTPS 使用此技术 [http://www.fiddler2.com/fiddler/help/httpsdecryption.asp](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)

有些人似乎声称这个答案行不通，我很欣赏他们对提琴手的能力感到困惑的事实，但最终他们错了，做你的研究。

一个更简单的解决方案可能是覆盖您的本地 DNS，您可以使用 Windows 上的 HOSTS 文件执行此操作，请记住，这会将原始主机标头发送到您可能不想要的不同域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:22:09.860

[在服务器端](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)使用智能[代理](http://www.squid-cache.org/Doc/config/url_rewrite_program/)或重写 URL 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:41:56.003

如果请求是从客户端发起的，那么您无法拦截该请求并将用户重定向到其他地址。但是，您可以在 HTTP 管道中添加一个 HTTPModule，它将在向客户端浏览器发送响应之前将 URL 更改为其他地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:16:45.420

不，你不能在客户端这样做。

*   相反，当您`should redirect`有`www.yyyyyyyyyyyy.com/somethingElse`任何请求时，您可以`www.xxxxxxxxxx.com/something` `on the server side`.
*   或者使用 LB 或代理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:22:39.777

这是什么应用程序！通常，如果您前面有 apache、lighttpd、cherokee 等网络服务器，或者在其上部署了应用程序，则可以使用 URL 重写。

Apache 可以做到这一点，甚至是不同的服务器。[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# php - 用于php网站的简单cms系统的最佳选择是什么

> ID：10007276
> 
> 赞同：-4
> 
> 时间：2012-04-04T08:14:14.300
> 
> 标签：php, content-management-system

我想知道当客户想要修改他们现有的网站并想要自己更新一些内容时，我可以为他们提供什么？

这会给我更多的优势，因为主办方也提供这个，谢谢。

**编辑**

**我也投票赞成关闭它。** 它太宽泛了，我明白了。但是在结束这个话题之前，你仍然可以提几个非常简单的名字！

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:16:30.193

## WordPress

简而言之：仅仅是因为没有其他 CMS 能像这样脱颖而出，尤其是对于您的目标群体。到目前为止，**对客户**来说最简单的解决方案（这也是我向他们建议的，他们在习惯它时很少遇到任何问题）。

它易于使用并快速掌握它，而且在您向他们展示了一下之后，他们似乎感到很自在（好吧，除非您深入研究更多的核心内容...... :-)）

**原因：**

*   用户可以轻松地自己编辑/添加内容
*   大量的插件可以根据客户的需求扩展初始功能（你知道所有这些：“如果我们添加 X、Y、Z...怎么样？”哈哈）

* * *

*另一个关于同一主题的文章：[http ://www.dmsqd.com/blog/index.php/2010/01/the-best-cms-tool-finding-the-best-website-cms-for-your-clients /](http://www.dmsqd.com/blog/index.php/2010/01/the-best-cms-tool-finding-the-best-website-cms-for-your-clients/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:18:15.870

很主观的问题。我建议您根据核心内容进行选择：

## 电子商务

*   Magento
*   osCommerce
*   禅车

## 写博客

*   Wordpress（可以说是独立的）

## 一般/万事通

*   德鲁巴
*   Joomla（我个人不喜欢，但每个人都喜欢）
*   PyroCMS
*   表达式引擎
*   模组X
*   混凝土5

我不知道是否已经有针对此类问题的社区 wiki 帖子。参考任何人？

**编辑：**

这是一个很常见的问题。以下是一些相关资源：

*   [什么是好的 PHP CMS？](https://stackoverflow.com/questions/1450852/what-is-a-good-php-cms)
*   [什么是满足我需求的“最佳”免费 CMS？](https://stackoverflow.com/questions/618685/what-is-the-best-free-cms-for-my-needs)
*   [简单的 CMS mySQL / PHP](https://stackoverflow.com/questions/4928370/simple-cms-mysql-php)

# java - 动态理解 ActiveMQIncludedDestinations

> ID：10007279
> 
> 赞同：1
> 
> 时间：2012-04-04T08:14:20.320
> 
> 标签：java, jms, activemq

我试图了解 ActiveMQ 的配置如何处理`dynamicallyIncludedDestinations`等。

例如。考虑以下配置提取：

```
<amq:broker id="broker" ... advisorySupport="false"> 
    <amq:networkConnectors>
        <amq:networkConnector name="connectorA" duplex="true"
            conduitSubscriptions="false" uri="${networkconnectorURL}">
                <amq:dynamicallyIncludedDestinations>
                    <amq:queue physicalName=">"/>
                 </amq:dynamicallyIncludedDestinations>
            </amq:networkConnector>

            <amq:networkConnector name="connectorB" duplex="true" 
             conduitSubscriptions="true" uri="${networkconnectorURL}">
                <amq:staticallyIncludedDestinations>
                    <amq:topic physicalName="topicA" />
                    <amq:topic physicalName="topicB" />
                </amq:staticallyIncludedDestinations>
            </amq:networkConnector>
    </amq:networkConnectors> 
```

在这种情况下：

*   给定`connectorA`定义`dynamicallyIncludedDestinations`，这是否会自动排除未明确定义的任何内容？即，将`connectorA`接收发送到主题而不是队列的任何消息？

此配置声明`advisorySupport='false'`，其中[文档](http://activemq.apache.org/networks-of-brokers.html)说明如下：

> 如果advisorySupport 代理属性被禁用，网络将无法按预期工作（它们无法动态响应新消费者）。如果advisorySupport 被禁用，则完全静态配置的网络是唯一的选择。在下一节中阅读有关它的更多信息

因此，这是否意味着`<amq:queue physicalName=">"/>`声明的 in`connectorA`将只接收它自己的代理内的队列上的消息，而不是整个集群？

如果不是，（因为这似乎与我看到的结果不一致）解释这种组合的正确方法是什么？

*   同样，鉴于经纪人有`advisorySupport='false'`这是否会阻止我添加一个`dynamicallyIncludedDestinations`部分`connectorB`？

*   如果我向 发送消息`jms:topic:topicC`，是否正确地说，接收消息的唯一消费者是在发送消息的代理上订阅的消费者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:03:40.597

在关闭咨询支持的情况下，您关闭了创建动态网络的所有功能，因为代理无法传播有关目的地的消息需求的信息。因此，在这种情况下，您的 connectorA 没有多大意义。

# html - 如何将表格内块元素的最大宽度设置为可视区域的 100%？

> ID：10007281
> 
> 赞同：0
> 
> 时间：2012-04-04T08:14:22.813
> 
> 标签：html, css

要理解我的意思，请查看以下代码段：

```
<table style="width: 100%">
    <tbody><tr><td>
        <div style="width: 100%">
            <img src="myimage.png" />
        </div>
    </td></tr></tbody>
</table> 
```

如果`myimage.png`小于浏览器窗口，`div`则渲染 以适合窗口大小。到目前为止，一切都很好。但如果`img`更大，一切都超出了可视区域。

有没有办法让`img`宽度设置为“图像的 100%，但不大于可视区域的 100%”？

更新： `max-width: 100%`对于图像似乎不能在表格内完成工作：http:
[//jsfiddle.net/h58Ra/](http://jsfiddle.net/h58Ra/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:19:21.193

`max-width`正是您应该使用的：http: [//jsfiddle.net/h58Ra/](http://jsfiddle.net/h58Ra/)（在 上`img`）。`div`不应该超过有或没有的大小`width: 100%`。

如果您删除`max-width: 100%`小提琴中的 ，您会注意到`div`仍然没有变大，即使`img`确实如此。

显然`div`是在里面`table`，由于某种原因使它失败了。我们一起达成了一个解决方案：（来自评论）“如果我设置 style="table-layout: fixed; 宽度：100%“对于桌子，一切正常”。

# sql - 这两个简单的 SQL 更新语句之间有什么区别吗？

> ID：10007288
> 
> 赞同：3
> 
> 时间：2012-04-04T08:14:49.013
> 
> 标签：sql, sql-server-2005

```
UPDATE table1
SET col = 1
WHERE col2 = 'xyz'

UPDATE a
SET col = 1
FROM table1 a
WHERE col2 = 'xyz' 
```

哪个是首选？

我发现的一个区别是第二个语句允许在“FROM”语句附近使用 WITH NO LOCK。但是在更新语句附近使用时，它会给出与第一条语句相同的错误消息

对于 INSERT、UPDATE 或 DELETE 语句的目标表，不允许使用 NOLOCK 和 READUNCOMMITTED 锁定提示。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:20:06.467

如果您需要，或者如果您有信心使用别名（如您的示例中）或像这样的 JOIN，则可以使用 FROM 语法：

```
UPDATE a
SET col = 1
FROM table1 a
INNER JOIN table2 b ON b.id = a.bid
WHERE b.col = 'x' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T08:21:21.423

他们是一样的。

如果 UPDATE 语句仅涉及访问单个表，则第一个更清洁/更简单。

如果您需要执行例如 JOIN，则为您的第二个示例分配一个别名是（IMO）清洁器，例如：

```
UPDATE a
SET a.Col = 1
FROM TableA a
    JOIN TableB b ON a.Id = b.Id
WHERE b.Something = '123' 
```

顺便说一句，在要更新的表上指定 NOLOCK 提示是没有意义的，因此不要将其视为一个原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T08:20:24.220

使用方法 2 的常见场景之一是，如果您需要基于连接表上的过滤器进行更新，例如

```
UPDATE a
SET a.col = 1
FROM table1 a inner join table2 b on a.someFK = b.somePK
WHERE a.col2 = 'xyz' and b.col3 = 'abc' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:24:13.017

两者都很好，但这取决于你需要什么。

第一个示例更简单，但不允许您使用其他表中的值。

如果您必须使用其他表中的值来更新您的表，示例 2 非常有用，就像 Mulmoth 所演示的那样。

# c++ - 处理命令行参数解析/验证的片段/库

> ID：10007294
> 
> 赞同：0
> 
> 时间：2012-04-04T08:15:08.187
> 
> 标签：c++, command-line-arguments, code-snippets

我必须编写一些命令行实用程序，它应该能够接受一堆不同类型的参数并且它们之间存在依赖关系。

我懒得重新发明轮子，并假设已经有一些片段/迷你库可以处理这种类型的任务。

如果有 api，我可以在其中描述验证规则、默认值等，然后将原始 argc/argv 提供给它并获取解析值的映射，那就太好了。

我需要的：

*   键/参数的默认值
*   验证键/参数（一些键应该是某个范围内的整数，一些键可以采用预定义的字符串值之一）
*   键/参数之间的依赖关系（如果键 --foo 设置 - 用户还应该为 --bar 键提供值）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:59:23.560

您可以使用 Boost **program_options**库：

带有示例的文档在这里：

[http://www.boost.org/doc/libs/1_42_0/doc/html/program_options/tutorial.html](http://www.boost.org/doc/libs/1_42_0/doc/html/program_options/tutorial.html)

# android - Android - 打开 ZIP 作为文件夹

> ID：10007295
> 
> 赞同：0
> 
> 时间：2012-04-04T08:15:11.587
> 
> 标签：android, zip

是否可以打开 zip 文件并像文件夹一样使用它。我需要一次从数百个 ZIP 文件中对一个文件夹进行部分解压缩。标准迭代非常慢（假设我需要打开 ID=432 的文件夹，所以之前会检查 431 个文件夹）。有什么方法可以部分快速地从 zip 中解压缩一些数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:21:34.083

看到这个例子它可能对你有帮助。

```
public void unzip() {
                   try  {
                     FileInputStream fin = new FileInputStream(_zipFile);
                     ZipInputStream zin = new ZipInputStream(fin);
                     ZipEntry ze = null;
                     while ((ze = zin.getNextEntry()) != null) {
                       Log.v("Decompress", "Unzipping " + ze.getName());
                       System.out.println("^^^^^^UnzippingFile^"+ze.getName());
                       ///code to search is given string exists or not in a Sentence
                       String haystack = ze.getName();
                       String needle1 = ".DS_Store";
                       int index1 = haystack.indexOf(needle1);
                       if (index1 != -1)
                       {
                           System.out.println("The string contains the substring "
+ needle1);
                           continue;
                       }
                       /*else
                           System.out.println("The string does not contain the
substring " + needle1);*/

                       if(ze.isDirectory()) {
                         _dirChecker(ze.getName());
                       } else {
                         FileOutputStream fout = new FileOutputStream(_location +
ze.getName());
                      // replace for loop with:
                         byte[] buffer = new byte[1024];
                         int length;
                         while ((length = zin.read(buffer))>0) {
                         fout.write(buffer, 0, length);
                         }

                         zin.closeEntry();
                         fout.close();
                       }

                     }////Outer While
                     zin.close();
                   } catch(Exception e) {
                     Log.e("Decompress", "unzip", e);
                   }

                 }

                 private void _dirChecker(String dir) {
                   File f = new File(_location + dir);

                   if(!f.isDirectory()) {
                     f.mkdirs();
                   }
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:16:50.583

看看[这里](http://developer.android.com/reference/java/util/zip/ZipFile.html#getEntry%28java.lang.String%29)`getEntry`的方法。`ZipFile`

# mysql - Magento 为每个产品找到最深的类别

> ID：10007301
> 
> 赞同：4
> 
> 时间：2012-04-04T08:15:46.377
> 
> 标签：mysql, magento, group-by

在我的产品网格页面上，我想为每个产品显示它所在的“最深”类别。

这是我迄今为止提出的，基于关于类似问题的其他一些主题。

```
 $res = Mage::getSingleton('core/resource');
    $eav = Mage::getModel('eav/config');
    $nameattr = $eav->getAttribute('catalog_category', 'name');
    $nametable = $res->getTableName('catalog/category') . '_' . $nameattr->getBackendType();
    $nameattrid = $nameattr->getAttributeId();

    $collection
    ->joinTable('catalog/category_product',
    'product_id=entity_id', array('single_category_id' => 'category_id'),
    null,'left')

    ->joinTable('catalog_category_entity',
    "entity_id=single_category_id", array('cat_level' => 'level','cat_path' => 'path'),
    null,'left')

    //->addAttributeToSort('entity_id', 'ASC')
    //->addAttributeToSort('cat_level', 'ASC')
    //->groupByAttribute('entity_id')

    ->joinTable($nametable,
    "entity_id=single_category_id", array('single_category_name' => 'value'),
    "attribute_id=$nameattrid", 'left')
    ->printLogQuery(true);exit; 
```

这给了我以下结果：

[截图 MYSQL 结果](http://i.imgur.com/4BnNj.png)

所以我得到了我的产品集合并添加了三列。显然，对于 entity_id 310，“Fauteuils”是最深的类别。我现在唯一要做的就是根据实体 ID 根据最高的 cat_level 对结果进行“分组”。但是，“分组依据”并没有给我想要的结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:57:23.847

这是一个简单的解决方案，您可以从中获取想法：

```
$category  = $product->getCategory();
$path      = explode('/', $category->getPath());
$deepestId = $path[count($path) - 1];

$deepestCategory = Mage::getModel('catalog/category')->load($deepestId);

Zend_Debug::dump($deepestCategory->getData());exit; 
```

您需要查看`path`类别表中的列，然后在路径中找到最后一个类别 ID。

# java - OpenJpa - 创建命名本机查询的难以理解的异常

> ID：10007302
> 
> 赞同：2
> 
> 时间：2012-04-04T08:15:58.050
> 
> 标签：java, openjpa

OpenJPA 1.2.2、WebSphere 7 (Java EE 5)

我正在尝试使用 orm.xml 中定义的命名本机查询将表映射到 POJO（不是实体！）：

```
<named-native-query name="myNativeQuery" result-class="foo.bar.PojoBean">
    <query>
        SELECT col_one AS colOne, col_two AS colTwo, col_three AS colThree 
        FROM myTable WHERE id = 42
    </query>
</named-native-query> 
```

PojoBean 是具有 String getter/setter 和空参数构造函数的最终类：

```
public final class PojoBean implements java.io.Serializable {

    public PojoBean() {
    }

    public String getColOne() { ... }
    public void setColOne(String colOne) { ... }
    ...
} 
```

当我创建查询时：

```
EntityManager myEntityManager = ...
myEntityManager.createNamedQuery("myNativeQuery"); 
```

我有一个例外（为便于阅读而格式化）：

```
<openjpa-1.2.2-r422266:898935 nonfatal user error>  
org.apache.openjpa.persistence.ArgumentException: 
Result type "class foo.bar.PojoBean" does not have any public fields or setter methods for the projection or aggregate result element "null", 
nor does it have a generic put(Object,Object) method that can be used, 
nor does it have a public constructor that takes the types null. 
```

这是什么意思 ？

更多信息：

*   PojoBean 的实现不能更改，并且作为 final 类也不能扩展。
*   使用 EntityManager.createNativeQuery(...) 从 java 运行查询是可行的，但这不是一个选项。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T11:44:18.033

我得到了同样的例外。我的问题是，persistence.xml 中的persistence-unit 名称是错误的。在这种情况下，异常并不完全指向正确的方向......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T07:30:13.387

问题是 openJPA 不会自动将 underscore_names 映射到 cameCaseName，因此**您**必须提供翻译才能填写您的 POJO。

在您的情况下 col_one => colOne，但 openJPA 不知道这一点。

我所做的是实现通过反射将值分配给相应字段的通用设置器，并在[Google Guava](https://code.google.com/p/guava-libraries/)的一些帮助下进行字符串转换：

```
public void put(Object field, Object value) {

    try {

        String fieldName = CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, field.toString());
        Field f = this.getClass().getDeclaredField(fieldName);
        f.set(this, value);

    }
    catch(Exception e) {
        logger.error("ERROR: " + e.getMessage());
    }

} 
```

我必须说我不太喜欢这个解决方案，但它真的很好用。有没有办法实现一些接口或使用@Annotation 来连接它？

另一种方法是使用每个 pojo 扩展的抽象类。在这种情况下，您应该使用 setter 方法，因为该字段可能是私有的。

```
public abstract class JpaPutter  {

    public void put(Object field, Object value) {

        try {

            String methodName = "set" + CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.UPPER_CAMEL, field.toString());
            this.getClass().getMethod(methodName, value.getClass()).invoke(this,  value);

        }
        catch(Exception e) {
            throw new RuntimeException(e);
        }

    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:26:10.450

您可能希望确保已部署 JAR 中的 PojoBean 类实际上具有公共 setter 和 getter。

# sql-server-2008 - SQL 服务器性能问题

> ID：10007307
> 
> 赞同：0
> 
> 时间：2012-04-04T08:16:11.980
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008 进行我的 Java Web 开发，我在 Java 中使用 Hibernate，

因为一些负载很重的查询有这么多的过滤条件，排序依据，分组依据，加入我的 sql 服务器出现故障。

使用我的任何建议或机制都可以防止我的服务器宕机。

感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:22:35.670

确定哪些特定查询对您的系统造成了最严重的压力（SQL Profiler 是您的朋友，如果您没有适当的 MSFT 许可证，还有一个[免费的）。](https://sites.google.com/site/sqlprofiler/)

首先关注繁重的查询。查看查询计划是什么（SQL Server 非常适合建议更改索引策略）。如有必要，手动重写最严重的违规者或配置 Hibernate 以使用不同的查询策略。

还要研究Hibernate 中的[一级和二级缓存](http://www.javabeat.net/articles/37-introduction-to-hibernate-caching-1.html)。适当的缓存可以大大减轻数据库的压力。

到那时，您应该有*具体*的问题，可以得到更具体的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:22:08.480

为什么要使用重载查询，可以用程序试试。它将提高性能，而不是通过繁重的要求。您还可以为常用查询创建索引。

检查这个， http: [//forums.codeguru.com/showthread.php?t=337736](http://forums.codeguru.com/showthread.php?t=337736)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:10:59.707

这是一个免费工具，也可能有所帮助。捕获 SQL Server 跟踪（使用 SQL Profiler 等）后，您可以使用免费的查询分析器工具非常详细且非常直观地分析跟踪。您甚至可以比较跟踪（例如，应用程序更改或环境修改之前和之后）以查看对数据库工作负载的影响。

该工具可在此处下载：[Qure Profiler - 免费 SQL Server 跟踪分析工具](http://www.dbsophic.com/products/download-qure-analyzer.html)

# java - 渲染脚本轮播示例

> ID：10007313
> 
> 赞同：0
> 
> 时间：2012-04-04T08:16:33.670
> 
> 标签：java, android, renderscript

我没有太多的经验`Renderscript`，但我想了解更多。[我从 Google](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip)找到了这个示例，但我不确定如何将我自己的图像实际加载到轮播中。

我对将多个图像加载到轮播中感到困惑，因为它不使用`Adapter`，而是使用一个，`Bitmap`我不确定如何进行更改。

```
 BitmapFactory.decodeResource(res,R.drawable.glossy_overlay); 
```

我已经做了一些研究，但是对于没有太多经验的人来说，很难找到可靠的例子。有人会提供一些资源或我如何将自己的图像加载到轮播中的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:37:39.013

在 CarouselTestActivity 中定义静态列表

```
private static final int[] DEFAULT_RESOURCE_LIST =
{ R.drawable.image01, R.drawable.image02, R.drawable.image03,R.drawable.image04, R.drawable.image05,R.drawable.image01, R.drawable.image02, R.drawable.image03,R.drawable.image04, R.drawable.image05}; } 
```

修改值

```
 private static final int TOTAL_CARDS =DEFAULT_RESOURCE_LIST.length ; 
```

修改同类LocalCarouselViewHelper中的getTexture

@Override 公共位图 getTexture(int n) {

```
 final Bitmap bitmap = ((BitmapDrawable) getResources()
                .getDrawable(DEFAULT_RESOURCE_LIST[n])).getBitmap();
        return bitmap;
        /*
        Bitmap bitmap = Bitmap.createBitmap(TEXTURE_WIDTH, TEXTURE_HEIGHT,
                Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        canvas.drawARGB(0, 0, 0, 0);
        mPaint.setColor(0x40808080);
        canvas.drawRect(2, 2, TEXTURE_WIDTH-2, TEXTURE_HEIGHT-2, mPaint);
        mPaint.setTextSize(100.0f);
        mPaint.setAntiAlias(true);
        mPaint.setColor(0xffffffff);
        canvas.drawText("" + n, 2, TEXTURE_HEIGHT-10, mPaint);
        canvas.drawBitmap(mGlossyOverlay, null,
                new Rect(PIXEL_BORDER, PIXEL_BORDER,
                        TEXTURE_WIDTH - PIXEL_BORDER, TEXTURE_HEIGHT - PIXEL_BORDER), mPaint);
        return bitmap;
        */
    } 
```

享受...

# linux-kernel - 如何从内核模块确定物理 RAM 大小？

> ID：10007318
> 
> 赞同：1
> 
> 时间：2012-04-04T08:16:51.117
> 
> 标签：linux-kernel, kernel-module

*linux/memblock.h*头文件中有*memblock_phys_mem_size*函数，但它没有从内核导出，因此不能在模块中使用。

 *是否有另一种方法来识别 RAM 大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:52:17.830

使用以下符号：

```
 $ grep EXPORT_SYMBOL mm/*.c | grep total
 mm/highmem.c:EXPORT_SYMBOL(totalhigh_pages);
 mm/page_alloc.c:EXPORT_SYMBOL(totalram_pages); 
```*

# ruby-on-rails - Ruby on Rails：路线和资源

> ID：10007322
> 
> 赞同：1
> 
> 时间：2012-04-04T08:16:58.903
> 
> 标签：ruby-on-rails, routes

我有一个工作资源，每个工作都有一个位置。如何创建路线，按位置显示工作？换句话说，如何得到这个：/jobs/locations/london

位置本身就是一个单独的模型。

我试过：

```
 resources :jobs do
    collection do
      match 'locations/:id' => 'jobs#find_by_location', as: :jobs_find_by_location, via: :get
    end
  end 
```

但这不起作用：

```
link_to @location.name, jobs_find_by_location(@location) 
```

这样做的最干净的 Rails 方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:03:27.433

尝试

```
match '/jobs/locations/:location_name', :controller => 'locations', :action => 'action_name', :as => jobs_find_by_location, :via => :get 
```

或者

```
match '/jobs/locations/:location_name' => 'locations#action_name', :as => jobs_find_by_location, :via => :get 
```

重新启动服务器并执行请求 /jobs/locations/london

在您的操作中使用 params[:location_name] 获取“伦敦”

# java - 用于测量 Java 代码经验计算复杂度的工具？

> ID：10007327
> 
> 赞同：5
> 
> 时间：2012-04-04T08:17:30.233
> 
> 标签：java, complexity-theory

我有一些 Java 代码，我希望对其进行测量经验计算复杂度。有一个[趋势分析](http://trend-prof.tigris.org/)工具，它以编译`C/C++`程序作为输入。

是否有与trend-prof 类似的工具将编译的Java 程序作为输入？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T12:35:48.140

声纳常用： http: [//www.sonarsource.org/](http://www.sonarsource.org/)

问候。

# css - 100% 高度 - 底部的动态高度页脚

> ID：10007328
> 
> 赞同：3
> 
> 时间：2012-04-04T08:17:34.280
> 
> 标签：css, sticky-footer

我有以下网页。

```
<body>
<div id="everything">
<div id="top_header">TOP BAR WITH INFO. FIXED HEIGHT</div>
<div id="content">
<div id="header"><h1> MENU</h1></div>
<div id="body">CONTENT</div>
</div><!--end content-->
<div id="footer">DYNAMIC HEIGHT DEPENDING ON THE LINKS IN THE FOOTER</div>
</div><!--end everything-->
</body> 
```

和风格：

```
 <style type="text/css">
body {
    background-color: #FFFFFF;
    font: 13px arial;
    margin: 0;
    padding: 0;
    width: 100%;
}
#everything {
    background-color: #FFFFFF;
    min-height: 100%;
    margin: auto;
    width: 100%;
}
#content {
    display: block;
    margin: auto;
    width: 1000px;

}
#header {
    padding-bottom: 25px;
    background-color:#666699;
    height:60px;
}
#body {
    background: none repeat scroll 0 0 #FFFFFF;
    margin: 0 auto;
    padding-bottom: 23px;
    background-color:#CC3333;
    height:1500px;
}
#footer {
    display: inline-block;
    position: absolute;
    bottom:0px;
    width: 100%;
    background-color:#FF6600;
    height:70px;
}
#top_header {
    width:100%;
    background-color:#0066CC;
    height:30px;
}
h1{
    margin:0;
}
</style> 
```

我的页脚高度是动态的，我无法更改 HTML 结构，只能更改 CSS。当我在较小的屏幕上看到网页并且“body”的高度大于视口时没有问题，但是如果我在更大的屏幕上查看网页并且“body”的大小小于视口，页脚不会不要坚持到底。此外，如果“body”的大小很大（如本例所示），它不会将页脚推到底部。你能帮我在不知道页脚高度以及我所有内容所在的“body”高度的情况下让页脚始终粘在视口底部吗？

谢谢，米海

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:35:02.387

这在 CSS2 中并不完全可能，特别是通过扩展内容正确地向下推的灵活高度页脚。您可以让它以可变高度贴在屏幕底部，但由于您事先不知道该特定高度，因此您无法相应地设置内容边距/填充底部。

我建议您在页面加载后通过 JavaScript 测量页脚高度并将其应用为内容填充/边距底部，这样您就可以解决您面临的唯一真正问题。

另一种选择是通过使用包装器和显示来利用表格：table-row/table-cell。我在这里回答了一个类似的问题：[https ://stackoverflow.com/a/9946474/759144](https://stackoverflow.com/a/9946474/759144)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:25:27.010

您可以定义页脚位置相对并删除绝对

```
#footer{
   position:relative;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-02-12T06:00:30.443

请检查下面的演示。我认为这个解决方案可以帮助您解决问题。

```
body {
    background-color: #FFFFFF;
    font: 13px arial;
    margin: 0;
    padding: 0;
    width: 100%;
}
#everything {
    background-color: #FFFFFF;
    min-height: 100%;
    margin: auto;
    width: 100%;
}
#content {
    display: block;
    margin: auto;
    width: 1000px;

}
#header {
    padding-bottom: 25px;
    background-color:#666699;
    height:60px;
}
#body {
    background: none repeat scroll 0 0 #FFFFFF;
    margin: 0 auto;
    padding-bottom: 23px;
    background-color:#CC3333;
    height:1500px;
}
#footer {
    display: inline-block;
    position: sticky;
    bottom:0px;
    width: 100%;
    background-color:#FF6600;
    /* height:70px; */
    bottom: 0;
}
#top_header {
    width:100%;
    background-color:#0066CC;
    height:30px;
}
h1{
    margin:0;
}
```

```
<html>

<body>
<div id="everything">
<div id="top_header">TOP BAR WITH INFO. FIXED HEIGHT</div>
<div id="content">
<div id="header"><h1> MENU</h1></div>
<div id="body">CONTENT</div>
</div><!--end content-->
<div id="footer">DYNAMIC HEIGHT DEPENDING ON THE LINKS IN THE FOOTER</div>
</div><!--end everything-->
</body>

</html>
```

# algorithm - 在无序集中找到最长的升序子集

> ID：10007333
> 
> 赞同：0
> 
> 时间：2012-04-04T08:18:07.033
> 
> 标签：algorithm

给定一个无序集合，如：*1,2,3,4,0,5,6,7,-1,-2,-3；*

找到其中最长的上升子集。

上述示例集的预期结果是：*1,2,3,4,5,6,7*

如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:21:26.163

这个问题被称为，你可以[在这里](http://www.algorithmist.com/index.php/Longest_Increasing_Subsequence)`Longest increasing subsequence`阅读它。

# delphi - 如何增加分配给变量的串行数据数量？

> ID：10007334
> 
> 赞同：5
> 
> 时间：2012-04-04T08:18:07.260
> 
> 标签：delphi, serial-port, delphi-7

我已经下载并安装了 comport 库。我有一个模拟器通过串行 RS232 向 Selphi 程序发送数据。这是以下代码片段。

```
procedure TMainForm.ComPortRxChar(Sender: TObject; Count: Integer);
begin
  ComPort.ReadStr(CPort.Str, Count);
  Memo.Text := Memo.Text + CPort.Str;
end; 
```

至于 CPort 库部分，我补充说：

```
var
  Str: String;

here is the problem. 
```

通过的数据示例大致如下

```
$HEHDT,288.45,T*1D
$HEHDT,288.46,T*18
$HEHDT,288.47,T*1A 
```

等等。每行每秒发送一次。因此，使用上面的代码，备忘录将显示所有这些数据。

但是，如果我将代码更改为：

```
procedure TMainForm.ComPortRxChar(Sender: TObject; Count: Integer);
begin
  ComPort.ReadStr(CPort.Str, Count);
  Memo.Text := Memo.Text + CPort.Str + 'haha';
end; 
```

这是备忘录上出现的内容：

```
$HEHDT,2haha88.45,T*haha1Dhaha
$HEHDT,2haha88.46,T*haha18haha
$HEHDT,2haha88.47,T*haha1Ahaha 
```

“哈哈”出现在 8 个 ASCII 字符之后。那么这是否意味着在 CPort.pas 库中，在异步/同步部分下，最多仅将 8 个 ASCII 字符分配给变量 Str？

如何更改代码，以便将整个数据字符串（无论其大小）分配给变量 Str 而不是仅 8 个字节。

更新**我意识到 CPort 库的这一部分包含以下代码。谁能告诉我如何编辑代码？或者它是否是我找到的正确块。谢谢！

```
// split buffer in packets
procedure TComDataPacket.HandleBuffer;

procedure DiscardPacketToPos(Pos: Integer);
var
Str: string;
begin
FInPacket := True;
if Pos > 1 then
begin
  Str := Copy(Buffer, 1, Pos - 1); // some discarded data
  Buffer := Copy(Buffer, Pos, Length(Buffer) - Pos + 1);
  DoDiscard(Str);
end;
end;

procedure FormPacket(CutSize: Integer);
var
Str: string;
begin
Str := Copy(Buffer, 1, CutSize);
Buffer := Copy(Buffer, CutSize + 1, Length(Buffer) - CutSize);
CheckIncludeStrings(Str);
DoPacket(Str);
end;

procedure StartPacket;
var
Found: Integer;
begin
// check for custom start condition
Found := -1;
DoCustomStart(Buffer, Found);
if Found > 0 then
  DiscardPacketToPos(Found);
if Found = -1 then
begin
  if Length(FStartString) > 0 then // start string valid
  begin
    Found := Pos(Upper(FStartString), Upper(Buffer));
    if Found > 0 then
      DiscardPacketToPos(Found);
  end
  else
    FInPacket := True;
end;
end;

procedure EndPacket;
var
Found, CutSize, Len: Integer;
begin
// check for custom stop condition
Found := -1;
DoCustomStop(Buffer, Found);
if Found > 0 then
begin
  // custom stop condition detected
  CutSize := Found;
  FInPacket := False;
end
else
  if Found = -1 then
  begin
    Len := Length(Buffer);
    if (FSize > 0) and (Len >= FSize) then
    begin
      // size stop condition detected
      FInPacket := False;
      CutSize := FSize;
    end
    else
    begin
      Len := Length(FStartString);
      Found := Pos(Upper(FStopString),
        Upper(Copy(Buffer, Len + 1, Length(Buffer) - Len)));
      if Found > 0 then
      begin
        // stop string stop condition detected
        CutSize := Found + Length(FStopString) + Len - 1;
        FInPacket := False;
      end;
    end;
  end;
if not FInPacket then
  FormPacket(CutSize); // create packet
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:48:47.533

你应该做自己的缓冲。这使您可以更灵活地确定消息的界限。例如，如果您使用回车符 (#13) 分隔消息，则可以执行以下操作：

```
var Buf: string;

procedure DoSomething(const Str: String);
begin
  Memo.Text := Memo.Text + Str;
end;

procedure TMainForm.ComPortRxChar(Sender: TObject; Count: Integer);
var I: Integer;
begin
  ComPort.ReadStr(CPort.Str, Count);
  Buf := Buf + CPort.Str;        
  for i := 1 to Length(Buf) do
    if Buf[i] = #13 then
    begin
      DoSomething(Copy(Buf, 1, i)); 
      Delete(Buf, 1, i+1);
      Break;
    end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:07:12.223

具有完整错误检查的~~简约解决方案是：~~

**更新 ：**

（假设接收到的字符串以 CRLF 组合结尾，并且包长度不是恒定的。这是一个 NMEA 0183 包）

```
var
  finalBuf: AnsiString;

// Example packet: $HEHDT,10.17,T*28 + CRLF
// This is a NMEA 0183 protocol (Marine and GPS standard)
// Subset for reading the heading.
// HDT Heading – True
//       1   2 3
//       |   | |
//$--HDT,x.x,T*hh
//1) Heading Degrees, true
//2) T = True
//3) Checksum
// HE stands for: Heading – North Seeking Gyro

{- Checking packet and checksum, calculating heading }
Function ParseAndCheckNMEA_HDT(const parseS: AnsiString;
  var heading: Double): Integer;
// Example packet: $HEHDT,10.17,T*28 + CRLF
var
  i, p, err: Integer;
  xorSum: Byte;
  xorStr: AnsiString;
  headingStr: AnsiString;
begin
  Result := 0; // Assume ok
  if (Pos('$HEHDT', parseS) = 1) then // Start header ok ?
  begin
    p := Pos('*', parseS);
    if (p <> 0) and (Length(parseS) >= p + 2) then
    // Assumes a checksum in packet
    begin
      xorSum := Ord(parseS[2]);
      for i := 3 to p - 1 do // Calculate checksum
        xorSum := xorSum xor Ord(parseS[i]);
      xorStr := IntToHex(xorSum, 2);
      if (UpperCase(xorStr) = Copy(parseS, p + 1, 2)) then // Checksum ok ?
      begin
        // Validate heading
        headingStr := Copy(parseS, 8, p - 10);
        Val(headingStr, heading, err);
        if (err <> 0) then
          Result := 4; // Not a valid float
      end
      else
        Result := 3; // Wrong checksum
    end
    else
      Result := 2; // No checksum
  end
  else
    Result := 1; // Wrong header
end;

procedure TMainForm.ComPortRxChar(Sender: TObject; Count: Integer);
var
  i,err: Integer;
  strBuf: AnsiString;
  heading: Double;
begin
  ComPort.ReadStr(CPort.Str, Count);
  strBuf := CPort.str;
  for i := 1 to Length(strBuf) do
    case strBuf[i] of
      '$' : 
        finalBuf := '$';  // Start of package
      #10 :
        begin
          if (finalBuf <> '') and (finalBuf[1] = '$') then  // Simple validate check 
            begin
              SetLength( finalBuf, Length(finalBuf) - 1); // Strips CR
              err := ParseAndCheckNMEA_HDT(finalBuf, heading);
              if (err = 0) then 
                Memo.Lines.Add(finalBuf); // Add validated string
              //else
              //  Memo.Lines.Add('Error:' + IntToStr(err)); 
            end;
          finalBuf := '';
        end; 
    else
      finalBuf := finalBuf + strBuf[i];  
    end;
end; 
```

知道开始字符和数据包结束，这应该是相当安全的使用。标记包裹结束的#13 和#10 (CR LF) 字符被剥离，并检查包裹的有效校验和，并计算得到的标题值。然后将经过验证的字符串添加到备忘录中。

**更新 2**

要回答直接问题，为什么您的接收方法可以在数据字符串的中间添加您的“哈哈”字符串：

comport 例程以自己的节奏传递数据、一个或多个字符。您无法控制何时获取数据或将有多少字符。使用我的回答中的方案，数据会被缓冲，直到交付完整的包裹。借助 TComPort 的数据包支持，可以做到这一点。

根据您的评论，似乎有几种 NMEA 0183 传感器类型连接到串行端口。（给出其他长度的包，但都以 $ 字符开头）。

在这种情况下，将 ParseAndCheckNMEA_HDT 替换为以下函数以验证字符串：

```
Function ParseAndCheckNMEA(const parseS: AnsiString): Integer;
// Example packet: $HEHDT,10.17,T*28 + CRLF
var
  i, p: Integer;
  xorSum: Byte;
  xorStr: AnsiString;
begin
  Result := 0; // Assume ok
  if (Pos('$', parseS) = 1) then // Start header ok ?
  begin
    p := Pos('*', parseS);
    if (p <> 0) and (Length(parseS) >= p + 2) then
    // Assumes a checksum in packet
    begin
      xorSum := Ord(parseS[2]);
      for i := 3 to p - 1 do // Calculate checksum
        xorSum := xorSum xor Ord(parseS[i]);
      xorStr := IntToHex(xorSum, 2);
      if (UpperCase(xorStr) <> Copy(parseS, p + 1, 2)) then // Checksum ok ?
        Result := 3; // Wrong checksum
    end
    else
      Result := 2; // No checksum
  end
  else
    Result := 1; // Wrong header
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:31:38.023

如果您使用 Dejan Crnila 的 ComPort 库，您应该查看该`TComDataPacket`组件，尤其是它的`OnPacket`和`OnCustomStop`事件。

**更新：** 这是一个代码示例。假设起始字符串始终相同，结束字符串以 ',T*' 开头，后跟两个字符（可能是 CRC 码）。如果该假设是错误的，则必须调整停止逻辑。

```
procedure TForm136.ComDataPacketCustomStop(Sender: TObject; const Str: string;
    var Pos: Integer);
begin
  Pos := System.Pos(',T*', Str);
  if (Pos > 0) then begin
    Inc(Pos, 4);
    if Pos <= Length(Str) then Exit;
  end;
  Pos := -1;
end;

procedure TForm136.FormCreate(Sender: TObject);
begin
  ComDataPacket.ComPort := ComPort;
  ComDataPacket.StartString := '$HEHDT,';
  ComDataPacket.OnCustomStop := ComDataPacketCustomStop;
end; 
```

# .net - Windows Server 2008 上的文件大小不会改变

> ID：10007338
> 
> 赞同：0
> 
> 时间：2012-04-04T08:18:22.837
> 
> 标签：.net, windows, file, ntfs

与 Windows XP 相比，在 Windows Server 2008 上持续写入文件时，我注意到了奇怪的行为。

我从几个线程执行类似的东西：

```
using (var fi = File.Open(...))
{
   using (var fw = new StreamWriter(fi)) 
   {
       while program-is-running 
       {
          fw.WriteLine(some-data);
          fw.Flush();
        }
    }
} 
```

当我在 Total Commander 和 Windows Explorer 中观察文件时，我发现文件大小保持不变。我可以进入文件所在的目录，然后从目录中退出，然后再次进入 - 文件大小是恒定的（在 Total Commander 和 Windows 资源管理器中），直到我手动刷新 Windows 资源管理器中的目录内容`F5`

当我在 Windows XP 中运行相同的程序时，Total Commander 和 Windows Explorer 不断显示文件大小正在增加。

我想知道是什么问题。是 NTFS 行为、软件设置还是其他？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:23:29.587

见[这篇](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/26/10251026.aspx)关于*旧新事物的文章。*基本上，它与效率有关。最新的文件元数据（例如它的大小）不与目录条目一起存储，而是与文件本身一起存储（这类似于某些 UNIX 文件系统的工作方式，并且与旧的 FAT 方法相反）。

但是，大小会定期传输到目录条目，以便您可以获得“最后一个已知”值。并且，在某个时间点（文件停止更改后），最后一个已知值变得准确。

从那篇文章：

> 在 NTFS 中，文件系统元数据不是目录条目的属性，而是文件的属性，其中一些元数据复制到目录条目中作为改进目录枚举性能的调整。FindFirstFile 之类的函数报告目录条目，并且通过放置 FAT 用户习惯“免费”获得的元数据，它们可以避免目录列表比 FAT 慢。目录枚举函数报告最后更新的元数据，如果目录条目是陈旧的，则该元数据可能与实际元数据不对应。
> 
> 下一个问题是元数据复制在何处以及多久进行一次；换句话说，这些数据的陈旧程度如何？为了避免每次文件元数据更改时都必须更新可能无限数量的目录条目，NTFS 人员决定仅从文件执行复制到用于打开文件的目录条目。这意味着如果一个文件有一千个硬链接，文件大小的变化将反映在用于打开文件的目录条目中，但其他 999 个目录条目将包含陈旧数据。
> 
> 从 Windows Vista 开始（及其对应的 Windows Server 版本，我不知道，但我相信你可以查找，“你”是指“雨红包”），NTFS 文件系统在文件对象的最后一个句柄已关闭。早期版本的 NTFS 会在缓存刷新时文件打开时复制数据，这意味着它会根据不可预知的时间表经常发生。此更改的结果是目录条目现在更新频率降低，因此最后更新的文件大小比它已经过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:38:11.447

您可以使用 WMI 为打开的文件获取正确的文件大小：

```
Using System.Management;

internal static ManagementObject GetFileManagementObject(string pfilepath)
        {
            string filepath = pfilepath.Replace("\\", "\\\\");
            string scope = @"\\" + System.Environment.MachineName + @"\root\CIMV2";
            string query = string.Format("Select FileSize from CIM_DataFile WHERE Name     = '{0}'", filepath);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
            ManagementObjectCollection collection = searcher.Get();
        foreach (ManagementObject mobj in searcher.Get())
        {
            return mobj;
        }

        return (null);
    }

private long GetFileSizeOpenFile(string path)
    {
        long fsize = -1;
        try
        {
            ManagementObject mObj = Statics.GetFileManagementObject(path);
            string sSize = mObj.Properties["FileSize"].Value.ToString();
            long.TryParse(sSize, out fsize);
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        return fsize;
    } 
```

# python - 使用 python 发送在 selenium 中不起作用的密钥

> ID：10007339
> 
> 赞同：1
> 
> 时间：2012-04-04T08:18:23.763
> 
> 标签：python, selenium, sendkeys

使用 python 发送密钥在 selenium 中不起作用。这在早些时候工作，但现在失败了。我不知道可能是什么问题。它给出以下错误：

```
u"Element is disabled and so may not be used
for actions\nCommand duration or timeout: 11             
milliseconds\nBuild info: version: '2.15.0', revision: '15105', time:
'2011-12-08   09:56:25'\nSystem info: os.name: 'Windows 7', os.arch:
'amd64', os.version: '6.1',    java.version: '1.6.0_22' 
```

`time.sleep(3)`在传递密钥之前， 我已经在下面使用过

```
elem.send_keys('selenium')   
elem.send_keys(Keys.RETURN) 
```

还

```
elem.send_keys("Sale" + Keys.RETURN) 
```

但没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:10:01.830

正如错误所说，该元素是`disabled`，因此您（使用浏览器的用户，selenium 试图模仿这样的用户）无法与该元素交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:56:04.007

我也注意到了这一点。`find_element_by_*`返回一个列表。一个快速的解决方法是使用第一个元素，即`elem[0].send_keys(text)`.

# c++ - SQLlite 用于“另存为”和 LARGE 文件的自动保存功能

> ID：10007343
> 
> 赞同：1
> 
> 时间：2012-04-04T08:18:36.467
> 
> 标签：c++, sql, c, sqlite

我有一个可以轻松达到 1GB 的 SQLite 文件（可能变成 10GB）。我想为我的桌面应用程序（在 C++ 中）模拟“另存为”和自动保存功能，类似于 Office Word。在我看来，每次要备份时都复制整个文件是不切实际的。

我刚刚开始研究[SAVEPOINT](http://www.sqlite.org/draft/lang_savepoint.html)。这是解决这个问题的方法吗？但是我不清楚保存点是否允许我查询我刚刚在保存点之间进行的插入，直到我提交/释放。

我会很感激反馈。

另外，退后一步，我正在考虑这种另存为/自动保存机制是否是个好主意。我目前正在将每个 SQL 命令立即保存到文件中（例如，将用户文本保存到表中的注释字段中）。我确实在应用程序中实现了撤消/重做功能。有人用大型 sqlite 文件制作桌面应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:51:56.947

这取决于您的应用程序在做什么。如果它只是插入和删除行，您可以轻松地将它们撤消（保留历史表 - 可能最好作为临时表，除非您希望它在运行之间持续存在 - 并驱动您的撤消/重做功能）但是结构变化很多更难撤消，因为 SQLite 仅允许在创建表后对其进行非常有限的更改（例如，删除列将需要您复制表并删除旧表）。也就是说，只要您在每次更改后提交，您就可以拥有一个没有用户可见保存操作的应用程序：您只需在每次提交时自动将更改保存到磁盘。

“另存为...”功能会很慢，因为它*必然*需要将数据复制到一个新文件中，并且即使您使用的是 SSD 而不是 HDD，这也需要一些 GB 的时间。真的有必要吗？用户可以自己复制数据库文件（SQLite 就是这样），前提是他们当时没有在您的应用程序中打开它。

# asp.net - 从 ASP.NET 中的 URL 获取数据

> ID：10007349
> 
> 赞同：3
> 
> 时间：2012-04-04T08:18:53.443
> 
> 标签：asp.net, .net, string, visual-studio-2010, url

我是 asp.net 的新手，

我想从 asp.net 上的 url 获取数据。& 需要将数据存储到字符串中。

如果假设这是我的 URL，那么我想在字符串中获取这个 URL 数据，

```
http://www.islamicfinder.org/prayer_service.php?country=bahrain&city=manama&state=02&zipcode=&latitude=26.2361&longitude=50.5831&timezone=3.00&HanfiShafi=1&pmethod=4&fajrTwilight1=&fajrTwilight2=&ishaTwilight=0&ishaInterval=0&dhuhrInterval=1&maghribInterval=1&dayLight=0&simpleFormat=xml 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T08:22:14.283

尝试这个

```
string url = "http://www.islamicfinder.org/prayer_service.php?country=bahrain&city=manama&state=02&zipcode=&latitude=26.2361&longitude=50.5831&timezone=3.00&HanfiShafi=1&pmethod=4&fajrTwilight1=&fajrTwilight2=&ishaTwilight=0&ishaInterval=0&dhuhrInterval=1&maghribInterval=1&dayLight=0&simpleFormat=xml";
            var webClient = new WebClient();
            string data = webClient.DownloadString(url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:23:06.840

[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)对这类事情很有用（scartag 的回答证明了这一点的简单性），但对于更高级的选项，您应该查看底层[`WebRequest`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)类：

```
// Create a request for the URL.        
WebRequest request = WebRequest.Create ("http://www.contoso.com/default.html");

// If required by the server, set the credentials.
request.Credentials = CredentialCache.DefaultCredentials;

// Get the response.
HttpWebResponse response = (HttpWebResponse)request.GetResponse ();

// Display the status.
Console.WriteLine (response.StatusDescription);

// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream ();

// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader (dataStream);

// Read the content.
string responseFromServer = reader.ReadToEnd ();

// Display the content.
Console.WriteLine (responseFromServer);

// Cleanup the streams and the response.
reader.Close ();
dataStream.Close ();
response.Close (); 
```

# c# - Entity Framework Code First AddOrUpdate 方法插入重复值

> ID：10007351
> 
> 赞同：60
> 
> 时间：2012-04-04T08:19:04.323
> 
> 标签：c#, .net, entity-framework-4

我有简单的实体：

```
public class Hall
{
    [Key]
    public int Id {get; set;}

    public string Name [get; set;}
} 
```

然后在`Seed`我`AddOrUpdate`用来填充表格的方法中：

```
var hall1 = new Hall { Name = "French" };
var hall2 = new Hall { Name = "German" };
var hall3 = new Hall { Name = "Japanese" };

context.Halls.AddOrUpdate(
    h => h.Name,
    hall1,
    hall2,
    hall3
); 
```

然后我在包管理控制台中运行：

```
Add-Migration Current
Update-Database 
```

一切都很好：我在“Hall”表中有三行。但是如果我再次在包管理控制台中运行，`Update-Database`我已经有五行了：

```
Id  Name
1   French
2   Japaneese
3   German
4   French
5   Japanese 
```

为什么？我认为应该是三排，而不是五排。我尝试使用`Id`属性而不是，`Name`但它没有任何区别。

**更新：**

此代码产生相同的结果：

```
var hall1 = new Hall { Id = 1, Name = "French" };
var hall2 = new Hall { Id = 2, Name = "German" };
var hall3 = new Hall { Id = 3, Name = "Japanese" };

context.Halls.AddOrUpdate(
                h => h.Id,
                hall1);

context.Halls.AddOrUpdate(
                h => h.Id,
                hall2);

context.Halls.AddOrUpdate(
                h => h.Id,
                hall3); 
```

我还通过 nuget 安装了最新的 EntityFramework。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-14T15:51:00.157

好吧，我用这个把脸从键盘上敲了一个小时。如果您的表的 Id 字段是 Identity 字段，那么它将不起作用，因此请为 identifierExpression 使用不同的字段。我使用了 Name 属性，还从`new Hall {...}`初始化程序中删除了 Id 字段。

对 OPs 代码的这种调整对我有用，所以我希望它对某人有所帮助：

```
protected override void Seed(HallContext context)
{
    context.Halls.AddOrUpdate(
        h => h.Name,   // Use Name (or some other unique field) instead of Id
        new Hall
        {
            Name = "Hall 1"
        },
        new Hall
        {
            Name = "Hall 2"
        });

    context.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-22T17:55:52.150

我知道这是一个老问题，但正确的答案是，如果你自己设置 id # 并且你想使用 AddOrUpdate 那么你需要告诉 EF/SQL 你不希望它生成 ID #。

```
modelBuilder.Entity<MyClass>().Property(p => p.Id)
    .HasDatabaseGeneratedOption(System.ComponentModel
    .DataAnnotations.Schema.DatabaseGeneratedOption.None); 
```

不利的一面是，当您插入一个新项目时，您需要设置它的 Id，因此如果这是在运行时动态完成的（而不是从种子数据中），那么您将需要计算出下一个 Id。 `Context.MyClasses.Max(c=>c.Id) + 1`效果很好。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-20T08:06:42.297

此代码有效：

```
public Configuration()
{
    AutomaticMigrationsEnabled = true;
}

protected override void Seed(HallContext context)
{
    context.Halls.AddOrUpdate(
        h => h.Id,
        new Hall
        {
            Id = 1,
            Name = "Hall 1"
        },
        new Hall
        {
            Id = 2,
            Name = "Hall 2"
        });

    context.SaveChanges();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-28T21:24:00.880

如果您错误地设置了实体状态，也可能会导致这种情况。当我运行更新数据库时，我不断收到以下错误...“序列包含多个匹配元素。”

例如，我在每个 update-database 命令上创建了重复的行（这当然不应该在播种数据时发生），然后下一个 update-database 命令根本不起作用，因为它找到了多个匹配项（因此序列错误说我有不止一个匹配的行）。那是因为我已经用对 ApplyStateChanges 的方法调用覆盖了我的上下文文件中的 SaveChanges ...

```
public override int SaveChanges()
{
    this.ApplyStateChanges();
    return base.SaveChanges();
} 
```

我使用 ApplyStateChanges 来确保在添加对象图时，Entity Framework 明确知道对象是处于添加状态还是修改状态。关于我如何使用 ApplyStateChanges 的完整说明可以在[这里](http://blog.longle.net/2013/05/11/genericizing-the-unit-of-work-pattern-repository-pattern-with-entity-framework-in-mvc/)找到。

这很好用（但需要注意！！）...如果您还使用 CodeFirst 迁移为数据库播种，那么上述方法将对 Seed 方法中的 AddOrUpdate() 调用造成严重破坏。因此，在其他任何事情之前，只需检查您的 DBContext 文件并确保您没有以上述方式覆盖 SaveChanges，否则您最终将获得第二次运行 update-database 命令的重复数据，然后根本无法工作第三次，因为每个匹配的项目不止一行。

归根结底，您不需要在 AddOrUpdate() 中配置 Id ......这违背了简单和初始数据库播种的整个目的。它可以通过以下方式正常工作：

```
context.Students.AddOrUpdate(
    p => p.StudentName,
    new Student { StudentName = "Bill Peters" },
    new Student { StudentName = "Jandra Nancy" },
    new Student { StudentName = "Rowan Miller" },
    new Student { StudentName = "James O'Dalley" }, 
```

只要我没有通过调用ApplyStateChanges 覆盖我的上下文文件中的SaveChanges 方法。希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-23T14:35:41.807

这些步骤对我有用

1.  删除表中的所有行。
2.  将增量标识重置为 0。`DBCC CHECKIDENT (yourtablename, RESEED, 0)`（在 中指定的主键`Seed()`必须与数据库表中的主键匹配，以免它们重复。）
3.  在“种子”方法中指定主键。
4.  `Seed()`多次运行该方法，然后检查它们是否重复。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-03T20:27:43.303

我发现这`AddOrUpdate`适用于不是 ID 的字段。如果这对您有用：`context.Halls.AddOrUpdate(h => h.Name, hall1, hall2, hall3)`

您可能想要使用“French_test_abc_100”、“German_test_abc_100”等大厅名称。

当你测试你的应用程序时，这会阻止硬编码的测试数据搞砸事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T09:03:27.513

如果 object(hall) 的 id 为 0，则为插入。我认为您需要仔细检查大厅对象的 id 字段

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T15:54:39.533

您的 ID 字段是身份字段吗？我遇到了同样的问题。当我从我的 ID 字段中删除身份状态并将 ID 设置到数据库中时，问题就解决了。

这对我有用，因为这些是查找表，无论如何都不应该是身份字段。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-03T01:15:19.210

我认为您可能需要使用类似于`Update-Database TargetMigration:0`后跟`Update-Database`.

实际上，您不会删除现有的表或值，而只是添加/更新这些值。这需要发生才能获得您想要的结果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-24T11:00:56.873

我使用 ID 字段作为 Identity/Key 并添加属性而不是由服务器分配 Id。这为我解决了这个问题。

```
public class Hall
{
    [Key]
    [Required]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int Id {get; set;}

    public string Name [get; set;}
 } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-09T11:06:47.920

就 Ciaren 的回答而言，以下重置 ModelCreating 上下文的代码帮助我解决了类似的问题。确保将“ApplicationContext”更改为您的 DbContext 名称。

```
public class ApplicationContext : DbContext, IDbContext
    {
        public ApplicationContext() : base("ApplicationContext")
        {

        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
            Database.SetInitializer<ApplicationContext>(null);
            base.OnModelCreating(modelBuilder);
        }
     }
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-17T09:50:51.390

我发现要让它起作用，当种子第一次运行时，身份位置应该是 0。您可以使用以下方法重置它：

```
DBCC CHECKIDENT (tableName, RESEED, 0) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-21T20:43:08.990

你也可以这样做：

```
 context.Halls.AddOrUpdate(new Hall[]{hall1,hall2, hall3}); 
```

# ios - 如何避免触摸自定义视图的某些区域？

> ID：10007357
> 
> 赞同：1
> 
> 时间：2012-04-04T08:19:22.397
> 
> 标签：ios

在我添加到我的 viewControllers 视图的自定义视图中，我需要处理触摸，但只在它的某些区域而不是在任何地方。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:22:17.980

您可以覆盖`pointInside:withEvent:`以使视图忽略不在您想要的区域中的触摸。

# .net - C#/.Net JIT 在不同版本的 Windows 上

> ID：10007358
> 
> 赞同：0
> 
> 时间：2012-04-04T08:19:27.090
> 
> 标签：.net, compilation, c#-3.0, jit

我最近一直在处理很多 C#/.Net 代码，并注意到一些（可能）奇怪的东西。

我所在的团队正在使用 Windows 7 Professional 和 Visual Studio 2008（物有所值）进行开发，并且当生成的某些代码在不同版本的 Windows 上运行时（在我的示例中，安装了 .Net 3.5 的 Windows XP Professional ) 我们得到一些稍微奇怪的行为。

我注意到的是一组非常具体的嵌套 ifs（每个都调用相同的方法，但使用不同的参数），在 switch 块中，在一台特定机器上运行时的行为似乎与开发时不同机器。我的意思的一个例子是这样的：

```
switch (someVariable)
{
    case true:
        //do some stuff
        //this case seems fine when stepped through
        break;
    case false:
        //do some stuff
        //this is the case that causes problems
        if (Foo())
        {
            if(Bar())
            {
                someOtherMethod();
                //I'll call these the nested ifs
                if (object.SomeValue == targetValueOne)
                    FooBar(string, someParam, int anotherParam);
                if (object.SomeValue == targetValueTwo)
                    FooBar(string differentStrParam, int differentIntParam);
                else
                    FooBar(string thirdStrParam, int thirdIntParam);
            }
        }
        else
        {
           //do some different things
        }
        break;
} 
```

这个例子过于复杂，但它仍然（几乎）适用于我面前的代码（有额外的 if 来检查 object.SomeValue 的值）。

在 Windows 7（开发）机器上，代码运行完美——我已经通过 object.SomeValue 的每个排列逐步完成它，并且每个代码路径都按计划执行。但是，当此代码在 Windows XP（属于测试仪）机器上运行时，嵌套的 if 似乎甚至没有被调用，尤其是当 Bar() 返回 true 时。

FooBar() 有两个版本，一个返回，一个不返回。我在这里明确调用了没有的版本。

Foo() 和 Bar() 是两种不同的设置方法，如果它们完成设置步骤则返回 true，否则返回 false。

正如我上面所说，当这段代码在测试者的机器上运行时，嵌套的 if 将被完全跳过。而他们在开发机器上被正确评估。我知道 JIT 在运行时编译为本机代码，并且本机代码特定于运行它的机器。

所以，我想我在问是否有人知道是否是测试人员机器上的 JIT 导致这些嵌套的 if 被跳过，或者我是否错过了一些东西？或者，JIT 编译器是否正在尝试优化此块并生成实际上并没有按预期方式执行的代码？

也许是一个更清楚的例子：

```
switch (Hawrdware.SomeProperty)
{
  case true:
      //do some stuff
      //this case seems fine when stepped through
      break;
  case false:
    //do some stuff
    //this is the case that causes problems
    if (SetupHardware()) //calls our library functions
    {                    //these have been tested thoroughly
      if(WaitForCorrectResponse()) //waits for the correct post-setup
      {                            //message from the hardware
        SendOTAMessageFromHardware(string message);
        //I'll call these the nested ifs
        if (Hawrdware.PropertyOne == targetValueOne)
            SendOTAMessageFromHardware(string message, int timeOutForResponse);
        if (Hawrdware.PropertyTwo == targetValueTwo)
            SendOTAMessageFromHardware(string message, int timeOutForResponse);
        else
            SendOTAMessageFromHardware(string message, int timeOutResposnse);
      }
    }
    else
    {
       //do some different things
    }
    break;
}

public void SendOTAMessage(string message)
{
  if (message != null)
  {
    device.Write(message);
    //Hardware's on-board OS takes care of the rest
  }
}

public void SendOTAMessage(string message, int TimeOut)
{
  if (message != null)
  {
    StopWatch clock = new StopWatch();
    device.Write(message);
    //Hardware's on-board OS takes care of the rest

    while (time.Elapsed.TotalSeconds < TimeOut)
    {
      //wait and see if we get a response
      //if we do, store it in a string (legacy
      //reasons state we have to do this
    }
  }
}

public string SendOTAMessage(string message, int TimeOut)
{
  if (message != null)
  {
    StopWatch clock = new StopWatch();
    device.Write(message);
    //Hardware's on-board OS takes care of the rest

    while (time.Elapsed.TotalSeconds < TimeOut)
    {
      //wait and see if we get a response
      //if we do, return this message as a string
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:51:48.880

你需要排除所有其他可能的因素，除非你有比“我的 if 语句永远不会在调试器中被命中”更确定的东西。

构建两台相同的机器：

*   一个使用“可疑”操作系统版本，另一个使用 Dev 中的版本。两者都应该在初始测试时使用相同的“位数”——即如果一个是 32 位，另一个也必须是 32 位。
*   确保新机器具有正确的 .NET Framework 版本、第三方库、所需软件等。
*   确保它们是从 Windows 更新修补的。
*   确保已安装外部硬件驱动程序，并且都是相同版本的驱动程序。如果硬件供应商根据操作系统提供不同的库/软件，那么您需要知道原因。
*   确保外部硬件连接正确，两者的软件版本相同。
*   确保外部硬件连接相同。（机器上的相同端口）
*   确保外部硬件在两者上发回相同的响应（外部硬件的行为可能会因操作系统版本而异）
*   确保在相同的线程上以相同的顺序触发相同的事件。
*   确保在输入方法时将相同的变量设置为相同的状态。

在整个测试过程中，请确保您对其中一个执行的每个操作都与另一个执行相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:12:38.057

如果您确实怀疑编译错误，请执行以下操作：

1.  在切换之前跟踪 Hawrdware.SomeProperty 的值
2.  在 false 开关盒内添加跟踪
3.  在 SetupHardware 和 WaitForCorrectResponse 中添加跟踪值。

如果您在 case 语句中看到 Hardware.SomeProperty==false + trace 但在方法中**没有任何**跟踪，则可能是正确的。也不需要单步执行，从等式中删除调试器只会让事情变得更简单。

# php - 返回 cakePHP 模型中的选定字段

> ID：10007359
> 
> 赞同：0
> 
> 时间：2012-04-04T08:19:41.663
> 
> 标签：php, cakephp

我只想返回用户表中的所有行，但选择的字段和可能的 concat 2 字段。

正常的 sql 可能只是：

```
SELECT id, CONCAT(`first_name`,`last_name`) AS `fullname` FROM `users` 
```

但试图在蛋糕中实现这一点是一场噩梦：

```
$users = $this->User->find("all") = returns everything
$users = $this->User->find("list",array("fields" => " ...) does not work either. 
```

谁能帮我看看如何使用蛋糕模型来实现简单的查询和返回结果

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:21:07.857

你很接近：

```
$this->User->find('all', array('fields' => array('CONCAT(first_name,last_name) AS fullname', 'otherfield'), 'contain' => array()); 
```

# c# - 我是否以正确的方式统一使用依赖感染？

> ID：10007360
> 
> 赞同：1
> 
> 时间：2012-04-04T08:19:49.707
> 
> 标签：c#, dependency-injection, inversion-of-control, unit-of-work

我即将学习 IoC 和依赖注入。我想知道我是否理解正确的原理和模式。

我尝试实现 UnitOfWork / Repository Pattern。我想要两个用于单元测试的存储库类的实现，并且我希望 UnitOfWork “决定”要实例化哪个具体实现（在 Unity 的帮助下）。

## **例子**

***IUserRepository 接口***

```
public interface IUserRepository
{
    List<User> getAll();       
} 
```

***使用真实数据的存储库实现***

```
public class UserRepository : IUserRepository
{

    private MyDbContext db;

    public UserRepository(MyDbContext db)
    {
        this.db = db;
    }

    public List<DomainModel.User> getAll()
    {
        return db.Users.ToList();
    }
} 
```

***FakeRepository 实现***

```
public class FakeUserRepository : IUserRepository
{
    private List<User> userSet;

    public FakeUserRepository()
    {
        // Fake Data
        userSet = new List<User>();
        userSet.Add(new User { Username = "john", Active = true, EMail = "john@ann.net", Password = "supersecret" });
        userSet.Add(new User { Username = "ashley", Active = true, EMail = "ashley@ann.net", Password = "supersecret" });
        userSet.Add(new User { Username = "kaidan", Active = true, EMail = "kaidan@ann.net", Password = "supersecret" });
        userSet.Add(new User { Username = "tali", Active = true, EMail = "tali@ann.net", Password = "supersecret" });

    }

    public List<DomainModel.User> getAll()
    {
        return userSet;
    }

} 
```

***我使用 Unity 的 UnitOfWork 实现***

```
// To Keep it simple, i skipped the IDisposable part ;)

public class UnitOfWork
{
    MyDbContext db;
    private IUserRepository userRepository;
    UnityContainer container = new UnityContainer();
    public UnitOfWork(bool fake = false)
    {
        if (fake)
        {
            container.RegisterType<IUserRepository, FakeUserRepository>();
        }
        else
        {
            db =  = new MyDbContext();
            container.RegisterType<IUserRepository, UserRepository>(new InjectionConstructor(db));
        }
    }

    public IUserRepository UserRepository
    {
        get
        {
            if (userRepository == null)
            {
                userRepository = container.Resolve<IUserRepository>();
            }
            return userRepository;
        }
    }

    public void Save()
    {
        db.SaveChanges();
    }
} 
```

现在，当我调用`new UnitOfWork()`它时，它会给我“UnitOfWork with RealData”实现。如果我打电话给`new UnitOfWork(fake: true)`它，它会给我“UnitOfWork with Fake Data”。到目前为止，一切都很好。但这是应该使用 Unity 和 DI 的方式吗？如果我的应用程序增长到 30 个存储库，我最终会定义大型“If/else”块，对吗？想象一下，想要添加更多的数据存储，如 XML 或 WCF 作为数据源。如果我继续像上面那样使用它，我最终会得到一个非常复杂和崩溃的 UnitOfWork 类。

首先：我不确定我是否理解 DI 和 Unity，因为它是要使用的。如果我理解正确：使用一个可以为我提供正确类型的 UnitOfWork 的工厂会更好吗？

非常欢迎任何帮助或提示。

谢谢，

马策

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:32:17.760

我会像你对存储库所做的那样分离工作单元：一个 IUnitOfWork 接口和用于伪造的具体类和实体框架工作单元。您现在拥有的工作单元违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，因为它具有多种职责：

*   将保存调用传递给实体框架工作单元
*   确定工作单​​元是假的还是真的
*   在 Unity 容器上注册存储库

如果您有一个单独的实体框架工作单元，则不需要容器来解析存储库，但您可以使它们成为您在构造函数中初始化的成员变量。您只需在容器上注册正确的工作单元。

# php - Aptana：如何像在 Dreamweaver 中那样使用 include()、require() 等链接文件？

> ID：10007361
> 
> 赞同：4
> 
> 时间：2012-04-04T08:19:52.233
> 
> 标签：php, aptana, dreamweaver

在 Dreamweaver 中，如果您使用 include() 等，它会将它们识别为资源，然后您可以在它们之间滑动，因为 Dreamweaver 在页面顶部为它们创建“选项卡”（以及从该文件链接的其他资源，例如 javascripts 等） . 您如何至少让 Aptana 承认外部资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:27:57.900

目前我正在使用 Netbeans，但在此之前我也使用过 Aptana 2。

在 Aptana 2 中，它通过以下方式为我工作：

1.  右键单击项目并选择“属性”
2.  切换到项目性质
3.  选择*网络*作为主要性质。
4.  还要检查*php*作为项目性质
5.  按 CTRL 并将鼠标移到路径 / 要求上，它现在应该可以点击了

也许您必须重新启动 Aptana。如果这不起作用，请尝试将 php 设置为主要性质。（其中一个设置对我有用）

# eclipse - 使用 Eclipse CDT 无法在 makefile 项目上解析符号

> ID：10007370
> 
> 赞同：2
> 
> 时间：2012-04-04T08:20:29.543
> 
> 标签：eclipse, eclipse-cdt

我有一个makefile项目。我可以在命令行中构建它。但是当我将此项目添加到 Eclipse 并构建为 makefile 项目时。二进制输出文件已创建并正常运行，但 eclipse 出现错误：符号 stderr（或 NULL、bool 等）无法解析。我该如何解决这些问题？

# android - 异常回调调用

> ID：10007373
> 
> 赞同：0
> 
> 时间：2012-04-04T08:20:46.857
> 
> 标签：android, flash, air

我有这样一个问题：在带有 Android 操作系统的设备上，我正在执行动作脚本代码。我有一个方法，它必须发送一些数据到服务器。但！！！即使我在向服务器发送一些数据之前停止我的应用程序 - 它仍然会以某种方式发送该数据。不明白怎么可能？？有人遇到过这个问题吗？请帮我。谢谢。

```
public class VerifyCommand extends SimpleCommand
    {

        override public function execute(notification:INotification):void 
        {       
            //here is the place, where I put breakpoint and stop the program
            trace("here is the place, where I put breakpoint and stop the program");
            verify();
        }

        private function verify():void
        {
            var tempError:Error = new Error();
            var stackTrace:String = tempError.getStackTrace();
            trace(stackTrace);

            var request : URLRequest = new URLRequest();
            request.url = "http://www.somesite.com";

            request.method = URLRequestMethod.POST;
            request.contentType = "application/x-www-form-urlencoded; charset=utf-8";
            request.data = variables;
            request.useCache = false;
            request.cacheResponse = false;

            var call_loader:URLLoader = new URLLoader();
            call_loader.dataFormat = URLLoaderDataFormat.TEXT;
            call_loader.addEventListener(Event.COMPLETE, onVerificationResult); 
            call_loader.addEventListener(IOErrorEvent.IO_ERROR, onVerificationError);
            call_loader.load(request);
        }

        private function onVerificationResult(event:Event):void 
        {
            trace("all ok");
        }

        private function onVerificationError( event:Event):void 
        {       
            trace("all failed");
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:09:53.550

这是一个调试器错误，它并没有完全停在我认为应该的地方。

# mongodb - 是否可以从 map reduce 引擎的 finalize 方法更新 mongo 集合？

> ID：10007379
> 
> 赞同：3
> 
> 时间：2012-04-04T08:21:10.743
> 
> 标签：mongodb, mapreduce

我试图将要更新的集合作为范围变量传递 - 没有骰子。我试图`db.getCollection`从 finalize 正文中调用 - 没有骰子，我得到了这个：

```
db assertion failure, assertion: 'invoke failed: JS Error: TypeError: db has no properties nofile_b:18', assertionCode: 9004 
```

我想这意味着它`db`在 finalize 方法中是未定义的。那么，有可能吗？

**编辑**

这是我的 finalize 方法：

```
function(key, value) {
  function flatten(value, collector) {
    var items = value;
    if (!(value instanceof Array)) {
      if (!value.items) {
        collector.push(value);
        return;
      }

      items = value.items;
    }
    for (var i = 0; i < items.length && collector.length < max_group_size; ++i) {
      flatten(items[i], collector);
    }
  }

  var collector = [];
  flatten(value, collector);
  return collector;
} 
```

我想`collector.push(value)`用插入替换到某个集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:59:07.373

无法从 Map/Reduce/Finalize 函数内部修改另一个集合。

这是来自有类似问题的用户提出的问题的链接。不幸的是，答案是“不”。
[如何更改 MongoDB 的 map-reduce 结果的结构？](https://stackoverflow.com/questions/8416262/how-to-change-the-structure-of-mongodbs-map-reduce-results)

部分原因是 MapReduce 设计为在分片环境中工作。计算分布在不同的分片之间，然后汇总结果。如果每个分片上运行的每个函数都被允许修改集合，那么每个分片最终可能会得到不同的数据。

如果您希望通过 Map Reduce 操作修改单独的集合，最好的策略是运行 Map Reduce 操作，获取结果，然后让您的应用程序更新单独的集合。

如果您希望合并多个 Map Reduce 操作的结果，可以通过增量 Map Reduce 来实现。这方面的文档可以在这里找到：[http ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce)

# php - 用php中的2个跨度替换换行符

> ID：10007380
> 
> 赞同：1
> 
> 时间：2012-04-04T08:21:15.480
> 
> 标签：php, html, regex

考虑以下 HTML 字符串：

```
<p>This is line 1 <br /> and this is line 2</p> 
```

如何使用 PHP / Regex 将上述内容替换为以下字符串

```
<p><span class="single-line">This is line 1</span><span class="single-line">and this is line 2</span></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:29:03.037

我并不是真的建议你真的这样做（因为恕我直言，你在滥用标记和类），但它实际上很简单：

你替换

```
<p> 
```

和

```
<p><span class="single-line"> 
```

和

```
<br /> 
```

和

```
</span><span class="single-line"> 
```

最后

```
</p> 
```

和

```
</span></p> 
```

一个可以替换字符串的 PHP 函数是[`strtr`^(*Docs*)](http://php.net/strtr)。

请注意，这仅适用于您在问题中给出的 HTML 片段。如果您需要更精确，您应该考虑使用`DOMDocument`and ，`DOMXPath`正如我在上面已经评论过的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:33:46.163

这可行，但我建议您不要依赖正则表达式进行 HTML 解析/转换：

```
$string = '<p>This is line 1 <br /> and this is line 2</p>';
$pattern = '~([^<>]+)<br[[:blank:]]*/?>([^<>]+)~i';
$replacement = '<span class="single-line">$1</span><span class="single-line">$2</span>';

echo preg_replace($pattern, $replacement, $string); 
```

# java - Java：从匿名类操作中获取结果

> ID：10007382
> 
> 赞同：0
> 
> 时间：2012-04-04T08:21:18.487
> 
> 标签：java, inner-classes

我想做这样的事情：

```
public class ScadenzaService {

   ...
   public List<Scadenza> tutteLeScadenze() {

        List<Scadenza> scadenze = null;

        txm.doInTransaction(new TransactionAction() {
            @Override
            public void perform() {
                scadenze = dao.getAll(Scadenza.class);              
            }
        });

        return scadenze;
    } 
```

但是我无法在内部类中访问 scadenze，因为它不是最终的。但是， final 无济于事：它是一个常数。

解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:25:55.830

制作`scadenze`final 并将其初始化为新的`List`. 在您的匿名课程中，您仍然可以添加到列表中；被宣布为 final 并不能阻止这一点。

```
public List<Scadenza> tutteLeScadenze() {

    final List<Scadenza> scadenze = new ArrayList<Scadenza>();

    txm.doInTransaction(new TransactionAction() {
        @Override
        public void perform() {
            scadenze.addAll(dao.getAll(Scadenza.class));
        }
    });

    return scadenze;
} 
```

# java - JSF preRenderComponent 事件不会触发

> ID：10007402
> 
> 赞同：0
> 
> 时间：2012-04-04T08:22:11.960
> 
> 标签：java, jsf-2, cdi

我在尝试设置 bean 变量并调用该方法以通过事件设置用户时遇到问题。问题是 viewParam 工作（我可以请求页面上的值及其在 bean 中的设置）但事件 preRenderComponent（也不是 preRenderView）没有被触发。奇怪的是，如果我用 @PostConstruct 注释 initUser 方法，事件**确实会**触发，但它也会触发 @PostConstruct ，这不是我想要的。但是，如果我删除注释，它根本不会进入方法。

你会在下面找到我的 .xhtml，在下面找到我的 bean。我正在使用 netbeans 和 Glassfish (3.0) 服务器。我在这里做错了什么？

XHTML：

```
 <f:metadata>
        <f:viewParam name="userId" value="#{tweetBean.userId}" />
        <f:event listener="#{tweetBean.initUser}" type="preRenderComponent" />
        <f:event listener="#{tweetBean.initUser}" type="preRenderView" />
    </f:metadata> 
```

豆：

```
 @Named
    @RequestScoped
    public class tweetBean implements Serializable
    {
        @Inject
        private KwetterService service;
        private String userId; // Has Getters + setters

        public void initUser()
        {
            System.out.println("test");

            for (User u : service.findAll())
            {
                if (u.getName().equals(userId))
                {
                    user = u;
                    System.out.println("User found");
                }
            }

            if (user == null)
            {
                System.out.println("no user found with this name");
                user = service.find(0);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:02:17.900

试试看：

```
<f:metadata>
   <f:event type="javax.faces.event.PreRenderViewEvent" listener="#{tweetBean.initUser}" />
</f:metadata> 
```

顺便说一句：我认为如果您使用`@PostConstruct`正常的生命周期回调由容器执行，但事件仍然没有触发......

# vba - 是否可以在右键单击操作上实现 OnAction() 处理程序？

> ID：10007404
> 
> 赞同：0
> 
> 时间：2012-04-04T08:22:14.550
> 
> 标签：vba, ms-word

是否可以在右键单击操作上实现 OnAction() 处理程序？这是针对以编程方式创建的 DropDown 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:57:04.067

您可以查看[WindowBeforeRightClick](http://msdn.microsoft.com/en-us/library/ff837868.aspx)

```
Public WithEvents appWord as Word.Application 

Private Sub appWord_WindowBeforeRightClick _ 
 (ByVal Sel As Selection, Cancel As Boolean) 
 Dim intResponse As Integer 

 intResponse = MsgBox("Selection = " & Sel & vbLf & vbLf _ 
 & "Continue with operation on this selection?", _ 
 vbYesNo) 
 If intResponse = vbNo Then Cancel = True 
End Sub 
```

或者[自定义右键菜单](http://gregmaxey.mvps.org/word_tip_pages/customize_shortcut_menu.html)

我也没有尝试过。

# .net - 每个用户使用线程来访问公共服务

> ID：10007410
> 
> 赞同：0
> 
> 时间：2012-04-04T08:22:37.143
> 
> 标签：.net, multithreading, excel, ms-office

我的应用程序使用 Microsoft.Office.Interop.Excel 服务生成 Excel 报告并下载为 PDF。如果多个用户请求同一页面，即：相同的服务，那么第一个用户能够获得结果，但后一个用户会产生一些异常。我们可以通过为每个用户提供单独的线程来避免这种情况吗？如果一个正在运行，那么另一个必须等​​待几秒钟。

这是我的代码：

```
protected void btn2games_Click(object sender, ImageClickEventArgs e)
    {
       myfilepath = "acd.xlsx";

        try
        {
            string sr = Server.MapPath(myfilepath.ToString());

            if (File.Exists(myfilepath))
            {
                File.Delete(myfilepath);
            }
        }
        catch
        {
        }    

       ExceltoPdf();
    }

protected void ExceltoPdf()
{

//here the code goes : to fetch data from DB and write to Excel using Office.Interop.Excel

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:30:37.443

Office 库未获得服务器使用许可（我上次检查过），并且 COM 互操作接口不是线程安全的。尝试在 Web 应用程序中使用它们是不明智的。

除了许可问题，您*可以*创建一个排队系统，允许将请求提交给系统（可能是 Windows 服务），该系统一次处理一个请求，或者可能启动多个子进程（不是线程......进程）同时处理多个请求。

不过，这可能不值得进行工程方面的努力。如果你用谷歌搜索“Excel to PDF”，你会发现相当多的第三方组件打算在服务器环境中使用。由于缺乏直接经验，我不能推荐任何具体的。

# javascript - 在 jquery 函数中设置变量

> ID：10007421
> 
> 赞同：0
> 
> 时间：2012-04-04T08:23:11.243
> 
> 标签：javascript, jquery, function, variables

在我`init`的设置中，我设置了一些变量和一个使用这些变量的动画。

* * *

如果我想在我的 中使用相同的动画/变量`clickSlide`怎么办？ [http://jsfiddle.net/lollero/4WfZa/](http://jsfiddle.net/lollero/4WfZa/)（这显然行不通。）

我可以使它成为全球[http://jsfiddle.net/lollero/4WfZa/1/](http://jsfiddle.net/lollero/4WfZa/1/)（通过删除`var`）

* * *

**问题是**：有没有更好的方法，或者这是完全没问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:26:25.533

将变量放在函数之外，然后获取值

```
var getWidth ;
var getHeight ;

$(function(){

    var slideBox = {

        gb: $('#box'),

        init: function() {

                sb = this,
                getBox = sb.gb,
                getWidth = getBox.width(),
                getHeight = getBox.height();
            getBox.animate({ marginLeft: '+='+getWidth }, 600 );

            $("#button").on("click", this.clickSlide);
        },

        clickSlide: function() {

            getBox.animate({ marginLeft: '+='+getWidth }, 600 );
        }
    };

    slideBox.init(); 
}); 
```

而不是在功能中使用，以便您可以在点击功能中获得价值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:27:40.147

如果您要经常使用它们，我会将它们设为对象的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:45:56.347

你的变量似乎没有必要，你可以像这样访问你需要的一切：http: [//jsfiddle.net/4WfZa/6/](http://jsfiddle.net/4WfZa/6/)。如果您确实需要存储它们，您可以随时将它们添加到 slideBox 对象，然后在 init 中填充它们。这样，变量就存储在对象上，并且可以在其中的任何函数中使用。

有关 javascript 命名空间的精彩文章，包括如何设置私有和公共变量，请参阅[这篇文章](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)。

# regex - 用于在 htaccess 中创建 pritty url 的正则表达式

> ID：10007422
> 
> 赞同：0
> 
> 时间：2012-04-04T08:23:11.147
> 
> 标签：regex, .htaccess

什么是正确的正则表达式

创建这个网址：domain.nl/projecten/scheidingswanden

```
http://www.domain.nl/?module=projectencat&action=scheidingswanden 
```

**换句话说：用斜杠替换变量名 ?module= 和 &action=**

**但也反过来，因为前端控制器需要读取获取变量模块和操作**

不知道是不是只有htaccess，但是缺少这个逻辑

谢谢，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:16:12.963

```
RewriteRule  ^([^/])/([^/])$    ?module=projectencat&action=scheidingswanden  [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:42:58.600

这可能会有所帮助：

```
RewriteEngine on
RewriteRule ^([a-zA-Z]+)/(.*)/index.html$ index.php?module=projectencat&action=scheidingswanden

[a-zA-Z]+ = requires one or more alphabetic chars
(.*)      = requires one or more any kind of chars 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:56:15.923

这是你想要的：

```
RewriteRule  ^([^/]+)/([^/]+)$    ?module=$1&action=$2 
```

# regex - 正则表达式匹配由两个逗号分隔的三个单词

> ID：10007423
> 
> 赞同：6
> 
> 时间：2012-04-04T08:23:14.277
> 
> 标签：regex

我正在尝试用两个逗号分隔至少三个单词。到目前为止，我已经设法将两个单词与一个逗号匹配

```
/([A-z]|[0-9])(,{1})([A-z]|[0-9])/ 
```

但是我怎样才能在这个中添加一个逗号和一个单词。我试过重复同样的内容，但没有奏效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:33:10.123

`/^(?:\w+,){2,}(?:\w+)$/`

这将为您提供至少 3 个单词 ([a-zA-Z0-9_]+) 的逗号分隔列表。

`/^\s*(?:\w+\s*,\s*){2,}(?:\w+\s*)$/`

这是第一个版本的用户友好型版本，允许单词之间有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:33:33.230

如果它是[PERL 派生的 regex](http://en.wikipedia.org/wiki/Regular_expression#Perl-derived_regular_expressions)，就像我遇到的大多数实现一样，`/[^,]+(?:,[^,]+){2,}/`它可以很好地针对其中至少有两个逗号的任何东西进行测试，前提是逗号之间有一些东西。该`(?:)`构造允许在不捕获的情况下进行分组。该`{2,}`构造指定了前一组的 2 个或更多匹配项。在javascript中，您可以对其进行测试：

```
/[^,]+(?:,[^,]+){2,}/.test("hello,world,whats,up,next"); // returns true

/[^,]+(?:,[^,]+){2,}/.test("hello,world"); // returns false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:33:42.747

从性能角度提出的一些一般性建议：

1.  不要使用 [ ]|[ ] 子句 - 您可以在一个 [ ] 中放置几个​​字符类，例如 [A-Za-z0-9]
2.  不要过度使用 () - 通常它们每个都存储捕获的参数，这需要额外的开销。如果您只需要将几部分组合在一起，请查找不存储匹配的分组运算符（可能类似于 (?: ... ) ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:41:03.617

试试这个：

```
([a-zA-Z0-9]+)(,[a-zA-Z0-9]+){2,} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T08:57:50.367

这将解决你的问题，试试这个

([a-zA-Z0-9],[a-zA-Z0-9],([a-zA-Z0-9]))

# c# - 在 /clr 支持下从 win32 C++ 运行 C#

> ID：10007427
> 
> 赞同：0
> 
> 时间：2012-04-04T08:23:36.903
> 
> 标签：c#, c++, linker

就像我之前的问题一样，我想绘制一个实时图表来跟踪激光扫描仪对象的位置。我已经将 vs2010 c++ 中的算法开发为一个支持 /clr 的 win32 应用程序。我在每次扫描时找到对象的确切位置（x，y）。但我想要.NET 用于 GUI 目的。我已经使用 Zedgraph 在 c# 中绘图。现在，我想从 c++ 调用 C# 表单。我从昨天开始就在寻找答案，我发现我们可以使用

1.  c++/cli 2.使用COM互操作。

我尝试在 c++ 中添加 c# dll 的引用。但我不知道如何从 c++ 调用它们。我正在寻找从初学者的角度来执行其中任何一个的文档或链接。任何输入或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:40:17.317

您很可能希望在此处反转您的结构并从您的 C# GUI 调用托管 C++ 库。在 C# 中，您可以实例化 C++ 监视对象并开始获取读数、接收它们，然后在 GUI 中显示结果。

# validation - 如何在不同的消息元素中显示相同输入字段的 ValidatorException 和 required="true"

> ID：10007438
> 
> 赞同：10
> 
> 时间：2012-04-04T08:24:52.987
> 
> 标签：validation, jsf, jsf-2

我采用了以下[BalusC 启动示例](https://stackoverflow.com/a/7493527/617373)，并通过添加提交按钮和附加 h:messages 并`f:ajax`从中`h:inputSecret's`删除（由于某种原因删除了`f:ajax`原因，当我离开第一个时`h:inputSecret`，它立即显示“需要值”错误）第二`h:inputSecret`- 但用户没有机会输入它...... ??? <- 另一个未来的问题？:)）

**好的，长话短说：**

我试图弄清楚如何在全局 h:messages 中而不是在密码字段的单个 h:message 中显示关于两个密码字段（密码不相等）的验证错误我确实想要="true" 将显示在`<h:message`每个字段的...

但是现在验证消息（由我的异常抛出）和 required="true" 显示在同一个地方

这是代码：

```
<h:outputLabel for="password" value="Password:" />
<h:inputSecret id="password" value="#{bean.password}" required="true">
    <f:validator validatorId="confirmPasswordValidator" />
    <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
</h:inputSecret>
<h:message id="m_password" for="password" />

<h:outputLabel for="confirm" value="Password (again):" />
<h:inputSecret id="confirm" binding="#{confirmPassword}" required="true">
</h:inputSecret>
<h:message id="m_confirm" for="confirm" /> 
```

以及`h:commandButton`下面`h:messages`的代码：

```
<h:commandButton value="doSomething" action="#{myBean.myAction}">
    <f:ajax execute="password confirm" render="m_password m_confirm"></f:ajax>
</h:commandButton>
<h:messages globalOnly="true" styleClass="validation_value_required"/> 
```

```
@FacesValidator("confirmPasswordValidator")
public class ConfirmPasswordValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        String password = (String) value;
        String confirm = (String) component.getAttributes().get("confirm");

        if (password == null || confirm == null) {
            return; // Just ignore and let required="true" do its job.
        }

        if (!password.equals(confirm)) {
            throw new ValidatorException(new FacesMessage("Passwords are not equal."));
        }
    }

} 
```

还

提前谢谢，

**解决方案（感谢 BalusC）**

改变了

```
<f:attribute name="confirm" value="#{confirmPassword.submittedValue}" /> 
```

到

```
<f:attribute name="confirm" value="#{confirmPassword}" /> 
```

和

```
String confirm = (String) component.getAttributes().get("confirm"); 
```

进入

```
UIInput confirmPasswordComponent = (UIInput) component.getAttributes().get("confirm");
String confirm = (String) confirmPasswordComponent.getSubmittedValue(); 
```

和

```
throw new ValidatorException(new FacesMessage("Passwords are not equal.")); 
```

进入

```
context.addMessage(null, new FacesMessage("Passwords are not equal."));
context.validationFailed();
((UIInput) component).setValid(false);
confirmPasswordComponent.setValid(false);
return; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:01:28.283

如果`Validator`特定组件上的 a 抛出 a `ValidatorException`，那么`FacesMessage`它将自动与`Validator`调用 的组件相关联。

您需要`FacesMessage`在`null`客户端 ID 上手动添加 ，以便它以`<h:messages globalOnly="true">`. 您还需要手动设置`validationFailed()`，`FacesContext`以便 JSF 不会更新模型值或调用操作。如有必要（尽管建议），您还需要手动将组件标记为无效，以便任何适当的侦听器/树访问器（例如，用于突出显示）都会考虑到这一点。

```
if (!password.equals(confirm)) {
    context.addMessage(null, new FacesMessage("Passwords are not equal."));
    context.validationFailed();
    ((UIInput) component).setValid(false);
    confirmPasswordComponent.setValid(false); // You'd need to pass it as component instead of as its submitted value in f:attribute.
} 
```

顺便说一句，[OmniFaces](http://omnifaces.org)项目有一个`<o:validateEqual>`组件可以让这变得不那么乏味。另请参阅[展示示例](http://showcase.omnifaces.org/validators/validateEqual)。

# android - 使用 get() 返回值时，Android ASyncTask 未在 onPreExecute() 中显示对话框

> ID：10007440
> 
> 赞同：1
> 
> 时间：2012-04-04T08:25:09.747
> 
> 标签：android, android-asynctask

我需要从 ASyncTask 向主线程返回一个值，所以我使用了 get() 方法，以便主线程等待后台线程运行。

```
time = mFetchServerDate.execute().get(); 
```

但是，在我的 ASyncTask 中，我在 onPreExecute() 方法中打开了一个进度对话框，当我不使用 get() 时它按预期工作，但是当我将它添加回它时，它只会挂起应用程序，显示对话框的一小部分一秒钟然后回到主线程。

```
@Override 
protected void onPreExecute(){
   super.onPreExecute();
   pd = ProgressDialog.show(mContext, "", "", true, false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:57:40.210

`get()`如果您使用了 asyncTask 的方法，我不确定它是否不起作用。

无论如何，您可以使用`this.runOnUiThread(action)` ；当您需要在 AsyncTaks 等线程中更新 UI 时。

# sql - 带有 SQL 表的 WCF - 公开元数据

> ID：10007450
> 
> 赞同：0
> 
> 时间：2012-04-04T08:25:48.813
> 
> 标签：sql, wcf, metadata

我开发了小型 WCF 服务，它从表中获取所有记录。它看起来像这样：

`IService1.cs`：

```
[ServiceContract]
public interface IService1
{
    List<badanieCis> GetRecords();
} 
```

`Service1.svc.cs`：

```
public List<badanieCis> GetRecords()
{
   przychodniaEntities dataContext = new przychodniaEntities();
   return dataContext.badanieCis.ToList();
} 
```

我收到一条消息：添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据

经过一些研究后，我所做的是更改 svc 文件中的标记：

```
<%@ ServiceHost Language="C#" Debug="true"
    Service="Harvesting.Service.HarvestingService" CodeBehind="Service1.svc.cs" %> 
```

但还是一无所获。

我的`web.config`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <connectionStrings>
    <add name="przychodniaEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DAREK-PC\SQLExpress;initial catalog=przychodnia;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:38:44.370

您在配置文件中缺少服务定义。你需要类似的东西：

```
<services>
  <service behaviorConfiguration="..." name="Service1 with namespace">
    <endpoint address="..." name="..." binding="wsHttpBinding" bindingConfiguration="...." contract="IService1 with unterface" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
 <services>
 ... 
```

您可以使用此[工具](http://sdn.microsoft.com/en-us/library/ms732009.)来帮助进行配置。

# php - 如何在 Drupal 7 中验证钩子块配置表单

> ID：10007455
> 
> 赞同：0
> 
> 时间：2012-04-04T08:26:04.547
> 
> 标签：php, validation, drupal, drupal-hooks, drupal-blocks

在 Drupal 7[中 hook_block_configure](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_configure/7)和[hook_block_save](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_save/7)提供了一种修改块设置并保存这些值的方法。

但是在保存值之前如何对表单进行验证呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:16:16.873

正如在配置表单元素时发现[的](http://drupal.org/node/280585)那样，您应该添加一个“#element_validate”，它指向元素的自定义验证功能。[您可以在此处](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#element_validate)的 Form Api 中找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:40:40.980

如果您希望为整个表单添加验证，这实际上是不可能的。我设法实现自己的最佳方法是将自定义函数添加到代码中，其中 $edit 作为参数，布尔值作为返回值。然后在保存数据之前调用该函数`hook_block_save()`以执行额外的检查。工作正常，唯一的例外是它不会突出显示表单中不正确的红色值。

# delphi - 从 QuickReport 迁移到 FastReport、Rave Reports 还是什么？

> ID：10007457
> 
> 赞同：5
> 
> 时间：2012-04-04T08:26:26.703
> 
> 标签：delphi, migration, rave-reports, fastreport, quickreports

我正在将一个 Delphi 项目从旧的 Delphi 2.0 IDE 迁移到新的 RAD Studio XE2。我需要放弃 QuickReport 组件。**我可以迁移到哪个免费报告组件？**

我看到 XE2 包含**FastReport**和**Rave Reports**。你建议我哪一个？或者还有其他的吗？

我寻找**最容易转换为的**，所以我猜它与 QuickReport 更相似。在我的项目中，使用了这些 QuickReport 组件：

```
TQRPreview
TQRBand
    TQRSysData
    TQRLabel
    TQRMemo
    TQRDBText
    TQRShape
TQuickReport
TQRDetailLink 
```

我已经尝试了一些自动转换器，但它们需要安装 QuickReport，而我没有。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T08:39:01.310

阅读[这篇](http://rave-notes.blogspot.de/2010/02/time-to-say-goodbye.html)博文，我不会为任何新项目设置 Rave。

# php - PHPExcel - 组合另一个工作表中的多个单元格

> ID：10007458
> 
> 赞同：1
> 
> 时间：2012-04-04T08:26:27.057
> 
> 标签：php, phpexcel

我有一个项目，我在第一个工作表上有以下单元格：

```
// Create and populate the first sheet (Page One) 
$objPHPExcel->setActiveSheetIndex(0);
$objPHPExcel->getActiveSheet()->setTitle('Page One');
$objPHPExcel->getActiveSheet()->setCellValue('B8', $city);
$objPHPExcel->getActiveSheet()->setCellValue('B9', $state);
$objPHPExcel->getActiveSheet()->setCellValue('B10', $zipCode);
$objPHPExcel->getActiveSheet()->setCellValue('B12', $SSN);
$objPHPExcel->getActiveSheet()->setCellValue('B13', $birthDate); 
```

这似乎工作正常..并按预期显示数据。问题是，当我使用公式将这些字段组合到另一个工作表上时，它只会提取第一个。代码如下所示：

```
// Create and populate Sheet 2 (Page Two) 
$objPHPExcel->createSheet();
$objPHPExcel->setActiveSheetIndex(1);
$objPHPExcel->getActiveSheet()->setTitle("Page Two");
$objPHPExcel->getActiveSheet()->setCellValue('A5', "='Page One'!B8&\" \"&'Page One'!B9&\", \"&'Page One'!B10");
$objPHPExcel->getActiveSheet()->setCellValue('A6', "=\"SSN: \"&'Page One'!B12");
$objPHPExcel->getActiveSheet()->setCellValue('A7', "=\"DOB: \"&'Page One'!B13"); 
```

在第一页，变量都有效。在第二页 SSN 和 DOB 工作.. 但第一个字段 (A5) 不显示“城市，州邮政编码”，它只显示城市。

同样在 Excel 中，一旦导出，单元格中的数据不完整：

```
='Page One'!B8&" " 
```

为什么无法添加其他 2 个字段？

提前致谢。

银虎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:11:21.450

我一直在调整并找到了一个可行的解决方案..单引号和双引号的组合很棘手，因为我想添加所需的转义双引号的“文本”，而工作表元素采用未转义的单引号，如下所示：

```
$objPHPExcel->getActiveSheet()->setCellValue('A5', "=CONCATENATE('Page One'!B8,\", \",'Page One'!B9,\" \",'Page One'!B10)"); 
```

这个解决方案对我来说很好。

# python - 在稀疏矩阵中排序

> ID：10007463
> 
> 赞同：9
> 
> 时间：2012-04-04T08:26:44.033
> 
> 标签：python, sorting, scipy, sparse-matrix

我有一个稀疏矩阵。我需要逐行排序这个矩阵并创建另一个[稀疏]矩阵。代码可能会更好地解释它：

```
# for `rand` function, you need newer version of scipy.
from scipy.sparse import *
m = rand(6,6, density=0.6)
d = m.getrow(0)
print d 
```

### 输出1

```
(0, 5) 0.874881629788 
(0, 4) 0.352559852239 
(0, 2) 0.504791645463 
(0, 1) 0.885898140175 
```

我有这个`m`矩阵。我想用 m 的排序版本创建一个新矩阵。新矩阵包含这样的第 0 行。

```
new_d = new_m.getrow(0)
print new_d 
```

### 输出2

```
(0, 1) 0.885898140175
(0, 5) 0.874881629788  
(0, 2) 0.504791645463
(0, 4) 0.352559852239 
```

所以我可以获得哪个列更大等：

```
print new_d.indices 
```

### 输出3

```
array([1, 5, 2, 4]) 
```

当然，每一行都应该像上面那样独立排序。

对于这个问题，我有一个解决方案，但它并不优雅。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T22:37:08.703

如果您愿意忽略矩阵的零值元素，下面的代码应该可以工作。它也比使用 getrow 方法的实现快得多，后者相当慢。

```
from itertools import izip

def sort_coo(m):
    tuples = izip(m.row, m.col, m.data)
    return sorted(tuples, key=lambda x: (x[0], x[2])) 
```

例如：

```
 >>> from numpy.random import rand
    >>> from scipy.sparse import coo_matrix
    >>>
    >>> d = rand(10, 20)
    >>> d[d > .05] = 0
    >>> s = coo_matrix(d)
    >>> sort_coo(s)
    [(0, 2, 0.004775589084940246),
     (3, 12, 0.029941507166614145),
     (5, 19, 0.015030386789436245),
     (7, 0, 0.0075044957259399192),
     (8, 3, 0.047994403933129481),
     (8, 5, 0.049401058471327031),
     (9, 15, 0.040011608000125043),
     (9, 8, 0.048541825332137023)] 
```

根据您的需要，您可能需要调整 lambda 中的排序键或进一步处理输出。如果您想要行索引字典中的所有内容，您可以这样做：

```
from collections import defaultdict

sorted_rows = defaultdict(list)

for i in sort_coo(m):
     sorted_rows[i[0]].append((i[1], i[2])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:19:53.963

我不好的解决方案是这样的：

```
from scipy.sparse import coo_matrix
import numpy as np
a = []
for i in xrange(m.shape[0]): # assume m is square matrix.
   d = m.getrow(i)
   n = len(d.indices)
   s = zip([i]*n, d.indices, d.data)
   sorted_s = sorted(s, key=lambda v: v[2], reverse=True)
   a.extend(sorted_s)
a = np.array(a)
new_m = coo_matrix((a[:,2], (a[:,0], a[:,1])), m.shape) 
```

上面可能有一些简单的错误，因为我还没有检查过。但我猜这个想法很直观。有什么好的解决办法吗？

### 编辑

这个新的矩阵创建可能没有用，因为如果你调用`getrow`方法，那么顺序就会再次被破坏。只`coo_matrix.col`保持秩序。

## 另一种解决方案

这不是一个精确的解决方案，但它可能会有所帮助：

```
def sortSparseMatrix(m, rev=True, only_indices=True):

    """ Sort a sparse matrix and return column index dictionary
    """
    col_dict = dict() 
    for i in xrange(m.shape[0]): # assume m is square matrix.
        d = m.getrow(i)
        s = zip(d.indices, d.data)
        sorted_s = sorted(s, key=lambda v: v[1], reverse=True)
        if only_indices:
            col_dict[i] = [element[0] for element in sorted_s]
        else:
            col_dict[i] = sorted_s
    return col_dict 
```

* * *

```
>>> print sortSparseMatrix(m)
{0: [5, 1, 0],
 1: [1, 3, 5],
 2: [1, 2, 3, 4],
 3: [1, 5, 2, 4],
 4: [0, 3, 5, 1],
 5: [3, 4, 2]} 
```

# linq-to-sql - “错误：选择列表中只能指定一个表达式”Linq To Sql

> ID：10007465
> 
> 赞同：0
> 
> 时间：2012-04-04T08:26:52.050
> 
> 标签：linq-to-sql

```
var loggedInHours = db.LoginLogs.Where(l => l.UserId == u.Id && l.UserSessionStop != null)
                                                                     .Sum(ls=> ls.UserSessionStart.Subtract(ls.UserSessionStop.Value).Hours) 
```

我正在尝试使用此 linq 查询计算总 LoggedIn 小时数。但它给了我这个错误“当 EXISTS 没有引入子查询时，只能在选择列表中指定一个表达式。” 我不知道它有什么问题..请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:42:19.233

试试这是否有效：

```
var loggedInHours = db.LoginLogs.Where(l => l.UserId == u.Id && l.UserSessionStop != null)
                      .Select(l=> new { 
                                         StartTime = l.UserSessionStart,  
                                         EndTime = l.UserSessionStop
                                      })
                     .ToList()
                     .Sum(c=> c.StartTime - c.EndTime); 
```

顺便说一句，可以为`UserSessionStop`空吗？如果是，那么要减去的值是多少？

# node.js - 在 node.js 中安装/运行串行端口时出错

> ID：10007468
> 
> 赞同：1
> 
> 时间：2012-04-04T08:27:12.907
> 
> 标签：node.js

一直在尝试在 Node.js 上安装/运行“串行端口”，但失败了。

首先，我尝试安装当前版本 0.7.3，但失败并出现以下错误

```
Waf: Leaving directory `/home/anand/node/node_modules/serialport/serialport_native/build'
'build' finished successfully (0.237s)
cp: cannot stat `build/Release/serialport_native.node': No such file or directory 
```

接下来我尝试安装 0.6.7 版。它安装正确，但是当我尝试运行示例时，出现以下错误

错误：无法加载共享库 /home/anand/node/node_modules/serialport/serialport_native.node

我已检查该库是否存在并具有读/写/执行权限。

我还检查了不同版本的 Node，包括 0.6.4、0.6.10

# iis - 更改某些权限设置后 IIS 中的错误

> ID：10007469
> 
> 赞同：1
> 
> 时间：2012-04-04T08:27:20.900
> 
> 标签：iis

更改 ISS 上的某些设置后出现此错误：

> 401 - 未经授权：由于凭据无效，访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

我已经检查并验证了存储网络应用程序的文件夹：

```
TrustedInstaller - Full control
SYSTEM - Full control
Administrators - Full control
Users - Read & execute
CREATOR OWNER - Special 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:44:32.610

我为此找到了答案：

以下是恢复 wwwroot 文件夹默认权限的步骤：

首先，右键单击 wwwroot 文件夹，然后单击属性。转到安全选项卡，然后单击高级按钮。单击更改权限... 按钮并选中“包括来自该对象的父级的可继承权限”复选框。删除“继承自”列值为“”的所有权限条目。单击应用并验证以下 5 个权限条目是否从“C:\inetpub\”目录继承：

```
TrustedInstaller - Full control
SYSTEM - Full control
Administrators - Full control
Users - Read & execute
CREATOR OWNER - Special 
```

验证这些权限后，单击“添加”按钮并输入“IIS_IUSRS”作为对象名称，然后单击“确定”。从权限列表中选择“遍历文件夹/执行文件”、“列出文件夹/读取数据”、“读取属性”、“读取扩展属性”、“读取权限”，然后单击“确定”。

现在应该将 wwwroot 文件夹设置回 IIS7 附带的开箱即用权限。

这修复了我遇到的提到的 401 Access Denied 错误。

# tfs - Team Foundation Build Activity“DownloadFiles”给出错误

> ID：10007474
> 
> 赞同：1
> 
> 时间：2012-04-04T08:27:44.660
> 
> 标签：tfs, tfsbuild

我正在自定义 TFS 2010 中的默认构建过程模板。

我正在使用“DownloadFiles”构建活动，并且在服务器路径中我给出了“$/TFS/Libraries/Foo.DLL”，当我运行执行定义时，它的抛出错误为“访问路径'\ServerName\SharedFolder\BuildName\ TempFolder' 被拒绝。”。

但是，当我将服务器路径指定为“$/TFS/Libraries”时，它会将 Libraries 文件夹中的所有文件下载到共享的 TempFolder 中。

但我只需要下载一个文件。请帮忙..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T14:14:21.310

现在，`DownloadFiles`仅适用于整个文件夹：

*   `ServerPath="$/proj/path"`- 效果很好，全部下载到`LocalPath`.
*   `ServerPath="$/proj/path/name.ext"`- 无聊。

我已经反编译`DownloadFiles`看看为什么：首先它得到一个服务器项目列表，在我们的例子中只是`$/proj/path/name.ext`. 然后，它像这样计算本地路径：

`localItemPath = Path.Combine(LocalPath,`[`VersionControlPath.MakeRelative`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.common.versioncontrolpath.makerelative.aspx)`(ServerItem, ServerPath));`

在这一行中，活动假定这`ServerPath`是一条路径。如果不是，则`MakeRelative`不会识别它，并且本地路径将是`LocalPath/$/proj/path/name.ext`OP 观察到的。

此外，如果`ServerPath`不是规范的 - 例如，`$/proj/path/../path2`也会发生同样的情况。解决方案：使用.[`VersionControlPath.GetFullPath`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.common.versioncontrolpath.getfullpath.aspx)`(myNonCanonicalPath)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:15:31.970

有两个单独的 Build 活动，`DownloadFiles`一个用于*文件夹*ServerItem，一个`DownloadFile`用于*单个文件*ServerItem。
我希望它应该与`DownloadFile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:38:39.300

您需要授予运行构建服务的用户对共享文件夹的写入权限。

[http://msdn.microsoft.com/en-us/library/cc668757.aspx](http://msdn.microsoft.com/en-us/library/cc668757.aspx)

# asp.net - 具有自动生成列的列表视图

> ID：10007478
> 
> 赞同：0
> 
> 时间：2012-04-04T08:28:36.013
> 
> 标签：asp.net, listview

任何人都可以指导我在列表视图中动态生成列，就像我们可以在 ASP.net 中为 GridView 做的那样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:07:29.113

ListView 控件不存在此类属性。您可以从后面的代码生成此页面，而不是对页面中的列进行硬编码，如下所示。

```
 class Movie
       {
          public string Title {get;set;}
       }

        ListView1.DataSource = new List<Movie>()
        {
               new Movie {Title = "tEST"},
               new Movie {Title = "tEST"},
               new Movie {Title = "tEST"},
               new Movie {Title = "tEST"}

        };

        ListView1.DataBind();

        var columns = new string[]
        {
           "Coulmn 1",
           "Coulmn 2",
           "Coulmn 3"
        };

        var row = ListView1.FindControl("header") as HtmlTableRow;

        if (row != null)
        {
            foreach (var column in columns)
            {
                HtmlTableCell cell = new HtmlTableCell();
                cell.InnerText = column;
                row.Cells.Add(cell);
            }
        }

      <asp:ListView runat="server" ID="ListView1"  >
      <LayoutTemplate>
       <table runat="server" id="table1" >
        <tr id="header" runat="server">
        </tr>
       <tr runat="server" id="itemPlaceholder" ></tr>
      </table>
     </LayoutTemplate>
     <ItemTemplate>
     <tr>
      <td>
          <asp:Label ID="NameLabel" runat="server" 
           Text='<%#Eval("Title") %>' />
      </td>
    </tr>
     </ItemTemplate>
    </asp:ListView> 
```

谢谢

迪普

# c# - 向选择字段 ExtJS 添加选项

> ID：10007480
> 
> 赞同：0
> 
> 时间：2012-04-04T08:29:02.007
> 
> 标签：c#, javascript, asp.net, extjs

我有一个带有两个选择字段的表单。我希望从第一个选择框中选择某些内容时，能够在第二个选择框中添加一些选项。

这是第二个的代码：

```
xtype: 'selectfield',
       id: 'category_id',
       name: 'category_select',
       label: 'Categoria',
       options: [{
                    text: 'test',
                    value: '1'
                 },{
                    text: 'test2',
                    value: '2'
                }] 
```

我试过了

```
Ext.getCmp('category_id').add("test3"); 
```

但它不起作用。你能帮我么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:46:45.507

```
Ext.getCmp('category_id').getStore().loadData(data, true); 
```

数据是记录（对象）的数组。第二个参数是追加。何时将真实数据附加到存储中。在其他情况下，存储数据将被新的替换。默认为假。

# ios - 将应用程序上传到 Apple 商店时出现此错误？

> ID：10007483
> 
> 赞同：0
> 
> 时间：2012-04-04T08:29:05.747
> 
> 标签：ios

嗨，当我尝试上传应用程序时，它给了我这个错误请帮助我完成这项任务。

![在此处输入图像描述](../Images/19e449c8c2d8a6b38de05937a6d0aa1c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:38:23.847

1) 还将 armv6 添加到您的构建架构中： ![在此处输入图像描述](../Images/b5061780d3d50101773efb3196c791fe.png)

2）不使用您的开发配置文件构建它。而是使用分发配置文件构建它。查看屏幕截图并在“发布”点下选择 iPhone 分发。

![在此处输入图像描述](../Images/ab3a5be4a33e86d9c9c02b301581fad4.png)

# mysql - 在“等待初始通信数据包”时失去与 MySQL 服务器的连接，系统错误：2

> ID：10007488
> 
> 赞同：0
> 
> 时间：2012-04-04T08:29:32.580
> 
> 标签：mysql, ssis

我在 ODBC 数据源配置中配置了 mysql ODBC 连接器 => 测试连接正常。当我尝试在 SSIS 项目中使用 mysql ODBC 连接器时，它会抛出错误“

> 连接 MySQL_5.1 时出错：ERROR [08S01] [MySQL][ODBC 5.1 Driver]Lost connection to MySQL server at 'waiting for initial communication packet'，系统错误：2。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:27:37.730

我也遇到了同样的异常，但是当我们的网络团队从数据库服务器中移除 NAS（网络附加存储）驱动器时，它完全解决了问题。

[参考这个网站](http://codeandcalm.wordpress.com/2012/12/11/error-08s01-mysqlodbc-5-1-driverlost-connection-to-mysql-server-at-waiting-for-initial-communication-packet-system-error-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:37:50.750

我假设您在测试连接的同一环境中运行包，对吗？

如果是，我会检查包配置。如果您激活它们，您在数据源上手动设置的值可能会被配置中的值替换。

如果这不是问题，请发布有关错误发生时间的更多信息。

# qt - Qt：如何使窗口图标更大（SVG）？

> ID：10007489
> 
> 赞同：2
> 
> 时间：2012-04-04T08:29:32.797
> 
> 标签：qt, svg, icons, gnome

我正在使用 Qt 4.8.1，并将窗口图标设置为：

> app.setWindowIcon(QIcon("/path/to/icon.svg"));

但是，无论 svg 图标有多大，菜单栏中或在 gnome 中使用“alt-tab”时显示的图标总是分辨率非常低且“像素化”。

如何让它以更高分辨率呈现图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:53:03.780

似乎只有在提供具有高分辨率图标的桌面菜单条目时才能避免这种情况。

我下载了qtcreator来测试它：从网络运行版本时，图标坏了。一旦安装的版本运行，它就会工作，因为使用了菜单中的图标。

# javascript - 用 Javascript 构建多页应用程序的最佳方法

> ID：10007492
> 
> 赞同：2
> 
> 时间：2012-04-04T08:29:54.443
> 
> 标签：javascript, structure

作为一名转向 JS/jQuery 的 Actionscript 程序员，我经常不得不编写主要针对 iOS 的多页应用程序，我想知道构建此类应用程序的最佳方式是什么。

大多数情况下，我的应用程序是演示文稿，其中每个页面都有不同的行为（即 page1 上的一些弹出窗口，page2 上的一组滑块，page3 上的一些拖放操作......你得到了图片），而且更常见的是不是我必须跟踪不同页面上的几个变量。

现在我这样处理它：我在一个名为 的脚本中有一组常用函数`my_app.js`，而每个页面都有其专用`pageX.js`脚本来说明其特定职责。我通过库存储持久值，`storage.js`并设法将它们粘在一起并使其工作。

但是我认识到这种方法可能有很大的改进空间，所以我想知道更多经验丰富的开发人员如何处理这种情况。

非常感谢，

地精

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:31:16.017

对于一个小型应用程序来说，你所做的似乎还可以，但正如另一个回答者所说，我会看看 MVC 架构。我可以衷心推荐backbone.js，它非常轻量级且易于使用。

您可以轻松地为您需要的每种类型的视图（例如，sliderController、dragDropController 等）制作一个控制器，然后如果您需要，将这些控制器子类（“扩展”）为特定于平台的（例如 iPhoneSliderController、iPadSliderController、desktopSliderController 等） ）。

如果我有关于这个应用程序的更多信息——比如它背后的数据，用户通过拖动/滑动实现的目标——那么我可能能够为你可能想要的模型、视图和控制器提供更具体的布局。但希望这是一个很好的起点，如果您查看backbone.js 文档，它应该会给您一个好主意，它是否适合您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:49:39.890

您拥有的结构听起来足够明智（常见的 JS 文件由特定于页面的 JS 文件补充）。听起来您在存储方面也走在了正确的道路上。

在您的情况下，我会关注您的代码在架构方面的结构。Stoyan Stefanov 的 Javascript Patterns (O'Reilly) 的第 6 章可能会很有启发性。

鉴于您的情况很适合这种方法（很多观点），我也可能会探索 JS MVC 实现。

我意识到这只是零散的想法，但希望它能给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:13:55.787

这是我组织东西的方式

```
 in /    
 modFOO.php  
 modBAR.php
 in /js/
 main.js
 resourceloader.php //this is a resource loader, so I can load multiple JS in a single request
 in /js/pages
 modFOO.js
 modBAR.js //javascript that for page modBAR
 in /css/
 main.css
 resourceloadercss.php //this a resource loader, so I can load multiple CSS in a single request
 in /css/pages/
 modFOO.css
 modBAR.css 
```

通过这种设置，我确切地知道在哪里可以找到东西，以及在哪里放置东西。根据文件名 modepic.css，我确切地知道将文件放在哪里以及是什么（modepic 的 CSS 文件）。

# staruml - 有没有办法将图表复制到不同的项目中？

> ID：10007494
> 
> 赞同：10
> 
> 时间：2012-04-04T08:30:05.750
> 
> 标签：staruml

我们的团队一直在使用starUML，我们不得不分工绘制不同部分的序列图。但是现在，我遇到了如何将这些图表合并到一个项目中的麻烦。

我在网上搜索过，发现只有包可以导入和导出。

有什么方法可以复制序列图并将其粘贴到原始图中？

他们从一开始就共享相同的常量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:35:29.210

您只能一个接一个地复制粘贴元素。但是您应该使用模型元素。[请复习](http://staruml.sourceforge.net/docs/user-guide%28en%29/ch04.html)，第一种方法对我有用，但第二种方法

> 在图表中复制和粘贴视图元素的过程

不幸的是没有。

**添加**

您也可以导出 - 将整个图表导入为`XMI`

这是[错误报告](https://sourceforge.net/tracker/index.php?func=detail&aid=1960501&group_id=152825&atid=785399)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T20:09:40.697

在模型浏览器视图中，您可以复制一个模型，然后使用您的其他项目打开另一个星形 uml，然后在模型浏览器视图中，您现在可以粘贴您复制的模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-21T15:44:19.877

您可以导出/导入片段，它们是模型中的项目（在文件菜单中，版本 2.5）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-01T01:10:43.643

1.  在 Visual Studio Code 等编辑器中打开**源**和**目标**项目，以 json 格式的文本查看它们。
2.  在我们的**源**项目 json 文本中，找到图表名称，它下面应该有一个名为“ **ownedElements** ”的数组（其中包含图表中的所有项目）。

    `"name": "My Diagram Name", "ownedElements": [ ... ]`

3.  复制名称和数组，然后粘贴到**目标**json 中，确保它位于项目级别的“ownedElements”数组中。

注意：“ownedElements”数组中的项目**必须**用逗号分隔，因此如果需要，请不要忘记在粘贴文本之前和之后包含这些内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T07:44:39.657

是的，我们可以在另存为...选项的帮助下复制和粘贴图表。

请找到以下步骤： 1\. 在 StarUML 中创建任何类型的图表并保存。示例：sequence1.mdj 2\. 然后选择 File >> save As... 选项，或者您也可以使用快捷键 ctrl + shift + S 并以不同的名称保存。例如：sequence2.mdj 3。所以现在你有 2 个不同的文件（.mdj）。您可以根据需要进行修改。

注意：如果您只是复制并粘贴文件，则不会复制第二个文件中的内容。这个，我已经试过了。它不起作用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-05T07:39:10.587

您可以选择所有 ctrl+a 并将其粘贴为图像文件并开始使用它

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-20T18:37:03.650

复制整个模型并将其粘贴到其他模型中。然后删除不需要的元素。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-03-06T17:28:49.797

您可以通过复制模型从右侧的模型资源管理器中执行此操作。

# haskell - Haskell：Yesod 和状态

> ID：10007497
> 
> 赞同：3
> 
> 时间：2012-04-04T08:30:23.470
> 
> 标签：haskell, state, yesod, acid

我正在阅读[Toy URL Shortener](http://flygdynamikern.blogspot.com.au/2011/06/toy-url-shortener-with-yesod-and-acid.html)的代码。但是，有些重要的部分我无法理解。

它有以下代码：

```
data URLShort = URLShort { state :: AcidState URLStore } 
```

出于测试目的，我在自己的应用程序中写了这样的内容：

```
data MyApp = MyApp { state :: Int } 
```

然后我可以通过改变来编译

```
main = warpDebug 3000 MyApp 
```

到

```
main = warpDebug 3000 (MyApp 42) 
```

然后我可以通过执行来读取处理程序中的状态

```
mystate <- fmap state getYesod 
```

灵感来自`acid <- fmap state getYesod`于文章。但是，我不知道怎么写。

我也尝试过这样做：

```
data MyApp = MyApp { state :: State Int Int } 
```

但我并没有走得太远。

`AcidState`我试图通过做一些简单的类似示例来弄清楚它是如何工作的，我想既然`AcidState`将所有内容都保存在内存中，我应该也可以这样做吗？

对这里发生的事情的任何一般解释，以及我如何遗漏这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T12:49:05.833

`AcidState a`数据类型一直不是不可变的值；它在内部包含对可变数据的引用。在这种情况下，存储在 Yesod-land 中的内容只是对该数据的不可变引用。更新状态时，实际上并没有更新基础数据类型中的值，而是更新它指向的内存。

Haskell 世界中的每一个值都是不可变的。然而，Haskell 领域之外的很多东西都不是一成不变的。例如，当您这样做时`putStrLn`，终端会改变其显示以显示新内容。`putStrLn`动作本身是不可变的纯值，但它描述*了*如何执行涉及突变的动作。

还有其他函数也产生执行突变的动作。如果你这样做`ref <- newIORef 0`，你会得到一个描述创建可变记忆单元的动作的值。如果您这样做`modifyIORef ref (+1)`，您将获得一个值，该值描述了将该单元格中的值增加 1 的操作`1`。`ref`value 是一个*纯 value*，它只是对可变单元格的引用。代码也是*纯函数*式的，因为每一段只描述一个动作；*Haskell 程序*中没有什么是可变的。

这是`AcidState`实现其状态的方式：通过使用在 Haskell 世界之外管理状态的系统。这并不像在 C 等语言中那样具有完全可变性“那么糟糕”，因为在 Haskell 中，您可以使用 monad 的力量来*控制可变性。*使用是完全安全的，据我所知`AcidState`不涉及使用。`unsafePerformIO`

在`AcidState`这种情况下，您`openAcidState emptyStore`在`IO`monad 中使用来创建新的酸状态（该行是描述打开新酸状态的 IO 操作的值）。您`createCheckpointAndClose`可以选择将酸状态安全地保存到磁盘。最后，您使用该`update'`函数来改变酸性状态的内容。

要使用 s 自己创建一个“小状态” `IORef`（可变状态的最简单形式，可能除了`ST`monad），您首先将这样的字段添加到您的基础数据类型中：

```
data VisitorCounter = VisitorCounter { visitorCounter :: IORef Int } 
```

然后你做：

```
main = do
  counter <- newIORef 0
  warpDebug 3000 (VisitorCounter counter) 
```

在处理程序中，您可以像这样修改计数器：

```
counter <- fmap visitorCounter getYesod
modifyIORef counter (+1)
count <- readIORef counter
-- ... display the count or something 
```

注意 的对称性`AcidState`。

对于站点计数器，我实际上建议使用[`TVar`s](http://hackage.haskell.org/packages/archive/stm/latest/doc/html/Control-Concurrent-STM-TVar.html#TVar)而不是`IORef`s，因为多个客户端可能同时修改变量。然而，与 s 的接口`TVar`非常相似。

* * *

**问题作者的后续问题？**

我已经放置`{ visitorCounter :: TVar Int }`在我的基础类型中，并且在处理程序中放置了以下代码：

```
counter <- fmap visitorCounter getYesod
count <- readTVar counter 
```

第一行编译正常，但第二行抛出此错误：

> ```
> Couldn't match expected type `GHandler sub0 Middleware t0'
>             with actual type `STM a0'
> In the return type of a call of `readTVar'
> In a stmt of a 'do' expression: count <- readTVar counter 
> ```

我该如何解决这个问题？

# jquery - jqGrid：更新高级搜索对话框，列下拉列表 - 在使用 columnchooser 添加列之后

> ID：10007501
> 
> 赞同：2
> 
> 时间：2012-04-04T08:30:39.003
> 
> 标签：jquery, jqgrid

我对 jqGrid 的高级搜索有疑问…… 据我所知，高级搜索对话框仅在调用 searchGrid 时创建一次。

这意味着，如果我在打开高级搜索对话框一次之后通过 columnChooser 添加列，则下次打开高级搜索对话框时添加的列会丢失……我想这是正常行为……。

所以我的问题是：每次调用 searchGrid 时，是否有任何标准功能可以用来更新/重新创建高级搜索对话框，而不会丢失所有先前输入的搜索条件等？

在此先感谢您的帮助。

费边

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:11:17.380

我想您可以通过使用`recreateFilter: true`搜索对话框选项来解决问题。您可以根据使用情况将该选项设置为默认设置

```
$.extend($.jgrid.search, {recreateFilter: true}); 
```

查看[答案](https://stackoverflow.com/a/9726334/315935)或[其他](https://stackoverflow.com/a/6884755/315935)答案以了解详细信息。

# shell - 为什么我的 emacs 不显示 shell 的输出？

> ID：10007503
> 
> 赞同：5
> 
> 时间：2012-04-04T08:30:43.600
> 
> 标签：shell, emacs, heroku

我在window xp 上使用emacs23.4。所以shell模式使用windows cmd.exe。

我遇到了这样一个问题，如果我使用要求用户输入的命令（例如电子邮件，密码），我的 emacs 不会显示请求。

我已经注释掉了 .emacs 中的所有配置。

图为我在emacs和cmd中输入“heroku登录”的结果。

![我输入的结果](../Images/f45efa4704dd1f9f59e7a48990397e30.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:08:01.267

这是 Windows 上 emacs 的一个已知问题：[https ://www.gnu.org/software/emacs/windows/Sub_002dprocesses.html#index-subprocesses_002c-hanging-when-reading-input-213](https://www.gnu.org/software/emacs/windows/Sub_002dprocesses.html#index-subprocesses_002c-hanging-when-reading-input-213)

不幸的是，没有简单的解决方法。您最好的选择可能是在`.netrc`文件中提供您的 heroku 凭据以避免被提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T12:17:35.320

setvbuf (stdout, NULL, _IONBF, 0);

似乎这里有一个可行但不满意的答案：

[printf 不在控制台上打印](https://stackoverflow.com/questions/13035075/printf-not-printing-on-console)

# cocoa - 当我使用 NSRunLoop 仪器时出现泄漏

> ID：10007504
> 
> 赞同：1
> 
> 时间：2012-04-04T08:30:44.920
> 
> 标签：cocoa, memory-leaks, nsrunloop

当我使用以下代码时，我被告知存在泄漏：

```
- (void)dealloc
{
    [connection release], connection = nil;
    [responseData release],responseData = nil;
    [cityCode release], cityCode = nil;
    [requestUrlString release], requestUrlString = nil;
    [returnDataDic release], returnDataDic = nil;

    [super dealloc];
}

- (id)initWithCityCode:(NSString *)aCityCode 
            requestURL:(NSString*)urlString 
          responseType:(SWEngineRequestType)theResponsetype 
                target:(id)theTarget 
                action:(SEL)theAction
{
    if ((self = [super init])) 
    {
        _isExecuting = NO;
    _isFinished = NO;
    target = theTarget;
    action = theAction;
    cityCode = [aCityCode retain];
        requestUrlString = [urlString copy];
        responseType = theResponsetype;
        returnDataDic = [[NSMutableDictionary alloc] initWithCapacity:1];
        if (cityCode) 
        {
             [returnDataDic setObject:cityCode forKey:SWEATHER_CITYCODE];
        }
        [returnDataDic setObject:[NSNumber numberWithInt:responseType]      forKey:SWEATHER_DOWNTYPE];
    }
    return self;
}

- (BOOL)isConcurrent
{
return YES;
}

- (void)finish
{

[self willChangeValueForKey:@"isExecuting"];
[self willChangeValueForKey:@"isFinished"];
_isExecuting = NO;
    _isFinished = YES;

[self didChangeValueForKey:@"isExecuting"];
[self didChangeValueForKey:@"isFinished"];

    [connection release], connection = nil;
    [responseData release],responseData = nil;
    [cityCode release], cityCode = nil;
    [requestUrlString release], requestUrlString = nil;
    [returnDataDic release], returnDataDic = nil;
    done = YES;
}

- (BOOL)isExecuting
{
return _isExecuting;
}

- (BOOL)isFinished
{
return _isFinished;
}

- (void)main
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    done = NO;
    if ([self isCancelled]) 
    {
    [self willChangeValueForKey:@"isFinished"];
    _isFinished = YES;
    [self didChangeValueForKey:@"isFinished"];
        [pool release];
    return;
}

[self willChangeValueForKey:@"isExecuting"];
_isExecuting = YES;
[self didChangeValueForKey:@"isExecuting"];

    NSURL * urlToDownLoad = [NSURL URLWithString:[requestUrlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSURLRequest *request = [NSURLRequest requestWithURL:urlToDownLoad cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:20];

connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (connection) 
    {
    responseData = [[NSMutableData alloc] init];
        [connection start];
}
    else 
    {
    [self finish];
}

    if (connection != nil) 
    {
        do 
        {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        } 
        while (!done);
    }

    [pool release], pool = nil;
}

#pragma mark -
#pragma mark - NSURLConnectionDataDelegate methods

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
    [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{
    [returnDataDic setObject:@"error" forKey:...];
[target performSelectorOnMainThread:action withObject:returnDataDic waitUntilDone:NO];
    [self finish];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    [returnDataDic setObject:responseData forKey:...];
    [target performSelectorOnMainThread:action withObject:returnDataDic waitUntilDone:NO];
    [self finish];
}
@end 
```

仪器给了我一个泄漏：`[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];`为什么？谢谢！

我只想在一个操作中进行异步下载，但我使用了`NSAutoreleasePool`然后仪器在以下位置出现了泄漏：`[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:28:45.100

试着把你的

```
[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]; 
```

在自动释放池中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:07:19.800

Instruments 识别出哪些对象已泄漏？它分配在哪里？堆栈跟踪是什么？

当你运行一个运行循环时，所有的运行循环源和运行循环观察者都可能触发。因此，这几行代码隐藏了在运行循环运行时可能发生的几乎无限的事情。其中任何一个都可能有泄漏，或者仪器可能是错误的。

在内部循环中以默认模式运行运行循环通常是一个坏主意。目前尚不清楚您要使用该循环做什么，但通常您应该在私有运行循环模式下安排您自己的任何运行循环源，然后在该模式下运行运行循环。这样，您可以确定只有您自己的源代码才能运行，这通常是您想要的。

# c# - 如何在同一行编写 JavaScript 和 asp 代码？

> ID：10007509
> 
> 赞同：0
> 
> 时间：2012-04-04T08:31:03.307
> 
> 标签：c#, javascript, asp.net, html

有人能告诉我如何实现这个 javascriptVariable=AspVariable 与 javascript 递增变量连接吗？

即我想动态地改变等式的左边，这就是我试图做到这一点并且失败了：

```
for(j=1;someCondition;j++)
{
eval("job"+j).Sdate=parseInt('<%= djobSdate[%>'+j+'<%=] %>'); 
} 
```

右手边工作正常，但等式的左手边有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:38:02.843

要`djobSdate()`通过传递 javascript 变量获取服务器端函数的结果`j`，您需要使用 AJAX。

这是因为变量`j`的值在客户端计算。

研究将 ASP.NET Web 服务与[jQuery AJAX一起使用](http://api.jquery.com/jQuery.ajax/)

您可能会发现这篇文章很有用：

[http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

然后您的代码将更改为：

```
for(j=1;someCondition;j++)
{
  $.ajax({
    type: "POST",
    url: "myWebService.asmx/GetdjobSdate",
    data: '{j: "' + j + '"}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data) {
       eval("job"+j).Sdate=parseInt(data);
    }
  });
} 
```

你的网络服务看起来像：

```
[System.Web.Script.Services.ScriptService]
public class myWebService : System.Web.Services.WebService
{
    [WebMethod]
    public string GetdjobSdate(j)
    {
        return djobSdate(j);
    }
} 
```

# c++ - QR 码的节省空间的替代方案？

> ID：10007511
> 
> 赞同：0
> 
> 时间：2012-04-04T08:31:05.793
> 
> 标签：c++, qr-code

我正在寻找一种在纸上编码 100 字节的方法，并希望找到一种比 QR 码更节省空间的方法。

现在这可能听起来有点奇怪，因为信息需要空间，但例如更宽且不那么高的东西会很酷。

有什么建议么？（另外，C++ 库会很好。）

**编辑**：请记住，我需要能够再次扫描它。谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:50:05.337

那里有很多不同类型的条形码 - [http://en.wikipedia.org/wiki/Barcode](http://en.wikipedia.org/wiki/Barcode)选择任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:37:10.690

为什么不将数据打印为 base64 字符串：

[Base64](http://en.wikipedia.org/wiki/Base64)

应该有大量免费可用的库来处理转换，每个 100 字节的数据将是 34 个字符。您可以使用尽可能小的字体，它非常适合您更宽且不那么高的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:57:15.393

有一个软件可以将源代码打印为 600dpi 的小点，然后能够将其转换回来。也许你可以这样做。（它几乎只是将二维码打印得更小）

# ruby-on-rails - simple_form 中的嵌套模型未出现模型验证错误

> ID：10007512
> 
> 赞同：2
> 
> 时间：2012-04-04T08:31:17.070
> 
> 标签：ruby-on-rails

所以我有一个简单的表单，可以通过一个提交按钮输入“品牌”和“型号”，如下所示：

```
<%= simple_form_for @brand, :html => { :class => 'form-horizontal' } do |m| %>
  <fieldset>
    <legend><%= controller.action_name.capitalize %> /Brand</legend>
        <%= m.input :name %>

        <%= m.simple_fields_for :models, Model.new do |p| %>
      <%= p.input :name %>
    <% end %>

    <div class="form-actions">
      <%= m.submit nil, :class => 'btn btn-primary' %>
      <%= link_to 'Cancel', brands_path, :class => 'btn' %>
    </div>
  </fieldset>
<% end %> 
```

我的品牌和型号的模式中有 name:string .. 和 validates_presence_of :name 在两个型号中.. 表单确实适用于同时创建品牌和型号，但我的错误“不能为空”仅显示为品牌领域。

感谢您对此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:41:06.940

意识到我做错了什么。还需要将 @model = Model.new 放入控制器并放入 <%= m.simple_fields_for :models, @model do |p| %>

# asp.net - 将 SquishIt 与 Web 资源一起使用

> ID：10007519
> 
> 赞同：0
> 
> 时间：2012-04-04T08:31:42.243
> 
> 标签：asp.net, webforms, squishit

我正在使用 SquishIt 来管理 js/css 文件，它运行良好，但仅限于我手动创建的文件。如何将它与通过脚本管理器返回到浏览器的 asp.net webresources/script 资源（用于 ajax、验证等的脚本）一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:01:38.150

捆绑包上添加了一个名为 .AddRootEmbeddedResource 的方法来处理此类情况（嵌入式资源不使用默认的 AssemblyName.ResourceName 约定）

# android - android画布ontouchevent不起作用

> ID：10007520
> 
> 赞同：0
> 
> 时间：2012-04-04T08:31:45.830
> 
> 标签：android, android-canvas, touch-event

我有一个自定义视图的类。一种方法是

```
 @Override
public void onDraw(Canvas  canvas) {     
        Paint  paint = new Paint (); 
        Bitmap wrench = BitmapFactory.decodeResource(getResources(), R.drawable.wrench);
        canvas.drawColor(Color .BLACK);
        for(int i = 0; i < 4; i++) {
            for(int j = 0; j < 4; j++) {
                int left = canvas.getWidth()/2 - wrench.getWidth()*2 + j*wrench.getWidth();
                int top = 0  + i*wrench.getHeight();
                canvas.drawBitmap(wrench, left, top, null);

                regions = new ArrayList<Region>();
                Region reg = new Region(left, top, left + wrench.getWidth(), top + wrench.getHeight());
                regions.add(reg);
       //                    int right = left + wrench.getWidth();
       //                    int bottom  = top + wrench.getHeight();
       //                    Log.d("REGION", left + "," + top + "," + right  + "," + bottom);
            }
        }
} 
```

我的形状有 8 个区域。所以，在活动课上

```
 playField = (PlayGameView) findViewById(R.id.play_field_surface_view);
    playField.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
  //                if(playField.getRegions().contains(210, 10))  {
            ArrayList<Region> regions = playField.getRegions();
            for(Region region: regions ) {
                boolean condition = region.contains( (int)event.getX(), (int)event.getY());
                if(condition) {
                    Toast.makeText(PlayGameActivity.this, (int)event.getX() + " " + (int)event.getY(), 2000).show();
                }

            }

            return true;
        }
    }); 
```

但它不起作用！当我点击最后一个形状时，吐司被调用了两次！但在其他形状上它有时会被调用....帮帮我^_^

所以这段代码工作正常）

```
 @Override
public void onDraw(Canvas  canvas) {     
        Paint  paint = new Paint (); 
        Bitmap wrench = BitmapFactory.decodeResource(getResources(), R.drawable.wrench);
        canvas.drawColor(Color .BLACK);

        shapeWidth = wrench.getWidth();
        shapeHeight = wrench.getHeight();

        for(int i = 0; i < 4; i++) {
            for(int j = 0; j < 4; j++) {
                int left = canvas.getWidth()/2 - wrench.getWidth()*2 + j*wrench.getWidth();
                int top =  i*wrench.getHeight();
                canvas.drawBitmap(wrench, left, top, null);
                shapeLeft[j] = left;
                shapeTop[i] = top;
            }
        }

}

public ArrayList<Region>  getRegions() {
    regions = new ArrayList<Region>();

    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 4; j++) {
            Region reg = new Region(shapeLeft[j], shapeTop[i], shapeLeft[j] + shapeWidth, shapeTop[i] + shapeHeight);
            regions.add(reg);
//              int right = left + wrench.getWidth();
//              int bottom  = top + wrench.getHeight();
//              Log.d("REGION", left + "," + top + "," + right  + "," + bottom);
        }
    }

    return regions;
} 
```

和

```
 playField = (PlayGameView) findViewById(R.id.play_field_surface_view);
    playField.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
//              if(playField.getRegions().contains(210, 10))  {
            ArrayList<Region> regions = playField.getRegions();
            for(Region region: regions ) {
                if(event.getAction() == MotionEvent.ACTION_DOWN) {
                    boolean condition = region.contains( (int)event.getX(), (int)event.getY());
                    if(condition) {
                        Toast.makeText(PlayGameActivity.this, (int)event.getX() + " " + (int)event.getY(), 2000).show();
                    }
                }
            }

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:37:41.023

只对一个动作做出反应。在你的方法中使用`ACTION_DOWN`or ，否则如果你击中一个区域，它至少会被调用两次。`ACTION_UP``onTouch()`

您能否具体说明一下具体是`on other shapes it called some times`什么意思？

编辑：

您应该创建不在 onDraw 方法内的区域。在其他地方做（构造函数？）。

一个小提示：如果您想查看您的区域是否正确，您应该最后在屏幕上绘制矩形/区域，以便它们覆盖操场。如果您的区域位于正确的位置并且大小合适，那应该会给您一个视觉反馈。还要更改您正在绘制的区域的颜色，因为它可能有助于查看一些问题。

如果你这样做了，你能提供一个截图吗？

# css - 如何为某些 portlet 制作不同的主题

> ID：10007532
> 
> 赞同：4
> 
> 时间：2012-04-04T08:33:04.707
> 
> 标签：css, liferay, portlet, zk, liferay-theme

我是 Liferay 的新手，遇到以下问题。我需要创建门户主题 - 这没关系，没问题。这将为我的门户和默认 portlet 设置样式。但是在我自己的一些 portlet 中，我使用 ZKOSS 页面，这需要完全不同的样式。我的问题是，如何做到 Liferay 主题类不会影响我的 ZKOSS 页面？Liferay 主题中有一些通用样式，例如输入等，但我不希望将这些规则应用到我的 ZKOSS portlet 中。希望我清楚地解释自己。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:37:58.033

我不知道 ZKOSS portlet，但是引入 portlet 特定主题 css 的通用方法是通过 DOM：检查您的页面，查看您的 ZKOSS portlet 是如何生成的：Liferay 为每个包含 portlet-name 的 portlet 生成一个包装器，您可以用它来做造型。

因为我没有可用的 ZKOSS，所以这里有一个示例，将一些特别丑陋的样式应用于每个 Navigation portlet：

```
 .portlet-navigation .portlet {
       background: purple;
 } 
```

使用 Firebug 或类似工具找出相关的 DOM 结构，并将这些元素所需的样式添加到您的主题中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T11:53:17.043

您可以`<css-class-wrapper>My_Portlet</css-class-wrapper>`在 liferay-portlet.xml中设置

详情见：[http ://www.liferay.com/community/wiki/-/wiki/Main/Liferay+UI+Guidelines](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+UI+Guidelines)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T12:01:21.457

您还可以使用 Liferay 颜色方案为同一个 portlet 定义单独的 UI。

Liferay 7/DXP： [https ://dev.liferay.com/develop/tutorials/-/knowledge_base/7-0/specifying-color-schemes](https://dev.liferay.com/develop/tutorials/-/knowledge_base/7-0/specifying-color-schemes)

Liferay 6.2：

[https://dev.liferay.com/develop/tutorials/-/knowledge_base/6-2/specifying-color-schemes](https://dev.liferay.com/develop/tutorials/-/knowledge_base/6-2/specifying-color-schemes)

# sql - WCF 服务中的 TPL 任务无法使用正确的 IIS 安全凭据（SQL 连接）

> ID：10007535
> 
> 赞同：4
> 
> 时间：2012-04-04T08:33:06.217
> 
> 标签：sql, wcf, task-parallel-library, iis-5

我有一个调用 SQL 存储过程的 WCF 服务方法。我正在使用 IIS 5 进行开发（对此无能为力，II6/7 不可用）

为了获得一些收益，我通过将调用放入 ac# TPL Task 中对该存储过程进行了多次异步调用。

作为任务运行时，我收到 SQL 异常...“登录失败。登录来自不受信任的域，不能用于 Windows 身份验证”

但是，如果我在不使用任务的情况下运行完全相同的进程，则 SQL 连接没有问题

在我看来，IIS 虚拟文件夹 (WCF) 的凭据没有被委派给任务？有什么想法可以为 TPL 任务线程指定凭据，即使用与父级相同的凭据等吗？

我正在使用 Windows 身份验证 (sspi) 和模拟，以便能够连接到单独的 SQL 框。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T16:03:17.850

你有两个选择。

1）选择您的整个应用程序始终使用以下方式流动身份：

```
<runtime>
    <alwaysFlowImpersonationPolicy enabled="true"/>
</runtime> 
```

这会产生开销的副作用，并且存在使用当前调用用户的权限而不是应用程序身份意外执行某些意外代码的危险。我个人会避免这种情况，并使用您明确选择加入的＃2。

[`WindowsIdentity`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.aspx)2)在设置您的 TPL 任务之前捕获并明确模拟您需要使用[`Impersonate`](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)+拨打电话的位置[`WindowsImpersonationContext`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)：

```
public void SomeWCFOperation()
{
    WindowsIdentity currentIdentity = WindowsIdentity.GetCurrent();

    Task.Factory.StartNew(() =>
    {
         // some unpriviledged code here

         using(WindowsImpersonationContext impersonationContext = currentIdentity.Impersonate())
         {
            // this code will execute with the priviledges of the caller
         }

         // some more unpriviledged code here
    });  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:31:29.837

作为另一种解决方法，您可以为 TPL 创建扩展，如下所示：

```
public static class TaskFactoryExtensions
{
    public static Task StartNewImpersonated(this TaskFactory taskFactory, Action action)
    {
        var identity = WindowsIdentity.GetCurrent();
        return taskFactory.StartNew(() =>
        {
            using (identity.Impersonate()) 
            {
                action();
            }
        });
    }

    public static Task<TResult> StartNewImpersonated<TResult>(this TaskFactory taskFactory, Func<TResult> function)
    {
        var identity = WindowsIdentity.GetCurrent();
        return taskFactory.StartNew<TResult>(() =>
        {
            using (identity.Impersonate())
            {
                return function();
            }
        });
    }
} 
```

然后，您将调用这些新方法来代替标准的 StartNew 方法。

这样做的缺点是有很多方法可以覆盖。

# service - 使用原型范围时的 Symfony2 ScopeCrossingInjectionException

> ID：10007536
> 
> 赞同：11
> 
> 时间：2012-04-04T08:33:09.840
> 
> 标签：service, symfony, scope

我的目标是将 data_collector 添加到我的类中，以便在开发人员工具栏上显示一些有用的信息。我的服务：

```
services:
    my_api.auth.login:
        class: YO\ApiV1\Services\Auth\Login
        arguments:
            - requestId
            - "@old_sound_rabbit_mq.login_rpc"
            - "@service_container"
        scope: prototype 
```

我需要范围原型来为每个新调用提供不同的实例。顺便说一句，服务@old_sound_rabbit_mq.login_rpc 也有范围“原型”。而且，我想附上 data_collector，这可以通过以下方式完成：

```
tags:
    - { name: data_collector, template: "AcmeDebug:Collector:templatename", id: "your_collector_name" } 
```

但后来我遇到了一个例外：

> ScopeCrossingInjectionException：检测到范围交叉注入：定义“分析器”引用了属于另一个范围层次结构的服务“my_api.auth.login”。此服务可能无法始终可用。通常，将定义“profiler”移动到“prototype”范围，或者将“container”声明为“prototype”的子范围更安全。如果您可以确定其他范围始终处于活动状态，则可以将引用设置为 strict=false 以消除此错误。

这让我很困惑，因为我不知道该怎么做。我试图设置属性“strict = false”，但没有任何反应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-17T07:00:56.640

我猜 symfony 的同步服务可能会对你有所帮助：[doc](http://symfony.com/doc/current/cookbook/service_container/scopes.html)

否则你可以这样设置“strict=false”：

```
services:
    my.service.definition:
        class: Acme\Services\BlaService
        arguments:
            - "@any_other_service_from_narrower_scope="
        scope: prototype 
```

当从更窄的范围注入服务时，服务定义末尾的“=”会将“严格”变为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-16T07:15:44.303

自 Symfony 2.8 以来的容器范围已被弃用。

`scope: prototype`被替换为`shared: false`

[http://symfony.com/doc/2.8/cookbook/service_container/shared.html](http://symfony.com/doc/2.8/cookbook/service_container/shared.html)

# android - 如何在android中向已经存在的arraylist添加一项

> ID：10007538
> 
> 赞同：0
> 
> 时间：2012-04-04T08:33:11.187
> 
> 标签：android

我在我的示例应用程序中使用轮视图。它使用 xml 解析显示项目。我想向该 xml 数据添加一项。这是我的代码

```
 public ArrayList<ItemIdentifierType> getBikeTypeDataList() {

    NodeList nodeList = doc.getElementsByTagName(key_BikeTypes);

    for (int i = 0; i < nodeList.getLength(); i++) {

        ItemIdentifierType itemIdentifierTypeInstance = new ItemIdentifierType();
        Element element = (Element) nodeList.item(i);
        itemIdentifierTypeInstance.setId(Integer.parseInt(element
                .getAttribute("id")));
        itemIdentifierTypeInstance.setName(element.getAttribute("desc"));           

        bikeTypesList.add(itemIdentifierTypeInstance);

    }

    return bikeTypesList;
} 
```

这里的bikeTypeList 包含所有项目，我只想在bikeTypesList 中添加一个项目，例如-select-。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:01:10.083

现在它工作正常，这是我的代码

```
public ArrayList<ItemIdentifierType> getBikeTypeDataList() {

    NodeList nodeList = doc.getElementsByTagName(key_BikeTypes);
    ItemIdentifierType itemIdentifierTypeInstance = null ;
    itemIdentifierTypeInstance = new ItemIdentifierType();
    itemIdentifierTypeInstance.setId(0);
    itemIdentifierTypeInstance.setName("-beliebig-");       
    Log.i("bike typeLsit: ", ""
            + itemIdentifierTypeInstance.getId() + " "
            + itemIdentifierTypeInstance.getName());            
    bikeTypesList.add(itemIdentifierTypeInstance);
    for (int i = 0; i < nodeList.getLength(); i++) {

        itemIdentifierTypeInstance = new ItemIdentifierType();
        Element element = (Element) nodeList.item(i);
        itemIdentifierTypeInstance.setId(Integer.parseInt(element
                .getAttribute("id")));
        itemIdentifierTypeInstance.setName(element.getAttribute("desc"));

        Log.i("bike details from identifier type class: ", ""
                + itemIdentifierTypeInstance.getId() + " "
                + itemIdentifierTypeInstance.getName());            
        bikeTypesList.add(itemIdentifierTypeInstance);      

    }           
    System.out.println("TypeList"+bikeTypesList);
    return bikeTypesList;
} 
```

# symfony-1.4 - 在 Symfony 1.4 中实现 GeocodableBehavior（使用 Propel）

> ID：10007540
> 
> 赞同：0
> 
> 时间：2012-04-04T08:33:13.430
> 
> 标签：symfony-1.4, geocoding, propel, behavior

我正在尝试在我正在处理的*Symfony 1.4*（带有*Propel 1.6 ）项目上实现***GeocodableBehavior**，但直到现在它完全失败了。我试图搜索其他人，但我没有找到任何东西，就像我是唯一一个遇到麻烦的人一样。

 **所以，也许我错过了一些非常简单的东西，但是按照**GeocodableBehavior**上给出的说明只会导致错误，我无法弄清楚问题出在哪里。

我遵循了**GeocodableBehavior的说明** *（此处 -> [http://www.propelorm.org/cookbook/geocodable-behavior.html](http://www.propelorm.org/cookbook/geocodable-behavior.html)）*

这似乎有效，因为我正在获取在我的模型上创建的纬度/经度列。在那之前，它工作正常。

当尝试使用 GeocodableBehavior 保存对象时，事情变得有点复杂，Geocoder 类存在问题。

*（此处的文档-> [https://github.com/willdurand/Geocoder](https://github.com/willdurand/Geocoder)）*

我的课是**Point**，指的是一个地理定位点，一个地址。当使用*sf admin generator*创建**点**时，应该使用某些字段（街道、邮政编码、国家/地区等）来查询 GoogleMaps api 的行为，只是无法使用 Geocoder 类。

 *```
Fatal error: Class 'Geocoder\Geocoder' not found in /var/www/vhosts/www._________.local/lib/model/om/BasePoint.php on line 3717 
```

我将 Geocoder 类放在一个`lib/vendor/geocoder`文件夹中，我尝试使用 autoload.yml 文件来加载它，但没有任何变化......

```
autoload:
  geocoder:
    name:       geocoder
    path:       %SF_LIB_DIR%/vendor/geocoder
    recursive:  on 
```

在我的 sf 项目中如何加载这些类时我缺少一些东西，我找不到什么。Geocoder 包有一个 autoload.php 文件，但我没有成功“加载”它...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:25:48.883

我知道它有点放弃自动加载器，但你可以在`/config/ProjectConfiguration.class.php`. 唯一的缺点是您需要在使用 Geocoder 的任何块之前添加对该函数的调用。

```
class ProjectConfiguration extends sfProjectConfiguration
{
    static protected $geocoderLoaded = false;

    static public function registerGeocoder()
    {
        if (self::$geocoderLoaded) {
            return;
        }

        require_once sfConfig::get('sf_lib_dir') . '/vendor/geocoder/autoload.php';

        self::$geocoderLoaded = true;
    }
    ...
} 
```

然后只需`ProjectConfiguration::registerGeocoder();`在您需要该课程的任何地方执行。这比让自动加载器工作更烦人，但它至少是可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:16:46.113

您是否检查了您的自动加载缓存以查看与 Geocoder 相关的内容？

*   `/cache/[apps_name]/dev/config/config_autoload.yml.ph`p
*   `/cache/project_autoload.cache`

也许，手动添加自动加载`/config/ProjectConfiguration.class.php`：

```
class ProjectConfiguration extends sfProjectConfiguration
{
  public function setup()
  {
    require_once sfConfig::get('sf_lib_dir').'/vendor/geocoder/src/autoload.php'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:20:54.423

使用内置的自动加载器应该是一个可行的选项，但您也可以将 symfony 的自动加载器与“启用 PSR-0”的自动加载器结合使用。基本上，这归结为以下实现：

```
public function setup()
{
  // plugin stuff here

  // register the new autoloader
  spl_autoload_register(array($this, 'autoloadNamespace'));
}

public function autoloadNamespace($className)
{
  $className = ltrim($className, '\\');
  $fileName = ''; 
  $namespace = ''; 
  if ($lastNsPos = strripos($className, '\\'))
  {   
    $namespace = substr($className, 0, $lastNsPos);
    $className = substr($className, $lastNsPos + 1); 
    $fileName = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
  }   

  // make sure that the path to Geocoder is correct
  foreach(array(
    sfConfig::get('sf_lib_dir').'/vendor/Geocoder/src' . DIRECTORY_SEPARATOR . $fileName . $className . '.php', 
    ) as $fileName)
  {   
    if (file_exists($fileName))
    {   
      require $fileName;
      return true;
    }   
  }   
  return false;
} 
```

有了这个额外的自动加载器，您的应用程序应该能够使用 Geocoder。***

# php - 在 PHP 上，如何从父类中的变量中获取值？

> ID：10007545
> 
> 赞同：0
> 
> 时间：2012-04-04T08:33:40.657
> 
> 标签：php, oop, class, inheritance, parent-child

```
class config {
    public $pageName;

    function __construct($pageName=''){
        $this->pageName = $pageName;        
    }
}

class header extends config {
    function display(){
        echo parent::$this->pageName;
    }

}

$config = new config('Home Page');
$header = new header();
$header->display(); 
```

这不显示任何内容，我认为它应该显示“主页”。

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:37:15.720

The `$header` object has no relationship to the `$config` object. Just because their class hierarchy is connected doesn't mean that the *object instances* share data.

```
$config1 = new config('Home Page');
$config2 = new config(); 
```

Here `$config2` couldn't access the value `'Home Page'` either, because it's a different object. It's not a matter of class hierarchy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:39:48.113

你想组合你的对象而不是继承它们的类（又名控制反转，依赖注入）：

```
interface IConfig {
  public function pageName();
}
class Config implements IConfig {
    private $pageName;
    public function pageName() { return $this->pageName; }

    function __construct($pageName=''){
        $this->pageName = $pageName;        
    }
}

class Header {
    private $config;

    function __construct(IConfig $config) {
      $this->config = $config;
    }

    function display(){
        echo $this->config->pageName();
    }

}

$config = new Config('Home Page');
$header = new Header($config);
$header->display(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:40:01.330

```
$header = new header('Home Page');
$header->display(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:43:03.243

```
$header = new header('Home Page');
$header->display(); 
```

# javascript - 分区为空。使用 jQuery...假？

> ID：10007552
> 
> 赞同：0
> 
> 时间：2012-04-04T08:34:09.757
> 
> 标签：javascript, jquery, css

我有这个 div ( `<div id="slideshow">`)。在 index.php 中已满。在其他页面是空的。（我使用 Joomla，这是一个模块）。现在，满了就没事了。但是，当它为空时，我想更改下一个 div 的 css 属性。( `<div id="slideshow">...</div><section>....</section>`)。现在，我试试这段代码：

```
 alert($("div#slideshow").text() == "");
            alert($("div#slideshow").is(':empty')); 
```

所有页面中的结果是：False，False。错误的？？？对全部？ps for empty 我想说这个（`<div id="slideshow"></div>`）。感谢你的回答。

* * *

我明白哪里错了。使用 chrome 我看到了 ( `<div id="slideshow"></div>`)，但是将它复制为 html 给了我这个：

```
<div id="slideshow">

             </div> 
```

所以它不是空的！现在我想知道，我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:36:01.563

此元素的文本为空，`!= ""`但为空：

```
<div> </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:39:24.170

尝试`$("div#slideshow").html()`

“在 HTML 文档中，.html() 可用于获取任何元素的内容” - [http://api.jquery.com/html/](http://api.jquery.com/html/)

“.text() 方法的结果是一个包含所有匹配元素的组合文本的字符串” - [http://api.jquery.com/text/](http://api.jquery.com/text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:14:29.767

在与空字符串比较之前修剪空格怎么样？

```
$.trim( $('#slideshow').text() ) == '' 
```

# android - 日志消息在简单的 while(i 在这个非常简单的代码示例中，消息每隔一段时间就会丢失。这里有什么问题？ public class AndroidTesterActivity extends Activity { private static final int END = 500000; private static int i = 0; @Override public 问问题 问问题 2012-04-04T08:34:10.760 92 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在这个非常简单的代码示例中，消息每隔一段时间就会丢失。这里有什么问题？ public class AndroidTesterActivity extends Activity { private static final int END = 500000; private static int i = 0; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); i=0; } @Override public void onResume() { super.onResume(); while(i < END) { Log.d("x", ""+i++); } Log.e("x", "END"); } } 例如，我收到两条连续的日志消息 139371 和 140001 ......所以 630 条消息只是丢失了，即使i被计数了？i不写Log怎么算？我已经搜索过，如果其他人已经有同样的问题，但没有找到任何东西。 谢谢你的帮助 只是一个没有根据的猜测： Log 类不会直接推送所有内容，我认为它会在某些特定条件下收集和推送。由于您的循环应该非常快，因此在某些情况下，日志缓冲区（或其他内容）可能会在刷新之前被覆盖。 我会尝试在一个线程中进行，并sleep()在两者之间调用一些毫秒。也许您可以重现此行为或找到此行为消失的值。 androidlogging 4 1 回答 1 This answer is useful 2 只是一个没有根据的猜测： Log 类不会直接推送所有内容，我认为它会在某些特定条件下收集和推送。由于您的循环应该非常快，因此在某些情况下，日志缓冲区（或其他内容）可能会在刷新之前被覆盖。 我会尝试在一个线程中进行，并sleep()在两者之间调用一些毫秒。也许您可以重现此行为或找到此行为消失的值。 于 2012-04-04T08:46:34.857 回答 Related 1 java - 关闭 MIDI 的 InputStream 0 php - 多重条件 if elseif 语句 4 facebook - facebook 移动站点上的 AgileToolkit OAuth 附加错误 500 3 ios - JSON 解析仅对大值返回 Null 0 c# - 什么会导致一个程序使另一个程序无响应？ 1 node.js - 如何从其他计算机访问 Ubuntu 上的 Node.js 服务器应用程序 1 c# - 如何在appsettings中存储带有html内容的字符串 2 r - 如何在 R 中用 0 替换 NaN 的矩阵元素 1 sql - 将文本文件解析为 SQL 表 1 php - 如何指定要进行身份验证的实体 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10007553
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, logging

在这个非常简单的代码示例中，消息每隔一段时间就会丢失。这里有什么问题？

```
public class AndroidTesterActivity extends Activity {
   private static final int END = 500000;
   private static int i = 0;
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      i=0;
   }

   @Override
   public void onResume()
   {
      super.onResume();
      while(i < END)
      {
         Log.d("x", ""+i++);
      }
      Log.e("x", "END");
   }
} 
```

例如，我收到两条连续的日志消息 139371 和 140001 ......所以 630 条消息只是丢失了，即使`i`被计数了？`i`不写Log怎么算？我已经搜索过，如果其他人已经有同样的问题，但没有找到任何东西。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:46:34.857

只是一个没有根据的猜测： Log 类不会直接推送所有内容，我认为它会在某些特定条件下收集和推送。由于您的循环应该非常快，因此在某些情况下，日志缓冲区（或其他内容）可能会在刷新之前被覆盖。

我会尝试在一个线程中进行，并`sleep()`在两者之间调用一些毫秒。也许您可以重现此行为或找到此行为消失的值。

# asp.net - 是否可以创建新的 ASP.NET 指令？

> ID：10007557
> 
> 赞同：2
> 
> 时间：2012-04-04T08:34:19.520
> 
> 标签：asp.net

您知道 ASP.NET 页面通常如何以 Page 指令开始为页面设置某些属性和行为吗？看起来像这样：

```
<%@ Page Title="Contact Us" Language="C#" MasterPageFile="~/Site.master"
    AutoEventWireup="true" CodeFile="ContactUs.aspx.cs" Inherits="ContactUs" %> 
```

当前可用指令的完整列表在这里：http: [//msdn.microsoft.com/en-us/library/t8syafc7.aspx](http://msdn.microsoft.com/en-us/library/t8syafc7.aspx)

**有谁知道是否可以创建新指令？**

例如，我使用反射对网站上的页面做某些事情，并用自定义属性装饰它们的类声明。我想知道是否有可能以某种方式做到这一点，即使没有代码或设计器文件来找到这样的类声明，并且页面的所有脚本都在服务器端运行的脚本标记中.

PS 我知道我可以使用 Page 指令来设置基类，然后也可以使用它来设置继承的属性。但是，这些属性可能有*0 - n 个*，因此无法优雅地完成。

# jquery - Jquery 日期选择器限制日期，例如 2222222/33333/444444

> ID：10007567
> 
> 赞同：2
> 
> 时间：2012-04-04T08:35:20.130
> 
> 标签：jquery, validation, date, datepicker, jquery-ui-datepicker

我在我的 MVC 3 + Razor 项目中使用 Jquery Date Picker。

我已经成功地能够使用它并将其与我的项目集成。

现在使用日期选择器我可以看到它不允许像 a,b...@#,$,%.. 等字符。但它确实允许数字，理解我的意思看截图，

我想我需要对 jquery 本身进行一些更改，但我不知道在哪里。请帮我解决这个问题。

![在此处输入图像描述](../Images/82f1cc726ba08f38962be63dcfff413d.png)

![在此处输入图像描述](../Images/7cfcafb515a26dfab8cae899f1c13de1.png)

在 marcolinux 的帮助下，我使用了[http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)，现在当我将它添加到我的脚本中时

```
 $(form).validate({
        rules: {
        startDate: {
        dpDate: true
        }
        }
        }); 
```

并导入此链接

```
 <script src="../../Scripts/jquery.ui.datepicker.validation.js" type="text/javascript"></script> 
```

我现在在我的文本框中使用 class="dpDate" 在这方面取得了更大的进展，现在我可以在我的文本框中获得一个红色边框，用于输入，如 1212635245 111/12313/12313

现在我需要知道的最后一部分是如何在文本框旁边显示错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:53:12.173

您似乎担心在文本框中“键入”的日期。`onClose`您可以在 datepicker 触发的事件中挂钩错误检查功能：

> 允许您在日期选择器关闭时定义自己的事件，无论是否选择日期。该函数接收选定的日期作为文本（'' 如果没有）和 datepicker 实例作为参数。这指的是关联的输入字段。

当用户在文本框中键入内容时，日期选择器将打开。当用户选择日期（有效）或控件失去焦点（日期可能有效也可能无效）时，onClose 事件将触发。然后，您可以检查事件处理程序中的日期：

```
$("#datepicker").datepicker({
    onClose: function(dateText, instance) {
        var date;
        try {
            date = $.datepicker.parseDate(instance.settings.dateFormat || $.datepicker._defaults.dateFormat, dateText, instance.settings);
        }
        catch (e) {
            alert("$.datepicker.parseDate failed");
        }
        if (!date) {
            alert("This date is not valid");
            $(this).val("");
        }
    }
}); 
```

# [演示在这里](http://jsfiddle.net/salman/ePSN2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:41:48.953

这个插件会做你问的

[http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)

例子

```
Validate date:   2222/22/222
results :   Please enter a valid date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:06:01.397

放入一个属性 readonly="readonly" 应该可以解决问题:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-04T10:13:23.710

在文本框的按键上试试，

`$('#ID').keypress(function (event) {
if (event.charCode >= 48 && event.charCode <= 57 && this.value.length < 10 || event.charCode == 47 && (this.value.length == 2 || this.value.length == 5)) { if ((this.value.length == 2 || this.value.length == 5) && event.charCode != 47) {
$(this).val(this.value + "/");
} } else event.preventDefault(); });`

# php - 在 PHP 中使用 Try-catch 结构

> ID：10007568
> 
> 赞同：1
> 
> 时间：2012-04-04T08:35:22.367
> 
> 标签：php, javascript, codeigniter

我以前从未在我的代码中使用过 Try-catch，但现在我需要这样做，而且我似乎不太了解它的工作方式。我在使用explode的字符串中有数据：

```
$groupNumbers = array();
$str = $dataGroups['groups'];
$groupNumbers = explode(",", $str);
$count = count($groupNumbers); 
```

然后我想检查每个元素是否都是数字的，如果是我继续进行数据库查询，否则我想中止操作 ant 返回一些错误。

这是我正在做的事情：

```
for ($i = 0; $i < $count; ++$i)
    {
        try
        {
            is_numeric($groupNumbers[$i]);

        }
        catch (Exception $ex)
        {
            process_exception_to_json($ex);
        }
    } 
```

如果 evrery 元素是数字，我会构造一条活动记录来执行 SQL：

> $this->db->insert_batch('users_groups', $datas);

显然是这样写的，即使一个元素不是数字的，动作也不会中止，并且 insert_batch 仍然使用无效值执行，这是我想要避免的。这样做的确切方法是什么，所以我可以得到一个异常，同时中止操作。谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:38:40.470

这是因为[`is_numeric`^(*Docs*)](http://php.net/is_numeric)不会抛出异常而是返回一个值。它永远不会失败/抛出异常。

你需要这样做（只是一个例子，我不建议这样做，因为它是多余的）：

```
try
{
    if (!is_numeric($groupNumbers[$i])) {
        throw new RuntimeException('Not numeric.');
    }

}
catch (Exception $ex)
{
    process_exception_to_json($ex);
} 
```

而是创建您自己的组号类型：

```
try
{
    $groupNumbers = GroupNumbers::createFromString($dataGroups['groups']);
}
catch (Exception $ex)
{
    process_exception_to_json($ex);
} 
```

使用以下类型：

```
class GroupNumbers extends ArrayObject
{
    public function construct(Array $numbers) {
        foreach ($numbers as $number)
        {
            if (!is_numeric($number))
            {
                throw new InvalidArgumentException(sprintf('Not numeric "%s".', $number));
            }
        }
        parent::__construct($numbers);
    }
    public static function createFromString($string) {
        return new self(explode(",", $string));
    }
} 
```

现在封装了字符串处理，不再有外循环，`GroupNumbers`并且仅在字符串中有实际数字时才实例化。

如果你不熟悉类，你也可以通过程序风格获得类似的好处。它可能更容易理解（但几乎相同）：

```
try
{
    $groupNumbers = GroupNumbers_createFromString($dataGroups['groups']);
}
catch (Exception $ex)
{
    process_exception_to_json($ex);
}

function GroupNumbers_createFromString($string)
{
    $numbers = explode(",", $string);
    foreach ($numbers as $number)
    {
        if (!is_numeric($number))
        {
            throw new InvalidArgumentException(sprintf('Not numeric "%s".', $number));
        }
    }
    return $numbers;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:43:05.053

如果你想验证，你不需要`Exception`在这里使用

```
for ($i = 0; $i < $count; ++$i)
{
    if((int) $groupNumbers[$i] <= 0) {
        process_exception_to_json($groupNumbers[$i]);
        break; //optinal
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:39:32.887

`is_numeric`从不抛出任何异常，因此您的示例不执行任何操作，这将起作用：

```
for ($i = 0; $i < $count; ++$i)
{
    try
    {
        if (is_numeric($groupNumbers[$i]) !== true)
        {
            throw new Exception($groupNumbers[$i] . ' is not numeric');
        }
    }

    catch (Exception $ex)
    {
        process_exception_to_json($ex);
    }
} 
```

以下将完成（几乎）相同的事情：

```
for ($i = 0; $i < $count; ++$i)
{
    if (is_numeric($groupNumbers[$i]) !== true)
    {
        process_exception_to_json($groupNumbers[$i] . ' is not numeric');
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:50:34.147

您需要做一些实际上在 try 块中引发异常的事情。is_numeric() 只会返回 false，所以这不起作用。这将：

```
try {
    if (!is_numeric($groupNumbers[$i]) {
        throw new exception('Uh-oh!');
    } 
} catch (Exception $ex) {
    process_exception_to_json($ex);
} 
```

最好这样做：

```
function checkNumbers($groupNumbers) {
    for ($i = 0; $i < count($groupNumbers); ++$i) {
        if (!is_numeric($groupNumbers[$i]) {
            throw new Exception('"'.$groupNumbers[$i]." is non-numeric!");
        } 
    }
}

try {
    checkNumbers($numbers);
    // Won't get this far if it throws an exception
    $this->db->insert_batch('users_groups', $numbers);
} catch (Exception $ex) {
    process_exception_to_json($ex);
} 
```

异常可以非常深入地嵌套在代码中，主要好处是错误消息是特定的，并且会冒泡，而您不必担心大量的真值或假值。您可能从 checkNumbers() 调用了数十个链式函数，无论出现什么错误，它都会在 catch 块中弹出，准备好将其发送到 JSON。

# c - 如何从结构页面中获取关联数据的物理地址？

> ID：10007571
> 
> 赞同：8
> 
> 时间：2012-04-04T08:35:36.460
> 
> 标签：c, linux, memory-management, linux-kernel

假设我们`struct page`从页面缓存文件的地址空间中获得了一个。

我们如何从中获取 4KB 数据的起始物理地址`struct page`？

我想里面应该有类似`data`指针的东西`struct sk_buff`，但我没有找到。

* * *

**编辑**

感谢 Mat 和 llya 的回答。

看了答案后，我认为第一个问题是确定 是否`struct page`位于`ZONE_NORMAL`或`ZONE_HIGHMEM`。

在文件 I/O 期间，当我们没有找到缓存页面时，我们将首先使用`page_cache_alloc_cold()`. `page_cache_alloc_cold()`最终会调用`alloc_pages()`它看起来会使用`ZONE_HIGHMEM`（在 x86 中，是从`PAGE_OFFSET`+896M 开始的内核内存区域）来完成它的工作。

所以

*   我认为 Mat 的答案适用于`ZONE_NORMAL`
*   假设我们用`kmap()`struct page 关联的 4KB 数据的起始物理地址来查找，那么我们应该用它`(unsigned long)(&page)-PAGE_OFFSET`来查找存储结构本身的物理地址是否正确？

请纠正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:37:43.797

您需要将 a 映射`page`到内核内存中，如下所示：

```
void * mapping = kmap_atomic(page, KM_USER0);
// work with mapping...
kunmap_atomic(mapping, KM_USER0); 
```

`HighMemory`这个技巧是必需的，因为Linux中有一个概念（例如，请参阅[此](http://lwn.net/Articles/75174/)链接）。

UPD：您可以在非原子上下文中使用`kmap`而不是。`kmap_atomic`

# exe - 如何从另一个 .exe en c++ 向 .exe 发送命令？

> ID：10007576
> 
> 赞同：1
> 
> 时间：2012-04-04T08:35:58.143
> 
> 标签：exe

基本上，我想编写一个 C++ 程序并用它将消息传递给程序 .exe。该程序 .exe 将在后台运行，它将接收来自我的 c++ 程序的命令。请，如果有人知道这样做的方法，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:39:09.340

使用您的操作系统支持的任何 IPC。

# html - Sublime Text 2 HTML5 语法高亮

> ID：10007578
> 
> 赞同：5
> 
> 时间：2012-04-04T08:36:15.793
> 
> 标签：html, syntax-highlighting, sublimetext

我使用 sublime 来编辑 html5 文档。但是当我开始进行无引用编辑时，例如：

```
<div id=asdf> 
```

代替

```
<div id="asdf"> 
```

它的语法高亮发疯了。

![在此处输入图像描述](../Images/ea0e6acc9a7673bb85cf71282cef6ca8.png)

任何想法如何解决这个问题？是否有其他最新的 sublime 解析器？

泰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:01:36.377

这个 Sublime Text 线程建议了一种修复它的方法：[http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=8129](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8129)

打开您的 HTML.tmLanguage（在 ~/.config/sublime-text-2/Packages/HTML 中）并查找以下内容：

```
 <string>(?&lt;='|")</string>
  <key>name</key>
  <string>meta.attribute-with-value.id.html</string> 
```

将第一行更改为

```
<string>(?&lt;==|='|=")</string> 
```

您的未引用值不会以与引用值突出显示的方式相同的方式突出显示，但它至少会防止语法突出显示完全破坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:50:04.970

引用免费 html 不是一个好主意。我建议你使用引号。您将节省的字节不值得恶化会花费您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T03:54:03.607

我必须在这个上与 Dbugger 一起去。我觉得有必要不帮助您将 Sublime 配置为“不报告”不良 HTML 做法。话虽如此，您问题的答案是 - 输入引号将消除 Sublime 中奇怪的突出显示。

# javascript - 从 GWT 框架触发的事件

> ID：10007583
> 
> 赞同：0
> 
> 时间：2012-04-04T08:36:30.223
> 
> 标签：javascript, gwt

我想知道是否`GWT Frame`触发了来自 a 的事件。我的意思是，例如 HTTP 事件，如果我使用一些调试工具，我是否会看到来自底层`Iframe`元素的 HTTP 事件。

例如，`iframe`包含图像 url 中的加载页面，我会看到`GET`来自 iframe 的图像请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:19:43.907

取决于您使用的工具。Chrome 控制台总是显示事件的原因（例如 iframe 中的 javascript）。一些代理服务器（如 Fiddler2）将能够仅显示引用标题（这将是包含 iframe 的页面的地址）

# c# - 从哪个 Java GUI 框架开始？

> ID：10007586
> 
> 赞同：0
> 
> 时间：2012-04-04T08:36:49.517
> 
> 标签：c#, java, user-interface, frameworks, windowbuilder

我对Java很陌生。

我有一个用 C# 编写的工具，我想将它移植到 Java。

我使用 Eclipse，并想从 WindowBuilder 开始。

但是，我对各种选项（GWT、SWT、Swing）感到很困惑，而且我搜索的越多，我就越困惑。

我需要一个干净的 GUI，不要过于复杂，而且我想使用最简单的框架，最好是尽可能类似于 C# 风格的框架。

你有什么可以推荐给我的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:53:04.050

我应该说（三者中的）“最简单的”（即，文档最好的和最古老的）框架显然是 Swing。

查看[Oracle Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)。

使用 Swing 时需要记住一些事项（例如，据说它是“非线程安全的”，但请参阅[此线程](https://stackoverflow.com/questions/182316/java-swing-libraries-thread-safety)示例），但通常我会推荐它作为 Java 中 GUI 开发的起点。

[SWT（Standard Widget Toolkit）](http://en.wikipedia.org/wiki/Standard_Widget_Toolkit)最初是为 Eclipse 开发的，而[GWT（Google Web Toolkit）](http://en.wikipedia.org/wiki/Google_Web_Toolkit)用于 Web 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:46:37.807

试试 Java Qt，它的 C++ 非常棒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:06:03.840

我已经非常广泛地使用了 Swing 和 GWT。正如其他人所提到的，Swing 是独立 Java 应用程序的不错选择。我无法就 Swing 与 SWT 发表意见，因为我从未使用过 SWT。但是现在有多少应用程序是独立的？不是很多。

如果您希望从浏览器访问您的应用程序，您可能希望使用基于 javascript 的 UI。有很多基于 javascript 的 UI 框架，例如 YUI、Dojo、Prototype、JQuery 等。使用哪个？如果你喜欢用 Javascript 编程（不是一门简单的语言，顺便说一句），你可能想要使用这些框架中的一个或多个。但是，如果您是 Java 新手并且不了解 javascript，那么 GWT 可能是非常好的选择，因为它通常无需了解 javascript（您使用 Java 编写所有代码，编译器会为您生成高度优化的 javascript，并且几乎总是消除浏览器之间的所有差异——这很重要）。我已经使用 GWT 一年多了，我强烈推荐它。它可以与 Google 应用引擎或任何其他服务器端技术一起使用。我会问的一个问题是 GWT 是否可以有效地用于独立应用程序。我想有办法做到这一点，但我还没有研究过。如果是这样，我也倾向于将 GWT 用于独立应用程序，因为如果该独立应用程序最终成为支持 Web 的，那么您的代码可以重用于基于 Web 的界面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:44:57.130

如果您来自 C#，最好的开始方法是安装**Netbeans IDE**。它具有用于创建新表单的各种向导，并且您拥有一个看起来就像 Visual Studio 中的那样的高质量**可视化编辑器。**

*   [http://netbeans.org/features/java/swing.html](http://netbeans.org/features/java/swing.html)

之后，您可以编辑“背后的代码”以用于以编程方式操作组件。我想 Eclipse 也可以，但在我看来，Netbeans 非常稳定，默认情况下一切正常，配置或插件安装不会浪费时间......

此外，如果您需要一个复杂的停靠窗口框架，它也集成在 Netbeans 中，并且您有一个构建“富客户端平台应用程序”的向导：

*   [http://netbeans.org/features/platform/](http://netbeans.org/features/platform/)。

就像在 Eclipse RCP 中一样，它依赖于删除了 IDE 插件的**Netbeans 平台内核。**它具有有趣的功能，例如生成跨平台安装程序和在您的应用程序中添加插件......

祝你好运，

雷诺

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T09:19:10.477

我认为swing很容易，所以我会从swing开始

# iis-7 - 在 iis7 上设置经典 asp 站点，站点运行但可以看到服务器标签

> ID：10007587
> 
> 赞同：1
> 
> 时间：2012-04-04T08:36:51.953
> 
> 标签：iis-7, asp-classic, vbscript

嗨，我已收到一个经典的 asp 站点，可以在 IIS7 上设置。我太年轻了，不知道任何关于经典 asp 的信息，而且我在网上找不到任何关于我的问题的文档。我已经安装了 asp 并且启用了 classicasp *.asp 处理程序。当我访问该站点时，主页加载正常，但我可以在页面顶部看到一个服务器标签：

```
<!--#include file="cp/inc_func.asp"-->

<% 
OpenDB()
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/index.dwt" codeOutsideHTMLIsLocked="false" -->
<head> 
```

我可以在前端页面的顶部看到 <% OpenDB() %> 标记。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:41:59.347

这意味着您的代码不会由 ASP Classic 引擎执行。这意味着您在 IIS 中的 ASP Classic 设置可能不正确。

请尝试以下有关在 IIS7 中设置 ASP Classic 的教程：

[在 IIS 7 上运行经典 ASP](http://www.alexthissen.nl/blogs/main/archive/2008/02/18/running-classic-asp-on-iis-7.aspx)

让我知道这是否有效！

这里还有一些在 IIS7 上运行 Classic ASP 的常见技巧：

[IIS7 上的经典 ASP 开发人员提示](http://blogs.iis.net/bills/archive/2007/05/21/tips-for-classic-asp-developers-on-iis7.aspx)

# c++ - type_info doesn't account for cv qualifiers: is this right?

> ID：10007596
> 
> 赞同：4
> 
> 时间：2012-04-04T08:37:19.360
> 
> 标签：c++, g++, constants, volatile, rtti

Is it the correct behaviour or is it a quirk of g++4.5 that this code prints 1?

```
#include <iostream>
#include <typeinfo>
using namespace std;

int main(){
    struct A{};
    cout<<(typeid(A)==typeid(const A)&&typeid(A)==typeid(const volatile A)&&typeid(A)==typeid(volatile A));
} 
```

I thought that types differing for cv-qualifiers were threated as very distinct types, even though less cv-qualified types could be implicitly cast to more cv-qualified types.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:56:55.250

`typeid`根据 C++ 标准（取自 ISO/IEC 14882:2003 的§5.2.8）忽略 cv 限定符：

> 左值表达式的顶级 cv 限定符或作为 typeid 操作数的 type-id 始终被忽略。[例子：

```
class D { ... };
D d1;
const D d2;

typeid(d1) == typeid(d2);       // yields true
typeid(D) == typeid(const D);   // yields true
typeid(D) == typeid(d2);        // yields true
typeid(D) == typeid(const D&);  // yields true 
```

> ——结束示例]

因此，您看到的结果是预期的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-25T00:55:58.723

正如@SanderDeDycker 提到的 cv 限定符被忽略。但不是为了指针！

例子：

```
#include <iostream>
#include <typeinfo>

int main()
{
    int bar = 1;
    const int cbar = 10;
    volatile int vbar = 10;
    const volatile int cvbar = 1000;
    int &rbar = bar;
    const int &crbar = bar;
    volatile int &vrbar = bar;
    const volatile int &cvrbar = bar;
    int *pbar = &bar;
    const int *cpbar = &bar;
    volatile int *vpbar = &bar;
    const volatile int *cvpbar = &bar;
    const volatile int * const cvpcbar = &bar;
    const volatile int * const volatile cvpcvbar = &bar;
    int&& rrbar = 894354;
    const int&& rrcbar = 894354;

    std::cout << typeid(bar).name() << '\n';
    std::cout << typeid(cbar).name() << '\n';
    std::cout << typeid(vbar).name() << '\n';
    std::cout << typeid(cvbar).name() << '\n';
    std::cout << typeid(rbar).name() << '\n';
    std::cout << typeid(crbar).name() << '\n';
    std::cout << typeid(vrbar).name() << '\n';
    std::cout << typeid(cvrbar).name() << '\n';
    std::cout << typeid(pbar).name() << '\n';
    std::cout << typeid(cpbar).name() << '\n';
    std::cout << typeid(vpbar).name() << '\n';
    std::cout << typeid(cvpbar).name() << '\n';
    std::cout << typeid(cvpcbar).name() << '\n';
    std::cout << typeid(cvpcvbar).name() << '\n';
    std::cout << typeid(rrbar).name() << '\n';
    std::cout << typeid(rrcbar).name() << '\n';
    std::cout << "\n\n";
} 
```

*输出*

```
int
int
int
int
int
int
int
int
int * __ptr64
int const * __ptr64
int volatile * __ptr64
int const volatile * __ptr64
int const volatile * __ptr64
int const volatile * __ptr64
int
int 
```

如您所见，在涉及指针的 5 种情况下，不会忽略 cv 限定符。MSVS 或 g++ 和 C++11、C++14、C++17 的输出相同。

# sql - Oracle: take advantage of using two index

> ID：10007598
> 
> 赞同：3
> 
> 时间：2012-04-04T08:37:30.473
> 
> 标签：sql, oracle, indexing

As you can see Oracle could exploit two indexes and solve the entire query without accessing the table by rowid?

```
SELECT  'Scarti letture GAS' tipo, campo47 pdf, COUNT (1) n
  FROM out.CONSUMI_GEE_LC_T500_00 v
  WHERE stato = 'SC'
  AND stato is not null
  AND campo47 is not null
  GROUP BY 'Scarti letture GAS', campo47; 
```

I've made a test adding the field campo47 to the STATO index. Performance boosts from 1' 49'' to 0,6s.

Index on stato is not selective. Index on campo47 (it means field47) is really selective.

![enter image description here](../Images/834edf40a822524a74d11af6f274388a.png)

![enter image description here](../Images/16e67579e0aba0c0e35b630b4696dbd3.png)

![enter image description here](../Images/6293216dcd70dfc384ba732224fc519c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:59:56.120

你说 CAMPO47 是高度选择性的。但是您只过滤 IS NOT NULL。所以不管它有多少不同的值，优化器都不会使用它作为入口点。

它的选择性如何？从解释计划中的基数可以看出，选择 STATO='SC' 会在表中找到 12856 行。这些行中有 12702 行明显具有带有值的 CAMPO47，因此只有 154 行被空值测试过滤掉。如果优化器已经为 CAMPO47 上的索引增加了多少行，那将返回多少行？可能还有很多。

优化器只能使用一个堆索引来访问表中的行。（当它们应用星形变换时，位图索引的机制是不同的）。因此，如果您认为额外的表访问是难以忍受的负担，那么您有一个选择：复合索引。如果 STATO 确实是非选择性的（相对较少的行），那么您可以安全地将现有索引替换为一个 on (STATO, CAMPO47)。

* * *

有一个古老的技巧可以推动数据库使用索引来访问 IS NOT NULL 操作，那就是使用一个操作数，该操作数只能在列包含值的情况下为真。例如，对于字符串列是这样的（我假设一个叫做 CAMPO47 的东西只是一个字符串）：

```
AND campo47 >= chr(0) 
```

这将匹配任何包含一个或多个 ascii 字符的列。不确定它是否会导致您描述的“双索引”优化，但值得一试。（我自己会对此进行测试，但我现在无法访问 Oracle 数据库，当我试图查看解释计划时，SQL Fiddle 猛烈抨击）

# design-patterns - 适合模块化特征匹配应用程序的设计模式？

> ID：10007600
> 
> 赞同：0
> 
> 时间：2012-04-04T08:37:38.037
> 
> 标签：design-patterns, decorator, matching, conceptual

由于我对[这个](https://stackoverflow.com/questions/9946135/accessing-a-protected-member-of-a-superclass-typed-member-object-an-elegant-so)问题（关于此类系统的实施）的系统设计有一些负面评价，我希望如果我提出问题，我可以得到一些更好的建议。

我正在尝试设计一个模块化应用程序，用于视频帧中的特征匹配（例如，匹配电影或视频的非常接近的帧，如Sivic，Zisserman的[这篇文章中的“产品”）。](http://web.cs.swarthmore.edu/~turnbull/cs97/f08/paper/sivic03.pdf)

这个想法是允许在不同*的特征检测*算法以及不同的*匹配过程*之间轻松切换。另外，根据我的研究，我的理解是只有几个基本的匹配过程，而新的匹配方法主要侧重于对不良匹配的额外剪枝过程（例如[同一篇文章](http://web.cs.swarthmore.edu/~turnbull/cs97/f08/paper/sivic03.pdf)中的空间一致性）。所有剪枝过程都需要完成初始匹配，然后对从*匹配耦合*的基础图像和查询图像*中提取的特征*做一些额外的工作，拒绝错误的匹配。

 ** * *

我对设计的想法如下：

*   实现一个基本接口`featureDetector`
*   所有具体的特征检测算法都继承自`featureDetector`接口（例如`siftDetector`）
*   实现一个基本接口`featureMatcher`
*   所有具体的匹配方法都从`featureMatcher`接口继承（例如`class bruteForceMatcher`，或 OpenCV 匹配器的包装器，如`cvMatcher`）
*   `imageMatcher`实现一个实现[**策略**](http://en.wikipedia.org/wiki/Strategy_pattern)模式的基本接口，以允许选择`featureDetector`和`featureMatcher`
*   对于所有匹配的修剪过程，实现一个继承基本匹配接口的[**装饰器**](http://en.wikipedia.org/wiki/Decorator_pattern)接口：`class matcherDecorator : public imageMatcher`
*   每个额外的修剪/过滤过程都实现了`matcherDecorator`接口（例如`spatialConsistencyFilter`）并且只包含`imageMatcher*`作为（唯一）参数的构造函数（表示要装饰的组件）

[在这个问题](https://stackoverflow.com/questions/9946135/accessing-a-protected-member-of-a-superclass-typed-member-object-an-elegant-so)中向我指出的问题来自于特征检测和匹配过程的具体结果，它们涉及设计的*装饰器*部分。每个都`imageMatcher`应该*包含*从两个图像（基本和查询）中提取的特征，以及提取的特征*之间的匹配*。特征的内部表示与通过以下公共访问功能提供给用户的特征描述符略有不同`imageMatcher`：

```
class imageMatcher{
    private: // or protected:
        ...
        ...
        std::vector <internalFeatureDescriptor> feats[2];
            // no more than 500 - 1000 features can be expected

        std::vector <std::pair <int, int> > matches;
            // size is the same order of magnitude as the number of features
        ...
    public:
        std::vector <userFriendlyFeatures> getFeatures(int baseOrQuery);
        const std::vector <std::pair<int, int> > &getMatches();
        ...
}; 
```

现在，由于特征向量（以及匹配向量）非常“重”，我*不想*在使用它们时将它们复制到每个嵌套的装饰器（过滤器）中。我对向量没有任何问题`matches`，因为它为用户提供了一个公共接口，允许装饰器访问引用并省略复制数据的需要。`feats`另一方面，向量不提供这样的接口，它们的访问功能要求我不仅要进行复制，还要重新计算特征的内部表示。这反过来导致装饰器需要访问*内部超类指针的私有（或受保护）变量*。

我设法在不违反任何隐私限制的情况下授予我对所需向量的自我访问权限（我（认为）我没有做任何邪恶的实施），但有人建议访问超类的私有成员的想法违反了*装饰器*模式的想法。

* * *

综上所述，我对有关如何重构代码、对当前实现的评论以及与我的应用程序设计有关的任何其他建议感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:23:53.523

装饰器模式的替代方案是将过滤器实现为函数/仿函数。

1：定义每个过滤器的接口/签名，例如过滤`matchResult`签名可以是：

```
std::function<void (std::vector <std::pair <int, int> >& )> 
```

（注意：您可能需要一个适用于`feats`和的过滤器`matches`）

2：使用以下方法实现过滤器：

*   继承/虚函数（类似于你的装饰器）
*   作为 c++ 函子
*   作为自由函数

3：为您的类添加一个成员变量以`imageMatcher`查找已注册的过滤器

4：为您的类添加成员函数以`imageMatcher`注册过滤器

5：实现您的`getMatches()`成员函数，以便将每个注册的过滤器应用于`matches`. 如果您传递对`matches`成员的引用，它将在应用每个过滤器时被修改。

示例，假设选择了基于函子的方法

便利类型定义

```
typdef std::vector <std::pair <int, int> > match_result; 
```

过滤器的签名是：

```
typedef std::function< void (match_result& )> match_filter_type; 
```

`imageMatcher' 类看起来像：

```
class imageMatcher{
    private: // or protected:
        ...
        ...
        match_result matches;
        // size is the same order of magnitude as the number of features

        std::vector< match_filter_type > match_filters;
    ...
    public:
        imageMatcher& registerMatchFilter( match_filter_type filter )
        {
            match_filters.push_back( filter );
            return *this;
        }

        const std::vector <std::pair<int, int> > &getFilteredMatches()
        {
          // c++11 could be replaced with older style for loop
          for( auto& filt: match_filters)  
          {
            // note matches will be modified (see note below)
            filt( matches );
          }
          return matches;
        }
   }; 
```

过滤器可能如下所示：

```
void DoSomeFiltering( match_result& matches )
{
    // apply the filter modifying matches
} 
```

第二个过滤器可能是：

```
struct ComplexFilter
{
   ComplexFilter( params... );  

   void operator()( match_result& matches );
}; 
```

过滤器注册如下：

```
myImageMatcher.registerMatchFilter( ComplexFilter( args... ) );

// call chaining
myImageMatcher.registerMatchFilter( AnotherFilter( args... ) )
              .registerMatchFilter( OneMoreFilter( args... ) )
              .registerMatchFilter( FilterXXX( args... ) ); 
```

注意：`getFilteredMatches`按照注册的顺序应用过滤器，每个过滤器直接修改`matches`，这是你想要的吗？如果没有`getFilteredMatches`，可以制作副本，`matches`然后将过滤器应用于副本。然后按值返回副本（注意只有 1 个副本，即使在较旧的 c++03 编译器上，返回的向量也会被优化掉）。

您可能会决定您更喜欢继承而不是使用自由函数/仿函数。在这种情况下，`match_filters`成员变量成为基类对象的向量，即

```
class MatchFilterBase;
std::vector< std::shared_ptr<MatchFilterBase> >  match_filters; 
```

继承方法可能更接近您当前的`decorator pattern`实现，从而减少需要执行的重构量。

我的感觉是使用装饰器模式直接修改被装饰对象的内部内容并不自然，因此可能需要变通方法才能访问受保护/私有数据。*

# javascript - 如何找到弹出元素的id

> ID：10007608
> 
> 赞同：0
> 
> 时间：2012-04-04T08:38:05.610
> 
> 标签：javascript, jquery

我需要获取弹出的元素的 id。我在就绪函数中创建弹出窗口，以使用 rel=pop 触发每个元素

```
$("[rel=pop]").popover(
{
    delay: { show: 0, hide: 200 },
    html: true,
    content:'<input id="btn" onclick=somefunction("wanted_id"); .... '
}); 
```

我有很多带有 rel 属性 pop 的 div，我需要找到弹出的 div ober 的 id。如何找到它并使用该 id 调用一些函数？我一次只有一个弹出窗口，但我需要 div 的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:59:33.083

```
$("[rel=pop]").popover(
{
    delay: { show: 0, hide: 200 },
    html: true,
    content:'<input id="btn" onclick="somefunction("' + $(this).attr("id") + '");" .... '
}); 
```

# jquery - 如何查看一个类是否被应用？

> ID：10007610
> 
> 赞同：0
> 
> 时间：2012-04-04T08:38:16.473
> 
> 标签：jquery

我想检查“特定”类是否应用于 div 内的跨度。所以我尝试了

```
$('#div').click(function() {
     console.log($(this).find('.myImgClass').length);  // returns 0-if not found
                                                      // 1 if found
} 
```

## html

```
<div>
 <span class="myImgClass"></span>
</div> 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:40:03.400

使用[`jQuery.hasClass()`](http://api.jquery.com/hasClass/)方法来做到这一点：

```
var hasMyImgClassClass = $("span").hasClass("myImgClass"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:41:19.390

您的选择器错误，`div`而不是`#div`

```
$('div').click(function() {
   console.log($(this).has('.myImgClass').length);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:47:44.413

```
$("div >span").click(function(){
 alert($(this).hasClass('myImgClass')) 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:48:03.427

这应该可以解决问题，

```
$('div').click(function() {
  alert("Spans with .myImgClass: " + $(this).children('span.myImgClass').length);
}); 
```

[JSFiddle.net 上的示例](http://jsfiddle.net/gw8Wg/)

如果你*只*需要类的 div，那么：

```
$('div > span.myImgClass').click(function() {
  var theSpan = $(this);
  var theDiv = theSpan.parent();
  alert("Div with Span with .myImgClass.");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:40:41.740

看起来不错（除了 div 选择器），但是如果您想专门检查跨度，请将其更改为：

```
$('div').click(function() {
     console.log($(this).find('span.myImgClass').length);  
}); 
```

# mysql - 使用单个csv文件将多个表数据导入mysql

> ID：10007613
> 
> 赞同：1
> 
> 时间：2012-04-04T08:38:36.437
> 
> 标签：mysql, file-upload, csv, multiple-tables

我在 csv 文件中有这张表

![在此处输入图像描述](../Images/cb25b31746783312dc594f5dc1e33b77.png)

现在我有两个处理这个 csv 文件的 mysql 表，

数据 A、B、C 必须存储在其中，`Table1`而数据 D、E、F、G、H 必须存储在`Table2`.

我有上述格式的 csv 文件，如何将其数据上传到`MYSQL`数据库？

这样就可以为不同的表从同一个文件输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:43:11.623

可能只能通过自定义脚本（PHP 左右）...

但是通常不难将 CSV 拆分为 2 个文件并直接使用 MySQL 的**[LOAD_DATA函数将它们导入单独的表中。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)**这将比使用 phpMyAdmin 或类似脚本快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:22:30.610

试试这个效果很好，您可以根据 CSV 文件中的列数添加尽可能多的值。

```
 <?php   

 $fname = $_FILES['csv_file']['name'];     
  $chk_ext = explode(".",$fname);             

        $filename = $_FILES['csv_file']['tmp_      name'];   
 $handle = fopen($filename, "r");      
 if(!$handle){
 die ('Cannot open file for reading');
  }      
              while (($data = fgetcsv($handle,      10000, ",")) !== FALSE)
 {
          $query = "INSERT INTO tablename        (col1_csv, col2_csv)
 values ('$data[0]', '$data[1]');
   mysql_query($query) 
   or die(mysql_error());

        $query1 = "INSERT INTO tablename        (col1_csv, col2_csv)
    values ('$data[0]', '$data[1]');
   mysql_query($query1) 
 or die(mysql_error());
 }
 fclose($handle);
  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:50:58.307

将数据加载到 a 中`temporary table`，然后拆分到`two tables`.

然后`drop`那个`temporary table`。我在某处读到 php 可以做到这一点，但我无法在 php 代码中提供帮助。

# java - 如何对也包含汉字的列表进行排序

> ID：10007620
> 
> 赞同：3
> 
> 时间：2012-04-04T08:38:55.007
> 
> 标签：java, android, sorting

我有一个字符串列表，其中一些包含一些汉字：

```
List<String> list = new ArrayList<String>();
list.add("安卓");
list.add("iPhone");
list.add("WindowsMobile");
list.add("苹果");
list.add("Ubuntu");
list.add("Windows7"); 
```

我该如何排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:41:15.490

使用正常排序，例如：

```
Collections.sort(list); 
```

如果您需要一些自定义排序，您可以实现自己的比较器：

```
Collections.sort(list, new Comparator<String>() {
    public int compare(String s1, String s2) {
         // some own compare method...
    } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:41:26.710

Collections.sort 使用您自己的比较器绝对是一个开始。要创建一个比较器，请让一个类实现`Comparator`并实现它的 compare 方法。然后，实例化一个对象并将其传递给 Collections.sort 方法。

**编辑：**

compare 方法内部逻辑的近似伪代码：

```
IF s1 isChinese && s2 isEnglish
    return -1
IF s2 isChinese && s1 isEnglish
    return 1
IF s1 isChinese && s2 isChinese 
    //implement your custom way to sort stuff
IF s1 isEnglish && s2 isEnglish 
    //implement your custom way to sort stuff 
```

这样，您的中文单词将出现在顶部而不是底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:49:13.637

更好的方法是将其翻译成英文[（见此处）](https://stackoverflow.com/questions/5201769/are-there-any-apis-for-programmatically-translating-text-on-the-server-side)，然后使用 Comparator 对其进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T02:12:54.800

你可以用`Collator.getInstance(Locale.CHINESE)`代码来做到这一点：

```
Collections.sort(yourlist, new Comparator<String>() {
    @Override
    public int compare(Stringa1, Stringa2) {
        Collator collator = Collator.getInstance(Locale.CHINESE);
        int mySort = collator.compare(a1, a2);
        return mySort;
    }
 }); 
```

# batch-file - 从 SQL Server CE 数据库表中删除所有记录的批处理脚本

> ID：10007624
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:04.663
> 
> 标签：batch-file, sql-server-ce

需要一个批处理脚本来删除 SQL Server CE 数据库表中的所有记录。不知道是否可行，我的脚本很弱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:53:29.073

您可以从批处理文件中使用我的 SqlCeCmd/SqlCeCmd40 命令行实用程序，其命令行如下：

```
sqlcecmd -d "Data Source=C:\mydb.sdf" -q "DELETE * FROM MyTable" 
```

（或 DROP 表并使用 CREATE TABLE 重新创建 - 更快）

从[http://sqlcecmd.codeplex.com下载](http://sqlcecmd.codeplex.com)

# c# - 使用 Picasa API 获取原始图像的链接

> ID：10007625
> 
> 赞同：2
> 
> 时间：2012-04-04T08:39:06.503
> 
> 标签：c#, .net, api, picasa

嗨，我需要获取我上传的原始图像的链接。我正在使用此代码，但我拥有的链接在调整大小的图像上，我如何使用 API 获得原始链接（我不想使用 url bcz 操作它是错误的）。提前谢谢。这里的代码

```
 public void UploadImages(string[] filenames)
    {
        foreach (string file in filenames)
        {
            System.IO.FileInfo fileInfo = new System.IO.FileInfo(file);
            System.IO.FileStream fileStream = fileInfo.OpenRead();
            PicasaEntry entry = (PicasaEntry)service.Insert(
new Uri("https://picasaweb.google.com/data/feed/api/user/default/albumid/default"), fileStream, "image/jpeg", file);                
            fileStream.Close();
            urls.Add(entry.Media.Content.Url);
        }
    } 
```

# android - 如何从android中的二进制文件中读取浮点数组？

> ID：10007627
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:09.910
> 
> 标签：android, floating-point

我有一个希望为我的 android 应用程序读取的二进制文件。该文件的内容以“浮点”格式保存和写入。

如何将这些数据读入浮点数组？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:50:05.177

使用[DataInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html#readFloat%28%29)的 readFloat 方法。循环直到你得到一个EOFException。

# status - 如何以数字或文本形式获取 Skype 状态？mystatus.skype.com 不起作用

> ID：10007630
> 
> 赞同：7
> 
> 时间：2012-04-04T08:39:18.393
> 
> 标签：status, skype

我试图在我的网站上显示自定义 Skype 状态图标。

我发现，我可以使用 url 这个：

[http://mystatus.skype.com/username.txt](http://mystatus.skype.com/username.txt)但**它总是返回 "Offline"**。

我也尝试了 num 和 xml 扩展：

*   [http://mystatus.skype.com/username.num](http://mystatus.skype.com/username.num)（总是返回 1）
*   [http://mystatus.skype.com/username.xml](http://mystatus.skype.com/username.xml)（总是说我离线）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T12:08:52.653

这完全是关于 Skype 中的隐私设置。

“*允许我的在线状态显示在网络上*”默认是关闭的。我必须在我的 Skype 设置中打开它。

[support.skype.com 上的常见问题解答](https://support.skype.com/en-us/faq/FA605/How-do-I-show-my-Skype-status-on-the-web)说

> 要在 Web 上显示您的 Skype 状态：
> 
> *   登录到 Skype
> *   在菜单栏中，单击 Skype > 隐私...（在早期版本中，您可以在 Skype > 选项 > 隐私 > 显示高级选项中找到此选项）
> *   选中允许我的在线状态显示在网络上。

我不明白，为什么页面上没有这样的信息，我可以在哪里选择按钮：/

# java - 编写一个方法，用 '%20' 替换字符串中的所有空格

> ID：10007631
> 
> 赞同：14
> 
> 时间：2012-04-04T08:39:19.110
> 
> 标签：java, arrays, char

我有一个关于编程问题的问题，来自 Gayl Laakmann McDowell 的《破解代码访谈》，第 5 版。

问题说明：编写一个方法，用 '%20' 替换字符串中的所有空格。假设字符串在字符串末尾有足够的空间来容纳额外的字符，并且你得到了一个字符串的真实长度。我使用了书籍代码，使用字符数组在 Java 中实现了解决方案（鉴于 Java 字符串是不可变的）：

```
public class Test {
    public void replaceSpaces(char[] str, int length) {
        int spaceCount = 0, newLength = 0, i = 0;

        for(i = 0; i < length; i++) {
            if (str[i] == ' ') 
                spaceCount++;
        }

        newLength = length + (spaceCount * 2);
        str[newLength] = '\0';
        for(i = length - 1; i >= 0; i--) {
            if (str[i] == ' ') {
                str[newLength - 1] = '0';
                str[newLength - 2] = '2';
                str[newLength - 3] = '%';
                newLength = newLength - 3;
            }
            else {
                str[newLength - 1] = str[i];
                newLength = newLength - 1;
            }
        }
        System.out.println(str);
    }

    public static void main(String[] args) {
        Test tst = new Test();
        char[] ch = {'t', 'h', 'e', ' ', 'd', 'o', 'g', ' ', ' ', ' ', ' ', ' ', ' '};
        int length = 6;
        tst.replaceSpaces(ch, length);  
    }
} 
```

我从`replaceSpaces()`调用中得到的输出是：**%20do**，它正在切割原始数组的最后一个字符。我一直在为此挠头，谁能向我解释为什么算法会这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-02T19:07:40.640

```
public String replace(String str) {
    String[] words = str.split(" ");
    StringBuilder sentence = new StringBuilder(words[0]);

    for (int i = 1; i < words.length; ++i) {
        sentence.append("%20");
        sentence.append(words[i]);
    }

    return sentence.toString();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T08:53:48.850

您将长度传递为 6，这导致了这种情况。传递长度为 7，包括空格。否则

```
for(i = length - 1; i >= 0; i--) { 
```

不会考虑最后一个字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T08:51:22.557

通过这两个更改，我得到了输出：**%20dog**

1) 将空格数更改为 2 [因为长度已包含 %20 所需的 3 个字符中的 1 个]

```
newLength = length + (spaceCount * 2); 
```

2）循环应该从长度开始

```
for(i = length; i >= 0; i--) { 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-18T11:53:20.257

这是我的解决方案。我检查 ascii 代码 32 然后用 %20 代替它。这个解决方案的时间复杂度是 O(N)

```
public String replace(String s) {

        char arr[] = s.toCharArray();
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < arr.length; i++) {
            if (arr[i] == 32)
                sb.append("%20");
            else
                sb.append(arr[i]);

        }

        return sb.toString();
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-16T10:04:07.797

这是我的这个问题的代码。似乎为我工作。如果你有兴趣，请看看。它是用 JAVA 写的

```
public class ReplaceSpaceInString {
  private static char[] replaceSpaceInString(char[] str, int length) {
    int spaceCounter = 0;

    //First lets calculate number of spaces
    for (int i = 0; i < length; i++) {
      if (str[i] == ' ') 
        spaceCounter++;
    }

    //calculate new size
    int newLength = length + 2*spaceCounter;

    char[] newArray = new char[newLength+1];
    newArray[newLength] = '\0';

    int newArrayPosition = 0;

    for (int i = 0; i < length; i++) {
      if (str[i] == ' ') {
        newArray[newArrayPosition] = '%';
    newArray[newArrayPosition+1] = '2';
    newArray[newArrayPosition+2] = '0';
    newArrayPosition = newArrayPosition + 3;
      }
      else {
    newArray[newArrayPosition] = str[i];
    newArrayPosition++;
      }
    }               
    return newArray;
  }

  public static void main(String[] args) {
    char[] array = {'a','b','c','d',' ','e','f','g',' ','h',' ','j'};
    System.out.println(replaceSpaceInString(array, array.length));
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-04T13:41:26.897

```
void Rep_Str(char *str)
{
    int j=0,count=0;
    int stlen = strlen(str);
    for (j = 0; j < stlen; j++)
    {
        if (str[j]==' ')
        {
            count++;
        }
    }

    int newlength = stlen+(count*2);
    str[newlength--]='\0';
    for (j = stlen-1; j >=0 ; j--)
    {
        if (str[j]==' ')
        {
            str[newlength--]='0';
            str[newlength--]='2';
            str[newlength--]='%';
        }

        else
        {

            str[newlength--]=str[j];
        }
    }
} 
```

此代码有效:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-27T12:46:10.347

你可以这样做。无需计算长度或其他任何东西。无论如何，字符串是不可变的。

```
import java.util.*;
public class ReplaceString {

    public static void main(String[] args) {
        Scanner in=new Scanner(System.in);
        String str=in.nextLine();
        String n="";
        for(int i=0;i<str.length();i++)
        {
            if(str.charAt(i)==' ')
                n=n+"%20";
            else
                n=n+str.charAt(i);
        }
        str=n;
        System.out.println(str);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-20T20:26:40.503

您还可以使用 substring 方法和 ascii for space (32)。

```
public String replaceSpaceInString(String s){
    int i;
    for (i=0;i<s.length();i++){
        System.out.println("i is "+i);
        if (s.charAt(i)==(int)32){
            s=s.substring(0, i)+"%20"+s.substring(i+1, s.length());
            i=i+2;              
            }
    }
    return s;
    } 
```

去测试：

```
System.out.println(cc.replaceSpaceInString("mon day ")); 
```

输出：

```
mon%20day%20 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-03T01:22:39.653

我们可以使用正则表达式来解决这个问题。例如：

```
public String replaceStringWithSpace(String str){
     return str.replaceAll("[\\s]", "%20");
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-24T14:48:47.307

请记住，当后者不是前导或尾随空格时，您只想将 ' ' 替换为 '%20'。上面的几个答案都没有说明这一点。对于它的价值，当我运行 Laakmann 的解决方案示例时，我得到“索引超出范围错误”。

这是我自己的解决方案，它运行 O(n) 并在 C# 中实现：

```
 public static string URLreplace(string str, int n)
        {
            var len = str.Length;

            if (len == n)
                return str;

            var sb = new StringBuilder();
            var i = 0;

            while (i < len)
            {
                char c = str[i];

                if (c == ' ')
                {
                    while (i < len && str[i] == ' ')
                    {
                        i++; //skip ahead
                    }
                }
                else
                {
                    if (sb.Length > 0 && str[i - 1] == ' ')
                        sb.Append("%20" + c);
                    else
                        sb.Append(c);
                    i++;
                }
            }

            return sb.ToString();
        } 
```

测试：

```
 //Arrange
        private string _str = "                Mr  John  Smith   ";
        private string _result = "Mr%20John%20Smith";
        private int _int = 13;

        [TestMethod]
        public void URLified()
        {
            //Act
            var cleaned = URLify.URLreplace(_str, _int);

            //Assert
            Assert.IsTrue(cleaned == _result);
        } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-28T18:58:42.797

公开课溶胶{

```
public static void main(String[] args) {
    String[] str = "Write a method to replace all spaces in a string with".split(" ");
    StringBuffer sb = new StringBuffer();
    int count = 0;

    for(String s : str){
        sb.append(s);
        if(str.length-1 != count)
        sb.append("%20");
        ++count;
    }

    System.out.println(sb.toString());
} 
```

}

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-22T18:26:38.617

```
class Program
{
    static void Main(string[] args)
    {
        string name = "Stack Over Flow ";
        StringBuilder stringBuilder = new StringBuilder();

        char[] array = name.ToCharArray(); ;

        for(int i = 0; i < name.Length; i++)
        {
            if (array[i] == ' ')
            {
                stringBuilder.Append("%20");
            }
            else
                stringBuilder.Append(array[i]);
        }

        Console.WriteLine(stringBuilder);
        Console.ReadLine();

    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-25T05:25:38.540

这可以正常工作。但是，使用 StringBuffer 对象会增加空间复杂度。

```
 Scanner scn = new Scanner(System.in);
    String str = scn.nextLine();
    StringBuffer sb = new StringBuffer(str.trim());

    for(int i = 0;i<sb.length();i++){
        if(32 == (int)sb.charAt(i)){
            sb.replace(i,i+1, "%20");
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-22T18:31:43.657

问题：用 %20 Urlify 空格

解决方案 1：

```
public class Solution9 {
public static void main(String[] args) {
    String a = "Gini Gina Protijayi";

       System.out.println(   urlencode(a));
}//main

public static String urlencode(String str) {
      str = str.trim();
        System.out.println("trim =>" + str);

        if (!str.contains(" ")) {
            return str;
        }

    char[] ca = str.toCharArray();

    int spaces = 0;
    for (char c : ca) {
        if (c == ' ') {
            spaces++;
        }
    }

    char[] newca = new char[ca.length + 2 * spaces];
      //  a pointer x has been added
    for (int i = 0, x = 0; i < ca.length; i++) {
        char c = ca[i];
        if (c == ' ') {
            newca[x] = '%';
            newca[x + 1] = '2';
            newca[x + 2] = '0';
            x += 3;
        } else {
            newca[x] = c;
            x++;
        }
    }
    return new String(newca);
}

}//urlify 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-21T06:25:10.387

```
public class ReplaceChar{

 public static void main(String []args){
   String s = "ab c de  ";
   System.out.println(replaceChar(s));

 }

 public static String replaceChar(String s){

    boolean found = false;
    StringBuilder res = new StringBuilder(50);
    String str = rev(s);
    for(int i = 0; i <str.length(); i++){

        if (str.charAt(i) != ' ')  { found = true; }
        if (str.charAt(i) == ' '&& found == true) { res.append("%02"); }            
        else{ res.append(str.charAt(i)); }
    }
        return rev(res.toString()); 
 }

 // Function to reverse a string
 public static String rev(String s){
     StringBuilder result = new StringBuilder(50);
     for(int i = s.length()-1; i>=0; i-- ){
        result.append(s.charAt(i));
    }
    return result.toString();
 }} 
```

一个简单的方法：

1.  反转给定的字符串并检查第一个字符出现的位置。
2.  使用字符串生成器为空格附加“02%” - 因为字符串是相反的。
3.  最后再次反转字符串。

注意：我们反转字符串以防止在尾随空格中添加“%20”。

希望有帮助！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-25T01:04:46.847

我也在看书中的这个问题。我相信我们可以在这里`String.trim()`使用`String.replaceAll(" ", "%20)`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-11-21T14:22:40.347

有什么理由不使用“替换”方法？

```
 public String replaceSpaces(String s){
    return s.replace(" ", "%20");} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-12-17T00:50:48.013

嗯...我也想知道这个问题。考虑到我在这里看到的。本书解决方案不适合 Java，因为它使用就地

```
 char [] 
```

此处使用 char [] 或 return void 的修改和解决方案也不适合，因为 Java 不使用指针。

所以我在想，显而易见的解决方案是

```
private static String encodeSpace(String string) {
     return string.replcaceAll(" ", "%20");
} 
```

但这可能不是你的面试官希望看到的:)

```
// make a function that actually does something
private static String encodeSpace(String string) {
     //create a new String
     String result = new String();
     // replacement
     final String encodeSpace = "%20";

     for(char c : string.toCharArray()) {
         if(c == ' ') result+=encodeString;
         else result+=c;
     }

     return result;
} 
```

我认为这看起来不错，而且您只需要通过字符串一次，所以复杂度应该是 O(n)，对吧？错误的！问题出在

```
result += c; 
```

这与

```
result = result + c; 
```

它实际上复制了一个字符串并创建了它的副本。在java中字符串表示为

```
private final char value[]; 
```

这使它们不可变（有关更多信息，我将检查**java.lang.String**及其工作原理）。这个事实会将这个算法的复杂性提高到 O(N^2)，一个狡猾的招聘人员可以利用这个事实让你失望：P 因此，我提出了一个新的低级解决方案，你永远不会在实践中使用它，但这在理论上是好的:)

```
private static String encodeSpace(String string) {

    final char [] original = string != null? string.toCharArray() : new char[0];
    // ASCII encoding
    final char mod = 37, two = 50, zero = 48, space = 32;
    int spaces = 0, index = 0;

    // count spaces 
    for(char c : original) if(c == space) ++spaces; 

    // if no spaces - we are done
    if(spaces == 0) return string;

    // make a new char array (each space now takes +2 spots)
    char [] result = new char[string.length()+(2*spaces)];

    for(char c : original) {
        if(c == space) {
            result[index] = mod;
            result[++index] = two;
            result[++index] = zero;
        }
        else result[index] = c;
        ++index;
    }

    return new String(result);
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-07-03T13:57:24.673

我在这里更新了解决方案。[http://rextester.com/CWAPCV11970](http://rextester.com/CWAPCV11970)

如果我们正在创建新数组而不是就地转换，那么为什么我们需要倒退呢？

我稍微修改了真正的解决方案以向前创建目标 Url-encoded-string。

**时间复杂度：**

```
 O(n) - Walking original string
  O(1) - Creating target string incrementally

  where 'n' is number of chars in original string 
```

**空间复杂度：** O(n + m) - 用于存储转义空格和字符串的重复空间。其中'n'是原始字符串中的字符数，'m'是转义空格的长度

```
 public static string ReplaceAll(string originalString, char findWhat, string replaceWith)
    {
        var newString = string.Empty;
        foreach(var character in originalString)
            newString += findWhat == character? replaceWith : character + string.Empty;
        return newString;
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-05-18T05:10:59.147

// 在传递输入时确保使用 .toCharArray 方法，因为字符串是不可变的

```
public static void replaceSpaces(char[] str, int length) {
    int spaceCount = 0, newLength = 0, i = 0;

    for (i = 0; i < length; i++) {
        if (str[i] == ' ')
            spaceCount++;
    }

    newLength = length + (spaceCount * 2);
    // str[newLength] = '\0';
    for (i = length - 1; i >= 0; i--) {
        if (str[i] == ' ') {
            str[newLength - 1] = '0';
            str[newLength - 2] = '2';
            str[newLength - 3] = '%';
            newLength = newLength - 3;
        } else {
            str[newLength - 1] = str[i];
            newLength = newLength - 1;
        }
    }
    System.out.println(str);
}

public static void main(String[] args) {
    // Test tst = new Test();
    char[] ch = "Mr John Smith    ".toCharArray();
    int length = 13;
    replaceSpaces(ch, length);
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-06-20T23:15:27.400

我使用时间复杂度 O(n) 的 StringBuilder 的解决方案

```
public static String url(String string, int length) {
    char[] arrays = string.toCharArray();
    StringBuilder builder = new StringBuilder(length);

    for (int i = 0; i < length; i++) {
        if (arrays[i] == ' ') {
            builder.append("%20");
        } else {
            builder.append(arrays[i]);
        }
    }

    return builder.toString();
} 
```

测试用例 ：

```
@Test
public void testUrl() {
    assertEquals("Mr%20John%20Smith", URLify.url("Mr John Smith ", 13));
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-12-22T10:22:40.077

但我想知道以下代码有什么问题：

```
private static String urlify(String originalString) {

        String newString = "";
        if (originalString.contains(" ")) {
            newString = originalString.replace(" ", "%20");
        }
        return newString;
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-02-05T00:32:06.750

一行代码 System.out.println(s.trim().replace(" ","%20"));

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-02-14T00:40:57.487

```
public class Test {
    public static void replace(String str) {
        String[] words = str.split(" ");
        StringBuilder sentence = new StringBuilder(words[0]);

        for (int i = 1; i < words.length; i++) {
            sentence.append("%20");
            sentence.append(words[i]);
        }
        sentence.append("%20");
        System.out.println(sentence.toString());
    }
    public static void main(String[] args) {
        replace("Hello   World "); **<- Hello<3spaces>World<1space>**
    }
} 
```

O/P:: 你好%20%20%20World%20

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-07-21T13:37:13.620

书中的问题提到替换应该到位，因此不可能分配额外的数组，它应该使用常量空间。您还应该考虑许多边缘情况，这是我的解决方案：

```
public class ReplaceSpaces {

    public static void main(String[] args) {
        if ( args.length == 0 ) {
            throw new IllegalArgumentException("No string");
        }
        String s = args[0];
        char[] characters = s.toCharArray();

        replaceSpaces(characters);
        System.out.println(characters);
    }

    static void replaceSpaces(char[] s) {
        int i = s.length-1;
        //Skipping all spaces in the end until setting `i` to non-space character
        while( i >= 0 && s[i] == ' ' ) { i--; }

        /* Used later to check there is enough extra space in the end */
        int extraSpaceLength = s.length - i - 1;

        /* 
        Used when moving the words right, 
        instead of finding the first non-space character again
        */
        int lastNonSpaceCharacter = i;

        /*
        Hold the number of spaces in the actual string boundaries
        */
        int numSpaces = 0;

        /*
        Counting num spaces beside the extra spaces
        */
        while( i >= 0 ) { 
            if ( s[i] == ' ' ) { numSpaces++; }
            i--;
        }

        if ( numSpaces == 0 ) {
            return;
        }

        /*
        Throw exception if there is not enough space
        */
        if ( extraSpaceLength < numSpaces*2 ) {
            throw new IllegalArgumentException("Not enough extra space");
        }

        /*
        Now we need to move each word right in order to have space for the 
        ascii representation
        */
        int wordEnd = lastNonSpaceCharacter;
        int wordsCounter = 0;

        int j = wordEnd - 1;
        while( j >= 0 ) {
            if ( s[j] == ' ' ){
                moveWordRight(s, j+1, wordEnd, (numSpaces-wordsCounter)*2);         
                wordsCounter++;
                wordEnd = j;
            }
            j--;
        }

        replaceSpacesWithAscii(s, lastNonSpaceCharacter + numSpaces * 2);

    }

    /*
    Replaces each 3 sequential spaces with %20
    char[] s - original character array
    int maxIndex - used to tell the method what is the last index it should
    try to replace, after that is is all extra spaces not required
    */
    static void replaceSpacesWithAscii(char[] s, int maxIndex) {
        int i = 0;

        while ( i <= maxIndex ) {
            if ( s[i] ==  ' ' ) {
                s[i] = '%';
                s[i+1] = '2';
                s[i+2] = '0';
                i+=2;
            } 
            i++;
        }
    }

    /*
    Move each word in the characters array by x moves
    char[] s - original character array
    int startIndex - word first character index
    int endIndex - word last character index
    int moves - number of moves to the right
    */
    static void moveWordRight(char[] s, int startIndex, int endIndex, int moves) {

        for(int i=endIndex; i>=startIndex; i--) {
            s[i+moves] = s[i];
            s[i] = ' ';
        }

    }

} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-02-06T02:29:19.243

这样做的另一种方法。我假设尾随空格不需要转换为 %20 并且尾随空格为 %20s 之间填充提供了足够的空间

```
public class Main {

   public static void main(String[] args) {

      String str = "a sd fghj    ";
      System.out.println(replacement(str));//a%20sd%20fghj
   }

   private static String replacement(String str) {
      char[] chars = str.toCharArray();
      int posOfLastChar = 0;
      for (int i = 0; i < chars.length; i++) {
         if (chars[i] != ' ') {
            posOfLastChar = i;
         }
      }

      int newCharPosition = chars.length - 1;

      //Start moving the characters to th end of the array. Replace spaces by %20
      for (int i = posOfLastChar; i >= 0; i--) {

         if (chars[i] == ' ') {
            chars[newCharPosition] = '0';
            chars[--newCharPosition] = '2';
            chars[--newCharPosition] = '%';
         } else {
            chars[newCharPosition] = chars[i];
         }

         newCharPosition--;
      }

      return String.valueOf(chars);
   }
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-12-08T04:05:10.487

```
public static String replaceAllSpaces(String s) {
    char[] c = s.toCharArray();
    int spaceCount = 0;
    int trueLen = s.length();
    int index = 0;
    for (int i = 0; i < trueLen; i++) {
        if (c[i] == ' ') {
            spaceCount++;
        }
    }
    index = trueLen + spaceCount * 2;
    char[] n = new char[index]; 
    for (int i = trueLen - 1; i >= 0; i--) {
        if (c[i] == ' ') {
            n[index - 1] = '0';
            n[index - 2] = '2';
            n[index - 3] = '%';
            index = index - 3;
        } else {
            n[index - 1] = c[i];
            index--;
        }
    }
    String x = new String(n);
    return x;
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-09-16T06:14:51.313

你可以使用 StringBuilder 吗？

```
public String replaceSpace(String s)
{
    StringBuilder answer = new StringBuilder();
    for(int i = 0; i<s.length(); i++)   
    {
        if(s.CharAt(i) == ' ')
        {
            answer.append("%20");
        }
        else
        {
            answer.append(s.CharAt(i));
        }
    }
    return answer.toString();
} 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2018-07-10T15:46:59.960

```
`// Maximum length of string after modifications.

const int MAX = 1000;

// Replaces spaces with %20 in-place and returns
// new length of modified string. It returns -1

// if modified string cannot be stored in str[]

int replaceSpaces(char str[])

{
    // count spaces and find current length
    int space_count = 0, i;
    for (i = 0; str[i]; i++)
        if (str[i] == ' ')
            space_count++;

    // Remove trailing spaces
    while (str[i-1] == ' ')
    {
       space_count--;
       i--;
    }

    // Find new length.
    int new_length = i + space_count * 2 + 1;

    // New length must be smaller than length
    // of string provided.
    if (new_length > MAX)
        return -1;

    // Start filling character from end
    int index = new_length - 1;

    // Fill string termination.
    str[index--] = '\0';

    // Fill rest of the string from end
    for (int j=i-1; j>=0; j--)
    {
        // inserts %20 in place of space
        if (str[j] == ' ')
        {
            str[index] = '0';
            str[index - 1] = '2';
            str[index - 2] = '%';
            index = index - 3;
        }
        else
        {
            str[index] = str[j];
            index--;
        }
    }

    return new_length;
}

// Driver code
int main()
{
    char str[MAX] = "Mr John Smith   ";

    // Prints the replaced string
    int new_length = replaceSpaces(str);
    for (int i=0; i<new_length; i++)
        printf("%c", str[i]);
    return 0;
}` 
```

# maven-plugin - 爪哇 | Maven - 插件 | 是否建议在生产环境中使用 cargo maven 插件？

> ID：10007633
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:27.303
> 
> 标签：maven-plugin, tomcat7, production-environment, maven-cargo

目前我们有一个执行 maven build + tomcat deploy 的脚本。

部署到 tomcat 包括停止服务器（通过设置 CATALINA_PID 强制停止），从其 webapps 目录中删除 war 文件和分解的文件夹，将新的 war 文件复制到 webapps/ ，删除 tomcat 工作目录，最后启动服务器。

我们可以使用 cargo-maven2 插件实现所有/大部分这些（清理工作/webapps ??）[我有一个基本配置，可以用来停止、部署和启动]

**在生产**环境中也可以使用该插件吗？该文档提到它对集成**测试**很有用。

你们能分享一下你对此的看法吗？

谢谢，
加亚瑟里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:55:02.503

正如您在文档中已经提到的，Cargo 用于功能测试。对于生产，您应该使用其他东西，例如 puppet 或 chef。此外，Maven 不是部署工具，而是构建工具。从技术角度来看，当然可以在生产中使用它，但这不是有意的。

# c++ - 使用 new() 创建数组的所有成员时，它们都位于相同的内存位置

> ID：10007634
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:28.737
> 
> 标签：c++, pointers, new-operator

我在构造函数中创建了一个指向“Timeslot”对象的 7×7 指针数组，使用 new，如下所示：

```
Timeslot ***schedule;

Schedule::Schedule(void)
{
    schedule = new Timeslot**[DAYS]();
    for(int day = 0; day < DAYS; day++){
        schedule[day] = new Timeslot*[TIMESLOTS]();
        for(int time = 0; time < TIMESLOTS; time++){
            schedule[day][time] = new Timeslot();
        }
    }
} 
```

当我编辑一个时隙对象时，对所有对象都进行了更改。我试图用谷歌搜索这个问题，但我能找到的所有实例都是人们不使用`new`.

既然有人问我，我对传播到所有这些时间段对象的更改是我使用 Timeslot 类的方法在位掩码中标记了一点。

```
void Timeslot::book(int instructor){
    bitmask = bitmask | instructormasks[instructor];
} 
```

自从发布此问题以来，我发现是的，每个时隙对象都获得了自己唯一的内存地址，并且以某种方式在所有时隙中都标记了位掩码。我现在正在调查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:44:51.297

您在这里有缓冲区溢出：

```
for (int day = 0; day <= DAYS; day++)
    schedule[day] = // rest of code 
```

和这里

```
for(int time = 0; time <= TIMESLOTS; time++)
    schedule[day][time] = //rest of code 
```

这可能是您的问题的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:04:32.967

在我看来，当您需要 2D 数组时，您正在定义 3D 数组。

```
Timeslot ***schedule; // 3D array

schedule = new Timeslot**[DAYS]() // 2D array of 1D arrays? Or is it the other way around? 
```

我已经很多年没有使用 C 数组了，所以我不确定这会对你的初始化循环产生什么影响，但值得一看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T09:14:50.117

您的代码没有*技术*问题。没有缓冲区溢出等。显然，`operator new`除非它们被显式释放，否则应该为不同的对象返回不同的地址。

那么问题很可能出在您的其余代码中。

*   您是否使用标准堆 ( `new/delete`)？
*   是类`bitmask`的**非静态成员**吗`Timeslot`​​？

无论如何，您的代码有些过于复杂。如果您真的要“玩”它，即在运行时重新分配指针，或者故意使多个指针指向同一个对象，分配指针到指针到指针的数组很有用。如果您处理大型对象并且不想要求长的连续内存块，它也很有用。

但是你说你总共有 7x7 = 49 个物体，它们（据说）很小。然后只需使用一个“静态”数组：

```
Timeslot schedule[DAYS][TIMESLOTS]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:07:44.013

您有一个在构造函数`schedule`中初始化的全局变量。`Schedule`也许你正在做同样的事情`bitmask`。确保它`bitmask`是`Timeslot`.

# java - 如何创建类似于谷歌在线电子表格的网页？

> ID：10007638
> 
> 赞同：1
> 
> 时间：2012-04-04T08:39:46.960
> 
> 标签：java, open-source, spreadsheet

我需要创建一个与 Google 出色的 Docs 电子表格非常相似的网页，但就我而言，我无法使用他们的网页。此外，无需拥有 Google Docs 电子表格的完整功能集（这真的很大！）。但我的最小功能集是： - 更改、添加、删除单元格和内容 - 更改颜色、大小、字体等格式 - 函数 sum()、avg()、count() 我首选的工具是 JSP、tomcat、JQuery。服务器表示无关紧要，可以是 xml、文本、数据库表或 s.th 中的任何一种。别的。

我很确定，那里有完美的开放式解决方案——我可以用来开始——以满足我的要求，但我的问题是**找到**它们。搜索“Google 电子表格替代品”效果不佳。任何提示或链接表示赞赏。谢谢你。亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:45:31.690

看看[primefaces 表](http://www.primefaces.org/showcase/ui/sheet.jsf)。如果你喜欢 jQuery 并使用 JSP，你应该考虑学习 JSF 并使用 primefaces，因为 primefaces 已经大量使用 jQuery，这意味着如果你必须个性化其控件的行为，你已经看到了一个熟悉的界面。

Primefaces 表似乎提供了您正在寻找的东西，也就是说，类似于 excel 表的东西。

# jmock - 保存期望的返回值

> ID：10007640
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:50.743
> 
> 标签：jmock, expectations

我想使用期望的返回值来增加一个期望。我有一个 m_accountProcessor 对象，它具有接口 createAccount 来创建一个新帐户并返回一个 Account 对象。我想保存这个对象并将其添加到编码函数调用的另一个期望中。如何保存价值？

```
 m_context.checking(new Expectations() {{

        one(m_accountProcessor).createAccount(CUSTOMER_DETAILS);
        //How can I save the return value of createAccount's Account object
         one(m_accountProcessor).encode(/*AccountObject*/);
       }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:14:33.690

不要忘记，您不是在调用真实帐户处理器，而是在模仿它的行为。在测试中创建一个account对象，可以使用返回

```
will(returnValue(account)); 
```

子句，并期望将其传递回帐户处理器进行编码。

额外的问题，你为什么要从帐户处理器中取出一个对象，然后将它传回去进行编码？

# c# - 如何使用正则表达式在 td 标签之间获取文本

> ID：10007642
> 
> 赞同：0
> 
> 时间：2012-04-04T08:39:59.717
> 
> 标签：c#, html, regex

我想获取 td 标签之间的文本 html 页面..

以下是页面的html代码的一小段

> ```
>  <tr align="right"><td>989</td><td>Kristoffer</td><td>Shameka</td>
> 
>  <tr align="right"><td>990</td><td>Lazaro</td><td>Deirdre</td>
> 
>  <tr align="right"><td>991</td><td>Torey</td><td>Shantell</td>
> 
>  <tr align="right"><td>992</td><td>Bill</td><td>Cherish</td>
> 
>  <tr align="right"><td>993</td><td>Bruno</td><td>Linsey</td>
> 
>  <tr align="right"><td>994</td><td>Genaro</td><td>Hali</td>
> 
>  <tr align="right"><td>995</td><td>Waylon</td><td>Tarah</td>
> 
>  <tr align="right"><td>996</td><td>Brittany</td><td>Annemarie</td> 
> ```
> 
> . . . 等等。

我想使用正则表达式提取单个单元格值（例如：对于第一列 989、Kristoffer 和 Shameka）。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:45:34.500

无论输入的 HTML 是否总是具有正确且相同的结构，Regex 都不是您正在做的事情的最佳解决方案 - 因为 HTML 不是常规语言，Regex 可能是一个糟糕的解决方案，如此[处](https://stackoverflow.com/a/1732454/1583)所述。

如果您不能相信输入是相同的，您应该使用 HTML 解析器，如[HTML Agility Pack](http://htmlagilitypack.codeplex.com)，它可以处理格式错误的 HTML 并查询其对象模型。

如果您知道输入始终具有相同的格式，在这种情况下，使用您显示的输入，您可以并且应该使用[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)来解析出所需的值。

```
myHtmlString.Split(new []{@"<tr align=""right""><td>", "</td><td>", "</td>" },
                   StringSplitOptions.RemoveEmptyEntries) 
```

# ios - 在iOS中比较两个UIImage和CC_MD5，但是重启设备后哈希码会改变

> ID：10007645
> 
> 赞同：0
> 
> 时间：2012-04-04T08:40:10.530
> 
> 标签：ios, image, md5

我用过

```
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(inImage)];

CC_MD5(imageData, [imageData length], result); 
```

用于生成我的图片的**MD5**代码并将它们添加到**NSDictionary**以比较来自 photoLibrary 的图像。但是当我添加一些代码或重新启动我的设备时，我发现哈希码完全改变了。怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:47:38.553

你应该使用

```
NSData *imageData = [NSData dataWithContentsOfFile:file];
CC_MD5(imageData, [imageData length], result); 
```

那一定可以正常工作。

还可以考虑使用 sha1 作为基础算法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T08:45:26.277

PNG 文件格式允许在二进制数据中包含[时间戳。](http://www.libpng.org/pub/png/book/chapter11.html#png.ch11.div.2)每次调用都会有所不同`UIImagePNGRepresentation`。恐怕你不能用这种方式用MD5来比较两张图像的数据。尝试从文件中提取原始图像数据并生成原始数据的 MD5。

# android - 测试应用内购买托管产品

> ID：10007646
> 
> 赞同：4
> 
> 时间：2012-04-04T08:40:14.787
> 
> 标签：android, in-app-purchase, in-app-billing

我正在尝试在我的应用程序中测试托管产品。当我想在开发者控制台中添加托管产品时，它会询问价格。我无法将其设置为 0.00。当我想测试我的应用程序时，我不想为此付费。

有没有办法测试托管产品？我试过“android.test.purchased”，但它没有通过恢复事务恢复..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:04:18.857

我发现的唯一方法是将商品设置为最低价格并实际购买。

完成测试后，您可以退款。如果您在第一个小时左右退款，无论如何都不会从您的卡中扣除。

# php - fpdf 不支持的图像类型

> ID：10007649
> 
> 赞同：0
> 
> 时间：2012-04-04T08:40:19.753
> 
> 标签：php, iphone, image, jpeg, fpdf

我有这个消息错误：

> 不支持的图像类型：在此服务器上找不到图像路径。

我想用从 iphone 拍摄的 jpg 图像创建 pdf。不幸的是，这不起作用。刚刚看到图像路径，我可以从浏览器访问它。当我改变路径的方式是错误的。

代码示例

```
$pdf->Image('../firstParthPath/'.$_SESSION['environment'].'/secondParthPath'.$ImageName,null,$heigth,40,50); 
```

`$ImageName`例如`/image404-120404.jpg`。我已经测试了变量名。它有`/image404-120404.jpg`

`$heigth`是一个也被自动处理的变量。它始终具有所需的内容。

我试图用 0 替换 null

我尝试添加选项“JPG”。没有成功。

图片 [示例 http://imageshack.us/photo/my-images/72/image398120404.jpg/](http://imageshack.us/photo/my-images/72/image398120404.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:48:27.617

解决了。下一张图片是验证错误。现在问题解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:43:42.373

可能是 PHP 无法通过以“../”开头的相对路径来理解该位置。您可以尝试在脚本路径之前显式添加脚本路径，以确保 PHP 位于正确的位置：

```
(dirname(__FILE__) . '/../firstParthPath/'.$_SESSION['environment'].'/secondParthPath'.$ImageName,null,$heigth,40,50); 
```

# css - 如何制作渐变色的阴影框？

> ID：10007650
> 
> 赞同：0
> 
> 时间：2012-04-04T08:40:22.667
> 
> 标签：css, shadowbox

嗨，我尝试了很多时间，但我无法创建这个。我应该像下面这样的纯css图像，没有任何图像

![在此处输入图像描述](../Images/b0abb55bd2d902624e5b6be3b128270f.png)

现在我只想使用单个 div 。

感谢先进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:43:16.707

你可以尝试玩这个：

[css3gen](http://css3generator.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T09:16:39.810

看到你可以很容易地在css3中制作这个你可以使用之前和之后的伪类选择器来获得左右两侧的图像曲线，在中间你可以使用css3来获得阴影框和渐变色等......它会进来只有一个div。

我希望你明白我想向你解释什么......

请参阅演示以获得更好的理解：- [http://jsfiddle.net/4Y9D5/37/](http://jsfiddle.net/4Y9D5/37/)

# iphone - 如何构建一个安装在越狱 iPhone 上的 iphone 应用程序？

> ID：10007651
> 
> 赞同：1
> 
> 时间：2012-04-04T08:40:24.730
> 
> 标签：iphone, xcode, jailbreak

我是一名注册的苹果开发人员，我想在越狱的 iPhone 上安装我的应用程序。
我的问题是，如果我注册设备进行开发并创建配置报告和按照正常步骤构建的应用程序，我将能够在已破解的设备上安装应用程序。如果没有，请告诉我如何在越狱的 iPhone 上安装我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:43:56.870

您还可以使用 XCode 或 iTunes（正常方式）在越狱 iOS 设备上安装。越狱不会破坏您的 Xcode 安装/部署可能性。

# facebook-apps - 在 Facebook 发送对话框中限制 10 个好友

> ID：10007654
> 
> 赞同：0
> 
> 时间：2012-04-04T08:40:53.177
> 
> 标签：facebook-apps

有什么方法可以让用户在 Facebook 应用中只向 10 个朋友发送消息？我在文档中没有找到任何选项。 [https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:51:12.463

这是不可能的（截至 2013 年 4 月）。您可以使用 Facebook 用户名预先填充该`To:`字段，但用户会看到一个发送对话框，他仍然可以在其中编辑/添加/删除任何朋友（例如，他可以添加超过 10 个）。

# selenium - Selenium Grid 不在另一台计算机上运行 Chrome

> ID：10007658
> 
> 赞同：5
> 
> 时间：2012-04-04T08:41:09.483
> 
> 标签：selenium, webdriver, selenium-grid, selenium-chromedriver

我有这个问题。在不同的计算机上，我启动 HUB 和 NODE，然后运行我的测试，在其中初始化 Google Chrome，如下所示：

```
 Selenium selenium = new DefaultSelenium("localhost", 4444, *googlechrome, "http://www.google.com");
 DesiredCapabilities capabilities = DesiredCapabilities.chrome();
 capabilities.setCapability("chrome.switches", Arrays.asList("--start-maximized"));
 WebDriver  driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capabilities); 
```

在我的计算机上一切正常 - Chrome 出现并执行脚本。但是，如果我的朋友尝试做同样的事情，她会收到以下错误：

```
Exception in thread "main" org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.
Build info: version: 'unknown', revision: 'unknown', time: 'unknown'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_29'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:435)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:139)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:94)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:102)
    at com.deutscheboerse.test.PerfTests.<init>(PerfTests.java:52)
    at com.deutscheboerse.test.EUAStressTest.myTest(EUAStressTest.java:37)
    at com.deutscheboerse.test.EUAStressTest.main(EUAStressTest.java:60)
Caused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 4422; received: 3743
    at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:178)
    at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:197)
    at org.apache.http.impl.io.ContentLengthInputStream.close(ContentLengthInputStream.java:105)
    at org.apache.http.conn.BasicManagedEntity.streamClosed(BasicManagedEntity.java:152)
    at org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:237)
    at org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:186)
    at org.apache.http.util.EntityUtils.consume(EntityUtils.java:67)
    at org.openqa.selenium.remote.HttpCommandExecutor$EntityWithEncoding.<init> HttpCommandExecutor.java:399)
    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:287)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:415)
    ... 6 more 
```

到目前为止，我发现的唯一区别是，她的集线器正在监听`http://10.10.190.134:5555`我的监听，`http://10.131.7.44:5555`但两者都可以在相同的 IP 和端口上访问控制台。我不知道出了什么问题。一切都值得赞赏，谢谢

** 编辑 **

Iried 在另一台计算机上运行它，我遇到了同样的错误。小调试向我展示了这条消息：

```
11:04:01.899 WARN - Exception: The path to the chromedriver executable must be set by the webdriver.chrome.driver system property; for more information, see http://code.google.com/p/selenium/wiki/ChromeDriver. The latest version can be downloaded from http://code.google.com/p/chromedriver/downloads/list 
```

所以，在 Selenium Grid 中设置 Chrome 之前，我需要这样做：

```
System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, "chromedriver.exe"); 
```

我试图这样做，但仍然无法运行 Chrome ......仍然需要任何帮助

**EDID2** 这就是我准确设置属性的方式：

```
File file = new File("lib/chromedriver.exe");
System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, file.getAbsolutePath()); 
```

我使用这种方法是因为我需要在更多计算机上运行它，并且 JAR 文件可以有不同的位置。

顺便说一句，在角色节点中带有 Selenium Grid 的窗口中可以找到警告。我在想，如果有任何其他切换器。到目前为止，我正在运行这些命令：

```
java -jar lib//selenium-server-standalone-2.20.0.jar -role hub
java -jar lib/selenium-server-standalone-2.20.0.jar -role node  -hub http://localhost:4444/grid/register -maxSession 12

and then my JAR. The exception is in window with the NODE. Is there any switcher? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T07:41:06.307

经过一天的搜索，我有工作解决方案。一切都在于如何启动节点。所以首先，做通常的事情：

```
java -jar lib/selenium-server-standalone-2.20.0.jar -role hub 
```

然后像这样启动节点：

```
java -jar lib/selenium-server-standalone-2.20.0.jar -role webdriver -hub http://localhost:4444/grid/register -browser browserName="chrome",version=ANY,platform=WINDOWS,maxInstances=5 -Dwebdriver.chrome.driver=lib\chromedriver.exe 
```

更具体地说：您必须使用参数启动节点`browser`并添加`-D`指定 ChromeDriver 完整路径的参数

我非常感谢 John Naegle，他在 SO 上回答了关于 Internet Explorer 的类似问题 - 请参见[此处](https://stackoverflow.com/questions/9662241/selenium-is-not-able-to-launch-the-ie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:44:03.647

这很有趣，但是 webdriver 无法解析 dns，`http://localhost:4444/` 我编辑了我的主机文件，未注释的行：

127.0.0.1 本地主机

它已经完成了。

# sql - T-Sql 计算多行上的字符串序列

> ID：10007659
> 
> 赞同：4
> 
> 时间：2012-04-04T08:41:15.287
> 
> 标签：sql, gaps-and-islands

如何在 sql 中找到多行数据的子集？

我想在找到另一个字符串之前计算一个字符串（或数字）的出现次数，然后计算这个字符串在找到另一个字符串之前出现的次数。所有这些字符串都可以随机排列。

这就是我想要实现的目标：

我有一张表，其中有一列 ( `columnx`)，其中的数据如下：

```
A
A
B
C
A
B
B 
```

我想要的查询结果应该是这样的：

```
2 A
1 B
1 C
1 A
2 B 
```

这在 sql 中是否可能，或者仅仅编写一个小 C# 应用程序来做到这一点会更容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T05:14:40.453

因为，根据您的评论，您可以添加一个明确定义`columnx`值的顺序的列，您可以尝试以下查询（前提是您使用的 SQL 产品支持 CTE 和排名函数）：

```
WITH marked AS (
  SELECT
    columnx,
    sortcolumn,
    grp = ROW_NUMBER() OVER (                     ORDER BY sortcolumn)
        - ROW_NUMBER() OVER (PARTITION BY columnx ORDER BY sortcolumn)
  FROM data
)
SELECT
  columnx,
  COUNT(*)
FROM marked
GROUP BY
  columnx,
  grp
ORDER BY
  MIN(sortcolumn)
; 
```

您可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/3b7d0/3)查看该方法。

如果`sortcolumn`是保证没有间隙的自增整数列，您可以将第一个`ROW_NUMBER()`表达式替换为 just `sortcolumn`。但是，我想，这一般不能保证。此外，您可能确实希望按时间戳而不是整数进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:34:43.843

我不认为你可以用一个单一的选择来做到这一点。您可以使用 AdventureWorks 光标：

```
create table my_Strings
(
my_string varchar(50)
)

insert into my_strings values('A'),('A'),('B'),('C'),('A'),('B'),('B') -- this method will only work on SQL Server 2008

--select my_String from my_strings 

declare @temp_result table(
string varchar(50),
nr int)

declare @myString varchar(50)
declare @myLastString varchar(50)
declare @nr int

set @myLastString='A' --set this with the value of your FIRST string  on the table
set @nr=0

DECLARE string_cursor CURSOR
FOR 
SELECT my_string as aux_column FROM my_strings  

OPEN string_cursor
FETCH NEXT FROM string_cursor into @myString
WHILE @@FETCH_STATUS = 0 BEGIN
    if (@myString = @myLastString) begin
        set @nr=@nr+1
        set @myLastString=@myString
    end else begin
        insert into @temp_result values (@myLastString, @nr)
        set @myLastString=@myString
        set @nr=1
    end
    FETCH NEXT FROM string_cursor into @myString
END
insert into @temp_result values (@myLastString, @nr)
CLOSE string_cursor;
DEALLOCATE string_cursor;

select * from @temp_result 
```

结果：

```
A   2
B   1
C   1
A   1
B   2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:31:57.887

试试这个 ：

```
;with sample as (
    select 'A' as columnx
    union all
    select 'A'
    union all
    select 'B'
    union all
    select 'C'
    union all
    select 'A'
    union all
    select 'B'
    union all
    select 'B'
), data 
as (
select columnx,
  Row_Number() over(order by (select 0)) id 
  from  sample
  ) , CTE as (

        select * , 
  Row_Number() over(order by (select 0)) rno from data

  ) , result as (

     SELECT  d.*
                , ( SELECT  MAX(ID)
                    FROM    CTE c
                    WHERE   NOT EXISTS (SELECT * FROM CTE
                                        WHERE rno = c.rno-1 and columnx = c.columnx)
                            AND c.ID <= d.ID) AS g
        FROM    data d
  )

SELECT columnx,
       COUNT(1) cnt
FROM   result
GROUP  BY columnx,
          g 
```

结果 ：

```
columnx cnt
A         2
B         1
C         1
A         1
B         2 
```

# web-services - 类型错误：错误 #1010：Web 服务 as3 + wcf

> ID：10007667
> 
> 赞同：0
> 
> 时间：2012-04-04T08:41:27.113
> 
> 标签：web-services, api, actionscript-3, flash

我有一个简单的网络服务返回书籍的对象列表。我正在尝试将此集合与 aducentes Web 服务类一起使用，但出现类型错误：

> TypeError：错误＃1010：术语未定义且没有属性。

任何人都可以帮助将对象拉入数组并跟踪结果吗？

```
import alducente.services.WebService;
import flash.events.*;

var ws:WebService = new WebService();

ws.addEventListener(Event.CONNECT, connected);
ws.connect("http://localhost:8732/Design_Time_Addresses/TestService/Service1/?wsdl");

ws.cacheResults = true;

var initTime:Number;

function connected(evt:Event):void{
    // var books:Array=ws.IBookService.GetBooks();
    // trace(books[0]);
    var obj:Object=ws.IBookService.GetBooks();

    // var obj:Object=ws.IBookService.GetBooks();
    // trace(obj[0].toString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:09:45.577

只是想到了别的东西......在我不久前使用的 WebService 版本中，您必须为`resultHandler`每个方法调用指定一个函数：

```
function connected(evt:Event):void{
   ws.IBookService.GetBooks( getBooksResultHandler );
}

function getBooksResultHandler( resultXML : XML ) : void {
    doStuffWith(resultXML);
} 
```

结果将传递给您作为参数传递的处理程序。

# c++ - 是否可以将其分配给构造函数中的静态指针，如示例here

> ID：10007668
> 
> 赞同：0
> 
> 时间：2012-04-04T08:41:29.030
> 
> 标签：c++, static, constructor

为方便起见，我使用以下方法。即在一个更大的程序中访问同一个 myapp 实例的一种方便的方法。代码可以在我的机器上正确编译和运行，但想问是否有人发现这种方法有任何问题？

比如 this ptr 是在构造函数中赋值给 the_app 的？那样行吗？我担心的是对象仍在构建中。但是如果构造函数的最后一行那么好吗？还是因为它是一个指针所以没关系，因为只要在完全构造时使用就会指向完整对象？

```
#include <iostream>

using namespace std;

class myapp
{
public:
   myapp() : m_data(0)
   {
     the_app = this;
   }

   void DoIt() { cout << "doing it\n"; }

   static myapp* the_app;

private:
   int m_data;
};

myapp* myapp::the_app = 0;

int main(int argc, char* argv[])
{
myapp app;

    app.DoIt();  //doing it using member function

    myapp::the_app->DoIt();  //accessing using static ptr
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:01:34.783

如果您追求的是对类的单个实例的静态访问，那么您可能需要查看 [C++ Singleton 设计模式](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:50:18.993

这按预期工作。但是有几个问题：

*   当实例被删除时，析构函数应该将类变量设置回零。你没有写那个。
*   当创建另一个实例时，类变量会发生变化，这可能会导致第一个实例丢失......
*   这似乎不是一个好主意（只是我个人的印象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:47:05.550

不行：

```
{
   myapp app;
}
myapp::the_app->DoIt(); 
```

这将是非法的，`myapp::the_app`在这个阶段的悬空指针也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:47:19.607

如果您打算初始化它，那么不，您必须明确定义您的静态成员变量并[在那里初始化它们](http://msdn.microsoft.com/en-us/library/b1b5y48f.aspx)：

> 如果要显式初始化数据成员，则必须在定义中提供初始化程序

每个类只有一个，并且在所有对象之间共享。静态数据成员通过静态函数成员访问。

如果您不是要初始化，那么您需要考虑到您的类的每个新实例都会覆盖该值，并且您始终会创建最后一个指针。当您的类被破坏时 - 该指针可能会变得无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:47:38.123

我可以看到的问题：

1.  如果您将 myapp 子类化，则在分配指针时子类将不会完全构造。
2.  析构函数中没有清除静态指针，`myapp`因为您还没有编写一个。如果您的真实代码没有在`main()`.
3.  `myapp`多线程：如果您使用多线程，那么您会遇到问题，因为分配可能会在其余的初始化之前重新排序。根据平台的不同，分配指针也可能不是原子的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T09:11:47.710

正如其他人指出的那样，问题是：

*   可能会在某个时候创建​​一个新实例，意外替换您的 my_app 实例
*   当实例被销毁时，一个悬空指针仍然存在
*   当您从 my_app 派生时，会在完全构造对象之前分配指针。

您可以通过添加来缓解前两个问题

```
assert(the_app == NULL); 
```

给你的构造函数和

```
the_app = NULL; 
```

到你的析构函数。

想到的替代解决方案：

```
std::scoped_ptr<my_app> the_global_app; 
```

...如果您使用单个全局对象，您不妨承认您正在使用全局变量。在您的`main`功能中：

```
int main(int argc, char* argv[])
{
    the_global_app.reset( new myapp() ); // or a derived class

    the_global_app->DoIt();  //accessing using static ptr
    return 0;
} 
```

如果您不打算从 派生`myapp`，您甚至可能会想使用一个普通的全局变量：

```
myapp the_global_app;

int main(int argc, char* argv[])
{
    the_global_app.DoIt();  //accessing using static ptr
    return 0;
} 
```

...但是您需要注意，在不同源文件中定义的其他全局对象可能尚未初始化（`std::cout`但保证可用）。

# matlab - 在 Matlab 中的图像/矩阵上按角度绘制一条线

> ID：10007670
> 
> 赞同：1
> 
> 时间：2012-04-04T08:41:43.567
> 
> 标签：matlab, matrix, line, angle

我想在点 1 和点 2 之间画一条线，在图像或矩阵上也有一个角度（例如与 x 轴成 15 度）。我不只是想在图像上显示线条（与绘图一样）。我想实际更改像素值，以便我可以保存图像并在线条仍然存在的情况下重新加载它。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:19:01.827

*[如果您有图像处理工具箱，您可以使用函数imline()](http://www.mathworks.com/help/toolbox/images/ref/imline.html)*在任意两点之间绘制一条线（交互地或通过指定） 。然后，您可以使用*createMask()*保存该行。这将为您提供仅包含线条的二进制图像。然后，您可以轻松地减去、添加或更改原始图像中的像素并保存。

```
I = im2double(imread('pout.tif'));        %Read Image
imshow(I,[])
h = imline(gca,[10 100], [80 100]);       %Create line
Line = createMask(h);                     %Extract binary line
I = I + Line;                             %Add line to orignal image 
```

# mysql - sql有功能

> ID：10007680
> 
> 赞同：0
> 
> 时间：2012-04-04T08:42:17.377
> 
> 标签：mysql, sql, having-clause

嗨，我有以下 sql 语句，它为我提供了`first_name`每个员工一起完成的工作的总数和总数，但现在我想要一个员工`first_name`与`job_id`另一个工人一起做的工作，我总共有三个表

下面是我用来获取名字和工作总数的代码

```
SELECT first_name, COUNT(link.job_id) 
FROM employee, job, link 
WHERE  job.job_id = link.job_id 
AND employee.employee_id = link.employee_id 
GROUP BY first_name 
HAVING (COUNT(link.job_id) > 1 ) ; 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:52:53.107

这个怎么样：

```
SELECT first_name, COUNT(link.job_id) 
FROM employee, job, link 
WHERE  job.job_id = link.job_id 
AND employee.employee_id = link.employee_id
AND job.job_id IN (SELECT job_id FROM link GROUP BY job_id HAVING COUNT(*) > 1) 
GROUP BY first_name 
HAVING (COUNT(link.job_id) > 1 ) ; 
```

子查询将获取涉及一名以上员工的所有工作。

# wpf - 应该释放线程对象吗？C＃

> ID：10007682
> 
> 赞同：0
> 
> 时间：2012-04-04T08:42:21.620
> 
> 标签：wpf, c#-4.0

```
public partial class MainWindow : window
{
    private Thread t = new Thread;

    private void btnSend_Click(object sender, RoutedEventArgs e)
    {
        if (t != null)
        {
            if (t.IsAlive == true)
            {
                t.Abort();
                t = null; //Is this correct? should I free this before making null?
                return;
            }

            t = new Thread(send.Image);
            t.Start();    
        }
    }
} 
```

上面的代码显示了一个事件处理程序。当我按下一个名为“发送”的按钮时，应该创建新进程。当我单击同一个按钮时，进程应该停止。然后我将再次按“发送”，该过程应该重新开始。线程应该在同一个对象't'中创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:58:58.053

取消引用 Thread 的好处是您允许 GC 收集 Thread 类保存的任何数据，但是当您调用 Abort 时您会永久[停止线程。](http://msdn.microsoft.com/en-us/library/cyayh29d.aspx)由于线程类没有实现 IDisposable，因此无法确定性地释放该类持有的任何非托管资源，我们希望 Abort 能够做到这一点。

Thread 类的重量相当轻，除非您同时运行许多 MainWindows，否则它可能不会影响您的内存消耗。但是，如果您知道您将永远不会再次使用它们，最好取消引用您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:14:02.577

这样做在技术上是可以的，但你必须这样做：

```
private Thread t; // initially null
private void btnSend_Click(object sender, RoutedEventArgs e) 
{ 
    if (t != null) 
    { 
        t.Abort(); 
        t = null;
    }
    else
    {
        t = new Thread(send.Image); 
        t.Start();     
    } 
} 
```

此外，调用`Abort`.

[您可以改为以循环检查WaitHandle](http://msdn.microsoft.com/en-us/library/System.Threading.WaitHandle.aspx)的方式实现您的线程方法。这使线程能够以受控方式终止：

```
private Thread t; // initially null
private AutoResetEvent waitHandle = new AutoResetEvent(false);

private void btnSend_Click(object sender, RoutedEventArgs e) 
{ 
    if (t != null) 
    { 
        waitHandle.Set(); // signal thread termination
        t = null;
    }
    else
    {
        t = new Thread(ThreadMethod); 
        t.Start();     
    } 
} 

private void ThreadMethod()
{
    TimeSpan waitTime = TimeSpan.FromSeconds(1);
    while (!waitHandle.WaitOne(waitTime))
    {
        // do something
    }
} 
```

# php - kohana：消除对默认控制器路由的需求

> ID：10007686
> 
> 赞同：0
> 
> 时间：2012-04-04T08:43:00.483
> 
> 标签：php, routing, kohana

我有一条路线：

`((?<directory>\w+)/?)?((?<controller>\w+)/?)?((?<action>\w+)/?)?((?<id>\d+))?`

它工作正常，但它导致我的系统必须为子路由的所有路由包含默认控制器（索引）。例如，如果我的页面 URI 是`/blog/post`（其中 blog 是目录，而 post 是操作），我的实际 URI 必须是`blog/index/post`- 我希望能够退回到仅使用`blog/post`。

所以，我希望它被路由到：

```
directory = blog
controller = index
action = post 
```

显然，当第二个参数实际上是控制器时，这会导致问题。例如`directory/controller/action`会被错误地路由。

有没有路由方法检测三个字参数，后面可能跟一个数字参数，可以做我需要的吗？

澄清：

*   `param/param/param(?/id)`将会：`directory/controller/action(/id)`
*   `param/param(?/id)`将会：`directory/default_controller/action(/id)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:42:07.183

我实际上认为您想使用`blog/index/post`别名`blog/post`；将其作为路线插入您拥有的“全能”路线之前；“一只大鞋适合所有人”的方法并不总是最好的。特别是，*如果*您只有 1 个这样的特定用例。

**编辑：**

“kohana 的路由系统”令人生畏；无法理解他们试图在那里生下的大象......这里有一些其他建议：

1.  将此问题提交给制造商；这绝对是一个常见问题解答
2.  乱用正则表达式模式。这是一个可能有用的片段（我将它放在 PHP 测试用例中，但您可以轻松地将其解耦）

    ```
    public function testRoutePatterns(){
        $data = array(
        array(
            //most specific: word/word/word/id
            '~^(?P<directory>\w+)/(?P<controller>\w+)/(?P<action>\w+)/(?P<id>.*)$~i', 
            'myModule/blog/post/some-id',
            array('directory'=>'myModule', 'controller'=>'blog', 'action'=>'post', 'id'=>'some-id'), 
            true
        ),
        array(
            //less specific: word/word/id
            '~^(?P<directory>\w+)/(?P<action>\w+)/(?P<id>.*)$~i', 
            'blog/post/some-id',
            array('directory'=>'blog', 'action'=>'post'), //need to inject "index" controller via "defaults()" here i guess
            true
        ),
        );
    foreach ($data as $d) {
        $matches = array();
        list($pattern, $subject, $expected, $bool) = $d;
        $actual = (bool) preg_match($pattern, $subject, $matches);
        $this->assertEquals($bool, $actual); //assert matching
        $this->assertEquals(array(), array_diff($expected, $matches)); //$expected contained in $matches
     }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:28:42.500

As explained on [this answer](https://stackoverflow.com/questions/3884255/kohana-3-routing-with-subdirectories-error-controller-does-not-exist), if you have some route like this:

```
Route::set('route_name', 'directory/controller/action')
    ->defaults(array(
        'directory'  => 'biz',
        'controller' => 'foo',
        'action'     => 'bar',
    )); 
```

You should have the directory structure like this:

```
/application/classes/controller/biz/foo.php 
```

# c#-4.0 - 无法将 lambda 表达式转换为类型“int”，因为它不是委托类型

> ID：10007687
> 
> 赞同：0
> 
> 时间：2012-04-04T08:43:03.103
> 
> 标签：c#-4.0

在这个 c# 代码中，我需要将 userName 值从 string 转换为 int 类型。有谁知道请帮帮我。我收到错误作为编译错误“无法将 lambda 表达式转换为类型'int'，因为它不是委托类型”，就像这样。

```
 ShoppingCartPartRecord cartRecord = null;
        try {
            cartRecord = _shoppingCartRepository.Get(r => r.Username == userName);
        }
        catch (InvalidOperationException ex) {
            if (ex.Message == "Sequence contains more than one element") {
                var badCarts = _shoppingCartRepository.Table.Where(x => x.Username == userName);
                foreach (var shoppingCartPartRecord in badCarts) {
                    _shoppingCartRepository.Delete(shoppingCartPartRecord);
                }
            }
        } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:30:59.593

如果没有您的存储库的源代码，我们只能猜测这些方法的作用。

从您描述的错误中，get 函数需要数组的索引或整数主键，因此错误的函数也是如此

您应该可以按如下方式更改代码以达到预期的效果

```
 ShoppingCartPartRecord cartRecord = null; 
    try { 
        cartRecord = _shoppingCartRepository.Table.Single(r => r.Username == userName); 
    } 
    catch (InvalidOperationException ex) { 
        if (ex.Message == "Sequence contains more than one element") { 
            var badCarts = _shoppingCartRepository.Table.Where(x => x.Username == userName); 
            foreach (var shoppingCartPartRecord in badCarts) { 
                _shoppingCartRepository.Delete(shoppingCartPartRecord); 
            } 
        } 
    } 
```

# bash - 我在这里对 awk、sed 等感到困惑

> ID：10007690
> 
> 赞同：5
> 
> 时间：2012-04-04T08:43:05.193
> 
> 标签：bash, sed, awk

我正在尝试一段时间来解决这个问题，但到目前为止没有成功我有一个命令输出，我需要咀嚼它以使其适合进一步处理

我的文字是：

```
1/2 [3] (27/03/2012 19:32:54) word word word word 4/5 
```

我需要的是只提取数字 1/2 [3] 4/5 所以它看起来：

```
1 2 3 4 5 
```

所以，基本上我试图排除所有不是数字的字符，比如“/”、“[”、“]”等。我用 FS 尝试了 awk，尝试使用 regexp，但我的尝试都没有成功。

然后我会在其中添加一些内容，例如 first:1 second:2 third:3 .... 等等 请记住，我说的是一个包含很多 if 行的文件，如果行具有相同的结构，但我已经考虑过使用awk 对每一列求和

```
awk '{sum1+=$1 ; sum2+=$2 ;......etc} END {print "first:"sum1 " second:"sum2.....etc}' 
```

但首先我只需要提取相关数字，“（）”之间的日期可以完全省略，但它们也是数字，因此仅按数字过滤是不够的，因为它也会匹配它们

希望你能帮助我提前谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:55:44.127

这：`sed -r 's/[(][^)]*[)]/ /g; s/[^0-9]+/ /g'`应该工作。它进行了两次传递，首先删除带括号的表达式，然后用单个空格替换所有非数字运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:52:29.443

你可以做类似的事情`sed -e 's/(.*)//' -e 's/[^0-9]/ /g'`。它会删除圆括号内的所有内容，而不是用空格替换所有非数字字符。要摆脱多余的空间，您可以将其提供给`column -t`：

```
$ echo '1/2 [3] (27/03/2012 19:32:54) word word word word 4/5' | sed -e 's/(.*)//' -e 's/[^0-9]/ /g' | column -t
1  2  3  4  5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:52:48.420

发射器：

```
@(collect)
@one/@two [@three] (@date @time) @(skip :greedy) @four/@five
@(filter :tonumber one two three four five)
@(end)
@(bind (first second third fourth fifth)
       @(mapcar (op apply +) (list one two three four five)))
@(output)
first:@first second:@second third:@third fourth:@fourth fifth:@fifth
@(end) 
```

数据：

```
1/2 [3] (27/03/2012 19:32:54) word word word word 4/5
10/20 [30] (27/03/2012 19:32:54) word word 40/50 
```

跑：

```
$ txr data.txr data.txt
first:11 second:22 third:33 fourth:44 fifth:55 
```

容易添加一些错误检查：

```
@(collect)
@  (cases)
@one/@two [@three] (@date @time) @(skip :greedy) @four/@five
@  (or)
@line
@  (throw error `badly formatted line: @line`)
@  (end)
@  (filter :tonumber one two three four five)
@(end)
@(bind (first second third fourth fifth)
       @(mapcar (op apply +) (list one two three four five)))
@(output)
first:@first second:@second third:@third fourth:@fourth fifth:@fifth
@(end)

$ txr data.txr -
foo bar junk
txr: unhandled exception of type error:
txr: ("badly formatted line: foo bar junk")
Aborted 
```

TXR 用于健壮的编程。有强类型，所以你不能仅仅因为字符串包含数字就将它们视为数字。变量必须在使用前绑定，因此拼写错误的变量不会默认为零或空白，而是会产生`unbound variable <name> in <file>:<line>`类型错误。使用大量特定上下文执行文本提取，以防止将一种格式的输入误解为另一种格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:52:41.053

见下文，如果这是你想要的：

```
kent$  echo "1/2 [3] (27/03/2012 19:32:54) word word word word 4/5"|sed -r 's/\([^)]*\)//g; s/[^0-9]/ /g'
1 2  3                       4 5 
```

如果你想让它看起来更好：

```
kent$  echo "1/2 [3] (27/03/2012 19:32:54) word word word word 4/5"|sed -r 's/\([^)]*\)//g; s/[^0-9]/ /g;s/ */ /g'
 1 2 3 4 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:53:26.230

这将为您提供提取的数字，不包括括号中的文本：

```
digits=$(echo '1/2 [3] (27/03/2012 19:32:54) word word word word 4/5' |\
       sed 's/(.*)//' | grep -o '[0-9][0-9]*')
echo $digits 
```

或纯 sed 解决方案：

```
echo '1/2 [3] (27/03/2012 19:32:54) word word word word 4/5' |\
sed -e 's/(.*)//' -e 's/[^0-9]/ /g' -e 's/[ \t][ \t]*/ /g' 
```

**输出：**

```
1 2 3 4 5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T08:57:05.110

```
 awk '{ first+=gensub("^([0-9]+)/.*","\\1","g",$0)
        second+=gensub("^[0-9]+/([0-9]+) .*","\\1","g",$0)
        thirdl+=gensub("^[0-9]+/[0-9]+ \[([0-9]+)\].*","\\1","g",$0)
        fourth+=gensub("^.* ([0-9]+)/[0-9]+ *$","\\1","g",$0)
        fifth+=gensub("^.* [0-9]+/([0-9]+) *$","\\1","g",$0)
      }
      END { print "first: " first " second: " second " third: " third " fourth: " fourth " fifth: " fifth
      } 
```

可能对你有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T11:12:04.563

如果您设置了一个花哨的字段分隔符，则使用 awk 一次就足够了：斜线、空格、左括号或右括号中的任何一个都可以分隔一个字段：

```
awk -F '[][/ ]' '
  {s1+=$1; s2+=$2; s3+=$4; s4+=$(NF-1); s5+=$NF}
  END {printf("first:%d second:%d third:%d fourth:%d fifth:%d\n", s1, s2, s3, s4, s5)}
' 
```

# java - 从数据存储中读取的两种方法

> ID：10007696
> 
> 赞同：0
> 
> 时间：2012-04-04T08:43:18.790
> 
> 标签：java, google-app-engine, database-design, eclipse-plugin

我尝试以两种不同的方式从数据存储中读取数据，因此我想读取最后 5 个对象以及所有对象。但我发现了这个错误：

```
List cannot be resolved
90: String query = "select from " + Greeting.class.getName() + " order by date desc range 0,1";
91: String query3 = "select from " + Greeting.class.getName();
92: List<Greeting>greetings =(List<Greeting>)
93: List<Greeting>greetings2 =(List<Greeting>)
94: 
95: pm.newQuery(query).execute();
96: pm.newQuery(query3).execute(); 
```

# python - Python libmysqlclient 段错误（MySQLdb）

> ID：10007699
> 
> 赞同：1
> 
> 时间：2012-04-04T08:43:30.323
> 
> 标签：python, mysql-python, libmysql, python-db-api

我正在 MySQLdb 上编写一个 SQL 包装器。

在执行过程中的某个时候，我在 DMSG 中收到以下错误并且进程崩溃：

```
python[xxx]: segfault at c8 ip 00007fa1add6b882 sp 00007fa1abb77c60 error 4 in 
libmysqlclient_r.so.16.0.0[7fa1adcd7000+1d0000] 
```

我该如何调试这个故障？以前有人遇到过这种错误吗？该错误显然不在脚本中，但我假设我正在执行一些错误的调用，这些调用会触发客户端中的该错误。

关于如何解决它的任何建议？

Python 2.6.6 和 libmysqlclient.so.16.0.0 在 Debian 6.0 上运行

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:52:58.133

这里没有足够的信息来解决您的问题。但是，如果您使用线程，请为每个线程提供它自己的连接对象；不要尝试在线程之间共享它们。在这种情况下，这是最可能导致段错误的原因。

# css - CSS文本溢出错误？在谷歌浏览器中

> ID：10007700
> 
> 赞同：2
> 
> 时间：2012-04-04T08:43:33.160
> 
> 标签：css, google-chrome, overflow

我正在使用 PHP、MySQL、CSS、HTML 和一些脚本语言从头开始创建我的第一个站点。这是一个约会网站。对不起我的英语不好，但这不是我的母语。我找到了解决我遇到的所有其他问题/问题的方法。但当我开始测试跨浏览器兼容性时，Chrome 中出现了一个奇怪的错误。该网站在这里[http://www.writech.net.ee/testsite](http://www.writech.net.ee/testsite/index.php?id=naine_meest)

该网站的想法是，每个想要与某人约会的人都可以用他/她的联系数据和描述填写表格并提交。每个广告都显示为浮动 div。这些 div 向左浮动。div 的高度是固定的，所以如果有人写了更长的描述并且它不适合 div，则会出现滚动条。应该包含描述文本的 div 用 1px 红色边框勾勒出来。
广告 div 在 IE9 和 Firefox 11 中是可以的，但在 Chrome 中，文本过多的 div 不适合应该应用“溢出：自动”以显示垂直滚动条的 div，出于某种原因，与其他 div 相比，它呈现到升高的位置。起初我认为问题与出现滚动条有关，尝试“溢出：隐藏” - 溢出：隐藏隐藏过多的文本，但与其他 div 相比，div 仍然显得升高。所以问题与 div 包含多少文本有关。
由于我之前没有跨浏览器适配的经验，我不知道该去哪里看，该做什么。有人对尝试哪些 CSS hack 有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:55:11.457

不得不说我觉得发生这种情况有点奇怪，但是如果你将es的`vertical-align`属性设置为它就可以了：.`.box``top``.box {vertical-align: top}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:24:08.343

我以前也遇到过类似的问题，float:left 解决了这个问题。您可以使用相同的解决方案，但您必须更改包含框的 div 的居中方式。我设法让它在 Macbook 上的 Chrome 中看起来正确（当然，你可以将样式移动到你的 CSS 文件中）：

```
<div style="margin-left: auto; margin-right: auto; width: 1080px;">
  <div class="box" display="float:left">
    ...
  </div>
  <div class="box" display="float:left">
    ...
  </div>
  ...
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:52:03.430

您可以尝试在 .box 类上应用块显示（它是 inline-block atm），并在其上抛出一个 float:left 。（第 324 行）

# javascript - 这个 jQuery AJAX 请求有什么问题？

> ID：10007703
> 
> 赞同：1
> 
> 时间：2012-04-04T08:43:42.417
> 
> 标签：javascript, jquery, ajax, json

我的 jQuery.ajax() 函数不起作用.. 我想显示来自服务器的 JSON 数据.. 请求成功，我通过 Firebug 发现。当我在“成功”标签中删除*功能（数据）{*时，警报会触发，当功能保留时，它不会..顺便说一句：请求总是成功，当用户名和密码错误时，怎么可能? 但是当我删除*xhr.setRequestHeader()*方法时，Firebug 显示由于服务器需要基本身份验证，调用以“未经授权”结束。

有什么建议可以解决这个问题吗？提前致谢！

我的javascript“gadget.js”

```
$.ajax({
    url: "http://localhost:8387/nscalemc/rest/mon/resourcestatus.json",
    type: "GET",
    dataType: "json",
    contentType: "application/json",
    beforeSend: function(xhr) {
        var base64 = btoa('admin' + ":" + 'admin');
        xhr.setRequestHeader("Authorization", "Basic" + base64);
    },
    success: function(data) {
        $(data.groupStatus).each(function() {
            $("body").append("<p>ID: " + this.id + "</p>");
        });
        alert("success!");
    }
}).done(function(data) {
    alert("done!");
    $(data.groupStatus).each(function() {
        $("body").append("<p>ID: " + this.id + "</p>");
    });
}).fail(function(jqXHR, textStatus) {
    alert("fail - " + textStatus);
});​ 
```

这是我的 JSON

```
{
    "groupStatus": [
        {
            "id": "Application Layer Configuration-ApplicationLayer",
            "time": 1332755316976,
            "level": 0,
            "warningIds": [],
            "errorIds": []
        },
        {
            "id": "Application Layer-ApplicationLayer:nscalealinst2",
            "time": 1333431531046,
            "level": 0,
            "warningIds": [],
            "errorIds": []
        }
    ]
} 
```

最后是我的 HTML 类“gadget.html”：

```
<html>
<head>
    <title>My Gadget</title>
    <link href="css/gadget.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
</head>
<body>
    <div id="content"></div>
    <script type="text/javascript" src="js/gadget.js"></script>
</body> 
```

为什么我的id没有显示？

*顺便说一句： .done(function(){})*和*"success: (function(){})*有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:47:47.103

我会回答我所知道的：文档中有一条关于 done() 和 success() 之间区别的注释：

> **弃用通知**：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

如果您使用 JSON，则可以使用 getJSON() 而不是 ajax()。希望能帮助到你！。

# javascript - 与其他浏览器相比，Firefox 中通过 Javascript 计算的文档宽度不同

> ID：10007704
> 
> 赞同：1
> 
> 时间：2012-04-04T08:43:42.887
> 
> 标签：javascript, jquery, firefox

我从 Mozilla Firefox 检索当前页面文档宽度时遇到问题。其余浏览器报告文档的正确宽度，而 Firefox 报告较小的宽度（例如：在 1920x1080 IE 的屏幕分辨率下，Chrome 和 Safari 报告 1920 而 Firefox 报告 1903）。

我在 $(document).ready(function() { ... }); 中使用文档宽度 重新定位 div 元素。有趣的是，在此函数中使用 alert() 后，元素重新定位正确，尽管文档大小仍然小于其他浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:50:25.427

正如萨尔曼在评论中已经指出的那样，这种差异来自滚动条。根据浏览器（可能还取决于是否启用了 quirks 模式），滚动条可能被认为是“在”文档“外部”（在这种情况下，它的宽度不会添加到文档宽度中）或`<html>`元素的一部分（然后是它的宽度将添加到文档宽度）。所以`document.documentElement.offsetWidth`会返回不一致的结果——有时有滚动条，有时没有滚动条。`document.body.offsetWidth`另一方面，跨浏览器似乎一致 - 不包括滚动条宽度。

如果您想学习的是视口宽度，而不管内容如何，​​那么[`window.innerWidth`](https://developer.mozilla.org/en/DOM/window.innerWidth)可能是一个更好的选择。我在 Firefox、Chrome 和 MSIE 9.0 中进行了测试——它返回了所有这些窗口中最大化窗口的全屏宽度。

# struts2 - Struts2 JMS 请求处理长时间运行的过程

> ID：10007706
> 
> 赞同：1
> 
> 时间：2012-04-04T08:43:45.187
> 
> 标签：struts2, jms, long-running-processes

我有一个 Struts2 Action 类，它为 JMS 队列中的贸易列表放置一个 JMS Fetch 请求。此 JMS Fetch 消息由外部进程处理，可能需要几秒钟甚至几分钟，具体取决于外部任务处理应用程序要处理的交易文件的数量。

我想知道如何用适当的响应来处理这个 HTTP 请求。客户是否等到交易列表返回？**（客户端（UI）必须对其采取行动，同时无事可做）。**

我接近它的方式是 HTTP Request --> Struts2 Action -->

1.  调用 Runnable 以在单独的线程中运行（与 Action 类分开）
2.  界面等待
3.  动作类线程休眠直到可运行它的工作
4.  任务完成后，将交易列表返回给 UI

流程如下：

1.  将 JMS 获取请求放在 Queue1 上
2.  Runnable 的 ExecutorService

    ```
    CClass cclass = new CClass();
    final ExecutorService execSvc = Executors.newFixedThreadPool(1);
    execSvc.execute(cclass); 
    ```

CClass 实现 runnable 返回交易列表的地方：

```
List<Trade> tradesList = new ArrayList<Trade>();

@Override
public void run() {

    while (true) {
        try {
            Message message = msgConsumer.receive();  // SYNCHRONOUS / NO MDB
            if (message == null){
                break;
            }
            if (message instanceof TextMessage) {
                TextMessage txtMessage = (TextMessage) message;
                Trade trade = TradeBuilder.buildTradeFromInputXML(txtMessage);
                if (trade != null) {
                    tradesList.add(trade);   // tradeList is a CClass class variable 
                }
            }
        } catch (JMSException e) {
            logger.error("JMSException occurred ", e);
        }
    }
    closeConnection();
} 
```

当这个runnable正在执行时，我在Action类中做了一个Thread.sleep（让Runnable在单独的线程中执行）

```
 // In Action class    
  try {
        Thread.sleep(5000); // some time till when the runnable will get executed
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    execSvc.shutdown(); 
```

问题是如果我将 Callable 与 FutureTask 一起使用并执行 get() ，那将一直阻塞，直到返回任何结果。如果我执行 Runnable，我必须让 Action 类 Thread 进入休眠状态，直到 runnable 执行并且 tradeList 可用。

使用 Runnable 方法，我能够将几百条记录返回给 UI，在主 Action 类中提供 5 秒的 Thread.sleep()，但当要获取数千条记录并在 UI 中显示时，只能部分构建 tradeList。

**这显然不是万无一失的方法。**

有什么更好的建议方法吗？请在一个完整的请求 - 响应流中阐明处理步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:01:40.510

是的，在发出标准 HTTP 请求时有一种更好的方法（使用 ajax 你可以做其他事情）。

您想查看 Struts2[执行和等待拦截器](https://web.archive.org/web/20120414014438/http://struts.apache.org:80/2.3.1.2/docs/execute-and-wait-interceptor.html)，它具有您已经实现的大部分功能。还要查看令牌拦截器......这可能很有用（它可以防止重复请求，但没有像 exec 和 wait 那样提供快乐的等待屏幕）。

# c# - 将数组作为 JSON 发布到 MVC 控制器

> ID：10007722
> 
> 赞同：17
> 
> 时间：2012-04-04T08:45:18.250
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-4

我一直在努力寻找解决这个问题的方法。

在我的代码中，我正在构建一个对象数组；

```
var $marks = [];

var mark = function ( x, y, counter ){
    this.x = x;
    this.y = y;
    this.counter = counter;
}

$marks.push(new mark(1, 2, 0));   
$marks.push(new mark(1, 2, 1));
$marks.push(new mark(1, 2, 2)); 
```

现在我想将此数据发布到 MVC 控制器，所以我认为控制器中的数据类型将是`List<Mark> Marks`Marks 或数组。

要发布数据，我已经尝试过；

```
var json = JSON.stringify($marks);
$.post('url', json).done(function(data){ /* handle */ }); 
```

或者

```
var json = { Marks: $marks };
$.post('url', json).done(function(data){ /* handle */ }); 
```

第二种方式，在查看发布的数据时，看起来像这样

```
Marks[0][x]: 1
Marks[0][y]: 2
Marks[0][counter]: 0
Marks[0][x]: 1
Marks[0][y]: 2
Marks[0][counter]: 1
Marks[0][x]: 1
Marks[0][y]: 2
Marks[0][counter]: 2 
```

但我不确定如何将其转换为控制器中的强类型对象？

我的控制器看起来像这样；

```
[HttpPost]
public ActionResult JsonSaveMarks(List<Mark> Marks){
    // handle here
} 
```

我的 Mark 课是这样的；

```
public class Mark{
     public string x { get; set; }
     public string y { get; set; }
     public string counter { get; set; }
} 
```

我已经阅读了有关创建自定义[JsonFilterAttribute](https://stackoverflow.com/questions/320291/how-to-post-an-array-of-complex-objects-with-json-jquery-to-asp-net-mvc-control)或使用[System.Web.Script.Serialization.JavaScriptSerializer](https://stackoverflow.com/questions/760249/post-an-array-of-complex-objects-with-json-jquery-to-asp-net-mvc-controller)类的其他类似问题，但我无法工作

我在这里有什么明显的遗漏吗？我把控制器中的 DataType 弄错了吗？如何将发布的这些数据转换为强类型对象？

非常感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T09:01:30.327

`$.post()`不允许您设置 AJAX 调用的内容类型 - 您可能会发现（如果您使用 Fiddler）您的 Json 字符串正在发送的内容类型为“application/x-www-form-urlencoded”（默认设置）然后导致 Asp.Net MVC 错误地解释您的数据包。

您可以尝试`$.ajax()`改用，并将内容类型设置为“application/json”吗？

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-04T09:17:59.433

@SteveHobbs 在这里有正确的答案。另一方面，您应该`JSON.stringify`像以前一样使用 JavaScript 有效负载。如果您以另一种方式执行此操作，则会在反序列化传入的数据时收到一个异常，告诉您*“无效的 JSON 原语”*之类的信息。

这是您的样品的完整解决方案：

```
$.ajax({

    url: '/home/index',
    type: 'POST',
    data: JSON.stringify($marks),
    dataType: 'json',
    contentType: 'application/json',
    success: function (data, textStatus, jqXHR) {
        console.log(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-10T07:17:43.803

这段代码解决了我的问题：

C# 类：

```
public class MediaAccountContent
{
    public Guid IdMedia { get; set; }
    public string Value { get; set; }

}

public class User
{
    public string Firstname { get; set; }
    public string Lastname { get; set; }
    public List<MediaAccountContent> MediaAccountContents { get; set; }
} 
```

MVC 动作：

```
public ActionResult SavePlace(User user)
{

    return Content("OK");
} 
```

Javascript：

```
 var mediaAccountsJson = [];

    for (var i = 0; i < 10; i++)
    {
        mediaAccountsJson.push({
            IdMedia: i,
            Value: "AAA" + i
        });

    }

    var datatItem =
    {
        Firstname: "Test Firstname",
        Lastname: "Test Lastname",
        MediaAccountContents: mediaAccountsJson
    };

    $.ajax({
        type: "POST",
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify(datatItem),
        url: urlAction,
        success: function (status) {

        }
    }); 
```

为您的场景进行所需的更改并享受！:)

# opencv - 如何使用openCV分离彩色图像中像素的BGR分量

> ID：10007723
> 
> 赞同：0
> 
> 时间：2012-04-04T08:45:19.370
> 
> 标签：opencv

由于每个像素内存包含蓝色、绿色和红色每个分量的 8 位。那么如何将这些组件从图像或图像矩阵中分离出来。As int Blue = f(Image(X,y));// (x,y) = Image 像素的坐标，同样适用于红色和绿色。那么函数 f 和 2D 矩阵图像应该是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:53:59.273

首先，您必须了解 OpenCV 的基础知识，并将注意力转向图像处理的其他部分。您要求的内容非常基本，假设您将使用 OpenCV 2.1 及更高版本，

```
cv::Mat img =  Read the image off the disk or do something to fill the image. 
```

访问 RGB 值

```
img.at<cv::Vec3b>(x,y); 
```

但是会给出相反的值，即 BGR。所以请务必注意这一点。基本上是访问的 cv::Vec3b 类型。

```
img.at<cv::Vec3b>(x,y)[0];//B
img.at<cv::Vec3b>(x,y)[1];//G
img.at<cv::Vec3b>(x,y)[2];//R 
```

或者

```
Vec3f pixel = img.at<Vec3f>(x, y);

int b = pixel[0];
int g = pixel[1];
int r = pixel[2]; 
```

现在将图像拆分为 RGB 通道，您可以使用以下命令

现在到 OpenCV 的原始 C 风格（支持 C 和 C++ 风格）你可以使用 cvSplit 函数

```
IplImage* rgb = cvLoatImage("C://MyImage.bmp");

//now create three single channel images for the channel separation
IplImage* r = cvCreateImage( cvGetSize(rgb), rgb->depth,1 );
IplImage* g = cvCreateImage( cvGetSize(rgb), rgb->depth,1 );
IplImage* b = cvCreateImage( cvGetSize(rgb), rgb->depth,1 );

cvSplit(rgb,b,g,r,NULL); 
```

[OpenCV 2 CookBook](http://cv%3a%3aMat%20image%20=%20...do%20some%20stuff...;%20image.at%3Ccv%3a%3aVec3b%3E%28x,y%29;%20gives%20you%20the%20RGB%20%28it%20might%20be%20ordered%20as%20BGR%29%20vector%20of%20type%20cv%3a%3aVec3b%20%20image.at%3Ccv%3a%3aVec3b%3E%28x,y%29%5B0%5D%20=%20newval%5B0%5D;%20image.at%3Ccv%3a%3aVec3b%3E%28x,y%29%5B1%5D%20=%20newval%5B1%5D;%20image.at%3Ccv%3a%3aVec3b%3E%28x,y%29%5B2%5D%20=%20newval%5B2%5D;)是关于 OpenCV 的最佳书籍之一。会帮到你很多。

# javascript - Javascript时间函数

> ID：10007728
> 
> 赞同：0
> 
> 时间：2012-04-04T08:45:34.473
> 
> 标签：javascript, datetime

我想在我的网页中使用 javascript 来打印时间，例如

上午 8 点 40 分

山地时间

如何修改 Date() 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:53:50.673

试试这个

[http://www.pageloom.com/automatic-timezone-detection-with-javascript](http://www.pageloom.com/automatic-timezone-detection-with-javascript)

# java - Quartz CronTrigger 在错误的日期/时间执行作业

> ID：10007730
> 
> 赞同：0
> 
> 时间：2012-04-04T08:45:39.860
> 
> 标签：java, quartz-scheduler, cronexpression

我正在使用以下 cron 表达式在每个星期五的指定时间执行作业（在下面的示例中是下午 1:13）。

```
0 13 13 ? * FRI 
```

所以预期的行为应该是如果我在星期五以外的任何一天初始化这个触发器，那么它应该直到下星期五才开始执行。但是在我的情况下发生的情况是，即使我今天初始化了这个触发器（因为今天是星期三），它也会立即开始执行作业。

相关java源码：

```
CronTrigger cronTrigger = new CronTrigger("trigger_" + groupName, groupName, cronExpression);
cronTrigger.setStartTime(startDate); //startDate = 1-Mar-2012
cronTrigger.setEndTime(endDate);     //endDate   = 30-Apr-2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:20:25.050

您的问题是配置 startTime。startTime 是指应该发生触发器的时间。由于日期较旧，这会导致调度程序失火，默认行为是调度程序立即重新触发。

移除 setStartTime，默认行为是将 startTime 设置为当前时间，第一个触发时间将匹配到开始时间之后的 cron 触发器，所以这个星期四。

我通过一起快速的小测试来验证：

```
public class Test {
    public static void main(String[] args) throws ParseException, SchedulerException {
        String groupName = "group";
        String cronExpression = "0 13 13 ? * THUR";

        CronTrigger cronTrigger = new CronTrigger("trigger_" + groupName, groupName, cronExpression);
        cronTrigger.setStartTime(new Date(0));
        Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();
        JobDetail detail = new JobDetail("testJob", groupName, TestJob.class);
        scheduler.scheduleJob(detail, cronTrigger);
        scheduler.start();
        try {
            Thread.sleep(50001);
        } catch (Exception ignore) {
        }

    }

    public static class TestJob implements Job {
        public void execute(JobExecutionContext context) throws JobExecutionException {
            System.out.println("TEST");
        }
    }
} 
```

删除 setStartTime 时，我的打印消息不会触发。有了它，打印消息就会触发。

# java - 多类型数组

> ID：10007733
> 
> 赞同：8
> 
> 时间：2012-04-04T08:45:55.560
> 
> 标签：java, arrays

我正在处理一个数组，需要一些帮助。我想创建一个数组，其中第一个字段是 String 类型，第二个字段是 Integer 类型。结果：

控制台输出

```
a  1
b  2
c  3 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T08:49:44.377

数组只能有一种类型。您可以创建一个新类，例如：

```
Class Foo{
   String f1;
   Integer f2;
}

Foo[] array=new Foo[10]; 
```

您可能还对使用地图感兴趣（在我看来，您正在尝试将字符串映射到 id）。

编辑：您也可以定义 Object 类型的数组，但这是我通常会避免的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T08:47:30.747

您可以创建一个对象类型的数组，然后在打印到控制台时调用`toString()`每个元素的 。

```
Object[] obj = new Object[]{"a", 1, "b", 2, "c", 3};
for (int i = 0; i < obj.length; i++)
{
    System.out.print(obj[i].toString() + " ");
} 
```

将产生：

> a 1 b 2 c 3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T08:49:40.630

```
Object[] randArray = new Object [3]; 
randArray[0] = new Integer(5);
randArray[1] = "Five";
randArray[2] = new Double(5.0);

for(Object obj : randArray) {
    System.out.println(obj.toString());
} 
```

这是你要找的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:50:05.763

```
 Object[] myArray = new Object[]{"a", 1, "b", 2 ,"c" , 3};

    for (Object element : myArray) {
        System.out.println(element);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:50:47.283

```
Object [] field = new Object[6];
field[0] = "a";
field[1] = 1;
field[2] = "b";
field[3] = 2;
field[4] = "c";
field[5] = 3;
for (Object o: field)
  System.out.print(o); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-04-04T08:49:27.280

尝试使用向量而不是数组。

# c# - 使用 Selenium webdriver 定位 ASP Sitemap 树结构子节点

> ID：10007737
> 
> 赞同：0
> 
> 时间：2012-04-04T08:46:12.477
> 
> 标签：c#, selenium, webdriver, sitemap

我试图自动化的网站可以通过使用站点地图树来导航。现在为了从 selenium 访问子节点，我编写了以下代码：

```
IWebElement menu = driver.FindElement(By.LinkText("Setup"));
//Setup is the parent node
Actions mouseOver = new Actions(driver);
mouseOver.MoveToElement(menu).Build().Perform();
driver.FindElement(By.LinkText("Entities")).Click();
//Entities is the child node. 
```

但是 webdriver 会抛出**Element not found**异常。

我正在使用 Firefox 播放测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:52:31.943

也许您没有等待足够的元素出现，这就是“找不到元素”的原因。你试过 WebdriverWait 吗？

```
IWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
IWebElement menu = driver.FindElement(By.LinkText("Setup"));
Actions mouseOver = new Actions(driver);
mouseOver.MoveToElement(menu).Build().Perform();
IWebElement entities = 
wait.Until(ExpectedConditions.ElementExists(By.LinkText("Entities"))); 
entities.click(); 
```

# socket.io - 如何解决socket.io 0.9+跨域

> ID：10007740
> 
> 赞同：1
> 
> 时间：2012-04-04T08:46:18.493
> 
> 标签：socket.io

我用插座。IO做一个聊天应用，客户端是0.8.4，运行正常。但是当我把插座。0.9.4 IO升级发现跨域问题，其他文件没变，以下是错误内容：

```
XMLHttpRequest cannot load http://localhost:8000/socket.io/1/? T = 1333528698474\. http://mydomain.com Origin is not allowed by Access-Control-Allow-Origin. 
```

有些人有同样的问题？或者谁知道解决方案？谦虚的感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:26:45.610

我刚刚在浏览器地址栏中使用 http:// 而不是 file://

这是我的问题：[https ://github.com/LearnBoost/socket.io/issues/776](https://github.com/LearnBoost/socket.io/issues/776)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T00:16:10.500

[`Access-Control-Allow-Origin`](https://developer.mozilla.org/en/docs/HTTP_access_control)在响应中将标头设置为您的 URL。

NodeJS 示例使用[`setHeader`](http://nodejs.org/api/http.html#http_response_setheader_name_value)：

```
res.setHeader('Access-Control-Allow-Origin','http://mydomain.com');
// or
res.setHeader('Access-Control-Allow-Origin','*'); 
```

# iphone - 使用 ARC 时还需要释放内存吗？

> ID：10007741
> 
> 赞同：1
> 
> 时间：2012-04-04T08:46:20.700
> 
> 标签：iphone, ios, automatic-ref-counting

> **可能重复：**
> [Objective-C 中的自动引用计数不能防止或最小化哪些泄漏？](https://stackoverflow.com/questions/6260256/what-kind-of-leaks-does-automatic-reference-counting-in-objective-c-not-prevent)

我正在使用 XCode 4.3.2 并且总是使用 ARC，因为它对我来说非常有意义。我创建的应用程序可以毫无问题地构建和编译。我知道新的编译器和 ARC 在处理内存管理方面非常聪明，但是有什么时候我需要在任何地方编写发布代码......任何已经“初始化”或“分配”的东西“ 通常？

谢谢，

天然气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:10:28.907

简短的回答：没有。

更长的答案：使用 ARC 进行编译甚至不允许您释放/保留/自动释放任何对象。所以这应该不是问题，因为它会引发构建错误并且不会编译。您评论中的其他链接应该可以帮助您了解何时使用强/弱指针。您仍然可以在声明属性时使用非原子、保留/分配，它们将在编译时为您转换。所以你也总是有这个选择。

# php - 确定收到了哪些文件（多个上传文件 zendframwork）

> ID：10007746
> 
> 赞同：0
> 
> 时间：2012-04-04T08:47:04.833
> 
> 标签：php, zend-framework

我在使用 php zend 框架上传多个文件时遇到问题

我有一个包含许多 input[type="file"] 标签的表单，每个标签都有其唯一的名称和 id 属性。

当接收到这些数据时，所有文件都聚集在一个数组文件中，我现在可以轻松地接收和存储它，但这里的问题是我如何识别哪个文件来自哪个输入元素？知道这一点对我来说非常重要，因为每个特定文件都将存储在我数据库的特定字段中。

这是一个例子

```
<input type "file" name = "main_photo"/>
<input type "file" name = "horizontal_plan"/>

$upload = new Zend_File_Transfer_Adapter_Http();
$files = $upload->getFileInfo();
foreach ($files as $file => $info)
{
if($upload->isValid($file))
{
//here how can i point to the main_photo file or the horizontal_plan file?
}
} 
```

请帮忙，提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:22:14.693

你可以看到它们如下：

PHP 打印 $_FILES

```
Array
(
    [s1] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

    [s2] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

)

<!--HTML FORM-->
<form method="post" enctype="multipart/form-data" action="t23.php">
    <input type="file" name="s1">
    <input type="file" name="s2">
    <input type="submit">
</form> 
```

如您所见，html 文件变量 s1 和 s2 成为一个数组，在 PHP 中具有自己的数据集....您应该很容易确定每个数组对应于 html 中的 namsake 变量。:)

希望有帮助。

# c# - VS2010 项目未构建但未显示任何错误或警告

> ID：10007748
> 
> 赞同：0
> 
> 时间：2012-04-04T08:47:09.257
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

我难住了：`0 Errors, 0 Warnings, 0 Messages`但`output`窗户说
`Build: 1 succeeded or up-to-date, 1 Failed, 0 Skipped`

我有两个项目，`A`一个是 web 应用程序，`B`一个是 .dll 引用的 dll `A`。`B`由它自己构建确定。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T08:21:31.327

在 `*.sou`文件中存在用户偏好，并且大多数情况下，如果您更改项目的目录（下载项目），这些将保持不变。即使有时迁移也无法正常工作`*.suo`。因此，在大多数情况下，只需删除文件并重新打开项目即可解决。清理所有 bin 目录也可能有所帮助。如果没有帮助，我认为将项目移动到另一个地方并重复上述步骤会有所帮助。

在您的情况下，我认为排除文件会导致覆盖`*.suo`文件的最佳猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:17:56.077

我从项目中排除了该`App_Readme`文件夹并开始构建。不知道为什么我必须排除该文件夹。当我从 NuGet 添加 Glimpse 时添加了该文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:08:14.903

我也遇到过这种情况。问题是我有以下代码

```
Sub Page_UnLoad()  Handles Me.UnLoad
    objConn.Close()
    objConn = Nothing
End Sub 
```

我删除了 Page_UnLoad Sub，它按预期编译和运行。

# php - 在mysql表中搜索数组

> ID：10007750
> 
> 赞同：1
> 
> 时间：2012-04-04T08:47:11.510
> 
> 标签：php, mysql, arrays

这就是我想要做的：

```
 $allwinnersarra = array(26809,26805,24279,4839,20939,17678,4999,17745,1);

 $results_query = mysql_query("SELECT username FROM table_users WHERE userid IN('".join("','", $allwinnersarra)."')"); 

 while ($row = mysql_fetch_array($results_query)) {
        $usernamesFound.= $row['username'];
 }

 die($usernamesFound); 
```

有一组 id 号码，我想要他们的用户名，在我自己的想法中，我的方法是正确的，但结果不是。

输出只有第一个用户名，不显示其他用户名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:00:21.880

尝试这个：

```
$allwinnersarra = array(26809,26805,24279,4839,20939,17678,4999,17745,1);
$allwinnersarra = implode( ',', $allwinnersarra );

$sql = "SELECT username FROM table_users WHERE userid IN 
          (" . mysql_real_escape_string( $allwinnersarra ) . ");"; 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:54:52.270

1.  $usernamesFound 甚至是一个字符串吗？请在循环上方声明它。
2.  在变量名和 .=-operator 之间添加一个空格
3.  我建议你把用户名放在一个数组中

    $users = 数组（）；

    while($row = mysql_fetch_array($results_query)) { $users[] = $row['username']; }

4.  也请使用内爆而不是加入。

# sql - Postgresql 向列添加规则以在选择时转换数据

> ID：10007757
> 
> 赞同：2
> 
> 时间：2012-04-04T08:47:39.073
> 
> 标签：sql, postgresql, select, postgis

我想要一个以一种格式（Postgis 地理格式）存储数据的列，但是每当它受到选择查询时，它应该用函数转换并以另一种格式返回。

可能吗？

它会影响像这样的查询吗

```
Update table set other_column = do_comething(column_with_transform_rule) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:21:01.477

```
CREATE VIEW clueless AS (
    SELECT na.a, na.b,na.c
       , se.d,se.e, se.f
       , do_something_usefull ( na.g, se.i, 'clue' ) AS usefull
    FROM nameless na
    JOIN sense se ON se.clue_id = na.clue_id
    -- .. maybe more 
    ); 
```

更新：在得到正确的要求之后，这件事*可以*使用规则来完成。

```
SET search_path='tmp';

-- Create a table and a view on it
DROP TABLE nameless CASCADE;
CREATE TABLE nameless
        ( a INTEGER NOT NULL
        , b INTEGER NOT NULL
        , PRIMARY KEY (a,b)
        );
CREATE VIEW clueless AS (
        SELECT a, b
        , a*b AS c
         FROM nameless
        );
-- Enter some data
INSERT INTO nameless(a,b)
        SELECT a, b 
        FROM generate_series(1,5) a
        , generate_series(11,12) b
        ;

CREATE RULE clue_i AS
        ON INSERT TO clueless
        DO INSTEAD (
        INSERT INTO nameless(a,b)
        VALUES (NEW.a, NEW.b)
                ;
        );

CREATE RULE clue_d AS
        ON DELETE TO clueless
        DO INSTEAD (
        DELETE FROM nameless na
        WHERE na.a = OLD.a AND na.b = OLD.b
                ;
        );

CREATE RULE clue_u AS
        ON UPDATE TO clueless
        DO INSTEAD (
        UPDATE nameless na
        SET a = NEW.a, b = NEW.b
        WHERE na.a = OLD.a AND na.b = OLD.b
                ;
        );

SELECT * FROM clueless;

INSERT INTO clueless(a,b)
SELECT 5+src.a, src.b-10
FROM clueless src
WHERE src.a >=4
        ;

-- EXPLAIN ANALYZE
UPDATE clueless
SET b=b+20
WHERE b < 10
        ;

SELECT * FROM clueless; 
```

结果：

```
NOTICE:  drop cascades to view clueless
DROP TABLE
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "nameless_pkey" for table "nameless"
CREATE TABLE
CREATE VIEW
INSERT 0 10
CREATE RULE
CREATE RULE
CREATE RULE
 a | b  | c  
---+----+----
 1 | 11 | 11
 1 | 12 | 12
 2 | 11 | 22
 2 | 12 | 24
 3 | 11 | 33
 3 | 12 | 36
 4 | 11 | 44
 4 | 12 | 48
 5 | 11 | 55
 5 | 12 | 60
(10 rows)

INSERT 0 4
UPDATE 4
 a  | b  |  c  
----+----+-----
  1 | 11 |  11
  1 | 12 |  12
  2 | 11 |  22
  2 | 12 |  24
  3 | 11 |  33
  3 | 12 |  36
  4 | 11 |  44
  4 | 12 |  48
  5 | 11 |  55
  5 | 12 |  60
  9 | 21 | 189
  9 | 22 | 198
 10 | 21 | 210
 10 | 22 | 220
(14 rows) 
```

额外说明：规则*不*被视为完成此类事情的首选方式。

# android - 如何在其左侧和下方进行图像和文本的布局？

> ID：10007761
> 
> 赞同：5
> 
> 时间：2012-04-04T08:47:51.120
> 
> 标签：android, android-layout

我需要制作一个特定于网页的布局，它需要看起来像一个带有图像和文本的网络文章。看图像。

![](../Images/0d64a2e051fff6c084b5af369c014830.png)

由于这在网络世界中很容易做到，我不确定如何在 XML 布局中做到这一点。

显然，`TextView`当图像存在时，它必须在左侧，并且在到达图像底部后，它必须拉伸到屏幕宽度。我尝试了两个`TextViews`（一个用于左侧，另一个用于底部），但由于文本字体大小，它看起来不正确。

* * *

**编辑**

我还尝试动态捕捉图像的高度，然后将其分配给我的 TextView，然后在这两个元素下制作另一个具有屏幕大小的 TextView。这不起作用，因为我无法控制由于第一个 TextView 的高度有限而不可见的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:07:55.467

如果你还没有找到答案。这是正在回答的同类问题。

[如何围绕 ImageView 对齐 TextView？](https://stackoverflow.com/q/11494158/603744)

在您的情况下，您可能需要更改的唯一一件事是，使对齐方式相反。

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:padding="5dp">
<TextView
    android:textSize="18.0sp"
    android:id="@+id/message_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/text" />
<ImageView 
    android:src="@drawable/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/message_view"
    android:id="@+id/icon" /> 
```

取自这里，

[http://dev.androidteam.ru/snippets/textview/leadingmarginspan2](http://dev.androidteam.ru/snippets/textview/leadingmarginspan2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:34:08.370

看看这个。它和你想要的一样

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#FFFFFF"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_marginTop="5dp"
            android:background="#FFFFFF"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="fill_parent"
            android:background="#FFFFFF"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#FFFFFF"
            android:layout_marginTop="5dp"
            android:text="TextView" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"

        android:gravity="center"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:background="#FFFFFF" />

    </LinearLayout>

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:text="TextView" />
    <TextView
        android:id="@+id/textView6"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="#FFFFFF"
        android:text="TextView" />
    <TextView
        android:id="@+id/textView7"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="#FFFFFF"
        android:text="TextView" />
    <TextView
        android:id="@+id/textView8"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="#FFFFFF"
        android:text="TextView" />
    <TextView
        android:id="@+id/textView9"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="#FFFFFF"
        android:text="TextView" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:46:14.610

使用这种方式布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="21dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/imageView1"
        android:layout_marginLeft="30dp"
        android:textColor="#fff"
        android:text="TextView" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="30dp"
        android:text="TextViewaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
        android:layout_alignBottom="@+id/textView1"></TextView>

</RelativeLayout> 
```

并添加代码

```
 TextView tv1=(TextView)findViewById(R.id.textView1);
   tv1.setMaxHeight(maxHeight); 
```

其中maxHeight是动态获取imageview的高度

而不是通过获取 textview1 的高度来将条件分配给第二个 textview

它可以帮助你吗

![在此处输入图像描述](../Images/3fcebf9bcd8946a087a25bdb6e32d330.png) 像这样我是对的吗？

# c# - 为标签的点击事件挂钩自定义函数

> ID：10007762
> 
> 赞同：0
> 
> 时间：2012-04-04T08:47:54.630
> 
> 标签：c#

如何挂钩自定义函数，以便在单击标签时运行相同的函数并传递参数？

```
List<int> _list1 = new List<int>(); //1, 2, 3, 4, 5
    foreach (var item in _list1)
    {
        Label lb = new Label { Text = item.ToString() };
    lb.Click += //custom function and pass the parameter item

    }

private void CustomFunctionOnClick(int s)
{
textBox1.Text = s.ToString();
} 
```

-> 我不能用标签的点击事件来挂钩代表。
-> 反过来，我可以有一个 CustomEventArgs 类将数据传递给事件`(object sender, CustomEventArgs e)`，并且我可以在事件中运行相同的代码。但是点击事件委托没有定义CustomEventArgs作为事件的参数？

那么，这是怎么做到的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:55:34.410

```
List<int> _list1 = new List<int>(); //1, 2, 3, 4, 5

foreach (var item in _list1)
{
    // take copy of loop variable to avoid closing over the loop variable
    int i = item; 
    Label lb = new Label { Text = item.ToString() };
    lb.Click += (x,y) => CustomFunction(i);
}

void CustomFunction(int item)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:28:08.550

你也可以这样做：

```
List<int> _list1 = new List<int>(); //1, 2, 3, 4, 5

foreach (var item in _list1)
{
    Label lb = new Label { Text = item.ToString() };
    lb.Tag = item;
    lb.Click += CustomFunctionOnClick;
}

private void CustomFunctionOnClick(object sender, EventArgs e)
{
    Label l = (Label)sender;
    int item = l.Tag;
} 
```

# iphone - UITextField 内有两种不同的颜色

> ID：10007763
> 
> 赞同：0
> 
> 时间：2012-04-04T08:47:59.817
> 
> 标签：iphone, ios, uitextfield

我有一个 UITextField，其中初始文本是“username.mysite.com”。设置默认颜色（黑色）。

我想有一个不同颜色的“用户名”，比如灰色。可能吗？

用户可以点击“清除按钮”，占位符为“url”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:12:29.380

不能直接使用 UITextField 完成。您的两个基本选项是：

1.  使用`UIWebView`伪装作为文本字段。这很容易，但它是一把大锤，在某些用例中可能会导致性能损失。

2.  使用[Core Text](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)显示一个适当配置的 NSAttributedString。尽管该链接似乎适用于 Mac OS，但 iOS 上也存在 Core Text。该框架非常强大，但学习曲线陡峭，并且不支持开箱即用的可编辑文本。但是，有各种开源库可能有助于入门（例如[DTCoreText](https://github.com/Cocoanetics/DTCoreText) . [OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:49:10.140

不，使用默认设置是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:52:32.510

您可以更改占位符的颜色，通过访问以下私有属性，它会向您显示警告，但它会很好地工作。

```
[aTextField setValue:[UIColor yellowColor] 
            forKeyPath:@"_placeholderLabel.textColor"]; 
```

还有另一种方法可以做到这一点，您可以使用自定义实现覆盖 drawPlaceholderInRect 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T10:37:05.537

`UITextField`有一个`attributedText`属性，可以设置为任何`NSAttributedString`你喜欢的颜色。例如：

```
// Create a string:
let attribString = NSMutableAttributedString(string: "username.mysite.com")

// Set the grey color to the "username" portion of the string (the black color is the default for the rest):
attribString.addAttribute(.foregroundColor, value: UIColor.gray, range: NSRange(location: 0, length: 8))

// Set the attributed string to your text field:
textField.attributedText = attribString 
```

# html - 将 tumblr 照片直接链接到源

> ID：10007770
> 
> 赞同：1
> 
> 时间：2012-04-04T08:48:29.433
> 
> 标签：html, tumblr

我试图让我的 tumblr 帖子在点击时直接链接到源，而不是转到帖子页面并在那里点击源链接。

这是我用于照片帖子的代码。

`{block:Photo} <div class="permalink"><a href="{Permalink}">{MonthNumber}.{DayOfMonthWithZero}.{ShortYear}</a></div> <div class="photo"> <div class="photobox"><a href="{Permalink}"><img src="{PhotoURL-250}" alt="{PhotoAlt}"/></a></div> {block:Caption} <div class="caption">{Caption}</div> {/block:Caption} </div> {/block:Photo}`

我尝试将照片框的“永久链接”更改为来源等，但无济于事。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T22:40:30.893

希望需要它的人能找到它，这是我发现的一种显示`{LinkURL}`何时可用的方法，以及其他一些不可用的 url。

* * *

Tumblr 提供在**可用****时**`{block:LinkURL}`显示一些代码，但在不可用**时****不可用。****`{LinkURL}`**`{block:NoLinkURL}`**`{LinkURL}`**

理想情况下，这应该是可能的：

```
<a 
{block:LinkURL}href="{LinkURL}"{/block:LinkURL}
{block:NoLinkURL}href="{Permalink}"{/block:NoLinkURL}> <!-- does NOT work -->
    <img src="{PhotoURL-400}"/>
</a> 
```

但`{block:NoLinkURL}`不存在，所以我`{block:LinkURL}`用来劫持普通链接：

```
<a {block:LinkURL} href="{LinkURL}" data-ignored-{/block:LinkURL}href="{Permalink}">
    <img src="{PhotoURL-400}"/>
</a> 
```

如果`{LinkURL}`可用，则两个链接都将在 HTML 中，但只会读取一个。

# 示例输出

这是**不可用****时的输出：`{LinkURL}`**

```
<a href="/permalink">
    <img src="/image.jpg"/>
</a> 
```

这是**何时`{LinkURL}`可用的输出：**

```
<a href="/linkurl" data-ignored-href="/permalink">
    <img src="/image.jpg"/>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:55:02.987

*评论后编辑*

它应该是`<a href="{LinkURL}">`

您必须确保在添加图像时也将目标指定为 tumblr 之外。

![在此处输入图像描述](../Images/af6c205ccbec295b726ae502f227fa23.png)

# file - SSIS：如何处理没有字节顺序标记的 UTF-8 文件？

> ID：10007772
> 
> 赞同：1
> 
> 时间：2012-04-04T08:48:33.050
> 
> 标签：file, utf-8, ssis, connection, byte-order-mark

我正在使用平面文件连接来读取文件。此文件包含 UTF-8 数据，但该文件没有字节顺序标记。（我用记事本++检查了这个）

平面文件连接中的 CodePage 设置为“65001”，UniCode 设置为“False”。

在处理此文件并将数据复制到数据库时，某些字符是错误的。

什么是最好/最简单的解决方案？

1.  更改平面文件连接上的一些设置？（这可能也意味着我需要从列中更改代码页。）
2.  在处理之前手动将字节顺序标记添加到文件中？
3.  还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:24:04.227

数据库表被定义为**varchar**而不是**nvarchar**，这解决了我的问题。

# javascript - 用于从组合框中获取选定值的 JavaScript 代码

> ID：10007774
> 
> 赞同：6
> 
> 时间：2012-04-04T08:48:33.957
> 
> 标签：javascript, combobox

谁能给我一个从现有组合框中获取所选值的示例代码？

我有这段代码，但它什么也没做：

```
function check () 
{
    var e = document.getElementById("ticket_category_clone");
    var str = e.options[e.selectedIndex].text;

    alert(str);

    if (str==="Hardware")
    {
        SPICEWORKS.utils.addStyle('#ticket_c_hardware_clone{display: none !important;}');
    }       
}

SPICEWORKS.app.helpdesk.ready(check);​ 
```

这是代码的[img](http://img141.imageshack.us/img141/9250/efrefr.png)

和代码

```
<select id="ticket_category_clone" name="ticket[category]" hdpp="ticket_category">
<option value=""></option><option value="Hardware">Hardware</option>
<option value="Software">Software</option>
<option value="Rede" selected="selected">Rede</option>
<option value="Pedidos">Pedidos</option>
<option value="Formação/Dúvida">Formação/Dúvida</option>
<option value="Outro">Outro</option><option value="#edit_categories#">Edit Categories...</option></select> 
```

我希望它找到一种方法来获取该组合框的选定值

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T08:50:30.650

有一个不必要的标签；将代码更改为：

```
var e = document.getElementById("ticket_category_clone").value; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T08:52:05.590

我用这个

```
var e = document.getElementById('ticket_category_clone').value; 
```

请注意，您不需要 javascript 中的“#”字符。

```
 function check () {

    var str = document.getElementById('ticket_category_clone').value;

      if (str==="Hardware")
      {
        SPICEWORKS.utils.addStyle('#ticket_c_hardware_clone{display: none !important;}');
      }

    }

SPICEWORKS.app.helpdesk.ready(check);​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T09:05:36.930

它可能是其他人提到的 # 符号，因为这似乎工作得很好。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

</head>
<body>

    <select id="#ticket_category_clone">
  <option value="hw">Hardware</option>
  <option>fsdf</option>
  <option>sfsd</option>
  <option>sdfs</option>
</select>
<script type="text/javascript">
    (function check() {
        var e = document.getElementById("#ticket_category_clone");
        var str = e.options[e.selectedIndex].text;

        alert(str);
        if (str === "Hardware") { 
            alert('Hi'); 
        }

    })();
</script>
</body> 
```

# c# - 将数组列表加载到文本框中

> ID：10007777
> 
> 赞同：0
> 
> 时间：2012-04-04T08:48:56.437
> 
> 标签：c#, arrays, arraylist

我还有一个问题，我似乎在 Google 上找不到任何东西。

**该程序的作用**
该程序显示来自 RSS 提要的信息。

**问题**
如何将 Arraylist 中的所有项目加载到 TextBox？

**我尝试过的事情**
这是我到目前为止所拥有的：

```
List<Array> list1 = new List<Array>();

foreach (var item in list1)
        {
            textBox1.AppendText(item.ToString());
        } 
```

**问题**
当我这样做时，文本框显示：

> System.String[]System.String[]

代替：

> CraftBukkit 的推荐构建：1.2.4-R1.0（构建 2126） [http://dl.bukkit.org/downloads/craftbukkit/view/00993_1.2.4-R1.0/](http://dl.bukkit.org/downloads/craftbukkit/view/00993_1.2.4-R1.0/)

有人知道这个数组是如何工作的吗？
我是否需要遍历数组并搜索特定索引？

对不起，但我对 C# 还是有点陌生​​，对不起我的英语我是荷兰人 :<。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:53:26.663

看起来您的 ArrayList 包含字符串数组而不是字符串。所以试试这个：

```
foreach (var item in list1.OfType<string[]>().SelectMany(i => i))
{
    textBox1.AppendText(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:52:44.307

这似乎`item`是一个字符串数组，所以尝试内爆它：

```
foreach (var item in list1)
{
    textBox1.AppendText(string.Join("", item));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:55:53.343

您的代码基本上是一个数组列表。这就是为什么它显示 system.string[]

将其更改为

```
foreach (var item in list1)
{
    textBox1.AppendText(string.Join("", item));
} 
```

它将加入您在 List<> 中的每个字符串 [] （即项目）并像这样创建它

第一个数组第一项，第一个数组第二项

和文本框为

firstarrayfirstitem，firstarrayseconditem，secondarrayfirstitem，secondarrayseconditem....等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:15:38.013

更好的方法是使用 stringbuider 以获得更好的性能并减少文本框调用的 propertychanged 事件；

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();

foreach (var item in list1.OfType<string[]>().SelectMany(i => i))
{
    sb.Append(item);
}

textBox1.Text = sb.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T13:18:25.097

更好的方法：

```
textBox1.Text = string.Join("", list1.OfType<string[]>().SelectMany(i => i)); 
```

# sql - sql从变量创建数据库

> ID：10007778
> 
> 赞同：1
> 
> 时间：2012-04-04T08:48:56.757
> 
> 标签：sql, sql-server

我有`@db_out = 'aux.dbo.some_table_name'`，但我不知道如何删除，基于该变量创建，例如：

```
IF OBJECT_ID(@db_out) IS NOT NULL DROP TABLE "@db_out" - not working
CREATE TABLE "@db_out"  .... etc 
```

它创建 master.dbo.@dbo_out

如何使用该变量来创建该表或验证它并删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:56:24.860

您必须在 varchar 变量中构建语句并执行它：

```
declare @strSql as varchar(max)

IF OBJECT_ID(@db_out) IS NOT NULL
BEGIN
   EXEC ('DROP TABLE [' + @db_out + ']')
END
set @strSql = 'CREATE TABLE [' + @db_out + '] (' -- Etc
EXEC (@strSql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:59:05.250

您需要编写动态 SQL。

```
SET @sql = 'IF OBJECT_ID(@db_out) IS NOT NULL DROP TABLE ' + @db_out + '; '
SET @sql = @sql + 'CREATE TABLE ' + @db_out + ' (...)'
EXEC(@sql) 
```

# iphone - 在 NSMutableData 中加载层次结构

> ID：10007779
> 
> 赞同：1
> 
> 时间：2012-04-04T08:48:57.110
> 
> 标签：iphone, objective-c, xcode

NSMutableData 中是否有层次结构系统？如果是这样，我如何以分层方式加载信息？例子

```
//Create path to saving location
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSMutableData *gameData;
NSKeyedUnarchiver *decoder;
NSString *documentPath = [documentsDirectory stringByAppendingPathComponent:@"tierSave.dat"];
gameData = [NSData dataWithContentsOfFile:documentPath];
//end

//start loading
    for(NSArray* firstData in gameData){

    decoder = [[NSKeyedUnarchiver alloc] initForReadingWithData:gameData];

    int level1 = [decoder decodeIntegerForKey:level1];
    }
//end 
```

但是在 for(NSArray* firstData in gameData) 中，编译器告诉我 gameData 不会响应计数，因为它是 NSMutableData 而不是 NSMutableArray 等，我该如何重新实现上面的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:52:05.247

保存：

*   使用多个 NSData 创建一个 NSArray
*   使用 NSKeyedArchiver 从你的 NSArray 创建一个 NSData

加载：

*   从文件加载 NSData
*   使用 NSKeyedUnarchiver 提取 NSArray
*   循环你的 NSArray

在代码中： NSData *data0 = [NSData 数据]; // 数据 1 NSData *data1 = [NSData 数据]; // 数据 2

```
/////////// SAVE
// now make a array
NSArray *array = [NSArray arrayWithObjects:data0, data1, nil];

// now archive the data
NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject:array];
// archivedData contains now a binary plist with your archived array including your NSData objects

[archivedData writeToFile:path atomically:YES];

/////// LOAD
NSData *archivedDataFromFile = [NSData dataWithContentsOfFile:path];

NSArray *newArray = [NSKeyedUnarchiver unarchiveObjectWithData:archivedDataFromFile];

NSData *dataLoaded0 = [newArray objectAtIndex:0]; 
```

# java - HTML 解析（在 Java/Android 中）然后从中提取数据是获取网页内容的有效方法吗？

> ID：10007785
> 
> 赞同：0
> 
> 时间：2012-04-04T08:49:17.953
> 
> 标签：java, android, html-parsing, data-extraction, http-post

因此，在提取整个 HTML 代码之前，我使用 Android Java 中的 HTTP Post Requests 登录网站。之后，我使用 Pattern/Matcher (regex) 来查找我需要的所有元素，然后从 HTML 数据中提取它们，并删除所有不必要的内容。例如当我提取这个：

```
String extractions = <td>Good day sir</td> 
```

然后我使用：

```
extractions.replaceAll("<td>", "").replaceAll("</td>", ""); 
```

我会多次执行此操作，直到获得该站点所需的所有数据，然后再将其显示在某种列表中。

我并没有特别拘泥于任何事情，但是请你告诉我这是否是从页面获取数据并处理它的一种有效/高效/快速的方式，或者有没有办法更快地做到这一点？因为有时它就像我的程序需要花费大量时间来获取某些数据（尽管主要是当我在手机上使用 3G 时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:58:25.273

使用正则表达式解析网站总是一个坏主意：

[Java中如何使用正则表达式解析HTML？](https://stackoverflow.com/questions/677038/how-to-use-regular-expressions-to-parse-html-in-java)

[使用正则表达式解析 HTML：为什么不呢？](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:34:19.600

查看用于从 HTML 中提取文本的 Apache Tika 库 - 还有许多其他解析器可用，例如 PDF 等：[http ://tika.apache.org/](http://tika.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:29:04.097

正如其他人所说，正则表达式不是这项工作的最佳工具。但在这种情况下，您使用正则表达式的特定方式甚至​​比通常情况下效率更低。

无论如何，让我提供另一种可能的解决方案（取决于您的用例）。

它被称为 YQL（雅虎查询语言）。 [http://developer.yahoo.com/yql/](http://developer.yahoo.com/yql/)

这是它的控制台，因此您可以使用它。 [http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)

YQL 是懒惰的开发人员动态构建自己的 api 的方式。主要的不便之处在于您必须使用雅虎作为中间人，但如果您对此表示满意，那么我建议您走那条路。使用 YQL 可能是完成此类工作的最快方法（特别是如果您的目标 html 不断变化并且其 html 标记并不总是有效）。

# javascript - 支持自动化测试的主干 JS 应用程序的 BDD

> ID：10007786
> 
> 赞同：7
> 
> 时间：2012-04-04T08:49:20.350
> 
> 标签：javascript, cucumber, automated-tests, bdd, jasmine

我正在构建一个 Backbone 应用程序，我需要进行自动化测试。我不喜欢使用 selenium 进行自动化测试。

我正在研究 Jasmine 和 Cucumber.js。我认为 Jasmine 可能会更好，但在我工作的公司中，他们使用 cucumber 进行服务器端测试，我正在调查 cucumber.js 是否可用于生产。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T09:13:49.583

Cucumber.js 非常稳定，可以在生产环境中使用。与 Cucumber ruby​​ 相比，它缺少一些高级功能，例如~~场景大纲和~~（现在可用的）转换。有关开发状态表，请参阅[README](https://github.com/cucumber/cucumber-js/blob/master/README.md "自述文件")。

它可以与 Zombie.js、Phantom.js、Selenium 甚至在浏览器中一起使用。实际上，您可以在 Cucumber 步骤定义中使用任何断言/测试库。

正如 Andreas 所指出的，Jasmine 的目标是单元测试/规范，而 Cucumber 是一种验收测试工具（针对整个应用程序堆栈）。

如果您在 Cucumber.js 入门方面需要帮助，请随时联系我（Twitter 上的@jbpros，Freenode/#cucumber 上的 jbpros）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T03:28:24.867

我没有足够的分数来为@jbpros 答案添加评论，但应该注意的是，[场景大纲](https://github.com/cucumber/cucumber/wiki/Scenario-Outlines)现在在 cucumber.js 中已完成，如此[处](https://github.com/cucumber/cucumber-js "这里")所述。

例如：

世界：

```
// features/support/world.js

var zombie = require('zombie');
var World = function World(callback) {
  this.browser = new zombie(); // this.browser will be available in step definitions

  this.visit = function(url, callback) {
    this.browser.visit(url, callback);
  };

  callback(); // tell Cucumber we're finished and to use 'this' as the world instance
};
exports.World = World; 
```

特征：

```
Scenario Outline: eating
  Given there are <start> cucumbers
  When I eat <eat> cucumbers
  Then I should have <left> cucumbers

Examples:
    | start | eat | left |
    |  12   |  5  |  7   |
    |  20   |  5  |  15  |
    |  200  |  65 |  135 |
    |  200  |  5  |  194 | 
```

步骤定义：

```
var aTest = function () {
this.World = require("../support/world.js").World;

this.start = 0;
this.eat = 0;

this.Given(/^there are (\d+) cucumbers$/, function(number, next) {
    this.start = parseInt(number);
     callback();
});

this.When(/^I eat (\d+) cucumbers$/, function (number, next) {
    this.eat = parseInt(number);
     callback();
});

this.Then(/^I should have (\d+) cucumbers$/, function (number, next) {
    var left = this.start - this.eat; 
    if ( left != number)
        callback.fail(new Error("This test didn't pass, I started with: " + this.start 
            + ", ate: " + this.eat 
            + " and was left with: " + left 
            + ". Expected: " + number));
     callback();
    });
};

module.exports = aTest; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:25:02.897

busterjs 和[jstestdriver](http://code.google.com/p/js-test-driver/)都可以在自己的服务器上启动测试页[。](http://busterjs.org/)您所要做的就是自动启动浏览器并打开测试页面。测试将在浏览器中运行并将结果报告回服务器，其中可以以 maven 可读格式保存say。[注意Jasmine](https://github.com/searls/jasmine-maven-plugin)还有一个 maven 插件

# winapi - GDI、GDI+ 和 OpenGL 真的过时/弃用了吗？

> ID：10007789
> 
> 赞同：24
> 
> 时间：2012-04-04T08:49:24.537
> 
> 标签：winapi, opengl, graphics, gdi+, gdi

如果您[在 microsoft.com 上打开“图形和游戏 (Windows)”页面](http://msdn.microsoft.com/en-us/library/ee663279%28v=vs.85%29.aspx)

最后一类被描述为

> Legacy Graphics：过时且不应在新应用程序中使用的技术。

此类别包括（除其他外）以下 API：

*   GDI
*   GDI+
*   OpenGL

你怎么看？如果我今天想推出一个新软件，它必须支持 Windows XP（仍然是所有已安装系统的 50% 左右）。Direct2D 需要 Windows 7/Vista。还应该使用什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T01:01:34.010

我怀疑微软对“遗留”的定义与任何明智的开发人员应该做的事情几乎没有关系，而是基于对 Windows API 的一些大重写。

从 Windows Vista 开始，Microsoft 一直在重新设计他们的许多 API。我们现在将 MMDevAPI 作为 One True Sound API，WIC 是 One True Image File API，等等。据我所见/所闻，这些新 API 比旧 API 好得多，并且“遗留”系统都可以工作基于新的。在 Windows Vista 及更高版本中，DirectSound 完全基于 MMDevAPI，需要读取图像文件的组件通过 WIC 完成。

Windows 8 将有一个 ARM 版本，它似乎只支持当前 Windows API 的一个子集。在 ARM 上的 Windows 发布之前我们无法确定，但是，基于 Visual Studio 11 中为 ARM 平台包含的库（参考： http: [//www.winehq.org/pipermail/wine-devel/2012- March/094559.html](http://www.winehq.org/pipermail/wine-devel/2012-March/094559.html) )，看起来 GDI+ 和 OpenGL 将不可用。GDI 可用于链接，但这并不一定意味着它是完整的。

这个来自 Vista 和更高版本的新 API 大致对应于 VS11 ARM 目标中的库。我猜该列表上的任何东西都在那里，因为它要么是最新和最伟大的方式来做它所做的事情，要么它在技术上太重要而不能丢弃（现在）。因此，“遗产”是任何不是做至少一件事的最新和最好的方式的东西。

我不确定 One True Graphics API 是什么。我们已经有了 Direct2D、Direct3D、DirectComposition（顺便说一句，直到 Windows 8 才可用）、DirectWrite 和 DXGI。DXGI 似乎是最接近的，但我对图形 API 的理解还不够深入。我怀疑 gdi32 在技术上很难摆脱。非传统应用程序如何在不使用涉及 HDC 的 WM_PAINT 的情况下找出窗口的一部分何时已显示并因此必须绘制，以及库如何在不替换其窗口过程的情况下代表应用程序执行此操作？我们如何在不使用需要 HDC 的 UpdateLayeredWindow 的情况下制作半透明窗口？user32对gdi32有多少依赖，真的能分开吗？

从技术角度来看，Windows 可以轻松摆脱 GDI+ 和 OpenGL，但我不相信摆脱 OpenGL 会奏效，即使是在不承诺任何向后兼容性的新平台上也是如此。这对开发人员来说似乎太有价值了。GDI+ 并不那么重要，但第三方很容易提供替代品。

我会说使用您列出的任何 API，最糟糕的情况是如果您想将应用程序移植到 Metro 或 ARM 上的 Windows，您必须重写您的 UI。如果您的需求很简单并且您将直接为 Windows API 编写代码，那么 GDI 是一个不错的选择。在很多情况下，我会推荐 GDI+ 而不是 OpenGL 作为绘图 API。GDI+ 速度慢、受限且仅在 Windows 上可用。GDI+ API 更简单，因为它是 2D 的，所以如果您需要做一些非常简单但具有抗锯齿功能的事情，那么它可能是值得的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-12T23:56:50.853

OpenGL 没有被弃用，*微软的实现是*. Microsoft 的实现停留在旧版本*1.1*。当前版本的标准是过去的版本 4。如果你想使用 OpenGL，它在 Windows 桌面上被[NVidia](https://developer.nvidia.com/opengl)、[ATI](http://developer.amd.com/tools-and-sdks/graphics-development/)和[Intel](http://www.intel.com/support/graphics/sb/CS-033757.htm?wapkw=opengl)显卡完全支持，但在~~Metro~~ Windows Modern UI 应用程序中不支持，[是一个行业标准，](https://www.opengl.org/)也适用于[Mac](https://developer.apple.com/opengl/)和 Linux。如果您需要软件回退实现，[Mesa 可以满足](http://www.mesa3d.org/)您的需求，它[甚至可以在 DOS 上运行。](https://www.youtube.com/watch?v=vkUwT9U1GzA)（由于 Mesa 可以渲染到内存缓冲区中，它没有理由不能在现代 UI 应用程序中工作，但您可能不想这样做，因为它可能很慢。）值得注意的一点是 WGL，它的 API在 Windows 桌面上访问 OpenGL 功能依赖于 GDI（*已*弃用），因此如果您想使您的应用程序面向未来，您可能想要使用类似[FreeGLUT](http://freeglut.sourceforge.net/)或[SDL的东西，这也让您获得平台独立性。](http://www.libsdl.org/)

[OpenGL ES](https://www.khronos.org/opengles/)是 OpenGL 的变体，适用于[Android](https://developer.android.com/guide/topics/graphics/opengl.html)和[Apple iOS。](https://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/Introduction/Introduction.html)它也可以通过[WebGL](https://www.khronos.org/webgl/)在 JavaScript 中访问，[Internet Explorer 11 将支持](http://www.engadget.com/2013/06/26/internet-explorer-11-to-support-webgl-and-mpeg-dash/)（[几乎所有其他浏览器都已经](https://www.khronos.org/webgl/wiki/Getting_a_WebGL_Implementation)支持）[。ANGLE](https://code.google.com/p/angleproject/)为 Windows 提供了 GLES 的硬件加速实现，它搭载 DirectX（版本 9 或 11），因此也应该在现代 UI 应用程序中工作。[再一次，Mesa 涵盖了软件实施。](http://www.mesa3d.org/opengles.html)

**TL;DR：OpenGL 不仅*没有*被弃用，它是跨平台的、标准的，并且在行业中具有巨大的发展势头。GDI 和 GDI+，好吧，没那么多。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-05T02:37:29.513

If you want to support Windows XP, then you're supporting a "legacy" operating system, and as such, using a "legacy" graphics framework is the logical choice.

Even if that *weren't* true, let's just say that I disagree with the advice given by the linked MSDN article. The "legacy" status here has more to do with which technology the Windows team thinks is cool this week. The status designation of "obsolete" just means that the group responsible is no longer accepting or fulfilling bug reports (except for critical security issues). Not too big of a deal—these technologies have been around long enough that they're fairly feature-complete and stable.

GDI isn't going anywhere, so if you need something rock-solid that is guaranteed to be supported anywhere and everywhere, that's what I would go with.

If you need a bit more 2D capabilities than GDI offers (e.g., alpha channel transparency), then you could consider using GDI+. It's nearly an order of magnitude slower than GDI, but that's not too big of an issue on modern machines with more power than you could ever want. This, too, is going to be supported for a very long time to come.

That said, if I were writing a new app today, I probably *wouldn't* bother with OpenGL. There's very little that it offers in benefits over Direct2D and DirectWrite, which are both what Microsoft is pushing as the replacements for GDI/GDI+. There might be some benefit to using OpenGL if you absolutely *must* target Windows XP because as far as I can tell, Direct2D/DirectWrite are only supported on Vista and later, but that's because (as I mentioned originally), Windows XP falls squarely into the "legacy" or "obsolete" camp itself. Alternatively, if you already know OpenGL well and don't have time or the desire to learn Direct2D/DirectWrite, then it might make sense to continue using it in a new application.

Don't let the verbiage of the MSDN article scare you. Choose whatever technology makes the most sense for your specific use case given all of the available information. By the time any of these technologies go away completely, you'll have to re-write the app completely for a dozen other reasons.

**Edit:** Hmm, it looks like DirectWrite has also been declared (by some people at least) "obsolete" as well, having been replaced by Direct2D. That's funny, it hasn't even been around long enough for me to bother learning it. I guess that only goes to support my earlier argument that "obsolete" simply designates that a particular technology is not what is currently considered to be in vogue by the Microsoft devs.

I'm personally waiting until all the bugs get worked out of this stuff (and we decide on a semi-permanent standard) before I make the switch for any of my applications. Everything I've seen written in DirectDraw or Direct2D has had serious rendering bugs and is a performance nightmare, even on reasonably competent machines. Sure, they only show up *sometimes*, under the right conditions, but that's too much for me. And I swear, the blurry text shows up *all the time*. Not being able to read what's on screen is a deal-killer for me and my users. GDI doesn't have this problem, and it's not going anywhere.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-05T04:30:35.057

> GDI、GDI+ 和 OpenGL 真的过时/弃用了吗？

这对于 OpenGL 是不正确的。OpenGL 4 允许您在 winxp 上使用几何着色器。DirectX 无法做到这一点（WINXP 不支持 DirectX 10 及更高版本）。它也是目前仅有的跨平台 3D API 之一。

从商业角度来看，MS 对推广 DirectX 很感兴趣，因为正是他们的技术将开发人员锁定在 Windows 平台上（他们也有兴趣让 DirectX 对开发人员更具吸引力，但那是另一回事了）。所以他们不热衷于推广 OpenGL 是有道理的。

> 还应该使用什么？

我建议尽可能停止使用特定于平台的技术。获取跨平台框架并将其用于您的应用程序。有用于 GUI 应用程序的 Qt、GTK、wxWidgets 和其他工具包，以及用于游戏的 SDL（和替代品）。这样，当平台开发人员决定做出您不喜欢的荒谬决定（例如在 WinXP 上不支持 DX10）时，您将能够以最低的开发成本转移到其他地方。Qt 也非常强大，目前我没有理由使用其他东西进行 GUI 开发。不过，未来情况可能会发生变化。

简而言之，在为某些平台进行开发时，您应该记住，平台开发人员的目标可能与您的意愿不符。发现您的资源已被锁定在单一平台上并不是很愉快的经历。您自己的目标应该是第一要务，如果操作系统开发人员试图让您使用某些您不喜欢的技术，那么您不应该支持该技术。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-13T10:06:44.737

因为 OpenGL 是一种标准，它应该被视为与 C 或 C++ 一样被弃用，因此考虑整个 Windows API（如今由于 Wine 已经成为在每个 x86 机器 API 上运行一次的编译器）被认为是时间问题已弃用，取而代之的是 .NET 和 C#。

当我需要加速 3d 时，我将 GDI 用于简单的图形和 OpenGL。

另一个方面是，微软的 OpenGL 内置实现肯定会被视为已弃用，因为它只是 1.1 版或其他版本，但已经有很长一段时间了。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-13T01:13:54.427

是的，关于 OpenGL，它实际上在资源和显示方面的许多方面都优于 DirectX。它永远不会被微软推广，因为它不能拥有 OpenGL，更不用说大多数人不做研究，微软可以声称它已经过时了。事实是 opengl 是开源标准，并且发展速度比封闭的要快得多，因为它有超过 1 个开发人员付费工作。此外，微软与许多公司签订了仅使用微软软件发布的合同，这为微软带来了更多的业务，而较少使用更高级的 OpenGL 标准。如果你愿意的话，这是一个有趣的锁定，微软创建了这些合同，因此许多程序都是用 DirectX 编写的，以保持微软的业务，没有公司会拒绝它，因为微软拥有大约 80% 以上的家庭用户市场。

# google-chrome - Chrome 扩展：隐藏和显示浏览器操作图标

> ID：10007796
> 
> 赞同：8
> 
> 时间：2012-04-04T08:49:44.773
> 
> 标签：google-chrome, google-chrome-extension, browser-action

是否可以在选项页面中显示和隐藏浏览器操作图标？

我知道如何使用 show 和 hide 方法对页面操作进行操作，但我没有看到浏览器操作有任何相似之处。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T09:35:25.213

来自[https://developer.chrome.com/extensions/browserAction](https://developer.chrome.com/extensions/browserAction)：

> 如果您想创建一个不总是可见的图标，请使用页面操作而不是浏览器操作。

换句话说：不，这是不可能的。浏览器操作在设计上是永久性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:24:07.100

Google 将浏览器操作定义为静态按钮，将页面操作定义为动态按钮。谷歌对 Chrome 的界面非常谨慎，不希望人们以他们“应该”做的不同方式使用按钮。

他们这样做是因为他们认为用户已经努力学习使用 Chrome，而 Google 希望呈现一致、连贯和简约的用户界面。

在 Chrome 用户界面方面，您没有太多的自由。

# silverlight - Silverlight / f# 的 FsharpCharts

> ID：10007797
> 
> 赞同：1
> 
> 时间：2012-04-04T08:49:52.220
> 
> 标签：silverlight, f#, charts, fsharpchart

这可能是一个愚蠢的问题，但是在 mscorlib 级别有很多不兼容的方法（wpf、silverlight、winforms、html5）组合，我完全迷失了。

我希望能够有几个窗口主要显示实时*图表*。可能与窗口之间的交互（单击一个，弹出并显示一个新窗口）如果可以在网络上查看，那就完美了。

但我不想为这些功能处理另一层讨厌的东西（比如必须在“IIS”上设置一些“WCF”，先杀了我）

最后我想在 Silverlight 上使用 FSharpChart。这是可能的和/或最好的选择吗？

感谢您的建议

**更新**

我看到 fsharpchart 所依赖的 system.drawing 不支持 silverlight..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:16:15.480

尝试动态数据显示而不是 FSharpChart。它在 Silverlight 上运行：[http ://research.microsoft.com/en-us/um/cambridge/groups/science/tools/d3/dynamicdatadisplay.htm](http://research.microsoft.com/en-us/um/cambridge/groups/science/tools/d3/dynamicdatadisplay.htm)

它不像 FSharpChart 那样对 F# Interactive 友好，但您可以轻松地将其包装在几个函数中以使其更易于使用

# gwt - Google Web Toolkit Developer Plugin 支持的 Firefox 版本

> ID：10007801
> 
> 赞同：2
> 
> 时间：2012-04-04T08:50:02.863
> 
> 标签：gwt, firefox-addon

如何找到 Google Web Toolkit Developer Plugin 支持的 Firefox 版本？我在任何地方都找不到它。

由于 Firefox 现在的开发周期很短，如果 Google 将我们指向一个可以找到支持的浏览器版本的页面，那就太好了。

*有关信息：我正在使用 Firefox 5.0 版，没有问题。我在 Google Groups 上看到有人说 8.0 版也可以。Firefox 的实际版本是 11。*

**编辑 1：**

根据 Thomas 的建议，可以在此处找到最后支持的版本[http://code.google.com/p/google-web-toolkit/source/browse/trunk/plugins/xpcom/prebuilt/update.rdf 。](http://code.google.com/p/google-web-toolkit/source/browse/trunk/plugins/xpcom/prebuilt/update.rdf)

```
<em:minVersion>3.0</em:minVersion>
<em:maxVersion>16.0.*</em:maxVersion> 
```

**编辑 2 ：** 编辑 1 中指向的文件似乎不再存在，因此最好查看提交日志，这里：[https ://code.google.com/p/google-web-toolkit/source/list](https://code.google.com/p/google-web-toolkit/source/list)

前任：

> 用于 Firefox 23 / Mac 的 r11637 更新
> 
> Windows 上 Firefox 23 的 r11636 更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:46:32.343

DevMode 插件支持从 3.0 到 11.0 的所有版本的 Firefox：[http ://code.google.com/p/google-web-toolkit/source/browse/trunk/plugins/xpcom/prebuilt/update.rdf](http://code.google.com/p/google-web-toolkit/source/browse/trunk/plugins/xpcom/prebuilt/update.rdf)

Firefox 版本发布后总会有一些延迟，但 DevMode 插件的初步版本通常会在 Firefox 发布几天（甚至几小时）后从 GWT Google 群组“非官方”提供，在它毕业之前等待代码审查SVN 存储库。问题是插件必须针对更新后的 Gecko SDK 重新编译，该 SDK 在 Firefox 之后几小时或几天发布。

…然后[http://gwt.google.com/missing-plugin/](http://gwt.google.com/missing-plugin/)也落后了几天/几小时（在我写的时候它还没有为 Firefox 11 更新），但是 Firefox 11 的插件可以[从 SVN 存储库下载](http://code.google.com/p/google-web-toolkit/source/browse/trunk/plugins/xpcom/prebuilt/gwt-dev-plugin.xpi)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:44:35.627

Mozilla 用“旧”版本很好地隐藏了他们的 ftp 服务器。

这是网址： ftp: [//ftp.mozilla.org/pub/firefox/releases/11.0/](ftp://ftp.mozilla.org/pub/firefox/releases/11.0/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:59:06.650

如果您正在寻找有关如何安装/删除/谷歌插件功能的更多信息，

你可以看看[google插件教程](http://pluginsarena.com/google-update-plugin/)

# extjs - 我想要一个处理数据库的示例 sencha touch 应用程序

> ID：10007805
> 
> 赞同：1
> 
> 时间：2012-04-04T08:50:08.477
> 
> 标签：extjs, sencha-touch

我是煎茶触摸的新手。我需要为 sencha touch 应用程序维护一个数据库（不是本地存储），任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:55:32.637

如果您使用 php 连接到 mysql，这是我从 sencha 网站修改的一个简单应用程序。

首先你的javascript

```
var helloWorld = new Ext.Application({

    launch: function() {

        Ext.regModel('Contacts', {
            fields:[{
                name:'first_last_name'
            }]
        });

        store = new Ext.data.Store({
            model: 'Contacts',
            proxy: {
                type: 'scripttag',
                url: 'contact.php',
                reader: {
                    type: 'json',
                    root: 'emergency_contact'
                },
                extraParams:{
                    action:'read'
                }
            }
        });

        var tmpl = new Ext.Template(
            '<table>',
            '<tr>',
            '<td>',

            '{first_last_name}',

            '</td>',
            '</tr>',
            '</table>'
            );

        this.tabs = new Ext.TabPanel({
            fullscreen: true,
            dockedItems: [{
                xtype:'toolbar', 
                title:'Hello World'
            }],
            tabBar: {
                ui: 'light',
                layout: {
                    pack: 'center'
                }
            },
            items: [
            {
                html:'Hello',
                title:'Hello'
            },

            {
                html:'world', 
                title:'world'
            },

            {
                cls: 'list',
                title: 'list',
                xtype: 'list',
                store: store,
                itemTpl:tmpl
            }
            ]
        });
        this.list = this.tabs.items.getAt(2);

        store.load();
    }

}); 
```

然后在 store 中声明contact.php

```
<?php
header('Content-Type: text/javascript; charset=UTF-8');

ini_set("display_errors", true);
ini_set("html_errors", true);

include "db_connect.php";

$out = "";
$action = "";
$data = "";
$contact = "";

if (isset($_REQUEST["action"])) {
    $action = $_REQUEST["action"];
}
switch ($action) {
    case "read": $out = read_this();
        break;
}
echo utf8_encode($out);

function read_this() {

    $conn = OpenDbConnection();

    $sql = "select first_last_name from contact";

     $result = mysql_query($sql);

    $num = mysql_numrows($result);

    $i = 0;

    $eData = array("count" => $num, "contact" => array());

    while ($row = mysql_fetch_assoc($result)) {
        $eData["contact"][$i] = $row;
        $i++;
    }

    CloseDbConnection($conn);
  //  return json_encode($eData);
    return $_REQUEST['callback'] . '(' . json_encode($eData) . ');';
}

?> 
```

然后用php连接到数据库（db_connect）

```
<?php
function OpenDbConnection() {

  $dbhost = 'localhost:3306';
  $dbuser = 'phpapp';
  $dbpass = 'phpapp';
  $dbname = 'dbname';

  $conn = mysql_connect($dbhost, $dbuser, $dbpass);

  if (!$conn) {
    echo( "Unable to connect to the database server." );
    exit();
  }

  mysql_select_db($dbname) or die( "Error selecting database.");

  return $conn;
}

function CloseDbConnection($conn) {
  mysql_close($conn);
}
?> 
```

这是一个 sencha touch 1 应用程序，但可以轻松修改为与 sencha touch 2 一起使用。希望对您有所帮助

# android - 在自定义图像视图中缩放图像上的文本

> ID：10007808
> 
> 赞同：0
> 
> 时间：2012-04-04T08:50:15.520
> 
> 标签：android, text, imageview

我写了一个自定义图像视图来显示信用卡。要创建信用卡，我有一个基本图像，并且我有设置 PAN、持卡人、到期的设置器。此文本需要绘制在基卡图像之上。我的问题是保持文本的位置和大小，以便无论基本图像的大小如何变化，它都看起来总是正确的。我唯一可以依靠的是图像的纵横比与普通信用卡相同。

我的自定义 ImageView

```
public class CardView extends ImageView {
private String mPan = "4321 0123 4567 8910";
private String mExpiry = "01/16";
private String mCardholder = "MR JOHN SMITH";
private float mPanTextSize = 22;
private float mOtherTextSize = 14;
private Paint mPanPaint = new Paint();
private Paint mCardholderPaint = new Paint();

public CardView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initCardView();
}

public CardView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initCardView();
}

public CardView(Context context) {
    super(context);
    initCardView();
}

private final void initCardView() {
    mPanPaint.setColor(0xFFFFFFFF);
    mPanPaint.setShadowLayer(1, 1, 1, 0xAA000000);
    mPanPaint.setAntiAlias(true);
    mPanPaint.setTextSize(mPanTextSize * getResources().getDisplayMetrics().scaledDensity);
    mPanPaint.setTypeface(Typeface.MONOSPACE);
    mCardholderPaint.setColor(0xFFFFFFFF);
    mCardholderPaint.setShadowLayer(1, 1, 1, 0xAA000000);
    mCardholderPaint.setAntiAlias(true);
    mCardholderPaint.setTextSize(mOtherTextSize * getResources().getDisplayMetrics().scaledDensity);
    mCardholderPaint.setTypeface(Typeface.MONOSPACE);
    setPadding(0,0,0,0);
    //setAdjustViewBounds(true);
    setScaleType(ImageView.ScaleType.CENTER_INSIDE);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    float panLength = mPanPaint.measureText(mPan);
    float x = (getWidth() - panLength)/2;
    float y =  -mPanPaint.ascent() + (getHeight() * 0.46f);
    canvas.drawText(mPan, x, y, mPanPaint);
    x = (getWidth() - panLength)/1.5f;
    y = y - mCardholderPaint.ascent();
    canvas.drawText(mExpiry, x, y, mCardholderPaint);
    y = y - mCardholderPaint.ascent();
    canvas.drawText(mCardholder, x, y, mCardholderPaint);

    //super.onDraw(canvas);
}

public void setPan(String pan) {
    mPan = pan;
    invalidate();
}

public String getPan() {
    return mPan;
}

public void setExpiry(String expiry) {
    mExpiry = expiry;
    invalidate();
}

public String getExpiry() {
    return mExpiry;
}

public void setCardholder(String cardholder) {
    mCardholder = cardholder;
    invalidate();
}

public String getCardholder() {
    return mCardholder;
}
} 
```

所以有时这看起来不错，但是当你使用 10 英寸屏幕时，文本太小了，就在图像的中心（想象一下信用卡，但数字只占用中间 8 位数字的空间），并且当您进入小屏幕时，文本太大了，一直到图像两侧或经过它们。

有什么解决办法吗？任何解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:44:43.793

您需要使文本大小取决于图像的大小。

尝试为 yourPanFactor 和 yourCardholderFactor 尝试不同的值，直到获得所需的结果

```
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed, left, top, right, bottom);
    if (changed) {
        final int height = bottom-top;  
        mPanPaint.setTextSize(height*yourPanFactor);
        mCardholderPaint.setTextSize(height*yourCardholderFactor);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T15:47:28.807

我设法在这行代码中完成了这项工作

```
if (imageView.getWidth() <= resource.getWidth()) {
           ratio = (float) resource.getWidth() / (float) imageView.getWidth();
     } else {
           ratio = (float) imageView.getWidth() / (float) resource.getWidth();
     }
Paint paint = new Paint();
paint.setColor(Color.WHITE);
paint.setTextSize(editText.getTextSize() * ratio); 
```

请注意，editText 的默认文本大小为 14 sp。

我希望它对你有帮助。如果我错了，请纠正我

# java - 如何使用 LineNumberReader 获取空行数？

> ID：10007810
> 
> 赞同：-2
> 
> 时间：2012-04-04T08:50:24.217
> 
> 标签：java, parsing, newline

我正在尝试使用 LineNumberReader 来获取文件中的空行数。但是我无法获得这样的信息。以下是我正在使用的代码

```
LineNumberReader reader  = new LineNumberReader(new FileReader(this.file));
int cnt = 0;
String lineRead = "";
while ((lineRead = reader.readLine()) != null) {
  if(lineRead.length == 0){
    cnt++;
  }
}

reader.close();
System.out.println(cnt); 
```

有谁知道如何获得这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:25:30.537

尝试

```
if(lineRead.isEmpty()){ 
```

或者

```
if(lineRead.trim().isEmpty()){ 
```

如果您考虑将仅包含空格或制表符的行清空

# iphone - 是否有任何其他样式呈现 UIAlertView？

> ID：10007816
> 
> 赞同：0
> 
> 时间：2012-04-04T08:50:40.697
> 
> 标签：iphone, uialertview

我看到一个应用程序，其中通知/警报视图来自 iPhone 屏幕顶部，带有渐变黑色。

如果有的话，我可以提供有关警报/通知样式的详细信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:56:32.363

你可以使用这个链接......也许它会帮助你。另一种方法是使用 UIActionsheet。

[http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/](http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:55:52.233

不幸的是没有。并且自定义原始 UIAlertView 是一个技巧，它作用于子视图层次结构。您可以对其进行子类化并更改其背景颜色，覆盖该`drawRect:`方法并使用这些代码行删除原始背景

```
- (void)didAddSubview:(UIView *)subview {
if ([subview isMemberOfClass:[UIImageView class]]) {
    [subview removeFromSuperview];
}
} 
```

但这是一个技巧，它可能会在未来的 iOS 版本中丢失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:54:37.497

有`UIActionSheet`——但它是从底部加注的。

# c++ - 不更新坐标位置？

> ID：10007822
> 
> 赞同：0
> 
> 时间：2012-04-04T08:50:55.110
> 
> 标签：c++, opengl

我已经成功地在 OpenGL (C++) 中旋转了一个矩形。我正在制作一个使用“分离轴定理”测试两个矩形碰撞的程序。要使用该定理，我需要矩形每个角的 x 和 y 坐标，但我的问题是，虽然我调用`glRotatef(...)`，但矩形角的坐标也没有更改为它们旋转的值，但是矩形按应有的方式旋转。调用 glRotatef 后如何更新矩形的坐标？

代码：

```
// float r1.x[4] and r1.y[4] hold the x and y position of each of the 4 corners, starting with the upper left (r1.x[0], r1.y[0])
    glLoadIdentity();
    glTranslatef((r1.x[0] + r1.x[2]) / 2, (r1.y[1] + r1.y[3]) / 2, 0); // Translates matrix to center of rectangle
    glRotatef(r1.angle, 0, 0, 1);
    glTranslatef(-((r1.x[0] + r1.x[2]) / 2), -((r1.y[1] + r1.y[3]) / 2), 0); // Translates back
    r1.angle++;

    glBegin(GL_QUADS);
        glVertex2f(r1.x[0], r1.y[0]);
        glVertex2f(r1.x[1], r1.y[1]);
        glVertex2f(r1.x[2], r1.y[2]);
        glVertex2f(r1.x[3], r1.y[3]);
    glEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:01:23.097

OpenGL 中的转换调用（如`glTranslatef`和`glRotatef`）会更新一个内部转换矩阵，该矩阵在绘制到屏幕上之前乘以您提供的点。OpenGL 根本不会触及您的数据。

一般来说，这就是你想要的。你有一个在时间上是恒定的模型，但它会被改变。

但是，如果您确实需要更新数据，则需要创建自己的转换矩阵，手动将其相乘，然后使用干净的转换矩阵进行绘制（使用`glLoadIdentity`）

不过，您*可以*从 OpenGL 获得一些帮助，因为您可以从 OpenGL 获得转换矩阵，但我不推荐这样做。数学并不难，你会很高兴学习如何去做。

# oracle - Oracle + Zend 框架。获取三个字段的一个非空值

> ID：10007826
> 
> 赞同：1
> 
> 时间：2012-04-04T08:51:14.397
> 
> 标签：oracle, zend-framework

是下表：

**桌子**

*身份证 (pk)*

*   数字
*   细绳
*   布尔型（1 或 0）

    完成表格时 - 设置主键。并且三个字段之一采用指定的值。

    需要从这个表中获取数据如下： **id -> value** 其中value是这个表中的值之一。

    问题是你是否只能获取到有值的字段，即粗略**选择id，如果不为空，则选择数字，如果不为空，则为字符串，如果不为空，则为布尔**？）以获得一个没有额外的空字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:24:14.423

```
$select = ...
$select->columns(
    "id" => "id",
    "value" => new Zend_Db_Expr(
        "COALESCE(number_column_name, string_column_name, bool_column_name)"
    )
); 
```

# android - 未找到 Android 应用程序类

> ID：10007828
> 
> 赞同：0
> 
> 时间：2012-04-04T08:51:22.197
> 
> 标签：android, ant, android-emulator, intellij-idea

在我的应用程序中，我使用 RoboGuice，RoboGuice 的配置需要添加一个应用程序类，并在应用程序标签的 AndroidManifest.xml 文件中使用“android:name”属性指定它。

所以这就是我在清单中的 applicaiton-tag 的样子：

`<application android:label="Worktime" android:icon="@drawable/logo" android:name=".guice.Application">`

当我在我的 IDE (IntelliJ) 中编译并将其部署到我的设备时，这始终有效并且仍然有效。但是，当我想使用 Ant 运行测试时（并且仅通过 Ant，这在 IDE 中仍然有效）我在控制台上出现此错误：

`[exec] android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests:INSTRUMENTATION_RESULT: shortMsg=Unable to instantiate application eu.vranckaert.worktime.guice.Application: java.lang.ClassNotFoundException: eu.vranckaert.worktime.guice.Application in loader dalvik.system.PathClassLoader@44e88928 [exec] INSTRUMENTATION_RESULT: longMsg=java.lang.RuntimeException: Unable to instantiate application eu.vranckaert.worktime.guice.Application: java.lang.ClassNotFoundException: eu.vranckaert.worktime.guice.Application in loader dalvik.system.PathClassLoader@44e88928`

这以前有效，但自从我将我的“Android SDK 工具”升级到修订版 17 并将“Android SDK 平台工具”升级到修订版 11 后开始失败。

任何人也有这个问题或谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:15:19.517

```
I think that the error saying

java.lang.ClassNotFoundException: 

is occur only when you have create new class Activity and not declare(register) that in manifest file

please check if you have any new activity and not declare(register) that activity in manifest file 

Thanks. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:58:23.930

我们可能遇到了同样的[错误](https://stackoverflow.com/questions/10340604/is-ant-1-8-used-with-androids-sdk-buildafter-tools-revision-17-buged)——在我的情况下，解决方案是将 Ant 目标分成两个调用（即“ant myParameters myTarget1 myTarget2”和“ant myParameters debug delivery”）。无论如何，希望这对您有用 - Google 需要为其未记录/错误的更改添加更好的支持（并且 stackoverflow 不是解决并非源于愚蠢的问题的最佳场所，因为复杂问题的生命周期不会太长这里）。

# r - 黄土线没有正确绘制

> ID：10007830
> 
> 赞同：6
> 
> 时间：2012-04-04T08:51:25.823
> 
> 标签：r, plot, line, predict, loess

我无法将黄土平滑加置信限拟合到残差散点图。

我的模型是身高~体重+胸围。为了检查胸围的线性度，我拟合了一个没有胸围的模型（即身高~体重），并绘制了这个模型的残差与胸围的关系。到现在为止还挺好。然后我尝试使用`loess()`并`predict()`绘制一条黄土线，加上置信限。结果看起来像这样（在图片中我只绘制了中心线，但 CI 线看起来一样）：

[散点图中的黄土问题](https://plus.google.com/photos/101234827474522282864/albums/5727461774276794209)

这些点是正确的（当我将黄土拟合为看起来正确的点时），但由于某种原因，这条线没有按照我的预期绘制。我的代码如下：

```
# bf.red = data set; mod.nch = model; chestc = chest circumference;
# loess = loess model; lo.pred = predict loess

plot(bf.red$chestc           #Chest circumference
 ,residuals(mod.nch))    #Residuals from height ~ weight model

loess <- loess(mod.nch$residuals ~ bf.red$chestc)
lo.pred <- predict(loess, se=T)

lines(bf.red$chestc,lo.pred$fit,pch=2) #Main line
lines(bf.red$chestc,lo.pred$fit+2*lo.pred$s, lty=2) #rough & ready CI
lines(bf.red$chestc,lo.pred$fit-2*lo.pred$s, lty=2) 
```

希望你能帮忙。非常感谢，

垫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T09:16:01.910

`lines`按它们出现的顺序连接这些点，这有时是不可取的。您可以按如下方式对它们进行排序：

```
i <- order(bf.red$chestc)
lines(bf.red$chestc[i], lo.pred$fit[i])
... 
```

# ios - 如何不通过 appstore 将 ios 应用程序分发给我的欧洲企业客户

> ID：10007831
> 
> 赞同：1
> 
> 时间：2012-04-04T08:51:27.757
> 
> 标签：ios, distribution, enterprise

我们创建了一个消息应用程序，并定期将更新发布到应用程序商店。这样，应用商店总是包含最新和最好的，并且存在错误的风险很小。

我们希望为我们的业务客户（进行内部消息传递）构建一个稳定版本，该版本很少或从不更新。我们的客户希望自己控制更新速度。

告诉他们的员工**不要升级**是行不通的，因为新安装总是从应用商店获得最新版本。

问题：

1.  我可以使用我自己公司的企业分发证书并将应用程序二进制文件交付给我的客户（例如，每个客户使用不同的二进制文件）吗？

2.  还是应该在应用商店中为每个客户创建不同的版本？

3.  还是我应该强迫我的客户要求他们自己的企业分销证书，这是我想避免的麻烦？

我想我的第一个问题的答案是否定的，正如[iOS 企业应用程序开发程序能否用于将应用程序分发给其他公司但不能通过应用商店？](https://stackoverflow.com/questions/9625553/can-the-ios-enterprise-app-development-program-be-used-to-distribute-apps-to-oth)

2 很烦人，因为世界上每个人都可以看到并安装该应用程序

3 很烦人，因为它需要我的客户的时间加上一份法律合同，这样我才能为我的客户申请证书，使用他们的私钥，......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:54:30.283

根据您的合同，您不得这样做。

但每个人都这样做。我与一位苹果员工进行了电话联系，他们告诉我他们不会支持那个案子。

和成像：苹果应该检查所有企业部署程序的所有安装吗？不可能，……即使是苹果。

我只会尝试安装不超过 1000 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:05:36.887

如果客户拥有批量购买计划帐户，iOS 开发人员计划允许您将自定义 B2B 应用程序直接分发给他们。

> **自定义 B2B 应用程序**
> 
> 您还可以直接向拥有批量购买计划帐户的企业客户提供自定义 B2B 应用程序。自定义 B2B 应用程序提供独特的定制解决方案，以满足特定的业务需求或要求。

* * *

如果您的客户不在美国，我推荐第三种选择：让我们的客户拥有自己的 iOS Enterprise Developer 帐户。

# asp.net-mvc - 如何为视图模型创建具有属性的 ActionLink

> ID：10007832
> 
> 赞同：6
> 
> 时间：2012-04-04T08:51:28.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding, actionlink

我有一个带有 Filter 属性的 ViewModel，该属性具有许多用于过滤数据的属性

例子：

```
class MyViewModel : IHasFilter
{
     public MyData[] Data { get; set; }
     public FilterViewModel Filter { get; set; }
}

class FilterViewModel
{
    public String MessageFilter { get; set; }
    //etc.
} 
```

这在使用我的视图时工作正常。我可以设置属性`Model.Filter`并将它们传递给控制器​​。我现在要做的是创建一个`ActionLink`具有上述格式的查询字符串。

我的视图从上面生成的查询字符串如下所示：

```
http://localhost:51050/?Filter.MessageFilter=Stuff&Filter.OtherProp=MoreStuff 
```

我需要在一个不同的视图中为网格中的每一行生成一个 ActionLink，这些行转到上面的视图。

我试过了：

```
Html.ActionLink(
    item.Message,
    "Index",
    "Home",
    new { Filter = new { MessageFilter = item.Message, }, },
    null); 
```

我还尝试将`routeValues`参数设置为：

```
new MyViewModel { Filter = new FilterViewModel { MessageFilter = item.Message, }, }, 
```

但是这些不会像上面那样生成查询字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:39:23.673

有趣的问题（+1）。我假设目的是使用默认模型绑定器将查询字符串参数绑定到您的`Action`参数。

开箱即用我不相信该`ActionLink`方法会为您做到这一点（当然没有什么可以阻止您自己滚动）。查看反射器我们可以看到，当`object`被添加到 时`RouteValueDictionary`，只添加了键值对。这是添加键值对的代码，您可以看到没有遍历对象属性。

```
foreach (PropertyDescriptor descriptor in TypeDescriptor.GetProperties(values))
{
    object obj2 = descriptor.GetValue(values);
    this.Add(descriptor.Name, obj2);
} 
```

所以对于你的对象

```
var values = new { Filter = new Filter { MessageFilter = item.Message } } 
```

添加的键是`Filter`，值是您的`Filter`对象，它将评估为您的对象类型的完全限定名称。

这样做的结果是`Filter=Youre.Namespace.Filter`。

***根据您的确切需求***编辑可能的解决方案****

 **** * *

**扩展方法** *完成工作*

*请注意，它使用静态框架方法`ExpressionHelper`和`ModelMetadata`（现有助手也使用）来确定默认模型绑定器将分别理解的适当名称和属性值。*

```
public static class ExtentionMethods
{
    public static MvcHtmlString ActionLink<TModel, TProperty>(
        this HtmlHelper<TModel> helper,
        string linkText,
        string actionName,
        string controllerName,
        params Expression<Func<TModel, TProperty>>[] expressions)
    {
        var urlHelper = new UrlHelper(helper.ViewContext.HttpContext.Request.RequestContext);

        var url = urlHelper.Action(actionName, controllerName);

        if (expressions.Any())
        {
            url += "?";

            foreach (var expression in expressions)
            {
                var result = ExpressionHelper.GetExpressionText(expression);

                var metadata = ModelMetadata.FromLambdaExpression<TModel, TProperty>(expression, helper.ViewData);

                url = string.Concat(url, result, "=", metadata.SimpleDisplayText, "&");
            }

            url = url.TrimEnd('&');
        }

        return new MvcHtmlString(string.Format("<a href='{0}'>{1}</a>", url, linkText));
    }
} 
```

**样品模型**

```
public class MyViewModel
{
    public string SomeProperty { get; set; }

    public FilterViewModel Filter { get; set; }
}

public class FilterViewModel
{
    public string MessageFilter { get; set; }
} 
```

**行动**

```
public ActionResult YourAction(MyViewModel model)
{
    return this.View(
        new MyViewModel
        {
            SomeProperty = "property value",
            Filter = new FilterViewModel
            {
                MessageFilter = "stuff"
            }
        });
} 
```

**用法**

*`params`可以通过方法的最后一个参数将任意数量的视图模型属性添加到查询字符串中。*

```
@this.Html.ActionLink(
    "Your Link Text",
    "YourAction",
    "YourController",
    x => x.SomeProperty,
    x => x.Filter.MessageFilter) 
```

**标记**

```
<a href='/YourAction/YourController?SomeProperty=some property value&Filter.MessageFilter=stuff'>Your Link Text</a> 
```

*应该对查询字符串进行编码以安全地在 URL 中传递，而不是使用`string.Format`you could use `TagBuilder`，并且此扩展方法需要一些额外的验证，但我认为它可能很有用。另请注意，尽管此扩展方法是为 MVC 4 构建的，但它可以很容易地针对以前的版本进行修改。直到现在，我才意识到其中一个 MVC 标签是针对版本 3 的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:58:48.483

您可以从一个实例创建一个 RouteValueDictionary `FilterViewModel`，然后使用`ToDictionary`它传递给另一个 RouteValues，所有键都以 . 为前缀`'Filter.'`。

更进一步，您可以构造一个`RouteValueDictionary`接受前缀的特殊覆盖（因此使其对其他场景更有用）：

```
public class PrefixedRouteValueDictionary : RouteValueDictionary
{
  public PrefixedRouteValueDictionary(string prefix, object o)
    : this(prefix, new RouteValueDictionary(o))
  { }

  public PrefixedRouteValueDictionary(string prefix, IDictionary<string, object> d)
    : base(d.ToDictionary(kvp=>(prefix ?? "") + kvp.Key, kvp => kvp.Value))
  { }
} 
```

有了它，您现在可以执行以下操作：

```
Html.ActionLink( 
  item.Message, 
  "Index", 
  "Home", 
  new PrefixedRouteValueDictionary("Filter.", 
    new FilterViewModel() { MessageFilter = item.Message }), 
  null); 
```

但是，需要注意的是`Add`，`Remove`、`TryGetValue`和`this[string key]`方法不会被更改以考虑`prefix`. 这可以通过定义`new`这些方法的版本来实现，但是因为它们不是虚拟的，所以它们只能由知道他们正在与 a`PrefixedRouteValueDictionary`而不是 a交谈的调用者工作`RouteValueDictionary`。***

# javascript - ExtJS 网格选择模型

> ID：10007833
> 
> 赞同：1
> 
> 时间：2012-04-04T08:51:29.230
> 
> 标签：javascript, extjs, extjs4

我有一个 ExtJS 网格，其中有一个映射到它的商店。

商店的 JSON 响应包含 20 个字段，但我只映射了商店中的 10 个字段。我是否可以在无需在商店中映射它们的情况下获得其他 10 个字段，或者我是否有必要将所有字段映射到商店。在网格的行选择事件上执行此操作。至于代码，我可以创建网格、映射存储、触发事件，甚至可以使用映射的 10 字段获取所选行的记录。

有什么建议么 ？？

根据 Shekhar 的要求：

> 店铺定义

```
Ext.define('gdoc.store.PrintPaperStore', {
    extend: 'Ext.data.Store',

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            storeId: 'PrintPaperStore',
            proxy: {
                type: 'ajax',
                url: 'urlToRetrieveTheJSON',
                reader: {
                    type: 'json',
                    root: 'root'
                }
            },
            fields: [{
                    mapping: 'value',
                    name: 'value'
                },
                {
                    mapping: 'display',
                    name: 'display'
                }
            ]
        }, cfg)]);
    }
}); 
```

> JSON响应：

```
{
     "root": [{
         "value": "COATED115",
         "display": "Coated recycled paper (115gms)",
         "description": "Good quality",
         "extra": "EXTRA INFO"
     }, {
         "value": "COATED135",
         "display": "Coated recycled paper (135gms)",
         "description": "Good quality"
     }, {
         "value": "OFFSET",
         "display": "Offset recycled paper (80gms)",
         "description": "Good quality",
         "extra": "EXTRA INFO"
     }, {
         "value": "OTHER",
         "display": "Other paper (client to order)",
         "description": "Good quality",
         "extra": "EXTRA INFO"
     }]
 } 
```

`value`正如你所看到的，我只映射`display`了.`JSON``store`

我是否可以检索 的值，`description`而不`extra`必将它们映射到`store`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:09:10.593

不可以。模型或商店必须设置您希望从 JSON 数据中获得的所有字段。

我很困惑为什么你不想映射额外的字段？这纯粹是为了节省时间，并希望有一种更快的方法来访问数据？还是您希望字段名称是动态的？

如果是动态原因，请查看此帖子以获取解决方案。[使用 ExtJS 4 的动态模型](https://stackoverflow.com/questions/5751289/dynamic-model-with-extjs-4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:18:48.933

您可以访问模型上的 .raw 属性，该属性将包含来自阅读器的原始 JSON。

# android - Android Media Recorder 启动失败异常

> ID：10007834
> 
> 赞同：2
> 
> 时间：2012-04-04T08:51:34.120
> 
> 标签：android, audio, mediarecorder

我在android中遇到媒体记录器问题。我正在录制与 LG P500 配合良好的音频，但相同的代码在三星 GT - S5360 上不起作用。我收到错误，因为启动失败 -22。

这是我正在使用的代码：

```
final MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL‌​);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GP‌​P);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(path);
try {
    recorder.prepare();
    recorder.start();
} catch (Exception e) { Log.d(TAG, "Exception : " + e); } 
```

当调试在 logcat 中导致为 null 时。

请建议我一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-11T06:10:05.773

我遇到了同样的问题，我尝试从 Play 商店安装录音机进行检查。它也不允许我录制 VOICE_CALL。从那我意识到一些设备制造商不支持这一点。因此，如果设备不支持 VOICE_CALL，请使用 MIC 进行录音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T10:04:46.003

op建议的许可对我不起作用，可能是因为它不存在:)

如果您收到此错误，请检查您设置媒体记录器的方式。就我而言，它也仅在某些设备中失败。我正在为所有运行 Os 版本 > API 10 的设备执行此操作：

```
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_WB);       
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB); 
```

结果发现故障设备正在运行 JB 但不支持宽带，因此将其更改为原始/窄带有效：

```
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);      
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-22T07:29:27.483

根据实际海报的评论......他在评论中提出了他的答案。将其放入实际答案中，希望对其他人有所帮助：

OP 添加了以下权限，他的代码对他很有效：

`<uses-permission android:name="android.permission.STORAGE" />`

# ios - iOS 启动画面的持续时间 (Default.png)

> ID：10007835
> 
> 赞同：4
> 
> 时间：2012-04-04T08:51:44.110
> 
> 标签：ios, objective-c, ios5

我为我的 iPad 应用程序使用**Default.png文件。**它显示正确，但我找不到修改启动画面持续时间的方法。有人有什么建议吗？谷歌有许多网站展示了如何设置开始屏幕，但找不到解决我的问题的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-04T09:01:25.407

[启动画面的人机界面指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/LaunchImages.html)的第一条规则是：不要使用启动画面。第二条规则是：不要使用闪屏！：

> 提供启动图像以改善用户体验。
> 
> 避免使用您的启动图像作为提供以下内容的机会：
> 
> “应用程序入口体验”，例如闪屏
> 
> 关于窗口
> 
> 品牌元素，除非它们是应用程序首屏的静态部分

如果您绝对必须包含一个长时间的启动画面，并且有充分的理由这样做，那么通常的方法是抛出一个`UIImageView`包含您启动图像的副本，例如`application:didFinishLaunchingWithOptions:`- 这应该提供一个冗长的启动画面的错觉屏幕。

但请不要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T08:57:26.833

使用“启动画面”（徽标等）不是 Default.png 的想法！

从 Apple读取[HIG 。](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)

（启动）屏幕（称为加载屏幕）不适用于徽标显示或类似的东西。启用多任务处理后，“启动画面”很少出现。启动屏幕应该像苹果应用程序一样，只显示第一个应用程序屏幕中出现的界面，没有任何本地化字符串等。

还要记住：iOS 设备的速度越快，您看到的 Default.png 就越短。因此，请避免将其用于任何重要的 CI/CD 内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-04T08:56:40.160

默认图像在应用程序加载时显示，并在应用程序准备就绪后立即关闭。并且没有 API 可以控制该持续时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T08:58:46.733

从技术上讲，您无法修改“默认”图像停留在那里的持续时间；它被设计为只是一个“预示”应用程序实际启动的临时图像，而不是专门设计为启动屏幕。

我建议您通过在 -application:didFinishLaunchingWithOptions: 方法中启动应用程序时向屏幕添加图像视图来保持“启动画面效果”。然后，您可以设置一个计时器，该计时器调用一种方法来在您希望的指定时间之后为飞溅设置动画。它会比您指定的时间长一点，具体取决于应用程序实际加载所需的时间，但它会产生您所追求的效果。

您可以将图像视图的图像设置为 [UIImage imageNamed:@"Default"]，它将为您访问该默认图稿。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:56:59.840

您无法更改持续时间。如果您希望它显示更长的时间，您可以将相同的图像添加到您在加载数据时显示的视图中！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-11T03:50:30.480

这里有一篇很好的博客文章，介绍了如何使用`UIImageView`带有计时器的 a 来创建启动画面：

[http://nullpointr.wordpress.com/2012/02/19/iphone-dev-how-to-implement-a-splash-screen/](http://nullpointr.wordpress.com/2012/02/19/iphone-dev-how-to-implement-a-splash-screen/)

对于仍在学习在 iOS 中做事的最佳方式的初学者很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-05T07:32:14.627

正如@Conrad Shultz 回答的那样，启动画面只能通过`LaunchScreen.storyboard`Xcode 提供的文件使用。

但是，在极少数情况下，您确实希望延长启动画面：

*   在应用程序启动之前下载大量文件，因为应用程序依赖于它们。
*   其他原因...

这是这样做的方法：

在里面`AppDelegate`，`didFinishLaunchingWithOptions`你应该：

1.  创建具有**相同**初始图像和**相同**约束的 VC
2.  呈现它
3.  在给定时间后将其关闭

编码：

```
let splashVC = UIStoryboard(name: "Main", bundle: nil).instantiateViewController(withIdentifier: "splash")

    window?.makeKeyAndVisible()

    if let root = window?.rootViewController
    {
        root.present(splashVC, animated: false, completion: nil)
        let dispatchTime = DispatchTime.now() + 3

        // didFinishLaunchingWithOptions will return and this block will be executed afterwards, hence, async..
        DispatchQueue.main.asyncAfter(deadline: dispatchTime, execute: {
            root.presentedViewController?.dismiss(animated: false, completion: nil)
        })
    }
} 
```

# mysql - 在不影响某些表的情况下进行测试

> ID：10007845
> 
> 赞同：0
> 
> 时间：2012-04-04T08:52:06.360
> 
> 标签：mysql, cakephp, testing

目前，我需要调试我们系统中的几个函数以确定它们是否正常工作。

这种情况基本上是我留下了别人的 CakePHP 结构，这使我无法知道代码的进出。这是由于缺乏时间和缺乏文档。

我需要在这个系统上运行测试，但是当我创建新订单等时，它会导致我们的报告页面上的数据不正确。这是不允许的，基本上有很多模型通过简单地创建其他行来将数据保存到报告中。

如果我以某个用户身份登录，这里最简单的解决方案是不创建任何报告行。然后我只需做一个条件并确定我是否应该在数据库中插入报告行。( `if ($bool_tester) return FALSE; else /* Insert data */`)
然而，这需要在模型中获取会话数据，我读过这是一个糟糕的解决方案。我不能简单地在函数中运行一个额外的参数，因为该函数在很多文件中的很多地方被调用。

所以我的问题基本上是；我是否应该在模型中包含会话数据，或者是否有任何其他漂亮的解决方案使我在测试时不插入这些行。

通过控制器定义会话值在这里也不是一个顺利的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:53:29.337

在您的开发环境中进行测试，而不是在实时站点上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:06:59.070

您是否使用单元测试进行测试？[CakePHP 确实支持这一点](http://book.cakephp.org/1.3/en/view/1196/Testing)。当你这样做时，你可以在你的设置中为测试[存根或模拟数据。](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.stubs)[Cake 也支持这一点。](http://book.cakephp.org/1.3/en/view/1201/Preparing-test-data)

# visual-studio-2010 - Crystal Reports - 显示数据集中的标题，而不是列名

> ID：10007846
> 
> 赞同：0
> 
> 时间：2012-04-04T08:52:19.920
> 
> 标签：visual-studio-2010, crystal-reports

我有一个水晶报表，它只是来自我在运行时填充的数据集。问题是，在报告中，我希望某些列具有不同的标题 - 例如，我的报告中有以下字段

```
Sell Total
Profit Total
Net Total 
```

我希望所有这些列在我的报告中都显示为“总计”-我尝试设置“标题”属性，但 Crystal 似乎忽略了这一点，并且 IFIeldObject 似乎无法更改文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:22:22.393

克里斯，

想象你正在尝试做的事情有点棘手。也就是说，一种方法可能是实际上只是隐藏 Crystal Reports 正在使用的字段，并在组/节页脚或您在其中看到这些的任何区域中制作您自己的公式驱动标签。

除非我误解了，而且它是一个不能轻易替换标题的地方（想到图表）。

# sql - 简单的 SQL SELECT INTO Graph

> ID：10007859
> 
> 赞同：0
> 
> 时间：2012-04-04T08:53:10.847
> 
> 标签：sql, sql-server, xml, select, graph

我无法将 SQL Select 语句输出到我的 XML 以用于我的图表

我有这些结果

`December 2011` `470` `FRESENIUS`

`January 2012` `434` `FRESENIUS`

`February 2012` `278` `FRESENIUS`

`February 2012` `2` `STORESID`

我需要像这样输出它们，这样我就可以循环我的代码并生成 XML

`Month Year` `FRESNIUS` `STORESID`

`December 2011` `470` `0`

`January 2012` `434` `0`

`February 2012` `278` `2`

请注意我没有包括标题，这些都是列结果。而且，STORESID 和 FRESNIUS 不是静态值。存在多个存储器，因此我还需要动态扩展列数。

我有点需要输出第二个以通过我已经拥有的 PHP 正确生成 XML。或者有没有其他合适的方法。

谢谢。

在下面查询我正在谈论的输出

```
选择  
        DATENAME(month, orderdate) + ' ' + CAST(Year(orderdate) AS VARCHAR(4)) AS 'Month Year' ,
        count(*) '订单数',
        存储密钥
来自订单
通过...分组
        存储密钥，
        DATENAME(month, orderdate) + ' ' + CAST(Year(orderdate) AS VARCHAR(4)),
        CAST(Year(orderdate) AS VARCHAR(4)) + RIGHT('0' + CAST(Month(orderdate) AS VARCHAR(2)),2)
订购方式    
        存储密钥，
        CAST(Year(orderdate) AS VARCHAR(4)) + RIGHT('0' + CAST(Month(orderdate) AS VARCHAR(2)),2)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:04:06.290

您可以将表连接到自身。如果我对列名做出假设，假设 FRESNIUS 或 STORESID 可能不存在，并使用公用表表达式（未经测试！）：

```
WITH date_fresnius AS (
    SELECT [Month Year], FRESNIUS
    FROM original_table
)
, date_storesid AS (
    SELECT [Month Year], STORESID
    FROM original_table
)
SELECT
      ISNULL( f.[Month Year], s.[Month Year]) AS [Month Year]
    , ISNULL( f.FRESNIUS, 0 ) AS FRESNIUS
    , ISNULL( s.STORESID, 0 ) AS STORESID
FROM
    date_fresnius f
    FULL OUTER JOIN date_storesid s ON (f.[Month Year] = s.[Month Year]) 
```

如果您始终拥有 FRESNIUS 记录，则可以改用 LEFT JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:08:35.663

我不是 100% 确定您需要的 XML 输出，但您可以利用[SQL-Servers FOR XML 子句](http://msdn.microsoft.com/en-us/library/ms190922.aspx)和 PIVOT 函数。这应该让你开始：

```
CREATE TABLE #Test (GraphDate DATETIME, Value INT, Type VARCHAR(50))
INSERT #Test VALUES 
    ('01/12/2011', 470, 'FRESENIUS'),
    ('01/01/2012', 434, 'FRESENIUS'),
    ('01/12/2012', 278, 'FRESENIUS'),
    ('01/02/2012', 2, 'STORESID')

SELECT  DATEPART(YEAR, GraphDate) [Year], 
        DATENAME(MONTH, GraphDate) [Month], 
        ISNULL(FRESENIUS, 0) [FRESENIUS],
        ISNULL(STORESID, 0) [STORESID]
FROM    #Test
        PIVOT
        (   SUM(Value)
            FOR Type IN ([FRESENIUS], [STORESID])
        ) PivotTable
FOR XML PATH('row'), ROOT

DROP TABLE #Test 
```

* * *

**编辑**

以下是您根据您给出的查询要求的基本查询。

```
SELECT  DATENAME(MONTH, OrderDate)  + ' ' + DATENAME(YEAR, OrderDate) [MonthYear], 
        ISNULL(FRESENIUS, 0) [FRESENIUS],
        ISNULL(STORESID, 0) [STORESID]
FROM    Orders
        PIVOT
        (   COUNT(StorerKey)
            FOR StorerKey IN ([FRESENIUS], [STORESID])
        ) PivotTable
ORDER BY  DATEPART(YEAR, OrderDate), DATEPART(MONTH, OrderDate) 
```

* * *

**编辑 2**

我认为`PIVOT`SQL-Server 2000 不支持。您需要使用聚合函数：

```
SELECT  DATENAME(MONTH, OrderDate)  + ' ' + DATENAME(YEAR, OrderDate) [MonthYear], 
        COUNT(CASE WHEN StorerKey = 'FRESENIUS' THEN 1 END) [FRESENIUS],
        COUNT(CASE WHEN StorerKey = 'STORESID' THEN 1 END) [STORESID]
FROM    Orders
GROUP BY DATEPART(YEAR, OrderDate), DATEPART(MONTH, OrderDate), DATENAME(YEAR, OrderDate), DATENAME(MONTH, OrderDate)
ORDER BY  DATEPART(YEAR, OrderDate), DATEPART(MONTH, OrderDate) 
```

我认为某些`FOR XML`功能仍然可用，因此您仍然可以直接从 SQL 输出 XML。

* * *

**编辑 3**

```
DECLARE @SQL NVARCHAR(2000)
SELECT  @SQL = ISNULL(@SQL, '') + ', COUNT(CASE WHEN StorerKey = ''' + StorerKey + ''' THEN 1 END) [' + StorerKey + ']'
FROM    (   SELECT  DISTINCT StorerKey
            FROM    Orders
        ) Keys

SET @SQL = 'SELECT  DATENAME(MONTH, OrderDate) + '' '' + DATENAME(YEAR, OrderDate) [MonthYear]' + @SQL + 
            ' FROM    Orders
            GROUP BY DATEPART(YEAR, OrderDate), DATEPART(MONTH, OrderDate), DATENAME(YEAR, OrderDate), DATENAME(MONTH, OrderDate)
            ORDER BY  DATEPART(YEAR, OrderDate), DATEPART(MONTH, OrderDate)'

EXECUTE SP_EXECUTESQL @SQL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:28:27.863

根据您的查询：

```
SELECT
    DATENAME(MONTH, orderdate) + ' ' + CAST(YEAR(orderdate) AS VARCHAR(4)) AS [Month Year]
    COUNT(CASE storerkey WHEN 'FRESNIUS' THEN 1 END) AS FRESNIUS,
    COUNT(CASE storerkey WHEN 'STORESID' THEN 1 END) AS STORESID
FROM orders
GROUP BY YEAR(orderdate), MONTH(orderdate), DATENAME(MONTH, orderdate)
ORDER BY YEAR(orderdate), MONTH(orderdate) 
```

输出：

```
Month Year      FRESNIUS   STORESID
December 2011        470          0
January 2012         434          0
February 2012        278          2 
```

# sql-server-2008 - 获取一周的开始和结束日期？在 Sql 服务器中？

> ID：10007861
> 
> 赞同：6
> 
> 时间：2012-04-04T08:53:17.250
> 
> 标签：sql-server-2008

在sql中，如何获取特定月份的开始和结束日期。你能帮助我吗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T14:13:25.940

以下将适用于您认为一周的第一天（周日、周一等），`SET DATEFIRST`如果您想更改默认设置，请确保使用。`SET DATEFIRST 1`将使一周的第一天成为星期一。

```
SELECT  DATEADD(DAY, 1 - DATEPART(WEEKDAY, GETDATE()), CAST(GETDATE() AS DATE)) [WeekStart],
        DATEADD(DAY, 7 - DATEPART(WEEKDAY, GETDATE()), CAST(GETDATE() AS DATE)) [WeekEnd] 
```

* * *

**编辑**

我刚刚重新阅读了您的请求，我认为您可能会追求与我上面给出的不同的东西。如果您想要每月的第一天和最后一周的星期几，这将起到作用：

```
SELECT  DATENAME(WEEKDAY, DATEADD(DAY, 1 - DATEPART(DAY, GETDATE()), GETDATE())) [FirstDayOfMonth],
        DATENAME(WEEKDAY, DATEADD(DAY, - DATEPART(DAY, DATEADD(MONTH, 1, GETDATE())), DATEADD(MONTH, 1, GETDATE()))) [LastDayOfMonth] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T09:01:00.597

要获得一周的第一天使用：

```
select dateadd(wk, datediff(wk, 0, getdate()), 0) 
```

最后一天将是第一天 + 6：

```
select dateadd(wk, datediff(wk, 0, getdate()), 0) + 6 
```

警告：这是文化敏感的。检查[@@datefirst上的文档](http://msdn.microsoft.com/en-us/library/ms187766%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:36:22.297

您的要求不清楚：您认为一周的第一天和最后几天是什么？周日和周六？星期一和星期五？周一和周日？但是对于许多与日期相关的查询，最好的解决方案是创建一个[日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)。这使您能够根据您的定义轻松设置周、月和年的第一天和最后一天，必要时甚至可以设置多种格式。

如果您使用诸如财政年度、工作日等定义因国家甚至公司而异的概念，这将特别有用。当您的逻辑有例外时，这也是最简单的解决方案，例如，一年中的第一周与“正常”周有不同的规则。

使用日历表，您可以预先填充一周的第一天和最后一天，然后您的查询可能是这样的：

```
-- first/last days stored as dates in their own columns
select FirstDayOfThisWeek, LastDayOfThisWeek
from dbo.Calendar
where BaseDate = @SomeDate

-- first/last days stored as bit flags
select max(BaseDate)
from dbo.Calendar
where BaseDate <= @SomeDate and IsFirstDayOfWeek = 0x1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-01T09:08:35.660

下面是一个案例语句，您可以使用它来为您的日期值创建一个 Weekbegin。这将使您的星期从星期一、星期二或星期三...等开始，具体取决于您设置为@pDate 的星期几。

创建参数

```
DECLARE @pDate Date = NULL --Replace with your date, which will also be the first day of the week
DECLARE @pDatePart SMALLINT = DATEPART(dw, @pDate) 
```

然后在您的选择之后放置这个案例声明

```
CASE 
    WHEN DATEPART(dw, CAST(DATEVALUE AS DATE)) BETWEEN @pDatePart  AND 7 THEN DATEADD(d, (DATEPART(dw, CAST(DATEVALUE AS DATE))*-1)+@pDatePart, CAST(DATEVALUE AS DATE))
    WHEN DATEPART(dw, CAST(DATEVALUE AS DATE)) BETWEEN 1 AND @pDatePart-1 THEN DATEADD(d, (DATEPART(dw, CAST(DATEVALUE AS DATE))*-1)+(@pDatePart-7), CAST(DATEVALUE AS DATE))
    END
    AS DynamicWeekBegin 
```

您总是可以通过使用 dateadd(d, 6, THE CASE STATEMENT) 获得一周的最后日期

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T10:51:30.423

这里我给

周、月、季度、半年、年开始和结束日期。

```
 Select CONVERT(varchar(50), GETDATE(),105) 'GETDATE' ,
       CONVERT(varchar(50), DATEADD(DAY, 2 - DATEPART(WEEKDAY, GETDATE()), CAST(GETDATE() AS DATE)),105) [WeekStart],
CONVERT(varchar(50),DATEADD(DAY, 8 - DATEPART(WEEKDAY, GETDATE()), CAST(GETDATE() AS DATE)) ,105)[WeekEnd],
CONVERT(varchar(50),DATEADD(dd, -DAY(getdate()) + 1, getdate()),105) MonthStart,
CONVERT(varchar(50),DATEADD(dd, -DAY(DATEADD(mm, 1, getdate())), DATEADD(mm, 1, getdate())),105) MonthStart,
CONVERT(varchar(50), DATEADD(q, DATEDIFF(q, 0, GETDATE()), 0),105)  AS 'QStart Date',      
CONVERT(varchar(50), DATEADD(d, -1, DATEADD(q, DATEDIFF(q, 0, GETDATE()) + 1,0)),105) AS 'QEnd Date',
CONVERT(varchar(50), CAST(CAST(((((MONTH(GETDATE()) - 1) / 6) * 6) + 1) AS VARCHAR) + '-1-' + CAST(YEAR(GETDATE()) AS VARCHAR) AS DATETIME),105) StartOfHalfYear,
CONVERT(varchar(50),  CAST(CAST(((((MONTH(GETDATE()) - 1) / 6) * 6) + 6) AS VARCHAR) + '-1-' + CAST(YEAR(GETDATE()) AS VARCHAR) AS DATETIME),105)EndOfHalfYear,
CONVERT(varchar(50), DATEADD(yy, DATEDIFF(yy,0,getdate()), 0),105) AS StartOfYear,
CONVERT(varchar(50), DATEADD(yy, DATEDIFF(yy,0,getdate()) + 1, -1),105) AS EndOfYear 
```

# android - 发现Android数据库泄漏

> ID：10007870
> 
> 赞同：0
> 
> 时间：2012-04-04T08:53:38.223
> 
> 标签：android, database, getwritabledatabase

当我进入另一个活动以将新项目插入数据库时​​，返回然后进入该活动，它给了我一个错误：

```
04-03 18:53:26.914: E/Database(18134): Leak found
04-03 18:53:26.914: E/Database(18134): java.lang.IllegalStateException: /data/data/com.app.myapp/databases/BabyApp.db SQLiteDatabase created and never closed
04-03 18:53:26.914: E/Database(18134):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1695)
04-03 18:53:26.914: E/Database(18134):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:739)
04-03 18:53:26.914: E/Database(18134):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:761)
04-03 18:53:26.914: E/Database(18134):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:754)
04-03 18:53:26.914: E/Database(18134):  at android.app.ApplicationContext.openOrCreateDatabase(ApplicationContext.java:473)
04-03 18:53:26.914: E/Database(18134):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:193)
04-03 18:53:26.914: E/Database(18134):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
04-03 18:53:26.914: E/Database(18134):  at com.app.myapp.DatabaseHelper.open(DatabaseHelper.java:121)
04-03 18:53:26.914: E/Database(18134):  at com.app.myapp.SettingsActivity.init(SettingsActivity.java:80) 
```

这是 DatabaseHelper.java:121

```
database = dbHelper.getWritableDatabase(); 
```

这是 SettingsActivity 第 80 行代码：

```
if (!db.isOpen())
            db.open(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:55:35.167

确保在切换到另一个活动之前执行`db.close();`以关闭数据库

```
@Override
protected void onStop() {
    super.onStop();

    //closing database connection
    if(db != null)
        db.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:56:14.200

你也应该关闭它......当发生异常时关闭它，或者在任何情况下它都不应该因为它的系统资源而保持打开状态

# java - 如何在java中删除二维数组中的重复项？

> ID：10007872
> 
> 赞同：0
> 
> 时间：2012-04-04T08:53:43.593
> 
> 标签：java, duplicates

我正在尝试通过二维数组生成数独板：board[5][5]。数独板应该只包含唯一的元音。但是，我只使独特的元音连续出现。对于这些列，它们似乎仍然有重复项。我想如何使用到目前为止的代码生成一个没有重复的列？

这是我用于连续生成唯一字母的代码：

```
String [] vowels = {"A","E","I","O","U"};
String [][] board = new String [vowels.length][5];

public Actions(){
    int rows = 5;
    for(int row = 0;row<rows;row++){
        ArrayList<String> tempVowels = new ArrayList<String>(Arrays.asList(vowels));
        int numVowPerLine = (int)Math.floor(Math.random()*4);
        for(int j = 0;j<numVowPerLine;j++){
            do{
                int pos = (int)Math.floor(Math.random()*5);
                if(board[row][pos] == null){
                    int temp = (int)Math.floor(Math.random()*tempVowels.size());
                    board[row][pos] = tempVowels.get(temp);
                    tempVowels.remove(temp);
                    break;
                }   
            }while(true);
        }

    } 
```

学分：L7ColWinters

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:23:48.570

这与一个众所周知的问题有关，称为[Rooks 问题](http://en.wikipedia.org/wiki/Rook_polynomial#Rooks_problems)。

我可以建议一个更简单的循环吗？

编辑：阅读评论后，我发现问题需要应用于每个元音。在我看来，这更具可读性：

```
java.util.Random random = new Random();

boolean[] r_occupied;
boolean[] c_occupied;

for (i = 0; i < vowels.length; i++)
  {
    // Clear the 'occupied' information
    r_occupied = new boolean[5];
    c_occupied = new boolean[5];

    // we will put vowel[i] 'count' times into the 'board'
    count = random.nextInt(5);

    for (j = 0; j < count; j++)
      {
        // generate a random row
        row = random.nextInt(5);

        // if it is already occupied, select the next one
        while (r_occupied[row])
          row = (row + 1) % 5;

        // generate a random column
        col = random.nextInt(5);

        // if it is already occupied, select the next one
        while (c_occupied[col])
          col = (col + 1) % 5;

        /* put the vowel at board[row][col] */
        r_occupied[row] = true;
        c_occupied[col] = true;
        board[row][col] = vowel[i];
      }
  } 
```

注意：它会覆盖一些元音，但这应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:57:57.870

1.  在一行中添加一个额外的元音字符之前，检查它是否已经包含这个元音并且`continue`你可以传递给另一个元音
2.  您也可以对列执行相同的操作，只需切换它

在这之前：

```
board[row][pos] = tempVowels.get(temp); 
```

写这个：

```
 boolean b = false;

    for(int j = 0;j<columnLength; j++){
        if(board[row][j] == tempVowels.get(temp))
            b= true;

        if(b == true)
        {
            b = false;
            continue;
        }
        board[row][pos] = tempVowels.get(temp);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:59:43.533

如果第一列/第一行的内容是`A`并且您在第一列/第二行，则可以使用截断数组，即`String [] availableVowels = {"E","I","O","U"};`从中进行选择。如果您选择`O`，那么当您位于第一列/第三行时，您会选择`String [] availableVowels = {"E","I","U"};`。等等

# teamcity - 触发选项来设置特定的构建参数？

> ID：10007874
> 
> 赞同：29
> 
> 时间：2012-04-04T08:53:49.717
> 
> 标签：teamcity, teamcity-7.0

我正在寻找一种将某些特定构建参数附加到计划触发器的方法。

我们的想法是我们不断构建我们产品的调试版本。不过，我们的夜间构建必须是发布构建。我们大多数项目的构建配置都是完全相同的。它甚至已经有一个配置参数。所以我只需要一个触发器，它允许为单个构建参数指定覆盖。这会将构建配置减少一半以维持。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T13:48:56.613

不是现在，你可以关注[这个问题](http://youtrack.jetbrains.com/issue/TW-6439)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-03T13:01:29.817

我使用的方法是创建一个“部署 :: Dev D1 :: 运行所有集成测试”构建。然后，我在每个集成服务构建上创建一个构建触发器。

我为集成服务构建创建了一个名为“env:OctopusEnvironment”的参数。将值设置为空。我喜欢使用提示和显示：

```
select display='prompt' label='OctopusEnvironment' data_13='Production' data_12='CI' data_11='Local - Hassan' data_10='Local - Mustafa' description='OctopusEnvironment' data_02='Test T1' data_01='Dev D1' data_04='Local - Taliesin' data_03='Continuous Deployment CI 1' data_06='Local - Paulius' data_05='Local - Ravi' data_08='Local - Venkata' data_07='Local - Marko' data_09='Local - Ivan' 
```

在每个集成服务构建中，我添加了这个 powershell 步骤：

```
$octopusEnvironment = ($env:OctopusEnvironment).Trim()

Write-Host "Octopus environment = '$octopusEnvironment'"
if ($octopusEnvironment.Length -lt 1) {
    Write-Host "Auto detecting octopus environment"
    $trigger = '%teamcity.build.triggeredBy%' -split '::'
    if ($trigger.Length -gt 2){
        $environment = $trigger[1].Trim()
        Write-Host "##teamcity[setParameter name='env.OctopusEnvironment' value='$environment']"
    }
} 
```

所以现在我可以通过触发器运行集成测试，当我直接运行它时，它会提示我在哪个环境上运行集成测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-13T15:48:06.093

我遇到了同样的问题，并投票支持 Evgeny 提到的问题。正如 sergiussergius 所提到的，我们认为的一个解决方案是在构建步骤序列中添加最后一步，通过使用 REST API 传递自定义构建参数来手动触发下一个构建配置。但在这种情况下，我们丢失了构建链信息。使用 TeamCity 9.x，在 REST API 上尝试一些东西，我可以实现一个解决方案，它可以从触发（子）构建中检索触发（祖先）构建及其参数。我们要做的第一件事是使用 TeamCity 设置的环境变量获取当前构建：

```
https://<host>/httpAuth/app/rest/builds/number:<env.BUILD_NUMBER>,buildType:(name:<env.TEAMCITY_BUILDCONF_NAME>,project:<env.TEAMCITY_PROJECT_NAME>) 
```

在来自 REST API 的响应中，我们有一个*/build/triggered*标记，其中包含有关触发器的信息。看起来像这样

```
<triggered type="unknown" details="##triggeredByBuildType='<triggering-build-configuration-internalId>' triggeredByBuild='<triggering-build-number>'" date="20160105T190642+0700"/> 
```

对我们来说看起来像*btxxx*。从中，我们可以使用对 REST API 的以下请求访问触发构建（祖先）：

```
https://<host>/httpAuth/app/rest/builds/number:<triggering-build-number>'4,buildType:(internalId:<triggering-build-configuration-internalId>1,project:name:<env.TEAMCITY_PROJECT_NAME>) 
```

从响应中，我们可以获取祖先构建的参数值，并使用以下方法在当前构建中设置它：

```
echo "##teamcity[setParameter name='env.ENV_AAA' value='aaaaaaaaaa']") 
```

笔记：

*   这篇文章参考了 TeamCity 7.X 版。我使用 TeamCity 版本 9.X 进行了此操作，并且无法使用以前的版本进行尝试。我不知道我的帖子中提到的 REST API 调用在以前的版本中是否类似。
*   在这个解决方案中，祖先的构建配置（触发构建的那个）和孩子的构建配置（触发的那个）在同一个项目中。我没有在 2 个不同的项目中使用构建配置进行测试：我希望“触发器”标签提供有关祖先项目的信息。如果有人可以做测试，那就太好了。

我希望这个解决方案可能会有所帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-10T07:38:46.967

这不是一个通用的解决方案，但在某些情况下（例如，如果您想确定构建是由计划触发器还是其他方法启动），一种解决方法是检查预定义的参数`teamcity.build.triggeredBy`。

此参数设置为与构建概述页面上标签“触发者：”旁边显示的相同字符串。例如，“计划触发器”、“Git”或用户的全名。（还有一个`teamcity.build.triggeredBy.username`参数，但只在后一种情况下设置）。

这种方法的局限性在于，例如，您无法区分为同一构建配置定义的两个单独的计划触发器。但在这种情况下，您也可以求助于检查当前时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T17:51:29.260

我在最后一个构建步骤中添加了请求

```
curl -i -u "%login%:%pass%" -H "Content-type: text/plain" -X PUT -d "v1" http://tc.server/httpAuth/app/rest/buildTypes/id:%buildConfigurationId%/parameters/env.%SOME_PARAMETER% 
```

[http://confluence.jetbrains.com/display/TCD8/REST+API](http://confluence.jetbrains.com/display/TCD8/REST+API)

# php - 发布到 iframe，但 iframe 将顶部窗口重定向到操作 url 而不是自己？

> ID：10007876
> 
> 赞同：1
> 
> 时间：2012-04-04T08:53:57.437
> 
> 标签：php, javascript, iframe

我正在使用此处提到的表单帖子加载带有一些帖子数据的 iframe：

[你如何发布到 iframe？](https://stackoverflow.com/questions/168455/how-do-you-post-to-an-iframe)

一切正常。但是，如果我的 iframe url 中有重定向（通过标头或 javascript 片段），它不会重定向到 iframe 中的下一个 url，而是重定向父窗口。

例如：发布到 iframe ：

```
<form action="do_stuff.aspx" method="post" target="my_iframe">
  <input type="submit" value="Do Stuff!" />
</form>

<!-- when the form is submitted, the server response will appear in this iframe -->
<iframe name="my_iframe" src="not_submitted_yet.php"></iframe> 
```

not_submitted_yet.php：

```
<?php

// DO some stuff with post data 
// redirect to a success url
header("Location: THE_URL");

?> 
```

问题是 THE_URL 没有在 iframe 本身中打开，而是在完整的浏览器窗口中打开，这是一种不受欢迎的行为。我怎样才能解决这个问题 ？Firefox 和 chrome 中的行为是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:03:09.410

我认为这里可能发生的情况是 THE_URL 是一些破坏框架的受保护页面。也许维基百科或其他。使用这样的代码：

```
if (top.location != location) {
    top.location.href = document.location.href ;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:03:18.850

这并不能直接回答您的问题，但既然您已经在使用 javascript，为什么不通过 AJAX 帖子提交表单呢？返回新 URL 的 jQuery 帖子可以工作：

```
var submitData = $('#yourForm').serialize();
$.post('/your/url', submitData, function(data) {
    // Probably put some validation on the value coming back in data.
    window.location.href = data;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:08:19.207

您可以尝试使用 php 函数[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)，而不是标头重定向。

```
<?php
$success_page = file_get_contents('http://www.example.com/');
echo $success_page;
?> 
```

# r - 从多年时间序列计算每小时平均值

> ID：10007877
> 
> 赞同：4
> 
> 时间：2012-04-04T08:53:58.903
> 
> 标签：r, dataframe, plyr

我有一个数据集，其中填充了多年的平均每小时风速。我想创建一个“平均年”，其中​​每个小时计算该小时多年来的平均风速。如何在不循环遍历数据集的情况下做到这一点？理想情况下，我想只循环一次数据，为每一行提取正确的月份、日期和小时，并将该行的风速添加到数据框中的右行，其中每个月、天和小时聚集。是否可以在不提取月、日和小时的情况下执行此操作，然后遍历完整的平均年 data.frame 以找到正确的行？

一些示例数据：

```
data.multipleyears <- data.frame(
 DATETIME = c("2001-01-01 01:00:00", "2001-05-03 09:00:00", "2007-01-01 01:00:00", "2008-02-29 12:00:00"),
 Windspeed = c(10, 5, 8, 3)
) 
```

我想在这样的数据框中聚合：

```
average.year <- data.frame(
 DATETIME = c("01-01 00:00:00", "01-01 01:00:00", ..., "12-31 23:00:00")
 Aggregate.Windspeed = (100, 80, ...)
) 
```

从那里，我可以继续计算平均值等。我可能忽略了一些命令，但是对于这样的事情（在伪代码中）正确的语法是什么：

```
 for(i in 1:nrow(data.multipleyears) {
  average.year$Aggregate.Windspeed[
   where average.year$DATETIME(month, day, hour) == data.multipleyears$DATETIME[i](month, day, hour)]  <- average.year$Aggregate.Windspeed + data.multipleyears$Windspeed[i]
 } 
```

或类似的东西。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:16:10.343

我预测 ddply 和 plyr 包将成为你最好的朋友 :)。我创建了一个 30 年的数据集，每小时随机风速在 1 到 10 毫秒之间：

```
begin_date = as.POSIXlt("1990-01-01", tz = "GMT")
# 30 year dataset
dat = data.frame(dt = begin_date + (0:(24*30*365)) * (3600))
dat = within(dat, {
  speed = runif(length(dt), 1, 10)
  unique_day = strftime(dt, "%d-%m")
})
> head(dat)
                   dt unique_day    speed
1 1990-01-01 00:00:00      01-01 7.054124
2 1990-01-01 01:00:00      01-01 2.202591
3 1990-01-01 02:00:00      01-01 4.111633
4 1990-01-01 03:00:00      01-01 2.687808
5 1990-01-01 04:00:00      01-01 8.643168
6 1990-01-01 05:00:00      01-01 5.499421 
```

要计算这 30 年期间的每日正常值（30 年平均值，该术语在气象学中经常使用）：

```
library(plyr)
res = ddply(dat, .(unique_day), 
            summarise, mean_speed = mean(speed), .progress = "text")
> head(res)
  unique_day mean_speed
1      01-01   5.314061
2      01-02   5.677753
3      01-03   5.395054
4      01-04   5.236488
5      01-05   5.436896
6      01-06   5.544966 
```

这在我不起眼的两核 AMD 上只需要几秒钟，所以我怀疑不需要只检查一次数据。这些对不同聚合（月份、季节等）的多个`ddply`调用可以单独完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:09:30.243

您可以使用`substr`来提取您想要的日期部分，然后使用`tapply`或`ddply`来聚合数据。

```
tapply(
  data.multipleyears$Windspeed, 
  substr( data.multipleyears$DATETIME, 6, 19), 
  mean 
)
# 01-01 01:00:00 02-29 12:00:00 05-03 09:00:00 
#              9              3              5 

library(plyr)
ddply(
  data.multipleyears, 
  .(when=substr(DATETIME, 6, 19)), 
  summarize, 
  Windspeed=mean(Windspeed)
)
#             when Windspeed
# 1 01-01 01:00:00         9
# 2 02-29 12:00:00         3
# 3 05-03 09:00:00         5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-01T21:18:02.163

这是很老的帖子，但我想补充一下。我猜[Openair 中的 timeAverage](https://stackoverflow.com/questions/8246645/r-computing-monthly-averages-from-hourly-data-and-then-plotting)也可以使用。在手册中，timeAverage 函数有更多选项。

# windows - Rs232软件流控

> ID：10007880
> 
> 赞同：0
> 
> 时间：2012-04-04T08:54:08.350
> 
> 标签：windows, serial-port, hardware, flow-control

我有一个关于 Rs232 软件流控制（又名 XOn/XOff）的一般性问题

.Net 实现（和 nativ win32 api）都定义了一个名为 WriteTimeout / ReadTimeout 的属性，这是一个以毫秒为单位的时间，在此之后，通信被认为是过期的。

不，我的问题是这样的：如果我向设备发送一个 5 字节的字符串，我看不到任何 WriteTimeout，正如预期的那样。这是如何实施的？我发现有关软件流控制的所有信息都是在接收缓冲区已满时设置 XOFF；XOn 当它准备好再次接收时。

但从我看到的行为来看，我怀疑设备在处理我发送的 5 字节信息后会发送 XON，从而为 Windows 创建信息以生成相应的事件。

那么何时在仅两线 RS232 实现上发送 XON？仅当缓冲区已满并重新开始接收时；或者发出信号，我们“仍然准备好”在处理完每个块后接收？

如何实施？

提前干杯和谢谢！

科莱戈特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:59:00.623

`XON`在您准备好接收数据时发送一个（您的接收缓冲区为空或几乎是空的）。`XOFF`在您无法接受更多传入数据的任何时候发送（您的接收缓冲区已满或几乎已满）。该过程记录在 Wikipedia[软件流控制](http://en.wikipedia.org/wiki/Software_flow_control#Mechanism)页面上。

# flash - Flash 的替代内容 | Magento

> ID：10007882
> 
> 赞同：0
> 
> 时间：2012-04-04T08:54:12.157
> 
> 标签：flash, alt, alternate

好的，所以我的主页在这里使用了 flash：

[http://www.emmaphillipsbridal.com/](http://www.emmaphillipsbridal.com/)

如果我尝试添加一些 alt 代码，以便 ipad 和 iphone 用户可以看到一些东西而不是空白页，但是当我保存代码时它消失了，我看到一些人提到了这个问题，但我找不到解决方案。

flash的代码是：

```
<div class="flash">
<object width="980" height="665" data="http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/header_v8.swf?xmlUrl=http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/xml_folder/" type="application/x-shockwave-flash">
<param name="data" value="http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/header_v8.swf?xmlUrl=http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/xml_folder/" />
<param name="quality" value="high" />
<param name="menu" value="false" />
<param name="wmode" value="transparent" />
<param name="pluginurl" value="http://www.macromedia.com/go/getflashplayer" />
<param name="src" value="http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/header_v8.swf?xmlUrl=http://www.dansiop.com/epbs/skin/frontend/base/theme137/flash/xml_folder/" />
</object>
</div> 
```

该页面上的设计 xml 是：

```
<!--<reference name="content">
<block type="catalog/product_new" name="home.catalog.product.new" alias="product_new" template="catalog/product/new.phtml" after="cms_page"><action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action></block>
<block type="reports/product_viewed" name="home.reports.product.viewed" alias="product_viewed" template="reports/home_product_viewed.phtml" after="product_new"><action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action></block>
<block type="reports/product_compared" name="home.reports.product.compared" template="reports/home_product_compared.phtml" after="product_viewed"><action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action></block>
</reference><reference name="right">
<action method="unsetChild"><alias>right.reports.product.viewed</alias></action>
<action method="unsetChild"><alias>right.reports.product.compared</alias></action>
</reference>--> 
```

谁能给我一些关于如何为没有闪光灯的用户显示其他内容的想法？

提前致谢。

丹西奥普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:24:00.320

我建议您使用[SWFObject](http://code.google.com/p/swfobject/)将任何 swf 对象嵌入网页中。

这个 JS 库将允许您实现这一目标，并被视为 Adob​​e 最佳实践。

它带有一个方便的生成器，它允许您使用正确的 javascript/html 创建一个 html 页面。

还要检查这些：

*   [SWF 对象 - 我为什么要使用它](https://stackoverflow.com/questions/6213930/swf-object-why-should-i-use-it)
*   [.swf 定位不包含在页面上，在 chrome 中](https://stackoverflow.com/questions/8571999/swf-positionning-is-not-contained-on-page-in-chrome)

# mysql - 创建一个 SQL 表以导入（和转换）包含 MySQL tstamp 的 .CSV

> ID：10007886
> 
> 赞同：0
> 
> 时间：2012-04-04T08:54:20.537
> 
> 标签：mysql, sql-server, bulkinsert

我只是似乎没有解决我的问题！我需要将其导入 SQL Server。

.CSV MySQL 导出的第二列（以及更多列）包含我需要转换的 tstamp 字段。我创建了表，但批量导入不起作用。收到以下错误消息 Msg 4864, Level 16, State 1, Line 4 Bulk load data conversion error (type mismatch or invalid character for the specified codepage) for row 2, column 1 (tstamp). 消息 4864，级别 16，状态 1，第 4 行第 3 行第 1 列 (tstamp) 的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。

特此附上代码。

```
-- Recreate the table
CREATE TABLE [Majestic].[dbo].hdiyouth
(tstamp datetime NOT NULL
)
GO

-- Bulk insert the data from csv file
-- Ensure the file(s) is/are closed! 
BULK
INSERT [Majestic].[dbo].hdiyouth
FROM 'C:\Path\CSV\hdiyouth.csv'
WITH
(
FIRSTROW = 2,
FIELDTERMINATOR = ';',
ROWTERMINATOR = '\n'
)
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:13:43.957

尝试检查加载数据：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

下面是一个如何在插入之前转换列的示例：

```
mysql> LOAD DATA INFILE '/tmp/bit_test.txt'
    -> INTO TABLE bit_test (@var1) SET b= CAST(@var1 AS UNSIGNED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:02:16.310

问题是，您在 tstamp 和 tstamp_updated 列中有值“0”，它们的数据类型为时间戳，对吧？

MySQL 支持时间戳列中的 NULL 值，也由 '0000-00-00 00:00:00' 表示。SQL Server 不支持这一点。不要误会我的意思，它支持时间戳列中的 NULL 值，但不支持 MySQL 的“0”。解决这个问题的最简单方法可能是使用 Diego 建议的 SSIS。我个人通过将 MySQL NULL 值转换为“1970-01-01”来解决这个问题，这是时间戳列的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:42:07.630

如何创建一个 SSIS 包来做到这一点？

此[链接](http://www.kodyaz.com/articles/import-csv-flat-file-into-sql-server-using-ssis-integration-services.aspx)可能对您有所帮助

# ruby - 将 Nokogiri 与多个搜索元素一起使用

> ID：10007888
> 
> 赞同：2
> 
> 时间：2012-04-04T08:54:24.043
> 
> 标签：ruby, nokogiri

在这个 XML 片段中，我需要为某些块替换 UID 中的数据。实际文件包含 100 多个类似的块。

尽管我已经能够基于`name="Track (Timeline)"`_ _`<TrackID>``name="Track (TimeLine)"``<TrackID>``0x1200``UID`

我是 Nokogiri 的新手，虽然我编写测试脚本，但我不认为自己是程序员。

```
<StructuralMetadata key="06.0E.2B.34.02.53.01.01.0D.01.01.01.01.01.3B.00" length="116" name="Track (TimeLine)">
    <EditRate>25/1</EditRate>
    <Origin>0</Origin>
    <Sequence>32-04-25-67-E7-A7-86-4A-9B-28-53-6F-66-74-65-6C</Sequence>
    <TrackID>0x1200</TrackID>
    <TrackName>Softel VBI Data</TrackName>
    <TrackNumber>0x17010101</TrackNumber>
    <UID>34-C1-B9-B9-5F-07-A4-4E-8F-F4-53-6F-66-74-65-6C</UID>
</StructuralMetadata>
<StructuralMetadata key="06.0E.2B.34.02.53.01.01.0D.01.01.01.01.01.3B.00" length="116" name="Track (TimeLine)">
    <EditRate>25/1</EditRate>
    <Origin>0</Origin>
    <Sequence>35-12-2D-86-E6-74-0B-4C-B4-24-53-6F-66-74-65-6C</Sequence>
    <TrackID>0x1300</TrackID>
    <TrackName>Softel VBI Data</TrackName>
    <TrackNumber>0x0</TrackNumber>
    <UID>37-0C-80-34-4C-8D-CE-41-85-F3-53-6F-66-74-65-6C</UID>
</StructuralMetadata> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:19:38.883

使用 xpath：

```
//StructuralMetadata 
```

将选择`StructuralMetadata`XML 中的所有元素。开头的双斜线表示选择出现在文档中的任何节点。

虽然您不想要*所有*节点，但您可以使用谓词过滤您想要的节点：

```
//StructuralMetadata[@name="Track (TimeLine)" and TrackID="0x1200"] 
```

这将选择具有value 属性的所有`StructuralMetadata`元素，以及具有 contents 的子元素。`name``Track (TimeLine)``TrackID``0x1200`

当您对该`UID`元素感兴趣时，您可以进一步细化表达式：

```
//StructuralMetadata[@name="Track (TimeLine)" and TrackID="0x1200"]/UID 
```

此表达式将匹配作为与上述谓词匹配的`UID`元素的子元素的所有元素。`StructuralMetadata`

使用它：

```
require 'nokogiri'

# Parse the document, assuming xml_file is a File object containing the XML
doc = Nokogiri::XML(xml_file)

# I'm assuming there is only one element in the document that matches
# the criteria, so I'm using at_xpath
node = doc.at_xpath('//StructuralMetadata[@name="Track (TimeLine)" and TrackID="0x1200"]/UID')

# At this point, doc contains a representation of the xml, and node points to
# the UID node within that representation. We can update the contents of
# this node
node.content = 'XXX'

# Now write out the updated XML. This just writes it to standard output,
# you could write it to a file or elsewhere if needed
puts doc.to_xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:06:02.350

解决这个问题的一个好方法是使用“map reduce”编程风格，它可以获取大量事物并将其缩小并将其组合成您所追求的结果。具体来说，`Array#find`对于`Array#select`这类问题非常有用。看看这个例子：

```
require 'nokogiri'
xml = Nokogiri::XML.parse(File.read "sample.xml")
element = xml.css('StructuralMetadata').find { |item|
  item['name'] == "Track (TimeLine)" and item.css('TrackID').text == "0x1200"
}
puts element.to_xml 
```

这个小程序首先使用 CSS 选择器来获取`<StructuralMetadata>`文档中的所有元素。`Array#find`它返回一个数组，我们可以使用该方法过滤出我们想要的内容。`Array#select`是它的表亲，它返回一个包含所有匹配对象的数组，而不是它碰巧找到的第一个。

在块内，我们有一个测试来检查`<StructuralMetadata>`标签是否是我们所追求的。然后它把`element.to_xml`字符串放到控制台，这样如果你把它作为命令行脚本运行，你就可以看到它找到了什么。现在您可以找到该元素，您可以以通常的方式对其进行修改并保存一个新的 XML 文件或其他任何内容。

# java - 具有两个源目录的eclipse jave项目 - 如何设置源文件夹的可见性

> ID：10007892
> 
> 赞同：0
> 
> 时间：2012-04-04T08:54:40.643
> 
> 标签：java, eclipse

我在 Eclipse 中有一个 Java 项目 - 在项目中我想配置两个源目录：

1.  src-api
2.  src-核心

这很简单。

问题是我希望 src-core 能够访问 src-api，但是我不希望 src-api 访问 src-core，我希望 eclipse 不让我编译并且能够找到在 src 中配置的类-core 仅来自 src-api。

有可能这样做吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:00:01.617

不，这是不可能的。

只需创建两个不同的项目`api`& `core`。然后使`core`项目依赖于`api`项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:59:33.423

我会使用两个不同的项目，一个用于 src-api，一个用于 . src-core 应该具有 src-api 作为依赖项，但反之则不然。

# android - android中有什么方法可以减少xml解析的启动时间？

> ID：10007899
> 
> 赞同：-2
> 
> 时间：2012-04-04T08:54:55.000
> 
> 标签：android

在我的 android 应用程序中，我有 3 个选项卡。当我们单击任何选项卡时，它将显示来自 xml 解析的数据列表。当我们从一个选项卡移动到另一个选项卡时，加载数据需要 3-5 分钟。所以它会造成数据是否在变化的混乱。那么如何提高从 xml 解析加载数据的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:22:42.633

您可以将该数据存储在本地

所以第一次它将从 xml 加载并存储在本地

第二次它将从该本地数据中显示。

所以 ti 不会花费太多时间。

您还可以添加刷新按钮。

# c# - c#中的标记接口

> ID：10007900
> 
> 赞同：3
> 
> 时间：2012-04-04T08:55:01.703
> 
> 标签：c#, design-patterns, interface, attributes, marker-interfaces

我目前正在尝试在 c# 中实现标记接口。但是到目前为止我还没有这样做，所以我想请教您。

简短我的问题：
我有一个接口工厂，工厂包含几个子接口，它们应该是标记接口，因为它们没有属性或方法或其他东西。所以标记接口应该实现接口工厂。我的标记接口是例如汽车、卡车等。标记接口是为 MyBMW、MyAUDI 等的汽车实现的。我怎样才能实现这样的模式？谢谢！

```
interface Factory
{
    string[] process (string [] entry);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:56:42.783

您应该考虑使用属性而不是接口来标记类。

然后您可以在代码中决定如何在设置属性时处理特定实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:58:36.630

我相信你想实现工厂模式。我建议你在这里看一个例子： [http ://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

# c# - 在代码中维护不同的设备版本

> ID：10007907
> 
> 赞同：0
> 
> 时间：2012-04-04T08:55:28.383
> 
> 标签：c#, .net

我编写了一个应用程序（C#，.NET 2.0），用于控制通过串口连接的电子设备。

现在设备软件已经更新了一些旧版本没有的新功能。

如何维护代码中的这些更改，以便新的应用程序版本支持两个设备版本？

我知道我可以使用一些 if 语句或预处理器命令来检查设备版本，但是在 C# 中执行此操作的正确方法是什么？

编辑：

我想我应该写更多关于我的问题。假设我有一个类用于从旧设备版本转换一些值：

```
class Conversions
{ 
 public static float IntToPressure(int parameter)
 {
  return AlgorithmA(parameter);
 }
 public static float IntToUnderpressure(int parameter);
 {
  return AlgorithmB(parameter);
 }
} 
```

在新版本中，我只需要一种方法：IntToPressure，它将转换所有压力参数，+ 新的温度方法：

```
class Conversions
{ 
 public static float IntToPressure(int parameter)
 {
  //changed
  return NewAlgorithm(parameter);
 }
 //new
 public static float IntToTemperature(int parameter)
 {
  return TempAlgorithm(parameter);
 }
} 
```

使用转换（旧版本）的类也是如此：

```
class UsingConversions
{ 
 public float GetPressure()
 {
  return Conversions.IntToPressure(this.somePressureParameter);
 }
 public float GetUnderpressure()
 {
  return Conversions.IntToUnderpressure(this.someUnderpressureParameter);
 }
} 
```

新的类版本看起来像（+新功能）：

```
class UsingConversions
{ 
 public float GetPressure()
 {
  return Conversions.IntToPressure(this.somePressureParameter);
 }
 public float GetUnderpressure()
 {
  //changed
  return Conversions.IntToPressure(this.someUnderpressureParameter);
 }
 //new
 public float GetTemperature()
 {
  return Conversions.IntToTemperature(this.someTemperatureParameter);
 }
} 
```

另一个问题是新的应用程序版本包含用于配置设备和使用新设备功能的新类的定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:02:29.220

您可以找出两个子类中设备之间的差异，并通过检查插入的设备来实例化正确的设备。如果您需要将这些更改导出到外部世界，这将不起作用

# asp.net-mvc - 通过仅水平拖动来调整文本区域

> ID：10007908
> 
> 赞同：0
> 
> 时间：2012-04-04T08:55:29.020
> 
> 标签：asp.net-mvc

这是我的代码：

```
<%= Html.TextArea("txtMyTextArea", new { @style = "width: 100%; height:100%", @resize="horizontal" })%> 
```

它不工作。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:59:20.817

这可以使用`max-height`属性并将其设置为等于`height`. 请参阅此[jsFiddle 示例](http://jsfiddle.net/k55h7/)。

您还可以通过添加`max-width`属性来设置水平约束。请参阅此[jsFiddle 示例](http://jsfiddle.net/k55h7/1/)。

我相信您的代码会“翻译”为：

```
<%= Html.TextArea("txtMyTextArea", new { @style = "width: 200px; height: 200px; max-height: 200px;"})%> 
```

# iphone - 如何通过从 PhotoLibrary 获取视频来播放视频

> ID：10007918
> 
> 赞同：0
> 
> 时间：2012-04-04T08:56:04.907
> 
> 标签：iphone, objective-c, ios, xcode, uiimagepickercontroller

我正在 ipad 上做一个应用程序，它将捕获视频并将保存在照片库中。但我想要的是我想播放从照片库中选择的视频并需要在那里播放。我看到了很多使用的例子，`MPMoviePlayerController`但我看到的只是他们在那里添加视频并播放那个视频。有什么办法可以写我下面提到的代码的路径。我的代码在这里

这是我调用照片库的地方

```
-(IBAction) goToPhotos:(id)sender {

    ipc = [[UIImagePickerController alloc] init];
    ipc.delegate = self;
    ipc.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    ipc.allowsEditing = YES;
    UIPopoverController *videoController = [[UIPopoverController alloc]initWithContentViewController:ipc];
    //    pop.popoverContentSize = CGSizeMake(300, 900);
    [videoController presentPopoverFromRect:[sender frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
    [ipc release];  
    [self presentModalViewController:ipc animated:YES];

} 
```

我在这里打电话`MPMoviePlayerController`。代码在这里

```
- (void)viewDidLoad 
{    
    NSString *url = [[NSBundle mainBundle]
                     pathForResource:@"Stock_Footage_Demobroadband"
                     ofType:@"mp4"];
    MPMoviePlayerViewController *playerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:[playerViewController moviePlayer]];

    [self.view addSubview:playerViewController.view];

    //---play movie---
    MPMoviePlayerController *player = [playerViewController moviePlayer];
    [player play];

    [super viewDidLoad];    
}

- (void) movieFinishedCallback:(NSNotification*) aNotification
{
    MPMoviePlayerController *player = [aNotification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];
    [player stop];
    [self.view removeFromSuperview];
    [player autorelease];    
} 
```

谁能告诉我如何获得照片库的路径，我需要在那里播放视频。

```
 NSString *url = [[NSBundle mainBundle]
                         pathForResource:@"Stock_Footage_Demobroadband"
                         ofType:@"mp4"]; 
```

我们可以修改这条线吗？有什么方法可以让我获得照片库的路径，以便我可以在那里播放视频。帮帮我谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:06:37.693

您需要实现 UIImagePickerController 的委托方法。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *movieURL = [info objectForKey:UIImagePickerControllerMediaURL];

   MPMoviePlayerController *mp = [[MPMoviePlayerController alloc] initWithContentURL: movieURL];
   //finish implementing the movie player controller

} 
```

# javascript - Node.js - 比 process.on('uncaughtException', fn) 更好的错误处理？

> ID：10007919
> 
> 赞同：4
> 
> 时间：2012-04-04T08:56:05.167
> 
> 标签：javascript, node.js, error-handling

在我的应用程序的顶部，我有以下代码：

```
process.on('uncaughtException', function(err) {
  console.log("We found an uncaught exception.");
  console.log(err);
}); 
```

如果我搜索我的日志`grep -i -A10 -B3 'uncaught exception' logfile`，我可以获得一些不错的信息。但我不知道异常被抛出的执行上下文，错误是什么，等等。

我应该改用什么模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:47:28.987

uncaughtException 的“err”参数是一个对象，您可以请求它的一些属性来获取有关该错误的更多信息。例如，您可以使用它的“stack”属性来更好地了解错误的来源：

```
console.log(err.stack); 
```

请参阅：[http ://docs.nodejitsu.com/articles/errors/what-is-the-error-object](http://docs.nodejitsu.com/articles/errors/what-is-the-error-object)

# scala - Scala sum Map 值

> ID：10007920
> 
> 赞同：2
> 
> 时间：2012-04-04T08:56:11.180
> 
> 标签：scala, map, casting

我有一个清单

```
 val l : List[Map[String,Any]] = List(Map("a" -> 1, "b" -> 2.8), Map("a" -> 3, "c" -> 4), Map("c" -> 5, "d" -> "abc")) 
```

我使用以下代码来查找键“a”（Int）、“b”（Double）和“c”（Int）的总和。“d”作为噪声包括在内。

```
 l.map(n => n.mapValues( v => if (v.isInstanceOf[Number]) {v match {
    case x:Int => x.asInstanceOf[Int]
    case x:Double => x.asInstanceOf[Double]
    }} else 0)).foldLeft((0,0.0,0))((t, m) => (
t._1 +  m.get("a").getOrElse(0), 
t._2 + m.get("b").getOrElse(0.0), 
t._3 + m.get("c").getOrElse(0))) 
```

我希望输出是 (4, 2.8, 9) 但我却被垃圾

```
<console>:10: error: overloaded method value + with alternatives:
  (x: Int)Int <and>
  (x: Char)Int <and>
  (x: Short)Int <and>
  (x: Byte)Int
 cannot be applied to (AnyVal) 
```

我认为例外是试图告诉我“+”不适用于 AnyVal。我如何让它发挥作用以获得我想要的结果？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-15T09:42:12.003

```
m.foldLeft(0)(_+_._2) 
```

这是一个非常清晰和简单的解决方案。参考： http: [//ktuman.blogspot.com/2009/10/how-to-simply-sum-values-in-map-in.html](http://ktuman.blogspot.com/2009/10/how-to-simply-sum-values-in-map-in.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T09:27:28.743

您可以使用 foldLeft 函数：

```
scala> val l : List[Map[String,Any]] = List(Map("a" -> 1, "b" -> 2.8), Map("a" -> 3, "c" -> 4), Map("c" -> 5, "d" -> "abc"))
l: List[Map[String,Any]] = List(Map(a -> 1, b -> 2.8), Map(a -> 3, c -> 4), Map(c -> 5, d -> abc))

scala> val (sa, sb, sc) = l.foldLeft((0: Int, 0: Double, 0: Int)){
     |   case ((a, b, c), m) => (
     |     a + m.get("a").collect{case i: Int => i}.getOrElse(0),
     |     b + m.get("b").collect{case i: Double => i}.getOrElse(0.),
     |     c + m.get("c").collect{case i: Int => i}.getOrElse(0)
     |     )
     |   }
sa: Int = 4
sb: Double = 2.8
sc: Int = 9 
```

使用 incrop 的想法`collect`而不是`match`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T09:55:13.257

首先，您完全错过了模式匹配的重点

```
{case i: Int => i
 case d: Double => d
 case _ => 0} 
```

是你里面所有函数的正确替换`mapValues`。然而这不是问题所在，你的写作虽然复杂，但也有同样的作用。

您的函数在`mapValues`返回`Double`（因为一些分支返回`Int`而其他分支返回`Double`，在这种情况下，`Int`被提升为`Double`。如果不是，它将返回`AnyVal`）。所以你得到一个`List[Map[String, Double]]`. 在这一点上，你已经失去了 Ints。

当你这样做时`m.get("a")`，这将返回`Option[Double]`。`Option[A] has method getOrElse(default: A) : A`（实际上，`default: => X`）但在这里没有区别）。

如果你打电话`getOrElse(0.0)`而不是`getOrElse(0)`，你会得到一个 Double。您的代码仍然失败，因为您的折叠以（Int，Double，Double）开头，您将返回（Double，Double，Double）。如果你以 (0.0, 0.0, 0.0) 开始弃牌，它会起作用，但你失去了 Ints，你会得到 (4.0, 2.8, 9.0)

现在，关于错误消息。您将 Int 传递给需要 Double (getOrElse) 的方法，Int 通常应转换为 Double，就好像您使用`getOrElse(0.0)`. 除了`Option`是协变的（声明的`trait Option[+A]`）。如果`X`是 的祖先`A`， an`Option[A]`也是`Option[X]`. 所以一个 O`ption[Double]`也是`Option[AnyVal]`and `Option[Any]`。`getOrElse(0)`如果选项被认为是，则调用有效`Option[AnyVal]`，结果是`AnyVal`（也可以使用`Any`，但`AnyVal`更精确，这是编译器选择的那个）。因为表达式按原样编译，所以不需要提升`0`to `0.0`。因此`m.get("a").getOrElse(0)`是类型`AnyVal`，不能添加到`t._1`. 这就是您的错误消息所说的。

您知道“a”与 Int 相关联，“b”与 double 相关联，但您没有将此知识传递给编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:50:55.187

一般来说，如果您不知道键，但只想对值求和，您可以这样做

```
val filtered = for {
    map <- l
    (k, v) <- map
    if v.isInstanceOf[Number]
  } yield k -> v.asInstanceOf[Number].doubleValue

val summed = filtered.groupBy(_._1) map { case (k, v) => k -> v.map(_._2).sum }

scala> l
res1: List[Map[String,Any]] = List(Map(a -> 1, b -> 2.8), Map(a -> 3, c -> 4), Map(c -> 5, d -> abc))

scala> filtered
res2: List[(String, Double)] = List((a,1.0), (b,2.8), (a,3.0), (c,4.0), (c,5.0))

scala> summed
res3: Map[String,Double] = Map(c -> 9.0, a -> 4.0, b -> 2.8) 
```

### 更新

您可以按您想要的类型过滤地图，例如

```
scala> val intMap = for (x <- l) yield x collect { case (k, v: Int) => k -> v }
intMap: List[scala.collection.immutable.Map[String,Int]] = List(Map(a -> 1), Map(a -> 3, c -> 4), Map(c -> 5)) 
```

然后对值求和（参见[链接问题](https://stackoverflow.com/questions/7076128/best-way-to-merge-two-maps-and-sum-the-values-of-same-key)）

```
scala> intMap reduce { _ |+| _ }
res4: scala.collection.immutable.Map[String,Int] = Map(a -> 4, c -> 9) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T16:11:06.070

一个漂亮的单行：

```
l.map(_.filterKeys(_ != "d")).flatten groupBy(_._1) map { case (k,v) => v map { case (k2,v2: Number) => v2.doubleValue} sum }

res0: scala.collection.immutable.Iterable[Double] = List(9.0, 4.0, 2.8) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-08-25T09:19:04.910

我是否遗漏了什么，或者你不能只做：

```
map.values.sum 
```

?

# android - 将参数传递到 OAuth 2.0 的 WebView

> ID：10007929
> 
> 赞同：0
> 
> 时间：2012-04-04T08:56:46.637
> 
> 标签：android, oauth-2.0

我正在尝试为我正在构建的应用程序实施 OAuth 2.0。我们在[http://tools.ietf.org/pdf/draft-ietf-oauth-v2-25.pdf](http://tools.ietf.org/pdf/draft-ietf-oauth-v2-25.pdf)关注草案 25 。

我从服务器获得了 client_id 和 secret，但我需要将其传递到 webview 以便用户可以登录并授予权限。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:34:12.787

这真的很简单，但是现在我对网络技术有了一些想法，我有点迷失了。我需要用 ? 修改 URL，然后是参数名称，然后是 =，然后是参数值。

像这样

```
 String url = "https://staging.doo.net/oauth/authorize?response_type=code&client_id=" + creds.clientId + "&redirect_uri=doo%3A%2F%2Fauthorize"; 
```

# coldfusion - 从 CFC 中创建新实例

> ID：10007930
> 
> 赞同：3
> 
> 时间：2012-04-04T08:56:52.037
> 
> 标签：coldfusion, cfc

现在这似乎是非常直接的事情，但在 ColdFusion 中似乎并非如此。我需要从自身内部创建一个 CFC 实例，`var a = new this()`但这显然不起作用。不能使用 CFC 名称，因为它是一个将被扩展的基础，所以我正在尝试解决以下问题：

```
component {
    public function subQuery (required string table) {

        var classPath = getMetaData(this).fullname;
        return createObject("component", classPath).init(table, this.dsn);

    }
} 
```

这是可以接受的，但返回的类路径`getMetaData(this).fullname`不正确。CFC 位于一个以连字符命名的文件夹中，如 in `my-folder`，返回的路径看起来像`my.-folder.myCFC`在连字符之前插入了一个句点。显然我可以用正则表达式来操作这个字符串，但这不是我想要走的路。

希望有人有更清洁的方法，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:03:09.027

理论上，您应该能够在没有对象名称的任何上下文的情况下执行此操作，因为它将从自身内部执行，并且应该检查其当前目录。

因此，以下内容应该可以完成您需要的工作

```
var classPath = ListLast(getMetaData(this).fullname,'.');
return createObject("component", classPath).init(table, this.dsn); 
```

这样，目录名称是什么都无关紧要，它适用于任何扩展该目录的对象，无论目录结构如何，或者对于一个完整的示例

```
public function cloneMe() {
    return CreateObject('component', ListLast(getMetaData(this).fullname,'.')).init(argumentCollection=arguments);
} 
```

这样，传入的任何参数都将传递到 init 中。即扩展的 CFC 可能会重新定义方法如下（如果您在未提供 init 参数时想要错误）

```
public function cloneMe(required string table) {
    return super.cloneMe(table=arguments.table,dsn=this.dsn);
} 
```

# java - 有时显示的图像

> ID：10007935
> 
> 赞同：0
> 
> 时间：2012-04-04T08:57:06.570
> 
> 标签：java, image, drawing

我有一个非常烦人的问题：

我想画一个图像，我之前加载过（它似乎加载正确）。但是现在发生了一些非常奇怪的事情：**有时**，图像会出现，**有时**却不会！但是当我最小化整个框架并再次最大化它时，图像**总是**在那里！当然，当我绘制图像时，我正在重新绘制整个东西，但正如我所说，没有任何反应，图像不会（总是）显示。

我究竟做错了什么？

好的，问题代码：

```
 //this is the method I load my image with
   private BufferedImage loadImage(String name) {
        try {
            return ImageIO.read(new File(name));
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    //this is the paint method of my JPanel
public void paint(Graphics g){
    super.paint(g);
    g.drawImage(img, 0, 0, getWidth(), getHeight(), this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:59:10.537

你如何绘制图像？

你的环境是什么？WPF,Winform...

最常见的问题是您必须使用绘画事件。因为一旦绘制出来，你的形状、图像……一旦开始新的绘制过程就会丢失

# ruby-on-rails - rails 将路径路由为参数

> ID：10007937
> 
> 赞同：0
> 
> 时间：2012-04-04T08:57:21.173
> 
> 标签：ruby-on-rails, routing

如何将 'something/like/this' 路由到任何控制器操作，并将整个 'something/like/this' 作为存储在 params[:path] 中的字符串？

我试过了

匹配 ':path' => 'posts#index'

但显然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:09:52.627

使用 * 代替 :，它将匹配所有剩余部分。

rails guide [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html) at 3.11 Route Globbing

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:01:35.177

将其更改为

```
match '*path' => 'posts#index' 
```

# c# - 创建相同类型的新对象的方法，用新对象替换初始对象

> ID：10007940
> 
> 赞同：0
> 
> 时间：2012-04-04T08:57:31.233
> 
> 标签：c#, .net

我知道 .NET String 类使用这种行为，但我找不到任何实现，而且我不知道如何命名这种行为。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:59:04.077

字符串类被称为[Immutable](http://en.wikipedia.org/wiki/Immutable)。

一个极其简化的示例可能如下所示：

```
public sealed class MyValue
{
  public MyValue(int value)
  {
    this.Value = value;
  } 

  public int Value { get; private set }

  public MyValue Add(int value)
  {
    return new MyValue(this.Value + value);
  }
} 
```

此上下文中的对象无法更改。如果您需要另一个 MyValue 对象并将当前值添加到另一个值，您将获得一个新对象。

# c# - 如何使用业务对象绑定 rdlc 报告？

> ID：10007944
> 
> 赞同：2
> 
> 时间：2012-04-04T08:57:45.617
> 
> 标签：c#, rdlc

我有一个名为的业务对象`"TeamMaster"`，我在其中定义了三个属性：Id、Name 和 Flg。在我的 .rdlc 报表中，我将`TeamMaster`对象应用为数据源，现在我在表单的页面加载事件中编写以下代码，在其中添加报表查看器控件，并将报表定义为本地报表。

```
using (RDLC_DEMO_DBEntities objdatabase = new RDLC_DEMO_DBEntities())
        {
            lstTeamMstr = objdatabase.TeamMasters.ToList();
        }
        this.TeamMasterBindingSource.DataSource = lstTeamMstr;
        this.reportViewer1.RefreshReport(); 
```

当我使用调试检查此代码时，我得到 6 条记录`TeamBindingSource`，但在*Windows 报告中只显示六个空白行*，这是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:15:27.130

遵循此代码：>>

```
string path = HttpContext.Current.Server.MapPath(Your Report path);
ReportViewer1.Reset(); //important
ReportViewer1.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Local;

// Add sub report even handler if you need  
***ReportViewer1.LocalReport.SubreportProcessing += new SubreportProcessingEventHandler(MySubreportProcessingEventHandler);***
LocalReport objReport = ReportViewer1.LocalReport;
objReport.ReportPath = path;
// Add Parameter If you need 
List<ReportParameter> parameters = new List<ReportParameter>();
parameters.Add(new ReportParameter("Name", Value));
ReportViewer1.LocalReport.SetParameters(parameters);
ReportViewer1.ShowParameterPrompts = false;
ReportViewer1.ShowPromptAreaButton = false;
ReportViewer1.LocalReport.Refresh();

//Add Datasourdce
ReportDataSource reportDataSource = new ReportDataSource();
reportDataSource.Name = "Datasource Name Used due to report design";
reportDataSource.Value = DataSourceValue(Your object data-source);
objReport.DataSources.Add(reportDataSource);
objReport.Refresh(); 
```

这里 Subreport Even 处理程序代码

```
private void MySubreportProcessingEventHandler(object sender,  SubreportProcessingEventArgs e)
{
 //You can get parameter from main report 
int paramname = int.Parse(e.Parameters[0].Values[0].ToString());
//You can also add parameter in sub report if you  need like main report

//Now add sub report data source     
 e.DataSources.Add(new ReportDataSource("DataSource Name",DataSourceValue)));
} 
```

如果您需要创建钻取报告，请点击此链接[单击此处查看钻取报告](https://stackoverflow.com/questions/10106376/calling-drillthrough-report-in-rdlc/10210131#10210131)

# java - Jama getS 给出异常

> ID：10007948
> 
> 赞同：0
> 
> 时间：2012-04-04T08:58:08.980
> 
> 标签：java, svd, lsa, jama

我正在将 SVD 应用于我已经创建的术语文档矩阵。矩阵是以下形式的双精度数组：

> 公共静态双[][] tdidf;
> tdidf = new double[listOfFiles.length][keywordList.size()];

但是当我使用苹果 svd 时：

> 公共无效计算SVD（）
> {
> 矩阵A =新矩阵（tdidf）；奇异值分解 svd = A.svd();
> 矩阵 U = svd.getU();
> 矩阵 S = svd.getS();
> }

我收到一个错误：

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 53
> at Jama.SingularValueDecomposition.getS(SingularValueDecomposition.java:511)
> at TDIDF_Matrix.computeSVD(TDIDF_Matrix.java:119)
> at Jama.main(Jama.java:191)

在计算 SVD 之前我需要转置 A 吗？

# mysql - 更新最后一条记录——在 mysql 查询中找不到语法错误

> ID：10007953
> 
> 赞同：1
> 
> 时间：2012-04-04T08:58:37.900
> 
> 标签：mysql

我需要这个查询 - 最后更新一条记录。

```
UPDATE changes SET checked='' WHERE item_id = 119898 AND type = 'example_edit' AND checked != 'restored' ORDER BY id DESC LIMIT 1, 1 
```

数据库回声：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' 1' at line 1 
```

1附近有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:02:35.910

标准更新状态

```
 UPDATE [LOW_PRIORITY] [IGNORE] table_reference
        SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
        [WHERE where_condition]
        [ORDER BY ...]
        [LIMIT row_count] 
```

对于你的情况试试这个

```
UPDATE changes SET checked='' WHERE item_id = 119898 AND type = 'example_edit' AND checked != 'restored' ORDER BY id DESC LIMIT 1 
```

试试吧，它真的会帮助你，代码测试。更新限制只能使用行计数而不是 1,1 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:05:25.530

LIMIT 可以与 UPDATE 一起使用，但只能与行数一起使用。参考[这个](http://dev.mysql.com/doc/refman/5.5/en/update.html)。

> LIMIT 子句对可以更新的行数进行了限制。

所以这个查询应该工作 -

```
 UPDATE 
  changes 
SET
  checked = '' 
WHERE item_id = 119898 
  AND TYPE = 'example_edit' 
  AND checked != 'restored' 
ORDER BY id DESC 
LIMIT 1; 
```

# c# - 引用的 DLL 未复制到输出目录

> ID：10007955
> 
> 赞同：0
> 
> 时间：2012-04-04T08:58:40.337
> 
> 标签：c#, msbuild

我的解决方案中有 2 个项目：项目 A 和 B。我添加了对项目 A 的 dll 引用。现在，当我构建项目 A 时，将 dll 复制到项目 A 的输出目录中。现在，如果我从项目 B 将项目引用到项目 A，则 dll 会更新到项目 B 输出文件夹中。这是为什么？

这是微软的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:04:20.550

您可以通过设置“复制到输出”选项来选择是否复制程序集。

在我的项目中，曾经产生运行时（控制台，应用程序，单元测试）..），正在将引用复制到本地。这很重要，因为没有它，应用程序将无法运行。

其他项目（组件等）正在构建到一个中央二进制文件夹，并且没有复制它们的引用，因为它们是从那里获取的。这节省了大量的构建时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:00:13.343

> 这是微软的设计吗？

是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T05:47:50.550

要将 Copy Local 属性设置为 True 或 False 在解决方案资源管理器中，单击 Show All Files 按钮以显示 References 节点。打开项目的引用节点。右键单击“引用”列表中的引用，然后单击“属性”。与该引用关联的属性出现在“属性”窗口的列表中。在“属性”窗口中，将“复制本地”属性更改为 True 或 False。

参考：[**https ://msdn.microsoft.com/en-us/library/t1zz5y8c(v=vs.90).aspx**](https://msdn.microsoft.com/en-us/library/t1zz5y8c(v=vs.90).aspx)

# wpf - 向所有截断文本添加省略号 (...) 的 ListView 样式

> ID：10007957
> 
> 赞同：3
> 
> 时间：2012-04-04T08:58:44.953
> 
> 标签：wpf, xaml, listview, styles, ellipsis

我想在我的 WPF 应用程序中为我的 ListViews 创建一个样式，这使它们看起来更像 Windows 资源管理器 ListView。我坚持的是当列太窄而无法修复文本时出现在网格/详细信息视图中的省略号 (...)。

我*知道*我可以覆盖每列的单元格模板，并明确设置`TextTrimming`模式以在每列的基础上获取省略号。但是，我想要一种可以应用于任何 ListView 以获得相同行为的样式。

我希望能够像这样定义列表视图：

```
<ListView ItemsSource="{Binding Library}" Style="{StaticResource ExplorerListStyle}">
    <ListView.View>
        <GridView>
           <GridViewColumn Width="90" Header="Title" DisplayMemberBinding="{Binding Title}" />
           <GridViewColumn Width="60" Header="Author" DisplayMemberBinding="{Binding Author}" />
        </GridView>
    </ListView.View>
</ListView> 
```

我还希望能够覆盖某些列的单元格模板，例如设置文本颜色，理想情况下仍然继承`TextTrimming`模板中文本的模式。

到目前为止，我设法实现这一目标的唯一方法是显式覆盖 ListView 中的 TextBlock 样式：

```
<ListView ItemsSource="{Binding Library}">
    <ListView.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="TextTrimming" Value="CharacterEllipsis" />
        </Style>
    </ListView.Resources>
    <ListView.View>
        <GridView>
           <GridViewColumn Width="90" Header="Title" DisplayMemberBinding="{Binding Title}" />
           <GridViewColumn Width="60" Header="Author" DisplayMemberBinding="{Binding Author}" />
        </GridView>
    </ListView.View>
</ListView> 
```

但是，这似乎有点笨拙，据我所知，不可能将其设置为样式。

所以，我正在寻找另一种方法来为`GridViewColumn`s 标题和单元格设置 TextTrimming 模式，*可以*在样式中设置，并且*不需要*显式`CellTemplate`s。

谢谢，

标记

# maven - maven是按模块执行还是逐阶段执行

> ID：10007959
> 
> 赞同：1
> 
> 时间：2012-04-04T08:58:57.577
> 
> 标签：maven, maven-2, maven-plugin, maven-3

对于多模块项目，maven 是如何执行的？

*   它是否按模块执行。我的意思是它是否完成了第一个模块的所有阶段。然后完成第二个模块中的所有阶段，依此类推。

或者

*   它是否在所有模块上完成一个阶段，然后在所有模块上运行第二阶段等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:13:21.043

一个模块一个模块。maven 依次调用每个模块上的命令指定的所有相关生命周期阶段。另请阅读[使用多个模块的指南](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:04:36.030

Maven首先解析所有的多模块树。检查依赖关系。如果项目 B 依赖于项目 A，则首先构建项目 A。来自的订单`<module>`具有第二优先级。

还有一个一般规则 - 总是添加`<relativePath>../pom.xml</relativePath>`到子 pom。

你不能有周期。

# video - 是否可以在 j2me 开发中调用本机播放器并播放视频？

> ID：10007965
> 
> 赞同：4
> 
> 时间：2012-04-04T08:59:06.243
> 
> 标签：video, java-me

我想为我的应用程序调用/打开本机播放器。我必须打开本机视频播放器并使用该视频播放器播放我的视频。所以请告诉我是否可以这样做？如果有可能，那么我必须使用哪个代码片段。还有一件事是我在 j2me 中开发我的应用程序，而不是在 Qt SDk 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:53:59.963

MIDlet 类有一个名为 platformRequest() 的方法，但不能保证它可以在许多设备上工作，其中 URL 是参数。例如，用参数URL打开本机浏览器，只是真正的绝对URL，如“http://stackoverflow.com”

```
 public void openBrowser(String URL) {
        try {
            mainMIDlet.platformRequest(URL);
        } catch (ConnectionNotFoundException e) {
            // error
        }
    } 
```

> 如果指定的 URL 的格式为 tel:+558112345678，如 RFC2806 中所指定，则平台必须将其解释为发起语音呼叫的请求。
> 
> 设备可以选择支持超出上述要求的其他 URL 方案。

更多信息请参阅 API JSR 118： [http ://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/index.html](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/index.html)

**小费**

使用方法 getAppProperty（MIDlet 类）或（System 类）：

```
public final String getAppProperty(String key) 
```

发现 URL（参数）的值，例如：

```
String platform = System.getProperty("microedition.platform"); 
```

请记住，每个制造商都有不同类型的特定参数和组合。

# facebook - 如何获取 Facebook 相册中照片的 JSON 数据？

> ID：10007970
> 
> 赞同：0
> 
> 时间：2012-04-04T08:59:19.470
> 
> 标签：facebook, facebook-graph-api

Facebook Graph API 页面上给出的示例是[https://graph.facebook.com/98423808305](https://graph.facebook.com/98423808305) - 这给出了相册中的所有照片及其 URL。我假设 98423808305 部分是专辑 ID。问题是，我如何获得自己的专辑 ID？我在哪里可以在我的相册的 URL 中找到它？

查询字符串中的第一个元素是`?set=a.xxxx.yyyy.zzzz`，当然还有更多的数字。我尝试使用 xxx、yyyy、zzzz。使用 zzzzz 让我简要了解了我自己的个人资料。使用 yyyyy 给了我其他人的个人资料。使用 zzzzz 给了我`false`.

我完全是 Facebook API 的新手，发现这一切都让人不知所措，不知道从哪里开始。任何帮助将不胜感激。

感谢：D。

澄清：我希望将我公开的 FB 相册中的照片嵌入到我自己的网站中。它是 CMS 驱动的，所以我认为如果我可以提供某种宏会很好，然后用户/编辑器可以输入一些详细信息（专辑 ID 或其他），宏将获取 JSON 数据，并生成一个CMS 页面上的相册。从我在客户端身份验证方法中可以看到，有一个过程需要我在 FB 上进行身份验证以获取访问令牌。有什么方法可以在没有身份验证的情况下获取公共相册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:55:42.197

尝试从 url 中提取 API 对象 ID 总是很脆弱，因为 Facebook 可以随时更改 url 格式。如果您打算使用 Graph API，`GET /me/albums`将包含您相册的 Graph API id。

# c# - 抛出 EndPointNotFoundException 所花费的时间

> ID：10007972
> 
> 赞同：2
> 
> 时间：2012-04-04T08:59:26.707
> 
> 标签：c#, wcf

我从代码调用服务，如果服务因任何原因停止，它会给我 EndPointNotFound 异常。

```
 <binding name="NormalMode" transferMode="Buffered" receiveTimeout="24.20:31:23.6470000">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
      <security mode="None" />
    </binding> 
```

我没有设置 openTimeOut 所以它会考虑默认的 1 分钟超时。

我以这种方式调用服务，

```
 private void MyServiceCall(Action serviceCall)
    {
        try
        {
            if (serviceCall != null)
            {
                serviceCall();
            }
        }
        catch (EndpointNotFoundException endpointNotFoundException)
        {
                            throw new EndpointNotFoundException(endpointNotFoundException.Message, endpointNotFoundException);
        } 
```

我的问题是如果服务停止，那么抛出 EndPointNotFoundException 需要 1 分钟吗？

**编辑：：**

在这种情况下，我知道服务已停止。我通过停止服务来测试它。问题是我们已经开发了断开连接的 senario，如果服务停止，它将返回默认数据，但这需要时间，所以我正在调查是否是 openTimeOut 负责它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:35:25.553

客户端连接失败的原因有很多，例如网络问题、服务器应用程序池停止/锁定、服务器线程池耗尽等。

这些不一定会引发 EndpointNotFoundException - 例如，如果应用程序池停止，则 503 错误会在客户端上显示为[ServiceTooBusyException](https://stackoverflow.com/questions/900616/service-too-busy-error-in-wcf)。在这种情况下，错误将“立即”发生，并且不会“等待”配置的超时持续时间，以便服务在服务器上“复活”自身。（即[openTimeout](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/84551e45-19a2-4d0d-bcc0-516a4041943d/)指定允许的最长时间）

您最好捕获一个基本异常并从那里开始工作，例如 `System.ServiceModel.CommunicationException`，甚至只是一个`System.Exception`.

在不相关的一点上，请注意任意“最大化”所有 WCF 配置设置是不明智的 - 请参阅[C# WCF - Client/Server - System.OutOfMemory Exception](https://stackoverflow.com/questions/4122932/c-sharp-wcf-client-server-system-outofmemory-exception/10008518#10008518)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:45:24.597

一个 TimeSpan 值，它指定为**完成打开操作提供的时间间隔。**此值应大于或等于零。默认值为 00:01:00。

所以我从中了解到的是，已经打开的操作应该在一分钟内完成。任何意见 ？？因为我正在测试它，只需要 5 秒就可以抛出 EndPointNotFoundException

# spring - 使用 Spring AOP 实现 @Before/@Post 一些东西

> ID：10007977
> 
> 赞同：0
> 
> 时间：2012-04-04T08:59:36.160
> 
> 标签：spring, annotations, aop, spring-aop

我需要拦截 writer.write(myObj) 类型的所有方法，并且当且仅当 myObj 包含使用 @BeforeWrite 注释的方法时，才执行此方法。

我有点困惑，因为我可以拦截编写器上的方法调用，但我不知道如何提供一个切入点来查看是否有一个用@BeforeWriter 注释的方法，这看起来类似于@PostLoad 注释的可能性在 JPA 中处理...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:15:52.880

在您的拦截器处理方法中，您有 type 的参数`ProceedingJoinPoint`，它有 method `getArgs()`。您可以检查您的参数 ( `myObj`) 方法反射并决定是否继续。示例（`call`属于类型`ProceedingJoinPoint`）：

```
boolean proceed = false;
for (Method method : call.getArgs()[0].getClass().getMethods()) {
    if (method.isAnnotationPresent(BeforeWriter.class)) {
        proceed = true;
        break;
    }
} 
```

# .net - 如何在运行时获取“选项比较”的值？

> ID：10007981
> 
> 赞同：-4
> 
> 时间：2012-04-04T08:59:59.850
> 
> 标签：.net, vb.net

出于调试目的，是否可以`Option Compare`在运行时获取 的值？

（我正在开发一个旧的[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序，它使用[InStr](http://msdn.microsoft.com/en-us/library/8460tsh1%28v=vs.80%29.aspx)和第一个参数作为`String`（Instr 的三参数版本），没有第三个参数，然后由[Option Compare](http://msdn.microsoft.com/en-us/library/8t3khw5f%28v=vs.80%29.aspx)确定。`Option Compare Text`据说使 InStr 不区分大小写；默认值为`Option Compare Binary`.)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:27:53.530

The option setting is only known at compile time. The compiler handles this with the OptionCompareAttribute attribute. When present on an optional parameter, it substitutes the option setting. Which inspires this function:

```
Function GetOptionCompare(<CompilerServices.OptionCompare()> _
                          Optional ByVal Compare As CompareMethod = CompareMethod.Binary) As CompareMethod
    Return Compare
End Function 
```

This however doesn't work for unguessable reasons. Punt the problem, simply take advantage of the difference between the compare methods:

```
Function GetOptionCompare() As CompareMethod
    Return IIf("A" = "a", CompareMethod.Text, CompareMethod.Binary)
End Function 
```

Do beware that Option Compare can be a per-source file setting, this function can only work when you rely on the Visual Studio default. That's a bit iffy. Well, pretty iffy. Well, it's bad. Avoid having to want to know the setting.

# c++ - C++ 通过引用传递数组

> ID：10007986
> 
> 赞同：88
> 
> 时间：2012-04-04T09:00:16.780
> 
> 标签：c++, arrays, pointers, reference, pass-by-reference

这是否允许通过引用传递数组？

```
 void foo(double& *bar) 
```

似乎我的编译器说不。为什么？通过引用传递数组的正确方法是什么？还是变通？我有一个数组参数，我的方法应该修改它，然后我应该检索它。或者，我可以使这个数组成为一个类成员，它工作得很好，但它对我的代码的其他部分有很多缺点（我想避免）。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-04-04T09:27:13.173

数组只能通过引用传递，实际上：

```
void foo(double (&bar)[10])
{
} 
```

这会阻止您执行以下操作：

```
double arr[20];
foo(arr); // won't compile 
```

为了能够将任意大小的数组传递给`foo`，请将其设为模板并在编译时捕获数组的大小：

```
template<typename T, size_t N>
void foo(T (&bar)[N])
{
    // use N here
} 
```

您应该认真考虑使用`std::vector`.，或者如果您有支持 c++11 的编译器，`std::array`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-04T09:25:19.307

是的，但是当参数匹配引用时，指针的隐式数组不是自动的，所以你需要类似的东西：

```
void foo( double (&array)[42] ); 
```

或者

```
void foo( double (&array)[] ); 
```

但是请注意，在匹配时，`double [42]`和`double []`是不同的类型。如果您有一个未知维度的数组，它将匹配第二个，但不匹配第一个，如果您有一个包含 42 个元素的数组，它将匹配第一个*但不匹配第二个*。（后者是，恕我直言，非常违反直觉。）

在第二种情况下，您还必须传递维度，因为一旦您进入函数内部，就无法恢复它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-04T09:12:58.730

当您使用 C++ 时，这里仍然缺少的强制性建议是使用`std::vector<double>`.

您可以通过引用轻松地传递它：

```
void foo(std::vector<double>& bar) {} 
```

如果你有 C++11 支持，也可以看看`std::array`.

以供参考：

*   [http://de.cppreference.com/w/cpp/container/vector](http://de.cppreference.com/w/cpp/container/vector)
*   [http://de.cppreference.com/w/cpp/container/array](http://de.cppreference.com/w/cpp/container/array)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-04T09:03:37.043

如果您只想修改元素：

```
void foo(double *bar); 
```

足够。

如果要将地址修改为（例如：）`realloc`，但它不适用于数组：

```
void foo(double *&bar); 
```

是正确的形式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-18T15:05:16.780

8.3.5.8 如果参数的类型包括“指向 T 的未知边界数组的指针”或“对 T 的未知边界数组的引用”形式的类型，则程序非良构

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-04T09:07:22.567

就像另一个答案说的那样，`&`把`*`.

这带来了一个有趣的点，有时可能会令人困惑：类型应该从右到左阅读。例如，这是（从最右边开始`*`）指向一个指向 int 的常量指针的指针。

```
int * const *x; 
```

因此，您编写的内容将是指向引用的指针，这是不可能的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-25T02:49:21.310

在这里，Erik 解释**了通过引用传递数组的**各种方式：[https](https://stackoverflow.com/a/5724184/5090928) ://stackoverflow.com/a/5724184/5090928 。

同样，您可以像这样创建**数组引用变量**：

```
int arr1[] = {1, 2, 3, 4, 5};
int(&arr2)[5] = arr1; 
```

# java - 如何从定义的方法中引用对象的值 - Java

> ID：10007987
> 
> 赞同：0
> 
> 时间：2012-04-04T09:00:16.827
> 
> 标签：java, class, interface

所以我有一个如下概述的方法：

```
 public interface Definitions{
      public boolean isEmpty();
    }

    public class Methods implements Definitions{
      public boolean isEmpty{
      //Insert code here
      }

      public static void main(String[] args){
      return;
      }
    } 
```

此方法在执行时不带参数/参数，它只需要返回一个布尔变量，定义使用它的原始对象是否为空，例如

```
 public class NewClass{
      public static void main(String[] args){
      Methods newObject = new Methods();
      return newObject.isEmpty();
    } 
```

我将如何定义方法“isEmpty”以返回真值或假值？我的主要问题是处理/检索使用它的对象的值。提前致谢

我在问题中忘记提到的一件事是，Methods 类实现了一个接口。我已经在上面修复了。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:07:09.440

能够设置“空”状态可能是个好主意：

```
public class Methods implements Definitions {
    private boolean empty = true;

    public boolean isEmpty() {
        return empty;
    }

    public void setEmpty(boolean empty) {
        this.empty = empty;
    }

    public void checkIsEmpty(ObjectTypeWhichCanBeEmpty obj) {
        setEmpty(obj.amIEmpty());
} 
```

现在百万美元的问题是你想要做什么？为什么不将“空”属性存储在要检查它是否为空的对象中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:01:55.313

您应该有一些实际上是对象状态的类成员，例如：

```
public class Methods{
    private boolean empty = true;
    public boolean isEmpty() {
       return empty;
    }

    //Then, you can add some method that set the empty field:
    public void fillObject() {
        empty = false;
    }

    public void emptyObject() {
        empty = true;
    }
} 
```

# mysql - mysql while循环；选择并插入

> ID：10007990
> 
> 赞同：0
> 
> 时间：2012-04-04T09:00:55.090
> 
> 标签：mysql, while-loop

我正在尝试将枚举从一个表移动到他们自己的表中，最简单的方法是运行一个 SQL 查询，我认为我可能会使用 WHILE 循环，但在下面之前从未使用过它显然是行不通的。是否可以执行以下操作：

```
WHILE (SET @cat = (SELECT DISTINCT `category` FROM `tablename`))
DO
  BEGIN
   INSERT INTO `categories` (title) VALUES (@cat);
  END;
END WHILE; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:03:43.857

你为什么不尝试像这样直接插入类别：

```
INSERT INTO `categories`
(
    title
)
SELECT DISTINCT
    `category`
FROM `tablename` 
```

# scala - 为什么我需要 jsr305 才能在 scala 中使用番石榴？

> ID：10007994
> 
> 赞同：19
> 
> 时间：2012-04-04T09:01:07.477
> 
> 标签：scala, guava

我有以下 scala 文件：

```
object SGuavaTryout {
  com.google.common.cache.CacheBuilder.newBuilder()
} 
```

我在类路径中使用 guava-11.0.2.jar 进行编译。我的 scala 2.9.1 编译器（eclipse 插件和普通 scalac）抱怨：

```
error while loading CacheBuilder, Missing dependency 
  'class javax.annotation.CheckReturnValue', required by 
  D:\devel\eclipse-workspace\Scala Spielwiese\guava-11.0.2.jar
  (com/google/common/cache/CacheBuilder.class) 
```

要编译，我需要将 jsr305 (jsr305-1.3.9.jar) 添加到构建路径中。没有 jsr305 的 java 等效编译就好了：

```
public class JGuavaTryout {
  public void tryout() {
    com.google.common.cache.CacheBuilder.newBuilder();
  }
} 
```

任何想法为什么scala需要jsr305？是否有与番石榴一起使用的官方 jsr305 实现？

谢谢！- 乔治

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T10:20:31.167

这是因为 Scala 编译器的设计方式，它要求类公开的所有类型在编译时都可用，而 Java 编译器实际上并不关心。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-04T14:28:39.510

Sean Parsons 通过解释为什么 Scala 需要 JSR 305 依赖项回答了您的第一个问题。

至于与 Guava 一起使用的“官方”JSR 305 实现，我会使用他们在[pom.xml](http://code.google.com/p/guava-libraries/source/browse/guava/pom.xml)中声明的那个：

```
<dependency>
    <groupId>com.google.code.findbugs</groupId>
    <artifactId>jsr305</artifactId>
    <version>1.3.9</version>
</dependency> 
```

如果您使用的是 Maven，我认为它会自动将依赖项添加到类路径中。

注意：您可以直接从[Maven 中央存储库](http://repo2.maven.org/maven2/com/google/code/findbugs/jsr305/1.3.9/)下载 jar 。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-01T11:32:46.443

您可以添加此依赖项：

```
<dependency>
    <groupId>com.google.code.findbugs</groupId>
    <artifactId>jsr305</artifactId>
    <version>2.0.3</version>
    <scope>provided</scope>
</dependency> 
```

因此编译将起作用，并且不会出现在最终版本中。

# ios - iOS 4.3 隐藏状态栏显示白条

> ID：10007995
> 
> 赞同：0
> 
> 时间：2012-04-04T09:01:16.433
> 
> 标签：ios, ios5, ios4

我有为 iOS 5 开发的幻灯片，现在我要把它移植到 iOS 4.3，当它全屏显示时需要在 iOS 5 中隐藏状态栏它工作正常但在 iOS 4.3 状态栏隐藏但在顶部显示白色条纹view.the 问题是如何在没有白色条纹的 iOS 4.3 中隐藏状态栏。这是用于隐藏状态栏的代码

方法一

```
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

方法二

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

方法 1 或方法 2 不适用于 ios4.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:08:22.107

写下您想要隐藏状态栏的视图控制器的代码。

```
-(void)viewWillAppear:(BOOL)animated{
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:07:19.993

如果您还没有弄清楚这一点，您还需要确保每个涉及的视图控制器 xib 都将“状态栏”设置为无。