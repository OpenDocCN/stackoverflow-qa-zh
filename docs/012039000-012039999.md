# StackOverflow 问答 12039000-12039999

# android - 如何在android 3.0中忽略“最近活动按钮”的按钮点击

> ID：12039004
> 
> 赞同：2
> 
> 时间：2012-08-20T13:53:19.307
> 
> 标签：android, android-3.0-honeycomb, statusbar

我的问题是不言自明的。我进行了很多搜索，但找不到处理最近活动按钮单击的方法。我想从 android 3.0 平板电脑的状态栏中忽略最近活动按钮的硬件按钮点击。

目前我到目前为止尝试的是：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

       if(keyCode == KeyEvent.KEYCODE_BACK) 
       { 
              return true;
       }
       // in the same way I have written it for KEYCODE_HOME
} 
```

你能告诉我我应该写什么来处理最近的活动按钮吗？

提前谢谢你。:)

**编辑：**这是我现在尝试过的。KEYCODE_APP_SWITCH 不工作。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        Log.e("INSIDE", "LOCKDEMO");
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.e("KEY EVENT", "BACK");
            return true;
        }
        if (keyCode == KeyEvent.KEYCODE_HOME) {
            Log.e("KEY EVENT", "HOME");
            return true;
        }
        if(keyCode == KeyEvent.FLAG_FROM_SYSTEM) {
            Log.e("KEY EVENT", "SYSTEM");
            return true;
        }
        if(keyCode == KeyEvent.FLAG_KEEP_TOUCH_MODE) {
            Log.e("KEY EVENT", "TOUCH MODE");
            return true;
        }
        if(keyCode == KeyEvent.FLAG_SOFT_KEYBOARD) {
            Log.e("KEY EVENT", "SoFT KEYBOARD");
            return true;
        }
        if(keyCode == KeyEvent.FLAG_VIRTUAL_HARD_KEY) {
            Log.e("KEY EVENT", "HARDWARE KEY");
            return true;
        }
        if(keyCode == KeyEvent.KEYCODE_APP_SWITCH) {
            Log.e("KEY EVENT", "APP SWITCH");
            return true;
        }

        Log.e("KEY EVENT", "NOT HANDLED");
        return super.onKeyDown(keyCode, event);
    } 
```

当我按下RecentAppBtn 时，它甚至不打印最后一条日志语句，即未处理的事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:02:09.890

通过查看文档，我认为这[`KeyEvent.KEYCODE_APP_SWITCH`](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_APP_SWITCH)就是您正在寻找的内容。

但是，当您按下应用程序切换器时，您也可以使用[`KeyEvent.getKeyCode()`- 方法](http://developer.android.com/reference/android/view/KeyEvent.html#getKeyCode%28%29)（在-`event`参数上）来查看触发了哪个键代码（以及是否触发了任何键）。

* * *

我玩了一段时间，我得出的结论是，这是不可能的。

-event`KEYCODE_APP_SWITCH`不会传递给[`onKeyDown()`](http://developer.android.com/reference/android/app/Activity.html#onKeyDown%28int,%20android.view.KeyEvent%29)或[`dispatchKeyEvent()`](http://developer.android.com/reference/android/app/Activity.html#dispatchKeyEvent%28android.view.KeyEvent%29)。因此，它无法处理。

此外，您将在 Android 4 设备上遇到问题，因为[`KEYCODE_HOME`-event](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME)也不再分派给上述任何方法。请参阅文档：

> 键码常量：Home键。该密钥**由框架处理，从不传递给应用程序**。

* * *

似乎也没有真正简单的方法可以自己创建真正的锁屏。请参阅此讨论：[开发自定义锁定屏幕](https://stackoverflow.com/questions/5529608/android-how-to-develop-custom-lock-screen)

很有可能在默认锁屏上显示一些自定义信息：[有没有办法让我在锁屏上显示自定义消息？](https://stackoverflow.com/questions/6920613/is-there-a-way-for-me-to-show-a-customized-message-on-the-lock-screen/6920663#6920663)

* * *

为了完整起见：在 Android L 中，您将能够“将用户锁定在您的应用中”，因此您无需手动覆盖硬件键。以下是[相关信息](http://developer.android.com/preview/api-overview.html#TaskLocking)：

> L Developer Preview**引入了一个新的任务锁定 API，可让您暂时限制用户离开您的应用程序**或被通知打断。例如，如果您正在开发一个教育应用程序以支持 Android 上的高风险评估要求，则可以使用此方法。**一旦您的应用激活此模式，用户将无法查看通知、访问其他应用或返回主屏幕，直到您的应用退出该模式。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T10:39:19.687

如果您想以 Kiosk 模式运行您的应用程序，则可以禁用**com.android.systemui**并用软按钮替换按钮（例如 Button Savior 应用程序，但请注意不要让您的设备变砖！）。似乎很多化妆品都消失了，我不知道它是否会以某种未知的方式影响系统稳定性，但到目前为止我已经让它工作了。

如果有人知道更多关于**com.android.systemui**，它的真正作用以及禁用它是否安全，请发表评论！

另请参阅我的帖子： [Safe to disable com.android.systemui?](https://stackoverflow.com/questions/29229474/is-it-safe-to-disable-com-android-systemui)

我希望在哪里得到一些答案...

# ios - 将 iPod Library 文件复制到 iPhone 应用程序的文件夹中，是否合法？

> ID：12039009
> 
> 赞同：0
> 
> 时间：2012-08-20T13:53:38.150
> 
> 标签：ios, app-store, ipod

根据最新的 App Store 指南，将歌曲从 iPod 库复制到应用程序的本地文件夹是否合法？

我的目的是用统一的音频源播放歌曲并在运行时进行频谱分析。此过程完成后，我可以从本地文件夹中删除歌曲。可以吗？

# c# - WP7.1 txt 文件处理 - 为什么我收到错误“MethodAccessExepction 未处理”？

> ID：12039014
> 
> 赞同：0
> 
> 时间：2012-08-20T13:53:59.800
> 
> 标签：c#, xna, windows-phone-7.1, text-files, multidimensional-array

我正在尝试创建一个从 .txt 文件加载数据的二维整数数组，但是当它编译这行代码时：`string line = stream.ReadLine();`它给了我线程标题中的错误，还有这个：

> 尝试访问方法失败，System.IO.StreamReader..ctor(System.String)

我知道在 PC 和 WP7/360 之间使用 txt 文件之间可能存在差异，但是我确信这是可能的，因为我的大学导师在他的 WP7 手机上制作的应用程序使用了 .txt 文件，我必须做出哪些改变Windows Phone 正确读取文件？

对于那些想要额外信息的人来说，这里是将 txt 加载到 int 数组的整个方法：

```
 public void loadMap(string mapFileName)
    {
        int x = 0, y = 0;

        StreamReader stream = new StreamReader(mapFileName);

        do
        {
            string line = stream.ReadLine();
            string[] numbers = line.Split(',');

            foreach (string e in numbers)
            {
                int tile = int.Parse(e);
                this.tileID[x, y] = tile;

                x++;
            }
            y++;
        }
        while (!stream.EndOfStream);
        xSize = x;
        ySize = y;

        stream.Close();

    } 
```

**编辑**
现在取得了一些进展，尽管我通过使用 IsolatedStorage 方法遇到了一个新错误，但我在解析代码之前添加了以下代码：

```
 var store = IsolatedStorageFile.GetUserStoreForApplication();
    var readStream = new IsolatedStorageFileStream(mapFileName, FileMode.Open, store);
    var stream = new StreamReader(readStream); 
```

现在在这里：`var readStream = new IsolatedStorageFileStream(mapFileName, FileMode.Open, store);`我收到错误：

> 不允许对 IsolatedStorageFileStream 进行操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:31:16.293

出于安全原因，Windows Phone 上的应用程序是**沙盒化**的，这实际上只是意味着您无法触摸不属于您的东西。考虑改用 XNA 的`StorageContainer`类，它旨在解决非 PC 平台固有的安全限制。

**更新**

经过进一步调查，Windows Phone 似乎不提供此功能。相反，您应该使用`System.IO.IsolatedStorage`该类。

# java - 为什么 SpringSource Tool Suite 需要导入 Java-doc 注释中提到的类？

> ID：12039015
> 
> 赞同：0
> 
> 时间：2012-08-20T13:54:01.427
> 
> 标签：java, sts-springsourcetoolsuite

在修复了项目中的一些 checkstyle 错误后，我的 checkstyle 插件抛出了一个错误，指出我有一个未使用的导入。我查找了文件并在那里找到了导入。唯一提到导入类的地方是在 java-doc 注释中。

```
import MyException;

class Y {
    /** 
     * @throws MyException
     */
    public void X() throws Exception {
         //Do something.
    }
} 
```

确实，java-doc 与实际代码不正确，但我不认为 import 应该是必要的，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:06:28.387

JDT 解析 JavaDoc 注释中的类型，因此导航和悬停等功能可以正常工作。您可以通过转到 Preferences -> Java -> Compiler -> Javadoc 来禁用此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:23:08.217

如果您在 javadoc 注释中需要一个类型但实际上并未在代码中使用的情况，只需在 javadoc 注释中使用完整的类名。

这将保留 IDE 悬停并消除 checkstyle 错误。

# jquery - jQuery嵌套.each

> ID：12039016
> 
> 赞同：3
> 
> 时间：2012-08-20T13:54:01.740
> 
> 标签：jquery, loops, for-loop, foreach, each

```
$(".globalTabs").each(function(){
    var $globalTabs = $(this);
    var parent = $globalTabs.parent('form');

    //initiate jQuery UI tabs
    $globalTabs.tabs();

    var ATBwidth = $globalTabs.parent().outerWidth();
    var tabsWidth = 0;

    //get total width of all li/tabs
    $(".globalTabs .ui-tabs-nav li").each(function() {
     tabsWidth += $(this).outerWidth();
    });

    if(tabsWidth >= ATBwidth){
       //doing something here
    }

}); 
```

由于嵌套而中断`.each`- 有没有解决这个问题的简单方法？

Break = 第二个循环之后的功能，它指的`$globalTabs`是不再触发，因为它是未定义的。

**愚蠢的错误：**

在第二个循环之后，在本节中我提到了选择器两次。

所以，`$(".globalTabs").each(function(){`这当然是行不通的： `$globalTabs.find(".globalTabs .ui-tabs-nav li").hide();`

与循环无关。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:58:02.420

而不是使用`this`传入值的值 from`.each(index, value)`

```
$(".globalTabs").each(function(index, value){
    var $globalTabs = $(value);
    var parent = $globalTabs.parent('form');

    //initiate jQuery UI tabs
    $globalTabs.tabs();

    var ATBwidth = $globalTabs.parent().outerWidth();
    var tabsWidth = 0;

    //get total width of all li/tabs
    $(".globalTabs .ui-tabs-nav li").each(function(index, secondValue) {
     tabsWidth += $(secondValue).outerWidth();
    });

    if(tabsWidth >= ATBwidth){
       //doing something here
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:57:28.833

也许您的多个`this`变量变得混乱？尝试在回调函数中使用参数（http://api.jquery.com/each/）：

```
$(".globalTabs").each(function(i,tab){
    var $globalTabs = $(tab);

// ...

$(".globalTabs .ui-tabs-nav li").each(function(j,myli) {
    tabsWidth += $(myli).outerWidth();
}); 
```

# javascript - 条件刷新页面——如何设置referrer？

> ID：12039019
> 
> 赞同：0
> 
> 时间：2012-08-20T13:54:21.593
> 
> 标签：javascript

当推荐人为空白时，我想刷新我的特定页面。为此，我使用了这个脚本：

```
 if (document.referrer === "" && document.URL.match("mysite.com/page1/module1")){
     window.location.reload();
 } 
```

当然它会无休止地刷新——因为在刷新站点后，引荐来源网址也是空白的。

怎么让它只刷新一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:11:19.573

尝试这个：

```
top.location.href = top.location.href; 
```

而不是这个：

```
window.location.reload(); 
```

最好使用 PHP 来做这个条件：

```
<?php
if(!$_SERVER['HTTP_REFERER']) {
   echo '<script>top.location.href = top.location.href;</script>';
}
?> 
```

无论如何，您尝试做的是非常糟糕的做法，因为很多人都在阻止浏览器发送推荐人。

# c++ - main.cpp:22:34: 错误: 'xxxxxxx' 没有在这个 > 范围内声明

> ID：12039021
> 
> 赞同：0
> 
> 时间：2012-08-20T13:54:32.750
> 
> 标签：c++, windows, linux

我遇到了这个错误：

> main.cpp:22:34：错误：“getTotalSystemMemory”未在此范围内声明

```
#include <unistd.h>
#include <cstdlib>
#include <stdio.h>
#include <iostream>

using namespace std;

/*
 * 
 */
int main(int argc, char** argv) {

    cout << "Hello World! \n";

    cout << getTotalSystemMemory();

    return 0;
}

long getTotalSystemMemory()
{
    long pages = sysconf(_SC_PHYS_PAGES);
    long page_size = sysconf(_SC_PAGE_SIZE);
    return pages * page_size;
} 
```

我假设方法“getTotalSystemMemory”在范围内，因为它在同一个类中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:55:32.613

在使用该函数之前，您至少需要提供一个*声明：*

```
long getTotalSystemMemory(); //declaration

int main(int argc, char** argv) {
    //...
    cout << getTotalSystemMemory();
    //...
}

long getTotalSystemMemory()
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:55:23.143

您必须首先使用 C/C++ 声明该函数。

把这个放在前面`main`

```
long getTotalSystemMemory(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:57:44.967

如果要在下面定义函数，则必须“原型化”该函数`int main() {}`：

```
long getTotalSystemMemory();

int main() {
    /* ....... */
    getTotalSystemMemory();
}

long getTotalSystemMemory() {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:58:49.020

在 c++ 中，您必须在使用它的函数之前编写函数。

如果不想把函数写在top，必须先放一个*[prototype](https://en.wikipedia.org/wiki/Function_prototype)*。原型看起来像这样：

`<return-value> <function name> (<parameters type>);`

# python - Clipper 的 Python 绑定

> ID：12039023
> 
> 赞同：2
> 
> 时间：2012-08-20T13:54:41.647
> 
> 标签：python, polygon, offset

[Clipper](http://www.angusj.com/delphi/clipper.php)库是否有一些 Python 绑定？
我需要 OffsetPolygons 函数。我曾尝试将 C++ Clipper 代码转换为 Python，并且在某种程度上我设法做到了，但后来它变得太复杂了——看来我应该转换为 Python 完整的 Clipper 文件——这是一项艰巨的工作。

[此处](http://pyright.blogspot.com/2011/07/pyeuclid-vector-math-and-polygon-offset.html)提供了一些使用 Python 进行多边形边界偏移的简单代码，但它并不能普遍解决问题 - 当偏移距离很高并且某些角消失或出现新角时。

非常欢迎对其他基于 Python 的多边形偏移解决方案提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T16:40:45.203

您可以尝试[pyclipper](https://pypi.python.org/pypi/pyclipper) ( [source](https://github.com/greginvm/pyclipper) ) - 它是 Clipper 库 (v6.2.1) 的 C++ 版本的包装器。它公开了 Clippers 的所有公共方法。通过 pip 安装：

```
pip install pyclipper 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:22:21.093

目前没有用于 Clipper 的 Python 绑定。为了避免翻译的艰巨任务，我的建议是创建一个导出 OffsetPolygons 函数的 .dll 或 .so 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T22:06:27.560

[Shapely](http://toblerity.org/shapely/index.html)实现了一个 parallel_offset 过程，可以满足您的需求，并提供简单的 python/numpy 集成：[http ://toblerity.org/shapely/manual.html#object.parallel_offset](http://toblerity.org/shapely/manual.html#object.parallel_offset)

# php - Android - 如何处理被重定向的网络请求

> ID：12039026
> 
> 赞同：1
> 
> 时间：2012-08-20T13:54:59.130
> 
> 标签：php, android, api, redirect, httpwebrequest

我有一个处理 get + post 请求的 API，但是我收到了一个错误报告，即连接到公司网络后面的用户无法在我的应用程序中进行身份验证。

基本上发生的情况是用户向 api 发送 post request（用户名 + 密码），并且 API 以 json 结果响应

然而，网络正在塑造流量，使得初始请求通过 Web 服务器重定向，并以这样的 html 消息进行响应；

```
<HTML>
<HEAD>
<TITLE> Web Authentication Redirect</TITLE><META http-equiv="Cache-control" content="no-cache">
<META http-equiv="Pragma" content="no-cache"><META http-equiv="Expires" content="-1"><META http-equiv="refresh" content="1; URL=https://wirelessauth.login.html?redirect=bla.co.uk/android/api/auth">
</HEAD>
</HTML> 
```

这通常会将浏览器重定向到正确的页面，但是在我的 android 应用程序中，我不知道如何处理这个问题？

这可能像泥浆一样清晰，但感谢您的帮助:)

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T17:33:36.807

您的设备上的无线连接未通过身份验证或互联网服务提供商无法正常工作。尝试浏览网页，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:32:24.027

我相信最好的解决方案是与您的网络管理员协商重定向的例外情况，但您可以尝试解决以下问题：

*   发布 http 帖子，如果您没有收到预期的错误或响应之一，请尝试使用 loadDataWithBaseUrl 在 WebView 中加载响应[（](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)不要使用 loadData，它已损坏！）并让 webview 处理重定向。为您完成工作不必让 web 视图可见。使用 webview 回调拦截重定向后返回的任何响应或页面，并在 webview 之外适当地解析/处理它们。

# c# - 设置日期和月份格式，但不设置它们的顺序

> ID：12039028
> 
> 赞同：7
> 
> 时间：2012-08-20T13:55:08.273
> 
> 标签：c#, datetime

我知道日期时间格式。“dd”代表从 01 到 31 的日期，“MM”代表从 01 到 12 的月份。我需要这种格式。但是如果我写“dd MM”（在我的例子中是 ToString() 方法），它总是会在月份的前一天出现。如何在不更改当前语言环境的顺序（第一天或第一个月）的情况下设置此格式（dd 和 MM）？因此，如果在当前的文化日首先出现，我想收到“20 08 2012”（分隔符在这里无关紧要），如果月份首先出现 - “08 20 2012”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:01:40.967

您可以使用[`MonthDayPattern`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthdaypattern.aspx)当前语言环境中的 来获取两个项目的相对顺序，然后构造一个`dd MM`or `MM dd`：

```
var mdp = CultureInfo.CurrentCulture.DateTimeFormat.MonthDayPattern;
string pattern = mdp.IndexOf('M') < mdp.IndexOf('d') ? "MM dd" : "dd MM"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:01:13.690

看看文化的[MonthDayPattern](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthdaypattern.aspx)。也许您可以根据需要对其进行自定义，例如

```
string FormatWithMonthDayPattern(DateTime dateTime, CultureInfo cultureInfo)
{
    var pattern = cultureInfo.DateTimeFormat.MonthDayPattern;
    return dateTime.ToString(Regex.Replace(pattern, "M+", "MM"));
}

var result1 = FormatWithMonthDayPattern(DateTime.Now, new CultureInfo("en-US"));
// result1 == "08 20"

var result2 = FormatWithMonthDayPattern(DateTime.Now, new CultureInfo("fr-FR"));
// result2 == "20 08" 
```

# android - 使用自定义适配器从 ArrayList 中删除项目

> ID：12039031
> 
> 赞同：1
> 
> 时间：2012-08-20T13:55:16.510
> 
> 标签：android, arraylist, adapter

我创建了一个带有自定义适配器的 ArrayList，以在每个项目旁边显示一个删除按钮。如何通过单击相应的删除按钮来删除列表中的一项？

我读到我必须在我的 getView() 方法中添加以下代码：

```
btnDel.setTag(position); 
```

接下来我应该将位置转换为 int，因为 setTag 返回一个对象。我该如何管理？

然后，我应该在我的 getView() 中创建一个 onClickListener() 函数，如下所示：

```
btnDel.setOnClick....{
arrayList.remove(index);
adapter.notifyDataSetChanged();} 
```

如何获取当前选定的删除按钮的编号，或者我应该在 remove() 中放入什么？

我是android新手，所以请提供代码示例或易于理解的提示:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:01:32.903

您应该将代码放在 getView 方法中并使位置最终...

```
 btnDelete.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                arrayList.remove(position);

                notifyDataSetChanged();

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:35:55.610

您从适配器类内部的 getview 方法编写代码，然后检查它是否有此代码。

```
 public View getView(int position, View convertView, ViewGroup parent) {
anyListener.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            yourArrayList.remove(position);
            notifyDataSetChanged();
        }
    });
    return convertView; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:06:07.250

您需要创建与此类似的东西（至少这是我要创建此功能的方式）：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    ViewHolder holder;
    if (convertView == null) {
        vi = inflater.inflate(R.layout.item, null);
        holder = new ViewHolder();
        holder.name = (Button) vi.findViewById(R.id.delete);
        vi.setTag(holder);
    } else
        holder = (ViewHolder) vi.getTag();
        holder.name.setText("Delete");

        holder.name.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            arrayList.remove(position);

            adapter.notifyDataSetChanged();

        }
    });

    return vi;
} 
```

类似的东西应该适合你。希望能帮助到你！:)

# php - 为什么不显示我的表单会话消息？（jQuery？）

> ID：12039035
> 
> 赞同：0
> 
> 时间：2012-08-20T13:55:27.977
> 
> 标签：php, jquery

我在这里有一个页面：[https](https://github.com/alexwaters/PWTKD-new-CMS/blob/master/taekwondo/schedule-dev.php) ://github.com/alexwaters/PWTKD-new-CMS/blob/master/taekwondo/schedule-dev.php没有显示我的会话消息：`<?php echo output_message($message); ?>`

我一直试图找出他们到底出了什么问题，但不知道。他们在其他页面上工作，但不是在这个页面上。

有人可以帮我找出我犯的新手错误吗？

根据请求，这里有一些可能相关的代码：

*调度-dev.php*

```
<?php require_once("../includes/initialize.php"); ?>
<?php $schedules = Schedule::find_all();?>
<?php $messages = Messages::find_by_id(1);?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="jquery-1.2.6.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){

        $("#contactLink").click(function(){
            if ($("#contactForm").is(":hidden")){
                $("#contactForm").slideDown("slow");
            }else{
                $("#contactForm").slideUp("slow");
            }
        });

    });

    function closeForm(){
        $("#messageSent").show("slow");
        setTimeout('$("#messageSent").hide();$("#contactForm").slideUp("slow")', 2000);
    }
</script> 
```

...

```
<?php 
if(isset($_POST['signupSubmit'])){
    $signup = new Signup();
    $signup->name = $_POST['name'];
    $signup->age = $_POST['email'];
    if($signup->save()) {
        $session->message("We will contact you with details.");
        redirect_to('schedule.php');
    } else {
        $message = join("test", $signup->errors);
    }
}
?>
<?php echo output_message($message); ?>
    <div id="contactFormContainer">
        <div id="contactLink"></div>
        <div id="contactForm">
            <fieldset>
                <label for="name">Name *</label>
                <input id="name" type="text" />
                <label for="email">Email address *</label>
                <input id="email" type="text" />
                <input id="sendMail" type="submit" name="signupSubmit" onclick="closeForm()" />
                <span id="messageSent"></span>
            </fieldset>     
        </div>
    </div> 
```

*注册.php*

```
<?php
// If it's going to need the database, then it's 
// probably smart to require it before we start.
require_once(LIB_PATH.DS.'database.php');

class Signup extends DatabaseObject {

    protected static $table_name="signup";
    protected static $db_fields=array('id', 'name','email');
    public $id;
    public $name;
    public $email;

    public $errors=array();

    public function save() {
        // A new record won't have an id yet.
        if(isset($this->id)) {
            // Really just to update the name
            $this->update();
            return true;
        } else {
            // Make sure there are no errors
            // Can't save if there are pre-existing errors
            if(!empty($this->errors)) { return false; }

            // Make sure the name is not too long for the DB
            if(strlen($this->name) >= 255) {
                $this->errors[] = "Name must be <= 255 characters long.";
                return false;
            }
            if(strlen($this->email) >= 255) {
                $this->errors[] = "Email must be <= 255 characters long.";
                return false;
            }
            if(empty($email)) {
                $this->errors[] = "Please enter an email address";
                return false;
            }
            //Finally add the item to the DB
            if($this->create()) {
                return true;
            } else {
                // 
                $this->errors[] = "Send failed, please contact us";
                return false;
            }
        }
    } 
```

和其他一些通用类的东西

*来自 session.php 的消息方法*

```
public function message($msg="") {
  if(!empty($msg)) {
    // then this is "set message"
    // make sure you understand why $this->message=$msg wouldn't work
    $_SESSION['message'] = $msg;
  } else {
    // then this is "get message"
        return $this->message;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:01:47.483

您不需要将 session_start() 添加到您的 php 文件中吗？尝试这样做，让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:59:34.927

1.  我不得不在保存方法中使用 $this-email
2.  我需要使表格成为实际的帖子表格
3.  会话消息没有被输出（？），因为它没有抓住帖子变量

# javascript - 如何同步 div 的两个滚动条

> ID：12039038
> 
> 赞同：15
> 
> 时间：2012-08-20T13:55:33.013
> 
> 标签：javascript, css

我有这个文件比较代码：http: [//jsfiddle.net/CrN6X/](http://jsfiddle.net/CrN6X/)

现在它做了我需要的：

1.  一个只垂直滚动的大 div
2.  仅水平滚动的两个较小的潜水

这样我可以很容易地比较我的文件，但我有一个问题：只有当我一直向下滚动时才能访问底部滚动条。

如何使它们*浮动*或将滚动条移动到另一个 div，总是可以看到，这样我就不需要将另一个 div 一直向下滚动到底部来访问它们？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-20T14:09:38.687

这里的 javascript 是您真正需要的，但我添加了 html，以便您可以看到它的实际效果。

```
$("#div1").scroll(function () { 
  $("#div2").scrollTop($("#div1").scrollTop());
  $("#div2").scrollLeft($("#div1").scrollLeft());
});
$("#div2").scroll(function () { 
  $("#div1").scrollTop($("#div2").scrollTop());
  $("#div1").scrollLeft($("#div2").scrollLeft());
});
```

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<div id="div1" style="float:left;overflow:auto;height:100px;width:200px;">
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
</div>

<div id="div2" style="float:right;overflow:auto;height:100px;width:200px;">
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
</div>
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-03-22T03:35:02.200

为了避免使用鼠标滚轮滚动时出现滚动滞后效应，我们需要禁用第二个滚动事件触发器。在下面检查我的方法：

```
 var ignoreScrollEvents = false
  function syncScroll(element1, element2) {
    element1.scroll(function (e) {
      var ignore = ignoreScrollEvents
      ignoreScrollEvents = false
      if (ignore) return

      ignoreScrollEvents = true
      element2.scrollTop(element1.scrollTop())
    })
  }
  syncScroll($("#div1"), $("#div2"))
  syncScroll($("#div2"), $("#div1"))
```

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<div id="div1" style="float:left;overflow:auto;height:100px;width:200px;">
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
</div>

<div id="div2" style="float:right;overflow:auto;height:100px;width:200px;">
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
  <p>lulz</p>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:07:25.287

不，滚动条放置在您较小的 div 中。这些滚动条被锁定在 div 的底部，因此无法使用。

您可以做的是在您的大 div*下*制作两个 javascript 滚动条并完全禁用默认滚动条。然后你的滚动条总是可见的。如果您想加倍努力，这还允许您耦合滚动条，以便左右窗口滚动到相同的位置，以便更好地进行比较。

# python - 在 SQLAlchemy 中，如何使用声明性语法定义事件以触发 DDL？

> ID：12039046
> 
> 赞同：6
> 
> 时间：2012-08-20T13:55:55.543
> 
> 标签：python, sqlalchemy, declarative

此示例显示如何将其与“非声明性”一起使用 - [http://docs.sqlalchemy.org/en/latest/core/ddl.html#sqlalchemy.schema.DDL](http://docs.sqlalchemy.org/en/latest/core/ddl.html#sqlalchemy.schema.DDL)

如何将它与 ORM 声明式语法一起使用？

例如，使用这种结构：

```
Base = declarative_base(bind=engine)     
class TableXYZ(Base):
    __tablename__ = 'tablexyz' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T23:09:24.997

愚蠢的例子，但认为这是你正在寻找的，应该让你去：

```
from sqlalchemy import event
from sqlalchemy.engine import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import create_session
from sqlalchemy.schema import Column, DDL
from sqlalchemy.types import Integer

Base = declarative_base()
engine = create_engine('sqlite:////tmp/test.db', echo=True)

class TableXYZ(Base):
    __tablename__ = 'tablexyz'
    id = Column(Integer, primary_key=True)

#event.listen(
#   Base.metadata, 'after_create',
#   DDL("""
#   alter table TableXYZ add column name text
#   """)

event.listen(
    TableXYZ.__table__, 'after_create',
    DDL("""
    alter table TableXYZ add column name text
    """)
)
Base.metadata.create_all(engine) 
```

运行上述结果 - 注意添加列的“名称文本”：

```
sqlite> .schema tablexyz
CREATE TABLE tablexyz (
    id INTEGER NOT NULL, name text, 
    PRIMARY KEY (id)
); 
```

我的代码是声明式的，并使用 event.listen 添加触发器和其他存储过程。似乎运作良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:11:28.433

“非声明式”和“声明式”应该是一样的。

您通过指定（使用您的班级和文档的事件和函数）来注册您的事件：

```
event.listen(TableXYZ, 'before_create', DDL('DROP TRIGGER users_trigger')) 
```

语法类似于：

```
event.listen(Class, 'name_of_event', function) 
```

# css - 在微软渐变中使用较少的变量

> ID：12039049
> 
> 赞同：8
> 
> 时间：2012-08-20T13:56:30.303
> 
> 标签：css, less

我在让 .LESS 识别字符串中有一个变量时遇到了一些麻烦。这是我当前的代码

```
filter: progid:DXImageTransform.microsoft.gradient(startColorstr='@{startColor}', endColorstr='@{endColor}', GradientType=0); 
```

@startColor 和 @endColor 都是变量。

如何在字符串中放置 .LESS 变量？

编辑：

我修复了它（我认为..）这是对我有用的结束代码

```
filter: progid:DXImageTransform.Microsoft.Gradient(startColorstr=@startColor, endColorstr=@endColor, GradientType=0); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T14:08:45.777

尝试：

```
filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr='@{startColor}', endColorstr='@{endColor}', GradientType=0)" 
```

tilda 和引号允许您在这种情况下实际转义代码。我也最终使用了我的不透明度东西，但那是因为我想重用这个词`opacity`作为函数名。

```
filter: ~"alpha(opacity=@{op})! important" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T06:40:51.997

最好使用：~"filter" 转义整个过滤器属性，并将 less 变量（不带“@”符号）包裹在大括号中。

我创建了一个 mixins，可以将颜色和不透明度值分别正确地转换为 rgba 和 argb 值：

```
.rgba(@color, @opacity) {
    @rgba: fade(@color, @opacity);
    @ieColor: argb(@rgba);

    background-color: @rgba;
    filter: ~"progid:DXImageTransform.Microsoft.gradient( startColorstr='@{ieColor}', endColorstr='@{ieColor}',GradientType=0)";
} 
```

# bash - 需要替换文件中的重复项，除非该行与模式匹配

> ID：12039055
> 
> 赞同：1
> 
> 时间：2012-08-20T13:56:52.407
> 
> 标签：bash, sed, awk

我的问题很简单。我有一个文件，其中包含经常相互重复的行。我的第一次尝试使用 awk: `cat /tmp/log |awk '!x[$0]++'|`。

这完美地完成了这项工作，只是我意识到我需要复制一行。

所以基本上我需要删除所有重复项，除了一个包含“成功关联”的重复项。哪怕是个骗子。

欢迎任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:00:35.210

如果之前没有看到或者它等于允许的重复，则打印该行：

```
awk '!x[$0]++ || ($0 ~ /Successful association/)' /tmp/log 
```

# mysql - 单个 sql 查询来执行一些分组

> ID：12039057
> 
> 赞同：7
> 
> 时间：2012-08-20T13:57:06.900
> 
> 标签：mysql, sql, group-by

```
CREATE TABLE IF NOT EXISTS `projects` (
 `idproject` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `date` datetime NOT NULL,
  `status` enum('new','active','closed') NOT NULL,
  `priority` enum('low','medium','high') NOT NULL,
  PRIMARY KEY (`idproject`)
 ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 
```

以下是一些数据：

```
 INSERT INTO `projects` (`idproject`, `name`, `date`, `status`, `priority`) VALUES
(1, 'iCompany', '2011-03-23 11:41:44', 'new', 'medium'),
(2, 'John Doe & Co.', '2011-04-09 14:38:04', 'closed', 'low'),
(3, 'ACME, Inc.', '2011-05-21 11:43:11', 'active', 'high'),
(4, 'John Doe & Co.', '2011-03-28 15:19:45', 'active', 'low'),
(5, 'John Doe & Co.', '2011-03-08 15:16:32', 'new', 'low'),
(6, 'ACME, Inc.', '2011-04-05 20:58:42', 'active', 'low'),
(7, 'Mega Corp', '2011-04-21 08:08:53', 'new', 'low'),
(8, 'iCompany', '2011-04-17 08:40:36', 'active', 'medium'),
(9, 'iCompany', '2011-05-18 14:36:48', 'active', 'low'),
(10, 'John Doe & Co.', '2011-04-18 19:08:25', 'new', 'medium'),
(11, 'ACME, Inc.', '2011-05-19 13:11:04', 'active', 'low'),
(12, 'Foo Bars', '2011-03-03 17:19:29', 'new', 'high'),
(13, 'ACME, Inc.', '2011-04-23 20:42:33', 'active', 'medium'),
(14, 'Foo Bars', '2011-05-13 09:18:15', 'active', 'medium'),
(15, 'ACME, Inc.', '2011-03-20 14:37:18', 'new', 'low'),
(16, 'Foo Bars', '2011-04-18 13:46:23', 'active', 'high'),
(17, 'iCompany', '2011-05-31 07:13:32', 'closed', 'low'),
(18, 'Foo Bars', '2011-05-31 15:43:39', 'active', 'low'),
(19, 'John Doe & Co.', '2011-05-28 11:28:32', 'active', 'medium') 
```

我想要所有项目的列表：-具有最新（按时间顺序）状态和优先级，-具有第一个和最新条目之间的天数（如果只有一个条目，则为 0），您可以忽略小时数, - 按优先级排序（首先是“高”），然后按名称排序，- 没有最新状态为“关闭”的项目（从结果中省略）。

输出应该是：

```
+---------------+-----------+---------------+----------------+
¦name           ¦total_days ¦latest_status  ¦latest_priority ¦
+---------------+-----------+---------------+----------------+
¦ACME, Inc.     ¦62         ¦active         ¦high            ¦
¦John Doe & Co. ¦81         ¦active         ¦medium          ¦
¦Foo Bars       ¦89         ¦active         ¦low             ¦
¦Mega Corp      ¦0          ¦new            ¦low             ¦
+---------------+-----------+---------------+----------------+ 
```

到目前为止，我必须写这个：

```
 SELECT name,status FROM projects  group by name order by priority desc,name 
```

请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:18:34.313

试试这个：[http ://www.sqlfiddle.com/#!2/b3962/1](http://www.sqlfiddle.com/#!2/b3962/1)

```
select p.name, r.total_days, p.status as latest_status, p.priority as latest_priority
from projects p
join 
(
  select name, max(date) as recent_date, datediff(max(date),min(date)) as total_days
  from projects
  group by name
) 
-- recent
r on(r.name,r.recent_date) = (p.name,date)
where p.status not in ('closed')
order by 
         (case latest_priority
          when 'high' then 0
          when 'medium' then 1
          when 'low' THEN 2 
          end), p.name 
```

输出：

```
|           NAME | TOTAL_DAYS | LATEST_STATUS | LATEST_PRIORITY |
-----------------------------------------------------------------
|     ACME, Inc. |         62 |        active |            high |
| John Doe & Co. |         81 |        active |          medium |
|       Foo Bars |         89 |        active |             low |
|      Mega Corp |          0 |           new |             low | 
```

* * *

如果您想让它更短（通过使用`USING`），请将别名`recent_date`设为`date`：[http ://www.sqlfiddle.com/#!2/b3962/2](http://www.sqlfiddle.com/#!2/b3962/2)

```
select 

  p.name, r.total_days, p.status as latest_status, p.priority as latest_priority

from projects p
join 
(

  select name, max(date) as date, datediff(max(date),min(date)) as total_days
  from projects
  group by name

) r using(name,date)

where p.status not in ('closed')
order by 
         (case latest_priority
          when 'high' then 0
          when 'medium' then 1
          when 'low' then 2 
          end), p.name 
```

* * *

# 这个怎么运作

从内到外工作。第一步，找到最新的：

```
 select name, max(date) as recent_date, datediff(max(date),min(date)) as total_days
  from projects
  group by name 
```

输出：

```
|           NAME |                         DATE | TOTAL_DAYS |
--------------------------------------------------------------
|     ACME, Inc. |   May, 21 2011 11:43:11-0700 |         62 |
|       Foo Bars |   May, 31 2011 15:43:39-0700 |         89 |
|       iCompany |   May, 31 2011 07:13:32-0700 |         69 |
| John Doe & Co. |   May, 28 2011 11:28:32-0700 |         81 |
|      Mega Corp | April, 21 2011 08:08:53-0700 |          0 | 
```

最后一步，将上述结果加入主表：

```
select 

  p.name, r.total_days, p.status as latest_status, p.priority as latest_priority

from projects p
join 
(

  select name, max(date) as date, datediff(max(date),min(date)) as total_days
  from projects
  group by name

) r using(name,date)

where p.status not in ('closed')
order by 
         (case latest_priority
          when 'high' then 0
          when 'medium' then 1
          when 'low' then 2 
          end), p.name 
```

要覆盖排序，请`CASE`在 ORDER BY 子句上使用语句。

输出：

```
|           NAME | TOTAL_DAYS | LATEST_STATUS | LATEST_PRIORITY |
-----------------------------------------------------------------
|     ACME, Inc. |         62 |        active |            high |
| John Doe & Co. |         81 |        active |          medium |
|       Foo Bars |         89 |        active |             low |
|      Mega Corp |          0 |           new |             low | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:02:01.577

```
SELECT *
FROM (
  SELECT name, 
    DATEDIFF(MAX(date), MIN(date)) total_days,
    (SELECT tt.status FROM projects tt 
     WHERE t.name = tt.name AND tt.date = MAX(t.DATE)) latest_status,
    (SELECT tt.priority FROM projects tt 
     WHERE t.name = tt.name AND tt.date = MAX(t.DATE)) latest_priority
  FROM projects t
  GROUP BY name 
  ) t
WHERE latest_status != 'closed'
ORDER BY (CASE latest_priority
          WHEN 'high' THEN 0
          WHEN 'medium' THEN 1
          WHEN 'low' THEN 2 
          END), name; 
```

*   **总天数**：取日期和日期之间的天数[`DATEDIFF`](http://www.w3schools.com/sql/func_datediff_mysql.asp)；`MAX``MIN`
*   **最新状态**：获取行日期等于`MAX`日期的状态；
*   **最新优先级**：获取行日期等于日期的优先级`MAX`；
*   **order by**：将每个优先级字符串转换为数值并按其排序。

这是一个[sqlfiddle](http://sqlfiddle.com/#!2/917c0/14)。

# vba - 是否可以使用 VBA 在 PowerPoint 2010 中的自定义布局上隐藏/显示文本框？

> ID：12039059
> 
> 赞同：0
> 
> 时间：2012-08-20T13:57:13.777
> 
> 标签：vba, powerpoint, visible, office-2010

是否可以使用 VBA 在 PowerPoint 2010 中的自定义布局上隐藏/显示文本框？我想通过单击按钮隐藏/显示每张幻灯片的自定义布局上的特定文本框，并且不确定执行此操作的最佳方法。

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:06:43.090

假设您在第一张幻灯片母版的第三个布局上有一个名为 Rectangle 6 的形状。

```
Sub Example()
Dim oSh As Shape

' Get a reference to the shape
Set oSh = ActivePresentation.Designs(1).SlideMaster.CustomLayouts(3).Shapes("Rectangle 6")

' Set its visible property to false
oSh.Visible = False

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:36:09.547

一般来说，是的，尽管设置一些形状（例如，母版上的标题占位符）不一定会使单个幻灯片上的标题文本消失。“幻灯片大师”在不同的 PPT 版本中可以有不同的含义。您的目标是哪个，您想在演示文稿中的所有母版/布局上隐藏一个形状，还是只隐藏一些？

# xcode - 詹金斯 Mac 从属错误

> ID：12039060
> 
> 赞同：1
> 
> 时间：2012-08-20T13:57:18.723
> 
> 标签：xcode, hudson, jenkins, hudson-plugins, jenkins-plugins

我有一个与 Bitbucket 连接的 Jenkins 服务器 (Linux)。

对于 iOS 项目，我需要创建与 Mac OS 从站的连接，但在从站中，我无法连接到 Bitbucket 存储库并进行克隆。

```
ERROR: Error cloning remote repo 'origin' : Could not clone 
git@bitbucket.org:nameProjectGit
hudson.plugins.git.GitException: Could not clone         git@bitbucket.org:nameProjectGit
at hudson.plugins.git.GitAPI.clone(GitAPI.java:268)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1122)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1064)
at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2196)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at hudson.remoting.Engine$1$1.run(Engine.java:60)
at java.lang.Thread.run(Thread.java:680)

Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@bitbucket.org:mauredo/snapandsell_ios.git /Users/usertest/dev/jenkins/workspace/SnapAndSell_iOS" returned status code 128:
stdout: Cloning into '/Users/usertest/dev/jenkins/workspace/ProjectName'...

stderr: ssh_askpass: exec(/usr/libexec/ssh-askpass): No such file or directory
Host key verification failed.
fatal: The remote end hung up unexpectedly
... 
```

我的项目在主编译中正确。如果我从奴隶中的终端进行推送，它会成功。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:13:44.040

看起来问题出在您的**GIT 插件**上，它缺少一个 SSH 组件 -
即**ssh-askpass**。

禁用 GIT 插件或安装缺少的 SSH 组件。

# android - Android：如何使 ListView 中只有一项可点击？

> ID：12039071
> 
> 赞同：0
> 
> 时间：2012-08-20T13:58:02.780
> 
> 标签：android

我正在开发一个简单的待办事项列表应用程序，在主视图中，我有一个任务列表，每个任务旁边都有一个复选标记，如下图所示：

![在此处输入图像描述](../Images/6520aa11e5fa366091a7a57486ce37c3.png)

单击复选标记后，我希望从列表中删除相应的任务。我尝试将其实现为 TextViews（用于任务）和 Buttons（用于复选标记），但我需要知道单击的复选标记的数量/位置（0、1、2 或 3）才能从我的大批。我能得到这个吗？

我还考虑过将任务/复选标记实现为 ListView，但是我需要仅在复选标记上设置 onItemClickListener，而不是在任务文本上。这可能吗？

还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:02:31.163

Checkbox 有一个标签属性，您可以使用它来设置自定义数据，如行号。像这样的东西应该工作，

```
checkbox.setTag(row_number); 
```

因此，当您单击它时，请执行以下操作

```
int rowNum = Integer.parseInt(checkbox.getTag());
removeTaskAt(rowNum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:30:44.693

如果您使用的是自定义适配器，则可以在 getView 上的检查中添加单击侦听器，因此单击仅在复选框上，而不是在整个项目上。

唯一的问题是，如果您尝试通过单击复选框来滚动，滚动可能不起作用。

# perl - 在 Strawberry Perl 中安装 Bio::Restriction::Analysis

> ID：12039073
> 
> 赞同：1
> 
> 时间：2012-08-20T13:58:16.837
> 
> 标签：perl, windows-7, cpan, strawberry-perl, bioperl

我正在尝试使用 CPAN 在 Strawberry Perl（v5.16.1.1 32 位）中安装模块 Bio::Restriction::Analysis。但是，看起来它不会通过一些测试。CPAN 的部分输出如下。

```
Running Build test
t/Align/AlignStats.t ......................... ok
...
t/Annotation/Annotation.t .................... ok
t/Annotation/AnnotationAdaptor.t ............. ok
t/Assembly/ContigSpectrum.t .................. skipped: The optional module Graph::Undirected (or dependencies thereof)
was not installed
t/Assembly/IO/bowtie.t ....................... skipped: The optional module Bio::Tools::Run::Samtools (or dependencies t
hereof) was not installed
t/Assembly/IO/sam.t .......................... skipped: The optional module Bio::DB::Sam (or dependencies thereof) was n
ot installed
t/Assembly/core.t ............................ 5/890
--------------------- WARNING ---------------------
MSG: Setting end to equal start[1]
---------------------------------------------------

--------------------- WARNING ---------------------
MSG: Setting end to equal start[1]
---------------------------------------------------

--------------------- WARNING ---------------------
MSG: Setting end to equal start[1]
---------------------------------------------------

--------------------- WARNING ---------------------
MSG: Setting end to equal start[1]
---------------------------------------------------

--------------------- WARNING ---------------------
MSG: Setting end to equal start[1]
---------------------------------------------------
Can't do inplace edit without backup at Bio/Root/IO.pm line 513.
# Looks like you planned 890 tests but ran 246.
# Looks like your test exited with 25 just after 246.
t/Assembly/core.t ............................ Dubious, test returned 25 (wstat 6400, 0x1900)
Failed 644/890 subtests
...
t/LocalDB/DBFasta.t .......................... 1/17 Can't open sequence index file C:\Users\me\AppData\Local\Temp\2
1EWYU~1\dbfa/directory.index:  at Bio/DB/Fasta.pm line 527.
Can't open sequence index file C:\Users\me\AppData\Local\Temp\21EWYU~1\dbfa/directory.index:  at Bio/DB/Fasta.pm li
ne 527.
t/LocalDB/DBFasta.t .......................... ok
t/LocalDB/DBQual.t ........................... ok
t/LocalDB/Flat.t ............................. ok
t/LocalDB/Index/Blast.t ...................... ok
t/LocalDB/Index/BlastTable.t ................. ok
t/LocalDB/Index/Index.t ...................... ok
t/LocalDB/Registry.t ......................... ok
t/LocalDB/SeqFeature.t ....................... 2/116 cannot remove directory for C:\Users\me\AppData\Local\Temp\Seq
FeatureLoadHelper_W0QOo5: Directory not empty at Bio/DB/SeqFeature/Store/LoadHelper.pm line 59.
cannot remove directory for C:\Users\me\AppData\Local\Temp\SeqFeatureLoadHelper_P6BE6t: Directory not empty at Bio/
DB/SeqFeature/Store/LoadHelper.pm line 59.
cannot remove directory for C:\Users\me\AppData\Local\Temp\SeqFeatureLoadHelper__f7OZq: Directory not empty at Bio/
DB/SeqFeature/Store/LoadHelper.pm line 59.
cannot unlink file for C:\Users\me\AppData\Local\Temp\edagsNq8fE\sequence.7616.fasta: Permission denied at C:/straw
berry/perl/lib/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\edagsNq8fE: Directory not empty at C:/strawberry/perl/li
b/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\kiuiljRCJy: Directory not empty at C:/strawberry/perl/li
b/File/Temp.pm line 902.
cannot unlink file for C:\Users\me\AppData\Local\Temp\4gBoAw7k7S\dbfa\7.fa: Permission denied at C:/strawberry/perl
/lib/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\4gBoAw7k7S\dbfa: Directory not empty at C:/strawberry/pe
rl/lib/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\4gBoAw7k7S: Directory not empty at C:/strawberry/perl/li
b/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\xZXsUSasIx: Directory not empty at C:/strawberry/perl/li
b/File/Temp.pm line 902.
t/LocalDB/SeqFeature.t ....................... ok
t/LocalDB/transfac_pro.t ..................... 4/115 cannot unlink file for C:\Users\me\AppData\Local\Temp\fdtykE6R
Qb\id2names: Permission denied at C:/strawberry/perl/lib/File/Temp.pm line 902.
cannot unlink file for C:\Users\me\AppData\Local\Temp\fdtykE6RQb\nodes: Permission denied at C:/strawberry/perl/lib
/File/Temp.pm line 902.
cannot remove directory for C:\Users\me\AppData\Local\Temp\fdtykE6RQb: Directory not empty at C:/strawberry/perl/li
b/File/Temp.pm line 902.
t/LocalDB/transfac_pro.t ..................... ok
t/Map/Cyto.t ................................. ok
t/Map/Linkage.t .............................. ok
t/Map/Map.t .................................. ok
t/Map/MapIO.t ................................ ok
t/Map/MicrosatelliteMarker.t ................. ok
t/Map/Physical.t ............................. ok
t/Matrix/IO/masta.t .......................... ok
t/Matrix/IO/psm.t ............................ ok
t/Matrix/InstanceSite.t ...................... ok
t/Matrix/Matrix.t ............................ ok
t/Matrix/ProtMatrix.t ........................ ok
t/Matrix/ProtPsm.t ........................... ok
t/Matrix/SiteMatrix.t ........................ ok
t/Ontology/GOterm.t .......................... skipped: The optional module Graph::Directed (or dependencies thereof) wa
s not installed
t/Ontology/GraphAdaptor.t .................... skipped: The optional module Graph (or dependencies thereof) was not inst
alled
t/Ontology/IO/go.t ........................... skipped: The optional module Graph (or dependencies thereof) was not inst
alled
t/Ontology/IO/interpro.t ..................... skipped: The optional module XML::Parser::PerlSAX (or dependencies thereo
f) was not installed
t/Ontology/IO/obo.t .......................... skipped: The optional module Graph (or dependencies thereof) was not inst
alled
t/Ontology/Ontology.t ........................ skipped: The optional module Graph (or dependencies thereof) was not inst
alled
t/Ontology/OntologyEngine.t .................. skipped: The optional module Graph::Directed (or dependencies thereof) wa
s not installed
t/Ontology/OntologyStore.t ................... skipped: The optional module Graph (or dependencies thereof) was not inst
alled
t/Ontology/Relationship.t .................... skipped: The optional module Graph::Directed (or dependencies thereof) wa
s not installed
t/Ontology/RelationshipType.t ................ skipped: The optional module Graph::Directed (or dependencies thereof) wa
s not installed
t/Ontology/Term.t ............................ skipped: The optional module Graph::Directed (or dependencies thereof) wa
s not installed
...
t/Root/RootI.t ............................... ok
t/Root/RootIO.t .............................. 1/67
#   Failed test 'executable file'
#   at t/Root/RootIO.t line 55.
Can't do inplace edit without backup at Bio/Root/IO.pm line 513.
# Looks like you planned 67 tests but ran 43.
# Looks like you failed 1 test of 43 run.
# Looks like your test exited with 25 just after 43.
Error removing C:\Users\me\AppData\Local\Temp\9eXZD151tL at C:/strawberry/perl/lib/File/Temp.pm line 890.
t/Root/RootIO.t .............................. Dubious, test returned 25 (wstat 6400, 0x1900)
Failed 25/67 subtests
...
t/SearchIO/erpin.t ........................... 1/91 defined(@array) is deprecated at Bio\Search\Hit\ModelHit.pm line 355
.
        (Maybe you should just omit the defined()?)
t/SearchIO/erpin.t ........................... ok
t/SearchIO/exonerate.t ....................... ok
t/SearchIO/fasta.t ........................... ok
t/SearchIO/gmap_f9.t ......................... ok
t/SearchIO/hmmer.t ........................... ok
t/SearchIO/hmmer_pull.t ...................... ok
t/SearchIO/infernal.t ........................ 1/412 defined(@array) is deprecated at Bio\Search\Hit\ModelHit.pm line 35
5.
        (Maybe you should just omit the defined()?)
t/SearchIO/infernal.t ........................ ok
t/SearchIO/megablast.t ....................... ok
t/SearchIO/psl.t ............................. ok
t/SearchIO/rnamotif.t ........................ 1/60 defined(@array) is deprecated at Bio\Search\Hit\ModelHit.pm line 355
.
        (Maybe you should just omit the defined()?)
t/SearchIO/rnamotif.t ........................ ok
t/SearchIO/sim4.t ............................ ok
t/SearchIO/waba.t ............................ ok
t/SearchIO/wise.t ............................ ok
...

Test Summary Report
-------------------
t/Assembly/core.t                          (Wstat: 6400 Tests: 246 Failed: 0)
  Non-zero exit status: 25
  Parse errors: Bad plan.  You planned 890 tests but ran 246.
t/Root/RootIO.t                            (Wstat: 6400 Tests: 43 Failed: 1)
  Failed test:  11
  Non-zero exit status: 25
  Parse errors: Bad plan.  You planned 67 tests but ran 43.
Files=349, Tests=17876, 330 wallclock secs ( 3.99 usr +  1.55 sys =  5.54 CPU)
Result: FAIL
Failed 2/349 test programs. 1/17876 subtests failed.
  CJFIELDS/BioPerl-1.6.901.tar.gz
  C:\strawberry\perl\bin\perl.exe ./Build test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports CJFIELDS/BioPerl-1.6.901.tar.gz
Running Build install
  make test had returned bad status, won't install without force
Stopping: 'install' failed for 'Bio::Restriction::Analysis'.
Failed during this command:
 CJFIELDS/BioPerl-1.6.901.tar.gz              : make_test NO 
```

我正在 CPAN 中执行简单的“安装 Bio::Restriction::Analysis”，并接受所有默认安装选项。我曾认为 BioPerl 与 Strawberry Perl 捆绑在一起，所以这可能是问题之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:12:56.830

您遇到的错误是 BioPerl 本身没有安装。显然这是一个已知问题：[https ://redmine.open-bio.org/issues/3143](https://redmine.open-bio.org/issues/3143)

您可能可以从“zipball”安装，因为报告中提到它已修复，此后一直没有发布。

从这里下载“zipball”（包含最新的、未发布的版本）： [https ://github.com/bioperl/bioperl-live/zipball/master](https://github.com/bioperl/bioperl-live/zipball/master)

提取，然后从命令行执行

```
perl Build.PL
dmake
dmake test
dmake install 
```

# php - PHP Android如何下载apk文件

> ID：12039077
> 
> 赞同：0
> 
> 时间：2012-08-20T13:58:25.573
> 
> 标签：php, android, download, apk, force-download

我的服务器上有 Android 应用程序，也有 php 代码，例如：

```
header('Content-Type: application/vnd.android.package-archive');
header('Content-Disposition: attachment; filename="test.apk"');
readfile('test.apk'); 
```

我的带有默认网络浏览器的手机正在以阅读屏幕上的 apk 文件的方式下载此文件。我期待某种对话，例如：将其另存为或/以及您想将其保存在哪里。我做错了什么？有没有办法自动保存它，意思是没有任何对话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:06:31.400

尝试：

```
header("Cache-Control: public");
header("Content-Description: File Transfer");
header('Content-Type: application/vnd.android.package-archive');
header("Content-Transfer-Encoding: binary");    
header('Content-Disposition: attachment; filename="test.apk"');
readfile('C4A.apk'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:29:45.307

您应该尝试其中一种：

1.  检查服务器上的 mime 类型配置。[APK 文件](http://en.wikipedia.org/wiki/APK_%28file_format%29)
2.  [将apk扩展添加到apache](https://stackoverflow.com/questions/3569313/cant-install-apk-hosted-my-own-apache-server)

另外，检查这个[问题](https://stackoverflow.com/questions/3673008/download-apk-from-own-webserver)。但是服务器是 .net，而不是 php。

# php - 为来自mysql的每个“日期”值在谷歌地图上生成新的折线

> ID：12039079
> 
> 赞同：0
> 
> 时间：2012-08-20T13:58:28.473
> 
> 标签：php, javascript, mysql, google-maps-api-3

**编辑：** 我在过去几周试图解决我的问题。因为我是一个真正的初学者，所以我在工作进度中学习代码......我将尝试澄清我的问题，希望能告诉我答案。

正如我之前问过的那样：我正在开发一个基于谷歌地图 API 3 的网络应用程序。GPS 记录器正在为 Mysql 服务器上的一个表提供这些值：id、纬度、经度、日期、时间、用户 ID。我想创建多个独特的折线。对于每个**日期组**，一条新的折线。

正如我所说，我已经取得了一些进展，但我不太确定我是否走在正确的轨道上。

现在我不确定我得到了什么，连接的几条折线使它们变成一条大折线或彼此重叠的几条折线......另一个问题是，使用这段代码我似乎无法显示第一个“日期组折线”。

我已经在原始代码和 >> **[jsfiddle](http://jsfiddle.net/dphCu/2/)** << 链接下方发布了较新的代码（尽管我没有设法让 jsfiddle 在我身边工作）。

我假设这不再是谷歌地图问题，但如果有人能帮助我解决和理解它，我将不胜感激。

这是我之前发布的代码部分：

```
var map = new google.maps.Map(document.getElementById('map'), myOptions);
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("output-xml.php", function(data) 
  {
    var points=[];
    var markerbgn=[];
    var markerend=[];
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) 
    {
      var date = markers[i].getAttribute("date");
      var time = markers[i].getAttribute("time");
      var timebgn = markers[0].getAttribute("time");
      var timeend = markers[markers.length-1].getAttribute("time");
      var type = markers[i].getAttribute("usid");

          points[i] = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));

      var html1 = "<b>" + date + "</b> <br/>" + timebgn + "</b> <br/>" + "Start Point";
      var html2 = "<b>" + date + "</b> <br/>" + timeend + "</b> <br/>" + "End Point";
      var content2 = "<b>" + "User: " + type + "</b> <br/>" + date + "</b> <br/>" + "User Route";

    var encoded_path = google.maps.geometry.encoding.encodePath(points);         
    console.log(encoded_path);

    }

    var decoded_path = google.maps.geometry.encoding.decodePath(encoded_path);

    // Polyline
    var polyOptions = {
      path: decoded_path,
      map: map,
      clickable: true,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
    }

    //line text
    var info = decoded_path;

    // Polyline
    var polyline = new google.maps.Polyline(polyOptions);
    polyline.setMap(map);
    createInfoWindow(polyline, map, infoWindow, content2); 
```

这是较新的代码：

```
var map = new google.maps.Map(document.getElementById('map'), myOptions);
var infoWindow = new google.maps.InfoWindow();

// Change this depending on the name of your PHP file
downloadUrl("output-xml.php", function(data) {
    var markerbgn=[];
    var markerend=[];
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    var routeNum = [];
    var mPoints =[]; 

    for (var i = 0; i < markers.length-1; i++) {

        var date = markers[i].getAttribute("date").split("-").join("");
        var dateAdv = markers[i+1].getAttribute("date").split("-").join("");
        var datePrv = [];
        var dateEnd = markers[markers.length-1].getAttribute("date").split("-").join("");
        var time = markers[i].getAttribute("time");
        var timebgn = markers[0].getAttribute("time");
        var timeend = markers[markers.length-1].getAttribute("time");
        var type = markers[i].getAttribute("usid");
        var routesCng=[];
        var points=[];

        if (dateAdv != date){
            if (!routesCng) routesCng=[];
            routesCng = i;
            routeNum++;

            for (var k = 0; k < markers.length; k++) {  
                points.push(new google.maps.LatLng(
                parseFloat(markers[k].getAttribute("lat")),
                parseFloat(markers[k].getAttribute("lng"))));
            }
                        setPoints();
                        setPolyline();      
        }
        //alert([datePrv,time,dateAdv]); //**********************************
        var html1 = "<b>" + date + "</b> <br/>" + timebgn + "</b> <br/>" + "Start Point";
        var html2 = "<b>" + date + "</b> <br/>" + timeend + "</b> <br/>" + "End Point";
        var content2 = "<b>" + type + "</b> <br/>" + dateAdv + "</b> <br/>" + "User Route";
    }       
    function setPoints() {
        mPoints = points.splice([routesCng]);
            //alert([date,routesCng,dateAdv,routeNum]);

    }

    function setPolyline() {
        alert([date,routesCng,dateAdv,routeNum,mPoints]);
        var encoded_path = google.maps.geometry.encoding.encodePath(mPoints);
            console.log(encoded_path);
        var decoded_path = google.maps.geometry.encoding.decodePath(encoded_path);
        var polyOptions = {
                path: decoded_path,
                map: map,
                clickable: true,
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 2
            }
        // Polyline
        var polyline = new google.maps.Polyline(polyOptions);

        //line text
        var info = decoded_path;
        polyline.setMap(map);

        createInfoWindow(polyline, map, infoWindow, content2);

        if(decoded_path.length!=0){  
            markerbgn = new google.maps.Marker({
                map: map,
                position: decoded_path[0],
                draggable: false,
                visible: true
            });
        markerend = new google.maps.Marker({
            map: map,
            position: decoded_path[decoded_path.length-1],
            draggable: false,
            visible: true
            });
        bindInfoWindow(markerbgn, map, infoWindow, html1);
        bindInfoWindow(markerend, map, infoWindow, html2);
        }
    }   
}); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:53:07.047

我不确定您为什么要在客户端执行此操作，但一种方法是为每个日期创建一个点数组：

```
if (!points[date]) points[date] = [];
points[date].push(new google.maps.LatLng(
      parseFloat(markers[i].getAttribute("lat")),
      parseFloat(markers[i].getAttribute("lng")))); 
```

然后从这些数组中的每一个创建您独特的折线。

# c# - ASP.NET MVC 3 视图引擎无法识别带有 .cshtml 的 PartialView

> ID：12039080
> 
> 赞同：1
> 
> 时间：2012-08-20T13:58:31.143
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

下图显示了文件夹中的`Partial View GetMovieTypes.cshtml`生活`Shared`

`@Html.Partial("GetMovieTypes.cshtml")`我使用EmployeeController 的索引视图中的行调用部分视图

> **问题是当我使用索引操作调用员工控制器时出现服务器错误**
> 
> 未找到部分视图“_GetMovieTypes.cshtml”或没有视图引擎支持搜索到的位置。搜索了以下位置：
> 
> ~/Areas/Staff/Views/Employee/GetMovieTypes.cshtml.cshtml

但是当我重命名它时`PartialView to GetMovieTypes.cshtml.cshtml`它工作正常

***为什么 ViewEngine 强迫我添加 .cshtml 扩展名两次***

![在此处输入图像描述](../Images/84cab12ef093e53ab2eb0a054cc5af26.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T13:59:28.487

删除`.cshtml`部分：

```
@Html.Partial("GetMovieTypes") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T13:59:49.330

你只需要打电话

```
@Html.Partial("GetMovieTypes") 
```

*点*不被绑定识别为*扩展*分隔符。`MVC`所以如果你写

*“GetMovieTypes.cshtml” 它会准确*搜索该名称**以及** `cshtml`扩展名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:00:35.867

您应该将代码调用更改为

```
@Html.Partial("_GetMovieTypes") 
```

因为那是您的视图的名称，所以我一直这样做。

无需提及扩展名，仅当您从`Controller`.

我自己的例子：

![在此处输入图像描述](../Images/c221e86fe03d2b1e869c569f9581ad77.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T14:01:23.697

您需要删除 .chtml 扩展名：

```
@Html.Partial("GetMovieTypes") 
```

您还可以像这样在“父”视图中传递您拥有的模型：

```
@Html.Partial("GetMovieTypes", MovieTypesModel) 
```

使用此方法，您的视图及其部分具有相同的模型和信息

*也许我错了，但我认为您在视图名称中也有一个下划线，所以您应该这样称呼它：

```
@Html.Partial("_GetMovieTypes", MovieTypesModel) 
```

# git - Git 生产版本

> ID：12039082
> 
> 赞同：2
> 
> 时间：2012-08-20T13:58:37.130
> 
> 标签：git, cgi-bin

我已经设置了 Git 来管理我们的代码。假设服务器“live-server”是我们的生产服务器，“project.git”作为裸存储库。每个人都推送到那个“project.git”，当所有的测试都完成后——从 project.git 移动到我们实时服务器上的 web 根目录的正确方法是什么？我看到了使用钩子的例子——有没有更好的选择？有什么标准吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:11:05.157

你不能把你的 web-root 改成 'project.git' 吗？

我找到了一些[关于](http://www.kernel.org/pub/software/scm/git/docs/howto/setup-git-server-over-http.txt)如何通过 HTTP 发布 git 存储库的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:15:20.430

# asp.net - ASP.NET 清除 HttpContext.Current.Request.Files

> ID：12039083
> 
> 赞同：1
> 
> 时间：2012-08-20T13:58:41.943
> 
> 标签：asp.net, file, upload, httpcontext

如何清除 HttpContext.Current.Request.Files 列表？

回发后，这仍然包含文件。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (this.IsPostBack)
            this.SaveImages();
}

private Boolean SaveImages()
    {
        //loop through the files uploaded
        HttpFileCollection _files = HttpContext.Current.Request.Files;
        //Message to the user
        StringBuilder _message = new StringBuilder("Files Uploaded:<br>");
        try
        {
            for (Int32 _iFile = 0; _iFile < _files.Count; _iFile++)
            {
                if (!string.IsNullOrEmpty(_files[_iFile].FileName))
                {
                    // Check to make sure the uploaded file is a jpg or gif
                    HttpPostedFile _postedFile = _files[_iFile];
                    string _fileName = Path.GetFileName(_postedFile.FileName);
                    string _fileExtension = Path.GetExtension(_fileName);

                    //Save File to the proper directory
                    _postedFile.SaveAs(HttpContext.Current.Request.MapPath("files/") + _fileName);
                    _message.Append(_fileName + "<BR>");
                }
            }
            lblFiles.Text = _message.ToString();
            return true;
        }
        catch (Exception Ex)
        {
            lblFiles.Text = Ex.Message;
            //Refill images in control????
            return false;
        }
        finally
        {
            //Clear HttpContext.Current.Request.Files!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        }
    } 
```

# oracle - TNS：名称查找失败

> ID：12039088
> 
> 赞同：0
> 
> 时间：2012-08-20T13:58:53.810
> 
> 标签：oracle, odbc

我有一个连接到 oracle 数据库的独立工作站在工作。它多年来一直运行良好，然后突然出现错误：

**[INTERSOLV][ODBC Oracle 驱动程序][Oracle]ORA-12545：TNS：名称查找失败**

当我从命令提示符 ping 尝试连接的服务器时，它会回复正确的 IP 地址。如果我做一个 TNSPING，那似乎也可以。

我在计算机网络上有一台单独的 PC，它可以很好地连接到服务器 - 它没有上面粗体显示的错误。

我在那台独立 PC 上连接到另一个不同的 oracle 数据库，它仍然可以正常工作。所以，这并不是说我失去了连接到任何或所有 Oracle 数据库的能力——只是关于这个。

我很困惑为什么它不起作用并且没有任何运气试图修复它。我不确定如何进行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:06:10.127

尝试定义环境变量 TNS_ADMIN 以指向 TNSNAMES.ORA 文件所在的位置。

编辑：

可以直接连接 SQL*Plus 吗？

如果已安装，这应该可以工作（将 user 和 db 替换为要连接的用户 ID 和数据库）：

```
sqlplus user@db 
```

如果做不到这一点，请尝试使用[EZCONNECT](http://www.orafaq.com/wiki/EZCONNECT)连接：

修改 sqlnet.ora 文件：

```
NAMES.DIRECTORY_PATH=(TNSNAMES,EZCONNECT) 
```

在 Oracle ODBC 驱动程序配置向导中更改您的 ODBC 连接以使用 EZCONNECT 字符串：

将 TNS 服务名称替换为：

```
<db_host>:port/<db_name> 
```

例如，

```
MYHOST:1521/MYDB 
```

这指向主机 MYHOST 上端口 1521（默认端口）上的数据库 MYDB。

尝试测试连接。如果失败，请尝试使用 IP 地址而不是主机名。

鉴于您的评论中的 TNSNAMES 条目：

```
ESTRNP = (DESCRIPTION = 
           (ADDRESS_LIST = 
             (ADDRESS = (PROTOCOL = TCP)(HOST = ESTRNP)(PORT = 1521)) 
           ) 
         (CONNECT_DATA = (SID = ESTRNP)) 
        ) 
```

您可以尝试将 CONNECT_DATA 行更改为：

```
(CONNECT_DATA = (SERVICE = ESTRNP)) 
```

数据库的SID*可能*已更改。这个条目是否与工作机器上的条目相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:42:39.220

您最近是否安装了任何其他 oracle 软件？

您可能`tnsnames.ora`在不同位置有多个文件，而 odbc 驱动程序找到了错误的文件。

检查你的路径环境变量，正确的路径是否在第一位。

# android - 区分联系人的电子邮件地址

> ID：12039090
> 
> 赞同：0
> 
> 时间：2012-08-20T13:58:54.073
> 
> 标签：android, email, contactscontract, android-contentresolver

我有同一个联系人的 3 封电子邮件。我需要将此电子邮件更新到 Android 的电话簿。问题是当我尝试这样做时，这 3 封电子邮件的更新方式相同。3 封电子邮件的停留时间相等。存在任何区分电子邮件的方法吗？

这是我的代码

```
if(numEmails>1){
     int auxNumEmails=1;
     String tagEtEmail = "ete";
     String tagBtnLabelEmail = "btnLabelMail";
     //Determinar o número de email do content
     do{
         EditText etEmail = (EditText)contentEmail.findViewWithTag(tagEtEmail);
         Button etBtnLabelEmail = (Button)contentEmail.findViewWithTag(tagBtnLabelEmail);
         String stEtEmail = etEmail.getText().toString();
         String stBtnLabelEmail = etBtnLabelEmail.getText().toString();
         values.clear();

         String mailWhere = ContactsContract.Data.CONTACT_ID + "=? AND " + ContactsContract.Data.MIMETYPE + "=?" + ContactsContract.CommonDataKinds.Email.DATA+"=?"; 
         String[] mailWhereParams = new String[]{String.valueOf(idContacto),ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE, "2"}; 
         values.put(ContactsContract.CommonDataKinds.Email.DATA,stEtEmail);

         if(stBtnLabelEmail == "Residência"){
         values.put(ContactsContract.CommonDataKinds.Email.TYPE,ContactsContract.CommonDataKinds.Email.TYPE_HOME);
         values.put(ContactsContract.CommonDataKinds.Email.LABEL,stBtnLabelEmail);
         }
         else
             if(stBtnLabelEmail == "Emprego"){
                 values.put(ContactsContract.CommonDataKinds.Email.TYPE,ContactsContract.CommonDataKinds.Email.TYPE_WORK);
                 values.put(ContactsContract.CommonDataKinds.Email.LABEL,stBtnLabelEmail);
             }
         **cr.update(ContactsContract.Data.CONTENT_URI, values, mailWhere, mailWhereParams);**

     tagEtEmail = "ete"+auxNumEmails;
     tagBtnLabelEmail = "btnLabelMail" + auxNumEmails;
     auxNumEmails++;

     }while(auxNumEmails<=numEmails); 
```

我需要一种区分电子邮件的方法。ID？但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:55:15.293

我用来区分同一联系人的不同电子邮件的解决方案是使用标签属性。每封电子邮件都有一个不同的标签，可以区分每一封。

# c# - 从 Output TaskParameter 中获取程序集项目文件名

> ID：12039093
> 
> 赞同：8
> 
> 时间：2012-08-20T13:59:17.803
> 
> 标签：c#, .net, msbuild

我正在使用`msbuild.exe`从命令行自动化我的构建。

我执行以下步骤。

*   将项目编译到项目目录之外的每个文件夹中
*   压缩每个编译的项目

这是我的目标

第一个编译

```
<Target Name="BuildProjects"  DependsOnTargets="BeforeBuild">

    <ItemGroup>      
  <BuildProjectFiles Include="**\MyCompany.Project1\MyCompany.Project1.csproj" />
  <BuildProjectFiles Include="**\MyCompany.Project2\MyCompany.Project2.csproj" />
  <BuildProjectFiles Include="**\MyCompany.Project2\MyCompany.Project2-CE.csproj" />
      ... and some more
    </ItemGroup>

    <MSBuild Projects="@(BuildProjectFiles)" Properties="AllowUnsafeBlocks=true;Configuration=$(Configuration);OutputPath=$(MSBuildProjectDirectory)\Deploy\bin\%(BuildProjectFiles.FileName)">
        <Output TaskParameter="TargetOutputs"
                ItemName="BuildProjectsOutputFiles" />
    </MSBuild>

</Target> 
```

现在的目标是将每个已编译的项目压缩到其一个文件中。

```
<Target Name="ZipProjects" DependsOnTargets="BuildProjects">

    <CreateItem
        Include="@(BuildProjectOutputFiles)"
            AdditionalMetadata="AssemblyName=%(Filename);ProjectName=%(RelativeDir)">
        <Output TaskParameter="Include" ItemName="BuildProjectsOutputFiles123"/>
    </CreateItem>

    <CreateItem Include="%(BuildProjectsOutputFiles123.RelativeDir)*" AdditionalMetadata="OutputFileName=$(MSBuildProjectDirectory)\Deploy\dist\$(Configuration)\%(BuildProjectsOutputFiles123.AssemblyName)-$(MajorNumber).$(MinorNumber).$(ReleaseNumber).zip;WorkingDirectory=%(BuildProjectsOutputFiles123.RelativeDir)">
        <Output TaskParameter="Include" ItemName="BuildProjectsOutputFiles456"/>
    </CreateItem>

    <Zip Files="@(BuildProjectsOutputFiles456)"
        WorkingDirectory="%(BuildProjectsOutputFiles456.WorkingDirectory)" 
        ZipFileName="%(BuildProjectOutputFiles456.OutputFileName)"  />
        <!-- ZipLevel="9"/> -->

</Target> 
```

所以发生的事情是我指定的每个项目`BuildProjectFiles`都被编译到文件夹中`<rootdir>\deploy\bin\<name of the csproj file without extension\`

在第二步中，我使用`MSBuild.Community.Tasks`Zip-Task 压缩每个项目并将其复制到`<rootdir>\deploy\dist\release\<assemblyname>-<version>.zip`

所以基本上程序集`project1.exe`及其依赖`project1-2.4.7.zip`项在执行 msbuild 后都在文件中。

这很好用。但现在我有一个改变，我不知道如何解决。我有两个具有相同程序集名称的程序集（一个用于 Windows，另一个用于 Windows CE），因此第一个项目编译并创建一个文件夹`project2-2.4.7.zip`，然后下一个项目编译并覆盖 zip 文件。

现在我希望 Zip-File 以文件命名`.csproj`（如 bin 文件夹）。由于我的一个项目文件被调用`mycompany.project2.csproj`，而另一个`mycompany.project2-ce.csproj`我应该没问题。

简而言之：如何将项目名称传递给 zip 目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:25:31.867

这合适吗？$(MSBuildProjectName)

[MSBuild 保留属性](http://msdn.microsoft.com/en-us/library/ms164309.aspx)

# php - 用于问题的 PHP 复选框

> ID：12039097
> 
> 赞同：0
> 
> 时间：2012-08-20T13:59:31.420
> 
> 标签：php, database

我无法理解我正在处理的调查风格脚本背后的逻辑。

我已经写了第一部分，我从数据库中提取问题和答案，但我不知道如何在 while 循环中为每个问题创建多项选择，然后存储用户选择的值。我的大脑在试图弄清楚:(

我的代码的第一部分是直截了当的，我认为：

```
<?php
//retreive questions from database and put into question box

$query = "SELECT `Question`, `Answer` FROM `questions`";

$question = mysql_query($query);

while($row = mysql_fetch_assoc($question)){
?>
<div id="ContainerQuestion">
    <span style="Question">Question <?php echo $row['Question']; ?></span>
// Have A,B,C,D outputted as values in a checkbox and then the text after????
</div>
<?php
}

?> 
```

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:02:35.113

你是这个意思吗？

```
while($row = mysql_fetch_assoc($question)){
?>
<div name="ContainerQuestion">
    <span style="Question">Question <?php echo $row['Question']; ?></span><br />
    <input type="checkbox" name="question_<?= $row['Question_ID']; ?>[]" value="A" <?= $row['Answer'] == 'A' ? 'checked="checked"' : '' ?> /> A<br />
    <input type="checkbox" name="question_<?= $row['Question_ID']; ?>[]" value="B" <?= $row['Answer'] == 'B' ? 'checked="checked"' : '' ?>/> B<br />
    <input type="checkbox" name="question_<?= $row['Question_ID']; ?>[]" value="C" <?= $row['Answer'] == 'C' ? 'checked="checked"' : '' ?>/> C<br />
    <input type="checkbox" name="question_<?= $row['Question_ID']; ?>[]" value="D" <?= $row['Answer'] == 'D' ? 'checked="checked"' : '' ?>/> D<br />
// Have A,B,C,D outputted as values in a checkbox and then the text after????
</div>
<?php
} 
```

**注意：**您不应该`<div>`在循环中提供静态（读取：非唯一）ID - HTML 规则规定 ID 必须是唯一的。

此外，如果用户可能只选择一个选项，您可能希望使用单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:03:59.950

```
$opts = array(
  'a' => 'foo',
  'b' => 'bar',
  'c' => 'baz',
  'd' => 'all of the above'
);

foreach($opts as $key => $val) {
    echo <<<EOL
<input type="checkbox" name="something" value="{$key}" /> {$val}<br />

EOL:
} 
```

# android - Android 在呼出期间检测线路何时连接

> ID：12039098
> 
> 赞同：2
> 
> 时间：2012-08-20T13:59:36.427
> 
> 标签：android

只是一个快速的背景我正在一个有根的 Nexus 上运行 CM7。我正在尝试检测何时实际连接了拨出电话：已停止响铃并且您呼叫的人已接听。纵观论坛，这似乎是一个棘手的问题，也许没有答案。我真的很感激对此的任何见解。

在我的搜索中，我能找到的最好的是： [Android：如何获得拨出电话已被接听的状态？](https://stackoverflow.com/questions/9392804/android-how-to-get-a-state-that-the-outgoing-call-has-been-answered) @PattabiRaman 说：“而不是检测呼出连接状态，很容易得到最后一次拨打电话的持续时间。” 他的意思是应该在通话进行时获得最后一次拨打电话的持续时间吗？当持续时间超过 0 时，你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:35:36.137

该类`com.android.internal.telephony.CallManager`应该有关于何时实际应答呼叫的信息。它有一个`getInstance()`返回 CallManager 实例的公共静态方法，以及一个`getActiveFgCallState()`将当前调用状态作为`Call.State`枚举返回的公共方法。
所以理论上这样的事情可能会起作用：

```
Method getFgState = null;
Object cm = null;

try {
  Class cmDesc = Class.forName("com.android.internal.telephony.CallManager");
  Method getCM = cmDesc.getMethod("getInstance");
  getFgState = cmDesc.getMethod("getActiveFgCallState");
  cm = getCM.invoke(null);
} catch (Exception e) {
  e.printStackTrace();
} 
```

然后反复轮询状态：

```
Object state = getFgState.invoke(cm);
if (state.toString().equals("IDLE")) {
  ...
} else if (state.toString().equals("ACTIVE")) {
  // If the previous state wasn't "ACTIVE" then the
  // call has been established.
} 
```

我还没有验证这是否真的有效。即使是这样，您也必须记住 API 可能会发生变化，因为这不是应用程序开发人员应该依赖的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T15:43:47.437

我已经查看了代码。除非您实例化一个电话对象并将其设置为默认电话，否则它将始终为 null。但是实例化它需要一些系统权限，只允许系统应用程序。

通过使用此方法： com.android.internal.telephony.PhoneFactory# public static void makeDefaultPhones(Context context) {

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/com/android/internal/telephony/PhoneFactory.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/com/android/internal/telephony/PhoneFactory.java)

# c# - NHibernate 匹配属性作为子字符串

> ID：12039099
> 
> 赞同：0
> 
> 时间：2012-08-20T13:59:48.737
> 
> 标签：c#, nhibernate, substring

我正在尝试找到匹配的“最佳”方式，例如，RSS 文章中的政客姓名。这些名称将存储在使用 NHibernate 访问的数据库中。举个例子：

```
标识名称
--- ---------------
1 大卫卡梅隆
2 乔治·奥斯本
3 阿利斯泰尔亲爱的

```

在撰写本文时，BBC 政治新闻 RSS 提要有一个项目的描述

> 后座保守党议员向总理乔治奥斯本施加压力，要求其阻止英格兰的铁路公司将通勤票价提高 11%。

对于这篇文章，我想检测到提到了 George Osborne。我意识到有几种方法可以做到这一点，例如首先选择所有政治家的名字，然后在代码中比较它们，或者执行 NHibernate 等效的 LIKE。

应用程序本身将有几十个提要，最多每 15 分钟查询一次。显然存在速度、内存和扩展问题，所以我想寻求推荐的方法（如果相关，还有 NHibernate 查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:51:22.790

正如我们在评论中讨论的那样，我相信有一个更简单的方法来解决这个问题：

1.  把政客的名单记在心里。因为这些实体不会经常更新，所以这样工作是安全的。只需实现一个过期逻辑，迟早会从数据库中刷新它。
2.  对于每个下载的提要条目，只需`foreach Name in Politicians FeedEntry.Content.Contains(Name)`在将条目保存到数据库之前运行（或类似的东西）。

就这样，您的解决方案不需要复杂的查询和更少的 I/O。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:17:34.730

按照以下思路，我将使用正则表达式或包含来获取与提要匹配的政客。政客姓名和身份证可以是内存中的一个简单集合。

然后可以使用 guid 将提要保存在 memcached 或 redis 中（即使是 db 也可以）。然后将关联的 guid 保存在包含政治家 ID、feed_guid 的表中。

对于某些统计信息，您还可以有一个表，它是政治家 ID、num_articles_提到的聚合表，其中 num_articles_提到的递增 1。

如果需要，您可以将上述内容包装在事务中。

# jquery - jquery在数组中查找图像

> ID：12039104
> 
> 赞同：1
> 
> 时间：2012-08-20T14:00:09.890
> 
> 标签：jquery, arrays, indexing, find

嗨，我有一系列图像

```
["img/wedgallery/1.jpg", "img/wedgallery/2.jpg", "img/wedgallery/3.jpg", "img/wedgallery/4.jpg", "img/wedgallery/5.jpg", "img/wedgallery/6.jpg"] 
```

单击图像时，这将存储为变量“allpics”我想检查它在此数组中的索引。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:04:53.817

```
var allpics = ["img/wedgallery/1.jpg", "img/wedgallery/2.jpg", "img/wedgallery/3.jpg", "img/wedgallery/4.jpg", "img/wedgallery/5.jpg", "img/wedgallery/6.jpg"];

$('img').click(function(){
    var src = $(this).attr('src');
    var index = $.inArray(src, allpics);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:03:39.813

您不需要 jQuery，但可以使用 vanilla JavaScript 来完成。使用`indexOf()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)）：

```
var index = allpics.indexOf( yourPic ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:08:40.310

如果你确实想使用 jQuery，我想你会想使用`jQuery.inArray`. 或者，您可以使用 grep。它将在数组中找到满足条件的元素。索引作为回调中的参数传递。

[http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

```
jQuery.grep( array, function(elementOfArray, indexInArray) [, invert] ) 
```

所以

```
var img = //clicked elements src attrib

// s is the element selected from the array
var s = $.grep(allImages, function(elem, i) {
    if (img == elem.attr('src'))
    {
        //i is the index in allImages
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:07:01.993

## *[jsBin 演示](http://jsbin.com/ekoceg/3/edit)*

你可以使用`jQuery.inArray()` ^([帮助](http://api.jquery.com/jQuery.inArray/))

```
var images = ["img/wedgallery/1.jpg", "img/wedgallery/2.jpg", "img/wedgallery/3.jpg", "img/wedgallery/4.jpg", "img/wedgallery/5.jpg", "img/wedgallery/6.jpg"];

$('img').click(function(){
  var src = $(this).attr('src');
  var myArrIndexIs = $.inArray(src, images);
  alert(myArrIndexIs);
}); 
```

# c++ - 使用 kinect (libfreenect) 加速度计数据

> ID：12039105
> 
> 赞同：4
> 
> 时间：2012-08-20T14:00:10.437
> 
> 标签：c++, accelerometer, kinect, openframeworks, ofxkinect

我正在通过[openFrameworks](http://openframeworks.cc/)和[ofxKinect](https://github.com/ofTheo/ofxKinect)访问 c++ 中的 Kinect 加速度计，并且在某些角度存在一些问题。如果我将 kinect 向下倾斜 90 度，我会得到`nan`值。我查看了[getAccelPitch()](https://github.com/ofTheo/ofxKinect/blob/master/src/ofxKinect.cpp#L335)方法，这种方法很有意义，因为`asin`当值大于 9.80665 除以 10.1/9.80665 时将返回 0。

主要问题是在我将设备倾斜 90 度后，滚动似乎并不可靠（似乎变化不大）。在我的设置中，我需要将设备倾斜 90 度，但也要知道它是新滚动的。

任何提示，关于我如何做到这一点的提示？有没有一种简单的方法来获取数据以用 3 条线（轴）绘制 kinect 的方向。

我正在尝试检测这样的方向： ![k1](../Images/6c00aae1741bcb6c22df206cfc2e54ba.png)

![k2](../Images/68aaa2c7e9ee65633ffedb0d0264ed4f.png)

![k3](../Images/be8efa96998fc731b085468f8c6bba4a.png)

![k4](../Images/782784c82da6f24e4eada5cfc83b2ac1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:05:02.350

**问题是您使用的是欧拉角**（滚动、俯仰和偏航）。

欧拉角是邪恶的，它们会破坏应用程序的稳定性，例如

*   [android方向传感器的奇怪行为](https://stackoverflow.com/q/5577334/341970)，

*   [减少 wiimote 俯仰/滚动变化](https://stackoverflow.com/q/5010978/341970)。

它们[也不适用于插值](https://stackoverflow.com/questions/5580283/interpolating-between-rotation-matrices/5580491#5580491)。

**一种解决方案是改用旋转矩阵。**旋转矩阵的教程在

[方向余弦矩阵 IMU：理论](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)

手稿。

# android - 视频不播放

> ID：12039113
> 
> 赞同：0
> 
> 时间：2012-08-20T14:00:27.520
> 
> 标签：android, android-videoview

我正在使用 VideoView 尝试播放视频。但是当我使用此代码时，出现以下错误：

> 抱歉，这部影片无法播放

这里有什么问题？

```
 VideoView vv = (VideoView) findViewById(R.id.videoView);   
 String path = "/mnt/sdcard/Video/1345467237098.m4v"
 vv.setVideoPath(path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:06:32.370

不支持此格式，请查看此网址[https://developer.android.com/guide/topics/media/media-formats.html](https://developer.android.com/guide/topics/media/media-formats.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:11:35.457

Android 不支持视频所采用的格式。我建议您将视频转换为 .mp4（受支持）。

我希望这有帮助。

# javascript - 如何在 gruntjs 中使用 watch 将多个任务分配给多个文件

> ID：12039118
> 
> 赞同：2
> 
> 时间：2012-08-20T14:00:40.593
> 
> 标签：javascript, node.js, rake, less, gruntjs

我正在尝试这样做（伪代码）：

```
watch

files: fileset1 (for example: *.less), fileset2 (for example: *.mustache)
tasks: 'less','rake' 
```

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T20:16:46.427

取自[Grunt jQuery 示例](https://github.com/cowboy/grunt-jquery-example/blob/master/grunt.js)：

```
watch: {
   files: ['*.less', '*.mustache'],
   tasks: 'less rake'
} 
```

# java - Java 邮件搜索：RECENT 标志在 GMail 上不起作用

> ID：12039120
> 
> 赞同：0
> 
> 时间：2012-08-20T14:00:47.973
> 
> 标签：java, email, gmail, jakarta-mail

```
 Store imapsStore = getStore(imapHost, imapPort, userName, userPass, getProperties(),debugMail);
        Folder givenFolder = imapsStore.getFolder(sourceFolder);
        givenFolder.open(Folder.READ_ONLY);

        /* Get the messages which is unread in the Inbox */
        Message messages[] = givenFolder.search(new FlagTerm(new Flags(Flags.Flag.RECENT), true));

        /* Use a suitable FetchProfile */
        FetchProfile fp = new FetchProfile();
//      fp.add(FetchProfile.Item.ENVELOPE);
//      fp.add(FetchProfile.Item.FLAGS);
        givenFolder.fetch(messages, fp); 
```

这不会从 GMail 返回新邮件。? 如何让它工作？它甚至工作吗？我知道还有用于将消息标记为已读/未读的 SEEN 标志，我正在寻找真正最近的消息而不是未读消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:28:39.607

[Gmail 不支持 \Recent。](http://support.google.com/mail/bin/answer.py?hl=en&answer=78761&topic=1668982&ctx=topic)

# git - 恢复到以前的提交并忽略 git 中任何未提交的更改

> ID：12039122
> 
> 赞同：3
> 
> 时间：2012-08-20T14:01:02.467
> 
> 标签：git, commit, revert

我是 git 的初学者，在尝试将所有内容恢复到我最后一次提交时遇到了一些问题。我不介意丢失任何我只想撤消所有内容的更改。我试过这个：

```
git revert b78da61000bc049133f4a5f7df6ddb3b6407454f 
```

但我越来越

```
error: Your local changes to the following files would be overwritten by merge. 
Please, commit your changes or stash them before you can merge.
Aborting 
```

我不想提交这些新更改，因为显然它们不起作用，我只想摆脱它们。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:03:16.497

git revert 意味着创建一个新的提交，它“撤消”在指定提交中所做的更改。

你要：

```
git reset --hard <commit> 
```

（这会从工作目录中删除任何未提交的更改，并将当前分支设置为指定的提交）

请注意，重置会修改历史记录。因此，如果您已经推送了这些提交，则不建议通过重置它们来删除它们，因为当您（强制）推送新历史时，其他人必须将他们的更改重新定位到新历史。

参见[man git-reset](http://git-scm.com/docs/git-reset)和[Reset Demystified](http://git-scm.com/2011/07/11/reset.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:07:50.600

## git reset --hard HEAD

如果您只想删除工作副本中的所有更改，您可以这样做：

```
git reset --hard HEAD 
```

HEAD 是您当前分支中的最后一次提交（假设您在一个分支中）

## git revert 不是你想要的

git revert 不会执行您尝试执行的操作，它用于撤消提交（提交与现有提交完全相反的内容，因此最终效果是删除它，同时保留历史记录）。

# c++ - 错误 C2259：“CDocument”：无法实例化抽象类

> ID：12039123
> 
> 赞同：0
> 
> 时间：2012-08-20T14:01:07.910
> 
> 标签：c++, visual-studio, visual-c++, compiler-errors, visual-studio-2005

我收到以下错误：

> 错误 C2259：“CDocument”：无法实例化抽象类

对于以下代码：

```
BOOL CVisuComm::OnOpenDoc()
{   
    CDocument myCDoc;  //LINE AT WHICH THE ERROR OCCURS
    CInterfaceDoc myCInterfaceDoc;

    char tabchar[80]="c:/test111.dat";
    CString myFilename;
    myFilename="c:/test111.dat";

    /*if(!myCDoc.OnOpenDocument(tabchar))
    {
        MessageBox("Erreur à l'ouverture..","OnOpenDocument",MB_OK);
        return false;
    }
    else 
    {
        MessageBox("Ouverture OK..","OnOpenDocument",MB_OK);
    }*/

    myCInterfaceDoc.OnOpenDocument("c:/test111.dat");
    return true;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:12:01.023

> 错误 C2259：“CDocument”：无法实例化抽象类

编译器准确地告诉你你需要知道什么。你不应该创建一个具体的实例`CDocument`——事实上你不能，正如你刚刚看到的那样。相反，[引用 MSDN](http://msdn.microsoft.com/en-us/library/y59b487w%28v=vs.80%29.aspx)：

> 要在典型应用程序中实现文档，您必须执行以下操作：
> 
> *   为每种类型的文档从 CDocument 派生一个类。

你可能会问为什么。答案实际上也在 MSDN 上，尽管是以迂回的方式：

> 重写文档类中的 CObject::Serialize 成员函数，以在磁盘中写入和读取文档的数据。

当调用周围应用程序代码的保存方法时，它们可以针对`CDocument*`接口而不是具体类来编写。这使他们可以对每种类型的文档执行完全相同的操作——即调用`serialize`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:11:31.347

要从 WinApp 派生类访问文档对象，您需要这样做：

((CFrameWnd*)AfxGetMainWnd())->GetActiveDocument();

您无需每次都创建文档的新实例。在任何情况下，您都不能自己创建摘要文档。

# django - 如何在交互式 shell 中导入模板标签？

> ID：12039128
> 
> 赞同：3
> 
> 时间：2012-08-20T14:01:28.663
> 
> 标签：django, django-templates, django-shell

如何在交互式 shell 中导入自定义模板标签或过滤器以查看一切是否正常？

我有两台机器的行为不同，我不知道如何进行一些调试。

在生产机器上我无法加载模板过滤器，我收到错误“找不到模板库”。在本地机器上一切正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:10:22.773

像这样导入过滤器：

```
from django.template import defaultfilters as filters
filters.date( date.today() ) 
```

相反，您应该导入自定义过滤器的默认过滤器：

```
from myApp.templatetags import poll_extras
poll_extras.cut( 'ello' ) 
```

仔细检查生产服务器中安装的应用程序的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:10:56.047

如果您担心拼写错误、遗漏`__init__.py`问题或被屏蔽`ImportError`的 s，您可以只导入该函数。假设以下结构：

```
foo
├── bar
│   ├── __init__.py
│   ├── models.py
│   ├── static
│   │   └── ..
│   ├── templates
│   │   └── ..
│   ├── templatetags
│   │   ├── __init__.py
│   │   └── baz.py
│   ├── views.py
├── manage.py
└── foo
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py 
```

以及以下内容`baz.py`：

```
from django import template

register = template.Library()

@register.filter
def capitalize(value):
    return value.capitalize() 
```

你会跑

```
>>> from bar.templatetags import baz
>>> print baz.capitalize('test')
'test' 
```

# javascript - 在文本输入字段上模拟退格键

> ID：12039135
> 
> 赞同：4
> 
> 时间：2012-08-20T14:01:54.243
> 
> 标签：javascript, html

有人可以提供一个很好的例子来模拟文本字段上的**退格键吗？**`<INPUT>`

我需要这个在 HTML5 中完成的虚拟键盘，它只需要在**Webkit**浏览器中工作。

**笔记：**

*   `createEvent`// `initTextEvent`charcode `dispatchEvent`8（退格）被忽略（这似乎只适用于可打印字符）
*   手动更改**`value`**using`substr()`类型的作品，但这样插入符号移动到输入字段的末尾（我希望能够删除输入字段中间的字符，就像使用普通键盘时一样）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:47:36.177

好吧，你去：http: [//jsfiddle.net/dan_barzilay/WWAh7/2/](http://jsfiddle.net/dan_barzilay/WWAh7/2/)

get caret 函数用于知道在哪里删除字符，如果您需要更多解释性注释。重置光标功能用于在退格后恢复插入符号的位置。

**它正在使用 jquery，但您可以在几秒钟内将其更改为普通 js

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-14T12:57:03.113

编辑：以下内容太复杂而无法使用。根据 [https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand)，调用`document.execCommand("delete");`.

这是我使用的解决方案`setSelectionRange`，它在 Chrome 上运行良好： [https ://github.com/gdh1995/vimium-plus/blob/master/lib/dom_utils.js#L169](https://github.com/gdh1995/vimium-plus/blob/master/lib/dom_utils.js#L169)

```
simulateBackspace: function(element) {
    var start = element.selectionStart, end = element.selectionEnd, event;

    if (!element.setRangeText) { return; }
    if (start >= end) {
      if (start <= 0 || !element.setSelectionRange) { return; }
      element.setSelectionRange(start - 1, start);
    }

    element.setRangeText("");
    event = document.createEvent("HTMLEvents");
    event.initEvent("input", true, false);
    element.dispatchEvent(event);
} 
```

好吧，唯一的不足是我们无法撤消它所做的更改。

添加：我找到了一种启用撤消和重做的方法：在[Javascript textarea undo redo](https://stackoverflow.com/questions/7553430/javascript-textarea-undo-redo)中，这两个 anwsers 在 Chrome 上运行良好

# sql - 如何使用韩文 Windows XP 在 sqlite3.exe 中输入反斜杠

> ID：12039138
> 
> 赞同：1
> 
> 时间：2012-08-20T14:02:00.290
> 
> 标签：sql, windows, sqlite, cmd

我正在尝试在装有韩文版 Windows XP 的计算机上使用 sqlite3.exe。此版本的 Windows 使用赢得字符 (₩) 代替路径中的反斜杠字符（例如，而不是 c:\ 它是 c:₩ ）。似乎可以在 Word 等文本编辑器中输入反斜杠，但不能在命令行中输入。事实上，即使我复制了一个反斜杠字符，当我粘贴它时，它也会转换为赢取的字符。

由于 SQL 使用反斜杠来指定引号，我无法输入它们。我最终输入了 '₩"' 而不是 '\"' ，这会产生错误。

有谁知道如何在这个版本的 Windows 上强制在命令行中输入真正的反斜杠？

韩国有很多软件，所以希望其他人也遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:47:04.427

打开控制台窗口的属性并在“字体”选项卡中选择 TrueType 字体（不确定韩文，但它们通常标有“TT”图标）。

# visual-c++ - 无法在 Win 7 中禁用/启用计划任务

> ID：12039144
> 
> 赞同：0
> 
> 时间：2012-08-20T14:02:29.017
> 
> 标签：visual-c++, windows-7, scheduled-tasks

我在我的应用程序中使用任务调度程序 1.0 界面。

在我的应用程序中，通过设置标志 IScheduledWorkItem::SetFlags(TASK_FLAG_DISABLED) 在计划时间创建任务并在成功创建后禁用/启用任务

在 Win 7 中，正在创建任务，但无法禁用/启用计划任务。

相同的应用程序在 Win2003 和 Win-XP 中运行良好。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:26:08.667

我自己也碰过这堵墙。请参阅[此线程](http://social.msdn.microsoft.com/Forums/pt-PT/windowscompatibility/thread/e4ae41b6-4840-40ff-a18a-7edad1e72ef3)以获取一些答案。具体来说，似乎`VISTA: "...The Task Scheduler 2.0 API should be used in developing applications that use the Task Scheduler service on Windows Vista.."`

唯一正确的方法是使用 Task 2 API。

# javascript - 从匿名函数调用时，mouseover 函数失去作用域

> ID：12039146
> 
> 赞同：1
> 
> 时间：2012-08-20T14:02:33.573
> 
> 标签：javascript, jquery, jquery-plugins, tooltip

我正在研究 jQuery ToolTip 插件（以下简称 Tooltip）的代码，并注意到我不完全理解的行为。

Tooltip 绑定一个 mouseover 函数，如下所示：

```
.mouseover(save) 
```

以这种方式调用时，`this`变量是`HtmlDivElement`.

我尝试将其更改`mouseover`为：

```
.mouseover(function(e){save(event)}) 
```

因为我正在寻找 MouseEvent。但是，现在`this`变量是`Window`.

我找到了一种方法来解决这个问题并`HtmlDivElement`通过使用这行代码来获得：

```
.mouseover(function(e){save(this, event)}) 
```

并`this`用作`this`函数内部的替代品。

我的问题是-为什么`save`在鼠标悬停绑定内的匿名函数内调用该函数时会失去其范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:04:33.210

的值`this`是在每个函数调用时建立的。当您的匿名函数调用该“保存”函数时，它没有做任何事情来确定`this`应该是什么，所以它是默认值：全局对象（“窗口”）。

你可以这样做：

```
.mouseover(function(e){ save.call(this, e); }) 
```

承担`this`您需要的价值。处理程序中的`this`值将由框架安排，因此通过使用`.call()`您将其传递给“保存”函数。

再说一遍：在 JavaScript 中，`this`不是由代码的静态结构决定的。相反，它取决于每个单独的函数调用的情况。这意味着对于任何函数，无论它是如何声明的，`this`在任何给定的函数调用中， 的值都可能完全出乎意料。

# ruby-on-rails - 在测试中设置 current_user

> ID：12039148
> 
> 赞同：1
> 
> 时间：2012-08-20T14:02:51.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个看起来像这样的测试：

```
test "should get create" do
   current_user = FactoryGirl.build(:user, email: 'not_saved_email@example.com')
   assert_difference('Inquiry.count') do
     post :create, FactoryGirl.build(:inquiry)
    end
    assert_not_nil assigns(:inquiry)
    assert_response :redirect
end 
```

这是测试控制器的这一部分：

```
def create
    @inquiry = Inquiry.new(params[:inquiry])
    @inquiry.user_id = current_user.id
    if @inquiry.save
      flash[:success] = "Inquiry Saved"
      redirect_to root_path
    else
      render 'new'
    end
  end 
```

和工厂：

```
FactoryGirl.define do

  factory :inquiry do
    product_id 2
    description 'I have a question about....'
  end
end 
```

但我在测试中不断出错：

```
 1) Error:
test_should_get_create(InquiriesControllerTest):
RuntimeError: Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

我究竟做错了什么？我需要设置 current_user，我相信我正在测试中，但显然，这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:39:32.513

你没有创建`current_user`. 它仅在`test`块中初始化。有两种不同的方法来做到这一点：

首先，使用设计测试助手。类似的东西

```
let(:curr_user) { FactoryGirl.create(:user, ...attrs...) }
sign_in curr_user 
```

[设计文档](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

其次，您可以`current_user`在控制器中为测试环境存根方法

```
controller.stub(current_user: FactroryGirl.create(:user, ...attrs...)) 
```

你应该使用`FactoryGirld.create(...)`而不是`FactoryGirl.build(...)`，因为你的工厂对象必须被持久化。（保存在数据库中并且`id`属性不为零）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:24:37.803

有几件事浮现在脑海：

`FactoryGirl.build(:user, ...)`返回未保存的用户实例。我建议使用它来`Factory.create`代替它，因为对于未保存的实例，没有`id`并且（通常基于会话的）`current_user`getter 无法从数据库中加载它。如果您使用的是 Devise，您应该在创建后“登录”用户。这包括在数据库中保存记录并将对它的引用放入会话中。[见设计维基](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

此外，将 ActiveRecord 对象传递给`create`这样的操作对我来说看起来很奇怪：

```
post :create, FactoryGirl.build(:inquiry) 
```

也许有一些轨道魔法可以识别你的意图，但我建议明确地这样做：

```
post :create, :inquiry => FactoryGirl.build(:inquiry).attributes 
```

或者更好的是，将其与工厂解耦（测试代码中的 DRY 和美学原则与应用程序代码不同）：

```
post :create, :inquiry => {product_id: '2', description: 'I have a question about....'} 
```

这引用了 id = 2 的产品，除非您的数据库没有 FK 引用约束，否则产品实例可能需要在操作触发之前存在于数据库中。

# php - 需要帮助从数组中获取值

> ID：12039150
> 
> 赞同：0
> 
> 时间：2012-08-20T14:02:51.223
> 
> 标签：php, arrays

嗨，需要帮助首先从数组中获取值我已经从下面的数组中获取连续值 eg=>id:1,2 如果在获取值后连续值不退出，则忽略连续值的出价之间的差异，然后总结所有投标值（连续值）？？

```
 $bidperpage = array([0]=>array(['id']=>1,['bid']='10',['page']='5'),
        [1]=>array(['id']=>2,['bid']='15',['page']='5'),
        [2]=>array(['id']=>9,['bid']='20',['page']='2'),
        [3]=>array(['id']=>3,['bid']='30',['page']='7'),
        [4]=>array(['id']=>4,['bid']='40',['page']='7'),
        [5]=>array(['id']=>5,['bid']='50',['page']='9'),
        [6]=>array(['id']=>6,['bid']='60',['page']='4'),
        [7]=>array(['id']=>8,['bid']='70',['page']='4'));

function checkconsecutivevalue($array) {
 $ret  = array();
 $temp = array();
 foreach($array as $val) {
  if(next($array) == ($val + 1))
     $temp[] = $val;
  else
     if(count($temp) > 0) {
        $temp[] = $val;
        $ret[]  = $temp[0].':'.end($temp);
        $temp   = array();
     }
     else
        $ret[] = $val;
   }         

 return $ret;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:19:07.483

在我看来，最简单的方法是使用`usort`：

```
$bidperpage = array(array('id'=>1,'bid'=>'10','page'=>'5'),
        array('id'=>2,'bid'=>'15','page'=>'5'),
        array('id'=>9,'bid'=>'20','page'=>'2'),
        array('id'=>3,'bid'=>'30','page'=>'7'),
        array('id'=>4,'bid'=>'40','page'=>'7'),
        array('id'=>5,'bid'=>'50','page'=>'9'),
        array('id'=>11,'bid'=>'60','page'=>'q'),
        array('id'=>8,'bid'=>'70','page'=>'4'));

//Sort function
function sortById($a,$b)
{
    if ($a['id'] === $b['id'])
    {
        return 0;
    }
    return ($a['id'] > $b['id'] ? 1 : -1);
}
usort($bidperpage,'sortById'); 
```

更多信息：[请参阅文档](http://www.php.net/manual/en/function.usort.php)
请记住，我假设密钥`id`将始终按下，如果不是这种情况，您可能需要在回调函数中添加额外的检查：

```
function sortById($a,$b)
{
    if (!isset($a['id']) && !isset($b['id']))
    {
        return 0;
    }
    if (!isset($a['id']))
    {
        return 1;//move to end of array
    }
    if (!isset($b['id']))
    {
        return -1;
    }
    if ($a['id'] === $b['id'])
    {
        return 0;
    }
    return ($a['id'] > $b['id'] ? 1 : -1);
} 
```

这个函数不需要那么冗长，但是因为我觉得你没有尝试过那么多，所以我将把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:35:24.417

如果不出意外，您的数组定义是一个完全语法错误。它应该是

```
$bidperpage = array(
    0 => array('id' => 1, 'bid' => '10', 'page' => '5'),
    etc...
); 
```

注意运算符的正确使用`=>`，以及`[]`大括号的缺失。

# c# - WCF 服务方法中的 XmlDocument 未使用类的保存方法成功保存到文件

> ID：12039151
> 
> 赞同：0
> 
> 时间：2012-08-20T14:02:51.527
> 
> 标签：c#, .net, xml, web-services, silverlight-5.0

您好，在此先感谢您，我正在尝试从 silverlight 应用程序中的文本框和单击按钮触发的事件中获取输入，将它们转换为 xml 字符串，将字符串和指定的文件名传递给 WCF 服务调用并在该调用中将 xml 保存到指定的文件（通过字符串参数）。将文本捕获到 xml 字符串中的代码似乎可以成功运行（基于我在调试时在变量中看到的内容），如下所示：

```
 private void ServerInfoNext_Click(object sender, RoutedEventArgs e)
                {

                    //new RegisterServerGroupObject instance
                    RegisterServerGroupObject groupInfo= new RegisterServerGroupObject(groupNameTB.Text,1,parentServerNameTB.Text,LeaderNameCB.SelectedItem.ToString());

                    var serializer = new XmlSerializer(typeof(RegisterServerGroupObject));
                    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                    ns.Add("","");

                    XmlWriterSettings settings = new XmlWriterSettings();
                    settings.Encoding = Encoding.UTF8;
                    settings.Indent = true;
                    settings.CloseOutput = true;

                    StringBuilder sb = new StringBuilder();

                    using (XmlWriter writer = XmlWriter.Create(sb,settings))
                    {
                        serializer.Serialize(writer, groupInfo);
                        writer.Close();
                    }

                    //sb now contains the xml string with the information from the serialized class
                    string contentsString = sb.ToString();
                    //create instance of XmlWrite service
                    XMLWriteServiceClient xmlClient = new XMLWriteServiceClient();
                    xmlClient.WriteXmlToServerCompleted += new EventHandler<System.ComponentModel.AsyncCompletedEventArgs>(xmlClient_WriteXmlToServerCompleted);
                    xmlClient.WriteXmlToServerAsync("ServerGroups.xml", contentsString);
    } 
```

此时，当变量内容字符串传递给服务方法时，我可以看到它具有有效的 xml，以及服务方法本身，如下所示：

```
public class XMLWriteService : IXMLWriteService
    {
        public void WriteXmlToServer(string filename,string xmlString)
        {
            XmlDocument xDoc = new XmlDocument();
            xDoc.LoadXml(xmlString.ToString());

            try
            {
                xDoc.Save(filename);

            }
            catch (FileNotFoundException e)
            {

                Console.WriteLine(e.InnerException.ToString());
            }
        }
    } 
```

try/catch 块并不表示找不到文件（“ServerGroups.xml”），我目前在项目的服务器端部分的 ClientBin 中有该 xml 文件。（.Web 端）。但是，在方法终止后，**没有新的 xml 写入文件**。有人可以告诉我我做错了什么吗？我不知道为什么 XmlDocument 类实例没有将其内容保存到文件中。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:10:57.357

您没有传递路径，因此它只是将文件保存到 WCF 服务进程的当前目录，无论发生什么。要么找出那是什么，要么在整个服务器驱动器上搜索该文件名以查看它的保存位置。更好的是，`Path.Combine`在保存文件之前调用将路径附加到文件名的开头。例如：

```
xDoc.Save(Path.Combine("C:\\ClientBin", filename)); 
```

要在下面的评论中回答您的问题，如果您想将传入的 XML 数据附加到已经存储在服务器上的 XML 文件中的数据中，那就有点复杂了。这完全取决于 XML 的格式是什么。由于您使用的是序列化，默认情况下每个 XML 文档只允许一个对象（因为它将对象名称作为根文档元素，其中只能有一个），那么您将必须具有不同的 XML 格式。例如，在服务器端，您需要在文档上有某种根元素，您可以在该根元素下继续附加传入的`RegisterServerGroupObject`对象。例如，如果您在服务器上的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<ListOfRegisterServerGroupObject>
</ListOfRegisterServerGroupObject> 
```

然后，您可以通过在该根元素中插入新元素来附加数据，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<ListOfRegisterServerGroupObject>
    <RegisterServerGroupObject>
        ...
    </RegisterServerGroupObject>
    <RegisterServerGroupObject>
        ...
    </RegisterServerGroupObject>
    ...
</ListOfRegisterServerGroupObject> 
```

为此，您需要首先加载 XML 文档，然后获取根元素，然后将传入的 XML 附加为子元素。例如：

```
public void WriteXmlToServer(string filename, string xmlString)
{
    string filePath = Path.Combine("C:\\ClientBin", filename);
    XmlDocument storage = New XmlDocument();
    storage.Load(filePath); 
    XmlDocument incoming = New XmlDocument();
    incoming.LoadXml(xmlString);
    storage.DocumentElement.AppendChild(incoming.DocumentElement);
    storage.Save(filePath);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:17:00.667

您可能需要将物理路径“映射”到服务中的输出文件

字符串路径 = HostingEnvironment.MapPath("~/MyPath/MyFile.xml");

# asp.net-mvc-3 - ASP.NET 性能分析 404/500 错误

> ID：12039152
> 
> 赞同：7
> 
> 时间：2012-08-20T14:02:54.197
> 
> 标签：asp.net-mvc-3, visual-studio-2010, performance, profiling, orchardcms

使用带有 Cassini 的 Visual Studio 性能资源管理器，我试图在我的 ( [Orchard CMS 1.4.0](http://orchard.codeplex.com/releases/view/74491) ) ASP.NET MVC3 应用程序上启动分析，但我收到此错误：

> > 网站无法正确配置；获取 ASP.NET 进程信息失败。请求`http://localhost:30320/OrchardLocal/VSEnterpriseHelper.axd`返回错误：远程服务器返回错误：（404）未找到。

所以我搜索了一个解决方案，发现[这篇文章](http://pauliom.com/2011/11/25/workaround-for-problems-launching-performance-analyzer/)不适用，因为我使用的是 Visual Studio 的开发服务器（Cassini）而不是 IIS - 不少于 IIS 6。然后我阅读[了这篇文章](http://blog.blackballsoftware.com/2011/01/26/visual-studio-performance-analysis-tool-error-getting-asp-net-process-information-failed-vsenterprisehelper-axd-500-internal-server/)和[这篇文章](https://stackoverflow.com/questions/260432/500-error-running-visual-studio-asp-net-unit-test)；在所有这些建议中，唯一有所作为的是将该`location`部分添加到我的 web.config，以授予对 VSEnterpriseHelper.axd 的访问权限。但正如其中一篇文章所预测的那样，我的 404 错误只是变成了 500：

> > 网站无法正确配置；获取 ASP.NET 进程信息失败。请求`http://localhost:30320/OrchardLocal/VSEnterpriseHelper.axd`返回错误：远程服务器返回错误：（500）内部服务器错误。

这些不同文章中的尾随评论对我不起作用。有什么建议么？我想我会在这里发布我的（Orchard 1.4.0）web.config，以防有人发现罪魁祸首：

```
<?xml version="1.0"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor" requirePermission="false" />
    </sectionGroup>

    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false" />
  </configSections>

  <appSettings>
    <add key="webpages:Enabled" value="false" />
    <add key="log4net.Config" value="Config\log4net.config" />
  </appSettings>

  <!-- Added this, which eliminated the profiling 
  VSEnterpriseHelper.axd 404 error - and led to a 500 
  error instead. -->
  <location path="VSEnterpriseHelper.axd">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <pages pageBaseType="Orchard.Mvc.ViewEngines.Razor.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="System.Linq"/>
        <add namespace="System.Collections.Generic"/>
        <add namespace="Orchard.Mvc.Html"/>
      </namespaces>
    </pages>
  </system.web.webPages.razor>

  <!-- 
        Set default transaction timeout to 30 minutes so that interactive debugging 
        is easier (default timeout is less than one minute)
  -->
  <system.transactions>
    <defaultSettings timeout="00:30:00"/>
  </system.transactions>
  <system.web>
    <!--<trust level="Medium" originUrl="" />-->

    <httpRuntime requestValidationMode="2.0" />
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
    -->
    <compilation debug="true" targetFramework="4.0" batch="true" numRecompilesBeforeAppRestart="250" optimizeCompilations="true">
        <buildProviders>
        <add extension=".csproj" type="Orchard.Environment.Extensions.Compilers.CSharpExtensionBuildProviderShim"/>
      </buildProviders>
      <assemblies>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL"/>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL"/>
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL"/>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <remove assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <remove assembly="System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <remove assembly="System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <remove assembly="System.ServiceModel.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <remove assembly="System.WorkflowServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <remove assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Forms">
      <forms loginUrl="~/Users/Account/AccessDenied" timeout="2880"/>
    </authentication>

    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.
    -->
    <customErrors mode="RemoteOnly" />
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <namespaces>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Linq"/>
        <add namespace="System.Collections.Generic"/>
        <add namespace="Orchard.Mvc.Html"/>
      </namespaces>
    </pages>

    <httpHandlers>
      <!-- see below -->
      <clear />
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>

    </httpHandlers>

    <httpModules>
      <add name="WarmupHttpModule" type="Orchard.WarmupStarter.WarmupHttpModule, Orchard.WarmupStarter, Version=1.0.20, Culture=neutral"/>
    </httpModules>
  </system.web>

  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>

    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WarmupHttpModule" />
      <add name="WarmupHttpModule" type="Orchard.WarmupStarter.WarmupHttpModule, Orchard.WarmupStarter, Version=1.0.20, Culture=neutral"/>
    </modules>
    <handlers accessPolicy="Script">
      <!-- clear all handlers, prevents executing code file extensions, prevents returning any file contents -->
      <clear/>
      <!-- Return 404 for all requests via managed handler. The url routing handler will substitute the mvc request handler when routes match. -->
      <add name="NotFound" path="*" verb="*" type="System.Web.HttpNotFoundHandler" preCondition="integratedMode" requireAccess="Script"/>
    </handlers>
    <!-- Prevent IIS 7.0 from returning a custom 404/500 error page of its own -->
    <httpErrors existingResponse="PassThrough" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="App_Data/Dependencies"/>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0" newVersion="3.0.0.0"/>
        <bindingRedirect oldVersion="2.0.0.0" newVersion="3.0.0.0"  />
      </dependentAssembly> 
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:50:30.433

就我而言，我有

```
 <validation validateIntegratedModeConfiguration="true" /> 
```

在我的 web.config 中设置。当我将其更改为

```
 <validation validateIntegratedModeConfiguration="false" /> 
```

事情神奇地开始起作用了。三个小时的下水道......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:40:50.963

我遇到了类似的问题，我找到了一个解决方案。我发现我收到 404 错误，因为`VSEnterpriseHelper.axd`是通过 MVC 路由的，并且无论我在`Web.config`. 所以我想我应该正确地路由它。所以我添加了处理这个文件的路线，我写了处理程序：

**处理程序：**

```
public class DefaultRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new DefaultHttpHandler();
    }
}

internal class DefaultHttpHandler : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        string contentPath = context.Request.PhysicalPath;

#if DEBUG
        if (contentPath == context.Server.MapPath("VSEnterpriseHelper.axd"))
        {
            var assembly = AppDomain.CurrentDomain.GetAssemblies().SingleOrDefault(a => a.GetName().Name == "Microsoft.VisualStudio.Enterprise.AspNetHelper");
            if (assembly == null)
            {
                if (File.Exists(@"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.VisualStudio.Enterprise.AspNetHelper.dll"))
                {
                    assembly = Assembly.LoadFrom(@"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.VisualStudio.Enterprise.AspNetHelper.dll");
                }
                if (File.Exists(@"C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.VisualStudio.Enterprise.AspNetHelper.dll"))
                {
                    assembly = Assembly.LoadFrom(@"C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.VisualStudio.Enterprise.AspNetHelper.dll");
                }
            }
            var type = assembly.GetType("Microsoft.VisualStudio.Enterprise.Common.AspNetHelperHandler");
            var handler = (IHttpHandler)Activator.CreateInstance(type);

            handler.ProcessRequest(context);
            return;
        }
#endif
        [...]
    }   
} 
```

**路线定义：**

```
DefaultRouteHandler defaultHandler = new DefaultRouteHandler();
routes.Add(new Route("{*resource}", new RouteValueDictionary(), new RouteValueDictionary(), defaultHandler)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-20T01:12:15.707

我修复了相同的 500 错误，这是您需要做的（部分从[这里](https://blog.blackballsoftware.com/2011/01/26/visual-studio-performance-analysis-tool-error-getting-asp-net-process-information-failed-vsenterprisehelper-axd-500-internal-server/)借用我自己的评论）：

*   确保您对 web.config 文件具有写入权限

*   如果您的网站已锁定根文件夹的安全性（使用表单或 Windows 身份验证等），请确保添加 [location] 标签以允许完全访问 vsenterprisehelper.axd 文件，如下所示：

    ```
    <location path="VSEnterpriseHelper.axd">
        <system.web>
            <authorization>
                <allow users="?" />
            </authorization>
        </system.web>
    </location> 
    ```

*   确保在 IIS 中为您的站点配置 AXD 扩展

*   如果您的 AppSettings 存储在单独的配置文件中，并且您的 web.config 使用 configSource 属性引用它们，则会出现问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-16T15:59:19.960

我终于（4 小时后）通过将我的默认设置`.axd route handler`从`RouteConfig.cs`main 移到 main来解决这个问题`Global.asax.cs`：

```
AreaRegistration.RegisterAllAreas();
// Register .axd route ahead of WebApiConfig
RouteTable.Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
GlobalConfiguration.Configure(WebApiConfig.Register);
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

因为我使用的是`WebAPI`，所以`WebApiConfig`路由会接听对 AXD 的调用，因为它们在默认情况下是`RouteConfig.RegisterRoutes`在之前注册的。`.axd exception`

# .net - VSTO 工具 Outlook 2010 区分约会和会议

> ID：12039154
> 
> 赞同：4
> 
> 时间：2012-08-20T14:02:59.933
> 
> 标签：.net, vsto, add-in, outlook-2010

我如何知道在 Outlook 2010 中是否单击了新会议或单击了新约会？我有一个功能区类，通过查看`RibbonBase.RibbonId`我可以确定它是否`Microsoft.Outlook.Mail`为`Microsoft.Outlook.Appointment`Appointment item click 和 Meeting item click the Ribbon Id hold the value `Microsoft.Outlook.Appointment`。有什么方法可以区分 Outlook 中的约会和会议选择吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:26:13.917

`Microsoft.Outlook.Appointment`Outlook对约会和会议项目使用相同的功能区 ID ( ) 是正确的。

要确定哪种约会类型，**约会**[`AppointmentItem.MeetingStatus`](http://msdn.microsoft.com/en-us/library/office/ff869205.aspx)项目将为 0 ，而**会议**项目则为非零。

# ios - 为具有自己的开发者帐户的客户构建 iOS 应用程序以提交 App Store

> ID：12039155
> 
> 赞同：0
> 
> 时间：2012-08-20T14:03:00.457
> 
> 标签：ios, xcode, app-store

我用 xCode 4.3 为一个拥有自己开发者帐户的客户制作了一个应用程序。现在我需要将我的编译/二进制应用程序（无源代码）发送给他，以便他可以在他的帐户下提交。

我不知道他的捆绑 ID，也没有他的开发者证书。

编辑：他不会向我提供他的开发者证书。

可以做到吗？

我搜索了如何做到这一点，但没有找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:17:39.957

像往常一样构建 IPA，然后将其与`Info.plist`. 那么他必须：

*   编辑该`Info.plist`文件以包含他的捆绑包 ID。
*   解压 IPA。
*   替换`Info.plist`文件。
*   使用 重新签署应用程序`codesign`。
*   重新压缩 IPA。
*   手动将其提交到 iTunes Connect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:08:45.547

我之前这样做的方式是作为客户端登录，然后从您的机器上提交。但我想这取决于你们之间的信任程度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:11:29.607

您需要拥有他的分发证书（带有私钥和公钥）和分发配置文件。拥有这些后，您可以创建一个已编译的应用程序以提交给 Apple。

基本上，他需要创建 App ID、证书和配置文件并将它们提供给您。如果他不能这样做，您需要为他登录他的帐户。

一旦他有了编译好的应用程序，他就可以使用 Xcode 或 Application Loader 轻松地提交它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:13:21.473

使用您自己的证书构建和存档 iOS 应用程序，然后将生成的应用程序存档发送给客户（如果需要，压缩应用程序的存档目录）。在此处查找 Xcode 的存档文件：~/Library/Developer/Xcode/Archives/

在存档中，他们可以找到并编辑应用程序的 Info.plist 文件。

然后客户可以从 Xcode 的 Organizer 并使用他们自己的开发者帐户提交应用程序存档。作为上传过程的一部分，Xcode 应该要求他们使用自己的分发证书重新设计应用程序。

# cuda - 在 GPU 上是否存在用于许多并行优化作业的库

> ID：12039156
> 
> 赞同：1
> 
> 时间：2012-08-20T14:03:09.343
> 
> 标签：cuda, nonlinear-optimization

我希望在我的 nVidia Geforce 上执行许多（数千个）小型优化工作。

对于小型工作，我的意思是 3-6 个维度和每个大约 1000 个数据点输入。基本上它是为了曲线拟合的目的，所以要最小化的目标函数是一个连续（非平凡）分析函数的平方和，我可以分析地计算它的一阶导数。每个维度都被限制在下边界和上边界之间。

这些工作唯一的共同点是原始数据系列，他们从中提取了不同的 1000 个数据点。

我怀疑这在我的 GPU 上会比现在快得多，在我的 CPU 上一个接一个地运行它们，所以我可以用它来进行实时监控。

但是，我见过的 GPU 库只专注于在 GPU 上计算单个函数评估（更快）。

在 nvidia CUDA 论坛上有一个关于我的特定问题的主题，有更多用户在寻找这个，但论坛已经关闭了一段时间。它提到将现有的 C 库（例如 levmar）移植到 CUDA 语言，但这迷路了......

您是否知道现有的库可以在 gpu 上并行运行许多优化？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:49:16.403

GFOR 循环旨在将许多像这样的小问题拼凑在一起。循环的每个主体都与其他循环主体平铺在一起。许多人已将其用于解决您所描述的优化问题。它可用于[C/C++、Fortran 或 Python](http://www.accelereyes.com/arrayfire/c/group__gfor.htm)以及[MATLAB](http://wiki.accelereyes.com/wiki/index.php/GFOR_Usage)代码。

我的免责声明是我在 GFOR 上工作。但我不知道有任何其他生产级 GPU 库会出现类似的优化问题。如果您四处搜索，您可能会找到一些学术项目。

# c++ - XCode中的C ++类声明错误

> ID：12039158
> 
> 赞同：1
> 
> 时间：2012-08-20T14:03:12.787
> 
> 标签：c++, xcode, objective-c++

我正在使用 Xcode 将 C++ 项目移植到 Mac。现在我有一个声明如下的类：

```
namespace poi {
class AesCipher : public SymetricCipher {
public:
    AesCipher();
    virtual ~AesCipher ();

    //more method declarations here...
};
} 
```

然而 Xcode 会在 public: 语句中向我显示一个错误：

```
 C++ requires a type specifier for all declarations 
```

我认为这与命名空间有关，但我对 C++ 没有那么丰富的经验。我不知道这个错误想对我说什么。也许有人以前见过这样的错误，并且可以为我指出正确的方向，我可能犯了什么样的错误。

# objective-c - 不可接受的一对一关系的值类型。所需类型 = (null);

> ID：12039160
> 
> 赞同：2
> 
> 时间：2012-08-20T14:03:27.890
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectmodel

所以我刚刚将我的核心数据模型转换为代码，以便它可以轻松地放入静态库中。不幸的是，它不是一个平滑的转换。

尝试插入新玩家作为另一个名为 gameToPlayer 的类的关系时出现此错误。

```
Unacceptable type of value for to-one relationship: property = "player"; desired type = (null); given type = Player; value = <Player: 0x178ba9e0> 
```

这是 GameToPlayer 的创建：

```
 gameToPlayerEntity = [[NSEntityDescription alloc] init];
    [gameToPlayerEntity setName:@"GameToPlayer"];
    [gameToPlayerEntity setManagedObjectClassName:@"GameToPlayer"];

    gameToPlayerPlayer = [[NSRelationshipDescription alloc] init];
    [gameToPlayerPlayer setDestinationEntity:playerEntity];
    [gameToPlayerPlayer setInverseRelationship:playerGames];
    [gameToPlayerPlayer setDeleteRule:NSNullifyDeleteRule];
    [gameToPlayerPlayer setOptional:YES];
    [gameToPlayerPlayer setName:@"player"];
    [gameToPlayerPlayer setMaxCount:1];
    [gameToPlayerPlayer setMinCount:1]; 
```

和 Player 创建：

```
 playerEntity = [[NSEntityDescription alloc] init];
    [playerEntity setName:@"Player"];
    [playerEntity setManagedObjectClassName:@"Player"];

    playerGames = [[NSRelationshipDescription alloc] init];
    [playerGames setDestinationEntity:gameToPlayerEntity];
    [playerGames setInverseRelationship:gameToPlayerPlayer];
    [playerGames setDeleteRule:NSCascadeDeleteRule];
    [playerGames setName:@"games"];
    [playerGames setOptional:YES];
    [playerGames setMaxCount:0];
    [playerGames setMinCount:0]; 
```

以及发生崩溃的地方（抱歉，所有 NSLogs 都在使用它们来追踪它）它在我们设置播放器的地方停止：

```
 NSLog(@"Create the GameToPlayer");
    GameToPlayer *orderObj = [NSEntityDescription insertNewObjectForEntityForName:@"GameToPlayer" inManagedObjectContext:[SDDataManager dataManager].managedObjectContext];
    NSLog(@"Set the Game");
    [orderObj setGame:newGame];
    NSLog(@"Set the Player");
    [orderObj setPlayer:player];
    NSLog(@"Set the Order");
    [orderObj setOrder:[NSNumber numberWithInt:[selectedPlayers indexOfObject:player]]];
    NSLog(@"Add to Array");
    [orderObjs addObject:orderObj]; 
```

现在我实际上认为我知道问题所在。在我的 ManagedObjectModel 的自定义初始化中。gameToPlayerEntity 在 playerEntity 之前创建。所以当 gameToPlayerEntity 创建时 playerEntity 实际上是 NULL。但是我不能简单地重新排序，使它们成为属性，或做任何事情来修复它，因为如果我更改文件中的任何内容，它似乎不再能够映射现有数据库......

而且我在文档中找不到任何地方，它显示了如何对我希望成为问题的 xml 模型之类的代码模型进行版本化。任何帮助或提示表示赞赏。只是试图掌握如何使其正常工作。

**更新**

值得一提的是，在此转换之前，我已经在使用轻量级迁移，并且是数据库的第 4 次迭代。

![在此处输入图像描述](../Images/bdcbd16205ad01818c4bcf7ff5d84c49.png)

**更新 2**

我已经能够通过完全重新开始来让它工作。而不是试图从已发布的内容继续前进。一切都已转换为属性，以便每个实体在需要时仅创建一次。这可以作为从视觉模型到代码模型的转换。***但是***，当这个模型不可避免地发生变化时，我肯定需要了解未来的版本控制。版本控制是这个问题的根源。因此，如果有人可以阐明如何在不使用 xcode 界面的情况下进行版本控制，我很想听听您的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:16:40.487

我认为这不一定是您的问题，但我确实想为也遇到此错误的人发布另一种可能性。如果您在将数据从一个持久性存储移动到另一个（例如，从备用存储移动到 iCloud 存储）时看到此错误，则您用于创建新托管对象的 NSEntityDescription 可能来自您的旧副本对象（因此错误的托管对象上下文）。

当您执行以下代码时：

```
NSEntityDescription *entity = [oldObj entity];
YourClass *newObj = [[YourClass alloc] initWithEntity:entity
                       insertIntoManagedObjectContext:moc]; 
```

您需要采取额外的步骤从要插入的上下文中获取实体描述。

```
NSEntityDescription *entity = [oldObj entity];
NSEntityDescription *goodEntity = [NSEntityDescription entityForName:entity.name
                                              inManagedObjectContext:moc];
YourClass *newObj = [[YourClass alloc] initWithEntity:goodEntity
                                       insertIntoManagedObjectContext:moc]; 
```

感谢 Pavel Kapinos 在 Cocoa Dev 电子邮件列表中的注释。 [http://www.mail-archive.com/cocoa-dev@lists.apple.com/msg24863.html](http://www.mail-archive.com/cocoa-dev@lists.apple.com/msg24863.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:31:54.497

在方法开始时初始化实体和关系然后设置所有属性会不会太难？

```
playerEntity = [[NSEntityDescription alloc] init];
gameToPlayerEntity = [[NSEntityDescription alloc] init];
gameToPlayerPlayer = [[NSRelationshipDescription alloc] init]; 
```

然后在该方法稍后的某个时间点：

```
[gameToPlayerPlayer setDestinationEntity:playerEntity]; 
```

# google-apps-script - 通过 UiApp.getActiveApplication().getElementByID() 访问 ListBox 选定项

> ID：12039162
> 
> 赞同：1
> 
> 时间：2012-08-20T14:03:47.920
> 
> 标签：google-apps-script

目前我正在使用 UiService 创建一个表单并使用 ListBox，据我所知，通过处理程序传递一个值将类似于*e.parameter.[Name of ListBox]*来访问所选项目。

有谁知道是否可以使用*app.getElementById([Name of ListBox])*来访问所选项目。我使用这种方法的原因是因为我的 ListBox-es 列表是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:08:48.747

我也花了一些时间寻找这个答案，但最后我尝试了一个想法并且它奏效了。

您可以将`e.parameter`其用作数组，因此这两个将给出相同的结果：

```
e.parameter.LIST_BOX_NAME 
```

和

```
e.parameter['LIST_BOX_NAME'] 
```

因此，在第二个示例中，可以使用任何动态列表框 ID。我对所有添加的下拉列表使用相同的处理程序，并使用此代码检查更改了哪些下拉列表以及它现在具有什么值：

```
 if (e.parameter[e.parameter.source] == 'a'){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:35:13.410

要更改 listBox 的内容，您可以使用 `app.getElementById('ID of the listBox')`，从那里您可以 一次`clear()`又一次`addItems`地但您无法读取 listItems。当我需要这样做时，我通常将项目列表存储在其他地方，在我可以随时阅读的地方，例如项目列表可以作为字符串存储在 listBox 标记本身中，因此我手头有所有项目清除后重新填充列表框。

# node.js - 通过 http.request 发出 post 请求时 req.body 为空

> ID：12039166
> 
> 赞同：8
> 
> 时间：2012-08-20T14:03:59.323
> 
> 标签：node.js, request, express

我有一个使用bodyparser（）的nodejs应用程序，这条路线：

```
app.post('/users', function(req, res){
  res.json(req.body)
}) 
```

当我卷曲

```
curl -X POST 127.0.0.1:3000/users -d 'name=batman' 
```

服务器发回这个 json ：

```
{ name: 'batman' } 
```

我的问题是当尝试使用 http.request 发出相同的请求时，req.body 是空的，但我正在执行相同的调用，这是我使用 node 运行的 test.js 文件：

```
var http = require('http');

var options = {
  host: '127.0.0.1',
  port: 3000,
  path: '/api/users',
  method: 'POST'
};

var request = http.request(options, function (response) {
  var str = '';
  response.on('data', function (chunk) {
    str += chunk;
  });

  response.on('end', function () {
    console.log(str);
  });
});

request.end("name=batman"); 
```

请求正文为空 ->`{}`

为什么 ？我试过设置内容长度，但没有做任何事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T14:14:55.003

你需要传递一个`Content-Type`来告诉你`bodyParser()`使用哪个解析器。对于常规表单数据，您应该使用`Content-Type: application/x-www-form-urlencoded`，因此：

```
var options = {
  host: '127.0.0.1',
  port: 3000,
  path: '/api/users',
  method: 'POST',
  'Content-Type': 'application/x-www-form-urlencoded'
}; 
```

应该做的伎俩。

**编辑：**如果您发现自己在节点中执行大量客户端 HTTP 请求，我衷心推荐[Mikeal Rogers 的`request`模块](https://github.com/mikeal/request)，这让这些事情变得轻而易举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-06T15:06:45.083

确保这些行出现在您的`app.js`或`server.js`

```
var bodyParser = require('body-parser');
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({extended: false})); 
```

# mysql - 当查找表用于多对多关系时返回结果集

> ID：12039168
> 
> 赞同：0
> 
> 时间：2012-08-20T14:04:01.650
> 
> 标签：mysql, sql

我正在尝试创建一个简单的玩家资料网站，但我的 SQL 遇到了问题。

我有一张球员桌和一张以前的俱乐部桌。由于这是一个多对多的关系，我在球员和以前的俱乐部表之间使用了一个查找表（球员以前的俱乐部）。

在我运行如下所示的 sql 之前，这一切似乎都运行良好：

```
SELECT player.id, player.name AS name, age, position, height, weight, previousclubs.name AS previousclubs, satscore, gpa
FROM player 
INNER JOIN playerpreviousclubs
ON player.id = playerid
INNER JOIN previousclubs
ON previousclubid = previousclubs.id 
```

问题是，如果一名球员有不止一个以前的俱乐部，那么所有信息（除了以前的俱乐部）都会重复，所以我最终会得到这样的结果。

**结果集 1**

```
Name: John Smith
Age: 23
Previous Clubs: Arsenal 
```

**结果集 2**

```
Name: John Smith
Age: 23
Previous Clubs: Reading 
```

***我想做的是以下几点：***

**结果集 1**

```
Name: John Smith
Age: 23
Previous Clubs: Arsenal, Reading 
```

任何人都可以向我解释为什么目前正在发生这种情况以及我如何着手纠正它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:16:56.640

您必须将 GROUP BY 与聚合函数结合使用才能实现所需的行为（即，您需要“聚合”从数据库中检索到的 n 元组，这就是为什么这些函数被称为聚合 :-)）。聚合函数的选择取决于您使用的 RDBMS，例如：

MySQL：

```
SELECT player.id, player.name AS name, GROUP_CONCAT(previousclubs.name)
FROM player
INNER JOIN playerpreviousclubs ON player.id = playerid
INNER JOIN previousclubs ON previousclubid = previousclubs.id
GROUP BY player.id, player.name 
```

PostgreSQL（v8.4 及更高版本）：

```
SELECT player.id, player.name AS name, array_agg(previousclubs.name)
FROM player
INNER JOIN playerpreviousclubs ON player.id = playerid
INNER JOIN previousclubs ON previousclubid = previousclubs.id
GROUP BY player.id, player.name 
```

# html - 如何在 Chrome 和 Opera 中显示“—”号？

> ID：12039171
> 
> 赞同：2
> 
> 时间：2012-08-20T14:04:07.857
> 
> 标签：html, google-chrome, special-characters, opera

在我的网站中，我需要显示“—”，但它在 Google Chrome 和 Opera 中看起来像：( [http://i.imgur.com/CiLIo.png](http://i.imgur.com/CiLIo.png) )，但在 Firefox 和 IE9 中看起来没问题。

有人可以提供这个标志的工作代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:08:55.190

我不能确定你想 100% 显示什么，因为我在 Chrome 上:)，但这看起来像一个 m-dash 并且显示它的正确方法是在你的代码中编写`&mdash;`或`&#8212;`. 可以认为 Chrome 和/或 Opera 在您的系统上使用的字体中缺少该字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:21:43.023

很可能该页面使用了一些奇怪的字体，其中包含“ó”代替了破折号，并且某些浏览器能够比其他浏览器更好地分析字体。如果这只是一个编码问题（这也是我的第一个想法），那么肯定`&#8212;`会起作用。

这将是一种奇怪的字体，但如果没有更多信息，就不可能进一步分析这个问题。一个 URL 可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:21:04.587

尝试在您的文档中添加这一行`<head>`：

```
<meta charset="utf-8"> 
```

Charset 设置[字符编码](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)，指定浏览器/文档阅读器期望什么样的字符。这样，它可以以预期的方式适当地处理您的文本。在这种情况下，我们使用“utf-8”，因为它支持更广泛的字符。

另外/否则，单击 Chrome 中的扳手图标，悬停到工具，悬停到编码，然后查看选中的编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:10:49.997

查看此链接：[http ://tlt.its.psu.edu/suggestions/international/web/codehtml.html](http://tlt.its.psu.edu/suggestions/international/web/codehtml.html)

引用它：

> “智能（弯）引号”（相对于“普通（直）引号”）和长破折号（如 em dash (-) 和 en dash (–)）实际上被视为 HTML 中的“特殊字符”。

所以使用 m 或 n 破折号：`&mdash; or &ndash;`

# python - Python ActiveX 自动化

> ID：12039174
> 
> 赞同：0
> 
> 时间：2012-08-20T14:04:23.027
> 
> 标签：python, com, activex, pywin32, win32com

我正在尝试将 ActiveX 自动化与 python 一起使用来控制 Audio Precision ATS-2。我正在使用 pywin32 32 位 Windows XP 和 Python 2.7。

我安装了音频精密软件。然后我使用*了 makepy*实用程序，它在列表中找到了 Audio Precision 并为其创建了一个包装器。一切都很顺利，直到我尝试调用调度函数 abd 我被卡住了。

根据我在网上找到的指南，

```
win32com.client.Dispatch("Excel.Application") 
```

我应该在“Excel.Application”的区域放什么？

我怎样才能找到这个？

当我使用 OLE/COM 对象查看器时，我在类型库下看到音频精度条目，但我不确定其中的信息如何帮助我。

我自己尝试了几件事，但几乎没有结果。我得到的最好结果是当我输入了`CLSID`in dispatch 函数时，我在 makepy 创建的包装对象中找到了它。

```
win32com.client.Dispatch("{80EC6E76-D94F-48EB-8F4C-05BDD7850BF1}") 
```

这给了我以下错误：

```
 Traceback (most recent call last):
  File "C:\Python27\Lib\site-packages\win32com\gen_py\APtest.py", line 5, in <module>
    xlApp = win32com.client.Dispatch("{80EC6E76-D94F-48EB-8F4C-05BDD7850BF1}")
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
com_error: (-2147221164, 'Class not registered', None, None) 
```

我有：

*   看了下注册表，ID确实没有在任何地方注册。Audio Precision 条目很少，但看起来没有任何东西可以解决这个问题。
*   尝试重新安装 Audio Precision 软件，但没有帮助。
*   试图在音频精度控制（ATS 1.60）软件中注册 dll 对象`regsrv32`，但都给出了错误并且不会注册（我怀疑这不是我需要注册的正确对象）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:26:03.203

解决此问题的可能方法：

*   识别您要调用的 Audio Precision ATS-2 dll。例如“C:\path\my.dll”
*   现在转到注册表并查找“C:\path\my.dll”。你会发现一些东西，但你真正想要的是 CLSID...\InprocServer32 文件夹中的一个条目，或类似的东西
*   还会有一个 ProgID 条目，例如“AudioPrecison.ATS2”
*   现在在 Python 中尝试`win32com.client.Dispatch("AudioPrecison.ATS2")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T19:59:51.293

要将 pywin32 模块与 activex 类一起使用，您需要生成一个包装文件。为此，请在 C:\Python27\Lib\site-packages\win32com\client （或您的类似目录）中找到您的 makepy.py 文件。然后运行它，找到你的activex类的NAME然后运行它。它应该在 gen_py 文件夹 C:\Python27\Lib\site-packages\win32com\gen_py 中生成一个包装文件，其中包含 CLSID。然后，您可以像访问 excel 示例一样访问它，使用其他语言的方式也一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T20:06:55.617

我遇到过同样的问题。我不知道从哪里得到它，从我能收集到的是程序`CoClass`创建的（我相信是 dll 的包装器）的名称`makepy`（也许我错了）。在我阅读了@NotAUser 的[答案](https://stackoverflow.com/a/12515872/1309352)后，我找到了它，但是当我检查程序创建的文件时`makepy`，就在最后一节课之前，（如果创建了多个）我发现了以下内容：

```
from win32com.client import CoClassBaseClass
# This CoClass is known by the name 'ZKFPEngXControl.ZKFPEngX'
class ZKFPEngX(CoClassBaseClass): # A CoClass 
```

所以，在同一个文件中，有我需要使用的名称。

# c++ - 传入比较函子时 C++ std::map 编译器错误

> ID：12039185
> 
> 赞同：3
> 
> 时间：2012-08-20T14:04:58.980
> 
> 标签：c++, compare, functor, stdmap

我在我相信的某个地方做了一个错误的假设。我假设`std::map`只会在索引中进行比较。但是，它不是尝试比较两个`uint64`s，而是尝试将一个与其他东西进行比较（请参阅编译器错误）..

```
 struct Tag { };
  typedef Handle<Tag> HPowerType;
  class PowerTypeMgr
  {
    struct PowerType { /** stuff **/ };
    struct uint64_less 
    {
        bool operator() ( const uint64& l, const uint64& r) const
        {
            return ((l<r)?true:false);
        }
    };

   typedef std::map <uint64,HPowerType,uint64_less> PTHMap;
  }; 
```

它会导致此编译器错误：

```
 c:\cry_v340_3696\code\sdks\stlport\stlport\stl\debug\_tree.h(62): error C2664:
    'bool PowerTypeMgr::uint64_less::operator ()(const uint64 &,const uint64 &) const' : 
    cannot convert parameter 2 from 'PowerTypeMgr::PowerType *const ' to 'const uint64&'

   2>          Reason: cannot convert from 'PowerTypeMgr::PowerType *const ' to 'const 
   uint64'
   2>          There is no context in which this conversion is possible
   2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\_tree.h(570) : see         
   reference to function template instantiation 'bool    
   stlpd_std::priv::_DbgCompare<_Key,_Compare>::operator ()<_Key,_KT>(const _Kp1 &,const 
   _Kp2 &) const' being compiled

   2>          with
   2>          [
   2>              _Key=unsigned __int64,
   2>              _Compare=PowerTypeMgr::uint64_less,
   2>              _KT=PowerTypeMgr::PowerType *,
   2>              _Kp1=unsigned __int64,
   2>              _Kp2=PowerTypeMgr::PowerType *
   2>          ] 
```

**这是完整的用法，因为我似乎还没有发布足够的内容。注意，如果我没有通过 std::map 函子，我会得到同样的错误。我将在这里发布另一种方式。**

```
class PowerTypeMgr
{
public:

    virtual ~PowerTypeMgr();

    PowerTypeMgr& Instance()
    {
        static PowerTypeMgr Obj;
        return Obj;
    }

    HPowerType StorePowerType ( 
        uint64 EMP, uint64 ESP, int wC, int chiC, int hC, const char* MPName, 
        const char* SPName, bool isC, bool unlock,const char* PN,const char* PC,
        const char* FMT
    );

    void DeletePowerType(HPowerType Hpt);   //not needed for powertypes, 
                                            //they should always be loaded or unloaded together

    uint64 makePowerString(EMainPowers EMP, ESubPowers ESP);

    bool    IsComboable(HPowerType Hpt) const;
    string  GetPowerName(HPowerType Hpt) const;
    string  GetMPEffectName(HPowerType Hpt) const;
    string  GetSPEffectName(HPowerType Hpt) const;
    string  GetProjectileClass(HPowerType Hpt) const;
    string  GetFireModeType(HPowerType Hpt) const;
    int     GetHealthCost(HPowerType Hpt) const;
    int     GetCHICost(HPowerType Hpt) const;
    int     GetWeaponCost(HPowerType Hpt) const;
    bool    IsUnlocked(HPowerType Hpt) const;
    uint64  GetPowerString(HPowerType Hpt) const;

    // Only things that may change during the course of game execution //
    void    StorePowerName(HPowerType Hpt, string pn);
    void    Unlock(HPowerType Hpt);//, bool L);             //true = unlock it
    void    Lock(HPowerType Hpt);

    bool SaveGame(/* GamePak, SaveName*/) {}//TODO
    bool LoadGame(/* GamePak, SaveName*/) {}//TODO

        private:

    struct PowerType 
    {
        uint64 thePower; //64-bit string where uppermost 8 bits is the EMainPower, and lower 56 is ESubPower
        EMainPowers mainPower; //currently unused
        ESubPowers subPower; //ditto

        bool isComboable;
        bool isUnlocked;
        int weaponCost; //weapon cost (to hold)
        int CHIcost; //cost to CHI meter to use it.
        int healthCost; //additional healthCost to use it
        string powerName;
        string MPEffectName;
        string SPEffectName;
        string projectileClass;
        string fireModeType;

        //MEMBERS --------------------------------------------------<<<
        void Unload();

        EMainPowers getMainPower() const;
        EMainPowers convertToMainPower(const uint64& bitstring);
        ESubPowers getSubPower() const;
        ESubPowers convertToSubPower(const uint64& bitstring);

    }; //end struct PowerType
    //--------------------------------------------------------------------------------------------------------

    PowerTypeMgr(); //SINGLETON pattern

    typedef std::pair<uint64,HPowerType>        PowerMap_Pair;  
    typedef std::map <uint64,HPowerType>        PTHMap;//,int64_less>       PTHMap; //,uint64_less>     PTHMap;         //O(logn) look up bitstr
    PTHMap                                      m_PTHMap;       //...

    typedef std::pair<PTHMap::iterator,bool>    indexInsertRC;

    typedef HandleMgr <PowerType, HPowerType>   PowerHandle;
    PowerHandle                                 m_PowerTypeHMgr;

    bool                                        inited;             //Used in assert & checking if trying to load more than once
    int                                         totalPowerTypes;
        }; //end PowerTypeMgr 
```

**这是编译器错误（VC Express 2010）**

```
 '2>  PowerTypeMgr.cpp
    2>c:\cry_v340_3696\code\sdks\stlport\stlport\stl\debug\_tree.h(62): error C2664: 'bool stlpd_std::less<_Tp>::operator ()(const _Tp &,const _Tp &) const' : cannot convert parameter 2 from 'PowerTypeMgr::PowerType *const ' to 'const uint64 &'
    2>          with
    2>          [
    2>              _Tp=uint64
    2>          ]
    2>          Reason: cannot convert from 'PowerTypeMgr::PowerType *const ' to 'const uint64'
    2>          There is no context in which this conversion is possible
    2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\_tree.h(570) : see reference to function template instantiation 'bool stlpd_std::priv::_DbgCompare<_Key,_Compare>::operator ()<_Key,_KT>(const _Kp1 &,const _Kp2 &) const' being compiled
    2>          with
    2>          [
    2>              _Key=unsigned __int64,
    2>              _Compare=stlpd_std::less<uint64>,
    2>              _KT=PowerTypeMgr::PowerType *,
    2>              _Kp1=unsigned __int64,
    2>              _Kp2=PowerTypeMgr::PowerType *
    2>          ]
    2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\_tree.h(560) : see reference to function template instantiation 'stlpd_std::priv::_NonDbg_Rb_tree<_Key,_Compare,_Value,_KeyOfValue,_Traits,_Alloc>::_Base_ptr stlpd_std::priv::_NonDbg_Rb_tree<_Key,_Compare,_Value,_KeyOfValue,_Traits,_Alloc>::_M_find<_KT>(const _KT &) const' being compiled
    2>          with
    2>          [
    2>              _Key=unsigned __int64,
    2>              _Compare=stlpd_std::priv::_DbgCompare<unsigned __int64,stlpd_std::less<uint64>>,
    2>              _Value=stlpd_std::pair<const uint64,HPowerType>,
    2>              _KeyOfValue=stlpd_std::priv::_Select1st<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _Traits=stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _Alloc=stlpd_std::allocator<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _KT=PowerTypeMgr::PowerType *
    2>          ]
    2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\debug\_tree.h(178) : see  
    reference to function template instantiation 'stlpd_std::priv::_Rb_tree_iterator<_Value,_Traits> stlpd_std::priv::_NonDbg_Rb_tree<_Key,_Compare,_Value,_KeyOfValue,_Traits,_Alloc>::find<_KT>(const _KT &)' being compiled
    2>          with
    2>          [
    2>              _Value=stlpd_std::pair<const uint64,HPowerType>,
    2>              _Traits=stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _Key=unsigned __int64,
    2>              _Compare=stlpd_std::priv::_DbgCompare<unsigned __int64,stlpd_std::less<uint64>>,
   2>              _KeyOfValue=stlpd_std::priv::_Select1st<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _Alloc=stlpd_std::allocator<stlpd_std::pair<const uint64,HPowerType>>,
   2>              _KT=PowerTypeMgr::PowerType *
   2>          ]
   2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\_map.h(214) : see reference to function template instantiation 'stlpd_std::priv::_DBG_iter<_Container,_Traits> stlpd_std::priv::_Rb_tree<_Key,_Compare,_Value,_KeyOfValue,stlpd_std::priv::_MapTraitsT<_Tp>,_Alloc>::find<_KT>(const _KT &)' being compiled
   2>          with
   2>          [
   2>              _Container=stlpd_std::priv::_NonDbg_Rb_tree<unsigned __int64,stlpd_std::priv::_DbgCompare<unsigned __int64,stlpd_std::less<uint64>>,stlpd_std::pair<const uint64,HPowerType>,stlpd_std::priv::_Select1st<stlpd_std::pair<const uint64,HPowerType>>,stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>,stlpd_std::allocator<stlpd_std::pair<const uint64,HPowerType>>>,
   2>              _Traits=stlpd_std::priv::_DbgTraits<stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>>,
    2>              _Key=unsigned __int64,
    2>              _Compare=stlpd_std::less<uint64>, 
    2>              _Value=stlpd_std::pair<const uint64,HPowerType>,
    2>              _KeyOfValue=stlpd_std::priv::_Select1st<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _Tp=stlpd_std::pair<const uint64,HPowerType>,
    2>              _Alloc=stlpd_std::allocator<stlpd_std::pair<const uint64,HPowerType>>,
    2>              _KT=PowerTypeMgr::PowerType *
    2>          ]
    2>          c:\cry_v340_3696\code\game\gamedll\monk\powertypemgr.cpp(78) : see reference to function template instantiation 'stlpd_std::priv::_DBG_iter<_Container,_Traits> stlpd_std::map<_Key,_Tp>::find<PowerTypeMgr::PowerType*>(const _KT &)' being compiled
    2>          with
     2>          [
    2>              _Container=stlpd_std::priv::_NonDbg_Rb_tree<unsigned __int64,stlpd_std::priv::_DbgCompare<unsigned __int64,stlpd_std::less<uint64>>,stlpd_std::pair<const uint64,HPowerType>,stlpd_std::priv::_Select1st<stlpd_std::pair<const uint64,HPowerType>>,stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>,stlpd_std::allocator<stlpd_std::pair<const uint64,HPowerType>>>,
    2>              _Traits=stlpd_std::priv::_DbgTraits<stlpd_std::priv::_MapTraitsT<stlpd_std::pair<const uint64,HPowerType>>>,
    2>              _Key=uint64,
    2>              _Tp=HPowerType,
    2>              _KT=PowerTypeMgr::PowerType *
    2>          ]
    2>c:\cry_v340_3696\code\sdks\stlport\stlport\stl\debug\_tree.h(62): error C2664: 'bool stlpd_std::less<_Tp>::operator ()(const _Tp &,const _Tp &) const' : cannot convert parameter 1 from 'PowerTypeMgr::PowerType *const ' to 'const uint64 &'
    2>          with
    2>          [
 2>              _Tp=uint64
 2>          ]
 2>          Reason: cannot convert from 'PowerTypeMgr::PowerType *const ' to 'const uint64'
 2>          There is no context in which this conversion is possible
 2>          c:\cry_v340_3696\code\sdks\stlport\stlport\stl\_tree.h(576) : see reference to function template instantiation 'bool stlpd_std::priv::_DbgCompare<_Key,_Compare>::operator ()<_KT,_Key>(const _Kp1 &,const _Kp2 &) const' being compiled
2>          with
 2>          [
 2>              _Key=unsigned __int64,
 2>              _Compare=stlpd_std::less<uint64>,
 2>              _KT=PowerTypeMgr::PowerType *,
 2>              _Kp1=PowerTypeMgr::PowerType *,
 2>              _Kp2=unsigned __int64
 2>          ]
 2>  PowerWeapon.cpp
  ...' 
```

# sharepoint-2010 - Sharepoint 2010 下拉列表搜索

> ID：12039187
> 
> 赞同：1
> 
> 时间：2012-08-20T14:05:18.497
> 
> 标签：sharepoint-2010

我正在努力在 Sharepoint 2010 中创建一个搜索中心。我很好奇它是否有可能（最好是几个）下拉列表来显示选项并有助于搜索。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:19:37.630

3个选项：

1) 使用搜索精简，虽然这些只会在初始搜索后出现，并且不允许空白搜索。

2) 配置高级搜索页面以允许自定义修饰符。这些是在搜索页面上的高级链接之后找到的，并且允许空白搜索。

3) 编写一个自定义 Web 部件，预先缓存搜索精简程序/自定义修饰符，并将它们显示为默认搜索页面上的潜在可能性。我最近写了其中一个，所以这当然是可能的，尽管它确实需要一些时间并且需要一个支持计时器作业（以确定缓存的潜在搜索选项）。如果您想从我的公司购买它，我相信他们会愿意出售它：）

# java - 获取字符串中的特定数字

> ID：12039194
> 
> 赞同：0
> 
> 时间：2012-08-20T14:05:47.940
> 
> 标签：java, parsing

我正在尝试解析文本并从文本中获取值，例如：

```
Page 1 of 6 
```

我正在考虑使用 java 提取结束编号。所以在这种情况下我的输出应该是 6。

我可以使用任何 java 字符串函数吗？（或）任何其他方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T14:08:46.310

您可以为此使用正则表达式（它比使用例如更安全`String.split`）：

```
public static void main(String[] args) {

    String text = "Page 1 of 6";

    Matcher m = Pattern.compile("Page (\\d+) of (\\d+)").matcher(text);

    if (m.matches()) {
        int page  = Integer.parseInt(m.group(1));
        int pages = Integer.parseInt(m.group(2));

        System.out.printf("parsed page = %d and pages = %d.", page, pages);
    }
} 
```

输出：

```
parsed page = 1 and pages = 6. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T14:07:06.487

像这样的东西：

```
String s = "Page 1 of 6";
String[] values = s.split(" ");
System.out.println(Integer.parseInt(values[values.length - 1])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:09:48.087

我认为这是基本的字符串操作。你能做的就是这个..

```
 String pageNumberString = "Page 1 of 6"; 
    int ofIndex = pageNumberString.indexOf("of"); 
    int pageNumber = Integer.parseInt(pageNumberString.substring(ofIndex + 2)); 
```

我认为这应该有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T14:10:29.183

```
Pattern p = Pattern.compile("(\\d+)$");
Matcher m = p.match("Page 1 of 6");
System.out.println(Integer.parseInt(m.group(1))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:11:50.913

只要您的数字格式保持相似，我就会使用正则表达式。

例如，这个将匹配任何带有 2 个数字的字符串（由任何非数字字符分隔），并捕获 2 个数字。

```
(\d+)[^\d]+(\d+) 
```

注意：这将匹配一些奇怪的东西，比如“Page1of2”。它也不会匹配负数。并不是说您希望得到一个负页码。

# c# - 使用已知名称注册通道，然后通过该已知名称检查和注销它，而不终止其他应用程序通道

> ID：12039195
> 
> 赞同：1
> 
> 时间：2012-08-20T14:05:50.497
> 
> 标签：c#, .net, tcp, remoting

我遇到了应用程序消息传递的问题，......经过一些问答后，我去使用 Remoting 命名空间，在 System.Runtime 命名空间下......

它工作得很好，但问题是当应用程序异常终止时......如果服务器以非方式停止，我注册的频道将保持注册状态，......

我对远程处理或其他相关问题知之甚少……但我检查了一些东西，但没有奏效……

我通过这种方式完成注册的文章，并没有取消注册应用程序，我在服务中使用它，并且似乎服务应用程序主机不会在服务开始停止时关闭......

这是我在服务应用程序中使用的客户端类...

```
using System;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;

namespace Remoting
{
    public class Client
    {
        private RemotableObject remoteObject;

        /// <summary>
        /// Configure Client Class
        /// </summary>
        /// <param name="url">Something like: tcp://localhost:8080/HelloWorld</param>
        public Client(string url)
        {
            TcpChannel chan = new TcpChannel();
            ChannelServices.RegisterChannel(chan);

            remoteObject = (RemotableObject)Activator.GetObject(typeof(RemotableObject), url);
        }

        public void SetMessage(string message)
        {
            remoteObject.SetMessage(message);
        }
    }
} 
```

正如我所注意到的，这篇文章没有向频道提供任何信息，所以我想知道取消注册它我应该如何找到它.....

在服务器APP中，文章最后完成了givin host post

```
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;

namespace Remoting
{
    public abstract class Server:IObserver
    {
        private RemotableObject remotableObject;

        /// <summary>
        /// Configure Server Class
        /// </summary>
        /// <param name="port">port number like: 8080</param>
        /// <param name="url">Object url like: HelloWorld</param>
        public Server(int port, string url)
        {
            remotableObject = new RemotableObject();

            TcpChannel channel = new TcpChannel(port);
            ChannelServices.RegisterChannel(channel);
            RemotingConfiguration.RegisterWellKnownServiceType(typeof(RemotableObject), url, WellKnownObjectMode.Singleton);

            Cache.Attach(this);
        }

        public abstract void Notify(string message);
    }
} 
```

但是，即使我知道我在运行具有相同端口号的应用程序的服务器上启动我的应用程序，我也不想取消注册其他应用程序通道......我该怎么办？

顺便说一句，大多数问题是关于注册频道的客户端，没有信息......我如何检测它？并在服务尝试这样做之前取消注册它并以异常终止？

如果有帮助，这是我已经收到的错误：

> 事件类型：错误
> 事件源：事件阅读器服务
> 事件类别：无
> 事件 ID：0
> 日期：2012 年8 月 20 日
> 时间：下午 5:23:14
> 用户：不适用
> 计算机：HF-SERVER-PC
> 描述：
> 无法启动服务。System.Runtime.Remoting.RemotingException：通道“tcp”已注册。在 System.Runtime.Remoting.Channels.ChannelServices.RegisterChannelInternal(IChannel chnl, Boolean ensureSecurity) 在 System.Runtime.Remoting.Channels.ChannelServices.RegisterChannel(IChannel chnl) 在 Remoting.Client..ctor(String url) 在 FileEventReaderService.Services .Logger.EventLogger..ctor(String source, String logName, String url) at FileEventReaderService.EventReader..ctor(String sqlServer, String instance, String IntegratedSecurityType, String username, String password, String dataBase) at FileEventReaderService.EventReaderService.OnStart( System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback（对象状态）处的字符串 [] 参数）
> 
> 有关详细信息，请参阅 go.microsoft.com/fwlink/... 上的帮助和支持中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:59:34.677

在我的情况下，问题是在同一个实例中多次注册 tcp 通道，所以我创建了一个单例类，并且只设置了一次客户端，而所有其他时间我只是调用了那个实例....

```
using Remoting;

namespace FileEventReaderService.Services.Remotable
{
    class SingletonClient
    {
        private static SingletonClient _instance = new SingletonClient();
        private Client _client = null;

        public static SingletonClient GetSingletonClient()
        {
            return _instance;
        }

        public Client GetClient()
        {
            return _client;
        }

        public void SetClientConfiguration(string url)
        {
            _client=new Client(url);
        }
    }
} 
```

顺便说一句，如果有人需要找到过程......他可以使用这篇文章： [http](http://www.timvw.be/2007/09/09/build-your-own-netstatexe-with-c/) ://www.timvw.be/2007/09/09/build-your-own-netstatexe-with-c/下载演示来源并使用它...

我也以我自己的方式编辑它，你可以使用它：（我没有改变 2 个主类 'TcpTable' 和 'IpHelper'）

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Runtime.InteropServices;
using System.Net.NetworkInformation;
using System.Net;
using System.Diagnostics;
using System.Collections;
using System.IO;

namespace FileEventReaderUI.Services.Network
{
    class NetworkInformation
    {
        public ListenerProcessInformation GetListenerProcessInformationByPort(int port)
        {
            string fileName;
            List<string> processModules=new List<string>();

            foreach (TcpRow tcpRow in ManagedIpHelper.GetExtendedTcpTable(true))
            {
                if (tcpRow.LocalEndPoint.Port.ToString(CultureInfo.InvariantCulture).Equals(
                        port.ToString(CultureInfo.InvariantCulture))
                    && tcpRow.State==TcpState.Listen)
                {
                    Process process = Process.GetProcessById(tcpRow.ProcessId);
                    if (process.ProcessName != "System")
                    {
                        foreach (ProcessModule processModule in process.Modules)
                        {
                            processModules.Add(processModule.FileName);
                        }

                        fileName = Path.GetFileName(process.MainModule.FileName);
                    }
                    else
                    {
                        //Console.WriteLine("  -- unknown component(s) --"); ProcessModules count=0
                        //Console.WriteLine("  [{0}]", "System");
                        fileName = "[System]";
                    }

                    return new ListenerProcessInformation(fileName
                                                          , processModules.ToArray()
                                                          , new IPEndPoint(tcpRow.LocalEndPoint.Address,
                                                                         tcpRow.LocalEndPoint.Port)
                                                          , new IPEndPoint(tcpRow.RemoteEndPoint.Address,
                                                                         tcpRow.RemoteEndPoint.Port)
                                                          , tcpRow.ProcessId
                                                          , tcpRow.State);
                }
            }
            return null;
        }
    }

    #region Managed IP Helper API

    public class TcpTable : IEnumerable<TcpRow>
    {
        #region Private Fields

        private IEnumerable<TcpRow> tcpRows;

        #endregion

        #region Constructors

        public TcpTable(IEnumerable<TcpRow> tcpRows)
        {
            this.tcpRows = tcpRows;
        }

        #endregion

        #region Public Properties

        public IEnumerable<TcpRow> Rows
        {
            get { return this.tcpRows; }
        }

        #endregion

        #region IEnumerable<TcpRow> Members

        public IEnumerator<TcpRow> GetEnumerator()
        {
            return this.tcpRows.GetEnumerator();
        }

        #endregion

        #region IEnumerable Members

        IEnumerator IEnumerable.GetEnumerator()
        {
            return this.tcpRows.GetEnumerator();
        }

        #endregion
    }

    public class TcpRow
    {
        #region Private Fields

        private IPEndPoint localEndPoint;
        private IPEndPoint remoteEndPoint;
        private TcpState state;
        private int processId;

        #endregion

        #region Constructors

        public TcpRow(IpHelper.TcpRow tcpRow)
        {
            this.state = tcpRow.state;
            this.processId = tcpRow.owningPid;

            int localPort = (tcpRow.localPort1 << 8) + (tcpRow.localPort2) + (tcpRow.localPort3 << 24) + (tcpRow.localPort4 << 16);
            long localAddress = tcpRow.localAddr;
            this.localEndPoint = new IPEndPoint(localAddress, localPort);

            int remotePort = (tcpRow.remotePort1 << 8) + (tcpRow.remotePort2) + (tcpRow.remotePort3 << 24) + (tcpRow.remotePort4 << 16);
            long remoteAddress = tcpRow.remoteAddr;
            this.remoteEndPoint = new IPEndPoint(remoteAddress, remotePort);
        }

        #endregion

        #region Public Properties

        public IPEndPoint LocalEndPoint
        {
            get { return this.localEndPoint; }
        }

        public IPEndPoint RemoteEndPoint
        {
            get { return this.remoteEndPoint; }
        }

        public TcpState State
        {
            get { return this.state; }
        }

        public int ProcessId
        {
            get { return this.processId; }
        }

        #endregion
    }

    public static class ManagedIpHelper
    {
        #region Public Methods

        public static TcpTable GetExtendedTcpTable(bool sorted)
        {
            List<TcpRow> tcpRows = new List<TcpRow>();

            IntPtr tcpTable = IntPtr.Zero;
            int tcpTableLength = 0;

            if (IpHelper.GetExtendedTcpTable(tcpTable, ref tcpTableLength, sorted, IpHelper.AfInet, IpHelper.TcpTableType.OwnerPidAll, 0) != 0)
            {
                try
                {
                    tcpTable = Marshal.AllocHGlobal(tcpTableLength);
                    if (IpHelper.GetExtendedTcpTable(tcpTable, ref tcpTableLength, true, IpHelper.AfInet, IpHelper.TcpTableType.OwnerPidAll, 0) == 0)
                    {
                        IpHelper.TcpTable table = (IpHelper.TcpTable)Marshal.PtrToStructure(tcpTable, typeof(IpHelper.TcpTable));

                        IntPtr rowPtr = (IntPtr)((long)tcpTable + Marshal.SizeOf(table.length));
                        for (int i = 0; i < table.length; ++i)
                        {
                            tcpRows.Add(new TcpRow((IpHelper.TcpRow)Marshal.PtrToStructure(rowPtr, typeof(IpHelper.TcpRow))));
                            rowPtr = (IntPtr)((long)rowPtr + Marshal.SizeOf(typeof(IpHelper.TcpRow)));
                        }
                    }
                }
                finally
                {
                    if (tcpTable != IntPtr.Zero)
                    {
                        Marshal.FreeHGlobal(tcpTable);
                    }
                }
            }

            return new TcpTable(tcpRows);
        }

        #endregion
    }

    #endregion

    #region P/Invoke IP Helper API

    /// <summary>
    /// <see cref="http://msdn2.microsoft.com/en-us/library/aa366073.aspx"/>
    /// </summary>
    public static class IpHelper
    {
        #region Public Fields

        public const string DllName = "iphlpapi.dll";
        public const int AfInet = 2;

        #endregion

        #region Public Methods

        /// <summary>
        /// <see cref="http://msdn2.microsoft.com/en-us/library/aa365928.aspx"/>
        /// </summary>
        [DllImport(IpHelper.DllName, SetLastError = true)]
        public static extern uint GetExtendedTcpTable(IntPtr tcpTable, ref int tcpTableLength, bool sort, int ipVersion, TcpTableType tcpTableType, int reserved);

        #endregion

        #region Public Enums

        /// <summary>
        /// <see cref="http://msdn2.microsoft.com/en-us/library/aa366386.aspx"/>
        /// </summary>
        public enum TcpTableType
        {
            BasicListener,
            BasicConnections,
            BasicAll,
            OwnerPidListener,
            OwnerPidConnections,
            OwnerPidAll,
            OwnerModuleListener,
            OwnerModuleConnections,
            OwnerModuleAll,
        }

        #endregion

        #region Public Structs

        /// <summary>
        /// <see cref="http://msdn2.microsoft.com/en-us/library/aa366921.aspx"/>
        /// </summary>
        [StructLayout(LayoutKind.Sequential)]
        public struct TcpTable
        {
            public uint length;
            public TcpRow row;
        }

        /// <summary>
        /// <see cref="http://msdn2.microsoft.com/en-us/library/aa366913.aspx"/>
        /// </summary>
        [StructLayout(LayoutKind.Sequential)]
        public struct TcpRow
        {
            public TcpState state;
            public uint localAddr;
            public byte localPort1;
            public byte localPort2;
            public byte localPort3;
            public byte localPort4;
            public uint remoteAddr;
            public byte remotePort1;
            public byte remotePort2;
            public byte remotePort3;
            public byte remotePort4;
            public int owningPid;
        }

        #endregion
    }

    #endregion
} 
```

以及我用来填充的实体类...

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Net;
using System.Net.NetworkInformation;
using System.Text;

namespace FileEventReaderUI.Services.Network
{
    class ListenerProcessInformation
    {
        private string _fileName;
        private string[] _processModules;
        private IPEndPoint _localEndPoint;
        private IPEndPoint _remoteEndPoint;
        private int _processId;
        private TcpState _state;

        public ListenerProcessInformation(string fileName, string[] processModules, IPEndPoint localEndPoint, IPEndPoint remoteEndPoint, int processId, TcpState state)
        {
            _fileName = fileName;
            _processModules = processModules;
            _localEndPoint = localEndPoint;
            _remoteEndPoint = remoteEndPoint;
            _processId = processId;
            _state = state;
        }

        public string FileName
        {
            get { return _fileName; }
        }

        public string[] ProcessModules
        {
            get { return _processModules; }
        }

        public IPEndPoint LocalEndPoint
        {
            get { return _localEndPoint; }
        }

        public IPEndPoint RemoteEndPoint
        {
            get { return _remoteEndPoint; }
        }

        public int ProcessId
        {
            get { return _processId; }
        }

        public TcpState State
        {
            get { return _state; }
        }
    }
} 
```

# vb.net - VB.net 自定义文本框

> ID：12039198
> 
> 赞同：0
> 
> 时间：2012-08-20T14:05:57.173
> 
> 标签：vb.net, textbox

我正在使用一个自定义文本框控件，该控件在此框中没有 Text.Split() 函数我输入以下格式的字符串：“35 To 99”，现在这是我的代码，我知道它错了，我的编程技巧是有限的

```
 Dim v1 As Int32
    Dim v2 As Int32
    Dim rule As New String("{0} To {1}", v1, v2) = TextBox1.Text
    MsgBox(v1 & " " & v2) 
```

换句话说，您将如何获得此字符串“35 To 99”中的 nubers 将每个分配给一个没有 Text.Split() 的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:21:32.383

`Split`是`String`类的方法，而不是`TextBox`类。因此，无论您从哪里获取字符串，无论是来自文本框、自定义控件、文件还是其他任何地方，都可以使用该`String.Split`方法来拆分它。例如：

```
Dim v1 As Int32
Dim v2 As Int32
Dim rule As String = TextBox1.Text
Dim parts() As String = rule.Split(New String() {" To "}, StringSplitOptions.None)
v1 = Integer.Parse(parts(0))
v2 = Integer.Parse(parts(1))
MessageBox.Show(v1 & " " & v2) 
```

或者，更简洁：

```
' ...
Dim parts() As String = TextBox1.Text.Split(New String() {" To "}, StringSplitOptions.None)
' ... 
```

要使拆分不区分大小写，只需在拆分之前对整个字符串强制使用一种或另一种方式，例如：

```
Dim parts() As String = TextBox1.Text.ToLower().Split(New String() {" to "}, StringSplitOptions.None) 
```

或者

```
Dim parts() As String = TextBox1.Text.ToUpper().Split(New String() {" TO "}, StringSplitOptions.None) 
```

# jquery - 从另一个函数调用 var

> ID：12039199
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:05:58.277
> 
> 标签：jquery

我需要从另一个函数调用 id 值这里的代码

```
$("p").hover(function() {
    var i = $(this).text();
    $("#o").show();
}, function() {
    $("#o").delay(2000).fadeOut("slow");
});
$("#o").click(function() {
    $(".display").append(i);
});​ 
```

我需要在“.display”类 div 上显示“i”值。任何人都可以帮助我请..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:07:15.503

只需`i`在外面声明..

```
var i = '';
$("p").hover(function() {
   i = $(this).text();
   $("#o").show();
}, 
function() {
   $("#o").delay(2000).fadeOut("slow");
});

$("#o").click(function() {
   $(".display").append(i);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:09:39.360

为了补充 Vega 的答案，我会将它包装在一个匿名函数中以避免污染全局范围。

```
(function() {
    var i = '';
    $("p").hover(function() {
        i = $(this).text();
        $("#o").show();
    }, function() {
        $("#o").delay(2000).fadeOut("slow");
    });
    $("#o").click(function() {
        $(".display").append(i);
    });​

})(); 
```

在外部函数返回后，内部回调函数仍然可以访问该变量，因为 javascript 有一个很好的东西叫做[闭包](http://jibbering.com/faq/notes/closures/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:10:32.557

创建一个闭包而不是全局变量...

```
(function (i) {

    $("p").hover(function() {
       i = $(this).text();
        $("#o").show();
    }, function() {
        $("#o").delay(2000).fadeOut("slow");
    });

    $("#o").click(function() {
        $(".display").append(i);
    });​

}("")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:11:29.833

通过将 i 移到函数之外，只需使用变量范围即可。

```
var i;
$("p").hover(function() {
    i = $(this).text();
    $("#o").show();
}, function() {
    $("#o").delay(2000).fadeOut("slow");
});
$("#o").click(function() {
    $(".display").append(i);
}); 
```

# git - git仓库并发访问

> ID：12039205
> 
> 赞同：2
> 
> 时间：2012-08-20T14:06:35.503
> 
> 标签：git, git-svn

有一个 git 存储库，它`git svn fetch`在固定时间段（例如 1 小时）内从 svn ( ) 更新。fetch 完成后，每个分支 from`refs/heads`都会更新为对应的分支 from `refs/remotes`。svn 分支`refs/heads`仅在此更新过程中更新，其他人没有对它们的写访问权。

我想知道在 svn 更新过程中是否有可能损坏存储库访问它？例如克隆整个存储库，从中获取最新更改或推送（而不是 svn 分支）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:46:48.830

根据个人经验，我公司使用 SVN 存储库作为主要存储库，每 20 分钟对 SVN 存储库产生新的修订。

运行`git-svn`命令时，它会记住`git-svn`开始运行的脚本的最后一个版本。例如，如果 svn 存储库产生了新修订，则新修订将不会被提取到 Git 存储库。下次运行`git svn fetch`命令时，它将获取到 git 存储库。

我面临的最大问题是，我关闭了`git svn fetch`仍在运行的笔记本电脑，但我不会注意到它，因为它是任务调度程序中的后台进程。因此，在这种情况下，它可能在 git 存储库中有锁定文件。如果发生了锁定文件，则在您删除 git 存储库中的锁定文件之前，它将无法运行`git svn fetch`，因为可能会显示错误消息。

# spring - 如何根据条件决定属性在 Spring bean 中采用的值。

> ID：12039206
> 
> 赞同：1
> 
> 时间：2012-08-20T14:06:44.367
> 
> 标签：spring

我可以根据枚举的外部值（例如 ContentType.docType.equals("regtext") ELSE 是否将其设置为 y ）将“contentCaptureRegEx”的属性设置为正则表达式“x”。

所以， if(ContentType.docType.equals("regtext")) 构造函数-arg 是 x 否则构造函数-arg 是 y

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:29:52.390

你可以用[Spring Expression Language (SpEL)](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html)来做类似的事情。

有一个专门的章节几乎完全符合您的要求：

> [7.4 定义bean定义的表达式支持](http://atic.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-beandef)

# php - 使用 Sphinxsearch 计算百分比

> ID：12039207
> 
> 赞同：-2
> 
> 时间：2012-08-20T14:06:46.123
> 
> 标签：php, sphinx

使用[Sphinxsearch](http://sphinxsearch.com/)，我如何显示与结果匹配的关键字的百分比？

例如，我的用户表中有这两行：

```
Paul Smith, Belgium
Maher AbouAbbas, Russian Federation 
```

如果查询是“Maher Russian Belgium”，我想显示：

```
[33%] Paul Smith, Belgium (Belgium matches)
[66%] Maher AbouAbbas, Russian Federation (Maher and Russian matches) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:28:10.560

首先想到的一个基本示例是简单地返回结果，然后分解它们并检查查询字符串中的每个单词（也是分解的），以计算在项目中找到的单词在查询字符串中的百分比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:13:39.700

看看[这个](http://sphinxsearch.com/forum/view.html?id=827)。也许这就是你正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:21:29.417

您可能想查看 Levenshtein 字符串距离算法，该算法在 PHP 中本地实现：http: [//php.net/levenshtein](http://php.net/levenshtein)

# android - 标记未显示在地图上

> ID：12039214
> 
> 赞同：1
> 
> 时间：2012-08-20T14:07:19.733
> 
> 标签：android, google-maps, android-mapview

我正在使用以下代码在用户的当前位置上显示一个标记。但标记永远不会出现，代码显示正确的当前位置。

```
 mapview.setClickable(true);
    mapview.setBuiltInZoomControls(true);
    mapview.setSatellite(false);
    mapControl = mapview.getController();
    mapControl.setZoom(12);

    myLocationOverlay = new MyLocationOverlay(this, mapview);
    mapview.getOverlays().add(myLocationOverlay);

    LocationResult locationResult = new LocationResult() {
        @Override
        public void gotLocation(Location location) {

            List<Overlay> overlays = mapview.getOverlays();
            overlays.clear();

            latE6 = (int) (location.getLatitude() * 1e6);
            lonE6 = (int) (location.getLongitude() * 1e6);

            String a = String.valueOf(latE6);
            String b = String.valueOf(lonE6);

            gp = new GeoPoint(latE6, lonE6);
            mapControl.setZoom(12);
            mapControl.animateTo(gp);

            MapOverlay mapOverlay = new MapOverlay(getResources()
                    .getDrawable(R.drawable.pingreen));
            OverlayItem overlayItem = new OverlayItem(new GeoPoint(latE6,
                    lonE6), a, b);
            mapOverlay.addOverlay(overlayItem);
            overlays.add(mapOverlay);
            mapview.invalidate();
        }
    };
    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
protected void onResume() {
    myLocationOverlay.enableCompass();
    myLocationOverlay.enableMyLocation();
    super.onResume();
}

@Override
protected void onPause() {
    myLocationOverlay.disableCompass();
    myLocationOverlay.disableMyLocation();
    super.onPause();
}

public class MapOverlay extends ItemizedOverlay<OverlayItem> {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MapOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);

        AlertDialog.Builder dialog = new AlertDialog.Builder(
                PickUpLocation.this);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());

        dialog.show();

        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        if (event.getAction() == 1) {
            GeoPoint p = mapView.getProjection().fromPixels(
                    (int) event.getX(), (int) event.getY());
            Toast.makeText(
                    getBaseContext(),
                    p.getLatitudeE6() / 1E6 + "," + p.getLongitudeE6()
                            / 1E6, Toast.LENGTH_SHORT).show();
            mapView.getOverlays().add(new MarkerOverlay(p));
            mapView.invalidate();
        }
        return false;
    }
}

class MarkerOverlay extends Overlay {
    private GeoPoint p;

    public MarkerOverlay(GeoPoint p) {
        this.p = p;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);

        // ---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        // ---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.pingreen);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 50, null);

        return true;
    }
} 
```

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:55:31.273

在模拟器上，您可以使用 DDMS 发送模拟位置。否则，请使用真实设备。

# javascript - 测量全局命名空间的污染

> ID：12039217
> 
> 赞同：12
> 
> 时间：2012-08-20T14:07:28.110
> 
> 标签：javascript, namespaces, refactoring

### 背景

我正在尝试重构一些又长又丑的 Javascript（*可耻的是，这是我自己的*）。我开始学习 Javascript 时就开始了这个项目；这是一次很棒的学习经历，但我的代码中有一些垃圾，我采用了一些相当糟糕的做法，其中主要是对全局命名空间/对象（在我的例子中是`window`对象）的严重污染。在我努力减轻上述污染的过程中，我认为测量它会有所帮助。

### 方法

我的直觉是`window`在加载任何代码之前，在加载第三方库之后以及最后在我的代码执行之后，简单地计算附加到对象的对象数量。然后，当我重构时，我会尝试减少与加载我的代码相对应的增加）。为此，我正在使用：

`console.log(Object.keys(window).length)`

在我的代码中的各个地方。这似乎工作*正常*，我看到这个数字在增加，特别是在我自己的代码被加载之后。但...

### 问题

仅通过在`window`Chrome 开发者控制台中查看对象的内容，我可以看到它没有计算附加到对象的所有内容。我怀疑它不包括一些更基本的属性或对象类型，无论它们属于浏览器、库还是我自己的代码。不管怎样，谁能想到一种更好、更准确的方法来测量全局命名空间污染，这将有助于重构？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T19:57:20.277

[因此，在Felix Kling](https://stackoverflow.com/users/218196/felix-kling)和[Lèse majesté](https://stackoverflow.com/users/370940/lese-majeste)留下一些评论之后，我找到了一个行之有效的解决方案。在加载任何库或我自己的代码之前，我创建了`dashboard`全局对象（我唯一有意的）并存储了一个附加到的对象列表`window`：

```
var dashboard = {
    cache: {
        load: Object.getOwnPropertyNames(window)
    }
}; 
```

然后，在我加载了所有库之后，但在加载我自己的任何代码之前，我修改了`dashboard`对象，添加了`pollution`方法（在新的`debug`命名空间中）：

```
dashboard.debug = {
    pollution: (function() {
        var pollution,                                     
            base = cache.load, // window at load         
            filter = function(a,b) { // difference of two arrays
                return a.filter(function(i) {
                    return !(b.indexOf(i) > -1);
                });
            },                          
            library = filter(Object.getOwnPropertyNames(window), base), 
            custom = function() { 
                return filter(Object.getOwnPropertyNames(window),
                        base.concat(library)); 
            };       

        delete cache.load;

        pollution = function() {
            console.log('Global namespace polluted with:\n ' + 
                    custom().length + ' custom objects \n ' +
                    library.length + ' library objects');

            return {custom: custom().sort(), library: library.sort()};
        };

        return pollution;
    }())  
}; 
```

在任何时候，我都可以从控制台调用此方法并查看

> 被污染的全局命名空间：
> 53 个自定义对象
> 44 个库对象

以及列出与这些对象关联的键的两个数组。`base`和快照是静态的`library`，而当前的自定义测量（通过`custom`）是动态的，因此如果我要通过 AJAX 加载任何自定义 javascript，那么我可以重新测量并查看任何新的自定义“污染”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T18:18:23.727

根据经验，您选择的一般模式可以正常工作。但是，您可能需要考虑两件事（作为补充或替代）：

1.  将[JsLint.com](http://www.jslint.com/)或[JSHint.com](http://www.jshint.com)与您现有的代码一起使用，并查看产生的错误。它应该可以帮助您快速轻松地发现大多数（如果不是全部）全局变量的使用（例如，您会看到“未定义”变量的错误）。这是一个非常简单的方法。因此，在这种情况下，测量将只查看问题的总数。
2.  我们发现 Chrome 可以使检测窗口对象上的泄漏资源变得棘手（因为在运行页面的过程中添加了一些东西）。例如，我们需要检查返回的某些属性是否是原生的，方法是使用 RegEx:`/\s*function \w*\(\) {\s*\[native code\]\s*}\s*/`来发现原生代码。在我们编写的一些代码“泄漏检测”代码中，我们还尝试（在 try catch 中）获取属性的值以验证它是否设置为一个值（而不仅仅是未定义）。但是，在您的情况下，这不应该是必要的。

# javascript - 自动完成：仅当用户在 Tab 键上键入时才聚焦第一项

> ID：12039219
> 
> 赞同：1
> 
> 时间：2012-08-20T14:07:33.057
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

通过使用`jqueryUi` `autocomplete`我希望第一个项目仅在用户键入时自动聚焦`tab key`。
我应该如何执行此任务？
用指定的初始化自动完成`autoFocus` `option` `true`不符合我的目的！

有任何想法吗？

* * *

这是我的代码。
请参阅评论以获取更多详细信息。

```
 element.autocomplete({
        minLength: 3,
        // the following option "autoFocus = true"
        // make the first item focused when the user type the first 3 letters
        // I would like the first item focused only when I type on TAB 
        autoFocus: false,
        source: function (request, response) {
            // some code
        }
    }).data('autocomplete')._renderItem = renderItem;

    // the following piece of code works only when I type the first three letters,
    // If I type four letters and then tab it does not work!
    element.on('keyup', function (event) {
        if (event.keyCode === 9) {
            element.autocomplete( "option", "autoFocus", true );
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:52:48.413

是的，自动对焦不会做你想做的事。相反，您可以伪造用户在想要选择项目时通常必须执行的按键操作。

```
element.keydown(function(e){
   if( e.keyCode != $.ui.keyCode.TAB ) return; // only pay attention to tabs

   e.keyCode = $.ui.keyCode.DOWN;   // fake a down error press
   $(this).trigger(e);

   e.keyCode = $.ui.keyCode.ENTER;  // fake select the item
   $(this).trigger(e);
}); 
```

演示：http: [//jsfiddle.net/uymYJ/8/](http://jsfiddle.net/uymYJ/8/)

# assembly - 如何使用十六进制编辑器更改指令？

> ID：12039220
> 
> 赞同：5
> 
> 时间：2012-08-20T14:07:37.860
> 
> 标签：assembly, hex, reverse-engineering, instructions, ida

我在搞一些逆向工程，但我不知道如何使用十六进制编辑器将 jnz 更改为 jz。我知道它会因系统而异，但我不确定在哪里可以找到这些信息。我正在使用 Mac OS X 64 位，并使用 IDA Pro 反汇编代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T14:28:42.267

如果您找到了`jz`，它将看起来像`74 XX`或`0F 84 XX XX XX XX`。如果是`74`，请将其更改为`75`。如果是带有 的`84`，请将其更改为`85`。此信息可在英特尔手册（第 2A 卷）等其他地方找到。

它不会因系统而异，只要它们都是基于 x86 的，如果它们不是那么`jz`甚至`jnz`可能不存在..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:43:14.273

我假设这样做的正确方法是找出感兴趣指令的操作码（操作码）。由于您对 jz 和 jnz 指令感兴趣，我推断您在 Intel x86-64 机器上。这意味着您需要查看英特尔的参考资料[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。我相信，您可能会在此处找到有关英特尔 64 位程序集的所有信息。您将能够在任何地方应用这些知识，例如，在十六进制编辑器中编辑操作码。

# facebook - Facebook FQL 结果集不匹配

> ID：12039227
> 
> 赞同：0
> 
> 时间：2012-08-20T14:08:17.590
> 
> 标签：facebook, facebook-fql

当我同时在两个 Graph API 资源管理器窗口中运行以下 FQL 查询时，我得到两个不同的结果集：

```
SELECT 
    post_id, 
    actor_id, 
    target_id, 
    created_time, 
    type, 
    permalink, 
    message, 
    description, 
    attachment 
FROM stream    
WHERE filter_key IN (SELECT filter_key 
                    FROM stream_filter 
                    WHERE uid=me() AND type='newsfeed') 
ORDER BY created_time ASC 
LIMIT 50 
```

以下是不同之处：

1.  第一个结果集一开始有一些额外的帖子，而第二个结果集最后有一些额外的帖子（我在 FQL 中使用 ORDER BY created_time ASC。）
2.  其中一个帖子在第一个结果集中有一个空的永久链接，而它在第二个结果集中存在。
3.  第一个结果集中没有出现在第二个结果集中的帖子很少，反之亦然。

这是因为 Facebook 服务器场内的负载平衡吗？如何确保他们获得所有可以通过 API 在用户的新闻源上看到的帖子？

# objective-c - 为什么 UIPinchGestureRecognizer 无法接收已结束状态？

> ID：12039228
> 
> 赞同：0
> 
> 时间：2012-08-20T14:08:19.647
> 
> 标签：objective-c, ios, uigesturerecognizer, uipinchgesturerecognizer

我有 4 个手势识别器用于 1 个视图。

```
- (void)createGestureRecognizers {
UITapGestureRecognizer *singleFingerSingleTap = [[UITapGestureRecognizer alloc]
                                                 initWithTarget:self action:@selector(handleSingleFingerSingleTap:)];
singleFingerSingleTap.numberOfTapsRequired = 1;
[self.panelController.view addGestureRecognizer:singleFingerSingleTap];

UITapGestureRecognizer *singleFingerDoubleTap = [[UITapGestureRecognizer alloc]
                                                 initWithTarget:self action:@selector(handleSingleFingerDoubleTap:)];
singleFingerDoubleTap.numberOfTapsRequired = 2;
[self.panelController.view addGestureRecognizer:singleFingerDoubleTap];

[singleFingerSingleTap requireGestureRecognizerToFail:singleFingerDoubleTap];

[singleFingerSingleTap release];
[singleFingerDoubleTap release];

UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc]
                                      initWithTarget:self action:@selector(handlePanGesture:)];
[self.panelController.view addGestureRecognizer:panGesture];
[panGesture release];

UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc]
                                          initWithTarget:self action:@selector(handlePinchGesture:)];
[self.panelController.view addGestureRecognizer:pinchGesture];
[pinchGesture release];} 
```

我需要处理 UIPinchGestureRecognizer 的结束状态，但有时它的最后一个状态已更改，而不是应如何结束。有人知道为什么吗？我尝试玩 setDelaysTouchesEnded: 但没有:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:24:28.933

捏合手势是两根手指的手势，因此有时您的一根手指会留在屏幕上，而另一根手指已经抬起。所以，我的建议是处理`UIGestureRecognizerStateCancelled`和`UIGestureRecognizerStateFailed`以及`UIGestureRecognizerStateEnded`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:45:56.623

这与 的问题相同`UIRotationGestureRecognizer`，它会触发每个动作并在您停止时停止，但它不会告诉您 - 嘿用户移开手指，这个动作结束了。

这是因为它是一个连续的手势，而不是一个简单的手势。

你也应该处理`UIGestureRecognizerStateEnded`。

# c# - 如何将字符串转换为 Windows 窗体标签中的当前文化？

> ID：12039229
> 
> 赞同：-2
> 
> 时间：2012-08-20T14:08:25.083
> 
> 标签：c#, .net, winforms

如何将字符串转换为 Windows 窗体标签中的当前文化？

```
 Format of the text to be displayed:
    <string in current culture> <string in english>

    ex: <welcome in dutch\french\chineese> <User ID in english>
---------------    
    string userid = "A123#"
    string str = String.Format(System.Threading.Thread.CurrentThread.CurrentUICulture, "{0} ", "Welcome");
    this.myLabel.Text =  str + userid ;
--------------- 
```

我们该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T16:21:24.443

因此，内置您不会获得翻译，但一种方法是依靠 ResourceManager 通过查找要为每种文化显示的存储字符串来为您处理此问题。对于您要显示的每种语言，您可以创建一个资源文件，其中包含文化值作为名称的一部分 - 类似于：

```
myLangResource.es-CO.resx
myLangResource.fr-CA.resx
myLangResource.en-US.resx 
```

只需为您关心的每种语言在您的项目中添加一个类型为 Resource File 的新项目，然后存储您关心翻译的字符串。这些将包含名称和值，您的代码将查找这些名称和值以检索适当的字符串。就像是

```
Name       Value
-----------------
Welcome    Howdy 
```

或者

```
Name       Value
-----------------
Welcome    Bienvenido 
```

然后，本质上，您创建了一个 CultureInfo 成员：

```
private CultureInfo curCulture; 
```

然后将其设置为当前文化，如下所示：

```
curCulture = CultureInfo.CurrentCulture; 
```

然后，您将通过`ResourceManager`对象加载适当的资源以获取适当的字符串。像这样：

```
var resourceManager = new ResourceManager("MyNamespace.myLangResource", typeof(DemoForm).Assembly);
string greeting = resourceManager.GetString("Welcome", curCulture);
// show the greeting however you want such as
myLabel.Text = greeting; 
```

假设您出于某种原因想要更改当前的文化值。资源查找不需要名称的“es-CO”或“fr-CA”或“en-US”部分。它会自动尝试通过查找具有匹配名称的资源文件来为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:28:41.490

自动魔术翻译不存在。

您可以：

*   翻译服务查询
*   将您自己的字典/翻译引擎与您的代码一起使用
*   正确本地化您的应用程序（提供多个版本的资源并相应地使用它们）。

# python - 在 Python 中加载大文件

> ID：12039235
> 
> 赞同：13
> 
> 时间：2012-08-20T14:08:54.833
> 
> 标签：python

我正在使用在 Ubuntu 9.04 上运行的 Python 2.6.2 [GCC 4.3.3]。我需要使用 Python 脚本逐行读取一个大数据文件（~1GB，>300 万行）。

我尝试了以下方法，我发现它使用了非常大的内存空间（~3GB）

```
for line in open('datafile','r').readlines():
   process(line) 
```

或者，

```
for line in file(datafile):
   process(line) 
```

有没有更好的方法来逐行加载一个大文件，比如说

*   a）通过明确提及文件可以在内存中的任何时间加载的最大行数？或者
*   b）通过按大小（例如 1024 字节）的块加载它，前提是所述块的最后一行完全加载而不被截断？

一些建议给出了我上面提到的方法并且已经尝试过，我正在尝试看看是否有更好的方法来处理这个问题。到目前为止，我的搜索还没有取得成果。我感谢您的帮助。

p/s 我已经使用了一些内存分析`Heapy`，发现我正在使用的 Python 代码中没有内存泄漏。

**更新 2012 年 8 月 20 日，16:41 (GMT+1)**

按照 JF Sebastian、mgilson 和 IamChuckB 的建议尝试了两种方法（数据文件是一个变量）

```
with open(datafile) as f:
    for line in f:
        process(line) 
```

还，

```
import fileinput
for line in fileinput.input([datafile]):
    process(line) 
```

奇怪的是，它们都使用了大约 3GB 的内存，我在这个测试中的数据文件大小是 765.2MB，由 21,181,079 行组成。我看到内存在稳定在 3GB 之前随时间增加（大约 40-80MB 步长）。

一个基本的疑问，使用后是否需要冲洗线路？

为了更好地理解这一点，我使用 Heapy 进行了内存分析。

**1 级分析**

```
Partition of a set of 36043 objects. Total size = 5307704 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0  15934  44  1301016  25   1301016  25 str
     1     50   0   628400  12   1929416  36 dict of __main__.NodeStatistics
     2   7584  21   620936  12   2550352  48 tuple
     3    781   2   590776  11   3141128  59 dict (no owner)
     4     90   0   278640   5   3419768  64 dict of module
     5   2132   6   255840   5   3675608  69 types.CodeType
     6   2059   6   247080   5   3922688  74 function
     7   1716   5   245408   5   4168096  79 list
     8    244   1   218512   4   4386608  83 type
     9    224   1   213632   4   4600240  87 dict of type
<104 more rows. Type e.g. '_.more' to view.> 
```

==================================================== ==========

**级别 1 索引 0 的级别 2 分析**

```
Partition of a set of 15934 objects. Total size = 1301016 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0   2132  13   274232  21    274232  21 '.co_code'
     1   2132  13   189832  15    464064  36 '.co_filename'
     2   2024  13   114120   9    578184  44 '.co_lnotab'
     3    247   2   110672   9    688856  53 "['__doc__']"
     4    347   2    92456   7    781312  60 '.func_doc', '[0]'
     5    448   3    27152   2    808464  62 '[1]'
     6    260   2    15040   1    823504  63 '[2]'
     7    201   1    11696   1    835200  64 '[3]'
     8    188   1    11080   1    846280  65 '[0]'
     9    157   1     8904   1    855184  66 '[4]'
<4717 more rows. Type e.g. '_.more' to view.> 
```

**1 级索引 1 的 2 级分析**

```
Partition of a set of 50 objects. Total size = 628400 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0     50 100   628400 100    628400 100 '.__dict__' 
```

**1 级索引 2 的 2 级分析**

```
Partition of a set of 7584 objects. Total size = 620936 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0   1995  26   188160  30    188160  30 '.co_names'
     1   2096  28   171072  28    359232  58 '.co_varnames'
     2   2078  27   157608  25    516840  83 '.co_consts'
     3    261   3    21616   3    538456  87 '.__mro__'
     4    331   4    21488   3    559944  90 '.__bases__'
     5    296   4    20216   3    580160  93 '.func_defaults'
     6     55   1     3952   1    584112  94 '.co_freevars'
     7     47   1     3456   1    587568  95 '.co_cellvars'
     8     35   0     2560   0    590128  95 '[0]'
     9     27   0     1952   0    592080  95 '.keys()[0]'
<189 more rows. Type e.g. '_.more' to view.> 
```

**1 级索引 3 的 2 级分析**

```
Partition of a set of 781 objects. Total size = 590776 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0      1   0    98584  17     98584  17 "['locale_alias']"
     1     29   4    35768   6    134352  23 '[180]'
     2     28   4    34720   6    169072  29 '[90]'
     3     30   4    34512   6    203584  34 '[270]'
     4     27   3    33672   6    237256  40 '[0]'
     5     25   3    26968   5    264224  45 "['data']"
     6      1   0    24856   4    289080  49 "['windows_locale']"
     7     64   8    20224   3    309304  52 "['inters']"
     8     64   8    17920   3    327224  55 "['galog']"
     9     64   8    17920   3    345144  58 "['salog']"
<84 more rows. Type e.g. '_.more' to view.> 
```

==================================================== ==========

**级别 2-索引 0、级别 1-索引 0 的级别 3 分析**

```
Partition of a set of 2132 objects. Total size = 274232 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0   2132 100   274232 100    274232 100 '.co_code' 
```

**级别 2-索引 0、级别 1-索引 1 的级别 3 分析**

```
Partition of a set of 50 objects. Total size = 628400 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0     50 100   628400 100    628400 100 '.__dict__' 
```

**级别 2-索引 0、级别 1-索引 2 的级别 3 分析**

```
Partition of a set of 1995 objects. Total size = 188160 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0   1995 100   188160 100    188160 100 '.co_names' 
```

**级别 2-索引 0、级别 1-索引 3 的级别 3 分析**

```
Partition of a set of 1 object. Total size = 98584 bytes.
 Index  Count   %     Size   % Cumulative  % Referred Via:
     0      1 100    98584 100     98584 100 "['locale_alias']" 
```

仍在解决此问题。

如果您以前遇到过这种情况，请与我分享。

谢谢你的帮助。

**更新 2012 年 8 月 21 日，01:55 (GMT+1)**

1.  mgilson，process 函数用于对 Network Simulator 2 (NS2) 跟踪文件进行后处理。跟踪文件中的某些行共享如下。我在 python 脚本中使用了大量的对象、计数器、元组和字典来了解无线网络的性能。

> ```
> s 1.231932886 _25_ AGT  --- 0 exp 10 [0 0 0 0 Y Y] ------- [25:0 0:0 32 0 0] 
> s 1.232087886 _25_ MAC  --- 0 ARP 86 [0 ffffffff 67 806 Y Y] ------- [REQUEST 103/25 0/0]
> r 1.232776108 _42_ MAC  --- 0 ARP 28 [0 ffffffff 67 806 Y Y] ------- [REQUEST 103/25 0/0]
> r 1.232776625 _34_ MAC  --- 0 ARP 28 [0 ffffffff 67 806 Y Y] ------- [REQUEST 103/25 0/0]
> r 1.232776633 _9_ MAC  --- 0 ARP 28 [0 ffffffff 67 806 Y Y] ------- [REQUEST 103/25 0/0]
> r 1.232776658 _0_ MAC  --- 0 ARP 28 [0 ffffffff 67 806 Y Y] ------- [REQUEST 103/25 0/0]
> r 1.232856942 _35_ MAC  --- 0 ARP 28 [0 ffffffff 64 806 Y Y] ------- [REQUEST 100/25 0/0]
> s 1.232871658 _0_ MAC  --- 0 ARP 86 [13a 67 1 806 Y Y] ------- [REPLY 1/0 103/25]
> r 1.233096712 _29_ MAC  --- 0 ARP 28 [0 ffffffff 66 806 Y Y] ------- [REQUEST 102/25 0/0]
> r 1.233097047 _4_ MAC  --- 0 ARP 28 [0 ffffffff 66 806 Y Y] ------- [REQUEST 102/25 0/0]
> r 1.233097050 _26_ MAC  --- 0 ARP 28 [0 ffffffff 66 806 Y Y] ------- [REQUEST 102/25 0/0]
> r 1.233097051 _1_ MAC  --- 0 ARP 28 [0 ffffffff 66 806 Y Y] ------- [REQUEST 102/25 0/0]
> r 1.233109522 _25_ MAC  --- 0 ARP 28 [13a 67 1 806 Y Y] ------- [REPLY 1/0 103/25]
> s 1.233119522 _25_ MAC  --- 0 ACK 38 [0 1 67 0 Y Y] 
> r 1.233236204 _17_ MAC  --- 0 ARP 28 [0 ffffffff 65 806 Y Y] ------- [REQUEST 101/25 0/0]
> r 1.233236463 _20_ MAC  --- 0 ARP 28 [0 ffffffff 65 806 Y Y] ------- [REQUEST 101/25 0/0]
> D 1.233236694 _18_ MAC  COL 0 ARP 86 [0 ffffffff 65 806 67 1] ------- [REQUEST 101/25 0/0] 
> ```

1.  使用 Heapy 进行 3 级分析的目的是帮助我缩小占用大量内存的对象的范围。如您所见，不幸的是，我看不出哪个特别需要调整，因为它太通用了。示例我知道虽然“**主要**.NodeStatistics 的字典”在 36043 个（0.1%）对象中只有 50 个对象，但它占用了用于运行脚本的总内存的 12%，但我无法找到我会使用的特定字典需要调查。

2.  我尝试如下实施 David Eyk 的建议（片段），尝试在每 500,000 行手动收集垃圾，

> ```
> import gc
>   for i,line in enumerate(file(datafile)):
>     if (i%500000==0):
>       print '-----------This is line number', i
>       collected = gc.collect()
>       print "Garbage collector: collected %d objects." % (collected) 
> ```

不幸的是，内存使用量仍为 3GB，输出（片段）如下，

```
-----------This is line number 0
Garbage collector: collected 0 objects.
-----------This is line number 500000
Garbage collector: collected 0 objects. 
```

1.  执行了 martineau 的建议，我看到内存使用量现在从之前的 3GB 增加到了 22MB！我期待实现的目标。奇怪的是下面，

我做了和以前一样的内存分析，

**1 级分析**

```
Partition of a set of 35474 objects. Total size = 5273376 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0  15889  45  1283640  24   1283640  24 str
     1     50   0   628400  12   1912040  36 dict of __main__.NodeStatistics
     2   7559  21   617496  12   2529536  48 tuple
     3    781   2   589240  11   3118776  59 dict (no owner)
     4     90   0   278640   5   3397416  64 dict of module
     5   2132   6   255840   5   3653256  69 types.CodeType
     6   2059   6   247080   5   3900336  74 function
     7   1716   5   245408   5   4145744  79 list
     8    244   1   218512   4   4364256  83 type
     9    224   1   213632   4   4577888  87 dict of type
<104 more rows. Type e.g. '_.more' to view.> 
```

将之前的内存分析输出与上述比较，str 减少了 45 个对象（17376 字节），tuple 减少了 25 个对象（3440 字节）和 dict(no owner) 虽然没有对象更改，但它减少了 1536 字节的内存大小。所有其他对象都是相同的，包括**main** .NodeStatistics 的 dict。对象总数为 35474。对象的小幅减少 (0.2%) 节省了 99.3% 的内存（从 3GB 节省了 22MB）。很奇怪。

如果您意识到，虽然我知道内存不足发生的位置，但我仍然能够缩小导致出血的原因。

将继续对此进行调查。

感谢所有的指点，利用这个机会学习了很多关于 python 的知识，因为我不是专家。感谢您花时间帮助我。

**2012 年 8 月 23 日更新，00:01 (GMT+1) -- 已解决**

1.  根据 martineau 的建议，我继续使用简约代码进行调试。我开始在进程函数中添加代码并观察内存出血。

2.  当我添加如下类时，我发现内存开始流血，

> ```
> class PacketStatistics(object):
>     def __init__(self):
>         self.event_id = 0
>         self.event_source = 0
>         self.event_dest = 0
>         ... 
> ```

我正在使用 3 个具有 136 个计数器的类。

1.  和我的朋友 Gustavo Carneiro 讨论了这个问题，他建议使用**slot**来替换 dict。

2.  我将课程转换如下，

> ```
> class PacketStatistics(object):
>     __slots__ = ('event_id', 'event_source', 'event_dest',...)
>     def __init__(self):
>         self.event_id = 0
>         self.event_source = 0
>         self.event_dest = 0
>         ... 
> ```

1.  当我转换所有 3 个类时，之前 3GB 的内存使用量现在变成了 504MB。**节省高达 80% 的内存使用量！！**

2.  下面是 dict 到**slot**转换后的内存分析。

> ```
> Partition of a set of 36157 objects. Total size = 4758960 bytes.
>  Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
>      0  15966  44  1304424  27   1304424  27 str
>      1   7592  21   624776  13   1929200  41 tuple
>      2    780   2   587424  12   2516624  53 dict (no owner)
>      3     90   0   278640   6   2795264  59 dict of module
>      4   2132   6   255840   5   3051104  64 types.CodeType
>      5   2059   6   247080   5   3298184  69 function
>      6   1715   5   245336   5   3543520  74 list
>      7    225   1   232344   5   3775864  79 dict of type
>      8    244   1   223952   5   3999816  84 type
>      9    166   0   190096   4   4189912  88 dict of class
> <101 more rows. Type e.g. '_.more' to view.> 
> ```

`dict of __main__.NodeStatistics`已经不在前十了。

我对结果很满意，也很高兴结束这个问题。

感谢您的所有指导。真的很感激。

rgds 萨拉瓦南 K

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T14:10:22.820

```
with open('datafile') as f:
    for line in f:
        process(line) 
```

这是有效的，因为文件是迭代器，一次产生 1 行，直到没有更多行可以产生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:12:34.887

该`fileinput`模块将让您逐行读取它，而无需将整个文件加载到内存中。[pydocs](http://docs.python.org/library/fileinput.html)

```
import fileinput
for line in fileinput.input(['myfile']):
do_something(line) 
```

代码示例取自[yak.net](http://www.yak.net/fqa/171.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:41:50.417

@mgilson 的回答是正确的。不过，这个简单的解决方案值得官方提及（@HerrKaputt 在评论中提到了这一点）

```
file = open('datafile')
for line in file:
    process(line)
file.close() 
```

这很简单，pythonic，并且可以理解。如果您不了解其`with`工作原理，请使用它。

正如另一张海报提到的那样，这不会创建像 file.readlines() 这样的大列表。相反，它以传统的 unix 文件/管道的方式一次拉出一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-18T17:58:44.137

如果文件是 JSON、XML、CSV、基因组学或任何其他众所周知的格式，则有专门的阅读器直接使用 C 代码，并且比在本机 Python 中解析更优化速度和内存 - 尽可能避免在本机解析它.

但总的来说，我的经验提示：

*   Python 的[multiprocessing](https://docs.python.org/2/library/multiprocessing.html)包非常适合管理子进程，当子进程结束时，所有内存泄漏都会消失。
*   将阅读器子进程作为 a 运行`multiprocessing.Process`并使用 a`multiprocessing.Pipe(duplex=True)`进行通信（发送文件名和任何其他参数，然后读取其标准输出）
*   读取小的（但不是微小的）块，比如 64Kb-1Mb。更适合内存使用，也适合其他正在运行的进程/子进程的响应

# c# - 有没有办法使用 MEF 为导入指定元数据？

> ID：12039236
> 
> 赞同：2
> 
> 时间：2012-08-20T14:08:56.987
> 
> 标签：c#, .net, .net-4.0, mef, .net-4.5

我正在尝试编写一个 ExportProvider，它根据在导出和导入上找到的元数据有条件地导出。导出元数据很简单：

```
[Export(typeof(ITestExport))]
[TestExportMetadata(MetadataStr = "A", MetadataInt = 2)]
public class TestExportClass1 : ITestExport
{
} 
```

检查导出元数据并提供基于它的导出很简单。我想为进口做的是类似的事情，也许是这样的：

```
public class TestImportClass1
{
    [Import(typeof(ITestExport))]
    [TestImportMetadata(MetadataStr = "A", MetadataInt = 2)]
    ITestExport MyExportedValue { get; set; }
} 
```

TestImportMetadata 的实际签名在这里并不重要，除了我想为导入提供某种元数据并能够在需要满足该导入时引用它。不幸的是，似乎没有设计等效的过程来将元数据应用于导入，就像导出一样。

ExportProvider 基类提供了抽象方法：

```
protected abstract IEnumerable<Export> GetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition); 
```

我认为提供给此方法的 ImportDefinition 可以让我直接或间接地对我的元数据或至少对 ImportAttribute 本身进行某种访问，但似乎没有。

如果这根本不可能像我描述的那样，那么在满足导入时，谁能想到提供和访问导入元数据的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:38:33.580

如果您的目标是 .NET 4.5，则可以使用[Microsoft.Composition NuGet 包](http://nuget.org/packages/microsoft.composition)而不是“包装盒中”的 MEF 版本。这有一些功能差异，不是直接替代品，但添加的一项功能是`ImportMetadataConstraint`属性：

```
public class TestImportClass1
{
    [Import(typeof(ITestExport))]
    [ImportMetadataConstraint("MetadataStr", "A")]
    [ImportMetadataConstraint("MetadataInt", 2)]
    public ITestExport MyExportedValue { get; set; }
} 
```

这也适用于自定义元数据属性，因此您也可以编写：

```
public class TestImportClass1
{
    [Import(typeof(ITestExport))]
    [TestExportMetadata(MetadataStr = "A", MetadataInt = 2)]
    public ITestExport MyExportedValue { get; set; }
} 
```

（请注意，属性需要公开才能在此处用作导入。）

# python - 如何使用 python 的 zipfile 库检查 zip 文件是否在多个档案中分割？

> ID：12039237
> 
> 赞同：2
> 
> 时间：2012-08-20T14:09:04.593
> 
> 标签：python, zip, python-2.7, zipfile, filesplitting

根据 zip 文件标准：[http](http://www.pkware.com/documents/casestudies/APPNOTE.TXT) ://www.pkware.com/documents/casestudies/APPNOTE.TXT它还支持将 zip 文件拆分为多个文件：

```
 Spanned/Split archives created using PKZIP for Windows
      (V2.50 or greater), PKZIP Command Line (V2.50 or greater),
      or PKZIP Explorer will include a special spanning 
      signature as the first 4 bytes of the first segment of
      the archive.  This signature (0x08074b50) will be 
      followed immediately by the local header signature for
      the first file in the archive.  

      A special spanning marker may also appear in spanned/split 
      archives if the spanning or splitting process starts but 
      only requires one segment.  In this case the 0x08074b50 
      signature will be replaced with the temporary spanning 
      marker signature of 0x30304b50\.  Split archives can
      only be uncompressed by other versions of PKZIP that
      know how to create a split archive.

      The signature value 0x08074b50 is also used by some
      ZIP implementations as a marker for the Data Descriptor 
      record.  Conflict in this alternate assignment can be
      avoided by ensuring the position of the signature
      within the ZIP file to determine the use for which it
      is intended. 
```

知道如何检查该签名或其他方式来检查一个 zip 是否拆分为多个文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:27:40.607

他们在标准中讨论的特定签名，即`PK\007\008`根本不由 zipfile 处理，这可以通过对库源的 grepping 看出（我在 Python 3.2 中得到了相同的结果）：

```
# grep PK /usr/lib/python2.7/zipfile.py 

stringEndArchive = "PK\005\006"
stringCentralDir = "PK\001\002"
stringFileHeader = "PK\003\004"
stringEndArchive64Locator = "PK\x06\x07"
stringEndArchive64 = "PK\x06\x06" 
```

因此，我怀疑您是否可以为此目的使用该库。不妨尝试通过扩展库自己找到该签名。

# c++ - 是否可以使用标签调度来确定返回类型

> ID：12039239
> 
> 赞同：2
> 
> 时间：2012-08-20T14:09:12.960
> 
> 标签：c++, templates

[标记调度在Switch 传递类型 from template](https://stackoverflow.com/questions/4522375/switch-passed-type-from-template)中提到。

是否有可能（以及如何）做类似的事情：

```
struct Tag1 {};
struct Tag2 {};

template<class T, typename R>
R get();

template<>
double get<Tag1>() {return 1.3;}

template<>
char const *get<Tag2>() {return "hello";}

double aDouble = get<Tag1>();
char const *aString = get<Tag2>(); 
```

上面的代码导致编译器抱怨对重载函数的模糊调用，但我希望最后两行传达使用意图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:17:21.287

您可以使用`std::enable_if`and `std::is_same`(C++11)，或者它们的 boost 等价物：

```
template <typename Tag>
typename std::enable_if<std::is_same<Tag, Tag1>::value, double>::type get()
{ ... }

template <typename Tag>
typename std::enable_if<std::is_same<Tag, Tag2>::value, char const *>::type get()
{ ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:37:24.710

具有不同数量模板参数的函数模板会相互重载，因此您不是在定义特化而是重载。像这样的东西应该工作：

```
struct Tag1 {};
struct Tag2 {};

template<class T> struct MapResult;

template<> struct MapResult<Tag1> { typedef double Result; };
template<> struct MapResult<Tag2> { typedef char const* Result; };

template<class T>
typename MapResult<T>::Result get();

template<> double get<Tag1>() {return 1.2;}
template<> char const *get<Tag2>() {return "hello";} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:23:25.817

`get`无法推断出第二个模板参数，因为它只显示为返回类型：谁说这`get<Tag1>()`是对特定的调用`get<Tag1, double>`而不是对 eg的调用`get<Tag1, int>`？例如，如果您要调用，`get<Tag1, double>()`那么调用将被解析为正确的专业化。

但是我怀疑您并不想`get`成为具有两个模板参数的函数模板：返回类型可能旨在成为第一个参数的函数。因此，我建议您`get`这样声明：

```
namespace result_of {

template<typename T>
struct get;

}

template<typename T>
typename result_of::get<T>::type get(); 
```

where`result_of::get`将是计算预期结果类型的元函数。`get`为了让事情更简单，我们将把所有的鸡蛋都放在`result_of::get`篮子里，而不是专门化函数模板：

```
namespace result_of {

template<typename T>
struct get;

}

template<typename T>
typename result_of::get<T>::type get()
{ return result_of::get<T>::apply(); }

namespace result_of {

template<>
struct get<Tag1> {
    typedef double type;

    static type apply()
    { return 1.3; }
};

template<>
struct get<Tag2> {
    typedef const char* type;

    static type apply()
    { return "hello"; }
};

} 
```

一般来说，特化类模板而不是函数模板更为常见，并且看起来需要特化函数模板的情况通常通过让函数模板将其实现完全委托给类模板来简化。

# java - 如何获取 Live Connect(Hotmail) 日历对象 ID。？

> ID：12039240
> 
> 赞同：1
> 
> 时间：2012-08-20T14:09:13.727
> 
> 标签：java, windows

我想将 Hotmail 日历与我的 Java Web 应用程序同步。（不是 Android 应用程序）。Live Connect Dev 建议 REST 使用以下语法。

获取[https://apis.live.net/v5.0/calendar.611afb17fa9448f28cdb8277e8ffeb77?access_token=ACCESS_TOKEN](https://apis.live.net/v5.0/calendar.611afb17fa9448f28cdb8277e8ffeb77?access_token=ACCESS_TOKEN)

其中 calendar.611afb17fa9448f28cdb8277e8ffeb77 是日历的 ID。

谁能告诉我如何获取日历的 ID。？

谢谢，

内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:12:56.670

我不知道这个问题是否仍然有效，但我认为这对文档目的有好处。

在调用日历的详细信息之前，您应该首先列出所有日历对象，使用

```
https://apis.live.net/v5.0/me/calendars?access_token=ACCESS_TOKEN 
```

然后你会得到日历数据的列表。

**但不要与日历或事件混淆**

您可以使用以下方法获取所有事件列表：

```
https://apis.live.net/v5.0/me/events?start_time=2012-10-01T00:00:00Z
     &end_time=2012-10-03T00:00:00Z&access_token=ACCESS_TOKEN 
```

祝你好运

# python - 在终端中显示未存储在终端历史中的临时消息

> ID：12039243
> 
> 赞同：1
> 
> 时间：2012-08-20T14:09:22.850
> 
> 标签：python, terminal

我想创建一个命令行密码文件解密脚本，该脚本将在终端窗口中显示加密文件的内容最多 10 秒，然后自动清除文本。

我不太确定这种功能的正确术语是什么，如果可以通过正确的搜索字符串获得答案，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:05:11.120

如果您只需要显示一行“秘密”输出，则可以使用“回车”并覆盖该行。它不会在终端历史记录中留下任何痕迹。

```
from __future__ import print_function

import time
import sys

print("hello", end = '')
sys.stdout.flush()
time.sleep(1)
print("\rxxxxx")
sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:34:27.243

[您可以使用ansi 转义序列](http://isthe.com/chongo/tech/comp/ansi_escapes.html)清除终端。这适用于几乎所有终端仿真器（win32 控制台除外）。

```
import time
import sys

print '\x1b[0;0H\x1b[2J' # home cursor, clear screen
print 'terribly secret file contents'
time.sleep(2)
print '\x1b[2J'
sys.stdout.flush() # flush output buffer. 
```

但是，如果您的程序的输出被重定向到一个文件，它仍然会被捕获。

此外，您可能必须禁用终端的回滚缓冲区。

# css - 如何在我的 SASS 计算中添加 %？

> ID：12039244
> 
> 赞同：1
> 
> 时间：2012-08-20T14:09:23.180
> 
> 标签：css, sass

我使用 SASS 根据元素宽度和容器宽度将宽度尺寸转换为 %，但是我的问题是，如果我在计算的末尾添加 % 会出现错误，谁能告诉我如何解决这个问题？

```
@mixin percentageWidth( $elementWidth, $containerWidth ){
  width: (($elementWidth/$containerWidth)*100) + %;
  *width: ((($elementWidth/$containerWidth)*100) - ((0.5/$containerWidth)*100)) + %;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:11:39.197

根据[文档](http://thesassway.com/advanced/pure-sass-functions)，您需要将结果相乘，而不是像字符串一样`100%`尝试相加：`%`

```
width: ($elementWidth/$containerWidth) * 100%;
*width: (($elementWidth/$containerWidth) - (0.5/$containerWidth)) * 100%; 
```

# vba - 在单元格中输入时间日期

> ID：12039249
> 
> 赞同：0
> 
> 时间：2012-08-20T14:09:41.607
> 
> 标签：vba, excel

我正在使用条形码阅读器在 1 个单元格中输入序列号，然后使用以下命令在接下来的两个单元格中自动添加日期和时间：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Cells.Count > 5 Then Exit Sub
If Target.Column <> 5 Then Exit Sub
Application.EnableEvents = False
Target(1, 2).Value = Date
Target(1, 3).Value = Time
Application.EnableEvents = True
End Sub 
```

我希望能够扫描条形码并自动找到序列号并将日期时间戳放在两个“其他单元格 4 和 5”中，或者如果该序列号不在单元格中，请将其放在那里并将日期时间放在2 & 3 细胞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:01:55.233

我假设您的条形码阅读器已“连接”到您的键盘电缆中，并且 - 可以这么说 - 将击键发送到您的 PC。因此，只要您的 Excel 光标位于工作表的第 5 列（第二个退出条件），VBA 代码就会在光标右侧的单元格 1 和 2（即 F..G 列）中添加日期和时间每次拍摄。

如果您想将日期和时间放置在工作表的第二和第三列（即 B..C 列）中，而不管您的光标在 Worksheet_Change 触发器触发时的位置，您都应该使用此代码

```
Target.EntireRow.Cells(1, 2).Value = Date
Target.EntireRow.Cells(1, 3).Value = Time 
```

现在...在另一个 Excel 表格中查找捕获的条形码并找到匹配的序列号可以像 VLOOKUP 功能一样简单，您可以自动粘贴到日期旁边的单元格中，或者您可以使用 Do ... While 。 .. 循环构造扫描（命名）范围：

```
....
Target(1, 4) = SernoByBarcode(Target)
.... 
```

和

```
Private Function SernoByBarcode(Barcode As String) As String
Dim DBase As Range, Idx As Long

    Set DBase = Range("Database") ' named range "Database" contains Barcode in column1, SerNo in column2
    Idx = 2 'first row contains headers
    SernoByBarcode = "#NOT/FOUND" ' default return value

    Do While DBase(Idx, 1) <> "" ' break on 1st empty record
        If DBase(Idx, 1) = Barcode Then
            SernoByBarcode = DBase(Idx, 2)
            Exit Function
        End If
        Idx = Idx + 1
    Loop
End Function 
```

如果您在设置日期和时间之前调用 Function SernoByBarcode，您可以使用另外一条 IF 语句来确定输出格式（即包括/不包括序列号）

**编辑**

始终在同一个单元格中扫描条形码（我选择 B2）扫描列表从第 5 列开始是否存在条形码...如果是，则写入 8/9/10 否则 5/6/7 ...查找功能只能用于稍加修改，现在返回行索引而不是字符串值

```
Private Sub Worksheet_Change(ByVal Target As Range)
' Barcode always scanned into cell B2
' if barcode found in column 5, fill column 8,9,10 else fill columns 5,6,7
' row 1, columns 5..10 contain column headers
Dim Idx As Long

    If Target.Row = 2 And Target.Column = 2 Then
        Application.EnableEvents = False
        Idx = FindBarcode(Target.Value)

        If Me.Cells(Idx, 5) = "" Then
            Me.Cells(Idx, 5) = Target.Value
            Me.Cells(Idx, 6) = Date
            Me.Cells(Idx, 7) = Time
        Else
            Me.Cells(Idx, 8) = Target.Value
            Me.Cells(Idx, 9) = Date
            Me.Cells(Idx, 10) = Time
        End If

        ' keep cursor in Scan field
        Me.Cells(2, 2).Select
        Application.EnableEvents = True
    End If

End Sub

Private Function FindBarcode(Barcode As String) As Long
Dim DBase As Range, Idx As Long

    Set DBase = ActiveSheet.[E1] ' start of table
    Idx = 2 'first row contains headers

    Do While DBase(Idx, 1) <> "" ' break on 1st empty record
        If DBase(Idx, 1) = Barcode Then
            Exit Do
        End If
        Idx = Idx + 1
    Loop
    FindBarcode = Idx
End Function 
```

# php - 从 jQuery AJAX 到 PHP 获取价值

> ID：12039250
> 
> 赞同：-2
> 
> 时间：2012-08-20T14:09:42.633
> 
> 标签：php, jquery

在一个项目上工作，我希望能够使用`jQuery`和删除动态记录`PHP`。我已经有了让用户动态添加记录的选项，它只是让删除选项起作用。在我尝试开发此功能时，我`Delete`已将`INSERT`. 我遇到麻烦的地方是将值从隐藏字段获取到`delete-class.php`（底部脚本）。下面我发布了代码：

```
<form id="frmDelete" method="post" action="delete-class.php">
            <input id="btnSubmit" type="submit"/> 

            <ul id="class">
                <?php
//this is being loaded from a different page and is here just to reference the fields
                 while ($row = mysql_fetch_array($result)) {
                 echo '<li id="liClass" class="ui-widget"><img src="trash-can-icon.png" id='.$row["id_distance_class"].' class="delete"/>' . $row["class_section"] . '<input type="hidden" name="hdid" id="hdid" value="'.$row["id_distance_class"].'"/></li>';
                ?>
            </ul>
        </form>
<script>
        $(function() {
            $(".delete").click(function() {
                $('#load').fadeIn();
                var commentContainer = $(this).parent();
                var id = $(this).attr("id");
                var string = id ;
                // console.log(id);

                $.ajax({
                    type: "POST",
                    url: "delete-class.php",
                    data: $(this).serialize(),
                    cache: false,
                    success: function(){
                        commentContainer.slideUp('slow', function() {$(this).remove();});
                        $('#load').fadeOut();
                    }
                });
                return false;
            });
        });
    </script>
//this is the delete-class.php
$results = mysql_query("INSERT INTO distance_class (class_section) VALUES ( '".$_POST['hdid']."' ) "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:14:21.367

问题是您没有在 AJAX 请求中传递此信息。你路过

```
data: $(this).serialize() 
```

...大概是思维`this`指向形式。它没有；它指向单击的删除按钮，因为此代码在按钮的事件处理程序回调中运行。

更改上述内容以针对表单。

# ruby-on-rails - Ruby on Rails 中的冲突路由和参数名称

> ID：12039253
> 
> 赞同：0
> 
> 时间：2012-08-20T14:09:53.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

在我的网站中，用户可以通过`example.com/category1`、`example.com/category2`等访问类别。所以我将路由规则编写如下：

`match '/:category' => 'home#category', :constraints => ShowCategory.new`

ShowCategory 是一个确保用户访问的类别存在的类。同时，用户可以指定自己的个人域名，然后可以通过 url 访问他/她的个人资料页面`example.com/peter`。所以还有另一个路由规则：

`match '/:user_domain' => 'Profiles#show'`

因为我使用`:constraints`for category 路由，所以路由没有冲突。但是，在`Profiles#show`操作中我总是得到参数`{'category' => 'peter'}`，而不是`{'user_domain' => 'peter'}`.

如何更正参数名称？我不想要`category`在配置文件控制器中命名的参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:40:54.053

好吧，您命名路线的方式没有多大意义。它使路由引擎感到困惑。应该是`categories/1`而不是`category1`。

至于配置文件，我想第一条规则和`to_param`方法应该足够了。

```
# routes.rb
profile '/:user_domain', controller: 'profiles', action: 'show'
resources :profiles
resources :categories 
```

```
# profile.rb
def to_param
    self.user_domain
end 
```

# ssis - 如何使用 ETL 从旧 OLTP 到新 DW、订单日期和客户年龄

> ID：12039259
> 
> 赞同：0
> 
> 时间：2012-08-20T14:10:13.217
> 
> 标签：ssis, data-warehouse

我们没有任何现有的数据仓库，但我们有客户（在 OLTP 中）与我们在一起多年并进行了购买。如何填充客户维度，然后“重播”多年来发生的所有年龄更新，以便类型 2 维度将包含这些客户的所有更新。

因为我想用销售额填充事实表并参考 DimCustomerFK。但是当我们的客户查询数据时，我希望这些客户有正确的年龄。因为如果我不做任何更改，客户现在和 10 年前下第一个订单时的年龄相同。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:19:43.367

有趣的问题帕特里克。

一些选项：-

1) 设计 SQL 来解析您的客户/交易 OLTP 数据，以创建客户更新的每日平面文件。因此，您最终会得到数千个相当小的文件（显然取决于您拥有的客户数量和日期范围）。将它们命名为 Customeryyyymmdd.csv。然后创建一个 ETL 套件，以向前日期顺序读取平面文件，并将类型 2 更改应用到 DWH。

2) 构建一个非常复杂的 SQL 查询（我在这里挥手，因为我不知道您的数据结构，所以无法建议这将是多么复杂）创建一个有序的客户更改列表，您可以通过 ETL SCD 组件记录传递通过记录。

鉴于您之前所说的，这两种方法在逻辑上似乎都是可行的，但这可能会给您一些想法来考虑，这可能会给您一个更具体的解决方案。

克/升

标记。

# c - 字符串“Putty”的奇怪出现

> ID：12039266
> 
> 赞同：5
> 
> 时间：2012-08-20T14:10:36.003
> 
> 标签：c, putty

我正在使用 putty 运行一个 C 程序（不要问为什么），它工作正常，除了当我运行特定函数时，字符串“PuTTy”出现在末尾。这似乎并没有太大影响，但我只是好奇是否有人知道为什么会发生这种情况以及这可能表明什么样的错误。

注意：当我在 Linux 终端中运行代码时，没有任何错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T14:17:29.057

这是由于您的程序发出 Control-E 字符而导致的 PuTTY 问题。从[腻子常见问题解答](http://www.chiark.greenend.org.uk/~sgtatham/putty/faq.html#faq-puttyputty)：

> **A.7.12 当我 cat 一个二进制文件时，我在命令行上得到“PuTTYPuTTYPuTTY”。**
> 
> 那就不要那样做。
> 
> 这是设计的行为；当 PuTTY 从远程服务器接收到字符 Control-E 时，它会将其解释为标识自身的请求，因此它会发送回字符串“PuTTY”，就好像该字符串已在键盘上输入一样。Control-E 只能由准备处理响应的程序发送。将二进制文件写入终端可能会输出许多 Control-E 字符，并导致此行为。不要这样做。这是一个糟糕的计划。
> 
> 为了减轻影响，您可以将应答字符串配置为空（参见[第 4.3.7 节](http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter4.html#config-answerback)）；但是将二进制文件写入您的终端可能会导致各种其他不愉快的行为，因此这只是一个小补救措施。

您的函数是否输出二进制字符，例如 Control-E？

# android - 完成一项活动给出错误

> ID：12039276
> 
> 赞同：0
> 
> 时间：2012-08-20T14:11:20.997
> 
> 标签：android

我是 Android 编程的初学者，在关闭 Activity 时遇到了一点问题：当我进入我的应用程序时，我导航到另一个名为*"camp"*的 Activity ，当我回到菜单屏幕时我想关闭 Activity，所以我写了这个：

```
public void onPause(){
    CampActivity.this.finish();
} 
```

但是当我按下后退按钮时，我收到一条错误消息，告诉我应用程序已关闭。

我应该怎么做才能奏效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:13:59.573

因为`CampActivity.this.finish();`会再次调用暂停功能（见活动生命周期）所以你不应该调用完成`onPause()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:31:02.107

只需点击后退按钮即可关闭`Activity`. 或者您可以使用`Button`

```
 button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();

        }
    }); 
```

# java - 此服务器上没有匹配的上下文

> ID：12039283
> 
> 赞同：6
> 
> 时间：2012-08-20T14:11:35.410
> 
> 标签：java, jsp, servlets

这是我的`index.jsp`代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Index JSP File</title>
</head>
<body>
<form action="/IndexController" method="get">
<table>
<tr><td>Enter Your Name :</td> <td><input type="text" name="name"/></td></tr>
<tr><td><input type="submit" value="Submit" /></td></tr>
</table>
</form>
</body>
</html> 
```

这是我的`IndexController`Servlet 代码：

```
public class IndexController extends HttpServlet {

    protected void doProcess(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String uname = request.getParameter("name");
        response.sendRedirect("welcome.jsp?name="+uname);
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doProcess(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doProcess(request, response);
    }

} 
```

这是我的`welcome.jsp`页面代码

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<% String fname = request.getParameter("uname");%>
<h1>Welcome to JSP World,  <%=fname%></h1>
</body>
</html> 
```

当我通过 Java EE 运行时运行它时，我得到了一个`index.jsp`页面，但是在输入名称并单击提交后，我得到了以下错误：

```
Error 404 - Not Found No context on this server matched or handled this request. Contexts known to this server are:  JSPExample(/JSPExample) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:39:02.067

编辑 web.xml 并添加 servlet 映射

```
<servlet>
      <servlet-name>IndexController</servlet-name>
      <servlet-class>IndexController</servlet-class>
</servlet>
<servlet-mapping>
      <servlet-name>IndexController</servlet-name>
      <url-pattern>/IndexController</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:42:22.710

还将welcome.jsp 中的行更改`<% String fname = request.getParameter("**uname**");%>`为`<% String fname = request.getParameter("**name**");%>`，因为您的参数名称是`name` `response.sendRedirect("**welcome.jsp?name="+uname);**`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-05T20:41:52.830

在 Eclipse 中，如果您遇到此问题，只需使用另一个名称创建一个新的索引文件。然后终止最后运行的服务器，并启动一个新的服务器，运行新的 index.. 文件。我用这种方式解决了这个问题，最后我删除了新的索引文件并运行了我的第一个索引文件。

# sql - 微调表上的 UPDATE 查询

> ID：12039287
> 
> 赞同：0
> 
> 时间：2012-08-20T14:11:47.590
> 
> 标签：sql, oracle, sql-update

我有 2 个表 table1 和 table2 都有大量数据，Table1 有 500 万条，Table2 有 80,000 条记录。我正在运行更新，

```
Update Table1 a
Set 
a.id1=(SELECT DISTINCT p.col21 
         FROM Table2 p 
         WHERE p.col21 = SUBSTR(a.id, 2, LENGTH(a.id)); 
```

查询中的 substr 和 distinct 使其变慢。

1.  如何重新编写此查询以加快流程和
2.  我需要索引哪些列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:29:06.147

可能是合并

```
 merge into Table1 a
  using Table2 p 
  on (p.col21 = SUBSTR(a.id, 2, LENGTH(a.id))
  When matched then
     update set a.id1 = p.col21; 
```

和基于函数的索引`a.id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:16:30.430

我看到您正在动态计算：

```
p.col21=SUBSTR(a.id,2,LENGTH(a.id)) 
```

这将花费大量时间并且无法创建索引。您是否考虑过实际创建具有该值的列？这将允许您对其进行索引并使其更快。如果 id 是静态的，这似乎很容易获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:10:55.150

您的子查询返回多少行，您要更新多少行？随着大量更新，索引可能根本无法帮助您。

# iphone - iPhone Objective C 内存分配

> ID：12039288
> 
> 赞同：3
> 
> 时间：2012-08-20T14:11:49.683
> 
> 标签：iphone, objective-c, memory, memory-management, alloc

我了解在使用 Alloc、new 或 copy 时，您拥有该对象并需要释放该对象。我明白，如果我保留一个对象，我需要释放它。

但是，如果我在方法的末尾有以下语句：

```
return [[UIImage alloc] initWithContentsOfFile:path]; 
```

我拥有该`UIImage`对象，因为我分配了内存空间，但我不再引用它，因为它已返回给调用者。在我的`dealloc()`方法中，我无法发布它，因为我没有参考。

所以我的问题是，这是否正确：

```
return [[[UIImage alloc] initWithContentsOfFile:path] autorelease]; 
```

我相信在这种情况下，调用者可以**保留**返回的对象，如果他们想获得所有权并最终需要**释放**自己。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:13:40.493

你的假设是正确的。当你返回一个对象时，你应该将它作为一个自动释放对象传递。

> [当您需要发送延迟释放消息时使用自动释放 - 通常在从方法返回对象时......](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:19:49.937

自动释放的重点是围绕返回对象构建的。

```
- (id)bad {
    MyObj *obj = [[MyObj alloc] init];
    return obj;
} 
```

此代码正确返回所有内容，但您（作为开发人员）必须确保稍后释放该对象。

```
- (id)moreBad {
    MyObj *obj = [[MyObj alloc] init];
    return [obj release];
} 
```

此代码按预期使用内存，在一个范围内平衡保留和释放，但返回的对象现在是垃圾（预计会崩溃）。

```
- (id)good {
    MyObj *obj = [[MyObj alloc] init];
    return [obj autorelease];
} 
```

此代码是“延迟发布”。即你可以`retain`在调用方的对象和对象是安全的。如果您没有`NSAutoreleasePool`范围，它肯定会被破坏，但这是一种非常罕见的情况，而且您大多知道何时发生（最常见的情况是在没有“默认”自动释放池的情况下启动一个新线程）。

*因此，通常的做法是在一个范围内*平衡保留（和类保留）和释放方法。下一个建议是始终使用 alloc-init-autoreleased 对象，如果您有内存问题（例如在循环中自动释放**大量对象），则切换到不同的版本。**下一个建议是切换到 ARC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:13:43.707

为什么要分配它？说啊：

```
return [UIImage imageWithContentsOfFile:path]; 
```

没有什么可分配的——没有什么可释放的。

此外，这是使用 ARC 时的最佳选择，其中释放尝试会导致错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:19:59.047

两个答案都是正确的，但是你可能并不总是有一个方便的方法供你使用，所以我喜欢做的是你对自动释放所做的事情：

```
- (MySomethingClass*)giveMeAFancyObject{
    MySomethingClass *obj = [[[MySomethingClass alloc] init] autorelease];
    obj.name = @"Something";
    // do some setting up maybe
    return obj;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:34:02.760

但是，如果您使用 release，则字符串将在返回之前被释放（并且该方法将返回无效对象）。使用自动释放，您表示您想要放弃所有权，但您允许方法的调用者在释放之前使用返回的字符串。

# java - 如何增加 Astyanax 中的默认最大行数？

> ID：12039289
> 
> 赞同：1
> 
> 时间：2012-08-20T14:11:49.543
> 
> 标签：java, cassandra, astyanax

嗨，我正在使用 Astyanax 客户端在我的程序中使用 CQL 访问 Cassandra。我遇到的问题是，当我执行查询时，OperationResult 的行数设置为最大 10 000。我需要根据需要增加此限制。将 CQL 与 Astyanax 一起使用时无法进行分页。如果有人能指出我正确的方向，那将非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:00:15.890

Astyanax 在使用 CQL 时不限制返回的行数。您可能需要检查您的 Cassandra 配置。我会警告说，返回太多行可能会导致客户端级别的其他问题，例如内存不足。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:45:03.863

在查询中，默认限制为 10000，您需要在查询中指定限制。

[http://www.datastax.com/docs/1.0/references/cql/SELECT](http://www.datastax.com/docs/1.0/references/cql/SELECT)

有答案

# ruby-on-rails-3 - 用于多个布尔值的 Rails Select Box 表单助手

> ID：12039291
> 
> 赞同：0
> 
> 时间：2012-08-20T14:11:59.110
> 
> 标签：ruby-on-rails-3, boolean, form-helpers

有没有办法在 Rails 表单中使用选择框来处理多个布尔值？假设我有三种天气条件：晴天、多云、雨天，它们都是布尔值。我可以把它们放在一个名为“天气”的选择框中，当其中一个被选中时，一个就变成“真”了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:04:49.637

对我来说，我认为这是两种不同的行为。

1) 用户从表单上的 selection_box 助手中进行选择。该变量被设置为资源 :current_weather 并存储在数据库中。

2）点击提交按钮后，更多的逻辑在控制器中或通过类方法处理。假设它位于天气跟踪器中 CRUD 的“更新”部分。

```
def update
  @tracker = Tracker.find(params[:id])
    if @tracker.current_weather == "Clear"
    #do this
    end
end 
```

也许这会给你一些想法。祝你好运！

# date - SSRS 报告订阅参数（日期值）

> ID：12039295
> 
> 赞同：8
> 
> 时间：2012-08-20T14:12:05.837
> 
> 标签：date, reporting-services, parameters, subscription

我希望在 SSRS 2008 R2 中设置报告订阅，其中客户端用户可以将日期参数设置为个人用户想要的任何内容。我一直在阅读多个在参数中使用 =Today() 的建议，但这种语法对我不起作用。有谁知道是否可以将我的开始日期设置为“今天 -30 天”并将我的日期设置为“今天”？订阅参数中使用的语法是什么？

设置： ![在此处输入图像描述](../Images/fdcabb51d61a2fde139e6f20a8092479.png)

错误： ![在此处输入图像描述](../Images/5e12d4c15008b56791e1889bbb4bb009.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T12:17:18.393

如 praveen 提供的上述链接所述，解决方案变成在报告中创建两个参数，其中包含整数值，其标签描述了我想在订阅中使用的期间。这些参数可以很容易地设置为“隐藏”，因此当您想要手动运行报告时它们不会显示。我还选择将两个参数的默认值设置为 1，这是我对 Today() 的值。这意味着我的报告将从在两个可见日期参数中选择今天的日期开始。

在报告中显示的两个日期参数中，您可以将默认值设置为您可以在隐藏的日期参数中选择的值的开关。您现在可以设置一个可以正常工作的订阅，如下所示：

![在此处输入图像描述](../Images/a432ec369846b2eadb557fea9fd8e41a.png)

# ruby-on-rails - Rails：迁移到 2.3.5 后无法分配模型对象值

> ID：12039297
> 
> 赞同：0
> 
> 时间：2012-08-20T14:12:12.113
> 
> 标签：ruby-on-rails, activerecord, migrate

我正在将 Rails 应用程序从 2.0.2 迁移到 2.3.5。

我有一个模型类：

```
class EventQuery < ActiveRecord::Base

  set_table_name 'EventQueries'
  def to_s; name; end

end 
```

我正在控制台中调试问题。我尝试为 EventQuery 对象分配一个属性：

> ./script/console production 加载生产环境（Rails 2.3.5）

```
>> q=EventQuery.new 
=>  #<EventQuery id: nil, role: nil, name: nil, description: nil, query: nil>
>> q.role="ADM" 
> TypeError: can't convert String into Integer  
from /usr/lib64/ruby/gems/1.8/gem /activerecord-2.3.5/lib/active_record/dirty.rb:135:in `[]='
 (...) 
```

在 Rails 2.0.2 中它工作正常：

> ./script/console production 加载生产环境（Rails 2.0.2）

```
>> q=EventQuery.new
=> #< EventQuery id: nil, role: nil, name: nil, description: nil, query: nil
>> q.role='ADM'
=> "ADM" 
```

有任何想法吗？谢谢！

我现在认为这必须与作为应用程序一部分的插件 record_modified 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:00:50.590

此问题与 record_modified 插件中的方法名称冲突有关。如果我从加载中排除插件，控制台工作正常。

我决定删除 record_modified 插件并重构代码。我没有使用 RecordModified 方法，而是使用 ActiveRecord，如下所示：

```
RecordModified.modified?  --> ActiveRecord.changed?
RecordModified.changed_columns --> ActiveRecord.changes + minor refactoring 
```

# c# - 如何从字节数组（在内存中）运行方法？

> ID：12039298
> 
> 赞同：4
> 
> 时间：2012-08-20T14:12:24.660
> 
> 标签：c#, .net, reflection, mono, mono.cecil

我有一个动态方法，我有来自真实方法的 byte[]（使用 Cecil）。现在如何将这个字节数组分配给动态方法并执行它？我确信这不仅仅是一种方式，必须有一种方式来调用字节数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:53:40.120

可能使用鲜为人知的静态方法：

[MethodRental.SwapBody](http://msdn.microsoft.com/en-us/library/system.reflection.emit.methodrental.swapmethodbody.aspx)

一些条件适用，但应该完全符合您的需要:) 请参阅示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:41:44.960

您将需要为此使用[DynamicMethod](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx)。使用`DynamicMethod.GetDynamicILInfo`然后设置代码、局部变量和异常处理程序。您还需要修复出现在 IL 字节缓冲区中的任何标记。然后使用`DynamicMethod.Invoke`.

对于除了最微不足道的方法之外的所有方法，实现这一点都不是一件容易的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:36:41.293

首先，您为什么不直接调用该方法而不进行任何复制？这应该比您尝试做的要简单得多。

基本上，你不能那样做。这是因为`byte[]`包含引用其他程序集或方法等内容的元数据标记。并且这些标记在每个程序集中都是不同的，即使它们代表相同的东西。因此，如果您只是尝试`byte[]`在另一个程序集中执行，元数据标记将是完全错误的。

您可以将其解析`byte[]`为它所代表的 IL 指令，并将元数据标记转换为具有它们的指令，但正确执行此操作可能需要大量工作。我相信塞西尔可以帮助你。

另一种选择可能是尝试将所有元数据令牌从旧程序集复制到新的动态程序集中，以便其中的令牌`byte[]`有效。但我不知道这是多么可行。

此外，如果该方法非常简单（没有调用方法并且没有使用自定义类型），那么只需复制`byte[]`应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:18:39.970

你不能执行它：Cecil 是一个很好的工具，但它不适合需要在运行时逐个方法执行的代码。您应该为此使用 Reflection.Emit 。

请注意，建议的 SetCode() 方法不适用于您的情况，因为 Cecil 对元数据令牌的理解与运行时完全不同，因此运行时将无法解析令牌（例如用于方法调用）。

# delphi - 如何区分闪存驱动器？

> ID：12039300
> 
> 赞同：4
> 
> 时间：2012-08-20T14:12:43.707
> 
> 标签：delphi, usb

再会。

我需要帮助。我想在Delphi中制作程序，该程序的功能之一：区分闪存驱动器。例如：我将新的闪存驱动器连接到计算机，我的程序也检测到它，我只在我的程序中给这个闪存驱动器命名。接下来，我可以更改任何内容：Windows 中闪存驱动器的名称、此闪存驱动器的内容、格式化。但是在这个动作之后，我的程序应该检测到这个闪存驱动器并显示我给它的名字。

可能有一些序列号，对于任何设备/闪存驱动器都是唯一的？或类似的东西。

将非常感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T14:27:25.793

看这里：

[在 Delphi 中使用 VID 和 PID 直接与 USB 设备进行数据交换](https://stackoverflow.com/questions/9360527/data-exchange-directy-to-usb-device-with-vid-and-pid-in-delphi)

您可以读取拇指驱动器的供应商 ID 和产品 ID。这至少会为您提供拇指驱动器的品牌和品牌。不过，我不认为它对于同一类型的每个拇指驱动器都是独一无二的。

看起来这些也可能就在你的小巷里：

[如何找到闪存设备的唯一序列号？](https://stackoverflow.com/questions/1930008/how-to-find-the-unique-serial-number-of-a-flash-device)

[如何获取 USB 闪存驱动器的制造商序列号？](https://stackoverflow.com/questions/4292395/get-usb-serial-number-without-wmi-in-delphi)

# delphi - 使用 ADO 从 Delphi 插入 NULL 到 SQL Server 2000

> ID：12039306
> 
> 赞同：3
> 
> 时间：2012-08-20T14:12:55.973
> 
> 标签：delphi, sql-server-2000, ado

我正在尝试借助 Delphi 2007 中的 ADO 将数据插入 SQL Server 2000 数据库。

到目前为止，我已经写了这样的东西：

```
insert into (a,b)
select :a,:b

qry.parameters.parambyname('a').value := '';
qry.parameters.parambyname('b').value := ''; 
```

我得到的错误是：

> *不允许从数据类型 text 到数据类型 nvarchar 的隐式转换...
> 使用 convert 函数运行此查询。*

表中的列允许 NULL 值。

我想要的是 SQL Server 表显示值为 '' 的 NULL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:12:28.543

你可以用这些行替换

```
qry.parameters.parambyname('a').value := Null;
qry.parameters.parambyname('b').value := Null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:22:30.550

尝试

`qry.parameters.parambyname('a').Clear;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:19:04.317

```
qry.parameters.parambyname('a').value := unassigned; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T14:19:19.897

尝试使用：

```
qry.parameters.parambyname('a').value := Null;
qry.parameters.parambyname('b').value := Null; 
```

或者

根本不设置参数 - 默认情况下，参数设置为“Null”。

Null 是 Variant 的一种特殊类型（使用 Variants），它定义了一个空值（没有类型）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-05T09:38:17.763

添加使用->变体；

在你可以用这些行替换之后

```
qry.parameters.parambyname('a').value := Null;
qry.parameters.parambyname('b').value := Null; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T14:57:40.910

```
qry.parameters.parambyname('a').AsVariant:= Null; 
```

一定是

```
<TAdoDataSet>.FieldByName('a').AsVariant:= Null; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T18:34:22.493

不要写`null`；它是`nil`：

```
<TAdoDataSet>.FieldByName('a').AsVariant:= Nil; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-20T14:38:32.860

使用 ADOQuery，为您的表编写一个“选择”。我经常使用它。

```
Select * From MyTable Where 0=1 
```

并双击 ADOquery 组件。将出现一个字段列表窗口。添加所有字段（右键单击）。这样您就可以在 Delphi 代码中使用您的字段。

```
MyTable.Open;
MyTable.Append;
MyTableAFieldFromMyTable.AsInteger := 0;
MyTableAStringFieldFromMyTable.AsString := 'Hello, World';
MyTable.Post; 
```

当涉及到你的问题时：

```
MyTableAnotherFieldFromMyTable.Clear; 
```

正如我们在 SQL Server 中所知道的那样，将值设置为 NULL。编辑：我刚刚检查了一个工作代码。我在下面的代码中从表格中清除了视频字段。

```
Ornek.Open;
Ornek.Edit;
OrnekVideo.Clear; 
```

查询只是“从 Ornek Where 0=1 中选择 *”，我使用字段的 .AsInteger、.AsString 等属性在 Delphi 代码中进行分配。

# asp.net - 如何简单地动态创建控件并检索它们的值

> ID：12039312
> 
> 赞同：0
> 
> 时间：2012-08-20T14:13:32.537
> 
> 标签：asp.net, vb.net

*   我有一个带有选项“1”、“2”和“3”的下拉列表。
*   用户选择一个选项并按下按钮。
*   根据他们选择的数字，将动态创建 1、2 或 3 个文本框，其 ID 为 textBox_1、textBox_2、textBox_3（例如）。
*   然后用户将输入到每个文本框并按下另一个按钮，这些文本框的值将被验证并保存。

有人可以提供有关如何执行此（看似非常简单）任务的代码吗？我已经在我的实际项目中提出了两个冗长的问题，这些问题似乎被误解了，或者我得到了错误的结果（包括在 Page_Load/Page_Init 上创建文本框，使用中继器等）。

这需要动态完成，因为在我的项目中有很多控件，而且这个数字可能会有所不同。如果需要，我到目前为止可以发布我的代码，但在其他问题中，这似乎使事情变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:17:53.177

创建动态文本框的代码：

```
Protected Sub ddl_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    If ((Not (ddl.SelectedValue) Is Nothing)  _
                AndAlso (Integer.Parse(ViewState("count").ToString) <> 0)) Then
        Dim i As Integer = 1
        Do While (i <= Integer.Parse(ddl.SelectedValue))
            Dim t As TextBox = New TextBox
            t.ID = ("TextBox_" + i)
            form1.Controls.Add(t)
            i = (i + 1)
        Loop
    ElseIf ((Not (ddl.SelectedValue) Is Nothing)  _
                AndAlso (Integer.Parse(ViewState("count").ToString) > 0)) Then
        Dim id As Integer = Integer.Parse(ViewState("count").ToString)
        Dim i As Integer = 1
        Do While (i <= Integer.Parse(ddl.SelectedValue))
            Dim t As TextBox = New TextBox
            t.ID = ("TextBox_" + id)
            form1.Controls.Add(t)
            id = (id + 1)
            i = (i + 1)
        Loop
    End If
End Sub 
```

并在页面加载中添加这个

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) 
```

      If Not IsPostBack Then ViewState("count") = 0 End If End Sub

要验证数据，请在您的页面中添加一个按钮控件（我将很快添加代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:20:27.983

一个问题：如果控件已经创建，是否可以创建比下拉列表中的可用数量更多的控件（fe 3 +3）？

假设您允许创建超过数量的控件，您需要

*   处理 Button 的`Click`事件
*   将这些控件添加到页面上的占位符或面板（容器控件），根据它们的编号（fe `textBox_4`）使用正确的 id
*   将控件总数存储在一个`ViewState`或`Session`变量中
*   `Page_Init`在或`Page_Load`（最迟）使用与以前相同的 ID重新创建这些控件

然后，您确保 ViewState 被加载并触发事件。

这是演示我的意思的代码：

[从下拉列表事件处理程序加载动态控件，如何在按钮事件后保留控件](https://stackoverflow.com/questions/5266482/load-dynamic-control-from-a-dropdownlist-event-handler-how-to-preserve-the-cont/5266670#5266670)

# iphone - 词法或预处理器问题错误（未找到 UIKit/UIKit.h 文件）

> ID：12039313
> 
> 赞同：1
> 
> 时间：2012-08-20T14:13:37.110
> 
> 标签：iphone, ios, preprocessor, xcode4.3, lexical

我已经阅读了有关词汇和预处理器问题的另一个问题，并且我尝试使用有助于解决他们问题的方法。不幸的是，这些解决方案都没有帮助解决这个问题。这个错误突然出现，我不确定除了读取的内容之外我还能做什么来解决这个问题。请帮忙！

这是我收到错误的代码：

```
#import <UIKit/UIKit.h>

@interface scanshootViewController : UIViewController
<UINavigationControllerDelegate, UIImagePickerControllerDelegate>

{
    IBOutlet UIImageView *imageView;
    UIImagePickerController *imagePicker;

}

@property (nonatomic, retain) UIImageView *imageView;

-(IBAction) btnClicked:(id) sender;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T19:45:30.997

进入项目的框架文件夹，右键单击 UIKit.Framework > 在 finder 中显示。

如果 Headers 文件夹是空的，这意味着您没有正确的文件，我刚刚意识到一些 Clean Apps 从您的计算机中删除了 .h 文件（......是的，信不信由你）；

解决方案：

1) 从其他 XCode 安装中复制整个 iPhoneOS.platform & iPhoneSimulator.platform 文件夹

2）重新安装XCode（ups ...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:43:24.353

尝试为您的应用删除“派生数据”文件夹 - 您可以在管理器的“项目”选项卡中找到它。您可以在 finder 中找到，在 Xcode 中关闭项目，删除文件夹，重新打开项目，然后尝试构建。如果这样做不关闭项目，请删除项目文件中以您的用户 ID 开头的每个目录（或只是重命名它们），重新打开，重建。

编辑：还有一些建议

1）查看目标的“使用标准系统头目录搜索”并确保其为YES。

2）在你的 .pch 文件中，你应该有类似的东西：

```
#import <Availability.h>

#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h> 
```

**尝试在 OBJC 下的iteslf**的一行中添加“Hello”，以验证当您构建时，您到达这里（并得到一个致命错误） - 这将证明**OBJC**是否已定义。

3) 创建一个全新的项目 - iOS 一个视图。确保它可以构建并运行（如果不是 Xcode 是 Frogged）。然后在您的项目旁边打开该项目构建设置，并逐行查看顶部，看看有什么不同。

4) 如果一切都失败了，请将您的项目移动到另一个目录，创建一个新目录，然后将所有文件添加回新项目。这显然是最糟糕的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:36:25.053

我遇到了同样的问题。原因是我不小心将“Build Settings”中的“Base SDK”设置为“Current OS X”而不是“Latest iOS”。当我将其设置回“最新 iOS”时，构建错误消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-27T10:07:48.120

FWIW，我在尝试改进 github 上的一些代码时遇到了类似的问题。

我不明白为什么它找不到也找不到`UIColor`，`#import <UIKit/UIKit.h>`直到我意识到它是为 OSX 构建的，而不是为 iOS 构建的！！！

所以我把它放在 .h 文件的开头：

```
#import "TargetConditionals.h"

#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR
  #import <UIKit/UIKit.h>
  #define HXColor UIColor
#else
  #import <Cocoa/Cocoa.h>
  #define HXColor NSColor
#endif

@interface HXColor (HexColorAddition) 
```

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-28T16:11:13.007

我在为 iOS 构建的框架目标上遇到了同样的问题。我通过将构建配置中的“Base SDK”设置为合理的值来解决这个问题。

[![构建配置](../Images/c12576544b458bcc91a21097b0adab55.png)](https://i.stack.imgur.com/EmiA4.png)

# iframe - IFrame 不适用于 IE

> ID：12039314
> 
> 赞同：0
> 
> 时间：2012-08-20T14:13:39.153
> 
> 标签：iframe

我正在使用 iFrame 在页面内的弹出窗口中加载 url。我想登录网站并执行一些操作。

所有这些都发生在模态的 iFrame 内的同一页面中。除了 IE，所有浏览器都可以正常工作。但是在 IE 中，经过一两个步骤后，网站会被定向到主页。我无法找到为什么会这样。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:17:59.307

IE 被认为是不同的，但我不会在这里进入那个古老的辩论。

由于您是从 iFrame 登录的，因此会话变量可能会导致失败。

[Iframe 中的会话在 Firefox 中有效，但在 Internet Explorer 中无效](https://stackoverflow.com/questions/2463248/session-in-iframe-working-in-firefox-but-not-in-internet-explorer)

除此之外，我建议使用调试栏进行调试以查看正在发出什么类型的 XHR 请求，然后确定确切的故障点。

# scala - Intellij IDEA Scala 插件中是否可以知道应用了哪个隐式转换？

> ID：12039323
> 
> 赞同：36
> 
> 时间：2012-08-20T14:14:18.530
> 
> 标签：scala, intellij-idea, implicit-conversion

应用隐式转换时，IntelliJ 会在转换后的代码下加下划线。是否可以以某种方式导航到应用的转换？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-20T15:01:36.820

是**的，这是可能的**（带有 Scala 插件 0.5.948 的 IntelliJ IDEA 11.1.3 CE，但这已经有一段时间了）。

您需要选择*接收器*而不是方法本身。例如，假设`dataDir`是类型`java.io.File`。那我可以做

```
dataDir.listFiles().foreach( ... ) 
```

where`foreach`可通过从`Array`to 的隐式转换获得`ArrayOps`，因此带有下划线。如果您`dataDir.listFiles()`从菜单 Navigate -> Implicit Conversion (shortcut `Ctrl-Q`) 中选择并选择，弹出菜单会显示所有可能的转换，并**选择当前应用的转换**。

![在此处输入图像描述](../Images/c414879eef1fb601b4f48cc8b1940805.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-11T10:34:09.387

如上所述，但 Windows/Linux 中的快捷方式是**Ctrl+Shift+Q**。

# java - 如何在检票口中使用 MultiFileUploadField 进行多重文件选择？

> ID：12039325
> 
> 赞同：0
> 
> 时间：2012-08-20T14:14:33.773
> 
> 标签：java, file-upload, wicket

我想在上传文件时使用多个文件选择。我不知道我怎么能做到这一点。我正在使用 apache wicket 1.4.9，请建议我如何操作。

谢谢 G 萨姆拉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:46:26.077

多文件上传是 HTML5 功能。Wicket 仅在 1.5 及更高版本中支持。您需要升级才能执行此操作。

在 1.5 中，您使用常规`FileUploadField`的，现在将给您一个`List<FileUpload>`而不是一个单一的`FileUpload`。在您的标记中放置`<input type="file" multiple="multiple"/>`. 其余的和往常一样。

此外， 1.4.9 是*古老*的。即使您决定继续使用 1.4.x，您确实应该至少升级到最新的 1.4.x 版本，以修复许多错误，包括一些与安全性相关的错误。

# numpy - 如何使用带有文本的 matplotlib 控制条形图中的记录顺序？

> ID：12039326
> 
> 赞同：1
> 
> 时间：2012-08-20T14:14:40.467
> 
> 标签：numpy, matplotlib, record

我有一个包含多个数据点的数据文件，我想按特定顺序绘制。这是示例数据文件：

```
cop   94.0528    313     441
cpr   225.172    726     747
ent   444.786    926     939
fsh   256.038    743     754
fsp   43.7764    340     356
pbp   343.708    825     834
rho   426.497    858     886
sca   342.431    427     872 
```

我目前正在以我设置示例的方式将它们绘制在彼此下方。如何将我的 python 脚本中这些数据记录的顺序更改为指定的顺序？我已经尝试将它放入一个数组中。在这里的这个问题：[如何使用matplotlib控制条形图中的记录顺序？](https://stackoverflow.com/questions/12035603/how-do-i-control-the-sequence-of-records-in-a-bar-plot-with-matplotlib)

所以从现在开始我的下一个问题是，我可以做完全相同的事情，但是使用基于文本的排序 aaray 吗？

所以我要输入的是这样的：

```
posarray = (crp, 2), (cop,1) 
```

编辑： posarray 将用输出数组中的 posarray[0] 中的文本表示记录的位置。crp 将在第二个位置结束， cop 在第一个位置，依此类推。

它会给我什么

```
cop   94.0528    313     441
cpr   225.172    726     747 
```

最好的办法是使用某种插入，这样如果我忘记在排序数组中提及一个项目，它就会沉到底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:54:24.303

如您上一个[问题](https://stackoverflow.com/questions/12035603/how-do-i-control-the-sequence-of-records-in-a-bar-plot-with-matplotlib)的答案中所述，您可以通过一些索引技巧来实现您想要的。

让我们假设您有一个数组的 numpy 表示，如下所示：

```
a = array([('cop', 94.0528, 313, 441), ('cpr', 225.172, 726, 747),
           ('ent', 444.786, 926, 939), ('fsh', 256.038, 743, 754),
           ('fsp', 43.7764, 340, 356), ('pbp', 343.708, 825, 834),
           ('rho', 426.497, 858, 886), ('sca', 342.431, 427, 872)], 
          dtype=[('f0', '|S3'), ('f1', '<f8'), ('f2', '<i8'), ('f3', '<i8')]) 
```

您可以轻松获取第一列的列表：

```
>>> fields = list(a['f0']) 
```

现在，定义一个按您需要排序的字段列表，例如：

```
>>> new_order = ['cpr', 'cop', 'ent', 'fsh', 'fsp', 'rho', 'pbp', 'sca'] 
```

您可以使用方法和一些列表理解来获取列表中每个项目的位置`new_order`：`fields``index`

```
>>> indices = [fields.index(i) for i in new_order]
[1, 0, 2, 3, 4, 6, 5, 7] 
```

（你可以理解为什么我们需要`fields`一个列表，因为数组没有`index`方法）

而已。您现在可以使用列表重新排列您的数组`indices`：

```
>>> a[indices]
array([('cpr', 225.172, 726, 747), ('cop', 94.0528, 313, 441),
       ('ent', 444.786, 926, 939), ('fsh', 256.038, 743, 754),
       ('fsp', 43.7764, 340, 356), ('rho', 426.497, 858, 886),
       ('pbp', 343.708, 825, 834), ('sca', 342.431, 427, 872)], 
      dtype=[('f0', '|S3'), ('f1', '<f8'), ('f2', '<i8'), ('f3', '<i8')]) 
```

# mysql - Mysql - Groupby 在两个字段上并将每个复合组的行限制为 1

> ID：12039327
> 
> 赞同：0
> 
> 时间：2012-08-20T14:14:45.673
> 
> 标签：mysql

我附上了一张带有数据的表格图像。现在，此表存储用户发送给他人和接收的所有消息。我想显示类似 facebook 个人消息的内容，其中用户和其他用户之间的最新消息显示在列表中，并且当用户单击该消息时，显示这两个用户之间的整个线程。我已经尝试了很多，但找不到正确显示它的方法。

该表将存储所有好友用户和非好友用户的消息。所以我想只获取那些给我发消息的用户的消息列表。

我不确定我的数据库设计是否正确？请帮助我提出建议或帮助如何实现我的要求。

* * *

```
编号 | 发件人 ID | 接收者 ID | is_read | 留言 | parent_id | 发送日期 | is_sender_deleted | is_receiver_deleted|
```

* * *

```
1 |5 |4 |0 |你好吗？|0 |2012-08-20 17:33:54 |0 |0
```

```
2 |4 |5 |0 |hiiiiiiii |0 |2012-08-20 17:35:02 |0 |0  

```

```
3 |5 |4 |0 |我在测试 |0 |2012-08-20 17:35:02 |0 |0  

```

```
4 |4 |5 |0 |Helloooooo |0 |2012-08-20 17:35:33 |0 |0  

```

```
5 |5 |4 |0 |你好回复 |0 |2012-08-20 17:47:41 |0 |0  

```

```
8 |6 |5 |0 |Hiii...Inx 这里|0 |2012-08-20 18:59:18 |0 |0  

```

```
9 |5 |6 |0 |是的，伙计....？|0 |2012-08-20 19:00:07 |0 |0  
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:48:22.527

您的问题不太清楚您要做什么。您似乎需要一个查询，将来自每个 sender_id 的最新消息返回到特定的给定接收器 ID。

如果您无权访问 SQL 客户端程序（如果您尝试在没有 SQL 客户端程序的情况下使用 PHP 或 Java 进行开发），请获得对 SQL 客户端的访问权。没有它，将很难发展。

我们需要弄清楚每个发件人发送的最新消息，以及发件人发送了多少条消息。这需要一个摘要查询。让我们假设 message.id 字段是一个自动增量字段，并且最新消息具有最高 id。

```
 SELECT sender_id, MAX(id) id, COUNT(id) message_count
       FROM message
      WHERE receiver_id = 'receiver id to use'
        AND is_sender_deleted = 0
        AND is_receiver_deleted = 0
   GROUP BY sender_id 
```

这将为我们提供发件人的最新消息列表，以及来自该发件人的所有消息的计数。看到这个 sqlfiddle： [http ://sqlfiddle.com/#!2/caff6/1/0](http://sqlfiddle.com/#!2/caff6/1/0)

现在，让我们使用该摘要查询来选择消息文本和其他好东西。

```
 SELECT m.sender_id, s.message_count, m.sent_date, m.message
        FROM message m
        JOIN (
               SELECT sender_id, MAX(id) id, COUNT(id) message_count
                 FROM message
                 WHERE receiver_id = 'receiver id to use'
                  AND is_sender_deleted = 0
                  AND is_receiver_deleted = 0
             GROUP BY sender_id 
             )s
          ON m.id = s.id 
    ORDER BY m.sent_date desc, m.sender_id 
```

该结果集针对特定`receiver id to use`的 显示来自每个发件人的消息数量、最新消息的文本和时间以及发件人身份的列表。这是一个 sqlfiddle：[http ://sqlfiddle.com/#!2/caff6/3/0](http://sqlfiddle.com/#!2/caff6/3/0)

`receiver id to use`一旦您知道and ，检索从特定发送者到特定接收者的所有消息应该是一个简单的查询`sender id to use`。

```
 SELECT *
       FROM message 
      WHERE sender_id = 'sender id to use'
        AND receiver_id = 'receiver id to use'
        AND is_sender_deleted = 0
        AND is_receiver_deleted = 0
   ORDER BY sent_date DESC 
```

# java - 减少字符串中的字符数

> ID：12039329
> 
> 赞同：2
> 
> 时间：2012-08-20T14:14:54.907
> 
> 标签：java, android, algorithm, encoding, sms

在我正在制作的 Android 应用程序中，当输入特定文本时，它会根据特定算法进行编码。然后它应该作为文本消息发送到另一个设备，其中包含可以解码编码文本的相同应用程序。编码和解码部分运行良好，但编码时会产生很长的`String`. 例如，

当文本“Hello World！” 被编码，它产生下面的字符串：

```
zN6xdwB8486d6I6I6T1p5B6T7N6I6x2z1reIWPTp 
```

因此，由于这是一条短信，平均文本会产生非常长的`String`. 那么有什么方法`String`可以将这种编码减少到合理的大小？或者我可以以任何其他方式将其作为文本消息（作为序列化 Java 对象（如果在 Android 中可能的话）或其他方式）发送？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:21:54.267

尝试使用[霍夫曼代码](https://en.wikipedia.org/wiki/Huffman_coding)压缩数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:37:11.623

没有任何通用方法可以将任何字符串缩减为具有较少字符数的字符串。这在直觉上应该是有道理的——如果你试图将 1,000,000 个字符串映射到 100,000 个字符串上，就会出现重复。

此外，如果您试图阻止其他人说出您发送的数据是什么，您会遇到其他问题 - 您需要做出明智的加密决定。 **不要制作自己的加密算法。**

因此，我们需要更多信息才能提供任何有用的信息。您会使用可能字符串的子集吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:59:09.290

看起来 SMS 可以携带二进制数据，所以你最好使用 AES 或类似的东西。您可能可以将其配置为使用静态的 IV 和从密码生成的密钥（另一端的人将共享）。您也可以在发送之前对字符串进行霍夫曼编码，这会进一步缩小它，可能会将消息的最大长度延长到 140 个字符以上。它看起来像这样：

```
For sending:

input string --> compressed blob --> encrypted blob --> SMS
                                 |
                                  -> known encrypt params 

For receiving:

SMS --> encrypted blob --> compressed blob --> original string
                         |
   known encrypt params -^ 
```

您有时可能会绕过压缩步骤。一些字符串不能很好地压缩，并且有一点点与压缩相关的开销，所以在某些情况下，它可能会使字符串变大。

如果将加密参数留在加密的 blob 中，它们将构成开销。（算法、IV、填充方案等）。如果您每次都使用其中一组，您只需将它们硬编码到程序中，您就不需要每次都发送它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:23:37.457

您可以使用一些小算法来解码您的字符串。

或者你可以像这样实现简单的算法

`originalString = "hello";`

每个字符+1 例如：a = b, b=c....等或

每个字符=3 ex a = d, b=h ....

`encodedString ="ifmmp"`

所以**字符数将保持原样**，您将解码您的字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:41:48.250

您有 26+26+10 个需要 6 位的 ASCII 字符，并且可以将 char（短于 2 个字节）转换为

字符串“012345678901234567890”使用 21 个字符或 42 个字节，可以在 2 个`long`16 个字节的连接中迁移。

但正如@elyashiv 所说，使用好的算法是更好的方法。

**编辑**

A-Aa-z0-9 是您的字符串的字符：
它们可以转换为 0-> 61 位编码的 6 位数字

因此，您可以每次使用 <<6 将它们添加到 long 中。最后一个字符（第 11 个）被拆分，并开始第二个长字符。

您必须在字节上找到一个变送器。

如果消息传递需要字符串字符，则必须使用八进制，并跳过第一个不可打印的字符。所以你可以把 7 个数字放在一个很长的位置（使用 <<7 贴花位）。

# javascript - 下拉列表中的选定值不会清除 jQuery

> ID：12039331
> 
> 赞同：1
> 
> 时间：2012-08-20T14:15:17.527
> 
> 标签：javascript, jquery, salesforce, visualforce

我附上了一些正在发生的疯狂事情的​​垂直屏幕截图。我期望`j$('[id$=Model_List]').children().remove();`删除选择列表中的所有项目是否正确？由于某种原因，列表仍然保留旧的选定值，同时清除其余项目。

我`<Apex:selectlist`在 html 块中使用，而不是在 jQuery 中。

VG930M 应该是 V243H，如 hte 控制台日志中所示...

希望截图能让你更好地理解我在说什么......

![](../Images/ae7399ebdf4c613a4693df4b79606b84.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:20:33.413

您需要从下拉列表中删除所有值并重置所选值。

```
j$("select[id$=Model_List] > option").remove();
j$("select[id$=Model_List]").val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:20:18.340

您还需要清除选定的值：

```
$('[id$=Model_List]').val(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:41:36.497

我认为，无法使用 jQuery 填写或清除 salesforce selectList（当然，您可以这样做，但控制器不会获取该值）。

试着像这个例子一样，用一个隐藏的字段：

[Visualforce 中的命令按钮无法从动态下拉列表中读取所选项目](https://stackoverflow.com/questions/11989585/command-button-in-visualforce-cant-read-selected-item-from-dynamic-drop-down-li/11993935#11993935)

# ruby-on-rails - Rails：组织公共和公司角色

> ID：12039335
> 
> 赞同：0
> 
> 时间：2012-08-20T14:15:20.400
> 
> 标签：ruby-on-rails, model, roles, extend

在我的 Rails 应用程序中，我的应用程序有公司（有专业需求）和公共用户（有个人需求）。

这两个角色都有自己的属性：公共用户的用户名、位置...，以及公司的地址、电话、传真、专业 ID...。

另一方面，它们都共享一些属性，例如电子邮件和密码（更具体地说是身份验证信息）。

**我如何在 Rails 中组织这个？什么是最佳实践？模型的最佳命名法？**

我有点失落。我一定要吗：

*   把所有东西都放在同一个模型中（称为用户）？？？似乎不得不处理一个烂摊子
*   或者分离模型（公司和公共）并将它们链接到用户模型以获得共享属性？？？扩展模型的种类

如果你们中的一些人已经处于相同的情况（一个公开和专业使用的应用程序），你能告诉我（我们）你是怎么做的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:20:28.590

根据我的观点，您可以使用 Single Table Inheritance Company,Public（根据我的猜测 CompanyUser,PublicUser 最适合应用程序使用的任何名称），它是从 User 继承的。或者您可以使用一些基于角色的系统来识别它们.

# log4net - Overriding an individual Ivy dependency

> ID：12039337
> 
> 赞同：0
> 
> 时间：2012-08-20T14:15:23.810
> 
> 标签：log4net, ivy, dependency-management

Application A uses log4net version 1.2.10.0 and is built using my CI process, and as a result, is stored in my Ivy Shared folder. (No problems here)

Application B references Application A, as well as references the newer version of log4net, namely 1.2.11.0\. As the CI process resolves the dependencies into my binary folder for application B, it conflicts when trying to get versions 1.2.10.0 and 1.2.11.0 of log4net.dll.

Is there a way that I can instruct Ivy to allow it to overwrite a dependency, at an individual/per-dependency level, to get the newer version, and that it shouldn't fail the build on the arrival of this conflict?

Or, do I have to go and rebuild Application A using version 1.2.10.0 of log4net and re-release it so that Application B doesn't have issues with it's transitative dependencies?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:38:11.717

The issue you're having is a transitive dependency conflict. One transitive dependency for Application A is conflicting with a direct dependency in Application B. As in Maven, use the exclude tag in Application B:

```
<dependencies>  
   <dependency org="org.hibernate" name="hibernate-core" rev="3.3.1.GA" conf='..'> 
       <exclude name='jaas' /> 
       <exclude name='jacc' />
   </dependency>
</dependencies> 
```

See [Ivy: how do I remove transitive dependencies?](https://stackoverflow.com/questions/487493/ivy-how-do-i-remove-transitive-dependencies).

# java - Java 中的十六进制转字符串性能太慢

> ID：12039341
> 
> 赞同：8
> 
> 时间：2012-08-20T14:15:43.300
> 
> 标签：java, android, performance, hex, ascii

我的 android 程序有以下方法，用 Java 编写。

该方法接受一个十六进制字符串并返回一个用 ascii 编写的相同文本的字符串。

```
public static String hexToString(String hex)
{
    StringBuilder sb = new StringBuilder();

    for (int count = 0; count < hex.length() - 1; count += 2)
    {
        String output = hex.substring(count, (count + 2));    //grab the hex in pairs

        int decimal = Integer.parseInt(output, 16);    //convert hex to decimal

        sb.append((char)decimal);    //convert the decimal to character
    }

    return sb.toString();
} 
```

该方法工作正常，但是我的程序对时间非常关键，并且该方法可能被调用数万次。在分析我的程序的慢位时，这种方法占用了太多时间，因为：

```
Integer.parseInt(output, 16); 
```

和

```
hex.substring(count, (count + 2)); 
```

按照最慢的顺序。

有谁知道实现相同目标的更快方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T14:28:50.830

不要在每次迭代时创建一个新字符串。提高性能的一种方法是使用 char 数组并对每个字符应用数学运算。

```
public static String hexToString(String hex) {
    StringBuilder sb = new StringBuilder();
    char[] hexData = hex.toCharArray();
    for (int count = 0; count < hexData.length - 1; count += 2) {
        int firstDigit = Character.digit(hexData[count], 16);
        int lastDigit = Character.digit(hexData[count + 1], 16);
        int decimal = firstDigit * 16 + lastDigit;
        sb.append((char)decimal);
    }
    return sb.toString();
} 
```

有关此方法的更多信息：

*   [`Character#digit`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#digit%28int,int%29)

此外，如果您成对解析十六进制字符串，则可以使用@L7ColWinters 建议的查找表：

```
private static final Map<String, Character> lookupHex = new HashMap<String, Character>();

static {
    for(int i = 0; i < 256; i++) {
        String key = Integer.toHexString(i);
        Character value = (char)(Integer.parseInt(key, 16));
        lookupHex.put(key, value);
    }
}

public static String hexToString(String hex) {
    StringBuilder sb = new StringBuilder();
    for (int count = 0; count < hex.length() - 1; count += 2) {
        String output = hex.substring(count, (count + 2));
        sb.append((char)lookupHex.get(output));
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:24:55.393

这个如何...

```
public static String hexToString(final String str) {
 return new String(new BigInteger(str, 16).toByteArray());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:55:00.897

另一种选择是只做一些简单的算术：

```
public static int hexCharToInt(char c)
{
    int result = 0;
    if(c >= 'A' && c <= 'F')
    {
        result += (c - 'A' + 10);
    }
    else if( c >= '0' && c <= '9')
    {
            result += (c - '0');
    }
        return result;
    }

public static String hexToString(String hex)
{
    StringBuilder sb = new StringBuilder();

    for (int count = 0; count < hex.length() - 1; count += 2)
    {
        char c1 = hex.charAt(count);
        char c2 = hex.charAt(count + 1);

        int decimal = hexCharToInt(c1) * 16 + hexCharToInt(c2);

        sb.append((char)decimal);    //convert the decimal to character
    }

    return sb.toString();
} 
```

试一试，看看哪种解决方案最适合您的系统！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T16:09:41.203

此代码取自[Apache Commons Codec的](http://commons.apache.org/codec/)[Hex](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html#decodeHex%28char%5B%5D%29)类并进行了一些简化。（删除了一些范围检查等，这对于理解这里不是必需的。在实践中，您希望使用原始实现。）

```
/**
 * Converts an array of characters representing hexadecimal values into an array of bytes of those same values. The
 * returned array will be half the length of the passed array, as it takes two characters to represent any given
 * byte. An exception is thrown if the passed char array has an odd number of elements.
 * 
 * @param data
 *            An array of characters containing hexadecimal digits
 * @return A byte array containing binary data decoded from the supplied char array.
 * @throws DecoderException
 *             Thrown if an odd number or illegal of characters is supplied
 */
public static byte[] decodeHex(char[] data) throws DecoderException {

    int len = data.length;

    byte[] out = new byte[len >> 1];

    // two characters form the hex value.
    for (int i = 0, j = 0; j < len; i++) {
        int f = Character.digit(data[j], 16) << 4;
        j++;
        f = f | Character.digit(data[j], 16);
        j++;
        out[i] = (byte) (f & 0xFF);
    }

    return out;
} 
```

之后您可以使用返回`byte[]`来构造一个 String 对象。

因此，当使用 Apache Commons Codec 时，您的方法如下所示：

```
public static String hexToString(String hex) throws UnsupportedEncodingException, DecoderException {
    return new String(Hex.decodeHex(hex.toCharArray()), "US-ASCII");
  } 
```

# javascript - 当用户向下滚动页面时如何让左侧导航跟随用户

> ID：12039343
> 
> 赞同：0
> 
> 时间：2012-08-20T14:15:46.233
> 
> 标签：javascript, jquery

请看一下这个例子：

[http://jsfiddle.net/3YrDD/](http://jsfiddle.net/3YrDD/)

当用户向下滚动“主要内容”时，我试图让左侧的“侧边栏”内容跟随用户。
有没有办法我可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:30:06.177

[http://jsfiddle.net/3YrDD/8/](http://jsfiddle.net/3YrDD/8/)

添加位置：绝对和 jquery 只是看看;）

# jquery - jQuery .animate - 回调函数不起作用

> ID：12039344
> 
> 赞同：1
> 
> 时间：2012-08-20T14:15:58.510
> 
> 标签：jquery, jquery-animate

我正在尝试设置三个 div 来制作动画（例如），一旦所有动画的动画完成，运行再次启动动画的函数。

如果我在其中粘贴警报而不是函数名称，则回调工作正常，但使用函数名称，什么都没有：

```
$(function () {
function runIt() 
{
    $('.three').animate({'background-position-x': "-200px", 'background-position-y': "0px"}, 500,'linear');
    $('.two').animate({'background-position-x': "-400px", 'background-position-y': "0px"}, 500, 'linear');
    $('.one').animate({'background-position-x': "-600px", 'background-position-y': "0px"}, 500, 'linear', runIt);
}
runIt();
}); 
```

动画速度会大大提高，为了测试，只需要半秒就更容易了！

jsfiddle在这里：http: [//jsfiddle.net/erinfreeman/J9Htj/](http://jsfiddle.net/erinfreeman/J9Htj/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:30:03.027

看看这个[小提琴](http://jsfiddle.net/J9Htj/35/)。适用于 Safari 6。

```
$(function () {
    function runIt() 
    {
        $('.three').css({'background-position-x': "0", 'background-position-y': "0px"})
            .animate({'background-position-x': "-200px", 'background-position-y': "0px"}, 500);
        $('.two').css({'background-position-x': "0", 'background-position-y': "0px"})
            .animate({'background-position-x': "-400px", 'background-position-y': "0px"}, 500);
        $('.one').css({'background-position-x': "0", 'background-position-y': "0px"})
            .animate({'background-position-x': "-600px", 'background-position-y': "0px"}, 500, runIt);
    }
    runIt();
}); 
```

重置每次迭代的值。​</p>

# webgl - 在我的场景中使用发光/模糊/风效果的最简单方法是什么？

> ID：12039345
> 
> 赞同：0
> 
> 时间：2012-08-20T14:16:00.710
> 
> 标签：webgl, three.js

我想在我的模型（或我的完整场景）上使用发光/模糊/风效果。我该怎么做？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:37:02.450

如果您提供有关您想要实现的更具体的细节，您会得到更好的答案。

对于全屏通行证：

将场景正常渲染到屏幕外纹理。将包含渲染场景的纹理绑定为下一次传递的输入纹理：

使用简单的顶点着色器渲染全屏四边形（两个三角形）。在片段着色器中，您可以通过以有趣的方式对纹理进行采样来实现模糊/发光/任何效果。

请注意，如果您有任何 HUD 元素要在全屏效果后渲染这些元素。

# jquery - 使用 jQuery 删除动态元素

> ID：12039348
> 
> 赞同：0
> 
> 时间：2012-08-20T14:16:12.803
> 
> 标签：jquery

我正在尝试使用 jQuery 删除动态创建的元素。

这是我的例子：http: [//jsfiddle.net/4uxbu/](http://jsfiddle.net/4uxbu/)

当您单击提交时，它会突出显示必填字段并`This field is required.`在输入后显示文本。当用户单击输入时，红色框消失，我希望输入下方的文本也消失。

使用以下代码设置消息：

```
$('#' + required[i]).after('<p style="font-weight:bold;" id="' + required[i] + '_error">' + emptyerror + '</p>'); 
```

我试图用以下方法删除它：

```
$('p#' + required[i] + '_error').remove(); 
```

但我无法让它正常工作。

`Required`如下

```
required = ["vidHeight", "title", "vidWidth", "vidLen", "thumb", "file"]; 
```

请参阅小提琴以获取完整代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:22:41.733

```
$('p#' + required[i] + '_error').remove(); 
```

好吧， required[i] 没有任何意义，因为您不再处于定义 i 的循环中。试试这个：

```
$('#' + $(this).attr("id") + '_error').remove(); 
```

见：http: [//jsfiddle.net/4uxbu/1/](http://jsfiddle.net/4uxbu/1/)

编辑

更新处理多次提交错误时显示多个错误的情况：http: [//jsfiddle.net/4uxbu/2/](http://jsfiddle.net/4uxbu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:23:01.290

我不会存储名称，而是存储错误消息的数组。如果您保留要添加的实际项目的数组，那么您将减少 DOM 查询的数量并有一种简单的方法来解决它们。您甚至可以创建一个将控件与消息相关联的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:26:05.413

[i] 不在 for 循环中时没有影响，所以我建议更改以下内容：

```
$(this).removeClass("needsfilled");
$('#' + required[i] + '_error').remove(); 
```

更像是：

```
$(this).removeClass("needsfilled").next('#'+$(this).attr('id')+'_error').remove(); 
```

# cordova - 如何使用 PhoneGap 连接电源按钮（锁定按钮）？

> ID：12039350
> 
> 赞同：1
> 
> 时间：2012-08-20T14:16:13.817
> 
> 标签：cordova, locking, hook

因为我正在开发一个在 iOS 和 Android 上运行的跨移动应用程序。

所以，我想连接到电源按钮，以便在用户按下电源按钮时进行一些处理。我的想法是使用 javascript 而不是创建本机插件（iOS 和 Android），以使我的应用程序尽可能通用，所以我想知道 phonegap 是否提供任何方法来做到这一点？

谢谢！

德国 L.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T14:03:35.007

对于 Cordova/PhoneGap 的当前版本 (=>3.5.0)，API URL 更改为[http://docs.phonegap.com/en/edge/cordova_events_events.md.html#Events](http://docs.phonegap.com/en/edge/cordova_events_events.md.html#Events) （抱歉，评论的声誉不够而是西蒙麦克唐纳的回答）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:56:07.300

IIRC 当您单击锁定/电源按钮时，您应该从 PhoneGap 获得“暂停”事件。

[http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#pause](http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#pause)

# google-chrome - Web 开发人员工具时间线的长期差距 - 它是什么？

> ID：12039353
> 
> 赞同：4
> 
> 时间：2012-08-20T14:16:39.343
> 
> 标签：google-chrome, google-chrome-devtools

我目前正在尝试优化网站。我经常在页面加载时遇到很长的间隙，似乎什么都没有发生。

所以我想，我使用 google chrome devtools 时间线工具来分析，发生了什么。

这就是它向我展示的内容：

![google chrome devtools时间线分析](../Images/392d0b25dcc18d38bdae60b742f814e2.png)

正如你所看到的，在 2.27s 和 3.97s 之间什么都没有。现在我问自己，那段时间会发生什么？为什么该工具在那段时间没有向我显示任何内容？是否存在 devtools 时间表未涵盖的流程？

我的怀疑是，视频标签可能在那段时间被初始化，因为我在页面上有一个视频标签，但我不是 100% 确定，如果这是原因。

是否有人也遇到过这样的差距并且知道当时的问题是什么？

# unicode - 通过浏览器支持 Unicode

> ID：12039354
> 
> 赞同：14
> 
> 时间：2012-08-20T14:16:41.040
> 
> 标签：unicode, fonts, icons, icon-fonts

我正在使用[带有图标但没有图像的 CSS 按钮](http://www.paulund.co.uk/css-buttons-with-icons-but-no-images)。图标是使用 unicode 值生成的。
在这个问题上，我遇到了一些浏览器不支持某些 unicode 值的问题。因此，它不是正确的图标，而是显示一些不需要的符号。

要在任何浏览器中提供对 Unicode 的支持，我们必须遵循哪些步骤？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T16:04:26.573

这主要是一个字体问题，但是如果您的 CSS 中列出的字体不涵盖某些字符，那么不同的浏览器将使用不同的备用字体。解决方法是尝试查找可能涵盖您使用的所有字符的字体列表。这样做的难度很大程度上取决于您使用的字符。在按钮中使用最近引入的字符大多没有意义，因为图像更可靠。在文本中正确使用字符是一个不同的问题。有关详细信息，请参阅我[的在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:47:12.117

所有支持 Unicode 的浏览器都支持所有字符代码，但并非所有字体都具有所有 Unicode 字符的字符字形。

因此，要获得对所需字符的支持，您需要以所有不同操作系统使用的格式提供具有这些字符的字体的下载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-09T13:29:24.187

**[您可以使用Icomoon App](https://icomoon.io/app/#/select)**等工具创建自己的字体。

Icomoon 应用程序允许您执行以下各项操作：

*   从几种流行的图标字体中获取一个或多个图标
*   上传其他字体，可以是图标字体，也可以是常规字体
*   从任意数量的可用字体中组合任意数量的图标
*   为您需要的任何字符设置 UNICODE 十六进制值
*   导出和/或保存您创建的字体集

* * *

我使用 Icomoon 应用程序来创建**[Emoji 表情字体](https://github.com/jslegers/emoji-icon-font)**以及在每个项目的基础上创建自定义图标字体。

要在 CSS 中包含图标字体，您可以包含以下代码：

```
@font-face {
    font-family: 'myfont';
    src:url('fonts/myfont.eot?-td2xif');
    src:url('fonts/myfont.eot?#iefix-td2xif') format('embedded-opentype'),
        url('fonts/myfont.woff?-td2xif') format('woff'),
        url('fonts/myfont.ttf?-td2xif') format('truetype'),
        url('fonts/myfont.svg?-td2xif#myfont') format('svg');
    // Different URLs are required for optimal browser support
    // Make sure to :
    // 1) replace the URLs with your font's URLs
    // 2) replace `#myfont` with the name of your font
    font-weight: normal; // To avoid the font inherits boldness
    font-style: normal; // To avoid font inherits obliqueness or italic
}

.icon {
    font-family: 'myfont', Verdana, Arial, sans-serif; // Use regular fonts as fallback
    speak: none; // To avoid screen readers trying to read the content
    font-style: normal; // To avoid font inherits obliqueness or italic
    font-weight: normal; // To avoid the font inherits boldness
    font-variant: normal; // To avoid the font inherits small-caps
    text-transform: none; // To avoid the font inherits capitalization/uppercase/lowercase
    line-height: 1; // To avoid the font inherits an undesired line-height
    -webkit-font-smoothing: antialiased; // For improved readability on Webkit
    -moz-osx-font-smoothing: grayscale; // For improved readability on OSX + Mozilla
} 
```

要在 HTML 中使用图标，您可以执行以下操作：

```
<!-- Method 1 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family for an entire HTML element -->
<!-- Define your icon fonts in your CSS font-family after your regular fonts  -->
<!-- This means that regular characters are default. Icons are a fallback  -->
<!-- Use UTF-8 characters directly in your HTML for improved human readability -->
<div class="rate"><p>I rate this movie ★★★★☆!!</p></div>

<!-- Method 2 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family for an entire HTML element -->
<!-- Define your icon fonts in your CSS font-family after your regular fonts  -->
<!-- This means that regular characters are default. Icons are a fallback  -->
<!-- Use entity codes in your HTML when UTF-8 support is uncertain -->
<div class="rate"><p>I rate this movie &#9733;&#9733;&#9733;&#9733;&#9734;!!</p></div>

<!-- Method 3 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family only for the icons but not the HTML elements that include them -->
<!-- Define your icon fonts in your CSS font-family before your regular fonts  -->
<!-- This means that icons are default. Regular characters are a fallback  -->
<!-- Use UTF-8 characters directly in your HTML for improved human readability -->
<p>I rate this movie <span class="icon">★★★★☆&lt;/span>!!</p>

<!-- Method 4 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family only for the icons but not the HTML elements that include them -->
<!-- Define your icon fonts in your CSS font-family before your regular fonts  -->
<!-- This means that icons are default. Regular characters are a fallback  -->
<!-- Use entity codes in your HTML when UTF-8 support is uncertain -->
<p>I rate this movie <span class="icon">&#9733;&#9733;&#9733;&#9733;&#9734;</span>!!</p>

<!-- Method 5 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family only for the icons and use a separate HTML tag for each icon -->
<!-- Define your icon fonts in your CSS font-family before your regular fonts  -->
<!-- This means that icons are default. Regular characters are a fallback  -->
<!-- Use UTF-8 characters directly in your HTML for improved human readability -->
<p>I rate this movie
    <span class="icon">★&lt;/span>
    <span class="icon">★&lt;/span>
    <span class="icon">★&lt;/span>
    <span class="icon">★&lt;/span>
    <span class="icon">☆&lt;/span>
    !!
</p>

<!-- Method 6 -->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family only for the icons and use a separate HTML tag for each icon -->
<!-- Define your icon fonts in your CSS font-family before your regular fonts  -->
<!-- This means that icons are default. Regular characters are a fallback  -->
<!-- Use entity codes in your HTML when UTF-8 support is uncertain -->
<p>I rate this movie
    <span class="icon">&#9733;</span>
    <span class="icon">&#9733;</span>
    <span class="icon">&#9733;</span>
    <span class="icon">&#9733;</span>
    <span class="icon">&#9734;</span>
    !!
</p>

<!-- Method 7-->
<!--- * * * * * * * * * * * * -->
<!-- Set a font-family only for the icons and use a separate HTML tag for each icon -->
<!-- Define your icon fonts in your CSS font-family before your regular fonts  -->
<!-- This means that icons are default. Regular characters are a fallback  -->
<!-- Use the 'content' style rule with a ':before selector' in your CSS -->
<p>I rate this movie
    <span class="icon icon-star"></span>
    <span class="icon icon-star"></span>
    <span class="icon icon-star"></span>
    <span class="icon icon-star"></span>
    <span class="icon icon-star-unfilled"></span>
    !!
</p> 
```

如果您想选择方法 7，则需要一些额外的 CSS 代码。这个 CSS 代码看起来像这样：

```
.icon-star:before {
    content: "\2605";
}

.icon-star-unfilled:before {
    content: "\2606";
} 
```

**[Iconic](https://useiconic.com/)**、**[Font Awesome](http://fortawesome.github.io/Font-Awesome/)**或**[Glyphicons](http://glyphicons.com/)**等图标字体通常都使用方法 7。这是为了避免您必须从备忘单中复制粘贴特殊字符或被迫使用 HTML 实体。

It is, however, a method that has several downsides. First of all, it requires support for the `:before` CSS selector and the use of an escape sequence for UNICODE characters. Neither IE6-7 nor [**certain versions of Webkit**](https://stackoverflow.com/questions/9241519/webkit-css-content-unicode-bug) provide this support.

Another downside is that you have to use a seperate HTML tag for each icon, with each tag corresponding to one character from the icon font. Displaying several icons within HTML tag is not possible with method 7, unlike with other methods.

Other methods have their own downsides, though. Methods 1, 3 and 5 require you to copy-paste the character from a cheat sheet or use means to put the character itself within your code. Your code editor may not be capable of displaying the character or it may display a different character from the one in your icon font if the icon font uses a non-standard mapping that character.

Methods 2, 4 and 6 do not require you to copy-paste the character, however it makes your code less readable by humans and makes any changes to the code more prone to human error. Also, as you will need to look up the HTML-entity code for each of the icons you want to use or you'll need to memorize them. While the same obviously applies to the classes used in method 7 as well, those classes are much easier to memorize than an HTML entity code.

# ruby-on-rails - 是否有在 haml 中创建车把块的助手？

> ID：12039355
> 
> 赞同：1
> 
> 时间：2012-08-20T14:16:44.080
> 
> 标签：ruby-on-rails, haml, handlebars.js

因为在 haml 编译为 html 之后会评估车把标签，并且车把在 haml 中算作平面文本，所以您不能缩进逻辑

```
 {{#if misc}}
  %b Misc Products
  Total:
  {{misc_total}}
  {{#each misc}}
  {{price_charged}}
  {{notes}}
  {{/each}}
  {{/if}} 
```

这很难阅读。我做了一个 rails helper 让这个看起来更好看*。

```
def handlebars_helper(helper, &block)
  raise ArgumentError, "Missing block" unless block_given?
  open = ActiveSupport::SafeBuffer.new("{{##{helper}}}") # helper opening
  open.safe_concat capture(&block)
  open.safe_concat("{{/#{helper.split.first}}}") # helper closing
  concat(open)
end 
```

它可以让你编写看起来像这样的haml

```
 - handlebars_helper 'if misc' do
    %b Misc Products
    Total:
    {{misc_total}}
    - handlebars_helper 'each misc' do
      {{price_charged}}
      {{notes}} 
```

以前有没有这样做过，或者我有更好的方法吗？

*这个助手看起来有点乱，我对积木不太满意，我该如何清理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:08:15.310

如果你想使用 HAML 生成把手代码，你可以使用[hamlbars](https://github.com/jamesotron/hamlbars)，它会为你提供一些帮助帮助缩进的助手。不幸的是，你仍然会被 if/else 周围的尴尬缩进所困。

我推荐[Emblem.js](https://github.com/machty/emblem.js)作为替代方案……语法比 HAML 更接近 Slim，但不会有丑陋的帮助代码污染你的模板，只是为了保留缩进。免责声明：我写了会徽。

# smalltalk - 使用 Pharo 1.4 部署 Seaside 3.0 应用程序时使用哪个映像？

> ID：12039364
> 
> 赞同：5
> 
> 时间：2012-08-20T14:17:28.307
> 
> 标签：smalltalk, pharo, seaside

我在 Pharo 1.4 中开发了一个 Seaside 3.0 应用程序，并希望在 Linode 上部署它。

为此，我将我的应用程序加载到什么（小）图像中？如何？

我在 Pharo Jenkins 服务器上找到了[Project Pharo Kernel 1.4 Seaside](https://ci.lille.inria.fr/pharo/view/Pharo-Kernel%201.4/job/Pharo%20Kernel%201.4%20Seaside/ "Project Pharo Kernel 1.4 Seaside")，但由于它似乎没有图形用户界面，我不知道如何将我的应用程序加载到其中以及如何配置 Seaside。使用这张图片是个好主意吗？我将如何配置它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T16:14:23.777

我认为你能做的最好的事情就是拍摄常规的“1.4 夏季”图像并执行。

```
ScriptLoader new cleanUpForProduction. 
```

这将为您提供完美运行的 9m 大小的图像。

# c - 删除 HTTP 标头信息

> ID：12039366
> 
> 赞同：7
> 
> 时间：2012-08-20T14:17:32.583
> 
> 标签：c, http, sockets, header

`recv()`在 C 中，有没有办法在套接字上使用时排除数据附带的 HTTP 标头信息？我正在尝试读取一些二进制数据，而我想要的只是实际的二进制信息，而不是 HTTP 标头信息。当前接收到的数据如下所示：

```
HTTP/1.1 200 OK
Content-Length: 3314
Content-Type: image/jpeg
Last-Modified: Tue, 20 Mar 2012 14:51:34 GMT
Accept-Ranges: bytes
ETag: "45da99f1a86cd1:6b9"
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Date: Mon, 20 Aug 2012 14:10:08 GMT
Connection: close 

╪ α 
```

我只想读取文件的二进制部分。（这显然不是所有的二进制文件，因为我将 recv 循环的输出打印为字符串并且第一个 NULL 字符在那个小二进制字符串之后，所以只显示了那么多）。

我只需要摆脱标题部分，有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T14:26:00.363

你最好使用一些 HTTP 解析库，比如[curl](http://curl.haxx.se/)

如果你想自己做：

您可以搜索分隔 HTTP 标头和内容的`'\r\n\r\n'`(two `\r\n`)，然后使用字符串/缓冲区。

此外，您需要`Content-Length`从标头中获取并读取那么多字节作为 http 内容。

就像是：

```
/* http_resp has data read from recv */
httpbody = strstr(http_resp, "\r\n\r\n");
if(httpbody) 
    httpbody += 4; /* move ahead 4 chars
/* now httpbody  has just data, stripped down http headers */ 
```

注意：确保`strstr`没有超出内存，可能正在使用`strnstr`（不确定是否存在）或类似的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T14:26:16.347

我认为您需要提取 的值`Content-Length`才能知道要读取的二进制数据的大小，否则将无法知道是否已收到所有数据。一个简单的消费和忽略头部部分的方法是逐字节读取传入的数据，直到`"\r\n\r\n"`遇到，这表示头部部分的结束和内容的开始。

# ruby-on-rails - 未初始化的常量错误在 Rails 初始化程序中加载类/模块

> ID：12039373
> 
> 赞同：0
> 
> 时间：2012-08-20T14:17:58.627
> 
> 标签：ruby-on-rails, webhooks, stripe-payments

我正在使用[https://github.com/integrallis/stripe_event](https://github.com/integrallis/stripe_event)将 Stripe 的 webhook 集成到 Rails 应用程序中。我正在努力让我的代码按照 gem 文档中的示例工作，其中使用初始化程序来指示哪些代码响应特定事件。Rails 似乎没有（自动）在初始化程序中加载我的模块。

我正在正确配置自动加载路径：

```
# config/application.rb

config.autoload_paths += %W(#{config.root}/lib) 
```

条带初始化器：

```
#config/initializers/stripe.rb

stripe_config = YAML.load_file(Rails.root.join('config', 'stripe.yml'))[Rails.env]
Stripe.api_key = stripe_config["secret_key"]
STRIPE_PUBLIC_KEY = stripe_config["publishable_key"]

StripeEvent.setup do
  # Not sure if I need this to load my module
  require 'stripe_event_handlers' # => true

  subscribe 'customer.subscription.created' do |event|
    StripeEventHanders.handle_customer_subscription_created(event) # Define subscriber behavior
  end
end 
```

这是我的自定义模块（尽管我也将它作为一个类尝试过）：

```
#lib/stripe_event_handlers.rb

module StripeEventHandlers

  def handle_customer_subscription_created(event) # Define subscriber behavior
    puts event
  end
end 
```

这是我的测试：

```
require 'test_helper'

# --- Run this in the console to get event response for mocking ---
#serialized_object = YAML::dump(Stripe::Event.retrieve('evt_0Cizt88YP0nCle'))
#filename = Rails.root.join('test/fixtures/stripe_objects', 'customer_subscription_created.yml')
#File.open(filename, 'w') {|f| f.write(serialized_object) }

class StripeEvent::WebhookControllerTest < ActionController::TestCase

  def test_mock_event
    event_id = 'evt_0Cizt88YP0nCle'
    event = YAML.load_file(Rails.root.join('test/fixtures/stripe_objects', 'customer_subscription_created.yml'))
    Stripe::Event.expects(:retrieve).with(event_id).returns(event)
    assert_equal Stripe::Event.retrieve(event_id), event
  end

  def test_customer_subscription_created_webhook
    event_id = 'evt_0Cizt88YP0nCle'
    event = YAML.load_file(Rails.root.join('test/fixtures/stripe_objects', 'customer_subscription_created.yml'))
    Stripe::Event.expects(:retrieve).at_most(2).with(event_id).returns(event)
    # This should be a raw post request but that doesn't seem to come through
    # on the stripe_event / rails side in the params hash. For testing
    # purposes, we can just use a get request as the route doesn't specify an
    # HTTP method.
    get :event, :use_route => :stripe_event, :id => event_id
    assert_response :success
  end
end 
```

这是我的测试结果失败：

```
StripeEvent::WebhookControllerTest
    ERROR (0:00:00.043) test_customer_subscription_created_webhook
          uninitialized constant StripeEventHanders
        @ config/initializers/stripe.rb:10:in `block (2 levels) in <top (required)>'

     PASS (0:00:00.053) test_mock_event

Finished in 0.055477 seconds.

2 tests, 1 passed, 0 failures, 1 errors, 0 skips, 2 assertions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:55:28.393

您只是缺少 中的字母`l`。`StripeEventHandlers`

```
subscribe 'customer.subscription.created' do |event|
  StripeEventHanders.handle_customer_subscription_created(event)
end 
```

另外，`handle_customer_subscription_created`应该定义为类方法：

```
module StripeEventHandlers

  def self.handle_customer_subscription_created(event) # Define subscriber behavior
    puts event
  end
end 
```

# c# - 如何跟踪用户选择的最后一个文件夹？

> ID：12039377
> 
> 赞同：10
> 
> 时间：2012-08-20T14:18:09.993
> 
> 标签：c#, directory

我认为使用应用程序设置可以解决问题，但我没有让它工作。这就是我所拥有的：

```
private void btnBrowse_Click(object sender, EventArgs e)
        {
            if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
            {
                // I want to open the last folder selected by the user here.
            } 
```

当用户单击此按钮时，我想打开浏览窗口到他访问的最后一个文件夹并保存它。下次他单击该按钮时，它将自动选择该文件夹。

我在想也许我可以使用可以在运行时更改的用户变量，但我没有让它工作。谁能帮我一把？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-28T13:56:55.120

转到设置页面，您创建的项目的项目设计器，然后在应用程序中添加文件夹路径变量。现在添加以下代码以恢复最后选择的文件夹路径。

```
FolderBrowserDialog folderBrowser = new FolderBrowserDialog();
folderBrowser.Description = "Select a folder to extract to:";
folderBrowser.ShowNewFolderButton = true;
folderBrowser.SelectedPath = Properties.Settings.Default.Folder_Path;
//folderBrowser.SelectedPath = project_name.Properties.Settings.Default.Folder_Path;

if (folderBrowser.ShowDialog() == DialogResult.OK)
{

    if (!String.IsNullOrEmpty(Properties.Settings.Default.Folder_Path))
        Properties.Settings.Default.Folder_Path = folderBrowser.SelectedPath;

    Properties.Settings.Default.Folder_Path = folderBrowser.SelectedPath;
    Properties.Settings.Default.Save();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:25:13.570

有两个地方可以找到用户最后访问的文件夹：

1.  `Recent Files and Folders`： 在这里能找到它：`C:\Documents and Settings\USER\Recent`
2.  `Registry`：在注册表中看这里：`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\OpenSaveMRU`

您可以使用此代码段找到它：

```
public static string GetLastOpenSaveFile(string extention)
{
    RegistryKey regKey = Registry.CurrentUser;
    string lastUsedFolder = string.Empty;
    regKey = regKey.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ComDlg32\\OpenSaveMRU");

    if (string.IsNullOrEmpty(extention))
        extention = "html";

    RegistryKey myKey = regKey.OpenSubKey(extention);

    if (myKey == null && regKey.GetSubKeyNames().Length > 0)
        myKey = regKey.OpenSubKey(regKey.GetSubKeyNames()[regKey.GetSubKeyNames().Length - 2]);

    if (myKey != null)
    {
        string[] names = myKey.GetValueNames();
        if (names != null && names.Length > 0)
        {
            lastUsedFolder = (string)myKey.GetValue(names[names.Length - 2]);
        }
    }

    return lastUsedFolder;
} 
```

或者

在 Windows XP 中，当您在保存文件的目录上按 Save 时`SaveFileDialog`，将设置为新的当前工作目录（在 中的那个`Environment.CurrentDirectory`）。

这样，当您重新打开 时`FileDialog`，它会在与以前相同的目录中打开。

通过设置`FileDialog.RestoreDirectory = true`，当你关闭`FileDialog`原来的工作目录时会恢复。

在 Windows Vista/7 中，行为始终为`FileDialog.RestoreDirectory = true`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:32:01.713

应用程序设置可以解决问题。
[更详细的版本在这里](http://social.msdn.microsoft.com/Forums/en/Vsexpressvb/thread/ca7ed78d-b8d9-4da3-b34c-45664e3ec89c)

> 使用字符串类型的设置
> 
> 为每个按钮创建一个设置并将路径存储在那里。然后使用设置作为ofd.InitialPath
> 
> 使用上面的代码示例，试试这个：
> 
> 在解决方案资源管理器中右键单击您的应用程序名称，单击设置选项卡名称 = Button1Path 类型 = 字符串范围 = 用户
> 
> 然后使用这个：

```
private void btnBrowse_Click(object sender, EventArgs e)
{
    fbFolderBrowser.InitialDirectory=this.Settings.Button1Path;
    if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
    {
        // I want to open the last folder selected by the user here.
        this.Settings.Button1Path=fbFolderBrowser.SelectedPath
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T14:39:27.433

您可以轻松跟踪上次选择的文件夹，如下所示：

```
public String LastSelectedFolder;

private void btnBrowse_Click(object sender, EventArgs e)
{
    fbFolderBrowser.InitialDirectory=this.Settings.Button1Path;
    if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
    {
        // Save Last selected folder.
        LastSelectedFolder = fbFolderBrowser.SelectedPath;
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-05-01T02:47:39.137

我知道这是一个非常古老的线程，但没有一个答案指向在用户的最后一个位置重新打开文件浏览器的最简单方法。

只需定义 RestoreDirectory = true。检查示例

```
var fd = new OpenFileDialog
   {
       Filter = @"All Files|*.*",
       RestoreDirectory = true,
       CheckFileExists = true
   }; 
```

类 OpenFileDialog api 参考

[https://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.restoredirectory(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.restoredirectory(v=vs.110).aspx)

除非我误解了帖子的意图，否则这是迄今为止实现它的最简单方法。但是，如果您确实需要打印最后一个位置，请检查另一个

# android - 在 ListView 中捕获 TextView 点击

> ID：12039378
> 
> 赞同：2
> 
> 时间：2012-08-20T14:18:15.783
> 
> 标签：android, listview, onclick, textview, linkify

我有一个包含 4 个 TextView 的自定义 ListView。现在，TextViews 必须是可链接的。由于 Linkify 在 ListView 中不起作用，我创建了一个 callIntent 函数来查看链接是否可点击。但是如果没有可点击的链接，我想开始一个新的活动。我使用以下代码：

```
 lvMembersList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

          final TextView txtLine1 = (TextView) arg1.findViewById(R.id.tv_member_details_line1);
          final TextView txtLine2 = (TextView) arg1.findViewById(R.id.tv_member_details_line2);
          final TextView txtLine3 = (TextView) arg1.findViewById(R.id.tv_member_details_line3);
          final TextView txtLine4 = (TextView) arg1.findViewById(R.id.tv_member_details_line4);

         txtLine1.setOnClickListener(new OnClickListener() {
                              public void onClick(View v) {
                                     callIntent(1);
                              }
                       });

         txtLine2.setOnClickListener(new OnClickListener() {
                              public void onClick(View v) {
                                     callIntent(2);
                              }
                       });

         txtLine3.setOnClickListener(new OnClickListener() {
                              public void onClick(View v) {
                                     callIntent(3);
                              }
                       });

         txtLine4.setOnClickListener(new OnClickListener() {
                              public void onClick(View v) {
                                     callIntent(4);
                              }
                       }); 
```

}}

现在，当我第一次单击一个项目时，TextView 侦听器正在设置。个人点击仅在第二次之后有效。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:21:48.790

将此代码放在`getView()`适配器中的方法中。`onItemClick`当您单击列表视图的一行时，会调用您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:57:20.317

为每个文本视图添加以下属性（布局中的四个文本视图将用作自定义列表项）

```
android:onClick="onTextView1_click" 
```

- 您必须对所有 4 个文本视图执行此操作才能单独跟踪点击事件-

* * *

然后在代码中添加以下方法以在单击 textview1 时触发

```
public void onTextView1_click(View view)
{
    final int position = (Integer) view.getTag();
//implementation (Which needs to be done when someone click textview1)
} 
```

同样最重要的是，您必须将位置添加为适配器类中 getViewMethod 的标记。这将有助于跟踪列表视图中单击的项目

```
holder.textView1.setTag(position); 
```

并且您可以按照我在“onTextView1_click(View view)”方法“Position variable”中指出的那样访问该值

* * *

在列表视图中--->

```
android:focusable="false" 
```

在初始化列表视图后不久，在代码中添加“setItemsCanFocus(true)”。这表示可聚焦项目包含在列表视图中的每个项目中。

```
lvMembersList = (ListView) findViewById(R.id.NameOfListTView);
lvMembersList.setItemsCanFocus(true);                            // <---------[X] 
```

# c# - “不包含...的定义并且没有扩展方法...接受类型错误的第一个参数

> ID：12039379
> 
> 赞同：0
> 
> 时间：2012-08-20T14:18:18.230
> 
> 标签：c#, asp.net

我有以下错误：

```
'DirectActivity' does not contain a definition for 'ddl_jobcode_Id2' and no extension method 'ddl_jobcode_Id2' accepting a first argument of type 'DirectActivity' could be found (are you missing a using directive or an assembly reference?) 
```

在我的 aspx 中，我创建了一个 DropDownList，如下所示：

```
<asp:DropDownList ID="ddl_jobcode_Id2" runat="server" DataSourceID="ddl_ActivityType2"
                            DataTextField="jobCode" DataValueField="ID" SelectedValue='<%# Bind("jobCode_ID2", "{0}") %>'
                            OnDataBound="ddl_jobcode_Id2_DataBound" 
                            onselectedindexchanged="ddl_jobcode_Id2_SelectedIndexChanged1" 
                            AutoPostBack="True">
                        </asp:DropDownList> 
```

我需要添加一个控件，以便在我写的 .cs 文件中

```
protected void ddl_jobcode_Id2_SelectedIndexChanged1(object sender, EventArgs e)
{
    if(this.ddl_jobcode_Id2.SelectedValue == "19" )
     {  ...}} 
```

它只是显示这个错误`ddl_jobcode_Id2`

谁能帮帮我？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:31:09.190

我注意到您正在将值绑定到您的`SelectedValue`属性。这可能意味着您`DropDownList`在某些`Template`数据控件中具有此功能。在这种情况下，您需要为您的模板已启用的数据控件的事件设置一个处理程序（如果不知道确切的控件，我无法判断），并且`FindControl`（`"ddl_jobcode_Id2"`）您的方式进入您`DropDownList`的代码隐藏。

# php - 如何动态更改页眉和页脚？

> ID：12039382
> 
> 赞同：2
> 
> 时间：2012-08-20T14:18:43.743
> 
> 标签：php, javascript, css, frameworks

早上好，

我正在创建自己的框架以在我的 PHP 项目中使用，并且我正在考虑某种方法可以在页面的页眉部分添加 .CSS 文件，在页脚中添加 .JS 文件和脚本（保持 HTML 干净和有效），但是 - 这一切都是动态的。

我的意思是，例如，假设我有以下结构：

1.  索引.php
2.  成分
    *   组件1
        *   组件1.php
        *   组件1.js
        *   组件1.css

例如，我想在 index.php 中动态包含我需要的每个文件，以保持代码干净。

再比如假设我直接在component1.php中插入js，是否可以动态添加到component1.js中（无需人工，以后节省时间）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:30:03.820

一种可能的方法是将您的整个模板/视图/无论您想调用什么都表示为一个对象：

```
class View {
    // ...
} 
```

该`index.php`文件可以确定要使用哪些组件，创建它们，然后轮询它们以获取任何所需的 CSS/JS 文件：

```
$view = new View();

foreach ($components as $component) {
    $cmp = new $component();
    $view->addCss($cmp->getCss());
    $view->addJs($cmp->getJs());
} 
```

一旦所有内容都包含在内，那么`index.php`就可以渲染整个内容：

```
$view->render(); 
```

显然这只是一个示例，您的语法会有所不同，但希望您能理解。

**编辑：**您还可以通过直接将组件添加到视图来使逻辑更简洁，并让视图的内部逻辑处理轮询/添加 CSS/JS，而不是`index.php`. 当然，这实际上取决于框架中的“组件”应该是什么，所以我将由您决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:50:52.960

在开始输出任何内容之前，如何在顶部包含 js 和 css 资产的一个非常简单的示例：

```
// somewhere in the beginning, before html output
$js = array();
$css = array();

$css[] = 'all_pages.css';
$js[] = 'all_pages.js';
if (some_condition_based_on_page)
{
  $css[] = 'some_page_specific.css';
  $js[] = 'some_page_specific.js';
}

...

// in your view where you build the head section
foreach ($css as $item)
{
  echo "<link rel='stylesheet' href='{$item}' type='text/css'>";
}

...

// in your view where you build the footer
foreach ($js as $item)
{
  echo "<link src='{$item}' type='text/javascript'>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:28:15.663

最简单且更便携的方法是包含与特定模式匹配的所有文件，例如 /components/component1/header.css

这会带来两个并发症。一是性能（您需要检查所有组件的所有目录）。另一个是组件的隔离，即，如果您需要将给定的 CSS 包含在另一个可能存在或不存在的 CSS 之前或之后，会发生什么？

您可以尝试通过在每个组件中包含一个“清单”来解决这两个问题，它可以首先指定任何文件的位置以及它们应该包含的位置。然后你的处理被简化为检查“组件”目录并解码所有清单，并在一系列指令向量中“编译”它（例如 $CSSToBeIncludedInThisOrder[] ）。您还可以将编译后的对象序列化为缓存文件。当然，对组件的任何更改都应包括删除已编译的元清单。

稍后，您可能会在清单指令中包含条件优先级等。

所有这一切都应该在任何东西发送到客户端浏览器之前完成（如果组件 ZZZ 希望改变 ob_ 状态，或者可能是编码，或者是一个下载覆盖组件并且想要发送一个 Content-Type 的 application/octet-stream ?)，但“编译”应该允许保持较低的感知延迟。

所以让我澄清一下：

```
1\. index.php checks whether a metamanifest.cache file exists.
2\. If it does, it runs something like
    $__META = unserialize(file_get_contents($METACACHE));
   and goes on to #4.
3\. If it does not, opendirs/readdirs the components directory,
   looks what files are there, decides (but does not do yet) what to do with them,
   placing those decisions in $__META, e.g. $__META['HeaderJS'][].
4\. Now HTML generation begins: the __META array is walked and everything that
   needs doing gets done (headers, inclusion of JS in heads, etc.). 
```

阶段 #3 甚至可能执行一些重复检查或版本控制，比如你有两个组件都需要包含“jQuery.js”；系统可以声明冲突或决定通过仅包括其中之一，从而进一步减少处理时间。

# asp.net - bing 映射 ajax 控件 - 将 vb.net 文本框位置传递给 javascript

> ID：12039384
> 
> 赞同：0
> 
> 时间：2012-08-20T14:19:00.993
> 
> 标签：asp.net, ajax, vb.net, asp.net-ajax, bing-maps

我正在尝试从许多英国邮政编码动态生成 bing 地图。尽管可以使用硬编码位置的示例，但我正在努力寻找一个示例，该示例显示如何将邮政编码输入到 asp.net (VB) 文本框（或实际上是 5 个框）中，并且一旦单击按钮，这些变量将被传递给bing 地图并显示（不幸的是我的 Javascript 不是很好）

我一直在使用“交互式 SDK”，这个例子接近我想要的：http: [//www.bingmapsportal.com/ISDK/AjaxV7#Pushpins5](http://www.bingmapsportal.com/ISDK/AjaxV7#Pushpins5)

有谁知道如何调整它，以便我可以传递几个文本框的值以在地图上显示几个图钉？

提前致谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:58:33.130

Just curious, why do they need to be server side textbox?

Their json result request can handle just about any query you can throw at it. Simply concatenate your text boxes into a search query separated by commas.

```
function callSearchService(credentials) {
    var searchString =document.getElementById('txtStreetNum').value + ' ' +  document.getElementById('txtQueryStr').value + ' , ' + document.getElementById('txtQueryCity').value + ' , ' + document.getElementById('txtQueryState').value + ' , ' + document.getElementById('txtQueryPostal').value;
    var geocodeRequest = "http://dev.virtualearth.net/REST/v1/Locations?query=" + encodeURI(searchString) + "&output=json&jsonp=searchServiceCallback&key=" + credentials;
} 
```

If for some reason, you really need to get the text from an asp.net text control (Maybe you want to pre-load it for a user), you can do it like this;

```
var aspTextBoxValue = '<%=ASPTextBox.Text%>'; 
```

To make it add different pushpins for different query box's you will need to do a few things:

1.  Concatenate separate searchStrings per query (`callSearchService` for each query)
2.  Make geocodeRequests for each query.
3.  Parse each result object and display the pushpin as seen in `searchServiceCallback` in the following example:

(Your example doesnt actually resemble and query / response parsing at all, here's one more suitable)

[Query and Response in Bing Maps](http://www.bingmapsportal.com/ISDK/AjaxV7#RESTServices1)

Don't expect my syntax to be perfect, although it may be error free, I'm just getting you off on the right foot without doing it for you. :)

# php - MySQL Fetch Array 每行函数

> ID：12039390
> 
> 赞同：0
> 
> 时间：2012-08-20T14:19:32.190
> 
> 标签：php, html, sql, database

这是我第一次使用这个网站，我最近开始做一个项目，该网页将显示两个表，其中一个表将从 SQL 数据库收集所有信息并将它们与表一起放入表中每行旁边的按钮允许您将该记录插入到另一个表中，到目前为止，这是我编写的代码：

```
//Include the Following Files
include 'connect.php';

//Select All Price Plans
$query = "SELECT * FROM pricing";
$result = mysql_query($query);

//Print all Plans in Table 
while ($pricing = mysql_fetch_array($result)) 
{
    echo "<table border=1>";
    echo "<tr>";
    echo "<td>" .$pricing['planID'].  "</td>";
    echo "<td>" .$pricing['planTitle']. "</td>";
    echo "<td>" .$pricing['planDescription']. "</td>";
    echo "<td>" .$pricing['planPricing']. "</td>";
    echo "<td>" . **<a href="'. $link .'">BUTTON HERE</a>** . "</td>";
    echo "</tr>";
    echo "<table>";
}  

//Assign $link to Case     
$link = '?run=planA'; 

//Pre-defined Functions
function planA()
{ 
$query = "INSERT into restaurant_plan (`planID`, `planTitle`, `planDescription`, `planPricing`) SELECT * FROM pricing WHERE planID='2' ";
$result = mysql_query($query);
} 

//Setting Case to Run Each Functions
if (isset($_GET['run'])) $linkchoice=$_GET['run']; 
else $linkchoice=''; 

switch($linkchoice)
{       
    case 'planA': 
    planA(); 
    break; 

    case 'planB': 
    planB(); 
    break;              
} 
```

任何人都可以建议任何指南或可能的示例，我如何*为每一行分配一个函数*？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:35:51.843

您的代码为表“定价”中的每条记录打印一个表，请改用此代码：

```
//Select All Price Plans
$mysqli = new mysqli("hostname", "username", "pass", "dbname");

$query = "SELECT * FROM pricing";

$result = $mysqli->query($query);

//Print all Plans in Table    

echo "Available Price Plans";          
echo "<table border=1>";
while ( $pricing = $result->fetch_assoc() ) {
    echo "<tr>";
    echo "<td>" .$pricing['planID'].  "</td>";
    echo "<td>" .$pricing['planTitle']. "</td>";
    echo "<td>" .$pricing['planDescription']. "</td>";
    echo "<td>" .$pricing['planPricing']. "</td>";
    echo "<td>" .'<a href="'. $link .'"><img style="border:none;" src="'. $icon .'" /></a>'. "</td>";
    //print a button as you mentioned
    echo "<td>"."<form action='#' method='get'><input type='hidden' name='id' value='".$pricing['planID']."'/><input type='submit' value='copy'/></form></td>";
    echo "</tr>";
}
echo "</table>"; 
```

和你的功能：

```
function planA()
{ 
    // get selected plan info
    $query = "SELECT * FROM pricing";
    $result = $mysqli->query($query);
    $row = $res->fetch_assoc();

    //copy info to table 'restaurant_plan'
    $query = "INSERT into restaurant_plan (".$_GET["id"].", ".$row["planTitle"].", ".$row["planDescription"].", ".$row["planPricing"].")";
    $result = $mysqli->query($query); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:27:21.357

不是答案，但如果您希望您的代码更干净、更易读/可维护，您应该使用插入了 PHP 的 HTML，而不是通过 PHP 回显 HTML：

```
<?php
//Select All Price Plans
$query = "SELECT * FROM pricing";
$result = mysql_query($query);

//Print all Plans in Table     
?>
Available Price Plans
<?php while ($pricing = mysql_fetch_array($result)) : ?>
    <table border=1>
        <tr>
            <td><?= $pricing['planID'] ?></td>
            <td><?= $pricing['planTitle'] ?></td>
            <td><?= $pricing['planDescription'] ?></td>
            <td><?= $pricing['planPricing'] ?></td>
            <td><a href="<?= $link ?>"><img style="border:none;" src="<?= $icon ?>" /></a></td>
        </tr>
    <table>
<?php endforeach; ?> 
```

另外，正如我在上面的评论中提到的，你应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:41:28.517

将表输出更改为以下内容：

> ```
> <table border="1">
> <?php
> while ($pricing = mysql_fetch_array($result)) { 
> ?>
>        <tr>
>        <td><?php echo $pricing['planID']; ?></td>
>        <td><?php echo $pricing['planTitle']; ?></td>
>        <td><?php echo $pricing['planDescription']; ?></td>
>        <td><?php echo $pricing['planPricing']; ?></td>
>        <td><a href='<?php echo $link; ?>'><img style="border:none;" src='<?php echo $icon; ?>' /></a></td> 
>        </tr>
>    <?php     
>    }  
>    ?>
> <table> 
> ```

仔细检查您的数据库连接，以确保可以检索数据。

# jquery - 使用 ajax 和/或 jQuery 上传文件（一次一个）

> ID：12039396
> 
> 赞同：0
> 
> 时间：2012-08-20T14:20:04.477
> 
> 标签：jquery

目前，我的表单显示 3 个“输入”字段，用于上传 3 个文件。这看起来很糟糕。

无论要上传的文件数量如何，我只想显示一个输入字段（和一个上传按钮）。

**它应该是这样工作的：**

一旦用户选择文件并单击上传按钮，选定的文件路径（名称）应显示在输入字段下方，并在其旁边显示“删除”文本，用户现在应该能够使用相同的输入字段和按钮选择下一个文件。我可以使用 ajax 或 jQuery 来实现吗？我相信这是在许多网站上很常见的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:21:39.570

看看Plupload，它似乎涵盖了你所需要的。 [http://www.plupload.com/](http://www.plupload.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:24:08.617

如果您使用 jquery 之类的东西，几乎总是有一个插件可以做您想做的事情。

例如，这里有一些可能对您有很好帮助的东西，请查看并告诉我是否可以：

[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:43:35.300

看看[Valums 的文件上传器](https://github.com/valums/file-uploader)。

不需要 jQuery 或任何其他 javascript 库。

# ruby - 使用带有哈希而不是数组的索引

> ID：12039400
> 
> 赞同：0
> 
> 时间：2012-08-20T14:20:17.807
> 
> 标签：ruby

我在一个家谱程序中使用以下方法将婚姻/配偶添加到一个人。@marages 是一个数组数组。

```
def add_spouse(spouse, mariage_date = nil, divorce_date = nil)
  @mariages.push([spouse, mariage_date, divorce_date]) unless @mariages.index{|(a, b, c)| a == spouse && b == mariage_date} 
  spouse.mariages.push(self) unless spouse.mariages.index{|(a, b, c)| a == self && b == mariage_date} 
end 
```

使用`unless @mariages.index{|(a, b, c)| a == spouse && b == mariage_date}`i 检查数组中的 mariage 是否已准备就绪。

现在我想将我的 mariages 保存在这样的哈希数组中

```
def add_spouse(spouse, mariage_date = nil, divorce_date = nil)
    @mariages.push({:spouse => spouse, :mariage_date => mariage_date, :divorce_date => divorce_date}) unless ...
    spouse.mariages.push({:spouse => self, :mariage_date => mariage_date, :divorce_date => divorce_date}) unless ... 
end 
```

有人可以帮助我调整除非部分来检查哈希是否尚未在数组中存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:27:21.517

由于您的数组现在包含哈希而不是其他数组，因此您不能使用“数组解包”（不确定官方术语是什么）。您将获得一个哈希实例，并且可以像往常一样访问它。

```
 @mariages.push({:spouse => spouse, 
                 :mariage_date => mariage_date, 
                 :divorce_date => divorce_date}) unless @mariages.index{|h| h[:spouse] == spouse && h[:mariage_date] == mariage_date} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:28:08.803

在进入`index`元素被迭代的块中是一个哈希，所以你应该使用

```
.. unless @mariages.index{|h| h[:spouse] == spouse && h[:mariage_date] == mariage_date} 
```

和

```
.. unless spouse.mariages.index{|h| h[:spouse] == self && h[:mariage_date] == mariage_date} 
```

PS：`mariage`拼写错误。应该是结婚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T16:28:00.827

根据您在推荐中提出的问题，我将执行以下操作。请注意，日期应该使用日期类，而婚姻中的伴侣也应该是类，包括出生和死亡等等。但希望您能看到如何将数据移动到知道如何处理它的对象中，随着事情变得越来越大，可以简化设计。（为了简单起见，我还和新娘和新郎一起去了，随意以家谱认可的方式改变它）。

每个人都会有一个与他们相关的婚姻，如果你有一个新娘和一个新郎，他们可以共享一个婚姻，但会有不同的婚姻列表。

```
class Marriage
  attr_accessor :marriage_date, :divorce_date, :bride, :groom

  def initialize(date, bride, groom)
    @marriage_date = date
    @bride = bride
    @groom = groom
  end

  def marriage_equals(m)
    return (@marriage_date == m.marriage_date) && 
           (@bride == m.bride) &&
           (@groom == m.groom)
  end    
end

class Marriages
  def initialize
    @marriages = []
  end

  def add_marriage(marriage)
    if (@marriages.any? { |m| m.marriage_equals(marriage) })
      puts "Marriage of #{marriage.groom} already listed"
      return false
    else
      puts "Added new marriage"
      @marriages.push(marriage)
      return true
    end
  end

end

m1 = Marriage.new("1-1-0002", "Wilma", "Fred")
m2 = Marriage.new("6-8-0003", "Betty", "Barney")
m3 = Marriage.new("2-8-8003", "Jane", "George")

marriages = [m1,m2]
p marriages.any? { |m| m.marriage_equals(m1) } # true
p marriages.any? { |m| m.marriage_equals(m3) } # false

m_list = Marriages.new
m_list.add_marriage(m1) # Added new marriage
m_list.add_marriage(m2) # Added new marriage
m_list.add_marriage(m2) # Marriage of Barney already listed 
```

# python - 如何在 python 2.7 中使用 distutils 进行增量构建？

> ID：12039410
> 
> 赞同：2
> 
> 时间：2012-08-20T14:20:56.870
> 
> 标签：python, build, python-2.7, distutils, python-2.6

我正在使用 Python 2.7 distutils 来构建 C++ 库。但是每次我发出构建命令时

```
python setup.py build 
```

所有目标文件都会重新构建，即使 c++ 文件没有改变。
我的一个朋友告诉我，Python 2.6 不会出现这种情况。

我对这个董事会的问题：

1.  有没有办法强制 distutils 增量构建代码？
2.  如果无法增量构建代码，
    2.1。有没有办法使用 Python 2.6 distutils 或
    2.2。是否可以更改 Python 2.7 distuils 包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:58:52.107

你不能那样做。编译后的 .o 文件以简单且错误的方式重用，因此在 2.7 中删除了此优化。有关详细信息，请参阅[http://bugs.python.org/issue5372](http://bugs.python.org/issue5372)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T22:32:45.057

我不知道这是否能解决您的确切问题，但我有一个类似的问题，我通过以下方法修复了：

我有一个相对较大的 C++ 包，它带有一个基于 cython 的 python 包装器。我最终做的是使用 CMake（它进行增量构建）将包编译为静态库，然后使用 cython 包装器在静态库中链接——尽管为了安全起见，它每次都重新编译，但它非常稳定。我的 setup.py 被黑是为了接受一些告诉 CMake 做什么的标志。

我的 setup.py 中处理 CMake 部分（[https://github.com/CoolProp/CoolProp/blob/master/wrappers/Python/setup.py](https://github.com/CoolProp/CoolProp/blob/master/wrappers/Python/setup.py)）的相关片段如下所示：

```
# ******************************
#       CMAKE OPTIONS
# ******************************

# Example using CMake to build static library:
# python setup.py install --cmake-compiler vc9 --cmake-bitness 64

if '--cmake-compiler' in sys.argv:
    i = sys.argv.index('--cmake-compiler')
    sys.argv.pop(i)
    cmake_compiler = sys.argv.pop(i)
else:
    cmake_compiler = ''

if '--cmake-bitness' in sys.argv:
    i = sys.argv.index('--cmake-bitness')
    sys.argv.pop(i)
    cmake_bitness = sys.argv.pop(i)
else:
    cmake_bitness = ''

USING_CMAKE = cmake_compiler or cmake_bitness

cmake_config_args = []
cmake_build_args = ['--config','"Release"']
STATIC_LIBRARY_BUILT = False
if USING_CMAKE:

    # Always force build since any changes in the C++ files will not force a rebuild
    touch('CoolProp/CoolProp.pyx')

    if 'clean' in sys.argv:
        if os.path.exists('cmake_build'):
            print('removing cmake_build folder...')
            shutil.rmtree('cmake_build')
            print('removed.')

    if cmake_compiler == 'vc9':
        if cmake_bitness == '32':
            generator = ['-G','"Visual Studio 9 2008"']
        elif cmake_bitness == '64':
            generator = ['-G','"Visual Studio 9 2008 Win64"']
        else:
            raise ValueError('cmake_bitness must be either 32 or 64; got ' + cmake_bitness)
    elif cmake_compiler == 'vc10':
        if cmake_bitness == '32':
            generator = ['-G','"Visual Studio 10 2010"']
        elif cmake_bitness == '64':
            generator = ['-G','"Visual Studio 10 2010 Win64"']
        else:
            raise ValueError('cmake_bitness must be either 32 or 64; got ' + cmake_bitness)
    else:
        raise ValueError('cmake_compiler [' + cmake_compiler + '] is invalid')

    cmake_build_dir = os.path.join('cmake_build', '{compiler}-{bitness}bit'.format(compiler=cmake_compiler, bitness=cmake_bitness))
    if not os.path.exists(cmake_build_dir):
        os.makedirs(cmake_build_dir)
    subprocess.check_call(' '.join(['cmake','../../../..','-DCOOLPROP_STATIC_LIBRARY=ON']+generator+cmake_config_args), shell = True, stdout = sys.stdout, stderr = sys.stderr, cwd = cmake_build_dir)
    subprocess.check_call(' '.join(['cmake','--build', '.']+cmake_build_args), shell = True, stdout = sys.stdout, stderr = sys.stderr, cwd = cmake_build_dir)

    # Now find the static library that we just built
    if sys.platform == 'win32':
        static_libs = []
        for search_suffix in ['Release/*.lib','Release/*.a', 'Debug/*.lib', 'Debug/*.a']:
            static_libs += glob.glob(os.path.join(cmake_build_dir,search_suffix))

    if len(static_libs) != 1:
        raise ValueError("Found more than one static library using CMake build.  Found: "+str(static_libs))
    else:
        STATIC_LIBRARY_BUILT = True
        static_library_path = os.path.dirname(static_libs[0]) 
```

# winforms - 如何在 Winforms (C#) 应用程序中加载图像文件夹？

> ID：12039413
> 
> 赞同：0
> 
> 时间：2012-08-20T14:21:05.770
> 
> 标签：winforms, image, load

我有图像文件夹，我想将其加载到我的 WinForms (C#) 应用程序中。一旦它被加载到我的应用程序中，然后当我点击任何应该成为“按钮”控制背景图像的图像时。做这个的最好方式是什么？

谢谢是提前。

# outlook - 将 Outlook 的“J”表情解码为文本

> ID：12039417
> 
> 赞同：2
> 
> 时间：2012-08-20T14:21:14.507
> 
> 标签：outlook, email-client, mime-message

Outlook 默认将“:)”转换为“J”。谷歌搜索显示 J 是表情符号的 Wingdings 字符，因此对于 Outlook 用户来说，它们看起来像正常的表情符号。

我想将这些“J”表情转换为 UTF-8 笑脸字符，以便我们其他人也能看到它们。但是在查看电子邮件的来源时，“J”笑脸线看起来像这样：

```
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">J<o:p></o:p></span></p> 
```

也就是说，就像您在每隔一行看到的普通 Outlook 格式一样。除了 Calibri 和 Times New Roman 之外，在源代码的任何地方都没有提到任何字体系列。那么 Outlook 是如何将这些 J 解码为表情符号的呢？我如何能？

```
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="Generator" content="Microsoft Word 14 (filtered medium)">
<!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><style><!--
/* Font Definitions */
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
    {font-family:Tahoma;
    panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin:0cm;
    margin-bottom:.0001pt;
    font-size:12.0pt;
    font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
    {mso-style-priority:99;
    color:blue;
    text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
    {mso-style-priority:99;
    color:purple;
    text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
    {mso-style-priority:99;
    mso-style-link:"Balloon Text Char";
    margin:0cm;
    margin-bottom:.0001pt;
    font-size:8.0pt;
    font-family:"Tahoma","sans-serif";}
span.dp-replycode
    {mso-style-name:dp-replycode;}
span.EmailStyle18
    {mso-style-type:personal-reply;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.BalloonTextChar
    {mso-style-name:"Balloon Text Char";
    mso-style-priority:99;
    mso-style-link:"Balloon Text";
    font-family:"Tahoma","sans-serif";}
.MsoChpDefault
    {mso-style-type:export-only;
    font-size:10.0pt;}
@page WordSection1
    {size:612.0pt 792.0pt;
    margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
    {page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang="EN-GB" link="blue" vlink="purple">
<div class="WordSection1">
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Some message
<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">J<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<div>
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:34:19.483

我只是个白痴。我使用客户端数据作为 Outlook 电子邮件的来源，因为我没有现成的 Outlook 客户端可用。经过自己设置和测试，family:Wingdings确实在源头。原来客户只是用“J”在他的电子邮件上签名！

现在查找 font-family:Wingdings 并将它们转换为 UTF-8 表情符号已经很简单了。

# javascript - 自定义内容滚动框的滚动条在拖动时跳跃

> ID：12039418
> 
> 赞同：0
> 
> 时间：2012-08-20T14:21:19.820
> 
> 标签：javascript

我使用 HTML、CSS 和 JavaScript 创建了一个自定义内容滚动框。当您尝试拖动滚动条时，它会跳到滚动条的左边缘。知道为什么我错过了什么吗？

```
var scrollbar = document.getElementById("scrollbar");
var barWidth = 300;
var scrollbarWidth = 40;

scrollbar.addEventListener("mousedown", function(e) {
    window.addEventListener("mousemove", hScroll, null);
}, null)

window.addEventListener("mouseup", function(e) {
    window.removeEventListener("mousemove", hScroll, null);
}, null);

function hScroll(e) {
    var scroller_pos = e.clientX - offset;
    if (scroller_pos <= 0) scroller_pos = 0;
    else if (scroller_pos >= barWidth-scrollbarWidth) scroller_pos = barWidth-scrollbarWidth;
    scrollbar.style.marginLeft = scroller_pos + "px";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:47:33.893

在 mousedown 上，您应该计算正方形与`bar`左边缘的距离与鼠标 x 位置与同一边缘的距离之间的偏移量。然后在移动时，您应该将其添加到正方形的新位置。

```
 _____
|     |
|   .<+--click
|___|_|
|<->|
  |
offset 
```

# objective-c - 将 CVOpenGLESTextureCacheCreateTextureFromImage 移植到普通的 OpenGL ES 方法

> ID：12039429
> 
> 赞同：1
> 
> 时间：2012-08-20T14:21:52.600
> 
> 标签：objective-c, ios, opengl-es, core-video

我正在开发一个应用程序，它将来自相机的视频帧输入到 OpenGL ES 纹理中以创建一些效果。该应用程序使用 Core Video 及其许多方便的方法来创建 OpenGL 纹理和缓存。

现在我想使用静态图像而不是视频缓冲区，并且我正在寻找标准的 OpenGL 方法来代替 Core Video 中可用的方法。

例如：

*   CVOpenGLESTextureRef;
*   CVOpenGLESTextureCacheRef;
*   CVOpenGLESTextureCacheCreateTextureFromImage();
*   CVOpenGLESTextureGetTarget();
*   CVOpenGLESTextureGetName();
*   CVOpenGLESTextureCacheFlush();

我可以使用哪些标准 OpenGL 类型和方法来代替上面的代码从法线图像加载和创建纹理？

谢谢

****编辑****

按照布拉德的建议，我能够取得一些进展......但仍然无法正常工作。我认为问题在于着色器期望两个单独的纹理能够正常工作。一个用于 Y 平面，一个用于 UV 平面。

这是用于设置它们的代码

```
// Y-plane
glActiveTexture(GL_TEXTURE0);
err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, _videoTextureCache, pixelBuffer, NULL, GL_TEXTURE_2D, GL_RED_EXT, _textureWidth, _textureHeight, GL_RED_EXT, GL_UNSIGNED_BYTE, 0, &_lumaTexture);
glBindTexture(CVOpenGLESTextureGetTarget(_lumaTexture), CVOpenGLESTextureGetName(_lumaTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

// UV-plane
glActiveTexture(GL_TEXTURE1);
err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, _videoTextureCache, pixelBuffer, NULL, GL_TEXTURE_2D, GL_RG_EXT, _textureWidth/2, _textureHeight/2, GL_RG_EXT, GL_UNSIGNED_BYTE, 1, &_chromaTexture);
glBindTexture(CVOpenGLESTextureGetTarget(_chromaTexture), CVOpenGLESTextureGetName(_chromaTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

所以我改变了它：

这是设置

```
glActiveTexture(GL_TEXTURE0);
glGenTextures(1, &_lumaImageTexture);
glBindTexture(GL_TEXTURE_2D, _lumaImageTexture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glActiveTexture(GL_TEXTURE1);
glGenTextures(1, &_chromaImageTexture);
glBindTexture(GL_TEXTURE_2D, _chromaImageTexture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

这就是我创建它们的方式

```
// Y-plane
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _lumaImageTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, _textureWidth, _textureHeight, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

// UV-plane
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _chromaImageTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, _textureWidth, _textureHeight, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

我猜问题出在 glTexImage2D 函数中的参数之一。我尝试了不同结果的不同组合......但从来没有正确的组合:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:44:57.957

所有这些方法所做的就是为您提供与 CVPixelBuffer 对应的 OpenGL ES 纹理。在 iOS 5.0 中引入这些之前，我们必须手动从 CVPixelBuffer 中获取像素数据并将其上传到纹理。您将对从另一个来源提取的静态图像使用相同的过程（除非您想使用某些 GLKit 便利类）。

以下是我用于上传静态图像的代码。首先，您需要将图像放入 BGRA 字节数组中：

```
if (shouldRedrawUsingCoreGraphics)
{
    // For resized image, redraw
    imageData = (GLubyte *) calloc(1, (int)pixelSizeToUseForTexture.width * (int)pixelSizeToUseForTexture.height * 4);

    CGColorSpaceRef genericRGBColorspace = CGColorSpaceCreateDeviceRGB();    
    CGContextRef imageContext = CGBitmapContextCreate(imageData, (int)pixelSizeToUseForTexture.width, (int)pixelSizeToUseForTexture.height, 8, (int)pixelSizeToUseForTexture.width * 4, genericRGBColorspace,  kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(imageContext, CGRectMake(0.0, 0.0, pixelSizeToUseForTexture.width, pixelSizeToUseForTexture.height), newImageSource);
    CGContextRelease(imageContext);
    CGColorSpaceRelease(genericRGBColorspace);
}
else
{
    // Access the raw image bytes directly
    dataFromImageDataProvider = CGDataProviderCopyData(CGImageGetDataProvider(newImageSource));
    imageData = (GLubyte *)CFDataGetBytePtr(dataFromImageDataProvider);
} 
```

在上面的代码中，`newImageSource`是一个CGImageRef。这显示了用于提取位图数据的两种不同路径，在我运行的每个基准测试中，第一个路径出奇地快。

一旦你有了它，你只需要将它上传到你的 OpenGL ES 纹理：

```
 glBindTexture(GL_TEXTURE_2D, outputTexture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)pixelSizeToUseForTexture.width, (int)pixelSizeToUseForTexture.height, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData); 
```

这假设您已经使用以下内容创建了 outputTexture：

```
 glActiveTexture(GL_TEXTURE0);
    glGenTextures(1, &outputTexture);
    glBindTexture(GL_TEXTURE_2D, outputTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // This is necessary for non-power-of-two textures
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

并且正确的 EAGLContext 使用 . 与当前线程相关联`+setCurrentContext:`。

如果我可以提出建议，为什么不看看[我的开源框架](https://github.com/BradLarson/GPUImage)，它为您处理所有这些以执行图像处理任务？它可能会为您节省一些精力。

# caching - 进程终止后opencl会释放所有设备内存吗？

> ID：12039430
> 
> 赞同：0
> 
> 时间：2012-08-20T14:21:52.913
> 
> 标签：caching, memory-leaks, opencl

在 Linux 上，我曾经确保进程分配的任何资源都会在进程终止后释放。内存被释放，打开的文件描述符被关闭。当我多次循环启动和终止进程时，没有内存泄漏。

最近我开始使用opencl。我了解 opencl 编译器将编译后的内核保存在缓存中。因此，当我运行一个使用相同内核的程序时（或者甚至可能来自运行相同内核的另一个进程的程序），它们不需要再次编译。我猜缓存在设备上。

从这种行为中，我怀疑分配的设备内存也可能被缓存（可能与一个魔术 cookie 相关联以供以后重用或类似的东西），如果它在终止之前没有明确释放。

所以我提出这个问题是为了排除任何这样的怀疑。

内核在 chache 中存活 => 其他内存分配以某种方式存活？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:34:28.000

基于此工具，我的简短回答是肯定的[http://www.techpowerup.com/gpuz/](http://www.techpowerup.com/gpuz/) 我正在调查我的设备上的内存泄漏，我注意到当我的进程终止时内存被释放......大部分时间. 如果您像我一样有内存泄漏，即使在该过程完成后它也可能会持续存在。另一个可能有帮助的工具是[http://www.gremedy.com/download.php](http://www.gremedy.com/download.php) ，但它确实有问题，所以要明智地使用它。

# javascript - 根据屏幕宽度加载不同的图像

> ID：12039433
> 
> 赞同：0
> 
> 时间：2012-08-20T14:21:58.907
> 
> 标签：javascript, html, ajax, xhtml, responsive-design

让我们假设我正在调用一个图像

```
<img src="http://server:8080/graphs/ChartGen?PID=982&minutes=480&height=30&width=1400" /> 
```

最后宽度为“1400”的地方，我怎样才能使“1400”，即用户屏幕宽度的60％？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:28:39.687

您应该在 JavaScript 中设置参数。检查 Google 图书的来源。

```
<script language="javascript" type="text/javascript">     

var url= "http://server:8080/graphs/ChartGen?PID=982&minutes=480&height=30&width=" + (screen.width * 0.60);     

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:55:12.610

另一种方法是使用 CSS 而不是 JS：

```
@media screen and (min-width: 800px) {
    #Chart {
        background-image: url(//server:8080/chart/982/480/:height:30/:width:480);
    }
}
@media screen and (min-width: 768px) and (max-width: 799px) {
    #Chart {
        background-image: url(//server:8080/chart/982/480/:height:30/:width:460);
    }
}
... 
```

虽然图表往往是内容的一部分，所以使用 CSS 并`background-image`不太合适，`img.src`在这种情况下，JS + 是更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:59:12.187

在我的情况下，我将我的答案添加到了现在提供的答案中，因为我的实际图像字符串比他的答案要复杂一些，因为它在 jsp 循环中。

```
<%
    for (int i = 0; rs.next(); i++) {
%>

//Other formatting
<div class="ProgramGraph"> 
<script type="text/javascript"> document.write("<img src=\"http://server07:8080/graphs/ChartGen?PID=<%= rs.getInt("PID")%>&minutes=<%out.print(timeSelected * 60);%>&height=30&width=" +screen.width*.60 +"\" />");</script></div> 
```

# msbuild - 在 MSBuild 脚本中获取文件大小

> ID：12039434
> 
> 赞同：3
> 
> 时间：2012-08-20T14:22:01.920
> 
> 标签：msbuild

我可以在不编写自己的代码的情况下从 MSBuild 脚本中找出一组文件的大小吗？

MSBuild 本身有一些关于单个项目的元数据（例如，在 %(ModifiedTime) 的最后修改时间），但没有大小。[我在http://msbuildextensionpack.com/](http://msbuildextensionpack.com/)上看不到任何东西。

**编辑：**根据 Seva 的回答，这是一个内联任务，它返回项目数组的总大小：

```
<UsingTask TaskName="GetFileSize" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
  <ParameterGroup>
    <Files ParameterType="Microsoft.Build.Framework.ITaskItem[]" Required="true" />
    <TotalSize ParameterType="System.Int64" Output="true"/>
  </ParameterGroup>
  <Task>
    <Using Namespace="System.IO"/>
    <Code Type="Fragment" Language="cs"><![CDATA[
        long l = 0;
        foreach (var item in Files) {
            var fi = new FileInfo(item.ItemSpec);
            l += fi.Length;
        }
        TotalSize = l;
]]></Code>
  </Task>
</UsingTask> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:13:00.540

[您实际上可以使用内联任务](http://msdn.microsoft.com/en-us/library/dd722601.aspx)在 msbuild 项目中使用 .Net API 的子集。

例如，以下打印出单个文件的文件大小：

```
<UsingTask TaskName="GetFileSize" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
  <ParameterGroup>
    <FileName Required="true" />
    <FileSize ParameterType="System.Int64" Output="true"/>
  </ParameterGroup>
  <Task>
    <Using Namespace="System.IO"/>
    <Code Type="Fragment" Language="cs"><![CDATA[
FileInfo fi = new FileInfo(FileName);
FileSize = fi.Length;
]]></Code>
  </Task>
</UsingTask>

<Target Name="PrintFileSize" >
  <GetFileSize FileName="$(MyFileName)">
    <Output TaskParameter="FileSize" PropertyName="MyFileSize" />
  </GetFileSize>
  <Message Text="file size of $(MyFileName) is $(MyFileSize)" />
</Target> 
```

# c++ - 转换为 std::array ::value_type from int 可能会改变它的值

> ID：12039435
> 
> 赞同：8
> 
> 时间：2012-08-20T14:22:03.063
> 
> 标签：c++, gcc, char, type-conversion, bitwise-operators

编译此程序时，`-Wconversion`GCC 参数会从标题中产生警告：

```
#include <iostream>
#include <array>
#include <string>

int main ()
{
    std::string test = "1";
    std::array<unsigned char, 1> byteArray;

    byteArray[0] = byteArray[0] | test[0];

    return 0;
} 
```

这是我编译它的方法：`g++- -Wall -Wextra -Wconversion -pedantic -std=c++0x test.cpp`我使用的是 GCC 4.5。

我在这里做违法的事吗？它会在某些情况下引起问题吗？为什么会`|`产生一个`int`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:29:54.153

> 我在这里做违法的事吗？

您正在从有符号类型转换为无符号类型。如果有符号值为负，则无符号结果将是实现定义的非负值（因此与初始值不同）。

> 它会在某些情况下引起问题吗？

仅当值可能为负时。在有些奇特的架构上可能会出现这种情况`sizeof (char) == sizeof (int)`，或者如果您的代码执行的操作比将两个值与`|`.

> 为什么会`|`产生一个`int`？

因为所有整数值在用于算术运算之前都会被*提升。*如果它们的类型小于`int`，则将它们提升为`int`。（促销活动不止于此，但这是与此问题相关的规则）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:24:56.120

是的，一个字符串由带符号的字符组成，你有一个无符号字符数组。

至于作为| 产生一个int，它被称为整数提升。基本上，编译器将它们都设为int，执行|，然后再次将它们设为char。

但它遇到了问题。根据 C/C++ 标准，如果提升到的类型可以包含所提升的类型的所有值，则会发生整数提升。因此它将 unsigned char 提升为 unsigned int 并将signed char 提升为signed int。提升有符号值符号扩展它。所以假设你有 -1 或 0xFF 或 11111111。这扩展到 10000000000000000000000001111111 签名 int ((int)-1)。显然，这将产生与 |'ing 与 11111111 ((char)-1) 直观预期的结果不同的结果。

有关更多信息，请参见此处：[此处](https://www.securecoding.cert.org/confluence/display/seccode/EXP14-C.+Beware+of+integer+promotion+when+performing+bitwise+operations+on+integer+types+smaller+than+int)解释了一种“解决方法”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:30:32.263

结果 `unsigned char | char`是`int`按[整数转换规则](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)。当你`int`重新赋值时`unsigned char`，赋值会截断它的`int`值——编译器不知道你在这个中有多大的值`int`。

要使编译器静音：

`byteArray[0] = static_cast<unsigned char>(byteArray[0] | test[0]);`

# c# - oracleconnection关闭问题

> ID：12039437
> 
> 赞同：2
> 
> 时间：2012-08-20T14:22:05.080
> 
> 标签：c#, oracle, odp.net

我有一个应用程序，它使用 ODP.net 将大约 10000 个条目插入和更新到 OracleDatabase 中的几个表中。我已将工作分成 100 个条目。

起初，应用程序为每个条目打开和关闭 oracleconnection。该应用程序在某些条目块上运行良好，但过了一段时间（并不总是相同）它只是停止运行，它仍在使用内存但没有 CPU 并且没有引发错误。我发现它是在应用程序调用 OracleConnection Close 方法时。

我已将其更改为在应用程序开始和结束时打开和关闭以及连接，一切都很好。

尽管为每个条目打开和关闭连接的事实不是正确的方法，但我的问题是为什么它只是停在 OracleConnection 的方法 Close() 处？

有人有想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:53:06.327

我可以提出两个原因，这两个都是我以前见过的。

首先，如果您有一个影响大量记录的长时间运行的连接，则可能由于时间（或者某些东西阻止了插入/更新）并且连接池管理器正在尝试重新声明和回收连接。

另一个很难调试的问题是您的连接可能会通过防火墙，而防火墙正在丢弃长时间运行的连接。如果是这种情况，您可能会在从池中打开新连接时偶尔遇到问题 - 它应该可以使用，但在您尝试打开它时失败（我忘记了确切的症状和错误消息，因为这是几年前的事了） .

# android - 如何限制用户关闭 Android 上的应用程序？

> ID：12039441
> 
> 赞同：1
> 
> 时间：2012-08-20T14:22:21.700
> 
> 标签：android, shutdown, restriction, application-shutdown

我有一个关于开发企业跟踪应用程序的请求。应用程序应该能够获取手机的当前位置并每 5 分钟将其发送到服务器。即使应用程序在后台运行 - 用户也可以轻松将其关闭。我需要为此创建某种限制，也许是基于密码的。为了关闭此应用程序，用户必须输入密码。如果他正在重新启动，应用程序应该在重新启动后自动运行。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:29:44.040

不它不是！

但是......我知道一个可以完成工作的技巧，它的名字是[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

您可以为您的应用程序设置警报，每 1 秒发出一次警报，如果应用程序被关闭，它将自行重建。此时可以设置密码关闭alarmManager。

但只是为了让你知道，我尝试过一次，谷歌什么也没告诉我，但用户给我留言说应用程序正在入侵他们的设备；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:11:12.813

从 ICS 开始，任何实现[设备管理](http://developer.android.com/guide/topics/admin/device-admin.html)的应用程序都无法停止。但唯一的缺点是用户可以删除 Devvice Administrator。
您可以限制您的应用程序仅在管理员开启时工作。[另一种方法是，如果用户删除了管理员，您可以使用resetpassword](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#resetPassword%28java.lang.String,%20int%29)
使用自定义密码锁定整个设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:55:43.377

如果设备已植根，您可以实现它，但由于需要修改系统文件，您可能无法将应用程序作为 APK 分发。也许作为通过 Clockwork mod 闪现的 Zip。但请注意使设备的保修失效。

Babibu 关于警报的建议是一种新颖的方法，但要小心不要经常唤醒系统，因为这会更快地耗尽电池电量。

实际上，您将面临的一个大问题是用户可以禁用 GPS，然后您无法以编程方式再次将其重新打开 - 除非您尝试使用显然不理想且不适用于所有设备的漏洞利用。

一个更好的主意可能只是在用户禁用应用程序或 GPS 时向您的服务器报告。您将知道哪个用户禁用了它，以便您的组织可以适当地惩罚该用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-31T15:39:19.953

您正在寻找的是设备管理

[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

此页面解释了它的工作原理以及如何更改有关密码和禁用相机的各种策略。等等

他们几乎没有谈论的是，一旦以设备管理员身份启用应用程序，您就无法在不先禁用此功能的情况下将其杀死或卸载。以正确的方式实现启用/禁用按钮取决于您。

为确保即使被系统杀死（在资源不足的情况下）服务也始终重新启动，您需要覆盖 Service 的此方法：

```
public int onStartCommand (Intent intent, int flags, int startId)
    {
        return START_STICKY;
    } 
```

最后，要让您的服务在启动时启动，您需要捕获 ACTION_BOOT_COMPLETED 广播。

主要问题是您无法阻止用户禁用 GPS 或使用模拟位置，但您可以检测并记录它。通知用户他们被监视是一种很好的做法（实际上在我的国家是强制性的），这样您就可以在解释他们的同时知道他们是否弄乱了 GPS。

植根电话是另一种解决方案，但您可能会打开比关闭更多的门；）

# c++ - 如何获取 ListView 可见项目？

> ID：12039444
> 
> 赞同：3
> 
> 时间：2012-08-20T14:22:35.093
> 
> 标签：c++, wpf, xaml, windows-8, microsoft-metro

我正在尝试创建一个 Windows 8 Metro 风格的应用程序。我正在使用 Windows::UI::Xaml::Controls::ListView 对象，如何在列表视图中获取可见项目或项目本身的索引（实际上，所有项目的可见性属性都设置为可见，但我需要获取当前显示并可以在桌面上查看的项目），或者至少知道某个 ListViewItem 现在是否在桌面上可见？

提前致谢

# ruby-on-rails - Rails功能测试assert_select表单输入值？

> ID：12039447
> 
> 赞同：14
> 
> 时间：2012-08-20T14:22:53.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在编写一个简单的测试来检查表单是否加载了正确的值。

我浏览了文档，似乎找不到显示如何验证表单输入值的示例。

我有一个呈现用户名的表单。

我只想`assert_select`在文本输入上使用并验证 first_name 字段是否与数据库中的内容完全匹配（例如 users(:one).first_name）

在 Rails 中如何做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T07:24:13.647

实际上`assert_tag`已[弃用](http://apidock.com/rails/Test/Unit/Assertions/assert_tag)。

`assert_select` [在文档中](http://api.rubyonrails.org/classes/ActionDispatch/Assertions/SelectorAssertions.html#method-i-assert_select)有一个很好的例子说明如何做到这一点，所以你可以这样做：

```
 assert_select '#user_first_name' do
      assert_select "[value=?]", Users.first.first_name
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-27T20:05:33.177

复选框：如果你想 assert_select 一个选中的复选框（在这种情况下是 1 个选中的复选框），试试这个：

```
assert_select 'input[type=checkbox][checked]', 1 
```

不是 100% 与问题相关，而是更多地用于其他人的文档目的。

# php - 对 php 文件的 Ajax 调用返回该文件中的 JS 代码，而不是执行它

> ID：12039452
> 
> 赞同：-2
> 
> 时间：2012-08-20T14:23:08.417
> 
> 标签：php, javascript, html, ajax, jquery

我正在对 php 文件进行 ajax 调用，但我不希望它返回任何内容。

我的 php 文件包含 HTML 内容，或者更确切地说是 JS 代码，需要在此处自行执行。请帮我解决一下这个。我不知道为什么会这样

这是我的ajax代码：

```
$.ajax({
        type   : "POST",
        url    : "<?php echo CALLBACKURL; ?>mobile_profile.php",
        data   : data,
        success: function(response){
        }
}); 
```

我没有给出任何console.log，而是在响应中给出了整个html代码。

我需要在那里执行那个js代码，我不想要任何响应或者如果我们至少不能这样做，我可以运行JS代码什么都不返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:39:49.233

你希望你的代码在哪里执行？在浏览器中还是在服务器上？

如果您不希望它联系服务器并自行运行（在浏览器中），您为什么要使用 AJAX？你只需调用一个函数，它会做任何你想做的事情。

成功后你期望它做什么？牙套里面什么都没有...

```
success: function(response){
} 
```

浏览器无法处理 php 代码。他们只能在附加组件的帮助下处理 html 和 javascripts 以及一些第三方脚本。

请清楚您的期望。

```
url: "<?php echo CALLBACKURL; ?>mobile_profile.php" 
```

将其替换为：

```
url: "mobile_profile.php" 
```

如果需要，将这些 php 标签放在 mobile_profile.php 中。

如果您愿意，您可以通过添加后缀将参数传递给该 php 文件？和一个查询字符串，以便被调用的 php 文件了解该做什么。

我认为这有帮助。

# java - SMTP 邮件发送失败

> ID：12039453
> 
> 赞同：0
> 
> 时间：2012-08-20T14:23:11.523
> 
> 标签：java, ejb-2.x

我正在从本地机器发送邮件并收到以下错误

```
ERROR [STDERR] javax.mail.SendFailedException: Invalid Addresses;
  nested exception is:
        class javax.mail.SendFailedException: 553 sorry, relaying denied from your location [10.105.1.186] (#5.7.1)
19:10:50,885 ERROR [STDERR]     at com.sun.mail.smtp.SMTPTransport.rcptTo(SMTPTransport.java:848)
19:10:50,885 ERROR [STDERR]     at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:323)
19:10:50,885 ERROR [STDERR]     at com.elitecore.billing.utils.MailClient.send(MailClient.java:191)
19:10:50,885 ERROR [STDERR]     at com.elitecore.billing.ejb.base.BillingSessionBase.sendMailToErrorAdmin(BillingSessionBase.java:935)
19:10:50,885 ERROR [STDERR]     at com.elitecore.billing.ejb.base.BillingSessionBase.sendMail(BillingSessionBase.java:827)
19:10:50,885 ERROR [STDERR]     at com.elitecore.billing.ejb.system.audit.session.SentEventNotificationSessionFacade.sendNotificationTo
Recepient(SentEventNotificationSessionFacade.java:1378)
19:10:50,885 ERROR [STDERR]     at com.elitecore.billing.ejb.system.audit.session.SentEventNotificationSessionFacade.sentNotification(S
entEventNotificationSessionFacade.java:809)
19:10:50,901 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
19:10:50,901 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
19:10:50,901 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
19:10:50,901 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:585)
19:10:50,901 ERROR [STDERR]     at org.jboss.ejb.StatelessSessionContainer$ContainerInterceptor.invoke(StatelessSessionContainer.java:6
83)
19:10:50,901 ERROR [STDERR]     at org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.
java:186)
19:10:50,901 ERROR [STDERR]     at org.jboss.ejb.plugins.StatelessSessionInstanceInterceptor.invoke(StatelessSessionInstanceInterceptor
.java:72)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:84)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:341)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:148)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:111)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:191)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:122)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.StatelessSessionContainer.internalInvoke(StatelessSessionContainer.java:331)
19:10:50,916 ERROR [STDERR]     at org.jboss.ejb.Container.invoke(Container.java:709)
19:10:50,916 ERROR [STDERR]     at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
19:10:50,916 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
19:10:50,932 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:585)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.ReflectedDispatcher.dispatch(ReflectedDispatcher.java:60)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.Invocation.dispatch(Invocation.java:62)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.Invocation.dispatch(Invocation.java:54)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.Invocation.invoke(Invocation.java:82)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:197)
19:10:50,932 ERROR [STDERR]     at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:473)
19:10:50,948 ERROR [STDERR]     at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:360)
19:10:50,948 ERROR [STDERR]     at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)
19:10:50,963 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
19:10:50,963 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:585)
19:10:50,963 ERROR [STDERR]     at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
19:10:50,963 ERROR [STDERR]     at sun.rmi.transport.Transport$1.run(Transport.java:153)
19:10:50,963 ERROR [STDERR]     at java.security.AccessController.doPrivileged(Native Method)
19:10:50,963 ERROR [STDERR]     at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
19:10:50,963 ERROR [STDERR]     at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:466)
19:10:50,963 ERROR [STDERR]     at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:707)
19:10:50,963 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:595) 
```

谁能解释我为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:26:30.330

电子邮件服务器配置为发送（中继）仅从某些 IP 传递的消息。似乎不接受 IP 10.105.1.186。

# codeigniter - Codeigniter 会话不起作用？

> ID：12039454
> 
> 赞同：0
> 
> 时间：2012-08-20T14:23:12.673
> 
> 标签：codeigniter

我有一个基于 Codeigniter 的网站，它运行良好。我不得不将此站点与数据库克隆到另一台主机。我复制了数据库和所有文件。我的问题是：会话在新站点上不起作用。（我在登录时认出了它）。相同的代码在旧主机上工作，但一切都完全相同。有人知道吗？这是一个codeigniter配置问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:32:43.797

检查您的**application/config.php** 尤其是这些行：

```
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']  = "/";
$config['cookie_secure']    = FALSE; 
```

另外：请删除您的 cookie 历史记录（如果您使用的是 Firefox：CTRL-SHIFT-DELETE）

或者，您可以使用（无耻的自插入）[codeigniter-native-session](https://github.com/atomicon/codeigniter-native-session) 我也对内置会话引擎有一些问题。它基本上模仿了 Codeigniter 会话类，因此只需将这些文件放入您的应用程序文件夹中，代码不需要任何修改。（你将使用 PHP-native-sessions）

希望能帮助到你。

# python - Python：根据两个标准对嵌套列表进行排序

> ID：12039459
> 
> 赞同：2
> 
> 时间：2012-08-20T14:23:40.353
> 
> 标签：python, list, sorting

在 Python 中，我有一个嵌套列表，如下所示：

```
[ [[x1,y1,z1], [['0.9', 4], [0.8, 3], [0.5, 10], [0.1, 11]], 
  [[x2,y2,z2], [['1.0', 8], [0.8, 3], [0.2, 1], [0.1, 8]]
...] 
```

所以每个元素都是这样的：

```
 [[3-tuple], [[val1, occurrences_of_val1], [val2, occurrences_of_val2],...]] 
```

第二个嵌套列表已按第一项（val1 > val2 > val3 ...）排序，但我还希望 3 元组 [x,y,z] 根据两个标准按降序排列：

1.  val1 的值（最高优先）
2.  在相同 val1 的情况下，最高出现次数_of_val1（如果上述两个值相同，则可能应用于 val2）

我该怎么做呢？可能使用 itemgetter，但在这种情况下我不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T14:39:49.647

`yourList.sort(key=lambda x: x[1], reverse=True)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T08:12:12.257

我测试了这个

```
X=[ [[4,5,6], [[3.0, 4], [0.8, 3], [0.5, 10], [0.1, 11]]],
  [[2,1,3], [[2.0, 8], [0.8, 3], [0.2, 1], [0.1, 8]]]]
>>> X.sort(key=lambda x: x[1])
>>> X
[[[2, 1, 3], [[2.0, 8], [0.80000000000000004, 3], [0.20000000000000001, 1], [0.10000000000000001, 8]]], [[4, 5, 6], [[3.0, 4], [0.80000000000000004, 3], [0.5, 10], [0.10000000000000001, 11]]]] 
```

最重要的是，`X.sort(key=lambda x: x[1])`是按 X 的第二个元素排序，也就是按这个元素`[[val1, occurrences_of_val1], [val2, occurrences_of_val2],...]`。隐含地，它是按 排序`val1`，然后在相等的情况下按`occurrences_of_val1`...

# image-processing - 自动检测图像的模糊区域

> ID：12039463
> 
> 赞同：8
> 
> 时间：2012-08-20T14:23:58.173
> 
> 标签：image-processing, computer-vision

我正在处理某些部分部分模糊的图像。这些是应该注意的噪音，但问题是：

是否有方法可以检测图像在图像的某些部分是否模糊或部分模糊？例如，看看下面的示例图像：

![模糊测试](../Images/bd076b3b4db6e108ebef3ef3b969f597.png)

您可以在图像中看到视觉模糊的 3 个部分：左下角、靠近中心区域和右上角。现在，是否有可能检测到图像的任何部分在编程方面或数学上是模糊的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T06:45:47.900

正如 lain_b 指出的那样，对于这样的图像，您可以使用边缘检测器并寻找边缘的缺失。我在你的图像上试过了，它似乎工作得很好。首先我使用内核

```
[0,1,0,
 1,-4,1,
 0,1,0] 
```

这是一个简单的边缘检测器。结果是

![在此处输入图像描述](../Images/d92432b40cfaa7ea6bab703f7f0efe48.png)

然后我用一个阈值得到

![在此处输入图像描述](../Images/98d2e1af12671a945fa67f396310ea26.png)

然后我关闭图像并打开它以获取

![在此处输入图像描述](../Images/b3d1429d2e219bd54ad9fe419efe23a6.png)

这显然不是完成版，右上部分根本认不出来。也许您可以通过在执行阈值处理之前进行模糊来改进它，或者通过为阈值和打开和关闭操作的半径选择更好的值。您需要做出的许多决定取决于您可以对问题施加的限制。我认为这种技术对你有用。

**编辑** 如果您正在寻找任意图像的模糊检测，您将不得不研究各种技术。如果您可以对输入图像集做出假设，事情就会容易得多。没有任何假设，我不知道什么最适合你。这是有关该主题的一些阅读

[图像模糊指标](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CE4QFjAB&url=http%3A%2F%2Fscien.stanford.edu%2Fpages%2Flabsite%2F2010%2Fpsych221%2Fprojects%2F2010%2FAdityaAnchuri%2Fmain.pdf&ei=G6IzUNv9N-feiAL_hYDgBA&usg=AFQjCNElbEkRZk0-XFYrOkMtZvWahpS4yQ)

[使用 Harr 小波变换的研究论文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEkQFjAA&url=http%3A%2F%2Fcs.cmu.edu%2F~htong%2Fpdf%2FICME04_tong.pdf&ei=G6IzUNv9N-feiAL_hYDgBA&usg=AFQjCNE0xhAf64SP0q81WsyEGwwqlD18bA)

[类似的 SO Question](https://stackoverflow.com/questions/5180327/detection-of-blur-in-images-video-sequence)并查看问题链接到的问题

模糊检测是一个非常活跃的研究领域，没有一个答案。您只需要尝试所有可以找到的方法（这些方法是通过谷歌搜索检测图像中的模糊）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:06:36.887

[这篇论文可能会有所帮助。](http://yokoya.naist.jp/paper/datas/951/ismar06.pdf)它会进行模糊估计（主要用于失焦，但我认为它也会模糊）以在图像中重新创建类似模糊的对象。

我认为您应该能够使用它来检测模糊区域以及它们的模糊程度。它应该与您的问题特别相关，因为它旨在处理真实世界的图像。

# php - 列中的值

> ID：12039464
> 
> 赞同：2
> 
> 时间：2012-08-20T14:24:00.900
> 
> 标签：php, mysql, unique-constraint

我正在开发一个小的爱好应用程序。虽然我以前使用过 MySQL 和 PostgreSQL，但我在这里更像是一个 n00b，希望能得到任何帮助。

我的 MySQL 数据库中有一个名为“TECH”的表。该表有两列：“ID”（主键）和“名称”（技术名称 - 不是任何类型的键）。以下是几个示例行：

```
+----+--------+
| ID |  name  |
+----+--------+
| 1  |  Python|
| 2  |  ASP   |
| 3  |  java  |
+----+--------+ 
```

这是创建的代码`TECH`：

```
CREATE TABLE TECH (
        id      INT(5) ,
        name    VARCHAR(20),
        PRIMARY KEY (id)
); 
```

我开发了一个 html 表单供用户输入新技术到`TECH`. 但是，我想确保`TECH`. 例如，不应允许用户输入“Python”以分配 ID 4。此外，也不应允许用户在另一个 ID 处输入“pYthon”（或任何大写变体）。

目前，我有以下代码（在 PHP 端，而不是 MySQL 端）：

```
// I discovered that MySQL is not case sensitive with TECH.name
$rows = 0;
$result = $mysql_query("SELECT * FROM tech AS T WHERE T.name='python'");
while ($row = mysql_fetch_array($result)) {
    $rows += 1;
}

if ($rows != 0) {
    echo "'python' cannot be inserted as it already exists";
} else {
    // insertion code
} 
```

现在，我知道执行此操作的正确方法是通过`UNIQUE (name)`在 PHP 端执行并捕获“插入错误”来将 TECH.name 约束为 UNIQUE。但是，关于这个过程，我有以下两个问题：

1.  定义 UNIQUE 约束是否保持上述明显的不区分大小写？
2.  如何在 PHP 端准确捕获这样的插入错误？

我将不胜感激这方面的任何帮助或任何人的任何更好的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:27:19.957

当您从 php 操作 mysql 时（即通过执行 INSERT 或 UPDATE），您可以调用 mysql_get_rows_affected 它将返回受影响的行。如果查询由于 UNIQUE 约束而失败，则受影响的行将为 0

[http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

我通常检查从该函数返回的行数，如果您采用 INSERT OR IGNORE 方法，则可以应用相同的检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:28:08.177

尝试

```
INSERT IGNORE INTO mytable
    (primaryKey, field1, field2)
VALUES
    ('abc', 1, 2),
    ('def', 3, 4),
    ('ghi', 5, 6); 
```

重复的行将被忽略

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:34:45.580

将字段的排序规则更改为`_ci`or`_cs`将确定唯一键是否`c`敏感`i`或`c`敏感`s`。

至于捕获错误，您应该尝试使用 mysqli 或 PDO 来运行数据库查询：[http ://www.php.net/manual/en/pdo.exec.php](http://www.php.net/manual/en/pdo.exec.php)

您可以使用 PDO 捕获重复的错误条目，如下所示：

```
try
{
    $dbh->exec($mySqlQuery);
    // insert was successful...
} catch (PDOException $e) {
    if ($e->errorInfo[1]==1062) {
        // a 'duplicate' error occurred...
    } else {
        // a non 'duplicate error' occurred...
    }
} 
```

编辑：

如果你不使用 PDO，这应该在你的 mysql_query 之后工作：

```
if (mysql_errno() == 1062)
{
   // you have a duplicate error...
} 
```

# android - 平移和缩放时将 libgdx 相机保持在边界内

> ID：12039465
> 
> 赞同：13
> 
> 时间：2012-08-20T14:24:03.603
> 
> 标签：android, libgdx

我正在使用 LibGDX 为 Android 开发游戏。我添加了捏缩放和平移。我的问题是如何避免走出游乐区。实际上，您可以在游戏区域外平移到黑暗中。当完全缩小时，我知道如何处理它，我只是说：

```
if(camera.zoom == 1.0f) ;
else {

} 
```

但是，如果放大，我该如何做到这一点。我知道这并不复杂，我只是似乎无法弄清楚。创建后，我将相机设置在屏幕中间。我知道如何平移，我正在使用 camera.translate(-input.deltaX, -input.deltaY, 0)，我只需要在此调用之前进行测试以查看位置是否在播放区域之外。当我放大时，如何测试我是否在屏幕边缘？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T16:02:32.613

您可以使用其中一种

```
camera.frustum.boundsInFrustum(BoundingBox box) 
camera.frustum.pointInFrustum(Vector3 point)
camera.frustum.sphereInFrustum(Vector3 point, float radius) 
```

检查点/框/球是否在您的相机视野内。我通常做的是在我的世界中定义 4 个不应该让玩家看到的盒子。如果相机被移动并且其中一个盒子在平截头体中，我将相机移回之前的位置。

编辑：AAvering 在[下面](https://stackoverflow.com/a/23017021/923847)的代码中实现了这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-11T15:42:33.280

归功于 Matsemann 的想法，这是我使用的实现。

制作一个扩展 OrthographicCamera 的自定义 MyCamera 类并添加以下代码：

```
BoundingBox left, right, top, bottom = null;

public void setWorldBounds(int left, int bottom, int width, int height) {
    int top = bottom + height;
    int right = left + width;

    this.left = new BoundingBox(new Vector3(left - 2, 0, 0), new Vector3(left -1, top, 0));
    this.right = new BoundingBox(new Vector3(right + 1, 0, 0), new Vector3(right + 2, top, 0));
    this.top = new BoundingBox(new Vector3(0, top + 1, 0), new Vector3(right, top + 2, 0));
    this.bottom = new BoundingBox(new Vector3(0, bottom - 1, 0), new Vector3(right, bottom - 2, 0));
}

Vector3 lastPosition = new Vector3();
@Override
public void translate(float x, float y) {
    lastPosition.set(position.x, position.y, 0);
    super.translate(x, y);
}

public void translateSafe(float x, float y) {
    translate(x, y);
    update();
    ensureBounds();
    update();
}

public void ensureBounds() {
    if (frustum.boundsInFrustum(left) || frustum.boundsInFrustum(right) || frustum.boundsInFrustum(top) || frustum.boundsInFrustum(bottom)) {
        position.set(lastPosition);
    }
} 
```

现在，在您自定义场景或您使用的任何内容中（在我的情况下，它是一个自定义 Board 类）调用：

```
camera.setWorldBounds() 
```

在您的 GestureListener.pan 方法中，您可以调用

```
camera.translateSafe(x, y); 
```

它应该让你的相机保持在界限内

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-10T04:02:38.920

这是由于使用正交相机在我的 2D 游戏中平移或缩放而更新相机位置后我调用的代码。它纠正了相机位置，使其不会显示游戏区域边界之外的任何内容。

```
float camX = camera.position.x;
float camY = camera.position.y;

Vector2 camMin = new Vector2(camera.viewportWidth, camera.viewportHeight);
camMin.scl(camera.zoom/2); //bring to center and scale by the zoom level
Vector2 camMax = new Vector2(borderWidth, borderHeight);
camMax.sub(camMin); //bring to center

//keep camera within borders
camX = Math.min(camMax.x, Math.max(camX, camMin.x));
camY = Math.min(camMax.y, Math.max(camY, camMin.y));

camera.position.set(camX, camY, camera.position.z); 
```

`camMin`是相机可以在不显示播放区域之外的任何东西的情况下的左下角，也是从相机一角到中心的偏移量。

`camMax`是相机可以位于的最右侧位置。

我猜您缺少的关键部分是按缩放级别缩放相机尺寸。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-21T21:00:27.017

这是我的解决方案：

```
float minCameraX = camera.zoom * (camera.viewportWidth / 2);
float maxCameraX = worldSize.x - minCameraX;
float minCameraY = camera.zoom * (camera.viewportHeight / 2);
float maxCameraY = worldSize.y - minCameraY;
camera.position.set(Math.min(maxCameraX, Math.max(targetX, minCameraX)),
        Math.min(maxCameraY, Math.max(targetY, minCameraY)),
        0); 
```

在哪里：

*   `targetX`并且`targetY`是目标所在位置的世界坐标。
*   `worldSize`是一个`Vector2`世界的大小。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-03T09:44:16.220

我没有足够的声誉来写评论，所以我会指出一些以前的答案。

AAverin 使用 Matsemann 的想法制作的带有边界框的解决方案并不好，因为当您靠近一个边缘（边界）并尝试对角平移时，它会令人讨厌地减慢速度，在这种情况下，您会平移到边界之外的一侧和正确方向的另一侧.

我强烈建议您尝试从提供的 handleInput 方法底部的解决方案

[https://github.com/libgdx/libgdx/wiki/Orthographic-camera](https://github.com/libgdx/libgdx/wiki/Orthographic-camera)

那个工作顺利，以前的一些答案看起来像那个，但这个使用 MathUtils.clamp ，它是一个直截了当且更干净的答案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-06T20:54:05.920

完美的课程，（部分感谢 AAverin）

此类不仅会粘在边界内，它还会在您缩放时捕捉到边界内。

调用这些来设置边界和移动相机。

```
camera.setWorldBounds()
camera.translateSafe(x, y); 
```

缩放通话时

```
camera.attemptZoom(); 
```

这是课程：

```
public class CustomCamera extends OrthographicCamera
{
    public CustomCamera() {}

    public CustomCamera(float viewportWidth, float viewportHeight)
    {
        super(viewportWidth, viewportHeight);
    }

    BoundingBox left, right, top, bottom = null;

    public void setWorldBounds(int left, int bottom, int width, int height) {
        int top = bottom + height;
        int right = left + width;

        this.left = new BoundingBox(new Vector3(left - 2, 0, 0), new Vector3(left -1, top, 0));
        this.right = new BoundingBox(new Vector3(right + 1, 0, 0), new Vector3(right + 2, top, 0));
        this.top = new BoundingBox(new Vector3(0, top + 1, 0), new Vector3(right, top + 2, 0));
        this.bottom = new BoundingBox(new Vector3(0, bottom - 1, 0), new Vector3(right, bottom - 2, 0));
    }

    Vector3 lastPosition;
    @Override
    public void translate(float x, float y) {
        lastPosition = new Vector3(position);
        super.translate(x, y);
    }

    public void translateSafe(float x, float y) {
        translate(x, y);
        update();
        ensureBounds();
        update();
    }

    public void ensureBounds()
    {
        if(isInsideBounds())
        {
            position.set(lastPosition);
        }
    }

    private boolean isInsideBounds()
    {
        if(frustum.boundsInFrustum(left) || frustum.boundsInFrustum(right) || frustum.boundsInFrustum(top) || frustum.boundsInFrustum(bottom))
        {
            return true;
        }
        return false;
    }

    public void attemptZoom(float newZoom)
    {
        this.zoom = newZoom;
        this.snapCameraInView();
    }

    private void snapCameraInView()
    {
        float halfOfCurrentViewportWidth = ((viewportWidth * zoom) / 2f);
        float halfOfCurrentViewportHeight = ((viewportHeight * zoom) / 2f);

        //Check the vertical camera.
        if(position.x - halfOfCurrentViewportWidth < 0f) //Is going off the left side.
        {
            //Snap back.
            float amountGoneOver = position.x - halfOfCurrentViewportWidth;
            position.x += Math.abs(amountGoneOver);
        }
        else if(position.x + halfOfCurrentViewportWidth > viewportWidth)
        {
            //Snap back.
            float amountGoneOver = (viewportWidth - (position.x + halfOfCurrentViewportWidth));
            position.x -= Math.abs(amountGoneOver);
        }

        //Check the horizontal camera.
        if(position.y + halfOfCurrentViewportHeight > viewportHeight)
        {
            float amountGoneOver = (position.y + halfOfCurrentViewportHeight) - viewportHeight;
            position.y -= Math.abs(amountGoneOver);
        }
        else if(position.y - halfOfCurrentViewportHeight < 0f)
        {
            float amountGoneOver = (position.y - halfOfCurrentViewportHeight);
            position.y += Math.abs(amountGoneOver);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-29T16:45:09.253

给定的 CustomCamera 类不能很好地工作。我用它来将捏合手势映射到 zoomSafe 并且相机在边界边缘时会不断地从左到右弹跳/闪烁。相机在平移时也无法正常工作。如果您尝试沿着边界的边缘平移，它不会在任何地方平移，就好像边缘是“粘性的”一样。这是因为它只是转换回最后一个位置，而不是仅仅调整它超出边界的坐标。

# facebook-graph-api - 有没有办法通过我们的 Facebook 粉丝点击我们页面上的链接来跟踪我们的网站活动？

> ID：12039466
> 
> 赞同：3
> 
> 时间：2012-08-20T14:24:06.323
> 
> 标签：facebook-graph-api, facebook-page, ads

我们刚刚开始在 Facebook 上投放广告，想知道是否有办法通过单击我们 Facebook 页面上的网站链接来跟踪谁访问了我们的网站？我对跟踪我们在 Facebook 上的广告效果的所有方法感到非常满意，并想看看人们是否不仅“喜欢”我们的页面，而且访问我们的网站以了解更多关于我们的信息。任何信息都有帮助 ：）

如果您需要进一步查看，这是我们的网站：

[http://drkennethlevine.webs.com/](http://drkennethlevine.webs.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:31:44.670

我不知道您可以对您的网站或网站的构建方式进行多少更改。但是，有一种方法可以跟踪访问您页面的用户的来源。使用 http 引用字段。

在 php 中（可能在大多数其他语言中），您可以使用以下方式获取引用链接

```
$_SERVER['HTTP_REFERER']; 
```

引用字段包含用户访问的最后一页。

只需计算从您的 Facebook 页面浏览到您的网站的用户数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:42:39.397

您可以`$_SERVER['HTTP_REFERER'];`按照@fake 的说明使用，也可以直接使用[Google Analytics](http://www.google.com/analytics/)，它会免费为您提供大量统计数据，包括推荐人、浏览器统计数据、国家/地区...

您所要做的就是创建一个 GA 帐户，并将您的网站链接到您的帐户（您将在页脚中添加一些 javascript 行）

# xslt - XSL for-each 循环不起作用

> ID：12039467
> 
> 赞同：1
> 
> 时间：2012-08-20T14:24:06.917
> 
> 标签：xslt

我正在使用 Java 将 XML 文档转换为文本：

```
Transformer transformer = tFactory.newTransformer(stylesource);
transformer.transform(source, result); 
```

这似乎有效，除非 XML 文档中有冒号。我试过这个例子：XML文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<test:TEST >
  <one.two:three id="my id" name="my name" description="my description" >
  </one.two:three>
  <one.two:three id="some id" name="some name" description="some description" />
</test:TEST> 
```

XSL 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xmi="http://www.omg.org/XMI" 
xmlns:one.two="http://www.one.two/one.two:three" >
<xsl:output method="text" indent="yes" omit-xml-declaration="yes"/>
<xsl:variable name="myVariable">one.two:three</xsl:variable>
<xsl:template match="/">
 <xsl:apply-templates/>
</xsl:template>
<xsl:template match="*[substring(name(),1,9)='test:TEST']" >
 <xsl:for-each select="./$myVariable">
inFirstLoop
 </xsl:for-each>
 <xsl:for-each select="./one.two:three">
inSecondLoop
 </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

我得到的转换结果是一行：

```
inFirstLoop 
```

我期待 4 行输出

```
inFirstLoop
inFirstLoop
inSecondLoop
inSecondLoop 
```

我该如何解决？任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:32:27.660

这里有很多问题。我很惊讶您的转换能够完全运行，而不是在解析错误和其他错误上失败。

一个大问题是您的输入 XML 使用名称空间前缀（这就是冒号的用途）而没有声明它们。像这样的声明

```
 xmlns:one.two="http://www.one.two/one.two:three" 
```

需要在源 XML 以及 XSL 中。否则，您的源 XML 格式不正确（根据命名空间规则）。

第二个问题是 XPath 表达式

```
./$myVariable 
```

这应该会引发错误。我想你想要的是

```
*[name() = $myVariable] 
```

我要做的第三个更改不是 XSLT 中的错误，而是一种糟糕的做事方式……如果你想匹配`<test:TEST>`，你应该使用命名空间工具来引用命名空间。因此，而不是

```
<xsl:template match="*[substring(name(),1,9)='test:TEST']" > 
```

利用

```
<xsl:template match="test:TEST"> 
```

干净多了。然后，您需要在样式表的最外层元素上放入命名空间声明，就像您在输入 XML 文档中已经要做的那样：

```
xmlns:test="...test..." 
```

XML 名称空间，就像开车一样，是一个通过一些培训而不是通过反复试验更好地学习的主题。[阅读这样的简短文章](http://www.xml.com/pub/a/1999/01/namespaces.html)将帮助您避免很多困惑和痛苦。

# asp.net - 如何在 asp.net 图表控件中设置轴标题

> ID：12039469
> 
> 赞同：0
> 
> 时间：2012-08-20T14:24:07.190
> 
> 标签：asp.net, charts, asp.net-charts, microsoft-chart-controls

![在此处输入图像描述](../Images/2901db8ddebcb3a37806d8e169f767a2.png)

AxisX 的标题是“日期”。但是我怎样才能改变它的方向呢？我想横向查看“日期”。

AxisX 标签方向设置如下：

```
chartCalls.ChartAreas[0].AxisX.LabelStyle.Angle = -90; 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:27:35.447

可能您需要添加 MyChart.Series[0].SmartLabelStyle.Enabled = false;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T08:34:26.193

把 TextAlign="Horizo​​ntal" 像这样

```
 <AxisX Title="" LineColor="green" LineWidth="3" TextOrientation="Horizontal">
                                                <MajorGrid Enabled="False" />
                                            </AxisX> 
```

# jquery - 谷歌浏览器打印问题

> ID：12039470
> 
> 赞同：2
> 
> 时间：2012-08-20T14:24:12.433
> 
> 标签：jquery, html, css, google-chrome, printing

我遇到了特定于 Google Chrome 的问题。这是订单的确认页面。在打印预览中，它显示得很好。然而，当我实际打印页面时，所有文本都只是随机符号，没有任何意义。我正在使用 UTF-8，就像所有其他可以正常工作的页面一样。我正式难倒这个。

这是页面的 HTML：

```
 <%@ page contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ include file="/shared/components/imageCacheUrl.jsp" %> 

<!doctype html>
<!--[if lte IE 6 ]><html lang="en" id="ie6"><![endif]-->
<!--[if IE 7 ]><html lang="en" id="ie7"><![endif]-->
<!--[if IE 8 ]><html lang="en" id="ie8"><![endif]-->
<!--[if IE 9 ]><html lang="en" id="ie9"><![endif]-->
<!--[if (gte IE 10)|!(IE)]><!--><html lang="en"><!--<![endif]-->
<head>
    <title>Delta.com - Donate Miles Confirmation</title>
    <link rel="stylesheet" type="text/css" href='<s:url value="/buyGiftTransfer/css/buygifttransferdonate.css"/>' />
    <link rel="stylesheet" type="text/css" href='<s:url value="/buyGiftTransfer/css/donateCss.css"/>' />
</head>
<body class="no-js">
    <jsp:include page="../../tmpl/breadcrumbs/index.jsp"></jsp:include>
    <h1 class="bgt-headerTxt">Donate Miles</h1>
    <div id="ContentWell" class="grid_9 alpha bgt-app">
        <div id="bgt-primarymodule" class="contentWrapper clearfix">
            <div id="bgt-primarymodule-container">
                <!--<jsp:include page="../../tmpl/donate/_primaryModule.tmpl.jsp"></jsp:include>-->
                <!-- fix for Defect ID 10345 -->
                <h2 class="marketingTitle">DONATE MILES. MAKE A DIFFERENCE</h2>
                <p>Not sure what to do with your SkyMiles? Donate them to charity. Whichever charity or charities you choose, your miles will be put to good use. Please read the need-to-knows list before donating.</p>
                <ul>
                    <li>All donations to SkyWish and SkyWish Asia charities are not tax deductible for SkyMiles members or Delta.</li>
                    <li>Maximum of five charities can be selected and processed in one transaction.</li>
                    <li>Once the transaction has been completed, the miles will be transferred to the selected charities and cannot be reversed.</li>
                    <li>SkyMiles account must have sufficient miles to donate. </li>
                    <li>Minimum mileage donation rules apply.  Select individual charity for details.</li>  
                </ul>

            </div>
            <s:fielderror template="inlineerrors" />
        </div>
            <div id="recieptModule" class="contentWrapper">
                <h2 class="contentWrapperHeader">CONFIRMATION</h2>
                <div>
                    <ul id="emailPrint">
                        <li id="print"><a href="javascript:window.print()" class="ir">Print</a></li>
                    </ul>
                </div>
                <div class="sub_container_6">
                    <div class="sub_grid_4 alpha">
                        <hgroup>
                            <h2 class="marketingTitle">Thanks, <strong mpdistrans><s:property value="donateMiles.donateMilesProductType.name.firstName" /> <s:property value="donateMiles.donateMilesProductType.name.lastName" /></strong></h2>
                            <h4 class="marketingSubtitle">for your generous donation of <strong><s:text name="format.number"><s:param value="donateMiles.donateMilesProductType.totalDonateMilesAmount"></s:param></s:text> miles</strong> to these charities:</h4>
                        </hgroup>
                    </div>
                    <div class="sub_grid_2 omega">
                        <p id="transactionDate">Transaction Date: <s:property value="donateMiles.donateMilesProductType.transactionDate" /></p>
                    </div>
                    <div class="clear"></div>

                    <s:iterator value="donateMiles.donateMilesProductType.donateMilesProductResponses">
                        <div class="addedCharityDeets clearfix">
                            <div class="sub_grid_4 alpha">
                                <h4 class="recipientOrgName" mpdistrans>
                                    <s:property value="donateMilesProduct.recipientOrg.description" />
                                    <s:if test="fault.error.errorCode != 0000">
                                        &nbsp;&mdash;&nbsp;<s:property value="fault.error.errorMsg"/>
                                    </s:if> 
                                </h4>
                            </div>
                            <div class="sub_grid_1 giftedSkyMiles">
                                <p class="label">Donated Miles</p>
                                <p class="value"><s:text name="format.number"><s:param value="donateMilesProduct.recipientOrg.milesToDonate"></s:param></s:text><!--20,000 Miles--></p>
<!--                                <div class="grid_4 push_4">
                                        <div class="callout">
                                            <p class="infoicon promoicon">Applied</p>
                                            <div class="infoMessage">
                                                <h5>Promotion</h5>
                                                <p>100% matching miles.</p>
                                                <p><a href="#">See Details</a></p>
                                            </div>
                                        </div>
                                    </div>
-->                             </div>  
                                <s:if test="donateMilesProduct.estimateBonusMiles != 0">
                                <div class="sub_grid_1 omega lastcolumn">
                                    <h5 class="label">Bonus Miles</h5>
                                    <p><s:property value="donateMilesProduct.estimateBonusMiles" /></p>
                                </div>
                            </s:if>
                        </div>
                    </s:iterator>

                    <div id="thankyouMessage" class="sub_grid_3 alpha">
                        <s:if test="donateMiles.donateMilesProductType.totalBonusMiles != 0">
                            <p>As a thank you, we are crediting your account with <s:property value="donateMiles.donateMilesProductType.totalBonusMiles" /> bonus miles. <s:a href="#" cssClass="ir help" >Help</s:a><!--<a class="ir help">Help</a>--></p>
                        <s:else>&nbsp;</s:else>
                        </s:if>
                    </div>
                    <!-- div id="transactionSummary" class="sub_grid_3 omega">
                        <dl>
                            <dt class="sub_grid_2 alpha">TOTAL DONATED MILES</dt>
                            <dd class="sub_grid_1 omega"><s:property value="donateMiles.donateMilesProductType.totalDonateMilesAmount" /></dd>
                            <dt class="sub_grid_2 alpha">New SkyMiles Balance</dt>
                            <dd class="sub_grid_1 omega"><s:property value="donateMiles.donateMilesProductType.memberAvailableBalance" /></dd>
                        </dl>
                        <p>We'll send a copy of this transaction to your current email address that we have on file.</p>
                    </div -->
                    <div id="transactionSummary" class="bgt-transSummary">
                        <dl>
                            <div class="row">
                                <dt>TOTAL DONATED MILES</dt>
                                <dd id="totalDonatedMiles"><s:text name="format.number"><s:param value="donateMiles.donateMilesProductType.totalDonateMilesAmount"></s:param></s:text></dd>
                            </div>
                            <div class="row">
                                <dt class="bottomLine">New SkyMiles Balance</dt>
                                <dd id="totalDonatedMiles" class="bottomLine"><s:text name="format.number"><s:param value="donateMiles.donateMilesProductType.memberAvailableBalance"></s:param></s:text></dd>
                            </div>
                        </dl>
                        <div class="textSummary"><p>A confirmation email will be sent to the email address associated with the SkyMIles account.</p></div>
                    </div>
                </div>
                <div class="clear"></div>
                <!-- Defect 9945 -->
                <div class="contentWrapperFooter">
                <p id="returnToLandingPage"><a href="index.action">Return to Buy, Gift, Transfer</a></p>                
            </div>
            </div><!-- End div.content -->
        </div>      
    <script src='<s:url value="/buyGiftTransfer/js/delta.bgt.common.js"/>' type="text/javascript"></script>
    <jsp:include page="/components/omniture/buyGiftTransferDonate.jsp"></jsp:include>
    <script id="renderFunction">
        $('#primaryModuleContainer').html($('#_primaryModule_loggedIn').render());
        $('#renderFunction').remove();
    </script>
    <jsp:include page="/components/omniture/buyGiftTransferDonate_errors.jsp"></jsp:include>
    <script src='<s:url value="/buyGiftTransfer/js/delta.bgt.common.js"/>' type="text/javascript"></script>
    <script src='<s:url value="/buyGiftTransfer/js/donatejs.js"/>' type="text/javascript"></script>
    <script src='<s:url value="/buyGiftTransfer/js/updateDashboardMiles.js"/>' type="text/javascript"></script>
</body>
</html> 
```

这是控制打印样式的 CSS：

```
@media print {
nav#nav-widget, nav#utility-nav , .interactivebreadcrumb , footer, section{ display:none; }
.addedCharityDeets .giftedSkyMiles p.label {color:333333}
#brand a {
background:url(//int-cdn.delta.com/etc/designs/delta/images/bg-global-sprite.png) no-repeat 0 0;  
}
} 
```

当我打印页面时，它是一堆随机字符。我已经研究过字符编码和字体编码问题，但我还没有在这里或谷歌上找到任何东西。我之前的帖子刚刚关闭，所以我重新发布。我是堆栈溢出的新手，所以我不确定我需要提供什么。谢谢！

# doctrine-orm - Symfony2 Doctrine2：querybuilder 错误查询

> ID：12039472
> 
> 赞同：0
> 
> 时间：2012-08-20T14:24:20.910
> 
> 标签：doctrine-orm, symfony-2.1

Symfony2 和 Doctrine2 的新手，我的实体库中有一个功能，可以在表单提交后搜索实体。输入是数组 $get，其中包含 $get['name'] = 'aname' 等表单字段。

我的问题是，当我使用 id 或 id 和名称请求时，只需一个名称就可以了，我的所有实体都匹配，因为已构建的查询没有 where 子句。

这是我的代码：

```
public function search(array $get, $flag = False){
/* Indexed column (used for fast and accurate table cardinality) */
$alias = 'd';

/* DB table to use */
$tableObjectName = 'mysiteMyBundle:DB';

$qb = $this->getEntityManager()
  ->getRepository($tableObjectName)
  ->createQueryBuilder($alias)
  ->select($alias.'.id');

$arr = array();

//Simple array, will grow after problem solved
$numericFields = array(
   'id');

$textFields = array(
    'name');

while($el = current($get)) {
    $field = key($get);

    if ( $field == '' or $field == Null or $el == '' or $el == Null ) {
        next($get);
    }

    if ( in_array($field,$numericFields) ){
        if ( is_numeric($el) ){
            $arr[] = $qb->expr()->eq($alias.".".$field, $el);
        }
    } else {
        if ( in_array($field,$textFields) ) {
            $arr[] = $qb->expr()->like($alias.".".$field, $qb->expr()->literal('%'.$el.'%') );
        }
    }

    next($get);
}

if(count($arr) > 0) $qb->andWhere(new Expr\Orx($arr));
else unset($arr);

$query = $qb->getQuery();

if($flag)
  return $query;
else
  return $query->getResult();
} 
```

仅使用名称（例如“myname”）输入生成的查询是：

```
SELECT d0_.id AS id0 FROM DB d0_ 
```

它应该是：

```
SELECT d0_.id AS id0 FROM DB d0_ WHERE d0_.name LIKE '%myname%' 
```

我的代码有什么问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:10:52.557

你应该使用[setParameter 方法](http://symfony.com/doc/master/book/doctrine.html#querying-for-objects-with-dql)

```
$query->where('id = :id')->setParameter('id', $id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:09:17.317

我不知道是否相关，但不要使用“OR”或“AND”运算符，因为它们与经典的“&&”或“||”具有不同的含义。cf [http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

因此，首先，将“AND”替换为“&&”，将“OR”替换为“||”。

# twitter - 使用 twitter 流 API 跟踪多个主题标签

> ID：12039481
> 
> 赞同：6
> 
> 时间：2012-08-20T14:24:41.727
> 
> 标签：twitter

当我访问（使用适当的凭据）时：

[https://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help](https://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help) '

我得到了我想要的：带有#help 主题标签的无休止的推文流。

然而，

[https://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help,#perl](https://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help,#perl)

产生错误

索引 70 处片段中的非法字符： [https ://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help,#perl](https://stream.twitter.com/1/statuses/filter.json?lang=en&track=#help,#perl)

这似乎是“#perl”中的“#”。怎么修？

作为参考，这很好用：

[https://stream.twitter.com/1/statuses/filter.json?lang=en&track=perl,#help](https://stream.twitter.com/1/statuses/filter.json?lang=en&track=perl,#help)

虽然这不是：

[https://stream.twitter.com/1/statuses/filter.json?lang=en&track=perl,#help,#ruby](https://stream.twitter.com/1/statuses/filter.json?lang=en&track=perl,#help,#ruby)

是否有不跟踪多个主题标签的规则，还是我在做一些更根本错误的事情？我应该通过跟踪“hashtag”来跟踪“#hashtag”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-16T22:19:29.417

```
['term1,term2'] 
```

但是标签呢？此链接说不要使用它们： [https ://dev.twitter.com/streaming/overview/request-parameters#track](https://dev.twitter.com/streaming/overview/request-parameters#track)

我们可以删除撇号和空格（在python中）

```
upgrades_str = re.sub('[\' \[\]]', '', upgrades_str)
upgrades_str = '[\''+format(upgrades_str)+'\']' 
```

# c++ - 错误 C2664：“CSchemaString::CSchemaString(LPCTSTR)”：无法将参数 1 从“int”转换为“LPCTSTR”

> ID：12039484
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:24:46.597
> 
> 标签：c++, visual-studio, visual-c++, compiler-errors, visual-studio-2005

我收到以下错误：

错误 C2664：“CSchemaString::CSchemaString(LPCTSTR)”：无法将参数 1 从“int”转换为“LPCTSTR”

对于以下代码：

```
for(i=0;i<=tComponent.GetUpperBound();i++)
{       
    CSchemaString temp(i); // LINE AT WHICH ERROR OCCURS
    XComponent = ((Component *)tComponent.GetAt(i))->GetXMLCode(FOR_SAVING);               //AddName(*/temp +":"+*/ ((Component *)tComponent.GetAt(i))->GetName());
    XSave.AddPlant_Item(XComponent);

} 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:37:24.373

您似乎正在尝试将其创建`temp`为`CSchemaString`传递`i`（似乎是`int`）作为参数。如果我猜对了，这个类的可能构造函数是：

```
CSchemaString ()
CSchemaString (const tstring sValue)
CSchemaString (const TCHAR *szValue)
CSchemaString (const double nValue)
CSchemaString (const CSchemaType &rOther) 
```

根据您在做什么，也许您需要转换`i`为字符串或双精度才能满足`CSchemaString` 构造函数签名？

# asp-classic - IsNumeric 函数无法正常工作

> ID：12039485
> 
> 赞同：8
> 
> 时间：2012-08-20T14:24:48.047
> 
> 标签：asp-classic, isnumeric

经典asp失败中的IsNumeric函数有一个非常奇怪的问题。我的代码中发生了这样的事情：

```
Response.write Score                // 79.617
Response.write IsNumeric(Score)     // false
Response.write IsNumeric("79.617")  // true 
```

有没有人知道为什么会发生这种情况？

在规范中，据说这些函数适用于可以转换为数字的字符串，从上面的示例中您可以看到我得到“真实”的结果。但是什么会导致我的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T14:29:09.770

这意味着`Score`根本不是字符串，而是其他东西，很可能来自数据库。

为了安全起见，请使用您自己的函数：

```
Function My_IsNumeric(value)
    My_IsNumeric = False
    If IsNull(value) Then Exit Function
    My_IsNumeric = IsNumeric(CStr(value))
End Function

Response.write My_IsNumeric(Score) 
```

将`CStr()`确保将除 Null 之外的任何内容转换为字符串，并处理来自数据库的 Null，您拥有该`IsNull()`功能。

# asp.net - 将收到的邮件附件文件保存在单独的文件夹中？

> ID：12039491
> 
> 赞同：0
> 
> 时间：2012-08-20T14:25:21.493
> 
> 标签：asp.net

将收到的邮件附件文件保存在 Gmail 帐户的单独文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:30:04.200

您可以标记带有附件的邮件 - Gmail 不存储单独的文件。以下是您如何在标签（“文件夹”）下收集带有附件的邮件：

*   设置/过滤器/创建新过滤器
*   支票有附件
*   应用标签“带有附件的我的邮件”

# sql-server - 为什么 SQL Server 使用“Binn”目录而不是“Bin”

> ID：12039493
> 
> 赞同：32
> 
> 时间：2012-08-20T14:25:28.773
> 
> 标签：sql-server

纯粹出于好奇，为什么 SQL Server 会创建 Binn 文件夹

```
C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn 
```

并且不使用更常见的 Bin 文件夹？肯定有什么原因吧？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-20T14:43:59.123

编写了几本关于 SQL Server 的书籍的[Haidong Ji](http://www.haidongji.com/about-me/)[声称](http://www.haidongji.com/2008/11/24/resource-database-has-been-moved-to-a-new-location-in-sql-server-2008/)这是 16 位到 32 位迁移的历史遗留问题：

> 顺便问一下，你知道为什么这个文件夹叫 Binn 吗？为什么是两个“n”？那里有一点历史。早在 16 位时代，所有二进制文件都存储在 Bin 文件夹下。然而，随着事情转向 32 位和 Windows NT 进入市场，创建了这个新文件夹 Binn 以适应这种情况。额外的 n 取自 NT，代表“新技术”。

# android - AIR Android 应用程序远程调试

> ID：12039494
> 
> 赞同：1
> 
> 时间：2012-08-20T14:25:34.177
> 
> 标签：android, apache-flex, air, remote-debugging

我在 Flash Builder 4.6 中创建了我的 AIR 应用程序，并尝试通过 USB 在设备上对其进行调试。应用程序已正确部署，但未连接到 Internet。我已正确设置权限

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

当我导出发布版本并将其部署在同一设备上时，它可以毫无问题地连接到互联网。
任何想法如何解决它？

# assembly - 编写这个汇编程序

> ID：12039497
> 
> 赞同：0
> 
> 时间：2012-08-20T14:25:41.883
> 
> 标签：assembly, mips, nios

我对汇编子程序有一个非常精确的规范：

> 规格
> 
> 名称：子程序必须叫 hexasc。输入参数：只有一个，在寄存器 r4 中。寄存器 r4 中的 4 个最低有效位指定一个从 0 到 15 的数字。输入中所有其他位的值必须被忽略。返回值：只有一个，在寄存器r2中返回。寄存器 r2 中的 7 个最低有效位必须是如下所述的 ASCII 码。输出中的所有其他位必须为零。所需操作：输入值 0 到 9 必须分别转换为数字“0”到“9”的 ASCII 代码。输入值 10 到 15 必须分别转换为字母“A”到“F”的 ASCII 代码。副作用：寄存器 r2 到 r15 中的值可能会改变。当子程序返回时，所有其他寄存器的值必须保持不变。

我可能知道如何制作子程序，但我以前从未这样做过。我不知道如何从寄存器中指定 4 个最低有效位。我不知道如何返回值。我刚刚开始使用汇编编程，我可以运行但不能真正编写程序。你能给我一些有用的提示吗？处理器手册可[在此处](ftp://ftp.altera.com/outgoing/download/support/ip/processors/nios2/niosII_docs_11_1.zip)获得。

我能建议的最好的，因为我从互联网上借了一些代码，所以我不明白的是

```
 .global main 

        .text
        .align 2

main:   movi r8, 0x09
        movi r9, 0x0f

        andi r4, r4, 0x0f

        bgt r8, r4, L1  

        movi r2, 0x1e
        add r2, r2, r4  
        andi r2, r2, 0xff

        movia   r2,putchar
        br  L2  

L1:     movi r2, 0x29   
        add r2, r2, r4
        andi r2, r2, 0xff

        movia   r2,putchar

L2:  .end 
```

我已经评论了代码，但我认为它不符合规范，因为它不是子例程，我不确定转换算法是否正确实现：

```
 .global hexasc 

        .text
        .align 2

hexasc: movi r8, 0x09       #we are going to use the decimal number 9
        movi r9, 0x0f       #we also will use decimal number 15

        andi r4, r4, 0x0f   #keep only last 4 bits of what is in r4

        bgt r8, r4, L1      #go to L1 if 9 > x

        movi r2, 0x1e       #use decimal number 30
        add r2, r2, r4      #add 30 and what is in r4
        andi r2, r2, 0xff

        movia   r2,putchar
        br  L2  

L1:     movi r2, 0x29        #this is reached iff 9 > x
        add r2, r2, r4
        andi r2, r2, 0xff

        movia   r2,putchar

L2:  .end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:58:13.877

由于这是家庭作业，编写代码是您自己的任务，但也许这可以帮助您：

如果您有一个任意大小的寄存器，并且只想要其中的特定位，请考虑使用掩码进行与运算。例如，对于 7 个最低有效位

```
11111101 AND 01111111 => 01111101 
```

关于*我不知道如何返回值*，答案写在你的作业中：

> 返回值：只有一个，在寄存器r2中返回

只需在例程结束之前将要返回的任何内容存储在寄存器 r2 中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:52:59.023

对于其中一些要点，您可能会过度思考这个作业/汇编与其他结构化编程术语。在汇编中（通常），子程序就是这样 - 可以独立运行的代码片段。例如，我在整个汇编过程中一直重复使用的子例程之一是一个子例程，用于获取写入闪存的字符串并通过串行连接发送它（或多或少，一个常量字符串 cout ......你很快就会得到它足够）。我个人使用 .macro 指令编写了这些子例程，以使代码具有更“程序化”的感觉...

返回值仅如问题所示：

> 返回值：只有一个，在寄存器r2中返回。寄存器 r2 中的 7 个最低有效位必须是如下所述的 ASCII 码。

这意味着无论程序的适当输出应该是什么，它都应该在寄存器 r2 中。

从实际编码的角度来看，我将从熟悉本文档开始： [http ://www.altera.com/literature/hb/nios2/n2cpu_nii51017.pdf](http://www.altera.com/literature/hb/nios2/n2cpu_nii51017.pdf)

最后，当我上这门课时，我们使用了 Atmel AVR 处理器和这本书，这是迄今为止我所见过的关于汇编编程的最完整、最容易阅读的“初学者”书籍之一……然后再说一次，我很幸运能和写这本书的教授一起上课......而且它在 AVR 指令集之外也可能没有那么有用，但它确实对低级系统提供了非常深入、实用的看法编程。

[http://www.amazon.com/Some-Assembly-Required-Microcontroller-ebook/dp/B007IVDXVM/ref=cm_cr_pr_product_top](https://rads.stackoverflow.com/amzn/click/com/B007IVDXVM)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:00:00.280

通常，这是通过对高 28 位进行“与”运算并使用剩下的内容来索引“0123456789ABCDEF”ASCII 查找表来完成的。这就像 ARM 中的 3 条指令。

祝你好运！

# perl - Perl：在 foreach 循环中搜索和替换

> ID：12039498
> 
> 赞同：1
> 
> 时间：2012-08-20T14:25:42.570
> 
> 标签：perl, hl7

也许有人可以帮助我。我需要对给定的字符串进行搜索和替换，找到任何出现的事物列表之一，并在它之前插入一个回车符。

我提供了一个示例字符串，以及我解决问题的尝试。

样本输入：

```
MSH|^~\&|PCM|A|NSG|A|20120613081122|DoNotBundle|ORM^O01|1133316|P|2.2|||AL|NEPID|1|1234567^PI^PE|345235^ST02A^MR^A~02340395^ST02^PI||HSM^AERHART||19510418000000|F||||||||||1215200001^A|111-22-3333
PV1|1|I|CCU^W207^A^A||||12342^ALI^ROGERS^M^MD^MD|||SUR|||||||16532^ALI^ROGERS^M^MD^MD|INP||B|||||||||||||||||||A|||||20120531145230ORC|PA|11109489^PCM|11109489^PCM|94986|SC||1^Continuous^INDEF^20120613081900^1||20120613081958|RGYIDDER^YIDDER^ROBERT^GSYSTEM ADM^SA||16532^ALI^ROGERS^MMD^MD|CCU||20120613081958|||CCU|RGYIDDER^YIDDER^ROBERT^
G^SYSTEM ADM^SA
OBR|1|11109489^PCM|11109489^PCM|DNR ON^Hard of Hearing^NSG||20120613081122||||||||||16532^ALI^ROGERS^M^MD^MD|||||||||||1^Continuous^INDEF^20120613081900^1 
```

我的尝试：

```
$/ = undef;         #tells perl to ignore newlines when reading input
$input = <STDIN>;   #read entire input into $input

$input =~ s/\R/ /g;  #remove all newlines from input. \R matches \r, \n, \r\n

@validSegHdrs = (   "ABS", "ACC", "ADD", "ADJ", "AFF", "AIG", "AIL", "AIP", "AIS", "AL1",
                    "APR", "ARQ", "ACC", "ADD", "ADJ", "AFF", "AIG", "AIL", "AIP", "AIS",
                    "AL1", "APR", "ARQ", "ARV", "AUT", "BHS", "BLC", "BLG", "BPO", "BPX",
                    "BTS", "BTX", "CDM", "CER", "CM0", "CM1", "CM2", "CNS", "CON", "CSP",
                    "CSR", "CSS", "CTD", "CTI", "DB1", "DG1", "DMI", "DRG", "DSC", "DSP",
                    "ECD", "ECR", "EDU", "EQP", "EQU", "ERR", "EVN", "FAC", "FHS", "FT1",
                    "FTS", "GOL", "GP1", "GP2", "GT1", "IAM", "IIM", "ILT", "IN1", "IN2",
                    "IN3", "INV", "IPC", "IPR", "ISD", "ITM", "IVC", "IVT", "LAN", "LCC",
                    "LCH", "LDP", "LOC", "LRL", "MFA", "MFE", "MFI", "MRG", "MSA", "MSH",
                    "NCK", "NDS", "NK1", "NPU", "NSC", "NST", "NTE", "OBR", "OBX", "ODS",
                    "ODT", "OM1", "OM2", "OM3", "OM4", "OM5", "OM6", "OM7", "ORC", "ORG",
                    "OVR", "PCE", "PCR", "PD1", "PDA", "PDC", "PEO", "PES", "PID", "PKG",
                    "PMT", "PR1", "PRA", "PRB", "PRC", "PRD", "PSG", "PSH", "PSL", "PSS",
                    "PTH", "PV1", "PV2", "PYE", "QAK", "QID", "QPD", "QRD", "QRF", "QRI",
                    "RCP", "RDF", "RDT", "REL", "RF1", "RFI", "RGS", "RMI", "ROL", "RQ1",
                    "RQD", "RXA", "RXC", "RXD", "RXE", "RXG", "RXO", "RXR", "SAC", "SCD",
                    "SCH", "SCP", "SDD", "SFT", "SID", "SLT", "SPM", "STF", "STZ", "TCC",
                    "TCD", "TQ1", "TQ2", "TXA", "UAC", "UB1", "UB2", "URD", "URS", "VAR",
                    "VND"
);

foreach (@validSegHdrs) {
    $input =~ s/$_/\r$_/g;
}

print $input; 
```

-

对于它的价值，我正在使用 HL7。HL7 由“段”组成，每个段都有自己的行。以“MSH”开头的段总是第一个，并且在每个附加段之前必须有一个回车符。

我的输入可能在段的中间有换行符（或回车），这是不允许的。我也可能会遇到一个新段与另一个段在同一行开始，这也是不允许的。

我打算解析输入，首先去除所有换行符，然后找到任何匹配的有效段标题，然后在它们之前插入一个回车符。我已经定义了一个包含所有有效段标头的数组，并尝试使用 foreach 循环进行简单的搜索和替换以在每个匹配项之前插入 \r。我认为匹配每个字符串加上'|'可能是个好主意，例如匹配'PV1|' 更准确地说。

我没有得到预期的输出，所以我谦虚地要求一些专业知识。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:19:30.720

```
@validSegHdrs = (   "ABS", # .....
);

my $regex = join ("|", @validSegHdrs);
while (<>) {
  s/\R/ /g;
  s/($regex)/\r$1/g;
  print;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:10:52.807

我从命令行使用了这个脚本：

```
perl -e 'print "\n"; local $/; $in=<>; $in=~s/\R//g; my @blk = qw(ABS ACC ADD ADJ AFF AIG AIL AIP AIS AL1 APR ARQ ACC ADD ADJ AFF AIG AIL AIP AIS AL1 APR ARQ ARV AUT BHS BLC BLG BPO BPX BTS BTX CDM CER CM0 CM1 CM2 CNS CON CSP CSR CSS CTD CTI DB1 DG1 DMI DRG DSC DSP ECD ECR EDU EQP EQU ERR EVN FAC FHS FT1 FTS GOL GP1 GP2 GT1 IAM IIM ILT IN1 IN2 IN3 INV IPC IPR ISD ITM IVC IVT LAN LCC LCH LDP LOC LRL MFA MFE MFI MRG MSA MSH NCK NDS NK1 NPU NSC NST NTE OBR OBX ODS ODT OM1 OM2 OM3 OM4 OM5 OM6 OM7 ORC ORG OVR PCE PCR PD1 PDA PDC PEO PES PID PKG PMT PR1 PRA PRB PRC PRD PSG PSH PSL PSS PTH PV1 PV2 PYE QAK QID QPD QRD QRF QRI RCP RDF RDT REL RF1 RFI RGS RMI ROL RQ1 RQD RXA RXC RXD RXE RXG RXO RXR SAC SCD SCH SCP SDD SFT SID SLT SPM STF STZ TCC TCD TQ1 TQ2 TXA UAC UB1 UB2 URD URS VAR VND); $in=~s/$_/\n$_/ for @blk; print $in, "\n";' 
```

并得到了这个输出：

```
MSH|^~\&|PCM|A|NSG|A|20120613081122|DoNotBundle|ORM^O01|1133316|P|2.2|||AL|NE
PID|1|1234567^PI^PE|345235^ST02A^MR^A~02340395^ST02^PI||HSM^AERHART||19510418000000|F||||||||||1215200001^A|111-22-3333
PV1|1|I|CCU^W207^A^A||||12342^ALI^ROGERS^M^MD^MD|||SUR|||||||16532^ALI^ROGERS^M^MD^MD|INP||B|||||||||||||||||||A|||||20120531145230
ORC|PA|11109489^PCM|11109489^PCM|94986|SC||1^Continuous^INDEF^20120613081900^1||20120613081958|RGYIDDER^YIDDER^ROBERT^GSYSTEM     ADM^SA||16532^ALI^ROGERS^MMD^MD|CCU||20120613081958|||CCU|RGYIDDER^YIDDER^ROBERT^G^SYSTEM     ADM^SA
OBR|1|11109489^PCM|11109489^PCM|DNR ON^Hard of Hearing^NSG||20120613081122||||||||||16532^ALI^ROGERS^M^MD^MD|||||||||||1^Continuous^INDEF^20120613081900^1 
```

如果脚本是缩进的，它看起来像这样：

```
local $/;
$in=<>;
$in=~s/\R//g;
my @blk = qw(
    ABS ACC ADD ADJ AFF AIG AIL AIP AIS AL1 APR ARQ ACC ADD ADJ AFF AIG AIL AIP
    AIS AL1 APR ARQ ARV AUT BHS BLC BLG BPO BPX BTS BTX CDM CER CM0 CM1 CM2 CNS
    CON CSP CSR CSS CTD CTI DB1 DG1 DMI DRG DSC DSP ECD ECR EDU EQP EQU ERR EVN
    FAC FHS FT1 FTS GOL GP1 GP2 GT1 IAM IIM ILT IN1 IN2 IN3 INV IPC IPR ISD ITM
    IVC IVT LAN LCC LCH LDP LOC LRL MFA MFE MFI MRG MSA MSH NCK NDS NK1 NPU NSC
    NST NTE OBR OBX ODS ODT OM1 OM2 OM3 OM4 OM5 OM6 OM7 ORC ORG OVR PCE PCR PD1
    PDA PDC PEO PES PID PKG PMT PR1 PRA PRB PRC PRD PSG PSH PSL PSS PTH PV1 PV2
    PYE QAK QID QPD QRD QRF QRI RCP RDF RDT REL RF1 RFI RGS RMI ROL RQ1 RQD RXA
    RXC RXD RXE RXG RXO RXR SAC SCD SCH SCP SDD SFT SID SLT SPM STF STZ TCC TCD
    TQ1 TQ2 TXA UAC UB1 UB2 URD URS VAR VND);
$in=~s/$_/\n$_/ for @blk;
print $in, "\n"; 
```

你会用我猜的`\n`替换`\r`。

我不知道我们的脚本之间的真正区别是什么，但它对我有用？？

请注意，使用哈希可能更有效（*O(n)* → *O(1)*其中*n*是标头序列的数量）：

```
 my %hash = map {$_ => 1} @blk;
 # Test if $1 is a header sequence, if so, print newline
 $in =~ s/( [A-Z0-9]{3} )/ $hash{$1} ? "\n$1" : $1 /xeg; 
```

# jquery - Jquery序列化数组 - 仅返回匹配值

> ID：12039499
> 
> 赞同：0
> 
> 时间：2012-08-20T14:25:46.737
> 
> 标签：jquery, arrays

我有一个表单并在输入更改时使用 Jquery 创建一个名为“字段”的数组：

```
var fields = $(":input").serializeArray(); 
```

然后我在 .each 函数中使用这个数组来显示项目列表：

```
jQuery.each(fields, function(i, field){

//get multiple values into array and perform action for each
val = field.value;
name = field.name;
var valarray = val.split(',');
for (var i in valarray) {
    //get each answer
    val = $.trim(valarray[i]);

    $("#pid"+val).show();
}//end for
});//end each 
```

目前，如果选择了 3 个单选按钮，console.log 会显示这一点：

```
[Object { name= "question1" ,  value= "aa,bb,cc,dd" }, Object { name= "question2" ,  value= "bb,cc" }, Object { name= "question3" ,  value= "cc,ee" }] 
```

并显示所有值 aa、bb、cc、dd 和 ee。

我想做的不是显示所有值，而是比较每个问题的值，并且只显示出现在所有问题中的值（在本例中为 cc）。想法是过滤列表，因此如果仅选择了 question1 和 question2，则会显示“bb”和“cc”。此外，如果选择了值为“dd”的第 4 个问题，因此没有与所有问题匹配的值，我想返回警报并删除/取消选择最后一个值，因此恢复为只是“抄送”。

我不知道如何比较这些值以仅显示匹配的值。我在stackoverflow上使用了一些答案中的代码，我尝试过计算实例，但似乎是在循环中，所以任何帮助都将不胜感激。

I hope I've given you enough info. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:28:29.410

I don't know whether I managed to catch everyone out or if this was just missed but I worked out a solution by counting the occurences of each answer and where this equals the amount of questions asked (ie, the answer appears for all questions), adding it to another array. Thanks anyway!

# javascript - 这些是否被认为是 Javascript 闭包？

> ID：12039502
> 
> 赞同：6
> 
> 时间：2012-08-20T14:26:00.800
> 
> 标签：javascript, closures

想在这里得到一些直接的东西......所以我有 2 个问题

**下面的函数创建一个闭包。**

```
function Foo(message){
    var msg = message;

    return function Bar(){ 
        this.talk = function(){alert(msg); }
    }
}; 
```

**问：哪个函数是闭包，`Foo`还是`Bar`？**
我一直认为闭包是`Foo`，因为它关闭了`Bar`一次`Bar`返回。

下一个...

下面是匿名函数的定义：

```
()(); 
```

**问：这个匿名函数中的内部函数也是闭包吗？**

```
(function(){ /* <-- Is this function also a closure? */ })(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:30:56.880

您需要在这里使用第一原则。Javascript 使用*词法范围*。这意味着执行上下文的范围取决于代码的**定义**方式（词法）。

我会说函数的**定义**`Bar`是*导致*创建闭包的原因，因为`msg`在函数中是“封闭的”。

闭包的实际创建发生在运行时（这有点像重言式的陈述，因为计算机程序在运行之前不会发生任何事情），因为为了确定`msg`, in的值`Bar`，当`Bar`执行时，解释器需要知道`Foo`执行时变量的值，依此类推。

对于你的问题，我将给出两个答案。迂腐的答案是：这两个函数本身都不是闭包。它是函数中变量的*定义*，结合函数运行时的执行上下文，定义了闭包。常见的答案是：关闭变量的任何函数都是闭包（在您的情况下为 Bar ）。

考虑每个人在使用 Javascript 时遇到的问题。

```
function A(x) {
   var y = x, fs = [];

   for (var i = 0; i < 3; i++) {
       fs.push(function(){
         console.log (i + " " + x);
       })
   }

   fs.forEach(function(g){g()})  
}

A('hi') 
```

大多数人会说这会产生输出“hi 1”，然后是“hi 2”，然后是“hi 3”。但是，它会产生 3 次“hi 3”。如果只是将函数的定义添加到数组中，而使用外部函数中定义的变量，则创建了闭包，这怎么可能？

这是因为您需要*执行上下文*来定义闭包，直到运行时才会发生。在执行数组中的函数时，`i`值为`3`。在`forEach`语句中，这就是执行上下文，这就是输出总是使用 3 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:49:53.113

`Bar`是关闭。

我们说它`Bar` *关闭了*其环境中的变量`msg`。

大多数情况下，*闭包*这个词的意思是：在一个封闭函数中使用至少一个在封闭范围内定义的变量的函数。

回答你的第二个问题：`(function(){ ... })()`它看起来像：一个匿名函数，而不是两个。除非它嵌套在另一个函数中，否则通常不会将其称为闭包。但是，嵌套在该匿名函数中的函数可以是闭包（并且通常是）。

# ruby - 从命令行运行 Ruby 脚本

> ID：12039504
> 
> 赞同：1
> 
> 时间：2012-08-20T14:26:01.763
> 
> 标签：ruby, execute

我有 2 个脚本：

测试1.rb

```
require 'test2.rb'
puts "hello" 
```

test2.rb

```
puts "test" 
```

我通过执行来运行它`ruby test2.rb test1.rb`。

但只是`test`打印出来而不是`hello`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:29:04.463

您只需要运行`ruby test1.rb`并且该`require`语句应该为您拉入 test2.rb - 您也不需要将它放在命令行上。（这将尝试运行 test2.rb，将字符串“test1.rb”作为参数传递，这不是你想要的）

编辑：`require`默认情况下，该语句在尝试查找“test2.rb”时不会在当前目录中查找。您可以通过将其更改为显式指定它：

`require File.dirname(__FILE__) + '/test2.rb'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:50:57.607

在 test1.rb 中做（假设 test2.rb 在同一目录中，否则给出相对于 test1.rb 的路径）

```
require_relative 'test2.rb'
puts "hello" 
```

并在命令行上做`ruby test1.rb`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T21:02:31.200

这也应该有效

```
require './test2.rb'
puts "hello" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-09T21:22:29.933

有一些解释如何解决您的问题，但没有说明出了什么问题。

使用**参数**test1.rb`ruby test2.rb test1.rb`调用 ruby​​ 脚本。

 **您可以访问常量中的参数`ARGV`。

此脚本的示例：

```
puts "test"
puts 'ARGV= %s' % ARGV 
```

调用它时的结果：

```
C:\Temp>ruby test.rb test2.rb
test
ARGV= test2.rb 
```

因此，您还可以编写如下程序：

```
require_relative ARGV.first 
```

第一个参数定义要加载的脚本。

或者，如果您想加载许多脚本，您可以使用：

```
ARGV.each{|script| require_relative script } 
```**

# windows - 使用 Windows 命令行删除 \bin 目录中的所有文件

> ID：12039506
> 
> 赞同：1
> 
> 时间：2012-08-20T14:26:08.063
> 
> 标签：windows, command-line, batch-file

我想清理我的开发目录中的二进制文件。有没有办法可以递归遍历目录结构并`bin`使用 Windows 命令行删除目录中的所有文件？（我使用的是 Windows 7。）

Per Nathan，我试着做一批`foo.bat`：

```
@ECHO OFF 
for /R %%x in (.) do call:myExistFunc %%x 
GOTO:EOF 
:myExistFunc 
if exist %~1\.\bin call:myDeleteFunc %%~1\bin 
GOTO:EOF 
:myDeleteFunc 
echo. Deleting files from %~1 
del %~1*.* /Q 
```

......这奏效了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:51:39.807

创建一个包含以下内容的批处理文件：

```
for /R %%x in (bin) DO del "%%x\\*.*" /Q 
```

这将递归遍历所有子目录（从当前目录）并从每个 BIN 文件夹中删除所有文件。您可以将 更改为`*.*`您要删除的任何文件类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T20:14:01.837

这应该在批处理文件中工作：

```
for /R %%x in (bin) do if exist "%%x" del /q "%%x\*.*" 
```

如果直接从命令行运行此命令，请将 的所有实例替换`%%x`为`%x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:43:43.180

自从我使用任何DOS以来已经有一段时间了，但是..

```
DEL BIN\*.* 
```

那应该删除当前目录下名为 BIN 的目录中的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:28:10.940

你应该写一个bat文件：

```
for /r %%f in (*) do 'WHATEVER YOU WANT TO DO' 
```

# c# - 类是引用类型，结构是值类型吗？

> ID：12039509
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:26:20.090
> 
> 标签：c#, class, struct, heap-memory, stack-memory

我知道这个话题得到了很多回答。我的问题是特定于说或问的方式。

所以我说得对吗，用 class 关键字编写的代码将在托管堆上并且是引用类型，而用 struct 编写的代码将在堆栈上并且是值类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:32:02.730

我以前也是这样想的。然而，我最近与*Jon Skeet*进行了一次很好的讨论（他可能会提供更多细节），他向我解释说 a`value type`也可以保留在堆上。关键是**该变量将使用多长时间**。如果它是一个短暂的值类型变量，它将只留在堆栈中。但是，如果它被多次使用，框架会将其保留在堆中以节省堆栈空间。

IMO，引用类型和值类型之间的主要区别在于将对象传递给另一个对象或方法。如果它是引用类型，那么您只是在共享它的**引用**。如果它是一个值类型，那么您正在**制作它的副本**。

关于短 x 长寿命变量的主题，以下是全图：

> 在桌面 CLR 上的 C# 的 Microsoft 实现中，当值是局部变量或临时值且不是 lambda 或匿名方法的封闭局部变量且方法体不是迭代器块，并且抖动选择不注册该值。

来源：[关于值类型的真相](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)（也在评论中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:24:58.043

引用类型的任何存储位置（局部变量、参数、类字段、结构字段或数组槽）将始终保持`null`，否则将持有对堆上对象的引用。值类型的存储位置将保存该类型的所有公共和私有字段（原始值类型在内部存储为具有一个字段的结构，该字段被声明为相同的原始类型；一点编译器魔术是用于识别何时必须使用特殊情况代码来处理该类型）。对于每个值类型，都有一个对应的具有相同成员的堆对象类型；尝试将值类型存储在引用类型存储位置将创建适当堆类型的新堆对象，将值类型字段的内容复制到新对象的内容，并存储对该新对象的引用在请求的存储位置。这个过程称为“装箱”。它' 可以将装箱堆对象字段的内容复制到值类型存储位置的内容，这个过程称为“拆箱”。请注意，因为装箱值类型是使用引用类型存储位置访问的，所以它们的行为类似于引用类型而不是类类型。C# 试图假装值类型存储位置的类型和装箱值类型实例的类型是相同的类型，但是这两种类型的行为有些不同；假装它们相同只会增加混乱。C# 试图假装值类型存储位置的类型和装箱值类型实例的类型是相同的类型，但是这两种类型的行为有些不同；假装它们相同只会增加混乱。C# 试图假装值类型存储位置的类型和装箱值类型实例的类型是相同的类型，但是这两种类型的行为有些不同；假装它们相同只会增加混乱。

# java - 爪哇。上传文件时如何指定服务器路径？

> ID：12039513
> 
> 赞同：0
> 
> 时间：2012-08-20T14:26:34.740
> 
> 标签：java, outputstream

我需要以编程方式将文件（并创建目录）保存到另一台服务器。我怎样才能做到这一点？在另一台服务器有一个共享目录（写访问），并想在这里写文件。我用

```
FileOutputStream file = new FileOutputStream(fullFileName, false); 
```

`fullFileName` 在哪里

`////SRV0105-FSACL01/SharedDirectory/directoriesCreatedByMe/filename.xls`

我认为服务器路径写的不正确，这里可能有一些额外的斜杠吗？

**编辑**：命令操作失败`dir.mkdirs()`（此命令返回`false`）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:35:57.250

```
org.apache.commons.io.FileUtils.copyFile(new File("////MY-COMP/Documentations/Java/Maven.pdf "), new File("D:/p.pdf")); 
```

运作良好

```
org.apache.commons.io.FileUtils.copyFile(new File("//MY-COMP/Documentations/Java/Maven.pdf "), new File("D:/t.pdf")); 
```

也运作良好

使用类`org.apache.commons.io.FileUtils`

```
 <dependency>
     <groupId>commons-io</groupId>
     <artifactId>commons-io</artifactId>
     <version>1.4</version>
     <type>jar</type>
  </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:38:38.383

如果您的两台服务器（一台服务器运行 java，另一台用于存储文件）都是 windows，则可以将 \ServerComputerName\ShareName 设置为 Driver 作为 F: 并写入 F://filename.xls 如果两者都是 linux，则启动目标服务器上的 NFS 服务，并安装在运行 java 的服务器上的导出文件夹上。如果是混合环境，考虑sftp方案，可以参考[JSch](http://www.jcraft.com/jsch/)

# c++ - 内存手表和 C++

> ID：12039517
> 
> 赞同：1
> 
> 时间：2012-08-20T14:26:51.260
> 
> 标签：c++, memory-leaks

有人用过C++的[memwatch吗？](http://www.linkdata.se/sourcecode/memwatch/)我提到的文档仅将它与 C 一起使用。我很好奇它在查找内存泄漏时是否同样适用于 C++ 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:30:22.857

好吧，您链接到的主页说*“对 C++ 的基本支持（默认情况下禁用，请谨慎使用！）”*所以我会说......请谨慎使用。:-)

也就是说，它可能工作得“足够好”，但输出可能是神秘的，因为 C++ 处理符号的方式与 C 不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T02:34:06.927

1.  将您的文件更改`memwatch.c`为`memwatch.cpp`

2.  定义宏`MEMWATCH`和`MW_STDIO`

3.  `include memwatch.h``ew->mwNew delete->mwDelete`并在您的程序文件中定义 n

告诉我是否有效

# c - 高效的函数调用

> ID：12039520
> 
> 赞同：0
> 
> 时间：2012-08-20T14:26:54.837
> 
> 标签：c

我需要你的帮助来编写一个高效的程序。

我有大约 50 个功能说`call_1()`，`call_2()`...。`call_50()`我需要根据从数据包中读取的索引来调用它们，即如果 data 中的字段是 25 in need to call `call_25()`，如果是 10 then `call_10()`。

我已经在 if else 条件下写了这个

```
if (index == 5) 
    call_5() 
elseif (index == 6)
   ..so on .. 
```

但我认为这不是有效的写作方式。实施此方案的任何其他想法？函数指针在这里有帮助吗？感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:29:08.880

是的，使用函数指针的查找表：

```
typedef void(*fp)(void);

void call_01(void);
void call_02(void);
/* ... */

fp functions[] = { &call_01,
                   &call_02,
                   /* ... */
                 };

void call()
{
    unsigned int n = get_index();
    functions[n]();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:28:31.327

如果所有 50 个函数的参数都相同，请使用函数指针数组：

```
typedef void (*FieldHandler)(void);

const FieldHandler handlers[50] = { call_0, call_1, /* ... and so on ... */ }; 
```

然后你只需索引数组并调用：

```
handlers[index](); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:28:53.807

如果您的所有函数都具有相同的签名，您可以在那里轻松地使用函数指针数组。

```
typedef void (*func)(void);
...
func dispatch_table[] = {
   func0,
   func1,
   func2,
...
   func50,
}; 
```

后来像这样使用

```
int function_index = packet_get_func_index( packet );
...
dispatch_table[ function_index ](); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:29:20.547

是的，函数指针是通往这里的路。

我建议创建一个函数指针表，因为你的输入是一个索引，你只需索引表来调用正确的函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:29:37.597

我会使用 switch 语句：

```
switch(index) {
  case 1: return call01();
  case 2: return call02();
  case 3: return call03();
} 
```

这并不比使用函数指针多多少代码，而且（恕我直言）更简洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T14:32:30.143

是的，这是非常低效的。我认为最好的方法是在 0 - 255 的范围内编写这种形式的调度程序：

无效（*调度程序[255]）；

当然，您需要分配所有必要的函数而不是执行 if 语句，但这会快得多：

```
dispatcher['a'] = &call_1;
dispatcher['b'] = &call_2;
dispatcher['c'] = &call_3;
... 
```

然后你可以这样做：

dispatcher(index) 并且它会知道要执行哪个函数。

希望有帮助。

# tabs - 选项卡不显示在 Kindle Fire 上

> ID：12039522
> 
> 赞同：2
> 
> 时间：2012-08-20T14:27:04.133
> 
> 标签：tabs, kindle

我有一个使用选项卡作为开始菜单的 Android 应用程序。当我将应用程序移植到 Kindle Fire 时，这些选项卡不显示。这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView

    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:isScrollContainer="true" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TabHost
        android:id="@+id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/Beginning"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/Intermediate"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/Advanced"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>
</LinearLayout>

</ScrollView>
package com.myproject.project;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.content.res.AssetManager;
import android.database.Cursor;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.os.Environment;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;
import android.widget.Toast;

public class TabsTestActivity extends Activity {
/** Called when the activity is first created. */

public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "name";
public static final String KEY_LEVEL = "level";
public static final String KEY_CHART = "charted";
public String extStorageDirectory = Environment
        .getExternalStorageDirectory().toString();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    PopulateDatabase();

    CopyVideoFiles();

    TabHost tabhost = (TabHost) findViewById(R.id.tabhost);
    tabhost.setup();

    TabSpec spec_beg = tabhost.newTabSpec("Beginning");
    spec_beg.setContent(R.id.Beginning);
    TextView txtTabInfo = new TextView(this);
    txtTabInfo.setText("JUST STARTING");
    Typeface font = Typeface.createFromAsset(getAssets(), "danielbd.ttf");
    txtTabInfo.setTypeface(font);
    txtTabInfo.setGravity(Gravity.CENTER);
    txtTabInfo.setHeight(50);
    txtTabInfo.setBackgroundColor(Color.parseColor("#CCDE8A"));
    txtTabInfo.setTextColor(Color.parseColor("#262405"));
    spec_beg.setIndicator(txtTabInfo);

    TabSpec spec_int = tabhost.newTabSpec("Intermediate");
    spec_int.setContent(R.id.Intermediate);
    txtTabInfo = new TextView(this);
    txtTabInfo.setText("GETTING THERE");
    txtTabInfo.setTypeface(font);
    txtTabInfo.setGravity(Gravity.CENTER);
    txtTabInfo.setHeight(50);
    txtTabInfo.setBackgroundColor(Color.parseColor("#CCDE8A"));
    txtTabInfo.setTextColor(Color.parseColor("#262405"));
    spec_int.setIndicator(txtTabInfo);

    TabSpec spec_adv = tabhost.newTabSpec("Advanced");
    spec_adv.setContent(R.id.Advanced);
    txtTabInfo = new TextView(this);
    txtTabInfo.setText("REALLY GOOD");
    txtTabInfo.setTypeface(font);
    txtTabInfo.setGravity(Gravity.CENTER);
    txtTabInfo.setHeight(50);
    txtTabInfo.setBackgroundColor(Color.parseColor("#CCDE8A"));
    txtTabInfo.setTextColor(Color.parseColor("#262405"));
    spec_adv.setIndicator(txtTabInfo);

    // get data from database, create buttons and name them
    SQLData myTable = new SQLData(this);
    myTable.open();
    Cursor c = myTable.getallData();

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iLevel = c.getColumnIndex(KEY_LEVEL);

    // create the buttons
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        final String RowNum = c.getString(iRow);
        String Name = c.getString(iName);
        final String Level = c.getString(iLevel);
        Button button = new Button(this);
        button.setText(Name);
        button.setHeight(20);
        button.setTextColor(Color.BLACK);
        button.setBackgroundColor(Color.parseColor("#A89E0A"));
        button.setHighlightColor(Color.WHITE);
        button.setTypeface(font);
        button.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                Intent choice = new Intent(getApplicationContext

(),

                        com.myproject.project.myclass.class);
                Bundle dataBundle = new Bundle();
                dataBundle.putString("RowID", RowNum);
                dataBundle.putString("Level", Level);
                choice.putExtras(dataBundle);
                try {
                    startActivity(choice);
                } catch (Exception e) {
                    Dialog d = new Dialog(getApplicationContext());
                    d.setTitle("TabsTestActivity line 131");
                    TextView tv = new TextView(getApplicationContext());
                    tv.setText(e.toString());
                    d.setContentView(tv);
                    d.show();
                } finally {

                }
            }
        });

        LinearLayout lbeg = (LinearLayout) findViewById(R.id.Beginning);
        LinearLayout lint = (LinearLayout) findViewById(R.id.Intermediate);
        LinearLayout ladv = (LinearLayout) findViewById(R.id.Advanced);

        if (Level.equals("Beginning"))
            lbeg.addView(button);
        else if (Level.equals("Intermediate"))
            lint.addView(button);
        else if (Level.equals("Advanced"))
            ladv.addView(button);
    }

    tabhost.addTab(spec_beg);
    tabhost.addTab(spec_int);
    tabhost.addTab(spec_adv);

    myTable.close();

}} 
```

有谁知道为什么？选项卡及其内容在模拟器和我的 Android 手机上显示良好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:22:06.767

从那以后我了解到 Kindle Fire 不支持 Tabs

# javascript - 需要帮助验证特定长度和内容的文本框

> ID：12039523
> 
> 赞同：1
> 
> 时间：2012-08-20T14:27:07.830
> 
> 标签：javascript, validation

我的 .asp 网页上有以下验证代码。我还需要验证，`txtndc` `textbox`以便输入的数据看起来像这样。 **00000-0000** 目前他们可以在此文本框中输入任何信息。该条目应始终为 5 个数字和 4 个数字。任何帮助将不胜感激。

```
function form_onsubmit() {
    if (form1.txtdrug.value == "")
    {
        alert("Drug Name Needed");
        return false; 
    }

    if (form1.txtndc.value == "")
    {
        alert("NDC Number Needed");
        return false; 
    }

    if (form1.txtndc.value != "" && form1.txtdrug.value != "")
    {
        alert("Drug was Successfully entered into the database, hit enter to continue.");
        return true; 
    }
} 
```

语法将如何编写。我要检查的文本框是

```
<input type="text" name="txtndc" size="35">. 
```

我不知道如何在下面的页面中输入您的代码。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:29:22.647

使用 Javascript 正则表达式#test 函数。

```
x = /^[0-9]{5}-[0-9]{4}$/;     
console.log(x.test("12113-1234"));

>>> x = /^[0-9]{5}-[0-9]{4}$/;    console.log(x.test("00000-0004")); 
true 
```

演示：http: [//jsbin.com/akiiv/1/edit](http://jsbin.com/axikiv/1/edit)

# c# - 日期时间格式文化转换器

> ID：12039524
> 
> 赞同：1
> 
> 时间：2012-08-20T14:27:07.910
> 
> 标签：c#, .net, silverlight, xaml

我尝试将**DateTimeFormatCultureConverter**实施到`DataGridTextColumn`.

它可以工作，我可以调试它，但**它根本不会改变 DateTime 格式。**所以我看不到任何明显的变化......

（我总是可以使用`return formated; // DateTime.Parse(formated);` 但在这种情况下按 ASC/DESC 对字段进行排序不起作用。）

任何线索为什么？

谢谢！

**代码**

```
public class DateTimeFormatCultureConverter: IValueConverter
{

public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
     {
           DateTime originalValue = (DateTime)value;

           CultureInfo currentUICulture = Thread.CurrentThread.CurrentUICulture;

           if (currentUICulture.EnglishName.Contains("Spanish") || currentUICulture.EnglishName.Contains("Portuguese"))
           {
                string formated = string.Format("{0}/{1}/{2}", originalValue.Day, originalValue.Month, originalValue.Year);
                return DateTime.Parse(formated);
           }
           else
           {
                string formated = string.Format("{0}/{1}/{2}", originalValue.Month, originalValue.Day, originalValue.Year);
                return DateTime.Parse(formated);                  
            }
   }

   public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
   {
       throw new NotImplementedException();
   }
} 
```

**数据网格**

```
<sdk:DataGridTextColumn x:Name="txcInstalled" 
CanUserReorder="True" 
CanUserResize="True" 
CanUserSort="True" 
Width="Auto" 
Binding="{Binding Installed, Converter={StaticResource DateTimeFormatCultureConverter}}"
IsReadOnly="True" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:48:20.940

您正在返回一个`DateTime`变量，而不是格式化的字符串。删除`return DateTime.Parse(formated);`, 而`return formated;`. 那应该对你有用。

**编辑**不使用值转换器，您可以改用`StringFormat`Binding 属性。请参阅[http://blogs.msdn.com/b/mikehillberg/archive/2008/05/29/trying-out-binding-stringformat.aspx](http://blogs.msdn.com/b/mikehillberg/archive/2008/05/29/trying-out-binding-stringformat.aspx)

以下应该为您提供一个特定于文化的字符串，我认为这就是您正在寻找的内容：

```
<sdk:DataGridTextColumn x:Name="txcInstalled" 
CanUserReorder="True" 
CanUserResize="True" 
CanUserSort="True" 
Width="Auto" 
Binding="{Binding Installed, StringFormat={}{0:d}}"
IsReadOnly="True" /> 
```

# php - 如何在选择 onChange 事件上重定向到其他方式？

> ID：12039528
> 
> 赞同：0
> 
> 时间：2012-08-20T14:27:23.247
> 
> 标签：php, javascript

我正在尝试制作一个产品浏览器选择界面，当我在 中单击 productType 的选择时`column1`，`column2`将通过在数据库中获取信息（`SELECT productName from products WHERE productTYPE = 1`）显示具有所选 productType 的产品。

我已经用 ajax 完成了，但事实证明这个任务中不允许使用 ajax（真的很伤心！）

如果没有 ajax，我无法想出解决方案。那么，只有在我在 column1 中选择 productType（选择元素上的 onChange 事件）之后，有什么方法可以使用参数发出 post/get 请求并重定向到 self 页面（使用 self-post 技术）

![在此处输入图像描述](../Images/9b953f89b7ac9d783ce3ef54d49234a7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:32:05.663

如果您在加载页面时仅在一次选择中输出所有产品并默认隐藏所有选项，那么您可以在从 column1 中选择产品线时取消隐藏正确的选项。

第二个选项是在加载时在页面上放置多个选择，每个产品线一个，然后默认隐藏所有这些选择，并在选择适当的 column1 时显示/隐藏它们。

# objective-c - 将 NSImage 转换为二进制图像（1 位）

> ID：12039530
> 
> 赞同：1
> 
> 时间：2012-08-20T14:27:29.343
> 
> 标签：objective-c, cocoa, nsimage

我怎样才能“二值化”一个 NSImage （或者一个 NSBitmapImageRep，如果这是一个更好的方法）？

我理解对图像进行阈值处理以将其转换为 1 位图像的概念。不过，我不知道这是否已经是对 NSImage 执行此操作的方法/函数，或者我是否必须手动迭代像素并处理每个像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:31:11.297

有为此设计的核心图像过滤器；查看[这个问题](https://stackoverflow.com/questions/3126340/ci-filter-to-create-black-white-image)的答案。

# database - SQLite：从另一个表更新多个列

> ID：12039534
> 
> 赞同：1
> 
> 时间：2012-08-20T14:27:42.080
> 
> 标签：database, sqlite

我有一个新数据集，已导入到数据库中的新表中。我需要将旧表中的几个字段复制到新表中。新表中可能有新记录或删除记录，所以我只想在名称匹配时更新。

这是我到目前为止所拥有的。这会运行，但只更新第一条记录：

```
update or ignore NEWDATA 
set CATEGORY=(select CATEGORY from OLDDATA), 
    KEY=(select KEY from OLDDATA) 
where Material=(select Material from OLDDATA); 
```

我已经尝试过使用和不使用忽略语句。

任何帮助或建议将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:45:15.033

您需要的是加入更新语句的能力 - 不幸的是，这在 sqlite 中不可用。 [在 SQLite 上连接表时如何进行更新？](https://stackoverflow.com/questions/773441/how-do-i-make-an-update-while-joining-tables-on-sqlite)

起初，我认为您无能为力，但后来我使用了我想出的替换语句，这*可能*对您有用，具体取决于您的数据库架构：

```
replace into newdata
(material, category, key, extra_col1, extra_col2)
select o.material, o.category, o.key, n.extra_col1, n.extra_col2
from olddata o
inner join newdata n on o.material = n.material 
```

这种方法有几个问题。虽然内部连接使它只替换现有数据（有点像更新），但替换与更新仍然有点不同。在我的测试表中，我必须在材料列上放置主键或唯一键。此外，如果您使用引用此数据的外键，如果您有级联等，您可能会遇到问题。由于我看不到您的架构，我不确定这些是否会给您带来问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T17:27:11.480

您可以使用`update On duplicate`或`update on duplicate key`声明。这是手册：[http ://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

# pjax - 完整的 ajax/pjax 站点

> ID：12039546
> 
> 赞同：0
> 
> 时间：2012-08-20T14:28:15.727
> 
> 标签：pjax

我计划使用 pjax 制作一个完整的动态站点，带有静态菜单（只有内容将使用 pjax 更新）。这有多糟糕？我计划将其植入的网站上有很多数据，大多数图像。

我已经在我的本地机器上测试了我的解决方案，它似乎可以工作，但在生产中它可能会很慢或者你们怎么看？这是不好的做法吗？

现在在 pjax 启动时，我将容器滑到左侧，然后从右侧滑入新内容。当我在 Safari 和 FireFox 中执行此操作时，我注意到性能有所下降。我应该跳过我的解决方案而只定期更新页面吗？我想做类似 Twitter 的 iPhone 应用程序，但在网络上。

我想这样做的原因是我有一个全尺寸的谷歌地图，上面有很多需要一些时间才能加载的图钉。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T21:42:05.797

我找到了将包含在 Rails 4.0 中的Tubrolinks ( [http://www.github.com/rails/turbolinks )，它很棒，我认为这是我的问题的一个很好的答案。](http://www.github.com/rails/turbolinks)

# html - 为什么 Firefox 中的字体不适用（但它在控制台中）？

> ID：12039549
> 
> 赞同：0
> 
> 时间：2012-08-20T14:28:23.667
> 
> 标签：html, css, firefox

我有这种奇怪的情况：浏览器说，那个元素使用 Helvetica Neue，但它看起来并不像它应该的那样。

这是来自 Chrome 的文本：

![](../Images/ceed77ece25f807f7c514fcf9aef26c4.png)

以及它在 Firefox 中的外观：

![](../Images/5d033e0fdb787ccf74302b516cf25bc4.png)

****但在控制台中它告诉我它正在使用 Helvetica：****

**![](../Images/9434255baacc727b16cb1a742b8fa3e9.png)**

**HTML：**

 **```
 <div class="span5 overview_text">
   <ul>
  <li> &mdash;  Offseting the environmental damange caused by printing.</li>
  <li> &mdash;  An additional independent ravenue source.</li>
  <li> &mdash;  Maximum explosure. Highest Click-through-rates.</li>
  <li> &mdash;  Simple & Quick HTML code embedding.</li>
  </ul>
 </div> 
```

CSS：

```
 .overview_text{
line-height: 1.5;
font-family: "Helvetica Neue", Helvetica; 
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:38:02.747

您能否使用 Firefox 中的高级字体设置检查您没有覆盖 CSS 字体选项（参见图片）。特别要确保“允许页面选择自己的字体，而不是我上面的选择”框被选中。

![Firefox 高级字体选项](../Images/ba8c85cbf4f3b7725170b23f92a46ef3.png)**

# android - 触摸外面的对话活动 - 应该按什么顺序调用方法？

> ID：12039550
> 
> 赞同：1
> 
> 时间：2012-08-20T14:28:23.743
> 
> 标签：android, android-lifecycle

我有一个活动（可以说是活动 A），我从中开始另一个活动（活动 B），`android:theme="android:Theme.Dialog"`这不会占据整个屏幕。在第二个活动中，当我在此对话活动之外触摸时，我完成了活动。

我观察到，当首先触摸活动 B 的外部时，称为`onResume()`活动 A 的`onStop()`方法，然后是活动 B的方法。

也许是一个愚蠢的问题，但这正常吗？我预计会完全相反：首先被称为`onStop()`活动 B 的`onResume()`方法，然后是活动 A的方法。

# c# - 如何以编程方式打印各种文件类型

> ID：12039551
> 
> 赞同：4
> 
> 时间：2012-08-20T14:28:28.827
> 
> 标签：c#, pdf, printing

我正在编写一个执行一些测试并生成许多不同报告的应用程序。这些可以是标签的任意组合、最终客户的 PDF、维修部门的 PDF、XML 文件等。

根据报告类型，我需要将文件发送到文件系统或许多不同打印机（A4、标签等）之一。理想情况下，不应该有弹出窗口——直接出现在纸上。

如何将文件（PDF、XML）发送到打印机？我曾认为对于 XML/Text 我可以将 File.Copy 复制到 LPTn 但这似乎不起作用。对于 PDF，我猜我可以使用一些导致 PDF 打印的参数调用 Acrobat。

我使用的打印机映射到 LPTn。有没有更好的方法来做到这一点并将定义存储在应用程序中？即标签转到 MyLabelPrinter，A4 PDF 转到 MyA4Printer。

有人做过吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T14:34:37.147

```
ProcessStartInfo info = new ProcessStartInfo("[path to your file]");
info.Verb = "PrintTo";
info.Arguments = "\"[printer name]\"";
info.CreateNoWindow = true;
info.WindowStyle = ProcessWindowStyle.Hidden;
Process.Start(info); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:36:10.607

看看这个[网页](https://stackoverflow.com/questions/273675/print-existing-pdf-or-other-files-in-c-sharp)。您应该找到您正在查看的 PDF 信息。例如，它看起来像这样：

```
 ProcessStartInfo infoOnProcess = new ProcessStartInfo("C:/example.pdf");
    info.Verb = "PrintTo";
    //Put a if there, if you want to change printer depending to file extension
    info.Arguments = "\"HP-example-Printer\"";
    info.CreateNoWindow = true;
    info.WindowStyle = ProcessWindowStyle.Hidden;
    Process.Start(infoOnProcess); 
```

# objective-c - @interface 之前的预期标识符或 '('

> ID：12039553
> 
> 赞同：4
> 
> 时间：2012-08-20T14:28:31.590
> 
> 标签：objective-c, macos

第一篇文章，我真的希望这不是一个重复或已解决的问题。我尝试在这里和谷歌搜索，虽然我发现了类似`Expected identifier or '('`的错误，但没有一个解决方案适合我。

基本上我正在尝试学习设计模式，并且因为我曾经了解一点java，所以我试图将它作为学习objective-c的机会，所以我有一个可以工作的java程序和一个我得到错误的xCode项目`Expected identifier or '('`在我的头文件中`@interface`

这是我的java解决方案（我知道很简单）：

```
public class Duck {

public void quack(){
        System.out.print("Quack!");

    }
    public void swim(){
        System.out.print("swimming duck!");
    }
public void display(){
    quack();
    swim();
        }

    }
public class mainClass {
    public static void main(String[] args){
        Duck duck = new Duck();
        duck.display();
    }
} 
```

这是我的objective-c版本。

```
//duck.h
#include <CoreFoundation/CoreFoundation.h>

@interface Duck : NSObject{ //Expected identifier or '('

}
@end

//  Duck.m
#include "Duck.h" 
@implementation Duck
-(void)quack{
    printf("Quack!");
}
-(void)swim{
    printf("swimming duck!");
}

-(void)display{
    [self quack];
    [self swim];    
}
@end

//  main.c
#include <CoreFoundation/CoreFoundation.h>
#include "Duck.m"

int main(int argc, const char * argv[])
{
    Duck *duck = [[Duck alloc] init];
    [duck display];
    return 0;
} 
```

如果有人可以提供帮助，我将不胜感激，如果这是重复的帖子，再次抱歉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:33:23.637

编译器不知道是什么`NSObject`。如果您查看[参考资料](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)，您会发现它是 Foundation 框架的一部分，而不是 CoreFoundation，所以：

```
#import <Foundation/Foundation.h> 
```

代替：

```
#import <CoreFoundation/CoreFoundation.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:52:27.200

```
//duck.h
//#include <CoreFoundation/CoreFoundation.h>
#import <Foundation/Foundation.h> // or Cocoa/Cocoa.h

@interface Duck : NSObject//{ //Expected identifier or '('

//} not necessary if there are no instance fields
- (void)quack;
- (void)swim;
- (void)display;
@end

//  Duck.m
//#include "Duck.h"
#import "Duck.h" 
@implementation Duck
-(void)quack{
    printf("Quack!");
}
-(void)swim{
    printf("swimming duck!");
}

-(void)display{
    [self quack];
    [self swim];    
}
@end

//  main.c SHOULD BE ~main.m~ if using ObjC!!!
//#include <CoreFoundation/CoreFoundation.h>
//#include "Duck.m"
#import "Duck.h" 
```

此外，养成使用 NSString 字面量的习惯；@"example" 表示如果/并且当您决定进入 Cocoa 时。祝你学业顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:34:57.103

可能是您的空界面上不需要大括号：

```
@interface Duck : NSObject
@end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T14:34:20.047

尝试使用导入而不是包含。此外，请确保 CoreFoundation 框架实际上是您项目的一部分。

# qt - 保持对 listwidget (qt) 的图标项的严格对齐？

> ID：12039554
> 
> 赞同：1
> 
> 时间：2012-08-20T14:28:36.727
> 
> 标签：qt, icons, qlistwidget

我有一个列表小部件，用户可以在其中添加图标文件。我在我的列表小部件中将这些文件显示为图标项（我的列表小部件的视图模式是 IconMode）。每个项目都有其基本名称作为文本（例如，如果图像的路径是/home/alex/Pictures/mypic.jpg，那么相应项目的文本将是mypic.jpg）。

我想在每一行严格显示特定数量的项目。当存在基本名称短的图像和其他非常长的图像时，就会出现问题。然后，列表小部件，因为我已经设置

```
ui->listWidget->setUniformItemSizes(true); 
```

选择每行添加一项，只是因为特定项的基本名称很长。我想要做的是裁剪每个基本名称（列表小部件已经对特定项目执行此操作，但对文本很长的项目没有执行此操作）如果它太长并且每行有严格数量的项目。

我的每件物品都有

```
item->setTextAlignment(Qt::AlignCenter); 
```

以下是一些说明问题的图片：

我希望它是怎样的，以及当基本名称很短并且彼此之间没有太大差异时它是怎样的：

![](../Images/50587f2b472e87a56411dba9732590e1.png)

问题是，当我有长和短的基本名称时：

![](../Images/4f226b86e2b67d2169b7c0fd212ca090.png)

我也希望缩短长的基本名称。我真的不明白为什么 listwidget 不会裁剪长的基本名称，而它会裁剪一些更短的基本名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:25:52.963

`QListWidgetItem setSizeHint()`为了胜利 ：）

# java - JavaFX2 客户端和服务器

> ID：12039565
> 
> 赞同：0
> 
> 时间：2012-08-20T14:29:10.327
> 
> 标签：java, client-server

我打算写一份医院的申请。我打算使用 Javafx 来构建用户界面。在选择编写服务器和客户端通信的方式时，我需要帮助。我希望客户端（知道服务器的地址）调用服务器功能，就像它在独立应用程序中调用一样。我如何实现这一目标？注意：我不想编写基于 Web 的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:31:53.697

Web 服务（SOAP、REST）或 RMI 调用都适合您。

# perl - 将 sys/ioctl.ph 添加到 Perl 头文件

> ID：12039566
> 
> 赞同：5
> 
> 时间：2012-08-20T14:29:15.503
> 
> 标签：perl, ioctl

我需要使用 sys/ioctl.ph，它不包含在我的 slackware 发行版附带的 perl 版本 (5.12.3) 中。

我做了以下事情：

```
cd /usr/include
h2ph sys/ioctl.ph
cd /usr/lib64/perl5/site_perl/5.12.3/x86_64-linux-thread-multi/
mkdir sys
mv ioctl.ph sys 
```

现在 perl 解释器不会抱怨 sys/ioctl.ph，但这是我得到的错误：

`Illegal declaration of subroutine Functions::ServerSocket::__INT16_C at /usr/lib64/perl5/site_perl/5.12.3/x86_64-linux-thread-multi/_h2ph_pre.ph line 164.`

这是文件中导致第 164 行错误的内容：

`unless (defined &__INT16_C(c)) { sub __INT16_C(c)() { &c } }`

我不知道从哪里开始。Functions::ServerSocket 是我的模块之一，但我的文件中没有类似的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:08:18.663

您平台上的`__INT16_C`宏可能很简单，*例如*，

```
#define __INT16_C(c) c 
```

将第 164 行的代码替换为

```
eval 'sub __INT16_C {
    my($c) = @_;
    eval q($c);
}' unless defined (&__INT16_C); 
```

这是其他版本的`h2ph`生成。

# mysql - EXPLAIN SELECT 显示 MySQL 没有使用我的索引

> ID：12039569
> 
> 赞同：2
> 
> 时间：2012-08-20T14:29:19.653
> 
> 标签：mysql, indexing, database-indexes

表定义，注意`UNIQUE`索引：

```
CREATE TABLE meta
(
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  type SET('tag', 'keyword') NOT NULL,
  name VARCHAR(255) NOT NULL,
  user_id INT UNSIGNED NOT NULL,
  UNIQUE (name, type, user_id),
  FOREIGN KEY (user_id) REFERENCES user (id) ON DELETE CASCADE
); 
```

因此，MySQL 应该在搜索中使用索引，例如`WHERE name = 'tag' and type = 'cat'`以及 only (leftmost prefixing) `WHERE type = 'tag'`。

我做了：

```
EXPLAIN SELECT * FROM meta WHERE type = 'tag' 
```

结果是（第五列是`possible_keys`）：

```
'1', 'SIMPLE', 'meta', 'ALL', NULL, NULL, NULL, NULL, '1', 'Using where' 
```

我确定我错过了一些东西，但找不到什么。有什么线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:28:15.450

这种类型的解释可能已经存在很多次了......但是为了解释为什么数据库引擎通常不会在所描述的情况下使用索引（当 WHERE 子句在多列索引中只有第二个字段时），一个简单的类比可能会有所帮助。

您可以将物理电话簿（用纸制成的老式电话簿之一）视为一种索引。索引键是姓名，数据是电话号码。电话簿索引基本上是“ `Lastname, Firstname`”的形式。如果您在电话簿中查找姓名（例如，Mark Wilkins），您正在寻找键“Wilkins,Mark”。您还可以通过姓氏轻松查找姓名，并查找给定姓氏的所有条目。

`Firstname`然而，在电话簿中搜索“索引”并不是那么容易。如果要查找电话簿中的所有条目，则`Firstname=Mark`必须扫描整个电话簿。使用标准索引（例如，类似 b 树的东西），数据库引擎也有完全相同的问题。如果 WHERE 子句仅包含双列索引的第二列，则必须扫描整个索引以查找匹配项。一些数据库引擎可能仍然这样做，但是仅仅扫描表本身可能会更快，因为它通常必须为结果集读取表中的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:39:09.397

这个话题已经被[另一个问题](https://stackoverflow.com/questions/1252279/mysql-indices-and-order)所涵盖。

如果您希望您的`SELECT`语句使用您定义的唯一索引，`type`则必须是您的索引的第一个字段 ( `UNIQUE(type, name, user_id)`)。

查看[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html)和[多列索引](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)

# php - 在 Ubuntu 12.04 上安装 PHP 邮件

> ID：12039571
> 
> 赞同：1
> 
> 时间：2012-08-20T14:29:24.170
> 
> 标签：php, email, ubuntu, postfix-mta

我已经在我的本地机器上安装了 LAMP，现在我正在寻找添加 PHP 邮件，但是我运气不佳。

我已经安装了 postfix，我的 /etc/postfix/main.cf 如下所示：

```
myhostname = my_computer_name (is this ok?)
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = my_domain_name, my_computer_name, localhost.localdomain, localhost
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all 
```

有人可以告诉我我错过了什么吗？myhostname 应该是我的计算机名称还是其他名称？与我的目的地相同。它需要中继主机吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:45:37.717

做一个 php 信息以查看安装的内容

[http://php.net/manual/en/function.phpinfo.php](http://php.net/manual/en/function.phpinfo.php)

遵循像这样的真正回归基础示例（确定它是基于代码还是基于配置）

```
<?php
$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com" . "\r\n" .
"CC: somebodyelse@example.com";

mail($to,$subject,$txt,$headers);
?> 
```

根据我的经验，它通常是开箱即用的，您可能需要在此处调查此链接之类的其他内容：

[http://email.about.com/od/emailprogrammingtips/qt/Configure_PHP_to_Use_a_Local_Mail_Server_for_Sending_Mail.htm](http://email.about.com/od/emailprogrammingtips/qt/Configure_PHP_to_Use_a_Local_Mail_Server_for_Sending_Mail.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:53:23.187

php mail use your system MTA (Mail Transfer Agent), it is Postfix in your case. So you have to configure correctly postfix first. It is not easy to configure because when your server send an email, the recipient mail server can block it (antispam filter) for many reason and one for the reason is your hostname not matching your server ip.

# php - PHP 向 STDERR 写入大量文本

> ID：12039583
> 
> 赞同：13
> 
> 时间：2012-08-20T14:30:07.813
> 
> 标签：php, echo, stdout, stderr

在 PHP 中写入大块时`STDOUT`，您可以这样做：

```
echo <<<END_OF_STUFF
lots and lots of text
over multiple lines
etc.etc
END_OF_STUFF; 
```

（即*heredoc*）

我需要做类似的事情，但要`STDERR`. 是否有另一个类似`echo`但使用的命令`STDERR`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T14:33:37.803

对于一个简单的解决方案 - 试试这个

```
file_put_contents('php://stderr', 'This text goes to STDERR',FILE_APPEND); 
```

该`FILE_APPEND`参数将附加数据而不是覆盖它。`fopen`您还可以使用and`fwrite`函数直接写入错误流。

更多信息可以在 - [http://php.net/manual/en/features.commandline.io-streams.php找到](http://php.net/manual/en/features.commandline.io-streams.php)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-20T14:34:17.707

是的，使用 php:// 流包装器：[​​http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)

```
$stuff = <<<END_OF_STUFF
lots and lots of text
over multiple lines
etc.etc
END_OF_STUFF;

$fh = fopen('php://stderr','a'); //both (a)ppending, and (w)riting will work
fwrite($fh,$stuff);
fclose($fh); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-05T05:40:47.387

在[CLI SAPI](http://php.net/manual/en/features.commandline.php)中，它可以像将 Heredoc 字符串作为参数传递给`fwrite()`STDERR 常量一样简单。

```
fwrite(STDERR, <<< EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD
); 
```

# jquery - 从 GridView 服务器端排序更改为客户端

> ID：12039584
> 
> 赞同：1
> 
> 时间：2012-08-20T14:30:14.787
> 
> 标签：jquery, asp.net, gridview, tablesorter, gridview-sorting

我目前在我的网站上有许多 GridView 表，但目前所有排序都是在服务端完成的，由于页面刷新，这并不是很好。我查看了 [tablesorter][1] (jQuery) 模块，它看起来很容易使用，但我无法让它工作。我已经检查了几乎所有链接，但我不得不承认，我的知识水平非常基础。（由其他人创建的代码）。希望使用一个真实的例子可以帮助其他人了解如何实现客户端排序。以下是我正在使用的文件，因为它们没有 tablesorter 实现。.ascx 文件是：

```
 <%@ Control Language="C#" Inherits="List_PendingBids_Module" CodeFile="List_PendingBids.ascx.cs" %>
<!-- «Start| List: Pending bids» -->
<div class='pending-bids'>
  <h2>
    <span class="rightside">
      <%# App.Context.Team.GetAvailableCreditText() %>
    </span>
    My Pending Bids
  </h2>
  <div class="list">
    <asp:GridView runat="server" id="gridList" UseAccessibleHeader="true" AutoGenerateColumns="false" EnableViewState="false" GridLines="None"
    OnDataBinding="gridList_DataBinding" OnPageIndexChanging="List_PageIndexChanging" CssClass='grid' HeaderStyle-CssClass="header-row"
    OnRowCommand="gridList_RowCommand" AllowSorting="true" OnSorting="List_Sorting" AllowPaging="true" PageSize="15">
      <SelectedRowStyle CssClass="selected" />
      <AlternatingRowStyle CssClass="alt" />
      <FooterStyle CssClass="footer" />
      <EmptyDataRowStyle CssClass="empty-template" />
      <Columns>
        <asp:TemplateField  HeaderText="Name" HeaderStyle-CssClass="left-text" ItemStyle-CssClass="left-text" FooterStyle-CssClass="left-text" SortExpression="Name">
          <ItemTemplate>
            <asp:HyperLink runat="server" ID="btnItem_Player_Get_x_X_Name" Text='<%#Item.Player.Get(x => x.Name)%>' onclick='<%#"OpenModal(\"" + PageUrl("Player view > Details") + "?id=" + Item.Player.ID + "\");"%>' NavigateUrl="javascript:" />
          </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField  HeaderText="POS" SortExpression="Position.Abbreviation">
            <ItemTemplate>
              <asp:Literal ID="ltrPositionAbbreviation" runat="server" Text='<%#Server.HtmlEncode(Item.Player.Position.Abbreviation.ToStringOrEmpty())%>' />
            </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField  HeaderText="Team" SortExpression="Club.NameAbbreviation">
            <ItemTemplate>
              <asp:Literal ID="ltrClubNameAbbreviation" runat="server" Text='<%#Server.HtmlEncode(Item.Player.Club.NameAbbreviation.ToStringOrEmpty())%>' />
            </ItemTemplate>
          </asp:TemplateField>
        <asp:TemplateField  HeaderText="Points" SortExpression="Player.SeasonScore">
          <ItemTemplate>
            <asp:Literal ID="ltrPlayerSeasonScore" runat="server" Text='<%#Item.Player.SeasonScore%>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField  HeaderText="Best Offer" HeaderStyle-CssClass="no-wrap" ItemStyle-CssClass="no-wrap" FooterStyle-CssClass="no-wrap" SortExpression="LowestSalePrice">
            <ItemTemplate>
              <span class="inline mid-width">
                §<%# LowestPricePlayerContractItem.Get(s=>s.SalePrice.ToString("n")) %>
              </span>
              <asp:LinkButton runat="server" ID="btnBuyNow" Visible='<%#LowestPricePlayerContractItem != null && App.Context.Team.CanSignPlayerInPosition(Item.Player.Position)%>' ToolTip="Buy Now" OnClientClick='<%#"if (confirm(\"Are you sure you want to buy this player? (If you have a bid pending for this player, remember to remove it - Transfer centre > Pending bids)\") == false) return false;" + SetPostBackCommandItem(Item)%>' CommandName="BuyNow" CommandArgument='<%#Item.Player.ID%>'>
                <asp:Image ID="Image1" runat="server" ImageUrl="/Images/RightGreenArrow.png"/>
              </asp:LinkButton>
            </ItemTemplate>
          </asp:TemplateField>

        <asp:TemplateField  HeaderText="Exceeds your budget">
          <ItemTemplate>
            <asp:Image runat="server" ID="btnExceedsYourBudget" Visible='<%#!Item.BuyerHasMoney%>' ImageUrl="/Images/Icons/coins.png" AlternateText="Exceeds your budget" />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField  HeaderText="Best Bid" SortExpression="Player.HighestBid">
          <ItemTemplate>
            <asp:Literal ID="ltrPlayerHighestBid" runat="server" Text='<%#"§{0:n2}".FormatWith(Item.Player.HighestBid.Get(h=>h.Price.ToString("n")))%>' />
          </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField  HeaderText="My bid" SortExpression="Price">
          <ItemTemplate>
            <asp:Literal ID="ltrPrice" runat="server" Text='<%#"§{0:n2}".FormatWith(Item.Price)%>' />
          </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField  HeaderText="Bid">
          <ItemTemplate>
            <asp:HyperLink runat="server" ID="btnReviseBid" ToolTip="Revise bid" onclick='<%#"OpenModal(\"" + PageUrl("Home > Transfers > My pending bids > Revise bid") + "?id=" + Item.ID + "\");"%>' NavigateUrl="javascript:">
              <asp:Image runat="server" ImageUrl="/Images/RightGreyArrow.png"/>
            </asp:HyperLink>
          </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField  HeaderText="Cancel Bid">
          <ItemTemplate>
            <asp:HoverButton runat="server" ID="btnCancelBid" ImageUrl="/Images/RedCard.png" AlternateText="Cancel bid" OnClientClick='<%#"if (confirm(\"Are you sure you want to cancel this bid?\") == false) return false;" + SetPostBackCommandItem(Item)%>' CommandName="CancelBid" CommandArgument='<%#Item.ID%>' />
          </ItemTemplate>
        </asp:TemplateField>
      </Columns>
      <PagerSettings Mode="NumericFirstLast" Position="Bottom"/>
      <PagerStyle CssClass="pager" />
      <EmptyDataTemplate>
        There is no bid to display.
      </EmptyDataTemplate>
    </asp:GridView>
  </div>
</div>
<!-- «End| List: Pending bids» --> 
```

后面的.cs文件是：

```
 using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Transactions;
using App;
using Application.DataModel;
using Application.Model;

/// <summary>
/// Code behind of the module: List: Pending bids.
/// </summary>
public partial class List_PendingBids_Module : Application.UI.ListContainer<Bid>
{
    /// <summary>
    /// Gets the LowestPricePlayerContractItem property of this module.
    /// </summary>
    public PlayerContract LowestPricePlayerContractItem
    {
        get
        {
            return Item.Player.GetLowestPricePlayerContractFor(App.Context.Team);
        }
    }

    /// <summary>
    /// Raises the Init event of this control. It also sets up this module&#39;s state.
    /// </summary>
    /// <param name="e">The EventArgs instance containing the event data.</param>
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (!IsPostBack || SortExpression.IsEmpty())
        {
            ResetSortExpression("Date DESC");
        }
        // UpdatePagerMode
        gridList.UpdatePagerMode();
    }

    /// <summary>
    /// Raises the Load event of this module. It also loads the state of this module.
    /// </summary>
    /// <param name="e">The EventArgs instance containing the event data.</param>
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        PopulateList();
    }

    /// <summary>
    /// Gets a list of {0} used as the base data source for this list module.
    /// All sorting, filters, etc should be applied on this base source.
    /// </summary>
    /// <returns>A list of Bids that will be rendered on this module.</returns>
    protected override IEnumerable<Bid> GetBaseDataSource()
    {
        IEnumerable<Bid> result = App.Context.Team.Bids;
        result = result.Where(each => !each.Sold);

        return result;
    }

    /// <summary>
    /// Sorts the Bids in the data source of this module based on the current &#39;Sort Expression&#39; requested by the user.
    /// </summary>
    protected override void SortDataSource()
    {
        if (SortExpression.HasValue())
        {
            if (SortExpression == "Name")
            {
                _DataSource = _DataSource.OrderBy(item => item.Player.Get(x => x.Name));
            }
            else if (SortExpression == "Name DESC")
            {
                _DataSource = _DataSource.OrderByDescending(item => item.Player.Get(x => x.Name));
            }

            else if (SortExpression == "Player.SeasonScore")
            {
                _DataSource = _DataSource.OrderBy(item => item.Player.SeasonScore);
            }
            else if (SortExpression == "Player.SeasonScore DESC")
            {
                _DataSource = _DataSource.OrderByDescending(item => item.Player.SeasonScore);
            }

            else if (SortExpression == "Player.HighestBid")
            {
                _DataSource = _DataSource.OrderBy(item => item.Player.HighestBid);
            }
            else if (SortExpression == "Player.HighestBid DESC")
            {
                _DataSource = _DataSource.OrderByDescending(item => item.Player.HighestBid);
            }

            else if (SortExpression == "Date DESC")
            {
                // Order by "Date DESC"
                _DataSource = _DataSource.OrderByDescending(item => item.Date);
            }
            else
            {
                base.SortDataSource();
            }
        }
        else
        {
            // Order by "Date DESC"
            _DataSource = _DataSource.OrderByDescending(item => item.Date);
        }
    }

    /// <summary>
    /// Handles the RowCommand event of the list control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The GridViewCommandEventArgs instance containing the event data.</param>
    protected void gridList_RowCommand(object sender, System.Web.UI.WebControls.GridViewCommandEventArgs e)
    {
        if (e.CommandName == "CancelBid")
        {
            var Item = GetSelectedItem();
            try
            {
                Database.Delete(Item);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
                return;
            }

            Reload();
        }

        if (e.CommandName == "BuyNow")
        {
            var Item = GetSelectedItem();

            double l_price;
            double ln_price;
            try
            {
                l_price = Item.Player.GetLowestPricePlayerContractFor(App.Context.Team).SalePrice.Value;
            }
            catch (Exception ex)
            {
                l_price = -1;
                // MessageBox.Show("No Contracts");
            }
            Item.Player.STLowestSalePrice = l_price;

            try
            {
                Item.Player.GetLowestPricePlayerContractFor(App.Context.Team).Perform(r => App.Context.Team.Buy(r));
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
                return;
            }

            Response.Redirect(Request.RawUrl);
        }
    }

    /// <summary>
    /// Handles the DataBinding event of this list control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The EventArgs instance containing the event data.</param>
    protected void gridList_DataBinding(object sender, EventArgs e)
    {
    }
} 
```

我已将必要的 jQuery / Tablesorter 脚本添加到文档的头部。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:55:15.300

为了使用tablesorter，您必须将数据放入表中。对于 asp.net 网站，您必须在项目模板之前添加“头标签”。Asp 默认不添加这些。标签应该包含一个“tr”，里面有你所有的“th”。然后在要排序的每个表上放置一个类，因为你说你有很多表，所以给每个表一个不同的类。例子：

```
<script>
 $('.table1').tablesorter();
 $('.table2').tablesorter();
 </script> 
```

等等所有的表。现在您的所有表格都应该使用表格排序器插件进行排序。希望这可以帮助。我一直在一个asp网站上处理这个问题。如果您有任何问题，请 pm 我，我会尽力提供帮助。

# java - “列表 单词 = 新的 ArrayList ();" 不编译

> ID：12039588
> 
> 赞同：-2
> 
> 时间：2012-08-20T14:30:22.977
> 
> 标签：java

我已经发布了一个关于如何从文件中读取并从该文件中返回一个随机单词的问题，每个人都一直告诉我使用“List words = new ArrayList();” 我确实尝试过使用它，但它不起作用！

我什么都试过了！我对java很陌生，因为我还是个学生！所以互联网是我最后的选择，教科书没用......

我要做的就是从该文件中返回一个随机字符串，然后将其用作猜测词

![在此处输入图像描述](../Images/709dd7f31d8b0381ab3cbe5141da3409.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import java.util.*;

public final class Hangman extends JFrame implements ActionListener {
    int i = 0;
    static JPanel panel;
    static JPanel panel2;
    static JPanel panel3;
    static JPanel panel4;

    public Hangman() {
        JButton[] buttons = new JButton[26];

        panel = new JPanel(new GridLayout(0, 9));
        panel2 = new JPanel();
        panel3 = new JPanel();
        panel4 = new JPanel();

        JButton btnRestart = new JButton("Restart");
        btnRestart.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {

            }
        });

        JButton btnNewWord = new JButton("Add New Word");
        btnNewWord.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                try {
                    FileWriter fw = new FileWriter("Words.txt", true);
                    PrintWriter pw = new PrintWriter(fw, true);

                    String word = JOptionPane
                            .showInputDialog("Please enter a word: ");

                    pw.println(word);
                    pw.close();
                } catch (IOException ie) {
                    System.out.println("Error Thrown" + ie.getMessage());
                }
            }
        });

        JButton btnHelp = new JButton("Help");
        btnHelp.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word. \nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions. \nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
                        + "\n"
                        + "\nThe game is over when:"
                        + "\nThe guessing player completes the word, or guesses the whole word correctly"
                        + "\nThe other player completes the diagram";
                JOptionPane.showMessageDialog(null, message, "Help",
                        JOptionPane.INFORMATION_MESSAGE);
            }
        });

        JButton btnExit = new JButton("Exit");
        btnExit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        JLabel lblWord = new JLabel();

        ImageIcon icon = new ImageIcon(
                "D:\\Varsity College\\Prog212Assign1_10-013803\\images\\Hangman1.jpg");
        JLabel label = new JLabel();
        label.setIcon(icon);
        String b[] = { "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K",
                "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W",
                "X", "Y", "Z" };
        for (i = 0; i < buttons.length; i++) {
            buttons[i] = new JButton(b[i]);

            panel.add(buttons[i]);
        }

        panel2.add(label);

        panel3.add(btnRestart);
        panel3.add(btnNewWord);
        panel3.add(btnHelp);
        panel3.add(btnExit);

        panel4.add(lblWord);
    }

    public void readWord() {
        try {
            BufferedReader reader = new BufferedReader(new FileReader(
                    "Words.txt"));
            String line = reader.readLine();
            List<String> words = new ArrayList<String>();
            while (line != null) {
                String[] wordsLine = line.split(" ");
                for (String word : wordsLine) {
                    words.add(word);
                }
                line = reader.readLine();
            }
            Random rand = new Random(System.currentTimeMillis());
            String randomWord = words.get(rand.nextInt(words.size()));
        } catch (Exception e) {
        }
    }

    public static void main(String[] args) {
        Hangman frame = new Hangman();
        Box mainPanel = Box.createVerticalBox();
        frame.setContentPane(mainPanel);
        mainPanel.add(panel, BorderLayout.NORTH);
        mainPanel.add(panel2);
        mainPanel.add(panel4);
        mainPanel.add(panel3);
        frame.pack();
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T14:34:14.647

`List`Java中调用了2个类。有[java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)和[java.awt.List](http://docs.oracle.com/javase/6/docs/api/java/awt/List.html)。确保您不会意外混合它们。我看到你正在导入`java.awt.*`，所以 Java 认为你想要 java.awt.List，但你想要`java.util.List`让它编译的版本。最简单的方法是完全限定`List`有问题的陈述中的：

```
java.util.List<String> words = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T14:35:52.703

你的问题在于

```
import java.awt.*; 
```

该`java.awt`包包含一个名为 的类`List`，就像 一样`java.util`，但这*不是*`List`您想要的。您正在尝试导入它们，这会导致干扰。任何一个：

*   `import java.awt.*;`为您使用的特定类删除和添加导入，或者
*   将列表引用限定为`java.util.List<String>`或
*   `ArrayList<String>`直接用就行

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:37:59.093

您应该明确导入 java.util.List

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T14:35:26.230

错误说明了一切：`The type List is ambiguous`

您调用两个不同的类：

```
import java.util.ArrayList; 
```

和

```
import java.awt.List; 
```

那是由`import java.awt.*;`

您必须为两个`List`实例使用相同的类。

例如：

```
import java.util.ArrayList;
import java.util.List; 
```

或避免使用`import java.awt.*;`，而是使用

```
import java.awt.BorderLayout;
import java.awt.GridLayout; 
```

或`ArrayList<String>`直接使用：

```
ArrayList<String> words = new ArrayList<String>(); 
```

# asp.net - 通知用户会话超时 asp.net VB

> ID：12039594
> 
> 赞同：0
> 
> 时间：2012-08-20T14:30:50.063
> 
> 标签：asp.net, vb.net, session, timeout

我想在会话到期后立即通知用户.. 一个警报并重定向到另一个页面。考虑到我没有母版页，最好的方法是什么。尽管大多数页面都继承了设置当前用户属性的 basePage。我可以了解如何使用此页面，这样我就不必在每个页面上进行更改。这也可以在服务器端完成还是我需要使用 jQuery？

请指教

谢谢，卡维塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:44:35.277

您可以使用**[jQuery idleTimer 插件](http://paulirish.com/2009/jquery-idletimer-plugin/)**来检测空闲时间并基于此向用户显示警报并在会话超时时进一步重定向用户。

例如：您可以将会话超时设置为某个值，例如 30 分钟。使用 javascript 代码来检测用户不活动或空闲时间。

[检测空闲时间](http://paulirish.com/2009/jquery-idletimer-plugin/)

如果用户在 20 分钟内处于非活动状态，您可以向他显示弹出窗口或指向用户的链接，说您是否要继续会话。如果用户单击该链接，他的会话将继续，否则他将被重定向到注销页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:12:21.923

我最终使用

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=453](http://www.dotnetcurry.com/ShowArticle.aspx?ID=453)

这不是我想要的，但考虑到项目的架构，这是唯一可行的选择

# java - Executor 和 PriorityBlockingQueue 上的 ASyncTask

> ID：12039596
> 
> 赞同：3
> 
> 时间：2012-08-20T14:31:01.203
> 
> 标签：java, android, multithreading

我正在尝试让一些 ASyncTask 优先同时运行。

我已经创建了一个带有 PriorityBlockingQueue 的 ThreadPoolExecutor，并且适当的比较器适用于标准 Runnables。但是打电话的时候

```
 new Task().executeOnExecutor(threadPool, (Void[]) null); 
```

PriorityBlockingQueue 的 Comparator 接收 ASyncTask 内部的 Runnable（私有）（在源代码中称为 mFuture），因此在比较器中我无法识别可运行对象或读取“优先级”值。

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T22:16:30.087

[从android.os.AsyncTask](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)借用源代码并制作您自己的 com.company.AsyncTask 实现，您可以在自己的代码中控制您想要的一切。

android.os.AsyncTask 带有两个现成的执行器，THREAD_POOL_EXECUTOR 和 SERIAL_EXECUTOR：

```
private static final BlockingQueue<Runnable> sPoolWorkQueue =
        new LinkedBlockingQueue<Runnable>(10);

/**
 * An {@link Executor} that can be used to execute tasks in parallel.
 */
public static final Executor THREAD_POOL_EXECUTOR
        = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,
                TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory);

/**
 * An {@link Executor} that executes tasks one at a time in serial
 * order. This serialization is global to a particular process.
 */
public static final Executor SERIAL_EXECUTOR = new SerialExecutor(); 
```

在您的 com.company.AsyncTask 中，创建另一个 PRIORITY_THREAD_POOL_EXECUTOR 并将您的所有实现包装在此类中（您可以看到所有内部字段），并像这样使用您的 AysncTask：

```
com.company.AsyncTask asyncTask = new com.company.AsyncTask();
asyncTask.setPriority(1);
asyncTask.executeOnExecutor(com.company.AsyncTask.PRIORITY_THREAD_POOL_EXECUTOR, (Void[]) null); 
```

[在这里](https://stackoverflow.com/questions/7211684/asynctask-executeonexecutor-before-api-level-11)查看我的答案，看看我如何创建自己的 AsyncTask 以使 executeOnExecutor() 在 API 级别 11 之前工作。

# vim - 删除所选行前的空格

> ID：12039599
> 
> 赞同：3
> 
> 时间：2012-08-20T14:31:04.790
> 
> 标签：vim

我有这样的文字：

```
This is a normal line. 
       6 spaces are before me.              //line 1 
      4 spaces are before me.               //line 2 
    3 spaces are before me.                 //line 3 
       6 spaces are before me.              //line 4 
     4 spaces are before me.                //line 5 
Another normal line.
   2 spaces are before me. But that is ok.  //line 7 
Line goes on. 
```

如何使用 vim 选择并删除第 1 行到第 5 行之前的所有空格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T14:33:36.257

我会使用视觉线条模式（`Shift`+ `V`）来选择我想要的线条，然后在它们上运行替换命令（点击`:`应该自动在开始时包含视觉标记`'<,'>`）：

`:'<,'>s/^\s*`

这在您工作但还没有弄清楚行号时很有用。在这种情况下，您知道它是第 2 到 6 行，您可以执行以下操作：

`:2,6s/^\s*`

快速找出行号的一个有用选项是`set number`.

`\s*`替换命令贪婪地从每行 ( ) 的开头抓取所有空格 ( )，并将其替换为空`^\s*`( 相当于`/^\s*//`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:33:53.613

另一种快速方法：您也可以使用`<<`命令。转到第 1 行并输入`5<<`以将第 1-5 行向左移动。重复该`.`命令，直到所有空格都消失。这对于通过使用增加缩进也很有用`>>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:39:18.207

如果没有为此文件定义缩进，您可以使用`={motion}`. 如果光标在第一行，则`=G`缩进到文件末尾或`=}`缩进到下一个空行。

为此和以下 4 行使用`=4j`.

# php - 从调整大小创建新图像时删除扩展

> ID：12039604
> 
> 赞同：0
> 
> 时间：2012-08-20T14:31:21.653
> 
> 标签：php

我有这段代码，我之前稍微修改了一下。我的问题是这会为我上传的图像创建一个新的缩略图，但它会添加一个我不需要的 .PNG、.JPEG 等扩展名！现在，我的问题是，如果我尝试从函数中删除扩展，它不会让我创建新图像......

我的意思是，如果我从 createFile 函数中删除 : '.'.$this->ext ，它将不再创建文件......

这是代码......它似乎有点长，但它不是......

```
if (!empty($_FILES)) {

function setFile($src = null) {
    $this->ext = strtoupper(pathinfo($src, PATHINFO_EXTENSION));

if(is_file($src) && ($this->ext == "JPG" OR $this->ext == "JPEG")) {
        $this->img_r = ImageCreateFromJPEG($src);
    } elseif(is_file($src) && $this->ext == "PNG") {
        $this->img_r = ImageCreateFromPNG($src);
    } elseif(is_file($src) && $this->ext == "GIF") {
        $this->img_r = ImageCreateFromGIF($src);
    }

$this->img_w = imagesx($this->img_r);
    $this->img_h = imagesy($this->img_r);
}

function resize($largestSide = 100) {
    $width = imagesx($this->img_r);
    $height = imagesy($this->img_r);
    $newWidth = 0;
    $newHeight = 0;

    if ($width > $height) {
        $newWidth = $largestSide;
        $newHeight = $height * ($newWidth / $width);
    } else {
        $newHeight = $largestSide;
        $newWidth = $width * ($newHeight / $height);
    }

    $this->dst_r = ImageCreateTrueColor($newWidth, $newHeight);
    imagecopyresampled($this->dst_r, $this->img_r, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
    $this->img_r = $this->dst_r;
    $this->img_h = $newHeight;
    $this->img_w = $newWidth;
}

function createFile($output_filename = null) {
    if ($this->ext == "JPG" OR $this->ext == "JPEG") {
        imageJPEG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext, $this->quality);
    } elseif($this->ext == "PNG") {
        imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
    } elseif($this->ext == "GIF") {
        imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
    }

    $this->output = $this->uploaddir.$output_filename.'.'.$this->ext;
}

function setUploadDir($dirname) {
$this->uploaddir = $dirname;
}

function flush() {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

imagedestroy($this->dst_r);
unlink($targetFile);
imagedestroy($this->img_r);

}

}

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

move_uploaded_file ($tempFile, $targetFile);

$image = new Image();
$image->setFile($targetFile);
$image->setUploadDir($targetPath);
$image->resize(800);
$image->createFile($_FILES['Filedata']['name']);
$image->flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:38:38.493

在格式化您的代码并在末尾删除额外的紧卷曲后（同时将您的函数定义移到您的`if`语句之外），您的代码应该如下所示：

```
<?php

function setFile($src = null) {
    $this->ext = strtoupper(pathinfo($src, PATHINFO_EXTENSION));
    if (is_file($src) && ($this->ext == "JPG" OR $this->ext == "JPEG")) {
        $this->img_r = ImageCreateFromJPEG($src);
    } elseif (is_file($src) && $this->ext == "PNG") {
        $this->img_r = ImageCreateFromPNG($src);
    } elseif (is_file($src) && $this->ext == "GIF") {
        $this->img_r = ImageCreateFromGIF($src);
    }
    $this->img_w = imagesx($this->img_r);
    $this->img_h = imagesy($this->img_r);
}

function resize($largestSide = 100) {
    $width     = imagesx($this->img_r);
    $height    = imagesy($this->img_r);
    $newWidth  = 0;
    $newHeight = 0;

    if ($width > $height) {
        $newWidth  = $largestSide;
        $newHeight = $height * ($newWidth / $width);
    } else {
        $newHeight = $largestSide;
        $newWidth  = $width * ($newHeight / $height);
    }

    $this->dst_r = ImageCreateTrueColor($newWidth, $newHeight);
    imagecopyresampled($this->dst_r, $this->img_r, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
    $this->img_r = $this->dst_r;
    $this->img_h = $newHeight;
    $this->img_w = $newWidth;
}

function createFile($output_filename = null) {
    if ($this->ext == "JPG" OR $this->ext == "JPEG") {
        imageJPEG($this->dst_r, $this->uploaddir . $output_filename . '.' . $this->ext, $this->quality);
    } elseif ($this->ext == "PNG") {
        imagePNG($this->dst_r, $this->uploaddir . $output_filename . '.' . $this->ext);
    } elseif ($this->ext == "GIF") {
        imageGIF($this->dst_r, $this->uploaddir . $output_filename . '.' . $this->ext);
    }
    $this->output = $this->uploaddir . $output_filename . '.' . $this->ext;
}

function setUploadDir($dirname) {
    $this->uploaddir = $dirname;
}

function flush() {
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetFile = str_replace('//', '/', $targetPath) . $_FILES['Filedata']['name'];

    imagedestroy($this->dst_r);
    unlink($targetFile);
    imagedestroy($this->img_r);
}

if (!empty($_FILES)) { 
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetFile = str_replace('//', '/', $targetPath) . $_FILES['Filedata']['name'];

    move_uploaded_file($tempFile, $targetFile);

    $image = new Image();
    $image->setFile($targetFile);
    $image->setUploadDir($targetPath);
    $image->resize(800);
    $image->createFile($_FILES['Filedata']['name']);
    $image->flush();
} 
```

这仍然不起作用，因为您正在调用这些方法，就好像它们`Image`是未在任何地方定义的对象的成员函数一样。查看PHP 手册中的[对象和类](http://php.net/manual/en/language.oop5.php)。

# c++ - QT文件打开不创建文件

> ID：12039619
> 
> 赞同：0
> 
> 时间：2012-08-20T14:32:06.863
> 
> 标签：c++, qt, qfile

我正在尝试使用 QT 打开一个文件并写入它：

```
void fileClass::saver(QList<ToDo *> t, QList<appointment *> a, QString fileName)
{
    fileName.append(".mca");
    file = new QFile(fileName);
    if( !file->open(stdin,QIODevice::WriteOnly))
        qDebug() << "Could not create file " << fileName << endl;
    for (int i = 0; i < t.count(); i++)
    {
        file->write(t[i]->ShowDate().toString().toAscii().constData(), qstrlen(t[i]->ShowDate().toString().toAscii().constData()));
        file->write(t[i]->ShowDescription().toAscii().constData(), qstrlen(t[i]->ShowDescription().toAscii().constData()));
        file->write(t[i]->ShowStart().toString().toAscii().constData(), qstrlen(t[i]->ShowStart().toString().toAscii().constData()));
        file->write(t[i]->ShowTitle().toAscii().constData(), qstrlen(t[i]->ShowTitle().toAscii().constData()));
        file->write(t[i]->ShowWarning().toString().toAscii().constData(), qstrlen(t[i]->ShowWarning().toString().toAscii().constData()));
        file->write(t[i]->ShowWarningTime().toString().toAscii().constData(), qstrlen(t[i]->ShowWarningTime().toString().toAscii().constData()));
        switch (t[i]->ShowPriority())
        {
        case (VERY_HIGH):
            file->write("0\0");
            break;
        case (HIGH):
            file->write("1\0");
            break;
        case (NORMAL):
            file->write("2\0");
            break;
        case (LOW):
            file->write("3\0");
            break;
        case (VERY_LOW):
            file->write("4\0");
            break;
        }
        switch (t[i]->ShowState())
        {
        case (STILL_BEGIN):
            file->write("0\0");
            break;
        case (BEGUN):
            file->write("1\0");
            break;
        case (ALMOST_DONE):
            file->write("2\0");
            break;
        case (DONE):
            file->write("3\0");
            break;
        }
    }
    file->write("----------------------------------------------------------");
    for(int i =0; i<a.count(); i++)
    {
        file->write(a[i]->ShowDate().toString().toAscii().constData(), qstrlen(a[i]->ShowDate().toString().toAscii().constData()));
        file->write(a[i]->ShowDescription().toAscii().constData(), qstrlen(a[i]->ShowDescription().toAscii().constData()));
        file->write(a[i]->ShowEnd().toString().toAscii().constData(), qstrlen(a[i]->ShowEnd().toString().toAscii().constData()));
        file->write(a[i]->ShowReminder().toString().toAscii().constData(), qstrlen(a[i]->ShowReminder().toString().toAscii().constData()));
        file->write(a[i]->ShowStart().toString().toAscii().constData(), qstrlen(a[i]->ShowStart().toString().toAscii().constData()));
        file->write(a[i]->ShowTitle().toAscii().constData(), qstrlen(a[i]->ShowTitle().toAscii().constData()));
    }
    file->close();
} 
```

但是文件没有以某种方式创建？知道为什么吗？我制作了自己的扩展名 .mca ...

文件名正确传递，没有任何问题......并且没有显示调试，所以理论上它应该可以工作，但在我的文件夹中找不到文件......提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:02:40.703

看来您需要使用另一种`QFile::open`方法。您使用的方法打开现有文件句柄，因此您打开`stdin`. 您之前设置的文件名无关紧要。

尝试这个：

```
if( !file->open(QIODevice::WriteOnly))
        qDebug() << "Could not create file " << fileName << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:03:17.590

这个对标准输入的引用看起来很假：

```
 if( !file->open(stdin,QIODevice::WriteOnly)) 
```

`stdin`是用来读的，不是用来写的。

最好使用此表单：

```
bool QFile::open ( OpenMode mode ) 
```

`mode`会在哪里`QIODevice::WriteOnly`

# jquery - 使用 jQuery 连续遍历数组

> ID：12039620
> 
> 赞同：0
> 
> 时间：2012-08-20T14:32:09.723
> 
> 标签：jquery, arrays

我需要不断地从数组中淡入淡出项目，我目前正在这样做：

```
var rotateHint = function() {
var hints = ['fe','fi','fo','fum'];
var hint;
var p = (function() {
    if (!hint || !hint.length) hint = hints.slice();
         return hint.splice(Math.random() * hint.length | 0, 1);
}())
$('#hint').text(p) //THE ERROR IS HERE...
          .fadeIn()
          .delay(1000)
          .fadeOut(200,function(){ 
            rotateHint();
            })
}; 
```

但是，似乎 .text(p) 不起作用，但是如果我用 alert(p) 查看 p ，则输出是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:48:03.953

它似乎只适用于 jQuery 1.7 以前的版本会引发错误

但是在数组上做一个 text() 有点奇怪，不是吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T14:39:24.383

看看这个[小提琴](http://jsfiddle.net/XmjsU/3/)。似乎它已经在工作了。

对于一些附加值，我优化了您的 JavaScript 代码。

**HTML**

```
<div id="hint"></div>​ 
```

**JavaScript**

```
(function() {
    var hints = ['fe', 'fi', 'fo', 'fum']
      , p;

    (function rotateHint() {
        p = hints[Math.round(Math.random() * hints.length)];

        $('#hint').text(p).fadeIn().delay(1000).fadeOut(200, rotateHint);
    }());

}());​ 
```

适用于 Safari 6、FireFox 14 和 Chrome 21 Beta

# android - 如何从图书馆开始主要活动？

> ID：12039621
> 
> 赞同：4
> 
> 时间：2012-08-20T14:32:12.307
> 
> 标签：android, android-library

我正在使用一个项目 A 和一个库项目来开发我的 Android 应用程序。这两个项目都有活动。如果我目前在项目 A 中，那么只需导入即可轻松启动库项目中的活动。但是，如果我来自图书馆项目中的活动，我不确定如何在项目 A 中启动活动。我正在尝试使库项目独立于项目 A 的包名称，因为我将它用于多个应用程序。关于如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:43:56.657

有几种可能的解决方案。

最好的办法是在清单条目中为您希望其他项目可以访问的活动注册一个[意图过滤器。](http://developer.android.com/guide/components/intents-filters.html)[这里](http://www.vogella.com/articles/AndroidIntent/article.html)有一个关于意图过滤器的很棒的教程。

另一种选择是将一个类传递给库项目，并使用[Intent (Context packageContext, Class cls)](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29)构造函数来创建触发和启动活动的意图。然而，使用意图过滤器将是一种更好的实践和学习体验。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:50:13.280

我相信这是最简单的答案：您需要一个存在于库中的对象，您可以在项目中对其进行扩展。

想象一下，您的图书馆有一个您的 ProjectApplication 扩展的 LibraryApplication。LibraryActivity 可以调用：

```
((LibraryApplication)getApplication()).startNewActivity(this, "goHome") 
```

您的 ProjectApplication 实现了这个新方法：

```
public void startNewActivity(Context context, String action) {
    if("goHome".equals(action)) {
        startActivity(context, ProjectHomeActivity.class);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:44:59.293

您可以将项目添加为外部库。你也可以使用 maven 来做这种事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-07T07:16:32.610

从一个简单而好的[答案](https://stackoverflow.com/a/41465133/3994630)：

```
try {
   startActivity(new Intent(this, Class.forName("com.package.HomeActivity")));
 } catch (ClassNotFoundException e) {
    e.printStackTrace();
 } 
```

也可以通过这个[答案](https://stackoverflow.com/a/25605320/3994630)，使用动作。

# unix - vim 多个匹配项。2mat、3mat、matchadd() 替代品

> ID：12039623
> 
> 赞同：1
> 
> 时间：2012-08-20T14:32:13.947
> 
> 标签：unix, vim

我想要多个单词的亮点。我通常在 .vimrc- 中执行此操作

```
:highlight HLONE ctermbg=grey ctermfg=white
:highlight HLTWO ctermbg=blue ctermfg=white
:highlight HLTHREE ctermbg=green ctermfg=white
nnoremap 1 :mat HLONE "<C-R><C-W>"<CR>
nnoremap 2 :2mat HLTWO "<C-R><C-W>"<CR>
nnoremap 3 :3mat HLTHREE "<C-R><C-W>"<CR> 
```

但由于某种原因，它在我目前的工作场所不适合我。按下一个突出显示它应该的方式。但按 2 (2mat) 会出错 -

**E481: 不允许范围**

它似乎 2mat、3mat、matchadd 不可用。vim 版本是 6.3。

有什么解决方法或替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:40:03.367

Vim 6.3 是从 2004 年开始的；这些`:2match`命令仅在 Vim 7.0 中引入。如果您坚持使用该版本，则只能使用`:match`，或者尝试`:syn keyword`（但这会干扰常规语法突出显示）。

即使没有 root / 管理权限，您通常也可以编译 / 安装本地版本的 Vim。

广告：如果你觉得多字高亮必不可少并经常使用，试试我的[Mark 插件](http://www.vim.org/scripts/script.php?script_id=2666)；它可以自动处理`:2match`，在所有窗口中提供多种颜色和高亮显示（但需要 Vim 7.2）。在该页面上还有其他此类插件的链接，其中一些仍然使用语法突出显示，甚至可以与 Vim 6 一起使用。

# c# - 允许以不匹配的完整性级别连接到 .NET COM 服务器

> ID：12039624
> 
> 赞同：54
> 
> 时间：2012-08-20T14:32:14.210
> 
> 标签：c#, .net, com, uac

我在使用基于 COM 的客户端-服务器设置时遇到问题。COM 服务器是用 C# (.NET 4.0) 编写的，并作为（注册的）本地服务器运行。

根据连接到服务器的应用程序，其他客户端将收到**服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE)**

这里解释了根本问题[（在 COM 是完整性意识部分）](http://msdn.microsoft.com/en-us/library/bb625962.aspx)。我理解它的方式是，这是由于提升的应用程序创建了具有更高完整性级别的服务器。当另一个非提升的应用程序随后连接时，不允许连接到同一个实例。当非提升的应用程序创建进程，然后是提升的应用程序连接时，也会发生同样的情况。

我已尝试实施[页面](http://msdn.microsoft.com/en-us/library/bb625962.aspx)上描述的解决方案：修改注册表以设置应允许所有客户端连接的安全描述符。C++ 中有一个[代码示例](http://msdn.microsoft.com/en-us/library/ms679687.aspx)，但这在 .NET 中有效地做同样的事情：

```
// Security Descriptor with NO_EXECUTE_UP
var sd = new RawSecurityDescriptor("O:BAG:BAD:(A;;0xb;;;WD)S:(ML;;NX;;;LW)");
byte[] securityDescriptor = new Byte[sd.BinaryLength];
sd.GetBinaryForm(securityDescriptor, 0);

RegistryKey key = Registry.ClassesRoot.OpenSubKey("AppID\\{APP-ID-GUID}", true);
if (key == null)
{
    key = Registry.ClassesRoot.CreateSubKey("AppID\\{APP-ID-GUID}");
}

using (key)
{
    key.SetValue("LaunchPermission", securityDescriptor, RegistryValueKind.Binary);
} 
```

然而，这并没有达到预期的效果。当第二个客户端尝试创建相关对象的实例时，Windows 尝试启动我的 COM 服务器的单独实例，但服务器阻止两个实例以同一用户身份运行。鉴于我设置的权限，我不希望第二个实例首先启动。

由于其中一个客户端应用程序在 Medium IL 中运行，而另一个在 High IL 中运行，我还尝试了[强制标签](http://msdn.microsoft.com/en-us/library/bb625958.aspx)上的变体，例如：

```
O:BAG:BAD:(A;;0xb;;;WD)S:(ML;;NX;;;ME)
O:BAG:BAD:(A;;0xb;;;WD)S:(ML;;NX;;;LW)(ML;;NX;;;ME)(ML;;NX;;;HI) 
```

我还尝试`ROTFlags`按照页面上的建议将注册表项设置为 0x1 (ROTFLAGS_ALLOWANYCLIENT)，但行为仍然没有变化。

我已经确定 LaunchPermission 注册表值正在以某种方式使用。我无法使用 Process Monitor 发现它正在读取的位置，但是当我使用该`dcomcnfg.exe`工具设置相同的密钥时，我可以通过拒绝启动权限来强制服务器加载失败。

我想指出我的服务器进程不需要提升。如何使提升和非提升进程都能够连接到单个服务器实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T20:57:12.270

根据[Windows Vista 安全模型分析](http://www.symantec.com/avcenter/reference/Windows_Vista_Security_Model_Analysis.pdf)，您将需要使用诸如命名管道之类的共享对象在不同的​​ IL 之间移动。此外，共享对象的 IL 应该与您正在使用的最低 IL 等效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T11:24:19.853

您必须在 VS 中将 Debug 选项设置为 Any cpu。

# javascript - 从 javascript 调用 asmx 服务时出现错误 500

> ID：12039625
> 
> 赞同：2
> 
> 时间：2012-08-20T14:32:14.273
> 
> 标签：javascript, web-services, asmx

我正在使用 javascript 和 servicereference 调用 .net 2.0 asmx 服务。当我在测试环境和本地调用服务时，一切正常。在生产中，我收到错误 500。我在事件日志中看不到任何错误或在任何地方显示。

如果我直接点击 Web 服务，那么我会收到 json 格式的数据。如果我使用 servicereference 从 javascript 调用 Web 服务，则会收到错误 500。

我认为这可能与大小限制有关，因为我可以减少数据点的数量并且数据通过 javascript 正确返回。

我尝试增加 httpRuntime 中的 maxRequestLength 但这没有任何影响。是否有一些我缺少的设置？

如果您查看此页面：[http](http://bit.ly/NXBFpD) ://bit.ly/NXBFpD ，您将看到返回的数据没有错误。

如果您查看此页面并查看在 firebug 中进行的调用，您会看到调用了与上述相同的页面，但返回了错误 500。[http://bit.ly/NXBPO1](http://bit.ly/NXBPO1)

这是被调用页面上的代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
            ScriptManager.GetCurrent(Page).Services.Add(new ServiceReference("/Services/FusionService.asmx"));
        }
    }
} 
```

这是调用服务的js代码：

```
function GetGeometries(sw, ne, metro) {
    FusionService.GetGeometries(sw.lat(), sw.lng(), ne.lat(), ne.lng(), metro, drawMap);
} 
```

这是服务：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class FusionService : System.Web.Services.WebService
{
private string url = "https://www.googleapis.com/fusiontables/v1/query";

[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public string GetGeometries(decimal southWestLat, decimal southWestLng, decimal northEastLat, decimal northEastLng, string metro)
{
    try
    {
        var jss = new JavaScriptSerializer();
        string key = string.Format("Geometry-{0}", metro);

        var geometryData = HttpContext.Current.Cache[key] as string;

        if (!string.IsNullOrEmpty(geometryData))
        {
            var deserialized = jss.Deserialize<GeometryData>(geometryData);
            return jss.Serialize(deserialized);
        }

        var query = "SELECT name, geometry, FranchiseI, latitude, longitude, STATE FROM " +
                    "1JNOz_lhP1B8oCzeNLBm8u5k6ezdRDKtM-NBD8 where ST_INTERSECTS(geometry, RECTANGLE(LATLNG("
                    + southWestLat + "," + southWestLng + "), LATLNG(" + northEastLat + "," + northEastLng + ")))";

        var requestString = url + "?sql=" + HttpUtility.UrlEncode(query) + "&key=AIzaSyCXLd2VlvZ0FNLbgMKsfSq7Uvp3IDwa";

        var request = WebRequest.Create(requestString) as HttpWebRequest;

        using (var response = request.GetResponse() as HttpWebResponse)
        {
            var reader = new StreamReader(response.GetResponseStream());

            var json = reader.ReadToEnd();
            json = json.Replace("NaN", "\"\"");

            HttpContext.Current.Cache[key] = json;
            var deserialized = jss.Deserialize<GeometryData>(json);

            return jss.Serialize(deserialized);
        }
    }
    catch(Exception ex)
    {
        return ex.Message;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:52:41.557

这是由 JSON 可以序列化的大小限制引起的。我需要将此添加到我的 web.config 中。

```
<system.web.extensions>
    <scripting>
        <!--The Following lines value should be true in production server-->
        <scriptResourceHandler enableCompression="false" enableCaching="true" />
<webServices>
    <jsonSerialization maxJsonLength="5000000">
    </jsonSerialization>
  </webServices>
    </scripting>
</system.web.extensions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:44:20.840

从服务器上的浏览器调用 URL，您可能会看到错误的内容。或者 - 更改您的 web.config，以便您也可以从客户端浏览器查看实际错误：

放：

```
<customErrors mode="Off" /> 
```

这将允许您追踪问题并解决它！

# jquery - 标记 div 的替代方法

> ID：12039632
> 
> 赞同：0
> 
> 时间：2012-08-20T14:32:34.490
> 
> 标签：jquery, html

我可以用另一种方式标记我的 div 以实现我在这里尝试做的事情。我有一个名为 errors 的主 div，它将显示所有错误消息。问题是，我的表单输入区域和其他说明文本需要介于两者之间，因为错误消息和文本需要出现在它们下方。当我执行`$('#errors div').empty();`所有指令文本并且其他所有内容都被清除时，因为它都在`<div id="errors">`标记这 3 个 div（eUname、ePwd、eMail）的任何替代方式下，所以它仍然在标签“错误”下？

```
<div id="form">
  <div id="errors">
     //Input field and other instruction text goes here with its own id
  <div id="eUname"></div>
    //Input field and other instruction text goes here with its own id
  <div id="ePwd"></div>
    //Input field and other instruction text goes here with its own id
  <div id="eMail"></div>
 </div>
</div> 
```

就像是：

```
<div id="errors" id="eUname" ></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:37:56.740

您可能希望`class="error"`在所有错误 div 上使用。

```
<div id="form">
    <div class="error" id="eUname">Error here</div>
    <div class="error" id="ePwd">Error here</div>
</div> 
```

这意味着您可以像这样使用 jQuery：

```
$('.error').empty(); 
```

在相关说明中，您可以考虑阅读[htmlDog上的一些教程](http://htmldog.com/)

# python - 如何在 Sphinx 中的方法内自动添加函数

> ID：12039633
> 
> 赞同：2
> 
> 时间：2012-08-20T14:32:35.617
> 
> 标签：python, scope, python-sphinx, restructuredtext, autodoc

代码示例：

```
class A(object):
    def do_something(self):
        """ doc_a """
        def inside_function():
            """ doc_b """
            pass
        pass 
```

我试过：

```
.. autoclass:: A
    .. autofunction:: A.do_something.inside_function 
```

但它不起作用。

有什么方法可以`doc_b`为我生成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:52:31.580

函数中的函数位于局部变量范围内。函数的局部变量不能从函数外部访问：

```
>>> def x():
...    def y():
...       pass
... 
>>> x
<function x at 0x7f68560295f0>
>>> x.y
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'y' 
```

如果 Sphinx 无法获得对该函数的引用，它就无法记录它。

一种可能有效的解决方法是将函数分配给函数的变量，如下所示：

```
>>> def x():
...    def _y():
...       pass
...    x.y = _y
... 
```

一开始无法访问：

```
>>> x.y
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'y' 
```

但是在第一次调用该函数之后，它将是：

```
>>> x()
>>> x.y
<function _y at 0x1a720c8> 
```

如果在 Sphinx 导入模块时执行该函数，这可能会起作用。

# c# - 在我的表单上隐藏光标

> ID：12039634
> 
> 赞同：7
> 
> 时间：2012-08-20T14:32:40.840
> 
> 标签：c#, winforms

当鼠标悬停在我的一个申请表上时，我需要有关如何隐藏光标的帮助。我知道 MouseEnter 和 MouseLeave 事件的代码分别是 Cursor.Hide() 和 Cursor.Show() 。将此应用于表单本身不起作用。所以我插入了一个面板（将其 Dock 属性设置为 Fill）来包含其他控件。该代码适用于面板，但当我开始添加控件时，它没有。
我的猜测是我必须将代码应用于每个控件。我的表单上有大约 25 个控件，这看起来相当笨拙。
我的想法是这样的（我很抱歉格式化；我正在用哑机打字）：

```
foreach(Control control in this.Controls)
{
    control.MouseEnter += control_MouseEnter;
    control.MouseLeave += control_MouseLeave;
} 
```

代码在 FrmScreen_Load 中。但它仍然不起作用。我错过了什么吗？

我在 C# 中工作，但 VB.NET 中的解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T14:37:57.260

建议[`Cursor.Hide();`](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.hide.aspx)在表单构造函数中使用。

> 将此应用于表单本身不起作用

当您移出应用程序的区域时，我认为您永远不必关心光标。表单初始化时将代码放在那里。

```
public Form1()
        {    
            InitializeComponent();
            Cursor.Hide();
        } 
```

另一种推荐的方法是遍历控件集合，即

```
foreach(Control c in this.Controls)
{
  c.Cursor.Hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:03:19.240

您说的是：@msarchet 我认为问题在于，在循环中，当鼠标位于控件上时，会调用 control_MouseEnter （隐藏光标），但在此之前，鼠标刚刚离开另一个显示光标的控件. 总而言之，也许这两个事件被同时调用，因此似乎总是显示光标。正是我的想法

如果您认为这是问题所在，请不要为离开所有控件执行 cursor.show，您只希望它在离开面板时显示。在您的面板上设置 cursor.show 和 cursor.hide，所有其他控件只需获得 cursor.hide。

# iphone - removeFromSuperview 删除所有子视图

> ID：12039635
> 
> 赞同：2
> 
> 时间：2012-08-20T14:32:41.407
> 
> 标签：iphone, objective-c, ios

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    NSLog(@"will rotation");

    for (UIButton *button in self.view.subviews) {
        [button removeFromSuperview];
    }

} 
```

我对这段代码有疑问。我只需要从我的视图中删除 UIButtons。但是这段代码也删除了我的 self.view 的所有子视图。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:35:44.653

做这个：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
NSLog(@"will rotation");

   for (id subview in self.view.subviews) {
    if([subview isKindOfClass:[UIButton class]]) //remove only buttons
    {
      [subview removeFromSuperview];
    }
   }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:36:14.627

您正在迭代所有视图并将它们转换为 UIButton，而不是迭代 UIButton。试试这个：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    NSLog(@"will rotation");

    for (UIView *button in self.view.subviews) {
        if ([button isKindOfClass:[UIButton class]]) {
            [button removeFromSuperview];
        }        
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T14:36:00.177

```
for (id button in self.view.subviews) 
    {
        if(button isKindOfClass:[UIButton class])
        {
          [button removeFromSuperview];
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T14:38:02.450

`self.view.subviews`将获取所有子视图，并且`UIButton *`以这种方式使用类型不会过滤列表，它只是向编译器提示您希望能够像 UIButtons 一样处理对象。您必须检查每一个，如下所示：

```
for (UIView *subview in self.view.subviews) {
    if([subview isKinfOfClass:[UIButton class]])
      [subview removeFromSuperview];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:37:50.313

一种选择是在文件顶部创建一个标签

```
#define BUTTONSTODELETE 123 
```

然后设置每个`buttons.tag = BUTTONSTODELETE`

最后 ：

```
for (UIButton *v in [self.view subviews]){
        if (v.tag == BUTTONSTODELETE) {
            [v removeFromSuperview]; 
```

保证只删除带有该标签的物品

编辑：Maulik 和 fbernardo 有一种更好、更简洁的方式

# android - hdpi 屏幕密度的图像

> ID：12039637
> 
> 赞同：2
> 
> 时间：2012-08-20T14:32:46.787
> 
> 标签：android, android-layout

我需要我的应用程序来支持 hdpi 设备。根据我的阅读，我需要使用 72x72 大小的图标和 640x480 的图像。我的问题是：

1.  例如，如果我的 android 设备是 mdpi，是否会自行缩放图像和图标？我读过它在缩放后有一个公平的视图。

2.  我应该把我所有的资源放在哪里？仅在`drawbles\hdpi`文件夹中？还是仅在`drawbles`文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:40:28.580

对于＃1，是的，它会扩展它们，但在我看来，您应该*始终*提供自己的扩展资源。通过这种方式，您可以控制[它们在缩小时的外观](https://stackoverflow.com/questions/11620416/android-purpose-of-using-images-with-different-pixel-density/11620766#11620766)（这使得它们越小越详细，差异越大）。此外，640x480 绝不是标准尺寸。这取决于您想要什么类型的图像，以及它需要多大。重要的是[了解密度之间的*比率*](https://stackoverflow.com/questions/11581649/about-android-image-size-and-assets-sizes/11581786#11581786)。

对于＃2，您应该始终在`res/drawable`文件夹中保留备用图形，因为 Android 不会*升级*特定密度的图形。（例如，如果您在`xhdpi`Galaxy Nexus 上运行，您的应用程序将崩溃）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:45:00.493

在此处查看有关支持多个屏幕的 android 开发人员文档：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

简而言之，缩放所有图像以支持多种屏幕尺寸和密度并将它们放在相应的文件夹中是一种很好的做法，例如：

*   res/drawable-mdpi/my_icon.png // 中等密度的位图
*   res/drawable-hdpi/my_icon.png // 高密度位图
*   res/drawable-xhdpi/my_icon.png // 超高密度位图

并留给 Android 操作系统根据客户端设备选择正确的图像

# c++ - 如何在没有长度限制的情况下在 C++ 中获取格式化的 std::string

> ID：12039647
> 
> 赞同：0
> 
> 时间：2012-08-20T14:33:46.663
> 
> 标签：c++, string, string-formatting

在 c++ 中执行此操作的最佳方法是什么（简而言之，使用标准库且易于理解）：

```
std::string s = magic_command("%4.2f", 123.456f) 
```

*   没有长度限制（char s[1000] = ...）
*   其中 "%4.2f" 是任何 c 格式字符串（例如，将提供给 printf）

我知道为纯 c 建议的 snprintf malloc 组合

[将未知长度的格式化数据写入字符串（C 编程）](https://stackoverflow.com/questions/1854353/writing-formatted-data-of-unknown-length-to-a-string-c-programming)

但是有没有更好、更简洁的方法来用 C++ 做到这一点？

我也知道建议的 std::ostringstream 方法

[在 C++ 中将浮点数转换为 std::string](https://stackoverflow.com/questions/2125880/converting-a-float-to-stdstring-in-c)

但我想传递 ac 格式字符串，例如“%4.2f”，但我找不到使用 ostringstream 的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T14:35:57.067

您可以尝试[Boost.Format](http://www.boost.org/doc/libs/1_50_0/libs/format/doc/format.html)：

```
std::string s = boost::str(boost::format("%4.2f") % 123.456f); 
```

它不包含在标准中，但 Boost 与非标准库一样标准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T14:35:01.807

我会使用`std::stringstream`( 与`setprecision`) 代替，然后使用`.str()`来获得`std::string`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T14:38:57.680

C++完全抛弃了格式字符串的概念，所以不会有标准的做法。`magic_command`不过，您可以使用`asprintf`（`vasprintf`实际上是它的变体）实现自己。

请注意，这`*asprintf`是 GNU/BSD 扩展。因此，它们在 Windows 上不存在。此外，此解决方案不是类型安全的，并且只接受 POD 类型（因此没有类、结构或联合）。

```
std::string magic_command(const std::string& format, ...)
{
    char* ptr;
    va_list args;
    va_start(args, format);
    vasprintf(&ptr, format.c_str(), args);
    va_end(args);

    std::unique_ptr<char, decltype(free)&> free_chars(ptr, free);
    return std::string(ptr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T14:49:50.867

如果你真的想使用你的语法并放弃类型安全，我会写一个小包装类来包装`snprintf`. 我会从一个小尺寸的本地自动缓冲区（比如 2048？）开始，然后调用`snprintf`一次。如果成功，则返回`std::string`从该缓冲区创建的。如果超限，分配`std::string`正确大小的 a 并重复`snprintf`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T13:11:09.230

给出的所有答案都很好，因为似乎没有真正标准的方式来做我想做的事，我会投票给你们，并接受我自己总结的行动方案：

*   如果字符串足够短，可以手动估计其大小，请执行此操作，将估计值乘以 4，然后静态分配它。
*   如果您可以摆脱 stringstream + setprecision，那么就这样做，因为它是标准的
*   如果没有，并且您愿意编写并包含一个基于 snprintf/检查溢出/动态分配的简短帮助函数，请执行此操作并将其放入您的项目“utils”文件中
*   最后考虑哪个依赖项对您的项目限制较少（也许您已经在使用其中之一）：
    *   如果 boost 限制较少，请使用 Boost.Format
    *   如果 GNU/BSD 扩展限制较少，请使用 asprintf

# jquery - 将鼠标悬停在 para 上应该在 jquery 中显示相同的内容

> ID：12039651
> 
> 赞同：1
> 
> 时间：2012-08-20T14:34:05.630
> 
> 标签：jquery

每当我悬停“p”时，它应该显示“重复”之类的内容并单击“重复”以悬停的段落应该显示在“p”下面我尝试一些事情......

```
<div id="one">
<p>This is para, when i hover i will appear. </p>
<p>This is another, when i hover i will appear. </p>
<h4 id="o"><a href="#one">Duplicate</a></h4>
<div class="tex"></div>
<ul>
</ul>
</div> 
```

和 jquery 是

```
var id = '';
 $("p").hover(function() {
id = $(this).text();
$("#o").show();
},
function() {
$("#o").delay(2000).fadeOut("slow");
 });

$("#o").click(function() {
 $(id).appendTo("tex");
  }); 
```

在这里我犯了一些错误。但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:34:46.713

这是您想要的完整答案。

HTML

```
 <div id="one">
 <p>This is para, when i hover i will appear.</p>
 <p>This is another, when i hover i will appear.</p>
 <h4 id="o"><a href="#one">Duplicate</a></h4>
 </div> 
```

这里的jquery

```
(function($) {
$.fn.outerHTML = function(s) {
return (s)
? this.before(s).remove()
: $('<p>').append(this.eq(0).clone()).html();
}
})(jQuery);

var is, id = '';
$("p").live({
    mouseover: function() {
   is = $(this);
    id = $(this).outerHTML();
     $("#o").insertBefore(is).show();
  },
  mouseout: function() {
    $("#o").delay(2500).fadeOut("slow");
  }
});
$("#o").click(function() {
 $(is).after(id);
}); 
```

这里的演示：[jsfiddle](http://jsfiddle.net/9vg8u/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:42:56.970

您正在使用`id`as 选择器，这是不对的。

```
var txt = '';
$("p").hover(function () {
    txt = $(this).text();
    $("#o").show();
},

function () {
    $("#o").delay(2000).fadeOut("slow");
});

$("#o").click(function () {
    $('.tex').append(txt);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:43:13.773

试试这个

```
$('.tex').append(id); 
```

代替

```
$(id).appendTo("tex"); 
```

您正在尝试将文本转换为 jquery 对象`$(id)`..您想要做的是使用 class=tex 将文本附加到您的元素

[http://jsfiddle.net/wirey00/9vg8u/5/](http://jsfiddle.net/wirey00/9vg8u/5/)

# django - 无法使用 curry 将初始值传递给表单集

> ID：12039670
> 
> 赞同：1
> 
> 时间：2012-08-20T14:35:18.693
> 
> 标签：django, forms, formsets

根据这个 SO question [Django Passing Custom Form Parameters to Formset](https://stackoverflow.com/questions/622982/django-passing-custom-form-parameters-to-formset)我尝试使用 curry 将初始值字典传递给我的表单集。

它不起作用，它给了我一组空值，这不是它应该做的。

谁能看看我是否执行了这个错误？

```
data = {'supplier': input_data['supplier'],}

InstanceFormSet = formset_factory(BulkAddInstanceForm, extra=int(input_data['copies']))
InstanceFormSet.form = staticmethod(curry(BulkAddInstanceForm, data)) 
```

编辑：根据要求

```
class BulkAddInstanceForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(BulkAddInstanceForm, self).__init__(*args, **kwargs)

        self.fields['supplier'] = forms.ModelChoiceField(
            queryset=Supplier.objects.all(),
            label='Supplier',
            empty_label='Select a Supplier...',
            required=True,
        )
        self.fields['syllabus'] = forms.ModelChoiceField(
            queryset=Syllabus.objects.all(),
            label='Syllabus',
            empty_label='Select a Syllabus...',
            widget=FilterWidget(
                queryset=Syllabus.objects.all(),
                parent_queryset=Supplier.objects.all(),
                control_name='supplier',
                parent_attr='supplier',
            ),
            required=False,
        )
        self.fields['venue'] = forms.ModelChoiceField(
            queryset=Venue.objects.all(),
            label='Venue',
            empty_label='Select a Venue...',
            widget=FilterWidget(
                queryset=Venue.objects.all(),
                parent_queryset=Supplier.objects.all(),
                control_name='supplier',
                parent_attr='supplier',
            ),
            required=False,
        )
    start_date = NiceDateField(required=False, label='Start Date')
    residential = forms.BooleanField(label='Res?', required=False)
    special_offers = forms.BooleanField(label='S/O?', required=False)
    manual_price = forms.IntegerField(required=False)
    manual_cost = forms.IntegerField(required=False) 
```

编辑2：粮农组织布兰登

我看过docco，它建议做不同的事情。

```
formset = formset_factory(BulkAddInstanceForm, extra=int(input_data['copies']))
formset = InstanceFormSet(initial=[data, ]) 
```

它创建了一个包含“副本”数量的表单集，以及另一个包含数据的表单集。如果我这样做

```
formset = InstanceFormSet(initial=[data, data]) 
```

然后我得到两个带有数据的额外表单。所以我的想法是我需要一个迭代器来添加“副本”数量的字典并将表单集中的初始表单数量归零。

不是说我知道怎么编码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:06.137

设法使用以下代码做到这一点：

```
InstanceFormSet = formset_factory(BulkAddInstanceForm, extra=0)
# build the list for populating the forms
    n, datalist = 0, []
    while n < int(input_data['copies']):
        datalist.append(data)
        print datalist
        n +=1

    formset = InstanceFormSet(initial=datalist) 
```

所以我创建了表单集，然后我创建了一个数据字典列表，然后用初始数据作为列表填充表单集。

到目前为止似乎工作正常，但我必须弄清楚如何收集和提交信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:49:30.020

您需要在`__init__`

当我过去使用它时，我已经将参数设置为：

```
class MyForm(forms.Form):
    def __init__(self, data, *args, **kwargs):
        self.data = data
        #do whatever else I need to do with data

        super(MyForm, self).__init__(*args, **kwargs) 
```

希望对您有所帮助。

# php - ruby openssl hmac php 等效

> ID：12039671
> 
> 赞同：1
> 
> 时间：2012-08-20T14:35:19.933
> 
> 标签：php, ruby, openssl, sha1, hmac

我必须将此 ruby​​ 代码转换为 PHP 等效代码。

```
[OpenSSL::HMAC.digest(OpenSSL::Digest::Digest.new('sha1'), secret_key, policy)].pack("m").strip 
```

我将其转换为以下代码，但我不确定它是否正确。

```
$s = hash_hmac('sha1', $secret_key, $policy);
$s = base64_encode($sig);
$s = trim($sig);
return $s; 
```

我不确定是否需要将 hash_hmac 的最后一个参数设置为 true：

```
$sig = hash_hmac('sha1', $secret_key, $policy, true); 
```

或者没有一个是正确的，应该以不同的方式做到这一点。

哪个是正确的等价物？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T17:54:24.223

好的，我刚刚自己安装了 ruby​​ 进行测试。我已经测试过，等效的是：

```
$sig = hash_hmac('sha1', $policy, $secret_key, true);
$sig = base64_encode($sig);
$sig = trim($sig);
return $sig; 
```

php中参数的顺序是颠倒的，先是数据，后是key。并且 raw_output 参数需要为真。

# javascript - Smoothdivscroll & Lazyload

> ID：12039672
> 
> 赞同：2
> 
> 时间：2012-08-20T14:35:23.480
> 
> 标签：javascript, jquery, wordpress, gallery, lazy-loading

我正在一个网站上工作，该网站将在[http://www.smoothdivscroll.com](http://www.smoothdivscroll.com)布局中包含大约 200 多个图像

问题是我们需要加入某种延迟加载。我遇到的主要问题是视口中的第一张图像交换 src 和 data-original 没问题。但是，视口之外的任何其他项目都不会交换。他们仍然有原始的 transparent.gif 作为来源。

这是我正在使用的延迟加载文件：http: [//pastebin.com/W05PiFLA](http://pastebin.com/W05PiFLA)

我根本没有碰过[http://www.smoothdivscroll.com](http://www.smoothdivscroll.com)的代码。

任何人都知道在这里可以做什么。我正在为一个客户做这件事，时间正在成为一个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:50:11.893

尝试使用 src 更改切换事件绑定。

```
 image.bind('load', function(){
                            image.animate({opacity:1}, 1000).css({height:'auto'});
                            callback();
                    });
  image.attr("src", image.attr("data-original")); 
```

而不是这个

```
 image.attr("src", image.attr("data-original")).bind('load', function(){
                            image.animate({opacity:1}, 1000).css({height:'auto'});
                            callback();
                    }); 
```

# html - 用它们的 HTML 内容替换字体标签

> ID：12039676
> 
> 赞同：0
> 
> 时间：2012-08-20T14:35:29.937
> 
> 标签：html, haskell

我现在正在做这个作业，但我不知道。有人可以帮助我吗？

给定以下用于表示 HTML 的数据类型：

```
type HTML = [HTML_element]
data HTML_element = HTML_text String
                  | HTML_font Font_tag HTML
                  | HTML_p HTML
                  | HTML_ul [HTML]
                  | HTML_ol [HTML]

data Font_tag = Font_size Int
              | Font_face String
              | Font_color Font_color

data Font_color = Colour_name String
                | Hex Int
                | RGB Int Int Int 
```

编写一个 Haskell 函数：

```
strip_font_tags :: HTML -> HTML 
```

这会删除所有字体标签，并用它们的 HTML 内容替换它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T17:56:06.927

我认为这里的其他人都错过了练习的重点。这是我解释问题后的思考过程；也许这可以指导你一点。

我想考虑一次操作一个`HTML_element`，所以我想要一个在某个时候有类型的函数`HTML_element -> ???`；弄清楚`???`可能是什么将是巨大的第一步。第一个刺是选择`HTML_element`for `???`，但这并不完全有效，因为字体标签的内容是`HTML`，而不是`HTML_element`。嗯……`HTML`又是什么？啊，是的，`type HTML = [HTML_element]`！所以，实际上，我可以`HTML`在每种情况下返回一个；在非字体情况下，我可以将单个元素包装在单例列表中。

嗯，但现在呢？我想知道现在我已经编写了每个元素[的函数，是否有一个函数可以满足我的需求......](http://www.haskell.org/hoogle/?q=(html_element+-%3E+%5Bhtml_element%5D)+-%3E+(%5Bhtml_element%5D+-%3E+%5Bhtml_element%5D))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:26:55.650

好吧，最简单的方法是`HTML_element`用另一个替换`HTML_element`——这是一个结构保持转换，你可能会稍微改变你的数据，编写一个`Functor`实例，然后就使用`fmap`——你的映射是“如果是`HTML_font _ x`，则返回例如`HTML_p x`；如果不是，按原样返回”。

这是用 SYB 表示的：

```
{-# LANGUAGE DeriveDataTypeable #-}
import Data.Generics

data Element
    = Text String
    | Font [Element]
    | Para [Element]
    deriving (Show, Typeable, Data)

-- replace Font with Para
replace' :: Element -> Element
replace' (Font x) = Para x
replace' x = x

-- top-level transformation
-- replace this with manual recursion and you're set
replace :: Element -> Element
replace = everywhere (mkT replace')

example =
    Para [
        Text "1",
        Font [
            Text "2.1",
            Para [
                Text "2.2.1",
                Font [Text "2.2.2"]
            ]
        ],
        Text "3"
    ] 
```

在 GHCi 中：

```
[*Main]
> replace example
Loading package syb-0.3.6.1 ... linking ... done.
Para [Text "1",Para [Text "2.1",Para [Text "2.2.1",Para [Text "2.2.2"]]],Text "3"]
it :: Element 
```

如果您想完全消除这些元素，您可以将所有内容映射到列表中，然后将它们连接起来。试着自己弄清楚。

# c# - 文件名的正则表达式

> ID：12039679
> 
> 赞同：0
> 
> 时间：2012-08-20T14:35:35.183
> 
> 标签：c#, regex

我有一个文件名为 SMITH 3H FINAL 03-26-2012.dwg 的 dwg 文件，我正在尝试为验证目的找到正确的正则表达式，因为我每周将有 100 个文件我需要验证文件名的格式是正确的。我对正则表达式知之甚少，我在下面找到了一些代码，但它没有通过有效。如果我正确阅读了第一行，那么它是否期望文件名中有一个逗号，这就是为什么它没有通过有效？

```
string filenamePattern = String.Concat("^",
                                                   "([a-z',-.]+\\s+)+",  // HARRIS, SMITH 
                                                   "(\\d{1,2}-\\d{1,2}){1}\\s+",  // 09-06
                                                   "([a-z]+\\s)*",  //
                                                   "((\\#?\\s*(\\d(\\s*|,))*\\d*-\\d+-?H?D?\\d*?),*\\s+(&\\s)*)+",  // #5,6-11H & #4,7,8-11H2, etc
                                                   "([a-z()-]+\\s)*",  // CLIP-OUT (FINAL)
                                                   "(\\d{1,2}-\\d{1,2}(-\\d{2}|-\\d{4})){1}",  // 05-11-2009
                                                   "\\.dwg", // .dwg
                                                   "$");
            RegexOptions options = (RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline | RegexOptions.IgnoreCase);
            Regex reg = new Regex(filenamePattern, options);
            if (reg.IsMatch(filename))
            {
                valid = true;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:26:54.617

根据您对其他答案的评论，尝试一下：

```
^[a-z]+(?:[ -][a-z]+)*\s+\d+H\s+[a-z]+\s+\d{2}-\d{2}-\d{4}\.dwg$ 
```

**解释：**

```
The regular expression:

(?-imsx:^[a-z]+(?:[ -][a-z]+)*\s+\d+H\s+[a-z]+\s+\d{2}-\d{2}-\d{4}\.dwg$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  [a-z]+                   any character of: 'a' to 'z' (1 or more
                           times (matching the most amount possible))
----------------------------------------------------------------------
  (?:                      group, but do not capture (0 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    [ -]                     any character of: ' ', '-'
----------------------------------------------------------------------
    [a-z]+                   any character of: 'a' to 'z' (1 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
  )*                       end of grouping
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  \d+                      digits (0-9) (1 or more times (matching
                           the most amount possible))
----------------------------------------------------------------------
  H                        'H'
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  [a-z]+                   any character of: 'a' to 'z' (1 or more
                           times (matching the most amount possible))
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  \d{2}                    digits (0-9) (2 times)
----------------------------------------------------------------------
  -                        '-'
----------------------------------------------------------------------
  \d{2}                    digits (0-9) (2 times)
----------------------------------------------------------------------
  -                        '-'
----------------------------------------------------------------------
  \d{4}                    digits (0-9) (4 times)
----------------------------------------------------------------------
  \.                       '.'
----------------------------------------------------------------------
  dwg                      'dwg'
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:53:15.620

我会这样做：

```
// This checks for name"(\w)", then space, then 3H (\w{2}), 
// this will only search for two characters, then space
// then date in the form mm-dd-yyyy or dd-mm-yyyy (\d{2}-\d{2}-\d{4})
Regex reg = new Regex(@"(\w*)\s(\w{2})\s(\w*)\s(\d{2}-\d{2}-\d{4})\.dwg");
if(reg.IsMatch(filename))
{
    valid = true;

} 
```

您还可以得到每个组。请注意，我没有正则表达式来验证正确的上课时间（或者我认为是上课时间，“#5,6-11H 和 #4,7,8-11H2 等”部分）。这将提供一个基本框架，然后您可以拉出该组并检查代码。它提供了一个更干净的正则表达式。

编辑：

根据@DaBears 的需要，我提出了以下建议：

```
Regex reg = new Regex(@"(\w*|\w*-\w*|\w*\s\w*)\s(\w{2})\s(\w*)\s(\d{2}-\d{2}-\d{4})\.dwg");
if(reg.IsMatch(filename))
{
    valid = true;

} 
```

这将匹配姓氏、连字符的名称或空格姓氏，并提供他们在组中的任何内容。

# r - 查找每个组的最大值并返回另一列

> ID：12039681
> 
> 赞同：7
> 
> 时间：2012-08-20T14:35:39.637
> 
> 标签：r, matrix, greatest-n-per-group

给定以下测试矩阵：

```
testMatrix <- matrix( c(1,1,2,10,20,30,300,100,200,"A","B","C"), 3, 4)

colnames(testMatrix) <- c("GroupID", "ElementID", "Value", "Name") 
```

在这里，我想找到每组的最大值，然后返回该列的名称。例如，我希望 1、A 和 2、C。如果与 max 有平局，那么第一场比赛就可以了。之后，我必须使用新列“GroupName”将其附加到矩阵

我怎样才能做到这一点？

我已经有了 Group, Max Value 组合：

```
groupMax <- aggregate (as.numeric(testMatrix[,3]), by=list( testMatrix[,1] ), max ) 
```

我用来向矩阵添加列的方式是这样的（假设已经有一个矩阵 groupNames 与 GroupID、名称组合）：

```
testMatrix <- cbind ( testMatrix, groupNames[match( testMatrix[,1], groupNames[,1] ), 2] ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T01:17:06.407

`data.table`时间和内存效率以及语法优雅的解决方案

```
library(data.table)
DT <- as.data.table(testMatrix)
DT[,list(Name = Name[which.max(Value)]),by = GroupID] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T15:35:35.407

基本解决方案，不像 Dan M 的那么简单：

```
testMatrix <- data.frame(GroupID = c(1,1,2), ElementID = c(10,20,30), 
    Value=c(300,100,200), Name=c("A","B","C"))

A <- lapply(split(testMatrix, testMatrix$GroupID), function(x) {
        x[which.max(x$Value), c(1, 4)]
    }
)
do.call(rbind, A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:22:08.040

正如@Tyler 所说， data.frame 更容易使用。这是一个选项：

```
testMatrix <- data.frame(GroupID = c(1,1,2), ElementID = c(10,20,30), Value=c(300,100,200), Name=c("A","B","C"))
ddply(testMatrix, .(GroupID), summarize, Name=Name[which.max(Value)]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T03:44:15.350

我想出了一个通过 dplyr 做到这一点的好方法

```
filter(group_by(testMatrix,GroupID),min_rank(desc(Value))==1) 
```

# python - 转json还是不转json

> ID：12039689
> 
> 赞同：1
> 
> 时间：2012-08-20T14:36:01.180
> 
> 标签：python, django, json

Django 和 Python 的新手。

我使用 MySQL 作为后端。我有两个视图：调用 tableA 中所有记录的无限滚动调用和查询 tableB 并从列返回匹配记录的自动完成字段。

我的无限滚动和自动完成功能是在网络上各种不同教程的帮助下创建的。

在我的无限滚动中，我目前正在返回一个 render_to_response 对象（我基于 Django 初学者教程）。我的自动完成返回 simplejson（我基于我搜索的一些文章）。

他们都从数据库返回记录，所以响应不应该相似吗？我什么时候应该使用 json（或 simplejson，就我而言），什么时候不应该使用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:51:37.653

这完全取决于你想要做什么。 `render_to_response`将一些数据传递给模板以呈现 HTML 文档。简单地使用 JSON 对象进行响应将返回一个 JSON 对象。如果你想向人们展示一个可用的页面，那么使用`render_to_response`. 如果您只是将一些数据传递给 jQuery 元素，那么简单地返回 a`simplejson.dumps()`是完全有效的。还有其他返回 JSON 的方法，但这是迄今为止最简单和最强大的方法。

为了解释更多，如果您详细说明无限滚动视图是什么，将会有所帮助。

# node.js - Socket.IO node.js websocket连接无效端口8081

> ID：12039690
> 
> 赞同：4
> 
> 时间：2012-08-20T14:36:01.623
> 
> 标签：node.js, socket.io

我在这个论坛上看到了一些关于 Socket.IO 和 node.js 的帖子。但仍不能以最佳方式工作。

我的网络服务器将端口 80 和端口 8080 用于不同的应用程序。所以在 App.js 和我的套接字连接中，我添加了端口 8081 而不是 8080。

我收到 websocket 连接无效消息。大约 10 秒后，它创建了 websocket，我可以很好地使用它。

但是10秒太长了。任何想法如何解决这一问题？

脚本.js：

```
 <script>
var socket = io.connect('http://domainname.nl:8081');

socket.on('connect', function(){

socket.emit('adduser', "<?php echo $user->first_name; ?>");
}); 
```

应用程序.js

```
var app = require('express').createServer()
var io = require('socket.io').listen(8081);

app.listen(8081);

// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
}); 
```

更新：

当我改变它时。我仍然有问题。套接字工作，但需要 10 秒才能连接

```
 info  - socket.io started
   debug - served static /socket.io.js
   debug - client authorized
   info  - handshake authorized 15619940591959058675
   debug - setting request GET /socket.io/1/websocket/15619940591959058675
   debug - set heartbeat interval for client 15619940591959058675
   warn  - websocket connection invalid
   info  - transport end
   debug - set close timeout for client 15619940591959058675
   debug - cleared close timeout for client 15619940591959058675
   debug - cleared heartbeat interval for client 15619940591959058675
   debug - client authorized for
   debug - setting request GET /socket.io/1/xhr-polling/15619940591959058675?t=1345479037596
   debug - setting poll timeout
   debug - clearing poll timeout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:38:56.207

您实际上是在尝试启动两台不同的服务器，一台用于您的服务器，一`app`台用于 socket.io，两者都使用相同的端口`8081`：

```
var app = require('express').createServer()
var io = require('socket.io').listen(8081);

app.listen(8081); 
```

您可以像这样将端口号传递给 socket.io，但如果您要使用节点 http 服务器运行它，您应该传递该端口号（即`app`）以进行侦听，如下所示：

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8081); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:03:31.407

通过代理连接时我遇到了同样的问题。

我的服务器（express + socket.io，就像@Linux G Thiel 描述的那样）在监听，`app.example.com:12345`并且设置了一个代理来在`example-app.com`（端口 80）处提供服务。通过实际 URL 访问时它可以正常工作，但通过代理访问时 websocket 连接出现 10 秒延迟。

我已经设法通过简单地改变来解决它

```
var socket = io.connect();` 
```

到

```
var socket = io.connect('http://app.example.com:12345') 
```

在客户端代码中。

# ios - 如何在 UITSplitViewController 应用程序中显示全屏视图？

> ID：12039691
> 
> 赞同：0
> 
> 时间：2012-08-20T14:36:00.843
> 
> 标签：ios, uipopovercontroller, modalviewcontroller

我有一个基于 UISplitView 项目模板的应用程序。它工作得很好。

但现在我想要一个全屏视图，比如模态视图。如何做到这一点，使其占据整个屏幕空间？

如果不可能，我想我可以创建一个 UIPopover 视图并让它填满整个屏幕，尽管我真的希望视图占据整个屏幕（没有弹出类型的视图边界）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:50:42.713

也许我遗漏了一些东西，但你不能只创建一个视图控制器并以模态方式呈现它吗？它适用于 splitview 控制器。换句话说：

```
 MyModalController *mc = [[MyModalController alloc] initWithNibName:@"MyModalController" bundle:nil];
    [self presentModalViewController:mc animated:YES];
    [mc autorelease]; 
```

# c# - C# 中的 Thread.Sleep()

> ID：12039695
> 
> 赞同：5
> 
> 时间：2012-08-20T14:36:11.043
> 
> 标签：c#, winforms

我想在 C# [Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)中制作一个图像查看器，它会在几秒钟后一张一张地显示图像：

```
i = 0;

if (image1.Length > 0) //image1 is an array string containing the images directory
{
    while (i < image1.Length)
    {
        pictureBox1.Image = System.Drawing.Image.FromFile(image1[i]);
        i++;
        System.Threading.Thread.Sleep(2000);
    } 
```

当程序启动时，它会停止并只显示第一张和最后一张图像。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T14:38:23.137

Thread.Sleep 会阻止您的 UI 线程使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)代替。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-20T14:49:45.140

使用计时器。

首先声明您的 Timer 并将其设置为每秒滴答一次，`TimerEventProcessor`当它滴答作响时调用。

```
static System.Windows.Forms.Timer myTimer = new System.Windows.Forms.Timer();
myTimer.Tick += new EventHandler(TimerEventProcessor);
myTimer.Interval = 1000;
myTimer.Start(); 
```

您的类将需要 image1 数组和一个 int 变量`imageCounter`来跟踪 TimerEventProcessor 函数可访问的当前图像。

```
var image1[] = ...;
var imageCounter = 0; 
```

然后在每个刻度上写下你想要发生的事情

```
private static void TimerEventProcessor(Object myObject, EventArgs myEventArgs) {
    if (image1 == null || imageCounter >= image1.Length)
        return;

    pictureBox1.Image = Image.FromFile(image1[imageCounter++]);
} 
```

像这样的东西应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:38:45.280

是的，因为`Thread.Sleep`在 2s 期间阻塞了 UI 线程。

请改用计时器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-13T19:43:28.640

如果您想避免使用`Timer`和定义事件处理程序，您可以这样做：

```
DateTime t = DateTime.Now;
while (i < image1.Length) {
    DateTime now = DateTime.Now;
    if ((now - t).TotalSeconds >= 2) {
        pictureBox1.Image = Image.FromFile(image1[i]);
        i++;
        t = now;
    }
    Application.DoEvents();
} 
```

# javascript - 相关下拉列表的数据验证

> ID：12039699
> 
> 赞同：1
> 
> 时间：2012-08-20T14:36:23.760
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation

我正在寻找解决以下问题的最佳方法：我有一个包含多个下拉列表的表单，这些下拉列表基于先前下拉列表中的选择进行填充（或未填充）。填充列表后，这些字段将被启用并且是必需的。当列表未填充时，字段被禁用，因此不需要。数据存储在 SQL 数据库中。我已将 System.ComponentModel.DataAnnotations 中的 [Required] 属性应用于每个字段。这在客户端工作正常，但是当我尝试将模型保存到数据库时，我收到每个禁用字段的 dbValidationErrors。

理想情况下，我想从依赖列表中删除 [Required] 属性，以便将模型保存到数据库中。然后我只需要一种方法来利用 MVC 的客户端验证在客户端切换字段的要求。这将在每个必填字段之间保持一致的样式。[这个链接](https://stackoverflow.com/questions/8975809/how-to-make-a-field-required-without-data-annotation)似乎符合我正在寻找的内容。这是我的代码：

```
function enableValidation(id, formId) {
    document.getElementById(id).setAttribute('data-val-required', '');
    document.getElementById(id).setAttribute('data-val', 'true');
    document.getElementById(id).setAttribute('class', 'input-validation-error');
    $.validator.unobtrusive.parse($(formId));
}

function disableValidation(id, formId) {
    document.getElementById(id).removeAttribute('data-val-required');
    document.getElementById(id).removeAttribute('data-val');
    document.getElementById(id).removeAttribute('class');
    $.validator.unobtrusive.parse($('#'+formId));
} 
```

不幸的是，这并不能验证何时提交表单。我错过了什么吗？

我愿意接受您可能提出的任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:53:53.010

根据请求：

您可以使用视图模型并将数据注释放在那里而不是您的域模型上。这样，您的数据库就不会知道 [Required] 过滤器。您的客户端验证将保持不变。然后，您可以使用 ModelState 属性在控制器中执行服务器端检查。

# javascript - Javascript Google 样式分页菜单

> ID：12039701
> 
> 赞同：1
> 
> 时间：2012-08-20T14:36:29.673
> 
> 标签：javascript, pagination

通过 Javascript 正确显示分页菜单的数学运算让我发疯了。希望比我更了解这一点的人可以帮助我。

我只需要了解如何使用 javascript 在客户端正确显示分页菜单。

假设我总共有**10 个项目**。

我想一次显示的最大值是**1**。

菜单应该显示**5 个数字**，如果我们不在最后一组数字上，最后一个数字应该是带有 ... 的最后一页。

所以例如**< 1 2 3 4 ... 10 >**

用户点击 2 - 起始编号应为 1，最后 4 < 1 **2** 3 4 ... 10 >

用户点击 4 - 起始编号应为 2，最后 5 < 2 3 **4** 5 ... 10 >

用户点击 5 - 开始应该是 3，最后 6 < 3 4 **5** 6 ... 10 >

用户点击 7 - 我们在最后一组，所以 < 6 **7** 8 9 10 >

到目前为止，我所拥有的是：

```
var pages = Math.ceil(count / amount);
var maxIterations = 5;
var iterations = Math.min(pages, maxIterations);
var offset = Math.max(0, page-Math.round(maxIterations/2));
for(var i=0; i<iterations; i++) {
    var label = page + i;
    if(i == maxIterations-1) label = pages; //Last page number
    paginatorObjects.push({label: label}); //This create the menu button
} 
```

基本上，我需要数字在用户点击它们时上下迭代（谷歌是如何做到的），而不必使用箭头按钮。我知道 jQuery 为这类事情提供了一个不错的插件，但这必须在 vanilla javascript 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-31T01:14:30.600

这个问题也让我摸不着头脑，我最近不得不为 AngularJS 应用程序实现它，但分页逻辑是纯 javascript。

[在http://codepen.io/cornflourblue/pen/KVeaQL](http://codepen.io/cornflourblue/pen/KVeaQL)上有一个关于 CodePen 的工作演示

我还写了[这篇博文](http://jasonwatmore.com/post/2016/01/31/AngularJS-Pagination-Example-with-Logic-like-Google.aspx)，提供了更多细节

这是分页逻辑

```
function GetPager(totalItems, currentPage, pageSize) {
    // default to first page
    currentPage = currentPage || 1;

    // default page size is 10
    pageSize = pageSize || 10;

    // calculate total pages
    var totalPages = Math.ceil(totalItems / pageSize);

    var startPage, endPage;
    if (totalPages <= 10) {
        // less than 10 total pages so show all
        startPage = 1;
        endPage = totalPages;
    } else {
        // more than 10 total pages so calculate start and end pages
        if (currentPage <= 6) {
            startPage = 1;
            endPage = 10;
        } else if (currentPage + 4 >= totalPages) {
            startPage = totalPages - 9;
            endPage = totalPages;
        } else {
            startPage = currentPage - 5;
            endPage = currentPage + 4;
        }
    }

    // calculate start and end item indexes
    var startIndex = (currentPage - 1) * pageSize;
    var endIndex = startIndex + pageSize;

    // create an array of pages to ng-repeat in the pager control
    var pages = _.range(startPage, endPage + 1);

    // return object with all pager properties required by the view
    return {
        totalItems: totalItems,
        currentPage: currentPage,
        pageSize: pageSize,
        totalPages: totalPages,
        startPage: startPage,
        endPage: endPage,
        startIndex: startIndex,
        endIndex: endIndex,
        pages: pages
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T04:31:59.233

What I ended up doing is this. This is directly from my source code, so there is some templating logic that doesn't make sense, but anyone who might be reading this in the future should be able to adjust according to their needs.

```
function paginate() {
    var paginator = sb.find('#' + moduleName + 'Pagination')[0];
    var container = paginator.getElementsByClass('container')[0];
    sb.dom.clearAll(container);
    if(count && count > 0) {
        sb.dom.removeClass(paginator, 'hidden');
        var pages = Math.ceil(count / amount);
        var maxIterations = 5;
        var iterations = Math.min(pages, maxIterations);
        var paginatorObjects = [];
        var center = Math.round(maxIterations/2);
        var offset = page-center;
        if(page < center) offset = 0; //Don't go lower than first page.
        if(offset + iterations > pages) offset -= (offset + iterations) - pages; //Don't go higher than total pages.
        for(var i=0; i<iterations; i++) {
            var label = (i+1) + offset;
            paginatorObjects.push({label: label});
        }
        sb.template.loadFrom(templateUrl, 'paginator').toHTML(paginatorObjects).appendTo(container, function(template) {
            var pageNumber = template.obj.label;

            if(pageNumber != page) {
                sb.addEvent(template, 'click', function() {                     
                    getAppointments(pageNumber);
                });
            } else {
                sb.dom.addClass(template, 'highlight');
            }               
        });

        if(offset + iterations < pages) {
            var dots = document.createTextNode(' ... ');
            container.appendChild(dots);
            sb.template.loadFrom(templateUrl, 'paginator').toHTML({label: pages}).appendTo(container, function(template) {
                sb.addEvent(template, 'click', function() {
                    getAppointments(pages);
                });
            });
        }

        var backBtn = paginator.getElementsByClass('icon back')[0];
        var forwardBtn = paginator.getElementsByClass('icon forward')[0];

        sb.removeEvent(backBtn, 'click');
        sb.removeEvent(forwardBtn, 'click');

        if(page - 1 > 0) {              
            sb.dom.removeClass(backBtn, 'hidden');
            sb.addEvent(backBtn, 'click', function() {
                getAppointments(page-1);                    
            });
        } else {
            sb.dom.addClass(backBtn, 'hidden');
        }

        if(page + 1 <= pages) {
            sb.dom.removeClass(forwardBtn, 'hidden');               
            sb.addEvent(forwardBtn, 'click', function() {
                getAppointments(page+1);                    
            });
        } else {
            sb.dom.addClass(forwardBtn, 'hidden');
        }

    } else {            
        sb.dom.addClass(paginator, 'hidden');
    }
} 
```

When getAppointments() is called from the buttons, I use AJAX to get the next pages results, then this pagination() function is called again from that function so everything gets reset. The variables that determine the amount to show per page and the current page number are global (to the container function) and are not shown in this code sample.

The logic behind this is fairly simple. The center is determined (in my case the max it shows at once is 5, so the center is 3) and then an offset is calculated based on the page number. Clicking 4 will adjust the start number +1, and 2 would adjust it -1.

# haskell - 确定已加载目标的 ModuleName

> ID：12039704
> 
> 赞同：3
> 
> 时间：2012-08-20T14:36:44.393
> 
> 标签：haskell, ghc, ghc-api

我想知道您如何`ModuleName`使用 API 确定您刚刚在 ghc 中加载的文件。

如果您查看 API 的[文档](http://www.haskell.org/haskellwiki/GHC/As_a_library)，他们总是假设您在加载文件之前知道模块名称。

我尝试对依赖图进行顶部排序并在那里选择最后一个模块，但这似乎并不总是返回加载的文件。

我之前能够做到的方法是修改 GHC 源代码以将此信息存储在`HscEnv`.

如果调用`load`返回它会很好，但肯定有办法做到这一点，因为 GHCi 在加载文件时知道这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:25:10.077

该`haskell-src-exts`包具有类型为 的[parseFile](http://hackage.haskell.org/packages/archive/haskell-src-exts/1.13.3/doc/html/Language-Haskell-Exts.html#v%3aparseFile)函数`parseFile :: FilePath -> IO (ParseResult Module)`。该`Module`类型有一个模块名称字段。

# .net - 使用修饰符查找字体的全名（如字体文件夹中所示）

> ID：12039708
> 
> 赞同：1
> 
> 时间：2012-08-20T14:37:04.603
> 
> 标签：.net, windows, fonts

我需要能够找到字体的完整文件名，或者只是它的完整字体名称，如 windows/fonts 文件夹中所示。

例如，如果您使用字体对话框选择 Arial，您可以选择粗体、斜体或粗斜体。返回的字体对象将仅具有名称“Arial”，但它将在字体文件夹中使用的实际字体将是“Arial Bold”，并且 .ttf 将是 Arialbd.ttf 而不是简单的 Arial.ttf

作为最终结果，我需要字体的实际文件名，但我可以使用带有全名的注册表来获取它。所以我需要能够从选定的字体中得到它。

注意：我知道可以手动将“粗体”或“斜体”附加到末尾，但并非**所有**字体最后都使用这些。例如，我有一种安装字体，其中斜体版本的全名不是斜体，而是以“斜体”结尾。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:13:33.450

I don't know the .Net way. With GDI, you can query for the [OUTLINETEXTMETRICS](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144906%28v=vs.85%29.aspx) of the selected font (assuming it's a TrueType or OpenType font). The `otmFaceName` field gives the full name. You can then query the registry for the file name.

If it's not a TrueType of OpenType font, then you can probably use [GetTextFace](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144940%28v=vs.85%29.aspx) and look that up in the registry. I see a few non-outline fonts in the registry, but not all of them.

There may be another way.

# iphone - iOS 应用最高 iOS 版本支持

> ID：12039718
> 
> 赞同：1
> 
> 时间：2012-08-20T14:37:40.123
> 
> 标签：iphone, ios

我已经在`Xcode 4.1`iOS SDK 版本（Base SDK 版本）中 开发了我的应用程序，`iOS 4.3`所以，这个应用程序是否可以在 iPhone 上运行`iOS 5`和/`iOS 6`或不运行？

我认为该应用程序可以在比`Deployment Target`. 这是正确的吗？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:39:28.133

是的，您的应用程序可以在 iOS 4.3 或更高版本的任何设备上运行。也就是说，假设您没有使用从未来 iOS 版本中删除的任何折旧方法。您可以通过文档检查物品是否已折旧/删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:42:02.847

无论您使用哪个 Xcode 构建您的应用程序，基本 SDK 都表示您的应用程序支持的最低系统。

您的应用程序可以并且将在较新的系统上运行。

如果您想对您的应用程序进行更新，您需要注意较新系统的折旧方法，否则您将被拒绝并且无法在 App Store 中更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T14:40:40.153

是的，它肯定会在比部署目标更高的版本中运行。但是，始终建议在新版本发布时也运行它们，以检查使用的每个 API 是否仍然运行良好（特别是如果它们已被弃用）。

# gwt - 在 gwt treeitem 中设置自己的元素 id（或至少部分）

> ID：12039720
> 
> 赞同：1
> 
> 时间：2012-08-20T14:37:45.303
> 
> 标签：gwt

我们的 selenium 测试基于“gwt-debug-ids”——如果我想识别一个元素，我通过 uibinder 或 ensureDebugId 方法设置 id。但这在树项上失败了。似乎 gwt 为每个树项生成自己的 ID。`ensureDebugId("id")`并且`getElement.setId("id")`不起作用。我猜ID是在渲染时生成的？！在我的情况下，每个树项都与具有自己 ID 的数据对象相关联。我需要 treeitem id 是我自己的 id 或者至少这个 id 必须是结果 id 的一部分。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:57:20.073

在[GWT 文档](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/TreeItem.html)中它说：

*可以包含在树中的项目。为了支持 ARIA，每个树项都被分配了一个唯一的 DOM id。有关详细信息，请参阅辅助功能。*

ARIA 代表[Accessible Rich Internet Applications](http://en.wikipedia.org/wiki/WAI-ARIA)一种规范，用于通过一组标准的 DOM 属性使 Web 应用程序可访问。

# c++ - 继承基类，定义基类的原型方法，但从第三个对象调用子类的方法

> ID：12039728
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:38:05.367
> 
> 标签：c++, inheritance, polymorphism, prototype, base-class

我有一个名为“Game”的类，具有原型函数“Update”和“Draw”，但它们没有定义。由继承“游戏”对象的对象来覆盖它们。这可能吗？

“Game.h”的内容

```
class Game // does it have to abstract/virtual?
{
    public:
    //General stuff for all games here
}

void Update(Game *game) = 0; // or make it virtual in someway 
```

“MyGame.h”的内容

```
#include "Game.h"

class MyGame : public Game
{
    public:
    // General stuff for my game
}

void Update(MyGame *game); 
```

// “MyGame.cpp”的内容

```
#include "MyGame.h"

void Update(MyGame *game) // does it have to be overriden/overloaded?
{
} 
```

// “GameManager.h”的内容

```
#include "Game.h"

class GameManager
{
    public:
    Game *game;
}

void Update(GameManager *manager); 
```

// “GameManager.cpp”的内容

```
#include "Game.h"

void Update(GameManager *manager)
{
    Update(manager->game);
} 
```

关键是最后一个方法：为什么当GameManager的Game object = MyGame而不是Game时，GameManager不能调用MyGame Update()方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:39:13.157

在基类中定义`Draw`和`Update`作为方法。`virtual``Game`

```
class Game
{
public:
   virtual void Draw() {};
};

class MyGame : public Game
{
public:
   virtual void Draw() {}
};

void callDraw(Game* game) 
{
   game->Draw();
}

//...

Game* game = new MyGame;
callDraw(game); 
```

最后一次调用将调用该方法，`MyGame`尽管它是在`Game`指针上调用的。

# sharepoint - 将文件批量复制到 SharePoint 网站

> ID：12039730
> 
> 赞同：2
> 
> 时间：2012-08-20T14:38:17.213
> 
> 标签：sharepoint, vba, file-upload, vbscript, automation

我在 SO、SU 和[SP.SE](https://sharepoint.stackexchange.com/)中搜索了解决方案，但找不到我需要的东西。我正在寻找可能是脚本**或**其他一些非编码方法/工具的解决方案。

我正在尝试编写一个脚本（供其他人使用）或某种其他形式的自动化来自动将各种报告上传到 SharePoint 网站。我已经设法使以下（VBScript）代码工作，但仅适用于基于文本的文件——在这种情况下为 .CSV，尽管这也适用于 .TXT 等。

```
Option Explicit

Dim sCurPath
sCurPath = CreateObject("Scripting.FileSystemObject").GetAbsolutePathName(".")
UploadAllToSP sCurPath

Sub UploadAllToSP(sFolder)
    Dim fso, folder, fil
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set folder = fso.GetFolder(sFolder)
    For Each fil In folder.Files
        If fso.GetExtensionName(fil) = "csv" Then
            UploadFileToSP fil
        End If
    Next
End Sub

Sub UploadFileToSP(ofile)
    Dim xmlhttp
    Dim sharepointUrl
    Dim sharepointFileName
    Dim tsIn
    Dim sBody

    Set tsIn = ofile.openAsTextstream
    sBody = tsIn.readAll
    tsIn.close
    sharepointUrl = "http://SHAREPOINT URL HERE"

    sharepointFileName = sharepointUrl & ofile.name
    set xmlHttp = createobject("MSXML2.XMLHTTP.4.0")
    xmlhttp.open "PUT", sharepointFileName, false
    xmlhttp.send sBody
    If xmlhttp.status < 200 Or xmlhttp.status > 201 Then
        wscript.echo "There was a problem uploading " & ofile.name & "!"
    End If
End Sub 
```

这仅适用于文本文件，因为它将文本数据通过管道传输到 SP 站点上的文件中。但是，如果我想传输任何类型的二进制文件（.XLS、.PDF），这会导致上传垃圾。

我试图看一下`Shell.Application`==> `.Namespace()`，但这似乎不适用于 URL，而只能用于物理驱动器。这是我尝试过的其他一些内容（修剪以显示相关部分）：

```
Set oApp = CreateObject("Shell.Application")

If oApp.NameSpace(sharepointUrl) <> Null then ' Always Null!
    ' Copy here
    ' Some lines omitted
    oApp.NameSpace(sharepointUrl).CopyHere ofile.Name ' This also fails when not surrounded by the Null check
Else
    MsgBox "SharePoint directory not found!"
End If 
```

我还尝试了使用 xcopy 的批处理文件，但无法连接到`http://`任何一个。我查看了[这种方法](http://my.re-invent.com/helpdesk/KB/a222/how-do-i-copy-many-files-at-once-to-my-sharepoint-2003.aspx)，它可能对我有用，但我不想处理 mapping/ `NET USE`，因为我们公司有多个网络共享，其映射取决于谁登录。

由于这些都不是我需要的方式：**有没有一种方法可以自动化这种功能？**

我有使用 VBA/VBscript 的经验，所以像上面这样的脚本，或者内置在 MS Office 应用程序中的东西（Outlook 是最好的，但我可能可以适应我所得到的任何东西）会更可取。话虽如此，我对任何允许我这样做的方法持开放态度，在 Windows 或 Office 中本地运行。但是，我无权访问 Visual Studio，因此无法使用任何 .NET 功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:37:14.363

感谢[Sean Cheshire](https://stackoverflow.com/questions/12039730/batch-copy-files-to-sharepoint-site#comment16073151_12039730)指出我没有看到的明显答案。发布相关代码，因为我不相信这在 SO 上还存在。

```
Sub UploadFilesToSP(sFolder)

Dim sharepointUrl
Dim sharepointFileName
Dim LlFileLength
Dim Lvarbin()
Dim LobjXML
Dim LvarBinData
Dim PstrFullfileName
Dim PstrTargetURL
Dim fso
Set fso = CreateObject("Scripting.FileSystemObject")
Dim fldr
Dim f

    'This has not been successfully tested using an "https" connection.
    sharepointUrl = "http://SHAREPOINT URL HERE"
    Set LobjXML = CreateObject("Microsoft.XMLHTTP")
    Set fldr = fso.GetFolder(sFolder)

    For Each f In fldr.Files
        sharepointFileName = sharepointUrl & f.Name

        PstrFullfileName = sFolder & f.Name
        LlFileLength = FileLen(PstrFullfileName) - 1

        ' Read the file into a byte array.
        ReDim Lvarbin(LlFileLength)
        Open PstrFullfileName For Binary As #1
        Get #1, , Lvarbin
        Close #1

        ' Convert to variant to PUT.
        LvarBinData = Lvarbin
        PstrTargetURL = sharepointFileName 

        ' Put the data to the server, false means synchronous.
        LobjXML.Open "PUT", PstrTargetURL, False

        ' Send the file in.
        LobjXML.Send LvarBinData
    Next f

Set LobjXML = Nothing
Set fso = Nothing

End Sub 
```

这是 VBA 代码，格式化为主要与 VBScript 一起使用，尽管我无法正确传输此块。作为 VBA，这可以通过分配数据类型等来改进。

```
' Read the file into a byte array.
ReDim Lvarbin(LlFileLength)
Open PstrFullfileName For Binary As #1
Get #1, , Lvarbin
Close #1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T23:01:57.817

这是一个非常古老的帖子，但非常有用，因此感谢大家的贡献。这是我的早期绑定版本。我发现由于 VBA 假设没有声明的变量类型，以前的帖子不起作用。

```
Private Sub cmdUploadToApplicationsAndApprovals_Click()

    Dim strSharePointUrl As String
    Dim strSharePointFileName As String
    Dim lngFileLength As Long
    Dim bytBinary() As Byte
    Dim objXML As XMLHTTP
    Dim varBinData As Variant
    Dim strFullfileName As String
    Dim strTargetURL As String
    Dim fso As FileSystemObject
    Set fso = New FileSystemObject
    Dim folder As folder
    Dim file As file
    Dim strFolder As String

    strFolder = CurrentProject.Path & "\Upload\"

    'This has not been successfully tested using an "https" connection.
    strSharePointUrl = "http://sps.mysite.ca/subsite/DocLib/"
    Set objXML = New XMLHTTP 'CreateObject("Microsoft.XMLHTTP")
    Set folder = fso.GetFolder(strFolder)

    For Each file In folder.Files
        strSharePointFileName = strSharePointUrl & file.Name

        strFullfileName = strFolder & file.Name
        lngFileLength = FileLen(strFullfileName) - 1

        'Read the file into a byte array.
        ReDim bytBinary(lngFileLength)
        Open strFullfileName For Binary As #1
        Get #1, , bytBinary
        Close #1

        'Convert to variant to PUT.
        varBinData = bytBinary
        strTargetURL = strSharePointFileName

        'Put the data to the server, false means synchronous.
        objXML.Open "PUT", strTargetURL, False

        'Send the file in.
        objXML.Send varBinData

        'Now Update the metadata

    Next file

    'Clean up
    Set objXML = Nothing
    Set fso = Nothing
    MsgBox "Done"
End Sub
```

仅供参考，上述代码需要 2 个参考。1\. Microsoft XML，v6.0 2\. Microsoft 脚本运行时

希望这有助于改进已经很出色的答案！

# visual-studio-2010 - TFS 和 VS2010：批准对特定项目的编辑

> ID：12039745
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:00.280
> 
> 标签：visual-studio-2010, tfs, tfs-code-review

我们团队的项目解决方案有几个与之关联的单独项目，其中一个旨在作为我们应用层的底层框架——称之为“FrameworkProject”。只有在极少数情况下才应该编辑此项目的代码，在这些情况下，我希望能够批准对代码的更改。是否有 TFS 功能可以让我实现这一目标？

我们正在使用 VS2010 和 TFS2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:14:05.900

You have several options:

1.  Implement a custom check in policy and work item type. [TFS Code
    Review Workflow](http://tfscodereviewflow.codeplex.com/)
2.  Look at [Team Review](http://teamreview.codeplex.com/)
3.  Implement a process that enforces that any changes must be shelve-set first allowing for a code review. Once the review has
    taken place then based on permission the allowed member checks the
    code into the Project.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:22:27.767

You may create a "working" branch of your framework and revoke checkin rights from the main branch for everyone except the reviewers. When someone needs to do a change, he has to change the working branch and a reviewer then has to merge the changes to the main branch in this step he will review all changes using his preferred diff tool on the mergeset before checkin in. He may revoke the merge and request fixes by simply undoing his working copy and optionally checking in review comments into the working branch.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:24:41.907

以下是其他一些选项：

1.  您可以使用签入锁来阻止签入。您可以通过锁定要保护的顶级目录来做到这一点。现在，如果有人尝试签入，签入将失败，您需要有一个内部流程来查看更改，临时解锁文件夹并允许签入继续进行。
2.  您可能会实施一个门控签到工作流程，当签到提交到给定路径时，它会向您发送一封电子邮件。从那里您可以进行一些批准流程，以完成门控登记。

# php - 灯箱中登录表单的 $.post 函数

> ID：12039746
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:00.763
> 
> 标签：php, jquery, ajax

所以，我在灯箱中设置了一个登录表单。我希望当用户单击提交时，在刷新之前检查用户名和密码是否正确并转到会员页面的功能。它还应该显示灯箱中的错误。

我对 jQuery 部分有疑问，尤其是 $.post 函数。

jQuery代码：

```
 $('#Connection form').submit('Connection',function(){
var Username = $('#UsernameConnection').val();

if(Username=="")
{   
    $('#UsernameConnection').css('border-color','red');
    $('.ErrorUsernameConnection').text('Error 1');
    Username = "Empty Field";
}else

if(Username=="Invalid")
{
    $('#UsernameConnection').css('border-color','orange');
    $('.ErrorUsernameConnection').text('Error 2');
    Username = "Invalid field";
}

var Password = $('#Password Connection').val();

if(Password =="")
{   
    $('#Password Connection').css('border-color','red');
    $('.ErrorPassword Connection').text('Error 3');
    Password = "Empty field";
}
    if((Username==true)&&(Password==true))
    {           
        $.post('fonctions/connection.php',{VALUE1:VALUE2},function(connection)
        {
            $('.ConnectionError').text(connection);

            if(connection=="ok")
            {
                return true;
            }else
            {
                return false;
            }
        });     
    }else
    {   
        return false;
    }
    });
        }); 
```

PHP代码：

```
if(isset($_POST['Connection']))
{   
     all the verifying function goes here.
} 
```

和 HTML：

```
<div id="Connection">
    <div class="formConnection">
    <form method="POST" autocomplete="off" name="Connection">
        <label for="Connection">Username:</label><br/>
        <input type="text" name="UsernameConnection" id="UsernameConnection"/><br/>
        <span class="ErrorUsernameConnection"></span><br/>
        <label for="Connection">Password:</label><br/>
        <input type="password" name="PasswordConnection" id="PasswordConnection"/>
        <span class="ErrorPasswordConnection"></span><br/>
        <input type="checkbox" name="checkbox"/><label>Remember me</label><br/>
        <input type="submit" name="Connection" value="Log In" id="Connection" class="LogIn"/>       
    </form>
    </div>
</div> 
```

我的问题是：

*   这`$.post`是正确的功能吗？如果是，：

*   `var`因为脚本只有在用户点击提交按钮时才会启动，是否需要在 jQuery 中为提交按钮新建一个？

*   `if(isset($_POST['Connection']))`在这种情况下是否需要 php 中的部分，或者我可以立即放置该函数吗？

*   什么应该`VALUE1`和什么`VALUE2`才能起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:25:56.060

我认为这是你想要做的：

```
$('#Connection form').submit('Connection',function(){

    $.ajax({
      type: "POST",
      url: "some.php",
      data: { name: "John", password: "Boston" }
    }).done(function( msg ) {
      alert( "Data Saved: " + msg );
    });

 }); 
```

基本上，您可以序列化您的表单并将其发布到页面。让页面发回一条消息（成功或失败，1 或 0），然后对这些数据进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:33:07.680

我认为你把事情复杂化了。您只想通过 AJAX 发布表单——最简单的方法如下：

```
$('#login-form').submit(function() {
    $.post('login.php', $(this).serialize(), function(response) {
        // do something on success or failure here
    });
    return false;
}); 
```

让您的`login.php`回显一个 JSON 对象，或`true`或`false`，并在您的灯箱或其他任何内容中显示任何错误。

# android - 如何在 Android 中设置自定义时区

> ID：12039753
> 
> 赞同：2
> 
> 时间：2012-08-20T14:39:18.847
> 
> 标签：android, timezone

在我的应用程序中，我根据用户的`TimeZone`. 我允许用户选择世界上不同的城市并获取所需的信息。默认情况下，我将从他们的设备获取用户的时区，使用

```
 `TimeZone myTZ = TimeZone.getDefault();` 
```

一旦用户更改 TimeZone ，我会将其保存在首选项中。从首选项中存储和检索值没有问题。

选择另一个时`TimeZone`，我将该时区设置为默认时区

```
 `TimeZone.setDefault(TimeZone.getTimeZone("my_timezone"));` 
```

当我`TimeZone`在日志中打印时，我得到了`TimeZone`我设置的值。但是当我`TimeZone`在计算中使用它时，我得到了以前的`TimeZone`值。

所以我认为问题是 TimeZone 没有改变，我希望用户将选定的 TimeZone 设置为他们设备中的默认 TimeZone。我该怎么做。我在做什么错误？

被困在这三天。有什么建议可以摆脱这种情况吗？快速建议对我有很大帮助。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:04:53.317

根据文档`TimeZone.setDefault(...)`-

> 仅覆盖当前进程的默认时区。
> 
> **警告：**避免使用此方法在您的流程中使用自定义时区。该值可能随时被清除或覆盖，这可能会导致意外行为。相反，根据需要手动提供自定义时区。

显然要通过代码更改时区，您必须使用 AlarmManager。[请参阅此处](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Jte3RymSOmk%5B1-25%5D)的讨论。

```
AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarm.setTimeZone(timezone); 
```

它需要在清单中设置此权限

```
<uses-permission  android:name="android.permission.SET_TIME_ZONE"></uses-permission> 
```

# asp.net - 为什么 jquery .live() 和 .on() 对于 ASP.NET 更新面板不能按预期工作？

> ID：12039757
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:28.283
> 
> 标签：asp.net, ajax, updatepanel, jquery

我有 1 个页面，其中有 1 个更新面板，其中包含 1 个用户控件（我们称之为 user.ascx）和 2 个按钮。

我的 user.ascx 有一些复选框可以禁用/启用其他控件。我在添加到 user.ascx 的 javascript 中执行此操作，但是当 updatepanel 更新（单击这 2 个按钮中的 1 个后的异步回发）时，我的复选框（单击或更改）的 javascript 事件不会被触发。我知道我可以用函数 pageLoad(sender,args) 包装 $().ready() 并且它工作得很好，但根据该页面[http://blog.dreamlabsolutions.com/post/2009/03/25/jQuery- live-and-ASPNET-Ajax-asynchronous-postback.aspx](http://blog.dreamlabsolutions.com/post/2009/03/25/jQuery-live-and-ASPNET-Ajax-asynchronous-postback.aspx)最好使用 live() 函数。

不幸的是，所有可用的绑定事件的方法，如 .click()、.change()、.bind()、.live() 和 .on() 在回发后都无法在异步回发后工作。

不起作用的代码示例：

```
<script type="text/javascript">
         $().ready(function () {
    var ddlAge= $("#<%= ddlAge.ClientID %>");
    var cboxFirst= $("#<%= cboxFirst.ClientID %>");
    var cboxSecond= $("#<%= cboxSecond.ClientID %>");

          $(document).on("change", cboxFirst, function () {
                if (cboxFirst.is(":checked")) {
                    ddlAge.attr("disabled", "disabled");
                    ddlAge.val("");
                }
                else { ddlAge.removeAttr("disabled");  }
            });

          cboxSecond.live('change',function () {
                if (cboxSecond.is(":checked")) {
                    ddlAge.attr("disabled", "disabled");
                    ddlAge.val("");
                }
                else { ddlAge.removeAttr("disabled");  }
            });

});
</script> 
```

两个复选框仅在回发后起作用。我可能会做错什么？有没有人有这样的问题？我正在使用 Jquery 1.7.1，但没有收到任何 js 错误。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:19:29.703

我很惊讶这些`.on`作品。根据文档[http://api.jquery.com/on/](http://api.jquery.com/on/)它的第二个参数应该是选择器字符串而不是 jquery 对象。

我会尝试这样的事情：

```
$(document).on("change", "#<%= cboxFirst.ClientID %>", function () {
    if ($(this).is(":checked")) {
         ddlAge.attr("disabled", "disabled");
         ddlAge.val("");
    }
    else { ddlAge.removeAttr("disabled");  }
}); 
```

只要 ClientID 保持不变，即使 UpdatePanel 替换了其所有内容，该事件仍然有效。

此外，`.live`已被弃用，或`.on`

# php - 在自动刷新期间保留会话名称，但不是永远

> ID：12039758
> 
> 赞同：2
> 
> 时间：2012-08-20T14:39:39.000
> 
> 标签：php, session, refresh, destroy

我知道这已经被讨论了很多，但我似乎无法找到解决我的问题的方法：

我有一个密码，它使用如下形式传递给新的 php 文件：

```
<form method="POST" action="test.php">
Password: <input type="password" name="password" size="15" />
</form> 
```

在 test.php 文件中，我创建了一个会话，然后使用 POST 获取密码，如下所示：

```
session_name('first'); 
session_start('first');

if (isset($_SESSION['pass_s'])) 
{
   $_SESSION['pass_s'] = $_SESSION['pass_s'];
} else 
{
   $_SESSION['pass_s'] = $_POST['password'];
}  
$pass = $_SESSION['pass_s']; 
```

但我也用以下内容刷新了这个页面：

```
 $page = "test.php";
 $sec = 60;
 header("Refresh: $sec; url=$page"); 
```

问题是，无论如何会话都保持设置，因此在新登录时启动旧会话。我在命名我的会话和刷新我的页面之间陷入困境。由于刷新，我无法销毁会话，但我也无法保留会话。我相信我被保存在饼干里。

我基本上需要在页面退出时销毁会话，但不是在页面上运行刷新时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:49:27.543

首先， session_start 没有参数，如您所见：[http ://www.php.net/manual/es/function.session-start.php](http://www.php.net/manual/es/function.session-start.php)

其次，php 会话有生命周期。session.gc_maxlifetime 指令（“gc”用于垃圾收集）在 php.ini 中的默认值为 1440 秒或 24 分钟。请参阅手册中的会话运行时配置页面。

然后，如果你想关闭你的会话，只需使用 session_destroy 或 unset($_SESSION['pass_s'])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:50:56.000

好吧，我想通了。无需会话。这是你要做的：

```
if ($_POST["password"] != "")
{
    $passb = $_POST["password"];
    $userb = $_POST["username"];

}
else
{
    $userb = $_GET["userb"];
    $passb = $_GET["passb"];

}

$urllink = "60;url=thisPage.php?userb=".$userb."&passb=".$passb; 
```

然后插入

```
<META HTTP-EQUIV="refresh" CONTENT=<?php echo $urllink?>> 
```

这将每 60 秒刷新一次

基本上，您检查变量是否已发布。然后你把它放在一个链接中并在刷新时发送给自己。这仍然需要更好的安全性，但就像一个魅力

# opencv - Cvknearest 的 Mat* 输入

> ID：12039759
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:39.890
> 
> 标签：opencv

正如我们所知，CvKnearest 邻居以这种方式获取输入

`CvKNearest::CvKNearest(const Mat& trainData, const Mat& responses, const Mat& sampleIdx=Mat(), bool isRegression=false, int max_k=32 )`
或以这种方式

`CvKNearest::CvKNearest(const CvMat* trainData, const CvMat* responses, const CvMat* sampleIdx=0, bool isRegression=false, int max_k=32 )`

但是我有两个 cv::Mat* 用于 trainData 和响应。我如何将它们转换为匹配 CvKnearest 的这两种输入格式之一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:07:42.837

您可以取消引用您拥有的指针并使用第一个。

例如，如果你有`cv::Mat* myTrainData`and `cv::Mat* myResponses`，那么：

```
CvKNearest::CvKNearest(*myTrainData, *myResponses, const Mat& sampleIdx=Mat(), bool isRegression=false, int max_k=32 ) 
```

# javascript - 将 onclick 事件附加到具有一个元素的下拉列表

> ID：12039760
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:45.053
> 
> 标签：javascript, kendo-ui

我有一个下拉菜单。最初它是空的，在某些时候它会动态地填充元素。当用户选择一个选项时，会触发 onchange 事件。当下拉列表中至少有两个值时，此方法有效。

我想要完成的是，当下拉列表中只有一个元素并且用户单击它时，会触发一些事件。我尝试了 onclick 事件，但这在下拉列表中不起作用。

这是我的jsfiddle：

[http://jsfiddle.net/MwHNd/551/](http://jsfiddle.net/MwHNd/551/)

某些选项可能是在下拉菜单中具有默认值，例如“选择一个选项”，这样 onchange 将始终触发。没有这个选项有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:46:18.140

文档是你的朋友：

*   [http://www.kendoui.c​​om/documentation/ui-widgets/dropdownlist/events.aspx](http://www.kendoui.com/documentation/ui-widgets/dropdownlist/events.aspx)

示例：http: [//jsfiddle.net/MwHNd/553/](http://jsfiddle.net/MwHNd/553/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:47:36.180

好吧，它不是那么简单，有两种方法可以做到这一点，都需要 if 语句..您可以在 js 中“动态地”查看选择器中有多少选项并告诉它将元素更改为如果您的下拉菜单中只有一个元素，则使用按钮或使用 jquery 执行焦点功能 `$selector.focus(function(){` 然后您想要的任何内容等等，您还说您不想通过下拉菜单执行此操作。使用 javascript 函数单击事件加上您想要的选项值的选定索引

```
function change(){
    document.getElementById("your-element").selectedIndex =2;
}
function changeit(){
    document.getElementById("your element").selectedIndex =1;
}
function changeitup(){
    document.getElementById("your element").selectedIndex =0;
} 
```

所以如果你想要选择的索引加上你想要做的事件

`<input type='button' onclick="change();otherfunction()">`会给你选择的索引加上你最初想要的功能

# ruby-on-rails-3 - rails actionmailer 多个收件人

> ID：12039761
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:48.173
> 
> 标签：ruby-on-rails-3, actionmailer

在我的 Rails 应用程序中，我想使用 ActionMailer 向多个收件人发送电子邮件。下面是我编写的适用于单个属性的代码：

```
 def new_call(medic, call)
    @call = call
    @medic = medic

    mail to: @medic.medic_email, subject: "New Call: #{@call.incident_number}"
  end 
```

我想包括@medic.medic_sms 将消息发送到他们的手机。我尝试了以下代码，但它不起作用。

```
 def new_call(medic, call)
    @call = call
    @medic = medic

    mail to: @medic.medic_email, @medic.medic_sms, subject: "New Call: #{@call.incident_number}"
  end 
```

有人可以建议如何干净地添加第二个属性以便它工作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:27:04.113

将这两个属性放入一个数组中解决了这个问题。

[@medic.medic_email，@medic.medic_sms]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:15:48.997

您有语法错误。如果要将数组传递给`to:`，则需要将其显式包装在`[]`：

```
mail to: [@medic.medic_email, @medic.medic_sms], subject: ... 
```

请参阅[ActionMailer 基础](http://guides.rubyonrails.org/action_mailer_basics.html)部分[2.3.4：向多个收件人发送电子邮件](http://guides.rubyonrails.org/action_mailer_basics.html#sending-email-to-multiple-recipients)。

# jboss - 在 jboss 6 下使用我的 log4j

> ID：12039763
> 
> 赞同：7
> 
> 时间：2012-08-20T14:39:49.253
> 
> 标签：jboss, log4j, jboss6.x

我想在 JBOSS6 上部署我的 Web 应用程序。应用程序本身有效，但日志记录无效。我使用 log4j 并在我的战争中添加了一个 jboss-deployment-structure.xml。内容是

```
<jboss-deployment-structure>
<deployment>
    <!-- Exclusions allow you to prevent the server from automatically adding some dependencies -->
    <exclusions>
        <module name="org.apache.log4j" />
        <module name="org.jboss.logging" />
    </exclusions>
</deployment> 
```

在我的 log4j.xml 我有

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "dtd/log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
<appender name="LogAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="C:\\logs\\web.log"/>
    <param name="MaxFileSize" value="10000KB"/>
    <param name="MaxBackupIndex" value="10"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%x %-5p [%d{yyyyMMdd HH:mm:ss}] - %c:%L - %m%n"/>
    </layout>
</appender>

<logger name="be.sofico.web">
    <level value="debug" />
    <appender-ref ref="LogAppender" />
</logger> 
```

这一切都适用于tomcat和websphere（当我最后设置类加载父级时）

我怎样才能让它在 JBOSS 6 上工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T08:51:30.287

我通过以下方式解决了我的问题：将 jboss-deployment-structure.xml 放入 web\META-INF 中，并在文件中添加以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
  <deployment>
    <exclusions>
        <module name="org.apache.log4j" />
        <module name="org.apache.commons.logging" />
    </exclusions>
  </deployment>
</jboss-deployment-structure> 
```

并将其添加到服务器的启动中：-Dorg.jboss.as.logging.per-deployment=false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T23:27:31.120

为了在类路径中正确设置我的 log4j，我做了两件事：

1）我将log4j的名称设置为这样使用

```
-Dlog4j.configuration=fox-log4j.xml 
```

这个必须在`CLASSPATH`

2）我明确调用日志管理器，否则 jboss log4j 将无法工作

这在我的 run.conf 中给出：

```
#parameter used by the JVM and call later in the log4j.xml
LOG_FOLDER=$DIRNAME/../server/default/log
#jvm options
JAVA_OPTS="-Xms256m -Xmx4096m -XX:MaxPermSize=1024m -Dlog4j.configuration=fox-log4j.xml \
-Dfile.encoding=UTF-8 -Dfile.io.encoding=UTF-8 -DjavaEncoding=UTF-8 -Djboss.platform.mbeanserver \
-Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl \
-Djava.util.logging.manager=org.jboss.logmanager.LogManager \
-Dorg.jboss.logging.Logger.pluginClass=org.jboss.logging.logmanager.LoggerPluginImpl \
-DLOG_FOLDER=$LOG_FOLDER" 
```

现在是我的一部分 log4j ：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

 <appender name="FOX_LOG" class="org.apache.log4j.RollingFileAppender">
  <param name="Threshold" value="DEBUG"/>
  <param name="Append" value="true"/>
  <param name="MaxFileSize" value="25MB"/>
  <param name="MaxBackupIndex" value="5"/>
  <param name="File" value="${LOG_FOLDER}/fox.log"/>
  <layout class="org.apache.log4j.PatternLayout">
   <param name="ConversionPattern" value="%d{ISO8601} %-15x %t %-5p %-50.50c{1} - %m%n"/>
  </layout>
 </appender>

 <category name="com.mycompany" additivity="true">
    <priority value="DEBUG"/>
    <appender-ref ref="FOX_LOG"/>
 </category>

  <root>
    <priority value="INFO"/>
    <appender-ref ref="FILE"/>
 </root>
</log4j:configuration> 
```

希望这会有所帮助。问候

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-14T20:29:43.207

这意味着它没有加载您的 log4j.xml。xml 文件位置有问题或类加载器找到此 log4j.xml 时出现问题。

# php - 通过 php 中的数字签名批准请求票

> ID：12039765
> 
> 赞同：0
> 
> 时间：2012-08-20T14:39:51.250
> 
> 标签：php, digital-signature, ticket-system

我正在尝试制定一个票务系统，用户可以在其中提出请求。某些请求可能需要用户填写一些可下载的表格，然后可以将其附加到每个请求票并提交。提交后，请求将发送给报告经理以供批准。

我想知道是否有任何用于模拟签名的开源解决方案，即如果请求获得批准，我希望每个 RM 能够对文档进行数字签名。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:48:40.853

我不认为 PHP 是最好的选择，因为您需要的是客户端解决方案而不是基于服务器的解决方案。您应该考虑 Flash、Silverlight、Java 或 HTM5 Canvas

这里有一些快速参考

[http://thomasjbradley.ca/lab/signature-pad/](http://thomasjbradley.ca/lab/signature-pad/)

[http://www.realsignature.com/demo/default.aspx](http://www.realsignature.com/demo/default.aspx)

[http://willowsystems.github.com/jSignature/#/demo/](http://willowsystems.github.com/jSignature/#/demo/)

我希望这有帮助

# java - 从Java中的泛型类型获取类实例

> ID：12039769
> 
> 赞同：1
> 
> 时间：2012-08-20T14:40:00.043
> 
> 标签：java, generics

我有一个方法，我在其中传递一个通用参数。要执行一种必需的方法，我需要相同的类实例。我怎么才能得到它。我正在使用一种解决方法，但我想知道如何获取`Class`实例。

我正在使用的片段是：

```
public <T> T readModelWithId(Class<T> c, Serializable pk) {
    // Some code here.
    T t = (T)session.get(c, pk);
    // Some code here.
    return t;
} 
```

问题是我不想`Class`在此方法中传递实例，因为它与`T`泛型类型的返回类型相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:49:56.623

您无法`T.class`在该方法中获得类似的东西，因此您必须传递 class 参数，因为您需要它从会话中获取模型对象。

此外，这增加了一些额外的“类型安全”。您将强制调用者将返回类型指定为参数，因此返回的类型将不仅仅是“调用者可能期望的任何东西”（尽管我同意这使它变得多余）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:52:25.547

你不能这样做，因为 Java 使用“类型擦除”实现泛型。

[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

看起来你正在做一个通用的 DAO。我在这里做了类似的事情：

[http://www.matthews-grout.co.uk/2012/01/my-generic-hibernate-dao.html](http://www.matthews-grout.co.uk/2012/01/my-generic-hibernate-dao.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:27:58.547

你不能用泛型做任何你不能用强制转换来做非泛型的事情。考虑代码的非通用版本：

```
public Object readModelWithId(Class c, Serializable pk) {
    // Some code here.
    Object t = session.get(c, pk);
    // Some code here.
    return t;
} 
```

现在问同样的问题，你能摆脱类实例参数`c`吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T14:47:55.250

泛型更多地用于编译时类型安全 - 您需要类实例，因此编译器不会抱怨缺少强制转换。或者，您可以完全放弃泛型并转换结果

# windows - 添加的列在添加到 Listview 后保持不可见

> ID：12039772
> 
> 赞同：0
> 
> 时间：2012-08-20T14:40:06.493
> 
> 标签：windows, winapi, user-interface

在我的主窗口过程的 WM_CREATE 消息中，我使用以下代码创建了一个列表视图：

```
hMyList = CreateWindowA( WC_LISTVIEW,TEXT(""), WS_CHILD | WS_VISIBLE |
          LVS_LIST | LVS_TYPEMASK , XPOS(450), YPOS(20), NWIDTH(200),   
          NHEIGHT(200),hWnd,(HMENU) 9876, hInst, NULL); 
```

然后我插入代码以向该列表视图添加一列：

```
LVCOLUMN column;    
column.mask = LVCF_TEXT; 
column.pszText = "Name";
SendMessage(hMyList, LVM_INSERTCOLUMN, NULL, (LPARAM)&column );
//returns 0; so everything is fine 
```

但列没有出现在列表视图中。
问题的根源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:02:19.380

列仅在列表视图的报告/详细信息视图中可见。要在该模式下切换它，您应该向它发布 LVM_SETVIEW 消息，或者在 CreateWindowA 中使用 LVS_REPORT 样式而不是 LVS_LIST。

# ios - CGPattern创建变换

> ID：12039773
> 
> 赞同：1
> 
> 时间：2012-08-20T14:40:08.160
> 
> 标签：ios, core-graphics, quartz-graphics, quartz-2d

我试图在我的视图中使用填充图案作为纹理。我设置了对 CGPatternCreate 的调用，但我不知道要传递什么作为转换。我尝试传递当前矩阵，但这会在旋转下产生奇怪的结果。

我制作了一个示例视图，其中形状顺时针旋转，但图案逆时针旋转。我什至尝试以各种方式缩放 y 轴以改变旋转方向。

```
//
//  TestView.m
//  test
//
//  Created by Blake Hegerle on 8/15/12.
//  Copyright (c) 2012 Blake Hegerle. All rights reserved.
//

#import "TestView.h"

const float RATE = (float)1/60;

void drawPattern(void *info, CGContextRef ctx) {
    CGImageRef img = (CGImageRef)info;

    CGRect bounds = CGRectMake(0, 0, CGImageGetWidth(img), CGImageGetHeight(img));
    CGContextDrawImage(ctx, bounds, img);
}

void releasePattern(void *info) {
    CGImageRef img = (CGImageRef)info;
    CFRelease(img);
}

@implementation TestView

-(void)awakeFromNib
{
    clock = 0;

    [NSTimer scheduledTimerWithTimeInterval:RATE
                                     target:self
                                   selector:@selector(tick:)
                                   userInfo:nil
                                    repeats:YES];
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    // set transform
    CGContextTranslateCTM(ctx, rect.size.width/2, rect.size.height/2);
    CGContextRotateCTM(ctx, clock*RATE/5);

    // get the image
    CGImageRef img = [UIImage imageNamed:@"zebra.jpeg"].CGImage;
    double w = CGImageGetWidth(img), h = CGImageGetHeight(img);
    CFRetain(img);

    // set the pattern transform
    CGAffineTransform t0 = CGContextGetCTM(ctx);
    CGAffineTransform t1 = CGAffineTransformMakeScale(1, -1);
    CGAffineTransform t2 = CGAffineTransformMakeTranslation(0, rect.size.height);
    CGAffineTransform t = CGAffineTransformConcat(t2, CGAffineTransformConcat(t1, t0));

    // create the pattern
    CGPatternCallbacks cb = { 0, &drawPattern, &releasePattern };
    CGPatternRef pat = CGPatternCreate(img, rect, t, w, h, kCGPatternTilingConstantSpacing, true, &cb);

    // change to pattern colorspace
    CGColorSpaceRef pcs = CGColorSpaceCreatePattern(nil);
    CGContextSetFillColorSpace(ctx, pcs);
    CGColorSpaceRelease(pcs);

    // apply the pattern
    float alpha[] = { 1 };
    CGContextSetFillPattern(ctx, pat, alpha);
    CFRelease(pat);

    // fill a rect
    double sz = rect.size.width / 5;
    CGContextFillRect(ctx, CGRectMake(0, 0, sz, sz));
}

-(void)tick:(NSTimer *)t
{
    clock++;
    [self setNeedsDisplay];
}

@end 
```

# ruby - 如何在红宝石中将字符串分成x等份

> ID：12039777
> 
> 赞同：17
> 
> 时间：2012-08-20T14:40:22.563
> 
> 标签：ruby

我有一个像这样的红宝石字符串：

```
str = "AABBCCDDEEFFGGHHIIJJ01020304050607080910"
# 20 letters and 20 numbers in this case 
```

我想把它分成两半，我可以这样做：

```
str[0, str.length/2] 
```

或者

```
str.split(0, str.length/2) 
```

之后，我需要使用字符创建数组，但每个元素的长度为 2，如下所示：

```
["AA", "BB", "CC", "DD", "EE", "FF", "GG", "HH", "II", "JJ"],
[01, 02, 03, 04, 05, 06, 07, 08, 09, 10] 
```

问题是，我找不到转换此字符串的简洁方法。我可以做这样的事情

```
arr = []
while str.length > 0 do
  arr << str[0, 1]
  str[0, 1] = ""
end 
```

但我更想要类似的东西`str.split(2)`，字符串的长度可能随时改变。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-20T14:44:51.137

这个怎么样？

```
str.chars.each_slice(2).map(&:join) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-20T14:48:23.973

您可以使用[扫描](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)方法：

```
1.9.3p194 :004 > a = 'AABBCCDDEEC'
 => "AABBCCDDEEC" 
1.9.3p194 :005 > a.scan(/.{1,2}/)
 => ["AA", "BB", "CC", "DD", "EE", "C"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T15:14:57.763

`2.1.0 :642 > "d852".scan(/../) => ["d8", "52"]`

# delphi - 在 delphi 中使用 DCC32.exe 构建

> ID：12039783
> 
> 赞同：6
> 
> 时间：2012-08-20T14:40:37.533
> 
> 标签：delphi, delphi-5

您好，我正在使用以下命令构建我的 delphi 项目：

```
Command: dcc32.exe project.dpr d:\exe_folder 
```

上面的命令效果很好，我可以在输出文件夹中创建 exe。但是，当我通过 IDE 构建相同的项目时，每次构建时构建号都会增加，因为我已经检查了选项“自动递增构建号”。但是在通过命令行执行此操作时，内部版本号并没有增加。通过命令行修改构建信息/版本信息的任何选项？

谢谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T14:59:21.240

dcc32.exe 不能直接增加内部版本号。版本信息（包括内部版本号）来自每次由 IDE 更新的 *.res 文件。要绕过 IDE，您可以编写带有版本信息部分的 RC 脚本，这个小应用程序将增加此脚本中的内部版本号。然后，您可以使用以下操作创建 bat 文件进行构建：

1.  运行您的应用程序以增加内部版本号
2.  使用 brcc32.exe 编译 RC 脚本（输入 - RC 脚本，输出 - RES 文件）
3.  使用带有新 .res 文件的 dcc32.exe 编译您的应用程序

PS 不要忘记在您的项目中包含带有版本信息的 RES 文件：

```
{$R "yourversioninfofile.res"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:49:49.743

不，内部版本号的自动递增是 IDE 功能。您可能需要使用适当的脚本语言编写自己的自动增量工具。

如果您想在 IDE 的等效项旁边使用您自己的命令行自动增量，您需要执行以下操作：

1.  让您的脚本读取由 IDE 管理的 .res 文件。
2.  增加内部版本号。
3.  重新创建 .res 文件。
4.  构建项目。

为了完成这项工作，我认为您需要对 IDE 生成的 .res 文件中的内容进行逆向工程。但这很容易。任何体面的资源编辑工具都可以帮助您做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:07:50.670

这就是我写[dzPrepBuild](http://www.dummzeuch.de/delphi/dzprepbuild/englisch.html)的目的。

# r - 在 R 中学习面向对象编程的有用书籍？

> ID：12039791
> 
> 赞同：7
> 
> 时间：2012-08-20T14:41:13.290
> 
> 标签：r, s4

我在 R-bloggers 上阅读了一篇关于“[使用 S4 类在 R 中进行面向对象编程](http://www.r-bloggers.com/an-example-of-oop-in-gnu-r-using-s4-classes/)”的有趣帖子。Venables 和 Ripley 编写的“[统计和计算](https://rads.stackoverflow.com/amzn/click/com/0387989668)”一书有一些章节介绍了 S 和 R 中的 S3 类和 S4 类，并且有在理解 R 中面向对象编程的概念方面对我很有用。

您是否知道任何有用的书籍更详细地介绍了 R 中的面向对象编程，并附有 R 博主中的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:28:46.943

正如评论者所说，John Chambers 的“数据分析软件”非常出色。我还推荐 R 手册“Writing R Extensions”，尽管它可能会变得相当技术性。对于更多介绍性资源，我会查看这些文档：John Chambers 的[How Methods Work](http://developer.r-project.org/howMethodsWork.pdf)、Christophe Genolini 的[这个 S4 教程和](http://cran.r-project.org/doc/contrib/Genolini-S4tutorialV0-5en.pdf)[这个有用的 powerpoint](http://www.biostat.jhsph.edu/~rpeng/biostat776/classes-methods.pdf)，这是一个很好的高级概述。

# c# - 如何在 C# 中交叉连接反序列化 json 数据

> ID：12039796
> 
> 赞同：1
> 
> 时间：2012-08-20T14:41:33.273
> 
> 标签：c#, .net, json, linq

我有两个反序列化 json 数据列表，我想交叉连接这些表。示例数据是两个列表的 item1:name, item2:date。我的返回类型为 List，但我的返回类型无效。不知道我在这里做错了什么。

到目前为止我所拥有的：

```
 List<JsonData> jdOne = GetDeserializedData(jsonUrlOne);
 List<JsonData> jdTwo = GetDeserializedData(jsonUrlTwo);

 var query = from urlOne in jdOne
                    from urlTwo in jdTwo
                    select new { urlOne, urlTwo };

 return query; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:04:31.260

您可能想使用元组来执行此操作....

```
public List<Tuple<JsonData,JsonData>> myFunc() {
  List<JsonData> jdOne = GetDeserializedData(jsonUrlOne);   
  List<JsonData> jdTwo = GetDeserializedData(jsonUrlTwo);   

  var query = from urlOne in jdOne   
                from urlTwo in jdTwo   
                select Tuple.Create(urlOne, urlTwo);   

  return query.ToList();
} 
```

然后根据您的结果，您可以像这样访问这两个项目。

```
var results=myFunc();
var x1=results[0].Item1;
var x2=results[0].Item2; 
```

`x1`包含来自第一个列表结果的第一对，`x2`包含第二对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:58:38.880

看起来您试图从函数返回匿名类型。声明类型以保存两个值，并返回它

```
select new YourType(){Field1 = urlOne, Field2 = urlTwo} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:18:55.580

这是您使用 Linq 想要的吗：[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)

```
var result = jdOne.Zip(jdTwo, (urlOne, urlTwo) => new {urlOne, urlTwo}); 
```

# php - Magento CMS：可配置产品 - > 图像

> ID：12039798
> 
> 赞同：2
> 
> 时间：2012-08-20T14:41:39.933
> 
> 标签：php, javascript, magento, content-management-system, configurable

经过研究，我得出的结论是，尽管 magento 很强大，但 cms 还是存在一些问题。其中之一是能够在视图页面上显示缩略图而不是可配置产品的选项下拉列表，并在单击时更新 media.phtml 中的主图像。我看到了许多用于样本的扩展，但应该有一种简单的方法来显示可配置中每个简单产品的缩略图。我已经尝试过magento wiki walkthroughs，但似乎都已经过时了。任何反馈或方向都会很棒！多谢你们！如果您需要更多信息，请告诉我，我会提供。

/结束片段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:47:53.903

我认为没有任何简单的方法可以使用现有的扩展。而且，我发现使用一个好的扩展比修改我以后需要维护的代码要便宜得多。

我对基于 Amasty 图像的动态可配置产品扩展感到满意，我相信它可以满足您的需求。可能有很多选择。这只是我第一个去的。

# ibm-midrange - 是否可以为显示文件中的一个选择字段水平布置多个选择选项？

> ID：12039799
> 
> 赞同：2
> 
> 时间：2012-08-20T14:41:47.440
> 
> 标签：ibm-midrange

我正在尝试使用 CHOICE DDS 关键字将选择字段添加到显示文件。该选择字段具有三个候选值。默认情况下，所有三个选项都将显示在单个列中。我想将它们水平放置在同一条线上。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:10:01.543

菜单栏将水平显示选项。请参阅[`MNUBAR`DDS 关键字](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakc%2Frzakcmstmnubar.htm)。

这是一个记录级别的关键字，因此您需要专门为此定义一个记录格式，这可能并不总是您的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T15:27:50.543

如果您需要水平布局的“选择选项”，您有多种选择。按难度递增的顺序：

首先，使用[SFLSNGCHC（子文件单选选择列表）](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/rzakc/rzakcmstdfsng.htm)子文件。这可能是最简单的，但这里没有太多定义。

接下来，使用 UIM。它本质上是一种与 HTML 相关的标记语言，因此您可能不会觉得难。最困难的部分可能是学习如何使用 API 和编写任何需要的“退出”函数。如果您进行大量绿屏显示开发，了解 UIM 可能是值得的。

或使用调理指标。排列一系列由输出字段分隔的水平单位置输入字段。随着选项的变化，将可变文本放入输出字段。条件，无论你需要多少。右边任何不需要的字段都可以是 DSPATR(PR ND)。

最后，使用[动态屏幕管理器 (DSM) API](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/apis/dsm.htm)使屏幕几乎可以以您选择的任何方式工作。（这也可以通过[USRDFN（用户定义）](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/rzakc/rzakcmstdfudfn.htm)记录格式来完成。）

# iphone - Avfoundation 通过录制创建迷你剪辑

> ID：12039801
> 
> 赞同：0
> 
> 时间：2012-08-20T14:42:01.387
> 
> 标签：iphone, objective-c, ios5, avfoundation

我想知道如何在不停止录制的情况下每隔一定时间从录制中创建迷你视频？我试图为视频寻找与 AvAssetImageGenerator 等效的示例，这样会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:57:38.480

最简单的方法是使用两个`AVAssetWriters`并在当前记录时设置下一个写入器，然后在 x 次后停止并交换写入器。您应该能够在不丢失任何帧的情况下交换编写器。

编辑：

## 如何进行`AVAssetWriter`“杂耍”

第 1 步：为编写器和像素缓冲区适配器创建实例对象（您还需要这些文件的文件名）

```
AVAssetWriter*                        mWriter[2];
AVAssetWriterInputPixelBufferAdaptor* mPBAdaptor[2];
NSString*                             mOutFile[2];
int                                   mCurrentWriter, mFrameCount, mTargetFrameCount; 
```

第 2 步：创建一个设置 writer 的方法（因为您将一遍又一遍地这样做）

```
-(int) setupWriter: (int) writer
{
NSAutoreleasePool* p = [[NSAutoreleasePool alloc] init];

NSDictionary* writerSettings = [NSDictionary dictionaryWithObjectsAndKeys: AVVideoCodecH264, AVVideoCodecKey, [NSNumber numberWithInt: mVideoWidth], AVVideoWidthKey, [NSNumber numberWithInt: mVideoHeight], AVVideoHeightKey, nil];
NSDictionary* pbSettings = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithInt:mVivdeoWidth],kCVPixelBufferWidthKey,
                        [NSNumber numberWithInt:mVideoHeight], kCVPixelBufferHeightKey,
                        [NSNumber numberWithInt:0],kCVPixelBufferExtendedPixelsLeftKey,
                        [NSNumber numberWithInt:0],kCVPixelBufferExtendedPixelsRightKey,
                        [NSNumber numberWithInt:0],kCVPixelBufferExtendedPixelsTopKey,
                        [NSNumber numberWithInt:0],kCVPixelBufferExtendedPixelsBottomKey,
                        [NSNumber numberWithInt:mVideoWidth],kCVPixelBufferBytesPerRowAlignmentKey,
                        [NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange], kCVPixelBufferPixelFormatTypeKey, nil];

AVAssetWriterInput* writerInput = [AVAssetWriterInput assetWriterWithMediaType: AVMediaTypeVideo outputSettings: writerSettings];
// Create an audio input here if you want...
mWriter[writer] = [[AVAssetWriter alloc] initWithURL: [NSURL fileURLWithPath:mOutfile[writer]] fileType: AVFileTypeMPEG4 error:nil];

mPBAdaptor[writer] = [[AVAssetWriterInputPixelBufferAdaptor alloc] initWithAssetWriterInput: writerInput sourcePixelBufferAttributes: pbSettings];

[mWriter[writer] addInput: writerInput]; 
// Add your audio input here if you want it
[p release];
} 
```

第 3 步：必须拆掉这些东西！

```
- (void) tearDownWriter: (int) writer 
{
if(mWriter[writer]) {

   if(mWriter[writer].status == 1) [mWriter[writer] finishWriting]; // This will complete the movie.
   [mWriter[writer] release]; mWriter[writer] = nil;
   [mPBAdaptor[writer] release]; mPBAdaptor[writer] = nil;
}

} 
```

第4步：交换！拆除当前的 writer 并在另一个 writer 正在写入时异步重新创建它。

```
- (void) swapWriters
{
 NSAutoreleasePool * p = [[NSAutoreleasePool alloc] init];
 if(++mFrameCount > mCurrentTargetFrameCount) 
 { 
    mFrameCount = 0;
    int c, n;
    c = mCurrentWriter^1;
    n = mCurrentWriter;  // swap.

    [self tearDownWriter:n];
    __block VideoCaptureClass* bSelf = self;
    dispatch_async(dispatch_get_global_queue(0,0), ^{
      [bSelf setupWriter:n];
              CMTime time;
    time.value = 0;
    time.timescale = 15; // or whatever the correct timescale for your movie is
    time.epoch = 0;
    time.flags = kCMTimeFlags_Valid;
    [bSelf->mWriter[n] startWriting];
    [bSelf->mWriter[n] startSessionAtSourceTime:time];
    });
    mCurrentWriter = c;
 } 

[p release];
} 
```

注意：启动时，您必须创建并启动**两个**编写器。

第 5 步：捕获输出

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
   // This method will only work with video; you'll have to check for audio if you're using that.
   CMTime time = CMSampleBufferGetPresentationTimeStamp(sampleBuffer); // Note: you may have to create your own PTS.

   CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

   [mPBAdaptor[mCurrentWriter] appendPixelBuffer:pixelBuffer withPresentationTime: time];

   [self swapBuffers];
  } 
```

如果不需要，您可以跳过像素缓冲区适配器。这应该让您大致了解如何做您想做的事情。 `mTargetFrameCount`表示您希望当前视频的长度为多少帧。音频可能需要额外考虑，如果您使用音频，您可能希望基于音频流而不是视频流来确定长度。

# c# - 如何合并这两位代码

> ID：12039812
> 
> 赞同：-6
> 
> 时间：2012-08-20T14:42:34.210
> 
> 标签：c#, linq

如何将这两段代码合二为一？

```
comCtrList = (from i in genOutList
                                  join f in genAccList
                                          on i.Contract equals f.Contract
                                  select i.Contract).ToList();

genOutList.RemoveAll(acc => comCtrList.Contains(acc.Contract)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:54:23.863

你想要这样的东西吗？

```
genOutList= (
                  from i in genOutList
                  where !genAccList.Any(x=>x.Contract==i.Contract)
                  select i
             ).ToList(); 
```

或者

```
genOutList.RemoveAll(x=>genAccList.Any(i=>i.Contract==x.Contract)); 
```

# python - 对对象识别的点分布进行分类

> ID：12039820
> 
> 赞同：2
> 
> 时间：2012-08-20T14:43:16.830
> 
> 标签：python, opencv, machine-learning, computer-vision, object-recognition

我有一些需要分类的点。鉴于这些点的集合，我需要说明它们最匹配的其他（已知）分布。例如，给定左上角分布中的点，我的算法必须说明它们是否更适合第二、第三或第四分布。（由于方向相似，这里左下角是正确的）

![给出的分数](../Images/ba0d2adfa8afff2b5dbb2b0bb84c3c26.png) ![样本分布1](../Images/48f9a2c33dabbac9b0bd50a7def50ee7.png) ![样本分布2](../Images/692e3332b1638eff0f22707f948c5015.png) ![样本分布 3](../Images/3f4b8b77b2bec86e1a619e2dde624e63.png)

我有一些机器学习的背景，但我不是专家。我正在考虑使用高斯混合模型，或者可能是隐马尔可夫模型（因为我之前已经将签名分类为这些类似的问题）。

对于使用哪种方法解决此问题，我将不胜感激。作为背景信息，我正在使用 OpenCV 和 Python，所以我很可能不必从头开始实现所选算法，我只需要一个指针来了解哪些算法适用于这个问题。

免责声明：我最初想在 StackExchange 的数学部分发布此内容，但我缺乏发布图像的必要声誉。我觉得如果不显示一些图像就无法清楚地表达我的观点，所以我将其发布在这里。我相信它仍然与计算机视觉和机器学习相关，因为它最终将用于对象识别。

**编辑：**

我阅读并考虑了下面给出的一些答案，现在想添加一些新信息。我不想将这些分布建模为单个高斯分布的主要原因是，最终我还必须能够区分分布。也就是说，可能有两个不同且独立的分布代表两个不同的对象，然后我的算法应该知道这两个分布中只有一个代表我们感兴趣的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:52:53.877

我认为这取决于数据的确切来源以及您想对其分布做出什么样的假设。即使从单个高斯分布中也可以很容易地得出上述点，在这种情况下，估计每个参数的参数，然后选择最接近的匹配非常简单。

或者，您可以选择判别选项，即计算您认为可能有助于确定一组点所属的类别并使用 SVM 或类似方法进行分类的任何统计数据。这可以被视为将这些样本（2d 点集）嵌入到更高维空间中以获得单个向量。

此外，如果数据实际上像本例中一样简单，您可以只进行主成分分析并通过第一个特征向量进行匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:05:19.097

您应该只将分布拟合到数据，确定每个的 chi^2 偏差，查看 F-Test。参见例如这些关于模型拟合等的[注释](http://www-users.york.ac.uk/~pjh503/mathematical_model/math_model4.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:39:39.113

您可能还需要考虑非参数技术（例如，对每个新数据集进行多元核密度估计），以便比较估计分布的统计数据或距离。在 Python中是[SciPy.Stats](http://www.scipy.org/SciPyPackages/Stats)`stats.kde`中的一个实现。

# javascript - Facebook Like Box - 控制流中出现的内容

> ID：12039821
> 
> 赞同：1
> 
> 时间：2012-08-20T14:43:17.363
> 
> 标签：javascript, facebook-javascript-sdk, facebook-social-plugins, facebook-likebox

任何知道控制方式的人都会出现在 Like Box Stream 中。默认情况下，它似乎是所有页面操作，包括相册更新。有没有办法控制它以仅显示帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:53:29.977

不，没有记录在案的方法来控制点赞框的提要内容。

# c# - Unity/Monotouch/C# 为 3rd 方库设置委托中的 JIT 编译方法错误

> ID：12039825
> 
> 赞同：3
> 
> 时间：2012-08-20T14:43:31.107
> 
> 标签：c#, ios, mono, xmpp, unity3d

我正在尝试在 Unity/Monotouch/C# 中为 iOS 的 facebook 创建一个聊天客户端。我收到以下错误

```
ExecutionEngineException: Attempting to JIT compile method '(wrapper managed-to-native) 
System.Threading.Interlocked:CompareExchange  
(System.EventHandler`1<Matrix.EventArgs>&,System.EventHandler`1<Matrix.EventArgs>,
System.Eve ntHandler`1<Matrix.EventArgs>)' while running with --aot-only.

  at Matrix.Net.BaseSocket.add_OnConnect (System.EventHandler`1 value) [0x00000]
in <filename unknown>:0 
  at Matrix.XmppStream..ctor (StreamType type) [0x00000] in <filename unknown>:0 
  at Matrix.Xmpp.Client.XmppClient..ctor () [0x00000] in <filename unknown>:0 
  at TestFacebook.setup () [0x00000] in <filename unknown>:0 
  at TestFacebook.Start () [0x00000] in <filename unknown>:0 

(Filename:  Line: -1) 
```

当我尝试连接 XMPP 框架中的一位代表时。这是可能导致它的代码：

```
xmppClient.OnBeforeSasl += this.xmppClient_OnBeforeSasl; 
```

委托方法：

```
public void xmppClient_OnBeforeSasl(object sender, Matrix.Xmpp.Sasl.SaslEventArgs e)
    { ... } 
```

还尝试更改 API 可比性级别顶级 .NET 2.0，但没有任何结果。将 xmppClient_OnBeforeSasl 方法设置为静态也无济于事。它在 Unity 中运行良好，但在 iOS 设备上运行时崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:49:37.163

原来 Matrix 不支持 iOS :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:34:53.127

在尝试在统一项目中使用之前，您需要删除 agsXMPP 库中的所有事件使用。我确实使用了 agsXMPP 并进行了一些修改，似乎它工作正常。

以下是补丁的一些见解（这不是很好的方法）：

查找并删除库项目中的所有事件关键字（保持 Event 类不变，这是另一回事）然后替换（ += ）

```
xmppClient.OnBeforeSasl += this.xmppClient_OnBeforeSasl; 
```

由 ( = )

```
xmppClient.OnBeforeSasl = this.xmppClient_OnBeforeSasl; 
```

因为**OnBeforeSasl**现在是一个委托，而不是一个事件，您不能使用它注册多个处理程序。

但无论如何，这是一种工作，您总是可以通过添加 addEventListener / removeEventListeners 来扩展它，并使用一个委托数组而不是一个委托数组。

我确实这样做了，它的工作，所以试试吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T10:26:35.120

以下堆栈帧导致此错误：

```
at Matrix.Net.BaseSocket.add_OnConnect (System.EventHandler`1 value) [0x00000] 
```

add_OnConnect方法是编译器生成的用于注册事件的方法**。**较新版本的 Microsoft C# 编译器更改了此方法的生成方式，该编译器使用通用版本的**Interlocked.CompareExchange**以获得更好的性能和线程安全性。

因此，请检查您获得的 XMPP 二进制文件是否由最近的一些 Visual Studio 版本构建。

而**Interlocked.CompareExchange**的问题在于，该方法的泛型版本无法以可接受的性能在纯 C# 中实现。所以 JIT 被黑了。当它读取**Interlocked.CompareExchange<T>**的主体时，它只是触发一个 JIT 进程并生成以下 IL：

```
ldarg.0 
ldarg.1
ldarg.2
call System.Threading.Interlocked::CompareExchange(ref Object, Object, Object)
ret 
```

所以这个方法永远不会编译 AOT 并且总是触发一个 JIT 进程，该进程将失败，因为 iOS 不允许代码生成。

如果源代码可用，请尝试通过使用 MonoDevelop 重建包含事件注册的二进制文件来解决问题。

# javascript - OpenLayers - 一层上的自定义图像马赛克

> ID：12039827
> 
> 赞同：1
> 
> 时间：2012-08-20T14:43:38.330
> 
> 标签：javascript, image, openlayers

是否可以有一个由自定义图像马赛克组成的图层？

我只能通过`OpenLayers.Layer.Image`. 本质上，如果我能找到一种方法来为给定图层的图块指定自定义图像，那么我的问题就会得到解决。

我尝试了 , 和 的各种组合，但`OpenLayers.Tile`无法正常工作。`OpenLayers.Tile.Image``OpenLayers.Layer``OpenLayers.Layer.Grid`

我遵循的基本流程是：

```
var map = new OpenLayers.Map('map');

var layer = new <OpenLayers.Layer | OpenLayers.Layer.Grid> (<parameters>);

var tile1 = new <OpenLayers.Tile | OpenLayers.Tile.Image> (<parameters>);

map.addLayer(layer);

map.zoomToMaxExtent(); 
```

下面提供了我如何初始化每个构造函数的具体示例。

关于`OpenLayers.Layer.Grid`，我实际上不确定为 url 和 params 构造函数参数指定什么。

任何关于这是否有效和/或我是否走在正确轨道上的建议将不胜感激。

**OpenLayers.Layer**

```
var layer = new OpenLayers.Layer(
  'layer_name',
  {
    isBaseLayer: true
  }
); 
```

**OpenLayers.Layer.Grid**

```
var layer = new OpenLayers.Layer.Grid(
  'layer_name',
  ?url?,
  ?params?
); 
```

**OpenLayers.Tile**

```
var layer = new OpenLayers.Tile(
  layer_name,
  new OpenLayers.Pixel(0,0),
  new OpenLayers.Bounds(-1,-1,1,1),
  'square1.jpg',
  new OpenLayers.Size(300,300)
); 
```

**OpenLayers.Tile.Image**

```
var layer = new OpenLayers.Tile.Image(
  layer_name,
  new OpenLayers.Pixel(0,0),
  new OpenLayers.Bounds(-1,-1,1,1),
  new OpenLayers.Size(300,300),
  {
    url: 'square1.jpg'
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:16:29.003

您是否尝试过 Zoomify 图层？这是[示例](https://openlayers.org/en/latest/examples/zoomify.html)。它允许您在地图中加载来自给定目录的所有图像，以表单命名`{z}-{x}-{y}.jpg`，其中`{z}`是缩放级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:05:24.303

如果您需要将图像分解成更小的图块，我建议使用这个免费[的 MapTiler](http://www.maptiler.org/)软件，它可以根据需要创建多个缩放级别的图块。

您可以使用 TMS 图层创建图像切片的地图图层：

```
var layer = new OpenLayers.Layer.TMS("TMS Layer","",
    {url: '', serviceVersion: '.', layername: '.', alpha: true,
     type: 'png', getURL: getTileURL 
    }
);
map.addLayer(layer); 
```

TMS 层使用该`getTileURL`函数来查找要显示的平铺图像。此函数假定图像存储在类似于[MapTiler](http://www.maptiler.org/)创建的层次结构中。
例如：img/tiles/7/4/1.png 是缩放级别 7 左起第 5 个和底部第 2 个的图像。

```
function getTileURL(bounds) 
{
    var res = this.map.getResolution();
    var x = Math.round((bounds.left - this.maxExtent.left) / (res * this.tileSize.w));
    var y = Math.round((bounds.bottom - this.maxExtent.bottom) / (res * this.tileSize.h));
    var z = this.map.getZoom();

    var path = "img/tiles/" + z + "/" + x + "/" + y + "." + this.type;
    var url = this.url;
    if (url instanceof Array) 
    {
        url = this.selectUrl(path, url);
    }
    return url + path;
} 
```

# php - .htaccess 记住密码

> ID：12039833
> 
> 赞同：1
> 
> 时间：2012-08-20T14:44:07.110
> 
> 标签：php, html, .htaccess

> **可能重复：**
> [通过 PHP 的 HTTP 身份验证注销](https://stackoverflow.com/questions/449788/http-authentication-logout-via-php)

我正在使用`.htaccess`(and `.htpasswd`) 来保护我网站中的文件夹。这很好用，当我第一次从任何计算机登录时，我被要求输入登录名和密码才能访问受保护的文件夹。我的问题是登录屏幕只出现一次，所以在第一次登录后，我可以在没有登录屏幕的情况下随时访问受保护的文件夹。

每次尝试访问此文件夹时，如何使登录屏幕出现？

PS 在登录屏幕中，“记住我的凭据”复选框为空，在“安全”下的浏览器历史记录中清除 cookie、密码等仍然没有帮助。

以下是我的`.htaccess`文件：

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /home/mysite/.htpasswd 
AuthGroupFile /dev/null 
require valid-user 
```

它是否与此代码行相关：`AuthType Basic`？

感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:45:52.233

您不能（因为浏览器正在缓存密码），除非您更改密码或即使在第一次成功请求之后发送 401。

“记住我的凭据”仅适用于关闭浏览器后保存的密码，您无法在会话期间阻止它。

`AuthType Basic`只需设置密码的“加密”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:46:05.003

使用 HTTP Basic Auth 时，浏览器会记住密码，直到退出。

如果您希望每次访问页面时都被提示重新输入密码，那么您将需要使用其他类型的身份验证机制（例如基于 HTML 表单的身份验证机制）。

# android - 带有来自可绘制文件夹的图像的列表视图正在播放或滞后

> ID：12039834
> 
> 赞同：1
> 
> 时间：2012-08-20T14:44:14.507
> 
> 标签：android, listview, drawable, lag

大家。这是我的代码。上下滚动后，我的列表视图越来越慢，然后应用程序关闭。只是为了澄清......我有 2 个文本视图、1 个图像视图和 1 个搜索字段。我的列表视图有一百多个带有图片的项目......

这是我的代码。为了方便起见，我只放了两个项目。我应该在哪里放什么？我是新手。帮我！

```
package com.example.exemplo;

import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Toast;

public class Listagem extends Activity
{

EditText edittext;
ListView listview;

String[] text;

String[] text2;

int[] image = {
        R.drawable.wolf;
        R.drawable.cat;

    };

int textlength = 0;
ArrayList<String> text_sort = new ArrayList<String>();
ArrayList<String> text2_sort = new ArrayList<String>();
ArrayList<Integer> image_sort = new ArrayList<Integer>();

public void onCreate(Bundle savedInstanceState)
{

super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.main);

text =  getResources().getStringArray(R.array.text);
text2 = getResources().getStringArray(R.array.text2);

edittext = (EditText) findViewById(R.id.EditText01);
listview = (ListView) findViewById(R.id.ListView01);

listview.setOnItemClickListener(new OnItemClickListener(){

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

    if ("Howl".equals(text[position])) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
        player.start();

       }

    if ("Meow".equals(text[position])) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
        player.start();            
}

        });

listview.setAdapter(new MyCustomAdapter(text, text2, image));

edittext.addTextChangedListener(new TextWatcher()
{

public void afterTextChanged(Editable s)
{

}

public void beforeTextChanged(CharSequence s, int start,
int count, int after)
{

}

public void onTextChanged(CharSequence s, int start,
int before, int count)
{

textlength = edittext.getText().length();
text_sort.clear();
text2_sort.clear();
image_sort.clear();

for (int i = 0; i < text.length; i++)
{
if (textlength <= text[i].length())
{
if (edittext.getText().toString().
equalsIgnoreCase((String) text[i].subSequence(0, textlength)))
{
text_sort.add(text[i]);
text2_sort.add(text2[i]);
image_sort.add(image[i]);
}
}
}

listview.setOnItemClickListener(new OnItemClickListener(){

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

    if ("Howl".equals(text_sort.get(position))) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
        player.start();

       }

    if ("Meow".equals(text_sort.get(position))) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
        player.start();

       }

}

        });

listview.setAdapter(new MyCustomAdapter
(text_sort, text2_sort, image_sort));

}

});
}

class MyCustomAdapter extends BaseAdapter
{

String[] data_text;
String[] data_text2;
int[] data_image;

MyCustomAdapter()
{

}

MyCustomAdapter(String[] text, String[] text2, int[] image)
{
data_text = text;
data_text2 = text2;
data_image = image;
}
MyCustomAdapter(ArrayList<String> text, ArrayList<String> text2, ArrayList<Integer>   image)
{
data_text = new String[text.size()];
data_text2 = new String[text2.size()];
data_image = new int[image.size()];

for(int i=0;i<text.size();i++)
{
data_text[i] = text.get(i);
data_text2[i] = text2.get(i);
data_image[i] = image.get(i);
}

}

public int getCount()
{
return data_text.length;

}

public String getItem(int position)
{
return null;
}

public long getItemId(int position)
{
return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{

LayoutInflater inflater = getLayoutInflater();
View row;

row = inflater.inflate(R.layout.listview, parent, false);

listview.setCacheColorHint(Color.TRANSPARENT);
listview.setFastScrollEnabled(true);
listview.setScrollingCacheEnabled(false);

TextView textview = (TextView) row.findViewById(R.id.TextView01);

TextView textview2 = (TextView) row.findViewById(R.id.TextView02);
Typeface font1 = Typeface.createFromAsset(getAssets(), "arial.ttf");  
textview2.setTypeface(font1);
ImageView imageview = (ImageView) row
.findViewById(R.id.ImageView01);

textview.setText(data_text[position]);
textview2.setText(data_text2[position]);
imageview.setImageResource(data_image[position]);

return (row);

}
}

} 
```

# c# - 在 Windows 7 中通过 \Local Settings\Application Data\ 启动应用程序时出错

> ID：12039838
> 
> 赞同：1
> 
> 时间：2012-08-20T14:44:31.047
> 
> 标签：c#, windows-7, processstartinfo, win32exception

简单代码：

```
 ProcessStartInfo psi = new ProcessStartInfo(path);
 psi.UseShellExecute = false;
 Process.Start(psi); 
```

如果路径 = C:\Users\Marat\AppData\Local\MyCompany\Program.exe，没关系！

但如果路径 = C:\Users\Marat\Local Settings\Application Data\MyCompany\Program.exe

得到例外：

> System.ComponentModel.Win32Exception(0x80004005)：进行了无效的名称请求。目前无法检索请求的名称

实际上，一切正常，但在某些时候它开始给出这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:11:22.677

据我所知，Windows 7 中的 Local Settings 文件夹是指向 AppData 文件夹的链接，主要用于与旧的 Windows Vista 之前的应用程序兼容，实际上您无法直接访问它，除非您更改该链接的所有者（它是系统），所以这可能就是您收到此错误的原因。

另一个原因可能是名称中的空格，因为您在启动进程时没有显示如何构造路径或其内容。

# c++ - 这是通过引用分配的正确示例吗？

> ID：12039840
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:44:31.760
> 
> 标签：c++, mfc

我有一个 getter 方法，它返回一个声明为私有的数组。

在.h中：

```
 private:
    CStringArray a; 
```

在 。cp:

```
 CStringArray &Define::GetDefined()
    {
       return a;
    } 
```

在另一个 .cpp 中：

```
 int size = (define.GetDefined()).GetCount(); 
```

这确实返回了正确的 int 值。但这是通过引用分配的正确示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:53:00.817

是的，尽管最终 .cpp 文件中的额外大括号是不必要的，并且对读者没有帮助，因此您可能不应该打扰

例如。

```
int size = define.GetDefined().GetCount(); 
```

您可能还应该提到，用户应该确保通过引用返回的对象没有分配在即将失效的堆栈的某些部分上。

例如：

```
A& method() {
   return A();
} 
```

或任何即将失效的内存部分：

```
class A{
  B member;
  B& get_b_ref() {
    return member;
  }
}

int main() {
  A* a_ptr = new A();
  B& b_ref = a_ptr->get_b_ref();
  delete a_ptr;
  b_ref.any_method(); // yikes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:52:19.743

是的，从 getter 返回引用是绝对正确的。

如果不应从外部修改此对象，您甚至可能想要返回 const Array &

# shell - shell脚本是什么意思？

> ID：12039848
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:44:58.623
> 
> 标签：shell

我是一个新的shell脚本，下面是一个shell脚本：

```
$JAVA_HOME/bin/java -Dpid=MyJava \
    -Xms${HEAP_MIN}m -Xmx${HEAP_MAX}m -cp ${CPG_CLASSPATH} \
    -Dconfig=${CFG_FILE} \
    -Dcom.test.eps.configpath=${my_config}/ \
    -Dcom.test.eps.rt.config=${my_config}/ \
    -Dlog4j.configuration=file:///${my_config}/log4j.properties.ewf.rt \
    com.test.MyJava & 
```

谁能告诉我上面每一行的代码含义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:03:21.253

`$JAVA_HOME/bin/java``$JAVA_HOME`— 调用位于由当前用户环境中设置的变量指定的文件夹的 bin 路径中的 JRE 二进制文件。也就是说，它运行 Java，特别是 JAVA_HOME 指向的版本。

尾随`\`的 s 是转义字符，在行尾转义换行符。通常在 shell 程序中，行尾的换行符告诉 shell 你已经完成了命令，它现在可以解释它。以 结束一行`\`告诉 shell 该命令实际上将在下一行继续，即这是一个命令。

`-Dpid=myJava`— 为名为 pid 且值为 myJava 的 jre 设置系统属性。Java 程序基本上可以`getProperty("pid")`在运行时询问，它会返回`"myJava"`然后适当地选择它的行为，这是配置 JRE 运行的程序的一种方式。

`-Xms${HEAP_MIN}m`— 将 javas 最小堆大小设置为`${HEAP_MIN}`env var 中的值。堆大小是 jre 留出多少内存来存储其堆栈跟踪。

`-Xmx${HEAP_MAX}m`— 将 Java 的最大堆大小设置为`${HEAP_MAX}`env var 中的值。

`-cp ${CPG_CLASSPATH}`— 将 Java 类路径设置为`${CPG_CLASSPATH}`env var 中的值。

`-Dconfig=${CFG_FILE}`— 为名为 config 的 JRE 设置系统属性，其值为 ${CFG_FILE}。

`-Dcom.test.eps.configpath=${my_config}/``com.test.eps.configpath`— 为以 value命名的 JRE 设置系统属性`${my_config}`。

`-Dcom.test.eps.rt.config=${my_config}/``com.test.eps.rt.config`— 为以 value命名的 JRE 设置系统属性`${my_config}`。

`-Dlog4j.configuration=file:///${my_config}/log4j.properties.ewf.rt`— 为名为 log4j.configuration 的 JRE 设置系统属性，其值为`file:///${my_config}/log4j.properties.ewf.rt`。

`com.test.MyJava`是一个 Java 类，本质上位于`com/test/MyJava.class`可能具有`main`函数的类路径上。在 JRE 使用所有先前的配置集进行初始化后，它将运行这个类并运行它的 main 函数。

`&`告诉操作系统在它自己的进程中运行这个命令，而不是在 cli 将控制权交还给用户之前等待它返回。它基本上是告诉操作系统在与运行 shell 的进程不同的进程中运行该程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:48:28.060

假设您使用的是基于 unix 的系统，请查看以下内容：

[http://www.manpagez.com/man/1/java/](http://www.manpagez.com/man/1/java/)

这很复杂，所以也许你应该先学习 shell 脚本的基础知识：

[http://www.freeos.com/guides/lsst/](http://www.freeos.com/guides/lsst/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:01:55.017

就像 shell 一样，那里没有什么本质上复杂的东西。然而，有很多相同类型的东西一遍又一遍。

在最高级别，它是一个命令。行尾的反斜杠将命令与下一行的信息一起继续。它调用 JVM（Java 虚拟机，它是 JRE 的关键组件，Java 运行时环境）在目录中找到`$JAVA_HOME/bin`，其中`$JAVA_HOME`（我相信你认得）是一个 shell 变量；实际上，它应该是一个环境变量。JVM 使用 10 个参数调用（除非我再次计算错误），并在后台运行（`&`最后是）。这意味着 shell 脚本会启动 JVM 并且不会等待它完成。

一些参数还包含 shell 变量的扩展形式，其中一些可能是环境变量（您不能仅仅通过查看它们就明确地知道哪些变量是环境变量，但通常情况下，环境变量都是大写的，比如`$JAVA_HOME`）。另一种表示法`${HEAP_MAX}`扩展了一个变量`HEAP_MAX`，就像这样`$HEAP_MAX`做一样。然而，在那个论点中，你不能（明智地）写：

```
-Xmx$HEAP_MAXm   # Wrong (in this context) 
```

因为那会寻找一个变量`$HEAP_MAXm`；您使用大括号来分隔变量的名称。您还可以对大括号中的名称执行许多其他操作，例如`${JAVA_HOME:?}`如果`$JAVA_HOME`未设置，则生成错误消息并停止脚本。请参阅“参数扩展”手册。

对于 JVM 参数的含义，您需要查看手册页。但是，作为 shell 的一个练习，其他参数都是已经讨论过的内容的变体，使用不同的变量来识别 JVM 或它正在运行的程序所需的文件的位置。

# python - 像在 windows calc 中一样使 Entry 小部件“禁用”

> ID：12039850
> 
> 赞同：0
> 
> 时间：2012-08-20T14:45:06.683
> 
> 标签：python, tkinter, tkinter-entry

在制作 Windows Calc 的副本时，我遇到了 Entry 小部件的问题。

我已经制作了类似于 windows calc 的按钮，并且我还绑定了键盘 1234567890 + - / * % 按钮，以制作与 calc 按钮相同的东西。主要的问题是我希望条目只存储数字并让用户只输入数字......但是在搜索了许多关于 validatecommand 的主题并查看了 windows calc 之后，我决定 validatecommand 不是我需要的东西 - 我不需要'不知道如何使它验证用户输入到输入框的每个字符，并且在进行键盘绑定后，当我在输入框中并按“1”写它两次的数字时，因为键盘事件绑定插入输入框也有“1”。

所以，我想做的是让条目小部件像 Windows Calc.exe 输入框一样工作。windows calc 输入框不允许您插入任何其他字符，然后是数字，也不允许您将光标放入输入框...，它看起来像这样：-entrybox 已禁用但看起来像 ENABLED -数字和操作可以通过计算按钮或键盘按钮进行

我尝试通过在开始时禁用条目小部件来获得这种效果，并使所有按钮的功能如下： - 启用条目小部件 - 插入数字（小部件必须处于启用状态？还是正常？（不记得名称）状态让您向其中插入一些东西）-禁用条目小部件

它像我想要的那样工作......但它看起来不像我想要的那样。是否有可能将 Entry 小部件禁用的 bg 颜色更改为正常？或者也许有另一种方法来制作这样的输入框？:S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:10:12.007

方法是使用条目小部件的`validatecommand`和`validate`选项。这种情况正是这些功能的用途。

你说你“不知道如何让它验证用户输入到输入框的每个字符”。如果您将`validate`属性设置为`"key"`，这将导致您的 validate 命令在每次按键时被调用。

不幸的是，这是 Tkinter 的一个记录不足的功能，尽管它对 Tk 的记录很好。这是一个执行一些非常基本检查的工作示例：

```
import Tkinter as tk

class SampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        # define a command to be called by the validation code.  %P
        # represents the value of the entry widget if the edit is
        # allowed. We want that passed in to our validation comman so
        # we can validate it. For more information see
        # http://tcl.tk/man/tcl8.5/TkCmd/entry.htm#M7
        vcmd = (self.register(self._validate), '%P')
        e = tk.Entry(self, validate="key", validatecommand=vcmd)
        e.pack()

    def _validate(self, P):
        # accept the empty string, "." or "-." (to make it possible to
        # enter something like "-.1"), or any string that can be
        # converted to a floating point number.
        try:
            if P in (".", "-", "-.", ""):
                return True
            n = float(P)
            return True
        except:
            self.bell()
            return False

app=SampleApp()
app.mainloop() 
```

如果您搜索此站点，`[tkinter] validatecommand`您会发现许多其他示例。

# annotations - 需要扫描 WEB-INF/lib/xxx-ejb.jar 以获取 Type 和 Method 注释

> ID：12039853
> 
> 赞同：0
> 
> 时间：2012-08-20T14:45:27.657
> 
> 标签：annotations, java-ee-6, reflections

我想使用 Google Reflections 执行以下操作：

1.  仅扫描 WEB-INF/lib/Patrac-ejb.jar

2.  仅扫描包 com.patrac 及其所有子包。

3.  仅扫描类型和方法注释。

以下配置似乎可以正常工作，但我对 Google Reflections 没有任何经验。

```
Reflections reflections = new Reflections(
    new ConfigurationBuilder()
        .filterInputsBy(new FilterBuilder().include("Patrac-ejb.jar").include(FilterBuilder.prefix("com.patrac")))
        .setScanners(new MethodAnnotationsScanner(), new TypeAnnotationsScanner())
        .setUrls(ClasspathHelper.forWebInfLib(servletContext))
); 
```

它似乎正在工作。我想确保它没有扫描 WEB-INF/lib 中的所有其他 JAR。有没有一种简单的方法可以发现配置中的过滤器输入匹配了哪些 JAR？任何关于我的方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:12:36.417

以下工作：

```
 //   Get the URL for Patrac-ejb.jar:
   Set<URL> urls = ClasspathHelper.forWebInfLib(webUtil.getServletContext());
   URL patracJarUrl = null;
   for(URL url : urls)
   {
       if(url.getFile().endsWith("Patrac-ejb.jar"))
       {
           patracJarUrl = url;
           break;
       }
   }
   if(null == patracJarUrl)
   {
       throw new IllegalStateException("Patrac-ejb.jar not found.");
   }

   //   Add the Patrac-ejb.jar URL to the configuration.
   Configuration configuration = new ConfigurationBuilder()
       .filterInputsBy(new FilterBuilder()
                       .include(FilterBuilder.prefix("com.patrac")))
       .setScanners(new MethodAnnotationsScanner(), new TypeAnnotationsScanner())
       .setUrls(patracJarUrl); 
```

# java - awk 一个完整的 C/C++/Java 函数

> ID：12039858
> 
> 赞同：0
> 
> 时间：2012-08-20T14:45:52.540
> 
> 标签：java, c++, c, regex, awk

我正在寻找按照以下方式做的事情

```
awk '/begin-regex/,/end-regex/' 
```

但更高级一点。我想搜索整个函数，特别是在 Java 中，但我看不出它不适用于 C/C++ 或其他使用花括号 (`{`和`}`) 的函数。

这是一些示例代码（来自[http://introcs.cs.princeton.edu/java/14array/Sample.java.html](http://introcs.cs.princeton.edu/java/14array/Sample.java.html)）

```
public class Sample {
    public static void main(String[] args) {
        int M = Integer.parseInt(args[0]);    // choose this many elements
        int N = Integer.parseInt(args[1]);    // from 0, 1, ..., N-1

        // create permutation 0, 1, ..., N-1
        int[] perm = new int[N];
        for (int i = 0; i < N; i++)
            perm[i] = i;

        // create random sample in perm[0], perm[1], ..., perm[M-1]
        for (int i = 0; i < M; i++)  {

            // random integer between i and N-1
            int r = i + (int) (Math.random() * (N-i));

            // swap elements at indices i and r
            int t = perm[r];
            perm[r] = perm[i];
            perm[i] = t;
        }

        // print results
        for (int i = 0; i < M; i++)
            System.out.print(perm[i] + " ");
        System.out.println();
    }
} 
```

现在我只想拉出这个`main`功能。

```
 public static void main(String[] args) {
        int M = Integer.parseInt(args[0]);    // choose this many elements
        int N = Integer.parseInt(args[1]);    // from 0, 1, ..., N-1

        // create permutation 0, 1, ..., N-1
        int[] perm = new int[N];
        for (int i = 0; i < N; i++)
            perm[i] = i;

        // create random sample in perm[0], perm[1], ..., perm[M-1]
        for (int i = 0; i < M; i++)  {

            // random integer between i and N-1
            int r = i + (int) (Math.random() * (N-i));

            // swap elements at indices i and r
            int t = perm[r];
            perm[r] = perm[i];
            perm[i] = t;
        }

        // print results
        for (int i = 0; i < M; i++)
            System.out.print(perm[i] + " ");
        System.out.println();
    } 
```

很明显，我不能只寻找，`main(.*?) {.*?}`因为那会在第二个循环结束时停止`for`，回馈

```
 public static void main(String[] args) {
        int M = Integer.parseInt(args[0]);    // choose this many elements
        int N = Integer.parseInt(args[1]);    // from 0, 1, ..., N-1

        // create permutation 0, 1, ..., N-1
        int[] perm = new int[N];
        for (int i = 0; i < N; i++)
            perm[i] = i;

        // create random sample in perm[0], perm[1], ..., perm[M-1]
        for (int i = 0; i < M; i++)  {

            // random integer between i and N-1
            int r = i + (int) (Math.random() * (N-i));

            // swap elements at indices i and r
            int t = perm[r];
            perm[r] = perm[i];
            perm[i] = t;
        } 
```

这还不够。

如何修改这个简单的 awk 脚本以计算打开的大括号和关闭的大括号并忽略注释？如果它输出所有出现的函数，那将比第一次更好。

编辑：这以前不是很清楚，但我知道常规语言无法解决这个问题，这就是为什么我在 awk 中要求一些东西。我知道 awk 能够计数并且能够按照我的要求进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:53:21.070

您正在执行 ctags 工作，调用[ctags](http://ctags.sourceforge.net/)生成标签文件，然后解析标签文件将使生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:56:10.593

`awk`是这项工作的错误工具。它在识别正则表达式方面非常出色，但这项任务需要一些诚实的*解析*，而这`awk`确实不是为此而构建的。您必须考虑的一些问题：

*   函数类型、声明符`{`和（可能`}`）出现在同一源代码行上的文件与它们都在不同源代码行上的文件；
*   多次出现`{`或`}`在同一源代码行上；
*   函数名, `{`, 或`}`出现在评论中
*   区分函数*定义*和函数*调用*；
*   正确识别 C 和 C++ 中的多毛函数原型；

关于最后一点，请记住，在 C 和 C++ 中，以下是完全合法的函数原型：

```
int *(*(*foo(char *s))(int x))[SIZE] { ... } 
```

其中`foo`是一个函数返回一个指向另一个函数的指针，该函数返回一个指向指向 的`SIZE`-element 数组的指针`int`。

至少，您需要一个`BEGIN`块来设置一些状态变量（一个用于检查您是否已阅读函数声明符，一个用于跟踪当前范围，一个用于跟踪您是否是在注释块等中）。然后您必须阅读每一行，将其拆分为字段并尝试识别函数声明符`{`和`}`注释分隔符等。

老实说，我不确定编写一个简单的 C、C++ 或 Java 程序来执行此操作是否会减少工作量。

# javascript - 拉斐尔对象宽度

> ID：12039860
> 
> 赞同：0
> 
> 时间：2012-08-20T14:46:03.617
> 
> 标签：javascript, raphael

好的，我需要一些帮助来尝试访问 Raphael 对象的宽度。这是我做的小提琴的链接。

[小提琴](http://jsfiddle.net/stewbydoo/GbDw9/1371/)

它不断返回未定义但对象已定义。有点困惑为什么我不能以我尝试的方式访问它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:56:50.757

如果你这样做`console.log(circle);`，你会看到它们`width`在圆上没有属性，所以这就是它的原因`undefined`，另一件事，我真的不认为你可以获得圆的宽度，你可以得到半径，尝试使用：

```
​console.log(circle.paper.width); // prints the "canvas" width
console.log(circle.attrs.r);     // prints the circle radius, circle.attrs.r * 2 you get
                                 // the width of the circle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:10:02.777

您可能想要`circle.getBBox()`返回以下内容：

```
x:top left corner x
y:top left corner y
x2:bottom right corner x
y2:bottom right corner y
width:width
height:height 
```

它可能会返回一个不是整数的答案。

# bash - 将两个文件夹中相同命名的文件合并为一个

> ID：12039862
> 
> 赞同：0
> 
> 时间：2012-08-20T14:46:11.683
> 
> 标签：bash, unix

我有两个文件夹，其中包含数千个文档。`A`说 A和B 是目录。两者都`B`包含文件`a.x b.x`等等。内容当然不一样。所以我想附加以在其他文件夹`a.x & a.x` 中生成另一个。`a.x`此外，我需要从第二个文档中删除第一个令牌，例如：

```
a.x in A:1 i go home
a.x in B:1 he goes home 
```

我想将新文档生成为：

```
 1 i go home  he goes home. 
```

请给我一些脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:52:05.093

我会做：

```
mkdir OUTPUT
cd A
for f in *
do
  join $f ../B/$f > ../OUTPUT/$f
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:52:25.467

您可以通过`for ... in`循环来完成此操作，并且`join(1)`：

```
mkdir c # for storing the results
for file in $(ls a): do
    join "a/$file" "b/$file" >> "c/$file"
done 
```

# ruby-on-rails - 如何在 gem 中运行 Rails 应用程序？

> ID：12039863
> 
> 赞同：7
> 
> 时间：2012-08-20T14:46:12.210
> 
> 标签：ruby-on-rails, ruby

我不确定这种事情是否很常见，但我一直在尝试创建只是围绕 Rails 应用程序包装的 gem。

我的 gem 将有一个生成器来创建一个`config.ru`，但 Rails 应用程序将位于 gem 的 lib 目录中。我需要知道如何“嵌入”一个 Rails 应用程序并对其进行配置，以便它可以在 gem 中运行。

例如：

```
$ mygem new project

mygem created a directory called "project" with the following files:

project/config.ru
project/widgets/
project/foobars/ 
```

我的 gem 还将生成一些需要以某种方式添加到 Rails 的目录，以便我可以从 Gem 中的 Rails 应用程序访问这些目录中的代码。

您能给我的任何帮助或建议将不胜感激。

澄清一下，我并不是要创建 Rails 引擎或 Rails 应用程序的插件。我正在尝试创建一个成熟的 Rails 应用程序，但将其打包为 gem，以便我的 gem 的用户可以运行 gem（rails 应用程序），而无需知道它在幕后使用 Rails。

**更新：**好的，我现在有一点工作。我已经创建了 gem 并在 gem 的 lib 目录中生成了 rails 项目。

```
$ bundle gem my_gem && cd my_gem/lib
$ rails new my_gem --skip-bundle 
```

这给我留下了：

```
my_gem/
  my_gem.gemspec
  bin/my_gem
  lib/
    my_gem.rb
    my_gem/
      version.rb # generated by bundler
      # the rails app:
      app/
      config/
      Gemfile
      ...etc 
```

由于这个 gem 需要 Rails，我开始将 Rails Gemfile 中定义的 gem 作为依赖项添加到 gem 的 Gemspec 中，但我对如何处理`assets`Gemfile 中的组有点困惑。

```
# Rails Gemfile
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end

# gemspec
Gem::Specification.new do |gem|
  gem.name          = "my_gem"
  # ...
  gem.add_dependency 'rails', '3.2.8'
  gem.add_dependency 'sqlite3'
  gem.add_dependency 'jquery-rails'
  # how to add the assets group gems?
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T20:16:06.390

试试这个，看看它是否能帮助你取得进步。

Gems 只是文件的目录，您可以将任何您想要的文件放入 gem 中。

## 创造：

创建一个空白 gem 成熟的 Rails 项目：

```
$ bundle gem my_gem 
```

然后是 Rails 应用程序：

```
$ rails new my_app --skip-bundle 
```

将 Rails 文件复制到 gem 中：

```
$ cp -R my_app/* my_gem 
```

将所有内容捆绑到您的 Rails 应用程序中：

```
$ cd my_gem
$ bundle install --binstubs --path vendor/bundle
$ cd - 
```

使 Rakefile 具有 gem 任务和 Rails 设置：

```
#!/usr/bin/env rake
require "bundler/gem_tasks"
require File.expand_path('../config/application', __FILE__)
MyApp::Application.load_tasks 
```

验证它是否启动：

```
$ rails server 
```

## 加载路径：

要控制 Rails 查找文件的位置，例如“外部”配置文件，可以使用 config/application.rb 文件和任何目录路径，如下所示：

```
# Add additional load paths for your own custom dirs
# config.load_paths += %W( #{config.root}/../customdir ) 
```

请注意“..”，这意味着在 Rails 目录*之上。*这为您提供了相对于 gem 的路径。

如果您愿意，您可以指定一个绝对路径，例如，如果您知道用户将始终将他的外部文件保存在“~/myfiles/”中。您还可以选择使用 ENV vars 发送您想要的任何目录。

如果您阅读有关加载路径功能的信息，请查找用于将目录添加到加载路径前面的简写行，因为您可能希望将外部目录放在首位：

```
$:.unshift File.dirname(__FILE__) 
```

## 宝石建造：

编辑 my_gem.gemspec 以添加您自己的描述、主页、摘要等，然后构建：

```
$ gem build my_gem.gemspec
Successfully built RubyGem
Name: my_gem
Version: 0.0.1
File: my_gem-0.0.1.gem 
```

现在，您的 Rails 应用程序已打包为 gem。

config.ru 应该是一个典型的 Rails 文件。AFAIK 没有特别的变化。

当您的用户想要安装您的应用程序时：

```
$ gem install my_gem 
```

gem 将安装在用户的典型 gem 目录中。如果您想对此进行调整，请参阅 ruby​​gems 上的此页面：http: [//docs.rubygems.org/read/chapter/3](http://docs.rubygems.org/read/chapter/3)

## 箱：

您可能还想调查 Crate 项目：

*   Crate：打包独立的 Ruby 应用程序
    [http://www.slideshare.net/copiousfreetime/crate-packaging-standalone-ruby-applications](http://www.slideshare.net/copiousfreetime/crate-packaging-standalone-ruby-applications)

## 架子：

在这里使用 config.ru 是典型的 Rails 设置：

```
# Rails.root/config.ru
require "config/environment"

use Rails::Rack::LogTailer
use ActionDispatch::Static
run ActionController::Dispatcher.new 
```

对于您的项目，您希望在 Rails 之前需要一些文件。您将想要了解 Ruby “require”以及它如何使用 LOAD_PATH 查找文件。

简单的方法：

```
# Rails.root/config.ru
require_relative 'filename'
require "config/environment" 
```

或者将用户的自定义目录放在几个目录级别：

```
require './../../filename'  # not the best for security 
```

或者要使用绝对路径，请阅读 File.expand_path：

```
File.expand_path(__FILE__) 
```

或者使用当前目录并将其放在加载路径上：

```
$LOAD_PATH.unshift(File.dirname(__FILE__))
require 'filename' 
```

很多选择供您考虑。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:03:43.753

那么“我将如何在 gem 中运行 Rails 应用程序？”这个问题呢？

Rails 应用程序具有运行 Web 服务器的控制器和视图。您需要的是创建、列出、更新和销毁的操作。在没有 Web 服务器的情况下公开这些操作本质上是在一个类中拥有这样的方法。这首先是一种普通的标准类型的宝石。

所以也许你的问题真的是，我如何在我有 ActiveRecord 和其他 Rails 东西的地方写一个 gem。

首先，您需要使您的 gem 依赖于您需要的 Rails gem。您可以在 gemspec 文件中为您的 gem 执行此操作。

那么这真的只是你的 gem 代码需要你需要的正确 Rails gem 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:52:52.330

我不确定这是否会有所帮助，因为我通读了所有内容，但找不到您这样做的动机。我想出的原因之一是制作可以在桌面环境中使用的东西。在这种情况下，您可以尝试使用类似[Bowline](http://bowlineapp.com/)的东西。如果您只是想提供一个其他人可以下载和使用并自行安装的应用程序，那么您可能会假设他们至少可以遵循基本的开发人员说明，您可以在 github 上或以 zip 文件的形式提供整个应用程序。[在Fat Free CRM 的 github 页面](https://github.com/fatfreecrm/fat_free_crm)上查看其他人做类似事情的示例。

# c# - 完成 SQLite 3 语句

> ID：12039867
> 
> 赞同：3
> 
> 时间：2012-08-20T14:46:20.633
> 
> 标签：c#, sqlite, windows-8, microsoft-metro, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我是 SQLite 的新手，我在我的应用程序中集成了 SQLite 3.7.13，它运行良好，请在下面观察我的代码

```
var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "Test.db");
using (var db = new SQLite.SQLiteConnection(dbPath))
{                       
    var data = db.Table<tablename>().Where(tablename => tablename.uploaded_bool == false && tablename.Sid == 26);
    try
    {
        int iDataCount = data.Count();
        int id;                        
        if (iDataCount > 0)
        {                  
            for (int i = 0; i < iDataCount; i++)
            {
                Elements = data.ElementAt(i);
                id = Elements.id;
                /*
                Doing some code
                */                                               
            }     
             int i = db.Delete<tablename>(new tablename() { Sid = 26 });
        }
    }
    catch (Exception ex)
    {

    }
} 
```

其中“Sid”是我数据库中的列，编号为“26”我将获得 n 行所以，使用 for 循环我需要做一些代码，在 for 循环之后我需要删除 Sid(26) 的记录数据库，所以在这一行

```
int i = db.Delete<tablename>(new tablename() { Sid = 26 }); 
```

我遇到了`unable to close due to unfinalised statements`异常，所以我的问题是如何在 sqlite3 中完成语句，显然 SQLite3 有一个用于销毁以前的数据库调用的 finalize 方法，但我不确定如何实现这一点。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:26:00.243

在幕后，sqlite-net 做了一些令人惊奇的事情，试图为您管理查询和连接。

例如，线

```
var data = db.Table<tablename>().Where(...) 
```

实际上并不建立连接或对数据库执行任何操作。相反，它创建了一个名为 TableQuery 的类的实例，该类是可枚举的。

你打电话时

```
int iDataCount = data.Count(); 
```

TableQuery 实际执行

```
GenerateCommand("count(*)").ExecuteScalar<int>(); 
```

你打电话时

```
Elements = data.ElementAt(i); 
```

TableQuery 实际调用

```
return Skip(index).Take(1).First(); 
```

**Take(1).First()**最终调用**GetEnumerator**，它编译 SQLite 命令，使用 TOP 1 执行它，并将结果序列化回您的数据类。

因此，基本上，每次调用**data.ElementAt**时，您都在执行另一个查询。这与仅访问集合或数组中的元素的标准 .NET 枚举不同。

我相信这是你问题的根源。我建议您不要获取计数并使用**for(i, ...)**循环，而只需执行**foreach (tablename tn in data)**即可。这将导致一次获取所有记录，而不是在循环中逐条记录。仅此一项就足以关闭查询并允许您在循环期间删除表。如果没有，我建议您创建一个集合并在循环期间将每个 SID 添加到集合中。然后，在循环后返回并在另一遍中删除 sids。最坏的情况是，您可以关闭循环之间的连接。

希望有帮助。

# grails - 如何为插件开发创建 Grails 框架项目？

> ID：12039869
> 
> 赞同：0
> 
> 时间：2012-08-20T14:46:28.480
> 
> 标签：grails

我正在使用建立在 Grails 之上的（某种）框架。该框架是一组 Grails 插件，为 Grails 应用程序添加功能（例如用户身份验证）。这个框架设置起来有点麻烦，因为它需要在应用程序`Config.groovy`文件中进行大约 64 行特定于站点的配置。

我想将此应用程序的插件开发为插件。也就是说，Grails 应用程序实际上只是一组已安装的插件和一些配置文件。

我创建了一个本地 Maven 样式存储库来保存我的所有插件。因此，我可以将插件依赖项添加到`BuildConfig.groovy`文件中，它们将自动安装（附带问题：是否可以指定安装顺序？）。

所以我的问题是，我如何创建骨架项目来开发我的插件：

1.  包括我的应用程序的基本配置（前面提到的 64 行）
2.  允许我*只*`grails package-plugin`打包插件的代码

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:10:25.367

您可以使用安装后挂钩机制： http: [//grails.org/doc/latest/guide/plugins.html#hookingIntoBuildEvents](http://grails.org/doc/latest/guide/plugins.html#hookingIntoBuildEvents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:36:27.340

对我来说并不是一个理想的设置，但以下工作：

1.  创建“基础”应用程序：`cd ~/GrailsDev/ && grails create-app my-app`
2.  `my-app`根据需要/需要进行配置
3.  创建您的依赖插件：`cd ~/GrailsDev/ && grails create-plugin my-app-plugin`
4.  通过编辑“~/GrailsDev/my-app/grails-app/conf/BuildConfig.groovy”并将新插件添加到应用程序并附加以下行：`grails.plugin.location.'my-app-plugin' = "../my-app-plugin"`

您现在可以运行`my-app`Grails 应用程序，并且该插件将被包含在内。当您的插件完全开发后，您可以`grails package-plugin`从“~/GrailsDev/my-app-plugin”目录中打包您的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T14:21:19.330

使用梯度。您可以指定顺序并单独打包您的插件。

例如，在您的插件项目中包含所需的插件作为 git 模块（用于轻松版本控制）和 gradle 模块（用于构建您的插件）。我想这个设置将很好地满足您的要求。

[https://github.com/grails/grails-gradle-plugin](https://github.com/grails/grails-gradle-plugin)

IntelliJ 确实有一个用于 gradle-backed grails 应用程序和插件的模板。*

# java - FLAG_ACTIVITY_CLEAR_TOP 不工作

> ID：12039874
> 
> 赞同：5
> 
> 时间：2012-08-20T14:46:49.170
> 
> 标签：java, android

我遇到了 FLAG_ACTIVITY_CLEAR_TOP 的问题。当用户启动应用程序时，会出现一个屏幕供他们登录或注册。一旦用户登录到应用程序，我希望所有以前的活动都关闭。当我按下后退按钮时，它会注销用户并将他们带回 LAUNCHER 活动。

以下是我的登录活动：

```
public class login extends AsyncTask<String, String, String>{

        //Declaring global variables to be used throughout asyn class

         String email;
         String password;
         UserFunctions userFunction;
         JSONObject json;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pDialog = new ProgressDialog(LoginActivity.this);
            pDialog.setMessage("Logging into Thryfting...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            publishProgress();

                email = inputEmail.getText().toString();
                password = inputPassword.getText().toString();
                userFunction = new UserFunctions();
                json = userFunction.loginUser(email, password);

            // check for login response
            try {
                //if (json.getString(KEY_SUCCESS) != null) {
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    }

            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
                // TODO Auto-generated method stub
                pDialog.dismiss();

                 email = inputEmail.getText().toString();
                 password = inputPassword.getText().toString();
                 userFunction = new UserFunctions();
                 json = userFunction.loginUser(email, password);

                try {
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                     // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), Timeline.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                    }
                    else{
                    // Error in registration
                    Toast.makeText(getApplicationContext(), "Wrong Email and password combination", Toast.LENGTH_SHORT).show();
                    }
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:44:50.370

如果您正在调用`finish()`您的登录活动，那么`FLAG_ACTIVITY_CLEAR_TOP`将无法正常工作。

`finsh()`从此处从您的登录活动中删除

```
startActivity(dashboard);

// Close Login Screen
finish(); //remove this 
```

在您的 onPostExecute 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T07:31:41.720

而不是使用 addflags 来清除活动尝试这个

```
dashboard.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

这肯定会解决你的问题。

# javascript - tinyMCE 不添加特定文本区域的控件

> ID：12039875
> 
> 赞同：1
> 
> 时间：2012-08-20T14:46:49.643
> 
> 标签：javascript, jquery, python, django, tinymce

我正在尝试添加一个 textarea 并动态激活它

```
tinyMCE.execCommand('mceAddControl', false,'id') 
```

我已经在其他 textarea 上尝试过，效果很好，但不适用于这个特定的 textarea：

```
'id_sguidepoint_set-'+index+'-gp_description' 
```

会不会是名字太大了？还是因为某些字符在 tinyMCE 中无效？

这是我的 tinyMCE 初始配置：

```
tinyMCE.init({
            mode : "textareas",
            theme : "advanced",
            plugins : "emotions,spellchecker,advhr,insertdatetime,preview,jbimages", 

            // Theme options - button# indicated the row# only
            theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
            theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,jbimages,|,code,preview,|,forecolor,backcolor",
            theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",      
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_resizing : false ,
            relative_urls : false
    }); 
```

这是我要激活的元素：

```
<textarea id="id_sguidepoint_set-3-gp_description" rows="10" cols="40" name="sguidepoint_set-3-gp_description" style="display: none; " aria-hidden="true"></textarea> 
```

显然有不止一个文本区域，这就是为什么我必须使用索引来遍历它们

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:02:25.043

好的，在尝试了很多不同的事情之后，我发现我的问题是 textarea 被隐藏了：

```
style= "display: none" 
```

这就是问题所在，因为可以绘制文本区域，所以一切正常。

我希望它对遇到相同问题的其他人有所帮助。

问候

# c - 无法识别 execl() 函数调用的行为

> ID：12039876
> 
> 赞同：2
> 
> 时间：2012-08-20T14:46:57.600
> 
> 标签：c, curl, system

当我需要使用“curl”从 www 获取一些数据时，我正在处理我的项目。现在首先我尝试了直接 system() 函数但它没有工作，奇怪的是每次它在使用 gcc 编译时破坏了整个源代码文件。幸运的是，我正在单独测试它。然后我测试了 execl() 函数，这段代码编译正常，gcc 给了我一个 .exe 文件来运行，但是当我运行它时没有任何反应，出现空白窗口。代码：

```
 int main(){
        execl("curl","curl","http://livechat.rediff.com/sports/score/score.txt",">blahblah.txt",NULL);
         getch();
    return 0;
    } 
```

包含未正确显示，但我已包含 stdio、conio、stdlib 和 unistd.h。如何获取程序的输出以存储在文本文件中？同样运行上述命令会在我的文档中创建和存储文本文件，我希望它位于我运行程序的本地目录中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:07:24.650

需要提供 curl 的路径，并且不能使用重定向，因为应用程序不会通过 bash 执行。而是使用`-o`标志并指定文件名。此外，`execl`成功时不返回：

```
#include <unistd.h>
#include <stdio.h>
int main(){
  execl("/usr/bin/curl",
        "curl","http://livechat.rediff.com/sports/score/score.txt",
        "-oblahblah.txt",NULL
  );
  printf("error\n");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:15:52.987

如果您希望您的代码返回，您应该派生一个子进程来运行该命令。这样您就可以检查返回码。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

#define CURL "/usr/bin/curl"

int main()
{
  pid_t pid;
  int status;

  pid = fork();

  if (pid == 0)
  {
    execl(CURL, CURL, arg1, NULL);
  }

  else if (pid < 0)
  {
    printf("Fork failed\n");
    exit (1);
  }

  else
  {
    if (waitpid(pid, &status, 0) != pid)
      status = -1;
  }

  return status;
} 
```

arg1 是您想与 curl 一起使用的任何参数，或者如果您没有使用任何参数，那么您显然可以省略它。

# php - MySql SSL 与 Zend-Framework 的连接

> ID：12039877
> 
> 赞同：6
> 
> 时间：2012-08-20T14:46:58.497
> 
> 标签：php, mysql, zend-framework, ssl

我对 Zend-Framework 很陌生，但我设法在我的 PC 中构建了一个简单的站点，其中包含 2 个页面，显示本地数据库中表的内容。问题是当我在服务器上安装站点时，它不起作用，因为在生产服务器中，必须使用 SSL 建立与本地 mysql 服务器的连接。

我搜索了需要添加到**application.ini**以启用 ssl 连接的键，但在 ZendFramework 文档中找不到任何键。这是我的**application.ini的代码**

```
 resources.multidb.config.adapter = "pdo_mysql"
    resources.multidb.config.host = "localhost"
    resources.multidb.config.username = "Administrator"
    resources.multidb.config.password = "xxx"
    resources.multidb.config.dbname = "config"
    resources.multidb.config.default = true 
```

你知道 ZendFramework 是否支持 ssl 连接到 mysql 服务器以及如何配置它？如果没有：有一些解决方法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:16:41.557

我认为目前不支持。[Carl Welch在](http://framework.zend.com/issues/secure/ViewProfile.jspa?name=cwelch)[票证 #6140](http://framework.zend.com/issues/browse/ZF-6140)（见附件）中对其进行了修补`library.diff`，但是，更改似乎还没有出现在后备箱中。

我建议为这个问题投票（你必须先登录）。

# android - Android Ustream 分享

> ID：12039882
> 
> 赞同：4
> 
> 时间：2012-08-20T14:47:17.373
> 
> 标签：android, flash

我正在尝试创建一个应用程序，该应用程序将从 ustream 直播一个电视台，但似乎没有任何效果。页面没有加载视频。下面是我的代码

```
package i;

import i.standard.R;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.AttributeSet;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.webkit.GeolocationPermissions;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;

 public class HTML5WebView extends WebView {

private Context                             mContext;
private MyWebChromeClient                   mWebChromeClient;
private View                                mCustomView;
private FrameLayout                         mCustomViewContainer;
private WebChromeClient.CustomViewCallback  mCustomViewCallback;

private FrameLayout                         mContentView;
private FrameLayout                         mBrowserFrameLayout;
private FrameLayout                         mLayout;

static final String LOGTAG = "HTML5WebView";

private void init(Context context) {
    mContext = context;     
    Activity a = (Activity) mContext;

    mLayout = new FrameLayout(context);

    mBrowserFrameLayout = (FrameLayout) LayoutInflater.from(a).inflate(R.layout.custom_screen, null);
    mContentView = (FrameLayout) mBrowserFrameLayout.findViewById(R.id.main_content);
    mCustomViewContainer = (FrameLayout) mBrowserFrameLayout.findViewById(R.id.fullscreen_custom_content);

    mLayout.addView(mBrowserFrameLayout, COVER_SCREEN_PARAMS);

    mWebChromeClient = new MyWebChromeClient();
    setWebChromeClient(mWebChromeClient);

    setWebViewClient(new MyWebViewClient());

    // Configure the webview
    WebSettings s = getSettings();
    s.setBuiltInZoomControls(true);
    s.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
    s.setUseWideViewPort(true);
    s.setLoadWithOverviewMode(true);
    s.setSavePassword(true);
    s.setSaveFormData(true);
    s.setJavaScriptEnabled(true);

    // enable navigator.geolocation 
    s.setGeolocationEnabled(true);
    s.setGeolocationDatabasePath("/data/data/org.itri.html5webview/databases/");

    // enable Web Storage: localStorage, sessionStorage
    s.setDomStorageEnabled(true);

    mContentView.addView(this);
}

public HTML5WebView(Context context) {
    super(context);
    init(context);
}

public HTML5WebView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public HTML5WebView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

public FrameLayout getLayout() {
    return mLayout;
}

public boolean inCustomView() {
    return (mCustomView != null);
}

public void hideCustomView() {
    mWebChromeClient.onHideCustomView();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if ((mCustomView == null) && canGoBack()){
            goBack();
            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
}

private class MyWebChromeClient extends WebChromeClient {
    private Bitmap      mDefaultVideoPoster;
    private View        mVideoProgressView;

    @Override
    public void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)
    {
        //Log.i(LOGTAG, "here in on ShowCustomView");
        HTML5WebView.this.setVisibility(View.GONE);

        // if a view already exists then immediately terminate the new one
        if (mCustomView != null) {
            callback.onCustomViewHidden();
            return;
        }

        mCustomViewContainer.addView(view);
        mCustomView = view;
        mCustomViewCallback = callback;
        mCustomViewContainer.setVisibility(View.VISIBLE);
    }

    @Override
    public void onHideCustomView() {

        if (mCustomView == null)
            return;        

        // Hide the custom view.
        mCustomView.setVisibility(View.GONE);

        // Remove the custom view from its container.
        mCustomViewContainer.removeView(mCustomView);
        mCustomView = null;
        mCustomViewContainer.setVisibility(View.GONE);
        mCustomViewCallback.onCustomViewHidden();

        HTML5WebView.this.setVisibility(View.VISIBLE);

        //Log.i(LOGTAG, "set it to webVew");
    }

    @Override
    public Bitmap getDefaultVideoPoster() {
        //Log.i(LOGTAG, "here in on getDefaultVideoPoster");    
        if (mDefaultVideoPoster == null) {
            mDefaultVideoPoster = BitmapFactory.decodeResource(
                    getResources(), R.drawable.default_video_poster);
        }
        return mDefaultVideoPoster;
    }

    @Override
    public View getVideoLoadingProgressView() {
        //Log.i(LOGTAG, "here in on getVideoLoadingPregressView");

        if (mVideoProgressView == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);
            mVideoProgressView = inflater.inflate(R.layout.video_loading_progress, null);               
        }
        return mVideoProgressView; 
    }

     @Override
     public void onReceivedTitle(WebView view, String title) {
        ((Activity) mContext).setTitle(title);
     }

     @Override
     public void onProgressChanged(WebView view, int newProgress) {
         ((Activity) mContext).getWindow().setFeatureInt(Window.FEATURE_PROGRESS, newProgress*100);
     }

     @Override
     public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
         callback.invoke(origin, true, false);
     }
}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.i(LOGTAG, "shouldOverrideUrlLoading: "+url);
        view.loadUrl(url);
        return true;
    }
}

static final FrameLayout.LayoutParams COVER_SCREEN_PARAMS =
    new FrameLayout.LayoutParams( ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT); 
```

}

我创建了一个类来实现上面的html5..检查包i下面的代码；

```
import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;

public class TestHTML5WebView extends Activity {

HTML5WebView mWebView;

String url="http://www.ustream.tv/embed/10464044";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mWebView = new HTML5WebView(this);

    if (savedInstanceState != null) {
           mWebView.restoreState(savedInstanceState);//http://www.ustream.tv/KTNKENYALIVE///http://youtu.be/Mmry0Bdj9Vg
    } else {    
        mWebView.loadUrl(url);
    }

    setContentView(mWebView.getLayout());
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    mWebView.saveState(outState);
}

@Override
public void onStop() {
    super.onStop();
    mWebView.stopLoading();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (mWebView.inCustomView()) {
            mWebView.hideCustomView();
            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

}

# java - 使用 Java 语言绑定绕过 Webdriver 中的 CERT 异常

> ID：12039883
> 
> 赞同：0
> 
> 时间：2012-08-20T14:47:17.700
> 
> 标签：java, webdriver, ssl-certificate

我有一个来自 Web 应用程序的 https 登录页面，我正在尝试使用 Webdriver 自动化。

登录网址：[https://abcd/web/certLogon.jsp](https://a.b.c.d/web/certLogon.jsp)

我查看了[使用 webdriver 处理不信任的证书](https://stackoverflow.com/questions/5933871/handling-untrustedsslcertificates-using-webdriver)

但是由于我的证书没有针对 abcd 准备（这在测试环境中很常见），所以这是行不通的。我得到错误：（Error_code：ssl_error_bad_cert_domain）

那么，是否可以完全通过 pypass 主机检查？类似于我们在 HttpsURLConnection 中的做法？

```
URL url = new URL(httpsURL);

            HttpsURLConnection httpsCon = (HttpsURLConnection) url
                    .openConnection();

            httpsCon.setHostnameVerifier(new HostnameVerifier() {

                public boolean verify(String hostname, SSLSession session) {

                    return true;
                }
            }); 
```

这似乎是一个常见的用例，所以人们会认为 Webdriver 应该有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:58:52.443

```
FirefoxProfile profile = new FirefoxProfile();
        profile.setPreference("network.http.phishy-userpass-length", 255);
        profile.setAssumeUntrustedCertificateIssuer(false); 
```

# testing - JUnit：是否有一个 RunListener 方法，在 @After 注释方法之后调用？

> ID：12039885
> 
> 赞同：0
> 
> 时间：2012-08-20T14:47:26.110
> 
> 标签：testing, junit, listener, testng

在运行了测试方法的所有 @After 注释方法之后，有没有办法调用方法？我需要这个为我的公司建立一个特殊的框架。在 testng 中，我可以使用 afterInvocation 方法，该方法在每个配置方法之后调用。JUnit 中是否有替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:18:01.407

一条规则将在所有`@After`s 之后运行。[ExternalResource](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/ExternalResource.html)可能会被滥用以做你想做的事：

```
public class VerifyTest {
    @Rule public ExternalResource externalResource = new ExternalResource() {
        public void after() {
            System.out.println("ExternalResource.after");
        }
    };

    @After
    public void after1() {
        System.out.println("after1");
    }

    @After
    public void after2() {
        System.out.println("after2");
    }

   @Test
   public void testVerify throws IOException {
   }
} 
```

# php - PHP MYSQL - 内存 - 无法保存结果集

> ID：12039891
> 
> 赞同：1
> 
> 时间：2012-08-20T14:47:50.603
> 
> 标签：php, mysql, memory, browser

我有一个包含 15 万条记录的数据库，听起来并不多。我遇到的问题是，当我在没有文件管理器的情况下运行搜索（返回所有 150k 记录）时，我“无法保存结果集”，但是当我添加一个过滤器将结果减少一半时，它工作正常。此外，当我在 phpmyadmin 中运行它时，它工作正常。

只有当我在浏览器中运行 sql 时才会出现此错误。谷歌搜索后，我发现可能是浏览器中的内存无法返回那么多结果。

有人可以向我解释这一点，更重要的是为我提供一个解决方案，以便我可以返回所有 150k 记录而不会出错。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:59:17.647

当结果集可能大到足以导致内存耗尽时使用无缓冲查询 [http://php.net/manual/en/mysqlinfo.concepts.buffering.php](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:52:47.560

您应该尝试增加 PHP 脚本的内存限制。

尝试放置：

```
ini_set('memory_limit', '128M'); 
```

在脚本的开头。

也可以看看：

[http://php.net/manual/en/function.ini-set.php](http://php.net/manual/en/function.ini-set.php)

[http://php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T21:49:38.530

有时，损坏的 MySQL 表可能会导致此警告。如果您认为有足够的内存来处理您的结果集，只需检查您的表格。

# jquery - jQuery remove 无法正常工作，jquery 1.7.2

> ID：12039892
> 
> 赞同：1
> 
> 时间：2012-08-20T14:47:54.283
> 
> 标签：jquery

我有这个 HTML5 代码（例如）：

```
 <form id="peopleFormView">
     <input type="checkbox" name="name1" value="5" />
     <input type="checkbox" name="name3" value="2" />
     <input type="checkbox" name="name4" value="3" />
  </form>

  <table id="domain5">
     <tbody></tbody>
  </table> 
```

这段代码是用 JS 处理的：

```
 $(function(){
   registerPerformersClickHandler();
 });

 function registerPerformersClickHandler(){

   $('#peopleFormView input').click(function(){
     var IdPerson = $(this).val();

     if ($('#performer'+IdPerson).length == 0){
         performer.add(IdPerson);
     }
     else{
         performer.del(IdPerson);
     }

 });

 var performer = {
     del: function(IdPerson){
       $('#performer'+IdPerson).remove();
    }
 } 
```

识别元素存在 $('#performer'+IdPerson).length == 0 工作正常，但是当添加元素时

```
 <tr id="performer5">
    <td>Surname name</td>
  </tr> 
```

然后我再次单击相同的输入，JS 正确调用了 performer.del()，但什么也没发生，没有错误，没有反应。如果我像这样调用 remove 两次：

```
var performer = {

 add: function(IdPerson){
    var requestData = {
        className : 'Performer',
        method : 'getPerformerRowView',
        params : IdPerson
    };

    $.post(openAjaxLoader, requestData)
       .success(function(data){
          orchestraDomain.addPerformerToDomain(data.IdDomain, data.performer);
       })
       .error(function(data){
          window.alert(data.error);
       })
 }
 ,
 del: function(IdPerson){
    alert( $('[id=performer'+IdPerson+']').length ); 
    $('#performer'+IdPerson).remove();
    $('#performer'+IdPerson).remove();
 }

}

var orchestraDomain = {

 addPerformerToDomain: function(IdDomain, performer){
     $('#domain'+IdDomain+' tbody').append(performer);
 }

} 
```

.. 有用。如果通话是这样的

```
 var performer = {
     del: function(IdPerson){
       $('#performer'+IdPerson).remove().remove();
    }
 } 
```

..它不起作用。我没有看到问题，看到你的人吗？

:: 有什么魔法，你不觉得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:00:58.273

您有重复的 ID，这就是我认为以及如何确认的原因：

按 ID 删除元素应该只需要完成一次。如果您必须执行两次，则您有两个具有该 ID 的元素。

`.remove().remove()`不起作用，因为第一个 .remove 将删除所有选定的元素。它只删除选定的元素，它应该只有一个元素。

选择元素两次并删除它两次获得所需结果的事实也证实了您有两个具有该 id 的元素。以下是您可以运行的另一项测试：

```
var performer = {
    del: function(IdPerson){
        alert( $('[id=performer'+IdPerson+']').length ); // if > 1, your html is invalid and you have duplicate id's.
        $('#performer'+IdPerson).remove();
    }
} 
```

# qt4 - 如何阻止背景在 QpaintEvent 中重复

> ID：12039893
> 
> 赞同：0
> 
> 时间：2012-08-20T14:47:53.920
> 
> 标签：qt4, qpainter, qpixmap, paintevent

我有一个paintEvent，每次我画一些东西时我都会添加背景，问题是我需要图像停止重复。

例如，如果我的背景图像是 20 像素 x 20 像素，而我的绘画区域是 40 像素 x 40 像素，那么背景是 4 个图像，我只需要一个。

这是我的代码。

```
1\. QPainter painter; // painter for the canvas
2\. painter.begin(this);
3\. QPixmap backgroundImage;
4\. backgroundImage.load("multimedia/monitor_image.png");
5\. painter.fillRect(event->rect(), QBrush(backgroundImage)); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:56:02.300

有很多函数可以帮助缩放图片：

[http://doc.qt.nokia.com/4.7-snapshot/qpixmap.html](http://doc.qt.nokia.com/4.7-snapshot/qpixmap.html)

如果您知道高度，请尝试“scaleToHeight”。

像这样的东西应该工作：

```
backgroundImage = backgroundImage.scaledToHeight(painter.height); 
```

在调用 fillRect 之前执行此操作，如果它是一个完美的正方形，那么您应该没有问题。

# css - 如何在 nokogiri css 选择器中使用 ruby 表达式插值“#{var}”？

> ID：12039896
> 
> 赞同：2
> 
> 时间：2012-08-20T14:48:00.183
> 
> 标签：css, ruby, nokogiri

我一直在使用 nokogiri css，我希望能够在 css 选择器中使用 ruby​​ 表达式插值，但它不起作用。这是我想使用的代码：

```
doc = Nokogiri::HTML(open('http://www.somepage.com'))
keys=["BHiuG", "hUYtb4F", "jefHUY78i"]
keys.each do |k|
    keyvalue = doc.css('span[class="#{k}"]').children
    puts keyvalue
end 
```

有没有办法让类似的语法工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T14:52:03.173

它与 Nokogiri 无关：问题是您使用的是单引号，但 Ruby 中的字符串插值需要双引号。由于CSS 选择器上也允许使用[单引号，所以我会写：](https://stackoverflow.com/a/5578903/188031)

```
doc.css("span[class='#{k}']").children 
```

# c - 宏等价物（C/C++）？

> ID：12039900
> 
> 赞同：0
> 
> 时间：2012-08-20T14:48:17.727
> 
> 标签：c, macros, c-preprocessor

给定这个宏：

```
#define SOME_MACRO(ret, f, args) \
    typedef ret (*some_func_##f) args; \
    static some_func_##f my_func_##f = NULL; 
```

请让我知道等效项：

```
SOME_MACRO(void,  myFunctionName, (int a)); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:51:36.090

您可以使用`-E`gcc 的标志来查看宏是如何展开的：

```
typedef void (*some_func_myFunctionName) (int a); static some_func_myFunctionName my_func_myFunctionName = ((void *)0);; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:52:14.110

```
static void (*my_func_myFunctionName) (int a) = NULL; 
```

它将一个变量声明`my_func_myFunctionName`为一个函数指针，指向一个函数，该函数接受一个`int`并且不返回任何内容 ( `void`)。它将变量初始化为`NULL`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:55:26.710

```
 #define SOME_MACRO(ret, f, args) \
    typedef ret (*some_func_##f) args; \
    static some_func_##f my_func_##f = NULL; 
```

SOME_MACRO(void, myFunctionName, (int a));

将转化为

```
typedef void (*some_func_myFunctionName) (int a); //## concats myFunctionName to some_func_, ret becomes void
static some_func_myFunctionName my_func_myFunctionName = NULL; 
```

> ```
>  ##f concats myFunctionName to some_func_,
>  ret becomes void
>  args is (int a) 
> ```

# java - 将数据从 Android 活动发送到 Web 表单

> ID：12039907
> 
> 赞同：1
> 
> 时间：2012-08-20T14:48:33.443
> 
> 标签：java, android, httpclient

我是 android 编码的新手，我环顾四周，试图找到解决问题的方法。我要发送数据的网站有一个表格。我想从编辑文本字段中的活动中收集数据并将其发送到 Web 表单并提交 Web 表单。

经过一些在线阅读后，我遇到了以下方法。有人能告诉我这是否正确吗？如果网络表单有一个名为“名称”的字段（我可以访问站点源）。并且用户输入“John Doe”，所以 NameValue 对将是“name”，“John Doe”，对吗？

```
HttpClient httpClient = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(httpClient.getParams(),10000);
HttpConnectionParams.setSoTimeout(httpClient.getParams(),10000);
HttpPost httpPost = new HttpPost(url);  
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("name1", "value1"));  
nameValuePairs.add(new BasicNameValuePair("name2", "value2")); 
nameValuePairs.add(new BasicNameValuePair("name3", "value3"));   
    // etc...
    try{
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
        HttpResponse response = httpClient.execute(httpPost);
        BufferedReader br = new BufferedReader(new                InputStreamReader(response.getEntity().getContent()));

    }
    catch(Exception e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:51:15.890

是的，您通过邮寄方式提交数据。以防万一您不知道：您应该将数据发布到“表单操作”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:51:26.670

是的，您想要发送的任何数据都需要添加到`nameValuePairs`

```
nameValuePairs.add(new BasicNameValuePair("name", "Jhon Deo")); 
```

# ruby-on-rails - 返回结果返回查看

> ID：12039909
> 
> 赞同：0
> 
> 时间：2012-08-20T14:49:00.743
> 
> 标签：ruby-on-rails, haml, helper

我试图将我所有的逻辑都排除在视图之外，并提出了以下代码，尽管我拥有的是它没有返回实际的分数值，它只是返回如果它是赢、输或平

```
def find_result(schedule)
return "not required" if schedule.event != '1' or schedule.time >= Time.now
if schedule.for.nil? or schedule.against.nil?
  "Not Entered"
else
  tie = '<b>T</b> '
  tie << schedule.for.to_i
  tie << ' - '
  tie << schedule.against.to_i
  win = '<b>W</b> '
  win << schedule.for.to_i
  win << ' - '
  win << schedule.against.to_i
  return raw tie  if schedule.for.to_i == schedule.against.to_i
  schedule.for.to_i > schedule.against.to_i ? (raw win) : "Lost"
end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:04:50.630

不要`<<`与整数一起使用。请参阅文档：
[http ://www.ruby-doc.org/core-1.9.3/String.html#method-i-3C-3C](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-3C-3C)

它可能会将您的赢/输数字转换为 HTML 中未显示的字符。

使用格式化程序或其他东西，或者可能只是`to_s`而不是`to_i`在附加数字时。

使用字符串格式的示例（未经测试）：

```
def find_result(schedule)
  return "not required" if schedule.event != '1' or schedule.time >= Time.now
  if schedule.for.nil? or schedule.against.nil?
    "Not Entered"
  elsif schedule.for.to_i < schedule.against.to_i
    "Lost"
  else
    raw "<b>%s</b> %d - %d" % [
      schedule.for.to_i == schedule.against.to_i ? 'T' : 'W',
      schedule.against.to_i,
      schedule.for.to_i
    ]
  end 
```

## 编辑：重构

将逻辑排除在视图之外是好的，但将其中的一些移到模型中会更合适，即时间表的结果（未进入、获胜、失败、平局）

在示例中，我将创建一个简单的内部类来封装该逻辑，Schedule 使用它来了解自己的结果。您可以通过多种方式执行此操作（例如，模块与类，或直接在 Schedule 上的方法）

然后，我将演示如何使用提供的逻辑在帮助程序中使用新计划，或者简单地查询结果本身并将其用作翻译查找 (I18n) 的键。

请注意，这是未经测试的并且有点伪代码（我没有特别使用任何 I18n 库，只是猜测方法和翻译格式）。但它应该进行一些调整，或者至少让您了解另一种做事方式。

```
class Schedule

  # The schedule jus instantiates a result object when you ask for one.
  # For convenience the result's to_s is it's value, e.g. "win"
  def result
    Result.new(self.for, self.against)
  end

  # delegate methods querying the result
  delegate :win?, :loss?, :tie?, :not_entered?, :to => :result

  class Result
    Values = %(win loss tie not_entered)
    Win = Values[0]
    Loss = Values[1]
    Tie = Values[2]
    NotEntered = Values[3]

    attr_reader :for, :against

    def initialize(_for, against)
      @for = _for
      @against = against
    end

    def value
      return NotEntered unless [@for, @against].all?
      case v = @for - @against
      when v.zero? then Tie
      when v > 0 then Win
      else Loss
      end
    end

    alias :to_s :value

    def not_entered?; self.value == NotEntered end
    def win?; self.value == Win end
    def loss?; self.value == Loss end
    def tie?; self.value == Tie end
  end
end

# then in your helper, something like
def find_result(schedule)
  # you'd want to refactor this requirement part too
  return "not required" if schedule.event != '1' or schedule.time >= Time.now

  # Now you could do it essentially the way you had, with ifs or a 
  # case statement or what have you, but the logic for the result is kept 
  # where it belongs, on the class.
  if schedule.not_entered?
    "Not Entered"
  elsif schedule.loss?
    "Loss"
  else
    prefix = schedule.win? ? "W" : "T"
    raw "<b>%s</b> %d - %d" % [prefix, schedule.for, schedule.against]
  end

  # OR you could use some kind of translation library using the `value` 
  # returned by the result.  Something like:
  key = ["schedule", schedule.outcome.value].join(".")
  raw I18n.translate(key, {:for => schedule.for, :against => schedule.against})
end

# if you used the latter, it would lookup the translation in some other place, 
# e.g. some config JSON, which might look like this (more or less, and 
# depending on the lib you use):

{
  "schedule": {
    "win": "<b>W</b> {{for}} - {{against}}",
    "tie": "<b>T</b> {{for}} - {{against}}",
    "loss": "Loss",
    "not_entered": "Not Entered"
  }
}

# The translation has a few advantages.  It would allow you to sub in other 
# languages, but also, it conveniently keeps all of the app's text in one 
# place, if you stick to using it. 
```

# java - 如何编辑检票口表中的值

> ID：12039910
> 
> 赞同：2
> 
> 时间：2012-08-20T14:49:01.210
> 
> 标签：java, wicket

我创建了带有可编辑表格和提交按钮的表单：

```
 @Override
            protected void populateItem(final Item<Game> listItem) {
                final Game game = listItem.getModelObject();
                listItem.setModel(new CompoundPropertyModel<Game>(game));
                listItem.add(new TextField("players", Model.of(game.getPlayerResult().getPlayer().getName() + ":"
                        + game.getOpponent().getPlayer().getName())));
                listItem.add(new TextField("leftSide", Model.of(game.getResult().getLeftSide())));
                listItem.add(new TextField("rightSide", Model.of(game.getResult().getRightSide())));
                listItem.add(new CheckBox("overtime", Model.of(game.getResult().getOvertime())));

            } 
```

现在我想保存我插入的新值，但是当我调用时：

```
 add(new Button("submit") {

            private static final long serialVersionUID = 1L;

            @Override
            public void onSubmit() {

                Iterator<Item<Game>> a = dataView.getItems();
                while (a.hasNext()) {
                    Game game = a.next().getModelObject();     
                        System.out.println(game.getPlayerResult().getPlayer().getName());
                }
                setResponsePage(new SchedulePage(tournament, table));
            }
        }); 
```

它仍然打印旧值。那么如何获得具有新值的表格呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:21:43.333

按照您的操作方式，文本字段无法将值写回到您的域对象中。

了解模型，然后使用适当的模型：

```
listItem.add(new TextField("rightSide", new PropertyModel(game, "result.rightSide"))); 
```

还有许多其他选项，例如[safemodel](https://github.com/duesenklipper/wicket-safemodel)。

# asp.net - 类别数据库模式

> ID：12039911
> 
> 赞同：0
> 
> 时间：2012-08-20T14:49:08.760
> 
> 标签：asp.net, sql-server, database, sql-server-2008

**以下是我的类别表：**

![在此处输入图像描述](../Images/f2f8f0d5888589c9348484a81906de6f.png)

你们能指出这个设计中的优点和缺点吗？实际上我有`Categories`, `Sub-Categories`,`Sub-Sub-Categories`等等.. 即多个级别的子类别。那么这是正确的方法吗？

**分类：**

**列**---------------------- **数据类型**

--CategoryID ---------------------- --- int 或 varchar（我很困惑哪个会更好）

--ParentID ---------- ------ int 或 varchar（我很困惑哪个会更好）

--CategoryName ---------------------- varchar

--CategoryDe​​sc ---------------------- varchar

--活跃 ---------------------------------- 位

--CategoryImage ---------------------- Varchar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:37:09.450

如果可以，请仅使用带有数字的 ID。所以，改变`CategoryID`和`ParentID`到`int`。

您还可以在 中创建主键`CategoryID`。以及`Parent_ID`引用`CategoryID`. 这样就会创建一些有用的索引。

# algorithm - 如何实现广度优先搜索遍历？

> ID：12039918
> 
> 赞同：0
> 
> 时间：2012-08-20T14:49:33.143
> 
> 标签：algorithm, breadth-first-search

我无法清楚地理解如何使用队列实现广度优先搜索。

这就是我所理解的：

```
 create queue Q
 enqueue root onto Q

while( !Q.empty() )
{
  node t = Q.deque();
  if(t is the goal we're seeking)
      return t;
  enqueue   t->leftchild
  enqueue   t->rightchild
} 
```

那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:14:33.507

如评论中所述，您错误地假设每个状态恰好有 2 个可以从中生成的状态。

正确的算法是：

```
BFS(G,v):
      create a queue Q
      enqueue v onto Q
      mark v
      while Q is not empty:
          t ← Q.dequeue()
          if t is what we are looking for:
              return t
          for all edges (t,u) in G do
             if u is not marked:
                  mark u
                  enqueue u onto Q 
```

[维基百科](http://en.wikipedia.org/wiki/Breadth-first_search)的信用

# javascript - 脚本在 IE 9 中不起作用

> ID：12039921
> 
> 赞同：1
> 
> 时间：2012-08-20T14:49:47.047
> 
> 标签：javascript, jquery, jsp, internet-explorer-9

我有这个用于检查复选框的脚本，它在 firefox 和 google chrome 中运行良好，但在 IE 9 中不起作用

```
 $notifyBySmsCheckbox
  .change(function(){
    if (this.checked) {console.log('checked');
      $('#f_notify_by_sms_instructions, #f_notify_by_sms_pin, #cellphoneInfo').show();
    }
    else {console.log('not checked');
      $('#f_notify_by_sms_instructions, #f_notify_by_sms_pin, #cellphoneInfo').hide();
    }
  })
  .change(); 
```

有谁知道这是为什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:52:11.803

..这很可能是因为 IE 没有控制台对象。尝试删除console.log's，你会没事的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:59:34.980

仅`console`在定义时访问：

```
 $notifyBySmsCheckbox.change(function() {   
    if (this.checked) {
      console && console.log('checked');
      $('#f_notify_by_sms_instructions, #f_notify_by_sms_pin, #cellphoneInfo').show();
    } else {
      console && console.log('not checked');
      $('#f_notify_by_sms_instructions, #f_notify_by_sms_pin, #cellphoneInfo').hide();
    }
  }) 
```

此外，您可以使用[`toggle`](http://api.jquery.com/toggle/)@epascarello 的建议来简化您的代码：

```
 $notifyBySmsCheckbox.change(function() {
    console && console.log(this.checked ? "checked" : "not checked");
    $('#f_notify_by_sms_instructions, #f_notify_by_sms_pin, #cellphoneInfo').toggle(this.checked);
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:54:10.410

...如果您在 ie 中打开了开发工具，它将起作用，否则不会。你必须支持ie 8和7吗？- 如果是这样，您将遇到这些 onchange 事件的问题。请改用 onClick。

# ruby - 安装ruby时Mountain Lion错误，libbz2.1.0.dylib错误架构

> ID：12039922
> 
> 赞同：0
> 
> 时间：2012-08-20T14:49:46.640
> 
> 标签：ruby, rvm, osx-mountain-lion

我将我的 mac 更新为山狮。现在，当我尝试安装 ruby`rvm install 1.9.3`​​ 时，出现此错误

```
linking shared-object tcltklib.bundle
ld: in /usr/local/lib/libbz2.1.0.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64
collect2: ld returned 1 exit status
make[2]: *** [../../.ext/x86_64-darwin12.0.0/tcltklib.bundle] Error 1
make[1]: *** [ext/tk/all] Error 2
make: *** [build-ext] Error 2 
```

我如何更新 libbz2 以纠正架构？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T16:55:35.767

更新 Xcode（到 4.4）。
完成后，从 Xcode => Preferences => Downloads => Command Line Tools 安装命令行工具。然后尝试安装ruby，你会很好。

# c# - 使用 Word Interop 删除特定换行符

> ID：12039923
> 
> 赞同：2
> 
> 时间：2012-08-20T14:49:48.620
> 
> 标签：c#, ms-word, ms-office, office-interop

我在删除一些带有 word interop 的特定换行符时遇到问题。似乎 doc.Content.Text 的索引与 word.. 的索引不匹配

我需要删除所有没有点作为前一个字符的中断。

对于小型文档，它可以工作，但之后只有大约 3-5 个中断，所选范围不是分页符，任何人都知道如何在没有 range.select(start: start, end: end) 的情况下删除这些中断或知道问题？

**例如我有以下文字：**

*美国调查人员对 340,000 人进行的一项民意调查发现，周一的情绪并不比其他工作日差，周五除外。（（休息））*

*随着周末的临近，人们变得更加快乐，为 ((break to delete)) 的概念提供了支持*

*“那个星期五的感觉”。（（休息））*

```
class Program
{
    static void Main(string[] args)
    {
        Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

        word.Visible = true;

        string document = @"C:\bin\Debug\123.doc";

        if (document != null)
        {
            Document doc = word.Documents.Open(document, ReadOnly: false, Visible: true);
            doc.Activate();
            string text = doc.Content.Text;

            int index = text.IndexOf("\r");
            int deletetCount = 0;

            while(index != -1)
            {
                if (index != 0 && text[index - 1] != '.')
                {
                    int start = index + 1 - deletetCount;
                    int end = start + 1;
                    if (start >= 0 && end >= 0 && end > start)
                    {
                        Range range = doc.Range(Start: start, End: end);
                        range.Select();
                        range.Delete();
                        deletetCount++;
                    }
                }

                index = text.IndexOf("\r", index + 1);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:59:27.153

## 我找到了解决方案：

现在我使用通配符搜索和替换（正则表达式）

删除中断的规则：

*   前一个字符不是点或冒号
*   文本不是粗体（就我而言，粗体文本主要是标题）
*   不应删除包含以下文本的中断（列表）： abc 1\. 2\. 3\. --> 要匹配列表，它们必须转换为文本（doc.ConvertNumbersToText()）

.

```
 class Program
  {
    static void Main(string[] args)
    {
        Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

        word.Visible = true;

        string document = @"C:\bin\Debug\1.doc";

        if (document != null)
        {
            Document doc = word.Documents.Open(document, ReadOnly: false, Visible: true);
            doc.Activate();

            object missingObject = null;

            doc.ConvertNumbersToText();

            object item = WdGoToItem.wdGoToPage;
            object whichItem = WdGoToDirection.wdGoToFirst;
            object replaceAll = WdReplace.wdReplaceAll;
            object forward = true;
            object matchWholeWord = false;
            object matchWildcards = true;
            object matchSoundsLike = false;
            object matchAllWordForms = false;
            object wrap = WdFindWrap.wdFindAsk;
            object format = true;
            object matchCase = false;
            object originalText = "([!.:])^13(?[!.])";
            object replaceText = @"\1 \2";

            doc.GoTo(ref item, ref whichItem, ref missingObject, ref missingObject);
            foreach (Range rng in doc.StoryRanges)
            {
                rng.Find.Font.Bold = 0;

                rng.Find.Execute(ref originalText, ref matchCase,
            ref matchWholeWord, ref matchWildcards, ref matchSoundsLike, ref matchAllWordForms, ref forward,
            ref wrap, ref format, ref replaceText, ref replaceAll, ref missingObject,
            ref missingObject, ref missingObject, ref missingObject);
            }

        }
    }
} 
```

# windows-phone-7 - Windows Phone - 电话号码验证

> ID：12039925
> 
> 赞同：0
> 
> 时间：2012-08-20T14:49:50.133
> 
> 标签：windows-phone-7, phone-number, windows-live

Windows Phone 上有没有办法访问用户的手机号码？是否可以通过请求许可或让用户通过 Windows Live 帐户登录来获取信息来获取此信息？我想看看除了使用 Twilio 之外是否还有其他解决方案来通过短信验证电话号码。我现在正在专门研究 Mango，但如果这在 Apollo 中也是可能的，我会很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:18:00.337

不幸的是，这不受支持。要获得此信息，您需要让用户手动输入他们的电话号码。这是为了阻止任何请求它的应用程序检索他们的电话号码，这可能会导致电话号码的垃圾邮件/销售（仅举几例）

考虑到这是一个安全限制（不是硬件/软件限制），我非常怀疑 Apollo（Windows Phone 8）是否会撤销这个有安全意识的决定，并且任何需要它的应用程序都可以访问电话号码.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:14:13.890

您可以使用芒果检索联系人。

见：[MSDN](http://msdn.microsoft.com/en-us/library/hh286414%28v=vs.92%29.aspx)

问候。

# php - 多维数组的 PHP 问题

> ID：12039929
> 
> 赞同：1
> 
> 时间：2012-08-20T14:49:59.633
> 
> 标签：php, multidimensional-array

我目前正在尝试从 mysql 数据库中提取数据，然后使用设备名称作为键将其放入多维数组中。

我遇到的问题是，每次我遍历结果时，我使用的代码都会杀死最后一项并替换它。

这是代码；

```
##sql connection##
$result = mysql_query(SELECT Device.DeviceID, Device.DeviceName, History.HistoryRec, History.HistoryDetectedDate from Device JOIN History ON Device.DeviceID=History.DeviceID WHERE History.Active_LastRound = 1 AND History.DetectedDate <= $hrs);
if (!$result){
die('invaild query:' . mysql_error());

while($row = mysql_fetch_array($result))
{
$last24hoursarray[$row['DeviceName']] = array($row['HistoryRec']);
} 
```

所以我遇到的问题是我的结果集有多个具有相同设备名称的记录，我无法弄清楚如何将它们放入数组中，以便它们不会覆盖最后一项

例如我想要

```
switch1 => issue1
switch1 => issue2
switch1 => issue3
switch2 => issue1
etc 
```

但我得到的是；

```
switch1 => issue3
switch2 => issue1 
```

提前致谢。这是我写的第一个 PHP，所以请温柔：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:52:25.670

PHP 数组键是唯一的，因此您无法在同一个键下存储多个值，请尝试以下操作：

```
while($row = mysql_fetch_array($result)) {
        $last24hoursarray[$row['DeviceName']][] = $row['HistoryRec'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:06:22.797

首先，数组只允许键的单个值。你将无法获得。

```
switch1 => issue1
switch1 => issue2
switch1 => issue3 
```

你可以得到

```
switch1 => [issue1, issue2, issue3] 
```

我没有花时间测试代码，但它会是这样的：

```
while($row = mysql_fetch_array($result)){
  if (array_key_exists ( $row['DeviceName'] , $last24hoursarray ){
    // append to existing issue.
    $last24hoursarray[$row['DeviceName']][] = array($row['HistoryRec']);
  } else{
    //No device name, create the array with issue.
    $last24hoursarray[$row['DeviceName']] = array($row['HistoryRec']);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:53:32.613

尝试为每个设备创建一个新数组：

```
$last24hoursarray[$row['DeviceName']] = new array($row['HistoryRec']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:56:04.670

这段代码不起作用的原因是 PHP 关联数组只存储数组的每个键的一个值。这样您就可以通过键查找唯一值，这就是关联数组的全部目的。Merca 示例中的代码应该很好用，因为它将为关联数组中的每个键创建一个值数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:57:42.000

看起来您在这里使用的不是多维数组。多维数组更像这样：

```
switch1 = array(issue1, issue2, issue3);
switch2 = array(issue1);
multi = array(switch1, switch2);

issue = multi[0][1];  // issue2 
```

# iphone - iphone，检查 cellId / Lac 的值

> ID：12039930
> 
> 赞同：1
> 
> 时间：2012-08-20T14:50:01.407
> 
> 标签：iphone, cellid

我可以在 iOS 上获取无线电信息 cellId、Lac、MNC、MCC。我想知道如何检查值是否正确？

谢谢

# ruby-on-rails - Rails：一种用于身份验证和配置文件信息的模型或 2 个单独的模型

> ID：12039936
> 
> 赞同：5
> 
> 时间：2012-08-20T14:50:16.793
> 
> 标签：ruby-on-rails, authentication, model, profile

在许多教程（尤其是身份验证）中，演讲者说将用户身份验证和配置文件信息放在名为 User 的同一个表（模型）中。

**我的问题很简单：把所有东西都放在一张桌子上安全吗？（奖励：这是最佳做法吗？）**

我宁愿建议将身份验证信息（电子邮件、密码、盐......）和个人资料信息（名字、姓氏、出生日期、位置、性别......）分成两个模型：用户（用于身份验证）和配置文件，并通过 has_one/belongs_to 关联链接模型。

**我错了吗？你有什么建议？**

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:19:53.583

如果您想遵循[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，您应该将表分开。但是，有时它不是最佳选择...例如，如果您的表`users`只有`email`, `password`（用于身份验证）和`name`. 我不会创建一个`profile`表来存储`name`，对吗？

因此，这将取决于您的要求来做出设计决定......

我发现[了这篇有趣的帖子](https://stackoverflow.com/questions/3889797/mysql-user-profile-details-table-setup-best-practice)，@D Roddis 在其中解释了三种不同方法的一些优点和缺点`Storing User Profile in Users Table`：`Storing User Profile in User_Profile Table 1-1 relationship to users`和`Storing User Profile as properties and values in tables`.

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:04:28.823

我自己会把它们放在单独的模型中。

有多少动作同时作用于用户和个人资料？不多，在这两种构造中，他们需要对彼此一无所知（或仅是身份）的很多地方。

# jakarta-ee - AsyncContext 和 I/O 错误处理（当对等方断开连接时）

> ID：12039939
> 
> 赞同：5
> 
> 时间：2012-08-20T14:50:28.870
> 
> 标签：jakarta-ee, tomcat, jetty, comet, servlet-3.0

我正在使用 Servlet 3.0 的[javax.servlet.AsyncContext](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html)接口实现服务器发送事件。

但是我不明白我应该如何处理 I/O 错误，比如对等断开连接。

对于给定的`AsyncContext ac = request.startAsync()`，我可以打电话`ac.getResponse().getWriter().print(something)`，然后`ac.getResponse.getWriter().flush()`它工作正常。但是，当客户端断开连接时，我没有收到错误 - 即使我附加了一个侦听器，它的`onError`方法也不会被调用。

我使用 Jetty 8 和 Tomcat 7 对其进行了测试，似乎没有将与客户端的断开连接报告回应用程序。

可以做些什么来检测通信错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:16:10.090

问题是：`ac.getResponse.getWriter().flush()`不扔`IOException`

因此，为了在 I/O 操作时获得错误通知，您需要`ServletOutputStream`改用：

```
try {
   ServletOutputStream out = ac.getResponse().getOutputStream();
   out.print(stuff);
   out.flush(); // throws IOException
}
catch(IOException e) {
   // handle a error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T14:27:09.960

在使用起来更方便的情况下，还有另一种解决方案`getWriter()`。

```
PrintWriter out = ac.getResponse().getWriter();
out.print(stuff);
out.flush(); // swallows IOException
if (out.checkError()) {
   // handle error or throw out...
} 
```

也就是说，PrintWriter 类确实提供了一种稍后检索写入错误的方法。

# java - 如何将库附加到 JAR 文件？

> ID：12039948
> 
> 赞同：1
> 
> 时间：2012-08-20T14:50:58.980
> 
> 标签：java, eclipse, jar, runnable

编译项目时它工作正常，但在将其导出到可运行`jar`并启动后，它找不到外部文件并引发错误。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:57:22.963

将外部库添加到`manifest.mf`：

```
Class-Path: . MyApp_lib/extlib.jar MyApp_lib/extlib2.jar ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:56:09.693

您可以尝试构建一个`fat jar`包含所有 jar 的。它包含一个自定义类加载器，用于加载项目外部引用的 jar。

尝试使用[http://fjep.sourceforge.net/](http://fjep.sourceforge.net/)插件来构建一个胖 jar。

您可以使用`File -> Export -> Other -> One Jar Exporter`.

![在此处输入图像描述](../Images/88642b794606a90d328ced237a64793e.png)

因此导出的罐子工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:53:31.800

您必须将所有必需的 jar 保存在类路径中才能运行您的 jar。像这样运行你的jar：

`java -cp extlib/* -jar yourjar.jar`或者`java -cp lib1.jar:lib2.jar:.. -jar yourjar.jar`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T14:53:52.987

确保在构建 jar 时包含所有使用的库（包括类路径中的所有内容）。当您引用外部 jar 时，会发生此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T15:02:31.620

您可以在 jar 的清单文件中包含一个类路径变量。

[JAR 文件类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

# bash - 使用正确的编码从 maildir 目录中读取邮件并在 bash 中使用

> ID：12039952
> 
> 赞同：1
> 
> 时间：2012-08-20T14:51:28.570
> 
> 标签：bash, character-encoding, maildir

我正在尝试为我的邮件服务器实现某种垃圾邮件报告。邮件按筛子分类，都在一个名为垃圾邮件的文件夹中。我用 bash 遍历文件夹。有了这个，我从邮件中获得了必要的信息：

```
cat $f | grep '^From' | head -n1 >> $TMPFILE
cat $f | grep '^Subject' | head -n1 >> $TMPFILE 
```

但在某些邮件中，主题是这样编码的

> 主题：=?ISO-8859-1?Q?Test:_Jaguar_XKR-S:_Unter_dem_Blech_lauert_d?=

我怎样才能得到正确编码的主题？我尝试使用mail、mailx、mutt……但没有人能够简单地从文件中加载邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:34:05.307

主题行中的编码看起来像[MIME Words](http://en.wikipedia.org/wiki/MIME#Encoded-Word)。解码数据的一种可能方法是编写一个使用[MIME::Words](http://search.cpan.org/~dskoll/MIME-tools-5.503/lib/MIME/Words.pm)模块的 perl 脚本。您可以将 perl 脚本设为 shell 脚本并从您的 bash 脚本中调用它。

转换主题.sh：

```
 #!/bin/sh
 /usr/bin/perl -pe 'use MIME::Words(decode_mimewords); $_=decode_mimewords($_);' 
```

使用脚本的示例：

```
$ echo "=?ISO-8859-1?Q?Test:_Jaguar_XKR-S:_Unter_dem_Blech_lauert_d?=" | sh convert_subject.sh 
```

哪个输出：

```
Test: Jaguar XKR-S: Unter dem Blech lauert d 
```

# android - Phonegap Android - Helvetica/Arial 字体

> ID：12039955
> 
> 赞同：1
> 
> 时间：2012-08-20T14:51:31.770
> 
> 标签：android, cordova, fonts

我在 Android 中有一个应用程序 - 我正在使用 Phonegap - 我必须使用“Arial”或“Helvetica”字体。一切都很好，但“g”在 Times new Roman 中看起来像“g”：

[http://pl.wikipedia.org/wiki/Times_New_Roman](http://pl.wikipedia.org/wiki/Times_New_Roman)

我想让 Helvetica/Arial 'g' 看起来：

[http://pl.wikipedia.org/wiki/Helvetica](http://pl.wikipedia.org/wiki/Helvetica)

我检查了几部手机/Android 版本。没有人可以阅读 Helvetica/Arial 'g' 看起来很正常 :(

我还尝试手动导入 TTF 并将其添加到项目中，但它也不起作用:(

这里有什么帮助吗？

PS对不起英语

# jquery - 谷歌移动 Playbook 拖动导航

> ID：12039960
> 
> 赞同：0
> 
> 时间：2012-08-20T14:51:40.960
> 
> 标签：jquery, mobile, navigation, slider, drag

我一直在摸索如何在此处查看[http://www.themobileplaybook.com/上的 Google 移动 Playbook 上复制可拖动导航](http://www.themobileplaybook.com/)

我正在使用 jQuery Mobile 创建一个网站，但对此并不走运。有没有人用 jQuery 做过类似的事情？

-李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:17:13.267

一两天后，我想出了如何使用 jQuery UI Draggable 和 Droppable 来做到这一点！

这让我朝着正确的方向开始[http://jsfiddle.net/nickadeemus2002/wWbUF/1/](http://jsfiddle.net/nickadeemus2002/wWbUF/1/)

# iphone - resetStandardUserDefaults 到底是做什么的？

> ID：12039961
> 
> 赞同：1
> 
> 时间：2012-08-20T14:51:57.370
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

我正在开发一个具有“添加到书签/收藏夹”功能的 iphone 应用程序

但是这些书签中的每一个都有一个“状态”子标题或字段，“状态”在打开的 jSon 数据库中不断更新，因此在书签表视图中，当用户单击“更新”按钮时，它会向服务器并为每个书签提取最新的“状态”。

然后，当用户单击不同的视图时，它将所有新状态保存到 userDefault，我通过在“viewWillDisappear()”中执行以下操作来做到这一点：

```
NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:myObject forKey:@"myServiceList"];
[defaults synchronize]; 
```

以上工作正常，数据已保存。

但是之后当我回到书签视图，然后再次单击其他视图时，它会崩溃！它不会通过以下代码行（因此它在第一次工作，但不是第二次）：

```
[myDict setObject:[myService objectForKey:@"status"] forKey:@"status"]; 
```

在查看了 userDefault API 之后，我尝试添加以下代码行来解决问题，并且它工作得非常完美！

```
NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:myObject forKey:@"myServiceList"];
[defaults synchronize];
//I added the following
[NSUserDefaults resetStandardUserDefaults]; 
```

即使它解决了我的问题，但我真的不明白它是如何解决的，文档说它“同步对共享用户默认对象所做的任何更改并将其从内存中释放。”

这是否意味着我的“myServiceList”正在使用中，我必须先从内存中释放它才能再次使用它？

有人可以帮我理解这个问题吗？

谢谢你！

编辑：这是我的书签视图的viewWIllDisappear（），如果我从书签视图切换到其他视图，它会很好，然后当我回到书签视图并再次切换到其他视图时，它会崩溃：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    NSLog(@"start saving data");
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    NSMutableArray * defaultArray = [[defaults objectForKey:@"myServiceList"] mutableCopy];
    for (NSString *key in self.tableContents) 
    {
        for(NSMutableDictionary *myService in [tableContents objectForKey:key])
        {
            for(NSMutableDictionary *myDict in defaultArray)
            {
                if([[myDict objectForKey:@"serviceNumber"] isEqualToString:[myService     objectForKey:@"serviceNumber"]])
                {
                    //The following line is where it will crash
                    [myDict setObject:[myService objectForKey:@"status"] forKey:@"status"];
                    NSLog(@"updated");
                    break;
                }
            }
        }
    }

    [defaults setObject:defaultArray forKey:@"myServiceList"];
    [defaults synchronize];
    //[NSUserDefaults resetStandardUserDefaults];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T08:09:03.250

I think what is happening is that by using resetStandardUserDefaults you have forced the flush from memory *including serialising myObject.*

My bet that if you haven't flushed it from memory, the in-memory copy of standardUserDefaults will try to return the original myObject which you gave it for the key "myServiceList".

If you trace things, I suspect that original myObject has either been corrupted somehow or deleted.

By forcing it to give you a fresh myObject, de-serialised back from disk, you are OK.

You could check this by hanging onto another copy of myObject, at the point at which you are calling resetStandardUserDefaults and then compare it with the value you get back for the key "myServiceList" later.

# php - PHP 错误解析错误：语法错误，意外 $end

> ID：12039963
> 
> 赞同：0
> 
> 时间：2012-08-20T14:52:03.347
> 
> 标签：php, syntax, parse-error

HI 收到错误解析错误：语法错误，第 124 行 /home/crafru/public_html/test/damienform.php 中的意外 $end

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="en-gb" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<style type="text/css">
.table-style1 {
    border: 1px solid #000000;
    width: 39%;
    height: 197px;
}
.table-style2 {
    border: 1px solid #000000;
    text-align: center;
    font-weight: bold;
    height: 25px;
}
.table-style3 {
    border: 1px solid #000000;
    text-align: center;
    font-weight: bold;
    width: 221px;
    height: 25px;
}
.table-style4 {
    border: 1px solid #000000;
    width: 221px;
    height: 25px;
}
.table-style5 {
    height: 25px;
    border: 1px solid #000000;
}
</style>
</head>
<body style="font-family: Arial, Helvetica, sans-serif; background-color: #EBF4FB">
<?php
    $submitrunnertime= $_POST['submitrunnertime'];
    $RunnerID= $_POST['RunnerID'];
    $EventID= $_POST['EventID'];
    $Date= $_POST['Date'];
    $Time= $_POST['Time'];
    $Position= $_POST['Position'];
    $CategoryID= $_POST['CategoryID'];
    $AgeGrade= $_POST['AgeGrade'];
    $PB= $_POST['PB'];
    $submitrunnertime= $_POST['submitrunnertime'];
    $Test = "pass";

    $host= 'localhost';
    $user= '****';  
    $password= '****';
    $database= '****';

/**
    Function: connect to a database.
    $host = hostname to connect to e.g. 'localhost'
    $id = username identity, e.g. 'ta589'
    $pwd = user password, e.g. 'twiggy9'
    $db = database to use, e.g. 'ta589'
    Returns the database connection.
**/

function connect_db($host, $user, $password, $database) {
    $connection = @mysql_connect($host, $id, $pwd)
        or die('connection problem:' . mysql_error());
    mysql_select_db($db)
        or die('db selection problem:' . mysql_error());
    return $connection;
?>

<table class="table-style1" cellpadding="0" cellspacing="0">
    <tr>
        <td class="table-style3">Feild</td>
        <td class="table-style2">Value</td>
    </tr>
    <tr>
        <td class="table-style4">Runner ID </td>
        <td class="table-style5"><?=$RunnerID?></td>
    </tr>
    <tr>
        <td class="table-style4">Event ID </td>
        <td class="table-style5"><?=$EventID?></td>
    </tr>
    <tr>
        <td class="table-style4">Date </td>
        <td class="table-style5"><?=$Date?></td>
    </tr>
    <tr>
        <td class="table-style4">Time </td>
        <td class="table-style5"><?=$Time?></td>
    </tr>
    <tr>
        <td class="table-style4">Position </td>
        <td class="table-style5"><?=$Position?></td>
    </tr>
    <tr>
        <td class="table-style4">Category ID </td>
        <td class="table-style5"><?=$CategoryID?></td>
    </tr>
    <tr>
        <td class="table-style4">Age Grade </td>
        <td class="table-style5"><?=$AgeGrade?></td>
    </tr>
    <tr>
        <td class="table-style4">PB </td>
        <td class="table-style5"><?=$PB?></td>
    </tr>
    <tr>
        <td class="table-style4">submitrunnertime </td>
        <td class="table-style5"><?=$submitrunnertime?></td>
    </tr>
    <tr>
        <td class="table-style4">Test - Remove this</td>
        <td class="table-style5"><?=$Test?></td>
    </tr>
</table>
</body>
</html> 
```

一直在看这个，看不到任何丢失的结束位。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:53:49.333

你错过了你的功能的结束'stache。

```
function connect_db($host, $user, $password, $database) {
    $connection = @mysql_connect($host, $id, $pwd)
      or die('connection problem:' . mysql_error());
    mysql_select_db($db)
      or die('db selection problem:' . mysql_error());
    return $connection;
} //<--THAT ONE

?> 
```

# php - print_r() 仅打印出数组中的 150 个元素

> ID：12039966
> 
> 赞同：12
> 
> 时间：2012-08-20T14:52:07.290
> 
> 标签：php, laravel, debugging

`$product_urls`我有一个包含 200 个元素的数组。

**问题：**当我执行 a`print_r($product_urls)`时，PHP 打印出一个包含 150 个元素的数组，并且输出似乎被截断，因为它缺少结束的`)`. 我检查了生成的 HTML 源代码，它确实在第 150 个元素处被截断。`count($product_urls)`给`200`.

这令人费解。我正在使用一个名为 Laravel 的 PHP 框架。有任何想法吗？

**PHP 代码**

```
echo "<pre>";
echo count($product_urls);
print_r($product_urls); 
```

**输出**

```
200Array
(
    [0] => http://www.example.com/mysite/mysite-Vest-With-Girl-Print/Prod/pgeproduct.aspx?iid=2409264
    [1] => http://www.example.com/mysite/mysite-T-Shirt-With-Dork-Print/Prod/pgeproduct.aspx?iid=2483696
    [2] => http://www.example.com/mysite/mysite-T-Shirt-With-Kasabian-Print/Prod/pgeproduct.aspx?iid=2428327
    [3] => http://www.example.com/mysite/mysite-Long-Sleeve-Crew-Neck-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2548469
    [4] => http://www.example.com/Scotch-Soda/Scotch-And-Soda-T-Shirt-In-Washed-Cotton/Prod/pgeproduct.aspx?iid=2496980

    //...

    [147] => http://www.example.com/BePriv/Be-Priv-90210-Tiffany-T-shirt-Exclusive-To-mysite-UK/Prod/pgeproduct.aspx?iid=2262271
    [148] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-Start-Making-Sense-T-Shirt/Prod/pgeproduct.aspx?iid=2200659
    [149] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-Camera-Statue-T-Shirt/Prod/pgeproduct.aspx?iid=2200660 
```

**整个 Print_r 输出** *（使用 Raheel Shan 的方法）*

```
200Array
(
    [0] => http://www.example.com/mysite/mysite-Vest-With-Girl-Print/Prod/pgeproduct.aspx?iid=2409264
    [1] => http://www.example.com/mysite/mysite-T-Shirt-With-Dork-Print/Prod/pgeproduct.aspx?iid=2483696
    [2] => http://www.example.com/mysite/mysite-T-Shirt-With-Kasabian-Print/Prod/pgeproduct.aspx?iid=2428327
    [3] => http://www.example.com/mysite/mysite-Long-Sleeve-Crew-Neck-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2548469
    [4] => http://www.example.com/Scotch-Soda/Scotch-And-Soda-T-Shirt-In-Washed-Cotton/Prod/pgeproduct.aspx?iid=2496980
    [5] => http://www.example.com/Scotch-Soda/Scotch-And-Soda-T-Shirt-with-Block-Hoop/Prod/pgeproduct.aspx?iid=2496983
    [6] => http://www.example.com/Carhartt/Carhartt-Marker-T-Shirt/Prod/pgeproduct.aspx?iid=2453973
    [7] => http://www.example.com/Levis-Vintage/Levis-Vintage-T-Shirt-1950-Sportswear/Prod/pgeproduct.aspx?iid=2270995
    [8] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-Camera-Club-T-shirt-Bike/Prod/pgeproduct.aspx?iid=2494276
    [9] => http://www.example.com/Reclaimed-Vintage/Reclaimed-Vintage-Vest-with-Paisley-Peace-Print/Prod/pgeproduct.aspx?iid=2533797
    [10] => http://www.example.com/Supreme-Being/Supremebeing-White-Canvas-Project-T-Shirt-Mr-Jago/Prod/pgeproduct.aspx?iid=2363025
    [11] => http://www.example.com/Reclaimed-Vintage/Reclaimed-Vintage-T-Shirt-with-Tye-Dye-Print/Prod/pgeproduct.aspx?iid=2533633
    [12] => http://www.example.com/Emporio-Armani/Emporio-Armani-Pure-Cotton-Crew-T-Shirt/Prod/pgeproduct.aspx?iid=1999130
    [13] => http://www.example.com/mysite/mysite-T-Shirt-With-Layered-Print/Prod/pgeproduct.aspx?iid=2457845
    [14] => http://www.example.com/Diesel/Diesel-T-Shirt-With-Stamp-Print/Prod/pgeproduct.aspx?iid=2441057
    [15] => http://www.example.com/Diesel/Diesel-T-Shirt-With-Label-Print/Prod/pgeproduct.aspx?iid=2441126
    [16] => http://www.example.com/Lee/Lee-T-Shirt-With-Play-Print/Prod/pgeproduct.aspx?iid=2425959
    [17] => http://www.example.com/Lee/Lee-T-Shirt-With-Print/Prod/pgeproduct.aspx?iid=2426033
    [18] => http://www.example.com/Lee/Lee-Grandad-Top/Prod/pgeproduct.aspx?iid=2425415
    [19] => http://www.example.com/Nike-Skateboard/Nike-Skateboarding-T-Shirt-Speciman-Icon/Prod/pgeproduct.aspx?iid=2445650
    [20] => http://www.example.com/American-Apparel/American-Apparel-Muscle-Tank/Prod/pgeproduct.aspx?iid=2503093
    [21] => http://www.example.com/Religion/Religion-Safety-Pin-Skull-T-Shirt/Prod/pgeproduct.aspx?iid=2398683
    [22] => http://www.example.com/Religion/Religion-Clash-Long-Sleeve-Top/Prod/pgeproduct.aspx?iid=2398419
    [23] => http://www.example.com/American-Apparel/American-Apparel-Helvetica-T-Shirt-ZZ/Prod/pgeproduct.aspx?iid=2502997
    [24] => http://www.example.com/American-Apparel/American-Apparel-Helvetica-T-Shirt-XX/Prod/pgeproduct.aspx?iid=2502998
    [25] => http://www.example.com/American-Apparel/American-Apparel-3/4-Sleeve-Raglan-Top/Prod/pgeproduct.aspx?iid=2503354
    [26] => http://www.example.com/Nike-Skateboard/Nike-Skateboarding-Laces-T-Shirt/Prod/pgeproduct.aspx?iid=2445588
    [27] => http://www.example.com/mysite/mysite-T-Shirt-With-Animal-Print-Girl-Print/Prod/pgeproduct.aspx?iid=2410231
    [28] => http://www.example.com/mysite/mysite-T-Shirt-With-Oxford-Pocket/Prod/pgeproduct.aspx?iid=2480313
    [29] => http://www.example.com/mysite/mysite-Stripe-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2420685
    [30] => http://www.example.com/mysite/mysite-T-Shirt-With-Flag-Print/Prod/pgeproduct.aspx?iid=2484341
    [31] => http://www.example.com/Cheap-Monday/Cheap-Monday-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2379675
    [32] => http://www.example.com/Cheap-Monday/Cheap-Monday-Tor-T-Shirt/Prod/pgeproduct.aspx?iid=2379596
    [33] => http://www.example.com/Hilfiger-Denim/Hilfiger-Denim-T-Shirt/Prod/pgeproduct.aspx?iid=2309725
    [34] => http://www.example.com/Franklin-Marshall/Franklin-Marshall-T-Shirt/Prod/pgeproduct.aspx?iid=2360997
    [35] => http://www.example.com/Denham/Denham-T-Shirt-Barnum-Pocket/Prod/pgeproduct.aspx?iid=2302619
    [36] => http://www.example.com/Analog/Analog-Baseball-T-Shirt/Prod/pgeproduct.aspx?iid=2445332
    [37] => http://www.example.com/Analog/Analog-T-shirt-Astro-Dot/Prod/pgeproduct.aspx?iid=2445516
    [38] => http://www.example.com/Adidas-Originals/Adidas-Originals-T-Shirt-Stencil-Trefoil/Prod/pgeproduct.aspx?iid=2447712
    [39] => http://www.example.com/Adidas-Originals/Adidas-Originals-T-Shirt-Fine-Stripe-Trefoil-Logo/Prod/pgeproduct.aspx?iid=2447613
    [40] => http://www.example.com/Adidas-Originals/Adidas-Originals-Superstar-T-Shirt/Prod/pgeproduct.aspx?iid=2446200
    [41] => http://www.example.com/Adidas-Originals/Adidas-Originals-Originals-Icon-T-Shirt/Prod/pgeproduct.aspx?iid=2446130
    [42] => http://www.example.com/Adidas-Originals/Adidas-Originals-T-Shirt-Trefoil-Rasta/Prod/pgeproduct.aspx?iid=2349590
    [43] => http://www.example.com/Adidas-Originals/Adidas-Originals-T-Shirt-Masking-Tape/Prod/pgeproduct.aspx?iid=2349584
    [44] => http://www.example.com/Adidas-Originals/Adidas-Originals-Superstar-T-Shirt/Prod/pgeproduct.aspx?iid=2446162
    [45] => http://www.example.com/Adidas-Originals/Adidas-Originals-Daily-Hustle-T-Shirt/Prod/pgeproduct.aspx?iid=2349550
    [46] => http://www.example.com/G-Star/G-Star-T-Shirt-Elwood-Restany-Motorbike-Logo/Prod/pgeproduct.aspx?iid=2258870
    [47] => http://www.example.com/mysite/mysite-Long-Sleeved-T-Shirt-With-Grandad-Collar-In-Pique-Jersey/Prod/pgeproduct.aspx?iid=2395254
    [48] => http://www.example.com/Religion/Religion-Basic-Scoop-Neck-T-Shirt/Prod/pgeproduct.aspx?iid=1397435
    [49] => http://www.example.com/mysite/mysite-Vest-With-Racer-Back/Prod/pgeproduct.aspx?iid=2457514
    [50] => http://www.example.com/mysite/mysite-T-Shirt-With-Varsity-Print/Prod/pgeproduct.aspx?iid=2484233
    [51] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-Log-In-T-Shirt/Prod/pgeproduct.aspx?iid=2366658
    [52] => http://www.example.com/Ezra-Wine/Ezra-Wine-Medusa-T-Shirt/Prod/pgeproduct.aspx?iid=2383291
    [53] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-Dropout-T-Shirt/Prod/pgeproduct.aspx?iid=2366535
    [54] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-T-Shirt-with-Tongue-Pocket/Prod/pgeproduct.aspx?iid=2366527
    [55] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-Going-to-Hell-T-Shirt/Prod/pgeproduct.aspx?iid=2366525
    [56] => http://www.example.com/Denham/Denham-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2511832
    [57] => http://www.example.com/55DSL/55DSL-Hula-T-Shirt/Prod/pgeproduct.aspx?iid=2375696
    [58] => http://www.example.com/55DSL/55DSL-Sky-T-Shirt/Prod/pgeproduct.aspx?iid=2375931
    [59] => http://www.example.com/Selected/Selected-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2504193
    [60] => http://www.example.com/Selected/Selected-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2504191
    [61] => http://www.example.com/Selected/Selected-T-shirt-with-Double-Layer/Prod/pgeproduct.aspx?iid=2504184
    [62] => http://www.example.com/Selected/Selected-T-Shirt-with-Double-Layer/Prod/pgeproduct.aspx?iid=2504135
    [63] => http://www.example.com/Denham/Denham-T-Shirt-With-Scissor-Print/Prod/pgeproduct.aspx?iid=2511889
    [64] => http://www.example.com/Replay/Replay-T-Shirt-With-V-Neck/Prod/pgeproduct.aspx?iid=2423227
    [65] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-Patches-T-Shirt/Prod/pgeproduct.aspx?iid=2366648
    [66] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-T-Shirt-with-FC-Stripe/Prod/pgeproduct.aspx?iid=2366533
    [67] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-T-Shirt-with-Bandana-Pocket/Prod/pgeproduct.aspx?iid=2366528
    [68] => http://www.example.com/Lazy-Oaf/Lazy-Oaf-End-is-Nigh-T-Shirt/Prod/pgeproduct.aspx?iid=2366425
    [69] => http://www.example.com/Christopher-Shannon/Christopher-Shannon-Kidda-Laurel-T-Shirt/Prod/pgeproduct.aspx?iid=2323166
    [70] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-T-shirt-With-Cosmo-Pocket/Prod/pgeproduct.aspx?iid=2494015
    [71] => http://www.example.com/Selected/Selected-T-Shirt-with-Pocket/Prod/pgeproduct.aspx?iid=2365377
    [72] => http://www.example.com/Selected/Selected-Fleck-T-Shirt/Prod/pgeproduct.aspx?iid=2412803
    [73] => http://www.example.com/mysite/mysite-T-Shirt-With-Aztec-Animal-Print/Prod/pgeproduct.aspx?iid=2412464
    [74] => http://www.example.com/Worn-By/Worn-By-Neon-Tribal-T-Shirt/Prod/pgeproduct.aspx?iid=2305500
    [75] => http://www.example.com/Worn-By/Worn-By-Hell-Yeah-T-Shirt/Prod/pgeproduct.aspx?iid=2305595
    [76] => http://www.example.com/Religion/Religion-Razor-T-Shirt/Prod/pgeproduct.aspx?iid=2303944
    [77] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Paisley-Print-And-Contrast-Pocket/Prod/pgeproduct.aspx?iid=2405169
    [78] => http://www.example.com/River-Island/River-Island-Vest-with-Surf-Print/Prod/pgeproduct.aspx?iid=2391220
    [79] => http://www.example.com/Selected/Selected-Stripe-Vest/Prod/pgeproduct.aspx?iid=2299829
    [80] => http://www.example.com/Selected/Selected-Stripe-Vest/Prod/pgeproduct.aspx?iid=2299786
    [81] => http://www.example.com/River-Island/River-Island-Motel-Vest/Prod/pgeproduct.aspx?iid=2398677
    [82] => http://www.example.com/River-Island/River-Island-Vest/Prod/pgeproduct.aspx?iid=2398569
    [83] => http://www.example.com/River-Island/River-Island-Vest-with-Shanghai-Print/Prod/pgeproduct.aspx?iid=2391145
    [84] => http://www.example.com/Cheap-Monday/Cheap-Monday-Mond-T-Shirt/Prod/pgeproduct.aspx?iid=2379599
    [85] => http://www.example.com/Esprit/Esprit-Vest/Prod/pgeproduct.aspx?iid=2249197
    [86] => http://www.example.com/Reclaimed-Vintage/Reclaimed-Vintage-Russian-Naval-T-Shirts/Prod/pgeproduct.aspx?iid=2274797
    [87] => http://www.example.com/Worn-By/Worn-By-Zebra-T-Shirt/Prod/pgeproduct.aspx?iid=2305605
    [88] => http://www.example.com/Savant/Savant-Fresh-T-Shirt/Prod/pgeproduct.aspx?iid=2187734
    [89] => http://www.example.com/New-Love-Club/New-Love-Club-Nude-T-Shirt/Prod/pgeproduct.aspx?iid=2031399
    [90] => http://www.example.com/Your-Eyes-Lie/Your-Eyes-Lie-All-for-You-Vest/Prod/pgeproduct.aspx?iid=1996304
    [91] => http://www.example.com/People-Tree/People-Tree-Sydney-Vest/Prod/pgeproduct.aspx?iid=2072528
    [92] => http://www.example.com/mysite/mysite-Vest-With-Aztec-Design/Prod/pgeproduct.aspx?iid=2351895
    [93] => http://www.example.com/mysite/mysite-Vest-With-All-Over-Geo-Print/Prod/pgeproduct.aspx?iid=2373754
    [94] => http://www.example.com/mysite/mysite-Stripe-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2257136
    [95] => http://www.example.com/mysite/mysite-Stripe-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2257138
    [96] => http://www.example.com/mysite/mysite-Crew-Long-Sleeve-Top-With-Pocket/Prod/pgeproduct.aspx?iid=1874647
    [97] => http://www.example.com/mysite/mysite-T-Shirt-With-Flower-Print/Prod/pgeproduct.aspx?iid=2373623
    [98] => http://www.example.com/mysite/mysite-Crew-Neck-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=1605761
    [99] => http://www.example.com/mysite/mysite-T-Shirt-With-Skull-Print/Prod/pgeproduct.aspx?iid=2483379
    [100] => http://www.example.com/mysite/mysite-T-Shirt-With-Sex-Pistols-Print/Prod/pgeproduct.aspx?iid=2420836
    [101] => http://www.example.com/mysite/mysite-T-Shirt-With-Aztec-Girl-Print/Prod/pgeproduct.aspx?iid=2409391
    [102] => http://www.example.com/mysite/mysite-T-Shirt-With-Camo-Print-And-Chambray-Pocket/Prod/pgeproduct.aspx?iid=2408949
    [103] => http://www.example.com/mysite/mysite-T-Shirt-With-In-There-Like-Swimwear-Print/Prod/pgeproduct.aspx?iid=2404269
    [104] => http://www.example.com/mysite/mysite-T-Shirt-With-Camo-Pocket/Prod/pgeproduct.aspx?iid=2336996
    [105] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Pattern/Prod/pgeproduct.aspx?iid=2367036
    [106] => http://www.example.com/mysite/mysite-T-Shirt-With-Giant-Aztec-Print/Prod/pgeproduct.aspx?iid=2373696
    [107] => http://www.example.com/mysite/mysite-Crew-Neck-T-Shirt-With-Pocket/Prod/pgeproduct.aspx?iid=2378610
    [108] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Space-Print/Prod/pgeproduct.aspx?iid=2368944
    [109] => http://www.example.com/mysite/mysite-3/4-Sleeve-Top-In-Waffle-Jersey/Prod/pgeproduct.aspx?iid=2395846
    [110] => http://www.example.com/mysite/mysite-Vest-With-Fluro-Stripe/Prod/pgeproduct.aspx?iid=2352422
    [111] => http://www.example.com/mysite/mysite-Vest-With-David-Bowie-Print/Prod/pgeproduct.aspx?iid=2393776
    [112] => http://www.example.com/mysite/mysite-T-Shirt-With-Shoulder-Patch/Prod/pgeproduct.aspx?iid=2364066
    [113] => http://www.example.com/mysite/mysite-T-Shirt-With-Deep-V-Neck/Prod/pgeproduct.aspx?iid=2428120
    [114] => http://www.example.com/mysite/mysite-T-Shirt-With-Shoulder-Patch/Prod/pgeproduct.aspx?iid=2375275
    [115] => http://www.example.com/mysite/mysite-T-Shirt-With-Mystic-Eye-Print/Prod/pgeproduct.aspx?iid=2407356
    [116] => http://www.example.com/mysite/mysite-T-Shirt-With-Aztec-Hem-Print/Prod/pgeproduct.aspx?iid=2371017
    [117] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Hula-Girl-Print/Prod/pgeproduct.aspx?iid=2407724
    [118] => http://www.example.com/mysite/mysite-T-Shirt-With-Colorado-Print/Prod/pgeproduct.aspx?iid=2352880
    [119] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Print/Prod/pgeproduct.aspx?iid=2412241
    [120] => http://www.example.com/mysite/mysite-Stripe-T-Shirt-With-Flag-Print/Prod/pgeproduct.aspx?iid=2363870
    [121] => http://www.example.com/mysite/mysite-Vest-With-Tape-And-Pocket/Prod/pgeproduct.aspx?iid=2351801
    [122] => http://www.example.com/mysite/mysite-Vest-USA-Flag-Print/Prod/pgeproduct.aspx?iid=2352165
    [123] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-And-Double-Layer-Print/Prod/pgeproduct.aspx?iid=2364006
    [124] => http://www.example.com/mysite/mysite-Long-Sleeve-Top-With-Deep-V/Prod/pgeproduct.aspx?iid=1873299
    [125] => http://www.example.com/mysite/mysite-Stripe-T-Shirt-With-Two-Tone-Jersey-Marl/Prod/pgeproduct.aspx?iid=2368253
    [126] => http://www.example.com/mysite/mysite-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2373649
    [127] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Aztec-Stripe/Prod/pgeproduct.aspx?iid=2405360
    [128] => http://www.example.com/mysite/mysite-T-Shirt-With-All-Over-Print-And-Contrast-Neck-Trim/Prod/pgeproduct.aspx?iid=2412415
    [129] => http://www.example.com/mysite/mysite-T-Shirt-With-Mask-Print/Prod/pgeproduct.aspx?iid=2412477
    [130] => http://www.example.com/mysite/mysite-T-Shirt-With-Bill-And-Ted-Print/Prod/pgeproduct.aspx?iid=2320906
    [131] => http://www.example.com/mysite/mysite-T-Shirt-With-Dip-Dye-Hem/Prod/pgeproduct.aspx?iid=2373764
    [132] => http://www.example.com/mysite/mysite-Stripe-Vest/Prod/pgeproduct.aspx?iid=2250612
    [133] => http://www.example.com/Solid/Solid-T-Shirt/Prod/pgeproduct.aspx?iid=2354420
    [134] => http://www.example.com/mysite/mysite-T-Shirt-With-Printed-Woven-Pocket/Prod/pgeproduct.aspx?iid=2394637
    [135] => http://www.example.com/mysite/mysite-T-Shirt-With-Printed-Woven-Pocket/Prod/pgeproduct.aspx?iid=2375274
    [136] => http://www.example.com/mysite/mysite-T-Shirt-With-Fish-Print/Prod/pgeproduct.aspx?iid=2269490
    [137] => http://www.example.com/Bellfield/Bellfield-Aztec-T-Shirt/Prod/pgeproduct.aspx?iid=2383222
    [138] => http://www.example.com/Esprit/Esprit-T-Shirt-with-Surf-Print/Prod/pgeproduct.aspx?iid=2249271
    [139] => http://www.example.com/mysite/mysite-T-Shirt-With-Rolled-Sleeves/Prod/pgeproduct.aspx?iid=2412631
    [140] => http://www.example.com/Reclaimed-Vintage/Reclaimed-Vintage-Russian-Naval-T-Shirt/Prod/pgeproduct.aspx?iid=2274815
    [141] => http://www.example.com/mysite/mysite-T-Shirt-With-Floral-Pocket-And-Yoke/Prod/pgeproduct.aspx?iid=2199554
    [142] => http://www.example.com/mysite/mysite-T-Shirt-With-Eagle-Sunset-Print/Prod/pgeproduct.aspx?iid=2198894
    [143] => http://www.example.com/Death-By-Zero/Death-by-Zero-Primal-Urge-T-Shirt/Prod/pgeproduct.aspx?iid=2352921
    [144] => http://www.example.com/Death-By-Zero/Death-by-Zero-Nights-in-Manhattan-T-Shirt/Prod/pgeproduct.aspx?iid=2353016
    [145] => http://www.example.com/Death-By-Zero/Death-by-Zero-Hit-the-Ground-T-Shirt/Prod/pgeproduct.aspx?iid=2353013
    [146] => http://www.example.com/River-Island/River-Island-T-Shirt-with-Jazzy-Jeff-Print/Prod/pgeproduct.aspx?iid=2367043
    [147] => http://www.example.com/BePriv/Be-Priv-90210-Tiffany-T-shirt-Exclusive-To-mysite-UK/Prod/pgeproduct.aspx?iid=2262271
    [148] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-Start-Making-Sense-T-Shirt/Prod/pgeproduct.aspx?iid=2200659
    [149] => http://www.example.com/The-Quiet-Life/The-Quiet-Life-Camera-Statue-T-Shirt/Prod/pgeproduct.aspx?iid=2200660
    [150] => http://www.example.com/Denim-Supply-by-Ralph-Lauren/Denim-Supply-by-Ralph-Lauren-Shield-Logo-T-Shirt/Prod/pgeproduct.aspx?iid=2214188
    [151] => http://www.example.com/Clubbed-to-Death/Clubbed-to-Death-Tie-T-Shirt/Prod/pgeproduct.aspx?iid=2342946
    [152] => http://www.example.com/Clubbed-to-Death/Clubbed-to-Death-RocknRoll-T-Shirt/Prod/pgeproduct.aspx?iid=2342949
    [153] => http://www.example.com/Clubbed-to-Death/Clubbed-to-Death-Priviledge-T-Shirt/Prod/pgeproduct.aspx?iid=2343095
    [154] => http://www.example.com/Clubbed-to-Death/Clubbed-to-Death-Ibiza-Rocks-T-Shirt/Prod/pgeproduct.aspx?iid=2342877
    [155] => http://www.example.com/Clubbed-to-Death/Clubbed-to-Death-I-Heart-Cream-T-Shirt/Prod/pgeproduct.aspx?iid=2343085
    [156] => http://www.example.com/Suit/Suit-Multistripe-T-Shirt/Prod/pgeproduct.aspx?iid=2245305
    [157] => http://www.example.com/Suit/Suit-Marl-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2245454
    [158] => http://www.example.com/Suit/Suit-Block-Colour-T-Shirt/Prod/pgeproduct.aspx?iid=2245089
    [159] => http://www.example.com/mysite/mysite-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2250508
    [160] => http://www.example.com/Worn-By/Worn-By-Rotten-Food-T-Shirt/Prod/pgeproduct.aspx?iid=2085029
    [161] => http://www.example.com/mysite/mysite-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2250577
    [162] => http://www.example.com/Jack-Jones-Vintage/Jack-Jones-Vintage-T-Shirt/Prod/pgeproduct.aspx?iid=2217454
    [163] => http://www.example.com/Minimum/Minimum-Maidai-T-Shirt/Prod/pgeproduct.aspx?iid=2243906
    [164] => http://www.example.com/American-Apparel/American-Apparel-Oversized-T-Shirt/Prod/pgeproduct.aspx?iid=2339752
    [165] => http://www.example.com/Selected/Selected-Jimmy-Hendrix-T-Shirt/Prod/pgeproduct.aspx?iid=2191026
    [166] => http://www.example.com/mysite/mysite-Vest-With-Leaf-Print-And-Pocket/Prod/pgeproduct.aspx?iid=2261785
    [167] => http://www.example.com/Insight/Insight-Giddget-Must-Die-T-Shirt/Prod/pgeproduct.aspx?iid=2045641
    [168] => http://www.example.com/Religion/Religion-Bramford-Pocket-Vest/Prod/pgeproduct.aspx?iid=2304093
    [169] => http://www.example.com/Religion/Religion-Legs-T-Shirt/Prod/pgeproduct.aspx?iid=2303942
    [170] => http://www.example.com/WESC/WESC-Puzzle-Overlay-T-Shirt/Prod/pgeproduct.aspx?iid=2187520
    [171] => http://www.example.com/WESC/WESC-Icon-And-Stripes-T-Shirt/Prod/pgeproduct.aspx?iid=2187451
    [172] => http://www.example.com/Revolution/Revolution-Stripe-Pocket-T-Shirt/Prod/pgeproduct.aspx?iid=2247329
    [173] => http://www.example.com/mysite/mysite-Stripe-T-Shirt/Prod/pgeproduct.aspx?iid=2250507
    [174] => http://www.example.com/Religion/Religion-Striped-Vest/Prod/pgeproduct.aspx?iid=2303946
    [175] => http://www.example.com/Religion/Religion-Square-Pocket-T-Shirt/Prod/pgeproduct.aspx?iid=2304086
    [176] => http://www.example.com/Religion/Religion-Scream-T-Shirt/Prod/pgeproduct.aspx?iid=2303943
    [177] => http://www.example.com/Religion/Religion-Rest-in-Peace-T-Shirt/Prod/pgeproduct.aspx?iid=2303852
    [178] => http://www.example.com/Religion/Religion-Low-V-T-Shirt/Prod/pgeproduct.aspx?iid=2304183
    [179] => http://www.example.com/Religion/Religion-Gradient-T-Shirt/Prod/pgeproduct.aspx?iid=2303945
    [180] => http://www.example.com/Religion/Religion-Basic-Vest/Prod/pgeproduct.aspx?iid=2304260
    [181] => http://www.example.com/Religion/Religion-Rumours-T-Shirt/Prod/pgeproduct.aspx?iid=2304269
    [182] => http://www.example.com/Esprit/Esprit-Pocket-Marl-Crew-Neck-T-Shirt/Prod/pgeproduct.aspx?iid=2257627
    [183] => http://www.example.com/Sin-Star/Sin-Star-Live-Fast-T-Shirt/Prod/pgeproduct.aspx?iid=2274387
    [184] => http://www.example.com/Savant/Savant-Sofa-T-Shirt/Prod/pgeproduct.aspx?iid=2187666
    [185] => http://www.example.com/Savant/Savant-Puzzle-T-Shirt/Prod/pgeproduct.aspx?iid=2187664
    [186] => http://www.example.com/Your-Eyes-Lie/Your-Eyes-Lie-Navo-Vest/Prod/pgeproduct.aspx?iid=1996309
    [187] => http://www.example.com/Your-Eyes-Lie/Your-Eyes-Lie-Navo-T-Shirt/Prod/pgeproduct.aspx?iid=1996212
    [188] => http://www.example.com/Esprit/Esprit-Pocket-Marl-Crew-Neck-T-Shirt/Prod/pgeproduct.aspx?iid=2255386
    [189] => http://www.example.com/Your-Eyes-Lie/Your-Eyes-Lie-Ethnic-Animal-Vest/Prod/pgeproduct.aspx?iid=1996312
    [190] => http://www.example.com/Polo-Ralph-Lauren/Polo-Ralph-Lauren-Anchor-Print-T-Shirt/Prod/pgeproduct.aspx?iid=2192627
    [191] => http://www.example.com/Savant/Savant-Hello-Boys-T-Shirt/Prod/pgeproduct.aspx?iid=2187661
    [192] => http://www.example.com/Jack-Jones-Vintage/Jack-Jones-Vintage-Surf-Shop-T-Shirt/Prod/pgeproduct.aspx?iid=2217196
    [193] => http://www.example.com/Replay/Replay-Replay-T-Shirt-college-logo/Prod/pgeproduct.aspx?iid=2117989
    [194] => http://www.example.com/Esprit/Esprit-Reverse-Pocket-Stripe-Crew-Neck-T-Shirt/Prod/pgeproduct.aspx?iid=2183750
    [195] => http://www.example.com/Sin-Star/Sin-Star-Kill-Graphic-T-Shirt/Prod/pgeproduct.aspx?iid=2274447
    [196] => http://www.example.com/Sin-Star/Sin-Star-Destroy-Graphic-T-Shirt/Prod/pgeproduct.aspx?iid=2274445
    [197] => http://www.example.com/J-Lindeberg/J-Lindeberg-Scoop-Neck-T-Shirt/Prod/pgeproduct.aspx?iid=2228059
    [198] => http://www.example.com/J-Lindeberg/J-Lindeberg-Fine-Stripe-T-Shirt-with-Pocket/Prod/pgeproduct.aspx?iid=2227948
    [199] => http://www.example.com/mysite/mysite-Vest-With-Eagle-Print/Prod/pgeproduct.aspx?iid=2099899
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:01:06.097

该数组显然是正确的，或者至少它是 200 个元素长。

那么问题是 Laravel 可能不希望您使用 echo 或 var_dump 或 print_r 拍摄输出，并且“直接输出的 HTML”可能会破坏某种输出处理器，除非您利用 Laravel 的 Logger 类。

这可能是一个巧合，但您的输出大小似乎在 16 Kb 左右，这是多个处理器/美化器/HTML 清洁器的首选缓冲区大小。

如果你对数组开头的前 20 个元素进行 array_slice，会发生什么？仅显示 130 个元素，还是您仍然看到 150 个（或多或少）元素？

编辑：如果你真的必须使用 echo、print_r 或任何“非 Laravel”方法来输出一些又快又脏的东西，你几乎可以肯定会这样做：

```
 // Open another output buffering context
  ob_start();

  print_r($WHATEVER);

  $_output = ob_get_contents();
  // Destroy the context so that Laravel's none the wiser
  ob_end_clean();

  $_fp = fopen("/tmp/myfile.txt", "w");
  fwrite($_fp, $_output);
  fclose($_fp);
  // Remove awkward traces
  unset($_fp, $_output); 
```

你也可以把最后一部分封装成你自己的函数，这样你就可以写

```
 // in helpers.php
  function myObStop($file, $mode = 'a') {
      $_output = ob_get_contents();
      // Destroy the context so that Laravel's none the wiser
      ob_end_clean();

      $_fp = fopen($file, $mode);
      fwrite($_fp, $_output);
      fclose($_fp);
  }

  ob_start();
  print "Whatever";
  myObStop('/tmp/myfile.txt', 'w'); 
```

然后让 Laravel 执行。但我**强烈**建议改用 Logger：

```
 http://laravel.com/docs/logging#logging 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:32:55.453

当我测试数组时，我使用它。

我很确定这是一个名为 dd() 的默认辅助函数

```
$array;  // That is 200 elements long.

var_dump($array);
die(); // Prevents html from being rendered if executed in the controller or model. 
```

在我看来，每次我尝试这样做时，都会像 Iserni 所说的那样被 HTML 搞砸。

# c# - 部分声明，不得指定不同的基类

> ID：12039970
> 
> 赞同：10
> 
> 时间：2012-08-20T14:52:13.267
> 
> 标签：c#, wpf, xaml

我知道互联网上有这方面的信息，我已经搜索过了。但是我仍然遇到错误，有人可以向我指出我做错了什么吗？

基类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Controls;

namespace ProgramManagementV2.screens
{
    public abstract class AScreenUserControl : UserControl
    {
        public string GetScreenDescriptionName()
        {
            return "No name yet!";
        }
    }
} 
```

MainUserControl.xaml

```
<UserControl x:Class="ProgramManagementV2.screens.MainUserControl"
             xmlns:we="clr-namespace:ProgramManagementV2.screens"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Height="23" HorizontalAlignment="Center" Name="textBlock1" Text="asdfasdf" VerticalAlignment="Center" />
    </Grid>
</UserControl> 
```

MainUserControl.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace ProgramManagementV2.screens
{
    /// <summary>
    /// Interaction logic for MainUserControl.xaml
    /// </summary>
    public partial class MainUserControl : AScreenUserControl
    {
        public MainUserControl()
        {
            InitializeComponent();
        }
    }
} 
```

如您所见，我正在添加

```
xmlns:we="clr-namespace:ProgramManagementV2.screens" 
```

到用户控件 xml，但我仍然收到错误：

> 'ProgramManagementV2.screens.MainUserControl' 的部分声明不得指定不同的基类

谁能向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-20T14:57:55.357

通过使用`<UserControl ...`您将基类声明为`UserControl`，您需要将其更改为

```
<we:AScreenUserControl x:Class="ProgramManagementV2.screens.MainUserControl" ... 
```

但是`UserControls`我认为只允许一级继承，至少如果`AScreenUserControl`有 XAML，这肯定行不通。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T15:01:21.390

只需这样做：

```
<we:AScreenUserControl x:Class="ProgramManagementV2.screens.MainUserControl"
             xmlns:we="clr-namespace:ProgramManagementV2.screens"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Height="23" HorizontalAlignment="Center" Name="textBlock1" Text="asdfasdf" VerticalAlignment="Center" />
    </Grid>
</we:AScreenUserControl> 
```

# java-ee-6 - Java EE6 应用程序需要哪些库（或单独的 jar）？

> ID：12039981
> 
> 赞同：1
> 
> 时间：2012-08-20T14:52:34.110
> 
> 标签：java-ee-6

1.  我想知道运行基本 EE6 应用程序需要 jar 库吗？
2.  EAR 库是什么？我在哪里可以找到这些罐子的成分列表？
3.  什么是 Web 应用程序库？我在哪里可以找到这些组成罐子的列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:45:33.900

开始使用 Java EE 6 的最简单方法是使用 Java EE 6 应用程序服务器。这些已经包含了构成 Java EE 6 的所有 jar。

例如 TomEE 和 Resin（都只有 25mb）、GlassFish、JBoss AS 和 Geronimo。

几乎 Java EE 的每个部分都可以作为单独的 jar 使用，但是您需要进行大量的 jar 搜索并且需要做出很多选择（对于 JSF、MyFaces 或 Mojarra，对于 JPA、Hibernate、EclipseLink、. ..，用于 CDI OpenWebBeans、Weld 或 CanDI 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:33:39.337

首先，您需要为您的项目选择一个应用服务器。[使用 Maven 创建企业应用程序](http://netbeans.org/kb/docs/javaee/maven-entapp.html)让您对如何构建和部署 Java EE6 应用程序有一个很好的印象。

[EAR](http://en.wikipedia.org/wiki/EAR_%28file_format%29)是 Wikipedia 中描述的 EnterpriseARchive 。

> EAR（企业存档）是 Java EE 使用的一种文件格式，用于将一个或多个模块打包到单个存档中，以便将各种模块部署到应用程序服务器上同时且连贯地进行。它还包含称为部署描述符的 XML 文件，用于描述如何部署模块。

# java - 应该如何使用抽象实例

> ID：12039989
> 
> 赞同：1
> 
> 时间：2012-08-20T14:53:00.913
> 
> 标签：java, oop, abstraction

我正在设计一款游戏，我对自己正在做的事情有很好的了解。

但是我一直在努力提高我的 OOP 技能，但时不时会遇到同样的问题，我应该如何使用抽象对象？

假设我有一个实体列表，它代表屏幕上具有 x 和 y 属性的任何东西，并且宽度和高度可能还没有完全弄清楚！

然后我有特殊类型的实体，一种可以移动，一种不能移动，将来可能会发生碰撞。

它们都在实体的集合中（`List<Entity>`在我的情况下），现在我想模拟移动的实体并且是主循环上 DynamicEntity 的实例，但它们都在实体的抽象列表中，我不知道是实体在循环中动态实体与否。

我知道我可以检查一下，`instanceof`但我很确定这不是最好的主意..

我见过一些人在实体中使用类似布尔值来检查它的类型，但我真的不想在那里硬编码所有类型的实体。

我只想知道在这种情况下最好的做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:01:17.327

通常，如果可能，最好避免检查类型。如果您认为需要`instanceof`在代码中使用，那么您可能可以使用抽象来使您的设计更具可扩展性。（如果您决定`Entity`在将来添加第三种类型，您不希望返回并`instanceof`使用第三种情况更新所有支票。）

有两种常用方法可以根据实例的具体类型执行不同的操作，而无需检查具体类型：

一种常见的方式是[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。这里的想法是为每种类型的对象创建一个带有操作的访问者类。接下来，每个具体类都有一个`accept`方法，该方法简单地调用`visit`访问者类中的正确方法。这种单级间接允许对象自己选择正确的操作，而不是您通过检查类型来选择它。

访问者模式通常用于以下两个原因之一。1) 您可以向实现访问者模式的类层次结构添加新操作，而无需访问类的源代码。您只需实现一个新的访问者类并将其与可访问类的预先存在的`accept`方法一起使用。2）当有许多可能的操作可以对某个类型层次结构中的类执行时，有时将每个操作拆分到它自己的访问者类中会更清楚，而不是用一堆不同操作的一堆方法污染目标类，所以您将它们与访问者而不是目标类分组。

然而，在大多数情况下，第二种方式更容易做事：简单地覆盖每个具体类中公共方法的定义。该类`Entity`可能有一个抽象`draw()`方法，然后每种类型的实体将以`draw()`不同的方式实现该方法。您知道每种类型的 Entity 都有一个`draw()`可以调用的方法，但您不必知道它是哪种类型的实体或方法的实现做了什么的详细信息。您所要做的就是遍历您的`List<Entity>`并调用`draw()`每一个，然后它们将根据其类型自行执行正确的操作，因为每种类型都有自己的专门`draw()`实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:59:36.050

您是对的，您不想检查实例类型或具有某种功能来检查功能。我的第一个问题是 - 为什么您首先拥有该基本类型的实体列表？在我看来，您需要维护一个动态实体列表。

您*可以*实现一个`move()`对非动态实体不执行任何操作的方法，但在此特定场景中这似乎并不正确。

也许最好实现一个触发该列表迭代的事件，并将该事件依次传递给每个对象。动态实体可以决定继续该事件。静态实体显然不会。

例如

```
 Event ev = ...
   foreach(e : entities) {
      e.actUpon(ev);
   } 
```

在这种情况下，您可以有不同的事件类型，实体将根据事件类型*和*实体类型来决定它们的动作。这称为*双重调度*或[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:02:11.447

如果您对实体的处理依赖于了解有关实体类型的详细信息，那么您的`Entity`抽象不会给您带来太多好处（至少在这个用例中不会）：您`List<Entity>`对您来说几乎和`List<Object>`.

如果您知道您可以想象的每个实体都是静态的或动态的，那么对所有实体都具有布尔属性就没有“硬编码”：`isDynamic()`或其他东西。

但是，如果动态方面仅对您的实体子集有意义，则此标志确实会给您的抽象带来一些混乱。在这种情况下，我的第一个猜测是您没有正确建模用例，因为您需要处理一个项目列表，这些项目没有提供足够的多态信息来处理它们。

# silverlight - Silverlight 中禁用的 ContextMenu 项的工具提示

> ID：12039991
> 
> 赞同：1
> 
> 时间：2012-08-20T14:53:09.100
> 
> 标签：silverlight, tooltip

我需要在一些禁用的 ContextMenu 项目上显示工具提示。我尝试了使用边框并将工具提示和菜单项放在边框中的解决方法，但我的菜单设计完全混乱，将 Margin、Padding 和 BorderThickness 设置为 0 无济于事。
有任何想法吗 ？另一种方法？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:36:28.457

好的，我明白了，感谢**vinod8812**。我给了我的 MenuItem 一个具有不同 VisualStates 的样式，然后我只需要将我的 MenuItem 的 VisualState 更改为“已禁用”，工具提示就可以正常工作。

```
VisualStateManager.GoToState(menutitem, "Disabled", true); 
```

不是一个完美的解决方案，但到目前为止可以工作。

# ajax - Primefaces 自动完成返回列表基于其他字段的值。我该怎么办？

> ID：12039994
> 
> 赞同：0
> 
> 时间：2012-08-20T14:53:15.953
> 
> 标签：ajax, autocomplete, primefaces

图片胜于文字... [![](../Images/4fdf313e0e7df4ea7be6570e28d95343.png)](https://lh5.googleusercontent.com/-xAtTrMd6sUQ/UC5FthLcG-I/AAAAAAAAAaI/cJGX1upNX5g/s918/autocomplete.jpg)

我想返回街道地址，但为此我必须通过城市和州。我尝试了很多方法，但我做不到，因为我不理解，但我认为当我进行 ajax 自动完成并设置城市和州的值时，这些值不会传递给 managedbeans。它们仅在我在向导中前进时才通过，可能是因为自动完成过程并且只是更新自身（即使我试图通过自动完成标签中的其他 ajax 请求更新其他字段）。

以下代码：

```
<p:autoComplete global="true" id="autoCompleteEnderecoCidadesLogradouro" 
 completeMethod="#{cidadeMB.autoCompletaEnderecoPojo}" 
 value="#{cidadeMB.enderecoTemp}" var="e" itemValue="#{e}"
 itemLabel="#{cidadeMB.cidade.endereco.logradouro}" converter="enderecoConverter"
 forceSelection="true" minQueryLength="5" maxResults="15" queryDelay="800"
 styleClass="textoLogradouro">
  <p:ajax process=":tabViewSistema:tabViewCadastro:formAddCidades:testeCidadeInput"
   update=":tabViewSistema:tabViewCadastro:formAddCidades:testeCidadeInput"/>
    <p:column>#{e.logradouro}</p:column>
    <p:column>#{e.cep}</p:column>
    <p:column>#{e.uf}</p:column>

  <p:ajax event="itemSelect" listener="#{cidadeMB.handleSelecaoDeEndereco}"
   update=":tabViewSistema:tabViewCadastro:formAddCidades:panelAddCidadesT3"/>  
</p:autoComplete> 
```

谁能给我一个提示怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T07:30:13.990

其他人也有同样的问题，PrimeFaces 解决了这个问题：

[问题 3593：将进程选项添加到自动完成](http://code.google.com/p/primefaces/issues/detail?id=3593)

```
Summary: Add process option to autocomplete
Labels: TargetVersion-3.2
[...]
We'll add process option which you can use to add other component
on page to decide what to process during search request.
[...]
Done, you now can do process="otherComponents" while entering data. 
```

因此，您现在可以将属性添加`process="otherComponent1 otherComponent2"`到`<p:autocomplete>`. 然后，JSF 应该在每个自动完成回调中设置来自这些组件的值，就像在常规提交期间一样，并且您的自动完成回调可以引用这些值。

# c# - RestFul Wcf 视频流到 iPhone 客户端

> ID：12039995
> 
> 赞同：1
> 
> 时间：2012-08-20T14:53:17.633
> 
> 标签：c#, wcf, windows-services, windows-server-2008, wcf-data-services

嗨，我正在尝试在移动客户端上播放来自我宁静的 wcf 服务的视频。当我打开链接时，它不会在 mediaPlayer 和浏览器中播放视频，实际上是开始下载文件。

这是c#代码

```
public Stream playVideo(string VideoId)
        {
            HttpContext context = HttpContext.Current;
            if (response[1] != null)
            {
                string video_path = Constants._VideosDirectory + "\\" + response[1] + "\\" + VideoId + ".MOV";
                if (File.Exists(video_path))
                {
                    FileStream stream = new FileStream(video_path, FileMode.Open, FileAccess.Read);

                    FileInfo fileInfo = new FileInfo(video_path);
                    context.Response.ClearContent();
                    context.Response.ClearHeaders();
                    context.Response.AddHeader("Content-Length", fileInfo.Length.ToString());
                    context.Response.AddHeader("Content-Disposition", "attachment; filename=" + fileInfo.FullName.Replace(" ", "_"));
                    context.Response.ContentType = ReturnFiletype(fileInfo.Extension.ToLower());
                    WebOperationContext.Current.OutgoingResponse.ContentType = "video/quicktime";
                    return stream;
                }
}
} 
```

这是此服务的 webhttpBinding

```
<bindings>

     <webHttpBinding>
   <binding transferMode="Streamed"
            maxBufferPoolSize="250000000"
            maxBufferSize="5242880"
            maxReceivedMessageSize="2147483647"
            openTimeout="05:25:00"
            closeTimeout="00:25:00"
            sendTimeout="00:25:00"
            receiveTimeout="0:25:00"
            name="webBinding"
       /></webHttpBinding>
   </bindings>
 <service behaviorConfiguration="RestBehavior" name="Test.StreamVideo">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webBinding"
           contract="Test.IStreamVideo" />
      </service> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:05:53.660

将代码更改为此解决了我的问题:)

```
FileStream stream = new FileStream(video_path, FileMode.Open, FileAccess.Read);

                    WebOperationContext.Current.OutgoingResponse.ContentType = "video/quicktime";
                    return stream; 
```

# php - magento - 在发货电子邮件中添加总计块

> ID：12039999
> 
> 赞同：3
> 
> 时间：2012-08-20T14:53:30.163
> 
> 标签：php, magento, magento-1.7

我有一个一整天都解决不了的问题。我想在发票电子邮件中订购商品后在发货电子邮件中显示总计块。（当订单状态从管理更改时）这是我在 sales.xml 中的代码

```
<sales_email_order_shipment_items>
    <block type="sales/order_email_shipment_items" name="items" template="email/order/shipment/items.phtml">
        <action method="addItemRender"><type>default</type><block>sales/order_email_items_default</block><template>email/order/items/shipment/default.phtml</template></action>
        <block type="sales/order_invoice_totals" name="invoice_totals" template="sales/order/totals.phtml">
            <action method="setLabelProperties"><value>colspan="3" align="right" style="padding:3px 9px"</value></action>
            <action method="setValueProperties"><value>align="right" style="padding:3px 9px"</value></action>
            <block type="tax/sales_order_tax" name="tax" template="tax/order/tax.phtml"/>
        </block>
    </block>
    <block type="core/text_list" name="additional.product.info" />
</sales_email_order_shipment_items> 
```

在 template\email\order\shipment\items.phtml 我添加了这个

```
<tfoot>
    <?php echo $this->getChildHtml('invoice_totals'); ?>
</tfoot> 
```

但什么也没发生。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:30:10.750

我自己解决了这个问题。如果有人需要在发货电子邮件中添加价格，方法如下：

打开*app/design/frontend/base/default/template/email/order/shipment/items.phtml*并用这个替换所有代码：

```
 <?php $_shipment = $this->getShipment() ?>
<?php $_order    = $this->getOrder() ?>
<?php if ($_shipment && $_order): ?>
<table cellspacing="0" cellpadding="0" border="0" width="650" style="border:1px solid #EAEAEA;">
    <thead>
        <tr>
            <th align="left" bgcolor="#EAEAEA" style="font-size:13px; padding:3px 9px"><?php echo $this->__('Item') ?></th>
            <th align="left" bgcolor="#EAEAEA" style="font-size:13px; padding:3px 9px"><?php echo $this->__('Sku') ?></th>
            <th align="center" bgcolor="#EAEAEA" style="font-size:13px; padding:3px 9px"><?php echo $this->__('Qty') ?></th>
            <th align="center" bgcolor="#EAEAEA" style="font-size:13px; padding:3px 9px"><?php echo $this->__('Price'); ?>:</th>
        </tr>
    </thead>

    <?php $i=0; foreach ($_shipment->getAllItems() as $_item): ?>
    <?php if($_item->getOrderItem()->getParentItem()) continue; else $i++; ?>
    <tbody<?php echo $i%2 ? ' bgcolor="#F6F6F6"' : '' ?>>
        <?php echo $this->getItemHtml($_item) ?>
        </tbody>
    <?php endforeach; ?>
    <tfoot>
        <tr class="subtotal">
            <td colspan="3" align="right" style="padding:3px 9px">
                Subtotal
            </td>
            <td align="right" style="padding:3px 9px">
                <span class="price"><?php echo $_order->formatPriceTxt($_order->getSubtotal()); ?></span>
            </td>
        </tr>
        <tr class="shipping">
            <td colspan="3" align="right" style="padding:3px 9px">
                Delivery:
            </td>
            <td align="right" style="padding:3px 9px">
                <span class="price"><?php echo $_order->formatPriceTxt($_order->getShippingAmount()); ?></span>
            </td>
        </tr>
        <tr class="grand_total">
            <td colspan="3" align="right" style="padding:3px 9px">
                <strong>Total</strong>
            </td>
            <td align="right" style="padding:3px 9px">
                <strong><span class="price"><?php echo $_order->formatPriceTxt($_order->getSubtotal() + $_order->getShippingAmount()); ?></span></strong>
            </td>
        </tr>
    </tfoot>
</table>
<?php endif; ?> 
```

现在我们包含了总计，但我们需要在 tbody 中显示每种产品的价格。

所以打开*app/design/frontend/base/default/template/email/order/items/shipment/default.phtml* 之后

```
<?php $_item = $this->getItem() ?> 
```

添加这个

```
<?php $_order = $this->getItem()->getOrder(); ?> 
```

在关闭 tr 标记之前的代码末尾添加以下行：

```
<td align="center" valign="top" style="font-size:11px; padding:3px 9px;">
<?php echo $_order->formatPrice($_item->getPrice()); ?> 
```