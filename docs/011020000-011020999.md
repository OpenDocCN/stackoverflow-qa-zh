# StackOverflow 问答 11020000-11020999

# css - IE9中容器的CSS下拉菜单截断

> ID：11020002
> 
> 赞同：0
> 
> 时间：2012-06-13T17:16:19.493
> 
> 标签：css, internet-explorer-9, position, z-index, drop-down-menu

我有一个与这篇文章非常相似的问题：

[CSS Flyout 菜单在 IE9 中被其容器的边框截断](https://stackoverflow.com/questions/10742828/css-flyout-menu-gets-cut-off-by-borders-of-its-container-in-ie9)

不同之处在于，在我的情况下，我需要在容器上设置 z-index（以及位置）。你可以在这里看到我的 JSFiddle：

[http://jsfiddle.net/qbaH9/4/](http://jsfiddle.net/qbaH9/4/)

在完整布局中有一个元素，我通过将 z-index: 100 添加到标题中来“滑入”标题下，正如您在[此图像](http://cl.ly/1J1Z1S3u1t1t1y0R463Q "这个图片")中看到的那样。

如何在标题上设置 z-index，并确保下拉菜单在 IE9 中没有被截断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:36:32.880

从. `position: relative`_`.main-header`

[http://jsfiddle.net/qbaH9/3/](http://jsfiddle.net/qbaH9/3/)

# java - 如何使用线程的 id 挂起线程？

> ID：11020005
> 
> 赞同：1
> 
> 时间：2012-06-13T17:16:29.903
> 
> 标签：java, multithreading

我正在尝试的代码

```
public void killJob(String thread_id)throws RemoteException{   
Thread t1 = new Thread(a);   
    t1.suspend();   
} 
```

我们如何根据它的 id 挂起/暂停线程？Thread.suspend 已被弃用，必须有一些替代方案来实现这一点。我有线程 ID，我想挂起并终止线程。

编辑：我用过这个。

```
AcQueryExecutor a=new AcQueryExecutor(thread_id_id);
Thread t1 = new Thread(a); 
t1.interrupt(); 
while (t1.isInterrupted()) { 
    try { 
       Thread.sleep(1000); 
    } catch (InterruptedException e) { 
       t1.interrupt(); 
       return; 
    } 
} 
```

但我无法停止这个线程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T17:18:45.300

> 我们如何根据它的 id 挂起/暂停线程？...我有线程 ID，我想挂起并终止线程。

这些天杀死线程的正确方法是`interrupt()`它。这会将 设置`Thread.isInterrupted()`为 true 并导致`wait()`,`sleep()`和其他几个抛出的方法`InterruptedException`。

在您的线程代码中，您应该执行以下操作，以确保它没有被中断。

```
 // run our thread while we have not been interrupted
 while (!Thread.currentThread().isInterrupted()) {
     // do your thread processing code ...
 } 
```

下面是一个如何处理线程内部中断异常的示例：

```
 try {
     Thread.sleep(...);
 } catch (InterruptedException e) {
     // always good practice because throwing the exception clears the flag
     Thread.currentThread().interrupt();
     // most likely we should stop the thread if we are interrupted
     return;
 } 
```

*暂停*线程的正确方法有点困难。`volatile boolean suspended`您可以为它会关注的线程设置某种标志。您还可以使用`object.wait()`挂起线程，然后`object.notify()`重新启动它运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:50:48.867

我最近发布了一个在内部使用的[PauseableThread](https://stackoverflow.com/a/10669623/823393)实现`ReadWriteLock`。使用其中一个或变体，您应该能够暂停线程。

至于通过 id 暂停它们，一点谷歌搜索建议[了一种迭代所有](http://www.exampledepot.com/egs/java.lang/ListThreads.html)看起来应该工作的线程的方法。`Thread`已经暴露了一段时间的[getId方法。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getId%28%29)

杀死线程是不同的。[@Gray](https://stackoverflow.com/a/11020048/823393)已经巧妙地覆盖了那个。

# ruby-on-rails - “Class#message”和“Class.message”表示法之间的区别

> ID：11020007
> 
> 赞同：3
> 
> 时间：2012-06-13T17:16:38.993
> 
> 标签：ruby-on-rails, ruby

这是一个非常基本的红宝石问题。`ClassName#message`和 和有什么不一样`ClassName.message`？

我正在阅读基本的 Ruby 指南，我看到这两个参考资料都被大量使用。似乎主要在代码`ClassName.message`中使用但在文档`ClassName#message`中使用。

是`#`简单的文档约定吗？只有`.`在实际代码中传递消息的工作？或者有什么我只是想念的东西？

Rails 中的含义是否完全不同？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T17:21:58.510

在您使用的代码`object.method`中。然而，在文档中，`Class#method`表示实例方法（例如`String#upcase`），而`Class.method`or`Class::method`表示类/模块方法（例如`Math.log10`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T17:20:27.200

在`#`文档中用于指出类方法和实例方法之间的区别。

在代码中，您将`.`在所有情况下使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T17:25:50.647

'#' 是 Rails 约定。在 rails className#Message 将映射到您的 className 控制器的 Message 操作。

```
Ex:
   match "profile" => "users#show" 
```

这将映射 root_path/profile => 显示 UserController 的方法（或操作）。

# php - 将 isset() 与 mysql 查询结合以创建动态查询

> ID：11020012
> 
> 赞同：0
> 
> 时间：2012-06-13T17:17:05.843
> 
> 标签：php

我做了一些寻找，但老实说，我只是不知道到底要搜索什么。正如标题所说，我要做的是创建一个动态查询。也就是说，我只查询发送到 php 文件的变量。例如，如果我想查找用户，但我只知道他们的姓氏和用户名，但是对于另一个用户，我知道他的名字和电子邮件。我想为搜索表单提供许多字段并根据输入的字段创建查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:31:17.203

首先建立一个 WHERE 子句列表，然后将它们添加到您的查询中。例如：

```
$where = "";

if (isset($firstname) {
    $firstname = mysql_real_escape_string($firstname);
    $where .= "AND firstname='$firstname'";
}

if (isset($lastname) {
    $firstname = mysql_real_escape_string($lastname);
    $where .= "AND lastname='$lastname'";
}

mysql_query("SELECT * FROM users WHERE 1 ".$whereClause); 
```

当然，您需要更改表/行/等名称并`if (isset`为每个属性添加额外的部分。

# jquery - 表单验证逻辑

> ID：11020016
> 
> 赞同：-3
> 
> 时间：2012-06-13T17:17:14.200
> 
> 标签：jquery, validation

我想通过 javascript/jquery 验证表单。

基本上我只想验证输入 2**如果**输入 1 输入了一个值。否则，如果框 1 为空，则不对其进行验证。

因此，只有在输入 1 中输入了任何值时才会触发输入 2 的验证。

理想情况下，我想使用某种库。

感谢您提供任何高级输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:32:07.837

你不能只使用 JavaScript if 语句吗？

```
if($('#[input1]').val()!=""){
//validation here
} 
```

# c# - 方法'METHOD'没有重载需要0个参数

> ID：11020021
> 
> 赞同：4
> 
> 时间：2012-06-13T17:17:20.877
> 
> 标签：c#, winforms, overloading

我有3种方法。

1 个方法持有 3000 的值 1 个方法持有 0.13 的值

我创建了另一种方法，我想将这两个数字相乘。

```
public override int FishPerTank()
{                
    return 3000;                
}

public override double WeightOut(double weightOut, double weightIn)
{
    return 0.13;
}

public override int HowMuchTheFishWeighOutKG()
{
    return (FishPerTank() * WeightOut());
} 
```

我在这里收到有关 WeightOut 的语法错误：

```
public override int HowMuchTheFishWeighOutKG()
{
    return (FishPerTank() * WeightOut());
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T17:19:29.700

`WeightOut`期望 2 个参数，但您没有提供它们

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T17:20:06.937

`WeightOut(double weightOut, double weightIn)`用两个参数声明，你没有调用它。因此错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T17:21:21.180

```
WeightOut() 
```

需要两个参数。但为什么 ？你不使用它们。

在没有 2 个参数的情况下重写您的方法

```
public double WeightOut()
{
   return 0.13;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T17:20:38.750

你可能想改变

```
public override double WeightOut(double weightOut, double weightIn)
{
    return 0.13;
} 
```

到

```
public override double WeightOut()
{
    return 0.13;
} 
```

因为您没有使用参数。

还有为什么要覆盖？如果删除参数导致另一个语法错误，可能需要删除它，或者在基类中修复它。

# javascript - 带有自定义库的 querySelectorAll

> ID：11020022
> 
> 赞同：2
> 
> 时间：2012-06-13T17:17:21.293
> 
> 标签：javascript, object, frameworks, css-selectors

我有这个代码：

```
(function() {

var base = function (elem) {

    var elements = document.querySelectorAll(elem);

    return {
        elems: elements[0],
        on: function (evt, func) {
            if(this.elems) this.elems.addEventListener(evt, func, false);
            return this;
        }
    };
};

window.base = window._ = base;

})(); 
```

我可以这样做：

```
_('form').on('submit', uploadImage); 
```

但如果我这样做：

```
_('form').appendChild(input); 
```

我收到一个错误：`Object #<Object> has no method 'appendChild'`

那么我怎样才能使用`_('element')`本机函数并仍然使它与我的对象中的方法一起使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:57.260

给你的对象一个`.appendChild`调用`.appendChild`元素的函数。

```
(function() {

    var base = function (elem) {

        var elements = document.querySelectorAll(elem);

        return {
            elems: elements[0],
            on: function (evt, func) {
                if(this.elems) this.elems.addEventListener(evt, func, false);
                return this;
            },
            appendChild: function(el) {
                this.elems.appendChild(el);
                return this;
        };
    };

    window.base = window._ = base;

})(); 
```

* * *

边注。如果您只对从 返回的第一个元素感兴趣，则`querySelectorAll`可以`querySelector`改用。

```
return {
    elems: document.querySelector(elem),
    on: function (evt, func) {
      // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:57:11.830

我认为您可以使用原型（[不推荐](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)）来做到这一点：

```
// Prototype.js style
var Base = function (selector) {
    return document.querySelector(selector);
};

Element.prototype.on = function (e, f) {
    this.addEventListener(e, f, false);
    return this;
};

elp = Base('#result');
elp.on('click', function () {
    console.log(this);
});

elp instanceof Element; // true
elp.innerHTML; // text 
```

或者使用对象包装器：

```
// jQuery style
var Base = function (selector) {
    this[0] = document.querySelector(selector);
    return this;
};

Base.prototype.on = function (e, f) {
    this[0].addEventListener(e, f, false);
    return this;
};

elj = new Base('#result'); // internal new called in jQuery
elj.on('click', function () {
    console.log(this);
});

elj instanceof Base; // true
elj[0] instanceof Element; //true
elj[0].innerHTML; // text 
```

# linux - Linux中的DNS缓存

> ID：11020027
> 
> 赞同：74
> 
> 时间：2012-06-13T17:17:43.813
> 
> 标签：linux, networking, operating-system, dns

我对 DNS 缓存感到困惑。我正在编写一个小型转发代理服务器，并希望在 Linux 系统上使用 OS DNS 缓存。

如果我理解正确，那么在浏览器级别有 DNS 缓存。然后是操作系统级别的 DNS 缓存（Windows 有它。我不确定 Linux 发行版是否默认有它）。

那么，浏览器/代理服务器如何使用操作系统 DNS 缓存？我正在尝试查找是否可以依靠 Linux 进行 DNS 缓存，而不是在我的代理中自己进行。

谢谢

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-13T18:35:53.510

在 Linux（可能还有大多数 Unix）上，除非安装并运行了[nscd](http://linux.die.net/man/8/nscd) ，否则没有操作系统级别的 DNS 缓存。即便如此，至少在 Debian 中默认禁用 nscd 的 DNS 缓存功能，因为[它已损坏](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=335476)。实际的结果是你的 linux 系统很可能不做任何操作系统级别的 DNS 缓存。

您可以在您的应用程序中实现自己的缓存（就像他们为 Squid 所做的那样，根据[diegows](https://stackoverflow.com/users/1276950/diegows)的评论），但我建议不要这样做。工作量很大，很容易出错（nscd 搞错了！！！），它可能不像专用 DNS 缓存那样容易调整，而且它复制了应用程序之外已经存在的功能。

如果使用您的软件的最终用户需要 DNS 缓存，因为 DNS 查询负载大到足以成为问题，或者到外部 DNS 服务器的 RTT 足够长而成为问题，他们可以安装缓存 DNS 服务器，例如[Unbound](http://unbound.net/)与您的应用程序在同一台机器上，配置为缓存响应并将未命中转发到常规 DNS 解析器。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-13T21:27:20.020

以下是另外两个可用于 Linux 上的 DNS 缓存的软件包：

*   dnsmasq
*   绑定

为 DNS 转发和缓存配置软件后，然后在 /etc/resolv.conf 中将系统的 DNS 解析器设置为 127.0.0.1。

如果您的系统正在使用 NetworkManager，您可以尝试使用`dns=dnsmasq`选项，`/etc/NetworkManager/NetworkManager.conf`或者您可以将连接设置更改为自动（仅地址），然后使用`/etc/NetworkManager/dispatcher.d`目录中的脚本来获取 DHCP 名称服务器，将其设置为您的 DNS 转发服务器DNS缓存软件然后触发配置重新加载。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-08T22:51:51.670

您在这里有一个使用 dnsmasq[在 Debian 中进行 DNS 缓存的示例。](https://manageacloud.com/cookbook/76m90q66bp9d2uit1veeaidgte)

配置总结：

### /etc/default/dnsmasq

```
# Ensure you add this line
DNSMASQ_OPTS="-r /etc/resolv.dnsmasq" 
```

### /etc/resolv.dnsmasq

```
# Your preferred servers
nameserver 1.1.1.1
nameserver 8.8.8.8
nameserver 2001:4860:4860::8888 
```

### /etc/resolv.conf

```
nameserver 127.0.0.1 
```

然后只需重新启动 dnsmasq。

使用 DNS 1.1.1.1 的基准测试：

```
for i in {1..100}; do time dig slashdot.org @1.1.1.1; done 2>&1 | grep ^real | sed -e s/.*m// | awk '{sum += $1} END {print sum / NR}' 
```

使用本地缓存 DNS 进行基准测试：

```
for i in {1..100}; do time dig slashdot.org; done 2>&1 | grep ^real | sed -e s/.*m// | awk '{sum += $1} END {print sum / NR}' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T19:44:43.740

Firefox 包含一个 dns 缓存。要禁用 DNS 缓存：

1.  打开浏览器
2.  在地址栏中输入 about:config
3.  右键单击属性列表并在上下文菜单中选择新建 > 整数
4.  输入“network.dnsCacheExpiration”作为首选项名称，输入 0 作为整数值

禁用时，Firefox 将使用操作系统提供的 DNS 缓存。

# java - 构造 HTML 字段？

> ID：11020028
> 
> 赞同：0
> 
> 时间：2012-06-13T17:17:46.123
> 
> 标签：java, html, multipart

我已经尝试了几个小时，并且还搜索了网络，但根本找不到解决方案。

我需要构建一个可以读取和格式化 HTML 的文本区域（无论是 JTextArea、JTextPane 还是 JEditorPane 都无所谓）。

我知道 JEditorPane 可以通过给它一个超链接来显示 HTML，但是如果我已经得到了 HTML 文本，并且只想显示它..？如果我使用 setText() 它只显示一个白色字段。里面什么都没有。

我得到的 HTML 文本来自电子邮件。我明白了，使用以下代码（只是其中的一个片段）

```
 String subject = message[row].getSubject();
            String from = InternetAddress.toString(message[row].getFrom());
            StringBuilder body = new StringBuilder();
            Multipart mp = (Multipart) message[row].getContent();
            for(int i = 0; i < mp.getCount(); i++) {
                BodyPart bp = mp.getBodyPart(i);
                String disp = bp.getDisposition();
                if(disp != null && (disp.equals(BodyPart.ATTACHMENT))) {
                    // Do something
                } else {
                    body.append(bp.getContent());
                }
            }
            EmailContent ec = new EmailContent(new JFrame(),true,from,subject,body.toString());
        } catch (IOException ex) {
            Logger.getLogger(MailPanel.class.getName()).log(Level.SEVERE, null, ex);
        } catch (MessagingException ex) {
            Logger.getLogger(MailPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:43:09.993

```
import javax.swing.*;

public class HTMLFromString {

    HTMLFromString() {
        JEditorPane jep = new JEditorPane();

        String html = "<html><body><h1>Title</h1><p>Paragraph..";
        // Important!
        jep.setContentType("text/html");
        jep.setText(html);

        JOptionPane.showMessageDialog(null, jep);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new HTMLFromString();
            }
        });
    }
} 
```

* * *

此版本使用（主要）您的代码段（带有一些实际内容）创建一些 HTML，前缀`<html>`为产生结果。

```
import javax.swing.*;

public class HTMLFromString {

    static String SNIPPET = 
            "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional" +
            "//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">" +
            "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head>" +
            "<meta http-equiv=\"Content-Type\" content=\"text/html; " +
            "charset=Windows-1252\" /><title></title>" +
            "<style type=\"text/css\">" +
            "a, a:visited" +
            "{" +
            "  color: #406377;" +
            "}" +
            "</style>" + 
            "</head>" +
            "<body bgcolor=\"#ffffff\" style=\"background-color: #ffffff; " +
            "width: 600px; font-family: Arial, Verdana, Sans-serif; color: " +
            "#000; font-size: 14px; margin: 0px;\"><h1>Hi!</h1>";

    HTMLFromString() {
        JEditorPane jep = new JEditorPane();

        String html = "<html>" + SNIPPET;
        // Important!
        jep.setContentType("text/html");
        jep.setText(html);

        JOptionPane.showMessageDialog(null, jep);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new HTMLFromString();
            }
        });
    }
} 
```

# c# - 无法显示列表中的数据

> ID：11020029
> 
> 赞同：0
> 
> 时间：2012-06-13T17:17:46.937
> 
> 标签：c#, windows-phone-7

由于某种原因，它没有显示日期有什么问题吗？

```
IsolatedStorageSettings uc = IsolatedStorageSettings.ApplicationSettings;

public void load()
        {
            List<DateTime> List = new List<DateTime>();
            Schedule.ItemsSource = null;
            List<s> medicationList = (List<s>)uc["nList"];

            foreach(sn temp in List)
            {
                if (dateList.Contains(t.Date))
                {

                }
                else
                {                    
                    date.Add(t.Date);
                    Schedule.ItemsSource = List;
                }
            }
        } 
```

愚蠢的错误（解决方案）

```
<ListBox x:Name="Schedule" >
</ListBox> 
```

那些并删除不必要的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:53.597

首先，移到`lstboxSchedule.ItemsSource = dateList;`foreach 之外。

设置断点以查看生成的列表是否/为什么为空。

# tableau-api - 如何删除画面工具栏上的“记住我的更改”？

> ID：11020036
> 
> 赞同：0
> 
> 时间：2012-06-13T17:18:02.273
> 
> 标签：tableau-api, toolbar

我设法使用服务器端脚本删除“共享”功能 `tabadmin set vizqlserver.showshare false`

手册：http: [//downloads.tableausoftware.com/quickstart/server-guides/en-us/server_admin7.0.pdf](http://downloads.tableausoftware.com/quickstart/server-guides/en-us/server_admin7.0.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:22:55.913

`:customViews=n`在您的网址上或

```
<parameter name="customViews" value="n" /> 
```

在您的对象定义中也将让您到达那里，而无需全局关闭。

# ios - RubyMotion：在 UITextField 中查找每个字符条目

> ID：11020039
> 
> 赞同：0
> 
> 时间：2012-06-13T17:18:27.590
> 
> 标签：ios, delegates, rubymotion

我是 RubyMotion for iOS 应用程序的新手，但我使用 Objective C 进行编码。

我的要求是获取应该为 UITextField 中的每个 char 类型调用的委托方法。

目标 C：我使用“shouldChangeCharactersInRange”来查找用户字符条目。

谁能建议我如何在 RubyMotion 中实现此功能以跟踪 UITextField 中的字符类型

谢谢你。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:25:49.347

首先，当您创建文本字段时，请确保将委托设置为它所在的同一 View Controller 类：

```
textField = UITextField.alloc.initWithFrame([[10,200],[300,40]])
textField.delegate = self 
```

然后将此方法添加到该类：

```
def textField(textField, shouldChangeCharactersInRange:range, replacementString:string)
  # return true or false based on whether you want to allow the replacement
  true
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:41:01.030

我喜欢 BubbleWrap 语法：

```
textField.when(UIControlEventEditingChanged) do
  # something
end 
```

# jquery - 数据在并在 jQuery 中对对象进行隐蔽输入*s val()

> ID：11020040
> 
> 赞同：1
> 
> 时间：2012-06-13T17:18:28.717
> 
> 标签：jquery, object, input

**HTML：**

```
<textarea>
http://ex.com=>sitename1=>Fashion
http://some.com=>sitename2=>Sport
</textarea>
<br>
<code></code> 
```

**jQuery :**

```
val = $("textarea").text();
obj = val.substr(val.indexOf ( '=>' ) )

$("code").html(obj) 
```

我没有任何想法...

在这里测试：http: [//jsfiddle.net/2heTu/](http://jsfiddle.net/2heTu/)

**我可以通过任何方式获得结果并使用以下对象：**

1.  ex.com（时尚类别中的站点名称 1）
2.  some.com（Sport 类别中的 sitename2）
3.  ..... 更多更多更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:23:00.663

像这样的东西应该能让你大部分时间到达那里：

```
jQuery(function($) {

  var val = $("textarea").val(); // You'll want a more targetd selector there, not just "textarea"
  var lines = val.split(/[\r\n]+/);

  $.each(lines, function(index, line) {
    var parts = line.split(/ *=> */);
    display(parts[0] + " in " + parts[1] + " category " + parts[2]);
  });

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }
}); 
```

[实例](http://jsbin.com/ezukec)| [来源](http://jsbin.com/ezukec/edit)

那是做什么的：

*   `$("textarea").val()``textarea`- 获取页面上第一个的值。您可能需要一个比这更有针对性的选择器。
*   `var lines = val.split(/[\r\n]+/);`- 将其分成几行
*   `$.each(lines, function(index, line) { ... });`- 在线路上循环
*   `var parts = line.split(/ *=> */);`- 将线分割成单独的部分。
*   `display(...)`- 显示零件，但更重要的是：
    *   `part[0]`每行三件事中的第一件事（看起来像一个 URL）
    *   `part[1]`第二件事（网站名称？）
    *   `part[2]`第三件事（类别）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:23:44.103

```
var val = $("textarea").text(),
    parts = val.split(/[\r\n]+/);
$.each(parts, function(i, val) {
    if(val.length) {
        var temp = $.trim(val).split('=>'),
            output = '';

        output += temp[0].replace('http://', '') + '(' + temp[1] + ' in ' + temp[2] + ' category)';
    $("code").append(output).append('<br>');
}
}) 
```

**[演示](http://jsfiddle.net/2heTu/7/)**

### 笔记

*   获取`.val()`使用的 textarea 方法的值
*   `.split(/[\r\n]+/)` 用于获取每一行
*   `$.each(parts, function(i, val) {..}`在每一行上循环
    *   `i`参数是索引`0,1,2..`
    *   `val`持有每一行
*   `if(val.length) {..`检查空值
*   `$.trim(val)`删除空格
*   `$.trim(val).split('=>')`分割每一行`=>`并返回一个数组 `temp = ["http://ex.com", "sitename1", "Fashion"]`，依此类推
    *   `temp[0]`包含网址
    *   `temp[1]`包含站点名称
    *   `temp[2]`包含类别
*   ``temp[0].replace('http://', '')``http://`从网址中删除
*   `$("code").append(output)`将输出附加到
*   `.append('<br>')`在每个输出后添加新行

# java - Java：使用参数化类型中的局部类作为局部类内部引用的局部变量

> ID：11020041
> 
> 赞同：0
> 
> 时间：2012-06-13T17:18:29.690
> 
> 标签：java, generics, inner-classes, circular-dependency, local-class

我正在用 Java 中的单个方法实现某种算法。该算法需要一个不会在其他任何地方使用的数据结构，因此对我来说使用本地类似乎很合适。算法的最后一步需要遍历方法中之前创建的所有对象，所以我想我会让本地类的构造函数将新创建的对象添加到列表中。在 Java 中，本地类可以访问声明的本地变量`final`。所以我尝试了这样的事情：

```
public void doThing() {

    class Foo {
        public Foo() {
            fooList.add(this);  // FAILS: "cannot find symbol: variable fooList"
        }
    }

    final ArrayList<Foo> fooList = new ArrayList<Foo>();

    // algorithm goes here, instantiating some Foo objects:
    Foo foo = new Foo();
    // etc.

    // now iterate through all the Foo objects that were created
    for (Foo f : fooList)
        System.out.println(f);
} 
```

这失败了，因为显然我必须先`fooList`声明，然后才能在本地类中引用它。好吧，好吧，我想，我将`fooList`在方法的开头声明：

```
public void doThing() {

    final ArrayList<Foo> fooList;  // FAILS: "cannot find symbol: class Foo"

    class Foo {
        public Foo() {
            fooList.add(this);
        }
    }

    fooList = new ArrayList<Foo>();

    Foo foo = new Foo();
    for (Foo f : fooList)
        System.out.println(f);
} 
```

但这也失败了，因为显然我需要`Foo`在引用它之前定义类。那么如何打破这种循环依赖呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:23:20.400

> 那么如何打破这种循环依赖呢？

我强烈建议将本地类分解为私有静态嵌套类。我不能说我*见过*在方法中声明的命名类的愉快使用。虽然我通常对“它仅用于一种方法”部分表示赞赏，但当您声明该类时，该方法已经达到*中等*长度。

当然，您总是可以使用原始类型进行声明，然后再进行转换......这可能会起作用，但显然它会很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:21:28.017

替代：

```
class Foo {
    public Foo(ArrayList<Foo> fooList) {
        fooList.add(this);
    }
    public Foo() {
    }
}

public void doThing() {
    final ArrayList<Foo> fooList = new ArrayList<Foo>();

    Foo foo = new Foo(fooList);

    // or simply fooList.add(new Foo());

    for (Foo f : fooList)
        System.out.println(f);
} 
```

我认为以这种方式添加对列表的引用是一个坏主意。在这种情况下，您可以简单地编写`new Foo(fooList);`并且引用将在列表中，但您没有在方法中保存引用。这取决于您要做什么，因此请使用最舒适的变体

# gxt - GXT：UiBinder 新的 Widget 实例

> ID：11020042
> 
> 赞同：0
> 
> 时间：2012-06-13T17:18:32.430
> 
> 标签：gxt, uibinder

我在窗口中有一个 TextField 表单。使用 UiBinding 创建。TextField 旁边是一个按钮。我想知道当使用 UiBinder 按下该按钮时是否可以创建一个新的 TextField 小部件？

这就是我所拥有的：

窗口类：

```
@UiField
TextField text;

@UiField
HorizontalPanel hPanel;
....
@UiHandler("addText")
public void onClick(SelectEvent event){
      hPanel.add(text);
} 
```

我的 UiBinder 文件：

```
<gxt:Window ...(generic setup)...>
 <g:VerticalPanel>
  <gxt:FramedPanel>
   <container:VericalLayoutContainer>
    <container:child>
     <g:HorizontalPanel ui:field="hPanel">
      <form:FieldLabel text="Text">
       <form:Widget>
        <form:TextField ui:field="text"/>
       </form:Widget>
      </form:FieldLabel>
      <button:TextButton ui:field="addText"/>
     </g:HorizontalPanel>
    </container:child>
   </container:VericalLayoutContainer>
  </gxt:FramedPanel>
 </g:VerticalPanel>
</gxt:Window> 
```

当我单击按钮时，它所做的就是将按钮从文本字段的右侧移到左侧。我在窗口中有更多的文本字段，所以我四处看看它到底在做什么。它正在占用该字段并将其移动到按钮旁边。

有没有办法可以在原始文本下方创建一个新的 TextField ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:45:35.080

可能[LazyDomElement](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/LazyDomElement.html)会帮助你。

# jquery - 来自 jquery.ajax 的 Spring Roo PUT 请求

> ID：11020045
> 
> 赞同：0
> 
> 时间：2012-06-13T17:18:41.350
> 
> 标签：jquery, ajax, spring, xmlhttprequest, spring-roo

我正在调用我的网络服务，该服务连接在 roo 中以进行放置。我正在使用 HiddenHttpMethodFilter 将调用路由到服务器端的 PUT 处理程序。我的 Put 方法服务端看起来就是这样。

```
@RequestMapping(value = "/{chainId}", method = RequestMethod.PUT, headers =     "Accept=application/json")
public ResponseEntity<String> updateUser(@PathVariable("chainId") String chainId, @RequestBody MultiValueMap<String, String> form) {
    HttpHeaders headers = new HttpHeaders();
    headers.add("Content-Type", "application/json");
    headers.add("Access-Control-Allow-Origin", "*");
    Chain chain = Chain.findChain(chainId);
    GymMember gymMember = new GymMember();
    gymMember.setMembershipId(form.getFirst("membershipId"));
    gymMember.setEmail(form.getFirst("email"));
    gymMember.setEmail(form.getFirst("name"));
    gymMember.setEmail(form.getFirst("age"));
    gymMember.setEmail(form.getFirst("sex"));
    gymMember.setChainId(chain);
    if (gymMember.merge() == null) {
        return new ResponseEntity<String>(headers, HttpStatus.NOT_FOUND);
    }
    return new ResponseEntity<String>(headers, HttpStatus.OK);
} 
```

对此方法的调用在这里登陆，但 @RequestBody MultiValueMap 表单始终没有数据。当我调试并查看其内容时，它表示为 {}。

我的电话可以在这里看到

```
Request URL:http://localhost:9080/FitFriendsService/gymmembers/1006
Request Headersview source
Accept:application/json, text/javascript, */*; q=0.01
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Origin:http://localhost:8888
Referer:http://localhost:8888/fitFriends/profile.html?chainId=1006&membershipId=testing&email=testing
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2
Form Dataview URL encoded
_method:PUT
membershipId:testing
email:testing
name:John Forgintonagwhaaa
age:33
sex:Male 
```

我已经读到您不能根据 HTML 指南使用 put 请求发送表单数据，但我不确定这是否正确。如果您知道一种方法，以便 spring roo 可以获取该表单数据，将不胜感激！谢谢！

# redirect - 如何将子域重定向到其他站点

> ID：11020054
> 
> 赞同：0
> 
> 时间：2012-06-13T17:19:41.270
> 
> 标签：redirect, dns, host

我有这个网站 www.ipsum.nl。和一个子域作为 lorum.ipsum.nl。我还有一个其他网站 www.othersite.com。

如何让 lorum.ipsum.nl 重定向到 www.othersite.com 而无需加载其他页面，例如“index.html”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:26:06.703

使用您的[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件：

```
RewriteEngine on  
Redirect 301 http://lorum.ipsum.nl http://www.othersite.com 
```

或者您可以使用带有 RewriteEngine 的正则表达式来匹配子域。

# c# - 带 Mchart 的逆时针极坐标图

> ID：11020062
> 
> 赞同：2
> 
> 时间：2012-06-13T17:20:04.080
> 
> 标签：c#, mschart

我一直在尝试使用 MSchart 在 PolarChart 中绘制极坐标图，并且我需要它以逆时针方向显示，我一直在寻找任何可以将图表角度的方向从顺时针方向更改为逆时针方向的属性，但还没有找到任何东西。有可能这样做吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:47:01.230

显然在极地 mscharts 中没有这样的功能。我只找到了解决这个问题的方法。逆时针绘图的方法是反转所有标签（例如 30 -> 330；60->300；90->270..等）以及您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:48:53.117

我不认为这是可能的。参考[http://support2.dundas.com/forum/tm.aspx?m=10418](http://support2.dundas.com/forum/tm.aspx?m=10418)

# core-data - 轻量级迁移后如何从 Core Data 中删除数据

> ID：11020064
> 
> 赞同：1
> 
> 时间：2012-06-13T17:20:07.143
> 
> 标签：core-data, ios5

在将我的应用程序从 v1 升级到 v2 时，我对核心数据模型进行了一些小改动。这些更改只是为模型添加了新属性。

我已经使用前后更改对数据模型进行了版本化，并在我的 App Delegate 中实现了以下代码：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"ISDEmployees.sqlite"];

    NSLog(@"storeURL:%@",storeURL);

    NSError *error = nil;

    // Create a dictionary for automatic lightweight core data migration
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, 
                             nil];

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    // Set up the persistent store and migrate if needed
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __persistentStoreCoordinator;
} 
```

基本上是标准的 persistentStoreCoordinator 加上迁移选项。此代码运行良好，我的数据库已成功更新。我遇到的问题是，在数据库更新后，我需要刷新数据库中的所有数据，以便填充新列。我在想我会从相关实体/表中删除数据并强制应用程序重新下载带有添加的列/属性的新数据集。

我不确定如何/在哪里执行删除/更新。一般申请流程是这样的：

*   使用 Web API 验证登录
*   成功登录后，调用 API 并获取最新添加/更新的记录。
*   显示更新的数据

我知道我可以通过将此代码添加到 persistentStoreCoordinator 来检查是否需要迁移：

```
// Get the current data store meta data
BOOL migrationNeeded = NO;
NSDictionary *existingStoreData = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:storeURL error:&error];

if (existingStoreData) 
{
    // Check to see if new model is not the same as the existing mode, meaning a migration is required
    if (![self.managedObjectModel isConfiguration:nil compatibleWithStoreMetadata:existingStoreData]) 
    {
        migrationNeeded = YES;
    }
} 
```

任何帮助将不胜感激！！

**更新#1：**

根据以下反馈，我进行了以下更改：

在 AppDelegate 上将 migrationNeeded 从本地更改为公共类变量。在登录视图中，我添加了以下方法：

```
- (void)checkForDatabaseMigration
{
    // Get a copy of the managed object context. If a migration is needed, it will kick it off
    NSManagedObjectContext *managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];

    if ([(AppDelegate *)[[UIApplication sharedApplication] delegate] migrationNeeded]) 
    {
        // Delete all data from the table
    }

    managedObjectContext = nil;
} 
```

这看起来对吗？代码有效，迁移后数据被删除并插入新副本。我只是讨厌每次应用程序启动时检查迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:30:57.357

如果您知道如何确定何时删除旧数据，那么您只需获取所需的所有实体并删除它们即可。这是你如何做到的（例如，如果你想删除所有**Man** enteties）：

```
 NSFetchRequest * request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Man" inManagedObjectContext:myContext]];
[request setIncludesPropertyValues:NO]; //only fetch the managedObjectID

NSError * error = nil;
NSArray * men = [myContext executeFetchRequest:request error:&error];
//error handling goes here
for (NSManagedObject * man in men) {
  [myContext deleteObject:man];
}
NSError *saveError = nil;
[myContext save:&saveError];
//more error handling here 
```

# security - 使用 REST API 登录 TeamCity 服务器，无需在 url 中传递凭据

> ID：11020066
> 
> 赞同：5
> 
> 时间：2012-06-13T17:20:15.643
> 
> 标签：security, rest, teamcity

作为上一个问题的后续，我问：[如何在 TeamCity REST API 中传递用户名和密码](https://stackoverflow.com/questions/11017686/how-to-pass-username-and-password-in-teamcity-rest-api)，我想检查一下。

有人可以告诉我是否可以以更安全的方式访问 TeamCity REST API，而不是在 url 中传递用户名和密码？

在我看来，在 url 中传递凭据是唯一的方法，因为嗅探器很容易拿到 url 并自己使用凭据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T17:46:28.937

我们遇到了同样的问题，我花了一些时间看看我们如何解决这个问题并找到了一种方法：

您进入初始屏幕 (/ntlmLogin.html) - 您将能够使用 NTLM 识别用户。
然后保存 TeamCity 提供给您的 cookie。
现在您使用 cookie 来访问 API。

请参阅[https://github.com/eduaquiles/TeamCityNtlmApiWrapper](https://github.com/eduaquiles/TeamCityNtlmApiWrapper)，其中有一个非常简单的示例来说明如何执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T12:43:12.627

根据 Eduardo Aquiles，如果您将 TeamCity 服务器配置为支持 HTTP NTLM 身份验证（[TeamCity 8.x NTLM HTTP 身份验证](http://confluence.jetbrains.com/display/TCD8/NTLM+HTTP+Authentication)），您可以从 /ntlmLogin.html url 获取会话 cookie (TCSESSIONID) 并使用它来针对 REST 进行身份验证API。

我只需要做一些类似的事情来获得构建的固定状态。这是我使用的 PowerShell：

```
function Get-TeamCityNtlmAuthCookie()
{
    param( [string] $serverUrl )
    $url = "$serverUrl/ntlmLogin.html";
    $cookies = new-object System.Net.CookieContainer;
    $request = [System.Net.WebRequest]::Create($url);
    $request.CookieContainer = $cookies;
    $request.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials;
    $request.PreAuthenticate = $true;
    $response = $request.GetResponse();
    return $cookies;
}

function Get-TeamCityBuildPinnedState()
{
    param( [string] $serverUrl, [string] $buildTypeId)
    # get a session cookie to use with the rest api
    $cookies = Get-TeamCityNtlmAuthCookie $serverUrl;
    # query the rest api using the session cookie for authentication
    $url = "$serverUrl/httpAuth/app/rest/builds/id:$buildTypeId/pin/";
    $request = [System.Net.WebRequest]::Create($url);
    $request.CookieContainer = $cookies;
    $response = $request.GetResponse();
    $stream = $response.GetResponseStream();
    $reader = new-object System.IO.StreamReader($stream);
    $text = $reader.ReadToEnd();
    $reader.Close();
    return [bool]::Parse($text);
}

$myServerUrl = "http://myTeamCityServer";
$myBuildId = "6";

$pinned = Get-TeamCityBuildPinnedState $myServerUrl $myBuildId;
write-host $pinned; 
```

注意：我不确定 JetBrains 是否正式支持此功能，因此您可能会发现它在 TeamCity 的未来版本中中断，但它目前适用于版本 8.0.2（内部版本 27482）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:27:53.063

我已经对此进行了更多的挖掘，但它看起来不太有希望。

我在 TeamCity 社区论坛上找到了以下主题：

**集成了 Rest API 身份验证**

[http://devnet.jetbrains.net/message/5461520#5461520](http://devnet.jetbrains.net/message/5461520#5461520)

另一个用户向我提出了类似的问题，得到的回答是基本的 HTTP 身份验证是目前唯一的选择。虽然您可以使用 NTLM 身份验证，但它是针对前端 Web UI 而不是 REST API 量身定制的。

我在论坛上询问是否可以通过 REST API 使用 NTLM。我没有得到答复，但我可以想象这是不可能的，在这种情况下这是可以预料的。

# javascript - 可以使用纯文本文件进行身份验证吗？

> ID：11020070
> 
> 赞同：0
> 
> 时间：2012-06-13T17:20:24.427
> 
> 标签：javascript, node.js, mongodb, security, database

我试图用 Mongodb 和 Node.js 实现一个简单的登录系统，但我发现它太麻烦了（每个人都在一百个框架上构建东西，而不是解释一半的代码）。我可能可以做到，但它需要太多的工作等等，因为我只想制作一个简单的多人游戏。

我的数据库替代品是纯文本文件。当然，我确实计划对密码进行哈希处理。我想到的第一个问题是文件可能会变得太大，并且服务器在尝试读取它时会完全放慢速度（在假设的情况下，我怀疑我的游戏会有那么多用户）。解决方案是在服务器上创建一个`users/`文件夹，并将大文件拆分为许多较小的文件。他们的名字将与用户名相对应，并且将保存散列密码和电子邮件。这解决了速度问题，我看不出我还需要数据库！

我错过了什么吗？使用数据库还有其他好处吗？此外，如果有人回答登录 Mongodb 示例，我会非常高兴，这将解决我所有的问题。让它尽可能简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:27:15.653

有很多**理由**使用真正的数据库而不是一些被破解的、半生不熟的文件实现。一些大的：

*   [酸](http://en.wikipedia.org/wiki/ACID)（这真的是4个原因）
*   性能和稳定性（数据库是一些仍在使用的最成熟的软件）
*   标准化

* * *

如果您想要“轻量级”，我建议您从[SQLite](http://sqlite.org/)开始。

* * *

有关的：

*   [为什么要使用 SQL 数据库？](https://stackoverflow.com/questions/2900324/why-use-sql-database)
*   [为什么在平面文件上使用 MySQL？](https://stackoverflow.com/questions/2667850/why-use-mysql-over-flatfiles)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:29:04.437

假设您有一个身份验证信息：用户名（10），密码（32）。这些是 42 个字符。假设每个字符为 4 个字节（包含宇宙中的所有字符），每个用户消耗 42 * 4 = 168 个字节。即使您有 100.000 个用户，它也只需要 16 MB 的内存。它可以容纳整个 RAM，您只需将更改写入磁盘，并在程序启动时将它们全部读取。当然，它会有一点开销，但不是什么大问题。

但是，处理文件可能会成为一个问题，您不必重新发明轮子。这就是数据库的用途。我同意，使用 Mongo，MySQL 有时可能有点过头了，但是如果您只打算使用数据库进行身份验证，您可以使用更轻量级的解决方案，您可以使用 SQLite，它只有一个文件、一个 ~270KB 的客户端和一个不错的NodeJS 库。看看这个不错[的帖子](http://ajlopez.wordpress.com/2011/01/31/playing-with-node-js-ubuntu-sqlite3-and-node-sqlite/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T20:13:06.640

如果您使用的是 NodeJS mongoDB 可以很好地满足您的需求，还可以选择 redis、couch 等... MongoDB 是一个很好的起点，如果您一直在玩它，不妨试试坚持下去。

看看这个使用 cloudfoundry 或 Mongolab（都是免费的）mongoDb 服务器的 repo。

[https://github.com/daithiw44/Node_Authenticated_MongoDB](https://github.com/daithiw44/Node_Authenticated_MongoDB)

该演示有一个按钮，当点击时点击数据库来获取一个值。用硬编码值替换用户名和密码文本字段中的值，就可以验证用户身份并设置 expressjs 会话。

这是用旧版本的 node 编写的，但是对 package.json 的调整应该会给你一个很好的起点。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T17:26:49.693

如果您正在使用 mongo，我强烈建议您使用[Mongoose](http://mongoosejs.com/)库。它为 Mongo 提供了出色的 ORM。如果您最终决定使用该 ORM，则有一个已建立的身份验证库，称为[mongoose-auth](https://github.com/bnoguchi/mongoose-auth)。我为自己的站点使用了默认[密码示例。](https://github.com/bnoguchi/mongoose-auth#recipe-2-configuring-email-or-phone-to-be-your-login-for-the-password-module)

# objective-c - 自定义核心数据如何填充 NSArrayController 的最佳方式

> ID：11020075
> 
> 赞同：2
> 
> 时间：2012-06-13T17:20:34.807
> 
> 标签：objective-c, cocoa, core-data, nsarraycontroller

到目前为止，我能找到的所有示例都是 Core Data 和 NSArrayController 之间的直接绑定。这意味着每个 NSArrayController 都映射一个实体。

有没有办法自定义填充到 NSArrayController 中的内容？

例如，我有两个实体：

```
FileMetaData
    ID
    FileName
    FileSize
    Owner(relationship m..1 to SystemUser)

SystemUser
    ID
    FirstName
    LastName
    Files(relationship 1..m to FileMetaData) 
```

我有一个 NSArrayController 来填充一个有两列的表格视图，一列是“文件名”，另一列是“用户名”。UserName 来自 SystemUser 实体中的 FirstName + Lastname。NSArrayController 设置为与 FileMetaData 绑定。

做这个的最好方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:21:22.380

轻松获取`UserName`属性 ( `FirstName`+ )的一种方法是`LastName`在类上定义一个类别，该方法返回适当连接的和属性。`SystemUser``UserName``FirstName``LastName`

然后在您的各种绑定中，您可以绑定到该`UserName`属性。直接在浏览器中输入，因此未经测试，`UISupport`（或任何其他名称）类别`SystemUser`可能如下所示：

```
// In SystemUser+UISupport.m

- (NSString *)userName
{
    return [NSString stringWithFormat: @"%@ %@", self.FirstName, self.LastName];
} 
```

`FirstName`如果or属性发生变化，为了使绑定工作`LastName`，您可能也希望实现此方法：

```
+(NSSet*)keyPathsForValuesAffectingUserName
{
    return [NSSet setWithObjects: @"self.FirstName", @"self.LastName", nil];
} 
```

最后，为了完整起见，您可以在头文件中声明新的只读属性：

```
// In SystemUser+UISupport.h

@property (readonly) NSString *userName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:38:38.010

我认为 Monolo 的解决方案比我的要好，但只是作为替代方案，我也会发布我的解决方案。

我的方法是在 SystemUser.m 中添加一个新的“displayName”字段。并实现 NSManagedObject 的 willSave() 方法。

```
-(void)willSave
{
    if (self.displayName == nil)
    {
        self.displayName = [NSString stringWithFormat:@"%@ %@", self.firstName, self.lastName];
    }
} 
```

这样，在 CoreData 尝试保存实体之前， displayName 字段会得到更新。

# android - 重新安装后小部件变得不可见

> ID：11020077
> 
> 赞同：10
> 
> 时间：2012-06-13T17:20:38.667
> 
> 标签：android, widget

我有一个带有配置活动的小部件。当用户想将小部件放置在主屏幕上时，配置活动打开，用户选择小部件的内容、背景颜色和文本颜色，就可以了。当我重新安装应用程序时，小部件变得不可见。它仍然存在，但没有文字和颜色。见图片： ![在此处输入图像描述](../Images/9b30d8ac58c8f8f5f62eb5553fbeda22.png)

我将发布我所有的文件，最后，我会告诉你可能是什么问题。我不知道的是解决方案。

**小部件配置.xml**

这是配置活动的布局。我不会发布这个 xml。它在布局中有文本视图。

**小部件布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="72dip"
    android:layout_height="72dip"
    android:layout_gravity="center"
    android:id="@+id/widgetlayout">

    <ImageView android:id="@+id/ImageView01"
     android:layout_width="72dip" 
     android:layout_height="72dip"
     android:scaleType="fitXY">
    </ImageView>

    <TextView
        android:id="@+id/tvConfigInput"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="left"
        android:textColor="#FFFFFF"
        android:layout_marginLeft="3dip"
        android:layout_marginRight="3dip"   
        android:textSize="12dip" />

</RelativeLayout> 
```

**我注册配置活动和 appwidgetprovider 的清单的一部分：**

```
 <activity
            android:name=".WidgetConfig"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
            </intent-filter>
        </activity>

        <receiver android:name=".MyWidgetProvider" android:label="@string/app_name">

            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE"></action>
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_info"></meta-data>
        </receiver> 
```

**xml/widget_info.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_layout"
    android:minHeight="72dp"
    android:minWidth="72dp"
    android:configure="com.b2creative.notepad.WidgetConfig"> 
</appwidget-provider> 
```

**WidgetConfig.java**

这是配置活动。用户从列表视图中选择小部件的背景和文本颜色以及要显示在小部件上的文本。我将只发布相关部分：

```
 AppWidgetManager awm;
        int awID;
        Intent i = getIntent();
        Bundle extras = i.getExtras();
        if (extras != null)
        {
            awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        }
        else
        {
            finish();
        }
        awm = AppWidgetManager.getInstance(c);

//the code from here is in a button onclicklistener that sets the widget.

            RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget_layout);
            views.setTextViewText(R.id.tvConfigInput, widgettext);
            views.setTextColor(R.id.tvConfigInput, loadedtextcolor);
            views.setFloat(R.id.tvConfigInput, "setTextSize", int_widgetfontsize);

            Paint p = new Paint(); 
            p.setAntiAlias(true);
            p.setStyle(Style.FILL);
            p.setColor(loadedbgcolor);
            Bitmap bitmap = Bitmap.createBitmap(GetDipsFromPixel(72), GetDipsFromPixel(72), Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            RectF rect = new RectF(0, 0, GetDipsFromPixel(72), GetDipsFromPixel(72));
            canvas.drawRoundRect(rect, 10, 10, p);
            views.setImageViewBitmap(R.id.ImageView01, bitmap);
            Intent in = new Intent(c, Notepad.class);
            PendingIntent pi = PendingIntent.getActivity(c, 0, in, 0);

            Intent result = new Intent();
            result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);
            setResult(RESULT_OK, result);

            awm.updateAppWidget(awID, views);

            finish(); 
```

**MyWidgetProvider.java**

```
public class MyWidgetProvider extends AppWidgetProvider {

        @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {

        super.onUpdate(context, appWidgetManager, appWidgetIds);
        final int N = appWidgetIds.length;
        for (int i=0; i<N; i++)
        {
            int awID = appWidgetIds[i];
            RemoteViews v = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
            //v.setTextViewText(R.id.tvConfigInput, "Something");
            appWidgetManager.updateAppWidget(awID, v);
        }
    }

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
        super.onDeleted(context, appWidgetIds);
    }

} 
```

所以我很确定问题出在 onUpdate 方法中，因为我没有设置小部件的布局。我用 // 留下一行以显示是否添加它，我得到一个没有背景但带有文本“Something”的小部件。

我应该如何在此方法中设置小部件的背景颜色、小部件的 textcolor 和 TextView 的文本？我不认识它们，用户在添加小部件时设置它们。或者我应该怎么做？

**编辑**

我找到[了这段](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/appwidget/ExampleAppWidgetConfigure.html)代码并像这样修改了我的代码：

我 `saveTitlePref(this, AppWidgetManager.INVALID_APPWIDGET_ID, widgettext);`在 WidgetConfig.java 中添加了 onClick 方法，因此当用户在配置活动中按下 OK 时，widgettext 将与 appwidgetid 一起保存（Idk 是什么 appwidgetid，因为代码使用 AppWidgetManager.INVALID_APPWIDGET_ID）。

为此，我需要这个：

```
 static void saveTitlePref(Context context, int appWidgetId, String text) {
            SharedPreferences.Editor prefs = context.getSharedPreferences(PREFS_NAME, 0).edit();
            prefs.putString(PREF_PREFIX_KEY + appWidgetId, text);
            prefs.commit();
        } 
```

在 MyWidgetProvider 类中，我修改了 for 循环，如下所示：

```
final int N = appWidgetIds.length;
    for (int i=0; i<N; i++)
    {
        int awID = appWidgetIds[i];
        RemoteViews v = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        //v.setTextViewText(R.id.tvConfigInput, "Something");
        v.setTextViewText(R.id.tvConfigInput, loadTitlePref(context, AppWidgetManager.INVALID_APPWIDGET_ID));
        appWidgetManager.updateAppWidget(awID, v);
    } 
```

我在哪里添加

```
 static String loadTitlePref(Context context, int appWidgetId) {
            SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
            String prefix = prefs.getString(PREF_PREFIX_KEY + appWidgetId, null);
            String nothing = "empty";
            if (prefix != null) {
                return prefix;
            } else {
                return nothing;
            }
        } 
```

它仍然不起作用，但越来越近了。我在主屏幕上放置了两个具有不同文本的小部件，然后我重新安装了该应用程序。现在两个小部件都有文本（当然，因为我设置了它），但它们具有相同的文本，即我为第二个小部件选择的文本。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:10:33.770

如果图像存储到 SD 卡，这篇文章可能有答案：[http ://www.technipages.com/android-icons-disappear-from-home-screen.html](http://www.technipages.com/android-icons-disappear-from-home-screen.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T21:44:47.213

一个好的方法是在 sharedPrefs 中映射/保存每个 Id。更多信息在这里： [处理 appwidget 的多个实例，](https://stackoverflow.com/questions/14582395/handling-multiple-instances-of-appwidget) 在这里： [http ://www.androidbook.com/akc/display?url=DisplayNoteIMPURL&reportId=3307&downerUserId=satya](http://www.androidbook.com/akc/display?url=DisplayNoteIMPURL&reportId=3307&downerUserId=satya)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-27T04:29:14.270

重新调整大小或移动小部件使其在一段时间后可见。为了解决这个问题，我在我的图像视图中放置了一个默认图像，它对我有用。

# c++ - Windows MS VC++ 2005 上的 CRT 堆调试

> ID：11020080
> 
> 赞同：0
> 
> 时间：2012-06-13T17:20:52.950
> 
> 标签：c++, memory, memory-leaks, visual-studio-2005, heap-corruption

`delete []`由于我开始在其他人的代码中看到内存泄漏错误，我启用了堆调试，并且在调用下面的代码之后，我将问题（至少，我认为）归结为类的析构函数。

```
MyClass::~MyClass() {
    delete [] my_class_member_;
} 
```

现在我确认 my_class_member_ 是一个指向结构对象的指针数组，例如，`MyStruct`已经分配了属性，`new []`所以我不确定是什么导致了这个泄漏？这是`new []`调用的样子：

```
delete [] my_class_member_;
my_class_member_ = new MyStruct[somesize_]; 
```

接下来，struct`MyStruct`也比较简单，如下（精简）：

```
struct MyStruct {
    MyStruct() {}
    ~MyStruct() {
        for( PtrList<PClass>::iterator it(ps); it.more(); it.next() ) {
            delete it.cur();
        }
        for( PtrList<RClass>::iterator it(rs); it.more(); it.next() ) {
            delete it.cur();
        }
        delete shift;
    }
    PtrList<PClass> ps;
    PtrList<RClass> rs;
}; 
```

现在`PtrList`是一个指针列表（我们正在使用的应用程序 devkit 的内置类型）。我很确定这不会有错。无论如何，有人注意到这里有什么不正常的地方吗？欣赏任何见解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:14:11.593

根据 OP 的要求添加评论作为答案。

你遵守了***[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)***吗？
根据您提供的信息，尚不清楚您是否这样做。您需要提供一个***复制构造函数***和***复制赋值运算符***，它们对您的动态分配的成员进行***深层复制***。如果您不这样做并且这两个运算符都没有`private`并且没有留下未定义然后您无法确定它们根本没有被使用，这就是您的问题所在

# jquery - jGrowl - 限制为单个消息

> ID：11020085
> 
> 赞同：3
> 
> 时间：2012-06-13T17:21:00.227
> 
> 标签：jquery, jgrowl

我正在使用 jGrowl 来显示消息和警报，我正在使用的 datepicker 会连续三次触发 .change() 函数，这意味着每次选择日期/时间时都会显示三条消息，我想将其限制为一个。

我已经尝试过`$.jGrowl.defaults.pool = 1;`，但不幸的是，这只会导致消息堆叠，而不是实际上只显示一条消息。

这是我正在使用的代码，尽管检查到位，但目前仍显示 3 条消息：

```
if($('.jGrowl-notification').length == 0) {
    jGrowl('message');
} else {
    if ( $('.jGrowl-notification').not(':visible') ) {
        jGrowl('message');
    }
} 
```

（第一次显示消息时，会创建 .jGrowl-notification div，然后在消息超时时将其隐藏）

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:16:10.777

可以尝试类似（未经测试）

```
jGrowl('message',{beforeOpen: function() {
    if($('.jGrowl-notification').is(':visible')) {
       return false;
   }
 }
}); 
```

jGrowl 查看 beforeOpen 和 beforeClose 的返回语句，返回 false 会停止它继续。

另一种可能的方法是记录是否像这样针对该输入打开咆哮。

```
$('#yourPicker').change(function() {
   if($(this).data('hasExisting') == 0) {
    jGrowl('message',{
        open: function() {
                $('#yourPicker').data('hasExisting',1);
        },
        close: function() {
                $('#yourPicker').data('hasExisting',0);
        }
        });
   }
}); 
```

这种方式在输入中存储一个值，以确定在尝试排队另一个之前是否当前为它打开咆哮。

# java - 从外部类将对象添加到 JPanel

> ID：11020095
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:21:36.287
> 
> 标签：java, swing

嗨，我正在尝试添加一个对象，例如从主类中的 JLabel 到继承 JPanel 属性的辅助类。我创建了一个基本示例，显示了我正在尝试做的事情，但它不起作用。这里是我的代码：

```
public class main extends JFrame{

public main(){
    this.setVisible(true);
    this.setSize(600, 600);
    panel nou = new panel(new JLabel("a mers"));
}
public static void main (String[] args){
    new main();
} 
```

}

```
public class panel extends JPanel{

    public panel(JLabel nou){
        this.add(nou);
    }
} 
```

我的原始代码必须添加一些来自外部类的图像，我尝试了相同的方法，但它不起作用。我怎样才能做到这一点？

编辑：这只是我需要从外部类添加此组件的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:09.293

您正在创建`JPanel`实例，但未添加到`JFrame`.

也请使用大写骆驼大小写的约定作为类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:24:59.303

使用[Container#add(Component)](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)。您可以在构造函数中以与在构造函数外部相同的方式使用它（没有 this）。

```
nou.add(new JLabel("trees")); 
```

# android - 将 ical 文件从 android 应用程序中导出到 google 日历应用程序

> ID：11020096
> 
> 赞同：6
> 
> 时间：2012-06-13T17:21:39.793
> 
> 标签：android, android-intent, export, icalendar

我搜索了这个主题，发现了这两个网站：

[从android中的文件路径获取内容uri](https://stackoverflow.com/questions/3004713/get-content-uri-from-file-path-in-android)

[http://developer.android.com/training/basics/intents/sending.html](http://developer.android.com/training/basics/intents/sending.html)

我想要做的是从 Android 应用程序中导出一个 ical 文件并将日历导入到谷歌日历应用程序。因此，如果我单击一个按钮，我的应用程序应该发送一个意图并且 Android 应用程序选择器应该出现。然后我希望能够选择谷歌日历并让日历导入 ical 文件。

到目前为止，这是我的代码：

```
Uri uri = Uri.fromFile(new File(fileName));
//Uri uri = Uri.parse(fileName);
Intent calendarIntent = new Intent(Intent.ACTION_VIEW, uri);
final Intent chooser = Intent.createChooser(calendarIntent, "choose");
...
startActivity(chooser); 
```

我可以使用 fileName 打开文件，所以这应该不是问题（fileName 只包含类似“file.ics”的内容）。如果我运行此代码，android 应用程序选择器会说没有应用程序能够处理此操作。我在 Eclipse 中使用 Google API 级别 7 作为库，并部署到带有 Android 4.04 的 Galaxy Nexus 设备进行测试。我无法弄清楚我做错了什么。有什么建议么？提前感谢您的帮助！

编辑：

以下代码显示了一个可供选择的应用程序列表：

```
Uri uri = Uri.parse(fileName);
Intent calendarIntent = new Intent(Intent.ACTION_SEND, uri);
calendarIntent.setType("text/calendar");
final Intent chooser = Intent.createChooser(calendarIntent, "choose"); 
```

但日历不在此列表中。所以我在手机上下载了ical文件并试图打开它。即使这样，也只有文本编辑器，但没有日历应用程序出现。所以在我看来，将 ical 文件导入谷歌日历应用程序是不可能的。我很高兴被证明是错误的......

# php - 从 PHP 监控 MySQL 连接（打开/关闭）

> ID：11020099
> 
> 赞同：1
> 
> 时间：2012-06-13T17:21:49.917
> 
> 标签：php, mysql, connection, monitoring

是否有任何人都知道的工具可以清楚地显示如下内容：

```
Opened Connection
   - Qry 1 executed... xyz time
   - Qry 2 executed... abc time
Connection Closed 
```

连接是从 PHP 到 MySQL。

任何探查器有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:23:09.663

是的， `show processlist`

```
mysql> show processlist;
+----+----------+-----------+--------+---------+------+------------+-------------------------------+
| Id | User     | Host      | db     | Command | Time | State      | Info                          |
+----+----------+-----------+--------+---------+------+------------+-------------------------------+
|  5 | jbolivar | localhost | SOF    | Query   |    0 | NULL       | show processlist              |
|  6 | jbolivar | localhost | sakila | Query   |    2 | User sleep | select *,sleep(20) from actor |
+----+----------+-----------+--------+---------+------+------------+-------------------------------+
2 rows in set (0.00 sec) 
```

如果你想杀死你可以使用的进程，`kill query $ID`

```
mysql> kill query 6;
Query OK, 0 rows affected (0.00 sec) 
```

编辑：

如果您需要工具，请查看[mtop](http://sourceforge.net/projects/mtop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:23:40.373

您可以使用 Sql profiler 等外部工具来完成此类任务。我已经使用过 Jet Sql Profiler ( [http://www.jetprofiler.com](http://www.jetprofiler.com) )，但它是一个商业解决方案。我还没有找到任何类似于 Sql Server Profiler 免费的 MySql 的东西。

# gwt - GWT CustomScrollPanel 示例

> ID：11020102
> 
> 赞同：4
> 
> 时间：2012-06-13T17:22:03.457
> 
> 标签：gwt, scrollbar

我发现了 GWT 的 CustomScrollPanel 以及如何自定义滚动条，但我找不到任何示例或如何设置它。是否有任何示例显示正在使用的自定义滚动条？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:33:06.000

这是您自定义本机滚动条的方式，但是您也可以开发自己的滚动条类来实现可定制性更高的 VerticalScrollbar 和 Horizo​​ntalScrollbar。

资源（风格）定义：

```
public class ScrollResourcesContainer {

    public interface ScrollPanelResources extends CustomScrollPanel.Resources
    {
        @Override
        @Source( { "ScrollPanel.css", CustomScrollPanel.Style.DEFAULT_CSS } )
        CustomScrollPanel.Style customScrollPanelStyle();
    }

    public interface HorizontalResources extends NativeHorizontalScrollbar.Resources
    {
        @Override
        @Source( { "HorizontalScrollbar.css", NativeHorizontalScrollbar.StyleTransparant.DEFAULT_CSS } )
        NativeHorizontalScrollbar.Style nativeHorizontalScrollbarStyle();
    }

    public interface VerticalResources extends NativeVerticalScrollbar.Resources
    {
        @Override
        @Source( { "VerticalScrollbar.css", NativeVerticalScrollbar.StyleTransparant.DEFAULT_CSS } )
        NativeVerticalScrollbar.Style nativeVerticalScrollbarStyle();
    }
} 
```

通过使用`CustomScrollPanel`：

```
 CustomScrollPanel csp = new CustomScrollPanel((ScrollResourcesContainer.ScrollPanelResources) GWT.create(ScrollResourcesContainer.ScrollPanelResources.class));
    csp.setHorizontalScrollbar(new NativeHorizontalScrollbar((HorizontalResources) GWT.create(HorizontalResources.class)),
    AbstractNativeScrollbar.getNativeScrollbarHeight());
    csp.setVerticalScrollbar(new NativeVerticalScrollbar((VerticalResources) GWT.create(VerticalResources.class)),
    AbstractNativeScrollbar.getNativeScrollbarWidth()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:29:42.603

要在 gwt 中获得垂直滚动条的光滑滚动条，您需要在**VerticalScrollbar.css**中添加以下代码。这对 IE 不起作用，就像 gmail 一样。

```
/* Turn on a 16x16 scrollbar */
::-webkit-scrollbar {
    width: 16px;
    height: 16px;
}

/* Turn on single button up on top, and down on bottom */
::-webkit-scrollbar-button:start:decrement,
::-webkit-scrollbar-button:end:increment {
    display: block;
}

/* Turn off the down area up on top, and up area on bottom */
::-webkit-scrollbar-button:vertical:start:increment,
::-webkit-scrollbar-button:vertical:end:decrement {
    display: none;
}

/* Place The scroll down button at the bottom */
::-webkit-scrollbar-button:end:increment {
    background-image: url(images/scroll_cntrl_dwn.png);
}

/* Place The scroll up button at the up */
::-webkit-scrollbar-button:start:decrement {
    background-image: url(images/scroll_cntrl_up.png);
}

/* Top area above thumb and below up button */
::-webkit-scrollbar-track-piece:vertical:start {
    background-image: url(images/scroll_gutter_top.png), url(images/scroll_gutter_mid.png);
    background-repeat: no-repeat, repeat-y;
}

/* Bottom area below thumb and down button */
::-webkit-scrollbar-track-piece:vertical:end {
    background-image: url(images/scroll_gutter_btm.png), url(images/scroll_gutter_mid.png);
    background-repeat: no-repeat, repeat-y;
    background-position: bottom left, 0 0;
}

/* The thumb itself */
::-webkit-scrollbar-thumb:vertical {
    height: 56px;
    -webkit-border-image: url(images/scroll_thumb.png) 8 0 8 0 stretch stretch;
    border-width: 8 0 8 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T14:54:47.887

如果有人对垂直/水平的 CSS 感兴趣，这就是我正在使用的。

**水平滚动条.css**

```
/* ***********
 * SCROLLBAR *
 * ***********/
.nativeHorizontalScrollbar::-webkit-scrollbar
{
    width: 10px;
    height: 10px;
}

/* *************
 * BUTTON AREA *
 * *************/
.nativeHorizontalScrollbar::-webkit-scrollbar-button:horizontal
{
    background-color: transparent;
}

/* Increment scroll left/right button. */
.nativeHorizontalScrollbar::-webkit-scrollbar-button:start:decrement,
.nativeHorizontalScrollbar::-webkit-scrollbar-button:end:increment
{
    display: block;

    width: 10px;
    height: 8px;

    background-repeat: no-repeat;
    background-size: 10px 8px;
}

/* Increment scroll left button. */
.nativeHorizontalScrollbar::-webkit-scrollbar-button:start:decrement
{
    background-image: url('images/scroll-left.png');
}

/* Increment scroll right button. */
.nativeHorizontalScrollbar::-webkit-scrollbar-button:end:increment
{
    background-image: url('images/scroll-right.png');
}

/* Jump left/right buttons. */
.nativeHorizontalScrollbar::-webkit-scrollbar-button:horizontal:start:increment,
.nativeHorizontalScrollbar::-webkit-scrollbar-button:horizontal:end:decrement
{
    display: none;
}

/* ******************
 * TRACKING SECTION *
 * ******************/
.nativeHorizontalScrollbar::-webkit-scrollbar-track:horizontal
{
    background-color: transparent;
}

/* Area between the thumb and the left button. */
.nativeHorizontalScrollbar::-webkit-scrollbar-track-piece:horizontal:start
{

}

/* Area between the thumb and and right button. */
.nativeHorizontalScrollbar::-webkit-scrollbar-track-piece:horizontal:end
{

}

/* 
 * The tracking area.
 * This is the area that the thumb travels along.
 */
.nativeHorizontalScrollbar::-webkit-scrollbar-track-piece
{
    background-color: rgba(255, 255, 255, 0.1);
}

/* The tracking piece. */
.nativeHorizontalScrollbar::-webkit-scrollbar-thumb:horizontal
{
    height: 15px;

    background-color: rgba(255, 255, 255, 0.75);

    border: none;
    -webkit-border-top-left-radius: 6px;
    -webkit-border-top-right-radius: 6px;
    -webkit-border-bottom-left-radius: 6px;
    -webkit-border-bottom-right-radius: 6px;
    -moz-border-radius-topleft: 6px;
    -moz-border-radius-topright: 6px;
    -moz-border-radius-bottomleft: 6px;
    -moz-border-radius-bottomright: 6px;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

/* ********
 * CORNER *
 * ********/
.nativeHorizontalScrollbar::-webkit-scrollbar-corner:horizontal
{
    background-color: transparent;
}

/* *********
 * RESIZER *
 * *********/
.nativeHorizontalScrollbar::-webkit-scrollbar-resizer:horizontal
{
    background-color: transparent;
} 
```

**VerticalScrollbar.css** /* *********** * 滚动条 * * ***********/

```
.nativeVerticalScrollbar::-webkit-scrollbar
{
    width: 10px;
    height: 10px;
}

/* *************
 * BUTTON AREA *
 * *************/
.nativeVerticalScrollbar::-webkit-scrollbar-button:vertical
{
    background-color: transparent;
}

/* Increment scroll up/down buttons. */
.nativeVerticalScrollbar::-webkit-scrollbar-button:start:decrement,
.nativeVerticalScrollbar::-webkit-scrollbar-button:end:increment
{
    display: block;

    width: 10px;
    height: 8px;

    background-repeat: no-repeat;
    background-size: 10px 8px;
}

/* Increment scroll up button. */
.nativeVerticalScrollbar::-webkit-scrollbar-button:start:decrement
{
    background-image: url('images/scroll-up.png');
}

/* Increment scroll down button. */
.nativeVerticalScrollbar::-webkit-scrollbar-button:end:increment
{
    background-image: url('images/scroll-down.png');
}

/* Jump up/down buttons. */
.nativeVerticalScrollbar::-webkit-scrollbar-button:vertical:start:increment,
.nativeVerticalScrollbar::-webkit-scrollbar-button:vertical:end:decrement
{
    display: none;
}

/* ******************
 * TRACKING SECTION *
 * ******************/
.nativeVerticalScrollbar::-webkit-scrollbar-track:vertical
{
    background-color: transparent;
}

/* Area between the thumb and the up button. */
.nativeVerticalScrollbar::-webkit-scrollbar-track-piece:vertical:start
{

}

/* Area between the thumb and and down button. */
.nativeVerticalScrollbar::-webkit-scrollbar-track-piece:vertical:end
{

}

/* 
 * The tracking area.
 * This is the area that the thumb travels along.
 */
.nativeVerticalScrollbar::-webkit-scrollbar-track-piece
{
    background-color: rgba(255, 255, 255, 0.1);
}

/* The tracking piece. */
.nativeVerticalScrollbar::-webkit-scrollbar-thumb:vertical
{
    height: 15px;

    background-color: rgba(255, 255, 255, 0.75);

    border: none;
    -webkit-border-top-left-radius: 6px;
    -webkit-border-top-right-radius: 6px;
    -webkit-border-bottom-left-radius: 6px;
    -webkit-border-bottom-right-radius: 6px;
    -moz-border-radius-topleft: 6px;
    -moz-border-radius-topright: 6px;
    -moz-border-radius-bottomleft: 6px;
    -moz-border-radius-bottomright: 6px;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

/* ********
 * CORNER *
 * ********/
.nativeVerticalScrollbar::-webkit-scrollbar-corner:vertical
{
    background-color: transparent;
}

/* *********
 * RESIZER *
 * *********/
.nativeVerticalScrollbar::-webkit-scrollbar-resizer:vertical
{
    background-color: transparent;
} 
```

# jquery - jQuery UI 模态不返回真假

> ID：11020103
> 
> 赞同：1
> 
> 时间：2012-06-13T17:22:03.660
> 
> 标签：jquery, jquery-ui

我希望它在 if 条件下检查它。我该如何使用它？

```
function notification_dialog_box(title,html,icon)
{
    var text = '<p><span class="'+icon+'" style="float:left; margin:0 7px 50px 0;"></span>'+ html  +'</p>';
    var $myDialog = $('<div id="dialog-message"></div>').html(text).dialog({
        modal: true, zIndex: 10000, autoOpen:true,width: 'auto', modal: true, resizable: false,title: title,
        buttons: {
            "OK":function(){$(this).dialog("close"); return true;}, 
            "Cancel":function() {$(this).dialog("close");return false;}
            }
        });
}

if(notification_dialog_box('Out of designer\'s', 'All Designer\'s are assigned in this project', 'ui-icon ui-icon-info' ))
{
code....
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:24:54.827

您在**asyc 回调中返回 true/false。**

**即**：返回真/假的代码在用户单击按钮之前不会运行，但您的代码已经完成运行。

您需要切换到回调结构才能使代码正常工作。

**即**：您需要将一个函数传递给该函数`notification_dialog_box`，当用户单击一个按钮并传递他们单击的值时会调用该函数。

像这样的东西：

```
function notification_dialog_box(title,html,icon, fn)
{
    var text = '<p><span class="'+icon+'" style="float:left; margin:0 7px 50px 0;"></span>'+ html  +'</p>';
    var $myDialog = $('<div id="dialog-message"></div>').html(text).dialog({
        modal: true, zIndex: 10000, autoOpen:true,width: 'auto', modal: true, resizable: false,title: title,
        buttons: {
            "OK":function(){$(this).dialog("close"); fn(true);}, 
            "Cancel":function() {$(this).dialog("close"); fn(false);}
            }
        });
}

notification_dialog_box('title', 'blah blah blah', 'ui-icon ui-icon-info', function(ok){
  if(ok) {
     //code
  } 
} ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:28:43.163

您不能将 jQuery 模型框用作 JavaScript，`Confirm()`即 javascript 不等待用户响应

正确的方法是使用回调函数。

```
function notification_dialog_box(title, html, icon, success, failure) {
    var text = '<p><span class="' + icon + '" style="float:left; margin:0 7px 50px 0;"></span>' + html + '</p>';
    var $myDialog = $('<div id="dialog-message"></div>').html(text).dialog({
        modal: true,
        zIndex: 10000,
        autoOpen: true,
        width: 'auto',
        modal: true,
        resizable: false,
        title: title,
        buttons: {
            "OK": function() {
                $(this).dialog("close");
                success()
            },
            "Cancel": function() {
                $(this).dialog("close");
                failure()
            }
        }
    });
}

if (notification_dialog_box('Out of designer\'s', 'All Designer\'s are assigned in this project', 'ui-icon ui-icon-info', function() {
    // success code here
}, function() {
    // error code here
}) ​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:30:41.797

你可以做类似的事情

正如@mkoryak 所说，您不能像从异步回调中那样返回。相反，你可以做类似的事情

```
function notification_dialog_box(title,html,icon,callback)
{
    var text = '<p><span class="'+icon+'" style="float:left; margin:0 7px 50px 0;"></span>'+ html  +'</p>';
    var $myDialog = $('<div id="dialog-message"></div>').html(text).dialog({
        modal: true, zIndex: 10000, autoOpen:true,width: 'auto', modal: true, resizable: false,title: title,
        buttons: {
            "OK":function(){$(this).dialog("close"); callback(true);}, 
            "Cancel":function() {$(this).dialog("close");callback(false);}
            }
        });
}

function dialog_callback(retVal){
    if(retVal)
      // user clicked on Ok
    else
      // clicked on Cancel
}

notification_dialog_box('Out of designer\'s', 
     'All Designer\'s are assigned in this project', 
     'ui-icon ui-icon-info', 
      dialog_callback // pass the callback
); 
```

# c++ - C++ Friend 方法无法从类访问私有数据

> ID：11020104
> 
> 赞同：2
> 
> 时间：2012-06-13T17:22:04.423
> 
> 标签：c++, class, friend

我正在做我的项目，即模拟学校系统。
我对来自 Klasa 类（类波兰语）的方法无法访问 Student 类的私有数据这一事实有疑问，即使我在 Student 中将此方法声明为朋友。

这是代码：

第一个学生.h：

```
#include <iostream>
#include "Klasa.h"
#include "SubjectType.h"
#include "SubjectGrades.h"
using namespace std;
    class Klasa;
    class SubjectGrades;

    class Student
    {
    private:
        char* name;
        int id;

        Klasa* myClass;
        //School* mySchool;
        int classIndex; //numer w dzienniku - zrobić prywatne z akcesorami
        static int counter;
    public:

        Student();
        Student(char*);
        Student(const Student&);
        Student& operator= (const Student&);
        ~Student();

        //bool assignToSchool(School*)
        //bool resignFromSchool();
        void assignToClass(Klasa*);
        void resignFromClass();
        double getMyAverageGrade(SubjectType type) const ;      //srednia ocen z danego przedmiotu dla danego ucznia
        double getMyAverageGrade() const;       //średnia ocen dla danego ucznia

        bool operator== (const Student&);
        bool operator!= (const Student&);
        friend ostream& operator<< (ostream&, const Student&);
        // akcesory
        int GetclassIndex() const;
        int SetclassIndex(int i);
        friend bool Klasa::assignToKlasa(Student* s);
        char* GetName() const { return name; }
    }; 
```

现在来自 Klasa 类的方法：

```
 bool Klasa::assignToKlasa(Student* s)
    {
        if(studentCount < maxStudentCount)
        {
            if(containsStudent(s))
                return false;

            if(studentCount < klasaSize) //jest miejsce dla studenta
            {
                int i = 0;
                while(studentList[i] != NULL)
                    i++;
                studentList[i] = s;

                s->classIndex=i;// = i; //tu musi byc setter
            }
            //WHATS BELOW DOESN'T MATTER FOR THIS PROBLEM, SO U DON;T NEED TO READ.

            else
            {
                cout << "Zwiekszamy rozmiar!\n";
                //musimy zwiększyć rozmiar tablicy studentList
                Student** newStudentList = new Student*[klasaSize + sizeStep];
                for(int i = 0; i < klasaSize; ++i)
                    newStudentList[i] = studentList[i];

                for(int i = klasaSize; i < klasaSize + sizeStep; ++i)
                    newStudentList[i] = NULL;

                klasaSize += sizeStep;

                delete[] studentList;
                studentList = newStudentList;

                studentList[studentCount] = s;

                s->SetclassIndex(studentCount); //tu ma byc setter

            }

            s->assignToClass(this); //mówimy studentowi - "jestem twoją klasą"
            studentCount++;
            cout << "Dodano studenta!\n";

            return true;
        }

        return false;
    } 
```

它强调`s->classIndex=i`无法访问 classIndex。

同样在 Klasa.h 我声明了这个方法，如：`bool assignToKlasa(Student* s);`

所以我不知道为什么在我将学生声明为朋友之后它不允许我访问学生的私人数据？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:33:52.547

Your definition of `class Student { ... }` shouldn't compile either. The `friend` declaration is an error, so I'm surprised that isn't highlighted too. What your IDE has figured out is that the access to a private member isn't allowed without a working `friend` declaration.

The error is that a forward declaration of `Klasa` is not enough to declare a member function of `Klasa` to be a friend of `Student`. You need the class definition of `Klasa` first.

So, it should be:

```
class Student; // forward declaration, because members of Klasa take Student*

class Klasa { 
    ... 
};

class Student { 
    ... 
}; 
```

then you can define `Klasa::assignToKlasa`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:36:46.213

对于这个等效代码

```
class A;
class B {
  int x;
public:
  B(int __x) : x(__x) {}
  friend bool A::method(B*) const;   // error: undefined member cannot be friend
//friend class A;                    // fine:  class A is declared and can be used
};

class A {
  int y;
pu8blic:
  A(int __y) : y(__y) {}
  bool method(B*b) const
  { return y == b->x; }
}; 
```

我收到错误消息（使用 gcc 4.3.2）：

test3.cc:7: 错误：不完整类型'struct A'的无效使用</p>

test3.cc:1：错误：“结构 A”的前向声明</p>

test3.cc：在成员函数'bool A::method(B*) const'中：

test3.cc:3：错误：'int B::x' 是私有的

test3.cc:15：错误：在此上下文中

第一个错误是您*唯一*需要担心的错误（其他错误是第一个错误的解释或后果）。那么如何解决这个问题呢？解决问题的一种简单方法是通过替换声明整体`class A`成为朋友`B`

```
 friend bool A::method(B*) const; 
```

和

```
 friend class A; 
```

这是定义的。

# python - 为什么我不能在我的 Bottlepy 应用程序中共享 pymongo 连接实例

> ID：11020109
> 
> 赞同：3
> 
> 时间：2012-06-13T17:22:14.110
> 
> 标签：python, pymongo, bottle

我在应用程序启动之前创建一个连接实例

```
# app.py
mongodb_conn = pymongo.Connection(host=host, port=int(port), safe=True)

print(mongodb_conn) # Connection('127.0.0.1', 27017)

...

bottle.run(...) 
```

但是，然后在我的请求中，当我尝试从其他模块访问此连接时，它错误地说`mongodb_conn`是`None`

```
# user.py
from app import mongodb_conn
...

db = mongodb_conn['somedb'] # TypeError: 'NoneType' object is not subscriptable 
```

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:44:03.203

我知道您在回答中已经提到您由于模块顺序问题而解决了它，但我想包括一个扩展的答案。

在没有看到更多代码的情况下，我假设您正在设置一些循环导入，其中连接在您的 app.py 中定义，它可能也导入您的 user.py，但随后您的 user.py 导入 app.py 用于连接对象。`mongodb_conn`在那一点上很可能是不相关的。

我建议您创建一个名为 db.py 的第三个模块。在那里创建一个全局变量连接，或者，创建一个总是返回相同连接的简单单例类，或者，一个像`getConnection()`这样的简单函数总是返回全局连接。这样，您将不会有循环导入，并且任何其他模块都可以导入`db`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:39:19.673

好的，我已经能够解决问题了。这与模块加载顺序的一些差异有关。

***但是，缓存一个连接实例然后在应用程序的整个生命周期中使用它是完全可以的。即使对于线程应用程序也是如此。***

# google-apps-script - Apps Script仪表板配额限制中触发聚合执行时间的含义？

> ID：11020111
> 
> 赞同：1
> 
> 时间：2012-06-13T17:22:29.393
> 
> 标签：google-apps-script, triggers, quota

[我的代码将按照本文](https://stackoverflow.com/questions/7854573/exceeded-maximum-execution-time-in-google-apps-script)中的建议批量处理数据，我想澄清一下[Apps Script Dashboard上“Trigger Aggregate Execution Time”的含义](https://docs.google.com/macros/dashboard)

“Trigger Aggregate Execution Time”是指*触发事件和用户运行函数的总运行时间*（通过用户运行函数，即我在开发环境中选择 Run->myFunction）或*显式设置的触发事件的总运行时间，如此*[处](https://developers.google.com/apps-script/guide_events)所述？

在开发环境中选择 Run->myFunction 是否会影响“触发聚合执行时间”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:32:08.867

Trigger Aggregate Execution Time 是从触发器调用的函数的总执行时间。因此，如果您从脚本编辑器中运行一个函数，它将不会影响该限制，但如果它是基于基于时间的触发器、onOpen 触发器等运行的，那么它将有助于该限制。

# php - Magento 集合：字段出现计数

> ID：11020113
> 
> 赞同：1
> 
> 时间：2012-06-13T17:22:34.290
> 
> 标签：php, mysql, magento

假设我有以下实体，称为库存：

![在此处输入图像描述](../Images/27c7ed67ac1e1f47ccf1d949e47acbd9.png)

我想知道是否有数据库、sql 或 magento 操作或任何其他方法可以生成：

![在此处输入图像描述](../Images/079b23bbf412d05a77fc55ffbb7392f6.png)

我通过遍历整个集合并插入到临时表中解决了这个问题：即

```
$inventorySet = Mage::getModel('custom/module')->getCollection(*);
foreach($inventorySet as $item)
{
    $this->insertItem($item->getSku());
} 
```

}

```
public function insertItem($sku)
{
    //insert sku if it does not exist in the temp set
    // if it does exists add one to the QTY field
} 
```

然后我可以检索我想要的东西。我看不出有什么问题，但我的实体比示例大得多，而且数据集包含 2000 到 15 000 行之间的任何内容。没有更有效的方法吗？

编辑：换句话说，我想在集合中搜索“sku”字段的出现，并返回一个唯一 sku 的数组以及在初始集合中找到它的次数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:47:19.577

要从集合中获取一组特定的列值，您可以使用该`getColumnValues()`方法。

例如，使用 Magento 产品集合，这将返回一个数组，其中包含每个产品的 sku 属性值：

```
$collection = Mage::getResourceModel('catalog/product_collection')
    ->addAttributeToSelect('sku');

$skus = $collection->getColumnValues('sku'); 
```

最后，回答问题的第二部分，计算每个唯一值的出现次数：

`array_count_values($skus);`

这将为您提供一个很好的 sku => 出现次数的关联数组。

# javadoc - Gradle with javadoc doclet：错误 - 无效标志：运行我的 doclet 任务时的 -doctitle

> ID：11020117
> 
> 赞同：1
> 
> 时间：2012-06-13T17:22:46.293
> 
> 标签：javadoc, gradle, doclet

我正在运行我的下一个 gradle-javadoc-doclet 任务：

```
apply plugin: com.myproject.build.gradle.web.WebPlugin
apply plugin: 'java'
apply from: 'dependencies.gradle'

group = 'com.myproject'

sourceCompatibility = 1.6
targetCompatibility = 1.6

jar.enabled = true

configurations {
    client
}

task myJavadocs(type: Javadoc) {

    source = sourceSets.main.allJava
    classpath = configurations.compile
    destinationDir = file("./doc/")
  }

task list(dependsOn: configurations.compile) << {
    println "classpath = ${configurations.compile.collect {File file -> file.name}}"
}

task myDoclet(type: Javadoc, dependsOn: myJavadocs) {
    source = sourceSets.main.allJava
    options.doclet = 'Doclet2'
    classpath = configurations.compile
    //options.docletpath = configurations.compile.asType(List)
    List<File> pathList = new ArrayList<File>();
    pathList.add(file('C:\\myproject\\build\\classes\\main\\'))
    options.docletpath = pathList

} 
```

（myJavadocs 只是一个生成基本 javadoc 的任务）我在控制台中运行它，如下所示：

```
C:\myproject>gradle myDoclet 
```

当我这样做时，我收到下一个错误：

```
javadoc: error - invalid flag: -doctitle 
```

看起来“doctitle”标志是javadoc规范（[Javadoc 1.3 Options](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/javadoc.html#options)）中的选项之一，但它不在早期的javadoc版本中（它是一个“title”标志）。我正在使用我的 JDK（1.6）中的 tools.jar（hte javadoc 所在的位置）。

有谁知道我做错了什么？

非常感谢您的宝贵时间！

**跟进 -**

看起来“doctitle”标签在标准 Doclet 上（我正在运行我自己的 doclet），并且它是由 gradle 添加的（我的 doclet 无法识别它）。有谁知道我怎样才能摆脱该标签，或者是否有任何方法可以将这些标签“包含”到我的 doclet 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:23:50.413

抱歉，javadoc doclet 错误，而不是 gradle 错误。如果有兴趣，请点击下一个链接：

[Javadoc 无法识别 doctitle 选项/标志](https://stackoverflow.com/questions/11034326/javadoc-does-not-recognize-doctitle-option-flag/11048833#11048833)

# java - BufferedReader 等待用户提示读取下一行

> ID：11020118
> 
> 赞同：0
> 
> 时间：2012-06-13T17:22:49.027
> 
> 标签：java, input, bufferedreader

我目前正在尝试从 sphere 在线法官（[http://www.spoj.pl/problems/PRIME1/](http://www.spoj.pl/problems/PRIME1/)）解决 Prime Generator 问题。

核心问题已经解决了，我面临的问题是在读取输入时，前两行读得很好，读到第三行我必须按回车，这个小东西让我超时解决方案的评估。我想知道是否有某种方式，因此它可以读取整个输入，而无需我按 Enter。

这是输入和输出

输入：

```
2
1 10
3 5 
```

输出：

```
2
3
5
7

3
5 
```

这是我的代码

```
class Solucion_Prime_Generator {

    public static void main(String[] args) throws NumberFormatException,
            IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        int t = Integer.parseInt(reader.readLine());
        for(int i=0;i<t;i++) 
        {
            String numbers = reader.readLine();             
            System.out.println(numbers);
            String[] numberArray = numbers.split(" ");
            for (int j = Integer.parseInt(numberArray[0]); j <= Integer.parseInt(numberArray[1]); j++)
            {
                if(isPrime(j)){

                    System.out.println(j);
                }
            }
            System.out.println(" ");
        }
    }

    public static boolean isPrime(int n)
    {

        if( n==1)
        {
            System.out.println();
            return false;
        }
        if(n==2)
        {
            return true;
        }
        if(n%2==0){
            return false;
        }
            for (int i = 3; i*i <= n; i+=2) 
            {

            if(n%i==0)
            {               
                return false;
            }

        }

        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:35:00.007

It's not a line until you press enter. How does it know you are done typing the line?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:35:31.420

It's a bit hard to tell exactly what you're trying to accomplish but the readLine() method must be terminated by a carriage return or linefeed or both.

See this:

[http://docs.oracle.com/javase/1.3/docs/api/java/io/BufferedReader.html#readLine](http://docs.oracle.com/javase/1.3/docs/api/java/io/BufferedReader.html#readLine)()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:40:29.757

我相信问题出现在文件的最后一行，不是吗？在这种情况下，最后一行是第三行。可能是文件中的最后一行，没有回车/换行。

正如 tjg84 指出的那样， readLine() 期望行以回车或换行或两者结尾。因此，您有两种可能的解决方案： - 在最后一行的末尾插入回车符/换行符。- 使用另一种方法读取该行。也许您可以使用 Scanner 类[方法 nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)；

# php - If isset 用于多个提交按钮

> ID：11020130
> 
> 赞同：0
> 
> 时间：2012-06-13T17:23:31.863
> 
> 标签：php, form-submit

我想知道是否有人可以帮助我。

我正在尝试运行下面的代码，我正在使用带有多个`submit buttons`.

```
<?php
if (isset($_POST['type']){
    if ($_POST['type'] == 'view'){
     $url = 'updatelocation.php';

    }   elseif ($_POST['type'] == 'finds'){
        $url = 'addfinds.php';

    }   elseif ($_POST['type'] == 'image'){

    header("Location: " . $url);
}
?> 
```

我遇到的问题是，当我运行它时，我收到以下错误：

`Parse error: syntax error, unexpected '{' in /homepages/2/d333603417/htdocs/locationsaction.php on line 2`

我一直在阅读一些教程，例如[this](http://www.html-form-guide.com/php-form/php-form-post.html)，我的代码似乎与示例匹配，所以我不确定错误在哪里。

有关其他信息，我用来触发 php 脚本的按钮和表单如下所示：

```
<form name="locations" id="locations" method="post" action="locationsaction.php">   

<td><div align="center"><input name="viewdetails" type="submit" value="view"/></div>/td>
<td><div align="center"><input name="addfinds" type="submit" value="finds"/></div></td>
<td><div align="center"><input name="addimages" type="submit" value="images"/></div></td> 
```

我只是想知道是否有人可以看看这个并让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:25:40.943

您缺少右括号：

```
if (isset($_POST['type']) { 
```

应该：

```
if (isset($_POST['type'])) { 
```

您还缺少最后一行的右括号。你真的应该尝试正确地格式化和缩进你的代码。这将使发现这样的错误变得更加容易。考虑这个例子：

```
<?php
if (isset($_POST['type'])) {
    if ($_POST['type'] == 'view') {
        $url = 'updatelocation.php';
    } elseif ($_POST['type'] == 'finds') {
        $url = 'addfinds.php';
    } elseif ($_POST['type'] == 'image'){
        $url = 'image.php';
    }

    header("Location: " . $url);
} 
```

另一种查找方法是使用地图：

```
<?php
if (isset($_POST['type'])) {
    $urls = array(
        'view' => 'updatelocation.php',
        'finds' => 'addfinds.php',
        'image' => 'image.php'
    );
    $url = $urls[$_POST['type']];
    header("Location: " . $url);
} 
```

这很干净——对吧？为此添加一个新案例只需将其添加到数组中即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:25:46.810

你错过了一个`)`之后`isset($_POST['type'])`- 你没有结束`if`声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T17:31:55.043

您还缺少一个右括号：

```
 if (isset($_POST['type'])){ 
   if ($_POST['type'] == 'view'){ 
     $url = 'updatelocation.php'; 
   }elseif ($_POST['type'] == 'finds'){ 
     $url = 'addfinds.php'; 
   }elseif ($_POST['type'] == 'image'){ 
     $url='image.php';
   }
   header("Location: " . $url); 
 } 
```

# php - 网站未完全加密错误

> ID：11020134
> 
> 赞同：0
> 
> 时间：2012-06-13T17:23:43.347
> 
> 标签：php, html, css, ssl, ssl-certificate

我正在使用[http://usborrow.com](http://usborrow.com)并安装了 GeoTrust Business ID SSL 证书。该网站说它没有完全加密，并且印章不会出现在页面底部。我似乎在站点中找不到任何非 https 引用。任何支持表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:24:54.240

您的 Google 字体和 jQuery 调用不是通过 SSL 进行的：

```
<link href='http://fonts.googleapis.com/css?family=Francois+One' rel='stylesheet' type='text/css'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="http://use.typekit.com/aoc1gun.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:25:31.373

您正在引用一些外部 3rd 方库，例如带有 http 的 Google 托管 jquery 库。例如。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T03:55:26.630

正如其他人所说，您的一些外部资源被硬编码为使用 http。

最好省略 url 的 http / https 部分，这会使浏览器通过与当前页面相同的协议来请求它。（除非您的页面是 https，否则无需通过 https 请求 css 文件！）

例子：

```
 <link href='//fonts.googleapis.com/css?family=Francois+One' rel='stylesheet' type='text/css'> 
```

显然，某些服务不提供 https 版本，在这种情况下，如果您希望印章出现，则需要自己托管副本。

# css - 为什么@media (max-width: 767px) 在 twitter bootstrap 中重复

> ID：11020137
> 
> 赞同：0
> 
> 时间：2012-06-13T17:24:01.223
> 
> 标签：css, twitter-bootstrap

根据 bootstrap-responsive.css 文件，媒体查询`@media (max-width: 767px)`是重复的，这意味着它在文件中出现了两次。为什么会重复？

您可以在此处查看文件[http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:19:53.280

嗯，我当然不能声称理解开发人员在编写 CSS 时的意图，但这就是我的想法……

我相信媒体查询的重复只是为了提供更大的 CSS 文件模块化。请注意，两者`@media (max-width: 767px)`和`@media (min-width: 768px) and (max-width: 979px)`实际上在文件中出现了两次，因此这不太可能是异常情况。

这些媒体查询的第一个声明似乎处理添加到元素的类，以在某些浏览器宽度下隐藏/显示它们，因此在不同的设备上选择性地生效（指定`display`属性）。第二个声明似乎处理了 Twitter Bootstrap 设计原则基础的各种类，指定了 12 列网格系统中使用的各种类的样式（宽度、边距、最小高度等）。

第一组的类可以在开发人员的心血来潮时应用，以在各种设备上查看页面时隐藏/显示某些元素。第二组的类比第一组应用得更严格一些，因为它们是框架网格系统的一个更明确的特征（例如，您可以从第一组中给出两者的元素类`hidden-phone`并查看两者的效果`visible-tablet`, 但给元素类`span12`和`span6`只会导致最后一个类生效）。

这是因为第一组类在应用上与第二组类有很大不同，所以媒体查​​询声明被声明了两次，每组一个。

在*Scalable and Modular Architecture for CSS* (2012) 中，Jonathan Snook 评论了模块化的概念，他说，

> 是的，这确实意味着媒体查询声明可能（并且可能会）多次声明，但它也允许将有关模块的所有信息保存在一起。

（如果我在提到样式/CSS/HTML 时使用了错误的术语，我深表歉意！我还在学习......）

# attributes - Jade：没有值的元素属性

> ID：11020142
> 
> 赞同：12
> 
> 时间：2012-06-13T17:24:18.527
> 
> 标签：attributes, pug

我是使用 Jade 的新手——到目前为止它很棒。

但我需要发生的一件事是具有“itemscope”属性的元素：

```
<header itemscope itemtype="http://schema.org/WPHeader"> 
```

我的翡翠符号是：

```
header(itemscope, itemtype='http://schema.org/WPHeader') 
```

但结果是：

```
<header itemscope="itemscope" itemtype="http://schema.org/WPHeader"> 
```

我怎样才能确保我得到正确的结果——`itemscope`而不是`itemscope="itemscope"`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T18:18:43.273

有时它不能很好地工作——就像`contentEditable`Jade 尝试检测 html5 文档类型，然后`<header itemscope itemtype="http://schema.org/WPHeader"></header>`如果找到它就会这样做。问题是，如果您有要在页面中插入的模板，它无法判断它是 html5。

您可以做的是通过传递`{doctype: '5'}`给选项来强制 html5 编译 - 为 require-jade 执行此操作：[https ://github.com/ibash/require-jade/commit/754cba2dce7574b400f75a05172ec97465a8a5eb](https://github.com/ibash/require-jade/commit/754cba2dce7574b400f75a05172ec97465a8a5eb)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-01T23:26:11.570

使用角度 ng-include 指令时我遇到了同样的问题。它得到 ng-include="ng-include" 然后包含不起作用。

它对我有用的是使用空字符串作为值，即 ng-include=""。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-14T11:31:04.157

这是玉开发人员的回答：你应该使用

```
 doctype html 
```

在模板中。

[https://github.com/pugjs/jade/issues/370](https://github.com/pugjs/jade/issues/370)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-14T18:34:19.810

我刚刚在 Express.js/Jade 项目中尝试过，得到的结果是：

```
<header itemscope itemtype="http://schema.org/WPHeader"></header> 
```

我也在 bash 中尝试过，然后我得到了和你一样的结果。

我会接受以下建议或在 Github 上创建问题。

> itemscope="itemscope" 和 itemscope 一样有效。看起来这是 Jade 的默认行为。我就随它去吧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-18T08:11:34.553

我遇到了同样的问题，在我的案例中，最简单的解决方案是在`doctype 5`我的玉文件顶部添加。这显然允许 Jade 使用没有值的属性。ibash 用他的回答让我走上了正确的轨道，所以谢谢你

# javascript - 使用 Jquery 更改背景图像会导致闪烁的效果

> ID：11020145
> 
> 赞同：5
> 
> 时间：2012-06-13T17:24:23.353
> 
> 标签：javascript, jquery, css

以下是我用来创建滑块的脚本部分，方法是在一段时间内更改我拥有的每个图像对象的背景图像。

```
 #Sliderimg - height is 500px,

   $("#Sliderimg").css({
        "background-image": "url(../Images/" +SliderImageObj.image + ")",
        "display": "block",
        "z-index": "50px"
    }); 
```

这可能出了什么问题，因为每次更改图像时都会出现闪烁效果，我的问题不在于即将加载的新图像，旧图像的闪烁（闪烁到屏幕底部）即将被替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:29:56.183

您会看到闪烁，因为每次更改背景图像时，您的浏览器都必须先下载它才能显示背景。如果图像不是太大（超过 5kb），您可以尝试在浏览器中缓存它们，方法是将它们应用于它们不会显示的元素。

此外，50px 不是有效的 z-index，该属性只需要整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:29:34.770

也许从您的 z-index 属性中删除“px”？它采用十进制值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:32:04.923

浏览器被迫重绘整个背景。

这是通过将背景设置为白色然后重绘新背景来完成的。

使用 jquery.animate() 来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T23:29:53.960

前几天我也有同样的问题。奇怪的是，它在 FF 中似乎还可以，但在 IE、Chrome 和有时 Safari 中会闪烁。解决方案是使用 css sprite sheet。您创建了两个背景彼此相邻的图像。您只显示背景表的一部分。您可以通过调整背景上的边距来切换它。您可以使用 addClass 和 removeClass 处理边距调整。下面是代码，请参见此处获取小提琴：http: [//jsfiddle.net/fMhMY/](http://jsfiddle.net/fMhMY/)

**CSS**

```
.navButton span{
width:32px;
height:32px;
display:block;
}

a.leftButton span, a#leftButton span{
background-image:url(Prev.png);
background-position:-64px 0px;
}

/*nav button sprites */

/*sprite order is pushed, hover, natural */

a.leftButton.navOver span, a.rightButton.navOver span{
background-position:-32px 0px;
}

a.leftButton.navPressed span, a.rightButton.navPressed span{
background-position:0px 0px;
} 
```

**HTML**

```
<div style='display:inline-block'>
    <a href="javascript:void(0);" class="leftButton navButton" id='lefty'>
        <span></span>
    </a>
</div> 
```

**jQuery**

```
$('.leftButton').mousedown(function() {

        $('.leftButton').addClass('navPressed');
        console.log('mousedown');

});
$('.leftButton').mouseup(function() {
        $('.leftButton').removeClass('navPressed');
        console.log('mouseup');
});

$('.leftButton').hover(function() {
        $('.leftButton').addClass('navOver');
        console.log('hover');
});

$('.leftButton').mouseout(function() {
        $('.leftButton').removeClass('navPressed').removeClass('navOver');
        console.log('mouseout');
}); 
```

# r - 使用 R 在循环中合并表

> ID：11020152
> 
> 赞同：2
> 
> 时间：2012-06-13T17:24:55.653
> 
> 标签：r, loops

我有一个关于我写的循环的简单问题。我想访问不同目录中的不同文件并从这些文件中提取数据并合并到一个表中。我的问题是我的循环没有添加不同文件的结果，而只是使用当前在循环中的物种进行更新。这是我的代码：

```
for(i in 1:length(splist.par))
{ 

  results<-read.csv(paste(getwd(),"/ResultsR10arcabiotic/",splist.par[i],"/","maxentResults.csv",sep=""),h=T)

  species <- splist.par[i]
  AUC <- results$Test.AUC[1:10]
  AUC_SD <- results$AUC.Standard.Deviation[1:10]
  Variable <- "a"
  Resolution <- "10arc"
  table <-cbind(species,AUC,AUC_SD,Variable,Resolution)
} 
```

这可能是一个简单的问题，但我不是一个经验丰富的程序员。感谢加布里埃尔的关注

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:13:40.413

我会使用`lapply`从每个文件中获取所需的数据并添加物种信息，然后与`rbind`. 像这样的东西（未经测试）：

```
do.call(rbind, lapply(splist.par, function(x) {
  d <- read.csv(file.path("ResultsR10arcabiotic", x, "maxentResults.csv"))
  d <- d[1:10, c("Test.AIC", "AIC.Standard.Deviation")] 
  names(d) <- c("AUC", "AUC_SD")
  cbind(Species=x, d, stringsAsFactors=FALSE)
})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:11:25.557

@Aaron 的`lapply`回答很好，很干净。但是要调试您的代码：您将一堆数据放入但每次都`table`覆盖。`table`你需要做

```
table <-cbind(table, species,AUC,AUC_SD,Variable,Resolution) 
```

顺便说一句，由于`table`是 R 中的一个函数，我会避免将它用作变量名。想象：

```
table(table) 
```

:-)

# iphone - ios < 5 中的 iCloud 通知崩溃

> ID：11020157
> 
> 赞同：0
> 
> 时间：2012-06-13T17:25:10.770
> 
> 标签：iphone, ios5, ios4, icloud, nsnotificationcenter

我在与 iCloud 相关的 iPod Touch ios v4.3.1 上崩溃了。

崩溃日志：

```
日期/时间：2012-06-12 11:42:43.557 -0700
操作系统版本：iPhone OS 4.3.1 (8G4)
报告版本：104

异常类型：EXC_BREAKPOINT (SIGTRAP)
异常代码：0x00000001、0xe7ffdefe
崩溃的线程：0

Dyld 错误信息：
  未找到符号：_NSUbiquitousKeyValueStoreDidChangeExternallyNotification
  引用自：/var/mobile/Applications/997BA11D-FD1E-4755-860C-2A708D5E39EF/AppName.app/AppName
  预期在：/System/Library/Frameworks/Foundation.framework/Foundation
 在 /var/mobile/Applications/997BA11D-FD1E-4755-860C-2A708D5E39EF/AppName.app/AppName
  迪尔德版本：191.3

```

但是代码不应该注册任何 iCloud 服务。我有以下代码，并且我已经通过它确保在这个设备上，它永远不会注册观察 iCloud 通知：

```
if(NSClassFromString(@"NSUbiquitousKeyValueStore")) { // 是 iOS 5 吗？
    if([NSUbiquitousKeyValueStore defaultStore]) { // 是否启用了 iCloud
        [自我添加观察者];
    }
}

```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:17:40.127

基础框架需要是“可选的”/弱链接的

# amazon-ec2 - 无法连接到 ec2 windows 实例

> ID：11020158
> 
> 赞同：3
> 
> 时间：2012-06-13T17:25:12.367
> 
> 标签：amazon-ec2

我在 amazon ec2 windows micro 实例上安装了 mysql 5.5 和 tomcat 6。我无法从本地浏览器访问部署在 tomcat 中的页面。它说 ec2-50-19-6-147.compute-1.amazonaws.com 的服务器响应时间过长。当我使用命令提示符 ping 时，它说请求超时。有人能帮帮我吗？？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:26:31.037

您需要检查您的安全设置并确保端口对入站请求开放。

# python - 使用 python、numpy 和 matplotlib 绘制蒙面图

> ID：11020160
> 
> 赞同：8
> 
> 时间：2012-06-13T17:25:28.120
> 
> 标签：python, numpy, matplotlib

我正在使用 matplotlib 1.1.0 绘制曲面。

绘图 Z 轴像这样被屏蔽：

```
Zm = ma.masked_where((abs(z_grid) < 1.09) & (abs(z_grid) > 0.91), (z_surface))
surf = ax.plot_surface(X, Y,Zm, rstride=2, cstride=2, cmap=colors,linewidth=0, antialiased=False) 
```

但我没有看到在情节上应用了面具。我将掩码本身绘制为子图

```
surf = ax.plot_surface(X, Y,ma.getmask(Zm), rstride=2, cstride=2, cmap=colors,linewidth=0, antialiased=False) 
```

哪个有效，所以我知道我的掩码确实包含 True 值。

完整代码：

```
from pylab import *
import matplotlib.pyplot as plt
from matplotlib.widgets import Button
import numpy
from mpl_toolkits.mplot3d.axes3d import Axes3D
from  matplotlib import patches
from matplotlib.figure import Figure
from matplotlib import rcParams

fig = plt.figure(figsize=plt.figaspect(0.5))
ax = fig.add_subplot(1, 2, 1,projection='3d')

pole_positions_orig = [-0.6+0.73j];
zero_positions_orig = [0.29-0.41j];

surface_limit = 1.7;
min_val = -surface_limit;
max_val = surface_limit;

surface_resolution = 0.0333;

X = numpy.arange(min_val,max_val,surface_resolution)
Y = numpy.arange(min_val,max_val,surface_resolution)
X, Y = numpy.meshgrid(X, Y)

z_grid = X + Y*1j;
z_surface = z_grid*0;

pole_positions = numpy.round(pole_positions_orig,1) + surface_resolution/2+(surface_resolution/2)*1j;
zero_positions = numpy.round(zero_positions_orig,1) + surface_resolution/2 +(surface_resolution/2)*1j;

for k in range(0, len(zero_positions)):
    z_surface = z_surface + 20*log10((z_grid - zero_positions[k].real - zero_positions[k].imag*1j));
    z_surface = z_surface + 20*log10((z_grid - zero_positions[k].real + zero_positions[k].imag*1j));

for k in range(0, len(pole_positions)):
    z_surface = z_surface - 20*log10((z_grid - pole_positions[k].real - pole_positions[k].imag*1j));
    z_surface = z_surface - 20*log10((z_grid - pole_positions[k].real + pole_positions[k].imag*1j));    

colors = cm.jet;
colors.set_bad('k');

Zm = ma.masked_where((abs(z_grid) < 1.09) & (abs(z_grid) > 0.91), (z_surface))

z_surface = Zm;

surf = ax.plot_surface(X, Y,z_surface, rstride=2, cstride=2, cmap=colors,linewidth=0, antialiased=False)

ticks = [-1, 1]; 
z_ticks = [-30,-20,-10,0,10,20,30]; 
ax.set_xticks(ticks);
ax.set_yticks(ticks);   
ax.set_zticks(z_ticks);

ax.set_xlabel('Re')
ax.set_ylabel('Im')
ax.set_zlabel('Mag(db)',ha='left')
plt.setp(ax.get_zticklabels(), fontsize=7)
plt.setp(ax.get_xticklabels(), fontsize=7)  
plt.setp(ax.get_yticklabels(), fontsize=7)

ax = fig.add_subplot(1, 2, 2,projection='3d')
surf = ax.plot_surface(X, Y,ma.getmask(z_surface), rstride=2, cstride=2, cmap=colors,linewidth=0, antialiased=False)

ax.grid(b=None);
show(); 
```

这就是我所拥有的：

![蟒蛇情节](../Images/1919922e036c523fc3af3702f924bba0.png)

这就是我想要的（来自matlab）：

![matlab绘图](../Images/5f866b1f46cb7729a16523eee887a516.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T18:06:52.973

Fraxel 提到 surface_plot 不支持遮罩。为了解决这个问题，这就是我所做的：

我基本上通过将每个屏蔽值设置为 numpy.nan 来手动屏蔽 z 轴数据，如下所示：

```
Zm = ma.masked_where((abs(z_grid) < 1.02) & (abs(z_grid) > 0.98), (z_surface))
z_surface[where(ma.getmask(Zm)==True)] = numpy.nan 
```

![Cmap 坏了](../Images/a3e69f82b6d11d95158a6d615cc77a72.png)

但是，它弄乱了我的颜色图缩放。为了解决这个问题，我这样做了：

```
cmap = cm.jet
lev = numpy.arange(-30,30,1);
norml = colors.BoundaryNorm(lev, 256)

surf = ax.plot_surface(X, Y, z_surface,...,norm = norml) 
```

![固定的](../Images/7fe31159b5d7321e599d8fa0c422767b.png)

不是 100% 我想要的，但仍然是一个很好的折衷方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-22T10:19:22.380

可以，但是需要自己手动给表面上色；

cmap 函数需要一个介于 0 和 1 之间的数字，因此我们只需要在调用 cmap 函数之前对这些值进行标准化。

```
z_surface = numpy.real(z_surface)
min_z, max_z = z_surface.min(), z_surface.max()
colours = numpy.zeros_like(z_surface, dtype=object)

for i in range(len(z_surface)):
  for j in range(len(z_surface[0])):
    if 0.91 < numpy.sqrt(X[i,j]**2 + Y[i,j]**2) < 1.09:
      colours[i,j] = "red"  
    else:
      colours[i,j] = plt.get_cmap("jet")((z_surface[i,j]-min_z) / (max_z - min_z))

surf = ax.plot_surface(X, Y, z_surface, rstride=2, cstride=2, facecolors=colours, linewidth=0, antialiased=False) 
```

![在此处输入图像描述](../Images/f98c7609d6629d1005c6add8c26b1b2e.png)

我还应该指出，matplotlib 正在将您的 z 数组转换为真实的 - 尽管我不知道您是否有意利用这一点。

# php - MySQL记录被删除，我不知道为什么

> ID：11020161
> 
> 赞同：3
> 
> 时间：2012-06-13T17:25:30.630
> 
> 标签：php, mysql, records

我有一个严重的问题，即从我的 MySQL 数据库中的特定表中自动删除记录。

在我想通了之后，我开始检查 MySQL 二进制日志以了解发生了什么。

似乎没有标准的出现DELETE命令，下面转录的LOG示例：

```
# at 454
#120605 15:37:48 server id 1 end_log_pos 570 Query thread_id=59 exec_time=0 error_code=0
SET TIMESTAMP=1338921468/*!*/;
DELETE FROM intranet_cadeira2 WHERE idCadeira='59'
/*!*/;
# at 570
#120605 15:40:15 server id 1 end_log_pos 686 Query thread_id=66 exec_time=0 error_code=0
SET TIMESTAMP=1338921615/*!*/;
DELETE FROM intranet_cadeira2 WHERE idCadeira='29'
/*!*/; 
```

数据插入正确，在表中插入数据的过程如下：

```
BEGIN
INSERT INTO intranet_cadeira2 (idIntranet,titulo)
VALUES (pidIntranet,ptitulo);
COMMIT;
END 
```

但过了一会儿，记录被一一删除。我正在为此绞尽脑汁，如果有人可以提供帮助，我将不胜感激！我很确定这不是安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:31:59.417

我认为不可能从您的代码中看到原因。但是，我相信有一个超时和删除。也许一旦文件过期，它们就会从记录中删除。

另外，它是否在本地服务器中？

# c# - 禁用上下文菜单 webbrowser 控件

> ID：11020162
> 
> 赞同：4
> 
> 时间：2012-06-13T17:25:30.960
> 
> 标签：c#, wpf

我正在使用 WPF WebBrowser 控件来显示 PDF。我想禁用上下文菜单。

我已经尝试过以下 -

1.  [禁用 Internet Explorer 控件中的上下文菜单](https://stackoverflow.com/questions/656350/disable-context-menu-in-internet-explorer-control)-

    在构造函数中，添加了以下内容 -

    ```
    webBrowser.LoadCompleted +=new LoadCompletedEventHandler(webBrowser_LoadCompleted);

    // Event Handler
    public void webBrowser_LoadCompleted(object sender, NavigationEventArgs e )
    {
        webBrowser.ContextMenu = null;
        var t = webBrowser.Document as System.Windows.Forms.HtmlDocument;
        // t is always coming as null, even though I can clearly see the pdf in the web browser control.
        if(t != null)
        {
            t.ContextMenuShowing += new System.Windows.Forms.HtmlElementEventHandler(t_ContextMenuShowing);
        }
    } 
    ```

2.  还检查了[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/7c283faf-16c8-4b4e-a362-f292e3032abb/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/7c283faf-16c8-4b4e-a362-f292e3032abb/)。

    使用设置注册表的方法 - HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Internet Explorer\Restrictions\NoBrowserContextMenu 为 DWORD 1。

    当我设置注册表时，PDF 无法正确显示。

    另外，由于我使用 PDF 显示，我无法在正文中设置 -

    ```
    oncontextmenu="return false;" 
    ```

3.  无法设置`IsWebBrowserContextMenuEnabled`，因为我正在使用 WPF Web 浏览器控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T14:41:51.417

您可以将 Windows 窗体 WebBrowser 包装为可绑定并以简单的方式禁用上下文菜单（以及对其他属性的访问）：

```
public class WindowsFormsWebBrowser : WindowsFormsHost
{
    public static readonly DependencyProperty HtmlProperty =
        DependencyProperty.Register(
            "Html",
            typeof(string),
            typeof(WindowsFormsWebBrowser),
            new PropertyMetadata(string.Empty, OnHtmlChanged, null));

    public static readonly DependencyProperty IsContentMenuEnabledProperty =
        DependencyProperty.Register(
        "IsContentMenuEnabled",
        typeof(bool),
        typeof(WindowsFormsWebBrowser),
        new PropertyMetadata(true, OnIsContextMenuEnabledChanged));

    private readonly System.Windows.Forms.WebBrowser webBrowser = new System.Windows.Forms.WebBrowser();

    public WindowsFormsWebBrowser()
    {
        Child = webBrowser;
    }

    public string Html
    {
        get { return GetValue(HtmlProperty) as string; }
        set { SetValue(HtmlProperty, value); }
    }

    public bool IsContentMenuEnabled
    {
        get { return (bool)GetValue(IsContentMenuEnabledProperty); }
        set { SetValue(IsContentMenuEnabledProperty, value); }
    }

    private static void OnHtmlChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var browser = d as WindowsFormsWebBrowser;

        if (browser == null)
        {
            return;
        }

        browser.webBrowser.DocumentText = (string)e.NewValue;
    }

    private static void OnIsContextMenuEnabledChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var browser = d as WindowsFormsWebBrowser;

        if (browser == null)
        {
            return;
        }

        browser.webBrowser.IsWebBrowserContextMenuEnabled = (bool)e.NewValue;
    }
} 
```

[这里](http://www.wpf-tutorial.com/misc-controls/the-windowsformshost-control)是在 WPF 项目中引用 Windows 窗体控件的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:56:01.387

这可能是因为 PDF 可视化工具想要显示它自己的上下文菜单。

您看到的是哪个上下文菜单？IE 之一还是 PDF 可视化工具之一？

我也会尝试使用[System.Windows.Forms.WebBrowser](http://msdn.microsoft.com/en-us/library/aa752085%28v=vs.85%29.aspx)（您可以在 WPF 中使用它）。我在 WPF 应用程序中使用它是因为它具有比 WPF 更多的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T16:28:48.447

这是一个解决方案：

```
private void WebBrowser_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
    ((WebBrowser)sender).InvokeScript("eval",
        "$(document).contextmenu(function() { return false; });");
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-09-26T12:37:27.713

只需使用

```
// Disable the Context menu inside the web browser
webBrowser1.IsWebBrowserContextMenuEnabled = false; 
```

我在 Windows 应用程序中试过这个

# objective-c - 如何在Objective c中使用指针

> ID：11020164
> 
> 赞同：4
> 
> 时间：2012-06-13T17:25:34.313
> 
> 标签：objective-c, ios, pointers

我见过一些 iOS 开发人员使用这样的代码：

```
- (void)setupWebView:(UIWebView**)aWebView {
 UIWebView *webview = [[UIWebView alloc] init];
.....

 if (*aWebView) {
        [*aWebView release];
    }

    *aWebView = webview;
} 
```

你知道这是什么意思以及我们为什么使用它吗？谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-13T17:46:52.110

```
- (void)setupWebView:(UIWebView**)aWebView { 
```

那太可怕了。您**永远不**应该有一个返回 void 的方法，而是通过引用设置参数，除非：

• 有多个参数集

• 方法的前缀是`get`

该方法应该直接返回创建的实例。这只会让事情变得更糟——完全是错误的：

```
 if (*aWebView) {
    [*aWebView release];
 }

 *aWebView = webview; 
```

1.  它破坏了封装；如果调用者传递了对 iVar 插槽的引用怎么办。现在你让被调用者管理调用者的内存，这既是可怕的做法，也很可能会崩溃（例如，面对并发）。

2.  如果`aWebView`为 NULL，它会崩溃；特别是在作业上崩溃。

3.  如果`aWebView`指的是 iVar 插槽，它会绕过任何可能的属性使用（打破封装的不同方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:29:06.480

它是一种初始化指针的方法。第一行分配对象。if 语句确保传入的指向指针的指针尚未分配，如果是则释放它。然后它将引用的指针设置为新分配的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:35:33.317

@bbum 的答案可能是正确的，但遗漏了我在那里看到的问题的一个方面。Foundation 中有很多在方法签名中使用指针指针的例子，可以说这是一种常见的模式。这些可能不是初学者的错误。

这些示例中的大多数都是相似的，因为它们属于一类：API 尝试避免使用异常，而是使用`NSError`用于失败。但是因为返回值用于`BOOL`表示成功的信号，所以`NSError`指针指针用作输出参数。只有在可能很少见的错误情况下`NSError`才会创建一个对象，该对象可以包含错误代码和错误描述，以及本地化描述，甚至可能包含更多信息（如批量操作中的多个错误数组）。因此，主要的成功案例是高效的，而错误案例有一定的能力传达出了什么问题，而不诉诸异常。据我了解，这就是这些签名背后的理由。

`NSFileManager`您可以在和中找到这种用法的示例`NSManagedObjectContext`。

在您想要多个返回值并且数组没有意义的其他情况下（例如，因为这些值的类型不同），人们可能会尝试使用指针指针，但正如@bbum 所说，看起来可能会更好为替代品。

# node.js - 获取流的 MD5 然后将流传递给 Node.js 中的阅读器的最佳方法

> ID：11020166
> 
> 赞同：3
> 
> 时间：2012-06-13T17:25:41.447
> 
> 标签：node.js, stream, amazon-s3

我正在解析一封电子邮件，每当我点击附件时，我都想将附件上传到 S3。每当找到附件时，我都会得到附件的流。我想获取附件的 MD5sum，然后再次使用流将其上传到 S3。

无论如何，如果不先将流写入文件，计算 MD5，然后从文件中生成可读流并将流发送到 knox（这将是 3 次流读取），是否可以这样做？

```
parser.on("attachment", function(attachment){
    //Calculate MD5 sum
    var md5sum = '';
    s3client.putStream(attachment.stream, 'blah.jpeg', {
        'md5sum': md5sum
    }, function(err, res) {});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:54:40.627

我认为这应该工作？

```
var crypt = require("crypto")

function hashFile(attachment){
    var hash = crypt.createHash("md5")
        .update(attachment)
        .digest("base64");

    console.log(hash);
}

hashFile("some attachment blah"); 
```

您传入的附件获取的 MD5 散列并返回 base64 编码（您也可以在摘要方法中指定二进制或十六进制）

**更新**好的，所以我查看了那个邮件解析器，并注意到它在帮助中所说的内容：

[https://github.com/andris9/mailparser#default-behavior](https://github.com/andris9/mailparser#default-behavior)

注意校验和属性的提及。

现在看这里的第 283 行：[https ://github.com/andris9/mailparser/blob/master/lib/mailparser.js](https://github.com/andris9/mailparser/blob/master/lib/mailparser.js)

该校验和是您想要的 MD5。

**所以只需执行 attachment.checksum 即可完成**

# python - 在烧瓶蓝图中使用烧瓶扩展

> ID：11020170
> 
> 赞同：18
> 
> 时间：2012-06-13T17:25:47.043
> 
> 标签：python, flask

我想创建一个蓝图；我目前的蓝图不是问题。我可以做这个。

但是，假设我想在我的应用程序中使用烧瓶扩展（对于我的情况，我想集成烧瓶缓存）？

到目前为止我所做的一切都出错了：

*   缓存 = 缓存（我的蓝图）

*   以不同的形式导入缓存和缓存的各个部分

所以像烧瓶缓存这样的东西很简单，可以包裹我的应用程序：

```
from flask.ext.cache import Cache
cache = Cache(app) 
```

但是在蓝图中使用它或与蓝图一起使用我现在不太明白如何。

编辑：不太明显的解决方案是从扩展中获取并构建我自己的库以导入蓝图，但这是更多的工作，我还没有完成。从我现在的理解水平来看，扩展/蓝图似乎不兼容。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-14T05:15:10.530

为了避免循环导入，您需要创建与应用程序实例分开的缓存实例（如果您正在构建更复杂的东西，您可能需要考虑切换到应用程序工厂模块）。

**缓存.py**

```
from flask_cache import Cache

cache = Cache() 
```

**foo.py**

```
from flask import Blueprint
from cache import cache

mod = Blueprint(...)

@mod.route("/")
@cache.cached(timeout=50)
def index():
    return datetime.now().strfmtime("%Y-%m-%d %H:%M:%S") 
```

**应用程序.py**

```
from flask import Flask
from yourapp.cache import cache
from yourapp.foo import mod

app = Flask("yourapp")

# ... snip ...

cache.init_app(app)

# ... snip ...

app.register_blueprint(mod) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:56:30.490

应用程序唯一需要访问的是`app`-instance 以创建`cache`.

假设您的代码：`cache = Cache(app)`在`foo.py`. 但是您想使用`bar.py`使用蓝图来注册路由的缓存。

**foo.py：**

```
from flask.ext.cache import Cache
cache = Cache(app)

from bar import mod
app.register_blueprint(mod) 
```

您唯一需要做的`bar.py`就是导入`cache`from`foo.py`并使用它：

**酒吧.py：**

```
from foo import chache

mod = Blueprint(...)

@mod.route('/')
@cache.cached(timeout=50)
def index():
    return str(datetime.now()) 
```

[Flask 缓存文档](http://packages.python.org/Flask-Cache/)和[示例](https://github.com/thadeusb/flask-cache/blob/master/examples/hello.py)

**编辑：**上面的例子有一个循环导入的问题。这里的方法是将应用程序与缓存分开：

**包/__*初始化*__.py：**

```
app = Flask(__name__)

from pack.views.general import mod
app.register_blueprint(mod) 
```

**包/缓存.py：**

```
from flask.ext.cache import Cache

from pack import app

cache = Cache(app) 
```

**包/视图/general.py：**

```
from flask import Blueprint
from pack.chache import chache

mod = Blueprint(...)

@mod.route('/')
@cache.cached(timeout=50)
def index():
    return str(datetime.now()) 
```

# c - 主 null 中的 char * argv[] 参数是否终止？

> ID：11020172
> 
> 赞同：50
> 
> 时间：2012-06-13T17:25:52.503
> 
> 标签：c, argv, null-terminated

所以我想知道命令行参数是否总是空终止？谷歌似乎说是的，在 GCC 上编译表明情况就是这样，但我能保证这总是正确的吗？

```
int main(int argc, char** argv)
{
    char *p;

    for(int cnt=1; cnt < argc; ++cnt)
    {
        p = argv[cnt];
        printf("%d = [%s]\n", cnt, p);
    }
    return 0;
}

$ MyProgram -arg1 -arg2 -arg3
1 = -arg1
2 = -arg2
3 = -arg3 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-13T17:27:31.570

是的。数组中的非空指针`argv`指向 C 字符串，根据定义，这些字符串是空终止的。

C 语言标准仅声明数组成员“应包含指向字符串的指针”（C99 §5.1.2.2.1/2）。字符串是“由第一个空字符终止并包括第一个空字符的连续字符序列”（C99 §7.1.1/1），也就是说，它们根据定义以空字符结尾。

此外，数组元素 at`argv[argc]`是一个空指针，因此数组本身在某种意义上也是“空终止的”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T17:27:11.800

是的，参数总是以空字符结尾的字符串是正确的。

# ios - ios 的空气 - 声音

> ID：11020175
> 
> 赞同：0
> 
> 时间：2012-06-13T17:26:06.843
> 
> 标签：ios, air, for-loop

早上好，我用 AIR for iOS 开发了一个简单的音板应用程序，但声音不起作用。我的意思是，当我打开应用程序时，我可以看到播放相关声音的按钮，但是当我按下按钮时，声音不会播放。

这是我的 AS3：

```
import flash.text.TextField;

//Array for buttons instances.
var buttonsArray:Array = new Array();
buttonsArray[0] = a01;
buttonsArray[1] = a02;
buttonsArray[2] = a03;

//Array for the sound clip names.
var soundArray:Array = new Array();
soundArray[0] = 'media/a01.mp3';
soundArray[1] = 'media/a02.mp3';
soundArray[2] = 'media/a03.mp3';

//This adds the mouse click event to the buttons.
for(var i:uint = 0; i < buttonsArray.length; i++){
    buttonsArray[i].addEventListener(MouseEvent.CLICK, buttonClicked);
}

astop.addEventListener(MouseEvent.CLICK, stopButtonClicked);

//This function stops any sound clip that is playing and
//plays the sound file thats clicked.

function buttonClicked(e:MouseEvent):void{
    SoundMixer.stopAll();

    for(var i:uint = 0; i < buttonsArray.length; i++){
        if(e.target == buttonsArray[i]){
            var s:Sound = new Sound();
            s.load(new URLRequest(soundArray[i]));
            s.play();
        }
    }

}

//This function adds a stop button

function stopButtonClicked(e:MouseEvent):void{
    SoundMixer.stopAll();
} 
```

我在“AIR for iOS 设置...”中包含了“媒体”文件夹，但仍然无法正常工作。它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:44:51.587

解决了。我只是将音频剪辑包含为 .swc，一切正常。

# date - iOS 5 - 将 UIDatePicker 最小日期设置为“今天”

> ID：11020183
> 
> 赞同：6
> 
> 时间：2012-06-13T17:26:41.677
> 
> 标签：date, uidatepicker

我知道如何将 UIDatePicker 中的最大和最小日期设置为某个日期，我想知道是否有可能做到这一点，因此最小日期始终是“今天”日期。在我的应用程序中，用户输入过去的日期是没有意义的，只是让他们添加今天或将来的日期。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-13T23:44:34.070

将最小日期设置为现在，将显示日期设置为现在 + 2 秒：

```
myDatePicker.date = 
       [[ NSDate alloc ] initWithTimeIntervalSinceNow: (NSTimeInterval) 2 ];
myDatePicker.minimumDate = 
       [[ NSDate alloc ] initWithTimeIntervalSinceNow: (NSTimeInterval) 0 ]; 
```

当您初始化 Nib 或将视图控制器的数据设置为重用时，请执行此操作。您也可以在 viewWillAppear 中执行此操作。

加分：您可以添加一个 IBAction 方法，巧妙地鼓励用户不要选择不明智的日期：

```
- (IBAction)datePickerChanged: (id)sender
{
     if ( [ datePicker.date timeIntervalSinceNow ] < 0 )
         datePicker.date = now;
} 
```

# android - Android：微调器显示来自网络服务的内容

> ID：11020191
> 
> 赞同：1
> 
> 时间：2012-06-13T17:27:11.770
> 
> 标签：android, user-interface, android-asynctask, spinner

我想做这样的事情：

主要目标是显示从某些 Web 服务加载的微调器内容。

用户单击微调器 - 适配器应显示一些文本，例如“正在加载...”。当它最终被加载时 - 它应该用加载的内容替换微调器中的现有适配器。

我做了什么：我为它制作了一个**微调器**和**onTouchListener**。在 Listener 中，我正在启动**asyncTask**，它从 Web 服务下载数据。在**asyncTask**的**onPostExecute**中，我实际上是在尝试替换微调器适配器并执行**spinner.performClick()**。但事实上，用户同时看到了 2 个适配器 - 初始的一个（“正在加载...”）和新的一个，由**spinner.performClick()**显示。

有没有更好的想法如何完成初始任务或如何只显示一个适配器？

这是我使用的一些代码：

```
private class CountryRegionCity extends AsyncTask<String, Void, JSONArray> {
    protected JSONArray doInBackground(String... params) {
        // Getting contents from web service            
        {...}
        return someJSONArray;
    }

        protected void onPostExecute (JSONArray jsonArray) {

        ArrayList<String> countryNames = new ArrayList<String>();
        //Filling here countryNames based on jsonArray
        {...}

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(context, android.R.layout.simple_spinner_item, countryNames);

        mCountrySpinner.setAdapter(adapter);
        mCountrySpinner.performClick();
    }
}

public View onCreateDialogView() {

    ArrayAdapter<String> countryArrayAdapter=new ArrayAdapter<String> (context(), android.R.layout.simple_spinner_item, new String[] {"Loading..."});
    mCountrySpinner.setAdapter(countryArrayAdapter);

    mCountrySpinner.setOnTouchListener(new OnTouchListener() {      
            public boolean onTouch(View v, MotionEvent event) {
                CountryRegionCity getCountries = new CountryRegionCity();
                getCountries.execute("countries");
                return false;
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T08:13:01.850

我猜你可以使用`notifyDataSetChanged()`Spinner 控件的方法来显示适配器数据的变化。

# c# - 如何为 Wcf 服务创建 Asmx 客户端

> ID：11020200
> 
> 赞同：4
> 
> 时间：2012-06-13T17:27:38.710
> 
> 标签：c#, .net, vb.net, wcf, asmx

我有一些客户调用我的 asmx 服务，我想将我的 asmx 更改为 Wcf 服务。我的 asmx 客户端如何在不修改客户端应用程序的情况下调用我的 Wcf 服务？

也许只是配置文件中的一些更改......

我不能指望他们编译他们的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:31:36.820

以下[文章](http://www.codeproject.com/Articles/312490/Migrating-ASMX-Services-To-WCF-services)说明了有关如何实现这一目标的详细指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:37:14.977

您需要在 WCF 服务器中支持[basicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)`basicHttpBinding`并向调用者提供端点的新 URL 。

调用者只需要更改他们使用的 URL。

对他们来说，一切都应该在幕后发生。

# wpf - 使用繁忙的 UI 线程拖动 WPF 滑块拇指会导致意外值

> ID：11020201
> 
> 赞同：0
> 
> 时间：2012-06-13T17:27:40.973
> 
> 标签：wpf, multithreading, slider

**编辑**：在 Slider.ValueChanged 事件中有一个长时间的锁定。删除它可以阻止怪异。不好的做法，但这种行为对我来说仍然没有意义。它可能与消息队列有关，但如果可能的话，我想要一个解释。

当 UI 线程* 上有大量工作时，WPF 滑块不会按预期与鼠标交互。如果我向一个方向拖动拇指，拇指通常会在鼠标光标前面前进，然后再返回。移动应该只导致增加 ValueChanged 事件，但事件有时会减少。有时，这种振荡也会发生在鼠标光标后面。似乎鼠标的位置是由其当前速度预测的。

我可以改变这种行为，还是我做错了什么？

切换 IsSnapToTickEnabled 没有帮助。

*将大的 BitmapSource 分配给图像。BitmapSource 在工作线程中创建。

```
<Window x:Class="WPFSliderBug.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Image Name="image1" Stretch="Fill" />
    <Slider HorizontalAlignment="Right" Name="slider1" VerticalAlignment="Stretch" Orientation="Vertical" />
</Grid>
</Window> 
```

**xml.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows.Media.Imaging;

using System.Threading;

namespace WPFSliderBug
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private volatile bool m_run = true;
        private double m_sliderValue;

        public MainWindow()
        {
            InitializeComponent();

            this.Closing += new System.ComponentModel.CancelEventHandler(MainWindow_Closing);
            this.slider1.Minimum = 1;
            this.slider1.Maximum = 30;
            this.slider1.SmallChange = 0.5;
            this.slider1.LargeChange = 0.5;
            this.slider1.TickFrequency = 0.5;
            this.slider1.TickPlacement = System.Windows.Controls.Primitives.TickPlacement.Both;
            this.slider1.ValueChanged += new RoutedPropertyChangedEventHandler<double>(slider1_ValueChanged);

            Thread t = new Thread((unused_state) =>
            {
                while (m_run)
                {

                    BitmapSource bmp;
                    lock (this)
                    {
                        bmp = ToBitmapSource();
                        bmp.Freeze();
                    }

                    this.Dispatcher.Invoke(new Action(delegate()
                    {
                        image1.Source = bmp;
                    }));
                }
            });

            t.Start();
        }

        void slider1_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            lock (this)
            {
                m_sliderValue = e.NewValue;
            }
        }

        void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e)
        {

                m_run = false;
        }

        public BitmapSource ToBitmapSource()
        {
            Random rng = new Random();
            double dpi = 96;
            int bytesPerPixel = 1;
            int width = 2048;
            int height = 2048;

            int stride = ((width * 32 + 31) & ~31) / 8;

            UInt32[] pixelData = new UInt32[width * height];
            for (int i = 0; i < pixelData.Length; ++i)
            {
                double r = rng.NextDouble();
                r = Math.Sin(r) * Math.Cos(r) + Math.Asin(r);
                pixelData[i] = (uint)(r * UInt32.MaxValue);
            }

            BitmapSource bmpSource = BitmapSource.Create(width, height, dpi, dpi,
                PixelFormats.Bgr32, null, pixelData, stride);

            return bmpSource;
        }
    }
} 
```

# php - 从 urlencoded 或 base64encoded 字符串下载图像

> ID：11020213
> 
> 赞同：0
> 
> 时间：2012-06-13T17:28:34.613
> 
> 标签：php

我的应用程序通过http get请求发送urlencoded或base64encoded字符串，该字符串包含图像数据，大多数是从php文件下载的，但我不知道php如何从我的字符串中下载urlencoded或base64encoded的图像，请帮帮我伙计们……我迷路了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:34:48.833

## 向用户提供图像

```
// we assume $imageData is PNG
$image = urldecode($imageData);
// or
$image = base64_decode($imageData);

// in case of force download change Content-Type: image/png to
// application/octet-stream and Content-Disposition: inline to attachment
header('Content-type: image/png');
header('Content-Disposition: inline; filename=' . md5($image) . '.png');
header('Content-Length: ' . strlen($image));

echo $image;
exit; 
```

如果您不知道，问题在于检测正确的 Content-Type。但是浏览器应该能够自行自动检测它。

**关于缓存**
PHP 的一些说明会隐式发送标题，这会阻止浏览器缓存检索到的数据。我建议您手动设置这些标头（Cache-Control、Expires、Pragma）。为了正常工作，每个图像都必须由唯一的 URL 提供。还要尽量避免开始会话。在具有公共访问权限的访问量很大的网站上，您可以轻松地用冗余会话文件淹没网络服务器。

## 将图像保存到文件

```
$image = urlencode($imageData);
// or
$image = base64_decode($imageData);

if (!file_put_contents('abs/path/to/save/file.png', $image)) {
    throw new Exception('Image could not be saved');
} 
```

# java - 在不打开其 IO 流的情况下识别丢失的 Socket 连接

> ID：11020215
> 
> 赞同：1
> 
> 时间：2012-06-13T17:28:40.910
> 
> 标签：java, multithreading, sockets

在创建提供所有四个连接的 WorkerThread 之前，我`SocketServer`首先会监听**至少 4个连接。** `Socket`并且在同一个线程中，所有 4 个套接字都将被打开以与连接的客户端进行通信。

现在，考虑这样一种情况，服务器已经接受了两个套接字连接，但正在侦听剩余的 2 个客户端，然后才能继续创建线程。

在侦听阶段，连接的客户端会显示“Waiting...”消息（因为服务器尚未打开套接字以将任何响应发送回客户端，并且`socket.readObject()`在客户端阻塞），直到服务器获得所有 4客户一起工作。与此同时，“已经连接”的客户端之一杀死了“等待...”的东西，并关闭了客户端应用程序。在这种情况下，当我的 WorkerThread 尝试打开它时，由于提供了死套接字，它会引发异常。

我如何知道套接字是否指向任何内容（因为客户端丢失）而无需打开套接字？（因为如果我从主线程打开它，我将无法从实际上应该使用它的 WorkerThread 再次打开它）。

如果我知道 Socket 是否死了，我可以让服务器重新开始监听并尝试获得 4 个连接，然后再继续创建线程。

我知道我`SocketServer`会被卡住，`accept()`所以即使可以检查我上面问的内容，我也必须创建另一个线程来监控已经“接受”的套接字连接的活跃度。

## 更新

我的意思是不打开套接字如下所示。

```
Socket s = ss.accept();
/* I'll not be doing as below, since once I close InputStream and OutputStream in main Thread, I can't open in WorkerThread.
But I still want to know if Socket s is connected to client, before I start WorkerThread.

ObjectInputStream in = new ObjectInputStream(s.getInputStream());
ObjectOutputStream out = new ObjectOutputStream(s.getOutputStream());
String msg = in.readObject().toString();
System.out.println("Client Says:");
out.writeObject("success");
in.close();
out.close();

*/
new WorkerThread(s).start(); 
```

请注意，我的服务器正在接受 4 个这样的连接，当 4 个套接字被`accept()`编辑时，它会传递所有 4 个 in`WorkerThread`的构造函数，然后返回给`accept()`另外 4 个客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:36:49.580

我认为你只需要更好地处理你的接受。`IOException`每当您尝试读取或写入套接字时，都应该正确处理。

一种选择是让接受代码向客户端发送“仍在等待”消息，并在您等待其他连接时每隔一段时间获得确认。套接字和关联的流已经由 已创建，`accept()`因此您可以执行此操作，调用`flush()`，`OutputStream`然后移交给处理程序。

只要您不调用`close()`流，就应该能够毫无问题地重复使用它们。您不能同时使用两个不同的线程。

# database - SQLite 读取列

> ID：11020218
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:28:44.740
> 
> 标签：database, sqlite

我有一个带有`id,name,number`.

我的问题是我需要一个命令，它给我一个与`AutoComplete`函数相关的名称，`editView`而在另一个`editView`中应该有与名称相关的正确数字。例如：我有名字 rice 和 number `50`。我想要第一个中的米饭`editText`并连接到另一个中的`AutoComplete`和数字。`50``editText`

我正在查找互联网以及一些 SQLite 手册，但似乎我太盲目而无法找到正确的命令。有人对显示此内容的教程提出了建议，或者有人有正确的命令让我从我的数据库中读取此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:33:32.463

```
SELECT number FROM table_id_name_number WHERE name = 'rice'; 
```

# r - 绘制和保存 R 图

> ID：11020223
> 
> 赞同：9
> 
> 时间：2012-06-13T17:29:20.427
> 
> 标签：r, bash

我有一个 bash 脚本，可以在运行命令时跟踪内存使用情况。它产生所需的命令，然后用 column1 = "memory in use by program (gigs)" 写入日志，第 2 列是到目前为止已用的时间（以秒为单位）。例如

```
31.282 1470
31.565 1480
31.848 1490
31.989 1500
32.273 1510
32.414 1520
32.697 1530
32.980 1540
33.122 1550
33.405 1560
6.511 1570
6.935 1580
7.502 1590
7.926 1600
8.351 1610
8.775 1620
9.059 1630
9.483 1640
9.908 1650
10.333 1660 
```

我想要做的是等到该过程完成，然后使用 R 绘制随时间变化的内存使用图并将其保存在当前目录中。我在玩 R，我确切地知道我需要使用哪些命令：

```
> heisenberg <- read.csv(file="4644.log",head=FALSE,sep=" ")
> plot(heisenberg$V2,heisenberg$V1,type="o",col="red",main="Memory Usage Over Time",xlab="Time (seconds)",ylab="Memory (gigabytes)")
> text(max(heisenberg$V2),max(heisenberg$V1),max(heisenberg$V1)) #Displays max value 
```

但我坚持的部分是将图形保存为 jpg 或 png。或者我如何在我的 bash 脚本中执行这个命令。我绝对需要用 R 语言编写另一个脚本并运行它吗？这有可能一举两得吗？

* * *

# 编辑

这是我的 script.r 的代码

```
png("mem_usage_2965.png",height=800,width=800)
heisenberg <- read.csv(file="2965.log",head=FALSE,sep=" ")
plot(heisenberg$V2,heisenberg$V1,type="o",col="red",main="oases_k85",xlab="Time (seconds)",ylab="Memory (gigabytes)")
text(max(heisenberg),max(heisenberg),max(heisenberg))
dev.off() 
```

谁能帮助解释为什么文本没有在输出的 png 中打印最大值？我在 bash 脚本中调用它`R CMD BATCH script.r script.out`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T17:33:29.190

将您的绘图调用包含在：

```
jpeg("myplot.jpg")
....plot code here....
dev.off() 
```

或者

```
png("myplot.png")
....plot code here....
dev.off() 
```

请参阅他们各自的帮助页面：`?png`有关其他参数的详细信息。

对于 PNG，这将是：

```
png("my_plot.png", height = 800, width = 600)
plot(heisenberg$V2,heisenberg$V1,type="o",col="red",main="Memory Usage Over Time",xlab="Time (seconds)",ylab="Memory (gigabytes)")
text(max(heisenberg$V2),max(heisenberg$V1),max(heisenberg$V1)) #Displays max value
dev.off() 
```

至于在 bash 脚本中运行它，您需要调用 R 来运行包含 R 代码的脚本以加载数据并绘制绘图。为此，有多种选择，其中两种是：

```
R CMD BATCH --no-save --no-restore my_script.R 
```

或使用`Rscript`

```
Rscript my_script.R 
```

其中`my_script.R`是包含生成绘图所需的语法有效的 R 代码的文本文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:33:27.100

你只看简单的吗？ [http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/png.html](http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/png.html)

你基本上告诉 R 开始保存 .png ：

```
png(file="blah.png") 
```

然后使用：

```
dev.off() 
```

恢复正常。

# git-log - 使用 git log -m --patch 时如何打印对应的父提交哈希

> ID：11020227
> 
> 赞同：1
> 
> 时间：2012-06-13T17:29:34.840
> 
> 标签：git-log

使用 git log 时

```
git log -m --patch 
```

对于合并提交，它将为每个父提交生成一个差异并指定相应的父提交哈希，例如：

```
commit c82270ac7d31f1c32b0b0d541c4c0b00fe85b4ab (from dd039905f7e2e1f74cddbb67cd0f699c443722e4) 
```

但是不方便解析。

当我以漂亮的格式使用 %P 时，它会给我两个父母同时提交哈希，比如

```
dd039905f7e2e1f74cddbb67cd0f699c443722e4 fdc14f48ff64d9ad8837dafb22c366bc2f 
```

而且我无法区分哪个是补丁。使用漂亮格式时如何获取相应的父提交哈希？

谢谢

# ios5 - 如何在 XCode 4.3.2 中将图像设置为 uiTableView 的背景视图

> ID：11020234
> 
> 赞同：0
> 
> 时间：2012-06-13T17:30:06.777
> 
> 标签：ios5, uiimage, uitableview, xcode4.3

XCode 版本：4.3.2 iOS 5.0

我正在尝试为我的 TableViewController 设置背景图像。我在控制器中已经有一个表，只是不确定如何以及在哪里（编写代码的方法）为此设置背景图像。一旦我设置它，是否有人也知道如何将表格放在屏幕底部？如果有人可以概述步骤，我将不胜感激。

真的很感谢一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:34:07.100

我在 viewDidLoad 方法中执行此操作。例如这样：

```
UIImageView *bgView = [UIImageView ....];
self.tableView.backgroundView = bgView;
[bgView release]; 
```

# java - 如何验证在edittext中输入的数字？- 安卓

> ID：11020235
> 
> 赞同：2
> 
> 时间：2012-06-13T17:30:07.930
> 
> 标签：java, android, validation, numbers, android-edittext

当它为空时，我能够使用下面的代码验证一个edittext

```
EditText a = (EditText) findViewById(R.id.edittext1); 

if ((a.getText().toString().equals(""))
{
    Toast.makeText(getApplicationContext(), "value is empty", 0).show();
} 
```

edittext*输入*类型设置为数字。

现在我想验证输入的号码。

例如，要输入的数字范围应在 15 到 25 之间。

如果数字低于 15 或高于 25，则应显示**超出范围**

帮帮我！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:33:04.083

You can do something like that:

```
final int value = Integer.valueOf(a.getText().toString());  
if (value < 15 || value > 25) {  
    // do what you want  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:32:23.610

将值解析为 Integer 或 Float 并进行验证。

```
Integer.parseInt(a.getText()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:34:41.653

If you know that the value entered is a number you can first parse it using either:
`int val = Integer.parseInt(a.getText());`
or if it is a float:
`float val = Float.parseFloat(a.getText());`.

Then you can just do a comparison: `if( val < min || val > max ) //show message`;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-23T12:22:01.993

您可以使用此方法检查十进制数是否有效：

```
public boolean isValidDecimalNumber(EditText editText) {
        return !TextUtils.isEmpty(editText.getText().toString().trim()) && !editText.getText().toString().trim().equalsIgnoreCase(".");
    } 
```

# c# - Windows 商店应用程序中的 Grid.ShowGridLines

> ID：11020239
> 
> 赞同：6
> 
> 时间：2012-06-13T17:30:38.900
> 
> 标签：c#, windows-runtime, windows-store-apps

在 Windows 商店应用程序中显示网格控件线条的最佳方式是什么？我想要类似 Grid.ShowGridLines 的东西，但我发现 WinRT 缺少它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:18:58.770

我能想到的唯一解决方案会产生您想要的那种效果，对我们来说，边框元素可以在网格单元格中的每个控件周围放置边框，尽管它可能有点繁琐

# java - 这种使用jstl是否正确？为什么它不起作用？

> ID：11020242
> 
> 赞同：0
> 
> 时间：2012-06-13T17:30:44.657
> 
> 标签：java, jsp, jstl

在 netbeans 7 和 jdk 7 中，一切正常，我在环境中没有做任何更改，旧标签在 jstl ${class.get_name()} ${page.getTitle()} 中运行良好

我介绍的新的不起作用，我不知道为什么？

查看我创建的这个简单的应用程序示例，将 jstl 1.2 添加到库中

它仍然不起作用？

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <% 
        String var1;
        var1 = "Welcome";
        %>
        normal : <%=var1%>
        <hr />
        dollar: ${var1}
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:50:18.740

首先，上面的页面甚至没有使用 JSTL。它使用 JSP EL。

我假设您希望看到`dollar: "Welcome"`打印，但这不会发生，因为 JSP EL 不打印局部变量的值。它打印属性的值。

将您的代码更改为

```
<% pageContext.setAttribute("var1", "Welcome"); %> 
```

或者，更好的是，

```
<c:set var="var1" value="Welcome"/> 
```

你会看到预期的输出。

# java - java中的URL替换

> ID：11020243
> 
> 赞同：0
> 
> 时间：2012-06-13T17:30:57.163
> 
> 标签：java, string, url

我正在尝试用另一个 url 替换 url。

以下是源网址的示例

```
http://sysserver01.internal.com/web/www/internal/projectwork/resources/injury-prevention-and-recovery/avoiding-injury/overview-of-running-injuries/ 
```

所以这个网址应该替换为下面的网址，

```
http://sysserver01.internal.com/var/www/html/injury-prevention-and-recovery/avoiding-injury/overview-of-running-injuries/ 
```

这意味着如果源 url 出现，那么源 url 中**资源**之后的部分必须附加**/var/www/html/**（以及源 url 中资源之后的其余部分）。

这需要使用包含资源字符串的随机源 url 集发生。

我没有足够的字符串操作知识。所以请有人帮我解决这个问题。当我为我的工作选择这个平台时，请尝试用 JAVA 解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:42:33.673

```
String originalUrl = "http://sysserver01.internal.com/web/www/internal/projectwork/resources/injury-prevention-and-recovery/avoiding-injury/overview-of-running-injuries";

String newUrl = originalUrl.replaceAll("web/www/internal/projectwork/resources", "var/www/html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:37:13.243

```
String originalUrl = "http://sysserver01.internal.com/web/www/internal/projectwork/resources/injury-prevention-and-recovery/avoiding-injury/overview-of-running-injuries";

String newUrl = originalUrl.replace("web/www/internal/projectwork/resources", "var/www/html"); 
```

# c# - 在 AppDomain 的设置和拆卸过程中创建一个包装器

> ID：11020248
> 
> 赞同：2
> 
> 时间：2012-06-13T17:31:18.810
> 
> 标签：c#, .net, web-services, appdomain

```
using System;
using System.IO;
using System.Reflection;
using System.Text;
using MyApp.Logging;

namespace MyApp.SmsService.Common
{
    public class MyAppAppDomain:MarshalByRefObject
    {
        private readonly AppDomainSetup domaininfo;
        private readonly AppDomain appDomain;
        public static string libDllPath;

        public MyAppAppDomain(string appDomainName) //Constructor
        {
            //Setup the App Domain Parameters
            domaininfo = new AppDomainSetup();
            domaininfo.ApplicationBase = AppDomain.CurrentDomain.SetupInformation.ApplicationBase;
            domaininfo.DisallowBindingRedirects = false;
            domaininfo.DisallowCodeDownload = true;
            domaininfo.ConfigurationFile = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile;

            // Create the application domain.
            appDomain = AppDomain.CreateDomain(appDomainName, null, domaininfo);

            //Set the dll path using Static class ref.

            //Dependency resolution handler
            appDomain.AssemblyResolve += LoadFromLibFolder; /*Exception*/
        }

        private static Assembly LoadFromLibFolder(object sender, ResolveEventArgs args)
        {

            if (libDllPath != null)
            {
                string assemblyPath = Path.Combine(libDllPath, new AssemblyName(args.Name).Name + ".dll");

                if (File.Exists(assemblyPath) == false)
                {
                    return null;
                }
                Assembly assembly = Assembly.LoadFrom(assemblyPath);
                //Assembly dependancy resolved.

                return assembly;
            }

            return null;
        }

        public Object getNewInstanceOf(string fullyQualifiedTypeName)
        {
            return appDomain.CreateInstanceAndUnwrap(Assembly.GetExecutingAssembly().FullName, fullyQualifiedTypeName);
        }

        public Type getTypeOf(string fullyQualifiedTypeName)
        {
            return getNewInstanceOf(fullyQualifiedTypeName).GetType();
        }

        public void unloadDomain()
        {
            AppDomain.Unload(appDomain);
        }
    }
} 
```

上面的类是一个包装器，我想创建它来设置和拆除应用程序域。但是，在我的网络服务中，每当我实例化 MyAppAppDomain 的对象时，我都会收到 FileNotFoundException [Failed to load a dll xyz.dll]。

以下是前任：

```
MyAppAppDomain.libDllPath = appDllLibPath; //Some directory other than bin.
pluginDomain = new MyAppAppDomain("SmsServicePlugins"); //Throws FileNotFoundException. 
```

当我调试时，我看到导致异常的行是上面标记为/*异常*/的行，在 MyAppAppDomain 的构造函数中。

出了什么问题？

**编辑：**

我正在浏览其他文章，我读到对象不能跨域可见。只有当对象可以在两个域中序列化（使用 MarshalByRefObject）然后可以通过代理访问时，才会发生这种情况。

如果有人能指出上述代码中的问题，将会有很大帮助。与此同时，我正在尝试更多地了解 Marshalling 和 Proxy-ing。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:42:49.463

第一个问题是你试图在应用程序域包装器中做所有事情，它实际上是两个不同的组件。您需要的第一个组件是您想要在继承自`MarshalByRefObject`（或标记为`Serializable`）的新应用程序域中创建的对象。另一个生活在您当前的内部`AppDomain`，用于创建新的`AppDomain`.

查看 msdn[示例](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)以了解我的意思。

但是，您的错误很可能是您的 DLL 路径错误。您能否显示完整的堆栈跟踪以显示引发异常的行？

# html - 将 swf 文件堆叠在一起

> ID：11020255
> 
> 赞同：2
> 
> 时间：2012-06-13T17:31:41.767
> 
> 标签：html, css, flash

是否可以直接在彼此之上加载多个 swf 文件？我觉得我很接近使用具有不同 z-indexing 的 div，但是 flash 播放器呢？我认为对于每个 swf 都有一个与之关联的单独的 Flash 播放器，我错了吗？如果这是真的，它们是否可以直接堆叠在一起（在 z 轴上）？

感谢您为我解决这个问题。如果结构上不可能的话，我不想把头撞到墙上。

澄清这一点：您只能看到顶部的 swf，但如果它被删除，例如使用 swfobject.removeSWF()，在完全相同的位置会有另一个，但 Z-index 较低

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:32:52.690

当然有可能。请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/ezXjx/)**。

**HTML**

```
<div id="a">
    <object type="application/x-shockwave-flash" data="http://edmullen.net/flash/relog.swf" width="200" height="200">
        <param name="movie" value="http://edmullen.net/flash/relog.swf" />
        <param name="WMode" value="Transparent" />
    </object>
</div>
<div id="b">
    <object type="application/x-shockwave-flash" data="http://edmullen.net/flash/relog.swf" width="200" height="200">
        <param name="movie" value="http://edmullen.net/flash/relog.swf" />
        <param name="WMode" value="Transparent" />
    </object>
</div> 
```

**CSS**

```
#a {
   position:absolute;
   top:0;
   left:0;
   z-index:10;
}
#b {
   position:absolute;
   top:100px;
   left:100px;
   z-index:20;
} 
```

# android - 如何自动生成proguard-android.txt？

> ID：11020256
> 
> 赞同：5
> 
> 时间：2012-06-13T17:31:42.867
> 
> 标签：android, adt, proguard

[阅读了新的ProGuard Improvements for Android](http://tools.android.com/recent/proguardimprovements)所做的所有精彩的事情，我通过*取消注释*新创建的项目中的以下行来切换到新方案：

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt;proguard-project.txt 
```

但是当我尝试导出这个项目的 APK 时，我收到了以下消息：

> 无效的proguard配置文件路径 C:\android-sdk-windows\tools\proguard\proguard-android.txt 不存在或不是常规文件

好吧，我检查了目录`C:\android-sdk-windows\tools\proguard`，果然，虽然这个目录存在并且有子目录，甚至还有一个 README 文件，但是`proguard-android.txt`却无处可寻。

顺便说一句，我尝试使用`:`而不是，`;`但这似乎并没有改变任何东西。

Eclipse+ADT+Proguard 不应该为我自动生成这个文件吗？我错过了什么？

另外，我在哪里可以找到[Android](http://tools.android.com/recent/proguardimprovements) proguard-android.txt 的“标准”默认规则集，以便我可以将其复制到其丢失的插槽中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T17:57:31.623

它*应该*生成或随您的 sdk 一起提供（我认为）。但是，这是我拥有的链接（工具 r19）。 [http://pastebin.com/7rNJkns0](http://pastebin.com/7rNJkns0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T09:56:45.067

现在在 project.properties 中更改 API 时转换的新项目或旧项目链接到

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt 
```

您可以通过注释该行并添加来简单地链接您的项目 proguard 配置

```
proguard.config=proguard-project.txt 
```

给它。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T14:30:35.527

您的声明是：

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt;proguard-project.txt 
```

正确的声明是（`:`而不是`;`）：

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T09:09:40.403

我建议创建一个新项目并从那里复制 proguard-project.txt。

在 Eclipse 中，您可以通过转到 File --> New --> Other --> Android --> Android Application Project 来做到这一点。它只是在新项目的根目录中。

# python - Python：如果在 For 循环中

> ID：11020257
> 
> 赞同：2
> 
> 时间：2012-06-13T17:31:43.473
> 
> 标签：python, loops, if-statement, for-loop

我正在创建一个带有坐标和 ID 号的文件列表。
a 只是一个用于分隔点的任意值。f 是一个较早打开和较晚关闭的文件。我正在使用下面列出的代码。它应该产生 511 个点，跳过一个原本是第 293 个点的点。相反，它跳过了 169 分，我不知道为什么。对此的任何帮助将不胜感激。

```
id=1

for i in range(0,8,1):
    for j in range(0,8,1):
        for k in range(0,8,1):
            x1=i*a
            y1=j*a
            z1=k*a
            if ((i!=4) & (j!=4) & (k!=4)):
                f.write("%4.d  1  4  %4.3f  %4.3f  %4.3f\n"%(id, x1, y1, z1))
                id=id+1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:36:10.537

由于您要求 that `i`must be different from `4`AND `j`must be different from `4`AND `k`must be different from `4`，因此您将跳过其中 ANY 所在的所有点`4`。采用

```
if i != 4 or j != 4 or k != 4: 
```

反而。等效地，但可能更容易掌握，你可以写

```
if not (i == 4 and j == 4 and k == 4): 
```

甚至更好

```
if i, j, k != 4, 4, 4: 
```

**编辑**：这是您的代码的完全重写版本：

```
points = itertools.product(range(0, 8 * a, a), repeat=3)
points = (p for p in points if p != (4 * a, 4 * a, 4 * a))
with open("filename", "w") as f:
    for id_p in enumerate(points, 1):
        f.write("%4.d  1  4  %4.3f  %4.3f  %4.3f\n" % id_p) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:40:00.390

你的条件是错误的，应该有“或”而不是“和”。此外，您的代码可以简化一点，它应该如下所示：

```
for i in range(8):
    for j in range(8):
        for k in range(8):
            x1 = i * a
            y1 = j * a
            z1 = k * a
            if i != 4 or j != 4 or k != 4:
                print("%4.d  1  4  %4.3f  %4.3f  %4.3f\n" % (id, x1, y1, z1))
                id += 1 
```

# c# - ComboBox 可以同时容纳数字和文本吗？

> ID：11020259
> 
> 赞同：3
> 
> 时间：2012-06-13T17:31:45.230
> 
> 标签：c#, types, combobox

我想弄清楚一些事情。我有一种将一些项目添加到`ComboBox`名为“cbSize”的方法。我意识到如果我在其中添加两种类型的数据，代码会崩溃。这是因为 a`ComboBox`只能容纳一种类型的数据吗？

```
items.Add(1);
items.Add(10);
items.Add(100);
items.Add(2);
items.Add(20);
items.Add(3);
items.Add(30);       //works fine if add numbers only

//items.Add("4");    //will crash if mix both numbers and text
//items.Add("2");    //works fine if add text only

//then sort them out
items.Sort();

//now clear original cbSize items
cbSize.Items.Clear();

//and add them back in sorted order
cbSize.Items.AddRange(items.ToArray());

//gotta clear ArrayList for the next time or else things will add up
items.Clear(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:37:09.407

> 这是因为 ComboBox 只能容纳一种类型的数据吗？

不，在下面尝试它会起作用

```
cbSize.Items.Add("44");
cbSize.Items.Add(44); 
```

问题在于您的项目集合，它是类型安全的。你不能给它添加不同的类型。

尝试使用对象列表。它会起作用的。原因是 int 和 string 都是对象

```
List<object> items = new List<object>();
items.Add(1);
items.Add(30);     
items.Add("4");    
items.Add("2");    

//since you have string and int value you need to create custom comparer
items.Sort((x, y) => Convert.ToInt32(x).CompareTo(Convert.ToInt32(y)));

//now clear original cbSize items
cbSize.Items.Clear();

//and add them back in sorted order
cbSize.Items.AddRange(items.ToArray()); 
```

或者您可以使用 ArrayList 类（不是类型安全的，因为它可以存储任何对象）

```
var integers = new ArrayList();
integers.Add(1);
integers.Add(2);
integers.Add("3");
comboBox1.Items.AddRange(integers.ToArray()); 
```

*   [.net 中的类型安全是什么？](https://stackoverflow.com/questions/2437469/what-is-type-safe-in-visual-studio-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:46:12.070

是的。你可以做的是提供一个可以适应整数和字符串的 Size 类：

```
items.Add(new Size(3));
items.Add(new Size(4));
items.Add(new Size("large")); 
```

然后，您可以使 Size 类实现 IComparable，以便您可以调用该`Sort()`方法。

# javascript - 如何在 Dojo 1.7 中使用未压缩文件？

> ID：11020267
> 
> 赞同：3
> 
> 时间：2012-06-13T17:32:10.853
> 
> 标签：javascript, dojo, js-amd

我创建了一个依赖于 dojox/data/JsonRestStore 的 Dojo 模块，如下所示：

```
define("my/MyRestStore", 
    ["dojo/_base/declare", "dojox/data/JsonRestStore"], 
    function(declare, JsonRestStore) {

var x = new JsonRestStore({
    target: '/items',
    identifier: 'id'
});

... 
```

这很好。但现在我想加载 JsonRestStore 代码的未压缩版本，以便调试它。我找不到任何有关如何执行此操作的文档，但由于有一个名为“JsonRestStore.js.uncompressed.js”的文件，我将代码更改为：

```
define("my/MyRestStore", 
    ["dojo/_base/declare", "dojox/data/JsonRestStore.js.uncompressed"], 
    function(declare, JsonRestStore) {
... 
```

认为这可能有效。

我可以看到 JsonRestStore.js.uncompressed.js 文件正在 FireBug 中加载，但尝试执行此操作时出现错误`new JsonRestStore`：

```
JsonRestStore is not a constructor 
```

这应该工作吗？

有没有办法将 Dojo 配置为使用所有模块的未压缩版本？这就是我真正想要的，但如果这是唯一的方法，我会满足于每个依赖项。

## 更新

我找到了一种方法来实现我想要做的事情：将 JsonRestStore.js.uncompressed.js 文件重命名为 JsonRestStore.js。

但是，这似乎有点像一个 hacky 解决方法，所以我仍然很想知道是否有更好的方法（例如通过配置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:55:10.333

你有两个选择

1) 创建自定义构建。自定义构建将输出一个可用于调试的未压缩文件。想想 dojo.js.uncompressed.js，但它包含您使用的所有额外模块。

或者

2) 对于开发环境，使用dojo源代码。这意味着下载[Dojo Toolkit SDK](http://dojotoolkit.org/download/)并从开发环境中引用 dojo.js。

对于我从事的项目，我两者都做。我设置了 Dojo 配置，使其可以是动态的，并且我可以使用查询字符串参数更改我想要的配置。

当我调试一个问题时，我会使用第一个选项来让我单步调试代码，看看发生了什么。当我编写一些重要的 js 并且不希望自定义构建的开销看到我的更改时，我使用第二个选项。

我对此进行了更多描述

[http://swingingcode.blogspot.com/2012/03/dojo-configurations.html](http://swingingcode.blogspot.com/2012/03/dojo-configurations.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:34:17.323

我认为这是因为加载器通过使用的文件约定声明了它的类加载（模块）。1.7 加载器还不是很健壮，在意识到如何分离 '.' 之前我遇到了类似的问题。和 '/' 字符。

它只是一个合格的猜测；但我相信这与“。”的解释有关。类名中的字符，表示子命名空间而不是模块名。

'define(/ * BLANK * / [ / * DEPENDENCIES * / ], ...)' - 没有给出第一个字符串参数 - 由文件名（基本名）加载。不过，返回的声明也有一个说法。因此，对于您使用 jsonrest 的示例，它的拆分/解析如下：

```
toplevel = dojox
mid = data
modulename = JsonRestStore.js.uncompressed 
```

（失败..模块呈现为 dojox.data.JsonRestStore.js.uncompressed，而不是 dojox.data.JsonRestStore）。

所以，三个选项；

1.  通过加载未压缩的类`<script src="{{dataUrl}}/dojox/data/JsonRestStore.js.uncompressed.js"></script>`并在 dojo.ready 上运行它们
2.  我认为将`define([], function(){})`in uncompressed.js 修改为`define("JsonRestStore", [], function() {})`可以解决问题（未确认）
3.  使用 dojo/text loader，见下文

需要文字填充物:)

```
define("my/MyRestStore", 
    ["dojo/_base/declare", "dojo/text!dojox/data/JsonRestStore.js.uncompressed.js"], 
    function(declare, JsonRestStore) {
...
        JsonRestStore = eval(JsonRestStore);
        // not 100% sure 'define' returns reference to actual class, 
        // if above renders invalid, try access through global reference, such as
        // dojox.dat... 
```

# javascript - 如何干燥原型javascript方法定义？

> ID：11020271
> 
> 赞同：3
> 
> 时间：2012-06-13T17:32:23.803
> 
> 标签：javascript

我要回到“原始”Javascript，我正在编写这样的类：

```
var Person;

Person = (function() {

    function Person() {}

    Person.prototype.run = function() {};

    Person.prototype.jump = function() {};

    Person.prototype.talk = function() {};

    return Person;

})(); 
```

我觉得重复`Person.prototype`不是很干：避免换行也更难。有解决这个问题的常用方法吗？例如，可以分配`Person.prototype`给一个小变量 like `cls`，这会使线条看起来更像

```
cls.run = function() {}; 
```

...但这可能太不合常规了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:39:22.597

由于原型中没有任何内容，您可以简单地为其分配一个新对象：

```
Person.prototype = {
    run: function() {},
    jump: function() {},
    walk: function() {}
}; 
```

否则，您可以使用诸如 jQuery 之类的函数`$.extend()`来合并两个对象：

```
$.extend(Person.prototype, {
    run: function() {},
    jump: function() {},
    walk: function() {}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:38:03.040

这不是 DRY 的真正含义。该死，我也必须写很多'if'和'function'。我真的不能忍受'return'和'for'。;)

DRY 用于复制和粘贴功能，导致代码臃肿和维护成本高。在这种情况下，您更多地抱怨语言语法。

顺便说一句，通过在对象上定义方法，您可能领先于（即更干）许多人。

说了这么多，coffeescript 可以让你不那么冗长。方式不那么冗长。很多时候你不需要括号或大括号，你根本不需要原型。

# javascript - 获取表单元素的名称

> ID：11020274
> 
> 赞同：48
> 
> 时间：2012-06-13T17:32:47.120
> 
> 标签：javascript

我有这个用于验证表单的简单 JS，有人可以告诉我如何获取字段名称（你知道，name=""），它应该是 NameOfSomefield 现在所在的位置：SI 尝试过`someField.tagName`但没有运气......

```
function validateForm(){
    var someField = document.forms["nameofofrm"]["someField"].value;
    if (someField==null || someField=="") {
        alert("You cannot leave blank this field: ".NameOfSomefield);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-13T17:43:25.137

```
var name = element.getAttribute("name"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-25T17:23:02.133

如果你想要一个[jQuery](https://jquery.com/)方法，你可以使用：

```
let elementName = $('#element_id').attr('name') 
```

[您可以在此处](https://www.w3schools.com/jquery/jquery_ref_selectors.asp)找到有关 jQuery 选择器的更多信息

# c - 如何存储从 C 文件中读取的结构？

> ID：11020275
> 
> 赞同：2
> 
> 时间：2012-06-13T17:32:47.070
> 
> 标签：c, file, memory, storage, structure

我想出了一个学习 C 的项目，但我有点碰壁了。该项目只是一个纸牌游戏，其中玩家有两套卡片，一套是一套大小的套牌，另一套是他们的卡片集合，可以根据需要做大。卡片结构如下：

```
struct card {   
    char name[256];
    char special[256];
    char type[100];
    char rarity[100];
    int points;
}; 
```

然后我有一个名为 coll.txt 的集合文件

```
first card goes here 50
second card goes here 70
... 
```

然后我有一个（草率的）函数从文件中读取并将其存储到临时卡中：

```
void read_into_collection(FILE *f) {
    char *file_text;
    char *token;
    int i;
    struct card temp;

    file_text = (char *) malloc(sizeof(struct card));

    while(fgets(file_text, sizeof(struct card), f)) {
        for(i = 1, token = strtok(file_text, " "); token; i++, token = strtok(NULL, " ")) {
            switch (i) {
            case 1:
                strcpy(temp.name, token);
                break;
            case 2:
                strcpy(temp.special, token);
                break;
            case 3:
                strcpy(temp.type, token);
                break;
            case 4:
                strcpy(temp.rarity, token);
                break;
            case 5:
                temp.points = atoi(token);
                break;
            default:

                i = 0;
                break;
            }
        }
    }

    free(file_text);
} 
```

所以当`i = 6`我准备好将临时卡移动到集合中并将下一张卡读入临时变量等等时。但是我该怎么做呢？我无法弄清楚实际上应该是什么集合。一开始我以为：

```
struct card *collection = (struct card *) malloc(number_of_cards * sizeof(struct card)); 
```

但是，如果我是正确的，`malloc()`返回一个指向一块内存的指针，并且内存不像数组那样顺序，所以我不能增加指针来存储卡。

我还尝试计算文件中的行数（每行是一张卡片），然后制作一个该大小的数组，但我得到一个错误，即该值不是恒定的。

将这些卡片作为收藏品存储的最佳方式是什么？我只想让集合成为一个非常大的数组，但我觉得这种情况经常出现在项目中，我宁愿学习如何处理它而不是采取简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:34:20.580

> 但是，如果我是正确的， malloc() 返回一个指向一块内存的指针，并且内存不像数组那样顺序，所以我不能增加指针来存储卡片。

错误的。它是顺序的。你可以`malloc()`用来创建任何东西的数组：

```
mystruct* ptr = (mystruct*) malloc(sizeof(mystruct) * numberOfStructs)

for(int i = 0; i < numberOfStructs, i++) {
    ptr[i].setSomeInfo(x);
} 
```

这是在 C 中执行此操作的标准方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:42:32.583

我过去经常用 C 编程，这是我的最爱之一。这是我的答案。

您使用 malloc 的方式确实分配了一个数组

```
struct card *collection = (struct card *) malloc(number_of_cards * sizeof(struct card)); 
```

每次调用 malloc 都会返回一个指向内存中不同区域的指针。但是对 malloc 的调用总是返回一个连续的块。

如果已知卡的数量，您可以使用它来分配一个数组，然后像这样访问它

```
//added some code to prevent overflow
collection[i].name[255] = 0;
strncpy(collection[i] .name, token, 255); 
```

如果不知道卡的数量怎么办。然后做一个链表。这是链表的主要用途，用于存储大小未知的集合的内容。

# windows - 命令行 & 和 &&

> ID：11020276
> 
> 赞同：0
> 
> 时间：2012-06-13T17:32:47.973
> 
> 标签：windows, file-io, command-line, batch-file

所以目前我正在尝试做的是，远程到另一台服务器，启动计划任务，退出，更改到我桌面上的指定文件夹，写入文件

我的代码目前看起来像这样

```
C:MyOriginalFolder> psexec \\MYREMOTESERVER -u MYUSERNAME cmd
C:MYREMOTESERVER> SCHTASK.......
C:MYREMOTESERVER> exit & cd C:\\Users\ce132d & echo "Logged off" > MyLog.txt
//expected: the folder C:\\Users\ce132d should have a text file called MyLog.txt

//what happens:  I end up in C:MyOriginalFolder with no MyLog.txt file created 
```

当我删除 & 并逐个命令测试它时，一切都很好，并且发生了预期的行为。但是当用 & 和 && 将它们连接在一起时，预期的行为不会发生。

所以我的问题是：是否有某种方法可以将退出、更改目录和编写文本文件的操作统一起来？我最终将检查登录远程服务器是否成功，并希望将这 3 个操作放入 if (successful login) {do 3 tasks} else {write error log}..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:18:13.173

你发送你的远程服务器`exit & cd C:\\Users\ce132d & echo "Logged off" > MyLog.txt`。
为什么您认为`cd ...`应该对您的本地目录产生任何影响？

当您逐行发送命令时，您`exit`将*退出*远程服务器上下文，然后您再次在本地计算机上，因此其余命令按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:38:37.217

在`> MyLog.txt`运行任何命令（包括`cd`. 你可以`> C:\Users\ce132d\MyLog.txt`改用。

您也可以使用`>>`而不是`>`附加到文件。

# javascript - 需要相当于 HTML 输入标签的 javascript

> ID：11020278
> 
> 赞同：0
> 
> 时间：2012-06-13T17:32:56.803
> 
> 标签：javascript, input

我有一个充满表单的设置页面，通常使用输入标签将值提交回服务器。我有一个实例需要警报框来显示带有是和否按钮的警告，这部分我已经完成，我需要知道的是如何以与输入相同的方式将单选按钮中的值提交回服务器标签呢？

```
 <script type="text/javascript">
    function radioFunc()
    {
    var x;
    var r=confirm("WARNING! \nManually adjusting flowrate settings can flood your process, Are you sure?");
    if (r==true)
      {
      x="YES!";
      }
    }
    </script> 
```

...

```
<FORM action=/menu/index.zhtml method=post>
               <TR>
                  <TD width="45%">Max Flowrate Span </TD>
                  <TD align=middle width="25%"><INPUT value="<?z echo($configData.span420) ?>" name=configData.span420></TD>
                  <TD align=middle width="30%"><INPUT type=submit value=Submit><INPUT type=reset value=Reset></TD>
               </TR>
               <TR>
                  <TD width="45%">Desired Span </TD>
                  <TD align=middle width="25%">0%<input type="radio" name="ang" checked>25%<input type="radio" name="ang">50%<input type="radio" name="ang"><br>75%<input type="radio" name="ang">100%<input type="radio" name="ang" ></TD>
                  <TD align=middle width="30%"><button onclick="radioFunc()">Submit</button></TD>
               </TR>

            </FORM> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:36:51.960

看一眼：

[http://www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp)

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to display a confirm box.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script type="text/javascript">
function myFunction()
{
var x;
var r=confirm("Press a button!");
if (r==true)
  {
  x="You pressed OK!";
  }
else
  {
  x="You pressed Cancel!";
  }
document.getElementById("demo").innerHTML=x;
}
</script>

</body>
</html> 
```

代替

```
document.getElementById("demo").innerHTML=x; 
```

在表单上设置隐藏输入的值，例如：

```
<input type'hidden' id='hiddenAttr' /> 
```

和

```
document.getElementById("hiddenAttr").innerHTML=x; 
```

然后，您将能够像访问其他属性一样访问 hiddenAttr 输入。

# javascript - 基于 AJAX 的网页群聊，如 FB

> ID：11020283
> 
> 赞同：0
> 
> 时间：2012-06-13T17:33:19.747
> 
> 标签：javascript, jquery, ajax, chat, push

有一个问题要问你……我目前正在为网页开发一个简单的群聊功能。它仅适用于组，因此用户无需指定昵称或类似的东西......系统已经知道昵称，因为用户必须已经登录。

无论如何，它应该只是一个简单的全组聊天室 - 没有一对一的私人聊天！

问题是：你认为看看 Ajax Push 是个好主意吗（比如[这里](http://www.ape-project.org/demos/1/ape-real-time-chat.html)），或者对于简单的群聊来说这是否有点过头了......不要指望太多人使用它，所以也许 push通过 jquery 进行过度杀伤和长拉会更好（在这种情况下 - 你知道任何关于长拉聊天功能的非常好的教程吗？）？

非常感谢任何提示或其他输入！:)

最好的祝福

磷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:55:32.707

拉取会更容易，但对服务器的负载会更大，而且显然不是实时的。为了获得良好的聊天体验，推送绝对是更好的选择。但是，您实施它的能力可能会受到限制，这取决于您在服务器上拥有哪些技术以及您对它的控制程度。我已经实现了几次推送（彗星）系统，这绝对是可行的。这真的取决于你。听起来您对应该考虑的事情（用户数量、实施难度等）掌握得很好。你拥有的用户越多，使用推送就越好，因为它会减轻服务器的压力，并且会改善房间内的交互。

要考虑的另一件事是您要支持哪些浏览器。通过 push 支持 IE 可能比支持其他浏览器更困难，但它绝对是可行的（早在 IE6 之前我就已经支持了）。

最后，如果您只关心支持现代浏览器，您可能需要考虑使用[Web 套接字](https://developer.mozilla.org/en/WebSockets)，因为这比推送更容易且性能更好。

# excel-formula - 使用 EXCEL 选择区域中的特定单元格

> ID：11020293
> 
> 赞同：2
> 
> 时间：2012-06-13T17:33:59.340
> 
> 标签：excel-formula

是否可以在命名范围内选择特定单元格。我想通过 excel 公式选择一个特定的单元格。例如，假设我有一个包含 3 个包含三个值的单元格的范围：House、Hotel、Cottage。范围名称是 Homes。有没有办法在 excel 公式“=Homes(1,1)”中编写来获得值“House”或类似的东西。我知道如何在 VBA 中做到这一点，但我不想为此使用这种东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:44:48.007

您想要的功能是“INDEX”功能。

```
=INDEX(Homes,1,1) 
```

# jsf - Updatable composite component?

> ID：11020297
> 
> 赞同：0
> 
> 时间：2012-06-13T17:34:19.630
> 
> 标签：jsf, primefaces, components, composite

I have a problem with a composite component.

This component uses the componentType attribute of the interface declaration to bind the component (and its attributes) to a backing bean.

This works as long as the composite component attributes are not updated.

When I look closely at the logs, it seems that the backing bean attributes are always updated with the initial value of the attributes.

My xhtml component looks like :

```
<composite:interface componentType="timelineMandats">
    <composite:attribute name="augmentedSen" type="fr.senat.beans.AugmentedSen" required="true"/>
    <composite:attribute name="timelineWidth" required="false" default="800"/>
    <composite:attribute name="dateMin" required="false" type="java.util.Date"/>
    <composite:attribute name="dateMax" required="false" type="java.util.Date"/>
    <composite:attribute name="highlightDate" required="false" type="java.util.Date"/>
    <composite:attribute name="forceMinMax" required="false" default="false"/>
  </composite:interface>
  <composite:implementation>
<p:outputPanel>
    <p:scrollPanel style="width:820px; height:200px;text-align:center;">
      <p:graphicImage id="imgTimeline" value="#{cc.timelineSenatoriaux}"/>  
    </p:scrollPanel>
    <p:panelGrid columns="4">
      <h:outputText value="Intervalle :"/>

      <p:calendar value="#{cc.dateMin}" pattern="dd/MM/yyyy" mode="popup" showOn="button">
    <p:ajax event="dateSelect" update="imgTimeline"/>
    <p:ajax event="change" update="imgTimeline"/>
      </p:calendar>

      <p:calendar value="#{cc.dateMax}" pattern="dd/MM/yyyy" mode="popup" showOn="button">
    <p:ajax event="dateSelect" update="imgTimeline"/>
    <p:ajax event="change" update="imgTimeline"/>
      </p:calendar>

      <p:commandButton value="Mettre à jour" update="imgTimeline"/>
    </p:panelGrid>
</p:outputPanel>
  </composite:implementation> 
```

The backing bean is declared like :

```
@FacesComponent("timelineMandats")
public class TimelineMandats extends TimelineBase {

AugmentedSen asen;

public AugmentedSen getAugmentedSen() { return asen; }
public void setAugmentedSen(AugmentedSen asen) { this.asen = asen; }
// other accessors and stuff
} 
```

Its base class derives from UIComponentBase and extends NamingContainer :

```
public class TimelineBase extends UIComponentBase implements Serializable,NamingContainer {
...
} 
```

I also tried to derive from UINamingContainer, UIComponent, etc.

The "AugmentedSen" type is serializable and used in many other places.

The composite component is called with el expressions as some parameters :

```
<sen:timelineMandatsSenateurs augmentedSen="#{selectionContext.selectedSen}" timelineWidth="700" forceMinMax="true"/> 
```

I can see in the logs that attributes are properly set, but that the value set never changes along with the result of the el expression evaluation. The value of selectedSen changes as the user picks an item in another component.

What surprises me is that if I remove the componentType attribute of the interface declaration and just output the cc.attrs.augmentedSen value, it is properly updated. I can understand that only one instance of the backing bean exists. But why are the attributes not properly updated ?

I tried to chead by giving the composite component instance a parametric id ( something like

```
<sen:timelineMandatsSenateurs id="tl_#{selectionContext.selectedSen.sen.senmat}" augmentedSen="#{selectionContext.selectedSen}" timelineWidth="700" forceMinMax="true"/> 
```

).

I also encapsulated it in a primefaces p:outputPanel with dynamic="true", rendered only when the parameter is not null, but this changes nothing.

```
<p:outputPanel id="graph" dynamic="true" rendered="#{not empty selectionContext.selectedSen}">
    <sen:timelineMandatsSenateurs augmentedSen="#{selectionContext.selectedSen}" timelineWidth="700" forceMinMax="true"/>
</p:outputPanel> 
```

So how can I put it so that the EL expression passed as parameter is reevaluated and the attribute properly updated ?

Many thanks in advance.

I am using :

*   tomcat 6.0.33
*   MyFaces 2.1.7
*   PrimeFaces 3.2
*   CODI 1.0.5
*   OWB 1.1.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:41:13.637

我已经检查了问题，您需要做的是使用 StateHelper 方法将属性实现到组件类中，否则将无法保存和恢复属性。

看一眼：

[http://svn.apache.org/repos/asf/myfaces/core/trunk/api/src/main/java/javax/faces/component/UIOutput.java](http://svn.apache.org/repos/asf/myfaces/core/trunk/api/src/main/java/javax/faces/component/UIOutput.java)

在那里，你会看到如何去做。但是我认为在您的情况下，根本不需要在组件中实现 augmentedSen 属性，而是使用存储的 ValueExpression 来查找正确的 bean。如果“augementedSen”是复合组件的“附加对象”，类似于转换器或验证器或行为，那么将其实现到组件类中是有意义的。

# java - 以编程方式从“res/raw”或 assets 文件夹访问 PDF 文件以使用给定的方法进行解析

> ID：11020299
> 
> 赞同：1
> 
> 时间：2012-06-13T17:34:27.337
> 
> 标签：java, android, pdf, android-resources, android-assets

# 以编程方式从“res/raw”或 assets 文件夹访问 PDF 文件以使用给定的方法进行解析

## 解释：

现在，该程序从文件管理器访问文件，该文件管理器采用选定的文件路径并将其设置为“mFilename”EditText 字段。下面的显示 PDF 按钮侦听器显示字符串“pdffilename”被分配了包含在“mFilename”EditText 字段中的字符串。PdfViewerActivity 已启动，字符串“pdffilename”作为 Extra 传递。在 onCreate() 中检查意图是否为空。这是我认为可以/应该做出改变的地方。字符串 'pdffilename' 分配了您在下面看到的内容。我想要做的是以两种方式之一存储 PDF 文件......在“res/raw/example_folder/example.pdf”或资产文件夹中。我想用我存储这些 PDF 文件的路径以编程方式分配“pdffilename”。

**所以基本上...**

*   我想将 PDF 文件存储在“res/raw/folder_example/example.pdf”或资产文件夹中
*   我想从代码中访问这些文件，因为我不需要使用文件管理器
*   无论如何，这将是最大的帮助，我很擅长 Java，但我绝不是超级明星，所以请用你的代码解释一下

非常感谢您，我将随时回复评论并编辑这篇文章。我希望这篇文章对其他用户有所帮助，因此我将发布解决方案的代码。完成时。再次感谢你！

**在 PdfFileSelectActivity 中显示 PDF 按钮侦听器...**

```
OnClickListener ShowPdfListener = new OnClickListener()
{
    public void onClick(View v)
    {
        mFilename = (EditText) findViewById(R.id.filename);
        String pdffilename = mFilename.getText().toString();
        Intent intent = new Intent(PdfFileSelectActivity.this,
        PdfViewerActivity.class)
        .putExtra(EXTRA_PDFFILENAME, pdffilename);
        startActivity(intent);
    }
}; 
```

**PdfViewerActivity 的 onCreate() 从上面的 show PDF Listener 调用...**

```
Intent intent = getIntent();

if (intent != null)
{
    if ("android.intent.action.VIEW".equals(intent.getAction()))
    {
        pdffilename = storeUriContentToFile(intent.getData());
    }
    else {
        pdffilename = getIntent().getStringExtra(PdfFileSelectActivity.EXTRA_PDFFILENAME);
    }
}

if (pdffilename == null)
    pdffilename = "no file selected";

setContent(null); 
```

**从上面调用的 setContent()（如果需要）...**

```
private void setContent(String password)
{
    try {
        parsePDF(pdffilename, password);
    }
    catch (PDFAuthenticationFailureException e)
    {
        System.out.println("Password needed");
    }
} 
```

**从上面调用的 parsePDF()（如果需要）...**

```
 private void parsePDF(String filename, String password) throws PDFAuthenticationFailureException
    {
        long startTime = System.currentTimeMillis();
        try {
            File f = new File(filename);
            long len = f.length();
            if (len == 0) {
                mGraphView.showText("file '" + filename + "' not found");
            }
            else {
                mGraphView.showText("file '" + filename + "' has " + len + " bytes");
                openFile(f, password);
            }
        }
        catch (PDFAuthenticationFailureException e)
        {
            throw e;
        } catch (Throwable e) {
            e.printStackTrace();
            mGraphView.showText("Exception: "+e.getMessage());
        }
        long stopTime = System.currentTimeMillis();
        mGraphView.fileMillis = stopTime-startTime;

   } 
```

**再次感谢你！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:53:12.070

要将其作为资产的输入流访问：

```
in = new BufferedReader(new InputStreamReader(activity.getAssets().open(yourfile.pdf))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:02:03.970

经过许多小时和相当多的香烟休息后，这里是解决方案。一旦 readToByteBuffer 返回了一个 ByteBuffer，它就像创建一个接收 ByteBuffer 的新 PDFFile 一样简单。

享受...

**ShowPDF 按钮监听器...**

```
OnClickListener ShowPdfListener = new OnClickListener() {
    public void onClick(View v)
    {
        Intent intent = new Intent(PdfFileSelectActivity.this,
        PdfViewerActivity.class);
        startActivity(intent);
    }
}; 
```

**在 onCreate() PdfViewerActivity...**

```
openFile2(readToByteBuffer(this.getAssets().open("test.pdf")), null); 
```

**[从这里](http://www.java2s.com/Code/Android/File/LoadsafiletoaByteBuffer.htm)编辑 readToByteBuffer()**

```
public ByteBuffer readToByteBuffer(InputStream inStream) throws IOException
{
    long startTime = System.currentTimeMillis();
    BufferedReader in = new BufferedReader(new InputStreamReader(this.getAssets().open("test.pdf")));
    StringBuilder total = new StringBuilder();
    String line;
    while ((line = in.readLine()) != null) {
        total.append(line);
    }

    int length = total.length();
    byte[] buffer = new byte[length];
    ByteArrayOutputStream outStream = new ByteArrayOutputStream(length);
    int read;
    while (true) {
      read = inStream.read(buffer);
      if (read == -1)
        break;
      outStream.write(buffer, 0, read);
    }
    ByteBuffer byteData = ByteBuffer.wrap(outStream.toByteArray());
    long stopTime = System.currentTimeMillis();
    mGraphView.fileMillis = stopTime-startTime;
    return byteData;
  } 
```

# android - New Google Plus Navigation?

> ID：11020300
> 
> 赞同：1
> 
> 时间：2012-06-13T17:34:27.820
> 
> 标签：android

Any ideas on how the new navigation in Google Plus is coded (where you hit the "< HOME" button and it pops out a list of activities ("Stream", "Profile", "Messenger", etc)).

I initially have been thinking it is a PopupWindow...

Thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:42:56.240

如果您指的是：

![在此处输入图像描述](../Images/85387d708a507a622a10969888fb13b1.png)

[http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)

那么此时 Android 中没有任何东西可以提供完整的实现。[这篇博文](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)讨论了这种 UI 模式并指出了一些初步的开源实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:38:01.773

单击按钮时，您可以使用`FrameLayout`with`layout_width~=200dp`和任何高度，切换`FrameLayout`操作栏上的和任何其他项目（如选项卡、图标等）的可见性。`<Home`

# gwt - addition of GWT Breaks Cloud SQL JPA using Eclipse GPE

> ID：11020304
> 
> 赞同：0
> 
> 时间：2012-06-13T17:34:44.107
> 
> 标签：gwt, eclipse-plugin, jpa-2.0, google-apps, google-cloud-sql

I've tested multiple times some strange behavior exhibited by Google Plugin for Eclipse (GPE) when running a project both a JPA facet persisting to Google Cloud SQL and GWT. I'm using Eclipse 3.7 Indigo, AppEngine 1.6.5, EclipseLink 2.3 JPA, and GWT 2.4.0.

I successfully set up JPA 2.0 with GPE following the [directions](https://developers.google.com/eclipse/docs/cloudsql-jpatools) . Then, once that's working, I then try to check "use GWT" in the GPE "Google" menu for the project. At that very point, JPA persistence to the Google Cloud SQL breaks. This is reversible by unchecking "use GWT", luckily. I'm using the Cloud SQL for development, not the local MySQL. I want to test that next.

Here is my stacktrace for the connection error that pops up after checking "use GWT". The short of it is: "java.lang.NoClassDefFoundError: Could not initialize class sun.security.pkcs11.SunPKCS11".

```
 [EL Severe]: 2012-06-13 02:47:02.408--ServerSession(4315167)--com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request rdbms.OpenConnection().
Jun 13, 2012 2:47:02 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /jpatest
javax.persistence.PersistenceException: com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request rdbms.OpenConnection().
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at com.myproject.JpatestServlet.doGet(JpatestServlet.java:14)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request rdbms.OpenConnection().
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:518)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:452)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:430)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:493)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:490)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class sun.security.pkcs11.SunPKCS11
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:262)
    at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:244)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:244)
    at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:224)
    at sun.security.jca.ProviderList.getProvider(ProviderList.java:232)
    at sun.security.jca.ProviderList.getService(ProviderList.java:330)
    at sun.security.jca.GetInstance.getInstance(GetInstance.java:157)
    at java.security.Security.getImpl(Security.java:696)
    at java.security.AlgorithmParameters.getInstance(AlgorithmParameters.java:130)
    at sun.security.x509.AlgorithmId.decodeParams(AlgorithmId.java:121)
    at sun.security.x509.AlgorithmId.<init>(AlgorithmId.java:114)
    at sun.security.x509.AlgorithmId.parse(AlgorithmId.java:381)
    at sun.security.x509.X509Key.parse(X509Key.java:168)
    at sun.security.x509.CertificateX509Key.<init>(CertificateX509Key.java:75)
    at sun.security.x509.X509CertInfo.parse(X509CertInfo.java:705)
    at sun.security.x509.X509CertInfo.<init>(X509CertInfo.java:169)
    at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1747)
    at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:196)
    at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:107)
    at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:322)
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:763)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:55)
    at java.security.KeyStore.load(KeyStore.java:1201)
    at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.getTrustStore(LocalURLFetchService.java:190)
    at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.createValidatingScheme(LocalURLFetchService.java:206)
    at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.createHttpClient(LocalURLFetchService.java:252)
    at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.init(LocalURLFetchService.java:298)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.startServices(ApiProxyLocalImpl.java:581)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.access$700(ApiProxyLocalImpl.java:46)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$2.run(ApiProxyLocalImpl.java:564)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$2.run(ApiProxyLocalImpl.java:562)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.getService(ApiProxyLocalImpl.java:561)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.resolveDeadline(ApiProxyLocalImpl.java:233)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.doAsyncCall(ApiProxyLocalImpl.java:214)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.makeSyncCall(ApiProxyLocalImpl.java:147)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:105)
    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:37)
    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:418)
    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:297)
    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getResponseCode(URLFetchServiceStreamHandler.java:150)
    at com.google.api.client.http.javanet.NetHttpResponse.<init>(NetHttpResponse.java:37)
    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:89)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:814)
    at com.google.cloud.sql.jdbc.internal.googleapi.RpcGoogleApi$DefaultGoogleApi.execImpl(RpcGoogleApi.java:346)
    at com.google.cloud.sql.jdbc.internal.googleapi.RpcGoogleApi$DefaultGoogleApi.exec(RpcGoogleApi.java:322)
    at com.google.cloud.sql.jdbc.internal.googleapi.RpcGoogleApi.openConnection(RpcGoogleApi.java:100)
    at com.google.appengine.api.rdbms.dev.LocalRdbmsServiceRemoteDriver.openConnection(LocalRdbmsServiceRemoteDriver.java:206)
    at com.google.appengine.api.rdbms.dev.LocalRdbmsService.openConnection(LocalRdbmsService.java:119)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:498)
    ... 10 more 
```

and here are my connection parameters in the Eclipse run configuration, after adding in GWT:

```
 -remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -logLevel INFO -codeServerPort 9997 -war /home/eric/workspace/jpatest/war -server com.google.appengine.tools.development.gwt.AppEngineLauncher -port 8888 com.myproject.jpatest
Just JPA: --port=8888 /home/eric/workspace/jpatest/war

VM
-Drdbms.password= -Drdbms.user= -Drdbms.database=compass -Drdbms.hosted.instance=ejahn.net:openciss:compasslight -Drdbms.server=hosted -Xmx512m -javaagent:/home/eric/eclipse/appengine-java-sdk-1.6.5/lib/agent/appengine-agent.jar 
```

Thanks in advance for any insight. I'll try to share this with Google as well, since I think it is something they ultimately need to be aware of.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:51:54.187

我终于让它工作了。我实际上不确定最终修复是什么，但确保我的驱动程序在 Eclipse 的数据库开发透视图中都连接良好，确保我的 persistence.xml 没有从原始（下）更改，删除任何 IDE投诉/错误/警告，并确保我的持久性单元被正确定义就可以了。很多活动部件......感谢您的鼓励和想法，jonasr！

```
<property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
<property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://mydomain.net:myappengine:myinstance/mydb"/>
<property name="javax.persistence.jdbc.user" value=""/>
<property name="javax.persistence.jdbc.password" value=""/> 
```

# sql - Returning a list of numbers up to a set value

> ID：11020311
> 
> 赞同：1
> 
> 时间：2012-06-13T17:35:03.903
> 
> 标签：sql, sql-server, tsql

I've seen the following used to return a list of numbers

```
SELECT TOP (SELECT MAX(Quantity) FROM @d) 
       rn = ROW_NUMBER() OVER (ORDER BY object_id)    
FROM   sys.all_columns 
ORDER BY object_id 
```

if the max quantity is 5 then I assume the above returns:

```
rn
1
2
3
4
5 
```

Is there a more elegant, or even canonical, approach within T-SQL to return this list of numbers?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T17:42:32.190

你可以做：

```
SELECT        rn = 1 
  UNION ALL SELECT 2 
  UNION ALL SELECT 3 
  UNION ALL SELECT 4 
  UNION ALL SELECT 5; 
```

当数字是 5，但不是 50 或 5000 时，这是可以容忍的。当您需要更多时，您可以做一些事情，例如使用 CTE 建立一组数字，然后交叉连接以分解该集合（您可以查看几个示例[在这里，在 Inline 1 / Inline 2 下](https://sqlblog.org/2010/07/07/splitting-a-list-of-integers-another-roundup)）。

或者你可以建立一个数字表，假设你可能需要 5 或者你可能需要 100 万：

```
SET NOCOUNT ON;

DECLARE @UpperLimit INT = 1000000;

WITH n AS
(
    SELECT
        x = ROW_NUMBER() OVER (ORDER BY s1.[object_id])
    FROM       sys.all_objects AS s1
    CROSS JOIN sys.all_objects AS s2
    CROSS JOIN sys.all_objects AS s3
)
SELECT Number = x
  INTO dbo.Numbers
  FROM n
  WHERE x BETWEEN 1 AND @UpperLimit;

GO
CREATE UNIQUE CLUSTERED INDEX n ON dbo.Numbers(Number);
GO 
```

然后，当您想要一些数字时，您只需说：

```
SELECT TOP (5) rn = Number 
  FROM dbo.Numbers 
  ORDER BY Number; 
```

显然，使用 sys.all_columns 或任何具有足够行的内置对象避免了创建 Numbers 表的前期步骤（无论如何，出于某种原因，许多人反对）。

*现在，如果有*更优雅的方式来做到这一点，那就太好了，不是吗？您不会在任何当前版本中看到它，但我们有机会在未来版本中看到它。请在此处投票（更重要的是，评论您的用例）：

[http://connect.microsoft.com/SQLServer/feedback/details/258733/add-a-built-in-table-of-numbers](http://connect.microsoft.com/SQLServer/feedback/details/258733/add-a-built-in-table-of-numbers)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-26T21:56:19.523

绝对不是最优雅的，但可能是较大序列的最快方法：

```
WITH
 E1(N) AS (SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL
           SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL
           SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL
           SELECT 1),                 --10E1  or 10 rows
 E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E2  or 100 rows
 E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E3  or 10000 rows
 E8(N) AS (SELECT 1 FROM E4 a, E4 b)  --10E4  or 100000000 rows
SELECT TOP (@DesiredRowCount) N = ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E8
; 
```

没有临时表，没有表读取，您可以自己定义最大值。

[您可以从此处](https://mikeshilkov.wordpress.com/2014/06/03/sql-produce-resultset-with-n-rows/)复制粘贴即用型功能

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-14T19:38:39.917

首先创建一个数字表 0 - 9

```
create table dbo.Digits (digit tinyint not null Primary Key) 
insert into dbo.Digits values (0), (1), (2), (3), (4), (5), (6), (7), (8), (9) 
```

然后您可以生成以下交叉连接以从 1 计数到 100：

```
select
D2.digit * 10 + 
D1.digit + 1 as n
from dbo.Digits D1,
dbo.Digits D2
order by n 
```

要从 1 计数到 1000，您只需添加一个额外的交叉连接：

```
select
D3.digit * 100 +
D2.digit * 10 + 
D1.digit + 1 as n
from dbo.Digits D1,
dbo.Digits D2,
dbo.Digits D3
order by n 
```

从 1 计数到 x（其中 x <= 1000）::

```
select top x
D3.digit * 100 +
D2.digit * 10 + 
D1.digit + 1 as n
from dbo.Digits D1,
dbo.Digits D2,
dbo.Digits D3
order by n 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T18:01:29.333

我过去曾使用过类似的东西——尽管它最多只能使用 100 个左右：

```
WITH Numbers(number) AS (
SELECT 1 number
UNION ALL
SELECT number+1 FROM Numbers WHERE number < 10)
SELECT * FROM Numbers 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-23T09:00:10.753

如果您只希望输出包含一个运行编号作为附加列，则以下内容也可以：

```
select row_number() over (order by (Select 1)) AS RowNum, * from Table_1 where Column_3 = 372 and Column_6 = 2017; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-28T07:40:10.747

根据需要修改 Top 值：

```
SELECT TOP 30 ROW_NUMBER() OVER (ORDER BY [object_id]) 
FROM sys.all_objects 
```

例如，下拉列表显示 NULL 范围，1 - 30 表示受教育年限。

```
<tr>
<td>Education</td>
<td>
<asp:DropDownList ID="EducationDropDownList" runat="server" DataSourceID="sd6"
 DataValueField="Education" DataTextField="Education" 
 SelectedValue='<%# Bind("Education") %>' CssClass="metro" />
<asp:SqlDataSource ID="sd6" runat="server" 
 ConnectionString="<%$ ConnectionStrings:cnYours %>" 
 SelectCommand="SELECT NULL AS Education UNION ALL SELECT TOP 30 ROW_NUMBER() OVER (ORDER BY [object_id]) FROM sys.all_objects" 
 SelectCommandType="Text" />
</td>
</tr> 
```

# xml - How to read a part of an XML as an XML in SQL Server 2008 R2

> ID：11020312
> 
> 赞同：4
> 
> 时间：2012-06-13T17:35:06.230
> 
> 标签：xml, tsql, sql-server-2008-r2, xquery

I am using SQL Server 2008 R2 and my stored procedure takes in a structured XML which has multiple levels like this:

```
DECLARE @XML xml = 
'<Main>
    <User id="1">
        <Departments isSingle="0">
            <Department id="1">Admin</Department>
            <Department id="2">HR</Department>
            <Department id="3">Development</Department>
        </Departments>
    </User>
    <User id="2">
        <Departments isSingle="1">
            <Department id="1">Admin</Department>            
        </Departments>
    </User>
</Main>' 
```

From the above example I want to get 2 columns for Users with multiple departments (isSingle="0") where first column is the user id and second column is the whole `<Departments>` XML.

I can get the user id with the following query but how to get the Departments section as an XML:

```
SELECT
      T.C.value('(../@id)','int') AS UserID
    , T.C.value('(../Departments)[1]','nvarchar(max)') AS DepartmentsXML 
FROM 
@XML.nodes('/Main/User/Departments[@isSingle="0"]') AS T(C) 
```

It does not allow me to use `xml` as datatype in place of `nvarchar(max)`

If details are not clear let me know and I will try to refine it. Any help is appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:19:16.853

你很接近 - 只需`.query('.')`用于你的第二列：

```
SELECT
      T.C.value('(../@id)','int') AS UserID, 
      T.C.query('.') AS DepartmentsXML 
FROM 
@XML.nodes('/Main/User/Departments[@isSingle="0"]') AS T(C) 
```

这将返回`.nodes()`调用选择的 XML 片段作为 XML。

# java - 32 bit libraries with a 64 bit JVM

> ID：11020315
> 
> 赞同：1
> 
> 时间：2012-06-13T17:35:23.557
> 
> 标签：java, linux, eclipse, architecture

So, I am currently wrestling with my local IT support at work, trying to decide if I need x32 or x64 bit Red Hat Enterprise Linux (RHEL) in my new development environment.

I am curious: **What are the pros/cons of each system architecture**? I will be using primarily Eclipse to do my coding, with several command line utilities to assist. (Git, ANT, etc.) I will also be using numerous plugins, such as EGit, Window Builder Pro, and others.

The IT guy is worried that if i ask for x64 now, in a week I'll be calling him back asking for x32 because some piece of software I need isn't supported.

Thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:39:45.203

选择 64 位。

Eclipse 和 java 工作正常。

您可能有奇怪的旧版 32 位二进制文​​件，但如果您安装 32 位库，它也可以正常运行。

巨大的优势是你可以在一个进程中拥有超过 3GB 的内存——根据我的经验，在做 java 的事情时非常重要；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:36:54.530

优点：可以访问更多内存。

缺点：您需要使用任何本机库的 64 位版本。

# matlab - How to change the font size of the second y axis of a MATLAB subplot fig file without the original data?

> ID：11020316
> 
> 赞同：2
> 
> 时间：2012-06-13T17:35:24.593
> 
> 标签：matlab, plot, figure, matlab-figure

I was given MATLAB figure files with four subplots. The last subplot has two y axes, and I need to change the font size of the second y axis. I do not have the original data, only the figure files. How do I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:28:44.857

首先让我们创建一个类似于您描述的图形，并将其保存到一个图形文件：

```
for i=1:3
    subplot(2,2,i)
    plot(rand(10,1))
end
subplot(224), plotyy(1:10, rand(10,1), 1:10, randn(10,1))

hgsave myfigure.fig 
```

现在我们从文件中加载图形，并寻找 PLOTYY 的第二个轴。一旦我们有了它的句柄，我们就可以改变我们想要的任何属性。

```
hFig = hgload('myfigure.fig');
hAx = findobj(hFig, 'type','axes', '-and', 'YAxisLocation','right');
set(hAx, 'FontSize',16, 'XTick',[]) 
```

请记住，PLOTYY 的工作方式是创建两个叠加的轴，每个轴都有自己的 x/y 标签。这就是为什么我在更改字体大小时第二次抑制 x-labels，以避免看到两组标签彼此重叠（每组标签的字体大小不同）。

![截屏](../Images/468460c256d1fd19041e7f4a28b3408d.png)

# ruby-on-rails - Ruby on Rails 形成第三个模型的路径

> ID：11020320
> 
> 赞同：0
> 
> 时间：2012-06-13T17:35:38.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, networking, network-programming

我正在为我的建筑物中的网络绘制地图。我有单独的地板模型工作，当您单击显示方法时，它会列出每个开关。然后我想拥有它，以便您可以单击每个交换机以查看每个交换机端口上的插孔号。由于我问了另一个问题，我对开关的工作有了看法，但现在我一直试图在同一个节目中展示千斤顶。这是我的千斤顶部分（app/views/jacks/_jacks.html.erb）：

```
<%= form_for <WhatDoIPutHere?> do |f| %>
  <div class="field">
    <%= f.label :number %><br />
    <%= f.text_field :number %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

现在我知道我需要运行一个 rake 路线来找出路径。这是我的 rake 路线结果：

```
floor_switch_jacks GET    /floors/:floor_id/switches/:switch_id/jacks(.:format)         jacks#index
                   POST   /floors/:floor_id/switches/:switch_id/jacks(.:format)          jacks#create
new_floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/new(.:format)      jacks#new
edit_floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/:id/edit(.:format) jacks#edit
 floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#show
                   PUT    /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#update
                   DELETE /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#destroy
    floor_switches GET    /floors/:floor_id/switches(.:format)                           switches#index
                   POST   /floors/:floor_id/switches(.:format)                           switches#create
  new_floor_switch GET    /floors/:floor_id/switches/new(.:format)                       switches#new
 edit_floor_switch GET    /floors/:floor_id/switches/:id/edit(.:format)                  switches#edit
      floor_switch GET    /floors/:floor_id/switches/:id(.:format)                       switches#show
                   PUT    /floors/:floor_id/switches/:id(.:format)                       switches#update
                   DELETE /floors/:floor_id/switches/:id(.:format)                       switches#destroy
            floors GET    /floors(.:format)                                              floors#index
                   POST   /floors(.:format)                                              floors#create
         new_floor GET    /floors/new(.:format)                                          floors#new
        edit_floor GET    /floors/:id/edit(.:format)                                     floors#edit
             floor GET    /floors/:id(.:format)                                          floors#show
                   PUT    /floors/:id(.:format)                                          floors#update
                   DELETE /floors/:id(.:format)                                          floors#destroy
        home_index GET    /home/index(.:format)                                          home#index
              root        /                                                              home#index 
```

我的问题是如何阅读 rake 路线以找到 form_for 行的正确语法？我有同样的问题让我的切换视图首先工作。如果这是一个简单的问题，并且有一个指南，请随时将我发送给那个。我似乎找不到一个专门针对这个的。

提前感谢您的帮助！

编辑：

```
class JacksController < ApplicationController

  def create
    @switch = Switch.find(params[:switch_id])
    @jack = @switch.jacks.create(params[:jack])
    redirect_to switch_path(@switch)
  end

  def destroy
    @switch = Switch.find(params[:switch_id])
    @jack = @switch.jacks.find(params[:id])
    @jack.destroy
    redirect_to switch_path(@switch)
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:50:42.500

您可以为嵌套模型设置嵌套表单。

```
form_for @floor do |f|
  f.fields_for :switches do |g|
    g.fields_for :jacks do |h|
      h.label :number
    end
  end
end 
```

# string - Grails 在领域模型中引用对象

> ID：11020321
> 
> 赞同：0
> 
> 时间：2012-06-13T17:35:40.407
> 
> 标签：string, performance, grails, object, dns

我有一个简单的问题，我在网上找不到答案。以下哪个领域模型更有效：

```
class Text {

    User author

    static constraints = {}
}

class Text {

    String author

    static constraints = {}
} 
```

用户对象将用户名作为字符串包含在其中。但哪个更有效率？保存字符串并搜索对象还是保存对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:48:42.423

当您使用标准查询时，第一个选项会给出更准确的结果，而且它也会很有效，JVM 比较对象哈希码而不是在查询时比较字符串更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:39:21.817

好吧，如果您使用一个对象，它往往会让您的生活更轻松，尤其是在您的应用程序增长的情况下。但是，如果这个应用程序没有机会增长，那么就没有理由只使用其中包含字符串作者的对象（这只是另一个没有任何目的的间接级别）。为了性能，使用 User 更好，因为它在一对一关联中默认使用[延迟加载](http://grails.org/doc/latest/ref/Database%20Mapping/lazy.html)，并且在加载 Text 对象时不会加载 User 对象，因此只有在请求时才拥有 User 。此外，它是更好的 OOP。如果您谈论的是在这些域中查询作者的性能，那是一回事。

# php - PHP preg_split，表达式 i 大括号并保存分隔符

> ID：11020322
> 
> 赞同：3
> 
> 时间：2012-06-13T17:35:43.917
> 
> 标签：php, regex, delimiter, preg-split

我已经为此苦苦挣扎了半天，似乎找不到答案。请帮助一个菜鸟。:)

我有一个字符串，它由几个大括号中的句子组成。它看起来像这样：

{Super duper extra text.} {真棒另一个文本！} {我们又来了......}

现在我想拆分它。

我发现我可以搜索 .} { 等模式。所以我这样做了：

```
$key = preg_split('/[!?.]{1,3}\} \{/',$key); 
```

但是这样我失去了分隔符，我失去了所有那些 . ！? 等在句末。

我试着这样做：

```
$key = preg_split('/([!?.]{1,3}\} \{)/',$key, -1, PREG_SPLIT_DELIM_CAPTURE);
$sentences = array();

for ($i=0, $n=count($key)-1; $i<$n; $i+=2) {
$sentences[] = $key[$i].$key[$i+1]."<br><br>";
} 
```

但是这段代码永远不会加载，所以我认为它有问题。但是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:38:18.910

您不需要拆分它，只需调用`preg_match()`它即可。匹配的组将产生一个数组。分组在 内的表达式`()`匹配`[^}]+`直到但不包括下一个的所有字符`}`。您想要的输出值将在`$matches[1]`子数组内。

```
$input = "{Super duper extra text.} {Awesome another text!} {And here we go again...}";
$matches = array();
preg_match_all('/\{([^}]+)\}/', $input, $matches);
print_r($matches);

Array
(
    [0] => Array
        (
            [0] => {Super duper extra text.}
            [1] => {Awesome another text!}
            [2] => {And here we go again...}
        )

    [1] => Array
        (
            [0] => Super duper extra text.
            [1] => Awesome another text!
            [2] => And here we go again...
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:39:55.730

我怀疑你需要`preg_split()`这个。根据您的描述，听起来像：

```
 $array = explode('} {', trim($string, '{}')); 
```

...将完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T13:12:12.180

试试这个工作，在中间大括号正斜杠之前使用。

```
$keywords = preg_split("/[\{\}]/", "{hypertext} language, programming");
print_r($keywords); 
```

# c - 存储大型 B 基数的最佳方法？

> ID：11020323
> 
> 赞同：4
> 
> 时间：2012-06-13T17:35:54.977
> 
> 标签：c, algorithm, largenumber, number-systems

存储大型 B 基数的最佳方法是什么，以便可以有效地完成右移和检查最低有效位等操作？

实际上，我遇到了一个面试问题，上面写着

```
Given two numbers N and K such that 0<=N<=1000 and 0<=K<=1000^1000\. I need 
to check that whether N^N = K or not. For example:

if N=2 and K=4 , 2^2 = 4 so return true;
if N=3 and K=26 , 3^3 != 26 so return false 
```

我在想的是，如果我考虑`base N number system`, then`N^N`将相当于`1 followed by N zero`in it。例如 - 对于 N = 2，2^2 = 100（以 2 为底），对于 N=3，3^3 = 1000（以 3 为底）。然后我可以轻松地编写一个函数来判断是否`K = N^N`。

```
int check(unsigned long int N, unsigned long int K) 
{
    unsigned long int i;
    for (i=0; i<N; i++) 
    {
        if (K%N != 0) //checking whether LSB is 0 or not in base N number system 
           return 0;
        K = K/N; //right shift K by one. 
    }
    return (K==1);
} 
```

现在这个函数有两个主要问题：

```
1) An unsigned long int is not sufficient to store large numbers of range 0 
to 1000^1000.
2) The modulus and the division operations makes it every less efficient. 
```

为了提高效率，我正在寻找某种方法来表示大的基数 N 数字，以便我可以有效地执行右移和检查最低有效位操作。有没有人遇到过这样的事情？或者有人知道有效解决这个问题的任何其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:16:17.893

要检查相等性，您实际上不必进行高精度算术 - 您可以使用[http://en.wikipedia.org/wiki/Chinese_remainder_theorem](http://en.wikipedia.org/wiki/Chinese_remainder_theorem)。找到足够的素数以确保它们的乘积大于 N^N，然后依次检查 N^N 与 K 模数每个素数。

在实践中，我可能会使用 Java BigInteger 包来进行简单的计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:30:47.697

根据面试官的不同，有一些答案可能会被接受。如果其中任何一个不被接受，那么希望面试官会迅速让你提出其他建议。

*   使用, 并用代替 进行`gmp`除法和模数，或者只计算并与 比较。这是最简单的工作。`mpz_t``unsigned long``N^N``K`
*   编写您自己的大数库，可能使用以 10 为基数而不是以 2 为基数的内部表示，如果输入以 10 为基数，并且认为坚持使用它可能比首先转换为二进制更快。当然它不需要是一个完整的算术库，你真正需要的只是除法与余数。
*   发明一些可以在开始之前进行的快速测试，以避免在某些方面`K`遥不可及时进行大量工作。`N^N`例如，测试是否`log(K) / N`近似等于`log(N)`，以最方便输入的任何基数取对数。或者测试多少次`K`并且`N`可以被方便的数字整除，例如`2`or `10`：如果`K`不能被整除的`N`倍数是 的倍数`N`，那么它显然是错误的。或者测试它们是否等于模一些小的数字，比如`ULONG_MAX`或`1000000`. 不幸的是，这种事情只会加速它们不相等的某些情况，它会减慢其他一切，包括它们的情况。因此，这可能会适得其反，具体取决于您期望的输入。

我不知道，麦克多维拉的回答可能是最好的，也可能不是最好的。特别有希望的是，您只需要生成一次素数（当您编写程序时），并且从 1009 开始的 1000 个素数已经足够给定了`N <= 1000`。更大的素数意味着更少的需要，因此更少的工作，特别是如果它们没有大于 的平方根`ULONG_MAX`。通过平方或等价的取幂来获得`N^N`模每个素数，并`K`在输入的任何基础上一次做几个数字。

为了真正的闪光，对于每个预先选择的素数`p`，您可以编写（或让编译器为您编写）一个模 p 运算，它比适用于任何除数的一般整数模运算更快。也就是说，使用一个体面的编译器`i % 1009`可能比编译时未知`i % j`的值要快`j`，但在运行时结果为 1009。但请注意，速度上的差异可能无法证明（比如说）调用它的成本通过函数指针。因此，利用它可能需要一些难看的重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:55:33.610

> 给定两个数字 N 和 K，使得 0<=N<=1000 和 0<=K<=1000^1000。我需要检查 N^N = K 是否。

很大程度上取决于这些数字在提供给您的代码时是如何存储的。假设它们是文本格式，我会保持这种方式，并创建一个包含 1001 个字符串的数组来存储 N^N 值。您可以使用任意精度的算术命令行程序，例如`bc`一次性创建这些字符串，在循环中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:39:22.620

由于 1000^1000 中只有 1000 个“好”值（而且它们之间的距离会很远），因此您可以先使用一些对数近似来猜测*N*。之后，您最多需要进行一次精确检查（例如，使用一些 bignum 库）。

这个对数不一定要精确，甚至*strlen()*也可以是足够接近的近似值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T18:11:33.153

为什么要将数字转换为基数 N？

您可以继续除以 N。如果您在 N 个这样的除法之后得到 1，那么它就是 N^N。否则不是。

您必须将 K 存储为字符串并实现除法运算。

```
divide(k,n):
  c = ''
  a = ''
  for i in k:
    c = c+i
    a = a+ str(int(c)/ int(n))
    c = str(int(c) % int(n))
 return a 
```

这是在 python 中，你可以在 C 中实现类似的东西

# php - Codeigniter 表单验证外部回调

> ID：11020326
> 
> 赞同：4
> 
> 时间：2012-06-13T17:36:09.173
> 
> 标签：php, codeigniter, model, callback, validation

我需要检查`user_id`插入的是否存在。我打算在 Codeigniter 表单验证中使用回调，但它们需要在控制器中进行验证的函数。我在跨多个控制器的许多页面上使用它，所以我想我会在模型中这样做。Codeigniter 不支持这一点。

[http://codeigniter.com/forums/viewthread/205469/](http://codeigniter.com/forums/viewthread/205469/)

我发现了这一点，但每次验证似乎有很多代码。我经常使用它，所以我不希望每次都使用那么大的代码。

如何使用尽可能少的代码从模型运行表单验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T17:52:40.767

扩展`CI_Form_Validation`. 这样，您将能够像所有其他 Codeigniter 验证函数一样调用回调。

# iphone - 何时在 iOS 中使用 CoreData 显式保存？

> ID：11020330
> 
> 赞同：2
> 
> 时间：2012-06-13T17:36:13.173
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我目前正在为 iPad 开发一个简单的 CoreData 应用程序，但我不确定何时必须明确保存。我知道有自动保存；但是，我觉得我需要明确保存以确保我的程序不会崩溃。以下是该计划的简要概述：

~ 这是一个表单程序，向用户提供一组文本字段和分段控件以供填写。（想想一个人填写调查，或回答有关他们的姓名、年龄等问题）。

~ 可以填写任意数量的这些字段。它们都不是强制性的。

~ 用户可以随时保存和加载他们的表单，他们可以同时保存多个不同的表单。他们可以删除他们保存的文档

~ 我目前使用核心数据存储这些数据，其中一个实体对象代表一个表单。此实体对象包含用户已完成的所有字段的列表以及他们对每个字段的响应。

~ 我也有这个实体对象的 NSManagedObject 子类。因此，每次填写一个字段时，我都会做一些事情，例如`currentForm.name = textfield.text`.

好的，所以我的问题是，我什么时候必须明确保存？如果我编写诸如`currentForm.name = textfield.text`核心数据执行立即保存之类的代码，还是我必须明确告诉它这样做（假设我不想等待自动保存）？还有其他时候我可能需要保存吗？删除存储的文档后是否必须保存？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:46:01.680

因此，没有“自动保存”，碰巧Apple设置的Core Data模板包含一个在应用程序关闭时的保存例程，这更像是一个故障保险，以确保您的用户不会丢失任何数据。

每当您的用户明确保存某些内容或您认为有必要时，您都应该调用 save 。

用户填写完表格后，我会调用 save 。

> currentNotification.name = textfield.text 核心数据是否执行立即保存，还是我必须明确告诉它这样做（假设我不想等待自动保存）？

不，更改将在您的 NSManagedObjectContext 中进行，但是在该上下文上显式调用 save 之前，数据不会持久保存到您的持久性存储中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:47:40.143

我没有听说过 Core Data 自动保存？每当您想保留数据时，都应该在 NSManagedObjectContext 上调用 save 。这是另一个与您类似的问题：[Auto-save with Cocoa and Core Data](https://stackoverflow.com/q/1500327/294661)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:45:15.343

这是你如何保存

```
NSError *error;

    if (![[AppDelegate managedObjectContext] save:&error]) 
{
        NSLog(@"there was an error in Save:%@",error);
    } 
```

我会“尽早并经常”保存，或者至少保存在 didEnterBackground 的通知中

# iphone - 如何在所有子类初始化后执行操作？

> ID：11020338
> 
> 赞同：2
> 
> 时间：2012-06-13T17:36:50.710
> 
> 标签：iphone, objective-c

我有一组 Objective-C 类，它们被各种不同的类在各种不同的深度进行子分类。初始化整个对象后（所有子类的 init 函数都已完成），我需要运行“更新缓存”方法，然后根据需要被子类覆盖。

我的问题：由于我的类树有多种不同的继承深度，没有一个地方可以放置 [self UpdateCache] 并且我可以确定没有未初始化的子类。唯一可能的解决方案是在每个类初始化之后调用 [super init]，以便始终最后调用父类。我想避免这种情况，因为这违反了编写 Objective-C 的所有准则。这个问题有什么干净的解决方案吗？

这是一些示例代码：

```
@interface ClassA : NSObject

-(void)UpdateCache
@end

@interface ClassB : ClassA

-(void)UpdateCache
@end

@interface ClassC : ClassB

-(void)UpdateCache
@end 
```

现在对于实现，我们需要以某种方式在我们知道所有子类都已初始化之后调用 UpdateCahce，**而不管哪个类已被初始化**

```
@implementation A
-(id)init
{
   if(self = [super init])
   {
       // Placing [self UpdateCache] here would make it be called prior to 
       // B and C's complete init function from being called.
   }
}

-(void)UpdateCache
{

}

@end

@implementation B
-(id)init
{
   if(self = [super init])
   {
       // Placing [self UpdateCache] would result in UpdateChache not being
       // called if you initialized an instance of Class A
   }
}

-(void)UpdateCache
{
   [super UpdateCache];
}

@end

@implementation C
-(id)init
{
   if(self = [super init])
   {
       // Placing [self UpdateCache] would result in UpdateChache not 
       //being called if you initialized an instance of Class A or B
   }
}

-(void)UpdateCache
{
   [super UpdateCache];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:17:51.020

与其在初始化后立即更新缓存，不如在第一次使用之前立即更新它？也许您可以在 init 中`cacheIsDirty`设置一个布尔实例变量。然后，如果缓存脏`TRUE`，您的缓存获取器首先调用。`updateCache`假设您总是使用 getter 而从不直接使用实例变量（这在 Objective-C 中是一种很好的做法），客户端应该不会注意到差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:44:50.763

您的子类是否*需要*唯一的 init 方法签名？（例如，初始化对象所需的子类特定参数）如果没有，遵循简单的类似工厂的设计模式可能会很好。

添加父类/基类的示例：

```
+(id)buildSelf {
    YourParentClass* obj = [[[self alloc] init] autorelease];
    if (obj) {
        [obj updateCache];
    }
    return obj;
} 
```

如果需要，向它添加参数，供所有子类使用。

同样，如果您的子类需要支持唯一的 init 方法签名，那么这将无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:46:02.260

声明一个虚方法并在需要时调用它......

并且由于这是目标 c，请参阅[在 Objective-C 中实现纯虚拟方法](https://stackoverflow.com/questions/5222083/implement-a-pure-virtual-method-in-objective-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:51:44.793

是的，不久前我问了一个类似的问题……您可以将“挂钩”/“代理”添加到对象的实例中，以覆盖`-forwardInvocation:`选择器并执行您想要的操作。最初的问题是[here](https://stackoverflow.com/questions/8763028/how-can-i-make-every-message-an-object-receives-thread-safe)，我对此的回答是被接受的。

# facebook - 预定帖子的 Facebook 身份验证

> ID：11020341
> 
> 赞同：0
> 
> 时间：2012-06-13T17:36:56.880
> 
> 标签：facebook, authentication, facebook-graph-api, rest, authorization

假设我从用户那里获得了一个授权令牌，稍后我将在我的 cron 作业中使用它来将帖子发送到用户的墙上。如何处理令牌过期的情况，我只是在将来尝试将预定信息发布到用户墙时才发现它？这是否意味着我应该失败，并要求用户手动重新授权应用程序？或者有什么方法可以精确地使用 Facebook API 创建预定的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:46:50.477

您实际上不需要用户访问令牌来发布预定的帖子。一旦您`publish_stream`从用户那里获得了扩展权限，您就可以使用应用访问令牌随意发布帖子。

如果您的帖子因 Facebook 的 OAuth 异常而失败，那么您知道用户做了一些撤销您权限的事情，您可以尝试让他们重新使用您的应用进行身份验证。这里的诀窍是你如何联系用户？

如果您获得了他们的电子邮件地址（在获得`email`扩展权限后），那么您可以向他们发送电子邮件。

如果他们仍然安装了您的应用程序并且刚刚撤销了 publish_stream 权限并且您的应用程序存在画布，您可以使用应用程序请求通知用户他们需要采取措施以恢复预定的帖子。或者，您可以在他们下次碰巧访问您网站上的页面时向他们发送某种警报消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:10:38.640

是的，如果你失败了，你必须要求用户重新验证你的应用程序。这涉及用户从 Facebook 中卸载您的应用程序的用例。

# c# - 将 Oracle 数据类型映射到 C# 属性类型

> ID：11020343
> 
> 赞同：1
> 
> 时间：2012-06-13T17:37:09.037
> 
> 标签：c#, .net, oracle, orm

在创建与 NUMBER(6, 3) 类型的 Oracle 列相对应的属性时，在决定创建相应属性的数据类型（Double、Float 或...???）之前应该考虑哪些因素

IOW，使用此 Oracle 列定义：

```
PercentageOfCodersWhoCobbleCobol     NUMBER (6, 3) 
```

...我目前有这样的相应属性：

```
private Double percentageOfCodersWhoCobbleCobol;

public double PercentageOfCodersWhoCobbleCobol
        {
            get
            {
                return this.percentageOfCodersWhoCobbleCobol;
            }
            set
            {
                this.percentageOfCodersWhoCobbleCobol = value;
                NotifyPropertyChanged("PercentageOfCodersWhoCobbleCobol");
            }
        } 
```

...但是该属性应该是浮动的还是其他的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:44:11.117

您也可以使用此堆栈溢出[链接](https://stackoverflow.com/questions/1583150/c-oracle-data-type-equivalence-with-oracledbtype)作为参考。对于您的问题，我认为它应该映射到双精度而不是浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:41:13.837

您只需要存储 6 位数字，`float`就足够了。[该类型`float`的精度为 7 位。](http://msdn.microsoft.com/en-us/library/aa691146%28v=vs.71%29.aspx)

但是，如果您想对这些数字进行一些算术运算（乘法、除法）并将结果写回数据库，那么您应该考虑使用`double`. 此外，如果这些值存储人输入的数字（例如金额），`decimal`则可能需要。

# python - 化学平衡求解器

> ID：11020350
> 
> 赞同：5
> 
> 时间：2012-06-13T17:37:23.863
> 
> 标签：python, chemistry

是否有库（或软件可调用）来实现化学平衡的计算（特别是液相和固相）？（来自 Python，或通过我可以编写的包装器）

例如，给定离子和固体的溶液，如果我改变成分（添加或去除一定量的元素），我想获得下一个平衡。

目前我使用[PHREEQC](http://wwwbrr.cr.usgs.gov/projects/GWC_coupled/phreeqc/)和 Python 中的模块（特别是 Garlicsim）——写这个问题，我刚刚看到该项目被放弃......）来驱动动态模拟。

它有效，但现在，我想更进一步并测试其他算法来处理化学平衡。特别是，我想测试似乎很有希望的 UNIQUAC 和 UNIFAC。

我见过像[DWSIM](http://sourceforge.net/apps/mediawiki/dwsim/index.php?title=Main_Page)这样的项目，但它是面向液气平衡的（它是一个 GUI，用 VB 编写）。

我很乐意在这个主题上获得新的想法！

泽维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:47:14.253

您可以查看[Cantera](http://code.google.com/p/cantera/)，可用于 Python、Fortran、C/C++。它主要用于气体，但具有一些液体和固体功能，如 CHEMKIN，但它是开源和免费的。您也许可以扩展它来做您想做的事情（并将其提交给他们，以便其他人可以使用它）。

# javascript - javascript在提交时替换所有表单字段中的文本

> ID：11020353
> 
> 赞同：1
> 
> 时间：2012-06-13T17:37:37.647
> 
> 标签：javascript, forms, replace, onsubmit

我已经进行了一些谷歌搜索，但无法使其正常工作。我需要做的是查看表单中的所有 TEXT 字段，并将“，”（逗号）的所有实例替换为“ 4;” （转义逗号）提交。

这是表单标签：

```
<form name="buildcourse" id="buildcourse" action="target.htm" method="post" enctype="multipart/form-data" onsubmit="validateForm()"> 
```

这是我的javascript函数：

```
<script language="javascript">
function validateForm(buildcourse){
    $('form input[type="text"]').each(function(){
        this.value = replace(",","&#44;");
    });
}
</script> 
```

很想帮助它工作。抱歉，我完全不懂 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:44:53.303

您可以这样做以拆分`commas`然后重新加入`"&#44;"`

```
$('form input[type="text"]').each(function(){
    this.value = this.value.split(',').join('&#44;')
}); 
```

纯javascript [http://jsfiddle.net/mQrLS/3/](http://jsfiddle.net/mQrLS/3/)

```
var theInputs = document.getElementsByTagName('input');  
for (var i = 0; i < theInputs.length; i++) {
    var node = theInputs [i];

    if (node.getAttribute('type') == 'text') {
        // using split
        //node.value = this.value.split(',').join('&#44;');
        // using regex
        node.value= node.value.replace(/,/g,'&#44;');
    }
} 
```

正如@Radu 提到的那样，用正则表达式替换确实执行得更快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:51:52.683

您的代码的问题是没有全局替换功能。然而，它可以作为任何字符串的方法使用。

```
<form name="buildcourse" id="buildcourse" action="target.htm" method="post" enctype="multipart/form-data"> 
```

（取出内联事件绑定）

```
$('#buildcourse').submit(function() {
    $('form input[type="text"]').each(function(){
        this.value = this.value.replace(/,/g, '&#44;');
    });
});​ 
```

# javascript - javascript日期操作怪异

> ID：11020356
> 
> 赞同：0
> 
> 时间：2012-06-13T17:37:54.667
> 
> 标签：javascript

我想创建两个日期，其中包含一个月的开始日期和下个月的开始日期。这就是我所拥有的：

```
var TheMonth = "6.2012"; // as in june 2012
TheMonth = TheMonth.split(".")

var TheDisplayDate = new Date(parseInt(TheMonth[1], 10), (parseInt(TheMonth[0], 10) - 1), 1);

var TheUpperLimit = new Date(TheDisplayDate.getFullYear(), TheDisplayDate.getMonth(), 1);

//I'm adding a month here but it's not changing the month
TheUpperLimit.setMonth(TheUpperLimit.getUTCMonth() + 1); 
```

问题是 TheUpperLimit 原来是同一日期。我[这里](http://jsfiddle.net/KTXyC/)有一个小提琴要看。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:49:22.633

问题是您使用`getUTCMonth`with`setMonth`而不是`setUTCMonth`. 仅一起使用 UTC 或仅使用非 UTC 方法更正确。当您使用`setMonth`and`getMonth`时，它似乎工作正常。但是，当您使用这些函数的 UTC 变体时，它会给您 2 jul 而不是 1 jul（至少在我的时区）。我建议您使用以下代码来避免时间复杂化：

```
var TheMonth = "6.2012"; // as in june 2012
TheMonth = TheMonth.split(".");
var month = parseInt(TheMonth[0]);
var year = parseInt(TheMonth[1]);
var second_month = month + 1;
var second_year = year;
if (second_month > 12) {
    second_month = 1;
    second_year++;
}

var TheDisplayDate = new Date(year, month - 1, 1);
var TheUpperLimit = new Date(second_year, second_month - 1, 1);
console.log([TheDisplayDate, TheUpperLimit]);
// => [Date {Fri Jun 01 2012 00:00:00 GMT+0400 (MSK)}, 
//     Date {Sun Jul 01 2012 00:00:00 GMT+0400 (MSK)}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:06:15.980

根据您的 nick( `@frenchie`)，您的当地时间可能是法国时间。这意味着`GMT + 2:00`。

例如，当您设置时：

```
new Date(2012,5,1) 
```

这意味着你有：

```
year=2012, month=June, day=1, hours=minutes=seconds=mseconds=0 
```

因为`GMT + 2:00`,`UTC Date`会有`-2`小时偏移。如果你愿意`TheUpperLimit.toString()`，你会看到，你有`Thu, 31 May 2012 22:00:00 GMT`。这意味着，你`UTC Month`是'4'。因此，当您添加“+1”时，您的月份将有“5”，并且是六月。所以没有什么奇怪的。

# java - 在 Eclipse Web 项目（小程序）中找不到类异常

> ID：11020361
> 
> 赞同：0
> 
> 时间：2012-06-13T17:38:13.457
> 
> 标签：java, eclipse, tomcat, applet

我正在尝试在 Eclipse 中创建 Web 应用程序。![请看我的截图。](../Images/9678d766cc41a57af9c460ab05cfc8b8.png)我希望 Eclipse 生成将从 index.html 引用的 .class 文件。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:45:45.070

Eclipse 会自动编译 *.java 文件。确保选择项目 -> 自动构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:47:22.850

1.  为小程序创建新文件夹：webProj->Properties->Java Build Path->Default Output 文件夹
2.  更新applet标签：applet code="SimpleApplet.class" codebase="./applet/" width=400 height=200

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:58:42.563

在与包含 .class 文件的项目相同的路径中应该有一个 bin 或 classes 文件夹。

# javascript - Javascript - 如何将用户输入附加到表单中的新列表项。（如何添加记录）

> ID：11020362
> 
> 赞同：1
> 
> 时间：2012-06-13T17:38:14.370
> 
> 标签：javascript, forms, appendchild, createelement

我正在尝试仅使用 javascript 创建一个待办事项列表。

我希望用户能够将任务添加到他们的待办事项列表中，然后按优先级值排序，即低、中或高。我正在附加用户输入，但不是我想要的格式。我想输出一个新记录，其中包含一个`<li>`元素内的新标签、新复选框输入和优先级的新选择字段。

我开始迷失方向，并相信我的脚本过于复杂了，有人对如何创建新元素并将它们附加到我的脚本有任何建议`<ul>`吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<title>Page title</title>
<style type="text/css">

             #myForm{width: 600px; background: red;}

             #listContent{clear:both}

             legend h3{background:blue; margin-top: 30px;}

             #labels {margin-left: 70px; width:690px;}
             .listLabels{margin-right: 145px; font-family: sans-serif; font-style: italic; font-size: 20px;}

             ul {display: block; width: 500px;  background:blue;}

             li{clear: both; width: 600px; background: purple; list-style-type: none; padding: 2em 2em;}

             .label{display:block; float:left; width: 150px;}

             .checkBox{display: block; float: left; margin-left: 55px; width: 100px; color: green;}

             .selectPriority{display: block; width: 80px; float: right; color: blue;}

       #addMoreContent{clear:both;}

             .newLabel{display:block; float:left; width: 100px;}

             .inputText{display: block; width: 300px; float: left;}

             .addButton{display:block; width: 60px; }            

             #addSection{position: relative; width: 600px; background: brown; bottom:60px; left: 40px; padding-right: 50px; text-align:right;}

             target          

</style>
<script language="javascript">

var counter = 0;

function addNewItem(){
// Target the user input
     var UserInput = document.getElementById('userInputText').value;
     var UserInputString = UserInput.toString();
        if (UserInputString==""){
//Display error if field is left blank
        alert('Please add an item to the To-Do list.');
        }
//Do this if user input is detected
else {
          function CreateLiElement() {  

      var liElement = document.createElement("li");  
            var labelElement = document.createElement("label");
      var checkBoxElement = document.createElement("input");
            var selectElement = document.createElement ("select");
            var optionElement = document.createElement ("option");
            var userOption = document.getElementById ("userOption");  

      labelElement.setAttribute('class', 'label');
      checkBoxElement.setAttribute('type', 'checkBox')
            checkBoxElement.setAttribute('class','checkBox');
            selectElement.setAttribute('class','selectPriority')
            selectElement.setAttribute('name','priority')
            optionElement.setAttribute('value',userOption)   

      liElementItems = labelElement, checkBoxElement, selectElement, optionElement, userOption;  
      document.body.appendChild(liElementItems);  

      }  

          var y=document.getElementById('targetAdd')
      // variable x gets the innerhtml of the element above
      var x=y.innerHTML
      // alert just shows it on the screen. You can do whatever you want with x
      alert(x);

            alert('the function is complete');
            alert(UserInputString);

          var element = document.createElement('label'.className='label');
            var answer = document.createTextNode(UserInputString);
            alert(element)
            document.getElementById("listItems").appendChild(element).className=('label');
            document.getElementById("listItems").appendChild(answer);
            alert('the function is complete');
        }

        /*
            var Priority = new Array(3);
      Priority[0] = "High";
      Priority[1] = "Medium";
      Priority[2] = "Low";
            */
}

</script>
</head>
<body>

            <form id="myForm" name="myForm" action="#" method="POST">
                        <fieldset>
                                    <div id="listContent">                                  
                                                <legend><h3>My Tasks</h3></legend>
                                                     <div id="labels">
                                                                <span class="listLabels"><strong>To-Do</strong></span>
                                                                <span class="listLabels"><strong>Completed</strong></span>
                                                                <span class="listLabels"><strong>Priority</strong></span>
                                                     </div>

                                                        <ul id="listItems" class="listItems"><!-- begin list items -->

                                                                <li>
                                                                    <label class="label">Make Iced Coffee</label>
                                                                    <input class="checkBox" type="checkBox" name="list1" id="list1" />
                                                                    <select class="selectPriority" name="priority">
                                                                                    <option value="low">Low</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="high">High</option>
                                                                  </select>
                                                                </li>

                                                            <li>
                                                                <label class="label">Go take the dog for a run</label>
                                                                <input  class="checkBox" type="checkBox" name="list2" id="list2" />
                                                                    <select class="selectPriority" name="priority">
                                                                                    <option value="low">Low</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="high">High</option>
                                                                  </select>
                                                            </li>

                                                            <li>
                                                                <label class="label">Apply for Jobs</label>
                                                                <input class="checkBox"  type="checkBox" name="list3" id="list3" />
                                                                    <select class="selectPriority" name="priority">
                                                                                    <option value="low">Low</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="high">High</option>
                                                                  </select>
                                                            </li>

                                                            <li>
                                                                <label class="label">Work on JavaScript project</label>
                                                                <input class="checkBox" type="checkBox" name="list4" id="list4" />
                                                                    <select class="selectPriority" name="priority">
                                                                                    <option value="low">Low</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="high">High</option>
                                                                  </select>
                                                            </li>

                                                    </ul><!-- end list items -->
                                    </div><!-- end list content -->

                                    <div id="addMoreContent"
                                                <legend><h3>Add Task</h3></legend>
                                                        <ul>
                                                                <li>
                                                                    <label class="newLabel" for="addTask">New Task:</label>
                                                                    <div id="targetAdd">
                                                                    <input id="userInputText" class="inputText" type="text" />
                                                                    <select id="userOption" class="selectPriority" name="priority">
                                                                                    <option value="low">Low</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="high">High</option>
                                                                  </select>
                                                                    </div>
                                                                </li>
                                                        </ul>
                                                        <br><br>
                                                        <div id="addSection">
                                                        <button id="addItem"  class="addButton" type="button" onClick="addNewItem()">Add</button>
                                                        </div>
                                    </div><!-- end add Content section -->
                        </fieldset>
            </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:41:18.797

`function appendToList(elementLI, ul){ if(elementLI)elementLI.appendChild(ul); }`

`... onclick -> appendToList(myLIST, document.createElement('ul, 'etc'))`

其中“等”是您从文本框中获得的选项...

# php - 使用 Zend_Db Api 实现 where IN 子句

> ID：11020363
> 
> 赞同：2
> 
> 时间：2012-06-13T17:38:17.147
> 
> 标签：php, mysql, zend-framework, zend-db

我正在尝试使用 Zend_Db api 编写以下查询：

```
select * from tableA where id not in (select pid from tableB where x =46 and y='participated'); 
```

**我编写了以下代码以使其正常工作**：

首先，我从 tableB 中获取数组格式的 pid 列表：

```
 $select = $this->select()
    ->from(array('tb' =>'tableB'), array('mylist' => new Zend_Db_Expr('group_concat(tb.pid)' )))
    ->where('x = ?', $xval) //$xval is coming as 46
    ->where('type = ?', 'participated');

    $result = $this->getAdapter()->fetchAll($select);
    error_log("Result of query1 is " . print_r($result, true));

    //Convert to array
    $mylistArr = preg_split('/,/' , $result[0]['mylist'], PREG_SPLIT_NO_EMPTY);
    error_log("value of mylistArr is " . print_r($mylistArr, true));

    //Now get the results from tableA
    $selectta = $this->select()
    ->setIntegrityCheck(false)
    ->from(array('ta' => 'tableA'), array('ta.id', 'ta.first_name', 'ta.last_name'))
    ->where('ta.id not in (?)', $mylistArr[0]);

    $result = $this->fetchAll($selectta);
    error_log("db query result is " . print_r($result, true)); 
```

现在，问题是这样的：形成的最终查询是

```
SELECT `ta`.`id`, `ta`.`first_name`, `ta`.`last_name` FROM `tableA` AS `ta` WHERE (ta.id not in ('197,198,199,200,106,201,202,204,203,205')) 
```

但是，我希望查询如下所示（也就是说，tableB 中的 id 列表不应包含在引号中）：

```
SELECT `ta`.`id`, `ta`.`first_name`, `ta`.`last_name` FROM `tableA` AS `ta` WHERE (ta.id not in (197,198,199,200,106,201,202,204,203,205)) 
```

原因是，当在 IN 子句中传递逗号时，只会选取第一个 id 即 197 来过滤结果。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:45:42.730

请查看他们使用 ZEND 的站点并进行选择... where.. IN...

[如何使用 Zend DB 执行 MySQL IN 子句？](https://stackoverflow.com/questions/8682520/how-to-do-mysql-in-clauses-using-zend-db)

让我们知道怎么回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:46:12.667

我找到了一种实现方式。但不确定这是否是最好的方法：我修改了以下查询：

```
 $selectta = $this->select()
    ->setIntegrityCheck(false)
    ->from(array('ta' => 'tableA'), array('ta.id', 'ta.first_name', 'ta.last_name'))
    ->where('ta.id not in (?)', $mylistArr[0]); 
```

到：

```
 $selectta = $this->select()
    ->setIntegrityCheck(false)
    ->from(array('ta' => 'tableA'), array('ta.id', 'ta.first_name', 'ta.last_name'))
    ->where('not find_in_set(ta.id , ?)', $mylistArr[0]); 
```

它给了我适当的结果。

非常欢迎任何有关改进此答案的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:59:18.340

我需要使用explode 并将逗号分隔的字符串转换为可以传递给where IN 子句的id 数组，而不是使用preg_split。

以下是我做的最终实现：

```
 $select = $this->select()
    ->from(array('tb' =>'tableB'), array('mylist' => new Zend_Db_Expr('group_concat(tb.pid)' )))
    ->where('x = ?', $xval) //$xval is coming as 46
    ->where('type = ?', 'participated');

    $result = $this->getAdapter()->fetchAll($select);
    error_log("Result of query1 is " . print_r($result, true));

    //Convert to array
    $mylistArr = explode(",", $result[0]['mylist']);
    error_log("value of mylistArr is " . print_r($mylistArr, true));

    //Now get the results from tableA
    $selectta = $this->select()
    ->setIntegrityCheck(false)
    ->from(array('ta' => 'tableA'), array('ta.id', 'ta.first_name', 'ta.last_name'))
    ->where('ta.id not in (?)', $mylistArr);

    $result = $this->fetchAll($selectta);
    error_log("db query result is " . print_r($result, true)); 
```

# android - 在对话框中显示 PreferenceFragment

> ID：11020369
> 
> 赞同：3
> 
> 时间：2012-06-13T17:38:46.920
> 
> 标签：android

将应用首选项显示和编辑为对话框的最佳做法是什么？

# java - JSF AJAX URL 参数更新

> ID：11020373
> 
> 赞同：1
> 
> 时间：2012-06-13T17:39:27.540
> 
> 标签：java, ajax, url, jsf, param

我有一个场景，我有一个能够显示数据表的页面。数据表数据由用户选择，但必须能够提供直接 URL 以将特定数据加载到表中。为了实现这一点，我在 URI 中使用参数来确定应该加载的服务 (www.example.com?service=1)。

用户单击一项服务，URL 更改为 www.example.com?service=2，该服务的数据通过 AJAX 加载并显示在页面上。没有回发，只有部分页面刷新。我想避免完整的页面重新加载，因为只有数据表需要重新加载。

1.  我将如何在不重新加载页面的情况下从支持 bean 更新 URL 参数（即从 www.example.com?service=1 到 www.example.com?service=2）？
2.  我将如何在不重新提交页面的情况下阅读新的 URL 参数？

更新

目前我正在重定向整个页面

```
FacesContext.getCurrentInstance().getExternalContext().redirect(url); 
```

并尝试使用

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().‌​get("service"); 
```

然而，这真的不是我想要实现的，因为它重新加载了许多不必要的数据，它使管理页面上的其他属性更加复杂！我想更新参数并阅读它们，但只重新加载数据表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:40:26.013

我是 JSf 的新手，但我认为这会有所帮助，这是一个简单的例子：

假设您有一个`<h:inputText>`带有对象属性的值，例如：

```
<h:form id="formUser">
    <h:inputText value="#{userBean.name}" id="userName" />
</h:form> 
```

如果您需要使用 ajax 调用更新 name 属性：

```
<h:commandButton value="Update user" action="#{userBean.updateUserName}">
    <f:ajax render="formUser:userName" execute="formUser:userName" />
</h:commandButton> 
```

render 属性将使元素在页面上重新加载。执行将使元素设置值，在这种情况下，设置为`name`属性`UserBean`

这样，当您在其上键入名称`inputText`并单击 时`commandButton`，它将执行名称的 set 方法并在视图上重新渲染输入，以便出现新值。

但是，如果您需要`link`这里是这里的[示例](http://www.mkyong.com/jsf2/jsf-2-link-commandlink-and-outputlink-example/)：

```
<h:link value="Login page + Param " outcome="login" >
    <f:param name="username" value="mkyong" />
</h:link> 
```

那是你真正想要的吗？

# internet-explorer - 为什么 Internet Explorer 无法使用 NodeJS 和 Express 下载 PDF？

> ID：11020374
> 
> 赞同：2
> 
> 时间：2012-06-13T17:39:28.283
> 
> 标签：internet-explorer, node.js, pdf, ssl

我有一个使用 NodeJS 构建的网站，它需要提供一些 PDF（以及其他文件）。

由于我无法确定的原因，Internet Explorer 8 第一次无法在 Acrobat Viewer 中完全下载 PDF（有时之后多次）。直接保存文件就可以了，但这并不理想。Chrome 工作正常，虽然我没有测试过其他浏览器。

没有错误消息，除了状态栏停止更新并显示：（ [来源：][[twimg.com](https://p.twimg.com/AvSXKvrCQAE_RIi.png)][）][![已下载（16.33 MB 中的 2.97 MB）：](../Images/2f14030e45f1e04310f6b21958bfbf29.png)](https://i.stack.imgur.com/px1rp.png)

我通过 NodeJS 和 Express (v3, beta2) / Connect 框架提供文件（它是提供文件的 Connect Static 中间件。）我也通过 SSL 提供它，但关闭它似乎没有帮助。

任何想法将不胜感激！谢谢

**编辑**- 包括更多细节：

首先 - 我已经从 Express v2 升级到 v3 以尝试解决这个问题 - 没有这样的运气。

这是提供文件的应用程序路由。静态服务组件确实有效，因此问题似乎在于 IE 如何检索文件或 express 如何将它们提供给 IE。

```
app.get('/store/*', ensureAuthenticated, express.static(__dirname + '/../uploads'));

function ensureAuthenticated(req, res, next) {
    if (req.isAuthenticated()) {    
        return next();
    }
} else {
    res.redirect('/login');
} 
```

至于错误 - 我在 IE 中看不到 404 错误或任何内容。它只是挂着一个空白屏幕，上面的图片显示了左下角状态栏中的下载量。Adobe 最终（约 5 分钟后）失败并发出警告：“此文件已损坏，无法修复”。我知道文件没有损坏，因为偶尔 IE*会*加载它（请参阅下面的 Fiddler 请求）。

在 Fiddler 中，我看到以下内容。 ![来自 IE 的多个 PDF 请求。 2失败，1成功](../Images/30b1acc82ac10c1d2f73e32d9b1fd6b4.png)

前两个请求失败，而第三个请求成功交付了 PDF。

如果还有什么我可以提供的，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:19:37.213

所以，我发现了问题（或者至少是一个或 4 个解决方案）。

我花了一段时间和大量的研究、测试用例和各种各样的东西，但我最终到达了那里。

当 IE8（也可能还有其他浏览器，但我没有进行广泛测试）使用 Adob​​e 9（未经 Adob​​e X 或任何其他版本验证）插件请求 PDF 时，有时它会将整个文件作为一个获取。这是我看到的成功，对应于上面 Fiddler 屏幕截图中的请求 22。如果文件很小，它似乎会抓取整个文件，但在这种情况下，我使用 16MB PDF 进行测试。

在其他情况下，Adobe 将发送此表单的范围标头：

```
Range: bytes=a-b, c-d 
```

其中 ab 是一个范围，而 cd 是一个范围，它看起来是不连续的。

我对 Range 标头的了解并不广泛，所以我不确定这是否有效。我所做的研究表明不是。

无论如何，在 Connect 的 static.js 中，它使用 lib/util.js 中称为 parseRange 的范围解析方法。此方法以下列形式返回一个范围数组：

```
[
   { start: a, end: b },
   { start: c, end: d}
] 
```

在 static.js 中，它调用此方法并将值分配给*range*，然后使用*range[0]*计算范围，从而忽略值*c*和*d*。*a*和*b*之间的范围是从文件中读取并发送到请求的唯一数据。

我相信 Adob​​e 9 然后继续等待更多数据，这导致了我看到的挂起。

**解决方案**

*   最简单的解决方案是删除 static.js 中的标头“Accept-Ranges”
*   我实施的一个更复杂（不一定正确）的解决方案是采用*a*和*c的最小值以及**b*和*d*的最大值来创建一个新范围并在范围检查代码中返回它。这个要点显示了我所做的：[https ://gist.github.com/2930131](https://gist.github.com/2930131)
*   我相信第三种（可能的）解决方案是监视客户端何时继续等待数据并对连接执行某些操作（关闭它，发送更多数据 - 我不确定！）。我真的不知道这将如何工作，但我会尝试将它推荐给可能的人。

第二个解决方案适用于我的用例。我希望如果你偶然发现它对你也有用！

# android - Adobe Flex Mobile 错误 1144：在命名空间 mx.core 中初始化接口方法：IUIComponent 使用不兼容的签名实现

> ID：11020376
> 
> 赞同：1
> 
> 时间：2012-06-13T17:39:36.677
> 
> 标签：android, ios, apache-flex, mobile, air

如果我在这里遗漏了什么，请原谅我，我对 Flex Mobile 开发有点陌生。

有人能告诉我这个错误是什么意思吗？我只是在做这个项目，现在它不会编译。我尝试撤消刚刚所做的更改，没有骰子。

```
1144: Interface method initialize in namespace mx.core:IUIComponent is implemented with an incompatible signature in class MyApp.
myApp.mxml  /MyApp/src  Unknown Flex Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:54:59.993

我重新启动了 Flash Builder，经过几次项目清理和重建，我终于得到了清除错误。

最终，我清除了 MyApp.mxml 文件，进行了清理和构建，将其更改为以下内容：

```
<s:ViewNavigatorApplication>
</s:ViewNavigatorApplication> 
```

然后再次进行清理/构建，然后重新粘贴实际内容，错误神奇地消失了。

所以我不知道究竟是什么导致了这个错误，或者我是如何修复它的，但我已经看到 Visual Studio 作为 .NET 开发人员做了类似的古怪事情。

那好吧。它现在工作，所以我不会抱怨。

# c# - 如何更新/重新加载 DataGridView BindingSource？

> ID：11020384
> 
> 赞同：1
> 
> 时间：2012-06-13T17:40:11.077
> 
> 标签：c#, datagridview

我是 C#、Windows 窗体和 datagridviews 的新手。我有一个选项卡式表单：选项卡 1 显示练习表的数据网格视图；选项卡 2 用于向表中添加新练习。练习表通过 test_ExercisesDataSet、vwexercisesBindingSource、vw_ExercisesTableAdapter 绑定到数据网格视图。

我不确定我需要做什么来重新绑定/刷新绑定源，以便在我切换回选项卡 1 时刷新 datagridview。如果我完全关闭表单并重新启动它，我可以看到新行桌子。

我在 Web 和 StackOverflow 上都看到了很多例子，但我仍然不明白我做错了什么。

顺便说一句，我正在使用 Visual Studio 2010。

任何帮助表示赞赏！

谢谢！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace testTabbedInterface
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public string GetConnectionString()
        {
            return connString;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'test_ExercisesDataSet.vw_exercises' table. You can move, or remove it, as needed.
            this.vw_exercisesTableAdapter.Fill(this.test_ExercisesDataSet.vw_exercises);
            exerciseListDataGridView.DataSource = this.test_ExercisesDataSet.vw_exercises;
        }

        private void InsertExercise(string exerciseName, string exerciseDescription, string exerciseBegin)
        {
            var conn = new SqlConnection(GetConnectionString());
            const string InsertExerciseSql = @"INSERT INTO database.dbo.exercises
                (PK_exerciseUID,
                exerciseName,
                exerciseDescription,
                exerciseBegin,
                exerciseEnd) 
                VALUES 
                (@PK_exerciseUID,
                @exerciseName,
                @exerciseDescription,
                @exerciseBegin,
                NULL)";

            try
            {
                SqlCommand cmd = new SqlCommand(InsertExerciseSql, conn);
                var param = new SqlParameter[4];

                Guid exerciseGUID = Guid.NewGuid();
                param[0] = new SqlParameter("@PK_exerciseUID", exerciseGUID);
                param[1] = new SqlParameter("@exerciseName", exerciseName);
                param[2] = new SqlParameter("@exerciseDescription", exerciseDescription);

                //Convert date(s) to correct format
                DateTime exerciseBeginConverted = Convert.ToDateTime(exerciseBegin);
                param[3] = new SqlParameter("@exerciseBegin", exerciseBeginConverted);

                foreach (SqlParameter t in param)
                {
                    cmd.Parameters.Add(t);
                }

                conn.Open();
                cmd.CommandType = CommandType.Text;
                cmd.ExecuteNonQuery();
                MessageBox.Show("Test/Exercise, " + exerciseName + ", successfully added!", "Success!", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
            catch (SqlException ex)
            {
                string msg = "Error inserting into 'exercises': ";
                msg += ex.Message;
                throw new Exception(msg);
            }
            finally
            {
                conn.Close();
            }
        }

        private void saveExerciseButton_Click(object sender, EventArgs e)
        {
            InsertExercise(exerciseName.Text, exerciseDescription.Text, exerciseBegin.Text);

            this.exerciseListDataGridView.EndEdit();

            tabControl1.SelectTab("testExerciseTab");
        }

        private void addExButton_Click(object sender, EventArgs e)
        {
            tabControl1.SelectTab("exerciseTab");
        }

        private void reloadExListButton_Click(object sender, EventArgs e)
        {
            this.exerciseListDataGridView.Refresh();  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:26:59.317

创建一个 LoadDataGridView 方法：

```
private void LoadDataGridView() {
    // Fill a DataAdapter using the SelectCommand.
    DataAdapter da = null;

    // The Sql code here

    // In case something fails, bail out of the method.
    if (da == null) return;

    // Clear the DataSource or else you'll get double of everything.
    if (exerciseListDataGridView.DataSource != null) {
        exerciseListDataGridView.DataSource.Clear();
        exerciseListDataGridView.DataSource = null;
    }

    // I'm doing this off the top of my head, you may need to fill a DataSet here.
    exerciseListDataGridView.DataSource = da.DefaultView;

} 
```

现在您所要做的就是在 Form1_Load() 和 InsertExcercise() 的末尾调用该方法。如果您必须使用 DataSet，请不要忘记在最后处理 DataAdapter 对象以节省资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:12:04.223

插入后，您必须使用数据库中的信息重新加载数据集。这不是自动的！

# forms - 钛手机：输入tabindex

> ID：11020385
> 
> 赞同：1
> 
> 时间：2012-06-13T17:40:14.140
> 
> 标签：forms, titanium, appcelerator, titanium-mobile

我正在钛手机中构建登录/注册视图。出于动画原因，这些表单在父视图中彼此相邻对齐。如果用户点击“已经有帐户？” 按钮，“注册”表格滑入视图。所有这些东西都很好用。

我不知道如何将类似于 tabindex 的东西分配给表单输入。现在，如果我单击键盘上的“下一步”，焦点会在两种形式之间交替，即使我设置了`enabled=false`.

有没有办法在钛移动中模拟 tabindex？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:57:44.037

您需要在文本字段上添加事件侦听器：

```
usernameTxtField.addEventListener('return', function(e) {
    passwordTxtField.focus();
});

passwordTxtField.addEventListener('return', function(e) {
    login();
}); 
```

# php - 未找到 PHP sybase_connect

> ID：11020386
> 
> 赞同：0
> 
> 时间：2012-06-13T17:40:18.913
> 
> 标签：php, sybase

我正在尝试使用 PHP 连接到 Sybase 后端。但是，当我运行时：

```
<?php
if (function_exists(sybase_connect)) {
    echo "Exists";
}
else {
    echo "Does not exist";
}
?> 
```

它打印“不存在”。这是在 Unix 上，Sybase 安装在那里。为了能够使用 sybase_connect()，我需要什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:42:48.760

当您将函数名称作为字符串传递时，如果它不存在，则可能是您的服务器上没有安装 sybase 支持。如果您使用的是 Linux（例如 Debian 或 Ubuntu），则需要安装包**php5-sybase**（google it）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:44:02.487

它应该是：

```
if (function_exists("sybase_connect")) { 
```

见这里：[http ://us3.php.net/manual/en/function.function-exists.php](http://us3.php.net/manual/en/function.function-exists.php)

# sql - Powershell 和 SQL：从 sql 查询到数组的数据

> ID：11020387
> 
> 赞同：5
> 
> 时间：2012-06-13T17:40:18.797
> 
> 标签：sql, data-binding, powershell, active-directory

问题在于用于查找所选用户已登录的计算机的 SQL 查询。我执行查询，使用适配器将结果填充到表中，然后将表对象读入数组。我不完全理解 Powershell 中数组的语法和功能，所以我可能做错了这部分。在将表读入数组的函数内部，数组的内容看起来不错（只是计算机名称），但是当我将该数组从函数中传递出来并将其分配给变量时，数组具有以下数据：{ #，compName}。它似乎是找到的计算机数量，然后是名称，如果找到一台计算机，则数组是 {1，ComputerName}。但是，如果找到多台计算机（2 台或更多台），则数组为 {2, ComputerNameComputerName}。

这是带有 SQL 查询的函数和用户选择计算机的函数。

```
Function GetComputerList {
    param ($u)
    #use the display name of the user to get their login name
    $queryUser = Get-ADUser -f{DisplayName -eq $u} #-Properties sAMAccountname | Select sAMAccountname
    $queryName = "'"
    $queryName += $queryUser.SamAccountName
    $queryName += "'"
    $query = "SELECT SYS.Netbios_Name0 FROM v_R_System SYS WHERE User_Name0 = $queryName ORDER BY SYS.User_Name0, SYS.Netbios_Name0"

    $connection = new-object system.data.sqlclient.sqlconnection( "Data Source=SERVER;Initial Catalog=DATABASE;Integrated Security=SSPI;")

    $adapter = new-object system.data.sqlclient.sqldataadapter ($query, $connection)

    $table = new-object system.data.datatable

    $adapter.Fill($table)

    $i = 1
    foreach($object in $table) {
        <#Write-Host "$i. $($object.Netbios_Name0)"
        $i++#>
        $compArray += $object.Netbios_Name0
    }
    foreach($object in $compArray) {
        Write-Host "$i. $($object)"
    }

    return @($compArray)
}

Function SelectComputer {
    param ($a)
    $computerNum = Read-Host "Please select a computer. (by number)"
    $computer = ($a[$computerNum])
    return $computer
} 
```

他们是这样称呼的：

```
$computerArray = GetComputerList -u $selectedUser
$selectedComputer = SelectComputer -a $computerArray 
```

我完全迷失了，任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T01:27:45.113

您可以简化您的 GetComputerList 函数，该函数在我的测试中会产生所需的结果：

```
Function GetComputerList {
    param ($u)
    #use the display name of the user to get their login name
    $queryUser = Get-ADUser -f{DisplayName -eq $u} #-Properties sAMAccountname | Select sAMAccountname

    $query = @"
        SELECT SYS.Netbios_Name0 
        FROM v_R_System SYS 
        WHERE User_Name0 = '$($queryUser.SamAccountName)'
        ORDER BY SYS.User_Name0, SYS.Netbios_Name0
    "@
    $connection = new-object system.data.sqlclient.sqlconnection( "Data Source=SERVER;Initial Catalog=DATABASE;Integrated Security=SSPI;") 
    $adapter = new-object system.data.sqlclient.sqldataadapter ($query, $connection)
    $table = new-object system.data.datatable
    $adapter.Fill($table) | out-null
    $compArray = @($table | select -ExpandProperty Netbios_Name0)

    return @($compArray)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T04:59:54.987

首先，您需要指定`$compArray`实际上是一个数组。您从不声明它，因此 PowerShell 将其视为字符串，因此您可以将计算机名称附加到彼此。在某处`GetComputerList`声明`$compArray`为数组：

```
$compArray = @() 
```

其次，数组中的第一个数字实际上是添加到管道中的 .NET 函数的返回值。最有可能的罪魁祸首是[`$adapter.Fill($table)`](http://msdn.microsoft.com/en-us/library/905keexk.aspx)。将其返回值分配给一个变量：

```
$numRows = $adapter.Fill($table) 
```

# android - 背景图像圆角

> ID：11020390
> 
> 赞同：1
> 
> 时间：2012-06-13T17:40:29.897
> 
> 标签：android, android-layout

我有一个改变的背景图像，在它上面我使用圆角。有没有办法隐藏图像的角落。下面是我的小部件的屏幕截图，其中显示了角落。 ![在此处输入图像描述](../Images/f764122c7dfcc27a2425bd4b5b02fc5f.png)

编辑代码：

```
Bitmap bm1 = BitmapFactory.decodeResource(context.getResources(), Utilities.getDrawableId(ACCUWX.Icons.AL_WIDGETBG_ICON_MAP[Integer.parseInt(wdm.iconCode)]));
Bitmap roundedBm = Utilities.getRoundedCornerBitmap(bm1);
toRet.setImageViewBitmap(R.id.widget_bg, roundedBm); 
```

方法调用：

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
            bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = 12;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
      } 
```

为了显示我有一个背景图像和顶部的圆角，由一个可绘制的 xml 形状制成：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_bg_rl"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clipChildren="true">
    <ImageView
        android:id="@+id/widget_bg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/al_widgetbg_06_07_08"
        android:scaleType="center" />

    <LinearLayout 
        android:id="@+id/current_layout"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:focusable="true"
        android:weightSum="8">
        <RelativeLayout
            android:id="@+id/city_time_rl"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="2.5"
            android:background="@drawable/rounded_corners_top"
            android:clipChildren="true">
            <TextView
                android:id="@+id/city" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="MECHANICSBURG"
                android:textSize="16dp"
                android:textColor="@color/dk_blue"
                /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:53:58.940

您应该能够通过在背景上绘制圆角矩形之前使背景透明来完成此操作。

# java - 如何将 VARARG 的内容复制到 ArrayList 中？

> ID：11020394
> 
> 赞同：0
> 
> 时间：2012-06-13T17:41:02.663
> 
> 标签：java, arrays, arraylist, nullpointerexception

我正在使用 Mysql 进行 Tomcat 身份验证。为了促进这一点，我试图对存储在数据库中的 Tomcat 用户数据进行建模。所以我建立了一个 TomcatUser 类。

我已将用户名和密码存储为字符串，以便在测试期间更轻松。稍后将实施安全性。并且用户的 Tomcat 角色存储在一个 ArrayList 中，因此我可以轻松搜索和管理用户的角色。而且我有一些针对不同场景的构造函数。

其中之一是使用 String VARARG 来设置用户可能拥有的许多 Tomcat 角色。我知道 VARARG 中的参数存储在一个数组中。在这种情况下是一个字符串数组。我使用 Collections.addAll() 方法将 VARARG 数组的内容添加到对象的 ArrayList。

在测试类中，我从对象的 实例化 Iterator 得到 NullPointerException ，这可能是我的一些愚蠢错误。但后来我是新人。下面是我的代码，用于模型类和测试。你能告诉我我做错了什么吗？任何一般的提示或建议将不胜感激。

该模型。

```
/*
 * Class modeling user data for Tomcat.
 */

package tomcat;

import java.util.ArrayList;
import java.util.Collections;

public class TomcatUser
{
    String tomcatUserName; //Field to store Tomcat user's name.
    String tomcatUserPassword; //Field to store Tomcat user's password.

    /*
     * Field to store the Tomcat user's roles as an ArrayList. This allows for easy element checking.
     */
    ArrayList<String> tomcatUserRoles;

    /*
     * Constructor intended for creating a roleless user. Not much use, but who knows.
     */
    public TomcatUser(String tomcatUserName, String tomcatUserPassword)
    {
            super();
            this.setTomcatUserName(tomcatUserName);
            this.setTomcatUserPassword(tomcatUserPassword);
        }

        /*
         * Constructors for instantiating for general use.
         * Three constructors are provided to provide options for instantiation.
         */
        public TomcatUser(String tomcatUserName, ArrayList<String> tomcatUserRoles)
        {
            super();
            this.setTomcatUserName(tomcatUserName);
        this.setTomcatUserRoles(tomcatUserRoles);
    }

    public TomcatUser(String tomcatUserName, String... tomcatUserRoles)
    {
        super();
        this.setTomcatUserName(tomcatUserName);
    }
    /*
     * 
     */

    /*
     * Constructors intended for adding a new user to the database.
     * Three constructors are provided to provide options for instantiation.
     */
    public TomcatUser(String tomcatUserName, String tomcatUserPassword, ArrayList<String> tomcatUserRoles)
    {
        this(tomcatUserName, tomcatUserPassword);
        this.setTomcatUserRoles(tomcatUserRoles);
    }
    /*
     * 
     */

    /*
     * Standard setters and getters.
     */
    /**
     * @return the tomcatUserName
     */
    public String getTomcatUserName() {
        return tomcatUserName;
    }

    /**
     * @param tomcatUserName the tomcatUserName to set
     */
    public void setTomcatUserName(String tomcatUserName) {
        this.tomcatUserName = tomcatUserName;
    }

    /**
     * @return the tomcatUserPassword
     */
    public String getTomcatUserPassword() {
        return tomcatUserPassword;
    }

    /**
     * @param tomcatUserPassword the tomcatUserPassword to set
     */
    public void setTomcatUserPassword(String tomcatUserPassword) {
        this.tomcatUserPassword = tomcatUserPassword;
    }

    /**
     * @return the tomcatUserRoles
     */
    public ArrayList<String> getTomcatUserRoles() {
        return tomcatUserRoles;
    }

    /**
     * @param tomcatUserRoles the tomcatUserRoles to set
     */
    public void setTomcatUserRoles(ArrayList<String> tomcatUserRoles) {
        this.tomcatUserRoles = tomcatUserRoles;
    }
    /*
     * 
     */

    /*
     * Setter to handle input options from matching constructors, and to provide options for setting tomcatUserRoles field.
     */

    public void setTomcatUserRoles(String[] newTomcatUserRoles)
    {
        Collections.addAll(this.tomcatUserRoles, newTomcatUserRoles);
    }
    /*
     * 
     */

    /*
     * Method to add a role to the object.
     */
    public void addTomcatUserRole (String newTomcatUserRole)
    {
        this.tomcatUserRoles.add(newTomcatUserRole);
    }

    public Boolean hasTomcatRole (String checkTomcatRole)
    {
        return this.tomcatUserRoles.contains(checkTomcatRole);
    }
} 
```

还有测试班。

```
package tomcat;

import java.util.ArrayList;
import java.util.Iterator;

public class TomcatUserTest
{

    static ArrayList<String> testTomcatRoles = new ArrayList<String>();
    /**
     * @param args
     */
    public static void main(String[] args)
    {
        for (Integer iterator = 1; iterator <4 ; iterator++)
        {
            testTomcatRoles.add("testTomcatRole" + iterator.toString());
        }

        TomcatUser testTomcatUser01 = new TomcatUser("testUser01", "testPassword01");

        System.out.print("testTomcatUser01 contents: ");
        System.out.print(testTomcatUser01.getTomcatUserName() + " " + testTomcatUser01.getTomcatUserPassword());
        System.out.println();

        TomcatUser testTomcatUser02 = new TomcatUser("testUser02", testTomcatRoles);

        System.out.print("testTomcatUser02 contents: ");
        System.out.print(testTomcatUser02.getTomcatUserName() + " ");

        Iterator<String> testTomcatUser02Iterator = testTomcatUser02.getTomcatUserRoles().iterator();

        while (testTomcatUser02Iterator.hasNext())
        {
            System.out.print(testTomcatUser02Iterator.next());

            if (testTomcatUser02Iterator.hasNext())
            {
                System.out.print(" ");
            }
        }

        System.out.println();

        TomcatUser testTomcatUser03 = new TomcatUser("testTomcatUser03", "testPassword03", testTomcatRoles);

        System.out.print("testTomcatUser03 contents: ");
        System.out.print(testTomcatUser03.getTomcatUserName() + " " + testTomcatUser03.getTomcatUserPassword() + " ");

        Iterator<String> testTomcatUser03Iterator = testTomcatUser03.getTomcatUserRoles().iterator();

        while (testTomcatUser03Iterator.hasNext())
        {
            System.out.print(testTomcatUser03Iterator.next());

            if (testTomcatUser03Iterator.hasNext())
            {
                System.out.print(" ");
            }
        }

        System.out.println();

        TomcatUser testTomcatUser04 = new TomcatUser("testTomcatUser04", "testRole1", "testRole2", "testRole3");

        System.out.print("testTomcatUser04 contents: ");
        System.out.print(testTomcatUser04.getTomcatUserName() + " ");

        Iterator<String> testTomcatUser04Iterator = testTomcatUser04.getTomcatUserRoles().iterator();

        while (testTomcatUser04Iterator.hasNext())
        {
            System.out.print(testTomcatUser04Iterator.next());

            if (testTomcatUser04Iterator.hasNext())
            {
                System.out.print(" ");
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:43:43.410

这个构造函数：

```
public TomcatUser(String tomcatUserName, String... tomcatUserRoles) 
```

从不分配字段`tomcatUserRoles`。

# jquery - 未找到鼠标移动效果动画

> ID：11020397
> 
> 赞同：0
> 
> 时间：2012-06-13T17:41:10.770
> 
> 标签：jquery, mousemove, mouseenter, mouseleave

有什么办法可以让我们进入容器的时候效果更流畅。

这个想法是图标或数字列表必须相对于中心然后它发生这样说，但我不能在不丢失的情况下做出更柔和的位置 mousemove 是我在网上找到的一个插件，如果你有任何建议的话伟大的;）

[http://jsfiddle.net/rvalverde/zw6pJ/11/](http://jsfiddle.net/rvalverde/zw6pJ/11/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:49:27.710

我在你的 li 锚点上添加了一个 css3 过渡。你可以调整时间。取决于旧版浏览器支持以及使用它。

```
-o-transition: all .4s ease;
-ms-transition: all .4s ease;
-moz-transition: all .4s ease;
-webkit-transition: all .4s ease;
transition: all .4s ease; 
```

[http://jsfiddle.net/zw6pJ/12/](http://jsfiddle.net/zw6pJ/12/)

# javascript - Javascript时间同步

> ID：11020398
> 
> 赞同：2
> 
> 时间：2012-06-13T17:41:13.277
> 
> 标签：javascript, time, synchronization

我有一个应用程序，它显示用户执行操作的时间倒计时。时间不是每个任务，而是实际时间戳。

例如，用户必须在今天 17:58:32 UTC+0 之前执行简单操作。

我正在从服务器获取操作和完成时间，然后继续显示倒计时。我创建空的 Date() 对象（以获取当前用户时间），从完成时间中减去它，并显示倒计时。

但这就是问题的根源。如果用户的计算机时间大幅减少，则会增加这种差异。服务器的结束时间与世界时间同步。当前时间，在用户机器上绘制的可能不是。

首先要考虑的是从服务器发送当前时间。但它不会是最新的。到它被使用的那一刻，它在服务器上生成后可能会经过 1、2 甚至 3 秒。缓慢的互联网连接，阻塞的 javascript 执行堆栈（插件，用户脚本）等。在我的应用程序中，秒很重要。

有什么可以做的来获得实际的，与javascript中的通用值时间同步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:44:05.530

你永远不会让它们准确，但我怀疑在当前时间向服务器发出一些请求并获得客户端时钟的平均偏移量之后，你可以接近。

正如您所指出的，这种方法并非完美无缺，但可能尽可能接近。

# php - PHP/MySQL - 选择字段唯一的所有行

> ID：11020401
> 
> 赞同：1
> 
> 时间：2012-06-13T17:41:21.273
> 
> 标签：php, mysql, select, unique

我有一张这样的桌子：

```
column_a  column_b
  foo        1
  bar        1
  bar        2
  baz        4 
```

我想得到以下结果，包含所有行，它们在中具有唯一的字段值`column_b`：

```
 bar        2
  baz        4 
```

`foo`(0) 和`bar`(1) 都具有`column_b`值“1”，因此“1”不是唯一的。是否有一个 MySQL-Expression 过滤所有具有唯一性的行`column_b`？

也许是这样的：

```
select * from table where isunique(column_b) 
```

另外：我不需要像`DISTINCT`！

**编辑（已解决）：**

感谢 YaK 和 jcho360，这就是解决方案：

```
select column_a, column_b from table group by column_b having count(column_b) = 1 
```

或者

```
select column_a, column_b, COUNT(1) AS total from table group by column_b having total = 1 
```

（感谢安德鲁韦伯）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:43:30.043

使用 count 函数将提供一个选择，其中 column_b 中的值仅出现一次。试试这个：

```
select * from table group by (column_b) having count(column_b) = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:47:08.180

```
SELECT column_a, column_b, COUNT(1) AS total
FROM table
GROUP BY column_b
HAVING total = 1 
```

我相信这应该有效。这会将所有 column_b 组合在一起并计算有多少具有该特定值，然后将结果集限制为具有唯一 column_b 值的结果集。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T17:43:50.410

试试`select unique(column_b), column_a, from table`？:)

编辑修复错字

# .net - Visual Studio 2010 发布命令 - 命令提示符

> ID：11020403
> 
> 赞同：0
> 
> 时间：2012-06-13T17:41:21.497
> 
> 标签：.net, visual-studio-2010, msbuild, devenv

我正在使用下面的批处理脚本来构建解决方案文件

```
set BUILD_PATH=%CD%

call "C:\Program Files\Microsoft Visual Studio 10.0\Common7\Tools\vsvars32.bat"

devenv /clean Release "%BUILD_PATH%\Source\Dotnet\WebService\OPALController\OPALController.sln"

devenv /rebuild Release "%BUILD_PATH%\Source\Dotnet\WebService\OPALController\OPALController.sln 
```

我正在寻找要发布的命令，因为`devenv /publish`它不起作用

有没有其他方式发布工件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:50:39.870

我认为您可以将**Visual Studio 2010 Web 部署项目**添加到您的解决方案中，然后使用它进行发布。

如果您按照[此处](http://java.dzone.com/articles/automated-deployments-teamcity)找到的说明进行操作，但不使用 TeamCity Build Runner，而是直接从批处理文件中调用 MSBuild，您或许可以使用**/p:Configuration=Deployment**开关进行发布。

所以基本上你的步骤是：
1）下载并安装[**Visual Studio 2010 Web 部署项目**](http://www.microsoft.com/en-us/download/details.aspx?id=24509)
2）向你的解决方案添加一个 Web 部署项目3）如文章 4中所述为你的项目
创建一个**“部署”**配置）从脚本
调用**MSBuild以使用****/target:REBUILD**和**/p:Configuration=Deployment**开关编译解决方案

# javascript - 使用 three.js 的基本 2D 彩色三角形

> ID：11020405
> 
> 赞同：3
> 
> 时间：2012-06-13T17:41:38.260
> 
> 标签：javascript, webgl, three.js

我在使用 Three.js 创建简单的 2D 场景时遇到问题。我想在彩色三角形上创建一个 2D 视图。我无法使三角形着色（例如红色）。我相信为此我需要以下内容：

*   三、正交相机
*   简单的三角形 -> 即 THREE.Geometry() 以红色着色

我不想要任何阴影，只是正交场景中的一个简单的红色 2D 三角形。欢迎提出有关如何制作它的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T20:35:49.323

如果要使用基本几何类，则需要将所有自己的顶点添加到场景中。您可以像这样使用 Vertex 类执行此操作

```
var geometry = new THREE.Geometry();
var v1 = new THREE.Vector3(0,0,0);   // Vector3 used to specify position
var v2 = new THREE.Vector3(1,0,0);
var v3 = new THREE.Vector3(0,1,0);   // 2d = all vertices in the same plane.. z = 0

// add new geometry based on the specified positions
geometry.vertices.push(v1);
geometry.vertices.push(v2);
geometry.vertices.push(v3); 
```

然后我们需要从我们的顶点构造一个面，你按照它们被推到上面的顺序传递顶点的索引。

[编辑]：正如 mrdoob 在下面指出的那样，您还需要按逆时针顺序添加它们。

[![在此处输入图像描述](../Images/f922728e9b218f35bcb1c9d18b29440f.png)](https://i.stack.imgur.com/yvcAE.png)

这是我的小提琴的问题。您可以在**[此处查看固定演示](http://jsfiddle.net/CoryG89/hyvng/10/)**。

```
geometry.faces.push(new THREE.Face3(0, 2, 1)); 
```

最后创建一个材质并将其与您的几何体结合以创建一个网格。即使对于 2D，我相信您也需要创建一个网格才能显示它。

```
var redMat = new THREE.MeshBasicMaterial({color: 0xff0000});
var triangle = new THREE.Mesh(geometry, redMat);
scene.add(triangle)                               // added at the origin 
```

# google-maps - Google Maps API v3：绘图管理器

> ID：11020407
> 
> 赞同：5
> 
> 时间：2012-06-13T17:42:12.837
> 
> 标签：google-maps, google-maps-api-3

我正在使用绘图库中的绘图管理器，但出现了一个问题。任何帮助将不胜感激。提前致谢。

*问题*：创建对象（标记、圆圈等）后，我该如何称呼它？一个例子是我放置了一个标记。我现在想给它附加一个信息窗口。在分配信息窗口的功能中，我需要我刚刚放置的标记的“名称”。

如果您需要更多说明，请告诉我。

-赛斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:23:31.837

您可以使用事件侦听器来获取对已创建对象 ( `event.overlay`) 的引用。[在此**演示**](http://jsfiddle.net/yV6xv/35/)中，创建的标记用于打开 InfoWindow，其内容存储在标记本身中。

单击以创建标记，然后切换到“手”图标模式并单击标记以打开信息窗口。

```
 var markers = [];
  var infowindow = new google.maps.InfoWindow();

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    drawingManager.setMap(map);
    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
      if(event.type == google.maps.drawing.OverlayType.POLYLINE) {
        alert("polyline complete");
      }
      else if(event.type == google.maps.drawing.OverlayType.MARKER) {
        var newMarker = event.overlay;
        newMarker.content = "marker #" + markers.length;
        google.maps.event.addListener(newMarker, 'click', function() {
          infowindow.setContent(this.content);
          infowindow.open(map, this);
        });
        markers.push(newMarker);
      }
    });
  } 
```

# php - php curl post到pingdom不起作用

> ID：11020409
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:42:22.043
> 
> 标签：php, post, curl, pingdom

尝试向 pingdom 的网页负载测试工具发布 url，并获取生成的 html ......但是，我得到的只是主页，好像帖子甚至没有通过。任何人都可以看到这里出了什么问题吗？

```
<?php

$ch = curl_init();
$data = array('testurl'="www.google.ca");

curl_setopt($ch, CURLOPT_SSLVERSION, 3);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_URL, "http://tools.pingdom.com/fpt/");
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
echo curl_exec($ch);

curl_close($ch);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:48:15.463

为什么你会期待别的？主页就是那里的一切。

如果您想获得结果，则需要再次查看该站点的工作原理。他们使用 AJAX 动态加载结果。

# android - 尝试在 Android SD 卡上创建只读文件失败

> ID：11020418
> 
> 赞同：3
> 
> 时间：2012-06-13T17:42:38.153
> 
> 标签：android

我正在尝试将只读文件写入我的 SD 卡。我需要将此作为一个两步过程。

```
public void method1(String cacheFilename) {
File cacheDir = mContext.getExternalCacheDir();
File cachedFileOnDisk = new File(cacheDir, cacheFilename);
FileOutputStream fileStream = new FileOutputStream(cachedFile);
fileStream.write(...)
fileStream.flush();
fileStream.close();
}
public void method2(String cacheFilename) {
   File cacheDir = mContext.getExternalCacheDir();
   File cachedFileOnDisk = new File(cacheDir, cacheFilename);
   if(!cachedFileOnDisk.setReadOnly()) {
       throw new IllegalStateException(); 
} 
```

其中方法 1 被调用，然后在后续阶段方法 2。该`cachedFileOnDisk.setReadOnly()`调用向我返回 false，我无法将文件设置为只读。

有没有办法可以将只读文件写入我的 SD 卡？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:45:14.733

sdcard 使用不支持文件所有权的 FAT 类型文件系统。

FAT 可以在实现级别支持只读位，但这将具有有限的价值，因为任何其他具有 sd 卡写入权限的东西都可以自由更改该位。鉴于价值有限，是否可以在 android 上设置它是一个悬而未决的问题。

# c++ - 什么可能导致 HP-UX 和 LINUX for C++ 应用程序之间的返回值不同？

> ID：11020422
> 
> 赞同：2
> 
> 时间：2012-06-13T17:42:53.687
> 
> 标签：c++, c, linux, gcc, hp-ux

在将 HP-UX C++ 应用程序移植到 LINUX 的过程中，我注意到有一个 int 类型的函数，其中并非所有代码路径似乎都返回整数值。当我在 HP-UX 下编译和运行应用程序时（使用 acc 编译器进行编译），它通过未明确声明返回值的代码路径返回 0。但是，当我在 LINUX 下编译和运行同一个应用程序时，我得到一个返回值 -72 并且应用程序因此出现错误（这是在返回值小于 0 时设计的）。我注意到经典 C++（ACC 编译器支持的一个非常古老且过时的标准）处理变量范围的方式与标准 C++（不幸的是 ACC 不支持）略有不同。在经典 C++ 中，似乎在 forloop 声明中声明一个整数

```
for( int index = 0; index < array.length; index++ ) 
```

变量 index 可以在 forloop 之外访问，尽管我不确定返回语句是否以相同的方式处理，以便 aCC 识别所有代码路径都返回一个值。

我正在处理的功能如下：

```
int process_phase (const char *phase, const char *seg_type, const char *dist_target, const char *action_target, char *cmd) 
{
  char cmd2[MAX_STRING];

  printf( "I AM INSIDE THE PROCESS_PHASE\n" );

  if (TRACE_MODE) 
  {
    printf ("%s %s\n", MSG_LOOKUP("MSG_PHASE"), phase);
    printf ("%s %s\n", MSG_LOOKUP("MSG_SEG_TYPE"), seg_type);
    printf ("%s %s\n", MSG_LOOKUP("MSG_DIST_TARGET"), dist_target);
    printf ("%s %s\n", MSG_LOOKUP("MSG_ACTION_TARGET"), action_target);
    printf ("%s %s\n", MSG_LOOKUP("MSG_CMD"), cmd);
  }

  // Remove the pre- and post- prefixes
  const char *phase_ref = strchr(phase, '-');

  printf ("PHASE REF BEFORE PREFIX REMOVAL: %s\n", phase_ref );

  if (phase_ref) 
  {
    phase_ref++; 
  }
  else
  {
    phase_ref = phase;
  }

  printf ("PHASE REF AFTER PREFIX REMOVAL: %s\n", phase_ref );

  if (TRACE_MODE)
  {
    printf ("%s %s\n", MSG_LOOKUP("MSG_PHASE_REF"), phase_ref);
  }

  printf ( "==========TEST PHASE 1 BEGIN==========\n" );

  if (strcasecmp(phase_ref, "all_phases") != 0) 
  {
    if (DO_TRANSFER && strcasecmp(phase_ref, "transfer") != 0) 
    {
      printf ("IN ONE\n");
      return 0;
    }
    else if (DO_TAPE_GENERATION && strcasecmp(phase_ref, "tape_generation") != 0) 
    {
      printf ("IN TWO\n");
      return 0;
    }
    else if (DO_TAPE_EXTRACTION && strcasecmp(phase_ref, "tape_extraction") != 0) 
    {
      printf ("IN THREE\n");
      return 0;
    }
    else if (DO_PREPARATION && strcasecmp(phase_ref, "preparation") != 0)
    {
      printf ("IN FOUR\n");
      return 0;
    }
    else if (DO_DISTRIBUTION && strcasecmp(phase_ref, "distribution") != 0)
    {
      printf ("IN FIVE\n");
      return 0;
    }
    else if (DO_VERIFICATION && strcasecmp(phase_ref, "verification") != 0)
    { 
      printf ("IN SIX\n");
      return 0;
    }
    else if (DO_ACTIVATION && strcasecmp(phase_ref, "activation") != 0) 
    {
      printf ("IN SEVEN\n");
      return 0;
    }
    else if (DO_REMOVAL && strcasecmp(phase_ref, "removal") != 0)
    {
      printf ("IN EIGHT\n");
      return 0;
    }
  }

  printf ( "==========TEST PHASE 1 END==========\n" );

  // if (strstr(seg_type, envvar("SEGMENT_TYPE")) == 0 && strcasecmp(seg_type, "ALL") !=0) return 0;
  char tmp_seg_type[MAX_BUFFLEN];
  sprintf (tmp_seg_type, "_%s_", seg_type);

  printf( "tmp_seg_type: %s\n", tmp_seg_type );

  char tmp_envar_seg_type[MAX_BUFFLEN];
  sprintf (tmp_envar_seg_type, "_%s_", envvar("SEGMENT_TYPE"));

  printf( "tmp_seg_type: %s\n", tmp_seg_type );

  if ( strstr(tmp_seg_type, tmp_envar_seg_type) == 0 && strcasecmp(seg_type, "ALL") != 0 )
  {
    printf( "IN TEST PHASE TWO\n" );
    return 0;
  }

  char match_list[MAX_BUFFLEN];

  printf ( "==========TEST PHASE THREE BEGIN==========\n" );

  if ( DO_TRANSFER ) 
  {
    printf( "IN ONE\n" );
    sprintf( match_list, "DIST_NODES", dist_target );
  }
  else if (DO_TAPE_GENERATION) 
  {
    printf( "IN TWO\n" );
    sprintf( match_list, "HOST_NODES", dist_target );
  }
  else
  {
    printf( "IN THREE\n" );
    sprintf( match_list, "%s_NODES", dist_target );
    printf( "match_list: %s\n", match_list );
  }

  printf ( "==========TEST PHASE THREE END==========\n" );

  char matched_nodes[MAX_BUFFLEN];
  get_env(match_list, matched_nodes);

  printf( "matched_nodes: %s\n", matched_nodes );

  word_sort_unique(matched_nodes);

  printf( "sorted_matched_nodes: %s\n", matched_nodes );

  const char *element_separator = " ";
  const char *curr_node_type;
  char *curr_node = strtok(matched_nodes, element_separator);

  printf( "curr_node: %s\n", curr_node );

  int whileiteration = 0;

 while (curr_node) 
 {
    printf( "WHILE LOOP ITERATION: %d\n", whileiteration );

    int node_idx;
    bool matched = false;

    for (node_idx=0; node_idx<node_count; node_idx++) 
    {
      if (strcmp(curr_node, node_table[node_idx]) == 0) 
      {
        matched = true;
        break;
      }
    }

    if (matched) 
    {
      if (strcasecmp(action_target, "TARGET") == 0) 
      {
        if (indent[node_idx][0] == 0) 
        {
          fprintf (outfile[node_idx], "remsh %s \"\n", curr_node);
          indent[node_idx] = "  ";
          fprintf (outfile[node_idx], "%s. %s/site_profile\n", indent[node_idx], envvar ("TOOLS_DIR"));
          fprintf (outfile[node_idx], "%s. %s/install_profile\n", indent[node_idx], envvar ("TOOLS_DIR"));
          fprintf (outfile[node_idx], "%sexport LANG=%s\n", indent[node_idx], envvar ("LANG"));
        }
      } 
      else 
      {
        // Input redirection from /dev/echo enables that the ports reserved for remsh on both client and
        // server node get released immediately without any inactivity timeout period
        if (indent[node_idx][0] != 0) 
        {
          fprintf (outfile[node_idx], "\" < /dev/echo \n");
        }
        indent[node_idx] = "";
      }

      // Do parameter substitution
      strcpy(cmd2, cmd);
      expand_string (cmd2, "$BUILD_VERSION", BUILD_VERSION);
      expand_string (cmd2, "${BUILD_VERSION}", BUILD_VERSION);
      expand_string (cmd2, "$TARGET_NODE", curr_node);
      expand_string (cmd2, "${TARGET_NODE}", curr_node);
      curr_node_type = target_lookup (curr_node);      
      expand_string (cmd2, "$NODE_TYPE", curr_node_type);
      expand_string (cmd2, "${NODE_TYPE}", curr_node_type);

      fprintf(outfile[node_idx], "%s%s\n", indent[node_idx], cmd2);
      file_active[node_idx] = true;
    }
    curr_node = strtok(NULL, element_separator);

    whileiteration++;
  }
  printf ( "EXITING PROCESS PHASE\n" );
} 
```

我已经使用代码检测在 HP-UX 和 LINUX 上打印出变量和其他输出，直到 while 循环它们看起来是相同的。在某些情况下，即使由于变量 curr_node 为空而忽略了 while 循环并退出了函数，其中 EXITING PROCESS PHASE 打印到 stdout，HP-UX 和 LINUX 之间的输出也是相同的。但是，HP-UX 和 LINUX 之间的返回值是完全不同的。我想不通的是为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:06:49.050

你说你的函数有一个分支“没有明确声明返回值”。这是编译器不需要为您诊断的错误。在那种情况下，行为是不确定的。你一直在一个平台上得到一个否定的结果只是意味着你很幸运（或者不走运，因为不同的值不会更早地暴露这个错误）。

通常，有一个为返回值指定的内存位置或寄存器。如果函数在那里没有存储任何东西，或者如果它使用该位置作为临时值但从未在那里写入最终结果，那么调用者将读取该位置并获取发生在那里的任何值。在您的情况下，Linux 返回值的位置恰好为 -72，而 HP-UX 返回值的位置恰好为零。让您的意图为人所知，并在所有代码路径中显式返回一个值。

返回值位置*是否始终*保持特定值通常会受到相关函数的操作以及它调用的函数的操作的影响。小而简单的函数的行为不一定能预测大函数的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:06:28.053

`int`值通常在寄存器中返回。如果您实际上没有返回值，则该寄存器将包含先前计算中剩余的一些随机值。

如果您到达此函数的末尾，您将获得最后一个返回值，该值`printf`可能会传递到下一个级别。

# c# - 如何以编程方式刷新 wpf c#？

> ID：11020426
> 
> 赞同：0
> 
> 时间：2012-06-13T17:43:13.977
> 
> 标签：c#, wpf, binding, observablecollection

我有这个场景很好，我会让模型解释。

```
public class ScheduleMonthlyPerDayModel 
{
    public DateTime Date { get; set; }

    public string Day 
    { 
        get
        {
            return Date.Day.ToString();
        }
    }

    ObservableCollection<AppointmentDTO> _appointments;
    public ObservableCollection<AppointmentDTO> Appointments 
    {
        get
        {
            return _appointments;
        }
        set
        {
            _appointments = value;

            if (value.Count > 0)
                NotifyOfPropertyChange(() => HasSchedule);
        }
    }

    public bool BelongsToCurrentMonth
    {
        get;
        set;
    }

    public bool HasSchedule
    {
        get
        {
            return _appointments.Count > 0 ? true : false;
        }
    }

    public ScheduleMonthlyPerDayModel()
    {
        _appointments = new ObservableCollection<AppointmentDTO>();
    }

    public void ClearCollection()
    {
        _appointments.Clear();
    }
}

public class ScheduleMonthlyPerWeekModel
{
    public ScheduleMonthlyPerDayModel Sunday{get; set;}

    public ScheduleMonthlyPerDayModel Monday{get; set;}

    public ScheduleMonthlyPerDayModel Tuesday{get; set;}

    public ScheduleMonthlyPerDayModel Wednesday{get; set;}

    public ScheduleMonthlyPerDayModel Thursday{get; set;}

    public ScheduleMonthlyPerDayModel Friday{get; set;}

    public ScheduleMonthlyPerDayModel Saturday{get; set;}
} 
```

与 xaml 的绑定正在使用 xaml 的一瞥，如下所示：

`headereditemscontrol itemsSource= weekcollection`，其中 weekcollection 是 的对象`schedulemonthlyperweekmodel`。

在该 headereditemscontrol 中，我每天都为 schedulemonthlyperweekmodel 的每个属性进行模板化，如下所示：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition />
    <ColumnDefinition />
</Grid.ColumnDefinitions>
<Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="*" />
</Grid.RowDefinitions>
<TextBlock Grid.Row="0"  Style="{StaticResource CalendarDates}" Text="{Binding Path=Saturday.Day}" />
<ListBox Grid.Row="1" Grid.ColumnSpan="2" Padding="0" 
         ItemsSource="{Binding Path= Saturday.Appointments}"
         ItemTemplate="{StaticResource myItemStyle}"
         Visibility="{Binding Path=Saturday.HasSchedule, Converter={StaticResource BoolToVisibilityConverter}}" /> 
```

基本上，我试图通过每天都有一系列约会来实现每月视图。我的问题是，当我以编程方式将项目添加到例如此处的 saturday.appointments 集合时，通过调试附加项目成功并通知主集合（weekcollection），不会刷新 UI。

我想要实现的是：在我将假定的约会添加到其相应的日期/日期后，用户界面也会相应地更新，但我该怎么做呢？

目前，UI 仅在我更改/切换到不同然后返回时才会更新，之后会很好地显示约会。我想自动化它，因为要求用户在看到约会列表之前切换到其他东西然后返回是很难看的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:16:51.323

正如尼克建议的那样，使用 INotifyPropertyChanged 接口是关键。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

如果您希望 ObsCollection 了解属性更改，则必须实现此接口，如上面链接中所示。这将更新在添加、删除或更改某些内容时绑定到的 UI 控件。没有它，您实际上必须跟踪代码中的更改并手动更新它们。

它实际上很容易实现和使用，而且非常棒。如果您不想使用它，您可能只是使用了一个winform。=)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:09:53.483

您的 Visibility 的问题在于它绑定到一个只读属性，该属性计算**get**上的值。因此，它无法通知它已更改。

您的 HasSchedule 属性需要知道 Appointment 属性何时更改。Appointment 属性的设置器只知道整个列表何时更改。在您的情况下，您需要知道列表的*内容*何时更改。

**ObservableCollection**有一个事件，它会告诉您列表的内容何时发生变化，称为**CollectionChanged**。您应该执行以下操作以使用此事件通知您的 HasSchedule 属性已更改：

```
ObservableCollection<AppointmentDTO> _appointments;
public ObservableCollection<AppointmentDTO> Appointments
{
    get
    {
        return _appointments;
    }
    set
    {
        if (_appointments != value)
        {
            if (_appointments != null)
                _appointments.CollectionChanged -= Appointments_CollectionChanged;

            _appointments = value;

            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("HasSchedule"));

            if (_appointments != null)
                _appointments.CollectionChanged += Appointments_CollectionChanged;
        }
    }
}

void Appointments_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs("HasSchedule"));
} 
```

正如您所说，这是假设您已经在 ViewModel 中实现了 INotifyPropertyChanged。在这种情况下，每次您的集合以某种方式更改时，它都会通知 HasSchedule 属性已更改。绑定将刷新值并更新可见性（如果已更改）。

# java - 接受一个列表作为 Jersey 网络服务的参数，该服务使用多部分的内容类型

> ID：11020427
> 
> 赞同：3
> 
> 时间：2012-06-13T17:43:18.173
> 
> 标签：java, web-services, jersey, multipart, rest-assured

我有一个现有的 Jersey webservice 方法，它通过 Http POST 方法接受许多参数，该方法旨在处理标准表单数据，内容类型为 application/x-www-form-urlencoded；这些参数之一是字符串列表。下面是我拥有的方法签名的示例。

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public Response createItem(
        @FormParam("p1") long p1,
        @FormParam("p2") String p2,
        @FormParam("p3") List<String> p3,
        @FormParam("p4") String p4,
        @Context UriInfo uriInfo
) throws SQLException { 
```

这工作正常，当多个 p3 参数在 List 中传递时，Jersey 会正确生成并传递到方法中。

我现在需要制作此方法的替代版本，该版本将接受多部分请求，以便文件也可以与现有参数一起上传。所以我创建了一个非常相似的方法签名来使用多部分请求，示例如下所示。

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response createItemWithFile(
        @FormDataParam("p1") long p1,
        @FormDataParam("p2") String p2,
        @FormDataParam("p3") List<String> p3,
        @FormDataParam("p4") String p4,
        @FormDataParam("file") InputStream inputStream,
        @Context UriInfo uriInfo
) throws SQLException { 
```

我将 FormParam 注释更改为 FormDataParam，因为我相信在使用多部分数据时需要这样做。我一直在尝试使用 RESTAssured 从 JUnit 测试中调用此方法来进行调用（与对原始方法所做的相同），但出现以下错误。

```
java.lang.IllegalArgumentException: wrong number of arguments
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288) 
```

在 Jersey 代码中放置了一些断点，在堆栈跟踪中标识的一些点上，它似乎已经确定了要调用的正确方法，但是在它试图传递给它的参数列表中，省略了 p3 .

在处理多部分数据时，为了支持接受 List 作为输入，是否需要做一些不同的事情？鉴于这是一个可选参数，我希望无论如何都应该可以省略它，原始方法就是这种情况。

测试中用于调用该方法的 RESTAssured 代码如下。

```
Response response = given()                    
                .header("my_header", "xyz")
                .param("p1", "8000040")
                .param("p2", "sample string") 
                .param("p3", "first_value")
                .param("p4", "abcde")
                .multiPart("file", myFile1, inputStream)
                .expect() 
```

在 RESTAssured 测试代码中使用 formParam 代替 param 时，我也尝试过，但得到相同的结果。

在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:32:28.467

浏览了更多的球衣代码后，我的结论是，在使用多部分时，我的方法中不能有 List 类型的参数。在过程中的某个时刻，Jersey 循环遍历方法上的每个参数，找到一个 Injectable 来读取每个参数的值（抱歉，这可能不是一个很好的解释，但我已经尽可能多地调试了），在 com.sun 类中getInjectables 方法中的 .jersey.multipart.impl.FormDataMultiPartDispatchProvider 是以下代码：

```
 private List<Injectable> getInjectables(AbstractResourceMethod method) {
    List<Injectable> list = new ArrayList<Injectable>(method.getParameters().size());
    for (int i = 0; i < method.getParameters().size(); i++) {
        Parameter p = method.getParameters().get(i);
        if (Parameter.Source.ENTITY == p.getSource()) {
            if (FormDataMultiPart.class.isAssignableFrom(p.getParameterClass())) {
                list.add(new FormDataMultiPartInjectable());
            } else {
                list.add(null);
            }
        } else if (p.getAnnotation().annotationType() == FormDataParam.class) {
            if (Collection.class == p.getParameterClass() || List.class == p.getParameterClass()) {
                Class c = ReflectionHelper.getGenericClass(p.getParameterType());
                if (FormDataBodyPart.class == c) {
                    list.add(new ListFormDataBodyPartMultiPartInjectable(p.getSourceName()));
                } else if (FormDataContentDisposition.class == c) {
                    list.add(new ListFormDataContentDispositionMultiPartInjectable(p.getSourceName()));
                }
            } else if (FormDataBodyPart.class == p.getParameterClass()) {
                list.add(new FormDataBodyPartMultiPartInjectable(p.getSourceName()));
            } else if (FormDataContentDisposition.class == p.getParameterClass()) {
                list.add(new FormDataContentDispositionMultiPartInjectable(p.getSourceName()));
            } else {
                list.add(new FormDataMultiPartParamInjectable(p));
            }
        } else {
            Injectable injectable = getInjectableProviderContext().getInjectable(p, ComponentScope.PerRequest);
            list.add(injectable);
        }
    }
    return list;
} 
```

因此，当它看到参数类型是 List 或 Collection 时，它会在泛型类型不是 FormDataBodyPart 或 FormDataContentDisposition 的情况下忽略它。

为了解决这个问题，我刚刚更改了我的方法，以接受 p3 的逗号分隔字符串来代替列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-22T02:37:19.797

我遇到了另一种解决方案，它可能比必须手动处理列表的逗号分隔版本等更好（更简单）。迟来的发布是为了帮助其他找到这篇文章的人。

更改 multipart 参数：

```
@FormDataParam("p3") List<String> p3, 
```

至

```
@FormDataParam("p3") List<FormDataBodyPart> p3, 
```

然后你在 P3 中有你的列表，你可以在其中`FormDataBodyPart`使用`getValue()`.

来源：[接收阵列-来自-form-elements-with-jersey](https://kodingnotes.wordpress.com/2014/10/08/receiving-arrays-from-form-elements-with-jersey/)

# ios - 通过翻转到 iOS 中的另一个子视图来为子视图设置动画

> ID：11020432
> 
> 赞同：0
> 
> 时间：2012-06-13T17:43:37.483
> 
> 标签：ios, animation, subview

我有一个视图，其中有 2 个隐藏在屏幕下方的子视图。我目前的设置是当用户单击主视图中的按钮时，它会在顶部为两个子视图设置动画。发生这种情况时，仅显示 1 个子视图，而另一个在其后面。

我想要做的是当两个子视图出现时，当用户单击子视图中的按钮时，它应该翻转到另一个视图。但是，当我尝试完成此操作时，什么也没有发生。下面是我`TouchUpInside`在第一个子视图的按钮中使用的代码片段：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.StatisticsScreen cache:true];
[UIView commitAnimations]; 
```

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:20:26.087

我也有类似方法的问题。我所做的是以编程方式创建一个`UIView`（称为`panelView`），在其中添加了我需要翻转的两个视图，然后在按下按钮时添加：

```
[UIView transitionWithView:self.panelView 
                      duration:0.5f 
                       options:UIViewAnimationOptionTransitionFlipFromRight 
                    animations:^{

                        [self.view1 removeFromSuperview];
                        [self.panelView addSubview:self.view2];

                    } completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T10:35:46.070

将两个 Subviews 添加到 Superview 中，将一个 subview 设置为隐藏，以及以下代码

```
 if(!isSelected){
         isSelected = YES;

         [UIView transitionWithView:superview
                      duration:1.0f
                       options:UIViewAnimationOptionTransitionFlipFromRight
                    animations:^{

                        [subview1 setHidden:YES];
                        [subview2 setHidden:NO];

                    } completion:nil];
}else{
    isSelected = NO;
    [UIView transitionWithView:superview
                      duration:1.0f
                       options:UIViewAnimationOptionTransitionFlipFromRight
                    animations:^{

                        [subview1 setHidden:NO];
                        [subview2 setHidden:YES];

                    } completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:59:56.723

尝试这样做：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.StatisticsScreen cache:true];

[view addSubview:theViewYouWantToAppear];

[UIView commitAnimations]; 
```

当然，已经添加了子视图，所以调用的唯一效果`addSubview`就是改变子视图的顺序。

# ios - AForge FFT 给出的结果与 Accelerate FFT 不同

> ID：11020434
> 
> 赞同：1
> 
> 时间：2012-06-13T17:43:46.360
> 
> 标签：ios, fft, aforge

不知道我做错了什么。我从 Accelerate 框架获得的结果对我来说似乎不正确。任何帮助将非常感激！

这是一些比较 AForge 和 vDPS 的图表 ![下面是一些比较 AForge 和 vDPS 的图表](../Images/37be64a74208e6cbf5da4f6b145c5fc1.png) 这是我运行的 vDSP 代码

```
fftSetup = vDSP_create_fftsetup( 16, 2);

 // Convert the data into a DSPSplitComplex 
int samples = spectrumDataSize;
int samplesOver2 = samples/2;

DSPSplitComplex * complexData = new DSPSplitComplex;
float *realpart = (float *)calloc(samplesOver2, sizeof(float));
float *imagpart = (float *)calloc(samplesOver2, sizeof(float));
complexData->realp = realpart;
complexData->imagp = imagpart;    

vDSP_ctoz((DSPComplex *)realData, 2, complexData, 1,samplesOver2);

// Calculate the FFT
// ( I'm assuming here you've already called vDSP_create_fftsetup() )
vDSP_fft_zrip(fftSetup, complexData, 1, log2f(samples), FFT_FORWARD);

// Scale the data
//float scale = (float) FFT_SCALE; //scale is 32
vDSP_vsmul(complexData->realp, 1, &scale, complexData->realp, 1,samplesOver2);
vDSP_vsmul(complexData->imagp, 1, &scale, complexData->imagp, 1, samplesOver2);

vDSP_zvabs(complexData, 1, spectrumData, 1, samples);

free(complexData->realp);
free(complexData->imagp);
delete complexData;

// All done!
return spectrumData; 
```

这就是我在 AForge 中所做的

```
 foreach (float f in floatData)
            {
                if (i >= this.fft.Length)
                    break;
                this.fft[i++] = new Complex(f * fftSize, 0);
            }
            AForge.Math.FourierTransform.FFT(this.fft, FourierTransform.Direction.Forward); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:15:05.437

在下面的子程序之后

```
vDSP_ctoz((DSPComplex *)realData, 2, complexData, 1,samplesOver2); 
```

被执行，`complexData`有`samplesOver2`元素。但不久之后，你打电话给

```
vDSP_zvabs(complexData, 1, spectrumData, 1, samples); 
```

它期望`complexData`有`samples`元素，即两倍。这不可能。

还有，怎么`realData`布置的？我问是因为`vDSP_ctoz`希望它的第一个论点以表格形式列出

```
real0, imag0, real1, imag1, ... real(n-1), imag(n-1). 
```

如果您的数据确实是真实的，那么`imag0, imag1, ... imag(n-1)`应该全部为 0。如果不是，那么`vDSP_ctoz`可能不会期待。（除非您以某种聪明的方式打包真实数据，否则这将是两个 [原文如此] 聪明一半！）

最后，`vDSP_create_fftsetup( 16, 2);`大概应该改成

```
vDSP_create_fftsetup(16, 0); 
```

==================================================== ==================

我的示例代码附加在后记中：

```
 FFTSetup fftSetup = vDSP_create_fftsetup(
                                           16,         // vDSP_Length __vDSP_log2n,
                                           kFFTRadix2  // FFTRadix __vDSP_radix
                                           // CAUTION: kFFTRadix2 is an enum that is equal to 0
                                           //          kFFTRadix5 is an enum that is equal to 2
                                           // DO NOT USE 2 IF YOU MEAN kFFTRadix2
                                           );
  NSAssert(fftSetup != NULL, @"vDSP_create_fftsetup() failed to allocate storage");

  int numSamples = 65536;  // numSamples must be an integer power of 2; in this case 65536 = 2 ^ 16
  float realData[numSamples];

  // Prepare the real data with (ahem) fake data, in this case
  // the sum of 3 sinusoidal waves representing a C major chord.
  // The fake data is rigged to have a sampling frequency of 44100 Hz (as for a CD).
  // As always, the Nyquist frequency is just half the sampling frequency, i.e., 22050 Hz.
  for (int i = 0; i < numSamples; i++)
  {
    realData[i] = sin(2 * M_PI * 261.76300048828125 * i / 44100.0)  // C4 = 261.626 Hz
                + sin(2 * M_PI * 329.72717285156250 * i / 44100.0)  // E4 = 329.628 Hz
                + sin(2 * M_PI * 392.30804443359375 * i / 44100.0); // G4 = 391.995 Hz
  }

  float splitReal[numSamples / 2];
  float splitImag[numSamples / 2];

  DSPSplitComplex splitComplex;
  splitComplex.realp = splitReal;
  splitComplex.imagp = splitImag;

  vDSP_ctoz(
            (const DSPComplex *)realData,  // const DSPComplex __vDSP_C[],
            2,                             // vDSP_Stride __vDSP_strideC,  MUST BE A MULTIPLE OF 2
            &splitComplex,                 // DSPSplitComplex *__vDSP_Z,
            1,                             // vDSP_Stride __vDSP_strideZ,
            (numSamples / 2)               // vDSP_Length __vDSP_size
            );

  vDSP_fft_zrip(
                fftSetup,                               // FFTSetup __vDSP_setup,
                &splitComplex,                          // DSPSplitComplex *__vDSP_ioData,
                1,                                      // vDSP_Stride __vDSP_stride,
                (vDSP_Length)lround(log2(numSamples)),  // vDSP_Length __vDSP_log2n,
                // IMPORTANT: THE PRECEDING ARGUMENT MUST BE LOG_BASE_2 OF THE NUMBER OF floats IN splitComplex
                // FOR OUR EXAMPLE, THIS WOULD BE (numSamples / 2) + (numSamples / 2) = numSamples
                kFFTDirection_Forward                   // FFTDirection __vDSP_direction
                );

  printf("DC component = %f\n", splitComplex.realp[0]);
  printf("Nyquist component = %f\n\n", splitComplex.imagp[0]);

  // Next, we compute the Power Spectral Density (PSD) from the FFT.
  // (The PSD is just the magnitude-squared of the FFT.)
  // (We don't bother with scaling as we are only interested in relative values of the PSD.)
  float powerSpectralDensity[(numSamples / 2) + 1];  // the "+ 1" is to make room for the Nyquist component

  // We move the Nyquist component out of splitComplex.imagp[0] and place it
  // at the end of the array powerSpectralDensity, squaring it as we go:
  powerSpectralDensity[numSamples / 2] = splitComplex.imagp[0] * splitComplex.imagp[0];

  // We can now zero out splitComplex.imagp[0] since the imaginary part of the DC component is, in fact, zero:
  splitComplex.imagp[0] = 0.0;

  // Finally, we compute the squares of the magnitudes of the elements of the FFT:
  vDSP_zvmags(
              &splitComplex,         // DSPSplitComplex *__vDSP_A,
              1,                     // vDSP_Stride __vDSP_I,
              powerSpectralDensity,  // float *__vDSP_C,
              1,                     // vDSP_Stride __vDSP_K,
              (numSamples / 2)       // vDSP_Length __vDSP_N
              );

  // We print out a table of the PSD as a function of frequency
  // Replace the "< 600" in the for-loop below with "<= (numSamples / 2)" if you want
  // the entire spectrum up to and including the Nyquist frequency:
  printf("Frequency_in_Hz    Power_Spectral_Density\n");
  for (int i = 0; i < 600; i++)  
  {
    printf("%f,          %f\n", (i / (float)(numSamples / 2)) * 22050.0, powerSpectralDensity[i]);
    // Recall that the array index i = 0 corresponds to zero frequency
    // and that i = (numSamples / 2) corresponds to the Nyquist frequency of 22050 Hz.
    // Frequency values intermediate between these two limits are scaled proportionally (linearly).
  }

  // The output PSD should be zero everywhere except at the three frequencies
  // corresponding to the C major triad.  It should be something like this:

/***************************************************************************
 DC component = -0.000000
 Nyquist component = -0.000000

 Frequency_in_Hz    Power_Spectral_Density
 0.000000,          0.000000
 0.672913,          0.000000
 1.345825,          0.000000
 2.018738,          0.000000
 2.691650,          0.000000
 .
 .
 .
 260.417175,          0.000000
 261.090088,          0.000000
 261.763000,          4294967296.000000
 262.435913,          0.000000
 263.108826,          0.000000
 .
 .
 .
 328.381348,          0.000000
 329.054260,          0.000000
 329.727173,          4294967296.000000
 330.400085,          0.000000
 331.072998,          0.000000
 .
 .
 .
 390.962219,          0.000000
 391.635132,          0.000000
 392.308044,          4294966784.000000
 392.980957,          0.000000
 393.653870,          0.000000
 .
 .
 .
***************************************************************************/

  vDSP_destroy_fftsetup(fftSetup); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:22:00.223

这一行：

```
vDSP_zvabs(complexData, 1, spectrumData, 1, samples); 
```

应该：

```
float cr = complexData->realp[0], ci = complexData->imagp[0];
vDSP_zvabs(complexData, 1, spectrumData, 1, samplesOver2);
spectrumData[0] = cr*cr;
spectrumData[samplesOver2] = ci*ci; // See remarks below. 
```

这是因为 N 个样本的实数到复数 FFT 返回 N/2+1 个结果。其中两个结果是实数，它们被打包到 complexData->realp[0] 和 complexData->imagp[0] 中。剩余的 N/2-1 个结果是复数，通常与 complexData->realp[i] 中的实部和 complexData->imagp[i] 中的虚部一起存储，对于 0 < i < N/2。

vDSP_zvabs 计算复数的大小，除了第一个输出（在频谱数据 [0] 中）由于将两个数字打包到 [0] 元素中而导致不正确。用 cr*cr 覆盖spectrumData[0] 可以纠正这个问题。如果已经为此提供了空间，您还可以将其他压缩元素的幅度（奈奎斯特频率）写入频谱数据[samplesOver2]。

其他一些注意事项：

SpectrumDataSize 必须是 2 的幂。

将以二为底的对数计算为 log2f(samples) 并不是理想的做法。我认为我们（Apple）已经让 log2f 为 2 的整数幂返回完全正确的结果，但是除非非常确定，否则应该避免依赖浮点的准确性。

无需使用“new”动态分配 DSPSplitComplex。它是仅包含两个指针的 POD（普通旧数据），因此您可以简单地声明“DSPSplitComplex complexData”并将其用作结构，而不是指向结构的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T21:19:18.413

一些想法。。

```
int numberOfInputSamples = ..;
int numberOfInputSamplesOver2 = numberOfInputSamples/2;

fftSetup = vDSP_create_fftsetup( log2(numberOfInputSamples), FFT_RADIX2 );
...
Float32 scale = (Float32) 1.0 / (2 * numberOfInputSamples);                
...
float *spectrumData = (float *)calloc( numberOfInputSamplesOver2, sizeof(float));
vDSP_zvabs( complexData, 1, spectrumData, 1, numberOfInputSamplesOver2 ); 
```

所以最后你会有 numberOfInputSamplesOver2 浮点数，对吧？

*（技术上它是 numberOfInputSamplesOver2+1 但整个包装是另一个问题）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:03:58.753

您似乎正在为长度 N/2 计算一个 FFT，为长度 N 计算一个 FFT。因此，不同长度 FFT 的结果不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T02:27:05.377

我假设因为您调用`vDSP_ctoz`的是您的数据不是奇数。如果是这种情况，您还需要在 fft 之后将其解压缩。

来自[vDSP 编程指南](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vDSP_Programming_Guide/UsingFourierTransforms/UsingFourierTransforms.html#//apple_ref/doc/uid/TP40005147-CH202-BBCEAFDD)：

> 调用真正 FFT 的应用程序可能必须使用两个转换函数，一个在 FFT 调用之前，一个在 FFT 调用之后。如果输入数组不在奇偶分割配置中，则这是必需的。

[示例代码说明了这一点](http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html#//apple_ref/doc/uid/TP40005147-CH205-45465)

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T23:57:18.160

我对 AForge 或 Accelerate 都不熟悉，但在另一个处理 2D 图像的项目中升级 FFT 库时，我确实遇到了一些问题，在我看来，这与您的类似。

事实证明，来自 FFT 库的输出数据表示不是唯一的，对于某些应用程序，如果“交换”输出数据会更方便，以便将低频放在中心而不是角落。

如果您在 FFT 算法上查看此页面[http://www.eso.org/sci/software/eclipse/eug/eug/man/fft.html](http://www.eso.org/sci/software/eclipse/eug/eug/man/fft.html)，您会注意到两种格式都受支持，并且交换结构描述（在底部）。

在我看来，如果你在中心周围交换（镜像）数据数组的右半部分，你在右边绘制的数据看起来更像左边的数据。

# r - 在缺少数据的情况下，geom_bar 的宽度一致

> ID：11020437
> 
> 赞同：56
> 
> 时间：2012-06-13T17:43:51.303
> 
> 标签：r, ggplot2

`geom_bar()`如果在下面的时间序列示例中丢失数据，有没有办法设置一个恒定的宽度？我试过没有运气`width`。`aes()`在代码示例下方的图中比较 2011 年 5 月和 11 年 6 月的条形宽度。

```
colours <- c("#FF0000", "#33CC33", "#CCCCCC", "#FFA500", "#000000" )
iris$Month <- rep(seq(from=as.Date("2011-01-01"), to=as.Date("2011-10-01"), by="month"), 15)

colours <- c("#FF0000", "#33CC33", "#CCCCCC", "#FFA500", "#000000" )
iris$Month <- rep(seq(from=as.Date("2011-01-01"), to=as.Date("2011-10-01"), by="month"), 15)
d<-aggregate(iris$Sepal.Length, by=list(iris$Month, iris$Species), sum)
d$quota<-seq(from=2000, to=60000, by=2000)
colnames(d) <- c("Month", "Species", "Sepal.Width", "Quota")
d$Sepal.Width<-d$Sepal.Width * 1000
g1 <- ggplot(data=d, aes(x=Month, y=Quota, color="Quota")) + geom_line(size=1)
g1 + geom_bar(data=d[c(-1:-5),], aes(x=Month, y=Sepal.Width, width=10, group=Species, fill=Species), stat="identity", position="dodge") + scale_fill_manual(values=colours) 
```

![阴谋](../Images/01e2fedcb2871ec716885a9cedcc65d4.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2018-08-07T15:47:58.600

**ggplot2 3.0.0**中引入的一些新选项`position_dodge()`和新选项可以提供帮助。`position_dodge2()`

 **您可以使用`preserve = "single"`in`position_dodge()`来确定单个元素的宽度，因此所有条形的宽度将相同。

```
ggplot(data = d, aes(x = Month, y = Quota, color = "Quota")) + 
     geom_line(size = 1) + 
     geom_col(data = d[c(-1:-5),], aes(y = Sepal.Width, fill = Species), 
              position = position_dodge(preserve = "single") ) + 
     scale_fill_manual(values = colours) 
```

![](../Images/8af53d07e6191e30e32bfa958fb60a0a.png)

使用`position_dodge2()`改变事物的居中方式，在每个 x 轴位置将每组条居中。它有一些`padding`内置的，所以`padding = 0`用来删除。

```
ggplot(data = d, aes(x = Month, y = Quota, color = "Quota")) + 
     geom_line(size = 1) + 
     geom_col(data = d[c(-1:-5),], aes(y = Sepal.Width, fill = Species), 
              position = position_dodge2(preserve = "single", padding = 0) ) + 
     scale_fill_manual(values = colours) 
```

![](../Images/f5a7fea02512147247c9abb3b112830e.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-13T19:16:22.683

最简单的方法是补充您的数据集，以便每个组合都存在，即使它具有`NA`其价值。举一个更简单的例子（因为你的有很多不需要的功能）：

```
dat <- data.frame(a=rep(LETTERS[1:3],3),
                  b=rep(letters[1:3],each=3),
                  v=1:9)[-2,]

ggplot(dat, aes(x=a, y=v, colour=b)) +
  geom_bar(aes(fill=b), stat="identity", position="dodge") 
```

![在此处输入图像描述](../Images/edf6203be656039a6164bff2484ed7b4.png)

这显示了您试图避免的行为：在“B”组中，没有“a”组，因此条形更宽。用和`dat`的所有组合补充一个数据框：`a``b`

```
dat.all <- rbind(dat, cbind(expand.grid(a=levels(dat$a), b=levels(dat$b)), v=NA))

ggplot(dat.all, aes(x=a, y=v, colour=b)) +
  geom_bar(aes(fill=b), stat="identity", position="dodge") 
```

![在此处输入图像描述](../Images/9d7ab2bbba35ea519d8b9f82890d6197.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-10-19T08:38:53.050

我遇到了同样的问题，但正在寻找一种适用于管道 ( `%>%`) 的解决方案。使用`tidyr::spread`and `tidyr::gather`from 就`tidyverse`可以了。我使用与@Brian Diggs 相同的数据，但使用大写的变量名在转换为宽时不会以双变量名结束：

```
library(tidyverse)

dat <- data.frame(A = rep(LETTERS[1:3], 3),
                  B = rep(letters[1:3], each = 3),
                  V = 1:9)[-2, ]
dat %>% 
  spread(key = B, value = V, fill = NA) %>% # turn data to wide, using fill = NA to generate missing values
  gather(key = B, value = V, -A) %>% # go back to long, with the missings
  ggplot(aes(x = A, y = V, fill = B)) +
  geom_col(position = position_dodge()) 
```

**编辑：**

实际上有一个更简单的解决方案可以结合管道来解决这个问题。使用`tidyr::complete`在一行中给出相同的结果：

```
dat %>% 
  complete(A, B) %>% 
  ggplot(aes(x = A, y = V, fill = B)) +
  geom_col(position = position_dodge()) 
```**

# java - 应该返回带有 html 代码的字符串的支持 bean 属性返回空字符串

> ID：11020438
> 
> 赞同：2
> 
> 时间：2012-06-13T17:43:53.570
> 
> 标签：java, html, jsf, facelets, jsf-1.2

我的支持 bean 中有一个返回 html 代码的属性：

```
public String getHtmlPrevisualizar() {
    return "<html><head><title></title></head><body>Hello world.</body></html>";
} 
```

我想要做的是在 iframe 中显示这个 html 代码。我用javascript做这个。这是 xhtml 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <f:loadBundle basename="resources" var="msg" />
<head>
    <title>#{msg['pageTitle']}</title>
</head>
<body>
<ui:composition template="/WEB-INF/facelets/templates/sqa/plantilla.xhtml">  
    <ui:define name="title">#{msg['pageTitle']}</ui:define>
    <ui:define name="javascript">
        <script type="text/javascript">
            function showPreview() {
                var doc = document.getElementById('iframePreview').contentWindow.document;
                doc.open();
                doc.write('#{nuevoEditarEstructura.htmlPrevisualizar}');
                doc.close();
                return false;
            }
            function showPreview2() {
                var doc = document.getElementById('iframePreview').contentWindow.document;
                doc.open();
                doc.write('<html><head><title></title></head><body>Hello world.</body></html>');
                doc.close();
                return false;
            }
        </script>
    </ui:define>
    <ui:define name="content">
        <h:form>
            <a4j:commandLink value="Preview" styleClass="boton" onclick="showPreview();"/>
            <a4j:commandLink value="Preview2" styleClass="boton" onclick="showPreview2();"/>
            <br/>
            <br/>
            <h:outputText value="#{nuevoEditarEstructura.htmlPrevisualizar}" />
            <br/>
            <br/>
            #{nuevoEditarEstructura.htmlPrevisualizar}
            <br/>
            <br/>
        </h:form>
        <iframe id="iframePreview">
        </iframe>
    </ui:define>  
</ui:composition>
</body>
</html> 
```

有两个命令链接。第一个从支持 bean 获取 html 代码，第二个将 html 代码写在 javascript 中的字符串中。第一个 commandLink 不起作用。如果我查看页面的源代码，应该从支持 bean 返回的值是空的。

我还使用以下方法打印了支持 bean 中属性的值：

```
 <h:outputText value="#{nuevoEditarEstructura.htmlPrevisualizar}" />
        <br/>
        <br/>
        #{nuevoEditarEstructura.htmlPrevisualizar} 
```

但什么都没有显示。我`getHtmlPrevisualizar()`在 Eclipse 控制台中调用并打印了它的内容，它返回了正确的 html 代码。

我知道转义字符和 facelets 可能存在一些问题，我期望必须处理 html 中被转义的字符，但我什么也没得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:52:57.423

`escape="false"`在您的`<h:outputText />`标签组件中设置

```
<h:outputText value="#{nuevoEditarEstructura.htmlPrevisualizar}" escape="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:08:34.677

嗯，这很尴尬。问题是支持 bean 名称拼写错误，仅此而已。我希望我们能得到某种警告，而不是默默地失败。

# xml - 将 base64 编码图像添加到 Microsoft Word 文档

> ID：11020447
> 
> 赞同：4
> 
> 时间：2012-06-13T17:44:19.287
> 
> 标签：xml, xslt, base64, word-2007, word-2003

我想将图像添加到我的 Word 文档中，该图像应作为 base64 编码图像添加。我有一个jpeg。如何将其作为 base64 编码数据添加到我的 Word 文档中？我做了一些研究，知道有[这个网站](http://www.motobit.com/util/base64-decoder-encoder.asp)可以将图像转换为 base64 编码数据。但我不知道如何将它添加到 Word 文档中。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:22:44.287

将图像编码为 base64，然后将 base64 字符串粘贴到 Word 文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T04:34:10.673

既然您说“我的 Word 文档”，我知道这将是 MS Word 可以打开的文档类型之一。而您的问题是将 base64 编码图像添加到 Word 文档内容中（不添加资源文件）。答案是使用 OpenXML 文档。

OpenXML 文档格式允许将 base64 编码图像直接添加到它的源中，无需创建新的外部资源。

实际上，当您使用 MSWord 打开 OpenXML 文档，然后将图像粘贴到其中时，该图像将保存为 base64 编码的文档。您可以通过使用 Notepadd++ 打开文档来重新检查。

# mysql - MySQL 仅在插入或唯一键上更改排序规则

> ID：11020448
> 
> 赞同：0
> 
> 时间：2012-06-13T17:44:27.300
> 
> 标签：mysql, unicode, utf-8, collation

我有一列被整理为 utf8_unicode_ci。我必须保留它，因为已经针对它编写了很多查询，所有查询都假定该排序规则。我的问题是我希望能够插入具有不同口音的东西（即分别为 apfel 和 äpfel）。因为此列上有唯一键并且 utf8_unicode_ci 认为 apfel 和 äpfel 相同，有没有一种简单的方法可以仅在唯一键约束上更改排序规则，或者仅在插入到 utf8_bin 时更改排序规则，这样我就可以将内容放入仅在重音上不同而不更改列的排序规则的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:49:46.717

没有“简单”的解决方案——列排序规则定义了值的相等性和顺序。在不破坏唯一约束的情况下，您不能在列中同时拥有 apfel 和 äphel。

您可以做的一件事是添加一个新列，使用 utf8_bin 进行整理，然后从第一列中删除唯一键并创建这个新列键。然后添加一个触发器，将在原始列中插入或更新的值复制到新列。

# jquery - 为什么当我克隆它时，jQuery 会向 div 及其所有子项添加“visibility:hidden”？

> ID：11020449
> 
> 赞同：0
> 
> 时间：2012-06-13T17:44:28.197
> 
> 标签：jquery, dom, clone, visibility

所以，我有一个这样的模板 div：

```
<div class='container'>
  <div class='mybox invisible' id='template'>
     <span>some stuff</span>
     <div>test</div>
  </div>
</div> 
```

所以我想克隆它以基于它创建项目。

```
new_item = $('#template').clone()
$(new_item).removeClass('invisible').attr('id','some_crap').appendTo('.container') 
```

它工作得很好。但是，如果我在 DOCUMENT READY 上运行此代码（以预加载某些项目），那么所有内容都会获得内联**可见性：隐藏**添加（.mybox div 及其所有子项）。

我现在的解决方法是，等待 1 秒，而不是在 dom 就绪时预加载我的项目。

```
setTimeout (->
    preloadOffices()
), 1000 
```

（是的，咖啡脚本）

这似乎可以解决问题，但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:50:47.793

`.clone()`不会向它克隆的对象添加任意样式值。因此，我认为这里只有两种可能的解释：

1.  这些对象实际上是`visibility: hidden`在`document.ready()`time 并且一些代码实际上使您的另一个对象稍后可见。 `.clone()`只是按原样复制对象。它不会向它们添加任意样式值。

2.  `visibility: hidden`克隆对象后，其他一些代码正在生成克隆对象。

如果您向我们展示您的实际页面，我们很可能会弄清楚到底发生了什么。

您可以通过单步调试代码并观察代码运行时的状态来自行调试。或者，您可以插入一些 console.log 语句来检查事物的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:51:59.153

试试这个代码..

```
//clones the div on window.load and sets attribute id
    $(window).load(function(){

    new_item = $('#template').clone();
    $(new_item).attr('id','some_crap').appendTo('.container')

    });

//on document.ready remove class

    $(function(){

    $('#some_crap').removeClass('invisible');

    }); 
```

# c# - 来自 JSON 的自定义 C# 类名称

> ID：11020451
> 
> 赞同：0
> 
> 时间：2012-06-13T17:44:36.370
> 
> 标签：c#, json, winrt-xaml, datacontractjsonserializer

我有一些 JSON 可以很好地反序列化（使用 DataContractJsonSerializer）：

```
class Datum { /* properties */ } 
```

是否有装饰（在 WinRT 中）来欺骗序列化程序？

像这样的东西：

```
[DataContract(Name="Datum")]
class Hamburger { /* properties */ } 
```

不幸的是，这不起作用。

我只想要一个汉堡包类，而不是“基准”类。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:54:16.180

那么 [DataContract(Name="Datum")] 是正确的答案。我的问题似乎是，一旦您使用 [DataContract]，您需要在所有属性上使用 [DataMember]。否则反序列化后所有属性都为空。

# html - 无法显示我的图像

> ID：11020452
> 
> 赞同：0
> 
> 时间：2012-06-13T17:44:41.477
> 
> 标签：html, css, hover, position

我正在构建的页面有问题。我有一个带有一些包含外部 div 的控件的 Js 循环，并且 arrow_back 类将显示悬停状态，但不会显示正常状态。完全相同的代码适用于 arrow_forward 按钮（包括本机和悬停状态。）这是它的 css：

```
.arrow_back{
  width:42px;
  height:42px;
  position:relative;
  z-index:9999;
  left:8px;
  top:-83px;
}
.arrow_back:hover{
  background:url(../images/arrow_back_hover.png) no-repeat;
}
.arrow_forward{
  background:url(../images/arrow_forward.png) no-repeat;
  width:42px;
  height:42px;
  position:relative;
  top:-84px;
  right:-637px;
  z-index:9999;
}
.arrow_forward:hover{
  background:url(../images/arrow_forward_hover.png) no-repeat;
} 
```

和html：

```
<div class="image">
  <div class="slideshow">
    <img src="images/inside/cycle1.jpg" />
    <img src="images/inside/cycle2.jpg" />
    <img src="images/inside/cycle3.jpg" />
  </div>
</div>
  <div class="controls">
    <img src="images/arrow_back.png" width="42" height="42" class="arrow_back" />
    <img src="images/arrow_blank.png" class="arrow_forward" />
  </div> 
```

如果有人可以提供一些建议。到目前为止，我整个星期都在盯着代码，我的大脑有点烤焦了。这可能是非常明显的事情，我只需要新的眼光。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:48:58.133

您缺少 arrow_back 类的背景图像。

```
.arrow_back{
  background:url(../image/arrow_back.png) no-repeat;
  width:42px;
  height:42px;
  position:relative;
  z-index:9999;
  left:8px;
  top:-83px;
}
.arrow_back:hover{
  background:url(../images/arrow_back_hover.png) no-repeat;
} 
```

另外，我删除了 javascript 标签，因为这与 javascript 没有任何关系。

# c# - 使用“浏览对话框”添加用户后，无法在 PeopleEditor 中以编程方式添加用户帐户

> ID：11020461
> 
> 赞同：0
> 
> 时间：2012-06-13T17:45:50.413
> 
> 标签：c#, sharepoint

我有 SharePoint PeopleEditor 的简单页面： PickerPage.aspx 中的代码：

```
<asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">
<table border="0" cellspacing="0" cellpadding="0" class="ms-propertysheet" width="100%">
<wssuc:InputFormSection Title="People Editor" runat="server">
<Template_InputFormControls>
<wssuc:InputFormControl LabelText="Select Users:" runat="server">
<Template_Control>
<SharePoint:PeopleEditor AllowEmpty="true" ValidatorEnabled="true" ID="RespondentPeopleEditor" runat="server" MultiSelect="true" Width="280"
DialogHeight="400" DialogWidth="500" DialogTitle="Choose"
ShowCreateButtonInActiveDirectoryAccountCreationMode="true" SelectionSet="User" />
</Template_Control>
</wssuc:InputFormControl>
</Template_InputFormControls>
</wssuc:InputFormSection>
</table>
<asp:Button runat="server" ID="AddBtn" Text="Add User1" OnClick="AddBtn_Click" UseSubmitBehavior="false" />
</asp:Content> 
```

PickerPage.aspx.cs 中的代码：

```
public partial class PickerPage2 : LayoutsPageBase
{
    protected PeopleEditor RespondentPeopleEditor;
    protected Label ResultLbl;
    protected Button AddBtn;

    protected void Page_Load(object sender, EventArgs e)
    {}
    protected void AddBtn_Click(object sender, EventArgs e)
    {
        string accs = RespondentPeopleEditor.CommaSeparatedAccounts;
        if (!String.IsNullOrEmpty(accs)) accs += ",";
        accs += "domain\\user1";
        RespondentPeopleEditor.CommaSeparatedAccounts = accs;

    }
} 
```

当我加载页面并单击“添加 User1”按钮时，User1 已成功添加到 PeopleEditor。但是，当我加载页面并使用默认对话框（浏览）在 PeopleEditor 中添加 User2，然后单击按钮添加第二个用户（User1）时，User2 仍保留在 PeopleEditor 中，但 User1 未添加到 PeopleEditor。使用标准添加对话框后，如何以编程方式在 PeopleEditor 中添加用户？

# php - 在 Zend 中使用另一个表中的键从表中选择行

> ID：11020469
> 
> 赞同：1
> 
> 时间：2012-06-13T17:46:33.223
> 
> 标签：php, mysql, zend-framework

我有两个表，一个用户表和一个应用程序表：

```
User
    id
    username
application
    id
    user_id
    ... 
```

要获取应用程序，我希望能够通过应用程序 ID 或用户名选择应用程序。通过应用程序 ID 获取应用程序很简单，`$row = $this->fetchRow("id = $id");`但我不知道如何通过用户名获取应用程序。以下是我目前在我的模型中的相关代码。

```
protected $_referenceMap = array (
    'User' => array (
        'columns'           => 'user_id',
        'refTableClass'     => 'Application_Model_DbTable_User',
        'refColumns'        => 'id'
    )
);

public function get_application($id) {
    if(is_numeric($id)) {
        $row = $this->fetchRow("id = $id");
    } else {
        //get application by username
    } 
    return $row->toArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:28:16.710

如果我正确理解你的问题，我想你只是想要：

```
$userRow = array_shift($this->findDependentRowset('User')); 
```

编辑：等等，不，这是不对的。一旦你已经获得了正确的应用程序，它就会找到用户。

假设你也有逆向关系，你应该能够做到这一点：

```
$userTable = new Application_Model_DbTable_User();
$userRow = $userTable->fetchRow('username = ?' , $username); // or whatever
$applicationRow = $userRow->findParentRow('Application'); 
```

# excel - 粘贴值后工作表更改事件不起作用

> ID：11020472
> 
> 赞同：1
> 
> 时间：2012-06-13T17:46:55.637
> 
> 标签：excel, vba

我有一个代码`Worksheet_Change`

如果第 9 列被更新，则第 8 列将通过乘以第 9 列和第 11 列来自动填充。

但是当用户在列中粘贴值时，更改事件无法正常工作。只有 Col 8 中的第一个单元格被更新。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:51:19.597

试试这个

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa
    Application.EnableEvents = False

    If Target.Columns.Count > 1 Then GoTo LetsContinue

    If Not Intersect(Target, Columns(9)) Is Nothing Then
        Dim aCell As Range

        For Each aCell In Target
            aCell.Offset(, -1).Value = aCell.Value * aCell.Offset(, 2)
        Next
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# c++ - C ++在发送的同一端口上接收UDP数据包

> ID：11020473
> 
> 赞同：2
> 
> 时间：2012-06-13T17:46:58.603
> 
> 标签：c++, sockets, udp, port

我有 2 个 UDP 套接字 ( `SOCKET`)，一个用于发送，一个用于在 Windows 机器上接收。它们都工作得很好，但问题是从我的发送套接字接收消息的程序回复到发送消息的同一端口。

我知道如果我不绑定发送套接字，使用`sendto`将选择一个临时端口进行发送。

我想知道是否可以执行以下任何操作，如果可以，推荐的方法是什么：

*   将发送和接收套接字都绑定到选定的端口，以便在外部程序发回消息时可以接收到它。
*   更新接收套接字绑定的端口，以便在我上次发送消息的端口上接收（不确定这是否会产生竞争条件）。
*   其他一些正确的方法。

到目前为止，我已经尝试过：

*   不绑定发送套接字（它从某个开放端口发送到目标端口）。只要它不改变，我就可以在该端口上成功接收消息，但最终它会改变。
*   将发送和接收套接字绑定到所需的端口。当我使用嗅探器观察数据包时，这会产生所需的行为，但接收套接字永远不会接收到消息，即使我看到它们被传输到正确的端口和 IP。

从多个外部实体接收数据包，并且不保证按任何特定顺序。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:27:25.280

看起来您正在尝试使用线程来分离发送和接收数据。我会质疑这种方法，因为 UDP 在一个线程中很容易处理。不过，如果需要，您可以只使用两个线程*中的相同套接字（请参阅相关问题：*[在同一个套接字上对发送/接收的并行调用有效吗？](https://stackoverflow.com/questions/1981372/are-parallel-calls-to-send-recv-on-the-same-socket-valid)）。只是`bind(2)`它，并且，可选地，`connect(2)`它。

# jquery - iframe 跨域 - 无法交互

> ID：11020479
> 
> 赞同：1
> 
> 时间：2012-06-13T17:47:15.950
> 
> 标签：jquery, iframe

我使用 iframe 显示来自跨域的内容（这用于网站调查）。但问题是我无法与 iframe 内容进行交互。有诸如“是”、“否”之类的按钮，但单击它时没有任何反应。是不是因为我们正在访问跨域，浏览器阻止访问？

这个（jquery）的替代方案/解决方案是什么？

我可以决定要显示的内容，因为它是调查。我把问题放在调查网站上，它会显示在我的网站上。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:49:02.797

浏览器会阻止您使用脚本访问跨域 iframe 内容。您应该可以自己用鼠标单击按钮。但是，您不能使用站点上的任何脚本与 iframe 的内容进行交互。

一些网站包含代码以防止它们在嵌入 iframe 时被正确使用。如果您遇到问题，您可能需要检查调查网站是否使用这样的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:49:08.357

按照提问的顺序回答

1) 是的，见[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

2) 替代品：

*   jsonp（仅当服务器允许时）
*   做一个服务器端代理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:51:18.027

你不能。跨域安全可以防止它。

您需要使用 curl 获取页面并显示内容的 php 页面，然后将其加载到 iframe 中，以便文件和容器页面来自同一个域。

# java - 具有多个数据类型字段的Java枚举？

> ID：11020480
> 
> 赞同：1
> 
> 时间：2012-06-13T17:47:16.597
> 
> 标签：java, enums

我有以下领域

```
a(String)
b(String)
c(String)
d(boolean)
e(boolean) 
```

是否可以将它们全部放在一个枚举中，如下所示？

```
public enum Fields {
  a("A")
  b("B")
  c("C")
  d(true)
  e(false)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:51:21.203

您可以拥有它们，但您应该定义采用 `String`或`boolean`作为参数的构造函数。

```
public enum Constants {

CONSTANT_STRING1("CONSTANT_VALUE1"), 
CONSTANT_STRING2("CONSTANT_VALUE2"), 
CONSTANT_STRING3("CONSTANT_VALUE3");
CONSTANT_FLAG1(false);
CONSTANT_FLAG2(true);

private String constants;
private boolean flag;

private Constants(String cons) {
this.constants = cons;
}

private Constants(boolean lFlag) {
this.flag= lFlag;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:49:20.783

听起来您正在使用枚举来存储常量，这是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:41:07.817

这是可能的，但我建议不要这样做。在大多数情况下，您真正​​想要的是一个通用接口，它由两个（或更多）不同的类实现。

另请注意，枚举实现接口是完全合法的，但很少看到两个枚举实现相同的接口，如下例所示：

```
public interface Fields {
}

public enum StringFields implements Fields {

    A("A"),
    B("B"),
    C("C")

    private StringFields(String str) {
        this.str = str;
    }

    private final String str;
}

public enum BooleanFields implements Fields {

    D(true),
    E(false);

    private BooleanFields(boolean val) {
        this.val = val;
    }

    private final boolean val;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-13T17:49:29.113

您可以在枚举中有两个不同的构造函数，但这意味着您需要有两个字段（其中一个未设置）。我认为这没有多大意义。

```
public enum Fields {
    a("A"), b("B"), c("C"), d(true), e(false);

    Fields(String str) {

        strval = str;
        value = false;

    }

    Fields(boolean val) {

        strval = null;
        value = val;

    }

    private final String strval;
    private final boolean value;

} 
```

已编辑*** 现在编译。您必须同时初始化两者。

# windows - x86 程序中的控制台

> ID：11020485
> 
> 赞同：2
> 
> 时间：2012-06-13T17:47:36.290
> 
> 标签：windows, assembly, console, x86

```
.386
.model  flat, stdcall
option  casemap:none

include windows.inc
include kernel32.inc
include user32.inc

includelib user32.lib
includelib kernel32.lib

Main        proto

.data

hOutput dd 0
bReadWritten dd 0
szText1 db "What's your name?",0

hInput dd 0

szInput db 128 dup(0)

.data?

.code
start:

Invoke Main
Invoke ExitProcess,0

Main proc
    invoke GetStdHandle, STD_OUTPUT_HANDLE
    mov hOutput, eax

    invoke GetStdHandle,STD_INPUT_HANDLE
    mov hInput, eax

    invoke lstrlen, addr szText1
    invoke WriteFile, hOutput, addr szText1, eax, ADDR bReadWritten, NULL

    invoke ReadFile, hInput, addr szInput, 128, ADDR bReadWritten,0

    ret
Main endp   

end start 
```

执行此程序后没有任何反应。为什么没有出现控制台窗口？

**后记**

组装选项（winAsm）：

> /Zi /Zd /c /coff /Cp /nologo

链接器选项

> /SUBSYSTEM:WINDOWS /DEBUG /DEBUGTYPE:CV /VERSION:4.0 /INCREMENTAL:NO

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:28:05.850

```
/SUBSYSTEM:WINDOWS 
```

现在可以回答了。这是错误的选项，它声明该程序是本机 Windows 程序。它负责使用 CreateWindow() api 函数创建自己的窗口。您当然也可以从汇编程序中调用它，只是通常不这样做。您至少要使用 C 编译器来完成创建窗口类和正确编写窗口过程的繁琐工作。就像 Petzold 在他开创性的“Programming Windows”一书中向我们展示的那样。

如果您希望 Windows 为您创建一个控制台窗口，那么您必须要求它：

```
/SUBSYSTEM:CONSOLE 
```

# c++ - g ++损坏文件并导致其大量增长

> ID：11020488
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:47:48.700
> 
> 标签：c++, g++

编辑：哎呀！我的意思是包括我的编译命令。我使用“g++ -g -o war war.h war.cpp”

编辑 2：这是我使用 gcc 版本 4.4.3 (Ubuntu 4.4.3-4ubuntu5) 编译的 Linux 服务器。另外，我试图重现该问题但无法重现，所以我现在真的不知道是什么原因造成的。

一时兴起，我决定用 C++ 制作一个战争（纸牌游戏）模拟器。我正在启动程序，我用我的所有#includes 编写了一个头文件，并将源代码放在另一个文件中。我不小心在头文件和源代码中都有#includes，当我尝试编译时，它开始给我所有这些错误说（例如）：

> war.cpp:3815：错误：程序war.cpp：3815：12中的杂散'\20'：警告：忽略空字符war.cpp：3815：错误：程序war.cpp中的杂散'\21'： 3815：错误：程序war.cpp：3815：18中的杂散“\ 231”：警告：忽略空字符war.cpp：3815：错误：程序war.cpp中的杂散“\ 20”：3815：20：警告：空字符被忽略war.cpp:3815：错误：程序war.cpp:3815中的杂散'\20'：错误：程序war.cpp:3815中的杂散'\212'：错误：杂散'\217 '在程序中

请记住，此时此程序的字符数小于 200，因此编译器将所有这些字符写入文件。我很快找出了问题所在并纠正了它，但我的问题是，这是怎么发生的？是什么导致编译器如此大量地写入程序？当我取消编译器时（看起来它会继续运行），文件在几秒钟内就从几百字节增长到近 13 MB。我不是专家，但似乎这种事情可能会产生安全隐患，特别是因为我是在我大学的 CS 部门服务器上通过 ssh 运行这个程序的。

对于它的价值，这是我编译时的代码：

战争.cpp：

```
#include <iostream>
#include <cstdlib>
#include <vector>

using namespace std;

int main()
{
    vector< pair<int, suit> > deck1;
    vector< pair<int, suit> >::iterator it1;

} 
```

战争.h：

```
#ifndef WAR_H
#define WAR_H

#include <iostream>
#include <cstdlib>
#include <vector>

using namespace std;

enum suit { HEARTS, SPADES, CLUBS, DIAMONDS };

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:52:46.360

几乎可以肯定是一个坏的包括后卫。例如，这会对你有用。我很确定你不需要两个损坏的包含守卫来发生这种情况，但如果你明白为什么这种情况会给你带来麻烦，你就会明白这一点。

酒吧.h：

```
#define BAR__H  //whoops
#ifndef BAR_H

#include "foo.h"
int bar();

#endif 
```

富.h：

```
#define FOO__H  //whoops
#ifndef FOO_H

#include "bar.h"
int foo();

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:54:11.373

这可能是因为您的文件在中间某处有一些“神秘”符号。例如，尝试使用十六进制编辑器查找它们。尝试删除这些文件并再次写入。或者将此代码粘贴到您可以看到此符号的某个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:58:12.080

通常编译器（任何编译器）应该只读取源代码并且永远不应该写回它。

我会质疑服务器上磁盘的完整性。如果它只有一个磁盘，它可能会失败，我看到 RAID 偶尔会做一些奇怪的事情。

另一种可能性是编码正在更改或被错误解释。如果您编写它的计算机是基于 Windows 的，则它可能采用 Windows 友好编码 ( [http://en.wikipedia.org/wiki/Windows-1252](http://en.wikipedia.org/wiki/Windows-1252) )，其中编译器可能需要 UTF8 ( [http://en. wikipedia.org/wiki/Utf8](http://en.wikipedia.org/wiki/Utf8)）。如果是这种情况，您可以切换到允许您手动选择字符编码的文本编辑器。

如果这是一个编码问题，您可以按照 spo1ler 所说的那样做，并使用十六进制编辑器从文件中删除额外的非渲染字符。我曾经遇到过这样的版权符号问题。

# macos - 使用 mac 终端 ssh 时使用什么文本编辑器

> ID：11020494
> 
> 赞同：7
> 
> 时间：2012-06-13T17:48:11.947
> 
> 标签：macos, ssh, terminal, text-editor

我正在使用我的 Mac 终端通过 SSH 连接到我的 GoDaddy 托管帐户。

我想知道我可以通过终端使用什么文本编辑器？我根本不熟悉 VIM 或 emacs，所以我很难使用。

我在 Linux 上使用过 gedit，非常喜欢它。我想知道我是否可以在 Godaddy 服务器上安装 gedit？

任何意见，将不胜感激。我对使用 SSH 和终端非常陌生。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T18:32:23.343

有很多全屏文本编辑器，但是如果您想在 Mac 上本地编辑文件，并且无需考虑就通过 ssh 连接到远程服务器，您真的必须学习其中一种无处不在的编辑器。

事实上，理想情况下，您应该学习所有这三个方面的基础知识——至少如何安全地离开——因为在某些时候，你会在 VISUAL 未设置或设置错误的情况下意外地 visudo 并发现自己在错误的编辑器中。

*   如果您来自 TextEdit/TeachText/Notepad 背景，那么 nano（及其在 pico 家族中的亲戚）是迄今为止最容易学习的。但是，它是最不普遍的，并且在击键和屏幕空间方面效率最低，如果他们问“vi 或 emacs”而你说“nano”，真正的 Unix 极客会嘲笑你。

*   vi（和它的亲戚——事实上，通常你使用的是 vim，而不是 vi）是最普遍的，也是迄今为止最有效的快速和简单的编辑。它在奇怪的终端上也更有用，比如你最喜欢的 iPad ssh 客户端（点击 ^X 是一项主要工作）。最后，大多数 vi 键序列也可以与 ed 一起使用，有时甚至可以与 sed 一起使用，当您被困在完全支持全屏的终端上时，这真的很方便。然而，到目前为止，当您来自 GUI 背景时，它是最难学习的——除非进入特殊模式，否则您无法在文本编辑器中输入或编辑文本的想法很奇怪。

*   emacs（及其亲属和简化的克隆，如 jove 和 ue）是执行复杂操作的最有效的方法。它更奇怪的击键（如用于光标移动的 ^AF）与终端命令行、libreadline、本机 Mac GUI 文本控件和 Firefox 文本控件相同，这也很好。如果你真的学习了 emacs，你可以开始在 GUI 中使用 Aquamacs，并对其进行编程以自动化所有繁琐的文本编辑，等等。唯一的问题是，真正学习 emacs 将花费您数年时间，而且您的生活中可能还有其他事情要做。

# arrays - CakePHP 在多对多表中存储 id 数组

> ID：11020496
> 
> 赞同：0
> 
> 时间：2012-06-13T17:48:15.760
> 
> 标签：arrays, cakephp, many-to-many, relationship

我遇到了 CakePHP 的问题。我尝试使用 saveAll() 函数设置一些数据。我对以下 JSON 字符串进行 json_decode 并将结果传递给 saveAll() 方法。

```
{
    "SurveyAnswer":{
        "data":25,
        "data":45,
        "data":100
    },
    "GpsObservation":[
    {
        "latitude":1,
        "longitude":1
    },
    {
        "latitude":1,
        "longitude":1
    }
    ],
    "PeopleOption":[
    {
        "id":1
    },
    {
        "id":2
    }
    ]
} 
```

“PeopleOption”表是“SurveyAnswer”和“PeopleOptions”之间的多对多关系表。如您所见，我将一些数据存储在 SurveyAnswer 中，效果很好。但是，用户可以选择多个人，因此“PeopleOption”多对多表和 CakePHP 不会将这些人存储在数据库中。

奇怪的是：当我将 PeopleOption 数组更改为 JSON 对象时，如下所示：

```
"PeopleOption": {
    "id":1
} 
```

它工作得很好，但显然只适用于一张唱片。

如何传递必须存储在多对多关系表“PeopleOption”中的 id 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:54:17.187

虽然我还没有得到答案，但我自己找到了解决方案。使用 saveAll() 函数在多对多表中插入 id 数组时，您应该在 JSON 对象中使用嵌套数组，如下所示：

```
"PeopleOption": {
   "PeopleOption":[
       3,
       14,
       7,
       etc,
   ]
} 
```

希望这可以帮助任何遇到我遇到的问题的人！

# spring-batch - Spring Batch File Writer 异常处理

> ID：11020502
> 
> 赞同：3
> 
> 时间：2012-06-13T17:49:10.207
> 
> 标签：spring-batch

我有一个 Spring Batch 进程，它具有以下类型的代码。

```
<step id="step1" xmlns="http://www.springframework.org/schema/batch">
        <tasklet allow-start-if-complete="true">
            <chunk reader="reader1" writer="writer1" commit-interval="10"/>
        </tasklet>
    </step>

<bean id="writer1" class="org.springframework.batch.item.file.FlatFileItemWriter">
    <property name="resource" ref="resourceFlatFile" />   
    <property name="shouldDeleteIfExists" value="true" />
    <property name="transactional" value="true" />
    <property name = "lineAggregator"> 
        <bean class="org.springframework.batch.item.file.transform.DelimitedLineAggregator" >
            <property name="delimiter" value=""/>
            <property name ="fieldExtractor"> 
                <bean class="com.path.MyExtractor" />
            </property>  
        </bean>
    </property> 
</bean> 
```

基本上我的读者从数据库中给出了一组记录。我的作家 (writer1) 将其写入平面文件。如果将记录写入文件有任何问题，我想将该记录状态标记为数据库中的失败。那么如何处理这些场景呢？任何帮助表示赞赏。

谢谢我的问题是我是否有任何异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:25:55.583

我建议您考虑使用[ItemWriteListener](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/ItemWriteListener.html)并更新 onWriteError 实现中失败记录的状态。

# sql - 正在返回 SQL Double 结果集

> ID：11020503
> 
> 赞同：0
> 
> 时间：2012-06-13T17:49:14.187
> 
> 标签：sql, sql-server, tsql

以下脚本循环遍历结果集并显示每条记录两次，请告知是什么原因造成的。如果在 WHERE 子句中未注释 transaction_date，则返回的结果是针对 day 并且是正确的，则无论日期如何，都会将 transaaction_date 注释掉以进行完全加载，这是返回双精度结果集的时间。

谢谢您的帮助

```
/* Sales by Customer
*/

/*
      Variables Declared
*/
      DECLARE @Loaddate DATETIME
      DECLARE @Branch_no TINYINT
/* 
      Set Variables
*/
      SET @branch_no = 0  
    WHILE @branch_no  < 1

    BEGIN
    SET @Branch_no = @branch_no + 1
    SET @Loaddate = (SELECT last_txn_date FROM wf_cntl_details w
                                    WHERE w.depot_no = @Branch_no 
                                    AND tbl_name = 'Invoice_Header')

SELECT h.depot_no,h.customer_code,h.transaction_date,h.transaction_no
FROM ft_inv_hdr_sales h
                  INNER JOIN ft_Inv_dtl_sales d      ON 
                              h.depot_no = d.depot_no AND h.transaction_date = d.transaction_date  AND
                              h.transaction_no = d.transaction_no

WHERE d.depot_no = @Branch_no  -- and h.transaction_date = @Loaddate
GROUP BY h.depot_no,h.customer_code,h.transaction_date,h.transaction_no 

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:57:34.767

ft_inv_hdr_sales 表中必须有多个（大多数概率为 2）条目用于同一客户但 transaction_date 不同。

# android - Android 中的 JSON 解析异常

> ID：11020507
> 
> 赞同：0
> 
> 时间：2012-06-13T17:49:27.557
> 
> 标签：android, json, parsing, jsonexception

我有以下问题：我尝试在 Android 中解析的服务器上有一个 JSON 文件。但我收到以下错误消息：

> 06-13 19:24:39.025：E/JSON Parser(17169)：解析数据 org.json.JSONException 时出错：java.lang.String 类型的值 ï»¿ 无法转换为 JSONObject

这是我的 JSON 文件：

```
 {
"settings":[
  {
     "rss":"true",
     "rss_feed":"http://test.com/rss.rss"
  }
],
 "map_locations":[
  {
     "title":"Büro Toronto",
     "address":"123 Younge Street Toronto"
  },
  {
     "title":"Büro New York",
     "address":"Time Square New York"
  }
]
} 
```

这是我的代码：

```
 JSONParser jParser = new JSONParser();

        JSONObject json = jParser.getJSONFromUrl(SETTINGS_URL);

        try {
            JSONObject c = json.getJSONArray("settings").getJSONObject(0);

            rss = c.getBoolean("rss");

            JSONArray jMap = json.getJSONArray("map_locations");
            for (int i = 0; i < jMap.length(); i++) {
                JSONObject c2 = jMap.getJSONObject(i);

                String map_title = c2.getString("title");
                String map_address = c2.getString("address");

                mapListTitle.add(map_title);
                mapListAddress.add(map_address);
            }

            URL_TO_RSSFEED = c.getString("rss_feed");
        } catch (JSONException e) {
            e.printStackTrace();
        } catch (NullPointerException e) {
            e.printStackTrace();
        } 
```

提前感谢您的帮助！

奇怪的是我没有改变任何东西（据我所知）并且它之前确实有效。如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:57:56.733

哇，好的，我找到了答案...不得不改变

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8); 
```

到

```
to BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8); 
```

奇怪的是，它确实在几个小时前使用相同的设置工作。

但是非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:24:08.757

我运行了这段代码，它运行良好。

```
String jsonStr = "{\"settings\":[{\"rss\":\"true\",\"rss_feed\":\"http://test.com/rss.rss\"}],\"map_locations\":[{\"title\":\"Büro Toronto\",\"address\":\"123 Younge Street Toronto\""
              +"},{\"title\":\"Büro New York\",\"address\":\"Time Square New York\"}]}";
    try {
    JSONObject json = new JSONObject(jsonStr);

        JSONObject c = json.getJSONArray("settings").getJSONObject(0);

        boolean rss = c.getBoolean("rss");

        JSONArray jMap = json.getJSONArray("map_locations");
        for (int i = 0; i < jMap.length(); i++) {
            JSONObject c2 = jMap.getJSONObject(i);

            String map_title = c2.getString("title");
            String map_address = c2.getString("address");

           /* mapListTitle.add(map_title);
            mapListAddress.add(map_address);*/
        }

       String URL_TO_RSSFEED = c.getString("rss_feed");
    } catch (JSONException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        e.printStackTrace();  
} 
```

所以我只能得出结论，`jsonObject`您创建的第一个可能存在一些错误，我正在谈论这一行：

`JSONObject json = jParser.getJSONFromUrl(SETTINGS_URL);`

# javascript - 根据表单的选择显示/隐藏标记不会做任何事情

> ID：11020514
> 
> 赞同：1
> 
> 时间：2012-06-13T17:49:52.767
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, jquery-ui-map

我正在尝试根据用户从选择框中选择的功能类型在我的**谷歌地图上显示/隐藏（或简单地过滤）我的标记（房屋和公寓）。**`#features`

*例如*，如果用户选择“*游泳池*”功能并单击`Submit`按钮 - 仅显示具有此功能的标记（房屋/公寓），并隐藏没有游泳池的标记。

***不幸的是，当我运行我的代码时，我的地图上什么都没有发生/变化。***

**房屋和公寓的JSON**（存储在***标记***变量中）：

```
({
condos:
    [
        {Address:'123 Fake St.', Lat:'56.645654', Lng:'23.534546', features:['Swimming Pool','BBQ','..etc..']},
        {... another condo with features ...},
        {... another condo with features ...},
        ...
    ],
houses:
    [
        {Address:'1 Main Ave.', Lat:'34.765766', Lng:'27.8786674', features:['...','...']},
        {... another house with features ...},
        {... another house with features ...},
        ...
    ]
}) 
```

**JS/jQuery**代码：

```
$('#filterform').on('submit', function(e) {
    e.preventDefault(); // prevent page from reloading when form is submitted

    $('#map').gmap('set', 'bounds', null); // reset map's bounds
    $('#map').gmap('closeInfoWindow'); // close opened infoWindows

    // store selected features from the 'features' select box into features variable as array
    var features = $("#features").val();

    // for each element of type house/inside houses array
    $(markers.houses).each(function(index, elem){
        //if a house has one of the selected features from 'features' select box - show it on the map, otherwise hide it
        if(jQuery.inArray(features, elem.features) !== -1 || jQuery.inArray(features, elem.features) > -1){
            this.setVisible(true);
        }else{
            this.setVisible(false);
        }
    });

    // ... repeat the same for condos type elements ...
}); 
```

**更新：**

**用于在地图上创建/放置标记的**JS/jQuery代码：****

 **```
$('#map').gmap(mapOptions).bind('init', function(){             
    $(markers.houses).each(function(index, elem){
        $('#map').gmap('addMarker', {
            'position': new google.maps.LatLng(parseFloat(elem.lat), parseFloat(elem.lng)),
            'bounds': true,
            'icon': 'house.png'
        });
    });
    $(markers.condos).each(function(index, elem){
        $('#map').gmap('addMarker', {
            'position': new google.maps.LatLng(parseFloat(elem.lat), parseFloat(elem.lng)),
            'bounds': true,
            'icon': 'condo.png'
        }); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:29:21.403

```
$(markers.houses).each(function(index, elem){
    //if a house has one of the selected features from 'features' select box - show it on the map, otherwise hide it
    if(jQuery.inArray(features, elem.features) !== -1 || jQuery.inArray(features, elem.features) > -1){
        this.setVisible(true);
    }else{
        this.setVisible(false);
    }
}); 
```

在您的上下文中， ' `this`' 不是标记元素，它是一个`markers.houses`数组元素，与`elem`->相同`this === elem`。

**更新：**用这些行添加标记：

```
$('#map').gmap(mapOptions).bind('init', function(){     
    markers.housesMarkers = [];     //Adding new property that holds Markers    
    $(markers.houses).each(function(index, elem){
            var position =  new google.maps.LatLng(parseFloat(elem.lat), parseFloat(elem.lng));
            var m = new google.maps.Marker({ position:position ,
                                            icon: 'house.png' })
            //Adding markers to array
            markers.housesMarkers.push( m );
            m.setMap( $('#map').gmap('get','map') );

            $('#map').gmap('addBounds',m.getPosition());  ///'bound:true' option
    });
    markers.condosMarkers = [];      //Adding new property that holds Markers
    $(markers.condos).each(function(index, elem){
            var position =  new google.maps.LatLng(parseFloat(elem.lat), parseFloat(elem.lng));
            var m = new google.maps.Marker({ position:position ,
                                            icon: 'condo.png' })
            //Adding markers to array
            markers.condosMarkers.push( m );
            m.setMap( $('#map').gmap('get','map') );

            $('#map').gmap('addBounds',m.getPosition());  ///'bound:true' option
    });
}); 
```

然后使用以下代码“过滤”（可见/不可见）您的标记：

```
$(markers.houses).each(function(index, elem){
    //if a house has one of the selected features from 'features' select box - show it on the map, otherwise hide it
    if(jQuery.inArray(features, elem.features) !== -1 || jQuery.inArray(features, elem.features) > -1){
        markers.housesMarkers[index].setVisible(true);   //for condos -> 'marker.condosMarkers'
    }else{
        markers.housesMarkers[index].setVisible(false);  //for condos -> 'marker.condosMarkers'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:22:29.943

试试 this.setMap(null); /this.setmap(map);**

# actionscript - Actionscript ByteArray（来自 NFC）到字符串

> ID：11020517
> 
> 赞同：0
> 
> 时间：2012-06-13T17:50:05.783
> 
> 标签：actionscript, air, bytearray

我正在我的 Adob​​e AIR 移动应用程序中读取 NFC 标签。数据被读取为 ByteArray，但我很难提取全文。标记上的示例文本是“http://www.google.com”

使用这种方法，我得到了字符串“http://www.goog”的一部分，但不是全部。我假设因为每个字符都不是一个字节：

```
private static function convertToString(byte_array : ByteArray) : String {
        var arr : Array = [];
        for (var i : Number = 1 ; i <= byte_array.bytesAvailable; i++) {
            arr.push(byte_array.readUTFBytes(i));
        }

        var finalString : String = "";
        for (var t : Number = 0; t < arr.length;t++) {
            finalString = finalString + arr[t].toString();
        }

        return finalString;
    } 
```

我也试过下面的方法，但它返回null：

```
bytes.readUTF(); 
```

我想知道是否需要将 byteArray 转换为 base64 字符串，然后对其进行解码。这似乎是一个额外的步骤，但这就是我之前使用 AMFPHP 向/从服务器发送数据时所做的。

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:35:51.687

您甚至可以通过简单地调用来简化此代码

```
private static function convertToString(bytes:ByteArray):String {
    bytes.position = 0;
    var str:String = bytes.readUTFBytes(bytes.length);

    return str;
} 
```

这样，您将通过一个方法调用将字节数组的所有内容读取到目标字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:18:39.300

在下面的代码中弄清楚了。有 2 个错误，还有一些清理：

```
 private static function convertToString(bytes : ByteArray) : String {
        bytes.position = 0;
        var str : String = '';
        while (bytes.bytesAvailable > 0) {
            str += bytes.readUTFBytes(1);
        }
        return str;
    } 
```

*   当您从 ByteArray 中读取数据时，“bytesAvailable”属性会减少。在这里，我正在检查字节是否 > 0 而不是长度
*   “readUTFBytes”方法采用长度参数（不是位置）。当您从 ByteArray 中读取时，位置会自动更新。我传入“1”而不是“i”

# tfsbuild - TFS 2010 构建定义以在解决方案中构建一个项目

> ID：11020518
> 
> 赞同：0
> 
> 时间：2012-06-13T17:50:11.173
> 
> 标签：tfsbuild

我有一个包含多个项目的 VS 解决方案，我正在尝试创建一个构建定义来仅构建其中一个。

我在 TFS 中的项目结构是这样的：

```
 $myproject/Dev                            --- myproject.sln file is here
    $myproject/Dev/Src/category/item/project1 --- project I want to build
    $myproject/Dev/Src/web/item/project2      --- project2
    $myproject/Dev/Src/service/item/project3  --- project3

project1 has a project reference set to project2 
```

然后我像这样设置我的构建定义：

```
 1\. In the Workspace tab

    Status   Source Control Folder                        Build Agent Folder
    --------------------------------------------------------------------
    Active   $/myproject/Dev/Src/category/item/project1   $(SourceDir)\Dev\Src\category\item\project1 
```

在流程选项卡中，要构建的项目 | 要构建的项目，我只选择 project1 来构建。构建时出现错误：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1200): The referenced project '..\..\..\web\item\project2.csproj' does not exist. 
```

如果我将源代码控制文件夹设置为 $/myproject/Dev 并将构建代理文件夹设置为 $(SourceDir)\Dev 那么一切都很好，但我只想在将某些内容签入 project1 文件夹时开始构建，而不是 $/ 下的所有内容我的项目/开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:54:37.263

如果 project1 引用 project2 （如您所说），您如何期望 project1 在**没有**project2 之前编译的情况下进行编译？

如果您只想编译 project1，那么您需要一个程序集引用，而不是 project2 的项目引用。

但是不要打扰，在您的构建定义中构建 project1**及其**依赖项，它既简单又高效。

# binary - 创建二进制、重复的光信号

> ID：11020519
> 
> 赞同：1
> 
> 时间：2012-06-13T17:50:12.547
> 
> 标签：binary, signals, repeat

我有大约 100 个需要识别的单独 LED。它们都是相同的颜色，但我可以让每一个都以我想要的任何模式闪烁。限制在于检测这些光的相机。它以 30 fps 的速度运行，因此我仅限于 15Hz 信号。我已经确认我可以非常可靠地检测到 15 Hz 信号。

灯必须不断重复它们各自的闪烁模式，以便相机在它们进入相机视野后不久就能检测到它们。我想知道是否有人对什么样的信号可以让我用尽可能少的位来做到这一点有任何想法。

使用 7 位标识号，我可以创建 128 个单独的信号，但我必须添加标头/校验和才能区分它们。例如，不断重复“0101010”与不断重复“1010101”将无法区分。

# iphone - XCode 4\. 如何正确移除目标动作方法？

> ID：11020521
> 
> 赞同：0
> 
> 时间：2012-06-13T17:50:24.357
> 
> 标签：iphone, objective-c, xcode4

在我的故事板中，我有一个 UIButton。我通过按下 ctrl 键盘按钮并将按钮添加到 ViewController.m 来创建目标操作处理程序。然后在我删除目标操作方法并重置此 btn 其他方法之后。但是当我触摸该按钮时，会出现运行时错误。

`It says: -[CalculatorViewController piPressed]: unrecognized selector sent to instance 0x6a65b30`

其中 piPressed 是旧的删除方法。

**嗨，正确删除旧的目标操作方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:16:37.413

选择按钮按**⌥ ⌘ 2**并从检查器窗口中删除不需要的方法。

或者

只需**右键单击按钮**（在故事板上）即可从出现的窗口中删除不需要的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:42:47.223

我想出了如何删除方法。在故事板中，必须选择按钮->右键单击->发送事件->删除不必要的方法。

# macos - Mac OS X 上的 GCC 标志 -Os 来自哪里？

> ID：11020522
> 
> 赞同：1
> 
> 时间：2012-06-13T17:50:30.820
> 
> 标签：macos, homebrew, automake

我正在尝试安装 CurlPP，但似乎在 CXXFLAGS 中添加了“-Os”。然后，它尝试删除优化标志，但 automake 中的正则表达式 -O[0-9] 与“s”不匹配。这导致构建失败。

这个“-Os”来自哪里？这是一个合法的优化标志，还是什么？

如何使用自制软件更改我的机器上的 CXXFLAGS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:53:52.257

`-Os`是针对尺寸进行优化的。老实说，这[在任何 C 编译器上都是](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)非常标准的。也许只是改变正则表达式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:19:50.057

谢谢，我有同样的问题，但我不知道为什么它在命令行中抱怨一些's'！修复非常简单：运行`brew edit curlpp`，然后插入行

`ENV.remove_from_cflags(/-O./)`

在脚本中安装函数的开头。但这会关闭优化，因此您可能会找到更好的解决方案。但是软件包安装得很好。

# jquery - 循环遍历每个 id 检索 1 维数组和 2 维数组中对象的值

> ID：11020524
> 
> 赞同：-2
> 
> 时间：2012-06-13T17:50:37.810
> 
> 标签：jquery

循环遍历每个 id 检索 1 维数组和 2 维数组中对象的值

jQuery 新手.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:59:14.617

首先：您应该更改班级的 id 然后

$（两者）

为了：

```
$(".both") 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:30:27.853

首先，像这样构建 HTML：

```
<form id="myform" action="myscript.php" method="get">
    <div>
        <div><textarea name="mytextarea[]"></textarea></div>
        <div><input type="checkbox" name="mycheckboxes1[]"><div>
        <div><input type="checkbox" name="mycheckboxes2[]"><div>
        <div><input type="checkbox" name="mycheckboxes3[]"><div>
    </div>

    <div>
        <div><textarea name="mytextarea[]"></textarea></div>
        <div><input type="checkbox" name="mycheckboxes1[]"><div>
        <div><input type="checkbox" name="mycheckboxes2[]"><div>
        <div><input type="checkbox" name="mycheckboxes3[]"><div>
    </div>

    <div>
        <div><textarea name="mytextarea[]"></textarea></div>
        <div><input type="checkbox" name="mycheckboxes1[]"><div>
        <div><input type="checkbox" name="mycheckboxes2[]"><div>
        <div><input type="checkbox" name="mycheckboxes3[]"><div>
    </div>
</form> 
```

与所有表单一样，提交时，查询字符串将自动组成，包括`name=value`字段名称对和用户输入的数据。

或者，您可以在 javascript 中构建自己的查询字符串，目前最简单的方法是使用 jQuery 的`.serialize()`：

```
var data = $("#myform").serialize(); 
```

通常，这样做是为了通过 AJAX 提交表单，例如。

```
$.ajax({
    url: 'myscript.php',
    data: $("myform").serialize(),
    type: "GET",
    success: function(data, textStatus, jqXHR) {
        ...
    }.
    error: function(jqXHR, textStatus, errorThrown) {
        ...
    }
}); 
```

对于任一类型的提交，该`[]`表示法使 PHP（和其他服务器端语言）中的每个字段名称都可以作为一维值数组使用。例如，第一个值块由表达式给出。

```
$_GET['mytextarea'][0];
$_GET['mycheckboxes1'][0];
$_GET['mycheckboxes2'][0];
$_GET['mycheckboxes3'][0]; 
```

涉及数据的操作通常会在循环中执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:30:46.043

首先使用类而不是 ID，每个页面的 id 都是唯一的......关于您的需求：实际上您需要这样的东西：

```
var data = []
$(document).ready(function(){
    $('.both').each(function(){
        ta = $(this).children('textarea').val();
        cb = $(this).children('input:checked').val()
        data.push({t:ta,c:cb})
    });
    $.each(data, function(index, value){
        $('body').append('<p>t:'+value.t+' c: '+value.c+'</p>');
    })
}) 
```

[在这里演示](http://jsfiddle.net/acrashik/xu8xj/)

# jquery-ui - 带有 jQ uery UI 拖放的 Knockoutjs 在 IE8 中失败

> ID：11020538
> 
> 赞同：2
> 
> 时间：2012-06-13T17:51:24.190
> 
> 标签：jquery-ui, knockout.js, jquery-ui-draggable, jquery-ui-droppable, knockout-2.0

我正在使用带有 jquery 拖放的 knockoutjs，它在 Chrome、Firefox、IE9 中运行良好，但在 IE8 中运行良好。我无法发布实际代码，但我创建了一个可以重现错误的 jsfiddle 示例。请查看[http://jsfiddle.net/wired1/P9hns/20/](http://jsfiddle.net/wired1/P9hns/20/) 它在最新的 Firefox、Chrome 和 IE9 中运行良好。但是在 IE8 中尝试拖动时出现以下错误：

> ## IE8 错误 #1
> 
> SCRIPT5007：无法获取属性“选项”的值：对象为空或未定义 jquery-ui.1.8.18.js，第 1412 行字符 13

这是jquery ui中引用​​的代码：

```
$.ui.plugin.add("draggable", "cursor", {
start: function(event, ui) {
    var t = $('body'), o = $(this).data('draggable').options;
    if (t.css("cursor")) o._cursor = t.css("cursor");
    t.css("cursor", o.cursor);
},
stop: function(event, ui) {

        var o = $(this).data('draggable').options;
        if (o._cursor) $('body').css("cursor", o._cursor);

}
}); 
```

就是stop函数中变量o的声明：**var o = $(this).data('draggable').options;**

如果我在 jquery ui 中注释掉这两行，我会收到以下错误：

> ## IE8 错误 #2
> 
> SCRIPT5007：无法获取属性“选项”的值：对象为 null 或未定义 jquery-ui.1.8.18.js，第 1439 行字符 38

这指向：

```
$.ui.plugin.add("draggable", "scroll", {
start: function(event, ui) {
    var i = $(this).data("draggable");
    if(i.scrollParent[0] != document && i.scrollParent[0].tagName != 'HTML') i.overflowOffset = i.scrollParent.offset();
},
drag: function(event, ui) {

    var i = $(this).data("draggable"), o = i.options, scrolled = false;
........................ 
```

这是上面代码片段的最后一行，其中**o = i.options**。

如果我将 {scroll: false} 设置为 jqueryui 可拖动的选项，错误就会消失，但它仍然不起作用。

似乎当我开始按顺序拖动所有事件时，即使未释放鼠标单击（在 jsfiddle 中运行代码测试时，请查看控制台以查看日志）。

是 jquery ui 问题还是我做错了什么？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:44:05.460

问题是您从`observableArray`“开始”回调中删除了学生，这反过来又导致 KO 删除/分离关联的 DOM 元素。但是 draggable 的代码指望被拖动的元素仍然可用（即使您指定了帮助器）。

我猜 IE<9 以不同的方式处理分离的元素，导致错误浮出水面。它可以通过仅在`observableArray`确定不再需要关联的可拖动元素时（即拖动停止时）将学生从 中删除来解决。

这是更新的小提琴：http: [//jsfiddle.net/P9hns/32/](http://jsfiddle.net/P9hns/32/)

# javascript - 将新属性附加到现有 JSON 对象

> ID：11020539
> 
> 赞同：1
> 
> 时间：2012-06-13T17:51:27.873
> 
> 标签：javascript

我有以下 json

```
{"groupOp":"AND","rules":[{"field":"company","op":"cn","data":"School"}]} 
```

我想将新属性注入规则数组中的每个项目以获得类似的东西。

```
{"groupOp":"AND","rules":[{"field":"company","op":"cn","data":"School", "dataType": "Organization", "dataProperty": "name"}]} 
```

计划是遍历称为规则的数组并使用以下内容动态添加正确的值。

```
var filters = $.parseJSON(postData.filters); 
var rules = filters.rules;
for (i = 0; i < rules.length; i++) { 
  rules[i]
} 
```

我可以访问索引“i”处的规则。我试过了`rules[0].push({dataType: "Organization"});` 请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:55:11.677

`rules[i]`是一个对象，而不是一个数组，所以没有`push`方法可以调用。使用[属性分配](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)。

```
// ...
rules[i].dataType = "Organization";
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:55:36.850

这是你想要的？

```
var filters = $.parseJSON(postData.filters); 
var rules = filters.rules;
for (i = 0; i < rules.length; i++) { 
  rules[i].dataType = "Organization";
} 
```

# iphone - iPhone SDK：NSMutableArray 无法识别的选择器

> ID：11020544
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:05.843
> 
> 标签：iphone, nsmutablearray

我有一个 NSMutableArray，它从 NSDictionary 获取添加到它的对象。这些对象是 1 或 0 的值。我试图遍历这个 NSMutableArray，以检查每个值。如果为 1，我设置将绿色刻度图像添加到数组中，如果为零，我将红十字图像添加到数组中。

但是，在检查 NSMutableArray 的值时出现以下错误：

```
[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 
```

这是我的代码：

```
 facilitiesAvailable = [NSMutableArray new];

     [facilitiesAvailable addObject:[[InfoDictionary valueForKey:@"wc-avail"]copy]];
     [facilitiesAvailable addObject:[[InfoDictionary valueForKey:@"wifi_avail"]copy]];

    tixArray = [NSMutableArray new];

    for(NSString *avail in facilitiesAvailable) {

        if([avail isEqualToString:@"1"]) {

            [tixArray addObject:[UIImage imageNamed:@"greenTick.png"]];
        } else {

            [tixArray addObject:[UIImage imageNamed:@"redCross.png"]];
        }

    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:04:49.397

只是出于好奇，如果你用这个替换你的代码会发生什么：

```
for(int i = 0; i < [facilitiesAvailable count]; i++) {
    NSString * avail = (NSString *)[facilitiesAvailable objectAtIndex:i];

    if([avail isEqualToString:@"1"]) {
        [tixArray addObject:[UIImage imageNamed:@"greenTick.png"]];
    } else {              
        [tixArray addObject:[UIImage imageNamed:@"redCross.png"]];         
    }
} 
```

这也假设添加到 facilityAvailable 的对象是基于您的 InfoDictionary 中真正是 NSString 对象的对象。这会将它们转换为 NSString 对象，但如果它们不是真的来自 InfoDictionary，您会得到奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:55:12.467

消息：

```
 [__NSArrayI isEqualToString:]: unrecognized selector sent to instance 
```

意味着这`avail`是一个 NSArray 对象，而不是您预期的 NSString ，因此出现错误。你应该检查你如何填充你的`InfoDictionary`字典，因为它来自那里。

# javascript - 比较范围之间的边界点

> ID：11020545
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:15.517
> 
> 标签：javascript, contenteditable

不知道标题对不对。问题是我找到了一个片段来获取光标位置，当它集中在一个 contenteditable 元素中时。我了解整个代码，但是有五行我不知道它们的优点。

好的。这些行是一个函数，它作为参数传递给 Treewalker。他们处理比较边界点，但是，如何，为了什么？我一直在研究很多天，还没有找到ist功能。

```
function(node) {
        var nodeRange = document.createRange();
        nodeRange.selectNode(node);
        return nodeRange.compareBoundaryPoints(Range.END_TO_END, range) < 1 ?
            NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
    } 
```

整个片段是这样的（只是为了将其置于上下文中）：

```
function getCharacterOffsetWithin(range, node) {
var treeWalker = document.createTreeWalker(
    node,
    NodeFilter.SHOW_TEXT,
    function(node) {
        var nodeRange = document.createRange();
        nodeRange.selectNode(node);
        return nodeRange.compareBoundaryPoints(Range.END_TO_END, range) < 1 ?
            NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
    },
    false
);

var charCount = 0;
while (treeWalker.nextNode()) {
    charCount += treeWalker.currentNode.length;
}
if (range.startContainer.nodeType == 3) {
    charCount += range.startOffset;
}
return charCount;
}

document.body.addEventListener("keyup", function() {
  var el = document.getElementById("test");
  var range = window.getSelection().getRangeAt(0);
  document.getElementById("position").innerHTML = "Caret char pos: " + getCharacterOffsetWithin(range, el);
}, false); 
```

可以在这里看到工作：[JS Fiddle](http://jsfiddle.net/timdown/2YcaX/3/)

非常感谢，我只是想在使用它之前了解这些东西。对不起，很长的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:34:11.327

这看起来像我的代码，来自[这个问题](https://stackoverflow.com/questions/4767848/get-caret-cursor-position-in-contenteditable-area-containing-html-content)。它试图完成的任务过于复杂，我提供了一个更简单的替代方案来替代我建议使用[的类似问题。](https://stackoverflow.com/a/4812022/96100)我现在已经用更简单的答案的链接更新了原始答案。

至于您关于该功能的作用的问题，它可以过滤节点。TreeWalker 访问容器节点中的所有文本节点，并且只产生位于选择结束之前的节点。在每个文本节点上调用过滤器函数，创建一个包含文本节点的范围，并使用 . 检查文本节点的结尾是否在文档中早于选择范围的结尾[`compareBoundaryPoints()`](https://developer.mozilla.org/en/DOM/range.compareBoundaryPoints)。

# apache-flex - Intellij IDEA 11.1 耗尽了所有可用内存，而不是调试我的应用程序，我应该尝试什么？

> ID：11020547
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:21.867
> 
> 标签：apache-flex, intellij-idea

当我尝试调试或运行我的 flex 应用程序时，它显示“内存不足”对话框。我使用 IDEA 11.1 Ultimate 和 Windows 7 64x。

我尝试了什么：

*   创建一个新的空白项目并运行它 - 结果相同（内存不足）
*   使用 64x 版本的 IDEA - 没有帮助
*   将 xmx 设置增加到 6Gb - 结果相同
*   安装 IDEA 10.5 并在那里启动我的项目 - 它工作正常。但我真的需要 11.1 来运行我的项目。
*   卸载并重新安装 JRE 和 JDK 版本 7 和 6（不能同时安装） - 没有帮助
*   从 flex SDK 4.6 切换到 4.5 - 没有帮助
*   在清除所有设置的情况下重新安装 IDEA 11.1 - 没有帮助！

它以前工作得很好。我不知道会发生什么变化。

我注意到编译工作正常 - 我得到了可以在 flashplayer 中运行的项目的正确编译 swf 文件。但是，当 IDEA 应该运行新编译的 swf 时，它会占用所有内存。

可以做些什么呢？我还应该尝试什么？

我真的不明白为什么重新安装 IDEA 并没有解决我的问题。可能是我没有清除**所有**设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:03:05.823

尝试`File`| `Invalidate Caches`甚至在重命名[IDEA 文件夹](http://devnet.jetbrains.net/docs/DOC-181)后使用所有默认值运行。

IDEA 11.1.3 版本也有一些相关的修复，[试试看吧](http://confluence.jetbrains.net/display/IDEADEV/IDEA+11.1+EAP)。

如果没有帮助，请将`hprof`内存转储上传到[JetBrains FTP 服务器](ftp://intellij.net/.uploads/)并[联系支持人员寻求帮助](http://www.jetbrains.com/support/support.jsp?pr=IDEA)，有关详细信息，请参阅[http://devnet.jetbrains.net/docs/DOC-192](http://devnet.jetbrains.net/docs/DOC-192)（底部的**内存快照部分）。**您需要使用`-XX:+HeapDumpOnOutOfMemoryError`选项运行 IDEA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:44:34.600

您是否打开了更多的 IDEA 窗口？就像在新窗口中打开另一个项目一样。在这种情况下，关闭另一个窗口不会释放内存。唯一对我有帮助的是重新启动整个 IDEA 应用程序。

# mysql - 从 mySQL 查询中计算不同的项目

> ID：11020548
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:25.230
> 
> 标签：mysql

尝试从查询中的“线程”数中获取不同的计数值

```
SELECT COUNT( ft.thread_id ) AS num_items
FROM filter_thread ft
INNER JOIN filter f ON ft.filter_id = f.filter_id
WHERE f.tag LIKE  '%foo%'
OR f.tag LIKE  '%bar%' 
```

以上工作，但由于表的设置方式，计算重复。我试过在很多地方添加 DISTINCT。但没有运气。

有关更多信息...此信息是正确列出 AJAX 评论部分的页码和相关帖子所必需的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:53:39.580

尝试这个

```
SELECT COUNT( ft.thread_id ) AS num_items
FROM filter_thread ft
INNER JOIN filter f ON ft.filter_id = f.filter_id
WHERE f.tag LIKE  '%foo%'
OR f.tag LIKE  '%bar%'
GROUP BY ft.thread_id 
```

# c# - MessageBox.Show 和延迟/延迟更新

> ID：11020549
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:28.513
> 
> 标签：c#, delegates, deferred-execution

对不起，我不知道如何命名这个问题。

我已经为这个错误写了大约 10 次解释，然后删除它，因为它不清楚 - 原谅我，我直接跳到代码中，然后会解释

```
public MainWindow()
    {
        InitializeComponent();
        stuff();
    }

    private void stuff()
    {
            DispatcherOperation disOp = Dispatcher.BeginInvoke(DispatcherPriority.Loaded, new Action(delegate
                {
                    //PrintDialog dialog = new PrintDialog();
                    //dialog.PrintVisual(canvas1, "");
                }));

            string x = disOp.Status.ToString();
            MessageBox.Show(disOp.Status.ToString());
    } 
```

我已经逐步完成了这段代码（Visual Studio 中的 F11），当它到达该行时 `disOp.Status.ToString()`，下一个 F11 会按预期跳转到下一行。

但是，当我到达线路`MessageBox.Show(disOp.Status.ToString());`并按 F11 时，它会跳转到我的 DispatcherOperation 委托。

我的问题是为什么当我使用 Messagebox 控件而不是字符串时会发生这种情况！？

（这实际上是我需要的确切行为，但我不希望出现消息框，因为用户必须单击确定/取消......我还能如何复制这个？）

谢谢

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:41:57.990

BeginInvoke 不会真正运行您的操作，直到当前线程可以自由处理挂起的消息，并且 MessageBox 必须抽水以允许处理消息（有点像 DoEvents）。

# css - 文本对齐时文本缩进不起作用：右

> ID：11020554
> 
> 赞同：14
> 
> 时间：2012-06-13T17:52:42.897
> 
> 标签：css

今天我遇到了用`text-indent: -9999px`规则隐藏文本的问题。我意识到这是由某些具有`text-align: right`. [jsfiddle 上的示例。](http://jsfiddle.net/sNbfv/) 设置`text-indent`为正值`9999px`也不起作用。

我设法通过将文本设置为 来隐藏文本`text-align`，`left`但我不明白为什么会出现这样的问题。

有人可以解释为什么设置为`text-indenting`时不起作用？`text-align``right`

摆弄 ids：http: [//jsfiddle.net/sNbfv/2/](http://jsfiddle.net/sNbfv/2/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T18:30:42.277

似乎保持对齐对浏览器来说更重要，所以无论如何，文本的右边缘都保持在右侧。

文档设置为`ltr`方向，因此缩进应用于行的左侧，但由于您已经说过希望它与右侧对齐，所以浏览器完全忽略缩进。我没有解释为什么会发生这种情况，除了早期的浏览器设置了理由重要性的优先级。CSS 规范中没有`text-align`明确忽略`text-indent`.

> 该框相对于行框的左（或右，对于从右到左的布局）边缘缩进。用户代理必须将此缩进呈现为空白。

[http://www.w3.org/TR/CSS2/text.html#propdef-text-indent](http://www.w3.org/TR/CSS2/text.html#propdef-text-indent)

如果我们将小提琴更新为有`rtl`方向，缩进确实会影响文本的右侧。我添加了一个边框来显示溢出正在发生。

[http://jsfiddle.net/sNbfv/3/](http://jsfiddle.net/sNbfv/3/)

```
.rtl{direction:rtl;}
.parent { text-align: right; border:1px solid blue}
.indented { text-indent: -9999px; }

<div class="rtl">
    <div class="parent">
        <div class="indented">
            Lorem ipsum ipsum!
        </div>
    </div>

    <div class="indented">
        Cupcake ipsum!
    </div>
</div> 
```

* * *

简单的解决方案似乎是对齐嵌套的 indent `to text-align:left`。

[http://jsfiddle.net/sNbfv/4/](http://jsfiddle.net/sNbfv/4/)

```
.parent { text-align: right; border:1px solid blue}
.indented { text-indent: -9999px; }
.parent .indented{ text-align:left; }

<div class="parent">
    <div class="indented">
        Lorem ipsum ipsum!
    </div>
</div>

<div class="indented">
    Cupcake ipsum!
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T18:03:52.923

## [CSS 3 规格](http://www.w3.org/TR/CSS21/text.html)：

> “此属性指定块容器中第一行文本的缩进。更准确地说，它指定流入块的第一个行框的第一个框的缩进。该框相对于行框的左（或右，对于从右到左的布局）边缘缩进。……”</p>
> 
> “注意：由于 'text-indent' 属性继承，当在块元素上指定时，它将影响后代 inline-block 元素。”</p>

可能是最后的报价可以解释神奇的`display: inline-block;`效果。

另外，根据this [answer](https://stackoverflow.com/a/4844724/1057730) to similar question。`direction: rtl;`强制元素尊重**css 规范**：“框相对于左侧（或右侧，对于从右到左的布局）缩进”。我认为`text-align: right;`以类似的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:39:16.073

所以...我发现了一些有趣的东西。

如果您有一个元素，`text-align:right`并且您将文本向左缩进 ( `text-indent:-9999px`)，则文本将显示。

我想将文本对齐一个方向并缩进另一个方向是相当矛盾的。但是，将 更改`text-indent`为正数 ( `text-indent:9999px`) 会尊重缩进。

另一方面，另一个（更优雅的？）解决方案是根本不缩进文本，而是将其推到元素之外。

小提琴：http: [//jsfiddle.net/robche/TNdbh/](http://jsfiddle.net/robche/TNdbh/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T10:44:37.067

只需更改`text-indent:-9999px`为`text-indent:9999px`与`text-align: right`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-22T16:43:52.720

`white-space: nowrap`属性解决了我的锚元素中的问题。

# javascript - 在 html 文档中调用 JS 有多少种不同的方法？

> ID：11020557
> 
> 赞同：7
> 
> 时间：2012-06-13T17:52:47.087
> 
> 标签：javascript, ecmascript-5

到目前为止，我知道，在网页中定义和调用 JavaScript 的 4 种不同方法

1.内联JS

```
<script type='text/javascript'> ... </script> 
```

2.外部JS

```
<script src="someURL"></script> 
```

3.事件处理JS：

```
<input type="button" onclick="...javascript..." 
```

4.JavaScript：网址

```
<a href="javascript: ...JS CODE...">js</a> 
```

**有没有其他方法可以将 JS 插入网页中？是否在任何标准规范中定义了它（有多少种方式）？**

**上面提到的 4 种不同方式中 JavaScript 的执行上下文有什么不同吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T23:22:58.907

实际上有很多方法可以在 HTML 中执行 Javascript，所有这些方法都因浏览器和平台而异。

其中很多（但不是全部）都列在这个[臭名昭著的 XSS 备忘单](http://ha.ckers.org/xss.html)中。

在不那么晦涩的人中，有这些：

```
<img src="javascript:...">
<body background="javascript:...">
<style>BODY{-moz-binding:url("...")}</style>
<META HTTP-EQUIV="refresh" CONTENT="0;url=javascript:..."> 
```

...等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:56:33.113

1 和 2 基本相同，只是 2 是外部文件，而 1 的内容就在那里。

图 3 和图 4 与`eval`. 3 定义`this`为事件所在的元素。

就是这样。如果还有其他方法可以包含 JS，我从来没有听说过。

# c# - 将位标志绑定到复选框

> ID：11020558
> 
> 赞同：0
> 
> 时间：2012-06-13T17:52:50.057
> 
> 标签：c#, winforms, enums, checkbox

我有十个复选框和枚举。我想将此复选框绑定到枚举。问题是代码有很多一致性。

```
public partial class RightsSetForm : Form
    {
        public RightsEnum rights;
        public int count = 1;
        public RightsSetForm()
        {
            InitializeComponent();
            rights |= RightsEnum.notify;
        }

        private void chkNotify_CheckedChanged(object sender, EventArgs e)
        {

            if (chkNotify.Checked)
            {
                rights |= RightsEnum.notify;
                count++;
            }
            else
            {
                rights ^= RightsEnum.notify;
                count--;
            }
        }

        private void chkFriends_CheckedChanged(object sender, EventArgs e)
        {
            if (chkFriends.Checked)
            {
                count++;
                rights |= RightsEnum.friends;
            }
            else
            {
                rights ^= RightsEnum.friends;
                count--;
            }
        }
} 
```

是否可以简化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:12:11.270

您可以为每个复选框分配一个事件处理程序，将发送者转换为 CheckBox，然后在 Name 属性（即 CheckBox 的标签）上切换语句以选择枚举。就像是：

```
private void checkbox_CheckedChanged(object sender, EventArgs e)
{
    var checkBox = (CheckBox)sender;

    RightsEnum rightsEnum = RightsEnum.notify;
    switch (checkBox.Name)
    {
        case "chkNotify":
            rightsEnum = RightsEnum.notify;
            break;
        case "chkFriends":
            rightsEnum = RightsEnum.friends;
            break;    
        // to do:  add the remaining 8       
    }

    if (checkBox.Checked)
    {
         count++;
         rights |= rightsEnum;
    }
    else
    {
         rights ^= rightsEnum;
         count--;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:21:24.667

Inmx 有一个良好的开端，尽管他确实错过了一些事情。

```
private void enumCheckedChanged(Checkbox pBox, bool pbAddFirst) {
    if (!(pBox.Tag is RightsEnum)) return;

    RightsEnum flag = pBox.Tag as RightsEnum;

    if (pBox.Checked && pbAddFirst) {
         count++;
         rights |= flag;
    }
    else if (pBox.Checked && !pbAddFirst) {
         rights |= flag;
         count++;
    }
    // Having checked for both variations of pbAddFirst, the only thing left would be if pBox.Checked is false
    else {
         rights ^= flag;
         count--;
    }
} 
```

如果您碰巧需要先减去计数，您始终可以再次使用 pbAddFirst 修改 else。

然后在每个 CheckBox 的 Check 事件中，您只需调用方法：

```
private void chkFriends_CheckedChanged(object sender, EventArgs e){
    enumCheckedChanged(chkFriends, true);
} 
```

使用 Checkbox 的 Tag 属性绝对是一个很好的调用。如果您将数据对象绑定到 UI 对象，这将使您的生活更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:13:09.033

使用该[`Control.Tag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)属性存储每个复选框的枚举值，并使用通用`CheckedChanged`事件处理程序：

```
chkFriends.Tag = RightsEnum.friends;
chkNotify.Tag = RightsEnum.notify;

chkFriends.CheckedChanged += enumCheckedChanged;
chkNotify.CheckedChanged += enumCheckedChanged; 
```

公共事件处理程序接收`Checkbox`as `sender`，它可以从 中提取枚举值`Tag`：

```
void enumCheckedChanged(object sender, EventArgs e)
{
    var checkbox = (Checkbox)sender;

    var flag = (RightsEnum)checkbox.Tag;

    if (checkbox.Checked)
    {
        count++;
        rights |= flag;
    }
    else
    {
        rights ^= flag;
        count--;
    }
} 
```

# delphi - 如何禁用 Delphi 中的所有异常引发？

> ID：11020561
> 
> 赞同：4
> 
> 时间：2012-06-13T17:53:17.553
> 
> 标签：delphi, exception, dialog, delphi-7, raise

发生异常或错误（如访问冲突、indy 套接字错误、超时等）时，是否有办法禁用所有对话框？它们有时会在我的程序中抛出，但这些错误无论如何都不是致命的，可以忽略，只是对话框令人不安。我使用德尔福 7。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:43:04.650

如果您只是不想显示异常窗口，请转到：

***Tools/Options/Debugger Options/Language Exceptions***并禁用 CheckBox ***Notify on language exceptions***。这对 Delphi 2010 来说是有效的。

（我不记得它是否与 Delphi 7 中的 CheckBox 相同）。

编辑：在某些情况下，例外是不可避免的，特别是当我们处理来自互联网的未知文件时。因此，我相信您的异常在 Indy 下得到了正确处理，只需关闭***语言异常通知***

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:34:45.330

您可以自定义 Application.OnException 事件。但是恕我直言...

*   Application.OnException 最适合记录您忘记处理的异常。
*   仅当您迫切需要性能时才应使用 Application.OnException 来捕获异常（在这种情况下，您应该预料到执行路径会中断）。

和：

*   访问冲突是致命的错误——你必须追踪并清除所有的 AV。
*   您不能仅通过 Application.OnException 覆盖来隐藏异常对话框 - 您应该以正确的方式使用 try finally/except 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T18:26:50.407

绕过 Application.OnException 事件。但是我不建议隐藏所有异常，恕我直言，这是糟糕的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:22:55.680

@ GJ - Delphi 2007 有那个复选框。但同样如上所述，访问冲突不是应该忽略的异常。

# c# - 扩展方法需要“this”来调用？

> ID：11020563
> 
> 赞同：2
> 
> 时间：2012-06-13T17:53:20.557
> 
> 标签：c#, generics, extension-methods

> **可能重复：**
> [为什么从扩展类中调用扩展方法需要“this”关键字](https://stackoverflow.com/questions/3510964/why-is-the-this-keyword-required-to-call-an-extension-method-from-within-the-e)

我在某个命名空间下的程序集中声明了一个扩展方法，它是一个非常常见的助手：

```
using System;

namespace Common {
    public static class GenericServiceProvider {
        public static T GetService<T>(this IServiceProvider serviceProvider) {
             return (T)serviceProvider.GetService(typeof(T));
        }
    }
} 
```

现在在不同的程序集和命名空间中，我试图从实现 IServiceProvider 的类中访问此扩展方法：

```
using System;
using Common;

namespace OtherNamespace {
    class Bar: IServiceProvider {
        void Foo() {
            GetService<IMyService>(); // doesn't compile
            this.GetService<IMyService>(); // compiles
        }
    }
} 
```

如您所见，我无法直接调用通用扩展方法，它甚至没有出现在 IntelliSense 中。但是，如果我在调用之前添加“this”，它就可以正常工作。

这是在使用 .NET 4 的 Visual Studio 2010 中。

这是正常的还是我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:01:58.430

> 这是正常的还是我做错了什么？谢谢。

这个是正常的。扩展方法必须扩展*一些东西*。编译器不会搜索扩展方法，除非有“表达式”（在“.”的左侧）。这是在 C# 语言规范 7.6.5.2 中定义的：

```
7.6.5.2 Extension method invocations

In a method invocation (§7.5.5.1) of one of the forms
expr . identifier ( )
expr . identifier ( args )
expr . identifier < typeargs > ( )
expr . identifier < typeargs > ( args ) 
```

基本上，你总是需要*一些东西*来*expr*。在这种情况下，`this`工作正常，编译器可以将其重写为：

```
C . identifier ( expr ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:56:59.390

这是因为您只能在该类型的对象上使用扩展方法，并且由于您的类继承了 IServiceProvider，因此您必须`this.`在这种情况下使用。我希望我理解你的问题，这将使你的答案，但 GetService(); 不可能，因为在任何情况下扩展方法的语法都不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:00:20.147

扩展方法用于对象/类的实例。在这种情况下，您有一个静态类，它就像一个类的唯一实例一样工作。

所以，如果你创建一个扩展方法，一个对象的实例就可以使用它。

# javascript - 解决 Internet Explorer 阻止 WMI/WBEM javascript 的最简单、最简单的方法是什么？

> ID：11020565
> 
> 赞同：1
> 
> 时间：2012-06-13T17:53:34.783
> 
> 标签：javascript, internet-explorer, activexobject

我开发了多个利用“control = new ActiveXObject”的 JavaScript 函数。当 javascript 涉及常用插件（如 Acrobat Reader、Flash、QuickTime 等）时，所有这些功能都可以完美运行。当我超越 ActiveXObject 和插件的领域时，进入“new ActiveXObject("WbemScripting.SWbemLocator");" 除非我降低 Internet Explorer 安全设置，否则 javascript 会被 Internet Explorer 阻止。据我了解，解决此问题的唯一方法是使用涉及 Comodo 或类似证书颁发机构证书的签名脚本。由于我只对 Internet Explorer 中的功能感兴趣，因此我理解我需要使用 Authenticode 证书。我了解到 Authenticode 实际上确实在 Internet Explorer 中对 java 进行了身份验证。就个人而言，我宁愿不必为“new ActiveXObject("WbemScripting.SWbemLocator");”使用签名脚本。但也许这是我唯一可用的选择。

一个。如果有一种更快、更简单的方法来解决这个问题，而不涉及降低 Internet Explorer 中的安全设置，我会非常有兴趣知道它会是什么。我似乎无法提示浏览器/用户允许执行涉及 ActiveXObject（“WbemScripting.SWbemLocator”）的 javascript。

湾。如果我理解这个问题的实际解决方案，我对 Authenticode 和 javascript 的理解是否正确？Authenticode 是否在 Internet Explorer 中验证 javascript 的执行？

C。我宁愿不重新发明轮子，而是想留在 javascript 中。据我了解，我可以将 .js 放入 .jar 中。当我在本地 HTML 页面上使用以下 "script archive="helloworld.jar" src="helloworld.js" 时，脚本运行良好。当我尝试从 Internet/服务器运行相同的 HTML 时，Internet Explorer 会阻止它.jar 是否也被 Internet Explorer 自动阻止？还是我使用了错误的代码？我知道类通常放在 .jar 中，但不完全理解为什么使用 helloworld.jar 的简单 helloworld 会在本地运行而不是在本地运行互联网/服务器。

另一个想法 - 对整个域使用 SSL/HTTPS 会避免这个问题吗？

# matlab - 如何确定 Matlab 中图形的投影（如果是 3D）纵横比（如果设置）以指定合适的纸张尺寸？

> ID：11020566
> 
> 赞同：3
> 
> 时间：2012-06-13T17:53:37.467
> 
> 标签：matlab, automation, figure, aspect-ratio

我在这里看到了很多关于从 Matlab 图形中挤出空间的问答。但是，我想压缩由可能固定的方面造成的空间，即在方面固定时为图形打印选择合适的纸张尺寸。

我经常使用 DEM/map/image，因此我使用`axis image`. 现在，如果我想制作高分辨率图像，我会执行类似的操作

```
set(gcf,'PaperUnits','inches','PaperPosition',[0 0 4 3])
print('-dpng','-r300','somefile.png') 
```

如[Matlab KB](http://www.mathworks.com/support/solutions/en/data/1-16WME/?solution=1-16WME)中所述。

这里的问题是确定一个合适的方面，这样我就可以指定合适的纸张尺寸，不会在两边留下白色/背景条纹。

显然，如果我有一张纵横比为 0.5 的地图（比如说 1000x2000 单元格），并且我将它打印在 4"x3" 纸上，我会在侧面得到背景条纹。这很烦人，因为我更喜欢 1.5"x3" 纸 + 轴和标签左右。现在我必须手动调整纸张大小。

这很不方便，因为我想要一个通用的解决方案。例如，我可以将一个图打印到我希望占用 4"x3" 的文件中，并且**没有**固定的方面。或者我可能想打印一个 3D 图形。我知道 daspect 和 pbaspect，但是我怎么知道它当前是如何绘制的？

也许我可以从中获得当前的 2D 方面`get(gca,'Position')`，然后将其缩放到我允许的最大所需大小（例如，4“x3”），同时考虑*DataAspectRatioMode* (?) 属性是否设置为*manual*。这是继续的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:49:51.910

我不确定我是否完全理解您的问题，但我使用以下命令创建大小与图形大小完全一致的 pdf 图像。我已将其用于 2D 和 3D 图形。“句柄”变量只是您的图形句柄。

```
set(handle,'Units','inches');
set(handle,'PaperUnits','Inches','PaperPositionMode','auto');
P = get(handle,'Position');
set(handle,'PaperSize', [P(3),P(4)]); 
```

# unit-testing - PHPUnit：如何覆盖和测试依赖方法

> ID：11020567
> 
> 赞同：0
> 
> 时间：2012-06-13T17:53:39.133
> 
> 标签：unit-testing, phpunit

我正在尝试使用 PHPUnit 对 Mail 类的方法编写测试。我正在测试的方法是 saveMessage($arguments)。saveMessage，除了保存，还可以调用类方法，`$this->emailMessage( $arguments )`. 我想编写一个测试 saveMessage 的测试，并测试 emailMessage 是否被正确调用（使用正确的参数），但不调用实际的 emailMessage 方法。

我可以做到的一种方法是将 Mail 子类化，并覆盖 emailMessage 方法。一种更吸引人的方法是模拟 Messages 类，并覆盖 emailMessage 方法，同时在模拟对象中测试 saveMessage 方法。但是，然后我将测试 Mocked 对象本身；我读过这是一个坏主意，但在这种情况下，我不完全确定为什么。为此目的使用模拟对象是否安全？有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:26:36.263

我认为这属于[“测试什么和不测试什么”](https://softwareengineering.stackexchange.com/questions/138987/do-i-need-to-test-everything)这一类在不知道代码的情况下很难回答这个问题。

例如，为什么论点*不*正确？他们被操纵了吗？您可以将操作代码放在它自己的方法中并对其进行单元测试。

或者你可以在你的方法中使用[断言](http://php.net/manual/en/function.assert.php)`saveMessage`，然后在你的单元测试中检查没有触发断言错误。

据我所知，这个问题既关乎代码设计，也关乎测试。

# java - 如何解决 NoClassDefFoundError？

> ID：11020569
> 
> 赞同：2
> 
> 时间：2012-06-13T17:53:39.580
> 
> 标签：java, oracle, weblogic, noclassdeffounderror, jdeveloper

我已经在 Oracle Linux 上安装了 Oracle Weblogic 11g，并尝试使用 jdeveloper 11g 完成 Oracle 的 ADF 教程之一。当我运行我的项目时，它编译成功，没有错误。它开始将应用程序部署到 weblogic 服务器并打开我的默认 Internet 浏览器。但随后出现错误“500 内部服务器错误”。

我收到以下错误：

`java.lang.NoClassDefFoundError: Could not initialize class org.apache.myfaces.trinidadinternal.convert.ColorConverter at....`

我在互联网上研究了这个问题，我也四处询问，常见的答案是类路径有问题。jdeveloper 中使用的库可能与 weblogic 中的库不同，然后项目被部署。

任何人都可以判断问题是否肯定是类路径？以及如何设置 jdeveloper 以将其用于 weblogic 服务器的相同类路径部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:31:08.023

`java.lang.NoClassDefFoundError`表示类路径中类的*运行时版本与**编译*时不同。

您的问题可能是在部署服务器时发现了该类的多个版本。我注意到课程`org.apache.myfaces.trinidadinternal.convert.ColorConverter`位于`trinidad-impl.jar`

您可以搜索在运行时服务器环境以及您自己的 webapp 库中找到了多少这样的 jar 吗？

在 Windows 上，Jdev 内置服务器在此文件夹中运行

C:\Users\<...>\AppData\Roaming\JDeveloper\system11.1.1.4.37.59.23 或类似的东西

你需要在你的 webapp/WEB-INF/lib 中而不是在其他区域中。

在我的本地，我在 C:\Users\<...>\AppData\Roaming\JDeveloper\system11.1.1.4.37.59.23\o.j2ee.wlLibs\jsp\Trinidad-Components1.2.war 下找到 Jar

我认为您可以使用 weblogic.xml 设置来强制 WEB-INF/lib 类优先于 server/lib 中的类加载

```
 <container-descriptor>     
<prefer-web-inf-classes>true</prefer-web-inf-classes>   
</container-descriptor> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:55:26.197

当您尝试加载一个试图加载另一个不在类路径上的类时，就会发生这种情况。找出 ColorConverter 需要哪些类，并确保它们在类路径中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:56:48.457

首先：你在服务器上部署什么？ADF jar 或 WAR 文件。在您的情况下 - 假设您没有在应用程序服务器上安装任何依赖 jar。您应该部署一个 WAR 文件。

在您的视图项目上 - 右键单击​​并选择项目属性。然后转到部署并编辑部署配置文件（如果没有，则创建一个）。确保选中“包括来自其他项目的库”复选框。（它在 Library Dependencies 选项卡中）。

[另外：您可能会在此处](http://docs.oracle.com/cd/E23943_01/web.1111/e16272/deploy_java_ee_app.htm)找到一些有用的信息。

希望这可以帮助。迈克尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:17:08.930

使用`StackTrace`你可以发现`classes`那些丢失了。我认为你丢失了一些 jar，它应该在你的类路径中。

# java-me - Lwuit触摸屏异常行为

> ID：11020570
> 
> 赞同：0
> 
> 时间：2012-06-13T17:53:41.187
> 
> 标签：java-me, lwuit, lwuit-form

我正在使用 LWUIT 制作应用程序。

1.  有一个表格

2.  表格中嵌入了一个列表。

3.  该列表有 5 个元素。

4.  最初，当我第一次加载应用程序时，如果我选择第一个元素，则选择第二个；当我选择第二个时，选择第三个等等（奇怪！）

5.  我也无法点击屏幕上的任何按钮

6.  接下来我要做的是，从使用箭头键（键盘的...我在模拟器上运行应用程序顺便说一句）转换为不同的

7.  然后我回到第一种形式，现在一切都按预期工作（没有奇怪的行为）。

8.  可能是什么问题？

9.  我正在使用 Sun Java Micro Edition SDK 3.0（默认触摸屏进行测试）

我的代码是：

```
List dummy = new List();
        dummy.addItem("wewerwer");
        dummy.addItem("wewerdswer");
        dummy.addItem("wewqweerwer");
        dummy.addItem("dscxwewerwer");
        dummy.addItem("jhgwewerwer");
        mainListForm.setLayout(new BorderLayout());
        mainListForm.addComponent(BorderLayout.CENTER,dummy);
   mainListForm.show(); 
```

这里可能出了什么问题？

**更新 1**

我认为这里有一个错误。我附上了下面的完整代码以及屏幕截图

```
import javax.microedition.midlet.*;

import com.sun.lwuit.*;
import com.sun.lwuit.events.*;
import com.sun.lwuit.plaf.UIManager;
import com.sun.lwuit.util.Resources;

public class Demo extends MIDlet implements ActionListener {

  private Form mForm;
List abc;
  public void startApp() {

      Display.init(this);

      try {
Resources r = Resources.open("/Test.res");
UIManager.getInstance().setThemeProps(r.getTheme(
r.getThemeResourceNames()[0])
);
} catch (Exception e){
System.out.println(e.toString());
}

    if (mForm == null) {
      Button click = new Button("Press me!");

      click.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent ae) {
                   System.out.println("I have been pressed");
                }
            });
       abc = new List();
      abc.addItem("Str1");
      abc.addItem("Str2");
      abc.addItem("Str3");
      abc.addItem("Str4");
      abc.addItem("Str5");
      abc.addItem("Str6");

      Form f = new Form("Hello, LWUIT!");
      abc.addActionListener(this);
       f.addComponent(abc);
      Command exitCommand = new Command("Exit");
      f.addCommand(exitCommand);
      f.addCommandListener(this);
      f.addComponent(click);
      f.show();
    }
  }

  public void pauseApp() {
  }

  public void destroyApp(boolean unconditional) {
  }

  public void actionPerformed(ActionEvent ae) {
      System.out.println(abc.getSelectedIndex());

  }
} 
```

![在此处输入图像描述](../Images/a00d0c874e095b7ca0909755f458428b.png)

所以现在当我点击列表中的“Str1”时，Str2 被选中，依此类推。

IDE：Netbeans Emulator：默认触摸屏手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:14:16.157

在动作事件上，通过调用将列表设置为在事件发生后再次处于活动状态`setHandlesInput(true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:41:52.333

好的....所以这就是你解决它的方法。

显示表单后，从表单中删除列表并再次将其添加到表单中，然后重新绘制表单。

**早期代码**

1) form.addComponenet(BorderLayout.center,list); 2) form.show();

**解决问题**

1)form.addComponenet(BorderLayout.center,list); 2)form.show(); 3)form.setScrollable(false);

我知道这有点奇怪，但是这样列表索引选择对于触摸屏手机来说很流畅。

# php - PHP：从函数返回值并直接回显？

> ID：11020575
> 
> 赞同：16
> 
> 时间：2012-06-13T17:53:58.697
> 
> 标签：php, function, echo

这可能是一个愚蠢的问题，但是……</p>

**php**

```
function get_info() {
    $something = "test";
    return $something;
} 
```

**html**

```
<div class="test"><?php echo get_info(); ?></div> 
```

有没有办法让函数自动“回显”或“打印”返回的语句？就像我想这样做...... </p>

```
<div class="test"><?php get_info(); ?></div> 
```

……里面没有“回声”？

有什么想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-13T17:55:50.990

您可以使用特殊标签：

```
<?= get_info(); ?> 
```

或者，当然，您可以让您的函数回显该值：

```
function get_info() {
    $something = "test";
    echo $something;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T17:57:52.877

如果需要，为什么要在可以回显时返回？

```
function 
get_info() {
    $something = "test";
    echo $something;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T17:57:05.173

为什么不包起来？

```
function echo_get_info() {
  echo get_info();
} 
```

和

```
<div class="test"><?php echo_get_info(); ?></div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T18:05:26.650

让函数自己回显该值。

```
function get_info() {
    $something = "test";
    echo $something;
    return $something;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T18:01:21.603

访问[echo](http://nl3.php.net/manual/en/function.echo.php)的 Manual page 会为您提供答案，这确实是前面的答案提到的：**shortcut syntax**。

不过要非常小心，如果[`short_open_tag`](http://nl3.php.net/manual/en/ini.core.php#ini.short-open-tag)在 中禁用`php.ini`，快捷方式 echo 将不起作用，并且您的代码将以 HTML 格式输出。（例如，当您将代码移动到具有不同配置的不同服务器时）。

为了降低代码的可移植性，我建议不要使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T17:58:02.227

当然，

直接在函数中打印它：

```
function get_info() {
    $something = "test";
    echo $something;
} 
```

或者使用 PHP 的简写来回显：

```
<?= get_info(); ?> 
```

虽然我建议你保持回声。返回函数更易读，更容易维护，不推荐使用简写。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-22T09:49:03.493

您可以将其添加为参数，以便您可以根据情况回显或返回。根据您最常使用的内容，将其设置为 true 或 false。

```
<?php
function get_info($echo = true) {

    $something = "test";

    if ($echo) {
        echo $something;
    } else {
        return $something;
    }

}

?>

<?php get_info(); ?>
<?php echo get_info(false); ?> 
```

# c++ - 如何从输入 C++ 中分别读取整数和分数

> ID：11020582
> 
> 赞同：0
> 
> 时间：2012-06-13T17:54:35.080
> 
> 标签：c++, floating-point

我的疑问是从输入流中跳过“ `.`”并读取两个不同变量中的整数和小数部分。假设我有一个像 10.26 这样的输入，我想存储`10`在一个变量`a`和`26`另一个变量中`b`。

在`C`，使用`scanf`，我会这样做

`scanf("%d.%d",&a,&b);`

`C++`使用的等效方法是什么`cin`？还是我应该包含`cstdio`并使用它`scanf`本身？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:04:06.573

您可以正常读取浮点数并使用 C-library 的`modf`函数来拆分数字：

```
#include <cmath>

float f = 0.0;
float ipart = 0.0;
float fpart = 0.0;

if (cin >> f)
    fpart = modf(f, &ipart);
else {
    // input failed
} 
```

让我们`operator>>`做错误检查！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:57:34.013

您仍然可以`scanf`在 C++ 中使用。如果要使用`cin`，则可以使用[`ignore`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)跳过`.`输入中的 。像往常一样将整数读入变量：

```
cin >> a;
cin.ignore(1, '.');
cin >> b; 
```

请注意，无论您使用什么，都会丢失有关小数部分的信息。值是`.1`还是`.001`，完成后你会发现`b == 1`。不过，它们是非常不同的价值观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:01:36.853

这是一种方法：

```
int egral;
unsigned int frac;
char sep;

if (!(std::cin >> egral >> sep >> frac) || sep != '.')
{
    // error, could not parse number
}

// integral part is 'egral, fractional part in 'frac' 
```

请注意，这会（错误地？）解析`1.5E2`为`1 + 0.5`，而不是`150 + 0`。您必须添加额外的逻辑来处理科学记数法的情况。读取实际的 float 并使用`modf`.

# dynamics-crm - 调用子对话框并传入输入参数

> ID：11020584
> 
> 赞同：1
> 
> 时间：2012-06-13T17:54:44.930
> 
> 标签：dynamics-crm, crm

我已经阅读了一堆关于如何从 javascript 调用对话框并将它们集成到功能区按钮的文章，但是我遇到了一个问题，我需要做所有这些并将字符串作为输入参数传递（给孩子对话？）。

这可能吗？我是否必须修改对话框的调用 url？

我已经阅读[了这篇](https://stackoverflow.com/questions/7600066/calling-a-dialog-in-dynamics-2011-and-passing-multiple-recordids-to-it)关于使用 SelectedControlAllItemsId 调用对话框的文章，这几乎是我所需要的。

理想情况下，我会打开父实体的表单，单击左侧导航中的子网格之一，然后选择一些相关/关联的实体，单击功能区按钮并等待对话框或工作流浏览所有这些标识。

是否可以使用 SelectedControlAllItemsId 捕获这些选定的项目，然后将该字符串传递给子对话框，以便它可以调用另一个工作流？还是应该捕获该字符串，通过 REST 将其存储在调用记录中，然后让工作流在字段触发器上运行？

最终结果是我必须运行自定义工作流并操作父记录 + 选定的相关记录。我已经编写了工作流程，但我不知道如何按照我想要的方式触发它。

也许我忽略了什么？有没有办法直接从 javascript 调用一段自定义代码并让它在剩下的时间里工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:46:37.183

我不确定交互式对话框应如何处理记录集合。当用户处理每条记录时，这肯定需要对话框的顺序迭代吗？正如您将[在 SDK](http://msdn.microsoft.com/en-us/library/gg509067.aspx#StartDialog)中看到的（并在您的链接线程中讨论过），只能针对单个记录运行*对话。*

工作流程是另一回事。- 自定义功能区按钮，使用`SelectedControlAllItemsId` - 支持 JScript 处理程序应该迭代`SelectedControlAllItemsId` - 每次迭代都应该`ExecuteWorkflowRequest`使用当前项目 id 并基于[这样的代码](http://mileyja.blogspot.co.uk/2011/06/execute-workflow-using-net-or-jscript.html)`ExecuteWorkflowRequest`（从 JScript发出

请记住，工作流请求是异步的，因此您可以一个接一个地发送所有请求，而不是等待每个请求的结果。

# apache - .htaccess RewriteRule 使用@符号？

> ID：11020586
> 
> 赞同：0
> 
> 时间：2012-06-13T17:55:01.757
> 
> 标签：apache, .htaccess, mod-rewrite, url-routing

我试图有一个看起来像这样的 URL：

> mysite.com/@username

这将路由到类似的东西：

> subdomain.mysite.com/user/@username

我对 RewriteRules 很糟糕，并且一直在努力让它发挥作用。我尝试过的一些事情是：

```
RewriteRule subdomain.mysite.com/user/(.*) mysite.com/$1  [R=302,NC,L]

RewriteRule ^(.@)(.*) subdomain.mysite.com/user/$1  [R=302,NC]

RewriteRule ^(.@)([A-Za-z0-9_]+) mysite.com/user/$1  [R=302,NC] 
```

我意识到那些可能完全没有意义。每次我试图弄清楚路由的工作原理时，我都会转过身，开始像你在上面看到的那样写废话。

任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:29:49.237

您无法路由到子域（无论如何都使用 htaccess），但您可以在那里重定向。

```
RewriteEngine On
RewriteBase /
RewriteRule @(.*) http://subdomain.mysite.com/user/@$1 [L,R=301] 
```

@ 符号应该没问题[https://stackoverflow.com/a/1547940/763468](https://stackoverflow.com/a/1547940/763468)

# android - 应用内结算 - 请求的项目不可购买

> ID：11020587
> 
> 赞同：16
> 
> 时间：2012-06-13T17:55:05.277
> 
> 标签：android, in-app-purchase, in-app-billing

我正在学习应用内计费，但​​我对谷歌的应用内计费示例（地下城之一）有疑问。

我已经设置了应用程序，添加了我的公钥，并在 makeRequestBundle() 中将 API_VERSION 更改为 1。

我已经导出并签署了应用程序并将其上传到 Google Play 并将其保存为带有几张图片的草稿并激活了 apk。我还添加了 Sword_001 和 potion_001 作为已发布的应用内购买！

接下来我将签名的应用程序安装到我的手机上，但是当我尝试购买剑或药水时，我得到了一个项目不可用的错误

> 您请求的项目无法购买。

我什至在不同的设备上尝试过，以确保不是因为开发人员无法购买他们自己的产品，而且我在两台设备上都收到了相同的消息。

我错过了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-09-08T11:27:08.867

检查您的`versionCode`. 它不能高于您的任何分销渠道（产品/测试版/alpha）中最后发布/未发布的版本。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-05T16:09:16.787

In app billing seems fraught with pitfalls, but this is what I found that affected availability of items for purchase and also suitability of application:

1.  My code for what it was worth was strongly based on the Google Android demo, but I stripped out a lot of the complexity. I have a feeling that having got it to work a better result would be produced by writing it all again from scratch.
2.  I got the static test product ids going first.
3.  Despite what the documentation says, it seemed to me that the purchase item(s) must be published, even when using a test account. Mine didn't work when they weren't, anyway, and I waited quite a long time to see if they would start to work as others have suggested - they still didn't.
4.  You (I anyway) can't publish a purchase item without publishing the app, so what I did was upload and publish the app, create the purchase items, publish them (big button at the bottom of the page), then unpublish the app again. This seems to leave the items published.
5.  The app must be signed in the usual way (I did this by exporting from Eclipse) before uploading, but what isn't so obvious is that the app you load to the mobile MUST also be signed in the same way - ie a (debug signed) version loaded to the device by Eclipse - run or debug - isn't going to work.
6.  They also both need the same version number, I think. Not 100% sure. If so that would unfortunately kind of imply that customers with old versions installed can't purchase anything without upgrading.
7.  When the app is uploaded to Google, it can take several hours before it becomes available and you get all the right responses for the in-app billing. I find 1-2 hours typically.
8.  I suspect the other comments on this subject about whether you use a gmail or googlemail test account might be red herrings, but for what it is worth, my test account is gmail.
9.  I did come across a useful little note on the internet somewhere about how to change your primary account on the mobile without having to do a hard reset (and consequently losing everything), but unfortunately I haven't managed to find it again.
10.  What I did find though is that one can have several google accounts on the mobile, and then select the one to be used by Google Play.

Hope this helps somebody. I have to say its a pretty complicated system, with not many switten down answers, and I nearly gave up on it.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-18T04:40:39.503

如果您的应用正在进行封闭式 Alpha 测试，您必须使用您的测试帐户登录到 Opt-in URL；`https://play.google.com/apps/testing/{your.app.namespace}`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-11T13:07:50.733

我对这个错误的经验是：

1.  确保将签名的 APK 上传到开发者控制台。

2.  确保在您的设备上安装签名的 APK，而不是在调试器中启动应用程序。

3.  确保在您的开发者控制台中创建一个测试帐户。

4.  确保使用您的测试帐户登录您的设备。

5.  确保在您的开发者控制台中创建应用计费，最后从控制台激活该项目！！！（这是在完全遵循谷歌教程后得到我的那个）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-12T16:48:29.857

仅上传未发布的草稿 apk 来测试应用内计费已不再足够。您需要做的是将 apk 上传到开发者控制台上的 alpha 或 beta apk 部分。然后，您需要发布它。如果您在 Production APK 部分中还有一个草稿 apk，请务必在发布之前将其删除。否则它将提供给所有人。

发布 alpha 或 beta apk 使该 apk 仅对您指定/允许的测试人员可用。

这是谷歌的文档：

[https://support.google.com/googleplay/android-developer/answer/6062777?rd=1](https://support.google.com/googleplay/android-developer/answer/6062777?rd=1)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T11:41:24.233

这几天也有这个问题，搜索了很多。我发现这个人说删除应用程序然后重新上传解决了他的问题，这实际上也对我有用。

试试看，从开发者控制台中完全删除您的应用程序。并重新上传一个新签名的 apk 并重新设置它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T18:51:09.873

好吧，我找到了解决问题的方法。我无法让 Google 的应用内购买示例工作，但我能够使用我在原始帖子中提到的步骤让这个[InApp 计费教程工作。](http://blog.blundell-apps.com/simple-inapp-billing-payment/)

如果没有别的，这可能有助于某人查看测试应用内计费示例之一所需完成的所有步骤。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-15T00:40:15.107

发布应用程序对我有用（并让它发布（！））。我不得不等待谷歌也更新他们的数据库，正如其他地方所提到的，谷歌播放的变化不是立即的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-26T11:20:34.600

**轶事补充：**如果您已经在门户中拥有一个现有的应用程序并且您想要测试签名版本，但不将其上传到门户中进行分发。执行正常步骤来构建签名版本，但使用上传到门户的最新版本代码。您将能够对购买进行快速而肮脏的测试（您不能在 Google Play 门户上上传此版本，但它是结束本地化测试的一种手段（甚至是一种允许侧载分布式的方式）使用 Google Play 进行合法计费的版本/风格。）

3:)

# asp.net - 在 ASP.NET 中继器中使用 ModalPopupExtender

> ID：11020588
> 
> 赞同：0
> 
> 时间：2012-06-13T17:55:07.277
> 
> 标签：asp.net, modalpopupextender

在转发器内使用 ModalPopupExtender 时，当页面加载时，所有弹出窗口都会出现而不被调用（转发器中的每个项目一个），然后迅速消失。
这样，弹出窗口就可以工作了，但问题是这些弹出窗口在开始时就显示出来了。弹出窗口是一个 OK/CANCEL 弹出窗口，当单击 OK 时触发回发，单击取消时不执行任何操作。它在页面加载时加载，因此当用户单击转发器上的链接按钮时它就存在。当用户点击链接按钮时，我们的意图是直接弹出弹出窗口而不做回发，这已经实现了，只是一开始随机排列弹出窗口的那个小问题！提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:43:30.360

直到现在我才能回答，对不起。结果是 HTML 代码和 CSS 有冲突的代码，这使得弹出窗口出现了！

# javascript - 用于在纬度/经度网格上绘制标记、线条和形状以供离线使用的 Javascript 插件？

> ID：11020589
> 
> 赞同：0
> 
> 时间：2012-06-13T17:55:10.467
> 
> 标签：javascript, cordova, map, gis, offline

我正在尝试制作一个简单的 PhoneGap 应用程序，该应用程序将允许用户输入纬度/经度点和方位角并计算它们的估计交点以及误差测量值。我想在地图上或至少在纬度和经度线的网格上显示线、交点和误差椭球，以便用户可以可视化点的准确性。棘手的部分是，这将用于在用户可能没有手机服务的地区进行野生动物追踪。是否有某种 Javascript 插件可以让我使用纬度/经度网格来绘制地理参考线和形状？我很想使用 Google Maps API 之类的东西，但这显然不适用于离线使用。我已经用谷歌搜索了很多，但我不确定从哪里开始，或者它是否可行。

这个程序类似于我想要实现的：[http ://www.locateiii.com/](http://www.locateiii.com/)

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:01:19.077

我会使用 d3.js 和[http://code.google.com/p/gmapcatcher/](http://code.google.com/p/gmapcatcher/)这样的东西，你可以让谷歌地图离线。如果这不可行，您可以随时使用带有 svg 地图的 D3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:03:24.997

我最终将[OpenLayers](http://openlayers.org/)与[Maperitive准备的](http://maperitive.net/)[OpenStreetMap](http://www.openstreetmap.org/)图块一起使用。简单且与PhoneGap 配合得很好。

# java - 基于属性自动装配 bean

> ID：11020593
> 
> 赞同：1
> 
> 时间：2012-06-13T17:55:17.253
> 
> 标签：java, spring, dependency-injection, javabeans, autowired

我有两个 bean，`beanA`并且`beanB`，在我的 Spring 配置中。这两个 bean 都实现了相同的接口。我有一个带有接口类型的自动装配字段的类（即，它将填充`beanA`or的实例`beanB`）。

最初只有一个 bean，所以我只使用了`@Autowired`注解并填充了该字段。但是，现在有两个可以自动装配的潜在 bean。我想根据我的一个`.properties`资源中是否存在属性来自动装配 bean。有什么优雅的方法可以做到这一点吗？

我现在使用的解决方案是使用`@Qualifier`autowired 字段上的注释来指定`beanA`，然后检查该属性是否存在于代码中。如果是这样，我将该字段重新分配给`beanB`. 这是一种非常笨拙的方法，所以我正在寻找更好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:11:53.707

除了 bean 配置文件的新功能之外，您还[可以利用](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean)在[`FactoryBean`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/FactoryBean.html)访问时实例化 bean。这个想法是注入`FactoryBean`bean 类型（例如`fqcn.BeanA`或`fqcn.BeanB`）。然后工厂 bean 将返回 bean 工厂以实例化您可能需要的正确类型的 bean。then的配置`FactoryBean`可以利用来自资源包的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:03:59.967

Bean 配置文件可能非常适合这一点 - 基于“活动”配置文件，可以创建一个或另一个 bean。

有点旧的文章，但仍然是 Spring 3.1 中配置文件的一个很好的参考 - [http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:12:29.693

[Spring Profile](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Profile.html)可以提供帮助

**配置更改**

web.xml

```
<context-param>
        <param-name>spring.profiles.active</param-name>
        <param-value>a</param-value>
    </context-param> 
```

带有配置文件的 spring-beans.xml。配置文件值可以作为决策的属性值。

```
<bean id="A" profile="a"/>
<bean id="B" profile="b"/> 
```

# file - 显示目录中的所有文件并使用 windows 命令行选择最新创建日期

> ID：11020594
> 
> 赞同：1
> 
> 时间：2012-06-13T17:55:17.253
> 
> 标签：file, command-line, scripting, directory, command

windows命令行有没有办法列出特定目录中的所有文件，然后选择具有最新创建日期的文件的名称。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:01:13.493

这将遍历目录列表并按日期为每个文件设置环境变量；最后一组将是最新的文件：

```
for /F "delims=" %%I in ('dir /b /a-d /od') do set LATEST=%%I
echo "%LATEST%" 
```

然后你可以像这样复制文件：

```
copy "%LATEST%" destination 
```

基于[此处](https://stackoverflow.com/questions/2469234/how-do-i-copy-the-newest-file-in-a-directory-somewhere-else-from-the-command-lin)找到的解决方案。

**编辑：**直接通过命令提示符执行此操作时，我也遇到了`%%I was unexpected at this time`错误，但它在批处理文件中运行良好。您可以使用上述创建一个批处理文件，它应该可以工作。

# macos - 是否可以在 Mono/Mac OS 中使用 LuaInterface？

> ID：11020596
> 
> 赞同：1
> 
> 时间：2012-06-13T17:55:28.970
> 
> 标签：macos, mono, luainterface

LuaInterface 使用两个 .dll：**lua51**和**luanet**。

虽然能够将 lua51 重建为 liblua5.1.dylib （并且代码实际上找到了所有必要的入口点），但我完全被**luanet.dll**困住了。

有谁知道如何在 Mac OS 上构建它，或者我是否必须完全避免使用它（以丢失 ObjectTranslator 和 MetaFunctions 之类的东西为代价）？

*我已经知道有像[http://github.com/jsimmons/LuaSharp](http://github.com/jsimmons/LuaSharp)这样的替代品。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:46:47.470

你需要配置你的 DllMap 告诉它 luanet.dll 应该在 lua51.dylib

[http://www.mono-project.com/Config_DllMap](http://www.mono-project.com/Config_DllMap)

# perl - 从 Perl 调用 Fortran 程序而不保存输入/输出文件

> ID：11020608
> 
> 赞同：5
> 
> 时间：2012-06-13T17:56:16.840
> 
> 标签：perl, fortran

我正在使用 Perl 程序将用户输入正确格式化为 Fortran 程序的输入文件。Fortran 程序创建一个输出文件和错误文件。Fortran 程序是从 Perl 调用的，例如：

```
system "/mydirectories/fortranexecutable $inputfile $outputfile $errorfile"; 
```

我想知道是否有一种方法可以在调用 Fortran 程序之前/之后不实际创建输入/输出/错误文件并将它们保存到磁盘的情况下调用 Fortran 可执行文件？我希望我的问题很清楚，而不是太明显。我是 Perl 的新手，我已经尝试过到处搜索这个。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:56:44.090

如果 Fortran 代码顺序读取和顺序写入现有文件，但您想从 Perl 代码“实时”与其通信，那么您可以使用[命名管道](http://www.linuxjournal.com/content/using-named-pipes-fifos-bash)来解决问题。它们仍然作为文件系统中的条目存在，并且可以通过给定其名称的 Fortran 代码像通常的文件一样打开，但是从/向它们读取/写入它们的工作方式类似于管道。

在 Perl 你会做这样的事情（公然从[这个答案](https://stackoverflow.com/a/3817865/1374437)复制）：

```
use File::Temp qw(tempdir);
use File::Spec::Functions qw(catfile);
use POSIX qw(mkfifo);

my $dir = tempdir(CLEANUP=>1);
my $inputfifo = catfile($dir, "input");
mkfifo($inputfifo, 0700) or die "mkfifo($inputfifo) failed: $!";
my $outputfifo = catfile($dir, "output");
mkfifo($outputfifo, 0700) or die "mkfifo(output$fifo) failed: $!";
my $errorfifo = catfile($dir, "error");
mkfifo($errorfifo, 0700) or die "mkfifo($errorfifo) failed: $!";

... open the FIFOs ...

system "/mydirectories/fortranexecutable $inputfifo $outputfifo $errorfifo";

... operate with the FIFOs to communicate with the Fortran code ...

... close FIFOs and remove $dir when finished ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:26:46.770

不可以。如果 Fortran 程序以这样的方式编写，它将`$inputfile`作为命令行参数，从中读取数据并输出`$outputfile`，`$errorfile`因此，唯一的方法是通过文件。

如果您希望通过标准输入将输入数据传递给 Fortran 可执行文件，则必须修改 Fortran 源代码以适应这种输入。

# shell - 与串行项合并

> ID：11020612
> 
> 赞同：4
> 
> 时间：2012-06-13T17:56:32.917
> 
> 标签：shell, emacs

好的，我喜欢 emacs 中的 comint 模式，但是我确实有问题。

我需要通过串行线与嵌入式 Linux 板通信。

我有两种方法可以做到这一点：

1）我基本上可以设置一个腻子串行会话（指定串行开发，波特率等），保存会话，然后在emacs内部（在Linux和Windows中），从我调用plink的shell “保存的腻子会话名称”。这对 comint 很有用。我可以使用我的键绑定来比较好地访问我的历史记录。我用这种方法失去的一件事是命令完成。

我相信我会丢失这个，因为在检测到线路终止之前，线路不会发送到串行设备。不被视为行终止的选项卡仅位于等待发送的缓冲区上。我试图通过将字符绑定到“comint-send-input”函数来解决这个问题，但到目前为止这对我不起作用。

2）我知道我可以使用“串行术语”绕过腻子并在原始输入模式下进行选项卡扩展，但是这样做我失去了使用我的历史绑定的能力。

我两个都想要。我希望能够像在 shell 上一样使用历史记录，同时我希望在“串行终端”中使用原始字符模式时在串行目标上完成制表符。任何帮助是极大的赞赏。

# windows - 移动 Windows 7 加密文件

> ID：11020615
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:56:36.543
> 
> 标签：windows, file, encryption, filesystems, sharing

我正在测试 Windows 7 文件加密。测试文件已加密（我看到绿色文件名）。该文件已通过网络共享，并且仍然可以从其他站点打开。该绿色文件名也可以从其他计算机上查看。我究竟做错了什么？我承认我还不知道加密概念。

如果我将该文件移动到其他计算机的共享文件夹，则会出现消息询问“确认加密丢失”。如何使用加密复制该文件？

我知道 Truecrypt 软件，但我正在使用 Windows 加密进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:26:05.433

NTFS 文件加密使用您的密码哈希来加密文件。如果您从另一台计算机连接到该文件，您需要提供用户密码，这意味着远程计算机拥有解密该文件的密钥。

如果将文件从共享复制到本地计算机，windows 会将密钥保存在远程计算机中。

文件系统加密的整个想法是另一个用户不能使用您的加密文件，或者其他人不能使用您的硬盘驱动器。但是，如果您已登录，则您已执行或有权访问您的令牌的所有正在运行的应用程序（例如，SYSTEM 用户）都可以访问该文件，而无需知道该文件已在磁盘上加密。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T22:52:33.780

小心加密！一些适用于 Windows 的加密系统会自动为您加密文件/文件夹。这在政府/公司计算机中很常见。如果您没有此设置，然后您计算机上具有此设置的另一个用户访问您的文件/文件夹，则文件/文件夹可以使用该其他用户的令牌加密，然后您将无法访问您的自己的文件/文件夹！
这实际上发生在我上周。花了一整天的时间才弄明白，因为 Windows 不会告诉你谁加密了文件，只是说它不是用你当前的令牌完成的。啊！（如果权限设置为只读，则不会发生这种情况，但在协作环境中，有时权限不会以这种方式设置。）

# c# - Rx：如何以最少的样板对内部可观察完成执行操作？

> ID：11020616
> 
> 赞同：1
> 
> 时间：2012-06-13T17:56:40.000
> 
> 标签：c#, system.reactive

为了精简 Rx，我正在编写一个模拟读取文件并支持取消的简单应用程序。

它是这样工作的：

*   当用户按下“运行”按钮时，程序

    *   显示忙碌指示器，
    *   分块读取文件，这是一个漫长的过程，报告每个文件的长度，
    *   当读取过程完成（或取消，见下文）时隐藏忙碌指示符。
*   如果用户按下“取消”按钮，文件读取过程将被取消。

*   如果用户在前一个操作仍在进行时按下“运行”按钮，则前一个操作将被取消并开始新的操作。

我正在寻找一种**用最少的胶水代码来实现这一点**的方法，同时仍然保持简单的同步操作序列的外观，其中很容易看到自然控制流。

主要问题似乎是当内部可观察对象（阅读器）完成时隐藏忙碌指示器，外部可观察对象是“运行”点击事件序列。

到目前为止，我想出了程序主要部分的这两个版本：

基于订阅者：

```
IObservable<byte[]> xs =
   runClick
   .Do((Action<EventPattern<EventArgs>>)(_ => ShowBusy(true)))
   .Do(_ => ShowError(false))
   .Select(_ =>
      reader
      .TakeUntil(cancelClick)
      .Publish(ob =>
      {
         ob.Subscribe(
            b => { },
            ex =>
            {
               Console.WriteLine("ERROR: " + ex);
               ShowBusy(false);
               ShowError(true);
            },
            () => ShowBusy(false));
         return ob;
      }))
   .Switch();
xs = xs.Catch<byte[], Exception>(e => xs); 
```

和基于 concat：

```
IObservable<byte[]> xs =
   runClick
   .Do((Action<EventPattern<EventArgs>>)(_ => ShowBusy(true)))
   .Do(_ => ShowError(false))
   .Select(_ =>
      reader
      .TakeUntil(cancelClick)
      .DoAfter(() =>
         ShowBusy(false)))
   .Switch();
xs = xs.Catch<byte[], Exception>(e =>
{
   Console.WriteLine("ERROR: " + e);
   ShowBusy(false);
   ShowError(true);
   return xs;
}); 
```

使用一种自定义方法`DoAfter`

```
public static IObservable<T> DoAfter<T>(this IObservable<T> observable, Action action)
{
   IObservable<T> appended = observable.Concat(
      Observable.Create<T>(o =>
      {
         try
         {
            action();
         }
         catch (Exception ex)
         {
            o.OnError(ex);
            return Disposable.Empty;
         }

         o.OnCompleted();
         return Disposable.Empty;
      }));
   return appended;
} 
```

[（在此处](http://dumpz.org/216885/)查看整个应用程序代码）。

两种实现都不完全让我满意：第一个相当冗长，第二个迫使我为一个相当简单的任务编写自己的方法，我希望通过标准方法来完成。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:52:13.263

原来我缺少的是方法的[重载](http://msdn.microsoft.com/en-us/library/hh229830%28v=vs.103%29.aspx)`Do`。我可以使用它代替我的自定义`DoAfter`方法，然后代码看起来不错。

```
IObservable<byte[]> xs =
   runClick
   .Do((Action<EventPattern<EventArgs>>)(_ => ShowBusy(true)))
   .Do(_ => ShowError(false))
   .Select(_ =>
      reader
      .TakeUntil(cancelClick)
      .Do(
         b => { },
         ex =>
         {
            Console.WriteLine("ERROR: " + ex);
            ShowBusy(false);
            ShowError(true);
         },
         () => ShowBusy(false)
      ))
   .Switch();
xs = xs.Catch<byte[], Exception>(e => xs); 
```

# android - 在 ICS 和 Gingerbread 上启动 Android 应用程序时的不同行为

> ID：11020617
> 
> 赞同：2
> 
> 时间：2012-06-13T17:56:42.313
> 
> 标签：android, android-intent, android-manifest

我的应用程序包含一个主要活动 A 和其他几个活动 B、C、D、E，它们只能通过菜单从主要活动 A 启动。例如，如果我在活动 B 中并单击“返回”按钮，那么我总是会回到主要活动 A。

再次考虑我们在活动 B 中，我单击主页按钮。然后，单击我的应用程序的启动图标返回应用程序时，我有不同的行为：

*   在 Gingerbread 上（在模拟器上测试）这会导致活动 B 显示，我可以通过按下后退按钮返回到活动 A。
*   在 ICS 上，行为是不同的，这会导致新的活动 A 开始，如果我单击 A 中的后退按钮，然后我会回到 B。这不是预期的行为，对我来说正确的是姜饼。

另一个例子，如果我在主要活动 A 中并单击主页按钮。然后我点击启动图标：

*   在 Gingerbread 上，这会导致活动 A 恢复。因此，如果我单击后退按钮，我就存在于应用程序中。
*   在 ICS 上，这会导致创建一个新的活动 A。所以如果我点击后退按钮，我会回到上一个活动 A，我必须再次点击 A 才能退出。

这是 manisfest.xml 内容：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="10"/>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.android.vending.CHECK_LICENSE" />

<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"/>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name">

    <activity
        android:name=".B"
        android:configChanges="orientation"
        android:screenOrientation="portrait">
    </activity>

    <activity
        android:name=".C"
        android:configChanges="orientation"
        android:screenOrientation="landscape">
    </activity>

    <activity
        android:name=".D"
        android:configChanges="orientation"
        android:screenOrientation="landscape">
    </activity>

    <activity
        android:name=".E"
        android:configChanges="orientation"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="com.perfexpert.intent.ACTIVITY_E" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".A"
        android:configChanges="orientation"
        android:screenOrientation="portrait"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

以及用于从主要活动开始活动的代码：

```
startActivityForResult(new Intent(this, B.class), REQUEST_CODE_B); 
```

为什么我在 ICS 上有这种不同的行为？如何在 ICS 上获得 Gingerbread 行为？

根据[Android Developers 网站](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)，预期如下：

> 例如，假设当前任务（任务 A）在其堆栈中有三个活动——两个在当前活动之下。用户按下 Home 按钮，然后从应用程序启动器启动一个新应用程序。当主屏幕出现时，任务 A 进入后台。当新应用程序启动时，系统会为该应用程序启动一个任务（任务 B），并使用它自己的活动堆栈。与该应用程序交互后，用户再次返回 Home 并选择最初启动任务 A 的应用程序。现在，任务 A 进入前台——其堆栈中的所有三个活动都完好无损，堆栈顶部的活动恢复。

这是我在模拟器（姜饼）上得到的行为，但在我的 Nexus S（ICS）上却没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:15:10.310

据我所知，这里的 ICS 应该没有不同的行为。我唯一能想到的是破坏活动的新开发者选项。根据您的描述，您似乎已将其打开。

> **立即销毁活动**
> 
> 告诉系统在活动停止后立即销毁它（就像 Android 必须回收内存一样）。这对于测试 onSaveInstanceState(Bundle) / onCreate(android.os.Bundle) 代码路径非常有用，否则很难强制执行。由于不保存状态，选择此选项可能会揭示您的应用程序中的许多问题。有关保存活动状态的更多信息，请参阅活动文档。

[http://developer.android.com/guide/developing/debugging/debugging-devtools.html](http://developer.android.com/guide/developing/debugging/debugging-devtools.html)

编辑：但这并不能解释您在下面的报价。

> 在 ICS 上，行为是不同的，这会导致新的活动 A 开始，如果我单击 A 中的后退按钮，那么我会回到 B。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:23:57.837

我将假设您最初（第一次）从 IDE（如 Eclipse 或 IntelliJ）或使用安装程序（从市场或浏览器或在文件浏览器中单击 APK）安装它之后启动应用程序。如果是这样，这是 Android 中的一个已知错误（请参阅[http://code.google.com/p/android/issues/detail?id=26658](http://code.google.com/p/android/issues/detail?id=26658)）。许多人已经为这个问题苦苦挣扎了好几天:-(

可以在[http://code.google.com/p/android/issues/detail?id=2373#c21找到针对此问题的简单解决方法](http://code.google.com/p/android/issues/detail?id=2373#c21)

要验证这是您的问题，请不要从 IDE 或安装程序启动它。只需安装该应用程序，然后从可用应用程序列表中启动它。

该错误存在于所有设备上，在所有版本的 Android 上（至少到 ICS，尚未在 JellyBean 上测试）。这一切都在模拟器中正常工作，因此您不能将模拟器行为用作真实设备行为的指示。

# sql - 使用 ssms 将数据从 sql server 导出到 CSV

> ID：11020618
> 
> 赞同：5
> 
> 时间：2012-06-13T17:56:54.383
> 
> 标签：sql, sql-server, sql-server-2008, ssms

我需要使用 SSMS 从 SQL Server 2008 中的多个表中导出数据。我*不想*使用本机*导出数据向导*；我想改用查询。这意味着我不能使用`sqlcmd`or `bcp`。

如何使用查询从 SQL Server 2008 中导出数据？

我需要它以逗号分隔并双引号作为文本限定符。

非常感谢您的任何指导/帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:24:12.037

您可以轻松地从 SSMS 创建 CSV 输出，但它不会进行引用，因此您可能希望在步骤 6 中选择制表符分隔的格式：

1.  打开一个新的查询窗口。
2.  创建您的 SQL 查询。
3.  在查询窗口中单击鼠标右键。
4.  选择查询选项...
5.  选择结果下的文本。
6.  将输出格式：更改为逗号分隔。
7.  将每列中显示的最大字符数更改为 8000 或适当的值。
8.  单击确定。
9.  在查询窗口中单击鼠标右键。
10.  选择结果到和结果到文件。
11.  执行您的查询。
12.  选择文件名和位置。
13.  单击保存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:27:13.533

你可以运行`xp_cmdshell`运行一个`bcp`操作：

```
use [master];

declare @sql nvarchar(4000)
select @sql = 'bcp "select * from sys.columns" queryout c:\file.csv -c -t, -T -S'+ @@servername
exec xp_cmdshell @sql 
```

当然，您必须弄清楚如何格式化您的限定符（可能通过[格式文件](http://msdn.microsoft.com/en-us/library/ms191516.aspx)）

编辑：

您的源查询需要类似于以下内容：

```
SELECT IntValue + '"' + CharValue + '"' FROM TABLE 
```

此外，您可能需要启用此功能

```
EXEC sp_configure 'show advanced options', 1;
RECONFIGURE;
GO
EXEC sp_configure 'xp_cmdshell', 1;
RECONFIGURE;
GO 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:04:48.070

无法使用 SQL 查询创建文本文件。SQL 仅用于从数据库中获取、解析、更新（等）数据。您需要有系统可执行文件/dll 才能写入文件。
您是否有特定原因要使用 SSMS 将生成的结果导出到 csv？为什么不使用 SSIS 生成 csv 的结果？

如果您使用 SSIS 来执行此操作，您将创建一个包来导出信息，然后将包安排在一个作业中，以便在您希望它运行时运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T18:14:50.173

要导出到现有的 excel 文件：

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=D:\testing.xls;', 
'SELECT * FROM [SheetName$]') select * from SQLServerTable 
```

这是过时的，但我相信它仍然有效。

[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926)

干杯!

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T18:07:22.847

您可以编写一个带有插入的选择。

例如：select 'insert into TargetTable values(id, name) values ('''+ id +''','''+ name +''')' from SourceTable

# c# - 隐藏aspx时下拉列表文本更改

> ID：11020625
> 
> 赞同：0
> 
> 时间：2012-06-13T17:57:26.660
> 
> 标签：c#, asp.net

我有一个启用了自动回发的下拉列表。当我更改值时，它会更新我网页上的 grideview。但是我想摆脱下拉菜单并使用类似于搜索功能的文本框。我仍然想保留我的列表，以便我可以将我的搜索字符串与实际的当前值进行比较。但是，如果我使我的下拉列表不可见，我无法将值与其中的项目进行比较。

还是有更好的解决方案？用户看不到但我可以将数据库值放入其中并将这些值与文本框文本进行比较的控件？

谢谢您的帮助。

我收到此代码错误：

```
 foreach (string s in DropDownList3.Items)
    { 
       //foreach gives me the error below     

       if(s == idsearch.Text)
       {
          valid = true;    
          break;
       }
    }

    if(valid == true)
    {
       GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:37:25.627

为什么不在服务器端代码中使用变量来将值存储在下拉列表中。所以例如..

```
String [] comparedValues = new String[4] {"value1", "value2", "value3", "value4"}; 
```

接着..

```
if (comparedValues.Contains(myTextBox.Text))
{
    // Do Something...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:10:57.147

错误是由于将 ListItem 转换为字符串。这样做：

```
foreach (ListItem s in DropDownList3.Items)
{
    if(s.Text== idsearch.Text){

       valid = true;

       break;
    }
} 
```

`DropDownList.Items.FindByText`或者您可以使用或`DropDownList.Items.FindByValue`方法通过文本或值查找项目。

```
var searchResult = DropDownList1.Items.FindByText(idsearch.Text);

bool valid = searchResult != null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:12:04.830

DropDownList3.Items 返回 System.Web.UI.WebControls.ListItem 而不是 List。你应该做这个

```
 foreach (ListItem item in DropDownList3.Items)
  { //foreach gives me the error below

    if(item.Text == idsearch.Text)
    {

      valid = true;

      break;
    }

 } 
```

# php - 使用一个查询的结果作为 MySQL 上另一个查询的输入

> ID：11020629
> 
> 赞同：2
> 
> 时间：2012-06-13T17:57:43.560
> 
> 标签：php, mysql

我正在尝试使用一个查询的结果作为另一个查询的输入，但我很难过。我考虑过使用 JOIN ，但我认为在这种情况下，两个查询需要我单独运行。本质上，我的数据库中有一个文章列表。当我遍历从第一个查询中获得的列表或文章时，我想搜索第二个表以找出每篇文章的投票数。

这是代码：

```
<?php
  $sql=mysql_query("SELECT * FROM discussion_links WHERE link_side = 'Michigan'");
  while($row = mysql_fetch_array($sql)) {
?>

<div class="top-links-wrapper">
    <div>
       <div class="link-info">
           <a class="link-title" href="http://<?php echo $row['link_url'] ?>">
           <?php echo $row['link_title'] . "</a>"; ?>
           <p class="link-source"><?php echo $row['link_source'] . "</p>" ?>
       </div>
       <div class="link-vote-wrapper">
           <span class="link-votes">
           <?php    
                $sql2=mysql_query("SELECT * FROM link_votes WHERE link_id = " . $row['link_id'] .")";
                $num_rows = mysql_num_rows($sql2);
                echo "$num_rows";
            ?>
           </span>
       </div>
    </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:03:20.413

你可以加入这两个查询试试这个

```
SELECT dl.* , lv.*
FROM discussion_links dl
LEFT JOIN link_votes lv ON lv.link_id = dl.link_id
WHERE link_side = 'Michigan' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:00:06.227

改变

```
$sql2=mysql_query("SELECT * FROM link_votes WHERE link_id = " . $row['link_id'] .")"; 
```

到

```
$sql2=mysql_query("SELECT * FROM link_votes WHERE link_id = " . $row['link_id']); 
```

右括号`)`是函数调用的一部分而不是查询

或者更好的是创建一个查询：

```
SELECT * FROM discussion_links d 
JOIN link_votes v
on d.link_id = v.link_id
WHERE d.link_side = 'Michigan' 
```

您应该替换`SELECT *`并只选择您需要的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:04:15.463

已修复，在第二个查询中出现错误：

```
$sql2=mysql_query("SELECT * FROM link_votes WHERE link_id = " . $row['link_id']); 
```

现在可以了。

# c# - C# 设置从基类派生的属性

> ID：11020632
> 
> 赞同：0
> 
> 时间：2012-06-13T17:57:49.703
> 
> 标签：c#, asp.net

我似乎无法从基类调用派生类中重写属性的设置器。这似乎是一个人应该能够做的事情，但我显然错过了一些东西。在下面 SearchSurveyBase 类的 DisplayQuestion 方法中，这一行似乎没有做任何设置：

```
VisibleQuestions.Add(sqc.SurveyQuestion.ID); 
```

VisibleQuestions 是在派生类中被覆盖的抽象列表。吸气剂似乎从基础上工作得很好。我可以看到它们在调试时被派生类击中。但是，setter 似乎根本没有工作。getter 被称为很好，但 setter 永远不会设置。我在这里想念什么？有一个更好的方法吗？

基类：

```
public abstract class SearchSurveyBase : System.Web.UI.UserControl
{
    public abstract List<int> VisibleQuestions { get; set; }

    public abstract void SetupControls();

    protected void AddQuestion(Accordion accSection, Question question)
    {
        SearchQuestionControl searchQuestionControl = GetQuestionControl(question.ControlType);

        if (searchQuestionControl != null)
        {
            //QuestionVisible is a method that checks to see if the object's id is in the VisibleQuestions list
            searchQuestionControl.Visible = QuestionVisible(question);

            if (!searchQuestionControl.Visible)
            {
                string btnID = "lb_" + accSection.ID.ToString() + "_" + accSection.Panes.Count;
                LinkButton btn = new LinkButton();
                btn.ID = btnID;
                btn.Text = question.Text;
                btn.CommandArgument = questionPane.ID;
                btn.Command += new CommandEventHandler(DisplayQuestion);
                questionPane.HeaderContainer.Controls.Add(btn);
            }

            questionPane.ContentContainer.Controls.Add(searchQuestionControl);
            searchQuestionControlList.Add(searchQuestionControl);
        }
        accSection.Panes.Add(questionPane);
    }

    private void DisplayQuestion(object sender, CommandEventArgs e)
    {
        SearchQuestionControl sqc = null;
        AccordionPane pane = (AccordionPane)UIUtilities.FindControlRecursive(RootControl, e.CommandArgument.ToString());
        if (pane != null && pane.ContentContainer.HasControls() && pane.ContentContainer.Controls[0] is SearchQuestionControl)
        {
            sqc = (SearchQuestionControl)pane.ContentContainer.Controls[0];
        }

        if (sqc != null)
        {
            if (!sqc.Visible)
            {
                //Removed a bunch of lines that aren't relevant to the question per request.
                VisibleQuestions.Add(sqc.SurveyQuestion.ID);
            }
        }
    }
} 
```

派生类：

```
public partial class SearchSurveyAccordion : SearchSurveyBase
{
    override public List<int> VisibleQuestions
    {
        get
        {
            // hfVisibleQuestions is a HiddenField control on the .ascx page that inherits this class.
            if (!string.IsNullOrWhiteSpace(hfVisibleQuestions.Value))
            {
                string[] vals = hfVisibleQuestions.Value.Split(',');
                List<int> vqs = new List<int>(Array.ConvertAll<string, int>(vals, (x => Convert.ToInt32(x))));
                return vqs;
            }
            else
            {
                return new List<int>();
            }
        }
        set
        {
            hfVisibleQuestions.Value = string.Join(",", value.Select(n => n.ToString()).ToArray());
        }
    }

    // This method is called during the Page_Init of the page that is consuming this user control.
    override public void SetupControls()
    {
        if (base.survey != null && base.survey.QuestionList != null && base.survey.QuestionList.Count > 0)
        {
            BuildAccordion(base.survey.QuestionList);
        }
    }

    private void BuildAccordion(List<Question> questionList)
    {
        Accordion accSection = null;
        foreach (Question question in questionList)
        {
            accSection = base.AddSection(accSurvey, defaultSectionHeader);
            AddQuestion(accSection, question);
        }
    }
} 
```

TL；博士？这是问题的简短版本。

我有一个基类和一个派生类。我希望基类中的方法能够设置在派生类中被覆盖的抽象属性的值，但它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:06:29.690

如果您期望以下语句调用 VisibleQuestions 的设置器，那么您就错了：

```
VisibleQuestions.Add(sqc.SurveyQuestion.ID); 
```

此语句调用`List<int>`VisibleQuestions getter 返回的实例的 Add 方法。

如果您为 VisibleQuestions 分配了一个值，则会使用 setter，如下所示：

```
VisibleQuestions = new List<int>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:06:43.187

您没有在该行调用 setter。您正在调用返回一个列表的 getter，您可以在其中添加一个元素。但是，下次您访问同一个 getter 时，您会创建一个新列表（没有添加的元素），您会重新返回该列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:10:18.787

来自[MSDN - 使用属性（C# 编程指南） - 设置访问器](http://msdn.microsoft.com/en-us/library/w86s7x04.aspx)：

> 当您**为 property 赋值**时，将使用提供新值的参数调用 set 访问器。

仅当您实际设置属性值时才会调用 setter。在您的情况下，您正在调用您的 getter，它根据基础字段的值返回一个新列表。如果您想在更新列表后更新该基础字段，则需要将属性的值设置为更新后的列表，如下所示：

```
// Calls the getter and returns a new list
List<string> questions = VisibleQuestions; 

// Updates the list, but does not trigger the setter
questions.Add(sqc.SurveyQuestion.ID); 

// Calls the setter
VisibleQuestions = questions; 
```

# python - 当我在 python 中的匹配对象上执行 dir() 时，为什么没有列出 re 属性？

> ID：11020636
> 
> 赞同：2
> 
> 时间：2012-06-13T17:58:04.097
> 
> 标签：python, regex, attributes

这是一些示例 Python 代码：

```
import re
some_regex = re.compile(r"\s+1\s+")
result = some_regex.search(" 1 ")
dir(result) 
```

我使用 Python 2.6.1 返回以下内容：

```
 ['__copy__', '__deepcopy__', 'end', 'expand', 'group', 'groupdict', 'groups', 'span', 'start'] 
```

然而`result.re`存在（来自解释器）：

```
>>> result.re
<_sre.SRE_Pattern object at 0x10041bc90> 
```

`dir()`使用函数时如何不列出属性？

此页面确认`re`属性的存在：

[http://docs.python.org/library/re.html#re.MatchObject.re](http://docs.python.org/library/re.html#re.MatchObject.re)

现在我明白了，如果一个人试图访问一个未通过 列出的属性`dir()`，那么`__getattr__`就会被调用，但我也没有看到`__getattr__`列为对象的属性之一，所以我只能摸不着头脑。

**更新**

这里是`matchobject.re`Python 2.6.1 文档中存在的证明：http: [//docs.python.org/release/2.6.1/library/re.html#re.MatchObject.re](http://docs.python.org/release/2.6.1/library/re.html#re.MatchObject.re)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:25:01.100

您会看到这种行为，因为该类是在 C 中实现的，并且`dir()`与 custom 不可靠的方式相同，`__getattr__()`当 C 代码定义 getattr 函数时它也是不可靠的。

这是 SRE_Match getattr 函数的 Python 2.6 C 代码的链接：

[http://hg.python.org/cpython/file/f130ce67387d/Modules/_sre.c#l3565](http://hg.python.org/cpython/file/f130ce67387d/Modules/_sre.c#l3565)

请注意，`match_methods`数组中定义的方法具有 Python 实现并且在`dir()`输出中可见，但由函数中的 an 处理`if`是`match_getattr()`不可见的。

在 Python 2.6 中，它看起来包括以下属性：lastindex、lastgroup、string、regs、re、pos 和 endpos。

这是一些 Python 2.7 代码的链接，它略有不同。这里没有为 SRE_Match 实现 getattr 函数，所有方法和属性都可以在`match_methods`、`match_members`和`match_getset`数组中找到，所有内容都可以在`dir()`.

[http://hg.python.org/cpython/file/60a7b704de5c/Modules/_sre.c#l3612](http://hg.python.org/cpython/file/60a7b704de5c/Modules/_sre.c#l3612)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:00:47.100

内置函数`dir()`是一个便利函数，会生成一个近似的属性列表。从[文档](http://docs.python.org/library/functions.html#dir)中：

> 因为`dir()`主要是为了方便在交互式提示中使用而提供的，所以它尝试提供一组有趣的名称，而不是尝试提供一组严格或一致定义的名称，并且它的详细行为可能会随版本而变化。例如，当参数是类时，元类属性不在结果列表中。

请注意，不可能总是给出完整的属性列表，因为类可以在其`__getattr__()`和`__getattribute__()`方法中做任何他们想做的事情。

# c - 传递结构指针和“冲突类型”错误的问题

> ID：11020644
> 
> 赞同：0
> 
> 时间：2012-06-13T17:58:52.190
> 
> 标签：c, arrays, pointers, memory-management, compiler-errors

我正在编写一个程序，该程序根据给定的输入排列名称列表。这是我的代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LEN 19 //names no longer than 19 chars
#define MAXPEOPLE 10

struct genderinfo {
    char** winning;
    char** names;
    int** scores;
};

char** allocnames(int num);
int** allocratings(int num, int num2);
void inputdata(int numpeople, struct genderinfo *male, struct genderinfo *female, FILE* fp);
void permute(int permuteset[], int k, int numpeople, struct genderinfo *male, struct     genderinfo *female, int *maxLindex);
void swap(int permuteset[],int i, int j);
void compare(int permuteset[], struct genderinfo *male, struct genderinfo *female, int *maxLindex, int numpeople);

///write free functions for struct arrays

int main () {

FILE* fp = fopen("matching.txt", "r");

struct genderinfo male;
struct genderinfo female;

//loop variables
int numdates, i, j, k;

//other variables
int numpeople, maxLindex = 0, difference;

fscanf(fp, "%d", &numdates);

for(i=1; i <= numdates; i++) {

    fscanf(fp, "%d", &numpeople);
    //printf("%d possible couples\n", numpeople);

    //allocate memory for arrays of names
    male.names = allocnames(numpeople);
    female.names = allocnames(numpeople);
    male.winning = allocnames(numpeople);
    female.winning = allocnames(numpeople);

    //allocate memory for score arrays
    male.scores = allocratings(numpeople, numpeople);
    female.scores = allocratings(numpeople, numpeople);
    int permuteset[numpeople];

    //fill permute set with 0-k, these will serve as array indexes to compare against malenames array
    //format used will be malenames[i][permuteset[i]] femalenames[permuteset[i]][i] to index the scores
    for(k=0; k<numpeople; k++)
        permuteset[k] = k;

    inputdata(numpeople, &male, &female, fp);
    permute(permuteset, 0, numpeople, &male, &female &maxLindex);

    printf("Matching #%d: Maximum Score = %d\n\n", i, maxLindex);

    for (j=0; j<numpeople; j++){

            printf("%s %s\n", male.winning[j], female.winning[j]);
    }

    printf("\n\n");

}

return 0;

}

char** allocnames(int num) {

int i;

char** names = (char**)malloc(num*sizeof(char*));

for(i=0; i < num; i++)
    names[i] = (char*)malloc(MAX_LEN+1);

return names;

}

int** allocratings(int num, int num2) {

int i;

int** ratings = (int**)malloc(num*sizeof(int*));

for(i=0; i < num; i++)
    ratings[i] = (int*)malloc(num2*sizeof(int));

return ratings;

}

void inputdata(int numpeople, struct genderinfo *male, struct genderinfo *female, FILE* fp) {

int i, j;

for (i=0; i < numpeople; i++) {
    fscanf(fp, "%s", male->names[i]);
    //printf("%s ", malenames[i]);
}

for (i=0; i < numpeople; i++) {
    fscanf(fp, "%s", female->names[i]);
    //printf("%s ", femalenames[i]);
}

for (i=0; i < numpeople; i++) {
    for (j=0; j < numpeople; j++) {
        fscanf(fp, "%d", &male->scores[i][j]);
        //printf("%d ", malescores[i]);
    }
}

for (i=0; i < numpeople; i++) {
    for(j=0; j < numpeople; j++) {
        fscanf(fp, "%d", &female->scores[i][j]);
        //printf("%d ", femalescores[i][j]);
    }
}
}

void permute(int permuteset[], int k, int numpeople, struct genderinfo *male, struct genderinfo *female, int *maxLindex) {

int i;

if (k == numpeople) {

    compare(permuteset, &male, &female, &maxLindex, numpeople);
}

else {

     // Loop through each possible starting letter for index k,
     // the first index for which we have a choice.
     for (i=k; i<numpeople; i++) {

         // Place the character stored in index j in location k.
         swap(permuteset, k, i);

         // Print out all of the permutations with that character
         // just chosen above fixed.
         permute(permuteset, 0, numpeople, &male, &female &maxLindex);

         // Put the original character that used to be there back
         // in its place.
         swap(permuteset, i, k);
     } //end i for
 } //end else

}

void swap(int permuteset[], int i, int j) {

int temp = permuteset[i];
permuteset[i] = permuteset[j];
permuteset[j] = temp;

}

//This function will take a permutation in and compare malescores[i] to
//femalescores[permuteset[i]]
//if malescores[i] > femalescores[permuteset[i]] scoresum += bla blah else if.... etc.

//copy malenames[i] and femalenames[permuteset[i]] into winning couples
//with if statements above

//malescores[i][permuteset[i]]
//femalescores[permuteset[i]][i]]
void compare(int permuteset[], struct genderinfo *male, struct genderinfo *female, int *maxLindex, int numpeople) {

int temp_maxLindex, i, j, minlike;

for(i=0; i<numpeople; i++){

    if (male->scores[i][permuteset[i]] > female->scores[permuteset[i]][i])
        minlike = female->scores[permuteset[i]][i];

    else
        minlike = male->scores[permuteset[i]][i];

    temp_maxLindex += minlike;

    if (temp_maxLindex > maxLindex) {
        maxLindex = temp_maxLindex;

        for(j=0; j<numpeople; j++){

            strcpy(male->winning[j], male->names[i]);
            strcpy(female->winning[j], female->names[permuteset[i]]);

        } //j for

    } //if

} //i for

} 
```

我收到了这些错误，其中一个与我传递给我的 inputdata 函数的内容有关，还有一堆关于冲突类型的其他错误？我现在一直在修改代码，但无处可去。在这一点上，我只是想让代码运行，这样我就可以调试算法等等，非常感谢任何帮助。

```
D:\School\Summer 2012\CS1\Assignments\2\main.c||In function 'main':|
D:\School\Summer 2012\CS1\Assignments\2\main.c|61|error: invalid operands to binary & (have 'struct genderinfo *' and 'int')|
D:\School\Summer 2012\CS1\Assignments\2\main.c|61|error: too few arguments to function 'permute'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|17|note: declared here|
D:\School\Summer 2012\CS1\Assignments\2\main.c|35|warning: unused variable 'difference' [-Wunused-variable]|
D:\School\Summer 2012\CS1\Assignments\2\main.c||In function 'permute':|
D:\School\Summer 2012\CS1\Assignments\2\main.c|139|warning: passing argument 2 of 'compare' from incompatible pointer type [enabled by default]|
D:\School\Summer 2012\CS1\Assignments\2\main.c|19|note: expected 'struct genderinfo *' but argument is of type 'struct genderinfo **'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|139|warning: passing argument 3 of 'compare' from incompatible pointer type [enabled by default]|
D:\School\Summer 2012\CS1\Assignments\2\main.c|19|note: expected 'struct genderinfo *' but argument is of type 'struct genderinfo **'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|139|warning: passing argument 4 of 'compare' from incompatible pointer type [enabled by default]|
D:\School\Summer 2012\CS1\Assignments\2\main.c|19|note: expected 'int *' but argument is of type 'int **'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|153|error: invalid operands to binary & (have 'struct genderinfo **' and 'int *')|
D:\School\Summer 2012\CS1\Assignments\2\main.c|153|warning: passing argument 4 of 'permute' from incompatible pointer type [enabled by default]|
D:\School\Summer 2012\CS1\Assignments\2\main.c|133|note: expected 'struct genderinfo *' but argument is of type 'struct genderinfo **'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|153|error: too few arguments to function 'permute'|
D:\School\Summer 2012\CS1\Assignments\2\main.c|133|note: declared here|
D:\School\Summer 2012\CS1\Assignments\2\main.c||In function 'compare':|
D:\School\Summer 2012\CS1\Assignments\2\main.c|194|warning: comparison between pointer and integer [enabled by default]|
D:\School\Summer 2012\CS1\Assignments\2\main.c|195|warning: assignment makes pointer from integer without a cast [enabled by default]|
||=== Build finished: 10 errors, 7 warnings ===| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:17:46.410

我只是在这里猜测，因为您在发布此内容时没有给出导致错误的代码，而是作为这些函数的参数列表

```
void permute(int permuteset[], int k, int numpeople, char** winningmales, char** winningfemales, char** malenames, char** femalenames, int** malescores,
         int** femalescores, int *maxLindex);

void compare(int permuteset[], char** winningmales, char** winningfemales, char** malenames, char** femalenames, int** malescores, int**femalescores,
         int *maxLindex, int numpeople); 
```

非常大，当您报告 an`int*`和之间的错误时，`int**`我想知道您是否在调用上述函数的地方不小心弄错了参数的顺序？？？

正如我所说，这只是一个猜测，但可能值得调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:50:17.077

```
--- permute.c.OLD   2012-06-14 22:48:06.760926525 +0200
+++ permute.c   2012-06-14 22:47:37.344810744 +0200
@@ -21,7 +21,7 @@

 ///write free functions for struct arrays

-int main () {
+int main (void) {

 FILE* fp = fopen("matching.txt", "r");

@@ -32,7 +32,7 @@
 int numdates, i, j, k;

 //other variables
-int numpeople, maxLindex = 0, difference;
+int numpeople, maxLindex = 0; // difference;

 fscanf(fp, "%d", &numdates);

@@ -58,7 +58,7 @@
         permuteset[k] = k;

     inputdata(numpeople, &male, &female, fp);
-    permute(permuteset, 0, numpeople, &male, &female &maxLindex);
+    permute(permuteset, 0, numpeople, &male, &female, &maxLindex);

     printf("Matching #%d: Maximum Score = %d\n\n", i, maxLindex);

@@ -136,7 +136,7 @@

 if (k == numpeople) {

-    compare(permuteset, &male, &female, &maxLindex, numpeople);
+    compare(permuteset, male, female, maxLindex, numpeople);
 }

 else {
@@ -150,7 +150,7 @@

          // Print out all of the permutations with that character
          // just chosen above fixed.
-         permute(permuteset, 0, numpeople, &male, &female &maxLindex);
+         permute(permuteset, 0, numpeople, male, female, maxLindex);

          // Put the original character that used to be there back
          // in its place.
@@ -191,8 +191,8 @@

     temp_maxLindex += minlike;

-    if (temp_maxLindex > maxLindex) {
-        maxLindex = temp_maxLindex;
+    if (temp_maxLindex > *maxLindex) {
+        *maxLindex = temp_maxLindex;

         for(j=0; j<numpeople; j++){ 
```

摘要：缺少 kommaas，太多 & 符号，缺少星号。

我没有检查语义错误，我认为它们仍然存在。（permute() 中的无限递归调用看起来很可疑）

我还建议从 malloc() 的返回值中删除强制转换并使用成语`p = malloc N * sizeof *p);`但这会进一步增加 diff 的大小。

# sql - 列名中应该使用下划线吗？

> ID：11020646
> 
> 赞同：24
> 
> 时间：2012-06-13T17:59:05.200
> 
> 标签：sql, sql-server-2005, database-design

从技术上讲，下划线字符 (_) 可用于列名。但是在列名中使用下划线是一种好习惯吗？它似乎使名称更具可读性，但我担心使用它们可能会出现技术问题。列名不会带有下划线前缀。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T16:55:42.807

在名称中使用下划线没有直接的技术问题。事实上，我经常这样做并且发现它很有帮助。Ruby 甚至在列名中自动生成下划线，SQL Server 自己的系统对象也使用下划线。

一般来说，在数据库中遵循一些命名约定是个好主意，如果其中包括下划线，没什么大不了的。

如果在引用名称时将方括号或引号括在名称中，则可以在名称中使用任何字符。不过，我尽量避免使用空格，因为它会使内容更难阅读。

在为 SQL Server 制定命名约定时，您需要避免一些事情。他们是：

1.  `sp_`除非您打算在系统范围内使用它们 ，否则不要为存储过程添加前缀。
2.  不要在列前加上它们的数据类型（因为你可能想改变它）。
3.  避免将东西放在 sys 模式中（你可以通过黑客攻击，但你不应该）。
4.  假装你的代码区分大小写，即使它不是。您永远不知道什么时候您最终会使用 tempdb 设置为区分大小写的服务器。
5.  创建临时表时，始终为字符串类型指定排序规则。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T18:00:30.647

这样做没有问题，只要让列名更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-06T09:00:37.440

如果您查看 PostgreSQL 文档，您可能会发现几乎所有对象都以[Snake Case](https://en.wikipedia.org/wiki/Snake_case)命名。

此外，MySQL、MS SQL Server、Oracle DB 和前面提到的 PostgreSQL 中的很多系统对象都使用了 Snake Case。

从我个人的经验来看，使用下划线来命名对象并不是什么大问题。

但有一个警告。

下划线符号是 SQL LIKE 运算符中任何符号的占位符：

```
SELECT * FROM FileList WHERE Extention LIKE 'ex_' 
```

当有很多动态 SQL 代码时，这是一个潜在的问题，尤其是当我们谈论自动生成的对象名称时。而且这样的错误很难找到。

**就个人而言，我宁愿避免在命名时使用下划线。**但同时，如果已经使用了这种命名方式，则无需重写所有现有代码。

有备则无患。

# php - WordPress：简单的 php IF 语句未处理

> ID：11020652
> 
> 赞同：2
> 
> 时间：2012-06-13T17:59:51.830
> 
> 标签：php, wordpress

有人可以解释为什么 else 语句在 WordPress 中对 sidebar.php 不起作用吗？

```
<?php if(is_front_page() ) : ?>

 **content shows on main page sidebar**

<?php elseif(!is_front_page() ) : ?>
<?php // else: ?> // tried **else:** also

 **some content**
 **nothing is shown on any other page...**

<?php endif;?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:04:09.307

如果在循环内或循环运行后（如在侧边栏中）使用`is_front_page()`条件，它将始终返回 false。您可以调用 wp_reset_query(); 在您的循环重置页面 query_vars 之后。

有关更多信息，请参阅[WPSE 上的此答案。](https://wordpress.stackexchange.com/a/53444/251)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T18:04:03.017

我不确定 is_front_page() 是否存在，但只需在每个条件结果周围使用 {} ：

```
<?php if(is_front_page() ) { ?>

 **content shows on main page sidebar**

<?php } else { ?>
 // tried **else:** also

 **some content**
 **nothing is shown on any other page...**

<?php } ?> 
```

# iphone - Facebook UID 的 10 位而不是 9 位的 UID

> ID：11020656
> 
> 赞同：0
> 
> 时间：2012-06-13T18:00:07.247
> 
> 标签：iphone, ios, facebook-graph-api, facebook-fql, uid

在我的应用程序中，我需要知道用户的 Facebook uid。我通过使用 Facebook API for IOS 使用以下查询来获得。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"SELECT uid, name, email, pic, sex, timezone, religion, birthday_date, hometown_location, interests, about_me, locale, sports, relationship_status, languages, work, games, affiliations, current_location FROM user WHERE uid=me()", @"query",
                               nil]; 
```

……

```
fb_udid = [[result objectForKey:@"uid"] retain];
fbid = [fb_udid intValue]; // This int value is always 9-digit 
```

所有用户总是获得**九位数的**标识符。（总是九位数！）（www.facebook.com/123456789）

我的问题是这样的：有一个用户返回十位数的 uid，这与正确的 uid 无关。

真正的用户 id 是 9 位数字，而是说它是 10 位数字。

有谁知道为什么我不能正确解析标识符？难道是用户删除了应用程序的权限？有谁知道所有标识符是否都是九位数的facebook？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:06:32.100

> 有谁知道所有标识符是否都是九位数的facebook？

不，他们当然*不是*。

而且您不应该将它们视为应用程序中的数字，因为 fe 整数溢出可能会破坏它们。

# python - 初始化空的 Python 数据结构

> ID：11020657
> 
> 赞同：12
> 
> 时间：2012-06-13T18:00:08.560
> 
> 标签：python, list, dictionary

可用于创建空 Python 列表/字典的两种语法形式之间是否有任何明显的区别，即

```
l = list()
l = [] 
```

和：

```
d = dict()
d = {} 
```

我想知道使用一个是否比另一个更可取。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T18:03:00.217

函数形式在运行时调用构造函数以返回一个新实例，而文字形式使编译器在编译时“创建”它（实际上，发出产生新对象的字节码）。如果（出于某种原因）类已在本地反弹到不同类型，则前者可能很有用。

```
>>> def f():
...   []
...   list()
...   {}
...   dict()
... 
>>> dis.dis(f)
  2           0 BUILD_LIST               0
              3 POP_TOP             

  3           4 LOAD_GLOBAL              0 (list)
              7 CALL_FUNCTION            0
             10 POP_TOP             

  4          11 BUILD_MAP                0
             14 POP_TOP             

  5          15 LOAD_GLOBAL              1 (dict)
             18 CALL_FUNCTION            0
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:03:25.027

主要区别在于一种形式包含名称查找，而另一种则不包含。说明这种差异的示例：

```
def list():
    return {}

print []
print list() 
```

印刷

```
[]
{} 
```

当然，你绝对不应该做这种废话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T18:02:02.010

我的直觉告诉我，只要你保持一致，两者都是可以接受的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:01:37.663

我不知道有什么区别，主要是风格偏好。

# javascript - IE7/IE8 中的 Javascript JSON 日期解析返回 NaN

> ID：11020658
> 
> 赞同：41
> 
> 时间：2012-06-13T18:00:15.260
> 
> 标签：javascript, date, internet-explorer-8, internet-explorer-7, utc

我正在从 JSON 事件源解析日期 - 但日期在 IE7/8 中显示“NaN”：

```
// Variable from JSON feed (using JQuery's $.getJSON)
var start_time = '2012-06-24T17:00:00-07:00';

// How I'm currently extracting the Month & Day
var d = new Date(start_time);
var month = d.getMonth();
var day = d.getDate();

document.write(month+'/'+day);// "6/24" in most browsers, "Nan/Nan" in IE7/8 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-13T18:43:18.583

在较旧的浏览器中，您可以编写一个为您解析字符串的函数。

这个创建了一个 Date.fromISO 方法——如果浏览器可以从 ISO 字符串中本地获取正确的日期，则使用本地方法。

一些浏览器部分正确，但返回了错误的时区，因此仅检查 NaN 可能行不通。

填充物：

```
(function(){
    var D= new Date('2011-06-02T09:34:29+02:00');
    if(!D || +D!== 1307000069000){
        Date.fromISO= function(s){
            var day, tz,
            rx=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,
            p= rx.exec(s) || [];
            if(p[1]){
                day= p[1].split(/\D/);
                for(var i= 0, L= day.length; i<L; i++){
                    day[i]= parseInt(day[i], 10) || 0;
                };
                day[1]-= 1;
                day= new Date(Date.UTC.apply(Date, day));
                if(!day.getDate()) return NaN;
                if(p[5]){
                    tz= (parseInt(p[5], 10)*60);
                    if(p[6]) tz+= parseInt(p[6], 10);
                    if(p[4]== '+') tz*= -1;
                    if(tz) day.setUTCMinutes(day.getUTCMinutes()+ tz);
                }
                return day;
            }
            return NaN;
        }
    }
    else{
        Date.fromISO= function(s){
            return new Date(s);
        }
    }
})() 
```

结果：

```
var start_time = '2012-06-24T17:00:00-07:00';
var d =  Date.fromISO(start_time);
var month = d.getMonth();
var day = d.getDate();

alert(++month+' '+day); // returns months from 1-12 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-24T09:09:41.503

对于 ie7/8 我刚刚做了：

```
var ds = yourdatestring;
ds = ds.replace(/-/g, '/');
ds = ds.replace('T', ' ');
ds = ds.replace(/(\+[0-9]{2})(\:)([0-9]{2}$)/, ' UTC\$1\$3');
date = new Date(ds); 
```

这会将所有出现的“-”替换为“/”，将时间标记“T”替换为空格，并将时区信息替换为 IE 友好的字符串，使 IE7/8 能够正确解析字符串中的日期。为我解决了所有问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-19T02:34:22.100

请参阅 RobG 在[Result of toJSON() on a date is different between IE8 and IE9+](https://stackoverflow.com/questions/17592717/result-of-tojson-on-a-date-is-different-between-ie8-and-ie9)的帖子。

下面的函数在 IE 8 及更低版本中对我有用。

```
// parse ISO format date like 2013-05-06T22:00:00.000Z
function convertDateFromISO(s) {
  s = s.split(/\D/);
  return new Date(Date.UTC(s[0], --s[1]||'', s[2]||'', s[3]||'', s[4]||'', s[5]||'', s[6]||''))
} 
```

你可以像下面这样测试：

```
var currentTime = new Date(convertDateFromISO('2013-05-06T22:00:00.000Z')).getTime();
alert(currentTime); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-18T19:28:37.417

我建议[http://momentjs.com/](http://momentjs.com/)解决跨浏览器日期问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-28T17:35:58.850

@gib 感谢您对 Moment.js 的建议。这个小型库确实有助于处理日期和 JavaScript。

Moment.js 解决了我也遇到的原始问题中描述的问题。IE8 在解析为新的 Date() 对象时将 JSON ISO 日期显示为 NaN。

快速解决方案（在您的页面中包含 moment.js，或将代码复制到您的 js 函数中包含）

*如果您只需要在页面上显示从 JSON ISO 日期加载的日期，请执行以下操作：*

```
order_date = moment(data.OrderDate); //create a "moment" variable, from the "data" object in your JSON function in Protoype or jQuery, etc.

$('#divOrderDate).html(order_date.calendar()); //use Moment's relative date function to display "today", "yesterday", etc. 
```

或者

```
order_date = moment(data.OrderDate); //create a "moment" variable, from the "data" object in your JSON function in Protoype or jQuery, etc.

$('#divOrderDate).html(order_date.format('m/d/YYYY')); //use Moment's format function to display "2/6/2015" or "10/19/2014", etc. 
```

*如果您必须有一个 Date() 对象（例如用于 jQuery 组件），请执行以下操作以成功填充 JSON 提供的 ISO 日期。（这假设您已经在处理 JSON 数据的函数中。）*

```
var ship_date = new Date(moment(data.ShipDate).format('m/d/YYYY'));  //This will successfully parse the ISO date into JavaScript's Date() object working perfectly in FF, Chrome, and IE8.

//initialize your Calendar component with the "ship_date" variable, and you won't see NaN again. 
```

# python - 如何在我的 Django 模板上下文中获取“调试”变量？

> ID：11020663
> 
> 赞同：16
> 
> 时间：2012-06-13T18:00:31.480
> 
> 标签：python, django, django-templates

根据这个SO帖子：

[如何检查 django 模板中的 TEMPLATE_DEBUG 标志？](https://stackoverflow.com/questions/1271631/how-to-check-the-template-debug-flag-in-a-django-template)

如果：

*   A）我的 settings.py 文件有：

`TEMPLATE_CONTEXT_PROCESSORS = ['django.core.context_processors.debug',...`

*   和 B）我使用 RequestContext（而不是 Context）

我的模板上下文*应该*有一个“调试”变量。但是，我不这样做：当我`{{debug}}`在模板中执行时，它呈现为空（“”）。

在模板上下文中获得“调试”变量是否还有其他我需要的东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T18:10:19.150

您还需要确保请求的 IP 地址`INTERNAL_IPS`在您的设置中（您可能没有设置）：[https ://docs.djangoproject.com/en/2.1/ref/templates/api/#django-template -上下文处理器调试](https://docs.djangoproject.com/en/2.1/ref/templates/api/#django-template-context-processors-debug)

# drupal - Drupal 7：将配置文件字段合并到表单中

> ID：11020664
> 
> 赞同：1
> 
> 时间：2012-06-13T18:00:41.313
> 
> 标签：drupal, drupal-7, drupal-fapi, drupal-field-api

我正在开发一个 Drupal 模块，它将创建一个新的用户帐户作为其功能的一部分。

但是，我希望能够包含一些字段，这些字段将在创建用户时保存到新用户的配置文件中。这对于文本字段来说很容易，但我不想复制已经为更复杂的字段构建的逻辑。

有没有一种方法可以使用 Fields API 将配置文件字段合并到我的表单中？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:02:38.227

您可以为此使用[`field_attach_form()`](http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_form/7)和函数：[`field_attach_submit()`](http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_submit/7)

```
function MYMODULE_form($form, &$form_state, $account) {
  $form['#account'] = $account;
  field_attach_form('user', $account, $form, $form_state);
}

function MYMODULE_form_submit($form, &$form_state) {
  field_attach_submit('user', $form['#account'], $form, $form_state);
} 
```

# session-cookies - 为什么 jsessionid cookie 允许用户访问成员内容，即使凭据错误？

> ID：11020666
> 
> 赞同：0
> 
> 时间：2012-06-13T18:00:52.220
> 
> 标签：session-cookies, jsessionid

所以，我认为是因为 JSESSIONID cookie 导致了问题，但不太确定，就这样吧。

基本上，用户在登录时需要输入一个特殊的令牌。但不知何故，即使不输入该令牌，用户也能够访问私人/会员页面。

所以用户输入凭据减去令牌，弹出错误，用户忽略它。当然，由于存在该错误，因此不会将用户定向到成员页面。但是用户可以手动输入特定的会员页面并访问它。

1.  用户访问 mysite.com/home
2.  用户输入用户名/密码，没有令牌 --> 错误弹出
3.  用户忽略弹出的错误，手动输入 mysite.com/member/home 并访问它

我相信它是 jsessionid，一旦我删除了那个 cookie，对成员页面的访问也消失了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:00:03.313

实际上，这不是`jsessionid`导致问题的原因，而是一些奇怪的 servlet 在做奇怪的事情......

# php - 如何获取一个月内的所有日期

> ID：11020667
> 
> 赞同：3
> 
> 时间：2012-06-13T18:00:51.987
> 
> 标签：php, mysql

```
 CREATE TABLE `tbl_atn` (
`atn_id` int(15) NOT NULL AUTO_INCREMENT,
`eng_id` int(15) DEFAULT NULL,
`visit` varchar(50) DEFAULT NULL,
`travel` varchar(50) DEFAULT NULL,
`start_time` varchar(50) DEFAULT NULL,
`mile` varchar(50) DEFAULT NULL,
`end_time` varchar(50) DEFAULT NULL,
`comments` varchar(100) DEFAULT NULL,
`actual` varchar(50) DEFAULT NULL,
`total_job` varchar(50) DEFAULT NULL,
`regular` varchar(50) DEFAULT NULL,
`over` varchar(50) DEFAULT NULL,
`total_hrs` varchar(50) DEFAULT NULL,
`pay` varchar(50) DEFAULT NULL,
`timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`atn_date` date DEFAULT NULL,
 PRIMARY KEY (`atn_id`)
 ) 
```

![桌子](../Images/96ae38282a76a340eea3d083dc3b1593.png)

我想要做的是创建每个月的月度报告。显示所有特定日期并记录上表，如果没有记录则为空

上面是我的桌子。我正在尝试创建此应用程序，但由于此工作表，我被卡住了。首先，这只能使用 MySQL 查询来实现吗？如果没有，我要做的是首先生成所有日期，然后对于每个日期，我必须从数据库中获取一条记录，然后运行另一个查询来总结它们。我无法为此创建查询。

有什么帮助吗？

```
 $now = date('Y-m-d');
   $month = date("m",strtotime($now));
   $year = date("Y",strtotime($now));

   $first = date('Y-m-d', mktime(0, 0, 0, $month, 1, $year));
   $last = date('Y-m-t', mktime(0, 0, 0, $month, 1, $year));

   $thisTime = strtotime($first);
   $endTime = strtotime($last);
   while($thisTime <= $endTime)
   {
   $thisDate = date('Y-m-d', $thisTime);
   echo $thisDate."<br>";

   $thisTime = strtotime('+1 day', $thisTime); // increment for loop
   } 
```

使这段代码现在动态现在我可以获取给定月份和年份的任何月份的所有日期现在我要做的是创建一个函数，该函数将遍历所有日期并将查询发送到数据库以查找数据，如果找到它将设置其他明智的价值为零是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:03:01.830

这将获得`atn_date`本月的所有记录：

```
SELECT * FROM `tbl_atn` WHERE `atn_date` BETWEEN "2012-06-01" AND "2012-06-30" 
```

这个 PHP 将在本月的每一天循环：

```
$thisTime = strtotime("2012-06-01");
$endTime = strtotime("2012-06-31");
while($thisTime <= $endTime)
{
    $thisDate = date('Y-m-d', $thisTime);
    echo $thisDate;

    $thisTime = strtotime('+1 day', $thisTime); // increment for loop
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:24:12.657

当您的表可能没有或只有您感兴趣的范围内的一些记录时，显示连续序列的常用方法是使用整数表。整数表按顺序包含从 0 到 9 的整数。当您需要一组序列号时，您可以自行加入它以获得您想要的。所以对于从 5 到 25 的范围

```
SELECT i.n + j.n*10 as num
FROM myints i CROSS JOIN myints j
WHERE (i.n + j.n*10) BETWEEN 5 AND 25
ORDER BY (i.n + j.n*10); 
```

在您的情况下，您需要连续日期。您知道任何特定月份最多可以有 31 天，因此您对一组从 0 到 31 的整数进行子查询，并将它们表示为从月初开始到月底结束的日期。像这样：

```
SELECT DATE_ADD('2012-06-01', INTERVAL n.num DAY) AS mydate, o.*
FROM
    (SELECT i.n + j.n*10 as num
    FROM myints i CROSS JOIN myints j
    WHERE (i.n + j.n*10) BETWEEN 0 AND 31
    ORDER BY (i.n + j.n*10)) AS n
LEFT JOIN other o ON ( DATE_ADD('2012-06-01', INTERVAL n.num DAY) = o.atn_date)
WHERE mydate BETWEEN '2012-06-01 '2012-06-30'; 
```

或者

```
SELECT datelist.mydate, o.* FROM
    (SELECT DATE_ADD( '2012-01-06', INTERVAL i.n + j.n*10 DAY) as mydate
      FROM myints i CROSS JOIN myints j
      WHERE mydate BETWEEN '2012-01-06' AND '2012-01-30'
      ORDER BY (i.n + j.n*10)) datelist
LEFT JOIN othertable o ON (datelist.mydate=o.atn_date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:30:36.770

如果您想获取一个月中的特定日期然后查询它们，您可以使用内置的 PHP 函数 cal_days_in_month ( [http://php.net/manual/en/function.cal-days-in-month.php](http://php.net/manual/en/function.cal-days-in-month.php) )。您可以编写一个真正简单的函数来处理此问题，例如：

```
function getDateTime($month, $year){
    $month = intval($month);
    $year = intval($year);
    $day = cal_days_in_month(CAL_GREGORIAN, $month, $year);

    //Now build your query here since you will have the days of the month
    $query = SELECT * FROM `tbl_atn` WHERE `atn_date` BETWEEN $year."-".$month."-1" AND $year."-".$month."-".$day;
} 
```

请注意，日期片段是您在数据库中配置的。为简单起见，我只是使用了 Scott Saunders 的上述查询示例。

如果您没有为您的 PHP 堆栈构建的日历插件，您还可以使用 date() - [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)执行自定义函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T05:55:54.457

可以使用 mysql 检索特定月份和年份的日期列表

你可以试试这个：

```
 SELECT 
                ldays.`day` as 'Date',
                atn.`regular` as RegularHours,
                atn.`over` as OT1,
                atn.`over` as OT2,
                atn.`total_hrs` as TotalHrsPerDay,
                atn.`comments` as Comments
                FROM( 
                SELECT DATE_FORMAT(ADDDATE(LAST_DAY(SUBDATE(DATE_FORMAT('{$DateParamHere}','%Y-%m-%d'), INTERVAL 1 MONTH)), 1) + INTERVAL a + b DAY,'%Y-%m-%d') as 'day'
                FROM
                (SELECT 0 a UNION SELECT 1 a UNION SELECT 2 UNION SELECT 3
                    UNION SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION SELECT 7
                    UNION SELECT 8 UNION SELECT 9 ) d,
                (SELECT 0 b UNION SELECT 10 UNION SELECT 20 
                    UNION SELECT 30 UNION SELECT 40) m
                WHERE ADDDATE(LAST_DAY(SUBDATE(DATE_FORMAT('{$DateParamHere}','%Y-%m-%d'), INTERVAL 1 MONTH)), 1) + INTERVAL a + b DAY  <=  LAST_DAY('{$DateParamHere}')
                ORDER BY a + b
                ) ldays
           LEFT JOIN `tbl_atn` atn ON (atn.`eng_id`='{$EngIDParamHere}' AND DATE(atn.`atn_date`) = ldays.`day`) 
```

$DateParamHere = 您可以在此处设置特定的年、月和当前日期，并在 mysql 中以 '%Y-%m-%d' 的格式将其连接起来，但无论如何您都可以更改其格式

$EngIDParamHere = 将特定工程师的 id 放在这里

之后你就可以走了.. :)

# doctrine-orm - Doctrine2 实体中自动生成的唯一字段

> ID：11020669
> 
> 赞同：0
> 
> 时间：2012-06-13T18:01:08.447
> 
> 标签：doctrine-orm, uniqueidentifier

我有一个包含两个字段名称和 URL 的 Doctrine2 实体。我想根据名称字段自动生成 URL 字段。

例如名称“John Doe”将生成 URL“john-doe”

我已经在名称设置器中实现了 URL 字段的生成：

```
public function setName($name) {
  $this->name = $name;
  $this->url = UrlGenerator::generate($name);      
} 
```

我希望 URL 字段是唯一的，但不是名称字段。问题是当两个名称转换为相同的 URL 时该怎么办。

例如名称 "John Doe" => URL "john-doe", "john doe" => URL "john-doe"

如果 URL 已经存在于 DB 中，我想在 URL 字段的末尾添加数字（例如实体 DB 生成的 id），但我不知道如何在实体中实现这一点。起初，我不能在实体类中使用实体管理器来检查碰撞。第二个问题是，在实体被持久化到数据库之前我不知道下一个生成的 id，如果它的 URL 与现有项目冲突，它就不能持久化。

感谢帮助。

# c - 在字符串中切换数字

> ID：11020670
> 
> 赞同：-3
> 
> 时间：2012-06-13T18:01:08.187
> 
> 标签：c

我有一个字符串，里面有：

`2@0.88315@1@1.5005@true@0.112`它继续...

我需要将每个 2 或更大的数字切换为 1，所以我写了这个：

```
for (i = 0 ; i < strlen(data) ; i++)
{
    if (data[i] >= 50 && data[i] <= 57) // If it's a number
    {
        data[i] = '1'; // switch it to one
        while (data[i] >= 48 && data[i] <= 57)
        {
           i++;
        }
     }
 } 
```

问题是，它也将 0.051511 之类的数字变成 1.111111 ...因为它不会将双倍视为一个数字，而是将每个数字分开...我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:06:49.107

为了澄清这个问题，因为它不清楚，您需要以下输入：

```
"2@0.88315@1@1.5005@true@0.112" 
```

修改为如下：

```
"1@0.88315@1@1@true@0.112" 
```

您的问题是您需要将每个数字解析为浮点值以进行任何类型的比较。要么这样，要么您需要通过检查“。”来手动解析它。特点。由于 C 标准库提供了可以帮助您的函数，因此手动执行此操作是僵化的、容易出错且不必要的。

由于这是家庭作业，因此我将为您提供一些有关如何解决此问题而不是实际解决方案的提示。**您应该做的是尝试使用这些步骤编写解决方案，如果遇到困难，请使用您编写的代码编辑原始问题、失败的地方以及您认为失败的原因。**

您的第一步是将输入标记为以下内容：

```
"2"
"0.88315"
"1"
"1.5005"
"true"
"0.112" 
```

这可以通过遍历字符串并拆分它或使用指针来完成，然后出现“@”字符。拆分字符串可以使用`strtok`. 但是，`strtok`将通过修改字符串来拆分字符串，这在我们的情况下不一定需要。更简单的方法是简单地遍历字符串并在每次到达“@”字符后停止。然后输入将被标记为以下内容：

```
"2@0.88315@1@1.5005@true@0.112"
"0.88315@1@1.5005@true@0.112"
"1@1.5005@true@0.112"
"1.5005@true@0.112"
"true@0.112"
"0.112" 
```

其中一些子字符串不以表示浮点数的字符串开头。您将需要确定他们中的哪一个。为此，您可以尝试将每个字符串的前面解析为浮点数。这可以通过`sscanf`. 解析浮点数后，您将能够进行所需的比较。

您正在尝试将字符串修改为不同的长度，因此在将浮点值替换为“1”时，您需要检查原始值的长度。如果它长于 1 个字符，则必须将后续字符向前移动。例如：

```
"3.423@1" 
```

如果您解析第一个标记并发现它是`> 2`，则将第一个字符替换为“1”。这导致：

```
"1.423@1" 
```

然后，您仍然需要通过将字符串的其余部分向下移动来删除该标记的其余部分以获得：

```
"1@1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:03:41.583

看起来您正在比较 if 语句中的 a`char`和 an `int`。

您应该弄清楚为什么这很重要并对其进行补偿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:19:52.923

您一次比较一个字符串中的字符。如果您需要将“@”符号之间的所有内容视为一个数字，这将不起作用。尝试将这些数字放入一个数组中，将它们转换为双精度数，然后与 2 进行比较。

# excel - Excel 宏条件格式间接单元格

> ID：11020671
> 
> 赞同：0
> 
> 时间：2012-06-13T18:01:10.427
> 
> 标签：excel, conditional-formatting, vba

我对 Excel 有点缺乏经验，但我会尽力解释我正在尝试做的事情：

我在 Excel 2010 中工作，我试图让一个宏根据列中的数字进行加法。

例如，我想让宏根据 B 列中的名称和 C 列中的数字添加一个值。对于B列中的名称“02 Gloves-DISC”，我想根据C列中的值添加以下内容：如果它<5，+8.83。如果它 <10，+7。如果它 <20，+5。如果它 <30，+3。如果它<40，+1。如果它 <56，+.50。

我有类似的东西，但我无法让它对每一行进行搜索和计算：

```
Selection.Replace What:="02 Gloves-DISC", Replacement:="=IF(C2<5, C2+8.83, IF(C2<10, C2+7, IF(C2<20, C2+5, IF(C2<30, C2+3, IF(C2<40, C2+1, C2+.5)))))", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False 
```

我希望这些信息有所帮助。预先感谢您的任何帮助。我已经阅读了 R1C1 参考，但我似乎无法让它工作。

这是我正在使用的数据的示例：

```
SKU         ClassName           TakeItPrice
HJC10569002 02 Gloves-DISC          38.93
HJC1222066  02 Gloves-DISC          49.491
HJC1224011  02 Gloves-DISC          40.491
HJC1228062  02 Gloves-DISC          36.991
HJC152100   01 First Class-DISC 13.191
HJC152200   01 First Class-DISC 26.99
HJC152202   01 First Class-DISC 31.491
HJC180000   01 First Class-DISC 11.891
HJC190005   01 First Class-DISC 11.891
HJC350005   01 First Class-DISC 11.891 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:15:49.013

两个宏给你..第二个是我用来在工作表中查找最后一行数据的通用宏。

```
Public Sub addDisc()
   Dim Class As Long
   Dim Price
   Dim myRow

   For myRow = 2 To xlLastRow(ActiveSheet.Name)   'Optional to find last row
     Class = CLng(Left(Cells(myRow, 2), 2))
     If Class < 5 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 8.83
     ElseIf Class < 10 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 7
     ElseIf Class < 20 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 5
     ElseIf Class < 30 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 3
     ElseIf Class < 40 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 1
     ElseIf Class < 56 Then
        Cells(myRow, 3) = Cells(myRow, 3) + 0.5
     End If
   Next myRow
End Sub

Public Function xlLastRow(Optional WorksheetName As String) As Long
   '    find the last populated row in a worksheet
   If WorksheetName = vbNullString Then WorksheetName = ActiveSheet.Name
      With Worksheets(WorksheetName)
        On Error Resume Next
        xlLastRow = .Cells.Find("*", .Cells(1), xlFormulas, _
        xlWhole, xlByRows, xlPrevious).Row
        If Err <> 0 Then xlLastRow = 0
      End With
End Function 
```

# mysql - 具有大量插入和删除的表的 MySQL 分区

> ID：11020688
> 
> 赞同：1
> 
> 时间：2012-06-13T18:02:07.183
> 
> 标签：mysql, innodb, database-partitioning

我有一张表，我们每天在其中插入大约 2000 万个条目（没有任何限制的盲插入）。我们有两个外键，其中一个是包含大约 1000 万个条目的表的引用 id。

我打算删除该表中超过一个月的所有数据，因为不再需要这些数据。但问题是随着大量插入的发生，如果我开始删除，表将被锁定并且插入将被阻止。

我想知道我们是否可以在基于月份的表上使用分区。这样，我希望当我尝试删除所有超过 2 个月的数据时，这些数据应该在不同的分区中，并且插入应该发生在不同的分区中，并且删除锁不会阻塞读锁。

请告诉我这是否可能。我对使用数据库相当陌生，所以如果我的想法有问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:07:31.243

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)

> 对于**InnoDB**和 BDB 表，MySQL 仅在您使用 LOCK TABLES 显式锁定表时才使用表锁定。对于这些存储引擎，完全避免使用 LOCK TABLES，因为 InnoDB 使用自动行级锁定，而 BDB 使用页级锁定来确保事务隔离。

我不确定你是否有问题。您是否对此进行了测试并看到了锁定问题，或者您现在只是在理论化它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:16:46.387

MySQL 从 5.1 版开始具有分区功能。

您可以运行此查询来验证您的 MySQL 版本是否支持分区：

```
SHOW VARIABLES LIKE 'have_partitioning'; 
```

然后您可以阅读手册以了解如何使用它：

[http://dev.mysql.com/doc/refman/5.5/en/partitioning.html](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)

# iphone - 比较“语音验证”的音频文件

> ID：11020689
> 
> 赞同：5
> 
> 时间：2012-06-13T18:02:28.230
> 
> 标签：iphone, ios, authentication, login, voice

我正在开发一个 Iphone 应用程序。此应用程序用于存储用户的个人数据。出于安全目的，我们希望在我们的应用程序中提供一个新功能，用户可以在登录到应用程序后访问数据。问题是我们需要提供**“语音认证”**。意味着，用户可以通过记录保存一个像“hi”这样的词作为他的密码。如果他需要登录我们的应用程序，他应该说“嗨”这个词。并且比较这两种声音，如果它们匹配，则用户将通过身份验证并允许登录。这样的应用是可能的吗？是否可以比较 Iphone 中的声音？

我研究了这些链接，但没有得到一个想法。请帮我。 [http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/musicaudio/reference/CoreAudioDataTypesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/musicaudio/reference/CoreAudioDataTypesRef/Reference/reference.html)

# javascript - 裁剪图像 Processing.js

> ID：11020694
> 
> 赞同：2
> 
> 时间：2012-06-13T18:02:45.373
> 
> 标签：javascript, canvas, processing.js

Processing.js 允许使用以下方法绘制图像：

```
image(x,y,width,height) 
```

但是添加宽度和高度参数只会将图像缩放到该大小。我怎样才能裁剪图像，只`width`在右侧绘制第一个`height`像素，在底部绘制第一个像素？

例如，只绘制 X'ed 部分：

```
---------------------------.  
|XXXXXXXXXXXXX             | 
|XXXXXXXXXXXXX             | 
|XXXXXXXXXXXXX             | 
|XXXXXXXXXXXXX             | 
|                          | 
|                          | 
|                          |                            
---------------------------. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:25:55.923

[您可以使用复制功能](http://processing.org/reference/copy_.html)有效地裁剪图像

这是一个例子：

```
PImage oImg;
void setup() {
   oImg = loadImage("postgres.jpeg");
   size(oImg.width, oImg.height); 
}

void draw() {
   background(0);
   int iStart = new Float(oImg.width/2).intValue();
   int iWidth = oImg.width-iStart;
   copy(oImg, iStart,0,iWidth,oImg.height,0,0,iWidth,oImg.height);
} 
```

这会加载图像，然后将其垂直裁剪为一半大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:28:06.143

听起来像一个图像精灵：

```
#yourImage
{
    width:46px;
    height:44px;
    background:url(yourimage.gif) 0 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:37:11.757

我不知道在处理中执行此操作的方法，但上下文本身`drawImage`支持此[https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#drawImage](https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#drawImage)

```
context.drawImage(image, x, y, realWidth, realHeight, startX, startY, drawnWidth, drawnHeight) 
```

# jasper-reports - JasperServer - 如何阻止报告中的水平线在屏幕上延伸

> ID：11020695
> 
> 赞同：2
> 
> 时间：2012-06-13T18:02:52.033
> 
> 标签：jasper-reports, ireport, jasperserver

![水平线在屏幕上拉伸](../Images/3596f0fa29bab9c14974306e4addd96d.png)
*我今天在iReport Professional 4.5.1* 中创建了这个报告并将其部署到*JasperReports Server*。总页面宽度为 792 像素。在我的报告中，我有一些 752 像素宽的水平线。当我在*JR Server*中运行报告时，水平线一直延伸到显示器的右侧。当我安排报告并要求*JR 服务器*将其保存为 HTML 文件时会发生这种情况，但是当我安排报告并将输出另存为 PDF 时，行的大小是正确的。

如何防止水平线拉伸？每条线的拉伸类型设置为“无拉伸”。我的其他报告元素正在设法保持其位置。

谢谢，丽莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:25:40.037

尝试使用单元格边框来绘制这些线条，而不是静态的“水平线”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:24:57.210

谢谢，山姆！您的回答帮助我解决了这个问题。我的报告是一个 6 列的报告，我有标签，我只在第一列打印。单元格边界不起作用，因为会有很多间隙。然而，我意识到我的水平线不需要是 752px 宽；它只需要比第一列的宽度稍宽，报告会为我将其复制到后续列中。我将水平线设置为 127px 宽，现在我有一条完整的水平线贯穿我的所有列。当我在 iReport 中创建报告时，我不敢相信我没有想到这一点。

# google-app-engine - 为处理程序指定 servlet 时为 GAE/Java 解析 app.yaml 时出错

> ID：11020696
> 
> 赞同：0
> 
> 时间：2012-06-13T18:02:53.047
> 
> 标签：google-app-engine, yaml

我正在尝试切换到使用 app.yaml 而不是 web.xml 和 app-engine-web.xml。我试图忠实地遵循文档，但我收到错误`appconfig.cmd update <my-war-directory>`消息

```
Reading application configuration data...
Bad configuration: Line 18, column 13: Error setting property 'handlers' on class: com.google.apphosting.utils.config.AppYaml
  Caused by: Line 18, column 13: Error setting property 'handlers' on class: com.google.apphosting.utils.config.AppYaml
Please see the logs [C:\Users\<blah blah>\appcfg3710135744474388957.log] for further information. 
```

在指示的日志文件中，我看到带有以下行的堆栈转储：

```
com.google.appengine.repackaged.net.sourceforge.yamlbeans.tokenizer.Tokenizer$TokenizerException: Line 18, column 13: Found a mapping value where it is not allowed. 
```

这是我的文件（手动添加了行号）：

```
1  application: my-app
2  version: 1
3  runtime: java
4  threadsafe: true
5
6  public_root: /static
7
8  static_files:
9   - include: /**
10
11 welcome_files:
12  - index.html
13
14 system_properties:
15   java.util.logging.config.file: WEB-INF/logging.properties
16  
17 handlers:
18   - url: /user/*
19      servlet: org.restlet.ext.servlet.ServerServlet
20      name: user
21      init_params:
22        org.restlet.application: com.my-app.server.resource.user.UserApplication
23        org.restlet.clients: HTTP HTTPS 
```

在网络上尝试了一些 YAML 验证器之后，我实际上认为它在抱怨第 19 行，其中第 13 列指向“servlet”之后的“：”字符。[但是这种用法看起来与https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Required_Elements](https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Required_Elements)上的文档完全一致

我确定我在做一些愚蠢的事情，但我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:59:32.433

感谢您的精彩投入，AndyD！文档已更新以修复有问题的示例代码。

对我来说，使用一些 yaml 验证器来检查 yaml 文件也很方便。例如： [http ://data-lint.herokuapp.com/](http://data-lint.herokuapp.com/)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:45:13.523

正如我上面提到的，罪魁祸首是第 19-21 行的缩进——它们需要在第 18 行的“url”中的“u”下对齐。

# c# - VB.NET 毫秒计时器 - "hh\:mm\:ss\,fff"

> ID：11020706
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:03:38.147
> 
> 标签：c#, subtitle

我需要计数毫秒的计时器 - 说明：

格式：“hh\:mm\:ss\,fff”

```
If MilliTimer.ForMilliseconds = "00:00:01,447" Then
Label1.text = "Test"
End If 
```

（代码仅供说明）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:07:53.530

很难说出您要的是什么，但是如果您想测试自启动“计时器”以来已经发生了多少毫秒，您需要 StopWatch 类。您可以像这样启动秒表：

```
StopWatch sw = new stopWatch();
sw.Start(); 
```

然后你可以像这样测试已经发生了多少毫秒：

```
if (sw.ElapsedMilliseconds > 1447) 
```

# c# - Graphics.DrawImage 对于更大的图像来说太慢了吗？

> ID：11020710
> 
> 赞同：33
> 
> 时间：2012-06-13T18:03:46.180
> 
> 标签：c#, image, c#-4.0, gdi+

我目前正在开发一款游戏，我希望有一个带有背景图像的主菜单。

但是，我发现这种方法`Graphics.DrawImage()`真的很慢。我做了一些测量。假设 MenuBackground 是我的资源图像，分辨率为 800 x 1200 像素。我会将它绘制到另一个 800 x 1200 位图上（我首先将所有内容渲染到缓冲区位图，然后缩放它，最后将其绘制到屏幕上 - 这就是我处理多个玩家分辨率的可能性的方式。但它不应该影响无论如何，请参阅下一段）。

所以我测量了以下代码：

```
Stopwatch SW = new Stopwatch();
SW.Start();

// First let's render background image into original-sized bitmap:

OriginalRenderGraphics.DrawImage(Properties.Resources.MenuBackground,
   new Rectangle(0, 0, Globals.OriginalScreenWidth, Globals.OriginalScreenHeight));

SW.Stop();
System.Windows.Forms.MessageBox.Show(SW.ElapsedMilliseconds + " milliseconds"); 
```

结果出乎我的意料——`Stopwatch`测量值介于`40 - 50 milliseconds`. 而且由于背景图像不是唯一要绘制的东西，整个菜单需要大约 100 毫秒才能显示，这意味着可观察到的滞后。

我试图将它绘制到 Paint 事件给出的 Graphics 对象，但结果是`30 - 40 milliseconds`- 没有太大变化。

那么，这是否意味着`Graphics.DrawImage()`不能用于绘制更大的图像？如果是这样，我应该怎么做才能提高我的游戏性能？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-06-14T01:01:39.680

是的，它太慢了。

几年前，我在开发 Paint.NET 时遇到了这个问题（实际上，从一开始，这很令人沮丧！）。渲染性能非常糟糕，因为它总是与位图的大小成正比，而不是与被告知要重绘的区域的大小成正比。也就是说，当执行 OnPaint() 和调用 Graphics.DrawImage() 时，帧率随着位图大小的增加而下降，而随着无效/重绘区域的大小下降，帧率永远不会上升。一个小的位图，比如 800x600，总是可以正常工作，但较大的图像（例如 2400x1800）非常慢。（无论如何，对于前面的段落，您可以假设没有发生任何额外的事情，例如使用一些昂贵的双三次滤波器进行缩放，这会对性能产生不利影响。）

可以强制 WinForms 使用 GDI 而不是 GDI+，甚至避免`Graphics`在幕后创建对象，此时您可以在其上分层另一个渲染工具包（例如 Direct2D）。然而，这并不简单。我在 Paint.NET 中执行此操作，您可以通过`GdiPaintControl`在 SystemLayer DLL 中调用的类上使用类似 Reflector 的东西来查看需要什么，但是对于您正在做的事情，我认为这是最后的手段。

但是，您使用的位图大小 (800x1200) 在 GDI+ 中应该仍然可以正常工作，而不必求助于高级互操作，除非您的目标是低至 300MHz Pentium II。以下是一些可能会有所帮助的提示：

*   如果您在对 的调用中使用不透明位图（无 alpha/透明度）`Graphics.DrawImage()`，特别是如果它是带有 alpha 通道的 32 位位图（但您*知道*它是不透明的，或者您不在乎），则设置`Graphics.CompositingMode`为`CompositingMode.SourceCopy`before调用`DrawImage()`（一定要在之后将其设置回原始值，否则常规绘图图元会看起来很丑陋）。这会跳过每个像素的大量额外混合数学。
*   确保`Graphics.InterpolationMode`未设置为`InterpolationMode.HighQualityBicubic`. 使用`NearestNeighbor`将是最快的，尽管如果有任何拉伸，它可能看起来不太好（除非它正好拉伸 2x、3x、4x 等）`Bilinear`通常是一个很好的折衷方案。您不应该使用任何东西，`NearestNeighbor`除非位图大小与您要绘制的区域相匹配，以像素为单位。
*   总是画入`Graphics`给你的对象`OnPaint()`。
*   总是在`OnPaint`. 如果需要重绘区域，请调用`Invalidate()`. 如果您需要立即进行绘图，请致电`Update()`after `Invalidate()`。这是一种合理的方法，因为 WM_PAINT 消息（导致调用`OnPaint()`）是“低优先级”消息。窗口管理器的任何其他处理都将首先完成，因此您最终可能会出现大量跳帧和卡顿。
*   使用 a`System.Windows.Forms.Timer`作为帧速率/滴答计时器效果不佳。这些是使用 Win32 实现的`SetTimer`，并产生 WM_TIMER 消息，然后`Timer.Tick`引发事件，而 WM_TIMER 是另一个低优先级消息，仅在消息队列为空时发送。你最好使用`System.Threading.Timer`然后使用`Control.Invoke()`（以确保你在正确的线程上！）并调用`Control.Update()`.
*   一般来说，不要使用`Control.CreateGraphics()`. （推论到'总是画`OnPaint()`'和'总是使用`Graphics`给你的`OnPaint()`'）
*   我建议不要使用 Paint 事件处理程序。相反，`OnPaint()`在您正在编写的类中实现，该类应该派生自`Control`. 从另一个类派生，例如`PictureBox`or `UserControl`，要么不会为您增加任何价值，要么会增加额外的开销。（顺便说一句`PictureBox`，经常被误解。你可能几乎永远不想使用它。）

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-08T16:57:57.547

虽然这是一个古老的问题，WinForms 是一个古老的框架，但我想分享一下我刚刚偶然发现的东西：将 Bitmap 绘制到 BufferedGraphics 中，然后将其渲染到 OnPaint 提供的图形上下文中**比**绘制 Bitmap 快得多直接到 OnPaint 的图形上下文 - 至少在我的 Windows 10 机器上。

这很令人惊讶，因为直觉上我认为复制数据两次会稍微慢一些（所以我认为这通常只有在想要手动进行双缓冲时才合理）。但显然 BufferedGraphics 对象发生了一些更复杂的事情。

因此，在承载位图的控件的构造函数中创建一个 BufferedGraphics（在我的情况下，我想绘制一个全屏位图 1920x1080）：

```
 using (Graphics graphics = CreateGraphics())
        {
            graphicsBuffer = BufferedGraphicsManager.Current.Allocate(graphics, new Rectangle(0,0,Screen.PrimaryScreen.Bounds.Width,Screen.PrimaryScreen.Bounds.Height));
        } 
```

并在 OnPaint 中使用它（同时取消 OnPaintBackground）

```
 protected override void OnPaintBackground(PaintEventArgs e) {/* just rely on the bitmap to fill the screen */}

    protected override void OnPaint(PaintEventArgs e)
    {   
        Graphics g = graphicsBuffer.Graphics;

        g.DrawImage(someBitmap,0,0,bitmap.Width, bitmap.Height);

        graphicsBuffer.Render(e.Graphics);
    } 
```

而不是天真地定义

```
 protected override void OnPaintBackground(PaintEventArgs e) {/* just rely on the bitmap to fill the screen */}

    protected override void OnPaint(PaintEventArgs e)
    {   
        e.Graphics.DrawImage(someBitmap,0,0,bitmap.Width, bitmap.Height);
    } 
```

请参阅以下屏幕截图以比较生成的 MouseMove 事件频率（我正在实现一个非常简单的位图草图控件）。顶部是直接绘制Bitmap的版本，底部是使用BufferedGraphics。在这两种情况下，我以大致相同的速度移动鼠标。

[![在此处输入图像描述](../Images/c60940334f65400c06a1f5d455769a02.png)](https://i.stack.imgur.com/86Ryx.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:08:41.140

GDI+ 可能不是游戏的最佳选择。应该首选 DirectX/XNA 或 OpenGL，因为它们利用任何可能的图形加速并且速度非常快。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T18:09:19.363

GDI+ 无论如何都不是速度恶魔。任何严重的图像操作通常都必须进入事物的本机方面（pInvoke 调用和/或通过调用获得的指针进行操作`LockBits`。）

你看过 XNA/DirectX/OpenGL 吗？这些是为游戏开发而设计的框架，比使用 WinForms 或 WPF 等 UI 框架更高效、更灵活。这些库都提供 C# 绑定。

[您可以使用诸如BitBlt](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx)之类的函数 pInvoke 进入本机代码，但也存在与跨越托管代码边界相关的开销。

# python - 解析 DTD 以显示元素的层次结构

> ID：11020717
> 
> 赞同：4
> 
> 时间：2012-06-13T18:04:00.237
> 
> 标签：python, xml, parsing, dtd-parsing

我的目标是解析几个相对复杂的 DTD 以揭示元素的层次结构。DTD 之间的唯一区别是版本，但每个版本都没有尝试保持向后兼容——这太容易了！因此，我打算将每个 DTD 定义的元素结构可视化，以便我可以设计一个适合统一存储数据的数据库模型。

因为我在 Python 中研究过的大多数解决方案都只会针对外部 DTD 进行验证，所以我决定从头开始努力。Python[`xml.parsers.expat`](http://docs.python.org/library/pyexpat.html)只解析 XML 文件并实现非常基本的 DTD 回调，所以我决定查看[原始版本](http://www.jclark.com/xml/expat.html)，它是用 C 编写的，并声称完全符合 XML 1.0 规范。但是，我对这种方法有以下疑问：

1.  expat（在 C 中）是否会解析 DTD 文件中的外部实体引用并遵循这些引用、解析它们的元素并将这些元素添加到层次结构中？
2.  expat 可以泛化和处理 SGML，还是在遇到无效的 DTD 但有效的 SGML 文件后会失败？

我的要求可能会导致外派不合适的结论。如果是这种情况，我正在*考虑*为 XML 1.0 DTD 编写一个词法分析器/解析器。还有其他我应该考虑的选择吗？

以下更简洁地说明了我的意图：

## 输入 DTD 摘录

```
<!--A concise summary of the disclosure.-->
<!ELEMENT abstract (doc-page+ | (abst-problem , abst-solution) | p+)> 
```

## 从 DTD 摘录创建的对象（伪代码）

```
class abstract:
    member doc_page_array[]
    member abst_problem
    member abst_solution
    member paragraph_array[]
    member description = "A concise summary of the disclosure." 
```

`<!ELEMENT>`一个具有挑战性的方面是将出现在其上方的评论归因于标签。因此，如果我不能使用 expat 来完成此操作，则可能需要使用本地解析器。

另一个问题是，一些解析器在处理使用大于 #xFFFF 的 unicode 字符的 DTD 时遇到问题，因此这可能是另一个有利于创建我自己的因素的因素。

如果事实证明词法分析器/解析器路线更适合我的任务，是否有人碰巧知道将[这些 EBNF 表达式](http://www.w3.org/TR/1998/REC-xml-19980210)转换为能够被解析的东西的好方法？我想“最好的”方法可能是使用正则表达式。

无论如何，这些只是我对我的问题的想法。对上述问题的任何答案或有关替代方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:37:55.690

有几种现有的工具可以满足您的需求，包括[DTDParse](http://dtdparse.sourceforge.net/SGML-DTDParse/doc/html/lib/SGML/DTDParse.html)、[OpenSP](http://openjade.sourceforge.net/doc/sgmldecl.htm)、[Matra](http://matra.sourceforge.net/)和[DTD Parser](http://www.rpbourret.com/dtdparser/)。还有[关于](http://tecfasun2.unige.ch/guides/xml/xml-source.html)创建自定义解析器的文章。

# php - 具有 exec 功能的 PHP 脚本在浏览器中不起作用，但如果我在带有“php5 script_name.php”的终端中运行它，它就可以工作

> ID：11020725
> 
> 赞同：0
> 
> 时间：2012-06-13T18:04:16.107
> 
> 标签：php, exec

我的问题：我编写了使用 exec 函数的 PHP 网页，但它不能在浏览器中运行，但如果我将它运行到带有“php5 script_name.php”的终端，它就可以工作......问题出在哪里？！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:12:35.053

最可能的问题是当前工作目录不同和/或`PATH`环境变量不同和/或文件权限不同。可能是当前工作目录（或权限）。试着在你打电话之前把这个放在`exec()`：

```
chdir($my_directory); 
```

`$my_directory`您尝试在 CLI 中运行它的目录在哪里。

如果您没有收到任何错误，请尝试将其放在脚本的顶部：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

这可能会让您更好地了解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:08:09.177

问题是命令行 PHP 可以使用不同的 php.ini 文件。尝试做`phpinfo()`，你会看到每个人都在使用哪一个。

# java - 为什么我们转向访问超类成员，尽管我们可以继承它们？

> ID：11020729
> 
> 赞同：0
> 
> 时间：2012-06-13T18:04:36.917
> 
> 标签：java, oop, inheritance

如果我们有 2 类 Zoo & Moo 如下：

```
public class zoo {
    String superString="super";
    private String coolMethod(){
        return "Zoo method";
    }
}

public class Moo extends zoo{
    public void useMyCoolMethod(){
        zoo z=new zoo();
        System.out.println(superString);//1
        System.out.println(z.superString);//2
    }
    public  static void main(String[]args){
        new Moo().useMyCoolMethod();
    }
} 
```

在 1 & 2 我们通过继承和访问打印超类中 String 的值，问题是，尽管我可以通过继承做同样的事情，但 Access 有什么好处？知道如果两个类位于差异包中，则不允许使用 Access 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:11:32.370

关于您的示例，如果您真的想打印两次“超级”，那么“访问”该方法根本没有任何好处。

但是通常 OO 程序包含两个以上的类，并且作者尝试使用定义的接口（也称为公共方法或 API）对代码进行模块化。仅使用继承创建模块非常困难并且创建笨拙的代码。所以对象将需要其他实例并通过“访问”调用那里的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:12:12.073

通过对象 ref 访问您正在修改被引用对象的状态，通过继承您正在修改您当前所在的对象（此引用）。因此，除了通过访问修饰符和诸如此类的东西在类级别和包级别进行封装之外，实际上没有任何好处，您只需根据您想要的代码行为来使用它，或者在这种情况下，对根据上下文修改对象的状态。

但除此之外，我不确定是否还有其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:10:05.790

`Moo`如果在同一个包中并且没有扩展，则访问（默认或包私有）将很有用`Zoo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T18:13:30.373

在第 1 行中，您正在使用继承，即您有一个类动物，并且您有方法 move()，它使用他的四条腿移动动物。但是在袋鼠的情况下，您想使用动物类的大部分功能，但想根据它跳跃并使用后腿移动的事实来改变它的移动方式。

在第 2 行中，您正在使用组合，即当您想要创建汽车时，您将需要不同的组件，并且它们将相互交互以使汽车运行。在这里，您不能从 GearBox 或 Engine 继承，但您必须将它们用作 Car 的一部分（或您所谓的访问权限）。

最后它的 Zoo 和 Moo 之间的关系将决定你想使用什么方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T18:17:13.757

当你使用这个访问和继承是一样的`do Not want to modify the content of the inherited memeber..`

例如：

```
public class A {

    String s = "Hello";

   }

public class B extends A{

    String s = "Hi;

   System.out.println(s);  // Will print the s in class B

   System.out.println(new A().s);  // Will print the s in class A

   } 
```

现在由于 String s 没有修饰符，它被认为是有`Default modifier`，这意味着它可以通过`classes only with in its own package.`

如果你使用受保护的访问修饰符，那么你需要扩展类，然后使用继承的成员，`but you can Not use the protected member by creating an instance of the class that holds it and then use dot operator to access it, this will Not work..`

例如：

```
package com.go;

public class A {

  protected String s= "Hi";

 }

 package com.fo;

 public class B extends A {

  System.out.println(s);  // This will work

  A a = new A();
  System.out.println(a.s); // This will NOT work

 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T18:43:16.773

首先，我认为维护具有私有可见性的类属性并通过 getter 和 setter 访问它们是一种很好的做法。

其次，您不是通过继承访问属性，而是创建 Zoo 的实例，并访问 superString 属性，因为它是包可见性，您还可以从包的另一个类访问它们，甚至不扩展 Zoo类（这通常不是一件好事）

第三，您不需要创建超类的实例来访问他的公共或默认属性，您可以简单地执行以下操作：

```
System.out.println(this.superString) 
```

这与（如果不是用相同名称声明的局部变量或参数）绝对相同：

```
System.out.println(superString) 
```

总之，拥有默认或公共属性，让客户端类在没有类的情况下访问它们（读取和写入）对此无能为力，这可能会给使用这些属性的类的方法带来副作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T18:14:07.003

示例 2 您有一个单独的 zoo 对象实例，这有点奇怪，但由于该方法总是返回相同的东西，所以没有太大区别。如果您将方法更改为基于构造函数输入或其他内容，您可能会看到 2.

```
public class zoo {
    public String superString;
    public zoo (String _superstring) {
        superString = _superstring;
    }
}

public class Moo extends zoo{
    public void useMyCoolMethod(){
        zoo z=new zoo("string1");
        System.out.println(superString);//1
        System.out.println(z.superString);//2
    }
    public Moo (String _superstring) {
        superString = _superstring;
    }
    public  static void main(String[]args){
        new Moo("string2").useMyCoolMethod();
    }
} 
```

将返回

> 字符串 2
> 字符串 1

# ember.js - 使用 Ember.js 对路由和状态进行故障排除

> ID：11020736
> 
> 赞同：0
> 
> 时间：2012-06-13T18:05:08.103
> 
> 标签：ember.js

我应该首先说我是一个完整的 Ember.js 菜鸟（以及一般的 MVC JavaScript 框架菜鸟）。

我试图弄清楚 Router 和 StateManager 如何协同工作。我从互联网上的各个地方拼凑了一个示例，您可以在此处查看：

[http://jsfiddle.net/zdfs/qsAxZ/1/](http://jsfiddle.net/zdfs/qsAxZ/1/)

所以第一次加载的一切似乎都在工作。但是有些功能似乎表现不佳。我希望通过操作链接附加的 CSS 类实际上是应用程序状态的一部分，但我在某处搞砸了。

您可以通过单击“网络摄像头”或“屏幕共享”来复制问题。该链接将突出显示。当我重新加载页面时，状态是正确的，但是高亮丢失了。我做错了什么，但我不知道如何解决它。

如果我尝试将操作移动到 StateManager 中，那么`router.get("applicationController")`引用就会丢失。

我也不能做类似的事情`sManager.send("goHome");`- 出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:44:35.933

阅读您的代码后的一些评论：

*   您是否有理由在路由器和 StateManager 之间拆分代码？在当前的规范形式中，您的状态应该是`Ember.State`位于路由器内部的 类。
*   该`connectOutlet`方法应该从`connectOutlets`状态的钩子中调用，而不是那个`enter`。
*   路由器中的事件处理程序在第一个参数中获取路由器实例，而不是状态（参见`goHome`，`viewWebcam`& `viewScreen`）

# repository-pattern - 领域逻辑和业务逻辑

> ID：11020738
> 
> 赞同：0
> 
> 时间：2012-06-13T18:05:22.150
> 
> 标签：repository-pattern, n-tier-architecture

在我的一个项目中，我使用的是 n 层架构

```
DAL (Repository Pattern) <-> BLL (POCO Services) <-> Web UI (ASP.NET MVC) 
```

我创建了一个通用存储库，DAL 层一切正常。

在业务逻辑层中，我有我的服务方法，其运行方式类似（我喜欢使用的示例是因为 Pizza :)

```
myOven.Bake(myPizza); 
```

尽管如此，我需要一些对象内部的特定信息`myPizza`，例如：

```
myPizza.GetBakeTime(); 
```

我知道，我可以使用类似的东西：

```
myOven.GetBakeTimeFor(myPizza); 
```

可以计算它，但我不想把那个特定的逻辑放入`myOven`对象（这里的服务层），相反，我想把它包含在 中`myPizza`，比如

```
public partial class Pizza
{
    public double GetBakeTime()
    {
        // calculate Bake Time and return, based on other variables
    }
} 
```

我的意思是，扩展我的 ORM 生成的类并提供此功能。

`Domain Logic`我的问题：我知道，这在理论上是可以做到的，但是在同时使用这两个课程和`Business Logic`同一个课程时我应该考虑什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:20:18.837

领域层应该只处理与业务相关的功能。存储库处理数据的持久性。这两者有不同的目的，不应该混在一起。

此外，领域层几乎就是业务层。对于这个特定示例，您只需要烘焙时间，那么专门的查询存储库应该知道答案而不涉及域（因为它是预先计算的）。如果您想知道烘烤还剩多少时间，那么服务（域的一部分）可以使用烤箱和披萨实体获取值。

但是，这已经太具体了，可能根本不适合您要解决的实际问题。

# iphone - 创建具有多个“屏幕”的 iPhone 应用

> ID：11020739
> 
> 赞同：-1
> 
> 时间：2012-06-13T18:05:26.027
> 
> 标签：iphone, objective-c, uiview, uiviewcontroller

我对 Objective-C / iPhone 编程比较陌生，到目前为止只创建了单视图应用程序。我有兴趣尽快创建一个应用程序，而不是拥有一个“线框”，从某种意义上说，它允许我使用按钮导航我的应用程序的各种视图。所以我想我的问题是：

1.  我需要做什么才能制作具有多个视图的应用程序
2.  如何将它们与按钮中的 UIActions 链接以导航各个屏幕（例如返回按钮以转到上一个屏幕）

我可能有更多，但这是一个开始。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:40:58.413

由于没有人真正给出明确有用的答案，我将分享我自己的结论。Xcode 4 提供了一种非常直观和交互式的方式来创建多个 MVC 并在它们之间进行分隔，甚至提供在视图之间移动的界面。我从 Paul Haggarty 在 iTunes U 上的 iOS 课程中了解了如何使用此功能。我强烈推荐它。

乔伊

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T18:09:50.133

您可以使用多个`UIViewController`and or的组合`UINavigationController`。使用 和 等`presentModalViewController:animated:`方法`pushViewController:`。

# ios - UIWebView : 加载百分比信息

> ID：11020740
> 
> 赞同：0
> 
> 时间：2012-06-13T18:05:25.917
> 
> 标签：ios, uiwebview

当 UIWebView 加载页面时，我需要获取有关加载数据百分比的信息。

我知道 UIWebView 没有提供相应的 API。

我想知道有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:11:01.553

一种方法是使用外部框架（[ASIHTTP](http://allseeing-i.com/ASIHTTPRequest/)、[AFNetworking](https://github.com/gowalla/AFNetworking)），它为您提供一些进度信息来获取数据，然后使用[`– loadHTMLString:baseURL:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/loadHTMLString%3abaseURL%3a).

ASIHTTP 虽然不再积极开发，但有一个非常适合您的案例的类：

> ASIWebPageRequest - 下载完整的网页，包括图像和样式表等外部资源。即使没有网络连接，任何大小的页面都可以无限期地缓存，并显示在 UIWebview / WebView 中。

# jquery - 单击更改字体颜色

> ID：11020744
> 
> 赞同：1
> 
> 时间：2012-06-13T18:05:54.753
> 
> 标签：jquery

我正在尝试创建一个简单的关于页面，该页面使用 JQuery click 来更改关于正文的文本和内容（而不是创建 3-4 个独立页面）。我试图用“菜单”做的很简单，但由于某种原因它没有按预期工作。

每次单击菜单选项都会触发一个 JQuery 事件，该事件将更改正文的文本，并将单击的菜单选项的颜色更改为蓝色以表明它已被选中。

现在，我试图应用的 jquery 根本不起作用，点击时颜色也没有切换。

我的 jQuery

```
$(document).ready(function(){
    $('.about-link').click(function(){
        $(this).toggleClass('clicked');
    });
});​ 
```

jsfiddle

[http://jsfiddle.net/bBDk8/6/](http://jsfiddle.net/bBDk8/6/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:09:02.943

`#about-nav a`css 选择器比`.clicked`从该选择器应用颜色而不是从`.clicked`. `#about-nav a.clicked`通过使用例如提高特异性。

[http://jsfiddle.net/bBDk8/8/](http://jsfiddle.net/bBDk8/8/)

# php - PHP：如何索引多个嵌套数组的列表？

> ID：11020745
> 
> 赞同：0
> 
> 时间：2012-06-13T18:05:55.370
> 
> 标签：php, multidimensional-array, arraylist

如何索引下面的数组，

```
array
(
    [1403847357564066] => Array
        (
            [quantity_request] => 1
            [time_created] => 1339603485
            [variant] => Array
                (
                )
        )

    [1403873546800880] => Array
        (
            [quantity_request] => 1
            [time_created] => 1339602425
            [variant] => Array
                (
                )

        )

) 
```

或者我可以得到，

```
array(
[0] => array(
      [1403847357564066] => Array
                (
                    [quantity_request] => 1
                    [time_created] => 1339609120
                    [variant] => Array
                        (
                        )

                )
       ),
[1] => array(

            [1403847343435137] => Array
                (
                    [quantity_request] => 1
                    [time_created] => 1339609500
                    [variant] => Array
                        (
                        )

                )
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:07:59.010

```
$newarray=array();
foreach ($oldarray as $k=>$v) $newarray[]=array($k=>$v); 
```

# scala - 使用新的 Scala 反射 API 获取伴随对象实例

> ID：11020746
> 
> 赞同：28
> 
> 时间：2012-06-13T18:06:07.683
> 
> 标签：scala, reflection

使用 Scala 的新反射 API，是否可以获得对类的伴生对象的引用？我在想一些事情：

```
trait Base {
  def companion: MetaBase = someReflectionMagic(this).asInstanceOf[MetaBase]
}

trait MetaBase {
  // stuff
}

// ---

class Foo extends Base

object Foo extends MetaBase

assert(new Foo.companion == Foo) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-14T10:45:36.770

戴夫！感谢您对新反射感兴趣。早期采用者在很大程度上推动了反射和宏的开发过程，我很高兴成为我们这个令人惊叹的社区的一员。

在回答你的问题之前，我想先声明一个免责声明。在 2.10.0-M4 中，我们刚刚奠定了 Scala 反射 API 的基础。它仍然很热门，因此文档非常稀缺，API 并没有完全充满便利。它有效，但需要测试和反馈。当然，弄乱预发布 API 很麻烦，但我总是在这里提供帮助。

到目前为止，我们已经有了一份未来将成为反射 SIP 的草案：[https](https://docs.google.com/document/d/1Z1VhhNPplbUpaZPIYdc0_EUv5RiGQ2X4oqp0i-vz1qw/edit#heading=h.pqwdkl1226tc) ://docs.google.com/document/d/1Z1VhhNPplbUpaZPIYdc0_EUv5RiGQ2X4oqp0i-vz1qw/edit#heading=h.pqwdkl1226tc 。您可以立即阅读，也可以先浏览我下面的答案。

```
trait Base {
  def companion: MetaBase = {
    // runtime reflection is typically done
    // by importing things from scala.reflect.runtime package
    import scala.reflect.runtime._

    // the new Scala reflection API is mirror based
    // mirrors constitute a hierarchy of objects
    // that closely follows the hierarchy of the things they reflect
    // for example, for a class you'll have a ClassMirror
    // for a method you'll have a MethodMirror and so on
    // why go the extra mile?
    // because this provides more flexibility than traditional approaches
    // you can read more about mirror-based designs here:
    // https://dl.dropbox.com/u/10497693/Library/Computer%20Science/Metaprogramming/Reflection/mirrors.pdf
    // https://dl.dropbox.com/u/10497693/Library/Computer%20Science/Metaprogramming/Reflection/reflecting-scala.pdf

    // bottom line is that to do anything you will need a mirror
    // for example, in your case, you need a ClassMirror

    // remember I said that mirrors provide more flexibility?
    // for one, this means that mirror-based reflection facilities
    // might have multiple implementations
    // in a paper linked above, Gilad Bracha muses over a runtime
    // that loads things remotely over the network
    // in our case we might have different mirrors for JVM and CLR
    // well, anyways

    // the canonical (and the only one now) implementation of the mirror API
    // is Java-based reflection that uses out of the box classloaders
    // here's its root: https://github.com/scalamacros/kepler/blob/9f71e9f114c10b52350c6c4ec757159f06e55daa/src/reflect/scala/reflect/api/Mirrors.scala#L178
    // yeah, right, I've just linked a source file from trunk
    // we'll have Scaladocs for that soon, but for now take a look
    // this file is interfaces-only and is heavy on comments

    // to start with Java-based reflection implementation you need a classloader
    // let's grab one and instantiate the root mirror
    // btw, the same effect could be achieved by writing
    // `scala.reflect.runtime.currentMirror`
    val rootMirror = universe.runtimeMirror(getClass.getClassLoader)

    // now when we've finally entered the reflective world
    // we can get the stuff done
    // first we obtain a ClassSymbol that corresponds to the current instance
    // (ClassSymbols are to Scala the same as Classes are to Java)
    var classSymbol = rootMirror.classSymbol(getClass)

    // having a Scala reflection entity
    // we can obtain its reflection using the rootMirror
    val classMirror = rootMirror.reflectClass(classSymbol)

    // now we just traverse the conceptual hierarchy of mirrors
    // that closely follows the hierarchy of Scala reflection concepts
    // for example, a ClassMirror has a companion ModuleMirror and vice versa
    val moduleMirror = classMirror.companion.get

    // finally, we've arrived at our destination
    moduleMirror.instance.asInstanceOf[MetaBase]
  }
}

trait MetaBase {
  // stuff
}

// ---

class Foo extends Base

object Foo extends MetaBase

object Test extends App {
  assert(new Foo().companion == Foo)
} 
```

更新。另请参阅 Daniel Sobral 的精彩帖子：http: [//dcsobral.blogspot.ch/2012/07/json-serialization-with-reflection-in.html](http://dcsobral.blogspot.ch/2012/07/json-serialization-with-reflection-in.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-04T15:21:52.010

我没有看到尤金的最后评论并想出了这个。它适用于 scala 2.10。

```
trait ReflectionSugars{
  import scala.reflect.runtime.{universe => ru}
  private lazy val universeMirror = ru.runtimeMirror(getClass.getClassLoader)

  def companionOf[T](implicit tt: ru.TypeTag[T])  = {
    val companionMirror = universeMirror.reflectModule(ru.typeOf[T].typeSymbol.companionSymbol.asModule)
    companionMirror.instance
  }

}

trait X extends ReflectionSugars{
   def companion = companionOf[X]
} 
```

[https://gist.github.com/piotrga/5928581](https://gist.github.com/piotrga/5928581)

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-11T13:00:20.983

斯卡拉 2.13.3：

```
import scala.reflect.runtime.{universe => ru}

def determineCompanionObject[T](implicit typetag: ru.TypeTag[T]): Unit = {

  val m = ru.runtimeMirror(getClass.getClassLoader)

  val o1 = m.reflectModule(ru.typeOf[T].typeSymbol.companion.asModule).instance
  // o1 is the companion object!

} 
```

调用，例如

```
determineCompanionObject[MyClass01] 
```

# security - 如何验证直接上传到 S3 的数据？

> ID：11020751
> 
> 赞同：0
> 
> 时间：2012-06-13T18:06:23.623
> 
> 标签：security, amazon-s3, amazon-web-services

我有一个将图像直接上传到 S3 的 iPhone 应用程序。然后它访问我的 Web 服务器上的一个端点，并创建一个包含一些元数据的新帖子，以及上传图像的 S3 URL。所有这些都发生在 SSL 上，但是是什么阻止了某人对端点进行逆向工程以创建帖子并提供虚假 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:42:18.567

不，不可能真正确保只有您的应用程序可以联系您的服务器，但您可以为您的应用程序提供某种签名，在真正的通信发生之前通过 HTTPS 将其发布到您的服务器。

我认为总体上看一下 API 身份验证是一个好主意。这看起来像是一个好的开始：[标准化 REST 身份验证原则](http://broadcast.oreilly.com/2009/12/principles-for-standardized-rest-authentication.html)

# python - Python：如何正确使用外部函数

> ID：11020760
> 
> 赞同：2
> 
> 时间：2012-06-13T18:06:39.380
> 
> 标签：python, class, function, import, pyqt

这是我看过很多文档的东西，但我无法得到关于我知识上的这个特定差距的确切答案，因此我一直在碰壁，在这个层面上似乎没有什么能真正涵盖它：

我有几个窗口，它们都应该是可拖动的，所以我正在构建一个实用程序文件。在这个文件中，我有这个：

```
def mouseMoveEvent(self, event):
    if self.moving: self.move(event.globalPos()-self.offset)

def mousePressEvent(self, event):
    if event.button() == QtCore.Qt.LeftButton:
        self.moving = True; self.offset = event.pos()

def mouseReleaseEvent(self, event):
    if event.button() == QtCore.Qt.LeftButton:
        self.moving = False 
```

如果我将它放入带有实际窗口的单个文件中（并且不要从另一个文件中调用），这将起作用。

问题是，我如何从另一个文件（具有 UI 窗口的文件）调用它？

我打电话给它

```
 from utils import * 
```

所以从技术上讲，这些功能都可以通过键入来访问

```
mouseReleaseEvent(x,x) 
```

但我需要 UI 来导入这些功能，所以在主文件中放置“from utils import *”后我输入：

```
self.moving = False 
```

但无论我做什么，都会出错。所以问题是封装首先列出的函数（第一个代码块）以便我可以从我的 UI 文件中调用它们的正确方法是什么？

这是我的用户界面代码：

```
 #!/usr/bin/env python

    import sys
    import os
    from PyQt4 import QtCore, QtGui
    from vibotCss import css
    from viUtils import *

    class viBadOSUI(QtGui.QDialog):
        def __init__(self):
            QtGui.QDialog.__init__(self)
            #setup window
            self.setWindowFlags(QtCore.Qt.FramelessWindowHint)
            self.resize(300, 150)
            center(self)
            self.setMouseTracking(True)

            #additional code
            self.show()
            self.setStyleSheet(css)

    app = QtGui.QApplication(sys.argv)
    window = viBadOSUI()
    sys.exit(app.exec_()) 
```

由于长期以来仅在 Autodesk Maya 中学习和使用它，我的 Python 知识存在很大差距——我现在正试图弥合上述差距。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:17:50.753

我认为您正在寻找的是混合：

例如，在**viUtils.py**中，您可以定义：

```
from PyQt4 import QtCore, QtGui

class Draggable(object):
    def mouseMoveEvent(self, event):
        try:
            if self.moving:
                self.move(event.globalPos()-self.offset)
        except AttributeError:
            pass

    def mousePressEvent(self, event):
        if event.button() == QtCore.Qt.LeftButton:
            self.moving = True; self.offset = event.pos()

    def mouseReleaseEvent(self, event):   
        if event.button() == QtCore.Qt.LeftButton:
            self.moving = False

class Centerable(object):
    pass # add code here

class CountdownTimer(object):
    pass # add code here 
```

通过将相关方法捆绑在 mixins 中，您可以通过简单地将 mixin(s) 添加到基类中来为类（窗口）添加功能：

```
import sys
import os
from PyQt4 import QtCore, QtGui
from vibotCss import css
import viUtils

class viBadOSUI(QtGui.QDialog, 
                viUtils.Draggable, viUtils.CountdownTimer):

    def __init__(self):            
        QtGui.QDialog.__init__(self)
        #setup window
        self.setWindowFlags(QtCore.Qt.FramelessWindowHint)
        self.resize(300, 150)
        center(self)  # You should probably make `center` a method instead of a function and call `self.center()` instead.
        self.setMouseTracking(True)

        #additional code
        self.show()
        self.setStyleSheet(css)

app = QtGui.QApplication(sys.argv)
window = viBadOSUI()
sys.exit(app.exec_()) 
```

我不喜欢我上面的代码的一件事是我无法弄清楚如何定义一个 mixin（例如`Draggable`），`__init__`它会被自动调用`viBadOSUI.__init__`。通常你会使用`super`它，但它`QtGui.QDialog.__init__`本身似乎并不调用`super`.

`super` **（实际上，我认为如果**您将 mixins 放在**before 之前** 可能会使用`QtGui.QDialog`，但这依赖于诡计，一旦有人忘记`QtGui.QDialog`必须出现在基础列表中的最后一个，就会破坏。）

因为我无法定义一种`__init__`可以稳健工作的方法：

```
class Draggable(object):
    def __init__(self):
        ...
        self.moving = False 
```

我改为修改`mouseMoveEvent`为使用`try..except`. 这比`self.moving = False`直接添加要好，`viBadOSUI.__init__`因为此属性仅由 Draggable 使用，因此应该以某种方式与`Draggable`. 设置 mixin，然后**还**必须记住初始化一个属性，以便 mixin 可以工作，这是丑陋的编程。

`try..except`在这里使用可能比使用稍微好一些，`if hasattr(self, 'moving')`因为只要不引发异常，try 会更快，并且只会在第一个 mousePressEvent 之前的开头引发异常。

尽管如此，仍有改进的余地，我希望这里有人能向我们展示更好的方法。

另一种方法是定义

```
class viBadOSUI(QtGui.QDialog):
    mouseMoveEvent = viUtils.mouseMoveEvent
    mousePressEvent = viUtils.mousePressEvent
    mouseReleaseEvent = viUtils.mouseReleaseEvent 
```

这为您提供了很大的灵活性，可以将 viUtils 中所需的方法直接添加到您定义的任何类中。但是，我认为它有点过于灵活，因为 mouseMoveEvent、mousePressEvent 和 mouseReleaseEvent 对我来说似乎是“捆绑”的。它们一起工作以实现单个功能。这就是为什么我更喜欢 mixin 方法的原因。此外，`viUtils.Draggable`与将这 3 行添加到您希望可拖动的每个窗口子类相比，添加到基类的输入更少。

顺便说一句，我建议避开`from viUtils import *`并`import viUtils`改用。从长远来看，它将使您的代码更有条理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:10:18.980

方法上的`self`（第一个）参数是指它所绑定的实例。`self.moving = False`外部方法的等价物是绑定`False`到`moving`实例的属性，例如`obj.moving = False`。

# r - 数据框的列名

> ID：11020765
> 
> 赞同：2
> 
> 时间：2012-06-13T18:06:51.790
> 
> 标签：r, dataframe

您好，我在 R 中有一个数据框，这是将一个向量与大数据库进行比较的结果（数据库是这样读取的`db <- read.table("database.txt", header = F, row.names = 1, sep = ",")`）。

问题是当我尝试使用这段代码命名列时，`colnames(some_matrix_with_example_below) <- c("name1","name2")`R 产生了一个错误：

```
Error in `colnames<-`(`*tmp*`, value = c("name1", "name2")) : 
  length of 'dimnames' [2] not equal to array extent 
```

要重命名的矩阵示例

```
row.names   item
dbi1    1.0000000
dbi3    0.9431307
dbi4    0.9427034
dbi5    0.9259156
dbi6    0.9210256 
```

正如我正确理解的那样，row.names 不被视为列，是否有简单的方法不创建名称和值对象并将它们绑定以进一步导出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:19:15.980

使用

```
df <- read.table(text="row.names   item
dbi1    1.0000000
dbi3    0.9431307
dbi4    0.9427034
dbi5    0.9259156
dbi6    0.9210256", header=TRUE) 
```

请注意，`df`这里有两列。

```
> df
  row.names      item
1      dbi1 1.0000000
2      dbi3 0.9431307
3      dbi4 0.9427034
4      dbi5 0.9259156
5      dbi6 0.9210256 
```

现在重命名这些名称：

```
names(df) <- paste0("name", 1:2) 
```

这使

```
> df
  name1     name2
1  dbi1 1.0000000
2  dbi3 0.9431307
3  dbi4 0.9427034
4  dbi5 0.9259156
5  dbi6 0.9210256 
```

现在，当我们写出这个数据框时，我们禁止写入行名：

```
write.table(df, file = "my_data.txt", quote = FALSE, col.names = TRUE,
            row.names = FALSE, sep = ",") 
```

我们得到以下文件：

```
$ cat my_data.txt 
name1,name2
dbi1,1
dbi3,0.9431307
dbi4,0.9427034
dbi5,0.9259156
dbi6,0.9210256 
```

我会将舍入步骤与将数据写入文件分开。此外，您无需转换为矩阵即可使用`write.table()`数据框。

```
df2 <- transform(df, name2 = round(name2, digits = 4)) 
```

给

```
> df2
  name1  name2
1  dbi1 1.0000
2  dbi3 0.9431
3  dbi4 0.9427
4  dbi5 0.9259
5  dbi6 0.9210 
```

然后像上面那样写出来。如果您愿意，您甚至可以将这两个步骤结合起来：

```
write.table(transform(df, name2 = round(name2, digits = 4)),
            file = "my_data3.txt", quote = FALSE, col.names = TRUE,
            row.names = FALSE, sep = ",") 
```

# javascript - 使用 jQuery 创建不符合格式的查询字符串不起作用

> ID：11020769
> 
> 赞同：2
> 
> 时间：2012-06-13T18:07:07.147
> 
> 标签：javascript, jquery, query-string

我想发送一个 ajax 请求，但我尝试构建的查询字符串为空。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>This is a project to show how to use RESTful</title>
</head>
<body>
<script type="text/javascript">var contexPath = "<%=request.getContextPath()%>";</script>
<script src="<%=request.getContextPath()%>/js/jquery.js"></script>

<script type="text/javascript">
function doAjaxPost() {
    var queryString = $('#htmlform') // empty

    alert("doAjaxPost Called:" + queryString + ":");

    $.ajax({
        ...
        ...
    });
}​    </script>

<H1>Add Employee</H1>

<p>
<form name="htmlform">
<table border=1>
    <thead><tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
    </tr></thead>

    <tr>
        <td><input  type="text" name="ID" maxlength="5" size="3"></td>
        <td><input  type="text" name="Name" maxlength="10" size="10"></td>
        <td><input  type="text" name="Email" maxlength="10" size="10"></td>
    </tr>

</table>
<input type="button" value="Save Employee" onclick="doAjaxPost();" />
<p>
<p>
</form>
[<a href="http://localhost:8080/RESTful/service/employees">List all Employees</a> | <a href="add.jsp">Employee Form Test</a>]
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:10:42.950

更改自：

```
<form name="htmlform"> 
```

至：

```
<form id="htmlform"> 
```

并来自：

```
var queryString = $('#htmlform') 
```

至：

```
var queryString = $('#htmlform').serialize(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:10:42.280

您正在使用 jQuery 选择一个 HTML 对象，但您没有从中得到任何东西（当您将它附加到 url 字符串时，queryString 仍然是一个 jQuery 对象）。

尝试以下

```
var queryString = $('#htmlform').serialize(); 
```

这应该导致表单被序列化为字符串，此时附加它应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:11:21.687

您需要`id="htmlform"`在表格上注明`$("#htmlform")`才能使用。

# iphone - NSMutableString 追加失败

> ID：11020770
> 
> 赞同：0
> 
> 时间：2012-06-13T18:07:11.820
> 
> 标签：iphone, objective-c, nsstring, nsmutablestring

我有一个`NSString`我想`{`在它的开头附加一个。

```
 NSMutableString *str = [[NSMutableString alloc] initWithString:@"{"];
    [str stringByAppendingString:extracted]; 
```

这`str`仅返回`{`. 这是为什么？Objective-C 非常令人沮丧，因为它提供了许多方法来做同样的事情，但在某些情况下需要不同的方法。

我试着做然后`[NSMutableString string]`追加，它仍然不起作用。为什么这不起作用，我该怎么办？`{``extracted`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:10:49.813

`stringByAppendingString`返回一个新字符串，它不会修改旧字符串。

`stringWith`所有以or开头的函数都`arrayWith`创建新对象而不是修改旧对象。

为了实现您想要的，一个更简单的解决方案是：

```
 NSString *str = [NSString stringWithFormat:@"{%@", oldString]; 
```

或者：

```
 NSMutableString *str = [@"{" mutableCopy];
 [str appendString:blah]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:10:34.843

您正在调用一个`NSString`返回新字符串且不修改调用它的字符串的方法。你需要打电话[`appendString`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableString/appendString:)。

```
[str appendString:extracted]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T20:34:31.913

```
// use it like this

NSString *extracted = @"this is my string";
NSString *str = [[NSString alloc] initWithString:@"{"];
str =  [str stringByAppendingString:extracted]; 
```

希望对你有帮助

# c - Turbo C 在执行 C 冒泡排序程序时挂起

> ID：11020774
> 
> 赞同：0
> 
> 时间：2012-06-13T18:07:25.737
> 
> 标签：c, sorting

我编写了一个 C 程序来进行冒泡排序，但在执行它时 IDE 挂起。为什么会这样？代码如下：

```
 #include<stdio.h>
    main()
    {
          int i[3],temp,n,x;
          printf("Enter 4 positive numbers");
          for(n=0;n<=3;n++)
          {
                scanf("%d",&i[n]);
          }
          recheck:
          for(x=0;x<=2;x++)
          {
                if(id[x]>i[x+])
                {
                temp=i[x];
                i[x]=i[x+1];
                i[x+1]=temp;
                }
          }
          if(i[0]>i[1]&&i[1]>i[2]&&i[2]>i[3])
          {
                for(n=0;n<=3;n++)
                {
                      printf("%d",i[n]);
                 }
          }
          else
          {
                 goto recheck;
           }
           getche();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:33:15.480

您应该始终复制粘贴您的代码。您提供的代码有一些拼写错误，甚至无法编译。

忽略错别字存在三个主要问题：

1.  `int i[3]`只有 3 个元素。`i[3]`超出范围，访问它可能会导致意外结果。

2.  交换元素时，您按升序排序，但在检查数组是否完全排序时，您使用降序。

3.  您正在使用严格的不等式来检查数组是否已排序。如果有两个相等的元素，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:25:15.413

这段代码有 4 个错误。

1）您将变量声明为`i[3]`. 所以它只需要三个值。从`i[0]`到`i[2]`。您正在阅读四个值。因此数组被限制为三个，它不能读取四个值。如果您想读取四个值，请更改`i[3]`为`i[4]`。

2) `if(id[x]>i[x+])`。这条线有两个错误。你在这里使用`id[x]`. 但没有变量声明为`id[]`. 应该是`i[x]`。第二个是`i[x+]`。这不是一个有效的声明。它应该是`i[x++]`。

3）您正在按升序对值进行排序并按降序检查它们。所以这会导致一个错误。改变或改变`if(i[0]>i[1]&&i[1]>i[2]&&i[2]>i[3])` _`if(i[0]<i[1]&&i[1]<i[2]&&i[2]<i[3])``if(id[x]>i[x+])``if(id[x]<i[x+])`

4 您在代码中使用`goto`语句。但`goto`不推荐，因为它是一种错误的编程实践。goto 在没有任何函数调用的情况下转发或恢复执行过程。这与结构化编程方法背道而驰。所以不喜欢`goto`陈述。您可以通过使用两个`for()`循环轻松解决它。

# validation - 测试 Salesforce 数据验证而不激活它们

> ID：11020775
> 
> 赞同：1
> 
> 时间：2012-06-13T18:07:25.977
> 
> 标签：validation, salesforce

在[“验证规则注意事项”中，](http://na8.salesforce.com/help/doc/en/fields_validation_considerations.htm)有一条注释：

“设计不佳的验证规则可能会阻止用户保存有效数据。*请确保在激活之前彻底测试验证规则。* ”

如何在不激活的情况下测试验证规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:22:38.627

我相信他们指的是首先在[开发人员](http://www.developerforce.com/events/regular/registration.php?d=70130000000EjHb)或[沙盒](http://www.salesforce.com/platform/cloud-infrastructure/sandbox.jsp)环境中对其进行测试。

# c# - 是否有类似 SmartHeap 的托管 .NET 代码解决方案？

> ID：11020777
> 
> 赞同：1
> 
> 时间：2012-06-13T18:07:32.593
> 
> 标签：c#, .net

是否有任何类似于 SmartHeap 的解决方案，用于优化内存操作，用于托管 C# 代码 (.net)？

[http://www.microquill.com/smartheap/index.html](http://www.microquill.com/smartheap/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:11:08.533

.NET 运行时负责所有内存操作。没有办法覆盖内存分配器，因为这样做会极大地改变 GC 的运行方式，尤其是考虑到它的压缩。

话虽如此，这可能在 .NET 中提供的好处要少得多，因为在 .NET 世界中对象分配要便宜得多，因为内存池已经由 CLR“管理”，并且分配新对象不一定会触发新对象内存（通常它只是清除和使用已分配的内存）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:39:24.630

SmartHeap 的名气，我当然记得 15 年前的事，就是它可以避免争用堆锁。托管程序的堆与本机程序使用的堆没有太多共同之处，像 SmartHeap 这样的产品肯定不会有任何用处。

但它确实有相同类型的锁。它不像本地代码那样严重，垃圾收集堆的堆分配*非常*快，它只是一个指针增量。本机堆分配器必须做更多的工作以避免碎片。因此，两个或多个托管线程同时分配的可能性*并不*大。

然而，出于完全不同的原因，.NET CLR*确实*支持多个堆。该功能在 Windows 的服务器版本上自动启用。您可以通过使用app.exe.config 文件中的[`<gcServer>`元素来有意强制启用它。](http://msdn.microsoft.com/en-us/library/ms229357.aspx)一个副作用是锁竞争非常低，真正的目的是同时在多个线程上收集垃圾。

您可以打开它，看看它是否有任何明显的不同。请注意，它确实会消耗更多内存，并且垃圾收集暂停在交互式 UI 类型的程序中可能很明显。后台收集不适用于服务器 GC，它将在[.NET 4.5中可用](http://channel9.msdn.com/posts/Maoni-Stephens-CLR-45-Server-Background-GC)

# php - 配置 vim 以显示 PHP 函数的预期变量

> ID：11020783
> 
> 赞同：3
> 
> 时间：2012-06-13T18:07:59.630
> 
> 标签：php, vim

PHP 有一些非常不一致的函数参数（例如，有时是 first `haystack`， then `needle`，有时是相反的）。我希望 vim 以某种方式暗示预期的参数。我主要关心集成的 PHP 函数，而不是特定于项目的函数。这可以设置/配置吗？

我的想法是我输入：

`strpos(`

vim 告诉我它期望的通知`$haystack, $needle`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:42:01.500

你用的是什么版本的 Vim？

在没有任何额外的插件或配置的情况下，`<C-x><C-o>`在输入几个内置函数的字母后点击，您应该会得到全功能菜单*和*一个显示当前所选函数签名的小预览窗口。见`:help compl-omni`和`:help ft-php-omni`

使用`strpos(`，您应该得到：

```
strpos(string haystack, mixed needle [, int offset] | int 
```

您可能想试试[这个稍微好一点的 PHP 全方位完成脚本](http://www.vim.org/scripts/script.php?script_id=3171)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:22:32.297

优秀的 vim 插件[PIV](https://github.com/spf13/PIV)做了一些非常相似的事情。如果你按下`shift-K`一个函数，你会得到一个函数手册页的 in-vim 离线视图——它不仅显示函数期望的参数，还显示如何使用它们。

这只是 PIV 的有用功能之一。`<tab>`例如，当您按下函数的括号时，它还可以使用已知变量自动填充参数。（我确实相信这需要安装 SuperTab）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:11:36.920

[标签列表](http://vim-taglist.sourceforge.net/)可能会对您有所帮助。请参阅此[相关答案](https://stackoverflow.com/questions/3191016/vim-show-function-hints-or-signature-for-php)

# c# - MongoDb 传递谓词参数

> ID：11020792
> 
> 赞同：1
> 
> 时间：2012-06-13T18:08:31.770
> 
> 标签：c#, .net, mongodb, iqueryable, mongodb-.net-driver

例如，在 MongoDb 中，我可以将谓词传递给可查询的实例

```
DataBase.GetCollection<BsonDocument>("entity")
    .AsQueryable<Entity>()
    .Where(item=>item.id ==5); 
```

但现在我有这样的功能

```
IEnumerbale QueryData(Predicate<Entity> condition)
{
    this.DataBase.GetCollection<BsonDocument>("entity")
        .AsQueryable<Entity>()
        .Where(item=> condition(item));
} 
```

但这不起作用并告诉我：

> 不支持的 where 子句：。

这是设计好的吗？有什么解决方法吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:38:03.830

你甚至没有传递一个表达式。您的条件对 MongoDB 来说是一个完全不透明的函数。

您需要传入一个`Expression<Func<Entity,bool>>`并调用 Where 像这样：

```
Where(condition) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:17:54.210

Where 子句必须转换为发送到服务器的 MongoDB 查询。当您像这样传入任意 Predicate 时，LINQ 层不知道将其翻译成什么。所以不能支持那种类型的开放式 Where 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T17:27:22.007

传递 Lambda 表达式作为参数来过滤来自 mongodb 集合的数据。您的数据过滤功能可能是

```
public IEnumerable<BsonDocument> FindAllWithPredicate(Func<BsonDocument, bool> condition)
{
    return Collection.AsQueryable().Where(condition).ToArray();
} 
```

谓词生成器.cs

```
public static class PredicateBuilder
{
    public static Expression<Func<T, bool>> True<T>()
    {
        return f => true;
    }

    public static Expression<Func<T, bool>> False<T>()
    {
        return f => false;
    }

    public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expr1,
        Expression<Func<T, bool>> expr2)
    {
        var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, bool>>
            (Expression.OrElse(expr1.Body, invokedExpr), expr1.Parameters);
    }

    public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> expr1,
        Expression<Func<T, bool>> expr2)
    {
        var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, bool>>
            (Expression.AndAlso(expr1.Body, invokedExpr), expr1.Parameters);
    }
} 
```

通过谓词生成器生成 lambda 表达式

```
public static class PredicateBuilderStore
{
    public static Func<BsonDocument, bool> GetPredicateForBsonDocument(Entity entity)
    {
        var predicate = PredicateBuilder.True<BsonDocument>();            
        predicate = predicate.And(d => d.GetElement({key}).Value == CompareWithValue);
        return predicate.Compile();
    }   
} 
```

如果您只想查询所有项目，您可以这样做：

```
return this.collection.Find(_=>true).ToArray(); 
```

# xml - iphone解析多个Xml文件

> ID：11020793
> 
> 赞同：0
> 
> 时间：2012-06-13T18:08:35.743
> 
> 标签：xml

我需要解析存储在文档目录中的 xml 文件。我正在使用 XmlParser 进行解析。

我在for循环中循环它

```
for (NSString *s in fileList){

    NSString *xmlPath1 =[xmlPath stringByAppendingFormat:@"/%@",s];

    xmlParser = [[XMLParser alloc] loadXMLByURL:xmlPath1];

} 
```

# iphone - 禁用搜索栏键盘中的“搜索”按钮

> ID：11020799
> 
> 赞同：1
> 
> 时间：2012-06-13T18:08:56.803
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uisearchbar

> **可能重复：**
> [如何禁用/启用 UISearchBar 键盘的搜索按钮？](https://stackoverflow.com/questions/9721668/how-can-i-disable-enable-uisearchbar-keyboards-search-button)

我们可以禁用搜索栏键盘上的“搜索”按钮吗？我想在用户在搜索栏中输入 3 个字符后启用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:22:42.170

显然，你不能那样做。你需要实现 UISearchBar 的委托

```
- searchBarSearchButtonClicked: 
```

您可以在您的委托中添加一个条件，例如：

```
 - (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar1 {
     if ([searchBar.text length] < 3){
          return;
     }
     else {
          // Do searching here or other stuffs
     }
} 
```

# sql - 如何格式化 SQL 表中的数字？

> ID：11020801
> 
> 赞同：0
> 
> 时间：2012-06-13T18:09:01.197
> 
> 标签：sql, sql-server, tsql

我需要帮助以特定方式格式化数字。

如果一个数字的小数点后三位或更少，我希望它保持不变。

如果一个数字有三个以上的有效数字，我希望第三个有效数字之后的所有数字都是数字的小数部分。

```
123 --> Stays the same
1234 --> 123.4 
```

如何才能做到这一点？

编辑：

```
1234567 --> 123.4567 
```

我在 SQL 2007 上，希望更新表中的值。该值存储为数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:01:33.350

这是一个数字解决方案：

```
UPDATE T SET NUM = NUM/POWER(10,FLOOR(LOG10(NUM))-2)
WHERE NUM>=1000 
```

或 SELECT 语句：

```
SELECT NUM, CASE WHEN NUM<1000 THEN NUM
    ELSE NUM/POWER(10,FLOOR(LOG10(NUM))-2) 
    END AS NewNUM
FROM T 
```

请注意，确切的结果可能会因 NUM 的数据类型而异。如果是 FLOAT 字段，如果 NUM 太大，它可能会舍入最后一个小数。如果它是 NUMERIC 类型，它将在末尾添加零。如果是 DECIMAL，则需要注意精度。请注意，这适用于已经提到的所有更新解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:30:32.650

这可以工作

```
SELECT 
   CASE WHEN Num > 999 THEN Num/10
   ELSE
      Num
   END As Num 
```

可能有更好的方法，但这是我能想到的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:38:15.157

假设只有整数值的字符串：

```
SELECT CASE WHEN LEN(Num) <= 3 THEN Num
    ELSE STUFF(Num,4,0,'.')
    END
FROM (VALUES('1234567'),('123'),('1234'),('12')) t(Num) --some sample values 
```

结果：

```
123.4567
123
123.4
12 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T18:45:10.157

你可以用字符串做到这一点。

```
CREATE TABLE T
( NUM NUMERIC(38,19) );

INSERT INTO T (NUM) VALUES ( 123456789 );
INSERT INTO T (NUM) VALUES ( 12345 );
INSERT INTO T (NUM) VALUES ( 123 );
INSERT INTO T (NUM) VALUES ( 1 );

SELECT CAST(
   CASE WHEN NUM < 999 THEN CAST(FLOOR(NUM) AS VARCHAR) 
        ELSE SUBSTRING(CAST(NUM AS VARCHAR), 1, 3) + '.' 
           + SUBSTRING(CAST(FLOOR(NUM) AS VARCHAR), 4, LEN(CAST(NUM AS VARCHAR)) - 3) 
    END AS NUMERIC(38, 19))
FROM T

UPDATE T
SET NUM = CAST(CASE WHEN NUM < 999 THEN CAST(FLOOR(NUM) AS VARCHAR) 
        ELSE SUBSTRING(CAST(NUM AS VARCHAR), 1, 3) + '.' 
           + SUBSTRING(CAST(FLOOR(NUM) AS VARCHAR), 4, LEN(CAST(NUM AS VARCHAR)) - 3) 
    END AS NUMERIC(38, 19)); 
```

我在 SQLFiddle 上放了一个工作[示例。](http://sqlfiddle.com/#!3/38b0a/21)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T20:57:10.243

[我在其他地方的交叉帖子上回答了这个问题](https://dba.stackexchange.com/questions/19216/special-formatting-of-numbers)，但为了完整起见：

```
WITH n(r) AS (
  SELECT 123 UNION ALL SELECT 1234 UNION ALL SELECT 1234567
)
SELECT LEFT(r, 3) + CASE 
  WHEN LEN(r) > 3 THEN '.' + SUBSTRING(RTRIM(r),4,38) ELSE '' END 
FROM n; 
```

# php - Xampp：网络浏览器不会显示本地主机页面

> ID：11020804
> 
> 赞同：11
> 
> 时间：2012-06-13T18:09:10.173
> 
> 标签：php, mysql, apache, xampp, localhost

我已经在 Windows7（64 位）上安装了 xampp。我想使用 PHP、Apache 和 MySql。服务器 Apache 和 MySql 服务在 Xampp 控制面板上正常运行。但是当我在我的网络浏览器上运行 localhost 时，它只显示正在连接。没有其他的。与以前的环境相比，它在 IIS 上运行良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T03:20:32.063

尝试在您的 cmd 上执行 netstat -a 并查看是否有任何其他服务在端口 80 上运行。您也可以使用 netstat -b 查找服务的名称，但这需要以管理员身份运行 cmd。最可能的罪魁祸首是在此端口上运行的其他一些服务不允许 Xampp 正常启动？你有像Skype这样的服务吗？如果是这样，这就是您无法访问特定页面的原因。您可以做的另一件事是进入 httpd.conf 并将监听更改为 80 以外的其他端口并进行测试`localhost:your selected port`。一旦更改端口进行测试，请不要忘记添加。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-01T17:22:04.580

如果您更改了端口号，则键入 localhost:'port number' 以进入 xampp 页面。

例如：如果您的端口号是 8080，则输入`localhost:8080`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:13:44.973

IIS 或任何其他程序（如 Skype）可能导致 Apache 无法启动。尽管它显示“正在运行”，但实际上并未运行。

为了解决这个问题，有一个简单的技巧：将 Apache 安装为服务并重新启动计算机。这在大多数情况下都会起作用，因为有很多保留端口 80 的程序很难找到这些程序并禁用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-16T20:43:36.090

如果不是端口，则转到 htdocs，删除仪表板文件和索引文件，一切顺利！:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-16T15:34:05.323

如果您将 apache 列表端口从 80 更改为 8080，那么 . . . 写 localhost:8080/your_URL ...它会工作:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-10T05:16:49.517

如果您有以下错误： *[Wed Jun 10 10:32:13.697671 2015] [core:warn] [pid 1408:tid 248] AH00098: pid file C:/xampp/apache/logs/httpd.pid overwritten -- Unclean shutdown以前的 Apache 运行？加载失败 /usr/local/lib/php/extensions/no-debug-zts-20060613/usr/local/Zend/lib/ZendExtensionManager.sote 不包含与服务器名称匹配的 ID*

我是从 Apache 错误日志文件中提取的。

然后你需要检查apache的运行过程，你也可以做命令，也可以使用GUI。我正在解释 GUI 方法，打开任务管理器（使用 ctrl+shift+esc）并进入进程列表并确保所有进程都可见，包括其他登录用户。并搜索 Apache 进程并结束它们。您已使用 XAmpp 或 wamp 控制面板运行它。

# binding - 对表单内的绑定字段求和，来自 cfc

> ID：11020807
> 
> 赞同：0
> 
> 时间：2012-06-13T18:09:17.427
> 
> 标签：binding, coldfusion, sum, cfc

我需要计算发票的总额。此发票是使用表单、金额、数量和税款字段创建的，这些字段的总和是通过 cfinput 中的绑定生成的。我无法计算所有行的总和，即总数。我尝试了一些操作，但没有得出解决方案

这是一个示例代码：

```
<cfform action="" method="post">
<cfloop from="1" to="3" index="i">

    Q.ta <cfinput type="text" name="quantita#i#" value="0"> 
    + 
    Importo <cfinput type="text" name="importo#i#" value="0"> 
    +
    Tax <cfinput type="text" name="iva#i#" value="0"> 
    = 
    Totale <cfinput type="text" name="totale#i#" value="0" bind="cfc:somma.getSomma({quantita#i#},{importo#i#},{iva#i#})">

    <br /><br />        

</cfloop> 
```

氟氯化碳：

```
<cfcomponent>
 <cffunction name="getSomma" access="remote" returntype="string">

    <cfargument name="quantita" default="0">
    <cfargument name="importo" default="0">
    <cfargument name="iva" default="0">

    <cfset totaleSomma=#evaluate((importo*quantita)*(1+iva))#>

    <cfreturn totaleSomma>
 </cffunction>  
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:19:32.110

如果您想遍历所有这些表单字段并获得“总计”，我认为您将需要创建一个 Javascript 函数。我的建议是放弃 cfform 并使用 jQuery 创建可编辑的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:16:52.690

好的，我找到了解决方案，我将 cfdiv 用于总计：

```
<cfparam name="var_tot" default="0">

<cfloop from="1" to="3" index="i">
<cfparam name="totale#i#" default="0">
<cfset var_tot = listappend(var_tot, "{totale"&#i#&"}")>
</cfloop>

<cfform action="" method="post">
<table>
<cfloop from="1" to="3" index="i">
<tr>    
    <td>Q.ta</td><td><cfinput type="text" name="quantita#i#" value="0"></td>  
    <td>Importo</td><td><cfinput type="text" name="importo#i#" value="0"> </td>
    <td>Tax</td><td><cfinput type="text" name="iva#i#" value="0"> </td>
    <td>Totale</td><td class="price"><cfinput type="text" name="totale#i#" value="0" bind="cfc:somma.getSomma({quantita#i#},{importo#i#},{iva#i#})" ></td>      
</tr>
</cfloop>
</table>
</cfform>

<cfdiv bind="url:divtot.cfm?InputText=#var_tot#" id="checktot"> 
```

divtot.cfm

```
<cfparam name="tot" default="0">
<cfset listval=url.InputText>

<cfloop index="i" list="#listval#" delimiters=",">
<cfset tot=tot+i>
</cfloop>

TOTALE: <cfoutput>#tot#</cfoutput> 
```

谢谢大家

# vb.net - vb.net 网络浏览器登录

> ID：11020808
> 
> 赞同：0
> 
> 时间：2012-06-13T18:09:18.833
> 
> 标签：vb.net

您好，我正在制作一个应用程序登录到 Nexon.net，我无法让它工作，因为文本字段似乎没有要使用的 ID `GetElementByID`....

这是网页[http://www.nexon.net/](http://www.nexon.net/)

这是我尝试过的代码，但它不起作用=/

```
Dim Username, Password As String
    Username = TextBox1.Text
    Password = TextBox2.Text

    WebBrowser1.Document.GetElementById("userID").SetAttribute("value", Username)
    WebBrowser1.Document.GetElementById("password").SetAttribute("value", Password)
    WebBrowser1.Document.GetElementById("gnt_login_submit").InvokeMember("click") 
```

我试图用它来验证登录但不起作用

```
If (Not WebBrowser1.Document.All.Item("gnt_play_button") Is Nothing) Then
        MsgBox("Incorrect Username/password , ", 0, "Login error!") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:21:17.530

改用`Document.All`：

```
WebBrowser1.Document.All("userName").SetAttribute("value", Username)
WebBrowser1.Document.All("passwordName").SetAttribute("value", Password)
WebBrowser1.Document.All("gnt_login_submitName").InvokeMember("click") 
```

而不是`id`，将元素的`name`属性值传递给`All`如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:51:23.227

您的代码工作正常，但有问题。您是否在页面加载时发送这些值

填写这个

```
 Private Sub WebBrowser1_DocumentCompleted(sender As Object, e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

        WebBrowser1.Document.GetElementById("userID").SetAttribute("value", "User")
        WebBrowser1.Document.GetElementById("password").SetAttribute("value", "Pass")
        WebBrowser1.Document.GetElementById("gnt_login_submit").InvokeMember("click")
    End Sub 
```

并检查

# php-5.3 - php5 --- 方法可见性问题

> ID：11020811
> 
> 赞同：1
> 
> 时间：2012-06-13T18:09:29.190
> 
> 标签：php-5.3

请查看下面给出的代码。

```
<?php
class Bar 
{
    public function test() {
        $this->testPrivate();
        $this->testPublic();
    }

    public function testPublic() {
        echo "Bar::testPublic\n";
    }

    private function testPrivate() {
        echo "Bar::testPrivate\n";
    }
}

class Foo extends Bar 
{
    public function testPublic() {
        echo "Foo::testPublic\n";
    }

    private function testPrivate() {
        echo "Foo::testPrivate\n";
    }
}

$myFoo = new foo();
$myFoo->test(); // Bar::testPrivate 
                // Foo::testPublic
?> 
```

在上面的例子中，当我们调用`$myFoo->test();`它时，它被称为类`testPrivate`，但是它是`Bar class` 如何被称为类的。`testPublic``Foo`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:58:36.870

因为 test() 不在 Foo 中，而是在 Bar 范围内运行。Bar 范围无法访问 Foo 私有方法。只需将 test() 添加到 Foo ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:24:17.257

`Bar.testPrivate`并且`Foo.testPrivate`必须是受保护的方法而不是私有方法。请参阅此处了解更多信息：

[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:27:52.443

事实上，可见性页面上的评论之一确实重申了这一点：

“私有方法从不参与覆盖，因为这些方法在子类中不可见。”

确实感觉有点奇怪，因为您会认为子类会以相同的方法名称覆盖父类，但私有方法并非如此，并且父类方法在这里优先，因此如果您最好使用受保护的方法想要覆盖。

# perl - Perl 中的今天日期，格式为 MM/DD/YYYY

> ID：11020812
> 
> 赞同：49
> 
> 时间：2012-06-13T18:09:30.610
> 
> 标签：perl, date, formatting

我正在开发一个 Perl 程序，并坚持（我认为是）一个微不足道的问题。我只需要以 '06/13/2012' 格式构建一个字符串（始终为 10 个字符，因此小于 10 的数字为 0）。

这是我到目前为止所拥有的：

```
use Time::localtime;
$tm=localtime;
my ($day,$month,$year)=($tm->mday,$tm->month,$tm->year); 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-13T18:13:22.463

您可以快速完成，只需使用一个[POSIX](http://p3rl.org/POSIX)函数。如果您有一堆带有日期的任务，请参阅模块[DateTime](http://p3rl.org/DateTime)。

```
use POSIX qw(strftime);

my $date = strftime "%m/%d/%Y", localtime;
print $date; 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-06-13T18:14:44.587

您可以使用[`Time::Piece`](https://metacpan.org/module/Time::Piece)，它不需要安装，因为它是一个核心模块，并且自版本 10 以来已与 Perl 5 一起分发。

```
use Time::Piece;

my $date = localtime->strftime('%m/%d/%Y');
print $date; 
```

**输出**

```
06/13/2012 
```

### 更新

您可能更喜欢使用该`dmy`方法，该方法采用单个参数，该参数是在结果字段之间使用的分隔符，并且避免必须指定完整的日期/时间格式

```
my $date = localtime->dmy('/'); 
```

这会产生与我原来的解决方案相同的结果

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-13T21:11:00.773

```
use DateTime qw();
DateTime->now->strftime('%m/%d/%Y') 
```

表达式返回`06/13/2012`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-13T18:45:10.030

如果你喜欢以艰难的方式做事：

```
my (undef,undef,undef,$mday,$mon,$year) = localtime;
$year = $year+1900;
$mon += 1;
if (length($mon)  == 1) {$mon = "0$mon";}
if (length($mday) == 1) {$mday = "0$mday";}
my $today = "$mon/$mday/$year"; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-14T06:04:12.207

Unix 系统的 Perl 代码：

```
# Capture date from shell
my $current_date = `date +"%m/%d/%Y"`;

# Remove newline character
$current_date = substr($current_date,0,-1);

print $current_date, "\n"; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-21T10:54:10.510

```
use Time::Piece;
...
my $t = localtime;
print $t->mdy("/");# 02/29/2000 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-14T10:31:22.717

使用 perl 中的内置函数“sprintf”可以轻松地用前导零格式化数字（文档包含：perldoc perlfunc）

```
use strict;
use warnings;
use Date::Calc qw();
my ($y, $m, $d) = Date::Calc::Today();
my $ddmmyyyy = sprintf '%02d.%02d.%d', $d, $m, $y;
print $ddmmyyyy . "\n"; 
```

这给了你：

14.05.2014

# django - django orm - 如何在其超类的子类的外键上使用 select_related()

> ID：11020813
> 
> 赞同：4
> 
> 时间：2012-06-13T18:09:40.977
> 
> 标签：django, inheritance, orm

我一直发现 Django orm 对子类模型的处理非常漂亮。这可能就是我遇到这样的问题的原因。

取三个模型：

```
class A(models.Model):
    field1 = models.CharField(max_length=255)

class B(A):
    fk_field = models.ForeignKey('C')

class C(models.Model):
    field2 = models.CharField(max_length=255) 
```

因此，现在您可以查询`A`模型并获取所有`B`可用的模型：

```
the_as = A.objects.all()
for a in the_as:
    print a.b.fk_field.field2 #Note that this throws an error if there is no B record 
```

这样做的问题是您正在查看大量数据库调用来检索所有数据。

现在假设您想要检索`A`数据库中所有模型的 QuerySet，但同时包含所有子类记录和子类的外键记录，`select_related()`用于将您的应用程序限制为单个数据库调用。你会写一个这样的查询：

```
the_as = A.objects.select_related("b", "b__fk_field").all() 
```

一个查询返回所有需要的数据！惊人的。

除了没有。因为这个版本的查询正在做自己的过滤，即使`select_related`根本不应该过滤任何结果：

```
set_1 = A.objects.select_related("b", "b__fk_field").all() #Only returns A objects with associated B objects
set_2 = A.objects.all() #Returns all A objects
len(set_1) > len(set_2) #Will always be False 
```

我使用 django-debug-toolbar 检查查询并发现问题。生成的 SQL 查询使用`INNER JOIN`将`C`表连接到查询，而不是`LEFT OUTER JOIN`像其他子类字段一样：

```
SELECT "app_a"."field1", "app_b"."fk_field_id", "app_c"."field2"
FROM "app_a" 
    LEFT OUTER JOIN "app_b" ON ("app_a"."id" = "app_b"."a_ptr_id") 
    INNER JOIN "app_c" ON ("app_b"."fk_field_id" = "app_c"."id"); 
```

似乎如果我只是将 更改`INNER JOIN`为`LEFT OUTER JOIN`，那么我会得到我想要的记录，但这在使用 Django 的 ORM 时对我没有帮助。

这是`select_related()`Django ORM 中的错误吗？有什么解决方法，还是我只需要直接查询数据库并自己映射结果？我应该使用 Django-Polymorphic 之类的东西来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:47:59.980

它看起来像一个错误，特别是它似乎忽略了 A->B 关系的可为空性质，例如，如果您在 A 中有一个对 B 的外键引用而不是子类化，那么该外键当然可以为空并且django 会使用左连接。您可能应该在 django 问题跟踪器中提出这个问题。您也可以尝试使用 prefetch_related 而不是 select_related 可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:05:12.860

我找到了解决这个问题的方法，但我会等待一段时间来接受它，希望我能得到一些更好的答案。

需要从基础 SQL 中删除`INNER JOIN`创建的，以便结果不会被数据库中的记录过滤。所以新的查询需要把参数留在外面：`select_related('b__fk_field')``B``b__fk_field``select_related`

```
the_as = A.objects.select_related('b') 
```

但是，这迫使我们每次`C`从对象访问对象时都调用数据库`A`。

```
for a in the_as:
    #Note that this throws an DoesNotExist error if a doesn't have an
    #associated b
    print a.b.fk_field.field2 #Hits the database everytime. 
```

解决这个问题的方法是`C`通过一个查询从数据库中获取我们需要的所有对象，然后让每个`B`对象手动引用它们。我们可以这样做，因为访问`B`检索到的对象的数据库调用将具有`fk_field_id`引用其关联`C`对象的 ：

```
c_ids = [a.b.fk_field_id for a in the_as] #Get all the C ids
the_cs = C.objects.filter(pk__in=c_ids) #Run a query to get all of the needed C records
for c in the_cs:
    for a in the_as:
        if a.b.fk_field_id == c.pk: #Throws DoesNotExist if no b associated with a
            a.b.fk_field = c
            break 
```

我确信有一种功能性的方法可以在没有嵌套循环的情况下编写它，但这说明了正在发生的事情。这并不理想，但它为所有数据提供了绝对最少的数据库命中数——这正是我想要的。

# linq - LINQ 实体框架 - 无法删除该对象，因为它在 ObjectStateManager 中找不到

> ID：11020815
> 
> 赞同：2
> 
> 时间：2012-06-13T18:09:50.740
> 
> 标签：linq, entity-framework

我正在使用实体框架。我正在尝试从 linq 获取结果，然后对它们进行删除：

```
 IEnumerable<tblAVAL> tblval = db.tblVALs.Where(p => p.PgrID == prid);
    db.DeleteObject(tblval);
    db.SaveChanges(); 
```

注意`tblval`返回一个集合。我收到以下消息：

> 无法删除该对象，因为它在 ObjectStateManager 中找不到。

如果我执行以下操作，它会起作用：

```
 tblAVAL tblval = db.tblVALs.First(p => p.PgrID == prid);
    db.DeleteObject(tblval);
    db.SaveChanges(); 
```

如何使用返回多于 1 行的集合删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:15:07.683

当您将集合传递给 DeleteObject 方法时，它会尝试映射 Collection 对象，因为它是一个实体。您需要做的是迭代集合并删除项目。

```
foreach( var tblav in db.tblVALs.Where(p => p.PgrID == prid))
    db.DeleteObject(tblav);

db.SaveChanges(); 
```

EntityFramwork 不支持批量删除、更新和插入。[http://magiq.codeplex.com](http://magiq.codeplex.com)有一个 Linq-to-Sql 和 EntityFramework 的实现，但没有所有功能。也许所做的符合您的需求。

# ruby-on-rails - 简单的黄瓜测试问题

> ID：11020817
> 
> 赞同：1
> 
> 时间：2012-06-13T18:09:59.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, cucumber, bdd

我在黄瓜测试中设置了一个正则表达式

`Then /I should see "(.*)" before "(.*)"/ do |string1, string2|`

在下面的声明中我说

`page.body.should =~ regexp`

我的正则表达式在哪里

`regexp = /#{string1}.*#{string2}/m`

这是场景

```
Scenario: sort movies alphabetically
  When I follow "Movie Title"
  Then I should see "2001: A Space Odyssey" before "Aladdin" 
```

但是当我运行测试时，我收到了这个错误

```
expected: /2001: A Space Odyssey.*Aladdin/m
       got: "<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n<title>Rotten Potatoes!</title>\n<link href=\"/assets/application.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\">\n<script src=\"/assets/application.js\" type=\"text/javascript\"></script>\n</head>\n<body>\n<h1 class=\"title\">Rotten Potatoes!</h1>\n<div id=\"main\">\n<h1>All Movies</h1>\n<form accept-charset=\"UTF-8\" action=\"/movies\" id=\"ratings_form\" method=\"get\">\n<div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"✓\"></div>\n<input id=\"title_sort\" name=\"title_sort\" type=\"hidden\" value=\"true\">\n\nInclude:\nG\n<input id=\"ratings_G\" name=\"ratings[G]\" type=\"checkbox\" value=\"1\">\nPG\n<input id=\"ratings_PG\" name=\"ratings[PG]\" type=\"checkbox\" value=\"1\">\nPG-13\n<input id=\"ratings_PG-13\" name=\"ratings[PG-13]\" type=\"checkbox\" value=\"1\">\nNC-17\n<input id=\"ratings_NC-17\" name=\"ratings[NC-17]\" type=\"checkbox\" value=\"1\">\nR\n<input id=\"ratings_R\" name=\"ratings[R]\" type=\"checkbox\" value=\"1\"><input id=\"ratings_submit\" name=\"commit\" type=\"submit\" value=\"Refresh\">\n</form>\n\n<table id=\"movies\">\n<thead><tr>\n<th class=\"hilite\"><a href=\"/movies?&amp;sort=title\" id=\"title_header\">Movie Title</a></th>\n<th>Rating</th>\n<th><a href=\"/movies?&amp;sort=release_date\" id=\"release_date_header\">Release Date</a></th>\n<th>More Info</th>\n</tr></thead>\n<tbody id=\"movielist\"></tbody>\n</table>\n<a href=\"/movies/new\">Add new movie</a>\n\n</div>\n</body>\n</html>\n" (using =~)
  Diff:
  @@ -1,2 +1,44 @@
  -/2001: A Space Odyssey.*Aladdin/m
  +<!DOCTYPE html>
  +<html>
  +<head>
  +<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  +<title>Rotten Potatoes!</title>
  +<link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
  +<script src="/assets/application.js" type="text/javascript"></script>
  +</head>
  +<body>
  +<h1 class="title">Rotten Potatoes!</h1>
  +<div id="main">
  +<h1>All Movies</h1>
  +<form accept-charset="UTF-8" action="/movies" id="ratings_form" method="get">
  +<div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  +<input id="title_sort" name="title_sort" type="hidden" value="true">
  +
  +Include:
  +G
  +<input id="ratings_G" name="ratings[G]" type="checkbox" value="1">
  +PG
  +<input id="ratings_PG" name="ratings[PG]" type="checkbox" value="1">
  +PG-13
  +<input id="ratings_PG-13" name="ratings[PG-13]" type="checkbox" value="1">
  +NC-17
  +<input id="ratings_NC-17" name="ratings[NC-17]" type="checkbox" value="1">
  +R
  +<input id="ratings_R" name="ratings[R]" type="checkbox" value="1"><input id="ratings_submit" name="commit" type="submit" value="Refresh">
  +</form>
  +
  +<table id="movies">
  +<thead><tr>
  +<th class="hilite"><a href="/movies?&amp;sort=title" id="title_header">Movie Title</a></th>
  +<th>Rating</th>
  +<th><a href="/movies?&amp;sort=release_date" id="release_date_header">Release Date</a></th>
  +<th>More Info</th>
  +</tr></thead>
  +<tbody id="movielist"></tbody>
  +</table>
  +<a href="/movies/new">Add new movie</a>
  +
  +</div>
  +</body>
  +</html>
   (RSpec::Expectations::ExpectationNotMetError)
  ./features/step_definitions/movie_steps.rb:33:in `/I should see "(.*)" before "(.*)"/'
  features/sort_movie_list.feature:26:in `Then I should see "2001: A Space Odyssey" before "Aladdin"' 
```

有什么建议么？我假设我的错误出现在我的正则表达式中，但我找不到有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:50:06.293

好的，很高兴有帮助！回答这样我就可以获得堆栈溢出业力......您的模板需要列出电影，或者您的场景需要填充您正在寻找的数据。

# wcf - WCF - 验证客户端是否需要服务证书？

> ID：11020818
> 
> 赞同：9
> 
> 时间：2012-06-13T18:10:00.250
> 
> 标签：wcf, certificate, client-certificates

我认为我的 WCF 身份验证心智模型存在差距，希望有人可以帮助我填补它。

所以，我正在创建一个 WCF 服务，并希望让客户端使用证书和消息级安全性进行身份验证。我希望服务使用链信任来验证这些，这样我就不需要在服务上安装每个客户端证书。目前，我对让服务向客户端进行身份验证不感兴趣。

这是我对执行此操作所需的理解：

1.  客户端需要由服务端信任的 CA 签名的证书。
2.  该服务需要为该 CA 安装 CRL。
3.  服务配置应启用消息安全性，指定 clientCredentialType="Certificate"，并为客户端证书验证指定链式信任。
4.  客户端配置应启用消息安全性，指定 clientCredentialType="Certificate"，以及告诉如何在存储中查找客户端证书的端点行为。

客户端向服务发出请求，发送其证书。该服务看到客户端的证书由其受信任的 CA 签名并允许请求通过。

现在，我发现的此过程的所有演练还包括为服务创建证书的步骤。他们都没有解释这是为了什么，这让我很生气。如果我只想对客户端进行身份验证，为什么需要服务证书？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T19:14:54.620

你说的对。理论上不需要服务器证书，实际上 wcf 强制您使用一个。好消息是您应该为服务器使用一个虚拟证书，并将 ProtectionLevel 设置为 SignOnly。我建议阅读[这篇文章](http://webservices20.blogspot.co.il/2012/06/12-common-wcf-interop-confusions.html)，它讨论了类似的场景并且最相关。

# java - log4j 控制台警告

> ID：11020819
> 
> 赞同：0
> 
> 时间：2012-06-13T18:10:02.357
> 
> 标签：java, eclipse, log4j

我收到两个控制台警告：

```
log4j:WARN No appenders could be found for logger (org.roussev.selenium4j.MainTestCase).
log4j:WARN Please initialize the log4j system properly. 
```

以下是我的 log4j.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

  <appender name="appender" class="org.apache.log4j.FileAppender">
    <param name="File" value="selenium4j.log"/>
    <param name="Append" value="false"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %p - %m%n"/>
    </layout>
  </appender>

  <appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out"/> 
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %p - %m%n"/>
    </layout>
  </appender>

  <root>
    <priority value ="DEBUG"/>
    <appender-ref ref="appender"/>
    <appender-ref ref="console"/>
  </root>

</log4j:configuration> 
```

我不确定为什么会出现此错误。xml对我来说似乎很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:16:25.740

此不具描述性消息的最常见原因是::

log4j.xml 未正确添加到您的类路径中。

在这里查看更多::: [https://stackoverflow.com/a/6616858/1085285](https://stackoverflow.com/a/6616858/1085285)

# php - 在表单中使用 zend 框架过滤器的最佳方式是什么？

> ID：11020822
> 
> 赞同：0
> 
> 时间：2012-06-13T18:10:15.087
> 
> 标签：php, forms, zend-framework, frameworks, filter

所以，我在 Zend Framework 的表单中使用过滤器时遇到了问题。

当您在表单元素上设置过滤器时，它会以各种方式过滤提供给元素的数据。因此，如果我在表单上调用 isValid()，'Int' 过滤器会将字符串“1”转换为 int 1。但如果我将元素的值设置为字符串“1”，该值仍将转换为一个整数 1。

这种行为给我带来了问题。例如，根据企业的规则，所有浮点值必须乘以 100 才能保存到 db（是的，这很糟糕）。所以，我为此创建了一个过滤器，10 变为 1000。但是当填充表单时，1000 变为 100000。

我想要一种方法来做到这一点，而无需在模型中工作，仅在形式中。所以，我想创建一个标志，以指定何时调用过滤器。

有没有更好的方法来做到这一点？我发誓我确实四处寻找过，但我什么也没找到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:15:20.577

数据库中的内容和模型中的内容是模型层的一部分。在这种情况下，映射器应该负责转换。你不应该把它移到表单上，它实际上是视图层的一部分，而不是其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:34:36.667

我猜最好的方法是设置一个标志并扩展 getvalue 和 setvalue。

setValue 总是将数字除以每 100，而 getValue 总是将其乘以如果标志（这意味着过滤器）存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:56:33.030

如果你真的想在表单中进行这种过滤，你根本不需要弄乱 Zend_Form_Element_*。只需编写一对[过滤器](http://framework.zend.com/manual/en/zend.filter.writing_filters.html)。[Zend_Form](http://framework.zend.com/manual/en/zend.form.elements.html#zend.form.elements.filters)使用来自 Zend_Filter 的可用过滤器。
[Zend_filter](http://framework.zend.com/manual/en/zend.filter.writing_filters.html)有一个与 Zend_Validate 相同的可扩展接口，用于构建您自己的过滤器。
编写过滤器后，您可以在需要它们的任何地方使用它们。Zend_Form 过滤输入并在您的模型中将数据过滤回原始数据。

祝你好运。

# c# - 我需要对 IIS 中的虚拟目录进行一些说明

> ID：11020823
> 
> 赞同：1
> 
> 时间：2012-06-13T18:10:17.333
> 
> 标签：c#, visual-studio-2010

好的。也许我做的不对，但我可以告诉你我在做什么，也许有人可以帮忙。

我的应用程序位于 http:\localhost\MyApplication (c:\inetpub\wwwroot\MyApplication)。现在我在 http:\localhost\MyApplication\ImagePaths 中创建了一个虚拟目录（指向 d:\images 文件夹）

在我的一个 aspx 页面中，我试图列出 http:\localhost\MyApplication\ImagePaths 虚拟目录中的所有图像。
我试过： DirectoryInfo dir = new DirectoryInfo(Server.MapPath("~/ImagePaths")); 目录包含 c:\inetpub\wwwroot\images !!??!?!?

这样做的正确方法是什么？我只想在我的应用程序之外创建一个目录并列出我的应用程序中的内容。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:21:00.690

我会使用`<appSettings>`web.config 的部分并将其存储在那里：

```
<appSettings>
   <add key="ImagesPath" value="D:\Images"/>
</appSettings> 
```

然后从代码中，您可以通过以下方式访问它：

```
string imagesPath = ConfigurationManager.AppSettings["ImagesPath"]; 
```

和：

```
DirectoryInfo dir = new DirectoryInfo(imagesPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:17:29.080

~ 的意思是“从我的虚拟目录的根目录”。然后，您从那里构建一条不存在的路径，并询问它在磁盘上的位置。

即使该文件夹不存在，您也会得到答案。

为什么不使用配置来说明可以找到图像的位置，而不是硬编码虚拟目录？无论如何，只要您将这些 vdir 托管在不同的机器上，您当前的方法就会出现问题，因此最好使用 config 来存储 unc 路径。

# perl - 运行脚本时如何自动安装缺少的 perl 模块？

> ID：11020828
> 
> 赞同：1
> 
> 时间：2012-06-13T18:10:26.513
> 
> 标签：perl, cpan, perl-module

我正在寻找一种在我的脚本运行时自动安装缺少的 perl 模块的方法。我想使用 cpan plus，因为它“似乎”在 Windows 和 Linux 上都可用，但如果没有安装 cpan plus，我可能有办法降到标准 cpan。

那怎么办呢？当然有 cpan plus / cpan 模块，但是那些能够集成到脚本中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:21:00.340

检查此模块：[CPAN 中的 Carton Carton](http://search.cpan.org/~miyagawa/carton-v0.9.4/lib/Carton.pod)，因此首先您为脚本安装了所有模块，然后您将在 Carton 下制作特殊的依赖文件，结果在其他 PC 中使用此特殊文件为您的脚本安装所有依赖项。请阅读 CPAN 中此模块的说明。

我希望它会帮助你。

# javascript - 在 Jquery 中使用 queue() 和 filter() 链接会提高性能吗？

> ID：11020836
> 
> 赞同：2
> 
> 时间：2012-06-13T18:10:45.953
> 
> 标签：javascript, jquery, filter, queue, chaining

我正在清理一些 Jquery 代码。我一直在阅读，链接对性能有好处。

**问题：**
这是否还包括具有大量**queue() 和 filter()**的链？

例如，我有**unchained**：

```
var self = this,
    co = el.jqmData("panel"),
    pop = $('div:jqmData(id="'+co+'")'),
    wrap = pop.closest('div:jqmData(wrapper="true")');

if ( pop.is(":visible") ) {
    if ( pop.hasClass('switchable') && wrap.jqmData('switchable') ) {
        pop.css('display','none').addClass("switched-hide");
            self.panelWidth( true );                    
        } else {
            self.hideAllPanels("8");
            }
    } else {
        if ( pop.hasClass('switchable') && wrap.jqmData('switchable') ) {
            pop.css('display','block').removeClass("switched-hide");
            self.panelWidth( true );
        } else {
            self.hideAllPanels("8");

            if ( pop.hasClass('ui-popover-center') ){
                pop.css("left", (($(window).width() - pop.outerWidth()) / 2) + $(window).scrollLeft() + "px");
                }       

            pop.jqmData("fixed") == "top" ? 
                pop.css( "top", $( window ).scrollTop() + "px" ) :
                    pop.css( "bottom", wrap.outerHeight() - $( window ).scrollTop() - $.mobile.getScreenHeight() + "px" );

        ...there's more
        } 
```

首先，我不喜欢重复的代码。我现在正在玩这样的链式版本，恐怕我做得过火了：

```
 wrap.filter(':jqmData(switchable="true")')
      .find( pop )
           .filter('.switchable:visible')
                .css('display','none')
                .addClass("switched-hide")
                .end()
           .filter('.switchable:hidden')
                .css('display','block')
                .removeClass("switched-hide")
                .end()
           .queue(function(next){
                self.panelWidth( true )
                next();
                })
           .end()
      .end() // back to wrap
      .filter(':not(:jqmData(switchable="true")')
           .find( pop )
                .queue(function(next){
                     self.hideAllPanels("8")
                     next();
                     })
                .filter('.ui-popover-center')
                     .css("left", (($(window).width() - pop.outerWidth()) / 2) + $(window).scrollLeft() + "px")
                     .end()
                .filter(':jqmData(fixed="top")')
                     .css( "top", $( window ).scrollTop() + "px" )
                     .end()
                .filter(':jqmData(fixed="bottom")')
                     .css( "bottom", wrap.outerHeight() - $( window ).scrollTop() - $.mobile.getScreenHeight() + "px" )
                     .end()
                 ... 
```

**问题**：
是否存在链接 Jquery 对性能不利的情况，尤其是在使用 queue() 和 filter() 时，还是我应该继续进行？

感谢您的输入！

PS：以上没有测试。大概有几个错误。我正在寻找更多的概念信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:51:12.140

Unless your DOM and/or your js script is massive (or loopy), then you are unlikely to notice any performance difference between chained and unchained versions of the same code.

Personally, I would make my decision based on which is easier to develop and maintain. Readability of the code is probably the most important factor.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:34:17.653

Chaining will always be faster but I'd have to say the most important factor for speed would be referring to a local variable and having a good initial selector.

However, I think you should avoid chaining as excessive as your second method. I would stick with your first example!

# javascript - jQuery Validate 成功触发消息

> ID：11020839
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:10:56.217
> 
> 标签：javascript, jquery, ajax

我试图弄清楚一旦对用户名或电子邮件地址进行了远程函数的回调，如果返回的数据等于“n”，它应该触发显示消息。

JS：

```
$(document).ready(function() {
    var validator = $("form").validate({
        rules: {
            username: {
                minlength: 6,
                maxlength: 12,
                remote: {
                    type: 'post',
                    url: 'register/is_username_available',
                    data: {
                        'username': function() {
                            return $('#username').val();
                        }
                    },
                    dataType: 'json',
                    success: function(data) {
                        alert(data);
                        if (data == 'y') {
                            alert('available');
                        }
                        else {
                            alert('no available');
                        }
                    }
                }
            },
            email_address: {
                email: true,
                remote: {
                    type: 'post',
                    url: 'register/is_email_available',
                    data: {
                        'email_address': function() {
                            return $("#email_address").val();
                        }
                    },
                    dataType: 'json',
                    success: function(data) {
                        alert(data);
                        if (data == 'y') {
                            alert('available');
                        }
                        else {
                            alert('no available');
                        }
                    }
                }
            }
        },
        messages: {
            username: {
                remote: 'The username is already in use'
            },
            email_address: {
                remote: 'There is already an account set up that uses that email address!'
            }
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:47:46.907

您的“dataType”不正确..现在您告诉它获取和使用 JSON，另一方面，您正在输出或期望字符串或“text”/“html”而不是“json”

将您的 dataType 更改为 html 或 text，然后看看它是怎么做的。

如果你想把它保存在 json.. 你从 php 端的输出必须是

`{"response":"y"}`

并且您成功的javascript必须像

`if(data.response == "y")`

# sql-server - SQL Server 存储过程为空

> ID：11020842
> 
> 赞同：0
> 
> 时间：2012-06-13T18:11:05.640
> 
> 标签：sql-server, stored-procedures, data-retrieval

我有一个 SQL Server 存储过程，当我插入参数时它不返回任何数据......

```
ALTER PROCEDURE dbo.EncumBugSearch 
@year datetime
AS
BEGIN

SET NOCOUNT ON;

    select *
From dbo.BudgetEncumberedTbl as bet
where year(dateadd(month,-3,bet.be_dateposted)) = @year
order by be_dateposted desc

END
GO 
```

但是，当我为参数插入一个数字（即 2011 年）时，这不会返回任何内容，然后我会得到正确的结果......有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:17:28.663

你的参数是一个日期时间，[它应该是一个 int](http://msdn.microsoft.com/en-us/library/ms186313.aspx)。

# asp-classic - 针对 SQL 注入的经典 ASP 保护

> ID：11020846
> 
> 赞同：3
> 
> 时间：2012-06-13T18:11:22.793
> 
> 标签：asp-classic, sql-server-2000, sql-injection

我继承了大量目前缺少 SQL 注入保护的经典 ASP 代码，我正在努力解决它。我已经详细检查了这里提供的解决方案：[Classic ASP SQL Injection Protection](https://stackoverflow.com/questions/149848/classic-asp-sql-injection-protection) 在数据库方面，我有一个 Microsoft SQL server 2000 SP4

不幸的是，存储过程不是一种选择。

在研究了 php 的 mysql_real_escape_string ( [http://www.w3schools.com/php/func_mysql_real_escape_string.asp](http://www.w3schools.com/php/func_mysql_real_escape_string.asp) ) 之后，我在 ASP 中复制了它的功能。

我的问题是：

1) Microsoft SQL Server 2000 是否有任何其他特殊字符需要转义，而 MySQL 中不存在 ( \x00 , \n , \r , \ , ' , " , \x1a )

[2) 从我可以通过转义单引号和用单引号包围用户输入来防止 SQL 注入](https://stackoverflow.com/questions/139199/can-i-protect-against-sql-injection-by-escaping-single-quote-and-surrounding-use)中的答案吗？ 我读到“对'引用参数'过程发起攻击的一种方法是使用字符串截断。根据 MSDN，在 SQL Server 2000 SP4（和 SQL Server 2005 SP1）中，太长的字符串将被悄悄地截断。”

如何将其用于攻击（我真的无法想象这样的场景）以及防止它的正确方法是什么？

3) 还有其他我应该注意的问题吗？还有其他注入 SQL 的方法吗？

注意： 30 分钟的互联网搜索表明没有经典 ASP 库来防止 SQL 注入。是这样，还是我真的在搜索的基本任务上失败了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:16:25.800

最好的选择是使用**参数化**查询。关于如何完成，您必须查看：

*   [SQL 注入缓解：使用参数化查询](http://blogs.technet.com/b/neilcar/archive/2008/05/21/sql-injection-mitigation-using-parameterized-queries.aspx)

在 PHP 中，[PDO](http://php.net/manual/en/book.pdo.php)（和[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)）也允许开发人员使用参数化查询来避免 sql 注入。

* * *

## 更新

是的，您可以在子句中指定参数，`WHERE`为此您可以使用`ADODB.Command`如下示例的对象：

```
' other connection code
set objCommand = Server.CreateObject("ADODB.Command") 
...

strSql = "SELECT name, info FROM [companies] WHERE name = ?" _ 
    & "AND info = ?;" 
... 
objCommand.Parameters(0).value = strName 
objCommand.Parameters(1).value = strInfo 
... 
```

有关更多信息，请参阅我在上面发布的文章链接，或者如果您愿意，您可能想对该主题进行更多研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:19:33.890

我使用了两层防御：

*   创建一个“cleanparameter”函数，并且从查询字符串或表单值获取的每个调用都使用它调用该函数。该函数至少应该替换简单的引号，并将字符串截断为您传递的值。因此，例如，如果字段不能超过 100 个字符，您可以将其称为 x = cleanparameter(request.querystring("x"), 100)。这是第一道防线
*   使用参数化查询运行 SQL 指令

# php - XML over TCP 使用 PHP 和肥皂（或其他任何东西？）

> ID：11020851
> 
> 赞同：0
> 
> 时间：2012-06-13T18:11:39.593
> 
> 标签：php, xml, soap, tcp

我知道soap 可以通过http 发送XML，有没有办法使用它通过TCP 发送XML？或者有没有更好的方法来用 PHP 做到这一点？非常感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:13:05.697

您可以在 POST 请求中发送原始 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:59:57.663

使用 PHP，您可以作为客户端连接到任意端口（或作为服务器侦听任意端口上的连接）并通过 TCP 或您想要的任何其他数据发送/接收 XML。您根本不必使用 HTTP 或端口 80。

# asp.net-mvc - 为什么 ViewContext.DisplayMode.DisplayModeId 为空？

> ID：11020852
> 
> 赞同：4
> 
> 时间：2012-06-13T18:11:44.260
> 
> 标签：asp.net-mvc, mobile-website

我正在为 ASP.NET MVC 4 (RC) 视图使用自定义 DisplayModes 以允许自定义视图内容。

我对这个仅限移动应用程序的规则非常简单，并根据用户的内部配置文件/会话配置定义：

```
DisplayModeProvider.Instance.Modes.Insert(0,
    new DefaultDisplayMode("Tablet")
    {
        ContextCondition = (context =>
        {
            if (SessionManager.Current == null)
                return false;   // assume phone initially

            if (SessionManager.Current.Session.ScreenWidth > 600)
                return true;

            return false;
        })
    });

DisplayModeProvider.Instance.Modes.Insert(0,
    new DefaultDisplayMode("Phone")
    {
        ContextCondition = (context =>
        {                        
            if (SessionManager.Current == null ||
                SessionManager.Current.Session.ScreenWidth <= 600)
                return true;   // assume phone initially

            return false;
        })
    }); 
```

我现在可以创建使用 xxxx.Phone.cshtml 和 xxxx.Tablet.cshtml 的视图。呈现正确的视图。

但是， ViewContext.DisplayMode.DisplayModeId 总是返回空白。例如，在下面的页面中，我回显了显示模式和一个硬编码的 id，以告知渲染了哪个视图：

```
<div>@Model.Distance - @ViewContext.DisplayMode.DisplayModeId  - Tablet</div> 
```

我看到硬编码的平板电脑（或手机）值，但 DisplayModeId 始终为空白。

应该设置这个值吗？我认为这在以前的 MVC 4 beta 版本中有效，但我不是 100% 确定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:10:02.753

如果我没记错的话，这可能会在 ContextCondition 设置为 null 时发生。发生这种情况时，不会考虑所有其他 DisplayModeProvider。

您确定没有任何 ContextCondition 返回 null 吗？也许是因为委托内部的异常？您是否尝试过返回固定值（出于测试目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:13:15.227

获取模式`ViewContext.DisplayMode.DisplayModeId`是不切实际的。仅当您的视图名为 ViewName.Table.cshtml 时，该代码才有效。如果只有你的主人是_Master.Tablet.cshtml，该属性将返回空结果。

因此，只有当您的视图是正确的模式时，您才会得到正确的结果，这使得获取模式毫无意义。

# android - Android：如何删除另一个包中的共享首选项

> ID：11020853
> 
> 赞同：6
> 
> 时间：2012-06-13T18:11:49.423
> 
> 标签：android, android-intent, android-emulator

在我的 android 应用程序中，我编码以读取另一个 Android 应用程序的共享数据，然后从共享首选项中删除该数据。我的代码如下：

```
try {

     con = createPackageContext("com.testapp.ws", 0);
     SharedPreferences pref = con.getSharedPreferences("demopref", Context.MODE_PRIVATE);
     ipAdr = pref.getString("demostring", "No Value");
     pref.edit().remove("demopref").commit();
   } 
```

这显示以下错误：

```
06-12 11:52:07.400: E/ApplicationContext(3587): Couldn't rename file /data/data/com.testapp.ws/shared_prefs/demopref.xml to backup file /data/data/com.testapp.ws/shared_prefs/demopref.xml.bak 
```

我在我的其他应用程序中使用此方法来制作共享数据

```
 public void shareData(){
    String strShareValue = ip;
    SharedPreferences prefs = getSharedPreferences("demopref",Context.MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = prefs.edit();
    editor.putString("demostring", strShareValue);
    editor.commit();
} 
```

我怎样才能做到这一点 ？有什么要添加的清单文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:19:55.900

如果您在清单文件中使用[android:sharedUserId它应该可以工作。](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)这是我一直遇到的权限问题。

为此，您只需在两个应用程序的文件中添加一个标签，例如`android:sharedUserId="com.example.you"`您的`<manifest>`标签（当然，两个应用程序中的标签必须相同）。`AndroidManifest.xml``com.example.you`

清单文件的示例开始：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="package.name"
    android:versionCode="1"
    android:versionName="1.0"
    android:sharedUserId="com.example.you" >
... 
```

有关如何使这项工作的深入描述，请参阅我关于[如何在两个不同的 android 应用程序之间共享 SharedPreferences 文件的答案？](https://stackoverflow.com/questions/11025234/how-can-i-share-a-sharedpreferences-file-across-two-different-android-apps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:28:02.740

过去三天我一直在为 SharedPreferences 苦苦挣扎，但我想我终于自己解决了。以下是您应该尝试的一些技巧和陷阱，它们可能会对您（以及许多其他 stackoverflow 用户）有所帮助。

请注意，我所有的观察都是针对**ICS**（4.0.2 和 4.0.4）。

1.  如果更改`android:sharedUserId`，请**删除应用程序**，因为文件/文件夹权限不正确。因此，如果您已经发布了应用程序，则不应更改该值。
2.  如果您更改这些`Context.MODE_*`值，请**删除应用程序的数据**（或整个应用程序）以确保文件权限不正确。
3.  如果您使用`android:sharedUserId`，请务必**使用相同的证书签署应用程序**。
4.  为两个应用程序中的首选项使用**不同的文件名。**即使我使用了`createPackageContex()`.

这最终对我有用：

1.  `android:sharedUserId`我对这两个应用程序使用了相同的方法。（不一样`android:process`。）
2.  我用于`Context.MODE_WORLD_READABLE`阅读和编写本地首选项，以及阅读其他应用程序的首选项。
3.  我`Context.CONTEXT_IGNORE_SECURITY`打电话的时候用过`createPackageContext()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:08:00.170

虽然此处的其他解决方案在技术上适用于大多数情况，但 Android 为您提供的用于在进程/应用程序之间共享数据的框架是`ContentProvider`. 它可能看起来像很多额外的抽象，但它是保证工作的抽象。

虽然此组件的接口将调用镜像到数据库中，但底层数据结构可以是您喜欢的任何内容。具体来说，您可以返回 a`MatrixCursor`以响应提供`SharedPreferences`对象内容的查询，并且您可以为删除/更新调用实现 URI 方案，该方案可用于修改其他应用程序的首选项。

这是另一个曾经分享偏好的开发人员[的博客文章的链接。](http://ncsoftworks.com/forums/discussion/6/sharedpreferences-between-applications/#Item_1)`MatrixCursor`

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T18:14:30.107

您需要使用`MODE_WORLD_READABLE`而不是`MODE_PRIVATE`. 阅读[文档](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)以获取更多信息。

这是一个[教程](http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/)，可以进一步检查您是否还有更多错误。

# javascript - 如何阻止任何滑块向 URL 添加哈希标签

> ID：11020854
> 
> 赞同：5
> 
> 时间：2012-06-13T18:11:49.323
> 
> 标签：javascript, jquery, jquery-plugins, anythingslider

任何滑块都在添加哈希标签，例如`#&panel1-1`在 url 的末尾。

我试过`hashtags:false`了，但它不起作用。

有没有其他方法可以阻止它生成这些标签？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T18:33:48.737

尝试将其更改为`hashTags:false`.

注意标签中的大写 T。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T16:05:21.620

哦，嘿，如果您在 WordPress 中使用“AnythingSlide”，实际上在“设置”>“导航设置”>“显示主题标签”下有一个选项，无需触摸文件即可摆脱它。

# ruby-on-rails-3 - 删除链接调用show方法

> ID：11020858
> 
> 赞同：0
> 
> 时间：2012-06-13T18:11:57.643
> 
> 标签：ruby-on-rails-3, nested

当我单击帖子索引页面上帖子的删除链接时，我不断收到 GET`Show`操作请求，而不是调用`Destroy`操作。所以错误读取`Unknown action - The action 'show' could not be found for PostsController`

我认为问题与我有嵌套路由而不是常规路由这一事实有关。

我查看了 Google 和 StackOverflow 上的许多帖子，但没有一个答案对我有帮助。有什么建议么？

app/views/posts/index.html.erb

```
<% @posts.each do |post| %>
  <tr>
    <td><%= post.content %></td>
    <td>Username_placeholder</td>
    <td><%= post.created_at %></td>
    <td><%= link_to 'Delete', topic_post_path(@topic, post), confirm: 'Are you sure?', method: :delete %></td>
    <!-- topic_post_path(@topic,post) -->
  </tr>
<% end %> 
```

应用程序/控制器/posts_controller.rb

```
def index
  @topic = Topic.find(params[:topic_id])
  @forum = Forum.find_by_id(@topic.forum_id)
  @posts = @topic.posts.all
end

def destroy
  @post = Post.find(params[:id])
  @post.destroy
  redirect_to root_path
end 
```

应用程序/模型/topic.rb

```
class Topic < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
  belongs_to :forum
  accepts_nested_attributes_for :posts, :allow_destroy => true
  attr_accessible :name, :last_post_id, :posts_attributes
end 
```

应用程序/模型/post.rb

```
class Post < ActiveRecord::Base
  belongs_to :topic

  attr_accessible :content
end 
```

配置/路由.rb

```
Minforum::Application.routes.draw do
  root :to => "forums#index"
  resources :forums do
    resources :topics
  end
  resources :topics do 
    resources :posts
  end
end 
```

所有路线

```
 root        /                                           forums#index
    forum_topics GET    /forums/:forum_id/topics(.:format)          topics#index
                 POST   /forums/:forum_id/topics(.:format)          topics#create
 new_forum_topic GET    /forums/:forum_id/topics/new(.:format)      topics#new
edit_forum_topic GET    /forums/:forum_id/topics/:id/edit(.:format) topics#edit
     forum_topic GET    /forums/:forum_id/topics/:id(.:format)      topics#show
                 PUT    /forums/:forum_id/topics/:id(.:format)      topics#update
                 DELETE /forums/:forum_id/topics/:id(.:format)      topics#destroy
          forums GET    /forums(.:format)                           forums#index
                 POST   /forums(.:format)                           forums#create
       new_forum GET    /forums/new(.:format)                       forums#new
      edit_forum GET    /forums/:id/edit(.:format)                  forums#edit
           forum GET    /forums/:id(.:format)                       forums#show
                 PUT    /forums/:id(.:format)                       forums#update
                 DELETE /forums/:id(.:format)                       forums#destroy
     topic_posts GET    /topics/:topic_id/posts(.:format)           posts#index
                 POST   /topics/:topic_id/posts(.:format)           posts#create
  new_topic_post GET    /topics/:topic_id/posts/new(.:format)       posts#new
 edit_topic_post GET    /topics/:topic_id/posts/:id/edit(.:format)  posts#edit
      topic_post GET    /topics/:topic_id/posts/:id(.:format)       posts#show
                 PUT    /topics/:topic_id/posts/:id(.:format)       posts#update
                 DELETE /topics/:topic_id/posts/:id(.:format)       posts#destroy
          topics GET    /topics(.:format)                           topics#index
                 POST   /topics(.:format)                           topics#create
       new_topic GET    /topics/new(.:format)                       topics#new
      edit_topic GET    /topics/:id/edit(.:format)                  topics#edit
           topic GET    /topics/:id(.:format)                       topics#show
                 PUT    /topics/:id(.:format)                       topics#update
                 DELETE /topics/:id(.:format)                       topics#destroy 
```

# c# - 我应该删除事件处理程序吗？

> ID：11020867
> 
> 赞同：6
> 
> 时间：2012-06-13T18:12:34.353
> 
> 标签：c#, event-handling

我有一个 列表`Button`，并为每个按钮添加一个事件处理程序：

```
List<Button> buttons = new List<Button>();

for (int i = 0; i < 10; i++)
{
   Button btn = new Button();
   btn.Click = new RoutedEventHandler(OnbtnClick);
   buttons.Add(btn);
} 
```

然后我清除列表：

```
/* Have I to remove all events here (before cleaning the list), or not?
foreach (Button btn in buttons)
   btn.Click -= new RoutedEventHandler(OnbtnClick);
*/

buttons.Clear(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:14:38.313

当您清除列表时，您会清除对处理程序的所有引用以及它们。一旦你的处理程序离开作用域（也就是说当函数最终退出并且没有对象引用创建的处理程序时），垃圾收集器将开始删除所有相关的内存（当然按照它自己的时间表）。

所以不，您不需要手动删除处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:20:01.740

检查此解决方案：[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)

这就是你之后的样子。希望这能有所帮助。

# ios - 将 CLLocation 数据传递给 UITableView

> ID：11020871
> 
> 赞同：0
> 
> 时间：2012-06-13T18:12:46.170
> 
> 标签：ios, xcode, uitableview, ios5, cllocation

我正在尝试加载我的 UITableView 与当前位置的距离。我正在采取一些小步骤来尝试将纬度加载到 UITableView 中。我的 NSLog 读取的是正确的纬度/经度，但我的表读取的是 0.000。在这一点上，我不确定是我的内存管理还是其他原因。请帮忙。

我的 ViewController.h

```
#import <UIKit/UIKit.h>  
#import "CoreLocation/CoreLocation.h"

@interface TulsaMasterViewController : UITableViewController <CLLocationManagerDelegate>
{   
    NSArray *_barInfo;
    CLLocationManager *lm; 
    NSString *currentLat; 
}

@property (nonatomic, strong) NSArray *barInfo;
@property (nonatomic, strong) NSString *currentLat;

@end 
```

我的 ViewController.m

```
#import "TulsaMasterViewController.h" 
#import "TulsaDetailViewController.h"  
#import "Bars.h"
#import "BarDatabase.h"

@implementation TulsaMasterViewController

@synthesize barInfo = _barInfo;
@synthesize currentLat = _currentLat;

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{ 
    NSLog(@"%f", newLocation.coordinate.latitude);  
    NSLog(@"%f", newLocation.coordinate.longitude);

    currentLat = [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{  
    NSString *msg = [[NSString alloc]initWithString:@"Error obtaining location"]; 
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:msg delegate:nil cancelButtonTitle:@"Done" otherButtonTitles:nil];  
    [alert show];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {  
     return [self.barInfo count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) {
     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

//Get the object from the array.
Bars *barObj = [self.barInfo objectAtIndex:indexPath.row];

//Set the coffename.
cell.textLabel.text = barObj.barName;
cell.detailTextLabel.text = [NSString stringWithFormat:@"%f", currentLat];

// Set up the cell
return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([[segue identifier] isEqualToString:@"ShowDetails"]) {
    TulsaDetailViewController *detailViewController = [segue destinationViewController];

    detailViewController.detailItem = [self.barInfo objectAtIndex:[self.tableView indexPathForSelectedRow].row];
   }
}

- (void)awakeFromNib
{
[super awakeFromNib];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
   [super viewDidLoad];
   self.barInfo = [BarDatabase database].barInfo;
   lm = [[CLLocationManager alloc] init];
   lm.delegate = self;
   [lm startUpdatingLocation];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:17:09.263

您需要在调用 didUpdateToLocation 方法时更新您的表格视图

# c# - 使用 Openlayer 的动态 POI

> ID：11020879
> 
> 赞同：0
> 
> 时间：2012-06-13T18:13:38.767
> 
> 标签：c#, .net, openlayers, ashx, point-of-interest

OpenLayers 有一个很好的例子，我想重用它：

[http://openlayers.org/dev/examples/dynamic-text-layer.html](http://openlayers.org/dev/examples/dynamic-text-layer.html)

这个例子在我的电脑上运行良好。我想在上面的示例中使用我的 test.ashx 处理程序而不是 textfile.txt

你可以看到我已经用我的 .ashx 处理程序而不是 textfile.txt 替换了上述示例，请参见下面的代码。

 **```
var osm = new OpenLayers.Layer.OSM();  
      // create a vector layer for drawing
    vector = new OpenLayers.Layer.Vector("Editable Vectors");
    var layer = new OpenLayers.Layer.Vector("POIs", {
                    strategies: [new OpenLayers.Strategy.BBOX({resFactor: 1.1})],
                    protocol: new OpenLayers.Protocol.HTTP({
                        url: "test.ashx",
                        format: new OpenLayers.Format.Text()
                    })
                }); 
```** 

 **在 test.ashx 我的代码很简单。我已经在 url 上测试过并且工作正常。它只是打印给定示例中“textfile.txt”中可用的相同数据。见下文。**

 ****点标题描述图标
25,67 我的橙色标题 我的橙色描述** 

**test.ashx 中的代码**

```
public class Handler : IHttpHandler {

    public void ProcessRequest (HttpContext context) {

    context.Response.Write("point"+"\t"+"title"+"\t"+"description"+"\t"+"icon"+"\n"+
        "25,67"+"\t"+"my orange title"+"\t"+"my orange description");

    }

    public bool IsReusable {
    get {
        return false;
    }
    }
} 
```

我的目标是设计一个通过 .ashx 从数据库中获取数据的处理程序。但在此之前，我想确保这个简单的代码可以工作。但它不起作用。任何线索将不胜感激。**

# android - 使用识别器意图或键盘麦克风为 Android 应用程序添加语音到文本

> ID：11020883
> 
> 赞同：1
> 
> 时间：2012-06-13T18:13:46.923
> 
> 标签：android, android-softkeyboard, speech-to-text, recognizer-intent

我目前已经启动并运行了一个 RecognizerIntent 以便它返回一个可能的句子字符串列表给我。但是，我想对此进行改进。

当我按下我的编辑文本框时，我还可以按下键盘上的“麦克风”按钮，这也会将语音转为文本。但是，这种方式使用语音转文本要好得多，因为一旦从 android 键盘输入单词，它们都会被突出显示，并且可以选择以选择更准确的单词。我也在其他几部手机上试过这个，这种行为似乎是标准的。

我的问题是，我如何使用 RecognizerIntent 来拥有相同的功能。是否需要设置其他参数才能以这种方式使用它？或者有没有办法让我以编程方式“按下”麦克风按钮？

# c# - ASP NET MVC 验证安全问题

> ID：11020889
> 
> 赞同：1
> 
> 时间：2012-06-13T18:14:11.020
> 
> 标签：c#, asp.net-mvc, validation, domain-driven-design

我开始开发一个 ASP NET MVC 3 应用程序，并试图遵循一些好的 DDD 实践。我有以下情况想征求意见。系统功能之一是创建系统的一个或多个用户将参与的活动，例如会议。任何具有特定访问配置文件的用户都可以创建新活动，也许只有创建活动的用户才能更改她。问题是：插入此规则的正确位置是什么？

-> 在每个“活动”实体的设置器中？似乎打破了干燥。

-> 保存更改时在存储库中？在这种情况下，传递用户权限的正确时机是什么时候？此方法的另一个参数？在类构造函数中（在我的模型中，存储库是接口，如果我采用此选项，则依赖关系仅在实现存储库的基础设施层中是显式的？）

-> 控制器？它似乎与贫血模型合作。

顺便说一句，问题比比皆是……你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:44:51.377

如果您使用 ASP.NET Membership，您可以利用 Roles 和 Profile 提供程序并使用 Authorize 属性来限制对发生创建或编辑的实际视图的访问。例如，创建操作可以是：

```
[Authorize(Roles="Activity Admin")]
public ActionResult CreateActivity()
{
    return View();
} 
```

其中“活动管理员”是您的创建者角色。然后您的编辑可能如下所示：

```
[Authorize(Roles="Activity Admin")]
public ActionResult EditActivity(int id)
{
    Activity activity = ActivityRepository.GetActivityByID(id);

    if (activity.CreatorID != CurrentUser.ID)
    {
        return RedirectToAction("Activities");
    }

    return View(activity);
} 
```

该 if 语句进行检查以确保当前登录的用户是实际创建活动的用户。CurrentUser.UserID 可以替换为您用来检索当前登录用户的唯一 ID 的任何方法。我通常使用 ProfileBase 类来实现一个允许我跟踪当前用户信息的类。下面指向另一个 SO 问题的链接显示了如何做到这一点。

[我如何使用 Profilebase 类？](https://stackoverflow.com/questions/2889158/how-can-i-use-profilebase-class)

# git - 如何使用 TortoiseGit 将单个文件更改推送到两个分支？

> ID：11020891
> 
> 赞同：2
> 
> 时间：2012-06-13T18:14:11.747
> 
> 标签：git, commit, tortoisegit

我目前正在为仍在使用该版本的客户更改我的应用程序的旧版本，但我想将更改推送到我正在处理的另一个分支。

有没有一种简单的方法可以在 TortoiseGit 中执行此操作，而无需手动将文件复制到下一个分支然后再次推送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:22:17.380

您显然想[挑选](http://schacon.github.com/git/git-cherry-pick.html)，还有[另一个答案](https://stackoverflow.com/a/9416104/236871)告诉您如何去做。

# java - 从字符串中删除非 ASCII 不可打印字符

> ID：11020893
> 
> 赞同：21
> 
> 时间：2012-06-13T18:14:24.150
> 
> 标签：java, non-ascii-characters

我得到用户输入，包括非 ASCII 字符和不可打印字符，例如

```
\xc2d
\xa0
\xe7
\xc3\ufffdd
\xc3\ufffdd
\xc2\xa0
\xc3\xa7
\xa0\xa0 
```

例如：

```
email : abc@gmail.com\xa0\xa0
street : 123 Main St.\xc2\xa0 
```

所需的输出：

```
 email : abc@gmail.com
  street : 123 Main St. 
```

使用 Java 删除它们的最佳方法是什么？
我尝试了以下方法，但似乎不起作用

```
public static void main(String args[]) throws UnsupportedEncodingException {
        String s = "abc@gmail\\xe9.com";
        String email = "abc@gmail.com\\xa0\\xa0";

        System.out.println(s.replaceAll("\\P{Print}", ""));
        System.out.println(email.replaceAll("\\P{Print}", ""));
    } 
```

输出

```
abc@gmail\xe9.com
abc@gmail.com\xa0\xa0 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-13T18:39:42.327

你的要求不清楚。Java 中的所有字符`String`都是 Unicode 字符，因此如果您删除它们，您将得到一个空字符串。我假设您的意思是您要删除任何非 ASCII、不可打印的字符。

```
String clean = str.replaceAll("\\P{Print}", ""); 
```

在这里，表示可打印 ASCII 字符`\p{Print}` [的 POSIX 字符类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)`\P{Print}`，而是该类的补集。使用此表达式，所有*不可*打印的 ASCII 字符都将替换为空字符串。（额外的反斜杠是因为`\`在字符串文字中开始了转义序列。）

* * *

显然，所有输入字符实际上都是 ASCII 字符，代表不可打印或非 ASCII 字符的可打印编码。Mongo 对这些字符串应该没有任何问题，因为它们只包含纯可打印的 ASCII 字符。

这对我来说听起来有点可疑。我认为正在发生的事情是数据确实包含不可打印和非 ASCII 字符，而另一个组件（如日志框架）正在用可打印的表示替换这些。在您的简单测试中，您未能将可打印表示转换回原始字符串，因此您错误地认为第一个正则表达式不起作用。

这是我的猜测，但如果我误读了情况并且您确实需要去除文字`\xHH`转义，您可以使用以下正则表达式来完成。

```
String clean = str.replaceAll("\\\\x\\p{XDigit}{2}", ""); 
```

* * *

该类的 API 文档[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)很好地列出了 Java 正则表达式库支持的所有语法。有关所有语法含义的更多详细信息，我发现[Regular-Expressions.info 站点](http://www.regular-expressions.info/)非常有用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-13T18:47:47.113

使用[Google Guava](http://code.google.com/p/guava-libraries/)，[`CharMatcher`](https://guava.dev/releases/snapshot/api/docs/com/google/common/base/CharMatcher.html)您可以删除任何[不可打印的](https://guava.dev/releases/snapshot/api/docs/com/google/common/base/CharMatcher.html#invisible())字符，然后保留所有 ASCII 字符（删除任何重音符号），如下所示：

```
String printable = CharMatcher.INVISIBLE.removeFrom(input);
String clean = CharMatcher.ASCII.retainFrom(printable); 
```

不确定这是否是您真正想要的，但它会删除问题样本数据中以转义序列表示的任何内容。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-07-15T07:33:26.990

我知道可能为时已晚，但供将来参考：

```
String clean = str.replaceAll("\\P{Print}", ""); 
```

删除所有不可打印的字符，但包括`\n`（换行）、`\t`（制表符）和`\r`（回车），有时您希望保留这些字符。

对于该问题，请使用反转逻辑：

```
String clean = str.replaceAll("[^\\n\\r\\t\\p{Print}]", ""); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T18:17:49.877

你可以试试这段代码：

```
public String cleanInvalidCharacters(String in) {
    StringBuilder out = new StringBuilder();
    char current;
    if (in == null || ("".equals(in))) {
        return "";
    }
    for (int i = 0; i < in.length(); i++) {
        current = in.charAt(i);
        if ((current == 0x9)
                || (current == 0xA)
                || (current == 0xD)
                || ((current >= 0x20) && (current <= 0xD7FF))
                || ((current >= 0xE000) && (current <= 0xFFFD))
                || ((current >= 0x10000) && (current <= 0x10FFFF))) {
            out.append(current);
        }

    }
    return out.toString().replaceAll("\\s", " ");
} 
```

它适用于我从`String`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T18:17:42.700

您可以使用 java.text.normalizer

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-10T15:04:53.403

输入=>“**这个**\u7279**文本**\u7279**是我需要的**”输出=>“**这个文本是我需要的**”

如果您尝试从上述字符串中删除 Unicode 字符，则此代码将起作用

```
Pattern unicodeCharsPattern = Pattern.compile("\\\\u(\\p{XDigit}{4})");
Matcher unicodeMatcher = unicodeChars.matcher(data);
String cleanData = null;
if (unicodeMatcher.find()) {
    cleanData = unicodeMatcher.replaceAll("");
} 
```

# java - 使用 Gson 漂亮打印 JSON 字符串的问题

> ID：11020894
> 
> 赞同：17
> 
> 时间：2012-06-13T18:14:24.623
> 
> 标签：java, json, gson

有人可以建议为什么会发生这种情况......

我有一些代码可以漂亮地打印一些 JSON。为此，我正在使用[Gson 库](https://sites.google.com/site/gson/gson-user-guide)。

然而，虽然这样通常效果很好，但某些字符似乎无法正确显示。这是一个演示问题的简单代码：

```
//Creating the JSON object, and getting as String:
JsonObject json = new JsonObject();
JsonObject inner = new JsonObject();
inner.addProperty("value", "xpath('hello')");
json.add("root", inner);
System.out.println(json.toString());

//Trying to pretify JSON String:
Gson gson = new GsonBuilder().setPrettyPrinting().create();
JsonParser parser = new JsonParser();
JsonElement je = parser.parse(json.toString());
System.out.println(gson.toJson(je)); 
```

上述代码的输出是：

```
{"root":{"value":"xpath('hello')"}}
{
  "root": {
    "value": "xpath(\u0027hello\u0027)"
  }
} 
```

我该如何解决上述问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-13T19:01:13.847

使用此代码创建`Gson`对象：

```
Gson gs = new GsonBuilder()
    .setPrettyPrinting()
    .disableHtmlEscaping()
    .create(); 
```

该`disableHtmlEscaping()`方法*告诉* `gson`不要转义 HTML 字符，例如`<`, `>`, `&`, `=`, 和给你带来麻烦的单引号：`'`.

请注意，如果您在不使用附加标签的情况下将此类未转义的 JSON 呈现到`<script/> tag`HTML 页面中，这可能会导致麻烦。`<![CDATA[ ... ]]>`

[`JsonWriter`通过查看class](https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/stream/JsonWriter.java)的代码，您可以了解它是如何工作的，以及转义了哪些其他字符。

# java - 覆盖和超载视角

> ID：11020899
> 
> 赞同：0
> 
> 时间：2012-06-13T18:14:42.570
> 
> 标签：java

*   重载 - 同一类中具有不同签名的相同方法。

*   覆盖 - 子类中相同的方法签名不同的实现

如果我在父类中有一个重载的方法，子类是否会重载或覆盖这个特定的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:16:38.297

重载和覆盖不是相互排斥的。

```
class Parent {
    void foo() {}
    void foo(int a) {}
    void bar() {}
}

class Child extends Parent {
    void foo() {} // overriding and overloading
    void foo(double b) {} // overloading
    void bar() {} // overriding
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:18:32.743

实际上两者都是因为：

*   覆盖 - 它与父类中的方法具有相同的方法签名。
*   重载 - 它与父类具有相同的方法名称但签名不同。

# session - Magento 多域结帐问题

> ID：11020900
> 
> 赞同：1
> 
> 时间：2012-06-13T18:14:43.870
> 
> 标签：session, magento, cookies, session-cookies

我有一个 Magento 安装，其中多个域（domain1.com、domain2.com）共享一个结帐 URL（checkoutdomain.com）。问题是当我继续购物车并对新域执行操作时，我收到“购物车中没有物品”错误。由于某种原因，会话/cookie 没有传递到结帐域。

我正在运行 Magento 1.7。我去了`system/config/web/session`cookie 管理并在 cookie 域字段中尝试了以下所有值：

```
.domain.com
.domain.com/
http://www.domain.com
http://www.domain.com 
```

这里应该有别的东西吗？

我也有 cookie 路径字段空白（默认）并使用 http only 设置为是（默认）。

我不确定在这里还能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:51:36.103

我要检查的第一个地方是您的商店设置。请记住，您不能轻松地在多个网站之间共享购物车，只有商店和商店视图（使用 Magento 的命名法）。

假设没问题，您的下一个问题是确保所有域都使用相同的 PHP 会话。您可以通过告诉他们都使用相同的会话 ID 来做到这一点。Cookie 是解决此问题的理想解决方案，但 Cookie 不能跨完全不同的域工作。

这意味着我们必须明确告诉`checkoutdomain.com`会话我们希望加载。`SID`我们可以通过将会话 ID 作为GET 参数传递来强制 Magento 加载特定会话。您可以通过调用来获取此值`Mage::getModel("core/session")->getEncryptedSessionId()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:07:21.950

您应该在系统配置中设置`web/session/use_frontend_sid`为`yes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T11:12:46.593

您还应该记住，不指定 cookie 路径将使其默认为设置 cookie 时所在的当前路径。您应该将其默认为“/”以确保它是为站点全局设置的。

# php - PHP 中的事件监听器

> ID：11020903
> 
> 赞同：1
> 
> 时间：2012-06-13T18:14:57.423
> 
> 标签：php, event-listener

最近我一直在使用 JavaScript 中的事件侦听器，还开始研究一个基于浏览器的小型 irc 模块，这让我开始思考。是否可以在 php 脚本中添加一个事件监听器来更新变量、数组甚至直接从数据库中回显数据？

我已经阅读了[PHP Event-Listener best-practice implementation](https://stackoverflow.com/questions/4471183/php-event-listener-best-practice-implementation)等，但还没有真正理解这对我有什么帮助。也许我在这一点上很慢，但是如果有人可以向我解释如何设置一个事件侦听器来侦听 mysql-database 以进行更改，那将是一个很大的提升。

我不要求任何人为我编码，而是告诉我它是否有效，甚至可能解释如何。我不想让 javascript-intervall 每 100 毫秒检查一次 php 文件以保持聊天畅通，那样最终只会减慢它的速度。

如果我解释得不好，请这样说，我会努力做得更好。我没有最好的解释声誉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:18:18.327

PHP 没有办法监听来自 MySQL 的事件。MySQL 库不发送事件。MySQL 不会向 PHP 发送信息，除非 PHP 代码请求它。

如果你能弄清楚如何识别它们，你可以编写一个脚本来轮询更改。或者阅读 MySQL 查询日志并对此做出反应。但是 MySQL 中没有任何东西可以启动任何 PHP 代码。

# perl - Perl - eval 不捕获“使用”语句

> ID：11020911
> 
> 赞同：3
> 
> 时间：2012-06-13T18:15:40.200
> 
> 标签：perl

我想检测用户何时缺少必需的模块并打印一条友好的错误消息，说明他们需要安装什么。

到目前为止，我尝试将其放在脚本的开头：

```
eval {
    use IO::Uncompress::Gunzip qw(gunzip $GunzipError) ;
};
if ($@) {
    die "Error: IO::Uncompress::Gunzip not installed: $@";
} 
```

但是 Perl 似乎死在“使用”行而不是“死”行上，并且从不打印我的错误消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T18:39:45.783

```
use IO::Uncompress::Gunzip qw( gunzip $GunzipError ); 
```

简称

```
BEGIN {
   require IO::Uncompress::Gunzip;
   import IO::Uncompress::Gunzip qw( gunzip $GunzipError );
} 
```

和`BEGIN`块在编译后立即进行评估。这意味着您的代码可以：

1.  编译阶段：
    1.  编译`eval`语句。
        1.  编译`BEGIN`块。
            1.  编译`require IO::Uncompress::Gunzip;`
            2.  编译`import IO::Uncompress::Gunzip qw( gunzip $GunzipError );`
        2.  评估`BEGIN`块。
            1.  **评估`require IO::Uncompress::Gunzip;`**
            2.  评估`import IO::Uncompress::Gunzip qw( gunzip $GunzipError );`
    2.  编译`if`语句。
2.  运行阶段：
    1.  **评估（空） `eval`语句。**
    2.  评价`if`陈述。

如果步骤 1.1.2.1 中发生异常，则`eval`步骤 2.1 中的运行不会捕获它！

* * *

解决方案：

你从等同于的东西开始

```
BEGIN {
   require IO::Uncompress::Gunzip;
   import IO::Uncompress::Gunzip qw( gunzip $GunzipError );
} 
```

这是`require`您想要捕获的错误，因此只需在`eval`周围添加一个`require`：

```
BEGIN {
   eval { require IO::Uncompress::Gunzip }
      or die "Error: IO::Uncompress::Gunzip not installed: $@";

   import IO::Uncompress::Gunzip qw( gunzip $GunzipError );
} 
```

您还可以通过使用而不是延迟`use`编译（并因此评估）：`eval EXPR``eval BLOCK`

```
BEGIN {
   eval 'use IO::Uncompress::Gunzip qw( gunzip $GunzipError ); 1'
      or die "Error: IO::Uncompress::Gunzip not installed: $@";
} 
```

（我希望有一种很好的方法来确定是否安装了模块。即使第一个解决方案也会捕获其他错误，第二个甚至更多。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:34:01.933

这里发生的是模块在编译时被d，不管它在块`use`内的事实。`eval`

这也是为什么[naab 建议](https://stackoverflow.com/a/11020970/133939)从`eval BLOCK`一种形式到另一种形式的转变也有效的原因`eval EXPR`；表达式在运行时进行评估。更改`use`为`require`将尝试在运行时加载模块：

```
eval {
    require IO::Uncompress::Gunzip;
    IO::Uncompress::Gunzip->import( qw/gunzip $GunzipError/ ) ;
};
if ($@) {
    die "Error: IO::Uncompress::Gunzip not installed: $@";
} 
```

**输出**

> 错误：IO::Uncompress::Gunzip not installed: Can't locate IO/Uncompress/Gunzip.pm in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at - line 2.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:29:06.653

查看 Class::Load 的 try_load_class ( [CPAN](http://search.cpan.org/~drolsky/Class-Load-0.20/lib/Class/Load.pm) )

```
use Class::Load;
die "Error: IO::Uncompress::Gunzip not installed" if 
    (! try_load_class (IO::Uncompress::Gunzip)); 
```

但据我所知，您不能使用 Class::Load 导入 qw(gunzip $GunzipError)。

# c++ - 错误：从“int (*)()”到“long unsigned int”的无效转换

> ID：11020918
> 
> 赞同：0
> 
> 时间：2012-06-13T18:16:38.367
> 
> 标签：c++, winapi

我对 C++ 比较陌生，我正在尝试在这个论坛[http://www.blizzhackers.cc/viewtopic.php?p=2483118](http://www.blizzhackers.cc/viewtopic.php?p=2483118)上理解代码。我已经设法解决了大部分错误，但这让我很困惑，这是函数中的代码给我带来了问题。

```
void LoadDll(char *procName, char *dllName)
{
    HMODULE hDll;
    unsigned long cbtProcAddr;

    hDll = LoadLibrary(dllName);
    cbtProcAddr = GetProcAddress(hDll, "CBTProc"); // The error points to this line

    SetWindowsHookEx(WH_CBT, cbtProcAddr, hDll, GetTargetThreadIdFromProcname(procName));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:18:34.397

将定义更改`cbtProcAddr`为：

```
HOOKPROC cbtProcAddr; 
```

编译器很不高兴，因为您试图将指针类型的值存储在声明为保存整数的变量中。（您可能需要将结果转换为`GetProcAddress()`to `HOOKPROC`，因为该函数不知道指向函数的实际签名，但`SetWindowsHookEx()`调用中指针的使用意味着它与`HOOKPROC`函数指针的签名兼容类型。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:22:04.677

[`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212.aspx)返回 a `FARPROC`（查看编译器错误，它只是 的 typedef `int(*)()`）。`unsigned long`不是 a `FARPROC`，并且两者之间没有隐式转换。

我无法理解为什么你会将结果存储`GetProcAddress`在`unsigned long`. 如果您检索要存储函数指针的函数。使用正确的类型（[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990.aspx)接受 a `HOOKPROC`）并强制转换：

```
HOOKPROC cbtProcAddr;

hDll = LoadLibrary(dllName);
cbtProcAddr = reinterpret_cast<HOOKPROC>(GetProcAddress(hDll, "CBTProc")); 
```

# python - 第一次写脚本，不知道用什么语言（解析excel等文件）

> ID：11020919
> 
> 赞同：1
> 
> 时间：2012-06-13T18:16:40.427
> 
> 标签：python, excel, file-io, scripting

我有一个 excel 电子表格（版本 1997-2003）和另一个非特定的数据库文件（一个 .csy 文件，我假设它可以被解析为文本文件，因为它看起来就是这样）。我需要从两张表中获取信息，将它们匹配起来，将它们放在一行上，然后将其打印到文本文件中。我打算为此使用 python，因为将 Visual Studio 2010 的 python 插件与 xlrd 包一起使用似乎是我能找到的用于 excel 文件的最佳方式，而我只是将 python 中的默认包用于其他文件。

python 会是学习和编写这个脚本的一个不错的语言选择吗？除了一点点 VBS 之外，我不熟悉脚本语言，所以任何语言对我来说都是一种学习体验。

将 xls 转换为 csv 不是一种选择，有太多的 excel 文件，而且它们的不稳定格式会使通过 csv 钓鱼比使用 xlrd 更加困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:11:08.850

python 有一个内置的 csv 阅读器模块[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)，还有一个名为 xlrdr 的 3rd 方模块：http: [//www.python-excel.org/](http://www.python-excel.org/)

这两个库都允许您将文件读入列表或字典中，您可以在其中编写脚本。最后你可以写成 csv 甚至 xls 格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:09:36.960

我专门针对您问题的一部分回答您的问题，该问题涉及您应该学习哪种编程语言来处理本机 Excel 或 .csv 文件。

Python 是一种非常优秀的“瑞士军刀”语言。它的 csv 模块非常棒[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)。

如果 Excel 文件是非 ascii（不是 .csv，而是 .xls 和其他）格式，请从[这个问题](https://stackoverflow.com/questions/6825300/python-best-module-to-write-into-xls-files)开始。我没有使用过也不熟悉这些模块。

如果你永远不会在 Windows 以外的任何平台上编程，Python 仍然是一个不错的选择，但我会研究 C# 只是为了看看该语言有哪些库支持。

我希望这可以帮助你。

编辑：2014 年 8 月 29 日（一年多后）

我对你学习 Python 的感觉仍然相同，但我想到了另外两种语言，Clojure 和 Perl。

如果你想学习一门函数式语言，我相信 Clojure 是一个不错的选择，尽管它可能需要比 Python 更多的时间来学习。Clojure 还有用于处理 csv 文件的优秀外部库。

Perl 当然有一个或多个 csv 包。对于 web，至少对我来说，Perl 更通用一些，而运行 Clojure 需要您使用 web 管理器运行 Java servlet（或等效）管理器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T18:19:32.103

Python 对初学者很友好，并且擅长字符串操作，因此它是一个不错的选择。我不知道`awk`在没有编程经验的情况下学习有多容易，但我认为它或多或少地针对处理 csv 进行了优化。

# java - java中使用socket编程的聊天程序

> ID：11020920
> 
> 赞同：0
> 
> 时间：2012-06-13T18:16:42.603
> 
> 标签：java, sockets, networking, tcp

这是我程序的服务器端代码，问题是它接受一个客户端。当另一个客户端连接时，isConnected 方法返回 true，但服务器没有从服务器获取消息。请帮助我，因为这是我在 netbeans 中的第一个 java 程序，我刚刚完成了核心 java 的学习。

```
class Conn extends Thread{
        ServerSocket ss;
        Socket s;
        public void run()
        {
            status.setText(status.getText()+"connecting");
            try{
            while(true)
            {
            s=new Socket();
            ss=new ServerSocket(3000);
            s=ss.accept();
            Read r=new Read(s);
            r.start();
            }
            }catch(Exception e){}
        }

    }
    class Read extends Thread{
        DataInputStream inp;
        PrintStream outp;
        String str;
        Read(Socket s)
        {
            try{
            inp=new DataInputStream(s.getInputStream());
            outp=new PrintStream(s.getOutputStream());
            }catch(Exception sd){}
        }
        public void run()
        {
                status.setText(status.getText()+"\nreading");
            try{
            while(true)
            {
                str=inp.readLine();
                chatwin.append(str);
                outp.println(str);
            }
            }catch(Exception er){}
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:20:14.737

在 ss 赋值后移动 while 逻辑。

```
try 
{
    ss = new ServerSocket(3000);
    while (ss.isBound())
    {
        s=ss.accept();
        Read r = new Read(s);
        r.start();
    }
} 
```

您的问题是您不能多次执行此操作：

```
ss = new ServerSocket(3000); 
```

您已经创建了一个`ServerSocket`位于 port `3000`，因此当您尝试创建另一个时，它会尝试将自己绑定到该套接字，并且不会成功，因为您的第一个`ss`仍然坐在那里。您应该只创建一个并在线程连接到它`ServerSocket`时从该连接中获取套接字连接。`ServerSocket`

这能回答你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:20:49.080

ss.accept() 将阻塞，直到它收到一个连接。你是如何连接到它的？

# android - 在eclipse上运行下载的源代码

> ID：11020924
> 
> 赞同：0
> 
> 时间：2012-06-13T18:16:54.000
> 
> 标签：android

我刚刚使用 Merge 客户端从 code.google.com 下载了应用程序“MyTracks”的源代码。现在的问题是，如果我尝试通过 eclipse 运行应用程序，使用“从现有源创建项目”会给出错误，我选择的目录没有清单文件，因此它无效。我检查了下载的源代码和 code.google.com 上的源文件，清单文件在哪里找不到。现在如何运行应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:22:49.820

MyTracks 有各种项目，您一定尝试过导入主文件夹，但您应该单独导入每个项目。

# android - 使用cloudfoundry的RabbitMQ的Android App

> ID：11020925
> 
> 赞同：-1
> 
> 时间：2012-06-13T18:16:55.417
> 
> 标签：android, chat, rabbitmq, cloud-foundry

您好我正在尝试使用 RabbitMQ 在 Android 中开发一个聊天应用程序。该代码在我本地安装的 rabbitMQ 服务器上运行良好。

为了向队列发送消息，我的 android APP 需要它正在与之交谈的 robbitMQ 服务器的地址。我可以在 cloudfoundry 上使用 RabbitMQ，在应用程序代码中替换我的本地 rabbitMQ 吗？

```
ConnectionFactory factory = new ConnectionFactory();
 factory.setHost("<RobbitMQ server>");

 Connection connection = factory.newConnection();
 Channel channel = connection.createChannel();
 channel.exchangeDeclare(EXCHANGE_NAME, "fanout", true);
 channel.queueDeclare(QUEUE_NAME, false, false, false, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:54:33.897

您将面临几个问题：

1.  cloudfoundry.com 上的 RabbitMQ 服务的地址将被动态分配……您可以在 web 应用程序中从 cloudfoundry.com 上的环境中查找它，但您无法在远程原生 Android 应用程序中轻松获取它。
2.  现在，您无法将远程 AMQP 连接到 cloudfoundry.com 上的服务 - 只能*在*Cloud Foundry vcap 环境中。因此，即使您有地址，直接从 Android 应用程序通过 JMS 的 AMQP 连接也无法正常工作。

在 EC2 实例上运行 RabbitMQ 怎么样？或者为你的 Android 应用程序构建一个 Web 应用程序后端，它与在 Cloud Foundry 实例中运行的 RabbitMQ 通信，而 Android 通过 SockJS 与后端通信呢？

# r - 从具有 2 个固定变量的数据框中绘制

> ID：11020926
> 
> 赞同：1
> 
> 时间：2012-06-13T18:17:02.133
> 
> 标签：r, plot

考虑以下：

```
set.seed(1)
RandData <- rnorm(100,sd=20)
Locations <- rep(c('England','Wales'),each=50)
today <- Sys.Date()
dseq <- (seq(today, by = "1 days", length = 100))

Date <- as.POSIXct(dseq, format = "%Y-%m-%d")

Final <- cbind(Loc = Locations, Doy = as.numeric(format(Date,format = "%j")), Temp = RandData) 
```

在此示例中，如何在同一个图形窗口中生成两个图，其中第一个图显示英格兰相对于 Doy 的温度，第二个显示威尔士相对于 Doy 的温度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:29:48.423

请注意，您的数据是字符矩阵。`Final`如果对象是通过以下方式创建的，则更好：

```
Final <- data.frame(Loc = Locations,
                    Doy = as.numeric(format(Date,format = "%j")),
                    Temp = RandData) 
```

这样，下面的代码在一个窗口上并排绘制了两个图。我使用公式接口来`plot()`利用它的`subset`参数，它的工作原理类似于`subset()`函数。

```
ylab <- "Temperature"
xlab <- "Day of year"

layout(matrix(1:2, ncol = 2))
plot(Temp ~ Doy, data = Final, subset = Loc == "England", main = "England",
     ylab = ylab, xlab = xlab)
plot(Temp ~ Doy, data = Final, subset = Loc == "Wales", main = "Wales",
     ylab = ylab, xlab = xlab)
layout(1) 
```

这产生了这个情节：

![英格兰威尔士气温](../Images/e694227aa8e46c9d59f4767ca6a856d9.png)

如果您希望它们具有相同的比例，那么我们对其进行一些修改：

```
ylab <- "Temperature"
xlab <- "Day of year"
xlim <- with(Final, range(Doy))
ylim <- with(Final, range(Temp))
layout(matrix(1:2, ncol = 2))
plot(Temp ~ Doy, data = Final, subset = Loc == "England", main = "England",
     ylab = ylab, xlab = xlab, xlim = xlim, ylim = ylim)
plot(Temp ~ Doy, data = Final, subset = Loc == "Wales", main = "Wales",
     ylab = ylab, xlab = xlab, xlim = xlim, ylim = ylim)
layout(1) 
```

它产生了这个版本的情节

![具有相同缩放比例的英格兰威尔士温度](../Images/8dd2d653a4568c6b4c11845112fa0a37.png)

对于线图，您需要按`Doy`顺序获取数据，然后添加`type = "l"`到`plot()`调用中。

为了完整起见，@Justin 展示了如何使用高级绘图包之一来实现类似但通过**ggplot2**减少用户工作量。**lattice**包是 R 中另一个主要的高级绘图包。您可以使用 lattice 通过以下方式实现相同的绘图：

```
require(lattice)
xyplot(Temp ~ Doy | Loc, data = Final, type = c("l","p") 
```

后者产生

![通过格子的英格兰威尔士温度v3](../Images/87d0aed3e85e88939b96de2ba1cfeece.png)

仅用于`type = "p"`点和`type = "l"`仅用于线。如您所见，与使用基本图形包相比，更高级别的包使生成这些图更容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:29:03.837

通过使用 cbind 创建您的数据，它们都被强制转换为`character`. 改为使用`data.frame()`

```
Final <- data.frame(Loc = Locations, 
                    Doy = as.numeric(format(Date,format = "%j")), 
                    Temp = RandData) 
```

`ggplot`做这样的事情非常好。

```
library(ggplot2)
ggplot(Final, aes(x=Doy, y=Temp)) + geom_path() + facet_wrap( ~ Loc) 
```

或者你可以使用着色：

```
ggplot(Final, aes(x=Doy, y=Temp, color=Loc)) + geom_path() 
```

# android - OptionsMenu onOptionsSelected 什么也没给我

> ID：11020933
> 
> 赞同：1
> 
> 时间：2012-06-13T18:17:17.217
> 
> 标签：android, options-menu

我正在尝试制作一个简单的 Activity，它有一个带有两个按钮的菜单。第一个按钮将加载一个单独的活动，而第二个按钮我暂时无事可做。我到处都放了日志语句，但唯一执行的是 onCreateOptionsMenu 中的日志语句。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up window View
    setContentView(R.layout.main);

    Log.i( "onCreate", "veryBeginning" );
}

public boolean onCreateOptionsMenu( Menu menu ) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate( R.menu.option_menu, menu );
    Log.i( "onCreateOptionsMenu", "hereasd" );
    return true;
}

public boolean onOptionsSelected( MenuItem item ) {
    Log.i( "onOptionsSelected", "start" );
    switch( item.getItemId() ) {
    case R.id.connect:
        Log.i( "onOptionsSelected" , "r.id.connect" );
        startActivity( new Intent(getApplicationContext(), DeviceList.class ) );
        finish();
        return true;
    case R.id.preferences:
        Log.i( "onOptionsSelected" , "r.id.preferences" );
        return true;
    default:
        Log.i( "onOptionsSelected" , "r.id.?" );
        return super.onContextItemSelected( item );
    }
} 
```

我在我的设备上启动程序，打开菜单，并多次单击这两个按钮，但我的 LogCat 中没有显示任何日志。

这是我的 LogCat

```
06-13 14:11:34.643: I/onCreate(15262): veryBeginning
06-13 14:11:49.098: W/KeyCharacterMap(15080): No keyboard for id 0
06-13 14:11:49.098: W/KeyCharacterMap(15080): Using default keymap:/system/usr/keychars/qwerty.kcm.bin
06-13 14:11:49.098: I/onCreateOptionsMenu(15080): hereasd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:22:59.393

使用`onOptionsItemSelected(MenuItem item)`. 看[这里](http://developer.android.com/reference/android/app/Activity.html#onOptionsItemSelected%28android.view.MenuItem%29)。

# python - 如何使用 Python 将一个文件拆分为两个文件？

> ID：11020935
> 
> 赞同：4
> 
> 时间：2012-06-13T18:17:28.660
> 
> 标签：python, file, split

我有一个文件，其中包含一些代码行，后跟一个字符串模式。我需要在文件一中包含字符串模式的行之前写下所有内容，在文件二中写下字符串模式之后的所有内容：

例如（文件内容）

*   代码行 1
*   代码行 2
*   字符串模式
*   代码行 3

输出应该是带有代码行 1、代码行 2 的文件 1 和带有代码行 3 的文件 2。

对写文件比较熟悉，可惜不知道如何判断字符串模式前后的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:20:47.740

如果输入文件适合内存，最简单的解决方案是使用`str.partition()`：

```
with open("inputfile") as f:
    contents1, sentinel, contents2 = f.read().partition("Sentinel text\n")
with open("outputfile1", "w") as f:
    f.write(contents1)
with open("outputfile2", "w") as f:
    f.write(contents2) 
```

这假设您知道分隔这两个部分的行的确切文本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T18:29:55.117

这种方法类似于[Lev 的](https://stackoverflow.com/a/11021025/344821)`itertools`方法，但因为它很有趣而使用。

```
 dont_break = lambda l: l.strip() != 'string_pattern'

 with open('input') as source:
     with open('out_1', 'w') as out1:
         out1.writelines(itertools.takewhile(dont_break, source))
     with open('out_2', 'w') as out2:
         out2.writelines(source) 
```

如果需要，您可以用正则表达式或其他任何东西替换 dont_break 函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:28:04.173

```
with open('data.txt') as inf, open('out1.txt','w') as of1, open('out2.txt','w') as of2:
    outf = of1
    for line in inf:
        if 'string pattern' in line:
            outf = of2
            continue  # prevent output of the line with "string pattern" 
        outf.write(line) 
```

将处理大文件，因为它逐行工作。假设`string pattern`在输入文件中只出现一次。*如果*整个文件可以放入内存，我最喜欢这种`str.partition()`方法（这可能不是问题）

 *使用`with`确保文件在您完成或遇到异常时自动关闭。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T18:23:32.867

一个天真的例子（不会像 Sven 那样将文件加载到内存中）：

```
with open('file', 'r') as r:
    with open('file1', 'w') as f:
        for line in r:
            if line == 'string pattern\n':
                break
            f.write(line)
    with open('file2', 'w') as f:
        for line in r:
            f.write(line) 
```

这假设`'string pattern'`在输入文件中发生一次。

如果模式不是固定字符串，则可以使用该[`re`](http://docs.python.org/library/re.html)模块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T18:24:45.087

一个更有效的答案，它将处理大文件并消耗有限的内存..

```
inp = open('inputfile')
out = open('outfile1', 'w')
for line in inp:
  if line == "Sentinel text\n":
    out.close()
    out = open('outfile2', 'w')
  else:
    out.write(line)
out.close()
inp.close() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T22:09:09.840

不超过三行：

```
with open('infile') as fp, open('of1','w') as of1, open('of2','w') as of2:
    of1.writelines(iter(fp.readline, sentinel))
    of2.writelines(fp) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T18:26:28.143

你需要类似的东西：

```
def test_pattern(x):
    if x.startswith('abc'): # replace this with some exact test
        return True
    return False

found = False
out = open('outfile1', 'w')
for line in open('inputfile'):
    if not found and test_pattern(line):
        found = True
        out.close()
        out = open('outfile2', 'w')
    out.write(line)
out.close() 
```

用适用于您的模式的测试替换该行（如有必要，使用来自 re 的模式匹配，但任何找到分隔线的东西都可以）。*

# sql-server - 数据库 - 编辑过程

> ID：11020938
> 
> 赞同：1
> 
> 时间：2012-06-13T18:17:31.610
> 
> 标签：sql-server, database, transactions

我有一个名为的表`tbl_Subjects_Taken`，其中列出了学生所学的所有科目。它仅由两列`Stud_ID`和组成`Subj_ID`。

在前端，我有一个表单，可以让用户编辑有关学生本身和该学生所学科目的信息。更新`tbl_Students`（学生的信息）不是问题，因为单个 UPDATE 语句就可以完成这项工作。但是另一张桌子呢？

一旦用户编辑了表单并按下了保存按钮，我就是这样做的：

1.  删除该学生在 中的所有科目 `tbl_Subjects_Taken`。
2.  添加位于表单中的所有主题（在我的程序中）。

这真的是在“多方”中更新表格的正确方法吗？

我使用**SQL 服务器**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:21:26.143

删除和重新添加是一种方法。

但我会尝试在服务器上做所有事情（例如使用存储过程）。我会将主题 ID 列表传递给 SP。在 SP 内部，我会执行以下操作：

1.  `tbl_Subjects_Taken`为该用户删除**不在**我传入的列表中的所有主题
2.  添加我传入的列表中不在`tbl_Subjects_Taken`表格中**的任何主题。**

您没有提到您的数据库，但是根据您使用的数据库，有不同的方法可以解决这个问题。例如，在 Oracle 和 ODP.Net 中，您可以使用[PL/SQL 关联数组](http://www.oracle.com/technetwork/issue-archive/2007/07-jan/o17odp-093600.html)将 ID 传递给您的 PL/SQL 函数/SP。

但理想情况下，您希望让一台服务器往返，并且希望尽可能少地进行删除和插入。这两个步骤应该会产生良好的效率。

# excel - Excel 比较工作簿之间的单元格

> ID：11020939
> 
> 赞同：0
> 
> 时间：2012-06-13T18:17:32.553
> 
> 标签：excel, vba

我想创建一个宏来比较 E 列中的单元格，如果发现它们匹配，那么它将检查/比较 H 列中的日期字段以及该宏将在 R 列中标记为“是”的最旧日期。

我是新手，不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:43:35.830

假设您要在 Book1 上创建一个公式以与 Book2 进行比较，然后将此公式放入 Book1 的 R 列

```
=IF(E1=[Book2]Sheet1!E1,IF(H1=[Book2]Sheet1!H1,"yes",""),"") 
```

显然，您需要更改书籍名称和工作表名称。

你说的“最早的日期”是什么意思？

# php - 将字符串与返回意外结果的数字字段进行比较

> ID：11020941
> 
> 赞同：6
> 
> 时间：2012-06-13T18:17:42.040
> 
> 标签：php, mysql, sql

给定表格：

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

添加几行：

```
INSERT INTO `users` (`id`,`name`) VALUES (NULL , 'Bob'),(NULL , 'Larry'),(NULL , 'Steve'); 
```

为什么，哦，为什么！此查询是否返回结果：

```
SELECT * FROM `users` WHERE id = "2this-is-not a numeric value" 
```

结果：

```
query returned 1 row(s) in 0.0003 sec
id  name
-----------------
2   Larry 
```

where 子句中使用的字符串显然被转换为数值——谁说要这样做？！我找不到任何建议 mysql 或 PHP 假定自动转换我的字符串文字的文档。

这仅在数字字符是字符串中的第一个字符时才有效，`"this 2 is not numeric"`不会返回结果。`"12 2"`会变成`12`, `"1 2"`(one-space-two) 变成`1`.

**任何解释此行为的文章或文档将不胜感激。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T18:19:48.187

它在 MySQL 文档中：http: [//dev.mysql.com/doc/refman/5.1/en/type-conversion.html](http://dev.mysql.com/doc/refman/5.1/en/type-conversion.html)

# ruby - 您可以在每个命令上自动在 irb 会话中“要求”ruby 文件吗？

> ID：11020949
> 
> 赞同：10
> 
> 时间：2012-06-13T18:18:09.857
> 
> 标签：ruby, irb

我目前正在编辑一个文件，并且我正在使用 irb 来测试 api：

```
> require './file.rb'
> o = Object.new
> o.method 
```

然后我希望能够编辑 file.rb，并能够立即看到更改。示例：假设我第一次需要 file.rb 时 new_method 不存在：

```
> o.new_method 
```

这将返回一个错误。是否有沙盒/开发人员模式或方法可以实现上述目标，而无需每次都重新加载文件？无论如何，在第一个要求之后，要求将不起作用。我假设在最坏的情况下我不得不使用 load 代替。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T18:25:08.783

我通常创建一个这样的简单函数：

```
def reload
    load 'myscript.rb'
    # Load any other necessary files here ...
end 
```

有了这个，一个简单的`reload`将重新导入我正在处理的所有脚本。它不是自动的，但它是我能想到的最接近的东西。

`method_missing`当您的对象使用不存在的方法调用时，您可以重写以自动调用此函数。不过，我自己从来没有尝试过，所以我不能给出任何具体的建议。如果您正在调用一个已经存在但只是被修改过的方法，它也无济于事。

在我自己的懒惰中，我已经将鼠标上的一个可编程按钮映射到键序列“reload<enter>”。当我使用`irb`时，只需动动小指即可重新加载所有内容。因此，当我*不*使用时`irb`，我最终会无意中将字符串“reload”插入到文档中（但这完全是一个不同的问题）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T19:03:32.207

这不会运行每个命令，但您可以在每个 IRb 会话中包含一个文件。`~/.irbrc`每次启动 IRb 会话时都会加载。

### ~/.irbrc

```
require "~/somefile.rb" 
```

### ~/somefile.rb

```
puts "somefile loaded" 
```

### 终端

```
> irb
somefile loaded
irb(main):001:0> 
```

`~/.irbrc`每次启动 irb 会话时都会加载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:35:40.110

`require_dependency`ActiveSupport**库**呢？

```
require 'active_support/dependencies' #load it at the beginning
require_dependency 'myscript.rb' 
```

然后`require_dependency`应该跟踪`myscript`文件中的更改并重新加载它。

# c# - DotNetOpenAuth 的 DesktopConsumer ProcessUserAuthorization 中的验证者是什么？

> ID：11020951
> 
> 赞同：3
> 
> 时间：2012-06-13T18:18:24.663
> 
> 标签：c#, oauth, dotnetopenauth

我是 DotNetOpenAuth 的新手，我找不到在 ProcessUserAuthorization 中用作验证器的值。

我想要实现的是使用我的用户凭据登录到使用 OAuth 的应用程序（称为 UserVoice）。这是我的代码的样子：

```
string requestToken;
var authorizeUri = consumer.RequestUserAuthorization(new Dictionary<string, string>(), null, out requestToken).AbsoluteUri;
var verifier = "???";
var accessToken = consumer.ProcessUserAuthorization(requestToken, verifier).AccessToken;
consumer.PrepareAuthorizedRequest(endpoint, accessToken, data).GetResponse(); 
```

我尝试使用我的用户名、密码、消费者密钥、消费者密码，但似乎没有任何效果。有人知道我应该使用哪个值作为验证者吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:57:22.010

我终于找到了一种使用 DotNetOpenAuth 登录 UserVoice 的方法。我认为 UserVoice 的 OAuth 实现不是标准的，但在此期间我能够做到：

```
var consumer = new DesktopConsumer(this.GetInitialServiceDescription(), this._manager)
string requestToken;
consumer.RequestUserAuthorization(null, null, out requestToken);

// get authentication token
var extraParameters = new Dictionary<string, string>
{
    { "email", this._email },
    { "password", this._password },
    { "request_token", requestToken },
};

consumer = new DesktopConsumer(this.GetSecondaryServiceDescription(), this._manager);
consumer.RequestUserAuthorization(extraParameters, null, out requestToken); 
```

其中 GetInitialServiceDescription 返回良好的请求描述，而 GetSecondaryServiceDescription 是破解版本，并返回授权端点代替请求令牌端点。以这种方式返回的“request_token”（根据我对 OAuth 的理解，这实际上不是一个正常的 request_token）可以用作 PrepareAuthorizedRequest 的访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:42:29.043

验证程序是 UserVoice 在用户表示他们想要授权您的应用程序后将显示在屏幕上的代码。用户必须将这个验证器代码从网站复制并粘贴回应用程序的 GUI，以便它可以将其传递到`ProcessUserAuthorization`方法中。

这仅在 OAuth 1.0a（不是 1.0）中是必需的，并且可以缓解在 1.0 中发现的某些可利用攻击。在您`ServiceProviderDescription`确保您指定该服务是 1.0a 版本（如果实际上 Uservoice 支持该版本），以便 DNOA 将与 Uservoice 通信它应该创建一个验证器代码。

顺便说一句，包括扫描进程标题或在您自己的应用程序中托管浏览器在内的各种技巧可以通过让您的应用程序自动为他复制验证码来消除手动用户复制验证码的步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T20:28:09.507

当通过 WebAPI 完成授权并且您没有在浏览器中显示重定向时，也会使用验证程序。在这种情况下，您只需通过代码发送您的 AuthentificationRequest 并将验证器作为 json 字符串获取，而无需任何用户交互。

在这种情况下，流程（对于 OAuth 1.0）如下所示：

```
 public void AccessAPI ()
    {
        InMemoryOAuthTokenManager tokenManager = InMemoryOAuthTokenManager(YOUR_CLIENT_KEY, YOUR_CLIENT_SECRET);
        var consumer = new DesktopConsumer(GetAuthServerDescription(), tokenManager);

            // Get Request token
            string requestToken;
            var parameters = new Dictionary<string, string>();
            parameters["email"] = "foo";
            parameters["password"] = "bar";
            Uri authorizationUrl = consumer.RequestUserAuthorization(null, parameters, out requestToken);

            // Authorize and get a verifier (No OAuth Header necessary for the API I wanted to access)
            var request = WebRequest.Create(authorizationUrl) as HttpWebRequest;
            request.Method = "Get";
            request.Accept = "text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2";
            var response = request.GetResponse() as HttpWebResponse;
            string verifier = new StreamReader(response.GetResponseStream()).ReadToEnd().Split('=')[1]; //Irgendwie will Json nicht parsen

            // Use verifier to get the final AccessToken
            AuthorizedTokenResponse authorizationResponse = consumer.ProcessUserAuthorization(requestToken, verifier);
            string accessToken = authorizationResponse.AccessToken;

            // Access Ressources
            HttpDeliveryMethods resourceHttpMethod = HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest;
            var resourceEndpoint = new MessageReceivingEndpoint("https://api.discovergy.com/public/v1/meters", resourceHttpMethod);
            using (IncomingWebResponse resourceResponse = consumer.PrepareAuthorizedRequestAndSend(resourceEndpoint, accessToken))
            {
                string result = resourceResponse.GetResponseReader().ReadToEnd();
                dynamic content = JObject.Parse(result);
            }
    }

    private ServiceProviderDescription GetAuthServerDescription()
    {
        var authServerDescription = new ServiceProviderDescription();
        authServerDescription.RequestTokenEndpoint = new MessageReceivingEndpoint(YOUR_REQUEST_ENDPOINT, HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);
        authServerDescription.UserAuthorizationEndpoint = new MessageReceivingEndpoint(YOUR_AUTHORIZATION_ENDPOINT, HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);
        authServerDescription.AccessTokenEndpoint = new MessageReceivingEndpoint(YOUR_TOKEN_ENDPOINT, HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);
        authServerDescription.ProtocolVersion = ProtocolVersion.V10;
        authServerDescription.TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() };
        return authServerDescription;
    } 
```

# ios - 如何正确绘制正弦波？

> ID：11020957
> 
> 赞同：0
> 
> 时间：2012-06-13T18:18:51.250
> 
> 标签：ios, ios5, drawing, core-graphics

我需要绘制正弦波（用户选择频率）。我目前的方法是在计算点之间画线（点当然对应于正弦波的值）。这有效，但不幸的是仅适用于较低频率。我认为问题在于我的采样频率（屏幕坐标和 1 个单位之间的比例）约为 50，因此我可以正确绘制频率高达 25Hz 的正弦波（根据 Nyquist-Shannon 采样定理）。

这是一些屏幕截图，因此您可以看到我在说什么：

[http://imgur.com/a/pL2WP](http://imgur.com/a/pL2WP)

所以这个不正确的图表，当频率太高时，我想得到这样的东西：

![在此处输入图像描述](../Images/28eff9c64c1488fc1b2c091a96610541.png)

# c++ - 依次计算围绕圆的点

> ID：11020959
> 
> 赞同：2
> 
> 时间：2012-06-13T18:18:59.800
> 
> 标签：c++, algorithm, geometry

我从一篇很棒的文章中改编了一些代码，该文章是 Mukund Sivaraman 绘制的关于圆绘制的文章，以便为给定圆上的每个点执行传递的函数：

```
template<class Function>
static void For_each_point_on_circle(Image *image, int radius, Function function)
{
    int x, y;
    int l;
    l = (int) radius * cos (M_PI / 4);
    for (x = 0; x <= l; x++)
    {
        y = (int) sqrt ((double) (radius * radius) - (x * x));
        function(image, x, y);
        function(image, x, -y);
        function(image, -x, y);
        function(image, -x, -y);
        function(image, y, x);
        function(image, y, -x);
        function(image, -y, x);
        function(image, -y, -x);
  }
} 
```

但是，我真正需要的是按顺序计算圆周围的点，因此对 function(image, x, y) 的调用将从 0 到 360 度按顺序进行而不是跳过，这在绘制圆时是可以接受的.

我可以计算所有点并对它们进行排序，但我希望有人可能知道一种正确的方法，也许使用多个循环，每个循环计算一个段？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:49:12.527

像这样的事情应该这样做：

```
template<class Function>
static void For_each_point_on_circle(Image *image, int radius, Function function)
{
    int x, y;
    int l;
    l = (int) radius * cos (M_PI / 4);
    for (x = -l; x < l; x++)
    {
        y = (int) sqrt ((double) (radius * radius) - (x * x));
        function(image, x, y);
    }
    for (x = -l; x < l; x++)
    {
        y = (int) sqrt ((double) (radius * radius) - (x * x));
        function(image, y, -x);
    }
    for (x = -l; x < l; x++)
    {
        y = (int) sqrt ((double) (radius * radius) - (x * x));
        function(image, -x, -y);
    }
    for (x = -l; x < l; x++)
    {
        y = (int) sqrt ((double) (radius * radius) - (x * x));
        function(image, -y, x);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:26:29.173

这是一篇关于分步走圆的文章。它的动机是用于 CNC 机器步进电机控制器，但也许它可以满足您的目的。

[https://github.com/Falmarri/cnc/blob/master/BresenHam-3D-helix.pdf](https://github.com/Falmarri/cnc/blob/master/BresenHam-3D-helix.pdf)

# java - 如何从 Java 应用程序在网络之间切换？

> ID：11020965
> 
> 赞同：0
> 
> 时间：2012-06-13T18:19:26.830
> 
> 标签：java, networking, twitter4j

是否可以从一个 wi-fi 网络断开连接并使用 java 以编程方式连接到另一个网络？

我的 java 应用程序使用 twitter4j 向 twitter 发出请求。我每小时只能从特定 IP 地址发出 350 个请求。现在我要睡一个小时，然后再继续我的请求。但我有两个 Wi-Fi 网络要连接。

因此，当超出限制并且我遇到异常时，如果我可以在网络之间切换，我可以将完成的工作量翻倍。在java中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:22:06.023

这只有在 java 中才有可能，因为 java 可以调用本机代码。您需要使用 C 或 C++ 中的本机代码来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:33:29.653

您可以从您的 Java 程序中执行一个外部程序，该程序将断开连接并重新连接（如果您通过 DHCP 获得 IP）。

*不过，似乎解决方案并不在于程序中。更多的是它被使用的方式......或者它被使用（或不应该被使用）的目的。*

# ruby-on-rails - 使用符号的最佳方式是什么？

> ID：11020971
> 
> 赞同：0
> 
> 时间：2012-06-13T18:19:44.893
> 
> 标签：ruby-on-rails, ruby, symbols

哪个更好？

1.

```
= link_to "Page", "/page", :class => "button", :data => {:theme => "green", :icon => "small-arrow"} 
```

2.

```
= link_to "Page", "/page", class: "button", data: {theme: "green", icon: "small-arrow"} 
```

3.

```
= link_to "Page", "/page", class: :button, data: {theme: :green, icon: "small-arrow"} 
```

我发现符号是最好的使用方式，因为符号和字符串之间的内存分配不同。

我发现版本 2\. 更具可读性（对我而言）并且我认为也更易于维护，因为在字符串中查看/编辑/添加分隔的单词（按空格或破折号）比编辑符号并将其转换为更容易/更快一个字符串（在需要时，例如添加第二类“按钮登录”或其他主题“深红色”）。

是否有任何严重的理由（例如性能）使用 1\. 或 3\. 而不是 2\. 的符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:32:25.280

请注意，它不仅与符号有关，还与新旧哈希语法有关。

我不喜欢将新的哈希语法与符号混合。在大多数情况下，新语法看起来不错，例如：

```
{ width: 42, height: 24 } 
```

但它看起来很可怕的符号：

```
... class: :button ... 
```

在我看来，这很奇怪，不适合人类阅读。我不喜欢第三种选择。所以，我更喜欢这个选项（你没有提到它）：

```
= link_to "Page", "/page", :class => :button, 
   :data => { :theme => :green, :icon => "small-arrow" } 
```

这更好，因为`:class`符号的写法与`:button`符号相似。符号应该以相同的语法写在一行中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:24:21.547

1.  适用于 Ruby 1.8 和 1.9。

2.  仅适用于 1.9。`"button"`并且`"green"`不存储在堆上，并且是可变的，但是，它们准确地传达了它们的价值才是重要的。

3.  仅适用于 1.9。`:button`并且`:green`速度更快（略微），代价是代码描述其意图更差。

换句话说，2 和 3 在哈希语法方面是相同的。就字符串与符号的正确使用而言，1 和 2 是相同的。

# c# - SQLite 中参数的使用

> ID：11020974
> 
> 赞同：2
> 
> 时间：2012-06-13T18:19:52.983
> 
> 标签：c#, winforms, sqlite, parameters, windows-ce

我有我的`SQLite`数据库存储我的信息，它工作正常。但是我想使用`Parameter`.

我修改此行以设置`values`并且**可以正常工作**：

```
cmd.CommandText = String.Format("INSERT INTO users ("+data[0]+", "+data[1]+") VALUES (@4,@5);");
p = new SQLiteParameter("@4", System.Data.DbType.String);
p.Value = data[4];
cmd.Parameters.Add(p);
p = new SQLiteParameter("@5", System.Data.DbType.String);
p.Value = data[5];
cmd.Parameters.Add(p); 
```

**错误**：但是如果我想使用`Parameter`列的名称，它会说有`syntax error near "@0"`：

```
cmd.CommandText = String.Format("INSERT INTO users (@0, @1) VALUES (@4,@5);");
    p = new SQLiteParameter("@0", System.Data.DbType.String);
    p.Value = data[0];
    cmd.Parameters.Add(p);
    p = new SQLiteParameter("@1", System.Data.DbType.String);
    p.Value = data[1];
    cmd.Parameters.Add(p);
    p = new SQLiteParameter("@4", System.Data.DbType.String);
    p.Value = data[4];
    cmd.Parameters.Add(p);
    p = new SQLiteParameter("@5", System.Data.DbType.String);
    p.Value = data[5];
    cmd.Parameters.Add(p); 
```

`Parameter`在这种情况下可以使用吗？代码有什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:35:23.593

您不能参数化列名。第一种方法是可以的。

或者，您可以将所有这些作为参数发送到存储过程并在数据库级别动态构建查询并执行。

# java - JTextPane 的等宽字体/符号

> ID：11020978
> 
> 赞同：13
> 
> 时间：2012-06-13T18:20:00.520
> 
> 标签：java, unicode, symbols, jtextpane, monospace

我想使用 JTextPane 构建一个类似控制台的输出。因此我使用等宽字体：

```
textpane.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 12)); 
```

这适用于所有类型的字母数字（如 az、0-9 等）字符，但对于像 ' *\u2588* ' (█) 这样的符号，字体不再是等宽的。

我忘了什么吗？还是没有包含符号的等宽字体？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T19:23:15.810

好的，首先，在我看来，您想在这里解决几个不同的问题，所以我将尝试分别解决它们。

**1\. 您需要一种字体，对于所有 unicode 字符、符号或其他内容都是等宽的。**

根据[此](http://www.i18nguy.com/unicode/char-count.html)页面，Unicode 3.2 标准定义了 12886 个字母数字和“符号”字符。Unicode 现在是 6.0，所以我们可以假设这个数字现在更大了。我在这里还假设“字母数字”表示英文字符，因为 Unicode 支持跨越多种语言的超过 100000 个字符。无论如何，12886 个英文识别的字符和符号仍然很多，我怀疑有很多免费字体支持所有这些。

也就是说，我最终使用`Courier New`的大多数 Java 应用程序都需要具有字符支持的等宽字体。它支持您上面提到的 '\u2588' 字符以及许多其他重要的字符，例如“度”符号。

**2.这种等宽字体需要“跨平台”**

我肯定知道 Mac OS X 和所有版本的 Windows 支持`Courier New`，以及我运行的 Linux 版本也支持（RedHat ......不记得版本号），尽管并非所有 Linux 版本本身都有这种字体。无论如何...您可以尝试`Courier New`看看它是否适合您。如果没有，您可能可以在线找到免费工具来测试字体/字符支持。

**最后的想法**

我不想这么说，但我怀疑有很多字体支持 Unicode 标准定义的所有字母数字/符号字符，至少是单行距、跨平台和免费的。如果可能的话，可能更值得您花时间弄清楚您需要确定哪些符号，然后选择支持这些符号的字体，并反过来由您知道您将在其上运行应用程序的平台支持。如果您绝对需要支持所有 Unicode 符号，不幸的是，它可能不会免费提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:08:40.730

Monospaced 字体适用于 OS X，但不适用于 Windows。奇怪的是 monospaced 被配置为通过 fontconfig.properties 在 Windows 上使用 Courier New。

实际上，我已将此记录为 Oracle 的错误；这是一些在 OS X 上正确呈现的示例代码，但等宽字体在 Windows 上会生成方框。

```
import java.awt.BorderLayout;
import java.awt.Font;

import javax.swing.JEditorPane;
import javax.swing.JFrame;

public class Test {

    public static void main(String[] args) {
        JFrame f = new JFrame("editor test");
        f.getContentPane().setLayout(new BorderLayout());
        f.add(pane("monospaced"), BorderLayout.NORTH);
        f.add(pane("Courier New"), BorderLayout.SOUTH);
        f.pack();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);
    }

  private static JEditorPane pane(final String name) {
    JEditorPane p = new JEditorPane();
    final Font currFont = p.getFont();
    p.setFont(new Font(name, currFont.getStyle(), currFont.getSize()));
    p.setText(name + " - 8\u1d00.\u1d0d.");
    return p;
  }
} 
```

我尝试将 \u2588 添加到它，并且在 OS X 等宽上看起来也很好。

# php - 如何提高此 PHP/MySQL 代码的性能？

> ID：11020981
> 
> 赞同：5
> 
> 时间：2012-06-13T18:20:12.207
> 
> 标签：php, mysql, performance

以下是更大的 PHP 脚本的一部分，该脚本使用**CSV 文件**和**客户端 ID**字段作为输入从 MySQL 数据库添加或禁用用户。

涉及两个表，**users**和**users_clients**。后者保持用户和客户端之间的关系，因为一个用户可以属于多个客户端。

这是表的结构

**用户**结构（它有更多的字段）

```
id        | int(11) (primary key)
user      | varchar(100)
pass      | varchar(100)
category  | int(11)
date      | timestamp
name      | varchar(100)
email     | varchar(255) 
```

**用户**索引

```
SEARCH    | user        | FULLTEXT
SEARCH    | name        | FULLTEXT
SEARCH    | email       | FULLTEXT 
```

**users_clients**结构

```
id_user   | int(11)
id_client | int(11)
status    | enum('active','inactive') 
```

这是从 CSV 文件添加每个用户的脚本的基本流程：

1.  检查该客户端的用户是否存在。

    ```
    SELECT 
        LOWER(user)
    FROM
        users u
        INNER JOIN users_clients uc ON u.id = uc.id_user
    WHERE
        u.user = '$user'
        and uc.id_client = $id_client 
    ```

2.  如果不存在，请将其添加到数据库中。

    ```
    INSERT INTO 
        users ($fields,id_client)
    VALUES 
        ($values,'$id_operation') 
    ```

3.  获取插入用户的 id。我知道我可以在这里使用**mysql_insert_id**之类的东西，但是竞争条件呢？

    ```
    SELECT
        u.id as id
    FROM
        users u
    WHERE
        u.user = '$user'
        and u.id_client = '$id_operation' 
    ```

4.  将用户与相应的客户端关联。

    ```
    INSERT INTO
        users_clients (id_user, id_client) 
    VALUES
        ('$id_user','$id_client') 
    ```

表中当前有 400.000 个用户。该脚本需要 10 多分钟来处理一个有 500 个用户的 CVS。

您将如何改进它以使其更快？

提前致谢。

PD：如果你想查看完整的功能，可以在[pastebin](http://pastebin.com/k8dNzVjB)获得。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:26:29.393

```
INSERT INTO table (id,a,b,c) VALUES (5454,1,2,3)
ON DUPLICATE KEY
UPDATE table SET foo WHERE id=xyz; 
```

1.  在数据库中设置索引
2.  使用 mysqli 而不是 mysql
3.  收集你想要插入的所有东西，并使用准备好的语句/存储过程来完成，比如这里[How to insert an array into a single MySQL Prepared statement w/ PHP and PDO](https://stackoverflow.com/questions/4629022/how-to-insert-an-array-into-a-single-mysql-prepared-statement-w-php-and-pdo)
4.  不要做 500 次选择，简单地获取整个数据库并通过 foreach/while 循环处理它，检查你需要的东西
5.  使用类似上面的构造

**重要提示：**对于上述语句，列**id**应该有一个唯一索引！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:28:09.930

将 INSERT 包装到事务中，不用担心，`mysql_insert_id()`除非您切换到另一个数据库连接，否则它是完全安全的。

还可以将所有查询包装到事务中，从而大幅提高速度。

# regex - 使用 sed 从第一行输出文件，直到但不包括正则表达式匹配

> ID：11020984
> 
> 赞同：0
> 
> 时间：2012-06-13T18:20:15.387
> 
> 标签：regex, file, sed

我想使用 sed 从一组文件中收集顶部，并将收集到的结果输出到摘要文件中。我目前正在做的几乎可以工作：

`for i in foo/*/bazz.txt; do sed '/regexp/ q' $i >> bazzdigest.txt; done`

问题是匹配 /regexp/ 的行也被包括在内。我不想包含它，所以我有一个额外的步骤来进入文件并在之后删除它。有没有办法做到这一点，以使该行不被包括在内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:56:09.970

试试这个：

```
for i in foo/*/bazz.txt; do sed '/regexp/,$ d' $i >> bazzdigest.txt; done 
```

这意味着从正则表达式到结束，删除..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:28:18.837

如果您使用的是 GNU sed，请`Q`使用`q`：

`for i in foo/*/bazz.txt; do sed '/regexp/ Q' $i >> bazzdigest.txt; done`

这将输出匹配之前的所有行，不包括匹配本身。

请注意，该`Q`命令是 GNU 扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:02:57.847

awk 解决方案：

```
for i in foo/*/bazz.txt; do awk '/regexp/ {exit} {print}' "$i" >> bazzdigest.txt; done 
```

# ruby-on-rails - 将来自不同模型的数据编译到一个列表中

> ID：11020991
> 
> 赞同：0
> 
> 时间：2012-06-13T18:21:05.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我的应用程序有一个用户模型，以及多个其他与日期相关的模型/表格，例如周年纪念日、假期、生日和“其他日期”自定义模型。

我有一个用户仪表板视图，分别列出了它们，如下所示。我如何将所有这些列表显示为按时间顺序列出的一个（称为即将发生的事件或其他内容），并在一段时间内向它们显示即将到来的日期。

**看法**

*注意 - 这些显示在表格/列表中，但为了清楚起见，我删除了 html

```
 <h1>Holidays</h1>
<% if @user.holidays.any? %>
  <% @user.holidays.each do |hld| %>
    <%= hld.name %>
    <%= hld.date %>
<% end %>

    <h1>Friends Birthdays</h1>
<% if @user.friends.any? %>
  <% @user.friends.each do |frd| %>
      <%= frd.name %>
      <%= frd.dob %>
  <% end %>

    <h1> Anniversary </h1>
<% if @user.anniversaries.any? %>
  <% @user.anniversaries.each do |ann| %>
      <%= ann.spouse_name %>
      <%= ann.anniversary_date %> 
   <% end %> 
```

谢谢！

**楷模**

```
class User < ActiveRecord::Base
 has_many :friends
 has_many :occasions
 has_many :user_holidays
 has_many :holidays, :through => :user_holidays
 has_many :anniversaries

class Holiday < ActiveRecord::Base
  has_many :user_holidays
  has_many :users, :through => :user_holidays    
end

class Friend < ActiveRecord::Base
  belongs_to :user
end

class Anniversary < ActiveRecord::Base
  belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:37:05.880

假设您想提高效率（您可以组合数组，对它们进行排序并完成它），没有直接的方法可以通过关系来做到这一点。我假设你有一个事件模型，它对用户有一个外键，在这种情况下，

```
Events.where(:user_id => @user.id).where(<EVENT DATE FILTERS>).order("event_date DESC") 
```

- 编辑 -

这很脏，但我想不出任何其他直接的 db 方式来实现这一点。

```
events = @user.holidays.map{|h| [h.name, h.date, :holiday]} + \
         @user.friends.map{|f| [f.name, f.dob, :birthday]} + \
         @user.anniversaries.map{|a| [a.spouse_name, a.anniversary.date, :anniversary]}
events.map!{|event| {:name => event[0], :date => event[1], :event_type => event[2]}}
# You now have an array of hashes with the events name, date and type.

events.sort{|a, b| a[:date] <=> b[:date]}  # sort / filter 
```

# c# - 如何将嵌套的 JSON / C# 数组加载到视图模型中？使用淘汰赛，jQuery

> ID：11020995
> 
> 赞同：1
> 
> 时间：2012-06-13T18:21:18.530
> 
> 标签：c#, javascript, asp.net-mvc, knockout.js, viewmodel

SuperNoob 在这里，尝试将不同的多个“选项”作为字符串 [] 或对象加载到可以使用 Knockout 添加到购物车的“产品”中：（来自 John Papa 的 PluralSight Knockout Change Tracking 示例）这是看法：

```
<div>
    <span>OptionsArray: </span>
    <ul data-bind="foreach: optionsArray">
        <li data-bind="text: $data"></li>
    </ul>
</div> 
```

这是转换为 C# 的 JSON：

```
{Id = 4, ModelId = 1, SalePrice = 1.00, ListPrice = 1.00, Rating = 5, Photo = "smallCoffee.jpg", CategoryId = 1, ItemNumber = "smallCoffee", Description = "Small Coffee", Model = new Model(){ Name = "Small Coffee", Brand = "Tim Hortons", Id = 1 }, Category = drinkCat, Options = new Options(){Name = "Sugar"}, OptionsArray = new string[]{"Sugar", "Cream"}} 
```

这个 javascript 函数有效，将 json 加载到产品的“产品”数组中，但我无法让它遍历每个产品的多个选项。这是视图模型的功能部分：

```
loadProductsCallback = function (json) {
            my.vm.tracker().markCurrentStateAsClean();
            $.each(json, function (i, p) {
                products.push(new my.Product(selectedProduct)                            
                        .id(p.Id)
                        .salePrice(p.SalePrice)
                        .photo(p.Photo)
                        .category(new my.Category()
                        .id(p.Category.Id)
                        .name(p.Category.Name)
                            )
                        .model(new my.Model()
                        .id(p.Model.Id)
                        .name(p.Model.Name)
                        .brand(p.Model.Brand)
                            )
                        .options(new my.Options()
                        .name(p.Options.Name)
                            )                            
                        .description(p.Description)
                        .rating(p.Rating)
                        .stateHasChanged(false);
                        $.each(p.OptionsArray, function(i, o) { p.optionsArray.push(o);});
                );
            }); 
```

这是获取所有数据的 Product 对象：

```
Product = function (selectedItem) {
    var self = this;
    self.id = ko.observable();
    self.salePrice = ko.observable();
    self.photo = ko.observable();
    self.model = ko.observable();
    self.options = ko.observable();
    self.optionsArray = ko.observableArray(["1", "2"]);
    self.category = ko.observable();
    self.description = ko.observable();
    self.rating = ko.observable();
    self.isSelected = ko.computed(function () {
        return selectedItem() === self;
    });
    self.isDrink = ko.computed(function () {
        return this.category() ? this.category().id() === 1 : false;
    }, self),
    self.isFood = ko.computed(function () {
        return this.category() ? this.category().id() === 4 : false;
    }, self),

    self.shortDesc = ko.computed(function () {
        return this.model() ? this.model().name() : "";
    }, self),
    self.opt = ko.computed(function () {
        return this.options() ? this.options().name() : "";
    }, self),
    self.optQty = ko.computed(function () {
        return this.options() ? this.options().qty() : "";
    }, self),
    self.photoUrl = ko.computed(function () {
        return photoPath + this.photo();
    }, self),
    self.rating.subscribe(function () {
        this.stateHasChanged(true);
    }, self),
    self.stateHasChanged = ko.observable(false);
}; 
```

loadProductsCallback 函数工作正常，除了添加嵌套的 OptionsArray 的部分。我尝试了嵌套的 $.each 函数，只是简单的 .optionsArray(p.OptionsArray)。

还有更多代码：我希望这足以说明问题。

亲爱的 Stackers，如何使用此函数将 OptionsArray 正确加载到 Products 对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:36:24.527

不确定我是否完全理解您的代码，但这里有。

您正在新建一个产品，然后尝试遍历一个集合并将其映射到选项。除非您将结果推送到源对象。

那这个呢。

```
loadProductsCallback = function (json) {
    my.vm.tracker().markCurrentStateAsClean();
    $.each(json, function (i, p) {
        var newProduct = new my.Product(selectedProduct)                            
                .id(p.Id)
                .salePrice(p.SalePrice)
                .photo(p.Photo)
                .category(new my.Category()
                .id(p.Category.Id)
                .name(p.Category.Name)
                    )
                .model(new my.Model()
                .id(p.Model.Id)
                .name(p.Model.Name)
                .brand(p.Model.Brand)
                    )
                .options(new my.Options()
                .name(p.Options.Name)
                    )                            
                .description(p.Description)
                .rating(p.Rating)
                .stateHasChanged(false);
        $.each(p.OptionsArray, function(i, o) { 
            newProduct.optionsArray.push(o);
        });

        products.push(newProduct);
    });
} 
```

希望这可以帮助。