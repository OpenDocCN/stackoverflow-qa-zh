# StackOverflow 问答 11386000-11386999

# ios - 使用情节提要从 tableview 到 webview

> ID：11386004
> 
> 赞同：0
> 
> 时间：2012-07-08T19:29:56.647
> 
> 标签：ios, webview, storyboard, tableview

大家下午好。我对 iOS 编程很陌生。多年来一直为 VB 开发，这是一个巨大的差异。

我编写了一个小型 Storyboarded 应用程序，其中包含一个启动画面、一个表格视图以及一个用于显示网页的 Web 视图。Storyboard 很好用，tableview 很好用，但是，当我尝试将 URL 推送到 Web 视图时，我得到的只是：“应用程序试图在目标上推送一个 nil 视图控制器

我读到我没有正确分配某个地方，但犹豫要在这里复制我的所有代码，因为这会浪费很多空间。

当按下表格行之一时，代码如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

[[self navigationController] pushViewController:self.detailViewController animated:YES];

NSURL *urlInSafari = [NSURL URLWithString:@"http://www.google.com"];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:urlInSafari];

[self.detailViewController.webView loadRequest:urlRequest];

} 
```

我不确定这是做什么的，但是默认情况下创建应用程序时，它会卡在一个标签中，当按下表格行时，该标签需要一个日期/时间。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"]) {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    NSDate *object = [_objects objectAtIndex:indexPath.row];
    [[segue destinationViewController] setDetailItem:object];
}
} 
```

我是否需要将destinationViewController 更改为DetailViewController 上的WebView？

一切正常，但在 WebView 上打开链接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:38:21.417

看起来 self.detailViewController 为零。如果 detailViewController 是一个插座，请确保它已连接到您的 XIB 文件中。

# python - 如何将两个参数传递给 url（没有 GET）？

> ID：11386005
> 
> 赞同：3
> 
> 时间：2012-07-08T19:29:58.127
> 
> 标签：python, django, django-urls

不久前，有人建议我在使用 Django 时不要在我的 url 中使用 GET 方法，因为这样更干净。

使用一个参数效果很好：

```
(r'^call/add/(?P<call_id>\d+)/$', call_view),

http://127.0.0.1:8000/call/add/1/ 
```

但是我怎么可能用两个参数使用相同的方法呢？

由于我仍在学习，请告诉我更好的方法。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:36:14.107

您只需在背面添加另一个，例如`http://127.0.0.1:8000/call/add/1/foo/2`. 您必须将第二个参数添加到正则表达式中，例如`(r'^call/add/(?P<call_id>\d+)/foo/(?P<foo_id>\d+)$', call_view),`.

您还必须更改控制器：`def call_view(request, call_id, foo_id):`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T19:39:51.353

```
(r'^call/add/(?P<call_id>\d+)/(?P<receiver_id>\d+)/$', call_view),

http://127.0.0.1:8000/call/add/1/903256 
```

你需要添加`def call_view(request, call_id, receiver_id):`views.py

或者你可以你 `w+`而不是`d+`传递字符串 aa 变量

```
(r'^call/add/(?P<call_id>\d+)/(?P<receiver_name>\w+)/$', call_view),

http://127.0.0.1:8000/call/add/1/Kave 
```

欲了解更多信息：[https ://docs.djangoproject.com/en/dev/topics/http/urls/](https://docs.djangoproject.com/en/dev/topics/http/urls/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T19:36:05.603

您可以指定多个参数，如下所示：

```
(r'^call/add/(?P<call_id>\d+)/(?P<other_value>\d+)/$', call_view), 
```

你的看法应该是这样的：

```
def call_view(request, call_id, other_value):
    # view code here 
```

# javascript - 如何添加延迟计时器？

> ID：11386010
> 
> 赞同：2
> 
> 时间：2012-07-08T19:30:16.027
> 
> 标签：javascript, jquery, timer

我有这段代码可以让菜单项向下和向上滑动。我想添加一个计时器，以便向下滑动然后向后滑动有延迟。

```
$(function () {
    $("#menu").find("li").each(function () {
        if ($(this).find("ul").length > 0) {
            $(this).mouseenter(function () {
                $(this).find("ul").stop(true, true).slideDown();
            });
            $(this).mouseleave(function () {
                $(this).find("ul").stop(true, true).slideUp();
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:32:37.787

看起来你正在用 jQuery 编写 javascript

jQuery 有一个内置`.delay`的动画队列功能。

在您的示例中，将滑动动画延迟 300 毫秒看起来像

```
$(this).find("ul").stop(true, true).delay(300).slideDown(); 
```

查看[jQuery 的延迟](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:51:24.743

一个聪明的方法是在触发 mouseleave 之前添加一个悬停意图*等待***：**

## *[jsBin 演示](http://jsbin.com/obemuw/edit#javascript,html,live)*

```
$("#menu").find("li:has(ul)").on('mouseenter mouseleave',function( e ){
     var $UL = $(this).find('ul');
     if(e.type==='mouseenter'){
          clearTimeout( $(this).data('wait') );
          $UL.stop(1,1).slideDown();
     }else{            
          $(this).data('wait', setTimeout(function(){
              $UL.stop().slideUp();
          },180) );     
     } 
}); 
```

*   而不是`if ($(this).find("ul").length > 0) {`仅使用 use:仅在*具有*子元素的元素`("li:has(ul)")`
    上触发事件。`li` *`ul`*
**   为. `e`_`mouseenter mouseleave`*   如果`e`事件 == `mouseenter`.....`else`是`mouseleave`.*   比清除`data`名为“等待”的属性并向下滑动孩子`ul`*   现在，**让**原始`li`元素到达“远处”，`ul`我们必须跨越一个空白（演示），这通常会立即触发“slideUp（）”，但我们在该`li`数据属性中设置了一个超时计数器，它将等待运行前约 180 毫秒。*   到达'distant'`ul`元素——作为超时'li'的子元素，我们清除超时（步骤1）'保持'mouseenter状态。*

 *使用约 180 毫秒或您认为用鼠标到达“远处”UL 元素所需的时间*

# c# - 从 dll 调用方法时 C# 应用程序块

> ID：11386011
> 
> 赞同：2
> 
> 时间：2012-07-08T19:30:17.550
> 
> 标签：c#, c++

我目前正在探索 C# 中的 DLL 导出函数和 P/invoke。我创建了非常简单的 .dll：

测试.h

```
#ifndef TEST_DLL_H
#define TEST_DLL_H
extern "C" __declspec(dllexport) const char * __cdecl hello ();
extern "C" __declspec(dllexport) const char * __cdecl test ();    
#endif  // TEST_DLL_H 
```

测试.cpp

```
#include <stdlib.h>
#include "test.h"
#include <string.h>

const char* hello()
{
    char *novi = (char *)malloc(51);
    strcpy(novi, "Test.");

    return novi;
}

const char * test()
{
    return "Test.";
} 
```

我已经编译它并在 C# 项目中使用，如下所示：

```
 [DllImport("test.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern IntPtr hello();

    [DllImport("test.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern string test();

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(test());
        IntPtr a =  hello();
        MessageBox.Show(Marshal.PtrToStringAnsi(a));
    } 
```

但它不起作用。`test()`被成功调用，我得到了正确的字符串。但`hello()`只是挂断程序。如果我从`hello()`定义中删除 malloc 行并返回常量，一切正常，所以我想我现在知道 malloc 存在问题。

另外，我在某处看到返回类型为 char* 时不应使用该字符串。如果这是真的，我们为什么要使用 IntPtr？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:47:02.567

跨 DLL 边界返回字符串的函数很难从 C 或 C++ 可靠地调用，当你从 C# 中调用时，它并没有变得更好。问题在于调用者将如何释放字符串缓冲区。hello() 需要这样做，而 test() 则不需要。很难猜到的东西。hello() 函数需要使用 free() 函数，使用与调用 malloc() 完全相同的分配器*。*只有当 DLL 和调用者共享相同的 CRT 实现时，这才有效。可能性很小。

pinvoke marshaller 也释放字符串缓冲区，它必须这样做。并且使用唯一合理的选择 CoTaskMemFree()。它使用 COM 使用的默认分配器。这不是一个好的结局，您的 C 代码没有使用 CoTaskMemAlloc()。这可能的结果取决于操作系统。在 Vista 及更高版本上，您的程序将因 AccessViolation 而死，这些 Windows 版本使用严格的堆分配器，旨在使行为不端的程序崩溃。在 XP 上，您会遇到内存泄漏和堆损坏之间的问题，听起来像是您选择了第二个选项。

将返回值声明为 IntPtr 将是一个好的结局。好吧，您的程序不会崩溃，您仍然有无法插入的内存泄漏。没有办法可靠地调用 free() 。或者在您的 C 代码中使用 CoTaskMemAlloc() 以便 pinvoke 编组器的发布调用将起作用。

但实际上，不要像这样编写 C 代码。始终使用调用者分配的内存，因此永远不会猜测谁拥有内存。这需要类似于以下的函数签名：

```
extern "C" __declspec(dllexport) 
int hello(char* buffer, int bufferSize); 
```

# c++ - 我怎么知道哪个 QTcpSocket 发出了 readyRead() 信号？

> ID：11386014
> 
> 赞同：2
> 
> 时间：2012-07-08T19:30:30.040
> 
> 标签：c++, qt, signals-slots, qtcpsocket

我创建了一个 hello-world 程序来帮助我理解 QTcpServer 和 QTcpSocket 是如何工作的。在其中，QTcpServer 接受新连接并将它们的`readyRead()`信号连接到`MainWindow::onNewData()`它们的新数据附加到纯文本控件的插槽。

问题是可以同时打开多个套接字。所以当我得到`readyRead()`信号并且我想用 读取数据时`readAll()`，我怎么知道是哪个套接字发出的呢？

这是代码的相关部分。我根本不在这里存储 QTcpSocket 指针，但即使我这样做了，我仍然不知道它们中的哪一个发出了信号。

```
 // constructor
    server = new QTcpServer(this);
    connect(server, SIGNAL(newConnection()), this, SLOT(onNewConnection()));
    server->listen(QHostAddress::LocalHost, 3333);

void MainWindow::onNewConnection()
{
    QTcpSocket* socket = server->nextPendingConnection();
    connect(socket, SIGNAL(disconnected()), socket, SLOT(deleteLater()));
    connect(socket, SIGNAL(readyRead()), this, SLOT(onNewData()));
}

void MainWindow::onNewData()
{
    ui->plainTextEdit->appendPlainText(WHICH_SOCKET_EMITTED_IT()->readAll());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:46:56.467

最好的方法（在我看来）是实现你自己的`Client`类，它将封装`QTcpSocket`

```
class Client : public QObject
{
Q_OBJECT
public:
    Client(QTcpSocket *socket)
        : m_socket(socket)
{
    connect(socket, SIGNAL(readyRead()), this, SLOT(onNewData()));
}

private slots:
    void onNewData();

private:
    QTcpSocket *m_socket;
}; 
```

最简单的方法：`QObject::sender()`在槽函数中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-05T08:18:04.567

Using a C++11 lambda functions in the connect statement, it's also possible to do this without the `sender()` function:

```
connect(socket, &QIODevice::readyRead,
        [this, socket()] { readData(socket) }); 
```

and a matching function (which does not need to be but can be a slot):

```
void foo::readData(QTcpSocket *socket)
{
    socket->whatever();
} 
```

# ruby-on-rails - 第 9 章，Hartl ROR 第 9.2.2 节

> ID：11386015
> 
> 赞同：3
> 
> 时间：2012-07-08T19:30:32.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, railstutorial.org, before-filter

我不断收到相同的失败消息，但我似乎无法弄清楚出了什么问题。

失败：

1) 访问编辑页面的用户控制器中的非登录用户的身份验证授权失败/错误：它 { should have_selector('title', text: 'Sign in') } 预期 css "title" 和文本 "Sign in " 返回一些东西 # ./spec/requests/authentication_pages_spec.rb:69:in `block (6 levels) in '

2) 用户控制器中未登录用户的身份验证授权提交更新操作失败/错误：指定 { response.should redirect_to(signin_path) } 预期响应为 <:redirect>，但为 <200> # ./spec/requests/authentication_pages_spec.rb:74:in `block (6 levels) in '

在 2.31 秒内完成 69 个示例，2 次失败

失败的例子：

rspec ./spec/requests/authentication_pages_spec.rb:69 # 访问编辑页面的用户控制器中未登录用户的身份验证授权 rspec ./spec/requests/authentication_pages_spec.rb:74 # 未签名的身份验证授权-在用户控制器中的用户中提交更新操作

这是 authentication_pages_spec.rb：需要'spec_helper'

描述“身份验证”做

```
subject { page }

describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
        before { click_button "Sign in" }

        it { should have_selector('title', text: 'Sign in') }
        it { should have_selector('div.alert.alert-error', text: 'Invalid') }

        describe "after visiting another page" do
            before { click_link "Home" }
            it { should_not have_selector('div.alert.alert-error') }
        end
    end

    describe "with valid information" do
        let(:user) { FactoryGirl.create(:user) }
        before do
            fill_in "Email", with: user.email
            fill_in "Password", with: user.password
            click_button "Sign in"
        end

        it { should have_selector('title', text: user.name) }
        it { should have_link('Profile', href: user_path(user)) }
        it { should have_link('Sign out', href: signout_path) }
        it { should_not have_link('Sign in', href: signin_path) }

        describe "followed by signout" do
            before { click_link "Sign out" }
            it { should have_link('Sign in') }
        end
    end 
end

describe "with valid information" do
    let(:user) { FactoryGirl.create(:user) }
    before {sign_in user }

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Settings', href: edit_user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }
end

describe "authorization" do

       describe "for non-signed-in users" do
        let(:user) { FactoryGirl.create(:user) }

        describe "in the Users controller" do

            describe "visiting the edit page" do
                before { visit edit_user_path(user) }
                it { should have_selector('title', text: 'Sign in') }
            end

            describe "submitting to the update action" do
                before { put user_path(user) }
                specify { response.should redirect_to(signin_path) }
            end
        end
       end
end
end 
```

这是 user_pages_spec.rb

需要'spec_helper'

描述“用户页面”做

```
subject { page }

describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1', text: 'Sign up') }
    it { should have_selector('title', text: 'Sign up') }
end

describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
        it "should not create a user" do
            expect { click_button submit }.not_to change(User, :count)
        end

        describe "error messages" do
             before { click_button submit }

            it { should have_selector('title', text: 'Sign up') }
            it { should have_content('error') }
        end
    end

    describe "with valid information" do
        before do
            fill_in "Name", with: "Example User"
            fill_in "Email", with: "user@example.com"
            fill_in "Password", with: "foobar"
            fill_in "Confirmation", with: "foobar"
        end

        it "should create a user" do
            expect { click_button submit }.to change(User, :count).by(1)
        end

        describe "after saving the user" do
            before { click_button submit }
            let(:user) { User.find_by_email('user@example.com') }

            it { should have_selector('title', text: user.name) }
            it { should have_selector('div.alert.alert-success', text: 'Welcome') }
            it { should have_link('Sign out') }
        end
    end
end

describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user)}

    it { should have_selector('h1', text: user.name) }
    it { should have_selector('title', text: user.name) }
end

describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
        sign_in user
        visit edit_user_path(user)
    end

    describe "page" do
        it { should have_selector('h1', text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
    end

    describe "with valid information" do
        let(:new_name) { "New Name" }
        let(:new_email) { "new@example.com" }
        before do
            fill_in "Name", with: new_name
            fill_in "Email", with: new_email
            fill_in "Password", with: user.password
            fill_in "Confirm Password", with: user.password
            click_button "Save changes"
        end

        it { should have_selector('title', text: new_name) }
        it { should have_selector('div.alert.alert-success') }
        it { should have_link('Sign out', href: signout_path) }
        specify { user.reload.name.should == new_name }
        specify { user.reload.email.should == new_email }
    end
  end
end 
```

这是 users_controller.rb：

```
 class UsersController < ApplicationController

def show
    @user = User.find(params[:id])
end

def new
    @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        sign_in @user
        flash[:success] = "Welcome to the Sample App!"
        redirect_to @user
    else
        render 'new'
    end
end

def edit
    @user = User.find(params[:id])
end

def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
        flash[:success] = "Profile updated"
        sign_in @user
        redirect_to @user
    else
        render 'edit'
    end
end

private

def signed_in_user
    redirect_to signin_path, notice: "Please sign in." unless signed_in?
end
end 
```

这是edit.html.erb：

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

这是实用程序.rb：

```
def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
        base_title
    else
        "#{base_title} | #{page_title}"
    end
end

def sign_in(user)
    visit signin_path
    fill_in "Email", with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"

    cookies[:remember_token] = user.remember_token
end 
```

这是_header.html.erb：

```
<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li>
          <li><%= link_to "Help", help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", '#' %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign in", signin_path %></li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

这些是我在第 9 章中更改的文件，但如果您认为还有其他问题可能是问题，请告诉我，我可以发布它们。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:21:36.650

看起来你错过`before_filter :signed_in_user, only: [:edit, :update]`了`UsersController`. 再看一下[代码清单 9.12](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code:authorize_before_filter)。

# android - KSOAP 2 复杂类

> ID：11386021
> 
> 赞同：2
> 
> 时间：2012-07-08T19:32:14.297
> 
> 标签：android, ksoap

我需要在里面发送带有 OrderItem 类数组的 OrderItemList 类，我尝试了这个但给了我错误。无法序列化：foo.foo.OrderItemList@461e0bf8

提前感谢您的时间。

```
SoapObject request = new SoapObject(NAMESPACE, WebService);
        OrderItemList orderItemList = null;

            PropertyInfo pinfo = new PropertyInfo();
            pinfo.name = "orderItems";
            pinfo.namespace = NAMESPACE ;
            pinfo.type = OrderItemList.class;

            ArrayList<OrderItem> orderItemListT = new ArrayList<OrderItem>();
            orderItemListT.add(new OrderItem(9,9,"",9,9,9,9));
            orderItemList = new OrderItemList(orderItemListT);

            request.addProperty(pinfo,orderItemList);

    SoapSerializationEnvelope envelope =
        new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.addMapping(NAMESPACE, "orderItems", orderItemList.getClass());
    envelope.addMapping(NAMESPACE, "OrderItem", OrderItem.class); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request); 
    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);

    androidHttpTransport.call("http://tempuri.org/" + WebService , envelope); 
```

订单项 >

```
public class OrderItem {
    public int ID;
    public int OrderId;
    public String FinalCode;
    public int Quantity;
    public double Price;
    public double Discount;
    public int Status;

    public OrderItem(int id, int orderId, String finalCode ,int quantity, double price, double discount, int status) {
    ID = id;
    OrderId = orderId;
    FinalCode = finalCode;
    Quantity = quantity;
    Price = price;
    Discount = discount;
        Status = status;
    }
} 
```

订单项列表 >

```
public class OrderItemList {
    public ArrayList<OrderItem> OrderItemList;

    public OrderItemList(ArrayList<OrderItem> orderItemList) {
        OrderItemList = orderItemList;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:28:38.900

在你的类中实现 Serializable

```
import java.io.Serializable;

public class OrderItem implements Serializable {
    public int ID;
    public int OrderId;
    public String FinalCode;
    public int Quantity;
    public double Price;
    public double Discount;
    public int Status;

    public OrderItem(int id, int orderId, String finalCode ,int quantity, double price, double discount, int status) {
        ID = id;
        OrderId = orderId;
        FinalCode = finalCode;
        Quantity = quantity;
        Price = price;
        Discount = discount;
        Status = status;
    }
} 
```

# cakephp - Cakephp视图不起作用

> ID：11386023
> 
> 赞同：0
> 
> 时间：2012-07-08T19:32:19.640
> 
> 标签：cakephp, view, controller

例如，当我想查看时`localhost/pages/index`，会显示 localhost 页面。控制器正在工作（调试显示控制器中定义的正确值）。也正确设置了标题`localhost/pages/index`（“帖子”）。有人可以帮助我吗？

该页面位于`/app/View/webroot`

此外，视图正在工作，当`die()`插入到它的末尾时`index.ctp`会正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:48:35.670

`localhost/pages/index`指的是一个被调用的`index.ctp`文件`app/View/pages`

`app/View/webroot`适用于您的资产 - 图像、css、js 等。

# python - 如何与金字塔中的所有模板共享选定数量的数据？

> ID：11386024
> 
> 赞同：1
> 
> 时间：2012-07-08T19:32:26.070
> 
> 标签：python, pyramid

我阅读了关于使[用户对象](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/user_object.html)适用于所有请求的食谱文章，但我可能不完全理解它，因为我看不出它是否与我的问题有关。

我在我正在处理的网站上渲染了很多模板，每个模板需要不同的用户信息。例如，像 SO 上的这个页面一样，我的每个页面都需要显示我的用户名、积分、通知数量、徽章数量等。我拥有所有这些信息，但我发现自己必须将其添加到我发送到的每个请求字典中像这样的模板：

```
return dict(page=page, name=name, save_url=save_url,
                logged_in=authenticated_userid(request), title='add new', url='/new', points=points, num_badges=badges) 
```

有没有办法将所有这些组合一次，这样我就可以向每个视图发送一个条目？我敢肯定每次都运行相同的查询并不好，但必须为每个视图都键入它也很烦人。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:24:48.627

最简单的方法是在一种方法中生成您的“通用”信息，返回一个字典，然后用该信息更新您的本地视图字典

```
local = dict(page=page, name=name, save_url=save_url, title='add new',
     url='/new', points=points, num_badges=badges)
local.update(retrieve_common_information(request))
return local 
```

另一种方法是使用类似[`pyramid_viewgroup`](https://pypi.python.org/pypi/pyramid_viewgroup)（文档现在位于[新位置](http://pyramid_viewgroup.readthedocs.org/en/latest/)）之类的东西，您可以在其中将页面的常见“片段”的呈现委托给单独的视图。

一种这样的视图可以处理您想要呈现的常见用户信息，并在任何地方重复使用。

# java - 在 2 个地方绘制 jcomponent

> ID：11386025
> 
> 赞同：0
> 
> 时间：2012-07-08T19:32:29.483
> 
> 标签：java, swing, graphics

我正在尝试绘制滚动图标，但我很困惑。我现在拥有的所有代码都是位于 5x5 静态网格的 JPanel（自定义绘制方法）上的图标，这些图标是我在 5 秒内绘制的。

所以我有图标坐在他们自己的小组件上，比如 50x50，在一个网格上，所以一列看起来像这样：

图标 1

图标 2

图标 3

图标 4

我希望能够将它们向下拖动并在循环中绘制它们，这样如果你向下拖动一点，它就会像这样绘制：

图标 4 的下半部分

图标 1

图标 2

图标 3

图标 4 的上半部分

我的问题只是我将如何绘制/拆分图标以将其分成两半（底部的一部分将离开屏幕，另一部分位于顶部。由于它正在滚动，我希望拆分图标相同对象（如果可能）（在屏幕外时仅在 2 个不同的位置），这样当它被完全向下拖动时，顺序将更改为：

图标 4

图标 1

图标 2

图标 3

等等。

非常感谢！

# .net - 最新版本的 Dapper 有什么变化？

> ID：11386026
> 
> 赞同：1
> 
> 时间：2012-07-08T19:32:36.570
> 
> 标签：.net, dapper

[我在http://code.google.com/p/dapper-dot-net/source/list](http://code.google.com/p/dapper-dot-net/source/list)看到了 dapper.net 的 1.9 和 1.10 版本

这些新版本有什么变化？某处有更改日志吗？

查询缓存是否曾经得到修复以使其不会无限增长？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:34:21.843

没关系。我刚刚在 nuspec 文件中找到了以下内容：

```
 * 1.13   - Added support for Table Valued Parameters as part of anonymous objects
  *        - Added support for async
  *        - Added support for sharing strategies between databases
  *        - Rewrote dynamic implementation
  * 1.12.1 - Minor deploy glitch (should now include intellisense files!)
  * 1.12   - Better automatic type-mapping (int vs long, float vs double, etc)
  *          Fixed: bug with indexer properties
  * 1.11   - Custom type-map support
  * 1.10   - Fixed: error-handling could lose original exception if reader closed
  * 1.9    - Added: better schema change detection
  *          Fixed: enum support for T in Query-of-T
  *          Added: dictionary support for parameters
  * 1.8    - Started release notes
  *          Important: Dapper is now shipping as a DLL which will work on .net 3.5 or .net 4.0,
  *          This improves the debugging experience as you no longer break into dapper when SQL fails.
  *          Added: ParameterNames on DynamicParameters 
```

# linux - GNU Octave，将数字四舍五入到单位精度

> ID：11386033
> 
> 赞同：17
> 
> 时间：2012-07-08T19:33:16.603
> 
> 标签：linux, matrix, rounding, precision, octave

在 GNU Octave 版本 3.4.3 中，我想在这样的矩阵内容上将矩阵四舍五入到 2 个单位的精度。

```
mymatrix=[1.1234567, 2.12345; 3.1234567891, 4.1234];
disp(mymatrix); 
```

这打印：

```
1.1235   2.1235
3.1235   4.1234 
```

如您所见， disp 将精度强制为“5”，我希望单位精度为 2。我该怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-08T19:59:50.750

## 如何在 Octave 中舍入矩阵中的元素：

有许多不同的方法可以四舍五入矩阵和八度音阶中的数字。

## 选项 1，使用 sprintf 格式功能

```
mymatrix=[100.1234567, 2.12345; 3.1234567891, 4.1234];
rows = rows(mymatrix);
cols = columns(mymatrix);
for i = 1:rows
  for j = 1:cols
    sprintf("%5.2f", mymatrix(j,i))
  endfor
endfor 
```

**输出**，注意“%5.2f”标记。'f' 表示期望浮点数，5 表示占用 5 个空格。2 表示小数点后 2 个单位精度。

```
ans = 100.12
ans =   3.12
ans =   2.12
ans =   4.12 
```

## 选项 2，使用 eval 和 mat2str 舍入到有效数字

```
mymatrix2=[100.1234567, 2.12345; 3.1234567891, 4.1234];
j = mat2str(mymatrix2, 3);
mymatrix2=eval(j) 
```

**输出**，矩阵四舍五入为 3 位有效数字，注意 100.123 舍入为 100，而 2.12345 舍入为 2.12

```
mymatrix2 = 100.0000     2.1200
              3.1200     4.1200 
```

## 选项3，使用round函数

round 函数在 Octave 中没有精度参数。但是，您可以通过将矩阵中的每个项目乘以 100，将其四舍五入到最接近的 int，然后将每个项目除以 100 来绕过它：

```
mymatrix=[100.1234567, 2.12345; 3.1234567891, 4.1234];
round(mymatrix .* 100) ./ 100 
```

**输出**，轮次正确发生：

```
ans = 100.1200     2.1200
        3.1200     4.1200 
```

## 选项 4，指定 output_precision(num)

您注意到上面的选项 3 保留了尾随零，这可能是不可取的，因此您可以通过设置 output_precision 来告诉它们消失：

```
mymatrix=[100.1234567, 2.12345; 3.1234567891, 4.1234];
disp(mymatrix);
output_precision(3)
disp(mymatrix) 
```

**输出**：

```
100.1235     2.1235
  3.1235     4.1234

100.123     2.123
  3.123     4.123 
```

Octave 在尝试进行舍入时有一些奇怪的行为，因为 octave 努力将统一的舍入统一应用于矩阵中的所有项目。因此，如果您有多个具有完全不同值的列，则 octave 会看到一个很小的值并说：“我应该将其转换为类似的指数`1.0e-04`，因此相同的指数将应用于矩阵中的整个数据结构。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-08T13:43:09.553

对于那些想要让它工作而不深入讨论为什么会这样的人（即 octave`round`仍然不支持定义精度的第二个参数）。

**解决方法**：

```
a = [0.056787654, 0.0554464; 0.056787654, 0.0554464];
a
round_digit = 2;
if exist('OCTAVE_VERSION', 'builtin') ~= 0;
     a = a.*(10^(round_digit));
     if (a >= 0) a = floor(a); else a = ceil(a); endif;
     a = a.*(10^(-round_digit));
else
     a = round(a, round_digit);
end
a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:17:50.420

**我发现以下 GNU Octave 函数非常有用。这使您可以为 MxN 矩阵的每一列指定自定义舍入。**

**将此函数放入名为 display_rounded_matrix.m 的文件中**

```
function display_rounded_matrix(matrix, precision, outputFile)
  %precision can be a single number, applied to all, or a 
  %matrix of values to be applied to the columns. 

  space_between_columns = "";
  format_part = "%10.";

  precision_format = cell(columns(precision), 1);
  for i = 1:columns(precision),
    precision_format{i,1} = strcat(format_part, num2str(precision(1,i)), "f");
  end

  if (nargin == 3 && outputFile != 0)
    if (rows(precision) == 1 && columns(precision) == 1)
      rows = rows(matrix);
      cols = columns(matrix);
      format = strcat(format_part, num2str(precision), "f");
      for i = 1:rows
        for j = 1:cols
          fprintf(outputFile, sprintf(format, matrix(i,j)));
          if (j ~= cols)
            fprintf(outputFile, space_between_columns);
          end
        end
        if i ~= rows
          fprintf(outputFile, "\n");
        end
      end
      fprintf(outputFile, "\n");
    elseif (rows(precision) == 1 && columns(precision) == columns(matrix))
      %here we have to custom make the rounding
      rows = rows(matrix);
      cols = columns(matrix);
      for i = 1:rows
        for j = 1:cols
          fprintf(outputFile, sprintf(precision_format{j,1}, matrix(i,j)));
          if (j ~= cols)
            fprintf(outputFile, space_between_columns);
          end
        end
        if i ~= rows
          fprintf(outputFile, "\n");
        end
      end
      fprintf(outputFile, "\n");
    else
      disp("STOP!, you invoked display_rounded_matrix with bad parameters");
    end

  elseif (nargin == 3 && outputFile == 0)
%print to screen instead

if (rows(precision) == 1 && columns(precision) == 1)
      rows = rows(matrix);
      cols = columns(matrix);
      format = strcat(format_part, num2str(precision), "f");
      for i = 1:rows
        for j = 1:cols
          printf(sprintf(format, matrix(i,j)));
          if (j ~= cols)
            printf(space_between_columns);
          end
        end
        if i ~= rows
          printf("\n");
        end
      end
      printf("\n");
    elseif (rows(precision) == 1 && columns(precision) == columns(matrix))
      %here we have to custom make the rounding
      rows = rows(matrix);
      cols = columns(matrix);
      for i = 1:rows
        for j = 1:cols
          %format = strcat(format_part, num2str(precision(1,j)), "f");
          format = [format_part num2str(precision(1,j)) "f"];
          printf(sprintf(format, matrix(i,j)));
          if (j ~= cols)
            printf(space_between_columns);
          end
        end
        if i ~= rows
          printf("\n");
        end
      end
      printf("\n");
    else
      disp("STOP!, you invoked display_rounded_matrix with bad parameters");
    end

  elseif (nargin == 2)
    display_rounded_matrix(matrix, precision, 0);
  else
    disp("STOP!, you invoked display_rounded_matrix with wrong number of arguments");
  end
end 
```

**然后你可以像这样调用它：**

```
A = [ 53.0 410400  0.0094; 52.56 778300 -0.0069; 53.56 451500 -0.0340 ];
specified_rounding = [2 0 5];
display_rounded_matrix(A, specified_rounding, outputFile=0); 
```

**这将在屏幕上显示以下内容（注意每列的不同舍入！**

```
octave:5> display_rounded_matrix(A, specified_rounding, outputFile=0);
  53.00    410400   0.00940
  52.56    778300  -0.00690
  53.56    451500  -0.03400 
```

**第三个参数是文件句柄，您也可以将输出重定向到文件：**

```
outputFile = fopen("output.txt", "w");
A = [ 53.0 410400  0.0094; 52.56 778300 -0.0069; 53.56 451500 -0.0340 ];
specified_rounding = [2 0 5];
display_rounded_matrix(A, specified_rounding, outputFile); 
```

**它将执行与上述相同的操作，但将输出发送到 output.txt**

# java - 在没有 if 语句的情况下从数组中获取 instanceof 类型

> ID：11386039
> 
> 赞同：0
> 
> 时间：2012-07-08T19:34:19.997
> 
> 标签：java

注意：这是我的问题的抽象版本，因为许多实际代码可能会令人困惑并且与问题无关。

我有一个对象数组/数组列表，它们都从另一个类继承它们的信息。

例如

```
class A

class B extends A

class C extends A

class D extends A 
```

B、C 和 D 类的对象都进入 A 类型的数组。

现在，当它们出现时，我想将它们转换回原始类型以使用特定的方法/变量等。**我怎样才能做到这一点而不必通过一组*if*语句来尝试找出它的子类类型是？**它使我的代码非常不灵活，因为每次我添加一个扩展类 A 的新类时，我都必须编写一组新的*if语句。有没有办法简单地返回对象所在类的确切名称？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:40:48.583

如果你只想要一个对象的类的名称，你可以使用

```
a.getClass().getName(); // or .getSimpleName(); 
```

即使`a`被声明为超类的类型，这也将起作用。假设您的问题中的类结构：

```
A a = new B();
System.out.println(a.getClass().getSimpleName());
a = new C();
System.out.println(a.getClass().getSimpleName()); 
```

将打印：

> 乙
> 丙

**编辑**

您在评论中描述的用例可以通过多种方式处理。最灵活的可能是[多重调度模式](http://en.wikipedia.org/wiki/Multiple_dispatch)（与[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)相关）：

1.  定义一个接口

    公共接口 SpriteActor { void actOn(A anASprite); 无效动作（B aBSprite）；// ETC。 }

2.  在 中定义一个方法`A`：

    公共类 A { public void acceptActor(SpriteActor actor) { actor.actOn(this); } }

3.  在每个 Sprite 子类中重写此方法。奇怪的是，您可以在每个覆盖中使用完全相同的代码。这是必要的，以便编译器将调用绑定到实现的正确重载`actOn`方法`SpriteActor`。

4.  在您的客户端代码中，实现`SpriteActor`接口。`actOn`在每个重载方法中实现特定于类型的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:14:49.623

正如您所发现的，这很丑陋。您应该改用多态性：

```
class A {
    public abstract void doStuff();
};

class B extends A {
    private void foo() { ... }  // Class-specific method
    @Override
    public void doStuff() { foo(); }
}

class C extends A {
    private void bar() { ... }  // Class-specific method
    @Override
    public void doStuff() { bar(); }
}

...

A[] array = { new B(), new C() };

// No casting or conditionals needed!
for (A a : array) {
    a.doStuff();
} 
```

# ruby - Relational vs NoSql：我应该为这种应用程序使用哪个数据库？

> ID：11386041
> 
> 赞同：2
> 
> 时间：2012-07-08T19:34:25.057
> 
> 标签：ruby, database, nosql, relational-database, database-agnostic

我即将构建一个对学生成绩进行分析的应用程序。需要存储的数据如下所示：

```
Course: name
Semester: 1st,2nd etc
Student: name
Subject1: marks
Subject2: marks
Subject3: marks
Subject4: marks
Subject5: marks
Subject6: marks

GRAND TOTAL: marks 
```

科目会根据学期和课程而有所不同。主要要求是：

1.  数据库应允许创建各种报告，如考试报告、学生报告、综合报告、主题报告等。
2.  它应该有 ruby​​ 库，因为这是我决定的语言。

那么，我应该为这种应用程序选择关系数据库还是 NoSQL 数据库。如果是 NoSQL，那么是哪一个？

**质疑** 最适合这个用例的数据库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:36:22.687

仅考虑您提到的要求，我将采用最简单的方法并使用 RDBMS。我在这里看不到使用 NoSQL 的任何优势，因为：

1.  数据结构良好
2.  听起来不像是分布式系统
3.  NoSQL 并不是一个神奇的报告解决方案。事实上，这不是报告的解决方案:)
4.  考虑到您的域，性能应该不是问题
5.  考虑到您的域，您**确实**关心 ACID

然而，RDBMS 有一切可以启动和运行：

1.  交易
2.  学习曲线低
3.  易于实施基本报告

因此，如果目的是快速完成任务 - 我会使用 RDBMS 来完成。如果它只是为了玩数据库 - 尝试用这两种技术实现它，然后比较:)

# c++ - 混淆了 ISO C++ 标准中 std::tuple 的默认构造函数描述

> ID：11386042
> 
> 赞同：18
> 
> 时间：2012-07-08T19:34:48.877
> 
> 标签：c++, c++11, language-lawyer, stdtuple

该标准说`std::tuple`具有以下成员功能

```
constexpr tuple();
explicit tuple(const Types&...); 
```

有人可以解释一下应该发生`std::tuple<>`什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T20:00:59.440

I guess the definition given in the standard is supposed to be pseudocode. That is the case with many of the definitions in the standard; it contains several requirements that are given verbally, but are satisfiable only with tricks like `enable_if`. This seems to be an example where the C++-like pseudocode notation can actually lead to illegal C++ when trying to instantiate such an empty tuple (or it might just be an omission).

Both stdlibc++ and libc++ have an explicit specialization for the zero-element tuple. For example, in stdlibc++:

```
 // Explicit specialization, zero-element tuple.
  template<>  
    class tuple<>
    {
    public:
      void swap(tuple&) noexcept { /* no-op */ }
    }; 
```

with an implicitly-defined unambiguous default constructor.

Libc++ does not explicitly declare the parameterless default constructor. Presumably the templated constructor is then chosen as default constructor for non-empty tuples.

Interestingly, the two libraries disagree on what members the empty tuple has. For example, the following compiles with libc++, but not with libstdc++:

```
#include <tuple>
#include <memory>

int main() {
  std::tuple<> t(std::allocator_arg, std::allocator<int>());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:39:16.743

我相信这是标准中的一个小错误。显然，当`Types`参数包为空时，两个构造函数调用是等价的，不能重载（参见 C++11 第 13 节）。（进一步注意，构造函数 using`Types`也不是成员模板——如果是，那么它将是合法的重载。）。

换句话说，这段代码不会编译：

```
template <typename... Types>
struct Test
{
  constexpr Test() {}
  explicit Test(Types const&...) { /* etc. */ }
};

int main()
{
  Test<> a;
  Test<int> b;
} 
```

例如，g++ v4.8 快照输出：

```
tt.cxx: In instantiation of ‘struct Test<>’:
tt.cxx:10:10:   required from here
tt.cxx:5:12: error: ‘Test<Types>::Test(const Types& ...) [with Types = {}]’ cannot be overloaded
   explicit Test(Types const&...) { /* etc. */ }
            ^
tt.cxx:4:13: error: with ‘constexpr Test<Types>::Test() [with Types = {}]’
   constexpr Test() {}
             ^ 
```

这可以通过使用部分特化来解决：

```
template <typename... Types>
struct Test
{
  constexpr Test() {} // default construct all elements
  explicit Test(Types const&...) { /* etc. */ }
  // and all other member definitions
};

template <>
struct Test<>
{
  constexpr Test() {}
  // and any other member definitions that make sense with no types
};

int main()
{
  Test<> a;
  Test<int> b;
} 
```

这将正确编译。

似乎标准需要一个`constexpr`默认构造函数，以便`std::tuple<> var;`可以编写而不是编写`std::tuple<> var();`或者`std::tuple<> var{};`因为`explicit`与其他构造函数一起使用。不幸的是，它的定义`std::tuple`不适用于大小为零的元组。但是，该标准在第 20.4.2.7 节（关系运算符）中确实允许这样做，“对于任何两个零长度元组，[...]”。哎呀！:-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T19:52:47.987

乍一看，歧义只在它被调用的地方很重要，然后你就有了正常的重载解决方案。

# linux - Linux 异步 IO - aio.h 和 libaio.h 之间的区别

> ID：11386043
> 
> 赞同：8
> 
> 时间：2012-07-08T19:34:55.383
> 
> 标签：linux, sockets, asynchronous, linux-kernel

我开始研究一种我不知道的新范例，称为 Linux 中的异步 IO。

我的目标是使用面向套接字的异步 IO 来编写高性能高效的服务器。原因是我的应用程序受 IO 限制。

在搜索更多信息时，我遇到了以下 2 个介绍。

1.  [Posix AIO](http://www.ibm.com/developerworks/linux/library/l-async/ "Posix AIO")

2.  [Linux AIO 接口](http://code.google.com/p/kernel/wiki/AIOUserGuide)

在异步框架中，我想避免的情况是为我需要异步处理的每个通知创建一个新线程，因为它会杀死我的应用程序。

我的问题如下：

1.  这两个框架的幕后解决了这个问题吗？

2.  如果是的话，你会建议考虑套接字吗？

问候

AFG

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T19:58:59.657

None of these are really intended for sockets.

The POSIX AIO interface creates threads that use normal blocking IO. They work with the buffer cache and *should* in principle even work with sockets (though I've admittedly not tried).

The Linux kernel AIO interface does not create threads to handle requests. It works *exclusively* in "no buffering" mode. Beware of non-obvious behaviour such as blocking when submitting requests in some situations, which you can neither foresee nor prevent (nor know about other than your program acting "weird").

What you want is nonblocking sockets (a nonblocking socket is "kind of asynchronous") and `epoll` to reduce the overhead of readiness notification to a minimum, and -- if you can figure out the almost non-existing documentation -- `splice` and `vmsplice` to reduce the IO overhead. Using `splice`/`vmsplice` you can directly DMA from disk to a kernel buffer and push to the network stack from there. Or, you can directly move pages from your application's address space to kernel, and push to the network.
The downside is that the documentation is sparse (to say the least) and especially with TCP, some questions remain unaddressed, e.g. when it is safe to reclaim memory.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:58:44.463

For purpose of network programming, you will want **event** based I/O, implemented (in most basic form) with **select(2)** call, and on some systems with **poll()**, **epoll()**, **kpoll()** etc.

POSIX AIO (of which Linux AIO is an implementation), doesn't necessarily work on sockets (It did at some point in Linux 2.5 codebase, but I can't be certain it's still possible).

High-performant **socket I/O** on Unix is instead done in event-based manner, where you process incoming events in a loop. An event can be "socket is ready for write", "socket has new data" etc., then react on them.

# c++ - 编译器何时需要访问库？

> ID：11386044
> 
> 赞同：1
> 
> 时间：2012-07-08T19:35:38.890
> 
> 标签：c++, visual-c++, compiler-construction, linker

假设我有 3 个项目：

*   项目程序 -> 编译成可执行文件
    *   参考音频，Tweakbar
    *   附加依赖项：无
    *   其他库依赖项：无
*   项目音频
    *   fmod 的包装器，编译成 .lib
    *   附加依赖项：fmodex_vc.lib
    *   其他库依赖项：$(SolutionDir)\libs\fmod\lib
*   项目调整栏
    *   AntTweakBar 的包装器，编译成 .lib
    *   附加依赖项：AntTweakBar.lib
    *   其他库依赖项：$(SolutionDir)libs\AntTweakBar\lib

现在，问题是我收到以下编译错误：

致命错误 LNK1104：无法打开文件“AntTweakBar.lib”

可以通过将该 lib 文件的路径放在“程序”的项目设置中来解决此错误

我想知道的是为什么我需要在那里有通往这个库的路径？没有这样的路径，fmod 工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:44:46.507

因为只有在创建可执行文件时才需要这些库；此时，所有库都链接到可执行文件中。

显然，VisualStudio IDE 不会自动将其他库使用的库“提升”到实际应用程序，因此您必须手动执行此操作。

# mysql - mysql/innodb 数据库大小如何影响性能？

> ID：11386051
> 
> 赞同：-1
> 
> 时间：2012-07-08T19:36:51.777
> 
> 标签：mysql, performance, innodb, database-optimization

我有一个 30 GB 的大型`mysql`数据库，其中所有表都使用`innodb`引擎。几乎所有这些空间都被一个大表（大约 25 GB）占用，我在其中以二进制格式存储大文本，但 99% 的查询使用其他较小的表。

我的服务器有 16 GB 内存，系统内存非常不足，总是使用交换，给我的用户带来了很多痛苦。我有我的`innodb_pool_buffer_size`设置`6G`。

我正在考虑通过将这些文本从数据库移动到文件系统来解决这个性能问题。

如果大多数查询不使用这个大表，将 25 GB 的文本移动到文件系统会解决这个问题吗？即使最大的 innodb 表没有过多地用于查询，数据库大小是否会影响服务器性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:42:05.703

您的问题中根本没有足够的信息来提供答案。

在为您的问题应用可能的解决方案之前，您需要采取系统的方法来发现*问题*。否则，您是在为未知疾病开随机药物。你有可能让问题变得更糟，就像你想让它变得更好一样，或者没有效果。

首先运行[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)你的慢查询，看看他们在做什么。确保您的表已正确编入索引以改进这些查询（如果还没有的话）。然后，如果您仍然卡住，请在此处发布最慢的查询以及`EXPLAIN`作为新问题的输出，您将获得更多有用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:57:49.707

我完全同意 Flimzy 的观点，即您需要仔细检查您的数据库是如何使用的，如果您在优化它方面需要帮助，您将需要更多信息。

不过，我可以回答你提出的两个问题。在 99.9% 的情况下，迁移到基于文件的系统并不比 MySQL 好。MySQL 具有比标准文件系统更好的数据排序、排序和选择方法。基本上，任何操作系统都不擅长在单个目录中维护大量文件，并且 HDD 的 I/O 和延迟时间将简单地超过屋顶。
对于第二个问题：不，数据库/表大小不一定会影响服务器性能。我有一个 145 GiB 的 InnoDB 表（当然，它在 SSD 上）并且它被大量使用，而我的网站没有受到很大的打击。:ole Flimzy 说，您将不得不优化您的 SQL 服务器、表设计和索引，然后查询以获得最佳性能。

# java - 如何在 Netbeans 中设置变量值并从该变量值开始运行？

> ID：11386052
> 
> 赞同：2
> 
> 时间：2012-07-08T19:36:54.100
> 
> 标签：java, netbeans, watch

我通过 watch in 逐步运行程序并监控变量的值`Netbeans`。如何从变量的特殊值开始运行程序。

例如，我有这个简单的代码只是为了测试：为了节省时间，我想在 i 的值达到 25（i=25）后查看程序的变化。

使用 Run Debug>Run to cursor 或 f4 转到程序中的这一行。然后程序从 i=0 开始，但我不需要查看 i=25 之前的更改。

```
public class DebugCondition {
private static void TestMethod()
{
            for(int i=0; i<= 29 ; i++)
            15\.    System.out.print("i");
}
public static void main(String[] args) {
 18\.    TestMethod();
    }
} 
```

我做什么： 1\. 点击第 15 行。

2.  通过 i>=25 为该行定义条件断点。

3.  单击第 18 行，然后按 F4。

4.  按 F7 进入方法，然后按 F8 调试方法体。

5.  手表的结果：起初我从 0 开始。 ![](../Images/c5a83b09fc0616c1bed49b8ca51dfbd6.png)

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:28:29.807

在 Netbeans 菜单栏上选择`Debug -> New Breakpoint...`或`CTRL + SHIFT + F8`

![在此处输入图像描述](../Images/0f6ec5ef10930716dc8eca7455445ab7.png)

然后填写表格：

1.  选择`Line`为`Breakpoint Type`。
2.  输入`Line Number`例如 19 是`System.out.println(i)`。
3.  检查`Break when hit count`，选择`is greater than`并输入您想首先开始的数字或检查并`Condition`输入`i >= 25`。
4.  点击`OK`

![在此处输入图像描述](../Images/a325ef0356d5bb610017b3fb9c7052f9.png)

```
public class DebugCondition {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        for(int i = 0; i <= 30; i++) {
            System.out.println(i);
        }
    }
} 
```

它将在`i = 25`to开始调试`i = 30`。

# **更新：**

确保当您尝试使用调试条件时，断点图标不是粉红色方块（见下图）：

![在此处输入图像描述](../Images/b389592be136bbbc48331fc7ea787ad7.png)

不像这样（粉红色的方形断点图标）：

![在此处输入图像描述](../Images/9c12255330675af79af86337869d822a.png)

# python - Python matplotlib更改超出颜色条范围的值的默认颜色

> ID：11386054
> 
> 赞同：26
> 
> 时间：2012-07-08T19:37:03.950
> 
> 标签：python, matplotlib, contour, color-mapping, colorbar

当用颜色填充网格时，例如在 pyplot 中使用 contourf 时，我需要找到一种方法来更改 pyplot 用来填充超出颜色栏指定范围的数据的颜色。我希望有一个静态颜色条，它不会自动更改其范围以适应数据的最大值/最小值，因此偶尔会有超出其界限的极端值是不可避免的，并且需要为这些值指定颜色。

超出颜色条边界的值的默认颜色是白色，如果颜色图没有白色作为其结束颜色，它可能会与周围的数据发生明显的冲突。示例图像如下所示 - 请注意当值超出颜色栏的负范围时白色填充：

[![在此处输入图像描述](../Images/3cc53406d84fb0f389bbb748a68950d1.png)](https://i.stack.imgur.com/YcU9i.png)

我相信有一种方法可以指定在使用 rcParams 超出边界时使用哪种颜色，但我无法在任何地方找到有关此的信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-08T19:59:37.470

The out-of-bounds colors can be set using the `set_over` and `set_under` methods of the colormap; see [the documentation](http://matplotlib.sourceforge.net/api/colors_api.html#matplotlib.colors.Colormap.set_over). You'll need to specify these values when you create your colormap. I don't see any matplotlibrc setting to set the default for this, though. You might also want to ask on the matplotlib mailing list.

Edit: I see what is going on. The white area you describe is not beyond the limits of the color range. It is simply the blank background of the axes. Because you are only plotting certain levels, any levels outside that range will not be plotted at all, leaving those areas blank. To get what you want, do this:

```
cs = pyplot.contourf(x,y,z,levels=np.arange(50, 220, 20), cmap=pyplot.cm.jet, extend="both")
cs.cmap.set_under('k')
cs.set_clim(50, 210)
cb = pyplot.colorbar(cs) 
```

The "extend" argument is the key; it tells contourf to go ahead and plot all contours, but collapse all outside the given range into "too big" and "too small" categories. The `cs.set_clim` call is necessary to work around an oddity I discovered in contourf while debugging this; for some reason when you use `extend`, it manipulates the data limits, so we need to reset them back to what we want them to be.

Also, just as a matter of style, you shouldn't be doing things like `Colormap.set_under(cmap,color='k')`. This is calling the class method and explicitly passing the instance in, which is an odd way to do it. Just do `cmap.set_under(color="k")`.

# netbeans - NetBeans 7.1 - 无法更改为 UI 语言

> ID：11386057
> 
> 赞同：13
> 
> 时间：2012-07-08T19:37:48.360
> 
> 标签：netbeans

我安装了 NetBeans 7.1，但无法更改 UI 语言。我没有找到任何选择。有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-19T20:48:50.980

**--locale**在某些 Windows 平台上**会使 netbeans 崩溃。**更喜欢使用“-J-Duser.language=en -J-Duser.region=US”

1.  查找 netbeans 等，可能在 C:\Program Files\NetBeans 7.3\etc
2.  打开 netbeans.conf
3.  查找 netbeans_default_options
4.  添加这些选项，因此： netbeans_default_options="blablabla -J-Duser.language=en -J-Duser.region=US"
5.  保存存档
6.  重新启动/启动 netbeans。

[https://blogs.oracle.com/tao/entry/set_netbeans_user_interface_language](https://blogs.oracle.com/tao/entry/set_netbeans_user_interface_language)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-08T19:41:10.483

您可以从`--locale en:US`设置界面语言的选项开始。

请参阅`--locale language[:country[:variant]] : Use the specified locale`此处的文档[http://wiki.netbeans.org/FaqStartupParameters](http://wiki.netbeans.org/FaqStartupParameters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T12:36:41.723

如果您在保存文件时遇到问题：

1.  将 netbeans.conf 文件传输到您的桌面；
2.  Windows 会说你需要管理员的许可，按确定；
3.  使用记事本打开桌面上的 netbeans.conf 文件，并进行视频中建议的更改；
4.  节省;
5.  将文件传回 etc. 文件夹
6.  打开 NetBeans IDE

# asp.net - 并非所有数据都显示在我的图表控件中

> ID：11386059
> 
> 赞同：0
> 
> 时间：2012-07-08T19:38:01.183
> 
> 标签：asp.net

我正在尝试使用 Visual Studio 2010 中的图表。

这是 .aspx.vb 文件中页面加载时使用的代码

```
Dim o_cmd As SqlCommand
Dim o_reader As SqlDataReader

Dim ds As New Data.DataSet
Dim myCommand As SqlDataAdapter

o_Con = New SqlConnection(Gbl.DataS)
o_Con.Open()
S_Sql = "SELECT     Exam, ResultGrade FROM RegAppear WHERE (UID=" & Val(Session("UID")) & ")"
o_cmd = New SqlCommand(S_Sql, o_Con)
o_reader = o_cmd.ExecuteReader
Chart1.Series("Default").Points.DataBindXY(o_reader, "Exam", o_reader, "ResultGrade")
o_reader.Close()
o_Con.Close() 
```

这是来自aspx文件的代码

```
 <asp:chart id="Chart1" runat="server" BackColor="#D3DFF0" 
        BorderColor="26, 59, 105" Palette="BrightPastel" BorderlineDashStyle="Solid" 
        BackSecondaryColor="White" BackGradientStyle="TopBottom" BorderWidth="2" 
        Width="600px" RightToLeft="Yes" >
   <titles>
   <asp:Title ShadowColor="32, 0, 0, 0" Font="Trebuchet MS, 14.25pt, style=Bold" ShadowOffset="3" Text="Performance in Different Subjects" ForeColor="26, 59, 105">
   </asp:Title>
   </titles>
   <legends>
   <asp:Legend Enabled="False" IsTextAutoFit="False" Name="Default"  BackColor="Transparent" Font="Trebuchet MS, 8.25pt, style=Bold"></asp:Legend>
   </legends>
  <borderskin SkinStyle="Emboss"></borderskin>
 <series>
 <asp:Series IsValueShownAsLabel="True" ChartArea="ChartArea1" Name="Default" 
               CustomProperties="LabelStyle=Bottom" BorderColor="180, 26, 59, 105" 
               LabelFormat="#"></asp:Series>
  </series>
 <chartareas>
 <asp:ChartArea Name="ChartArea1" BorderColor="64, 64, 64, 64" BorderDashStyle="Solid" BackSecondaryColor="White" BackColor="64, 165, 191, 228" ShadowColor="Transparent" BackGradientStyle="TopBottom">
    <axisy2 Enabled="False"></axisy2>
    <axisx2 Enabled="False"></axisx2>
    <area3dstyle Rotation="10" Perspective="10" Inclination="15" IsRightAngleAxes="False" WallWidth="0" IsClustered="False" />
    <axisy LineColor="64, 64, 64, 64" IsLabelAutoFit="False" ArrowStyle="Triangle" LabelAutoFitStyle="None">
    <MajorGrid LineColor="64, 64, 64, 64" />
    </axisy>
    <axisx LineColor="64, 64, 64, 64" IsLabelAutoFit="True" ArrowStyle="Triangle" IsReversed="False" TextOrientation="Auto" LabelAutoFitStyle="LabelsAngleStep90" IsInterlaced="True" LogarithmBase="10">
    <MajorGrid LineColor="64, 64, 64, 64" />
    </axisx>
    </asp:ChartArea>
    </chartareas>
</asp:chart> 
```

这是浏览器上的输出-

![在此处输入图像描述](../Images/567cc116f7d13c3affd54ee6a2c0bb2f.png)

问题出在 X 轴上，只能看到考试的替代名称。这是我在直接对数据库进行查询时看到的检查列表，但如图所示，替代名称显示在图表中。

```
COMED K MOCK- 1 2012
AIIMS Nov-2009 
AIIMS Nov-2007 
AIIMS May-2006 
APPG- 2008 
APPG- 2009
2012-13- Aimmds- Periodontics-1
2012-13- Aimmds- Microbiology-2
2012-13- Aimmds- Microbiology-1
C33- AimMDS2012-AIIMS Mock N2
2012-13- Aimmds- Gen Histo And embryology 
```

我们有办法确保所有考试名称都显示在 x 轴上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:42:36.507

我可以找到解决方案..在此处添加，以便将来其他人也可以使用..通过更改 AxisX 内部可以看到所有系列名称

Chart1.ChartAreas("ChartArea1").AxisX.Interval = 1

# ios - 如何在 Objective C 中创建宏以在运行时执行许多模块？

> ID：11386068
> 
> 赞同：0
> 
> 时间：2012-07-08T19:40:43.053
> 
> 标签：ios, variables, module, runtime

在此源代码中是模块 FirstDetailViewController 的链接

```
FirstDetailViewController *newDetailViewController = [[FirstDetailViewController alloc] initWithNibName:@"FirstDetailView" bundle:nil];
detailViewController = newDetailViewController; 
```

我想要一个字符串

```
module = [[NSString] alloc] initWithString:@"SecondDetailViewController"]; 
```

我想将字符串模块转换为代码以在运行时进行更改

```
module *newDetailViewController = [[module alloc] initWithNibName:module bundle:nil];
detailViewController = newDetailViewController; 
```

其中模块有很多名称

```
module = [[NSString] alloc] initWithString:@"ClientDetailViewController"];
…;
module = [[NSString] alloc] initWithString:@"FriendDetailViewController"];
…;
module = [[NSString] alloc] initWithString:@"FishDetailViewController"];
…; 
```

如何使用变量模块来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:45:57.637

尝试这个：

```
UIViewController* newDetailViewController = [[NSClassFromString(module) alloc] initWithNibName:module bundle:nil]; 
```

# cuda - CUDA 分支优化

> ID：11386070
> 
> 赞同：0
> 
> 时间：2012-07-08T19:40:48.193
> 
> 标签：cuda

我有一个使用几个 CUDA 内核的程序，这个程序需要 50-100 毫秒才能运行，而其他程序需要 0-5 毫秒。我希望这与所有分支有关，但我不确定如何减少它。我正在为计算能力 2.1 设备进行编译。如果有人能指出我正确的方向，那就太好了。

```
// chosen using occupancy spreadsheet
#define SCORE_THREADS_PER_BLOCK 448

__device__ double ScoringMatrixVal(double *scoring_matrix, size_t pitch, unsigned int row, unsigned int column) {
  return *((double*)((char*) scoring_matrix + row * pitch) + column);
}

__global__ void ScoreBindingSites(char *input_sequence, unsigned long is_length, unsigned int *rvd_sequence, unsigned int rs_len, double cutoff, unsigned int rvd_num, double *scoring_matrix, size_t sm_pitch, unsigned char *results) {

  int block_seq_index = SCORE_THREADS_PER_BLOCK * (blockIdx.y * gridDim.x + blockIdx.x);
  int thread_id = (blockDim.x * threadIdx.y) + threadIdx.x;
  int seq_index = block_seq_index + thread_id;

  if (seq_index < 1 || seq_index >= is_length || seq_index + rs_len >= is_length - 1) return;

  if (input_sequence[seq_index - 1] == 'T' || input_sequence[seq_index - 1] == 't') {

    double thread_result = 0;

    for (int i = 0; i < rs_len; i++) {

      int rvd_index = i;

      int sm_col = 4;

      char base = input_sequence[seq_index + i];

      if (base == 'A' || base == 'a')    
        sm_col = 0;
      if (base == 'C' || base == 'c')
        sm_col = 1;
      if (base == 'G' || base == 'g')
        sm_col = 2;
      if (base == 'T' || base == 't')
        sm_col = 3;

      thread_result += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index], sm_col);

    }

    results[seq_index] |= (thread_result < cutoff ? 1UL : 0UL) << (2 * rvd_num);

  } 

  if (input_sequence[seq_index + rs_len] == 'A' || input_sequence[seq_index + rs_len] == 'a') {

    double thread_result = 0;

    for (int i = 0; i < rs_len; i++) {

      int rvd_index = rs_len - i - 1;

      int sm_col = 4;

      char base = input_sequence[seq_index + i];

      if (base == 'A' || base == 'a')    
        sm_col = 3;
      if (base == 'C' || base == 'c')
        sm_col = 2;
      if (base == 'G' || base == 'g')
        sm_col = 1;
      if (base == 'T' || base == 't')
        sm_col = 0;

      thread_result += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index], sm_col);

    }

    results[seq_index] |= (thread_result < cutoff ? 1UL : 0UL) << (2 * rvd_num + 1);

  }

} 
```

ScoreBindingSites 启动时每个块有 (32, 14) 个线程，并且有足够的块来覆盖输入序列。如果有帮助，可以在[此处](https://github.com/njbooher/boglab_tfcount/blob/b7ace0823fcf8dc6f97d3f33fd5db1691b643be8/tfcount_cuda.cu)找到完整的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:49:46.403

您可以做一些事情来改进此代码：

*   如上所述，合并两个循环 for`'T'`和`'A'`。这可能是分支分歧的最大来源，因为`if`循环内的小级联语句很可能会被编译为谓词指令（请参阅[NVidia CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)的第 5.4.2 节）。

*   字节大小的全局内存访问是一个糟糕的主意。相反，我建议在主循环的每次迭代中声明`input_sequence`,`results`和`base`as and ，为 ,和的`char4`每个值做你的事情。`base.x``base.y``base.z``base.w`

*   您可能还想仔细看看`ScoringMatrixVal`正在做什么。它只是从内存中读取值吗？如果是这样，您可以用恒定内存替换它吗？还是质感？

**更新**

根据要求，这就是我对第二点的意思。不过，我还没有测试过代码，所以请随时保留您发现的任何错误或拼写错误。请注意，为简单起见，我假设这`rs_len`是四的倍数。

```
// chosen using occupancy spreadsheet
#define SCORE_THREADS_PER_BLOCK 448

__device__ double ScoringMatrixVal(double *scoring_matrix, size_t pitch, unsigned int row, unsigned int column) {
  return scoring_matrix[ row*pitch/sizeof(double) + column ];
}

__global__ void ScoreBindingSites(char4 *input_sequence, unsigned long is_length, unsigned int *rvd_sequence, unsigned int rs_len, double cutoff, unsigned int rvd_num, double *scoring_matrix, size_t sm_pitch, unsigned char *results) {

  int block_seq_index = SCORE_THREADS_PER_BLOCK * (blockIdx.y * gridDim.x + blockIdx.x);
  int thread_id = (blockDim.x * threadIdx.y) + threadIdx.x;
  int seq_index = block_seq_index + thread_id;

  if (seq_index < 1 || seq_index >= is_length || seq_index + rs_len >= is_length - 1) return;

  if (input_sequence[seq_index - 1] == 'T' || input_sequence[seq_index - 1] == 't') {

    double4 thread_result = make_double4( 0 );

    for (int i = 0; i < rs_len/4; i++) {

      int rvd_index = 4*i;

      int4 sm_col = make_int4( 4 );

      char4 base = input_sequence[seq_index + i];

      if (base.x == 'A' || base.x == 'a')    
        sm_col.x = 0;
      else if (base.x == 'C' || base.x == 'c')
        sm_col.x = 1;
      else if (base.x == 'G' || base.x == 'g')
        sm_col.x = 2;
      else if (base.x == 'T' || base.x == 't')
        sm_col.x = 3;
      thread_result.x += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index + 0], sm_col.x);

      if (base.y == 'A' || base.y == 'a')    
        sm_col.y = 0;
      else if (base.y == 'C' || base.y == 'c')
        sm_col.y = 1;
      else if (base.y == 'G' || base.y == 'g')
        sm_col.y = 2;
      else if (base.y == 'T' || base.y == 't')
        sm_col.y = 3;
      thread_result.y += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index + 1], sm_col.y);

      if (base.z == 'A' || base.z == 'a')    
        sm_col.z = 0;
      else if (base.z == 'C' || base.z == 'c')
        sm_col.z = 1;
      else if (base.z == 'G' || base.z == 'g')
        sm_col.z = 2;
      else if (base.z == 'T' || base.z == 't')
        sm_col.z = 3;
      thread_result.z += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index + 2], sm_col.z);

      if (base.w == 'A' || base.w == 'a')    
        sm_col.w = 0;
      else if (base.w == 'C' || base.w == 'c')
        sm_col.w = 1;
      else if (base.w == 'G' || base.w == 'g')
        sm_col.w = 2;
      else if (base.w == 'T' || base.w == 't')
        sm_col.w = 3;
      thread_result.w += ScoringMatrixVal(scoring_matrix, sm_pitch, rvd_sequence[rvd_index + 3], sm_col.w);

    }

    double acc_thread_result = thread_result.x + thread_result.y + thead_result.z + thread_result.w;

    results[seq_index] |= (acc_thread_result < cutoff ? 1UL : 0UL) << (2 * rvd_num);

  }

  if (input_sequence[seq_index + rs_len] == 'A' || input_sequence[seq_index + rs_len] == 'a') {

    ...

  }

} 
```

几点注意事项：

*   我已经重写了（希望是正确的）您的函数`ScoringMatrixVal`以使用常规数组访问，因为指针算术的整个混乱可能会使编译器关闭。
*   我已将您的`if`- 语句转换为级联 -`if-elseif`语句，因为它们似乎相互排斥。我猜编译器将使用谓词指令并将这四个`if-elseif`块交错。
*   您可以考虑将所有这些`char[256]`都替换为除, , ,等处`4`的字符代码之外的所有内容...`A``a``C``c`
*   如果您将`if-elseif`-statements 转换为表查找，您可以使用两个不同的表 for`input_sequence[seq_index - 1] == 'T'`和`input_sequence[seq_index + rs_len] == 'A'`，从而将其全部保存在一个循环中。

我希望我没有把代码弄乱太多，这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:19:36.990

据我在您的内核中了解，每个线程最多读取 32 个字符并检查每个字符并输出一些数据。

您可以通过使用不同的块方法和不同的索引（如果在您的情况下可能的话）隐式模拟它来完全删除循环。

每个块有 32 个线程，每个线程计算一次循环迭代的结果。

我不知道它是否更快但值得测试。

应该明确考虑佩德罗使用表格查找来替换您的条件的答案。

**小改动：**

是否`input_sequence[seq_index - 1] == 'T' || input_sequence[seq_index - 1] == 't'`优化为仅读取一次内存？

通过仅删除一次使用的变量来保存寄存器`threadId`。

# objective-c - 解释这个特定方法声明的语法

> ID：11386073
> 
> 赞同：0
> 
> 时间：2012-07-08T19:40:55.860
> 
> 标签：objective-c, syntax, method-declaration

我在 Github 上找到了这个，但我不知道这段代码在做什么。谁能解释一下？

```
- (id)initWithTitle:(NSString *)title 
            message:(NSString *)message 
    completionBlock:(void (^)(NSUInteger buttonIndex))block 
  cancelButtonTitle:(NSString *)cancelButtonTitle 
  otherButtonTitles:(NSString *)otherButtonTitles, ... { 
```

特别是这个东西是什么`(void (^)`东西，到底是怎么`...`用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:47:45.517

[void (^) (NSUInteger buttonIndex) 是一个块，它们在整个 Cocoa 框架中使用，我强烈建议在http://developer.apple.com/library/ios/#documentation/](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html)上查看 Apple 的入门指南[可可/概念/块/文章/bxGettingStarted.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html)

方法名称末尾的三个点表示该方法采用前一种类型的任意数量的参数，在本例中为 NSString。这与 C 中的 printf 相同。请参阅[http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D](http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:48:06.743

`(void (^)(NSUInteger buttonIndex))block`正如标签和参数名称所表明的那样， 是一个Block [，](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Blocks/)它是一块可运行的代码，也是一等对象。

省略号 ,`...`表示该方法采用可变数量的最终参数。此功能通常以其 C 库名称[“varargs”](http://c-faq.com/varargs/varargs1.html)而闻名。更正式的术语是[“可变参数”](http://en.wikipedia.org/wiki/Variadic_function)。

# c++ - Visual C++ 错误：函数必须返回一个值

> ID：11386078
> 
> 赞同：5
> 
> 时间：2012-07-08T19:41:57.537
> 
> 标签：c++, visual-c++, unreachable-code

我正在做一个多平台项目，一些平台禁用了功能，在这些功能的界面中，我做的常见事情是这样的：

```
bool Foo::bar() const {
    // disabled
    abort();
} 
```

GCC/LLVM 不要求非 void 函数返回值（它们只是给出警告），在这种情况下，我调用`abort()`，它们足够聪明，甚至不会给出警告（因为函数无论如何都不会返回）。

有没有办法（编译标志？）使 Visual C++ 2010 的行为方式相同，所以我不会继续破坏 Windows 构建？我知道我总是可以在中止后返回值，但是在其他平台上工作时我通常会忘记这一点，并且不给出错误的行为似乎更合适。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:50:18.930

`__declspec(noreturn)`在 MSVC++ 编译器中应该有这种效果。我希望标准`abort`被声明为`__declspec(noreturn)`. 但是由于编译器在您的示例中生成错误，因此它可能没有以这种方式声明。我建议您检查`abort`. 如果里面没有`__declspec(noreturn)`，你应该以某种方式添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T19:50:44.790

通常，Visual C++ 编译器允许您对[函数进行注释，`__declspec(noreturn)`](http://msdn.microsoft.com/en-us/library/k6ktzx3s%28v=VS.80%29.aspx)以表明该函数永远不会返回。这有助于编译器意识到调用此类函数后的任何代码都是不可访问的。

您在这里遇到的问题包含在[这个 SO question](https://stackoverflow.com/questions/3569643/abort-is-not-declspecnoreturn-in-vs2010)中。长话短说，`abort()`Visual C++ 运行时标头中没有此注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T20:02:20.320

由于您想禁用错误添加`/w34716`为编译标志（假设您使用的是警告级别 3 或更高级别） - 现在只发出警告（如果警告级别为 3 或更高级别）。您也可以禁用警告 ( `/wd4716`)，但这可能不是一个好主意 - 取决于此行为导致的警告数量。

# ruby-on-rails - Docsplit 在命令行中工作正常但忽略 Ruby 脚本中的代码？

> ID：11386080
> 
> 赞同：0
> 
> 时间：2012-07-08T19:42:20.353
> 
> 标签：ruby-on-rails, ruby

这是我见过的最奇怪的问题。

我正在使用 Docsplit 将多页 pdf 拆分为一堆单页 Jpeg。当我使用命令行输入时：

```
docsplit images scan.pdf --format jpg 
```

一切正常。但是，在我的 Ruby 脚本中，输入：

```
path = "<path_to>/scan.pdf"
Docsplit.extract_images(path, :format => [:jpg]) 
```

绝对什么都不做。就像 Ruby 甚至没有阅读我的代码一样。任何指针？

更新：

这只会变得越来越奇怪。查看根目录，我注意到所有文件最终都被拆分并发送到那里！它正在阅读我的代码，但对将文件放在哪里有最奇怪的想法。

现在下一个问题是，有没有办法让他们提取到某个位置？我*可以*使用 FileUtils.mv 命令正确放置它们，但这会浪费大量时间和资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:27:39.357

我的意思是，如果没有你给我们真正的路径，很难说清楚。但是如果你想把所有文件放在某个文件夹中，你总是可以像这样设置路径：

`"#{RAILS_ROOT}/pdf/scan.pdf"`

# c++ - Qt 4.7.4 C++ QScrollBar -- 使用 QStyle 设置滑块的大小

> ID：11386082
> 
> 赞同：0
> 
> 时间：2012-07-08T19:42:28.437
> 
> 标签：c++, linux, qt

我已经尝试了几种方法来让 QScrollBar 的滑块根据 singleSteps() 的数量来改变大小。我希望 stepSize() 为〜1。

以下链接让我最接近，但我似乎无法让它工作。

[http://www.qtcentre.org/threads/2133-QScrollBar-custom-slider-s-size](http://www.qtcentre.org/threads/2133-QScrollBar-custom-slider-s-size)

我需要做什么才能改变滑块大小？我会发布代码，但是就像我上面所说的那样，我尝试了许多不同的尝试，我想清理我的石板，只是看一个如何更改滑块大小的干净示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:37:49.507

通常，滑块的大小应该代表滚动内容的可见部分的大小。这就是`QAbstractSlider`API 的设计目的。

如果要将可见部分的大小锁定为内容的非整数整体大小的某个整数倍，那么处理它的惯用方法是通过非整数因子重新缩放滚动条的输出`height / (maximum() + pageStep())`。文档的逻辑高度（长度）映射到`maximum() + pageStep()`. 你当然可以设置`singleStep()`为等于`pageStep()`。

给定一些`numStrips`and `height`，进行如下操作：

```
int numStrips;
qreal height;

int page = qRound(height/numStrips);
int max = (numStrips - 1) * page;

scrollBar->setMinimum(0);
scrollBar->setMaximum(max);
scrollBar->setPageStep(page);
scrollBar->setSingleStep(page);

qreal strip = scrollBar->value() * height / max; 
```

# mysql - 异常的sql错误

> ID：11386083
> 
> 赞同：2
> 
> 时间：2012-07-08T19:42:49.513
> 
> 标签：mysql, sql

所以我一直在这个sql错误上停留了一段时间。

这是我正在使用的 SQL 行：

```
INSERT INTO images (image_name, orientation, restored, commercial, automotive, bespoke, before, after, date_added) 
VALUES ('image4-after.jpg', 'portrait', '1', '1', '1', '1', '24', '5', '2012-07-08') 
```

使用这种结构：

```
image_id - int(11) AUTO_INCREMENT
image_name - varchar(40)
orientation - varchar(4)
restored - tinyint(1)
commercial - tinyint(1)
automotive - tinyint(1)
bespoke - tinyint(1)
before - int(11)
after - int(11)
date_added - date 
```

收到错误消息：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“之前、之后、添加日期”附近使用的正确语法 VALUES ('image4-after.jpg'、'portrait'、'1'、'1'、'1''在第 1 行

谁能告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T19:44:56.140

`BEFORE` 是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。您需要用反引号将其引用以将其用作表或列标识符。

```
INSERT INTO images (image_name, orientation, restored, commercial, automotive, bespoke, `before`, after, date_added) 
VALUES ('image4-after.jpg', 'portrait', '1', '1', '1', '1', '24', '5', '2012-07-08') 
```

`AFTER`但是，没有保留。

每当 1064 错误在其指示符中指向语法上不明显的内容时`right syntax to use near...`，请查看保留字列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T19:45:16.437

`BEFORE`是一个关键字，根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。

尝试使用反引号 (`) 转义字段名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T19:46:25.687

我猜这是因为 before 是 mysql 中的保留字（http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html）。

尝试用反向引号包围之前： `before`.

# python - GAE - 祖先问题

> ID：11386086
> 
> 赞同：2
> 
> 时间：2012-07-08T19:42:57.793
> 
> 标签：python, database, google-app-engine, transactional

我想在我的 gae 中拥有独特的价值，所以我阅读了文档并发现“事务”是原子的。

[https://developers.google.com/appengine/docs/python/ndb/transactions](https://developers.google.com/appengine/docs/python/ndb/transactions)

```
class Account(ndb.Model):
    """"Required DB """
    username = ndb.StringProperty(required=True)
    password = ndb.StringProperty(required=True)
    mail = ndb.StringProperty(required=True)
    salt = ndb.StringProperty(required=True)
    date = ndb.DateTimeProperty(auto_now_add=True)

    name  = ndb.StringProperty()
    last_name  = ndb.StringProperty()
    phone_number  = ndb.IntegerProperty()
    postal  = ndb.IntegerProperty()
    city  = ndb.StringProperty()

    products = ndb.IntegerProperty(repeated=True)

    @ndb.transactional
    def create_account(self):
         acc = Account.query(Account.username==self.username)
         acc = tuple(acc)
         if len(acc)== 0:
             self.put()
         else:
             #yield error
             pass 
```

我得到了同样的错误

> 错误请求错误：
> 
> 事务中只允许祖先查询。

我的数据库模型“帐户”没有任何祖先。不应该是唯一的“祖先”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:37:02.543

规避此问题的一种方法是使用用户名作为密钥。

```
@classmethod
@ndb.transactional
def create(cls, username):
    key = ndb.Key('Account', username)
    existing_user = key.get()
    if existing_user:
        raise ValueError
    else:
        new_instance = cls(key=key, username=username)
        new_instance.put()
    return new_instance 
```

# android - 获取 EditTextPreference 值

> ID：11386087
> 
> 赞同：2
> 
> 时间：2012-07-08T19:43:08.980
> 
> 标签：android, android-edittext, sharedpreferences, edittextpreference

我创建了一个 EditTextPreference，现在我想从任何其他活动中获取值。我一直在尝试很多事情，但我无法让它发挥作用。这个值存储在哪里？我怎样才能找回它？

编辑：我想从不同的活动中获取价值，而不是`Preferences`活动。

`settings.xml`

```
<EditTextPreference
    android:title="EditText1"
    android:key="edit1"
    android:defaultValue="0"
    android:dialogIcon="@drawable/fleetespiar"
    android:inputType="number" /> 
```

`Settings.java` **（如何在不同的活动中做到这一点）**

```
Preference edit1= findPreference("edit1");
EditTextPreference editt1 = (EditTextPreference) edit1;

System.out.println(String.valueOf(editt.getText().toString())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:46:25.267

首先你需要创建一个 的实例`SharedPreferences`，然后你可以调用`getString()`它，指定值的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:25:47.480

您的值将存储在共享首选项文件中。

检查我下面的小例子：

1.  在您的 android 项目的*res*目录（资源）中创建一个*xml*目录。

**   在您的新*xml*目录中，您必须创建一个包含您的 EditTextPreference 的preference.xml 文件。

    ```
     <?xml version="1.0" encoding="utf-8"?>
        <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
            <EditTextPreference
                android:dialogTitle="My preference"
                android:key="pref"
                android:summary="Enter Your Preference"
                android:title="Edit Text Preference" />
        </PreferenceScreen> 
    ```

    *   现在创建扩展**PreferenceActivity的***Preferences*类。

     **```
     import android.content.SharedPreferences;
        import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
        import android.os.Bundle;
        import android.preference.EditTextPreference;
        import android.preference.Preference;
        import android.preference.PreferenceActivity;

            public class Preferences extends PreferenceActivity {

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                 super.onCreate(savedInstanceState);
                 addPreferencesFromResource(R.xml.preferences);
            }
        } 
    ```** ***   使用**SharedPreference**对象插入并获取您的 String 值。***

# c# - 如何使用 EMGU 或 OpenCv 获取图片区域中的直方图？

> ID：11386089
> 
> 赞同：0
> 
> 时间：2012-07-08T19:43:32.887
> 
> 标签：c#, opencv, histogram, emgucv

我正在尝试构建一个基本的视频跟踪器，通过他的直方图跟踪一个对象，我有一个对象最初所在的区域（矩形）。我想获得该区域图像的直方图。（然后在下一帧中查看该直方图）。

如何尽可能有效地获得特定区域的直方图？

ps 我使用 c# + emgu .. 但如果 emgu 中没有解决方案但 OpenCV 中有解决方案，那也会很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:51:15.803

如何设置[ROI](http://www.emgu.com/wiki/files/2.0.0.0/html/be373a84-4ee0-f181-665e-ba1d6d7e3e18.htm)（感兴趣区域）并使用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T19:25:52.927

Emgu 密集直方图类有一个内置的掩码参数。我没用过，但它可能会有所帮助。

```
hist.Calculate<Byte>(new Image<Gray, byte>[] { ImageFrame }, true, MASKGOESHERE); 
```

# ruby-on-rails - has_secure_password 防止将布尔值设置为 true

> ID：11386092
> 
> 赞同：0
> 
> 时间：2012-07-08T19:44:27.540
> 
> 标签：ruby-on-rails, email-verification

在使用 has_secure_password 和 authenticate 方法设置登录/注册和会话后，我想进行电子邮件确认。我有一个用户模型，我添加了一个确认的布尔值。创建用户后，我将其确认的布尔值设置为 false，并向他们发送带有链接的电子邮件。单击该链接会生成对 /users/:id/confirm 的 GET 请求，并在 users_controller 中执行“确认”操作的代码，如下所示：

```
 def confirm
    @user = User.find(params[:id])
    @user.update_attributes(confirmed: true)
    if @user.save 
      sign_in(@user)
      flash[:success] = "Your account has been successfully confirmed"
    else
      flash[:error] = "There has been a problem confirming your account "
    end 
     redirect_to root_path
  end 
```

很简单（我稍后会做验证令牌）。我的问题是我的用户永远不会被保存。

```
@user.errors.full_messages
```

返回：

```
["Password is too short", "Password confirmation can't be blank"] 
```

如何更改用户对象而不必每次都编辑其密码？任何帮助将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:01:17.983

尝试使用 update_attribute 而不是 update_attributes。

```
 @user.update_attribute(:confirmed, true) 
```

# ruby - NoMethodError: undefined method << for nil:NilClass

> ID：11386094
> 
> 赞同：0
> 
> 时间：2012-07-08T19:44:55.407
> 
> 标签：ruby, sinatra

I'm learning sinatra and I get the following error

```
Boot Error

Something went wrong while loading recall.rb
NoMethodError: undefined method `<<' for nil:NilClass

/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/rack-flash-0.1.2/lib/rack/flash.rb:11:in `use'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/bin/shotgun:128:in `block (2 levels) in <top (required)>'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:104:in `instance_eval'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:104:in `block in assemble_app'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:103:in `new'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:103:in `assemble_app'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:86:in `proceed_as_child'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:31:in `call!'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/loader.rb:18:in `call'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/favicon.rb:12:in `call'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/shotgun-0.9/lib/shotgun/static.rb:14:in `call'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
/Users/nikhil/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/Users/nikhil/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/nikhil/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/nikhil/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

I'm not able to decipher it as id doesn't point to any of my source files.

The error arose when I followed [this part](http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra-the-encore/) of a tutorial where they talk about notices and error messages. The main file for my app includes the following gems.

```
require "sinatra"
require "data_mapper"
require "rack-flash"
require "sinatra/redirect_with_flash" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:58:06.617

You're using an old version of rack-flash that doesn't work with the version of rack you're using. The line throwing the error is inside rack-flash itself where its trying to mutate some Rack internal state that has since changed.

For some reason the latest version of that gem is called rack-flash3 which is why install rack-flash still gets you the old version of the gem.

# objective-c - 在 Objective-C 中定义实例变量

> ID：11386096
> 
> 赞同：2
> 
> 时间：2012-07-08T19:45:00.923
> 
> 标签：objective-c, ios, xcode, coding-style

随着 Objective-C 的发展（我专门将它与 xcode/ios 一起用于 iPhone/iPad 开发），似乎有许多不同的方式可以布置类实例变量。是否存在已成为普遍共识的“最佳实践”方式？（我意识到 Apple 演示/示例代码在风格方面无处不在）

特别是处理私有变量的想法。以下是我见过的管理类的一些实例变量的多种方法（为简洁起见，我省略了接口/实现）——我什至不包括使用下划线命名的综合属性。

。H

```
@property (nonatomic, strong) NSString *aString; 
```

.m

```
@synthesize aString;

- (void)aMethod {
   aString = @"Access directly, but if I don't have custom getter/setters and am using ARC, do I care?";
   self.aString = @"Access through self";
} 
```

或这个：

。H

```
@property (readonly) NSString *aString; 
```

.m

```
@property (nonatomic, strong) NSString *aString;
...
@synthesize aString; 
```

或这个：

.m

```
@interface aClass {
 NSString *aPrivateString;
}

- (void)aMethod {
  aPrivateString = @"Now I have to access directly, but is this atomic/nonatomic?";
} 
```

我不希望这个问题变成一个风格论据，但在我看来，应该有一个“如果你没有做一些特定、复杂或奇怪的事情，请使用这种方法来定义你的类变量”标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:55:11.923

我更喜欢对公共和私有 ivars/属性使用以下约定：

。H

```
@property (nonatomic, strong) NSString *publicString; 
```

.m

```
@implemention aClass 
{
  NSNumber *_privateNumber;
}
@synthesize publicString = _publicString; 
```

这样，以 _ 开头的所有内容都是一个 ivar（_publicString 是该属性的底层 ivar，这会阻止我在想使用 self.publicString 时使用 publicString）。

# sql-server - sql 查询分析器 xml 结果集被截断

> ID：11386100
> 
> 赞同：0
> 
> 时间：2012-07-08T19:45:55.220
> 
> 标签：sql-server

我将一些 xml 数据存储在一个表中。

例子：

```
INSERT INTO table (id, value) (1, '<xml>...</xml>')

SELECT value FROM table 
```

但是当我从查询分析器中进行选择查询时，“值”字段显示截断的 xml。

我怎样才能看到完整的xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:48:01.647

您需要更改查询结果的选项。

# binary - 在 jqplot 中用 y 轴上的文本映射数字输入值

> ID：11386102
> 
> 赞同：0
> 
> 时间：2012-07-08T19:46:18.197
> 
> 标签：binary, jqplot

我正在使用 jqplot 来显示将显示数字值和二进制值的图形。我使用 dateAxisRenderer 作为 x 轴。

要显示的数据是[timestamp, value]的形式。现在模拟图工作正常，但对于二进制我必须在 y 轴上显示 ON 和 OFF 而不是 0 和 1。

我正在为这种行为使用刻度并将值转换为 [0, 'OFF'] , [1, 'ON'] 以在 y 轴上显示标签。该图在此之后正确显示了标签，但未显示绘制的值。

有什么方法可以将数据转换为显示，即“值”，以便将 y 轴上的值映射到要显示的所需数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:35:54.340

听起来您需要使用“是/否”标签格式化的第二个 yaxis：

![在此处输入图像描述](../Images/e7ae837457a7dc8d01162a16d1424b4c.png)

这是我用来生成的[小提琴......](http://jsfiddle.net/larsenmtl/z5eNz/1/)

```
$(document).ready(function() {
    $.jqplot.config.enablePlugins = true;   

    var line1 = [[1,1],[2,2],[3,3],[4,4],[5,5]];
    var line2 = [[1,1],[2,0],[3,1],[4,1],[5,0]];

    $.jqplot('chart1', [line1, line2], {
        series: [
            {label: 'Analog'},
            {label: 'Yes/No', 'yaxis':'y2axis'},

        ],
        axes: {
            xaxis: {
                label: 'Label'
            },
            yaxis: {
                label: 'Analog'
            },
            y2axis:{
                label: 'Yes/No',           
                ticks: [0,1],
                tickOptions:{formatter: 
                             function (formatString, value){
                                 if (value == 0) return 'No';
                                 else if (value == 1) return 'Yes';
                                 else return "";
                             }}

            }       

        }
    });
});​ 
```

# python - 无法在图像上渲染 pygame 字体

> ID：11386107
> 
> 赞同：3
> 
> 时间：2012-07-08T19:46:33.877
> 
> 标签：python, pygame

我找到了很多使用 pygame 及其字体库的教程，但它们都显示了相同的内容。它们都向您展示了如何在背景上写一些纯文本，这很棒，但除此之外，我发现的有用信息并不多。

在我正在进行的项目中，我有菜单按钮，我已经实现为精灵。当你将鼠标悬停在它们上面时，它们会改变颜色，这一切都很好。我想做的是在这些按钮上写文字，但我对如何做到这一点感到困惑。从文档 font.render 工作如下：

“这将创建一个新的 Surface 并在其上呈现指定的文本。Pygame 无法直接在现有 Surface 上绘制文本：相反，您必须使用 Font.render - 在新 Surface 上绘制文本来创建图像（Surface）文本，然后将此图像blit到另一个Surface上。”

因此，我尝试获取附加到我的精灵的图像并将我的文本直接粘贴到它上面。这似乎几乎什么都没做：

```
 resume = self.button_font.render(
        'Resume Game',
        True,
        constants.WHITE,
        (23, 56, 245) # Main color of the button, tried without this as well
    )
    self.resume_button.image.blit(
        resume,
        self.resume_button.rect,
    ) 
```

我知道代码可以运行，但你永远看不到任何文本。如果我将文本直接blit 到我的主屏幕表面，它只会写在我的resume 按钮的顶部（当然取决于blit 顺序）。我究竟做错了什么？文档似乎表明这是处理它的正确方法，但我还没有找到其他人这样做。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T20:08:08.510

你有没有在你[`convert`](http://www.pygame.org/docs/ref/surface.html#Surface.convert)的表面上打电话[`Sprite`](http://www.pygame.org/docs/ref/sprite.html)？如果没有，最好这样做。

在您的表面上使用不同的像素格式会导致各种烦人且难以理解的错误。

* * *

**例子：**

```
import pygame

pygame.init()
screen = pygame.display.set_mode((400, 400))
image = pygame.image.load('1.png')

sprite = pygame.sprite.Sprite()
sprite.image = image
sprite.rect = image.get_rect()

font = pygame.font.SysFont('Sans', 50)
text = font.render('This is a text', True, (255, 0, 0))

sprite.image.blit(text, sprite.rect)

group = pygame.sprite.Group()
group.add(sprite)
group.draw(screen)

pygame.display.flip()

print 'bits per pixel:'
print 'image', image.get_bitsize()
print 'screen', screen.get_bitsize() 
```

这将导致以下错误：

![没有转换](../Images/1cffa328e88ea960bfcd0d3fd8a3b41e.png)

**输出：**

```
bits per pixel
image 8
screen 32 
```

* * *

现在换行

```
image = pygame.image.load('1.png') 
```

至

```
image = pygame.image.load('1.png').convert() 
```

一切都会好起来的：

![与转换](../Images/7bd04f9106a64c8be0d60e490ee43d84.png)

**输出：**

```
bits per pixel
image 32
screen 32 
```

# ios - 故事板中视图控制器之外的 UIView

> ID：11386111
> 
> 赞同：36
> 
> 时间：2012-07-08T19:46:53.500
> 
> 标签：ios, xcode, cocoa-touch, storyboard

我遇到了一个在官方文档、Stackoverflow 或 Google 上找不到答案的问题。

我是一位经验丰富的 iOS 开发人员，但对 Storyboards 不熟悉。我想在当前视图控制器上实例化一个视图，在 NIB 中，我将在视图控制器外部绘制视图并附加一个插座以在代码中引用它并调用类似 addSubview: 的东西。绘制叠加层或在我目前的情况下绘制用于 MapView 委托的标注视图很有用。但我不知道如何在情节提要中做到这一点。

我似乎在视图控制器之外没有视图，并且视图控制器内的视图要么必须是控制器视图的子视图，要么在 Interface Builder 中根本不可见（当您拖动外部组成的视图时这没关系，在传统的 NIB 中，但如果您需要调整它的最细微的细节，这将是一个很大的问题）。

关于做什么或在哪里看的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-08T23:05:33.567

似乎没有办法做到这一点。请参阅[Jason 的评论](https://stackoverflow.com/questions/11386111/uiview-outside-of-a-view-controller-in-a-storyboard#comment15008191_11386111)和解决相同问题的[这个](https://stackoverflow.com/questions/9648076/how-to-design-separate-uiview-outside-of-any-viewcontroller-in-storyboard)问题，尽管在不同的上下文中。

然而，在考虑我的问题的含义时，我早些时候意识到——正如我在[之前的评论](https://stackoverflow.com/questions/11386111/uiview-outside-of-a-view-controller-in-a-storyboard#comment15010381_11386111)中开始解释的那样，在决定是否值得一个完整的答案之前——将自定义视图的设计与应用程序的设计分开是有意义的流动。因此，无法在 Storyboards 中设计自定义视图这一事实很可能是……设计使然。

自定义视图（它是一个可重用的组件）与视图控制器（代表应用程序故事板中的场景）非常不同。这就像电影中的角色和场景一样。你不想在你的场景中设计你的角色，即使你碰巧只在一个场景中使用了那个角色。如果你只在一个场景中使用它是偶然的，但不是必需的。所以必须分开。

您想使用 Interface Builder 来设计自定义视图这一事实只是应该封装在您的类中[的实现细节。](https://stackoverflow.com/questions/8976873/uiviewcontrollers-initwithnibname-a-reason-behind-this-design)应用程序故事板不需要知道，甚至不需要管理，您如何处理可重用视图的特定实现。

嗯，我希望我能有更多这样的审讯：）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-21T22:04:15.437

您可以使用容器视图，就像一个常规视图（您可以分配一个 IBOutlet UIView），但您可以在您的 UIViewController 之外定义它。

![这](../Images/47840d19fb2ee278ef6c97ac6655990e.png) ![你可以设计它](../Images/288d00effa0c55aa659fa1430f8b8d59.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:49:35.650

我自己也在想同样的事情，实际上能够做到这一点，尽管在搞砸之后，它就消失了。我有一个导航控制器、一个视图控制器和两个视图。我在一个单独的 nib 中开发了视图，并将它们导入到这个项目中。在连接按钮时，我正在使用的视图突然出现在我的视图控制器旁边。不幸的是，在试图让另一个视图出现时，我不知何故丢失了它，不知道如何找回它。似乎您不能将视图拖到情节提要中，只能拖到视图控制器中。但是，如果我能够做到一次，它必须是可复制的。

# c# - 过滤可观察的集合

> ID：11386114
> 
> 赞同：0
> 
> 时间：2012-07-08T19:47:00.237
> 
> 标签：c#, observablecollection

我试图用这样的查询过滤可观察的集合

```
var IEquip = from eq in this.reportDocument.Document.InspectionData.Equipments where eq.PartData.ReportIncluded = true
                             orderby eq.PartData.Order ascending
                             select eq; 
```

这似乎可行，但是当我尝试通过 IEquip 进行迭代时

```
foreach (EquipmentItem eq in IEquip)
{
....
} 
```

所有 ReportIncluded 都设置为 true，我可以看到 ReportIncluded 上的 setter 被调用。我已经清空了循环内的逻辑，结果相同。所有 ReportInclude 都在循环的第一次迭代中设置。我错过了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:54:35.120

您正在使用赋值运算符而不是相等：

```
eq.PartData.ReportIncluded = true
// instead of
eq.PartData.ReportIncluded == true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T19:55:35.943

不要混淆`=`和`==`。实际上没有必要将布尔值与`true`and`false`文字进行比较（除非它是一个可为*空*的布尔值）。所以也许你可以不写`where eq.PartData.ReportIncluded`任何东西`== true`？

# java - Java - 何时定义系统属性以及出于什么原因？

> ID：11386116
> 
> 赞同：1
> 
> 时间：2012-07-08T19:47:02.687
> 
> 标签：java, properties, system

这是一个简单的问题，但可能是主观的，所以我想提出一些意见。

我正在设计一个面向插件的项目，并且我有一个需要自己的配置文件的插件。在不修改核心 API 以适应第三方配置文件的情况下，用户是否可以提供指向该文件的 VM 参数，或者有更好的方法吗？

例子：

```
-Dcom.unidentified.project.plugin.MyPlugin.configFile="config/Config.xml" 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:59:25.210

Depends on who is your user.If the user is a technician for example it is probably ok.
If it is a normal user then IMO it is not a good idea.User's don't like to know such details and don't actually understand what they are doing ("what the heck is a VM argument?")
I would suggest that you have a predefined folder for your configuration and just publish that to the user. Then you just search that folder.
For example you could have just a `config` folder that contains all your configuration files e.g. in the user dir or the same dir as your application and the user is aware of this.
Then you search for the `Config.xml` or any other configuration file there

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:04:18.960

我使用多种方法：

1.  检查 VM 参数
2.  检查命令行（此处不适用）
3.  检查 ~/.myapp （是的，它可以在 Windows 上使用 env 变量完成）
4.  从应用程序启动目录中提取默认值

我发现我拿的第一个。我倾向于只在本地使用 VM 方法来覆盖开发中的正常功能。问题是我什至忘记了当我必须建立一个新环境时。

# c# - Web API 中的单元测试自定义路由

> ID：11386120
> 
> 赞同：8
> 
> 时间：2012-07-08T19:47:20.680
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我已经花了半天时间没有任何成功。你如何在 Web API 中对路由进行单元测试？

我的意思是给定以下 URI：

```
~/Test/Get/2 
```

我想对上面的 url 由 Test 控制器捕获并接受 int 参数的 Get 操作进行单元测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-10T13:35:29.070

为了测试路线，我创建了一个库来帮助您进行断言 - MyWebApi：[https ://github.com/ivaylokenov/MyWebApi](https://github.com/ivaylokenov/MyWebApi)

基本上，您可以执行以下操作：

```
MyWebApi
    .Routes()
    .ShouldMap(“api/WebApiController/SomeAction/5”)
    .WithJsonContent(@”{“”SomeInt””: 1, “”SomeString””: “”Test””}”)
    .And()
    .WithHttpMethod(HttpMethod.Post)
    .To(c => c.SomeAction(5, new RequestModel
    {
        SomeInt = 1,
        SomeString = “Test”
    })); 
```

如果想自己实现，可以看这里的代码，复制一下： [https ://github.com/ivaylokenov/MyWebApi/blob/master/src/MyWebApi/Utilities/RouteResolvers/InternalRouteResolver.cs](https://github.com/ivaylokenov/MyWebApi/blob/master/src/MyWebApi/Utilities/RouteResolvers/InternalRouteResolver.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:07:46.460

我在相关问题中描述了如何测试 Web API 路由的现成示例：[Testing route configuration in ASP.NET WebApi](https://stackoverflow.com/questions/11851558/testing-route-configuration-in-asp-net-webapi#answer-14370617)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:01:22.113

这就是我所做的，请让我知道你的想法

```
[Test]
public void Should_be_able_to_route_to_gettables_action_in_databaseschemaexplorercontroller()
{
    const string url = "~/DatabaseSchemaExplorer/Tables/DatabaseType/Provider/DataSource/DatabaseName";

    _httpContextMock.Expect(c => c.Request.AppRelativeCurrentExecutionFilePath).Return(url);

    var routeData = _routes.GetRouteData(_httpContextMock);

    Assert.IsNotNull(routeData, "Should have found the route");
    Assert.AreEqual("DatabaseSchemaExplorer", routeData.Values["Controller"]);
    Assert.AreEqual("Tables", routeData.Values["action"]);
    Assert.AreEqual("DatabaseType", routeData.Values["databaseType"]);
    Assert.AreEqual("Provider", routeData.Values["provider"]);
    Assert.AreEqual("DataSource", routeData.Values["dataSource"]);
    Assert.AreEqual("DatabaseName", routeData.Values["databaseName"]);
} 
```

# r - 使用估计的状态空间参数进行预测

> ID：11386121
> 
> 赞同：1
> 
> 时间：2012-07-08T19:47:29.960
> 
> 标签：r, state-space

我有一个时间序列（ts）并使用**MARSS**包创建状态空间模型

```
fit = MARSS(ts) 
```

给出参数估计、状态估计 ( `fit$states`) 及其标准误差 ( `fit$states.se`)

但这些估计仅适用于历史数据系列。

关于如何生成这些矩阵模型有一个很棒的教程。

[http://cran.r-project.org/web/packages/MARSS/vignettes/Quick_Start.pdf](http://cran.r-project.org/web/packages/MARSS/vignettes/Quick_Start.pdf)

但是如何使用历史模型输出矩阵进行新的矩阵估计并预测未来的 1、2、3 个周期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-16T06:56:18.530

A bit too late, but all you need to do to forecast is to input missing values at the end of the series and then MARSS will automatically fill those missings with the desired forecasts. Forecasting in state space models is equivalent to handling missing values...

# ios - UINavigationController 不会推送其他视图控制器？

> ID：11386129
> 
> 赞同：0
> 
> 时间：2012-07-08T19:48:58.790
> 
> 标签：ios, uitableview, sdk, uinavigationcontroller

所以我在我的应用程序的委托中创建了一个 UINavigationController 并使用我的 RootViewController 实例对其进行了初始化。UINavigationController 被添加为应用程序 UIWindow 的子视图。（如果这很重要，我的 RVC 有一个自定义初始化程序。）

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
              _window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

              _viewController = [[RootViewController alloc] initWithPath:@"/private/var/mobile/"];
              _viewController.title = @"mobile";

              UINavigationController *nav1 = [[[UINavigationController alloc] initWithRootViewController:_viewController] autorelease];

              //This part I'm not sure about as well
              [_window addSubview:nav1.view];
              [_window makeKeyAndVisible];

    return 0;
    } 
```

有了这些信息，我试图将另一个 RVC 实例从 UITableView 推送到导航堆栈，如下所示：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
              //I've tried it without the if statement as well
              if(indexPath.section == 0){
                      RootViewController *detailView = [[RootViewController alloc] initWithPath:launchDirectory];
                      detailView.title = relativeDirectory;
                      [self.navigationController pushViewController:detailView animated:YES]; 
```

另请注意，我的 RVC tableview 的数据源和委托已设置为“self”。

我的问题是：为什么即使我在表格上选择了一行，视图仍然保持不变？该表不会推送到新表，并且在选择一行后我仍然看到相同的单元格内容。换句话说，什么都没有发生……

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:57:03.433

你的导航控制器很可能`nil`，这意味着你`-autorelease`的有点太多了。通常，导航控制器会一直存在，直到调用委托的 dealloc 方法，所以在那里释放它。

# java - 无法从 Foursquare 获取附近的场地

> ID：11386132
> 
> 赞同：1
> 
> 时间：2012-07-08T19:49:44.230
> 
> 标签：java, android, foursquare

我正在使用 Foursquare API，我正在尝试获取附近的场地这是我正在使用的代码

```
public ArrayList<FsqVenue> SearchBykeyword(double latitude, double longitude, String query) throws Exception {
    ArrayList<FsqVenue> venueList = new ArrayList<FsqVenue>();
    try {
        String ll   = String.valueOf(latitude) + "," + String.valueOf(longitude);
        URL url     = new URL(API_URL + "/venues/search?ll=" + ll + "&query=" + query + "&radius=" + 50 + "&oauth_token=" + mAccessToken + "&v=20120610");

        Log.d(TAG, "Opening URL " + url.toString());

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setRequestMethod("GET");
        urlConnection.setDoInput(true);

        urlConnection.connect();
        String response="";
        try{
            response = streamToString(urlConnection.getInputStream());
        } catch (Exception e) {
            String error= streamToString(urlConnection.getErrorStream());
            Log.d("error", error);
            throw e;
        }

        JSONObject jsonObj  = (JSONObject) new JSONTokener(response).nextValue();

        JSONArray groups    = (JSONArray) jsonObj.getJSONObject("response").getJSONArray("groups");

        int length          = groups.length();
        if (length > 0) {
            for (int i = 0; i < length; i++) {
                JSONObject group    = (JSONObject) groups.get(i);
                JSONArray items     = (JSONArray) group.getJSONArray("items");

                int ilength         = items.length();

                for (int j = 0; j < ilength; j++) {
                    JSONObject item = (JSONObject) items.get(j);

                    FsqVenue venue  = new FsqVenue();

                    venue.id        = item.getString("id");
                    venue.name      = item.getString("name");

                    JSONObject location = (JSONObject) item.getJSONObject("location");

                    Location loc    = new Location(LocationManager.GPS_PROVIDER);

                    loc.setLatitude(Double.valueOf(location.getString("lat")));
                    loc.setLongitude(Double.valueOf(location.getString("lng")));

                    venue.location  = loc;
                    //venue.address = location.getString("address");
                    venue.distance  = location.getInt("distance");
                    //venue.herenow = item.getJSONObject("hereNow").getInt("count");
                    venue.type      = group.getString("type");

                    venueList.add(venue);
                }
            }
        }
    } catch (Exception ex) {
        throw ex;
    }
    return venueList;
} 
```

在这条线上：

```
urlConnection.setRequestMethod("GET"); 
```

我收到此错误：

```
07-08 22:45:16.432: W/System.err(27663): java.net.ProtocolException: Connection already established
07-08 22:45:16.432: W/System.err(27663):    at java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:654)
07-08 22:45:16.440: W/System.err(27663):    at libcore.net.http.HttpsURLConnectionImpl.setRequestMethod(HttpsURLConnectionImpl.java:143)
07-08 22:45:16.440: W/System.err(27663):    at com.android.guideme.FoursquareApp.SearchBykeyword(FoursquareApp.java:207)
07-08 22:45:16.447: W/System.err(27663):    at com.android.guideme.GuideMeService$1.run(GuideMeService.java:89) 
```

我不确定这意味着什么或有什么问题有什么想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:09:52.760

fwiw，当我第二次尝试执行请求时，我得到了这个异常。我第一次遇到授权异常，重新验证并尝试使用新的 oauth 令牌再次运行请求。

我重用了当时无效的请求对象，因为它之前已经执行过了。通过使用原始请求的方法、url 和参数重新创建一个新请求并执行该请求，我摆脱了错误。

# node.js - 为什么管道在回调中不起作用

> ID：11386133
> 
> 赞同：4
> 
> 时间：2012-07-08T19:49:50.847
> 
> 标签：node.js, stream

我有以下服务器：

```
http.createServer(function (req, res) {

  fs.mkdir(__dirname + '/output', function (err) {

    req.pipe(fs.createWriteStream(__dirname + '/output/file.txt'));
    res.end();

  });

}).listen(3000); 
```

然后我使用[请求](http://github.com/mikeal/request)将流传输到服务器。

```
var fs = require('fs');
var request = require('request');

var crs = fs.createReadStream(__dirname + '/file.txt');
var r = request.post('http://0.0.0.0:3000');

crs.pipe(r); 
```

有时它可以工作，但大多数时候 /output/file.txt 是空的。当我将 req.pipe(...) 移到 mkdir 回调之外时，它每次都有效。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T21:24:08.167

由于`mkdir`是异步的，因此在创建目录时会发出请求中的数据。`pause`您需要使用and来指示流直到稍后才发出数据`resume`。

```
http.createServer(function (req, res) {
  req.pause();
  fs.mkdir(__dirname + '/output', function (err) {
    req.pipe(fs.createWriteStream(__dirname + '/output/file.txt'));

    req.resume();
    res.end();
  });
}).listen(3000); 
```

# ios - 使用 MonoTouch 可滚动的图像带和屏幕内的其他内容

> ID：11386135
> 
> 赞同：1
> 
> 时间：2012-07-08T19:49:58.143
> 
> 标签：ios, xcode, xamarin.ios

我正在寻找可用于执行以下操作的示例代码、文档甚至第三方控件。

我想在我的 iOS 屏幕上创建一个只占用部分屏幕的乐队。这可以左右滚动。带内的内容将是信息。图标。图片。等等。每个项目也都是可点击的。

关于如何在 MonoTouch 中实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:32:25.720

该组件称为 CoverFlow。Apple 限制使用自己的 API，因此有一些开源库。其中之一是 OpenFlow，您可以在这里找到它：http: [//apparentlogic.com/openflow/](http://apparentlogic.com/openflow/)

关于它的好处 - 不久前它被移植到 C#。在这里你可以找到这个库的 MonoTouch 端口：[https ://github.com/migueldeicaza/OpenFlowSharp](https://github.com/migueldeicaza/OpenFlowSharp)

它可以在您的应用程序中免费使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:16:52.953

我建议您观看WWDC 2012[的 Enhancing User Experience with Scroll Views](https://developer.apple.com/videos/wwdc/2012/?id=223) *。

演讲者讨论了使用 UIScrollView 和 UIPageViewController。由于您不想缩放，因此您的情况听起来更简单。

在 iOS 6 中，页面视图控制器添加了一种新的过渡样式，因此您可以在“页面”之间滚动而不是“卷曲”。

请参阅beta 文档中的[过渡样式：](https://developer.apple.com/library/prerelease/ios/#documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html#//apple_ref/doc/c_ref/UIPageViewControllerTransitionStyle)

> **UIPageViewControllerTransitionStyleScroll**
> 滚动过渡样式。
> 当指定页面滚动样式时，页面视图控制器在视图控制器之间转换时会显示页面滚动动画。如果指定了数据源，则动画会在导航手势期间跟随用户的手指。在 iOS 6.0 及更高版本中可用。

目前，我还没有尝试使用 iOS 6 和 MonoTouch。有关将 iOS 6 与 MonoTouch 一起使用，请参阅此公告：http: [//blog.xamarin.com/2012/06/15/xcode-4-5-ios-6-and-mountain-lion/](http://blog.xamarin.com/2012/06/15/xcode-4-5-ios-6-and-mountain-lion/)

*需要开发人员访问权限。

# java - 如何使用 java 将 BigInteger 插入 MySQL 数据库

> ID：11386138
> 
> 赞同：0
> 
> 时间：2012-07-08T19:50:21.563
> 
> 标签：java, mysql

我的问题是：如何在 MySQL DB 中插入 BigInteger 变量作为 BIGINT？在我看来Java中的preparedstatement对象没有方法支持这种类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:54:40.110

According to [this documentation](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html), BIGINT is just a 64-bit integer in MySQL - so use `setLong`. That should be fine for signed BIGINT types in MySQL. Unfortunately Java doesn't have an "unsigned long" type, so if you have an unsigned BIGINT in your database that could be trickier - you could *try* still using `setLong`, and see whether it just overflows in the "natural" way.

# objective-c - 为什么我的块声明给我一个不兼容的指针错误？

> ID：11386142
> 
> 赞同：2
> 
> 时间：2012-07-08T19:50:52.783
> 
> 标签：objective-c, ios, xcode, objective-c-blocks

我正在声明这样的块：

```
void (^callback)(NSString *_accessToken) = ^{
  // do something interesting with _accessToken
} 
```

但 XCode 一直告诉我

```
Incompatible block pointer types initializing void(^__strong)(NSString *__strong)
with an expression of type void (^)(void) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:54:36.100

```
void (^callback)(NSString *) = ^(NSString *_accessToken){
  // do something interesting with _accessToken
} 
```

# jquery - CSS WebKit 溢出隐藏边框半径问题

> ID：11386143
> 
> 赞同：1
> 
> 时间：2012-07-08T19:51:15.497
> 
> 标签：jquery, css

我有一个圆圈列表，当单击该圆圈时，会在原始圆圈内显示从上到下的 div (.active) 动画。在 Firefox 中，动画 div 被屏蔽，但在 Safari 和 Chrome 中，可以看到动画 div (.active)，并且不会将自己隐藏到父 li。

我看过其他一些关于这个问题的帖子，但不是关于动画的。

有没有其他人遇到过这个问题或知道解决方案？

```
HTML

<ul class="circles">
  <li class="image-1"><div class="active"><p>text text</p></div></li>
  <li class="image-2"><div class="active"><p>text text</p></div></li>
  <li class="image-3"><div class="active"><p>text text</p></div></li>                                                                          
</ul> 

CSS

ul.circles li{float:left; text-align: center; background-color:blue; height:186px; width:186px; border-radius:200px; border:10px solid white; overflow:hidden; display:block; position:relative;}
ul.circles li.image-1{background:url(image.png) 0 0 no-repeat;}         
ul.circles li .active{background: rgb(154, 189, 44); position:relative; width:186px; height:186px; top:190px; border-radius:200px;} 

JS

$('.circles li').toggle(function() {
    $(this).find('div').animate({opacity: 0.8, top:'0'}, 1000 )
},function() {
    $(this).find('div').animate({opacity: 0.7, top:'190px'}, 1000 );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:17:51.100

也许这可以帮助，

如果圆圈不必包含可点击的链接，您可以在顶部放置一个透明图像，我使用的是我在谷歌上找到的图像，所以我必须更改宽度和高度。

[http://jsfiddle.net/PrZZc/22/](http://jsfiddle.net/PrZZc/22/)

黑色边框随图像一起提供，因此您必须创建自己的

# xcode - 在 LLDB 调试器中显示变量属性的值？

> ID：11386147
> 
> 赞同：13
> 
> 时间：2012-07-08T19:51:23.407
> 
> 标签：xcode, lldb

我正在使用带有操作“日志消息”的断点，并且我想打印 NSIndexPath 的行。所以我尝试了：`cell row @indexPath.row@`但没有打印出来。我也尝试使用调试器命令：`expr (void)NSLog(@"indexPath row:%i", indexPath.row)`但出现错误：`error: property 'row' not found on object of type 'NSIndexPath *'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-08T20:01:16.973

The dot syntax is just syntactic sugar added by the compiler. I've always disagreed with adding it to Objective-C, but some people love it. What you have to remember is that these dots are getting converted into method calls by the compiler, so when you message something directly, like in the debugger, you must use the actual method call. Try rewriting your expression:

```
expr (void)NSLog(@"indexPath row: %ld", (long int)[indexPath row]) 
```

I'm not sure if the debugger's basic log method will execute method calls like this, so you may have to use the expression type.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-23T12:00:14.750

我认为这是一个特例。下面的代码将起作用，但前提`row`是初始化为某个值。

```
(lldb) print (NSInteger)[indexPath row] 
```

我认为这可能与 row 属性是 UIKit 中 NSIndexPath 的扩展并作为该类上的类别实现的事实有关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-03T13:08:01.290

尝试在 Xcodes 变量视图中设置此摘要格式：

```
section:{(int)[$VAR section]},row:{(int)[$VAR row]} 
```

# wordpress - Wordpress 编辑器 + qtranslate = 跨度问题

> ID：11386149
> 
> 赞同：2
> 
> 时间：2012-07-08T19:51:27.570
> 
> 标签：wordpress, tinymce, wysiwyg, html

我正在创建 Wordpress 多语言网站并为此使用 qTranslate 插件。为了插入内容，每种语言在 Wordpress TinyMCE 编辑器中都有自己的可视化/HTML 输入字段。问题是编辑器“吃掉”了我的`<span>`标签，例如自动格式`<br>`和`<p>`标签！

另外，我尝试了 TinyMCE Advanced，但没有效果。保存页面/帖子后，`<span>`标签会从内容中消失。有谁知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:27:01.103

您可能需要设置`Spans`为[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)。

# javascript - D3.js 地图上的纬度/经度位置

> ID：11386150
> 
> 赞同：1
> 
> 时间：2012-07-08T19:51:27.723
> 
> 标签：javascript, jquery, d3.js

我有这段代码，它基本上创建了一个 D3.js 地图并在有人根据他们的 IP 位置“点击”页面时创建一个“圆圈”，这最初是在 Raphael 中完成的，我试图只使用 D3.js 库，但我被困在如何使用正确的坐标直接在地图上放置“圆圈”：-

```
function ZmgcClient() {
    var personPath = "M255.968,166.154c34.206,0,61.936-27.727,61.936-61.934c0-34.208-27.729-61.936-61.936-61.936s-61.936,27.728-61.936,61.936 C194.032,138.428,221.762,166.154,255.968,166.154z M339.435,194.188c-13.082-13.088-28.625-20.924-84.83-20.924 c-56.214,0-71.38,8.505-83.796,20.924c-12.422,12.416-8.23,144.883-8.23,144.883l27.485-65.304l17.28,194.554l49.856-99.57 l46.521,99.57l16.456-194.554l27.487,65.304C347.664,339.07,352.521,207.271,339.435,194.188z";
    if (! (this instanceof arguments.callee)) {
        return new arguments.callee(arguments);
    }
    var self = this,
    width = $('#map').width(),
        mapCanvasHeight = (width * 0.45);

    this.init = function() {
        self.drawMap();
        self.setupBayeuxHandlers();
    };

    this.setupBayeuxHandlers = function() {
        $.getJSON("/config.json", function (config) {
            self.client = new Faye.Client("http://" + window.location.hostname + ':' + config.port + '/faye', {
                timeout: 120
            });

            self.client.subscribe('/stat', function (message) {
                // console.log("MESSAGE", message);
                self.drawMarker(message);
            });
        });
    };

    this.drawMap = function () {
        var data;
        // Most parts of D3 don't know anything about SVG—only DOM.
        self.map = d3.geo.equirectangular().scale(width);
        self.path = d3.geo.path().projection(self.map);
        self.svg = d3.select('#map').append('svg:svg')
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", "0 0 " + width + " " + mapCanvasHeight);

        self.countries = self.svg.append('svg:g').attr('id', 'countries');
        // Load data from .json file
        d3.json("/ui/data/world-countries.json", function(json) {
            self.countries.selectAll("path")    // select all the current path nodes
            .data(json.features)                // bind these to the features array in json
            .enter().append("path")             // if not enough elements create a new path
            .attr("d", self.path)               // transform the supplied jason geo path to svg
            .on("mouseover", function(d) {
                d3.select(this).style("fill","#6C0")
                    .append("svg:title")
                    .text(d.properties.name);})
            .on("mouseout", function(d) {
                d3.select(this).style("fill","#000000");})
        });
    }

    this.geoCoordsToMapCoords = function (latitude, longitude) {
        latitude = parseFloat(latitude);
        longitude = parseFloat(longitude);

        var mapWidth = width,
            mapHeight = mapCanvasHeight,
            x, y, mapOffsetX, mapOffsetY;

        x = (mapWidth * (180 + longitude) / 360) % mapWidth;

        latitude = latitude * Math.PI / 180;
        y = Math.log(Math.tan((latitude / 2) + (Math.PI / 4)));
        y = (mapHeight / 2) - (mapWidth * y / (2 * Math.PI));

        mapOffsetX = mapWidth * 0.026;
        mapOffsetY = mapHeight * 0.141;

        return {
            x: (x - mapOffsetX) * 0.97,
            y: (y + mapOffsetY + 15),
            xRaw: x,
            yRaw: y
        };
    }

    this.drawMarker = function (message) {
        var lon = message.longitude,
            lat = message.latitude,
            city = message.city;

        self.countries.append('svg:circle')
            .attr("cy", lon, lat) 
            .attr("cx", lon, lat)
            .attr('r', 5);
    }
    // Initialise
    this.init();
};

var ZmgcClient;

jQuery(function() {
  ZmgcClient = new ZmgcClient();
}); 
```

我正在尝试传递 lon/lat 数据并在地图上的该点画一个圆圈，这段代码：

```
this.drawMarker = function (message) {
    var latitude = message.latitude,
        longitude = message.longitude,
        text = message.title,
        city = message.city,
        x, y;

    var mapCoords = this.geoCoordsToMapCoords(latitude, longitude);
        x = mapCoords.x;
        y = mapCoords.y;

    console.log(x,y);
    self.countries.append('svg:circle')
        .attr("r", 40.5)
        .attr("cx", longitude)
        .attr("cy", latitude);
        console.log(latitude, longitude); 
```

圆已创建，但位置不正确。

我错过了什么？

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:52:31.570

应该是晚了，应该是

```
 var mapCoords = this.geoCoordsToMapCoords(latitude, longitude);
        x = mapCoords.x;
        y = mapCoords.y;

    self.countries.append('svg:circle')
        .attr("r", 5)
        .style("fill", "steelblue")
        .attr("cx", x)
        .attr("cy", y); 
```

而不是纬度，经度值。

# php - PHP：在后台多次执行一个程序，一次

> ID：11386157
> 
> 赞同：0
> 
> 时间：2012-07-08T19:53:00.817
> 
> 标签：php, background, exec

我用“C”写了一个程序，我想用php执行它，我尝试使用函数php_exec，但它不起作用。为了更具体地解决我的问题，我会告诉你一些细节。这个程序是用来加快下载速度的，简而言之，用户会进入一个网页，放上他们的直接链接，然后提交他们的链接以获得来自我的服务器的直接链接，这里的问题是“我怎样才能让用户使用它，有没有相当于 php_exec 的？” 因为我认为如果许多用户同时发送他们的链接，php_exec 不起作用，我也想知道，这会损害我的服务器吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:56:12.200

You probably do not want to use `exec` in that situation since it waits until the executed program is finished which blocks the complete script.

The [PHP Documentation](http://at2.php.net/manual/en/function.exec.php) tells you the following:

> **Note:** If a program is started with this function, in order for it to continue running in the background, the output of the program must be redirected to a file or another output stream. Failing to do so will cause PHP to hang until the execution of the program ends.

However, you probably want to add the links to a queue (maybe a database) and execute a cron job every now and then which then downloads the files which are stored in the queue.

There is also another similar question with an [excellent answer](https://stackoverflow.com/a/45966/246051).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:05:19.670

```
// Start your 'downloader'
$handle = popen('/path/to/executable 2>&1', 'r');
// While it's generating output, print it to the screen
while (!feof($handle)){
    echo fread($handle, 2096);
}
// Close the process handle
pclose($handle); 
```

这*将*允许多个用户同时使用它。每个 PHP 进程都会派生出它自己的副本`/path/to/executable`，并将后台进程的输出刷新到用户屏幕。

# c++ - 未找到 C++ 默认构造函数

> ID：11386159
> 
> 赞同：2
> 
> 时间：2012-07-08T19:53:43.027
> 
> 标签：c++, constructor

我在使用 Visual C++ 2010 Express 中的某些代码时遇到问题。我正在尝试创建一个具有接受具有默认值的参数的构造函数的类。这是一个简短的程序，显示了我想要实现的目标：

```
//Class declaration
class Class {
private:
    int mValue;
public:
    Class(int);
    int GetValue();
};

Class::Class(int val=1) : mValue(val)
{
}

int Class::GetValue()
{
    return mValue;
}

int main()
{
    Class test;
    cout << test.GetValue() << endl;
} 
```

现在这似乎工作正常。如果我用 替换`Class test`，`Class test(10)`比如说，`mValue`正确初始化。

然而，在第二个程序中，我试图做同样的事情。我有一个这样定义的类：

```
namespace mobs {
    Class Monster {
    private:
        mHitPoints;
    public:
        Monster(int);
        int GetHitPoints() const;
    };
} 
```

实现这样的功能：

```
namespace mobs {

    Monster::Monster(int hp=10) : mHitPoints(hp)
    {
    }

    int Monster::GetHitPoints() const
    {
        return mHitPoints;
    }
} 
```

但是当我尝试声明一个类并`GetHitPoints()`像这样使用函数时：

```
mobs::Monster testmonster;
cout << testmonster.GetHitPoints() << endl; 
```

Visual C++ 告诉我“类 mobs::Monster 不存在默认构造函数”。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:57:25.113

The default value belongs in the declaration, not the definition. Move the `=10` to your header file:

`Monster(int hp = 10)`.

In the implementation, you don't even need the default value. I usually use:

`Monster::Monster(int hp /*=10*/)`

just to make it clear there's a default.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T20:02:05.767

构造函数是模棱两可的。这就是为什么。如果你有两个构造函数

```
Monster(){}
Monster(x=10){} 
```

然后你打电话 Monster m();

编译器应该如何知道您是指第一个构造函数还是第二个构造函数，而是将其定义如下

```
class Class {
private:
    int mValue;
public:
    Class(int val) :mValue(val){}
    Class() :mValue(1){}
}; 
```

# jquery - 如何提交 sj:autocompleter 和 s:form

> ID：11386163
> 
> 赞同：0
> 
> 时间：2012-07-08T19:54:11.440
> 
> 标签：jquery, struts2

```
<s:form action="searchflight" method="post" id="flightform">
                    <s:url id="remoteurl" action="fromautofill"/>
                    <sj:autocompleter id="listFrom" name="from"
                                      label="From" parentTheme="xhtml"
                                      href="%{remoteurl}"
                                      delay="50" size="60"
                                      loadMinimumCount="2"
                                      onCompleteTopics="updateFrom"
                                      onSelectTopics="updateFrom"
                                      />
         <s:submit></s:form> 
```

如何在单击提交按钮时提交在自动完成器中选择的值以及表单提交。

我尝试过，但总是在操作中从（自动完成器名称）值中获取空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:36:27.110

目前，我想出了一个替代方案。

我添加了隐藏字段并填充了自动完成器的 onSelectTopics，如下所述：

```
<s:form action="searchflight" method="post" id="flightform">
<s:hidden name="from"/>                    
                    <sj:autocompleter id="listFrom"
                                      label="From" parentTheme="xhtml"
                                      href="%{remoteurl}"
                                      delay="50" size="60"
                                      loadMinimumCount="2"                                      
                                      onSelectTopics="updateFrom"
                                      />
 <s:submit></s:form>

<script type="text/javascript">
 $.subscribe('updateFrom', function(event,data) {
                document.flightform.from.value=event.originalEvent.ui.item.value;
            });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:56:52.917

```
<sj:autocompleter id="listFrom"
                                 name="from"

                                 label="From" parentTheme="xhtml"
                                  href="%{remoteurl}"
                                  delay="50" size="60"
                                  loadMinimumCount="2"                                      
                                  onSelectTopics="updateFrom"
                                  /> 
```

> 请注意，如果您在自动完成器标签中使用名称，它将直接映射到模型中的 getter。所以使用名称属性而不是使用隐藏标签。
> 
> 休息没问题。

# java - 如何使用正则表达式剥离字符串

> ID：11386165
> 
> 赞同：1
> 
> 时间：2012-07-08T19:54:15.763
> 
> 标签：java, regex

我想在一个字符串中找到所有负浮点数并将它们存储在一个数组中。我认为我的正则表达式是正确的，但我的方法有问题。

```
Pattern pattern = Pattern.compile("[-]?[0-9]*[.][0-9]+$");      
String[] results = pattern.split("|AAA--A A05_#A| |-999.999| |-55.7|"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T19:59:23.803

您的正则表达式将匹配锚定到字符串的末尾，这不是您想要的。

同样，`Pattern.split`不做你想做的事。这里有一些示例代码可以帮助您：

```
Pattern pattern = Pattern.compile("[-]?[0-9]*[.][0-9]+");
String text = "|AAA--A A05_#A| |-999.999| |-55.7|";
Matcher matcher = pattern.matcher(text);
while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

这打印：

```
-999.999
-55.7 
```

`while`显然，您可以在循环中添加到列表或类似内容。我不知道有什么方法可以返回所有匹配项的集合，但是您可以根据上面的代码轻松编写一个实用程序方法来自己执行此操作。

编辑：如评论中所述，如果您*只想*找到负值，则`-`不应该是可选的（也不需要在集合中 - 就`-?`可以了）。

# ruby-on-rails-3 - 使用 Rubber 部署到 EC2 时如何设置默认主机？

> ID：11386167
> 
> 赞同：0
> 
> 时间：2012-07-08T19:54:30.857
> 
> 标签：ruby-on-rails-3, deployment

我正在运行 Rails 3.0.3 并尝试使用 Rubber 将我的应用程序部署到 Amazon ec2。我在这个主题上观看了 Railscast #347 并遵循了每一步。但是当我运行时`cap rubber:create_staging`，我得到`.../gems/amazon-ec2-0.9.17/lib/AWS.rb:142:in 'initialize': No :server provided (AWS::ArgumentError)`了，当我查看 AWS.rb 中的行时，似乎我应该在某个地方设置一个 default_host，但是 Ryan Bates 从未在 Railscast 中提到过，我不知道在哪里设置它或什么这甚至意味着在这种情况下。我可以在哪个配置文件中设置默认主机？还是这表明存在不同的问题？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:09:08.177

You're running a really old version of Rubber. Please try upgrading to the latest 2.x release and let me know if that works.

# iphone - 核心数据对象图设计决策

> ID：11386170
> 
> 赞同：0
> 
> 时间：2012-07-08T19:54:39.110
> 
> 标签：iphone, ios, database, core-data

我正在设计一个跟踪`Game`对象数据的应用程序。每个`Game`都有 a `name`， a`date`和其他属性。我遇到的问题是因为我希望用户能够添加更多名称（例如）以在应用程序中进行选择。（在这种情况下来自 UITableView）。因此，用户会看到一个可供选择的名称列表，如果他们想要的名称不在列表中，他们可以将其添加到列表中。

我的解决方案是我目前有第二个实体`GameName`，这样我就可以向用户显示这些游戏名称的列表，以便在他们添加新的`Game`. 我只是调用`NSFetchRequest`所有`GameName`对象并将它们显示在`UITableView`. 不必`Game`创建一个对象来执行此操作。

我的困境是我想知道这是否是一个好习惯。似乎如果我这样做，我最终会得到很多只有一个属性的实体，以便允许用户选择并添加到可定制的列表中。

我希望这是有道理的。我可以根据要求澄清任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:42:11.667

您的方法很好，并且通常用于数据库设计。您要添加的实体在数据库中称为“域表”。请参阅[此页面](http://en.wikipedia.org/wiki/Data_domain)，特别是本段：

> 在规范化数据模型中，参考域通常在参考表中指定。按照前面的示例，一个 Gender 引用表将恰好有两条记录，每个允许值一个，不包括 NULL。引用表通过使用外键与数据库中的其他表正式相关。

当然，您可能希望在`GameName`和`Game`实体之间有一个可选的关系。

# scala - 在 Scala 中添加 LinkedHashMap 的解决方法？

> ID：11386172
> 
> 赞同：1
> 
> 时间：2012-07-08T19:54:47.940
> 
> 标签：scala, immutability, linkedhashmap

我有一个 LinkedHashMap，我一直在以一种典型的方式使用它：在末尾添加新的键值对，并按插入顺序访问它们。但是，现在我有一个特殊情况，我需要将对添加到地图的“头部”。我认为 LinkedHashMap 源中有一些功能可以做到这一点，但它具有私有可访问性。

我有一个解决方案，我创建一个新映射，添加对，然后添加所有旧映射。在 Java 语法中：

```
newMap.put(newKey, newValue) 
newMap.putAll(this.map)
this.map = newMap 
```

有用。但这里的问题是我需要将我的主要数据结构（this.map）设为 var 而不是 val。

谁能想到更好的解决方案？请注意，我绝对需要 Map 集合提供的快速查找功能。前置的性能并不是什么大问题。

更一般地说，作为一名 Scala 开发人员，在这种情况下，假设没有可预见的并发需求，您将如何努力避免使用 var？您会创建自己的 LinkedHashMap 版本吗？坦率地说，看起来很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:10:39.910

你看过[LinkedHashMap](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/LinkedHashMap.scala)的代码吗？该类有一个 field `firstEntry`，只需快速浏览一下，创建一个仅添加新方法并导致您需要的行为`updateLinkedEntries`的子类应该相对容易，例如（未测试）：`LinkedHashMap``prepend``updateLinkedEntriesPrepend`

```
private def updateLinkedEntriesPrepend(e: Entry) {
    if (firstEntry == null) { firstEntry = e; lastEntry = e }
    else {
        val oldFirstEntry = firstEntry
        firstEntry = e
        firstEntry.later = oldFirstEntry
        oldFirstEntry.earlier = e
    }
} 
```

* * *

这是我快速拼凑的示例实现（也就是说，没有经过彻底测试！）：

```
class MyLinkedHashMap[A, B] extends LinkedHashMap[A,B] {

  def prepend(key: A, value: B): Option[B] = {
    val e = findEntry(key)
    if (e == null) {
      val e = new Entry(key, value)
      addEntry(e)
      updateLinkedEntriesPrepend(e)
      None
    } else {
      // The key already exists, so we might as well call LinkedHashMap#put
      put(key, value)
    }
  }

  private def updateLinkedEntriesPrepend(e: Entry) {
    if (firstEntry == null) { firstEntry = e; lastEntry = e }
    else {
      val oldFirstEntry = firstEntry
      firstEntry = e

      firstEntry.later = oldFirstEntry
      oldFirstEntry.earlier = firstEntry
    }
  }

} 
```

像这样测试：

```
object Main {

 def main(args:Array[String]) {
    val x = new MyLinkedHashMap[String, Int]();

    x.prepend("foo", 5)
    x.prepend("bar", 6)
    x.prepend("olol", 12)

    x.foreach(x => println("x:" + x._1 + " y: " + x._2  ));
  }

} 
```

其中，在 Scala 2.9.0 上（是的，需要更新）导致

```
x:olol y: 12
x:bar y: 6
x:foo y: 5 
```

* * *

一个快速的基准测试显示了扩展的内置类和“映射重写”方法之间的性能差异数量级（我使用了 Debilski 在“ExternalMethod”中的答案和我在“BuiltIn”中的答案）：

```
 benchmark length        us linear runtime
ExternalMethod     10   1218.44 =
ExternalMethod    100   1250.28 =
ExternalMethod   1000  19453.59 =
ExternalMethod  10000 349297.25 ==============================
       BuiltIn     10      3.10 =
       BuiltIn    100      2.48 =
       BuiltIn   1000      2.38 =
       BuiltIn  10000      3.28 = 
```

基准代码：

```
 def timeExternalMethod(reps: Int) = {
    var r = reps
    while(r > 0) {
      for(i <- 1 to 100) prepend(map, (i, i))
      r -= 1
    }
  }

  def timeBuiltIn(reps: Int) = {
    var r = reps
    while(r > 0) {
      for(i <- 1 to 100) map.prepend(i, i)
      r -= 1
    }
  } 
```

使用[Scala 基准测试模板](https://github.com/sirthias/scala-benchmarking-template)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:12:20.807

这会起作用，但也不是特别好：

```
import scala.collection.mutable.LinkedHashMap

def prepend[K,V](map: LinkedHashMap[K,V], kv: (K, V)) = {
  val copy = map.toMap
  map.clear
  map += kv
  map ++= copy
}

val map = LinkedHashMap('b -> 2)
prepend(map, 'a -> 1)
map == LinkedHashMap('a -> 1, 'b -> 2) 
```

# javascript - 使用 setInterval 更改 html 上的标题

> ID：11386174
> 
> 赞同：2
> 
> 时间：2012-07-08T19:54:57.283
> 
> 标签：javascript, setinterval

我正在尝试为我的页面标题设置效果，它会逐字显示，但我不明白为什么`setInterval()`功能不起作用。

这是我尝试过的代码。

```
<script type="text/javascript">
var namee=document.title
var i=0
function changeTit(){
    document.title=namee.substring(0,i)
    i++
    if(i>namee.length)
        i=0
}
setInterval(changeTit(),1000)
</script> 
```

这仅运行`changeTit()`一次该功能，我也尝试在按钮中调用它，但每次按下按钮时都会出现一个字母，我希望它一直在变化。这段代码在 head 部分，但我也在文档的几个不同部分进行了尝试，请说明这是否必须在某个特定部分，我也尝试在不同的部分中分开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T19:56:22.027

改变：

```
setInterval(changeTit(),1000) 
```

到：

```
setInterval(changeTit, 1000) 
```

因此，通过删除`()`，您可以确保传递**实际函数**而不是将该函数的（调用）**结果传递给**`setInterval`

# ember.js - 路由器/StateManager - 无法使其工作

> ID：11386176
> 
> 赞同：1
> 
> 时间：2012-07-08T19:55:18.447
> 
> 标签：ember.js, ember-old-router

我一直在尝试实现[本指南](http://emberjs.com/guides/outlets/)中指定的路由器，但我无法使其工作。任何人都可以使用最新版本的 Ember 提供一个快速代码示例来启用支持通过 url 路由的路由器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:59:29.693

这是一个最新的 ember，仍然容易发生变化 :)

[http://jsfiddle.net/C7LrM/86/](http://jsfiddle.net/C7LrM/86/)由[@mediastuttgart发布](https://github.com/mediastuttgart)

wycats 的这个 Gist 的评论部分看起来像你可以获得更新小提琴的地方:) [https://gist.github.com/2728699#comments](https://gist.github.com/2728699#comments)

**此示例使用：**

```
handlebars-1.0.0.beta.6.js 

Ember latest as of now:
// Version: v0.9.8.1-484-g73ac0a4
// Last commit: 73ac0a4 (2012-07-06 11:52:32 -0700) 
```

有关正在开发的当前代码的文档，请转到 ember 源，那里有代码旁边的文档，

例如：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js)

[https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/)一般

# css - IE7和IE8中旋转透明png周围的黑边

> ID：11386177
> 
> 赞同：4
> 
> 时间：2012-07-08T19:55:19.020
> 
> 标签：css, png, rotation, image, transparent

有许多可行的解决方案可以在 IE 中正确显示透明 png，但如果图像位于旋转容器中，所有这些解决方案都将不起作用。

我试过了

```
img{
    background: transparent; 
    -ms-filter: “progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)”; 
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF); 
    zoom: 1;
} 
```

解决 IE 的透明 png 错误，但它不起作用。

我已经在 . [http://jsfiddle.net/s__a/Hmyc2/](http://jsfiddle.net/s__a/Hmyc2/)

请确保您使用**Microsoft Internet Explorer 7**访问它，IE8 没有实现轮换。任何人都可以帮助在**IE7** / IE8 中正确显示旋转的图像吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:13:45.163

## 仅找到纯背景解决方案

花了一些时间才把它拼凑起来。我的第一个线索是[这个站点](http://viget.com/inspire/jquery-ie-png-24-ie-black-background-issue-solved)，它产生了以下代码更改。*实际上，我刚刚注意到，我下面的代码与您所说的在您的问题中**不起作用**的代码相同，但**它对***我有用……重新检查我的小提琴，看看它现在是否适合您。请注意，在[这个小提琴中，它适用于 IE7 **，但不适用于 IE8**](http://jsfiddle.net/Hmyc2/27/)（`img`不旋转）。

```
.test-1{
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#FFFFFFFF,endColorstr=#FFFFFFFF)";/* IE 8 */ 
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#FFFFFFFF,endColorstr=#FFFFFFFF);   /* IE 6 & 7 */ 
    clip:rect(0px 276px 267px 0px);  /* top,right,bottom,left */ 
} 
```

**因此，更多的挖掘**和[Stack Overflow 的答案](https://stackoverflow.com/questions/3055383/dximagetransform-matrix-absolutely-position-child-elements-not-rotating-in-ie-8)也有助于[**为 IE8 制作小提琴**](http://jsfiddle.net/Hmyc2/37/)！IE8 的最终修复是使用`Matrix`过滤器转换的项目需要`z-index`添加一个以纠正它不旋转子`img`元素的错误。

**然而，这个“修复”显然还只是部分修复。** [旋转元素的问题](http://jsfiddle.net/Hmyc2/39/)目前仍然存在于背景本身的任何透明度，因为如果渐变的 alpha 值设置为透明，`#00FFFFFF`那么它仅适用于非旋转元素。

# objective-c - How can you fill a UITableView with data from two arrays of two different object types?

> ID：11386181
> 
> 赞同：2
> 
> 时间：2012-07-08T19:56:21.720
> 
> 标签：objective-c, ios, xcode

Currently I fill a UITableView using this method:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CharNameCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    MyObject *obj = (MyObject*)[self.characters objectAtIndex:indexPath.row];
    cell.textLabel.text = obj.name;

    return cell;
} 
```

But what could one do if you had two different arrays from two different types and you wanted to display a property from each in the cells?

Pseudocode:

MyObject1 MyObject2

cellTextLabel.text = Myobject1.name; cellTextLabel.text = MyObject2.name;

Assuming that each object has a name property. I know my syntax above isn't correct, but I think you should get the drift.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:03:54.110

我建议您将所有对象存储在 NSMutableArray 中。这将是您的数据模型。然后，您可以遍历数组以在 UITableView 中显示数据。如果需要，请使用自省来找出您的对象属于哪种类。

```
id currentObject = [myArray objectAtIndex:indexPath.row];

if ([currentObject isKindOfClass:[MyObject1 class]]){
    //set properties or do stuff with MyObject1
}else if ([currentObject isKindOfClass:[MyObject2 class]]){
    //do stuff with Object2
} 
```

这只是一个建议。有很多方法可以做到这一点，但这完全取决于您的应用程序以及您使用的持久性等。希望这会有所帮助。

# apache - .htaccess ErrorDocument 问题

> ID：11386183
> 
> 赞同：0
> 
> 时间：2012-07-08T19:56:26.570
> 
> 标签：apache, .htaccess, errordocument

自定义错误页面的问题。我的服务器根目录是“C:\www”，错误页面在“C:\www\errors”中。所以我在 "C:\www" 中放了一个 .htaccess 文件，内容如下：

```
ErrorDocument 404 /errors/404.html
ErrorDocument 403 /errors/403.html
ErrorDocument 500 /errors/500.html 
```

这适用于“mysite.net”中的任何内容。但我也有像“first.mysite.net”、“second.mysite.net”等子目录，并且根目录下的 .htaccess 在那里不起作用。它正在这些子文件夹中搜索“errors”文件夹并返回默认的 404 页面。

我试过这个：

```
ErrorDocument 500 C:/www/errors/500.html
ErrorDocument 500 C:\www\errors\500.html 
```

不工作。

```
ErrorDocument 500 http://mysite.net/errors/500.html 
```

这可行，但它会进行重定向，我不想要这个。我希望浏览器保持地址行相同。

谁能帮我说清楚？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:08:03.367

如果它们是具有单独虚拟主机定义的子域，您需要检查这些子域的虚拟主机定义和 AllowOverride 设置。请参阅[http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride)并根据需要更改 AllowOverride 设置。

# mobile - 带有移动优化结帐的 Paypal 支付标准

> ID：11386185
> 
> 赞同：1
> 
> 时间：2012-07-08T19:56:56.483
> 
> 标签：mobile, paypal

我正在运行一个 Django 应用程序，该应用程序连接到 paypal 支付标准并生成加密的“立即购买”按钮。在桌面上一切正常，但是当我使用移动设备（android 和 IOS）时，我不会被发送到移动优化结帐页面。

如果我去[这个非加密测试页面](https://paypal.com/cgi-bin/webscr?cmd=_xclick&business=bacon@example.com&item_name=Bacon&amount=5)，我实际上得到了移动结帐页面。一旦我将那个虚假的商业电子邮件更改为我的真实电子邮件，我就只能得到桌面页面。

这让我相信我的商家帐户中存在某种配置问题，而不是加密按钮的问题。

我查看了[x.com](https://www.x.com/developers/paypal/products/mobile-paypal-payments-standard#usecases)上的文档。他们提到移动结帐页面与这些用例不兼容：

*   即时更新 API
*   买方提供的价格、描述、数量
*   基于个人资料的运费和税收折扣
*   付款方式：授权、订单
*   库存管理

我最初有运输规则，所以我删除了那些。我认为我没有启用任何其他功能，但很难说看到这些不受支持的用例真的很模糊。我也读过[这个](https://stackoverflow.com/questions/9538548/mobile-optimized-checkout-for-paypal-website-payments-standard)SO 帖子，并且我禁用了我的税收规则，但它并没有解决我的问题。

有人对此有经验吗？有没有办法强制结帐页面的移动版本，使用贝宝支付标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:00:05.557

我通过实施他们的 Express Checkout 流程来“解决”这个问题。

不要相信他们的文档。Express Checkout 可以做的正是 paypal 支付标准可以做的事情，并且 API 具有很好的功能，比如默认情况下强制打开非 paypal 帐户窗格。

# dictionary - Having trouble running a custom jar on Amazon AWS

> ID：11386196
> 
> 赞同：0
> 
> 时间：2012-07-08T19:58:48.223
> 
> 标签：dictionary, hadoop, amazon-emr

I'm having trouble running a custom jar on Elastic Map-Reduce

I'm using jdk1.6.0_26, Hadoop 0.20.205, and compiling with Eclipse on my computer and everything works perfectly fine

for example if I ran the following on my computer it would be successful hadoop jar MaxTemperature.jar input/temperature.txt output

I specified the jar as the following on AWS s3n://chrishadoop/MaxTemperature.jar

and I specified the arguments as s3n://chrishadoop/input/temperature.txt s3n://chrishadoop/output

I did not specify the main class because I pointed to it in the manifest

Here is the jar I'm using, I will make it public for a little while

[https://s3.amazonaws.com/chrishadoop/MaxTemperature.jar](https://s3.amazonaws.com/chrishadoop/MaxTemperature.jar)

Here is the error I'm getting

```
2012-07-08 19:31:39,824 INFO com.amazonaws.elasticmapreduce.statepusher.StatePusher (main): Pusher awoke, starting to push data into simpledb...
2012-07-08 19:31:40,552 FATAL com.amazonaws.elasticmapreduce.statepusher.StatePusher (main): Fatal Exception raised while extracting data from hadoop and pushing to simpledb
java.lang.NoClassDefFoundError: org/codehaus/jackson/map/JsonMappingException
at com.amazonaws.elasticmapreduce.statepusher.StatePusher.run(StatePusher.java:65)
at com.amazonaws.elasticmapreduce.statepusher.StatePusher.main(StatePusher.java:205)
Caused by: java.lang.ClassNotFoundException:     org.codehaus.jackson.map.JsonMappingException
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 2 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:39:48.337

有一个作为 AMI 的一部分安装的 Jackson 版本，我猜你正在捆绑不同版本的 Jackson？该错误似乎发生在使“启用调试”工作的支持代码中。

# android - Updated Eclipse, cannot remove Jar

> ID：11386198
> 
> 赞同：2
> 
> 时间：2012-07-08T19:59:03.240
> 
> 标签：android, eclipse, adt

I deleted a jar from my libs file and now I cannot build the project and the jar will not go away.

I've tried cleaning the project, fixing the android properties now I'm stuck.

Has anyone else had this problem?

```
Description Resource    Path    Location    Type
Archive for required library: 'C:/apps/APP/libs/imagecrop.jar' in project 'APP' cannot be read or is not a valid ZIP file   APP     Build path  Build Path Problem 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T20:03:18.743

解决方案。

不要使用干净或“修复项目属性”

只需右键单击项目并按“刷新”..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T20:04:07.817

您需要将其从构建路径中删除。右键单击您的项目，转到“属性”->“构建路径”。构建路径包含四个选项卡：

Java 构建路径属性页面包含四个选项卡：

*   资源。源和输出文件夹。如果您最初创建的项目没有单独的源文件夹和输出文件夹，则可以在此处进行更改。一个项目中可以使用多个源文件夹；例如，将应用程序源代码与单元测试分开。

*   项目。检查工作区中应将其输出文件夹添加到此构建路径的其他项目。

*   图书馆。此项目所需的其他存档文件的位置。

*   订购和出口。项目和库在构建路径和默认运行时类路径中出现的顺序；例如，在使用归档库中的相同类之前，先使用工作区项目中的类。

转到库选项卡并删除您删除的 jar 文件。

还可以通过右键单击刷新您的项目-> 刷新，这样它就会意识到您已删除 jar 文件。

# opengl - When to call glEnable(GL_FRAMEBUFFER_SRGB)?

> ID：11386199
> 
> 赞同：19
> 
> 时间：2012-07-08T19:59:03.643
> 
> 标签：opengl, colors, framebuffer, srgb

I have a rendering system where I draw to an FBO with a multisampled renderbuffer, then blit it to another FBO with a texture in order to resolve the samples in order to read off the texture to perform post-processing shading while drawing to the backbuffer (FBO index 0).

Now I'd like to get some correct sRGB output... The problem is the behavior of the program is rather inconsistent between when I run it on OS X and Windows and this also changes depending on the machine: On Windows with the Intel HD 3000 it will not apply the sRGB nonlinearity but on my other machine with a Nvidia GTX 670 it does. On the Intel HD 3000 in OS X it will also apply it.

So this probably means that I'm not setting my `GL_FRAMEBUFFER_SRGB` enable state at the right points in the program. However I can't seem to find any tutorials that actually tell me when I ought to enable it, they only ever mention that it's dead easy and comes at no performance cost.

I am currently not loading in any textures so I haven't had a need to deal with linearizing their colors yet.

To force the program to not simply spit back out the linear color values, what I have tried is simply comment out my `glDisable(GL_FRAMEBUFFER_SRGB)` line, which effectively means this setting is enabled for the entire pipeline, and I actually redundantly force it back on every frame.

I don't know if this is correct or not. It certainly does apply a nonlinearization to the colors but I can't tell if this is getting applied twice (which would be bad). It could apply the gamma as I render to my first FBO. It could do it when I blit the first FBO to the second FBO. Why not?

I've gone so far as to take screen shots of my final frame and compare raw pixel color values to the colors I set them to in the program:

I set the input color to RGB(1,2,3) and the output is RGB(13,22,28).

That seems like quite a lot of color compression at the low end and leads me to question if the gamma is getting applied multiple times.

I have just now gone through the sRGB equation and I can verify that the conversion seems to be only applied once as linear 1/255, 2/255, and 3/255 do indeed map to sRGB 13/255, 22/255, and 28/255 using the equation `1.055*C^(1/2.4)+0.055`. Given that the expansion is so large for these low color values it really should be obvious if the sRGB color transform is getting applied more than once.

So, I still haven't determined what the right thing to do is. does `glEnable(GL_FRAMEBUFFER_SRGB)` only apply to the final framebuffer values, in which case I can just set this during my GL init routine and forget about it hereafter?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-08T21:21:49.303

启用后，对[具有 sRGB 图像格式](http://www.opengl.org/wiki/Image_Format#sRGB_colorspace)`GL_FRAMEBUFFER_SRGB`的图像的所有写入都将假定输入颜色（正在写入的颜色）在线性颜色空间中。因此，它将它们转换为 sRGB 颜色空间。

对非 sRGB 格式的图像的任何写入*都不*应受到影响。因此，如果您正在写入浮点图像，则不会发生任何事情。因此，您应该能够将其打开并保持这种状态；OpenGL 会知道您何时渲染到 sRGB 帧缓冲区。

通常，您希望尽可能长时间地在线性色彩空间中工作。只有经过后期处理的最终渲染应该涉及 sRGB 颜色空间。因此，您的多重采样帧缓冲区可能应该保持线性（尽管您应该为其颜色提供更高的分辨率以保持准确性。使用`GL_RGB10_A2`、`GL_R11F_G11F_B10F`或`GL_RGBA16F`作为最后的手段）。

至于这个：

> 在带有 Intel HD 3000 的 Windows 上，它不会应用 sRGB 非线性

这几乎可以肯定是因为英特尔不擅长编写 OpenGL 驱动程序。如果您启用时它没有做正确的事情`GL_FRAMEBUFFER_SRGB`，那是因为英特尔，而不是您的代码。

当然，也可能是英特尔的驱动程序一开始没有给你一个 sRGB 图像（如果你渲染到默认的帧缓冲区）。

# java - 如何让 JTextPane 变成一张纸的大小？

> ID：11386203
> 
> 赞同：-1
> 
> 时间：2012-07-08T19:59:32.587
> 
> 标签：java, swing, printing, jtextpane

好的，所以我终于想出了如何打印一个`JTextPane`，并且真正拥有一个功能齐全的文档编辑器。

无论如何，我可以制作`JTextPane`一张纸的大小（带分页符）以便您可以轻松预测您正在输入的文档的外观吗？任何提示/提示都会有所帮助！

编辑：格式`JTextPane`是*'text/rtf'*，如果有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:03:10.270

可能是链接可以帮助

[http://java-sl.com/Pagination_In_JEditorPane.html](http://java-sl.com/Pagination_In_JEditorPane.html)

[http://java-sl.com/Pagination_In_JEditorPane_Print.html](http://java-sl.com/Pagination_In_JEditorPane_Print.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:09:07.437

由“根据页面大小适当地格式化文档内容”方法`Printable`返回。如果这还不够，请编辑您的问题以包含一个显示您遇到的问题的[sscce](http://sscce.org/)。[`getPrintable()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getPrintable%28java.text.MessageFormat,%20java.text.MessageFormat%29)`JTextComponent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:17:00.903

我建议使用布局管理器

[如何创建具有指定宽度和显示所有文本所需的最小高度的 JTextArea？](https://stackoverflow.com/questions/4083322/how-can-i-create-a-jtextarea-with-a-specified-width-and-the-smallest-possible-he)

至于设置宽度，您需要根据指定的页面格式来计算它。它可以是 8.5x11 或横向或完全不同的尺寸。

```
pageFormat.getImageableWidth();
pageFormat.getImageableHeight(); 
```

# php - 仅允许特定电子邮件注册到用户角色 drupal 7

> ID：11386205
> 
> 赞同：0
> 
> 时间：2012-07-08T19:59:41.833
> 
> 标签：php, drupal, drupal-7, drupal-modules, acl

我试图找出如何只允许 .ac.uk 电子邮件注册到 drupal 7 中的特定用户角色

我看过的每个地方都提供了早期drupal版本中的访问控制选项，但DR7没有

任何黑客/模块建议表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:19:37.140

此功能不再是核心功能，但是现在在 drupal 7 中至少有三种方法（为了方便起见）。

1.  放入 contrib[用户限制模块](http://drupal.org/project/user_restrictions)。

2.  使用规则模块（我似乎找不到过滤这个的好规则，但并不难弄清楚）。

3.  编写您自己的实现 hook_user_presave 的简单模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:19:27.167

如果您使用自定义模块路线，您可以通过在注册表单上使用[hook_form_alter来做到这一点。](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)添加您自己的验证功能，以拒绝不是 .ac.uk 的电子邮件

# c# - Show IP camera using c# windows forms

> ID：11386207
> 
> 赞同：0
> 
> 时间：2012-07-08T19:59:45.173
> 
> 标签：c#, .net, camera, ip-camera, surveillance

i'm developing software to display ip camera "Acti", i tried to use axnvUnifiedControl but i cannot find any information about it.

my goal is to connect to the camera using IP, username, and password and display the camera image in windows form.

i'm using c# .net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:16:58.657

这可以使用以下代码片段来完成：

*   首先，您应该在工具箱中引用 OCX，并将其拖到表单中。但我尝试在设计模式下使用它，但 VS 挂起并强制关闭。

    ```
    camMedia.MediaSource = CameraIP;    
    camMedia.MediaUsername = UserName;  
    camMedia.MediaPassword = Password;    
    camMedia.HttpPort = HttpPort;//80    
    camMedia.RegisterPort = RegisterPort;//6000    
    camMedia.ControlPort = ControlPort;//6001    
    camMedia.StreamingPort = StreamingPort;//6002    
    camMedia.Connect(0); 
    ```

其中`camMedia`是 OCX 对象名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:05:25.740

[ACTi](http://www.acti.com/product/index.asp)有相当广泛的相机，它们不共享统一的 API。您必须为您感兴趣的模型查找文档并检查供应商的示例代码和 SDK。这些相机还支持一些众所周知的协议，例如，`RTSP`您`M-JPEG over HTTP`可以利用某些库来可视化提要，但同样您需要文档、规范和 SDK 来查找基本信息。

# android - 如何使用 PhoneGap 中 LocalNotifications 插件的通知打开应用程序

> ID：11386210
> 
> 赞同：2
> 
> 时间：2012-07-08T19:59:49.820
> 
> 标签：android, cordova, notifications

我正在开发一个 PhoneGap/Cordova 应用程序，我已经使用这个插件成功添加了 LocalNotifications：[https](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification) ://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification ；但是，我有一个小问题，当我在通知窗口中点击通知时，我的应用程序没有打开，我的意思是，没有任何反应，有人可以解释一下当有人点击我的应用程序中的通知时如何打开它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T05:02:40.633

我找到了答案，在 AlarmReceiver.class 中查看以下内容：

PendingIntent.getActivity(context, 0, new Intent(), 0);

用。。。来代替：

Intent notificationIntent = new Intent(context, YourApp.class); 最终 PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

其中 YourApp.class 是您要打开的类

# c++ - 是为类的用户还是为实现者覆盖？

> ID：11386212
> 
> 赞同：0
> 
> 时间：2012-07-08T20:00:19.047
> 
> 标签：c++, c++11, overriding

这基本上是一个最佳实践问题，也是一个关于预期用途的问题`override`：

```
struct A
{
    virtual void func();
};

struct B : public A
{
    virtual void func() override;
}; 
```

在上述情况下，使用`override`. 它告诉用户`B`它`func`覆盖了一个虚函数`A`（只能通过 C++11 之前的注释传达的信息）。但是当用户不应该认为这`A`是一个基类时怎么办......比如 if`A`是`private`继承的：

```
struct B : private A
{
    virtual void func() override;
}; 
```

在这种情况下，我告诉用户`B`他们不应该知道存在的内部实现细节。如果 的目的`override`是在作者`B`实际上没有覆盖任何内容的情况下给他一个错误，那很好；但是如果目的是向用户传达更多的信息，我是不是应该*不*写`override`这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:20:38.937

“覆盖”就在那里，所以一个类的实现者可以说“这个方法应该覆盖我的基类中的一个”。如果他这样做了，那么如果该方法实际上没有覆盖基类方法，那么编译器将提供一个错误——如果您输入错误的名称，或者基类稍后发生更改，就会发生这种情况。

编辑：因此，它是一个有助于编写正确代码的工具；它并不意味着是某种文档关键字。

# php - PHP passing a variable to array_walk_recursive

> ID：11386213
> 
> 赞同：2
> 
> 时间：2012-07-08T20:00:32.933
> 
> 标签：php, arrays, recursion

This code works but `$vars` can't be defined in the `call()` function. Why do `$vars` can't be passed to the `array_walk_recursive()`?

```
class lib{

    private $library;

    function __construct($lib="")
    {
        $this->library = $lib;
    }
    function set($vars)
    {
        $decoded_classes = json_decode($this->library,true);
        array_walk_recursive($decoded_classes,function(&$f) {$f = create_function($vars,$f);});
        return $decoded_classes;
    }
}
$json = '
{     
    "class1": {     
        "function1":"return \"$a<b>$b</b>!\";"
    },
    "class2": {     
        "function2":"return $b;",
        "function3":"return $c;"
    },
    "function1":"return \"test\";"
}';
$lib = new lib($json);
$lib = $lib->set("$a,$b");
$lib = $lib["class1"]["function1"]("asdasasd","asdasasd");
echo $lib; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:39:12.913

Firstly, have a look at [this example with variable scoping for closures](http://php.net/manual/en/functions.anonymous.php#example-163). You need to pass the variable in with the `use` keyword, eg:

```
array_walk_recursive($decoded_classes,function(&$f) use ($vars) {$f = create_function($vars,$f);}); 
```

It would be good if you defined `$a`, `$b`, etc for us, so we could actually test your code.

# python - 如何根据搜索多个值返回字典键

> ID：11386221
> 
> 赞同：1
> 
> 时间：2012-07-08T20:01:19.687
> 
> 标签：python, dictionary

总的来说，我对 python 和脚本还很陌生，所以请多多包涵……

我有一个 python 字典，它有键：值对，其中值是一个嵌套列表，其中包含 3d 几何矩阵的位置：

```
{Point_Index: [position_X, position_Y, position_Z]} 
```

我应该提到键是唯一的，但值不是。

如何根据字典中的最高 position_X、position_y 和 Position_Z 搜索字典并返回 Point_Index 键？

这是我的字典示例：

```
Polygon1 = {0: [-3.1890000000000001, -3.1890000000000001, -0.30361509588790281], 9: [3.1890000000000001, -3.1890000000000001, -0.30361509588790281], 10: [-3.1890000000000001, 3.1890000000000001, -0.30361509588790281], 11: [3.1890000000000001, 3.1890000000000001, -0.30361509588790281]} 
```

我正在尝试测试点位置以定位笛卡尔空间中给定向量中的最外点。所以 (max_X, Max_Y, Max_Z) 可以看作是最右上的点，而 (min_X, max_Y, max_Z) 是最左上的点。最左下点是 (min_X, min_Y, min_Z)，最右下点是 (max_X, min_Y, min_Z)。

我尝试了各种方法，例如get，max，但我真的只是因为缺乏经验而在黑暗中磕磕绊绊。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:10:44.933

```
max( (v[0],k) for k,v in dictionary.items() )[1]
max( (v[1],k) for k,v in dictionary.items() )[1]
max( (v[2],k) for k,v in dictionary.items() )[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:28:26.253

您可以使用`max`一个`key`函数：

```
>>> Polygon1 = {0: [-3.1890000000000001, -3.1890000000000001, -0.30361509588790281], 9: [3.1890000000000001, -3.1890000000000001, -0.30361509588790281], 10: [-3.1890000000000001, 3.1890000000000001, -0.30361509588790281], 11: [3.1890000000000001, 3.1890000000000001, -0.30361509588790281]}
>>> max(Polygon1, key=lambda k: Polygon1[k][0])
9
>>> max(Polygon1, key=lambda k: Polygon1[k][1])
10
>>> max(Polygon1, key=lambda k: Polygon1[k][2])
0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:15:45.780

以下 Python 示例应该可以解决您的问题。

```
score = lambda x,y,z: x+y+z

best_key = max(
    mydict.iteritems(),
    key = lambda i:score(*i[1])
)[0] 
```

# iphone - Xcode 中 Objective-C 中的 IF 语句

> ID：11386222
> 
> 赞同：0
> 
> 时间：2012-07-08T20:01:50.937
> 
> 标签：iphone, objective-c, xcode, if-statement

在 Xcode 中，我试图制作一个按钮来更改它的文本，相对于当前的文本。例如：如果按钮说“1”并且按下它，我希望文本更改为“2”，“2”更改为“3”等等，这是给我带来麻烦的代码片段：

```
if (magicButton.titleLabel = @"1") {
    [magicButton setTitle:@"2" forState:UIControlStateNormal];
} 
```

Xcode 在代码段的第一行给了我这个错误“Assignment to readonly property”。我对 Objective-C 和 iPhone 应用程序开发还很陌生，所以也许这是非常明显和简单的事情。如果是这样，请不要介意。

这是[我的实现文件的粘贴，](http://pastebin.com/vNFB5Xb0)如果它有帮助的话。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:04:08.870

'=' 用于赋值，而 '==' 用于比较。但是在字符串比较的情况下，您应该使用`isEqualToString`方法。像这样的东西：

```
if ([magicButton.titleLabel.text isEqualToString: @"1"]) {    
  [magicButton setTitle:@"2" forState:UIControlStateNormal];
} 
```

PS。另请注意，您应该获得`UILabel`'`text`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:45:44.183

如果您想在没有限制的情况下更改按钮文本，那么您不能做出一百万个 if 语句。您应该获得按钮标题的值（如果它甚至有标题），只需向其添加 1，如下所示：

```
NSString *string = randomButton.titleLabel.text;

    if ([randomButton.titleLabel.text length] == 0) { //Check if there is not a title on the button

     [randomButton setTitle:@"1" forState:UIControlStateNormal]; //And if there isn't, set it to "1"

    }

    else {

        int yourInt = [string intValue]; //Convert to int

        int nextInt = yourInt + 1; //Add one to value

        NSString *finalString = [NSString stringWithFormat:@"%d",nextInt]; //Convert back to string

        [randomButton setTitle:finalString forState:UIControlStateNormal]; //Finally set it as the title

    } 
```

# javascript - 如何访问 global.asax 中的 javascript 变量？

> ID：11386229
> 
> 赞同：0
> 
> 时间：2012-07-08T20:02:44.360
> 
> 标签：javascript, asp.net

我在页面 default.aspx 中有一个 javascript 变量

```
var name="user1"

window.location="test.aspx" 
```

此页面将在触发 Application_BeginRequest 事件时提交给 test.aspx 和 global.asax，我需要访问变量“名称”。我需要在没有 cookie 的情况下执行此操作。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:06:43.663

`var name="user1"`是一个 javascript 变量，假设您在重定向时`Application_BeginRequest`已将其传递给页面，您可以从 Request 对象内部访问它：`test.aspx`

```
var name = "user1";
window.location.href = 'test.aspx?name=' + encodeURIComponent(name); 
```

接着：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    string name = HttpContext.Current.Request["name"];
    if (!string.IsNullOrEmpty(name))
    {
        // the name variable was present in the request => do something with it
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:07:08.237

如果*“提交”*是指执行`POST`或`GET`请求，那么您需要将字符串`name`作为`url-encoded`表单`POST`或请求中的查询字符串参数传递给服务器`GET`。

然后，在`Application_BeginRequest`访问中`Request`从`Current` `HttpContext`

# python - Python osascript 似乎返回 0

> ID：11386230
> 
> 赞同：0
> 
> 时间：2012-07-08T20:02:59.283
> 
> 标签：python, io, terminal, applescript

我正在尝试使用 applescript 来检索歌曲的 BPM 值。最终我想用一个游戏来实现它。这是我的代码：

```
import os
import time
import sys

def getBPM():
    iTunesInstruct = """'
    tell application "iTunes"
    set k to get bpm of current track
    end tell
    return k
    '"""
    bpm = os.system('arch -i386 osascript -e ' + iTunesInstruct )
    #bpm =90

    bpm = int(bpm)
    bpm = round(bpm)

    if bpm > 250:
        bpm = 200
    return bpm

def getBeatSecond(bpm):
    bps = float(bpm) / 60
    #raw_input(bps)
    return float(bps)

i = 0

beatMatch = True

while True:
    beat = 1 / getBeatSecond(getBPM()) # BPS Beat divided by a second.

    if beatMatch:
        time.sleep(beat)
        print beat
    else:
        raw_input('Go??')
    i += 1
    if i > 50:
        break 
```

但这似乎只工作一次......它得到了我正在听的歌曲的 BPM，看到它是 94，然后似乎在第二次迭代中它认为它是 0，然后它除以 0 并死亡。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:26:05.930

**os.system**不等待命令完成。

**90** = 是 osascript 的结果，**0** = 没有错误，是退出状态（**os.system**）。

采用`subprocess.Popen`

```
from subprocess import Popen, PIPE

def getBPM():
    cmd = "arch -i386 osascript -e " + """'tell application "iTunes" to return bpm of current track'"""
    bpm, tError = Popen(cmd, shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE).communicate()
    if bpm > 250:
        return = 200
    return int(bpm) 
```

# jquery - 无法取消按钮单击

> ID：11386236
> 
> 赞同：1
> 
> 时间：2012-07-08T20:03:39.740
> 
> 标签：jquery, html, forms

我在网页中有一个 html 按钮。当我单击按钮时，我想重定向到另一个页面。

我有这个代码：

```
<button id="btn" type="submit" style="width: auto">
    <div style="height: 40px">
        <img alt="Button" src="/images/somepicture.png" style="float: left" />
        <span style="margin: auto">Label</span>
    </div>
</button>
<script language="javascript" type="text/javascript">
    $(function () {
        $("#btn")
        .mousedown(function (event) {
            window.location.href = "otherpage";
            event.preventDefault();
        });
    });
</script> 
```

但是，此代码未按预期运行。该页面只是发布，并且不会发生重定向。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:06:07.330

这应该适合你：

```
$(function () {
    $("#btn").click(function (event) {
        event.preventDefault();
        window.location.href = "otherpage";
    });
}); 
```

**注意**：文本和图像是 a 的唯一有效内容`<button>`。我认为这不会是您问题的原因，但最好遵循标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:07:20.197

`div`请注意，在标签中使用标签是无效的`button`，试试这个：

```
$(function() {
    $("#btn").click(function(event) { // you can use click handler
        window.location = "http://www.stackoverflow.com";
        event.preventDefault();
    });
}); 
```

# php - 这个数组搜索功能有什么问题？

> ID：11386242
> 
> 赞同：1
> 
> 时间：2012-07-08T20:04:19.483
> 
> 标签：php, arrays

我编写了以下函数来按键搜索多维数组，但是如果我使用 key 调用该函数`uri`，它会将具有键的数组附加`0`到找到的数组中。怎么了？

```
function search_arr($array, $key, &$found) {
    foreach ($array as $k => $each) {
        if ($k == $key) {
            // output of "print $k = $key" is "0 = uri"
            $found[] = $each;
        }   
        if (is_array($each)) {
            search_arr($each, $key, $found);
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:06:43.277

使用[===](http://php.net/manual/en/language.operators.comparison.php)强制值*和*类型匹配。你会得到零，因为比较 0 和“uri”是`true`- 认为它们都评估为 0。有关 PHP 如何处理这些“松散”比较的完整详细信息，请参阅[手册的这一部分](http://www.php.net/manual/en/types.comparisons.php#types.comparisions-loose)。

# three.js - 三个 js 对象的单位是什么？

> ID：11386243
> 
> 赞同：9
> 
> 时间：2012-07-08T20:04:22.580
> 
> 标签：three.js

```
var camera = new THREE.PerspectiveCamera(
    35,         // Field of view
    800 / 640,  // Aspect ratio
    .1,         // Near
    10000       // Far
);

var cube = new THREE.Mesh(
    new THREE.CubeGeometry( 5, 5, 5 ),
    new THREE.MeshLambertMaterial( { color: 0xFF0000 } )
); 
```

在相机中，Near 和 Far 参数的单位是什么。

在 Cube 中，CubeGeometry 的参数单位是什么

请指向我的网址，我可以在其中找到有关的详细信息

对象空间 - （用于绘制对象的局部轴） 世界空间 - （全局轴）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T23:33:52.333

很确定这些参数是 OpenGL 中的单位。如果您查看 OpenGL 红皮书，对于第 3 章中的每个

[http://www.glprogramming.com/red/chapter03.html](http://www.glprogramming.com/red/chapter03.html)

这里有一个简短的段落：

> 前一段提到了英寸和毫米——这些真的和OpenGL有关系吗？答案是，一句话，不。投影和其他变换本质上是无单位的。如果您想将近距和远距剪裁平面视为位于 1.0 和 20.0 米、英寸、公里或里格，这取决于您。唯一的规则是您必须使用一致的测量单位。然后按比例绘制生成的图像。

因此，要回答您的问题，单位是您认为应该是的任何单位，它们是纯粹的相对比例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-17T15:44:25.957

官方的回答是 ThreeJS 对所有度量都使用 SI 单位，请参见此处：

[https://github.com/mrdoob/three.js/issues/6259](https://github.com/mrdoob/three.js/issues/6259)

# objective-c - 从 ScrollView 中删除标记的对象

> ID：11386244
> 
> 赞同：0
> 
> 时间：2012-07-08T20:04:30.390
> 
> 标签：objective-c, ios, xcode

我在一个滚动视图中有很多图像，都是一样的，一个接一个，一个删除按钮作为每个的子视图。我以这种方式分配标签

```
1) img.tag = i; 

2) int z;
        z = i+1;
     buttonDelete.tag = z; 
```

i 是一个 for 循环。当我按下按钮时，将执行此代码：

```
-(IBAction)deleteMessage:(id)sender
{
    UIButton *button = (UIButton*) sender;
    NSLog(@"Clicked button %d", button.tag); 

    UIImageView *image = (UIImageView*) sender;
    NSLog(@"Clicked button %d", image.tag);

    int n;
    n = button.tag;

    for (UIImageView *img in imageArray)
    {
        if (img.tag == n)
        {
            [img removeFromSuperview];

            NSLog(@"The value of integer num is %i", img.tag);
            NSLog(@"The value of integer num is %i", n);
        }
    }
} 
```

根据 NSLog，前四个按钮与它们的标签和图像标签完全对应。相应的图像被删除。这四个图像都适合滚动视图的第一个视图。如果有更多图像，并且我需要向下滚动，则标签不再增加。相反，它们从标签 1 重新开始。因此 1,2,3,4,1,2,3,4... 和 1,2,3,4 可以在滚动视图的同一“页面”中看到。怎么会这样？？

## 编辑：

我也试过这个：

```
-(IBAction)deleteMessage:(id)sender
{
    UIButton *button = (UIButton*) sender;
    NSLog(@"Clicked button %d", button.tag); 

    UIImageView *image = (UIImageView*) sender;
    NSLog(@"Clicked button %d", image.tag);

    int n;
    n = button.tag;

    for (UIImageView *img in imageArray)
    {
        if ([img isKindOfClass:[UIImageView class]] && img.tag == n) {

            [img removeFromSuperview];
        }
    }
} 
```

但给出相同的结果

# javascript - addEventListener("beforeload") 缺少事件

> ID：11386246
> 
> 赞同：0
> 
> 时间：2012-07-08T20:04:49.510
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我正在尝试制作一个简单的 Chrome 插件来从域 x 中删除每个事件。我调查了它并发现了“beforeload”事件监听器，这显然是 adblock 用来完全阻止广告加载的东西。我已经在插件中实现了这一点，并添加了诸如 console.log("addon loaded") 之类的东西，以确保它实际上正在加载 javascript，但**问题是，它只捕获了少数事件，例如在50 个事件，它可能只捕获 1-2 个。它错过了明显的其他事情。**

抽搐.js

```
document.addEventListener("beforeload", function(event) {
    event.preventDefault();
    $(event.target).remove();
}, true); 
```

清单.json

```
...
"content_scripts": [ {
    "js": [ "js/jquery.js", "js/twitch.js" ],
    "css": [ "css/twitch.css"],
    "matches": ["*://*/*"], 
    "run_at": "document_start",
    "all_frames" : true
}],
... 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T23:50:36.537

`beforeload`为页面上的每个脚本、iframe、图像和样式表调用一次，而不是为每个事件调用一次（你是说元素吗？）。您是否期待其他元素引发此事件？

这份名为[Blocking Unwanted Content](http://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/SafariExtensionGuide.pdf#page=88)的文档提到了一个要求：

> 要阻止内容，您的脚本必须作为启动脚本运行，以便在显示内容之前执行。

所以检查一下。此外，您不需要该`.remove()`行，只需调用`event.preventDefault()`将停止创建资源。

```
document.addEventListener( 'beforeload', function( event ) {
    event.preventDefault();
}, true ); 
```

# python - 用于低端计算机的最快 GUI

> ID：11386250
> 
> 赞同：2
> 
> 时间：2012-07-08T20:05:35.803
> 
> 标签：python, frontend

我为不同对象的状态开发了一个**公共视图**，看起来像这样：[http ://tctechcrunch2011.files.wordpress.com/2012/07/bridge-metrics.jpeg](http://tctechcrunch2011.files.wordpress.com/2012/07/bridge-metrics.jpeg)

它目前在一台旧机器上运行（现在不知道规格，对此感到抱歉），使用 linux 并在 Opera**中以全屏视图运行网站。**该网站从服务器获取 JSON，然后根据 JSON 中的状态排列一些 html div。

问题是，除了显示一些 html div（例如，通过在 window.setintervall 回调中切换的 css 闪烁）之外的所有内容都非常缓慢，有时还会挂起。

什么是替换 Web 前端但保持发送 GET 请求和解析 JSON 响应等任务的最佳解决方案？像python + opengl这样的东西？或者任何其他解决方案可以**充分利用这台旧机器？**

# java - 计算错误

> ID：11386253
> 
> 赞同：0
> 
> 时间：2012-07-08T20:05:57.767
> 
> 标签：java, android

行，

所以我希望这对于外面的人来说应该是一个非常简单的问题。

该程序运行良好，没有错误，没有崩溃，所以这是一个好的开始！

问题是我得到的答案不正确。

大约下到一半你应该能够看到这条线

`CARV= CA*3; tv2.setText(Double.toString(CARV));`

`CA`与 相关`num3`，这是用户输入。因此，如果用户在其中输入 100，`editText2`则应将 300 打印到`tv2`. 但相反，它给了我一个随机数，目前我假设它在打印答案之前考虑了上述行下方的额外计算。

我的问题是如何打印 CA*3 的答案？

非常感谢

```
private OnClickListener myClickListener = new OnClickListener()
{
    public void onClick(View v) {
        try{
        NS=Double.parseDouble(num1.getText().toString()); 
        CH=Double.parseDouble(num2.getText().toString());
        CA=Double.parseDouble(num3.getText().toString());
        Z=Double.parseDouble(num4.getText().toString());
        EKW=Double.parseDouble(num5.getText().toString());
        FAT=Double.parseDouble(num6.getText().toString());
        CART=Double.parseDouble(num7.getText().toString());
        GAT=Double.parseDouble(num8.getText().toString());}
        catch(Exception e)
        {
            if(num1.getText().length()==0)
            {
                num1.setError("please input ");
            }
            if(num2.getText().length()==0)
            {
                num2.setError("please input ");
            }
            if(num3.getText().length()==0)
            {
                num3.setError("please ");
            }
            if(num4.getText().length()==0)
            {
                num4.setError("please ");
            }
            if(num5.getText().length()==0)
            {
                num5.setError("please input ");
            }
            if(num6.getText().length()==0)
            {
                num6.setError("please input ");
            }
            if(num7.getText().length()==0)
            {
                num7.setError("please input ");
            }
            if(num8.getText().length()==0)
            {
                num8.setError("please input ");
            }

        }

        {SV=(((NS*CH)*4)/3600)/Z;SV=(double)(Math.round(SV*100))/100; tv1.setText(Double.toString(SV));
        CARV= CA*3; tv2.setText(Double.toString(CARV));
        FA= SV*0.1;
        GA= SV - (CARV + FA);
        RCARA= CARV/SV;
        RGA= GA/SV;
        RFA= FA/SV;
        CAO=(CARV*RCARA) + (GA*RGA) + (FA*RFA);
        DT= 26-CAO;
        RKW= DT * 1.21 * SV;RKW=(double)(Math.round(RKW*100))/100; tv3.setText(Double.toString(RKW));
        }

    }
};
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.car1);

       tv1 = (TextView)findViewById(R.id.textView7);
       tv2 = (TextView)findViewById(R.id.textView8);
       tv3 = (TextView)findViewById(R.id.textView8);

       button01 = (Button)findViewById(R.id.button1);
       button01.setText("Display result");
       button01.setOnClickListener(myClickListener);

       num1 = (EditText)findViewById(R.id.EditText01);
       num1.setText("");
       num2 = (EditText)findViewById(R.id.editText1);
       num2.setText("");
       num3 = (EditText)findViewById(R.id.editText2);
       num3.setText("");
       num4 = (EditText)findViewById(R.id.editText3);
       num4.setText("");
       num5 = (EditText)findViewById(R.id.editText4);
       num5.setText("");
       num6 = (EditText)findViewById(R.id.editText5);
       num6.setText("-5");
       num7 = (EditText)findViewById(R.id.editText6);
       num7.setText("10");
       num8 = (EditText)findViewById(R.id.editText7);
       num8.setText("16");          
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:10:31.447

我认为你的问题在这里

```
tv2 = (TextView)findViewById(R.id.textView8);
tv3 = (TextView)findViewById(R.id.textView8); 
```

您将相同的 TextView 分配给`tv2`和`tv3`。

# php - 使用 jquery 或 php 从谷歌图像搜索中提取随机图像

> ID：11386255
> 
> 赞同：0
> 
> 时间：2012-07-08T20:06:14.850
> 
> 标签：php, jquery, google-image-search

有没有办法从谷歌图像搜索中显示随机图像？

最好使用jquery或php？

# objective-c - 点表示法与方法表示法

> ID：11386256
> 
> 赞同：5
> 
> 时间：2012-07-08T20:06:35.900
> 
> 标签：objective-c, ios, ios5

我正在深入研究 iOS 编程，但我很难理解点表示法和方法表示法的想法。

据我了解，点表示法可用于在属性上调用 setter/getter，并且更易于写入/读取。方法表示法用于向对象发送消息以操作它们等。

有人可以给我一个简单的解释，为什么以下两个语句本质上不同，一个会编译，但另一个会因为语法错误而失败。

```
- (IBAction)digitPressed:(UIButton *)sender 
{
   NSString *digit = [sender currentTitle];

   self.display.text = [self.display.text stringByAppendingFormat:digit];
   self.display.text = self.display.text.stringByAppendingFormat:digit;

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T20:16:46.623

您在一个有趣的时期进入 Objective-C 开发，旧语法与新语法一起使用。点语法是语法糖，在某些情况下您*可以*使用它，但您不应该使用它。

以下是无效的语法。任何使用冒号的地方（除了 setter 或 getter），都不会使用点表示法。

```
self.display.text = self.display.text.stringByAppendingFormat:digit; 
```

此外，您将使用`stringByAppendingString`，而不是`stringByAppendingFormat`

您使用点符号来访问变量，而不是调用会产生影响的操作。

**正确的：** `self.foo.attributeOfMyClass`

**不正确：** `self.foo.downloadSomethingFromAWebsite`

确保您*始终*使用点表示法来访问属性值，并且始终使用方括号表示法（即使您不必这样做*）*来调用操作方法，您的代码一目了然。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T20:22:48.783

Dot notation is just shorthand for a specific kind of method--namely, accessors. You may use it in the following cases:

1.  When setting a property: `foo.bar = 3;` is equivalent to `[foo setBar:3];`.
2.  When requesting a property: in any case except the one above, `foo.bar` is equivalent to `[foo bar]`.

Dot notation is *only* shorthand--there is nothing magic about its relationship to properties. You could *theoretically* use dot notation to send any message that takes no arguments (`foo.doSomething`), but this would be *very very bad style*, as dot notation is intended for properties. Also note that if dot notation vs. square brackets is confusing you while you're learning, it's a perfectly valid choice to avoid dot notation altogether. It's just one shortcut you *may* use for accessors, if you like.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T20:11:51.357

实际上，您的第二个说法是不正确的。调用方法（消息）的 Objective C 方法是使用 [instance message] 语法。正如你所说，点符号只是调用类属性的getter和setter，而不是消息，这就是你的第二个陈述不正确的原因。您可能想要比较的两行是：

```
self.display.text = [self.display.text stringByAppendingFormat:digit];
[[self display] setText:[[[self display] text] stringByAppendingFormat:digit]]; 
```

请注意，消息 stringByAppendingFormat 必须以正常方式调用。点符号只是为了写得更快而不是那么多括号，但是一旦编译它就会执行完全相同的指令。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-07T23:47:25.650

使用选择器表示法而不是点表示法的另一个原因是由于 Objective C 中的动态语言特性。例如，考虑以下内容：

```
NSString *s = @"Hello World!";
NSLog(@"Length is %d", s.length); 
```

这正如我们所期望的那样工作。但是，Objective C 中的对象可以使用 type 传递`id`。考虑以下：

```
id s = @"Hello World!";
NSLog(@"Length is %d", s.length); 
```

这不会编译，因为`id`没有名为`length`. 但是，以下将起作用：

```
id s = @"Hello World!";
NSLog(@"Length is %d", [s length]); 
```

这样做的原因是 Objective C 知道`NSString`，因此知道有一些对象类型响应选择器`length`。当然，如果您尝试以下操作：

```
id s = [[UIView alloc] init];
NSLog(@"Length is %d", [s length]); 
```

您的代码将正确编译，但会发生运行时异常 ( `unrecognized selector sent to instance`)，因为`UIView`没有`length`选择器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-21T06:04:13.230

假设我们有一个`Class`带有变量的类，`variableOne`我们将使用这两种表示法。

**点表示法**是访问变量的最纯粹的方式。这也是括号符号最有可能在幕后进行的方式。通过键入`Class.variableOne`...`variableOne`是`Class`和“。”的一部分。在类告诉编译器它想要访问类的一部分——变量或方法之后。

**括号表示法**是使用一种方法来访问变量。比方说...

```
-(int) setVariable:x {
    self.variableOne = x;
}

-(int) showVariable {
    return self.variableOne
} 
```

因此，当您使用括号表示法来设置变量`[variableOne setVariable:5]`或显示变量`[variableOne showVariable]`时，它会调用适当的方法。

*这是考虑差异的一种非常简单的方法，我意识到另一个答案已经被接受，但也许这个答案会为不理解另一个答案的人解释它。*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-08T20:12:35.953

当您的代码被编译时，clang 实际上首先获取所有点符号并将其转换为方法/括号符号，因此`self.display`和`[self display]`完全相同。从 Objective-C 2.0 开始，点符号实际上是相当新的。这只是为了方便。

点表示法只能用于属性，因为做一些你试图做的事情（不会编译）会很麻烦：

`self.display.text.stringByAppendingFormat:digit;`

它也不适用于采用多个参数的方法，因为您需要在参数之间放置空格，并且突然之间代码行会显得笨拙且难以阅读。

# django - Django-cms and SQLite performance

> ID：11386259
> 
> 赞同：1
> 
> 时间：2012-07-08T20:06:54.367
> 
> 标签：django, sqlite, postgresql, django-cms

I have a corporate website with django-cms and with a SQLite database that has only a few updates per month. The majority are reads. It will be less than 5000k requests per day.

My deployment is in a Cpanel server with apache and wsgi. I need to know first if I should be worried about the usage of SQLite and if PostgreSQL in this situation will be faster and less resources consumption (because it is already installed and running on server).

This site use a 11MB SQLite file. Is this file in memory?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:11:27.453

SQLite will be faster than PostgreSQL except in cases of high contention. If you only update a few times per month, then SQLite will amost certainly be faster than PostgreSQL.

You may still choose to use PostgreSQL for other reasons (i.e. if you need network access to your data), but probably not for performance reasons.

# javascript - 表单提交转到 Javascript - 并保持在同一页面上

> ID：11386263
> 
> 赞同：0
> 
> 时间：2012-07-08T20:07:17.203
> 
> 标签：javascript, html

请考虑以下非工作 HTML 文档：

```
<html> 
    <body>
        <form action="" method="GET" onsubmit="return f(this);">
            <input type="text" name="bar" value="" />
            <input type="button" name="foo" value="foo" />
        </form>
    </body>
    <script type="text/javascript">
        function f(x) {
            alert(x.bar);
        }
    </script>
</html> 
```

我想要实现的是，当（a）按下 foo 按钮时；或 (b) 在文本输入具有焦点时按下回车；然后使用 s 文本输入的内容调用函数 f - 否则浏览器应在 f 返回后停留在同一页面上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:19:06.640

您应该使用提交输入而不是按钮输入，并且要从文本输入中获取文本，请使用 value 属性并返回 false 以防止表单提交

```
<html>
    <body>
        <form action="" method="GET" onsubmit="return f(this);">
            <input type="text" name="bar" value="" />
            <input type="submit" name="foo" value="foo"/>
        </form>
        <script type="text/javascript">
                function f(x)
                {
                    alert(x.bar.value);
                    return false;
                }
        </script>
        </body>
</html> 
```

[小提琴](http://jsfiddle.net/W3Neg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:13:38.887

只是用值而不是表单元素来调用它？

```
onsubmit="return f(this.bar.value);" 
```

为防止发送该页面，您可以`false`从`f`.

但是使用适当的事件处理程序而不是那个 onsubmit-attribute 会更干净。[在此处](http://www.quirksmode.org/js/introevents.html)阅读有关它们的更多信息。

```
<html>
    <body>
        <form id="inputform" action="" method="GET">
            <input type="text" name="bar" value="" />
            <input type="button" name="foo" value="foo"/>
        </form>
        <script type="text/javascript">
        function f(x) {
            alert(x.bar);
        }
        var form = document.getElementById("inputform");
        form.onsubmit = function(event) {
            var x = f(form.bar.value);
            if (!x)
                event.preventDefault();
        };
        </script>
    </body>
</html> 
```

# iphone - 风景中的情节提要 TabBarController（没有类文件）？

> ID：11386268
> 
> 赞同：2
> 
> 时间：2012-07-08T20:07:58.903
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, xcode-storyboard

我正在构建一个或多或少复杂的应用程序，但我对此很陌生。我已经创建了自己`ABCViewController`的. 我只是尝试使用情节提要，但是当我运行该应用程序时，它是纵向的。故事板中的属性检查器设置为我所有的视图控制器的横向。是否可以编辑仅存在于情节提要中的方法？我还将所有内容都设置为横向！`MainWindow.xib``UITabBarController``ABCViewController``UITabBarController``shouldAutorotateToInterfaceOrientation``UITabBarViewController``Info.plist`

编辑：解决。我创建了显示在标签栏控制器中的 Vvew 控制器，然后我使用了该方法并在每个视图控制器中`shouldAutorotateToInterfaceOrientation`返回`YES`（不是）。`(interfaceOrientation == UIInterfaceOrientationLandscapeLeft)`

# sql - VB ASP.NET。“转换溢出了一个整数列。”

> ID：11386271
> 
> 赞同：0
> 
> 时间：2012-07-08T20:08:13.203
> 
> 标签：sql, vb.net, int

我在 VB ASP.NET 中工作。我正在做一个选择。我在 WHERE 子句中有一个通常有效的变量，但是当我输入 13 个或更多字符时，我收到消息“conversionnvarchar 值溢出了一个整数列”。任何帮助将不胜感激！

这是我的声明：

```
SELECT VACD
FROM VENDOR
WHERE VACD = FORM.VACD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:08:51.647

与字符值进行比较时，它们会隐式转换为整数。所以这意味着你的 13 个字符对于 Int32 数字来说会很大，范围从 -2,147,483,648 到 2,147,483,647。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:23:58.727

如果在比较中混合使用字符和数字，您可能会得到隐式转换。我可能错了，因为正如@Oded 所说：即使是 12 位数字也不应该可用。 [更好的解释。](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/b6726828-d6c2-4bb8-b7ad-2de57efd31bf)

# iphone - 连接失败后调用 viewDidLoad 不起作用

> ID：11386273
> 
> 赞同：0
> 
> 时间：2012-07-08T20:08:59.600
> 
> 标签：iphone, ios, viewdidload

这是我的 viewDidLoad 函数运行良好：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //iAds code
    adview = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adview.frame = CGRectOffset(adview.frame, 0, 0);

    adview.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
    adview.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    [self.view addSubview:adview];
    adview.delegate = self;
    self.adbanerinvesiable = NO;

    //php data code
    NSError *er;
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost:8888/newjson.php?number=1"]];
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    if (response.length != 0){
        NSString *json_string = [[NSString alloc]initWithData:response encoding:NSUTF8StringEncoding];
        listt = [parser objectWithString:json_string error:&er];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"No Internet conniction" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Refresh", nil];
        [alert show];

        //for ID contet post 
        SBJsonParser *parser2 = [[SBJsonParser alloc] init];
        NSURLRequest *request2 = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost:8888/newjson.php?number=2"]];
        NSData *response2 = [NSURLConnection sendSynchronousRequest:request2 returningResponse:nil error:nil];
        NSString *json_string2 = [[NSString alloc]initWithData:response2 encoding:NSUTF8StringEncoding];
        IDNum = [parser2 objectWithString:json_string2 error:&er];
    }
} 
```

如您所见，如果连接失败，它将显示 UIAlertView 和两个按钮 {ok , Refresh}。

如果单击刷新按钮以调用 viewDidLoad 但不工作并给我空白的白色视图，我使用了此方法：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 1){
        [self viewDidLoad];
    }
} 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:11:22.183

你应该把你自己的方法放在`PHP Data Code`一个方法中，所以当你需要专门调用它时，你可以，因为你不能（或者我应该说不**应该**）`viewDidLoad`手动调用。那应该只由 自动调用`UIViewController`。

## 例子

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //iAds code
    adview = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adview.frame = CGRectOffset(adview.frame, 0, 0);

    adview.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
    adview.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    [self.view addSubview:adview];
    adview.delegate = self;
    self.adbanerinvesiable = NO;
}

-(void)viewWillAppear:(BOOL)animated    /* or: -(void)viewDidAppear: */
{
    [super viewWillAppear:animtaed];

    [self refreshPHData];
}

-(void)refreshPHPData
{
    //php data code
    NSError *er;
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost:8888/newjson.php?number=1"]];
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    if (response.length != 0){
        NSString *json_string = [[NSString alloc]initWithData:response encoding:NSUTF8StringEncoding];
        listt = [parser objectWithString:json_string error:&er];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"No Internet conniction" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Refresh", nil];
        [alert show];

        //for ID contet post 
        SBJsonParser *parser2 = [[SBJsonParser alloc] init];
        NSURLRequest *request2 = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost:8888/newjson.php?number=2"]];
        NSData *response2 = [NSURLConnection sendSynchronousRequest:request2 returningResponse:nil error:nil];
        NSString *json_string2 = [[NSString alloc]initWithData:response2 encoding:NSUTF8StringEncoding];
        IDNum = [parser2 objectWithString:json_string2 error:&er];
    }
} 
```

此外，当您`viewDidLoad`从调用时`UIAlertView`，您正在创建第二个（以及第三个等等）**`adview`**，因为您没有删除前一个实例。根据显示和`viewDidLoad`调用警报的次数，您将看到 adview 堆叠在其自身之上。所以试试吧：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 1){
        [self refreshPHPData];
    }
} 
```

# wordpress - 如何设置 php 从 Nginx 中的单个位置运行

> ID：11386277
> 
> 赞同：0
> 
> 时间：2012-07-08T20:09:22.650
> 
> 标签：wordpress, nginx, php

我已经为此苦苦挣扎了一段时间。我想设置一个 Wordpress 博客，使其从服务器上的“/blogname”路径而不是根目录运行。我还希望路径具有与 Wordpress 脚本所在的目录不同的名称，因为服务器本身将运行 django。

我有 Nginx 作为反向代理，我设置了 php-fpm 来运行 wordpress。这是我的 Nginx 配置文件：

```
http {
    include             mime.types;
    default_type        application/octet-stream;
    sendfile            on;
    keepalive_timeout   65;

    #tcp_nopush         on;
    #gzip               on;

    server {
        root         /Users/username/Dev/Wordpress/;
        index        index.php index.html index.htm;
        listen       8080;
        server_name  localhost;

        # Do not serve hidden files
        location ~ /\. {
            access_log      off; 
            log_not_found   off; 
            deny            all; 
        }

        # Static files
        location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
            expires max;
            add_header Pragma public;
            add_header Cache-Control "public, must-revalidate, proxy-revalidate";
        }

        # This is the problem
        location /blogname {
            try_files $uri $uri/ /index.php;
            rewrite  /blogname(.*) /blog$1 last;

            fastcgi_index index.php;
            fastcgi_pass  127.0.0.1:9000;
            include       fastcgi_params;
            fastcgi_param SCRIPT_FILENAME /Users/username/Dev/Wordpress/blog$fastcgi_script_name;
            fastcgi_param SCRIPT_NAME $fastcgi_script_name;
        }
    }
} 
```

现在，当我访问 localhost:8080/blogname 时，我只是下载 index.php 脚本而不是执行它。

也欢迎其他提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:37:43.740

替换这个

```
location /blogname {
  try_files $uri $uri/ /index.php;
  rewrite  /blogname(.*) /blog$1 last;
  fastcgi_index index.php;
  fastcgi_pass  127.0.0.1:9000;
  include       fastcgi_params;
  fastcgi_param SCRIPT_FILENAME /Users/username/Dev/Wordpress/blog$fastcgi_script_name;
  fastcgi_param SCRIPT_NAME $fastcgi_script_name;
} 
```

有了这个

```
location ~ \.php$ {
  try_files                 $uri =404;
  fastcgi_pass              127.0.0.1:9000;
  fastcgi_index             index.php;
  fastcgi_intercept_errors  on;
  fastcgi_split_path_info   ^(.+\.php)(/.*)$;
  include                   fastcgi.conf;
} 
```

我希望这对你有用，因为这是我用于本地服务器的。

# php - 多次更新数据库中的同一行

> ID：11386279
> 
> 赞同：1
> 
> 时间：2012-07-08T20:09:33.477
> 
> 标签：php, mysql, telephony, multiple-tables

我正在和一些朋友制作一个计费系统，它是这样工作的：客户拨打电话。客户挂断电话。计算调用的价格。电话的价格从客户的信用中扣除。

我们决定进行以下操作：获取用户的余额并将其存储在变量 $balance 中，然后执行 $balance = $balance - $callprice，最后更新数据库。

问题是客户可以同时拨打电话，如果两个电话同时完成，其中一个在另一个脚本更新新余额之前获取数据库中的值......其中一个电话将丢失. 我正在使用 php。

知道我该怎么做吗？

谢谢，对不起，我的英语很差......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:18:38.703

问题是您似乎正在尝试使用两个 SQL 语句来更新用户的余额：一个`SELECT`是用户的余额，另一个`UPDATE`是使用 PHP 减去余额后的用户余额。

您可以在一次操作中完成所有操作并消除竞争条件的可能性：

```
UPDATE users
SET balance = balance - <callprice here>
WHERE user_id = <user_id here> 
```

# sql - 获取 SQL 中选定行的列名？

> ID：11386280
> 
> 赞同：0
> 
> 时间：2012-07-08T20:09:42.070
> 
> 标签：sql, vb.net, datagridview

我有一个包含 2 种形式的程序，两种形式都有自己的网格。Grid1 在 form1 上，Grid2 在 form2 上。我希望 Grid2 用作用于编辑的弹出窗口。当用户双击 Grid1 上的一行时，它应该只对该行进行重新查询并在 Grid2 上显示该单行。我不知道如何获取 selectedrow 的列名，然后对其唯一标识符进行查询。到目前为止我所拥有的：（顺便说一下，这是在form1上）

```
 Public Sub dgvForm1_CellDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dgvForm1.CellDoubleClick

Dim i As Integer = 0
Dim rowIndex As Integer
Dim cellName as string

While dgvForm1.SelectedRows.Item(0).Cells(i).ColumnIndex < dgvForm1.ColumnCount

      rowIndex = dgvForm1.SelectedRows.Item(0).HeaderCell.RowIndex
      cellName = dgvForm1.SelectedRows.Item(0).HeaderCell.toString 
      Select Case cellName
             Case "control_no"
                 Dim sControlNum = cellName.ToString
             Case "store_id"
                 Dim sStoreNum = cellName.ToString
      End Select

      i = i + 1
End While
end sub 
```

我只是希望用户双击显示在具有许多其他记录的 datagridview 上的行，并触发双击事件。然后，这将遍历选定行的列名，直到找到 control_id 和 store_id 并获取它们的值。Ps 我尝试了 google 一个小时左右，但我很难让任何技术发挥作用。

更新：我应该补充一下，这是一个使用 sqlClient 及其 dataadapter/dataset 方法的绑定数据网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:28:18.257

myTable.Columns.ColumnName。[在http://msdn.microsoft.com/en-us/library/system.data.datacolumn.columnname.aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.columnname.aspx)
阅读更多信息

# php - 还记得我吗？

> ID：11386283
> 
> 赞同：0
> 
> 时间：2012-07-08T20:09:54.887
> 
> 标签：php, session, cookies

移至：[https ://webmasters.stackexchange.com/questions/31834/remember-me-or-not](https://webmasters.stackexchange.com/questions/31834/remember-me-or-not)

使用记住我功能是否安全？允许用户关闭浏览器并返回仍然登录是否有点安全（知道它不会 100% 安全）？在阅读了有关安全的不同内容后，我不确定应该走哪条路。我了解了会话固定并实施了安全性以增加更多保护。

根据经验，如果选中记住我，则只会出现您的用户名/电子邮件，并要求您重新输入密码。其他网站允许您在浏览器关闭后尽可能多地进出，而无需注销。

如果它是安全的，那么当前实现记住/保持登录的最佳方式是什么？

*   [记住我功能的最佳实践](https://stackoverflow.com/questions/3531377/best-practise-for-remember-me-feature)
*   [用户登录 PHP 时保持登录或记住我的代码是什么](https://stackoverflow.com/questions/5087969/what-is-the-code-for-stay-logged-in-or-remember-me-while-user-login-in-php)
*   [http://bytes.com/topic/php/answers/881197-stay-logged-remember-me-php-sessions-cookies](http://bytes.com/topic/php/answers/881197-stay-logged-remember-me-php-sessions-cookies)
*   [https://security.stackexchange.com/questions/41/good-session-practices](https://security.stackexchange.com/questions/41/good-session-practices)

另外：我正在处理的网站是电子邮件和密码登录类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:18:01.630

仅使用会话总是更安全。但是，您可以使 cookie 安全。我建议你制作“记住我”，因为它提供了更好的用户体验。

以下是我对制作*安全的*“记住我”系统的建议：

*   将用户 ID 存储在 cookie 中
*   生成特殊令牌和哈希+盐并将它们存储在 cookie 中
*   将所有内容存储在数据库中
*   在每次页面加载时从 cookie 中获取数据并尝试在数据库中搜索它们
*   如果找不到，则注销用户
*   在每次页面加载时更改令牌

# ios - UITableView 的allowMultipleSelectionDuringEditing - 不显示某些单元格的编辑圈

> ID：11386287
> 
> 赞同：6
> 
> 时间：2012-07-08T20:10:11.370
> 
> 标签：ios, uitableview

我试图`UITableView`通过设置`allowsMultipleSelectionDuringEditing`为删除我的一些行`YES`。这一切都运作良好；圆圈显示在左侧。

但是，对于某些单元格，我不希望左侧的圆圈出现。我怎么做？我`cell.selectionStyle = UITableViewCellSelectionStyleNone`在编辑过程中尝试过，但没有奏效。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:40:53.960

为了禁止多选中的某些行，您应该使用`tableView:shouldIndentWhileEditingRowAtIndexPath:`mix with `cell.selectionStyle = UITableViewCellSelectionStyleNone`。

这是我的代码中的一个示例：

```
- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath*)indexPath {
    if (indexPath.row < 4) {
        return YES;
    } else {
        return NO;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // (...) configure cell

    if (indexPath.row < 4) {
        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    } else {
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-30T08:26:24.203

首先，使用这些设置：

```
self.tableView.allowsMultipleSelectionDuringEditing = true
self.tableView.setEditing(true, animated: false) 
```

并实现下一个委托方法：

```
func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -> Bool {
    return self.shouldAllowSelectionAt(indexPath)
}

func tableView(_ tableView: UITableView, shouldIndentWhileEditingRowAt indexPath: IndexPath) -> Bool {
    return self.shouldAllowSelectionAt(indexPath)
}

func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath? {
    if self.shouldAllowSelectionAt(indexPath) {
        return indexPath
    }
    return nil
} 
```

shouldAllowSelectionAt 是我的私有方法，其中包含有关选择哪一行的逻辑

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T20:15:01.850

您是否尝试过实现`tableView:editingStyleForRowAtIndexPath: UITableViewDelegate`' 方法并返回`UITableViewCellEditingStyleNone`您不想显示删除控件的单元格？

# php - 根据下一个键或上一个键限制数组元素？

> ID：11386288
> 
> 赞同：0
> 
> 时间：2012-07-08T20:10:14.430
> 
> 标签：php, arrays

我有一系列类似于以下内容的缩略图：

```
$thumbnails = array(1,2,3,4,5,6,7,8,9,10); 
```

首先，我想根据当前应用 6 的限制，`key = 3`因此数组应该返回：`3,4,5,6,7,8`。

如果我按下下一个链接，数组应该返回`4,5,6,7,8,9`：

如果我按上一个链接，数组应该返回：`2,3,4,5,6,7`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:14:03.103

使用[`array_slice()`](http://php.net/array_slice)：

```
$start = 3; $limit = 6;
$limited = array_slice( $thumbnails, $start - 1, $limit); 
```

# php - 在数组的第一个索引上制作 prev() 返回最后一个索引

> ID：11386291
> 
> 赞同：0
> 
> 时间：2012-07-08T20:10:27.570
> 
> 标签：php, arrays, indexing

我正在寻找一种方法来使`prev()`函数在第一个索引上使用时保持倒带（而不是从末尾开始）。考虑以下示例：

```
$foo = array(1, 2, , ..., 12);
echo current($foo) // output: 1
echo prev($foo) // should output 12 - returns FALSE 
```

当然，我可以编写一个函数来以某种方式满足我的需求，但我很确定我必须忽略某些东西，因为这是非常简单的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:22:55.740

```
function myPrev(&$array) {
    if(prev($array) === false) {
        return end($array);
    }
    return prev($array);
} 
```

你有这样的想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:21:47.917

使用[end()](http://php.net/end)，它的设计是有原因的。

# macos - 在 Mac OS X 上结合 wxLua 和 LuaJIT

> ID：11386294
> 
> 赞同：0
> 
> 时间：2012-07-08T20:10:35.067
> 
> 标签：macos, lua, wxwidgets, luajit, wxlua

你如何在 Mac OS X (10.6.8) 上构建 wxLua 以便它使用 LuaJIT2 而不是标准的 Lua 解释器？

我努力了：

```
./configure --with-lua-prefix=/Users/finnw/LuaJIT-2.0.0-beta9 
```

`/Users/finnw/LuaJIT-2.0.0-beta9`我构建 LuaJIT 的目录在哪里。

我还尝试复制`src/libluajit.a`到`lib/liblua5.1.a`和`src/libluajit.so`到`lib/liblua5.1.so`以及各种其他组合，例如将扩展名从更改`.so`为`.dylib`

但是我仍然总是得到 Lua 而不是 LuaJIT（可以通过加载需要`ffi`模块的脚本来验证。）

如何强制它链接到 LuaJIT2？为什么该`configure --with-lua-prefix`选项不做它声称做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:49:13.857

以下适用于 Debian：

```
$ ./configure --with-lua-prefix=/path/to/luajit --enable-systemlua 
```

它指向 /path/to/luajit/include/lua5.1/*.h 和 /path/to/luajit/lib/liblua5.1.a。

--enable-systemlua 确保它尝试在您指定的前缀处查找 Lua，并且会使配置失败，而不是退回到与 wxLua 捆绑的 Lua。

您还需要用 luaL_openlib 替换 wxlbind.cpp 和 wxlstate.cpp 中的两个 luaI_openlib 实例，因为这在 5.1 中已被弃用，并且在 LuaJIT2 中不存在。

# jquery - jquery 选择器结果是 prevObject: e.fn.e.init[3] 如何从中获取元素

> ID：11386295
> 
> 赞同：5
> 
> 时间：2012-07-08T20:10:38.810
> 
> 标签：jquery

我有一个选择器`$('.element')`正在返回`prevObject: e.fn.e.init[3]`。我查看了结果，第一个对象就是我需要的。这里有2个问题。是什么`prevObject`？另外我如何从结果中选择第一个对象。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T20:18:54.197

要访问第一个元素，只需使用`[0]`或`.get(0)`

`prevObject`如果调用链接在一起，则为先前 jQuery 函数调用的结果。这就是允许`.end()`调用将 jQuery 链弹出回先前状态的原因。

# javascript - 为什么javascript中的继承需要原型

> ID：11386301
> 
> 赞同：1
> 
> 时间：2012-07-08T20:11:16.380
> 
> 标签：javascript

我试图在 javascript 中学习 OO 技术。大多数网站都使用原型继承。

但是，我试图理解为什么以下内容不好（并且仍然可以实现原型继承可以做的事情）：

```
 //create parent class
    var Person = function (vId, vName) {
        this.Id = vId;
        this.Name = vName;

        this.Display = function () {
            alert("Id=" + this.Id);
        }
    };

    //create new class
    var Emp = function (vId, vName, vOfficeMail) {
        Person.call(this, vId, vName)
        this.OfficeEmail = vOfficeMail;

        this.Display = function () {
            alert("Id=" + this.Id + ", OfficeMail=" + this.OfficeEmail);
        }
    };

    //create instance of child class
    var oEmp = new Emp(1001, "Scott", "a@a.com"); //using Child's constructor
    //call display method in child class
    oEmp.Display();

    //create instance of parent class
    var oPerson = new Person(1002, "Smith"); //using Parent's constructor
    //call display method in parent class
    oPerson.Display(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:16:06.723

这是我认为最重要的，也是一个简单的解释。

此代码将为每个对象创建一次函数：

```
this.Display = function () {
    alert("Id=" + this.Id);
} 
```

使用原型，该函数只创建一次并应用于该类型的所有对象。浪费更少的内存和更少的 CPU 功率。

这段代码将显示我在说什么：

```
var Person = function (vId, vName) {
        this.Id = vId;
        this.Name = vName;

        this.Display = function () {
            alert("Id=" + this.Id);
        }
    };

    var a = new Person(1, 2);
    var b = new Person(3, 4);

    var instanceEqual = (a.Display == b.Display);// false
    alert("Instance functions equal: " + instanceEqual);

    Person.prototype.Display2 = function () {
            alert("Id=" + this.Id);
        }

    var prototypeEqual = (a.Display2 == b.Display2);// true
    alert("Prototype functions equal: " + prototypeEqual); 
```

jsfiddle：http: [//jsfiddle.net/nPnrk/](http://jsfiddle.net/nPnrk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:13:52.083

原型对象允许您将许多对象实例共享的行为都保存在一个地方。如果需要，可以从那里**动态**更改或扩展它们，其效果是立即更改从原型继承的所有构造对象的功能。

还有其他美好的事情，但对我来说这是最重要的事情。

# c# - Jquery datepicker 无法在后面的代码中捕获 SUBMIT 控件的值

> ID：11386305
> 
> 赞同：0
> 
> 时间：2012-07-08T20:11:33.540
> 
> 标签：c#, asp.net, code-behind, jquery-ui-datepicker

我正在使用 jQuery DatePicker 控件。控件显示正确，但我无法在我的代码隐藏页面中获取所选值。我尝试使用以下方法捕获用户选择的值： DateTime StartDt = Convert.ToDateTime(Request.Form["datepicker"]); 用户有几个控件可供选择，然后点击提交。

提交后，当我检查 StartDt 的值时，它是：01/01/0001 00:00:00AM

**ASPX 页面：**

```
<%@ Page Title="Fox Cities Restaurant Guide-Food Events" Language="C#" MasterPageFile="~/main_master.Master" AutoEventWireup="true" CodeBehind="Events.aspx.cs" Inherits="FCGuide.Events" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <link href="Styles/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
 <script type="text/javascript">
     $(document).ready(function () {
         $("#datepicker").datepicker();
     });
  </script>
    <style type="text/css">
        #datepicker
        {
            width: 110px;
            height: 19px;
        }
    </style>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div id="defaultEvent">
        <div id="EventNav">
            <div id="EventType" class="EventNavDivs">
            <span class="EventTitle">Event Type</span> <br />
                <asp:DropDownList ID="ddlEventType" runat="server">
                    <asp:ListItem>Any Event</asp:ListItem>
                    <asp:ListItem>Art Shows</asp:ListItem>
                    <asp:ListItem>Farmers' Market</asp:ListItem>
                    <asp:ListItem>Festival</asp:ListItem>
                    <asp:ListItem>Restaurant Opening</asp:ListItem>
                </asp:DropDownList>
            </div>
            <div id="EventDate" class="EventNavDivs">
                <span class="EventTitle">Event Date</span> <br />
                <%--<asp:TextBox ID="datepicker" runat="server"></asp:TextBox>--%>
                <input id="datepicker" type="text" size="50px" maxlength="12" />
            </div>
            <div id="EventLocation" class="EventNavDivs">
                <span class="EventTitle">Location</span> <br />
                <asp:DropDownList ID="ddlEventCity" runat="server">
                </asp:DropDownList>
            </div>
            <div id="EventBtn" class="EventNavBtn">
                <br /><asp:Button ID="btnFindEvents" runat="server" Text="Submit" 
                    onclick="btnFindEvents_Click" />
            </div>
        </div>
        </div>
    </div>
</asp:Content> 
```

**代码隐藏页面：**

```
protected void btnFindEvents_Click(object sender, EventArgs e)
{
    string EventType = ddlEventType.SelectedValue;
    DateTime StartDt = Convert.ToDateTime(Request.Form["datepicker"]);
    string City = ddlEventCity.SelectedValue;

        BLgetEvents obj = new BLgetEvents();
        var EventList = obj.getAllEvents(StartDt);

        ListEvents.DataSource = EventList;
        ListEvents.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:36:27.800

将您的 .aspx 代码更改为：

```
<input id="datepicker" type="text" size="50px" maxlength="12" name="DatePickername" /> 
```

然后在您的代码隐藏中，执行以下操作：

```
 string dt = Request.Form["DatePickername"]; 
```

# php - 迄今为止添加“x”小时数

> ID：11386308
> 
> 赞同：83
> 
> 时间：2012-07-08T20:11:58.123
> 
> 标签：php, date, datetime, dateadd, hour

我目前有 php 返回当前日期/时间，如下所示：

```
$now = date("Y-m-d H:m:s"); 
```

我想做的是有一个新变量`$new_time`equal `$now + $hours`，其中`$hours`的小时数从 24 到 800 不等。

有什么建议么？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-07-08T20:14:44.650

你可以使用类似[`strtotime()`](http://php.net/manual/en/function.strtotime.php)函数的东西来为当前时间戳添加一些东西。`$new_time = date("Y-m-d H:i:s", strtotime('+5 hours'))`.

如果您需要函数中的变量，则必须使用双引号然后 like `strtotime("+{$hours} hours")`，但最好使用`strtotime(sprintf("+%d hours", $hours))`这样。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-04-16T08:23:26.353

另一个解决方案（面向对象）是使用 DateTime::add

例子：

```
<?php

$now = new DateTime(); //now
echo $now->format('Y-m-d H:i:s'); // 2021-09-11 01:01:55

$hours = 36; // hours amount (integer) you want to add
$modified = (clone $now)->add(new DateInterval("PT{$hours}H")); // use clone to avoid modification of $now object
echo "\n". $modified->format('Y-m-d H:i:s'); // 2021-09-12 13:01:55 
```

[运行脚本](http://sandbox.onlinephpfunctions.com/code/b8d43aa22a4177850970e290d8a7ab5cf394ef7d)

* * *

*   [DateTime::添加 PHP 文档](http://fr2.php.net/manual/en/datetime.add.php)
*   [DateInterval::构造 PHP 文档](https://www.php.net/manual/en/dateinterval.construct.php)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-08T20:14:56.007

您可以使用 [strtotime()](http://php.net/manual/en/function.strtotime.php)来实现这一点：

```
$new_time = date("Y-m-d H:i:s", strtotime('+3 hours', $now)); // $now + 3 hours 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-10-18T23:51:18.127

**正确的**

您可以使用 strtotime() 来实现这一点：

```
$new_time = date("Y-m-d H:i:s", strtotime('+3 hours', strtotime($now))); // $now + 3 hours 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-08T20:16:32.270

您还可以使用 unix 样式的时间来计算：

```
$newtime = time() + ($hours * 60 * 60); // hours; 60 mins; 60secs
echo 'Now:       '. date('Y-m-d') ."\n";
echo 'Next Week: '. date('Y-m-d', $newtime) ."\n"; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-07-30T08:42:53.180

嗯......你的分钟应该更正......'i'是分钟。不是几个月。:) （我也有同样的问题。

```
$now = date("Y-m-d H:i:s");
$new_time = date("Y-m-d H:i:s", strtotime('+3 hours', $now)); // $now + 3 hours 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-05T10:33:18.100

我用这个，它的工作很酷。

```
//set timezone
date_default_timezone_set('GMT');

//set an date and time to work with
$start = '2014-06-01 14:00:00';

//display the converted time
echo date('Y-m-d H:i',strtotime('+1 hour +20 minutes',strtotime($start))); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-25T06:22:21.380

您可以尝试 lib [Ouzo goodies](http://ouzo.readthedocs.org/en/latest/utils/clock.html)，并以流利的方式执行此操作：

```
echo Clock::now()->plusHours($hours)->format("Y-m-d H:m:s"); 
```

API 允许多种操作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-12T09:16:53.973

对于给定的 DateTime，您可以添加天、小时、分钟等。以下是一些示例：

```
$now = new \DateTime();

$now->add(new DateInterval('PT24H')); // adds 24 hours

$now->add(new DateInterval('P2D')); // adds 2 days 
```

PHP：DateTime::add - 手动[https://www.php.net/manual/fr/datetime.add.php](https://www.php.net/manual/fr/datetime.add.php)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-13T14:42:10.803

为“现在”增加 2 小时

```
$date = new DateTime('now +2 hours'); 
```

或者

```
$date = date("Y-m-d H:i:s", strtotime('+2 hours', $now)); // as above in example 
```

或者

```
$now = new DateTime();

$now->add(new DateInterval('PT2H')); // as above in example 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-11T08:08:35.063

```
$date_to_be-added="2018-04-11 10:04:46";
$added_date=date("Y-m-d H:i:s",strtotime('+24 hours', strtotime($date_to_be))); 
```

[date()](http://php.net/manual/en/function.date.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)函数的组合可以解决问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-16T07:59:37.430

我喜欢那些内置的 php 日期表达式，例如`+1 hour`，但由于某种原因，它们一直在我脑海中浮现。此外，我所知道的所有 IDE 都没有为这类东西提供自动完成功能。最后，虽然处理这些`strtotime`和`date`功能并不是什么火箭科学，但每次我需要它们时，我都必须在谷歌上搜索它们的用法。

这就是为什么我喜欢消除（至少减轻）这些问题的解决方案。以下是向日期添加`x`小时数的方式：

```
(new Future(
    new DateTimeFromISO8601String('2014-11-21T06:04:31.321987+00:00'),
    new NHours($x)
))
    ->value(); 
```

作为一个不错的奖励，您不必担心格式化结果值，它已经是 ISO8601 格式。

[此示例使用蛋白酥皮库，您可以在此处](https://meringue.readthedocs.io/en/latest/faq/how_to_add_seconds_minutes_hours_days_and_all_to_php_datetime.html)查看更多示例。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-09T12:56:53.750

`$to = date('Y-m-d H:i:s'); //"2022-01-09 12:55:46"`

`$from = date("Y-m-d H:i:s", strtotime("$to -3 hours")); // 2022-01-09 09:55:46`

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2018-06-12T10:09:59.427

```
 $now = date("Y-m-d H:i:s");
   date("Y-m-d H:i:s", strtotime("+1 hours $now")); 
```

# iphone - iPhone正则表达式与模式提取图像的URL

> ID：11386309
> 
> 赞同：0
> 
> 时间：2012-07-08T20:12:12.593
> 
> 标签：iphone, regex, xcode, uiimage

我解析了一个 RSS 提要，并试图获取提要中位于 RSS 的 content:encoded 项中的图像的 URL。这部分文本中有多个 HREF，而我一直使用的带有模式的正则表达式只是拉出第一个 URL。我在网上找到了这种模式，但不确定如何将其更改为我需要的模式。有什么想法吗？

```
NSString *thearticleImage = entry.articleImage;
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"(?i)\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))" options:NSRegularExpressionCaseInsensitive error:NULL];
    NSString *someString = thearticleImage;
    NSString *oneurl = [someString substringWithRange:[expression rangeOfFirstMatchInString:someString options:NSMatchingCompleted range:NSMakeRange(0, [someString length])]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:36:27.057

如果你想改变正则表达式模式，你需要学习正则表达式。看看：[正则表达式教程](http://www.regular-expressions.info/tutorial.html/)。

你试过什么了？

# asp.net-mvc-3 - @Html.EditorFor 的硬代码值

> ID：11386310
> 
> 赞同：2
> 
> 时间：2012-07-08T20:12:17.017
> 
> 标签：asp.net-mvc-3

我的 MVC 3 应用程序需要**创建新用户**。

我想为视图中的 ApplicationId 文本框硬编码 ApplicationId。

有谁知道如何做到这一点？

create 方法不获取任何数据：

```
public ActionResult Create()
{
    return View();
}

  <div class="editor-label">
            @Html.LabelFor(model => model.ApplicationId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ApplicationId)
            @Html.ValidationMessageFor(model => model.ApplicationId)
        </div> 
```

**更新**

有一个选项。使用隐藏字段。

```
 @Html.Hidden("ApplicationId", "ep006964-83a8-4f40-a569-d2d3296f005b") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T20:13:49.167

当然，在为这个视图提供服务的控制器操作中，您只需在视图模型上设置相应的属性：

```
public ActionResult Foo()
{
    var model = ... go and fetch your model from somewhere
    model.ApplicationId = "some hardcoded value";
    return View(model);
} 
```

现在`EditorFor`将显示正确的值。没有办法强制视图中的值。编辑器模板的全部意义在于它们使用为您的视图模型设置的值。

# c# - 将 RPC API 转换为 Rest API

> ID：11386314
> 
> 赞同：1
> 
> 时间：2012-07-08T20:12:50.540
> 
> 标签：c#, .net, rest, asp.net-web-api

我开始使用 REST，并试图了解如何将遵循 RPC 样式的 Web 方法映射到 REST 样式。

```
public PerformanceResponse GetPerformance(int lineId, int maxNumberOfEntries, bool ascending) 
```

这是我唯一与性能相关的操作，它只是从数据库中提取一些信息。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:56:51.260

以下是我设计 API 的方式：

*   创建性能控制器
*   有一个带有参数的 Get 方法
*   设计网址为`/Performance/{lineId}?maxNumberOfEntries={max}&ascending={asc}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:16:17.137

是

[http://example.com/Performance/1/2/0](http://example.com/Performance/1/2/0)

其中 1 是 lineID，2 是 maxNumber，0 是升序

答案？
（您的问题有点模糊 - 请说明）

# php - 如何为数组中的每个插入项赋予唯一的 ID？

> ID：11386317
> 
> 赞同：0
> 
> 时间：2012-07-08T20:13:09.743
> 
> 标签：php

我遇到了一种情况，我将东西放入这样的数组中：

```
 $current_pms[] = array(
        'from' => sofa_get_username($current_user->ID),
        'to' => $valid_user,
        'subject' => $subject,
        'message' => $message,
        'status' => 'unread',
        'time' => current_time('mysql', $gmt = 0)
    ); 
```

如何用自己的唯一 ID 标记每个条目，以便以后获取？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:17:09.977

您始终可以自行分配增量编号，这是一种选择。

```
$id = count($array)+1;
$array[$id] = array (...) 
```

或者您可以只使用任何键/值对。

```
$array['id'] = ...
$array[123]  = ... 
```

# ruby-on-rails - 如何获取数组中所有对象的后代？（Rails + 祖先宝石）

> ID：11386323
> 
> 赞同：0
> 
> 时间：2012-07-08T20:14:33.490
> 
> 标签：ruby-on-rails, arel, ancestry

我将这个 gem [https://github.com/stefankroes/ancestry](https://github.com/stefankroes/ancestry)用于我的 People 模型。该表如下所示：

```
+----+----------+
| id | ancestry |
+----+----------+
|  1 | NULL     |
|  2 | 1        |
|  3 | 1        |
|  4 | 1/2      |
|  5 | 1/3      |
|  6 | NULL     |
|  7 | 1/2      |
|  8 | 1/2      |
|  9 | 1/3      |
| 10 | NULL     |
| 11 | 10       |
| 12 | 10       |
| 13 | NULL     |
| 14 | NULL     |
| 15 | 6        |
| 16 | 6        |
| 17 | 6/16     |
| 18 | 6        |
| 19 | 6/18     |
| 20 | 14       |
+----+----------+ 
```

我要查询的是：

1.  给定两个 id 为 1 和 6 的人

2.  得到这两个人的所有后代

3.  在一个查询中而不是一一查询，因为我需要将其放入 Arel.or 方法中。

我知道使用：

```
People.select("id").where(People.arel_table[:ancestry].matches("6/%")) 
```

生成 LIKE sql 语句并返回 id 为 6 的人的所有孙子。我还知道：

```
People.select("id").where(People.arel_table[:ancestry].matches(["1/%","6/%"])) 
```

不起作用，因为它会生成无效的 LIKE 语句：

```
SELECT id FROM `people` WHERE (`people`.`ancestry` LIKE '1/%', '6/%') 
```

另一方面，我知道：

```
People.select("id").where(People.arel_table[:ancestry].in(["1", "6"])) 
```

生成 IN sql 语句并返回 1 和 6 的所有子代（但不是孙代）。我也知道：

```
People.select("id").where(People.arel_table[:ancestry].in(["1/%", "6/%"])) 
```

什么都不返回，因为 IN 语句作为精确匹配工作。

那么我的问题是：如何将它们全部放入（可能是链接）查询中以获取 1 和 6 的所有后代？在这个例子中，我希望结果是：[ 2, 3, 4, 5, 7, 9, 15, 16, 17, 18, 19 ]。

非常感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:31:24.283

```
People.select("id").where(People.arel_table[:ancestry].matches("1/%").or(People.arel_table[:ancestry].matches("6/%")) 
```

# vb.net - datagridview 过滤功能，效果很好但是 3 也是 13 和 334

> ID：11386328
> 
> 赞同：0
> 
> 时间：2012-07-08T20:14:58.357
> 
> 标签：vb.net, search, dynamic

所以这是我的功能..它工作得很好，除了它过滤每个包含数字 3 的单元格，如 300 313 30 43 但我希望它只过滤只有单个数字 3 的单元格值！

```
Private Sub LinkLabel4_Click(sender As Object, e As System.EventArgs) Handles LinkLabel4.Click

    Dim search As String
    search = "SELECT * FROM products WHERE rank LIKE '%" & 3 & "%'"

    Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\db.mdb"
    Dim adapter As New OleDbDataAdapter(search, connectionString)

    Dim dt As New DataTable("products")
    adapter.Fill(dt)
    DataGridView1.DataSource = dt
End Sub 
```

另一件事是选择语句用于过滤2个指定数字之间的值，比如4到16之间谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:42:52.563

如果`rank`是数字数据类型，那么您的查询应该是这样的

```
search = "SELECT * FROM products WHERE rank = 3" 
```

在第二种情况下

```
search = "SELECT * FROM products WHERE rank >=4 AND rank <= 16" 
```

要使您的搜索参数化，您可以编写这样的方法

```
Sub RankFilter(ByVal rankLowValue As Integer, Optional ByVal rankHiValue As Integer = -1)

    Dim search As String 
    if rankHiValue = -1 then
        search = "SELECT * FROM products WHERE rank = ?" 
    else
        search = "SELECT * FROM products WHERE rank >= ? and rank <= ?" 

    Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\db.mdb" 

    Dim adapter As New OleDbDataAdapter(search, connectionString)
    adapters.SelectCommand.Parameters.AddWithValue("@rankLo", rankLowValue)
    if rankHiValue <> -1 then
         adapters.SelectCommand.Parameters.AddWithValue("@rankHi", rankHiValue)
    end if

    Dim dt As New DataTable("products") 
    adapter.Fill(dt) 
    DataGridView1.DataSource = dt 
end sub 
```

# javascript - 隐藏字段的值显示非常缓慢

> ID：11386330
> 
> 赞同：0
> 
> 时间：2012-07-08T20:15:01.183
> 
> 标签：javascript, asp.net, google-maps, google-maps-api-3

我有个问题。如何提高在下面的脚本中获取值的速度？我的脚本设置了 170 个标记，稍后在地图发生变化（空闲事件）时获取地图边界的 lng 和 lat 值，并将此值发送到隐藏字段。对于 10-20-30 标记，此值显示得非常快，但对于 +100 个标记，此功能非常慢，并且在地图更改时需要 5-6 秒才能显示所有值。我正在使用标记clusterer，但对速度没有影响。如何改善这一点？问候 ！

```
 (..) // map options
                var map = new google.maps.Map(document.getElementById("mapka"), mapOptions);

                var markers = [];

                var lngstring = <%=lngstring %>
                var latstring = <%=latstring %>
                //alert(latstring);
                //alert(lngstring);
                var arraylat = latstring.split("#");
                var arraylng = lngstring.split("#");

                for (var i = 0; i < arraylng.length-1; i++) {
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(arraylng[i], arraylat[i])
                    });
                markers.push(marker);
                }
                var markerCluster = new MarkerClusterer(map, markers);

                google.maps.event.addListener(map, 'idle', function () {
                var bounds = map.getBounds();
                var nelat = bounds.getNorthEast().lat();
                var nelng = bounds.getNorthEast().lng();
                var swlat = bounds.getSouthWest().lat();
                var swlng = bounds.getSouthWest().lng();
                var c1 = map.getCenter().lat();
                var c2 = map.getCenter().lng();
                var zoom1 = map.getZoom();
                document.getElementById("<%=hfNelat.ClientID%>").value = nelat;
                document.getElementById("<%=hfNelng.ClientID%>").value = nelng;
                document.getElementById("<%=hfSwlat.ClientID%>").value = swlat;
                document.getElementById("<%=hfSwlng.ClientID%>").value = swlng;
                document.getElementById("<%=UpdateButton1.ClientID %>").click();
                }); 
```

“后面”的代码：

```
 protected void UpdateButton_Click(object sender, EventArgs e)
    {
        lNelat.Text = hfNelat.Value;
        lNelng.Text = hfNelng.Value;
        lSwlat.Text = hfSwlat.Value;
        lSwlng.Text = hfSwlng.Value;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:17:26.620

在我看来，您正在页面中静态加载标记。如果您使用 AJAX 技术（异步）加载标记，页面加载速度会更快。

请参阅 Mike Williams 的 v2 教程中的[The AJAX Philosophy 页面](http://econym.org.uk/gmap/basic11.htm)。

# java - 显然不允许上课。有什么意义呢？

> ID：11386338
> 
> 赞同：1
> 
> 时间：2012-07-08T20:16:09.353
> 
> 标签：java, android, generics

这是一个 Android 应用程序，但大概在 Java 中也是如此。我有一个 LevelFactory 类型，从中派生 Level1Factory、Level2Factory 等。我想要这些类的数组，以便我可以在给定数组索引的情况下实例化一个级别。

我可以只拥有一个 Class[] 并将它们放入其中，然后在需要使用它们时将它们强制转换为 LevelFactory，但我想知道正确的做法是什么。

这显然是一个错误“不兼容的类型”：

```
new Class<LevelFactory>[] {Level1Factory.class,Level2Factory.class}; 
```

然而，我惊讶地发现这也是一个错误“通用数组创建”：

```
new Class<? extends LevelFactory>[] {Level1Factory.class,Level2Factory.class}; 
```

以下方法有效，但在分配给变量时会给出“未检查分配”警告：

```
new Class[] {Level1Factory.class,Level2Factory.class}; 
```

最后一个是我可以开始工作的唯一选择。我只是忽略了警告，但如果真的可能的话，我想使用泛型来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:33:17.393

我建议您阅读“Effective Java”一书的第 25 条“优先使用列表而不是数组”。约书亚·布洛赫写道：

> 为什么创建泛型数组是非法的？因为它不是类型安全的。如果它是合法的，则编译器在其他正确的程序中生成的强制转换可能会在运行时失败并出现 ClassCastException。这将违反泛型类型系统提供的基本保证。

**UPD：**也许有具体的例子会更容易理解。

首先，数组是协变的，这意味着 SuperClass[] 可以转换为 SubClass[] ，反之亦然。这也意味着将 AnyConcreteClass[] 转换为 Object[] 是合法的。

所以让我们假设有可能有 Set<Cat>[] （但它不是）。如果有人将此数组转换为 Object[]，然后在其中添加一组 Dog 实例，Java 无法再保证我们的数组只包含一组 Cat 实例。破坏类型安全它破坏了泛型的本质。这就是为什么拥有泛型数组是非法的。

```
Set<Cat>[] cats = new Set<Cat>[]; // illegal
Object[] objects = cats;
objects[1] = new Set<Dog>();
cats[1].add(new Cat()); // Oops! TypeCastException 
```

老实说这个例子也是取自 Effective Java :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T20:48:10.760

两个问题：

1.  你真的需要一个数组吗？数组不适用于泛型。所以一个`ArrayList<LevelFactory>`可能是更好的解决方案

2.  你真的需要向下转换到特殊类型（Level1Factory、Level2Factory）吗？`LevelFactory`如果他们有一个在（比如说）中定义的通用超级方法，则`Level getLevel()`您不需要向下转换它们。只需致电`getLevel()`，您就可以从工厂获得正确的 Level 实例。

另一个注意事项，因为这似乎是一个常见的陷阱：

`new Class<? extends LevelFactory>`

这不是一个有效的语句（它是否是一个数组并不重要）。`<? extends T>`仅对左侧的类型有效。它定义了创建的对象的泛型类型可以是 T 或从 T 派生。对于集合，这并不意味着它们可以存储 T 的对象或从 T 派生（无论如何都可以是 T 的集合）。

1.  `List<LevelFactory> list = new ArrayList<LevelFactory>()`这意味着您可以将 LevelFactory、Level1Factory 和 Level2Factory 的对象添加到`list`. 当您想从`list`它们接收对象时，它们是`LevelFactory`.

2.  `List<? extends LevelFactory> list = new ArrayList<LevelFactory>()`表示您可以接收`LevelFactory`from的对象`list`。但是您不能`list`以类型安全的方式添加任何对象，因为您不知道`list`. 那是因为您也可以分配`new ArrayList<Level1Factory>()`给`list`. 这意味着您甚至不能向其中添加`LevelFactory`对象，`list`因为它们没有实现`Level1Factory`.

一般来说`<? extends Something>`，在大多数情况下，集合不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T20:34:45.180

您不能以这种方式创建数组，`new SomeClass<Type>[10]`而只能以这种方式创建`new SomeClass[10]`。考虑`ArrayList<SomeClass<Type>>`改用。

# ruby - 使用 ChildProcess 启动进程时“系统找不到指定的文件”

> ID：11386339
> 
> 赞同：1
> 
> 时间：2012-07-08T20:16:10.947
> 
> 标签：ruby, windows, process, createprocess

当我运行以下代码时：

```
require 'childprocess'

process = ChildProcess.build("cucumber")
process.start 
```

（似乎任何其他宝石都可以代替黄瓜）

我得到错误：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/childprocess-0.3.3/lib/childprocess/windows/process_builder.rb:87:in `create_process': The system cannot
 find the file specified. (2) (ChildProcess::LaunchError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/childprocess-0.3.3/lib/childprocess/windows/process_builder.rb:34:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/childprocess-0.3.3/lib/childprocess/windows/process.rb:63:in `launch_process'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/childprocess-0.3.3/lib/childprocess/abstract_process.rb:67:in `start'
        from env.rb:4:in `<main>' 
```

当我在 Windows cmd 中使用 eg 运行它时`cucumber`，进程正常启动。

我该如何解决？为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:27:25.767

前几天也有同样的烦恼。您可以将 ChildProcess 指向 cucumber.bat 文件：

```
require 'childprocess'

process = ChildProcess.build("C:\\Ruby193\\bin\\cucumber.bat")
process.start 
```

# objective-c - UIAlertView 显示一次

> ID：11386341
> 
> 赞同：0
> 
> 时间：2012-07-08T20:16:28.730
> 
> 标签：objective-c, ios, xcode, uialertview

我知道这听起来可能很奇怪，我在以前的应用程序中使用过它，但现在在我现在的应用程序中无法使用相同的代码使其工作。我试图在应用程序启动时仅显示一次警报视图：

```
 if (![@"1" isEqualToString:[[NSUserDefaults standardUserDefaults] objectForKey:@"alert"]]){

    [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"alert"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"Text here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

[alert show]; 
```

如果我在这里做了一些愚蠢的事情，有人会介意检查一下吗，我已经将它与我的应用程序进行了交叉检查，这一切看起来都一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:18:05.553

在 if 块内显示警报

```
if (![@"1" isEqualToString:[[NSUserDefaults standardUserDefaults] objectForKey:@"alert"]]){

    [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"alert"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"Text here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

} 
```

或使用

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"alertShownOnce"] == NO)
{
   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"Text here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
    [alert show];
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"alertShownOnce"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

# plone - 将初始内容添加到 Plone CMS

> ID：11386344
> 
> 赞同：3
> 
> 时间：2012-07-08T20:16:45.733
> 
> 标签：plone

我正在寻找将初始内容导入 Plone 4.2 的最佳方式。要求：

*   能够在测试中使用初始内容
*   能够导入初始内容 TTW
*   支持内容、用户和组
*   修改初始内容填充的简单方法

有这样的产品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:35:06.993

对于 Dexterity 内容，Shuttle Thread 有一篇很棒的博客文章解释了如何使用[transmogrify.dexterity](http://pypi.python.org/pypi/transmogrify.dexterity)进行初始内容导入：[http ://shuttlethread.com/blog/development-with-transmogrify.dexterity](http://shuttlethread.com/blog/development-with-transmogrify.dexterity)

# function - Scala 风格：函数嵌套多远？

> ID：11386346
> 
> 赞同：5
> 
> 时间：2012-07-08T20:16:50.277
> 
> 标签：function, scala, coding-style, nested

Scala 的优点之一是它使您可以很好地控制范围。你可以嵌套这样的函数：

```
def fn1 = {
  def fn11 = {
    ...
  }
  def fn12 = {
    ...
    def fn121 = {
      ...
    }
  }
  ...
  def fn13 = {
    ...
  }
} 
```

这里的问题是 fn1 可能开始看起来有点吓人。来自 Java 背景，建议我们保持函数足够小，以便在 IDE 中的单个“页面”上查看。

根据以下推理，您如何将 fn12 从 fn1 中取出：“它现在仅在 fn1 中使用，但它*可能*会在以后在课堂上的其他地方有用......”

此外，您是否会偏好放置嵌套函数的位置 - 在调用它们的代码之前或之后？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T20:32:07.767

一般来说，我在实际代码中看不到那么多函数嵌套。它违背了保持方法简单和简洁的精神。这种嵌套主要用于闭包，您将使用外部范围的一些参数（例如递归函数的内部循环），因此它比在外部声明它并且必须显式地重新传递这些参数更干净。

您必须将嵌套函数放在调用它们的代码之前，否则它是*前向引用*并且不会编译。（在对象/类中，您可以将它们放在后面，但不能放在方法中。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T23:43:46.400

有一些模式可以利用一层嵌套。

递归，它用于隐藏实现细节（并且比分成两个单独的顶级方法更干净）：

```
def callsRecursive(p: Param): Result = {
  def recursive(p: Param, o: OtherParam, pr: PartialResult = default): Result = {
    ...
  }
} 
```

范围安全的不要重复自己：

```
def doesGraphics(p: Point) {
  def up(p: Point): Point = // ...
  def dn(p: Point): Point = // ...
  def lf(p: Point): Point = // ...
  def rt(p: Point): Point = // ...
  /* Lots of turtle-style drawing */
} 
```

还有更深奥的技巧，例如隐藏本地块的隐式转换。

如果你需要这两个，我可以设想嵌套两次。更多的可能是矫枉过正，主要是因为你可能让一种方法做得太多。您应该考虑如何使用干净的接口细分问题，然后这些接口可以成为它们自己的方法，而不是在方法中定义的各种变量周围有一个混乱的大杂烩。大方法就像全局变量：一切都变得过于依赖于实现的细节，而且难以跟踪。如果您已准备好进行适当的思考以使某些东西具有像样的界面，即使您只需要一次，那么请考虑将其带到顶层。如果您不打算那么努力，我倾向于将其留在内部以避免污染界面。

无论如何，不​​要害怕在任何你需要的地方创建一个方法。例如，假设您发现自己深陷于具有两个集合的某个方法中，每个集合都必须在逻辑中的特定点对它们执行相同的操作。不要担心，如果你是一两个或三个方法的深度！只需在需要的地方创建方法，然后调用它而不是重复自己。（请记住，如果您只需要在同一个地方处理几件事情，创建列表和映射是一种替代方法。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T20:30:29.517

如果您有一个像您描述的那样的顶级功能，它可能会做很多事情。

如果是这种情况，TDD 也有助于做出决定：一切仍然容易测试。

如果我得出的结论是这实际上是这种情况，我会重构以将内部函数作为依赖项取出，并使用它们自己的测试。

最终结果是我非常有限地使用了函数定义中定义的函数......我还对方法大小设置了更严格的限制：java 中大约 10-15 行，在 scala 中甚至更少，因为它不那么冗长。

我将内部函数主要放在外部方法的顶部，但这并不重要，因为它太短了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-08T20:24:05.293

我认为始终使用最低能见度是最佳实践。如果不同的函数需要嵌套函数，无论如何都可以移动它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T20:53:02.753

嵌套函数很有用（例如递归中的助手）。但是，如果它们太多，那么没有什么能阻止你将它们提取到一种新类型中并委托给它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T20:24:58.523

这看起来确实很吓人！如果要精细控制私有方法的范围，可以将它们声明为

```
private[scope] def fn12 = { ... } 
```

包在哪里`scope`。您可以在[忙碌的 Java 开发人员 Scala 指南](http://www.ibm.com/developerworks/java/library/j-scala07298/index.html)中阅读更多内容。

我个人避免嵌套命名方法（`def`），而我不介意嵌套匿名函数（例如，连续传递风格编程中的闭包）。

# sql - 最小日期时间和最大日期时间

> ID：11386351
> 
> 赞同：-1
> 
> 时间：2012-07-08T20:17:19.010
> 
> 标签：sql, sql-server-2008, tsql

我收到一个日期作为参数，这个日期的格式是 04/24/2012，所以在 sql 中我需要能够做类似的事情

```
SELECT * 
FROM MYTABLE 
WHERE OrderDate BETWEEN (04/24/2012 at 12 am (StartDate)) 
    AND (04/24/2012 at 11:59 pm (EndDate)) 
```

我有两个参数 StartDate 和 EndDate

```
@StartDate nvarchar(50),
@EndDate nvarchar(50), 
```

有时 StartDate 和 EndDate 不是同一日期，所以它可能是 2012 年 4 月 24 日 - 2012 年 4 月 27 日，这工作正常......问题是他们在同一天做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T20:21:27.963

尝试使用结束日期，但做

```
orderdate >= @startdate and orderdate < Dateadd(d, 1, @enddate) 
```

这种方式包括 startdate 和 enddate 之间的所有时间（如果它们在同一天）。例如大于或等于一天的开始但小于第二天的开始

# asp.net - 如何使用谷歌分析在页面中显示流量站点

> ID：11386360
> 
> 赞同：0
> 
> 时间：2012-07-08T20:18:35.017
> 
> 标签：asp.net, google-analytics

我是谷歌分析的初学者，我为网站创建用户并在网站的所有页面中获取 js 代码和过去的代码。我想用谷歌分析数据在我的网站上显示流量网站，例如总访问者、今天访问者、上个月访问者、去年访问者和...，但我不知道如何实现它，请帮助我。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:56:01.660

[http://www.dotnettips.info/Post/858/](http://www.dotnettips.info/Post/858/)波斯语链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:51:48.587

[EmbeddedAnalytics](http://www.embeddedanalytics.com) - 无需编程。只需定义您的图表并将一段代码粘贴到您希望图表显示的页面中。

# google-app-engine - 如何把一个云和所有平台的离线应用一起做起来？

> ID：11386361
> 
> 赞同：0
> 
> 时间：2012-07-08T20:18:35.560
> 
> 标签：google-app-engine, cloud

我知道很难开发 Web 应用程序并在每个设备上制作单独的应用程序版本。但我只想知道大公司是如何工作的。我想知道他们是如何在那里编写代码的

最好的例子是 Evernote 和 Google Drive。他们为每个设备制作云应用程序和单独的应用程序。

所以问题是..

如何与云应用同步数据？他们使用版本控制吗？

我可以在任何地方获得软件需求规范吗？

平台和语言：

*   iPhone 和 Mac - 目标 C
*   Android 和其他移动应用程序 - Java
*   视窗 8 - C#
*   Web 应用程序 - PHP 或 Python

**你如何解决这个解决方案语言不同？** 我想我用版本控制是不可能的..

**如何最小化编码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:08:36.140

我建议您使用版本控制工具。

> 在每个设备中制作单独的应用程序版本。

我假设您的意思是开发几乎没有差异的不同版本。版本工具中的分支功能可以帮助您轻松管理这些版本。

> 如何与云应用同步数据？

您可以使用 Web 部署功能将应用程序/修改上传到您的 Web 服务器。

我在这里列出了一些版本控制工具供您参考：

1.  吉特
2.  SVN
3.  SourceAnywhere（我在公司工作）
4.  团队基础服务器

# function - 调用静态函数时未解决的外部错误

> ID：11386362
> 
> 赞同：0
> 
> 时间：2012-07-08T20:18:36.763
> 
> 标签：function, static, externals

这让我彻底疯了。我已经尝试了我在其他帖子上找到的所有内容，但没有任何效果......这不应该这么复杂。

```
#include <iostream>
#include <iomanip>

using namespace std;

class SavingsAccount
{
private:
    float savingsBalance;   
    static float annualInterestRate;

public:

    static void modifyInterestRate(float interestRate)
    {
        annualInterestRate = interestRate;
    }

};

int main()
{
    SavingsAccount::modifyInterestRate(.03);

    cout << endl;
    system("pause");
    return 0;
} 
```

得到一个未解决的外部错误。

# php - Uploadify 完成但不上传

> ID：11386364
> 
> 赞同：2
> 
> 时间：2012-07-08T20:18:42.770
> 
> 标签：php, uploadify

我正在尝试在我的网站上使用 Uploadify 并使用以下 uploadify.php 进行设置：

```
<?php
// Define a destination
//$targetFolder = '/uploads'; // Relative to the root

if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'];
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
move_uploaded_file($tempFile,$targetFile);
  echo '1';
} else {
  echo 'Invalid file type.';
}
}
?> 
```

它没有上传，所以我注释掉了 $targetFolder 并更改了 $targetPath 以便它只是文档根目录。当我尝试使用 Uploadify 上传 file.txt 时，这导致 $targetFile 成为 /home/user/public_html/example.com/file.txt。该文件夹设置为755。我不知道问题可能是什么。否则，我正在使用 Uploadify 的香草安装，一切似乎都工作正常，除了文件实际上从未到达应有的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:40:39.367

这是文件夹权限未设置为 755 的问题。我退出并重新登录 cPanel，现在一切正常。

# sql - SQL 查询 JOIN 与表

> ID：11386368
> 
> 赞同：5
> 
> 时间：2012-07-08T20:19:18.923
> 
> 标签：sql, join, hive

```
select user_id, prod_and_ts.product_id as product_id, prod_and_ts.timestamps as 
timestamps from testingtable2 LATERAL VIEW explode(purchased_item) exploded_table
as prod_and_ts; 
```

通过使用上述查询，我​​得到以下输出。

```
USER_ID     |    PRODUCT_ID    |   TIMESTAMPS
------------+------------------+-------------
1015826235       220003038067      1004841621
1015826235       300003861266      1005268799
1015826235       140002997245      1061569397
1015826235      *200002448035*     1005542471 
```

如果您比较上面的`output from the query with the below Table2 data`，那么`product_id`中的与下面数据中最后一行中的`last line of above output`不匹配。`ITEM_ID``Table2`

```
BUYER_ID     |    ITEM_ID        |     CREATED_TIME 
-------------+-------------------+------------------------
1015826235       220003038067        2001-11-03 19:40:21
1015826235       300003861266        2001-11-08 18:19:59
1015826235       140002997245        2003-08-22 09:23:17
1015826235      *210002448035*       2001-11-11 22:21:11 
```

**所以我的问题是**

查找所有`PRODUCT_ID(ITEM_ID)`与特定 BUYER_ID 或 USER_ID 对应的数据`TIMESTAMPS(CREATED_TIME)`不匹配的和。`Table2`

所以我需要为上面的例子显示这样的结果 -

```
BUYER_ID   |     ITEM_ID       |      CREATED_TIME       |     USER_ID   |       PRODUCT_ID     |   TIMESTAMPS
-----------+-------------------+-------------------------+---------------+------------------+------------------
1015826235     *210002448035*       2001-11-11 22:21:11     1015826235      *200002448035*     1005542471 
```

我需要加入我用 table2 编写的上述查询以获得上述结果。所以我需要在 JOINING 过程中使用我上面的查询。这让我很困惑。任何建议将不胜感激。

**更新：-**

我编写了以下查询，但不知何故我无法实现我想要实现的输出。谁能帮我这个？

```
SELECT table2.buyer_id, table2.item_id, table2.created_time from 
(select user_id, prod_and_ts.product_id as product_id, prod_and_ts.timestamps as 
timestamps from testingtable2 LATERAL VIEW explode(purchased_item) exploded_table
as prod_and_ts) prod_and_ts JOIN table2 where 
prod_and_ts.user_id = table2.buyer_id
and (product_id <> table2.item_id or 
timestamps <> UNIX_TIMESTAMP(table2.created_time)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:52:58.523

我认为你可以用两个查询来做你想做的事，但我不是 100% 确定。通常在这种情况下，在第一个表中找到与第二个表不匹配的内容就足够了。您还试图获得“最接近”的匹配，这就是为什么这是具有挑战性的。

以下查询查找用户 id 和其他两个字段之一的匹配项，然后将它们组合起来：

```
SELECT table2.buyer_id, table2.item_id, table2.created_time, prod_and_ts.*
from (select user_id, prod_and_ts.product_id as product_id, prod_and_ts.timestamps as timestamps
      from testingtable2 LATERAL VIEW
           explode(purchased_item) exploded_table as prod_and_ts
     ) prod_and_ts JOIN
     table2
     on prod_and_ts.user_id = table2.buyer_id and
        prod_and_ts.product_id = table2.item_id and
        prod_and_ts.timestamps <> UNIX_TIMESTAMP(table2.created_time)
union all
SELECT table2.buyer_id, table2.item_id, table2.created_time, prod_and_ts.*
from (select user_id, prod_and_ts.product_id as product_id, prod_and_ts.timestamps as timestamps
      from testingtable2 LATERAL VIEW
           explode(purchased_item) exploded_table as prod_and_ts
     ) prod_and_ts JOIN
     table2
     on prod_and_ts.user_id = table2.buyer_id and
        prod_and_ts.product_id <> table2.item_id and
        prod_and_ts.timestamps = UNIX_TIMESTAMP(table2.created_time) 
```

这不会找到任何一个字段都不匹配的情况。

另外，我使用“on”语法而不是“where”来编写它。我认为 HIVE 支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:02:57.863

您的代表太高，无法打开重复**，尤其是同一问题的 2 个重复。**

[使用 HiveQL(Hadoop) 在 Hive 中连接两个表](https://stackoverflow.com/q/11336950/1166147)

[加入两个表并从它们中获取输出](https://stackoverflow.com/q/11428269/1166147)

您没有足够的信息来为第三种情况绑定记录。
您可以`FULL OUTER JOIN`使用 an`OR`并取回所有内容，匹配您在列出的第一种和第二种情况下拥有足够信息的行，并通过从不匹配的字段返回带有空值的行来识别您没有的记录第三种情况的表。

```
SELECT DATEPART(d,B.T1time),DATEPART(d,A.Created_TIME),* 
FROM SO_Table1HIVE A
FULL OUTER JOIN SO_Table2HIVE B ON A.BUYER_ID = B.[USER_ID] 
AND (B.t1time = A.Created_TIME OR B.PRODUCTID = A.ITEM_ID) 
```

**尝试在第三种情况下进行匹配是一种黑客行为 - 信息不存在**

这会将它们与指定日期的任何其他日期不匹配的日期匹配，但您将再次获得笛卡尔积。

```
SELECT DATEPART(d,B.T1time),DATEPART(d,A.Created_TIME),* 
FROM SO_Table1HIVE A
FULL OUTER JOIN SO_Table2HIVE B ON A.BUYER_ID = B.[USER_ID] 
AND (
    (B.t1time = A.Created_TIME OR B.PRODUCTID = A.ITEM_ID)
    OR
    (
        (A.Created_TIME <>  B.t1time AND B.PRODUCTID <> A.ITEM_ID AND DATEPART(d,B.T1time) = DATEPART(d,A.Created_TIME)) 
        AND a.ITEM_ID NOT IN(SELECT ITEM_ID
                   FROM SO_Table1HIVE A2
                   INNER JOIN SO_Table2HIVE B2 ON A2.BUYER_ID = B2.[USER_ID] AND (A2.Created_TIME =  B2.t1time OR B2.PRODUCTID = A2.ITEM_ID)
                   )

        AND B.PRODUCTID NOT IN(SELECT PRODUCTID
                   FROM SO_Table1HIVE A2
                   INNER JOIN SO_Table2HIVE B2 ON A2.BUYER_ID = B2.[USER_ID] AND (A2.Created_TIME =  B2.t1time OR B2.PRODUCTID = A2.ITEM_ID)
                   )
    )

) 
```

如果这不是 Hive 问题，您可以使用`RANK()`或尝试 a`top one`等， `RANK()`或者`ROW_NO`可能是这些 hack 中最好的，但我知道您使用的是 HQL，所以我不会写出来。您可以将它们拉到一个单独的表中并运行一些逻辑更新查询来更新它，然后将其用作查找表来绑定。

```
 tbl1Tbl2Lookup
 ---------------
 id int identity
 table1info FK
 table2info FK 
```

您可能应该做的是问题中的人建议您提供赏金 - 因为您确实没有查询第三种情况的好方法，他们为您提供了特定于 HIVE 的替代方案。

# ruby-on-rails - 在 Rails 资产中使用布局

> ID：11386369
> 
> 赞同：0
> 
> 时间：2012-07-08T20:19:26.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline, ruby-on-rails-3.2, erb

我的网站上有很多静态的 html 页面，但我通过典型的 rails 控制器和视图设置动态地为它们提供服务，只是因为我想使用我的 application.html.erb 布局而不必担心多次更改它如果我只是将其剪切并粘贴到我放在公共目录中的静态 html 文件中。

然而，我最近升级到 Rails 3.2，资产管道及其资产预编译听起来非常适合这个问题。但是，我还没有看到任何关于如何编写 *.html.erb 资产并指导它使用 application.html.erb 或任何其他布局的好的文档。有人可以发布如何做到这一点，或指出一个好的资源吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:30:27.167

与其尝试通过资产管道提供静态 html 部分，您是否考虑过只缓存它们？

如果您担心的实际上是要渲染静态部分，那么您可能想在您的视图中尝试以下操作。以下将用于您的导航。

```
-cache 'main-nav' do
  =render :partial => 'layouts/nav' 
```

这样在第一次加载时它会检索您的部分，并且所有后续加载它都会从您的缓存中检索它，如果您设置了 redis 或 memcache，那么它应该会变得非常快。

# python - 具有多个强制参数的 RESTful URI 的最佳设计是什么？

> ID：11386370
> 
> 赞同：9
> 
> 时间：2012-07-08T20:19:26.357
> 
> 标签：python, web-services, rest, uri

我正在寻找是否有更多经验丰富的 Web 服务老手可以评论在我需要强制参数的地方设计 RESTful URI 的最佳方式。举个例子，我想设计一个请求数据的 URI：

```
example.com/request/distribution 
```

但是，据我了解，该方法是应该在更高级别返回更多数据，而如果应用更具体的 URI 关键字，则会返回更详细的数据，但在我的情况下，我需要至少 3 个值才能发生这种情况。这 3 个值将是日期值、帐户值和专有分布代码值。例如：

```
example.com/request/distribution?acct=123&date=20030102&distcode=1A;1B;1C 
```

这被认为是“RESTful” URL，还是有更好的方法更有意义？非常感谢任何输入。

顺便说一句，Python 是首选语言。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T00:59:02.713

根据定义，URI 本身不能“非 RESTful”，因为 URI 规范是由 REST 架构风格指导的。你*使用*URI 的方式可能会违反 REST 风格：

1.  不遵循“客户端-服务器”约束；例如，通过使用 WebSockets 实现服务器推送。
2.  不遵循“资源识别”约束；例如，使用 URI 的一部分来指定控制数据或资源元数据，而不是坚持标识资源，或者通过 URI 以外的某种机制（如会话状态或其他带外机制）来标识资源。
3.  不遵循“通过表征操纵资源”的约束；例如，通过使用 URI 的查询字符串部分来传输状态。
4.  不遵循“自我描述信息”的约束；例如，使用 HTTP GET 修改状态，或传输 Content-Type 为“text/html”的 JSON。
5.  不遵循“超媒体作为应用程序状态引擎”的约束；例如，不提供要遵循的用户代理超链接，而是假设它将使用带外知识构建它们。
6.  不遵循“分层系统”约束，要求客户端了解有关服务器如何工作的内部细节（特别是要求客户端在请求中提供它们）。

以上都不一定是*坏的选择*。它们可能是您系统的最佳选择，因为它们促进了某些架构属性（例如效率或安全性）。它们只是不属于 REST 风格。

您的资源由多个强制段标识的事实是 URI 设计的一部分。正如 Anton 所指出的，在`example.com/request/distribution?acct=123&date=20030102&distcode=1A;1B;1C`和之间的选择`example.com/accounts/123/distributions/20030102/1A;1B;1C`纯粹是一种数据设计，而不是 URI 层本身的问题。例如，响应对前者的 PUT、POST 或 DELETE 请求没有任何问题。未能点击任何一个链接的客户将被视为已损坏。期望通过超媒体响应以外的其他方式向客户端提供其中任何一个的系统将被视为“unRESTful”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T23:07:53.850

最好先根据资源而不是 URI 创建 RESTful API。它更多地与您的数据设计有关，而不是与您选择的语言有关。

例如，您有一个分发资源。您想在基于 Web 的 API 中表示它，因此它需要具有适当的唯一资源标识符 (URI)。它应该简单、易读且不太可能更改。这将是一个不错的例子：

```
http://example.com/api/distribution/<some_unique_id> 
```

**在将更多内容和层次结构放入 URI 之前请三思**。

随着数据模型或身份验证方案的发展，您不希望更改 URI。更改 URI对您和使用您的 API 的开发人员来说[既不酷又痛苦。](http://www.w3.org/Provider/Style/URI.html)因此，如果您需要将身份验证传递给后端，您可能应该使用 GET 参数或 HTTP 标头（例如，AWS S3 API[允许两者](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)）。

将过多的 GET 参数（例如 ）放入 GET 参数（例如`http://example.com/api/distribution/?id=<some_unique_id>`）可能看起来是个坏主意，但 IMO 并不重要[0] — 只要您保持 API 文档可访问且保持最新。

[0] 更新：至少对于只读 API。对于 CRUD API，正如@daniel 所指出的，当您拥有像上面第一个示例中那样的端点时会更方便。这样，您就可以很好地使用 HTTP 方法，方法是为 at 的各个资源启用 GET、PUT、DELETE`/api/distribution/<id>`和 POST`/api/distribution`来创建新的分发。

在研究答案时，发现了一个关于 RESTful API 的精彩演示：[**Designing HTTP Interfaces and RESTful Web Services**](http://www.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-phpday11-20110514)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:56:19.040

RESTful 方式是将数据表示为资源，而不是请求的参数：

```
example.com/distribution/123/20030102/1A;1B;1C 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T21:29:55.500

当您考虑 RESTful 时，大多数时候您还应该考虑 CRUD。

```
example.com/request/distribution?acct=123&date=20030102&distcode=1A;1B;1C 
```

GET-Request 可以显示某些内容（CRUD 中的 R）。

但是您认为 CUD-Parts 的 URL 是什么？

# command-line - 通过命令行将安装的 TrueCrypt 卷列出到标准输出？

> ID：11386375
> 
> 赞同：1
> 
> 时间：2012-07-08T20:19:45.437
> 
> 标签：command-line, stdout, truecrypt

有谁知道通过命令行将已安装的 TrueCrypt 卷列出到标准输出的方法？

下面的页面建议 --list 选项将在 *nix 版本中执行此操作，但我找不到任何方法可以在 Windows 上执行此操作。

[http://www.irongeek.com/i.php?page=backtrack-3-man/truecrypt](http://www.irongeek.com/i.php?page=backtrack-3-man/truecrypt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T11:21:56.447

I faced with same question and found solution, use forward slash symbol. Example [here](https://superuser.com/questions/502552/truecrypt-drive-letter-not-available)

In addition use "/help" key. Hope this helps you.

# php - 使用 PHP 检测所有链接（包括那些不去文件的链接）

> ID：11386377
> 
> 赞同：1
> 
> 时间：2012-07-08T20:20:01.590
> 
> 标签：php, hyperlink

我正在尝试检测断开的链接。以下 PHP 访问 MySQL 表似乎对几乎所有东西都很好（但由于 fopen 很慢）：

```
function fileExists($path){    
    return (@fopen($path,"r")==true); 
}
$status="";
$result = mysql_query(" SELECT id, title, link from table ");  
while ($row = mysql_fetch_array($result)) {
    $id=$row{'id'};
    $title=$row{'title'};
    $link1=$row{'link1'};
    etc.   
    if ($link){
        if (fileExists($link)!=TRUE) {
            $status='BROKEN_LINK';  
        }
    }
    //Here do something if the status gets set to broken
} 
```

但问题是这样的链接：

torrentfreak.com/unblocking-the-pirate-bay-the-hard-way-is-fun-for-geeks-120506

在这里，它不是去文件，而是去某个地方并获取内容。那么，当这些情况不在您自己的域中时，正确检测这些情况的最佳方法是什么？

谢谢！

莫达克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:42:09.660

您可以尝试使用 cURL 方法：

```
function fileExists(&$pageScrape, $path){ // Adding parameter of cURL resource as a pointer.
    curl_setopt($pageScrape, CURLOPT_URL, $path); // Set URL path.
    curl_setopt($pageScrape, CURLOPT_RETURNTRANSFER, true); // Don't output the scraped page directly.
    curl_exec($pageScrape); // Execute cURL call.
    $status = curl_getinfo($pageScrape, CURLINFO_HTTP_CODE); // Get the HTTP status code of the page, load into variable $status.
    if ($status >= 200 && $status <= 299) { // Checking for the page success.
        return true; 
    } else {
        return false;
    }
}

$pageScrape = curl_init();

$status="";
$result = mysql_query(" SELECT id, title, link from table ");  
while ($row = mysql_fetch_array($result)) {
    $id=$row{'id'};
    $title=$row{'title'};
    $link1=$row{'link1'};
    etc.   
    if ($link){
        if (fileExists($pageScrape, $link)!=TRUE) {
            $status='BROKEN_LINK';  
        }
    }
    //Here do something if the status gets set to broken
}
curl_close($pageScrape); 
```

您可以通过查看 HTTP 状态代码列表来微调状态检查：[Wikipedia link](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

# mysql - 在 My-Sql 上构建 pre-desc 行表以进行更快的搜索查询

> ID：11386384
> 
> 赞同：2
> 
> 时间：2012-07-08T20:21:29.543
> 
> 标签：mysql

我正在尝试在 My-Sql 数据库上进行更快的搜索查询。

我在`BOOKMARK`表中有 800,000 行。

当我使用此查询运行时

```
SELECT * FROM `BOOKMARK` WHERE `topic` = 'Apple'
Showing rows 0 - 29 ( 501 total, Query took 0.0008 sec) 
```

这该死的快！

我对每一行都有总分，想先找到一个好的。

```
SELECT * FROM `BOOKMARK` WHERE `topic` = 'Apple' ORDER BY total DESC
Showing rows 0 - 29 ( 501 total, Query took 0.4770 sec) [b_total: 9.211558703193814 - 1.19674062055568] 
```

现在是0.5秒！！

这对我来说是个大问题。

这是表信息。

```
* There are 20,000 different topics in this table.
* total number exist between 0-10
* The server calculate total points once a day. 
```

我在想，如果表格按每个主题的总数排序，则搜索查询不必包含“ORDER BY total DESC”。

如果表每天检查一次订单，将节省大量时间。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:14:37.813

这很简单。

我使用 PhpMyAdmin 并更改了操作菜单上的设置。

如下图。

![在此处输入图像描述](../Images/e1f586fb7a6e5654b30a4cad38b7a58a.png)

在这之后，

```
SELECT * FROM `BOOKMARK` WHERE `topic` = 'Apple' 
```

我运行了这个查询并向我展示了总值 DESC 的结果。

完美的！！

# android - 主题不适用于模拟器设备

> ID：11386388
> 
> 赞同：0
> 
> 时间：2012-07-08T20:21:52.127
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-theme

我有一个活动和一个布局应用程序。我正在实现 ActionBarSherlock，但我的主题不适用于我的模拟器/早期设备。

我的主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- the theme applied to the application or activity -->
    <style name="CustomActivityTheme" parent="Theme.Sherlock">
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <!-- other activity and action bar styles here -->
    </style>

    <!-- style for the action bar backgrounds -->
    <style name="MyActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="android:backgroundSplit">#4200ff</item>
        <item name="android:backgroundStacked">#4200ff</item>
        <item name="android:background">#4200ff</item>
    </style>

</resources> 
```

这会导致我的 JellyBean 设备上的 ActionBar 变成蓝色，但在我的 2.2 模拟器上它保持黑色。

这是我的 manifest.xml 中的一段：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomActivityTheme"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:26:56.257

在 Android 3.0 及更高版本中，您可以将主题分配给项目名称`android:actionBarStyle`。但是在 2.3 和更早的版本中没有 Action Bar，所以你不能使用带有 name 的 item `android:actionBarStyle`。为了修复这个 ActionBarSherlock 已经定义了它自己的项目名称，只是`actionBarStyle`没有 android 前缀。
所以你的代码应该是这样的

```
<!-- the theme applied to the application or activity -->
<style name="CustomActivityTheme" parent="Theme.Sherlock">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="actionBarStyle">@style/MyActionBar</item>
    <!-- other activity and action bar styles here -->
</style>

<!-- style for the action bar backgrounds -->
<style name="MyActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="android:backgroundSplit">#4200ff</item>
    <item name="android:backgroundStacked">#4200ff</item>
    <item name="android:background">#4200ff</item>
</style> 
```

# javascript - 在 Firefox 中获取边框样式

ID：11386389

赞同：0

时间：2012-07-08T20:22:04.773

标签：javascript, jquery, firefox

# ruby-on-rails - ActiveRecord Time Comparisons in Rails

> ID：11386390
> 
> 赞同：0
> 
> 时间：2012-07-08T20:22:13.697
> 
> 标签：ruby-on-rails, sqlite, activerecord, time

I am trying to write some scopes that are meant to pull events for future, past, and current events from my sqlite database. Here are the scopes I have set in my Event model with their accompanying predicate methods:

```
 scope :upcoming, where("start_at >= :time", time: Time.current ).order('start_at asc')
  scope :recent, where("end_at <= :time", time: Time.current ).order('end_at desc')
  scope :current, where("start_at <= :time AND end_at >= :time", time: Time.current ).order('start_at asc')

  def upcoming?
    start_at.future?
  end

  def recent?
    end_at.past?
  end

  def current?
    end_at.future? && start_at.past?
  end 
```

And here are the results I'm getting from my rspec tests

```
 is in the future
    should be upcoming
    should not be recent
    should not be current
    should be in upcoming
    should not be in recent (FAILED - 1)
    should not be in current (FAILED - 2)
  is in the past
    should not be upcoming
    should be recent
    should not be current
    should not be in upcoming
    should be in recent (FAILED - 3)
    should not be in current
  is happening now
    should not be upcoming
    should not be recent
    should be current
    should not be in upcoming
    should not be in recent
    should be in current (FAILED - 4) 
```

As you can see the predicate method tests run fine once the dates are pulled from the database, but when actually querying the database things go haywire.

Here is the rspec I'm running to test it(I'm a little bit new to it, so there might be some issues here, but I have seen the scopes failing with manual testing as well):

```
 let(:future) { Event.create(start_at: start_time, end_at: end_time ) }
  let(:past) { Event.create(start_at: start_time, end_at: end_time ) }
  let(:happening) { Event.create(start_at: start_time, end_at: end_time ) }

  context "#upcoming?" do
    it { should respond_to(:upcoming?) }
  end
  context "#recent?" do
    it { should respond_to(:recent?) }
  end
  context "#current?" do
    it { should respond_to(:current?) }
  end

  context "is in the future" do
    subject(:event) { future }
    let(:start_time) { Time.now + 1.minute }
    let(:end_time) { Time.now + 1.minute + 1.second }
    it { should be_upcoming }
    it { should_not be_recent }
    it { should_not be_current }
    it "should be in upcoming" do
      Event.upcoming.should include(event)
    end
    it "should not be in recent" do
      Event.upcoming.should_not include(event)
    end
    it "should not be in current" do
      Event.upcoming.should_not include(event)
    end
  end

  context "is in the past" do
    subject(:event) { past }
    let(:start_time) { Time.now - 1.minute }
    let(:end_time) { Time.now - 1.minute + 1.second }
    it { should_not be_upcoming }
    it { should be_recent }
    it { should_not be_current }
    it "should not be in upcoming" do
      Event.upcoming.should_not include(event)
    end
    it "should be in recent" do
      Event.upcoming.should include(event)
    end
    it "should not be in current" do
      Event.upcoming.should_not include(event)
    end
  end

  context "is happening now" do
    subject(:event) { happening }
    let(:start_time) { Time.now - 1.minute }
    let(:end_time) { Time.now + 1.minute }
    it { should_not be_upcoming }
    it { should_not be_recent }
    it { should be_current }
    it "should not be in upcoming" do
      Event.upcoming.should_not include(event)
    end
    it "should not be in recent" do
      Event.upcoming.should_not include(event)
    end
    it "should be in current" do
      Event.upcoming.should include(event)
    end
  end 
```

Any idea on what's going wrong? I've tried several variants of `Time.current` And they all produce similar results.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:29:41.493

正如@jdoe 在他的评论中所说，您必须使用 lambda 来避免 Time.current 仅被获取一次。

# android - 以编程方式关闭 android 应用程序

> ID：11386394
> 
> 赞同：8
> 
> 时间：2012-07-08T20:22:44.077
> 
> 标签：android

如何以编程方式关闭我的应用程序？

我用了

```
 finish(); 
```

或者

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

或者

```
System.exit(0); 
```

或者

```
moveTaskToBack(true); 
```

但它关闭了当前正在运行的活动，但我需要关闭整个应用程序？？

我需要关闭应用程序以检索一些内存，然后再次重新启动应用程序。

或者

有没有办法清除应用程序的所有内存？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T11:25:58.113

在您的活动中使用这些行：-

```
this.finish();
Process.killProcess( Process.myPid() ); 
```

将杀死您的整个应用程序（假设它在单个进程中运行）它还将释放任何相关的内存。

警告：在某些手机上，如果您正在使用它们，这样做可能会使蓝牙插座悬空。

# android - Android memory model/map What does it look like and how is it used?

> ID：11386395
> 
> 赞同：1
> 
> 时间：2012-07-08T20:22:47.083
> 
> 标签：android, memory

A general question to make sure I understand or not the memory in an Android Phone. You have the OS using memory (FLASH/ROM) which is usually partitioned as either a .5,1,2,4GB depending on the phone. The developer doesnt have access to this unless rooted.

That OS partition is carved from an on board FLASH of lets say from 8GB. From that 8GB a partition is set aside for apps/apks... maybe from one to two GB. The remainder is set aside as DATA storage area in the FLASH for the user to store whatever and where the UserPrefs get stored.

Question one. As an application is running various objects/items get created and accessed and possible written thousands/millions of times. FLASH is too slow for this so there has to be some RAM that comes into play. Is that the 16MB number I see talked about? Is this where cache is?

Question Two. I have routines/methods that tell me external SD free available and I have routine that seems to show FLASH/ROM available for app storage. But I see another number being displayed in settings that mentions RAM. How do I find how much is available?

Question three: My goal is to store a handful of 500k images , first check to see if SD is available and writable store there. If not store internally until an SD card can be mounted (if can be). If there is a RAM area how do I access it and tell if I have enough room to store temporarily?

```
 My current understanding of Android internal memory layout/map/arrangement
  8GB FLASH/ROM installed.
   OS partition uses 1GB
   App/Apks storage uses 2GB
   Data Storage uses remainder 4.5GB, SQlite Db is store here.

   RAM is where??
   Cache is where?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:00:30.073

The 16MB number is probably just the heap space that is allocated to an app. Not the RAM that the device has. Just with a quick search on SO, I've found [Android Heap Size on Different Phones](https://stackoverflow.com/questions/5350465/android-heap-size-on-different-phones-and-os-versions) and [How To Check Availability of External Storage Space](https://stackoverflow.com/questions/3163045/android-how-to-check-availability-of-space-on-external-storage)

# java - String 的 toString() 方法有什么实际用途吗？

> ID：11386398
> 
> 赞同：20
> 
> 时间：2012-07-08T20:22:58.913
> 
> 标签：java, string, tostring

我正在阅读[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toString%28%29)并注意到它。从来没有想过。说明：

> 这个对象（它已经是一个字符串！）本身被返回。

除了填充约定或使用计算资源之外，`.toString()`Java 中的 a`String`对使用`String`自身不会做的 a 做了什么？为什么它不简单地继承`.toString()`from 类`java.lang.Object`？

编辑：

我知道在多态的情况下，`toString()`必须存在自己的方法，因为它会覆盖其父级的`toString()`. 在第一个问题中我想知道的是，在使用`stringVariable`/`"String value"`和使用`stringVariable.toString()`/之间是否存在任何不同的情况`"String value".toString()`。

前任。gr.：输出操作，`System.out.println(stringVariable.toString());`如`stringVariable = "String value".toString();`.

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-08T20:26:33.920

> 除了填充约定或使用计算资源之外，Java 中的 .toString() 对使用 String 本身不会的 String 做了什么？

这意味着它在多态调用时会给出适当的结果。

> 为什么它不简单地从类 java.lang.Object 继承 .toString()？

因为那不会给出相同的结果，而且几乎可以肯定不是*预期*的结果。

`Object.toString()`旨在提供对象的合理有用的字符串表示。该`Object`实现提供了有关类型和值的信息，可用于粗略的身份提示（诊断上有用，但仅此而已）。这显然*不是*字符串最有用的字符串表示形式——字符串本身就是。

虽然我*会*说遗憾的`toString`是，它的定义非常模糊（不清楚结果是用于机器、开发人员还是用户消费），但对我来说很明显 a`String`会在实现中返回自身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-21T13:04:38.170

实际例子：

```
public abstract class MetadataProcessor {

protected void processMetadata() {    
   Map<String, Object> metadata = getMetadata();
   for(String key : metadata.keySet()) {
      if(metadata.get(key) instanceof Date) {
      processDate(metadata.get(key));
   } else { //String or any other object type
      processString(metadata.get(key).toString());
   }
}

private void processDate(Date date) {
   (...)
}

private void processString(String string) {
   (...)
}

/**
* contains document's metadata, values must be String or Date
**/
protected abstract Map<String, Object> getMetadata();
} 
```

如果 String 的 .toString() 不会返回 String 本身，则`if(foo instanceof String)`在上面的代码中需要额外的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-01T03:05:43.497

```
public final class String
extends Object
implements Serializable, Comparable<String>, CharSequence 
```

请参阅：[https ://docs.oracle.com/javase/10/docs/api/java/lang/String.html](https://docs.oracle.com/javase/10/docs/api/java/lang/String.html)

所有对象都有`toString()`方法（请参阅[https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#toString()](https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#toString())）。`String`是一种对象，因此，它还需要一个方法`toString()`来实现其基类中的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-23T18:47:07.283

显然是旧的，但另一个避免 (foo instanceof String) 需要的答案是在处理泛型时。

获取每个对象的字符串表示会很烦人，但是字符串是一个奇怪的人，需要额外的代码才能获得相同的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-17T05:11:52.553

在java中实现`toString`方法是通过覆盖`Object`'`toString`方法来完成的。`toString()`当我们需要对象的字符串表示时，使用java方法。它是在`Object`类中定义的。可以重写此方法以自定义`String`.`Object`

# antlr - AST tree in antlr. Can I add a state object to it?

> ID：11386399
> 
> 赞同：0
> 
> 时间：2012-07-08T20:23:03.477
> 
> 标签：antlr, antlr3

Right now, we have code that translates from one AST tree to their own tree. I would prefer to get rid of this second tree(it is hard enough to understand one tree, let alone two when you join a project as trees are complex as it is). One of the reasons for this is stuff was looked up on the tree walk.

I am wondering instead if during the tree walk, I could somehow add state to CommonTree that has the lookup information?

What I would like to see is something like this

```
CommonTree tree = parent.getChildren().get(0);
tree.setState(myMapOrObjectState); 
```

This allows me to attach state to some nodes where it is needed before I pass to plugins. Right now, I have this ugly recreate the whole tree and wrrap the AST tree :(.

thanks, Dean

# clojure - Why isn't a Clojure function that consists solely of lazy function calls lazy as well?

> ID：11386401
> 
> 赞同：5
> 
> 时间：2012-07-08T20:23:08.730
> 
> 标签：clojure, functional-programming, lazy-evaluation

The Clojure function

```
(reductions + 0 (cycle [1 1 -1])) 
```

produces a sequence [0 1 2 1 2 3 2 3 4 3 4 5 ...]. Unfortunately, this sequence isn't lazy.

As [`cycle`](http://clojuredocs.org/clojure_core/clojure.core/cycle) and [`reductions`](http://clojuredocs.org/clojure_core/clojure.core/reductions) are both documented as returning lazy sequences, I expected this combination of those functions to return a lazy sequence as well. Why doesn't it and how can I fix it to return the sequence lazily?

A more complex example that shows the same problem:

```
(reductions (fn [x f] (f x)) 0 (cycle [inc inc dec])) 
```

(I show this, because this is the kind of version I would like to have working in the end, in case that makes any difference)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T20:59:30.713

> Unfortunately, this sequence isn't lazy.

Oh, yes, it is. We can quickly check that it is lazy by taking its first 10 elements:

```
(take 10 (reductions + 0 (cycle [1 1 -1]))) 
```

This very quickly returns an answer, which proves the sequence is lazy. Were the function not lazy, it would try to realize all the elements in the infinite sequence, and would blow the memory, or hang in an infinite loop.

What happens is that you're typing this func in the REPL, which tries to realize the sequence before showing it to you.

**Edit:** Use this tip to [stop infinite loops](https://stackoverflow.com/a/5119392/15649) if you ever found that you've triggered one or accidentally tried to realize an infinite seq.

# objective-c - 在异步 HTTP 请求的 completionHandler 中更新视图时出现延迟

> ID：11386403
> 
> 赞同：3
> 
> 时间：2012-07-08T20:23:15.200
> 
> 标签：objective-c, ios, nsurlconnection, uialertview

在我的应用程序中，当用户按下按钮时，我启动 HTTP 异步请求（使用`[NSURLConnection sendAsynchronousRequest...]`）并更改块`UILabel`中的文本`completionHandler`。但是，此更改不会在请求结束时发生，而是在大约 2-3 秒后发生。下面是导致此行为的代码片段。

```
- (IBAction)requestStuff:(id)sender 
{
    NSURL *url = [NSURL URLWithString:@"http://stackoverflow.com/"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];

    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:
     ^(NSURLResponse *response, NSData *data, NSError *error) 
     {
         NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;          
         exampleLabel.text = [NSString stringWithFormat:@"%d", httpResponse.statusCode];
     }];    
} 
```

当我尝试`UIAlertView`在`completionHandler`.

```
- (IBAction)requestStuff:(id)sender 
{
    NSURL *url = [NSURL URLWithString:@"http://stackoverflow.com/"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];

    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:
     ^(NSURLResponse *response, NSData *data, NSError *error) 
     {
         NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response; 

         if ([httpResponse statusCode] == 200) {
             UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"It worked!" 
                                                             message:nil
                                                            delegate:nil 
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
             [alert show];
             [alert release];
         }
     }];    
} 
```

但是，一个小的区别`[alert show]`是执行时屏幕会变暗。警报本身仅在 2-3 秒后出现，就像在前面的场景中一样。

我猜这与应用程序线程如何处理 UI 有关，但我不确定。任何有关延迟发生原因的指导将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T20:52:31.833

根据[苹果文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/AboutThreads/AboutThreads.html#//apple_ref/doc/uid/10000057i-CH6-SW18)。

> **线程和您的用户界面**
> 
> 如果您的应用程序具有图形用户界面，建议您从应用程序的*主线程*接收与用户相关的事件并启动界面更新。**这种方法有助于避免与处理用户事件和绘制窗口内容相关的同步问题**。一些框架，例如 Cocoa，通常需要这种行为，但即使对于那些不需要这种行为的框架，将这种行为保留在主线程上具有简化管理用户界面的逻辑的优势。

在主线程上调用你的 UI 更新可以解决这个问题。调用主线程（如下）围绕您的 UI 代码。

```
dispatch_async(dispatch_get_main_queue(), ^{
   exampleLabel.text = [NSString stringWithFormat:@"%d", httpResponse.statusCode];
}); 
```

还有其他方法可以在主线程上进行调用，但使用更简单的 GCD 命令就可以完成这项工作。再次，请参阅[线程编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/AboutThreads/AboutThreads.html#//apple_ref/doc/uid/10000057i-CH6-SW18)了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T20:37:05.613

这可能会发生，因为所有 UI 内容都应该在主队列中调用。试试这个：

```
- (IBAction)requestStuff:(id)sender 
{
    NSURL *url = [NSURL URLWithString:@"http://stackoverflow.com/"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];

    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:
     ^(NSURLResponse *response, NSData *data, NSError *error) 
     {
         NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;          

         dispatch_async(dispatch_get_main_queue(), ^{
             exampleLabel.text = [NSString stringWithFormat:@"%d", httpResponse.statusCode];
         });
     }];    
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T20:47:23.597

您可以尝试创建一个设置文本的方法，并在您调用的块内：

```
 [self performSelectorOnMainThread:@selector(mySelector) withObject:nil waitUntilDone:NO]; 
```

选择器将在主线程上调用和执行。希望这有帮助....

# java - 我认为java接口可以包含一个子类，但可能不在ActionListener中......对吗？

> ID：11386406
> 
> 赞同：1
> 
> 时间：2012-07-08T20:23:41.720
> 
> 标签：java, swing, actionlistener

这个问题可能与我怀疑的不同，但我认为问题是我在学习接口时读错了，或者它在动作侦听器内部的应用不同。

首先，这是我的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: javax.swing.JButton cannot be cast to main.GUI
    at main.GUI$3.actionPerformed(GUI.java:224)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我正在使用的代码如下：

```
this.select.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                ((GUI) e.getSource()).tool = new Selection();
            }
        }); 
```

我有一个名为 tool 的接口，我将它作为一个全局变量 Tool 工具；对于 GUI 类。然后我尝试在上面的方法中将 Selection 类分配给实现 Tool 的 var 工具。我做错了什么，我该如何解决？如果您需要更多代码，请询问。

此外，当我将新的 Selection() 分配给 ActionListener 之外的全局 var 工具时，它可以工作......所以这就是我不明白的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:24:57.103

关于

> 我认为 java 接口可以包含一个子类，但可能不在 ActionListener 中……对吗？

不，这与您的问题无关。相反，您的问题是纯粹而简单的错误转换。返回的对象`e.getsource()`不是 GUI 对象，而是一个 AbstractButton，可能是一个 JButton（它是名为“select”的变量）。添加了 ActionListener 的组件是由`ActionEvent#getSource()`.

另外，我看不到您在哪里有一个在任何地方都有一个子类的接口。

你能做到吗？：

```
 this.select.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            tool = new Selection(); //??
        }
    }); 
```

很难说你应该做什么，因为我们真的不知道你的其余代码的结构是什么样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T20:49:11.147

> 我在工具栏内有按钮。

使用[此处](https://stackoverflow.com/a/4039359/230513)[`Action`](http://download.oracle.com/javase/tutorial/uiswing/misc/action.html)所示的 来封装功能。

# java - Executing a command from java code

> ID：11386408
> 
> 赞同：3
> 
> 时间：2012-07-08T20:23:56.400
> 
> 标签：java, maven, command, dos, processbuilder

Hi I want to execute this command from java code :

```
cd C:/Users/Amira/junoWorkspace/TestProjectUI
mvn -Dtest=MyClassTest.java test 
```

So I found this method but i didn't find a way to adapt it to my case :

```
 public static void main(String[] args) throws IOException
    {
            try
            {
                    // Runtime runtime = Runtime.getRuntime();
                   String[] cmd={"C:\\WINDOWS\\System32\\cmd.exe","/C start test.bat"};
                    Process p = Runtime.getRuntime().exec(cmd);
            // TODO code application logic here
            }
            catch(IOException e)
            {
                System.err.println("echec de l'execution du script: "+e);
                System.exit(1);
            }
    } 
```

Any idea ? Cheers

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:31:24.587

您正在寻找的是[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)允许您设置工作目录等参数，它还允许多个参数，请查看[此处](http://www.xyzws.com/Javafaq/how-to-run-external-programs-by-using-java-processbuilder-class/189)和[此处](http://www.java2s.com/Code/Java/Development-Class/ProcessBuilder.htm)以及[ProcessBuilder Demo](http://0guzhan.blogspot.com/2011/01/process-builder-demo.html)以获取有关如何使用它的一些示例

# mysql - SQL查询打破月末的预订日期？

> ID：11386416
> 
> 赞同：1
> 
> 时间：2012-07-08T20:25:00.957
> 
> 标签：mysql, sql, date, datetime

我正在使用自定义 PHP 函数来生成**一个月**的可视日历，该日历根据包含开始日期和持续时间的表阻止日期 - 例如：

![日历示例](../Images/09ee7c9bc94331923894f5c8ff0f4e26.png)

...这是由数据产生的，该表应从 14 日起封锁 4 天，从 27 日起封锁 7 天。

查询看起来像这样：

```
 SELECT GROUP_CONCAT(DATE_FORMAT(start_date,'%d'),':', event_duration) AS info
    FROM events
   WHERE YEAR(start_date = '2012'
     AND MONTH(start_date) = '07'
ORDER BY start_date 
```

（您可以放心地忽略组 concat 并将数据作为单独的行返回，这并不重要）。

我正在寻找对查询的修改，如果事件在上个月开始，它将阻止月初的日期，但它的长度将其纳入以下。

例如 - 在上面的示例中，27 日的事件实际上计划在数据库中持续 7 天，所以如果我运行查询，`MONTH(start_date) = '08'`我想说前两个日期被屏蔽，他们目前不会是，因为会阻止它的开始日期不在选择的月份。

我相当确定那里有一个子查询或其他东西来获取行，但我就是想不出来。有接盘侠吗？

***编辑***

下面萨尔曼的回答指出了我想去的方向，我想出了这个方法来获取上个月的结转，以显示为当月的“第一天”以及剩余天数：

```
SELECT IF(MONTH(start_date) < '08', '2012-08-01', start_date) AS starter, 
       IF(MONTH(start_date) < '08', duration - DATEDIFF('2012-08-01',start_date), duration) AS duration
FROM EVENTS
WHERE YEAR(start_date) = '2012'
AND (MONTH(start_date) = '08' OR MONTH(start_date + INTERVAL duration DAY) = '08') 
```

显然有很多变量要在 PHP 中替换，所以也许有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:31:39.140

**原答案**：

假设有问题的月份是`2012-07`，您需要以下查询：

```
 SELECT column1, column2, columnN
   FROM `events`
  WHERE `start_date` <= '2012-07-01' 
    AND `start_date` + INTERVAL `duration` DAY > '2012-07-01'
ORDER BY start_date 
```

**修改后的答案**：

显然，您需要一个检查重叠（或冲突）日期的查询。示例日期已过`2012-07-01`，`2012-08-01`查询为：

```
 SELECT *
    FROM events
   WHERE '2012-08-01' > start_date
     AND start_date + INTERVAL duration DAY > '2012-07-01'
ORDER BY start_date 
```

要限制开始日期和时间间隔，您可以使用`SELECT ... CASE`语句：

```
SELECT
CASE 
    WHEN start_date < '2012-07-01' THEN '2012-07-01' 
    ELSE start_date
END AS start_date_copy,
CASE 
    WHEN start_date < '2012-07-01' THEN duration - DATEDIFF('2012-07-01', start_date)
    ELSE duration 
END AS duration_copy,
FROM ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:19:33.113

我正在寻找的答案，感谢其他贡献者为我指出正确的方向并使我能够解决它！

这是基于来自 PHP 的 $yyyy 和 $mm （在我的情况下，进入函数调用），并选择单个行而不是分组：

```
SELECT start_date, duration
FROM reservations
WHERE YEAR(start_date) = '".$yyyy."'
AND  MONTH(start_date) = '".$mm."'

UNION

SELECT '".$yyyy."-".$mm."-01',
duration - DATEDIFF('".$yyyy."-".$mm."-01',start_date)
FROM reservations
WHERE YEAR(start_date) = '".$yyyy."'
AND MONTH(start_date) < '".$mm."'
AND MONTH(start_date + INTERVAL duration DAY) = '".$mm."'

ORDER BY start_date 
```

# c++ - 错误 C2679：二进制“=”：未找到采用“Set”类型的右侧操作数的运算符 '

> ID：11386419
> 
> 赞同：-3
> 
> 时间：2012-07-08T20:25:39.740
> 
> 标签：c++, struct

我阅读了与此错误相关的六个论坛主题，其中大多数是由于字符串声明，其余与此问题无关。

此错误出现在接受输入字符串的程序中，将其与字符串列表进行比较，然后返回接近匹配的字符串。这个简单的解释就是要点，实际的实现还有更多的意义。

在编译和工作的测试实现中，我使用了这行代码

```
Set<Lexicon::CorrectionT> matches = lex.suggestCorrections(line, maxDistance); 
```

Set 是我从 CS106B 课程中重用的一个类（使用 bst 类），而 Lexicon 是我编写的课程中的另一个类，现在正在为一个不相关的项目重用。该函数`suggestCorrections`接受一个字符串`line`和一个编辑距离，然后比较该字符串并返回一个`Set`建议。

我将这一行修改为

```
matchSet.corrections = lex.suggestCorrections(matchSet); 
```

通过`CorrectionT`在 a 中定义更正`Lexicon::MatchesT matchSet`并`matchSet`在前面的函数中定义，然后将其作为参考传递。`MatchesT`包含 和 的`line`字段 `maxDistance`。

据我所知，除了我使用的方法之外，这两行代码是相同的。

那么，为什么我会收到此错误“错误 C2679：二进制 '='：未找到采用 'Set' 类型的右手操作数的运算符”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:36:46.920

> 据我所知，这两行代码除了我使用的方法外是相同的。

不，它们完全不同。一个实例化一个新对象，调用 的复制构造函数`Set<Lexicon::CorrectionT>`；另一个将右边的对象复制到左边的（已经创建的）对象，调用赋值运算符，由于某种原因，它不可用。

实施了`Set<>`吗？什么类型是`matchSet.corrections`什么返回类型有`suggestCorrections`什么？

# mysql - 将 2 个 SQL 查询合二为一

> ID：11386428
> 
> 赞同：1
> 
> 时间：2012-07-08T20:26:38.597
> 
> 标签：mysql, sql

我有一个文章表，其中包含我网站的所有文章。

设计看起来像这样：

```
id | user_id | name | date 
```

我还有一个关注者表，其中包含每篇文章之后的所有关注者

它的设计是这样的：

```
id | article_id | user_id | date 
```

目前我有一个 SQL 查询，它为我带来了按日期排序的 50 篇文章

```
SELECT id,user_id,name,date
FROM articles
ORDER BY date
LIMIT 50 
```

我还有一个查询，显示一篇文章的 50 位关注者

```
SELECT id, article_id, user_id, date
FROM followers
WHERE article_id = 5
LIMIT 50 
```

我怎样才能进行这个查询，这样我就不必调用 2 个查询，因为我发现它没用并且可能需要更多时间来加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:41:54.457

试试这个解决方案：

```
SELECT a.*, b.*
FROM
(
    SELECT *
    FROM articles
    ORDER BY date
    LIMIT 50
) a
INNER JOIN
(
    SELECT aa.*
    FROM followers aa
    LEFT JOIN followers bb ON aa.article_id = bb.article_id AND aa.id < bb.id
    GROUP BY aa.id
    HAVING COUNT(1) < 50
) b ON a.id = b.article_id 
```

这将获得 50 篇最旧的文章以及每篇文章的 50 个最新关注者。

* * *

**它也非常灵活：**

*更改`aa.id < bb.id`以`aa.id > bb.id`获取 50 个第一批关注者。*

*更改`ORDER BY date`以`ORDER BY date DESC`获取最新的 50 篇文章。*

*更改`LIMIT n`where`n`表示您要检索的文章数量。*

*更改`HAVING COUNT(1) < n`where`n`代表您希望在每篇文章中检索的关注者数量。*

您可以将所有四个混合起来，以方便您想要的任何组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:31:14.370

```
SELECT a.id, a.user_id, a.name, a.date, f.id, f.article_id, f.user_id, f.date 
FROM articles a, followers f 
WHERE f.article_id = 5 
ORDER BY a.date 
LIMIT 50 
```

# c++ - C++ 预处理器 + 检测对象类型和新操作

> ID：11386432
> 
> 赞同：0
> 
> 时间：2012-07-08T20:27:02.697
> 
> 标签：c++, c-preprocessor, decltype

我目前在我的代码中有这个。

```
template<typename T1> class MONEYTRANSFER {
  SOURCEACCOUNT<T1, MONEYTRANSFER> *SourceAccount;               // Line 2
  MONEYTRANSFER(T1 *src) {
    SourceAccount = new (src) SOURCEACCOUNT<T1, MONEYTRANSFER>;  // Line 4
  }
}; 
```

虽然我知道这不是那么混乱，但我想至少尝试让它看起来更好一点。

是否可以更改第 2 行，以便通过知道它属于哪个类来自动检测“MONEYTRANSFER”？

是否可以在第 4 行使用预处理器。所以我可以输入`bind(src, SourceAccount);`- 无需输入`SourceAccount (SOURCEACCOUNT<T1, MONEYTRANSFER>)`新操作的类型。

我试过`decltype`但没有运气？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:42:45.560

我会用一个基类 mixin 来解决它：

```
template<typename T1, typename T2> class WithSourceAccount
{
  protected:
    SourceAccount<T1, T2>* m_SourceAccount;
    WithSourceAccount(T1* src) 
        : m_SourceAccount(new (src) SourceAccount<T1, T2>())
        { }
};

template<typename T1>
class MoneyTransfer : WithSourceAccount<T1, MoneyTransfer>
{
}; 
```

# objective-c - 如何处理屏幕底部的滑动手势

> ID：11386438
> 
> 赞同：1
> 
> 时间：2012-07-08T20:27:31.063
> 
> 标签：objective-c, ios

我有一个具有三个屏幕的应用程序，当用户从 ipad 屏幕底部向上滑动时，我想显示和隐藏一个小的 uiview。我知道这不能通过正常的滑动手势来解决。我想知道你能否告诉我如何处理这些滑动手势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:32:21.837

将 UIPanGestureRecognizer 添加到您的视图中。

```
-(void) panDetected:(UIGestureRecognizer *) gesture 
{    
    BOOL fromBottom = NO;
    CGPoint loc = [gesture locationInView:self.view];

    if(gesture.state == UIGestureRecognizerStateBegan)
    {                  
       if(loc is somewhere in the bottom of view)
            fromBottom = YES;
    }
    else if(gesture.state == UIGestureRecognizerStateChanged)
    {
        // You can up your view with finger movement here

    }
    else if(gesture.state == UIGestureRecognizerStateEnded)
    {

    }
} 
```

# java - 关于改进这个简单的 Java 对象池类的建议？

> ID：11386439
> 
> 赞同：5
> 
> 时间：2012-07-08T20:27:35.053
> 
> 标签：java, android, pool

我目前正在为 android 编写一个游戏，其中有敌人飞过屏幕然后消失，被其他敌人取代。现在，这种情况发生得非常快，我的代码目前执行了大量的内存分配和释放来创建和删除这些敌人对象，所以我正在尝试找到一种优化它的方法。我从一本关于 android 游戏开发的书中得到了这个 Pool 类的实现：

```
public class Pool<T> {
    public interface PoolObjectFactory<T> {
        public T createObject();
    }
    private final List<T>               freeObjects;
    private final PoolObjectFactory<T>  factory;
    private int                         maxObjects;

    public Pool(PoolObjectFactory<T> factory, int maxObjects) {
        this.maxObjects = maxObjects;
        this.factory = factory;
        freeObjects = new ArrayList<T>(maxObjects);
    }

    public T newObject() {
        T object = null;
        if (freeObjects.isEmpty()) {
            object = factory.createObject();
        } else {
            object = freeObjects.remove(freeObjects.size() - 1);
        }
        return object;
    }

    public void free(T object) {
        if (freeObjects.size() < maxObjects) freeObjects.add(object);
    }
} 
```

现在，使用这个类的方法如下：

```
PoolObjectFactory<Enemy> factory = new  PoolObjectFactory<Enemy>() { 
    public Enemy createObject() { 
        return  new  Enemy(); 
    } 
}; 
Pool<Enemy> enemyPool = new  Pool<Enemy>(factory, 50); 
```

此方法的明显问题是您不能向 createObject() 方法输入任何参数，从而迫使您使用在其构造函数中不带参数的类。这将迫使我重写很多代码，因为我使用的 Enemy 类需要几个不同的参数。我可以想到几个解决方法，比如这个：

```
PoolObjectFactory<Enemy> factory = new  PoolObjectFactory<Enemy>() { 
    public Enemy createObject(Object... args) { 
        return  new  Enemy((Float)args[0], (Float)args[1]); 
    } 
}; 
Pool<Enemy> enemyPool = new  Pool<Enemy>(factory, 50); 
```

但是更新容易出错且烦人。我也可以在 createObject() 方法中使用虚假值初始化 Enemy 对象，然后稍后手动设置它们，或者我可以为每个对象创建一个 Pool 类，但我真的不希望这样做。

有关如何改进此代码的任何建议？Java 游戏开发人员如何处理池化对象以避免垃圾收集？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:42:08.467

1) 您应该覆盖 PoolObjectFactory 中的 createObject 函数。

2) 您将需要一个 initialize() 函数来实际设置每个 EnemyObject 的参数。只需让 EnemyObject 的构造函数调用初始化函数即可。然后，当您从池中取出对象时，您应该只使用您的参数调用初始化，它应该可以正常工作。

# android - FileWriter没有写入Android中的文件？

> ID：11386441
> 
> 赞同：4
> 
> 时间：2012-07-08T20:27:42.267
> 
> 标签：android, filewriter

我正在尝试写入一个名为“filename.txt”的新文件，并在打开应用程序时写出“hi”。我该怎么做？我在 Eclipse 中运行此代码，按 F11，打开 AVD，然后单击应用程序。我得到“Hello World，appname！” 消息，但没有创建文件。

```
package com.paad.comparison;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Environment;
import android.widget.Toast;

public class ComparisonOfControlCreationActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
        String string1 = "Hey you";
        FileWriter fWriter;
        try{
            fWriter = new FileWriter("filename.txt", true);
            fWriter.write("hi");
            fWriter.flush();
            fWriter.close();
        } catch(Exception e) {
            e.printStackTrace();
        }

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

编辑：对于将来碰巧遇到此问题的任何人，请确保您的 AndroidManifest.xml 文件中包含以下行：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T20:54:49.210

试试这样：

```
FileWriter fWriter;
File sdCardFile = new File(Environment.getExternalStorageDirectory() + " \filename.txt");
Log.d("TAG", sdCardFile.getPath()); //<-- check the log to make sure the path is correct.
try{
     fWriter = new FileWriter(sdCardFile, true);
     fWriter.write("hi");
     fWriter.flush();
     fWriter.close();
 }catch(Exception e){
          e.printStackTrace();
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:11:56.370

您需要[`sync()`](http://developer.android.com/reference/java/io/FileDescriptor.html#sync%28%29)在关闭文件之前调用，但您需要一个`FileDescriptor`，而且我不相信它可以直接从`FileWriter`. 但是，您可以使用 , 来创建`FileWriter`对象`FileDescriptor`，并且`FileOutputStream`可以为此目的提供一个对象。

以下内容基于您的初始代码，但在示例中我选择将文件存储在 sdcard 上，因此要按*原样*运行以下代码，您的应用清单将需要在`<application>`标记之前添加正确的权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

也就是说，如果您想将文件直接存储在设备上，结果不会受到影响。

代码（在 Desire HD 上测试）：

```
package com.paad.comparison;

import java.io.FileOutputStream;
import java.io.FileWriter;

import android.app.Activity;
import android.os.Bundle;

public class ComparisonOfControlCreationActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        String string1 = "Hey you";

        FileOutputStream fos ;

        try {
            fos = new FileOutputStream("/sdcard/filename.txt", true);

            FileWriter fWriter;

            try {
                fWriter = new FileWriter(fos.getFD());
                fWriter.write("hi");
                fWriter.close();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                fos.getFD().sync();
                fos.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

最后，正如`flush()`所调用的那样`close()`，`flush()`紧接在前面的调用`close()`是多余的，尽管没有害处。

# java - 字符的模块化比较

> ID：11386447
> 
> 赞同：5
> 
> 时间：2012-07-08T20:28:27.163
> 
> 标签：java, math, ascii, string-comparison

这似乎是一个非常简单的问题，但在互联网上几乎没有关于它的文章，而且我很难自己正确地实现它。在 Java 中对 ASCII 字符实现模块化*比较*函数的最佳方法是什么，以便比较“环绕”字母表的末尾？我想将它用于“介于”函数中，该函数可以在任意位置分割整个字母表，并在被问及“y”是否在“x”和“b”之间时正确返回“真”。

我已经找到了所有关于字符模*运算*的问题和答案，所以我知道如何使用这样的代码进行模加法（​​字符移位）：

```
char shifted = (((original - 'a') + 1) % 26) + 'a'; 
```

但是，这是基于 Java 内置的模块化算术函数，没有等效的比较。即使我使用的是普通整数，我也无法询问 Java 是否 a < b < c mod 26（如果 a = 24、b = 25 和 c = 1，它应该返回 true）。

所以一般的问题是，在 Java中实现模块化*比较操作的最佳方式是什么？*如果这是一个太难的问题，是否至少有一种方法可以让这种比较适用于 ASCII 字母表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:24:47.583

在循环队列中进行测试`A < B < C`时，您始终可以假设`A <= B`并且已经环绕或不环绕。

如果`A < B`，则没有发生换行。如果有`B < C or C < A`，则 B 介于 A 和 C 之间。

如果`A > B`，那么你已经包裹了。如果`B < C and C < A`，则 B 在 A 和 C 之间。

您需要自己定义如何处理 A==B、B==C 或 A==C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:36:35.177

所以你的问题是：字符和`c_1`之间的字符，只要字母环绕？`c_2``c_3`

*   将每个字符转换为数字（即 , `a = 1`, `b = 2`..., `z = 26`）。在您的示例中，这将`c_1 = 'y' = 25`介于`c_2 = 'x' = 24`和`c_3 = 'b' = 2`) 之间。
*   如果`c_3 < c_2`，则将 26 添加到`c_3`。在您的示例中，情况就是这样，因为`2 < 24`.
*   我们现在有`c_1 = 25`,`c_2 = 24`和`c_3 = 28`。
*   检查是否`c_1 >= c_2 && c_1 <= c_3`持有。如果是这样，则字符位于两个边界之间。如果不成立，则继续下一步。
*   添加 26`c_1`并检查该值是否满足上述检查。如果是这样，则该字符在包装边界内。如果没有，则停止。

在这种方法中，您基本上是在“第二个”字母表中添加 26。所以：

```
... 23 24 25 26 1 2 3 4 
```

变成：

```
... 23 24 25 26 27 28 29 30 
```

然后，您可以像往常一样进行算术运算。

**编辑**：根据 MvG 的评论更新算法。确实有多种情况：“24和2之间是25吗？” 还有“1在24和2之间吗？”。在后一种情况下，您还需要检查 (1 + 26) 是否在 24 和 (2 + 26) 之间 - 这成立，因此字符 'a' 确实介于 'x' 和 'b' 之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:01:44.757

根据您的喜好，您可能希望使用模数运算符而不是 if 语句。要在一行中执行比较，请执行以下操作：

```
public static boolean isStrictlyBetween(char a, char x, char b) {
    // assuming x, a, and b are all the same case (lower or upper).
    return ((x - a + 26) % 26) < ((b - a + 26) % 26);
} 
```

此代码表示如果从 a 到 x 的顺时针距离小于从 a 到 b 的顺时针距离，则返回 true。+26 确保差异表达式的结果是正数（负数的百分比在某些语言中表现得很奇怪）。% 26 执行您想要的模数。

# android - 在 Eclipse 中创建一个新的 Android 项目

> ID：11386448
> 
> 赞同：4
> 
> 时间：2012-07-08T20:28:50.467
> 
> 标签：android, eclipse, project

在旧版本的*Eclipse*和 Android SDK 中，当我想开发一个 Android 应用程序时，我曾经打开“New”，然后打开“Android Project”。

现在在新版本中它更改为 Android 应用程序项目，这让我感到困惑。有很多打开的包和文件夹。我只想创建一个 android 项目，而不是 android 应用程序项目。

我是新手，我希望它尽可能简单，如下所示：

![旧版本的新 Android 项目菜单](../Images/331a9822d570d45196d9b742a8b34521.png)

不是这个（“新 Android 项目”菜单的较新版本：

![新版本的 New Android Project 菜单](../Images/4e5548f2fe7410129b5d69b152c33b4e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:49:21.693

The new project wizard in ADT version 20 can indeed be a bit confusing. Suggestions:

*   In the first screen it is mostly the same other than a change to dropdown lists for the version selection.

*   If you don't want to see the second screen picking a launcher icon, uncheck "create custom launcher icon" on the first screen.

*   On the last screen, if you want to make a project that works on older versions without the compatibility libraries (ie, make an old style project) then uncheck "create activity".

*   If you do File - New - Project - Android you can get at the options for creating from a sample or existing code. If you pick an older target you can pick an older version of the samples.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:18:49.237

Ok, found a solution here:

[http://droiddudes.com/2012/07/12/unable-to-create-android-project-in-eclipse-with-adt-20/](http://droiddudes.com/2012/07/12/unable-to-create-android-project-in-eclipse-with-adt-20/)

Delete Android Support Tools (version 9) from ADK.

Run App wizard again -- it will complete that it requires Version 8 -- confirm you wish to install. Version 9 gets (re)installed. Dialog completes.

Next time you run it there are no errors, and if you look in ADT manager it is in there (again.)

Update: Worked for "test" project then failed for my new real project which has SPACE in the name -- changed the PROJECT NAME (not the app name) to remove the space and the wizard completed correctly.

# c# - 集成测试 EF5（或 EF4x）

> ID：11386449
> 
> 赞同：2
> 
> 时间：2012-07-08T20:29:31.030
> 
> 标签：c#, asp.net-mvc-3, entity-framework, unit-testing, integration-testing

在阅读了有关单元测试实体框架的几个问题/答案后，我决定放弃单元测试以进行集成测试。我的理念是，与 EF 上下文交互是一种“私人”操作，因为它不需要独立于我的服务进行单元测试，也不能轻松准确地被嘲笑。

注意：在我的示例中，我使用的是 EF5。

首先，我有一个创建用户的服务方法：

```
void CreateUser(string username, string password); 
```

我的测试程序集有一个 SetUpFixture（测试运行一次性），它创建我的数据库（EF 代码优先）和测试数据：

```
[SetUpFixture]
public class SetUpFixture
{
    [SetUp]
    public void SetUp()
    {
        using (var context = new MyDbContext())
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyDbContext>());

            // Set up a bunch of initial data and commit
        }
    }
} 
```

然后在每次测试之前，我的 TestFixtureSetup 方法运行创建我的数据库上下文的实例，该实例设置为在释放时回滚（在每次测试之后），并且还创建我的服务实例：

```
[TestFixtureSetUp]
public virtual void TestFixtureSetUp()
{
    _context = new MyContext(rollbackOnDispose: true);
    UserService = new SignupService(_context);
}

[TestFixtureTearDown]
public virtual void TestFixtureTearDown()
{
    Context.Dispose();
} 
```

最后，我进行了实际的集成测试，以确保传入了哪些有效数据，创建了带有我的用户名的记录（这就是我的问题所在）：

```
[Test]
public void ValidDataShouldResultInNewRecordWithUsername()
{
    SignupService.CreateUser("myuser", "fakepassword");

    var q = from user in Context.Users 
            where user.Username == "myuser"
            select user;

    var actualUser = q.Single();

    Assert.AreEqual("myuser", actualUser.Username);
} 
```

以下是我的问题：

1）首先，这甚至是测试依赖于EF的服务的方式吗？我知道有几种方法，我只是想确保这种方法没有什么疯狂的。

2）其次，我应该如何验证服务方法（CreateUser）在提交数据之前完成了它应该做的事情（我不希望它提交，以便我的数据库状态保持在它之前的初始化状态每次测试）？上面测试中的查询没有返回数据，因为它还没有提交。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T20:49:19.743

对于 #2，如果您使用的是 SQL Server，则可以使用[Snapshots](http://msdn.microsoft.com/en-us/library/ms175158.aspx)。加载测试数据后创建快照。然后，您运行测试，并在拆解（或您使用的任何后测方法）中恢复到快照。恢复到快照*非常*快，因此它是测试数据库的实用方法。

还有另一种方法，我已经使用了一些成功。不要使用 SQL 数据库，而是使用 SQLCE 数据库。然后，您可以将测试数据作为文件进行管理 - 无论如何您都在创建数据库。我更喜欢快照方法，但它们都有效。

对于#1，这是一个集成测试。访问数据库是正确的做法，因为您正在测试应用程序的数据部分。抽象出存储库只会给您带来更多复杂性，因为您需要针对数据库测试存储库。

祝你好运，埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T03:04:38.950

这接近于我所有的自动化测试（我也不进行单元测试，只针对真实数据库进行集成测试）。我主要做两件不同的事情。

第一个是我在我的设置中设置了一个事务范围，并在我的拆解中处理它，而不提交。这允许我查询更新的数据 w 但能够恢复数据库以进行下一次测试。缺点是您可能无法在服务层中使用事务范围，因为我不知道嵌套事务的工作情况。

我做的另一件事是通过调用 EF 初始化类在启动时触发完整的数据库重建（我的 ATM 前面没有我的代码）。这样我就可以在测试运行开始时从种子数据中获得一个新的数据库，并且它也让我知道我的实体结构是否不好，

# c++ - 内联asm：推送函数参数

> ID：11386450
> 
> 赞同：0
> 
> 时间：2012-07-08T20:29:35.930
> 
> 标签：c++, assembly, parameters, inline-assembly

我在从内联汇编调用 C++ 函数时遇到问题。我需要将所需的参数压入堆栈，但出了点问题。例如，如果我 push `3`，那么一切正常，但是如果我尝试（从函数）或`[ebp+8]`（相同的东西）推送变量的值，则`1`无论实际值如何，它都会被调用函数错误地接收。

```
int i;

DWORD nietgebruikt(DWORD x)
{
    // x is always 1
    x += 40;
    return x;
}

_declspec(naked) void asmfunc(DWORD x)
{
    _asm
    {
        push    x; // or [ebp+8]
        call    nietgebruikt
        pop x // or [ebp+8]

        add i,  eax
        ret
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    i = 1;

    asmfunc(3);

    cout << i << endl;
    system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:02:00.287

您是否尝试过在调试器下单步执行您的代码，以可视化和理解其执行？从长远来看，您可能会发现这非常有用。

更具体地说，您的`_tmain`函数将值传递给`3`value `asmfunc` *，*而不是*by reference*。换句话说，`asmfunc`调用函数不会看到对其本地整数“副本”所做的任何更新。

您可能会考虑`asmfunc`尝试返回更新后的值，然后将该值显示在`_tmain`.

# python - python 2.7从源代码中获取IP

> ID：11386451
> 
> 赞同：0
> 
> 时间：2012-07-08T20:29:39.347
> 
> 标签：python, html, parsing, ip

我已经用谷歌搜索了我的问题，但目前我还没有任何解决方案。我想`IPs`从这个 html 内容中获取和端口：（我有这个内容作为字符串）

我已经阅读过`beautiful soup`并且`regexp`- 我都尝试过，但我无法找到解决方案 - 而且`beautiful soup`速度非常慢。对不起我的英语不好。

```
<tr class="proxyListOdd">
<td><a href="http://whois.sc/81.196.122.86" target="_blank">81.196.122.86</a></td>
<td>8080</td>
<td>Nein</td>
<td>3</td>
<td class="proxyList_Ping" >0.44 Sek.</td>
<td><img height="24px" width="24px" alt="Rumänien" title="Rumänien" src="http://static2.proxy-listen.de/0_proxy/images/flags/ro.png"></td>
<td class="proxyList_Online arrowUp">97% </td>
<td>22:06</td>
<td><input style="align: center" title="Proxyserver übernehmen" type="image" src="/0_proxy/images/ProxyswitcherButtonOn.png" onclick="de.proxy_listen.setProxy({'U2a66iQA': '70ODEuMTk2LjEyMi44Ng==', 'uhSRlFfS': '96ODA4MA==', 'h0zMxtxH':'21MQ=='}, 'https://addons.mozilla.org/addon/proxy-listen-de_proxyswitcher/');"></td>
<td><a href='proxy:name=Proxy-listen.de&host=81.196.122.86&port=8080&foxyProxyMode=this&confirmation=popup' title="Proxyserver in FoxyProxy übernehmen."><img height="24px" width="22px" alt="FoxyProxy" src="http://static.proxy-listen.de/0_proxy/images/foxyproxy.png"></a></td>
</tr>
<tr class="proxyListEven">
<td><a href="http://whois.sc/94.126.17.68" target="_blank">94.126.17.68</a></td>
<td>3128</td>
<td>Nein</td>
<td>3</td>
<td class="proxyList_Ping" >0.95 Sek.</td>
<td><img height="24px" width="24px" alt="Schweiz" title="Schweiz" src="http://static2.proxy-listen.de/0_proxy/images/flags/ch.png"></td>
<td class="proxyList_Online arrowUp">86% </td>
<td>22:06</td>
<td><input style="align: center" title="Proxyserver übernehmen" type="image" src="/0_proxy/images/ProxyswitcherButtonOn.png" onclick="de.proxy_listen.setProxy({'U2a66iQA': '65OTQuMTI2LjE3LjY4', 'uhSRlFfS': '78MzEyOA==', 'h0zMxtxH':'52MQ=='}, 'https://addons.mozilla.org/addon/proxy-listen-de_proxyswitcher/');"></td>
<td><a href='proxy:name=Proxy-listen.de&host=94.126.17.68&port=3128&foxyProxyMode=this&confirmation=popup' title="Proxyserver in FoxyProxy übernehmen."><img height="24px" width="22px" alt="FoxyProxy" src="http://static.proxy-listen.de/0_proxy/images/foxyproxy.png"></a></td>
</tr>
<tr class="proxyListOdd">
<td><a href="http://whois.sc/89.105.247.13" target="_blank">89.105.247.13</a></td>
<td>3128</td>
<td>Nein</td> 
```

希望你能帮助我；）制造亨利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:35:08.643

使用[正则表达式](http://docs.python.org/library/re.html)：

```
>>> import re
>>> set(m.group(0) for m in re.finditer(r'([0-9]{1,3}\.){3}[0-9]{1,3}', s))
{'81.196.122.86', '94.126.17.68', '89.105.247.13'} 
```

请注意，此正则表达式已简化，实际上并未捕获所有 IP 地址（并​​捕获一些未捕获的值）。如果您想要更精确的匹配，根据[inet_addr(3)](http://linux.die.net/man/3/inet_addr)和[RFC 4291](https://www.rfc-editor.org/rfc/rfc4291)，整个正则表达式如下所示：

```
# IPv4, common format
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9])|
# IPv4, dotted hexadecimal
(?:0x[0-9a-fA-F]{2}\.){3}0x[0-9a-fA-F]{2}|
# IPv4, dotted octal
0[0-7]{3}\.){3}0[0-7]{3}|
# IPv4, one number, hexadecimal
0x[0-9a-fA-F]{1,8})|
# IPv4, one number, octal
0[0-7]{1,11})|
# IPv4, one number, hexadecimal
[1-4][0-9]{9}|0|[1-9][0-9]{0,7}|
# IPv6, preferred form (RFC 4291 2.2.1)
(?:[0-9a-fA-F]{1,4}){7}[0-9a-fA-F]{1,4}|
# IPv6, compressed syntax (RFC 4291 2.2.2)
(?:
  [0-9a-fA-F]{0,4}::(?:[0-9a-fA-F]{1,4}:){,6}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){1}::(?:[0-9a-fA-F]{1,4}:){,4}[0-9a-fA-F]{0,4}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){2}::(?:[0-9a-fA-F]{1,4}:){,3}[0-9a-fA-F]{0,4}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){3}::(?:[0-9a-fA-F]{1,4}:){,2}[0-9a-fA-F]{0,4}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){4}::(?:[0-9a-fA-F]{1,4}:){,1}[0-9a-fA-F]{0,4}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){5}::[0-9a-fA-F]{0,4}
)|
# IPv6, alternative form (RFC 4291 2.2.3, uncompressed)
(?:[0-9a-fA-F]{1,4}){6}|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]))|
# IPv6, alternative form (RFC 4291 2.2.3, compressed)
(?:
  [0-9a-fA-F]{0,4}::(?:[0-9a-fA-F]{1,4}:){,4}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){1}::(?:[0-9a-fA-F]{1,4}:){,3}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){2}::(?:[0-9a-fA-F]{1,4}:){,2}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){3}::(?:[0-9a-fA-F]{1,4}:){,1}|
  [0-9a-fA-F]{0,4}(?::[0-9a-fA-F]{1,4}){4}::
)
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9])) 
```

如您所见，如果您真的想匹配所有 IP 地址，则应搜索近似格式，然后（如有必要）验证地址，例如使用[`ipaddress`](http://docs.python.org/dev/library/ipaddress.html#module-ipaddress). 请注意，上面的正则表达式对于您的情况是*不完整*的，因为它不包括可能的 HTML 字符编码，例如`&#x31;`1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:36:36.033

这仅适用于`IPv4`：

```
re.findall('(\d+\.\d+\.\d+\.\d+)&port=(\d+)',s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:34:55.393

查看[类似问题](https://stackoverflow.com/questions/11289901/how-to-search-for-ips-in-files-using-python/11289931#11289931)

编辑：对于这种特殊情况，您将不得不做一些不同的事情并从这组特定的 HTML 数据中正则表达式出数据（因为 IP 多次出现）：

```
print [ ":".join((y,z)) for x,y,z in re.findall('proxyList((?=Even)|(?=Odd)).*?_blank">(.*?)</a></td>.*?<td>([0-9]+)</td>',data,flags=re.DOTALL | re.MULTILINE)] 
```

您还可以对 Marco de Wit 所做的 'proxy:name=Proxy-listen' 部分进行正则表达式。

除此以外：

```
re.findall('(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)',data) 
```

找到所有`IPv4`地址，将端口添加到其中，将其修改为：

```
re.findall('((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)):([0-9]{1,5})*',data) 
```

它应该以这种格式找到所有 IP 和端口：（`XXX.XXX.XXX.XXX:YYYYY` 也就是说，它不检查端口是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:19:04.533

您是否考虑过使用[minidom 之](http://docs.python.org/library/xml.dom.minidom.html#module-xml.dom.minidom)类的东西？从文档中：

xml.dom.minidom 是文档对象模型接口的轻量级实现。它旨在比完整的 DOM 更简单，也更小。

# c# - 模糊半透明形式的背景（如 Aero 玻璃）

> ID：11386452
> 
> 赞同：12
> 
> 时间：2012-07-08T20:29:46.273
> 
> 标签：c#, wpf, winforms, aero, aero-glass

我有一个半透明背景的无边框、不可调整大小的 WPF 表单（WindowStyle=None、AllowsTransparency=True、ResizeMode=NoResize）。这是表单，一个半透明的红色矩形，现在在记事本上运行的图片：

![当前显示在记事本顶部的表单](../Images/cdd1c44dea4b2118d3af315873b09fa7.png)

但是，我希望背景模糊，就像 Aero 玻璃是如何做到的，除了没有所有花哨的窗口边框和带条纹的彩色背景 - 我想自己处理。这是我希望它看起来像的样机：

![我想要的形式 - 模糊它下面的任何东西](../Images/646225fa133e5ff85bbbae2df0009a16.png)

我怎样才能以最有效的方式实现这一目标？

WinForms 或 WPF 对我来说很好。希望它应该使用与 Aero 玻璃相同的东西（我对它只在启用 Aero 的情况下工作很好），而不是像将下面的屏幕区域捕获为位图并将其模糊那样疯狂。

这是我不想要的图片：

![我不想要整个 Aero 玻璃窗镀铬](../Images/8955627fe8bc8bc83b6affd44693b9c7.png)

我知道这是可能的，我知道该怎么做，但我不希望整个 Aero 玻璃窗口镀铬，或边框和标题栏，或窗口具有用户设置的 Aero 玻璃颜色，只是效果模糊窗口/表单下方的任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T17:45:07.723

如果你想使用 Aero 模糊，那么你可以使用**[DwmEnableBlurBehindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969508%28v=vs.85%29.aspx)** api。这是一个利用它的派生窗口示例。

```
public class BlurWindow : Window
{
    #region Constants

    private const int WM_DWMCOMPOSITIONCHANGED = 0x031E;
    private const int DWM_BB_ENABLE = 0x1; 

    #endregion //Constants

    #region Structures
    [StructLayout( LayoutKind.Sequential )]
    private struct DWM_BLURBEHIND
    {
        public int dwFlags;
        public bool fEnable;
        public IntPtr hRgnBlur;
        public bool fTransitionOnMaximized;
    }

    [StructLayout( LayoutKind.Sequential )]
    private struct MARGINS
    {
        public int cxLeftWidth;
        public int cxRightWidth;
        public int cyTopHeight;
        public int cyBottomHeight;
    } 
    #endregion //Structures

    #region APIs

    [DllImport( "dwmapi.dll", PreserveSig = false )]
    private static extern void DwmEnableBlurBehindWindow(IntPtr hwnd, ref DWM_BLURBEHIND blurBehind);

    [DllImport( "dwmapi.dll" )]
    private static extern int DwmExtendFrameIntoClientArea(IntPtr hWnd, ref MARGINS pMargins);

    [DllImport( "dwmapi.dll", PreserveSig = false )]
    private static extern bool DwmIsCompositionEnabled(); 

    #endregion //APIs

    #region Constructor
    public BlurWindow()
    {
        this.WindowStyle = System.Windows.WindowStyle.None;
        this.ResizeMode = System.Windows.ResizeMode.NoResize;
        this.Background = Brushes.Transparent;
    } 
    #endregion //Constructor

    #region Base class overrides
    protected override void OnSourceInitialized(EventArgs e)
    {
        base.OnSourceInitialized( e );

        if ( Environment.OSVersion.Version.Major >= 6 )
        {
            var hwnd = new WindowInteropHelper( this ).Handle;
            var hs = HwndSource.FromHwnd( hwnd );
            hs.CompositionTarget.BackgroundColor = Colors.Transparent;

            hs.AddHook( new HwndSourceHook( this.WndProc ) );
            this.InitializeGlass( hwnd );
        }
    } 
    #endregion //Base class overrides

    #region Methods

    #region InitializeGlass
    private void InitializeGlass(IntPtr hwnd)
    {
        if ( !DwmIsCompositionEnabled() )
            return;

        // fill the background with glass
        var margins = new MARGINS();
        margins.cxLeftWidth = margins.cxRightWidth = margins.cyBottomHeight = margins.cyTopHeight = -1;
        DwmExtendFrameIntoClientArea( hwnd, ref margins );

        // initialize blur for the window
        DWM_BLURBEHIND bbh = new DWM_BLURBEHIND();
        bbh.fEnable = true;
        bbh.dwFlags = DWM_BB_ENABLE;
        DwmEnableBlurBehindWindow( hwnd, ref bbh );
    }
    #endregion //InitializeGlass

    #region WndProc
    private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        if ( msg == WM_DWMCOMPOSITIONCHANGED )
        {
            this.InitializeGlass( hwnd );
            handled = false;
        }

        return IntPtr.Zero;
    } 
    #endregion //WndProc 

    #endregion //Methods
} 
```

这是使用 BlurWindow 的片段。

```
var w = new BlurWindow();
w.Width = 100;
w.Height = 100;
w.MouseLeftButtonDown += (s1, e1) => {
    ((Window)s1).DragMove();
    e1.Handled = true;
};
w.Background = new SolidColorBrush( Color.FromArgb( 75, 255, 0, 0 ) );
w.Show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:03:55.987

我曾经做过类似的事情，但我不需要以下内容：

1.  我不需要移动我的表格太多。
2.  在我的表格下没有任何动作。

我做了什么：

1.  我曾经（以编程方式）最小化我的表单窗口。
2.  用于捕获其大小和相同坐标的图像片段的表单。
3.  应用`BlurBitmapEffect`.

我想这不是一个很好的答案，但我只是在写我所做的！

如果您对这种方法感兴趣，本文将为您提供帮助：http: [//www.codeproject.com/Articles/91487/Screen-Capture-in-WPF-WinForms-Application](http://www.codeproject.com/Articles/91487/Screen-Capture-in-WPF-WinForms-Application)

# javascript - 将 ID 传递给点击事件

> ID：11386458
> 
> 赞同：1
> 
> 时间：2012-07-08T20:31:17.657
> 
> 标签：javascript, asp.net, jquery

我在 asp.net 中继器中有以下输入

```
 <div class="detailsItem">
    <input type="button" class="saveCommand" value="Save"/>
 </div> 
```

然后在我的 document.ready 中绑定一个点击功能

```
 <script type="text/javascript">

    $(document).ready(function () {

        $('.saveCommand').live('click', function () {
            var cur = $(this);
            saveItem(cur.closest('div.detailsItem'));
        });

    }); 
```

当我绑定我的中继器时，我希望能够在调用该`click`函数时包含一个 ID。类似于：

```
<input type="button" onclikc="save(this,<%#((CustomViewItem)Container.DataItem).Id%>" value="Save"/> 
```

关于如何结合两种装订方式的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:38:51.433

我建议您使用[`data`属性](http://ejohn.org/blog/html-5-data-attributes/)。

```
<!--
    <div class="detailsItem" data-id="<%#((CustomViewItem)Container.DataItem).Id%>">
-->
<div class="detailsItem" data-id="YourIdHere">
    <input type="button" class="saveCommand" value="Save"/>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('.saveCommand').on('click', function () {
            var cur = $(this);
            var detailsItem = cur.closest('div.detailsItem');
            alert(detailsItem.data("id"));
            saveItem(detailsItem);
        });
    });
</script> 
```

`data()`有关jQuery中方法的更多信息：http: [//docs.jquery.com/Data](http://docs.jquery.com/Data)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:37:13.993

您可以使用新`data-*`属性

```
<input type="button" data-id="<%#((CustomViewItem)Container.DataItem).Id%>" value="Save"/> 
```

在事件处理程序中，您可以使用

```
cur.data("id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:39:39.107

您可以将 ID 传递给中继器项目模板中的保存功能。

```
<itemTemplate>
    <input type='button' onclick='save(<%# Eval("Id")); %>' value='Save' />
</itemTemplate> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T20:51:09.153

试试这个

```
<ItemTemplate>
<div class="detailsItem">
<input type="button" class="saveCommand" onclick='save(<%# Eval("Id") %>);' value="Save"/>
</div>
</ItemTemplate> 
```

# c# - 将位图传递到后台工作线程

> ID：11386462
> 
> 赞同：1
> 
> 时间：2012-07-08T20:31:46.273
> 
> 标签：c#, .net, bitmap, thread-safety

我知道位图不是线程安全的，因此使用此解决方法

```
 Bitmap[] blobCopies = MakeBlobCopies(bmpBlob, 2);

                    BackgroundWorker bw1 = new BackgroundWorker();
                    bw1.DoWork += new DoWorkEventHandler(bw1_DoWork);
                    bw1.RunWorkerAsync(blobCopies[0]);

                    BackgroundWorker bw2 = new BackgroundWorker();
                    bw2.DoWork += new DoWorkEventHandler(bw2_DoWork);
                    bw2.RunWorkerAsync(blobCopies[1]);

                    DisposeBlobCopies(blobCopies); 
```

在 Backgroundwork 事件句柄中，我对位图应用了一些过滤器，但我得到了访问冲突异常

* * *

```
System.AccessViolationException was unhandled
  Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.SafeNativeMethods.Gdip.GdipBitmapLockBits(HandleRef bitmap, GPRECT& rect, ImageLockMode flags, PixelFormat format, BitmapData lockedBitmapData)
       at System.Drawing.Bitmap.LockBits(Rectangle rect, ImageLockMode flags, PixelFormat format, BitmapData bitmapData)
       at System.Drawing.Bitmap.LockBits(Rectangle rect, ImageLockMode flags, PixelFormat format) 
```

* * *

我什至没有处理位图（我需要避免阻塞内存）。但是仍然得到这个例外。我不需要*从*工作线程返回任何东西，这是否可以立即处理？有任何想法吗？

```
 private Bitmap[] MakeBlobCopies(Bitmap originalBitmap, int n)
    {
        Bitmap[] blobCopies = new Bitmap[n];
        for (int i = 0; i < n; i++)
        {
            blobCopies[i] = (Bitmap)originalBitmap.Clone();
        }
        return blobCopies;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:38:31.947

不，位图是线程安全的。它们受到内部锁的保护，当您尝试读取另一个线程正在写入的位图时，您会遇到异常。

然而，在线程使用位图的同时处理位图是危险的，这会猛烈地撞击地板垫。特别是当您使用 Bitmap.Clone() 时，它不会复制像素数据。只有 Bitmap(Image) 构造函数这样做。您需要为 Bitmap.Dispose() 调用找到更好的位置。就像在 DoWork 或 RunWorkerCompleted 事件处理程序中一样，*在*您确定不再访问该位图之后。

# jquery - 使用jQuery获取文件输入元素的按钮部分？

> ID：11386465
> 
> 赞同：0
> 
> 时间：2012-07-08T20:32:12.180
> 
> 标签：jquery, file-io

我有一个文件输入元素，如下面的代码所示。如何使用 jQuery 获取此文件输入控件的按钮部分？

```
<input type="file" name="FILE1" id="FILE1"></input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:35:29.377

你不能。按钮部分是特定于浏览器的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:35:44.277

这是不可能的，因为文件输入行为在浏览器的控制之下，并且操作会导致与安全相关的问题，例如阻止文件上传。但是，您可以将不透明度设置`file input`为`0`，并创建一个虚拟元素并`click`通过单击触发文件输入事件：

```
$("#trigger").click(function(e) {
   e.preventDefault();
   $("input[type='file']").trigger("click");        
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:37:20.177

有许多关于此的问题和答案，涵盖了您*可以*使用文件输入做什么。这不是很多，但它是一些东西。

[样式输入类型文件？](https://stackoverflow.com/questions/4909228/style-input-type-file)

埃里克

# cocoalibspotify-2.0 - 为什么 SPPlaylistFolder 不符合 SPAsyncLoading？

> ID：11386469
> 
> 赞同：0
> 
> 时间：2012-07-08T20:32:51.183
> 
> 标签：cocoalibspotify-2.0

我正在为我的应用程序使用 CocoaLib Spotify 2.0。

使用 2.0 版本的 CLS，一堆对象符合`SPAsyncLoading`协议，允许您使用'-waitUntilLoaded:...'。但是`SPPlaylistFolder`不符合协议——这是否意味着它的所有元数据都会在我获得实例后立即加载，还是我必须在其属性上使用 KVO？

是否有理由说明为什么`SPPlaylistFolder`不符合`SPAsyncLoading`协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:45:30.843

如果您有`SPPlaylistFolder`，则它已被加载——由于各种无聊的实现细节，文件夹元数据与 一起加载`SPPlaylistContainer`，因此一旦加载并且您可以访问文件夹，文件夹元数据就已经完成加载。

# c# - 以用户从两个列表框中选择的字体类型和大小显示消息

> ID：11386472
> 
> 赞同：0
> 
> 时间：2012-07-08T20:33:02.950
> 
> 标签：c#, winforms, button

我已经在这个项目上工作了几天，它是一个 C# Windows Visual Studio 2010 表单，我一直在发布与同一个项目相关的不同问题；正如我被告知要发布不同的问题而不是将它们全部放在同一个帖子中。所以这就是项目：创建一个包含两个 ListBox 的表单——一个包含至少四个字体名称，另一个包含至少四个字体大小。如果用户未能做出选择，则让每个列表中的第一项成为默认选择。每个 ListBox 只允许一个选择。用户单击按钮后，以选定的字体和大小显示“Hello”。这次我在文本框中获取消息以根据用户选择的字体类型和大小显示时遇到问题。这是我在编码中的位置：

```
 public Form1()
    {
        InitializeComponent();

        //populate listbox1
        listBox1.Items.Add("Arial");
        listBox1.Items.Add("Calibri");
        listBox1.Items.Add("Times New Roman");
        listBox1.Items.Add("Verdana");

        //populate listbox2
        listBox2.Items.Add("8");
        listBox2.Items.Add("10");
        listBox2.Items.Add("12");
        listBox2.Items.Add("14");

        this.listBox1.SelectedIndexChanged += new System.EventHandler(this.listBox1_SelectedIndexChanged);
        listBox1.SelectedIndex = 0; // <--- set default selection for listBox1 

        this.listBox2.SelectedIndexChanged += new System.EventHandler(this.listBox2_SelectedIndexChanged);
        listBox2.SelectedIndex = 0; // <--- set default selection for listBox2

    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

        textBox1.Text = listBox1.SelectedItem.ToString();
    }

    private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Text = listBox2.SelectedItem.ToString();
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        textBox1.Text = "Hello!"; 
    }

    private void button1_Click(object sender, EventArgs e)
    {

    }
} 
```

}

现在我试图从单击的按钮中引发呼叫，该按钮将在用户选择的字体和字体大小中显示消息“Hello”。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:39:27.157

删除此方法：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
{
    textBox1.Text = "Hello!"; 
} 
```

在按钮的 button_click 事件中，添加以下内容：

```
 private void button1_Click(object sender, EventArgs e)
    {
    textBox1.Text = "hello";       
    textBox1.Font = new Font(listBox1.SelectedItem.ToString(), Convert.ToInt32(listBox2.SelectedItem.ToString()));  
    } 
```

`selectedindexchanged`如果您要使用按钮，您可能希望删除代码中的 方法。取决于你想要什么。

编辑：

```
 public Form2()
    {
        InitializeComponent();
        listBox1.Items.Add("Arial");
        listBox1.Items.Add("Calibri");
        listBox1.Items.Add("Times New Roman");
        listBox1.Items.Add("Verdana");

        listBox2.Items.Add("8");
        listBox2.Items.Add("10");
        listBox2.Items.Add("12");
        listBox2.Items.Add("14");
        listBox1.SelectedIndex = 0;
        listBox2.SelectedIndex = 0;
    }

    private void button1_Click(object sender, EventArgs e)
    {
    textBox1.Text = "hello";       
    textBox1.Font = new Font(listBox1.SelectedItem.ToString(), Convert.ToInt32(listBox2.SelectedItem.ToString()));  
    } 
```

如果您只使用上面的代码，一切都应该按照您的意愿工作。我自己试过了，对我来说效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:12:41.327

这是我最后的提交。感谢所有的建议家伙。

```
 public Form1()
    { 
        InitializeComponent();
        //populate listbox1 
        listBox1.Items.Add("Arial"); 
        listBox1.Items.Add("Calibri"); 
        listBox1.Items.Add("Times New Roman"); 
        listBox1.Items.Add("Verdana");
        listBox1.SelectedIndex = 0; // <--- set default selection for listBox1

        //populate listbox2
        listBox2.Items.Add("8"); 
        listBox2.Items.Add("10"); 
        listBox2.Items.Add("12"); 
        listBox2.Items.Add("14");
        listBox2.SelectedIndex = 0; // <--- set default selection for listBox2
    } 

    private void button1_Click(object sender, EventArgs e) 
    { 
        textBox1.Text = "hello";        
        textBox1.Font = new Font(listBox1.SelectedItem.ToString(), Convert.ToInt32(listBox2.SelectedItem.ToString()));   
    } 

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    } 
} 
```

}

# php - 如何为 Symfony 任务创建自定义 SQL 推进任务？

> ID：11386474
> 
> 赞同：0
> 
> 时间：2012-07-08T20:33:16.520
> 
> 标签：php, symfony-1.4, propel

我想用 for 循环将数据插入到表中。首先，我创建了一个 Symfony 任务：

```
symfony generate:task namespace:MyTask 
```

现在我正在尝试生成一个推进 sql 任务，我可以将其调用到我的 Symfony 任务中，这样当我调用时：

```
symfony namespaceMyTask 
```

它将大量`for(i=10; i < 30; i++)`数据插入表中。

如何创建可以调用到 symfony 任务中的自定义推进任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:16:29.547

它位于“[在任务中执行任务](http://www.symfony-project.org/more-with-symfony/1_4/en/13-Leveraging-the-Power-of-the-Command-Line#chapter_13_executing_a_task_inside_a_task)”下的文档中。

```
$this->runTask('namespaceMyTask'); 
```

# xcode - 更改 IBAction 上的按钮边框属性

> ID：11386476
> 
> 赞同：0
> 
> 时间：2012-07-08T20:33:20.453
> 
> 标签：xcode, cocoa, ibaction, nsbutton

为什么这允许我更改**边框状态**而不是**边框​​宽度**（或其他边框属性）？

```
NSButton *button = (NSButton *)sender;
[button setBordered:false];
[button setBorderWidth:5]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:50:43.370

该`setBorderWidth:`方法不存在，请检查[NSButton 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsbutton_Class/Reference/Reference.html)。
换句话说，`NSButton`不支持更改边框宽度（默认情况下）。
该`setBordered:`方法定义按钮是否具有边框。
设置`setBordered:`为`false`移除整个挡板，例如：

![带挡板](../Images/b76a6ac6d3684f5bd588eca31b2da843.png) ![无挡板](../Images/af0f70973f8eded0b52c47d8f2ea4fbe.png)

因此，该`setBordered:`方法可能会令人困惑。

# ubuntu - 强制 emacs 使用 Texlive 2012 而不是 2009

> ID：11386477
> 
> 赞同：1
> 
> 时间：2012-07-08T20:33:22.420
> 
> 标签：ubuntu, emacs

我正在使用带有 Emacs 23.3.1 的 Ubuntu 12.04 来处理 .tex 文件。Ubuntu 中 Texlive 的默认安装是 2009 版本，我刚刚升级到 Texlive 2012：在我的 /usr/local/texlive 目录中，我可以看到包含最新版本文件的 2012 文件夹。还有一个名为“texmf-local”的文件夹，我相信它适用于 texlive 2009。

我的问题是：当我使用 emacs 打开一个 .tex 文件并将其 pdflatex 时，它会产生错误，从中（在 Cc Cl 查看错误输出之后）我意识到**emacs 仍在使用版本 3.1415926-1.40.10（TeX Live 2009/Debian）**。如何**强制 emacs 通过最新的 texlive 2012 而不是 2009 处理 .tex 文件**？我需要编辑 .emacs 文件还是有其他方法可以更改设置？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:49:04.253

您只需要调整您的`PATH`环境变量并将您的 texlive 2012 目录放在第一位。这可以通过修改您的 shell 设置来完成，因此 Emacs 将拾取 modified `PATH`，或者您可以使用命令从 Emacs 更改它（根据您的设置更改路径 - 我现在不记得 TeXLive 如何组织 bin 目录）：

```
(setenv "PATH" (concat "/usr/local/texlive/bin/:" (getenv "PATH"))) 
```

只需将此行放入您的`~/.emacs`文件中...

# ruby-on-rails - Rails 3：简单表单开始日期

> ID：11386478
> 
> 赞同：7
> 
> 时间：2012-07-08T20:34:05.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在我的应用程序中使用简单的表单来获取用户的生日。

它已设置（并且我想保持这种方式）回到 1900 年，但我想知道是否有办法让默认开始像 1950 年一样（如果需要，他们仍然可以滚动回旧版本）所以大多数用户不必滚动到他们的年龄。

```
 <%= f.input :date_of_birth, :as => :date, :start_year => 1900,
    :end_year => Date.today.year - 12,
    :order => [ :day, :month, :year], :required => true %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:05:09.700

您可以将 :start_year 值与 :end_year 值切换为

```
 <%= f.input :date_of_birth, :as => :date, :start_year => Date.today.year - 12,
:end_year => 1900,
:order => [ :day, :month, :year], :required => true %> 
```

因为 :start_year 和 :end_year 只是显示年份的方式......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:06:23.217

我认为 datetime_select [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-datetime_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-datetime_select)将是您需要的并将 :default => {:year => 1950 } 设置为哪一年您希望显示为默认开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:42:21.490

您可以使用 date_select [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)

并使用 :default 选项

# c++ - 如何将 C++ Wii devkitpro 连接到互联网？

> ID：11386479
> 
> 赞同：1
> 
> 时间：2012-07-08T20:34:09.097
> 
> 标签：c++, sockets, wii, devkitpro

我正在努力使用 devkitpro 中的代码，试图让这个程序连接到 Internet。它说它连接，它得到一个IP地址。

但是，我如何从 Internet 读取数据并验证它是否正在将我的数据写入套接字？由于缺乏文档或文档质量，这是一个非常困难的 devkit。我需要一些帮助。

**编辑**：我会在被要求时发布代码。它很长，需要清理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:23:17.907

*devkitPPC/libogc*中的套接字代码与*BSD 套接字*接口非常相似。主要区别在于函数以`net_`( `net_socket`, `net_connect`, `net_send`, 等) 为前缀，`net_select()`未实现，并且在大多数情况下，错误代码是*从函数*本身返回的，*而不是 errno*。
如果您已经创建了一个套接字并将其连接到远程服务器，那么您可能已经想通了！

> 但是，我如何从 Internet 读取数据并验证它是否正在将我的数据写入套接字？

就像在 PC 上一样！使用 and打开连接，使用`net_socket()`and`net_connect()`读写数据`net_send()`，完成`net_revc()`后调用`net_close()`。
检查这些函数的返回值以确定操作是成功还是失败。大多数函数*在发生错误时返回 < 0*。您还必须先初始化 Wii 网络硬件并获取 IP 地址。

> 由于缺乏文档或文档质量，这是一个非常困难的 devkit。

非常真实。一些系统头文件是使用 Doxygen 记录的，不幸`network.h`的是不是。但是，由于接口类似于 BSD 套接字，因此可以应用大多数套接字教程或示例。

> 当被要求时，我会发布代码。它很长，需要清理。

发布一些代码，我会尽力提供更多帮助。

# meteor - Meteor：向模板传递多个值

> ID：11386480
> 
> 赞同：3
> 
> 时间：2012-07-08T20:34:19.140
> 
> 标签：meteor, handlebars.js

我想创建一个类似于下面的模板/js 组合。我想要的是有两个变量可用于“集合”模板

```
<template name="collection">
  Title: {{title}}
  <UL>
  {{#each items}}
    {{> item}}
  {{/each}}
  </UL>
</template>

<template name="collection_items"> 
  <LI>{{item_title}}</LI>
</template> 
```

javascript函数类似于：

```
Template.collection.data = function() {
  var record = Record.findOne({whatever:value});
  return { title: record.title, items: record.items }
} 
```

我尝试过使用 Handlebars 的 {{#with data}} 帮助器并返回一个对象，但这只是使模板崩溃。我尝试过创建一个“顶级”功能，例如：

```
Template.collection = function () {... } 
```

但这也使模板崩溃。

我要避免的是有两个单独的函数（一个 Template.collection.title 和一个 Template collection.items），其中每个函数调用 Record 集合上的 findOne，实际上它是相同的模板，一个调用就足够了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:57:14.157

```
Template.collection = function () {... } 
```

Template.collection 不是一个函数，它是一个实例，因此是一个对象。

您可以`Template.collection`在控制台中键入以查看基本内容，`Template.collection.`并自动完成以查看其方法和字段。

* * *

对于#with 示例，Todos 似乎确实不包含您在评论中概述的内容。因此，可以在此处找到使用它的示例：

[https://github.com/meteor/meteor/blob/master/packages/templating/templating_tests.js#L75](https://github.com/meteor/meteor/blob/master/packages/templating/templating_tests.js#L75) [https://github.com/meteor/meteor/blob/master/packages/templating/templating_tests.html#L92](https://github.com/meteor/meteor/blob/master/packages/templating/templating_tests.html#L92)

这是我尝试过的另一个示例，它适用于当前的 master 和 devel 分支：

```
<head>
  <title>test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  {{#with author}}
  <h2>By {{firstName}} {{lastName}}</h2>
  {{/with}}
</template> 
```

而它的JS部分：

```
if (Meteor.is_client) {
  Template.hello.author = function () {
    return {
      firstName: "Charles",
      lastName: "Jolley"
    };
  };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:33:35.543

汤姆的回答是正确的。我想插话并补充说，在我的场景中，#with 失败的原因是由于流星的“反应性”性质，我第一次调用加载模型导致“未定义”并且我没有检查它. 一小部分后加载正常。道德是做类似的事情

```
var record = Record.findOne({whatever:value})
if (record) {
  return record;
} else {
  // whatever
  return "loading"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:21:48.230

您希望避免两个功能的任何具体原因？

从您的代码示例中，我看到了一个问题：第一个模板正在使用此行调用第二个模板：

```
{{> item}} 
```

但是您的第二个模板不称为“项目”。我相信你的第二个模板应该这样调用：

```
<template name="item"> 
```

似乎为第一个和第二个提供辅助功能很简单。尽管我还没有让它与我自己的代码一起使用，但我相信第二个辅助函数会希望使用“this”约定来引用您所指的集合。

欢呼——呼喊

# vim - Vim 标签列表中的 Cython 支持？

> ID：11386481
> 
> 赞同：3
> 
> 时间：2012-07-08T20:34:26.440
> 
> 标签：vim, cython, taglist

我想知道是否可以制作 vim 的 taglist 来显示 cython 源代码信息。

似乎 ctag 已经支持 cython，但是 Tlist 没有显示打开的 cython 文件的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:44:15.223

弄清楚了。.vimrc 文件中的以下一行使其工作：

```
let tlist_pyrex_settings='python;c:classe;m:memder;f:function' 
```

# javascript - 在 V8 JavaScript (Chrome & Node.js) 中访问行号

> ID：11386492
> 
> 赞同：65
> 
> 时间：2012-07-08T20:35:34.337
> 
> 标签：javascript, node.js, google-chrome, v8

使用过 C 等语言的 JavaScript 开发人员经常错过使用某些类型的自省的能力，例如记录行号，以及当前方法是从哪个方法调用的。好吧，如果您使用的是 V8（Chrome、Node.js），您可以使用以下内容。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-08T20:35:35.367

```
Object.defineProperty(global, '__stack', {
  get: function(){
    var orig = Error.prepareStackTrace;
    Error.prepareStackTrace = function(_, stack){ return stack; };
    var err = new Error;
    Error.captureStackTrace(err, arguments.callee);
    var stack = err.stack;
    Error.prepareStackTrace = orig;
    return stack;
  }
});

Object.defineProperty(global, '__line', {
  get: function(){
    return __stack[1].getLineNumber();
  }
});

console.log(__line); 
```

以上将记录`19`。

结合`arguments.callee.caller`您可以更接近您通过宏在 C 中获得的有用日志记录类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-01-12T17:10:54.147

IMO 接受的答案的问题在于，当您想打印某些内容时，您可能正在使用记录器，而在这种情况下，使用接受的解决方案将始终打印同一行:)

一些小的改变将有助于避免这种情况！

在我们的例子中，我们使用 Winston 进行日志记录，所以[代码](https://gist.github.com/alfasin/887d3622a39c90de528a9a48d5b7f0c3)如下所示（注意下面的代码注释）：

```
/**
 * Use CallSite to extract filename and number, for more info read: https://v8.dev/docs/stack-trace-api#customizing-stack-traces
 * @returns {string} filename and line number separated by a colon
 */
const getFileNameAndLineNumber = () => {
    const oldStackTrace = Error.prepareStackTrace;
    try {
        // eslint-disable-next-line handle-callback-err
        Error.prepareStackTrace = (err, structuredStackTrace) => structuredStackTrace;
        Error.captureStackTrace(this);
        // in this example I needed to "peel" the first CallSites in order to get to the caller we're looking for
        // in your code, the number of stacks depends on the levels of abstractions you're using
        // in my code I'm stripping frames that come from logger module and winston (node_module)
        const callSite = this.stack.find(line => line.getFileName().indexOf('/logger/') < 0 && line.getFileName().indexOf('/node_modules/') < 0);
        return callSite.getFileName() + ':' + callSite.getLineNumber();
    } finally {
        Error.prepareStackTrace = oldStackTrace;
    }
}; 
```

# php - PHP 脚本从 phpbb SQL DB 给出空输出

> ID：11386504
> 
> 赞同：1
> 
> 时间：2012-07-08T20:37:01.307
> 
> 标签：php, html, sql, phpbb3

首先：如果涉及到 PHP 脚本，我是一个完整的新手，所以我只是从一个网站上抓取了这个脚本，作者说它运行良好。

```
 <?php
// How Many Topics you want to display?
$topicnumber = 5;
// Scrolling towards up or down?
$scroll = "up";
// Change this to your phpBB path
$urlPath = "/forum";

// Database Configuration (Where your phpBB config.php file is located)
include 'forum/config.php';

$table_topics = $table_prefix. "topics";
$table_forums = $table_prefix. "forums";
$table_posts = $table_prefix. "posts";
$table_users = $table_prefix. "users";
$link = mysql_connect("$dbhost", "$dbuser", "$dbpasswd") or die("Could not connect");
mysql_select_db("$dbname") or die("Could not select database");

$query = "SELECT t.topic_id, t.topic_title, t.topic_last_post_id, t.forum_id,
p.post_id, p.poster_id, p.post_time, u.user_id, u.username
FROM $table_topics t, $table_forums f, $table_posts p, $table_users u WHERE t.topic_id = p.topic_id AND f.forum_id = t.forum_id AND t.topic_status = 2 AND p.post_id = t.topic_last_post_id AND p.poster_id = u.user_id ORDER BY p.post_id DESC LIMIT $topicnumber";
$result = mysql_query($query) or die("Query failed");

echo "
";
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo "
";
}
print "

" .
$row["topic_title"] .
"    by: " .
$row["username"] .
"   
" .
date('F j, Y, g:i a', $row["post_time"]) .
"
";
mysql_free_result($result);
mysql_close($link);
?> 
```

虽然当我使用它时，它给了我一个奇怪的输出是“by: December 31, 1969, 7:00 pm”。而不是（它现在应该找到的唯一主题）“Test1 by: Cruciatum July 8th, 2012, 10pm”。

谁能弄清楚这有什么问题？（通过本页右侧的 iframe 使用：[网站](http://bpro.cu.cc)）

PS：它应该得到我的phpbb3论坛最后5个帖子的主题名称、作者、日期和时间。

PPS：这是 iframe 代码

```
<!-- Recent posts -->
<div class="divx" style="position:absolute; top:170px; right:10px; width:200px; height:300px;">
<iframe height="300px" width="200px" scrolling="no" src="fetch.php">
</iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:38:51.457

设法修复它：

```
<?php
// How Many Topics you want to display?
$topicnumber = 5;
// Scrolling towards up or down?
$scroll = "up";
// Change this to your phpBB path
$urlPath = "/forum";

// Database Configuration (Where your phpBB config.php file is located)
include 'forum/config.php';

$table_topics = $table_prefix. "topics";
$table_forums = $table_prefix. "forums";
$table_posts = $table_prefix. "posts";
$table_users = $table_prefix. "users";
$link = mysql_connect("$dbhost", "$dbuser", "$dbpasswd") or die("Could not connect");
mysql_select_db("$dbname") or die("Could not select database");

$query = "SELECT t.topic_id, t.topic_title, t.topic_last_post_id, t.forum_id,
p.post_id, p.poster_id, p.post_time, u.user_id, u.username
FROM $table_topics as t, $table_forums as f, $table_posts as p, $table_users as u WHERE t.topic_id = p.topic_id AND f.forum_id = t.forum_id AND t.topic_status != 2 AND p.post_id = t.topic_last_post_id AND t.topic_last_poster_id = u.user_id ORDER BY p.post_id DESC LIMIT $topicnumber";
$result = mysql_query($query) or die("Query failed");

echo "";
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo "";

print "<a href=\"forum/viewtopic.php?f=" .$row["forum_id"] ."&t=" .$row["topic_id"] ."\"><font color=\"darkred\">" .$row["topic_title"] ."</font></a>       by: <a href=\"forum/memberlist.php?mode=viewprofile&u=" .$row["user_id"] ."\"><font color=\"darkred\">" .$row["username"] ."</font></a> 
" .date('F j, Y, g:i a', $row["post_time"]) ."<br/><br/>";
}

mysql_free_result($result);
mysql_close($link);
?> 
```

我在的时候还添加了链接和东西：>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:00:08.697

典型的 PHP 脚本和典型的 PHP 问题 - 不检查任何东西。

*   检查错误代码
*   检查返回的行数
*   检查发送到表的 SQL
*   手动运行 SQL 并检查结果

我相信你会弄清楚的。

# linux - 如何将 Amazon EC2 Linux DISPLAY 指向我的 Macbook 上的 X11？

> ID：11386511
> 
> 赞同：4
> 
> 时间：2012-07-08T20:37:56.287
> 
> 标签：linux, unix, x11

我正在尝试在我的新 Amazon EC2 Linux 实例上安装 Glassfish。

安装告诉我设置`DISPLAY`变量。

我使用[http://www.whatismyip.com](http://www.whatismyip.com)确定我的 IP （例如 123.45.67.89）

我在 Mac 上打开 X11 并在 linux 中设置 ip 地址（例如 export DISPLAY=123.45.67.89）

但是 Glassfish 安装抛出异常

```
java.lang.InternalError: Can't connect to X11 window server using '123.45.67.89' as the value of the DISPLAY variable.
at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)
... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:19:15.830

您的 mac 可能无法通过远程接口使 X 可用（相对健全的默认设置）。执行此操作的惯用方法是将其通过隧道`ssh`，这有一个方便的好处，即可以减轻您配置`DISPLAY`变量的负担（更不用说让您免于输入清晰的 glassfish 凭据的尴尬！）。

从你的 Mac：

```
ssh -X user@remotehost 
```

现在，在`remotehost`：

```
./run_glassfish_somehow 
```

# cocoa - 如何创建 OSX .clr 调色板文件？

> ID：11386513
> 
> 赞同：19
> 
> 时间：2012-07-08T20:38:21.620
> 
> 标签：cocoa

在`~/Library/Colors`您可以找到在 OSX 的颜色选择器中创建的保存的调色板文件。这些文件的格式是什么？如何创建它们？我能弄清楚的最多的是它们可能是某种序列化的 NSObject 数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-08T20:43:05.447

它们由`NSColorList`类创建，记录在这里：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorList_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorList_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-25T17:57:05.263

[这个网站有一个更好的列表，你可以用颜色列表做的事情，](http://www.robinwood.com/Catalog/Technical/OtherTuts/MacColorPicker/MacColorPicker.html)然后苹果可疑的简朴产品。

包括...</p>

*   开始您自己的调色板列表
*   给你的调色板起一个有意义的名字
*   将颜色添加到您的调色板列表
*   命名调色板列表中的颜色
*   按名称查找列出的颜色
*   按颜色查找列出的颜色
*   从调色板列表中删除颜色
*   删除整个列表
*   打开存储在硬盘上的调色板
*   备份您的调色板
*   在列表中排列颜色（不要太兴奋；这是一个乏味的手动过程。）

就我个人而言，我仍然在追求从旧的 NeXt 盒子中获取 Pantone CLR 文件的令人沮丧的无形圣杯。任何可以抓住*这些*傻瓜的人都会大吃一惊。蜡笔是给孩子们的。嗯。

**编辑：** 这是一个如何创建一个简单示例`NSColorList`

```
NSColorList *list = [NSColorList.alloc initWithName:@"Pretty Colors"];
[ @{ @"mauve":     [NSColor colorWithDeviceRed:.6 green:.6 blue:.5 alpha:1],
     @"mustard":   [NSColor colorWithDeviceRed:.6 green:.5 blue:.3 alpha:1],
     @"poop-brown":[NSColor colorWithDeviceRed:.4 green:.4 blue:.1 alpha:1] }        

    enumerateKeysAndObjectsUsingBlock:^(id name, id color, BOOL *s) {

    [list setColor:color forKey:name];
}]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-29T16:25:07.897

还值得一看 Ramon Poca 的[ColorTools](https://github.com/ramonpoca/ColorTools)。

**Html2Clr**会将文本文件转换为`.clr`文件。

例如：**flag-colors.txt**

```
#D90012 RED
#0033A0 BLUE
#F2A800 GOLD 
```

可以转换为：

```
./Html2Clr ./flag-colours.txt 
```

要生成**flag-colors.clr**，一旦放置在**~/Library/Colors**中，它将在 OSX 颜色选择器中可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T20:49:28.983

您可以使用任何应用程序中的系统颜色面板手动创建它们，或者使用 NSColorList 类以编程方式创建它们。

# php - php从数组中删除值

> ID：11386521
> 
> 赞同：-1
> 
> 时间：2012-07-08T20:39:14.250
> 
> 标签：php, arrays

需要帮助替换数组值我正在尝试检查经验和空间是否存在于下面的数组中并用经验最大值替换空间（即下一个数组值，如果其相等的空/空格替换为经验最大值），我已经粘贴了下面的代码用于查找和替换数组值，它替换经验来体验最大值而不是空来体验最大值

```
array[1] => name,
array[2] => Work Experience,
array[3] => ,
array[4] => company,
array[5] => location 
```

o/p：

```
array[1] => name,
array[2] => Work Experience,
array[3] => Work Experience Max,
array[4] => company,
array[5] => location

$search = "Work Experience";
foreach ($val as $key=> $cnt) {
    // echo "inside foreach ".$cnt;
    if ($cnt == $search) {
        echo  $keyvalue = $key;
        break;
    }
}
if (isset($keyvalue)) {
    $firstarryval = array_splice($val, $keyvalue, 1);
}

if ($firstarryval == '') {
    array_splice($val, $keyvalue, 0, "Work Experience Max");
} else {
    array_splice($val, $keyvalue, 0, "Work Experience Max");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:47:41.150

好的，这是解释的解决方案：

```
$arr = array( 0=>'name', 1=>'Work Experience', 2=>'', 3=>'company', 4=>'location' );
var_export($arr); echo '<br/>';
$search = "Work Experience";
$arrkey = false;
foreach($arr as $key=>$value){ // set variables and advance internal pointer
    echo "inside foreach $key => $value <br/>";
    if( $value == $search ) {
        echo $key;
        echo $arrkey = key($arr); // internal php pointer already points to next array key
        break;
    }
}
if ($arrkey!=false && empty($arr[$arrkey])) {
    $arr[$arrkey] = 'Work Experience Max';
}
echo '<br/>'; var_export($arr); 
```

有用的链接：[foreach](http://php.net/manual/en/control-structures.foreach.php)、[key](http://php.net/manual/en/function.key.php)、[empty](http://sk.php.net/manual/en/function.empty.php)。希望它会有所帮助！:-)

# php - 从php中的文件夹访问文件

> ID：11386525
> 
> 赞同：0
> 
> 时间：2012-07-08T20:39:46.977
> 
> 标签：php

在 php 中，我有一个表单，用户可以通过单击按钮查看评论

```
echo "<td> <form action=\"viewComments.php?id=$pid\" method=\"post\">"; 
```

当我将 viewComments.php 放在同一个文件夹中时，这可以正常工作。我想组织我的代码并将 viewComments.php 放在一个文件夹中，让我们说“动作”。我该怎么做呢？换句话说，如果我想访问名为“actions”的文件夹中的“viewComments.php”，如何在此处反映呢？回声“”；有人可以帮忙吗？

我有 blog_created/thisScript.php - 这里有我的代码，而我的 viewComments.php 在 blog_created/actions/viewComments.php 中......它不起作用......它说 - 请求的 URL /~user/blog_created/在此服务器上未找到 viewComments.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:42:22.173

```
echo "<td> <form action=\"actions/viewComments.php?id=$pid\" method=\"post\">"; 
```

这是要你实现的吗？

# java - 我的线程中的 NoClassDefFoundError 异常

> ID：11386526
> 
> 赞同：0
> 
> 时间：2012-07-08T20:39:47.203
> 
> 标签：java, exception, noclassdeffounderror

我收到此错误：

```
Exception in thread "http-server" java.lang.NoClassDefFoundError: org/w3c/jigmonitor/ReplyServer 
```

但我不明白为什么。有人可以解释为什么会这样吗？

这是导致问题的类：

```
public class ReplyServer implements Serializable
{
    public ReplyServer()
    {
        super();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:39:09.643

看起来你定义的类没有被试图加载它的东西找到。根据我的经验，这是由以下三个问题之一引起的：

1.  您对该类的包声明不正确。在这种情况下，http-sever 线程上的某些东西期望您的类在包 org.w3c.jigmonitor 中声明。
2.  您的源文件不在正确的目录中。在这种情况下，您的源文件应该位于像“org/w3c/jigmonitor/”这样的目录结构中，前提是这是您真正想要的包。
3.  ReplyServer 的编译类路径不在 JVM 的类路径中。您可以通过查看用于启动 JVM 的类路径并查看该类是否确实存在来检查这一点。在大多数通用设置 servlet 设置中，将有一个“WEB-INF/classes”文件夹供您查看。

祝你好运！

（大卫发布的链接提供了大量关于此类问题和可能原因的信息。我建议将其隐藏起来以备后用）

# windows - 如何快速从一个进程切换到另一个进程？

> ID：11386528
> 
> 赞同：3
> 
> 时间：2012-07-08T20:40:13.430
> 
> 标签：windows, multithreading, assembly, synchronization, driver

我需要在沙盒进程上运行不安全的本机代码，并且需要减少进程切换的瓶颈。两个进程（控制器和沙箱）共享两个自动重置[事件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa964766(v=vs.85).aspx)和用于通信的映射文件（共享内存）的一致视图。

为了使这篇文章更小，我从示例代码中删除了初始化，但事件由控制器创建，使用 DuplicateHandle 复制，然后在工作之前发送到沙箱进程。

**控制器来源：**

```
void inSandbox(HANDLE hNewRequest, HANDLE hAnswer, volatile int *shared) {
  int before = *shared;
  for (int i = 0; i < 100000; ++i) {
    // Notify sandbox of a new request and wait for answer.
    SignalObjectAndWait(hNewRequest, hAnswer, INFINITE, FALSE);
  }
  assert(*shared == before + 100000);
}

void inProcess(volatile int *shared) {
  int before = *shared;
  for (int i = 0; i < 100000; ++i) {
    newRequest(shared);
  }
  assert(*shared == before + 100000);
}

void newRequest(volatile int *shared) {
  // In this test, the request only increments an int.
  (*shared)++;
} 
```

**沙盒来源：**

```
void sandboxLoop(HANDLE hNewRequest, HANDLE hAnswer, volatile int *shared) {
  // Wait for the first request from controller.
  assert(WaitForSingleObject(hNewRequest, INFINITE) == WAIT_OBJECT_0);
  for(;;) {
    // Perform request.
    newRequest(shared);
    // Notify controller and wait for next request.
    SignalObjectAndWait(hAnswer, hNewRequest, INFINITE, FALSE);
  }
}

void newRequest(volatile int *shared) {
  // In this test, the request only increments an int.
  (*shared)++;
} 
```

**测量：**

*   `inSandbox()`- 550 毫秒，约 350k 上下文切换，42% CPU（25% 内核，17% 用户）。
*   `inProcess()`- 20ms，~2k 上下文切换，55% CPU（2% 内核，53% 用户）。

该机器是Windows 7 Pro，Core 2 Duo P9700，内存为8gb。

一个有趣的事实是，沙盒解决方案使用了 42% 的 CPU 与 55% 的进程内解决方案。另一个值得注意的事实是沙盒解决方案包含 350k 上下文切换，这比我们可以从源代码中推断出的 200k 上下文切换要多得多。

我需要知道是否有办法减少将控制转移到另一个进程的开销。我已经尝试使用管道而不是事件，而且情况更糟。我还尝试完全不使用任何事件，方法是在每个请求上进行沙盒调用`SuspendThread(GetCurrentThread())`和控制器调用`ResumeThread(hSandboxThread)`，但性能类似于使用事件。

如果您有使用程序集（例如执行手动上下文切换）或 Windows 驱动程序工具包的解决方案，也请告诉我。我不介意必须安装驱动程序来加快速度。

我听说 Google Native Client 做了类似的事情，但我只找到[了这个文档](https://sites.google.com/a/chromium.org/dev/nativeclient/reference/anatomy-of-a-sys)。如果您有更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:16:33.053

首先要尝试的是提高等待线程的优先级。这应该会减少无关上下文切换的数量。

或者，由于您使用的是 2 核系统，因此使用[自旋锁](http://en.wikipedia.org/wiki/Spinlock)而不是事件将使您的代码更快，但会以系统性能和功耗为代价：

```
void inSandbox(volatile int *lock, volatile int *shared) 
{
  int i, before = *shared;
  for (i = 0; i < 100000; ++i) {
    *lock = 1;
    while (*lock != 0) { }
  }
  assert(*shared == before + 100000);
}

void newRequest(volatile int *shared) {
  // In this test, the request only increments an int.
  (*shared)++;
}

void sandboxLoop(volatile int *lock, volatile int * shared)
{
  for(;;) {
    while (*lock != 1) { }
    newRequest(shared);
    *lock = 0;
  }
} 
```

在这种情况下，您可能应该设置线程关联掩码和/或降低旋转线程的优先级，以便它不会与繁忙的线程竞争 CPU 时间。

理想情况下，您会使用混合方法。当一方要忙一段时间时，让另一方等待一个事件，以便其他进程可以获得一些 CPU 时间。您可以提前一点触发事件（使用自旋锁保持同步），以便其他线程在您准备好时准备好。

# c# - C# HttpWebRequest.GetRequestStream() 在使用代理时死亡

> ID：11386529
> 
> 赞同：0
> 
> 时间：2012-07-08T20:40:25.217
> 
> 标签：c#, proxy, httpwebrequest

我有以下代码：

```
 HttpWebRequest request = createRequest("http://somesite", true);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.Headers.Add("Accept-Encoding", "gzip, deflate");
        request.Proxy = new WebProxy("what:ever");

        string postData = "my data";
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        request.ContentLength = byteArray.Length;

        using (var dataStream = request.GetRequestStream())
        {
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Flush();
        } 
```

当我要求 VS 中断第一次机会 CLR 异常时，request.GetRequestStream() 在内部抛出 NullReferenceException，然后向我的代码抛出 System.Net.WebException（超时）异常。

当我禁用代理（直接工作）时，它可以工作。

它在我家的电脑上工作得很好，但在这里不行（租用的公寓，不同的互联网连接）。

我在两台机器上使用相同的设置。在上面找不到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:12:38.010

好吧，将实现更改为使用 WebClient.UploadData 似乎可以解决问题。谢谢你。

# linq - could not resolve property (complex properties)

> ID：11386533
> 
> 赞同：2
> 
> 时间：2012-07-08T20:40:52.947
> 
> 标签：linq, nhibernate, queryover

I have a asp.net mvc application with NHibernate and I do not know how to resolve a problem to query some data. I have this query:

```
// create query
var query = session.QueryOVer<Laudo>().Fetch(x => x.Equipament).Eager;

// add some filters
if (idEquipament.HasValue) 
  query = query.And(x => x.Equipament.Id == idEquipament.Value);

//I got the error here...
if (idCompany.HasValue)
  query = query.And(x => x.Equipament.Company.Id == idCompany.Value); 
```

When I try to execute this query, I've got an exception with this message: "*could not resolve property: Equipament.Company.Id of: DomainModel.Laudo*"

what can I do to fix this problem? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:11:41.600

You cannot use another entity property like that. NHibernate expects expression that can be evaluated to property of the current entity. You need to use [`JoinQueryOver`](http://www.nhforge.org/doc/nh/en/index.html#queryqueryover-associations) or [`JoinAlias`](http://www.nhforge.org/doc/nh/en/index.html#queryqueryover-aliases) to join another entity, and perform `where` after that.

With `JoinQueryOver`:

```
// ...
query = query.JoinQueryOver(x => x.Equipment)
    .JoinQueryOver(x => x.Company)
    .Where(c => c.Id == idCompany.Value); 
```

With `JoinAlias`:

```
Equipment equipment = null;
Company company = null;

// ...
query = query.JoinAlias(x => x.Equipment, () => equipment)
    .JoinAlias(() => equipment.Company, () => company)
    .Where(() => company.Id == idCompany.Value); 
```

Some more info:
[What is the difference between JoinQueryOver and JoinAlias?](https://stackoverflow.com/questions/5416560/what-is-the-difference-between-joinqueryover-and-joinalias)
[What can be used as a NHibernate QueryOver alias?](https://stackoverflow.com/questions/6893733/what-can-be-used-as-a-nhibernate-queryover-alias)
[Complex nHibernate QueryOver expression](https://stackoverflow.com/questions/5519282/complex-nhibernate-queryover-expression)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:38:38.030

The tags chosen for your question make me think you didn't want to use QueryOver, but LINQ.

This is achieved by using the extension method `Query`, in the `NHibernate.Linq` namespace:

```
var query = session.Query<Laudo>().Fetch(x => x.Equipament);
if (idEquipament.HasValue) 
  query = query.Where(x => x.Equipament.Id == idEquipament.Value);
if (idCompany.HasValue)
  query = query.Where(x => x.Equipament.Company.Id == idCompany.Value); 
```

# php - PHP 返回多个函数

> ID：11386534
> 
> 赞同：0
> 
> 时间：2012-07-08T20:40:58.623
> 
> 标签：php

我是 PHP 新手，所以如果这看起来一团糟，我深表歉意……我正在尝试使用以下三个函数验证表单 - checkName、checkEmail 和 checkMessage。我遇到的问题是当我提交表单时，它总是显示第一个错误，即使输入是正确的。谁能告诉我我做错了什么？

```
function checkName(){

    if($name == ''){
        print "Please enter your name!<br />";
        return false;
    }
    else{
        if(strlen($name)<2) {
            print "Your name should be more than 1 characters long!<br />";
            return false;
        }
        else{
            return true;
        }
    }
}
function checkEmail(){

    if($from == '') {
        print "Please enter your email address!<br />";
        return false;
    } 
    else{
        if(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$", $from)){
            print "Please enter a valid email address!<br />";
            return false;
        }
        else{
            return true;
        }
    }
}
function checkMessage(){

    if($message == '') {
        print "Please enter your message!<br />";
        return false;
    }
    else{
        if(strlen($message)<10) {
            print "Your message should be more than 10 characters long!<br />";
            return false;
        }
        else{
            return true;
        }
    }
}

if($validation == ''){

    $a = checkName();
    $b  =  checkEmail();
    $c = checkMessage();

    $result = array($a, $b, $c);

    return $result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:43:39.803

将要测试的变量传递到您的函数中以检查它们。你现在拥有它的方式，它会假设你正在使用全局变量`$name,$message,$email`。这将需要`global`在函数中使用关键字（或其他一些选项），但被认为是不好的做法。最好传递变量

### 称为：

```
$a = checkName($name);
$b  =  checkEmail($email);
$c = checkMessage($message); 
```

### 定义

```
// Pass variable to function
function checkName($name){

    if($name == ''){
        print "Please enter your name!<br />";
        return false;
    }
    else{
        if(strlen($name)<2) {
            print "Your name should be more than 1 characters long!<br />";
            return false;
        }
        else{
            return true;
        }
    }
}
function checkEmail($email){
  // etc...
}
function checkMessage($message){
  // etc...    
} 
```

顺便说一句，作为一个经常需要维护别人编写的旧 PHP 代码的人，我可以告诉你，*强烈*建议你不要使用`$a,$b,$c`. 而是让它们像`$nameResult, $emailResult, $messgeResult`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:43:14.330

在函数中，您的变量未定义。如果完全定义了它们，则必须`global $variable`在函数中使用它们才能在函数中定义它们

示例：坏：

```
$var = 'Hello';
function fun () {return $var;}
echo fun () . ' world'; 
```

好的：

```
$var = 'Hello';
function fun () {
    global $var;
    return $var;
}
echo fun () . ' world'; 
```

# python - Python stdin readline 超过 4096 字节？

> ID：11386535
> 
> 赞同：4
> 
> 时间：2012-07-08T20:41:24.193
> 
> 标签：python, stdin

> **可能重复：**
> [为 sys.stdin 设置较小的缓冲区大小？](https://stackoverflow.com/questions/3670323/setting-smaller-buffer-size-for-sys-stdin)

我有一个长度超过 4096 字节的输入行进入 Python 中的标准输入。代码简单地说：

```
line = sys.stdin.readline() 
```

这是在 4096 字节处截断行。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-08T20:45:35.960

```
line = sys.stdin.readline()[1*1024*1024] 
```

当我必须读取文件（几 MB）时，这对我有用。

# c++ - 我在 xcode 3.2 中的一本书中使用的代码中的 C++“SIGABRT”错误

> ID：11386536
> 
> 赞同：0
> 
> 时间：2012-07-08T20:41:45.870
> 
> 标签：c++, xcode

我在我的 macbook snow leopard 10.6.8 上使用 Xcode 3.2，我正在尝试运行我从 Juan Soulie 的 C++ 语言教程中复制的代码，但是当我运行它时，它会出现第一行“你叫什么名字”和我输入它，但随后出现错误。

错误是未分配被释放的指针***在 malloc_error_break 中设置断点以调试“SIGABRT”。我不知道出了什么问题，因为代码只是被复制的。那么问题是什么，代码有问题吗？:::

```
//cin with strings

#include <iostream>
#include <string>
using namespace std;

int main () 
{
 string mystr;
 cout << "What's your name? ";
 getline (cin, mystr);
 cout << "Hello " << mystr << ".\n";
 cout << "What's your favourite team? ";
 getline (cin, mystr);
 cout << "I like " << mystr << " too!\n";
 return 0;
}
//cin with strings 
```

# ruby-on-rails - 在 Rails 中覆盖 Float 类

> ID：11386537
> 
> 赞同：0
> 
> 时间：2012-07-08T20:41:47.307
> 
> 标签：ruby-on-rails, ruby

我在 lib 文件夹中创建了 Float 类：

```
class Float
  def precision(p = 2)
    # Make sure the precision level is actually an integer and > 0
    raise ArgumentError, "#{p} is an invalid precision level. Valid ranges are integers > 0." unless p.class == Fixnum or p < 0
    # Special case for 0 precision so it returns a Fixnum and thus doesn't have a trailing .0
    return self.round if p == 0
    # Standard case
    (self * 10**p).round.to_f / 10**p
  end
end 
```

在 rspec 测试中，有效。但是当应用程序运行时，会引发此错误：

```
undefined method `precision' for 5128.5:Float 
```

如何使这个覆盖工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:16:07.450

Ruby 已经`round`为`Float`. 不需要您的实施。

```
0.12345.round(2) # => 0.12
0.12345.round(3) # => 0.123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:47:48.690

我认为应该这样做。

```
module MyFloatMod
  def precision(p = 2)
    # Make sure the precision level is actually an integer and > 0
    raise ArgumentError, "#{p} is an invalid precision level. Valid ranges are integers > 0." unless p.class == Fixnum or p < 0
    # Special case for 0 precision so it returns a Fixnum and thus doesn't have a trailing .0
    return self.round if p == 0
    # Standard case
    (self * 10**p).round.to_f / 10**p
  end
end

Float.send(:include, MyFloatMod) 
```

编辑：几乎忘记了您还需要确保在您的应用程序启动期间将所有这些都包含在某个地方。

# javascript - 放置继承，创建方法 - 内部还是外部对象？

> ID：11386545
> 
> 赞同：0
> 
> 时间：2012-07-08T20:43:01.613
> 
> 标签：javascript, class, inheritance, prototype

我是新来的，所以我希望我不违反任何规则......

正是因为如此，我正在研究 JavaScript 中的对象继承......并且正在为这件事找出“我的”规则......现在我遇到了“一些”问题......

这就是我喜欢做的事情：

我喜欢有一个方法（函数），它更像是我正在创建的对象的标识符，这个方法也是对象的创建者......但是我也希望使用同一个对象来实例化创建的对象的“数据类型”（我想代码解释得更多……这是我坚持的部分）

```
 TRecord = function() {
      this.Class = 'TRecord';
      F = function() {};
      F.prototype = arguments[0]; //args is an object (se below)
      return(new F());
    };

    TRecord.create = function(O) { // this method will not be executed as I like
        if(O) alert(O.Class);      // inside above object when define there with
        <new O object created and returned - code missing>
    };                             // this.create = function(){};
                                   // but if defined here it will, se below...

    TMessage = TRecord({
      'Class': 'TMessage',
      'msgID': Number(0),
      'data': Object('Hello')
    });

    aMSG = TRecord.create(TMessage); // the TMessage instance will be created
                                     // with the above method... and
    alert(aMSG.Class);               // will output TMessage... 
```

为什么我不能在 TRecord 中实现 TRecord.create 函数？

...我在发布整个 source.js 时遇到了一些麻烦（格式不起作用）所以这将不得不到期，但是我确实有一些其他构造函数/创建函数用于“真实”函数（类）对象而不是记录（数据对象）......有效 - 这些实现有点不同，支持深度继承......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:54:14.847

`this`关键字是指调用函数的范围。在您的示例中：

```
TMessage = TRecord({...}); 
```

TRecord 将使用`global`or`window`对象作为其范围调用，或者在严格模式下调用`undefined`. `this`关键字仅指构造函数内部的新对象，因为关键字如何将调用`new`与新范围绑定在一起。

有关更多信息，请参阅[https://developer.mozilla.org/en/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:55:37.170

不完全确定你想要做什么，但它看起来`TRecord`应该是某种类工厂。尝试

```
TRecord = function() {
  var F = function() {};
  F.prototype = arguments[0];
  var result = new F();
  result.Class = 'TRecord';
  return result;
}; 
```

# css - 响应式布局不适用于中等大小。工作越来越小

> ID：11386546
> 
> 赞同：1
> 
> 时间：2012-07-08T20:43:04.767
> 
> 标签：css, responsive-design

在 800 像素宽的视口中，标题中的徽标会下降并且导航会发生变化。在稍小的尺寸下，它会适当地响应。在更大的尺寸，它也很好。我无法弄清楚我在 css 中做错了什么导致了这种情况。

[http://smore.rvadv.com/?page_id=60](http://smore.rvadv.com/?page_id=60)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:25:48.100

在我看来，这是#logo 上的 margin-left:5%。你不应该像这样混合百分比和像素测量。坚持其中一个，所以在这种情况下，将 5% 更改为像素数量。

# java - IllegalStateException 错误

> ID：11386548
> 
> 赞同：0
> 
> 时间：2012-07-08T20:43:06.777
> 
> 标签：java, sqlexception

我是 Java EE 的初学者，在创建登录页面时遇到问题。我制作了一个通用登录页面，工程师可以通过该页面登录到他/她的帐户。工程师的用户名以“engg”开头。因此，我编写了以下代码，并在输入错误的用户名（例如我的表中不存在的“uname100”）时出现 IllegalStateException 错误。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.ResultSet;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import sun.java2d.pipe.GeneralCompositePipe;

import accessdb.Dao;
import accessdb.Getset;

/**
* Servlet implementation class AdminLogIn
*/
public class AdminLogIn extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
    * @return 
    * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
    */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        try {
            String username=request.getParameter("username"); 
            String password=request.getParameter("password");
            Getset g=new Getset();
            Dao dao=new Dao();
            g.setuname(username);
            String newuname=username.substring(0,4);
            // System.out.println(""+username);
            if(newuname.equals("engg"))
            {
                ResultSet rs=dao.EnggLogInUseridCheck(g);

                System.out.println(""+newuname);

                while(rs.next())
                {
                    String uname=rs.getString("uname");
                    System.out.println(""+uname);
                    if(uname.equals(username))
                    {
                        g.setuname(username);
                        System.out.println(""+username);
                        System.out.println(""+uname);
                        ResultSet rs1=dao.EnggLogInPasswordCheck(g);
                        while(rs1.next())
                        {
                            String password1=rs1.getString("password");
                            if(password1.equals(password))
                            {
                                System.out.println(""+password1);
                                response.sendRedirect("engghome.jsp");
                                break;
                            }
                            else
                            {
                                response.sendRedirect("login.jsp");
                                return;
                            }
                        }
                        break;
                    }
                    else
                    {
                        response.sendRedirect("login.jsp");
                        return;
                    }
                }
            }
            else
            {
                response.sendRedirect("login.jsp");
                return;
            }
        }   catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:06:46.403

顺便说一句，我已经解决了这个问题。我修改了代码。工作代码是：

```
 import java.io.IOException;
 import java.io.PrintWriter;
 import java.sql.ResultSet;
 import java.sql.SQLException;

 import javax.servlet.ServletException;
 import javax.servlet.http.HttpServlet;
 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;

 import sun.java2d.pipe.GeneralCompositePipe;

 import accessdb.Dao;
 import accessdb.Getset;

 /**
 * Servlet implementation class AdminLogIn
  */
 public class Login extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub

    String username=request.getParameter("username");
    System.out.println(""+username);

    String password=request.getParameter("password");
    System.out.println("test user"+username+"GGG"+password);
    if(username.equals("") || password.equals("") || username.equals(" ") || password.equals(" "))
    {
        response.sendRedirect("login.jsp");

    }
     else
     {
         try {
    Getset g=new Getset();
    Dao dao=new Dao();
    g.setuname(username);

     String newuname=username.substring(0,4);

     if(newuname.equals("engg"))
    { 

           ResultSet rs;
            rs = dao.EnggLogInCheck(g);
            while(rs.next())
            {
                String uname=rs.getString("uname");
                String password1=rs.getString("password");
                if(uname.equals(username) && (password.equals(password1)))
                {
                    response.sendRedirect("engghome.jsp");
                    break;
                }

            }

            if(rs.next()==false)
            {
                response.sendRedirect("login.jsp");
                return;
            }

    }

     else if(newuname.equals("empl"))
        { 

               ResultSet rs;
                rs = dao.EmplLogInCheck(g);
                while(rs.next())
                {
                    String uname=rs.getString("uname");
                    String password1=rs.getString("password");
                    if(uname.equals(username) && (password.equals(password1)))
                    {
                        response.sendRedirect("empcmp.jsp");
                        break;
                    }

                }

                if(rs.next()==false)
                {
                    response.sendRedirect("login.jsp");
                    return;
                }

        }
     else if(username.equals("system"))
        { 

               ResultSet rs;
                rs = dao.LogInAdmin(g);
                while(rs.next())
                {

                    String password1=rs.getString(1);
                    if(password.equals(password1))
                    {
                        response.sendRedirect("adminhome.jsp");System.out.println("ffffff");
                        break;
                    }
                    else
                    {
                        response.sendRedirect("login.jsp");
                        return;
                    }
                }

           }

     else 
           {
               response.sendRedirect("login.jsp");
               return;

           }

     }
       catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
}
    } 
```

# django - 我应该如何设置和部署跨越多个子域和多个数据库的 django 项目？

> ID：11386551
> 
> 赞同：1
> 
> 时间：2012-07-08T20:43:21.430
> 
> 标签：django, apache, hosting, wsgi, multiple-databases

假设我正在构建一个托管网上商店的 Django 驱动网站，我们称之为 webshop.com。我希望它像这样工作：

一家名为 Foo 的商店想要一个网上商店。他们在 webshop.com 注册并创建子域 foo.webshop.com 以及数据库 foo_DB。Foo 的所有者使用 foo.webshop.com/admin 上的管理界面输入他们的产品。然后客户可以从 foo.webshop.com 购买产品。

商店酒吧有 webshop bar.webshop.com - 与 webshop.com 上托管的其他网上商店完全无关。等等。webshop.com 应该能够托管 100 家商店。

问题是：我应该如何使用 Django 来做这件事？

起初我想我应该为每个网店有一个 settings.py 文件、一个虚拟服务器和一个数据库。但是我担心运行所有这些实例会产生过多的开销。

非常感谢任何指示或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:51:26.297

我已经构建了六个像这样工作的应用程序（虽然在 python 中没有，但在这种情况下它真的无关紧要）。

从同一个虚拟主机提供所有服务。[使用urlparse](http://docs.python.org/library/urlparse.html)获取服务器名称一旦您有了想要匹配的字符串，就在主数据库中查找与您的客户数据库匹配的数据库详细信息（即主机名、用户名、密码等）。确保在查询该值之前对其进行清理。

我确实认为您最好的选择是分离您的客户数据库。这不仅可以确保一个数据库问题不会导致您所有的客户站点瘫痪，还可以让您将它们放在不同的服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:26:08.300

也许你可以使用`django-sudomains` [https://github.com/tkaemming/django-subdomains/](https://github.com/tkaemming/django-subdomains/)

它是一个为每个请求创建子域属性的中间件。

由于每个站点的功能都是相同的，因此您可以根据请求的 sudomain 查询产品。您还可以为用户分配子域。

除了考虑到这个子域之外，所有视图都是相同的。这种方法可以很容易地使用 1 个共享数据库，其中每个模型都有一个指向子域的字段或一个共享数据库，子域是数据库 naem。[https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database-for-a-queryset](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database-for-a-queryset)

# java - Android - 通过单个类填充多个 ListView

> ID：11386552
> 
> 赞同：1
> 
> 时间：2012-07-08T20:43:35.730
> 
> 标签：java, android, listview, android-activity, populate

我有多个活动，它们都有一个 ListView 驱动的菜单，单击一个按钮就会出现。

每个活动上的这些菜单包含相同的信息，因此不必通过将大量代码复制并粘贴到每个活动中来填充它们，我希望有一个类来获取数据并填充它。

每个活动中的一两行代码都可以，但我真的想尽可能地精简它。

有人知道这样做的方法吗？

谢谢，阿什利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:49:06.373

```
public class MyCustomActivity extends Activity 
```

似乎是最好的方法;-)

您可以在其中包含所有通用代码。

如果此菜单完全相同，您只需为您的每一项活动说：

```
ActivityA extends MyCustomActivity
ActivityB extends MyCustomActivity
ActivityC extends MyCustomActivity 
```

这是我使用的一个示例，因为我所有的活动都有相同的代码： [https ://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/Activity/BeTrainsActivity.java](https://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/Activity/BeTrainsActivity.java)

# git - 过滤历史记录以从子模块中清除 git repo

> ID：11386553
> 
> 赞同：1
> 
> 时间：2012-07-08T20:43:38.280
> 
> 标签：git, bazaar, git-submodules

如何在 git repo 中删除对不再使用子模块（合并它们）的子模块的引用，以便 bazaar 可以导入它？

> bzr：错误：您从中获取的存储库包含尚不支持的子模块。

根据 jelmer 应该是可能的：[https ://bugs.launchpad.net/bzr/+bug/402814/comments/43](https://bugs.launchpad.net/bzr/+bug/402814/comments/43)

> 没有办法告诉导入系统忽略历史记录。您可以提供一个自定义存储库，该存储库将子模块从历史记录中过滤出来，或者将它们从您在 github 上的历史记录中过滤出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:39:01.443

您不能，请参阅[https://answers.launchpad.net/launchpad/+question/88128/](https://answers.launchpad.net/launchpad/+question/88128/)了解原因。看起来好像他们正试图让 bzr 来处理这个问题，但还没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:47:09.833

尚不支持导入带有子模块的存储库。*bzr-git中*提供了处理子模块所需的支持，但子模块映射到的功能，称为“嵌套树”尚未完成。

# c++ - 将 OpenCV BGR 8 位图像转换为 CIE L*a*b*

> ID：11386556
> 
> 赞同：15
> 
> 时间：2012-07-08T20:44:34.300
> 
> 标签：c++, opencv, colors, rgb, bgr

我正在尝试使用文档中提供的函数将`Mat`表示具有 8 位深度的*RGB图像的给定转换为**Lab ：*

```
cvtColor(source, destination, <conversion code>); 
```

我尝试了以下转换代码：

```
CV_RGB2Lab
CV_BGR2Lab
CV_LBGR2Lab 
```

我每次都收到奇怪的结果，某些样本的“L”值大于 100，字面意思是 <107、125、130>。

我也在使用 Photoshop 检查结果 - 但鉴于 107 超出了 0 ≤ L ≤ 100 的可接受范围，我无法理解我的错误是什么。

**更新：** 我将在这里发布我的总体结果：给定由 8 位 BGR 表示的图像（Mat），图像可以通过以下方式转换：

```
cvtColor(source, destination, CV_BGR2Lab); 
```

然后可以通过以下方式访问像素值：

```
int step = destination.step;
int channels = destination.channels();
for (int i = 0; i < destination.rows(); i++) {
    for (int j = 0; j < destination.cols(); j++) {
        Point3_<uchar> pixelData;
        //L*: 0-255 (elsewhere is represented by 0 to 100)
        pixelData.x = destination.data[step*i + channels*j + 0];
        //a*: 0-255 (elsewhere is represented by -127 to 127)
        pixelData.y = destination.data[step*i + channels*j + 1];
        //b*: 0-255 (elsewhere is represented by -127 to 127)
        pixelData.z = destination.data[step*i + channels*j + 2];
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-09T15:46:58.897

如果有人对其他变量的范围感兴趣，`a`我`b`做了一个小程序来测试它们的范围。如果将所有用 RGB 表示的颜色转换为 OpenCV 中使用的 CieLab，则范围为：

```
0  <=L<= 255
42 <=a<= 226
20 <=b<= 223 
```

如果您在浮点模式下使用 RGB 值而不是 uint8，则范围将是：

```
0.0      <=L<= 100.0
-86.1813 <=a<= 98.2352
-107.862 <=b<= 94.4758 
```

PS 如果您想了解一个 LAB 值与另一个 LAB 值的区别（关于人类感知），您应该使用浮点数。用于将实验室值保持在 uint8 范围内的比例与它们的欧几里德距离相混淆。

这是我使用的代码（python）：

```
L=[0]*256**3
a=[0]*256**3
b=[0]*256**3
i=0
for r in xrange(256):
    for g in xrange(256):
        for bb in xrange(256):
            im = np.array((bb,g,r),np.uint8).reshape(1,1,3)
            cv2.cvtColor(im,cv2.COLOR_BGR2LAB,im) #tranform it to LAB 
            L[i] = im[0,0,0]
            a[i] = im[0,0,1]
            b[i] = im[0,0,2]
            i+=1

print min(L), '<=L<=', max(L)
print min(a), '<=a<=', max(a)
print min(b), '<=b<=', max(b) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-08T20:49:14.960

这是因为**L**值在 OpenCV中的范围**[0..255]内。**您可以简单地将此值缩放到所需的间隔（在您的情况下为**[0..100]**）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-24T16:35:03.640

我不确定 João Abrantes 在 A 和 B 上的范围。

[opencv 文档](http://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)已经明确提到了范围`CIE L*a*b*`。

[![一般范围](../Images/b06ea66718a71d2a6eaa1e457fcbbf23.png)](https://i.stack.imgur.com/wSGDp.png)

*   **8 位图像**

    [![8 位图像范围](../Images/b45b632fd05b7c6b8bae8bf5d2a79078.png)](https://i.stack.imgur.com/jpMPl.png)

从而导致一系列

```
0 <= L <= 255
0 <= a <= 255
0 <= b <= 255 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-27T08:57:37.627

如果有人遇到同样的问题：

请注意，在 OpenCV (2.4.13) 中，您**无法**将 CV_32FC3 BGR 图像转换为 Lab 颜色空间。也就是说：

```
//this->xImage is CV_8UC3
this->xImage.convertTo(FloatPrecisionImage, CV_32FC3);
Mat result;
cvtColor(FloatPrecisionImage, result, COLOR_BGR2Lab);
this->xImage = result; 
```

将**无法**工作

```
Mat result;
cvtColor(this->xImage, result, COLOR_BGR2Lab);
result.convertTo(this->xImage, CV_32FC3); 
```

奇迹般有效。我没有追查上述行为的原因；但是在我看来，这似乎不对，因为这实际上限制了图像的质量。

# django - 如何在 appengine 上对 django non-rel 进行空间查询

> ID：11386557
> 
> 赞同：2
> 
> 时间：2012-07-08T20:44:48.530
> 
> 标签：django, google-app-engine, django-nonrel

我在 google appengine 上将 django 和 django-nonrel 一起用于我使用 python 的项目之一。

我有一个在纬度/经度中编码为 DecimalFiled 的地理位置的实体（现在，可以改变它）

我想对这些实体进行边界框查询以及直接查找和边界框查询。

我可以使用哪个库或扩展？

我已经遇到过[GeoDjango](https://docs.djangoproject.com/en/dev/ref/contrib/gis/)，它不能在 appegine 和[GeoModel](http://code.google.com/p/geomodel/)上运行，它似乎不能用 django-nonrel 运行。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:22:54.097

GeoDjango 需要一些 GAE 不支持的东西。首先，它需要带有 C 扩展的 Python 模块才能正常工作。特别是 Geos 和 GDAL。其次，您需要一个 GeoDjango 支持的地理空间后端。目前，您可以选择 Spatialite、Postgis、Oracle 和 MySQL。因此，如果您在 GAE、Jython 或任何其他不支持这些 C 扩展的平台上工作，则不能选择 GeoDjango。

但是，有可用的选项。有一个名为[nonrel-geomodel](https://bitbucket.org/twanschik/nonrel-geomodel)的项目，但它看起来好像已经有一段时间没有更新了。还有一些使用 GAE 进行地理空间搜索的项目。您提到[地理模型](http://code.google.com/p/geomodel/)是 GAE 的一个选项。它不会为您提供紧密的 Django 集成，但有一种方法可以解决这个问题。解决此问题的一种方法是创建一个[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)来实现您需要的功能。它实际上并没有你想象的那么困难。

最后，如果你愿意，你可以自己滚动。MongoDB 支持使用 geohashing 的地理空间查询。有一些[Python geohashing](http://code.google.com/p/python-geohash/)库可用。一种选择是创建一个像这样的抽象基类。

```
class SomethingWithLocation(models.Model):
   lon = models.FloatField()
   lat = models.FloatField()
   geohash = models.CharField(editable=False)

   def save(self,*args,**kwargs):
       #Compute geohash here
       super(SomethingWithLocation,self).save(*args,**kwargs) 
```

然后你必须实现搜索功能。这不是微不足道的，但绝对有可能。

您可能还想查看[有关](https://stackoverflow.com/questions/5570378/how-to-make-a-custom-query-using-django-nonrel-and-mongodb)如何使用 Django nonrel 和 MongoDB 进行地理空间查询的相关问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:27:42.837

据我记得，这并不容易。但是我使用 GeoManager 和 geoutilsman 函数让它与 django-nonrel 一起工作。我在保存时更新实体上的 GeoCells。我用边界框查询一些片段：

**模型：**

```
 latitude = models.FloatField(_('latitude'), default=0,blank=True, null=True)   
    longitude = models.FloatField(_('longitude'), default=0,blank=True, null=True)
         location_geocells=fields.ListField(models.CharField(max_length=15),null=True,blank=True) #  
    objects = GeoManager() # Bring in other class objects for geomodel 
```

**用法**

```
from geoutilsmain.geotypes import Point
from functions.panafunctions import get_bounding_box 
```

..

```
center_point = Point(latitude, longitude)
logging.info("GEO search.  Point: "+str(center_point)+" Radius: "+str(radius))
mybox=get_bounding_box(latitude, longitude, radius) # 10: half side in miles
north=mybox.lat_max # Jon verified defs of north vs lat
south=mybox.lat_min
west=mybox.lon_min
east=mybox.lon_max
logging.info("Bounding box co-ords: North: "+str(north)+" East: "+str(east)+" South: "+str(south)+" West: "+str(west))
query_results=conceptdb.objects.within(north, east, south, west,max_results=limit)# within(north, east, south, west)

myarray=QuerySetToDict(query_results) 
```

..

def update_geocells(self): """将基础地理单元属性与实体的位置同步。

```
Updates the underlying geocell properties of the entity to match the
entity's location property. A put() must occur after this call to save
the changes to App Engine."""

if self.latitude and self.longitude:
    max_res_geocell = geocell.compute(self.location)
    self.location_geocells = [max_res_geocell[:res]
                              for res in
                              range(1, geocell.MAX_GEOCELL_RESOLUTION + 1)]
else:
    self.location_geocells = [] 
```

# scala - Scala 中 val 可变与 var 不可变

> ID：11386559
> 
> 赞同：108
> 
> 时间：2012-07-08T20:44:54.853
> 
> 标签：scala, collections, functional-programming, immutability

Scala 中是否有关于何时将 val 与可变集合一起使用以及何时将 var 与不可变集合一起使用的指南？或者你真的应该用不可变集合来瞄准 val 吗？

两种类型的收藏都给了我很多选择，而我常常不知道如何做出选择。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-08T21:30:06.947

很常见的问题，这个。困难的是找到重复项。

您应该争取*参考透明度*。这意味着，如果我有一个表达式“e”，我可以创建一个`val x = e`，并替换`e`为`x`。这是可变性破坏的属性。每当您需要做出设计决策时，请最大限度地提高参考透明度。

实际上，本地方法`var`是最安全`var`的，因为它不会逃避该方法。如果方法短一点，那就更好了。如果不是，请尝试通过提取其他方法来减少它。

另一方面，可变集合有*可能*逃脱，即使它没有。更改代码时，您可能希望将其传递给其他方法，或将其返回。这就是破坏参照透明度的事情。

在一个物体（一个领域）上，几乎同样的事情也会发生，但会产生更可怕的后果。无论哪种方式，对象都将具有状态，因此会破坏引用透明度。但是拥有一个可变集合意味着即使是对象本身也可能失去对谁在更改它的控制。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-08T21:04:26.053

如果您使用不可变集合并且需要“修改”它们，例如，在循环中向它们添加元素，那么您必须使用`var`s 因为您需要将生成的集合存储在某个地方。如果您只从不可变集合中读取，则使用`val`s.

一般来说，请确保不要混淆引用和对象。`val`s 是不可变引用（C 中的常量指针）。也就是说，当您使用 时`val x = new MutableFoo()`，您将能够**更改指向的对象**，`x`但无法**更改指向的对象** `x`。如果您使用`var x = new ImmutableFoo()`. 采纳我最初的建议：如果您不需要将参考点更改为哪个对象，请使用`val`s.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-14T21:01:04.857

回答这个问题的最好方法是举个例子。假设我们有一些过程只是出于某种原因收集数字。我们希望记录这些数字，并将集合发送到*另一个*进程来执行此操作。

当然，在我们将集合发送到记录器之后，我们仍在收集数字。假设在日志记录过程中有一些开销会延迟实际的日志记录。希望你能看到这是怎么回事。

如果我们将此集合存储在一个 mutable`val`中（可变的，因为我们不断地添加它），这意味着执行日志记录的进程将查看仍在由我们的集合进程更新的*同一对象。*该集合可能随时更新，因此当需要记录时，我们可能实际上并没有记录我们发送的集合。

如果我们使用不可变的`var`，我们会向记录器发送一个不可变的数据结构。当我们向我们的集合添加更多数字时，我们将用一个*新的不可变数据结构**替换*我们的。这并不意味着发送到记录器的集合被替换！它仍在引用它发送的集合。所以我们的记录器确实会记录它收到的集合。`var`

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-02T09:14:05.383

我认为这篇博文中的示例将更加清楚，因为在并发场景中使用哪个组合的问题变得更加重要：并发性[的不变性的重要性](http://learningfunctionalprogramming.blogspot.ro/2012/05/importance-of-immutability-for.html)。在我们讨论的同时，请注意 synchronized 与 @volatile 与 AtomicReference 之类的首选用法：[三个工具](http://twitter.github.io/scala_school/concurrency.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-07-12T00:08:36.393

`var immutable`对比`val mutable`

除了这个问题的许多优秀答案。这是一个简单的例子，它说明了潜在的危险`val mutable`：

可变对象可以在方法内部进行修改，将它们作为参数，但不允许重新分配。

```
import scala.collection.mutable.ArrayBuffer

object MyObject {
    def main(args: Array[String]) {

        val a = ArrayBuffer(1,2,3,4)
        silly(a)
        println(a) // a has been modified here
    }

    def silly(a: ArrayBuffer[Int]): Unit = {
        a += 10
        println(s"length: ${a.length}")
    }
} 
```

结果：

```
length: 5
ArrayBuffer(1, 2, 3, 4, 10) 
```

不会发生这样的事情`var immutable`，因为不允许重新分配：

```
object MyObject {
    def main(args: Array[String]) {
        var v = Vector(1,2,3,4)
        silly(v)
        println(v)
    }

    def silly(v: Vector[Int]): Unit = {
        v = v :+ 10 // This line is not valid
        println(s"length of v: ${v.length}")
    }
} 
```

结果是：

```
error: reassignment to val 
```

由于函数参数被视为`val`不允许重新分配。*

# javascript - Facebook：如何为我博客的每个帖子生成 fb 评论代码

> ID：11386562
> 
> 赞同：0
> 
> 时间：2012-07-08T20:45:42.973
> 
> 标签：javascript, python, facebook, plugins, web

我有一个包含各种帖子的博客，所以我尝试将 facebook 评论合并到我的帖子中，但它只生成单个 url 的代码。假设我有一个 url 为“example.com/post1”的帖子，我在 facebook 中输入评论代码生成器，我得到了在该特定帖子上显示 fb 评论的代码。但是，如果我有更多的帖子，例如“example.com/post2”等，我如何才能获得每个帖子的 fb 评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:32:37.710

joomla 的等价物是什么：

```
<div class="fb-comments" data-href="<?php echo get_permalink(); ?>" data-num-posts="2" data-width="470"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:48:26.237

我将向您展示我网站上的一些 PHP 代码。

我首先包含了 Javascript SDK，我假设你已经完成了。

然后我使用下面的代码。

```
<div class="fb-comments" data-href="[your site url]/post[post id]" data-num-posts="2" data-width="470"></div> 
```

康纳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:16:19.770

您使用的是什么博客平台？它是自定义的还是类似 Wordpress 的？

如果您使用的是 wordpress，您可以简单地在您希望出现评论的地方添加以下代码，它将获取当前的帖子 url（这将需要 php）

```
<div class="fb-comments" data-href="<?php echo get_permalink(); ?>" data-num-posts="2" data-width="470"></div> 
```

如果它不是 wordpress 博客，您可以使用 PHP 请求页面的当前 url，这应该允许对每个单独的页面进行评论

```
<div class="fb-comments" data-href="<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url;?>" data-num-posts="2" data-width="470"></div> 
```

我绝对不是PHP专家，但过去成功使用过这两种方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T20:40:58.727

这对我有用

```
<div class="fb-comments" data-href="<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url;?>" data-num-posts="2" data-width="470"></div> 
```

加上添加 facebook JS 代码。

使用

```
<?php echo get_permalink(); ?> 
```

不管用

# matlab - 矩阵维度必须同意最小最大归一化？

> ID：11386563
> 
> 赞同：0
> 
> 时间：2012-07-08T20:46:08.997
> 
> 标签：matlab, normalization

嗨，我收到下面所述的错误，我试图在 0 和 1 之间进行标准化。我得到的错误是：

```
columns =

     6

    ??? Error using ==> minus
    Matrix dimensions must agree.

    Error in ==> Kmeans at 54
        data = ((data-minData)./(maxData)); 
```

不知道我做错了什么？完整代码如下：

```
%% dimensionality reduction 
    columns = 6
    [U,S,V]=svds(fulldata,columns);

%% randomly select dataset
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows);

%# pick random columns
indY = randperm( size(fulldata,2) );
indY = indY(1:columns);

%# filter data
data = U(indX,indY);

%% apply normalization method to every cell
maxData = max(data);
minData = min(data);
data = ((data-minData)./(maxData)); 
```

数据集为 1000x6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:52:49.700

来自[Matlab 文档`min`](http://www.mathworks.co.uk/help/techdoc/ref/min.html)：

> 如果`A`是矩阵，`min(A)`则将 的列`A`视为向量，返回包含每列最小元素的行向量。

如果要查找矩阵的全局最小值，请使用以下任一形式：

```
min(min(A))
min(A(:)) 
```

# ms-access - 访问 2007 中两个日期之间的空参数

> ID：11386564
> 
> 赞同：1
> 
> 时间：2012-07-08T20:46:17.717
> 
> 标签：ms-access, asp-classic, ms-access-2007

我有一个查询如下：

```
select column_date, field1, field2, sum(field3) from table1
where field1 like '*xyz' and 
column_date between [please enter start date] and [please enter end date]
group by column_date, field1, field2 
```

当我将两个参数框都留空时，输出为空白。但我希望它们输出如下

1.  当我将两个参数框都留空时，我想显示所有记录
2.  如果我将日期放在任何一个参数框中，它应该只显示该日期的记录
3.  如果我将日期放在两个参数框中，它应该显示这些日期之间的所有记录。

这是我显示输出的asp代码。当我在两个文本框中插入值时它可以工作，但是如果我将其中任何一个或两个都留空，则会显示错误。

```
<html>
<body>
<%
dim startdate, enddate
startdate = Request.Form ("startdate")
enddate = Request.Form("enddate")
set conn = Server.CreateObject ("ADODB.Connection")
conn.open "connectionname"
set rs = Server.CreateObject ("ADODB.Recordset")
Sqlquery = "queryname '" & startdate & "', '" & enddate &'" "
rs.open sql, conn %>
<table>
<tr>
<%
For each x in rs.fields
response.write ("<th>" & x.name & "</th>") 
next %> </tr>
<tr><% Do Until rs.EOF %>
<% For each x in rs.Fields %>
<td>Response.write (x.value)</td>
<%next
rs.movenext %>
</tr>
<% loop
rs.close
conn.close %>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:50:10.803

我将从一个普通的 SELECT 查询开始找出 WHERE 子句。一旦你让它正常工作，将其转换为 GROUP BY 查询。

所以看看这个是否针对正确的记录：

```
PARAMETERS [Start Date] DateTime, [End Date] DateTime;
SELECT t.field1, t.field2, t.field3, t.column_date
FROM table1 AS t
WHERE
       t.field1 Like '*xyz'
    AND (         
       (t.column_date Between [Start Date] And [End Date])
    OR ([Start Date] Is Null And t.column_date = [End Date])
    OR (t.column_date = [Start Date] And [End Date] Is Null)
    OR ([Start Date] Is Null And [End Date] Is Null)
       ); 
```

假设第一个查询返回正确的行，我认为这个 GROUP BY 查询可能会给你你想要的。

```
PARAMETERS [Start Date] DateTime, [End Date] DateTime;
SELECT t.column_date, t.field1, t.field2, sum(t.field3)
FROM table1 AS t
WHERE
       t.field1 Like '*xyz'
    AND (         
       (t.column_date Between [Start Date] And [End Date])
    OR ([Start Date] Is Null And t.column_date = [End Date])
    OR (t.column_date = [Start Date] And [End Date] Is Null)
    OR ([Start Date] Is Null And [End Date] Is Null)
       )
GROUP BY t.column_date, t.field1, t.field2; 
```

如果从经典 ASP 运行此查询，则需要用 ANSI 通配符替换`%`Access 样式的`*`通配符。

```
t.field1 Like '%xyz' 
```

或者考虑使用`ALike`ANSI 通配符代替`Like`. 这样查询将始终以相同的方式运行，而无需切换通配符。

```
t.field1 ALike '%xyz' 
```

此外，使用经典 ASP，从 ADO Command 对象运行查询，并为参数提供值。

# ruby-on-rails - 如何使用 Refinery CMS 的 i18n gem 链接另一种语言的同一页面？

> ID：11386565
> 
> 赞同：1
> 
> 时间：2012-07-08T20:46:52.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, refinerycms, i18n-gem

我正在将一个站点转换为基于 Rails 的 Refinery CMS，我已经设置了[i18n 精炼 cms gem](https://github.com/parndt/refinerycms-i18n)，并且我已经创建了我的页面的多语言版本。我想在页面上创建一个语言环境切换器，以便用户可以单击一个标志并在他们所在的特定页面的各种语言之间切换。

如何获取页面的可用语言及其各自的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:59:41.100

```
# In a controller
::I18n.locale = params[:locale] 
```

* * *

```
<!-- In a view with a dropdown -->
<ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="drop4">
        <% Refinery::I18n.frontend_locales.each do |frontend_locale| %>
            <li>
              <%= link_to Refinery::I18n.locales[frontend_locale], refinery.url_for(:locale => frontend_locale) %>
            </li>
        <% end %>
      </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:24:35.320

```
<ul id="laguages">
    <%
    @page.translations.each do |t|
    %> 
        <li>
            <%= link_to "#{@page.translations.find_by_locale(t.locale).title} (#{Refinery::I18n.locales[t.locale]} #{image_tag("/assets/refinery/icons/flags/#{t.locale}.png")})".html_safe, refinery.url_for(:locale => t.locale) %>
        </li>    
    <%
    end
    %>
</ul> 
```

# asp.net-mvc-3 - 如何通过 MVC3 中的 ajax 表单帖子传递值？

> ID：11386567
> 
> 赞同：0
> 
> 时间：2012-07-08T20:47:02.063
> 
> 标签：asp.net-mvc-3, jquery

我能够上传文件并将其保存到目录中。这都很好。我需要在我的数据库中输入有关该文件的信息。到目前为止，我不确定在这种特殊情况下如何将值从视图传递给控制器​​。我试图将它作为方法参数传递，但没有发布该值。

这是我的剃刀形式：

```
@using (Html.BeginForm("AjaxUpload", "Cases", FormMethod.Post, new { enctype = "multipart/form-data", id = "ajaxUploadForm" }))
        {
        <fieldset>
        <legend>Upload a file</legend>
        <label>File to Upload: <input type="file" name="file" />(100MB max size)</label>

        <input id="ajaxUploadButton" type="submit" value="Submit" />

        </fieldset>
        }
    <div id="attachments">
        @Html.Partial("_AttachmentList", Model.Attachments)
    </div> 
```

这是我的 jQuery 来 ajaxify 表单：

```
$(function () {
    $('#ajaxUploadForm').ajaxForm({
        iframe: true,
        dataType: "json",
        beforeSubmit: function () {
            $('#ajaxUploadForm').block({ message: '<h1><img src="/Content/images/busy.gif" /> Uploading file...</h1>' });
        },
        success: function (result) {
            $('#ajaxUploadForm').unblock();
            $('#ajaxUploadForm').resetForm();
            $.growlUI(null, result.message);
            //$('#attachments').html(result);
        },
        error: function (xhr, textStatus, errorThrown) {
            $('#ajaxUploadForm').unblock();
            $('#ajaxUploadForm').resetForm();
            $.growlUI(null, 'Error uploading file');
        }
    });

}); 
```

这是控制器方法：

```
public FileUpload AjaxUpload(HttpPostedFileBase file, int cid)
        {
        file.SaveAs(Server.MapPath("~/Uploads/" + file.FileName));

        var attach = new Attachment { CasesID = cid, FileName = file.FileName, FileType = file.ContentType, FilePath = "Demo", AttachmentDate = DateTime.Now, Description = "test" };
        db.Attachments.Add(attach);
        db.SaveChanges();

        //TODO change this to return a partial view
        return new FileUpload { Data = new { message = string.Format("{0} uploaded successfully.", System.IO.Path.GetFileName(file.FileName)) } };
        } 
```

我希望将 cid 传递给此方法，以便我可以将记录插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:49:37.497

您可以将其作为隐藏字段包含在表单中：

```
@Html.Hidden("cid", "123") 
```

或作为路由值：

```
@using (Html.BeginForm(
    "AjaxUpload", 
    "Cases", 
    new { cid = 123 },
    FormMethod.Post, 
    new { enctype = "multipart/form-data", id = "ajaxUploadForm" }
))
{
    ...
} 
```

# php - 变量 PHP 变量

> ID：11386568
> 
> 赞同：0
> 
> 时间：2012-07-08T20:47:03.640
> 
> 标签：php, variables, for-loop

我对变量变量的概念不熟悉，我认为我并不完全理解它。

我要做的是创建一个 for 循环，该循环将根据可变数量的变量填充数组。

我正在尝试替换：（手动硬编码）

```
$numCorrectArray = array(1=>$q01TotalCorrect, 2=>$q02TotalCorrect, 3=>$q03TotalCorrect, 4=>$q04TotalCorrect, 5=>$q05TotalCorrect, 6=>$q06TotalCorrect, 7=>$q07TotalCorrect, 8=>$q08TotalCorrect, 9=>$q09TotalCorrect, 10=>$q10TotalCorrect, 11=>$q11TotalCorrect, 12=>$q12TotalCorrect, 13=>$q13TotalCorrect, 14=>$q14TotalCorrect, 15=>$q15TotalCorrect, 16=>$q16TotalCorrect, 17=>$q17TotalCorrect, 18=>$q18TotalCorrect, 19=>$q19TotalCorrect, 20=>$q20TotalCorrect, 21=>$q21TotalCorrect, 22=>$q22TotalCorrect, 23=>$q23TotalCorrect, 24=>$q24TotalCorrect, 25=>$q25TotalCorrect, 26=>$q26TotalCorrect, 27=>$q27TotalCorrect, 28=>$q28TotalCorrect, 29=>$q29TotalCorrect); 
```

与：（动态）

```
$numCorrectArray = array();

for($i=1; $i <= $stats->numberOfQuestions; $i++) {

    if($i < 10) {
        $questionNumber = "0" . $i; 
    } else {
        $questionNumber = $i;               
    }
    $varName = "q" . $questionNumber . "TotalCorrect";

array_push($numCorrectArray, $$varName);
} 
```

我将如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:28:58.883

我认为下面的方法更容易理解，因为它类似于普通的 PHP 代码。[在这里您可以了解更多](http://php.net/manual/en/language.variables.variable.php)。

```
$numCorrectArray = array();

$prefix = 'q';
$sufix  = 'TotalCorrect';

for($i=1; $i <= 30; $i++) {

    if($i < 10) {
        $questionNumber = "0" . $i; 
    } else {
        $questionNumber = $i;               
    }

    ${$prefix . $questionNumber . $sufix} = $i;

    $numCorrectArray[$i] = ${$prefix . $questionNumber . $sufix};

} 
```

# .htaccess - 如何使用 .htaccess 将根目录重定向到子域

> ID：11386569
> 
> 赞同：1
> 
> 时间：2012-07-08T20:47:17.493
> 
> 标签：.htaccess

我有一个像 example.com 这样的域。我希望将其上的所有流量发送到 sub.example.com。

目前我正在使用此代码，但它发送到 example.com/sub：

```
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteCond $1 !^sub
RewriteRule ^(.*)$ /sub/$1 [L] 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:53:27.717

我认为您必须使用 R 标志：`Forces an external redirect, optionally with the specified HTTP status code.` [详细信息...](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)

```
RewriteRule (.*) http://... [L,R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:52:33.443

只需将以下代码放入您的 .htaccess 文件中。

```
Redirect 301 / http://sub.domain.com 
```

请记住将[http://sub.domain.com](http://sub.domain.com)更改为您的子域。

康纳

# plone - 启动克隆时未找到克隆命令

> ID：11386571
> 
> 赞同：1
> 
> 时间：2012-07-08T20:47:30.623
> 
> 标签：plone

我刚刚在 debian 挤压上安装了 plone，没有问题。我试图从“plone /usr/local/Plone/zeocluster/bin/plonectl start”开始，我收到命令未找到。

我需要导出任何路径吗？“哪个克隆”没有给我任何东西。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:50:13.767

You don't need the "plone" at the beginning of your command, but you probably do need "sudo".

Try `sudo /usr/local/Plone/zeocluster/bin/plonectl start`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T07:01:33.303

因为 Plone 是使用 Python 构建的服务器，所以没有特殊的`plone`命令。

大概您使用了[Plone Unified 安装程序](http://plone.org/documentation/manual/installing-plone/installing-on-linux-unix-bsd/what-is-the-unified-installer)，创建了 ZEO 安装。因为它是安装在`/user/local/Plone`我也假设你[安装它为 root](http://plone.org/documentation/manual/installing-plone/installing-on-linux-unix-bsd/root-or-user-install)。

有关如何在安装后运行 Plone 的信息，请参阅[安装快速指南（在“最后步骤”下）](http://plone.org/documentation/manual/installing-plone/installation-quick-guide)；您只需运行命令`./bin/plonectl start`，或者使用您的完整路径：`/usr/local/Plone/zeocluster/bin/plonectl start`.

如果您还没有以 root 身份登录，则需要使用`sudo`;运行该命令。服务器将自动切换到`plone`统一安装程序安装的专用用户。

# objective-c - 在 iOS 中通过 UIImagePickerController 加载 UIActivityIndi cator

> ID：11386575
> 
> 赞同：3
> 
> 时间：2012-07-08T20:48:05.220
> 
> 标签：objective-c, ios, uiimage, uiimagepickercontroller, uiactivityindicatorview

我目前正在编写一个 iOS 应用程序，不喜欢 UIImagePickerController 消失的速度。

我打电话`[self dismissModalViewControllerAnimated:YES];`给我在里面的`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info;`那一刻，但是 imagePicker 需要几分钟才能消失，在一些照片上足够长，以至于应用程序对用户来说似乎是冻结的。

我想到的一个解决方案是在 UIImagePickerController 前面抛出一个 UIActivityIndi​​cator ，但我还没有想出一种方法来实现这一点。

谢谢！

编辑：我相信任何有关如何更快地保存 UIImages 的提示都会有所帮助。例如一种异步执行的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:13:45.077

Ray Wenderlich 提供了一个很棒的教程，介绍了如何使用大型中央调度和代码块： [http](http://www.raywenderlich.com/1888/how-to-create-a-simple-iphone-app-tutorial-part-33) ://www.raywenderlich.com/1888/how-to-create-a-simple-iphone-app-tutorial-part-33 您也可以使用作业队列和 performSelector:onThread:withObject:waitUntilDone: if 块对您来说很可怕。

基本上，这个想法是在主线程上做最少的实际工作，因为这是绘制 UI 的地方。以下是 RW 的解决方案，状态部分已注释掉。那是您放置活动指示器的地方。

```
- (IBAction)addPictureTapped:(id)sender {
    if (self.picker == nil) {   

        // 1) Show status
        //[SVProgressHUD showWithStatus:@"Loading picker..."];

        // 2) Get a concurrent queue form the system
        dispatch_queue_t concurrentQueue =
        dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

        // 3) Load picker in background
        dispatch_async(concurrentQueue, ^{

            self.picker = [[UIImagePickerController alloc] init];
            self.picker.delegate = self;
            self.picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            self.picker.allowsEditing = NO;    

            // 4) Present picker in main thread
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.navigationController presentModalViewController:picker animated:YES];    
                [SVProgressHUD dismiss];
            });

        });        

    }  else {        
        [self.navigationController presentModalViewController:picker animated:YES];    
    }
} 
```

# c# - C# 打开一个窗体，然后从另一个方法关闭它

> ID：11386576
> 
> 赞同：0
> 
> 时间：2012-07-08T20:48:08.433
> 
> 标签：c#, winforms, multithreading

我对 C# 还很陌生，并且遇到了一些问题。我相信线程可能是答案，但这只是我在寻找解决方案时听到的流行语。

```
命名空间测试
{
    公共部分类Form1：表格
    {
        私人表格2表格2；

        公共表格1（）
        {
            初始化组件（）；
            表格 2 = 新表格 2();
        }

        私人无效运行检查（对象源，System.Timers.ElapsedEventArgs e）
        {
            form2.ShowDialog();
            form2.TopMost = true;
        }

        私人无效runCheckFalse（）
        {
            form2.Hide();
        }
}

```

这只是我剥离的应用程序的一个快速代码片段，但是在尝试这个时我得到一个错误：跨线程操作无效：控制'Form2'从创建它的线程以外的线程访问。

另外作为旁注，我正在使用 form2.TopMost = true; 尝试在*其他所有内容*之上打开窗口，但这通常最终出现在 Visual Studio 等后面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T21:03:07.163

您需要使用`Invoke`才能使用来自不同线程的表单。

这是一篇很好的文章，解释了如何使用来自多个线程的 Windows 窗体控件：[How to: Make Thread-Safe Calls to Windows Forms Controls](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.100%29.aspx)

试试这个：

```
namespace Test
{
    public partial class Form1 : Form
    {
        private Form2 form2;

        public Form1()
        {
            InitializeComponent();
            form2 = new Form2();
        }

        private void runCheck(object source, System.Timers.ElapsedEventArgs e)
        {
            if (form2.InvokeRequired)
            {
                form2.Invoke(new EventHandler(delegate { form2.ShowDialog(); form2.TopMost = true; }));
            }
            else
            {
                form2.ShowDialog(); 
                form2.TopMost = true;
            }
        }

        private void runCheckFalse()
        {
            if(form2.InvokeRequired)
            {
                form2.Invoke(new EventHandler(delegate { form2.Hide(); }));
            }
            else
            {
                form2.Hide();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:10:15.517

您可以通过以下方式修改 runCheckFalse 方法 - 这是 Windows 窗体的一个相当标准的模式：

```
private void runCheckFalse()      
{       
    if(InvokeRequired)
      {
            BeginInvoke(new MethodInvoker(runCheckFalse));
            return;
      }                    
    form2.Hide();  
} 
```

实际上，它的作用是检查我们是否在 GUI 线程上运行（“if InvokeRequired”）。如果不是，我们在 GUI 线程上调用自己并立即返回。如果我们在 GUI 线程上运行，那么我们不需要做任何事情，只需像往常一样继续使用该方法。

如果需要使用参数：

```
private void runCheckFalse(bool someParameter)      
{       
    if(InvokeRequired)
      {
            BeginInvoke(new MethodInvoker(() => { runCheckFalse(someParameter);}));
            return;
      }                    
    form2.Hide();  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:55:50.850

WinForm 控件只能从 UI 线程更新。[看看这篇博](http://weblogs.asp.net/justin_rogers/pages/126345.aspx)文，它提供了许多方法来确保更新发生在 UI 线程上。这是一篇很长的文章，但值得一读。如果您没有时间阅读，那么快速而肮脏的方法是第一种。

埃里克

# coffeescript - CoffeeScript——子目录中的编译顺序

> ID：11386578
> 
> 赞同：5
> 
> 时间：2012-07-08T20:48:16.593
> 
> 标签：coffeescript

有没有办法在子目录中定义 CoffeeScript 编译顺序？请考虑以下示例：

文件：

*   src/App.coffee
*   src/view/B.coffee
*   src/view/a/A.coffee

A类扩展B的地方。

```
coffee --join js/app.js --compile src/view/ src/App.coffee 
```

这会在浏览器中引发错误：

```
Uncaught TypeError: Cannot read property 'prototype' of undefined 
```

如果我将文件夹**a**重命名为**z**，错误就消失了，一切正常。

*   src/view/ **z** /A.coffee

我希望编译器在进入 src/view/ 子目录之前从 src/view/ 读取所有 .coffee 文件。再说一次，有没有办法做到这一点？

**编辑：** PC Windows 7，CoffeeScript 版本 1.3.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T23:50:02.973

我认为唯一的解决方案是在构建脚本中手动创建编译顺序。您将创建一个带有文件名的有序集合，其中循环迭代并连接一个新的大字符串，可以将其编译为一个文件。

创建一个包含以下内容的 Cakefile，首先检查语法。并运行`cake build`. 应该可以，CoffeeScript 自带 cake。

```
fs = require 'fs'
{exec} = require 'child_process'

viewsDir = "src/view"
coffeeFiles = [
  'B'
  'A'
]

task 'build'
  # loops through coffeeFiles. 
  for file, index in coffeeFiles then do (file, index) ->
    fs.readFile "#{viewsDir}/#{file}", 'utf8', (err, content) ->
      appCoffee[index] = content
      compile() if --remaining is 0

  compile = ->
    fs.writeFile 'js/app.coffee', appCoffee.join('\n\n'), 'utf8', (err)   ->
      throw err if err
      exec 'coffee --compile js/app.coffee', (err, stdout, stderr) ->
        throw err if err
          console.log stdout + stderr

          # you can skip deleting the app.coffee file
          fs.unlink 'js/app.coffee', (err) ->
            throw err if err
            console.log 'Created app.coffe, compiled to app.js and removes app.coffee'

            # maybe additional taks 
            # invoke 'test' 
```

也记录在 Coffeescript 的 Wiki 中[https://github.com/jashkenas/coffee-script/wiki/[HowTo]-Compiling-and-Setting-Up-Build-Tools](https://github.com/jashkenas/coffee-script/wiki/%5BHowTo%5D-Compiling-and-Setting-Up-Build-Tools)

在第一次循环之前，您还可以让它遍历不同的目录。并且只列出 coffeeFiles 中要在其他未列出的文件之前处理的文件名，其余的可以使用 fs.readDir() 添加到列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:03:15.137

我们创建了一个简单的模块来解决类似的问题：

[https://github.com/Vizir/rehab](https://github.com/Vizir/rehab)

只要把`#_require [filename].coffee`你的文件，你就完成了。

我们在具有复杂依赖图的产品中使用它。

# ruby-on-rails - 尝试安装 libv8，“未能构建 gem 原生扩展”

> ID：11386580
> 
> 赞同：12
> 
> 时间：2012-07-08T20:48:34.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我正在使用 W7 64 位。简单地说，当我进入时：

```
C:\Sites>gem install libv8 
```

我得到这个结果：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing libv8:
ERROR: Failed to build gem native extension.

    C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
creating Makefile
which: no gmake in ("my PATH is here, and as far as I know it should include everything I need")
/usr/bin/env: python: No such file or directory
C:\RailsInstaller\DevKit\bin\make.EXE: *** [out/Makefile.ia32] Error 127
Using compiler: C:\RailsInstaller\DevKit\mingw\bin\g++.EXE
GYP_GENERATORS=make \
    build/gyp/gyp --generator-output="out" build/all.gyp \
                  -Ibuild/standalone.gypi --depth=. \
                  -Dv8_target_arch=ia32 \
                  -S.ia32 -Dhost_arch=ia32

Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9
.1/gems/libv8-3.11.8.3 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.1
1.8.3/ext/libv8/gem_make.out 
```

卸载并重新安装不起作用。

我正在尝试安装 libv8，因为它是 twitter-bootstrap-rails 的依赖项。

编辑：正如我所说，我在 Windows 上，现在我意识到在此错误中列出了一个文件路径为 /usr/bin/env。所以这很奇怪。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T10:16:04.727

解决方案是安装版本 .0

```
gem install libv8 --version 3.11.8.0 
```

直到这个问题得到解决，因为我也经历过这个

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T16:33:02.980

我遇到了这个问题，上面的@xiy 引导我找到了答案。不得不改变

```
gem 'therubyracer' 
```

至

```
gem 'therubyracer', :platforms => :ruby 
```

因为 Windows 不需要或不喜欢那个宝石。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T00:23:29.280

我遇到了与您描述的相同的 Windows 问题：

```
gem 'twitter-bootstrap-rails' 
```

当我从 github 切换这个版本时：

```
gem 'twitter-bootstrap-rails', :github => 'seyhunak/twitter-bootstrap-rails' 
```

没问题。试一试。

# php - “试图获取非对象的属性” - 自定义 mysqli 类

> ID：11386581
> 
> 赞同：0
> 
> 时间：2012-07-08T20:48:56.700
> 
> 标签：php

我正在尝试为 MySQLi 编写一个自定义类，但在使用`num_rows`. 任何人都可以帮忙吗？

```
class db { 
    private $host = "***";
    private $user = "***";
    private $pass = "***";
    private $database;

    private $connection;
    private $result;
    public $sql;

    function __construct($database) {
        if (!empty($database)) $this->database = $database;
        $this->connection = new mysqli($this->host,$this->user,$this->pass,$this->database);
        return $this->connection;
    }

    public function fetchRowNum($sql) {
        if (!empty($sql)) {
            $this->sql = $sql;
            return $this->connection->query($sql)->num_rows;
        } else {
            throw new Exception("Error fetching row");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:58:17.390

[mysqli_query()](http://php.net/manual/en/mysqli.query.php)并不总是返回一个[mysqli_result](http://www.php.net/manual/en/class.mysqli-result.php)对象，它可以返回`TRUE`并且`FALSE`也会导致你得到的错误。

存储的返回值`query()`并检查它是否是，`TRUE`或者`FALSE`在您尝试将其作为对象访问并获取`num_rows`属性之前。

从手册中关于`mysqli::query()`：

> 失败时返回**FALSE**。对于成功的**SELECT**、**SHOW**、**DESCRIBE**或 **EXPLAIN**查询`mysqli_query()`将返回一个`mysqli_result`对象。对于其他成功的查询`mysqli_query()`将返回**TRUE**。

# html - 如何显示 从字面上标记/ tag?

> ID：11386586
> 
> 赞同：86
> 
> 时间：2012-07-08T20:49:15.353
> 
> 标签：html, blogger

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-08T20:50:24.643

> 不幸的是，它不适用于 HTML 标签。

`<code>`表示“这是代码”，`<pre>`表示“此标记中的空白很重要”。两者都不意味着“该元素的内容不应被视为 HTML”，因此两者都可以完美地工作，即使它们并不意味着您想要它们的意思。

> 有没有办法在不将其实际解释为 HTML的情况下显示“ `<div>`”内部`<pre>`或标记？`<code>`

如果您想渲染一个`<`字符，请使用`&lt;`, 和`&gt;`for`>`和`&amp;`for `&`。

您不能（在现代 HTML 中）编写标记并将其解释为文本。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-08-07T15:48:54.607

似乎只读文本区域几乎可以满足您的需求。

```
<textarea readonly> <!-- html code --> </textarea> 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-10-06T15:42:18.873

您可以使用“xmp”元素。从`<xmp></xmp>`一开始就在 HTML 中，所有浏览器都支持它。即使它不应该使用，它也得到了广泛的支持。

里面的所有东西都`<xmp></xmp>`照原样（没有标记lke标签或字符引用在那里被识别）除了，出于明显的原因，元素本身的结束标签。

否则，“xmp”将呈现为“pre”。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-04-13T18:16:19.390

尝试：

```
<xmp></xmp> 
```

举个例子：

```
<pre>
     <xmp><!-- your html code --></xmp>
</pre> 
```

再见

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-12-13T13:20:29.817

只需转义 HTML 标签。例如 -

将**<**替换为`&lt;`

将**>**替换为`&gt;`

[在这里](https://web.archive.org/web/20161119042828/http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)完成查找

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-17T11:54:57.487

这可以通过一点 javascript 轻松实现。

```
document.querySelectorAll("code").forEach(el => el.innerText = el.innerHTML); 
```

运行下面的代码片段以查看它的实际效果：

```
document.querySelectorAll("code").forEach(el => el.innerText = el.innerHTML);
```

```
pre {
  padding: 1rem;
  background-color: #eee;
  border-radius: 0.25rem;
}
```

```
<pre>
  <code>
   .class {        
     color:red;
   }

   // I would like HTML code inside this
   <h1>Hello this is a heading</h1>
  </code>
</pre>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-02T20:03:08.347

试试 CodeMirror ( [https://codemirror.net/](https://codemirror.net/) )

它是一个轻量级的库，可以在 HTML 中设置代码样式。这是我所指的屏幕截图：

![在此处输入图像描述](../Images/3f9987ade6bcd1e75b24ed815bc8f63b.png)

为我们工作得很好！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-27T08:09:49.547

```
<pre>
  <code><textarea>
    <div>Now you can write Tags inside pre tag!</div>
  </textarea><code>
 <pre>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-09T20:37:56.137

也许不是最好的答案，但你可以这样做：

```
<p><<input type="hidden">h1<input type="hidden">><input type="hidden">This code is 
displayed!<input type="hidden"><<input type="hidden">/h1<input type="hidden">></p> 
```

```
<p><<input type="hidden">h1<input type="hidden">><input type="hidden">This code is displayed!<input type="hidden"><<input type="hidden">/h1<input type="hidden">></p>
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-11-28T13:17:32.260

用这个：

```
<pre>
   <?= htmlentities($script) ?>
</pre> 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2014-12-17T23:18:45.667

是的，带有转义 xml 功能。您需要启用 jQuery 才能使其正常工作。

```
<pre>
  ${fn:escapeXml('
    <!-- all your code -->
  ')};
</pre> 
```

# jsonp - odata datajs CRUD operation fails in IE (OData)

> ID：11386593
> 
> 赞同：0
> 
> 时间：2012-07-08T20:49:49.227
> 
> 标签：jsonp, wcf-data-services, odata, datajs

I have this code below, which adds a new "Activity" in my "activity" table/entity thru WCF Data Services. Now all is fine and dandy when I run this in Chrome and Firefox, but in IE10 it responds with the following error...

```
{"error":{"code":"","message":{"lang":"en-US","value":"An error occurred while processing this request."}}} 
```

Here is what my code looks like...

```
function addActivity( newActivity )
    {
        var newActivity = { ActivityName: newActivity };
        var requestOptions = {
            //headers: { "DataServiceVersion": "1.0" },
            method: "POST",
            requestUri: uriActivity,
            data: newActivity
        };
        OData.request( requestOptions, AddSuccessCallback, AddErrorCallback );

    } 
```

I'm also using the following packages, for all it's worth...Thanks a lot for reading up to here. Many special thanks in advance for your input.

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="datajs" version="1.0.3" />
  <package id="jQuery" version="1.7.2" />
  <package id="Microsoft.Data.Edm" version="5.0.1" />
  <package id="Microsoft.Data.OData" version="5.0.1" />
  <package id="Microsoft.Data.Services" version="5.0.1" />
  <package id="Microsoft.Data.Services.Client" version="5.0.1" />
  <package id="System.Spatial" version="5.0.1" />
</packages> 
```

Trace looks like this...

```
HTTP/1.1 400 Bad Request
Server: ASP.NET Development Server/11.0.0.0
Date: Mon, 09 Jul 2012 07:55:17 GMT
X-AspNet-Version: 4.0.30319
X-Content-Type-Options: nosniff
DataServiceVersion: 1.0;
Content-Length: 1159
Cache-Control: private
Content-Type: application/json;odata=verbose;charset=utf-8
Connection: Close

{"error":{"code":"","message":{"lang":"en-US","value":"An error occurred while processing this request."},"innererror":{"message":"A node of type 'EndOfInput' was read from the JSON reader when trying to read the start of an entry. A 'StartObject' node was expected.","type":"Microsoft.Data.OData.ODataException","stacktrace":"   at Microsoft.Data.OData.Json.ODataJsonEntryAndFeedDeserializer.ReadEntryStart()\r\n   at Microsoft.Data.OData.Json.ODataJsonReader.ReadEntryStart()\r\n   at Microsoft.Data.OData.Json.ODataJsonReader.ReadAtStartImplementation()\r\n   at Microsoft.Data.OData.ODataReaderCore.ReadImplementation()\r\n   at Microsoft.Data.OData.ODataReaderCore.ReadSynchronously()\r\n   at Microsoft.Data.OData.ODataReaderCore.InterceptException[T](Func`1 action)\r\n   at Microsoft.Data.OData.ODataReaderCore.Read()\r\n   at System.Data.Services.Serializers.EntityDeserializer.ReadEntry(ODataReader odataReader, SegmentInfo topLevelSegmentInfo)\r\n   at System.Data.Services.Serializers.EntityDeserializer.Read(SegmentInfo segmentInfo)\r\n   at System.Data.Services.Serializers.ODataMessageReaderDeserializer.Deserialize(SegmentInfo segmentInfo)"}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:18:36.950

Looks like I need to serve my pages thru HTTP. Loading them from Windows doesn't work especially where IE is concerned.

# database - 向正确的用户显示右列

> ID：11386600
> 
> 赞同：1
> 
> 时间：2012-07-08T20:50:15.430
> 
> 标签：database, sql-server-2008-r2, business-intelligence, datamart

如果我有三个不同职业的用户（经理、推销员、会计）

主要问题是如何在 SQL Server 中根据以下星型模式和要求向正确的人显示正确的列？

fact 和 dim 在数据集市内使用常规表。

背景资料：

*   经理有权查看所有列 factTransaction
*   不允许业务员查看 TaxAmount、TotalAmount 和 ProductBusinessKey。
*   会计记录允许查看 Product Quantity、ProductPrice 和 GeographyFullname。

在 Windows 中，他们有自己的用户帐户。

图片取自地址（[多事实表的数据仓库设计](https://stackoverflow.com/questions/3308647/design-of-a-data-warehouse-with-more-than-one-fact-tables)）

![在此处输入图像描述](../Images/985c880fb9189b82347cf597f9baf74a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:36:21.923

SQL Server 确实能够分配列权限 (http://msdn.microsoft.com/en-us/library/ms180341%28v=sql.105%29.aspx)。您可以根据需要设置特定权限，方法是将每列视为具有自身安全性的对象。

管理列级安全性可能很麻烦，因为您必须记住每次表更改和添加新用户时都更新安全性。

你考虑一种不同的方法。为每个不同的组定义一个单独的视图。只有经理才能访问“经理”视图；只有推销员（也许还有经理）才能访问推销员视图等等。然后根据这些视图为每个组构建应用程序。

最后，管理多个视图可能有点麻烦。相反，您还可以有一个表值函数，将所有视图包装到一个函数中。该函数将检查每个用户的权限并选择要返回的适当数据。

用户定义函数的优点是只有创建函数的用户才需要访问基础表。即用户只有该功能的权限；否则，他们看不到基础表。该功能将控制他们可以看到的内容。

# jquery-mobile - 单击 jQuery Mobile 时按钮更改颜色

> ID：11386601
> 
> 赞同：2
> 
> 时间：2012-07-08T20:50:23.617
> 
> 标签：jquery-mobile

我有这段代码可以在单击时更改按钮的颜色：

```
$('.fav').live('click', function(e) { 

  $(this).buttonMarkup({ theme: "b" });

}); 
```

如何通过再次单击按钮恢复正常颜色（主题 c）？

有没有办法查看按钮的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:55:42.313

因为它必须是实时的，所以你可以制作自己的切换：

```
$('.fav').live('click', function() {
    var dotoggle = $(this).attr("dotoggle");
    if ( dotoggle == "1"  ) {
        $(this).buttonMarkup({ theme: "c" });
        $(this).attr("dotoggle","0");
     }
     else {
        $(this).buttonMarkup({ theme: "b" });
        $(this).attr("dotoggle","1");
    }
}); 
```

自定义切换示例的 JSFiddle：http: [//jsfiddle.net/PLx8v/3/](http://jsfiddle.net/PLx8v/3/)

# orchardcms - Orchard CMS：如何在命令中更新内容项？

> ID：11386603
> 
> 赞同：1
> 
> 时间：2012-07-08T20:50:39.857
> 
> 标签：orchardcms

想要通过如下代码更新命令中的内容项：

```
var item = _contentManager.Get(model.Id);
item.As<TitlePart>().Title = model.Title;
_contentManager.UpdateEditor(item, this); 
```

但是我没有编辑器在指挥。我可以调用所有 pars 存储库的 Update 方法，但它看起来像错误的方式，这里的正确方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:13:21.440

你不需要打电话`UpdateEditor`。当命令完成时会话应该被保存（你可以通过调用取消它`IOrchardServices.TransactionManager.Cancel()`）。

# python - 单例生成器，多个消费者

> ID：11386608
> 
> 赞同：1
> 
> 时间：2012-07-08T20:51:22.770
> 
> 标签：python, thread-safety, generator

我有从不同线程访问的单例。这个单例通过生成器提供数据。生成器应该被访问数据的线程*完全*消耗。每个访问数据的线程都应该使用一个*新*的生成器。这是我的代码：

```
from   datetime import datetime
import threading
import time

class MySingletonCls:

    def get_data(self, repeat):
        self.nr = 0
        for x in xrange(repeat):
            time.sleep(0.001)
            self.nr += 1
            yield x

_my_singleton = None

def MySingleton():
    global _my_singleton
    if _my_singleton == None:
        _my_singleton = MySingletonCls()
    return _my_singleton

def test_singleton():
    def worker():
        singleton = MySingleton()
        cnt = 0
        for x in singleton.get_data(100):
            cnt += 1
        print singleton.nr, cnt
    threads = []
    num_worker_threads = 5
    for i in range(num_worker_threads):
        t = threading.Thread(target=worker)
        threads.append(t)
        t.start()
    for t in threads:
        t.join()

test_singleton() 
```

我希望每个工人都收到 100 个条目，实际上就是这样。但是访问单例中的计数器给了我非常奇怪的数字。这是我的程序的输出：

```
457 100
468 100
470 100
471 100
475 100 
```

这里发生了什么？为每个线程生成单例生成器的条目有多少？为什么单例计数器显示这个奇怪的值？我怎样才能使这个线程安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:00:04.440

在`MySingletonCls.get_data`中，`self`总是指同一个对象，因此`self.nr`在每个线程中命名同一个对象槽。

这意味着`singleton.nr`每次线程启动时将其重置为 0，然后由每个线程并行递增。您看到打印的数字从 457 到 475，因为最后一个线程在其他线程通过其迭代总共为 25 时开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:00:21.270

因为只有一个单例实例，所以该`nr`属性在所有生成器之间共享。即使每次调用都会创建一个新的生成器，它们都使用相同的`nr`属性。因此，每当任何线程消耗来自生成器的元素时，它都会增加`nr`，并且每当创建新的生成器时，它都会重置`nr`。这些增量和重置在线程中不可预测地发生。

如果您希望每次调用都`get_data`产生一个完全独立的生成器，则不能让它们都依赖于相同的`nr`属性。请注意，生成器将在每次 yield 时“暂停”并保留当时函数的状态，因此您根本不需要使用属性。你可以只使用一个局部变量：

```
def get_data(self, repeat):
    nr = 0
    for x in xrange(repeat):
        time.sleep(0.001)
        nr += 1
        yield x 
```

但是，尚不清楚您要做什么`self.nr`，因为您没有在生成器中生成它。没有办法允许多个线程随意改变单例对象并仍然从所有线程中获得一致的结果。如果线程中的操作导致单例对象状态发生变化，那么您永远无法判断这些变化何时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:00:13.937

`x`您在打印时正在让步`self.nr`。每次产生一个新的worker，它被设置`self.nr`为0，然后从0开始计数到100。

所以，时不时地`self.nr`被重置，并且因为`self`在所有工作人员中都是相同的，所以它是递增的`(num of workers)*(100)`。所以，`self.nr`应该等于那个，考虑到它被重置的次数`0`。您进行计算，包括每次“重置”之间的时间。:D，但我想这是你的问题。

# java - 加入非主键列时出现 JPA @JoinColumn 问题

> ID：11386610
> 
> 赞同：1
> 
> 时间：2012-07-08T20:51:25.913
> 
> 标签：java, jpa

我想基于单向连接连接表，这是我的代码：

```
Class Person {

@id
String person_sk;

int person_id;

String Person_name;

@OneToMany
@joinColumn (name="person_reference_id")
List<address> getAddresses() {}

}

class Address
{

@id
int person_reference_id (referred from Person);

@id
int address_id;

@id
int phone_id;

String street_name, zip_code;

} 
```

现在，当我执行 getAddress 时，它不起作用，因为我的加入是基于 person_ref_id 和 Person 类中的 @id (primaryKey) 列是 person_sk。

如果我使用 referencedColumn 那么它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:45:07.553

1.  [JPA 不允许引用非 PK 列](https://stackoverflow.com/questions/5818373/does-the-jpa-specification-allow-references-to-non-primary-key-columns)。

2.  [ReferencedColumn 属性用于指定连接列，当被引用表中存在复合 PK 时](https://stackoverflow.com/a/11245823/685962)。

> 我怎样才能使这项工作？

规范化您的数据库以使用常见的 PK-FK 关系。如果需要 - 定义复合 PK。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T12:58:46.690

不寻常的数据模型，您可能需要重新考虑它。

此外，通常最好使用 mappedBy 和逆 @ManyToOne 来定义 @OneToMany。

JPA 不直接支持您的数据模型，但如果您使用 EclipseLink，您可以使用 DescriptorCustomizer 定义 OneToManyMapping 并使用您需要的任何外键或连接条件。

# ios - 在 iOS 上，您可以从模态呈现的 UIViewController 中显示 UIActionSheet 而不会将其关闭吗？

> ID：11386612
> 
> 赞同：1
> 
> 时间：2012-07-08T20:51:44.117
> 
> 标签：ios, modalviewcontroller, uiactionsheet

**编辑：**原来我的视图控制器的超类正在解雇，我没有意识到。

* * *

**原始问题**

标题基本概括了所有内容。

我正在展示一个模态视图控制器，然后我想用操作表提示用户以确认他们在该模态视图控制器中所做的选择，然后再将其关闭。当我调用`[myActionSheet showInView:anyView]`我的模态视图控制器时*，我不会通过我自己的任何操作自动*关闭它。（我尝试在模态视图、应用程序窗口等中显示它，但它们都具有相同的效果。）

这是有问题的，因为我的呈现视图控制器需要知道来自呈现视图控制器的信息才能对用户选择的操作采取行动。理想情况下，它不会关闭模态视图，模态视图可以是，`UIActionSheetDelegate`并根据工作表选择决定将什么消息发送回下面的呈现视图控制器。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:39:36.757

哎呀，原来我的视图控制器的超类正在解雇，我没有意识到。

# node.js - 通过 exec 或 spawn 从 node.js 启动 couchdb

> ID：11386613
> 
> 赞同：2
> 
> 时间：2012-07-08T20:51:46.840
> 
> 标签：node.js, unix, couchdb

如果尚未启动，我正在尝试从 node.js 启动 couchdb。以下代码适用于基本命令，例如`pwd`但不适用于`couchdb`：

```
var sys = require('util')
var exec = require('child_process').exec;
var child;

// executes `pwd`
child = exec("pwd", function (error, stdout, stderr) {
  sys.print('stdout: ' + stdout);
  sys.print('stderr: ' + stderr);
  if (error !== null) {
    console.log('exec error: ' + error);
  }
}); 
```

我尝试使用 ' `couchdb`' & ' `/usr/local/bin/couchdb`' 作为 exec 的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:10:25.413

我现在有一个使用 CoffeeScript 的工作示例：

```
childproc = require "child_process"    
couchdb = childproc.spawn "couchdb"
couchdb.stdout.setEncoding "utf8"
buffer = ""

couchdb.stdout.on "data", (data) ->
  lines = (buffer + data).split(/\r?\n/)
  buffer = lines.pop()
  lines.forEach (line, index) ->
    console.log line

couchdb.stdout.on "end", ->
  if buffer.length > 0
      console.log buffer
      buffer = ""
    console.log 'process ended' 
```

[有关 CS、Iced CS 和 JS 中更完整的示例，请参阅我的要点](https://gist.github.com/733e4de4b328f4fd88dc)

**编辑** 这是 Javascript 中的输出：

```
var buffer, childproc, couchdb;

childproc = require("child_process");

couchdb = childproc.spawn("couchdb");

couchdb.stdout.setEncoding("utf8");

buffer = "";

couchdb.stdout.on("data", function(data) {
  var lines;
  lines = (buffer + data).split(/\r?\n/);
  buffer = lines.pop();
  return lines.forEach(function(line, index) {
    return console.log(line);
  });
});

couchdb.stdout.on("end", function() {
  if (buffer.length > 0) {
    console.log(buffer);
    buffer = "";
  }
return console.log('process ended');
}); 
```

# ios - iOS 登录过程适用于模拟器，但不适用于 iPhone (3GS)

> ID：11386614
> 
> 赞同：0
> 
> 时间：2012-07-08T20:52:27.780
> 
> 标签：ios, core-data, keychain

我为我正在开发的 iPhone 应用程序创建了一个登录过程，登录过程在 Xcode 中的 iOS 模拟器应用程序中工作，但在我的实际手机上不起作用。登录过程的代码是：

```
- (IBAction)processLogin:(id)sender {

// hide keyboard
[_textFieldUsername resignFirstResponder];
[_textFieldPin resignFirstResponder];

// First - make activity indicator visible, then start animating, then turn of wrong user / pin label
_welcomeActivityIndicator.hidden = FALSE;
[_welcomeActivityIndicator startAnimating];
[_wrongUserPin setHidden:YES];

// check if username and pin text fields are populated
if ([_textFieldUsername.text length ] == 0 &&  [_textFieldPin.text length ] == 0)
{
    [_welcomeActivityIndicator stopAnimating];
    [_wrongUserPin setHidden:NO];   
}

// CORE DATA
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];

// set entity for request
[request setEntity:entity];

// filter results using a predicate
NSPredicate *pred =[NSPredicate predicateWithFormat:(@"username = %@"), _textFieldUsername.text];

// set predicate for the request
[request setPredicate:pred];

NSError *error = nil;

// store DB usernames in results array
NSArray *results = [_managedObjectContext executeFetchRequest:request error:&error];

NSLog(@"The returned results are %@",results);

// check text field against results stored in DB
for (Account *anAccount in results) {
    if ([anAccount.username isEqualToString:_textFieldUsername.text]){
        NSLog(@"Your username exists");
        if ([anAccount.password isEqualToString:_textFieldPin.text]){
            NSLog(@"Your pin is correct");

            // TODO - put this in proper place - play audio bell if user logs in correctly
            CFBundleRef mainBundle = CFBundleGetMainBundle();
            CFURLRef soundFileURLRef;
            soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Glass", CFSTR("aiff"), NULL);
            UInt32 soundID;
            AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
            AudioServicesPlaySystemSound(soundID);

            // TODO - put this in proper place - Load ViewController(Root)Home
            if([anAccount.username isEqualToString:@"root"])
            {
                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                ViewControllerRootHome *roothome = (ViewControllerRootHome *)[storyboard instantiateViewControllerWithIdentifier:@"rootHome"];
                [self presentModalViewController:roothome animated:YES];
            }
            else {
                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                ViewControllerHome *home = (ViewControllerHome *)[storyboard instantiateViewControllerWithIdentifier:@"Home"];
                [self presentModalViewController:home animated:YES];
            }
        }
        else {
            NSLog(@"Your pin is wrong");
            [_welcomeActivityIndicator stopAnimating];
            [_wrongUserPin setHidden:NO];
            }
        }
    else {
        NSLog(@"Your username was not found");
        [_welcomeActivityIndicator stopAnimating];
        [_wrongUserPin setHidden:NO];
        }
    }

} 
```

我将用户名存储在 Core Data DB 中，并将 pin 存储在钥匙串中。我可以在 iPhone 上创建一个帐户，并且信息场景显示 iPhone 上已创建帐户，但是当我尝试登录时，我看到的只是*用户名或密码错误*

该项目可以从这里下载[https://github.com/ipatch/KegCop/zipball/master](https://github.com/ipatch/KegCop/zipball/master)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:21:44.830

您似乎没有在此代码中的任何位置将用户名/密码存储到 CoreData。您确定您的默认数据库中有条目吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:14:57.743

我不确定是什么解决了这个问题，但在完成[以下教程](http://www.alexwhittemore.com/developing-jailbroken-iphone-ios-401/)后，登录过程又开始了。

# android - Android：无法通过 HTTPS 访问本地网站

> ID：11386618
> 
> 赞同：0
> 
> 时间：2012-07-08T20:52:42.200
> 
> 标签：android, html, ssl

我正在尝试访问本地托管的网站并获取其 HTML 源进行解析。我有几个问题：

1) 我可以使用“https://An IP ADDRESS HERE”作为有效的 URL 来尝试访问吗？我不想在 /etc/hosts 文件中进行更改，所以我想这样做。

2) 我无法获取 html，因为它给了我握手异常和证书问题。我已经尝试了很多可以通过网络获得的帮助，但没有成功。

这是我正在使用的代码：

```
public class MainActivity extends Activity {
    private TextView textView;
    String response = "";
    String finalresponse="";

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView = (TextView) findViewById(R.id.TextView01);
        System.setProperty("javax.net.ssl.trustStore","C:\\User\\*" );
        System.setProperty("javax.net.ssl.trustStorePassword", "" );
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... urls) {

            TrustManager[] trustAllCerts = new TrustManager[] {
                new X509TrustManager() {
                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                        return null;
                    }
                    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {
                    }
                    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {
                    }
                }
            };

            try {
                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
            } catch (Exception e) {
            }

            try {
                URL url = new URL("https://172.27.224.133");

                HttpsURLConnection con =(HttpsURLConnection)url.openConnection();

                con.setHostnameVerifier(new AllowAllHostnameVerifier());
                finalresponse=readStream(con.getInputStream());
            } catch (Exception e) {
                e.printStackTrace();
            }
            return finalresponse;
        }

        private String readStream(InputStream in) {
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(in));
                String line = "";
                while ((line = reader.readLine()) != null) {
                    response+=line;
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (reader != null) {
                    try {
                        reader.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }
            return response;
        } 

        @Override
        protected void onPostExecute(String result) {
            textView.setText(finalresponse);
        }
    }

    public void readWebpage(View view) {
        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(new String[] { "https://172.27.224.133" });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:58:56.467

使用`https://local-ip-address`访问受 SSL 保护的网页的问题在于，这很可能会导致浏览器信任网站的 SSL 证书出现问题。

这是因为浏览器将尝试通过检查 HTTPS URL 中使用的主机名是否`CN=`与 SSL 证书中包含的主机名匹配来验证 SSL 证书。

**更新以删除对 localhost 的引用（我最初认为本地托管的网站意味着与浏览器在同一台服务器上，Android 显然不是这种情况）：**

您可以通过更改本地主机表以包含 SSL 证书中包含的完全限定主机名并将该名称与您要使用的特定 IP 地址相关联来避免此验证错误。

**在 /etc/hosts 中硬编码 IP 地址的替代方法**

如果您可以控制 SSL 证书的创建方式，则可以使用`Subject Alternate Names`SAN 向您的证书添加其他主机名甚至 IP 地址。如果您使用的是自签名证书，这可能是一个可行的选择。

但是，如果您的本地托管网站也可以从 Internet 访问，则您很可能使用购买的 SSL 证书，并且将 IP 地址硬编码到此类证书中很可能会随着时间的推移导致支持问题，因为内部 IP 地址可能会更改随着时间的推移需要重新购买 SSL 证书。

如果您可以控制该服务器，则另一种选择可能是将您的内部 IP 地址硬编码到移动设备正在使用的 DNS 服务器中。

# javascript - ExtJS Grid Panel 没有从存储中填充数据

> ID：11386623
> 
> 赞同：2
> 
> 时间：2012-07-08T20:53:10.590
> 
> 标签：javascript, extjs

有人看到这段代码有什么问题吗？我正在关注 ExtJS 的一个例子。正在显示网格面板，但未填充数据。

```
Ext.onReady(function() {

        var arrayData = [
            ['Jay Garcia', 'MD'],
            ['Aaron Baker', 'VA'],
            ['Susan Smith', 'DC'],
            ['Mary Stein', 'DE'],
            ['Bryan Shanley', 'NJ'],
            ['Nyri Selgado', 'CA']
        ];

        var nameRecord = Ext.data.Record.create([
            { name : 'name', mapping : 1 },
            { name : 'state', mapping : 2 }
        ]);

        var arrayReader = new Ext.data.ArrayReader({}, nameRecord);

        var memoryProxy = new Ext.data.MemoryProxy(arrayData);

        var store = new Ext.data.Store({
            reader : arrayReader,
            proxy : memoryProxy
        });

        var colModel = new Ext.grid.ColumnModel([
            {
                header : 'Full Name',
                sortable : true,
                dataIndex : 'name'
            },
            {
                header : 'State',
                dataIndex : 'state'
            }
        ]);

        var gridView = new Ext.grid.GridView();

        var selModel = new Ext.grid.RowSelectionModel({
            singleSelect : true
        });

        var grid = new Ext.grid.GridPanel({
            title : 'My First Grid',
            renderTo : Ext.getBody(),
            autoHeight : true,
            width : 250,
            store : store,
            view : gridView,
            colModel : colModel,
            selModel : selModel
        });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:22:16.740

我找到了解决方案。

作者忘记在数据存储中包含 autoLoad : true 。

# knockout.js - Knockoutjs 简单的级联选择

> ID：11386624
> 
> 赞同：0
> 
> 时间：2012-07-08T20:53:15.333
> 
> 标签：knockout.js, cascadingdropdown

我正在尝试使用 knockoutjs 做一个简单的级联组合框。我的第一个组合框绑定到视图模型中的 2 个属性：

**BusinessLines**作为组合框选项的来源

**SelectedBusinessLine**作为第一个组合框中的选定项。

每个 BusinessLine 都有一个集群集合。

第二个组合框应该数据绑定到 SelectedBusinessLine.Clusters 可观察组合框选项源，以及 SelectedCluster 用于选定选项。

问题是第二个组合框根本没有被填充。

JsFiddle 中的源代码（在[JsFiddle](http://jsfiddle.net/x2qMg/2/)中，第一个绑定也不起作用，抱歉第一次使用）

JavaScript

```
 var mainViewModel = null;

    $(document).ready(function() {

        var mainViewModelData = <%= JsonConvert.SerializeObject(NewRequestViewModel) %>;

        mainViewModel = ko.mapping.fromJS(mainViewModelData);

        ko.applyBindings(mainViewModel);

    }); 
```

HTML

```
<div>
    <table>
        <tr>
            <td>
                Business Line
            </td>
            <td>
                <select data-bind="options: BusinessLines,
                                   optionsText: 'Title',
                                   value: SelectedBusinessLine,
                                   optionsCaption: 'Select Business Line..'">
                </select>
            </td>
        </tr>
        <tr>
            <td>
                Cluster
            </td>
            <td>
                <select data-bind="options: SelectedBusinessLine.Clusters,
                                   optionsText: 'Title',
                                   value: SelectedCluster,
                                   optionsCaption: 'Select Cluster..'">
                </select>
            </td>
        </tr> 
    </table>
</div> 
```

**更新**：

第二种**解决方案**（没有计算道具）

```
<select data-bind="options: SelectedBusinessLine() ? SelectedBusinessLine().Clusters() : [],
                                   optionsText: 'Title',
                                   value: SelectedCluster,
                                   optionsCaption: 'Select Cluster..'">
                </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:17:21.647

这是一个工作版本：

[http://jsfiddle.net/x2qMg/4/](http://jsfiddle.net/x2qMg/4/)

您的小提琴（根本）不起作用，因为您没有包含 Knockout Mapping JS 参考（映射插件不是主要 Knockout JS 的一部分） - 请参阅左侧栏中的管理资源区域。

您会看到我所做的最大更改是使用`with`绑定仅在选择了业务线时才呈现集群。另请注意，我必须使用 $root.SelectedCluster 否则它不会在由`with`.

# mongodb - MongoDB mapreduce 返回空值

> ID：11386627
> 
> 赞同：1
> 
> 时间：2012-07-08T20:53:33.110
> 
> 标签：mongodb, mapreduce, nosql

我有一个这样的 mongo 集合：

```
{
        "_id" : ObjectId("4fd930ecd729f5b31ea5ad03"),
        "O_ORDERKEY" : NumberLong(359),
        "O_CUSTKEY" : {
                "$ref" : "CUSTOMER",
                "$id" : ObjectId("4f973ff37d6517e9723c4d63")
        },
        "O_ORDERSTATUS" : "F",
        "O_TOTALPRICE" : 239998.53,
        "O_ORDERDATE" : ISODate("1994-12-19T02:00:00Z"),
        "O_ORDERPRIORITY" : "3-MEDIUM",
        "O_CLERK" : "Clerk#000000934",
        "O_SHIPPRIORITY" : 0,
        "O_COMMENT" : "furiously final foxes are. regular,"
} 
```

我想在 O_SHIPPRIORITY = 0 时对所有 O_TOTALPRICE 求和，然后我使用这个命令：

```
db.runCommand({ 
    mapreduce: "ORDERS7", 
    query: {
        O_SHIPPRIORITY: 0
    },
    map : function Map() {
        emit("sum",this.O_TOTALPRICE); 
    },
    reduce : function Reduce(key, values) {
        var sum = 0;
        for (var i = 0; i < values.length; i++) {
            sum += values[i];
        }
        return sum;
    },  
    out: 'query'
});

db.query.find(); 
```

但我的结果是这样的：

```
{ "_id" : "sum", "value" : null } 
```

为什么 value 为 null 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:52:00.133

以下对我有用，表明您的 map-reduce 命令与描述的一样好。请按照所写的内容尝试以下操作，看看是否得到相同的结果。如果你这样做了，那么你的问题就在其他地方，而不是你的问题中描述的任何东西。希望这会有所帮助。

订单7.js

```
db.ORDERS7.drop();
db.query.drop();
doc0 = {
        "O_ORDERKEY" : NumberLong(359),
        "O_CUSTKEY" : {
                "$ref" : "CUSTOMER",
                "$id" : ObjectId("4f973ff37d6517e9723c4d63")
        },
        "O_ORDERSTATUS" : "F",
        "O_TOTALPRICE" : 239998.53,
        "O_ORDERDATE" : ISODate("1994-12-19T02:00:00Z"),
        "O_ORDERPRIORITY" : "3-MEDIUM",
        "O_CLERK" : "Clerk#000000934",
        "O_SHIPPRIORITY" : 0,
        "O_COMMENT" : "furiously final foxes are. regular,"
};
doc1 = {
        "O_ORDERKEY" : NumberLong(359),
        "O_CUSTKEY" : {
                "$ref" : "CUSTOMER",
                "$id" : ObjectId("4f973ff37d6517e9723c4d63")
        },
        "O_ORDERSTATUS" : "F",
        "O_TOTALPRICE" : 239998.53,
        "O_ORDERDATE" : ISODate("1994-12-19T02:00:00Z"),
        "O_ORDERPRIORITY" : "3-MEDIUM",
        "O_CLERK" : "Clerk#000000934",
        "O_SHIPPRIORITY" : 0,
        "O_COMMENT" : "furiously final foxes are. regular,"
};
db.ORDERS7.save( doc0 );
db.ORDERS7.save( doc1 );
printjson(db.ORDERS7.find().toArray());

printjson(db.runCommand({
    mapreduce: "ORDERS7",
    query: {
        O_SHIPPRIORITY: 0
    },
    map : function Map() {
        emit("sum",this.O_TOTALPRICE);
    },
    reduce : function Reduce(key, values) {
        var sum = 0;
        for (var i = 0; i < values.length; i++) {
            sum += values[i];
        }
        return sum;
    },
    out: 'query'
}));
printjson(db.query.find().toArray()); 
```

$ mongo xyzzy orders7.js

```
MongoDB shell version: 2.1.2
connecting to: xyzzy
[
    {
        "_id" : ObjectId("4ffa368b9ee7cfbc46a3990a"),
        "O_ORDERKEY" : NumberLong(359),
        "O_CUSTKEY" : DBRef("CUSTOMER", ObjectId("4f973ff37d6517e9723c4d63")),
        "O_ORDERSTATUS" : "F",
        "O_TOTALPRICE" : 239998.53,
        "O_ORDERDATE" : ISODate("1994-12-19T02:00:00Z"),
        "O_ORDERPRIORITY" : "3-MEDIUM",
        "O_CLERK" : "Clerk#000000934",
        "O_SHIPPRIORITY" : 0,
        "O_COMMENT" : "furiously final foxes are. regular,"
    },
    {
        "_id" : ObjectId("4ffa368b9ee7cfbc46a3990b"),
        "O_ORDERKEY" : NumberLong(359),
        "O_CUSTKEY" : DBRef("CUSTOMER", ObjectId("4f973ff37d6517e9723c4d63")),
        "O_ORDERSTATUS" : "F",
        "O_TOTALPRICE" : 239998.53,
        "O_ORDERDATE" : ISODate("1994-12-19T02:00:00Z"),
        "O_ORDERPRIORITY" : "3-MEDIUM",
        "O_CLERK" : "Clerk#000000934",
        "O_SHIPPRIORITY" : 0,
        "O_COMMENT" : "furiously final foxes are. regular,"
    }
]
{
    "result" : "query",
    "timeMillis" : 22,
    "counts" : {
        "input" : 2,
        "emit" : 2,
        "reduce" : 1,
        "output" : 1
    },
    "ok" : 1
}
[ { "_id" : "sum", "value" : 479997.06 } ] 
```

# jquery - 如何使用 jquery 获取相邻标签中的孩子的孩子的值？

> ID：11386628
> 
> 赞同：2
> 
> 时间：2012-07-08T20:53:50.903
> 
> 标签：jquery, children, next

从一个特定的开始，`div`我想使用 jquery 来获取`input`下一个块中标签的值`div`（向下两层）。我有一个这样的 HTML 结构：

```
<div class="firstClass1" id="firstID1"> // suppose I start from this element
    <div class="secondClass1" id="secondID1">
        <input value="myValue1"/>
    </div>
</div>
<div class="firstClass2" id="firstID2">
    <div class="secondClass2" id="secondID2">
        <input value="myValue2"/>
    </div>
</div>
<div class="firstClass3" id="firstID3">
    <div class="secondClass3" id="secondID3">
        <input value="myValue3"/>
    </div>
</div>
... 
```

也就是说，如果我从 开始`.firstClass1`，我想从 获取值`myValue2`。我曾尝试使用以下 jquery，但它不起作用：

```
var nextID = $('.div#firstID1').next().find('input').val(); 
```

和

```
var nextID = $('.div#firstID1').next().next().val(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:06:33.897

这将有所帮助：http: [//jsfiddle.net/bQYZJ/](http://jsfiddle.net/bQYZJ/)

你有额外的`.`点，`id`而`firstID1`不是`firstID` `:)`休息，我已经根据你的需要调整了它。

希望这有帮助，

**代码**

```
var nextID = $('div#firstID1').next('div').find('input').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:56:40.540

你错过了一个引号，也删除`dot`from `.div#firstID1`：

```
var nextID = $('div#firstID').next().find('input').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T20:57:19.747

将 替换`.div`为`div`。

只需尝试：

```
$('div[id^=firstID]').mouseenter(function(){
    var nextID = $(this).next().find('input').prop('value');
    alert( nextID ); // test it!
}); 
```

`$('div[id^=firstID]')`表示“任何 ID 以开头的 div `firstID`”，
这将允许您获取任何“事件”元素的“下一个 div 输入值”，因此您无需为任何`firstID[N]`元素重写代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:51:29.793

你也**可以**使用，

```
var nextID = $('div#firstID1 > div > input') 
```

或者

```
var nextID = $('div#firstID1').children().children() 
```

或者

```
var nextID = $('div#firstID1').children('div').children('input'); 
```

但是（出于我不知道的原因），工作`find`速度比接近。`children``>`

# c++ - 全局变量多重声明

> ID：11386633
> 
> 赞同：1
> 
> 时间：2012-07-08T20:54:31.180
> 
> 标签：c++, boost

我在一个类的头文件中包含一个带有全局提升信号的 .h 文件，该头文件又包含在主函数的文件中。链接器说信号被多次声明。信号声明包含在 C/C++ 头文件中典型的`#ifndef`,`#define`和`#endif`块中（用于避免多重声明）。我正在使用带有 gcc 的 Eclipse。

```
#ifndef SIG_HEADER
#define SIG_HEADER
#include <boost/signal.hpp>

boost::signal0 <void> signal1;

#endif 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T20:59:14.030

您收到的是链接器错误，而不是编译器错误。因此，预处理器指令在这里对您没有帮助。

您需要做的是在源文件（而不是头文件）中定义变量，并在`extern`头文件中使用声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T21:16:51.927

您的链接器是正确的。每次包含此标头时，都会定义符号 signal1，从而导致多重定义错误。

拯救你的是`extern`关键字，它将告诉编译器这是一个将被整个程序访问并需要外部链接的对象。然后，您必须在其他地方为编译器提供变量的定义，例如在此标头的 cpp 文件中。

[这个问题提供了有关外部链接的更多信息。](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

# ruby-on-rails - 尝试处理重复的活动记录结果

> ID：11386643
> 
> 赞同：0
> 
> 时间：2012-07-08T20:56:33.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我试图用 ruby​​ 编写一个方法，它可以：

1.  查询并找到我们数据库中满足特定条件的所有重复项（第一个、、、和`name`所有`last_name`匹配）`account_id``title`
2.  遍历它们并结合`possible_unique_keys`所有重复项的字段内容
3.  删除重复的记录，因为我们有 1 条记录，每条记录都有连接字段

我从一个快速查询开始，只提取出 dup 候选人：

```
results = ActiveRecord::Base.connection.select_all( "SELECT id, first_name, last_name, title, account_id, possible_unique_keys, device_contacts_count FROM CONTACTS AS a WHERE 1 < (SELECT Count(*) FROM CONTACTS AS b WHERE b.first_name = a.first_name AND b.last_name = a.last_name AND b.title = a.title AND b.account_id = a.account_id)" ) 
```

它使用我需要的字段提取似乎正确的结果集。当我尝试遍历它们时，第一个问题出现了：

```
results.each do |contact|
  contact.first_name
end 
```

我真的才刚刚开始尝试解决这个问题，但是当我尝试引用任何字段时出现错误，就像我在上面尝试引用时所做的那样`first_name`：

> NoMethodError：未定义`first_name`的方法`#<Hash:0x00000006641cb0>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:21:33.173

返回一个记录哈希数组，其中列名作为键，列值作为值。

```
contact[:first_name] 
```

或者

```
contact["first_name"] 
```

# ios - 水平 UIScrollView 中的多个垂直滚动 UIScrollView

> ID：11386647
> 
> 赞同：3
> 
> 时间：2012-07-08T20:56:40.833
> 
> 标签：ios, ios5

我正在开发一个应用程序，其中我有一个可水平滚动的 UIScrollView 全屏，其中包含多个（比如说 3 个）可垂直滚动的 UIScrollViews，每个也是全屏的。它们的位置没有边距，左边的原点是 (0,0)。

每个可垂直滚动的 UIScrollView 都由一个位于另一个之上的按钮组成，每个按钮在单击时都会显示一个 ViewController：

```
[self presentViewController:someViewController animated:YES completion:nil]; 
```

现在这段代码适用于右边的两个 UIScrollView，但左边的有问题：

*   水平 UIScrollView 高度下方的按钮不可点击。因此，如果水平 UIScrollView 的高度为 440px，则任何具有 origin.y > 440 的 UIButton 都是不可点击的。
*   如果 UIScrollView 稍微向下滚动并单击按钮（不低于 440 像素），则整个 UIScrollView 会向下“移动”并在呈现请求的视图控制器时变得有点滞后。当这个视图控制器被关闭时，滚动视图保持在较低的位置。如果我向上滚动它并按下一个按钮，它会神奇地跳到它应该在的位置。

现在是有趣的部分！

如果我将左侧 UIScrollView 的原点更改为 (1,0)，则此问题消失！是什么造成了这个问题？

一些添加的代码：

```
[horizontalSV setDelegate:self];
[horizontalSV setContentSize:horizontalContentView.frame.size];
[horizontalSV addSubview:horizontalContentView];                  // View containing vertical scroll views, it's set up in IB
[horizontalContentView setFrame:CGRectMake(-1, 0, 961, 440)];     // This is now used for the hack

// Now imagine three of these
firstSVcontent = [[VerticalContentView alloc] init];              // Setting the content view
[firstSVcontent setTitle:title];
[firstSVcontent setButtons:blahblah];
[firstVerticalSV setContentSize:firstSVcontent.view.frame.size];  // Setting vertical scroll view
[firstVerticalSV addSubview:firstSVcontent.view]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:24:21.043

差不多一年后我已经解决了这个问题！

问题是，我在 XIB 文件中进行大部分视图管理，然后我只是在 viewDidLoad 方法中读取这些内容视图和滚动视图并将它们放在一起。

现在我重写了我的代码，以编程方式创建所有滚动视图和内容视图，并且一切正常。

# objective-c - 遍历二维数组，使用for-in语法

> ID：11386648
> 
> 赞同：0
> 
> 时间：2012-07-08T20:56:48.413
> 
> 标签：objective-c, cocoa, nsarray, fast-enumeration

我正在遍历这样的二维数组：

```
for (menuViewController *aSelection in mainDataArray) {
    ...
} 
```

但是，如何访问较低数组的数据？以下代码不起作用，但让您了解我的意思：

```
for (menuViewController *aSelection in mainDataArray) {
    NSLog(@"Data: %@", [aSelection objectAtIndex:2]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:11:25.850

如果要遍历数组中的数组，可以试试下面的方法吗？

```
for (NSArray* aSelection in mainDataArray) {
    NSLog(@"Data: %@", [aSelection objectAtIndex:2]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:15:52.803

你为什么不做第二个 for-in 语句

```
for (NSArray* aSelection in mainDataArray) {
    for (NSArray* bSelection in aSelection) {
        //Do something innovative :)
    }
} 
```

# java - 在数组中返回日历事件详细信息

> ID：11386650
> 
> 赞同：0
> 
> 时间：2012-07-08T20:57:24.343
> 
> 标签：java, android, arrays

我有一个日历，如果用户选择日期，它会将他带到事件详细信息页面。在事件详细信息页面上，数据以表格格式显示。到现在为止还挺好。问题是如何在 eventDetails 函数中设置事件的详细信息并返回它们以设置文本。

代码：

```
 //get the data and split it
    String[] dateAr = date_string.split("-|\\||\\(|\\)|\\s+");
    m = Integer.parseInt(dateAr[6]);
    d = Integer.parseInt(dateAr[3]);
    y = Integer.parseInt(dateAr[8]);

    name = (TextView) this.findViewById(R.id.name);
    title = (TextView) this.findViewById(R.id.title);
    details = (TextView) this.findViewById(R.id.details);

    name.setText(name_details); //should get the info from the eventDetails method
    title.setText(title_details); //should get the info from the eventDetails method
    details.setText(event_details); //should get the info from the eventDetails method

  //event details
  public String eventDetails(int m, int d) {
    String holiday = "";
    switch (m) {
        case 1:
            if (d == 1) {
                holiday = "Some event";
            } else if (d == 10) {
                holiday = "Some event";
            }
            break;
        case 3:
            if ((d == 11) || (d == 12)) {
                holiday = "Some event";
            }
            break;
        case 7:
            if ((d == 1) && (d== 7)) {
                holiday = "Some event";
            }
            break;
    }

    return holiday;
} 
```

String`holiday`只返回一个对象。我想获取名称、标题和详细信息并将相应元素的文本设置为它。我怎样才能做到这一点？如何将名称、标题和详细信息添加为单独的对象并将它们作为单独的对象返回以相应地设置文本？我是否将它们添加到数组中？每个活动日期都类似：

```
String holiday[] = {"name of the event", "title of the event", "details of the event"}; 
```

如果是这样，我如何返回数组来设置文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:03:25.443

创建一个`class`包含这些事件详细信息并返回它的实例。例如：

```
public class Event
{
    public final String name;
    public final String title;
    public final String details;

    public Event(final String a_name,
                 final String a_title,
                 final String a_details)
    {
        name = a_name;
        title = a_title;
        details = a_details;
    }
};

public Event eventDetails(int m, int d) {
    if (some-condition)
        return new Event("my-name1", "my-title1", "mydetails1");
    else
        return new Event("my-name2", "my-title2", "mydetails2");
}

final Event e = eventDetails(1, 4);
name.setText(e.name);
title.setText(e.title);
details.setText(e.details); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:03:36.367

您可以通过两种方式返回，1) 作为您指定的数组 2) 使用所需的变量和 gettter/setter 创建 HolidayVO。

根据案例：

```
case 1:
    if (d == 1) {
       //Create holiday object with values;
    } else if (d == 10) {
        //Create holiday object with values;
    }
    break; 
```

# security - 在企业 bean 中使用 getUserPrincipal() 和 isCallerInRole() 方法时如何编写 JUnit 测试？

> ID：11386651
> 
> 赞同：4
> 
> 时间：2012-07-08T20:57:28.647
> 
> 标签：security, unit-testing, junit, jboss7.x, jboss-arquillian

我的环境是 Jboss AS 7.1.0。我正在使用 JUnit 和 Arquillian 进行单元测试。我的 ejb 中有使用 getUserPrincipal() 和 isCallerInRole() 方法的 SSB。为了对这些 ejb 方法进行单元测试，我必须从单元测试用例模拟登录，然后调用 ejb。

这是我正在尝试测试的 EJB 方法的示例：

```
@RolesAllowed({"user","admin"})
public User getMyUserDetails() throws BadInputDataException {
    String userName = ctx.getCallerPrincipal().getName();
    return findUser(userName);
} 
```

如何编写 JUnit 测试用例来测试此方法？我提前感谢您的帮助。

**07/19 更新（基于以下 Tair 的解决方案）**：

我的安全域配置如下：

```
<security-domains>
    <security-domain name="other" cache-type="default">
         <authentication>
             <login-module code="Remoting" flag="optional">
                 <module-option name="password-stacking" value="useFirstPass"/>
             </login-module>
             <login-module code="Database" flag="required">
                 <module-option name="dsJndiName" value="java:jboss/datasources/MysqlDS"/>
                 <module-option name="principalsQuery" value="select Password from Principals where PrincipalID=?"/>
                 <module-option name="rolesQuery" value="select Role, RoleGroup from Roles where PrincipalID=?"/>
                 <module-option name="password-stacking" value="useFirstPass"/>
                 <module-option name="hashAlgorithm" value="MD5"/>
                 <module-option name="hashEncoding" value="RFC2617"/>
                 <module-option name="hashUserPassword" value="false"/>
                 <module-option name="hashStorePassword" value="true"/>
                 <module-option name="passwordIsA1Hash" value="true"/>
                 <module-option name="storeDigestCallback" value="org.jboss.security.auth.callback.RFC2617Digest"/>
             </login-module>
         </authentication>
     </security-domain> 
```

我将下面 Tair 解决方案中显示的 JBossLoginConfigFactory 更改为使用 org.jboss.security.auth.spi.DatabaseServerLoginModule。

我已将 JBossLoginConfigFactory 更改为对 DatabaseServerLoginModule 使用以下方法。

```
private AppConfigurationEntry createDatabaseModuleConfigEntry() {
    Map<String, String> options = new HashMap<String, String>();
    options.put("dsJndiName", "java:jboss/datasources/MysqlDS");
    options.put("hashAlgorithm", "MD5");
    options.put("hashEncoding", "RFC2617");
    options.put("hashUserPassword", "false");
    options.put("hashStorePassword", "true");
    options.put("passwordIsA1Hash", "true");
    options.put("storeDigestCallback", "org.jboss.security.auth.callback.RFC2617Digest");
    options.put("principalsQuery", "select Password from Principals where PrincipalID=?");
    options.put("rolesQuery", "select Role, RoleGroup from Roles where PrincipalID=?");

    return new AppConfigurationEntry("org.jboss.security.auth.spi.DatabaseServerLoginModule",
                AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options);
} 
```

我正在调用此方法而不是 createUsersRolesLoginModuleConfigEntry()。测试用例中的 loginContext.login() 现在由于以下原因而失败：

```
Caused by: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.jboss.security.auth.callback.MapCallback 
```

不知道我现在应该改变什么！

2012 年 7 月 20 日更新：该问题的完整解决方案如下。如果您的解决方案不需要 DatabaseServerLoginModule，只需参考 Tair 回复中的解决方案即可。

就我而言，我将数据库作为 JaaS 身份验证和摘要身份验证。因此，我必须对上面的示例进行以下代码更改。

1.  我修改了代码（JBossLoginContextFactory）以支持“org.jboss.security.auth.spi.DatabaseServerLoginModule”，如下所示。我在创建 AppConfigurationEntry[] 时调用此方法而不是 createUsersRolesLoginModuleConfigEntry()。

    私有 AppConfigurationEntry createDatabaseModuleConfigEntry() { Map options = new HashMap(); options.put("dsJndiName", "java:jboss/datasources/MysqlDS"); options.put("principalsQuery", "select Password from Principals where PrincipalID=?"); options.put("rolesQuery", "select Role, RoleGroup from Roles where PrincipalID=?"); return new AppConfigurationEntry("org.jboss.security.auth.spi.DatabaseServerLoginModule", AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options); }

2.  当我使用摘要身份验证时，我的密码在数据库中被加密。因此，在从我的测试用例中传递密码时，我正在加密并传递密码，如下所示。LoginContext loginContext = JBossLoginContextFactory.createLoginContext("username", md5Hex("my_username"+":"+PropertyManager.getProp("realm")+":"+"my_password"));

现在登录成功了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:35:12.760

[本示例](https://github.com/ALRubinger/oreilly-ejb-6thedition-book-examples/blob/master/ch15-secureschool/src/test/java/org/jboss/ejb3/examples/ch15/secureschool/SecureSchoolIntegrationTest.java)涵盖了您的情况。基本上可以归结为：

1.  使用 arquillianContext 构建具有预设值的 Context`Context.SECURITY_PRINCIPAL`和`Context.SECURITY_CREDENTIALS`
2.  使用该上下文获取对您的 EJB 的引用
3.  测试一下。

祝你好运！

更新：从那时起，Arquillian 似乎发生了很大变化，幸运的是我们有另一个[解决方案](https://community.jboss.org/wiki/TestingSecuredEJBsOnJBossAS71xWithArquillian)。我对其进行了测试并确认它有效！

# php - PHP 数据库数组到 HTML

> ID：11386652
> 
> 赞同：0
> 
> 时间：2012-07-08T20:57:49.523
> 
> 标签：php, arrays, codeigniter

这是我从数据库中提取的数组：

```
Array
(
[0] => stdClass Object
    (
        [id] => 88
        [category] => banners
        [project] => projectname
        [location] => thames
        [image] => DSC02588.JPG
        [imagepath] => 
        [lastrun] => 2012-07-05 03:04:11
    )

[1] => stdClass Object
    (
        [id] => 89
        [category] => logos
        [project] => projectname
        [location] => auckland
        [image] => rounded_corners.jpg
        [imagepath] => 
        [lastrun] => 2012-07-05 03:04:11
    )

[2] => stdClass Object
    (
        [id] => 90
        [category] => logos
        [project] => projectname
        [location] => auckland
        [image] => DSC02586.JPG
        [imagepath] => 
        [lastrun] => 2012-07-05 03:04:11
    )

[3] => stdClass Object
    (
        [id] => 91
        [category] => logos
        [project] => projectname
        [location] => auckland
        [image] => 2-03-2012 11-54-42 a.m..jpg
        [imagepath] => 
        [lastrun] => 2012-07-05 03:04:11
    ) 
```

)

我需要能够像这样将其输出到 html 中：

```
<?php foreach ($query as $row){ ?>          
        <div class="project grid_2 left">
            <a class="logothumb" href="javascript:void(0)">
            <div class="loading"></div>
            <img class="thumb" src="<?php echo base_url('assets/images') ?>/logo-thumb.jpg" width="135" height="105" alt="logo">
            <div class="imagecopy"><p><span>Brand Name</span><br>Location</p></div>
            <div class="hidden projectname"><?php echo $row->project; ?></div>
            <div class="hidden projectlocation"><?php echo $row->location; ?></div>
            <ul class="hidden imagelist">
                <li><img src="<?php echo base_url('assets/images') ?>/<?php echo $row->image; ?>" ></li>
              <li><img src="<?php echo base_url('assets/images') ?>/<?php echo $row->image; ?>" ></li>
            </ul>
          </a>
        </div> 
```

感谢您的任何建议和帮助

编辑：我正在使用 codeignitor

在我的模型中，此时很简单：

```
public function get_portfolio()
{
        $query = $this->db->get('portfolio');
        return $query->result();
       } 
```

我要完成的是类别->项目（按同一项目分组）->位置（按同一位置分组）->及其图像

以下是数据的样子：

88横幅项目名称位置1 DSC02588.JPG 2012-07-05 03:04:11

89 标志项目名称奥克兰 rounded_corners.jpg 2012-07-05 03:04:11

90 个标志 projectname2 auckland DSC02586.JPG 2012-07-05 03:04:11

91 个徽标项目名称奥克兰 2-03-2012 11-54-42 am.jpg 2012-07-05 03:04:11

这是表格：

```
 CREATE TABLE `portfolio` (
  `id` int(11) NOT NULL auto_increment,
  `category` varchar(50) NOT NULL,
  `project` varchar(50) NOT NULL,
  `location` varchar(50) NOT NULL,
  `image` varchar(50) NOT NULL,
  `lastrun` datetime NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=92 DEFAULT CHARSET=utf8; 
```

# jquery - 未选择 True、False、Yes 和 No 按钮

> ID：11386653
> 
> 赞同：1
> 
> 时间：2012-07-08T20:57:57.077
> 
> 标签：jquery

我有一堆来自 AZ 的字母按钮，还有 4 个其他按钮（“True”、“False”、“Yes”和“No”）

显示 4 个按钮（“True”、“False”、“Yes”和“No”）的 html 代码如下：

```
<td>
    <input class="answerBtns answers answerBtnsOff" name="answerTrueName"  id="answerTrue"  type="button"   value="True"    onclick="btnclick(this);"/>
    <input class="answerBtns answers answerBtnsOff" name="answerFalseName" id="answerFalse"     type="button"   value="False"   onclick="btnclick(this);"/>
    <input class="answerBtns answers answerBtnsOff" name="answerYesName"   id="answerYes"   type="button"   value="Yes"     onclick="btnclick(this);"/>
    <input class="answerBtns answers answerBtnsOff" name="answerNoName"    id="answerNo"        type="button"   value="No"      onclick="btnclick(this);"/>
    </td> 
```

下面的代码控制一个“添加行”按钮，单击该按钮将关闭所有按钮，并且它应该只打开所需的按钮，具体取决于与答案匹配的按钮 id。

```
 function addwindow(btn) { 
        var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', ');
$('.answerBtns').removeClass('answerBtnsOff').removeClass('answerBtnsOn');
        $('.answerBtns').addClass('answerBtnsOff');
        $(answers).addClass("answerBtnsOn");
    } 
```

问题是我点击“添加行”按钮，答案是“真”，然后它应该关闭所有按钮，只打开“真”按钮（#answerTrue）。但是对于这个例子，它没有打开这个按钮。事实上，它并没有打开这 4 个按钮（“True”、“False”、“Yes”、“No”）。有谁知道为什么单击“添加行”按钮后这4个按钮不会打开？

更新：

应用程序的 url 在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text16.php)。请按照以下步骤使用该应用程序：

*   第一步：当你打开应用程序时，你会在页面上看到一个绿色的加号按钮，点击它会显示一个模态窗口。
*   第2步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。
*   第 3 步：在第一行的“Answer”列下，您看到答案是 B，单击该行内的“Add”按钮，模态窗口将关闭，您将看到答案按钮已显示为“B”按钮突出显示。

现在这工作正常，但它只适用于字母按钮：

*   第四步：再次点击绿色的加号按钮，这次执行搜索“true”；
*   第 5 步：这一次，当“Answr”列下的答案为“True”时，您将看到一行出现。通过单击“添加”按钮添加此行
*   第 6 步：您将看到它显示“True”和“False”按钮，但“True”按钮未突出显示，即使答案是“True”。

为什么它不突出显示这个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:29:30.843

建议，而不是：

```
$('.answerBtns').addClass('answerBtnsOff');
$(answers).addClass("answerBtnsOn"); 
```

尝试：

```
$(answers).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff'); 
```

但这里的问题是`answer`不包含正确的按钮，而是您选择`#answerT`.

你的问题在这里：

```
var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', '); 
```

尝试进行一些调试、警报，并且可能通过添加一些`if`. 试试这个代码

```
if(btn=="True" || btn=="False" || btn=="Yes" || btn=="No"){
    var answers = '#answer'+btn;
} else {
    var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', ');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:38:59.860

这可能是因为您只添加了 answerBtnsOn 类，而不是删除 answerBtnsOff 类。

尝试添加：

```
$(answers).removeClass("answerBtnsOff"); 
```

另外，我认为您可以使用类而不是地图来选择它们：

```
$(".answerBtns").addClass("answerBtnsOn");
$(".answerBtns").removeClass("answerBtnsOff"); 
```

# mysql - 连接表，如果百分比高于某个值

> ID：11386654
> 
> 赞同：2
> 
> 时间：2012-07-08T20:58:13.740
> 
> 标签：mysql, sql

我的问题与此类似： [比较行并获取百分比](https://stackoverflow.com/questions/11384723/compare-rows-and-get-percentage)

不过，差别不大。我将我的问题改编为另一篇文章。

我有2张桌子。

第一张表：

```
user_id | post_id
1         1
1         2
1         3
2         12
2         15 
```

第二张表：

```
post_id | rating
1         1
1         2
1         3 
2         1
2         5
3         1
3         1
3         4
12        4
15        1 
```

所以现在我想在第二个表中计算每个帖子的评分。如果评级有超过 50% 的正面评级，那么我想要获取 post_id 并将其从表一中转到 post_id 并将 1 添加到 user_id。

最后，它将返回带有正面帖子数量的 user_id。

上表的结果将是：

```
user_id | helpfulPosts
1         2
2         1 
```

post_id 为 1 和 3 的帖子有正面评价，因为超过 50% 的帖子有 1-3 的评价。id = 2 的帖子不是正面的，因为评分正好是 50%。

我将如何实现这一目标？

澄清一下：这是一个 mysql rdbm 和一个积极的帖子，是一个 1、2 和 3 的 rating_id 的数量超过整体评分的一半的帖子。基本上是一样的，来自我上面发布的另一个线程。

忘了一件事：也有可能posts表中存在一个post_id，但在ratings_table中没有评分。这些帖子也很有帮助。`null`评级为 as的情况对我来说是一个误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:09:06.843

试试这个解决方案：

```
SELECT
    a.user_id,
    COUNT(1) AS helpfulPosts
FROM
    posts a
LEFT JOIN
    (
        SELECT 
            post_id, 
            COUNT(CASE WHEN rating IN (1,2,3) OR rating IS NULL THEN 1 END) / COUNT(1) AS percent_positive
        FROM ratings
        GROUP BY post_id
    ) b ON a.post_id = b.post_id
WHERE
    b.post_id IS NULL OR
    b.percent_positive > 0.5
GROUP BY
    a.user_id 
```

* * *

[SQL-Fiddle 演示](http://sqlfiddle.com/#!2/164ee/1/0)

^ 请注意，我向 user_id 添加了`1`没有评分的帖子，这些帖子被计入用户的`helpfulPosts`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:09:26.927

要解决这个问题，您需要首先弄清楚哪些帖子有帮助。使用您的逻辑，这只是在存在评级时计算平均评级。

```
select u.user_id, count(*) as HelpfulPosts
from UserPosts u join
     (select post_id,
             sum(case when rating in (1, 2, 3) then 1.0 else 0.0 end) / count(rating) as HelpfulRating 
      from PostRating pr
      group by post_id
     ) r
     on r.post_id = u.post_id
where r.HelpfulRating > 0.5
group by user_id 
```

下一步是将其连接回用户帖子表，按用户 ID 分组，以计算有用帖子的数量。

顺便说一句，我看不出“3”如何被认为是有帮助的。你的意思是15而不是？上面的查询忽略了 NULL 评级。如果 NULL 应该被认为是有帮助的，那么使用：

```
 sum(case when coalesce(rating, 1) in (1, 2, 3) then 1.0 else 0.0 end) / count(*) as HelpfulRating 
```

而不是查询中的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:09:39.517

```
select up.user_id, count(up.post_id) as helpfulPosts
from userposts as up
where up.post_id in (
    select pr.post_id
    from postratings as pr
    group by pr.post_id
    having
        sum(case when pr.rating between 4 and 5 then 0 else 1 end) > 
        sum(case when pr.rating between 4 and 5 then 1 else 0 end)
)
group by up.user_id 
```

# android - Android 测试 - 应用在一部手机上运行， 但在其他手机上崩溃

> ID：11386658
> 
> 赞同：0
> 
> 时间：2012-07-08T20:59:08.523
> 
> 标签：android, testing

我创建了一个应用程序，它在我的手机上运行良好，所以我把它推向了市场。我的朋友先尝试下载它，但它在她的手机上不起作用。启动画面后，它强制关闭。

我不明白为什么会这样。我的印象是市场只允许使用正确设备的用户下载应用程序，所以认为这不是问题。

有没有人发生过这种情况？还有什么方法可以让我在所有不同的手机上测试我的应用程序，以确保它在重新发布到市场之前不会再次崩溃？

**更新 - 我让她运行 aLogCat，结果如下。字符太多，所以我从第一个 E/ 复制过来

```
E/CameraService(  166): Invalid Burst Count setting burst count to 1
V/CameraHal(  166): camera_set_parameters
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:311 setParameters - White balance set auto
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:321 setParameters - Antibanding set auto
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:337 setParameters - Exposure compensation set 0
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:343 setParameters - Scene mode set auto
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:363 setParameters - Flash mode set on
D/CameraHalM(  166): Current battery Level, 3425000 uv
D/CameraHalM(  166): flashIntensity = 50
E/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:374 setParameters - Setting KEY_MOT_LEDFLASH--50
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:384 setParameters - Effect set none
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:402 setParameters - Jpeg quality set 90
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:409 setParameters - Thumbnail width set 160
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:416 setParameters - Thumbnail width set 120
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:423 setParameters - Thumbnail quality set 60
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:470 setParameters - Zoom set 0
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:483 setParameters - Auto Exposure Lock set false
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:492 setParameters - Auto WhiteBalance Lock set false
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:507 setParameters - Focus mode set auto
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHalM.cpp:124 setMotParameters - Checking Image Stabilization param, off
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHalM.cpp:144 setMotParameters - Disabling Image Stabilization capturing
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHalM.cpp:189 setMotParameters - Led Torch : 0
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHalM.cpp:289 setMotTcmdParametersIfNeeded - Checking Mot Test Mode param, off
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHalM.cpp:300 setMotTcmdParametersIfNeeded - Disabling Test Mode
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:566 setParameters - PreviewFormat set yuv420sp
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:578 setParameters - VNF true
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:596 setParameters - VSTAB false
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:617 setParameters - IPP mode set ldc-nsf
D/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:652 setParameters - Sensor Orientation is set to 0
E/CameraHal(  166): (12785a0)   hardware/ti/omap4xxx/camera/CameraHal.cpp:662 setParameters - Invalid preview resolution 960 x 540
V/MotDrmPlugIn(  165): MotDrmPlugIn::onInitialize : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onSetOnInfoListener : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onOpenDecryptSession by fd : 11
D/        (  165): filename = /system/media/audio/ui/camera_click.ogg
V/MotDrmPlugIn(  165): MotDrmPlugIn::onTerminate : 6579
V/MotDrmPlugIn(  165): MotDrmPlugIn::onInitialize : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onSetOnInfoListener : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onOpenDecryptSession by fd : 11
D/        (  165): filename = /system/media/audio/ui/multishot_click.ogg
D/AndroidRuntime( 4594): Shutting down VM
W/dalvikvm( 4594): threadid=1: thread exiting with uncaught exception (group=0x40ac7210)
V/MotDrmPlugIn(  165): MotDrmPlugIn::onTerminate : 6579
V/MotDrmPlugIn(  165): MotDrmPlugIn::onInitialize : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onSetOnInfoListener : 6579
D/MotDrmPlugIn(  165): MotDrmPlugIn::onOpenDecryptSession by fd : 11
D/        (  165): filename = /system/media/audio/ui/VideoRecord.ogg
I/OMXCodec(  166): isAudio=1, mMIME=audio/vorbis
V/MotDrmPlugIn(  165): MotDrmPlugIn::onTerminate : 6579
E/AndroidRuntime( 4594): FATAL EXCEPTION: main
E/AndroidRuntime( 4594): java.lang.RuntimeException: setParameters failed
E/AndroidRuntime( 4594): at android.hardware.Camera.native_setParameters(Native Method)
E/AndroidRuntime( 4594): at android.hardware.Camera.setParameters(Camera.java:1414)
E/AndroidRuntime( 4594): at sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity.surfaceChanged(ShakeItLikeAPolaroidActivity.java:425)
E/AndroidRuntime( 4594): at android.view.SurfaceView.updateWindow(SurfaceView.java:544)
E/AndroidRuntime( 4594): at android.view.SurfaceView.access$000(SurfaceView.java:81)
E/AndroidRuntime( 4594): at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
E/AndroidRuntime( 4594): at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
E/AndroidRuntime( 4594): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1662)
E/AndroidRuntime( 4594): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2558)
E/AndroidRuntime( 4594): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 4594): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 4594): at android.app.ActivityThread.main(ActivityThread.java:4697)
E/AndroidRuntime( 4594): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 4594): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 4594): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
E/AndroidRuntime( 4594): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
E/AndroidRuntime( 4594): at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  375):   Force finishing activity sillyfidget.com.shakeitpolaroid/.ShakeItLikeAPolaroidActivity
I/OMXCodec(  166): isAudio=1, mMIME=audio/vorbis
I/OMXCodec(  166): isAudio=1, mMIME=audio/vorbis
I/AudioPlayer(  166): read from audio source returned: -1011
I/AudioPlayer(  166): read from audio source returned: -1011
I/AudioPlayer(  166): read from audio source returned: -1011
W/ApplicationContext(  375): Unable to create files directory files
D/ExtDispService(  667): onRotationChanged - rotation = 0
D/ExtDispService(  667): onRotationChanged! - PORTRAIT!!!
D/IExtDispIpcCB(  163): BnExtDispIpcCB NOTIFYCB: type:101; ext1:1; ext2:0;
D/HWC_HDMI_MOT(  163): IpcCB notifyCallback: type:101; ext1:1; ext2:0;
D/HWC_HDMI_MOT(  163): IpcCB notifyCallback: UI Orientation state change - rotation = 0
D/ti_hwc  (  163): hdmi_callback: UI Rotation = 0
I/InputReader(  375): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  375): Device reconfigured: id=2, name='atmxt-i2c', surface size is now 540x960, mode is 1
I/ActivityManager(  375): Config changed: {1.0 311mcc480mnc en_US layoutdir=0 sw360dp w360dp h614dp nrml long port finger -keyb/v/h -nav/h s.6}
D/Swype   (  703): checkEditorShowsCompletions(): shows: false
I/PortalService(  817): onConfigurationChanged
D/OpenGLRenderer(  498): Flushing caches (mode 0)
V/RecentsPanelView(  498): onVisibilityChanged(com.android.systemui.recent.RecentsPanelView@41c57358, 8)
I/SystemUIService(  498): onConfigurationChanged reached.
I/SystemUIService(  498): isLayoutXLarge = false
D/EvbridgeService(  817): handleIntent() android.intent.action.CONFIGURATION_CHANGED handled by com.android.portal.EvbridgeService@413f4738
D/RecentsPanelView(  498): panelHeight=0
D/StatusBar.NetworkController(  498): Intent.ACTION_CONFIGURATION_CHANGED Received
D/ConnectivityService(  375): getMobileDataEnabled returning true
D/ConnectivityService(  375): getMobileDataEnabled returning true
D/OpenGLRenderer(  874): Flushing caches (mode 0)
D/OpenGLRenderer(  874): Flushing caches (mode 1)
D/Launcher.Model(  874): onReceive intent=Intent { act=android.intent.action.CONFIGURATION_CHANGED flg=0x60000010 }
W/ActivityManager(  375): Activity pause timeout for ActivityRecord{414bfdd8 sillyfidget.com.shakeitpolaroid/.ShakeItLikeAPolaroidActivity}
D/Launcher.Model(  874): onReceive intent=Intent { act=android.intent.action.CONFIGURATION_CHANGED flg=0x60000010 }
W/InputManagerService(  375): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41af34d0
W/Launcher(  874): localizable app group not found: Verizon Wireless
W/Launcher(  874): localizable app group not found: Verizon Wireless
W/Launcher(  874): localizable app group not found: Verizon Wireless
W/Launcher(  874): localizable app group not found: Verizon Wireless
I/ActivityManager(  375): No longer want com.google.android.talk (pid 4266): hidden #21
I/AlarmManager(  375): sending alarm Alarm{41ae30a0 type 2 com.android.phone}, PendingIntent{41b402e8: PendingIntentRecord{41d51cb8 com.android.phone broadcastIntent}}
V/AlarmManager(  375): sending alarm OnFinished PendingIntent{41b402e8: PendingIntentRecord{41d51cb8 com.android.phone broadcastIntent}}
D/AudioHardwareMot(  166): AudioStreamOutMot::standby called for 0x129c140
D/AudioHardwareMot(  166): Changed Min CPU Frequency to 300000 KHz
D/AudioHardwareMot(  166): Output 0x129c140 standby complete
D/dalvikvm(  375): GC_EXPLICIT freed 445K, 33% free 17236K/25635K, paused 9ms+7ms
I/Process ( 4594): Sending signal. PID: 4594 SIG: 9
W/InputManagerService(  375): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@420a4e80
W/InputDispatcher(  375): channel '420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  375): channel '420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
W/InputDispatcher(  375): Attempted to unregister already unregistered input channel '420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity (server)'
W/AudioFlinger(  166): session id 16 not found for pid 166
I/ActivityManager(  375): Process sillyfidget.com.shakeitpolaroid (pid 4594) has died.
I/WindowManager(  375): WIN DEATH: Window{419c0168 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.SplashScreen paused=false}
I/WindowManager(  375): WIN DEATH: Window{420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity paused=false}
W/WindowManager(  375): Force-removing child win Window{417dc440 SurfaceView paused=false} from container Window{420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity paused=false}
V/CameraHal(  166): camera_disable_msg_type
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/CameraHal.cpp:225 disableMsgType - Disabling Preview Callback
V/CameraHal(  166): camera_stop_preview
V/CameraHal(  166): camera_cancel_picture
E/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/BaseCameraAdapter.cpp:1791 setState - Adapter state switch INTIALIZED_STATE Invalid Op! event = 0x5
V/CameraHal(  166): camera_release
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/SensorListener.cpp:223 disableSensor - orientation = 0x12e1518 (LIS3DH 3-axis Accelerometer)
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/SensorListener.cpp:108 ~SensorListener - Kill looper thread
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/SensorListener.cpp:120 ~SensorListener - Kill looper
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/SensorListener.cpp:126 ~SensorListener - SensorListener destroyed
I/CameraService(  166): Destroying camera 0
V/CameraHal(  166): camera_device_close
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:1797 stop -  --> AppCallbackNotifier NOTIFIER_STOPPED 
D/CameraHal(  166): (12e35b8)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:287 notificationThread - Notification Thread received message from Camera HAL
D/CameraHal(  166): (12e35b8)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:1236 processMessage - +Msg get...
D/CameraHal(  166): (12e35b8)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:1238 processMessage - -Msg get...
I/CameraHal(  166): Received NOTIFIER_EXIT command from Camera HAL
D/CameraHal(  166): (12e35b8)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:290 notificationThread - Notification Thread exiting.
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:1301 ~AppCallbackNotifier - Stopping Event Provider
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/AppCallbackNotifier.cpp:1309 ~AppCallbackNotifier - Stopping Frame Provider
D/CameraHal(  166): (12ca020)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXCameraAdapter.cpp:1389 switchToLoaded - Already in OMX_Loaded state or OMX_StateInvalid state
W/WindowManager(  375): Failed looking up window
W/WindowManager(  375): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41af7900 does not exist
W/WindowManager(  375): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7606)
W/WindowManager(  375): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7597)
W/WindowManager(  375): at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1579)
W/WindowManager(  375): at android.os.BinderProxy.sendDeathNotice(Binder.java:433)
W/WindowManager(  375): at dalvik.system.NativeStart.run(Native Method)
I/WindowManager(  375): WIN DEATH: null
I/WindowManager(  375): WINDOW DIED Window{420f92e8 sillyfidget.com.shakeitpolaroid/sillyfidget.com.shakeitpolaroid.ShakeItLikeAPolaroidActivity paused=false}
D/CameraHal(  166): (12d76d0)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXCameraAdapter.cpp:3571 Handler - msg.command = -1
D/CameraHal(  166): (12d76d0)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXCameraAdapter.cpp:3585 Handler - Exiting command handler
D/CameraHal(  166): (12d2c40)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXCameraAdapter.cpp:3628 Handler - Exiting OMX callback handler
I/AlarmManager(  375): sending alarm Alarm{41b2e7d8 type 3 android}, PendingIntent{42116fc0: PendingIntentRecord{421063c0 android broadcastIntent}}
V/AlarmManager(  375): sending alarm OnFinished PendingIntent{42116fc0: PendingIntentRecord{421063c0 android broadcastIntent}}
D/PortalService(  817): Portal onReceive: 
I/PortalService(  817): onHandleIntent() action android.intent.action.CLOSE_SYSTEM_DIALOGS
I/ActivityManager(  375): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.motorola.blur.home/.Launcher} from pid 375
I/ActivityManager(  375): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 pkg=org.jtb.alogcat cmp=org.jtb.alogcat/.LogActivity bnds=[8,65][137,245]} from pid 874
D/OpenGLRenderer(  874): Flushing caches (mode 1)
D/Swype   (  703): checkEditorShowsCompletions(): shows: false
I/ActivityManager(  375): Resumed Activity: org.jtb.alogcat/.LogActivity totalTime: 91 ms
W/IInputConnectionWrapper(  874): showStatusIcon on inactive InputConnection
D/OpenGLRenderer(  874): Flushing caches (mode 0)
D/dalvikvm( 4564): GC_CONCURRENT freed 666K, 5% free 11986K/12579K, paused 1ms+17ms
D/Swype   (  703): checkEditorShowsCompletions(): shows: false
W/ActivityManager(  375): Activity destroy timeout for ActivityRecord{414930d8 sillyfidget.com.shakeitpolaroid/.SplashScreen}
W/ActivityManager(  375): Activity destroy timeout for ActivityRecord{414bfdd8 sillyfidget.com.shakeitpolaroid/.ShakeItLikeAPolaroidActivity} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:54:51.300

问题是您在 Camera.setParameters 中传递了无效参数，并非所有相机都支持相同的功能，因此您应该在调用该方法之前查询相机的功能。但是，如果我是你，我可能会从小一点开始，因为看起来你在这里有点过头了。至少您应该知道如何识别相关日志信息并调试此类基本问题。

仅供参考：http: [//developer.android.com/reference/android/hardware/Camera.Parameters.html](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:35:04.600

可能是您的朋友移动 android 级别与您的移动 android 级别不同。

有时该应用程序不适用于所有 Android 手机。如果你想检查它，你必须按照这些步骤

```
 1) Change your app target in manifest as minsdkversion 8 and target sdk version 15.

 2) test your app in all emulators.

 3) test each module (working of each activity) in all emulators. 
```

如果你这样做，你肯定会发现一些错误。祝你好运

# javascript - 文本框中的链接更改

> ID：11386660
> 
> 赞同：0
> 
> 时间：2012-07-08T20:59:13.207
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个脚本，用户单击他想要的链接类型，并根据他单击的内容在下面的一个小文本字段中将其打开。

例如![我的例子](../Images/394344ab04ff7b85c3db2f7daabd30cf.png)

我怎样才能创建这样的东西，用户点击他想要的链接，它会在点击时改变他想要的文本字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:23:19.697

假设以下标记样式：

```
<ul>
    <li><a class="linkInsert" href="http://www.example.com/article/">Link (email &amp; blogs)</a></li>
</ul>
<input id="linkText" />​ 
```

然后你可以使用纯 JavaScript：

```
var links = document.getElementsByTagName('a'),
    textInput = document.getElementById('linkText'),
    linkInserts = [];

for (var i = 0, len = links.length; i < len; i++) {
    if (links[i].className == 'linkInsert') {
        linkInserts.push(links[i]);
    }
}

for (var i = 0, len = linkInserts.length; i < len; i++) {
    linkInserts[i].onclick = function(e) {
        e.preventDefault();
        textInput.value = this.parentNode.innerHTML;
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/)。

或者，使用 jQuery：

```
$('a.linkInsert').click(
    function(e){
        e.preventDefault();
        $('#linkText').val($(this).parent().html());
    });​​​​​​​​​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/2/)。

* * *

将上面的 HTML 更改为以下内容，以避免在粘贴的 HTML 中出现多余的属性，然后不得不将它们过滤掉，因此现在针对父`li`元素：

```
<ul>
    <li class="linkInsert"><a href="http://www.example.com/article/">Link (email &amp; blogs)</a></li>
</ul>
<input id="linkText" />​ 
```

jQuery：

```
$('li.linkInsert a').click(
    function(e){
        e.preventDefault();
        $('#linkText').val($(this).parent().html());
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/3/)。

并且更新了纯 JavaScript 版本以使用修改后的 HTML：

```
var listElems = document.getElementsByTagName('li'),
    textInput = document.getElementById('linkText'),
    linkInserts = [];

for (var i = 0, len = listElems.length; i < len; i++) {
    if (listElems[i].className == 'linkInsert') {
        linkInserts.push(listElems[0].getElementsByTagName('a')[0]);
    }
}

for (var i = 0, len = linkInserts.length; i < len; i++) {
    linkInserts[i].onclick = function(e) {
        e.preventDefault();
        textInput.value = this.parentNode.innerHTML;
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/4/)。

并使用稍微更新的方法`addEventListener()`：

```
function showHTML(evt){
    evt.preventDefault();
    var textInput = document.getElementById('linkText'),
        target = evt.target,
        targetTag = target.tagName.toLowerCase();
    if (targetTag == 'a'){
        textInput.value = target.parentNode.innerHTML;
    }
    else if (targetTag == 'li'){
        textInput.value = target.innerHTML;
    }

}

document
    .getElementsByTagName('ul')[0]
    .addEventListener('click',function(evt) { showHTML(evt) },false); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/5/)。

* * *

最后，一个似乎兼容的版本~~古老的~~'legacy' Internet Explorer（在 IE 8、WinXP 和 IE 9、Win7 上测试）：

```
function showHTML(evt) {
    var evt = evt || event;
    if (evt.preventDefault){
        evt.preventDefault();
    }
    else {
        event.returnValue = false;
    }

    var textInput = document.getElementById('linkText'),
        target = evt.target ? evt.target : evt.srcElement,
        targetTag = target.tagName.toLowerCase();
    if (targetTag == 'a') {
        textInput.value = target.parentNode.innerHTML;
    }
    else if (targetTag == 'li') {
        textInput.value = target.innerHTML;
    }

}

if (window.addEventListener) {
    document.getElementsByTagName('ul')[0].addEventListener('click', function(evt) {
        showHTML(evt)
    }, false);
}
else if (window.attachEvent) {
    document.getElementsByTagName('ul')[0].attachEvent('onclick', showHTML);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/S3fut/8/)。

参考：

*   [`addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener#Legacy_Internet_Explorer_and_attachEvent).
*   [`attachEvent()`](http://msdn.microsoft.com/en-us/library/ie/ms536343(v=vs.85).aspx).
*   [`event.preventDefault()`](https://developer.mozilla.org/en/DOM:event.preventDefault).
*   [`event.returnValue`（某种解释，通过谷歌发现，在 Stack Overflow 上）](https://stackoverflow.com/questions/1000597/event-preventdefault-function-not-working-in-ie)。
*   [`getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById).
*   [`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName).
*   [`push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:04:42.170

使链接无处可去，例如#，给它们一个id，用jquery听点击thees或使用onclick html属性，选择区域并设置点击的链接文本:-)

# javascript - Javascript code display text

> ID：11386662
> 
> 赞同：0
> 
> 时间：2012-07-08T20:59:24.487
> 
> 标签：javascript, text, canvas

Have code for a rectangle with a line through it, I would like to display text under the rectangle. How do I add this into my code? Or can someone point me in the right direction?

```
<canvas id="main" width="300" height="300"></canvas>

 <script>
 var canvas = document.getElementById("main");
var context = canvas.getContext('2d');
context.fillStyle = "#008000";
context.rect(0,0,300,300);
context.fill();
context.beginPath();
context.lineWidth = 10;
context.strokeStyle = "blue";
context.lineCap = "round";
context.moveTo( 50, 150);
context.lineTo (250, 150);
context.stroke();
  context.closePath(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:01:33.550

您可以使用以下方法绘制文本[`fillText`](https://developer.mozilla.org/en/Drawing_text_using_a_canvas#fillText%28%29)：

```
context.fillText("Hello, world!", 50, 50); 
```

有关详细信息，请参阅[Mozilla 开发人员网络上的这篇文章](https://developer.mozilla.org/en/Drawing_text_using_a_canvas)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:01:50.490

我相信你想要这个[`fillText`](http://www.w3schools.com/html5/canvas_filltext.asp)功能：

```
context.font="30px Arial";
context.fillText("Hello World",10,50); 
```

# c# - T4 将 Oracle 的 STUFF_LIKE_THIS 变成 StuffLikeThis

> ID：11386664
> 
> 赞同：1
> 
> 时间：2012-07-08T20:59:50.050
> 
> 标签：c#, oracle, entity-framework, t4

过去，当我使用 Oracle 和实体框架（数据库优先）时，我手动调整了模型（默认为大写蛇形），以便实体名称和属性名称使用传统的 PascalCase。这种手动编辑没问题，因为到目前为止我建模的模式相当小。

但是我将开始一个具有非常大架构的项目，我无法想象花费所有时间手动调整数百个表的所有内容。我也无法忍受使用默认的上蛇形外壳的想法。我认为大多数 C# 开发人员都会同意它非常令人反感。

我没有使用 T4 的经验，但似乎这种事情应该不是很困难。但也许我错了，因为 Google 无法帮助我找到任何帕斯卡大小写模板。任何人都可以分享一个转换大小写约定的 .t4 文件，或者指出一个可以帮助我自己编写的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:37:54.963

在 T4 中，您可以使用“[类功能](http://www.olegsych.com/2008/02/t4-class-feature-blocks/)”来包含您自己的自定义辅助函数等。像这样的东西：

```
<#+
public String ConvertToPascalCase(string allCaps){
   CultureInfo cultureInfo = CultureInfo.InvariantCulture;
   TextInfo textInfo = cultureInfo.TextInfo;

   return textInfo.ToTitleCase(allCaps.ToLower()).Replace("_", "");
}
#> 
```

[并使用该辅助函数在 EF](http://weblogs.asp.net/scottgu/archive/2010/07/23/entity-framework-4-code-first-custom-database-schema-mapping.aspx)中创建您的自定义映射。

原答案：

使用[TextInfo.ToTitleCase](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)！

```
//your current culture
//CultureInfo cultureInfo = Thread.CurrentThread.CurrentCulture;
//or invariant culture, made no difference for me...
CultureInfo cultureInfo = CultureInfo.InvariantCulture;
TextInfo textInfo = cultureInfo.TextInfo;

string allCaps = "THIS_IS_ORACLE";

var result = textInfo.ToTitleCase(allCaps.ToLower()).Replace("_", "");

result.Dump();//tried it in LINQPad, result: "ThisIsOracle" 
```

# c# - 它在 VS2012 中运行，但在设计时隐藏了表单的 GUI；在 Visual C# Express 2010 中它甚至无法编译

> ID：11386670
> 
> 赞同：0
> 
> 时间：2012-07-08T21:00:38.043
> 
> 标签：c#, wpf, visual-studio-2010, xaml

由于 xaml 窗口停止使用 VS 2012 显示我的 wpf 表单（在我在主 .cs 表单的顶部添加了一些注释之后），我恢复到 C# Express 2010。

我复制了我的 xaml 和代码并将它们粘贴到新项目中。

但是，我收到错误消息，例如：

*'duckbilledPlatypusInfoMailer_Express.MainWindow'不包含'MainWindow_Loaded'的定义，并且没有扩展方法'MainWindow_Loaded'接受'duckbilledPlatypusInfoMailer_Express.MainWindow'类型的第一个参数（您是否缺少 using 指令或程序集引用？）*

和：

*当前上下文中不存在名称“InitializeComponent”*

关于两个控件，我的标签和按钮（但不是 DatePicker！），我得到了相同的错误消息

因此，就 VC#2010 而言，我的两个事件处理程序、三个控件中的两个以及“InitializeComponent”都被渲染为隐形斗篷......？？？

这是我的 xaml 和代码（最小，所以 p[a,o]sting 全部）：

XAML：

```
<Window x:Class="duckbilledPlatypusInfoMailer_Express.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Duckbilled Platypus Info Mailer"  SizeToContent="WidthAndHeight" WindowStartupLocation="CenterScreen" MinHeight="350" MinWidth="525" Loaded="MainWindow_Loaded" >
    <StackPanel>
        <StackPanel Orientation="Horizontal">
            <Button x:Name="btnSelectPDFFile" HorizontalAlignment="Left" Padding="4" Margin="4" Width="120" Click="btnSelectPDFFile_Click" IsDefault="True">Select PDF File
            </Button>
            <Label x:Name="lblPlatypusSheetFile" Margin="4" >[Selected File]</Label>
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <DatePicker ></DatePicker>
        </StackPanel>
    </StackPanel>
</Window> 
```

代码：

```
using System;
using System.Windows;
using duckbilledPlatypusInfoMailer;

namespace PlatypusInfo_Express
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            btnSelectPDFFile.Focus();
        }

        private void btnSelectPDFFile_Click(object sender, RoutedEventArgs e)
        {
                        var dlg = new Microsoft.Win32.OpenFileDialog
                          {
                              InitialDirectory = @"C:\Scrooge\McDuckbilledPlatypus\",
                              DefaultExt = ".pdf",
                              Filter = "Platypus Data Sheets (sa*.pdf)|sa*.pdf"
                          };

            bool? result = dlg.ShowDialog();

            if (result == true)
            {
                string pdfFilename = dlg.FileName;
                // Show just the file name, without the path
                string pdfFileNameOnly = System.IO.Path.GetFileName(pdfFilename);
                lblReviewSheetFile.Content = pdfFileNameOnly;
                string textFilename = String.Format(@"C:\Scrooge\McDuckbilledPlatypus\{0}.txt", pdfFileNameOnly);
                var pdfParser = new PDFParser();
                if (pdfParser.ExtractText(pdfFilename, textFilename))
                {
                    System.Diagnostics.Process.Start(textFilename);
                }
                else
                {
                    MessageBox.Show("There was a boo-boo, Yogi!");
                }
            }
        }
    }
} 
```

顺便说一句，我确实在我的解决方案（PDFParser.cs）中添加了必要的第 3 方文件以及两个必要的参考。

注意：如果我右键单击 xaml 中的事件处理程序，它确实会将我带到 cs 文件中的那些事件处理程序。所以它知道它们在哪里，为什么说它们不存在或找不到它们？

## 更新

这是我在 WPF 设计器中看到的错误的第一部分：

System.NotSupportedException 尝试从网络位置加载程序集，这会导致程序集在以前版本的 .NET Framework 中被沙盒化。此版本的 .NET Framework 默认情况下不启用 CAS 策略，因此这种加载可能很危险。如果此加载不打算对程序集进行沙箱处理，请启用 loadFromRemoteSources 开关。请参阅[http://go.microsoft.com/fwlink/?LinkId=155569](http://go.microsoft.com/fwlink/?LinkId=155569)了解更多信息。在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion（NestedCallContext nestedCallContext，BlockingCall 调用，WaitHandle timeoutSignal） 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut（Action 操作，Int32 targetApartmentId，WaitHandle 中止，WaitHandle timeoutSignal ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle `1 targetObject, Action action) at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:07:36.413

`duckbilled`XAML 的命名空间中有一个额外的内容：

```
<Window x:Class="duckbilledPlatypusInfoMailer_Express.MainWindow" 
```

它必须与类后面的代码位于相同的命名空间中。

# powershell - Using nuget to update project files outside of Package Manager Console

> ID：11386672
> 
> 赞同：3
> 
> 时间：2012-07-08T21:00:51.890
> 
> 标签：powershell, nuget

Nuget.exe only supports managing packages at a file system/configuration level. The powershell commands command the magic that update the .proj files.

With that said, i need the ability to update a csproj file with the latest version of a NuGet package outside of visual studio (automated).

Basically, how do I use Install-Package (or any of the other methods) inside of an external powershell script of my own?

**UPDATE:**

I would like to ability to add project references outside of VS for the following reason.

My company has a lot of shared libraries that depend on each other in some cases. I am using TFS Nugetter to build and publish nuget packages from TFS. I want to ensure that the developers can't queue a build (package) unless the project can build and run on all the newer versions. This ensures that all the newer versions of the libraries work with all the newer versions of its dependencies. If the build fails, then you need to update your nuget reference in VS and fix the compiler errors/unit tests.

I have been looking at the NuGet source and I think I found an easy way to reuse NuGet source to modify proj files outside of VS (kinda).

```
System.Type t = System.Type.GetTypeFromProgID("VisualStudio.DTE.10.0", true);
var dte = (DTE)System.Activator.CreateInstance(t, true); 
dte.Solution.Open( 
    @"C:\Users\paul.knopf\Documents\Visual Studio 2010\Projects\SLNMemory\SLNMemory.sln"); 
```

Basically, open an in-memory version of visual studio, run the nuget commands, then save.

In a build step, after GetWorkspace, I would like to run this in-memory vs to update all nuget references to the latest version.

What do you think? It would definitely be slow, but we would be on the same code base and have all the functionality we need.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:23:32.000

正如您所描述的那样自动化 Visual Studio 无疑是一种可能性。

我看到的另一种方法是使用 SharpDevelop 在[Visual Studio 之外安装 NuGet 包](http://community.sharpdevelop.net/blogs/mattward/archive/2011/06/12/InstallingNuGetPackagesOutsideVisualStudio.aspx)。NuGet PowerShell cmdlet 已修改为接受解决方案，您可以从命令行自动安装，包括在 NuGet 包中使用 PowerShell 脚本。该代码尚未更新，因此它针对的是旧版本的 NuGet，但可以更新。同样，这类似于您的解决方案和相当重量级的解决方案。

# mongodb - MongoDB：具有稀疏值的唯一和稀疏复合索引

> ID：11386674
> 
> 赞同：5
> 
> 时间：2012-07-08T21:01:21.610
> 
> 标签：mongodb

我正在尝试存储以下链接：

```
URL = {
  hostname: 'i.imgur.com',
  webid: 'qkELz.jpg'
} 
```

我想要这两个字段上的唯一且稀疏的复合索引，因为：

1.  `hostname`和的组合`webid`应该是唯一的。
2.  `webid`将始终使用 进行查询`hostname`。
3.  `webid`不必是全局唯一的。
4.  A`URL`不需要有 webid。

但是，当我这样做时，我收到以下错误：

```
MongoError: E11000 duplicate key error index: db.urls.$hostname_1_webid_1  dup key: { : "imgur.com", : null } 
```

我猜在复合索引的情况下，空值被计算在内，而在常规索引中，它们不是。

有什么办法可以解决这个问题？现在我只是要单独索引`hostname`和索引`webid`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:21:15.827

请记住，mongodb 每个查询只能使用一个索引（它不会将索引连接在一起以更快地对具有单独索引的两个字段进行查询）。

也就是说，如果您想尝试检查唯一性，您可以在插入之前从应用程序中进行查询（这只能部分解决问题，因为查询时间和插入时间之间存在差距）。

您可能想对过滤索引的这个 JIRA 问题进行投票，这可能会对您的用例有所帮助： [https ://jira.mongodb.org/browse/SERVER-785](https://jira.mongodb.org/browse/SERVER-785)

# ios - 在 iPhone 上显示整页 iAd 的示例

> ID：11386675
> 
> 赞同：1
> 
> 时间：2012-07-08T21:01:26.920
> 
> 标签：ios, iad

我知道`ADInterstitialAd`，但 Apple 文档中的信息永远不够。有人可以提供一个完整的例子，如何在 iPhone 上显示整页 iAd 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:01:08.713

查看 Apple 为使用 ADInterstitialAd 提供的示例代码：

[iAdInterstitialSuite](https://developer.apple.com/library/ios/#samplecode/iAdInterstitialSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010627)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T09:37:59.927

这是 Apple[文档](https://developer.apple.com/library/prerelease/ios/documentation/UserExperience/Conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html#//apple_ref/doc/uid/TP40009881-CH5-SW1)和[示例应用程序教程](http://stefansdevplayground.blogspot.sg/2015/06/interstitial-ads.html)

# pyqt - 大小更改后的 GridLayout+ScrollArea 小部件位置

> ID：11386680
> 
> 赞同：1
> 
> 时间：2012-07-08T21:02:47.827
> 
> 标签：pyqt, pyqt4, qscrollarea, qgridlayout

我有一个滚动区域，里面有一个网格布局，我用图像向它添加了 QLabels。当应用程序启动时，它工作正常并正确显示标签：

![开始时](../Images/ab484b2613b2ba9e91b63bc4463b84ad.png) 注意：我计算有多少标签适合当前布局空间。

如果我最大化它也可以正常工作： ![当我最大化](../Images/d5a1e21b72de49671b20f6e7940c9200.png)

但是当我点击恢复时，发生了一些奇怪的事情： ![恢复后](../Images/978674cb16af9f0e37cf0cc76b5aa8e6.png)

您可以看到只添加了 6 个标签（与第一个屏幕截图中相同），但在这里它们都相互重叠。

这是 ScrollArea 和 Layout 的初始化代码：

```
self.scrollArea = QtGui.QScrollArea(self.centralwidget)
sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Ignored, QtGui.QSizePolicy.Ignored)
sizePolicy.setHorizontalStretch(0)
sizePolicy.setVerticalStretch(0)
sizePolicy.setHeightForWidth(self.scrollArea.sizePolicy().hasHeightForWidth())
self.scrollArea.setSizePolicy(sizePolicy)
self.scrollArea.setAutoFillBackground(True)
self.scrollArea.setStyleSheet(_fromUtf8("border: 1px solid blue"))
self.scrollArea.setWidgetResizable(True)
self.scrollArea.setObjectName(_fromUtf8("scrollArea"))
self.gridLayoutWidget = QtGui.QWidget()
self.gridLayoutWidget.setGeometry(QtCore.QRect(0, 0, 667, 551))
sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Ignored, QtGui.QSizePolicy.Preferred)
sizePolicy.setHorizontalStretch(0)
sizePolicy.setVerticalStretch(0)
sizePolicy.setHeightForWidth(self.gridLayoutWidget.sizePolicy().hasHeightForWidth())
self.gridLayoutWidget.setSizePolicy(sizePolicy)
self.gridLayoutWidget.setLayoutDirection(QtCore.Qt.LeftToRight)
self.gridLayoutWidget.setAutoFillBackground(True)
self.gridLayoutWidget.setStyleSheet(_fromUtf8("border: 1px solid red"))
self.gridLayoutWidget.setObjectName(_fromUtf8("gridLayoutWidget"))
self.scrollArea.setWidget(self.gridLayoutWidget) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:54:28.367

所以感谢freenode上的#pyqt（向Avaris大喊）我现在知道问题出在哪里。这似乎是 QGridLayout 中的一个错误。

当我们最大化窗口 QGridLayout 以 12 列结束时，当我们进行恢复时，即使每个项目都被删除，布局仍然假定 12 列，所以在图 3 中它显示 6 个图像，但认为它需要显示 12 个所以它只是重叠其他的。

# php - Symfony2 中所有控制器的某种始终完成的部分

> ID：11386690
> 
> 赞同：2
> 
> 时间：2012-07-08T21:03:43.513
> 
> 标签：php, symfony, doctrine-orm, twig

我有布局，类似的东西：

```
{# ... #}
{% render 'PamilGooglePlusBundle:Default:sidebar' %}
{# ... #}
{{ globalVariable }} 
```

在`PamilGooglePlusBundle:Default:sidebar`我使用 DBAL 运行 2 个查询时，它们会生成用户和组的列表。我在 sidebarAction() 中有函数，它给了我实际资源的名称：组或用户名。我想在模板的其他部分使用它。

我产生了一些想法。我必须每次查询都运行这个方法并每次都获取它的变量，怎么做？我的意思是某种始终执行的控制器方法，以便我可以获取变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:28:01.227

我解决了这个问题！;)

简单地说，我们做 Twig 扩展，用一些参数在那里注册 init 函数，在主模板中使用它，值是注册全局变量 - 就像在这段代码中一样：

```
<?php

namespace Pamil\GooglePlusBundle\Extension\Twig;

use Doctrine\DBAL\Connection;

class Sidebar extends \Twig_Extension
{
    private $dbal;

    private $init = false;

    public $data = array();

    // Specify parameters in services.yml
    public function __construct(Connection $dbal)
    {
        $this->dbal = $dbal;
    }

    public function sidebarInit($pathinfo)
    {
        // This function returns empty string only, cos you can use it only as 
        // {{ sidebarInit(app.request.info) }}, not in {% %}
        if ($this->init === true) {
            return '';
        }

        $this->data = $dbal->fetchAll("SELECT * FROM table");
        // for example:        
        $this->data['key'] = 'value';       

        $this->init = true;
        return '';
    }

    public function getFunctions()
    {
        return array(
                'sidebarInit' => new \Twig_Function_Method($this, 'sidebarInit'),
                );
    }

    public function getGlobals()
    {
        return array(
                'sidebar' => $this
                );
    }

    public function getName()
    {
        return 'sidebar';
    }
} 
```

现在`services.yml`：

```
parameters:
    pamil.google.plus.bundle.extension.twig.sidebar.class: Pamil\GooglePlusBundle\Extension\Twig\Sidebar

services:
  pamil.google.plus.bundle.extension.twig.sidebar:
     class: "%pamil.google.plus.bundle.extension.twig.sidebar.class%"
     arguments: ["@database_connection"] #specify arguments (DBAL Connection here)
     tags:
            - { name: twig.extension, alias: ExtensionTwigSidebar } 
```

我们可以在模板中使用它，例如`main.html.twig`：

```
{{ sidebarInit(app.request.pathinfo) }}
<html>
{# ... #}
{% include 'PamilGooglePlusBundle::sidebar.html.twig' %} 
```

在`sidebar.html.twig`：

```
{{ sidebar.data.key }}
{# outputs 'value' #} 
```

希望它会帮助别人;）

# android - 我如何告诉android它不需要压缩相机图像？

> ID：11386692
> 
> 赞同：0
> 
> 时间：2012-07-08T21:04:10.333
> 
> 标签：android, android-camera

当我用android拍照时，我打电话

```
camera.TakePicture(shutterCallback, rawCallback, postCallback, jpegCallback); 
```

但是我只需要后期图像数据。所以我打电话

```
camera.TakePicture(null, null, postCallback, null); 
```

我想尽快拍摄连续照片。android 规范告诉我，我必须等待 jpeg 回调完成，然后才能再次调用 takePicture（很公平）。

但这是否意味着我*必须*添加一个 jpegCallback 并等待它被调用？压缩是`Camera.takepicture`android 过程中不可跳过的部分吗？当我不需要它时，不得不等待图像的压缩版本似乎是一种浪费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:49:00.123

许多设备都内置了 H/W 图像编解码器。其中一些完全跳过 rawCallback 和 postViewCallback 并且只返回压缩数据（jpeg）。这样，未压缩的图像（大）根本不必复制到用户空间，从而加快了图像拍摄速度。

我认为在使用硬件编解码器时，压缩回调实际上可能比未压缩更快（要传输的数据更少）。

因此，您不能依赖 raw 和 postView 回调来获取所有设备上的图片数据。

# scala - 映射器和几个一对多关系

> ID：11386694
> 
> 赞同：1
> 
> 时间：2012-07-08T21:04:33.183
> 
> 标签：scala, lift

我想声明一个具有多个一对多关系的实体。不幸的是，我必须为每个一对多关系实现 OneToMany 特征。我不能这样做两次。有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:35:18.003

目前我没有方便的方法来测试它，但如果我没记错的话，你可以[`MappedOneToMany`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.mapper.OneToMany%24MappedOneToMany)在混合后拥有尽可能多的对象`OneToMany`：

```
class User extends LongKeyedMapper[User] with IdPK with OneToMany[Long, User] {
  object pets extends MappedOneToMany(Pet, Pet.owner)
  object books extends MappedOneToMany(Book, Book.owner)
} 
```

请注意，`OneToMany`相关表没有类型参数。

# c - 我的 strchr 版本有什么问题？

> ID：11386698
> 
> 赞同：-3
> 
> 时间：2012-07-08T21:05:18.317
> 
> 标签：c, pointers, strchr

我的任务是编写我自己的 strchr 版本，但它似乎不起作用。任何建议将不胜感激。这里是：

```
char *strchr (const char *s, int c) //we are looking for c on the string s
{

    int dog; //This is the index on the string, initialized as 0
    dog = 0;
    int point; //this is the pointer to the location given by the index
    point = &s[dog];
    while ((s[dog] != c) && (s[dog] != '\0')) { //it keeps adding to dog until it stumbles upon either c or '\0'
            dog++;
            }
    if (s[dog]==c) {
            return point; //at this point, if this value is equal to c it returns the pointer to that location
            }
    else {
            return NULL; //if not, this means that c is not on the string
            }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T21:08:59.140

您返回最初初始化为字符串开头并且此后未移动的“point”。您根本不需要该变量，但可以简单地返回 &s[dog] （尽管我更喜欢比 dog 更具描述性的东西作为变量名）。

实际上，您可以通过以下简单的方式生存：

```
while (*s != c && *s)
    ++s;

return (*s == c) ? s : NULL; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T21:16:06.137

您正在尝试将地址存储到`point`其中，但它是一个 int 变量。你应该这样做：

```
char *strchr(char *s, char c) {
    int pos = 0;
    while (s[pos] != c && s[pos] != '\0')
        pos++;
    if (s[pos] == c)
        return &s[pos];
    else
        return NULL;
} 
```

顺便说一句：不`s`应该是因为你返回一个指向 a 的指针，那不是一个好的风格；）（或 return ）`char *``const char *``char``const char *`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:06:43.170

```
int point; 
```

这不是指针的声明，这里是如何声明指向 an 的指针`int`：

```
int *bla; 
```

在您的情况下`&s[dog]`是指向 a 的指针`const char`，因此您想以`point`这种方式声明：

```
 const char *point; 
```

正如其他人指出的那样，之后您实际上在函数中忽略了这个指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:10:45.487

在您的代码中

```
int point; //this is the pointer to the location given by the index
point = &s[dog]; 
```

您正在尝试将指向 char 的指针转换`int`为

```
char* point = &s[dog]; 
```

是你想要的。您应该已经从函数的返回类型中看到了这一点。你想返回一个`char*`，但你返回一个`int`（你的变量`point`）或NULL。由于您从未真正更改`point`，因此您实际上是在返回数组中第一个字符的地址，因此您的代码无论如何都无法正常工作。如果你坚持这一点，你会更好地使用

```
char* point = &s[dog];
while ((*point != c) && (*point != '\0')) {          
   ++point;
}
return (*point == c) ? point : NULL; 
```

但是在这里，您似乎仍然有一个概念问题，因为您想将 a`char`与a 进行比较`int`。您应该确定是否需要`int`数组或`char`数组。如果您想要一个`char`数组，请将您的输入参数更改`c`为 type `char`。

# c# - C# 客户端 Python 服务器：连接被拒绝

> ID：11386701
> 
> 赞同：1
> 
> 时间：2012-07-08T21:06:18.067
> 
> 标签：c#, python, sockets, communication

我正在研究 C#（客户端）和 Python（服务器）之间的基本套接字通信，但我不明白客户端出现此错误的原因：

[错误] 致命的未处理异常：System.Net.Sockets.SocketException：连接在 /private/tmp/monobuild/build/BUILD/ 中的 System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP) [0x00159] 处被拒绝mono-2.10.9/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:1262 在 System.Net.Sockets.TcpClient.Connect (System.Net.IPEndPoint remote_end_point) [0x00000] 在 /private/tmp/ monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/TcpClient.cs:284 在 System.Net.Sockets.TcpClient.Connect (System.Net.IPAddress[] ipAddresses, Int32端口）[0x000b3] 在 /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net.Sockets/TcpClient.cs:355

我的程序真的很短很容易，所以我想这是一个菜鸟问题，但我就是不明白。我想要的只是一个客户端向服务器发送一条消息，该消息将在控制台上打印出来。

这是 C# 客户端（错误来自 :socket.Connect("localhost",9999);）

```
using System;
using System.Net.Sockets;

namespace MyClient
 {
class Client_Socket{
    public void Publish(){
TcpClient socket = new TcpClient();
socket.Connect("localhost",9999);
NetworkStream network = socket.GetStream();
System.IO.StreamWriter streamWriter= new System.IO.StreamWriter(network); 
streamWriter.WriteLine("MESSAGER HARGONIEN");
streamWriter.Flush();   
network.Close();
   }

}
} 
```

和 Python 服务器：

```
from socket import *

if __name__ == "__main__":
    while(1):
        PySocket = socket (AF_INET,SOCK_DGRAM)
        PySocket.bind (('localhost',9999))
        Donnee, Client = PySocket.recvfrom (1024)
        print(Donnee) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:08:21.757

你有两个问题。首先是您绑定到`localhost`. `0.0.0.0`如果您希望其他计算机能够连接，您可能希望绑定到：

```
PySocket.bind (('0.0.0.0',9999)) 
```

另一个问题是您使用 UDP 服务并尝试使用 TCP 连接。如果你想使用 UDP，你可以使用[`UdpClient`](http://msdn.microsoft.com/en-us/library/System.Net.Sockets.UdpClient.aspx)而不是[`TcpClient`](http://msdn.microsoft.com/en-us/library/System.Net.Sockets.TcpClient.aspx). 如果要使用 TCP，则必须使用[`SOCK_STREAM`](http://docs.python.org/library/socket.html#socket.SOCK_STREAM)而不是[`SOCK_DGRAM`](http://docs.python.org/library/socket.html#socket.SOCK_DGRAM)和使用[`listen`](http://docs.python.org/library/socket.html#socket.socket.listen),[`accept`](http://docs.python.org/library/socket.html#socket.socket.accept)和[`recv`](http://docs.python.org/library/socket.html#socket.socket.recv)而不是[`recvfrom`](http://docs.python.org/library/socket.html#socket.socket.recvfrom).

# actionscript-3 - 无法在加载器中屏蔽 Stage3D SWF

> ID：11386702
> 
> 赞同：0
> 
> 时间：2012-07-08T21:06:20.620
> 
> 标签：actionscript-3, flash, flash-builder, stage3d

在 FlashBuilder 中工作时，我构建了一个移动 AS3 应用程序，该应用程序使用 Loader 来显示本地 SWF 文件。它掩盖了加载程序，因此它只显示一个 640x480 的窗口。使用旧的 SWF 文件（Flixel 游戏，非 Stage3D）可以正常工作。

然后我尝试使用支持 Stage3D 的 SWF 文件。这无法运行，因为应用程序未设置为在“直接”渲染模式下运行（直到此时它一直处于自动状态）。这允许应用程序运行，但 SWF 文件现在忽略加载器的掩码并显示在整个舞台上。

以这种方式加载时是否无法屏蔽 Stage3D SWF？加载看起来像这样：

```
 public function FlixelTest()
    {
        super();

        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        myLoader.x = (stage.fullScreenWidth-640)/2;
        myLoader.y = (stage.fullScreenHeight-480)/2;

        var url:URLRequest = new URLRequest("stage3dswf.swf"); // in this case both SWFs are in the same folder
        myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadProdComplete);
        myLoader.load(url);    // load the SWF file

        addChild(myLoader);
    }

    private function loadProdComplete(e:Event):void{
        var gameMask : Shape = new Shape;
        gameMask.graphics.beginFill(0xffcc00);
        gameMask.graphics.drawRect(myLoader.x,myLoader.y,640,480);  
        gameMask.graphics.endFill();
        myLoader.content.mask = gameMask;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:39:49.147

您可以在[Adob​​e 的 Stage3D 文档](http://www.adobe.com/de/devnet/flashplayer/articles/how-stage3d-works.html)中阅读，特殊的 Stage3D 图层位于用于 2D 内容的常规舞台“后面”。

由于在 2D 舞台中应用的任何遮罩都存在于不同的显示列表中，因此无法在 Stage3D 内容上使用 2D 遮罩。如果可能的话，获得类似结果的唯一方法是在 Stage3D 上下文中使用 3D 图层和 alpha 蒙版。

# c++ - 为什么编译器不将此标记为错误而不是警告？

> ID：11386709
> 
> 赞同：1
> 
> 时间：2012-07-08T21:06:48.440
> 
> 标签：c++, visual-studio-2008, visual-c++

```
#include <iostream>

using namespace std;

class test{
public:
    test() { cout<<"CTOR"<<endl; }
    ~test() { cout<<"DTOR"<<endl; }
};

int main()
{
 test testObj();
 cout<<"HERE"<<endl;

} 
```

输出：

```
HERE 
```

编译器跳过“test testObj();”行并编译其余部分并发出警告，运行时将生成输出。警告是“在 VC++ 2008 中未调用原型函数（是否打算定义变量？）。为什么它不抛出错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T21:08:30.947

因为这不是错误。

您的代码已经违反了[*最令人头疼的解析*](http://en.wikipedia.org/wiki/Most_vexing_parse)（总而言之，`test testObj();`没有定义变量，它声明了一个函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T21:08:52.833

简单地说，因为声明一个函数（例如您声明的函数）并不是错误。不过，警告应该足够有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:10:15.850

从 Main 中的构造函数调用中删除 ()

```
int main()
{
    test testObj;
    cout<<"HERE"<<endl;
} 
```

# javascript - 创建响应式图像的最简单方法是什么？

> ID：11386711
> 
> 赞同：0
> 
> 时间：2012-07-08T21:07:37.833
> 
> 标签：javascript, jquery-plugins, image-processing, responsive-design

我正在开发我的第一个响应式网站，我想知道如何使所有图像动态调整大小。我现在已经解决了这个问题，但我真的很想重新考虑我是如何做到这一点的。是否有一个`jquery`易于实现的插件（我不太了解`js`）？有没有更好的办法？

[我的网站](http://smore.rvadv.com/?page_id=60)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:48:31.257

您实际上不需要任何 js - 这可以单独使用 CSS 来实现。正如您通过查看评论中链接中的来源发现的那样，动态调整图像大小所需的只是将`max-width`属性设置为`100%`. 但是，如果您希望图像的大小也动态增加，那么您必须使用`width:100%`.

请参阅此[jsFiddle](http://jsfiddle.net/svigna/DEkFg/)中的示例。您会注意到`max-width`不会超过图像的分辨率 - 另一方面`width`确保图像填充容器（有些人认为这是一个缺点，因为当宽度超过原始分辨率时它们会失去分辨率）。

但是有一个`max-width`问题，IE6 或更低版本不支持属性 - 它仅在 IE7 中引入。这篇文章[在这里](http://phydeaux3.blogspot.ca/2006/01/max-width-and-faking-it-for-ie.html)提供了一个解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T12:56:22.727

但是通过 css 调整图像大小不会使图像响应。

一个 200 kb 的图像在 1000 px 宽时将是 200 kb，但当它被 css 调整为 50 px 宽时也是如此。

等到智能手机上加载大图像时，我想看看你们的脸

# javascript - 从 javascript 中删除警报

> ID：11386712
> 
> 赞同：-3
> 
> 时间：2012-07-08T21:08:08.300
> 
> 标签：javascript, facebook

我有以下教程中的代码，我想要操作，但我只想删除警报，

这是代码：

```
<script type="text/javascript">
setTimeout('read()', 10000);

function read()
{
FB.api('/me/news.reads' + 
'?article=<?php echo $fbrdurl ?>&access_token=<?php echo $access_token ?>','post',
function(response) {
var msg = 'Error occured';
if (!response || response.error) {
if (response.error) {
msg += "\n\nType: "+response.error.type+"\n\nMessage: "+response.error.message;
}
alert(msg);
} 
else {
alert('Post was successful! Action ID: ' + response.id);
}
});
}
</script> 
```

我试过这个：

```
<script type="text/javascript">
setTimeout('read()', 10000);

function read()
{
FB.api('/me/news.reads' + 
'?article=<?php echo $fbrdurl ?>&access_token=<?php echo $access_token ?>','post';
}
</script> 
```

但没有用，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:11:24.907

如果您尝试做的只是忽略响应（删除警报对话框）：

```
function read()
{
  FB.api('/me/news.reads' + 
  '?article=<?php echo $fbrdurl ?>&access_token=<?php echo $access_token ?>','post',
   function(response) {});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:19:40.633

如果您没有在其他任何地方使用 alert() 函数，则可以简单地覆盖它，使其不执行任何操作：

```
window.alert = function() {}; 
```

# objective-c - 在屏幕上显示带有条形的倒计时计时器

> ID：11386719
> 
> 赞同：0
> 
> 时间：2012-07-08T21:08:57.903
> 
> 标签：objective-c, ios, xcode

我想创建一个带有进度条（向后进度条）的倒数计时器。

我希望它告诉我何时到达时间的尽头，并且我希望能够随时停止并重新启动它。

有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:24:21.990

是的。Matt Legend Gemmel 有一个关于如何处理自定义 UI 控件的[精彩视频。](https://vimeo.com/17158932)

# javascript - Onclick 更改顶部位置不做任何事情

> ID：11386726
> 
> 赞同：0
> 
> 时间：2012-07-08T21:09:58.997
> 
> 标签：javascript, css, drop-down-menu, absolute

我想问题已经说明了。当您单击加号时，会显示额外的内容（Hello Guest 和 Register and Signup）。他们是这样做的更好和工作方式还是我有错误。java脚本的新手，所以不要讨厌。---> [http://jsfiddle.net/CM9Av/](http://jsfiddle.net/CM9Av/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:12:57.840

您不能只更新变量 fromtop，这对页面没有影响。您将不得不手动更新最高值，就像您阅读它一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:13:29.327

你没有设置顶部。此外，缓存您的变量。

```
function menuanimate() {
    var loginoutbox = document.getElementById("loginoutbox");
    var fromtop = loginoutbox.style.top;
    if (fromtop == "-20px") {
        fromtop = "0px";
    }
    else {
        fromtop = "-20px";
    }
    loginoutbox.style.top = fromtop;
}​ 
```

在标记中，设置`top`为内联样式。`stlye.top`不会读取 css 属性。

```
<div id="loginoutbox" class="ablack" style='top:-20px'></div> 
```

在一个简单的网页中尝试外部小提琴。有用 ！

演示[小提琴](http://jsfiddle.net/HJ6mL/1/)（我不知道如何将纯js放入fiddle.net）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:34:56.803

```
<html>

<script type="text/javascript">
function menuanimate(){

document.getElementById("loginoutbox").style.top="0px";
}
</script>

<style type="text/css">
#image{
position:fixed;
top:0px;
left:80%;
}
#image:hover{cursor:pointer;}
#loginoutbox{
left: 80%;
width: 218px;
color: white !important;
position: fixed;
top: -20px;
background-color: #444;
height: 20px;
text-align: right;
}
</style>

<img style="margin-right: 94px;" src="http://www.kdogisthebest.webege.com/images/plustab.png" id="image" onClick="menuanimate();"/>

<div id="loginoutbox" class="ablack" style="top:-20px;">
<div style="display: inline-block; font-size: 14px; padding-left: 20px;">Hello Guest!</div>
<a id="register" href="#fallr-register" class="button">Register</a> |
<a id="signin" href="#fallr-signin" class="button">Login</a>
</div>

</html> 
```

This is not the prettiest but I think this is what you are looking for as far as the end result...

# php - 从 Grocery CRUD 表视图提交按钮和表单处理程序？

> ID：11386731
> 
> 赞同：1
> 
> 时间：2012-07-08T21:10:18.430
> 
> 标签：php, codeigniter, grocery-crud

我有一个必须向选定用户发送批量电子邮件的应用程序。我需要显示我的用户表，每行带有一个复选框和一个带有表单处理程序的提交按钮，以对选中的行进行操作。考虑到 GC 的内置功能，如过滤器和列排序、分页等……我认为使用 GC 将是一个很好的解决方案。我找到了有关添加复选框的信息。如何添加提交按钮和表单处理程序？任何人都有一两个提示从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:03:09.513

有几种方法可以做到这一点。我将在这里解释两种方式。

创建复选框，为 id 值使用用户详细信息的一些唯一数据，例如用户 ID 或用户名。之后，在更改复选框选择时调用 javascript 方法以使用当前状态更新隐藏字段。您可以使用一些特殊的分隔符来分隔复选框。假设如果选中了 id 为 1,5,6 的复选框，则隐藏字段应更新为“1#5#6”。在服务器端，您可以使用explode 方法创建一个数组，然后您将拥有数组中的用户名。

另一种方法是使用 AJAX 并立即处理它。我在[http://www.thephpcode.com](http://www.thephpcode.com)上的 Codeigniter 代码生成器上使用了这种方式来更新用户角色的权限。管理员用户可以授予或撤销用户角色的权限。所有权限都将显示为复选框和当前状态。更改后，它将通过 AJAX 调用立即更新。

# java - java - 如何在运行时调整控件的大小

> ID：11386737
> 
> 赞同：1
> 
> 时间：2012-07-08T21:11:05.203
> 
> 标签：java, swing, resize, runtime

有没有办法在运行时在java中调整控件的大小，例如JTextfield？我希望我的文本字段具有调整大小的光标（就像您将光标指向窗口的角落时一样）并且能够在运行时调整大小。我在互联网上读到 vb6 和 C# 具有这些功能，有什么适用于 java 的吗？非常感谢您提供示例代码或指向良好教程的链接。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:54:07.823

听起来您正在尝试实现组件编辑器，例如流行的编程 IDE 中可用的 GUI 编辑器。基本特征是一个*句柄*，一个可以选择和拖动以更改几何图形的图形对象。[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)是一个对象绘图程序的简单示例，它说明了许多所需的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:13:39.730

这取决于`Layout`的`JTextField`容器。[http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)上提供了一个很好的教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T22:34:40.863

要获得快速且廉价的解决方案，您可以使用一个`JSplitPane`组件，`JTextField`在左侧调整大小，在右侧调整大小`JPanel`。默认情况下 a`JSplitPane`装饰有边框和分隔线，但您可以通过设置空边框来删除它们。

# php - 使用PHP从xml中提取多个标签

> ID：11386744
> 
> 赞同：1
> 
> 时间：2012-07-08T21:12:27.723
> 
> 标签：php, xml

这是我的地址.xml

```
<?xml version="1.0" ?>
<!--Sample XML document -->
<AddressBook>
    <Addressentry>
        <firstName>jack</firstName>
        <lastName>S</lastName>
        <Address>2899,Ray Road</Address>
        <Email>jkjsvsdka@ghu.edu</Email>
    </Addressentry>
    <Addressentry>
        <firstName>Sid</firstName>
        <lastName>K</lastName>
        <Address>238,Baseline Road,TX</Address>
        <Email>sk@ghu.edu</Email>
        <Email>sk@gmail.com</Email>
    </Addressentry>
    <Addressentry>
        <firstName>Satya</firstName>
        <lastName>Yar</lastName>
        <Address>6,Rural Road,Tempe,AZ</Address>
        <Email>syarlag@ghu.edu</Email>
       <Email>ssya@gmail.com</Email>
        <Email>satag@yahoo.com</Email>
    </Addressentry>

</AddressBook> 
```

我正在尝试使用如下 PHP 代码加载所有条目。每个地址条目可以有一个或多个标签。现在从下面的代码中我只能提取一个标签。我的问题是如何提取与特定地址条目相关的所有标签。那就是我想在同一行打印所有电子邮件。

```
<?php
$theData = simplexml_load_File("address.xml");

foreach($theData->Addressentry as $theAddress) {
    $theFirstName = $theAddress->firstName;
    $theLastName = $theAddress->lastName;
    $theAdd = $theAddress->Address;

    echo "<p>".$theFirstName."
    ".$theLastName."<br/>
    ".$theAdd."<br/>
    ".$theAddress->Email."<br/>
    </p>";

    unset($theFirstName);
    unset($theLastName);
    unset($theAdd);
    unset($theEmail);
}
?> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:23:47.120

```
$emails = array();
foreach ($theAddress->Email as $email) {
    $emails[] = $email;
}
echo "<p>".$theFirstName."
    ".$theLastName."<br/>
    ".$theAdd."<br/>
    ".implode(', ', $emails)."<br/>
    </p>"; 
```

# html - 是否可以在表格中嵌入 Flash 播放器并保留表格属性

> ID：11386745
> 
> 赞同：0
> 
> 时间：2012-07-08T21:12:30.450
> 
> 标签：html, flash, html-table, embed

我想在带有可点击图像的表格中嵌入音乐（flash）播放器，但嵌入代码似乎会关闭表格属性 - 它扩展了表格的宽度。

是否可以将播放器嵌入到与图像相同的行中，同时仍保留表格宽度？

这是我一直在使用的：

```
<table width="620"  border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td>
        <div align="left">
            <object height="18" width="100%"> 
                <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1253725&amp;auto_play=false&amp;player_type=tiny&amp;font=Georgia&amp;color=9a6600&show_playcount=false&default_width=375&default_height=40&show_user=false"></param> 
                <param name="allowscriptaccess" value="always"></param> 
                <param name="wmode" value="transparent"></param>
                <embed wmode="transparent" allowscriptaccess="always" height="18" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1253725&amp;auto_play=false&amp;player_type=tiny&amp;font=Georgia&amp;color=9a6600&show_playcount=false&default_width=375&default_height=40&show_user=false" type="application/x-shockwave-flash" width="100%"></embed> 
            </object>
        </td>
        <td>
            <div align="right"><img src="http://dl.dropbox.com/u/31856944/Virb/splash_freedownload-2.png" border="0" width="245" height="42" usemap="#Map" /></div>
        </td>
    </tr>
    <tr>
        <td>
            <div align="right"><img src="http://dl.dropbox.com/u/31856944/Virb/splash_share-2.png" border="0" width="620" height="31" usemap="#Map2" /></div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:34:21.967

在第一行 ( `<tr>`) 你有两个单元格，在第二行只有一个单元格。此外，在第一行中，第一个单元格`div`没有结束标记。

尝试先修复此错误，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:02:10.020

```
<table width="620"  border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td>
        <div style="{ width: 300px; height: 200px; }">
            <object height="18" width="80%"> 
                <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1253725&amp;auto_play=false&amp;player_type=tiny&amp;font=Georgia&amp;color=9a6600&show_playcount=false&default_width=375&default_height=40&show_user=false"></param> 
                <param name="allowscriptaccess" value="always"></param> 
                <param name="wmode" value="transparent"></param>
                <embed wmode="transparent" allowscriptaccess="always" height="18" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1253725&amp;auto_play=false&amp;player_type=tiny&amp;font=Georgia&amp;color=9a6600&show_playcount=false&default_width=375&default_height=40&show_user=false" type="application/x-shockwave-flash" width="100%"></embed> 
            </object>
        </div>
        </td>
        <td>
            <div align="right"><img src="http://dl.dropbox.com/u/31856944/Virb/splash_freedownload-2.png" border="0" width="245" height="42" usemap="#Map" /></div>
        </td>
    </tr>
    <tr>
        <td>
            <div align="right"><img src="http://dl.dropbox.com/u/31856944/Virb/splash_share-2.png" border="0" width="620" height="31" usemap="#Map2" /></div>
        </td>
        <td>empty</td>
    </tr>
</table> 
```

* * *

正在工作中 ...

*   关闭所有打开的标签
*   对每一行使用相同的列号

# python - python输入UnicodeDecodeError：

> ID：11386747
> 
> 赞同：6
> 
> 时间：2012-07-08T21:12:45.130
> 
> 标签：python, unicode, input

蟒蛇3.x

```
>>> a = input()
hope
>>> a
'hope'
>>> b = input()
håpe
>>> b
'håpe'
>>> c = input()

start typing hå... delete using backspace... and change to hope

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'utf8' codec can't decode byte 0xc3 in position 1: invalid continuation byte
>>> 
```

情况并不可怕，我正在解决它，但奇怪的是，在删除时，字节被弄乱了。有没有其他人经历过这个？

终端历史显示它认为我进入了`h?ope`

有任何想法吗？

在使用它的脚本中，我确实导入`readline`以提供命令行历史记录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T21:21:25.813

看起来退格键正在删除最后一个*字节*而不是最后一个*字符*。最终发生的是您键入：

```
68 c3 a5
h |  å

68 c3 6f 70 65
h |  |o |p |e 
```

在 UTF-8 中，设置了第一位的字节 ( `c3`) 意味着下一个字节也必须设置其第一位（参见[Wikipedia 的描述](http://en.wikipedia.org/wiki/UTF-8#Description)）。

确保您的终端仿真器和 readline 了解您使用的是 UTF-8。

# php - PHP SELECT FROM WHERE col IN 无法使用数组

> ID：11386749
> 
> 赞同：1
> 
> 时间：2012-07-08T21:13:13.880
> 
> 标签：php, mysql

我正在尝试使用从第一个查询中获取的数组从 MySQL 中提取一些数据。在那之后一切都很好，一直到内爆，这让我很头疼。有人能帮我吗？

```
<?php

include("conect.php");

$colcod = $_POST['rubi'];

// $colcod = 'rubi';

include("config/conectar.php");
$colonias="SELECT zip FROM the_codes WHERE  coloni LIKE '%$colcod%' ORDER BY coloni";
$resultados = $asies->query($colonias);
    while ($fila = $resultados->fetch_array()){
      $codigo[]=$fila['zip'];
    }

array_pop($codigo);
$codigo = implode(', ',$codigo);
//print_r ($codigo); // <- Imprimimos para asegurarnos que todo está bien

$usuarios = "SELECT * FROM reg_temp WHERE zip IN ('".$codigo."') ";
$respuesta = $asies->query($usuarios);
while ($fila = $respuesta -> fetch_array()){
    $nombre = $fila['name'];
echo $nombre;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:37:59.930

`$mycode = implode(', ',$mycode);`已经将数组转换为逗号分隔的字符串，因此您无需在`join`内部使用`IN(...)`

```
$usr = "SELECT * FROM reg_temp WHERE zip IN('".$mycode)."')";
$results = $asies->query($usr);
while ($row = $results->fetch_array())
{
    $name = $row['name'];
    echo $name;
} 
```

另请注意`while ($row = $results-> fetch_arra())`，这是不对的。

# mysql - Django - 将行添加到 MySQL 数据库

> ID：11386751
> 
> 赞同：5
> 
> 时间：2012-07-08T21:13:21.257
> 
> 标签：mysql, django, django-views

所以我已经有一个数据库设置，其中已经插入了几列和几行。我正在尝试创建一个视图，您只需将信息输入表单并按提交，然后将一行添加到 MySQL 数据库与您刚刚输入的信息。

我相信你可以用管理员做到这一点，但我想在没有管理员的情况下尝试，我不确定这是否可能？到目前为止，我一直在使用 MySQL 命令行来添加行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T22:13:43.427

当然，这可能是数据驱动网站的构建块。您可以按照 Daniel 的建议使用 ModelForm（他们免费提供内置验证和 HTML 标记）来轻松地将您的模型映射到前端表单。首先从 django 教程或文档开始可能会有所帮助。

在最基本的情况下，您所要做的就是实例化您的模型

```
new_entry = YourModel(name='me', age='222', about='stackoverflow') 
```

然后保存

```
new_entry.save() 
```

这会将其作为新行添加到您的数据库中。

[https://docs.djangoproject.com/en/dev/topics/db/models/](https://docs.djangoproject.com/en/dev/topics/db/models/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:53:15.390

为什么不可能？

您可能需要一个[模型](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)表单（但请先查看[一般表单介绍](https://docs.djangoproject.com/en/1.4/topics/forms/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T22:30:35.960

试试这个通用视图的例子：http: [//postneo.com/2005/08/17/django-generic-views-crud](http://postneo.com/2005/08/17/django-generic-views-crud)（假设一个名为Task的模型）

使用通用视图，您无需任何实际工作即可免费获得插入、更新和删除。试一试，让我知道你的想法。

```
from django.conf.urls.defaults import *

info_dict = {
    'app_label': 'tasks',
    'module_name': 'tasks',
}

urlpatterns = patterns('',
    (r'^tasks/create/?$', 'django.views.generic.create_update.create_object', info_dict ),
    (r'^tasks/update/(?P<object_id>\d+)/?$', 'django.views.generic.create_update.update_object', info_dict),
    (r'^tasks/delete/(?P<object_id>\d+)/?$', 'django.views.generic.create_update.delete_object', info_dict ),
) 
```

Django 文档：[https ://docs.djangoproject.com/en/1.2/ref/generic-views/#create-update-delete-generic-views](https://docs.djangoproject.com/en/1.2/ref/generic-views/#create-update-delete-generic-views)

# cocoa - 访问 NSCollectionView 视图的控件

> ID：11386753
> 
> 赞同：3
> 
> 时间：2012-07-08T21:13:33.350
> 
> 标签：cocoa, nscollectionview

我正在使用一个`NSCollectionView`来显示各种对象。整个事情都很好，除了一件烦人的事情。我无法弄清楚如何访问用于表示集合中每个对象的视图上的各种控件。

这是设置：

*   `NSCollectionView`我在 IB中拖入了我的视图。
*   我做了一个自定义子类`NSCollectionViewItem`。映射我在 IB 中的课程。
*   我创建了一个自定义子类`NSBox`来充当集合中每个对象的视图。还在 IB 中映射了此类并将其连接到`view`我的`NSCollectionViewItem`子类的属性。
*   我在 IB 中进行了所有绑定以显示每个对象的正确信息。

风景：

![在此处输入图像描述](../Images/9ff675974d5459814a2fc68cf22f0b25.png)

生成的集合视图：

![在此处输入图像描述](../Images/ffd4f076fd4f439388bea626abdd814a.png)

推理我的子类`NSCollectionViewItem`基本上是集合中每个视图的控制器，我在我的控制器子类中的视图中引用了各种控件的出口：

```
@interface SourceCollectionViewItem : NSCollectionViewItem

@property (weak) IBOutlet NSTextField *nameTextField;
@property (weak) IBOutlet NSTextField *typeTextField;
@property (weak) IBOutlet RSLabelView *labelView;
@property (weak) IBOutlet NSButton *viewButton;

@end 
```

当我检查调试器中的任何实例时`SourceCollectionViewItem`，所有属性都显示为 nil，尽管我实际上可以在屏幕上看到它们并且所有内容都按应有的方式显示。

我的设置灵感来自 Apple 的示例应用[IconCollection](http://developer.apple.com/library/mac/#samplecode/IconCollection/Introduction/Intro.html)。

我显然错过了一些东西。什么？

编辑：我发现各种帖子都暗示了一个类似的问题： [CocoaBuilder.com](http://www.cocoabuilder.com/archive/cocoa/278409-how-do-bind-custom-view-properties-to-an-nscollectionviewitem.html)和[这个](https://stackoverflow.com/questions/6194395/how-do-you-initialize-a-nscollectionviewitem)关于 SO 的问题。

编辑：为了完整起见：[这篇文章](http://benedictcohen.co.uk/blog/archives/72)也涉及该主题，并根据已接受答案中提到的选项的组合提供解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T07:45:35.557

在 nib 加载期间设置出口，只有原型项目从 nib 加载并分配其出口。所有其他`ViewItem`s 和它们`View`的 s 都是从原型中克隆的，在这种情况下，出口只是从未初始化的实例变量。

以下是我能想到的选项：

*   覆盖`newItemForRepresentedObject:`集合视图并重新加载 nib 而不是克隆原型。但这可能会极大地损害性能。
*   覆盖`copyWithZone`集合视图项目并手动分配网点 `viewWithTag:`以查找它们。
*   放弃并尝试仅通过绑定提供数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T22:14:39.163

我发现覆盖 NSCollectionViewItem`-setRepresentedObject:`也可能是一个不错的选择，因为当所有 IBOutlet 似乎都准备好时，它会在新项目上调用。致电后，`super`您可以做任何需要的事情：

```
- (void)setRepresentedObject:(id)representedObject
{
    if (representedObject) {
        [super setRepresentedObject:representedObject];
        [self.anOutlet bind:@"property" toObject:self.representedObject withKeyPath:@"representeProperty" options:nil];
    }
} 
```

我使用此方法绑定接口对象的自定义属性。当代表对象还没有准备好时，检查是为了避免无用的调用。该项目对 ViewItem 使用单独的 xib，如原始编辑中的链接中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T19:35:46.573

好问题。就像@hamstergene 建议的那样，您可以使用`copyWithZone`，与`newItemForRepresentedObject`. 然而`viewWithTag`，这并不总是一种选择，首先，因为并非所有东西都可以（轻松地）标记，其次，为此目的使用标记有点错误。这是 Swift 中考虑到性能的一种很酷的方法。

```
import AppKit

class MyViewController: NSCollectionItemView
{

    // Here you are cloning the original item loaded from the storyboard, which has 
    // outlets available, but as you've seen the default implementation doesn't take
    // care of them. Each view has a unique identifiers, which you can use to find it
    // in sublayers. What's really cool about this, is that you don't need to assign
    // any tags or do anything else while having advantage of better performance using
    // cached nib object.

    override func copyWithZone(zone: NSZone) -> AnyObject {
        let copy: NSCollectionItemView = super.copyWithZone(zone) as! NSCollectionItemView
        let oldView: RecordingView = self.view as! MyView
        let newView: RecordingView = copy.view as! MyView

        newView.foo = newView.viewWithIdentifier(oldView.foo.identifier!) as! NSTextfield
        newView.bar = newView.viewWithIdentifier(oldView.bar.identifier!) as! NSImageView

        return copy
    }
}

@IBDesignable class MyView: View
{

    // Custom collection view item view. Lets assume inside of it you have two subviews which you want
    // to access in your code.

    @IBOutlet weak var foo: NSTextfield!
    @IBOutlet weak var bar: NSImageView!
}

extension NSView
{

    // Similar to viewWithTag, finds views with the given identifier.

    func viewWithIdentifier(identifier: String) -> NSView? {
        for subview in self.subviews {
            if subview.identifier == identifier {
                return subview
            } else if subview.subviews.count > 0, let subview: NSView = subview.viewWithIdentifier(identifier) {
                return subview
            }
        }
        return nil
    }
} 
```

# android - 在android中查询View.OnClickListener()

> ID：11386755
> 
> 赞同：0
> 
> 时间：2012-07-08T21:13:45.400
> 
> 标签：android

我试图理解什么是`View.OnClickListener()`.
我读过这个网站： http: [//developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)，但我不明白谁是客户，谁是听众。

请详细说明。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:17:48.370

来自文档：

> 单击视图时要调用的回调的接口定义。

[`reference`](http://developer.android.com/reference/android/view/View.OnClickListener.html)

简单地说：所以当你实现这个时，你可以为你的所有小部件*处理点击事件*，等等。`Views``Button``ImageView`

当你实现这个时，你必须实现`onClick`方法。当您单击 some`View`时，会立即调用此方法。

```
public void onClick(View v) {
   switch(v.getId()) {
      // do your work
   }
} 
```

但不要忘记您必须`OnClickListener`为特定的*小部件注册*

```
someButton.setOnClickListener(this); 
```

您很可能需要学习**Android 基础知识**，我向您推荐它。

**注意：**您也可以将侦听器用作匿名类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:21:23.593

这是一个接口，用于为希望在单击 View 元素时获得通知的类实现。

例如：

```
public class FooActivity extends Activity implements View.OnClickListener {

    public void onCreate(...) {
        View v = findViewById(...);
        v.setOnClickListener(this);
    }

    public void onClick(View v) {
        // method which is invoked when the specific view was clicked
    }
} 
```

# jquery - 查找祖先元素和子元素之间的距离

> ID：11386757
> 
> 赞同：0
> 
> 时间：2012-07-08T21:14:18.733
> 
> 标签：jquery

我对祖先父元素和子元素都有 jQuery 对象。

```
$ancestor = ...;
$child = ...; 
```

我如何获得两者之间的距离？即这个祖先链中有多少元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T21:19:28.147

要获取其他两个元素之间的元素，包括这些元素：

```
var $els = $child.parentsUntil($ancestor).andSelf() 
```

或者只是获取它们之间有多少元素：

```
var elsInBetween = $child.parentsUntil($ancestor).length - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:17:19.900

也许这会有所帮助-

```
var counter = 0;
var target = '';
while($child.parent().length){
  target = $child.parent();
  counter++;
}
console.log(target); 
```

我只是在`parent()`每次循环中迭代对象，每次都用它的父对象替换。你会在这里找到所有的祖先......我的意思是**所有**的祖先。

# xcode - 核心数据：在 XCode 中如何将我的属性设置为唯一的？

> ID：11386759
> 
> 赞同：3
> 
> 时间：2012-07-08T21:15:05.840
> 
> 标签：xcode, core-data, attributes, unique

我正在为核心数据设置我的数据模型，并试图找出如何将属性设置为唯一。我想要它，以便如果另一个对象是关于被保存的，那么如果这个属性与另一个对象的值相同，它就不会允许它。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:24:30.423

正如[CoreData 指南的验证部分所指定的，您可以使用](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdValidation.html#//apple_ref/doc/uid/TP40004807-SW5)[KVC 指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Validation.html#//apple_ref/doc/uid/20002173-CJBDBHCB)中描述的键值编码验证模式。具体来说，在[自动验证部分](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Validation.html#//apple_ref/doc/uid/20002173-SW1)，它提到 CoreData 在尝试保存时将使用 KVC 验证模式。所以在你的模型类别上，你最终会得到这样的结果：

```
-(BOOL) validateCourseName:(NSString **) courseName error:(NSError **) error {
  // lookup existing course names, return NO if one exists, YES if none.
  // note that courseName is a **, which means you can modify it if that makes sense.
  *courseName = @"new name which will validate";
  // but be sure to read the parts of the linked docs about memory if you do this.
  return YES
} 
```

# java - Java 通用异常

> ID：11386760
> 
> 赞同：1
> 
> 时间：2012-07-08T21:15:19.370
> 
> 标签：java, generics, exception

我正在处理 JaudioTagger API 来操作 MP3 文件，我必须一遍又一遍地重复以下异常...也许可以通过不同的开关盒来处理它？是否可以 ？如果有人可以提供方法签名或调用它的方式，我将不胜感激

```
} catch (CannotReadException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            } catch (ReadOnlyFileException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InvalidAudioFrameException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TagException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:23:42.150

在 JDK 7 之前，您所能做的就是编写一个实用函数并从每个 catch 块中调用它：

```
private void handle(Exception ex) {
    Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
}

private void someOtherMethod() {
    try {
        // something that might throw
    } catch (CannotReadException ex) {
        handle(ex);
    } catch (ReadOnlyFileException ex) {
        handle(ex);
    } catch (IOException ex) {
        handle(ex);
    } catch (InvalidAudioFrameException ex) {
        handle(ex);
    } catch (TagException ex) {
        handle(ex);
    }
} 
```

从 JDK 7 开始，您可以使用 multi-catch：

```
private void someOtherMethod() {
    try {
        // something that might throw
    } catch (CannotReadException | ReadOnlyFileException | IOException
             | InvalidAudioFrameException | TagException ex) {
        Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

请参阅“[捕获多个异常](http://docs.oracle.com/javase/7/docs/webnotes/adoptionGuide/index.html)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:48:20.037

> **这个答案从 Java 7 开始就已经过时了。像 John Watts 在他的答案中展示的那样使用 multi-catch。**

我建议使用

```
try {
    /* ... your code here ... */
} catch (Exception ex) {
    handle(ex);
} 
```

并以这种方式处理它：（您必须替换您不处理的 OtherException 或删除`throws`）

```
private static void handle(Exception ex) throws SomeOtherException {
    if (ex instanceof CannotReadException || ex instanceof ReadOnlyFileException) {
        Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
    } else if (ex instanceof SomeOtherException) {
        throw (SomeOtherException) ex;
    } else if (ex instanceof RuntimeException) {
        throw (RuntimeException) ex;
    } else {
        throw new RuntimeException(ex);
    }
} 
```

# android - 如何制作一个自动完成地址搜索文本框来检索与 Android 地图相同的结果？

> ID：11386762
> 
> 赞同：0
> 
> 时间：2012-07-08T21:15:48.737
> 
> 标签：android, map, autocomplete, textbox

我创建了一个自动完成地址搜索文本框。我的问题是我无法让它正常工作：

1.  无论我做什么，地址通常都超出了边界框 -[这没有帮助](https://stackoverflow.com/questions/6488890/android-getfromlocationname-return-results-outside-the-bounding-box)。
2.  查找不包含键入文本的地址。
3.  找到的地址比 max 少，但它不包含好的结果。
4.  结果列表有时完全无关紧要。
5.  我需要输入几乎整个地址才能得到正确的结果。

资源：

```
 Geocoder geocoder = new Geocoder(this, Locale.getDefault());
       List<Address> addresses = null;
          try {
             if (Geocoder.isPresent()) {
                // Bounding box: Hungary
                addresses = geocoder.getFromLocationName(text, 5, 46.13, 21.96, 48.89, 16.69);
             }
          } catch (IOException e) {
             Log.v(tag, "Geocoding error: " + e.getMessage());
             e.printStackTrace();
          } 
```

我的目标是制作一个地址搜索文本框，该文本框的结果与 Android Maps 搜索文本框中的结果相同 - 除了之前输入/最喜欢的地址等，这是另一回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:25:36.763

[Google Places Autocomplete API](https://developers.google.com/places/documentation/autocomplete)可能会有所帮助。据我所知，您必须获得许可才能在商业应用程序中使用它。如果您的应用程序是免费的，那么您应该没问题。

**编辑**关于不准确的地理编码器结果：

我还没有玩过 Geocoder。但到目前为止我可以告诉你的是：

您需要考虑到，在某些设备上，所有方法都返回 null（请检查 Geocoder.isPresent() 确定），因为 Geocoder 依赖于某些设备上可能缺少的一些底层实现。

这些结果也有可能来自 Google Places 以外的其他 Geocoder 引擎/服务。

最重要的是，查询结果永远不会完美。您很少获得当前位置的确切地址，因为该位置已关闭，或者因为地理编码器数据不够准确（或只是过时）。

如果你真的需要一个准确的地址，你应该给用户一个最佳候选选项列表和一些手动编辑地址的方法。

如果您需要基于位置名称的更准确的结果，您可以查看可用的在线服务，这些服务可以更好地满足您的需求。一个例子是 geonames.org。如果他们的数据库对您来说足够好，那么您需要获取或实现一些 Java API 来连接您选择的服务，并使用它来代替 Geocoder。

# php - 如何避免mysql数据库中的负值

> ID：11386764
> 
> 赞同：0
> 
> 时间：2012-07-08T21:15:59.980
> 
> 标签：php, mysql

> **可能重复：**
> [防止值在 mysql 中变为负数的最佳方法](https://stackoverflow.com/questions/488761/best-way-to-prevent-a-value-from-going-negative-in-mysql)

伙计们，我是这里的新手，也是编程的新手。我正在研究库存控制系统。我将用一个例子来解释我的问题。认为我目前的库存是 500 销售应该从库存减少。当我输入销售额时，如果我输入 1000，则值为 -500。我怎样才能避免这种情况？目前我正在这样做

--php伪代码---

```
if(stock > sales)
 { stock - sales}

else
 {error} 
```

我的数据类型是浮点数（10,2）。

我可以通过其他方式避免这个问题吗？我不知道我的问题是否清楚。（对不起我语言不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:19:00.273

您的方法看起来不错，但您应该注意，如果多个线程可以同时对数据进行操作，您可能会遇到竞争条件。您可以使用隔离级别设置为可序列化的事务，以确保两个线程不会同时减小值。

您还可以设置列类型`unsigned int`以确保它永远不会包含负值，但您仍应明确处理此条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:19:10.307

Mysql 允许数字列类型为 UNSIGNED，这基本上意味着它不能为负数。我找不到关于它的参考，所以尝试通过[这个](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:23:37.073

您可以创建一个设置为 0 的临时变量，并在它实际为正时填充它，例如：

```
$res=0;
if($stock > $sales)
 $res=$stock-$sales 
```

或者简单地说：

```
$res = $stock > $sales ? $stock - $sales: 0 
```

这样 $res 永远不会低于 0

# xna - Is XNA still used for Windows game development?

> ID：11386768
> 
> 赞同：1
> 
> 时间：2012-07-08T21:16:13.117
> 
> 标签：xna

Last time I looked at XNA it was at version 4 and you could use it to develop C# games that ran on Windows, or Windows Phone, or Xbox 360.

Just been poking around again and I can't get any sense out of what the current state of play is.

The emphasis is very very much on Windows phone 7.5, then to a lesser extent 360, and for Windows you just get pointed at the DirectX SDK.

Has it been re-envisioned again? At some point I remember the C# version disappeared and you only had the C++ version, I sort of lost interest then.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:31:23.373

It is still used for windows 7 development. And runs fine. I use it all the time.

The future of it for windows 8 is unclear. All the topic on different sites are just ideas, and nobody "really" seems to know. Its just rumors really. So we will just have to see.

Apparently Windows 8 can run it in desktop mode, But not metro. As it seems Microsoft just loves HTML 5 and JS now.

I wouldnt say its focused on XBOX and Wp7 completely, alot of those games dont seem to be very good, and it dosent seem to have attracted big AAA titles to those platforms, But I have seen many nice games with XNA for windows (Terraria, Magicka)

# html - 为什么我在 Rails 中的注册表单在添加了这段代码后不再起作用？

> ID：11386771
> 
> 赞同：0
> 
> 时间：2012-07-08T21:16:17.810
> 
> 标签：html, ruby-on-rails

最初，对于我网站上的注册表单，我在表单的开头使用了以下代码：

```
<%= form_for(@user)  do |f| %> 
```

当我在表单开头的以下代码中添加此 html id 时：

```
<%= form_for(@user, :html => { :id => 'payment-form' })  do |f| %> 
```

表格不再起作用。

有没有办法将我上面指定的 html id 添加到我的表单中，同时允许我的表单工作？我该怎么做呢？为什么在添加 html id 后点击“提交”时表单实际上没有处理。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:54:08.447

尝试`<%= form_for(@user, :id => 'payment-form' ) do |f| %>`

# c# - 自定义类型数组的数组

> ID：11386774
> 
> 赞同：3
> 
> 时间：2012-07-08T21:16:44.567
> 
> 标签：c#, .net, arrays

我已经定义了一个新的类类型，叫做`Hotspot`. 我需要 2 个动态热点数组（我使用了列表）和第三个允许我在它们之间“切换”的数组。这是我的代码：

```
List<Hotspot> items = new List<Hotspot>();
List<Hotspot> locations = new List<Hotspot>();

Hotspot[][] arrays = new Hotspot[][]{items, locations}; 
```

但`arrays`不起作用。我只需要它，这样我就可以轻松访问`items/locations`数组。

在 F# 中，我是这样做的：

```
let mutable items = new ResizeArray<Hotspot>()
let mutable locations = new ResizeArray<Hotspot>()

let arrays = [|items; locations|] 
```

但我不能在 C# 中做同样的事情。一些帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T21:21:01.647

```
List<Hotspot>[] arrays = new List<Hotspot>[]{items, locations}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T21:22:00.930

`items`并被`locations`声明（和实例化）为列表。列表不是数组，您试图将它们分配为数组。将它们转换为数组或根本不使用数组而是使用列表。

```
Hotspot[][] arrays = new Hotspot[][]{ items.ToArray(), locations.ToArray() };
//or
List<Hotspot>[] lists = new[] { items, locations }; 
```

ps，F#`ResizeArray<T>`本质上是 .NET 的别名`List<T>`。因此，实际上，`arrays`您的 F# 示例中的变量等同于`lists`在我上面的示例中，您创建了一个列表数组。

# asp.net - .NET 函数范围阴影

> ID：11386775
> 
> 赞同：1
> 
> 时间：2012-07-08T21:16:47.950
> 
> 标签：asp.net, .net, vb.net

我见过一些这样的代码（不是在连续的行上，而是在同一个函数范围内）：

```
Dim con1 As SqlConnection
con1 = New SqlConnection
'More code here
con1 = New SqlConnection
con1 = Nothing 
```

我相信这只是一个错误，但我想检查这里是否存在我不知道的阴影形式。第一个`con1`变量会发生什么？我认为它是不可访问的，因为没有对该对象的引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:23:51.703

**这里发生了什么事**

`con1`在该函数的生命周期内指向两个不同的对象。

第一个对象，由第一个创建

```
con1 = New SqlConnection 
```

在第二个之后不再引用

```
con1 = New SqlConnection 
```

被执行。

**这是内存泄漏吗？**

不会。不再引用的对象最终会被处理掉，然后 GC 决定这样做。但是，这*是*资源泄漏。每次您无法关闭 SQL 连接（假设它已打开而不是刚刚分配），您就会使资源无法重用。*GC 会在内存*不足时触发，因此最迟在系统内存不足时，您肯定会重新获得未引用对象的*内存*（此时您还将重新获得 DB 连接）。*但是*，低*资源*不会触发 GC。在 GC 决定启动并释放 SqlConnection 对象（包括他们囤积的数据库连接）之前，您可能会完全用完数据库连接。

 ***修复代码**

由于必须关闭 SqlConnection 才能释放连接，所以第一个对象将一直徘徊，直到 GC 决定处置它。 *这是一件坏事*，因为 SQL 连接是一种资源，只应在必要时保留。

在分配新的 SqlConnection 对象之前调用第一个连接的 Close() 会改善这种情况（另外，在离开变量范围之前在第二个实例上调用 Close()）。

但是，如果您在代码中的某处遇到异常，而没有适当的异常处理，则在 GC 启动之前，您仍然会留下未处理的对象。始终，始终将异常处理放在管理诸如此类的资源的任何事物周围。

针对这种情况进行异常处理的最佳方法是[使用 Using](http://msdn.microsoft.com/en-us/library/htd05whh%28v=vs.80%29.aspx)关键字。到目前为止，我从未写过一行 VB.Net，但这是我对您代码的正确版本的尝试：

```
Dim con1 As SqlConnection

Using con1
    con1 = New SqlConnection
End Using

'More code here

Using con1
    con1 = New SqlConnection
End Using

' NOTE: I believe the following is unnecessary, but was necessary in VB6 and prior
' con1 = Nothing 
```*

# javascript - 是否有任何 jquery 来检测 html 标签是否未关闭？或者页面没有完全加载？

> ID：11386777
> 
> 赞同：1
> 
> 时间：2012-07-08T21:17:10.057
> 
> 标签：javascript, jquery, load, onload

我遇到了一个问题（我仍然需要解决）我的整个页面无法加载。它在元素的中间被切断。

有没有办法使用 jquery 或 javscript 来做类似的事情：

如果（某些元素尚未加载）{刷新页面}

我正在考虑将`<div id="end_of_page"></div>`其放在页面底部，并检查是否已呈现，如果没有，我会知道出现问题并可以重新加载以重试。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:18:17.577

您可以使用

```
$(document).ready(function(){
    // code here
}); 
```

该代码只会在页面加载后运行。一个方便的简写是：

```
$(function(){
   // code here
}); 
```

假设您的 jQuery 对象是`$`. 为了完成您的要求，您可以在加载函数中设置一个变量，然后使用在页面开头设置的计时器来检查它。如果不存在，请重新加载。

就个人而言，我认为您应该花一些时间来弄清楚*为什么*您的页面只能中途（Firebug 或 Chrome Inspector 可能会帮助您做到这一点，它可能是您页面中的资源导致它挂起，并且由于大多数 HTTP每个主机名一次只发出 2 个请求，它可能会在获取其余请求之前等待它返回）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:23:40.820

可能是服务器端问题**或**某些脚本或库正在窃取您的**鱼** `$`（又名：“美元”）。

我宁愿建议您调试代码，而不是刷新试图解决问题的页面。

确保您的脚本在`head`您的文档中，
并且**jQuery** + 您的**jQ 函数**在结束`</body>`标记之前包含在：

```
(function($){ /*your functions*/ })(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:26:10.757

> 有没有办法使用 jquery 或 javscript 来做类似的事情：
> 
> 如果（某些元素尚未加载）{刷新页面}

你**可以**这样做，是的。在包含 jQuery 之后把它放在头上：

```
<script>
jQuery(function($) {
    if (!$("#end_of_page")[0]) {
        // Something went wrong, load again
        location.reload();
    }
});
</script> 
```

`end_of_page`如果在 jQuery 事件触发时元素不存在`ready`（这意味着在页面完成加载时），您将进入循环的主体（因此，强制重新加载）。

**但是：**最好弄清楚为什么你*的*页面在中途被切断并解决这个问题。这种解决方法不是解决方案。

# git - 在 cron 作业中从 gitolite 中拉取

> ID：11386778
> 
> 赞同：2
> 
> 时间：2012-07-08T21:17:19.217
> 
> 标签：git, ssh, cron, gitolite

我想设置一个 cron 作业，使生产站点从 gitolite 存储库中提取。

以下命令在非 cron 上下文中工作：

```
# m     h       dom     mon     dow     command
*       *       *       *       *       cd /home/www/test/autopulling-site/ && /usr/bin/git fetch && /usr/bin/git pull 
```

我怀疑由于 SSH 密钥未在 cron 上下文中正确发送，git 操作不起作用。日志什么也没显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:35:23.120

您需要确保用户实际执行`cron`.
在这种情况下，它很可能是 root，这意味着您需要确保`$HOME`（从 运行时`cron`）确实包含您的`.ssh/id_rsa(.pub)`文件。

但是，如果您的私钥受密码保护，请不要忘记 cron 会话不会知道您的 ssh-agent：具体示例请参见“[通过 crontab 使用 ssh 代理在 ssh 上执行 rsync 命令”。](https://serverfault.com/questions/92683/execute-rsync-command-over-ssh-with-an-ssh-agent-via-crontab)
正如[OP Harold Smith](https://stackoverflow.com/users/496999/harold-smith)所指出的，这[**`keychain`**](https://serverfault.com/a/236437/783)是这里缺少的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:21:06.967

我不知道有什么问题

但是，您可以将命令的输出重定向到文件（例如`(cd && git pull && ...) &> path/to/file`）以查看它正在打印的内容。

# javascript - 在级联 MVC 3 中禁用 DropDownList

> ID：11386793
> 
> 赞同：0
> 
> 时间：2012-07-08T21:19:50.790
> 
> 标签：javascript, asp.net-mvc-3

我在级联中有两个 DropDownList

DD2 依赖于 DD1。

如果 D1 不包含所选项目的数据，如何禁用 DD2？

```
 $(function () {
         $('#DD1').change(function () {
             var selected1 = $(this).val();
             $.getJSON('@Url.Action("GetCiudadList", "ConsultorioSuper", new { Area = "Superusuario", controller = "Consultorio" })', { IdDD: selected }, function (myData) {
                 var Select2 = $('#DD2');
                 Select2.empty();
                 $.each(myData, function (index, itemData) {
                     citiesSelect.append($('<option/>', {
                         value: itemData.Value,
                         text: itemData.Text
                     }));
                 });
             });
         });

     })

 @Html.DropDownListFor(x => x.SelectedId1, new SelectList(ViewBag.IdUniversidad, "Id1", "Name"), "-- Select --", new { id = "DD1" })
 @Html.DropDownListFor(x => x.SelectedId2, new SelectList(Enumerable.Empty<SelectListItem>(), "Id2", "Name"), "-- Select --", new { id = "DD2" }) 
```

祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:23:26.170

> 如果 D1 不包含所选项目的数据，如何禁用 DD2？

你怎么知道 D1 不包含所选项目的数据？在这种情况下，您的控制器操作会返回什么？我猜是一个空数组。如果是这种情况，一个简单的`if`条件就可以完成这项工作：

```
$.getJSON('@Url.Action("GetCiudadList", "ConsultorioSuper", new { Area = "Superusuario", controller = "Consultorio" })', { IdDD: selected }, function (myData) {
    var Select2 = $('#DD2');
    if (myData.length == null || myData.length == 0) {
        // null or empty data => disable the second ddl and stop executing
        // this function
        Select2.attr('disabled', 'disabled');
        return;
    }

    // at this stage we know that the myData array contains element =>
    // rebind the second dropdown list with those elements
    Select2.empty();
    $.each(myData, function (index, itemData) {
        citiesSelect.append($('<option/>', {
            value: itemData.Value,
            text: itemData.Text
        }));
    });
}); 
```

# javascript - 使用 Javascript 拖放交叉淡入淡出

> ID：11386795
> 
> 赞同：0
> 
> 时间：2012-07-08T21:20:02.817
> 
> 标签：javascript, drag-and-drop, fading

我正在寻找使用 Javascript 以交叉淡入淡出的方式将 png 图像拖放到另一个 png 图像上。我进行了一些研究，只能遇到类似的情况，但我发现的情况大多是自动的（无法进行手动拖放）并且它们正在褪色，而不是交叉褪色。我只是想知道，是否有人对解决这种情况并尝试开发此功能的最佳方法有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:36:46.880

关于交叉淡入淡出，我通过两个绝对定位的 div 元素（`position:absolute;`）占据相同的区域来实现这一点。一个有`opacity:0;`，另一个有`opacity:1;`。然后，您需要做的就是拥有一个切换功能，该功能使一个淡出而另一个淡入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:39:46.893

您可以使用[可拖动的 Jqueryui](http://jqueryui.com/demos/draggable/)

为了那个原因。

你也 可以使用 [jquery 效果](http://jqueryui.com/docs/show/)

或者对于效果这个插件可能会帮助你[Jquery 循环](http://malsup.com/jquery/cycle/)

或检查此[淡入淡出图像](http://jqueryfordesigners.com/image-cross-fade-transition/)

# objective-c - 即时绑定方法

> ID：11386797
> 
> 赞同：1
> 
> 时间：2012-07-08T21:20:34.437
> 
> 标签：objective-c, cocoa, nstableview, cocoa-bindings

我有这个简单的钢筋选择应用程序。我使用绑定来设置连接，并且在开始时从数组控制器调用了一些数据。我在按下按钮计算后运行此方法，该方法从 NSForm 单元格获取值并将其用于进一步计算：

```
-(IBAction)calculate:(id)sender{
NSArray *editFields = [formular cells];
int vArea;
vArea = [[editFields objectAtIndex:1] intValue];
NSMutableString *select = [NSMutableString stringWithFormat:@"You selected %d + 25 = %d",vArea,vArea+25];
[selected setStringValue:select];

} 
```

它运行正常，但是我想在选择表中的行后立即运行此代码，因此我不需要该按钮，但我不知道要使用哪种方法，因为我仍在学习。

![截图](../Images/8a5355c93c2d39c4098b84e595e3b486.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:15:11.313

解决方案非常简单。我只是将 IBAction 分配给我的 tableView 对象，它现在可以立即工作。很抱歉这篇文章我会在这里发布任何内容之前进行更彻底的思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:30:29.440

我也只是在学习，所以这可能不是最好的方法。如果您的类设置为 NSTableView 的委托，您可以实现以下方法。

表格视图将通知委托人（您的班级）其选择已更改，此时您可以进行计算。

```
 - (void)tableViewSelectionDidChange:(NSNotification *)aNotification
    {
        int row;
        row = [myTable selectedRow];

        if (row == -1) 
        {
            NSLog(@"No Row selected");
        } 
        else 
        {
            NSLog(@"Selected Row = %d", row);
        }
    } 
```

# php - PHP 是否为每个扩展同一个父类的新类分配内存？

> ID：11386799
> 
> 赞同：0
> 
> 时间：2012-07-08T21:21:06.073
> 
> 标签：php

我想知道 PHP 是否会重用 Parent 类。使用以下代码：

```
// File parent.php
class Parent {
  $public foo = '';

  public function __construct($args) {
    // ..
  }

  // .. some functions
}

// File child1.php
class Child1 extends Parent {
  public function __construct() {

  }

  // .. Some overridden function
  // .. some extra functions
}

// File child2.php
class Child2 extends Parent {
  public function __construct() {

  }

  // .. some extra functions
} 
```

现在要使用 Child1 或 Child2，您需要包含 parent.php 和 childN.php。如果我只使用 Child1，我可以想象它们以某种方式连接成一个存在。但是，如果我在同一页面上使用 Child2 .. 我会得到 2 个“连接”的存在，它们会占用内存还是 PHP 超级聪明并且能够看到这一点并且只使用/加载/无论父级一次。

这个例子非常简单，但是 Parent 很大而且有很多孩子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:27:19.803

简短的回答是“PHP 超级智能”，内存仅用于存储类实例，用于存储类定义的内存部分可以忽略不计。您也可以担心包含的数量，但在这种特殊情况下，一切都远非缓慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:35:52.297

`Parent`只加载一次。事实上，如果你尝试加载它两次，PHP 会抛出一个错误。

# javascript - 为所有哈希链接/调用添加自动偏移到滚动位置

> ID：11386807
> 
> 赞同：18
> 
> 时间：2012-07-08T21:21:42.663
> 
> 标签：javascript, jquery, hash, scroll, position

我有以下问题：

就像在 Facebook 上一样，我在页面顶部有一个始终可见的菜单栏 ( `position: fixed;`)。当我现在单击页面上的哈希链接（或在 url 中加载带有哈希的新页面）以跳转到页面上的某个元素时，浏览器总是将此元素滚动到页面的最顶部，这意味着之后，元素位于顶部菜单栏的后面。

我想添加一些 Javascript（jQuery 或普通 Javascript），它会自动向此滚动位置添加（负）偏移量，以便在单击链接或加载页面时链接元素位于顶部菜单栏的正*下方*. 但我不只是想将事件侦听器添加到处理此问题的所有链接。我还想要一个可行的解决方案，如果页面使用浏览器的地址栏在 url 中加载了一个哈希部分（或者当链接到在 url 末尾带有哈希的不同页面时）。

你能帮我解决这个问题吗？提前致谢！:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T21:11:29.857

实际上，我自己找到了一个对我有用的解决方案，只使用 css：

我在跳转链接指向的元素中添加了一个`margin-top: -40px;`and 。`padding-top: 40px;`这适用于所有主流浏览器：IE (7-9)、Firefox、Opera、Chrome 和 Safari。

唯一的问题：如果这个元素在浮动元素之后，负边距不起作用（意味着正填充变得可见）。如果有人知道解决方案/解决方法，请发表评论。到时我会更新我的帖子。谢谢！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-14T00:19:04.873

我发现这种`:before`在 css 中添加 a 的方式似乎效果很好。

```
h2:before { 
  display: block; 
  content: " "; 
  margin-top: -285px; 
  height: 285px; 
  visibility: hidden; 
} 
```

更多内容请访问[CSS Tricks 网站](https://css-tricks.com/hash-tag-links-padding/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T08:27:45.640

例如，考虑适用于所有主要浏览器的[D](http://dlang.org/)的[bootDoc解决方案：](https://github.com/JakobOvrum/bootDoc/)

CSS（插入标题栏高度而不是`40px`）：

```
.symbol-target {
    padding-top: 40px;
    margin-top: -40px;
    width: 1px; /* '0' will not work for Opera */
    display: inline-block;
} 
```

HTML：

```
<h3>
    <span class="symbol-target" id="myTarget">&nbsp;</span>
    <a href="#myTarget">My text</a>
</h3> 
```

真实页面示例：

[`std.array.uninitializedArray`文档使用`bootDoc`](http://jakobovrum.github.com/bootdoc-phobos/std.array.html#uninitializedArray)

## 笔记：

它不适用于 IE 6。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-20T16:46:15.790

为了增加解决方案，我发现将显示设置为无解决了在浮动元素中使用时填充可见的问题。

所以：

```
.symbol-target {
    padding-top: 40px;
    margin-top: -40px;
    width: 1px; /* '0' will not work for Opera */
    display: hidden;
} 
```

我还将这种样式作为一个空 div 包含在目标内容的正上方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-14T17:15:22.057

最适合我的事情是这样做：

1.  将指定的 ID（您想要的 URL 中的内容）提供给所需元素中的不同元素。
2.  使新元素成为绝对元素并将其移动到所需元素上方 X 像素，其中 X 是固定标题的高度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-12T05:54:38.677

如今在 2021 年，有一个**很好的简单的 only-css 解决方案**，其中包含`:target`和`scroll-margin-top`

```
:target {
    scroll-margin-top: 100px;
} 
```

它适用[于所有主要浏览器](https://caniuse.com/?search=scroll-margin-top)

参考：

*   [https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin-top](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin-top)
*   [https://developer.mozilla.org/en-US/docs/Web/CSS/%3Atarget](https://developer.mozilla.org/en-US/docs/Web/CSS/%3Atarget)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-13T22:01:27.637

其他人都给出了 CSS 答案，但问题要求 JS

@assmmahmud 的答案只需稍加调整即可：gotoSpecificPosition 需要在第一条语句中更改为 offsetAnchor。

这对于为粘性标题调整所有 id 链接非常有帮助。

```
/* go to specific position if you load the page directly from address bar */
var navbarHeight = document.getElementById('mynavbar').clientHeight;
function offsetAnchor() {
  if (window.location.hash.length !== 0) {
    window.scrollTo(window.scrollX, window.scrollY - navbarHeight );
  }
}

/* Captures click events on all anchor tag with a hash tag */
$(document).on('click', 'a[href^="#"]', function(event) {
  // Click events are captured before hashchanges. Timeout
  // causes offsetAnchor to be called after the page jump.
  window.setTimeout(function() {
    offsetAnchor();
  }, 0);
});

window.setTimeout(offsetAnchor, 0); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-09T03:40:02.797

不幸的是（至少使用 Firefox）填充和边距在这里都没有帮助（将它们放在包含除菜单栏之外的所有内容的“主”div 上）；滚动到一个锚点总是把它放在页面的最顶部，固定元素是该死的。

我认为您将不得不遵循您最初的想法，但请记住，通过使用委托，您只能设置一个处理程序来处理菜单栏中的所有链接，包括动态添加的链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-09T11:07:00.330

使用纯 javascript，您可以执行以下操作。它将侦听所有锚标记的单击事件并滚动到页面中您想要的位置（它使用 jquery）：

```
/* go to specific position if you load the page directly from address bar */
var navbarHeight = document.getElementById('mynavbar').clientHeight;
function gotoSpecificPosition() {
  if (window.location.hash.length !== 0) {
    window.scrollTo(window.scrollX, window.scrollY - navbarHeight );
  }
}

/* Captures click events on all anchor tag with a hash tag */
$(document).on('click', 'a[href^="#"]', function(event) {
  // Click events are captured before hashchanges. Timeout
  // causes offsetAnchor to be called after the page jump.
  window.setTimeout(function() {
    offsetAnchor();
  }, 0);
});

window.setTimeout(offsetAnchor, 0); 
```

上面的代码将处理所有的技巧。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-09T11:24:01.170

```
 h1, h2, h3, h4, h5, h6 {
   scroll-margin-top: 80px;
 } 
```

从 React 文档中得到这个想法。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-07-08T21:28:08.163

尝试在页面顶部放置一个填充以占据菜单栏后面的区域。像：（`padding-top:80px;`而不是 80px 你应该把你的菜单栏的高度）。

# php - 匹配除了之前和之后预先确定的所有内容

> ID：11386817
> 
> 赞同：-1
> 
> 时间：2012-07-08T21:22:52.817
> 
> 标签：php, regex, rss

例子。

*   URL 展示 MATH HOFFA VS T-REX 第 1 轮
*   URL 展示 MATH HOFFA VS T-REX 第 2 轮
*   URL 展示 Young Miles 与 Rich Dolarz 第 2 轮
*   SMACK/ URL 表示 AYE 动词 vs O-RED
*   SMACK/ URL 呈现 ARSONAL VS CALICOE（全面战斗））
*   SMACK/ URL PRESENTS Rich Dolarz VS X-Factor (FULL BATTLE))
*   GrindTimeNow.NET：不锈钢与 3pfd
*   GrindTimeNow.NET：5vs5 联赛公告！+ 40 城市选拔之旅！
*   www.GrindTimeNow.NET：Magz vs K-mo（选拔赛）
*   GrindTimeNow.Net：由 Murs、Madd Illz 和 Wordsworth 主持的 Scotty P vs Farnum
*   GrindTimeNow.Net：Kaveman Brown 与 Real Talk
*   GrindTimeNow.Net:DIRT VS Richard CRANIUM
*   GrindTimeNow.Net：Jonny Storm 与 Real Talk（2012 年付费会费）

我想匹配名称与名称 - 字符串并不总是一致的，例如 Grindtimwnow.net、URL PRESENTS 和 SMACK/URL PRESENTS - 我知道我可能需要使用最多三个不同的正则表达式，我可以使用它们。

我遇到的问题，尝试了以下

```
$ourRegex =  "/(\b\w+\W+){0,3}vs(\W+\w+){0,3}/";
$ourRegex =  "/:\s+(.+?)\s+Vs\s+(.+)$/";
$ourRegex = '/\s+(.+?)\s+Vs\s+(.+)$/'; 
```

不匹配所有竞争者的名字，我得到像 Jonny vs Talk 这样的东西 - 名字中最多可以有三个/四个单词，有没有简单的解决方案，或者我需要运行几个不同的正则表达式并首先构建一个函数清理搅拌然后正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:56:40.833

我认为您使用的任何正则表达式都会有问题，因为它看起来像“vs”部分之前和之后不一定是空格（在“GrindTimeNow.NET：5vs5 League Announcement！+ 40 city tryout tour！”示例中）

我看到的问题是 NAME 组件可能包含字符“vs”，这会混淆正则表达式。

如果在“vs”前后使用空格，那么这个正则表达式应该可以工作

```
$ourRegex =  "/(.*) [v|V][S|s] (.*)/"; 
```

# windows-phone-7 - 带 WP7 的钛合金 ACS

> ID：11386818
> 
> 赞同：1
> 
> 时间：2012-07-08T21:23:00.150
> 
> 标签：windows-phone-7, titanium

有谁知道 ACS（Titanium 的云存储服务）是否与 Windows Phone 7 兼容？我一直在尝试在网上查看详细信息，但没有发现任何有用的信息。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:36:17.610

看来他们有一个[REST API](http://cloud.appcelerator.com/docs/rest)并使用[OAuth](http://cloud.appcelerator.com/docs/authentication)进行身份验证。从 WP7 访问这个 API 应该没有问题。这是[从 WP7 调用 REST API](http://create.msdn.com/en-US/education/quickstarts/Accessing_a_REST_Web_Service)的快速入门。这是一个使用 WP7 中的 OAuth[的示例。](http://msdn.microsoft.com/en-us/identitytrainingcourse_acsandwindowsphone7_topic2.aspx)

# ruby-on-rails - 有没有办法减慢开发中资产的加载速度？

> ID：11386832
> 
> 赞同：4
> 
> 时间：2012-07-08T21:24:03.940
> 
> 标签：ruby-on-rails, browser

现在有没有人可以人为地减慢资产（图像、js 等）的速度，就好像我的本地网站正在通过 Internet 加载一样？以某种方式说“加载网站，就好像它正在加载超过 756kbps”或类似的东西。这也可能是一个浏览器插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:27:43.697

我最终使用了“speedlimit”：[http](http://mschrag.github.com/) : //mschrag.github.com/ 来自 reuben 发布的链接。

# zend-framework - 在zend路由中使用减号

> ID：11386838
> 
> 赞同：1
> 
> 时间：2012-07-08T21:25:22.317
> 
> 标签：zend-framework, routes

是否可以在 url 中使用减号以便 zend 路由可以处理它？

目前，我的应用程序配置中有：

```
resources.router.routes.post.route = "1-:id-:title"
resources.router.routes.post.defaults.controller = category
resources.router.routes.post.defaults.action = index 
```

但 zend 路线无法解决 request_uri ：**/1-1-T_Shirt__Chemise**

但是，如果我把

```
resources.router.routes.post.route = "1/:id/:title" 
```

zend 路线很好地解决了 request_uri ：**/1/1/T_Shirt__Chemise**

有任何想法吗 ？

# android - 更改通知图标

> ID：11386841
> 
> 赞同：0
> 
> 时间：2012-07-08T21:25:36.690
> 
> 标签：android, parse-platform, android-notifications

我想为我的通知设置另一个默认图标。我使用[parse.com](http://www.parse.com)的通知服务，想更改通知栏中的图标。

在不更改标题和文本的情况下是否可能`Notification.Builder`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:38:12.410

发布有关如何创建通知的源代码。

但一般来说，要更改通知图标，只需调用 setSmallIcon 或 setLargeIcon 方法即可。这是一个例子：

```
 Notification notif = new Notification.Builder()
     .setContentTitle("New mail from " + sender.toString())
     .setContentText(subject)
     .setSmallIcon(R.drawable.new_mail)
     .setLargeIcon(aBitmap)
     .build(); 
```

在您的情况下，只需为 setSmallIcon 方法提供一个不同的可绘制图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:50:09.590

在低于ICS的android中

```
Notification notification = new Notification(R.drawable.logo, "", System.currentTimeMillis());
notification.largeIcon = your bitmap
notification.icon = your drawable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:55:39.023

[您必须按照 Parse 的文档](https://www.parse.com/docs/android_guide#push-receiving)中所述为 Parse 推送通知实现自定义接收器。

通过这样做，Parse 不会在 Android 中自动生成用户通知，然后您可以`Notification.Builder`在较新的 Android 版本和`Notification()`较旧的 Android 版本中自己执行此操作，如其他答案中所述，并提供您的自定义图标。

# php - PHP：header() 函数未重定向。使用 HTML 或 JavaScript 重定向时，会话信息丢失

> ID：11386843
> 
> 赞同：0
> 
> 时间：2012-07-08T21:25:37.203
> 
> 标签：php, javascript, apache, redirect, http-redirect

这是一个 PHP/Apache 问题...

1.  我有以下代码。我特别想强调以下几点：

    ```
     // store email in session variable

          $_SESSION["jobseeker_email"] = $_POST["jobseeker_email"];

          // perform redirect

          $target = util_siblingurl("jobseekermain.php", true);

          header("Location: " . $target);

          exit; /* ensure code below does not executed when we redirect */ 
    ```

这就是问题所在。当我在 localhost 上执行此代码时，它工作正常，但是当我在远程服务器（这是一个 ipage.com 托管站点）上执行它时，我没有得到想要的结果。事实上，当 header("Location: $target); 部分运行时，我看到一个空白页（并且没有重定向）。就好像在调用 header() 之前输出了一些东西，但事实并非如此，因为我已经检查过了，为什么它不起作用？

1.  如果我注释掉调用 header() 的部分然后退出，我可以执行 html 重定向或 javascript 重定向。但是，当我这样做时，我会丢失会话变量 $_SESSION["jobseeker_email"]。我无法理解为什么会发生这种情况。

对于这些问题的任何帮助将不胜感激，因为我需要执行重定向并仍然保留前一页的会话状态，并且所有这些都在服务器上（不仅仅是在本地主机上）。

```
 <?php

      session_start();

      require_once('include/connect.php');
      require_once('include/util.php');

      util_ensure_secure();

      if (isset($_GET['logout'])) {

        session_destroy();

        // restart session

        header("Location: " . util_selfurl(true));

      }

      function do_match_passwords($password1, $password2) {

        return strcmp($password1, $password2) == 0;

      }

      function valid_employer_login($email, $password) {

        global $mysqli;

        global $employer_error;

        $query = "SELECT passwd FROM Employer WHERE email = '" . $mysqli->escape_string($email) . "'";

        $result = $mysqli->query($query);

        util_check_query_result($query, $result);

        $invalid_credentials = false;

        if ($result->num_rows == 0) {

          $invalid_credentials = true;

        } else {

          $row = $result->fetch_assoc();

          $retrieved_password = $row["passwd"];

          if (!do_match_passwords($password, $retrieved_password))

        $invalid_credentials = true;

        }

        if ($invalid_credentials) {

          $employer_error = "Invalid credentials.";

          return false;

        }

        return true;

      }

      function valid_jobseeker_login($email, $password) {

        global $mysqli;

        global $jobseeker_error;

        $query = "SELECT passwd FROM JobSeeker WHERE email = '" . $mysqli->escape_string($email) . "'";

        $result = $mysqli->query($query);

        util_check_query_result($query, $result);

        $invalid_credentials = false;

        if ($result->num_rows == 0) {

          $invalid_credentials = true;

        } else {

          $row = $result->fetch_assoc();

          $retrieved_password = $row["passwd"];

          if (!do_match_passwords($password, $retrieved_password))

        $invalid_credentials = true;

        }

        if ($invalid_credentials) {

          $jobseeker_error = "Invalid credentials.";

          return false;

        }

        return true;

      }

      if (isset($_POST["employer_submitted"])) {

        global $error;

        // check whether specified username and password have been entered correctly

        if (valid_employer_login($_POST["employer_email"], $_POST["employer_password"])) {

          // store email in session variable

          $_SESSION["employer_email"] = $_POST["employer_email"];

          // perform redirect

          $target = util_siblingurl("jobseekermain.php", true);

          header("Location: " . $target);

          exit; /* ensure code below does not executed when we redirect */

        }

      }

      if (isset($_POST["jobseeker_submitted"])) {

        global $error;

        // check whether specified username and password have been entered correctly

        if (valid_jobseeker_login($_POST["jobseeker_email"], $_POST["jobseeker_password"])) {

          // store email in session variable

          $_SESSION["jobseeker_email"] = $_POST["jobseeker_email"];

          // perform redirect

          $target = util_siblingurl("jobseekermain.php", true);

          header("Location: " . $target);

          exit; /* ensure code below does not executed when we redirect */

        }

      }

    ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Work Net: Sign In</title>
        <link href="css/style.css" rel="stylesheet" type="text/css" />
      </head>
      <body>
        <div id="container">
          <h1>Work Net: Sign In</h1>
          <div id="content">
        <ul>
          <li>
            <h2>Employers</h2>
            <p><a href="accountcreate.php?accounttype=employer">Create new employer account.</a></p>
            <form method="post" action="<?php util_selfurl(true); ?>">
              <table>
            <tr>
              <td>E-mail:</td>
              <td><input type="text" name="employer_email" value="<?= htmlentities(util_setvalueorblank($_POST['employer_email'])); ?>" />
            </tr>
            <tr>
              <td>Password:</td>
              <td><input type="password" name="employer_password" value="<?= htmlentities(util_setvalueorblank($_POST['employer_password'])); ?>" /></td>
            </tr>
              </table>
              <?php if (isset($employer_error)) echo "<p style=\"color: red;\">" . htmlentities($employer_error) . "</p>"; ?>
              <input type="hidden" name="employer_submitted" />
              <input type="submit" value="Sign In" />
            </form>
            <p><a href="forgottenpassword.php?accounttype=employer">Forgotten Employer Password.</a></p>
          </li>
          <li>
            <h2>Job Seekers</h2>
            <p><a href="accountcreate.php?accounttype=jobseeker">Create new job seeker account.</a></p>
            <form method="post" action="<?php util_selfurl(true); ?>">
              <table>
            <tr>
              <td>E-mail:</td>
              <td><input type="text" name="jobseeker_email" value="<?= htmlentities(util_setvalueorblank($_POST['jobseeker_email'])); ?>" />
            </tr>
            <tr>
              <td>Password:</td>
              <td><input type="password" name="jobseeker_password" value="<?= htmlentities(util_setvalueorblank($_POST['jobseeker_password'])); ?>" /></td>
            </tr>
              </table>
              <?php if (isset($jobseeker_error)) echo "<p style=\"color: red;\">" . htmlentities($jobseeker_error) . "</p>"; ?>
              <input type="hidden" name="jobseeker_submitted" />
              <input type="submit" value="Sign In" />
            </form>
            <p><a href="forgottenpassword.php?accounttype=jobseeker">Forgotten Job Seeker Password.</a></p>
          </li>
        </ul>
          </div>
          <div id="footer">
        <p>
          <?php include('markup/footer.php'); ?>
        </p>
          </div><!-- end #footer -->
        </div><!-- end #container -->
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:54:13.923

我可能会做两件事来找出问题所在：

1.  使用 Wireshark。准确查看您收到的标题。这可能会告诉您确切的问题原因（也许主机总是在页面顶部打印一些东西，就像一些免费主机一样？）
2.  检查其他标头重定向是否有效。创建一个简单地执行重定向的 php 脚本，其中包含硬编码的值，并查看它是否有效。如果是这样，则意味着您的代码中的某些内容会打印到页面上，或者由于某种原因您没有成功构建目标 URL。

这是一个示例脚本：

```
<?php
    session_start();

    // I added the require just to make sure nothing is being printed there
    // (an error for example)
    require_once('include/connect.php');
    require_once('include/util.php');

    header("Location: " . SOME_LOCATION);
    exit;
?> 
```

当然，当您重定向到某些网页时，它会打印正常...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:36:29.283

如果没有看到 util_siblingurl() 的代码，我的猜测是你的问题是一个路径问题。您的 util_siblingurl() 函数和 Apache 设置的组合可能会导致路径不一致。

例如，在本地主机上，您可能会被重定向到[http://example.com/some/path/to/jobseekermain.php](http://example.com/some/path/to/jobseekermain.php)，而在远程主机上，您可能会被重定向到[http://example.com/some/different/path /to/jobseekermain.php](http://example.com/some/different/path/to/jobseekermain.php)

您看到的是白屏而不是 404 的事实使我对这个假设有些犹豫，但查看该函数的代码仍然会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:42:49.513

我相信你的代码没有问题。实际上，像托管系统这样的 ipage 会导致一些问题。我也使用过 ipage 托管计划并面临同样的问题。

所以，伙计，尝试找到另一个比这些更好的托管服务器。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T06:45:51.263

我遇到了同样的问题。Ipage 托管、重定向不起作用，服务器报告标头已发送。原来问题是空格。

`<?php code ?>`确保标签之外没有空格或任何其他字符。在重定向之前包含的所有文件中，手动选择并删除开始标记之前和结束标记之后的所有内容。

# java - 在整个 SD 卡中搜索特定文件

> ID：11386848
> 
> 赞同：0
> 
> 时间：2012-07-08T21:26:30.960
> 
> 标签：java, android, file, search

我知道如何搜索文件，但使用特定路径，例如 /sdcard/picture/file。有没有办法搜索那个特定的文件。示例：搜索文件。然后应用程序将其定位在 /sdcard/picture 中。然后抹去。

有什么帮助吗？谢谢（我知道如何擦除文件，但必须写下整个路径）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:44:25.287

您可以从外部存储 / SD 卡的根目录开始递归地解决该问题。

我脑子里有一些未经测试的代码（方法名称可能是错误的）

```
public File findFile(File dir, String name) {
    File[] children = dir.listFiles();

    for(File child : children) {
        if(child.isDirectory()) {
           File found = findFile(child, name);
           if(found != null) return found;
        } else {
            if(name.equals(child.getName())) return child;
        }
    }

    return null;
} 
```

如果您想在 SD 卡上查找该文件名的*所有*匹配项，则必须使用 List 来收集和返回所有找到的匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:43:38.020

试试这个：

```
public class Test {
    public static void main(String[] args) {
        File root = new File("/sdcard/");
        String fileName = "a.txt";
        try {
            boolean recursive = true;

            Collection files = FileUtils.listFiles(root, null, recursive);

            for (Iterator iterator = files.iterator(); iterator.hasNext();) {
                File file = (File) iterator.next();
                if (file.getName().equals(fileName))
                    System.out.println(file.getAbsolutePath());
                    file.delete();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# android - 我的光标总是返回一些值

> ID：11386849
> 
> 赞同：1
> 
> 时间：2012-07-08T21:26:37.473
> 
> 标签：android, sqlite

我是安卓新手。当我使用 db.query 检索和比较用户名时，它总是返回一些值，当值不匹配时它必须返回 null。

这是代码

```
public boolean check(String name)
{
    SQLiteDatabase db = DB.getReadableDatabase();

      Cursor cursor = null;
      try{
      cursor=db.rawQuery("SELECT * FROM "+ DBHelper.Login_Table + " WHERE "+ 
              DBHelper.KEY_USERNAME + "='" + name + "'",null);

      }
      catch(Exception e)

      {
       e.printStackTrace();
      }

        if (cursor!=null) {
            Log.i("someTAG","Error .. USERNAME EXIST");
            cursor.moveToFirst();
            return true;

        }
        else
        {
            Log.i("someTAG","Error ..  NOT EXIST");
            return false;

      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:31:44.233

不，您的游标不必返回 null，它只需返回 0 条记录。

```
if(cursor.getCount() != 0){
    // user exists
} else {
    // user doesn't exist
} 
```

# linux - GNU Octave 方法对矩阵中的每个项目进行操作。八度“arrayfun（...）”示例

> ID：11386854
> 
> 赞同：46
> 
> 时间：2012-07-08T21:27:23.517
> 
> 标签：linux, function, octave

在 GNU Octave 版本 3.4.3 中，我无法应用自定义函数对矩阵中的每个项目/元素进行操作。

我有一个 (2,3) 矩阵，如下所示：

```
mymatrix = [1,2,3;4,5,6];

mymatrix

   1   2   3
   4   5   6 
```

我想将矩阵的每个元素用作输入，并对其运行自定义函数，并让函数的输出逐项替换 mymatrix 的内容。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-10-16T23:42:25.193

[arrayfun](https://www.gnu.org/software/octave/doc/interpreter/Function-Application.html)很适合这个：

```
arrayfun(@(x) 1/(1+e^(-x)), [0, 1; 2, 3]) 
```

输出：

```
ans =

   0.50000   0.73106
   0.88080   0.95257 
```

这基本上`1/(1+e^(-x))`在矩阵/向量的每个元素上运行函数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-11-22T07:37:44.660

或者，您可以使用以下元素运算符（注意点前缀）：

*   .+
*   .-
*   ./
*   e.^

例如

```
mymatrix = 1 ./ (1 .+ e.^(-mymatrix)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-08T21:28:27.933

## **将此代码放在名为“myfun.m”的文件名中**

```
function [ out ] = myfun(num)
  out = num + 5;
end 
```

将此代码放在名为“main.m”的文件名中

```
arrayfun(@myfun, [1, 0, -1; 3, 4, 5] ) 
```

输出：

```
ans =
   6   5   4
   8   9   10 
```

请注意该过程（加 5）如何应用于矩阵中的每个项目。

## **提示：为什么在足够大的矩阵上的这段代码不会最大化你的四核 CPU。**

下面`arrayfun`从 Vectorization 的角度分析下到 lowlevel C 的能力。下到裸机上的多核多线程优化：

这段`arrayfun`代码是“矢量化的”，GNU Octave 将这段代码打包后交给预先优化的 C 代码，而不是让 GNU Octave 管理自己的冰河迭代。像上面这样以矢量化方式执行的操作比将其放在 for 循环中快 2 到 5 个数量级。像这样的矢量化代码通常对于典型任务来说已经足够了，但是如果从 Alienware 的 QUAD-CHIP 32 核超线程 CPU 中提取每一转马力是关键任务，请继续阅读。

不要错误地说这段代码是“多线程”或“多核”，因为它不是。C 代码仍在以类似队列的迭代先进先出方式处理此代码。第 4 次添加必须等待第 3 次，第 3 次必须等待第 2 次。当这个迭代发生时，你的 CPU 正在转动它的拇指。如果您希望您的办公桌下的 16 核 CPU 在执行此操作时将其 CPU 使用率最大化到 100%，那么就没有逃脱的余地：您必须在面向多线程和多核的情况下停止并重新定义此问题方式。多线程和多核超出了这个答案的范围，最简单的方法是定义你的八度代码以产生8个单独的并行`job1.m`通过`job8.m`同时运行的所有文件，让它们都处理手头任务的 1/8，最后等待所有文件完成然后重新加入答案。此处的 GNU Octave Vectorization 不等于金属上的多线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T13:55:47.463

正如 Nasser 指出的那样，更简单的方法是以下八度音程代码：

```
f=@(x) x+5;
A = [1, 0, -1; 3, 4, 5];
result = f(A)
result 
```

将 (x+5) 应用于传入的每个元素，它会打印：

```
result =
    6    5    4
    8    9   10 
```

# jquery - jquery'click'事件的奇怪行为

> ID：11386864
> 
> 赞同：0
> 
> 时间：2012-07-08T21:29:59.833
> 
> 标签：jquery

我有一个锚标签

```
<li><a href="#" class="institution">Click me</a></li>
<li><a href="#" class="department">Click me</a></li>
<li><a href="#" class="branch">Click me</a></li> 
```

我想通过单击锚标记来执行一些代码。所以我使用了

```
$('a').click(function(){
    //do something..
}); 
```

但它没有成功。所以我用

```
$('a').on('click',function(){
    //do something..
}); 
```

我也用过

```
$('a').bind('click',function(){
    //do something..
}); 
```

但他们也没有工作。对我有用的是

```
$('a').live('click',function(){
    //do something..
}); 
```

为什么会这样……当所有人都应该表现出相同的行为时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T21:34:16.660

`.click`并且`.bind`没有事件委托。您在元素加载到 DOM 之前执行它们。将您移动`.click`到锚点下方或将其添加到 DOM 就绪事件中：

```
$(document).ready(function() {
    $('a').click(function(){
        //do something..
    });
}); 
```

或者

```
$(function() {
    $('a').click(function(){
        //do something..
    });
}); 
```

以上两者都有相同的结果，请使用您认为更具可读性/可维护性的任何一个。

[`.live`](http://api.jquery.com/live/)现在可以工作，因为它使用事件委托，根据外行的观点，类似于

```
$(document).on('click', 'a', function(){
    //do something..
}); 
```

请注意，`.live`在 jQuery 1.7+ 中已弃用，因此您应该更喜欢[`.on`](http://api.jquery.com/on/)事件委托的方法。另请注意，仅在绑定到传递后代参数`.on`的父元素时才具有事件委托效果。`selector`

这是一个[**带有**](http://jsfiddle.net/ult_combo/HhFWG/).[`$(document).ready()`](http://api.jquery.com/ready/)

**编辑：**根据 OP 的评论，由于您正在动态添加锚标签，因此您有 2 个选项：事件委托（推荐）或每次添加新内容时重新绑定事件。

在 jQuery 1.7+ 中，您应该使用`.on()`事件委托：

```
$('#AnchorsDivID').on('click', 'a', function(){
    //do something..
}); 
```

这是一个带有`.on`事件委托和 Ajax 的全功能现场演示：
[**JSFiddle**](http://jsfiddle.net/ult_combo/8hvLw/2/)

在 jQuery <=1.6.4 中，您必须使用`.delegate()`or `.live()`。[`.live()`jQuery API 页面](http://api.jquery.com/live/)显示了哪一个为每个版本提供了更好的可用性和性能。

对于 jQuery >=1.4.3 <1.7：

```
$('#AnchorsDivID').delegate('a', 'click', function(){
    //do something..
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:35:32.123

此代码与您的 html 完全兼容：

```
$(document).ready(function(){
    $('a').on('click', function(e){
        console.log('some action.');
    });
}); 
```

PS此代码将在所有链接上运行！

# python - 为什么 for/while 循环会意外删除字符串？

> ID：11386866
> 
> 赞同：0
> 
> 时间：2012-07-08T21:30:03.080
> 
> 标签：python

我无法弄清楚为什么当用户输入“否”时第一个包含 while 的 for 循环有效，以及为什么第二个实例无效。

我相信这两个循环的构造几乎相同。第二次出现只是分解为另一个功能。

当用户输入“否”时，它应该不会删除字符串。

这个有效。如果用户输入“否”，它不会删除任何内容。

```
def remove():
    f = open('codilist.txt')
    coname = raw_input('What company do you want to remove? ') # company name
    tmpfile = open('codilist.tmp', 'w')
    for line in f:
        if coname.upper() in line:
            while True:
                answer = raw_input('Are you sure you want to remove company?\nyes or no?')
                if answer == 'yes':
                    print line.upper() + '...has been removed.'
                    break                
                elif answer == 'no':
                    f.close()
                    tmpfile.close()
                    return
                else:
                    print 'Please choose yes or no.'                    
        else:
            tmpfile.write(line)
    f.close()
    tmpfile.close()
    os.rename('codilist.tmp', 'codilist.txt') 
```

这个不行。如果用户输入“否”，它无论如何都会删除该字符串。

```
def find_and_remove(f,coname,tmpfile):
    for line in f:
        if coname.upper() in line:
            while True:
                answer = raw_input('Are you sure you want to remove company?\nyes or no?')
                if answer == 'yes':
                    print line.upper() + '...has been removed.'
                    break               
                elif answer == 'no':
                    f.close()
                    tmpfile.close()
                    return
                else:
                    print 'Please choose yes or no.'                   
        else:
            tmpfile.write(line)

def remove():
    f = open('codilist.txt')
    coname = raw_input('What company do you want to remove? ') # company name
    tmpfile = open('codilist.tmp', 'w')
    find_and_remove(f,coname,tmpfile)
    f.close()
    tmpfile.close()
    os.rename('codilist.tmp', 'codilist.txt') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:56:24.173

为了展示更好的编码风格，我冒昧地在下面重写了您的脚本：

```
def get_user_in(message, valid_responses):
    while True:
        user_in = raw_input(message)
        if user_in in valid_responses:
            return user_in
        else:
            print "Please choose from: {0} or {1}".format(*valid_responses)

def find_and_remove(co_name, infile, outfile):
    pattern = co_name.upper()
    for line in infile:
        if pattern in line.upper():
            print line
            answer = get_user_in("Remove this line? ", ("yes", "no"))
            if answer == "no":
                outfile.write(line)
        else:
            outfile.write(line)

def remove(filename):
    outFilename = filename + '.tmp'
    with open(filename, 'r') as infile, open(outFilename, 'w') as tmpfile:
        co_name = raw_input('What company do you want to remove? ')
        find_and_remove(co_name, infile, tmpfile)
    os.rename(outFilename, filename) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:52:53.490

**有关如何重做整个事情的一个很好的例子，请参阅[Joel 的 wiki 答案。](https://stackoverflow.com/a/11387041/496445)**

但至于修复你的错误......

我终于意识到你的两个例子之间的巨大差异是什么。它与您执行`rename`.

在您的第一个示例中，当用户说“不”时，从整个函数返回会阻止您`os.rename`发生任何事情。结果是您看到一个完全不变的原始 .txt 文件。

在你的第二个例子中，如果用户说“不”，你会从子函数返回到主函数，但`os.rename`不管发生了什么。这意味着如果他们说不，您不再写任何行，但您仍然会复制已处理一半的 tmp 文件。

虽然我真的认为应该重写整个事情，但对当前代码的一个简单调整是`find_and_remove`返回过程是否成功，可能带有 bool：

```
def find_and_remove(f,coname,tmpfile):
    ...             
                elif answer == 'no':
                    return False
    return True

def remove():
    ...
    success = find_and_remove(f,coname,tmpfile)
    f.close()
    tmpfile.close()
    if success:
        os.rename('codilist.tmp', 'codilist.txt') 
```

老实说，您应该考虑使用`with`上下文来打开和关闭文件，这样您就不必混淆何时关闭文件的一堆条件。你让它们在两个不同的功能中被关闭。

[with](http://docs.python.org/reference/compound_stmts.html#with)语句_

```
with open('infile.txt') as inFile, open('outfile.txt', 'w') as outFile:
    for line in inFile:
        outFile.write(line) 
```

当`with`块结束时，它会关闭文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T21:37:35.747

在我看来，问题出`return`在“否”子句中。在方法执行之前退出函数`tmpfile.write(line)`，所以对我来说看起来字符串被删除是有意义的。我不明白为什么它会在第一个函数中起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T22:04:02.360

我和乔尔有同样的想法，但有点慢......无论如何，希望这是有趣的：

```
COMPANY_FILE = 'codilist.txt'

def load_companies():
    with open(COMPANY_FILE) as inf:
        return filter(None, (line.strip() for line in inf))

def save_companies(companies):
    with open(COMPANY_FILE, 'w') as outf:
        outf.write('\n'.join(companies))

def get_option(prompt, options):
    options = [opt.strip().lower() for opt in options]
    prompt = "{}? [{}]".format(prompt, '/'.join(options))
    options = set(options)
    while True:
        res = raw_input(prompt).strip().lower()
        if res in options:
            return res

def remove_company(remove, companies):
    ask = lambda c: get_option('Remove company {}'.format(c), ['yes', 'no'])
    return [co for co in companies if remove not in co or ask(co)=='no']

def main():
    companies = load_companies()
    co_len = len(companies)

    remove = raw_input('Name of company to remove?').strip()
    companies = remove_company(remove, companies)

    if len(companies) < co_len:
        save_companies(companies)

if __name__=="__main__":
    main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T21:34:49.923

在第二种情况下，您仅`find_and_remove`在用户键入时才返回`no`。在第一种情况下，您将退出整个函数。

# java - 从命令行创建可运行的 jar

> ID：11386868
> 
> 赞同：0
> 
> 时间：2012-07-08T21:30:31.737
> 
> 标签：java

在文件夹`~/code/`中，我 `bin/ src/ lib/` 在 ~/ 中创建了 manifest.txt，其内容为：

```
Main-class: test.MyMainClass
Class-Path: lib/*.jar 
```

然后在〜我使用了命令

`jar cfm d.jar manifest.txt code/`

然后我跑

`java -jar d.jar`

它说

`Exception in thread "main" java.lang.NoClassDefFoundError: test/MyMainClass Caused by: java.lang.ClassNotFoundException: test.MyMainClass`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:34:23.747

为什么要打包 bin、src 和 lib？您需要打包已编译的类。

即首先，编译你的项目。你会得到一些类目录。转到该目录并将这些文件与`jar`.

然后你需要`META-INF/MANIFEST.MF`有`Main-class: ...`

检查这篇好文章 - 最后一章。 [http://www.skylit.com/javamethods/faqs/createjar.html](http://www.skylit.com/javamethods/faqs/createjar.html)

* * *

如果这是您第一次使用 Java，最好学习基础知识——如何组织 .jar 中的文件等。

但后来，为了提高构建效率，我建议你使用 Maven。 [http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

# ruby-on-rails - 更改 Rails 控制台 (IRB) Ruby 版本 OSX

> ID：11386869
> 
> 赞同：1
> 
> 时间：2012-07-08T21:30:52.797
> 
> 标签：ruby-on-rails, ruby, rvm, irb, rbenv

我在使用正确版本的 ruby​​ 运行 rails 控制台时遇到了一些麻烦。我想在 rails 控制台中使用 ruby​​ 1.9.3。

当我运行 RVM list 我得到：

```
rvm rubies

ruby-1.9.3-p0 [ x86_64 ]
=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

当我运行 rbenv global 时，我得到：

```
 rbenv global                                                     
 1.9.3-p194 
```

当我在本地运行 rbenv 时，我得到： rbenv: no local version configured for this directory

当我运行 ruby​​ -v 我得到：

```
 ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0] 
```

当我在“rails 控制台”中运行 RUBY_VERSION

```
 irb(main):001:0> RUBY_VERSION
 => "1.8.7" 
```

当我跑步时，`which ruby`我得到：

```
ruby: aliased to bundled_ruby 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:40:16.710

看来您的 rbenv 实际上配置正确。通过简单的运行来测试它`which ruby`，你应该会看到`/Users/USERNAME/.rbenv/shims/ruby`. 真正的问题是当你运行`rails console`. 该`rails`命令随 osx 一起提供，并且您可能在 rbenv 中没有 shim。

`script/rails console`从项目目录内部尝试。

# c# - 如何将每个列表框项保存到 xml 文件中

> ID：11386871
> 
> 赞同：0
> 
> 时间：2012-07-08T21:31:00.640
> 
> 标签：c#, winforms

我有一个列表框，它读取一个 xml 文件并让用户能够将项目从一个列表框中添加到另一个列表框中。当用户单击特定按钮时，我想以某种方式将所有项目名称保存到 xml 文件中。但不是打印名称，而是打印这个`"System.Windows.Forms.ListBox+ObjectCollection"`

我以为我能做到这一点。

```
 XmlDocument doc = new XmlDocument();
            doc.Load("info.xml");
            XmlNode test = doc.CreateElement("Name");

            test.InnerText = listBox2.Items.ToString();

            doc.DocumentElement.AppendChild(test);
            doc.Save("info.xml"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:32:27.957

这将返回对象的*类型*，而不是内容。

```
listBox2.Items.ToString(); // System.Windows.Forms.ListBox+ObjectCollection 
```

如果要保存 ListBox 中每个项目的全部内容，则应使用以下内容遍历每个项目：

```
foreach(var item in listBox2.Items)
{
    // Do something with item
    Console.WriteLine(item);
} 
```

我建议使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)来连接每个项目。

# c# - Show vs ShowDialog 两者都有问题

> ID：11386873
> 
> 赞同：-1
> 
> 时间：2012-07-08T21:31:27.493
> 
> 标签：c#, winforms

我一直在编写一个打开 Form1 的小应用程序，检查配置文件是否存在且正确，然后隐藏在任务栏中，直到收到 API 调用。

发生这种情况时，我希望在右下角打开一个新表单并显示各种详细信息，但我遇到了一些问题。当我使用 ShowDialog 打开表单时，表单并不总是遵循 TopMost 来尝试让表单出现在*所有其他窗口*的顶部，但是如果我使用 Show 代替，这会遵循 TopMost，但表单样式很*混乱*如下所示*。*

标准形式如下：

```
Caller Number: XXXXXXXX
Caller Name:   XXXXXXXX
               XXXXXXXX 
```

**代码示例**

```
Form2 form2 = new Form2();
form2.TopMost = true;
form2.TopLevel = true;
form2.ShowDialog(); 
```

上图：并不总是在所有内容之上打开

```
Form2 form2 = new Form2();
form2.TopMost = true;
form2.TopLevel = true;
form2.Show(); 
```

我当前的代码是：

```
private void checkCalls(object source, System.Timers.ElapsedEventArgs e)
{
    var client = new RestClient("http://apiurl.com");
    client.Authenticator = new HttpBasicAuthenticator(api_username, api_password);

    var request = new RestRequest("/", Method.GET);

    // async with deserialization
    var asyncHandle = client.ExecuteAsync<Call>(request, response =>
    {
        if (response.Data == null)
        {
            if (incoming_call == true && notify_type == "Pop-Up")
            {
                if (caller.InvokeRequired)
                {
                    caller.Invoke(new EventHandler(delegate {
                        Console.WriteLine("Hidden via Invoke");
                        caller.Hide();
                    }));
                }
                else
                {
                    Console.WriteLine("Hidden without Invoke");
                    caller.Hide();
                }
            }
            incoming_call = false;
        }
        else if(incoming_call == false)
        {
            incoming_call = true;
            if (notify_type == "Pop-Up")
            {
                //Console.WriteLine("Openning Window");
                if (caller.InvokeRequired)
                {
                    caller.Invoke(new EventHandler(delegate
                    {
                        Console.WriteLine("Opening Window via Invoke");
                        caller.Show();
                        caller.TopMost = true;
                        caller.TopLevel = true;
                    }));
                }
                else
                {
                    Console.WriteLine("Opening Window");
                    caller.Show();
                    caller.TopMost = true;
                    caller.TopLevel = true;
                }
            }
        }
    });
} 
```

还有一些日志：

```
打开窗口
不调用就隐藏
打开窗口
不调用就隐藏

```

上面，打开像（很难看到，但文本框应该是灰色的，禁用和只读，每个文本字段旁边都有黑色文本，现在不可见，但有白色背景）：

[截图 http://img546.imageshack.us/img546/5517/screenshot20120708at222.png](http://img546.imageshack.us/img546/5517/screenshot20120708at222.png "截屏")

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:18:07.537

将表单类型更改为 FixedDialog。如果问题仍然存在，请尝试更改您的`caller.Hide()`to`caller.SetOpacity(0)`和您的`caller.Show()`to`caller.SetOpacity(1)`

每当您显示表单时强制刷新表单。

# onclick - on('click') 没有被调用

> ID：11386874
> 
> 赞同：0
> 
> 时间：2012-07-08T21:31:32.027
> 
> 标签：onclick, jquery

我有这个代码：

```
$('input.error').on('click', function(){
    $(this).removeClass('error').val($(this).data('submitval'));
}); 
```

但是，当我单击带有错误类的表单元素时，如下所示：

```
<input id="email" type="email" class="required error" placeholder="Enter Your Email here" name="email" value=""> 
```

什么都没有发生，我设置的断点没有被调用，也没有任何代码执行。但是，如果我将其设置为`$('input')`它确实有效。我的理解是，这`.on`应该涵盖加载后 DOM 的变化。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:33:12.483

是的，您是：`.on()`结合了现场活动、代表和常规活动，您使用的语法创建了常规活动。

你想要的是

```
$('#someparentelement').on('click', 'input.error',function() {
    // ...
}); 
```

`#someparentelement`应该是尽可能接近输入元素但在绑定事件时存在的元素。

# objective-c - 如何在 Cocoa / Objective-C 中将文件编码和解码为 Base64

> ID：11386876
> 
> 赞同：8
> 
> 时间：2012-07-08T21:31:42.757
> 
> 标签：objective-c, cocoa, base64, xcode4.3

我目前正在尝试让一个小型肥皂客户端工作，其中包括在请求的 xml 中发送证书文件。

我可以毫不费力地将文件转换为 NSData 对象 - 但是我必须将其转换为一些 Base64 字符串。环境是 Mac OSX，Xcode 4.3。

我发现很多旧帖子都在处理这个问题——但我发现最好的是一些使用 OpenSSL 库的代码，其中包含大量不推荐使用的方法。

所以，我的问题如下：有没有比使用 OpenSSL 库更好的方法？如果是，您是否有一些 URL 或更新的代码片段？

如果不是，我想有一些可以推荐的处理 Base64 的项目。毕竟 Base64 并不少见。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T13:31:01.247

这是使用 CommonCrypto 完成的 base64 编码：

这是非常简单的代码，将它放在一个类别中并不难

如果您将此添加到您的项目中，您还需要添加 Security.framework

```
#include <CoreFoundation/CoreFoundation.h>
#include <Security/Security.h>

static NSData *base64helper(NSData *input, SecTransformRef transform)
{
    NSData *output = nil;

    if (!transform)
        return nil;

    if (SecTransformSetAttribute(transform, kSecTransformInputAttributeName, input, NULL))
        output = (NSData *)SecTransformExecute(transform, NULL);

    CFRelease(transform);

    return [output autorelease];
}

NSString *base64enc(NSData *input)
{
    SecTransformRef transform = SecEncodeTransformCreate(kSecBase64Encoding, NULL);

    return [[[NSString alloc] initWithData:base64helper(input, transform) encoding:NSASCIIStringEncoding] autorelease];
}

NSData *base64dec(NSString *input)
{
    SecTransformRef transform = SecDecodeTransformCreate(kSecBase64Encoding, NULL);

    return base64helper([input dataUsingEncoding:NSASCIIStringEncoding], transform);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-12T18:59:18.807

如果您使用的是 iOS 7 或 OS X 10.9 SDK，则可以使用 NSData 的新 base64 功能。

如果您使用的是旧版 SDK，只需添加此声明即可获取 NSData base64 编码和解码。这适用于 iOS 4+ 和 OS X 10.7+。

```
#ifndef __IPHONE_7_0
@interface NSData (NSDeprecated)
- (id)initWithBase64Encoding:(NSString *)base64String NS_DEPRECATED(10_6, 10_9, 4_0, 7_0);
- (NSString *)base64Encoding NS_DEPRECATED(10_6, 10_9, 4_0, 7_0);
@end
#endif 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T21:35:51.897

这是我写的一个简单的[NSData Base64 类别。](https://gist.github.com/1901480)它在底层使用 plist 序列化/反序列化机制。此外，欺骗[雷达#9896929](http://www.openradar.me/9896929)会很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-23T08:51:43.723

这适用于 OSX，并且可以与从 10.6 到 10.8 的 SDK 一起使用。对于 10.9，这些方法发生了一些变化（尽管在撰写本文时，它们仍然有效），但都记录在

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSData/base64Encoding](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSData/base64Encoding)

```
+ (NSString *) base64StringFromFileAtPath: (NSString*) filePath {
    NSData * dataFromFile = [NSData dataWithContentsOfFile:filePath];
    return [dataFromFile base64Encoding];
}

+ (NSData*) dataFrom64String : (NSString*) stringEncodedWithBase64
{
    NSData *dataFromBase64 = [[NSData alloc] initWithBase64Encoding:stringEncodedWithBase64];
    return dataFromBase64;
} 
```

# jquery - 将 target="_top" 添加到表达式引擎登录表单标签

> ID：11386880
> 
> 赞同：0
> 
> 时间：2012-07-08T21:32:10.607
> 
> 标签：jquery, fancybox, expressionengine, targeting

我在fancybox iframe 中使用登录表单标签。

对于我的返回参数，我使用的是`<?php echo $_SERVER['HTTP_REFERER']; ?>`，以便将用户带回到他们从哪个页面开始。不幸的是，它会将他们带回到 iframe 中的那个页面。

如何`target="_top"`向返回链接或其他将关闭 iframe 并在父窗口中管理重定向的 jQuery 调用添加属性？

谢谢，

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:37:07.393

在我看来，您可能想返回一个执行以下操作的插页式页面：

1.  关闭fancybox ( call `$.fancybox.close()`)
2.  根据某些参数（例如`{redirect='{segment_2}'}`）重定向到所需的页面

FWIW，-s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:33:43.350

使用这个免费的附加组件[http://devot-ee.com/add-ons/page-history](http://devot-ee.com/add-ons/page-history)来获取访问的最后一页（或前一页到最后一页），而不是使用 HTTP_REFERER。

要么设置为表单的一部分（RET 的隐藏字段），要么输出到控制表单提交的 JavaScript（或表单提交到的页面。

```
<input type="hidden" value="{exp:page_history:get page=‘1’}" name="RET"/> 
```

您可以在结果页面上有一些 Jquery 重定向到同一页面，但不在 iFrame 内：

```
 if (top.location.href != document.location.href) {
        //###   Inside an iFrame   ###
        if (document.location.href.indexOf("/redirected page after login") >= 0) {
            //###   Breakout of iFrame   ###
            $("body").css("display","none"); //Hide to minimise 'flicker'
            top.location.href = document.location.href;
        }
    } 
```

或者让一些 JavaScript 捕获登录表单提交，然后通过 Ajax 提交页面，然后重定向到所选的 URL（您不需要关闭 fancybox，只需 target `top.location.href`.

这是通过 Ajax 发送带有服务器错误检查响应的登录表单的示例 JQuery：

```
//###   LOGIN FORM SUBMISSION   ###
function SubmitLogin() {
    //###   Send form via AJAX   ###
    $.ajax({
        type: "POST",
        data: $("#login-form").serialize() + "&action=" + $("#login-form").attr("action"),
        dataType: "html",
        success: function (html) {
            //###   Successfully received an html page from the server   ###
            if ( html.search(/error/i) >= 0 ) {
                if (html.search(/username you submitted was not found/i) >= 0) {
                    $("#login-username").addClass('error');
                    $("#login-username").after('<label class="error" for="login-username" generated="true">Email address doesn\'t exist<br />Re-check or register an account</label>');
                } else if (html.toLowerCase().indexOf("account does not exist") != -1) {
                    //Do appropriate selection & error message
                } else if (html.search(/You did not submit a valid email address/i) >= 0) {
                    //Do appropriate selection & error message
                } else if (html.search(/captcha/i) >= 0) {
                    $("#captcha").addClass('error').after('<label class="error" generated="true">' + $("#captcha").attr('title') + '</label>')
                } else if (html.search(/password/i) >= 0) {
                    $("#login-password").addClass('error');
                    $("#login-password").after('<label class="error" for="login-username" generated="true">You have entered an incorrect password</label>');

                } else if (html.search(/already logged in/i) >= 0) {
                    $("#login-butn").after('<label class="error" for="login-username" generated="true">User already logged in!</label>');

                } else if (html.search(/account has not been activated yet/i) >= 0) {
                    $("#login-butn").after('<label class="error" for="login-username" generated="true">Account has not been activated yet<br />Check your email and activate</label>');

                } else {
                }

            } else {
                //###   Successfully Logged in   ###
                top.location.href = "where ever you want to go";
                // Target RET field of form here...?
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            //###   Error occurred, could be server, CMS or 404   ###

        }
    });
} //###   End of SubmitLogin function   ### 
```

这只是一个基于一些 EE1 错误消息的示例，我已经用来自 EE2 的几个错误消息进行了更新，所以如果您选择沿着 Ajax 提交路径并因此重定向，应该给您一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:37:10.577

我的建议是不要在您的 FancyBox 中使用 iframe，而只是在您的页面上使用一个隐藏的片段，其中包含您的登录表单。这样您就不必修改任何内容，因为登录表单将始终加载在当前页面上。

只需从模板中的`#pageheader`div开始的所有内容`login_form`，将其`#login`放在全局模板中某处（页眉、页脚、任何位置）的 div 中，然后使用一些 javascript（或者，如果您愿意，使用 CSS）将其隐藏。然后只需链接到“#login”而不是“/home/login_form”。

您可以`type: 'iframe'`从您的 FancyBox jQuery 调用中删除参数 - FancyBox 足够聪明，可以根据链接确定它正在加载的内容（在这样的片段链接的情况下，它会将自身设置为“内联”模式）。

如果登录表单在全局嵌入中，您可以仅在该嵌入中启用 PHP。或者，如果您使用的是代码片段，请改用[Current 插件](http://devot-ee.com/add-ons/current)，这样您就不必在所有模板中启用 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:55:00.823

解决方案是不使用 EE 登录表单标签，而是对表单进行硬编码。这允许添加一个目标属性：

```
<form method="post" action="http://domain.com/" target="_top"  >
<div class='hiddenFields'>
<input type="hidden" name="XID" value="XXXXXXXXXXXXXXXXXXXXXXXXXXXXX" />
<input type="hidden" name="ACT" value="12" />
<input type="hidden" name="RET" value="<?php echo $_SERVER['HTTP_REFERER']; ?>" />
<input type="hidden" name="site_id" value="1" />
</div> 
```

谢谢您的帮助。

泰

# ruby-on-rails - 使用carrierwave和fog将Rails图像上传到S3

> ID：11386882
> 
> 赞同：3
> 
> 时间：2012-07-08T21:32:34.860
> 
> 标签：ruby-on-rails, ruby, amazon-s3, carrierwave, fog

您好，我一直在开发一个网络应用程序，我希望让用户能够上传个人资料图片。我花了很多时间试图让carrierwave和fog与s3一起工作，但没有成功。非常感谢您能给我的任何帮助。

更新：我一直试图摆弄它，据我所知，文件永远不会上传，用户控制器中的 :image 值始终为空。

我的上传者类。

```
class PhotoUploader < CarrierWave::Uploader::Base
   storage :fog
   def store_dir
      "uploads/#images/#{model.class.to_s.underscore}"
   end
end 
```

雾初始化器

```
CarrierWave.configure do |config| 
  config.fog_credentials = { 
    :provider               => 'AWS', 
    :aws_access_key_id      => 'xxx', 
    :aws_secret_access_key  => 'yyy', 
  } 
  config.fog_directory  = 'pictures_dev' 
  config.fog_public     = true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}
end 
```

用户模型

```
class User
  include Mongoid::Document
  ....
  has_one :photo
  ....
end 
```

照片模型

```
class Photo
include Mongoid::Document
attr_accessible :name, :image

field :image, :type => String
field :name, :type => String

belongs_to :user

mount_uploader :image, PhotoUploader
 end 
```

照片控制器

```
 class PhotoController < ApplicationController

    def update
    @photo = Photo.find(params[:id])
      if @photo.update_attributes(params[:image]) 
        flash[:success] = "Your have updated your settings successfully."
      else
        flash[:error] = "Sorry! We are unable to update your settings. Please check your      fields and try again."
    end
    redirect_to(:back)
   end 
```

上传表格

```
= form_for @photo, :html => {:multipart => true} do |f|
  %p
    %label Photo
    = image_tag(@user.image_url) if @photo.image? 
    = f.file_field :image
    = f.submit 
```

这就是我能想到的所有相关内容，如果有人需要我发布更多代码，我会很乐意。老实说，我很难过，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:12:22.380

我设法为任何感兴趣的人解决了这个问题。事实上，我正在与我的用户一起使用设计，并且需要在上传表单中进行一些不同的配置才能使其正常工作。这是帮助我的文档的链接，以防其他人遇到问题。

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-use-carrierwave-with-devise](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-use-carrierwave-with-devise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:37:56.260

我觉得你有问题

```
if @photo.update_attributes(params[:image]) 
```

尝试这样的事情

```
if @photo.update_attributes(image: params[:photo][:image]) 
```

# html - 缩放背景图像

> ID：11386883
> 
> 赞同：10
> 
> 时间：2012-07-08T21:32:36.043
> 
> 标签：html, css, web, background-image

我想在我的页面中放大和缩小背景图像。我尝试了多种方法，但似乎没有什么能按我想要的方式工作。:( 我页面的网址是[http://quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/)并且每个链接都有不同的背景图片。我知道图片的大小和质量需要优化，但我首先想弄清楚它的技术部分。如果有人可以帮助解决这个问题吗？

非常感谢你！罗恩

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T21:37:48.607

## 每个页面上的相同背景图像

如果您想要调整大小并填充整个窗口空间的背景图像，无论大小如何，请使用此 CSS，

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
} 
```

## 每页都有不同的背景图片

如果您想为每个页面使用不同的背景图片，

**HTML**

```
<div id="bg">
    <img src="<?=$imgsrc;?>" alt="">
</div> 
```

**CSS**

```
#bg {
    position:fixed; 
    top:-50%; 
    left:-50%; 
    width:200%; 
    height:200%;
}

#bg img {
    position:absolute; 
    top:0; 
    left:0; 
    right:0; 
    bottom:0; 
    margin:auto; 
    min-width:50%;
    min-height:50%;
} 
```

来源：[CSS-Tricks](http://css-tricks.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T14:25:03.457

可以在 MDN 上找到实现此目的的另一种方法：

```
.foo {
  background-image: url(bg-image.png);

  -webkit-background-size: 100% 100%;           /* Safari 3.0 */
     -moz-background-size: 100% 100%;           /* Gecko 1.9.2 (Firefox 3.6) */
       -o-background-size: 100% 100%;           /* Opera 9.5 */
          background-size: 100% 100%;           /* Gecko 2.0 (Firefox 4.0) and other CSS3-compliant browsers */

  -moz-border-image: url(bg-image.png) 0;    /* Gecko 1.9.1 (Firefox 3.5) */
} 
```

IE 后备：

```
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path_relative_to_the_HTML_file', sizingMethod='scale')"; 
```

来自[https://developer.mozilla.org/en-US/docs/Web/CSS/background-size](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T23:14:59.827

很高兴看到 html 背景图像被很好地使用。因为一些开发人员依赖后沿 css 来保持向后兼容性，所以对于其他`css3`兼容的浏览器存在许多怪癖。就像`background:cover`在旧的 Safari 版本 (<4.05) 中一样，它不起作用。在这种情况下，我们可以使用旧的`css3`供应商回退，如图所示

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    -webkit-backgound-size:100% 100%; /* early css3 implementation */
    -webkit-background-size:cover;
} 
```

而且，如果碰巧你想要纯 CSS 中不同页面的不同背景图像，让我们一起去吧

```
html#bg1 {backrgound-image:url(images/bg1.jpg);}
html#bg2 {background-image:url(images/bg2.jpg);} 
```

但是，如果你不能给你的`<html>`标签一个`id`或者`class`你可能不得不求助于一些`javascript`. 然后，您可以为元素上的每个页面使用不同的背景图像`<html>`，这正是需要的。这似乎在`html`标签上工作正常。有些浏览器在使用时会忽略`css`for 。标签不那么喜怒无常。这可能比基于 php 的方法更好。例如：`background-image``html``body`

```
<script>
    document.getElementsByTagName('html')[0].style.backgroundImage='url(images/bg3.jpg)';
</script> 
```

background-size 的 html css 将继续适用，并将正确覆盖各种浏览器版本。但是请注意，较旧的 Safari 会在`javascript`使用空 url 时抛出错误，比如清除背景图像，例如

```
<script> /*Causes Error Safari 4*/
    document.getElementsByTagName('html')[0].style.backgroundImage='url()';
</script> 
```

该错误通常会`javascript`在不知道原因的情况下停止执行。相反，我们需要使用`style.backgroundImage='none';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:37:31.677

在 CSS 中使用媒体查询为不同的屏幕尺寸指定背景图像：

```
@media all and (max-width: 699px) and (min-width: 520px) {
background-image:url('rightsizebackground.jpg');
} 
```

# javascript - 我知道这是一个参考周期。但这是内存泄漏吗？

> ID：11386887
> 
> 赞同：3
> 
> 时间：2012-07-08T21:33:01.000
> 
> 标签：javascript, memory-leaks, cycle

设置：

```
obj = object
obj.fun = function
obj.fun.ob = reference to obj 
```

垃圾收集器会寻找这种类型的循环，还是泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:07:39.743

大多数 JavaScript 垃圾收集器都是标记和清除垃圾收集器，它们可以很好地处理这类事情。然而：

`obj`在 IE6 和以前的版本中，如果是 COM 对象并且`obj.fun`是 JavaScript 函数，则可能是内存泄漏。IE6 和之前的版本对 COM 对象使用 COM 垃圾收集器（它是一个引用计数器），对 JavaScript 对象使用 JavaScript 垃圾收集器（它是一个标记和清除收集器）。

在 IE7 中，仍然是内存泄漏，但在页面卸载时会被收集。但它仍然可能在页面启动时泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:38:24.783

一个现代的、好的垃圾收集器应该能够检测到这样的循环引用。相反，他们的垃圾收集能力不受此类引用的阻碍（他们是否积极寻找此类案例是另一回事）。

受此问题影响的幼稚垃圾收集器的一个示例是仅对引用计数，并且仅当引用计数变为零时才进行垃圾收集。但是，由于您在上面指出的原因，这不是垃圾收集器通常的实现方式。

那里有许多更好的垃圾收集算法，并且本身就是一个大主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T22:00:06.200

循环引用本身不会导致内存泄漏。这在一定程度上取决于您认为要包括的内存泄漏。目前，如果没有其他对象引用这些对象中的任何一个，那么它们将可用于 GC。但是，如果其他东西对一个有很强的引用，那么两者都将保持活动状态。

内存泄漏的通常原因是你在哪里设置

```
 obj.fun = null; 
```

并期望这会导致 fun 被收集，忘记 fun 有对 obj 的引用。当您忘记取消挂钩事件时，这正是发生的情况。

# java - 如何为我的应用程序实现新的游戏功能？里面解释

> ID：11386888
> 
> 赞同：-2
> 
> 时间：2012-07-08T21:33:01.283
> 
> 标签：java, user-interface, applet

我为这样的类制作了一个小应用程序：

1.  您单击棋盘上的任何按钮以从该按钮开始骑士之旅。
2.  我的程序解决了骑士的巡回赛，并在棋盘上打印出 1-64，以了解骑士如何穿越棋盘。

现在我正在尝试实现一个新游戏功能。我有一个菜单栏，文件，里面有新游戏。

我完全不知道如何实现一个新游戏，在点击新游戏时，会显示一个“新鲜”的新板供用户点击。

java中是否有任何内置函数可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:38:28.923

不知道加载时如何实现初始游戏有点困难，但是当小程序启动时，您将所有初始化调用为一个方法，然后从您的动作侦听器中调用它。

以空模式初始化您的板（再次，很难知道，因为我什至不知道您的板是如何表示的，并清除所有数据（创建一个新对象，让 GC 处理旧对象，或者给它们初始值，取决于您的实现。）

或者，您可以为每个对象（棋盘、骑士等）创建某种“重置”方法，然后调用所有重置，并在菜单项的动作侦听器上重绘所有内容。

但是看一点代码会很有帮助，或者至少知道你是如何实现一切的。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:39:09.323

不，没有为此内置任何内容，也不可能有，因为这完全取决于您的 GUI 设置和程序逻辑。你应该给你的程序一个`refresh()`或`reset()`方法或类似的东西，清除棋盘并重新初始化变量，然后从你的按钮或菜单中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:44:23.123

创建新游戏很可能取决于您的班级设计。假设您不手动更改 UI 元素，则必须实现一个函数，将游戏类的属性重置为默认值。

# ruby-on-rails - 目前接受的在 Refinery CMS 站点中嵌入表单的方式是什么？

> ID：11386889
> 
> 赞同：5
> 
> 时间：2012-07-08T21:33:07.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms

我想在基于炼油厂的 CMS 网站上创建几个表单。一个是联系表格，另一个是此联系表格的变体，带有一些附加字段。对于此表单，我查看了[Refinery 查询 gem](https://github.com/resolve/refinerycms-inquiries)，但似乎找不到修改其他字段的表单或将其嵌入多个页面的方法（每个页面都通过 i18n gem 具有多种语言） . 我还偶然发现了 可能满足我要求的[炼油厂引擎](https://github.com/resolve/refinerycms-generators/tree/forms)，但它已经有一段时间没有更新了，所以不确定它是否适用于最新版本。

发电机宝石还在使用吗？有没有人将这个宝石用于我想要实现的目标，或者炼油厂创建自定义表单的方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T23:57:18.187

refinerycms-generators 扩展被合并到 Refinery 本身中，并且其中存在一个表单生成器。要获取语法，只需运行：

```
rails generate refinery:form 
```

它将为您提供生成器的帮助。

这是目前您花费最少的精力来获取诸如reinerycms-inquiries 之类的表格的最佳选择。

# android - 如何添加动态微调器以及删除它们？

> ID：11386893
> 
> 赞同：0
> 
> 时间：2012-07-08T21:33:54.600
> 
> 标签：android, dynamic, android-spinner, reminders

我的问题围绕着提醒`Spinner`。我试图允许用户最多添加 5 个提醒。但我也不想展示所有五个。这些提醒每个`Spinner`都有多个选择。当用户点击添加提醒时，它会这样做。当他们想拿走一个时，他们也可以这样做，当他们想添加另一个时，新的会出现在底部。知道如何去做吗？

我最初的实现是已经定义了 5 个（4 个“消失”），但是如果用户想要添加一个，它就会变成“可见的”。问题在于，如果您通过使其“消失”从视图中删除提醒并将其添加回来，它不会出现在底部，而是回到原来的位置（除非它已经是最后一个微调器） . 现在我不知道如何在某些视图下专门动态添加微调器。任何想法将不胜感激！

编辑：我到目前为止/ **RemindersAdapter.java**

* * *

```
public class RemindersAdapter extends BaseAdapter{
ArrayList<Spinner> shownReminders;

public RemindersAdapter(Context c) {
    shownReminders.add(new Spinner(c));
    shownReminders.add(new Spinner(c));
    shownReminders.add(new Spinner(c));
    shownReminders.add(new Spinner(c));
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return shownReminders.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return shownReminders.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View view, ViewGroup parent) {
    if(view == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        view = inflater.inflate(R.layout.reminder_spinner, parent, false);
    }
    Log.d("TAG", "This is trying to run");
    Spinner reminderSpinner = (Spinner)view.findViewById(R.id.duplicate_reminder);
    reminderSpinner.setTag("1"); //this tag will be used to check which it is and correctly put the reminder into its respective String
    ArrayAdapter<CharSequence> reminderAdapter = ArrayAdapter.createFromResource(
            parent.getContext(), R.array.reminders_array, android.R.layout.simple_spinner_item);
    reminderAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    reminderSpinner.setAdapter(reminderAdapter);
    reminderSpinner.setOnItemSelectedListener(new MyOnReminderSelectedListener());
    shownReminders.add(position, reminderSpinner);

    return view;
}

/*
 * Listener for when the reminder spinner gets a value the user entered
 * */
public class MyOnReminderSelectedListener implements OnItemSelectedListener{

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        //does nothing for now

    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // Do nothing for now   
    }   
}//end of MyOnReminderSelectedListener innerclass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:08:19.447

微调器中数据出现的顺序取决于您输入适配器的数据的顺序。如果要更改显示顺序，则需要更改支持适配器的数据中的顺序（并用于`notifyDataSetChanged()`使微调器重新绘制）。

如果没有看到代码，很难知道如何告诉您继续进行。

# mysql - 在 MYSQL 中，如何将 utf-8 设置为默认值？

> ID：11386894
> 
> 赞同：0
> 
> 时间：2012-07-08T21:34:09.493
> 
> 标签：mysql, database

> **可能重复：**
> [如何使 MySQL 正确处理 UTF-8](https://stackoverflow.com/questions/202205/how-to-make-mysql-handle-utf-8-properly)

*   我已经创建了我的数据库。
*   我不想在 my.cfg 中这样做。

    我想运行一个 SQL 查询来将 utf-8 设置为我在这个数据库上的默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:50:05.653

一旦您开始创建表，它就不再是单个[ALTER DATABASE](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html)语句。你需要：

```
ALTER TABLE `foo`.`bar` CHARACTER SET utf8 COLLATION utf8_general_ci 
```

正如评论中已经暗示的那样。这会将表中*所有*列的排序规则更改为指定的排序规则。但是，如果需要，也可以逐列控制字符集和排序规则。

# javascript - XUL 未引用 javascript 文件

> ID：11386898
> 
> 赞同：1
> 
> 时间：2012-07-08T21:34:42.150
> 
> 标签：javascript, xul, xulrunner

我的 XUL 应用程序有一个外部 javascript 文件，它定义了一些函数。这些函数以前可以工作，但现在我无法从 .xul 文件中调用任何这些函数。谁能看到我做错了什么？

这是 chrome.manifest 文件

```
content mac chrome/content/
skin    mac classic/1.0 chrome/skin/ 
```

这是我的 main.xul 文件的最顶部

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://mac/skin/main.css" type="text/css"?>

<window id="mac-window" 
    title="MAC" 
    persist="screenX screenY width height sizemode"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script type="text/javascript" src="chrome://mac/content/main.js"/> 
```

请注意，文件顶部引用的 css 文件可以正常工作。另外，我尝试将“text/javascript”更改为“application/x-javascript”，但没有任何效果。

这是javascript文件的全部内容：

```
function exit() {
    window.close();
}

function toggle_toolbar(menuitem, toolbar) {

    switch (menuitem.getAttribute("checked"))
    {
    case "true":
        menuitem.setAttribute("checked", "false");
        toolbar.hidden = true;
        break;
    case "false";
        menuitem.setAttribute("checked", "true");
        toolbar.hidden = false;
        break;
    }
} 
```

这些函数的调用方式如下：

```
<commandset id="cmdset-file">
    <command id="cmd-toolbar" oncommand="toggle_toolbar(document.getElementById('view-popup-toolbar'), document.getElementById('the-toolbar'));"/>
    <command id="cmd-exit" oncommand="exit();"/>
</commandset> 
```

并且两个菜单项的命令属性设置为这两个命令的 id。

在 XUL 文件中嵌入的 Javascript 可以正常工作，但似乎无法引用 javascript 文件。这在今天早些时候工作得很好。在此停止工作之前，我正在尝试使用一些 javascript 来隐藏/取消隐藏一些选项卡框，但我不确定这是否相关。

有谁知道为什么我的 javascript 文件停止工作了？

提前致谢！

编辑：为澄清起见，我正在使用 XULRunner。此外，尝试从 .xul 文档的脚本标记中调用其中一个 javascript 函数也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:03:50.240

您应该检查错误控制台 - 对于 XULRunner 应用程序，您可以通过指定`-jsconsole`命令行标志来访问它。您将看到此消息：

> 例外：缺少：在案例标签之后

参考这一行：

```
case "false"; 
```

此行的末尾应该有一个冒号，而不是分号。您的 JavaScript 文件有语法错误，这就是它无法加载的原因。

# c# - 如何将命名委托用于 List.Sort() 的比较？

> ID：11386899
> 
> 赞同：2
> 
> 时间：2012-07-08T21:34:41.827
> 
> 标签：c#, delegates

在我的应用程序中，我有几种比较方法。我希望用户能够选择要使用的排序方法。理想情况下，我想设置一个委托，并根据用户的选择进行更新。这样，我可以使用 List.Sort(delegate) 保持代码的通用性。

这是我第一次尝试使用 C# 委托，但遇到了语法错误。这是我到目前为止所拥有的：

代表：

```
private delegate int SortVideos(VideoData x, VideoData y);
private SortVideos sortVideos; 
```

在类构造函数中：

```
sortVideos = Sorting.VideoPerformanceDescending; 
```

公共静态排序类中的比较方法（当我直接调用它时有效）：

```
public static int VideoPerformanceDescending(VideoData x, VideoData y)
{
    *code statements*
    *return -1, 0, or 1*
} 
```

抱怨“一些无效参数”的失败语法：

```
videos.Sort(sortVideos); 
```

最终，我想更改“sortVideos”以指向选择的方法。“videos”是一个 VideoData 类型的列表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:43:27.207

`List<T>`接受类型的委托，因此`Comparison<T>`您无法定义自己的委托，您只需要重用委托即可`Comparison<T>`。

```
private static Comparison<VideoData> sortVideos;

static void Main(string[] args)
{
    sortVideos = VideoPerformanceDescending;

    var videos = new List<VideoData>();

    videos.Sort(sortVideos);
} 
```

扩展答案以考虑用户选择部分，您可以将可用选项存储在字典中，然后在 UI 中允许用户通过选择字典的键来选择排序算法。

```
private static Dictionary<string, Comparison<VideoData>> sortAlgorithms;

static void Main(string[] args)
{
    var videos = new List<VideoData>();

    var sortAlgorithms = new Dictionary<string, Comparison<VideoData>>();

    sortAlgorithms.Add("PerformanceAscending", VideoPerformanceAscending);
    sortAlgorithms.Add("PerformanceDescending", VideoPerformanceDescending);

    var userSort = sortAlgorithms[GetUserSortAlgorithmKey()];

    videos.Sort(userSort);
}

private static string GetUserSortAlgorithmKey()
{
    throw new NotImplementedException();
}

private static int VideoPerformanceDescending(VideoData x, VideoData y)
{
    throw new NotImplementedException();
}

private static int VideoPerformanceAscending(VideoData x, VideoData y)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T21:43:36.607

`Sort`接受`Comparison<T>`委托类型，而不是您的`SortVideos`委托类型。

您根本不应该创建委托类型。
相反，只需写

```
videos.Sort(SomeMethod); 
```

# scheme - 为什么 chibi-scheme 会抛出这个错误

> ID：11386901
> 
> 赞同：3
> 
> 时间：2012-07-08T21:34:48.280
> 
> 标签：scheme

每当我使用 chibi-scheme v 0.5.3 运行下面的代码时，我在文件 project_euler.scm: empty application in source: () 的第 11 行收到一个错误，但是当我使用 Dr Racket 时它运行良好。有谁知道为什么会这样？

```
#! /usr/bin/env chibi-scheme

(define (sum-of-amicable-pairs n)
  (let ((sums (list->vector (map (lambda (i) 
                                   (reduce + 0 
                                           (filter (lambda (j) (= (remainder i j) 0)) 
                                                   (iota (+ 1 (quotient i 2)) 1 1)))) 
                                 (iota n 0 1)))))
    (let loop ((len (vector-length sums))
                    (res-list '())
                    (i 0))
      (cond
        ((= i len) (reduce + 0 res-list))
        ((and (< (vector-ref sums i) n) 
              (or (> (vector-ref sums i) i) (< (vector-ref sums i) i))
              (= (vector-ref sums (vector-ref sums i)) i))
         (loop len (cons (+ (vector-ref sums i) (vector-ref sums  (vector-ref sums i))) res-list)
               (+ i 1)))
        (else
          (loop len res-list (+ i 1)))))))

(sum-of-amicable-pairs 10000) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T22:27:37.217

好吧，我想我知道这里发生了什么。当你加载 chibi-scheme REPL 时，它使用的是 R7RS Scheme，但是当你加载一个文件时，它使用的是 Chibi 支持的最基本的 Scheme 版本。见：[http ://synthcode.com/scheme/chibi/#h3_SchemeStandard](http://synthcode.com/scheme/chibi/#h3_SchemeStandard)

如果您放在`(import (scheme base))`文件的顶部，那么您将不再收到有关空应用程序的错误。您也应该这样做`(import (srfi 1))`以获得您使用的列表处理程序。见：[http ://synthcode.com/scheme/chibi/#h2_StandardModules](http://synthcode.com/scheme/chibi/#h2_StandardModules)

# php - MySQL 时间戳 - 在过去一小时内显示 3 行

> ID：11386907
> 
> 赞同：6
> 
> 时间：2012-07-08T21:35:01.210
> 
> 标签：php, mysql, timestamp

我将如何显示在过去一小时内具有时间戳值的行？

这是我现在所拥有的，它显示了最新的行，由于限制，只有 3 行。

```
$query5= mysql_query("SELECT * FROM  `made_orders` ORDER by id DESC LIMIT 0,3");

    WHILE($datarows5 = mysql_fetch_array($query5)):

    $name4 = $datarows5['Name'];
    $phone4 = $datarows5['Phone'];
    $entree4 = $datarows5['Entree'];
    $side14 = $datarows5['Side 1'];
    $side24 = $datarows5['Side 2'];
    $drink4 = $datarows5['Drink'];
    $totalcost4 = $datarows5['Total Cost'];
    $ip4 = $datarows5['Ip'];
    $id4 = $datarows5['id'];
    $time4 = $datarows5['timestamp'];

    echo "<iframe src=\"creatmeal-data.php?id={$id4}\" width=\"430px\" style=\"border:0px\" height=\"350px\"/></iframe>";

endwhile; ?> 
```

在我上面的代码中，每次找到一行时，它都会回显一个 iframe。我将如何编辑查询以使用我的时间戳列仅显示一小时内的最新消息。

在此先感谢您的帮助！

编辑：这是我的时间戳列的样子：http: [//img856.imageshack.us/img856/4135/columnk.png](http://img856.imageshack.us/img856/4135/columnk.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-08T21:51:18.383

您当前的查询获取三个最近的订单，无论它们是否是在过去一小时内创建的。

使用此解决方案：

```
SELECT *
FROM made_orders
WHERE timestamp >= NOW() - INTERVAL 1 HOUR
ORDER BY timestamp DESC
LIMIT 3 
```

这将在最后一小时内获得最多三个订单。如果最近一小时内只有一个订单，它只会选择一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:40:00.140

SELECT * FROM `made_orders`ORDER by id WHERE UNIX_TIMESTAMP( `yourTimestampColumn`) > UNIX_TIMESTAMP() - 60*60

# c++ - c ++发现内存泄漏

> ID：11386916
> 
> 赞同：0
> 
> 时间：2012-07-08T21:36:07.500
> 
> 标签：c++, valgrind, waf

我正在尝试使用 waf 运行 valgrind。命令是 ./waf --command-template="valgrind %s" --run 程序名。

我收到 valgrind 的内部错误。如果连 valgrind 都失败了，我还能尝试什么？

```
--6446-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting
--6446-- si_code=80;  Faulting address: 0x0;  sp: 0x40b3c9df0

valgrind: the 'impossible' happened:
   Killed by fatal signal
==6446==    at 0x38058236: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x38021ADC: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x38021CCD: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x380902A7: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x3809F7D5: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x3809FA5A: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0x380BBEAD: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==6446==    by 0xDEADBEEFDEADBEEE: ???
==6446==    by 0xDEADBEEFDEADBEEE: ???
==6446==    by 0xDEADBEEFDEADBEEE: ??? 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T03:18:24.710

我已经很久没有尝试过了，但是您可以使用 Boehm GC 来检测 C/C++ 代码中的泄漏。

[http://www.hboehm.info/gc/leak.html](http://www.hboehm.info/gc/leak.html)

# scala - 可变 MultiMap 到不可变 Map

> ID：11386918
> 
> 赞同：4
> 
> 时间：2012-07-08T21:36:17.927
> 
> 标签：scala, map, set, immutability, multimap

我创建一个`MultiMap`

```
val ms =
  new collection.mutable.HashMap[String, collection.mutable.Set[String]]()
  with collection.mutable.MultiMap[String, String] 
```

在填充了条目之后，必须将其传递给需要`Map[String, Set[String]]`. 直接传递`ms`不起作用，并尝试将其转换为不可变映射通过`toMap`

```
ms.toMap[String, Set[String]] 
```

产量

```
Cannot prove that (String, scala.collection.mutable.Set[String]) <:< (String, Set[String]). 
```

这可以在不手动迭代`ms`并将所有条目插入新的不可变映射的情况下解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:59:42.533

看来问题是可变集。所以变成不可变集合是可行的：

```
scala> (ms map { x=> (x._1,x._2.toSet) }).toMap[String, Set[String]]
res5: scala.collection.immutable.Map[String,Set[String]] = Map() 
```

或者遵循 Daniel Sobral 的建议甚至更好：

```
scala> (ms mapValues { _.toSet }).toMap[String, Set[String]]
res7: scala.collection.immutable.Map[String,Set[String]] = Map() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T21:57:20.913

用`mapValues`改变一个`Set`人怎么样？

# django - Solr 找不到资源 stopwords_en.txt

> ID：11386922
> 
> 赞同：10
> 
> 时间：2012-07-08T21:37:06.163
> 
> 标签：django, solr, django-haystack, stop-words

我正在尝试使用 Django-haystack Beta 2.0.0 设置 Solr 3.6.0。

运行`./manage.py build_solr_schema`schema.xml 并将其移动到 conf 目录后，在访问时，我收到一个与[此线程](http://lucene.472066.n3.nabble.com/solr-error-after-relacing-schema-xml-td3940133.html)`http://localhost:8983/solr/admin`中产生的完全一样的错误。

`org.apache.solr.common.SolrException: No cores were created, please check the logs for errors`

`java.lang.RuntimeException: Can't find resource 'stopwords_en.txt' in classpath or 'solr/./conf/', cwd=/home/randall/startupsearch_live/apache-solr-3.6.0/example`

在线程的底部，用户提到必须编辑 schema.xml 以将 stopwords_en.txt 与 /example/solr/conf/ 目录匹配，我通过符号链接和编辑 stopwords.txt 的所有实例都做到了这一点到生成的 schema.xml 文件中的 /solr/conf/stopwords_en.txt。但是，相同的错误仍然存​​在，输出略有不同：

`java.lang.RuntimeException: Can't find resource '/solr/conf/stopwords_en.txt' in classpath or 'solr/./conf/', cwd=/home/randall/startupsearch_live/apache-solr-3.6.0/example`

我必须编辑什么文件来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:07:36.840

它在类路径中找不到`stopwords_en.txt`文件。您应该将`stopwords_en.txt`文件添加到`solr/conf/`目录中。您可以在此处找到有关停用词的更多信息[。](http://wiki.apache.org/solr/LanguageAnalysis#Stopwords)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-14T11:35:40.220

更好的方法是在**schema.xml**中找到所有出现的**stopwords_en.txt**并将它们替换为**lang/stopwords_en.txt**

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T09:35:32.140

您必须将 stopwords_en.txt 放在路径中。创建一个文件名 stopwords_en.txt 并粘贴到 schema.xml 旁边。我希望你知道使用什么停用词过滤器......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-29T13:54:57.600

要结合以上所有三个答案，您需要 stopwords_en.txt 因为它开始测试英语文本

来自[http://wiki.apache.org/solr/LanguageAnalysis#Stopwords](http://wiki.apache.org/solr/LanguageAnalysis#Stopwords)

> 停用词以三种方式影响 Solr：相关性、性能和资源利用率。
> 
> 从相关性的角度来看，这些频率极高的词往往会甩掉评分算法，离开它们也不会得到很好的结果。同时，如果您删除它们，当停用词实际上很重要时，您可能会返回不好的结果。
> 
> 从性能的角度来看，如果保留停用词，某些查询（尤其是短语查询）可能会非常慢。
> 
> 从资源利用率的角度来看，如果保留停用词，则索引比删除它们时大得多。
> 
> 如果您有磁盘空间，您可以做出一种权衡：您可以使用 CommonGramsFilter/CommonGramsQueryFilter 而不是 StopFilter。这解决了相关性和性能问题，但代价是更多的资源利用率，因为它会形成与其相邻单词的二元组停用词。

您需要做的是将位于 solr 目录的 /conf/lang 文件夹中的原始版本复制到 /conf 目录中

```
cp PATH/TO/solr/conf/lang/stopwords_en.txt PATH/TO/solr/conf 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-25T23:45:25.483

在 Solr 5 中，我遇到了同样的错误。我曾使用 Solr zookeeper cli shell 上传我的配置。我从 server/solr/configsets/basic_configs 复制了现有 solr 配置的内容，但不知何故错过了 lang 目录。

conf/lang 目录包含 stopwords_en.txt。****

# php - PHP Mongodb GEO + $OR

> ID：11386923
> 
> 赞同：0
> 
> 时间：2012-07-08T21:37:19.283
> 
> 标签：php, mongodb

```
$range = array('$or' => 
     array(  
         array('loc.lat' => array('$within' => 
         array('$centerSphere' => 
         array( array(floatval( $la ), floatval( $long )), $max  ))),
        'language' => 'de', 'M' => 'Y')
     ),
    array('loc.c' => 'de', array('loc.m' => array('$exists' => false)) ),   
    array('loc.w' => 12, array('loc.m' => array('$exists' => false)))
)); 
```

**我不知道这个查询分隔查询工作正常但 $OR 显示错误数据有什么问题**

```
 array(3) {
  ["$or"]=>
  array(1) {
    [0]=>
    array(3) {
      ["loc.lat"]=>
      array(1) {
        ["$within"]=>
        array(1) {
          ["$centerSphere"]=>
          array(2) {
            [0]=>
            array(2) {
              [0]=>
              float(50.0646501)
              [1]=>
              float(19.9449799)
            }
            [1]=>
            float(0.004390090937598)
          }
        }
      }
      ["language"]=>
      string(2) "pl"
      ["M"]=>
      string(1) "Y"
    }
  }
  [0]=>
  array(2) {
    ["loc.c"]=>
    string(2) "pl"
    [0]=>
    array(1) {
      ["loc.m"]=>
      array(1) {
        ["$exists"]=>
        bool(false)
      }
    }
  }
  [1]=>
  array(2) {
    ["loc.w"]=>
    string(2) "12"
    [0]=>
    array(1) {
      ["loc.m"]=>
      array(1) {
        ["$exists"]=>
        bool(false)
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:01:32.267

正确格式化您的代码（数组），您就会发现问题所在。

暗示：`var_dump($range);`

# jquery - 我可以将侦听器附加到 jQuery 工具中的选项卡吗？

> ID：11386924
> 
> 赞同：0
> 
> 时间：2012-07-08T21:37:21.250
> 
> 标签：jquery, jquery-tools

当用户单击 jQuery 工具选项卡实现中的一个选项卡时，我想运行一些代码。这可能吗？基于对源的初步了解，我持怀疑态度，但欢迎提出想法。我正在考虑做一个稍微不同版本的幻灯片效果，除了基本的幻灯片内容之外，它还可以让我打电话。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:57:45.827

当然可以，

```
$(function() {
    // setup ul.tabs to work as tabs for each div directly under div.panes
    $(".tabs li a").click(function() {
       alert($(this).html() + " clicked");
        return false;
    });
    $("ul.tabs").tabs("div.panes > div");
}); 
```

[演示](http://jsfiddle.net/Jrhgz/)

# javascript - Ajax 如何调用多组内容？

> ID：11386933
> 
> 赞同：0
> 
> 时间：2012-07-08T21:38:19.797
> 
> 标签：javascript, jquery, ajax

关于如何进行 Ajax 调用以及在向下滚动时为一组组件（例如 www.jwt.com 主页上的那些框）提取内容的任何建议？我正在使用 jQuery Ajax。

我发布的另一个相关主题可以在以下位置找到：

[他们如何填充此网站上的框？](https://stackoverflow.com/questions/11379208/how-do-they-populate-the-boxes-on-this-website)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:44:02.870

[您可以使用 jQuery masonry](http://masonry.desandro.com/)插件来实现这一点。特别看无限滚动演示：

[http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

在 AJAX 调用方面，看起来 jwt.com 对每组内容使用单个 AJAX 调用（即，每个 AJAX 请求/向下滚动返回多个内容框），因此在 AJAX 方面并没有什么特别之处。wizadry 在布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:51:24.770

当用户滚动到页面的当前限制或您希望附加内容的内容部分的限制时触发 AJAX。让 AJAX 完成将返回的内容附加到内容部分的末尾。

# php - 升级到 SimplePie 1.3，文档还有一些不足之处，另外还破坏了我的新闻聚合器

> ID：11386938
> 
> 赞同：0
> 
> 时间：2012-07-08T21:39:00.367
> 
> 标签：php, simplepie

我单击了大下载按钮并上传了 /library 和 autoloader.php，但这不足以切换到新的代码库。我之前从 simplepie.inc 重命名了我的旧安装 simplepie.old，但是没有 simplepie.inc 文件，我的聚合器无法运行。

我重新阅读了文档并切换到使用我重命名为 simplepie.inc 的库的一个文件版本

这允许我的聚合器运行，但我的提要现在是空白的......我的新闻聚合器基于 News Blocks 2 演示。

[微型绘画新闻聚合器](http://news.muschamp.ca)

重命名后，我对 SimplePie 的其他用途似乎可以正常工作，但我不确定 autoloader.php 应该做什么。该文档仍然引用 simplepie.inc

```
require_once('../simplepie.inc'); 
```

我的新闻聚合器中被破坏的部分是我的提要，我将不得不看看我调用的哪些方法不再存在或已被重命名。但是升级/文档还有一些不足之处。我应该如何使用 autoloader.php？还是我最好使用一个文件版本，因为这是所有现有代码所期望的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:07:41.570

该页面的哪一部分具体被破坏了？似乎它对我有用。

![页面截图](../Images/46c78b37020996722dd9bda8ca8ffd3a.png)

关于文档，对此表示歉意，它尚未完全更新。本质上，您看到的任何地方都将`simplepie.inc`其替换为`autoloader.php`.

# cakephp - 如何将用户登录路由到他们的帐户？

> ID：11386941
> 
> 赞同：2
> 
> 时间：2012-07-08T21:39:35.490
> 
> 标签：cakephp, authentication, user-accounts

我需要被指出正确的方向。我正在编写一个简单的应用程序，用户可以在其中登录并查看他们的任务列表。我希望应用程序安全。我只能对用户进行身份验证以访问整个站点。显然这不是我想要的。我希望他们只能访问自己的帐户。有什么好的网站可以阅读这个吗？我正在学习 v2.x 。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:04:59.500

除了这本书，我想不出任何网站。这就是我实施我的方式。我在应用控制器的 beforeRender 回调中设置了登录用户。这样它就可以在所有控制器中使用。

然后我在用户控制器中有一个名为仪表板的功能

```
function dashboard($userId = NULL) {} 
```

如果用户 ID 与登录用户中的用户 ID 匹配，或者在我的情况下，用户是管理员，则继续，否则重定向用户并显示不允许他们使用的消息。

所有这一切都是在您仅使用 Auth 组件的情况下发生的。如果您也想使用 ACL 组件，则必须检查用户是否也被允许访问该页面。

来源 [http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:57:22.930

你的问题很笼统，但这里有一些信息可能会有所帮助。

关于列出和查看数据，您可以访问已登录的用户 ID。因此，在整个应用程序中，在所有方法中，只需获取与登录用户 ID 相关的数据。

关于编辑/删除数据，您可能需要将登录用户的 ID 与他们尝试编辑或删除的记录的 ID 进行核对。

这是我挖出的一些旧的 CakePHP 1.3（即不是 2.x）代码。此方法在我的 AppController 中，当用户尝试编辑/删除记录时调用，以确保该记录属于他们的用户帐户。

```
function checkUserID($pUserId) {
    // This is called for methods when a user can only access it for their own user account - eg, a user can call 'edit', but only on their own records.    
    if ($pUserId != $this->Auth->user('id')){
        $this->Session->setFlash(__('You are not authorized to access that location', true));
        $this->redirect($this->referer());
    }
} 
```

举例说明如何使用此方法，当用户尝试删除该应用程序中的评论时，我执行以下操作：

```
$commentToDelete = $this->Comment->read(null, $id); // get the comment they are trying to delete
$this->checkUserID($commentToDelete['Comment']['user_id']); // check that it is their own comment
// If they pass the above test, then continue and delete the comment.
// If not, they will have already been redirected by the checkUserID method 
```

如果您有任何问题，请告诉我。

编辑：回应尼克的评论如下：

我以前使用过 isAuthorized() ，但在我上面给出的示例中看不到它是如何工作的。如果用户删除评论，您必须这样做：

```
$this->checkUserID($commentToDelete['Comment']['user_id']); // check that it is their own comment 
```

但如果他们要删除一个小部件，它必须是：

```
$this->checkUserID($widgetToDelete['Widget']['user_id']); // check that it is their own widget 
```

情况可能会更复杂，例如，他们正在编辑属于“图库”记录的“照片”记录，该记录包含他们的 user_id，因此“照片”记录本身没有“用户 ID”字段.

我看不出你如何能够在 isAuthorized() 中优雅地处理这些可能的情况。我错过了什么吗？我想问题是，在 isAuthorized() 中，您可以获取登录用户的 ID，但是您如何知道将其与哪个其他 ID 进行比较，以确保他们正在编辑或删除的记录属于他们？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:19:10.947

我不能 100% 确定您要问什么，但据我了解，您需要您的用户能够访问某种仅与他们的帐户相关的控制面板或界面。为了实现这一目标，我将采取以下措施：

*   在控制器中设置一个不带参数的函数
*   检查以确保用户已登录
*   如果他们在使用用户的 id 字段作为条件时将您需要的数据设置到视图中。使用此方法，用户无法指定他们尝试访问的数据，这取决于控制器和模型中的逻辑
*   如果不是，则将它们重定向到其他地方

如果您编辑您的问题并提供有关您要完成的工作的更多信息，我可以给您一个示例或进一步解释。

# c++ - sizeof 和 alignof 有什么区别？

> ID：11386946
> 
> 赞同：63
> 
> 时间：2012-07-08T21:40:04.650
> 
> 标签：c++, c++11, sizeof, alignof

sizeof 和 alignof 有什么区别？

```
#include <iostream>

#define SIZEOF_ALIGNOF(T) std::cout<< sizeof(T) << '/' << alignof(T) << std::endl

int main(int, char**)
{
        SIZEOF_ALIGNOF(unsigned char);
        SIZEOF_ALIGNOF(char);
        SIZEOF_ALIGNOF(unsigned short int);
        SIZEOF_ALIGNOF(short int);
        SIZEOF_ALIGNOF(unsigned int);
        SIZEOF_ALIGNOF(int);
        SIZEOF_ALIGNOF(float);
        SIZEOF_ALIGNOF(unsigned long int);
        SIZEOF_ALIGNOF(long int);
        SIZEOF_ALIGNOF(unsigned long long int);
        SIZEOF_ALIGNOF(long long int);
        SIZEOF_ALIGNOF(double);
} 
```

将输出

1/1 1/1 2/2 2/2 4/4 4/4 4/4 4/4 4/4 8/8 8/8 8/8

我想我不明白对齐是什么......？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-08T21:48:52.003

好吧，“内存”基本上是一个巨大的字节数组。然而，大多数像整数这样的较大的东西需要超过 1 个字节来存储它们——例如，一个 32 位的值将使用 4 个连续字节的内存。

现在，您计算机中的内存模块通常不是“字节”；它们还以“并行”的几个字节组织，例如 4 个字节的块。

对于 CPU，在读取整数之类的内容时，不“跨越”这样的块边界会更容易 = 更高效 = 更好的性能：

```
memory byte    0 1 2 3     4 5 6 7       8 9 10 11
 integer       goooood
                   baaaaaaaaad 
```

这就是“对齐”的意思：对齐 4 意味着这种类型的数据应该（或必须，取决于 CPU）从 4 的倍数的地址开始存储。

您观察到 sizeof==alignof 不正确；尝试结构。结构也将对齐（因为它们的各个成员需要以正确的地址结束），但它们的大小会大得多。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-12-01T11:14:13.883

对于提供的答案，似乎对*对齐*实际上是什么感到有些困惑。混淆可能是因为有两种对齐方式。

**1\. 会员对齐**

这是一种定性度量，它说明对于结构/类类型中成员*的*特定排序，实例的字节数有多大。一般来说，如果成员在结构中按字节大小降序排列（即最大的在前，最小的成员在后），编译器可以压缩结构/类实例。考虑：

```
struct A
{
  char c; float f; short s;
};

struct B
{
  float f; short s; char c;
}; 
```

两种结构都包含完全相同的信息。为了这个例子；float 类型占用 4 个字节，short 类型占用 2 个字节，字符占用 1 个字节。但是，第一个结构 A 具有随机顺序的成员，而第二个结构 B 根据其字节大小对成员进行排序（这在某些架构上可能会有所不同，我假设 x86 intel CPU 架构在此示例中具有 4 字节对齐）。现在考虑结构的大小：

```
printf("size of A: %d", sizeof (A)); // size of A: 12;
printf("size of B: %d", sizeof (B)); // size of B: 8; 
```

如果您希望大小为 7 个字节，您会假设成员使用 1 字节对齐方式*打包到结构中。*虽然一些编译器允许这样做，但由于历史原因（大多数 CPU 使用 DWORD（双字）或 QWORD（四字）通用寄存器），通常大多数编译器使用 4 字节甚至 8 字节对齐。

有 2 种填充机制在工作以实现打包。

1.  首先，如果结果字节大小小于或等于字节对齐，则每个字节大小小于字节对齐的成员将与下一个成员“合并”。在结构B中，成员s和c可以这样合并；它们的组合大小是 s 的 2 个字节 + c 的 1 个字节 == 3 个字节 <= 4 字节对齐。对于结构 A，不会发生这种合并，并且每个成员在结构的打包中有效地消耗了 4 个字节。

2.  再次填充结构的总大小，以便下一个结构可以从对齐边界开始。在示例 B 中，总字节数为 7。下一个 4 字节边界位于字节 8，因此该结构用 1 个字节填充，以允许数组分配作为实例的紧密序列。

请注意，Visual C++ / GCC 允许 1 个字节、2 个和 2 个字节的更高倍数的不同对齐方式。了解这不利于您的编译器为您的架构生成最佳代码的能力。实际上，在以下示例中，每个字节都将作为单个字节读取，每次读取操作都使用一条单字节指令。实际上，硬件仍然会获取包含读取到缓存中的每个字节的整个内存行，并执行该指令 4 次，即使这 4 个字节位于同一个 DWORD 中并且可以在 1 条指令中加载到 CPU 寄存器中。

```
#pragma pack(push,1)
struct Bad
{
  char a,b,c,d;
};
#pragma pack(pop) 
```

**2.分配对齐**

这与上一节中解释的第二种填充机制密切相关，但是，*分配对齐*可以在*malloc() / memalloc()*分配函数的变体中指定，例如*std::aligned_alloc()*。因此，与结构/对象类型的字节对齐所建议的对齐边界不同（通常为 2 的更高倍数）对齐边界分配对象是可能的。

```
size_t blockAlignment = 4*1024;  // 4K page block alignment
void* block = std::aligned_alloc(blockAlignment, sizeof(T) * count); 
```

该代码会将类型 T 的计数实例块放置在以 4096 的倍数结尾的地址上。

使用这种分配对齐的原因再次纯粹是架构性的。例如，从页面对齐地址读取和写入块更快，因为地址范围非常适合缓存层。跨越不同“页面”的范围会在跨越页面边界时破坏缓存。不同的媒体（总线架构）具有不同的访问模式，并且可能受益于不同的对齐方式。通常，4、16、32 和 64 K 页面大小的对齐并不少见。

请注意，语言版本和平台通常会提供这种对齐分配功能的特定变体。例如，Unix/Linux 兼容的*posix_memalign()*函数通过 ptr 参数返回内存，并在失败的情况下返回非零错误值。

*   int posix_memalign(void **mempr, size_t 对齐, size_t 大小); [// POSIX(Linux/UX)](http://man7.org/linux/man-pages/man3/posix_memalign.3.html)
*   void *aligned_alloc(size_t 对齐，size_t 大小); [// C++11](https://en.cppreference.com/w/c/memory/aligned_alloc)
*   void *std::aligned_alloc(size_t 对齐，size_t 大小); [// c++17](https://en.cppreference.com/w/cpp/memory/c/aligned_alloc)
*   void *aligned_malloc(size_t 大小, size_t 对齐); [微软VS2019](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/aligned-malloc?view=vs-2019)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-08T21:45:31.110

这两个运营商做着根本不同的事情。`sizeof`给出一个类型的大小（它需要多少内存），而`alignof`给出一个类型必须对齐的字节数。碰巧您测试的基元具有与其大小相同的对齐要求（如果您考虑一下，这是有道理的）。

想想如果你有一个结构会发生什么：

```
struct Foo {
     int a;
     float b;
     char c;
}; 
```

`alignof(Foo)`将返回 4。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-12-11T12:52:41.733

老问题（虽然没有标记为已回答..），但认为除了 Christian Stieber 的回答之外，这个例子使差异更加明确。此外，Meluha 的答案包含一个错误，因为 sizeof(S) 输出是 16 而不是 12。

```
// c has to occupy 8 bytes so that d (whose size is 8) starts on a 8 bytes boundary
//            | 8 bytes |  | 8 bytes  |    | 8 bytes |
struct Bad  {   char c;      double d;       int i;     }; 
cout << alignof(Bad) << " " << sizeof(Bad) << endl;   // 8 24

//             | 8 bytes |   |   8 bytes    |    
struct Good {   double d;     int i; char c;          };
cout << alignof(Good) << " " << sizeof(Good) << endl; // 8 16 
```

它还表明最好按大小对成员进行排序，最大的在前（在这种情况下为双倍），因为其他成员受该成员的约束。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-28T07:24:21.093

alignof 值与基本类型的 sizeof 值相同。

不同之处在于使用了定义的数据类型，例如使用 struct；例如

```
typedef struct { int a; double b; } S;
//cout<<alignof(s);                              outputp: 8;
//cout<<sizeof(S);                               output: 12; 
```

因此 sizeof 值是给定数据类型所需的总大小；而alignof值是结构中最大元素的对齐要求。

alignof 的使用：在特定对齐边界上分配内存。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-27T17:46:49.177

> `sizeof`和有什么区别`alignof`？

两者都是运营商。两者都返回一种`size_t`.

`sizeof`是对象的“字节”大小 - 对其进行编码所需的内存空间。

`alignof`是对象的“字节”中的地址对齐要求。值 1 表示没有对齐限制。2 意味着地址应该是偶数地址。4 意味着地址应该是四元地址。等等

当尝试不满足对齐要求的对象引用时，结果是*未定义的行为*。
例子：
。访问可能有效，只是速度较慢。
. 访问尝试可能会终止程序。

```
// Assume alignof(int) --> 2
char a[4];   // It is not known that `a` begins on an odd or even address
int *p = a;  // conversion may fail
int d = *p;  // *p is UB. 
```

OP 代码的示例扩展和输出。

```
 SIZEOF_ALIGNOF(double);
  SIZEOF_ALIGNOF(complex double);
  SIZEOF_ALIGNOF(div_t);
  SIZEOF_ALIGNOF(max_align_t);

8/8
16/8
8/4
32/16 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-08T21:43:16.273

The [`sizeof` operator](http://en.cppreference.com/w/cpp/language/sizeof) gives you the size in bytes of an actual type or instance of a type.

The [`alignof` operator](http://en.cppreference.com/w/cpp/language/alignof) gives you the alignment in bytes required for any instance of the given type.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-26T11:29:57.100

数据在内存中按特定顺序排列，以使 CPU 更容易访问它。

*   `alignof`通知对象在内存中的**位置**
*   `sizeof`表示物体有**多大**，考虑到它的部件所在的**位置**

基本类型具有相同的结果`alignof`，`sizeof`因为它们只有它们自己的一部分：例如。`short`占用 2 个字节并从 2 的地址倍数开始（对 CPU 有利）。对于用户定义的数据类型，请查看它们的部分：

```
class Foo {
  char c1; // first member (imagine adr=0, which is multiple of 1, CPU is happy)
  int i; // adr=1, but adr has to be a multiple of 4, so reserve helper bytes for CPU (padding) before `i` = 3bytes. **so adr=4**
  short s; // adr=8 (adr of `i` + its size), 8 % 2 == 0, good
  double d; // adr=10 (adr of `s` + its size), 10 % 8 != 0, need 6 more, **so adr=16**
  char c2; // adr=24 (adr of `d` + its size), 24 % 1 == 0, ok

  // and surprise, after c2 padding is also needed! why?
  // imagine you have an array (which is sequentially data in memory) of 2 elements,
  // what is adr `d` of the second element? (let me use index=2 here)  
  // arr[2].c1 adr=25, arr[2].i adr=29 (?do you remember about padding=3bytes?, and this field already feels bad), ..., arr[2].d adr=31
  // must be padding after `c2` to satisfy everyone
  // calc p (padding), where (adr`c2` + size`c2` + p) % max(alignof of every member type) = (24+1+p) % 8 == 0; p=7 (minimum value that satisfies)   
  // YEAH! Now all members of all elements will be aligned!
}; 
```

如上所述`alignof(type)`是 CPU 将数据放在哪里的偏好，在示例中：`alignof(Foo)`== `alignof(double)`=8 [否则有些成员会伤心]。
并且`sizeof(Foo)`==（每个成员大小的总和 + 填充）=32
*ps。允许的简化有利于理解这个想法:)*

# unity3d - BCE0019：“位置”不是“对象”的成员。

> ID：11386948
> 
> 赞同：-1
> 
> 时间：2012-07-08T21:41:11.113
> 
> 标签：unity3d, unityscript

那是 Unity3D js 脚本错误，在 pc 上它工作正常，但如果我尝试将平台切换到 android...

```
 var RelativeWaypointPosition : Vector3 = transform.InverseTransformPoint( Vector3( 
                                            waypoints[currentWaypoint].position.x, 
                                            transform.position.y, 
                                            waypoints[currentWaypoint].position.z ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:54:06.347

检查[此线程](http://forum.unity3d.com/threads/120369-please-have-a-look-and-tell-me-what-seems-to-be-the-problem-here)是否存在类似问题 - 以及解决问题的可能方法。

简而言之，您的`waypoints`变量可能只是`Array`类型，而实际上应该是`Transform[]`. 所以相应地调整分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:53:24.260

修复错误在“var RelativeWaypointPosition”之前添加此代码

```
 var waypoints : Transform[];
waypoints = waypointContainer.GetComponentsInChildren.<Transform>(); 
```

# android - 具有会员设计的移动应用程序

> ID：11386949
> 
> 赞同：0
> 
> 时间：2012-07-08T21:41:24.203
> 
> 标签：android, iphone, cocoa, mobile

我为一个数据库制作了一个 json api，其中包含一些产品，以及一些可以添加和搜索这些产品的用户。所以用户有一个登录名/密码，使用这些凭据我可以进行 POST api 调用。

我现在想制作一个 iPhone / android 应用程序，我想知道如何处理这些发布请求：第一次我会询问用户凭据，然后我将能够执行一个 POST 请求。但是我在哪里存储这些凭据？在手机上？是否应该在下一次应用程序启动时保留它，登录仍然存在吗？

欢迎任何有用的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:03:40.440

我根本不会存储纯文本或加密的登录凭据，而是实现一个 OAuth 样式的登录过程，其中用户登录一次，服务器对其进行验证并生成一个相对较长的随机字符串作为身份验证令牌（与通常的用户密码相比）。

优点是这个随机字符串是乱码。如果该令牌会泄露给第三方，那么他们基本上只有您的服务的密钥，而不是可以授予访问其他服务的通用密钥（因为人们通常懒得记住不同地方的不同密码，并且可以被剥削）。

所以基本上你会帮助你的用户并提高他们的安全性。

在 Android 的情况下，该令牌可以存储在您应用的私有存储中，这可以被认为是安全的，因为其他应用没有访问权限（不考虑 root 或受损设备，但这不应该是您的问题）。

为了与您的服务器进行身份验证，您只需将该令牌作为附加标头值添加到您的应用程序的 HTTP 请求中。

# android - AlphaAnimation 不起作用

> ID：11386953
> 
> 赞同：37
> 
> 时间：2012-07-08T21:42:30.967
> 
> 标签：android, animation, alpha

我一直在寻找解决我的问题的方法。但我的代码似乎没问题。

我将尝试解释：我的布局定义中有一个带有 android:alpha="0" 的 TextView。我想（当单击图像时）显示带有 AlphaAnimation 的 TextView，从 0.0f 到 1.0f。

我的问题是，当我单击图像时，什么也没有发生。但奇怪的是，如果我在布局定义中将它的 alpha 设置为 1，然后单击图像，我可以看到动画（alpha 1 -> alpha 0 -> alpha 1）。

我究竟做错了什么？

我的代码：

```
TextView tv = (TextView) findViewById(R.id.number);

AlphaAnimation animation1 = new AlphaAnimation(0.0f, 1.0f);
animation1.setDuration(1000);
animation1.setFillAfter(true);
tv.startAnimation(animation1); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-08T21:57:40.960

问题出在`android:alpha="0"`. 此属性设置 View [http://developer.android.com/reference/android/view/View.html#attr_android:alpha的透明度](http://developer.android.com/reference/android/view/View.html#attr_android:alpha)

当 alpha 属性等于 0 时，动画将透明度从 更改`0*0.0f=0`为`0*1.0f=0`。当 alpha 属性设置为 1 时，动画将透明度从 更改`1*0.0f=0`为`1*1.0f=1`。这就是为什么在第一种情况下您看不到文本，而在第二种情况下一切都按预期工作。

为了使事情正常工作，您必须在布局 xml 中将可见性属性设置为不可见。在开始 alpha 动画调用之前`tv.setVisibility(View.VISIBLE);`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-04-05T08:53:02.917

[此](https://stackoverflow.com/a/18954771/683763)答案中提供了更简单的方法：

```
tv.animate().alpha(1).setDuration(1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T09:53:56.887

实际上，android 有两个用于视图的 alpha 属性

```
 /**
     * The opacity of the View. This is a value from 0 to 1, where 0 means
     * completely transparent and 1 means completely opaque.
     */
    @ViewDebug.ExportedProperty
    float mAlpha = 1f;

    /**
     * The opacity of the view as manipulated by the Fade transition. This is a hidden
     * property only used by transitions, which is composited with the other alpha
     * values to calculate the final visual alpha value.
     */
    float mTransitionAlpha = 1f;

/**
 * Calculates the visual alpha of this view, which is a combination of the actual
 * alpha value and the transitionAlpha value (if set).
 */
private float getFinalAlpha() {
    if (mTransformationInfo != null) {
        return mTransformationInfo.mAlpha * mTransformationInfo.mTransitionAlpha;
    }
    return 1;
} 
```

视图最终 alpha 是两个 alpha 的乘积

[View#setAlpha(float)](https://developer.android.com/reference/android/view/View.html#setAlpha(float)) & [View#animate()](https://developer.android.com/reference/android/view/View.html#animate()) & [android:alpha](https://developer.android.com/reference/android/view/View.html#attr_android:alpha) -> mAlpha

[AlphaAnimation](https://developer.android.com/reference/android/view/animation/AlphaAnimation) -> mTransitionAlpha

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T08:47:44.560

将`fillBefore`动画的属性设置为 true 为我解决了这个问题。

```
TextView tv = (TextView) findViewById(R.id.number);

AlphaAnimation animation1 = new AlphaAnimation(0.0f, 1.0f);
animation1.setDuration(1000);
animation1.setFillBefore(true);
tv.startAnimation(animation1); 
```

`FillBefore`在开始动画之前设置转换。

# c# - 如何将变量分配给循环中的按钮以在点击时使用这些变量？

> ID：11386954
> 
> 赞同：0
> 
> 时间：2012-07-08T21:42:35.713
> 
> 标签：c#, asp.net, loops, button, variable-assignment

例如，在下面的循环中，我想分配按钮自定义变量，以确定使用 jquery 在单击事件上单击了哪个按钮

这里的代码：

```
<% for (int i = 0; i < dsProjeler.Tables[0].Rows.Count; i++)
   {
       lblProjeName.Text = string.Format("<a target=\"_blank\" href=\""
           + dsProjeler.Tables[0].Rows[i]["link"].ToString() + "\">{0}</a>",
           dsProjeler.Tables[0].Rows[i]["baslik"].ToString());
%>
<tr>
    <td>
        <asp:Literal ID="lblProjeName" runat="server"></asp:Literal>
    </td>
    <td>
        <asp:Button CssClass="sinifKatil" runat="server" Text="Katılmak İstiyorum" OnClick="btnKatil_Click" />
        <asp:Button CssClass="sinifAyril" runat="server" Text="Ayrılmak İstiyorum" OnClick="btnAyril_Click" />
    </td>
</tr>
<% } %> 
```

所以真正的问题是将自定义变量分配给`<asp:Button`循环中的对象，以便在点击事件中使用这些变量。可以读取的变量。

ASP.net 4.0、C# 4.0、HTML、javascript、Jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:54:38.440

考虑使用 Repeater 控件而不是 scriplet，并将自定义变量传递给*sinifAyril*和*sinifAyril*按钮的 CommandArgument 属性。这是一个如何在点击处理程序中检索变量的示例

```
 protected void btnKatil_Click(object sender, EventArgs e)
 {
      string value = ((Button) sender).CommandArgument;
      Response.Write(value);
 } 
```

# shopify - since_id 是订单计数支持的参数吗？

> ID：11386957
> 
> 赞同：0
> 
> 时间：2012-07-08T21:43:12.300
> 
> 标签：shopify

要接收订单列表，您可以传递来限制结果的众多参数之一是`since_id`.

我注意到用于接收订单计数的[订单 API 文档](http://api.shopify.com/order.html)列出了许多相同的过滤器参数，例如`created_at_min`和 co。

`since_id`未列为可用 URL 参数之一。但是，至少使用`shopify_api`gem，传递`since_id`按预期工作：

```
ShopifyAPI::Order.count(since_id: 1234) 
```

这是文档中的遗漏，还是不受支持的功能？

干杯，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:41:52.380

它**被**列为可用参数:)

更新：这是一个截图：![在此处输入图像描述](../Images/13ccb9ff0a10127059153ff63c7e54f6.png)

# scala - scala中的提升功能

> ID：11386963
> 
> 赞同：9
> 
> 时间：2012-07-08T21:43:51.387
> 
> 标签：scala

我想用隐式定义提升。假设我们有一个函数A => B，我想定义如何将它提升到Maybe，即Maybe[A] => Maybe[B]。

这可以通过隐式转换简单地完成。但是，如果我想对具有两个或更多参数的函数做同样的事情，我就有问题了。我知道的唯一解决方案是复制代码。

我想为具有任意数量的参数的任意函数实现这种提升而不重复。这在 Scala 中可行吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-08T22:11:46.577

如果`F`有可用的仿函数实例，则可以将任何函数提升`A => B`到`F[A] => F[B]`.

如果`F`有可用的应用函子实例，则可以将任何函数提升`A => B => C => .. => Z`到`F[A] => F[B] => F[C] => .. => F[Z]`. 本质上，应用函子是函子对任意数量的推广。

[您可以在此处](http://en.wikibooks.org/wiki/Haskell/Applicative_Functors)和[此处](http://learnyouahaskell.com/functors-applicative-functors-and-monoids)了解函子和应用函子。还有一篇[精彩](http://www.youtube.com/watch?v=IMGCDph1fNY)的演讲涵盖了这些想法。

Scalaz 库提供了这些抽象（以及更多！）。

```
import scalaz._
import Scalaz._

scala> val foo: Int => String = _.toString
foo: Int => String = <function1>

scala> foo.lift[Option]
res0: Option[Int] => Option[String] = <function1>

scala> res0(Some(3))
res1: Option[String] = Some(3)

scala> res0(None)
res2: Option[String] = None

scala> val add: (Int, Int) => Int = _ + _
add: (Int, Int) => Int = <function2>

scala> add.lift[Option]
res3: (Option[Int], Option[Int]) => Option[Int] = <function2>

scala> res3(Some(2), Some(1))
res4: Option[Int] = Some(3)

scala> res3(Some(2), None)
res5: Option[Int] = None

scala> res3(None, None)
res6: Option[Int] = None 
```

Scalaz pimps`lift`方法等`Function2`，`Function3`因为语法上较重的 curried 函数使用频率较低。在幕后，提升发生在`Function1`s （即柯里化函数）中。

您可能还想查看[Scalaz 源代码](https://github.com/scalaz/scalaz/)。

# lua - 在 Corona SDK 中限制触摸事件

> ID：11386964
> 
> 赞同：0
> 
> 时间：2012-07-08T21:43:55.073
> 
> 标签：lua, sprite, coronasdk

这里有点绝望。我正在尝试在 Corona SDK 中制作跑步游戏，但无法从跳跃动画过渡到跑步（跳跃后返回）。

```
local function touched(event)     
if(event.phase == "began")then

char.accel = monster.accel + 20
char:prepare("jumping")
char:play()
else

char:prepare("running")
char:play()     

end     
end 
```

在这段代码中，如果玩家不断触摸屏幕，跳跃的动画在地面上不断重复，有没有办法及时限制触摸事件？

还尝试通过另一种构造实现动画：

```
 if(onGround) then
           if(wasOnGround) then

           else
                monster:prepare("running")
                monster:play()
           end
      else
           monster:prepare("jumping")
           monster:play()
      end 
```

但是由于某种原因，跳转动画只显示第一帧。

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:10:42.863

您在这里有两个可行的选择；

1）如果跳跃总是要花费相同的时间，您可以使用计时器来防止用户再次跳跃，直到您知道他们将着陆。（计时器可以更改变量，甚至删除并重新添加事件侦听器，两者都可以。）

或者

2) 与您在上面所做的类似 - 在播放器上添加一个碰撞侦听器，以便当它撞到地面时设置一个标志，例如 player.canJump 设置为 true 并在您启动时立即将其设置为 false跳跃动画。当角色再次撞击地面时，将其设置回 true 并再次播放运行动画。

# ios - iPad 应用程序 - 如何使用手指滑动来终止服务器调用

> ID：11386966
> 
> 赞同：0
> 
> 时间：2012-07-08T21:44:02.857
> 
> 标签：ios, multithreading, ipad, uiscrollview, lazy-loading

我们正在构建一个图像目录 iPad 应用程序。我们使用 2 种类型的图像：低分辨率缩略图（250 * 500 像素）和高分辨率完整图像（2048X2048 像素）。高分辨率图像大小为 200kb 到 10mb。我们为下载高分辨率图像实现了延迟加载和多线程。

作为一个图像目录应用程序，总图像可以在 200 到 500 个图像之间。此应用程序具有离线支持，因此我们将图像存储在应用程序文档目录中，以便稍后显示所有下载的图像。有图像按字母排序的功能，所以我们必须通过 UIScrollView 在屏幕上同时显示所有低分辨率图像。

当调用新的高分辨率图像时，每次第一次打开图像时，图像通常需要 3-8 秒。这几乎冻结了应用程序，用户必须等待 3-8 秒才能执行其他任何操作。

我的开发人员几乎说过，没有简单的方法可以让用户停止当前操作并移动到下一个图像，直到完整的当前图像下载到内存。

专家们你认为我们应该能够以这样一种方式实现代码，即当下载高分辨率图像时，任何用户操作都会超越当前的高分辨率图像下载。例如，手指滑动将启用标题栏（包含后退按钮、设置按钮）并将用户带到下一个图像？

感谢您的及时回复家伙。但是正如我们在问题中提到的，我们使用了延迟加载/多线程，这意味着我们使用了 NSURLConnection 异步请求。即使不是文本数据，我们也没有使用主线程进行下载。

我们已经创建了一个带有 NSURLConnection 和委托的图像下载器类。我们已经编写了自定义协议，以便在每个图像请求成功/失败后向相应的控制器发送通知。

```
@protocol TImageDownloaderDelegate

-(void)imageDownloadedSuccessfully:(ImageDownloader *)inDownloader;
-(void)prImageDownloadedSuccessfully :(ImageDownloader *)inDownloader;

@end 
```

问题是，我们使用 UIScrollView 在同一个屏幕上有多个（超过 160 个）图像，并且对于每个图像，我们都有高分辨率图像（大小在 200KB 到 10 MB 之间），我们正在下载高分辨率图像，并且在下载每个图像之后我们令人耳目一新的景色。所以有时滚动在一次又一次地渲染视图时不是很流畅。所以我们正在寻找一些方法来提高应用程序的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:51:37.417

绝对有办法做到这一点（实际上，可能有几种方法）。我的首选方法是使用[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)实例来管理较大图像的下载 - 您可以创建与图像的连接，然后在用户请求或需要移动到另一个图像时取消它。

更重要的是，当您下载图像时，您的应用程序*不应冻结。*您需要让您的开发人员将这些下载放在后台线程上，这样它们就不会干扰您的用户界面的正常性能。如果您的应用程序由于网络连接时间过长而没有响应，它甚至可能被操作系统终止。有许多在线指南用于在 iOS 上为 NSURLConnection 实例提供后台或一般线程 - 我强烈建议您遵循其中之一。

**编辑：**借助 AmitS 提供的其他信息，我还想说要处理您对相关视图的延迟重新渲染。您可能会考虑批量下载并仅在下载用户可见区域中的所有图像时重新渲染，或者不在一个屏幕上渲染 160+ 高分辨率图像 - 在那个尺寸下，缩略图可能就足够了，您可以推迟渲染高分辨率-res 图像，直到用户放大它或选择它以填满屏幕。仔细考虑你是否真的需要在同一个视图上渲染的 160 张高分辨率图像；您在渲染如此多的图像时所受到的性能影响可能会抵消用户从一开始就拥有高分辨率图像的任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:57:42.957

原则上这是可能的，尽管应用程序可能不会立即响应取消手势或点击。您可以使用, 并按照[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)`NSOperation`所述取消长时间运行的操作（搜索“响应取消命令”）。

此外，正如@Tim 在他的回答中所说，您的应用程序不应在加载大图像时冻结。如果发生这种情况，则意味着图像下载执行错误（它可能在主线程上执行，这是一个根本错误）。

# c# - 锁定自定义按钮大小

> ID：11386971
> 
> 赞同：0
> 
> 时间：2012-07-08T21:44:31.923
> 
> 标签：c#, winforms, user-controls

我正在开车`Button`，我希望这个新的自定义按钮始终为 20 x 20 像素。我在默认值和我自己实现的构造函数中都写了`Width`和`Height`20，但是如果我将控件从工具箱拖到设计器中，或者我以编程方式将控件添加到表单中，这不会改变任何东西。

```
 public partial class PinButton : Button
{
    public PinButtonData Data { get; set; }

    public PinButton()
    {
        InitializeComponent();

        Height = 20;
        Width = 20;
    }

    public PinButton(PinButtonData data)
    {
        InitializeComponent();

        Height = 20;
        Width = 20;

        Data = data;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:47:20.210

您应该重写该方法并作为基调用中的高度和宽度参数`SetBounds`传递。`20`

# firefox - 我的网页与 Firefox 和 Chrome 不一致

> ID：11386973
> 
> 赞同：0
> 
> 时间：2012-07-08T21:45:00.893
> 
> 标签：firefox, google-chrome

我做了一个网站。在整个开发和测试阶段的20多天里，它运行良好，在此期间我一直在firefox中查看页面，它们都很好。但是今天我突然遇到了firefox的问题。表格数据没有居中，边框也没有像以前那样圆润。但在谷歌浏览器中都很好。你可以查看截图： [Mozilla Firefox](http://imageshack.us/photo/my-images/13/screenshot002bl.jpg/)（以前不是这样！） [谷歌浏览器](http://imageshack.us/photo/my-images/707/screenshot001gtd.jpg/) 请告诉我如何解决它..我已经清除了 Firefox 的所有缓存和会话，但仍然是一样的

**UPD** 好的，所以我也提供了代码：

表格的 PHP 代码（仅片段）

```
$result = mysql_query("SELECT username,rating,contests,rank from users order by (rating) desc limit 10");
echo '<table id="problems">
<thead><tr> 
<th colspan="3" align="center" ><font color="red" ><h2>Top Rated</h2></font></th>
</tr></thead>
<tr>
<th>#</th>
<th>Username</th>
<th >Rating </th>
</tr>';
while($row = mysql_fetch_array($result))
{   
    require_once("color_gen.php");
    require_once("rankings.php");
    ranker_rater();
    $color=ColorGen($row['rating'],$row['contests']);
    $uname=$row['username'];
    $rank=$row['rank'];
    echo "<tr>";
    echo "<td>" . $rank. "</td>";
    echo '<td><a href="profile.php?search=' . $uname . '" class="a"><font color="'.$color.'">'.$uname.'</font></a></td>';
    echo "<td>" . $row['rating'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

以及对应的CSS

```
#problems
{
text-align:centre;
border:solid;
border-width:2px;
border-color:#CCC;
width : 100%;
}
#problems th,td
{
    padding: 4px;
    font-weight: normal;
    border:solid;
    border-width:1px;
    border-color:#CCC;
    font-size: 15px;
    color: #039;
    //background: #b9c9fe;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:24:02.007

要知道不同的浏览器有不同的默认功能。这是我解决这个问题的基本方式。谷歌浏览器通常对 Web 开发人员更友好，并且更擅长纠正错误。但是，如果您希望在所有浏览器中保持一致，请确保明确说明这些值。

问题 1 - 文本未居中：我注意到在您的 CSS 中，您的第一行将 text-align 分配给“居中”。互联网是美国人创立的，所有的浏览器都会支持“center”的美式拼写。问题可能是 Firefox 不支持该词的英式拼写。不过，在尝试之前我不会知道。

问题 2 - 不圆角：由于我不是一个非常熟练的 Web 开发人员，这是一个我不知道如何解决的问题。但是，我发现[有人这样做的博客文章。](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)

# sql - Rails 排序方法；列名为 :order

> ID：11386975
> 
> 赞同：4
> 
> 时间：2012-07-08T21:45:37.673
> 
> 标签：sql, ruby-on-rails

我有一个模型练习，它有 :circuit 和 :order 列（等等）。在一个视图中，我试图先通过：电路订购练习，然后通过：订购。当我使用以下内容时：

```
@schedule.exercises.order(:circuit).each do |exercise| 
```

它按预期工作。但是，当我尝试添加 :order 列时：

```
@schedule.exercises.order(:circuit, :order).each do |exercise| 
```

我收到以下错误：

```
SQLite3::SQLException: near "order": syntax error: SELECT "exercises".* FROM "exercises"  WHERE "exercises"."schedule_id" = 1 ORDER BY circuit, order 
```

当我单独传递 :order 列时也会发生同样的错误：

```
@schedule.exercises.order(:order).each do |exercise|

SQLite3::SQLException: near "order": syntax error: SELECT "exercises".* FROM "exercises"  WHERE "exercises"."schedule_id" = 1 ORDER BY order 
```

我假设这是因为列名 (:order) 与 SQL 方法名 ( `order`) 相同。我想知道除了更改我的列标题之外是否有任何解决方法？

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T22:06:50.940

更改列名是唯一明智的选择。将其更改为“位置”之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:58:18.710

如果您真的想尝试这样做，您可以通过 sql 查询编写查找并使用反引号转义 col 名称，例如

```
ModelName.find_by_sql(SELECT * FROM ModelName ORDER BY '`order`') 
```

但我会说你应该只更改列名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T10:12:27.070

只需使用“重新排序”而不是“订购”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-21T19:39:15.890

我也面临同样的问题，但是在 order 子句中指定表名它可以工作。

```
@schedule.exercises.order("exercises.circuit ASC, exercises.order ASC").each do |exercise| 
```

# objective-c - UIImage 用硬边调整大小

> ID：11386980
> 
> 赞同：8
> 
> 时间：2012-07-08T21:46:49.533
> 
> 标签：objective-c, ios, xcode, uiimage, resize

我需要一种方法来调整 UIImage 的大小，就像在 Photoshop 中使用“最近邻”重采样一样。我一直在寻找一些，但我发现的所有内容都是关于 CoreGraphics 厚度以提高双三次重采样质量。我的应用程序中有像素风格的设计，我按像素创建了很多东西，然后用 x5 乘数放大（这需要很多时间，所以我什至接近为 Photoshop 编写脚本）。例如：

![在此处输入图像描述](../Images/ce9b139e1353eac37568c8a1ab50957a.png)>![在此处输入图像描述](../Images/995e6a7483bc3b982f532d18e6a9440e.png)

但我真的不需要这样的重采样结果：

![在此处输入图像描述](../Images/939471097483441456601286db1978ab.png)

也许有人会告诉我正确的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T17:37:37.373

当您将图像绘制到图形上下文中时，您可以将图形上下文的插值质量设置为“无”，如下所示（例如在视图的`drawRect`方法中）：

```
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextSetInterpolationQuality(c, kCGInterpolationNone);
UIImage *image = [UIImage imageNamed:@"pixels.png"];
[image drawInRect:self.bounds]; 
```

如果您需要将结果作为一个`UIImage`（例如，将其分配给内置的 UI 控件），您可以这样做`UIGraphicsBeginImageContext`（您会找到很多示例）。

另一种方法是设置`magnificationFilter`图像视图层的属性：

```
pixelatedImageView.layer.magnificationFilter = kCAFilterNearest; 
```

这可能更快，内存效率更高，因为您不需要重绘图像。

# c - 用 gcc 编译 .c

> ID：11386983
> 
> 赞同：1
> 
> 时间：2012-07-08T21:47:30.817
> 
> 标签：c, gcc

我正在尝试编译一个具有 main.c 和大量 .c 和 .h 文件的程序。有没有什么方法可以编译和链接，而无需在 gcc 命令中传递所有 .c 文件，例如

```
gcc  main.c file.c file2.c -o main 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T21:50:16.140

您的 shell 可以扩展通配符。这样你就可以：

```
gcc *.c -o main 
```

当然，您必须确保`*.c`目录中没有任何您实际上不想编译的额外文件。更好的选择是使用 Make 或 SCons 等构建系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T21:54:10.067

'make' 是构建 C 应用程序的工具。下面是hello world版本。

```
$ cat main.c 
#include <stdio.h>

int main (char *argv[], int argc) {
    printf("Hello World\n"); 
    return 0; 
}
$ make main
cc     main.c   -o main
$ ./main 
Hello World 
```

**编辑尊重 Shahbaz 评论**：最初的问题是试图简化 gcc 的命令行。程序员的正确方向是学习make。由于 make 有一点学习曲线，我想提供一个简单的垫脚石来做一些有用的事情。通过以这种方式开始，您不需要生成文件。只需键入“make programname”，如上所示。Make 使用它的默认规则和相关的变量。$(CC) -c $(CFLAGS) $(CPPFLAGS) 精明的程序员可以通过设置众所周知的变量来构建它。

从这里可以修改生成文件。本着踏脚石的精神，考虑这个琐碎的makefile

```
$ cat makefile 

SRCS = main.c
OBJ = ${SRCS:.c=.o}
CC=gcc

main: ${OBJ}

$ make
gcc   main.o   -o main 
```

通过设置众所周知的 make 变量 CC 来控制使用哪个编译器。OBJ 是从源文件列表中计算出来的。琐碎的目标开始了通向规则的道路。

无论如何，我希望这篇文章和其他答案能让最初的提问者走上正轨。

问候，-jk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T21:48:31.440

```
gcc -o main -I. `find . -name "*\.c"` 
```

这样，如果您愿意，您可以将 .c 和 .h 文件放在子文件夹中。

但是，这不是一个好方法。更好的方法是创建一个[Makefile](http://mrbook.org/tutorials/make/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:51:54.263

如果您询问命令行，您可以使用通配符来指定所有 .c 文件，如@Man of One Way 建议的那样。但总的来说，任何大小的 C 应用程序都是使用*非常*有用的“makefile”构建的。

您可能想阅读教程，例如[http://www.cs.umd.edu/class/fall2002/cmsc214/Tutorial/makefile.html](http://www.cs.umd.edu/class/fall2002/cmsc214/Tutorial/makefile.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:16:25.160

如前所述，make 是最好的方法 了解你在每个点上需要的东西

此外，在编码时使用一些可以帮助您的标志也很重要：

```
-Wall -> sets all warning flags
-g, -ggdb -> generates debug code
-ansi, -std=c99 
```

关于如何使用 make 的一本非常好的书是 [http://shop.oreilly.com/product/9780937175903.do](http://shop.oreilly.com/product/9780937175903.do)

# c++ - 使用 QFtp 下载单个 .txt

> ID：11386987
> 
> 赞同：0
> 
> 时间：2012-07-08T21:48:26.703
> 
> 标签：c++, file, qt, ftp

我遇到了 QFtp 的问题。我想从我的服务器下载一个单行（8 字节）的 .txt 文件，所以我编写了以下代码，但它不起作用。在 folder1 目录中创建了文件“actions.txt”。我可以在客户端很好地看到它的大小。但是文件没有被写入。我得到一个空文件。

```
QFile* actionFile = new QFile("action.txt");
QFtp *ftp = new QFtp(parent);

void Dialog::getActionFile() 
{ 
    actionFile->open(QIODevice::WriteOnly);
    ftp->connectToHost("mydomain.de"); 
    ftp->login("user", "pw"); 
    ftp->cd("folder1"); 
    ftp->get("action.txt",actionFile); 
    ftp->close(); 
    actionFile->close(); 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:32:40.613

*几种方法*的文档[`QFtp`](http://qt-project.org/doc/qftp.html#get)说：

> 该函数**不会阻塞并立即返回**。该命令是调度的，它的执行是异步执行的。该函数返回一个由`commandStarted()`and 传递的唯一标识符`commandFinished()`。

因此，您需要等待发出适当的信号。

请注意，您还可以使用[`QNetworkRequest`](http://qt-project.org/doc/qnetworkrequest.html)请求整个 ftp URL（我认为即使在 URL 中包含用户名和密码）来下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:38:08.923

我解决了我的问题。每次发出 commandFininshed 信号时，我都会处理一个步骤。像这样：

```
void MainWindow::ftpCommandFinished(int id, bool error)
{
    static bool flag = false;
    if(ftp->currentCommand() == QFtp::ConnectToHost)
        checkUpdate();
    if(ftp->currentCommand() == QFtp::Get)
    {
        file->close();
        if(error)
        {
            QMessageBox::warning(this, "Erro!", ftp->errorString());
            deleteLater();
            return;
        }
        if(!flag)
            checkVersion();
        else{
            delete ftp, file;
            ftp = 0; file = 0;
        }
        flag = true;
    }
} 
```

flag 变量的原因是其他需要对程序进行进一步解释的原因，所以我不会走那条路。

谢谢你的帮助。它以某种方式帮助了我很多。

# ruby - 迁移失败并出现错误：NoMethodError: undefined method `Migration'

> ID：11386992
> 
> 赞同：0
> 
> 时间：2012-07-08T21:48:56.527
> 
> 标签：ruby, migration, sequel, nomethoderror

我正在尝试在 Ruby 中设置 Sequel。我去了[http://sequel.rubyforge.org/rdoc/files/doc/migration_rdoc.html](http://sequel.rubyforge.org/rdoc/files/doc/migration_rdoc.html)并创建了我的第一个迁移。然后我让 Postgres.app 作为我的服务器运行，并做了一个 createdb Qsario。当我尝试使用迁移来创建数据库字段时，问题就来了：

```
$sequel -E -m . postgres://localhost/Qsario
I, [2012-07-08T13:53:49.659795 #6258]  INFO -- : (0.000374s) SET standard_conforming_strings = ON
I, [2012-07-08T13:53:49.660113 #6258]  INFO -- : (0.000153s) SET client_min_messages = 'WARNING'
I, [2012-07-08T13:53:49.660359 #6258]  INFO -- : (0.000163s) SET DateStyle = 'ISO'
I, [2012-07-08T13:53:49.664679 #6258]  INFO -- : (0.000952s) SELECT NULL FROM "schema_info" LIMIT 1
I, [2012-07-08T13:53:49.665179 #6258]  INFO -- : (0.000214s) SELECT * FROM "schema_info" LIMIT 1
I, [2012-07-08T13:53:49.665544 #6258]  INFO -- : (0.000166s) SELECT 1 AS "one" FROM "schema_info" LIMIT 1
I, [2012-07-08T13:53:49.666100 #6258]  INFO -- : (0.000325s) SELECT COUNT(*) AS "count" FROM "schema_info" LIMIT 1
I, [2012-07-08T13:53:49.666461 #6258]  INFO -- : (0.000179s) SELECT "version" FROM "schema_info" LIMIT 1
Error: NoMethodError: undefined method `Migration' for Sequel:Module/Users/me/Projects/Qsario/db/migrate/001_create_user_and_file_tables.rb:3:in `<top (required)>' 
```

这是 001_create_user_and_file_tables.rb 的样子：

```
Sequel.Migration do
  no_transaction

  change do
    create_table(:users) do
      primary_key :id
      String      :username, :unique=>true
      String      :email, :unique=>true
      String      :password_hash
      String      :password_salt
      DateTime    :joined_at, :null => false
      FalseClass  :banned, default=>false
      String      :role, default=>"user"
    end

    create_table(:files) do
      primary_key :id
      foreign_key :user_id, :users
      String      :filename, :null => false
      DateTime    :uploaded_at, :null => false
    end

    create_table(:users_files) do
      primary_key :id
      foreign_key :user_id, :users
      foreign_key :file_id, :files
    end
  end
end 
```

请注意，还没有 Rakefile 或类似的东西，因为我仍在尝试设置。我没有使用 Rails。所以那个 .rb 文件是目录中唯一的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:51:12.820

只是为了记录，这里是固定迁移的样子，并围绕修复/改进进行评论，以防其他人犯我犯的同样错误。mu 太短了，因为我帮我解决了这个问题，所以值得称赞。

```
Sequel.migration do  # Lowercase 'm' in migration
  # That no_transaction bit was totally unnecessary.

  change do
    create_table(:users) do
      primary_key :id
      String      :username,    :unique=>true
      String      :email,       :unique=>true
      String      :password_hash
      String      :password_salt
      DateTime    :joined_at,   :null => false
      FalseClass  :banned,      :default=>false  # default needs to be :default
      String      :role,        :default=>"user"
    end

    create_table(:files) do
      primary_key :id
      foreign_key :user_id, :users
      String      :filename,    :null => false
      DateTime    :uploaded_at, :null => false
    end

    # A nicer way to make the old :users_files table.
    create_join_table(:user_id => :users, :file_id => :files)
  end
end 
```

# perl - 如何在脚本中指定只使用特定版本的 perl？

> ID：11386994
> 
> 赞同：11
> 
> 时间：2012-07-08T21:49:14.537
> 
> 标签：perl

我有一个为 5.6.1 版编写的 perl 脚本，它依赖于 Oracle 包、DBI 包和更多东西。一切都已正确安装并且可以正常工作。

最近安装了 perl 版本 5.8.4，因为这些依赖项设置不正确，所以脚本失败。

'perl' 命令指向 /program/perl_v5.8.4/bin/perl -- 最新版本

所以，当我必须运行我的 perl 脚本时，我必须在命令提示符下手动指定

```
 /program/perl_v5.6.1/bin/perl scriptName.pl 
```

我尝试在脚本中添加以下行：

```
 /program/perl_v5.6.1/bin/perl 
 use v5.6.1; 
```

但是，这意味着脚本必须采用 Perl 版本 > 5.6.1

我发现了几个相关的问题，建议：

1.  导出路径。但是，我想要所有用户的脚本，而不必导出路径
2.  指定版本大于。但是，我只想为此脚本使用一个特定版本。
3.  使用/要求命令。和上面一样的问题。

我的问题：如何在脚本中指定只使用特定版本的 perl？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T23:12:25.403

`#!/some/path/to/perl`问题是如果 perl 脚本这样调用，则不使用shebang 行 ( ) 中指定的解释器：

`perl some_script.pl`

...作为“默认”（简化）perl，然后选择。应该通过执行文件本身来使用 shebang 的原始功能：

`./some_script.pl`

当然，这意味着该文件应该是可执行的（`chmod a+x`例如，使用 ）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T22:21:50.533

我的代码中有：

```
our $LEVEL = '5.10.1';
our $BRACKETLEVEL = sprintf "%d.%03d%03d", split/\./, $LEVEL;

if ($] != $currentperl::BRACKETLEVEL)
{
    die sprintf "Must use perl %s, this is %vd!\n", $LEVEL, $^V;
} 
```

这些实际上是两个不同的模块，但这是基本思想。我只是在我的脚本顶部“使用正确级别”而不是`use 5.10.1;`如果开发人员尝试为该产品使用错误级别的 perl，我会得到这个死。但是，它不会做任何其他`use 5.10.1;`可以做的事情（启用严格，启用诸如 say、switch 等功能）。

# php - PHP MySQL没有连接和发布

> ID：11386999
> 
> 赞同：0
> 
> 时间：2012-07-08T21:50:32.757
> 
> 标签：php, html

我可能缺少一些基本的东西，所以在这一点上，我只需要第二双眼睛。我正在我的网站上构建一个简单的输入表单，以便访问者可以提交一些信息。现在，我只是称他们为工作（我只是想让它工作）。当我点击提交时，我在 PHPMYadmin 端没有看到任何信息，因此 SQL 数据库显然没有被更新。我第一次没有说这很糟糕。

另外，出于安全原因，我的密码是隐藏的，但它是正确的。

这是我的 PHP 和我的 HTML。

```
<?php
$con = mysql_connect("localhost","projedl8_Jason","/////");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("projedl8_quicktern", $con);

$sql="INSERT INTO jobListForm (NAME, Email, JobTitle, JobDescription)
            VALUES ('JASON', '$_POST[email]','$_POST[job_title]','$_POST[job_description]')";

if (!mysql_query($sql,$con))
  {
      die('Error: ' . mysql_error());
  }
echo "1 record added";

                        mysql_close($con);
?> 
```

最后：

```
 <form name="submitjobform" method="post" action="job_submit.php">
    <table width="450px">
    <tr>
     <td valign="top">
      <label for="name">Name</label>
     </td>
     <td valign="top">
      <input  type="text" name="first_name" maxlength="100" size="30">
     </td>
    </tr>
    <tr>
     <td valign="top">
      <label for="email">Email Address</label>
     </td>
    <td valign="top">
      <input  type="text" name="email" maxlength="80" size="30">
    </td>
    </tr>
   <tr>
    <td valign="top">
     <label for="job_title">Job Title</label>
    </td>
    <td valign="top">
     <input  type="text" name="job_title" maxlength="30" size="30">
    </td>
    </tr>
    <tr>
     <td valign="top">
      <label for="comments">Job Description</label>
     </td>
     <td valign="top">
      <textarea  name="job_description" maxlength="1000" cols="25" rows="6"></textarea>
    </td>
    </tr>
    <tr>
     <td colspan="2" style="text-align:left">
     <input type="submit" name="submit" value="Submit" size="100"></td>
    </tr>
    </table>
    </form> 
```

这是 PHPMYADMIN 的屏幕截图

[在此处输入链接描述](http://i380.photobucket.com/albums/oo245/yoyo1299/ScreenShot2012-07-08at24139PM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:15:13.233

我认为这可能是里面缺少的单引号`$_POST[...]`。

但是，您的解决方案对**[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)**是开放的，因此最好使用准备好的语句，处理引号/反斜杠，在参数中转义。

```
 $db = new mysqli($dbserver, $dbusername, $dbpassword, $dbdatabase);
    $stmt2 = $db->stmt_init();
    if (!$stmt2->prepare("INSERT INTO jobListForm (NAME, Email, JobTitle, JobDescription)
        VALUES (?, ?, ?, ?)")) {
        die('Error');
    } else {
        $stmt2->bind_param('ssss', 'JASON', $_POST['email'], $_POST['job_title'], $_POST['job_description']);
        if (!$stmt2->execute()) {
            die;
        } else {
            $id = mysqli_insert_id($db);
        }
    }
    $stmt2->close(); 
```

（四个 ssss 表示每个参数都是一个字符串。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:00:50.333

我假设您的问题只是“mysql 无法连接”部分（我还假设 '////' 是该字段的正确值）

尝试用“127.0.0.1”或内部网络接口的 IP 替换“localhost”，以防连接不是通过 Unix 套接字发生的。

但是，您的代码有一个非常糟糕的 SQL 注入漏洞案例，在这种形式和使用 MySQL 时相对无害（它是 INSERT 形式，MySQL 不允许执行多个语句，所以发布

```
email=','',''); DROP TABLE jobListForm; -- 
```

将导致

```
INSERT INTO jobListForm (NAME, Email, JobTitle, JobDescription)
        VALUES ('JASON', '','',''); DROP TABLE jobListForm; --','',''); 
```

被传递给 MySQL，并且只有第一个查询 INSERT 会执行。

但是，在其他地方，这可能允许 SELECT...LOGIN 查询返回 TRUE 和管理员记录，即使提交的密码错误，也允许任何人管理您的系统。

将准备好的语句与 PDO 一起使用，或彻底验证 POST 中发送的内容。