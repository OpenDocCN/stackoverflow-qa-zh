# StackOverflow 问答 11798000-11798999

# google-apps-script - 从 Google 站点执行脚本时，记录器未在编辑器中显示输出

> ID：11798002
> 
> 赞同：0
> 
> 时间：2012-08-03T14:46:20.483
> 
> 标签：google-apps-script

这曾经对我有用，但现在只在从编辑器执行脚本时获得日志输出，这在涉及 GUI 时没有帮助。之前在这里记录了相同的问题： [http ://productforums.google.com/d/topic/apps-script/5o5PBbH75Yk/discussion](http://productforums.google.com/d/topic/apps-script/5o5PBbH75Yk/discussion)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:25:14.433

你应该给这个问题加注星标[我已经看到这个帖子了](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1601)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:20:48.227

我认为这与今年 6 月底出现的[问题 1502有关。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1502)如果您认为它相关，请考虑为它投票。

与此同时，我使用了一个 textArea 小部件，在其中显示了我想要记录的数据......看起来并不总是很好看但很*高效*；-)

# c# - System.Windows.WebBrowser 在 quirks 模式下捕获页面图像

> ID：11798004
> 
> 赞同：0
> 
> 时间：2012-08-03T14:46:30.293
> 
> 标签：c#, webbrowser-control, quirks-mode, ie8-compatibility-mode

我正在使用以下链接将网页捕获为图像[将网页转换为 ASP.NET 中的图像](https://stackoverflow.com/questions/2715385/convert-webpage-to-image-from-asp-net)。

在几个页面上，我遇到的问题是创建的图像与实际页面不相似，但与以怪异模式显示的页面相同（页面混乱）。有没有办法以编程方式更改控件的行为（不进行任何注册表更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:59:00.497

根据Internet Explorer 团队[官方博客的](http://blogs.msdn.com/b/ie/)[帖子](http://blogs.msdn.com/b/ie/archive/2008/03/18/webbrowser-control-rendering-modes-in-ie8.aspx)，更改控件兼容模式的仅有两种方法是：`WebBrowser`

1.  将[FEATURE_BROWSER_EMULATION](http://blogs.msdn.com/b/ie/archive/2009/03/10/more-ie8-extensibility-improvements.aspx)键添加到应用程序的注册表中
2.  [使用!DOCTYPE](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#whentouse)和/或[元](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#setmode)标记在网页的 HTML 代码中指定兼容模式

**请注意：** [WebBrowser](http://msdn.microsoft.com/en-us/library/aa752085%28v=vs.85%29.aspx)呈现页面的默认模式可能取决于机器上安装的 Internet Explorer 版本，因为它使用 Internet Explorer 的组件。对于 IE8，默认情况下`WebBrowser`以 IE7 标准模式呈现页面。

由于页面上的某些内容导致更现代的渲染（实际上可能与直接在 IE 中打开页面时使用的渲染不同）崩溃，应用程序的部分页面可能会退回到旧模式（*怪癖模式）。*

要解决所描述的问题，您可以使用类的[DocumentText](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext.aspx)属性更改损坏页面的 HTML 代码，`WebBrowser`以明确指定适合页面的[文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)（即确保正确呈现）。

# javascript - 使用本地 HTML 链接打开 Windows 文件夹

> ID：11798012
> 
> 赞同：1
> 
> 时间：2012-08-03T14:47:12.043
> 
> 标签：javascript, jquery, html

我正在为自己建立一个本地“网站”，其中有一组链接指向我的 PC 上的特定项目。现在，当我单击链接时，文件夹会打开，但它会在浏览器中打开。

链接是否可以打开 Windows 资源管理器窗口，而不是作为浏览器中的站点？

到目前为止，这个站点应该只能在 Windows 上运行，而不是 Mac，但如果它在这两种情况下都可以运行，那就没有错。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:29:25.940

我认为没有这样的东西可以使*操作系统*文件管理器**弹出**网络浏览器

但是你可以试试[elfinder](http://elfinder.org/)

# android - 有文本/来电时不要中断应用程序

> ID：11798015
> 
> 赞同：1
> 
> 时间：2012-08-03T14:47:22.837
> 
> 标签：android

AFAIK，当有来电或文本时，Android 操作系统将应用程序发送到后台线程，并在通话结束时恢复应用程序。是否可以覆盖此行为？我希望我的应用程序优先并且在有电话/短信时不会被打断。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:57:30.247

是的你可以。

如果理解您的问题，您应该使用**android.telephony**类，它为您提供处理呼叫和短信的方法。

您可以从文档中获取灵感：

[http://developer.android.com/reference/android/telephony/package-summary.html](http://developer.android.com/reference/android/telephony/package-summary.html)

尤其是**TelephonyManager**及其状态处理

[http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED](http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:55:20.560

我不确定，但我认为不是。该设备是用来接收短信和电话的，所以我记得我读过一些东西说“如果你不声明 OnStop() 方法，当短信或电话到达时你的应用程序将崩溃”......这意味着你有义务声明，你不能避免发短信或打电话

# .net - mysql查询随着它的传播而变慢？

> ID：11798019
> 
> 赞同：1
> 
> 时间：2012-08-03T14:47:27.507
> 
> 标签：.net, mysql, performance

这是我的查询。根据日志，查询结果大约需要一秒钟。许多循环之后（偏移 17100）需要 15 秒以上。为什么？在创建表中定义 id 为

```
`id` INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT, 
```

这是我的代码/查询

```
Console.WriteLine("1 {0} {1}", DateTime.Now, offset);
var res = conn.Query<PageInfo2>("select * from tbl order by id limit @o, 300", new { o = offset });
Console.WriteLine("2 {0} {1}", DateTime.Now, offset);
offset += res.Count();
foreach (var v in res) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:52:14.430

当您没有 WHERE 条件时，引擎很可能会进行全表扫描，这解释了较高偏移量的较长延迟。

当您没有 where 条件时，基本上您正在阅读表格，就像一个高度碎片化的文本文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:59:51.293

您还可以尝试使用 EXPLAIN 命令查看每个 SELECT 扫描了多少行。与上一个答案一样， WHERE 可以帮助您仅选择初始限制参数上方的 id。

# php - 文件名中的 UTF-8 字符，链接的 url 返回 404 错误

> ID：11798022
> 
> 赞同：1
> 
> 时间：2012-08-03T14:47:34.037
> 
> 标签：php, character-encoding

我正在使用 Fork CMS，当上传文件名中包含特殊字符（例如 é 或 à）的文件时，文件名（présentation.pdf）在 FTP 上保存为 pr%c3%a9sentation.pdf。

当您使用后端链接到文件时，URL 显示为[http://www.domain.com/files/pr%c3%a9sentation.pdf](http://www.domain.com/files/pr%c3%a9sentation.pdf)，但几乎所有浏览器都将您链接到[http://www.domain。 com/files](http://www.domain.com/files) /présentation.pdf 这会导致 http 404 错误。

关于我应该在哪里寻找的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:51:01.387

尝试像这样访问它：http: [//www.domaine.com/files/pr%25c3%25a9sentation.pdf](http://www.domaine.com/files/pr%25c3%25a9sentation.pdf)

但是您应该在保存文件名之前从文件名中删除重音字符，这样可以避免任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:57:02.990

确保您的 FTP 服务器和 FTP 客户端都遵守 RFC 2640，以便它们使用 UTF-8 编码而不是 ASCII。ASCII 不支持非英文字符，包括带有重音符号的字符。有关详细信息，请参见此处： [http ://wiki.filezilla-project.org/Character_Set](http://wiki.filezilla-project.org/Character_Set)

* * *

**更新**

我猜“FTP”是指服务器上的存储空间，而不是通过文件传输协议上传文件。如果文件正在通过 Fork CMS 上传并且上传文件的文件名变为 pr%c3%a9sentation.pdf，则 Fork CMS 没有正确处理文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:55:58.717

最后一个答案是真的。
但是如果你想强制它，用 %25c3% 替换第一个 % 并删除第二个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T14:58:20.953

If the file has a `%` in the name, urlencoded you must do `%25` to reproduce the same `%` character. So `pr%25c3%25a9sentation.pdf` will translate into `pr%c3%a9sentation.pdf` which is the name of the file.

A sane solution would be stripping special characters from file names and respect the Internet File Naming Convention instead of trying to circumvent a problem that shouldn't be there in the first place.

Side note: I'm french so don't tell me `presentation` isn't as readable as `présentation`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-23T12:46:20.647

This problem has been solved in the latest Fork CMS releases, by using CommonUri::uri()

# cakephp - 如何从关联模型中获取 displayField

> ID：11798024
> 
> 赞同：0
> 
> 时间：2012-08-03T14:47:39.217
> 
> 标签：cakephp, cakephp-2.1

我是 CakePHP 的新手，在获取关联模型的显示字段时遇到了麻烦。

我的模型是这样的： - 有很多注释的问题。- 笔记属于问题和用户。- 用户有很多笔记。

当我查看注释时，用户有一个名为 name 的字段用作 displayField。但是在问题的查看方法上，我只得到 user_id。有没有办法获取与某个问题的注释相关联的用户名？

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:14:39.133

您可以使用递归参数：[cakephp docs](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#retrieving-your-data)

```
$this->Question->recursive=1;
$questions=$this->Question->find('all');
$this->set(compact('questions')); 
```

那么在你看来：

```
 foreach($question['Note'] as $note)
        {
           foreach($note['User'] as $user){
            echo $user[name];
              }
           } 
```

代码已编辑。

# visual-studio-2010 - 如何在 Visual Studio 2010 中的整个解决方案中查找和删除数据提示？

> ID：11798028
> 
> 赞同：2
> 
> 时间：2012-08-03T14:47:44.747
> 
> 标签：visual-studio-2010, performance, debugging, expression-evaluation, datatip

我注意到许多~~表达式评估弹出~~ **数据提示**严重减慢了调试的进出速度，所以我想删除其中的大部分（为此我需要先找到它们，是否有一个按钮？）或者如果它是不是一个选项，一次删除所有这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:51:48.470

如果您要询问即时窗口，则必须右键单击它并清除。这些称为数据提示，您可以在“调试”菜单中找到操作它们的选项。转到菜单：调试：有清除所有数据提示、导出数据提示、导入数据提示...当您正在积极调试时，您可以找到一个额外的选项来清除每个文件的数据提示。

希望这可以帮助！

# html - CSS 声明 - 元素类型和 ID 还是只是 ID？

> ID：11798029
> 
> 赞同：0
> 
> 时间：2012-08-03T14:47:48.600
> 
> 标签：html, css, class

我应该如何使用 CSS 声明？

这边走：

```
div#main_content {
    width: 900px;
    border: 1px solid #CCC;
    margin: 20px 0 20px 0;
    padding: 40px;
    overflow: hidden;
} 
```

或者这样：

```
#main_content {
    width: 900px;
    border: 1px solid #CCC;
    margin: 20px 0 20px 0;
    padding: 40px;
    overflow: hidden;
} 
```

在 sublime text 2 中，sublime linter 包建议我在没有`div`- only #main_content 的情况下使用，但在一些教程中我看到使用 div#main_content 更好，因为它更容易解析。

你建议我应该使用什么？（我认为在这种情况下，课程的结果将是相同的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:51:05.243

最好只使用id。页面上应该只有一个具有给定 id 的元素，因此元素类型是多余的。

错过元素类型的另一个原因是，如果您决定更改 HTML（可能将 更改`<div>`为更语义化的东西，例如 a`<p>`或`<section>`），CSS 选择器仍将匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:54:39.187

将元素类型包含在 ID 中真正有益的唯一场景（我能想到的）是，如果您要将相同的 ID 应用于不同页面上的不同元素类型并希望对它们进行不同的样式设置。

例如，如果在您的主页上创建`<header id="main">`和在其他页面上拥有`<section id="main">`，您肯定希望分别使用`header#main`和`section#main`来设置这两个元素的样式。

如果您的 ID 将应用于所有页面的相同元素类型，那么您的 CSS 中的元素选择器只会增加 CSS 的易读性，如果您想知道您正在设计什么类型的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:49:34.823

没有太大的区别，ID 是最快的，所以使用它们，你会没事的，使用 div#id 只是说只有在 div 内时才会影响 id（你可能在某些时候想要这个功能，尽管可能有类，而不是 id)

# c# - 直接返回值或创建临时变量之间的性能差异

> ID：11798033
> 
> 赞同：17
> 
> 时间：2012-08-03T14:47:55.707
> 
> 标签：c#, performance, memory

与直接返回分配给该变量的值相比，在函数中创建临时变量是否有任何性能损失或内存消耗差异？

例如，哪些函数（GetValue）在性能和节省内存方面更好，或者两者完全相同：

情况1：

```
 private string GetValue()
  {
     return this.GetResult();
  }

  private string GetResult()
  {
     // Code here that return a big string...
  } 
```

案例二：

```
 private string GetValue()
  {
     string result = this.GetResult();

     return result;
  }

  private string GetResult()
  {
     // Code here that return a big string...
  } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T14:52:17.893

在这些基本情况下，可读性**总是**胜过性能差异。我认为这充其量只是一个微优化，而这些在很大程度上被证明是浪费时间。你节省下来的东西将被不确定的 GC 运行吃掉。

大多数情况下，如果允许编译器对其进行优化，则生成的代码不会有任何差异。在这种情况下，生成的 IL 似乎有一些额外的操作码用于引用堆栈上的字符串，但是 JIT 然后对此做了什么，这是任何人的猜测。

我有时会在返回之前分解为临时变量以查看它们，但我从不担心性能影响。最重要的是，我从未见过需要这种改进来解决性能问题的案例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T15:06:46.573

如果局部变量实际上被可执行代码使用，并且没有被优化掉，那么差异仍然很小。

局部变量只使用存储引用所需的堆栈空间，并且为它分配空间根本不需要时间，因为无论如何总是分配堆栈帧。

几乎无法测量在局部变量之间进行额外复制的时间。只有在紧密循环中调用该方法数百万次时才会有所不同，并且与分配字符串所需的时间相比，它仍然只是执行时间的一小部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-29T06:03:32.183

局部变量总是被优化的。

> 在 return 语句之前使用局部变量不会影响性能。

[检查这里](https://sharplab.io/#v2:EYLgtghgzgLgpgJwD4AEDMACFAmDB1ASxgAsB7AVxgDUIECJgAbODAWACgBvDjXrARgAMGeLAAUASh59u7PhgCQKAOwYARADs4AdwDKMOhoDmagNzTeAXw7X2HDuiy5CJGnQbM2XCwOGiYkj6y8goAbrQYYACe+oZGGAC86lp6BgTGZj7yKpExacbmcny2lkA===)查看两个类的编译输出。

我更喜欢始终使用局部变量，因为它可以加快调试速度。据此[，](https://coralogix.com/log-analytics-blog/this-is-what-your-developers-are-doing-75-of-the-time-and-this-is-the-cost-you-pay/)开发人员将 75% 的时间用于调试。

# c# - 表单加载未触发已隐藏的表单？

> ID：11798034
> 
> 赞同：1
> 
> 时间：2012-08-03T14:47:58.390
> 
> 标签：c#, winforms

我正在编写一个必须隐藏主窗体的应用程序，但它在启动时会显示一个对话框。

我的主表单在构造函数调用的 initialize() 方法中有以下行。

```
this.Load += new System.EventHandler(this.MainForm_Load); 
```

我已经验证了它上面的代码命中**但是 MainForm_Load() 方法永远不会被调用。**

这可能是因为我隐藏了表格吗？

我在 Program.cs 的 Main 中执行以下行：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false); 
```

并在表单中覆盖了以下方法：

```
protected override void SetVisibleCore(bool value)
{
    _logger.Debug("Hiding the main window");
    base.SetVisibleCore(allowShowDisplay ? value : allowShowDisplay);
} 
```

其中allowShowDisplay设置为false；

[我在这个问题](https://stackoverflow.com/questions/70272/single-form-hide-on-startup)的答案中至少找到了这个解决方案的一部分，并在另一个项目中使用了它。该项目虽然没有使用表单加载事件。我正在做的那个。

**更新** 这是 Main 方法的样子。我正在尝试将依赖项注入所有元素。我已更改名称以删除客户名称。

[STAThread] 静态无效 Main() {

```
 ServiceHost incomingPipeHost = new ServiceHost(typeof(ScreenPopService));
        incomingPipeHost.Open();

        XmlConfigurator.Configure();
        _logger.Debug("Starting Application");
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        _logger.Debug("Creating subformView"); 
        ISubformView subformView = new SubformView();

        _logger.Debug("Creating MainForm mainForm");
        MainForm mainForm = new MainForm();

        _logger.Debug("Creating MonitorController");
        IMonitorController MonitorController = new MonitorController();

        _logger.Debug("Adding View to MonitorController");
        MonitorController.View = mainForm;

        _logger.Debug("Adding subFormView to mainForm");
        mainForm.SubFormView = subFormView;

        _logger.Debug("Adding MonitorController to mainForm");
        mainForm.MonitorController = MonitorController;

        _logger.Debug("Loading Properties");
        IProperties properties = PropertiesManager.LoadProperties();

        _logger.DebugFormat("Loaded Properties [{0}]", properties);
        _logger.Debug("Setting properties on mainForm");
        mainForm.Properties = properties;

        _logger.Debug("Setting properties on MonitorController");
        MonitorController.Properties = properties;

        _logger.Debug("Settting ScreenPop Consumer on MonitorCotroller");
        MonitorController.screenPopConsumer = ScreenPopCallBackManager.Instance;

        _logger.Debug("Debug Running Application");

        Application.Run(mainForm);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:59:34.907

这是设计使然。窗体的 Visible 属性（以及相关的 SetVisibleCore 和 Show 方法）在 Winforms 中是一个大问题。在典型的 .NET 懒惰方式中，这就是创建具体窗口的原因。或者换句话说，除非必须*，*否则 Winforms 不会创建窗口。

通过覆盖 SetVisibleCore() 并强制*value*属性为 false，您可以阻止这种情况发生。*没有*创建窗口。还有一堆其他的事情没有发生，包括触发 Load 事件。并且调用表单的 Close() 方法不会像通常那样停止程序。

这都是正常的行为。如果您的 Load 事件处理程序包含重要的东西，那么请务必将其移至构造函数。你只需要 Load 就知道窗口的大小和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:00:14.983

我最终寻求的解决方案似乎有效的解决方案是从对 Application.Run() 的调用中删除 mainForm 并在调用 Application.Run() 之前立即调用 mainForm.show() 然后调用 mainForm.Hide()

```
mainForm.Show();
mainForm.Hide();

Application.Run(); 
```

似乎正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:56:06.657

我将其发布为我现在在 Program.cs 文件中使用 MDI 的方式，这就是我的代码的样子..

静态类程序

```
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        try
        {
            Application.Run(new MainForm());
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + "\n\n\n" + ex.GetType().ToString(), "Error in MainForm");

        }
    }
} 
```

现在，我想隐藏然后显示的表单中的代码将在我的 MainForm 中有以下代码这将是我正在做的一个例子，如果一个表单加载并且我使用一个菜单点击事件。但是 MDI 是您想要查看的内容。. 更改示例以适用于您的用例。

```
 private void newStudentRecordToolStripMenuItem_Click(object sender, EventArgs e)
    {
        try
        {
            StudentForm studForm = new StudentForm();
            studForm.MdiParent = this;
            studForm.Show();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + "\n\n\n" + ex.GetType().ToString(), "Error in Student Form");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:12:46.323

我可以建议重新检查 MainForm_Load 的方法签名。签名应类似于“MainForm_Load(object sender, System.EventArgs e)”

这可能听起来很蹩脚，但我遇到过这样的问题会占用时间:)

让我知道这是否有帮助。谢谢！

# kerberos - krb5-server 包中的 LDAP 支持

> ID：11798045
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:48:31.997
> 
> 标签：kerberos

我想知道 kerberos 包中是否有 ldap 目录支持。我想安装 kerberos5 和 ldap 作为提供程序。我不想安装目录服务器 389 提供了。这个问题的可能解决方案是什么。任何帮助将不胜感激。好，谢谢

更新：我的问题可能看起来模棱两可，但我想知道 MIT kerberos5 rpm 包是否支持 LDAP，以便我可以使用 ldap 作为 kerberos5 主体数据的后端。krb5kdc 显示以下结果。

```
ldd /usr/sbin/krb5kdc:   linux-vdso.so.1 =>  (0x00007fff77dff000)
libkadm5srv_mit.so.8 => /usr/lib64/libkadm5srv_mit.so.8 (0x00007f7608e15000)
libkdb5.so.5 => /usr/lib64/libkdb5.so.5 (0x00007f7608c03000)
libgssrpc.so.4 => /lib64/libgssrpc.so.4 (0x00007f76089e2000)
libgssapi_krb5.so.2 => /lib64/libgssapi_krb5.so.2 (0x00007f76087a0000)
libkrb5.so.3 => /lib64/libkrb5.so.3 (0x00007f76084c2000)
libk5crypto.so.3 => /lib64/libk5crypto.so.3 (0x00007f7608296000)
libcom_err.so.2 => /lib64/libcom_err.so.2 (0x00007f7608093000)
libkrb5support.so.0 => /lib64/libkrb5support.so.0 (0x00007f7607e88000)
libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00007f7607c84000)
libresolv.so.2 => /lib64/libresolv.so.2 (0x00007f7607a68000)
libselinux.so.1 => /lib64/libselinux.so.1 (0x00007f7607848000)
libdl.so.2 => /lib64/libdl.so.2 (0x00007f7607643000)
libc.so.6 => /lib64/libc.so.6 (0x00007f760728b000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f760706e000)
/lib64/ld-linux-x86-64.so.2 (0x0000003542200000) 
```

此输出显示不支持 ldap。我想用 ldap 安装 kerberos5。我想知道是否可以这样做并且不使用 389 目录。我对 389 目录没有经验。ubuntu 中的相同包被命名作为 krb5-kdc-ldap 这很明显。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:27:59.320

我真正想要的是packag“krb5-server-ldap”，这是存储Kerberos 的ldap 模式的地方。但我特别想提的是这个博客中关于Kerberos、ldap、NFS 的精彩内容[Kerberos + ldap 作为后端](http://itdavid.blogspot.com/2012/05/howto-centos-62-kerberos-kdc-with.html)。我建议大家寻找 kerberos 5 plus ldap 信息来阅读本材料。它为我节省了几个小时的工作时间。非常精确且准确。

我认为第二好的是 Ubuntu 官方帮助网站。 [Kerberos LDAP 帮助](https://help.ubuntu.com/10.04/serverguide/kerberos-ldap.html)

再会

# c# - 您将如何规范对一个类和另一个类的方法调用？

> ID：11798046
> 
> 赞同：0
> 
> 时间：2012-08-03T14:48:32.247
> 
> 标签：c#, design-patterns

所以说我有：

```
public interface SystemA
{
    void MethodA(string a, string b, int c);
} 
```

在我的应用程序的某个地方，

```
public class ClientA
{
    public SystemA mSystemA;
    public ClientA()
    {
         mSystemA.MethodA("whatever", "ok", 42);
    }
} 
```

但我试图弄清楚如何改变它以满足以下要求，

1.  对系统上的方法的调用可能会也可能不会收到特定的响应
2.  期望响应的方法可能会根据发送后经过的时间触发不同的操作，例如再次调用该方法、通知客户端或通知系统
3.  客户端也必须能够接收消息
4.  我希望系统（或接收客户端）的接口是唯一需要改变的东西。
5.  最小的开销
6.  避免使用单例，因为它们会破坏可重用性并造成紧密耦合

具体来说，我有三个系统（其中有很多）负责与远程资源进行交互，并且无法保证对其接口的调用是否会让我得到响应，或者我什么时候会得到响应，或者响应是否会有效 - 在系统本身和使用它们的客户端中处理这些情况非常复杂，即使有状态来专门分配行为。

我尝试或考虑过但不喜欢的事情：

*   事件系统 - 您必须为要向系统公开的每个新方法定义新事件和侦听器，并且每当您更改方法时，您必须更改所有要匹配的事件、所有侦听器等。还有 FAR使用它的开销很大。如果您指定希望指定每个事件的参数，它会创建大量工作，但是如果您使事件真正通用，那么您最终不得不在发送者和接收者之间来回来回匹配它们。
*   命令 - 您必须为接收器上的每个方法定义新命令，并且每次要更改它们所依赖的方法时，您都必须更改命令。除此之外，每个命令的构造函数都必须匹配方法的签名。我觉得这也会有太多的开销。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:02:02.047

我不确定我是否理解您的要求（特别是＃1 让我感到困惑），但我最好的猜测是您正在描述典型的异步客户端-服务器通信机制。

如果是这种情况，请考虑使用消息队列。调用和响应被放置在适当的客户端或服务器队列中。调用与响应的关联是通过某种 cookie 或 uid 完成的。客户端可以跟踪它发送请求的时间和接收响应的时间等。

这是否涉及一些开销？当然可以。但是，如果您的要求需要开销，那真的是开销吗？

# javascript - 画布：动画贝塞尔曲线绘制

> ID：11798053
> 
> 赞同：5
> 
> 时间：2012-08-03T14:49:05.943
> 
> 标签：javascript, jquery, html, canvas

我试图画一条从左到右穿过画布的线。我仍处于早期阶段以实现这一点，我使用以下功能来做一步一步的动画

```
timer = window.setInterval(draw_line, 30); 
```

我的绘图功能是这样的

```
function draw_line()
    {
        context.fillStyle = "#000";
        context.fillRect(0, 0, canv.width, canv.height);

            context.beginPath();
        context.lineWidth = 2;
        context.strokeStyle = '#fff';

            //Where p1, p2, cp1, cp2 are point objects that has x & y values already defined    
        context.moveTo(p1.x, p1.y);
        context.bezierCurveTo(cp1.x,cp1.y,cp2.x,cp2.y,p2.x,p2.y);
        context.stroke();
        context.closePath();

            // now i have to move p1, p2 ,cp1,cp2
            // now here is my problem
    } 
```

我知道我需要移动 `p1.x+= a random number;`，对于 cp1 和 cp2 也需要移动，但是**p2**端点应该遵循相同的轨道呢！我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:38:37.527

**编辑后的答案**

有了你的澄清，我想我现在可以适当地回答这个问题了。

为了让终点跟随起点穿过画布的路径，您必须存储历史值。在此示例中，[http://jsfiddle.net/mobidevelop/bGgHQ/](http://jsfiddle.net/mobidevelop/bGgHQ/)，我使用鼠标移动来填充最后 16 个位置的缓冲区，然后使用它通过迭代 RingBuffer 来形成通过点的贝塞尔曲线。

```
function RingBuffer(length) {
    this.length = length;
    this.pointer = 0;
    this.buffer = [];
}
RingBuffer.prototype.get = function(index) {
    if (index < 0) {
        index += this.length;        
    }
    return this.buffer[index];
}
RingBuffer.prototype.push = function(value) {
    this.buffer[this.pointer] = value;
    this.pointer = (this.length + this.pointer +1) % this.length;    
}

var c = document.getElementById("myCanvas");
var context =c.getContext("2d");

timer = window.setInterval(draw_line, 30);
function Point(x,y) {
    this.x = x;
    this.y = y;
}
Point.prototype.translateX = function(x) {
    return this.x += x;
};
Point.prototype.translateY = function(y) {
    return this.y += y;
};

function draw_line()
{
    context.fillStyle = "#000";
    context.fillRect(0, 0, c.width, c.height);

    var pointer = history.pointer;
    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = '#F00';     
    for (iteration = 0, count = 15; iteration < count; iteration += 3) {
        var p1 = history.get(--pointer);
        var p2 = history.get(--pointer);
        var p3 = history.get(--pointer);
        var p4 = history.get(--pointer);        

        if (p1 && p2 && p3 && p4) {

            context.moveTo(p1.x, p1.y);
            context.bezierCurveTo(p2.x, p2.y, p3.x, p3.y, p4.x, p4.y);

        }
        pointer++;
    }
    context.stroke();
    context.closePath();    

}

var history = new RingBuffer(16);
var lastGrab = new Date();
c.addEventListener('mousemove', function() {
    now = new Date();
    if (now - lastGrab > 15) {
        history.push(new Point(event.clientX - c.offsetLeft, event.clientY - c.offsetTop)); 
        lastGrab = now;
    }    
});​ 
```

* * *

**出于历史目的，之前的答案留在下面。**

我不确定我是否完全理解您要达到的目标，但我认为您需要做的就是将您的所有观点翻译成相同的值。这将导致穿过画布的线保持相同的形状。像这样的东西：

[JSFiddle](http://jsfiddle.net/mobidevelop/7wsLW/)

```
var c = document.getElementById("myCanvas");
var context =c.getContext("2d");

timer = window.setInterval(draw_line, 30);
function Point(x,y) {
    this.x = x;
    this.y = y;
}
Point.prototype.translateX = function(x) {
    return this.x += x;
};
Point.prototype.translateY = function(y) {
    return this.y += y;
};

var p1 = new Point(0,0);
var p2 = new Point(100,100);
var cp1 = new Point(15,45);
var cp2 = new Point(85,45);

function draw_line()
{
    context.fillStyle = "#000";
    context.fillRect(0, 0, c.width, c.height);

    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = '#fff';

        //Where p1, p2, cp1, cp2 are point objects that has x & y values already defined    
    context.moveTo(p1.x, p1.y);
    context.bezierCurveTo(cp1.x,cp1.y,cp2.x,cp2.y,p2.x,p2.y);
    context.stroke();
    context.closePath();

    p1.translateX(1);
    p2.translateX(1);
    cp1.translateX(1);
    cp2.translateX(1);

    if (p1.x > 300) {
        p1.translateX(-400);
        p2.translateX(-400);
        cp1.translateX(-400);
        cp2.translateX(-400);        
    }
} 
```

除非我误解了目标...

# android - 在 ... 中未找到 JNI_OnLoad 正在跳过初始化

> ID：11798054
> 
> 赞同：8
> 
> 时间：2012-08-03T14:49:08.787
> 
> 标签：android, android-ndk, java-native-interface

过去一天左右我一直在收到此消息，直到现在它还没有引起问题。我早些时候让我的代码与我的本机库一起运行，但今天我添加了一些新函数，但它再次不起作用。

LogCat 中没有显示任何错误，但我的程序只是在我的设备上立即打开和关闭。没有消息说应用程序已意外停止，只是屏幕上出现黑色闪烁。

我环顾了 google 和 SO，但出现此消息的原因有很多。这是我的 LogCat ：

```
08-03 10:44:50.186: D/dalvikvm(2143): Trying to load lib /data/data/my.eti.commander/lib/libRelayAPI.so 0x40514f58
08-03 10:44:50.186: D/dalvikvm(2143): Added shared lib /data/data/my.eti.commander/lib/libRelayAPI.so 0x40514f58
08-03 10:44:50.186: D/dalvikvm(2143): No JNI_OnLoad found in /data/data/my.eti.commander/lib/libRelayAPI.so 0x40514f58, skipping init
08-03 10:44:50.288: I/DEBUG(1058): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
08-03 10:44:50.288: I/DEBUG(1058): Build fingerprint: 'LENOVO/IdeaPad_Tablet_A1_07/A1_07:2.3.4/GRJ22/eng.user.20120209.100319:user/release-keys' 
```

我想知道的是：

1）此`No JNI_OnLoad`消息是否导致我的程序无法打开？

2）如果是这样，我知道我没有发布任何代码，但有人可以解释这条消息的大致意思。包括`init`它正在跳过的内容。

编辑 ：

我今天添加的新功能在发生这种情况时被注释掉了。我最初得到了一个不同的错误，并想确保我的旧代码仍然有效。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T14:55:13.180

该功能`JNI_OnLoad`不是必需的。因此，如果您没有提供此功能，您的程序应该可以正常运行。

您的问题来自代码的另一部分。尝试使用`ndk-gdb`来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-27T13:54:24.680

正如@djedge 提到的，这里`JNI_OnLoad`只是一个警告。这很可能有两个主要原因。第一个是您的 Android.mk 文件有问题。通常它应该看起来像

```
 LOCAL_PATH := $(call my-dir)
    include $(CLEAR_VARS)
    OPENCV_CAMERA_MODULES:=on
    OPENCV_INSTALL_MODULES:=on
    #OPENCV_LIB_TYPE:=SHARED
    include D:\NDK\MyApplication3\libraries\native\jni\OpenCV.mk
    LOCAL_SRC_FILES  := DetectionBasedTracker_jni.cpp
    LOCAL_C_INCLUDES += $(LOCAL_PATH)
    LOCAL_LDLIBS     += -llog -ldl
    LOCAL_MODULE     := detection_based_tracker
    include $(BUILD_SHARED_LIBRARY) 
```

这里请注意`LOCAL_SRC_FILES`是否提供了正确的 c/c++ 源文件。

嵌套问题将在于您的函数签名。如果您生成了头文件并且这些函数签名应该与您的 c/c++ 文件函数/方法定义匹配。

这是一个例子。头文件

```
 JNIEXPORT jlong JNICALL Java_com_example_jobs_myapplication_DetectionBasedTracker_nativeCreateObject 
```

(JNIEnv *, jclass, jstring, jint);

C++ 文件

```
 JNIEXPORT jlong JNICALL  Java_com_example_jobs_myapplication_DetectionBasedTracker_nativeCreateObject
 (JNIEnv * jenv, jclass, jstring jFileName, jint faceSize)
  {

   //code goes here...
  } 
```

这里**`com_example_jobs_myapplication`**可能是错误的。

# iphone - 重新加载 UITableView 标题视图？

> ID：11798058
> 
> 赞同：5
> 
> 时间：2012-08-03T14:49:21.810
> 
> 标签：iphone, objective-c, uitableview, header

我的 UITableView 中有一个 headerView，其中有一堆统计信息，我在 viewDidLoad 方法中这样设置它：

`self.tableView.tableHeaderView = [self headerView];`

该`headerView`方法，只是返回我的观点。但是，统计信息仅在加载时更新，如果我从该视图转到子视图并返回统计信息不更新，那么从子视图控制器返回该视图时如何重新加载该视图？而不是仅在视图加载时？

让我简化一下：

如何`tableHeaderView`在从子视图控制器返回视图时重新加载？因此，我按下返回以返回带有标题的视图，此时我需要重新加载它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:25:33.420

重新加载时，标题视图不会自动重新加载`UITableView`。您必须自己管理此视图。如果您想在视图控制器出现之前更新它：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    MyHeaderView *v = (MyHeaderView *)[[self tableView] tableHeaderView];
    [v updateWithData:[self someData]];
} 
```

# ajax - 发布后 ASP MVC3 jQuery Mobile 级联下拉菜单不起作用

> ID：11798060
> 
> 赞同：1
> 
> 时间：2012-08-03T14:49:22.120
> 
> 标签：ajax, asp.net-mvc-3, jquery-mobile

寻求帮助...我正在使用 ASP MVC3 和 jQuery Mobile。我已经建立了一组级联下拉选择列表，当您第一次打开页面时可以正常工作。但是，提交表单后，它会返回到此页面，以便用户可以在需要时输入更多信息。问题是在您返回页面后级联下拉菜单不再起作用。

在 Firebug 中调试时，我在控制台中看不到任何错误。我必须进行 Control + F5 刷新才能让他们重新开始工作。如果我关闭 jQuery mobile ajaxEnabled 设置，那么它工作正常，所以这与 jQuery 移动框架和加载我认为的页面有关......

有人有想法么？

谢谢

编辑：以下是此页面的视图。基本上正在发生的是 $('#GasStation').change 事件似乎在用户被带回此页面后从未触发。如果我禁用 jQuery 移动 ajax 功能，它工作正常。

```
@model CPMobile.Models.FuelUsageModels.CreateModel
@{
    Layout = "~/Views/Shared/M/_Layout.cshtml";
}
<h2>@ViewBag.Title</h2>
<div data-theme="b">
    @Html.ValidationSummary(true, "Fuel usage recording failed. Please correct the errors and try again.")
    <div data-role="fieldcontain">
        @using (Html.BeginForm())
        {
            <div data-role="fieldcontain">
                @Html.LabelFor(m => m.GasStation)
                @Html.DropDownListFor(m => m.GasStation, Model.GasStationList, "Select Gas Station...")<br />
                @Html.ValidationMessageFor(m => m.GasStation)
            </div>
            <div data-role="fieldcontain">
                @Html.LabelFor(m => m.FuelType)
                @Html.DropDownListFor(m => m.FuelType, Enumerable.Empty<SelectListItem>(), "Select Fuel Type...")<br />
                @Html.ValidationMessageFor(m => m.FuelType)
            </div>            
            <div data-role="fieldcontain">
                @Html.LabelFor(m => m.EquipmentNumber)
                @Html.TextBoxFor(m => m.EquipmentNumber, new { @required = "required" })<br />
                @Html.ValidationMessageFor(m => m.EquipmentNumber)
            </div>
            <div data-role="fieldcontain">
                @Html.LabelFor(m => m.MeasurementValue)
                @Html.TextBoxFor(m => m.MeasurementValue, new { @required = "required", @type = "number" })<br />
                @Html.ValidationMessageFor(m => m.MeasurementValue)
            </div>           
            <div data-role="fieldcontain">
                @Html.LabelFor(m => m.MeasurementDatetime)
                @Html.EditorFor(m => m.MeasurementDatetime, new { @required = "required", @type = "date" })<br />
                @Html.ValidationMessageFor(m => m.MeasurementDatetime)
            </div>            

            <div data-role="fieldcontain">
                <input type="submit" value="Submit" data-theme="b" />
            </div>

        }
    </div>
</div>
@section scripts
{
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script type="text/javascript">        
        $('#GasStation').change(function () {
            var selectedGasStation = $(this).val();
            if (selectedGasStation != null && selectedGasStation != '') {
                $.getJSON(
                    '@Url.Action("FuelType")',
                    { gasStation: selectedGasStation },
                    function (fuelTypes) {
                        var fuelTypesSelect = $('#FuelType');
                        fuelTypesSelect.empty();

                        $.each(fuelTypes, function (fuelType, fuelTypeName) {
                            fuelTypesSelect.append($('<option/>', {
                                value: fuelType.value,
                                text: fuelTypeName.text
                            }));
                        });
                        fuelTypesSelect.selectmenu('refresh', true);
                    });
                }
            });
    </script>
} 
```

# android - Android - 闹钟错误

> ID：11798064
> 
> 赞同：0
> 
> 时间：2012-08-03T14:49:28.297
> 
> 标签：android, nullpointerexception, alarmmanager, android-alarms

我下载警报应用程序是因为我需要看看它是如何工作的。GNU 许可证。

但我无法运行它。当我点击（某事？）时，我收到此错误：

```
 08-03 14:40:26.154: E/AndroidRuntime(255):  at com.codeskraps.talarkam.TalarkamActivity.onResume(TalarkamActivity.java:108) 
```

部分代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "onCreate Started");

    setContentView(R.layout.alarm_controller);

    prefs = PreferenceManager.getDefaultSharedPreferences(this);

    tpAlarm = (TimePicker) findViewById(R.id.tpAlarm);
    chkSnooze = (CheckBox) findViewById(R.id.chkSnooze);
    etxtSnoozeMin = (EditText) findViewById(R.id.etxtSnoozeMin);
    Button button = (Button) findViewById(R.id.btnSetAlarm);
    btnSetTone = (Button) findViewById(R.id.btnSetTone);
    chkVolume = (CheckBox) findViewById(R.id.chkVolume);
    skbVolume = (SeekBar) findViewById(R.id.skbVolume);

    button.setOnClickListener(setAlarmListener);
    btnSetTone.setOnClickListener(this);
}

protected void onResume() {
    Log.d(TAG, "onResume");
    super.onResume();

    tpAlarm.setCurrentHour(prefs.getInt(M_HOUR, 0));
    tpAlarm.setCurrentMinute(prefs.getInt(M_MINT, 0));
    chkSnooze.setChecked(prefs.getBoolean(M_SNOOZE, false));
    etxtSnoozeMin.setText(prefs.getString(SNOOZE_T, "0"));
    chkVolume.setChecked(prefs.getBoolean(CHKVOLUME, false));
    skbVolume.setProgress(prefs.getInt(SKBVOLUME, 0));

    Uri alarmUri = Uri.parse(prefs.getString(TONE, null));
    Ringtone ringtone = RingtoneManager.getRingtone(this, alarmUri);
    if (ringtone != null) {
        String name = ringtone.getTitle(this);
        btnSetTone.setText(name);
    } else
        btnSetTone.setText(getString(R.string.btn_SetAlarmTone));

    if (prefs.getBoolean(FIRST_LAUNCH, true)) {
        Intent checkIntent = new Intent();
        checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

        SharedPreferences.Editor editor = prefs.edit();

        editor.putBoolean(FIRST_LAUNCH, false);
        editor.commit();
    }
}

protected void onPause() {
    Log.d(TAG, "onPause");
    super.onPause();

    SharedPreferences.Editor editor = prefs.edit();

    editor.putInt(M_HOUR, tpAlarm.getCurrentHour());
    editor.putInt(M_MINT, tpAlarm.getCurrentMinute());
    editor.putBoolean(M_SNOOZE, chkSnooze.isChecked());
    editor.putString(SNOOZE_T, etxtSnoozeMin.getText().toString());
    editor.putBoolean(CHKVOLUME, chkVolume.isChecked());
    editor.putInt(SKBVOLUME, skbVolume.getProgress());

    editor.commit();
} 
```

日志猫：

```
08-03 14:40:25.684: D/TalarkamActivity(255): onCreate Started
08-03 14:40:25.965: D/dalvikvm(255): GC freed 599 objects / 51056 bytes in 86ms
08-03 14:40:26.134: D/TalarkamActivity(255): onResume
08-03 14:40:26.144: D/AndroidRuntime(255): Shutting down VM
08-03 14:40:26.144: W/dalvikvm(255): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-03 14:40:26.144: E/AndroidRuntime(255): Uncaught handler: thread main exiting due to uncaught exception
08-03 14:40:26.154: E/AndroidRuntime(255): java.lang.RuntimeException: Unable to resume activity {com.codeskraps.talarkam/com.codeskraps.talarkam.TalarkamActivity}: java.lang.NullPointerException: uriString
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2950)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2965)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2516)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.os.Looper.loop(Looper.java:123)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-03 14:40:26.154: E/AndroidRuntime(255):  at java.lang.reflect.Method.invokeNative(Native Method)
08-03 14:40:26.154: E/AndroidRuntime(255):  at java.lang.reflect.Method.invoke(Method.java:521)
08-03 14:40:26.154: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-03 14:40:26.154: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-03 14:40:26.154: E/AndroidRuntime(255):  at dalvik.system.NativeStart.main(Native Method)
08-03 14:40:26.154: E/AndroidRuntime(255): Caused by: java.lang.NullPointerException: uriString
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.net.Uri$StringUri.<init>(Uri.java:420)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.net.Uri$StringUri.<init>(Uri.java:410)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.net.Uri.parse(Uri.java:382)
08-03 14:40:26.154: E/AndroidRuntime(255):  at com.codeskraps.talarkam.TalarkamActivity.onResume(TalarkamActivity.java:108)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.Activity.performResume(Activity.java:3763)
08-03 14:40:26.154: E/AndroidRuntime(255):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2937) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:08:44.243

错误在这里`onResume()`：

```
Uri alarmUri = Uri.parse(prefs.getString(TONE, null)); 
```

如果此首选项不存在，则默认为`null`，这会导致 NullPointerException。

**编辑添加了代码建议以摆脱 NPE**

将此代码替换为您的`onResume()`：

```
Uri alarmUri = Uri.parse(prefs.getString(TONE, null));
Ringtone ringtone = RingtoneManager.getRingtone(this, alarmUri);
if (ringtone != null) {
    String name = ringtone.getTitle(this);
    btnSetTone.setText(name);
} else
    btnSetTone.setText(getString(R.string.btn_SetAlarmTone)); 
```

使用此代码：

```
Ringtone ringtone = null;
String toneString = prefs.getString(TONE, null);
if (toneString != null) {
    Uri alarmUri = Uri.parse(toneString);
    ringtone = RingtoneManager.getRingtone(this, alarmUri);
}
if (ringtone != null) {
    String name = ringtone.getTitle(this);
    btnSetTone.setText(name);
} else {
    btnSetTone.setText(getString(R.string.btn_SetAlarmTone));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:09:41.077

由于您还没有发布整个代码，因此很难准确地找出它失败的那一行（第 108 行？）。但我的猜测是以下行是根本原因：

Uri alarmUri = Uri.parse(prefs.getString(TONE, null));

它在首选项中找不到 TONE 键/对象，并将默认设置为 null。

# cuda - 在 GPU 上分割 4D 数据

> ID：11798067
> 
> 赞同：1
> 
> 时间：2012-08-03T14:49:36.427
> 
> 标签：cuda, 4d, labeling

我面临的问题是分割大型数据集（高达 2048x2048x40x10000 x,y,z,t == 解压后的几 TB，给予或接受）。从好的方面来说，这个数据集中的特征相当小。最大 20x20x20x20 左右。

据我所知，没有开箱即用的解决方案（如果我错了，请纠正我）。我有一些如何解决这个问题的计划，但我希望得到您的反馈。

一个时间片最大约为 600mb；在典型情况下较少；我可以在我的 4gb 内存中保存一堆连续的此类切片。

鉴于我的特征尺寸很小，我的直觉告诉我最好避开所有形式的分割技巧，而只需对我的标签进行局部迭代的类似洪水填充的更新；如果你的邻居有更高的标签，复制它；迭代直到收敛。迭代次数应受任何维度中的最大集群大小的限制，这又应该很小。

CUDA 天生偏爱 3D，所以我可以分两步进行；迭代所有尚未收敛的 3d 体积切片。然后简单地对所有连续的时间片进行元素循环，并执行相同的填充逻辑。

我可以用一个简单的递增唯一计数器来初始化迭代，或者先找到局部最大值，然后在那里种子标签。后者是首选，所以我可以保留一个按标签索引的数组来存储所有区域的 x、y、z、t 最小/最大范围（也可以作为后处理）。如果一个区域没有扩展到最新的时间片，它会从数据中删除，并将其位置写入数据库。如果尾随时间片以这种方式完全耗尽（总和为零），请将其从内存中删除。（或者如果内存溢出，也删除最新的；必须忍受这样的近似值）

看起来应该可以。考虑到 z 维度的大小有限，您认为是启动 x,y,z 线程块，还是启动 x,y 块并让每个线程在 z 维度上循环更好？这是一种“试试看”的事情，还是有一个答案？

我刚刚想到的另一个优化；如果我将一个 x,y,z 块加载到共享内存中，那么在我获得内存的同时执行几次洪水填充更新会不会更快？也许最好让本地内存迭代到收敛，然后继续……我想这与上述问题有关。单个邻居最大查找可能是次优的计算强度，因此在 z 上循环或迭代多次应该可以抵消这一点。我觉得我更喜欢后者。

另一个问题; 似乎不存在类似的东西，但是包含执行类似操作的模板代码的项目的链接将受到高度赞赏（优化的 3d 洪水填充代码？），因为我的 CUDA 知识仍然参差不齐。

提前感谢您的想法和反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:27:41.653

作为记录; 我得到了一个令我满意的可行解决方案；当它更成熟时，可能会在某个地方上线。这是一个描述：

我现在做的是：

*   找到最大值。
*   使用原子增量标记最大值
*   创建每个像素指向自身的指针图像
*   指针图像上的填充：如果邻居指向更大的值，则复制他的指针

这给出了一个分水岭指针图像，每个指针指向一个唯一的标签。

然后我做一个合并步骤；如果相邻像素指向不同的标签，并且它们的值超过阈值，我会合并它们的标签，以便“充分连接”的最大值不会形成它们自己的区域。

然后我取消引用指针，我有一个漂亮的标签图像。因为我只在最大值上播种标签，所以最大标签是一个小数字；我分配了一个该大小的 6xN 数组，并使用原子计算每个特征的最小/最大范围。

目前没有使用任何共享内存，但它已经相当快了。我意外地做了一些半聪明的事情；因为我首先做一个分水岭，然后使用单次扫描合并相邻的分水岭区域，所以我实际上是在做一个多层次的算法。性能主要由少量的洪水填充调用和两到三个合并扫描主导。正确使用共享内存可以将我的内存带宽需求减少 5 倍，但要等到它明确显示为瓶颈。我已经得到了一个比我可以从 scipy 争吵的更接近我想要的分割，它更快，并且使用更少的内存，所以我现在很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:37:49.730

I would suggest a pyramidal processing scheme: you can quickly compute mipmap-like levels of detail where you store the maximum/minimin value of the combined voxels. This should result in something similar to an octree. Then you can start your segmentation only on the interesting areas, which sould give a considerable speedup. This should work pretty well if you have only few and very small segments.

I guess you could also use level sets (which can be implemented on the GPU), but I recon these are a bit harder to implement (google for "CUDA level set").

Do you have to keep track of your segments over time? Do you have any idea how to do that?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T21:42:14.543

最简单的方法是使用 1D 存储并在其上覆盖 4D 索引模式。

地址 = x + y * 宽度 + z * 高度 * 宽度 + t * 长度 * 高度 * 宽度；

这将意味着

data( 0 ,0, 0, 0 ) 和 data( 1, 0, 0, 0 ) 在连续的地址，但是

data( 0 ,0, 0, 0 ) 和 data( 0 ,0, 0, 1 ) 是宽度 * 高度 * 长度地址部分。

但是，如果您的访问模式正在处理最近的邻居，那么您需要空间局部性来进行索引。

这可以使用索引的 Morton Z (Peano Key) 排序来实现。它将最近的邻居放置在紧密的线性内存地址中。这个 Z 阶线性地址是通过交错 x,y,z,t 索引的交替位获得的。有关 2D 示例，请参见

[http://graphics.stanford.edu/~seander/bithacks.html#InterleaveTableObvious](http://graphics.stanford.edu/~seander/bithacks.html#InterleaveTableObvious)

# google-chrome-extension - 我无法在清单中使用 csp 上传我的 chrome 扩展

> ID：11798071
> 
> 赞同：2
> 
> 时间：2012-08-03T14:49:55.443
> 
> 标签：google-chrome-extension, chrome-web-store

在我的 manifest.json 中，我有一个 csp 规则：

```
"content_security_policy": "script-src 'self' https://ssl.google-analytics.com https://connect.facebook.net https://apis.google.com; object-src 'self'" 
```

使用 facebook 和 google API。但是当我将我的扩展上传到 chrome 网上商店时，报错：

> 发生错误：清单无效。如果您的清单包含评论，请删除它们，因为我们的画廊还不支持它们。

删除内容安全策略规则后，它可以正常工作。

但是这个 csp 规则是我的扩展工作所必需的，这是 webstore 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:22:30.830

试试这个对我有用的解决方案： **您必须从父文件夹中删除任何 [*.json]**文件（当然***除了 manifest.json 文件***）。最好从您的应用程序中删除任何不需要的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:02:50.057

这是一个已知的 WebStore 错误，Issue [140519 Invalid Manifest error in Web Store Gallery when update extension](http://code.google.com/p/chromium/issues/detail?id=140519)

它将在本周某个时候的下一个网络商店版本中修复。

# php - 发布数据未正确存储在 codeigniter 的数据库中

> ID：11798073
> 
> 赞同：0
> 
> 时间：2012-08-03T14:50:07.270
> 
> 标签：php, mysql, codeigniter

我想将帖子数据存储到数据库中，并且我有动态生成的字段`course[]`等`start_date[]`，我编写以下代码来检索和存储帖子数据：

但在执行以下操作后，所有字段中仅存储“0”零。

```
if($this->input->post('course'))
{

    $education_data= array();
    for($i=0; $i<count($_POST['course']); $i++)
    {
        $education = array(
                'course'       => $this->input->post('course' . $i),
                'start_date'   => $this->input->post('start_date' . $i),
                'end_date'     => $this->input->post('end_date' . $i),
                'college_name' => $this->input->post('college_name' . $i),
                'other_info'   => $this->input->post('other_info' . $i),
        );

        $this->db->insert('education',$education);
    }
} 
```

所以我尝试了第二种方法：

```
if($this->input->post('course'))
{    

    $courses = $this->input->post("course");
    $startdates = $this->input->post("start_date");
    $end_date = $this->input->post("end_date");
    $college_name = $this->input->post("college_name");
    $other_infos   = $this->input->post("other_info");

    $education_data= array();
    for($i=0; $i<count($_POST['course']); $i++)
    {

        $education = array(
                 'course'       => $courses[$i],
                 'start_date'   => $startdates[$i],
                 'end_date'     => $end_date[$i],
                 'college_name' => $college_name[$i],
                 'other_info'   => $other_infos[$i],    //line number 101
        );

        // Insert Education data in 'education' table
        $this->db->insert('education',$education);
    }
} 
```

但是在这种情况下，只有一次迭代正在运行，而在第二次迭代中，它在循环的第二次迭代中给出了一些错误。

第二次迭代中的错误：

```
Severity: Notice

Message: Undefined offset: 1

Filename: models/resume_model.php

Line Number: 101

A Database Error Occurred

Error Number: 1048

Column 'other_info' cannot be null

INSERT INTO `education` (`course`, `start_date`, `end_date`, `college_name`, `other_info`) VALUES ('', '', '', '', NULL)

Filename: C:\wamp\www\resume\system\database\DB_driver.php

Line Number: 330 
```

如果有人知道，请提出解决方案。

var_dump 输出：

```
 [course] => Array
        (
            [0] => course1
            [1] => course2
        )

    [start_date] => Array
        (
            [0] => from1
            [1] => from2
        )

    [end_date] => Array
        (
            [0] => to1
            [1] => to2
        )

    [college_name] => Array
        (
            [0] => univ1
            [1] => univ2
        )

    [other_info] => Array
        (
            [0] => other1
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:01:33.630

**var_dump 的更新**

从 var_dump 您可以看到 other_info 不会有 a`'other_info' => $other_infos[1]`因为数组中只有一项。如果您希望您的秒代码正常工作，您可以向 other_info 添加另一个索引。

**@JoseVega 的更新我已经更新了上面的问题，但出现了错误**

您的错误是指出为 other_info 传递的值为空，从错误中我假设您的表架构不支持 other_info 列的空值。您可以更改架构以允许空值，也可以在其为空时传递一个值。

试试下面的，看看你的结果。我假设并非所有数组都具有相同的大小，这就是您的第二次迭代失败的原因。

```
 for($i=0; $i<count($courses); $i++) {

         $education = array(
                    'course'       => isset($courses[$i]) ? $courses[$i] : "",
                    'start_date'   => isset($startdates[$i]) ? $startdates[$i] : "",
                    'end_date'     => isset($end_date[$i]) ? $end_date[$i] : "",
                    'college_name' => isset($college_name[$i]) ? $college_name[$i] : "",
                    'other_info'   => isset($other_infos[$i]) ? $other_infos[$i] : "",
                    );

         // Insert Education data in 'education' table
         $this->db->insert('education',$education);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:05:12.277

$_POST['course'] <-- 包含一个数组，如您所说。

所以如果你想 print_r($POST); 你会看到类似的东西：

```
array(2) {
  ["course"]=>
  array(3) {
    [0]=>
    string(5) "17740"
    [1]=>
    string(5) "18422"
    [2]=>
    string(5) "14170"
  }
  ["startdate"]=>
  array(3) {
    [0]=>
    string(10) "2012-01-02"
    [1]=>
    string(10) "2012-01-02"
    [2]=>
    string(10) "2012-01-02"
  } 
```

但是在您的第一个代码示例中，您使用：

$this->input->post('课程' . $i),

哪个不存在（course12345 不存在）。

在您的第二个代码示例中，您做得对：

```
$courses = $this->input->post("course"); 
```

现在 $courses 保存了数组，您似乎可以在随意检查时在循环中使用它（也许我错过了一些东西）。

我怀疑你最好从一个简单的开始调试

```
echo "<pre>";
print_r($_POST);
echo "</pre>"; 
```

并确保你收到了你期望收到的东西。我怀疑您不会发布您认为发布的所有内容。

确保所有使用的数组中的元素与课程数组中的元素一样多。

如果没有看到 $_POST 的实际内容，很难给出更多建议。

# ruby-on-rails - 不明白为什么我总是被重定向到 https（打开我的应用程序）

> ID：11798075
> 
> 赞同：0
> 
> 时间：2012-08-03T14:50:31.683
> 
> 标签：ruby-on-rails, https, webserver

一切都很好，但是当我开始使用 SSL 并在带有 SSL 的瘦服务器上运行它时。尝试运行不同的应用程序，但此错误与应用程序无关 - 它出现在所有应用程序中。

这是一个有点奇怪的情况。在 localhost 我的应用程序正在运行，但是当我将应用程序添加到我的远程服务器并运行它时 - 它总是以 https 和浏览器打开给我错误：

```
 The connection was reset 
```

从我的控制台：

```
 ERROR bad Request-Line
     ERROR bad URI 
```

我知道，当证书有错误或其他一些服务器错误时，就会发生此错误。

我检查了我所有的配置文件，删除了所有与 SSL 连接的东西，但它想用 https 协议打开。

我应该在哪里搜索错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:26:56.003

1.  尝试删除缓存
2.  您是否安装了始终访问 https 版本网站的浏览器扩展程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:28:40.683

我刚刚卸载了瘦服务器，我的应用程序又开始运行了。

# c# - 如何停止无响应的线程

> ID：11798080
> 
> 赞同：5
> 
> 时间：2012-08-03T14:50:43.400
> 
> 标签：c#, multithreading

我有一个在 FTP 服务器之间移动文件的文件传输应用程序。与任何时候一样，我们可以在移动中拥有数十个文件。为了防止 FTP 服务器泛滥，我有一个监视器和信号量锁系统。

根据调用堆栈，我的 FTP 客户端每隔一段时间就会在 System.Net.Sockets.Socket.Receive() 的某个地方冻结。我没有得到例外，所以无法处理这个问题。我想取消线程，因为它阻塞了其他想要使用 FTP 客户端的线程。

我考虑过在新线程中启动最终调用 System.Net.Sockets.Socket.Receive() 的方法并在一段时间后中止线程，但我担心在线程中止后套接字将保持打开状态。在非响应线程之后，是否有更优雅的方式来杀死和清理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:58:36.047

不。没有线程的合作，没有安全、可靠的方法可以杀死线程。现有的机制可能非常严厉，和/或不一定有效。

*   您可以尝试`Interrupt()`其他线程，但这通常只会中断正在等待/休眠或正在执行可能阻塞的线程。如果它处于不涉及阻塞的中间，它甚至不会*看到*，更不用说响应中断，直到它再次尝试阻塞。哪一个，如果你有一个流氓线程，很可能是“从不”。
*   `Abort()`*可能会*杀死一个线程，但也不能保证 - 线程可以顽固地拒绝死亡。即使它确实死了，它也可能使您的应用程序域处于可疑状态。（假设线程在进入一个`finally`块时被中止。一个异常会立即抛出，并且该 finally 块不会运行——所以它释放的任何东西（锁、本机资源等）都将保持未释放.)
*   显然，即使卸载应用程序域只会中止其中的线程，因此应用程序的不确定性`Thread.Abort`——另外，如果它有效，它也会杀死应用程序域中的每个线程。
*   关于唯一*相对*安全并保证工作的事情就是杀死整个过程。如果你这样做，就无法保证外部事物的状态。您可以保证所持有的任何资源都将被释放/关闭/无论如何，而不是它们处于任何特定状态（例如，“未损坏”）。

在这种情况下，更好的解决方案可能是异步接收（使用真正的异步内容 ( `ReceiveAsync`)，而不是`BeginReceive`/ `EndReceive`）。这样，线程就不会被原生事物阻塞，并且更容易被中断（如果由于某种原因您仍然必须这样做；异步的好处包括您甚至不需要单独的线程来观察输入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:59:01.913

您是否查看过设置[ReceiveTimeout](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)？

否则，您可以在每个线程中设置 Watchdog 属性并检查 Watchdog 变量的状态以识别无响应的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:54:32.980

我建议在一个单独的进程中运行你的线程（如果可能的话）并无情地杀死它。然后操作系统将释放所有资源

# java - 如何在没有接口的 JNA 中使用 DLL

> ID：11798088
> 
> 赞同：2
> 
> 时间：2012-08-03T14:51:19.513
> 
> 标签：java, dll, jna

在花费大量时间学习 Python 以通过 Jython 将一系列基于 DLL 的函数实现到 Java 之后 - 我忘记阅读 Jython 的文档，并且缺乏 ctypes 支持使我的大部分代码无用。

我不想使用 JNI

我正在尝试使用其 HLLAPI 从 Personal Communications访问[pcshll32.dll的某些功能。](http://publib.boulder.ibm.com/infocenter/pcomhelp/v5r9/index.jsp?topic=/com.ibm.pcomm.doc/books/html/emulator_programming08.htm)

我确实设法让它与 Python 一起工作，几乎没有问题，在网上找到很多文档和食谱真的很容易。

现在我偶然发现了 JNA，但我遇到了很多麻烦。我几乎找不到有关它的信息，特别是当我尝试访问非标准 DLL 时。

据我了解，我需要编写一个将作为接口的 pcshll32.class - 就像 User32.class 似乎是 User32.dll 的接口（或者我应该称之为代理......）。

好吧，这就是我在阅读[本文](http://today.java.net/article/2009/11/11/simplify-native-code-access-jna)后认为正在发生的事情。

那么...如何导入外部 DLL？可能吗？我需要编写接口/代理吗？那里有样品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:01:29.807

你应该这样做：

```
public interface PcShll32 extends StdCallLibrary { //StdCallLibrary is for Windows functions

    PcShll32 INSTANCE = (PcShll32) Native.loadLibrary(
                   "pcshll32", PcShll32.class, W32APIOptions.DEFAULT_OPTIONS); //Options are for Win32API

    // your methods
} 
```

当然，您必须为 JNA 提供这个外部库。

对我来说最好的解释是[源代码](http://download.java.net/general/jn_images/006/JNA-Article-Code.zip)

# ios - iOS上发布构建和调试构建之间的物理差异

> ID：11798094
> 
> 赞同：0
> 
> 时间：2012-08-03T14:51:37.957
> 
> 标签：ios, iphone, xcode, debugging

我有一个使用 Box2D 的 iOS 游戏。当我在调试模式下运行它时，一切都很好。当我在发布模式下运行它时，所有游戏对象都会加速，看起来游戏对象的质量更高或类似的东西。这很奇怪。

两个版本的帧速率几乎相同，所以这不是问题。无论如何，游戏中的所有内容都应该与帧速率无关。

知道 XCode 中的什么项目设置可能会导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:03:13.433

当你在调试中运行时，编译器没有做任何优化，所以二进制文件要大得多，而且代码经常做无用的工作。在 Release 中，优化器（默认为 -Os）运行，它积极地寻找缩小代码。这是开发人员在测试他们的代码时通常应该使用 Release 而不是 Debug 的原因之一，并且只有在他们真正需要 lldb 时才切换到 Debug。

编辑：所以这里有几件事可能会产生差异。首先，Box2D 是包含项目还是链接库？如果是第一个，请确保它同时具有 Debug 和 Release 配置。查看您和 Box2D 的构建设置，并查看是否在一个配置或另一个配置中定义了任何内容（即您可能会找到 -DSLOW）或某些将设置（或不设置标志）的定义语句。啊，调试我通常会定义 DEBUG=1 （在预处理器部分），Box2D（甚至你的代码）可能会出于某种目的而使用。

如果您找不到另一个不同的构建设置，那么您可以通过将 Debug 配置中使用的值从 -O0 实际更改为 -O1、-O2 和 =Os 来查看优化器是否有影响。同样，您可以将 Release 设置从 -Os 更改为 -O0。

我猜想要么是 Debug 配置中的“DEBUG”设置、Release 中的一些其他定义，要么是优化器是原因，通过使用 Debug 和 Release，您可以找出问题所在。事实上，您甚至可以（临时）将 DEBUG=1 添加到发布配置中。

# groovy - 读取条件 XML 节点 Groovy

> ID：11798108
> 
> 赞同：1
> 
> 时间：2012-08-03T14:52:23.273
> 
> 标签：groovy, xml-parsing

我有以下 SOAP 响应：

我需要选择具有 nIdType="ACTIVE" 的 Address 和 nId 。

可能有更多地址和 nId，我需要选择第一个匹配项。

我写了 groovy 脚本但没有成功。请帮助我，因为我是新手

有可能所有地址可能有也可能没有nId

我有测试属性，我需要更新地址和 nId

我需要通过 groovy 脚本来实现 wh

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Header/>
    <SOAP-ENV:Body>
        <ns2:GetD xmlns:ns2="http://xyxz/pqr" xmlns:ns3="http://pqp/ptr" xmlns:ns4="http://nhgg./ns">
            <ns2:du>
                <ns2:Address>UUUUUU</ns2:macAddress>
            </ns2:du>
            <ns2:du>
                <ns2:Address>XXXXXXX</ns2:macAddress>
            </ns2:du>
            <ns2:du>
                <ns2:Address>PQWWEEE</ns2:macAddress>
            <ns2:dP>
                <ns2:pN>1</ns2:pN>
                <ns2:sE>
                    <ns2:nId>08767727</ns2:nId>
                    <ns2:nIdType>ACTIVE</ns2:nIdType>
                <ns2:sE>
            </ns2:dP>
            </ns2:du>
            <ns2:du>
                <ns2:Address>TTTTTTTT</ns2:macAddress>
            </ns2:du>
        </ns2:GetD>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:00:41.373

您可以这样做（我必须在`</SOAP-ENV:Envelope>`您的 XML 中添加一个结束标记并更改`</ns2:macAddress>`为`</ns2:Address>`使其有效 XML）

```
def xml = '''<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
            |  <SOAP-ENV:Header/>
            |  <SOAP-ENV:Body>
            |    <ns2:GetD xmlns:ns2="http://xyxz/pqr" xmlns:ns3="http://pqp/ptr" xmlns:ns4="http://nhgg./ns">
            |      <ns2:du>
            |        <ns2:Address>UUUUUU</ns2:Address>
            |      </ns2:du>
            |      <ns2:du>
            |        <ns2:Address>XXXXXXX</ns2:Address>
            |      </ns2:du>
            |      <ns2:du>
            |        <ns2:Address>PQWWEEE</ns2:Address>
            |        <ns2:dP>
            |          <ns2:pN>1</ns2:pN>
            |          <ns2:sE>
            |            <ns2:nId>08767727</ns2:nId>
            |            <ns2:nIdType>ACTIVE</ns2:nIdType>
            |          </ns2:sE>
            |        </ns2:dP>
            |      </ns2:du>
            |      <ns2:du>
            |        <ns2:Address>TTTTTTTT</ns2:Address>
            |      </ns2:du>
            |    </ns2:GetD>
            |  </SOAP-ENV:Body>
            |</SOAP-ENV:Envelope>'''.stripMargin()

def a = new XmlSlurper().parseText( xml ).Body?.GetD?.du?.find { node ->
  node.dP?.sE?.nIdType.text() == 'ACTIVE'
}

println "First Active Address = ${a?.Address?.text()}" 
```

打印：

```
First Active Address = PQWWEEE 
```

但很难从你的问题中确切地说出你在追求什么

# vba - Delete/move original email when replied to

> ID：11798111
> 
> 赞同：-2
> 
> 时间：2012-08-03T14:52:31.200
> 
> 标签：vba, outlook

We have a ticket system that sends us tickets with the title "New Ticket Created: T20120803.0078" where the number is generated.

We reply to all saying we are working on the ticket. The reply title looks like this "RE: New Ticket Created: T20120803.0078".

My Outlook is set up to forward all tickets into one folder called "Tickets".

I am trying to figure out how when the email is replied to, it sends both the reply and the original to another folder called "InProgress".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:58:54.777

`don't have a lot of time to figure this one out.`

Typically, at this sight we don't build code for people, but help them build the tweak or perfect code where they are struggling.

That said, I was intrigued by your question and wanted to learn myself, so I put something together for you. This should get you a great start, if it's not already exactly what you need.

**UPDATE:**

You don't even need VBA for the first part. You can set up a rule to move all sent messages with `"RE: New Ticket Created"` in the subject line to the `In Progress` folder. Therefore, you don't even need the whole first `IfF Then End If` block in the code below. (I've left it for reference, purposes).

**CODE**

All assumptions based on the settings you provided.

Place the code in the Application_ItemSend event of ThisOutlookSession object in Outlook VBE.

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)

Dim olNameSpace As Outlook.NameSpace
Set olNameSpace = GetNamespace("MAPI")

Dim olDestFolder As Outlook.Folder
Set olDestFolder = olNameSpace.Folders("myMailbox@myCompany.com").Folders("In Progress")

If TypeName(Item) = "MailItem" Then 'if it's a mail item being sent

    Dim olMailCopy As Outlook.MailItem
    Set olMailCopy = Item.Copy 'copy the item so we can move it and still have it send

    If InStr(1, olMailCopy.Subject, "New Ticket Created") > 0 Then '

        olMailCopy.Move olDestFolder ' move copy of mail to folder

        Dim strTicket As String
        strTicket = Mid(olMailCopy.Subject, InStrRev(olMailCopy.Subject, ": ") + 2) 'just grab ticket id

    End If

End If

Dim olLookUpFolder As Outlook.Folder
Set olLookUpFolder = olNameSpace.Folders("myMailbox@myCompany.com").Folders("Tickets")

Dim olMail As Outlook.MailItem

For Each olMail In olLookUpFolder.Items 'loop through Tickets folder to find original mail

    If InStr(1, olMail.Subject, strTicket) > 0 Then 'look for unique ticket Id

        olMail.Move olDestFolder ' move to InProgress folder

        Exit For

    End If

Next

End Sub 
```

# emacs - 使用 cscope 后如何返回之前的代码，比如在 Emacs 中找到一个函数的定义？

> ID：11798113
> 
> 赞同：0
> 
> 时间：2012-08-03T14:52:33.027
> 
> 标签：emacs, cscope

使用 cscope 后如何返回到之前的位置，比如在 Emacs 中找到一个函数的定义？因为在了解了一些函数的定义之后，我想继续阅读下面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:48:35.383

也许您需要： (ring-insert find-tag-marker-ring (point-marker)) 在调用 cscope 之前。

我有这个：

```
(defun mmc-find-tag(&optional prefix)
  "union of `find-tag' alternatives. decides upon major-mode"
  (interactive "P")
  (if (and (boundp 'cscope-minor-mode)
           cscope-minor-mode)
  (progn
    (ring-insert find-tag-marker-ring (point-marker))
;; (push-tag-mark)
    (setq cscope-display-cscope-buffer prefix)
    (call-interactively
     (if prefix
         'cscope-find-this-symbol
       'cscope-find-global-definition-no-prompting
       )))
(call-interactively 'find-tag)))

(substitute-key-definition 'find-tag 'mmc-find-tag global-map) 
```

# sql - sql日期选择

> ID：11798114
> 
> 赞同：9
> 
> 时间：2012-08-03T14:52:34.960
> 
> 标签：sql, date

我想编写一个选择语句来从我的数据库中查找日期。

在数据库中，我有一个字段`action_date`作为日期类型，日期如下：`7/12/2012 17:21:33`。如何获取指定日期之后的所有数据？

所以如果我有这样的数据库：

```
7/12/2012 17:21:33
7/12/2012 15:21:35
8/12/2012 8:25:35
9/12/2014 8:25:35 
```

我只想得到这些行：

```
7/12/2012 17:21:33
7/12/2012 15:21:35 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:54:15.020

```
select * from
yourtable where yourDateColumn < '2012-12-8' and yourDateColumn >= '2012-12-07' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:21:49.647

您可以`BETWEEN`用来比较日期：

```
select *
from yourTable
where yourDate between '2012-07-12' and '2012-08-12' 
```

或者，如果您正在寻找一个特别是您可以使用的日期。您可以将 '2012-07-12' 更改为可以传入的参数，以便获得任何日期：

```
select *
from yourTable
where Cast(datediff(day, 0, yourDate) as datetime) = '2012-07-12' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T11:58:24.437

我认为 Julius 是在问如何只获取 7/12/2012 17:21:33 的行

因此，我可以为您提供一种被证明是正确的解决方案：

1) 在 T-SQL Convert function 中查看[T-SQL Convert function](http://technet.microsoft.com/en-us/library/ms187928.aspx)

2）当您查看转换代码时，请注意

![转换代码](../Images/34a3a28c9f86ad2d2d3258cf6ab1c0a4.png)

*图片来源：[http ://technet.microsoft.com/en-us/library/ms187928.aspx](http://technet.microsoft.com/en-us/library/ms187928.aspx)*

现在，当我对这里的理论感到恼火时，这里的代码是：

**对于欧洲**

```
select * from table_name
where convert(varchar, column_that_has_date_in, 104) = '12.07.2012' 
```

**为了我们**

```
select * from table_name
where convert(varchar, column_that_has_date_in, 101) = '07/12/2012' 
```

值得一提的另一件事是，为什么当我们输入 sql 语句时，我们得到 0 行：

```
select * from table_name
where column_that_has_date_in like '%07/12/2012%' 
```

**这是因为查询只查找没有时间部分的日期。**

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-04-14T17:48:57.387

```
SELECT SUM(your_value)  
FROM your_Table 
where value(Date) BETWEEN '2018/04/14' AND '2018/04/14'; 
```

# android - 如何在android中删除标签栏底部不需要的行

> ID：11798119
> 
> 赞同：0
> 
> 时间：2012-08-03T14:52:43.307
> 
> 标签：android, tabs, tabbar

我在每个选项卡的背景上调整了可绘制图像，但是，

它们不会延伸到边界。

选项卡底部有灰色线。如何擦除选项卡中的这条灰线？

似乎基本选项卡的底部属性。

# sql - 根据两个不同的表检索行

> ID：11798122
> 
> 赞同：1
> 
> 时间：2012-08-03T14:52:49.580
> 
> 标签：sql, sql-server

假设我在 SQL Server 数据库中有两个表 (`Emp`和`EmpCopy`)，其中包含以下数据：

案例1：数据`Emp`和`EmpCopy`表格如下所示：

```
Table:  Emp

Id      Name
-----------------
1      Emp_Name
2      Emp_Age
3      Emp_City 
```

表：EmpCopy

```
Id  Name
--------------------
1   Emp_Name
2   Emp_Age 
```

案例 2： Emp 和 EmpCopy 表中的数据如下所示：

```
Table:  Emp

Id      Name
--------------------
1   Emp_Name
2   Emp_Age

Table: EmpCopy

Id      Name
---------------------
1   Emp_Name
2    Emp_Age
3    Emp_City 
```

现在根据上面给出的情况，我想从两个表中检索记录，就像下面给出的

情况1：

```
Id  Emp_Column  EmpCopy_Column
1   Emp_Name    Emp_Name
2   Emp_Age Emp_Age
3   Emp_City    NULL 
```

案例二：

```
Id  Emp_Column  EmpCopy_Column
1   Emp_Name    Emp_Name
2   Emp_Age Emp_Age
3   NULL        Emp_City 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:07:14.077

```
SELECT ISNULL(A.Id,B.Id) Id, A.Name Emp_Column, B.Name EmpCopy_Column
FROM Emp A
FULL JOIN EmpCopy B
ON A.Id = B.Id 
```

# nhibernate - 使用 NHibernate 的唯一复合索引

> ID：11798124
> 
> 赞同：1
> 
> 时间：2012-08-03T14:53:02.260
> 
> 标签：nhibernate, fluent-nhibernate

NHibernate 阻止我在使用单向关联时拥有由外键和列组成的唯一索引。

```
//The classes
public class Method
{
    public virtual Guid ID { get; private set; }
    public virtual List<MethodParameter> Parameters { get; private set; }

    public Method()
    {
        this.Parameters = new List<MethodParameter>();
    }
}

public class MethodParameter
{
    public virtual Guid ID { get; private set; }
    public virtual string Name { get; private set; }

    protected MethodParameter() { }

    public MethodParameter(Method method, string name)
    {
        this.Name = name;
        method.Parameters.Add(this);
    }
}

//The mappings
public class MAP_Method : ClassMap<Method>
{
    public MAP_Method()
    {
        this.Table("[Method]");
        this.Id(x => x.ID).Access.BackingField().GeneratedBy.GuidComb();
        this.HasMany(x => x.Parameters)
            .Access.BackingField()
            .KeyColumn("[Method]")
            .Not.LazyLoad()
            .Cascade.AllDeleteOrphan();
    }
}

public class MAP_MethodParameter : ClassMap<MethodParameter>
{
    public MAP_MethodParameter()
    {
        this.Table("[MethodParameter]");
        this.Map(x => x.Name).Length(50).Not.Nullable();
    }
} 
```

如果我使用两个 MethodParameters（名称：x 和名称：y）创建单个 Method 实例，则没有问题。但是，如果我在同一个事务中使用相同的 MethodParameter 名称创建两个 Method 实例，那么我会遇到唯一索引冲突。

这是因为我在 [MethodParameter] ([Method] ASC, [Name] ASC) 上有一个唯一索引，并且具有单向关联 NHibernate 首先为 [Method] 列插入具有 NULL 的子表，然后返回并更新具有正确 [Method] 值的行。

显然，当插入两个具有相同 MethodParameter 名称的 Method 实例时，这是一个问题，因为我最终得到 (null, "x") (null, "x") 而不是 (Method1, "x") (Method2, "x")

我知道这是设计的行为，但似乎我被迫要么进行双向反向关联，要么从数据库中删除唯一索引。有没有办法让 NHibernate 在插入而不是插入 NULL 然后更新时插入正确的 [方法] ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:33:26.307

由于您的关联是单向的，您必须设置以下选项：`inverse="false"`关联 ( `<one-to-many>`)、`not-null="true"`键 ( `<key>`)。如果您不打算更改参数的所有者，则必须设置`update="false"`键 ( `<key>`)。

它将防止将 null 插入 FK 列。

FluentNHibernate 示例：

```
this.HasMany(x => x.Parameters)
    .Not.Inverse()     // 1
    .Not.KeyNullable() // 2
    .Not.KeyUpdate()   // 3
    .Access.BackingField()
    .KeyColumn("[Method]")
    .Not.LazyLoad()
    .Cascade.AllDeleteOrphan(); 
```

请查看以下答案以获得更好的解释[https://stackoverflow.com/a/7601312/259946](https://stackoverflow.com/a/7601312/259946)和[https://stackoverflow.com/a/11576097/259946](https://stackoverflow.com/a/11576097/259946)

# c# - 如何使用 IWebDriver 获取实际页面源？

> ID：11798125
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:53:02.260
> 
> 标签：c#, selenium

所以有，`IWebDriver.PageSource`但这*不会*返回实际的来源，而是有一些字符转义的混蛋：

> 返回的页面源是底层 DOM 的表示：不要期望它以与从 Web 服务器发送的响应相同的方式进行格式化或转义。

我试图通过使用来解决这个问题，`IWebElement.GetAttribute("innerHTML")`但这也不是实际的 HTML 代码，在这种情况下，所有自结束标记（在普通 HTML 中可以省略结束标记）都变成了开始标记`<link ... />`，`<link ... >`例如使以前有效的 XHTML 文档无效的副作用不是很好。

我仍然希望有一个简单的解决方案，但现在`IWebDriver`由于糟糕的界面/框架设计，单独使用似乎是不可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:13:43.663

可能，您可以调用一个 JavaScript 函数/行，它可以返回您的正文标记的 html，如果这是您唯一需要的想法。

此外，javascript 可能具有返回完整页面源代码的功能。

# wcf - 在 Azure 上托管非 WCF 服务

> ID：11798127
> 
> 赞同：1
> 
> 时间：2012-08-03T14:53:21.420
> 
> 标签：wcf, azure

是否可以在 Azure 上托管非 wcf 服务？我猜不是。但想仔细检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:41:09.293

您可以托管您想要的任何类型的服务。Windows Azure web/worker 角色基本上是带有一些脚手架代码的 Windows Server 2008 VM。在`OnStart()`or`Run()`中，您可以启动一个侦听端口的进程（您还必须为其创建一个输入端点）。那时，您已经启动并运行。这也是您运行 MongoDB 之类的方法（至少是一个独立实例或分片路由器）的方式，您可以在其中打开端口 27017，然后使用该端口号运行 mongod.exe。

请记住：如果您有多个 Web 或辅助角色实例，则流量将在所有实例之间进行负载平衡。因此，您需要保持服务无状态，而不是假设访问者会不断到达特定的角色实例。

**编辑：**快速澄清：您的服务必须基于 tcp、http、https 或 udp，因为这些是当前支持的端口协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T01:54:43.610

据我所知，通过 Windows Azure 服务总线托管非 WCF 服务是不可能的，Clemens Vasters 在 TechEd 上谈到了即将推出的新功能“IIS 混合云桥”，它应该满足这一要求。

更多信息在这里：[http ://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR308](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR308)

看起来这将是一个开源项目。

# java - android中可拖动圆圈内的文本

> ID：11798136
> 
> 赞同：1
> 
> 时间：2012-08-03T14:54:04.147
> 
> 标签：java, android

我正在尝试创建一个 Android 应用程序，用户可以在其中将任何圆圈拖到另一个圆圈上，并且文本框应该显示这两个圆圈的总和。每次程序启动时，它应该显示具有随机位置和随机数从 1 -9 的圆圈。

不幸的是，我已经创建了一个圆圈，但当我尝试拖动它时，应用程序崩溃了。还请帮助我使用该应用程序的其余功能。谢谢。

最终输出应如下所示： ![在此处输入图像描述](../Images/d226ecb5f7c7c85a6507e0f92c39eefe.png)

**MainActivity.java**

```
package com.dragandadd;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.widget.FrameLayout;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FrameLayout main = (FrameLayout) findViewById(R.id.activity_main);
        main.addView(new Ball(this,50,50,25));

        main.addView(new Ball(this,50,50,25));

        main.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent e) {
                float x = e.getX();
            float y = e.getY();
                FrameLayout flView = (FrameLayout) v;
            flView.addView(new Ball(getParent(), x,y,25));
            return true;
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**Ball.java**

```
package com.dragandadd;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.view.View;

public class Ball extends View {
    final float x;
    final float y;
    final int r;
    final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    public Ball(Context context, float x, float y, int r) {
        super(context);
        mPaint.setColor(0xFFFF0000);
        this.x = x;
        this.y = y;
        this.r = r;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawCircle(x, y, r, mPaint);
    }
} 
```

**活动主**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF66FF33" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:00:40.603

我认为您需要为您的`Ball`班级提供第二个构造函数。

```
public ResistorView(Context context, AttributeSet attrs) {
        super(context, attrs); 

    } 
```

看看是否有帮助。我也会使用`RelativeLayout`. 关于移动部分，我认为这不是正确的方法。尝试覆盖类`onToch`中的`Ball`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:02:12.893

使用这个如何拖动图像

[如何在 android 2.2 中实现拖放？](https://stackoverflow.com/questions/9306243/how-to-implement-drag-and-drop-in-android-2-2/11431727#11431727)

还有这个

[http://blahti.wordpress.com/2011/01/17/moving-views-part-2/](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:02:41.517

检查[这个](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)样本。通过本教程，您可以拖放视图，我认为您可以使用 TextView 和 Circle 构建自己的自定义视图并将其拖到屏幕上。

# web-applications - 如何将 favicon.ico 添加到 PHP 网站？

> ID：11798137
> 
> 赞同：4
> 
> 时间：2012-08-03T14:54:03.697
> 
> 标签：web-applications, favicon

我要做的就是在我的 PHP 网站上添加一个 favicon.ico。是否有一种简单的 PHP 方法可以做到这一点，或者只能通过 HTML 参考页面来完成？

也许使用一些 jQuery/Ajax/JavaScript？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T14:57:40.183

默认情况下，大多数浏览器都会尝试解析 favicon.ico，即使您没有在网站的 HTML 中提及它（只需确保该文件位于网站目录的根目录中）。但是，为了兼容性，您应该在网页部分添加它的 html 代码。

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/> 
```

# mysql - 同一mysql实例上大写和小写的数据库

> ID：11798149
> 
> 赞同：1
> 
> 时间：2012-08-03T14:54:40.217
> 
> 标签：mysql, linux, database-schema, uppercase, lowercase

我有两个数据库模式，一个是大写的表，另一个是小写的表：

```
mysql 大写模式 -e '显示表'
+-----------------+
| 大写表 |
+-----------------+
mysql lowercase_schema -e '显示表'
+-----------------+
| 小写表 |
+-----------------+

```

我需要在同一个 mysql 实例上访问两者。问题：lowercase_table 以大写和小写混合形式查询（无法更改查询）：

```
从 LowerCASE_table 中选择 *；

```

我想知道如何使用 mysql 选项，例如`lower_case_table_names`不转储 UPPERCASE_TABLE。

# c++ - 复制一个 const CComPtr

> ID：11798150
> 
> 赞同：0
> 
> 时间：2012-08-03T14:54:40.840
> 
> 标签：c++, atl

我创建了一个新课程。这个类需要一个指向接口的指针。我从另一个班级得到这个指针。

我的会员：CComPtr memberPointerABC；

但是我得到了另一个类的指针作为 CONST。const CComPtr& GetABCPointer();

如何将提供的 const Pointer 设置为我的成员指针？

正常分配不起作用：memberPointerABC=GetABCPointer()

# android - 如何在ormlite中选择所有相关对象（表）的所有行

> ID：11798151
> 
> 赞同：0
> 
> 时间：2012-08-03T14:54:44.490
> 
> 标签：android, ormlite

所以我想知道是否可以选择表的每一行，包括对其他表（对象）的其他引用，例如：

```
class A{
    @DatabaseField  
    int somethingA; 
    @DatabaseField  
    String someStringA;

    @DatabaseField(canBeNull = false, foreign=true, foreignAutoRefresh=true)  
  >>  B instanceB;

    @ForeignCollectionField  
  >>  Collection< C > lotsOfCs;
}

class B{
    @DatabaseField  
    int somethingb; 
    @DatabaseField  
    String someStringB;
}

Classe C{
    @DatabaseField  
    int somethingC; 
    @DatabaseField  
    String someStringC;

    @DatabaseField( foreign=true, foreignAutoRefresh=true)  
   >> A instanceA;
} 
```

那么如何选择表/A类的所有行，包括B和C对象，我需要手动获取B和C吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:47:59.673

不幸的是，[ORMLite](http://ormlite.com/)在从数据库中获取对象时不使用 JOIN，因此无法使用一个查询从多个表中获取结果。

> 我需要手动获取B和C吗？

是的，尽管您*可以*选择让 ORMLite 在单独的查询中为您执行此操作。使用`foreignAutoRefresh = true`，ORMLite 将执行辅助查询以`instanceB`在您获得`A`. 如果您将 an 添加`eager = true`到`lotsOfCs`外部集合，则该查询也将在`A`创建之前关闭。

# php - yii 在管理页面的搜索中添加验证

> ID：11798154
> 
> 赞同：0
> 
> 时间：2012-08-03T14:54:54.120
> 
> 标签：php, yii

我有 coba2 的控制器。在函数 actionAdmin 我将在搜索中添加验证，因为当整数被非整数搜索时，它会给出 SQL 错误

```
CDbCommand failed to execute the SQL statement: SQLSTATE[22P02]: Invalid text representation: 7 ERROR: invalid input syntax for integer: "a" LINE 1: SELECT COUNT(*) FROM "yii_user" "t" WHERE id_user='a' ^. The SQL statement executed was: SELECT COUNT(*) FROM "yii_user" "t" WHERE id_user=:ycp0 
```

这是我在模型上调用验证函数的函数

```
public function actionAdmin()
{
    $model=new coba2('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['coba2']))
                $model->attributes=$_GET['coba2'];

            if($model->validate()){
                $this->render('admin',array(
                        'model'=>$model,
                ));
            } else{
                $model->unsetAttributes();
                $this->render('admin',array(
                        'model'=>$model,
                ));
            }
} 
```

这是我模型中的规则

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('username, password, salt, date_create, date_update, date_birth', 'required'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
                    array('id_user', 'numerical', 'integerOnly'=>true, 'on'=>'search'),
        array('id_user, username, password, salt, date_create, date_update, date_birth', 'safe', 'on'=>'search'),
    );
} 
```

对不起，我的英语不好，但我需要帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:48:20.193

你有 id_user 作为一个`'integerOnly'=>true, 'on'=>'search'`，尝试将以下规则添加到你的模型中，这将强制 id_user 在所有情况下都是数字，而不仅仅是“搜索”：

```
array('id_user', 'numerical', 'integerOnly'=>true), 
```

# eclipse - 我们如何在 Eclipse 的 ProblemView 中获取选定的行？

> ID：11798156
> 
> 赞同：0
> 
> 时间：2012-08-03T14:55:07.893
> 
> 标签：eclipse, eclipse-plugin, eclipse-pde

在我们的 Eclipse 插件中，我们使用了扩展 ProblemView 的问题视图。附加到视图中行的操作之一是属性。当用户单击此操作时，她/他应该会看到有关问题的信息。问题是 ProblemView 中显示的对象属于内部考虑在 eclipse 中使用的类型：`org.eclipse.ui.views.markers.internal.ProblemMarker`使用它会导致警告：

不鼓励访问：由于对所需库 org.eclipse.ui.ide_3.7.0.v20110809-1737.jar 的限制，无法访问类型 ProblemMarker

任何人都知道我们如何在没有收到此警告的情况下将 ProblemView 中的行用作 IMarker 或类似的东西？

我要替换的代码在这里：

```
 Object obj = getStructuredSelection().getFirstElement();
    if (!(obj instanceof ProblemMarker)) {
        return;
    }
    ProblemMarker marker = (ProblemMarker) obj;
    TrayDialog dialog = new TrayDialog(this.part.getSite().getShell(), 
            Messages.propertiesTitle);
    dialog.setMarker(marker.getMarker());
    dialog.open(); 
```

# jquery - 验证出错时是否可以重用 jquery 选择器控件？

> ID：11798159
> 
> 赞同：0
> 
> 时间：2012-08-03T14:55:17.220
> 
> 标签：jquery, asp.net-mvc-3, razor, unobtrusive-validation

我使用带有剃须刀的 ASP.NET MVC 的日期时间选择器，当提交的表单收到验证错误消息时，它不会保留我输入的值，也不会选择器不再工作。发生验证错误后是否可以重用选择器控件？

我对选择器的看法：

```
<div class="editor-label">
    @Html.LabelFor(model => model.StartDateTime)
</div>
<div class="editor-field">
    @Html.TextBox("Start", null, new { @class = "date" })
    @Html.ValidationMessageFor(model => model.StartDateTime)
</div> 
```

jquery 选择器控件：

```
<script src="/Scripts/mobiscroll-2.0.1.custom.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function () {
    var now = new Date();

    $('#Start').scroller({
        preset: 'datetime',
        minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
        theme: 'ios',
        display: 'modal',
        mode: 'scroller'
    });</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:34:06.020

你可以做这样的事情，（如果有语法错误，请原谅）

```
public ActionResult MyView(MyModel model)
{
   if(!ModelState.IsValid())
   { 
     return View("BackToForm", model)
   }
} 
```

这样您就可以保留输入字段中的值。

# python - GAE Python、XML - ElementSoap 和 ElementTree、HTTP 服务器通信 (WSDL)

> ID：11798168
> 
> 赞同：0
> 
> 时间：2012-08-03T14:55:39.110
> 
> 标签：python, xml, google-app-engine, soap, elementtree

这个任务是关于生成会话ID的，这对我来说是全新的，

这里正在使用 GAE，以及我的目标网址： http: **//203.215.51.43/GVSignOn/ExecutePortType** ?WSDL ，对于这个实现，我指的是这些文档[elementsoap](http://effbot.org/zone/elementsoap-1.htm)、[soapWebservice-GAE](http://www.bloing.net/2011/01/soap-webservice-gae-python-howto/)和[Element-Soap](http://www.sis.utoronto.ca/web_services/code_samples.html)

&我也写了一些程序，

```
#!/usr/bin/python

from elementsoap.ElementSOAP import *
from elementtree.ElementTree import Element, SubElement, tostring, QName

NS_SOAP_ENV = "{http://schemas.xmlsoap.org/soap/envelope/}"
NS_XSI = "{http://www.w3.org/2001/XMLSchema-instance}"
NS_XSD = "{http://www.w3.org/2001/XMLSchema}"

class SoapService:
    def __init__(self, url=None):
        self.__client = HTTPClient(url or self.url)
    def call(self, action, request):
       # build SOAP envelope
       envelope = Element(NS_SOAP_ENV + "Envelope")
       body = SubElement(envelope, NS_SOAP_ENV + "Body")
       body.append(request)
       # call the server
       response = self.__client.do_request(
          tostring(envelope),
          extra_headers=[("SOAPAction", action)]
       )

       return response.getroot().find(body.tag)[0]

def SoapRequest(method):
    # create a SOAP request element
    request = Element(method)
    request.set(
       NS_SOAP_ENV + "operation",
       "http://schemas.xmlsoap.org/soap/encoding/"
    )

    return request

def SoapElement(parent, name, type=None, text=None):
   # add a typed SOAP element to a request structure
   elem = SubElement(parent, name)
   if type:
      if not isinstance(type, QName):
          type = QName("http://www.w3.org/2001/XMLSchema", type)
      elem.set(NS_XSI + "type", type)
   elem.text = text
   return elem

class GVService(SoapService):
  url = 203.215.51.43:80/GVSignOn/ExecutePortType
  def SignOnReq(self):
    action = 'urn:stc:egate:jce:prjGV_prjGV_BC_Redeem_OTDs:jcdGV_SignOnWSDL:signOn'
    request = SoapRequest('{' + self.url  + '}SignOnReq')
    SoapElement(request, "TerminalId", "string", 'T1081')
    SoapElement(request, "StoreCode", "string", '1006')
    SoapElement(request, "TimeStamp", "string", '2012-08-03 00:00:00')
    response = self.call(action, request)
    return response.findtext("Msg") 
```

现在叫这个，

**响应 = GVService().SignOnReq()**

但在这里它引发了错误：

**文件“C:\Python25\Lib\site-packages\elementsoap\HTTPClient.py”，第 155 行，在 d o_request 中引发 HTTPError(errcode, errmsg, headers, h.getfile()) elementsoap.HTTPClient.HTTPError: (500, '内部服务器错误'， ， ）**

我无法在我的程序中指出确切的问题。请帮助解决这个问题。

**请注意**：

简而言之，我的输入参数是**TerminalId、StoreCode、TimeStamp** 和期望响应参数是**Code、Msg 和 SessionId** &

我相信，我的错误仅限于书面程序，所以请参考这个**http://203.215.51.43/GVSignOn/ExecutePortType?WSDL**链接以及输入数据和预期输出数据的精确错误。

& 也在这里使用 GAE sdk 1.6.1v, Python2.5 并导入了 elementsoap & elementtree 模块

如果您需要任何其他信息或需要修改查询的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T07:57:39.050

HTTP 状态码 500 是服务器错误，而不是客户端错误。您可能会向服务器发送意外数据，但崩溃的是服务器代码。除非您有权访问服务器日志或获得更详细的错误消息，否则调试它可能非常复杂。

您可以在 ElementSoap 中记录所有 HTTP 请求，并将数据与给定文档进行比较。也许 HTTP 响应正文包含更多信息。

# asp.net-mvc-3 - 局部视图形式 - 需要正确答案

> ID：11798169
> 
> 赞同：2
> 
> 时间：2012-08-03T14:55:55.540
> 
> 标签：asp.net-mvc-3, razor, foreach, model-binding, asp.net-mvc-partialview

[这是部分视图中对 MVC3 表单](https://stackoverflow.com/questions/10808459/mvc3-form-in-partial-view)的跟进

尽管作者给出了解决该问题的方法。我想找出一个正确的答案，为什么这不起作用。

我无法访问原始代码，但这是我的（所以我可以回答以下问题）：

```
// main view (which is partial too)
    @foreach (AddingComponentVM sc in Model)
    {
        @Html.Partial("_SearchIngredientUpdate", sc);     
    }

//partial view
@using (Ajax.BeginForm("IngredientSearchUpdate", new { controller = "Recipe" }, ajxOpt, new { id = "addingWidgetForm" + Model.IngredientID }))
    {           
        @Html.TextBoxFor(model => model.IngredientID)
        @Model.IngredientID
    } 
```

@Model.IngredientID 包含正确的值。但是文本框包含发送到控制器的模型的值（原文如此！），显然每种形式都是相同的。

```
[AjaxOnly]
public JsonResult IngredientSearchUpdate(
    AddingComponentVM dataIn,
    [ModelBinder(typeof(SearchOptionsBinder))] SearchOptions sessionSO) 
```

如果签名中没有添加组件VM 的操作调用上述相同的代码，则表单会正确呈现。

```
public PartialViewResult IngredientSearch([ModelBinder(typeof(SearchOptionsBinder))] SearchOptions sessionSO) 
```

任何人都可以指出这种奇怪（至少对我而言）行为的原因吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:18:04.667

因为这个我睡不着，但这是答案：

使用 PartialView 还是 EditorTemplates 都没有关系。如此处所述：[如何在发送到视图之前在控制器操作中修改已发布的表单数据？](https://stackoverflow.com/questions/2686652/how-to-modify-posted-form-data-within-controller-action-before-sending-to-view?rq=1)

“HTML 助手在尝试查找键时使用以下顺序优先级：

1.  ViewData.ModelState 字典条目
2.  模型属性（如果是强类型视图。此属性是 View.ViewData.Model 的快捷方式）
3.  ViewData 字典条目"

因此，如果发布了任何值，则足以清除 StateModel 集合，然后可以通过使用的 html 助手获取模型中的数据。这可以解决问题：

```
ModelState.Clear() 
```

# magento - Magento 集合未选择属性

> ID：11798175
> 
> 赞同：6
> 
> 时间：2012-08-03T14:56:18.467
> 
> 标签：magento

昨天我写了一些代码来提取产品集合。这段代码工作正常，但是今天，代码没有工作，没有任何改变，我不明白为什么它不能工作。

这是我编码的

```
$collection = Mage::getModel('catalog/product')->getCollection()
->addAttributeToSelect('MPN')
->addAttributeToSelect('JAN')
->addAttributeToSelect('UPC')
->addFieldToFilter(array(
    array('attribute'=>'type_id','eq'=>'simple')
))
->setPage(1,10);
$collection->load();
foreach($collection as $item)
{

echo print_r($item->getdata());
} 
```

昨天我能够看到包含我的 MPN、JAN 和 UPC（这些是后端的自定义属性）的产品列表。今天他们根本不加载。这很奇怪，我想也许我对收藏的理解并没有我想象的那么好。

任何帮助将非常感激。

* * *

**编辑：**

刷新 magento 缓存似乎使一切恢复正常。这是否意味着集合有时会使用缓存，有什么方法可以编写代码使其不使用缓存吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T15:14:39.653

这取决于您在哪里使用您的收藏。如果在前端使用集合并且打开了平面模式，那么您的属性将不可用，因为它们不包含在平面索引中。

要将它们包含到平面索引中，您需要将以下 XML 配置添加到模块的 config.xml 文件中

```
<config>
    <frontend>
         <product>
              <collection>
                   <attributes>
                      <MPN />
                      <JAN />
                      <UPC />
                   </attributes>
              </collection>
          </product>
    </frontend>
</config> 
```

在这种情况下，它将在平面模式下可用。此外，通过将属性添加到此 XML 节点，您的属性也将自动添加到前端的所有产品列表集合中。

享受 Magento 开发的乐趣！

# jquery - jquery 上的功能和文档准备就绪

> ID：11798179
> 
> 赞同：1
> 
> 时间：2012-08-03T14:56:43.523
> 
> 标签：jquery, document-ready, jquery-on

我使用 jQuery [on()](http://api.jquery.com/on/)函数将函数附加`onclick`到我网站中的一组锚点，如下所示：

```
<ul>
  <li>First <a href='#' title='delete' class="itemDelete">x</a></li>
  <li>Second <a href='http://www.repubblica.it' title='delete' class="itemDelete">x</a></li>
  <li>Third <a href='#' title='delete' class="itemDelete">x</a></li>
</ul>​

<script type="text/javascript">
$(document).on('click', '.itemDelete', function(e) {
    $(this).closest('li').remove();
    e.preventDefault();
});
</script> 
```

我应该在以下块中插入 javascript 代码吗？

```
$(document).ready(function() {
  ...
}); 
```

如果是，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:01:00.807

这段代码在任何情况下都不需要完全解析文档内容，因为您使用`document`的是始终存在的。作为第二个参数传递的选择器不会以任何方式用于检索元素，因此 dom 不需要为此做好准备。

`$(document).ready`如果不是上述情况，您将无法首先致电。

重要的是要了解在幕后您将直接、正常的事件侦听器附加到`document`. 选择器实际上所做的就是如果在事件传播路径中没有元素匹配您的选择器，则不会调用您的处理程序回调。显然，如果传播被较低级别的侦听器过早地停止，那么在这种情况下也不会被触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:59:36.897

在这种情况下，您不需要这样做。由于`<script>`标签位于元素的 HTML 之后，因此您的代码将在元素加载**后**执行，无需使用 DOM 就绪事件处理程序来确保它们已被加载。

也就是说，我通常更喜欢将我的**所有**与页面上的元素一起工作的 JavaScript 代码包含在一个 DOM 就绪事件处理程序中，即使它不是绝对必要的；这样，如果我决定将其移至其他位置 - 例如页面顶部或外部文件 - 或以其他方式更改它不会中断。

# jquery - jquery 淡入淡出 - 到

> ID：11798183
> 
> 赞同：0
> 
> 时间：2012-08-03T14:56:53.590
> 
> 标签：jquery, fade

我喜欢整个 jQuery.fadeOut 之类的东西，但我一直想做的（不摆弄愚蠢的 CSS）只是设置一个状态从 FROM 淡出，然后再淡入淡出。

我只知道该怎么做：

```
$(".hoverTest").hover(
function () {
    $("#user").fadeOut(100,function () {$("#mydiv").html('foo');}).fadeIn(); 
},
function() {
    $("#user").fadeOut(100,function () {$("#mydiv").html('bar');}).fadeIn(); 
            }
); 
```

当然，这会在移动 .hoverTest 对象的鼠标时将 #mydiv 淡化为 foo，然后在鼠标移出时淡化为 bar。

但是我希望能够在 jQuery 中做的就是剪掉淡出、更改 div、淡入方法并设置一个状态以将当前 div 淡化*为*.

这可能/任何人都知道一种方式/理解我的意思吗？:)

编辑：

因此，实际上，如果您在 50% 处暂停动画，您会看到两种状态（从和到）都处于 50% 的不透明度。如果这还没有完成，那么应该有人这样做或将其添加到 jQuery 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:02:18.310

只需同时淡入和淡出，而不是一个接一个。在您的示例中，fadeIn 仅在fadeOut 完成后发生，因为它是在fadeOut 的回调函数中定义的。

```
$(".hoverTest").hover(
function () {
    $("#user").fadeOut(100)
    $("#mydiv").html('foo').fadeIn(); 
},
function() {
    $("#user").fadeOut(100)
    $("#mydiv").html('bar').fadeIn(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:23:04.720

**我找到了答案！**

我做了一些数学运算（这很有趣，因为我解决了它）这是我需要提出的最终功能。设置一个`<a>`带有 class of 的标签，`hoverInfo`然后 bar 'users'（或任何你想称呼它的）似乎会在两者之间交叉淡入淡出，并从 'rel' 语句中收集新信息。或者数据。管他呢。:P

**js小提琴：http:** [//jsfiddle.net/8h5CW/](http://jsfiddle.net/8h5CW/)

**jQuery代码：**

```
$(".hoverInfo").hover(
    function () {
        var tmpInfo = $(this).attr("rel");
        $("#hoverInfo").css("display","none").html(tmpInfo);
        var dW = $("#defaultInfo").outerWidth();
        var hW = $("#hoverInfo").offset().left + $("#hoverInfo").outerWidth();
        var defX = $("#defaultInfo").position().left; 
        var newPos = (defX-(hW-dW));
        $("#hoverInfo").css("left",newPos+"px");
        $("#defaultInfo").fadeOut(1000);
        $("#hoverInfo").fadeIn(1000);
    },
    function() {
        $("#defaultInfo").fadeIn(1000);
        $("#hoverInfo").fadeOut(1000);
    }
); 
```

**HTML：**

```
<div id="users" style="position: relative; display: block; border: 1px solid #00f; width: 500px; padding: 10px; height: 20px;">
    <span id="defaultInfo" style="position: relative; float: right;">
    I would like this to fade out yes.</span>
    <span id="hoverInfo" style="position: absolute;"></span>
</div> 
```

在我的网站上进行测试后，出于某种原因，在我想在其上使用它的页面中，我不得不每次都重置 .LEFT，而不是：

```
$("#hoverInfo").css("display","none").html(tmpInfo); 
```

我只是将其更改为：

```
$("#hoverInfo").css("left","0px").css("display","none").html(tmpInfo); 
```

如果有人能想到一个更快、更聪明的方法来做到这一点，我很想知道。

**感谢您的回答，我希望这对其他人有所帮助。我将来会经常使用这个功能**

# asp.net - 如何在不重新加载页面的情况下在 asp 表单中获取按钮？

> ID：11798187
> 
> 赞同：0
> 
> 时间：2012-08-03T14:57:22.310
> 
> 标签：asp.net, ajax, vb.net

所以我有这个更新面板，它运行良好。

```
 <div>
        <button id="foo" onclick="changeVal(this.id);">Send the ID "foo"...</button>
    </div>

<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server" >
</asp:ScriptManager> 
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Always"> 
<ContentTemplate> 

<div id="thethetext">
<asp:Literal ID="thetext" runat="server"></asp:Literal>
</div>

</ContentTemplate> 
<Triggers>
<asp:AsyncPostBackTrigger ControlID="myButton" EventName="Click"/>
</Triggers>
</asp:UpdatePanel>

   **<!-- MOVE BUTTON (ID="foo") OVER HERE TO DISPLAY IT UNDER THE LITERAL -->**

<asp:HiddenField ID="blah" runat="server" value="Initial Value"></asp:HiddenField>
<asp:Button ID="myButton" Text="Get Concatenated..." OnClick="Test" runat="server"></asp:Button>    
</form> 
```

但是，我想在 asp 表单中移动按钮（id 为“foo”）。所以它显示在文字用户控件下......但如果我这样做，每次我点击它时，它都会重新加载页面。有没有办法避免这种情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:06:57.153

它会重新加载页面，因为您的按钮提交了您刚刚放入的表单。为您的按钮`type`提供具有值的属性，`button`这样它就不会提交：

```
<div>
 <button type="button" id="foo" onclick="changeVal(this.id);">Send the ID "foo"...</button>
</div> 
```

参考：[W3C HTML 4.01 规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)

# cmake - 取消外部项目时出现Cmake错误

> ID：11798188
> 
> 赞同：4
> 
> 时间：2012-08-03T14:57:25.883
> 
> 标签：cmake

我正在使用 cmake 模块 ExternalProject 来构建 libcurl 和第三方库。如果我在中间取消构建并尝试再次运行

我收到以下错误

```
-- curl version=[7.24.0]
CMake Error at CMake/OtherTests.cmake:89 (message):
  Unable to link function recv
Call Stack (most recent call first):
  CMakeLists.txt:795 (include)

-- Configuring incomplete, errors occurred!
make[2]: *** [lib/linux/gcc/src/libcurl-stamp/./libcurl-configure] Error 1
make[1]: *** [CMakeFiles/libcurl.dir/all] Error 2
make: *** [all] Error 2 
```

# jquery - 检索外部网站 chrome 扩展的源代码

> ID：11798191
> 
> 赞同：0
> 
> 时间：2012-08-03T14:57:38.497
> 
> 标签：jquery, google-chrome-extension

我正在尝试提取外部网站的源代码以创建 chrome 扩展。

在 popup.html 中

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
<script>
$(document).ready(function()
{
    $.get("http://www.espncricinfo.com/",function(data){
        $('body').text(data);
        });
        }); 
```

这是提取html源代码。我在清单文件的权限标签中添加了网站。但是没有输出。谁能让我知道我哪里出错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:47:40.193

不要在 popup.html 中使用内置脚本，而是必须使用外部 js 文件，请参阅[Content Security Policy](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)。

像这样的东西：

```
<script src="jquery.min.js"></script>
<script src="popup.js"></script> 
```

如果它仍然不起作用，您应该在此处复制清单文件。

# asp.net - 自动完成 json 问题

> ID：11798195
> 
> 赞同：0
> 
> 时间：2012-08-03T14:57:47.297
> 
> 标签：asp.net, json

我的网络服务方法如下：

```
 <WebMethod()> _
    Public Function TravelMeansList(ByVal prefix As String) As List(Of HRM_travellingMeans)
        Dim ctx As New HRMEntities
        Dim query = From c In ctx.HRM_travellingMeans Where c.name.ToUpper.StartsWith(prefix) Select c

        If query.Count > 0 Then
            Return query.ToList()
        Else
            Return Nothing
        End If

    End Function 
```

我的脚本如下

```
<script type="text/javascript">
     $(document).ready(function () {

         $("#<%=travelmeansTextBox.ClientID %>").autocomplete({

             source: function (request, response) {
                 $.ajax({
                     url: '<%=ResolveUrl("../../services/ApplicationService.asmx/TravelMeansList") %>',
                     data: "{ 'prefix': '" + request.term + "'}",
                     dataType: "json",
                     type: "POST",
                     contentType: "application/json; charset=utf-8",
                     dataFilter: function (data) { return data; },
                     success: function (data) {
                         response($.map(data.d, function (item) {
                             return Json({

                                    value: item.name
                             })
                         }))
                     },
                     error: function (response) {
                         alert(response.responseText);
                     },
                     failure: function (response) {
                         alert(response.responseText);
                     }
                 });
             },
             select: function (e, i) {

             },
             minLength: 1
         });

     });
    </script> 
```

我的问题是，每当我尝试在文本框中输入任何字母时，都会出现此错误

在 System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 深度、Hashtable objectsInUse、SerializationFormat serializationFormat、MemberInfo currentMember)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat, MemberInfo currentMember)\r\ n 在 System.Web.Script.Serialization.JavaScriptSerializer.SerializeCustomObject(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer。SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat, MemberInfo currentMember)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat, MemberInfo currentMember)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer.SerializeEnumerable ......序列化枚举......序列化枚举......

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:58:53.327

问题可能在于实体框架对象的 JSON 序列化。参考这篇文章：

[http://mytechworld.officeacuity.com/index.php/2010/02/serializing-entity-framework-objects-into-json-using-asp-net-mvc/](http://mytechworld.officeacuity.com/index.php/2010/02/serializing-entity-framework-objects-into-json-using-asp-net-mvc/)

此处的作者建议您在使用 ASP.NET MVC 时使用 JSONResult 对象，但我不确定它与 jQuery Autocomplete 的效果如何。

# algorithm - 整数支付函数（插入“预期”值，输出“乐趣”最大化的分布）

> ID：11798197
> 
> 赞同：4
> 
> 时间：2012-08-03T14:57:58.920
> 
> 标签：algorithm, random, statistics, game-theory, gambling

在我们的游戏中有几个实例，我们希望在给定预期输出值的情况下随机化“支出”。例如，我们不是每次都奖励“10 个学分”，而是希望从长远来看平均奖励 10 个学分，并加入一些随机性，目的是让它变得更“有趣”，让它变得有点不可预测。

随意更改它甚至使其成为正态分布很容易，但这并没有真正针对“乐趣”进行优化。用户在 5 到 15 积分之间的效用差异相对较小，但如果有机会偶尔赢得 100 积分，那将是一个很大的抽奖，值得期待。

有没有针对赌徒优化的算法？它基本上是一个超级简单的老虎机——我希望有人做过研究，以确定是什么让这种东西上瘾和有趣，但我什至不知道从哪里开始寻找这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:47:44.263

[本文](http://jgi.camh.net/doi/full/10.4309/jgi.2009.23.5)详细介绍了老虎机所使用的一些算法 ，包括创建“险胜”、“奖金模式”的常用方法，让赌博变得更有趣。

[这是另一篇论文](http://www.springerlink.com/content/g034213244hqk66h/)。尽管您可能需要在大学才能访问这本书的全文（除非您想为此付费）。

我不知道是否有人编写了实现这些方法的程序，但我希望旧机器中使用的想法在数字世界中仍能以某种方式发挥作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:56:56.983

我认为 lavin 发布的论文听起来很有趣，应该研究一下，但在不了解老虎机算法的情况下，我会建议一些简单的东西。简单的做法是从两个不同的分布中随机选择，如下所示：

```
在 [0,1] 上选择一个随机均匀的 U
if (U <= p) 从 N(10,2.5) 中选择一个随机法线
if (U > p) 从 N(100,10) 中选择一个随机法线

```

在这里，您只需将 p 设置为奖励来自不太令人兴奋的分布的概率（显然 1-p 是它来自更令人兴奋的分布的概率）。您不需要对这些分布使用正态分布。更多的制服也可以。

# java - 从命令行打开指定 Eclipse 项目中的 .java 文件

> ID：11798201
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:58:15.783
> 
> 标签：java, eclipse, file, command

`--launcher.openFile`打开文件而不将其分配给任何项目，因此代码辅助等不同功能不起作用。我实际上是在尝试自动创建一个源文件并希望像我在 eclipse 中默认创建它一样对其进行编辑。

```
private void openInEclipse(File file) throws IOException {
    String eclipsePath = "G:/eclipse/eclipse-java-juno-win32/eclipse/eclipse.exe";
    Runtime.getRuntime().exec(new String[]{eclipsePath, file.getAbsolutePath()});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:14:13.423

让生成器将文件写入一个称为 eclipse 的源目录的目录中。当您还在 Eclipse 中启用自动刷新时，它会在您使用启动器打开新生成的文件时更新它的索引。

# mysql - 如何跨多种数据库类型测试 SQL 语句？

> ID：11798211
> 
> 赞同：1
> 
> 时间：2012-08-03T14:59:13.707
> 
> 标签：mysql, sql, sql-server, sugarcrm

有谁知道一个快速简单的测试来查看查询是否为 MySQL 和 MSSQL 正确格式化。也许还有其他数据库类型，例如 SQL Server？我目前只能访问 MySQL。

信息：我正在开发一个名为 JJWDesign Google Maps for SugarCRM 的开源项目。一些查询使用 SugarCRM 类；其他我必须写自定义。例如，有些是针对存储在表格中的地理编码信息的特殊距离计算。

[http://www.sugarforge.org/projects/jjwgooglemaps/](http://www.sugarforge.org/projects/jjwgooglemaps/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:04:57.040

更重要的是，虽然有一种公认的语法，但每种类型的数据库都有自己的特定功能、特性和您可以做的事情。

您能做的最好的事情就是使用最基本的功能。与 mysql 和 db2 相比，Oracle 对 datetime 有不同的功能。虽然我很乐意协助“像啤酒一样免费”项目，但您确实需要检查每个功能，看看它是否在所有主要供应商中都相同。一般功能通常是，所以`abs()`会相当一致，但其他人根本不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:16:06.500

您正在谈论 SQL 解析器，因此根据定义，它要么不会快速简单，要么只会进行最简单的检查。

每个 RDBMS 也有自己的 SQL 风格，所以你真的只能测试它是否是 ANSI SQL。

# jquery - 如何在页面上动态加载字符串和子字符串时查看字符串是否包含子字符串

> ID：11798212
> 
> 赞同：0
> 
> 时间：2012-08-03T14:59:13.753
> 
> 标签：jquery, jquery-ui

当子字符串已知时，我发现了很多关于“字符串包含特定子字符串”的帮助，因此我们可以指定类似 - "Number".in(Str)) OR Str.indexOf("Number")

但在我的情况下，字符串和子字符串都是在运行时加载的，所以我尝试了 -

```
function compareTables1(row,kk) {

 $('#table2 tr').each(function(p) {
     if (!this.rowIndex) return; // skip first row

    var customer = $(this).find("td").eq(0).html();
    if (customer.trim() == row.trim()) {
      checkme(this, kk);
    }       
     else
     {
         if (row.in(customer)) {  //why this does not work????
         alert("success sub str check");

     }}});   
  } 
```

整个代码的链接是 - [http://jsfiddle.net/w7akB/55/](http://jsfiddle.net/w7akB/55/)

我正在学习 Jquery 并且肯定在这里遗漏了一些小东西。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:11:02.890

使用 indexOf 作品。使用 indexOf 时，当值为 -1 时，它不包含字符串。

这是因为你需要修剪你的字符串。更新小提琴作品

```
if (customer.indexOf(row.trim()) > -1) { 
```

[http://jsfiddle.net/w7akB/60/](http://jsfiddle.net/w7akB/60/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:11:33.110

如果要检查一个字符串是否包含在另一个字符串中，最简单的方法是使用该`indexOf()`函数。当使用两个包含字符串的变量调用时，它应该工作得很好，所以`customer.indexOf(row)`应该适合你。

请注意，如果`row`不包含在 中`customer`，则调用`indexOf()`将返回 -1。因此，您希望您的`if`陈述条件为：

```
if(customer.indexOf(row) != -1) 
```

# data-access-layer - 是否有 web2py 的 DAL 的命名约定列表？

> ID：11798213
> 
> 赞同：0
> 
> 时间：2012-08-03T14:59:16.093
> 
> 标签：data-access-layer, web2py

[显然，DAL/web2py 的隐式命名约定与 Rose::DB::Object 采用的约定](http://search.cpan.org/dist/Rose-DB-Object/lib/Rose/DB/Object/ConventionManager.pm#SUMMARY_OF_DEFAULT_CONVENTIONS)不同，但我在任何地方都没有看到任何明确的此类约定列表。

在使用 DAL 对数据进行建模时，是否有一套原则可以指导表和列的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:42:02.127

没有强加任何要求，因此请随意遵循您喜欢的任何约定。我认为您指出的许多约定通常在 web2py 代码中遵循，尽管似乎更倾向于使用单数表名，并且外键列名通常只是外表名，没有将“_id”加入结尾。默认情况下，所有表都有一个名为“id”的自动递增 id 字段，但您可以根据需要更改该名称。

# java - 在元素上设置命名空间属性

> ID：11798216
> 
> 赞同：5
> 
> 时间：2012-08-03T14:59:28.963
> 
> 标签：java, xml, xml-namespaces, setattribute

我正在尝试在 Java 中创建一个包含以下元素的 XML 文档：

```
<project xmlns="http://www.imsglobal.org/xsd/ims_qtiasiv1p2" 
         xmlns:acme="http://www.acme.com/schemas"
         color="blue"> 
```

我知道如何创建项目节点。我也知道如何使用设置颜色属性

`element.setAttribute("color", "blue")`

我是否使用 setAttribute() 以相同的方式设置 xmlns 和 xmlns:acme 属性，还是因为它们是命名空间属性而以某种特殊方式进行设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T15:17:30.307

我相信你必须使用：

```
element.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:acme", "http://www.acme.com/schemas"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:34:07.263

我认为下面的代码不会解决这个问题！

```
myDocument.createElementNS("http://www.imsglobal.org/xsd/ims_qtiasiv1p2","project"); 
```

这将创建一个元素如下（使用 DOM）

```
<http://www.imsglobal.org/xsd/ims_qtiasiv1p2:project> 
```

所以这不会向元素添加命名空间属性。所以使用 DOM 我们可以做类似的事情

```
Element request = doc.createElement("project");

Attr attr = doc.createAttribute("xmlns");
attr.setValue("http://www.imsglobal.org/xsd/ims_qtiasiv1p2");

request.setAttributeNode(attr); 
```

所以它会像下面这样设置第一个属性，你可以用同样的方式设置多个属性

```
<project xmlns="http://www.imsglobal.org/xsd/ims_qtiasiv1p2> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-23T13:19:57.613

简短的回答是：您不会自己创建 xmlns 属性。Java XML 类库会自动创建这些。默认情况下，它会自动创建命名空间映射，并根据一些内部算法选择前缀。如果您不喜欢 Java XML 序列化程序分配的默认前缀，您可以通过创建自己的命名空间解析器来控制它们，如本文所述：

[https://www.intertech.com/Blog/jaxb-tutorial-customized-namespace-prefixes-example-using-namespaceprefixmapper/](https://www.intertech.com/Blog/jaxb-tutorial-customized-namespace-prefixes-example-using-namespaceprefixmapper/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:20:11.450

您可以在创建元素时简单地指定命名空间。例如：

```
myDocument.createElementNS("http://www.imsglobal.org/xsd/ims_qtiasiv1p2","project"); 
```

然后，java DOM 库将为您处理命名空间声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-17T18:42:42.333

在 2019 年，唯一对我有用的方法是使用 attr() 方法：

```
Element element = doc.createElement("project");
element.attr("xmlns","http://www.imsglobal.org/xsd/ims_qtiasiv1p2"); 
```

# c++ - 为什么我们把 else 放在宏的末尾

> ID：11798218
> 
> 赞同：0
> 
> 时间：2012-08-03T14:59:30.950
> 
> 标签：c++

> **可能重复：**
> [为什么在 C/C++ 宏中有时会出现无意义的 do/while 和 if/else 语句？](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)

```
#define QL_REQUIRE(condition,message) \
if (!(condition)) { \
    std::ostringstream _ql_msg_stream; \
    _ql_msg_stream << message; \
    throw QuantLib::Error(__FILE__,__LINE__, \
                          BOOST_CURRENT_FUNCTION,_ql_msg_stream.str()); \
 } else 
```

如何使用它：

```
void testingMacros1 (){
   double x =0.0;
   QL_REQUIRE (x!=0 ," Zero number !");
} 
```

为什么宏最后会注入a `else`？

# java - Java：回车返回填充 js 代码中的 var？

> ID：11798221
> 
> 赞同：0
> 
> 时间：2012-08-03T14:59:39.527
> 
> 标签：java, javascript

我不确定这是否可能，但我正在尝试为这种情况找到一个前端解决方案：

我正在将 JavaScript 变量设置为由后端 Java 代码填充的动态标记：

```
var myString = '@myDynamicContent@'; 
```

但是，在某些情况下，输出的内容包含回车；这破坏了代码：

```
var mystring = '<div>
                Carriage Return happened above and below.
                </div>'; 
```

无论如何我可以在前端解决这个问题吗？或者在脚本中做些什么是否为时已晚，因为动态标签将在任何 JavaScript 运行之前运行（因此脚本在那时被破坏了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:42:15.443

我确信我的 JS 可以被清理（只是觉得这是一个有趣的问题），但是你可以在 JS 中搜索评论。

假设您的 JS 看起来像这样（注意到我在评论中添加了一个标签，因此我们知道我们正在寻找正确的标签，并且有一个 div 仅用于测试）：

```
<script id="testScript">
/*<captureMe><div>
  Carriage Return happened above and below.
  </div>
*/
var foo = 'bar';
</script>
<div id='test'>What do I see:</div> 
```

只需使用它来获取评论：

```
var something = $("#testScript").html();
var newSomething = '';
newSomething = something.substr(something.indexOf("/*<captureMe>")+13);
newSomething = newSomething.substr(0, newSomething.indexOf("*/"));
$('#test').append('<br>'+newSomething);  // just proving we captured the output, will not render returns or newline as expected by HTML 
```

从技术上讲，它可以工作:)，脚本脚本......

炭火

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:08:54.217

JavaScript 通过在行尾放置反斜杠 ( ) 来支持可以跨多行的字符串，`\`例如：

```
var myString = 'foo\
bar'; 
```

因此，当您写入服务器端变量时，您应该能够进行 Java 替换：

```
var myString = '@myDynamicContent.replaceAll("\\n", "\\\\n")@'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:04:08.090

分别用`\n`和/或替换和/或......但必须用服务器端语言（在你的情况下是Java）中完成；它不能在 JavaScript 中完成。`\r``\\n``\\r`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:29:56.887

根据@Charbs 的回答，如果您为脚本标签提供不同的 mime 类型，则可以避免 JavaScript 注释，因此浏览器不会尝试将其评估为 JavaScript：

```
<script id="testScript" type="text/notjs" style="display:none">@myDynamicContent@</script> 
```

然后像这样抓住它（使用jQuery）：

```
var myString = $('#testScript').text(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T20:57:02.893

对我来说，您似乎在进行令牌替换而不是使用模板引擎。如果你喜欢令牌替换，你也可以[使用 Snippetory](http://www.jproggy.org/snippetory)，因为它会创建类似的代码。但是，它具有许多附加功能。使用

`var myString = '{v:myDynamicContent enc="string"}'`

会创造

```
var mystring = '<div>\r\n          Carriage Return happened above and below.\r\n                </div>' 
```

从而解决您的问题。但是你也必须改变你的代码。

# c - 消息的 Adler32 + adler 总和是否为零（如 CRC32）

> ID：11798222
> 
> 赞同：4
> 
> 时间：2012-08-03T14:59:40.603
> 
> 标签：c, algorithm, checksum, adler32

CRC-32 有一个奇妙的特性，即在消息的末尾附加一个 CRC，可以通过计算整个事物的 CRC 来对消息进行验证，如果校验和通过，最终结果将为零。

这个属性是否应该适用于 CRC-32 的兄弟 Adler32？

简短的回答似乎是“不”，但我只是想确保我没有遗漏任何东西。

使用此处的示例消息[http://en.wikipedia.org/wiki/Adler-32](http://en.wikipedia.org/wiki/Adler-32)，我使用 zlib 实现编写了下面的测试程序

```
#include <zlib.h>
#include <stdio.h>
#include <string.h>

void print_sum( const char * str )
{
   uLong asum = 0;
   asum = adler32( 0, Z_NULL, 0 );
   asum = adler32( asum, str, strlen(str) );
   printf( "%x\n", asum);
}

int main (int argc, char** argv)
{
   const char * msg1 = "Wikipedia";
   const char * msg2 = "Wikipedia\x98\x03\xe6\x11";
   const char * msg3 = "Wikipedia\x11\xe6\x03\x98";

   print_sum( msg1 );
   print_sum( msg2 );
   print_sum( msg3 );
} 
```

这些是结果：

```
11e60398
248c052a
23da052a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:07:53.443

如您所见，答案是否定的。检查值不需要该属性。事实上，大多数 CRC 检查实现最后都不会运行 CRC。他们只是检查计算的 CRC 是否等于存储的 CRC。

# asp.net - ASP.NET VB.NET 数据表需要做group by

> ID：11798223
> 
> 赞同：0
> 
> 时间：2012-08-03T14:59:47.997
> 
> 标签：asp.net, vb.net

我正在使用带有 VB.net 的 ASP.NET 3.5 我有一个这样的 DataTable。

```
RpID       LocationServed
----       --------------
1          St. Louis
1          Baltimore
1          Columbus
2          Chicago
2          St. Charles
2          Peoria
2          Nashville
3          Dallas
3          Miami
3          Indianapolis 
```

对于每个代表，我需要发送一封电子邮件，其中包含他们所有的位置服务。

我不太确定如何做到这一点。我正在使用 ASP.NET 4

我的计划是有 2 个循环

```
 <loop1 that has the group by of RepID>

     <loop2 can go through the list of items for a given RepID >

      strCity = do processing here that will compile a list of the cities for a given rep

     </loop2 end>

     <send out email a given RepID and then reset strCity >

   <loop1 end> 
```

但不太确定解决此问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:17:18.893

您可以通过以下三种方式之一执行此操作。

假设DataTable按RpID排序，有一个循环，处理每个城市。当 RpID 发生变化时，发送电子邮件。

或者...

在数据表上循环。当 RpID 发生变化时，在数据表上调用[.Select并根据 RpID 进行过滤。](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)循环返回的 DataRows 数组并处理每个城市。发送电子邮件。

或者...

由于您使用的是 ASP.NET 4，因此您可以使用 LINQ 查询从数据表中获取不同的 RpID 列表，在该 RpID 列表上循环，然后在循环中，对数据表使用 LINQ 查询以获取列表该 RpID 的数据表中的城市。发送电子邮件。看[这里](http://blogs.msdn.com/b/vbteam/archive/2008/05/14/how-linq-to-dataset-works-in-vb-jonathan-aneja.aspx)（这谈到了一个数据集，但实际上是一回事）

请注意，对于这些方法中的任何一种，您都必须在循环之后进行检查，以便为最后处理的 RpID 发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:20:48.890

您可以在两个单独的循环中完成所有这些处理。

1.  创建一个字典（可能已排序），其中包含`Repid`作为键的 s 和作为值的城市列表。
2.  处理字典。对于每个键，获取相关列表（可能对其进行排序）并发送电子邮件。

它会比你提议的要快得多。IIRC #1 也可以完全在一个 LINQ 语句中完成，请参阅：[How to: Group Elements in a Sequence (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb386922.aspx)

编辑：这个stackoverflow问题似乎与[Efficient DataTable Group有关](https://stackoverflow.com/questions/8472005/efficient-datatable-group-by)

# c++ - 通过指针创建字符串

> ID：11798233
> 
> 赞同：3
> 
> 时间：2012-08-03T15:00:07.313
> 
> 标签：c++, string, pointers

我了解到指针指向内存地址，因此我可以使用它来更改在该地址设置的值。所以像这样：

```
int *pPointer = &iTuna; 
```

`pPointer`这里有 的内存地址`iTuna`。所以我们可以`pPointer`用来改变 处的值`iTuna`。如果我打印`pPointer`内存地址，则打印内存地址，如果我打印，则打印值`*pPointer`at`iTuna`

现在看到这个程序

```
 char* pStr= "Hello !";
cout<< pStr << endl;
cout<< *pStr << endl;
system("PAUSE");
return 0; 
```

这里有很多我不明白的东西：

1.  在“你好！” 每个字母单独存储，一个指针保存一个内存地址。那么如何`pStr`指向所有的字母。

2.  此外，当我打印出来时，`pStr`它会打印*Hello ！*，而不是内存地址。

3.  当我打印出来时，`*pStr`它只打印出*H* ，而不是所有`pStr`指向的内容。

我真的无法理解，这些都是我的担忧。我希望有人可以向我解释这是如何工作的广告帮助我理解

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T15:04:14.647

1.  `"Hello !"`是一个类型和值的**数组**。是指向其第一个元素的指针；它的最后一个元素的值为。`char const[8]``{ 'H', 'e', 'l', 'l', 'o', ' ', '!', 0 }``pStr``0`

2.  iostreams 库中有一个`char const *`参数的重载，它将参数视为指向数组第一个元素的指针，并打印每个元素，直到遇到零。（口语中的“空终止字符串”。）

3.  取消引用指向数组第一个元素的指针会为您提供数组的第一个元素，即`'H'`. 这等同于`pStr[0]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:06:19.600

1-) 由于`pStr`指向 a `char`，它实际上指向 a 数组的开头[`null terminated string`](http://en.wikipedia.org/wiki/Null-terminated_string)

2-)`cout`被`char *`参数重载。它将打印出字符串中的任何字符，直到它到达`null character`

3-) 您正在取消引用指向字符数组第一个元素的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:04:32.173

> 1-) 在“你好！” 每个字母单独存储，一个指针保存一个内存地址。那么 pStr 如何指向所有的字母。

字母以该顺序存储在每个存储单元中，并有一个额外的最后一个单元保存 0 以标记结束。

> 2-)此外，当我打印出 pStr 时，它会打印 Hello ！不是内存地址。

`cout <<`理解您指向一个字符串，因此打印该字符串。

> 3-)当我打印出 *pStr 时，它只打印出 H ，而不是 pStr 指向的所有内容。

这`*`意味着您要求该地址的价值。 `cout <<` 知道该地址包含一个字符，因此打印该字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:05:56.353

您对指针的理解在所有方面都是正确的。

您的问题是 << 运算符已被流上的各种数据类型覆盖。因此，标准库编写者让操作符 << 对 char * 类型的任何变量执行特定操作（在这种情况下，特定操作意味着在该地址输出字符，直到您到达字符串标记的末尾），而不是什么您期望它这样做（以十进制或十六进制打印地址）

同样， << 运算符已被 char 覆盖以仅输出单个字符，如果您稍微考虑一下，您会意识到 *pStr 是一个指向字符的取消引用指针 - 也就是说它是一个字符 - 因此它只是打印一个字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T15:08:26.877

1.  您还需要了解字符串的概念。在 C 和 C++ 中，字符串是在内存中一个接一个地定位的几个字符（char），基本上是 'H','e','l','l','o','\0'。您的指针保存第一个符号的内存地址，并且您的 C++ 库知道字符串是从该地址开始并以 '\0' 结尾的所有内容。

2.  当您将 char* 传递给 cout 时，它知道您输出了一个字符串，并将其打印为字符串。

3.  构造 *pStr 的意思是“给我任何位于存储在 pStr 中的地址的东西”。那将是 char - 单个字符 - 'H'，然后将其传递给 cout，并且您只会打印一个字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T15:12:46.940

1.  指针指向`*pStr`特定的内存地址，但该内存地址不仅可以用作单个元素，即 a `char`，还可以用作此类元素的*数组*或内存块的开头。

2.  `char`数组是 C 中的一种特殊类型的数组，因为某些操作以特定方式处理它们：作为*字符串*。因此，`printf("%s", ...`并且`cout`知道当给定 a 时，`char *`他们应该寻找一个字符串，并打印所有字符，直到终止`null`字符。此外，C 提供了一个*字符串库*，其中包含旨在操作`char *`字符串等函数的函数。

3.  这种行为就像您从自己的分析中所期望的那样：取消引用`pStr`只是为您提供内存地址处的值，在这种情况下是内存中数组的第一个元素`chars`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T15:08:01.203

1.  指向数组的指针（C 风格的字符串是 char 数组）只是指向数组第一个元素的指针。

2.  << 运算符为 char* 类型重载以将其视为 C 样式字符串，因此当您将 char* 传递给它时，它会从您给它的指针开始并不断向它添加 1 以查找下一个字符，直到它找到表示字符串结束的空字符。

3.  当您取消引用指针时，您得到的类型是 char 因为指针实际上只指向数组中的第一项。<< for char 的重载不会将其视为字符串，而是将其视为单个字符。

像这样使用字符串是 C 风格的代码。使用 C++ 时，您应该改用 std::string。它更容易使用。

# iphone - CADisplayLink Timestamp 在设备上的行为很奇怪

> ID：11798235
> 
> 赞同：2
> 
> 时间：2012-08-03T15:00:20.883
> 
> 标签：iphone, objective-c, ios, timer, cadisplaylink

对于我的游戏循环和某些动画，我想知道自上次调用 render: 方法以来经过的时间间隔。

为此，我使用 CADisplayLink 并获取当前时间戳并减去最后一次调用的时间戳。这应该给我两个帧/调用之间的正确时间间隔。

在模拟器中运行应用程序时，我得到了各种不同的间隔值，这看起来很好。但是，如果我在 iPad 上运行该应用程序，我只会得到两个不同的间隔值：0.000 和 0.125。大多数情况下，这两个值交替出现。

这是我用来确定间隔的代码。

```
// Time calculations (for animations and stuff)
_lastCallTime = _currentCallTime;
_currentCallTime = [displayLink timestamp];
float timeInterval = _currentCallTime - _lastCallTime;

NSLog(@"Time since last call: %f", timeInterval); 
```

每次调用 render 方法时都会执行此代码。

这是 iPad 的一些限制，它不会给我的间隔时间提供准确的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:12:38.887

时间戳是双精度的。将任何保存或用作浮点数的变量更改为 NSTimeInterval。当您打印它时，使用 %f （这实际上是 %lf，因为 C 在作为参数传递时将浮点数提升为双精度数）。

# .net - MS Outlook Addin 如何在创建的新邮件上预填 From、To、Bcc？这是创建新项目时发生的事件

> ID：11798236
> 
> 赞同：1
> 
> 时间：2012-08-03T15:00:22.993
> 
> 标签：.net, events, outlook

我正在开发一个 Outlook 插件，我想在创建新邮件项目时预填充 From、To 或 BCC 字段。您能否指出我可以用来执行此操作的事件以及在哪个对象上。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:25:12.733

锁定在[`Inspectors.NewInspector`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorsevents_event.newinspector.aspx)打开新消息项时捕获。确定邮件是否处于撰写与阅读模式检查[`MailItem.Sent`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.sent.aspx)。要预填充字段，您可以使用[`Outlook.MailItem`interface](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mailitem_members.aspx)轻松访问属性。

这对您来说应该是一个很好的起点，但您确实应该阅读[Outlook 对象模型概述](http://msdn.microsoft.com/en-us/library/ms268893%28v=vs.100%29.aspx)以更好地了解插件集成。

# zeromq - Avro RPC/Storm 集成

> ID：11798240
> 
> 赞同：0
> 
> 时间：2012-08-03T15:00:27.303
> 
> 标签：zeromq, rpc, apache-storm, avro

我有一个现有的 Avro RPC 客户端，可以将数据发送到 Avro RPC 服务器。Avro RPC 服务器当前将数据写入 HDFS（并且还执行其他操作）。我们正在将我们的服务器进程更改为基于 Storm。我希望找到一种简单的方法将我的数据导入 Storm，希望使用我现在拥有的 Avro RPC 消息。

我一直在寻找一种方法来做到这一点，到目前为止没有成功。Storm 有一个 RPC 模型，但它似乎仅限于传递字符串，这是我想避免的（为什么我首先去了 Avro）。Zeromq 可能是一种可能性，但对于我想要做的事情似乎有限。

有人可以为我建议一种优雅的方式来让我的 Avro RPC（基于模式的数据）进入 Storm 吗？

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:07:46.890

所以...还没有找到直接执行此操作的方法...但我们提出的解决方案是一个 Storm 回调过程，它会向 Avro RPC 请求数据。所以，基本上我们切换了客户端/服务器关系。似乎运作良好。

# r - 通过 ifelse 使用 Reduce/do.call

> ID：11798241
> 
> 赞同：10
> 
> 时间：2012-08-03T15:00:31.890
> 
> 标签：r, higher-order-functions

这纯粹是出于好奇（了解有关 Reduce 的更多信息）。有更好的方法来实现我正在做的事情，我对它们不感兴趣。

有些人使用一系列嵌套`ifelse`命令来重新编码/查找某些内容。也许它看起来像这样：

```
set.seed(10); x <- sample(letters[1:10], 300, T)
ifelse(x=="a", 1, 
    ifelse(x=="b", 2,
    ifelse(x=="c", 3, 
    ifelse(x=="d", 4, 5)))) 
```

有没有办法使用其中一个`do.call`或`Reduce`与 一起使用`ifelse`来更有说服力地完成工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:52:02.283

尝试这个：

```
> library(gsubfn)
> strapply(x, ".", list(a = 1, b = 2, c = 3, d = 4, 5), simplify = TRUE)
  [1] 5 4 5 5 1 3 3 3 5 5 5 5 2 5 4 5 1 3 4 5 5 5 5 4 5 5 5 3 5 4 5 1 2 5 5 5 5
 [38] 5 5 5 3 3 1 5 3 2 1 5 2 5 4 5 3 5 2 5 5 5 4 5 1 2 5 4 5 5 5 5 1 3 1 5 5 5
 [75] 1 5 4 5 3 3 5 5 3 5 3 1 5 3 2 2 5 5 5 5 4 5 3 5 5 1 4 1 4 5 5 5 5 5 5 5 5
[112] 5 2 5 5 5 3 5 5 5 2 4 4 5 3 3 5 4 5 5 5 1 5 3 4 3 5 5 2 5 5 3 1 5 2 5 5 5
[149] 1 5 5 2 1 2 4 2 2 3 5 2 5 5 5 5 5 3 5 5 5 5 5 5 5 5 5 5 2 3 5 4 4 2 5 5 5
[186] 5 5 5 5 2 1 1 1 5 5 5 5 3 5 5 3 5 5 5 2 5 5 5 3 5 5 5 5 5 1 5 5 5 5 2 2 5
[223] 5 5 4 3 4 5 5 4 5 5 5 3 5 3 5 5 5 5 4 5 5 1 5 5 2 5 5 5 2 5 5 3 2 5 4 5 2
[260] 5 5 3 5 5 1 4 3 5 4 5 2 5 5 3 5 5 5 5 5 1 1 5 2 5 1 5 5 5 5 5 5 5 5 5 5 5
[297] 5 1 5 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:59:02.107

这是一个尝试。它既不美观也不使用 ifelse：

```
f <- function(w,s) {
  if(is.null(s$old)) 
    w$output[is.na(w$output)] <- s$new
  else 
    w$output[w$input==s$old] <- s$new
  return(w)
}

set.seed(10); x <- sample(letters[1:10], 300, T)

subst <- list(
  list(old="a", new=1), 
  list(old="b", new=2),
  list(old="c", new=3),
  list(old="d", new=4),
  list(old=NULL, new=5)
)
workplace <- list(
  input=x,
  output=rep(NA, length(x))
)

Reduce(f, subst, workplace) 
```

# mysql - MySQL INSERT 语句中的反斜杠 - Ruby on Rails

> ID：11798247
> 
> 赞同：1
> 
> 时间：2012-08-03T15:00:58.013
> 
> 标签：mysql, ruby-on-rails

我正在尝试编写一个 SQL INSERT 语句（故意不使用 ActiveRecord），最终一次性插入大量行。

```
inserts.push "('#{x}', #{p}, '#{day.strftime("%Y-%m-%d")}', #{student.id}, '#{created_at}', '#{created_at}', '#{session}')"

sql = "INSERT INTO attendance_marks (mark_code, present, date_recorded, student_id, created_at, updated_at, sess) VALUES #{inserts.join(", ")}"
conn =  ActiveRecord::Base.connection
conn.execute sql 
```

但我得到一个错误，因为值为`x`is `"\"`。如何解决这个问题并成功地将反斜杠字符插入 MySQL DB？

感觉它应该很简单，而且可能很简单，但我已经竭尽全力试图解决它。

错误信息：

```
>> Attendance.parse_attendance_string Student.find(1), "\\", DateTime.new(2012,9,1)
Student Load (0.7ms)  SELECT `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1
(0.4ms)  INSERT INTO attendance_marks (mark_code, present, date_recorded, student_id, created_at, updated_at, sess) VALUES ('\', 1, '2012-09-01', 1, '2012-08-03 15:58:19', '2012-08-03 15:58:19', 'AM')
ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '2012-09-01', 1, '2012-08-03 15:58:19', '2012-08-03 15:58:19', 'AM')' at line 1: INSERT INTO attendance_marks (mark_code, present, date_recorded, student_id, created_at, updated_at, sess) VALUES ('\', 1, '2012-09-01', 1, '2012-08-03 15:58:19', '2012-08-03 15:58:19', 'AM')
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:233:in `query'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:233:in `execute'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `log'
from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:233:in `execute'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.0/lib/active_record/connection_adapters/mysql2_adapter.rb:214:in `execute'
from /Users/mike.campbell/projects/cpoms_messy/app/models/attendance.rb:76:in `parse_attendance_string'
from (irb):115
>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:05:46.977

[我建议您查看ActiveRecord import](https://github.com/zdennis/activerecord-import)，而不是自己清理输入、处理反斜杠并加入查询。它提供了一个 Gem，可让您使用以下语法在语义上创建批量插入：

```
books = []
10.times do |i| 
  books << Book.new(:name => "book #{i}")
end
Book.import books 
```

# size - ICMP 类型 11 数据包有效负载的大小

> ID：11798250
> 
> 赞同：6
> 
> 时间：2012-08-03T15:01:13.347
> 
> 标签：size, ip, packet, icmp, payload

类型为 11 时，即超过时间，ICMP 数据包负载的大小是多少？由于它包含一个 IP 标头和生成 ICMP 消息的 IP 数据包有效负载的前 8 个字节，我认为它的大小是 20 + 8 = 28。

我正在重放一些 TTL=1 的常见用户流量。在我转储的 ICMP 消息中，我注意到：

*   UDP 数据包生成的所有 ICMP 数据包的有效负载大小为 28 字节
*   所有由 TCP 数据包生成的数据包的有效负载大小为 40 字节

由于我需要通过比较这些字节来将 ICMP 超时消息与触发它们的数据包相匹配，因此这条信息是必不可少的，但我无法弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:27:17.787

问题是您引用了[RFC 792, Page 4](https://www.rfc-editor.org/rfc/rfc792)中的 8 字节标头有效负载，但是 RFC 1812 更改了要求...

```
Time Exceeded Message (in RFC 792)

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |     Code      |          Checksum             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             unused                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Internet Header + 64 bits of Original Data Datagram      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

[RFC 1812，第 4.3.2.3 节](https://www.rfc-editor.org/rfc/rfc1812#section-4.3.2.3)显着增加了 ICMP 错误消息中允许的有效负载（强调我的）：

> **4.3.2.3 原始消息头**
> 
> 从历史上看，每个 ICMP 错误消息都包含 Internet 标头和触发错误的数据报的至少前 8 个数据字节。由于使用了 IP-in-IP 隧道和其他技术，这已经不够了。 *因此，ICMP 数据报应该包含尽可能多的原始数据报，而 ICMP 数据报的长度不超过 576 字节*。返回的 IP 报头（和用户数据）必须与收到的相同，除了不需要路由器撤销对 IP 报头的任何修改，这些修改通常在检测到错误之前执行的转发中执行（例如，递减 TTL 或更新选项）。

您从 Scapy 数据包生成的 ICMP 错误应该包含来自原始数据包的 IP 和 TCP 层的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:44:33.670

正如您所指出的，ICMP 有效负载是 IP 标头加上原始数据包有效负载的 8 个八位字节。然而，IP 标头并不总是 20 个八位字节长。20只是最低限度。IP 报头本身可能包含选项，报头长度由报头的 IHL 字段中的值指示。请参阅 RFC 791 的第 3.1 节。所以看起来 TCP 数据包在其 IP 标头中有 12 个额外的八位字节选项。RFC 791 定义了一些标准选项，例如源路由和时间戳。您必须对标头进行解码以确定正在使用哪些选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T22:58:42.990

我想补充一点，以供将来参考，ICMP 有效负载不仅如 Mike 所说的在大小上有所不同，在**MPLS 的 ICMP 扩展**的情况下，它们也可能超过**128 字节**。有关详细信息，请参阅[此草稿](https://datatracker.ietf.org/doc/html/draft-ietf-mpls-icmp-01)

# css - 外部 div 不会拉伸以适应内部 div（使用 clear）

> ID：11798251
> 
> 赞同：1
> 
> 时间：2012-08-03T15:01:15.133
> 
> 标签：css, html, outer-join, stretched

我一直在阅读有关具有该`float`属性的元素如何不考虑其高度的信息。因此，我应该`clear:both`在父 div 结束之前使用它，这样它就会覆盖整个内部 div。

您可以在[此页面](http://blacktiephotographers.com/about-us/)上看到带有 id 的 div`full-height-template-container`没有超出其内部内容，因此页脚（右下角的版权文本）在页面上的位置过高。

布局如下所示：

```
<div id="full-height-template-containter">
  <div id="content-container">
    <div id="full-width" style="float:left;"> 
    </div>
    <div style="clear:both;"></div>
  </div>
<div style="clear:both;"></div>
</div> 
```

为了使外部 div 覆盖其子级，我还能尝试什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:03:55.733

这是一个常见的问题。为了解决这个问题，发明了许多变种的[clearfix hack](http://perishablepress.com/new-clearfix-hack/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T01:49:12.000

在我将这个版本的“Clearfix”插入需要这样拉伸的容器顶部之前，我遇到了同样的问题：

CSS：

```
.clearfix:after {content: "."; display: block; height: 0; clear: both; visibility:hidden;}
.clearfix {display: inline-block;}
/* Hides from IE-mac \*/
* html .clearfix {height: 1%;}
.clearfix {display: block;}
/* End hide from IE-mac */ 
```

HTML：

```
<div class="clearfix"> </div>

<span class="doc">
     <a href="../speakers/johnnixon.html" "class="spkrs1">John Nixon</a> 
     <a href="../speakers/pricereveil.html" "class="spkrs2">Henry Wright</a> 
</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:11:09.437

我把你的样本放在小提琴上，并给它一些 CSS 来显示 div：http: [//jsfiddle.net/WRzsE/](http://jsfiddle.net/WRzsE/)

您可以清楚地看到它完美地工作，正如您所描述的那样。我怀疑你做错了什么......

也许您正在使用`position: absolute`某个地方，这会导致元素从其父级中取出，并使父级不会伸展（只是在这里大声思考......）

**编辑：** 我只是看了一下实际页面（忽略了链接）。你的 div 伸展得很好。问题在于页脚的定位，它设置为绝对。我怀疑你正在尝试实现一个粘性页脚，看看这个，就像一个魅力。我一直在使用它：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T07:48:41.543

在`#full-height-template-container`您使用的情况`height: 100%`下，这意味着 div 占据父级的 100% 高度。

如果我们在您的 CSS 中追溯分配了每个父元素`height: 100%`，包括`html`and`body`元素，这意味着高度取自窗口 - 因此 div 永远不会超过窗口的大小（但内容仍会溢出） .

因此，导致问题的不是浮动，而是您明确分配给每个 div 的高度。

# oracle - 使用具有完全限定模式名称的 Toad (9.0.1.8) 显示来自 Oracle 存储过程的 SYS_REFCURSOR 的结果

> ID：11798254
> 
> 赞同：0
> 
> 时间：2012-08-03T15:01:26.543
> 
> 标签：oracle, oracle10g, toad

哇。我是一个 Sql Server 人，正在努力学习 Oracle。比赛中没有马，只使用我工作所需的数据库。

如何查看一个简单的 OUT SYS_REFCURSOR 的结果。（使用 TOAD 9.0.1.8）（Oracle 环境 = 10g）

代码如下。请注意，使用完全限定名称（schema + object_name）是这里的“规范”。（请知道，当谈到 Oracle 时，我只知道我在说什么）

```
CREATE OR REPLACE
PROCEDURE SYS.PROC_GET_MY_COOL_TABLES (p_recordset OUT SYS_REFCURSOR) AS 
BEGIN 
  OPEN p_recordset FOR

SELECT 
      TABLE_NAME 
    , TABLE_TYPE 
from 
    SYS.USER_CATALOG 
where 
    TABLE_TYPE = 'TABLE' and TABLE_NAME NOT LIKE '%$%'
;

END PROC_GET_MY_COOL_TABLES;

/

variable myVarForARefCur refcursor;
exec SYS.PROC_GET_MY_COOL_TABLES( :myVarForARefCur );
print myVarForARefCur;

/ 
```

# cube - 使用 MEL 在 Maya 中装配魔方

> ID：11798261
> 
> 赞同：1
> 
> 时间：2012-08-03T15:01:43.330
> 
> 标签：cube, maya, rubiks-cube, mel

我想在 Maya 中装配一个魔方，所以它可以向任何方向旋转任意次数。任何旋转都将以 90 度为增量。这些是我的大纲中的对象：

26 个块（立方体的中心块不是必需的）9 个旋转控制器（3 个用于高度/宽度/深度的行/列）1 个根控制器

诀窍是将各个块的控制权从一个控制器传递到下一个控制器。在任何给定时间，一个块可以受到 3 个不同的控制器的影响。但是，在旋转之后，控制器会发生变化。

我想我需要创建一系列矩阵（二维数组），其中 9 个 - 每个控制器一个。将块分配给它们，然后在旋转后重新分配。我想我需要一个临时矩阵来交换。除此之外，我不知道该怎么做。这些矩阵应该是根控制器的参数吗？大概。

在这件事上的任何帮助都会有所帮助。我是 MEL 的新手，但我有 C/C++ 等方面的背景。您将如何装配功能性魔方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:20:53.897

您只需将旋转插值转换为四元数插值以进行旋转，然后一次键入一个数据包。只要确保在您键入序列困难时永远不会倒退。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:26:35.927

您也可以通过混合约束权重来做到这一点。6 个中心部件是您的控件。Parent 将所有其他多维数据集约束到所有 6 个控件。现在，每个立方体都有一个约束节点，其中包含 6 个可以键入的权重输入。将要旋转的控制器的权重设置为 1，将要旋转的面的立方体的所有其他控制器的权重设置为 0。对于当前移动中不涉及的立方体，将所有权重设置为 0。

如果您想变得更高级，请为整个事物创建一个主布局控件，添加一个属性以使用选项 1 到 6 设置哪个控制器处于活动状态，并让它在更改时更新所有立方体的权重。您可以通过查看它与当前活动的控制器立方体的距离来确定一个立方体是否应该完全停用（所有权重 -> 0）；活动面上的相邻立方体都将靠近，所有其他立方体将更远。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:52:48.187

这是用于下载的 Rubic 立方体工具[http://www.geonak.com/downloads/RubixCube.zip](http://www.geonak.com/downloads/RubixCube.zip)

# php - PHP 的 Microtime(true) 等效于 VB.NET？

> ID：11798263
> 
> 赞同：0
> 
> 时间：2012-08-03T15:01:54.350
> 
> 标签：php, vb.net, date, timestamp, microtime

我正在尝试在 VB.NET 中重新生成 PHP 的 microtime(true) 以创建一个 microtime (1344004866.8658)，尽管我运气不佳！

我已经在网上搜索过，似乎找不到任何关于这个的帮助！

我正在使用以下函数来创建标准的 Unix 时间戳：

```
Public Function TimeToUnix(ByVal dteDate As Date) As String
        If dteDate.IsDaylightSavingTime = True Then
            dteDate = DateAdd(DateInterval.Hour, -1, dteDate)
        End If
        TimeToUnix = DateDiff(DateInterval.Second, #1/1/1970#, dteDate)
    End Function 
```

尽管我完全不知道如何更改此功能以创建微时间！

任何帮助都会非常感激:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:22:14.287

啊，终于找到了一些东西并对其进行了夏令时修改，这有助于：

```
Public Function GetUnixMicroTime(ByVal dates As DateTime) As String
        If dates.IsDaylightSavingTime = True Then
            dates = DateAdd(DateInterval.Hour, -1, dates)
        End If
        Dim origin As DateTime = New DateTime(1970, 1, 1, 0, 0, 0, 0)
        Dim diff As TimeSpan = dates - origin
        Return CStr(diff.TotalSeconds)
    End Function 
```

# javascript - 需要 jquery/ajax 语法帮助

> ID：11798272
> 
> 赞同：0
> 
> 时间：2012-08-02T22:01:39.573
> 
> 标签：javascript, php, jquery, ajax

我有两种形式（“表格”和“字段”）。“字段”表单应该通过发出 Ajax 请求，根据“表”中的选择预先填充选项。如果我将一些返回数据的剪切和粘贴示例传递给局部变量（请参阅注释行），则数据将完美返回并且实际上预填充了第二种形式（就像它应该的那样）。但由于某种原因它不会工作返回的对象？？任何建议都将不胜感激，因为我对 JavaScript 非常陌生，并且可能遗漏了一些明显的东西！我正在使用以下代码：

```
$(document).ready(function() {
$('select#table').change(function(){
$.getJSON("/ajax_get",{id: $(this).val(), ajax: 'true'}, function(data) {
//var data = [{"optionValue":"address", "optionDisplay": "address"},{"optionValue":"latitude", "optionDisplay": "latitude"},{"optionValue":"longitude", "optionDisplay": "longitude"},];
  var $persons = $('#fields').empty();
  $.each(data, function() {
    $persons.append("<option value=" + this.optionValue + ">" + this.optionDisplay + "</option>");
  });
});
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:23:33.363

这是您的通话的简化版本，可以帮助您快速弄清楚：

```
$.getJSON("/ajax_get",{id: $(this).val(), ajax: 'true'}, function(data) {
  try { 
       typeof(data.somethingYouExpect);
       /* do your on success work here */
  } catch (e) {
     alert('There is a good chance the response was not JSON');
  }
}); 
```

即使使用常规的 jQuery`$.ajax`调用，检查以确保返回的响应是您期望的形式也很重要。这就像`success`将响应中的变量设置为 true 一样简单。如果你这样做了，上面的例子就会变成这样：

```
var jqxhr = $.getJSON("/ajax_get",{id: $(this).val(), ajax: 'true'}, function(data) {
  try { 
       typeof(data.success); // Will throw if success is not present
       if (success == true) {
             /* handle success */
       } else {
             /* handle a request that worked, but the server said no */
       }
  } catch (e) {
     /* The actual HTTP request worked, but rubbish was returned */
     alert('There is a good chance the response was not JSON');
     console.dir(jqxhr.textResponse);
  }
}); 
```

在这里，我们记住了调用返回的对象`$.getJSON`（这只是 的快捷方式`$.ajax`），它允许我们查看服务器发送的实际响应。我敢打赌这是一个 404、解析器错误或类似的东西。

For most things, I usually just use `$.ajax` mostly out of personal preference, where the error callback passes the xhr object to a common function to examine (did the request return 200? etc). If something explodes, I know exactly what went wrong by briefly looking at the console and can disable debug output in one place.

# jquery - .each() 的 jQuery 自定义顺序

> ID：11798277
> 
> 赞同：0
> 
> 时间：2012-08-03T15:02:19.290
> 
> 标签：jquery, each

我成功地使用 .each() 一个接一个地淡入一些块。正如预期的那样，它从第一个元素开始并按顺序移动到下一个元素。

有什么方法可以控制.each() 的顺序吗？而不是 1,2,3,4 等等，例如，1,2,5,9,6,3,4,7,8。

```
$(window).load(function() {
    $(".blocks").each(function(i) {
       $(this).delay((i + 1) * 500).fadeIn(500);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:12:20.403

在直接回答您的问题时，`.each()`按照项目在 jQuery 内部数组中的顺序迭代 jQuery 对象的项目。`.each()`除了更改它正在迭代的数组中的顺序之外，没有其他方法可以控制使用的顺序。

由于您没有透露如何通过算法确定所需的订单，您的选择是：

1.  `.each()`在调用之前对数组进行排序
2.  `.each()`调用前手动创建所需订单
3.  `.each()`在调用之前对数组进行适当排序的其他一些代码

在代码片段的非常具体的实例中，您可以`.each()`通过创建一个查找表来查找给定数组索引的所需延迟值，从而以不同的方式解决它，而无需重新排序或重新排序数组。

```
$(window).load(function() {
    var delayLookup = {1:1,2:2,5:3,9:4,6:5,3:6,4:7,7:8,8:9};
    $(".blocks").each(function(i) {
       var delayTime = delayLookup[i] || i;
       $(this).delay(delayTime * 500).fadeIn(500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:09:28.733

你没有说你的订单的逻辑是什么。如果你的意思是随机的，你可以这样做：

```
$('.blocks')
    .sort(function(item) { return Math.floor(Math.random() * 2) === 1; })
    .each(function(i) {
        $(this).delay((i + 1) * 500).fadeIn(500);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:10:09.190

您首先必须按照您想要的方式对数组进行排序，这里似乎是一种随机排序，因此您必须手动创建一个数组并填充元素。然后你可以调用 each 函数。

# django - Django modelform保存方法：错误：“args”处或附近的语法错误

> ID：11798279
> 
> 赞同：1
> 
> 时间：2012-08-03T15:02:20.373
> 
> 标签：django, postgresql, django-database

我正在尝试保存我的模型表单。姜戈回归`InternalError: current transaction is aborted, commands ignored until end of transaction block`

这是执行**Django 生成的**`INSERT`sql-query时出现的问题。看起来像：

 **```
INSERT INTO "myapp_mymodel" ("title", ...) VALUES ("Test", ...) RETURNING "catalog_ad"."id"; args=("title", ...) 
```

我试图在 PgAdmin 中执行这个查询。它返回了这个错误：

```
ERROR:  syntax error at or near "args" 
```

有什么问题？

**UPD：**这是 InternalError 的回溯：

```
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/<Path to my app>/views.py" in master
  115\.             ad = form.save()
File "/Library/Python/2.7/site-packages/django/forms/models.py" in save
  364\.                              fail_message, commit, construct=False)
File "/Library/Python/2.7/site-packages/django/forms/models.py" in save_instance
  86\.         instance.save()
File "<Path to my app>/models.py" in save
  145\.         super(Ad, self).save(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/Library/Python/2.7/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in insert_query
  1576\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  910\.             cursor.execute(sql, params) 
```

**UPD2：**

我的模型覆盖了保存方法：

```
def save(self,  *args, **kwargs):
    self.title = self.model.brand.name + " " + self.model.name
    super(Ad, self).save(*args, **kwargs) 
```

数据由使用的视图`ModelForm`处理（从 POST 获取数据）。保存前已验证表单 (form.is_valid())。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:19:43.247

我想说你的代码中有一个错误，它通过 Django 生成 INSERT 语句。如果没有看到该代码，很难说出问题所在。您发布的 SQL 中的分号结束了看起来有效的 SQL 语句。

这`args=("title", ...)`部分在我看来不是 SQL。检查您的代码以查看可能意外地将其附加到生成 SQL 的任何内容。**

# wordpress - Drupal 到 Wordpress - 迁移评论

> ID：11798280
> 
> 赞同：0
> 
> 时间：2012-08-03T15:02:26.887
> 
> 标签：wordpress, drupal

我有一个 Drupal 6.25 数据库，正在尝试迁移到 Wordpress (v3.4.1)。我可以将内容复制到 Wordpress 中，但是在评论方面，我似乎无法将`thread`列（在 Drupal 评论表中）转换为`comment_parent`（在 Wordpress wp_comments 中）。

这是我正在使用的代码（取自[教程](http://blog.room34.com/archives/4530)）：

```
INSERT INTO `mywordpress`.wp_comments
(comment_post_ID, comment_date, comment_content, comment_parent, comment_author,
comment_author_email, comment_author_url, comment_approved)
SELECT DISTINCT
    nid, FROM_UNIXTIME(timestamp), comment, thread, name,
    mail, homepage, ((status + 1) % 2)
FROM mydrupal.comments; 
```

上述不起作用，因为 Wordpress`comment_parent`是 BIGINT 类型，而 Drupal`thread`列是 VARCHAR，其值例如`0a.01.03.00/`，

如何将这些转换为与 Wordpress 兼容的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:03:18.457

您可以尝试此查询（我已从本[教程](http://fuzzythinking.davidmullens.com/content/moving-from-drupal-7-to-wordpress-3-3/)中获取）：

```
UPDATE IGNORE wordpress.wp_term_relationships, wordpress.wp_term_taxonomy
SET wordpress.wp_term_relationships.term_taxonomy_id = wordpress.wp_term_taxonomy.term_taxonomy_id
WHERE wordpress.wp_term_relationships.term_taxonomy_id = wordpress.wp_term_taxonomy.term_id 
```

# c# - 使用字符串属性反序列化布尔元素

> ID：11798281
> 
> 赞同：3
> 
> 时间：2012-08-03T15:02:39.143
> 
> 标签：c#, .net, xml, serialization, xml-serialization

我正在尝试构建一个将与此 XML 结构映射的类，但不知道如何。如果元素值是字符串，我在这里看到了可以使用 [XmlText] 的示例。在我的例子中，元素值是布尔值。我应该如何构建我的“服务”类？

（我认为）我知道如何处理“服务”元素:-)。它只是一个“服务”对象的数组。我只是不确定如何构建“服务”类。

```
<?xml version="1.0" encoding="utf-8"?>
<Config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<MyConfigs>
    <Services>
        <Service Name="ServiceName">true</Service>
    </Services>
</MyConfigs> 
```

我有这个：

```
[XmlArray("Services")]
[XmlArrayItem("Service")]
public Service[] Services { get; set; } 
```

和这个：

```
public class Service
{
    [XmlAttribute]
    public string Name { get; set; }
    // How do I get the boolean value here?????
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:25:17.703

尝试

```
[XmlText]
public bool ServiceValue {get;set;} 
```

# html - 列表颜色没有出现在 CSS 中

> ID：11798285
> 
> 赞同：0
> 
> 时间：2012-08-03T15:03:04.480
> 
> 标签：html, css, colors

我写了这段代码：

**CSS：**

```
#header {
    margin: 0;
    background:gray;
}

#tabs {
    color:yellow;
    font-weight: bolder;
    display:inline;
} 
```

**HTML：**

```
<div id="header"> 
     <h1>Tabs</h1>
     <ul id="tabs">
         <li id="tabs"><a href="#">This</a></li>
         <li id="tabs"><a href="#">That</a></li>
         <li id="tabs"><a href="#">The Other</a></li>
         <li id="tabs"><a href="#">Banana</a></li>
    </ul>
</div> 
```

但是黄色字体颜色并未应用于`li`项目。为什么会这样？我应该如何编写这段代码以获得正确的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:06:21.213

如果您有多个具有相同 ID 的元素，它通常只适用于第一个。元素应该有唯一的 ID。改用类。

来自[HTML 文档的全局结构](http://www.w3.org/TR/html401/struct/global.html#adef-id)：

> id 属性为元素分配唯一标识符
> 
> 另一方面，class 属性将一个或多个类名分配给一个元素；该元素可以说属于这些类。一个类名可以由多个元素实例共享

所以你的代码应该是这样的：

```
<li class="tabs"><a href="#">This</a></li>
<li class="tabs"><a href="#">That</a></li>
<li class="tabs"><a href="#">The Other</a></li>
<li class="tabs"><a href="#">Banana</a></li> 
```

`#`为身份证，`.`为班级。多个元素可以具有相同的类。您还想更改`li`s 的链接颜色，因此在 CSS 中指定：

```
.tabs a
{
 color:yellow;
 font-weight: bolder;
 display:inline;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:05:44.967

因为文本在链接内。您需要指定标签内链接的颜色，如下所示：

```
#tabs a{color:yellow} 
```

让它工作。

另外，不要两次使用相同的 id。如果您使用我提供的代码，您可以从 teh lis 中删除 id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:05:30.703

您的`a`标签可能优先。将其设置为继承其颜色：

```
#tabs {
    color: yellow;
}
#tabs a {
    color: inherit;
} 
```

您可能还想设置`text-decoration: none;`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T15:05:35.777

首先，您需要将 id 从`<li>`. ID 是唯一的。

您的实际问题是您没有针对链接本身：

```
#tabs a {
    color: yellow;
} 
```

这将允许您将样式应用于链接而不是`<ul>`

# php - 设置快捷方式来替换 VIM 中容易选择的字符串

> ID：11798286
> 
> 赞同：2
> 
> 时间：2012-08-03T15:03:07.293
> 
> 标签：php, vim, internationalization, keyboard-shortcuts

我有很多 php/html 文件，其中包含许多应该使用 gettext 国际化的字符串。因此，我必须浏览每个文件，找出“消息”字符串并将每个文件替换为

```
<?= _("<my string>") ?> 
```

我使用 vim 并想设置一个快捷方式（地图）以在插入模式下轻松完成（`Ctrl``R`例如）。

你知道如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:01:09.773

我会使用 Tim Pope 的美妙[环绕声](https://github.com/tpope/vim-surround)插件来实现这一点。

将以下内容添加到您的`~/.vim/after/ftplugin/php.vim`文件中：

```
let b:surround_{char2nr('_')} = "<?= _(\"\r\") ?>" 
```

现在您可以通过视觉模式选择一些然后环绕。例如`vitS_` ，如果您处于插入模式，您可以通过包围文本`<c-s>_`，您的光标将插入双引号之间。

作为奖励，如果您想删除周围环境`<?= _("<text here>") ?>`并只离开`<text here>`，您也可以将以下内容添加到您`~/.vim/after/ftplugin/php.vim`的：

```
nmap <buffer> <silent> ds_ ds<dt(%df?[(xds" 
```

Tim Pope 有很多很棒的插件，我强烈建议你看看其中的一些。

如需更多帮助，请参阅：

```
:h surround
:h surround-customizing
:h after-directory
:h curly-braces-names
:h b:var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:03:43.587

如果您想手动包围此字符串并且如果您的消息不包含`"`，那么您可以（在将光标放在消息内的某个位置之后）执行以下操作一次：

```
qaf"a)<Esc>2F"i_(<Esc>q 
```

（按真正的转义键`<Esc>`）然后，将光标放在下一条消息上后，重复此操作

```
@a 
```

（如果您不喜欢`a`，请在此处和上方之后将其替换为另一个拉丁小写字母`q`）。如果您仍然想要映射：

```
:nnoremap <C-r> f"a)<Esc>2F"i_(<Esc> 
```

. 这一次`<Esc>`是字面意思，，，，，`<`。`E``s``c``>`

首先是使用宏，它们非常方便，因为定义映射更容易输入。根据 'viminfo' 选项，它们甚至可以跨 vim 会话保存，但你不应该真正依赖它，所以如果你想要持久的东西，请使用将它放在 vimrc 中的映射。

**更新**：如果你没有`<? "message" ?>`我假设的，而是得到了`<tag>message</tag>`，你可以执行以下操作：

```
:nnoremap <C-r> f<i") ?><Esc>F>a<? _("<Esc> 
```

. 请注意，此时间消息不应包含`<`or `>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:16:08.460

我的猜测是您希望原始消息实际上是`_()`函数的输入，不是吗？

我能想到的最好的事情就是使用[宏](http://vim.wikia.com/wiki/Macros)。如果我这样做，我可能会做一些事情，比如记录一个宏 @1 用于单字“消息”（需要替换），@2 用于两字消息，@3 用于 3 等等。然后我可以浏览或搜索文档并`@1`在任何单字消息的开头键入，例如`one` 将其替换为`<?= _("one") ?>`. 我会在消息上使用@2，比如`two words`将其转换为`<?= _("two words") />`等等。

要[创建/记录单字消息的宏](http://vim.wikia.com/wiki/Macros)，@1，键入这些键，最好在单字消息的开头：

```
q1i<?= _("<Esc>eli") ?><Esc>q 
```

`q` `1` `i` `<` `?` `=` `Space` `_` `(` `"` `Esc` `e` `l` `i` `"` `)` `Space` `?` `>` `Esc` `q`

可以非常相似地创建更多单词的宏，只需`e`为更多单词添加额外的 s。所以对于@2，输入：

```
q1i<?= _("<Esc>eeli") ?><Esc>q 
```

`q` `1` `i` `<` `?` `=` `Space` `_` `(` `"` `Esc` `e` `e` `l` `i` `"` `)` `Space` `?` `>` `Esc` `q`

对于非常长的消息，我可能会使用打开和关闭宏。打开的将放在`<?= _("`我有光标的任何地方，而关闭的将放在`") ?>`我有光标的任何地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:17:52.993

## 正则表达式

Vim 非常有能力轻松处理此类任务。如果没有前后的例子，很难给你一个精确的解决方案，但我会做一个假设的例子来展示 vim 的一些功能。假设您想更改`<span>`标签内的任何文本以由 PHP 函数执行。我可能有一个像这样的跨度标签：

```
<span>I need this text and all other span tags run through PHP!</span> 
```

完成工作的最简单方法可能是使用正则表达式。例如：

```
:%s/<span>\([^<]*\)<\/span>/<?= _("\1") ?>/g 
```

这会找到文档中的所有 span 标签并适当地替换它们。您甚至可以在多个文件上运行它（请参阅 参考资料`:help bufdo`）。然而，对于一些人来说，正则表达式一开始可能很困难，而且许多人还没有花时间去学习它。另一个选项可能如下所示：

## CTRL-R

```
/<span><cr>f>lct<<?= _("<C-r>"") ?><esc> 
```

## 一步步

`/<span><cr>`- 搜索开放跨度标签

`f>l`- 将光标移动到开始跨度标记之后的字符

`ct<`- 更改文本直到下一个`<`字符

`<?= _("<C-r>"") ?>`- 放入我们想要的。（`<C-r>"`正如您所提到的）将放入我们未命名的寄存器的内容`"`，在这种情况下是我们`ct<`在一分钟前执行的文本。

`<esc>`- 返回正常模式

## 宏这个

这对于用作宏可能很有用。如果是这样，只需在其周围使用宏执行完全相同的操作...

```
qq/<span><cr>f>lct<<?= _("<C-r>"") ?><esc>q 
```

现在您可以对下一个标签执行`@q`相同的操作。`<span>`用过`@q`一次还可以用`@@`甚至`100@q`做100次。

# python - REMOTE_PORT 通过 WSGI

> ID：11798290
> 
> 赞同：4
> 
> 时间：2012-08-03T15:03:16.297
> 
> 标签：python, wsgi, bottle

我目前正在尝试在使用[bottle.py](http://www.bottlepy.org/)编写的 Web 应用程序中从客户端获取信息。Bottle.py 让我们通过 environ 变量访问 CGI 变量，正如[WSGI规范中定义的那样。](http://www.python.org/dev/peps/pep-0333/)但是这些规范并未将 remote_port 列为强制变量或可选变量。

```
@get('/echo/)
def echo():
    values = {}
    for i in request.environ:
        values[i] = str(request.environ[i]

    return values 
```

所以我想知道是否有办法以任何其他方式访问 remote_port 信息：直接访问原始套接字以检索 client_address，通过bottle.py，或通过任何其他方式

谢谢，加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T07:28:25.127

我刚刚使用 apache-2.4 mod_wsgi 和这个简单的 wsgi 脚本进行了测试：

```
def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    yield str(environ) 
```

而且，至少使用这个 mod_wsgi，您可以在`environ['REMOTE_PORT']`.

这里的全部内容`environ`：

```
{  
   'mod_wsgi.listener_port':'80',
   'mod_wsgi.listener_host':'',
   'CONTEXT_DOCUMENT_ROOT':'/usr/htdocs',
   'SERVER_SOFTWARE':'Apache',
   'SCRIPT_NAME':'',
   'mod_wsgi.enable_sendfile':'0',
   'mod_wsgi.handler_script':'',
   'SERVER_SIGNATURE':'<address>Apache Server at 127.0.0.1 Port 80</address>\n',
   'REQUEST_METHOD':'GET',
   'PATH_INFO':'/',
   'SERVER_PROTOCOL':'HTTP/1.1',
   'QUERY_STRING':'',
   'HTTP_USER_AGENT':'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like     Gecko) Chrome/37.0.2062.58 Safari/537.36',
   'HTTP_CONNECTION':'keep-alive',
   'SERVER_NAME':'127.0.0.1',
   'REMOTE_ADDR':'127.0.0.1',
   'mod_wsgi.queue_start':'1409123400512619',
   'mod_wsgi.request_handler':'wsgi-script',
   'apache.version':(2, 4, 10),
   'wsgi.url_scheme':'http',
   'PATH_TRANSLATED':'/opt/wsgi/wsgi.py/',
   'SERVER_PORT':'80',
   'wsgi.multiprocess':True,
   'mod_wsgi.input_chunked':'0',
   'SERVER_ADDR':'127.0.0.1',
   'DOCUMENT_ROOT':'/usr/htdocs',
   'mod_wsgi.process_group':'wsgi_local',
   'mod_wsgi.daemon_connects':'1',
   'SCRIPT_FILENAME':'/opt/wsgi/wsgi.py',
   'SERVER_ADMIN':'[no address given]',
   'wsgi.input':<mod_wsgi.Input object at 0x7fd6fc5d24b0>,
   'HTTP_HOST':'127.0.0.1',
   'CONTEXT_PREFIX':'',
   'wsgi.multithread':True,
   'mod_wsgi.callable_object':'application',
   'HTTP_CACHE_CONTROL':'max-age=0',
   'mod_wsgi.daemon_restarts':'0',
   'REQUEST_URI':'/',
   'HTTP_ACCEPT':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
   'wsgi.file_wrapper':<type 'mod_wsgi.FileWrapper'>,
   'wsgi.version':(1, 0),
   'GATEWAY_INTERFACE':'CGI/1.1',
   'wsgi.run_once':False,
   'wsgi.errors':<mod_wsgi.Log object at 0x7fd6fc5e8930>,
   'REMOTE_PORT':'32915',
   'HTTP_ACCEPT_LANGUAGE':'fr,en-US;q=0.8,en;q=0.6',
   'REQUEST_SCHEME':'http',
   'mod_wsgi.version':(4,2,7),
   'mod_wsgi.script_start':'1409123400512718',
   'mod_wsgi.application_group':'127.0.0.1|',
   'mod_wsgi.script_reloading':'1',
   'mod_wsgi.request_start':'1409123400512528',
   'HTTP_ACCEPT_ENCODING':'gzip,deflate,sdch',
   'UNIQUE_ID':'U-2ESH8AAAEAACYQU@MAAABE',
   'mod_wsgi.daemon_start':'1409123400512693'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T16:34:46.113

这似乎取决于您如何为您的应用程序提供服务。

例如，Django 开发服务器 ( `runserver`) 不会为您提供远程端口。同时，我能够使用在 Apache 和[mod_wsgi](https://code.google.com/p/modwsgi/)上提供的应用程序来检索它，而且显然[CherryPy](http://www.cherrypy.org/)服务器也提供了它。

奇怪的是，就像你说的，它不是[WSGI 规范 (PEP 333)](http://legacy.python.org/dev/peps/pep-0333/)的一部分。

# objective-c - renderInContext 与适用于 PDF 但不适用于缩略图的 iPhoto 图像

> ID：11798293
> 
> 赞同：1
> 
> 时间：2012-08-03T15:03:26.000
> 
> 标签：objective-c, ios, core-graphics

我似乎有一个涉及 renderInContext 的奇怪错误。

我正在开发一个“剪贴簿”应用程序，它允许人们在剪贴簿视图中自由排列文本、彩色方块和照片。请注意，用户可以从内置照片集合（通过 imageNamed: 加载）中添加照片，也可以从他们的资产库中添加照片。

我的代码根据需要从剪贴簿视图及其所有子视图创建 PDF 和缩略图，方法是首先创建 PDFContext（用于 PDF）或 ImageContext（用于缩略图），然后在 scrapBookView.layer 上调用 renderInContext。

一般来说，代码可以工作，我将描述一个例外。当我创建 PDF 时，内置图像和资产库图像都正确包含在呈现的 PDF 中。但是，当我创建缩略图时，会出现内置图像，但资产库图像没有正确显示。我知道 imageView 在那里，因为在其他地方我将其背景颜色设置为浅灰色，但图像本身不存在。

我怀疑可能有一个异步元素将图像加载到图像视图中，并且当它的资产库图像被渲染到 ImageContext 时，图像到达那里的速度不够快。

这可能吗？如果不是，为什么 renderInContext 在 PDFContext 中可以正常工作，但在 ImageContext 中却不那么好？

更重要的是，我怎样才能让我的资产库图像包含在我的缩略图中。

pdf 表示和缩略图都是通过 scrapbookView 中的方法创建的。代码如下：

要创建 pdf：

```
-(NSData*) pdfRepresentation
{
     //== create a pdf context
     NSMutableData* result = [[NSMutableData alloc] init];
     UIGraphicsBeginPDFContextToData(result, self.bounds, nil);
     UIGraphicsBeginPDFPage();

     //== draw this view into it
     [self.layer renderInContext: UIGraphicsGetCurrentContext()];  // works for asset library images

     //== add a rectangular frame also
     CGContextRef pdf = UIGraphicsGetCurrentContext();
     CGContextAddRect(pdf, self.bounds);
     [[UIColor lightGrayColor] setStroke];
     CGContextStrokePath(pdf);

     //== clean up and return the results
     UIGraphicsEndPDFContext();
     return [result copy];
} 
```

要创建缩略图：

```
-(UIImage*) thumbnailRepresentation
{
     //== create a large bitmapped image context
     CGFloat minSpan = MIN(self.bounds.size.height, self.bounds.size.width);
     CGSize imageSize = CGSizeMake(minSpan, minSpan);
     UIGraphicsBeginImageContextWithOptions(imageSize, YES, 0.0);

     //== draw the current view into the bitmap context
     self.backgroundColor = [UIColor whiteColor];
     [self.layer renderInContext: UIGraphicsGetCurrentContext()];  // doesn't work for asset library images
     self.backgroundColor = [UIColor clearColor];

     //== get the preliminary results
     UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

     //== create a smaller image from this image
     CGFloat thumbnailWidth = 40.0;
     CGFloat scaleFactor = thumbnailWidth / minSpan;
     UIImage* result = [UIImage imageWithCGImage:[image CGImage] scale:scaleFactor orientation:UIImageOrientationUp];

     return result;
}
// btw - seems wasteful to create such a large intermediate image 
```

任何帮助，将不胜感激。

# ef-code-first - 应用程序重新启动时实体框架 5 Code-First 删除/重新创建数据库

> ID：11798296
> 
> 赞同：0
> 
> 时间：2012-08-03T15:03:38.197
> 
> 标签：ef-code-first, entity-framework-5

我正在试验最新的 EF 5 CF（在 VS2010 中，而不是在 VS2012 中）。我通常遵循 MSDN EF 5.0 快速入门：使用代码优先创建模型...

我的 DbContext 不是使用控制台应用程序，而是在 Windows 服务中，它最终将通过托管 WCF 服务来公开各种数据服务方法（客户端将是 WPF MVVM）

在 Windows Service 的 OnStart 中，我调用了 SetInitializer，然后做一个简单的查询来触发初始化：

```
// Start the Windows service.
protected override void OnStart(string[] args)
{          
   Database.SetInitializer<MediaLibraryContext>(new MediaLibraryContextInitializer());
   using (var context = new MediaLibraryContext())
   {
      var firstMedia = (from m in context.Medias select m).FirstOrDefault();
   }
   ... 
```

正如预期的那样，EF CF 从模型中创建数据库并为其播种。

**但是当我停止/重新启动服务时，EF 似乎会删除数据库并重新创建它**（或者它可能只是删除表并重新创建它们？）。我对数据库所做的所有初始化后更改都消失了，只存在“种子”数据。

我使用过 EF 4.1 和 4.3，但从未见过这种行为。任何想法在哪里看？？？

爸爸猫

编辑：我在发布此内容后发现了问题......快速启动代码将数据库初始化策略设置为 DropCreateDatabaseAlways。

这就是我在不仔细查看的情况下复制/粘贴代码所得到的！

直流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:03:36.597

我在发布后发现了问题...快速启动代码将数据库初始化策略设置为 DropCreateDatabaseAlways。

# php - 如何从广播流中获取 mp3 元数据（无 icecast，无直播）

> ID：11798302
> 
> 赞同：2
> 
> 时间：2012-08-03T15:04:00.633
> 
> 标签：php, javascript, mp3, metadata

正如主题所说，我需要从网络广播直播中获取元数据，站点网址如下： http://vps.radioduepuntozero.net:8000/ [Radio2.0.mp3](http://vps.radioduepuntozero.net:8000/Radio2.0.mp3)

有什么办法可以用 JavaScript 或 PHP 做到这一点？如您所知，主要问题是 mp3 的远程路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:12:14.590

这是一个冰播站，你可以在这里使用 file_get_contents 来获取你需要的所有信息：`http://vps.radioduepuntozero.net:8000/`

但要获得更深入的答案：它的工作方式是，每个流式传输的 mp3 文件都以一个称为 ID3 标记的部分开头。它包含关于作者、专辑、曲目名称等的信息。因为它是实时流式传输的，所以您不能只选择任何帧并阅读该部分。您必须等待下一首歌曲开始读取其 ID3 标签。

此外，知道曲目何时开始和结束也很棘手。Icecast 将每 X 个字节插入帧，以说明歌曲还剩下多少字节，以及下一个数据包的大小等。

它背后有一个协议，它是可行的，我以前做过，但它需要PHP套接字和所述协议的知识。使用 C++ 会更好，或者，就像我说的，

获取 icecast 站页面。

# matlab - 在 MATLAB 中保存 Warp 命令的输出

> ID：11798303
> 
> 赞同：1
> 
> 时间：2012-08-03T15:04:02.007
> 
> 标签：matlab

我在 MATLAB 的图像处理中使用命令 WARP。

```
[x,y,z] = cylinder;
I = imread('testpat1.png');
warp(x,y,z,I); 
```

以上是 MATLAB 中给出的使用 WARP 的示例代码。但我无法保存此命令的输出。如果我进行 imwrite，则只保存 1 X 1 矩阵。

谁能帮我这个？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:14:11.917

您应该能够使用以下代码行来获取生成的表面对象的句柄：

```
h = warp(x, y, z, I); 
```

然后，您可以使用访问该表面的属性`get(h, 'property')`

可用属性列表在[这里](http://www.mathworks.com/help/techdoc/ref/surface_props.html)

例如，如果您想获取 X 坐标，您可以：`Xcoords = get(h, 'XData');`

希望有帮助！

* * *

这是基于以下评论。

```
fig = figure, warp(x, y, z, I);
print(fig, '-r80','-dtiff','image2.tif') 
```

# silverlight - 从 webclient 读取 xap 文件

> ID：11798309
> 
> 赞同：1
> 
> 时间：2012-08-03T15:04:26.057
> 
> 标签：silverlight, webclient, xap

我在服务器上托管了我的 silverlight 服务。我在本地机器上创建了一个客户端应用程序，引用了服务器上的 silverlight 服务。一切都编译并正常工作。

现在我将 xap 文件处理到另一个 silverlight 应用程序中，并尝试使用以下代码读取 xap。

```
 StreamResourceInfo _streamResourceInfo = new StreamResourceInfo(e.Result, null);
        StreamResourceInfo _streamResourceInfoDll = Application.GetResourceStream(_streamResourceInfo,
                                          new Uri(string.Format("{0}.dll", abc), UriKind.Relative));
        AssemblyPart _assemblyPart = new AssemblyPart();
        Assembly _assembly = _assemblyPart.Load(_streamResourceInfoDll.Stream);
        UserControl _userControl = _assembly.CreateInstance(string.Format("{0}.MainPage", abc)) as UserControl;
        this.Main_Canvas.Children.Add(_userControl); 
```

一切正常。现在我将导航框架添加到我的应用程序中。

我用导航框架修改了主页。在我的主页上，我有

```
 <navigation:Frame x:Name="ContentFrame" Source="/Views/abc.xaml" Grid.Row="1" > 
```

当我将修改后的 xap 复制到另一个应用程序时。它抱怨在 /Views/abc.xaml 位置找不到任何 xaml。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:54:22.040

[这个答案很全面](https://stackoverflow.com/questions/6360993/mef-silverlight-how-do-i-navigate-to-a-page-in-another-xap)

但是...如果动态 XAP 加载是您的事，请帮自己一个忙，看看[Jounce](http://jounce.codeplex.com/) - 这是一个 MVVM 框架，但这并不意味着您绝对必须使用 ViewModels。

# python - Python计算不止一项的概率

> ID：11798312
> 
> 赞同：2
> 
> 时间：2012-08-03T15:04:38.157
> 
> 标签：python, tuples, counting

我想用python构建一个小程序，计算一个随机数被一个数字整除的概率。

在 C 中，我将创建一个数组，其中包含数字并循环遍历它们，将一个添加到另一个数组中，该数组将存储这些概率的总和。

我试图用元组在 python 中做到这一点，但我无法改变它们的值。那么最简单的方法是什么？

这是代码：

```
primes = (2,3,5,7,11,13,17,19,23,29)
numbers =(0,0,0,0,0 ,0 ,0 ,0 ,0 ,0)

for number in range(2,10000):
    for div in primes:
        x = 0
        if(number % div == 0):
            numbers[x]  += 1
        x+=1

print(numbers) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:06:48.343

一个随机整数被一个整数整除的概率`n`是`1/n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:17:49.357

作为rich.okelly 陈述的证明，考虑一组无限的数字。每个能被某个整数 N 整除的数都是 N 的倍数：1N、2N、3N 等。每第 N 个数 - 即每组 N 个连续数中的 1/N 个数 - 都可以被 N 整除。这适用于整个无限集；所有整数的 1/N 可以被 N 整除。因此，选择一个随机数，其边界是 N 的倍数（如果你有，比如说从 1 到 15 的随机数，其中不到 1/10 将被 10 整除）将有 1/N 的概率被 N 整除。

如果您想要的不仅仅是对原则的断言，认为这可能会有所帮助。

# asp.net - MVC3 JSON 返回编辑页面

> ID：11798313
> 
> 赞同：0
> 
> 时间：2012-08-03T15:04:42.677
> 
> 标签：asp.net, json, asp.net-mvc-3

所以我有一些 javascript 代码将数据发送到我的控制器：

Javascript：

```
<script type="text/javascript">
        $(document).ready(function () {
            $("#newGrade").click(function () {
                var newGradeName = $("#newGradeName").val();
                var newGradeValue = $("#newGradeValue").val();
                var vSchoolID = $("#SchoolID").val();

                if (newGradeName != null && newGradeValue != null) {
                    $.ajax({
                        url: '@Url.Action("NewGrade", "School")',
                        data: { gradeName: newGradeName, gradeValue: newGradeValue, schoolID: vSchoolID },
                        type: 'POST',
                        traditional: true,
                        success: function (data) {
                            if (data.status)
                                window.location = data.route;
                        },
                        error: function () {
                            return false;
                        }
                    });
                }
            });
        });
    </script> 
```

控制器：

```
 public ActionResult NewGrade(String gradeName, Int32 gradeValue, Guid schoolID)
    {
        School school = schoolRepository.GetByID(schoolID);
        school.Grades.Add(
            new Grade
            {
                GradeID = Guid.NewGuid(),
                Name = gradeName,
                NumericalValue = gradeValue
            });
        schoolRepository.Update(school);
        schoolRepository.Save();
        if (Request.IsAjaxRequest())
        {
            var json = new { status = true, route = Url.RouteUrl(new { action = "Edit", id = schoolID }) };
            return Json(json, JsonRequestBehavior.AllowGet);
        }
        return View();
    } 
```

我现在的问题是我想返回我的编辑页面（可能刷新页面，但不刷新数据，或者只是刷新整个页面），但我的编辑页面需要一个 ID（schoolID）。按下按钮进入编辑页面时显示在这里：

```
<a href="@Url.Action("Edit", "School", new { id = Model.School.SchoolID })"><i class="icon-pencil"></i>&nbsp;Edit</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:11:00.770

试试看`window.location.href`会发生什么。

```
success: function(data) {
                        if (data.status)
                            window.location.href = data.route;
                    }, 
```

假设您从您的操作方法中获得`JSON`响应，这应该可以正常工作，例如

```
{"status":"true","route":"/School/Edit/1"} 
```

其中 1 是新记录的 ID。

# wcf - 常见的 WCF 响应处理程序？

> ID：11798314
> 
> 赞同：0
> 
> 时间：2012-08-03T15:04:55.847
> 
> 标签：wcf, inheritance

我有一个 WCF 客户端，并且 Endpoint 刚刚使用新方法 (OperationContract) 进行了升级。我想编写一个通用方法来处理来自这个新方法以及端点上现有方法的响应。

我正在尝试创建一个“基本”响应类并向其添加 WCF 端点提供的通用属性，但我注意到在我的处理程序方法中，这些属性没有被保留。

我希望所有响应都继承自的类的代码如下所示：

```
public class ResponseBase
{
    public string[] ItemsReturned;
    public bool ItemsWereAvailable;

} 
```

因此，我添加了部分声明以将其添加到端点中的对象上。

```
public partial class RetrieveResponse :ResponseBase
{
}

public partial class RetrieveResponse2 :ResponseBase
{
} 
```

这样我就有了一个只接受“ResponseBase”作为其输入的处理程序方法。我做这一切都错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:10:38.477

其实例将是操作合同的返回值和/或参数的任何类都应使用[DataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)属性和属性进行修饰，如[DataMembers](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)：

```
[DataContract]
public class ResponseBase
{
    [DataMember]
    public string[] ItemsReturned { get; set; }

    [DataMember]
    public bool ItemsWereAvailable { get; set; }

} 
```

[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

如果不是，[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)不会序列化它们。

# php - PHP SQL插入语句返回语法错误，不确定它可能是什么

> ID：11798319
> 
> 赞同：0
> 
> 时间：2012-08-03T15:05:08.817
> 
> 标签：php, mysql, mysqli

我目前正在关注 PHP 教程，并且我有以下代码::

```
$sql = "insert into practice (title, synopsis, genre, release, score, poster) 
        values('{$title}','{$synopsis}','{$genre}','{$release}','{$score}','{$poster}')";

if ($result = $mysqli->query($sql)) {
    // movie successfully added
    // redirect to index.php
    header("Location: index.html");
    exit;
}
elseif ($mysqli->connect_errno) {
    // there was a database error when inserting
    printf("Insert failed: %s\n", $mysqli->error);
}
else {
    printf("Sorry this isn't working! Insert failed: %s\n", $mysqli->error);
} 
```

我目前收到的错误是“对不起，这不起作用......” mysqli 错误只是说明：

```
You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax 
to use near 'release, score, poster) values ('fa','f','ff','ff','ff','ff')' at line 1. 
```

我是一个完全的新手，所以我对语法错误实际上可能是什么感到有点迷茫。感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T15:09:09.817

`release`是[MySql 5.1中的保留关键字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)

您需要用反引号封装

```
$sql = "insert into practice (title, synopsis, genre, `release`, score, poster)  
        values('{$title}','{$synopsis}','{$genre}','{$release}','{$score}','{$poster}')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:09:53.980

“发布”似乎是mysql的一个关键字。

尝试用“`”转义关键字。

```
$sql = "insert into practice (title, synopsis, genre, `release`, score, poster) 
    values('{$title}','{$synopsis}','{$genre}','{$release}','{$score}','{$poster}')"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:09:57.930

它说语法问题从“发布”开始。由于它看起来不像语法错误，因此它可能是一个保留字。请参阅[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

# python - 使用 matplotlib 绘制 3D 屈服面

> ID：11798320
> 
> 赞同：1
> 
> 时间：2012-08-03T15:05:11.427
> 
> 标签：python, 3d, numpy, matplotlib

我想知道如何绘制 3D 屈服面，如本页[http://en.wikipedia.org/wiki/Von_Mises_yield_criterion](http://en.wikipedia.org/wiki/Von_Mises_yield_criterion)所示。我一直在尝试绘制 von Mises 屈服面作为开始，但完全没有成功。我想我根本不知道如何开始。如果有人可以向我展示一个示例代码，例如 von Mises，那么我可以使用它来绘制其他一些屈服面，例如 Cam Clay 和 Modified Cam Clay。

最初我以为我可以做这样的事情，但它不起作用：

```
for i in range(0, MAXSTEP):
    stressx = stressx + STEPSIZE
    stressy = -STEPSIZE
    for j in range(0, MAXSTEP):
        stressy = stressy + STEPSIZE
        stressz = -STEPSIZE
        for k in range(0, MAXSTEP):
            stressz = stressz + STEPSIZE
            tI1 = calcI1(stressx, stressy, stressz)
            tJ2 = calcJ2(stressx, stressy, stressz)
            tyieldf = calcF(tI1, ycon)
            tsqrtJ2 = np.sqrt(tJ2)
            tdiff = abs(tsqrtJ2 - tyieldf)
            if  tdiff < TOL:
                sigx[count] = stressx
                sigy[count] = stressy
                sigz[count] = stressy
                I1[count] = tI1
                sqrtJ2[count] = tsqrtJ2
                diff[count] = tdiff
                count = count + 1

X = np.outer(sigx[0:count], sigx[0:count])
Y = np.outer(sigy[0:count], sigy[0:count])
Z = np.outer(sigz[0:count], sigz[0:count])

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_surface(X, Y, Z)

ax.set_xlabel('X Label')
ax.set_ylabel('Y Label')
ax.set_zlabel('Z Label')

plt.show()
main() 
```

我想我不知道如何生成数据。我有方程，但不知道如何使用它们来生成曲面图所需的数据。我想我需要生成一个 XY 网格，然后为 Z 求解它，但我还没有尝试过这种方法。

# python - 如何从非浏览器客户端使用用户 API 登录 GAE 应用程序？

> ID：11798323
> 
> 赞同：1
> 
> 时间：2012-08-03T15:05:13.600
> 
> 标签：python, google-app-engine

我已经使用用户 API 构建了一个 GAE 应用程序。

我已经构建了一些 Selenium 测试应用程序，这些应用程序通过操纵浏览器输入用户名和密码来登录，效果很好。

我想构建一个命令行 python 应用程序（很可能使用请求库）来对登录后的一些 API 进行更多的性能/可扩展性测试。如何使用自定义的非浏览器客户端登录？

在跟踪所有 cookie 的同时向[https://accounts.google.com/ServiceLoginAuth](https://accounts.google.com/ServiceLoginAuth)提交表单是否简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:55:23.237

您可以使用 中`HttpRpcServer`提供的类`google.appengine.tools.appengine_rpc`对您的 AppEngine 应用发出经过身份验证的请求。它会为您跟踪 cookie。

# asp.net-mvc - 带有 MVC Web 应用程序的果园 CMS

> ID：11798324
> 
> 赞同：1
> 
> 时间：2012-08-03T15:05:15.833
> 
> 标签：asp.net-mvc, orchardcms

我需要用几个表单/网格页面构建一个简单的 Asp.Net MVC Web 应用程序。该应用程序可通过使用 Orchard 的面向公众的网站访问。我希望该应用程序也可以在 Orchard 之上运行，最好在同一个 Orchard“站点”内运行，以利用主题和可能的一些内容管理。

到目前为止，我尝试的是让整个应用程序成为我在面向公众的 Orchard 站点中使用的模块。这是一种工作，但是我在添加模块后对模块所做的更改没有得到反映，并且我的断点都没有在模块中命中。

我是否使用该模块走在正确的道路上，还是有更好的方法来获得这种级别的自定义，同时仍然能够使用我面向公众的网站的主题和内容管理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:55:58.897

检查事项：

*   您需要模块文件夹中的清单
*   该功能需要在 Orchard 中启用
*   您需要在模块中而不是在 global.asax 中定义路由（查看任何 routes.cs）

但这绝对是要走的路。

# c# - NetNamedPipeBinding 安全吗？

> ID：11798325
> 
> 赞同：15
> 
> 时间：2012-08-03T15:05:27.347
> 
> 标签：c#, wcf, named-pipes, netnamedpipebinding

我想知道 netNamedPipeBinding 是否被认为是安全的：

一方面，NetNamedPipeBinding 仅在传输层上实现安全性，并且它使用Microsoft 不再推荐的NTLM（[源）（](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipesecurity.mode.aspx)[源](http://msdn.microsoft.com/en-us/library/cc236715%28v=PROT.10%29.aspx)）

另一方面，命名 Pipie 无法从远程计算机访问，并且无法窃听用于传输数据或向其写入数据的特定开放管道实例，除非可以获得特定实例的句柄担心的。

这就是为什么我不知道如何看待这个解决方案的安全性的原因。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-04T14:53:31.127

您并没有真正提出正确的问题：不可能给出在所有情况下都有效的布尔答案。您应该始终从整体上评估解决方案的安全性，识别威胁并对相关的安全风险进行建模。

也就是说，WCF NetNamedPipeBinding 确实具有安全特性，这使得它与基于网络协议的绑定有所不同：

*   与任何网络协议相比，NetNamedPipeBinding 本质上更加安全，可抵御传输连接上的通信威胁。在命名管道的情况下，不是通过网络传输字节，而是通过一种机制交换消息，该机制涉及将数据字节（通过操作系统 API）传入和传出由单个机器上的操作系统内核管理的内存。消息流不可能被窃听，除非攻击者已经拥有在内核模式下运行的特权代码（如果您的操作系统的内裤中已经有这样的攻击者，他可能已经可以对您的应用程序进行任何他喜欢的事情了）。因此，WCF“传输安全”[或多或少与消息流的安全性无关，可以说应该经常在配置中禁用以避免不必要的运行时开销](https://web.archive.org/web/20120903180026/http://blogs.charteris.com/blogs/chrisdi/archive/2010/11/24/talking-to-wcf-over-named-pipes-3-do-we-need-all-this-security.aspx)。
*   命名管道绑定用于将服务端点发布到预期客户端的机制在本质上也比基于网络的协议更安全：它基于命名的共享内存对象，因此无法从任何远程计算机访问。
*   用于消息交换的命名管道以每次服务器重新启动时都会更改的 GUID 命名，并受到 ACL 的进一步保护，该 ACL 防止任何远程用户打开它，即使他们能够以某种方式发现管道名称的当前 GUID .

另一方面，基于通过 API 访问的操作系统工具，而不是基于网络通信的公共标准，存在一些基于网络的绑定不会出现的特定安全漏洞：

*   服务器“抢注”攻击，其中除预期 WCF 服务主机之外的某些进程成功侦听命名管道。.NET 3.5 及更早版本中的命名管道绑定无法抵御此漏洞，因为该绑定创建的用于保护管道的 ACL 中存在错误。.NET 4 主要纠正了这个错误。
*   Named pipes on Windows have an in-built mechanism to support named pipe servers impersonating their clients. The WCF NetNamedPipeBinding contains a bug which in some scenarios enables the pipe server (i.e. the WCF service) to use the client's Windows credentials for such impersonation even if the client-side WCF binding is configured to disallow impersonation.

In summary, you need to evaluate the overall security of your application/system in the light of the threats which matter to you, taking into account the particular characteristics of the various bindings you might consider. The NetNamedPipeBinding will often be the best choice for same-machine scenarios.

# javascript - 如何创建包含 colspans 的固定表头行？

> ID：11798327
> 
> 赞同：20
> 
> 时间：2012-08-03T15:05:33.643
> 
> 标签：javascript, jquery, css, html-table

我有一个从数据库数据创建的大型动态表。我需要列标题行保持固定并根据需要滚动行。

我在网络上尝试了许多脚本，试图让它正常工作。我想在浏览器上保持简单易用，因为一些目标计算机相当蹩脚。

这是我正在使用的内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Sample</title>
  </head>

  <body>
    <br><br><br><br>

    <table id="A" border="0" width="95%" cellspacing="0" cellpadding="0" align="center" class="base">
      <tr bgcolor='gray'>
        <td>
          <br><br><br>
          need the blue column heading rows to remain fixed, and scroll the green rows:<br>

    <table id="XYZ" border="1" width="625" cellspacing="0" cellpadding="0" align="center" class="base">
      <thead>

        <tr>
          <th width="50px" bgcolor="DeepSkyBlue" align="center" valign="middle">Col 1a</th>
          <th width="50px" bgcolor="DeepSkyBlue" align="center" valign="middle">Col 1b</th>
          <th width="75px" bgcolor="DeepSkyBlue" align="center" valign="middle">Col 1c</th>
          <th width="100px" style="border-left:medium solid black;" colspan="3" bgcolor="DeepSkyBlue" align="center" valign="middle"><b>Col 2</th>
          <th width="100px" style="border-left:medium solid black;" colspan="1" bgcolor="DeepSkyBlue" align="center" valign="middle"><b>Col 3</th>
          <th width="150px" style="border-left:medium solid black;" colspan="5" bgcolor="DeepSkyBlue" align="center" valign="middle"><b>Col 4<br>more<br>more</th>
          <th width="100px" style="border-left:medium solid black;" colspan="1" bgcolor="DeepSkyBlue" align="center" valign="middle"><b>Col 5</th>
        </tr>
        <tr>
            <th bgcolor="DeepSkyBlue" colspan="3" align="center" valign="middle">Col 1</th>
            <th bgcolor="DeepSkyBlue" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">B</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">C</th>
            <th bgcolor="DeepSkyBlue" style="border-left:medium solid black;" align="center">1</th>
            <th bgcolor="DeepSkyBlue" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">4-b</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">4-c</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">4-d</th>
            <th bgcolor="DeepSkyBlue" align="center" valign="middle">4-e</th>
            <th bgcolor="DeepSkyBlue" style="border-left:medium solid black;" align="center">Z</th>
        </tr>
      </thead>
      <tbody>
        <tr>
            <td bgcolor="PaleGreen" colspan="3" align="center" valign="middle">Col 1<br>more</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[1]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="LimeGreen" align="center" valign="middle">Col 1a</td>
            <td bgcolor="LimeGreen" colspan="2" align="center" valign="middle">Col 1b+c</td>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">B</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">C</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[2]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="PaleGreen" colspan="2" align="center" valign="middle">Col 1a+b</td>
            <td bgcolor="PaleGreen" align="center" valign="middle">Col 1c</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[3]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="LimeGreen" align="center" valign="middle">Col 1a</td>
            <td bgcolor="LimeGreen" colspan="2" align="center" valign="middle">Col 1b+c<br>more</td>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">B</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">C</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[4]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="PaleGreen" colspan="2" align="center" valign="middle">Col 1a+b</td>
            <td bgcolor="PaleGreen" align="center" valign="middle">Col 1c</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[5]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="LimeGreen" align="center" valign="middle">Col 1a</td>
            <td bgcolor="LimeGreen" colspan="2" align="center" valign="middle">Col 1b+c</td>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">B</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">C</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[6]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="PaleGreen" colspan="2" align="center" valign="middle">Col 1a+b</td>
            <td bgcolor="PaleGreen" align="center" valign="middle">Col 1c</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[7]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="LimeGreen" align="center" valign="middle">Col 1a</td>
            <td bgcolor="LimeGreen" colspan="2" align="center" valign="middle">Col 1b+c<br>more<br>more</td>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">B</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">C</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[8]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="PaleGreen" colspan="2" align="center" valign="middle">Col 1a+b</td>
            <td bgcolor="PaleGreen" align="center" valign="middle">Col 1c</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[9]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="LimeGreen" align="center" valign="middle">Col 1a</td>
            <td bgcolor="LimeGreen" colspan="2" align="center" valign="middle">Col 1b+c<br>more<br>more</td>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">B</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">C</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="LimeGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="LimeGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[8]" size="3"></th>
        </tr>
        <tr>
            <td bgcolor="PaleGreen" colspan="2" align="center" valign="middle">Col 1a+b</td>
            <td bgcolor="PaleGreen" align="center" valign="middle">Col 1c<br>more<br>more<br>more<br>more<br>more<br>more<br>more<br>more<br>more<br>more</td>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">A</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">B</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">C</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center">1</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center" valign="middle">4-a</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-b</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-c</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-d</th>
            <td bgcolor="PaleGreen" align="center" valign="middle">4-e</th>
            <td bgcolor="PaleGreen" style="border-left:medium solid black;" align="center"><input type="text" NAME="b[9]" size="3"></th>
        </tr>
      </tbody>
    </table>

          <br><br><br><br>
        </td>
      </tr>
    </table>

    <br><br><br><br><br><br>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T15:14:28.320

您可以在单独的表中使用相同的 colgroup 设置将标题行与数据行分开。

以下在 IE9、FF14.01 和 Chrome 20.0.1132.57 中运行良好。

```
<table border="1">
    <colgroup>
        <td width="100px">Column 1</td>
        <td width="100px">Column 2</td>
        <td width="100px">Column 3</td>
        <td width="16px" style="background-color: gray;"><td>
    </colgroup>
</table>
<div style="position: absolute; height:75px; overflow-y:scroll; overflow-x:auto">
    <table border="1">
        <colgroup>
            <td width="100px"></td>
            <td width="100px"></td>
            <td width="100px"></td>
        </colgroup>
        <tbody>
            <tr>
                <td>Row 1 - Cell 1</td>
                <td>Row 1 - Cell 2</td>
                <td>Row 1 - Cell 3</td>
            </tr>
            <tr>
                // rest omitted, see DEMO for full table
            </tr>
        </tbody>
    </table>
</div> 
```

​查看[**演示**](http://jsfiddle.net/FranWahl/KMmpJ/)

**编辑——2012 年 8 月 3 日**

我能够让它工作的唯一方法是有点诡计。我像第一个例子一样分开了标题。但是由于标题中的多个不同宽度的极端自定义，保持所有内容对齐的最可靠方法是将`th`行**也**复制到第二个表中，但里面没有文本。这使它们“不可见”，但迫使第二个表中的列按预期对齐。

见[**演示**](http://jsfiddle.net/pZWkR/)

这感觉有点骇人听闻，我确信有一个适当的解决方案，但同时它似乎运作良好。

**编辑——2012 年 8 月 7 日**

> 有什么办法可以将整个表格“装箱”到屏幕宽度的 100% 并更改 height:150px 的高度；更动态的东西，比如 $(window).height()-200

肯定有一种更优雅的方式来做这件事，但我能够让桌子更有活力。

宽度不是问题，因为我将总宽度限制在 95% 左右，并将表格硬封顶`min-width: 600px;`为标题和`min-width: 584px`正文的 a，从而确保表格始终保持对齐。

对于我使用 jQuery 的动态高度，将 resize 函数绑定到 windows resize 事件：

```
$(document).ready(function() {
    resizeTableHeight();

    $(window).on("resize.resizeTableHeight", function() {
        resizeTableHeight();
    });
});

function resizeTableHeight() {
    var headerHeight = $("#tableHeaderContainer").height();
    var documentHeight = $(document).height();
    var spacingHeight = 50;

    $("#tableBodyContainer").height(documentHeight - headerHeight - spacingHeight);
}​ 
```

当您打开小提琴时，小提琴窗口的原始高度很可能会很高，无法看到动态。只需移动分隔线并缩小视图即可查看重新调整大小。

**当您不**显示网格时不要忘记取消绑定该事件，因为它仍然会在每次调整大小时执行。

见动态网格[**演示**](http://jsfiddle.net/FranWahl/cW5vZ/)

您会注意到某些样式位于小提琴的 css（右上角）中，而其他样式则没有。我的 CSS 不是很强大，当我将它们从元素移到 CSS 区域时，一些样式开始被忽略。我尽我所能进入 CSS 并留下其余的硬编码以不破坏它。我敢肯定，每天都在使用 CSS 的人能够为您解决这个问题。

我还根据需要为 CSS 和 jQuery 的一些元素添加了一些 id。
我想对于 CSS，它可以改用类。我把它留给你。

**总结**
*我确信有一种更优雅的方式来实现你想要的，并且可能一些脚本向导为它提供了一个插件。在那之前，这似乎有效。还可能发生的情况是，如果在列中输入了大量长数据，则列开始再次错位接近 600 像素，但如上所述，这是一个非常个性化的解决方案，您可能需要为某些宽度添加一些动态计算随着时间的推移使用 jQuery。*

**编辑——2012 年 8 月 9 日**

关于设置我在评论中提到的 td 的宽度。我使用我提到的类解决了第一列中长文本的问题。适用于 IE、FF 和 Chrome。

见[**演示**](http://jsfiddle.net/pZWkR/17/)

我使用了评论中提到的逻辑。您可能会发现一个更好的命名约定。我只是使用主列+每个子列的开/关开关。对于第 1 列样式，其结果如下：

```
.col01-000{
    width: 0px;
}
.col01-001{
    width: 75px;
}
.col01-010, .col01-100{
    width: 50px;
}
.col01-011, .col01-101{
    width: 125px;
}
.col01-110{
    width: 100px;
} 
```

我已经为第一个 td 分配了一个类，`col01-100`这意味着`50px`.
第二个 td 现在有一个类`col01-011`，表示这个 td 仍然属于第一个主列，但子列的宽度为 2 (50px) 和 3(75px)。这加起来是 125 像素。

我希望这是有道理的，但如果不是，我很乐意在聊天中继续讨论，并与您一起计算出您想要应用的测量值。

到目前为止，我可以看到测量结果是：

**Col01**

*   Col1 = colspan 3 超过 175px
*   3个子列细分175px如下：50px-50px-75px

**Col02**

*   Col2 = colspan 3 超过 100px
*   3个子列细分100px如下：40px-30px-30px

**Col03**

*   Col3 = colspan 1 超过 100px
*   没有子栏目

**Col04**

*   Col4 = colspan 5 超过 150px
*   5个子列细分150px如下：30px-30px-30px-30px-30px

**Col05**

*   Col5 = colspan 1 超过 100px
*   没有子栏目

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T16:26:48.663

**编辑：**修复窗口调整大小的固定位置：

[http://jsfiddle.net/eReBn/13/](http://jsfiddle.net/eReBn/13/)

**完整代码：**

```
$(function() {
    (function($) {
        $.fn.fTable = function(o) {

            var tableTmpl = '<table id="XYZ_fixed" border="1" width="625" cellspacing="0" cellpadding="0" align="center" class="base"></table>';

            this.wrap('<div class="fTable_container" />');
            var fc = this.parent();
            fc.css('width', this.width() + 18);

            this.wrap('<div class="fTable_rContainer" />');
            var rc = this.parent();
            rc.css('height', o.height);

            var fTable = $(tableTmpl);
            fTable
             .addClass('fTable_fixedHead')
             .html(this.find('thead').clone())
             .prependTo(rc);

            $(window).on('scroll resize', function () {
                console.log(isScroll());
                if (isScroll()) {
                    fTable.css('left', $(this).scrollLeft() * -1);
                } else {
                    fTable.css('left', '');
                }
            });
        };

        function isScroll() {
           var root= document.compatMode=='BackCompat'?
               document.body : document.documentElement;
            return root.scrollWidth>root.clientWidth;
        }

    })(jQuery);

    $('#XYZ').fTable({
        height: 300
    });
}); 
```

* * *

**编辑：**尝试以下解决方案..因为您可以手动添加样式和调整表格。

**演示：http:** [//jsfiddle.net/eReBn/12/embedded/result/](http://jsfiddle.net/eReBn/12/embedded/result/)

**手动的：**

一种。将下面的 CSS 复制到您的样式表

> ```
> .fTable_rContainer {
>     position: relative;
>     overflow: auto;    
>     height: 300px; /* Height of the table */
> }
> 
> .fTable_container {
>     width: 643px;  /* Total width of the table you set + 18px (scroll size) */
> }
> 
> .fTable_fixedHead {
>     position: fixed; 
> } 
> ```

湾。用 div 包裹表格`class="fTable_container"`

C。复制`thead`原始表的一部分并像在 DEMO 中一样移动到新表。

d。将类添加`fTable_fixedHead`到新表

**使用一些脚本自动化：**

**演示：http:** [//jsfiddle.net/eReBn/11/embedded/result/](http://jsfiddle.net/eReBn/11/embedded/result/)

* * *

我尝试使用 2 个表来解决它，

1.  原始表（未动）
2.  固定 Header 表（绝对定位）在原始表上

检查一下，让我知道你是否喜欢它。

[**演示**](http://jsfiddle.net/eReBn/7/embedded/result/)

在 Firefox 和 Chrome 中测试。[今天晚些时候将在其他浏览器上测试]

完整代码[@http://jsfiddle.net/eReBn/7/](http://jsfiddle.net/eReBn/7/)

**JS：**

```
$(function() {
   (function($) {
     $.fn.fTable = function(o) {
        /* Preserve the attr list from original table    */
        var el = this[0], arr = [], it;
        for (var i = 0, attrs = el.attributes, l = attrs.length; i < l; i++) {

          it = attrs.item(i);

          if (it.nodeName == 'id') {
           arr.push(it.nodeName + '="' + it.nodeValue + '_fixed"');
          } else {
           arr.push(it.nodeName + '="' + it.nodeValue + '"');
          }
        }

        var tableTmpl = '<table ' + arr.join(' ') + '></table>';

        /* Wrap it inside div's */
        this.wrap('<div class="fTable_container" />');
        this.wrap('<div class="fTable_rContainer" />');

        var rc = this.parent();

        /* Clone the thead and add it to the fixed table head */
        $(tableTmpl)
          .addClass('fTable_fixedHead')
          .html(this.find('thead').clone())
          .prependTo(rc);

        /* Position the fixed head table on scroll */
        rc.scroll(function() {
          rc.find('.fTable_fixedHead').css('top', $(this).scrollTop());
        });

        var _that = this;
        rc.find('.fTable_fixedHead').css('left', _that.aPosition().left);

        /* Position the left on resize*/
        $(window).resize(function() {
          rc.find('.fTable_fixedHead').css('left', _that.aPosition().left);
        });
     };

     /* Position fix for webkit browsers */
     jQuery.fn.aPosition = function() {
        thisLeft = this.offset().left;
        thisTop = this.offset().top;
        thisParent = this.parent();
        parentLeft = thisParent.offset().left;
        parentTop = thisParent.offset().top;
        return {
           left: thisLeft - parentLeft,
           top: thisTop - parentTop
        }
     }
  })(jQuery); 
```

});

**用法：**

```
$('#XYZ').fTable({
    height: 300
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T21:07:12.887

我们使用[DataTables.net](http://datatables.net/)并很好地解决了一个非常相似的问题。这是他们网站上带有高级多行标题的[示例。](http://datatables.net/release-datatables/examples/basic_init/complex_header.html)您还可以在子列类别中进行排序。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-10T19:56:42.693

我不妨为你提供一个选择。这假定浏览器窗口正在滚动。

这里的想法是复制你的表，除此之外的所有内容都`thead`被删除。它固定在视口的顶部并隐藏。

当用户滚动到表格顶部时，将显示克隆的表格。我还包括一个`resize`事件来处理视口宽度的变化。保持固定标题和表格水平对齐有一些小问题，但这不是一个大问题。

这是一个使用您的表格作为源代码的演示（我将很多内联样式移到 CSS 中只是为了让事情更容易阅读）：

[**jsFiddle 演示**](http://jsfiddle.net/PLjBm/3/)

```
$(function(){
    var $window = $(window),
        stickyTable = $('#XYZ'),
        stickyHeader = stickyTable.clone(true),
        tableTop = stickyTable.offset().top,
        isSticky = false;

    handleScroll();

    $window.on({
        scroll: handleScroll,
        resize: handleResize
    });

    stickyHeader.find('tbody').remove();
    stickyHeader.find('tfoot').remove();

    stickyHeader.addClass('sticky-header').appendTo('body');

    function handleScroll() {
        var scrollTop = $window.scrollTop();

        if(scrollTop > tableTop && !isSticky) {
            stickyHeader.css('left',stickyTable.offset().left+'px').show();
            isSticky = true;
        } else if(scrollTop <= tableTop && isSticky) {
            stickyHeader.hide();
            isSticky = false;
        }
    }

    function handleResize() {
        if(isSticky) {
            stickyHeader.css('left',stickyTable.offset().left+'px');
        }
    }
});​ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-07T20:46:02.273

如果您[.clone()](http://api.jquery.com/clone/)并将`thead`其放入表中，则所有列都保留其原始宽度。

**更新：**我意识到 IE 6 和 7 有问题，我修复了它们。问题是那些版本的 IE 不允许您`thead`直接定位。结果，我更改了它，以便它移动`thead tr`，但前提是浏览器是 IE < 8。

另一个错误是 IE < 9 在`[.prependTo()](http://api.jquery.com/prependTo/)`. 我不确定它是否只是 IE Tester，但我通过使用`[.after()](http://api.jquery.com/after/)`.

[更新的演示](http://baylorrae.com/demo-v2.html)

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
  // http://obvcode.blogspot.com/2007/11/easiest-way-to-check-ie-version-with.html
  var Browser = {
    version: function() {
    var version = 999; // we assume a sane browser
      if (navigator.appVersion.indexOf("MSIE") != -1) {
        // bah, IE again, lets downgrade version number
        version = parseFloat(navigator.appVersion.split("MSIE")[1]);
      }

      return version;
    }
  }

  var $thead = $('#XYZ thead'),
      $new_thead = $thead.clone().hide(),
      $window = $(window),

      distance_from_top = $thead.offset().top,
      did_scroll = false; // http://ejohn.org/blog/learning-from-twitter/

  // for IE <= 7
  var $tr_1, $tr_2;

  // add the cloned thead
  $thead.after($new_thead);

  if( Browser.version() < 8 ) {
    $new_thead.find('tr').css({
      'position': 'absolute',
      'top': 0,
      'margin-left': -1
    });

    $tr_1 = $new_thead.find('tr:first');
    $tr_2 = $new_thead.find('tr:last').css('top', $tr_1.height());
  }else {
    $new_thead.css({
    'position': 'fixed',
    'width': $thead.width(),
    'top': 0
    });
  }

  $window.scroll(function() {
    if( Browser.version() < 8 ) {
      did_scroll = true;
    }

    if( $window.scrollTop() >= distance_from_top ) {
      $new_thead.show();
    }else {
      $new_thead.hide();
    }
  });

  setInterval(function() {
    if( did_scroll ) {
    did_scroll = false;
      $tr_1.css('top', $window.scrollTop());
      $tr_2.css('top', $tr_1.height() + $window.scrollTop());
    }
  }, 250);
</script> 
```

* * *

## 编辑

我没有意识到[KM](https://stackoverflow.com/users/65223/km)想要一个固定高度的桌子。如果您查看我上面的示例，您会发现如果浏览器滚动到表格顶部，表格标题是固定的。但是，据我了解，这不是他/她想要的。

我已经在我的 Mac 上的以下浏览器中对此进行了测试。

1.  野生动物园 (5.1.7)
2.  火狐 (11.0)
3.  铬 (21.0.1180.75)

我已经在 Windows 7 中对此进行了测试：

1.  使用 IE Tester 的 IE 8 和 9
2.  火狐（5.0.1、6.0.2、7.0.1、8.0.1、10.0.2）
3.  铬 (12.0.742.91)
4.  野生动物园 (5.1.5)

它在 IE 6 和 7 中被破坏，但我没有考虑是否有修复。

[演示](http://baylorrae.com/scrollable-table/)

* * *

```
var table = $('#XYZ'),
    thead = table.find('thead'),
    fixed_thead = thead.clone(),

    // create a copy of the original table
    fixed_thead_wrapper = $('<table />', {
      'id': 'fixed_thead_wrapper',
      'align': 'center',
      'width': table.outerWidth(),
      'border': '1',
      'cellspacing': 0,
      'cellpadding': 0              
    }).insertBefore(table),

    // this forces the table to be in a scrollable area
    table_wrapper = $('<div />', {
      'id': 'fixed_table_wrapper',
      'height': 300,
      css: {
        'overflow': 'auto'
      }
    });

// add the cloned thead to the new table
fixed_thead_wrapper.append(fixed_thead);

// hide the original thead.
// this is a very hackish way of doing this, but I'm not sure of a better way as of right now
table.css({
  'position': 'relative',
  'top': fixed_thead_wrapper.height() * -1
});

// wrap the original table
table.wrap(table_wrapper);

// line the tables up now that the scrollbar is present
fixed_thead_wrapper.css({
  'position': 'relative',
  'left': table.offset().left - fixed_thead_wrapper.offset().left
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-09T05:38:52.393

以前写的一些答案很棒！

我大部分时间都在 Google Chrome 中测试了这个，因为出色的 Chrome 开发人员工具可以即时调试 Javascript，并实时调整 css。

如果您在其中添加了带有克隆功能的 jQuery，则可以在不将其压缩到页面高度的情况下实现可滚动表格，并且在您想要的任何地方都有一个浮动表格标题

以下代码将克隆表头：

```
jQuery(document).ready(function () {
    jQuery("body").append("<table class='tableheader' align='center' border='1' width='625' cellspacing='0' cellpadding='0'></table>");
    jQuery(".tableheader").append(jQuery(".base2 thead").clone()); 
```

然后你需要设置一些静态变量，并捕获滚动事件：

```
var headerToMove = jQuery(".tableheader");
var headerOffsetTop = headerToMove.offset().top;
var headerPosition = headerToMove.position();

jQuery(window).scroll(function () { scroll_post_header(); }); 
```

然后在当前页眉上上下移动页眉，但如果当前页眉滚动，则将其保持在页面顶部。

```
 function scroll_post_header() {
        var new_position = headerOffsetTop - jQuery(window).scrollTop();
        if (new_position < 0) { new_position = 0;}
        if (headerPosition.top != new_position) {
            headerToMove.css("top",new_position);
            //headerToMove.stop().animate({ 'top': new_position }, 300);
        }
        if (jQuery(window).scrollTop() < 15) { headerToMove.css("top",headerOffsetTop);}
    }
}); 
```

​ 现在将一些初始 CSS 添加到将被克隆的标题中。您将需要从顶部找到当前标题所在的最佳位置，但即使这也可以通过 jQuery 查询来实现。

```
.tableheader {
    position: fixed;
    height: 80px;
    top: 160px;
    left: 2.5%;
    z-index: 1000;    
} 
```

完整的工作示例可以在以下位置找到：http: [//jsfiddle.net/webwarrior/YZ8cJ/142/](http://jsfiddle.net/webwarrior/YZ8cJ/142/)

希望这在不更改任何 html 的情况下有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-03T15:16:17.540

我一直使用这个超级易于使用的插件，它可以像处理它一样轻松`$('#tableID').fixedtableheader();`

效果惊人，非常轻巧且灵活。

[http://fixedheadertable.com/](http://fixedheadertable.com/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-03T15:19:32.077

查看[带有固定标题的 HTML 表格？](https://stackoverflow.com/questions/673153/html-table-with-fixed-headers). 这是一般问题“如何冻结表头？”的最佳答案。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-07T08:41:30.067

**检查这个[小提琴](http://jsfiddle.net/vijaysarin/v67uq/1/)**

**这是代码。在所有浏览器中都能正常工作......！**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Scrollable Table with Fixed Header</title>
<meta http-equiv="language" content="en-us">

<script type="text/javascript">
    function removeClassName (elem, className) {
        elem.className = elem.className.replace(className, "").trim();
    }

    function addCSSClass (elem, className) {
        removeClassName (elem, className);
        elem.className = (elem.className + " " + className).trim();
    }

    String.prototype.trim = function() {
        return this.replace( /^\s+|\s+$/, "" );
    }

    function stripedTable() {
        if (document.getElementById && document.getElementsByTagName) {  
            var allTables = document.getElementsByTagName('table');
            if (!allTables) { return; }

            for (var i = 0; i < allTables.length; i++) {
                if (allTables[i].className.match(/[\w\s ]*scrollTable[\w\s ]*/)) {
                    var trs = allTables[i].getElementsByTagName("tr");
                    for (var j = 0; j < trs.length; j++) {
                        removeClassName(trs[j], 'alternateRow');
                        addCSSClass(trs[j], 'normalRow');
                    }
                    for (var k = 0; k < trs.length; k += 2) {
                        removeClassName(trs[k], 'normalRow');
                        addCSSClass(trs[k], 'alternateRow');
                    }
                }
            }
        }
    }

    window.onload = function() { stripedTable(); }
</script>

<style type="text/css">

body {
    background: #FFF;
    color: #000;
    font: normal normal 12px Verdana, Geneva, Arial, Helvetica, sans-serif;
    margin: 10px;
    padding: 0
}

table, td, a {
    color: #000;
    font: normal normal 12px Verdana, Geneva, Arial, Helvetica, sans-serif
}

h1 {
    font: normal normal 18px Verdana, Geneva, Arial, Helvetica, sans-serif;
    margin: 0 0 5px 0
}

h2 {
    font: normal normal 16px Verdana, Geneva, Arial, Helvetica, sans-serif;
    margin: 0 0 5px 0
}

h3 {
    font: normal normal 13px Verdana, Geneva, Arial, Helvetica, sans-serif;
    color: #008000;
    margin: 0 0 15px 0
}

div.tableContainer {
    clear: both;
    border: 1px solid #963;
    height: 285px;
    overflow: auto;
    width: 756px
}

html>body div.tableContainer {
    overflow: hidden;
    width: 756px
}

div.tableContainer table {
    float: left;
    width: 740px
}

html>body div.tableContainer table {
    width: 756px
}

thead.fixedHeader tr {
    position: relative
}

html>body thead.fixedHeader tr {
    display: block
}

thead.fixedHeader th {
    background: #C96;
    border-left: 1px solid #EB8;
    border-right: 1px solid #B74;
    border-top: 1px solid #EB8;
    font-weight: normal;
    padding: 4px 3px;
    text-align: left
}

thead.fixedHeader a, thead.fixedHeader a:link, thead.fixedHeader a:visited {
    color: #FFF;
    display: block;
    text-decoration: none;
    width: 100%
}

thead.fixedHeader a:hover {
    color: #FFF;
    display: block;
    text-decoration: underline;
    width: 100%
}

html>body tbody.scrollContent {
    display: block;
    height: 262px;
    overflow: auto;
    width: 100%
}

tbody.scrollContent td, tbody.scrollContent tr.normalRow td {
    background: #FFF;
    border-bottom: none;
    border-left: none;
    border-right: 1px solid #CCC;
    border-top: 1px solid #DDD;
    padding: 2px 3px 3px 4px
}

tbody.scrollContent tr.alternateRow td {
    background: #EEE;
    border-bottom: none;
    border-left: none;
    border-right: 1px solid #CCC;
    border-top: 1px solid #DDD;
    padding: 2px 3px 3px 4px
}

html>body thead.fixedHeader th {
    width: 200px
}

html>body thead.fixedHeader th + th {
    width: 240px
}

html>body thead.fixedHeader th + th + th {
    width: 316px
}

html>body tbody.scrollContent td {
    width: 200px
}

html>body tbody.scrollContent td + td {
    width: 240px
}

html>body tbody.scrollContent td + td + td {
    width: 300px
}
</style>
</head><body>
<div id="tableContainer" class="tableContainer">
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="scrollTable">
<thead class="fixedHeader">
    <tr class="alternateRow">
        <th><a href="">Header 1</a></th>
        <th><a href="">Header 2</a></th>
        <th><a href="">Header 3</a></th>
    </tr>
</thead>
<tbody class="scrollContent">
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>And Repeat 1</td>
        <td>And Repeat 2</td>
        <td>And Repeat 3</td>
    </tr>
    <tr class="normalRow">
        <td>Cell Content 1</td>
        <td>Cell Content 2</td>
        <td>Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>More Cell Content 1</td>
        <td>More Cell Content 2</td>
        <td>More Cell Content 3</td>
    </tr>
    <tr class="normalRow">
        <td>Even More Cell Content 1</td>
        <td>Even More Cell Content 2</td>
        <td>Even More Cell Content 3</td>
    </tr>
    <tr class="alternateRow">
        <td>End of Cell Content 1</td>
        <td>End of Cell Content 2</td>
        <td>End of Cell Content 3</td>
    </tr>
</tbody>
</table>
</div>
</body></html> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-09T12:11:50.457

我有一个想法给你。您将把表分成两个表。其中一个将充当标题，第二个将充当所有单元格和行的其余部分。下面的技巧：将两个固定的宽度和高度 div 垂直放置在它们旁边。上一个将加载标题表，而下一个将用于表体。在较低的 div 中，您将设置垂直溢出。通过这种方式，您将拥有简单的解决方案，支持您的标题移动数据滚动。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-08-03T15:16:44.560

似乎最好的方法是两张桌子。带有标题的外表，以及一个带有内表的大行。div 应该是 css 的溢出：滚动或自动设置高度（通过 css 或 javascript）。您必须在所有列上设置特定宽度。我认为最好的方法是为每个标题提供一个类，并确保内部表中的相应列具有相同的类。

```
<table>
    <tr><th>...</th></tr>
    <tr><td>
            <div><inner table></div>
    </td></tr>
</table> 
```

看看这个例子：[http ://www.cssplay.co.uk/menu/tablescroll.html](http://www.cssplay.co.uk/menu/tablescroll.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-03T15:14:31.907

非常快速和粗略，但希望你能明白，为什么不只`position:fixed`用于标题。jsfiddle：http: [//jsfiddle.net/b3S5F/](http://jsfiddle.net/b3S5F/)

# udp - UDP NAT Traversal (punch through) 快捷方式

> ID：11798330
> 
> 赞同：0
> 
> 时间：2012-08-03T15:05:38.240
> 
> 标签：udp, nat, nat-traversal

关于 UDP NAT Traversal 的大部分信息都涉及一个中间服务器，用于将公共端点与两个客户端进行通信。如果为客户端预先配置了公共端点，是否可以快捷方式？

NAT 后面的两个客户端可以开始向对方的公共 IP:Port 发送 UDP 流量以打孔吗？除了通信公共端点之外，是否需要中间体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T04:47:16.733

我不能与权威交谈（或提供消息来源），但根据我在过去一个月中使用 STUN 和 TURN 协议收集到的信息：

### 一些背景

NAT 有多种分配端口的方法（见下文）。全锥 NAT 是一对一的映射，因此一旦 NAT 映射了一个端口，任何外部主机都可以使用相同的映射向私有主机发送数据包。但是，例如，如果 NAT 类型是对称的，则发往不同外部 IP 的数据包将具有不同的端口映射。

对于某些 NAT 类型（例如全锥），可以使用 STUN 服务器来确定 NAT 端口映射。这个 STUN 服务器是你提到的中间服务器的一个流行例子。一些更具限制性的 NAT 类型（例如对称）使得无法使用 STUN 服务器，并且直接对等连接是不可能的。这是因为 STUN 服务器假定 NAT 端口映射不依赖于外部 IP，但对称 NAT 为不同的外部 IP 分配不同的端口映射。

### 我们可以删除中间服务器吗？

具体的地址转换（路由器如何映射端口号）算法取决于具体的路由器（我的猜测）。一些路由器使用随机端口分配，这使得客户端*无法*在没有中间公共服务器做出此决定（STUN）的情况下预先建立连接。

一般来说，不，不可能删除中间服务器。除非您对 NAT 的工作原理有一些内部知识（这可能取决于路由器的特定型号），否则必须使用中间服务器。

*   [眩晕 RFC](https://www.rfc-editor.org/rfc/rfc5389)
*   [RFC 4787 第 4.1 节](https://www.rfc-editor.org/rfc/rfc4787#section-4.1)
*   [NAT RFC 1631](https://www.rfc-editor.org/rfc/rfc1631)
*   [不完整的 NAT 类型列表](http://en.wikipedia.org/wiki/Network_address_translation#One-to-many_NATs)

# android - BaseAdapter 上的 notifyDataSetChanged 没有更新数组中的数据

> ID：11798334
> 
> 赞同：0
> 
> 时间：2012-08-03T15:05:47.710
> 
> 标签：android, listview

我有一个列表视图，其中包含每个项目的时间。我将时间显示在左侧，将时间从左侧显示到右侧。所以，假设我想显示下午 6 点，现在是下午 4.53 点，我会显示还剩 1 小时 7 分钟。这是计算到我的 BaseAdapter 中的。

现在我想每 30 秒刷新一次这些剩余时间。所以我尝试使用带有可运行的处理程序并调用 notifyDataSetChanged() 但我认为，数据需要更新，否则 notifyDataSetChanged() 什么都不做，对吧？

所以这里有一些代码：

可在我的活动中运行：

```
private Runnable updateScreen = new Runnable() {
    public void run() {
                    //update of the current time
        rightNow = Calendar.getInstance();
        timeNow = rightNow.get(Calendar.HOUR_OF_DAY) * 60 + rightNow.get(Calendar.MINUTE);

        if(adapter != null)
                adapter.notifyDataSetChanged();

        handler.postDelayed(this, 30000);
    }
}; 
```

这是我在我的活动中实例化我的适配器的方式：

```
adapter = new TimesAdapter(context, times, timeNow); 
```

times 是一个 String[] 并且 timeNow 是一个 int。

你有什么想法吗？如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:16:47.327

您不能从 ui 线程外部调用 notifyDataSetChanged()。将调用移至处理程序，列表应刷新。

# javascript - 自动将所有网站链接更改为附属链接

> ID：11798336
> 
> 赞同：3
> 
> 时间：2012-08-03T15:05:49.927
> 
> 标签：javascript, web, mediawiki, affiliate

我希望能够在我的**MediaWiki**安装上自动将链接更改为附属链接。如果将来需要更改代码，这将有助于减少管理链接的时间。

这是我的 GOG.com 会员计划的设置：我需要将此密钥附加到每个 GOG.com 链接的末尾：`?pp=708a77db476d737e54b8bf4663fc79b346d696d2`

```
gog.com/en/gamecard/baldurs_gate_the_original_saga/?pp=708a77db476d737e54b8bf4663fc79b346d696d2 
```

一段代码，如 Javascript，是否有可能拦截所有链接（如`http://www.gog.com/en/gamecard/baldurs_gate_the_original_saga/`）并在末尾附加附属代码，如上例所示？

我知道这段名为[Amazon Associate Link Localiser](http://petewilliams.info/blog/2009/07/javascript-amazon-associate-link-localiser/)的 Javascript 代码做了类似的事情。但是，它仅适用于亚马逊链接，并且它还本地化链接，这是我不想要的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-05T20:27:28.467

正确的方法是使用这样的[LinkerMakeExternalLink](https://www.mediawiki.org/wiki/Manual:Hooks/LinkerMakeExternalLink) mediawiki 钩子（您可以将它放在 LocalSettings.php 的底部：

```
$wgHooks['LinkerMakeExternalLink'][] = 'ExampleExtension::exampleLinkerMakeExternalLink';

class ExampleExtension {
    public static function exampleLinkerMakeExternalLink( &$url, &$text, &$link, &$attribs, $linktype ) {
        if( strpos( $url, 'gog.com') !== false ) {
            $url .= '?pp=708a77db476d737e54b8bf4663fc79b346d696d2';
        }
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:57:15.007

所以你也可以使用jquery来绑定任何链接点击。这样您就可以即时进行链接评估。这个 jsfiddle 是我认为你想要完成的事情的粗略介绍。这些警报只是为了您的利益，应该被删除。

```
$("a").click(function() {
    addAffiliate(this);
});

myCode = "?pp=708a77db476d737e54b8bf4663fc79b346d696d2";
myAmazonCode = "?tag=shihac-20"
    function addAffiliate(link) {
        alert("enterting script: " + link.href);
        if ((link.href).indexOf("gog.com") > -1 && (link.href).indexOf(myCode) < 0) {
                link.href = link.href + myCode;
        }else if((link.href).indexOf("amazon.com") > -1 && (link.href).indexOf(myAmazonCode) < 0){
                link.href = link.href + myAmazonCode;   
        }
            alert(link.href);
            return true;
        }​ 
```

[http://jsfiddle.net/du47b/23/](http://jsfiddle.net/du47b/23/)

更新：添加代码和完全限定路径

更新：为其他代码添加了“else if”块。使用“else if”而不是另一个 if 块有望减少不必要的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:21:08.790

不确定数百个链接的性能有多好。

```
// Plain Javascript

var links = document.getElementsByTagName('a');

for (var i = 0, max = links.length; i < max; i++) {
    var _href = links[i].href;

    if (_href.indexOf('gog.com') !== -1) {
        links[i].href = _href + '?pp=708a77db476d737e54b8bf4663fc79b346d696d2';   
    }
} 
```

[**演示**](http://jsfiddle.net/bj8La/2/)

# java - 如何：将语音命令输入到 android 应用程序中

> ID：11798337
> 
> 赞同：57
> 
> 时间：2012-08-03T15:05:50.287
> 
> 标签：java, android, voice-recognition

网上有很多教程可以将语音识别添加到 Android 应用程序中。它们经常令人困惑，并且编码的发布者永远无法回答问题。我需要一个关于如何将语音识别添加到我的应用程序的基本概述（作为答案，而不是链接）。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-03T15:09:18.540

如果您想将语音识别添加到您小组的 Android 应用程序，这非常简单。

在本教程中，您需要在粘贴代码时添加导入。

1.  创建一个 xml 文件或使用现有的文件，并确保添加一个按钮和一个列表视图。
2.  在 java 类中，您需要扩展活动并实现`OnClickListener` 您将收到一个错误，指出您有未实现的方法。将鼠标悬停在它上面并添加未实现的方法。我们稍后会补充。
3.  接下来在你的java中设置按钮和列表视图。

    ```
    public ListView mList;
    public Button speakButton; 
    ```

    还添加：

    ```
    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234; 
    ```

4.  接下来，创建一个 OnCreate 方法并设置按钮和侦听器。

    ```
    speakButton = (Button) findViewById(R.id.btn_speak);
    speakButton.setOnClickListener(this); 
    ```

    也添加这个方法（我们接下来会设置它）

    ```
    voiceinputbuttons(); 
    ```

    请记住为您显示的 xml 设置内容视图。

5.  在你的 oncreate 之外创建一个看起来像这样的新方法。

    ```
    public void voiceinputbuttons() {
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    } 
    ```

6.  现在您必须使用以下代码设置您的语音识别活动。

    ```
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
            "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    } 
    ```

7.  接下来，在步骤 2 中的 onclick 方法中添加步骤 6 中的活动。

    ```
    startVoiceRecognitionActivity(); 
    ```

8.  接下来，我们将不得不设置另一种方法。复制并粘贴以下代码。

    ```
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
            ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, matches)); 
    ```

    匹配是语音输入的结果。它是用户可能说的话的列表。对要使用的关键字使用 if 语句允许使用任何活动，如果关键字匹配，可以设置多个关键字来使用相同的活动，因此多个单词将允许用户使用活动（使其如此用户不必记住列表中的单词）要使用语音输入信息中的活动，只需使用以下格式；

    ```
    if (matches.contains("information")) {
        informationMenu();
    } 
    ```

    注意：您可以随时通过在 Eclipse 中按 ctrl+shift+F 来格式化代码。

9.  现在我们将设置第 8 步中的代码使用的方法。此代码创建一个意图，将用户引导至新菜单。为此，您将需要另一个 xml 和 java 类。另外，请记住将活动添加到您的清单中。

    ```
    public void informationMenu() {
        startActivity(new Intent("android.intent.action.INFOSCREEN"));
    } 
    ```

10.  最后，您需要设置一些代码，让用户知道麦克风是否正常工作。将此代码粘贴到最后的 OnCreate 方法中。

    ```
    // Check to see if a recognition activity is present
    // if running on AVD virtual device it will give this message. The mic
    // required only works on an actual android device
    PackageManager pm = getPackageManager();
    List activities = pm.queryIntentActivities(new Intent(
    RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() != 0) {
        voiceButton.setOnClickListener(this);
    } else {
        voiceButton.setEnabled(false);
        voiceButton.setText("Recognizer not present");
    } 
    ```

最后注：语音识别将无法在虚拟模拟器上运行，因为它们无法访问您计算机上的麦克风。语音识别仅适用于互联网连接。

这是大约。你的最终代码在你的java中应该是什么样子。

```
package com.example.com.tutorialthread;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.speech.RecognizerIntent;
import android.support.v4.app.NavUtils;

public class main extends Activity implements OnClickListener {

public ListView mList;
public Button speakButton;

public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    speakButton = (Button) findViewById(R.id.btn_speak);
    speakButton.setOnClickListener(this);

    voiceinputbuttons();
}

public void informationMenu() {
    startActivity(new Intent("android.intent.action.INFOSCREEN"));
}

public void voiceinputbuttons() {
    speakButton = (Button) findViewById(R.id.btn_speak);
    mList = (ListView) findViewById(R.id.list);
}

public void startVoiceRecognitionActivity() {
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
        "Speech recognition demo");
    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    startVoiceRecognitionActivity();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
        // Fill the list view with the strings the recognizer thought it
        // could have heard
        ArrayList matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        mList.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, matches));
        // matches is the result of voice input. It is a list of what the
        // user possibly said.
        // Using an if statement for the keyword you want to use allows the
        // use of any activity if keywords match
        // it is possible to set up multiple keywords to use the same
        // activity so more than one word will allow the user
        // to use the activity (makes it so the user doesn't have to
        // memorize words from a list)
        // to use an activity from the voice input information simply use
        // the following format;
        // if (matches.contains("keyword here") { startActivity(new
        // Intent("name.of.manifest.ACTIVITY")

        if (matches.contains("information")) {
            informationMenu();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-12T02:34:14.023

真的很好的教程。做得好。

完成更多一点：

您需要为清单添加权限，如下所示

```
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

如果你有语音也不起作用

`launchMode="singleInstance"`或者`launchMode="singleTask"`看起来应该是“标准的”

# css - 拇指上的文字动画

> ID：11798340
> 
> 赞同：0
> 
> 时间：2012-08-03T15:06:01.980
> 
> 标签：css, background, css-transitions

我试图创建一个带有框拇指的下载页面，当鼠标在拇指上时，描述文本来自右侧

我做了几乎所有我仍然要格式化的事情

*   但是文本出现在 100*100px 框外，我不知道我错过了什么，我只会看到框中的动画。

    有什么建议吗？

    tnx

    这是代码：

    ```
     <!DOCTYPE html>
        <html>
        <head>
        <style type="text/css">

        div.div0 {
        background:url('t_k1.png');
        display:block;
        width:100px;
        height:100px;
        position:relative;
        }
        div.div1 {
        opacity:0;
        display:block;
        left:100px;
        width:100px;
        height:100px;
        background:#999;
        position:relative;
        text-align:center;
        vertical-align:-50px;
        }
        div.div0:hover div.div1 {
        animation:mymove 2s forwards;
        -moz-animation:mymove 2s forwards;
        -webkit-animation:mymove 2s forwards;
        -o-animation:mymove 2s forwards;
        }

        @keyframes mymove {
        from {left:100px; opacity:0;}
        to {left:0px; opacity:0.8;}
        }

        @-moz-keyframes mymove /*Firefox*/ {
        from {left:100x; opacity:0;}
        to {left:0px; opacity:0.8;}
        }

        @-webkit-keyframes mymove /*Safari and Chrome*/ {
        from {left:100px; opacity:0;}
        to {left:0px; opacity:0.8;}
        }

        @-o-keyframes mymove /*Opera*/ {
        from {left:100px; opacity:0;}
        30% {opacity:0.2;}
        to {left:0px; opacity:0.8;}
        }

        </style>

        </head>
        <body>
        <div style="display:block; left:100px; top:100px; width:100px; height:100px; position:absolute;">
        <div class="div0">
        <div class="div1"><br /><br /><a href="#">prova</a></div>
        </div></div>

        </body>
        </html> 
    ```

    [http://jsfiddle.net/A97cc/](http://jsfiddle.net/A97cc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:20:04.380

我更新了你的小提琴：http: [//jsfiddle.net/A97cc/1](http://jsfiddle.net/A97cc/1)

为了防止元素在其父级之外可见，您可以将溢出设置为隐藏在父级上，在您的情况下为 div0 。

# iphone - 如何从 NSData 获取信息？

> ID：11798341
> 
> 赞同：4
> 
> 时间：2012-08-03T15:06:03.627
> 
> 标签：iphone, ios, nsdata

我是 iOS 新手。

NS数据：

```
{
"results" : [
  {
     "formatted_address" : "Proyezd Voskresenskiye Vorota, 3, Moscow, Russia, 109012",
     "geometry" : {
        "location" : {
           "lat" : 55.75622380,
           "lng" : 37.61855850
        } 
```

我只需要“formatted_address”，你能帮我制作一个 NSString 吗？对不起愚蠢的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:31:38.670

你`NSData`是一个 JSON 响应，你需要创建一个`NSDictionary`能够访问数据的特定部分。一个`NSDictionary`只是将键映射到值。获取您调用的值`– objectForKey:`。在您的情况下，您有一个字典作为键“结果”的值。所以在你的情况下：

```
NSDictionary *results = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
NSDictionary *resultsDictionary = [[results objectForKey:@"results"] objectAtIndex:0];
NSString *formattedAddress = [resultsDictionary objectForKey:@"formatted_address"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:26:07.433

看看 NSJSONSerialization 类。有一种方法可以将您的数据转换为字典：

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error; 
```

有了这个，您应该能够通过询问您新创建的 NSDictionary 来检索您的 NSString。

# php - ffmpeg 编码在从脚本（php/c#/etc.）而不是从命令行执行时冻结

> ID：11798342
> 
> 赞同：0
> 
> 时间：2012-08-03T15:06:12.157
> 
> 标签：php, ffmpeg, exec

我曾尝试通过 PHP 脚本使用 ffmpeg 进行编码，但该过程在某个点冻结。当通过 Windows 中的命令行运行相同的命令时，它的编码就很好。

我尝试了不同的视频，它们没有损坏，也没有使用任何异国情调的编解码器或任何东西。

当从脚本（即 PHP 中的 exec() ）运行时进程冻结但直接从命令行运行时不会冻结的原因可能是什么？有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T08:54:33.177

我有一个类似的问题。对我来说，我的网络服务器有最长的执行时间。

对于 IIS (web.config)：

```
<system.web>
    <httpRuntime executionTimeout="180" />
</system.web> 
```

对于其他服务器谷歌关于

```
maximum execution time <webservername> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:43:02.610

我认为这与管道有关。即，FFmpeg 输出重定向到一个永远不会被另一个进程耗尽的管道，因此 FFmpeg/PHP 进程阻塞。

一些问题：

*   您正在通过 Windows 控制台测试命令行；PHP 是否也在 Windows 环境中运行？
*   PHP 转码过程是否显示任何 CPU 使用情况？它是最大化 CPU 还是根本不显示？
*   exec() 调用到底是什么样的？

# php - 自动将内容从另一个页面容器馈送到 div

> ID：11798343
> 
> 赞同：0
> 
> 时间：2012-08-03T15:06:17.730
> 
> 标签：php, ajax, parsing, curl

我目前正在尝试流式传输位于[http://store.kenstanton.net/Default.asp](http://store.kenstanton.net/Default.asp)上的内容，这五个图像位于精选视频的正上方

并将其流式传输到[http://www.kenstanton.net](http://www.kenstanton.net)到该页面上的特色视频上方的内容（当前相同的 atm 但我希望能够更新一个网页并进行以下更新）。

我目前正在尝试使用 ajaxpagefetch 脚本，如果那是我们应该使用`curl`它然后解析的适当路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:11:42.200

AJAX 可能是要走的路——你可能想看看[.load() 的 jQuery 手册](http://api.jquery.com/load/#loading-page-fragments)。在你的情况下，它会是这样的：

```
$('#result').load('http://store.kenstanton.net/Default.asp .v65-productDisplay'); 
```

但是当然可能存在一些样式问题以及 AJAX 安全限制（我不确定，但是在这种情况下编写简单的重定向器应该可以解决问题）

# jsf-2 - JSF 2：Ajax 未在嵌套复合组件中触发

> ID：11798344
> 
> 赞同：1
> 
> 时间：2012-08-03T15:06:18.993
> 
> 标签：jsf-2, composite-component

我的主页包含 testcomponent1，而 testcomponent1 又包含 testcomponent2。Ajax 调用在 testcomponent2 中。调用是在 javascript 中发起的，但从未到达控制器。如果将 ajax 调用移到 testcomponent1 中，它会触发调用并将其发送到控制器。我包括测试代码供您参考。

**测试控制器：**

```
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AjaxBehaviorEvent;

@ManagedBean
@ViewScoped
public class TestController implements Serializable {
/** <code>serialVersionUID</code> */
private static final long serialVersionUID = -999213365169849345L;

private int customerkey;

private String customerName;

public void processKeyChange(AjaxBehaviorEvent e){
    System.out.println("I am in the Ajax method and my value is: " + customerkey);
}

//GETTERS AND SETTERS
public int getCustomerkey() {
    return customerkey;
}
public void setCustomerkey(int customerkey) {
    this.customerkey = customerkey;
}
public String getCustomerName() {
    return customerName;
}
public void setCustomerName(String customerName) {
    this.customerName = customerName;
}
} 
```

**测试页.xhtml**

```
 <ui:define name="searchCriteria">
        <h:form id="orderHeaderForm" prependId="false">

            <h:panelGroup id="orderDiv" layout="block">
                <com:testcomponent1  id="testComponent1"
                                    customerKey="#{testController.customerkey}"
                                    customerName="#{testController.customerName}"/>

            </h:panelGroup>
        </h:form>
    </ui:define>

</ui:composition> 
```

**testcomponent1.xhtml**

```
<cc:interface>
<cc:attribute name="customerKey" type="java.lang.Integer" />
<cc:attribute name="customerName" type="java.lang.String" />
</cc:interface>

<cc:implementation>
<h:panelGroup id="#{cc.clientId}" layout="block">
    <com:testcomponent2 id="testcomponent2" 
                key="#{cc.attrs.customerKey}"
                name="#{cc.attrs.customerName}" />

</h:panelGroup>
</cc:implementation> 
```

**testcomponent2.xhtml**

```
<cc:implementation>
<h:panelGrid id="#{cc.clientId}" columns="2" border="0" cellspacing="0"     cellpadding="0">
    <h:outputLabel id="customerid" for="txtcustomerKey"/>
    <h:inputText id="txtcustomerKey" value="#{cc.attrs.key}" onchange="alert (document.getElementById(this.id).value)">
        <f:ajax event="change" listener="#{testController.processKeyChange}" execute="@this" render="txtCustomerName" />
    </h:inputText>
    <h:outputLabel id="customerName" for="txtCustomerName"/>
    <h:outputText value="#{cc.attrs.name}" id="txtCustomerName" />
</h:panelGrid>

</cc:implementation> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:11:12.307

我认为问题出在`<h:panelGrid id="#{cc.clientId}"...>`. 默认情况下，复合组件是 UINamingContainer 的一个实例，因此您可以设置一个任意名称的 id 并使用它。一个好的做法是避免在 id 字段中使用 EL 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:58:03.053

您不应将其重新分配`#{cc.clientId}`为 JSF 组件的 ID，而应作为普通 HTML 元素的 ID，例如`<span>`or `<div>`。

```
<span id="#{cc.clientId}"> 
```

或者

```
<div id="#{cc.clientId}"> 
```

# box2d - 为什么使用焊接接头会使我的 Box2D 程序变慢？

> ID：11798352
> 
> 赞同：2
> 
> 时间：2012-08-03T15:06:49.547
> 
> 标签：box2d, box2d-iphone

我正在尝试为我的 box2d 主体实现焊接接头：

```
for(pos = _contactListener->_contacts.begin(); 
    pos != _contactListener->_contacts.end(); ++pos) {
    MyContact contact = *pos;

    b2Body *bodyA = contact.fixtureA->GetBody();
    b2Body *bodyB = contact.fixtureB->GetBody();

    b2Vec2 worldCoordsAnchorPoint = bodyA->GetWorldPoint (b2Vec2(0,0)); 
    b2WeldJointDef weldJointDef;
    weldJointDef.bodyA = bodyA;
    weldJointDef.bodyB = bodyB;

    weldJointDef.localAnchorA = weldJointDef.bodyA->GetLocalPoint(worldCoordsAnchorPoint);
    weldJointDef.localAnchorB = weldJointDef.bodyB->GetLocalPoint(worldCoordsAnchorPoint);
    weldJointDef.referenceAngle = weldJointDef.bodyB->GetAngle() - weldJointDef.bodyA->GetAngle();
    weldJointDef.collideConnected = true;
    weldJointDef.userData = @"tile";

    weldJointDef.Initialize(bodyA, bodyB, worldCoordsAnchorPoint);
    world->CreateJoint(&weldJointDef);
    //}
} 
```

但我的fps非常低。我认为是因为我不检查身体是否是要焊接的。如何检查车身是否焊接？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:23:31.240

根据您的代码，我假设您正在尝试使用焊接接头连接所有接触的对象。因为这些对象是接触的，所以当您将它们焊接在一起时，它们可能会发生重叠或碰撞。但是，您设置了 collideConnected = true。这意味着如果它们现在正在碰撞，它们将继续碰撞并且由于焊接接头而不能分开。这应该会产生很多不那么有意义的计算，从而拖累你的 fps。

# c# - WinRT 中的 IPAddress.HostToNetworkOrder() 等效项？

> ID：11798356
> 
> 赞同：2
> 
> 时间：2012-08-03T15:07:01.993
> 
> 标签：c#, network-programming, windows-8, windows-runtime, endianness

WinRT API 中似乎不存在 IPAddress 类。是否有等效方法`IPAddress.HostToNetworkOrder()`可用于将 int 从主机顺序转换为网络顺序（小端到大端）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:55:57.657

在许多情况下（当然不是全部），您可以为此使用**DataReader**和**DataWriter**：

```
DataReader reader = new DataReader(stream.AsInputStream());
reader.ByteOrder = ByteOrder.BigEndian;  // standard network byte order
reader.ReadInt16(); 
```

出于兼容性原因，我使用了反射器：

```
 public static short HostToNetworkOrder(short host)
    {
        return (short)(((host & 0xff) << 8) | ((host >> 8) & 0xff));
    }

    public static int HostToNetworkOrder(int host)
    {
        return (((HostToNetworkOrder((short)host) & 0xffff) << 0x10) | (HostToNetworkOrder((short)(host >> 0x10)) & 0xffff));
    }

    public static long HostToNetworkOrder(long host)
    {
        return (long)(((HostToNetworkOrder((int)host) & 0xffffffffL) << 0x20) | (HostToNetworkOrder((int)(host >> 0x20)) & 0xffffffffL));
    }

    public static short NetworkToHostOrder(short network)
    {
        return HostToNetworkOrder(network);
    }

    public static int NetworkToHostOrder(int network)
    {
        return HostToNetworkOrder(network);
    }

    public static long NetworkToHostOrder(long network)
    {
        return HostToNetworkOrder(network);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:46:05.347

我最终编写了自己的方法。这真的很简单。它所做的只是颠倒字节顺序。这是为了您的复制和粘贴乐趣：

```
public static int ReverseEndianness(int num)
{
    byte[] bytes = BitConverter.GetBytes(num);
    byte[] reversedBytes = new byte[bytes.Length];

    for (int i = 0; i < bytes.Length; i++)
    {
        reversedBytes[i] = bytes[bytes.Length - 1 - i];
    }

    return BitConverter.ToInt32(reversedBytes, 0);
} 
```

# entity - Glasshfish 上的 eclipselink 和 postresql 大对象

> ID：11798360
> 
> 赞同：2
> 
> 时间：2012-08-03T15:07:26.727
> 
> 标签：entity, eclipselink

我在 eclipselink 和 postresql 上遇到了麻烦

我使用 Glassfish 3.1.2 和他的 eclipselink 连接到具有持久性的 postgresql 数据库，在我的表中我有一个 postresql 大对象文件，在我的实体中使用 @lob 注释转换为字节数组。

当我尝试使用文件 postgresql 保存新记录时，请说：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): 
org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: column "attoid" is of type oid but expression is of type bytea
  Hint: You will need to rewrite or cast the expression. 
```

Hibernate 上的相同代码运行良好。

我试图在谷歌或这里搜索，但我什么也没找到……有人可以帮助我吗？

# sql - Magento - 大量的数据库查询 x 页

> ID：11798362
> 
> 赞同：1
> 
> 时间：2012-08-03T15:07:32.827
> 
> 标签：sql, magento, catalog

我想知道在目录页面的标准安装 magento 中正确的平均数据库查询数是多少，因为我认为我的页面存在很大问题。

我的目录页面做了​​大约 2000 个查询！这太多了，我认为这就是我的页面如此缓慢的原因。

此外，如果您打开 magento 工具栏（右上角）并打开查询表，您可以看到更多查询被执行了多次，查询如下：

```
SELECT `eav_attribute_set`.* FROM `eav_attribute_set` WHERE (eav_attribute_set.attribute_set_id='10') 
```

它似乎是一个循环。

现在我必须找到问题所在，可能是一些错误的扩展或错误的自定义代码，但是目录页面的正确查询数量可能是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:08:16.780

Tim Hofman 的回答（安装了 wee-developer 工具栏）对于了解在我之前的开发人员编码错误的查询非常有用。

当只需要一个产品的属性时，几乎所有这些查询都是 load() 来检索完整的产品，所以我编辑了代码。

谢谢回复！:)

# matlab - Matlab：如果未定义则初始化变量

> ID：11798370
> 
> 赞同：6
> 
> 时间：2012-08-03T15:08:09.987
> 
> 标签：matlab, undefined

仅当以前从未分配过变量时，如何声明/分配变量？

语境：

我试图找到使 k 的函数 calculateSomeDistance(k) 最小化的 k。最小距离和相应的 k 值应该可用（即在范围内）以供以后使用。我应该如何声明 minDistance 以便在将其与当前计算的距离进行比较之前检查它是否已经初始化？

```
% How should I declare minDistance?
minDistance=undefined; % Doesn't exist.
for ki=1:K,
  distance=calculateSomeDistance(ki);
  if(isUndefined(minDistance) || distance < minDistance)
    minDistance = distance;
    minK = ki;
  end
end
% Here minK and minDistance must be in scope 
```

有没有办法为 matlab/octave 中的变量分配一个空值/未定义值，然后对其进行测试以进行第一次有效分配？

PS：将 minDistance 初始化为一个非常大的数字非常难看，而不是我想要的。

当 ki 为 1（即第一次通过）时初始化 minDistance 是可以的，但仍然不是很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T15:22:36.557

[您可以使用存在](http://www.mathworks.com/help/techdoc/ref/exist.html)检查变量是否存在：

```
if ~exist('minDistance','var')
    minDistance = initValue;
end 
```

如果您想让变量存在于工作区中，但处于未定义状态，您可以分配`nan`（不是数字）并使用`isnan`. 这将类似于您提出的解决方案，其值类型明确不会与变量的任何有效值冲突。

# java - 内存不足错误？

> ID：11798371
> 
> 赞同：0
> 
> 时间：2012-08-03T15:08:12.550
> 
> 标签：java, android, image, android-image

在我的项目中，我注意到模拟器中出现内存不足错误，如下所示

```
 08-03 01:38:28.995: W/dalvikvm(1040): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    08-03 01:38:29.045: E/AndroidRuntime(1040): FATAL EXCEPTION: main
    08-03 01:38:29.045: E/AndroidRuntime(1040): java.lang.RuntimeException: Unable to  start activity ComponentInfo{sdei.edustatus/sdei.edustatus.gradebook.GradeBookActivity}:  android.view.InflateException: Binary XML file line #78: Error inflating class <unknown>
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.os.Handler.dispatchMessage(Handler.java:99)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.os.Looper.loop(Looper.java:123)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at java.lang.reflect.Method.invokeNative(Native Method)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at java.lang.reflect.Method.invoke(Method.java:507)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at dalvik.system.NativeStart.main(Native Method)
    08-03 01:38:29.045: E/AndroidRuntime(1040): Caused by: android.view.InflateException: Binary XML file line #78: Error inflating class <unknown>
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.Activity.setContentView(Activity.java:1657)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at sdei.edustatus.gradebook.GradeBookActivity.onCreate(GradeBookActivity.java:311)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     ... 11 more
    08-03 01:38:29.045: E/AndroidRuntime(1040): Caused by: java.lang.reflect.InvocationTargetException
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at java.lang.reflect.Constructor.constructNative(Native Method)
    03 01:38:29.045: E/AndroidRuntime(1040):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     ... 22 more
    08-03 01:38:29.045: E/AndroidRuntime(1040): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
   08-03 01:38:29.045: E/AndroidRuntime(1040):  at   android.content.res.TypedArray.getDrawable(TypedArray.java:601)
   08-03 01:38:29.045: E/AndroidRuntime(1040):  at android.view.View.<init>(View.java:1951)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.View.<init>(View.java:1899)
    08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.view.ViewGroup.<init>(ViewGroup.java:286)
        08-03 01:38:29.045: E/AndroidRuntime(1040):     at android.widget.RelativeLayout.<init>            (RelativeLayout.java:173)
     08-03 01:38:29.045: E/AndroidRuntime(1040):    ... 25 more 
```

我不认为应该有任何内存泄漏。是的，我正在使用一些图像，我需要单独处理它们吗？？？？？？？？？我的应用程序大小为 2.4mb。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:09:33.843

> 在java中，我认为不应该因为gc而有任何内存泄漏

是错误的说法。如果代码引入了内存泄漏，jvm 什么也做不了。

在你的情况下，错误是

> 引起：java.lang.OutOfMemoryError：位图大小超出VM预算

看来您正在尝试加载大尺寸的位图图像（dalvik 不支持）。有很多关于这个问题的讨论，[here](https://stackoverflow.com/questions/4611822/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget)和[here](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:16:47.843

有几件事：

1）确保你没有内存泄漏，对于这个配置文件你的代码，例如，使用 MAT（http://www.eclipse.org/mat/）

2) 对图像进行适当的内存管理；使用 SoftReferences 和 WeakReferences

3) 您可以在网络上找到许多图像缓存和图像加载器（带缓存）的实现（谷歌搜索）——搜索并选择您最喜欢的一个。

但总是做上面的＃1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:12:50.877

我认为您正在使用eclipse模拟器？

如果是这种情况，它可能没有足够的内存/磁盘设置来显示此行突出显示的图像：

引起：java.lang.OutOfMemoryError：位图大小超出VM预算

通过转到 AVD 检查您在 Eclipse 下的设置（如果您再次使用它），选择您的虚拟设备并点击编辑。您将在硬件下看到 SD 卡大小和内存设置。我认为您可以分配模拟器的内存大小是有限制的，因此最好使用手机。

您是否尝试过在实际设备上进行调试，通常会更好！

**编辑：**

其实你也可能有这个问题：

[java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

# ibm-mq - WebSphere MQ 通道访问安全问题

> ID：11798372
> 
> 赞同：5
> 
> 时间：2012-08-03T15:08:22.263
> 
> 标签：ibm-mq

考虑以下队列定义：

> SET AUTHREC OBJTYPE(QMGR) GROUP('mq-user') AUTHADD(INQ,DSP,CONNECT)
> 
> 设置 AUTHREC 配置文件（SYSTEM.MQEXPLORER.REPLY.MODEL）OBJTYPE（队列）组（'mq-user'）AUTHADD（INQ，DSP，GET）
> 
> 设置 AUTHREC 配置文件（SYSTEM.ADMIN.COMMAND.QUEUE）OBJTYPE（队列）组（'mq-user'）AUTHADD（INQ，DSP，PUT）
> 
> 定义通道 ($cname) CHLTYPE (SVRCONN) TRPTYPE (TCP) MCAUSER('tcs-mq-user') 替换
> 
> 设置 CHLAUTH($cname) 类型(ADDRESSMAP) 地址(*) MCAUSER('tcs-mq-user')

1.  DEFINE CHANNEL和SETCHLAUTH中的MCAUSER是什么意思？
2.  tcs-mq-user 应该属于 mq-user 组吗？
3.  这是否意味着只有 tcs-mq-user 可以在绑定模式下访问队列管理器？现在，如果我想在绑定模式下授予另一个用户访问权限，我应该为这个用户创建另一对 DEFINE CHANNEL 和 SET CHLAUTH 命令吗？
4.  是否可以将频道访问权限授予 mcs-user 组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T15:48:50.327

好的，答案正在打折，今天买一送三！:-) 让我们按顺序来...

**1.A.** 通道的 MCAUSER 值是执行授权检查的 ID。如果将`DEFINE CHL() CHLTYPE(SVRCONN)`MCAUSER 留空，则连接的客户端可以指定他们希望连接的 ID。如果他们未能指定，WMQ 客户端会*尝试*使用从客户端应用程序运行的工作站看到的客户端用户 ID，并显示该 ID。通道定义中的设置`MCAUSER`可防止客户端应用程序指定该值。

**1.B。**规则中的 MCAUSER用于根据一些识别标准`ADDRESSMAP`来映射。`MCAUSER`它说“**如果**使用指定的 IP 地址到达*此通道| 用户名 | SSL 可分辨名称，***则**使用*此*ID 作为`MCAUSER` **AND**，如果没有其他规则阻止它，则允许该通道运行。

如果使用`CHLAUTH`映射规则，建议通常将通道设置`MCAUSER`为一个不可能是用户 ID 的值，这样它就不会运行。这样，通道默认为安全状态，除非`CHLAUTH`规则将 MCAUSER 覆盖为旨在允许访问的值。`MCAUSER`直到 Hursley 实验室的 WMQ 策略师 Mark Taylor 建议使用`nobody`一个不能是实际用户 ID 的值，例如`no#body`. 从 WMQ V7.1 开始，该值`*NOACCESS`是保留的作品，也是我这些天在会议演示中使用的作品。

**2.**是的。WMQ 基于组进行授权。标准建议是将您的安全要求分解为“admin”、“app1”、“app2”、“monitoring”、“anonymous”等角色。然后为每个需要访问的角色创建一个组。

但是访问请求来自唯一标识的主体，而不是来自组。授权检查需要一个帐户进行检查，因此通道中的 MCAUSER 是一个 ID，而授权权限是按组存储的。要将用户与正确的权限相关联，请将其注册到正确的组中。

这是支持职责分离的标准 UNIX 授权模型。资源管理员（WMQ 管理员）授权组。帐户管理员在组中注册用户 ID。两组都需要提供访问权限。在现实世界中，大多数商店不使用职责分离功能，但在很多情况下它是强制性的。

**3.**有点。V7.1 或更高版本的默认 QMgr 根本不允许任何远程连接。这是因为在创建时它没有`AUTHREC`规则，因此非管理员无权访问。`CHLAUTH`默认规则阻止管理员进行远程访问。

通过指定的规则，*任何人都*可以成功连接到`$cname`频道并被授权为`tcs-mq-user`. 如果您希望他们以*具有相同权限*的不同用户 ID 连接，则需要将该 ID 添加到`mq-user`组中，然后设置通道以映射显示的 ID。如果您想*强制执行*某人连接的 ID，因为您必须按 IP 地址指定映射，或者更好的是，基于他们的证书专有名称。

**4.**不可以。如上面#2 所述，访问请求总是由委托人提出，而不是由组提出。`CHLAUTH`规则和专有名称映射的全部意义`MCAUSER`在于解析通道用于授权检查的用户 ID。通道定义`MCAUSER`是该 ID 解析过程中的安全控制，因此它对 ID 而非组进行操作。

如果您还没有找到该站点，您可能会发现[T-Rob.net](http://t-rob.net)很有用。特别是，在链接页面上，我发布了会议中的所有 WMQ 安全演示文稿以及指向我和其他作者文章的链接。

# google-maps-api-3 - 在 Google Maps v3 上使用 MySql 和 PHP 加载多个航点

> ID：11798375
> 
> 赞同：0
> 
> 时间：2012-08-03T15:08:26.520
> 
> 标签：google-maps-api-3

我在 Google Maps v3 上有一个项目。

在我的项目中，我可以添加多个航点并将它们保存在我的数据库中。

问题是我无法在地图上加载这些航点。

我有两个项目。

[this][2] 是将航点保存到数据库的项目 [this][3] 是加载此航点的项目。

问题是当我做多个航点时，它只加载第一个航点（一个点“A”和一个点“B”。

我需要在地图上同时加载所有航点，在第二个项目 (loady.htm) 上，我将发布我恢复的 index.htm、load.htm 和 php 脚本代码。

请记住，我可以将航点保存到数据库中，但无法加载它们。

编辑：保存的表格的打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:50:43.177

我认为谷歌提供了一个加载几个航点的例子：

[https://developers.google.com/maps/articles/phpsqlsearch_v3#populatetable](https://developers.google.com/maps/articles/phpsqlsearch_v3#populatetable)

# entity-framework - 调整 EF 逆向工程师生成的 POCO

> ID：11798377
> 
> 赞同：0
> 
> 时间：2012-08-03T15:08:35.310
> 
> 标签：entity-framework, code-generation, asp.net-mvc-4, partial-classes

我正在通过 EF Power Tools 从我的数据库生成 POCO，并准备开始调整和扩展它们。

[这个 Q/A 让我超越](https://stackoverflow.com/questions/4619609/what-is-the-best-way-to-add-attributes-to-auto-generated-entities-using-vs2010)了最初的问题（如何添加部分），但我想知道提供的答案是否会因 MVC4 项目而改变。

但这个答案专门与验证有关。我还需要调整生成的构造函数——类似于[这个问题](https://stackoverflow.com/questions/8475469/adding-code-to-entity-framework-4-generated-pocos)。我的数据库模式，该实用程序构造我的用户对象，如下所示：

```
 public User()
    {
        this.Addresses = new List<Address>();
        this.Emails = new List<Email>();
        this.Institutions = new List<Institution>();
        this.Orders = new List<Order>();
        this.Phones = new List<Phone>();
    } 
```

除了机构，这些都是正确的。一个用户可以拥有许多电话、电子邮件等。但只能属于一个机构。

我认为没有办法重新连接这个构造函数，这样就不会创建机构列表。因此，我将创建一个添加“机构”（单数）属性并分配机构.SingleOrDefault 并可能在.Count>1 上进行一些标记/处理的方法？

那么我的部分类上的构造函数的行为与生成的类上的行为相同吗？它运行在一个新的上？

谢谢

跟进回复：代码生成背后的 FK。我的机构可以通过用户身份字段基于“PrimaryContact”将许多用户和密钥返回给主要联系人。

机构：CONSTRAINT [FK_Institutions_Users] FOREIGN KEY ([idPrimaryContact]) REFERENCES [dbo].[Users] ([ID])

用户：约束 [FK_Users_Institutions] 外键 ([idUserInstitution]) 参考 [dbo].[Institutions] ([ID])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:35:12.863

EF 电动工具正在创建这种关系，因为数据库允许一个用户拥有多个机构。我认为这是因为您的机构表上有一个 UserId 的 FK。如果这确实是 1:1 或 1:0.1 关系，也许您应该更改数据库，以便 User 表具有针对机构表的 FK（如果它是可选的，则可以为空）。

如果这不是一个选项，那么还有其他一些方法可以做到这一点：

您是否需要能够以模板方式或仅在单个实体上执行此操作？

如果您需要重复执行此操作，您可能需要尝试更改生成实体对象的 TT 文件。 [Rowan Miller 对此发表了一篇出色的文章](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)。

无论哪种方式，您都可以像这样修改您的项目：

```
 public virtual List<Institution> Institutions { get; set; }

public Institution Institution
{
    get { return Institutions.SingleOrDefault(); }
} 
```

然后只需绑定到您创建的机构属性。

# ruby-on-rails - Rails 3.2 中的多个 belongs_to

> ID：11798381
> 
> 赞同：1
> 
> 时间：2012-08-03T15:08:44.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在将评论与用户和页面相关联时，我对`belongs_to`Rails 中的关联感到困惑。我说的是有没有办法将评论与用户和页面相关联？采取以下（对我不起作用但演示的简单示例）：

```
# The basic idea is that I would like to have User show comments from the user
# on all pages, and Page show all the comments for the page.
# User.find_by_email('email@domain.com').comments # Show comments on pages.
# Page.find_by_slug('my-slug').comments # Show comments on the page.

class Comments
  include Mongoid::Document and include Mongoid::Timestamps
  include MyApp::Mongoid::Patches::DefaultType

  belongs_to :page
  belongs_to :user

  field :content, type: String
end

class Page
  include Mongoid::Document and include Mongoid::Timestamps
  include MyApp::Mongoid::Patches::DefaultType

  belongs_to :user
  has_many :comments

  field :type, type: String, default: :post
  field :slug, type: String
  field :title, type: String
  field :content, type: String
  field :tags, type: Array, default: :user

  private
  # .....
end

class User
  include Mongoid::Document and include Mongoid::Timestamps
  include MyApp::Mongoid::Patches::DefaultType

  embeds_one :provider
  has_many :pages
  has_many :comments # But only from Pages not on the user.

  field :email, type: String
  field :name, type: String
  field :role, type: Symbol, default: :user
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:13:22.043

听起来您在这里寻找的是[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。查看官方 Rails 多态关联指南的链接，但简而言之，您可以执行以下操作：

```
class Comments
  belongs_to :commentable, :polymorphic => true
end

class User
  has_many :comments, :as => :commentable
end

class Page
  has_many :comments, :as => :commentable
end 
```

现在在评论表中添加两个字段 commentable_type(string) 和 commentable_id(integer)。

现在您的用户和页面都可以有评论。

如果comment 是一个Comment 对象，您可以使用comment.commentable 来获取该评论的用户/页面

# ios - ios在视图之间垂直滑动

> ID：11798388
> 
> 赞同：3
> 
> 时间：2012-08-03T15:09:12.587
> 
> 标签：ios, draggable, drag

我基本上是想达到这个效果。

![](../Images/c07d0588c905cce2afa851966bd2d72d.png)

我对折叠效果不感兴趣，因为我有类似的东西，但是如何拖动导航控制器以切换到另一个视图女巫是 UITableView。换句话说，如何通过拖动导航控制器垂直切换到另一个视图任何想法都非常感谢。谢谢

# python - 使用什么 NLP 工具来匹配具有相似含义或语义的短语

> ID：11798389
> 
> 赞同：16
> 
> 时间：2012-08-03T15:09:13.813
> 
> 标签：python, nlp, nltk, latent-semantic-indexing

我正在做一个项目，该项目要求我将短语或关键字与一组相似的关键字进行匹配。我需要为此执行语义分析。

一个例子：

相关 QT
廉价健康保险
负担得起的健康保险
低成本医疗保险
健康计划，用于更
便宜的健康保险

共同意义

低成本健康保险

这里 Common Meaning 列下的单词应该与 Relevant QT 列下的相匹配。我查看了一堆工具和技术来做同样的事情。S-Match 看起来很有前途，但我必须使用 Python，而不是 Java。潜在语义分析也看起来不错，但我认为它更多地用于基于关键字而不是关键字匹配的文档分类。我对 NLTK 有点熟悉。有人可以提供一些关于我应该前进的方向以及我应该使用哪些工具的见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-24T21:54:32.653

如果你有一个大的语料库，这些词出现的地方可用，你可以训练一个模型来将每个词表示为向量。例如，您可以通过 word2vec 的“skip-gram 和 CBOW 模型”使用深度学习，它们在[gensim 软件包中实现](http://radimrehurek.com/gensim/models/word2vec.html)

在 word2vec 模型中，每个单词都由一个向量表示，然后您可以通过测量表示第 th 个单词的向量的余弦来测量两个单词之间的语义相似度。语义相似词应该具有较高的余弦相似度，例如：

```
model.similarity('cheap','inexpensive') = 0.8 
```

（数值是虚构的，仅供说明。）

此外，根据我的实验，将相对较少的单词（即最多 3 或 4 个单词）相加可以保留语义，例如：

```
vector1 = model['cheap']+model['health']+model['insurance']
vector2 = model['low']+model['cost']+model['medical']+model['insurance']

similarity(vector1,vector2) = 0.7 
```

（再次，仅用于说明。）

您可以使用单词之间的这种语义相似性度量作为生成集群的度量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-27T18:54:35.317

当潜在语义分析提到一个“文档”时，它基本上是指任何大于 1 的单词集合。你可以用它来计算一个文档和另一个文档之间、一个词和另一个词之间、或者一个词之间的相似度和一份文件。因此，您当然可以将它用于您选择的应用程序。

其他可能有用的算法包括：

*   随机索引（[https://www.sics.se/~mange/papers/RI_intro.pdf](https://www.sics.se/~mange/papers/RI_intro.pdf)）很容易实现，没有太多困难。[https://code.google.com/p/airhead-research/](https://code.google.com/p/airhead-research/)中也有一个实现，但它是用 Java 编写的，而不是 Python 编写的。
*   主题建模（[http://psiexp.ss.uci.edu/research/papers/SteyversGriffithsLSABookFormatted.pdf）-](http://psiexp.ss.uci.edu/research/papers/SteyversGriffithsLSABookFormatted.pdf) [http://radimrehurek.com/gensim/tutorial.html](http://radimrehurek.com/gensim/tutorial.html)的 Python 实现
*   DISSECT ( [http://clic.cimec.unitn.it/composes/toolkit/introduction.html ) -](http://clic.cimec.unitn.it/composes/toolkit/introduction.html) [http://clic.cimec.unitn.it/composes/toolkit/installation.html](http://clic.cimec.unitn.it/composes/toolkit/installation.html)的 Python 实现
*   BEAGLE ( [http://www.indiana.edu/~clcl/BEAGLE/Jones_Mewhort_PR.pdf ) -](http://www.indiana.edu/~clcl/BEAGLE/Jones_Mewhort_PR.pdf) [https://github.com/mike-lawrence/wikiBEAGLE](https://github.com/mike-lawrence/wikiBEAGLE)的 Python 实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T14:01:21.983

我先看看[Wordnet。](http://wordnet.princeton.edu/)它将为您提供数十万个术语的真实同义词和其他单词关系。由于您标记了`nltk`：它为 Wordnet 提供绑定，您可以将其用作特定领域解决方案的基础。

仍然在 NLTK 中，请查看NLTK 书籍[介绍](http://nltk.org/book/ch01.html)`similar()`中对方法的讨论，以及它所基于的类。（一切都很简单，但它可能就是你真正需要的）。[`nltk.text.ContextIndex`](http://nltk.org/_modules/nltk/text.html)

# java - 杰克逊注解中的多态性：@JsonTypeInfo 用法

> ID：11798394
> 
> 赞同：57
> 
> 时间：2012-08-03T15:09:36.570
> 
> 标签：java, polymorphism, jackson, deserialization

我想知道`@JsonTypeInfo`注释是否可以用于接口。我有一组应该序列化和反序列化的类。

这就是我想要做的。我有两个实现类`Sub1`，`Sub2`实现`MyInt`。一些模型类具有实现类型的接口引用。我想反序列化基于多态性的对象

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=As.WRAPPER_OBJECT)
@JsonSubTypes({
    @Type(name="sub1", value=Sub1.class), 
    @Type(name="sub2", value=Sub2.class)})
public interface MyInt{
}

@JsonTypeName("sub1")
public Sub1 implements MyInt{
}

@JsonTypeName("sub2")
public Sub2 implements MyInt{
} 
```

我得到以下信息`JsonMappingException`：

> 意外的令牌 (END_OBJECT)，预期的 FIELD_NAME：需要包含类型 id 的 JSON 字符串

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-03T15:14:09.647

`@JsonSubTypes.Type`必须有这样的值和名称，

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=As.WRAPPER_OBJECT, property="type")
@JsonSubTypes({       
    @JsonSubTypes.Type(value=Dog.class, name="dog"),
    @JsonSubTypes.Type(value=Cat.class, name="cat")       
}) 
```

在子类中，用`@JsonTypeName("dog")`来说名字。
值`dog`和`cat`将在名为 的属性中设置`type`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-06T12:34:15.033

**是的，它可以用于抽象类和接口。**

考虑以下代码示例

假设我们有一个 enum 、 interface 和 classes

```
enum VehicleType {
    CAR,
    PLANE
}

interface Vehicle {
    VehicleType getVehicleType();
    String getName();
}

@NoArgsConstructor
@Getter
@Setter
class Car implements Vehicle {
    private boolean sunRoof;
    private String name;

    @Override
    public VehicleType getVehicleType() {
        return VehicleType.Car;
    }
}

@NoArgsConstructor
@Getter
@Setter
class Plane implements Vehicle {
    private double wingspan;
    private String name;

    @Override
    public VehicleType getVehicleType() {
        return VehicleType.Plane;
    }
} 
```

如果我们尝试将这个 json 反序列化为`List<Vehicle>`

```
[
  {"sunRoof":false,"name":"Ferrari","vehicleType":"CAR"}, 
  {"wingspan":19.25,"name":"Boeing 750","vehicleType":"PLANE"}
] 
```

然后我们会得到错误

```
abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information 
```

要解决这个问题，只需在界面中添加以下`JsonSubTypes`和`JsonTypeInfo`注释，如下所示

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME,
        property = "vehicleType")
@JsonSubTypes({
        @JsonSubTypes.Type(value = Car.class, name = "CAR"),
        @JsonSubTypes.Type(value = Plane.class, name = "PLANE")
})
interface Vehicle {
    VehicleType getVehicleType();
    String getName();
} 
```

有了这个，反序列化将与接口一起工作，你会得到`List<Vehicle>`回报

您可以在此处查看代码 - [https://github.com/chatterjeesunit/java-playground/blob/master/src/main/java/com/play/util/jackson/PolymorphicDeserialization.java](https://github.com/chatterjeesunit/java-playground/blob/master/src/main/java/com/play/util/jackson/PolymorphicDeserialization.java)

# architecture - 在主干中的多个视图之间共享模型

> ID：11798402
> 
> 赞同：2
> 
> 时间：2012-08-03T15:10:09.157
> 
> 标签：architecture, backbone.js

我有一个用户创建约会的模型和视图。我正在增加员工创建“正式”任命的能力。这些约会将有额外的选项和事件可用，但在大多数情况下，约会模型将具有相似的属性（日期、地点、客户）。

我想做的是有一个模型来处理所有约会并传入参数以创建默认属性，具体取决于用户或工作人员是否创建了约会。

这是组织约会的一种干净的方式，还是我应该为每种类型的约会设置单独的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:18:47.227

这听起来像是您想要扩展现有`Appointment`模型的地方。不要只是根据创建者设置不同的属性。

```
var Appointment= Appointment.Model.extend({
     ...
});

var UserAppointment = Appointment.extend({
     ...
});

var StaffAppointment = Appointment.extend({
     ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:11:01.740

我一直发现创建类图确实有助于确定我必须对我的对象做什么。在您的情况下，我设想的是一个主要的 Appointment 类，其中包含用于各种约会类型的子类。这是一个简单的 UML 类图表示：

![约会类图](../Images/0d16b7f0d1d39e5b5b2457404aff05c2.png)

这可能看起来微不足道，但是通过它可以帮助您识别可以放置在父类中的类之间的共性，并且可以帮助您避免在子类中编写大量代码以防万一您遗漏了什么。如果您有兴趣，请查看 Astah 社区版。它是免费的，而且非常易于使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:32:57.460

多个约会模型的问题在于从面向对象的角度来看是干净的，这不是很实用，因为不同的模型不能存在于同一个集合中（一个集合只能存储一个模型类的模型）。

如果您只有有限数量的不同约会类型，我建议您使用一个约会模型并添加一个*类型*属性来定义它是哪种类型的模型。然后，您可以使用该`initialize`方法使用下划线`_.defaults()`函数设置默认值，如下所示：

```
initialize: function(){
  var defaults;

  switch(this.get("type"){
  case "USER":
    defaults = {...};
    break;
  case "STAFF":
    defaults = {...};
    break;
  case default:
    defaults = {};
  };

  _.defaults(this.attributes, defaults); // this doesn't use the set functions and doesn't trigger any change events, neither does the default implementation in the Backbone.Model constructor
} 
```

# mysql - MySQL 匹配布尔模式搜索 - 撇号

> ID：11798403
> 
> 赞同：1
> 
> 时间：2012-08-03T15:10:09.380
> 
> 标签：mysql, boolean, boolean-search

我在布尔模式下使用匹配查询来创建搜索功能。搜索有效，并返回我期望的结果，除了其中带有撇号的单词存在一个问题。

如果在数据库中保存了一个带有撇号的单词（例如**pirate's**），并且您搜索带有撇号的单词，或者没有单词的结尾（例如**pirate's**或**pirate**），它会返回结果，但是如果我搜索没有撇号（**海盗**）的单词，它不会返回任何结果。

我已经尝试将数据库中的记录更改为转义而不是转义，但我似乎找不到修复它的方法。

我也花了一段时间寻找类似的答案，但没有一个与此相同的问题，它们似乎更多的是返回不带撇号**和**s 的搜索结果。

*我的查询是：*

```
SELECT * FROM flyer WHERE MATCH(band, venue, promoter) AGAINST('$search' IN BOOLEAN MODE) 
```

# sql - datediff 大于

> ID：11798404
> 
> 赞同：0
> 
> 时间：2012-08-03T15:10:16.947
> 
> 标签：sql, database, sql-server-2008

我有一个跟踪网络中断的数据库，我想运行一个报告，向我显示持续时间超过 30 分钟的中断。我可以让它显示所有的中断，但我不知道如何让它只显示超过 30 分钟的中断。这就是我到目前为止所拥有的。

```
SELECT 
  StartTime.EventTime, 
  Nodes.NodeId,
  Nodes.Caption, 
  Nodes.Location,
  StartTime.Message, 
  DATEDIFF(Mi, StartTime.EventTime, 
    (SELECT TOP 1 EventTime 
     FROM Events AS Endtime 
     WHERE EndTime.EventTime > StartTime.EventTime  AND EndTime.EventType = 5
       AND EndTime.NetObjectType = 'N' 
       AND EndTime.NetworkNode = StartTime.NetworkNode 
     ORDER BY EndTime.EventTime)) AS OutageDurationInMinutes
FROM Events StartTime INNER JOIN Nodes ON StartTime.NetworkNode = Nodes.NodeID 
WHERE (StartTime.EventType = 1) 
  AND (StartTime.NetObjectType = 'N') 
  AND eventtime between dateadd(day, -1, getdate()) and getdate()
ORDER BY Nodes.Caption ASC 
```

我得到的结果是这样的。我已经删除了一些信息。

```
Time of Outage      Name    Location Down Event          Outage Duration
8/3/2012 4:14       x       x        Stopped Responding                2
8/4/2012 5:14       x       x        Stopped Responding                 
8/5/2012 4:14       x                Stopped Responding               52
8/6/2012 4:14       x       x        Stopped Responding               20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:18:24.177

一种方法是使您的查询成为子查询或 CTE：

```
with q as (<your query here without the order by>)
select *
from q
where q.OutageDuragtionInMinutes > 30
order by Caption 
```

# r - R脚本，计算一行数据中的最大值

> ID：11798412
> 
> 赞同：1
> 
> 时间：2012-08-03T15:10:41.173
> 
> 标签：r, max, summary

我在 R 脚本中有这段代码，它的作用是从数据框（例如 4 列）中为每一行查找并计算具有最大值的列。但是当连续有关系时（比如两个或三个最大值），下面的代码只考虑第一个（不计算其他的）。即使行中有多个最大值（关系？），R中是否有任何方法可以计算具有最大值的列。

```
m_0 <- read.csv(file="Tests/myResults", head=FALSE, sep=",")

varb_m0 <- c(m0$ V4)

#create dataframe 
```

> myDataFrame <- data.frame(mode_0=varb_m0)

```
#find max
result <- apply(myDataFrame,1,which.max)

#factor it
result <- factor(result)

#print result
names(myDataFrame)[result]

summary(result) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:48:25.387

一个简单的方法是先创建一个函数：

```
all_max <- function(x) {which(x == max(x))}  #Index of each value that is maximum. 
```

然后将其应用于您的数据框：

```
result <- apply(myDataFrame,1,all_max) 
```

我认为其余的应该是相同的，尽管您没有提供任何数据来测试它。

# android - 如何获得 textid + 5 值？

> ID：11798417
> 
> 赞同：0
> 
> 时间：2012-08-03T15:10:48.587
> 
> 标签：android, textview

我在我的 android 应用程序的主要活动中使用了以下代码，但用户名值只有 5。我怎样才能获得 textid + 5 值？请帮我。我该怎么做？

```
TextView username = (TextView) findViewById(R.id.textid);
username.setText("" + 5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:13:04.250

我想你正在寻找这个：

```
username.setText(username.getText().toString() + 5); 
```

# c++ - 可以合并 Inotify 和 Select 调用吗？

> ID：11798419
> 
> 赞同：2
> 
> 时间：2012-08-03T15:10:50.653
> 
> 标签：c++, linux, select, inotify

我想等待文件更改或套接字输入。这两种事情都很少发生，我宁愿把它们都扔到同一个线程中，而不是为它们弄乱单独的线程，只是为了避免一点“混乱”。由于 Inotify_init 似乎提供了一个文件描述符，我认为我可以将它传递给 select，就像我传递一个套接字一样，并且 select 会有效地监视两者。然而，我试图用谷歌搜索它并没有发现任何发生这种情况的例子，而且似乎如果有可能的话，互联网上的某个地方就会有一个例子。

任何人都可以验证我是否可以将 INotify 中的描述符传递到 select 方法中，就像我会使用套接字一样？或者是否有任何其他阻塞方法可以同时监听文件和套接字更新？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:26:21.210

这通常是 Unix 设备的工作方式。一旦你有了文件描述符，你就可以把它传递给`select`// `poll`（`epoll`你应该更喜欢`epoll`在 Linux 系统上）。但是，[文档`inotify`](http://www.kernel.org/doc/Documentation/filesystems/inotify.txt)明确指出它是可选择的。所以，如果你发现它不起作用，你可以提交一个错误。

您可以使用`inotify_init1`并`IN_NONBLOCK`作为标志传递以在非阻塞模式下打开描述符。

# neo4j - 在嵌入式 neo4j 中处理事务的最佳方式？

> ID：11798420
> 
> 赞同：3
> 
> 时间：2012-08-03T15:10:51.200
> 
> 标签：neo4j

我刚开始使用图形数据库，并认为最好的学习方法是 neo4j。我有一个在应用程序中运行的嵌入式 neo4j 实例（基于 JSF）。该应用程序的用例主要是让我学习使用图形数据库的概念和陷阱，并帮助确定最佳方式（即嵌入式或独立）。但是我的测试应用程序是一个非常基本的联系人应用程序，它能够定义关系（即 KNOWS、WORKS_WITH、WORKS_FOR 等）并最终能够根据这些关系提出建议（即“你可能也知道”）。

到目前为止，我已经掌握了基本的 crud 操作，并且可以添加/删除关系。我的下一步将是真正开始遍历图表（我认为）。但是我目前遇到的问题是，一旦我与服务器的会话到期，我就无法重新建立新会话，而不会收到 IllegalStateException 错误，抱怨商店当前正在使用中。我*认为*这是因为我从未在 neo4j 实例上调用 shutdown。所以这让我认为我处理交易的方式都是错误的，所以我希望有人能纠正我对我应该如何处理这件事的理解（或视情况而定的误解）。

以下是我的帮助类中的一些方法，这些方法用于处理 Web 客户端和 Neo4j 之间的操作：

```
public class NeoNodeUtils {
private GraphDatabaseService graphDb;

public NeoNodeUtils() {
    setup();
}

public void setup() {
    GraphDatabaseFactory neoFactory = new GraphDatabaseFactory();
    setGraphDb(neoFactory.newEmbeddedDatabase("Morpheus"));
    registerShutdownHook();
}

public GraphDatabaseService getGraphDb() {
    return graphDb;
}

public void setGraphDb(GraphDatabaseService graphDb) {
    this.graphDb = graphDb;
}

public Node getNode(Long id) {
    Transaction tx = getGraphDb().beginTx();
    Node node = null;
    try {
        node = getGraphDb().getNodeById(id);
        tx.success();
    } catch (Exception e) {
        tx.failure();
        e.printStackTrace();
    } finally {
        tx.finish();
        return node;
    }
}

public Node createNode() {
    Transaction tx = getGraphDb().beginTx();
    Node node = null;
    try {
        node = graphDb.createNode();
        System.out.println("new nodeId = " + node.getId());
        tx.success();
    } catch (Exception e) {
        tx.failure();
        e.printStackTrace();
    } finally {
        tx.finish();
        return node;
    }
}

public Node addNodeProperty(Node node, String propertyName, Object propertyValue) {
    Transaction tx = getGraphDb().beginTx();
    try {
        node.setProperty(propertyName, propertyValue);
        tx.success();
    } catch (Exception e) {
        tx.failure();
        e.printStackTrace();
    } finally {
        tx.finish();
        return node;
    }
}

public void shutDown() {
    graphDb.shutdown();
}

public void registerShutdownHook() {
    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
            graphDb.shutdown();
        }
    });
}
} 
```

每个辅助方法的结构几乎都与 getNode(Long id) 和 createNode() 完全相同，当然有些有更多的逻辑，但没有什么很复杂，因为我只是想学习这个。

所以，最后我的问题是：
*这是处理这些交易的正确方法吗？或者，我应该实现某种类型的事务管理器吗？
* 另外，我应该在每笔交易后调用关机吗？
* 也许这应该在客户端会话级别而不是应用程序级别处理？

此类将保留在服务器内存中，直到服务器 (http/jvm) 重新启动（如果您熟悉 jsf、applicationScope），因此在每次事务后调用 shutdown 似乎有点过头了。

**编辑：**我实际上对下面哪个答案标记为已接受感到困惑，因为他们都在某种程度上回答了我的问题。因此，如果您想知道为什么答案不被接受，那就是原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:15:41.923

不要将 GraphDatabaseService 视为 SQLConnection 或类似的，它是一个长期存在的实例，并且开始经常停止它会消除从长期存在的此类实例中获得的许多好处，并带来大量不必要的开销。

你不需要像那样调用 tx.failure() 。一个简单的：

```
公共节点 createNode() {
    交易 tx = getGraphDb().beginTx();
    尝试 {
        节点节点 = graphDb.createNode();
        System.out.println("new nodeId = " + node.getId());
        tx.成功（）；
        返回节点；
    } 最后 {
        tx.finish();
    }
}
```

很好，因为只有在调用 success() 时才认为事务成功，否则将回滚。此外，根本不需要在事务中执行读取操作，因此：

```
公共节点getNode（长ID）{
    返回 getGraphDb().getNodeById(id);
}

```

足够的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T17:16:34.207

由于 Java 7 自动关闭和 Neo4J 2.0 处理事务的方式是：

```
try (Transaction tx = graphDb.beginTx())
{
  ...

  tx.success();
} 
```

因此`finish`不再需要显式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T11:13:54.940

您的事务处理似乎很好。不，您不应该在每次交易后关闭。只需通过单例获取neo4j db的句柄-从您上面提到的内容来看，该类似乎已重新实例化，这就是问题所在-它试图打开与neo4j的另一个连接，这是不允许的。

# android - 如何在 Android 中获取视频文件的关键帧（同步帧）时间戳列表？

> ID：11798424
> 
> 赞同：11
> 
> 时间：2012-08-03T15:11:00.700
> 
> 标签：android, video

是否有任何 API 可以为我提供 Android 中给定视频文件的关键帧的时间戳列表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T15:31:12.177

For an elegant solution, it seems as if you'd need to use ffmpeg for android to achieve this. Someone else tried it that way: [How to get the frame from video file in android](https://stackoverflow.com/questions/10188938/how-to-get-the-frame-from-video-file-in-android) ; and was suggested to use ffmpeg.

I checked the reference manual, but could only find a way to get a keyframe itself (without timestamp) relative to a given position in time using the MediaMetadataRetriever() as explained here: [http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#extractMetadata%28int%29](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#extractMetadata%28int%29)

If you don't want to use ffmpeg you could try the following:

```
private ArrayList<int> getKeyFrameTimestamps(String filename) {
  ArrayList<int> timeStamps = new ArrayList<int>();

  try {
    MediaMetadataRetriever mRetriever = new MediaMetadataRetriever();
    mRetriever.setDataSource(getDataSource(filename));
    mRetriever.getFrameAtTime(i, MediaMetadataRetriever.OPTION_CLOSEST_SYNC);

    Bitmap lastFame = mRetriever.getFrameAtTime(0, MediaMetadataRetriever.OPTION_NEXT_SYNC);
    result.add(0);

    for(int time=1; frame ; ++time) {
      Bitmap frame = mRetriever.getFrameAtTime(time, MediaMetadataRetriever.OPTION_PREVIOUS_SYNC);
      if (frame && !frame.sameAs(lastFrame)) {
        result.add(time);
        lastFrame = frame;
      }
    }
  } catch (Exception e) {  /* TODO: HANDLE THIS */ }

  return timeStamps;
} 
```

This is of course not very elegant, but would probably work without hassle to install ffmpeg... It's probably also quite slow (I don't know). But maybe it's just what you need.

PS: An ffmpeg tutorial that fits your problem can be found here: [http://dranger.com/ffmpeg/tutorial07.html](http://dranger.com/ffmpeg/tutorial07.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T20:42:05.187

我相信正确的答案是[http://code.google.com/p/mp4parser/](http://code.google.com/p/mp4parser/)

> isoparser API 可以读取和写入 MP4 文件结构。它是一个处理所谓的盒子的低级工具，但它也处理像轨道和电影这样的结构。

不错的 API 和比 ffmpeg 庞然大物快得多的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-13T15:40:21.463

4.1+ - 比 mp4parser 更快，因为在本机下完成并且代码更干净

mp4parser 你必须从 getsyncsamples + getsampledurations 计算时间戳，这也很烦人，它们与 ffprobe 不匹配。这会得到准确的结果

```
MediaExtractor extractor = new MediaExtractor();
extractor.setDataSource(getVideoPath());

int trackindex = MediaExtractorUtil.selectVideoTrack(extractor);
extractor.selectTrack(trackindex);

while (extractor.getSampleTime() != -1) {
    long sampleTime = extractor.getSampleTime();

    // check not really necessary but JIC
    if ((extractor.getSampleFlags() & MediaExtractor.SAMPLE_FLAG_SYNC) > 0) {
        mKeyframeTimestampsMS.add(sampleTime / 1000);
    }

    extractor.seekTo(sampleTime + 1, MediaExtractor.SEEK_TO_NEXT_SYNC);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-08T15:34:14.697

以[@ryan gordon 的解决方案](https://stackoverflow.com/a/29609466/437492)为基础。`seekTo`可能会寻找同一帧，即使`SEEK_TO_NEXT_SYNC`已指定。为避免这种情况，您可以在帧开始重复时终止。

例如：

```
 private fun getSyncFrameTimestamps(source: MediaExtractor): List<Long> {
        val result = mutableListOf<Long>()

        var lastSampleTime = -1L
        var sampleTime = source.sampleTime

        while (sampleTime >= 0L && sampleTime != lastSampleTime) {
            if (source.sampleFlags and MediaExtractor.SAMPLE_FLAG_SYNC != 0) {
                result.add(sampleTime)
            }
            source.seekTo(sampleTime + 1L, MediaExtractor.SEEK_TO_NEXT_SYNC)
            lastSampleTime = sampleTime
            sampleTime = source.sampleTime
        }

        return result
    } 
```

请注意，在调用此之前，`source`应设置数据源并选择视频轨道。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-03-10T05:14:15.753

使用[MediaExtractor](https://developer.android.com/reference/android/media/MediaExtractor.html)，您可以在任何所需时间拥有所有关键（同步）帧时间和/或任何特定关键帧。+一些更有用的数据。

然后通过 MediaMetadataRetriever -> getFrameAtTime 可以获得帧位图。

这是使用 MediaExtractor 的示例代码：

```
 mediaExtractor = new MediaExtractor() ;
    mediaExtractor.setDataSource(mediaPath);
    int numTracks = mediaExtractor.getTrackCount();
    for (int i = 0; i < numTracks; ++i) {
        MediaFormat format = mediaExtractor.getTrackFormat(i);
        String mime = format.getString(MediaFormat.KEY_MIME);
        if ( mime.startsWith("video") ) {
            mediaExtractor.selectTrack(i);
        }
        Log.i( "LOG_Extractor" , "track "+i+" "+mime );
    }

    currentTime = mediaPlayer.getCurrentPosition();
    mediaExtractor.seekTo( (long)currentTime*1000 , MediaExtractor.SEEK_TO_PREVIOUS_SYNC );
    previousKeyFrameTimeMilis = mediaExtractor.getSampleTime() /1000 ; 
```

# javascript - 未定义不是函数，谷歌地理定位

> ID：11798431
> 
> 赞同：3
> 
> 时间：2012-08-03T15:11:25.430
> 
> 标签：javascript, google-maps-api-3, google-geocoder

我试图在我的页面内的谷歌地图元素上显示一个地址作为标记。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=my_key&sensor=true&callback=initialize"></script>
<script language="javascript" type="text/javascript">
    navigator.geolocation.getCurrentPosition(foundLocation, noLocation);
    var latitude;
    var longitude;
    var map;
    function foundLocation(position) {
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;
    }
    function noLocation() {
        //Do something here in the case that no location is found, or user denies access
    }
    function initialize() {
        var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(latitude, longitude),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        //setMarkers();
    }
    function addMarker(location) {
        var marker = new google.maps.Marker({
            position: location,
            map: map
        });
        markersArray.push(marker);
    }
</script>

<span id="ctl00_ContentPlaceHolder1_lblGeneratedScript"><script language="javascript"  type="text/javascript">
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': "123 Test Dr."}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            addMarker(results[0].geometry.location);
        } else {
            alert("Geocode failed! Reason: " + status);
        }
    });
</script>
</span> 
```

但是，在这条线上

```
var geocoder = new google.maps.Geocoder(); 
```

我收到“未定义不是函数”的未捕获类型错误。

我在我的代码选择中省略了我的 api 密钥，并更改了我用来测试的地址。（我的家庭住址）

另外，我正在使用 ASP.NET 在 span 标记中生成脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:56:13.977

在 API 完成加载之前，您无法构造 Geocoder 对象。在您的方法中或之后调用它`initialize`。

# java - 使用复杂形状的 javafx 剪辑蒙版

> ID：11798434
> 
> 赞同：3
> 
> 时间：2012-08-03T15:11:30.890
> 
> 标签：java, javafx-2

我正在创建一个简单的 javafx 应用程序。我只想从两个同心圆之间提供的区域内剪辑图像，这会在鼠标移动时改变中心坐标，被剪辑的对象最初出现在定义的位置，但它不响应鼠标移动。请告诉我我做错了什么。

我的代码是：

```
public DoubleProperty xCordinate;
public DoubleProperty yCordinate;

@Override
public void start(Stage primaryStage) {

    Group root = new Group();
    Image image = new Image(MyClass.class
            .getResource("Water lilies.jpg").toExternalForm());
    Scene scene = new Scene(root, image.getWidth(), image.getHeight(),
            Color.WHITE);
    ImageView view = new ImageView();
    view.setImage(image);
    xCordinate = new SimpleDoubleProperty(100.0f);
    yCordinate = new SimpleDoubleProperty(100.0f);
    scene.setOnMouseMoved(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {
            xCordinate.set(event.getX());
            yCordinate.set(event.getY());
            System.out.println("xCordinate " + xCordinate + " yCordinate "
                    + yCordinate);
        }

    });

    Circle c1 = new Circle();
    c1.centerXProperty().bind(xCordinate);
    c1.centerYProperty().bind(yCordinate);
    c1.setRadius(50.0f);
    Circle c2 = new Circle();
    c2.centerXProperty().bind(xCordinate);
    c2.centerYProperty().bind(yCordinate);
    c2.setRadius(35.0f);

    Shape mask = Path.subtract(c1, c2);

    view.setClip(mask);
    root.getChildren().add(view);
    primaryStage.setScene(scene);
    primaryStage.show();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:47:24.600

您需要在每次更改圆圈位置时更新蒙版剪辑。顺便说一句不错的应用程序。

```
@Override
    public void start(Stage primaryStage) {
        Group root = new Group();
        Image image = new Image(MyClass.class.getResource("Water lilies.jpg").toExternalForm());
        Scene scene = new Scene(root, image.getWidth(), image.getHeight(), Color.WHITE);
        final ImageView view = new ImageView();
        view.setImage(image);

        xCordinate = new SimpleDoubleProperty(100.0f);
        yCordinate = new SimpleDoubleProperty(100.0f);

        final Circle c1 = new Circle();
        c1.centerXProperty().bind(xCordinate);
        c1.centerYProperty().bind(yCordinate);
        c1.setRadius(50.0f);

        final Circle c2 = new Circle();
        c2.centerXProperty().bind(xCordinate);
        c2.centerYProperty().bind(yCordinate);
        c2.setRadius(35.0f);

        scene.setOnMouseMoved(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                xCordinate.set(event.getX());
                yCordinate.set(event.getY());
                System.out.println("xCordinate " + xCordinate + " yCordinate " + yCordinate);
                // update mask clip
                Shape mask = Path.subtract(c1, c2);
                view.setClip(mask);
            }
        });

        Shape mask = Path.subtract(c1, c2);
        view.setClip(mask);

        root.getChildren().add(view);
        primaryStage.setScene(scene);
        primaryStage.show();
    } 
```

# internationalization - 充实的 .po 文件示例

> ID：11798437
> 
> 赞同：4
> 
> 时间：2012-08-03T15:11:39.817
> 
> 标签：internationalization, gettext, po

问这个问题我几乎觉得很愚蠢，但是......那里有什么好的示例 .po 文件吗？我一直在阅读 GNU gettext 手册，虽然它指定了一般结构，但并没有像我想要的那样详细。另外，我真的很想要一个实际充实的 .po 文件，该文件利用其更高级的功能（如`msgctxt`等`#| msgctxt`），以便我可以针对它运行测试。

关于在哪里可以找到这样的东西的任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T09:21:13.957

这是一个简单的

```
# My comment
#. Programmer comment
#: location.c:23
#| msgctxt "Old context"
#| msgid "Won"
#, fuzzy
msgctxt "Disambiguation for context"
msgid "One"
msgstr "Een" 
```

我认为这涵盖了一切。还有其他的东西，比如过时的单位、c 格式的标记。我想我已经放置了以前的消息#| 在正确的位置，您可能需要检查格式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T15:14:27.563

寻找一些大的开源项目，比如 openSUSE（Linux 发行版）——po 文件可以在[http://svn.opensuse.org/svn/opensuse-i18n/trunk/](http://svn.opensuse.org/svn/opensuse-i18n/trunk/)上找到，我相信你会在那里找到每个可能使用的功能。

# java - Java/JNI/MSVC java.lang.UnsatisfiedLinkError 到我的 DLL 函数

> ID：11798440
> 
> 赞同：0
> 
> 时间：2012-08-03T15:11:44.327
> 
> 标签：java, visual-c++, dll, linker, java-native-interface

我正在为工作编写一个 libvpx 的视频编码器包装器，但是在 Java 中，当我尝试调用这些函数时，我得到 java.lang.UnsatisfiedLinkError。

这是我的Java代码：

```
package default;

class YE_Vpx {
    native int create_stream( String path, int w, int h, int fps );
    native void finalize_stream( int streamid );
    native void append_stream( int streamid, int[] pixels );
    native void finalize_streams( );

    static {
        System.loadLibrary("libvpx_ye"); // This loads the DLL just fine (windows 7), otherwise it would tell me it wasn't in the java.library.path
    }
} 
```

这是我的 C 标头（由 javah 生成）：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class YE_Vpx */

#ifndef _Included_YE_Vpx
#define _Included_YE_Vpx
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     YE_Vpx
 * Method:    create_stream
 * Signature: (Ljava/lang/String;III)I
 */
JNIEXPORT jint JNICALL Java_YE_1Vpx_create_1stream
  (JNIEnv *, jobject, jstring, jint, jint, jint);

/*
 * Class:     YE_Vpx
 * Method:    finalize_stream
 * Signature: (I)V
 */
JNIEXPORT void JNICALL Java_YE_1Vpx_finalize_1stream
  (JNIEnv *, jobject, jint);

/*
 * Class:     YE_Vpx
 * Method:    append_stream
 * Signature: (I[I)V
 */
JNIEXPORT void JNICALL Java_YE_1Vpx_append_1stream
  (JNIEnv *, jobject, jint, jintArray);

/*
 * Class:     YE_Vpx
 * Method:    finalize_streams
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_YE_1Vpx_finalize_1streams
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

这是我的 C 代码（它引用了我认为无法在此处展示的其他文件）：

```
#include <jni.h>
#include <jni_md.h>
#include <sys/types.h>

#include "ye_vpx.h" // This is the javah generated header
#include "ye_vpx_c.h" // This is where most of the meat is, I can't actually post this file =/

#ifdef __cplusplus
extern "C" {
#endif

JNIEXPORT jint JNICALL Java_YE_1Vpx_create_1stream( JNIEnv *env, jobject obj, jstring path, jint w, jint h, jint fps )
{
    jboolean iscopy;
    const jchar *m_path = (*env)->GetStringChars(env, path, &iscopy);
    jint ret = ye_vpx_create_stream( (const char *)m_path, w, h, fps );
    (*env)->ReleaseStringChars(env, path, m_path);
    return ret;
}

JNIEXPORT void JNICALL Java_YE_1Vpx_finalize_1stream(JNIEnv *env, jobject obj, jint streamid)
{
    ye_vpx_finalize_stream( streamid );
}

JNIEXPORT void JNICALL Java_YE_1Vpx_append_1stream(JNIEnv *env, jobject obj, jint streamid, jintArray pixels)
{
    jint *px = NULL;
    int length = 0;

    length = (*env)->GetArrayLength(env, pixels);
    px = (jint *)calloc( length, sizeof(jint) );
    (*env)->GetIntArrayRegion(env, pixels, 0, length, px);
    //px = (jint *)GetIntArrayElements( env, pixels, &iscopy );
    ye_vpx_append_stream( streamid, px );
    free( px );
}

JNIEXPORT void JNICALL Java_YE_1Vpx_finalize_1streams(JNIEnv *env, jobject obj)
{
    ye_vpx_finalize_streams();
}

#ifdef __cplusplus
}
#endif 
```

据我所知，我已经正确导出了所有必要的内容。我正在使用 Microsoft Visual C (2010 Express)，并且正在链接 jvm.lib 和jawt.lib，并且正在静态链接到 MFC 和 ALT 库。我错过了什么吗？

我应该在构建我的 DLL 时提到，我得到以下输出：

> 1> 创建库 C:\Users\Alexander\youeye-rnd\java-rnd\libvpx-youeye\msvc\libvpx_ye\Debug\libvpx_ye.lib 和对象 C:\Users\Alexander\youeye-rnd\java-rnd\libvpx -youeye\msvc\libvpx_ye\Debug\libvpx_ye.exp
> 
> 1>LINK : 警告 LNK4098: defaultlib 'LIBCMT' 与其他库的使用冲突；使用 /NODEFAULTLIB:library 1> libvpx_ye.vcxproj -> C:\Users\Alexander\youeye-rnd\java-rnd\libvpx-youeye\msvc\libvpx_ye\Debug\libvpx_ye.dll

我尝试将“忽略特定默认库”（在链接器>输入下）设置为“/NODEFAULTLIB:libcmt”，但没有效果。我认为这可能是我的问题，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:47:26.567

因此，有两个问题使调试变得困难，但这两个问题都是我的错。

首先，当我制作我最初的 JNI c-header 时，我没有在 *.Java 源代码中包含包名，因为我认为生成的 DLL 文件对于什么包有点模棱两可，只要它理解它的类相关的功能。所以，我添加了正确的包名，在类上重做 javah，它用正确的包名重新生成了头文件。

其次，要解决 msvc 问题，在 Properties > Linker > Input > “Ignore Specific Default Libraries”下，当它只希望我放入 libcmt 时，我正在放入完整的命令行开关“/NODEFAULTLIB:libcmt”其余的。更正后，它编译时没有任何警告。

我希望这可以帮助一些人在 Windows 上调试他们自己的 JNI/DLL 问题。

# java - 如何自动化重复过程以在我的项目中添加新字段？

> ID：11798441
> 
> 赞同：0
> 
> 时间：2012-08-03T15:11:44.263
> 
> 标签：java, eclipse, eclipse-plugin, project-management

我正在开发具有以下配置的 Java EE 项目：
UI：Flex
JDK：1.5
ORM：Hibernate
数据库：SQL Server 2005
要在 UI 中添加新字段，我必须执行许多平凡的步骤。假设我在 Entity 页面上添加一个字段测试，那么我将执行以下步骤：
1\. 在 Entity.mxml 中添加测试字段
2\. 在 Entity.as 中添加测试变量和 getter/setter
3\. 在 Entity 中添加元素.xsd 文件。
4\. 运行实用程序类以从 xsd 生成 EntityVO
5\. 在 EntityVO 的帮助下将测试 getter/setter 添加到 Entity.java 类中。这里 Entity.java 是一个 HibernateEntity 类。
6\. 在Entity.hbm.xml 文件中添加测试字段。
7\. 将测试列添加到实体表。

我应该开发一个 Eclipse 插件来摆脱所有这些步骤吗？最重要的是，值得付出努力吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:42:31.890

我认为，如果您首先构建了一些工具来生成这些文件（以及项目中的其他文件），那么您的运气会更好。从单个模型生成整个文件的工具比修改最初手动编码或由其他工具创建的内容的工具更容易编写。

此类工具的最佳平台是 EMFT-M2T JET Eclipse 项目 - 将其视为 Eclipse 的 JSP。您构建多个模板，这些模板由您选择的单个 XML 模型模式驱动。作为更轻量级的模型驱动开发技术之一，JET 让您可以专注于您想要生成的内容，而不会被 UML 分心。

您上面描述的具体问题正是 JET 旨在解决的用例。

# wpf - 尽管有 DataTemplate，ListBox 对于项目默认为 ToString()

> ID：11798442
> 
> 赞同：1
> 
> 时间：2012-08-03T15:11:44.740
> 
> 标签：wpf, visual-studio-2010, listbox, datatemplate, observablecollection

我正在尝试向我的应用程序添加一个简单的视觉效果来表示页面上的打印边距，以帮助用户避免定位可能超出范围的数据。为此，我有一个方法，它获取纸张大小、DPI 和边距设置信息，并使用它来制作一个 ObservableCollection(of Rect)，其中包含四个 Rect，一个用于页面的每个边缘。XAML 中的 ListBox 通过返回集合的 GetMargins() 属性绑定到集合。我在托管 ListBox 的网格的资源部分中为页面定义了一个 DataTemplate，并且 ListBox 在 ItemsPanelTemplate 中使用了一个画布，以便我可以使用每个 Rect 的 x、y、宽度和高度在页面上定位和调整一些矩形. 这是 XAML：

在 Grid.Resources 中：

```
<!--
A data template for the page margins.
-->
<DataTemplate DataType="{x:Type local:Page}">
    <Grid>
        <Rectangle
            Width="{Binding Width}"
            Height="{Binding Height}"
            Fill="LightGreen"
            Opacity="0.5"
            />
    </Grid>             
</DataTemplate> 
```

在网格中：

```
<!--
Listbox to present the page margins.
-->
<ListBox
    x:Name="PageMarginsListBox"
    ItemsSource="{Binding GetMargins}"
    Background="Transparent"
    IsHitTestVisible="False"
    >
    <ListBox.ItemsPanel>
         <ItemsPanelTemplate>
              <Canvas />
         </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemContainerStyle>
         <Style TargetType="ListBoxItem">
              <Setter
                   Property="Canvas.Left"
                   Value="{Binding X}"                        
                   />
              <Setter
                   Property="Canvas.Top"
                   Value="{Binding Y}"                        
                   />
         </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

当我运行应用程序时，上面的代码会输出字符串，而不是页面边框上的浅绿色矩形。例如，左侧边距的 Rect 将显示为“0,0,75,1650”，而不是 75px 宽并跨越整个页面高度的矩形。底部边距字符串位于左下角，而右边距出现在右上角，正如预期的那样。所以绑定正在工作并且它们定位正确，但由于某种原因没有绘制。

我觉得有趣的是我有另一个 ObservableCollection 填充了我自己设计的对象，它们在页面表面上的定位和样式几乎相同。绑定到该集合的 ListBox 的 XAML 的设置方式完全相同，但每个项目的 DataTemplate 稍微复杂一些（9 个矩形，而不仅仅是一个）。它工作得很好。他们也都生活在同一个网格中。

所以我看不出我在哪里出错了，除了如果我得到 toString() 输出，它可能是一个 DataTemplate 问题。想法？发现我的错误？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:03:47.827

在我看来，您在 DataTemplate 中有错误的 DataType。GetMargins() 返回 Rect 的 ObservableCollection 对吗？然后 ListboxItems 是从 Rect 创建的，而您的 DataTemplate 是为 Page 类定义的。

# ios - UITableViewController 中的断言失败

> ID：11798444
> 
> 赞同：27
> 
> 时间：2012-08-03T15:11:59.767
> 
> 标签：ios, uitableview, flickr

我正在参加 iTunes U 斯坦福 iOS 课程，并且正在完成一项任务，以构建一个小的 Flickr 应用程序。我收到一个似乎无法调试的错误

> *** -[UITableView _configureCellForDisplay:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2280.1/UITableView.m:5336 2012-08-03 10:59:24.596 分配 4[4611:c07] (null) libc++ 中的断言失败abi.dylib：终止调用抛出异常

我的 tableviewcontroller 代码有问题：

```
#import "PlacesPhotosTableViewController.h"

@interface PlacesPhotosTableViewController ()
@property (nonatomic) NSDictionary *placeToDisplay;
@property (nonatomic) NSArray *photosInPlace;
@end

@implementation PlacesPhotosTableViewController
@synthesize placeToDisplay = _placeToDisplay;
@synthesize photosInPlace = _photosInPlace;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (id)init
{
    self = [super init];

    return self;
}

- (id)initWithPlace:(NSDictionary *)place
{
    self = [self init];
    if (self)
    {
        self.placeToDisplay = place;
    }

    return self;
}

- (NSArray *)photosInPlace
{
    if (_photosInPlace == nil)
    {
        _photosInPlace = [FlickrFetcher photosInPlace:self.placeToDisplay maxResults:50];
    }

    return _photosInPlace;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog([self.placeToDisplay valueForKeyPath:@"description._content"]);

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return [self.photosInPlace count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Photos";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSString *string = [[self.photosInPlace objectAtIndex:indexPath.row] valueForKeyPath:@"description._content"];

    cell.textLabel.text = string;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-03T15:21:43.037

`CellIdentifier`我敢打赌你`cellForRowAtIndexPath`要回来了`nil`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    static NSString *CellIdentifier = @"Photos";

    /** NOTE: This method can return nil so you need to account for that in code */
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // NOTE: Add some code like this to create a new cell if there are none to reuse
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }

    NSString *string = [[self.photosInPlace objectAtIndex:indexPath.row]     valueForKeyPath:@"description._content"];

    cell.textLabel.text = string;

    return cell;
} 
```

这可能`[UITableView _configureCellForDisplay:forIndexPath:]`是失败的原因......因为`cellForRowAtIndexPath`返回一个空值，然后`configureCellForDisplay`期待一个`UITableViewCell`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T04:29:34.037

我遇到了同样的问题并解决了因为我忘了添加

```
return cell; 
```

现在它解决了。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(tableView==notiTblView){

        NSLog(@"TABLE NEW");

        static NSString *cellIdentifier = @"MenuCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        UIImageView *imageview;
        UILabel *label;
        UILabel *lblDetail;

        if(cell == nil)
        {

            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:cellIdentifier];
            imageview=[[UIImageView alloc]initWithFrame:CGRectMake(8, 3,30, 37)];
            label=[[UILabel alloc]initWithFrame:CGRectMake(70, 10, 100, 20)];
            lblDetail=[[UILabel alloc]initWithFrame:CGRectMake(70, 35, 100, 30)];
            lblDetail.numberOfLines=3;

            imageview.tag=100;
            label.tag=101;
            lblDetail.tag=102;

            label.textColor=[UIColor blackColor];
            label.font=[UIFont systemFontOfSize:15];
            label.backgroundColor=[UIColor clearColor];

            lblDetail.textColor=[UIColor grayColor];
            lblDetail.font=[UIFont systemFontOfSize:13];
            lblDetail.backgroundColor=[UIColor clearColor];

            [cell.contentView addSubview:imageview];
            [cell.contentView addSubview:label];
            [cell.contentView addSubview:lblDetail];

        }

        cell.selectionStyle=UITableViewCellSelectionStyleNone;
        UIImageView *img=(UIImageView *)[cell.contentView viewWithTag:100];
        UILabel *lbl=(UILabel *)[cell.contentView viewWithTag:101];

        NSString * stirngId = [NSString stringWithFormat:@"%@",[[notificationARRAY objectAtIndex:indexPath.row]objectForKey:@"photoID"]];

        if ([dicImages_msg valueForKey:[[notificationARRAY objectAtIndex:indexPath.row] valueForKey:@"productName"]]) {

            img.image=[dicImages_msg valueForKey:[[notificationARRAY objectAtIndex:indexPath.row] valueForKey:@"productName"]];

        }
        else
        {
            if (!isDragging_msg && !isDecliring_msg)
            {
                [dicImages_msg setObject:[UIImage imageNamed:@"timthumb.jpg"] forKey:[[notificationARRAY objectAtIndex:indexPath.row] valueForKey:@"productName"]];
                [self performSelectorInBackground:@selector(download_Noti_image:) withObject:indexPath];
            }
            else
            {
                img.image=[UIImage imageNamed:@"timthumb.jpg"];
            }
        }

        lbl.text=[[notificationARRAY objectAtIndex:indexPath.row] objectForKey:@"memberName"];
        lbl.text=[[notificationARRAY objectAtIndex:indexPath.row] objectForKey:@"memberName"];

        return cell;

       /* static NSString *MyIdentifier = @"MyIdentifier";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] ;
            cell.selectionStyle=UITableViewCellSelectionStyleNone;
            }
        cell.textLabel.text=[[notificationARRAY objectAtIndex:indexPath.row] objectForKey:@"memberName"];
        return cell;*/

   }else{
       static NSString *cellIdentifier = @"MenuCell";
       TblCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
       if (cell==nil) {
           cell = [[TblCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
            }

       NSLog(@"arr..in table..%@",PostedItem);
       cell.selectionStyle=UITableViewCellSelectionStyleNone;

       if([[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"productType"] isEqualToString :@"Video"]){
           cell.postedimage.image=[UIImage imageNamed:@"play_icon.png"];
       }else{

           if ([dicImages_msg valueForKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"productName"]]) {

               cell.postedimage.image=[dicImages_msg valueForKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"productName"]];

           }else
            {
                if (!isDragging_msg && !isDecliring_msg)
                    {
                        [dicImages_msg setObject:[UIImage imageNamed:@"timthumb.jpg"] forKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"productName"]];
                        [self performSelectorInBackground:@selector(downloadImage_3:) withObject:indexPath];
                    } else
                        {
                            cell.postedimage.image=[UIImage imageNamed:@"timthumb.jpg"];
                        }
            }

       }
//*******************User image
    if ([dic_usrImg valueForKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"thumbUrl"]]) {

        cell.profileImage.image=[dic_usrImg valueForKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"thumbUrl"]];

    }
    else
    {
        if (!isDragging_msg && !isDecliring_msg)
        {
            [dic_usrImg setObject:[UIImage imageNamed:@"timthumb.jpg"] forKey:[[PostedItem objectAtIndex:indexPath.row] valueForKey:@"thumbUrl"]];
            [self performSelectorInBackground:@selector(downloadImage_IMAGE4:) withObject:indexPath];
        }
        else
        {
            cell.profileImage.image=[UIImage imageNamed:@"timthumb.jpg"];
        }
    }
//********************************
    [cell.btnImage setTag:100000+indexPath.row];
    [cell.btnImage  addTarget:self action:@selector(Shopw_feedImg:) forControlEvents:UIControlEventTouchUpInside];
//***************
    cell.postedimage.tag=indexPath.row;
    [cell.postedimage setUserInteractionEnabled:YES];
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onImageClick:)];
    [tap setNumberOfTouchesRequired:1];
    [tap setNumberOfTapsRequired:1];
    [tap setDelegate:self];
    [cell.postedimage addGestureRecognizer:tap];
    cell.membername.text=[[PostedItem objectAtIndex:indexPath.row] objectForKey:@"userName"];
    [cell.membername sizeToFit];
    //[[PostedItem objectAtIndex:indexPath.row] objectForKey:@"memberID"];  
    cell.productName.text= [[PostedItem objectAtIndex:indexPath.row]objectForKey:@"photoTitle"];
    //@"hello this is a test doviumbmvbhdf asx";
   // with new sffhy dgftn tun dgh ";
  //  NSLog(@"Str Length...%d",[cell.productName.text length]);
    if ([cell.productName.text length]>38) {

        NSLog(@"greater then...%@",cell.productName.text);
         cell.productName.numberOfLines=2;
        CGRect frame=cell.postedimage.frame;
        frame.origin.y=130;
        cell.postedimage.frame=frame;
        CGRect Prdctframe=cell.productName.frame;
        frame.size.height=40.0f;
        cell.productName.frame=Prdctframe;
        //cell.postedimage.frame.origin.y=115.0f;
    }//[[PostedItem objectAtIndex:indexPath.row]objectForKey:@"photoTitle"];
      //@"szfgfgbjmghufho stdogb ryt;o esftesi rdetg ry ry ry ";//
    else
    {
        cell.productName.numberOfLines=1;
        CGRect frame=cell.postedimage.frame;
        frame.origin.y=110;
        cell.postedimage.frame=frame;
        CGRect Prdctframe=cell.productName.frame;
        Prdctframe.size.height=20.0f;
        cell.productName.frame=Prdctframe;
          NSLog(@"less then...");
    }

    //[cell.productName sizeToFit];
 //   cell.profileImage.image=[UIImage imageNamed:@"timthumb.jpg"];
    return cell;
   }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T11:04:29.737

这条线在这里

```
static NSString *CellIdentifier = @"Photos"; 
```

这是否与故事板中的单元格标识符匹配？我发现这些不匹配是我问题的原因！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T20:04:14.133

您不是在方法中创建单元格

```
tableView:cellForRowAtIndexPath: 
```

您仅重用此方法中`nil`最初返回的单元格。

您必须通过以下给定代码在您的方法中创建单元格。

```
if(cell==nil){

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:CellIdentifier] autorelease];

} 
```

# c# - 使用 C# 的性能计数器持续时间

> ID：11798446
> 
> 赞同：1
> 
> 时间：2012-08-03T15:12:03.047
> 
> 标签：c#, performancecounter

我希望使用性能计数器来跟踪使用 C# 应用程序全天处理的对象数量。根据我的研究，我发现 PerformanceCounterType.NumberOfItems32 是最适合使用的。

我的问题是，性能计数器能持续多久（其中的数据，而不是计数器本身）？如果在初始设置例程期间创建了性能计数器并在一天中递增，我是否需要在午夜重置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:41:14.260

计数器中的数据将持续到对象被释放，此时数据丢失。如果您有兴趣获取每天的值，这意味着您必须以某种方式在夜间重置值。

但是，我个人使用[ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)从我的程序中获取此类信息。它提供了有关对象的使用频率、函数调用频率、处理它们需要多长时间等方面的洞察力。它并不便宜，但如果您想以相当简单的方式获得详细的洞察力，它可能值得研究。

# python - 你如何分别控制两个不同的对象（两人乒乓球游戏）？

> ID：11798447
> 
> 赞同：1
> 
> 时间：2012-08-03T15:12:04.803
> 
> 标签：python, python-2.7, tkinter

所以我发现了这个叫法拉利的人创造的伟大的乒乓球比赛，我被赋予了让两人打出两分但没有高分的任务。我已经尝试了很多东西，除了当我制作第二个控制运动的代码块时，它要么被完全忽略，要么我会按下它分配的向上按钮，它会一直向上并且不会回来。

```
from decimal import Decimal, getcontext
getcontext().prec = 20
import time,random,os,sys
from Tkinter import *
from tkFileDialog import *
import tkFont
import os,sys

## decimal is for numbers and arithmatic that use irrational numbers
## Tkinter is the graphical interface for the program
## tkFont is the window that pops up
## os is operating system
## sys is system

## there are 2 different variables for player 1 and player 2 because one variable is a variable for a number, the other creates the rectangle(the actual paddle)
## these are just variables that represent numbers

refreshrate=100
do = 1
done=0
ballX=320
ballY=240
playerone=180
py2=180
pause=0
up=0
down=0
root = Tk()
root.title("Pong")
c = Canvas(root,width=640,height=480,bg='black')
c.pack()
xc = float(2)
yc = float(random.randint(-3,3))
while(yc==0):
    yc = float(random.randint(-3,3))
ball = c.create_oval(ballX-10,ballY-10,ballX+10,ballY+10,fill='white')
player = c.create_rectangle(610,playerone,625,playerone+120,fill='blue')
playertwo = c.create_rectangle(15,playerone,30,playerone+120,fill='blue')
c.create_rectangle(318,0,322,480,fill='white')
c.create_rectangle(318,0,322,30,fill='white')
score = 0
escore= 0
lives = 5
font = tkFont.Font(family = "Book Antiqua", size = 15, weight = "bold")

## to change the keys in which you press to control the paddles, change the letter or arrow key between the quotation marks next to str a   
## player1 controls

def up(event):
    global playerone, player, py2, playertwo, high, low
    up = 1
def down(event):
    global playerone, player, py2, playertwo, high, low
    down = 1
def escape(event):
    global do, lives
    lives = -1
    do = 0
    root.quit
    root.quit()
def onkeyrelease(event):
    global up, down, do, lives, pause
    key = event.keysym
    if (str(key)=="w"):
        up = 0
    if (str(key)=="s"):
        down = 0
    if (str(key)=="Escape" and done==1):
        root.quit
        do = 0
        lives = -1
        root.quit()
    if (str(key)=="p"):
        if(pause==1):
            pause=0
        elif(pause==0):
            pause=1
def buttoninit():
    root.bind("<w>",up)
    root.bind("<s>",down)
    root.bind("`",escape)
    root.bind('<KeyRelease>', onkeyrelease)
buttoninit()

## player2 controls

def high(event):
    global playerone, player, py2, playertwo, up, down
    up = 1
def low(event):
    global playerone, player, py2, playertwo, up, down
    down = 1
def leave(event):
    global do, lives
    lives = -1
    do = 0
    root.quit
    root.quit()
def offkeyrelease(event):
    global up, down, do, lives, pause
    key = event.keysym
    if (str(key)=="Up"):
        up = 0
    if (str(key)=="Down"):
        down = 0
    if (str(key)=="Escape" and done==1):
        root.quit
        do = 0
        lives = -1
        root.quit()
    if (str(key)=="p"):
        if(pause==1):
            pause=0
        elif(pause==0):
            pause=1
def buttononit():
    root.bind("<Up>",high)
    root.bind("<Down>",low)
    root.bind("`",leave)
    root.bind('<KeyRelease>', offkeyrelease)
buttononit()

c.create_text(475,10,text='Lives:',fill='white',font=font)
livestext = c.create_text(525,10,text=lives,fill='white',font=font)
c.create_text(475,25,text='Score:',fill='white',font=font)
scoretext = c.create_text(525,25,text=score,fill='white',font=font)
print "Push 'p' to pause"
var=1

while (do):
    ##  player movement controls
    if(playerone>0 and up==1 and down!=1 and pause==0):
        playerone=playerone-5
    if(playerone<360 and down==1 and up!=1 and pause==0):
        playerone=playerone+5

##  player collision detection
    if(ballX>=605 and ballY+10>=playerone and ballX<=616 and ballY+10>=playerone and ballY-10<=playerone+120):
        xc*=-1
        ballX=605
        if(xc>-10):
            xc=float(xc)-float(0.4)
        if(yc>0):
            yc=float(random.randint(15,70))
            yc=float(yc)/float(10)
        else: 
            yc=float(random.randint(-70,-15))
            yc=float(yc)/float(10)

##  playertwo movement controls
        if (playertwo>0 and high==1 and low!=1 and pause==0):
            playertwo=playertwo+5
        if (playertwo<360 and low==1 and high!=1 and pause==0):
            playertwo=playertwo-5

##  playertwo collision detection
    if(ballX<=40 and ballX>=29 and ballY+py2 and ballY-10<=py2+120):
        xc*=-1
        ballX=40
        if(xc<10):
            xc=float(xc)+float(0.4)
        if(yc>0):
            yc=float(random.randint(15,70))
            yc=float(yc)/float(10)
        else:
            yc=float(random.randint(-70,-15))
            yc=float(yc)/float(10)

##  left and right bounds collision detection (aka missed paddle)
    if(ballX>=630 and xc>0):
        ballX=320
        ballY=240
        xc = 2
        yc = random.randint(-3,3)
        while(yc==0):
            yc = random.randint(-3,3)
        lives = lives-1
        escore=escore+1
    if(ballX<=10 and xc<0):
        ballX=320
        ballY=240
        xc = 2
        yc = random.randint(-3,3)
        while(yc==0):
            yc = random.randint(-3,3)
        score=score+1

##  top and bottom bounds colliison detection
    if(playerone<0):
        playerone=0
    if(playerone>360):
        playerone=360
    if(ballY>=470 or ballY<=10):
        yc*=-1

##  AI(artificial intelligence(ball)) movement controls
    if(py2+60<ballY and py2<360 and xc<0 and pause==0):
        py2=py2+4
    if(py2+60>ballY and py2>0 and xc<0 and pause==0):
        py2=py2-4
    if(pause==0):
        ballX=ballX+xc
        ballY=ballY+yc
    c.delete(ball)
    ball = c.create_oval(ballX-10,ballY-10,ballX+10,ballY+10,fill='white')
    c.delete(player)
    player = c.create_rectangle(610,playerone,625,playerone+120,fill='blue')
    c.delete(playertwo)

# to change the game to single player, remove the playerone's in the following line and replace them with py2's
# this are  the coordinates for the paddle
# the first playerone, tracks the position of the thing that the paddle is following
# 1#= how wide it is, 2# tracks the other object, 3# the width, 4# how tall the paddle is, 5# the color

    playertwo = c.create_rectangle(15, playerone ,30,  playerone + 120 ,fill='blue')

    c.delete(livestext)
    livestext = c.create_text(525,10,text=lives,fill='white',font=font)
    c.delete(scoretext)
    scoretext = c.create_text(525,25,text=score,fill='white',font=font)
    c.update()
    time.sleep(Decimal("1")/Decimal("100"))
    if(lives==0):
        do=0
        if(score > 0):
            print score
        done = 1
    try:
        c.update()
    except:
        print "Error"
        root.quit
    while(lives==0):
        c.update()
try:
    c.update()
except:
    print "Error!!!"
    root.quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:08:34.243

您的代码已被重新​​设计为以下两人游戏。该程序已被重组为各种函数、类和方法。没有AI可以玩的控件是相同的。

```
from tkinter import *
from tkinter.font import Font
import functools
import math
import random
import time; time.clock = time.perf_counter

################################################################################

class Pong(Canvas):

    DEFAULTS = dict(width=640,
                    height=480,
                    background='black',
                    highlightthickness=0)

    @classmethod
    def main(cls):
        root = Tk()
        root.title('Pong')
        root.resizable(False, False)
        root.bind_all('<Escape>', lambda event: root.destroy())
        game = cls(Font(family='Book Antiqua', size=15, weight='bold'), 5, 100,
                   background='black', width=640, height=480)
        game.grid()
        root.mainloop()

    def __init__(self, font, lives, fps, master=None, cnf={}, **kw):
        for item in self.DEFAULTS.items():
            kw.setdefault(*item)
        super().__init__(master, cnf, **kw)
        self.font = font
        self.p1 = Paddle(lives, 'blue', 10,
                         self.height, 120, 15, 5)
        self.p2 = Paddle(lives, 'blue', self.width - 10,
                         self.height, 120, 15, 5)
        self.wait = 1000 // fps
        self.separator = Box(Point(self.width // 2 - 2, 0),
                             Point(self.width // 2 + 2, self.height))
        self.new_rect(self.separator, 'white')
        self.bind('<p>', self.pause)
        self.p1.bind(self, 'w', 's')
        self.p2.bind(self, 'Up', 'Down')
        self.draw_high = True
        self.after_idle(self.startup)
        self.focus_force()

    def pause(self, event):
        if not self.running_startup:
            self.refresh = self.after_cancel(self.refresh) \
                           if self.refresh else self.after_idle(self.animate)

    def startup(self, countdown=3, target=None):
        if target is None:
            self.running_startup = True
            self.ball = Ball('white', self.width, self.height, 20)
            self.refresh = None
            target = time.clock() + countdown
        for paddle in self.p1, self.p2:
            paddle.center()
        self.draw_all()
        remaining = math.ceil(target - time.clock())
        if remaining:
            self.new_text(Point(self.width >> 1, self.height >> 1),
                          self.random_color(), str(remaining), CENTER)
            self.after(self.wait, self.startup, None, target)
        else:
            self.running_startup = False
            self.after_idle(self.animate)

    @classmethod
    def random_color(cls):
        return '#{:02X}{:02X}{:02X}'.format(*cls.random_bytes(3))

    @staticmethod
    def random_bytes(n):
        return bytes(random.randrange(1 << 8) for _ in range(n))

    def animate(self):
        self.move_all()
        if self.in_bounds():
            self.draw_all()
            self.refresh = self.after(self.wait, self.animate)

    def move_all(self):
        for obj in self.p1, self.p2, self.ball:
            obj.move()
            if obj is not self.ball:
                obj.bounce(self.ball)

    def in_bounds(self):
        if self.boundary.intersects(self.ball.boundary):
            return True
        if (self.p2 if self.ball.position.x > 0 else self.p1).kill():
            self.after_idle(self.startup)
        else:
            self.draw_all()
            self.after(5000, self.quit)
        return False

    def draw_all(self):
        self.delete('actor')
        for obj in self.p1, self.p2, self.ball:
            obj.render(self)
        self.render_status()

    def render_status(self, x_margin=4, y_margin=4):
        self.draw_high = high = (self.ball.position.y > self.height * 0.25) \
                                if self.draw_high else \
                                (self.ball.position.y >= self.height * 0.75)
        if high:
            self.new_text(self.separator.NW + Point(-x_margin, +y_margin),
                          'white', self.p1.status, NE)
            self.new_text(self.separator.NE + Point(+x_margin, +y_margin),
                          'white', self.p2.status, NW)
        else:
            self.new_text(self.separator.SW + Point(-x_margin, -y_margin),
                          'white', self.p1.status, SE)
            self.new_text(self.separator.SE + Point(+x_margin, -y_margin),
                          'white', self.p2.status, SW)

    def new_rect(self, box, color, tag='static'):
        self.create_rectangle(box, fill=color, outline=color, tag=tag)

    def new_oval(self, box, color, tag='static'):
        self.create_oval(box, fill=color, outline=color, tag=tag)

    def new_text(self, point, color, text, anchor, tag='actor'):
        self.create_text(point, fill=color, tag=tag,
                         text=text, anchor=anchor, font=self.font)

    @property
    def width(self):
        return int(self['width'])

    @property
    def height(self):
        return int(self['height'])

    @property
    def boundary(self):
        return Box(Point(0, 0), Point(self.width, self.height))

################################################################################

def enum(names):
    return type('enum', (), dict(map(reversed, enumerate(
        names.replace(',', ' ').split())), __slots__=()))()

def copy_sign(x, y):
    return type(x)(math.copysign(x, y))

################################################################################

class Paddle:

    PART = enum('null, upper, center, lower')

    def __init__(self, lives, color, alignment, board_height,
                 paddle_height, paddle_width, move_by):
        self.lives = lives
        self.color = color
        self.height = board_height
        self.position = Point(alignment, board_height >> 1)
        self.size = Point(paddle_width >> 1, paddle_height >> 1)
        self.move_by = move_by
        self.score = 0
        self.just_bounced = False

    def kill(self):
        self.lives -= 1
        self.score >>= 1
        return self.lives > 0

    def center(self):
        y, middle = self.position.y, self.height >> 1
        if y < middle:
            self.move(down=True)
        elif y > middle:
            self.move(up=True)

    def move(self, *, up=False, down=False):
        if up or (not down and self.keys.up and
                  self.position.y - self.size.y > 0):
            self.position -= Point(0, self.move_by)
        if down or (not up and self.keys.down and
                    self.position.y + self.size.y < self.height):
            self.position += Point(0, self.move_by)

    def bounce(self, ball):
        minimum = self.size.x + ball.radius
        if self.position.x != ball.position.x and self.overlap(ball, minimum):
            if not self.just_bounced:
                self.just_bounced = True
                self.score += abs(ball.velocity.y)
            sign = +1 if self.position.x < ball.position.x else -1
            if self.collision_area == self.PART.center:
                ball.position.x = self.position.x + minimum * sign
            else:
                ball.position.adjust(self.middle_point, minimum)
            ball.velocity.x = copy_sign(ball.velocity.x, sign)
            ball.change_speed()
        else:
            self.just_bounced = False

    def overlap(self, ball, minimum):
        box = self.boundary
        if box.intersects(ball.boundary):
            self.collision_area = self.PART.center
        elif (self.hi_mid(box) - ball.position).magnitude <= minimum:
            self.collision_area = self.PART.upper
        elif (self.lo_mid(box) - ball.position).magnitude <= minimum:
            self.collision_area = self.PART.lower
        else:
            self.collision_area = self.PART.null
        return self.collision_area

    def render(self, surface):
        box = self.boundary
        surface.new_rect(box, self.color, 'actor')
        surface.new_oval(Box.from_point(self.hi_mid(box), self.size.x),
                         self.color, 'actor')
        surface.new_oval(Box.from_point(self.lo_mid(box), self.size.x),
                         self.color, 'actor')

    def hi_mid(self, boundary):
        self.middle_point = Point(self.position.x, boundary.a.y)
        return self.middle_point

    def lo_mid(self, boundary):
        self.middle_point = Point(self.position.x, boundary.b.y)
        return self.middle_point

    def bind(self, surface, up, down):
        self.keys = KeyListener(surface, up=up, down=down)

    @property
    def boundary(self):
        return Box.from_point(self.position, self.size)

    @property
    def status(self):
        return 'Lives: {}\nScore: {}'.format(self.lives, self.score)

Player = Paddle

################################################################################

class KeyListener:

    def __init__(self, widget, **kwargs):
        self.__state = dict.fromkeys(kwargs, False)
        for name, key in kwargs.items():
            widget.bind('<KeyPress-{}>'.format(key), self.__set(name, True))
            widget.bind('<KeyRelease-{}>'.format(key), self.__set(name, False))

    def __set(self, name, value):
        def handler(event):
            self.__state[name] = value
        return handler

    def __getattr__(self, name):
        return self.__state[name]

################################################################################

class Ball:

    def __init__(self, color, width, height, size):
        self.color = color
        self.board = Point(width, height)
        self.position = self.board / 2
        self.radius = size >> 1
        self.velocity = Point(1 - 2 * random.randrange(2),
                              1 - 2 * random.randrange(2))
        self.change_speed()

    def change_speed(self, max_x=10, max_y=10):
        speed = self.velocity
        speed.x = copy_sign(random.randint(1, max_x), speed.x)
        speed.y = copy_sign(random.randint(1, max_y), speed.y)

    def move(self):
        self.position += self.velocity
        self.bounce()

    def bounce(self):
        if self.position.y - self.radius < 0:
            self.position.y = self.radius
            self.velocity.y = copy_sign(self.velocity.y, +1)
            self.change_speed()
        elif self.position.y + self.radius > self.board.y:
            self.position.y = self.board.y - self.radius
            self.velocity.y = copy_sign(self.velocity.y, -1)
            self.change_speed()

    def render(self, surface):
        surface.new_oval(self.boundary, self.color, 'actor')

    @property
    def boundary(self):
        return Box.from_point(self.position, self.radius)

################################################################################

def autocast(function):
    @functools.wraps(function)
    def cast(self, other):
        if not isinstance(other, self.__class__):
            other = self.__class__(other, other)
        return function(self, other)
    return cast

################################################################################

class Point(list):

    def __init__(self, x, y):
        super().__init__((x, y))

    def __repr__(self):
        return '{}({})'.format(self.__class__.__name__,
                               ', '.join(map(repr, self)))

    @autocast
    def __add__(self, other):
        return self.__class__(self.x + other.x, self.y + other.y)

    @autocast
    def __sub__(self, other):
        return self.__class__(self.x - other.x, self.y - other.y)

    @autocast
    def __mul__(self, other):
        return self.__class__(self.x * other.x, self.y * other.y)

    @autocast
    def __truediv__(self, other):
        return self.__class__(self.x / other.x, self.y / other.y)

    @autocast
    def __floordiv__(self, other):
        return self.__class__(self.x // other.x, self.y // other.y)

    @autocast
    def __iadd__(self, other):
        self.x += other.x
        self.y += other.y
        return self

    @autocast
    def __isub__(self, other):
        self.x -= other.x
        self.y -= other.y
        return self

    def __get_x(self):
        return self[0]

    def __set_x(self, value):
        self[0] = value

    x = property(__get_x, __set_x)

    def __get_y(self):
        return self[1]

    def __set_y(self, value):
        self[1] = value

    y = property(__get_y, __set_y)

    def __get_magnitude(self):
        return math.hypot(self.x, self.y)

    def __set_magnitude(self, value):
        magnitude = self.magnitude
        self.x *= value / magnitude
        self.y *= value / magnitude

    magnitude = property(__get_magnitude, __set_magnitude)

    def adjust(self, projected_from, distance):
        vector = self - projected_from
        vector.magnitude = distance
        self.x = round(projected_from.x + vector.x)
        self.y = round(projected_from.y + vector.y)

################################################################################

class Box(list):

    @classmethod
    def from_point(cls, point, extension):
        return cls(point - extension, point + extension)

    def __init__(self, a, b):
        super().__init__((a, b))

    def __repr__(self):
        return '{}({})'.format(self.__class__.__name__,
                               ', '.join(map(repr, self)))

    def intersects(self, other):
        return not (self.a.x > other.b.x or other.a.x > self.b.x or
                    self.a.y > other.b.y or other.a.y > self.b.y)

    def __get_a(self):
        return self[0]

    def __set_a(self, value):
        self[0] = value

    a = NW = property(__get_a, __set_a)

    def __get_b(self):
        return self[1]

    def __set_b(self, value):
        self[1] = value

    b = SE = property(__get_b, __set_b)

    @property
    def NE(self):
        return Point(self.b.x, self.a.y)

    @property
    def SW(self):
        return Point(self.a.x, self.b.y)

################################################################################

if __name__ == '__main__':
    Pong.main() 
```

**编辑：**在设计评分系统时，有一个分数和生命是没有意义的。如果一个玩家的分数在对手输掉时加一，则分数可能会下降，赢家将是没有输掉所有生命的人。如果一个球员的得分在每次击球时加一，那么两名球员在整个比赛中的得分几乎相同，而且得分毫无意义。

我选择根据击球难度的近似值来增加球员的得分。如果球碰巧垂直运动为 5 并且球员击球，则球员的得分增加 5。为了进一步激励不要失去生命，玩家的得分在失去生命时减半。这也为其他球员在得分方面提供了充足的机会。

至于奇怪的弹跳，球每次撞击物体时都会有随机的速度变化。这样做的原因是，如果球保持相同的速度并正常弹跳，那么很容易预测球的去向，比赛就太容易了。如果玩家在游戏中找不到挑战，无聊和无敌会导致快速放弃游戏。

当球离得足够近时，状态显示会移动到棋盘的另一侧，以使状态和球永远不会彼此重叠，从而使潜在玩家感到困惑。这种变化是由球向上移动超过 25% 屏幕高度或球向下移动超过 75% 屏幕高度触发的。如果您觉得游戏有什么不一样的地方，请考虑学习 Python，以便您可以自己修改游戏。

# cakephp - 布局中的 CakePHP html 帮助程序链接

> ID：11798448
> 
> 赞同：0
> 
> 时间：2012-08-03T15:12:06.383
> 
> 标签：cakephp

无法理解如何做到这一点。我想在布局（layout/default.ctp）的导航中设置“编辑您的帐户”链接。我想授予登录用户访问权限以仅编辑那里的详细信息（我还将在控制器中处理此问题以检查其当前登录的用户）。但是我如何在布局中做到这一点？

我试过这个但失败了：

```
<?php echo $this->Html->link('Your Account', array('controller' => 'users', 'action' => 'edit', $this->Auth->users('id')));?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:45:17.150

Sorry, I've been over complicating things. To solve this I wrote this in the layout:

```
<?php echo $this->Html->link('Your Account', array('controller' => 'users', 'action' => 'edit'));?> 
```

and passed the ID in the edit function in the users controller like this

```
$id = $this->Auth->user('id');
$this->User->id = $id; 
```

Hope this helps someone.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:28:20.203

没有核心身份验证助手。如果那是您自己的，您需要在您的应用控制器中使其全局可用：

```
public $helpers = array('Auth'); 
```

# java - Admob 中介 - 发布商 ID 与中介 ID

> ID：11798450
> 
> 赞同：4
> 
> 时间：2012-08-03T15:12:11.713
> 
> 标签：java, android, admob, adview

我想知道 Admob 中介的正确范式是什么。
到目前为止，我有一个普通的 AdView 横幅。

这就是认为它应该如何工作的方式：

1.  onFailedToReceiveAd - 捕获此事件，这意味着 admob 无法提供广告。
2.  使用中介 ID 创建新的 AdView 横幅并使其可见

那么，这是最佳做法吗？
创建两个横幅。一个使用“常规”**发布商 ID**
，另一个使用**中介 ID**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T20:37:59.780

正确的做法是：

1.  创建带有中介 ID 的横幅。
2.  在[admob.com](//www.admob.com)上配置该中介展示位置时，将 AdMob 配置为该中介展示位置中的广告网络之一。如果您希望每次都首先请求 AdMob，请使用 eCPM 排序并为 AdMob 指定最高 eCPM 值。

这样，中介将始终首先请求 AdMob 广告。如果失败，Mediation 将自动为您尝试下一个网络。这使您不必自己执行此重试逻辑。 `onFailedToReceiveAd`只有在所有广告网络都未能返回广告时才会调用。

# http - 推荐人的最大长度是多少？

> ID：11798451
> 
> 赞同：5
> 
> 时间：2012-08-03T15:12:12.187
> 
> 标签：http

> **可能重复：**
> [URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

您好，我想将referer 记录到我的数据库中，我想知道referer 的最大长度是多少？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T18:26:43.450

这`referer`是一个 URL，所以你可以参考[这个关于最大 URL 长度的答案](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)。URL 的长度几乎肯定不会超过 2083 个字符，因为这是[某些版本的 IE 支持的最大值](http://support.microsoft.com/kb/208427)，而且看起来[Google 不会索引超过 1855 个字符的任何内容](http://www.seomofo.com/experiments/title-and-h1-of-this-post-but-for-the-sake-of-keyword-prominence-stuffing-im-going-to-mention-it-again-using-various-synonyms-stemmed-variations-and-of-coursea-big-fat-prominent-font-size-heres-the-stumper-that-stumped-me-what-is-the-max-number-of-chars-in-a-url-that-google-is-willing-to-crawl-and-index-for-whatever-reason-i-thought-i-had-read-somewhere-that-googles-limit-on-urls-was-255-characters-but-that-turned-out-to-be-wrong-so-maybe-i-just-made-that-number-up-the-best-answer-i-could-find-was-this-quote-from-googles-webmaster-trends-analyst-john-mueller-we-can-certainly-crawl-and-index-urls-over-1000-characters-long-but-that-doesnt-mean-that-its-a-good-practice-the-setup-for-this-experiment-is-going-to-be-pretty-simple-im-going-to-edit-the-permalink-of-this-post-to-be-really-really-long-then-im-going-to-see-if-google-indexes-it-i-might-even-see-if-yahoo-and-bing-index-iteven-though-no-one-really-cares-what-those-assholes-are-doing-url-character-limits-unrelated-to-google-the-question-now-is-how-many-characters-should-i-make-the-url-of-this-post-there-are-a-couple-of-sources-ill-reference-to-help-me-make-this-decision-the-first-is-this-quote-from-the-microsoft-support-pages-microsoft-internet-explorer-has-a-maximum-uniform-resource-locator-url-length-of-2083-characters-internet-explorer-also-has-a-maximum-path-length-of-2048-characters-this-limit-applies-to-both-post-request-and-get-request-urls-the-second-source-ill-cite-is-the-http-11-protocol-which-says-the-http-protocol-does-not-place-any-a-priori-limit-on-the-length-of-a-uri-servers-must-be-able-to-handle-the-uri-of-any-resource-they-serve-and-should-be-able-to-handle-uris-of-unbounded-length-if-they-provide-get-based-forms-that-could-generate-such-uris-a-server-should-return-414-request-uri-too-long-status-if-a-uri-is-longer.html)。

因此，如果您将存储为 a`CHAR`则选择 2083 以确保安全，并且如果您存储为 a `VARCHAR`then 这真的没关系，因为任何超过 255 个字符的字符串都需要 2 个字节来存储它的长度，所以请选择像这样的高3000。

# ajax - Get values from MVC3 model to pass Ajax and assign in array

> ID：11798452
> 
> 赞同：0
> 
> 时间：2012-08-03T15:12:12.360
> 
> 标签：ajax, asp.net-mvc-3, jquery

How do I get values from model using Ajax and assign these values in an array on the client?

Here is my controller

```
public ActionResult Oku()
{
    var query = from table in db.news where table.image_name select table;
    return Json(query,JsonRequestBehavior.AllowGet);
} 
```

My Ajax script is:

```
$.ajax({
    type: "get",
    url: "Home/Oku",
    data: {},
    dataType: "json",
        // Some codes to assign array
    }
}); 
```

Thanks for your help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:45:11.583

Just implement a `success` callback in your Ajax call. Also you don't need to specify `get`, it is the default behavior.

```
$.ajax({
    url: "Home/Oku",
    dataType: "json",
    success: function(resp) {             
         // do something with resp object which is an array 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:02:13.700

I'd use [JsonResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult.aspx) instead of an ActionResult.

Here's a [Tutorial](http://geekswithblogs.net/michelotti/archive/2008/06/28/mvc-json---jsonresult-and-jquery.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:06:13.503

The data returned from action is already in array format, since the query result is an IEnumerable.

You need to implement success callback in the ajax.

```
$(function () {
        $.ajax({
            type: "get", url: "Home/Oku", data: {}, dataType: "json", 
            success: function (data) {
               alert(data[0])
            }
        });
    }) 
```

# php - 在 php 中发送带有附件的电子邮件而不将文件保存到网络服务器

> ID：11798457
> 
> 赞同：8
> 
> 时间：2012-08-03T15:12:35.807
> 
> 标签：php, email, attachment

我正在创建一个简单的表单，让用户“上传”一个文件和一个评论框。用户选择文件（可以是图像或 pdf）并单击提交后，我不会将文件存储到我的网络服务器中，文件将插入到电子邮件中并发送给我。

我的问题是：如何在不将文件存储在任何地方的情况下附加文件。

我不想使用第三方模块。

更新：

```
$attachment = $_FILES["OrderList"]["tmp_name"];
$content = file_get_contents($attachment);
$content = chunk_split(base64_encode($content)); 
```

我收到一个错误：

> 第 24 行 C:\dir\orders\upload.php 中的文件名不能为空

第 24 行是`$content = file_get_contents($attachment);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-18T13:21:00.810

今天我遇到了类似的情况并找到了解决方案，所以这里是

```
if ($_FILES["file"]["error"] > 0) {
echo "Error: " . $_FILES["file"]["error"] . "<br>";
} else {

$temp = explode(".", $_FILES["file"]["name"]);
$extension = end($temp);
$newname= $_FILES["file"]["tmp_name"].".".$extension;
rename($_FILES["file"]["tmp_name"],$newname);
$attachments = array( $newname );

   wp_mail('emailto send', 'title', 'message','',$attachments );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:15:56.347

当您接受来自 PHP 的文件上传时，您已经存储了它。

当它存储在 tmp 文件夹中时，只需使用它。

当您的脚本结束时，PHP 会自动为您删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:17:38.123

通过上传文件，它会保存在您的服务器上的临时目录中。例外是 PUT 方法，在这种情况下，文件直接在 php://input 上发送。之后，您可以使用您喜欢的任何 PHP 邮件库。

[PUT 文件的 PHP 手册](http://php.net/manual/en/features.file-upload.put-method.php)

# c# - 限制程序一天的最佳方法

> ID：11798458
> 
> 赞同：1
> 
> 时间：2012-08-03T15:12:38.693
> 
> 标签：c#, licensing, restriction

我有这个程序，我需要限制它。但我不知道哪种方式最好。当我运行程序时，我要求提供注册密钥和用户名。然后取`username+somestring+DateTime.Now`。将其转换为哈希并与密钥进行比较。如果然后使用用户名和密钥`true`保存在文件中。`AppData`并且在运行程序时也这样做。并从此字符串获取日期。如果`DateTime.Now.Day != DateFromString.Day`那么`false`. 但是如果用户删除这个文件并更改时间然后注册......他可以打开它。

增加一天限制的最佳方法是什么？

**提前致谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:16:33.533

如果您给您的用户一些软件来检查计算机自己的时钟，那么它可以通过更改时钟来轻松欺骗。

稍微好一点的是让您的程序通过服务器进行身份验证。但是您的用户将需要访问 Internet 才能使用您的程序。并且熟练的用户仍然可以更改程序以跳过检查。

如果你给你的用户一些软件，那么你就不能 100% 可靠地阻止他们修改和运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:22:28.720

您需要以独特的方式识别安装了您的程序的机器。
看看这个问题的[最佳投票答案](https://stackoverflow.com/questions/9546228/how-to-detect-the-original-mac-address-after-it-has-been-spoofed/9546552#9546552)。
使用密钥加密获得的字符串并将其发送到您可以控制的 Web 服务。

Web 服务将加密字符串与首次运行的数据一起注册到数据库中。
在您的程序下一次运行时，再次向 Web 服务发送相同的加密字符串。
Web 服务根据数据库检查字符串和日期并发回结果。

这不是您问题的绝对解决方案，可能会被愚弄。
至少这需要一台不同的机器、一个虚假的网络服务或破解你的代码。

# c# - 图片框中的多个图像（带 Alpha 通道）

> ID：11798461
> 
> 赞同：0
> 
> 时间：2012-08-03T15:12:46.057
> 
> 标签：c#, picturebox, alpha

我正在设计一个程序，它将具有类似 Photoshop 的图层界面。我想同时在一个图片框中有多个图像**，**有些会更高，有些会更低，每一个（图像）都会有一个 alpha 通道。图片框中的最终图像将是所有这些图像与 Alpha 通道的组合图像。

有可能这样做吗？

请注意，加载图像后，用户可以更改每张添加图片的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:29:35.830

您不能在 Windows 窗体 PictureBox 中有多个图像，不。

您可以从多个图像创建单个图像并以各种方式混合它们，然后在 PictureBox 中显示该图像。

或者，您可以覆盖多个图片框，使用 PictureBox 控件上设置的不同不透明度。

# css - IE 8 media="all" CSS 问题

> ID：11798463
> 
> 赞同：0
> 
> 时间：2012-08-03T15:12:46.893
> 
> 标签：css, internet-explorer-8

我遇到了一种奇怪的效果，将 media="all" 添加到 CSS 文件会导致网站的布局与使用 media="" 不同。

```
<link href="/webapp/css/style.css" media="" rel="stylesheet" type="text/css" >
<link href="/webapp/css/style.css" rel="stylesheet" type="text/css" > 
```

在 IE8 中生成“正确”的布局和

```
<link href="/webapp/css/style.css" media="all" rel="stylesheet" type="text/css" >
<link href="/webapp/css/style.css" media="screen" rel="stylesheet" type="text/css" > 
```

导致不同的、稍微错误的布局：在某处应用了 50px 的间隙。

你们中有人知道类似的效果吗？这是什么原因？可能还有更多，或者这只是一些可以忽略的奇怪效果？

谢谢你的帮助！

卢卡斯

# javascript - 带有 Javascript 的 XML，试图找到父级的名称

> ID：11798466
> 
> 赞同：0
> 
> 时间：2012-08-03T15:12:51.580
> 
> 标签：javascript, xml, xml-parsing

我对 XML 很陌生，在尝试获取父节点名称时遇到了一些问题

```
<?xml version="1.0" encoding="UTF-8" ?>
<response uri="/crm/private/xml/Contacts/getSearchRecords">
    <result>
        <Contacts>
            <row no="1">
                <FL val="CONTACTID">545094000000127015</FL>
                <FL val="First Name"><![CDATA[Roger]]></FL>
                <FL val="Last Name"><![CDATA[Rabbit]]></FL>
                <FL val="ACCOUNTID">12345678910</FL>
                <FL val="Account Name"><![CDATA[Warner Bros Inc]]></FL>
            </row>
        </Contacts>
    </result>
</response> 
```

在我的 Javascript 中，我可以通过这种方式获取孩子的 nodeValues

```
parser = new DOMParser();
xmlDoc = parser.parseFromString(req.responseText, "text/xml");
//I also have the windows one but no need to see it   
var length = xmlDoc.getElementsByTagName("FL").length;
for (var i = 0; i < length; i++) {
    alert(xmlDoc.getElementsByTagName("FL")[i].childNodes[0].nodeValue);
} 
```

我试过了：

```
alert(xmlDoc.getElementsByTagName("FL")[i].nodeValue);
alert(xmlDoc.getElementsByTagName("FL")[i].childNodes[0].parentNode.nodeValue);
alert(xmlDoc.getElementsByTagName("FL")[i].childNodes[0].parentNode.nodeName); 
```

等，但似乎没有任何工作我要么得到空值要么未定义。我基本上想获取名称（名字、帐户 ID 等），以便我可以运行 switch 语句并将节点值放置在适当的位置。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:26:19.847

对我来说，您对“父节点名称”的含义有点不清楚。感谢您的最后一句话，我猜您想获取每个标签的`val`属性？！`FL`以下内容应该对此有所帮助：

```
alert(xmlDoc.getElementsByTagName("FL")[i].getAttribute('val')); 
```

我建议您使用 JavaScript 控制台，`console.log`而不是`alert`.

希望能帮助到你。祝你有美好的一天。

# objective-c - 如何更改 MPNowPlayingInfoCenter 的 nowPlayingInfo 保留旧图稿

> ID：11798473
> 
> 赞同：1
> 
> 时间：2012-08-03T15:13:13.337
> 
> 标签：objective-c, ios, mpnowplayinginfocenter

我注意到设置 new `nowPlayingInfo`of 会`[MPNowPlayingInfoCenter defaultCenter]`替换`MPMediaItemPropertyArtwork`每个新 perform 的值`setNowPlayingInfo:`。但是在标准的 iphone music.app 中并没有发生！那么如何设置`nowPlayingInfo`保留旧艺术品呢？

```
NSMutableDictionary *mediaInfo = [NSMutableDictionary dictionaryWithObjectsAndKeys:recording.releaseGroup.title, MPMediaItemPropertyAlbumTitle, recording.releaseGroup.artist.title, MPMediaItemPropertyArtist, recording.title, MPMediaItemPropertyTitle, recording.lyrics, MPMediaItemPropertyLyrics, itemsCount, MPMediaItemPropertyAlbumTrackCount, itemNumber, MPMediaItemPropertyAlbumTrackNumber, nil];

 self.artwork = [[[MPMediaItemArtwork alloc] initWithImage:_coverView.image] autorelease];

[mediaInfo setValue:_artwork forKey:MPMediaItemPropertyArtwork];

[[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:mediaInfo]; 
```

每次播放曲目更改时都会执行此块

# sql - 如果 SQL 中的字符串为 0，则返回空字符串

> ID：11798478
> 
> 赞同：1
> 
> 时间：2012-08-03T15:13:47.470
> 
> 标签：sql

如果说我这样做，我该怎么办：

```
SELECT name as "cname" from dba 
```

但是如果 name 的值为 '0' 我希望 cname 是 = 一个空的 "" 字符串。

我可以在标准 sql 中使用什么来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:15:41.967

您可以使用 CASE；

```
SELECT 
  case name when '0' then '' else name end as "cname" 
from dba 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:15:44.353

使用 case 语句：

```
SELECT CASE name WHEN '0' THEN '' ELSE name END AS cname from dba 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:15:40.580

使用 case 语句：

```
SELECT CASE WHEN name='0' THEN '' ELSE name END AS cname FROM dba 
```

# mybatis - MyBatis 将多列映射到一个数组

> ID：11798479
> 
> 赞同：3
> 
> 时间：2012-08-03T15:13:56.867
> 
> 标签：mybatis

我正在使用（旧版）java 应用程序和数据库，我需要将 MyBatis 多列映射到单个 Array 属性

我的查询类似于

```
select price1, price2, price3, qty1, qty2,qty3 ... from table where .... 
```

对应的pojo是

```
public class Price{
    double[] prices = new double[3]
    int[] quantity = new int[3]
    public double[] getPrices(){}
    public void setPrices(double[] prices){...}
    public int[] getQty(){...}
    public void setQty(int[] quantities){...}
    ....
} 
```

不幸的是，我既不能修改查询也不能修改 java 对象

任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:18:06.043

您也可以实现 BaseTypeHandler 接口，并在 getNullableResult 方法中为您提供 ResultSet 变量。因此，您可以轻松获取所需的所有列并将它们放入 Array。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T00:48:17.640

另一种选择是使用创建一个 ResultHandler，这是一个 MyBatis 接口，您可以将其传递给`SqlSession#select`方法来处理从查询返回的数据。

以下是如何使用它来解决您的问题。

首先定义一个 PriceResultHandler，如下所示：

```
import org.apache.ibatis.session.ResultContext;
import org.apache.ibatis.session.ResultHandler;

public class PriceResultHandler implements ResultHandler {

  // keep a list, assuming you have multiple Price objects to handle
  List<Price> lp = new ArrayList<Price>();

  @Override
  public void handleResult(ResultContext rc) {
    // the result object is map with column names mapped to values like so:
    // {price1=11.32, qty1=15500, price2=2.62, qty2=234, etc.}

    HashMap<?,?> m = (HashMap<?,?>) rc.getResultObject();
    Price p = new Price();
    double[] prices = new double[]{ ((Number)m.get("price1")).doubleValue(),
                                    ((Number)m.get("price2")).doubleValue(),
                                    ((Number)m.get("price3")).doubleValue() };
    int[] qty = new int[]{ ((Number)m.get("qty1")).intValue(),
                           ((Number)m.get("qty2")).intValue(),
                           ((Number)m.get("qty3")).intValue() };
    p.setPrices(prices);
    p.setQty(qty);
    lp.add(p);
  }

  public List<Price> getPrices() {
    return lp;
  } 
```

ResultHandler 接收 HashMap 的原因是您将像这样设置映射：

```
<select id="getPrices" resultType="hashmap">
  SELECT price1, price2, price3, qty1, qty2, qty3 
  FROM table 
  WHERE ...
</select> 
```

然后在 Java 代码中调用它，如下所示：

```
PriceResultHandler rh = new PriceResultHandler();
session.select("getPrices", rh);
// or
session.select("getPrices", arg, rh);
// where arg is a value to pass to the getPrices query mapping

Price p = rh.getPrices().get(0); 
```

这个模型与我在另一个答案中给出的另一个选项的工作量大致相同。MyBatis 只是简单地将 JDBC ResultSet 映射到一个 Map 中，然后你用它来创建你认为合适的域对象。

这种方法的一个警告是您必须处理地图中列名的区分大小写问题。你不能通过 MyBatis 来控制它。这取决于底层 JDBC 驱动程序的行为：[https ://stackoverflow.com/a/11732674/871012](https://stackoverflow.com/a/11732674/871012)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T13:56:47.370

你说你不能修改查询——如果这意味着你不能改变 SQL 但你可以改变你的 MyBatis 映射，那么我推荐使用 MyBatis ObjectFactory。您定义一个子类`DefaultObjectFactory`并覆盖该`create`方法。ObjectFactory 接收您在 MyBatis ResultMap 中指定为“构造函数参数”的参数。

您的 MyBatis 映射现在将指定价格字段是构造函数参数，即使它们不是真的。这只是将原始数据传递给您自己的处理程序/工厂的一种便捷方式。

```
<resultMap id="priceResultMap" type="Price">
  <constructor>
    <arg column="price1" javaType="double"/>
    <arg column="price2" javaType="double"/>
    <arg column="price3" javaType="double"/>
    <arg column="qty1" javaType="int"/>
    <arg column="qty2" javaType="int"/>
    <arg column="qty3" javaType="int"/>
  </constructor>
</resultMap>

<select id="getPrice" resultMap="priceResultMap">
  SELECT price1, price2, price3, qty1, qt2, qty3 ...
  FROM table 
  WHERE ...
</select> 
```

你覆盖 MyBatis 的默认 ObjectFactory，把它放在你的 mybatis config.xml 中：

```
<objectFactory type="net.foo.bar.PriceObjectFactory"/> 
```

然后 PriceObjectFactory 看起来像这样：

```
import org.apache.ibatis.reflection.factory.DefaultObjectFactory;

public class PriceObjectFactory extends DefaultObjectFactory {

  private static final long serialVersionUID = 3627013739044L;

  @Override
  public <T> T create(final Class<T> type, final List<Class<?>> ctorArgTypes,
                      final List<Object> ctorArgs) {
    if (type.equals(Price.class)) {
      return this.<T>createPrice(ctorArgs);
    } else {
      // let MyBatis handle the other object types as it normally does
      return super.<T>create(type, ctorArgTypes, ctorArgs);
    }
  }

  private <T> T createPrice(final List<Object> ctorArgs) {
    final int expSize = 6;
    if (ctorArgs.size() != expSize) {
      throw new IllegalArgumentException("Expected " + expSize +
                                         " ctor args for Price class");
    }

    // construct with no arg ctor
    final Price p = new Price();
    double[] prices = new double[]{ ((Number)ctorArgs.get(0)).doubleValue(), 
                                    ((Number)ctorArgs.get(1)).doubleValue(),
                                    ((Number)ctorArgs.get(2)).doubleValue()};
    int[] qty = new int[]{ ((Number)ctorArgs.get(3)).intValue(),
                           ((Number)ctorArgs.get(4)).intValue(),
                           ((Number)ctorArgs.get(5)).intValue() };
    p.setPrices(prices);
    p.setQty(qty);

    @SuppressWarnings("unchecked")
    final T t = (T) p;
    return t;
  }
} 
```

如果您还希望/需要为 Price 构造函数提供其他参数（如 id），则`<constructor>`在映射部分中指定这些参数，它也将被传递到您的 PriceObjectFactory。

# r - R中的grid.table（）条件格式

> ID：11798482
> 
> 赞同：3
> 
> 时间：2012-08-03T15:14:03.577
> 
> 标签：r

* * *

我正在查看这个[链接](http://code.google.com/p/gridextra/wiki/tableGrob)，它会生成一个网格表并进行文本格式化。有什么办法可以进行条件格式化吗？例如

1.  根据值设置背景颜色
2.  否则将负值显示为红色和蓝色

* * *

```
source("http://gridextra.googlecode.com/svn/trunk/inst/tableGrob2.r")
library(grid)

tc  = textConnection("
 carat   VeryLongWordIndeed color clarity depth
14513  1.35 Ideal     J     VS2  61.4
28685  0.30  Good     G    VVS1  64.0
50368  0.75 Ideal     F     SI2  59.2")
d = read.table(tc,head=T)
close(tc)
grid.newpage()
g = grid.table2(d)
grid.gedit(paste("cells-fill-",1,2,sep=""), gp=gpar(fill="red")) 
```

这按预期工作。但如果你有超过 10 行，它不会。它为多个单元格着色。例如

```
d<-do.call("rbind", replicate(10, d, simplify = FALSE))
grid.newpage()
g = grid.table2(d)
grid.gedit(paste("cells-fill-",1,2,sep=""), gp=gpar(fill="red")) 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:39:36.437

在早期版本的 grid.table 中有一种方法；不幸的是，它与后来的一些功能不兼容。我已将代码副本放在[`inst/tableGrob2.r`](https://raw.githubusercontent.com/baptiste/gridextra/master/inst/test/tableGrob2.r). 你可以试试，

```
library(grid)

 tc  = textConnection("
     carat   VeryLongWordIndeed color clarity depth
 14513  1.35 Ideal     J     VS2  61.4
 28685  0.30  Good     G    VVS1  64.0
 50368  0.75 Ideal     F     SI2  59.2")
 d = read.table(tc,head=T)
 close(tc)
 grid.newpage()
 g = grid.table2(d)
 grid.ls(g)
 grid.gedit("top-head-fill-(1|3|5)", gp=gpar(fill="red"))
 grid.gedit("cells-fill-.3", gp=gpar(fill="green"))
 grid.edit("cells-label-33", label=expression(alpha),gp=gpar(col="orange")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:22:16.247

我认为@baptiste 可能已经交换了 rows 和 columns 。在这里，我将第二行第一列设置为 2，然后构造一个测试并更改填充参数。我需要将行值放在第二位：

```
tc  = textConnection("
     carat   VeryLongWordIndeed color clarity depth
 14513  1.35 Ideal     J     VS2  61.4
 28685  2  Good     G    VVS1  64.0
 50368  0.75 Ideal     F     SI2  59.2")
 d = read.table(tc,head=T)
 close(tc)
 grid.newpage()
 g = grid.table2(d)
 grid.ls(g)
 grid.gedit("top-head-fill-(1|3|5)", gp=gpar(fill="red"))
 rc = which(d==2, arr.ind=TRUE); loc <- paste("cells-label-", rc[2], rc[1], sep="")
 rc; loc
#      row col
#28685   2   1
#[1] "cells-label-12"
 grid.edit(loc, label=expression(alpha), gp=gpar(col="orange")) 
```

“橙色”颜色出现在第二行第一列。您可能需要指定一个更好的示例，其中包括构建调色板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:08:57.070

@baptiste，为什么不能通过直接修改表格单元格gpar来自定义它们。'tableGrob' 生成的结构似乎是单独存储这些的。例如：

```
exTable <- tableGrob(head(iris))
exTable$lg$lgt[[42]]$gp 
```

显示该结构存储单元格 # 42 的“col”和“cex”值，但直接更改这些值，例如，

```
exTable$lg$lgt[[42]]$gp$col <- "red" 
```

似乎对输出没有任何影响。

```
grid.draw(exTable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T17:26:58.270

我也在尝试这种单独的颜色。当表格超过 10 列时，我找到了多种颜色填充的解决方案。

我将 grid.gedit(...) 错误地输入到 grid.edit(...)，然后表格被正确填充。

我不知道为什么，但至少它有效。

如果您知道为什么会这样，请分享您的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T14:58:54.657

我取了这个页面[tableGrob2](http://gridextra.googlecode.com/svn/trunk/inst/tableGrob2.r)上的代码并将 ...ii,jj... 的两个实例更改为 ...ii, ".", jj... 作为一种清楚地分隔行和列的方式。当行数超过 10 行时，这似乎可以解决问题。

# html - 如何根据变量更改选择默认值？

> ID：11798483
> 
> 赞同：0
> 
> 时间：2012-08-03T15:14:04.560
> 
> 标签：html, select, switch-statement

post lang 是根据用户的位置自动设置的，我想根据 post lang 将下拉菜单的值设置为语言。

这是我尝试使用但没有成功的代码：

```
 <label for="lang">Language</label>
 <select id="lang">
                    <? 
                        $_POST['lang'] = $lang;

                        switch ($lang) {
                        case "en":
                        $en = "selected";
                        break;
                        case "fr":
                        $fr ="selected";
                        break;
                    ?>                          

                    <option value="en" selected="<?$en?>">English</option>
                    <option value="fr" selected="<?$fr?>">Francais</option>
                    <option value="es" selected="<?$es?>">Español</option>
                    <option value="de" selected="<?$de?>">Deutsch</option>
                    <option value="chin_trad" selected="">Chinese Traditional</option>
                    <option value="chin_orig" selected="">Chinese Original</option>
                </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:18:54.697

我的偏好包括一些 JavaScript：

```
<select id="lang" data-default="<?=$lang?>">
    <option value="en">English</option>
    <option value="fr">Fran&ccedil;ais</option>
    <option value="es">Espa&ntilde;ol</option>
    ...
</select>

<script type="text/javascript">
    (function() {
        var sel = document.getElementsByTagName('select'), l = sel.length, i,
            def, opts, m, j;
        for( i=0; i<l; i++) {
            if( def = sel[i].getAttribute("data-default")) {
                opts = sel[i].options;
                m = opts.length;
                for( j=0; j<m; j++) {
                    if( opts[j].value == def) {
                        opts[j].selected = true;
                        break;
                    }
                }
                sels[i].removeAttribute("data-default");
            }
        }
    })();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:23:40.013

我已经评论并修复了您的代码，它应该可以工作（未经测试！）

```
<label for="lang">Language</label>
<select id="lang">
<?php // Don't use the shorthand notation!

// $_POST['lang'] = $lang;
// You're overwriting $_POST['lang']... should be:
$lang = $_POST['lang'];

switch ($lang) {
case "en": $en = "selected"; break;
case "fr": $fr ="selected"; break;
}
?>

    <!-- <option value="en" selected="<?$en?>">English</option> -->
    <!--                              ^^^^^^^ see below for fixed line -->
    <option value="en" selected="<?php echo $en; ?>">English</option>

    <!-- same for other options, adjusting the lang code -->

</select> 
```

# google-fusion-tables - gapi 客户端库实际上如何将返回的 oAuth 访问令牌与 Fusion Tables 一起使用？

> ID：11798488
> 
> 赞同：0
> 
> 时间：2012-08-03T15:14:10.950
> 
> 标签：google-fusion-tables

再次问候善良和仁慈的互联网人。

我正在阅读 Kathryn Hurley 关于将 OAuth 与 Fusion Tables 结合使用的文章（链接在这里：[OAuthandFusionTables](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)），并且还在研究 Odi 对我之前关于这个主题的问题的回答（链接在这里：[我以前的问题](https://stackoverflow.com/questions/11595122/google-fusion-table-api-v1-properly-composed-rest-format-to-post-an-update)），以及已阅读并重新阅读了 google-api-javascript-client 库参考（此处链接：[gapi 参考](https://code.google.com/p/google-api-javascript-client/wiki/ReferenceDocs)），但我仍然对 Fusion Tables、oAuth2.0 和 google-api-javascript-client 的明显行为感到非常困惑Google 提供的 Javascript API 示例中显示的库（此处链接：[Google Example Javascript gapi with Fusion Tables](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)）。

对于 Google Javascript API 示例：

A.) 为什么使用 gapi-client javascript 库进行表插入和更新的 Fusion Table oAuth 请求实际上不使用 sql 请求字符串中返回的 oAuth 令牌？

...或者换一种说法：B.) 当使用 google-api-javascript-client 库时，访问令牌有什么实际好处？...根据 Kathry Hurley 为“应用程序 2 -创建一个允许用户访问自己的 Fusion Table 数据的应用程序”？

...或者换一种说法：C.）浏览器会话和 Google Fusion Table 服务器之间的 https ssl 连接是否实际上是“授权”并允许访问？...这是某种类型的 ssl 连接（其中我真的不明白）......根本不是访问令牌允许访问，并且令牌只是一个返回的“标志”，表示使用gapi客户端时会话良好/连接/正常？

或者 D.) 我只是产生了幻觉吗？......并且没有正确看到 Javascript API 示例和/或 gapi 客户端库的内容？

以下是更多细节：

首先尝试 Javascript API 示例（此处再次链接：[Google Example Javascript gapi with Fusion Tables](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)）...这真的很好，对我来说理解起来很困难。

第二次尝试我对这个 API 示例的“hack”，它会引发一堆警报（这样我就可以跟踪正在发生的事情），并将 SQL 字符串写入屏幕：（链接在这里：[我的示例 hack Google gapi 示例](https://www.msa.saccounty.net/utilitybilling/streetview/TestjQueryMobile-FusionTablesv5-GooglesExample.aspx)）

从我对示例的修改中可以看出，对于“创建表”和“插入数据”，访问 authToken 不是提交给 Fusion Tables 的 sql 字符串的一部分：示例：

{"b":{"path":"/fusiontables/v1/query","method":"POST","params":{},"headers":{"Content-Type":"application/x- www-form-urlencoded","Content-Length":105},"body":"sql=INSERT%20INTO%201zkJhx0XdI3SsguI2Pided-m28mNSzI0MsMKNhY0%20(Name%2C%20Age)%20VALUES%20('test'%2C% 204)"}}

上述字符串中没有 auth 访问令牌。

但是根据 Kathry Hurley 的文章（关于 OAuth 2.0 和 Fusion Tables），以下是步骤，特别注意第 7 步：

0 注册您的应用程序

1 位用户访问您的 Web 应用程序

2 您的网络应用程序将用户重定向到 Google 授权页面

3 用户授予您的 Web 应用程序访问权限

4 Google 将用户重定向回您的 Web 应用程序并返回授权码

5 您的应用程序向 Google 请求访问令牌和刷新令牌 6 Google 返回访问令牌、刷新令牌和访问令牌到期

**7 访问令牌可用于对**Fusion Tables 的所有后续请求，直到令牌过期

8 当访问令牌过期时，刷新令牌用于请求新的访问令牌

上面的第 7 步似乎规定访问令牌用于后续请求。...并且提供的示例代码显示了包含的访问令牌：

```
urllib.urlencode({
      'sql': 'SHOW TABLES',
      'access_token': access_token
  }), 
```

Soooo ...我对 Google 示例中 gapi.client 库的明显行为的差异感到困惑（在执行插入或更新时，它显然没有在 sql 请求字符串上提交访问令牌）和写在访问 Fusion Tables 时应该如何提交访问身份验证令牌。

也许有些人可以提供一些启示？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:17:38.667

访问令牌很重要，它实际上用于验证后续请求，因此您只需执行一次（即直到令牌过期，即 1 小时后的情况）。

如果您自己发送请求，通过向[https://www.googleapis.com/fusiontables/v1/query](https://www.googleapis.com/fusiontables/v1/query)发送 HTTP POST 请求，您必须提供访问令牌作为参数。但这不是这里的情况，您通过 gapi-javascript 库发送令牌，该库为您处理 HTTP 内容。

但是那里的访问令牌呢？这很简单：一旦您使用该`gapi.auth.authorize()`方法进行身份验证（请参阅[Google gapi 示例](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)），该库会记住访问令牌并将其用于所有后续调用。您可以使用调试控制台检查这一点，并在`gapi.auth.getToken()`查看 Google 示例时输入：

![gapi 访问令牌的屏幕截图](../Images/a37254e3951683da8c804d2ac007c6af.png)

# ios - UILocalNotification如何在屏幕锁定时显示应用程序图标

> ID：11798490
> 
> 赞同：0
> 
> 时间：2012-08-03T15:14:13.000
> 
> 标签：ios, icons, uilocalnotification

我正在创建这样的本地通知：

```
UILocalNotification * notification = [[UILocalNotification alloc] init];
notification.alertBody = @"Alert body";
notification.alertAction = @"Yes";
notification.fireDate = [NSDate date];

[[UIApplication sharedApplication] presentLocalNotificationNow:notification]; 
```

如果它在手机锁定时出现，则只有在“滑动解锁”滑块之前显示的短信。我知道可以显示一些带有警报的图标。我的应用程序的图标大小为 57 x 57。有什么建议吗？

![Foursquare可以做到这一点](../Images/d16f8443e3e341d19eab9b044bac4d72.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:19:36.900

请仔细检查您是否真的为您的应用程序设置了完整的图标。

这是通用应用程序**的完整图标集列表：**

```
- 1024 by 1024 (Retina iTunes artwork)
- 512 by 512 (iTunes artwork)
- 144 by 144 (Retina iPad)
- 114 by 114 (Retina iPhone)
- 96 by 96 (Retina iPad Spotlight)
- 72 by 72 (iPad icon)
- 58 by 58 (Retina iPhone Spotlight)
- 57 by 57 (iPhone icon)
- 48 by 48 (iPad Spotlight)
- 29 by 29 (iPhone Spotlight) 
```

# git - Git repo 设置后不接受推送

> ID：11798493
> 
> 赞同：0
> 
> 时间：2012-08-03T15:14:23.153
> 
> 标签：git, version-control, repository

我在一个新的交钥匙版本控制服务器上创建并初始化了一个 git repo，并添加了带有 SSH 的远程。似乎也遵循了设置新仓库的所有正确步骤。我在 helloworld repo 旁边的 git web admin 中看到了它。下面是远程服务器的添加，然后是我尝试推送失败。

```
git remote add origin ssh://root@xxx.xx.xx.xx/git/projectName

git push origin master

fatal: "/git/project" does not appear to be a git repository

fatal: The remote end hung up unexpectedly 
```

我可以很好地与 helloworld 项目进行交互，但我确实注意到它似乎设置了我手动设置的项目没有的权限。这是否意味着我的回购没有完全建立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:36:18.293

您使用的网址不正确。它在那个地方找不到 git 存储库。

如果您创建了一个裸存储库，则需要将 .git 添加到其中（git 创建一个名为 .git 的目录。

```
git remote add origin ssh://root@xxx.xx.xx.xx/git/projectName.git 
```

# c++ - 类成员函数号的作用

> ID：11798494
> 
> 赞同：4
> 
> 时间：2012-08-03T15:14:24.130
> 
> 标签：c++

我的问题与 C++ 类定义有关。我知道如果类中存在许多成员变量。班级人数会增加。但是，增加类成员函数的数量不会影响其大小。但是，我想知道具有更多成员函数的类和具有更少成员函数的类之间的主要区别是什么。调用具有较少成员函数的类是否可能更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:18:24.267

您需要每个实例的空间来存储成员变量，但成员函数不是实例的一部分，至少不是直接的。每个附加的虚拟成员函数通常需要一个额外的指针，但该指针指向在类的所有实例之间共享的[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)，因此不会增加每个成员的大小。

非虚拟成员函数仅在代码内存中占用空间：它们的空间要求与独立函数没有什么不同，唯一的区别是用于传递指针的隐藏参数`this`。

添加到类的第一个虚函数会添加一个额外的指针，指向存储实例所需的空间；额外的非虚拟成员函数根本不会影响空间需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:17:33.573

不，唯一在这方面有任何区别的功能是虚拟功能，无论您有多少，它们都比通常的功能慢得多。在所有其他情况下，编译器确切地知道在调用特定函数时要运行什么代码，因此它不必进行任何搜索，方法的数量也无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:18:22.177

不，成员函数的数量对调用函数的速度没有影响（至少对于任何理智的实现）。对函数的任何调用都将被编译为设置函数参数的代码，然后使用调用指令。编译器在编译时解析函数的地址是什么，并在调用指令中使用它，或者使用虚函数，在表中查找要调用的地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:21:14.953

具有较少功能的类不会比具有更多功能的类更有效。

算法和 I/O 对函数效率的影响最大。

但是编译时间会受到影响。

# maven - 使用从远程存储库下载的 Maven 战争工件启动码头

> ID：11798495
> 
> 赞同：1
> 
> 时间：2012-08-03T15:14:24.333
> 
> 标签：maven, jetty

我试图弄清楚是否可以使用 maven 从存储库下载战争工件并使用 jetty 插件启动它。

原因是我希望我的一位客户通过获取我的 CI 服务器上传到我的公司 Maven 存储库的构建来自动使用我的一个项目的最新版本。

这可能吗？如果是...怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:27:44.863

我不知道码头插件是否可以，但货物插件绝对可以。

你可以配置 cargo 下载一个版本的 jetty 和你想要运行的 war 文件。这是我用来部署到 tomcat 的配置，但它不应该与码头所需的配置相差太大。我们甚至使用这种方式在同一个 tomcat 中部署多个战争。

我的做法是先下载war和tomcat（作为依赖），然后使用依赖插件解压war文件（这只是因为我添加了一些配置文件），然后告诉cargo从所在文件夹启动web应用我解压了战争。

```
 <dependency>
     <groupId>org.apache</groupId>
     <artifactId>tomcat</artifactId>
     <version>${tomcat.version}</version>
     <type>zip</type>
  </dependency>
[...]
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.4</version>
    <executions>
        <execution>
            <id>unpack war and configuration</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>war-group-id</groupId>
                        <artifactId>war-artifact-id</artifactId>
                        <version>version</version>
                        <type>war</type>
                        <overWrite>true</overWrite>
                        <outputDirectory>${project.build.directory}/war
                        </outputDirectory>
                    </artifactItem>
                </artifactItems>
                <includes>**/*</includes>
            </configuration>
        </execution>
    </executions>
</plugin>

<pluginManagement>
         <plugins>
            <plugin>
               <groupId>org.codehaus.cargo</groupId>
               <artifactId>cargo-maven2-plugin</artifactId>
               <configuration>

                  <container>
                     <containerId>tomcat6x</containerId>
                     <output>${project.build.directory}/logs/container.log</output>
                     <log>${project.build.directory}/logs/cargo.log</log>
                     <append>false</append>
                     <zipUrlInstaller>
                        <url>file:///${settings.localRepository}/org/apache/tomcat/${tomcat.version}/tomcat-${tomcat.version}.zip
                        </url>
                     </zipUrlInstaller>

                     <dependencies>
                        <dependency>
                           <groupId>com.oracle</groupId>
                           <artifactId>ojdbc6</artifactId>
                           <classpath>shared</classpath>
                        </dependency>
                     </dependencies>
                  </container>

                  <configuration>
                     <type>standalone</type>
                     <home>${project.build.directory}/tomcat6x</home>

                     <deployables>
                        <deployable>
                           <location>${project.build.directory}/war</location>
                           <type>war</type>
                           <properties>
                              <context>/context</context>
                           </properties>
                        </deployable>
                     </deployables>

                     <properties>
                        <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>
                        <cargo.rmi.port>${cargo.rmi.port}</cargo.rmi.port>
                        <cargo.tomcat.ajp.port>${cargo.tomcat.ajp.port}</cargo.tomcat.ajp.port>
                      </properties>

                  </configuration>
               </configuration>
            </plugin>
         </plugins>
      </pluginManagement> 
```

# asp.net - 将 MemoryCache 与 HostFileChangeMonitor init 一起使用到目录会得到 ArgumentOutOfRangeException

> ID：11798498
> 
> 赞同：5
> 
> 时间：2012-08-03T15:14:30.380
> 
> 标签：asp.net, memorycache

我正在使用 .NET 4 的 System.Runtime.Caching 中的 MemoryCache，并且我希望在目录更改时使缓存条目无效。

HostFileChangeMonitor 应该同时处理文件和目录，所以我像这样添加它：

```
var cacheItemPolicy = new CacheItemPolicy { SlidingExpiration = TimeSpan.FromMinutes(30) };
cacheItemPolicy.ChangeMonitors.Add(new HostFileChangeMonitor(new List<string> { folder })); 
```

但后来我得到一个例外：

```
System.ArgumentOutOfRangeException: The UTC time represented when the offset is applied must be between year 0 and 10,000. 
```

仅当我在 ASP.NET 网站中使用代码时才会发生这种情况。它可以在控制台应用程序内部正常工作。

我在 ms connect 上找到[了这个](http://connect.microsoft.com/VisualStudio/feedback/details/721523/using-system-runtime-caching-memorycache-with-hostfilechangemonitor-init-to-a-non-existing-file-gets-argumentoutofrangeexception)，但是我添加到 HostFileChangeMonitor 的目录存在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:46:47.843

To answer my own question:
it seems that 4.0 has a bug when adding Directories to the HostFileChangeMonitor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-04T08:19:54.700

即使在查看单个文件时，错误仍然存​​在。我们将 HostFileChangeMonitor 与仅包含一个文件的列表一起使用，并且我们客户端的生产服务器抛出此异常。我们推荐 MS 修复： https: [//support.microsoft.com/en-us/kb/2346777](https://support.microsoft.com/en-us/kb/2346777) 一旦我们确认错误消失，我会更新答案。

# mercurial - 为什么 TortoiseHG 不对 Bugzilla 发表评论

> ID：11798500
> 
> 赞同：1
> 
> 时间：2012-08-03T15:14:33.187
> 
> 标签：mercurial, tortoisehg, bugzilla, issue-tracking

我有一个已经运行了一段时间的 Bugzilla 系统，我最近开始使用 TortoiseHG ，我想使用 Bugzilla 扩展来更新评论。

[我已经按照 Mercurial 网站Here](http://mercurial.selenic.com/wiki/BugzillaExtension)设置了它， 但它没有发布到 bug。

这是我正在使用的 Mercurial.ini 的副本

```
# Generated by TortoiseHg settings dialog
[tortoisehg]
ui.language = en_GB
[ui]
merge = kdiff3
[extensions]
hgext.bugzilla = 
zeroconf = 

[hooks]
# run bugzilla hook on every change pulled or pushed in here
incoming.bugzilla = python:hgext.bugzilla.hook

[bugzilla]
# REQUIRED ITEMS:
host = http://192.168.10.33/bugtracker/ # mysql server where bugzilla database lives 
password = xxxxx   # user's password
version = 2.22.2  # version of bugzilla installed

# OPTIONAL ITEMS:
bzuser = peter.francis@xxx.com    # fallback bugzilla user name to record comments with
#   db = bugs       # database to connect to
#   notify = ...    # command to run to get bugzilla to send mail
regexp = [Bb]ug (\d+)   # regexp to match bug ids (must contain one "()" group)
#   strip = 0       # number of slashes to strip for url paths
#   style = ...     # style file to use when formatting comments
#   template = ...  # template to use when formatting comments
#   timeout = 5     # database connection timeout (seconds)
#   user = bugs     # user to connect to database as
#   [web]
#   baseurl = http://hgserver/... # root of hg web site for browsing commits 
```

有没有其他人这样做并可以提供建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:15:38.870

您不应该在`hgrc`您正在使用的存储库的文件中而不是在您的`mercurial.ini`?

# javascript - 绘制填字游戏网格的最快算法 ?

> ID：11798505
> 
> 赞同：10
> 
> 时间：2012-08-03T15:14:54.623
> 
> 标签：javascript, performance, algorithm, canvas

我正在渲染一个单元格网格，非常类似于您在填字游戏中找到的网格，但使用四种不同的颜色填充每个单元格（不仅是黑色或白色）。

网格大小约为 160x120，我需要尽可能快地渲染它，因为它将用于显示[元胞自动机](http://en.wikipedia.org/wiki/Cellular_automaton "元胞自动机")动画。

我尝试了两种不同的方法来渲染网格：

*   使用以下内容渲染每个单元格：

    ```
    var w = x + step;
    var h = y + step;
    canvasContext.fillStyle=cell.color;
    canvasContext.fillRect(x+1,y+1,w-1,h-1);
    canvasContext.strokeRect(x,y,w,h); 
    ```

*   渲染没有边框的所有单元格，然后使用以下方法渲染网格线：

    ```
    var XSteps = Math.floor(width/step);
    canvasContext.fillStyle = gridColor;
    for (var i = 0, len=XSteps; i<len; i++) {
        canvasContext.fillRect(i*step, 0, 1, height);
    }
    //Similar thing for Y coord 
    ```

两种算法都表现不佳：在这两种情况下，绘制网格都比绘制单元格慢。我错过了什么吗？如何优化这些算法？我应该尝试另一种方法吗？

注意：网格移动，因为用户可以移动它或缩放视图。

一般的问题是：在元素上绘制单元格网格的最快算法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T15:24:21.550

做某事最快的方法是根本不做。

在一个画布上画一次你不变的网格，然后在另一个画布上（或下）画（清除和重画）你的元胞自动机。让浏览器（在所有它的本机编译优化的荣耀中）为您处理脏污、重绘和合成。

或者（更好）如果您不打算更改网格大小，只需创建一个小图像并让 CSS 填充它作为背景。

### CSS 背景图像到 Canvas 的演示：http: [//jsfiddle.net/LdmFw/3/](http://jsfiddle.net/LdmFw/3/)

基于[这个优秀的演示](http://lea.verou.me/css3patterns/#blueprint-grid)，这是一个完全通过 CSS 创建的背景图像网格；有了这个，您可以根据需要更改大小（以整个像素为增量）。

### CSS3 Grid 到 Canvas 的演示：http: [//jsfiddle.net/LdmFw/5/](http://jsfiddle.net/LdmFw/5/)

如果你必须画一个网格，最快的就是画线：

```
function drawGrid(ctx,size){
  var w = ctx.canvas.width,
      h = ctx.canvas.height;
  ctx.beginPath();
  for (var x=0;x<=w;x+=size){
    ctx.moveTo(x-0.5,0);      // 0.5 offset so that 1px lines are crisp
    ctx.lineTo(x-0.5,h);
  }
  for (var y=0;y<=h;y+=size){
    ctx.moveTo(0,y-0.5);
    ctx.lineTo(w,y-0.5);
  }
  ctx.stroke();               // Only do this once, not inside the loops
} 
```

### 网格绘制演示：http: [//jsfiddle.net/QScAk/4/](http://jsfiddle.net/QScAk/4/)

对于*m*行和*n*列，这需要一次绘制*m* + *n行。*将此与绘制*m* × *n 个*单独的矩形进行对比，您可以看到性能差异可能非常显着。

*例如，一个 8×8 单元格的 512×512 网格在简单的情况下需要 4,096次调用，但使用上面的代码在**一次**`fillRect()`调用中只需要描边 128 行。 **`stroke()`***

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:24:29.133

如果不查看所有代码以了解性能的进展情况，真的很难提供帮助，但马上就要开始了：

*   您可以使用一次调用drawImage 来绘制背景网格，而不是使用描边绘制背景网格吗？那会快得多。如果它真的是静态的，那么您可以`background-image`将画布上的 CSS 设置为您想要的网格图像。
*   您经常使用 fillRect 和 strokeRect ，它们可能会被多次调用`rect()`（路径命令）替换，最后只有一次调用`fill`。因此，所有填充的单元格都使用单个填充（或描边或两者）命令一次呈现。
*   尽可能少地设置fillStyle/strokeStyle（如果可以避免的话，不要在循环内）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T15:29:15.593

您正在使用填充来绘制线条；我认为，定义一条路径并描边它会更快：

```
canvasContext.beginPath();
var XSteps = Math.floor(width / step);
canvasContext.fillStyle = gridColor;
var x = 0;
for (var i = 0, len = XSteps; i < len; i++) {
   canvasContext.moveTo(x, 0);
   canvasContext.lineTo(x, height);
   x += step;
}
// similar for y
canvasContext.stroke(); 
```**

# c - “C or gcc”就像“鸡还是蛋”？:(

> ID：11798506
> 
> 赞同：2
> 
> 时间：2012-08-03T15:14:54.527
> 
> 标签：c, glibc

> **可能重复：**
> [gcc/g++ 是如何引导的？](https://stackoverflow.com/questions/9429491/how-are-gcc-g-bootstrapped)

我想知道 gcc 是如何编译的，因为我们都知道它是用 C 编写的。

他们是否使用其他一些编译器来提出 gcc？

如果是这样，我可以使用相同的编译器来编译我的 C 程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:19:51.193

这里没有鸡和蛋。glibc 是使用您正在使用的编译器编译的。

该编译器首先使用同一编译器的先前版本进行编译。然后它也可以自己编译。

真正的先有鸡还是先有蛋的问题在 1950 年代解决了，当时有人不得不编写世界上第一个编译器。之后，您可以使用一个编译器来编译下一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:53:17.060

There are two basic ways to build a new compiler:

1.  If you're writing a new compiler for an established language like C, use an existing compiler from a different vendor to build your new compiler. For example, you could use the C compiler shipped with HP-UX to build `gcc`.

2.  If you're writing a compiler for a new language, start by implementing a very simple compiler in a different language (the first C compiler was written in PDP-11 assembler). This initial compiler will only recognize a small subset of the target language; basically enough to do some file I/O and some simple statements. Write a new compiler in the target language subset and build it with your first compiler. Now write a slightly more capable compiler that can recognize a larger subset of the target language, and build it with the second compiler. Repeat the process until you have a compiler capable of recognizing the full target language.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:18:18.910

他们没有使用其他编译器。您可以编写一个不使用 glibc 的 C 程序，只需告诉编译器不要使用它。所以是这样的：

```
gcc main.c -nostdlib 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T16:35:48.413

这是个有趣的问题。我想你想知道用什么语言编写新语言的编译器，不是吗？好吧，如果我们只有汇编语言（例如 x86），那么编写 C 编译器的唯一方法就是使用汇编语言。后来，我们可以使用我们的汇编编写的编译器，用 C 语言编写一个更好、更强大的编译器，等等…… 问题出现了：早期的程序员是如何编写第一个汇编编译器的？我父亲告诉我：通过手动输入 1 和 0！:-)

# c# - 按 Enter 键在文本框中格式化数字

> ID：11798511
> 
> 赞同：0
> 
> 时间：2012-08-03T15:15:24.027
> 
> 标签：c#, winforms, linq-to-sql, textbox, formatting

在 Windows 窗体中，我有一个输入金额的文本框，例如我会输入 18369.25 然后按 Enter 键，文本框应格式化为：18 369,25
怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:27:13.913

使用类似于以下的事件处理程序订阅文本框的 KeyPress 事件：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == '\r')
    {
        decimal value;
        if (decimal.TryParse(
            textBox1.Text,
            NumberStyles.Any,
            CultureInfo.InvariantCulture,
            out value))
        {
            textBox1.Text = value.ToString(
                "### ### ##0.00",
                CultureInfo.InvariantCulture).TrimStart().Replace(".", ",");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:55:32.927

我做了一些实验，但似乎没有一个有效。所以我提出了这个解决方案。我知道它不是最好的，但至少它可以工作（至少你需要的）：

```
 private void textBox1_KeyUp(object sender, KeyEventArgs e)        
    {
        if (e.KeyCode == Keys.Enter)
        {
            string s = textBox1.Text;
            if (s.Contains('.'))
            {
                string[] arr = s.Split('.');
                decimal dec = decimal.Parse(arr[0]);
                textBox1.Text = string.Format("{0},{1}", dec.ToString("## ###"), arr[1]);
            }
        }
    } 
```

如果您有任何其他要求，请告诉我。再见

# excel - Excel筛选列不同的地方

> ID：11798512
> 
> 赞同：0
> 
> 时间：2012-08-03T15:15:27.157
> 
> 标签：excel, filter

我在 Excel 工作表中有两列。我想过滤两列不同的地方。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:50:33.017

or even more simply put this in the third column

```
=A1=B1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:51:02.590

You could add a calculated column like =A2=B2 and filter for FALSE on that column.

Here's an alternative that only requires formatting the differences...

1) Select the two columns you want to compare and press `[Ctrl+\]` (or *goto special|row differences*). If you want to remove the column heading from the selection press `[Ctrl+Shift+\]` (or *goto special|column differences*). See example below

![enter image description here](../Images/4b17571c2ad8fea9c050d1791d55243d.png) ![enter image description here](../Images/ba3854709f329cb0d99dfcaa759b1a0f.png)

2) Format the selected cells with a font color then right-click the selected cell and choose *Filter > Filter by selected cell's font color*:

![enter image description here](../Images/844f4db18a07589b191524a2eaaa91bf.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:45:16.833

Put this in a third column

```
 =if(A1=B1,1,0) 
```

filter where that thridcolumn=0

# php - 让每个用户更新自己的个人资料，在他们的仪表板上添加技能

> ID：11798514
> 
> 赞同：0
> 
> 时间：2012-08-03T15:15:37.210
> 
> 标签：php, dashboard

我正在寻求帮助来创建一个用户能够通过上传他们的图像并添加他们的技能来更新他们的个人资料的环境。我已经设置了用户注册表单，每个用户在登录后都会看到相同的页面。这些页面显示给所有用户访问受控页面（仅在登录时可见）。一切都是使用 PHP 完成的。

一旦用户登录它就会显示 - 以“用户”身份登录，以便用户看到他们已登录。我创建了一些类似的访问控制页面。

我希望每个用户都能够使用简单的个人资料图片和他们的技能来更新他们自己的个人资料，例如`html`, `writing`,`web coding`等。如何为每个注册用户实现这一点？

我将为该站点添加许多能够管理自己的仪表板的用户。

最好的示例站点是 oDesk 或 elance，用户可以在其中更新他们的技能，并且可以由管理员查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:23:14.977

**更新评论我成功地为登录后为用户设置的几个页面整理了用户识别的问题。**

您肯定需要一个数据库来保存每个用户的信息。开始研究 MySQL 服务器，一旦你完成了一个设置，就按照[php mysqli](http://www.php.net/manual/en/intro.mysqli.php)和[php form](http://www.w3schools.com/php/php_forms.asp)的一些教程进行操作。以下内容非常粗略，但它应该让您了解如何解决您的问题。**祝你好运！**

**索引.html**

```
<form action="addSkills.php" method="post">
 <input type="text" name="skill"/>
 <input type="submit">
</form> 
```

**addSkills.php**

```
$skill = $_POST['skill'];

$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
$result = $mysqli->query("INSERT INTO user (skill) VALUES('$skill') WHERE userId = $_COOKIE['userId']")
$result->close();
$mysqli->close(); 
```

这是一项艰巨的任务，您应该尝试将其分成任务并尝试一次处理每个任务。一个开始的地方将能够从页面 a 导航到页面 b 并且仍然被识别为已登录，一旦您这样做查看表单并提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:31:53.587

我知道你从哪里开始在 PHP 中简单地执行此操作，但为了充分利用你的时间，我建议使用 Joomla 之类的框架。Joomla 是用 PHP 编写的，您甚至可以找到许多免费的 Joomla 扩展，因此您甚至可能不必自己编写任何代码或很少编写任何代码。我对 Joomla 所做的是将它用作框架，寻找扩展，然后在需要时编写自己的。

joomla.org

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:18:48.983

你在正确的轨道上。您需要某种方式来识别在该页面上提交表单的用户（因为他们已“登录”，您应该已经将其作为`$_SESSION`或`$_COOKIE`变量提供。

然后，您只需获取该信息并在您的数据库中插入或更新他们的个人资料。

# mahout - mahout 品味：支持 set/removePreference 的内存中 DataModel

> ID：11798522
> 
> 赞同：3
> 
> 时间：2012-08-03T15:15:46.813
> 
> 标签：mahout, recommendation-engine

我找不到支持 setPreference / removePreference / refresh 的内存中 DataModel。相反，只要添加或删除首选项，它们都会“重新创建”一个新的 GenericDataModel。我错过了什么吗？我要自己建造吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T04:33:12.407

你没有错过任何东西；他们通常不支持此操作。我想总体思路是更改数据意味着重新计算许多其他事情，因此应该通过一些基础数据源的批量重新加载来实现。

# php - PHP 网络代理或网站转发

> ID：11798523
> 
> 赞同：0
> 
> 时间：2012-08-03T15:15:49.600
> 
> 标签：php, web-applications

大家好！我在访问 facebook 等网站时遇到了一些问题，所以我需要使用 PHP 的 Web 代理。我已经寻找了许多开源网络代理，但我更喜欢自己编写。我想做这个：

```
http://www.mysite.com/facebook (which is located in remote server)
should open http://www.facebook.com ,
but it should not just open it,
the requests must be done using IP address of remote server. 
```

我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:26:17.547

我认为这将有助于 zend2.com

facebook 使用 SSL 连接，因为某些 php 代理无法访问 facebook

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:31:14.940

尝试使用函数 fsock。您可以从这个简单的代理 [http://sourceforge.net/projects/poxy/中学习](http://sourceforge.net/projects/poxy/)

# asp.net - “System.Web.UI.ITemplate”不包含“FindControl”的定义

> ID：11798524
> 
> 赞同：0
> 
> 时间：2012-08-03T15:15:53.973
> 
> 标签：asp.net

我试图在 LoginView LoggedIn 模板中获取 LoginName 控件，尽管有几种方法，但代码仍然无法工作。

我希望将默认用户名更改为客户名称。我尝试在 LoggedInTemplate 中找到控件，但出现此错误：

```
 'System.Web.UI.ITemplate' does not contain a definition for 'FindControl' and no extension method 'FindControl' accepting a first argument of type 'System.Web.UI.ITemplate' could be found (are you missing a using directive or an assembly reference? 
```

这是代码：

```
 <asp:LoginView ID="LoginView1" runat="server">
   <LoggedInTemplate> 

                 Hello, <asp:LoginName ID="LoginName1" runat="server"></asp:LoginName>

                 <br /> 

                 <div style="text-align: right; margin-right: 5px "> 
                <asp:LoginStatus ID="LoginStatus1" runat="server" LogoutPageUrl="~/Home.aspx" Font-Underline="True" />
                </div></div>
        </LoggedInTemplate>

    </asp:LoginView> 
```

后面的代码：

```
protected void Login1_LoggedIn(object sender, EventArgs e)
    {

        LoginName loginName = LoginView1.LoggedInTemplate.FindControl("LoginName1") as LoginName;
       // LoginName loginName = LoginView1.FindControl("LoginName1") as LoginName;

       // loginName.FormatString = fullName;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:01:42.910

这应该可以正常工作（这是您的注释代码）：

```
LoginName loginName = LoginView1.FindControl("LoginName1") as LoginName;
loginName.FormatString = fullName; 
```

我认为您的问题是您从未使用过 Login1_LoggedIn 方法。尝试在您的方法中添加断点，开始调试并查看它是否命中。

# c# - SQLite 和一个 C# 程序

> ID：11798526
> 
> 赞同：1
> 
> 时间：2012-08-03T15:15:57.367
> 
> 标签：c#, sqlite

我喜欢为我的程序使用数据库，我遇到了 SQLite。

乍一看，SQLite 看起来很棒。但只有一件事。

我不希望用户必须安装 SQLite 才能运行该程序。

现在我看到我可以下载它的源代码了。

所以我对你们的问题是......我可以将 SQLite 服务器编译到我的程序中，然后像平常一样使用服务器吗？当你停止程序时，服务器也会停止？？？这可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:22:24.163

SQLite 不使用服务器，它只是一个 DLL 引用和共享文件格式。这是您尝试做的事情的最佳选择。

检查这个库：[http](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki) ://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki，http : [//sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:22:54.607

没有像`SqLite`服务器这样的概念。

对于部署`SqLite`到客户端计算机，部署`C#`驱动程序以能够连接到该数据库（您可以从[此处](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)下载它们）和数据库文件本身（以防您不在运行时创建它）就足够了。

换句话说，没有要安装的东西，也没有要启动的服务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T15:19:08.707

您正在寻找的是“嵌入式数据库”。
可以嵌入 SQL Server Express，因此您的用户无需安装服务器。他们只需要数据文件。

# asp.net - 我们想从 Checkboxlist 切换到常规复选框

> ID：11798531
> 
> 赞同：0
> 
> 时间：2012-08-03T15:16:39.450
> 
> 标签：asp.net, vb.net

最初，我们在标记页面上有一个复选框列表控件，ID="recs"

在该标记上，我们选中所有/取消选中所有复选框。这样，用户可以选中一个或多个复选框。

我们可以使用以下代码获取复选框的值：

```
Protected Sub btnGetCheck_Click(ByVal sender As Object, ByVal e As EventArgs)

    Thread.Sleep(9000)

    Dim uItems As String = ""
    For i As Integer = 0 To recs.Items.Count - 1
        If recs.Items(i).Selected Then
            If uItems <> "" Then uItems = uItems & ","
            uItems = uItems & _
                "You checked" & recs.Items(i).Text & "from the db"

        End If
    Next
    Response.Redirect("sendto.aspx?p=" & Server.UrlEncode(uItems))
End Sub 
```

这对我们来说非常有效。

然而，今天早上，我们被要求在标记中添加更多列。事实证明这是不可能的。

我们决定使用 gridview 从复选框列表切换到复选框。

我将不胜感激协助重写上述代码以从 gridview 的复选框中获取选中的项目。

Gridview 代码片段如下。

```
<asp:GridView ID="GridView1" runat="server"  HeaderStyle-CssClass = "header"
    AutoGenerateColumns = "false" Font-Names = "Arial"  OnRowDataBound = "RowDataBound"
    Font-Size = "11pt" AlternatingRowStyle-BackColor = "#C2D69B" >
   <Columns>
    <asp:TemplateField>
        <HeaderTemplate>
            <asp:CheckBox ID="checkAll" runat="server" onclick = "checkAll(this);" />
        </HeaderTemplate> 
       <ItemTemplate>
           <asp:CheckBox ID="recs" runat="server" onclick = "Check_Click(this)" />
       </ItemTemplate> 
    </asp:TemplateField> 
    <asp:BoundField ItemStyle-Width = "150px" DataField = "custid" HeaderText = "Customer ID" />
    <asp:BoundField ItemStyle-Width = "150px" DataField = "firstname" HeaderText = "First Name" />
    <asp:BoundField ItemStyle-Width = "150px" DataField = "lastname" HeaderText = "Last Name"/>
    <asp:BoundField ItemStyle-Width = "150px" DataField = "os"  HeaderText = "OS"/>
   </Columns> 
</asp:GridView>
       <asp:Button ID="btnGetCheck" runat="server" Text="Get Checked Items" onclick="btnGetCheck_Click" /><br />

Dim uItems As String = String.Empty

        For Each r As GridViewRow In GridView1.Rows

            If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then

                If uItems <> String.Empty Then

                    uItems += ","

                End If

                uItems += "You checked " & CType(r.Cells(1).FindControl("recs"), CheckBox).Text & " from the db."
                Response.Write(uItems)
                Response.End()

            End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:46:38.710

遍历 GridView 的行并使用 FindControl 方法获取对复选框的引用。

```
Dim uItems As String = String.Empty

For Each r As GridViewRow In GridView1.Rows

    If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then

        If uItems <> String.Empty Then

            uItems += ","

        End If

        uItems += "You checked " & CType(r.Cells(0).FindControl("recs"), CheckBox).Text & " from the db."

    End If

Next 
```

# android - 有没有办法避免 AVD 开始屏幕？

> ID：11798532
> 
> 赞同：1
> 
> 时间：2012-08-03T15:16:42.373
> 
> 标签：android

默认情况下，当您启动 AVD 时，您需要长时间观看一个显示“Android”的启动屏幕，有没有办法避免它？编写或删除一个简单的命令行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:34:03.647

可以将模拟器的状态保存到快照并在下次启动时从中加载。这样，启动时间会大大缩短，尽管没有完全消除。但是，请注意，模拟器将处于与您上次关闭时相同的状态，以及所有正在运行的进程等。

要在 AVD 上启用快照（如果在 Eclipse 中使用 AVD 管理器）：选择一个设备，按 Edit 并在 Snapshots 下选择 Enable（它大致位于窗口中间）。
之后，如果您按开始，您将看到选项加载自和保存到快照已启用以供选择。

第一次执行此操作时，它必须以通常的方式启动（因为没有可用的快照），但下次启动时，如果使用快照，您应该会看到速度加快。

您可以选择是让它完全启动还是只在每次运行设备时根据自己的意愿从快照中运行。

# objective-c - 从文档目录Objective-c读取文件

> ID：11798537
> 
> 赞同：0
> 
> 时间：2012-08-03T15:16:52.260
> 
> 标签：objective-c, filepath

我将文件写入应用程序的文档目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // the path to write file
    NSString *file = [documentsDirectory stringByAppendingPathComponent:@"data.json"];

    [responseString writeToFile:file atomically:YES]; 
```

但是我怎样才能访问该文件？

我的代码如下所示：

```
NSString *filePath = [[NSFileManager defaultManager] pathForRessorce: @"data" ofType:@"JSON"];

    NSString *fileContent = [[NSString alloc] initWithContentsOfFile:filePath]; 

    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil]; 
```

文件路径未填充...有人可以给我一个提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:22:49.220

您正在从资源文件夹中读取，而不是从文档目录中读取。您需要以`filePath`与写作期间相同的方式进行填充。那是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"data.json"];
NSString *fileContent = [[NSString alloc] initWithContentsOfFile:filePath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-17T09:06:55.423

“initwithcontentsofffile 已弃用”警告

所以而不是：

```
NSString *fileContent = [[NSString alloc] initWithContentsOfFile:filePath]; 
```

利用：

```
NSString *userInfoFileContent = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&error]; 
```

# java - 要在 PC 中制作中心化数据库并使用 java 应用程序通过互联网访问它，我必须知道什么知识？

> ID：11798541
> 
> 赞同：0
> 
> 时间：2012-08-03T15:17:06.067
> 
> 标签：java, mysql, database, centralized

我想在像服务器一样的 PC 中制作集中式 MySQL DB，并使用 java 应用程序通过互联网对其进行操作。

我已经学习了 MySQL 和 java，但我无法达到我想要的。

我必须知道什么知识才能做到这一点？

关于我的项目的一些详细描述：

我在社区工作，担任数据管理员，有很多活动。在每个活动中，都有许多客户和工作人员处理此活动。我有一个团队合作，每个活动都有一个数据团队成员负责（输入数据、更新、制作报告）。我们用 MS Excel 完成了所有这些，但是数据在增加，我无法管理它。

所以我想制作一个程序来帮助我管理所有这些数据，但是我们需要一个数据库来保存这些数据，而不是很多数据库，将它联合起来，每个人都可以在家工作。

所以，我需要一些参考教程和书籍来制作这个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:24:25.590

Web 应用程序可以解决您的问题。

为此，您需要知道如何配置和使用像 JBoss 这样的服务器。此外，您将需要 servlet 或一些 mvc 框架，例如 spring。有很多可能性；听起来你应该找一个可以为你做这件事的人。

# pdf - 从 python3 生成 PDF 的更好方法

> ID：11798542
> 
> 赞同：0
> 
> 时间：2012-08-03T15:17:13.877
> 
> 标签：pdf, python-3.x, pyqt, reporting

我的应用程序正在使用 PyQt4 和 Python3（我不知道如何将其反向移植到 python2.7）。我需要导出 PDF 并打印到纸上。由于 ReportLab 和 POD 都支持 python3，我对报告工具的搜索无处可去。不知何故，我设法用这种……麻烦创建了 PDF 文件。

```
tekstStampa = (str("%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%sIme stranke:     %s%sBroj predmeta: %s%sSudski broj:      %s%s%sPredmet otvoren: %s%sDatum rasprave:  %s u %s sati%s%sStatus stranke:    %s%sStatus predmeta: %s%sTip postupka:       %s%sVrednost spora:   %s dinara.%s%sSud:                      %s%sSudska jedinica:   %s%sSudija:                  %s%s%sNapomena: %s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s" %
            (zaglavlje1,'<br>',zaglavlje2,'<br>',zaglavlje3,'<br>',zaglavlje4,'<br>','<br>',
            linija,'<br>','<br>','<br>',prazno50,zaglavlje5,brPredmeta,'<br>',prazno51,'<font size="1">datum štampanja: ',datumStampe,'</font><br>','<br>',
            tempime, '<br>',brPredmeta,'<br>', tempsudskibr,'<br>','<br>',
            tempdatumtuzba, '<br>', tempdatumRas,tempvreme,'<br>','<br>',
            tempstatusstr,'<br>',tempstatusPredmeta,'<br>',temptip,'<br>',tempvrednost,'<br>','<br>',
            tempsud,'<br>',tempsudska,'<br>',tempsudija,'<br>','<br>',
            '<br>',tempnapomena,'<br>','<br>',
            linija, '<br>', '<br>',futer1,'<br>',
            futer2,'<br>',
            futer3,'<br>',
            futer4,'<br>',
            futer5,'<br>',)))

            self.ui.textStampa.setHtml(str(tekstStampa).replace('\\n','\r')) 
```

如您所见，它非常混乱，但输出看起来可以接受。不太好，只能接受。[例子](http://ge.tt/99iWiaK/v/0)

现在，我需要生成这样的[东西](http://ge.tt/9g2vvTL/v/0)。列应放置在固定位置，列宽是预先确定的。行是从列表中生成的，列表是从数据库中查询的。查询很好，我可以获取数据，但是页面格式正在杀死我。

我曾尝试使用 HTML 标签（即预格式化文本的 PRE，但它看起来很难看）但我无法完成我想要的。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:13:38.360

```
for tuple in sviaktivni: # extract variables from list of tuples
            tempid,ime,brPredmeta,statusStr,sudskiBr ,sudija ,datumRasprave, vreme, zaduzen,datumZaduzenja = tuple
            brojac +=1
            tekst = ('<html><head><title></title>' #variable which contains HTML tables
                        '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>'
                        '<style></style>'
                        '</head>'
                        '<body>'
                            '<table align ="center" border="0" width="100%" style="table-layout:fixed">'
                                '<tr height="10%">'
                                        '<td  align="left" width="3%">'+str(brojac)+' </td>'
                                        '<td  align="left" width="15%">'+ime+' </td>'
                                        '<td  align="left" width="10%"> '+brPredmeta+' </td>'
                                        '<td  align="left" width="10%"> '+statusStr+' </td>'
                                        '<td  align="left" width="10%"> '+sudskiBr+' </td>'
                                        '<td  align="left" width="18%"> '+sudija+' </td>'
                                        '<td  align="left" width="15%"> '+zaduzen+' </td>'
                                        '<td  align="left"> '+datumZaduzenja+' </td>'
                                    '</tr>'
                            '</table>'
                        '</body>'
                    '</html>')

            self.ui.textStampa.append(tekst) #append with every iteration 
```

# javascript - jQuery.validate - valid() 意外失败

> ID：11798543
> 
> 赞同：2
> 
> 时间：2012-08-03T15:17:15.190
> 
> 标签：javascript, jquery, jquery-validate

我正在使用 jQuery 验证插件。我有这个代码：

```
$(".btn-overview-basic-save").click(function(e) {
    if (!$('.contact-overview').valid()) {
    } else {
        alert("invalid")
    } 
```

而且由于某种原因，我收到了无效警报，即使表格已填写，并且没有显示任何错误或错误标记。我注释掉了我所有的规则，我仍然明白。我尝试添加：

```
errorPlacement: function ($error, $element) {
    console.log("error", $error, $element);
} 
```

但是我的控制台中没有显示任何内容。

如果没有获取验证插件的非缩小版本并单步执行，那么找出这里发生了什么的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:25:10.777

我认为这只是一些向后逻辑的情况。你错过了`!`前面的`.valid()`吗？

```
if (! $('.contact-overview').valid()) //if it is not valid
{
      //Handle INVALID logic here
} 
else  //if it is valid
{
    alert("invalid")  //handle VALID logic here. Wait...
} 
```

删除`!`也许？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:34:34.190

这里`if (!$('.contact-overview').valid())`应该 `if ( $('.contact-overview').valid() )`没有 问题**！**

```
$(".btn-overview-basic-save").click(function(e) {
    if ( $('.contact-overview').valid() ) {
    } else {
        alert("invalid")
    } 
```

# css - 右侧的 Twitter Bootstrap 缩略图标题

> ID：11798545
> 
> 赞同：12
> 
> 时间：2012-08-03T15:17:18.783
> 
> 标签：css, twitter-bootstrap, thumbnails, caption

如何将 Twitter Bootstrap 缩略图的标题放置在图像的右侧而不是下方？最好在 CSS 中。到目前为止，我只是使用现有的标签，因为我的 css 知识非常有限。

```
<ul class="thumbnails">
  <li class="span2">
    <div class="thumbnail span4">
  <div class="span2">
        <img src="http://placehold.it/120x160" alt="">
      </div>
      <div class="caption">
        <h5>Thumbnail label </h5>
        <p>Cras justo odio, dapibus ac facilisis in, egestas eget. Eget metus</p>
        <p><a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
      </div>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T16:27:54.067

稍微修改一下您的 HTML，并添加一个新类 ( `right-caption`)，一些 CSS 规则应该涵盖您。

## HTML

```
<div class="thumbnail right-caption span4">
  <img src="http://placehold.it/120x160" alt="">
  <div class="caption">
    <h5>Thumbnail label</h5>
    <p>Cras justo odio, dapibus ac facilisis in, egestas eget. Eget metus</p>
    <p><a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
  </div>
</div> 
```

**注意：**我正在取出`<img>`你`<div>`最初包裹它的东西。

## CSS

```
.thumbnail.right-caption > img {
    float: left;
    margin-right: 9px;
}

.thumbnail.right-caption {
    float: left;
}

.thumbnail.right-caption > .caption {
    padding: 4px;
}
​ 
```

**注意：**边距和内边距只是风格；*浮动是关键*。

### [JSFiddle](http://jsfiddle.net/y4XRR/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-17T10:29:32.413

没有额外的CSS。如果需要，将 a/span 标签更改为 div

```
<a href="..." class="thumbnail clearfix">
  <img src="..." class="pull-left">
    <span class="caption pull-right">
    Lorem ipsum
   </span>
  </a> 
```

# xamarin.ios - 我可以让 MonoDevelop 在 Retina 显示器上看起来不错吗？

> ID：11798550
> 
> 赞同：19
> 
> 时间：2012-08-03T15:17:38.740
> 
> 标签：xamarin.ios, monodevelop, retina-display, gtk#, xamarin

我买了一台新的 Retina MacBook Pro，用 MonoTouch 为 iOS 开发。
非常令人沮丧的是，可能是因为它是基于 Gtk# 构建的，MonoDevelop 非常模糊。

![视网膜显示屏上的 MonoDevelop 模糊](../Images/7640141aba56c727858224df2e2eda20.png)

我可以应付模糊的用户界面，但我无法阅读或编写代码，因为它伤害了我的眼睛。

Gtk# 和 MonoDevelop 中 Retina 支持的当前状态是什么？
是否有任何（实验性）编译标志至少可以启用正确的代码渲染？

如果我想贡献，哪个组件负责这个？是 Gtk# 还是 Gtk 本身？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T15:41:48.850

### 更新

这已从[MonoDevelop 3.0.4](http://monodevelop.com/Download/What%27s_new_in_MonoDevelop_3.0.4)开始修复：

> 其他改进和错误修复
> 
> *   修复了带有视网膜显示的 MacBook 上的渲染

所以去[下载吧](http://monodevelop.com/Download/What%27s_new_in_MonoDevelop_3.0.4)。

### 旧版本（以及其他应用程序）的解决方法

我用于 WebStorm的[临时解决方法效果很好。](http://youtrack.jetbrains.com/issue/IDEA-87500#comment=27-346931)它也应该适用于 MonoDevelop。

在 Xamarin 人员获得 MonoDevelop 的更新之前，您可以同时使用它。
它是这样的：

1.  在 Applications 中找到 MonoDevelop 并单击**Show Package Contents**

![在此处输入图像描述](../Images/ef30830f242cd4fd16b69d6e4757aaa6.png)

2.  `Contents/Info.plist`在任何编辑器中打开并在打开后添加`<dict>`：

    ```
    <key>NSHighResolutionCapable</key>
    <true/> 
    ```

3.  复制并粘贴 MonoDevelop 应用程序包，删除旧应用程序包并将新应用程序包重命名为 MonoDevelop。这将刷新系统缓存。

您会注意到 MonoDevelop.app 信息现在未选中低分辨率选项，并且代码呈现平滑。

![在此处输入图像描述](../Images/fabeab5296c88ed501aebba99eda8eca.png)

# linux - 新贵无法初始化 gunicorn 服务器

> ID：11798551
> 
> 赞同：1
> 
> 时间：2012-08-03T15:17:44.463
> 
> 标签：linux, ubuntu, webserver, gunicorn, upstart

我正在尝试启动运行 gunicorn 的服务器实例。这是我的新贵脚本：

```
 expect daemon

 script
     cd /opt/app/live/srv/poi_proxy
     exec /usr/local/bin/gunicorn server:app -c /etc/gunicorn.conf
 end script 
```

这是 gunicorn 配置文件：

```
 bind =  '0.0.0.0:80'
 workers = 3
 worker_class = 'gevent' 
```

我遇到的问题是，通过命令提示符运行命令时，服务器启动没有问题。但是，当使用 upstart 脚本时，它会为每个子进程生成一个已失效的进程。

我也相信路径必须与它做一些事情。如果我通过命令行启动服务器时：

```
 cd /opt/app/live/srv/poi_proxy
 sudo /usr/local/bin/gunicorn server:app -c /etc/gunicorn.conf 
```

它工作正常，但是：

```
 sudo /usr/local/bin/gunicorn /opt/app/live/srv/poi_proxy/server:app -c /etc/gunicorn.conf 
```

我面临着与使用新贵时相同的问题任何可能出现问题或如何解决它的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:19:21.253

看起来这里的部分问题是您在 upstart 配置文件中期望守护程序，但您没有在守护程序模式下调用 gunicorn。这应该会导致 pid 被错误地报告并且 initctl stop 命令挂起。

# php - 无法连接到 SMTP 服务器 (PHPmailer)

> ID：11798553
> 
> 赞同：0
> 
> 时间：2012-08-03T15:17:54.020
> 
> 标签：php, email, smtp

我有一个设置为使用 PHPmailer 将网站发送到同一域的电子邮件地址的网站，但我无法让它连接到 SMTP 服务器。

这是我的电子邮件配置文件中的一部分：

```
$config = (object) array();

$config->email_from_addr      = "noreply@mywebsite.com";
$config->email_host           = "mail.mywebsite.com";
$config->email_from_password  = '********';
$config->email_from_name      = "Title";

$config->email_to             = 'info@mywebsite.com';
$config->email_subject        = "Contact email from mywebsite"; 
```

用于发送电子邮件的 PHP 在这里：

```
$phpmailer = new PHPMailer();
$phpmailer->IsSMTP();                                             // set mailer to use SMTP
if($config->use_gmail == true)
{
    $phpmailer->Port = 465;
    $phpmailer->Host = "smtp.gmail.com";
}
else
{
    $phpmailer->Host = $config->email_host;                 // specify main and backup server
}
$phpmailer->SMTPAuth = true;                                // turn on SMTP authentication
$phpmailer->Username = $config->email_from_addr;            // SMTP username
$phpmailer->Password = $config->email_from_password;        // SMTP password

$phpmailer->From = $config->email_from_addr;
$phpmailer->FromName = $config->email_from_name;
$phpmailer->AddAddress($config->email_to);

$phpmailer->WordWrap = 80;                                   // set word wrap to 80 characters
$phpmailer->IsHTML(true);                                    // set email format to HTML

$phpmailer->Subject = $config->email_subject;
$phpmailer->Body    = $message;
$phpmailer->AltBody = $message;

?>
<div style="float:left; display:block; background:#F1F1F1; margin:26px 0 60px 10px; height:200px; padding-top:140px; width:330px; text-align:center; font-size:16px; font-weight:bold" class="red"> 
<?php
if(@!$phpmailer->Send())
{
?>
<br />
<br />
Your email could not be sent.
<?php   
}
else
{
?>
Your email has been sent. Someone will reply to it shortly.
<?php 
```

我只是不知道为什么它没有连接到我的邮件服务器。或者，也许我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:21:04.797

尝试`if(!(@$phpmailer->Send()))`代替`if(@!$phpmailer->Send())`

# iphone - iPhone 上的 Facebook 连接

> ID：11798554
> 
> 赞同：2
> 
> 时间：2012-08-03T15:17:55.850
> 
> 标签：iphone, objective-c, ios, xcode, xcode4.3

我是 iOS 开发的新手。我想将我的应用程序连接到 Facebook。[在 iPhone 上实施 Facebook Connect](http://vimeo.com/3616452)

我已经按照[iPhone FBConnect: Facebook Connect Tutorial](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/)并完成了那里描述的每一个步骤。

但是我无法运行该应用程序，因为我的`Semantic Issues`xCode 4.3.3 中有两个错误，在`FBConnectGlobal.h`这些行中：

```
typedef unsigned long long FBUID;
typedef unsigned long long FBID; 
```

错误消息是：*重新定义 typedef`FBUID`并且`FBID`在 C 中无效*

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:33:10.620

使用[FBGraph API](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API/tree/59e639922c4bf6953162ea81998f2ff951cd1769)链接，因为它有演示，并且非常容易集成和使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:34:27.013

我使用 ShareKit，它非常容易实现，拥有许多社交网络，而不仅仅是 Facebook：

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

请按照以下说明操作：

```
https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit 
```

# c# - SSRS ReportViewer 控制凭证

> ID：11798556
> 
> 赞同：1
> 
> 时间：2012-08-03T15:18:07.703
> 
> 标签：c#, reporting-services, reportviewer

我正在开发一个最近创建的服务器，该服务器用于容纳 SSRS 的迁移版本，从 SSRS 05 到 08。

以前，我们通过报表查看器控件从 IIS 服务器到 SSRS 服务器的连接没有问题，当时我们没有提供凭据。现在，当我们尝试使用查看器时，我们会返回；“请求失败，HTTP 状态 401：未经授权。”

显然，这是一个我们以前从未遇到过的新问题，尽管我们一开始从未使用过凭据。所以这是我的第一个问题......新服务器与旧服务器位于同一个“位置”。IP，域，子网是一样的。用户设置相同，SSRS 配置似乎相同。导致错误的差异可能是什么？

此外，我一直在进行一些测试，我意识到我可以访问该服务器并在该环境中获取报告，方法是将在 Visual Studio 2008 中运行的开发环境指向该服务器，而无需使用凭据。我假设没有将报表查看器对象 serverreport.reportservercredentials 设置为某个东西，并将该属性保留为空值，它正在使用其他东西？可能是我的 Windows 用户凭据？访问报告服务器。（那将是我的第二个问题。）

最后。我决定硬着头皮在报表查看器上实施凭据。当我在为此目的创建的 ssrs 服务器上为本地用户创建凭据时，并且还作为浏览器在报告管理器中列出时，我收到请求失败错误。我的第三个问题是；对于这种类型的实现，有什么我没有想到的吗？

如果有任何问题或需要在我的帖子中澄清的事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:29:34.943

我最终走上了另一条路。

有两个问题……首先。Web 服务器上的应用程序以本地用户身份运行。旧的 SSRS 服务器被设置为接受匿名用户。

为了解决这个问题，我让我们的网络工作人员创建了一个新的域帐户。然后，我更改了应用程序的应用程序池标识以使用该域帐户，并为其提供临时文件夹的列表和写入权限，并将其添加到 Windows 中的正确组中。

然后，我在报告服务器上为该域用户提供了浏览能力。

这适用于 2.0+ 应用程序...现在我只需要弄清楚用户需要访问哪些文件夹才能访问 1.1 应用程序。

（ps ...我还发现当我通过.net中的报告查看器控件传递凭据时域用户实际上可以工作。）

# linux - 启动 Konsole 窗口后运行什么语言，它可以做什么？

> ID：11798557
> 
> 赞同：3
> 
> 时间：2012-08-03T15:18:18.713
> 
> 标签：linux, shell

1.  如何将表达式的结果存储到变量中？

    ```
    echo "hello" > var1 
    ```

2.  我也可以做这样的事情吗？

    ```
    var1.substring(10,15);
    var1.replace('hello', '2');
    var1.indexof('hello') 
    ```

*PS。我曾尝试谷歌搜索，但没有成功。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:54:19.563

正如@larsmans 评论的那样，`Konsole`是终端模拟器，它反过来运行一个shell。在 linux 上，这通常是`bash`，但也可能是别的东西。

找出您正在使用的 shell，并打印手册页。

```
echo $SHELL         # shows the full path to the shell
man ${SHELL##*/}    # use the rightmost part (typically bash, in linux) 
```

对于一般介绍，请使用 [unix shell 上的 wikipedia 条目](http://en.wikipedia.org/wiki/Unix_shell)或[GNU Bash 参考](http://www.gnu.org/software/bash/manual/bashref.html)

一些具体的答案：

```
var1="hello"
echo ${var1:0:4}         # prints "hell"
echo ${var1/hello/2}     # prints "2" -- replace "hello" with "2" 
```

并冒着炫耀的风险：

```
index_of() { (t=${1%%$2*} && echo ${#t}); }  # define function index_of
index_of "I say hello" hello
6 
```

但这超出了简单的 shell 编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:53:59.447

Konsole 基本上是 bash。因此，从技术上讲，您正在寻找它。

认为：

```
s="hello" 
```

为了`var1.substring(1,3);`

你会这样做：

```
$ echo ${s:1:2}
el 
```

为了`var1.replace('e', 'u');`

你可以：

```
$ echo ${s/l/u} #replace only the first instance.
hullo
$ echo ${s//e/u} #this will replace all instances of e with u 
```

为了`var1.indexof('l')`

你可以（我不知道任何 bash-ish 方法，但无论如何）：

```
$ echo $(expr index hello l)
4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:00:04.917

在`bash`（linux上的标准shell）中，将表达式结果存储在变量中的语法是

```
VAR=$( EXPRESSION ) 
```

所以，例如：

```
$ var=$(echo "hello")
$ echo $var
hello 
```

对于你的第二个问题：是的，这些事情只使用 shell 是可能的——但你可能最好使用像 python 这样的脚本语言。

对于它的价值：[这](http://tldp.org/LDP/abs/html/string-manipulation.html)是一个描述如何在 bash 中进行字符串操作的文档。

如您所见，它并不完全漂亮。

# tdd - TDD：测试太接近方法实现

> ID：11798560
> 
> 赞同：3
> 
> 时间：2012-08-03T15:18:22.947
> 
> 标签：tdd

我们做 TDD 已经有一段时间了，我们在重构时遇到了一些问题。由于我们试图尽可能多地尊重 SRP（单一责任原则），我们创建了许多组合，我们的类使用这些组合来处理常见责任（例如验证、日志记录等）。让我们举一个非常简单的例子：

```
public class Executioner
{
    public ILogger Logger { get; set; }
    public void DoSomething()
    {
        Logger.DoLog("Starting doing something");
        Thread.Sleep(1000);
        Logger.DoLog("Something was done!");
    }
}

public interface ILogger
{
    void DoLog(string message);
} 
```

当我们使用模拟框架时，我们会针对这种情况进行的测试类似于

```
[TestClass]
public class ExecutionerTests
{
    [TestMethod]
    public void Test_DoSomething()
    {
        var objectUnderTests = new Executioner();

        #region Mock setup

        var loggerMock = new Mock<ILogger>(MockBehavior.Strict);
        loggerMock.Setup(l => l.DoLog("Starting doing something"));
        loggerMock.Setup(l => l.DoLog("Something was done!"));

        objectUnderTests.Logger = loggerMock.Object;

        #endregion

        objectUnderTests.DoSomething();

        loggerMock.VerifyAll();
    }
} 
```

如您所见，测试清楚地知道我们正在测试的方法实现。我不得不承认这个例子太简单了，但我们有时会有一些包含职责的组合，这些职责不会为测试增加任何价值。

让我们为这个例子增加一些复杂性

```
public interface ILogger
{
    void DoLog(LoggingMessage message);
}

public interface IMapper
{
    TTarget DoMap<TSource, TTarget>(TSource source);
}

public class LoggingMessage
{
    public string Message { get; set; }
}

public class Executioner
{
    public ILogger Logger { get; set; }
    public IMapper Mapper { get; set; }
    public void DoSomething()
    {
        DoLog("Starting doing something");

        Thread.Sleep(1000);

        DoLog("Something was done!");
    }

    private void DoLog(string message)
    {
        var startMessage = Mapper.DoMap<string, LoggingMessage>(message);
        Logger.DoLog(startMessage);
    }
} 
```

好的，这是一个例子。我会在我的 Logger 的实现中包含 Mapper 的东西，并在我的界面中保留一个 DoLog(string message) 方法，但这是一个证明我的担忧的例子

相应的测试引导我们

```
[TestClass]
public class ExecutionerTests
{
    [TestMethod]
    public void Test_DoSomething()
    {
        var objectUnderTests = new Executioner();

        #region Mock setup

        var loggerMock = new Mock<ILogger>(MockBehavior.Strict);
        var mapperMock = new Mock<IMapper>(MockBehavior.Strict);
        var mockedMessage = new LoggingMessage();

        mapperMock.Setup(m => m.DoMap<string, LoggingMessage>("Starting doing something")).Returns(mockedMessage);
        mapperMock.Setup(m => m.DoMap<string, LoggingMessage>("Something was done!")).Returns(mockedMessage);

        loggerMock.Setup(l => l.DoLog(mockedMessage));

        objectUnderTests.Logger = loggerMock.Object;
        objectUnderTests.Mapper = mapperMock.Object;

        #endregion

        objectUnderTests.DoSomething();

        mapperMock.VerifyAll();
        loggerMock.Verify(l => l.DoLog(mockedMessage), Times.Exactly(2));
        loggerMock.VerifyAll();
    }
} 
```

哇...假设我们将使用另一种方式来翻译我们的实体，我将不得不更改每个具有使用映射器服务的方法的测试。

无论如何，当我们进行重大重构时，我们真的会感到有些痛苦，因为我们需要更改一堆测试。

我很乐意讨论这类问题。我错过了什么吗？我们是否测试了太多东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:30:57.513

尖端：

## 确切地指定应该发生的事情，仅此而已。

在你捏造的例子中，

1.  测试 E.DoSomething 要求 Mapper 映射 string1 和 string2（存根记录器 - 无关）
2.  测试 E.DoSomething 告诉 Logger 记录映射的字符串（Stub/Fake out Mapper 以返回 message1 和 message2）

## [告诉不要问](http://pragprog.com/articles/tell-dont-ask)

就像你自己暗示的那样，如果这是一个真实的例子。我希望 Logger 通过哈希表或使用 Mapper 在内部处理翻译。那么我会对 E.DoSomething 进行一个简单的测试

1.  测试 E.DoSomething**告诉**Logger 记录 string1 和 string2

Logger 的测试将确保 L.Log 要求 mapper 翻译 s1 并记录结果

Ask 方法通过耦合协作者使测试复杂化（让 Mapper 翻译 s1 和 s2。然后将返回值 m1 和 m2 传递给 Logger）。

## 忽略不相关的对象

通过测试交互进行隔离的权衡是测试知道实现。诀窍是尽量减少这一点（通过不创建接口/指定期望值）。DRY 也适用于期望。最小化指定期望的位置数量……理想情况下是一次。

## 最小化耦合

如果有很多合作者，耦合度很高，这是一件坏事。因此，您可能需要重新设计您的设计，以查看哪些协作者不属于同一抽象级别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:26:35.200

你的困难来自测试行为而不是状态。如果您要重写测试以便查看日志中的内容而不是验证是否对日志进行了调用，那么您的测试不会因实现的更改而中断。

# f# - 如何从 fsx 脚本文件中使用 FSharpChart

> ID：11798568
> 
> 赞同：11
> 
> 时间：2012-08-03T15:18:49.317
> 
> 标签：f#, fsi, fsharpchart, f#-charting

我想在我的项目中使用 FSharpChart 和 fsx 脚本文件。我使用 Nuget 下载并引用了 MSDN.FSharpChart.dll，我的代码如下所示

```
#r @"..\packages\MSDN.FSharpChart.dll.0.60\lib\MSDN.FSharpChart.dll"
open System.Drawing
open MSDN.FSharp.Charting

[for x in 0.0 .. 0.1 .. 6.0 -> sin x + cos (2.0 * x)]
    |> FSharpChart.Line 
```

路径是正确的，因为 VS 2012 为我提供了智能感知并且知道 MSDN.FSharp 命名空间。问题是当我在 FSI 中运行这个脚本时，什么都没有显示。

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T16:01:49.573

为了使您的图表从 FSI 中显示，您应该将 FSharpChart.fsx 预加载到您的 FSI 会话中，如下面的片段所示：

```
#load @"<your path here>\FSharpChart.fsx"
[for x in 0.0 .. 0.1 .. 6.0 -> sin x + cos (2.0 * x)] 
|> MSDN.FSharp.Charting.FSharpChart.Line;; 
```

**2012 年8 月 23 日更新：** 为了比较，可视化相同的图表`FSharpChart.dll`需要一些 WinForms 管道：

```
#r @"<your path here>\MSDN.FSharpChart.dll"
#r "System.Windows.Forms.DataVisualization.dll"
open System.Windows.Forms
open MSDN.FSharp.Charting

let myChart = [for x in 0.0 .. 0.1 .. 6.0 -> sin x + cos (2.0 * x)]
              |> FSharpChart.Line

let form = new Form(Visible = true, TopMost = true, Width = 700, Height = 500)
let ctl = new ChartControl(myChart, Dock = DockStyle.Fill)
form.Controls.Add(ctl) 
```

# c - Reading random double from /dev/random (c)

> ID：11798572
> 
> 赞同：1
> 
> 时间：2012-08-03T15:19:08.520
> 
> 标签：c, linux, random

Still having trouble generating random seeds. Here's my code:

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

double dev_random_seed(){
  double randval;
  FILE* f;

  f = fopen("/dev/random", "r");
  if(f == NULL){
    fprintf(stderr, "WARNING: Failed to open /dev/random. Random seed defaults to 1\. \n");
    return 1;
  }

  fread(&randval, sizeof(double), 1, f);
  fclose(f);
  return randval;
}

int main(int argc, char** argv){
  double arse = dev_random_seed();

  printf("errno: %i\n",errno);
} 
```

The output of which is:

```
errno: 22 
```

which is EINVAL. Can't spot the mistake ~~, I suck at c.~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:26:38.147

Don't check errno unless you have an error.
It may be that a library sets a value of errno in advance because it represents a cause that a later part won't know IF the later part has an error (sorry that could be clearer)

See [https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=6619179](https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=6619179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:27:42.787

You should not check for errno if there were no error. To notify main that an error has occured, you may use the following code:

```
if (fread (&randval, sizeof(double), 1, f)<0) return NAN; 
```

and, correspondingly, in main:

```
if (isnan (arse)) printf ("Error has occured: %i\n",errno); 
```

# playframework - 在 windows xp 中执行 play bat 时出错

> ID：11798580
> 
> 赞同：1
> 
> 时间：2012-08-03T15:19:55.627
> 
> 标签：playframework

我在我的 Windows XP 中安装了播放框架，没有任何问题。但是，当我尝试在播放应用程序“myFirstApp”目录中运行播放命令时出现以下错误。它应该带我玩控制台（根据[文档](http://www.playframework.org/documentation/2.0.2/PlayConsole)）没有问题。难道我做错了什么 ？

```
C:\Apps\myFirstApp>play
C:\Apps\play-2.0.3\play-2.0.3\
[info] Loading project definition from C:\Apps\myFirstApp\project
[error] play#play_2.9.1;2.0.3!play_2.9.1.jar origin location must be absolute: /Users/phausel/i/play-2.0.3/hh/../framewo
[error] {file:/C:/Apps/myFirstApp/project/}default-817509/*:update: java.lang.IllegalArgumentException: play#play_2.9.1;
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-15T05:24:28.697

我的问题原来是损坏的常春藤缓存。删除 ~/.ivy2 后，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:03:27.957

在创建一个新项目并运行“play”命令后，我在使用 Play 2.0.3 时遇到了同样的问题。

如果我改用 Play 2.0.2，并再次创建一个新项目，我可以运行“play”命令而不会出现任何问题。

因此，我认为：

*   2.0.3 包中的某些内容未正确配置，或者
*   2.0.3 中意外打包了一些不正确的东西。

不过最好有官方的回答。

M。

* * *

编辑：

*   我注意到 2.0.2 和 2.0.3 之间的大小差异很大：第一个为 95MB，第二个为 128 MB，这令人惊讶，因为版本控制会让人认为这是一个小升级。这表明他们可能确实在包装上做错了。

*   在Play 2.0.3中查找字符串“origin location must be absolute: /Users/phausel”，我也发现它到处都是，在play-2.0.3\repository\cache中，提取后不存在2.0.2，但在 2.0.3 中提取后确实存在。

*   我已经删除了 play-2.0.3\repository 下的所有内容，Play 现在再次下载所有内容。完成后我会更新结果。

* * *

解决方法：

1.  下载 2.0.3
2.  提取它
3.  删除存储库\缓存
4.  像往常一样使用 Play。请注意，第一次调用“play”需要一段时间，因为它会下载所有依赖项。

我还在[Play Framework Google 小组](https://groups.google.com/forum/#!topic/play-framework/7MAaAoDSJmY)上发送了一封电子邮件，让他们意识到这个问题。等待答复。

* * *

解决方案：该软件包现已由 Play Framework 团队修复。使用下面的链接或 Play Framework 网站上 2.0.3 的“官方”链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:40:14.660

我的错，请尝试[https://dl.dropbox.com/u/2721142/updated/play-2.0.3.zip](https://dl.dropbox.com/u/2721142/updated/play-2.0.3.zip)

# java - 运行自编译浏览器时出现 ClassNotFoundException

> ID：11798583
> 
> 赞同：0
> 
> 时间：2012-08-03T15:19:57.557
> 
> 标签：java, android, exception

我编译了最新的 AOSP 浏览器，它编译它没有任何问题。当我启动它时，我有一个 ClassNotFoundException。

我正在使用最新的 SDK 17，但该项目没有 lib 文件夹或外部 jar，因此看起来这不是常见问题。

**除了每个文件中的包名外，**没有触及任何东西（因为它注意到同一部手机中已经存在具有相同包 com.android.browser 的浏览器）。

日志猫：

```
08-03 17:18:32.116: E/Trace(30047): error opening trace file: No such file or directory (2)
08-03 17:18:32.194: D/AndroidRuntime(30047): Shutting down VM
08-03 17:18:32.194: W/dalvikvm(30047): threadid=1: thread exiting with uncaught exception (group=0x40a7d300)
08-03 17:18:32.194: E/AndroidRuntime(30047): FATAL EXCEPTION: main
08-03 17:18:32.194: E/AndroidRuntime(30047): java.lang.RuntimeException: Unable to instantiate application it.androidhd.jbrowser.Browser: java.lang.ClassNotFoundException: it.androidhd.jbrowser.Browser
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.LoadedApk.makeApplication(LoadedApk.java:501)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4275)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.ActivityThread.access$1300(ActivityThread.java:139)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1265)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.os.Looper.loop(Looper.java:137)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.ActivityThread.main(ActivityThread.java:4896)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at java.lang.reflect.Method.invokeNative(Native Method)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at java.lang.reflect.Method.invoke(Method.java:511)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at dalvik.system.NativeStart.main(Native Method)
08-03 17:18:32.194: E/AndroidRuntime(30047): Caused by: java.lang.ClassNotFoundException: it.androidhd.jbrowser.Browser
08-03 17:18:32.194: E/AndroidRuntime(30047):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.Instrumentation.newApplication(Instrumentation.java:967)
08-03 17:18:32.194: E/AndroidRuntime(30047):    at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
08-03 17:18:32.194: E/AndroidRuntime(30047):    ... 11 more 
```

截图： [http ://s18.postimage.org/qi5f3zkfd/Cattura.png](http://s18.postimage.org/qi5f3zkfd/Cattura.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:42:30.813

使用自动化工具将内容导入 Eclipse 时要注意。从头开始重新创建项目将完成这项工作。

# database - Database for ASP.NET MVC3 网站中的格式化文本

> ID：11798584
> 
> 赞同：1
> 
> 时间：2012-08-03T15:19:59.267
> 
> 标签：database, asp.net-mvc-3, markup

是否有任何插件或库用于将标记存储在数据库中，可以在不实际存储 HTML 标记的情况下翻译成 HTML（以防止跨站点脚本攻击）？

我想我正在寻找一种自动、安全的方法来将诸如 BBCode 之类的内容（将存储在数据库中，标记文本）转换为呈现的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:23:17.473

你可以使用[markdown](http://en.wikipedia.org/wiki/Markdown)，就像 Stack Overflow 一样。

它使用[MarkdownSharp](http://code.google.com/p/markdownsharp/)，如[本博客](https://blog.stackoverflow.com/2009/12/introducing-markdownsharp/)和[Meta](https://meta.stackexchange.com/questions/91681/where-i-can-find-stackoverflow-markdown)中所述。

# c# - C# WriteDocType 生成不正确的 PList 文档类型

> ID：11798586
> 
> 赞同：3
> 
> 时间：2012-08-03T15:20:10.210
> 
> 标签：c#, plist, doctype, xmltextwriter

考虑以下 C# 代码：

```
XmlTextWriter writer = new XmlTextWriter(pathFichier, null);
writer.WriteStartDocument();
writer.WriteDocType("plist", "-//Apple//DTD PLIST 1.0//EN", "http://www.apple.com/DTDs/PropertyList-1.0.dtd", null);
writer.WriteStartElement("plist");
writer.WriteAttributeString("version", "1.0");
writer.WriteFullEndElement(); // plist
writer.Close(); 
```

PList 文档类型通常是：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
```

上面的代码在 doctype 字符串的末尾添加了一个空子集：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"[]> 
```

末尾的“[]”与 iOs 的解析有关。

如何使用 XmlTextWriter 摆脱它？

我应该重新打开文件并删除“[]”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:26:10.433

您可以为 XmlTextWriter 派生一个类并[覆盖 WriteDocType 方法](https://stackoverflow.com/questions/1417683/add-html-5-doctype-to-xdocument-net)。

它看起来像这样：

```
public override void WriteDocType(string name, string pubid, string sysid, string subset)
{
    this.wrappedWriter.WriteRaw("-//Apple//DTD PLIST 1.0//EN", "http://www.apple.com/DTDs/PropertyList-1.0.dtd");
} 
```

由提出问题的人编辑。这是我为使其工作而编写的代码。

WriteDocType 覆盖：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace your.namespace {
    public class PListWriter : System.Xml.XmlTextWriter  {

        public PListWriter(string filename, System.Text.Encoding encoding) : base(filename, encoding) { }

        public override void WriteDocType(string name = "", string pubid = "", string sysid = "", string subset = "") {
            this.WriteRaw("<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">");
        }
    }
} 
```

它在野外的用法：

```
PListWriter writer = new PListWriter(pathFichier, null);    
writer.Formatting = Formatting.Indented;
writer.WriteStartDocument();
writer.WriteDocType();
writer.WriteStartElement("plist");
writer.WriteAttributeString("version", "1.0");
writer.WriteFullEndElement(); // plist
writer.Close(); 
```

# php - 使用 JS 的散点图有限制吗？

> ID：11798588
> 
> 赞同：3
> 
> 时间：2012-08-03T15:20:11.270
> 
> 标签：php, javascript, html, highcharts, scatter-plot

我正在尝试提供一个用 JavaScript 编写的散点图，其中包含带有十进制值的二维。我从 MySQL 数据库中获取这些值，并使用 Php 将它们提供给图表。我的数据库有近 150000 个条目，对应于图中的 150000 对十进制输入。运行我的代码后，图表没有可视化。我从我的 Php 代码中获取了输出并将其粘贴到 JavaScript 代码中，它显示出了问题，但它没有说明什么（我正在使用 Dreamweaver）。如果我只为图表使用 3 对十进制输入，一切都会正常可视化。

**我的问题是**：在散点图中可以可视化多少个值是否有限制？

我现在使用 Highcharts 库中的散点图。我还尝试了 Google Chart Tools API 的散点图，但得到了相同的结果。

我的代码，使用 PHP 在 JS 中提供图形是：

```
data: [<?php 
                for($j=0;$j<$i1;$j++)
                {
                    if($females[$j]['Hour']=="00")
                        $females[$j]['Hour']="0";
                    echo "[".$females[$j]['Hour'].".".$females[$j]['Min'].",".$females[$j]['Sent']."]";
                    if(($j+1)!=$i1)
                    {
                        echo ",";
                    }
                }

            ?>]}, 
```

有效的是：

```
 data: [[0.3,-0.1623],[0.4,-0.1840],[0.5,-0.1555]]}, 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:13:29.580

我在图表未渲染时遇到了同样的问题，这是由于 turboThreshold 参数造成的。将其设置为高于您尝试渲染的点数。

有关更多信息，请参阅[http://api.highcharts.com/highstock#plotOptions.series.turboThreshold](http://api.highcharts.com/highstock#plotOptions.series.turboThreshold)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:43:03.687

> 您可以在散点图中可视化多少个值是否有限制？

当然：情节的大小。一旦你填满了整个区域，就不需要再画点了。只需减少要绘制的数据量，例如仅输出每五个值。您还可以使用一些算法来计算平均值并仅显示它们。

接下来是动态绘图。尤其是在老客户上，绘制所有点的时间会更长。在服务器端绘制图表并将图像发送到客户端应该会更好，尤其是在图表不需要交互的情况下。

此外，您会将整个数据集传送到客户端。存在带宽限制。你的文件有多少千兆字节？

结论：150000点太多了。

# android - Opengl ES 动态重新加载着色器

> ID：11798591
> 
> 赞同：1
> 
> 时间：2012-08-03T15:20:34.953
> 
> 标签：android, opengl-es, shader, rajawali

我在 android (3d opengl library) 中使用 Rajawali。

我正在尝试重新加载材质（开始动态使用不同的着色器） - 但是当我将新材质（在运行时）设置为对象时，它会消失（通过电源按钮打开/关闭屏幕后，此对象会再次出现新材质）。

设置新材料后，我试图重新加载对象的属性（函数重新加载），但这没有帮助（如果我调用`reload()`其他对象 - 它们也会消失 =））。

`reload()`材料（`shaders`类）中的功能是：

```
 public void reload() {
        setShaders(mUntouchedVertexShader, mUntouchedFragmentShader);

        for(int i=0; i<mNumTextures; i++) {
            addTexture(mTextureInfoList.get(i), true, true);
        }
    } 
```

我不明白为什么它们会消失以及为什么在使用新的着色器重新启动后它们又会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:40:41.493

问题是您试图在渲染周期的中间添加一个对象。当材质尝试创建着色器时，会返回错误。

目前正在对 API 进行工作，以使其更加用户友好。同时，您可以执行类似的操作：

```
private boolean mSetShaders;

public void onTouch() {
    // -- boolean that indicates that an object should be added onDrawFrame()
    mSetShaders = true;
}

public void onDrawFrame(GL10 glUnused) {
    super.onDrawFrame(glUnused);
    if(mSetShaders) {
        // ... set your shaders here ...
        mSetShaders = false;
    }
} 
```

此示例适用于 onTouch() 事件，但重写它以满足您的需要应该不是很大的努力。基本上，您只需将设置着色器事件排队，直到下一个渲染周期发生。

不是最漂亮的解决方案，但它会在下一次框架更新之前使用；-)

# c# - 使用二级排序对 linq 查询进行排序

> ID：11798595
> 
> 赞同：13
> 
> 时间：2012-08-03T15:20:51.297
> 
> 标签：c#, linq

> **可能重复：**
> [LINQ 中的多个“排序依据”](https://stackoverflow.com/questions/298725/multiple-order-by-in-linq)

我有一个订单列表，我需要按订单日期排序，然后按订单价格进行二次排序。自从我尝试了 orders.OrderBy(o => o.Date).OrderBy(o => o.Price) 后，我不确定该怎么做，但它不起作用。任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-03T15:21:50.350

您想使用 ThenBy 函数：

`orders.OrderBy(o => o.Date).ThenBy(o => o.Price)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:24:27.953

另一种选择是使用 LINQ 查询语法而不是方法语法：

```
 List<Order> sortedOrders = from o in orders
 orderby o.Date, O.Price
 select o; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:23:32.650

您可以使用：

> orders.OrderBy(o => o.Date).ThenBy(o => o.Price)

# extjs - ExtJS Ajax vs Extjs Store 用于来自服务器的单行

> ID：11798598
> 
> 赞同：3
> 
> 时间：2012-08-03T15:21:07.887
> 
> 标签：extjs, extjs4.1, extjs-mvc

场景：我有一个返回当前登录用户详细信息的 URL。IE

*   *一条*记录
*   不需要清单

我有的选择：

1.  每次执行手动[ExtJS Ajax 调用，必须在我需要回调等的任何地方插入代码。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax)
2.  *一次*创建一个[ExtJS 存储](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store) ，每次都从存储实例中获取第一条记录。

 *问：有更好的选择吗？我正在使用 ExtJS 4.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:41:44.373

你不需要进入底层细节来做这样的事情；使用标准工具。定义一个模型，为它分配一个您需要的类型的代理，然后加载它。请参阅文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:39:47.463

你为什么每次都做一个ajax调用？

做一次，并将其分配为全局变量？

```
Ext.Ajax.request({
    url: 'page.php',
    params: {
        id: 1
    },
    success: function(response){
        var text = response.responseText;
        window.user = Ext.JSON.decode(text);
        my.custom.launchFunction();//does your viewport etc for you
    }
}); 
```

完成此操作后，您现在可以在**任何地方**进行 `console.log(user.Name);`

它比进行商店查找更整洁，更快捷。

作为奖励，您的用户对象可能比商店在没有大量配置的情况下处理的要复杂得多。*

# linux - 如何授予 Linux 用户权限？

> ID：11798601
> 
> 赞同：0
> 
> 时间：2012-08-03T15:21:09.060
> 
> 标签：linux, debian, rhel

例如，我将创建一个名为 username 的用户

我需要将所有 root 权限授予用户用户名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:28:33.527

仔细考虑一下，这个用户真的需要访问 root 所做的一切吗？因为它是一个安全列表。我所采取的方法是仅将所需的访问权限授予另一个用户，例如 apache，例如，这是真正需要的。我知道让另一个用户拥有 root 拥有的所有访问权限会更容易，但这样很容易变得草率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T08:08:25.983

如果要授予所有 root 权限，为什么不`root`首先使用用户名？

# jquery - 将内容附加到另一个页面上的 div，JQM

> ID：11798602
> 
> 赞同：0
> 
> 时间：2012-08-03T15:21:10.733
> 
> 标签：jquery, html, jquery-mobile, cordova

我有一个列表视图，当用户点击时，loadingPage 会发生 changePage，加载完成后会切换到带有 changePage 的文章页面。

我的问题：加载很好，但是，我似乎无法将内容附加到文章页面的 div 中，我在 web 编程方面不是那么好，但可能是页面还不知道 div因为它还没有加载页面？追加后 div 保持为空。

这就是我附加的方式：

```
$("#tmpId").load(url + " article", function() {
    $('#loadedPageContent').append($(tmpId + " article").html());
}
$.mobile.changePage("loadedArticle.html", {transition:"pop"}); 
```

澄清一下：#tmpId 是位于加载页面中的 div，#loadedPageContent 位于最终文章页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:26:24.240

把你的

```
$("#tmpId").load(url + " article", function() {
    $('#loadedPageContent').append($(tmpId + " article").html());
}
$.mobile.changePage("loadedArticle.html", {transition:"pop"}); 
```

进入

```
$(document).delegate('#page_id_on_loadedArticle', "pageinit", function() {
    //code here...
} 
```

这样它就会在loadedArticle.html 完成加载后运行。

# tags - scons 和 ctags

> ID：11798605
> 
> 赞同：1
> 
> 时间：2012-08-03T15:21:23.570
> 
> 标签：tags, scons, ctags

我试图让 ctags 在我执行 scons 时自动运行。我有一个[基于这个答案的自定义构建器](https://stackoverflow.com/a/11796195/232794)，它允许我从我的 SConscript 文件中运行 ctags。只要我`tags`在适当的目录中获得一个文件，这就是有效的。但是，由于构建器在根目录而不是子目录中运行，因此对于文件中包含的所有文件，我得到了错误的路径（也就是从根目录，而不是子目录）`tags`。除了`sed`用于去除标签文件中的路径之外，任何人都可以提供有关如何使 scons 生成正确路径的建议？

**实际上，我想在*特定目录*（也就是 SConscript 所在的目录，可能作为选项传递？）而不是从项目根目录中运行构建器。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:43:05.680

这是我最终使用的构建器代码。请注意，ctags 命令有一个`--tag-relative=yes`选项。

```
# -*- coding: utf-8 -*-
import SCons.Builder
import SCons.Action

def complain_ctags(target, source, env):
    print 'INFORMATION: ctags binary was not found (see above). Tags have not been built.'

def generate(env):
    env['CTAGS'] = find_ctags(env)
    if env['CTAGS'] != None:
        #env['CTAGSCOM'] = 'cd $TARGET.dir; ctags -R .'
        env['CTAGSCOM'] = '$CTAGS --tag-relative=yes -f $TARGET $SOURCES'
        env['BUILDERS']['ctags'] = SCons.Builder.Builder(action=env['CTAGSCOM'])
    else:
        env['BUILDERS']['ctags'] = SCons.Builder.Builder(action=env.Action(complain_ctags))

def find_ctags(env):
    b=env.WhereIs('ctags')
    if b == None:
        print 'Searching for ctags: not found. Tags will not be built'
    else:
        print 'Searching for ctags: ', b
    return b

def exists(env):
    if find_ctags(env) == None:
        return 0
    return 1 
```

在我的`Sconscript`文件中，我现在可以执行以下操作：

```
Alias('tags', env.ctags(source=all_python_files, target='tags')) 
```

该`tags`文件现在包含标签，其路径相对于标签文件的位置，而不是来自 scons 根目录。

# php - PHP 通过 VPN 发布数据

> ID：11798606
> 
> 赞同：10
> 
> 时间：2012-08-03T15:21:37.870
> 
> 标签：php, linux, symfony1, debian, vpn

我需要`behind of a VPN`通过 PHP 连接到 web 服务。我的服务器是 Debian Linux (Squeeze)。

1.  是否有可能通过 Linux 上的 PHP 来实现这一点？
2.  如果可能，这样做有风险吗？（当 VPN 连接挂起等时，操作系统或任何其他类似的东西是否会处理这种情况）
3.  我只有一张网卡，因此我真的想知道是否可以让普通用户保持服务器在线，同时“在后台通过已完成的 VPN 连接发布数据”。

虽然我的问题似乎是一个概念性问题，但也欢迎任何具体的帮助。

> **服务器操作系统** ：Debian Linux Squeeze (x64)
> **Web 服务器**：Apache HTTP
> **PHP 版本**：5.3
> **框架**：Symfony 1.4

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T09:40:35.403

VPN 位于 PHP 之下的网络层，PHP 不会知道或关心连接是通过 VPN 还是正常连接。它由网络堆栈处理。

如果您使用永久的（例如 IPSEC），那么 PHP 不需要创建连接，它只是在 PHP 连接到 VPN 中的 IP 地址时使用。它在进行路由时由网络层选择使用，而不是由 PHP 选择。即使您按需创建 VPN 也是如此，正如 jderda 建议使用 exec() 或类似方法。但是永久连接更好（IPSEC）。

所以回答你的问题：

1.  这个问题没有意义，PHP 可以做到这一点的唯一方法是使用 PPTP 或类似方法和 exec() 来建立连接，但最好使用 IPSEC
2.  如果 VPN 连接挂起/终止，PHP 将无法连接到远程端，并将超时连接。
3.  是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:25:55.043

从 PHP 的角度来看，VPN 只是一个普通的网络连接。它不需要额外的处理。

如果您想动态建立 VPN 连接，您可能需要使用 exec() 和一些命令行工具来建立连接。但是由于这样的连接不会干扰正常的网络通信（只要它配置正确，使用其他子网 ip 范围），您应该建立一次并保持它处于活动状态以供 PHP 和其他应用程序使用。

# blackberry - 带 phonegap 的黑莓应用程序

> ID：11798608
> 
> 赞同：0
> 
> 时间：2012-08-03T15:21:43.347
> 
> 标签：blackberry, cordova

我已经在 html5 中完成了 1 个移动应用程序，我必须使用 phonegap 为黑莓制作 .jad 或 .ota 文件。* 在构建应用程序时出现 1 个错误。它的签名错误。如何使用黑莓签署我的应用程序？如何在我的 mac 中获取黑莓键？* 我从 RIM 获得 .csj 和 .csi 文件，但我不知道它的详细过程。所以帮帮我吧。* 什么是“907 cod file not found error”？如何克服该错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:38:04.943

黑莓有[一篇关于如何请求、创建和使用代码签名密钥的好文章](https://developer.blackberry.com/html5/documentation/signing_setup_smartphone_apps_1920010_11.html)在 Windows XP、Windows 7 和 Mac OS 上请求、创建和使用代码签名密钥。

# ruby-on-rails - lambda do count 应该被改变了 1，但是被改变了 0

> ID：11798609
> 
> 赞同：1
> 
> 时间：2012-08-03T15:21:47.690
> 
> 标签：ruby-on-rails, rspec, lambda

我测试我的应用程序以创建一个新的用户汽车，后来用户创建了应用程序必须重定向到 user_car_path 的新车（我发布了我的路线）：

```
user_cars GET    /users/:user_id/cars(.:format)                               cars#index
                      POST   /users/:user_id/cars(.:format)                               cars#create
         new_user_car GET    /users/:user_id/cars/new(.:format)                           cars#new
        edit_user_car GET    /users/:user_id/cars/:id/edit(.:format)                      cars#edit
             user_car GET    /users/:user_id/cars/:id(.:format)                           cars#show
                      PUT    /users/:user_id/cars/:id(.:format)                           cars#update
                      DELETE /users/:user_id/cars/:id(.:format)                           cars#destroy 
```

所以我正在用这个 rspec 测试我的应用程序：

```
describe "POST 'create' car" do

describe "car created success" do
  before(:each) do
            @user = User.create!(:email => "foo@example.com", :password => "foobar", :password_confirmation => "foobar" )
            @car = Car.create!(:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012")
  end

  it "should create a car" do
    lambda do
      post :create, :cars => @car, :user_id => @user.id
    end.should change(Car, :count).by(1)
  end

  it "should redirect to the user cars page" do
    post :create, :cars => @car, :user_id => @user.id
    response.should redirect_to user_car_path(@user, @car)
  end
end
end 
```

但我有 2 个错误

```
Failures:

1) CarsController POST 'create' car car created success should create a car
 Failure/Error: lambda do
   count should have been changed by 1, but was changed by 0
 # ./spec/controllers/car_controller_spec.rb:20

2) CarsController POST 'create' car car created success should redirect to the user cars page
 Failure/Error: response.should redirect_to user_car_path(@user, @car)
   Expected response to be a redirect to <http://test.host/users/115/cars/40> but was a redirect to <http://test.host/users/115/cars/new>.
 # ./spec/controllers/car_controller_spec.rb:27 
```

但我的应用程序正常工作；这是我的汽车控制器

```
class CarsController < ApplicationController
....

def create
  @user = User.find(params[:user_id])
  @car = @user.cars.build(params[:car])
  if @car.save
    redirect_to user_car_path(@user, @car), :flash => { :notice => "  car created!" }
  else
    redirect_to new_user_car_path ,:flash => { :notice => " sorry try again :(" }
  end
end
def show
  @user = User.find(params[:user_id])     
  @car = @user.cars.find(params[:id])   
end

.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:56:58.727

您正在数据库中创建汽车，而不仅仅是在`before(:each)`. 此外，您将参数传递为`:cars`而不是`:car`. 最后，我个人也会使用`let`. 试试这个。

```
describe "POST 'create' car" do

  let(:user) { User.create!(:email => "foo@example.com", :password => "foobar", :password_confirmation => "foobar" ) }
  let(:car)  { Car.new(:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012")}

  it "should create a car" do
    lambda do
      post :create, :car => car, :user_id => user.id
    end.should change(Car, :count).by(1)
  end

  it "should redirect to the user cars page" do
    post :create, :cars => car, :user_id => user.id
    # note: car doesn't have an ID, you have to fetch it from the db to get an id
    response.should redirect_to user_car_path(user.id, user.cars.last.id)
  end
end 
```

最后一点，你会想看看[工厂女孩](https://github.com/thoughtbot/factory_girl/)

然后你可以这样做：

```
let(:user){ FactoryGirl.create(:user) }
let(:car) { FactoryGirl.build(:car) } # note: BUILD not CREATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:31:22.383

我认为您想要以下内容（：cars => :car 并使用使控制器中的汽车创建有效的参数。我很困惑为什么您要在规范中创建汽车，因为这似乎是对汽车创建的测试）

```
 it "should create a car" do
    lambda do
      post :create, :car => {:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012"}, :user_id => @user.id
    end.should change(Car, :count).by(1)
  end

  it "should redirect to the user cars page" do
    post :create, :car => {:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012"}, :user_id => @user.id
    response.should redirect_to user_car_path(@user, @car)
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:34:19.607

我认为这是因为您的验证失败。要知道它是否失败，请在保存到控制器之前：

```
puts @car.valid? 
```

如果它是假的，你的测试将失败，这是正常的。要设置为 true，您可以执行以下操作：

```
before(:each) do
  ...
  Car.any_instance.stub(:valid?).and_return(true)
end 
```

您还可以使用存根和模拟来返回`User.find`和的实例`Car.build`。请参阅文档：[https ://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/method-stubs](https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/method-stubs)

# vim - Vim 的 `gq` 段落填充使用什么算法？

> ID：11798610
> 
> 赞同：4
> 
> 时间：2012-08-03T15:21:48.710
> 
> 标签：vim

Vim 使用什么算法将段落分成几行以填充段落 ( `gq`)？它是一种像 Emacs 中使用的简单贪心算法，还是像 TeX 中使用的更复杂的算法？最重要的是，我会在哪里查看源代码来确认所使用的算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:58:16.650

[你可以在这里](http://www.vim.org/sources.php)获得 vim 的源代码。下载那个，格式化功能在`vim/src/ops.c line: 4710`. 您可能还想看看[par](http://www.nicemice.net/par/)。

```
format_lines(line_count, avoid_fex)
    linenr_T    line_count;
    int     avoid_fex;      /* don't use 'formatexpr' */
{
    int     max_len;
    int     is_not_par;     /* current line not part of parag. */
    int     next_is_not_par;    /* next line not part of paragraph */
    int     is_end_par;     /* at end of paragraph */
    int     prev_is_end_par = FALSE;/* prev. line not part of parag. */
    int     next_is_start_par = FALSE;
#ifdef FEAT_COMMENTS
    int     leader_len = 0;     /* leader len of current line */
    int     next_leader_len;    /* leader len of next line */
    char_u  *leader_flags = NULL;   /* flags for leader of current line */
    char_u  *next_leader_flags; /* flags for leader of next line */
    int     do_comments;        /* format comments */
    int     do_comments_list = 0;   /* format comments with 'n' or '2' */
#endif
    int     advance = TRUE;
    int     second_indent = -1; /* indent for second line (comment
                     * aware) */
    int     do_second_indent;
    int     do_number_indent;
    int     do_trail_white;
    int     first_par_line = TRUE;
    int     smd_save;
    long    count;
    int     need_set_indent = TRUE; /* set indent of next paragraph */
    int     force_format = FALSE;
    int     old_State = State;

    /* length of a line to force formatting: 3 * 'tw' */
    max_len = comp_textwidth(TRUE) * 3;

    /* check for 'q', '2' and '1' in 'formatoptions' */
#ifdef FEAT_COMMENTS
    do_comments = has_format_option(FO_Q_COMS);
#endif
    do_second_indent = has_format_option(FO_Q_SECOND);
    do_number_indent = has_format_option(FO_Q_NUMBER);
    do_trail_white = has_format_option(FO_WHITE_PAR);

    /*
     * Get info about the previous and current line.
     */
    if (curwin->w_cursor.lnum > 1)
    is_not_par = fmt_check_par(curwin->w_cursor.lnum - 1
#ifdef FEAT_COMMENTS
                , &leader_len, &leader_flags, do_comments
#endif
                );
    else
    is_not_par = TRUE;
    next_is_not_par = fmt_check_par(curwin->w_cursor.lnum
#ifdef FEAT_COMMENTS
               , &next_leader_len, &next_leader_flags, do_comments
#endif
                );
    is_end_par = (is_not_par || next_is_not_par);
    if (!is_end_par && do_trail_white)
    is_end_par = !ends_in_white(curwin->w_cursor.lnum - 1);

    curwin->w_cursor.lnum--;
    for (count = line_count; count != 0 && !got_int; --count)
    {
    /*
     * Advance to next paragraph.
     */
    if (advance)
    {
        curwin->w_cursor.lnum++;
        prev_is_end_par = is_end_par;
        is_not_par = next_is_not_par;
#ifdef FEAT_COMMENTS
        leader_len = next_leader_len;
        leader_flags = next_leader_flags;
#endif
    }

    /*
     * The last line to be formatted.
     */
    if (count == 1 || curwin->w_cursor.lnum == curbuf->b_ml.ml_line_count)
    {
        next_is_not_par = TRUE;
#ifdef FEAT_COMMENTS
        next_leader_len = 0;
        next_leader_flags = NULL;
#endif
    }
    else
    {
        next_is_not_par = fmt_check_par(curwin->w_cursor.lnum + 1
#ifdef FEAT_COMMENTS
               , &next_leader_len, &next_leader_flags, do_comments
#endif
                    );
        if (do_number_indent)
        next_is_start_par =
               (get_number_indent(curwin->w_cursor.lnum + 1) > 0);
    }
    advance = TRUE;
    is_end_par = (is_not_par || next_is_not_par || next_is_start_par);
    if (!is_end_par && do_trail_white)
        is_end_par = !ends_in_white(curwin->w_cursor.lnum);

    /*
     * Skip lines that are not in a paragraph.
     */
    if (is_not_par)
    {
        if (line_count < 0)
        break;
    }
    else
    {
        /*
         * For the first line of a paragraph, check indent of second line.
         * Don't do this for comments and empty lines.
         */
        if (first_par_line
            && (do_second_indent || do_number_indent)
            && prev_is_end_par
            && curwin->w_cursor.lnum < curbuf->b_ml.ml_line_count)
        {
        if (do_second_indent && !lineempty(curwin->w_cursor.lnum + 1))
        {
#ifdef FEAT_COMMENTS
            if (leader_len == 0 && next_leader_len == 0)
            {
            /* no comment found */
#endif
            second_indent =
                   get_indent_lnum(curwin->w_cursor.lnum + 1);
#ifdef FEAT_COMMENTS
            }
            else
            {
            second_indent = next_leader_len;
            do_comments_list = 1;
            }
#endif
        }
        else if (do_number_indent)
        {
#ifdef FEAT_COMMENTS
            if (leader_len == 0 && next_leader_len == 0)
            {
            /* no comment found */
#endif
            second_indent =
                     get_number_indent(curwin->w_cursor.lnum);
#ifdef FEAT_COMMENTS
            }
            else
            {
            /* get_number_indent() is now "comment aware"... */
            second_indent =
                     get_number_indent(curwin->w_cursor.lnum);
            do_comments_list = 1;
            }
#endif
        }
        }

        /*
         * When the comment leader changes, it's the end of the paragraph.
         */
        if (curwin->w_cursor.lnum >= curbuf->b_ml.ml_line_count
#ifdef FEAT_COMMENTS
            || !same_leader(curwin->w_cursor.lnum,
                    leader_len, leader_flags,
                      next_leader_len, next_leader_flags)
#endif
            )
        is_end_par = TRUE;

        /*
         * If we have got to the end of a paragraph, or the line is
         * getting long, format it.
         */
        if (is_end_par || force_format)
        {
        if (need_set_indent)
            /* replace indent in first line with minimal number of
             * tabs and spaces, according to current options */
            (void)set_indent(get_indent(), SIN_CHANGED);

        /* put cursor on last non-space */
        State = NORMAL; /* don't go past end-of-line */
        coladvance((colnr_T)MAXCOL);
        while (curwin->w_cursor.col && vim_isspace(gchar_cursor()))
            dec_cursor();

        /* do the formatting, without 'showmode' */
        State = INSERT; /* for open_line() */
        smd_save = p_smd;
        p_smd = FALSE;
        insertchar(NUL, INSCHAR_FORMAT
#ifdef FEAT_COMMENTS
            + (do_comments ? INSCHAR_DO_COM : 0)
            + (do_comments && do_comments_list
                               ? INSCHAR_COM_LIST : 0)
#endif
            + (avoid_fex ? INSCHAR_NO_FEX : 0), second_indent);
        State = old_State;
        p_smd = smd_save;
        second_indent = -1;
        /* at end of par.: need to set indent of next par. */
        need_set_indent = is_end_par;
        if (is_end_par)
        {
            /* When called with a negative line count, break at the
             * end of the paragraph. */
            if (line_count < 0)
            break;
            first_par_line = TRUE;
        }
        force_format = FALSE;
        }

        /*
         * When still in same paragraph, join the lines together.  But
         * first delete the comment leader from the second line.
         */
        if (!is_end_par)
        {
        advance = FALSE;
        curwin->w_cursor.lnum++;
        curwin->w_cursor.col = 0;
        if (line_count < 0 && u_save_cursor() == FAIL)
            break;
#ifdef FEAT_COMMENTS
        (void)del_bytes((long)next_leader_len, FALSE, FALSE);
        if (next_leader_len > 0)
            mark_col_adjust(curwin->w_cursor.lnum, (colnr_T)0, 0L,
                              (long)-next_leader_len);
#endif
        curwin->w_cursor.lnum--;
        if (do_join(2, TRUE, FALSE, FALSE) == FAIL)
        {
            beep_flush();
            break;
        }
        first_par_line = FALSE;
        /* If the line is getting long, format it next time */
        if (STRLEN(ml_get_curline()) > (size_t)max_len)
            force_format = TRUE;
        else
            force_format = FALSE;
        }
    }
    line_breakcheck();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T16:25:54.180

与许多 vim 的东西一样，它是可定制的。默认是一个贪心算法（“一个长的 [than `textwidth`] 行将在空格之后被打破以获得这个宽度”），但是通过设置`formatexpr`你可以使用 vimscript 来格式化你的段落，并且通过设置`formatprg`（例如，to`fmt`或`par`）你可以将控制权交给外部程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T15:50:18.003

第一步是`:help gq`和`:help formatoptions`。在那之后，我会简单地下载整个源代码并用 grep 清除它。如果所有这些都失败了，我会搜索 vim-dev 的档案，并可能在那里询问更多细节。

# database - ms 访问最近更新数据的条件格式语句

> ID：11798614
> 
> 赞同：1
> 
> 时间：2012-08-03T15:21:57.047
> 
> 标签：database, ms-access, ms-access-2007

MS access 2007 中是否有一种方法可以创建条件格式规则，以突出显示过去 7 天内已更新的任何字段？

目前，我有一条规则突出显示前一周添加的任何信息，字段值介于 Now()-7 和 Now() 之间。我想打开该周修改旧条目的选项，并突出显示这些条目。

谢谢。

编辑：基本上数据库可以追溯到大约 6 个月。它跟踪项目的进度，员工在项目的子表单中输入任务详细信息。

```
Date       Employee    Task 
3/14/2012   David      Talked to Remou *about ms-access* 
8/1/2012    John       Solved world hunger 
```

** 表示更新的信息，虽然任务发生在 3/14，但我想用条件格式显示更改。目前唯一要强调的是 8/1 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:40:01.397

到目前为止，最简单的方法是添加更新日期和用户名。它不会为您提供突出显示的文本差异，但实现起来会容易得多。顺便说一句，我总是将创建的时间戳、创建的用户、更新的时间戳和更新的用户添加到任何用户维护的表中。它省去了很多麻烦，因为 Access 不会自动添加这些信息。

# php - 中文字符的PHP urlencode

> ID：11798618
> 
> 赞同：4
> 
> 时间：2012-08-03T15:22:14.810
> 
> 标签：php, utf-8, urlencode, url-encoding

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:32:59.153

You're URLencoding using the charset you specify in your header. *%D0%C2* is 新 in gb2312; *%E6%96%B0* is 新 in UTF-8\. Switch your charset over to UTF-8 and you should fix this issue and still be able to display Simplified Chinese Han.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:36:04.423

In order to reproduce your problem I created a simple PHP file:

```
<?php
var_dump(urlencode('新'));
?> 
```

First I used UTF8 encoding and got `%E6%96%B0`. Afterwards I changed to GB2312 and got `%D0%C2`.

At [http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/) they seem to use JavaScript, that's UTF8 capable and therefore returns `%E6%96%B0`, too.

PS: When changing from GB2312 to UTF8 some editors might break code some internationalized code. So please make sure to have a copy of your file before converting!

# android - 保存碎片的状态？

> ID：11798620
> 
> 赞同：5
> 
> 时间：2012-08-03T15:22:23.500
> 
> 标签：android

我有一个片段类。下面是它：

```
public class FragmentA extends Fragment {

Button button;
WebView myWebView;
int mCurCheckPosition;

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

 }

 @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("curChoice", mCurCheckPosition);
    }

 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
            // Restore last state for checked position.
            mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
        }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{
     View mainView = (View) inflater.inflate(R.layout.frag_a, group, false);
     myWebView = (WebView) mainView.findViewById(R.id.webview);
    myWebView.setWebViewClient(new MyWebViewClient());
    myWebView.getSettings().setPluginsEnabled(true);
    myWebView.getSettings().setBuiltInZoomControls(false); 
    myWebView.getSettings().setSupportZoom(false);
    myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
    myWebView.getSettings().setAllowFileAccess(true); 
    myWebView.getSettings().setDomStorageEnabled(true);
    myWebView.loadUrl("http://www.bbc.co.uk");       
    return mainView;
}

public class MyWebViewClient extends WebViewClient {        
    /* (non-Java doc)
     * @see android.webkit.WebViewClient#shouldOverrideUrlLoading(android.webkit.WebView, java.lang.String)
     */

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.endsWith(".mp4")) 
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse(url), "video/*");

            view.getContext().startActivity(intent);
            return true;
        } 
        else {
            return super.shouldOverrideUrlLoading(view, url);
        }
    }

} 
```

}

问题是当我移入和移出另一个片段时，原始片段的状态（它所在的网页）丢失了。

我怎样才能防止这种情况？我希望网页的状态保持在每个片段之间来回切换。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:43:47.513

您应该在 onSaveInstanceState(Bundle outState) 方法中使用[WebView.saveState](http://developer.android.com/reference/android/webkit/WebView.html#saveState%28android.os.Bundle%29) (Bundle state ) 方法，然后在 onActivityCreated(Bundle savedInstanceState) 方法中使用[WebView.restoreState(Bundle state)恢复状态](http://developer.android.com/reference/android/webkit/WebView.html#restoreState%28android.os.Bundle%29)

```
@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   mWebView.saveState(outState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
   super.onActivityCreated(savedInstanceState);
   mWebView.restoreState(savedInstanceState);
} 
```

还要记住片段生命周期。如果您不确定在哪里恢复状态（*onCreate、onCreateView、onActivityCreated*），请查看 Fragment Lifecycle 文档以找出正确的位置。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

![在此处输入图像描述](../Images/10763db181ba94f9394c47664b003e65.png)

***[onCreate()](http://developer.android.com/reference/android/app/Fragment.html#onCreate%28android.os.Bundle%29)***

系统在创建片段时调用它。在您的实现中，您应该初始化在片段暂停或停止然后恢复时要保留的片段的基本组件。

***[onCreateView()](http://developer.android.com/reference/android/app/Fragment.html#onCreateView%28android.view.LayoutInflater,%20android.view.ViewGroup,%20android.os.Bundle%29)***

当片段第一次绘制其用户界面时，系统会调用它。要为您的 Fragment 绘制 UI，您必须从此方法返回一个 View，它是 Fragment 布局的根。如果片段不提供 UI，您可以返回 null。

***[onActivityCreated()](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)***

当片段的活动被创建并且这个片段的视图层次被实例化时调用。一旦这些部分到位，它就可以用来进行最终初始化，例如检索视图或恢复状态。它对于使用 setRetainInstance(boolean) 来保留其实例的片段也很有用，因为此回调告诉片段何时与新活动实例完全关联。这在 onCreateView(LayoutInflater, ViewGroup, Bundle) 之后和 onStart() 之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T11:57:59.537

我对片段中的 webView 内容有同样的问题。对我有用的是在加载新片段而不是替换它时隐藏当前片段。这会导致视图保留在前一个片段中而不会被破坏。查看下面的代码。

受保护的无效showTableFragment（片段片段，布尔allowBack，资产表）{

```
 FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction transaction = fragmentManager.beginTransaction();
    if (table != null)
        tableSection = (SectionTable) table;

        Fragment lastFragment = fragmentManager.findFragmentByTag("first_frag" );
        if ( lastFragment != null ) {
            transaction.hide( lastFragment );
        }

    if ( fragment.isAdded() ) {
        transaction.show( fragment );
    }
    else {
        transaction.add( R.id.fragment, fragment, "second_frag" ).setBreadCrumbShortTitle( "second_frag" );
    }

    if ( allowBack ) {
        transaction.addToBackStack( "second_frag" );
    }

    transaction.commit();
} 
```

# jquery - 用 jquery 发送 post 方法

> ID：11798623
> 
> 赞同：2
> 
> 时间：2012-08-03T15:22:29.490
> 
> 标签：jquery, xmlhttprequest, activexobject

我有这段代码，但我看不出问题出在哪里：

```
if (window.XMLHttpRequest || window.ActiveXObject) {
    var id = $(this).attr("id");
    alert("bon");
    xhr =getXMLHttpRequest();
    xhr.open("POST", "handlingData.php",true);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.send("type="+$('input[name="type'+id+'"]').val()+"&titre="+$('input[name="titre'+id+'"]').val()+"&texte="+$('input[name="texte'+id+'"]').val()+"&reponse="+$('input[name="reponse'+id+'"]').val());

} 
```

我想做的是在 POST 中发送数据。

这是 getXMLHttpRequest() ：

```
function getXMLHttpRequest() {
var xhr = null;

if (window.XMLHttpRequest || window.ActiveXObject) {
    if (window.ActiveXObject) {
        try {
            xhr = new ActiveXObject("Msxml2.XMLHTTP");
        } catch(e) {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
    } else {
        xhr = new XMLHttpRequest(); 
    }
} else {
    alert("Votre navigateur ne supporte pas l'objet XMLHTTPRequest...");
    return null;
}

return xhr;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:26:54.443

由于您使用 jQuery，您可以使用[`$.post`](http://api.jquery.com/jQuery.post/)

```
// i'll show just to for example
var data = { 
    type : $('input[name="type'+id+'"]').val(),
    titre : $('input[name="titre'+id+'"]').val()
}
$.post('handlingData.php', data, function(response) {
    // do something after the server responded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:28:20.573

您的 xhr.send() 行看起来像一个 GET 请求。使用 POST 时，发送表单数据。由于您使用的是 jQuery，请参阅文档： [http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:28:35.487

为什么不直接使用 jQuery post 方法呢？您可能已经在使用 jQuery 了！

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
var data = { type: $('input[name="type'+id+'"]').val() }; // Fill this in with the data from your form.

$.ajax({
  type: 'POST',
  url: 'handlingData.php',
  data: data,
  success: function(data) {
      // Do processing here...
  }
}); 
```

# php - 如何删除用户和节点，drupal 7？

> ID：11798624
> 
> 赞同：0
> 
> 时间：2012-08-03T15:22:35.083
> 
> 标签：php, drupal, drupal-7

如果添加了用户，我创建了一个模块，该模块会添加一个新节点（带有用户信息）。现在我想实现一个**user_delete**钩子，如果用户被删除，它会删除节点。我不知道如何实现这一点。

此代码为新用户添加一个新节点：

```
function user_profile_user_insert(&$edit, $account, $category) {

    $node = new stdClass();
    $node->type = 'members';
    node_object_prepare($node);

    //dvm($account);
    $node->title = $account->name;

    $user_info = user_load($account->uid);

    $node->field_user["und"][0]["uid"] = $account->uid;

    $path = $account->name;

    $node->path = array('alias' => $path);

    node_save($node);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:27:55.923

试试这个

```
function node_delete($nid) {
 node_delete_multiple(array($nid));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:46:40.857

对于用户，您可以使用

[user_delete](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_delete/7)`$uid`作为参数传递的地方

至于节点有[node_delete](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_delete/7)你传递你传递`$nid`作为参数。

还根据用户ID删除节点有这个功能[node_user_delete](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_user_delete/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T11:46:30.083

在我用 stop_spam_reg 模块解决用户注册垃圾邮件问题之前，我经常像这样清除垃圾邮件帐户：

/开发/php

```
$query = db_select('users', 'u') ->fields('u', array('uid'));
$result = $query->execute();
foreach ($result as $record) {
    if( $record->uid>1){  //replace 1 with the latest valid uid you want to keep 
    user_delete($record->uid);
    }
} 
```

小心离开用户 1，否则你会遇到比垃圾邮件用户更大的问题 :)

# node.js - now.js - Hello World 示例 - “要求未定义”

> ID：11798627
> 
> 赞同：3
> 
> 时间：2012-08-03T15:22:37.910
> 
> 标签：node.js, nowjs-sockets

我无法让[now.js 聊天客户端教程](http://nowjs.com/examples/hw)正常工作。（我也几乎完全按照[这个视频）。](http://vimeo.com/20936525#at=0)

### 服务器.咖啡：

```
fs = require 'fs'
http = require 'http'
now = require 'now'

server = http.createServer (req, res) ->
    fs.readFile(
        'index.html'
        (err, data) ->
            res.writeHead(
                200
                    'Content-Type': 'text/html'
                )
            res.end(data)
        )
server.listen 8080

everyone = now.initialize(server)

everyone.now.distributeMessage = (msg) ->
    everyone.now.receiveMessage(@.now.name, msg) 
```

### 索引.html：

```
<html>
    <head>
        <title>nowjs title</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://raw.github.com/Flotype/now/master/lib/now.js"></script>

        <script type="text/javascript">
        $(document).ready(function() {
            now.name = prompt("What's your name?", "");
            now.receiveMessage = function(name, msg) {
              return $("<div></div>").text("" + name + ": " + msg).appendTo("#msg");
            };
            return $("#send-button").click(function() {
              now.distributeMessage($("#text-input").val());
              return $("#text-input").val("");
            });
          });
        </script>
    </head>

    <body>
        <div id="msg"></div>

        <input type="text" id="text-input">
        <input type="button" value="Send" id="send-button">
    </body>
</html> 
```

当我加载服务器时`node server.js`，

我在 now.js 的第 1 行收到一条错误消息，上面写着“需要未定义”。因此，客户端代码找不到变量“现在”。

我知道'require'是一个节点功能，但我如何让客户理解这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:35:39.330

您包含在客户端源代码 ( `../Flotype/now/master/lib/now.js`) 中的文件是节点服务器端代码，在调用时包含在您的节点进程中`now = require 'now'`。

因此，将包含的客户端源文件从`.../Flotype/now/master/lib/now.js`更改为`/nowjs/now.js`将解决您的问题。

**这个 /nowjs/now.js 文件来自哪里？**

在使用 NowJS（以及许多其他进行客户端/服务器通信的 npm 包）时，您可以扩展服务器对象。这是通过行`everyone = now.initialize(server)`（[代码在这里](https://github.com/Flotype/now/blob/master/lib/now.js#L163)）完成的。

初始化函数的作用是用NowJS 中的( [Code Here ) 类](https://github.com/Flotype/now/blob/master/lib/fileServer.js)[包装您的服务器。](https://github.com/Flotype/now/blob/master/lib/now.js#L181)这会在为客户端[now.js文件提供服务的](https://github.com/Flotype/now/blob/master/lib/client/now.js)[“文件夹”nowjs 下](https://github.com/Flotype/now/blob/master/lib/fileServer.js#L36)添加一个资源。`fileServer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T09:57:47.587

尝试使用 js 命令而不是 node 运行 nodejs 文件时出现此错误。eg：如果nodejs文件名是test.js，我在做

js test.js

而不是节点 test.js

我希望这对搜索此错误的人也有帮助。

# objective-c - 在调用之前释放了 didFinishSelector ASIHTTPRequest 的自定义委托类

> ID：11798631
> 
> 赞同：1
> 
> 时间：2012-08-03T15:23:00.053
> 
> 标签：objective-c, delegates, automatic-ref-counting, asihttprequest

我有一个单独的类，我想处理来自 ASIHTTPRequest 的响应，所以我创建了一个类的实例，然后将它传递给我的请求。问题是我的委托类在请求完成之前被释放。

我正在使用ARC。如何确保为 didFinish/didFail 选择器保留委托？

```
-(void)getStuff
{
    NSURL *url = [NSURL URLWithString:@"http://example.com/json"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    UpdateFeedDelegate *updateFeedDelegate = [[UpdateFeedDelegate alloc] init];

    [request setDelegate:updateFeedDelegate];
    [request setDidFinishSelector:@selector(updateTestDone:)];
    [request setDidFailSelector:@selector(getSingleUpdateFeedBackgroundRequestFailed:)];

    [request startAsynchronous];
} 
```

在示例中，选择器类按预期存在。我得到错误：

`*** -[UpdateFeedDelegate respondsToSelector:]: message sent to deallocated instance 0x56efb50`

`*** NSInvocation: warning: object 0x56efb50 of class '_NSZombie_UpdateFeedDelegate' does not implement methodSignatureForSelector: -- trouble ahead`

`*** NSInvocation: warning: object 0x56efb50 of class '_NSZombie_UpdateFeedDelegate' does not implement doesNotRecognizeSelector: -- abort`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:26:21.273

代表通常由`weak`或`assign`财产持有。您需要保留 a`strong`或`retain`对您的`UpdateFeedDelegate`某处的引用，以使其不会自动释放。通常，我将它保存在创建请求和委托的类中。

# sql - 动态创建 SQL 查询的语法错误

> ID：11798633
> 
> 赞同：2
> 
> 时间：2012-08-03T15:23:14.077
> 
> 标签：sql, ms-access, vb6

我正在使用 VB6 和 MS Access。我的 sql 命令是

```
insert into BatchInfo (BName,BDate,Currency) values('" & Me.txtBatchName.Text & "','" & Me.dtpBatchDate.Value & "','" & Me.cboCurrency.Text & "') 
```

命令在运行时的输出是

```
"insert into BatchInfo (BName,BDate,Currency) values('batch1','8/2/2012','AED')" 
```

这是 BatchInfo 表的架构

```
BatchID   AutoNumber
BName     Text
BDate     Date/Time
Currency  Text 
```

我找不到任何语法错误。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:27:23.367

`Currency`是一个保留字，因此转义它；

```
insert into BatchInfo (BName, BDate, [Currency]) values (... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:26:23.637

MS Access 通常喜欢`#`日期前后的标志：

```
insert into BatchInfo (BName,BDate,Currency) 
values('" & Me.txtBatchName.Text & "','#" & Me.dtpBatchDate.Value & "#','" & Me.cboCurrency.Text & "') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:25:15.100

您使用的是单引号，而不是双引号。

试试这个

```
insert into BatchInfo (BName,BDate,Currency) values(""" & Me.txtBatchName.Text & """,#" & Me.dtpBatchDate.Value & #",""" & Me.cboCurrency.Text & """) 
```

# c# - 多线程比 C# 中的顺序执行花费更多时间

> ID：11798639
> 
> 赞同：0
> 
> 时间：2012-08-03T15:23:34.430
> 
> 标签：c#, multithreading

我在我的 while 循环中使用多线程，如

```
while(reader.read())
{
 string Number= (reader["Num"] != DBNull.Value) ? reader["Num"].ToString() : string.Empty;
  threadarray[RowCount] = new Thread(() =>
  {

  object ID= (from r in Datasetds.Tables[0].AsEnumerable()
                                            where r.Field<string>("Num") == Number
                                            select r.Field<int>("ID")).First<int>();

 });

                threadarray[RowCount].Start();
                RowCount++;
} 
```

但是对于顺序执行，对于 200 个阅读器，它只需要 0.4 秒，但对于线程，它需要 1.1 秒......这是一个示例，但是当我在多个数据库操作的线程中使用多行代码执行它时，我遇到了同样的问题。

对于顺序需要 10 秒的线程它需要更多...

有人可以建议我吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:40:00.123

线程并不总是更快，在许多情况下可能会更慢（例如这里看到的情况）。原因有很多，但最重要的两个是

*   创建线程是一项相对昂贵的操作系统操作
*   上下文切换（CPU 停止在一个线程上工作并开始在另一个线程上工作）再次是一项相对昂贵的操作

创建 200 个线程将花费大量时间（使用默认堆栈大小，这将仅为堆栈分配 200MB 内存），除非您有一台具有 200 个内核的机器，否则操作系统还需要花费大量时间进行上下文切换这些线程之间也是如此。

最终结果是机器花费在创建线程和在它们之间切换的时间远远超过了机器花费在任何工作上的时间。如果减少使用的线程数，您可能会看到性能提升。尝试为您的机器拥有的每个内核使用 1 个线程。

线程数多于内核数的多线程通常仅在 CPU 等待事情发生（如磁盘 IO 或网络通信）的情况下才有用。这不是这里的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:27:04.537

线程并不总是解决方案，而且您使用它的方式绝对不是线程安全的。在某些情况下，诸如磁盘 I/O 或其他瓶颈之类的事情不会从线程中受益。

此外，启动线程也是有成本的。并不是说我会根据您的情况推荐它，但请查看 TPL。[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:39:39.960

科幻作家和技术专家 Jerry Pournelle 曾经说过，在理想世界中，每个流程都应该有自己的处理器。这不是一个理想的世界，您的机器可能有 1 - 4 个处理器。即使您自己在做白日梦，您的 Windows 系统本身也正在运行大量进程。我刚刚统计了我的 Core 2 Quad XP 机器上运行的进程，而 SYSTEM 正在运行 65 个进程。那是必须在 4 个处理器之间共享的 65 个进程。添加更多线程，每个线程只能获得一部分处理器能力。

如果你有一个[Beowulf 集群](http://en.wikipedia.org/wiki/Beowulf_cluster)，你可以将线程共享到单独的机器上，你可能会得到很好的时机。但是您的机器仅使用 4 个处理器无法做到这一点。你要求它做的越多，性能就会越差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:29:16.630

多线程*通常*是**非阻塞**执行的选择。就像地球上的一切事物一样，它也有相关的成本。

对于并行执行的商品，我们以性能为代价。

*通常*没有什么比顺序执行单个任务更快的了。

在您的*具体*场景中，很难提出*真实的建议。*

 *可能你可以考虑多*进程*执行，而不是多*线程*执行。

但我重申，如果不了解应用程序的完整架构和要求，很难判断您是否会从中受益。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T15:35:37.593

看来您正在为每个 read() 创建一个线程。因此，如果它有 200 个 read()，则您有 200 个线程正在运行（可能会更少，因为有些线程可能会很快完成）。取决于您在线程中所做的事情，同时运行的 200 个线程实际上可能会因为其他人提到的开销而减慢系统速度。

多线程在 1) 线程中的工作需要一些时间才能完成时为您提供帮助；2）您可以控制同时运行的线程数。

在您的情况下，您需要尝试，例如 10 个线程。如果有 10 个线程正在运行，则等待其中 1 个完成，然后将线程分配给新的 read()。

如果线程中的工作不需要太多时间，那么最好使用单线程。*

# c++ - 任意精度小数运算 (C/C++) 中的浮点数与有理数

> ID：11798640
> 
> 赞同：11
> 
> 时间：2012-08-03T15:23:37.860
> 
> 标签：c++, c, performance, floating-point, arbitrary-precision

由于实现 AP 小数有两种方法，一种是模拟`double`数据类型的存储和行为，仅使用更多字节，另一种是使用现有的整数 APA 实现将小数表示为有理数，即作为一对整数，分子和分母，这两种方法中哪一种更有可能在性能方面提供有效的算术？（内存使用确实是次要问题。）

我知道现有的 C/C++ 库，其中一些提供带有“浮点数”的分数 APA，而另一些则提供有理数（但是它们都没有定点 APA），当然我可以对依赖于“ float" 实现与使用合理实现的实现相比，但结果将在很大程度上取决于那些特定库的实现细节，我必须从近十个可用的库中随机选择。因此，我感兴趣的两种方法（如果考虑定点 APA，则为三种）更具*理论上的优缺点。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T16:47:03.523

问题是您在标题中提到的*任意*精度是什么意思。这是否意味着“任意，但在编译时预先确定并在运行时固定”？或者它是否意味着“无限，即在运行时可扩展以表示任何有理数”？

在前一种情况下（在编译时可定制精度，但之后修复）我会说最有效的解决方案之一实际上是定点算术（即您提到的两个都不是）。

首先，定点算术不需要任何用于基本算术运算的专用库。它只是一个覆盖在整数算术上的概念。这意味着，如果您真的需要点后的很多数字，您可以使用任何大整数库，将所有数据乘以 2^64，然后您基本上可以立即得到 64 位二进制数字的定点运算点（至少只要涉及算术运算，对乘法和除法进行一些额外的调整）。这通常比浮点或有理表示更有效。

另请注意，在许多实际应用中，乘法运算通常伴随着`x = y * a / b`相互“补偿”的除法运算（如 ），这意味着通常不需要对此类乘法和除法进行任何调整。这也有助于提高定点运算的效率。

其次，定点算术在整个范围内提供统一的精度。这对于浮点或有理表示都不是这样，在某些应用程序中，这可能是后两种方法的一个重大缺点（或好处，取决于您的需要）。

所以，再一次，你为什么只考虑浮点和有理表示。有什么东西阻止你考虑定点表示吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-28T15:16:07.630

由于似乎没有其他人提到这一点，因此有理数和浮点数代表不同的数字集。该值`1/3`可以用有理数精确表示，但不能用浮点数表示。即使是任意精度的浮点数也需要无限多的尾数位来表示重复的小数，例如`1/3`. 这是因为浮点数实际上类似于有理数，但分母被限制为 2 的幂。任意精度的有理数可以表示任意精度浮点数可以表示的所有内容，甚至更多，因为分母可以是任何整数，而不仅仅是幂2.（也就是说，除非我严重误解了任意精度浮点数是如何实现的。）

这是为了回应您对理论利弊的提示。

我知道您没有询问内存使用情况，但这里有一个理论比较，以防其他人感兴趣。如上所述，有理数专门研究可以简单地用分数表示法表示的数字，例如`1/3`or `492113/203233`，而浮点数专门研究可以简单地用 2 次方的科学记数法表示的数字，例如`5*2^45`or `91537*2^203233`。以它们各自的人类可读形式表示数字所需的 ascii 输入量与它们的内存使用量成正比。

如果我有任何错误，请在评论中纠正我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T16:19:59.940

无论哪种方式，您都需要任意大小的整数相乘。这将是您性能的主要因素，因为它的复杂性比`O(n*log(n))`. 诸如对齐操作数和加减大整数之类的事情是`O(n)`，所以我们将忽略这些。

对于简单的加法和减法，您不需要浮点数的乘法^*和有理数的 3 次乘法。花车赢了。

对于乘法，浮点数需要 1 次乘法，有理数需要 2 次乘法。花车有优势。

除法有点复杂，理性可能会在这里获胜，但这绝不是确定的。我会说这是平局。

所以总的来说，恕我直言，加法至少`O(n*log(n))`适用于有理数和`O(n)`浮点数这一事实显然使浮点表示获胜。

^*如果您的指数基数和数字基数不同，您可能需要一次乘法来执行加法。否则，如果您使用 2 的幂作为基数，则对齐操作数需要移位。如果您不使用 2 的幂，那么您可能还需要乘以一位数，这也是一种`O(n)`运算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T14:38:56.463

您实际上是在问这个问题：“我需要和我选择的动物一起参加比赛。我应该选择乌龟还是蜗牛？”。

第一个建议“模拟双精度”听起来像是交错精度：使用一个双精度数组，其和是定义的数字。Douglas M. Priest 有一篇论文“Algorithms for Arbitrary Precision Floating Point Arithmetic”描述了如何实现这种算法。我实现了这一点，但我的经验*非常*糟糕：进行此运行所需的开销会使性能下降 100-1000 倍！使用小数的另一种方法也有严重的缺点：您需要实现 gcd 和 kgv 不幸的是，分子或分母中的每个素数都有很好的机会破坏您的数字并破坏您的表现。

因此，根据我的经验，它们是性能*最差*的选择。

我推荐使用 MPFR 库，它是 C 和 C++ 中最快的 AP 包之一。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T16:05:05.067

有理数不会给出任意精度，而是给出*确切的*答案。然而，它们在存储方面更昂贵，并且使用它们的某些操作变得昂贵，并且根本不允许某些操作，例如取平方根，因为它们不一定会产生合理的答案。

就个人而言，我认为在您的情况下，AP 浮动会更合适。

# css - css 2列布局

> ID：11798645
> 
> 赞同：4
> 
> 时间：2012-08-03T15:23:51.403
> 
> 标签：css, layout

我有一个基本的两列 CSS 布局，CSS 看起来像

```
#sidebar {
    width:100px;
}
#main {
    margin-left:100px;
} 
```

还有一些示例 html

```
<div id="content">
  <div id="sidebar">some sidebar content</div>
  <div id="main">some main content</div>
</div> 
```

这可行，但侧边栏宽度需要与主边距左值匹配似乎重复且容易出错。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:26:41.087

您可以`float`在以下位置使用该属性`#sidebar`：

```
#sidebar {
    width:100px;
    float: left;
} 
```

[JS 小提琴示例](http://jsfiddle.net/HTqHJ/1/)

* * *

但是，使用上面的方法，如果 的内容`#main`导致它的高度往下延伸`#sidebar`，[它会包裹在侧边栏](http://jsfiddle.net/HTqHJ/3/)下面。为避免这种情况，请使用以下`display:table-cell`属性：

```
#sidebar, #main {
    display: table-cell;
} 
```

[JS 小提琴示例](http://jsfiddle.net/HTqHJ/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:25:57.233

**CSS**

```
#sidebar { width:100px; float: left; }
#main { float: right; } 
```

**HTML**

```
<div id="content">
    <div id="sidebar">my stuff</div>
    <div id="main">some main content</div>
    <div style="clear:both;"></div>
</div> 
```

我推荐[960.gs](http://www.960.gs)或[BlueprintCSS](http://www.blueprintcss.org)用于 basic-html/css 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:39:52.913

你可以嵌套`sidebar`在里面`main`，给`main`左填充和`sidebar`-ve 边距。

```
#content{
    width: 100%;
}
#sidebar, #main{
    float: left;
    display: block;
}
#sidebar{
    width: 100px;
    background-color: orange;
    margin-left: -100px;
}
#main{
    padding-left: 100px;
    background-color: green;
    width: 100%;
}

<div id="content">
    <div id="main">
        <div id="sidebar">some sidebar content</div>some main content
    </div>
</div> 
```

***[这](http://jsfiddle.net/Zz6rr/)***是工作演示。

# c++ - boost::program_options 使用 -p 但不使用 --param

> ID：11798646
> 
> 赞同：2
> 
> 时间：2012-08-03T15:23:53.143
> 
> 标签：c++, boost, boost-program-options

我`boost::program_options`用来解析`argv`. 我希望两者`-c`兼而有之`--config`

```
 boost::program_options::options_description description("Utility");
  description.add_options()
    ("help,h", "display this message")
    ("config,c", boost::program_options::value<std::string>(), "Path to configuration file")
    ("config-type", boost::program_options::value<std::string>()->default_value("json"), "type of configuration file (json|xml)")
    ("verbose,v", boost::program_options::value<int>()->default_value(2), "verbosity(0 to 2)")
    ("thread,t",boost::program_options::value<int>()->default_value(0), (boost::format("Max Thread Count %1% to %2%(Processor cores of this machine) if not multi threaded") % 0 % boost::thread::hardware_concurrency()).str().c_str())
    ("action,a", boost::program_options::value<std::string>()->default_value("pack"), "action to perfoem (pack|unpack)");
  boost::program_options::positional_options_description positional_description;
  positional_description.add("action", -1);

  boost::program_options::variables_map var_map;
  boost::program_options::store(boost::program_options::command_line_parser(argc, argv).options(description).positional(positional_description).style(boost::program_options::command_line_style::unix_style).run(), var_map);
  boost::program_options::notify(var_map);

  if(var_map.count("help")){
    std::cout << description;
    return 1;
  }
  if(var_map.count("config") < 1){
    std::cout << "No Configuration file added" << std::endl;
    return 1;
  }

  if(var_map.count("action") < 1){
    std::cout << "Please specify an action to perfoem (pack|unpack)" << std::endl;
    return 1;
  } 
```

but `--config f`or `--config=f`or `--config="f"`not work 并且打印`No Configuration file added`虽然`-c f`有效。
另外，如果我`--config`不带任何参数使用它会抛出异常，说明`required parameter is missing in 'config-type'`哪个已经有默认参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:38:32.940

您的问题似乎与此处描述的完全相同：[boost::program_options - 它是否对命令行选项进行了精确的字符串匹配？](https://stackoverflow.com/questions/4197454/boostprogram-options-does-it-do-an-exact-string-matching-for-command-line-op)

> 我正在使用带有 boost 1.42 的 ubuntu，而 ubuntu repo 没有更高版本。但是 1.42 有那么大吗？

是的。

`--config`您可以通过交换和的规范来解决此问题`--config-type`。

更清洁的解决方案是升级 Boost。Vladimir Prus 在提到的 SO 答案中说该错误已在 1.45 中修复。从您写的内容来看，我想您使用的是 Ubuntu 11.04 (Natty Narwhal)。您可以执行以下任一操作：

1.  从 Ubuntu 11.10 (Boost 1.46) 或 Ubuntu 12.04 (Boost 1.48) 安装更新的 Boost 软件包 - 通过在 /etc/apt/sources.list 中分别用 oneiric 或精确替换 natty 或 11.10 或 12.04
2.  安装较新的 Boost 包包含 Boost backports 的 PPA（例如[https://launchpad.net/~purplekarrot/+archive/ppa](https://launchpad.net/~purplekarrot/+archive/ppa)）
3.  按照 Xeo 的建议从源代码构建 Boost。

# backbone.js - 引用一个集合的多个主干视图

> ID：11798648
> 
> 赞同：0
> 
> 时间：2012-08-03T15:24:03.390
> 
> 标签：backbone.js, backbone-views

我正在尝试创建我的第一个主干应用程序，并且在理解我应该如何使用视图时遇到了一些困难。

我想要做的是有一个搜索输入，每次提交它都会从服务器获取一个集合。我想让一个视图控制搜索输入区域并监听那里发生的事件（在我的示例中单击按钮）和另一个视图，其中包含用于显示搜索结果的子视图。每次新搜索都只是将结果添加到搜索区域中。

个别结果将有其他方法（例如查找他们输入的日期或时间等）。

我有一个这样定义的模型和集合：

```
SearchResult = Backbone.model.extend({
    defaults: {
        title: null,
        text: null
    }
});

SearchResults = Backbone.Collection.extend({
    model: SearchResult,
    initialize: function(query){
        this.query = query;
        this.fetch();
    },
    url: function() {
        return '/search/' + this.query()
    }
}); 
```

在我看来，我有一个代表搜索输入的视图是：

```
var SearchView = Backbone.View.extend({
    el: $('#search'),
    events: {
        'click button': 'doSearch' 
    },
    doSearch: function() {
        console.log('starting new search');
        var resultSet = new SearchResults($('input[type=text]', this.el).val());
        var resultSetView = new ResultView(resultSet); 
    }
});

var searchView = new SearchView();

var ResultSetView = Backbone.View.extend({
    el: $('#search'),
    initialize: function(resultSet) {
        this.collection = resultSet;
        this.render();
    },
    render: function() {
        _(this.collection.models).each(function(result) {
            var resultView = new ResultView({model:result});
        }, this);
    }
});

var ResultView = Backbone.view.extend({
     tagName: 'div',
     model: SearchResult,
     initialize: function() {
         this.render();
     },
     render: function(){ 
         $(this.el).append(this.model.get(title) + '<br>' + this.model.get('text'));
     }
}); 
```

我的 html 看起来大致是这样的：

```
<body>
<div id="search">
    <input type="text">
    <button>submit</button>
</div>
<div id="results">

</div>

</body> 
```

在我的代码中，它可以`console.log('starting new search');`通过 ResultSetView 集合的初始化方法对服务器进行任何 ajax 调用。

我设计这个是正确的还是有更好的方法来做到这一点。我认为因为这两个视图绑定到不同的 dom 元素，所以我不应该从另一个视图中实例化一个视图。任何建议表示赞赏，如果我需要更清楚地说明这一点，请告诉我，我会尽力改写这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:39:27.250

一些问题（可能不是唯一的问题）：

*   您的*SearchView*未绑定到集合*重置*事件；正如所写，它将尝试立即渲染，而集合仍然是空的。
*   *SearchView*在可能应该实例化复合视图*ResultSetView*时实例化单个视图*ResultView*。
**   您将参数传递给*SearchResults*集合的构造函数，但这不是使用它的正确方法。请参阅有关这一点的[文档。](http://backbonejs.org/#Collection-constructor)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:38:43.927

您还没有告诉您`ResultSetView`收听集合中的任何事件。“获取”是异步的。成功完成后，它会发送一个“reset”事件。您的视图需要侦听该事件，然后对该事件执行它需要执行的任何操作（例如渲染）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:50:53.600

修复示例代码中的所有*错别字后，我有一个*[工作 jsFiddle](http://jsfiddle.net/fguillen/KXWz9/)。

在单击按钮后，您会看到 AJAX 调用完成。当然响应是错误的，但这不是重点。

所以我的结论是你的问题出在你代码的另一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:45:30.100

在一些语法问题中，我在您的代码中看到的最可能的问题是竞争条件。在您的视图中，您假设 fetch 已经检索到数据并且您正在执行视图渲染方法。对于真正快速的操作，这可能是有效的，但它使您无法真正知道数据是否存在。处理这个问题的方法正如其他人所建议的那样：您需要监听集合的重置事件；但是，您还必须控制“何时”进行提取，因此最好仅在需要时进行提取 - 在搜索视图中调用 fetch。我对您的收藏和搜索视图进行了一些重组：

```
var SearchResults = Backbone.Collection.extend({
    model: SearchResult,
    execSearch : function(query) {
        this.url = '/search/' + query;
        this.fetch();
    }
});

var SearchView = Backbone.View.extend({
    el: $('#search'),
    initialize : function() {
        this.collection = new SearchResults();
        //listen for the reset
        this.collection.on('reset',this.displayResults,this);
    },
    events: {
        'click button': 'doSearch' 
    },
    /**
    * Do search executes the search
    */
    doSearch: function() {
        console.log('starting new search');
        //Set the search params and do the fetch.
        //Since we're listening to the 'reset' event, 
        //displayResults will execute. 
        this.collection.execSearch($('input[type=text]', this.el).val());
    },
    /**
    * displayResults sets up the views. Since we know that the
    * data has been fetched, just pass the collection, and parse it
    */
    displayResults : function() {
        new ResultSetView({
            collection : this.collection
        });
    }
}); 
```

请注意，我只创建了一次集合。这就是您所需要的一切，因为您使用相同的集合类来执行搜索。后续搜索只需要更改url即可。这比为每次搜索都实例化一个新集合更好的内存管理和更清洁。

我没有进一步处理您的显示视图。但是，您可能会考虑坚持将散列传递给 Backbone 对象的约定。例如，在您的原始代码中，您将“resultSet”作为形式参数传递。但是，约定是将集合传递给表单中的视图： new View({collection: resultSet}); 我意识到这有点挑剔，但遵循约定可以提高代码的可读性。此外，您要确保以 Backbone 对象所期望的方式传递内容。*

# wpf - 自定义控件上的数据绑定不起作用

> ID：11798650
> 
> 赞同：0
> 
> 时间：2012-08-03T15:24:11.287
> 
> 标签：wpf, data-binding, mvvm, custom-controls

我确定我做错了什么。

一些上下文：WPF 应用程序、MVVM、实体框架等。

在我的窗口视图模型中，我有两个属性：`MemberCount`和`EventCount`. 两者都是`int`。

在我看来，我有一个自定义控件的 5 个实例。此自定义控件具有三个依赖属性：`ImageData`、`ButtonText`和`ButtonSubText`。都是`string`。

我想要做的是以这样一种方式绑定控件，即`MemberCount`绑定到一个控件上的`ButtonText`属性，并`EventCount`绑定到`ButtonText`另一个控件上的属性。

所以我做了一些类似的事情：

```
<control:MyControl ... ButtonText="{Binding MemberCount, Mode=OneWay}" ButtonSubText="Members"  Background="{DynamicResource MetroRed}" /> 
```

我的`DataContext`窗口设置为正确的 ViewModel。

无论我尝试什么，我都无法让成员数或事件数显示在控件上。我在输出窗口中收到错误：

```
 System.Windows.Data Error: 40 : BindingExpression path error: 'MemberCount' property
 not found on 'object' ''MyControl' (Name='button')'. BindingExpression:Path=MemberCount;
 DataItem='MyControl' (Name='button'); target element is 'MyControl' (Name='button');
 target property is 'ButtonText' (type 'String') 
```

我已经习惯`DataBinding`了 WPF，但对于我的生活，我无法弄清楚这一点。

我需要做什么才能将视图模型中的属性绑定到自定义控件上的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:44:34.587

我认为问题在于您的用户控件中的数据上下文或绑定。你应该发布你的用户控制代码。

```
<MyUserControl x:Name="uc">
  <TextBlock Text="{Binding ElementName=uc,Path=ButtonText}/>
</MyUserControl> 
```

[在这里](https://stackoverflow.com/questions/11566632/wpf-simple-usercontrol-and-mvvm-pattern-how-to-use/11574219#11574219)查看我的答案，有类似的问题。

# ruby-on-rails - 告诉扭矩箱存档包含某些文件

> ID：11798657
> 
> 赞同：0
> 
> 时间：2012-08-03T15:24:32.880
> 
> 标签：ruby-on-rails, torquebox

我正在尝试通过扭矩箱部署我的 Rails 应用程序。该应用程序依赖于一些 c 库，这些库位于 /lib 的子文件夹中，以 .bin 结尾

遗憾的是，在为部署创建 .knob 存档时，这些文件并未添加到其中。

如何配置扭矩箱以添加这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:27:15.297

扭矩箱宝石中的一个错误不能很好地处理带有空格的路径。在较新的版本中已修复。

# android - 带有视频和文字的 Android ACTION_SEND_MULTIPLE

> ID：11798660
> 
> 赞同：1
> 
> 时间：2012-08-03T15:24:39.833
> 
> 标签：android, video, text, android-intent, share

我正在尝试使用 ACTION_SEND_MULTIPLE 意图同时共享视频文件和文本。

现在，这在 GMAIL 中有效（附件中的视频和邮件正文中的文本），但是我也想在 Whatsapp 中做同样的事情，但它没有出现在意图的应用程序列表中。

我的代码是下一个：

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);

sharingIntent.putExtra(Intent.EXTRA_TEXT, "Descarga la app en...");

ArrayList<Uri> contenidos = new ArrayList<Uri>();

File file = new File(Environment
    .getExternalStorageDirectory()
    .getAbsolutePath()
    + "/Talking/"
    + nombreVideo
    + ".3gp");

Uri screenshotUri = Uri.fromFile(file);

contenidos.add(screenshotUri);

//sharingIntent.putExtra(Intent.EXTRA_STREAM,screenshotUri);
sharingIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, contenidos);
sharingIntent.setType("video/3gpp");

startActivity(Intent.createChooser(sharingIntent, "Share video using")); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:38:27.327

这可能意味着 Whatsapp 不支持这种意图 (ACTION_SEND_MULTIPLE)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T10:22:30.203

现在，由于 whatsapp 的新更新，您的代码可以工作，在此之前不接受这种意图 (ACTION_SEND_MULTIPLE)，因为它一次只接受一个文件。

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
shareIntent.setType("image/png");    
shareIntent.putExtra(android.content.Intent.EXTRA_STREAM,
    Uri.parse("file:///mnt/sdcard/UserImages/"+ ParseUser.getCurrentUser().getObjectId() + ".png"));    
shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,"Hello test");    
startActivity(Intent.createChooser(shareIntent,"Share")); 
```

# infopath2010 - 基于代码的计算后刷新 InfoPath 字段

> ID：11798661
> 
> 赞同：0
> 
> 时间：2012-08-03T15:24:42.370
> 
> 标签：infopath2010

我有一个 InfoPath 2010 表单，它创建了一个新的 Sharepoint 列表项。该表单本质上具有一个输入字段和一个输出字段。如果在输入字段中输入了某些内容，则会执行一些计算，我希望结果显示在输出字段中。由于计算有点复杂，我需要在代码中进行，而不是通过规则。

```
private void CalculateOutput()
{
    XPathNavigator main = MainDataSource.CreateNavigator();
    XPathNavigator service = main.SelectSingleNode("my:meineFelder/my:serviceValue", NamespaceManager);
    double serviceValue = service.ValueAsDouble;
    double output = 3*serviceValue;   // much abbreviated version

    // output now has the correct value
    XPathNavigator outputNav = main.SelectSingleNode("my:meineFelder/my:output", NamespaceManager);

    //Remove the "nil" attribute (otherwise we get an error when the field is a double instead of a string)
    if (outputNav.MoveToAttribute("nil", "http://www.w3.org/2001/XMLSchema-instance"))  outputNav.DeleteSelf();

    outputNav.SetValue(output.ToString());
 } 
```

我的问题是在 InfoPath 预览中一切正常，但是一旦我部署表单并在浏览器中运行它，输出字段不会得到更新，即我看不到我的计算结果。

我尝试过 .ReplaceSelf（使用 OuterXML），结果为零。我还尝试将结果分配给另一个字段，从而触发“设置字段值”规则，但也无济于事。

如果我提交表单，输出值会保存好，但我真的希望用户在提交之前看到输出字段。

有任何想法吗？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:10:45.880

如果是浏览器启用的表单，请确保您已将“回发设置”设置为刷新“始终”

要执行此操作，请单击要触发回发的控件。（在你的情况下服务价值）。转到*浏览器表单*选项卡并将回发*设置设置*为`Always`。

# javascript - Internet Explorer 8 不允许动态创建按钮

> ID：11798662
> 
> 赞同：2
> 
> 时间：2012-08-03T15:24:50.697
> 
> 标签：javascript, html, css

当我尝试动态创建按钮时，Internet Explorer 显示错误。虽然它在 Firefox 中运行良好

```
var deleteButton = document.createElement('input');
 ratingSliderContainer.appendChild(deleteButton);
 deleteButton.setAttribute('type','button');
 deleteButton.setAttribute('value','delete'); 
```

它在第三行显示错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:26:50.460

`type`将输入添加到 DOM 后，您将无法修改它。尝试重新排序您的语句，如下所示：

```
var deleteButton = document.createElement('input');
deleteButton.setAttribute('type','button');
deleteButton.setAttribute('value','delete');
ratingSliderContainer.appendChild(deleteButton); 
```

# objective-c - 当铃声静音时，如何防止我的应用程序（使用 AVPlayer）静音？

> ID：11798664
> 
> 赞同：2
> 
> 时间：2012-08-03T15:25:07.313
> 
> 标签：objective-c, ios, audio, avplayer, ringtone

这个话题可能听起来很奇怪，但请继续阅读。

我正在使用 AVPlayer 播放 iPod 库中的一些声音，并且在插入耳机的情况下使用它时一切正常，但是当我想使用该应用程序从内置扬声器播放时，没有声音输出。（时间计数器和应用程序中的所有其他内容仍在工作，就像有声音输出一样。就像它只是静音一样。）

我检查了音量和静音锁，然后发现铃声被静音了。但铃声静音不会影响其他应用程序，如 iPod 应用程序本身或 Spotify 音乐应用程序。

如何防止我的应用程序（使用 AVPlayer）在铃声被静音并且表现得像其他音乐播放器应用程序时被静音？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:28:51.420

您应该将应用的音频会话设置为`AVAudioSessionCategoryPlayback`. 从[文档](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html#//apple_ref/doc/uid/TP40007875-CH3-SW1)：

> 将此类别用于音频播放至关重要的应用程序。即使屏幕锁定且响铃/静音开关设置为静音，您的音频也能播放。

# php - 使用 setcookie 和未设置的 php 会话传递

> ID：11798665
> 
> 赞同：0
> 
> 时间：2012-08-03T15:25:09.390
> 
> 标签：php, session, session-cookies, unset

我有一个奇怪的问题，当我`setcookie`在 PHP 中使用会话时，当我的浏览器打开时，一切正常，但是当我关闭它时，我无法`$_SESSION`从页面传递到另一个页面！在登录页面我有：

```
$_SESSION['name'] = $_POST['name'];
$_SESSION['pass'] = $_POST['pass'];
$life=2592000;//1 month
setcookie(session_name(),session_id(),time()+$life);
header("location:administrator/");
die(); 
```

我`session_start();`在它们顶部的每个页面中都使用了，我也使用此代码进行注销：

```
session_start();
unset($_SESSION['name']);
unset($_SESSION['pass']);
session_destroy();
header("location:../"); 
```

一个重要的注意事项是，当我检查浏览器 cookie 时，在关闭浏览器之前有两个 cookie，它们的内容值完全相同，一个在会话结束时过期，另一个在一个月后过期，我喜欢这样做，但是我关闭浏览器并返回，有两个 cookie 但值不同！我认为案例问题和会话变量不会从页面传递到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:31:40.670

除了@Matt 提到的问题（您可能需要一些自定义机制来使用 cookie 恢复或重新启动会话），请记住，使用 mod_rewrite 或实际目录会与 cookie 路径混淆！要确保 cookie 在您需要的时间和地点可用，请添加附加参数`/`（[PHP setcookie()](http://php.net/manual/en/function.setcookie.php)、 $path 参数）

# forms - 评论框标签 drupal

> ID：11798670
> 
> 赞同：0
> 
> 时间：2012-08-03T15:25:17.757
> 
> 标签：forms, drupal-6, comments

我想更改 drupal 评论表单框中的“评论*”一词。我也想为特定的节点类型执行此操作。实际上我想为每个节点类型显示不同的评论框标签。

我读了很多关于这个的纪录片。据说包含 hook_form_alter 的主题函数或模块可以做到这一点。但我找不到我该怎么做。

有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:51:38.127

您需要在自定义模块中放置这样的函数：

```
MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'comment_form') {
    $node = node_load($form['nid']['#value']);
    if ($node->type == 'SPECIFIC_NODE_TYPE') {
      $form['comment_filter']['comment']['#title'] = "TEXT_YOU_WANT";
    }
  }
} 
```

# java - JDBCTemplate 检索由 LAST_INSERT_ID() mySQL 技巧设置的值的问题

> ID：11798673
> 
> 赞同：1
> 
> 时间：2012-08-03T15:25:40.387
> 
> 标签：java, mysql, spring, jdbctemplate

我在使用 mySQL 和 Spring JDBCTemplate 时遇到了一些问题。我有一个 INSERT ... ON DUPLICATE KEY UPDATE 增加一个计数器，但使用 LAST_INSERT_ID() 技巧通过最后生成的 id 在同一查询中返回新值。我将 JDCTemplate.update() 与 PreparedStatementCreator 和 GeneratedKeyHolder 一起使用，但我在 KeyHolder.getKeyList() 中获得了多个条目。当我在 mySQL 客户端中手动运行它时，有 2 行受到影响（当它点击 DUPLICATE KEY UPDATE 时），然后它`SELECT LAST_INSERT_ID();`给了我正确的值。

更新：看起来 keyList 中的 3 个条目每个都有 1 个条目，它们都是递增值。所以keyList.get(0).get(0)有应该返回的值，然后keyList.get(0).get(1)就是之前的值+1，然后keyList.get(0).get (2) 是前一个值+1。例如，如果 4 是应该返回的值，它会按该顺序给我 4、5、6。

相关代码为：

```
CREATE TABLE IF NOT EXISTS `ClickChargeCheck` (
uuid VARCHAR(50), 
count INTEGER Default '0',
CreatedOn Timestamp DEFAULT '0000-00-00 00:00:00',
UpdatedOn Timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

String CLICK_CHARGE_CHECK_QUERY = "INSERT INTO ClickChargeCheck (uuid,count,CreatedOn) VALUES(?,LAST_INSERT_ID(1),NOW()) ON DUPLICATE KEY UPDATE count = LAST_INSERT_ID(count+1)";
...
...
GeneratedKeyHolder keyHolder = new GeneratedKeyHolder();

centralStatsJdbcTemplate.update(new PreparedStatementCreator() {
    @Override
    public PreparedStatement createPreparedStatement(Connection con) throws SQLException {
        PreparedStatement ps = con.prepareStatement(CLICK_CHARGE_CHECK_QUERY, Statement.RETURN_GENERATED_KEYS);
        ps.setString(1, uuid);
        return ps;
    }}, keyHolder);

int count = keyHolder.getKey().intValue(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T18:00:12.600

对我来说，我遇到了同样的问题。对于 INSERT...ON DUPLICATE KEY UPDATE，GeneratedKeyHolder 会抛出异常，因为它希望只有一个返回的键，而 MySQL 不是这种情况。我基本上必须实现一个新的 KeyHolder 实现，它可以处理多个返回的键。

```
public class DuplicateKeyHolder implements KeyHolder {
    private final List<Map<String, Object>> keyList;

    /* Constructors */

    public Number getKey() throws InvalidDataAccessApiUsageException, DataRetrievalFailureException {
        if (this.keyList.isEmpty()) {
            return null;
        }
        Iterator<Object> keyIter = this.keyList.get(0).values().iterator();
        if (keyIter.hasNext()) {
            Object key = keyIter.next();
            if (!(key instanceof Number)) {
                throw new DataRetrievalFailureException(
                        "The generated key is not of a supported numeric type. " +
                        "Unable to cast [" + (key != null ? key.getClass().getName() : null) +
                        "] to [" + Number.class.getName() + "]");
            }
            return (Number) key;
        } else {
            throw new DataRetrievalFailureException("Unable to retrieve the generated key. " +
                    "Check that the table has an identity column enabled.");
        }
    }

    public Map<String, Object> getKeys() throws InvalidDataAccessApiUsageException {
        if (this.keyList.isEmpty()) {
            return null;
        }
        return this.keyList.get(0);
    }

    public List<Map<String, Object>> getKeyList() {
        return this.keyList;
    }
} 
```

如果你只使用这个类，否则你会使用 GeneratedKeyHolder，一切正常。而且我发现你甚至不需要`... ON DUPLICATE KEY UPDATE id = LAST_INSERT_ID(id) ...`在你的插入语句中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:43:05.107

结果是 mySQL 的 PreparedStatement 运行该查询，并说它返回 3 行。因此 getGeneratedKeys() 调用（委托给 StatementImpl.getGeneratedKeysInternal()），因为它看到返回 3 行，所以获取第一个 LAST_INSERT_ID() 值，然后从那里递增到行数。所以，我必须获取 GeneratedKeyHolder.getKeyList() 并获取第一个条目，并获取它的第一个值，这将是我需要的值。

# c# - 在 Windows 窗体中使用 Sony ActiveX / OCX 控件 - 在设计时工作，而不是在调试/运行中

> ID：11798676
> 
> 赞同：0
> 
> 时间：2012-08-03T15:25:55.070
> 
> 标签：c#, visual-studio-2010, windows-forms-designer, ip-camera, sony

Visual Studio 2010 专业版，.NET 4.0 w/ SP1。Windows 7 64 位操作系统，带 SP1。x86 目标应用程序。索尼 SNC-RZ50n 网络摄像机。

使用 Sony ActiveX 控件，我可以在包含 ActiveX 控件的表单上查看连接的（通过交叉以太网电缆和第二个 NIC 直接连接到我的 PC）网络摄像机的视频馈送，但*仅在*Visual Studio 的设计模式下. 我通过更改设计器中的参数来激活视频源。但是，一旦我运行/调试应用程序，视频源将不再显示在控件上（在以编程方式更改相同参数之后）。

该控件仍然存在于调试/运行表单上，我正在使用 WireShark 验证仍在发送视频请求，并且仍在返回视频数据。我什至可以使用 Sony 提供的“捕捉”按钮来显示当前视频源的静止画面。它只是不显示的视频框（在调试/运行模式下）。

任何想法为什么会发生这种情况？我知道我看到的设计时表单不是我的表单的真正实例化，而是基类的实例化。基础和这个表格一样，所以应该没有陷阱。

这是设计模式的屏幕截图： [![](../Images/578c52b79a18731d4405d90bcdf8451a.png)](https://imgur.com/hZ0zW) 和运行/调试模式，包括单击“捕获”后看到的内容： [![](../Images/bbd866d7109941da60ca8da99f1fb05f.png)](https://imgur.com/zGSh1)

我已经向 Sony 提出了支持请求，但他们在支持这个超过 6 年的 API 方面并不及时。正如您可以想象的那样，此控件的文档记录很差。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:44:11.463

因此，在 Sony 决定为这个问题提供技术支持之前，我使用了一种解决方法，将他们的 activeX 查看器对象嵌入到一个 html 页面中，然后我将其嵌入到我的应用程序中的一个表单中（通过 Web 浏览器面板）。如果索尼回复我，我会再次更新这篇文章。

# html - 为不同的分辨率使用其他图像

> ID：11798678
> 
> 赞同：0
> 
> 时间：2012-08-03T15:25:56.883
> 
> 标签：html, image, slider, resolution

我正在做一个网站，但我有一个问题。我在屏幕的整个宽度上制作了一个滑块，但我想为小分辨率使用较小的图像，为大分辨率使用较大的图像。我的滑块中的图像是用 html 编写的。这可能吗，我该怎么做？

这是我的网站：[http ://www.yannickluijten.be](http://www.yannickluijten.be)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:36:48.637

您应该调查 CSS 媒体查询。它们允许您根据浏览器的属性（包括窗口大小）设置特定样式（或导入不同的样式表）。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:44:16.820

根据您的最新评论，我建议以下解决方案。

像其他答案一样使用媒体查询（尽管这仅受 CSS3 支持）或：

我可能会使用javascript。检测用户的屏幕分辨率，然后根据屏幕分辨率将 src 插入到图像标签中。您可以将分辨率范围映射到 img srcs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:53:57.957

我的建议是取消愚蠢的`img`标签，而是使用`div`带有背景图像的 s。但是，如果您坚持使用`img`标签，我想您可以像这样保存图像：

```
./
|-- some_image_1024x500.png
|-- some_image_512x250.png
|-- 另一个图像_1024x500.png
|-- 另一个图像_512x250.png
|-- third_image_1024x500.png
|-- third_image_512x250.png
|-- ...

```

然后为图像标签添加一个特殊类，该类应根据窗口大小更改图像分辨率，例如`<img class="width-sensitive" src="images/some_image_1024x500.png" />`

然后编写一个 JavaScript 函数来检查窗口大小并执行图像源替换，例如（使用 jQuery 的伪代码）：

```
// This function is terribly unDRY and ugly but it's just an example
function process_image_sizes() {
    var images = $('img.width-sensitive');

    if($(window).width() > 800) {
        images.each(function(index, element) {
            var src = $(element).prop('src');
            if(/512x250\.png$/.test(src)) {
                $(element).prop('src', src.replace('512x250', '1024x500'));
            }
        }
    }
    else {
        images.each(function(index, element) {
            var src = $(element).prop('src');
            if(/1024x500\.png$/.test(src)) {
                $(element).prop('src', src.replace('1024x512', '512x250'));
            }
        }
    }
} 
```

然后在页面加载时运行该函数一次：

```
$(function() { process_image_sizes(); }); 
```

每当窗口调整大小时：

```
$(window).on('resize', process_image_sizes); 
```

我希望这会有所帮助。

* * *

编辑：作为事后的想法，您可能希望默认从小图像开始，然后在调整大小时切换到较大的图像。我仍然建议只使用 CSS。

# php - 没有收到来自 GCM 服务器的消息

> ID：11798691
> 
> 赞同：3
> 
> 时间：2012-08-03T15:26:23.617
> 
> 标签：php, android, google-cloud-messaging

我正在开发一个使用 Google Cloud Messaging 使用推送通知来通知 android 应用程序的项目。我已经用 PHP 实现了应用程序服务器。当我运行 android 应用程序时，设备从 GCM 服务器获取注册 ID，并将注册 ID 发送到 PHP 服务器（应用程序服务器）。但我从服务器得到以下 httpresponse ：

```
{
    "multicast_id": 7015234441922271670,
    "success": 1,
    "failure": 0,
    "canonical_ids": 0,
    "results": [{
        "message_id": "0:1344007383866721%2adac3a0ad8b3148"
    }]
} 
```

因此，由于成功标志为 1，因此消息正在传递，但是当我在 android 应用程序中显示消息时，它不显示任何内容（null）。我无法弄清楚该消息会发生什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:08:05.473

我有完全相同的问题......这就是我这个周末要尝试的：http: [//developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

摘抄：

注意：如果您的组织有防火墙限制进出 Internet 的流量，您需要将其配置为允许与 GCM 连接。要打开的端口是：5228、5229 和 5230。GCM 通常只使用 5228，但有时会使用 5229 和 5230。GCM 不提供特定 IP。它经常更改IP。我们建议不要使用 ACL，但如果必须使用它们，请采用广泛的方法，例如此支持链接中建议的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:39:20.490

将此添加到您的 php 代码中

```
$data = array(
'registration_ids' => array($reg),
'data' => array(
'type' => 'New',
'title' => 'App Name',
'flag' => '1',
'msg' => 'New Message') 
```

希望这会有所帮助。

# javascript - 通过javascript从不同的网页中获取文本

> ID：11798694
> 
> 赞同：1
> 
> 时间：2012-08-03T15:26:35.473
> 
> 标签：javascript, html, windows-desktop-gadgets

首先大家好，

我是这个网站的新手，但我仍然搜索了 10 分钟，但找不到我的问题的答案，所以我现在就问。

我正在尝试为 windows vista/7 创建一个侧边栏小工具。在那个小工具中，我需要从网络中的另一个页面（不在我的域中）获取一些文本。我知道我真的做不到，但我找到了使用 iframe 的解决方法。现在我想要的页面正在通过 iframe 加载，我可以看到。

问题是如何将 iframe 中该页面的整个文本放入标签或文本区域或其他任何内容中......

由于 Windows 侧边栏小工具不适用于 ASP，因此我需要使用纯 HTML 和 javascript 完成此操作。

任何可以帮助我的人请做，谢谢，Sagi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:34:04.253

侧边栏可能不允许 ASP，但肯定会允许 ajax 调用，您的 asp 页面将驻留在服务器上并完成所有这些艰苦的工作，而您的小工具只会调用您的 asp 页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:32:48.047

您可能希望对托管其他网页的服务器进行 ajax 调用。
jQuery 可能会对此有所帮助（使用`.ajax()`），否则，只需谷歌如何在 js 中正常执行此操作。

**[编辑]**
执行 ajax 调用的中间服务器/代理可能会有所帮助，您可以使用访问控制标头来分配跨站点脚本。请参阅我的[此处](https://stackoverflow.com/questions/7035169/any-way-to-make-cross-server-ajax-calls)了解更多信息：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:01:39.377

如果页面转义您的 iframe 的事实是您可以设置中间服务器的问题，该服务器从您想要的服务器获取文本（如您提到的；www.bbc.com），并将其作为纯文本提供。然后让您的小部件包含来自中间服务器的文本的 iframe。这确实是最干净的方法。

# git - 如何使用 Git 只下载一个变更集？

> ID：11798697
> 
> 赞同：0
> 
> 时间：2012-08-03T15:26:40.933
> 
> 标签：git, bash, deployment

我不知道如何提出这个问题，我知道变更集是一组变更。

我正在用 bash 编写部署脚本，所以我需要下载最少的代码。我不需要下载整个存储库，我只需要特定标签或哈希的代码，但不仅需要更改，我还需要完整的代码。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:48:23.810

我用@knittl提议的'git archive'尝试了这个，效果很好

```
$ git archive v2.0.0 --remote=git@bitbucket.org:john/myapp.git --output=myapp.zip --format=zip 
```

当我没有添加'--format = zip'时尝试解压缩时它抛出了一个错误，它没有像手册页所说的那样从文件名中正确猜到它。

# python - 是否可以将 C 库与 python AppEngine 一起使用？

> ID：11798698
> 
> 赞同：5
> 
> 时间：2012-08-03T15:26:48.123
> 
> 标签：python, c, google-app-engine

我正在调查是否可以将[GHMM 之](http://sourceforge.net/projects/ghmm/)类的库与在 AppEngine 上运行的 python Web 服务一起使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:30:25.193

简短的回答：没有

[https://developers.google.com/appengine/kb/commontasks](https://developers.google.com/appengine/kb/commontasks)

**我可以在我的应用程序中使用哪些第三方库？**

您可以在 Google App Engine 应用程序中使用任何纯 Python 第三方库。为了使用第三方库，只需将文件包含在您的应用程序目录中，当您将应用程序部署到我们的系统时，它们将与您的应用程序一起上传。您可以像在应用程序中导入任何其他 Python 文件一样导入这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:31:55.070

正如@gahooa 所说，一般的答案是否定的。

对于具有 C 依赖项的更流行的库，您现在最好的选择是提交票证 [1]，让其他人为您的票证投票（星标），并让 App Engine 将其添加为受支持的库。

[1] [http://code.google.com/p/googleappengine/issues/entry?template=Feature%20request](http://code.google.com/p/googleappengine/issues/entry?template=Feature%20request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-22T08:12:36.907

2021 年是的[，你可以](https://cloud.google.com/appengine/docs/flexible/custom-runtimes/quickstart)。

AppEngine 的灵活版本允许您执行此操作，标准不允许。

如果像我一样，您无法证明灵活的全部时间运行成本是合理的，那么另一种方法是在 Cloud Run 上托管 C 库并对其进行 API 调用。然后你有 AppEngine 标准和 Cloud Run 的成本，但两者都是按需的。

# android - 如何处理 EditText 数组的单击？

> ID：11798702
> 
> 赞同：0
> 
> 时间：2012-08-03T15:26:55.627
> 
> 标签：android, android-layout, android-widget

我的应用程序有一点问题。在我的应用程序中动态创建一个 EditText 表，获得一个 EditText 数组，此时想要绘制，当我单击 EditText 我的键盘而不是默认键盘时。如何处理 EditText 数组的单击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:31:08.123

尝试 ：

```
for(int i=0; i<etArray.lenght; i++) {
    etArray[i].setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
} 
```

# fluent-nhibernate - NHibernate QueryOver，无法解析属性 'Foobar'

> ID：11798703
> 
> 赞同：1
> 
> 时间：2012-08-03T15:26:58.157
> 
> 标签：fluent-nhibernate

```
public class Base {
public virtual bool Foobar {get;set;}
}

public class MyClass : Base {
public virtual string Foo {get;set;}
public virtual DateTime Bar {get;set;}
}

var query = Session.QueryOver<MyClass>()
.Where(mc => mc.Foo == "Foo" ||  mc.Bar >= DateTime.Now() && mc.Foobar == false).ToRowCountQuery().Future<int>(); 
```

任何人都可以帮助解决我遇到的错误，“无法解析属性 'Foobar'” 此查询是执行未来用法的几个查询之一。

# asp.net - 如何在 ASP.Net 中创建图像按钮？

> ID：11798707
> 
> 赞同：2
> 
> 时间：2012-08-03T15:27:15.893
> 
> 标签：asp.net, forms, button

我将如何在 ASP.Net 而不是 HTML 中表达以下内容？

```
<input type="image" class="no-border" src="img/forms/submit_btn.png" alt="submit" name="submit" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:31:09.760

```
<asp:ImageButton runat="server" ImageUrl="img/forms/submit_btn.png" CssClass="no-border" ToolTip="Submit" name="Submit" Id="SubmitImageButton" /> 
```

# android - 在 SQLite 中使用 Asynctask 和 listview

> ID：11798708
> 
> 赞同：0
> 
> 时间：2012-08-03T15:27:18.187
> 
> 标签：android, sqlite, android-listview, android-asynctask, nullpointerexception

我使用 AsyncTask 查询 SQLite 数据库 - 联系人。

当我在 android 模拟器上运行该代码时，它运行良好（可能是因为我在那里添加的联系人较少），但是当我在我的手机（它有大约 500 个联系人）上运行它时，应用程序运行缓慢。

任何帮助，将不胜感激。谢谢你。

代码如下。

```
 private class loadMoreListView extends AsyncTask<Void, Void, Void> {

            ArrayList<Contact> contactsx = new ArrayList<Contact>();
            @Override
            protected void onPreExecute() {
                pDialog = new ProgressDialog(MainActivity.this);
                pDialog.setMessage("Please wait..");
                pDialog.setIndeterminate(true);
                pDialog.setCancelable(false);
                pDialog.show();
                lv = (ListView) findViewById(R.id.blacklist);

            }

            @Override
            protected void onPostExecute(Void unused) {
                // closing progress dialog

                lv.setAdapter(adapter);

                pDialog.dismiss();
            }

            @Override
            protected Void doInBackground(Void... params) {
                // TODO Auto-generated method stub

                ArrayList<Contact> contactItemsTemp = new ArrayList<Contact>();

                adapter = new EfficientAdapter(MainActivity.this, contactItems);

                DatabaseHandler db = new DatabaseHandler(MainActivity.this);
                String name = "";
                String id = "";
                String phoneNumber = "";
                // Cursor cursor = null;

                List<Integer> mycontactID;
                mycontactID = db.getAllIDs();

                Iterator value = mycontactID.iterator();

                while (value.hasNext()) {
                    int mg=(Integer)value.next();

                    ContentResolver cr = getContentResolver();
                    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
                            null, null, null);
                //  Log.d("edw",Integer.toString(mg));
                    if (cur.getCount() > 0) {

                        while (cur.moveToNext()) {
                            id = cur.getString(cur
                                    .getColumnIndex(ContactsContract.Contacts._ID));
                            if (id.equals((mg)))
                                ;
                            {
                                name = cur
                                        .getString(cur
                                                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                                if (Integer
                                        .parseInt(cur.getString(cur
                                                .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                                    Cursor pCur = cr
                                            .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                                    null,
                                                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                                            + " = ?",
                                                    new String[] { id }, null);
                                    while (pCur.moveToNext()) {
                                        Log.d("number",
                                                pCur.getString(pCur
                                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                                        // Do something with phones
                                        phoneNumber = pCur
                                                .getString(pCur
                                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                                    }
                                    contactItemsTemp.add(new Contact(Integer
                                            .parseInt(id), name, phoneNumber));
                                    pCur.close();

                                    Log.d("Name", name);
                                }
                            }
                        }

                        cur.close();
                    }

                }
                // na kanw to temp contactItems

                List<Integer> messagesx;
                messagesx = db.getAllIDs();
                String namex = "";
                String phonex = "";
                for (Integer mg : messagesx) {
                    for (int i = 0; i < contactItemsTemp.size(); i++) {
                        if (contactItemsTemp.get(i).getID() == mg) {
                            namex = contactItemsTemp.get(i).getContactName();
                            phonex = contactItemsTemp.get(i).getPhoneNumber();
                        }
                    }

                    contactsx.add(new Contact(mg, namex, phonex));
                }

                adapter = new EfficientAdapter(MainActivity.this, contactsx);

                db.close();

                return null;
            }
        }

public static class EfficientAdapter extends ArrayAdapter<Contact>
            implements Filterable {
        private LayoutInflater mInflater;
        // private Bitmap mIcon1;
        private final Context context;
        private final ArrayList<Contact> values;

        public EfficientAdapter(Context context, ArrayList<Contact> values) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            super(context, R.layout.myobject, values);
            mInflater = LayoutInflater.from(context);
            this.context = context;
            this.values = values;
        }

        /**
         * Make a view to hold each row.
         * 
         * @see android.widget.ListAdapter#getView1(int, android.view.View,
         *      android.view.ViewGroup)
         */
        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.myobject, null);

                holder = new ViewHolder();
                holder.contact = (TextView) convertView
                        .findViewById(R.id.contact);
                holder.ph_num = (TextView) convertView
                        .findViewById(R.id.ph_num);

                convertView.setTag(holder);
            }

            else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }

            convertView.setOnLongClickListener(new View.OnLongClickListener() {
                private int pos = position;

                @Override
                public boolean onLongClick(View v) {
                    // TODO Auto-generated method stub

                    // prepare the alert box
                    AlertDialog.Builder alertbox = null;
                    alertbox = new AlertDialog.Builder(context);
                    // set the message to display
                    alertbox.setMessage("Are you sure you want to remove the contact from the blacklist?");
                    // add a neutral button to the alert box and assign a click
                    // listener
                    alertbox.setNeutralButton("OK",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    Toast.makeText(context,
                                            "Ok button pressed " + pos,
                                            Toast.LENGTH_SHORT).show();

                                    DatabaseHandler db = new DatabaseHandler(
                                            context);
                                    db.deleteContact(values.get(position)
                                            .getID());
                                    db.close();
                                }
                            });

                    alertbox.setNegativeButton("Cancel",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    Toast.makeText(context,
                                            "Cancel button pressed " + pos,
                                            Toast.LENGTH_SHORT).show();
                                }
                            });

                    alertbox.show();
                    return true;
                }
            });

            convertView.setOnClickListener(new OnClickListener() {
                private int pos = position;

                @Override
                public void onClick(View v) {
                    // Toast.makeText(context, "Click-" + pos,
                    // Toast.LENGTH_SHORT)
                    // .show();
                }
            });

            holder.contact.setText(getItem(position).getContactName());
            holder.ph_num.setText(getItem(position).getPhoneNumber());

            return convertView;

        }

        static class ViewHolder {
            TextView contact;
            TextView ph_num;

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return values.size();
        }

        @Override
        public Contact getItem(int position) {
            // TODO Auto-generated method stub
            return values.get(position);
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Filter getFilter() {
            // TODO Auto-generated method stub
            return null;
        }

        public void add(Contact con) {
            values.add(con);

            notifyDataSetChanged();
        }

        public void replace(int index, Contact con) {
            values.set(index, con);
            notifyDataSetChanged();
        }

        public void clear() {
            values.clear();
            notifyDataSetChanged();
        }

        public void remove(Contact con) {
            values.remove(con);
            notifyDataSetChanged();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:57:08.900

1.  why is the adapter created twice (yet used only once) , and inside the runInBackground? should it be created only after the raw data was fetched , in the onPostExecute?

2.  is it possible that you didn't implement the adapter nicely ? have you watched the "the world of listView" video of google? please show the adapter's code.

3.  what is the exception of the crash?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:04:59.400

```
lv = (ListView) findViewById(R.id.blacklist); 
```

我会看看这条线。您正试图从嵌套类中找到您的列表视图。尽管这将在 UI 线程上运行，但 AsyncTask 仍然不是一个活动。我相信您的空点是因为您的列表视图引用为空，因为 AsyncTask 的实例无法检索视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:32:23.660

好吧，我不确定是否存在异常，但您似乎正在尝试在初始化之前将联系人添加到您的 contactx 数组列表中。您将其声明为实例变量，但直到 doInBackground() 方法的最后才初始化它。那会抛出空指针......

试着放线..

```
contactx = new ArrayList<Contact>(); 
```

在您的 onPreExecute() 方法中。

# websphere - 我可以从 WebSphere Trust Association Interceptor 获取 LTPA 令牌吗？

> ID：11798713
> 
> 赞同：1
> 
> 时间：2012-08-03T15:27:30.763
> 
> 标签：websphere, ws-security, ltpa

我正在开发一个在 iOs 下运行的智能手机应用程序，它将通过 Web 服务绑定调用 Websphere OpenSCA 组件。我想使用 WSSE-Security binaryToken 中的 LTPA 令牌来保护 Web 服务。

客户希望用户使用客户 ID（8 位）和 6 位中的 3 位 PAC 数字登录。

我正在考虑编写一个 WAS TAI 来处理身份验证，但我不确定我是否可以获得一个 LTPA 令牌，并将其发送回 iOS 应用程序，在那里它将用作 Web 服务调用的后续部分， 如上所述。

有没有人对我如何进行有任何想法或建议？

干杯，骗局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T14:46:43.807

请检查这个。TAI 本身不会生成 LTPA 令牌，但它会创建 TAIResult，WebSphere 将使用它来构建 LTPA 令牌。我希望您需要有一个使用 TAI 保护的端点，或者 TAI 也将在其中侦听的端点（默认情况下，将在所有未经身份验证的对受保护资源的请求上调用 TAI，但您可以在 TAI 中添加逻辑以仅侦听特定的终点

[http://www.ibm.com/developerworks/websphere/techjournal/0508_benantar/0508_benantar.html](http://www.ibm.com/developerworks/websphere/techjournal/0508_benantar/0508_benantar.html)

# javascript - 删除Facebook apprequest，我该如何实现？

> ID：11798714
> 
> 赞同：1
> 
> 时间：2012-08-03T15:27:30.890
> 
> 标签：javascript, facebook, facebook-graph-api

我正在开发一个向用户发送通知的 JavaScript 应用程序。我为此使用下面的方法

```
FB.ui({method: 'apprequests',
       message: 'The message description',
       to: '123456',
       title: 'The message title',
       data : ''
      },function(response){
     console.log(response);
}); 
```

现在我有几个问题，它在 Facebook 指南上说删除应用程序请求是开发人员的工作。如何删除应用程序请求？我知道它可能使用下面的代码，但我如何获得 requestId？我必须从 URL 中获取它吗？

```
FB.api(requestId, 'delete', function(response) {
    console.log(response);
  }); 
```

我的第二个问题：我是否能够传递某些参数，以便我可以根据通知类型加载页面。我打算让用户向他们的朋友发送不同类型的通知。如果它是礼物通知，我想要用户被发送到应用程序的礼物页面，或者如果它是一条消息，我希望用户被发送到应用程序的消息页面。我希望当他们点击通知或应用程序中的接受按钮时发生这种情况中央。

如果它重复我的道歉，任何建议都非常感谢。谢谢

# c# - 通过 C# 中的属性公开对象

> ID：11798715
> 
> 赞同：0
> 
> 时间：2012-08-03T15:27:34.753
> 
> 标签：c#, .net, properties, utilities, scoping

我想编写一个静态实用程序类，它只有一组属性，向用户公开功能

例如我可以打电话：

```
Utils.String.GetHexString("Hello World"); 
```

或者

```
Utils.Stream.CopyBytes(instream, outstream); 
```

我可以将其比作最接近的是 System.Text.Encoding ，其中有 UTF8、ASCII 等属性，因此您可以调用如下内容：

```
Encoding.UTF8.GetBytes("Hello World"); 
```

或者

```
Encoding.ASCII.GetBytes("Hello World"); 
```

问题在于，在编码中，这调用了对用户公开可用的等效对象 ( `UTF8Encoder`, )。`ASCIIEncoder`我想要的是仅通过 Utils 公开对象，而不显示与属性相关的对象，例如

我可以打电话：

```
Utils.Stream.CopyStream(instream, outstream); 
```

但我不能打电话：

```
StreamUtils.CopyStream(instr, outstr) //This class is only accessible via the Utils class! 
```

这是否可能，如果是，这样做是好还是坏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:31:06.127

这是一个想法：

```
public interface IStreamUtil
{
    void CopyStream(Stream int, Stream out);
}

internal class StreamUtil : IStreamUtil
{
    // Implementation
}

public static class Util
{
    private static IStreamUtil stream = new StreamUtil();
    public static IStreamUtil Stream 
    {
        get { return stream; }
    }
} 
```

然而，对我来说，这有点奇怪。我个人更喜欢实用程序功能的扩展方法：

```
inStream.CopyStreamTo(outStream);
myString.GetHexString(); 
```

这也可以被认为是不好的，特别是考虑到扩展方法发现和解析算法。好的 ol'`StreamUtil.Copy()`在大多数情况下都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:33:47.920

无法阻止任何用户创建您`StreamUtils`类型的变量，例如分配从您的`Utils.Stream`属性中检索到的值。

但是，有两种解决方案：

1.  您可以通过创建构造函数来阻止用户`StreamUtils`自己创建您的类的实例`internal`。像这样，只有您的`Utils`类（您可以授予其内部访问权限，无论是通过将其放在同一个程序集中还是使用[`InternalsVisibleTo`属性](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)）可以实例化您的`StreamUtils`类，而您的库的用户只能使用您的实例的功能，但是无法创建自己的实例。

2.  另一种方法是使用公共嵌套静态类。在你的`Utils`类中，你可以声明一个嵌套的公共静态类`Stream`，它提供你需要的静态方法。像这样，用户不能实例化他们自己的`Stream`实例（因为它是静态的），并且至少在 C# 中，你甚至会强制用户总是写`Utils.Stream`来访问你的方法，如果那是你真正想要的。但是请注意，如果您决定将静态类与属性 getter 或其他任何东西交换，这种方法似乎不像第一种方法那么干净，并且会导致重大更改（至少在二进制级别上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:12:49.450

好的，基本上不可能（至少在 C# 中）完全实现我想要的。该类必须是可见的，功能才能通过 Util 类可见。

我的解决方案是将类（例如`StreamUtils`，`StringUtils`）变成单例。它们不能被构造，因为它们的构造函数是内部的。他们的方法是公开的，但永远看不到，因为无法在我的程序集之外实例化该对象。Utils 类通过单例实例向用户公开功能。

考虑以下：

```
class StreamUtils
{
    static StreamUtils instance;

    internal static StreamUtils Instance
    {
        get
        {
            if(instance == null)
            {
                instance = new StreamUtils();
            }
            return instance;
        }
    }

    internal StreamUtils()
    {
    }

    public void CopyStream(Stream input, Stream output)
    {
    }
}

static class Utils
{
    public StreamUtils Stream
    {
        get
        {
             return StreamUtils.Instance;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:35:40.900

您想要的是可能的，但您不应将`Utils`其视为一个类本身，而应将其视为包含一些静态实用程序类的命名空间：

```
namespace Utils
{
    public static class String
    {
        public static string GetHexString(string input)
        {
            ...
        }
    }

    public static class Stream
    {
        public static void CopyBytes(System.IO.Stream instream, System.IO.Stream outstream)
        {
            ...
        }
    }
} 
```

这是否是推荐的做法，是一个完全不同的问题。太多静态实用程序类的问题在于，您不能通过使用依赖注入来实现松散耦合。这会使编写好的单元测试变得更加困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T15:36:08.873

看看你想要达到的目标，我建议，尝试开发[扩展方法。](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

扩展方法使您能够将方法“添加”到现有类型，而无需创建新的派生类型、重新编译或以其他方式修改原始类型。扩展方法是一种特殊的静态方法，但它们被称为扩展类型的实例方法。

阅读[此处](http://msdn.microsoft.com/en-us/library/bb383977.aspx)提供的超链接的更多信息。

# ruby - 心理医生说“在中级正在建立一个 AST……”但是，究竟如何？

> ID：11798716
> 
> 赞同：0
> 
> 时间：2012-08-03T15:27:38.363
> 
> 标签：ruby, string, yaml, psych

我有这个旧代码`Sych`正在使用：

```
yaml_as "tag:yaml.org,2002:#{self}"
def to_yaml(opts = {})
  YAML::quick_emit(self, opts) do |out|
    out.map(taguri, to_yaml_style) do |map|
      map.add('name', name)
      map.add('address', full_address.upcase) if full_address?
    end
  end
end 
```

输出类似的东西：

```
--- !Contact
name: SMOKE OIL
address: |-
  SMOKE OIL
  1 RUE DE LA PAIX
  75002 PARIS
  FRANCE 
```

现在，我正在升级旧代码，然后`Psych`，我阅读了文档并做了：

```
yaml_as "tag:yaml.org,2002:#{self}"
def encode_with(coder)
  coder['name'] = name
  coder['address'] = full_address.upcase if full_address?
end 
```

那确实：

```
--- !Contact
name: SMOKE OIL
address: ! "SMOKE OIL\n1 RUE DE LA PAIX\n75002 PARIS\nFRANCE" 
```

这是不错的 YAML，但它应该是 whois 服务器的输出，而且人类可读性较差……</p>

于是，我又回到了 doc，看了一下第二种做事方式，也就是构建 AST。现在，除非我什么都没看到，否则没有什么可以解释如何获取您构建的 AST，并将其插入 Psych.dump(obj) 仍然可以工作的方式......</p>

我试着做（没有太大希望）：

```
a = Psych::Nodes::Scalar(full_address.upcase)
a.style = Psych::Nodes::LITTERAL
coder['address'] = a if full_address? 
```

但是，很明显，它并没有达到我希望的效果……我也尝试过：

```
def encode_with(coder)
  Psych::Nodes::Mapping.new.tap do |map|
    map.children << Psych::Nodes::Scalar.new("name")
    map.children << Psych::Nodes::Scalar.new(name)
    map.children << Psych::Nodes::Scalar.new("address")
    a = Psych::Nodes::Scalar.new(full_address.upcase)
    a.style = 4
    map.children << a
  end
end 
```

但是，我看不到如何将其插入编码器......

此外，在执行递归操作时，答案需要起作用，这是一个`Contact`对象，但可以要求一个`Domain`包含一些联系人的对象，我希望它尽可能 DRY :-)

那么，有人对如何做到这一点有提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:33:07.533

如果你想创建自己的 AST，那么你不能使用`Psych.dump`. `Psych.dump`使用 Psych 默认值创建自己的 AST。在您的情况下，您想要自定义 AST 创建过程。

查看[源代码`Psych.dump`](https://github.com/tenderlove/psych/blob/v1.3.2/lib/psych.rb#L235-244)可以看到它使用 a[`Psych::Visitors::YAMLTree`](https://github.com/tenderlove/psych/blob/v1.3.2/lib/psych/visitors/yaml_tree.rb)创建 AST。您可以对其进行子类化并自定义它如何处理您的`Contact`类以获得您想要的输出。特别是您需要覆盖[`accept`方法](https://github.com/tenderlove/psych/blob/v1.3.2/lib/psych/visitors/yaml_tree.rb#L71)。

这是一个简单的示例，只是`Contact`该类的特殊情况：

```
class MyYAMLTree < Psych::Visitors::YAMLTree
  def accept target
    return super unless target.is_a? Contact

    @emitter.start_mapping(nil, "tag:yaml.org,2002:#{target.class}", false, Psych::Nodes::Mapping::BLOCK)

    @emitter.scalar 'name', nil, nil, true, false, Psych::Nodes::Scalar::ANY
    @emitter.scalar target.name, nil, nil, true, false, Psych::Nodes::Scalar::ANY

    @emitter.scalar 'address', nil, nil, true, false, Psych::Nodes::Scalar::ANY

    #this is the where we make the address string a literal
    @emitter.scalar target.full_address, nil, nil, true, false, Psych::Nodes::Scalar::LITERAL

    @emitter.end_mapping
  end
end 
```

请注意，它`Psych::Visitors::YAMLTree`是调用的类`encode_with`，这将为您的类完全绕过它。

为了使用它，请使用类似的东西（这基本上是`Psych.dump`使用 MyYAMLTree 的简化版本）：

```
def my_yaml o
  visitor = MyYAMLTree.new
  visitor << o
  visitor.tree.yaml
end 
```

这显然只是一个简单的例子，但希望它能为您指明正确的方向。

# cordova - 在 android WebView 中禁用电子邮件、号码检测

> ID：11798718
> 
> 赞同：2
> 
> 时间：2012-08-03T15:27:43.473
> 
> 标签：cordova, android-intent, sencha-touch-2, android-webview, android-websettings

我正在用phonegap+sencha touch2+android 开发一个应用程序。我有一个面板显示包含电子邮件的各种内容，一些文本形式的数字。因为当我点击号码时它是一个 WebView，并且当我点击号码时，默认 MailCompose Activity 启动，Dialer Activity 启动。我怎样才能阻止这种情况发生。在加载 WebView 的 url 或 web 设置之前，我是否从 android 端缺少一些配置。或者来自 Phonegap 的东西，因为当我看到 log cat 它显示以下行 -

`DroidGap.startActivityForResult(intent,-1)`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T17:34:41.123

您应该能够将以下内容添加到`<head>`您的 HTML 文档中。

```
<head>
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
</head> 
```

这应该适用于大多数 WebKit 浏览器，例如 Android、BlackBerry 和 iOS。

# xml - 使用 XSLT 从 SOAP Wrapped XML 中提取 XML

> ID：11798720
> 
> 赞同：0
> 
> 时间：2012-08-03T15:27:46.440
> 
> 标签：xml, xslt, soap

我已经使用 XSLT 多年，但从未遇到过 SOAP 包装的 XML 文件。

我需要使用下面的 XSLT 修改 XML 消息，以将一些特定元素而不是整个正文提取到新的 XML 文件中。我已经声明了命名空间，但无论我如何设置 xsl:template 匹配，我似乎都无法引用 Batch 元素下的任何内容。

谁能指出我正确的方向。

减少 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:header>
    <div:delivery xmlns:div="http://schemas.biztalk.org/btf-2-0/delivery" SOAP-    ENV:mustUnderstand="1">
    <div:message>
    <div:messageID></div:messageID>
    </div:message>
    <div:to>
    <div:address></div:address>
    </div:to>
    <div:from>
        <div:address></div:address>
    </div:from>
    </div:delivery>
    <prop:properties xmlns:prop="http://schemas.biztalk.org/btf-2-0/properties" SOAP-ENV:mustUnderstand="1">
    <prop:identity>00000000</prop:identity>
    <prop:sentAt>2012-06-27T20:00:57</prop:sentAt>
    <prop:expiresAt>2010-01-01T00:00:00</prop:expiresAt>
    <prop:topic>BBAINV</prop:topic>
    </prop:properties>
</SOAP-ENV:header>
<SOAP-ENV:body>
<Batch xmlns="urn:schemas-basda-org:BatchEnvelope" DocType="Invoice" SupplierName="76787980" Number="2" Date="2012-06-27">
<Invoice>
<InvoiceHead>
<Schema>
<Version>3.09</Version>
</Schema>
<Stylesheet>
<StylesheetOwner>BASDA</StylesheetOwner>
<StylesheetName>eBIS-XML_simple.xsl</StylesheetName>
<Version>1</Version>
<StylesheetType>XSL</StylesheetType>
<LogoURL>http://www.someone.co.uk/stylesheets/invoices.xsl</LogoURL>
</Stylesheet>
<Parameters>
<Language>en-GB</Language>
<DecimalSeparator>.</DecimalSeparator>
<Precision>20.4</Precision>
</Parameters>
<OriginatingSoftware>
<SoftwareManufacturer></SoftwareManufacturer>
<SoftwareProduct></SoftwareProduct>
<SoftwareVersion></SoftwareVersion>
<SoftwareSystemID></SoftwareSystemID>
</OriginatingSoftware>
<TestFlag TestReference="">
<Test ExpectedReply="" Mode=""></Test>
</TestFlag>
<InvoiceType Code="INV" Codelist="99">INVOICE</InvoiceType>
<Function Code="" Codelist="" Preserve=""></Function>
<InvoiceCurrency>
<Currency Code="GBP" Codelist="">GBP</Currency>
<AlternateCurrency Code="" Codelist=""></AlternateCurrency>
<Rate CalculationType=""></Rate>
</InvoiceCurrency>
<Intrastat>
<CommodityCode></CommodityCode>
<CommodityDescription></CommodityDescription>
<NatureOfTransaction Code="" Codelist=""></NatureOfTransaction>
<SupplementaryUnits></SupplementaryUnits>
<CountryOfDestination Code="" Codelist=""></CountryOfDestination>
<ModeOfTransport Code="" Codelist=""></ModeOfTransport>
</Intrastat>
<Checksum></Checksum>
</InvoiceHead>
<InvoiceReferences>
<ContractOrderReference>1499001</ContractOrderReference>
<CostCentre>999925/1</CostCentre>
<BuyersOrderNumber Preserve="">22111366</BuyersOrderNumber>
<Department></Department>
<GeneralLedgerCode></GeneralLedgerCode>
<ProjectCode Preserve="true">SH146597</ProjectCode>
<ProjectAnalysisCode Preserve="true">101999</ProjectAnalysisCode>
<SuppliersInvoiceNumber Preserve="true">10011999</SuppliersInvoiceNumber>
<DeliveryNoteNumber>SH 22925/1</DeliveryNoteNumber>
<SuppliersOrderReference Preserve="">SH 111925</SuppliersOrderReference>
<ResponseTo></ResponseTo>
<BatchNumber></BatchNumber>
<GloballyUniqueID Preserve=""></GloballyUniqueID>
</InvoiceReferences>
</Invoice>
</Batch> 
```

完整的样式表

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:b="urn:schemas-basda-org:BatchEnvelope">

<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes" indent="yes"/>

<xsl:variable name="newline">
<xsl:text>
</xsl:text>
</xsl:variable>

<!-- *******************************************************************************-->
<xsl:template match="/">
    <xsl:apply-templates select="b:Batch"/>
</xsl:template>

<xsl:template match="/b:Batch">
    <Batch>
    <xsl:value-of select="$newline"/><!-- Put in a line break -->
    <xsl:for-each select="b:Invoice">
    <Invoice>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <InvoiceHead>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceHead/InvoiceType"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </InvoiceHead>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="TaxPointDate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="OriginalOrderDate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <InvoiceReferences>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="InvoiceReferences/DeliveryNoteNumber"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="InvoiceReferences/SuppliersOrderReference"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="InvoiceReferences/BuyersOrderNumber"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="InvoiceReferences/SuppliersInvoiceNumber"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </InvoiceReferences>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceDate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <Supplier>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <SupplierReferences>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Supplier/SupplierReferences/BuyersCodeForSupplier"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </SupplierReferences>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </Supplier>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <Buyer>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <BuyerReferences>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Buyer/BuyerReferences/Organisation"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </BuyerReferences>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="Buyer/Party"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="Buyer/Address"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <Contact>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Buyer/Contact/DDI"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </Contact>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </Buyer>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <Delivery>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <DeliverTo>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Delivery/DeliverTo/Address"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </DeliverTo>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="Delivery/DeliveryInformation"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <DeliverFrom>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <DeliverFromReferences>
                    <xsl:value-of select="$newline"/><!-- Put in a line break -->
                    <xsl:copy-of select="Delivery/DeliverFrom/DeliverFromReferences/SuppliersCodeForLocation"/>
                    <xsl:value-of select="$newline"/><!-- Put in a line break -->
                </DeliverFromReferences>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Delivery/DeliverFrom/Party"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Delivery/DeliverFrom/Address"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <Contact>
                    <xsl:value-of select="$newline"/><!-- Put in a line break -->
                    <xsl:copy-of select="Delivery/DeliverFrom/Contact/DDI"/>
                    <xsl:value-of select="$newline"/><!-- Put in a line break -->
                    <xsl:copy-of select="Delivery/DeliverFrom/Contact/Fax"/>
                    <xsl:value-of select="$newline"/><!-- Put in a line break -->
                </Contact>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </DeliverFrom>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </Delivery>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:for-each select="InvoiceLine">
        <InvoiceLine>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <Product>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Product/SuppliersProductCode"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Product/Description"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </Product>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="Narrative"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <Quantity>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Quantity/Amount"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </Quantity>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="Quantity"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="GrossLineTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <Price>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Price/UnitPrice"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="Price/SpecialPriceDescription"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </Price>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceLineInformation"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <LineTax>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="LineTax/TaxRate"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
                <xsl:copy-of select="LineTax/TaxValue"/>
                <xsl:value-of select="$newline"/><!-- Put in a line break -->
            </LineTax>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="LineTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </InvoiceLine>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </xsl:for-each>

        <xsl:copy-of select="Narrative"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <TaxSubTotal>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="TaxSubTotal/TaxRate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="TaxSubTotal/NumberOfLinesAtRate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="TaxSubTotal/TaxableValueAtRate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->       
            <xsl:copy-of select="TaxSubTotal/TaxAtRate"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </TaxSubTotal>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <InvoiceTotal>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/NumberOfLines"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/NumberOfTaxRates"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/FreightCharges"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/LineValueTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/TaxableTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/TaxableTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/TaxTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
            <xsl:copy-of select="InvoiceTotal/GrossPaymentTotal"/>
            <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </InvoiceTotal>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
    </Invoice>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        </xsl:for-each>
    <TaxBatchTrailer>   
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/TaxRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/TotalValueAtRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/TaxableValueAtRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/TaxAtRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/NetPaymentAtRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="TaxBatchTrailer/GrossPaymentAtRate"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
    </TaxBatchTrailer>
    <xsl:value-of select="$newline"/><!-- Put in a line break -->
    <BatchTrailer>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/TotalNumberOfItems"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/TotalValue"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/TaxableTotal"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/TaxTotal"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/NetPaymentTotal"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
        <xsl:copy-of select="BatchTrailer/GrossPaymentTotal"/>
        <xsl:value-of select="$newline"/><!-- Put in a line break -->
    </BatchTrailer>
    <xsl:value-of select="$newline"/><!-- Put in a line break -->
</Batch>
<xsl:value-of select="$newline"/><!-- Put in a line break -->
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:15:35.753

正如Jim Garrison 所提到的，您曾经`d:batch`（即使用尚未声明的'd' 前缀而不是'b'）。那将是一个致命的错误，所以大概您的非精简样式表中并没有这个错误？

阻止匹配 Batch 元素的另一个问题是，您要求的是顶级元素“/b:Batch”，而在示例输入中，`<Batch>`它不是顶级元素。但同样，这可能是您精简的 XSLT 和您的实际样式表之间的差异。（请确保您的裁剪样本能很好地代表真实的东西！）

如果您实际上访问成功`<Batch>`但访问的后代元素没有成功`<Batch>`，那么问题是您没有在它们的命名空间中处理这些元素。

`xmlns="..."`默认命名空间声明`<Batch>`由其所有后代继承（直到被覆盖）。`<Invoice>`因此，任何没有命名空间前缀的后代（例如）都在同一个默认命名空间中，“urn:schemas-basda...”。所以而不是

```
<xsl:for-each select="Invoice"> 
```

你需要

```
<xsl:for-each select="b:Invoice"> 
```

HTH。

# c# - RavenDB 更新索引的触发器

> ID：11798721
> 
> 赞同：3
> 
> 时间：2012-08-03T15:27:51.790
> 
> 标签：c#, ravendb

我想使用 Raven Listener 之类的东西来检测索引何时发生变化。将文档插入数据库时​​，我希望能够等到索引刷新后再触发触发器。有没有人有任何想法？

我看到了 Ayende 关于使用 subscribe 方法的帖子：

```
store.Changes()
      .DocumentSubscription("orders/1293")
      .Subscribe(Reload); 
```

但找不到更多细节。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T08:09:48.353

弗朗西斯，你可以这样做：

```
store.Changes().ForIndex("YourIndex").Subscribe(DoSomething); 
```

# java - setVisible(true) 改变所有可见的实例

> ID：11798724
> 
> 赞同：0
> 
> 时间：2012-08-03T15:28:04.053
> 
> 标签：java, swing, jpanel

我有一个扩展 JPanel 的类，当我尝试将该类的一个特定实例设置为可见时，所有其他类也会扩展。想法？

在 'two' CENTER 设置为可见之前： ![在“两个”打开之前](../Images/7454f07f262747a3073dc1246261c7e9.png)

'two' CENTER 设置为可见后： ![在此处输入图像描述](../Images/4fdb2bb1c2e45c7e435b5b0d2c9fbd7d.png)

请注意所有其他实例都打开了。这是我可以用我的代码做的最好的事情，因为它非常抽象：

称呼 -

```
display.mainScrollPane.getMainPanel().getMachineListPanel().getMachine("two").panel.showPanel(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:49:05.117

原因是 MachineListPanel 实现了 GridLayout。根据定义，GridLayout 强制所有元素具有相同的高度和宽度——即。当其中一个组件的 CENTER 设置为可见时，还必须为布局中的所有其他元素分配空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:37:12.393

没有你的[sscce](http://sscce.org/)很难说。

*   如果您正在使用`BorderLayout`，请注意 中的组件`CENTER`将扩展以填充可用空间。或者，考虑一下`BoxLayout`，[这里](https://stackoverflow.com/a/3175280/230513)和[这里](https://stackoverflow.com/a/6076340/230513)说明。

*   如果您在 and 之后添加组件，*请* 务必按照[此处](https://stackoverflow.com/a/5751044/230513)的建议执行and 。`pack()``setVisible()``validate()``repaint()`

# c# - 在标题栏中添加多行

> ID：11798725
> 
> 赞同：0
> 
> 时间：2012-08-03T15:28:14.270
> 
> 标签：c#, .net, wpf, wpf-controls, wpfdatagrid

我这里有些情况。我需要在.net窗口的标题栏中有多行。一行必须是动态的。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:38:34.677

要绘制到窗口的非客户区，您需要实现自定义窗口镶边，这可能需要大量工作，需要本地 Win32 调用。

如果您想自己动手，这里有一个[教程可以帮助您入门。](http://blogs.msdn.com/b/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx)或者，CodePlex 的现有[库](http://wpfwindow.codeplex.com/)可能足以满足您的目的。

# java - 如何刷新ArrayList？

> ID：11798729
> 
> 赞同：1
> 
> 时间：2012-08-03T15:28:21.123
> 
> 标签：java, android, android-listview

更新和保存后作为结果页面打开的 ArrayList 页面。我想我需要用 invalidate() 以某种方式刷新，以便它反映 UI 上的更改。这是刷新的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:35:18.700

不确定`invalidate()`，但据我所知，当 ListView 更新时，您应该调用`notifyDataSetChanged()`以刷新它并反映 UI 上的更改。

# objective-c - TouchesMoved 与 UIButton xcode 4.4 iOS 5.1.1

> ID：11798731
> 
> 赞同：2
> 
> 时间：2012-08-03T15:28:32.853
> 
> 标签：objective-c, uibutton, touchesmoved

我知道这个问题似乎已经被问及并得到了回答，但我无法解决我的问题。

我想移动视图中的对象以跟随手指的水平滑动（转到上一页或下一页）

为此，我使用了 TouchesBegan、TouchesMoved 和 TouchesEnded 方法。

当在视图背景上开始触摸时它工作正常，但在 uibutton 上开始触摸时不起作用。

为了解决这个问题，我对我想要允许手势的 uibuttons 进行了子类化，当我在 xCode 3.x 和 iOS 4.x 上时它工作正常

今天我刚刚安装了 OSX Moutain Lion 并开始在 xCode 4.4 和 iOS 5.1.1 (iPAD) 上工作。在这里，我使用的是同样运行良好但不再工作的应用程序。

这是我的 UIButton 子类：

```
//  myUIButton.h

#import <UIKit/UIKit.h>

@interface myUIButton : UIButton

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;

@end

//  myUIButton.m

#import "myUIButton.h"

@implementation myUIButton

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches began");
    [self.nextResponder touchesBegan:touches withEvent:event];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches moved");
    [self.nextResponder touchesMoved:touches withEvent:event];
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches ended");
    [self.nextResponder touchesEnded:touches withEvent:event];
}

@end 
```

以下是我的主类中的方法：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"view touches began");
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"view touches moved");
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"view touches ended");
} 
```

当我在 UIButton 上开始触摸时，我从子类中获取每个 NSLog，但主要的 touchesMoved 只执行一次。（self.nextResponder 似乎只工作一次）

有什么改变使它不能在 xcode 4.4 或 iOS 5.1.1 上运行吗？

当我第一次尝试这样做时（在 xcode 3.x 和 iOS 4.x 上），我在这里找到了解决方案： [有没有办法在 iPhone 上传递触摸？](https://stackoverflow.com/questions/631427/is-there-a-way-to-pass-touches-through-on-the-iphone)

但它不再起作用了......

你可以帮帮我吗？

非常感谢。

编辑：使用 [super touches...] 代替或更多 [self.nextResponder touches...] 的问题是相同的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T15:15:55.973

我刚刚解决了这个问题，不记得如何解决了，但是我的文件存在差异，所以我会在这里写下有效的新版本。

```
//  myUIButton.h
#import <Foundation/Foundation.h>

@interface myUIButton : UIButton {
}

@end 
```

.

```
//  myUIButton.m

#import "myUIButton.h"

@implementation myUIButton

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches began");
    [super touchesBegan:touches withEvent:event];
    [self.nextResponder touchesBegan:touches withEvent:event];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches moved");
    [super touchesMoved:touches withEvent:event];
    [self.nextResponder touchesMoved:touches withEvent:event];
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"uibutton touches ended");
    [super touchesEnded:touches withEvent:event];
    [self.nextResponder touchesEnded:touches withEvent:event];
}

@end 
```

在我需要这种行为的每个视图中，我在 file.xib 中放置一个 Pan Gesture Recognizer，我链接到动作 panRecognizer: 在 file.m 中定义

```
// file.m

@synthesize slide_origin_x;

-(IBAction)panRecognizer:(UIPanGestureRecognizer *)recognizer {
    // Recording movement
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        self.slide_origin_x = [NSNumber numberWithFloat:recognizer.view.center.x];
    }

    // Choose an action
    else if (recognizer.state == UIGestureRecognizerStateEnded) {
        int to_launch_action = 100; // Action choosen after 100 pixels
        int touch_move = [self.slide_origin_x intValue] - recognizer.view.center.x;
        if (touch_move > (0 + to_launch_action)) {
            /*
             * What happens if the view slide to the left (eg : go_to_next)
             */
        } else if (touch_move < (0 - to_launch_action)) {
            /*
             * What happens if the view slide to the right (eg : go_to_previous)
             */
        }
        // The view goes back to normal
        recognizer.view.center = CGPointMake([self.slide_origin_x intValue], recognizer.view.center.y);
    }

    // The view is moved
    else {
        CGPoint translation = [recognizer translationInView:self.view];
        recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                             recognizer.view.center.y);
        [recognizer setTranslation:CGPointMake(0,0) inView:self.view];
    }
} 
```

仅供参考：这也适用于 XCode5 和 SDK6.1

# wordpress - 使用 htaccess 重写 Wordpress url 别名的特殊字符

> ID：11798734
> 
> 赞同：1
> 
> 时间：2012-08-03T15:28:38.373
> 
> 标签：wordpress, .htaccess, drupal, redirect, special-characters

我最近将一个相当大的网站（约 6,000 个帖子）从 Drupal 迁移到了 Wordpress。作为该过程的一部分，我将 Drupal 创建的 url 别名迁移到 Wordpress 以用于 SEO 和链接保留。

Drupal 创建的一个在 Drupal 中运行良好的 url 别名示例：

*   /故事/这将成为另一个拉尼娜年

Wordpress 中的该 url 返回 404。但是，这有效：

*   /故事/这将是另一个拉尼娜年

看来我最好的选择是在将 URL 传递给 Wordpress 之前，在 htaccess 中将通用国际字符写入英文字符集重写规则。

知道我该怎么做吗？非常感谢您提供的任何帮助。马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:45:55.913

似乎在 wordpress 中可能有更好的方法来执行此操作，您可能想通过[wordpress Trac 票证](http://core.trac.wordpress.org/report)做一个快速浏览器，可能有一些补丁或临时修复问题。但是，如果您需要使用 htaccess/redirect 方法，您可以使用[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)清理和重定向（如果需要）或显式重定向非 ascii 字符。

RewriteMap 需要访问服务器或虚拟主机配置来设置映射。它可以像`/stories/will-this-be-another-la-niña-year`映射到的 URI列表一样简单`http://yourdomain.com/stories/will-this-be-another-la-nina-year`（所有 ascii URL，这`http://`很重要，因为它告诉 mod_rewrite 重定向浏览器）。或者您可以编写一个脚本来查找非 ascii 字符并将它们替换为适当的 ascii 字符。

文字映射：

```
RewriteMap sanitize txt:/path/to/uri_mapping.txt 
```

脚本映射：

```
RewriteMap sanitize prg:/path/to/sanitize_script.php 
```

然后在您的 htaccess 文件中，您可以像这样调用此映射（这些规则需要*高于*wordpress 规则，因为您希望在wordpress 获取它们*之前*对 URI 进行清理。

```
RewriteRule ^(.*)$ /${sanitize:$1|$1} [L] 
```

如果您无权访问服务器/虚拟主机配置，则必须枚举 htaccess 文件中的可能性，再次将这些规则置于 wordpress 规则之上：

```
# replace ñ
RewriteRule ^(.*)ñ(.*)$ /$1n$2 [R=301,L]

# replace ú
RewriteRule ^(.*)ú(.*)$ /$1ú$2 [R=301,L] 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T13:52:20.103

我刚刚在 .htaccess 文件的开头添加了以下几行，它可以工作：

```
RewriteRule ^(.*)é(.*)$ /$1e$2 [R=301,L]
RewriteRule ^(.*)è(.*)$ /$1e$2 [R=301,L]
RewriteRule ^(.*)ê(.*)$ /$1e$2 [R=301,L]
RewriteRule ^(.*)î(.*)$ /$1i$2 [R=301,L]
RewriteRule ^(.*)ô(.*)$ /$1o$2 [R=301,L]
RewriteRule ^(.*)û(.*)$ /$1u$2 [R=301,L]
RewriteRule ^(.*)â(.*)$ /$1a$2 [R=301,L]
RewriteRule ^(.*)à(.*)$ /$1a$2 [R=301,L]
RewriteRule ^(.*)ï(.*)$ /$1i$2 [R=301,L] 
```

# sql - 是否可以在 SQL 语句中将列从字符串转换为日期时间类型？

> ID：11798738
> 
> 赞同：1
> 
> 时间：2012-08-03T15:28:46.237
> 
> 标签：sql, sqlite, datetime, type-conversion

我需要使用以下 SQL 语句查询 SQLite 数据库表。

```
SELECT * 
FROM Alarms 
WHERE ALARMSTATE IN (0,1,2) 
  AND ALARMPRIORITY IN (0,1,2,3,4) 
  AND ALARMGROUP IN (0,1,2,3,4,5,6,7) 
  AND DateTime(ALARMTIME) BETWEEN datetime("2012-08-02 00:00:00") 
                    AND datetime("2012-08-03 00:00:00") 
ORDER BY ALARMTIME DESC 
```

ALARMTIME 是 TEXT 数据类型。

ALARMTIME 在 datagridview 中显示如下“08/03/2012 11:52 AM”。您可以使用该格式进行检查，例如 DateTime(ALARMTIME) 吗？

此 SQL 语句的唯一问题是它总是返回零数据集或记录。但是，SQLite 并没有抱怨语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:36:54.533

严格来说，SQLite 的列没有[日期时间类型](http://www.sqlite.org/datatype3.html)：

> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值

这里的问题是您使用的字符串条件不是有效的日期/时间，因此它被视为空：

```
sqlite> SELECT datetime("2012-08-3 00:00:00");

sqlite> SELECT datetime("2012-08-03 00:00:00");
2012-08-03 00:00:00 
```

（注意`2012-08-03`而不是`2012-08-3`。）

此外，请确保您的值的`ALARMTIME`格式也正确。

# java - 设计选择：多选对话框？

> ID：11798741
> 
> 赞同：2
> 
> 时间：2012-08-03T15:29:01.773
> 
> 标签：java, design-patterns

我需要创建并显示几个多项选择对话框。这些是带有 3 个或更多按钮的对话框，例如“复制/移动/链接”或“替换/覆盖/忽略”之类的东西。

我被三个相互竞争的实现想法所困扰，但它们似乎都不够好：

*   为每个问题创建对话框，并将结果作为枚举返回，
*   创建一个动态对话框，该对话框采用字符串的可变参数，使用字符串作为标签将它们转换为按钮，并返回所选字符串作为结果。
*   创建一个接受 DialogChoice 可变参数的对话框，我将使用标签的 getText() 方法和选择 DialogChoice 时调用的 act() 方法创建一个接口。

第一个显然会产生冗余代码，但是第二个的返回类型相当脏。第三个似乎是迄今为止最好的，但它看起来像是某种伪装的功能代码，我不确定这是否是健康的 OO 做事方式。

那么，是否还有另一种我省略的解决方案，我是完全重新发明轮子，还是这三个想法中的一个是最好的？

编辑：我使用的是 JavaFx，所以没有可以重用的内置机制，但它更像是一个可以适应多种框架甚至多种语言的一般问题。我只包含了 Java 标记，以免人们与“enum”和“interface”关键字混淆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:44:00.347

> *“第三个似乎是迄今为止最好的，但它看起来像是某种伪装的功能代码”*

是什么让你这么说？对我来说听起来很糟糕。

DialogChoice 对应于一个动作并有一个描述。您将其封装在一个独立存在且可重用的对象中。

唯一的“问题”是它可能会增加冗长，使用匿名类和/或 Runnables ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:35:01.790

枚举您的响应（枚举，甚至是带有常量的旧 Java Bean），如果可能，让您的业务逻辑采用工厂模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:35:12.477

[标准 Swing JOptionPane 可以满足](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)您的需求；可能最好使用它而不是重新发明轮子。

# php - PHP WSDL SOAP 无法导入架构

> ID：11798747
> 
> 赞同：0
> 
> 时间：2012-08-03T15:29:23.447
> 
> 标签：php, soap, soap-client

我正在尝试使用外部网络服务，但出现错误`Parsing Schema: can't import schema from webservice_url`。该服务使用 HTTP Basic 身份验证并使用 SSL。我可以通过网络浏览器登录并查看它生成的 xml，但我无法更改生成的内容，因为它不是我生成 xml 的代码。我有以下代码。

```
$config = array('login' => $user_id, 'password' => $password);
$client = new SoapClient($url, $config); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:57:34.057

好吧，在网上研究和阅读了一堆文章之后，这似乎是 php-soap 的一个限制，一些建议指向使用 curl 来完成。实际上，我决定完全避免使用 PHP，因为我刚刚学习了 Ruby，并且一直在远离 PHP。我通过使用 gem 完成了我的上述任务，该`Savon`gem 有一些关于身份验证和设置 cookie 的非常好的文档。使用这个宝石效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:16:01.437

我在 SoapClient 手册页的[评论部分](http://www.php.net/manual/en/soapclient.soapclient.php#88902)找到了这个：

```
<?php 

$login = 'someone';
$password = 'secret';

$client = new SoapClient(
    'https://' . urlencode($login) . ':' . urlencode($password) . '@www.server.com/path/to/wsdl',
    array(
        'login' => $login,
        'password' => $password
    )
);

?> 
```

似乎基本身份验证用于端点调用，而不是 WSDL 检索。

# python - 如何从python中的文件中删除特定行

> ID：11798750
> 
> 赞同：-2
> 
> 时间：2012-08-03T15:29:28.923
> 
> 标签：python

嘿，我知道这已被问过几次，但我为它编写了自己的代码，但它不起作用，我不明白为什么。这是我的代码

```
def fixfiles ():
    inputfilehandle = open("C:/allCHP1seq.txt","r")
    outputf=open("chp1seqs.txt","w")
    lines = inputfilehandle.readlines()
    for line in lines:
        if "c:\users" not in line:
            outputf.write(line) 
```

这是来自文件的数据示例，文件中基本上有 279 个，用 2 行分隔。但是每一个都是独一无二的，我需要做的是在开始指定目录时去掉那个位。

```
c:\users\gary\desktop\sequences for chp1\14-3 1076.txt
>fig|6666666.13395.peg.1076
atgatcaaagaaaccgaaaaaccgccaaccaccctctttaccgtcgtccc
cgacacccctaccgaaaccctgctgatcaacagctacgaaaccgtgtgtt
ccgtcagcaccctgctgctcgacttgtccgaagacctcaccggcaaacac
cgcgatatcgccttggccattcatcagttgagcgaactgagcgtcctgct
ggtgggcaaagccatggaccagcacacaccccgctgctga 
```

我真的不知道我要去哪里错了：/帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:37:16.627

你真的应该写：

```
if r"c:\users" not in line: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:35:48.793

我想你应该逃避你的`\`:`"c:\\users"`而不是`"c:\users"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:03:19.060

您确实需要[转义反斜杠](http://docs.python.org/reference/lexical_analysis.html)。为了好玩，这里有一个单行解决方案： `open("chp1seqs.txt","w").writelines(filter(lambda line: "c:\\users" in line, open("C:/allCHP1seq.txt","r").readlines()))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:35:37.640

把它们切掉。它比测试每一行更有效，尤其是当您知道问题仅出在前两行时：

```
def fixfiles ():
    inputfilehandle = open("C:/allCHP1seq.txt","r")
    outputf=open("chp1seqs.txt","w")
    lines = inputfilehandle.readlines()[2:]
    for line in lines:
        outputf.write(line) 
```

# ios - CLGeocoder 是否发送 AppleID 或 PhoneID 等？

> ID：11798754
> 
> 赞同：1
> 
> 时间：2012-08-03T15:29:39.623
> 
> 标签：ios, geolocation, geocode, clgeocoder

我正在使用 Apple`CLGeocoder`进行地理编码。我主要是打电话`– reverseGeocodeLocation:`。

文档指出旧的地理编码器使用谷歌，他们有一个我可以阅读的 TOS。我找不到苹果的。

实验上是否有人查看了进出 CLGeocoder 的数据包 reverseGeocodeLocation: call 以弄清楚 Apple 正在获取什么信息？

出于隐私原因，我需要知道。看起来该服务可以是匿名的（除了 IP 跟踪等），但 Apple 也可以发送手机的序列号等。

# azure - 从 Web 角色将配置应用于工作角色实例

> ID：11798756
> 
> 赞同：0
> 
> 时间：2012-08-03T15:29:42.617
> 
> 标签：azure, azure-worker-roles, azure-web-roles, azure-configuration

再会，

我想问一个让我心烦意乱的概念性问题。这里可能没有正确或错误的答案，但我希望能更好地理解我的选择。

情况：我有一个 Windows Azure 应用程序。它由一个带有一个实例的 Web 角色和一个带有两个实例的工作者角色组成。

主要关注的是工人角色。它实现了 Quartz.NET 调度程序来执行从 CRM 系统获取信息的任务，从中制作一个表格并上传到 FTP 服务器，例如，每 8 小时一次。很简单，没什么花哨的。

如果有人需要它在 8 小时间隔之间运行，则 Web 角色用于手动触发作业。简单的用户界面，几乎只有一个按钮。

但是，我希望有可能从 Web 角色更改辅助角色的一些配置选项。例如，目标 FTP 服务器的凭据和作业计划，例如使其每小时运行一次，而不是 8 小时。如果角色脱机，则不需要保留配置。目前 config 是静态类中的一个。

如果我正在运行一个工作角色实例，这似乎不是问题：例如，我将通过队列从 Web 角色发送一条消息并更改工作角色中的一些静态变量。但是让我感到困惑的是消息队列只能由一个角色实例拾取，而不是同时被两个角色实例拾取。因此，我最终将在一个实例中每 8 小时运行一次作业，在另一个实例中每小时运行一次。

有没有办法通知两个实例配置需要更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:01:48.953

有几种方法可以实现这一点。除了@Gaurav 建议的内容之外，让我提供两个：

1.  Windows Azure 配置设置。如果您将 ftp 服务器名称和时间间隔存储为配置设置，然后更改配置，则每个角色实例都可以捕获和处理`RoleEnvironment.Changing`事件，并根据新设置采取行动。
2.  服务总线发布/订阅。您可以让每个角色实例订阅*配置更改*主题。然后，每当您有更改时，将更改发布到主题，作为订阅者的每个实例都将收到消息并采取相应的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:47:42.470

一种可能性是通过您的工作角色实例而不是“GET”消息对消息执行“PEEK”。这样，消息将对所有实例保持可见。显然，挑战将是何时删除该消息。其他替代方法是为每个工作角色实例创建一个单独的队列（您可以命名队列，以便每个工作角色实例实际上会从用于该实例的队列中获取消息，例如，如果您的工作角色实例是 WorkerRole1_IN_0、WorkerRole1_IN_1，您可以将您的队列命名为 workerrole1-in-0、worker-in-1 等）。只是大声思考:)

# .net - MySql 连接器/NET 将 Guids 映射到什么数据类型？

> ID：11798761
> 
> 赞同：1
> 
> 时间：2012-08-03T15:29:57.363
> 
> 标签：.net, mysql

我们正在考虑为我们的应用程序切换到 MySQL。我们的代码大量使用了 Guid。MySQL Connector for .NET 将 Guids 映射到什么数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:26:02.017

事实证明，MySQL 支持`Guids`以`CHAR(36)`or 或`BINARY(16)`.

事实证明，如果表中有很多行，`CHAR(36)`则空间效率低下并且处理器效率低下。`BINARY(16)`性能很糟糕，因为它进行 16 字节比较而不是 128 位整数比较。

我们决定不使用 MySQL。

# xcode - 外观 API 忽略 Monotouch 中动态创建的控件

> ID：11798763
> 
> 赞同：0
> 
> 时间：2012-08-03T15:30:11.383
> 
> 标签：xcode, xamarin.ios

我不确定这是否是单点触控、cocoatouch 问题，或者我做错了。

我的 AppDelegate 中有这段代码

```
UILabel.Appearance.BackgroundColor = UIColor.Clear; 
```

它适用于大多数标签，除了我创建的标签

```
va label = new UILabel(); 
```

有人也看过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:59:50.123

您必须使用 new UILabel (someRectangle) 作为构造函数来创建您的 UILabel。

# php - FBConnect PHP Mysql 获取注册用户到活动会话

> ID：11798765
> 
> 赞同：0
> 
> 时间：2012-08-03T15:30:16.863
> 
> 标签：php, mysql, fbconnect

这里的问题是......只有注册用户才能连接，如果有新用户，它将无法将插入数据获取到数据库。请帮忙。谢谢。

```
$app_id = "";
$app_secret = ""
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true
));
mysql_connect('localhost', '#', '#');
mysql_select_db('#');
# Let's see if we have an active session
$session = $facebook->getSession();

if(!empty($session)) {
    # Active session, let's try getting the user id (getUser()) and user info (api->   ('/me'))
    try{
        $uid = $facebook->getUser();
        $user = $facebook->api('/me');   
    } catch (Exception $e){}
        # We have an active session, let's check if we have already registered the user
        $query = mysql_query("SELECT * FROM usertable WHERE fbid = ". $user['id']);
    $result = mysql_fetch_array($query);     
    if($result['fbid'] = $_SESSION['id']) {      
        // this sets variables in the session 
        //$_SESSION['id'] = $result['fbid'];
        // $_SESSION['fullname'] = $result['fullname'];
        //$_SESSION['email'] = $result['email'];

        $login_url = $facebook->getLoginUrl();
        header("Location: ".$login_url);
    }
}else if(!empty($user)){     
    # If not, let's add it to the database
    //}
    # We have an active session, let's check if we have already registered the user
    $query = mysql_query("SELECT * FROM usertable WHERE fbid = ". $user['id']);
    $result2 = mysql_fetch_array($query);
    if(empty($result)){
        $query = mysql_query("INSERT INTO usertable (fbid, username, email) VALUES   ({$user['id']}, '{$user['username']}'");
        $query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());
        $result2 = mysql_fetch_array($query);

        // this sets variables in the session 
        $_SESSION['id'] = $result2['id'];
        $_SESSION['fullname'] = $result2['fullname'];
        $_SESSION['email'] = $result2['email'];
        //$_SESSION['username'] = $result['username'];
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl();
    header("Location: ".$login_url);
} 
```

# javascript - jQuery - 绑定滑动但保留 touchmove 功能？

> ID：11798767
> 
> 赞同：1
> 
> 时间：2012-08-03T15:30:33.443
> 
> 标签：javascript, jquery, swipe-gesture, touch-event

我正在使用这个：[http](http://pastebin.com/PQYqfeND) : //pastebin.com/PQYqfeND 来绑定 swipeLeft 和 swipeRight。我需要将它放在帖子主体上，但问题是当我绑定它时，它会完全移除触摸 - 这意味着我无法向下/向上拖动。

我能做些什么来允许 touchmove up/down 但仍然绑定 swipeleft/right？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:40:26.073

我来了，再次回答我自己的 Q。我已经做了几天的研究，但我猜不知道要寻找什么。

答案是不要使用上面的代码并修改它： http: [//pastebin.com/daGupDeL](http://pastebin.com/daGupDeL)

使用非常简单，我可以在大内容上绑定多次滑动（我想最多 2 次），然后是幻灯片，没有它们干扰 + 能够在可滑动的内容上使用触摸移动/拖动。

# c++ - 在 Visual Studio 2005 中使用 string::iterator 的空指针问题

> ID：11798771
> 
> 赞同：0
> 
> 时间：2012-08-03T15:30:37.907
> 
> 标签：c++, string, visual-studio-2005, iterator

我正在使用一些遗留代码。在以下场景中，遗留代码在生产模式下工作。我正在尝试构建遗留代码的命令行版本以进行测试。我怀疑这里存在环境设置问题，但我对 C++ 和 Visual Studio 比较陌生（长期使用 eclipse/java 的人）。

此代码正在尝试从流中读取字符串。它读起来很短，在我的调试场景中它的值为 11。然后，它应该读入 11 个字符。但是这段代码在第一个字符上就出错了。具体来说，在下面的`read`方法中，`ptr`为 null，因此`fread`调用会引发异常。为什么是`ptr`NULL？

澄清点，`ptr`在 operator>>(string) 和 operator>>(char) 调用之间变为 null。

```
Mystream& Mystream::operator>>( string& str )
{
string::iterator                it;
short                           length;

*this >> length;

if( length >= 0 )
{
    str.resize( length );
    for ( it = str.begin(); it != str.end(); ++it )
    {
        *this >> *it;
    }
}

return *this;
} 
```

读取short的方法是here并查看文件缓冲区等。这看起来工作正常。

```
Mystream& Mystream::operator>>(short& n )
{
    read( ( char* )&n, sizeof( n ) );
    SwapBytes( *this, ( char* )&n, sizeof( n ) );
    return *this;
} 
```

现在，读取字符的方法在这里：

```
Mystream& Mystream::operator>>(char& n )
{
    read( ( char* )&n, sizeof( n ) );
    return *this;
} 
```

读取方法是：

```
Mystream& Mystream::read( char* ptr, int n )
{
fread( (void*)ptr, (size_t)1, (size_t)n, fp );
return *this;
} 
```

有一件事我不明白，在字符串输入法中，*它是一个字符对吗？那么为什么 operator>>(char &n) 方法会在那一行被调度呢？在调试器中，它看起来像 *it 是一个 0，（尽管一位同事告诉我他不信任 2005 调试器在这些事情上），因此，看起来 &n 被视为空指针，因此读取方法抛出异常。

您可以提供的任何见解都将是最有帮助的！

谢谢约翰

附言。出于好奇，`Swap`Bytes 看起来像这样：

```
inline void SwapBytes( Mystream& bfs, char * ptr, int nbyte, int nelem = 1)
{ 
    // do we need to swap bytes?
if( bfs.byteOrder() != SYSBYTEORDER )
    DoSwapBytesReally( bfs, ptr, nbyte, nelem );
} 
```

`DoSwapBytesReally`看起来像：

```
void DoSwapBytesReally( Mystream& bfs, char * ptr, int nbyte, int nelem )
{
    // if the byte order of the file
    // does not match the system byte order
    // then the bytes should be swapped
int i, n;
char temp;

#ifndef _DOSPOINTERS_
char *ptr1, *ptr2;
#else _DOSPOINTERS_
char huge *ptr1, huge *ptr2;
#endif _DOSPOINTERS_

int nbyte2;

nbyte2 = nbyte/2;

for ( n = 0; n < nelem; n++ ) 
{
    ptr1 = ptr;
    ptr2 = ptr1 + nbyte - 1;

    for ( i = 0; i < nbyte2; i++ ) 
    {
        temp = *ptr1;
        *ptr1++ = *ptr2;
        *ptr2-- = temp;
    }

    ptr += nbyte;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:18:34.417

我会扔掉这个烂摊子，重新开始。从代码中推断，如果你实际工作过，它大致相当于这样的东西：

```
MyStream::operator>>(string &s) { 
    short size;

    fread((void *)&size, sizeof(size), 1, fP);
    size = ntohs(size); // oops: after reading edited question, this is really wrong.
    s.resize(size);
    fread((void *)&s[0], 1, size, fp);
    return *this;
} 
```

在这种情况下，将大部分工作委派给其他功能似乎并没有太大收获——这可以更直接地完成工作，但仍然没有比原来的更长或更复杂（如果有的话，我想说而是相反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:16:08.560

我在公司里发现了一个白胡子，他可以解释发生在我身上的事情。（我已经和 2 位老前辈谈过了，所以我想我已经涵盖了老前辈的攻击途径。）上面的代码不是 ANSI 兼容的 STL 代码。在 Visual Studio 2005 中，微软首先引入了 STL，但存在一些问题。特别是过去可以工作的旧代码现在在 2005 年会失败（我认为 64 位模式也可能在其中发挥作用。）因此，代码将无法在调试模式下工作（但它会在发布模式下工作）。一篇部分文章位于此处。 [http://msdn.microsoft.com/en-us/library/aa985982%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa985982%28v=vs.80%29.aspx)

我看到的特定问题与这条线有关： `it = str.begin()`在问题的第一种方法中。 `str`是一个空字符串。所以`str.begin()`在技术上没有定义。Visual Studio 在调试模式和发布模式之间以不同的方式处理这种情况。（不能在调试中执行此操作，您可以在发布时执行此操作。）

最重要的是，灰胡子建议重写正是杰瑞的。具有讽刺意味的是，灰胡子已经在几个文件中修复了这个问题，但忽略了将其检入主线。哦哦。这吓坏了 &#$!! 离开我。

# delphi - 使用Delphi递归删除所有文件和文件夹

> ID：11798783
> 
> 赞同：13
> 
> 时间：2012-08-03T15:31:24.520
> 
> 标签：delphi, delphi-7

我正在尝试递归删除一个文件夹及其所有子文件夹，但它根本不起作用，所以有人可以检查代码并告诉我我在这里做错了什么吗？

我在 Windows XP 下通过 D7 运行此代码

```
if FindFirst (FolderPath + '\*', faAnyFile, f) = 0 then
      try             
         repeat

            if (f.Attr and faDirectory) <> 0 then
              begin
                    if (f.Name <> '.') and (f.Name <> '..') then
                      begin                            
                        RemoveDir(FolderPath +'\'+ f.Name);
                      end
                    else
                      begin
                        //Call function recursively...
                        ClearFolder(FolderPath +'\'+ f.Name, mask, recursive);
                      end;
              end;

         until (FindNext (f) <> 0);
      finally
        SysUtils.FindClose (f)
      end;
end; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-03T15:38:09.170

我不会自己做所有这些艰苦的工作，而是使用[`SHFileOperation`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164.aspx)：

```
uses
  ShellAPI;

procedure DeleteDirectory(const DirName: string);
var
  FileOp: TSHFileOpStruct;
begin
  FillChar(FileOp, SizeOf(FileOp), 0);
  FileOp.wFunc := FO_DELETE;
  FileOp.pFrom := PChar(DirName+#0);//double zero-terminated
  FileOp.fFlags := FOF_SILENT or FOF_NOERRORUI or FOF_NOCONFIRMATION;
  SHFileOperation(FileOp);
end; 
```

对于它的价值，您的代码的问题在于它永远不会调用`DeleteFile`. 所以目录永远不会被清空，`RemoveDir`失败的调用等等。代码中缺少错误检查并没有真正的帮助，但是添加代码以删除文件会使该代码处于半体面的状态。您还需要注意递归。您必须确保首先删除所有子容器，然后再删除父容器。这需要一定程度的技巧才能做到正确。基本方法是这样的：

```
procedure DeleteDirectory(const Name: string);
var
  F: TSearchRec;
begin
  if FindFirst(Name + '\*', faAnyFile, F) = 0 then begin
    try
      repeat
        if (F.Attr and faDirectory <> 0) then begin
          if (F.Name <> '.') and (F.Name <> '..') then begin
            DeleteDirectory(Name + '\' + F.Name);
          end;
        end else begin
          DeleteFile(Name + '\' + F.Name);
        end;
      until FindNext(F) <> 0;
    finally
      FindClose(F);
    end;
    RemoveDir(Name);
  end;
end; 
```

为了清楚起见，我省略了错误检查，但您应该检查`DeleteFile`and的返回值`RemoveDir`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T16:25:26.750

```
procedure DeleteDir(const DirName: string);
var
  Path: string;
  F: TSearchRec;

begin
  Path:= DirName + '\*.*';
  if FindFirst(Path, faAnyFile, F) = 0 then begin
    try
      repeat
        if (F.Attr and faDirectory <> 0) then begin
          if (F.Name <> '.') and (F.Name <> '..') then begin
            DeleteDir(DirName + '\' + F.Name);
          end;
        end
        else
          DeleteFile(DirName + '\' + F.Name);
      until FindNext(F) <> 0;
    finally
      FindClose(F);
    end;
  end;
  RemoveDir(DirName);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T10:12:17.967

从 Delphi 2010 开始，单元中有一些方法的[`TDirectory`](https://docwiki.embarcadero.com/Libraries/Sydney/en/System.IOUtils.TDirectory)记录`System.IOUtils`，包括

```
TDirectory.Delete('path_to_dir', True); 
```

# asp.net-mvc-3 - MVC3 Postback 没有修改过的数据

> ID：11798794
> 
> 赞同：1
> 
> 时间：2012-08-03T15:32:14.970
> 
> 标签：asp.net-mvc-3, postback

所以我有以下代码：

```
@model Project.Models.ViewModels.SomeViewModel
@using (Html.BeginForm("SomeAction", "SomeController", new { id = Model.Id}))
        {
            for(int i = 0; i < Model.SomeCollection.Count(); i++)
            {
                @Html.HiddenFor(x => Model.SomeCollection.ElementAt(i).Id)
                <div class="grid_6">
                    @Html.TextAreaFor(x => Model.SomeCollection.ElementAt(i).Text, new { @style = "height:150px", @class = "grid_6 input" })
                </div>
            }
            <div class="grid_6 alpha omega">
                <input type="submit" value="Next" class="grid_6 alpha omega button drop_4 gravity_5" />
            </div>
        } 
```

在控制器端，我有以下内容：

```
[HttpPost]
        public ActionResult SomeAction(int id, SomeViewModel model)
        {

            return PartialView("_SomeOtherView", new SomeOtherViewModel(id));
        } 
```

我的视图模型是这样设置的：

```
public class SomeViewModel
{
        public SomeViewModel()
        {

        }
        public IEnumerable<ItemViewModel> SomeCollection { get; set; }

}

public class ItemViewModel{

      public ItemViewModel(){}

      public int Id {get;set;}

      public string Text{get;set;}

} 
```

**如果执行 SomeAction，SomeCollection 始终为空。为了显示用户更新的值，我必须做什么。文本属性和 ID 字段。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:47:09.083

使用**EditorTemplate**

**在您的Views/ *YourcontrollerName***下创建一个 EditorTemplate 文件夹并创建一个具有名称的视图`ItemViewModel.cshtml`

![在此处输入图像描述](../Images/7aba7e992da9dff8f244dc8f630679c0.png)

并在该文件中有此代码

```
@model  Project.Models.ViewModels.ItemViewModel
<p>
 @Html.EditorFor(x => x.Text) 
 @Html.HiddenFor(x=>x.Id)
</p> 
```

现在从您的主视图中，这样称呼它

```
@model  Project.Models.ViewModels.SomeViewModel
@using (Html.BeginForm("SomeAction", "Home", new { id = Model.Id}))
{
    @Html.EditorFor(s=>s.SomeCollection)
    <div class="grid_6 alpha omega">
        <input type="submit" value="Next" class="grid_6 alpha omega button drop_4 gravity_5" />
    </div>
} 
```

现在在您的`HTTPPOST`方法中将填充值。

我不确定你想对这些值做什么（返回部分视图？）所以不要对此发表任何评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:38:25.640

我不确定您是否已发布所有代码。

您的操作方法不执行任何操作，因为它使用新模型对象返回部分视图（出于某种原因来自 post 调用，而不是 ajax 请求）。

您有效地将模型传递回操作，然后丢弃它，并返回一个新的模型对象。这就是您的收藏总是空的原因，它永远不会设置在任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:44:43.453

好吧，一方面，为什么你将模型和模型`id`的属性都发送回控制器？是不是显得有点多余？此外，您正在`for`视图中使用 javascript 循环。使用它会容易得多`@foreach`。

无论如何，你的问题是，当你告诉一个动作接受一个模型时，它会在`post`for 值中查找与模型的每个属性的名称匹配的键。所以，假设我们有以下模型：

```
public class Employee
{
   public string Name;
   public int ID;
   public string Position;
} 
```

如果我像这样传回去：

```
@using(Html.BeginForm("SomeAction", "SomeController"))
{
     <input type="text" name = "name" [...] />    //in your case HtmlHelper is doing this for you, but same thing
     <input type="number" name = "id" [...] />
     <input type="submit" name = "position" [...] />
} 
```

要将这个模型传回控制器，我必须这样做：

## 接受模型

```
//MVC matches attribute names to form values
public ActionResult SomethingPosted(Employee emp)
{
    //
} 
```

## 接受一组值

```
//MVC matches parameter names to form values
public ActionResult SomethingPosted(string name, int id, string postion)
{
    //
} 
```

或这个：

## 接受 FormCollection

```
//same thing as first one, but without a strongly-typed model
public ActionResult SomethingPosted(FormCollection empValues)
{
    //
} 
```

因此，这是您的代码的更好版本。

## 你的新观点

```
@model Project.Models.ViewModels.SomeViewModel
@{
    using (Html.BeginForm("SomeAction", "SomeController", new { id = Model.Id}))
        {
            foreach(var item in Model)
            {
                @Html.HiddenFor(item.Id)
                <div class="grid_6">
                    @Html.TextAreaFor(item.Text, new { @style = "height:150px", @class = "grid_6 input" })
                </div>
            }
            <div class="grid_6 alpha omega">
                <input type="submit" value="Next" class="grid_6 alpha omega button drop_4 gravity_5" />
            </div>
        }
} 
```

## 你的新动作

```
[HttpPost]
public ActionResult SomeAction(int Id, string Text)
{
    //do stuff with id and text
    return PartialView("_SomeOtherView", new SomeOtherViewModel(id));
} 
```

或者

```
[HttpPost]
public ActionResult SomeAction(IEnumerable<ItemViewModel> SomeCollection)  //can't use someviewmodel, because it doesn't (directly) *have* members called "Id" and "Text"
{
    //do stuff with id and text
    return PartialView("_SomeOtherView", new SomeOtherViewModel(id));
} 
```

# android - 如何从 Android 连接到 MySQL 数据库？

> ID：11798798
> 
> 赞同：0
> 
> 时间：2012-08-03T15:32:32.133
> 
> 标签：android, mysql

我尝试通过 mysql-connector-java-5.1.21-bin.jar 库连接到 MySQL。这是我的代码：

```
class Test {
    private static final String CONNECTION = "jdbc:mysql://x.x.x.x:3306/db";

    private void getMySQL() {
    Connection con = null;
    String str_res = "";

    try{
    Class.forName("com.mysql.jdbc.Driver").newInstance();
        // Properties for user and password. 
        Properties p = new Properties();
    p.put("user","***");
    p.put("password","***");

        // Now try to connect
    Connection c = DriverManager.getConnection(CONNECTION, p);
        ...
    } catch (Exception e) {}    
} 
```

但我有一个网络异常：

```
com.mysql.jdbc.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago.
The driver has not received any packets from the server.
java.net.SocketException: The operation timed out
null
null
Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
0
0 
```

怎么了？

# sql - 查询无效对象上的自联接名称 MSSQL 2008

> ID：11798799
> 
> 赞同：0
> 
> 时间：2012-08-03T15:32:34.393
> 
> 标签：sql, tsql

我正在尝试对此查询进行自联接并不断收到错误消息`invalid object name x`

```
select row_number() over(order by patientid,admissiondate, claimsfromdate,datediff(dd,admissiondate, claimsfromdate)) as rn
    ,x.patientid, x.admissiondate, x.claimsfromdate, x.rehabwait

from
(
SELECT distinct 
        patientid
        ,admissiondate
        ,claimsfromdate
        ,DATEDIFF(dd, admissiondate, claimsfromdate) as rehabWait, hcpcs
FROM    Claims
WHERE   hcpcs in ('g0151', '97001', '97002', '9339') and claimsfromdate > admissiondate
) x inner join x as x2 on x.patientid=x2.patientid 
```

如果不将其保存为视图或将查询重写两次（一次在 from，一次在内部连接），我就无法做到这一点，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:58:52.097

使用 CTE：

```
with x as (
     SELECT distinct patientid, admissiondate, claimsfromdate,
            DATEDIFF(dd, admissiondate, claimsfromdate) as rehabWait, hcpcs
     FROM    Claims
     WHERE   hcpcs in ('g0151', '97001', '97002', '9339') and
             claimsfromdate > admissiondate
    )
select row_number() over (order by patientid, admissiondate,
                                   claimsfromdate,
                                   datediff(dd,admissiondate, claimsfromdate)
                         ) as rn,
       x.patientid, x.admissiondate, x.claimsfromdate, x.rehabwait
from x inner join
     x as x2
     on x.patientid=x2.patientid 
```

解决了您最初的问题后，我看不到您使用 x2 做什么。它不出现在“SELECT”语句中。您所做的只是为给定患者创建所有索赔的交叉产品。也许这是合理的。我希望 group by 成为此类查询的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:59:22.377

你不能`JOIN`以这种方式来处理表格。您需要创建一个您引用两次的视图，或者您可以执行以下操作：

```
SELECT row_number() over(order by patientid, admissiondate, claimsfromdate, rehabWait) as rn
    , x.patientid
    , x.admissiondate
    , x.claimsfromdate
    , x.rehabwait 
FROM 
(
    SELECT distinct 
            c1.patientid
            , c1.admissiondate
            , c1.claimsfromdate
            , DATEDIFF(dd, c1.admissiondate, c1.claimsfromdate) as rehabWait
            , c1.hcpcs
    FROM    Claims c1
    INNER JOIN Claims c2
        ON c1.patientid = c2.patientid
    WHERE  c1.hcpcs in ('g0151', '97001', '97002', '9339') and c1.claimsfromdate > c1.admissiondate
) x 
```

# python - 将二进制 .dat 文件作为数组读取

> ID：11798800
> 
> 赞同：8
> 
> 时间：2012-08-03T15:32:41.993
> 
> 标签：python, arrays, numpy

我有一个经过多次迭代的代码。在每次迭代中，代码都会生成一个基于 numpy 的数组。我将基于 numpy 的数组附加到现有的二进制 .dat 文件中。我使用以下代码生成数据：

```
WholeData = numpy.concatenate((Location,Data),axis=0)  
# Location & Data are two numpy arrays
DataBinary = open('DataBinary.dat','ab')
WholeData.tofile(DataBinary)
DataBinary.close() 
```

我正在尝试将整个二进制文件读入一个数组。我有以下困难：

1.  我尝试了以下代码：

    ```
    NewData = numpy.array('f')
    File1 = open('DataBinary.dat','rb')
    NewData.fromstring(File1.read())
    File1.close() 
    ```

    错误状态：

    > 回溯（最后一次调用）：文件“”，第 1 行，在 AttributeError 中：'numpy.ndarray' 对象没有属性'fromstring'

2.  我尝试使用基于数组的数组，然后将文件读入数组。

    ```
    from array import array
    File1 = open('DataBinary.dat','rb')
    NewData.fromstring(File1.read())
    File1.close() 
    ```

但是，`NewData`是错误的，即，它与 不同`WholeData`。我想将数据保存为`numpy.array`并读取它`array.array`可能不是一个好的选择。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T15:37:59.183

我认为这`numpy.fromfile`就是你想要的：

```
import numpy as np
myarray = np.fromfile('BinaryData.dat', dtype=float) 
```

另请注意，根据文档，这不是存储数据的最佳方式，因为“丢失了有关精度和字节顺序的信息”。换句话说，您需要确保传递给 dtype 的数据类型与您最初写入文件的内容兼容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-17T16:59:51.197

要将二进制文件从文件读取到列表：

```
list_int = [ord(i) for i in fd.read()] 
```

# nuget - 防止 nuget 包修改

> ID：11798803
> 
> 赞同：2
> 
> 时间：2012-08-03T15:32:48.293
> 
> 标签：nuget

有时，包喜欢修改我的 web.config，添加我并不真正需要的引用，或者实现类似`WebActivator`并挂钩我的东西`Application_Start`（我实际上以其他方式处理它，比如使用 IoC 容器。

如何防止这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:15:11.707

NuGet 包管理器并不真正支持这种情况，但一种方法是改用 nuget.exe。

通过 nuget.exe 安装包只需将文件提取到某个位置。它不会修改项目文件或引用。缺点是您必须手动添加通常需要的引用、内容和其他配置更改。

# haskell - 如何将 mongodb 添加到 Snap 应用程序？

> ID：11798804
> 
> 赞同：1
> 
> 时间：2012-08-03T15:32:49.950
> 
> 标签：haskell, haskell-snap-framework

鉴于这种：

```
main :: IO ()
main = do
    (conf, site, cleanup) <- $(loadSnapTH [| getConf |]
                                          'getActions
                                          ["snaplets/heist/templates"])

    _ <- try $ httpServe conf site :: IO (Either SomeException ())
    cleanup

------------------------------------------------------------------------------
-- | This action loads the config used by this application. The loaded config
-- is returned as the first element of the tuple produced by the loadSnapTH
-- Splice. The type is not solidly fixed, though it must be an IO action that
-- produces the same type as 'getActions' takes. It also must be an instance of
-- Typeable. If the type of this is changed, a full recompile will be needed to
-- pick up the change, even in development mode.
--
-- This action is only run once, regardless of whether development or
-- production mode is in use.
getConf :: IO (Config Snap AppConfig)
getConf = commandLineConfig defaultConfig

------------------------------------------------------------------------------
-- | This function generates the the site handler and cleanup action from the
-- configuration. In production mode, this action is only run once. In
-- development mode, this action is run whenever the application is reloaded.
--
-- Development mode also makes sure that the cleanup actions are run
-- appropriately before shutdown. The cleanup action returned from loadSnapTH
-- should still be used after the server has stopped handling requests, as the
-- cleanup actions are only automatically run when a reload is triggered.
--
-- This sample doesn't actually use the config passed in, but more
-- sophisticated code might.
getActions :: Config Snap AppConfig -> IO (Snap (), IO ())
getActions conf = do
    (msgs, site, cleanup) <- runSnaplet
        (appEnvironment =<< getOther conf) app
    hPutStrLn stderr $ T.unpack msgs
    return (site, cleanup) 
```

如果我想添加 mongodb 数据库功能，我什至从哪里*开始（*[这个很好的例子在这里](http://hackage.haskell.org/packages/archive/mongoDB/1.3.0/doc/html/Database-MongoDB.html)）？？？

Snap 只有两个例子：

1.  一个非常简单的（在这里没用）：[http ://snapframework.com/docs/tutorials/snap-api](http://snapframework.com/docs/tutorials/snap-api)
2.  上面的那个是用 snap 生成的（我已经忘记了我是如何生成它的，而且似乎在文档中找不到它？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:26:06.390

您可以使用包[snaplet-mongodb-minimalistic](http://hackage.haskell.org/package/snaplet-mongodb-minimalistic) ，并且在 github 上有使用[示例。](https://github.com/Palmik/snaplet-mongodb-minimalistic/tree/master/examples/example1/src)

# ios - 当我单击后退按钮时，我的视图从横向变为纵向

> ID：11798808
> 
> 赞同：0
> 
> 时间：2012-08-03T15:33:00.853
> 
> 标签：ios, xcode, ipad, storyboard, uistoryboardsegue

我正在使用情节提要，并将我的应用程序设置为仅左右水平。我有一个视图控制器，我单击以转到下一个视图并执行任何操作，完成后单击后退按钮。发生的情况是，当我单击后退按钮时，水平视图会切换为纵向视图，并且会弄乱我的整个应用程序。我将我的 segues 设置为 push，但我确实将它们设置为模态。

![在此处输入图像描述](../Images/6015aef5cb0df522ffb223c256cc5842.png)

然后它进入我的下一个屏幕

![在此处输入图像描述](../Images/14a1602208fbf8994fcefe1354bfba75.png)

当我点击返回时，它出于某种原因切换到纵向，看起来像这样：

![在此处输入图像描述](../Images/8de4fea5192cc748dd0e376790e59eda.png)

我不知道它为什么会这样做......其他人有这个问题或知道发生了什么吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:49:35.833

您需要通过并将您的 rootViewController 的方向设置为仅横向。然后确保所有其他 viewControllers 方向都设置为推断。

如果您还没有进入 info.plist 并确保您只支持横向方向，这也是一个好主意。

此外，您可能需要向 viewControllers 添加一些代码，如下所示：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

# linux - 哪个进程正在使用我的内存？

> ID：11798810
> 
> 赞同：2
> 
> 时间：2012-08-03T15:33:15.910
> 
> 标签：linux, memory, redhat

我基本上已经关闭了所有进程，但通过运行“top”命令仍然可以使用 18GB：

```
top - 11:23:34 up 2 days, 19:20,  2 users,  load average: 0.00, 0.00, 0.00
Tasks: 202 total,   1 running, 201 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  32940056k total, 19210460k used, 13729596k free,   182428k buffers
Swap:  2031608k total,        0k used,  2031608k free, 18688628k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                        
32326 csxbot    15   0 12760 1168  812 R  0.3  0.0   0:00.02 top                                                             
    1 root      15   0 10368  700  584 S  0.0  0.0   0:02.17 init                                                            
    2 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 migration/0                                                     
    3 root      34  19     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/0                                                     
    4 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/0                                                      
    5 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 migration/1                                                     
    6 root      34  19     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/1                                                     
    7 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/1 
```

什么进程正在使用我的 19GB 内存？我的操作系统是 RHEL 6。如何检查。

- - - - - - - - - - - - - - - 更新 - - - - - - - - - - -----“free”命令基本上给出了相同的结果。由于这次更新是在我原来的帖子之后几个小时，确切的数字可能会有所不同，但大缓存现象仍然存在：缓存了 15GB 的空间。

```
 total       used       free     shared    buffers     cached
Mem:         32168      15592      16575          0         76      14813
-/+ buffers/cache:        702      31465
Swap:         1983          0       1983 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:49:33.137

那就是缓存内存。它用于将数据从硬盘驱动器缓存到 RAM 中，并在需要时从 RAM 中使用。RAM 在读/写速度方面比硬盘快得多。

对于 Linux 操作系统，这种行为是完全正常的。如果您的某些进程需要更多 RAM，则某些缓存数据将被“释放”，并且该数量的 RAM 将可供进程使用。内核会处理所有这些，不用担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:41:55.283

18688628k 缓存

大约 18 GB 用于缓存 IO 操作

# objective-c - 跨不同 UIWebViews 的通用委托

> ID：11798813
> 
> 赞同：0
> 
> 时间：2012-08-03T15:33:30.060
> 
> 标签：objective-c, ios, ios5

我需要一个通用委托来处理不同 webview 的大部分事件。

我创建了一个代表：

`@interface GenericWebViewDelegate : NSObject <UIWebViewDelegate>`

在 viewDidLoad 里面我设置了：

`GenericWebViewDelegate* genericWebViewDelegate = [[GenericWebViewDelegate alloc] init];`

`[TheWebView setDelegate:genericWebViewDelegate];`

以上是返回 EXC_BAD_ACCESS

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:37:34.703

据我从您的问题中了解到，这是两种可能的情况之一。

1.  如果您的应用程序在分配到 时崩溃`TheWebView`，那么这意味着`TheWebView`之前已被释放；所以可能你应该检查你创建它的方式。

2.  如果在调用委托方法时发生这种情况，则取决于您如何创建委托对象。你定义你的委托的方式，它在执行后不会存活很长时间`viewDidLoad`，所以当它被调用时，应用程序崩溃。

    您需要做的是将委托存储在`strong`类的属性中。这样，它将与您的类实例一样长，并且在调用它时可能仍然存在。

# ember.js - 仅当路线是最短路径时如何做某事

> ID：11798815
> 
> 赞同：0
> 
> 时间：2012-08-03T15:33:35.453
> 
> 标签：ember.js

我想有一个特定的行为，但只有当我的路线是最后一条时。

例如，我有路线 1：“posts.index” 路线 2：“posts.index.show”

如果我直接调用它，我想在 post.index 中做一些事情，但如果我直接访问 posts.index.show 我不想调用它。有没有办法知道 post.index 是否是当前调用路由的最后状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:27:54.033

只有**叶子**路由是可达的，这意味着你可以遍历节点路由，但永远不要停留在它上面。

在您的情况下，`posts.index`永远不会是您路由器的最终状态。我建议你有类似的东西：

```
posts: Ember.Route.extend({
  route: 'posts',

  // connectOutlets as needed for layout purpose...

  collection: Ember.Route.extend({
    route: '/',

    // connectOutlets to render collection & so on...
  }),

  member: Ember.Route.extend({
    route: '/:id',

    // connectOutlets: here, you will at least store the instance for later use in children routes, and probably render its outlet

    show: Ember.Route.extend({
      route: '/',

      // connectOutlets if needed.
    })

    // here, add other routes like edit, ...
  })
}) 
```

在`member`路由中，您可以进行通用处理（至少检索和渲染实例），然后在其`connectOutlets`函数内部根据叶子路由进行专门化。

# javascript - jQuery 切换下一个 P

> ID：11798816
> 
> 赞同：3
> 
> 时间：2012-08-03T15:33:37.717
> 
> 标签：javascript, jquery, html

我试图创建一个功能，当单击按钮时切换段落显示 CSS 我似乎根本无法让它工作，我的浏览器只是回到页面顶部？我的 jQuery 是...

```
$('.useful-links ul li a').click(function(){
    $('.useful-links ul li a').parent('li').find('p').toggle();     
}); 
```

我的标记是

```
<li>
     <a href="#">RESIDENTIAL AGENTS</a>
     <p style="display:none;">sfsdfsdfsd</p>
</li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:34:08.827

我假设你的 HTML 结构是这样的：

```
<div class="useful-links">
    <ul>
        <li>
            <a href="#">RESIDENTIAL AGENTS</a>
            <p style="display:none;">sfsdfsdfsd</p>
        </li>
    </ul>
</div>​

// For your jQuery selector to work as you have it

$('.useful-links ul li a').on('click', function (e) {
    e.preventDefault(); // stop href()
    $(this).next('p').toggle();     
}); 
```

演示：http: [//jsfiddle.net/p4SJB/](http://jsfiddle.net/p4SJB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:39:17.403

首先，您正在使用锚元素，因此您需要防止默认操作。然后你可以做你的逻辑：

```
$('.useful-links ul li a').click(function(e){
    e.preventDefault();
    $(this).closest('li').find('p').toggle();     
}); 
```

[这是一个工作示例](http://jsfiddle.net/TbVN2/)

* * *

另外，如果您知道您的`a`和`p`元素将始终具有相同的父母，您可以使用该`siblings`方法（效果并不好，只是一种替代方法）：

```
$(this).siblings('p').toggle(); 
```

[和另一个例子](http://jsfiddle.net/TbVN2/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:34:14.033

使用`$(this)`：

```
$('.useful-links ul li a').click(function(e){
    e.preventDefault();
    $(this).parent('li').find('p').toggle();     
}); 
```

我更喜欢找到共同的父元素，然后“找到”目标元素。这意味着如果您的 HTML 标记发生变化，那么`p`您`a`的 jQuery 将不会受到影响。

见演示：http: [//jsfiddle.net/S2hSp/](http://jsfiddle.net/S2hSp/)

# sql - sql将5列写入仅2列

> ID：11798823
> 
> 赞同：0
> 
> 时间：2012-08-03T15:33:47.980
> 
> 标签：sql, database, tsql

我有一个有 5 列的 sql 视图。我希望将数据写入一个表但只有 2 列，

看法

```
id 
car1
car2
car3
car4 
```

桌子

```
id
cars 
```

* * *

```
INSERT INTO table 
SELECT * from view 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:37:02.910

```
insert cars (id, car)
select id, cars
from view
unpivot
(cars for car in (car1, car2,car3, car4)) as u 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:37:40.430

蛮力和无知（但可靠）：

```
INSERT INTO table
   SELECT id, car1 FROM view WHERE car1 IS NOT NULL
   UNION
   SELECT id, car2 FROM view WHERE car2 IS NOT NULL
   UNION
   SELECT id, car3 FROM view WHERE car3 IS NOT NULL
   UNION
   SELECT id, car4 FROM view WHERE car4 IS NOT NULL 
```

UNION 具有消除任何重复项的优点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:36:41.833

你试过这个吗？

`INSERT INTO table SELECT ID, Car1 + ',' + Car2 + ',' + Car3 + ',' + Car4 as Cars from view`

# iphone - 如何从 iPhone 中的来电中检测运营商名称

> ID：11798834
> 
> 赞同：0
> 
> 时间：2012-08-03T15:34:39.903
> 
> 标签：iphone, ios5, core-telephony, carrier

是否可以使用核心电话或任何类从来电中检测运营商名称？响铃后，我想在 iPhone 中直观地获取电话的运营商名称。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:38:34.957

此类信息可通过任何类型的来电显示服务获得。我知道有一些服务可以让您查找一个号码块分配给哪个运营商，但是，由于号码可移植性，数据并不总是准确的。

这是一篇较早的博客文章，其中提出了类似的问题，从那时起，该领域确实没有任何动静。

[http://sms411.net/2006/07/finding-out-someones-carrier/](http://sms411.net/2006/07/finding-out-someones-carrier/)

# c# - WebClient UploadFile 损坏二进制数据

> ID：11798835
> 
> 赞同：1
> 
> 时间：2012-08-03T15:34:43.817
> 
> 标签：c#, php, xamarin.ios, webclient

我正在尝试将二进制文件（照片）从运行`Monotouch`在. 正在发送和接收文件，但服务器上的二进制文件似乎已损坏，无法查看。`iPad``PHP``Webclient`

这是客户端代码：

```
static void UploadPhotos()
{
    WebClient client = new WebClient ();
    client.Headers.Add("Content-Type","application/octet-stream");
    string sUri = GetUri();
    client.UploadFile (sUri, "POST", "images/test.png");
} 
```

这是`PHP`服务器上的代码：

```
<?php
$uploadDir = "C:\\uploaddir\\";
foreach ($_FILES as $file_name => $file_array) {
    $uploadFile = $uploadDir . $file_array['name'];
    move_uploaded_file($file_array['tmp_name'], $uploadFile);
}
?> 
```

有谁知道为什么二进制数据在上传中被破坏以及如何修复它？

**更新：**

确实很奇怪。我遇到的问题似乎`png`只影响图像；`jpeg`图像似乎正确地出现。图像在服务器上的`jpeg`Windows 资源管理器中正确显示图像尺寸，我可以预览`jpeg`图像。我测试的`jpeg`图像大约为 90 KB。这些`png`文件虽然没有正确地出现。在 Windows 资源管理器中，`png`文件不显示图像的尺寸并且无法预览。服务器上的`png`文件大小较大。因此，例如，我使用以下`png`图像：

[http://tuxpaint.org/stamps/stamps/animals/birds/cartoon/tux.png](http://tuxpaint.org/stamps/stamps/animals/birds/cartoon/tux.png)

初始文件为 40.2 KB（41236 字节）；传输后服务器上的文件大小为 45.3 KB（46468 字节）。任何人都知道这怎么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:59:40.100

尝试将 Content-Type 设置为“application/octet-stream”，我认为这对于二进制数据更为常见，服务器可能无法识别 binary/octet-stream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T20:12:57.653

我不得不使用 UploadDataAsync

```
 using (WebClient client = new WebClient())
        {
           client.Credentials = CredentialCache.DefaultCredentials; 
           byte[] bytes = File.ReadAllBytes(filePath);
           client.UploadDataAsync(new Uri(url), bytes);
        } 
```

# c# - 收据打印机嗅探器

> ID：11798836
> 
> 赞同：2
> 
> 时间：2012-08-03T15:34:50.697
> 
> 标签：c#, printing, serial-port

我正在尝试从嗅探标准收据打印机的 COM 端口读取数据。我正在使用 MSDN 中有关在[docs](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)`SerialPort.DataReceived`中找到的事件的示例。

我正在获取数据，但它是乱码。如何将其转换为可读文本？它是编码二进制还是什么？能否请您提供有关这种串行端口编程的见解？

我在互联网上搜索了几个小时，试图弄清楚如何使它成为可读的文本，但我在 A 和 B 之间的某个地方遗漏了一些概念。

![在此处输入图像描述](../Images/cc8a1bb590169b2cbe883241c14c81a2.png)

我在某处读过它可能是协议不匹配。有没有办法检测到这一点？

**更新 1**

我正在尝试从我在 StackOverflow[找到的线程](https://stackoverflow.com/a/466577/139698)（我使用更新 1）中找到新的东西，我不确定我现在在看什么，但我没有得到更多奇怪的字符：

![在此处输入图像描述](../Images/c69ab7bb46b8c321bac078506da11b03.png)

那么我如何从这里获得可读的文本呢？

**更新 2**

我还是有点困惑。

![在此处输入图像描述](../Images/b7fb4fc709af1ea4fa97a02beb8fa3b1.png)

```
 private static void port_OnReceiveDatazz(object sender,
                              SerialDataReceivedEventArgs e)
   {
       SerialPort spL = (SerialPort)sender;
       byte[] buf = new byte[spL.BytesToRead];
       Console.WriteLine("DATA RECEIVED!");
       spL.Read(buf, 0, buf.Length);
       Console.WriteLine(Convert.ToBase64String(buf));
       foreach (Byte b in buf)
       {
           //Console.Write(b.ToString());
       }
       Console.WriteLine();
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:16:57.033

是的，你得到了很多字节，如果你注意你会得到 ascii 数字。5 0、6 5 等是数据的标题。

首先你需要知道协议，但是如果你想“读取”它，你必须转换它，而不是使用 ToString，你需要使用：

```
 Convert.ToBase64String(bytes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:36:19.923

不确定是否存在诸如“标准”收据打印机之类的东西，因为即使对于同一制造商，这些设备在型号之间的功能也往往不同，它们在制造商之间肯定是不同的。

收据打印机不太可能需要字节来表达大多数收据上打印的有限字符集。一些货币符号、字母、数字和一些标点符号和一些控制信息意味着这些可以很容易地适合 ASCII（7 位）。

如果他们有，您确实需要访问制造商网站，如果他们有可用的，请下载技术手册或协议指南。这通常非常棘手，因为并非所有制造商都可以在线获取此信息。您可能必须直接与他们联系并让他们通过传真或邮寄给您一份协议规范的副本。

您的数据中有重复字符块，这些很可能是告诉打印机正在发送另一块信息或需要换行的数据。这些可能出现在数据行的开头或结尾。例如，它们可能是对打印机的指令，以将打印头移回打印行的开头并滚动纸张，实际上是设备的 CR/LF 指令。

这种类型的东西取决于设备，设备规范会告诉你更多。您可能会假设这不是您要求打印的信息。

如果您无法获得协议文件，那么您只能依靠老式的侦探工作。

我可以告诉您，iTherm 在您的字节中使用一个或多个 ESC 字符 (27) 之后的 ASCII 字符来执行各种操作。更多信息可以在程序员指南中找到，网址从第 62 页开始。 [http://www.transact-tech.com/tsg/downloads/28-04430%20Rev%20K%20-%20Insert-M280%20POS% 20程序员%20Guide.pdf](http://www.transact-tech.com/tsg/downloads/28-04430%20Rev%20K%20-%20Insert-M280%20POS%20Programmers%20Guide.pdf)

您应该做的是匹配您要求打印的内容（假设您有纸张输出）和正在发送的字节。你知道你应该得到什么作为打印输出。你知道它产生了什么字节，你消除了不能成为你信息的重复内容。然后，您必须制定规则，从您剩下的内容到您期望的输出。

它将帮助您了解主机正在发送什么以及打印机在响应什么

按顺序排列的前几个字节似乎是：

```
(06, *)  = Printer sends ACK (ID) after host send ENQ (id) to printer
(05, n)  = Inquire Printer Status return codes 
... 
```

# javascript - Adobe LiveCycle Designer：通过下拉列表隐藏/显示多个子表单

> ID：11798842
> 
> 赞同：1
> 
> 时间：2012-08-03T15:35:05.737
> 
> 标签：javascript, adobe, livecycle, livecycle-designer

下午好，

在这里快速提问。有人可以告诉我在 Adob​​e LiveCycle Desier ES 8.2 中隐藏/显示子表单所需的代码吗？我有 3 个以上的子表单，我需要能够根据特定国家/地区进行切换。我真的很感激帮助。谢谢你。

此外，我已经能够让它在两个选择之间工作，但现在每次我尝试构建一个表单时，我什至无法从下拉列表中选择一个项目。

西弗勒斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:58:05.700

你可以通过 java-script 来实现。

在`change - (JavaScript, client)`下拉事件中添加脚本。

```
subform1.presence = "hidden";
subform2.presence = "hidden";

var order= xfa.resolveNode("form1.#subform[0].typeOfIncidentDdl").rawValue;
if (order == 1) {
          subform1.presence = "visible";  
}
if(order ==2){
          subform2.presence = "visible";
} 
```

# java - Java Swing 选项对话框修改

> ID：11798848
> 
> 赞同：1
> 
> 时间：2012-08-03T15:35:27.310
> 
> 标签：java, swing

我使用下面的代码来创建一个选项对话框。

*   我将如何在“确认”和“取消”按钮之间添加空格。*   我想删除问号，但是当我将对话框更改为 JOptionPane.PLAIN_MESSAGE 时，我无法将文本居中。

    ```
    String[] options = { "Confirm", "Cancel" };
    int selected = JOptionPane.showOptionDialog(
                   parent, "Confirm Trade","Confirmation", JOptionPane.YES_NO_OPTION, 
                   JOptionPane.QUESTION_MESSAGE, null, options, options[0]); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:42:39.053

我不相信它可能或至少不容易修改。创建一个新的 JFrame 并添加任何你想要的东西会容易得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:14:45.090

就像其他人所说的那样，我认为您应该创建一个自定义 JDialog 来获得您想要的一切，但是如果您只想要居中的文本，这应该可以：

```
String[] options = { "Confirm", "Cancel" };
JPanel panel = new JPanel();
panel.add(new JLabel("Confirm Trade"), BorderLayout.CENTER);
int selected = JOptionPane.showOptionDialog(
               frame, panel,"Confirmation", JOptionPane.YES_NO_OPTION, 
               JOptionPane.PLAIN_MESSAGE, null, options, options[0]); 
```

我知道它不能解决所有问题，但我想我会把它留在这里以防它帮助其他人。

# php - 在 mysql 查询中标记选定的行

> ID：11798849
> 
> 赞同：0
> 
> 时间：2012-08-03T15:35:27.840
> 
> 标签：php, mysql

我有一个代理，我为该 php 代理文件定义了一个作业。但是如果第二个代理在 1 分钟后运行并且之前的代理工作尚未完成。它会出现问题.....我想在每个代理中标记选定的行，如果另一个代理运行他们没有干扰的新查询

我如何更改此查询是最好的方法是在该表中创建一个字段以供选择或不选择？并更新该字段？

```
db::query("SELECT 1000 FROM web-service WHERE `state`= 1 AND `fetch_id`="fetchid"  ")// 
```

1-state = 1 是我的产品的条件

2-我使用 fetch id 为每个代理估算 id 最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:40:17.467

如果我理解您的问题，您不希望多个脚本同时在同一行上工作。这被称为`contention`并且可以通过多种方式解决。

我过去解决此问题的一种方法是仅在脚本尚未运行时才运行它。您可以通过此处定义的 shell 脚本执行此操作：[Shell 脚本：确保该脚本已在运行时不执行](https://stackoverflow.com/questions/4768860/shell-script-ensure-that-script-isnt-executed-if-already-running)

# python - python bignum数组？

> ID：11798850
> 
> 赞同：0
> 
> 时间：2012-08-03T15:35:30.760
> 
> 标签：python

我对python很陌生。

我想要一个正好有 10000 个大整数（任意精度）的数组。

我试着这样做：

```
M = []

M[0] = 1
M[1] = 1

for k in range(2,10001):
        M[k] = ... 
```

但我得到：

```
IndexError: list assignment index out of range 
```

我应该使用什么数据结构，如何初始化它并为其保留空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:38:54.610

该列表未正确初始化。

试试`M = [0]*10000`。这将为您提供正确大小的列表。只需将 替换为`0`您想要的任何默认值（或之后用正确的值覆盖它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:40:50.240

与 JavaScript 不同，如果数组元素不存在，则不能按索引分配它们。我建议你简单地追加到数组：

```
M = []
for k in range(1,10001):
    M.append(k) 
```

如果密钥很重要并且您需要任意创建它们，请使用`dict`：

```
M = {}
for k in range(1,10001):
    M[k] = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:40:15.607

预留空间：

```
M = [0] * 10000 
```

那么你可以使用：

M[0] = 1 M[1] = 1

对于范围内的 k (2,10001)：M[k] = ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:56:43.247

要使用大数组，您可以考虑使用[Numpy](http://numpy.org/)作为包来进行数值计算以及大数组的高效存储和操作。你可以做这样的事情：

```
import numpy as np

M = np.arange(10000)
M[:2] = 1 
```

为了留在纯 python 方面，我会这样做：

```
M = list(xrange(10000))
M[0] = 1
M[1] = 1 
```

使用 IPython 的时间（推荐使用 python 的命令行解释器）：

```
In [1]: %timeit M = list(range(10000))
10000 loops, best of 3: 195 us per loop

In [2]: %timeit M = list(xrange(10000))
10000 loops, best of 3: 190 us per loop

In [3]: %timeit M = np.arange(10000)
100000 loops, best of 3: 9.74 us per loop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:09:53.977

代码

米=[];

m.append(1);

m.append(2);

m.append(3);

对于范围内的 k（2,1000）：

```
 m.append(k); 
```

打印（米）；

对于面向对象，这将有利于追加和删除 adv：操作简单，使用方便，灵活性高。

# c# - 我可以使用堆栈跟踪检索实际的代码行吗？

> ID：11798858
> 
> 赞同：2
> 
> 时间：2012-08-03T15:35:53.567
> 
> 标签：c#, stack-trace

我为我的 ASP.NET 应用程序提供了一个快速而简单的单元测试框架——一个 ASPX 页面，其中包含一个比较预期结果和实际结果并创建表的方法。它可以根据需要进行编译，让我可以快速创建和运行一系列测试，即使没有运行 VS.NET。

这是一个示例调用：

```
PrintResult(
   expected:  "$A$1", 
   actual:    RST.ExcelReference.FormatReferences("{{REF:1:0:1:0}}", false, 0, 0),
   arguments: "RST.ExcelReference.FormatReferences(\"{{REF:1:0:1:0}}\", false, 0, 0)"); 
```

（为清楚起见，添加了命名参数。）

正如您可以想象的那样，同步*实际*呼叫和该呼叫的*显示*是一件很痛苦的事情。

我知道我无法检查 中的参数值`Environment.StackTrace`，只能检查方法定义和行号。但就我而言，我不需要*实际*的参数值。我通常使用文字作为参数调用此方法，所以我需要的只是堆栈跟踪中 PrintResult() 入口点的源代码行。

源代码似乎以某种方式可用于 ASP.NET，因为它在出现未处理的异常时出现。我怎样才能访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:59:33.507

`Environment.StackTrace`在堆栈跟踪的每一行中为您提供文件名和行号。它的格式清晰，应该易于解析。从[文档中](http://msdn.microsoft.com/en-us/library/system.environment.stacktrace.aspx)：

> StackTrace 属性格式化每个方法调用的堆栈跟踪信息，如下所示：
> 
> “在 FullClassName。FileName 中的 MethodName (MethodParams) :line LineNumber”
> 
> 文字“at”前面有三个空格，如果调试符号不可用，则省略文字“in”和“:line”。占位符 FullClassName、MethodName、MethodParms、FileName 和 LineNumber 被替换为定义如下的实际值：
> 
> FullClassName 类的全名，包括命名空间。
> 
> MethodName 方法的名称。
> 
> MethodParms 参数类型/名称对的列表。每对用逗号 (",") 分隔。如果 MethodName 采用零参数，则省略此信息。
> 
> FileName 声明 MethodName 方法的源文件的名称。如果调试符号不可用，则省略此信息。
> 
> LineNumber FileName 中包含调用堆栈上指令的 MethodName 源代码的行号。如果调试符号不可用，则省略此信息。

在您暗示的问题中，这`Environment.StackTrace`不是您问题的答案，但似乎您应该能够解析出源文件名和行号，然后从文件中读取该行。我错过了什么？

# android - 在android中显示一个字符串（arraylist）

> ID：11798859
> 
> 赞同：-1
> 
> 时间：2012-08-03T15:35:54.157
> 
> 标签：android, listview, rss

我创建了一个 RSS 阅读器，并成功地解析了 XML 文件中的数据。我已经提取了标题，我希望显示这些标题。我将标题存储到一个字符串数组中，我希望以合适的方式显示所有标题（我有 70 个标题）。我正在考虑使用 Listview 。还有其他更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:50:42.320

`ListView` is exactly designed for this. I would create a custom `ArrayAdapter` to be the adapter for your `ListView`. You just need to override the `add()`, `getCount()`, and `getView()` methods to have something up and running. Then you can store your list of XML data directly within the adapter and easily add to it.

This is a pretty good tutorial: [http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

Only change I would make is to make data[] a `List` instead and add the `add()` and `getCount()` methods.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:54:01.887

`ArrayAdapter`正如 Atlos 所暗示的那样，Custom是恕我直言，是一种矫枉过正。`ArrayAdapter<String>`在字符串数组上使用股票。对于item模板ID，Android中有现成的模板；我会推荐`android.R.layout.simple_list_item_1`。

# android - 如何将私人文件中的图片加载到布局中（Android）？

> ID：11798860
> 
> 赞同：0
> 
> 时间：2012-08-03T15:35:55.517
> 
> 标签：android, file, layout

我保存了一张图片`/data/data/my.package.name/files/mypicture.png`，我想将它加载到布局中。

我试过这个，但它不起作用。

```
File filePath = getFileStreamPath("pictureIWouldLikeToLoad.png");
ImageView img = new ImageView(getApplicationContext());
img.setImageDrawable(Drawable.createFromPath(filePath.toString()));
ViewGroup picturesLayout = (ViewGroup) findViewById(R.id.layout_pictures_area);
picturesLayout.addView(imgView); 
```

我不知道它是如何不起作用的，有人能解释一下为什么吗？那么我想要做什么呢？我需要内容提供者吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:46:31.923

您应该在 XML 中为要更改的图像定义一个 ID

```
<ImageView
android:id="@+id/awesome_image"
.
.
.
/> 
```

那么您应该将图像文件转换为位图对象

```
File file = new File("/data/data/my.package.name/files/mypicture.png");
Bitmap bmp = BitmapFactory.decodeFile(file); 
```

最后你得到了 imageView 对象并设置了它的位图

```
ImageView imageView = (ImageView) findViewById(R.id.awesome_image);
imageView.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:33:26.843

所以我成功了。也许它可以改进，但这里有一些实际有效的东西：

```
FileInputStream inputStream = openFileInput("my_image.png");
BufferedInputStream bufferedInput = new BufferedInputStream(inputStream);                       
Bitmap bmp = BitmapFactory.decodeStream(bufferedInput);
ImageView imgView = (ImageView) findViewById(R.id.my_imageview);
imgView.setImageBitmap(bmp);
bufferedInput.close();
inputStream.close(); 
```

# iphone - 为什么用户要下载我们 iOS 应用程序的旧版本？

> ID：11798862
> 
> 赞同：11
> 
> 时间：2012-08-03T15:36:00.303
> 
> 标签：iphone, ios, app-store

Apple 在 7 天前的今天发布了对我们 iOS 应用程序的重要更新。从那时起，我们绝大多数的 App Store 安装和更新都是新版本，但根据 iTunes Connect 的报告，一小部分更新（不到 1%）是旧版本。这种情况日复一日地持续，并且令人担忧，因为一些用户正在获得我们应用程序的易崩溃版本。

在我们发布更新 7 天后，用户如何仍然更新到旧版本？有什么办法可以防止这种情况发生吗？

（目标 iOS 版本没有改变；该应用程序现在并且只在美国商店上架。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:16:27.637

我以前见过这种行为，但持续时间不超过 24 小时。您的应用程序已发布，App Store 应用程序显示更新但仍下载旧 IPA。我的理解是，某些 CDN（如果您嗅探流量，则为 Akamai）节点具有旧版本，并且从未被清除。这可能是他们在“发布到 App Store 的电子邮件”中提到可能需要 24 小时才能在任何地方使用的原因。

我认为最好的补救措施是通过电子邮件发送 App Store 支持。或者提交一个新版本来改变应用程序中非常小的东西。

# c++ - OpenCV 代码将存储在列表中的描述符与新的图像描述符进行比较

> ID：11798864
> 
> 赞同：1
> 
> 时间：2012-08-03T15:36:04.923
> 
> 标签：c++, opencv, sift

我目前正在为最后一年的大学项目使用 SIFT 算法进行自动交通标志检测的研究。我正在使用 OpenCV，目前我已经到达直到找到图像的描述符。我使用以下代码将此 SIFT 功能存储在列表中，

```
vector<Descriptor> m_keyDescs;

m_keyDescs.push_back(Descriptor(descxi, descyi, fv)); 
```

现在我想使用这个功能与新图像进行比较，我想识别新图像是否与以前的图像相同。但我不知道如何使用存储在列表中的这些功能来识别新图像。如何检索此存储列表并与新创建的图像描述符进行比较？

如果你能帮助我，我很高兴，因为我是 OpenCV 的新手。:)

我已将描述符类定义为，

```
 class Descriptor
 {
 public:
 float xi, yi;      
 vector<double> fv; // Feature vector

Descriptor()
{
}

Descriptor(float x, float y, vector<double> const& f)
{
    xi = x;
    yi = y;
    fv = f;
}
}; 
```

感谢您的善意考虑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:36:20.923

要匹配描述符，您需要一个`DescriptorMatcher`（如`BruteForceMatcher` [本例所示](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/matcher_simple.cpp?rev=3204)）。更多关于这些的文档可以[在 OpenCV 站点上找到](https://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html)

# java - 在 Java Applet 中播放 MIDI 会暂停 Applet

> ID：11798865
> 
> 赞同：0
> 
> 时间：2012-08-03T15:36:06.030
> 
> 标签：java, multithreading, midi

我正在编写一个 Java Applet，其中包含一个触发播放 MIDI 声音的动画。声音由以下类播放 - 它启动自己的线程 - 无论如何，Applet 中的动画在声音播放时暂停。我没有看到我在这里做错了什么，我希望动画不会因为新分配的线程而暂停......

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.sound.midi.MidiChannel;
import javax.sound.midi.MidiSystem;
import javax.sound.midi.MidiUnavailableException;
import javax.sound.midi.Synthesizer;

public class ChromaticSynth implements Runnable{
    //vars
    private Synthesizer synth;
    private MidiChannel mchannel;
    private int playNote;
    private Thread myThread;

    //constructor
    public ChromaticSynth(int playNote){
        try {
            synth=MidiSystem.getSynthesizer();
            synth.open();
            mchannel=synth.getChannels()[0];
            this.playNote=playNote;

            myThread=new Thread(this);
            myThread.start();
        } catch (MidiUnavailableException ex) {
            Logger.getLogger(ChromaticSynth.class.getName()).log(Level.SEVERE, null, ex);
        }

     }

    //play sound
    public void run(){
        mchannel.noteOn(playNote,50);
    }
} 
```

ChromaticSynth 类的使用方式如下（将代码简化为相关部分）：

```
import chromatic.ChromaticSynth;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JPanel;

public class ChromaticPanel extends JPanel{
    //vars
    ...

    //constructor
    public ChromaticPanel(){
        super();
        ...
    }

    //paint
    protected void paintComponent(Graphics g){

        super.paintComponent(g);

       //draw something
        g.setColor(Color.white);
        g.draw(...);

       if(noteshouldbeplayed)
            ChromaticSynth cs=new ChromaticSynth(playNote);                    

    }

} 
```

面板的 repaint() 方法由包含 ChromaticPanel 的 JFrame 中的 javax.swing.Timer 重复调用以绘制动画。

谢谢你的帮助！

# .net - 间歇性“批次被中止”异常

> ID：11798867
> 
> 赞同：7
> 
> 时间：2012-08-03T15:36:11.993
> 
> 标签：.net, sql-server, exception

我有一个以 .NET 4.0 数据库为中心的应用程序（厚客户端，WinForms）运行在数百个环境中（每个都由我们客户的 IT 维护）职员）。该应用程序是对我公司使用多年的旧 FoxPro 产品的重写。

该应用程序似乎对我们所有的客户都运行良好，但有一个客户出现间歇性异常，如下所示：

> System.Data.SqlClient.SqlException (0x80131904)：超时已过期。在操作完成之前超时时间已过或服务器没有响应。
> 
> 由于批处理被中止，请求无法运行，这可能是由于客户端发送的中止信号引起的，或者同一会话中正在运行另一个请求，从而使会话繁忙。

我可以在网上找到的所有关于此的信息（例如[这里](http://support.microsoft.com/kb/915112/en-us)和[这里](http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/7ff0119e-8bd3-46ec-96d6-d397b4eb7afa)）都说这个问题是一个 SQL Server 2005 错误，已在 SP1 中解决。但是，**该客户使用的是 SQL Server 2008 R2 Express**（我们公司已经对此进行了验证；我们不只是相信客户的话）。此外，我们没有使用连接池或分布式事务，因此我发现的链接似乎更不相关。

同样，这些问题是间歇性的（每天几次），并且发生在所有不同的工作站上（似乎表明这不是单个客户端的问题）。旧版 FoxPro 应用程序仍然存在于他们的环境中并且工作正常（针对完全相同的数据库），这似乎表明它不仅仅是网络或数据库服务器问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:25:31.027

这些错误表明[`CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)在服务器返回结果之前已达到（默认为 30 秒）。这并不表示任何错误，也没有 SP 可以解决它。这是一个性能问题（很可能缺少索引），必须作为性能问题进行调查。尝试遵循 SQLCAT[性能故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)。

# asp.net-mvc - 是否可以更新从强类型模型类创建的视图？

> ID：11798870
> 
> 赞同：1
> 
> 时间：2012-08-03T15:36:17.870
> 
> 标签：asp.net-mvc

我在我的 MVC4 项目中创建了一个基于强类型模型类的视图，它运行良好。但是，我必须向 Model 类添加一堆字段，现在我希望 View 反映这一点。最初，当我选择强类型类时，所有字段都是自动为我创建的。

我知道我可以*手动*添加新的 HTML 帮助器字段，但我想知道是否有某种方法可以从它的绑定模型类中“更新”视图（即 IDE 中的某些链接，如“刷新视图”或其他东西“） .

我也知道我可以删除当前的视图并重新创建它，但我想知道如果我做了不相关的自定义，我不想消灭它，是否可以使用更少的蛮力。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:09:27.777

如果您在视图中使用 EditorForModel() 或 DisplayForModel()，它们将在您更改模型时免费更新。

这是我发现非常有用[的 Brad Wilson 博客文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)的链接。它是为 MVC2 编写的，但据我所知，一切仍然适用于 MVC3。

此外，使用 EditorForModel() 时非常方便的特定数据注释是：

```
[ScaffoldColumns(false)] //for properties that you don't want to display, but still need their values to post to the server(like ID's and such) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:50:52.557

I don't think you can do this. What you could do is create a new view and then use a diff tool to compare the two files and merge the changes. If you added some custom code to your file then you wouldn't lose any of that.

# windows - 分组gridView中的不同项目大小

> ID：11798871
> 
> 赞同：7
> 
> 时间：2012-08-03T15:36:18.543
> 
> 标签：windows, xaml, windows-8, windows-runtime

我创建了一个带有项目模板和标题模板的 Grouped GridView。它工作得很好，但我希望我列表中的第一篇文章有​​一个不同的模板（更大）。例如法国应用程序“LeMonde”。我不知道如何定义模板来实现这一点。

这是我当前的 xaml 代码

```
<Page.Resources>
 <CollectionViewSource x:Name="cvs1" IsSourceGrouped="True" />
</Page.Resources>

<Grid Background="White">

    <GridView  x:Name="PicturesGridView" SelectionMode="None"
ItemsSource="{Binding Source={StaticResource cvs1}}"IsItemClickEnabled="True"  ItemClick="ItemView_ItemClick">
        <GridView.ItemTemplate>
            <DataTemplate>
                <StackPanel x:Name="RectanglesStackPanel" Margin="8" Orientation="Vertical" Width="242">

                    <Image Source="{Binding imageUrl}" Height="180"  Width="225"   Stretch="UniformToFill" />

                    <Border Background="Gray" Opacity="1" Width="225" Height="115">
                       <TextBlock Text="{Binding title}"
           Foreground="White" TextWrapping="Wrap" Width="215" FontSize="18" />
                    </Border>
                </StackPanel>
            </DataTemplate>
        </GridView.ItemTemplate>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                         <Button  Click="Button_Click_1" Content="{Binding Key}" Foreground="Black" Background="White" FontSize="30" Margin="0,0,0,-10" ></Button>     
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView>

</Grid> 
```

我只是像这样在 C# 中绑定我的项目列表：

```
this.cvs1.Source = ListOfArticle; 
```

先感谢您 ：）

* * *

谢谢伊万。它对我有很大帮助。但是，示例中提供的代码对于 Windows 8 似乎不是最新的。您对我们如何访问页面资源中定义的模板有任何想法吗？FindRessources 方法不再存在。我尝试使用此代码，但没有成功：

```
 public class AuctionItemDataTemplateSelector : DataTemplateSelector
 {
    protected override DataTemplate SelectTemplateCore(object item, 
                                                  DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is Article)
        {
            Article auctionItem = item as Article;

            DataTemplate mySmallTemplate = element.FindName("SmallTemplate") as DataTemplate;

            switch (auctionItem.isFirstItem)
            {
                case true:
                    return
                  element.FindName("BigTemplate") as DataTemplate;

                case false:
                    return
                   element.FindName("SmallTemplate") as DataTemplate;
            }
        }

        return null;
    }
} 
```

'

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T16:04:40.753

我按照创建自定义 DataTemplateSelector 的方式，将所有需要的模板作为属性。

```
namespace Helper
{
    public class CustomSampleDataTemplateSelector : DataTemplateSelector
    {
        public DataTemplate FirstDataTemplate { get; set; }

        public DataTemplate SecondDataTemplate { get; set; }

        protected override DataTemplate SelectTemplateCore(object item, 
                  DependencyObject container)
        {
            if (item is FirstItemType)
                return FirstDataTemplate ;
            if (item is SecondItemType)
                return SecondDataTemplate;
            else
                return FirstDataTemplate ;
        }
    }
} 
```

现在您可以像这样在 XAML 中直接使用它：

声明资源：

```
<UserControl.Resources>
    <DataTemplate x:Key="myTemplate1">
        <Border Background="White">
            <TextBlock Text="{Binding Name}"
                       FontSize="40"
                       Foreground="Black"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center" />
        </Border>
    </DataTemplate>
    <DataTemplate x:Key="myTemplate2">
        <Border Background="Orange">
            <Grid>
                <Image Source="{Binding Image}"></Image>
                <TextBlock Text="{Binding ShopName}"
                           FontSize="64"
                           Foreground="LightBlue"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />
            </Grid>
        </Border>
    </DataTemplate>
    <Common:CustomSampleDataTemplateSelector x:Key="mySelector"
                                     FirstDataTemplate="{StaticResource myTemplate1}"
                                     SecondDataTemplate="{StaticResource myTemplate2}">
    </Common:CustomSampleDataTemplateSelector >
</UserControl.Resources> 
```

用它

```
<GridView  x:Name="PicturesGridView" ItemTemplateSelector="{StaticResource mySelector}"> 
```

就这样

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T09:48:09.500

谢谢你。它实际上运作良好，因为它使第一个项目具有与另一个不同的模板。然而，这不是我想要的对不起，我不清楚是我的错。因为使用您的技术，网格视图中的项目大小始终相同。假设我选择 myTemplate1 有一个宽度为 400 的网格，而 myTemplate2 有一个宽度为 200 的网格。然后如果我的第一个元素跟随 myTemplate1，则网格视图的所有元素的大小都将为 400，即使里面的图像只有200。

我想达到这篇文章中的结果：http: [//blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx)

所以我发现我真正需要的是 VariableSizedWrapGrid 并重新实现 gridView 的一个版本。我关注了这篇非常好的文章：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413 -46f0-bef7-663de36f9423](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413-46f0-bef7-663de36f9423)。

但是，我会将您的答案标记为正确，因为它回答了我最初的问题：它允许在组网格视图中选择不同的项目大小。

非常感谢您的宝贵时间，这对我帮助很大

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:35:21.877

不必为 GridView 中的所有项目使用单个 ItemTemplate，您必须为第一个元素定义不同的 ItemTemplate，然后为所有其他元素定义不同的 ItemTemplate。

为此，您必须远程定义 ItemTemplate 并使用 ItemTemplateSelector 来确定要使用的样式。

在这里您可以找到更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)

# excel - Excel 论坛查找特定值的列并复制到不同列中的单元格

> ID：11798872
> 
> 赞同：0
> 
> 时间：2012-08-03T15:36:18.730
> 
> 标签：excel, excel-formula

无论如何，用户是否可以指定要在某一列中查找的值，如果找到，则将其复制到另一列中的单元格中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:18:22.673

是的！它被称为[vlookup](http://spreadsheets.about.com/od/excelfunctions/ss/vlookup.htm) ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:28:24.210

你所描述的是excel最基本的操作。我几乎对回答它感到内疚——没有冒犯。

```
=IF(E1=C4,C4,"") 
```

将其自动填充到一列中，您将获得解决方案

![严重地](../Images/d980a578b86ae54f6027a09f9bfbc043.png)

您熟悉术语自动填充吗？

# html - 如何使用 Perl 删除特定的 HTML？ 我需要根据表的内容删除某些表。我解析了HTML::Tree用于构建 HTML 树的 HTML。 我曾经replace_with_content删除表格，但这只会删除表格标签并留下表格的内容。 请注 问问题 问问题 2012-08-03T15:36:20.183 219 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我需要根据表的内容删除某些表。我解析了HTML::Tree用于构建 HTML 树的 HTML。 我曾经replace_with_content删除表格，但这只会删除表格标签并留下表格的内容。 请注意，表格是嵌套的。 my $content = get($url); my $tree = HTML::Tree->new(); $tree->parse($content); my (@table_tags) = $tree->look_down( '_tag' , 'table' ); my $string = $table_tags[0]->as_HTML; my $tree2 = HTML::Tree->new(); $tree2->parse($string); my (@table_tags2) = $tree2->look_down( '_tag' , 'table' ); $table_tags2[3]->replace_with_content(); 使用delete而不是replace_with_content呢？ htmlperlhtml-tablehtml-parsing 4 2 回答 2 This answer is useful 4 使用delete而不是replace_with_content呢？ 于 2012-08-03T15:47:48.753 回答 This answer is useful 1 要删除您想要的表格 $table->delete; 我不确定您是否在选择要删除的表时遇到问题，但您如何操作取决于标准是什么。中的方法HTML::Element将允许您导航树并测试它的部分，或者您可以在调用中添加条件look_down 于 2012-08-03T15:49:48.890 回答 Related 2 sql - 如果首选值为 null，则返回另一个值 1 twitter-bootstrap - Bootstrap - 导航 + 子导航在点击时显示和隐藏 0 java - 简单的java程序“Hello World！” 在eclipse中安装Android插件后不起作用 4 php - MySQL 插入 1 c - 将 ttf 字体导出为 C 源代码 1 google-docs - Google Docs 和不同的第一个站点标题或 Google Docs 中的部分...？ 0 jasper-reports - 是否在 JVM 字体中注册了字体扩展？ 0 java - 显示包含 applet 标记的 javadoc 时，STS 3.2.0 崩溃 2 c# - 从 C# 生成 Word 文档格式的简历（生物数据）？ 1 iphone - 走路时iOS跟踪位置 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11798873
> 
> 赞同：2
> 
> 时间：
> 
> 标签：html, perl, html-table, html-parsing

我需要根据表的内容删除某些表。我解析了[`HTML::Tree`](https://www.metacpan.org/module/HTML%3a%3aTree)用于构建 HTML 树的 HTML。

我曾经`replace_with_content`删除表格，但这只会删除表格标签并留下表格的内容。

请注意，表格是嵌套的。

```
my $content = get($url);

my $tree = HTML::Tree->new();
$tree->parse($content);

my (@table_tags) = $tree->look_down( '_tag' , 'table' );
my $string = $table_tags[0]->as_HTML;

my $tree2 = HTML::Tree->new();
$tree2->parse($string);

my (@table_tags2) = $tree2->look_down( '_tag' , 'table' );
$table_tags2[3]->replace_with_content(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:47:48.753

使用[delete](http://p3rl.org/HTML%3a%3aElement#delete)而不是`replace_with_content`呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:49:48.890

要删除您想要的表格

```
$table->delete; 
```

我不确定您是否在选择要删除的表时遇到问题，但您如何操作取决于标准是什么。中的方法[`HTML::Element`](https://www.metacpan.org/module/HTML%3a%3aElement)将允许您导航树并测试它的部分，或者您可以在调用中添加条件`look_down`

# jquery - Silverlight 中的 Ajax、JSON、jQuery

> ID：11798879
> 
> 赞同：0
> 
> 时间：2012-08-03T15:36:51.303
> 
> 标签：jquery, ajax, asp.net-mvc, json, webforms

您可以在 Silverlight 应用程序中使用 Ajax、JSON 和 jQuery 吗？

我有机会从事另一份主要使用 Silverlight 的工作。他们将在大约 1 到 2 年内（在 C# 中）转换为类似 MVC 的东西。但是，我已经掌握并学习了很多 Ajax、JSON 和 jQuery，并且不想失去这些技能。

此外，**没有**网络表单（其中，我有 8 年的经验）。

我知道我会失去网络表单技能（尽管我永远不会，因为我在这方面有很多经验）。

70% 的代码在 vb.net 中（我都知道，但更喜欢 c#）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:43:50.280

我不明白为什么不。

AJAX 是浏览器从 Web 服务器异步检索数据的一种方法。

JSON 是一种独立于语言的方式来表示 JavaScript 对象。

jQuery 是一个 JavaScript 框架并在客户端运行。

以上都不是特定于任何服务器端技术的，因此您应该能够轻松地将您的知识转移到使用 Silverlight Web 应用程序；唯一要改变的部分是服务器端实现。

# java - Node.js MongoDb 确保收集异步工作流

> ID：11798883
> 
> 赞同：0
> 
> 时间：2012-08-03T15:37:02.973
> 
> 标签：java, node.js, mongodb

我对 Node.js 很陌生，我正在使用 MongoDb 驱动程序，我了解 Node.js 的工作流程是事件驱动的，一切都是异步运行的，但我只是不明白如何做这样的事情：

```
var mongo = require('mongodb');
var db = new mongo.Db('meta', new mongo.Server('localhost', 27017, { auto_reconnect: true }));

db.open(function(error, db){
  if(error){
    throw error;
  }

  db.collection('logs', function(error, collection){
    if(!collection){
      db.createCollection('logs', callback); // How does this callback works? I mean, how can we continue the previous execution of the script?
    }

    // Have fun.
  });
}); 
```

所以用上面的脚本我想：

1.  打开连接
2.  检查日志收集，如果不创建，则继续...
3.  创建用户？做工作？

我仍然习惯于异步模型，已经感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:56:30.797

在这种情况下，我通常做的是将延续包装在命名回调中：

```
if (!collection) {
    db.createCollection('logs', next);
} else {
    next(null, collection);
}

function next(err, collection) {
    // do something
} 
```

话虽如此，该`createCollection`方法还将返回集合对象，并且仅在它不存在时才创建它。你可以写：

```
db.createCollection('logs', function(err, collection) {
    // do something
}); 
```

# css - 调整jquery ui标签的宽度-所有浏览器的宽度相同

> ID：11798884
> 
> 赞同：1
> 
> 时间：2012-08-03T15:37:04.907
> 
> 标签：css, jquery-ui

我目前正在使用 jquery ui 标签，但我在标签的 css 方面遇到了一些问题。我尝试弄乱宽度，但它在不同的浏览器中中断。是否可以为选项卡的导航菜单设置自动宽度？[例子](http://webprolearner.ueuo.com/dropdown-menu/test2.php)

![图片：](../Images/f7b02da62d3b54100b8b34e9a069070f.png)

**CSS**

```
#page-wrap { width: 750px; background:#FFF; margin: 10px auto; margin: 0; padding: 0;    }
.ui-tabs   { zoom: 1;}
.ui-tabs .ui-tabs-nav   { list-style: none; position: relative; overflow:hidden; z-index: 1000; background: #EBEBEB; margin: 0; padding: 0;}
.ui-tabs .ui-tabs-nav li { position: relative; float: left; border-bottom-width: 0 !important;  margin: 0 0px -1px 0;  background: #EBEBEB;}
.ui-tabs .ui-tabs-nav li a { float: left; text-decoration: none; padding: 5px 10px ;  outline: medium none; font-weight: bold; font-size:11px; line-height: 30px;}
.ui-tabs .ui-tabs-nav 
li.ui-tabs-selected { border-bottom-width: 0; background: #F9AE5C;   border-top:1px solid #D4D4D4; border-left:1px solid #D4D4D4; border-right:1px solid #D4D4D4; border-bottom:1px solid #FFF; }
.ui-tabs .ui-tabs-nav li a, 
.ui-tabs.ui-tabs-collapsible 
.ui-tabs-nav li.ui-tabs-selected a  { cursor: pointer; color: #222222; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
.ui-tabs .ui-tabs-panel { padding: 20px; display: block; border-width: 0;  background: none; position: relative; min-height: 100px;  border: 1px solid #D4D4D4;  }
.ui-tabs .ui-tabs-hide { display: none !important; margin: 0; padding: 0;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:06:22.420

尝试制作`.ui-tabs`浮动元素：

```
.ui-tabs { zoom: 1; float: left; } 
```

您可能需要为定位添加包装器，因为该元素现在是浮动的。

# emacs - Qt4包含文件阻止emacs语义或自动完成工作？

> ID：11798886
> 
> 赞同：0
> 
> 时间：2012-08-03T15:37:12.067
> 
> 标签：emacs, qt4, elisp, emacs23, qt4.8

我花了很多时间来配置和测试 Qt4 的 emacs 语义和自动完成功能。由于间接包含，我发现这些甚至无法解析或找到 Qt4 包含文件。例如，QString> include qstring.h (include ../../src/tools/qstring.h, mingw) 我总是得到“Wrong type argument: stringp, nil”（在 Linux 或 Mingw 上试试）我没有了解 Lisp。你能帮我解决这个问题吗？非常感谢！

调试跟踪如下：

```
 Debugger entered--Lisp error: (wrong-type-argument stringp nil)
  call-process(nil nil #<buffer *clang-output*> nil "-cc1" "-fsyntax-only" "-I~/project/qt481-mingw/include" "-I~/project/qt481-mingw/include/Qt" "-I~/project/qt481-mingw/include/QtCore" "-I~/project/qt481-mingw/include/QtGui" "-code-completion-at" "c:/Users/ygao/project/tests/test-qt-semantic.cpp:13:8" "c:/Users/ygao/project/tests/test-qt-semantic.cpp")

  apply(call-process nil nil #<buffer *clang-output*> nil ("-cc1" "-fsyntax-only" "-I~/project/qt481-mingw/include" "-I~/project/qt481-mingw/include/Qt" "-I~/project/qt481-mingw/include/QtCore" "-I~/project/qt481-mingw/include/QtGui" "-code-completion-at" "c:/Users/ygao/project/tests/test-qt-semantic.cpp:13:8" "c:/Users/ygao/project/tests/test-qt-semantic.cpp"))

  (if ac-clang-auto-save (apply (quote call-process) ac-clang-executable nil buf nil args) (apply (quote call-process-region) (point-min) (point-max) ac-clang-executable nil buf nil args)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:02:54.637

从堆栈跟踪来看，似乎`ac-clang-executable`是零。尝试`M-x customize-option RET ac-clang-executable`将其设置为`clang`二进制文件的路径。

# javascript - 在页面加载和单击时显示/隐藏 div

> ID：11798889
> 
> 赞同：0
> 
> 时间：2012-08-03T15:37:26.030
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap 的按钮组在不同的内容之间切换。可以在[http://jsfiddle.net/g8KSf/看到一个例子](http://jsfiddle.net/g8KSf/)

基本上，如果您单击“游戏”，games_container div 将出现，而其他 div 将被隐藏。我的工作正常。

我将帖子类型存储在数据库中，如帖子、游戏、视频等，我希望能够在页面加载时打开相关的 div，而不仅仅是点击。现在 post_container 在页面加载时默认显示。

假设我有一个 PHP 变量`$post_type = 'game';`，我怎样才能让 game_container 在页面加载时显示，同时仍然通过单击来切换它？

这是我到目前为止的js：

```
$('.container').hide();
$('#post_container').show();

$('.post_types button').click(function(){
        var target = "#" + $(this).data("target");
        $(".container").not(target).hide();
        $(target).show();
        $('#post_type').val($(this).text());
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:45:34.613

要在加载时显示游戏容器，您需要替换此行

```
$('#post_container').show(); 
```

到

```
$('#game_container').show(); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/g8KSf/4/)**

而且目前您正在使用

```
$('#post_type').val($(this).text()); 
```

在这里，而不是使用`this`这一行`$(this).text()`，使用`target`如下变量

```
$('#post_type').val($(target).text()); 
```

## 更新：

要在页面加载时动态显示，

1.  将 post_type 的值存储在变量中

    `var ptype = ...STORE THE POST TYPE VALUE...;`

2.  将值传递到此行

    `$('#'+ptype+'_container').show();`
    **或者**
    `$('#'+$post_type+'_container').show();`

参考**[现场演示 2](http://jsfiddle.net/SivaCharan/g8KSf/6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:46:04.620

更改`$('#post_container').show();`为`$('#game_container').show();`

你去[http://jsfiddle.net/g8KSf/5/](http://jsfiddle.net/g8KSf/5/)

我`php`对这里的动态不太熟悉：

```
function(){ $.ajax({ 
       type:"GET", 
       url:"file.php", 
       data:id, 
       success:function(container){ 
           $('#'+container).show();
       }, 
       // ... more ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:46:56.790

只需`show()`使用您喜欢的选择器在页面加载时运行。

```
$(function() {
    $('#<?=$post_type?>_container').show();
}); 
```

`<?=?>`用于 echo 的简短 PHP，您不能在 .js 文件中使用它。如果我指出的方式不适合您，您应该为您喜欢的选择器设置一个全局变量并使用它而不是内联 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:48:26.067

您可以：

*   将第二行更改`#post_container`为`#game_container`直接在您的 JavaScript 代码中
*   或`$('#btn-game').click();`之后调用，例如在`onload`属性中`body`或在单独的`script`标签中。

# java - 将父级转换为子级 - BufferedImage 对象

> ID：11798890
> 
> 赞同：9
> 
> 时间：2012-08-03T15:37:27.620
> 
> 标签：java, casting, bufferedimage

每当我尝试将 BufferedImage （父级）转换为我自己扩展的 AdvancedBufferedImage （子级）时，我都会得到一个`ClassCastException`，我**没有重写**任何方法，并且我已经**实现了所有承包商**而不修改它们

每当我尝试使用 ImageIO.read() 方法从文件中创建 AdvancedBufferedImage 时，我都会遇到此异常。

```
File file = new file(path);
AdvancedBufferedImage image = (AdvancedBufferedImage) ImageIO.read(file); 
```

好像应该没有问题，请问是什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T15:47:03.500

不允许这样的向下转换。

首选的解决方案是创建 AdvancedBufferedImage 的构造函数，将 BufferedImage 作为参数。有了它，您可以执行以下操作。

```
File file = new file(path);
AdvancedBufferedImage image = new AdvancedBufferedImage(ImageIO.read(file)); 
```

在这里，AdvancedBufferedImage 的构造函数可以决定如何将 BufferedImage 正确转换为高级图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:43:18.210

除非 PARENT 类的引用包含 CHILD 类或其派生类的实例，否则不能将 PARENT 类强制转换为 CHILD 类。

在您的情况下，`ImageIO.read(file)`返回一个实例`BufferedImage`，它是基类。这只有在`ImageIO.read(file)`返回实例`AdvancedBufferedImage`或其子类时才有效。

当你扩展某个类时，派生类会从基类继承一些属性，但是，基类什么也得不到。因此，由于派生类的实例具有基类的所有属性，因此基类的引用可以保存派生类的实例，即可以将派生类强制转换为基类。现在，派生类可能会添加一些新属性，而基类永远不会知道这些属性。所以从 BASE 类转换为 DERIVED 显然是不正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T15:43:57.830

[Java中的向下转型](https://stackoverflow.com/questions/380813/downcasting-in-java)

向下转型不会像这样工作。请参阅上面帖子中的答案。作为替代方案，如何创建一个静态工厂方法，该方法接受`BufferedImage`并返回使用返回的对象构建的类的实例`ImageIO.read()`？

例如：

```
private AdvancedBufferedImage(BufferedImage bi) {
    //  build your AdvancedBufferedImage from bi
    ...
}

public static AdvancedBufferedImage buildABI(BufferedImage bi) {
    return new AdvancedBufferedImage(bi) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T16:06:26.150

通常，您不能将父类转换为子类。**就像强迫将动物投给狗一样。Dog 是一种动物，但另一种方式并不总是如此**，因此 Java 编译器不允许您这样做。

请参阅[对象继承](https://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-29T06:45:10.887

向下转型是允许的，但它必须是孩子的实际实例：

```
class A {
  String name = "a";
  A(){};
}

class B extends A {
}

public class Main {
  public static void main(String[] args) {
    A a = new B(); // must a b instance
    B b = new B();
    b = (B)a;
    System.out.println(b.name);

  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T15:44:01.470

`BufferedImage` *不是一个* `AdvancedBufferedImage`，所以演员表失败了。

您可以扩展 的功能`BufferedImage`，但该`read`方法仍然只返回一个`BufferedImage`. 强制转换不会强制引用成为或表现为所需的类型。

你可能想`BufferedImage`在你的`AdvancedBufferedImage`类中包装一个，然后你可以传递和操作你的高级类。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-03T15:41:14.203

只有当您尝试转换的对象实际上是您要转换的类的实例时，您的向下转换才会成功。

# php - SQL - 获取 ID 介于 5 到 10 之间的行。

> ID：11798896
> 
> 赞同：0
> 
> 时间：2012-08-03T15:37:49.790
> 
> 标签：php, mysql, sql

我是 SQL 新手，需要获取 ID 大于/等于 5 且小于/等于 10 的行。是否有 SQL 可以处理这个问题，或者我应该使用 PHP 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:39:01.317

最简单的方法是使用[BETWEEN](http://msdn.microsoft.com/en-us/library/ms187922.aspx)

```
SELECT * FROM theTable
WHERE Id BETWEEN 5 AND 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:40:13.843

那就是关于 SQL 的很酷的事情。它的语法接近我们的语言。你看我几乎完全按照你的要求输入了。

```
Select * From youTable
Where Id >= 5 AND Id <= 10 
```

同样在`T-SQL`BETWEEN 运算符中将包括 5 和 10 并执行与前面示例完全相同的操作。从那里是你的选择。

```
Select * From yourTable
Where Id BETWEEN 5 AND 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:40:27.900

`WHERE`您可以在子句中使用大于或小于。

```
SELECT * 
FROM yourTable
WHERE Id >= 5 AND ID <= 10 
```

# iphone - 在 CGPDFDocument 中突出显示

> ID：11798899
> 
> 赞同：2
> 
> 时间：2012-08-03T15:38:05.927
> 
> 标签：iphone, ios, ipad, cgpdfdocument

我是 iphone 新手，我使用 CGPDFDocument 打开了一个 pdf 文件。我想在文档中的特定行长按时做到这一点，做一个突出显示。任何示例代码来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T18:01:51.930

您需要推出自己的解决方案。Apple 在 iOS 中添加了文本选择作为私有 API，但他们没有公开任何内容。您可以简单地使用 UIWebView 来获得该功能，或者，如果您需要更多控制或还想要突出显示等功能，则需要编写自己的解决方案。

对于一般的 PDF 阅读器，那里有相当多的开源代码。（[以 vfr/Reader](https://github.com/vfr/Reader)为例）

还要获得文本选择/注释，这是一个完全不同程度的痛苦。我在一年中的大部分时间里全职工作在这些功能上，并且刚刚发布了我的商业框架 PSPDFKit 的 v2。

自己滚动时需要解决两个问题；首先获取字形矩形并从单个字形中查找单词。我使用 CoreGraphics 作为解析器 - 计算正确的帧并管理当前的绘图堆栈和不同的字体样式是困难的部分。那里有一些开源代码（PDFKitten），但我最终推出了自己的代码，因为它真的不是很好，并且在各种 PDF 字体格式方面存在很多问题。

其次，编写实际的注释对象。在这里，您需要自己解析 PDF 以生成所有对象的树，然后编写一个新的预告片来替换 /Pages 对象（PDF 大多只是文本，所以它的解析性很好；但仍然很难正确）。我不知道有任何开源代码可以帮助您。[我在官方 PDF 参考资料](https://pspdfkit.com/guides/ios/current/features/rendering-pdf/)上度过了很多漫长的夜晚。

# xml - 递归复杂类型定义中的 XML、XSD xs:keyref

> ID：11798902
> 
> 赞同：2
> 
> 时间：2012-08-03T15:38:17.470
> 
> 标签：xml, recursion, xsd, xerces, keyref

我有一些 xml 数据，顶部有一个允许类型的列表，以及一个引用允许类型的对象和子对象的递归列表类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="KEYREF_TEST.xsd">
  <ALLOWED_SHAPE_TYPES>
    <SHAPE_TYPE>Circle</SHAPE_TYPE>
    <SHAPE_TYPE>Triangle</SHAPE_TYPE>
    <SHAPE_TYPE>Square</SHAPE_TYPE>
  </ALLOWED_SHAPE_TYPES>
  <SHAPES>
    <SHAPE>
      <TYPE>Triangle</TYPE>
      <SUB_SHAPES>
        <SHAPE>
          <TYPE>Circle</TYPE>
          <SUB_SHAPES/>
        </SHAPE>
        <SHAPE>
          <TYPE>Square</TYPE>
          <SUB_SHAPES>
            <SHAPE>
              <TYPE>Triangle</TYPE>
              <SUB_SHAPES/>
            </SHAPE>
          </SUB_SHAPES>
        </SHAPE>
      </SUB_SHAPES>
    </SHAPE>
    <SHAPE>
      <TYPE>Square</TYPE>
      <SUB_SHAPES/>
    </SHAPE>
  </SHAPES>
</ROOT> 
```

我已经定义了验证此文档的架构，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="ROOT">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ALLOWED_SHAPE_TYPES">
          <xs:complexType>
            <xs:sequence minOccurs="0" maxOccurs="unbounded">
              <xs:element name="SHAPE_TYPE" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="SHAPES" type="shape-list-type"/>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="SHAPE_TYPE_UK">
      <xs:selector xpath="ALLOWED_SHAPE_TYPES/SHAPE_TYPE"/>
      <xs:field xpath="."/>
    </xs:unique>
  </xs:element>
  <xs:complexType name="shape-list-type">
    <xs:sequence>
      <xs:element name="SHAPE" minOccurs="0" maxOccurs="unbounded">
        <xs:complexType>
         <xs:sequence>
            <xs:element name="TYPE" type="xs:string">
              <xs:keyref name="SHAPE_TYPE_FK" refer="SHAPE_TYPE_UK">
                <xs:selector xpath="."></xs:selector>
                <xs:field xpath="."></xs:field>
              </xs:keyref>
            </xs:element>
            <xs:element name="SUB_SHAPES" type="shape-list-type"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

在 oXygen 13.2 中进行验证时，出现以下错误：

```
System ID: C:\pvcswork\CodeSource\XMLSchema\KEYREF_DATA.xml
Main validation file: C:\pvcswork\CodeSource\XMLSchema\KEYREF_DATA.xml
Schema: C:\pvcswork\CodeSource\XMLSchema\KEYREF_TEST.xsd
Engine name: Xerces
Severity: error
Description: Identity Constraint error:  identity constraint "KeyRef@1df2ead" has a keyref which refers to a key or unique that is out of scope.
Start location: 10:28 
```

我相信这是因为 xs:keyref 是 xs:complexType 定义的子元素，它不是定义 xs:unique 的 xs:element 的子元素。

我可以将 xs:keyref 移动到 ROOT 定义中并使用 XPath 定位 TYPE 元素，但是 // 语法是不允许的，所以我会失去递归并且必须为每个嵌套级别定义一个新的 xs:keyref。** UPDATE - // 在 XPath 开始时允许，前面有一个点！**

Is there a solution I have missed (still using XSDs)? Thanks in advance..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:08:25.337

The XSD below would be my solution to your problem. I basically fixed some of the selectors and put them at the same level.

![QTAssistant showing unique/keyref](../Images/e9f3cf72f513f9ec9d5e8b8475bebfb5.png)

**The XSD:**

```
<?xml version="1.0" encoding="UTF-8"?> 
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
    <xs:element name="ROOT"> 
        <xs:complexType> 
            <xs:sequence> 
                <xs:element name="ALLOWED_SHAPE_TYPES"> 
                    <xs:complexType> 
                        <xs:sequence minOccurs="0" maxOccurs="unbounded"> 
                            <xs:element name="SHAPE_TYPE" type="xs:string"/> 
                        </xs:sequence> 
                    </xs:complexType> 
                </xs:element> 
                <xs:element name="SHAPES" type="shape-list-type"/> 
            </xs:sequence> 
        </xs:complexType> 
        <xs:unique name="SHAPE_TYPE_UK"> 
            <xs:selector xpath="ALLOWED_SHAPE_TYPES/SHAPE_TYPE"/> 
            <xs:field xpath="."/> 
        </xs:unique> 
        <xs:keyref name="SHAPE_TYPE_FK" refer="SHAPE_TYPE_UK"> 
            <xs:selector xpath=".//SHAPE/TYPE"></xs:selector> 
            <xs:field xpath="."></xs:field> 
        </xs:keyref>        
    </xs:element> 
    <xs:complexType name="shape-list-type"> 
        <xs:sequence> 
            <xs:element name="SHAPE" minOccurs="0" maxOccurs="unbounded"> 
                <xs:complexType> 
                    <xs:sequence> 
                        <xs:element name="TYPE" type="xs:string"/> 
                        <xs:element name="SUB_SHAPES" type="shape-list-type"/> 
                    </xs:sequence> 
                </xs:complexType> 
            </xs:element> 
        </xs:sequence> 
    </xs:complexType> 
</xs:schema> 
```

# javascript - Javascript无缘无故地将浮点数转换为整数

> ID：11798903
> 
> 赞同：3
> 
> 时间：2012-08-03T15:38:17.373
> 
> 标签：javascript, floating-point, parsefloat

我编写了一个函数，该函数的行为取决于其参数的数字类型。整数或浮点数。

使用此问题中的一些代码[如何检查数字是浮点数还是整数？](https://stackoverflow.com/questions/3885817/how-to-check-if-a-number-is-float-or-integer)很容易检测是否浮动，但后来我偶然发现如果您使用该数字调用函数，javascript 会无缘无故地强制转换`1.0`为这种情况。`1`

例子：

```
function dump(a, b) {
 console.log(a, typeof b, b);
}

dump('1', 1);
dump('1.0', 1.0);
dump('1.1', 1.1); 
```

输出 chrome、firefox、ie、opera 和 safari 都给出了相同的结果：

```
1   number 1
1.0 number 1 "wrong"
1.1 number 1.1 
```

我知道 javascript 只知道类型`number`，但强制转换似乎太过分了。我想出的唯一解决方案是使用字符串值调用函数`'1.0'`，例如检测点并使用`parseFloat`或`parseInt`。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:41:24.857

您已经承认 JavaScript 只有一种`Number`类型。因此，`1`与 相同`1.0`。

如果您需要此用于显示目的，那么您应该使用`toFixed`.

```
1..toFixed(1); // "1.0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:45:00.973

```
number%1===0 
```

如果条件为`true`，则为整数，否则为浮点数

# ios - 我的更新是否适用于 iOS 3.0 用户（我检查 Core Telephony 是否存在）？

> ID：11798905
> 
> 赞同：1
> 
> 时间：2012-08-03T15:38:24.440
> 
> 标签：ios, core-telephony, ios3.0

**详细信息**：我准备向 Apple 提交我的应用程序的更新。但是，我有一个疑问。我在我的一个类的标题中添加了以下代码...

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h> 
```

这在主要课程中......

```
if ([CTTelephonyNetworkInfo class]) {
    //Now do some telephony stuff ... 
```

Telephony 适用于 iOS 4 及更高版本。我相信仍然在 iOS3 上的任何人都应该因为该`if`声明而没问题，但我无法测试它，因为我没有旧设备并且 XCode 4.2 没有旧模拟器。

我的 iOS 部署目标仍然是 3.0，我希望保持这种状态以确保每个人都可以使用我的应用程序。

**问题**：我的代码是否正确？我的 iOS 部署目标是否正确？我是否以正确的方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:50:55.567

The code is correct (As @SimonH points out, you used to need a `NSClassFromString`, but that changed with some version of the compiler, by the time the 4.0 SDK was released).

You also need to make sure you weak link `CoreTelephony` (or for that matter any framework not available on 3.x), so the binary won't attempt to load it when launching the app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:46:42.703

不，这不对。

```
if (NSClassFromString(@"CTTelephonyNetworkInfo") != nil)
{
    // use class
}
else
{
    // not available, deal with it.
} 
```

是你应该使用的。使用您编写的应用程序只会崩溃，因为它不会找到 CTTelephonyNetworkInfo 类。此外，您应该确保已将 CorTele... 框架设置为可选。

# jmx - hyperic jmx 监控：HQ 中不存在插件

> ID：11798910
> 
> 赞同：0
> 
> 时间：2012-08-03T15:38:38.557
> 
> 标签：jmx, hyperic

我的 webapp 在 tomcat 6 下运行，它使用 activeMQ 5.5 lib for jms。我正在创建一个插件来让 hyperic 4.5 通过 jmx 监视代理，但 hyperic 无法自动发现它。它也无法在管理插件管理器中加载它。（我正在使用的 hyperic 版本不支持 active mq 5.5，但它是一个小版本。）

日志中有错误，没有给我任何提示。试图启动 idmlBroker4.xml 的插件传输，但 HQ 中不存在插件

PDT 错误 [全局插件同步（由插件部署启动）1] [org.hyperic.hq.appdef.server.session.AgentManagerImpl@1552] 试图启动 Broker4.xml 的插件传输，但 HQ PDT 信息中不存在插件 [ scheduler-2] [org.hyperic.hq.product.server.session.ProductPluginDeployer@409] 取消部署插件：/home/hyperic/server-4.6.6/hq-engine/hq-server/webapps/ROOT/WEB-INF /hq-plugins/Broker4.xml

我的 MBean 和插件是：

* * *

MBean：org.apache.activemq.broker.jmx.QueueView 名称：org.apache.activemq:BrokerName=IDMLBroker,Type=Queue,Destination=idml1.com.cequint.idml.report.persistence 0\. 属性：CacheEnabled = true ( r) ... 13\. 属性：PrioritizedMessages = false (r) 14\. 属性：EnqueueCount = 2877 (r) 15\. 属性：DequeueCount = 2877 (r) 16\. 属性：DispatchCount = 2877 (r) ... 操作： void purge [] 操作：boolean removeMessage [java.lang.String] ....

* * *

```
<plugin>
<service name="Broker"
       server="Sun JVM" version="1.5">

<property name="OBJECT_NAME"
          value="org.apache.activemq:BrokerName=Broker,Type=Queue,Destination=host1.com.server.report"/>

<plugin type="autoinventory"/>

<plugin type="measurement"
        class="org.hyperic.hq.product.jmx.MxMeasurementPlugin"/>

<plugin type="control"
        class="org.hyperic.hq.product.jmx.MxControlPlugin"/>

<!-- reset is an MBean operation, set* are attribute setters -->
<actions include="cursorSize"/>

<config>
    <option name="jmx.url" description="JMX URL to MBeanServer"  default="service:jmx:rmi:///jndi/rmi://localhost:8186/jmxrmi"/>
    <option name="jmx.username" description="JMX username" optional="false" default="user"/>
    <option name="jmx.password" description="JMX password" optional="false" default="password" type="secret"/>
</config>

<properties>
  <property name="EnqueueCount" description="Cache Size"/>
  <property name="DequeueCount" description="TrainThreshold"/>
</properties>

<filter name="template"
        value="${OBJECT_NAME}:${alias}"/>

<metric name="EnqueueCount"
        template="${OBJECT_NAME}:EnqueueCount"
        indicator="true"/>

<metric name="DequeueCount"
        alias="DequeueCount"
        collectionType="trendsup"
        indicator="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T19:34:48.230

我也有这个问题；对我来说，这个错误是由我的文件名不是 [ServiceName]-plugin.xml 引起的。

因此，由于您的服务是 Broker，因此您的文件名需要是 broker-plugin.xml。此文件名似乎不区分大小写。

此外，我发现将插件直接放到服务器的 hq-plugins 目录中可以在服务器日志中提供比使用插件管理器更好的反馈，并且建议您使用它。

# jquery - jQuery Click 事件未触发

> ID：11798917
> 
> 赞同：0
> 
> 时间：2012-08-03T15:38:48.807
> 
> 标签：jquery

简而言之，我有一个点击事件，它似乎没有触发。正在加载 jQuery，这就是我为 jQuery 所拥有的：

```
<script type="text/javascript">
(function($) {
    $(".ajaxForm").click(function() {
        console.log('click');
    });
});
</script> 
```

和 HTML

```
<div class="right">
<span class="ajaxForm" type="ajax"><span>Get Quote</span></span>
</div> 
```

这可能只是我很愚蠢，这是漫长的一天。有什么明显的错误吗？我已经检查，双重检查和三次检查选择器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:42:03.610

函数（$）不正确。试试 $(function(){});

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:41:58.827

像这样的东西应该工作：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".ajaxForm").click(function() {
        console.log('click');
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T15:41:39.337

尝试：

```
$(function(){
    $(".ajaxForm").click(function() {
        console.log('click');
    });
}); 
```

请注意与第一行代码的语法差异。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T15:44:12.717

您创建了匿名函数，但忘记调用它（自调用函数）。在这种情况下，您将不得不使用 jQuery 对象作为参数直接调用它。代码：

```
<script type="text/javascript">
(function($) {
    $(".ajaxForm").click(function() {
        console.log('click');
    });
})(jQuery);
</script> 
```

显然，必须在加载 DOM 之后或在元素之后调用此函数`.ajaxForm`（否则他将找不到要附加事件的元素，并且事件不会附加到您想要的元素）。

如果你想在 HEAD（或另一个 JavaScript 文件）中使用这个函数，你必须这样做：

```
(function($) {
    $(document).ready(function() {
        $(".ajaxForm").click(function() {
            console.log("click");
        });
    });
})(jQuery) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T15:53:15.873

只是为了在工作中扔一个扳手......

```
$(".ajaxForm").on('click',function() {
    console.log('click');
}); 
```

On（类似于 live）实际上[更快](https://stackoverflow.com/a/8018769/94278)，并且`.click()`不需要 DOM 准备好

# android - Android http-posting an x ml to wcf server 给出请求错误

> ID：11798918
> 
> 赞同：0
> 
> 时间：2012-08-03T15:38:53.707
> 
> 标签：android, xml, wcf, http-post

我正在尝试在通过 xml 与 wcf 服务器通信的 Android 上创建登录活动。

获取请求没有问题，但是发布却给出了请求错误。webtracelog 提供以下内容：

“检查 LoginMobileParameter 类型对象的开始元素时出错。根级别的数据无效。第 1 行，位置 1。”

我怀疑xml有问题，但我无法确定。

## 服务器部分：

**登录参数：**

```
[DataContract]
public class LoginMobileParameter
{
    [DataMember(Order = 1)]
    public string Username { get; set; }

    [DataMember(Order = 2)]
    public string Password { get; set; }

    [DataMember(Order = 3)]
    public string DeviceID { get; set; }
} 
```

**服务：**

```
[OperationContract]
[WebInvoke(
    UriTemplate = "Security/LoginMobile", 
    Method = "POST", 
    RequestFormat = WebMessageFormat.Xml, 
    ResponseFormat = WebMessageFormat.Xml
)]
string LoginMobile(LoginMobileParameter parameter); 
```

**服务：**

```
 public string LoginMobile(string userName, string password, string deviceID)
    {
        string decryptedPw = ServiceFactory.EncryptionService.DecryptString(password);
        bool loginOK = dataService.CheckLogin(userName, decryptedPw);

        if (loginOK)
        {
            Token t = NewToken;
            t.Username = userName;
            t.DeviceID = deviceID;
            string tokenString = dataService.SaveToken(t);

            Log("LoginMobile " + deviceID + ": " + userName + ": Issued Token " + tokenString);
            return tokenString;
        }

        Log("Invalid Username for mobile User " + userName + " / " + password);
        return string.Empty; // not authorized
    } 
```

## 客户端部分：

**xml生成器：**

```
public class XmlGenerator {
    public static String GenerateLoginXml(String user, String password){
        String returnstring = ""; 
        returnstring += "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
        returnstring += "<LoginMobileParameter><Username>";
        returnstring += user;
        returnstring += "</Username><Password>";
        returnstring += password;
        returnstring += "</Password><DeviceID>androidclient</DeviceID></LoginMobileParameter>";
        return returnstring;
    }
} 
```

**登录按钮：**

```
 ...
    String xml = XmlGenerator.GenerateLoginXml(username, password);
    String url = "security/loginmobile";
    String result = con.post(xml, url); 
```

**邮政：**

```
 public class HttpConnection {

    public String post(String data, String parameter) {
        String urlToSendRequest = "http://my.server.com:1234/Service/" + parameter;
        String result = "";

        HttpPost httpPost = new HttpPost(urlToSendRequest);

        try {
            StringEntity entity = new StringEntity(parameter, HTTP.UTF_8);
            entity.setContentType("application/xml");
            httpPost.setHeader("Content-Type", "application/xml;charset=UTF-8");
            httpPost.setEntity(entity);

            HttpClient httpClient = new DefaultHttpClient();
             HttpResponse response = httpClient.execute(httpPost);

            HttpEntity responseEntity = response.getEntity();
            if (responseEntity != null) {
                 result = EntityUtils.toString(responseEntity);
            }
        }

        catch (Exception ex) {
            ex.printStackTrace();
        }
    return result; 
```

我通读了大量线程并尝试了所有方法，但无法使其正常工作。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:00:25.550

尝试发布到 .ashx 并将原始发布的数据写入文本文件。

将该文本文件放入十六进制编辑器，查看 XML 中是否有任何无关字节，例如 BOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:03:58.620

必须在标记之前的 XmlGenerator 中添加以下内容：

```
returnstring += "<LoginMobileParameter xmlns=\"http://schemas.datacontract.org/2004/07/Projectname.Package.Parameter\">"; 
```

还有线

```
StringEntity entity = new StringEntity(parameter, HTTP.UTF_8); 
```

使用 url 参数而不是数据。

# java - 确定按钮不起作用

> ID：11798920
> 
> 赞同：1
> 
> 时间：2012-08-03T15:38:57.700
> 
> 标签：java, java-me, midp, lcdui

请看下面的代码。

在这里，“确定”按钮没有响应。

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

public class TexyFieldExample extends MIDlet implements CommandListener
{
    private Form form;
    private Display display;
    private TextField name, company;
    private Command ok;

    public TexyFieldExample()
    {        
        name = new TextField("Name","",30,TextField.ANY);
        company = new TextField("Company","",30,TextField.ANY);
        ok = new Command("OK",Command.OK,2);

    }

    public void startApp()
    {
        form = new Form("Text Field Example");
        display = Display.getDisplay(this);

        form.append(name);
        form.append(company);
        form.addCommand(ok);

        display.setCurrent(form);

    }

    public void pauseApp()
    {

    }

    public void destroyApp(boolean destroy)
    {
        notifyDestroyed();
    }

    public void commandAction(Command c, Displayable d) 
    {
        String label = c.getLabel();

        if(label.equals("ok"))
        {
            showInput();
        }
    }

    private void showInput()
    {
        form = new Form("Input Data");
        display = Display.getDisplay(this);

        form.append(name.getString());
        form.append(company.getString());

        display.setCurrent(form);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:05:32.060

在此代码段中，不会调用[commandAction ，因为您忘记了](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/CommandListener.html#commandAction(javax.microedition.lcdui.Command,%20javax.microedition.lcdui.Displayable) "API 文档")[setCommandListener](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Displayable.html#setCommandListener(javax.microedition.lcdui.CommandListener) "API 文档")：

> 为这个 Displayable 设置一个 Commands 的监听器...

在 startApp 中，这将如下所示：

```
 //...
    form.addCommand(ok);
    // set command listener
    form.setCommandListener(this);
    //... 
```

此外，正如[另一个答案中所指出的](https://stackoverflow.com/a/11798976/839601)，即使您设置了侦听器，它也会错过命令，因为代码检查它错误 - 在 Java 中，`"ok"`不[等于](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/lang/String.html#equals%28java.lang.Object%29 "API 文档") `"OK"`。

实际上，鉴于这里只有一个命令，因此无需签入 commandAction - 您可以直接进入`showInput`那里 - 再次，直到*只有一个*命令。

* * *

在此代码段中值得添加的另一件事是[日志记录](http://en.wikipedia.org/wiki/Computer_data_logging "这是什么？")。

使用适当的日志记录，只需在模拟器中运行代码，查看控制台并发现根本没有调用例如 commandAction，或者没有正确检测到该命令将非常容易：

```
// ...
public void commandAction(Command c, Displayable d) 
{
    String label = c.getLabel();
    // log the event details; note Displayable.getTitle is available since MIDP 2.0
    log("command  s [" + label + "], screen is [" + d.getTitle() + "]");

    if(label.equals("ok"))
    {
        // log detection of the command
        log("command obtained, showing input");
        showInput();
    }
}

private void log(String message)
{
    // show message in emulator console
    System.out.println(message);
}
// ... 
```

# javascript - 为流畅/响应式设计调整文本大小的优雅解决方案的性能？

> ID：11798926
> 
> 赞同：1
> 
> 时间：2012-08-03T15:39:23.517
> 
> 标签：javascript, css, fonts, responsive-design, media-queries

我发现以下基于视口大小调整文本大小的 JS 解决方案非常优雅：

[https://stackoverflow.com/a/10295733/1318135](https://stackoverflow.com/a/10295733/1318135)

```
onresize=onload=function(){document.body.style.fontSize=window.innerWidth+"px"} 
```

但是，有两个问题：

1.  它依赖于调整大小的视口。我也想在页面首次加载时触发它，但我是 JS 的新手。

2.  我的页面完全使用 em 值编码；这使用 px。我如何使用它来调整**默认的 em 大小**，然后它会自动渗透到页面上的每个其他元素？

[http://jsfiddle.net/hFNc7/](http://jsfiddle.net/hFNc7/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:01:52.197

1.  查看其他答案（或将[http://jsfiddle.net/cjzEK/1/](http://jsfiddle.net/cjzEK/1/)放在页面底部）

2.  em 本身并不是一个大小。这是一个百分比不同的写法。em 为您工作的唯一方法是因为在浏览器中设置了 1 个基本字体大小（或者也可能是重置样式表）。浏览器中通常的基本字体大小是 16px。所以这个解决方案所做的是通过将其添加到正文来更改基本大小（将其添加到 html 可能会更好）。

例如`p{font-size:1em;}`，没有任何重置将是 16px。1.5em 将是 24px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:59:54.683

您需要在`body`'s`load`事件中运行该代码。最简单的方法是直接通过其`onload`属性设置它：

```
<body onload="var f = function () { document.body.style.fontSize = 0.2 * window.innerWidth + 'px'; }; window.onresize = f; f();"> 
```

它能做什么：

1.  创建一个能够动态设置字体大小的函数。
2.  将函数设置为`resize`事件侦听器。
3.  立即执行该功能。

PS：有更优雅的方式来写这个，但既然你是新的，最好从一个更简单的符号开始。

# android - JQuery Mobile Popup 在 Android 4 模拟器中不起作用

> ID：11798927
> 
> 赞同：1
> 
> 时间：2012-08-03T15:39:25.047
> 
> 标签：android, jquery-mobile, android-emulator, popup

我创建一个弹出窗口：

```
<div data-role="popup" id="confirmation-dialog"  data-theme="a" data-overlay-theme="a" data-position-to="window">
     .......
</div> 
```

它将从以下位置调用：

```
<a href="#confirmation-dialog" data-icon="logout" id="logout-button" data-rel="popup">Exit</a> 
```

它在浏览器中工作，但在 Android 4.0.3 的模拟器中不工作

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:13:44.887

模拟器是否已更新以支持 jQuery Mobile 1.2 alpha？

# javascript - 是否可以设置 Eclipse Javascript 格式化程序以符合 JSLint？

> ID：11798929
> 
> 赞同：6
> 
> 时间：2012-08-03T15:39:27.417
> 
> 标签：javascript, eclipse, coding-style, jslint

我似乎无法配置 Eclipse Javascript 格式化选项，以便它生成标记 JSLint 不会抱怨 - 主要是在 JSLint 上未设置“容忍草率空白”选项时的空白设置。可以这样配置吗？

例如，JSLint 期望函数声明的间距如下所示：

```
 function () {
}

function foo() {
} 

```

但我只能得到要产生的设置：

```
 function () {
}

function foo () {
} 

```

或者

```
 function() {
}

function foo() {
} 

```

或者，是否有一个轻量级编辑器/IDE 可以格式化我的 javascript 代码以创建满足 JSLint 奇思妙想的标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:38:20.063

试试[jshint-eclipse](http://github.eclipsesource.com/jshint-eclipse/)插件。另请参阅之前提出的[这个](http://bit.ly/MnSXha)问题。

引用 JSHint**[页面](http://www.jshint.com/about/)**：

> JSHint 是 JSLint 的一个分支，JSLint 是由 Douglas Crockford 编写和维护的工具。
> 
> 该项目最初是为了制作一个更可配置的 JSLint 版本——它不会对用户强制执行一种特定的编码风格——但后来转变为一个具有自己目标和理想的单独的静态分析工具。

jshint-eclipse 是一个将 JSHint 与 Eclipse 集成的 eclipse 插件。

jshint-eclipse 的更新站点是：
`http://github.eclipsesource.com/jshint-eclipse/updates/`

**更新**

我想发布一些快照来展示在 Javascript 文件上安装这个插件的效果。

### 前

请注意，问题视图是空的。

![代码没有问题](../Images/f7d06027007940d00a231e18278a23bf.png)

### 后

JSHint 插件需要在安装后进行一些配置。这也列在 jshint-eclipse[网站上](http://github.eclipsesource.com/jshint-eclipse/install.html)：

> 在包含 JavaScript 文件的项目上，打开上下文菜单并选择 Properties 在 JSHint 页面上，为此项目启用 JSHint

我完成了上述操作并为 *.js 文件启用了 JSHint，如下所示：

![在此处输入图像描述](../Images/5712f52152ba31719555b13d4863356e.png)

使用与之前相同的 JS 文件执行此操作后，Problem 视图开始显示错误：

![在此处输入图像描述](../Images/80da934a07db4289e2e613a25d123b18.png)

# c# - 从函数返回多个值并在调用者中填充变量 (2)

> ID：11798940
> 
> 赞同：0
> 
> 时间：2012-08-03T15:40:07.743
> 
> 标签：c#, parameters, tuples, out

我在 A 类中有一个函数：

```
public int RecordSummary()
        {
            int result = 0;
            int recordsAffected = 0;

            SqlCommand cmd = new SqlCommand("spIATRecordSummary", conn);
            cmd.CommandType = CommandType.StoredProcedure;

            var returnParameter = cmd.Parameters.Add("@RETURN_VALUE", SqlDbType.Int);
            returnParameter.Direction = ParameterDirection.ReturnValue;

            try
            {
                conn.Open();
                recordsAffected = cmd.ExecuteNonQuery();
                result = Convert.ToInt32(returnParameter.Value);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message.ToString());
            }
            finally
            {
                conn.Close();
            }
            -- I want to return these two: 
            return result;
            return recordsAffected;
        } 
```

我想从此函数中获取 2 个值并将其返回给两个不同的变量。

从另一个班级我将如何填充两个变量？

B类：

```
int RESULT = RecordSummary();
int RECORDS_AFFECTED = RecordSummary(); 
```

我一直在阅读元组并使用 out 参数，但我不确定调用者将如何实际检索数据。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:18:18.393

*以下是*如何使用`out`参数：

```
int GetRecordSummary(out int recordsAffected)
{
    // If necessary - basically this variable *must* be definitely
    // assigned by the time you return; your code currently just
    // catches exceptions thrown by the block that would assign
    // a value :(
    recordsAffected = -1;
    ...
    // Code as before
    ...
    return result;
} 
```

然后调用它：

```
int recordsAffected;
int result = GetRecordSummary(out recordsAffected); 
```

有关详细信息，请参阅[MSDN 文档。`out`](http://msdn.microsoft.com/en-us/library/t3c3bfhx.aspx)

备择方案：

*   创建自己的类型来封装这两个值，并返回该类型的值
*   `Tuple<int, int>`如果您使用的是 .NET 4 或更高版本，请返回 a ：

    ```
    ... in the method ...
    return Tuple.Of(result, recordsAffected);

    ... in the caller ...
    var results = GetRecordSummary();
    int result = results.Item1;
    int recordsAffected = results.Item2; 
    ```

# ms-access - 自定义访问时间格式中的文本框

> ID：11798941
> 
> 赞同：3
> 
> 时间：2012-08-03T15:40:12.460
> 
> 标签：ms-access, vba

有没有办法（如果需要，以编程方式）在 Access 中预自定义文本框，以便用户可以输入“时间”，格式为 18:00:00，但冒号已经可用并且不能被“覆盖”用户？
我的意思是用户不需要输入冒号。它们将标准在文本框中可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:43:28.647

您可以将格式设置为时间并使用输入掩码。

```
 Me.MyTime.Format = "Long Time"
 Me.MyTime.InputMask = "00:00:00;0;_" 
```

# android - 在活动之间切换（通知面板 - 样式）

> ID：11798942
> 
> 赞同：1
> 
> 时间：2012-08-03T15:40:12.767
> 
> 标签：android, user-interface

我的 android 应用程序中有 2 个活动 - mainActivity 和 mapActivity。我想使用自定义动画在它们之间切换。问题是 - 我希望我的 mapActivity 以相同的方式（具有相同的行为）出现在主要活动上，通知面板出现在所有 Android 上 - 使用垂直滑动，但从下到上。有没有办法做到这一点？

非常感谢你

塔尼亚

UPD：只是为了说清楚-我不仅需要滑动，还需要常规通知面板具有的这种“拖动释放”行为

（所以我的问题不是重复的）

UPD2：我知道 overridePendingTransition - 但是如何解决“拖动释放”行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:31:00.290

如果您希望能够上下拖动它，我认为您唯一的选择（或至少最简单的选择）是将两个活动合并为一个。并将地图部分创建为[SlidingDrawer](http://developer.android.com/reference/android/widget/SlidingDrawer.html)或使用某种自定义视图/片段使其可拖动。

我认为在 Android 的 Activity 概念之上进行这项工作将非常困难

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:45:53.323

就我个人而言，我之前没有任何类似的经验，但是这个线程似乎有一个问题的答案：[Android 中的活动转换](https://stackoverflow.com/questions/3389501/activity-transition-in-android)

# html - twitter bootstratp 的来源， :: 在 -webkit-input-placeholder 前面 - 这是一个错字吗？

> ID：11798944
> 
> 赞同：4
> 
> 时间：2012-08-03T15:40:14.003
> 
> 标签：html, css, twitter-bootstrap, placeholder

Twitter bootstrap.css 有这样一段代码：

```
:-moz-placeholder {
  color: #999999;
}

:-ms-input-placeholder {
  color: #999999;
}

::-webkit-input-placeholder {
  color: #999999;
} 
```

问题是关于`::`前面的`-webkit-input-placeholder`。为什么是两个`::`，那是为了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:46:24.107

`::`表示伪元素（例如`::before`和`::after`）。`:`表示一个伪类（例如`:link`和`:hover`）。这只是区分伪元素和伪类的命名约定。IE8 及以下不支持该`::`约定。

这是直接来自 W3C 规范的对这两个的解释：http: [//www.w3.org/TR/CSS21/selector.html#pseudo-elements](http://www.w3.org/TR/CSS21/selector.html#pseudo-elements)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:09:46.513

`:`是一个伪类。这是对现有元素的修改。 `:hover`，例如，表示相同的元素，但鼠标指针悬停在它上面。 `:focus`当光标位于表单元素中时。

`::`用于伪元素，它们不是您正在设计的元素的直接部分。相反，它们是 DOM 上不存在但无论如何都可以设置样式的元素。 `::after`就是一个很好的例子，因为你可以创建一个实际上并不存在的元素样式。

然而，通常情况下，浏览器供应商似乎存在一些误解的灰色地带。IE 和 Firefox 似乎认为占位符是一个伪类，webkit 将其视为伪元素。

不过，这也改变了它的样式，不仅仅是语法。在 Chrome 和 Firefox 中查看：http: [//jsfiddle.net/UxAY6/](http://jsfiddle.net/UxAY6/)

在 webkit 中查看该小提琴时，红色边框*位于*文本字段内。它在文本字段*内*设置占位符伪元素的样式。但在 Firefox 中，它是输入元素的伪类，因此边框在显示占位符时适用于文本字段。

# mysql - mysql日期和时间列

> ID：11798948
> 
> 赞同：1
> 
> 时间：2012-08-03T15:40:28.040
> 
> 标签：mysql, sql

我正在使用 mysql 在一个表中有两列，一列是`date_added`，另一列是`date_updated`，是否可以在不更改列的情况下记录输入数据`date_added`的日期和更新的日期。`date_updated``date_added`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:48:11.080

在 5.6 之前，MySQL 仅支持具有一个`TIMESTAMP`自动初始化的字段。这可以是“创建”或“更新”列，但不能同时是两者。

对于自动初始化的“创建”列，请使用：

```
CREATE TABLE ...
date_added TIMESTAMP DEFAULT CURRENT_TIMESTAMP 
```

对于自动初始化“更新”列，使用

```
CREATE TABLE ...
date_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
```

不幸的是，你不能两者兼得。如果你想让两者都自动初始化，你需要使用触发器：

```
CREATE TABLE ...
date_added TIMESTAMP, -- doesn't auto-initialize
date_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

然后设置一个`TRIGGER`更新`date_added`字段：

```
DROP TRIGGER IF EXISTS tablename_before_insert;

DELIMITER //

CREATE
DEFINER = CURRENT_USER
TRIGGER tablename_before_insert
    BEFORE INSERT ON 
        tablename -- insert your table name here
    FOR EACH ROW
BEGIN
    IF IFNULL(NEW.date_added, 0) <= 0
    THEN
        SET NEW.date_added = NOW();
    END IF;
END;
// 
```

这

```
 IF IFNULL(NEW.date_added, 0) <= 0 
```

如果需要，子句允许您覆盖该`date_added`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:43:01.237

当然。只需在查询中使用正确的列名。在执行 INSERT 时填充该`date_added`字段。进行更新时，只需更新该`date_updated`字段。除非您在查询中或使用触发器明确地这样做，否则另一个不会受到影响。但这显然在你的控制之中。

# java - 运行时局部变量的通用类型

> ID：11798951
> 
> 赞同：2
> 
> 时间：2012-08-03T15:40:50.030
> 
> 标签：java, generics, reflection, type-erasure

Java中有没有办法反映局部变量的泛型类型？我知道你会用一个字段来解决这个问题 -[获取 java.util.List 的泛型类型](https://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list)。任何想法如何解决，例如：

```
public void foo(List<String> s){
  //reflect s somehow to get String
} 
```

或者更笼统：

```
public void foo<T>(List<T> s){
  //reflect s somehow to get T
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:42:35.777

**没有**。由于 Java 的[Type Erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，所有泛型在编译过程中都会被剥离。

但是，您可以在列表中的元素上使用`instanceOf`或`getClass`来查看它们是否与特定类型匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:52:02.903

[Here](http://tutorials.jenkov.com/java-reflection/generics.html) is nice tutorial that shows how and when you can read generic types using reflection. For example to get String from your firs `foo` method

```
public void foo(List<String> s) {
    // ..
} 
```

you can use this code

```
class MyClass {

    public static void foo(List<String> s) {
        // ..
    }

    public static void main(String[] args) throws Exception {
        Method method = MyClass.class.getMethod("foo", List.class);

        Type[] genericParameterTypes = method.getGenericParameterTypes();

        for (Type genericParameterType : genericParameterTypes) {
            if (genericParameterType instanceof ParameterizedType) {
                ParameterizedType aType = (ParameterizedType) genericParameterType;
                Type[] parameterArgTypes = aType.getActualTypeArguments();
                for (Type parameterArgType : parameterArgTypes) {
                    Class parameterArgClass = (Class) parameterArgType;
                    System.out.println("parameterArgClass = "
                            + parameterArgClass);
                }
            }
        }
    }
} 
```

Output: **parameterArgClass = class java.lang.String**

It was possible because your explicitly declared in source code that List can contains only Strings. However in case

```
public <T> void foo2(List<T> s){
      //reflect s somehow to get T
} 
```

T can be anything so because of type erasure it is impossible to retrieve info about precise T class.

# jquery - NanoScroller 不会自行触发

> ID：11798952
> 
> 赞同：9
> 
> 时间：2012-08-03T15:40:50.243
> 
> 标签：jquery, jquery-plugins

下面的代码应该能够根据[nanoscroller 文档](http://jamesflorentino.github.com/nanoScrollerJS/)`pane`触发和`slider`适当的 css 属性。但是，滚动条不会显示，直到我在浏览器中执行一些操作，例如按 F12 启动萤火虫或右键单击内部元素以检查它。可能出了什么问题？`display``slider`

```
 $(".nano").nanoScroller({
        alwaysVisible: true,
        scroll: "bottom"    
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-16T16:05:23.373

至少在 v0.7.4 版本中，如果您`nanoScroller()`使用参数调用插件的初始化可能会失败，尤其是动态内容。

如果您正在使用，请确保在动画完成时完成`$('#yourDiv').animate()`调用。`nanoScroller()`如果您正在使用`$.getJSON()`，请在正确获取内容后执行此操作。如果您同时使用两者`animate()`并在两个事件之后`getJSON()`调用`nanoScroller()`，因为不知道哪个进程将首先完成，并且多次调用`nanoScroller()`不会破坏任何东西。

这里的解决方法是：首先`nanoScroller()`不带参数调用，如果需要参数，则在再次调用之后立即调用。

```
$('.nano').nanoScroller();
$('.nano').nanoScroller({ alwaysVisible: true, scroll: 'top' }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-01T12:24:25.587

在某些情况下，比如我的，nanoScroller 需要首先知道图片的宽度/高度才能正常工作。

我如何修复它：

而不是调用函数，有/没有 .ready 处理程序，

```
$(".nano").nanoScroller({
    alwaysVisible: true,
    scroll: "bottom"     
}); 
```

尝试 .load 处理程序。现在 JQuery 仅在图片的宽度/高度已知时才加载 nanoScroller。

```
$(window).load(function () {
    $(".nano").nanoScroller({
        alwaysVisible: true,
        scroll: "bottom"     
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T04:54:25.330

**当nanoscroller 无法**为元素正确初始化时，会出现此问题。

确保具有 nano 类的元素不在使用`display:none`CSS 属性隐藏的父元素中。

在另一种情况下**，如果内容没有显示**，您需要确保**已**为具有类 nano 的元素设置了适当的高度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-08T21:06:06.227

如果要动态加载内容，则只需在加载内容后初始化 nanoScroller。

尝试将 nanoScroller 初始化包含在这样的 setTimeout 中。

```
setTimeout( function(){
    $('.nano').nanoScroller({ flashDelay: 1000 });
}, 0); 
```

我有同样的问题，这为我解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T18:58:59.973

我的问题和你的一样。可能出现问题是因为我将 nanoScroller 函数应用于动态生成的内容。我的解决方案是添加以下行：

> $(".pane").css("display","block"); $(".slider").css("display","block");

然后问题就消失了！如果您通过 Chrome 中的“检查元素”功能检查页面，您可以看到滚动条（滑块）存在的 .pane 类表明

> 样式=“显示：无”

我希望这对你有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T09:13:49.533

确保在所有内容加载完毕后触发 Nanoscroller；例如，尝试将上面的代码放在页面底部，或者插入一些 JQuery 代码来检查页面是否已经完成加载内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-16T13:19:58.480

请更正代码（jquery.nanoscroller.js）

```
if ((content.scrollHeight === content.clientHeight) || (this.pane.outerHeight(true) >= content.scrollHeight && contentStyleOverflowY !== SCROLL)) {
    this.pane.hide();
    /*this.isActive = false;*/
} else if (this.el.clientHeight === content.scrollHeight && contentStyleOverflowY === SCROLL) {
    this.slider.hide();
} else {
    this.slider.show();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-05T10:35:55.043

无论您的内容是否调整大小，此解决方案在所有情况下都非常有用。尝试这个：

```
$('your div id here').mouseover(function(){
     $('.nano').nanoScroller();
}); 
```

# postgresql - 设置 SET CONSTRAINTS ALL IMMEDIATE 后是否可以恢复延迟约束？

> ID：11798953
> 
> 赞同：1
> 
> 时间：2012-08-03T15:40:54.170
> 
> 标签：postgresql

我正在使用 pgtap 通过以下方式测试一些延迟约束触发器：

*   开启交易
*   插入一些测试数据
*   执行一些语句
*   通过使用模拟提交`SET CONSTRAINTS ALL IMMEDIATE`
*   测试提交后条件

这很好用，但它限制了我对每个事务的单个测试。如果我稍后尝试设置更多数据，我之前的延迟约束现在会立即触发。

是否可以恢复 的影响`SET CONSTRAINTS ALL IMMEDIATE`，而不恢复它导致激活的约束的影响？如果没有，我唯一的选择是将每个测试移动到一个单独的文件中，这有点麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:00:54.423

你有没有尝试过

```
SET CONSTRAINTS ALL DEFERRED 
```

*你打电话*后*`SET CONSTRAINTS ALL IMMEDIATE`？*

 *如果这会延迟比您想要的更多的约束，您必须单独命名它们：

```
SET CONSTRAINTS my_constraint [, ...] DEFERRED; 
```

它不会恢复任何效果。它只会推迟进一步的检查。如果违反了约束，`EXCEPTION`则引发 an。这里没有什么*可以*恢复的。

如果这是您想要的，您可以在 plpgsql 函数中捕获异常。

如果您想将约束恢复到初始状态，则必须`SET`单独使用显式状态对它们进行处理。遗憾的是——据我所知——PostgreSQL 9.1 中没有“重置约束”可以将它们全部恢复到初始状态。

[手册页。](http://www.postgresql.org/docs/current/interactive/sql-set-constraints.html)*

# javascript - 检查文本框验证

> ID：11798954
> 
> 赞同：-2
> 
> 时间：2012-08-03T15:40:56.623
> 
> 标签：javascript, asp.net, validation

我必须检查文本框控件以进行验证

条件：

1.  包含值 0 到 1000，最多 2 位小数（1.00,85.23,1000.00）

2.  小数点后 2 位用户将无法再输入零。

    ```
    <script type="text/javascript">

    var regex = /\d{0,4}([\.])\d{0,2}/;
    function keyUP()
    {   
          var t = document.getElementById('<%=TextBoxPayRate.ClientID%>').value;
          if (!regex.test(t)) 
          {
             alert("not matching");
          }
    }
    </script>

    <asp:TextBox ID="TextBoxPayRate" runat="server"  onkeyup="keyUP();"></asp:TextBox> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:49:09.427

嗨，您应该能够使用/修改这篇文章中的更新代码来满足您的要求。

[在 ASP.Net RangeValidator 脚本执行之前删除“$”](https://stackoverflow.com/questions/354313/remove-before-asp-net-rangevalidator-script-executes)

# jquery - 如何使用 html 源代码为 jstree 设置自定义图标

> ID：11798964
> 
> 赞同：8
> 
> 时间：2012-08-03T15:41:31.037
> 
> 标签：jquery, jstree

我需要有一个可从数据库配置的 jstree，但我遇到了图标问题（这只是我查询中包含图标名称的另一列）。问题是我无法正确显示它。

![在此处输入图像描述](../Images/a1ac9e5ae51ecd4fa823be8727d12fa4.png)

`background-image:url('path');`我通过添加属性以将图像指向标签中来构建此列表，`<a>`但我一直显示该文件夹图标（图像没有重复，但我将其包含在内以便更容易地可视化问题）。

如何让 jstree 不显示该文件夹？似乎 jstree 只是为整个树（或至少每个级别）构建一个图像。我不知道如何修改它。

这是上图的 html。

```
<ul style=""><li id="1227_1226" class="leaf jstree-leaf">
<ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/Estrategia desarrollo.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Instructivo desarrollo
            </a>
        </li>

        <li id="1227_1228" class="leaf jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0001 FormatoMantenimientoPlanificado-V1.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Mantenimiento planificado
            </a>
        </li>

        <li id="1227_1229" class="leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0002 FormatoAnalisisRequisitos.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Análisis de requisitos
            </a>
        </li>

        <li id="1227_1230" class="leaf jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0003 FormatoInstructivoInstalacion.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Instructivo de instalación
            </a>
        </li>

        <li id="1227_1231" class="leaf jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0004 FormatoControlCalidadConstruccion.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Control de calidad
            </a>
        </li>

        <li id="1227_1232" class="leaf jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0005 FormatoPruebasUsuario.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Pruebas de usuario
            </a>
        </li>

        <li id="1227_1233" class="leaf jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0007 FormatoActas-V1.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Actas
            </a>
        </li>

        <li id="1227_1263" class="leaf jstree-last jstree-leaf"><ins class="jstree-icon">&nbsp;</ins>
            <a href="/arco/formatos/FO-0006 FormatoSolicitudSoporte V1.doc" style="background-image:url('/arco/Menu/images/web.png;');" class="nothing"><ins class="jstree-icon">&nbsp;</ins>
                Solicitud de soporte
            </a>
        </li></ul> 
```

这就是我构建树的方式；ajax 调用接收一个 html 列表：

```
$(function () {
    $("#arbolMenu").jstree({ 
        "plugins" : [ "themes", "html_data", "cookies"], 
        "html_data" : {
            "ajax" : {
                "url" : "/arco/CtrlMenu",
                "data" : function (n) {
                    return { id : n.attr ? n.attr("id") : -1 };
                }
            }
        }
    });
}).delegate(".jstree-open>a", "click.jstree", function(event){
    $.jstree._reference(this).close_node(this, false, false);
}).delegate(".jstree-closed>a", "click.jstree", function(event){
    $.jstree._reference(this).open_node(this, false, false);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T18:23:01.863

与其明确指定图标，不如 使用 jstree 附带的[Types Plugin 。](http://www.jstree.com/documentation/types)然后对于`<li>`您的 html 中的每个，将其`rel`属性分配给您定义的类型。这是一个简单的例子：

```
$(function () {
    $("#demo1").jstree({ 
        "types" : {
            "valid_children" : [ "web" ],
            "types" : {
                "web" : {
                    "icon" : { 
                        "image" : "/arco/Menu/images/web.png" 
                    },
                },
                "default" : {
                    "valid_children" : [ "default" ]
                }
            }
        },
        "plugins" : ["themes","html_data","dnd","ui","types"]
    });
}); 
```

这是您的树节点 html 的示例片段：

```
<li id="1227_1228" rel="web">
    <a href="some_value_here">Mantenimiento planificado</a>
    <!-- UL node only needed for children - omit if there are no children -->
    <ul>
        <!-- Children LI nodes here -->
    </ul>
</li> 
```

由于您`rel="web"`为您指定`<li>`，`<li>`将接收为 type 定义的属性`web`，其中包括上面定义的自定义图标。

有关更多信息，您可以查看官方 jstree 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:48:43.887

将以下 CSS 添加到您的文档中：

```
.jstree-icon {
    display: none;
} 
```

# iphone - 更改视图控制器

> ID：11798965
> 
> 赞同：0
> 
> 时间：2012-08-03T15:41:38.343
> 
> 标签：iphone, objective-c, ios

我从其他人那里继承了一个项目。问题是代码具有`setViewController`AppDelegate 内部的方法来在视图之间进行更改。问题是这段代码似乎大量泄漏内存。我一直在尝试修复代码，但我似乎无法做到这一点。您认为最好的解决方案是什么？修复此代码或一起使用导航控制器？

```
// The Code to change the views
- (void)setViewController:(UIViewController*)viewController
{
    [UIView transitionWithView:_window duration:0.5 options:UIViewAnimationOptionTransitionNone animations:^(void) 
     {
         BOOL oldState = [UIView areAnimationsEnabled];
         [UIView setAnimationsEnabled:NO];
         _window.rootViewController = viewController;
         [UIView setAnimationsEnabled:oldState];
     } 
                    completion:nil];

}

// The calls to the setViewController
-(void) gotoHowToUseView{
    [self setViewController:[[[HowToVC alloc] initWithNibName:@"HowToVC" bundle:nil] autorelease]];
}
-(void) gotoHowToCredits{
    [self setViewController:[[[CreditsVC alloc] initWithNibName:@"CreditsVC" bundle:nil] autorelease]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:48:55.880

我认为最好使用 UINavigation Controller。

现在，您的代码的解决方案是从这两个函数中删除自动释放。将这两行添加到 setViewController 函数

```
 _window.rootViewController = nil;  // add this line
  _window.rootViewController = viewController; 
  [viewController release]; // add this line 
```

# r - image.plot 不创建新图像

> ID：11798967
> 
> 赞同：0
> 
> 时间：2012-08-03T15:41:47.417
> 
> 标签：r, plot

这是生成图像图的代码示例。但由于某种原因，当我重新运行它时，没有创建新图像，但它覆盖了现有图。但是我希望它能够创建一个新图像，当然因为它有一个特定的参数“add”来指定它必须被添加到现有的图中（但默认值为 FALSE）。

有人知道这里发生了什么吗？

```
require(fields)

mat <- matrix(runif(5*5), ncol=5) 

mat[1,3] <- NA

image.plot(seq(1,5,1),seq(1,5,1), mat, col = tim.colors(64), legend.only=TRUE)
par(oma=c(0,0,0,6))
par(new = TRUE)
image(seq(1,5,1),seq(1,5,1),matrix(1,5,5), col = gray(0.8), xlab = "", ylab = "", axes = F)
par(new = TRUE)
image(seq(1,5,1),seq(1,5,1),mat, xlab="Hour of the Day", ylab = "Day of the Week", col = tim.colors(64), axes = F)
par(oma=c(0,0,0,0)) 
```

**编辑** 我对设备等不太了解。但我确实知道（我在 RStudio 中工作），当我首先这样做时`plot(1:10)`，然后`plot(10:1)`清除图形窗口并显示第二个图而不添加到第一个图（在 RStudio 中，您当然还有其他功能，您还可以浏览以前的图形，但如果我在普通的 R 控制台中执行相同操作，则在调用第二个绘图时，绘图窗口会被清除）。这*就是*我想要的，我只是希望在我第二次调用 image.plot 时清除图形窗口，而不是覆盖上一次调用 image.plot 的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:39:06.913

您注意到“新”参数的含义出现了奇怪的反转`par`。以下是帮助页面说明：

`new`

```
logical, defaulting to FALSE. If set to TRUE, the next high-level plotting command 
(actually plot.new) should not clean the frame before drawing as if it were on a new 
device. It is an error (ignored with a warning) to try to use new = TRUE on a device 
that does not currently contain a high-level plot. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T12:08:55.747

我想如果你`legend.only=T`在`image.plot`命令中设置，它会自动设置`par(new=TRUE)`. 如果您先绘制图像，然后添加图例，则它可以工作。在这里你必须离开一个`par(new=TRUE)`：

```
require(fields)

mat <- matrix(runif(5*5), ncol=5) 

mat[1,3] <- NA

par(oma=c(0,0,0,6))
#par(new = TRUE)
image(seq(1,5,1),seq(1,5,1),matrix(1,5,5), col = gray(0.8), xlab = "", ylab = "", axes = F)
par(new = TRUE)
image(seq(1,5,1),seq(1,5,1),mat, xlab="Hour of the Day", ylab = "Day of the Week", col = tim.colors(64), axes = F)
par(oma=c(0,0,0,0))
image.plot(seq(1,5,1),seq(1,5,1), mat, col = tim.colors(64), legend.only=TRUE) 
```

# javascript - JSON restful 服务安全

> ID：11798977
> 
> 赞同：2
> 
> 时间：2012-08-03T15:42:26.690
> 
> 标签：javascript, node.js, configuration, backend, frontend

我目前正在构建一个 Web 应用程序，它已经完全分离了一个“前端”服务器，Lighttpd 仅服务于 index.html 和 javascript 等。

Backbone.js 等使我的前端与我用 Node.js 编写的 Web 服务“后端”保持连接

后端是完全无状态的，通过 http basic 对每个请求进行身份验证并运行 SSL (https)。

我如何确保只有我的“后端”服务器上发生的连接来自 Lighttpd“前端”服务器而不是一些随机的黑客？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:44:18.317

如果您知道前端服务器将位于特定 IP 地址或范围或 IP 地址上，您可能希望将后端服务器上的流量限制为仅来自该地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:48:06.930

您可以在 2 个服务器之间使用 ssl 并使用证书来确保识别。如果你保护好你的证书，那真的很安全。

# .net - 使用 LockBits（DirectShow 网络摄像头）损坏内存

> ID：11798980
> 
> 赞同：0
> 
> 时间：2012-08-03T15:42:37.447
> 
> 标签：.net, vb.net, directshow, lockbits

我正在.NET (VB 2010) 中进行一些图像处理。我正在使用以下代码（它还没有做任何事情）：

```
Sub Manipulate(IMG As Bitmap)
    ' Dim foo(100000) As Integer  - will need it later...

    Dim bd = IMG.LockBits(New Rectangle(0, 0, IMG.Width, IMG.Height),
                          Imaging.ImageLockMode.ReadWrite,
                          Imaging.PixelFormat.Format24bppRgb)
    Dim absstride = Math.Abs(bd.Stride)
    Dim numbytes = absstride * IMG.Height
    Dim bytes(numbytes - 1) As Byte
    Dim flipped = bd.Stride < 0
    Dim ptr = If(flipped, bd.Scan0 - numbytes + absstride, bd.Scan0)
    System.Runtime.InteropServices.Marshal.Copy(ptr, bytes, 0, numbytes)

    ' I'm going to put sg here

    System.Runtime.InteropServices.Marshal.Copy(bytes, 0, ptr, numbytes)
    IMG.UnlockBits(bd)
End Sub 
```

这非常适合简单的目的（例如，使图像变亮），但我的算法需要一些大变量（参见上面的“foo”）。声明它时（取消注释该行），我突然得到例外：
取决于'foo'的大小......

...第一个 Marshal.Copy() 抛出
AccessViolationException: Attempted to read or write protected memory。这通常表明其他内存已损坏。

...或“字节”的声明抛出
FatalExecutionEngineError：运行时遇到致命错误。错误地址位于线程 0x3690 上的 0x6819d142。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

...或者根本没有例外，一切正常。

到底是怎么回事？

**附加信息：**我使用 DirectShow 从网络摄像头获取图像对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:35:13.737

As Hans pointed out, I have to make a deep copy of the bitmap and everything works. Otherwise I'm using an image that is already disposed. This is a silent error though, until I declare some big variables, which use up the disposed memory, that's when the GC throws some seemingly random errors.

# php - 使用ajax提交邮件表单的正确方法？- 没有 JQuery

> ID：11798990
> 
> 赞同：1
> 
> 时间：2012-08-03T15:43:07.700
> 
> 标签：php, javascript, ajax, forms, submit

我正在尝试使用 ajax 处理 php 邮件表单。这是一个简单的表单，可以使用用户电话号码等向我的电子邮件发送消息。

我根本没有使用 php 的经验，但我让它使用常规提交向我发送邮件，然后返回到索引页面。

由于这不会向用户提供任何反馈，因此这对我不起作用。我找到了一些使用 JQuery 的示例。我还看到人们同时使用 GET 和 POST。我现在很困惑我应该如何进行。

我想实现的 JQuery 版本看起来与此类似。

```
var dataString = 'name='+ name + '&email=' + email + '&message=' + message;

$.ajax({
  type: "POST",
  url: "mail.php",
  data: dataString,
  success: function() {
    $('#myForm').html("<div id='response'></div>");
    $('#response').html("<h2>Contact Form Submitted!</h2>");
  }
});

<?php
$mail = $_POST['email '];
$name = $_POST['name'];
$subject = 'new submit';
$text = $_POST['message'];
$to = “yourmail@domain.com”;
$message =” You received  a mail from “.$mail;
$message .=” Text of the message : “.$text;
mail($to, $subject,$message)
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:15:58.010

正如其他人所说，jQuery 比使用 AJAX 的自然方式更好。但对于答案，首先您应该在 JavaScript 中创建一个 XmlHttp 对象。然后，您可以使用正确的 GET 或 POST 方法将您的值发送到您的页面。之后，您可以通过获取在 stateChanged 函数中实现的已发布请求的状态来跟踪该过程。就这样！

```
var xmlhttp

function retrive(url, str){
    xmlhttp = GetXMLHTTPObject();
    if(xmlhttp==null){
        alert("Your browser doesn't support the ajax.");
        return;
    }
    var script=url;
    script=script+"?value="+str;
    xmlhttp.onreadystatechange = stateChanged;
    xmlhttp.open("GET",script,true);
    xmlhttp.send(null); 
}

function stateChanged(){
    if(xmlhttp.readyState == 0){
        document.getElementById("result").innerHTML = "not initialized";
    }
    if(xmlhttp.readyState == 1){
        document.getElementById("result").innerHTML = "has been set up";
    }
    if(xmlhttp.readyState == 2){
        document.getElementById("result").innerHTML = "has been sent";
    }
    if(xmlhttp.readyState == 3){
        document.getElementById("result").innerHTML = "in process";
    }
    if(xmlhttp.readyState == 4){
        document.getElementById("result").innerHTML = xmlhttp.responseText;
    }
}

function GetXMLHTTPObject(){
    if(window.XMLHttpRequest){
        //code for IE7+, Firefox, Chrome, Opera, Safari
        return new XMLHttpRequest();
    }
    if(window.ActiveXObject){
        //code for IE6, IE5
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
    return null;
} 
```

我觉得最好看一下XmlHttpObject的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:02:10.230

像这样解决它：

```
<form id="form" method="post" name="mailform" action="mail.php" onsubmit="mail(); return false;">
    <p>
        <label for='name'>Stuff</label><br>
        <input type="text" name="stuff">
    </p>
    <input type="submit" name="submit" value="Send">
</form>
<p id="result" style="display: none">
<img src="images/succes.png"><br>
Thank you
</p>

/*----------------------------*/

function mail() {
var form = document.getElementById("form");
var name = form.name.value; 
var email = form.email.value; 
var phone = form.phone.value; 
var message = form.message.value; 
var valid = true;

if (!name) {form.name.style.backgroundColor = '#FF9481'; valid = false; }
else {form.name.style.backgroundColor = '';}
if (!email && !phone) {form.email.style.backgroundColor = '#FF9481'; form.phone.style.backgroundColor = '#FF9481'; valid = false;}
else {form.email.style.backgroundColor = ''; form.phone.style.backgroundColor = '';}
if (!message) {form.message.style.backgroundColor = '#FF9481'; valid = false;}
else {form.message.style.backgroundColor = '';}
if (email) {
    var patt=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/gi;
    var result=patt.test(email);
    if (!result) {form.email.style.backgroundColor = '#FF9481'; valid = false;}
    else form.email.style.backgroundColor = '';
    }
if (phone) {
    var patt=/[^0-9|\-| ]/g;
    var result=patt.test(phone);
    if (result) {form.phone.style.backgroundColor = '#FF9481'; valid = false;}
    else form.phone.style.backgroundColor = '';
    }
if (!valid) return false;

var datastr = 'name='+ name + '&email=' + email + '&phone=' + phone + '&message=' + message;
var xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
  {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            if (xmlhttp.responseText == "ok") {
            form.style.display = 'none';
            document.getElementById("result").style.display = '';
            }
            else {
            form.message.value= "That doesn't seem right";
            }       
        }
  }
xmlhttp.open("GET","mail.php?" + datastr,true);
xmlhttp.send();
}

/*----------------------------*/

<?php
$name = $_GET['name'];
$etc...

if(IsInjected($name)||IsInjected($visitor_email)||IsInjected($phone)||IsInjected($message)) 
{
    echo "Something fishy going on?";
    exit;
}

[...]
mail($to,$email_subject,$email_body,$headers);
echo "ok";

function IsInjected($str)
{
  $injections = array('(\n+)',
              '(\r+)',
              '(\t+)',
              '(%0A+)',
              '(%0D+)',
              '(%08+)',
              '(%09+)'
              );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
    {
    return true;
  }
  else
    {
    return false;
  }
}
?> 
```

# ruby - Ruby：迭代认为文件夹中的所有.rb（包括子文件夹）文件

> ID：11798994
> 
> 赞同：9
> 
> 时间：2012-08-03T15:43:24.147
> 
> 标签：ruby

文件结构：

```
folderA/
 - folder1/
   - file1.rb
   - file2.rb
 - folder2/
   - folder1/
     - file1.rb
   - folder2/
     - file1.rb
 - file1.rb
 - file2.rb 
```

使用下面的代码，我只能迭代`folderA/file1.rb`和`folderA/file2.rb`

```
# EDITTED
Dir.glob('folderA/*.rb') do |file|
  puts file
end 
```

是否可以仅使用（不使用 Dir.foreach(dir)..if..）遍历所有`.rb`文件（包括子文件夹）？`glob`

**PS**红宝石 v.1.8.6

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T15:51:39.337

```
Dir.glob('folderA/**/*.rb') do |file|
  puts file
end 
```

来自官方[文档](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)：

> **
> 递归匹配目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:45:08.397

试试这个：

```
Dir.glob('spec/**/*.rb') do |rspec_file|
  puts rspec_file
end 
```

[在此处](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)阅读有关 glob的信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T15:58:18.133

这应该有效：

来源：[http ://ruby-doc.org/stdlib-1.9.3/libdoc/find/rdoc/Find.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/find/rdoc/Find.html)

```
require 'find'

Find.find('spec/') do |rspec_file|
    next if FileTest.directory?(rspec_file)
    if /.*\.rb/.match(File.basename(rspec_file))
        puts rspec_file
    end
end 
```

在 ruby​​ 1.8.7 中测试

# php - 将php post数据传递给javascript的方法

> ID：11798995
> 
> 赞同：5
> 
> 时间：2012-08-03T15:43:26.587
> 
> 标签：php, javascript, html

所以我想知道，如果我有一个简单的 php 表单将信息发布到某个变量，我如何将该发布的变量传递给 javascript 并能够操作数据？我想出的唯一方法是使用内联 javascript 和 php，但我觉得必须有一种更干净、更优雅的方法来做到这一点，其中变量不会在源代码中如此明显地显示，而是在外部处理..这是我现在正在玩的东西：

```
<form action="index2.php" method="post">
    <input name="sugar" class="form" type="text" value="" />
    <input name="fat" class="form" type="text" value="" />
    <input name="protein" class="form" type="text" value="" />
    <input type="submit" value="submit" />
</form> 
```

其次是：

```
<?php 
$sugar = $_POST['sugar'];
$fat = $_POST['fat'];
$protein = $_POST['protein'];
?>

<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var sugar = "<?php echo $sugar ?>";
        var fat = "<?php echo $fat ?>";
        var protein = "<?php echo $protein ?>";
    </script>
    <script src="test.js" type="text/javascript"></script>
</head> 
```

有人对我可以遵循的替代方案有什么建议吗？我已经很久没有使用javascript了，所以在处理这样的情况时知道我的选择会很高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T15:50:22.390

最简单的方法是发送一个包含您发送的所有数据的 Javascript 对象。这可以通过 JSON 编码轻松完成`$_POST`：

```
var data = <?php echo json_encode($_POST) ?>; 
```

然后，您可以访问，例如，`data.fat`如果您`fat`在 POST 请求中发送了一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:46:04.613

在不使用 _GET 并将变量存储在 URL 中的情况下，您目前拥有满足您需求的最佳解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T16:21:26.383

如果您想将这些变量添加到您的 JavaScript 中，则必须在某处打印这些变量并使其可见。

我一直在使用 JSON 编码并打印它们，以便将它们保存在本地 JavaScript 变量中：

```
<?php
    function passToJavascript($variableName, $variable){
        if($variable = json_encode($variable))
            echo '<script>var '. $variableName .' = '. $variable .';</script>';
    }

    $foo = array(
        'bar1' => 1,
        'bar2' => 2,
        'bar3' => 3
    );

    passToJavascript('foo', $foo);
?> 
```

将在您的 HTML 中打印：

```
<script>var foo = {"bar1":1,"bar2":2,"bar3":3};</script> 
```

这样你就可以传递你想要的任何变量，可能是一个字符串、一个数字、一个数组，甚至是一个“关联数组”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:50:16.447

我觉得将 php 变量传递给 javascript 变量的最佳方法是先对它们进行 json_encode。如果你将一个 php 数组传递给 javascript，你不能简单地说

```
var1 = <?php echo $var1; ?> 
```

你应该像下面那样做。

```
<?php
    $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
?>

<script type="text/javascript">
    var arr = "<?php echo json_encode($arr) ?>";
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T15:50:52.263

您可以在输入中编写您的变量，然后使用 javascript 访问这些输入

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            //You already linked jquery so I use it, you could do without if necessary.
            $(document).ready(function(){
                var sugar = $('#sugar').val();
                var fat = $('#fat').val();
                var protein = $('#protein').val()
            });
        </script>
            var sugar = "<?php echo $sugar ?>";
            var fat = "<?php echo $fat ?>";
            var protein = "<?php echo $protein ?>";
        </script>
        <script src="test.js" type="text/javascript"></script>
    </head>
    <body>
        <input type="hidden" id="sugar" value="<?php echo $sugar ?>" />
        <input type="hidden" id="fat" value="<?php echo $fat?>" />
        <input type="hidden" id="protein" value="<?php echo $protein?>" />
    </body>
</html> 
```

这样，您的 javascript 就可以全部驻留在静态文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T15:49:55.530

您可以尝试使用 GET 而不是 POST 发送变量，然后您可以直接从 javascript 访问它们，如下所示：http: [//javascript.about.com/library/blqs1.htm](http://javascript.about.com/library/blqs1.htm)

据我所知，没有办法从 javascript 访问 POST 变量。你将不得不使用你正在做的事情