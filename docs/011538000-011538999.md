# StackOverflow 问答 11538000-11538999

# sql - 如何将文本写入/附加到 n SQL 脚本的底部？

> ID：11538001
> 
> 赞同：1
> 
> 时间：2012-07-18T09:13:34.967
> 
> 标签：sql, sql-server

我需要将 text( `SQL`) 添加/附加到现有`script`.

我有一个为我`STORED PROCEDURE`生成`INSERT statements`的。它们已退出分配，因此目前我将它们复制并粘贴到所需的`scripts`.

这基本上是 SQL 的样子：

```
SELECT '' + CHAR(13) + CHAR(10) + 'EXECUTE [procSystemAppEntity_InsertOrUpdate] ' + CHAR(13) + CHAR(10) + ' @SystemUID = @SystemUID' + CHAR(13) + CHAR(10) 
+ ',@SystemAppCode = @SystemAppCode' + CHAR(13) + CHAR(10) 
+ ',@SystemAppEntityTypeCode = N''' + saet.[SystemAppEntityTypeCode] + '''' + CHAR(13) + CHAR(10) 
+ ',@SystemAppEntityUID = '''+ CAST((SELECT NEWID()) AS nvarchar(max)) + '''' + CHAR(13) + CHAR(10) 
+ ',@SystemAppEntityCode = ''' + tab.name + '''' + CHAR(13) + CHAR(10) 
+ ',@SystemAppEntityName = N''' + tab.name + '''' + CHAR(13) + CHAR(10) 
+ ',@TableName = N''' + tab.name + '''' + CHAR(13) + CHAR(10) 
+ ',@TableKeyColumnName = N''' + tab.name + 'ID''' + CHAR(13) + CHAR(10) 
+ ',@TableKeyCodeColumnName = N''' + tab.name + 'Code''' + CHAR(13) + CHAR(10) 
+ ',@ManagedAssemblyName = N''' + CASE WHEN @SystemAppEntityManagedAssemblyName IS NULL THEN '' ELSE @SystemAppEntityManagedAssemblyName END + '''' + CHAR(13) + CHAR(10) 
+ ', @ManagedNamespace = N''' + CASE WHEN @SystemAppEntityManagedNamespace IS NULL THEN '' ELSE @SystemAppEntityManagedNamespace END + '''' + CHAR(13) + CHAR(10) 
+ ', @ManagedClassName = ''' + tab.name + '''' + CHAR(13) + CHAR(10) 
+ ', @IsMultiple = ' + CAST(@IsMultiple AS varchar(1)) + CHAR(13) + CHAR(10) 
+ ', @IsCodeGenerated = 1' + CHAR(13) + CHAR(10) 
+ ', @IsActive = 1' + CHAR(13) + CHAR(10) 
+ ', @SystemAppUserID = @CreationSystemAppUserID ' + CHAR(13) + CHAR(10) + '; '
FROM sys.tables tab INNER JOIN
    [SystemAppEntityType] saet ON saet.[IsMultipleEntity] = CASE WHEN RIGHT(tab.name, 1) = 's' THEN 1 ELSE 0 END AND saet.[IsNavigationEntity] = 0 AND saet.IsSystemEntity = CASE WHEN LEFT(tab.name, 3) = 'Sys' THEN 1 ELSE 0 END
WHERE (tab.name NOT IN (SELECT e.[TableName] FROM [SystemAppEntity] e))
    AND (tab.name = @Code) 
```

输出为：

```
EXECUTE [procSystemAppEntity_InsertOrUpdate] 
 @SystemUID = @SystemUID
,@SystemAppCode = @SystemAppCode
,@SystemAppEntityTypeCode = N'App-S'
,@SystemAppEntityUID = '11E347C7-7E69-4555-A6F0-2AFE142FC25F'
,@SystemAppEntityCode = 'Revision'
,@SystemAppEntityName = N'Revision'
,@TableName = N'Revision'
,@TableKeyColumnName = N'RevisionID'
,@TableKeyCodeColumnName = N'RevisionCode'
,@ManagedAssemblyName = N'SomeManagedAssemblyName '
, @ManagedNamespace = N'SomeManagedNamespace '
, @ManagedClassName = 'Revision'
, @IsMultiple = 0
, @IsCodeGenerated = 1 
, @IsIntegratedToStaging = 1
, @IsActive = 1
, @SystemAppUserID = @CreationSystemAppUserID 
; 
```

话虽这么说，有没有一种方法可以让我`Output statements`直接将其写入/附加到所需的脚本？

我只是希望它添加到脚本的底部。这可能吗？如果可以，我将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:20:18.843

```
SELECT '' + CHAR(13) + CHAR(10) + 'EXECUTE [procSystemAppEntity_InsertOrUpdate] ' + CHAR(13) + CHAR(10) + ' @SystemUID = @SystemUID' + CHAR(13) + CHAR(10)  
+ ',@SystemAppCode = @SystemAppCode' + CHAR(13) + CHAR(10)  
+ ',@SystemAppEntityTypeCode = N''' + saet.[SystemAppEntityTypeCode] + '''' + CHAR(13) + CHAR(10)  
+ ',@SystemAppEntityUID = '''+ CAST((SELECT NEWID()) AS nvarchar(max)) + '''' + CHAR(13) + CHAR(10)  
+ ',@SystemAppEntityCode = ''' + tab.name + '''' + CHAR(13) + CHAR(10)  
+ ',@SystemAppEntityName = N''' + tab.name + '''' + CHAR(13) + CHAR(10)  
+ ',@TableName = N''' + tab.name + '''' + CHAR(13) + CHAR(10)  
+ ',@TableKeyColumnName = N''' + tab.name + 'ID''' + CHAR(13) + CHAR(10)  
+ ',@TableKeyCodeColumnName = N''' + tab.name + 'Code''' + CHAR(13) + CHAR(10)  
+ ',@ManagedAssemblyName = N''' + CASE WHEN @SystemAppEntityManagedAssemblyName IS NULL THEN '' ELSE @SystemAppEntityManagedAssemblyName END + '''' + CHAR(13) + CHAR(10)  
+ ', @ManagedNamespace = N''' + CASE WHEN @SystemAppEntityManagedNamespace IS NULL THEN '' ELSE @SystemAppEntityManagedNamespace END + '''' + CHAR(13) + CHAR(10)  
+ ', @ManagedClassName = ''' + tab.name + '''' + CHAR(13) + CHAR(10)  
+ ', @IsMultiple = ' + CAST(@IsMultiple AS varchar(1)) + CHAR(13) + CHAR(10)  
+ ', @IsCodeGenerated = 1' + CHAR(13) + CHAR(10)  
+ ', @IsActive = 1' + CHAR(13) + CHAR(10)  
+ ', @SystemAppUserID = @CreationSystemAppUserID ' + CHAR(13) + CHAR(10) + '; 
Insert into table(...) ;' 
FROM sys.tables tab INNER JOIN 
    [SystemAppEntityType] saet ON saet.[IsMultipleEntity] = CASE WHEN RIGHT(tab.name, 1) = 's' THEN 1 ELSE 0 END AND saet.[IsNavigationEntity] = 0 AND saet.IsSystemEntity = CASE WHEN LEFT(tab.name, 3) = 'Sys' THEN 1 ELSE 0 END 
WHERE (tab.name NOT IN (SELECT e.[TableName] FROM [SystemAppEntity] e)) 
    AND (tab.name = @Code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:21:51.387

您使用的是什么版本的 SQL Server？

如果您使用的是 SQL Server 2008+，那么您可以通过 Generate Script 实用程序本身生成 INSERT 脚本。

在 SQL Server 2005 或更早版本中（我也在 SQL 2K 中尝试过），那么有一个非常好的 stroed proc 可以为给定的表生成 INSERT 脚本。查看[http://vyaskn.tripod.com/code/generate_inserts.txt](http://vyaskn.tripod.com/code/generate_inserts.txt)

# nlp - 我想使用 GATE 谓词-参数提取器组件 (PAX)

> ID：11538002
> 
> 赞同：1
> 
> 时间：2012-07-18T09:13:36.280
> 
> 标签：nlp, gate, pax

我想使用 GATE 谓词-参数提取器组件（PAX），但我不知道如何在 GATE 开发人员（版本 7）上加载插件

请帮我。我如何加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:27:53.090

MultiPaX 插件有点复杂。您需要从[主页](http://www.semanticsoftware.info/pax)下载软件包，解压（如果您在 Windows 上使用[7-zip](http://7-zip.com)之类的东西），然后使用[Ant](http://ant.apache.org)构建它，您需要单独安装它 - GATE 用于捆绑 Ant 的副本，但从版本 7 起不再是这种情况。一旦你编译并打包了插件，你应该能够像任何其他插件一样通过插件管理器加载它。

但是，要从 PR 中获得任何有用的信息，您需要构建一个相当复杂的管道，其中至少包括 SUPPLE、MiniPar 或 Stanford Parser PR 之一。让这些工作本身就是一项不平凡的任务......

谓词参数提取器不是由 GATE 核心团队开发的，因此最好将具体问题发布在 semanticsoftware.info 论坛（从[http://www.semanticsoftware.info/pax](http://www.semanticsoftware.info/pax)底部链接）而不是通常的 GATE 用户列表。

# java - 静态方法访问线程内的非静态变量

> ID：11538009
> 
> 赞同：0
> 
> 时间：2012-07-18T09:14:02.633
> 
> 标签：java, multithreading, static

我有：

```
public class UTIL{
  public static void met(){
    do_something(){
       print(A.m()); 
    }
  }
}
public class A{
  public  <type> m;
  public <type>static m(){
    return m;
  }
} 
```

现在：

`Thread A`包含类的实例`A`

`Thread B`包含类的实例`A`

在线程 B 中，有时会调用 UTIL.met。

**问题：** 当调用 UTIL.met 时，它会从Thread B`m`的实例中使用吗？`A`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:15:32.633

> *当`UTIL.met`被调用时，它会从Thread`m` **的实例中`A`**`B`使用吗？*

不，线程 A 有一个实例而线程 B 有另一个实例并不重要。`A.m`是静态的并且对于所有实例都是通用的。

但是如果变量是静态的，那么两个线程将使用相同的变量，这是肯定的。

（换句话说，如果没有适当的同步，您将遇到令人讨厌的竞争条件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:15:24.883

`m`是一个[类变量](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)，所以 is 实际上对所有实例都是通用的。

`UTIL.met()`将`m`在所有`A`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:21:02.113

m 被定义为 A 中的静态变量。因此它将在 A 的所有实例之间公用/共享。另一方面，如果 m 不是静态的，那么每个实例当然都有自己的副本。

好吧，既然线程 A 和线程 B 都包含自己的类 A 的实例，那么每个线程都将使用其 A 的实例。

这是您想要实现的目标还是您想在实例之间共享 m？

# sublimetext - 在 Sublime Text 2 中突出显示 Github README.md 格式

> ID：11538012
> 
> 赞同：11
> 
> 时间：2012-07-18T09:14:15.217
> 
> 标签：sublimetext, sublimetext2, codehighlighter

我有 README 文件，我希望 Sublime 仅突出显示由某些“标签”标识的一些代码，例如：

```
Here is an example of usage

# This should be highlighted
```ruby
  superhero = Superhero.new
  superhero.make_world_better
``` 
```

或与`[code lang=ruby]`或其他

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-07-14T22:45:18.380

# 懒惰的回答

^(（*对于独立的快速学习者*）)

1.  [为 sublime-text 安装包控制](https://packagecontrol.io/packages/Package%20Control)。
2.  重新启动 sublime-text 后，请参阅“快速回答”。

* * *

# 快速回答

^(（*对于中高级 sublime-text 用户*）)

1.  `Ctrl`++`Shift`和`P`，`Package Control: Install Package`然后安装**[`Knockdown`](https://github.com/aziz/knockdown)**.

    *就是这样*，现在您有一个`Set Syntax: Markdown (Github flavored)` 触手可及的选择。

* * *

# 详尽的回答

^(（*无力到强大*）)

## - 安装`Package Control`

1.  打开崇高文本。
    [[如果您在编辑 root 或 www-data （即 /var/www/ ）拥有的目录上的文件时需要此功能，您可能需要使用`gksu sublime`或类似的方式以管理员权限打开 sublime 并重复每个步骤]]

2.  `console`通过按`ctr`+ [[即 CONTROL 键加上 GRAVE ACCENT 键（通常在 TAB 键上方）]]激活 sublime```

![在此处输入图像描述](../Images/60e29320aa584ec8e5961d403dc47373.png)

3.  将以下选项之一复制粘贴到 sublime 控制台的`prompt`. [（然后按`enter`）]：

    如果崇高文本2：

    ```
    import urllib2,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation') 
    ```

    如果崇高文本3：

    ```
    import urllib.request,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) 
    ```

![在此处输入图像描述](../Images/912230664811e12819551d5517f598a1.png)

4.  当控制台打印出一条消息“*请重新启动 Sublime Text 以完成安装”* [（通常几乎是瞬时的）]时，关闭 sublime 。再次打开 sublime-text。

5.  重新启动 sublime-text 后，剩下的就很容易了，**请参阅“快速回答”** [（上图）]，或继续阅读。

### 关于使用包控制

您刚刚安装的内容为您的*Palette*添加了一组新命令，并为社区贡献的插件的美妙世界打开了大门；一种由其他人或您自己扩展 sublime 功能的方法！（分享您的代码！）。
现在让我们使用它来安装`knockdown`.

1.  您可以通过按`ctr`+ `shift`+`P`并键入`Package Control`, （或任何类似的东西`pc`，`pack`这要归功于命令面板的模糊搜索功能）来访问 Package Controll，在这种情况下，通过编写`Package Control: Install Package`（或只是`pi`）来搜索正确的命令。
    [（如果出现问题，您总是可以*`Remove Package`*）]。

![在此处输入图像描述](../Images/b484e2dd91cda66b8493f348f4e3aae5.png)

2.  要查看所有可用的软件包`enter`或单击它。Sublime 将搜索所有已注册的包，甚至会检查并只为您显示与您的 sublime-text 版本兼容的包，您必须等待几秒钟。
    [（或不到一秒，取决于您的互联网+计算机延迟+速度）]。

![在此处输入图像描述](../Images/d173ecca6880728021e22c588c192bdd.png)

3.  现在搜索并选择`knockdown`.

![在此处输入图像描述](../Images/5387f51a57cb476f83488f81df7a69cb.png)

4.  在您点击`Enter`或单击它后，需要一点时间来安装。

![在此处输入图像描述](../Images/5422b2ec648803d601a6c904d62ad7af.png)

**就是这样**，*它只是工作*。

## - 你问如何使用它？

### 要在当前加载的缓冲区中激活此突出显示：

^(（让我们说“打开的文件”）)

1.  在 sublime-text 中并打开一个 .md 文件，再次按`ctr`+ `shift`+ `P`。
2.  搜索`Set Syntax: Markdown (Github Flavored)`和`enter`或单击它。 ![在此处输入图像描述](../Images/317cae2944773efa78ec0668c840505a.png)

### 如果您想为所有 .md 文件激活[（这是一个很大的 IF）]

在当前版本[（最新的 Sublime Text 2 版本和任何版本 3 版本）]：

*   浏览以下菜单：`View -> Syntax -> Open all with current extension as... ->[your syntax choice]`。

在之前的 sublime 版本中：

*   转到一个`Packages/User`，创建（或编辑）一个`.sublime-settings`以您要在其中添加扩展名的语法命名的文件， `Markdown (Github Flavored).sublime-settings`在您的情况下，然后在其中编写如下内容：

```
    {
        “扩展”：
        [
            “MD”
        ]
    }

```

然后重启 Sublime Text

## ......图片，否则它不会发生：

^(（它完全有效！这是证据）) ![在此处输入图像描述](../Images/15a04764828e98c209907bb1c5e5d2c7.png)

***快！***
*成为sublime-text大师，你才更进一步，希望**我的回答**对你有所帮助*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:02:00.783

您的示例正在描述 Markdown 结构化文本

尝试

1) 使用 .md 扩展名保存文件

2) 查看 -> 语法 -> 使用当前扩展名打开所有 -> Markdown

# c# - MVC4 WebApi 在响应头中添加 ETag

> ID：11538013
> 
> 赞同：2
> 
> 时间：2012-07-18T09:14:16.910
> 
> 标签：c#, .net, asp.net-mvc-4, response, etag

我们在 Mvc4 中创建了一个 REST 服务，我试图在我的 WebApi 方法的响应中添加 ETag 标头。它被添加到 Header 集合中，没有任何错误，但是当我检查 Fiddler 中的响应头时，它不存在。

这是我用来在响应中写入标头的方法：

```
 internal static HttpResponseMessage<T> GetResponse<T>(Tuple<T, Dictionary<string, string>> response)
    {
        HttpResponseMessage<T> httpResponse = new HttpResponseMessage<T>(response.Item1, HttpStatusCode.OK);

        if (response.Item2 != null)
        {
            foreach (var responseHeader in response.Item2)
            {
                if (string.Compare(responseHeader.Key, "ETAG", StringComparison.OrdinalIgnoreCase) == 0)
                {
                    httpResponse.Headers.ETag = new System.Net.Http.Headers.EntityTagHeaderValue("\"" + responseHeader.Value + "\"");
                }
                else
                {
                    httpResponse.Headers.Add(responseHeader.Key, responseHeader.Value);
                }
            }
        }

        return httpResponse;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:24:29.647

您可以通过 2 种方式进行操作，您可以在 ActionFilter.OnActionExecuted 方法中设置 ETag，如下所示：

```
public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext) {
    actionExecutedContext.ActionContext.Response.Headers.ETag = new EntityTagHeaderValue(...);
} 
```

但是没有办法轻松地将所需值从控制器传递到 ActionFilter。第二种方法是更改​​您的 WebAPI 操作。不返回模型类型，而是返回 HttpResponseMessage：

```
[HttpGet]
public HttpResponseMessage MyActionMethod() {
    var result = // response data
    var response = Request.CreateResponse<MyType>(HttpStatusCode.OK, result);
    response.Headers.Add("Last Modified", result.Modified.ToString("R"));
    response.Headers.ETag = new System.Net.Http.Headers.EntityTagHeaderValue(CreateEtag(result));
    return response;
} 
```

# python - 从子表中过滤结果

> ID：11538016
> 
> 赞同：0
> 
> 时间：2012-07-18T09:14:30.637
> 
> 标签：python, sqlalchemy

一直在阅读 SQLAlchemy 的文档，我对此一头雾水。考虑以下设置：

```
boardset_user_association_table = db.Table('boardset_user_association', 
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('boardset_id', db.Integer, db.ForeignKey('boardset.id'))
)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(20), unique=True)
    password = db.Column(db.String(30))
    boardSet = db.relationship('BoardSet', secondary=boardset_user_association_table, backref='user')

    def __repr__(self):
        return "<User('%s','%s')>" % (self.username, self.id)

class BoardSet(db.Model):
    __tablename__ = 'boardset'
    id = db.Column(db.Integer, primary_key=True)
    created = db.Column(db.DateTime)
    boards = db.relationship('Board', backref='boardset', lazy='dynamic')

    def __repr__(self):
        return "<BoardSet('%s','%s')>" % (self.id, self.created) 
```

我从 User 对象中获取了项目的集合，但我未能对实际数据执行任何过滤等。例如，我想在某些情况下按字段 Created 中的值对 User.boardSet 的结果进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:20:44.063

好吧，您也可以使用`lazy='dynamic'`for `boardSet`，在这种情况下，您将受益于

> `dynamic`- 该属性将为所有读取操作返回一个预先配置的查询对象，在迭代结果之前可以对其应用进一步的过滤操作。

```
class User(...):
    ...
    boardSet = db.relationship('BoardSet', secondary=boardset_user_association_table, backref='user', lazy='dynamic')

myuser = session.query(User).get(1)
boardsets = myuser.boardSet.order_by(BoardSet.created) 
```

当然，您可以轻松地在加载后在内存中订购物品，只需购买即可`sorted(myuser.boardSet, key=lambda bs: bs.created)`

# asp.net-mvc - 从 Orchard CMS 中删除相关的非内容数据

> ID：11538018
> 
> 赞同：1
> 
> 时间：2012-07-18T09:14:43.767
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, orchardcms

我通过定义这样的记录和模式在 Orchard CMS 中声明了一些非内容数据：

```
public class CountyRecord
{
    public virtual int Id { get; set; }
    public virtual string CountyName { get; set; }
    public virtual CountryRecord CountryRecord { get; set; }
}

public class CountryRecord
{
    public CountryRecord()
    {
        CountyRecords = new List<CountyRecord>();
    }
    public virtual int Id { get; set; }
    public virtual string CountryName { get; set; }
    public virtual IList<CountyRecord> CountyRecords { get; set; }
}

public class Migrations: DataMigrationImpl
{
    public int Create()
    {
        //COUNTIES
        SchemaBuilder.CreateTable(typeof(CountyRecord).Name, table => table
            .Column<int>("Id", col => col
                .PrimaryKey()
                .Identity())
            .Column<string>("CountyName")
            .Column<int>("CountryRecord_Id"));

        //COUNTRIES
        SchemaBuilder.CreateTable(typeof(CountryRecord).Name, table => table
            .Column<int>("Id", col => col
                .PrimaryKey()
                .Identity())
            .Column<string>("CountryName"));
    }
} 
```

然后我有两个控制器处理这两个实体的管理页面。在国家控制器中，我有以下操作：

```
 //DELETE
    [HttpGet, Admin]
    public ActionResult Delete(int countryId)
    {
        var country = CountryRepo.Get(countryId);
        if (country == null)
        {
            return new HttpNotFoundResult("Couldn't find the country with ID " + countryId.ToString());
        }
        return View(country);
    }

    [HttpPost, Admin, ActionName("Delete")]
    public ActionResult DeletePOST(CountryRecord country)
    {       
        foreach (CountyRecord county in CountyRepo.Fetch(c=>c.CountryRecord.Id==country.Id))
        {
            CountyRepo.Delete(county);
        }

        CountryRepo.Delete(country);
        OrchardServices.Notifier.Add(NotifyType.Information, T("Country '{0}' deleted successfully", country.CountryName));
        return RedirectToAction("Index");
    } 
```

这就是随之而来的观点：

```
@model Addresses.Models.CountryRecord
<div class="manage">
@using (Html.BeginFormAntiForgeryPost("Delete"))
{
    <h2>Are you sure you want to delete this country and ALL its counties?</h2>
    @Html.HiddenFor(m => m.Id);
    @Html.HiddenFor(m => m.CountryName);
    @Html.ActionLink(T("Cancel").Text, "Index", "CountriesAdmin", new { AreaRegistration = "Addresses" }, new { style = "float:right; padding:4px 15px;" })
    <button class="button primaryAction" style="float:right;">@T("Confirm")</button>
}
</div> 
```

**但是**，问题是，当我删除一个仍然分配有县的国家时，它会引发以下错误：

```
a different object with the same identifier value was already associated with the session 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:40:28.777

这是因为您的`DeletePOST()`参数是`CountryRecord`. Orchard 记录全部由 NHibernate 框架代理，MVC 的 ModelBinder 无法为您正确创建它们。

相反，您需要做的就像您在非 POST 方法中所做的一样：仅接受 CountryRecord 的整数 ID，从存储库中获取新记录，*然后*将其删除。

# forms - 单击 div 不会在本地主机上的 Chrome 中提交表单

> ID：11538020
> 
> 赞同：0
> 
> 时间：2012-07-18T09:14:49.630
> 
> 标签：forms, google-chrome, localhost

我想我发现了一个有趣的问题（至少对我来说）。我有一个表单，它使用点击表单内的 div 来提交。我已使用“document.forms.form.submit()”使 div 可点击以按照此处的建议提交[this.form.submit() 在单击表单中的 div 元素后不起作用](https://stackoverflow.com/questions/8382184/this-form-submit-not-working-after-clicking-div-element-in-form)（感谢 David Hedlund！）

然而，该表单在 chrome 中运行良好，ff。但由于某些未知原因，在 chrome 上的 localhost 中运行表单现在无法正常工作。ff 工作正常。使问题变得有趣的是，当我将表单上传到网络服务器时，它可以在 chrome 中运行！知道为什么会在本地机器上发生这种情况吗？我正在使用 Xampp。

这是表格-

```
<form name="form" action="login_process.php" method="POST">
<div>
  Username: <input style="width:100px;" name="login_client[]" type="text" />
  Password: <input style="width:100px;" name="login_client[]" type="password" />
</div>

<div  align="right" class="whitearial12" style="position:absolute;  font-size:10px; width:360px; height:17px; right:110px; top:35px;">
  Forgotten your <a href="#">password</a>, or need to <a href="#">register</a>? 
</div>
<!-- this is the div !-->
<div onClick="document.forms.form.submit()" align="center" class="whitearial12" style="cursor: pointer; position:absolute; padding-top:3px; padding-bottom:-3px; width:80px; height:17px; right:20px; top:10px; background-image: url(Images/button_blank.png); background-repeat:no-repeat">
    Log In
</div>
</form> 
```

更新：让我添加我进一步注意到的内容。此表单包含在另一个名为 header.php 的 php 文件的 index.php 文件中。我试过只运行 header.php。在这种情况下，表单在 chrome 中可以正常工作。但是在 index.php 中包含它是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:41:59.517

我建议包括 jQuery 并重新设计以类似于此

```
<form id="MyForm" action="login_process.php" method="post">
    <span onclick="javascript:$('#MyForm').submit();">Magical ponies await</span>
</form> 
```

使用 jquery 可以帮助解决跨浏览器的问题，但如果你不能这样做，怎么样

```
<form id="XX" action="login_process.php" method="post">
  <span onclick="javascript:document.getElementById('XX').submit();">AVAST</span>
</form> 
```

# visual-studio-2005 - 构建定义 xxxx 不存在

> ID：11538026
> 
> 赞同：0
> 
> 时间：2012-07-18T09:15:10.587
> 
> 标签：visual-studio-2005

我成功地将 TFS2005 集成到 TFS2010，我必须使用 Visual Studio 2005 使用构建类型编辑和构建项目。这些构建类型是在集成之前声明的。我需要使用其中之一。但是当我尝试构建一个项目时，会出现以下错误消息：

TF215016: 构建定义 xxxx 不存在。指定一个有效的构建定义并重试。

我不知道如何解决这个问题。谷歌没有发现任何有用的东西。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:53:39.393

您无法从 VS 2005 编辑 TFS 2010 构建定义，您需要安装 Team Explorer 2010 或 VS 2010 并从那里编辑定义，它是 TFS / VS 版本之间不兼容的少数 TFS 之一。

如果您使用升级模板进行构建，那么您仍然需要调用 tfsbuild.proj 来控制构建的内容，并且可以在 VS 2005 中对其进行编辑。

# java - 确定离其他点最远的点

> ID：11538027
> 
> 赞同：4
> 
> 时间：2012-07-18T09:15:10.913
> 
> 标签：java, grid, point

我正在创建一个简单的游戏，其中一些游戏计算机引导玩家使用一些简单的 AI 实现。

我有一个`Point`代表玩家可能移动的列表。我需要编写一个方法，将玩家移动到`Point`距离该列表中可能的敌人最远的地方。我用图片说明了它：

![](../Images/bf5326aebc9398fdeb0fcf9e987d09f6.png)

数字代表列表中的点位置

我想要的是让玩家（4）移动到`Point`距离任何敌人最远的位置 2 或 6。如果有一个敌人，我已经设法解决了这个问题，方法是迭代列表并使用`distance()`方法`Point`确定最远的点。但即使网格中有多个敌人，代码也必须工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:31:27.230

嗯，你反过来怎么样：

```
1\. Iterate over each point.
2\. Find out how close it is to its closest enemy.
3\. Choose the point that is furthest from its closest enemy. 
```

早期出局的潜力很大：

```
Within the loop store the currently furthest point. 
If you are then inspecting another point and find out
it has a closer enemy, you can immediately skip to the
next point 
```

[编辑]：如果您使用上述网格，您也可以

```
1\. Check if there's an enemy on the currently processed 
   point *before* iterating through other enemies. That way
   you can exclude it as early as possible.

2\. If it's a densely populated grid, consider doing a breadth-first
   flood-fill starting at the current point. That might find the closest
   enemy much faster than iterating though all of them. 
```

# java - 短到双倍的价值

> ID：11538028
> 
> 赞同：2
> 
> 时间：2012-07-18T09:15:20.663
> 
> 标签：java, double, type-conversion, unsigned, short

我在将`short`值转换为`double`Java 时遇到问题。我将实数表示为 16 位无符号值（`short`在 java 中）。当我阅读它们时，我想将它们转换为`double`，但在执行之后`(double) value`，我得到了错误的结果，例如在一种情况下使用`System.out.println(value)`I get `0.0`，但结果应该是`0.00034`。

```
 double[][] dataD = null;
 short[][] dataS = null;
 try {
    fits = new Fits(path); // here im readinf fits file
    switch(bitpix) { // bitpix contains information about size of data
       case 16: dataS = ((short[][]) fits.getHDU(0).getKernel()); break;
       ...
    }
 } catch (FitsException e) {}
 catch (IOException e) {}
 for( int i = 0; i < dataS.length;  i++ )
    for( int j = 0 ; j <dataS[0].length ; j++ )  {
       switch(bitpix) {
          case 16: dataD[i][j] = 0.0; 
             if( dataS[i][j] < 0 ) dataD[i][j] = dataS[i][j] + 32768;
             else dataD[i][j] = dataS[i][j] ;   
          break;
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:23:00.717

我假设您在将它们转换为`double`. 不要做

```
short s = 123;
double d = (double) (s / 100); 
```

而是做

```
short s = 123;
double d = (double) (s / 100.0); 
```

避免整数除法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:19:00.677

尝试这个 ：

```
Short sObj = new Short("10");
double d = sObj.doubleValue(); 
```

这应该没问题。

# php - PHP & Wordpress：打印数组内容

> ID：11538029
> 
> 赞同：1
> 
> 时间：2012-07-18T09:15:22.843
> 
> 标签：php, arrays, wordpress

我现在很笨……</p>

```
print_r($terms); 
```

这样做……</p>

```
Array
(
    [7] => stdClass Object
        (
            [term_id] => 7
            [name] => Testwhatever
            [slug] => testwhatever
            [term_group] => 0
            [term_taxonomy_id] => 7
            [taxonomy] => event_type
            [description] => 
            [parent] => 0
            [count] => 2
            [object_id] => 8
        )

) 
```

我怎么能`print`蛞蝓？我认为 print`print($terms->slug)`应该完成这项工作，但它说：“试图获得非对象的属性”

**更新：**

```
function get_event_term($post) {
    $terms = get_the_terms( (int) $post->ID, 'event_type' );
    if ( !empty( $terms ) ) {
        print_r($terms);
        return $terms[7]->slug;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:17:20.887

它是一个对象数组（即使它在索引“7”处仅包含一个条目），而不是单个对象

```
echo $terms[7]->slug; 
```

与多个“事物

```
foreach ($terms as $term) echo $term->slug; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:17:14.390

尝试

```
print_r($terms[7]->slug); 
```

您的对象 stdclass 在数组 [7] 偏移量中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:26:54.277

或者，让事情复杂一点：

```
array_walk($terms, function($val,$key) use(&$terms){ 
    var_dump($val->slug);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:17:42.800

试试这个。

```
print ($terms[7]->slug); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:17:55.590

`print_r ($terms[7]->slug)`对我来说看起来很合乎逻辑，因为它是一个对象数组

**更新**

由于您不确定应该返回多少项目`get_event_term`，因此您应该返回一个数组。

```
function get_event_term($post) {
    $aReturn = array();
    $terms = get_the_terms( (int) $post->ID, 'event_type' );
    if ( !empty( $terms ) ) {
        print_r($terms);
        foreach($terms as $term){ // iterate through array of objects
            $aReturn[] = $term->slug; // get the property that you need
        }
    }
    return $aReturn;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T20:41:31.733

函数使用**wp_parse_args**系统来管理它的单个**$args**参数，可以给它你想要的任何值。在这种情况下，$args 存储了详细的显示覆盖，这是在许多 WordPress 函数中发现的模式。

```
$args = wp_parse_args( $args, $term->name );
echo $arg[157]['term_id']; //output 157
echo $arg[157]['name'];  //output Entertainment 
```

对我来说很好用更多细节

[http://codex.wordpress.org/Function_Reference/wp_parse_args](http://codex.wordpress.org/Function_Reference/wp_parse_args)

# matlab - MATLAB：您将如何登录网站并下载报告？

> ID：11538038
> 
> 赞同：0
> 
> 时间：2012-07-18T09:15:35.490
> 
> 标签：matlab, vba

手头的任务是登录网站并使用 MATLAB 下载报告。我在这个主题上找不到任何有用的东西。在使用 WinHTTPRequest 之前，我已经在 VB 中编写了代码来执行此操作，但即使在 MATLAB 中也没有帮助。

任何指针、示例或指导将不胜感激。

我已经有 VBA 中的代码并且它非常复杂，所以最好的方法是将 VBA 转换为 MATLAB。我曾经`x = actxserver( 'WinHttp.WinHttpRequest.5.1' )`发出 HTTP 请求。`x.Option(WinHttpRequestOption_EnableRedirects) = enableRedirect`除了enableRedirect 为 true之外，一切都有效。我试过以下没有运气：

```
WinHttpRequestOption_EnableRedirects = 6;
set( x, 'Option', WinHttpRequestOption_EnableRedirects, enableRedirect );
x.set('Option',WinHttpRequestOption_EnableRedirects,enableRedirect);
x.set('Option',6,enableRedirect); 
```

有没有人设法在 Matlab 中设置此选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:49:49.260

Matlab 具有功能`urlread`，`ftp`看起来可能是您的良好起点。与以往一样，阅读文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:02:11.223

如果比较复杂的Java方法可以直接在matlab中使用。

例如。建议[如何使用 Java 从网站检索 URL？](https://stackoverflow.com/questions/359439/how-do-i-retrieve-a-url-from-a-web-site-using-java)

在 Matlab 中看起来像这样：

```
url = java.net.URL('http://example.com')
connection   = url.openConnection
connection.setRequestMethod('GET')
connection.connect()
stream = connection.getInputStream() 
```

几乎一样——不是吗？您肯定会在 Java 中找到用于身份验证的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:42:09.107

我使用了以下代码：

```
x = actxserver( 'WinHttp.WinHttpRequest.5.1' );
x.Open(sType, sUrl, false);
if strcmp( sType,'POST');
    x.SetRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
else
    x.SetRequestHeader('Content-Type', 'text/html')
end

x.SetRequestHeader('If-Modified-Since', 'Jan 1 2000 00:00:00 UTC' );
x.SetRequestHeader('Pragma', 'no-cache' );

if ~isempty( sCookie )
    x.SetRequestHeader('Cookie', sCookie);
end
x.SetRequestHeader('Accept-Language', 'en-gb');
x.SetRequestHeader('Connection', 'Keep-Alive');
x.SetRequestHeader('Accept', '*/*');
x.SetRequestHeader('UA-CPU', 'x86');
x.Send (sSoap)
writeStringToFile(sFileNameAndPath, x.responseText, true); 
```

# android - 选择列表项时如何避免列表项中的图像按钮获得焦点？

> ID：11538046
> 
> 赞同：0
> 
> 时间：2012-07-18T09:15:48.160
> 
> 标签：android

帮助我避免不必要的关注。我禁用了焦点，但我不知道它是如何集中的。我怀疑这是由于可扩展的 listView 或 customadapter。提前致谢。

```
 ListDoctorsActivity.java

    public class ListDoctorsActivity extends ListActivity implements
        OnItemClickListener, OnClickListener {
    private ImageButton addUpdateButton;

    private DoctorAdapter doctorAdapter;
    private SimpleSectionAdapter<Doctor> sectionAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.at_list_doctors);

        // UI References
        addUpdateButton = (ImageButton) findViewById(R.id.add_update);

        // Set listener
        addUpdateButton.setOnClickListener(this);
        getListView().setOnItemClickListener(this);
    }

    private class DoctorAdapter extends ArrayAdapter<Doctor> {
        // Attributes
        private List<Doctor> doctors;
        private int expandedViewPosition = -1;

        public DoctorAdapter(Context context, int textViewResourceId,
                List<Doctor> doctors) {
            super(context, textViewResourceId, doctors);
            this.doctors = doctors;

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;
            Holder holder = null;

            if (view == null) {
                view = View.inflate(ListDoctorsActivity.this,
                        R.layout.at_list_item_doctor, null);

        holder = new Holder();
        holder.doctorNameTextView = (TextView) view
                        .findViewById(R.id.doctor_name);
        holder.specializationTextView = (TextView) view
                        .findViewById(R.id.specialization);
        holder.editImageButton = (ImageButton) view
                        .findViewById(R.id.edit);
        holder.expandableView =       view.findViewById(R.id.expandable_view);
        holder.callButton = (Button) view.findViewById(R.id.call);
        holder.emailButton = (Button) view.findViewById(R.id.email);
        holder.appointmentsButton = (Button) view
                        .findViewById(R.id.appointments);

                // Set properties
                holder.doctorNameTextView.setTypeface(headerTitleFont);

                view.setTag(holder);
            } else {
                holder = (Holder) view.getTag();
            }

            // Set properties
            final Doctor doctor = doctors.get(position);
            holder.doctorNameTextView.setText(doctor.getName());
            holder.specializationTextView.setText(doctor.getSpecialization());

            // Show / Hide the expandable view
            int visibility = position == expandedViewPosition ? View.VISIBLE
                    : View.GONE;
            holder.expandableView.setVisibility(visibility);
            // Event listeners
            OnClickListener clickListener = new OnClickListener() {

                @Override
                public void onClick(View v) {
                    switch (v.getId()) {
                    case R.id.edit:
                        edit(doctor);
                        break;
                    case R.id.call:
                        call(doctor);
                        break;
                    case R.id.email:
                        email(doctor);
                        break;
                    case R.id.appointments:
                        showAppointments(doctor);
                        break;
                    }
                }
            };

            holder.editImageButton.setOnClickListener(clickListener);
            holder.callButton.setOnClickListener(clickListener);
            holder.emailButton.setOnClickListener(clickListener);
            holder.appointmentsButton.setOnClickListener(clickListener);

            // Disable focus
            disableFocus(holder);

            return view;
        }

        private void disableFocus(Holder holder) {
            holder.editImageButton.setFocusable(false);
            holder.callButton.setFocusable(false);
            holder.emailButton.setFocusable(false);
            holder.appointmentsButton.setFocusable(false);
        }

        public void toggleExpandedView(int position) {
            expandedViewPosition = expandedViewPosition == position ? -1
                    : position;
            notifyDataSetChanged();
        }
    }

    static class Holder {
        public TextView doctorNameTextView;
        public TextView specializationTextView;
        public ImageButton editImageButton;
        public View expandableView;
        public Button callButton;
        public Button emailButton;
        public Button appointmentsButton;
    }

    class DoctorSectionizer implements Sectionizer<Doctor> {

        @Override
        public String getSectionTitleForItem(Doctor doctor) {
            return doctor.getName().toUpperCase().substring(0, 1);
        }
    }

    @Override
    protected void onStart() {
        super.onStart();
        // Model
        List<Doctor> doctors = Sorting(OrmanHelper.getDoctors());

        // Adapter
        doctorAdapter = new DoctorAdapter(this, R.layout.at_list_item_doctor,
                doctors);
        sectionAdapter = new SimpleSectionAdapter<Doctor>(this, doctorAdapter,
        R.layout.cmn_list_section, R.id.title, new   DoctorSectionizer());
        getListView().setAdapter(sectionAdapter);

    }

    @Override
    public void onItemClick(AdapterView<?> parentView, View view, int position,
            long id) {
        // Toggle list items
        int index = sectionAdapter.getIndexForPosition(position);
        doctorAdapter.toggleExpandedView(index);
        sectionAdapter.notifyDataSetChanged();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.add_update:
            Intent intent = new Intent(this, AddEditDoctorActivity.class);
            startActivity(intent);
            break;
        }
    }
    } 
```

at_list_item_doctor.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusable="false" >

    <TextView
        android:id="@+id/doctor_name"
        style="@style/summary_text"
        android:layout_marginLeft="14dp"
        android:paddingTop="10dp"
        android:text="@string/name" />

    <TextView
        android:id="@+id/specialization"
        style="@style/medium_text"
        android:layout_below="@+id/doctor_name"a
        android:layout_alignLeft="@id/doctor_name"
        android:paddingBottom="10dp"
        android:textColor="@color/gray_darkest"
        android:text="@string/specialization" />

    <ImageButton
        android:id="@+id/edit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/doctor_name"
        android:layout_alignBottom="@id/specialization"
        android:focusable="false"
        android:background="@android:color/transparent"
        android:src="@drawable/edit" />

    <include
        android:id="@+id/expandable_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/specialization"
        android:visibility="gone"
        layout="@layout/at_list_item_expandable_doctor" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:18:37.777

最好的主意就是向`Textview`列表项行中的任何一个请求焦点，

就像是，

```
<TextView
        android:id="@+id/doctor_name"
        style="@style/summary_text"
        android:layout_marginLeft="14dp"
        android:paddingTop="10dp"
        android:text="@string/name" 

<requestFocus />
/> 
```

或以编程方式，在 Adapter 类的`getView()`

```
holder.doctorNameTextView.requestFocus(); // Code for understanding 
```

试试这个，让我知道它是否有效。

# jquery - jQuery UI Autocomplete - 从源代码捕获 HTTP 错误

> ID：11538048
> 
> 赞同：9
> 
> 时间：2012-07-18T09:15:52.757
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 jQuery UI 自动完成插件来创建一个快速搜索栏，它将填充匹配元素的下拉列表。

一切正常，但我想准备我的搜索插件来处理来自 ajax 调用的 HTTP 错误。

我没有找到处理这个的方法。我通读了文档： http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)但似乎没有可以用于这种情况的称为“错误”的事件或回调。

我想要实现的是一个警告框，告诉用户服务器端出现错误。

有人能给我一个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T09:51:20.397

从[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)你可以使用源代码作为一个函数，它接受两个参数，请求和响应。因此，处理 http 错误的一种可能方法是使用 jQuery ajax 调用来捕获它们，如下所示：

```
 $( "#autocomplete" ).autocomplete({
        minLength: 2,
        source: function( request, response ) {
            $.ajax({
                url: "query.php",
                data: { query: request.term},
                success: function(data){
                    response(data);
                },
                error: function(jqXHR, textStatus, errorThrown){
                    alert("error handler!");                        
                },
              dataType: 'json'
            });
        }
    });​ 
```

# jquery - ABORT_ERR：XMLHttpRequest 异常 102：用户在 bada 上的同步请求中中止了请求

> ID：11538049
> 
> 赞同：1
> 
> 时间：2012-07-18T09:15:53.673
> 
> 标签：jquery, jquery-ui, jquery-mobile, exc-bad-access, bada

大家好，我在 post 方法中发送一个字符串，因为我有以下代码：

```
function sendText(txt)
    {

        var internetUrl="http://myURL/";
        var url =internetUrl+ encodeURI("customer/Ri_logon.asp?requestString=");
        var parameters = 'manish|^test1234|^|^X|^11111985|^1.0|^|$';
        alert(url);
        alert(parameters);
        txt = parameters;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', url, true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            console.log(this.responseText);
            alert(this.responseText);
          }
          alert("!!!"+this.status);
        };

        xhr.send(txt);
      }

    </script> 
```

我在 `xhr.send(txt);`errorr 处遇到错误：`ABORT_ERR: XMLHttpRequest Exception 102: The user aborted a request in synchronous requests` 在`xhr.send(txt);`blackberry、symbian 和 android 上运行相同的代码。但是在 Bada 上我得到了错误。

在 manifest.xml 我给了 Privilege 为：

```
<Privileges>
    <Privilege>
        <Name>WEB_SERVICE</Name>
    </Privilege>
    <Privilege>
        <Name>SYSTEM_SERVICE</Name>
    </Privilege>
    <Privilege>
        <Name>HTTP</Name>
    </Privilege>
    <Privilege>
        <Name>NET</Name>
    </Privilege> 
```

提前致谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:31:54.123

你的问题是用 jQuery 标记的；你为什么不使用它？

$.post(url, txt, function(data) { console.log(data); });

我的经验是**永远**不要在你的代码中使用 XHR。不同的浏览器都有不同的实现，API 本身非常僵化和冗长（以我的拙见）。

# php - 添加字符串中使用的斜杠

> ID：11538050
> 
> 赞同：-4
> 
> 时间：2012-07-18T09:15:54.283
> 
> 标签：php

我是 php 新手。几天前，我想出了 Add Slashes 。我需要知道它是什么以及它是如何在字符串中使用的。

任何人都可以帮助我吗？谢谢各位朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:19:22.440

addlashes() 函数返回一个在预定义字符前带有反斜杠的字符串。

预定义的字符是：

单引号 (') 双引号 (") 反斜杠 () NULL

在此示例中，我们将为字符串中的预定义字符添加反斜杠：

```
<?php
$str = "Who's Kai Jim?";
echo $str . " This is not safe in a database query.<br />";
echo addslashes($str) . " This is safe in a database query.";
?> 
```

上面代码的输出将是：

凯吉姆是谁？这在数据库查询中是不安全的。谁是凯吉姆？这在数据库查询中是安全的。

[您可以在http://www.w3schools.com/php/func_string_addslashes.asp](http://www.w3schools.com/php/func_string_addslashes.asp)中找到完整的 PHP 文档

# wpf - 将一列绑定到wpf中的double列表

> ID：11538053
> 
> 赞同：1
> 
> 时间：2012-07-18T09:15:59.163
> 
> 标签：wpf, binding, wpfdatagrid

我已经将 ObservableCollection <Double?> 绑定到网格中的一列，以及其他一些辅助列。

我的 xml 代码就像

```
<telerik:RadGridView x:Name="rgvDateTime"
                                 Grid.Row="1"
                                 Grid.ColumnSpan="2"
                                 Height="257"
                                 Margin="{StaticResource MarginsForMostRightControl}"
                                 VerticalAlignment="Top"
                                 AutoExpandGroups="True"
                                 AutoGenerateColumns="False"
                                 CanUserFreezeColumns="False"
                                 CanUserReorderColumns="False"
                                 CanUserResizeColumns="False"
                                 EditTriggers="Default"
                                 HorizontalContentAlignment="Left"
                                 IsFilteringAllowed="False"
                                 ItemsSource="{Binding FlowList}"
                                 RowIndicatorVisibility="Collapsed"
                                 ScrollMode="RealTime"
                                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                 SelectionMode="Extended"
                                 SelectionUnit="FullRow"
                                 ShowGroupPanel="False"
                                 Style="{StaticResource GridViewStyle}"
                                 TextBlock.TextAlignment="Left">

              <telerik:RadGridView.Columns>
                <Helpers:RowNumberingHelper Width="Auto"
                                            CellStyle="{StaticResource GridCellRowNumberStyle}"
                                            HeaderCellStyle="{StaticResource GridViewHeaderCellExcelStyle}" />

                <telerik:GridViewDataColumn Width="0.25*"
                                            CellStyle="{StaticResource GridCellControlStyle}"
                                            EditTriggers="CellClick"
                                            DataMemberBinding="{Binding}"
                                            HeaderCellStyle="{StaticResource GridViewHeaderCellExcelStyle}">
                  <telerik:GridViewDataColumn.Header>
                    <StackPanel Orientation="Vertical">
                      <TextBlock Text="Flow" />
                      <StackPanel Orientation="Horizontal">
                        <TextBlock HorizontalAlignment="Left"
                                   VerticalAlignment="Top"
                                   Style="{StaticResource Label}"
                                   Text="(" />

                        <localCtrl:UnitLabel VerticalAlignment="Top"
                                             UnitSystem="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                                 AncestorType={x:Type Window}},
                                                                  Path=DataContext.CurrUnitSystem,
                                                                  Mode=TwoWay}"
                                             UnitType="Flow" />
                        <TextBlock VerticalAlignment="Top"
                                   Style="{StaticResource Label}"
                                   Text=")" />
                      </StackPanel>
                    </StackPanel>
                  </telerik:GridViewDataColumn.Header>
                  <!--<telerik:GridViewDataColumn.CellTemplate>
                    <DataTemplate>
                      <Textbox:NumEdit HorizontalAlignment="Stretch"
                                       VerticalAlignment="Center"
                                       BorderBrush="Transparent"
                                       HorizontalContentAlignment="Left"
                                       MaxLength="8"
                                       Text="{Binding}"
                                       />
                    </DataTemplate>
                  </telerik:GridViewDataColumn.CellTemplate>-->
                </telerik:GridViewDataColumn>

              </telerik:RadGridView.Columns>
            </telerik:RadGridView> 
```

我的视图模型是

```
public class MyVM : NotificationObject
{   
    /// <summary>
    /// Stores the flow list
    /// </summary>
    private ObservableCollection<double?> flowList = new ObservableCollection<double?>();

    /// <summary>
    /// Gets or sets the flow list.
    /// </summary>
    /// <value>The flow list.</value>
    public ObservableCollection<double?> FlowList
    {
      get
      {
        return this.flowList;
      } // get

      set
      {
        this.flowList = value;
        this.RaisePropertyChanged(() => this.FlowList);
      } // set
    } // FlowList   
} 
```

绑定工作正常，但是当我取消注释 xaml 中的 CellTemaplate 块时，它会因 **“双向绑定需要 Path 或 XPath”而崩溃。**例外。我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:47:20.353

The default CellTemplate expects a correct Path. Although it is equivalent this works:

```
DataMemberBinding="{Binding Path=.}" 
```

# android - 适用于 Windows/Eclipse/Android 的 FFTW

> ID：11538062
> 
> 赞同：1
> 
> 时间：2012-07-18T09:16:49.973
> 
> 标签：android, windows, eclipse, fftw

我正在为项目集成开发`.cpp`文件`JNI`夹中的文件`Android`，我需要使用该`FFTW`库来操纵信号的频谱。我找不到任何关于在`Eclipse`（我`Cygwin`用来编译文件）中编译/安装这类库的好文档。

我的问题是是否有人知道任何可靠的教程或如何从`FFTW`. 我正在使用 Windows 7。

# java - 在java中使用subList对数据进行分区

> ID：11538064
> 
> 赞同：2
> 
> 时间：2012-07-18T09:16:51.797
> 
> 标签：java, arraylist, sublist, data-partitioning

我有一个 List 实现的 ArrayList 具有大量索引。我想将它分成单独的 ArrayList。我做了

```
 List<List<Integer>> list = new ArrayList<List<Integer>>(10000000);
      List<List<Integer>> sublist1 = list.subList(0,x)
      List<List<Integer>> sublist2 = list.subList(x,y) 
```

等等。我不知道这是否是正确的分区方式。你能建议我一种有效的分区方法吗？

[编辑]

我有一个这样的arrayList：

```
 [[1,2,3],[4,5,6],[8,9,10],[11,12,13],[44,88,1000], ......,[54,23,53]] 
```

这个列表很长。我想从上面的列表中获取一些小尺寸的子列表。每个列表都将包含不重叠的列表：

```
sublist1:[[1,2,3][4,5,6] ...[.,.,.]]  sublist2:[[,,,][] .... [,,,,]]  sublistn:[[,,,][,,,]....[54,23,53]] 
```

[编辑] 请不要混淆它`[]`是空列表。我想显示列表中的列表数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:23:17.267

我认为您在这里稍微混淆了这些类型。

也许这就是你所追求的：

```
public static List<List<Integer>> getSubLists(List<Integer> ints, int k) {
    List<List<Integer>> result = new ArrayList<List<Integer>>();
    for (int i = 0; i < ints.size(); i += k)
        result.add(ints.subList(i, Math.min(i+k, ints.size())));
    return result;
} 
```

示例用法：

```
List<Integer> ints = Arrays.asList(10, 20, 30, 40, 50, 60, 70, 80, 90, 100);

List<List<Integer>> sublists = getSubLists(ints, 3);

// Prints [[10, 20, 30], [40, 50, 60], [70, 80, 90], [100]]
System.out.println(sublists); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:41:16.697

这是遵循您的示例的建议：

```
private static List<List<Integer>> getSubLists(List<List<Integer>> ints, int i) {
    List<List<Integer>> sublist =
            new ArrayList<List<Integer>>(Collections.nCopies(ints.size(),
                                         Collections.<Integer>emptyList()));
    sublist.set(i, ints.get(i));
    return sublist;
} 
```

**示例用法：**

```
List<List<Integer>> ints = Arrays.asList(Arrays.asList(1,2,3),
                                         Arrays.asList(4,5,6),
                                         Arrays.asList(54,23,53));

List<List<Integer>> subList0 = getSubLists(ints, 0);
List<List<Integer>> subList1 = getSubLists(ints, 1);
List<List<Integer>> subList2 = getSubLists(ints, 2);

System.out.println("subList0: " + subList0);
System.out.println("subList1: " + subList1);
System.out.println("subList2: " + subList2); 
```

**输出：**

```
subList0: [[1, 2, 3], [], []]
subList1: [[], [4, 5, 6], []]
subList2: [[], [], [54, 23, 53]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:43:17.437

我建议您详细查看 java 集合 API 来回答这个问题，因为它主要取决于访问类型和您在集合中访问的数据类型。

没有任何进一步的细节，至少有两个很好的建议：

1.  最佳解决方案是移动到 TreeSet，因为这些自然是快速的数据结构，可以简单地通过切割树的一部分来拆分。一切都已经是 Java API 的一部分，您无需做太多工作。**这要求您的用例不允许重复值，并且在您的集合中有可排序的数据，但将始终为您提供登录操作**

2.  如果您遇到不可排序的数据并且您承认重复值，您将不得不使用列表。ArrayList 具有访问 O(n) 的高效实现，因为它由 Array 支持。然而，由于分配相邻内存的长空间的复杂性，使其非常大会带来一些问题。**使用 ArrayList 和 LinkedList 有一个收支平衡，需要根据自己的需求找出来，包括是否需要随机访问、创建列表后的插入/删除等等**

# scala - 用于文件扩展名的 Scala specs2 匹配器

> ID：11538074
> 
> 赞同：2
> 
> 时间：2012-07-18T09:17:18.493
> 
> 标签：scala, matcher, specs2

我正在尝试创建一个 specs2 匹配器来断言`File`扩展的有效性（通过重用现有的`endWith`匹配器）。但是我得到一个类型错误。我怎么能绕过它？

```
import java.io.File
import org.specs2.mutable.Specification
import org.specs2.matcher.{ Expectable, Matcher }

class SampleSpec extends Specification {
  def hasExtension(extension: => String) = new Matcher[File] {
    def apply[S <: File](actual: Expectable[S]) = {
      actual.value.getPath must endWith(extension)
    }
  }
} 
```

这是编译器错误：

```
<console>:13: error: type mismatch;
 found   : org.specs2.matcher.MatchResult[java.lang.String]
 required: org.specs2.matcher.MatchResult[S]
             actual.value.getPath must endWith(extension) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:15:05.520

您确实可以使用`^^`运算符（从解析器组合运算符中获取灵感）并简单地编写：

```
def hasExtension(extension: =>String) = endWith(extension) ^^ ((_:File).getPath) 
```

[作为参考，这里](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Matchers.html#Custom)介绍了创建自定义匹配器的各种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:51:32.053

好的，我已经通过使用`^^`在匹配器类型之间适应的运算符来工作了。对我来说，它看起来像是一个仿函数的映射函数。

```
def hasExtension(extension: => String) = new Matcher[File] {
  def apply[S <: File](actual: Expectable[S]) = {
    actual must endWith(extension) ^^ ((file: S) => file.getPath)
  }
} 
```

# javascript - 在文本框中只允许 0.25、0.50 和 0.75

> ID：11538077
> 
> 赞同：2
> 
> 时间：2012-07-18T09:17:22.247
> 
> 标签：javascript, jquery

我正在开发一个 Web 应用程序并使用 javascript 来限制或舍入一个值。每当我在文本框中输入任何十进制值时，都应将其四舍五入为 0.25、0.50、0.75 或 0.00。知道怎么做吗？即使只能输入 0.25、0.50、0.75 和 .00 也可以……但是如何仅限制这些特定值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:33:51.487

jQuery UI 微调器内置了这个功能。

[http://btburnett.com/spinner/example/example.html](http://btburnett.com/spinner/example/example.html)

或者

[http://www.htmldrive.net/items/demo/541/jQuery-UI-Spinner-numeric-stepper](http://www.htmldrive.net/items/demo/541/jQuery-UI-Spinner-numeric-stepper)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T09:37:19.330

或者：

```
var n = $('#myInput').val();
alert(.25 * Math.round( 4 * n)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:24:15.833

你只需要一个 if 语句

例如，假设您尝试四舍五入到最接近的整数，您将执行以下操作或类似的操作：

```
var remainder = value - Math.floor(value);
if(remainder < 0.5)
    newValue = Math.floor(value);
else
    newValue = Math.floor(value) + 1; 
```

然而，有很多方法可以做到这一点，您只需要选择适当的数字而不是 0.5，并且可能需要检查多个范围。

我绝不是说这是最好的选择，但这应该给你一个想法。

至于文本框条目，您可以在每次 keyup/keydown 等时运行它，并将值替换为您的`newValue`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T09:28:28.793

```
var decimal = n - Math.floor(n)
decimal=decimal*100;
var factor = Math.round(decimal/25)
decimal  = n + 0.25*factor; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T09:34:53.263

如果 Jon Taylors 的回答不明显，使用 if 语句解决这个问题的适当方法如下：

```
var floorValue = Math.floor(value);
var remainder = value - floorValue;
if (remainder < 0.325) {
    if (remainder < 0.125) {
        newValue = floorValue;
    } else {
        newValue = floorValue + 0.25;
    }
} else {
    if (remainder < 0.625) {
        newValue = floorValue + 0.5;
    } else if (remainder < 0.875) {
        newValue = floorValue + 0.75;
    } else {
        newValue = floorValue + 1;
    }
} 
```

# c++ - 为什么使用 static_cast 运算符的不安全强制转换不会崩溃？

> ID：11538080
> 
> 赞同：1
> 
> 时间：2012-07-18T09:17:26.667
> 
> 标签：c++, casting, static-cast

考虑以下示例代码。

```
#include <iostream>

using namespace std;

class base
{

   public:
       void func()
      {
         cout << "base::func()" << endl;
      }

};

class derived : public base
{
   public:
       void func()
      {
         cout << "derived::func()" << endl;
      }

};

void dummy(base *bptr)
{
  derived *dptr = static_cast<derived*> (bptr);
  dptr->func();
}

int main()
{
   base bob1;
   derived dob1;

   dummy(&dob1); //Line1
   dummy(&bob1); //Line2
} 
```

在 Line1 中，我将派生类对象的地址传递给函数`dummy`，该函数接受一个指向基类对象的指针。所以`static_cast`函数中的 in`dummy`是安全的。

在 Line2 中，我将基类对象的地址传递给函数。所以`static_cast`in 函数`dummy`是不安全的。

但是当我执行代码时，程序运行正常。我想，按这个词`not safe`，程序应该在运行时崩溃。但没有发生崩溃。

这是我得到的输出。

```
derived::func()
derived::func() 
```

程序在运行时没有崩溃的原因是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T09:18:10.617

因为**未定义的行为**意味着任何事情都可能发生，不一定是崩溃。

在我见过的大多数编译器上，调用一个`virtual`不访问`NULL`指针上的类成员的非方法是有效的，但它仍然是未定义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T09:22:03.287

C++ 的核心概念之一是**未定义行为**。当您执行导致未定义行为的操作时，例如静态转换一个不指向转换类型对象的指针，您的程序的行为实际上是未定义的：该标准没有定义任何特定行为。平台不需要做任何具体的事情，它显示的任何行为都可以根据标准进行。

这种未定义的行为包括默默地做对你来说看起来像正常行为的事情。不能保证分段错误或任何其他诊断。

# c - 在 32 位 Open Watcom C 中生成 FAR 跳转指令

> ID：11538081
> 
> 赞同：0
> 
> 时间：2012-07-18T09:17:34.277
> 
> 标签：c, x86, dos, watcom, isr

我需要生成一个远跳转指令来跳转到另一个 ISR（中断服务程序）。我正在开发一个 32 位 FreeDOS 应用程序。

阅读 OW 手册（[cguide.pdf](http://www.openwatcom.org/ftp/manuals/current/cguide.pdf)和[clr.pdf](http://www.openwatcom.org/ftp/manuals/current/clr.pdf)）后，我想出了两种*成功编译的方法，没有任何警告或错误*。

```
 /* Code Snippet #1 */

    #pragma aux old08 aborts ;
    void (__interrupt __far *old08)(void);      // function pointer declaration

    void __interrupt __far new08(void) {

           /* Do some processing here ... */

           (*old08)();  /* OW will now generate a jump inst. instead of call*/
     } 
```

我想出的另一种方法是：

```
 /* Code Snippet #2 */

      static void jumpToOld08(void);         
      # pragma aux jumpToOld08 = \
             ".686p"     \       
             "                DB      0xEA"  \          
             "off_old08       DD      0"     \               
             "sel_old08       DW      0"     ;             

      void __interrupt __far new08(void){

               /* Do some processing here ... */

               jumpToOld08();   
      }

      extern unsigned short sel_old08;
      extern unsigned int off_old08;

      sel_old08 = ( __segment )FP_SEG(old08);
      off_old08 = FP_OFF(old08); 
```

现在我的问题是以上两种方法中哪一种*更正确*或更好？有什么想法或意见吗？

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:39:46.743

`interrupt`功能总是很遥远。

就指令本身而言，您手动构建的远跳转看起来是正确的，但是，我敢打赌，简单地跳转（而不是调用）不会删除之前`new08()`在其序言处保存在堆栈中的东西（这可能是很多寄存器，最重要的是，还有你`old08()`必须返回的返回地址！）。

为什么这么有创意？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:00:41.537

我可能会写这样的东西：

```
void far_jump (uint32_t offset, uint16_t selector)
{
    /* remove the (callee's) stack frame including the return address by manipulating esp & ebp */

    /* the top of the stack now points to offset:selector */

    _asm
    {
        retf    ; or whatever the asm syntax dictates
    }

    /* esp & ebp will now point to the caller's stack frame */
} 
```

我记得 32 位模式将推送和弹出选择器作为 32 位单元，即使只使用低 16 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:51:05.847

```
 #include <dos.h>
    void _chain_intr( void (__interrupt __far *func)(void) ); 
```

该函数可用于*跳转*到链中的另一个中断处理程序。这个函数永远不会返回。它弹出*中断*关键字保存的所有寄存器并跳转到处理程序。当由*func*指定的中断处理程序接收到控制权时，堆栈和寄存器看起来就好像中断刚刚发生一样。

此函数只能在使用*中断*关键字声明的函数中使用。

*跳转*而不是*调用*的优势在 irq 处理程序中并不明显，但对于软件中断处理程序来说绝对是。链中的下一个软件中断处理程序期望 cpu 寄存器包含一些信息，例如传递给它的参数，因此在跳转到下一个处理程序之前，*chainintr* 恢复所有 cpu 寄存器，就好像下一个处理程序直接接收控制一样。

# asp.net - TinyGet 和会话变量

> ID：11538082
> 
> 赞同：1
> 
> 时间：2012-07-18T09:17:40.087
> 
> 标签：asp.net, debugging, iis-6, stress-testing

我正在使用 TinyGet 对网站进行压力测试并监控 W3WC 进程内存。我正在使用的命令如下：

"C:\Program Files\IIS Resources\TinyGet\tinyget.exe" -a:ntlm -m:domainname -u:TestUser -p:TestPassword -srv:localhost -uri:/TestWebsite/TestWebPage.aspx -threads:2 -循环：10

该命令有效。但是，TestWebPage.aspx 是从前一页传递的会话变量。有没有办法在 TinyGet 中模拟会话变量？

# javascript - 在javascript中创建对象（使用new）有什么好处？

> ID：11538085
> 
> 赞同：2
> 
> 时间：2012-07-18T09:17:45.283
> 
> 标签：javascript, functional-programming, functional-testing

这可能是一个维基问题，但仍然如此。哪种方法更符合 Javascript 精神：

```
var Report = function(data) {
    var that = this;
    that.send = function() { ... };
};

var r = new Report(data); // create and validate the data
r.send(); // encode and send the data 
```

或者

```
var sendReport = function(data) {
    ...
    // create, validate, encode and send the data
    ...
}; 
```

第一种方法似乎更OO，第二种更实用？首先，似乎 的功能`Report`更易于测试（尽管例如我们仅`send()`在此阶段具有）。`Report`此外，当需要检查状态时，我喜欢在调试器中查看类型对象。

第二种方法可能更“简单”，但似乎不太可测试。

我个人采用第一种方法，但问题是我是否尝试在“错误”域中应用 OO“原则”（请帮助我更好地表达我的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:26:14.843

您的问题实际上似乎与`new`运营商无关；它更多的是关于您是否应该使用 OO 或函数式编程。

在这方面，OO 完全*属于*JavaScript 的范畴。您可以从 API（[例如](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/) [eg](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/)）中看到 JavaScript 是一种非常面向对象的语言。

HTML5 更进一步，通过向对象添加[新方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object#Methods)，让您可以更好地控制`Object`对象。

谈到使用`new`，以及是否避免使用，我会向您指出[这个出色的答案](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)（并告诉您使用`new`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:51:36.567

`data`我现在看到的方式是，第二个是一个接收和发送它的简单函数。而且您想知道将其创建一个类并将其分解为多个方法是否有利。

所以代替这个：

```
sendReport(data); 
```

你会这样做：

```
var a = new Report(data);
a.send(); 
```

Where`Report`有 2 种用于验证和编码的内部方法。它肯定会更具可测试性，因为它们将是 3 个不同的功能，而不是一个只在一批中完成所有功能的功能。

性能无需考虑，它是 2 个额外的函数调用和 1 个额外的对象创建。您可能不会每秒发送数百万次报告。特别是因为它意味着网络 I/O。

也没有什么需要你构建一个新实例，你也可以这样做：

```
var report = {
    encode: function(){},
    validate: function(){},
    send: function( data ) {
        if( this.validate( data ) ) {
            data = this.encode(data);
        }
        else {
             //?
        }

        //send
    }
} 
```

然后，您无需构建新实例即可获得上述好处：

```
report.send(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:24:52.870

这取决于，但通常您希望在代码较小时使用第二个，并在代码变大时迁移到第一个。让所有东西都面向对象是没有意义的，但是当你拥有作为对象有意义的功能组时，那就是你想要创建对象的时候。

当单个函数做太多时，您的第二个选项只是不太可测试。否则它是非常可测试的，只需改变函数的参数并查看结果即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:42:04.863

当您想要实例化变量的对象时，更多地使用 javascript 对象，当您可以使用 js 的原型并且还允许您覆盖方法和变量时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:56:50.083

正如其他人所建议的那样，我不认为这真的是关于 OO 与功能的。

真正的问题是报告本身是否是一个有用的抽象。如果是——即，如果你想对它执行其他操作而不是立即发送它——那么为它实现一个抽象是有用的。在 OO 中，这将是一个类或等价物（在 JS 中，一个构造函数）。在函数式语言中，您通常会在这种情况下引入模块或抽象数据类型。

如果您不需要抽象，只需使用单个过程/函数。

# ios - 音频单元录制噪音

> ID：11538086
> 
> 赞同：1
> 
> 时间：2012-07-18T09:17:52.033
> 
> 标签：ios, core-audio, audiounit

我昨天一直在努力解决这个问题，非常感谢您的帮助。

我有一个多通道混音器音频单元，分配给每个通道的回调在调用时填充所需的音频缓冲区。我试图通过将数据写入文件来在同一个回调中进行记录。

目前，如果我不调用 AudioUnitRender 并且如果我调用它，音频会记录为噪音，我会收到两个错误。错误 10877 和错误 50。

回调中的录制代码如下所示

```
if (recordingOn) 
{
    AudioBufferList *bufferList = (AudioBufferList *)malloc(sizeof(AudioBuffer));

    SInt16 samples[inNumberFrames]; 
    memset (&samples, 0, sizeof (samples));

    bufferList->mNumberBuffers = 1;
    bufferList->mBuffers[0].mData = samples;
    bufferList->mBuffers[0].mNumberChannels = 2;
    bufferList->mBuffers[0].mDataByteSize = inNumberFrames*sizeof(SInt16);

    OSStatus status;
    status = AudioUnitRender(audioObject.mixerUnit,     
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             bufferList);

    if (noErr != status) {
        printf("AudioUnitRender error: %ld", status); 
        return noErr;
    }

    ExtAudioFileWriteAsync(audioObject.recordingFile, inNumberFrames, bufferList);
} 
```

在每个通道回调中写入数据是否正确，还是应该将其连接到远程 I/O 单元？

我正在使用 LPCM，录制文件 (caf) 的 ASBD 是

```
recordingFormat.mFormatID = kAudioFormatLinearPCM;
recordingFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger |
kAudioFormatFlagIsBigEndian | kAudioFormatFlagIsPacked;
recordingFormat.mSampleRate = 44100;
recordingFormat.mChannelsPerFrame = 2;
recordingFormat.mFramesPerPacket = 1;
recordingFormat.mBytesPerPacket = recordingFormat.mChannelsPerFrame * sizeof (SInt16);
recordingFormat.mBytesPerFrame = recordingFormat.mChannelsPerFrame * sizeof (SInt16);
recordingFormat.mBitsPerChannel = 16; 
```

我不确定我做错了什么。

立体声如何影响在写入文件之前必须处理记录的数据的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:26:35.027

有几个问题。如果您尝试录制最终的“混音”，您可以使用 AudioUnitAddRenderNotify(iounit,callback,file) 在 I/O 单元上添加回调。然后回调简单地获取 ioData 并将其传递给 ExtAudioFileWriteAsync(...)。因此，您也不需要创建任何缓冲区。旁注：在渲染线程中分配内存是不好的。您应该避免渲染回调中的所有系统调用。无法保证这些调用将在音频线程的最后期限内执行。因此为什么有一个 ExtAudioFileWriteAsync，它会考虑到这一点并在另一个线程中写入磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T07:01:17.250

我找到了一个演示代码，可能有用 4 U；

演示网址：[https ://github.com/JNYJdev/AudioUnit](https://github.com/JNYJdev/AudioUnit)

或者

博客：[http ://atastypixel.com/blog/using-remoteio-audio-unit/](http://atastypixel.com/blog/using-remoteio-audio-unit/)

```
static OSStatus recordingCallback(void *inRefCon, 
                          AudioUnitRenderActionFlags *ioActionFlags, 
                          const AudioTimeStamp *inTimeStamp, 
                          UInt32 inBusNumber, 
                          UInt32 inNumberFrames, 
                          AudioBufferList *ioData) {
// Because of the way our audio format (setup below) is chosen:
// we only need 1 buffer, since it is mono
// Samples are 16 bits = 2 bytes.
// 1 frame includes only 1 sample

AudioBuffer buffer;

buffer.mNumberChannels = 1;
buffer.mDataByteSize = inNumberFrames * 2;
buffer.mData = malloc( inNumberFrames * 2 );

// Put buffer in a AudioBufferList
AudioBufferList bufferList;
bufferList.mNumberBuffers = 1;
bufferList.mBuffers[0] = buffer;

// Then:
// Obtain recorded samples

OSStatus status;

status = AudioUnitRender([iosAudio audioUnit], 
                     ioActionFlags, 
                     inTimeStamp, 
                     inBusNumber, 
                     inNumberFrames, 
                     &bufferList);
checkStatus(status);

// Now, we have the samples we just read sitting in buffers in bufferList
// Process the new data
[iosAudio processAudio:&bufferList];

// release the malloc'ed data in the buffer we created earlier
free(bufferList.mBuffers[0].mData);

return noErr;
} 
```

# xml - 只需要对 XML 进行少量更改时使用 XSLT

> ID：11538095
> 
> 赞同：2
> 
> 时间：2012-07-18T09:18:24.257
> 
> 标签：xml, xslt

我有一个大小从 50k 到大约 300k 的 XML，我需要对其进行一些转换。转换包括将一些元素移动到不同的位置以及在不同元素的属性之间进行合并。

据我所知，理想情况下我应该使用 XSLT 来执行这种转换，但我担心它会给我带来大量不必要的工作来构建输出 XSL，因为与完全保持的数据量相比，所需更改的数量可以忽略不计相同。

我的问题：

1.  您是否建议尝试仅使用 DOM 功能（我在 .net 3.5 中工作）和一些 XPATH 来执行此操作？缩小规模是，如果所需更改的数量增加，可能会给代码增加不必要的复杂性。

2.  如果您仍然推荐 XSLT，是否有某种方法可以让我从输入 XML 中复制块，而不是从头开始重新创建它们？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:52:45.177

很好的问题。

当您只想对文档进行非常小的更改时，XSLT 的成本确实很高。如果您想要进行大量迭代转换，则成本尤其明显，这有时会发生在优化用例中，其中每个转换都会创建一个数据集，而该数据集对前一个转换是一个小的改进。

然而，在许多情况下，进行小型转换的成本主要是解析和序列化成本（将词法 XML 转换为树并返回），因此也涉及解析和序列化的其他方法（例如 DOM 更新或 XQuery 更新）是不会更好。因此，在回答您的问题 1 时，我认为使用 DOM 不会更好。实现改进的唯一真正方法是使用 XML 数据库，它允许您避免解析和序列化成本，因为文档现在以树形而不是词法形式永久保存。

关于您的问题 2，是的，您可以使用 xsl:copy-of 原封不动地复制文档块，并且在任何体面的 XSLT 处理器上，这应该非常有效。当然，从源树复制到结果树的成本可能远低于解析构建源树或序列化处理结果树的成本。（当然，实际结果会因 XSLT 处理器而异。）

# gis - 如何在 WMS 或矢量图层上选择特征

> ID：11538101
> 
> 赞同：1
> 
> 时间：2012-07-18T09:18:55.663
> 
> 标签：gis, openlayers, layer, geoserver

我在 WMS 图层上设置了一个矢量图层，我需要在该图层上选择要素并突出显示地图上的要素，而不是通过单击地图，而是通过单击按钮或地图外部的东西。这是代码：

```
regioni = new OpenLayers.Layer.WMS(
            "regioni",
            "http://localhost:8080/geoserver/mmasgis/wms",
            {layers: 'mmasgis:reg2011_g', format: 'image/gif'}
);

select = new OpenLayers.Layer.Vector("Selection", {styleMap:
            new OpenLayers.Style(OpenLayers.Feature.Vector.style["select"])
});

map.addLayers([regioni, select]);

selectionControl = new OpenLayers.Control.GetFeature({
            protocol: OpenLayers.Protocol.WFS.fromWMSLayer(regioni),
            box: true,
            hover: true,
            multipleKey: "shiftKey",
            toggleKey: "ctrlKey"
        });
        selectionControl.events.register("featureselected", this, function(e) {
            select.addFeatures([e.feature]);
        });
        selectionControl.events.register("featureunselected", this, function(e) {
            select.removeFeatures([e.feature]);
        });
map.addControl(selectionControl);
selectionControl.activate(); 
```

使用此代码，我可以通过单击地图来毫无问题地选择要素，但我需要通过单击地图外部的内容来选择要素。主要问题是我必须将一个`OpenLayers.Feature`对象传递给 selectionControl.addFeatures 方法，但我没有那个对象，而只是`fid`WMS 层中包含的信息或一些信息。

我在 tomcat7 上使用 Geoserver & Openlayers。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:37:09.500

我试着做同样的事情，但我做不到。我不确定您的 selectionControl 是否具有 addFeatures 方法/功能。实际上它根本没有任何方法：

[http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Control/GetFeature-js.html](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Control/GetFeature-js.html)

我认为 GetFeature 控件是一个黑盒子，我们不能以编程方式添加新的选定功能。您可以根据需要修改源代码。

我将这样做： - 拦截 onclick 事件 - 从鼠标的 x 和 y 获取 lon/lat - 使用 WMS 的 GetFeature 函数从 GeoServer 获取特征 - 将它们添加到选择层

我这还没完呢。从 WMS 通过 ID 获取特征的代码示例：

```
function preSelect(fID) {

    var processResponse = function (resp) {
            console.log(resp);
            console.log(resp.error);
            var data = resp.responseText;               
            var geojson_format = new OpenLayers.Format.GeoJSON();
            var features = geojson_format.read(data,null,null);
            select.addFeatures(features);
    };

    OpenLayers.Request.issue({
        url: 'http://localhost:8080/geoserver/wfs',
        method: 'GET',
        params: {
            service: 'WFS',
            version: '2.0.0',
            request: 'GetFeature',
            typeName: 'ESD:LLSOA',
            outputFormat:'json',
            featureID: fID,                             
        },
        callback: processResponse
    });
} 
```

我认为你可以用 bbox 参数替换 featureID 。或者，WMS 具有类似的 GetFeatureInfo 函数，它接受 x 和 y。在这两种情况下，坐标都必须与基础层位于同一投影中。

此外，我对 WFS GetFeature 方法的准确性有疑问。同样的问题在这里解释：

[http://osgeo-org.1560.x6.nabble.com/Problems-with-WFS-GetFeature-Bounding-Box-low-accuracy-td3799986.html](http://osgeo-org.1560.x6.nabble.com/Problems-with-WFS-GetFeature-Bounding-Box-low-accuracy-td3799986.html)

# c#-4.0 - 如何在 SQL 中保存 OpenXML Word.docx 以进行自由文本搜索（C#）

> ID：11538108
> 
> 赞同：1
> 
> 时间：2012-07-18T09:19:20.293
> 
> 标签：c#-4.0, ms-word, openxml-sdk, sql-server-openxml

请任何人帮助我将我的 Word.docx (OpenXML) 文档保存在 SQL Server (C#) 中。在我的场景中，我必须在 SQL 中对该文档进行自由文本搜索。我已使我的 sql 表可索引，但不知道如何在该表中插入该 OpenXML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:46:31.507

伙计们，我已经成功了。对于那些正在经历类似情况的人，从 FileStream 中获取所有字节并将其保存到数据库（SQL Server）中的 varbinary 类型列。要进行自由文本搜索，您需要使您的表可索引。网上有很多东西可用，或者只是谷歌 SQL“自由文本搜索”。请记住，如果您使用的是 SQL 2008，则需要为您的 SQL Management Studio 安装“Filter Pack”，因为默认情况下 SQL 2008 中没有 .docx 等扩展名。可以从以下链接下载。只需按照过滤器包安装说明 [http://support.microsoft.com/kb/945934](http://support.microsoft.com/kb/945934)

安装过滤器包后，如果您运行“select * from sys.fulltext_document_types”，将返回所有可用的过滤器。从这里您可以确认您的 Management Studio 支持所需的过滤器扩展。现在您可以编写自由文本搜索查询。问候！

# asp.net - 不使用 ApiController 的 Web API

> ID：11538111
> 
> 赞同：0
> 
> 时间：2012-07-18T09:19:28.427
> 
> 标签：asp.net, asp.net-web-api, wcf-web-api

我想使用新的 MS Web API 而不必继承`ApiController`

理想情况下，我想创建单独的类，只处理一个 HTTP 方法和路由。例如：

```
// Handles GET /customer/1
public class GetCustomerHandler
{
    public object Handle(int id)
    {
        return ...;
    }
}

// Handles PUT /customer/1
public class PutCustomerHandler
{
    public object Handle(NewCustomerForm form)
    {
        return ...;
    }
} 
```

我想`System.Web.Http`有很多扩展点来允许这种方法，但我找不到合适的文档。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:37:52.067

这不是预期的使用方法`ApiController`。

我建议，如果你需要这样做，你可以在正常的路由/动作选择之上构建它。我的意思是你可以有一个控制器来调用其他类来实现这种实现。使用功能方法的一个这样的原型可能如下：

```
public abstract class HubController<T>
{

    private Func<int, object> _getHandler;
    private Func<T, object> _putHandler;

    public HubController(Func<int, object> getHandler, Func<T, object> putHandler
        // ... delete and post handlers too
        )
    {
        _putHandler = putHandler;
        _getHandler = getHandler;
    }

    public object Get(int id)
    {
        return _getHandler(id);
    }

    public object Put(T t)
    {
        return _putHandler(t);
    }

    // ... also Post and Delete
}

public class CustomerControler : HubController<Customer>
{
    public CustomerControler(Func<int, object> getHandler, Func<Customer, object> putHandler) : base(getHandler, putHandler)
    {
    }
} 
```

委托可能只是委托或接口的实现，尽管我更喜欢委托，因为**“单一方法的接口是委托”**。

# jsp - 通过 h:commandLink 检索 f:param 设置的 jsp 页面中的参数

> ID：11538115
> 
> 赞同：0
> 
> 时间：2012-07-18T09:19:45.537
> 
> 标签：jsp, jsf

我正在使用 JSF 1.2 。我正在设置如下参数，

```
<h:commandLink id="sendParam" action="#{myBean.redirectToLogin}" >
   <f:param name="userData" value="#{myBean.msg}"></f:param>
</h:commandLink> 
```

我想在其他 Web 应用程序中的 JSP 页面中检索参数 (userData)。我正在从编写上述代码的 Web 应用程序中访问该 JSP 页面（可以说是 myJSP.jsp）。代码如下，

```
String link = http://myDomain/myJSP.jsp
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
externalContext.redirect(link.trim()); 
```

最重要的是：当 JSP 页面被点击时，将创建一个新的会话 ID。（这是因为我的 Web 应用程序中的一些其他要求）

我试图通过在 myJSP.jsp 中使用以下代码来检索参数。

```
String requestmsg = (String) req.getParameter("userData"); 
```

但是，这始终为空。

1.  我对 f:param 如何工作的理解正确吗？我的意思是，我们可以在某些 jsp 页面中检索参数，例如尝试的方式吗？

2.  如果是这样，如果创建新会话，参数值是否会丢失？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:24:43.050

重定向基本上指示网络浏览器发送全新的 HTTP 请求。原始 JSF 请求中的请求参数在该新 JSP 请求中不再可用。您还需要在新请求中显式传递原始请求参数。

```
String userData = externalContext.getRequestParameterMap().get("userData");
String link = "http://myDomain/myJSP.jsp?userData=" + URLEncoder.encode(userData, "UTF-8");
externalContext.redirect(link); 
```

# qt - 在 QTableWidget 中显示工具提示

> ID：11538116
> 
> 赞同：5
> 
> 时间：2012-07-18T09:19:51.137
> 
> 标签：qt

我的 Qt 应用程序中有一个 QTableWidget。我在表格小部件的单元格中设置了 QTableWidgetItem 。当用户将鼠标悬停在表格的单元格上时，我需要显示工具提示。我已经在我的类中覆盖了 mouseMoveEvent() 并且我正在调用工具提示的方法来显示它。但它不起作用。我还将小部件的鼠标跟踪设置为 true。以下是我的代码：

```
void TableDialog::mouseMoveEvent(QMouseEvent *event)
{
    QPoint pos = event->pos();
    QTableWidgetItem *item = ui.tableWidget->itemAt(pos);
    if(!item)
        return;
    QToolTip::showText(ui.tableWidget->viewport()->mapToGlobal(pos), "Sample tool tip using mouseMoveEvent in TableDialog class");
} 
```

我在这里错过了什么吗？请让我知道如何显示此工具提示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T09:39:52.493

您只需使用[QTableWidgetItem::setToolTip()](http://doc.qt.io/qt-5/qtablewidgetitem.html#setToolTip)为每个 QTableWidgetItem 设置一个工具提示。当您创建小部件项目并设置其名称时，这样做可能是一个好主意。然后当用户将鼠标移到项目上时，QTableWidget 将显示项目的工具提示。

如果切换到基于模型的数据视图，则必须从 Model::data() 返回工具提示，角色 = Qt::ToolTipRole。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:39:41.777

添加一些调试输出以查看何时调用 mouseMoveEvent。很可能是`QTableWidget`接收 mouseMoveEvents 而不是您的`TableDialog`

# java - 使用 PHP 中的 Java/.Net api

> ID：11538118
> 
> 赞同：0
> 
> 时间：2012-07-18T09:20:12.643
> 
> 标签：java, php, .net

我在我的 PHP 代码中集成了 Forex GainCapital API。但是这些 API 仅在 Java 和 .Net 中可用（我都不知道它们）。这是链接[http://api.efxnow.com/DEMOWebServices2.8/Service.asmx](http://api.efxnow.com/DEMOWebServices2.8/Service.asmx)。那么，有什么方法可以从 PHP 的 .Net 或 Java API 获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:22:03.767

你试过[PHP/Java 桥吗？](http://php-java-bridge.sourceforge.net/pjb/)

> PHP/Java Bridge 是流式、基于 XML 的网络协议的实现，可用于将原生脚本引擎（例如 PHP、Scheme 或 Python）与 Java 虚拟机连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:45:40.307

通过查看您发布的链接，这些似乎是 SOAP Web 服务。

因此，您并没有真正使用实际的 API（实际的类），而是通过 HTTP 调用服务。

在 php 中，您可以使用[SoapClient](http://php.net/manual/en/class.soapclient.php)。

# android - 在滚动列表视图时加载内容而不中断列表视图

> ID：11538119
> 
> 赞同：0
> 
> 时间：2012-07-18T09:20:14.630
> 
> 标签：android, listview, scrollbar

我正在 Listview 上开发一个应用程序。我的应用程序应该如下所示：当我在第 10 个位置滚动列表视图时，它应该第一次显示 10 个元素，它应该开始加载接下来的 10 个项目，依此类推。在加载接下来的 10 个项目时，我应该与之前的列表视图项目进行交互。我不希望在加载时出现进度对话框。我已经做了所有事情，但在加载 listview 数据时遇到了问题。当列表视图开始加载项目时，我的列表视图挂起。它既不向上也不向下，如果我快速滚动它会显示强制关闭对话框。

谁能帮我解决这个问题？？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:02:49.697

太复杂，无法理解您的代码。

但这里有一些可以帮助你的提示。

*   在您的适配器中，它们应该是这样的方法

    ```
    public void setList(List<YouCoustemClass> list) {
                    if (list != null && list.size() > 0) {
                        items.clear();
                        items.addAll(list);
                        notifyDataSetChanged();
                    }
                } 
    ```

    *   你的`OnScroll`方法会是这样的

    int lastInScreen = firstVisibleItem + visibleItemCount;

    ```
     if ((lastInScreen == totalItemCount) && (loadingMore)) {
                             adapter.notifyDataSetChanged();
                        }
                        if ((lastInScreen == totalItemCount) && !(loadingMore))` 
    ```

这里添加了一个额外`check`的内容，就像您开始下载一样，不要一次又一次地开始它。make`true`在你的`AsyncTask's onPreExecute`并且`false`在`onPostExecute`.

*   现在，当您的下载完成时，然后在您以前的列表中添加新数据，而不是并排..使用方法`setList`。这就是您面临的崩溃的原因`Scroll`。您在列表中添加数据但没有调用`notifyDataSetChanged();`
*   还有一件事你的第一个电话是在 UI 线程上..？也将该请求移入`Thread`

# javascript - ckeditor 更改为段落元素生成的输出

> ID：11538120
> 
> 赞同：2
> 
> 时间：2012-07-18T09:20:17.797
> 
> 标签：javascript, html, css, ckeditor, wysiwyg

我们的应用程序使用 ckeditor 生成用户友好的电子邮件内容以向客户发送电子邮件。电子邮件内容是由商务人士准备的，因此他们根本不知道任何 html。

所以我希望 ckeditor 自动将内联样式添加到段落（`<p>`元素）中，`<p style="line-height:20px;">`而不是仅仅生成`<p>`.

由于生成的输出是通过电子邮件发送的，我没有任何机会使用 CSS 文件。我试图在其中包装`<p>`元素，`<table>`但我无法以这种方式更改“ **line-height** ”属性，因为像 gmail、yahoo 这样的电子邮件网站已经有自己的`<p>`元素样式。我必须为我认为的每个`<p>`元素使用内联样式，我不知道如何实现这一点。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:31:23.100

没有设置或快速代码修改来执行此操作。

这里有两种方法。

**如果您想惹恼您的用户这样做（请参阅 AlfonsoML 的评论）：**
如果您希望`<p>`在编辑器中更新内容时灵活地做更多的样式，最好的方法可能是使用“onchange”插件由@AlfonsoML 创建。你可以在这里下载它：
[CKEditor 的 onChange 事件](http://alfonsoml.blogspot.com/2011/03/onchange-event-for-ckeditor.html)

他在这里演示了如何使用它来显示另一个编辑器的内容`<div>`：
[pass Ckeditor value to div text without html tags?](https://stackoverflow.com/a/10371207/751619)

* * *

安装插件后，您可以执行以下操作：

```
CKEDITOR.on('instanceCreated', function (e) {
    e.editor.on('change', function () {
        var editorContent = CKEDITOR.instances['TextAreaID'].getData();
        editorContent.replace('<p>', '<p style="line-height:20px;">');
        CKEDITOR.instances['TextAreaID'].setData(editorContent);
    });
}); 
```

* * *

**更好的方法：**
如果您只想进行`<p>`样式设置并希望避免每次内容更改时运行该函数的开销，您可以加载样式表以`<p>`使用此配置设置将样式应用于编辑器中的元素：

```
config.contentsCss = '/css/mysitestyles.css'; 
```

然后`onsubmit`在您的表单中使用一个函数。像这样的东西：

```
<form name="ff" id="ff" action="xx" method="POST" onsubmit="return doSubmit();"> 
```

功能：

```
function doSubmit() {
    var emailContent = $('textarea#TextAreaID').val();        
    emailContent.replace('<p>', '<p style="line-height:20px;">');
    $('textarea#TextAreaID').val(editorContent);
}; 
```

# java - 为 Android 设备优化的 UniqueID

> ID：11538123
> 
> 赞同：2
> 
> 时间：2012-07-18T09:20:23.543
> 
> 标签：java, android

我正在尝试为 android 手机和平板电脑生成一个唯一的 id。我发现了一个有趣的功能，但在我全新的 Galaxy Tab 2 中它不起作用。这是我的功能：

```
public String generateId(TelephonyManager tm, ContentResolver resolver) {
    final String tmDevice, tmSerial, androidId;
    tmDevice  = "" + tm.getDeviceId();
    tmSerial  = "" + tm.getSimSerialNumber();
    androidId = "" + Secure.getString(resolver, Secure.ANDROID_ID);
    UUID deviceUuid = new UUID(androidId.hashCode(), ((long)tmDevice.hashCode() << 32) | tmSerial.hashCode());
    return deviceUuid.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:25:34.440

我只是使用手机的毫秒时间戳，将其转换为字符串并附加 0 到 10000 之间随机数的十六进制表示（并在应用程序第一次运行时生成它+将其存储在共享首选项中）。例如：1342603520897_1bf

如果您预计每毫秒有数千次安装，这是行不通的。如果没有，那很好。

此解决方案的缺点是它不会在安装过程中保持不变，但它确实为您提供了一个匿名 ID，这可能是一个加号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:39:35.023

尝试：`String secureId = Secure.ANDROID_ID;` 更多：http: [//developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)

它是一个 64 位哈希分配给设备的生命周期（或出厂重置、新 ROM 等）。

- 编辑 -

```
// usage:
Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID)); 
```

-- 编辑2 --

```
String id = Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID));
if(id==null || id=="9774d56d682e549c") { // emulator id
    WifiManager wm = (WifiManager)Ctxt.getSystemService(Context.WIFI_SERVICE);
    id = wm.getConnectionInfo().getMacAddress();
} 
```

-- 编辑3 --

这是谷歌自己[提出的解决方案。](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)换句话说，在应用程序首次运行时生成哈希并将其永久存储:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:34:00.860

好的，这是一个可行的解决方案。不像前一个那么优雅......但它确实有效。

```
public String generateId(TelephonyManager tm, WifiInfo wi, ContentResolver resolver) {
    String m_szImei = "";
    String m_szDevIDShort = "";
    String m_szAndroidID = "";
    String m_szSim = "";
    String uniqueId = "";
    //imei
    try {
        m_szImei = tm!=null ? tm.getDeviceId() : "";
    } catch(Exception e) {}
    //sim
    try {
        m_szSim = tm!=null && new Checker().isSim(tm) ? tm.getSimSerialNumber() : wi!=null ? wi.getMacAddress() : "";
    } catch(Exception e) {}
    //"fake" imei for tablets
    try {
        m_szDevIDShort = "35" + //we make this look like a valid IMEI
            Build.BOARD.length()%10+ Build.BRAND.length()%10 +
            Build.CPU_ABI.length()%10 + Build.DEVICE.length()%10 +
            Build.DISPLAY.length()%10 + Build.HOST.length()%10 +
            Build.ID.length()%10 + Build.MANUFACTURER.length()%10 +
            Build.MODEL.length()%10 + Build.PRODUCT.length()%10 +
            Build.TAGS.length()%10 + Build.TYPE.length()%10 +
            Build.USER.length()%10 ; //13 digits
    } catch(Exception e) {}
    //android id (may be null)
    m_szAndroidID = Secure.getString(resolver, Secure.ANDROID_ID);
    //unique id
    try {
        uniqueId = SHA256.compute(m_szImei+m_szSim+m_szDevIDShort+m_szAndroidID);
    } catch (Exception e) {}
    return uniqueId;
} 
```

# c++ - 是否可以保证带有 UB 的代码是否可以访问？

> ID：11538124
> 
> 赞同：6
> 
> 时间：2012-07-18T09:20:26.107
> 
> 标签：c++, visual-c++, compiler-optimization, undefined-behavior

[我有一个来自这里](http://blog.regehr.org/archives/232)的代码片段：

```
volatile int volatileInt;
int usualInt;

void function (unsigned x, unsigned y, unsigned z)
{
    volatileInt = 0;
    usualInt = (x % y) / z;
}

int main()
{
    function(rand(), rand(), rand());
} 
```

我用 Visual C++ 10 编译`/O2`并得到这个反汇编：

```
00403940  push        ebx  
00403941  push        esi  
   276:     function(rand(), rand(), rand());
00403942  mov         esi,dword ptr [__imp__rand (4050C0h)]  
00403948  push        edi  
00403949  call        esi  
0040394B  mov         edi,eax  
0040394D  call        esi  
0040394F  mov         ebx,eax  
00403951  call        esi  
00403953  xor         edx,edx  
00403955  div         eax,ebx  <<<< possible UB
00403957  mov         dword ptr [volatileInt (4074D0h)],0  
00403961  mov         eax,edx  
00403963  xor         edx,edx  
00403965  div         eax,edi  <<<< possible UB
00403967  pop         edi  
00403968  pop         esi  
00403969  pop         ebx  
0040396A  mov         dword ptr [usualInt (4074CCh)],eax  
   277:     return 0;
0040396F  xor         eax,eax
00403971  ret 
```

请注意，如果它们的第二个操作数在运行时为零，则有两个操作 - “mod”和“div”可能会产生 UB。在发出的代码中，两者都使用操作码实现，这些`div`操作码将触发结构化异常并使程序崩溃，第二个操作数为零。

第一个`div`是在`volatile int`变量修改之前，第二个是在`volatile int`修改之后。

因此，如果`x`为零，则程序在不修改的情况下崩溃，`volatile int`但如果`x`为非零且`y`为零，则程序修改`volatile int`然后崩溃。

因此，根据是否`x`为零`y`，程序将表现出不同的可观察行为。

是否允许将代码与可能的 UB 与影响可观察行为的代码交错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:37:51.127

是的，这个实现是允许的。见 1.9/5：

> 执行格式良好的程序的一致实现应产生与具有相同程序和相同输入的抽象机的相应实例的可能执行之一相同的可观察行为。但是，如果任何此类执行包含未定义的操作，则本国际标准对使用该输入执行该程序的实现没有要求（*甚至不考虑第一个未定义操作之前的操作*）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T09:28:37.073

我认为第 1.9:4 条在这里是相关的：

> 本国际标准中将某些其他操作描述为未定义的（例如，尝试修改 const 对象的效果）。[注：本国际标准对包含未定义行为的程序的行为没有要求。——尾注]

据我了解，这意味着如果程序执行*最终*导致未定义的行为，那么程序的*整个*可观察行为都是未定义的。

# spring - 当使用 spring 自动装配时，struts 标签不与动作类映射

> ID：11538128
> 
> 赞同：2
> 
> 时间：2012-07-18T09:20:48.437
> 
> 标签：spring, struts2

当我将自动装配拦截器（interceptor-ref name="autowiring"）放入 spring.xml 中的操作标记时，index.jsp 中的 struts 标记无法与该操作类的设置器映射。当我从动作标签中删除该自动装配标签时，在这种情况下，jsp的struts标签确实能够与动作类的设置器映射。

您的任何帮助都将受到欢迎。如果您需要任何示例，请告诉我。

```
<s:textfield name="name" label="Name" />
<s:textfield name="salary" label="Salary" />
<s:submit value="Add Record" /> 
```

那么这个名为'name'和'salary'的struts标签不会在动作类中设置值，用相同的setter/getter名称表示。

```
public void setName(String name) {
    this.name = name;
}

public void setSalary(String salary) {
    this.salary = salary;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:58:53.120

如果你在一个动作上定义一个拦截器，你必须在一个动作上定义*所有*的拦截器。如果您的参数没有被设置，那么无论“自动装配”拦截器引用不包括“参数”堆栈，拦截器负责将表单属性传输到操作。

Umesh 是正确的，如果您使用的是 Spring，插件会为您处理注入，并且您不需要在您的操作上手动定义“自动装配”插件。如果您只是删除该拦截器定义，则您的参数应设置为正常，并且该操作仍应连接。

也就是说——在操作中手动使用会话工厂不会被认为是最佳实践。任何会话工厂逻辑都应该包含在您的 DAO/服务/等中。操作应该很少（阅读：从不）知道持久层。

# objective-c - 使用 NSStepper 设置上限值而不是递增值

> ID：11538129
> 
> 赞同：0
> 
> 时间：2012-07-18T09:20:50.240
> 
> 标签：objective-c, cocoa

我正在使用 a`NSStepper`和 a `NSTextField`。用户可以使用文本字段设置值，也可以使用 NSStepper 更改值。我将使用下面的示例引用我的问题：
假设我的步进器的当前值为 4，步进器的增量值为 2： ![在此处输入图像描述](../Images/dd9bc3acd7043bff91b5efcb65db7cda.png)

在我单击 NSStepper 上的向上箭头后，值变为：
![在此处输入图像描述](../Images/3b3a872306069043f8e21cdc12d6958c.png)

现在假设当前值为 4.5，即：
![在此处输入图像描述](../Images/6f732d9f0f7812bb6863dcb867e29804.png)

使用向上箭头后，值变为：
![在此处输入图像描述](../Images/b3b473578c6a80ea99ab68ee027b0bc8.png)

我需要的是，当当前值为 4.5 时，使用向上箭头后，值变为**6**而不是 6.5

非常感谢任何实现这一目标的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:33:26.683

> 我需要的是，当当前值为 4.5 时，使用向上箭头后，值变为 6 而不是 6.5

很难确切地说出您在问什么，但要猜测一下：听起来您想删除数字的小数部分并按您定义的步长增加 (2)。您可以通过该`floor()`功能执行此操作。[有关其他 Objective-C 数学函数的信息，请参见此处](http://www.touch-code-magazine.com/objective-c-math-functions/)

> double floor ( double ) - 删除参数的小数部分

```
NSLog(@"res: %.f", floor(3.000000000001)); 
//result 3 
NSLog(@"res:%.f", floor(3.9999999));
//result 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:19:47.860

如果我理解您想要什么，此代码将为您提供下一个偶数（向上或向下取决于您单击的箭头），但仍允许您在文本字段中输入非整数数字。tf 和 stepper 是 IBOutlets 并且 num 是一个属性（浮点数），它在单击箭头之前跟踪步进器的值，以便您可以与新数字进行比较以查看是否单击了向上或向下箭头。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    self.num = 0;
    self.tf.intValue = 0; //the stepper is set to 0 in IB
}

-(IBAction)textFieldDidChange:(id)sender {
    self.num = self.stepper.floatValue = [sender floatValue];
}

-(IBAction)stepperDidChange:(id)sender {
    if (self.num < self.stepper.floatValue) { //determines whether the up or down arrow was clicked
        self.num = self.stepper.intValue = self.tf.intValue = [self nextLargerEven:self.num];
    }else{
        self.num = self.stepper.intValue = self.tf.intValue =[self nextSmallerEven:self.num];
    }
}

-(int)nextLargerEven:(float) previousValue {
    if ((int)previousValue % 2 == 0) {
        return (int)previousValue + 2;
    }else
        return (int)previousValue + 1;
}

-(int)nextSmallerEven:(float) previousValue {
    if ((int)previousValue % 2 == 0) {
        if ((int)previousValue == previousValue) {
            return (int)previousValue - 2;
        }else{
            return (int)previousValue;
        }
    }else
        return (int)previousValue - 1; 
} 
```

# eclipse - 配置 Eclipse 目标平台的最佳方式？

> ID：11538130
> 
> 赞同：0
> 
> 时间：2012-07-18T09:20:54.680
> 
> 标签：eclipse, eclipse-rcp, target-platform

配置目标平台以开发 Eclipse RCP 应用程序的最佳方法是什么？下载**“纯”Eclipse**并在项目中只添加需要的插件，还是下载**Eclipse 以供 RCP 和 RAP 开发人员使用**？添加插件的更好解决方案是什么？打开 Eclipse-TP 并从 eclipse-marketplace 下载或手动将 jar 复制到适当的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:30:09.060

这取决于您的 RCP 应用程序所依赖的插件集。

*   “RCP SDK”提供了一个最小的目标平台，带有源代码。
*   “Platform SDK”提供了更多的插件，附有源代码。它包含比 RCP SDK 更多的插件，但不包含面向开发人员的 Eclipse IDE 插件。*不幸的是，目前没有提供这个平台。*
*   “平台运行时二进制”提供与平台 SDK 相同的东西——没有源代码。

如果要在多个平台上发布，还请下载 DeltaPack，其中包含针对多个平台的平台特定资源。

顺便说一句，如果您要将目标平台添加到版本控制中，请在 plugins/*/META-INF 中为以下文件使用二进制类型：

*   eclipse.inf -- 行尾应该是 NL
*   MANIFEST.MF、ECLIPSE_.SF 和 ECLIPSEF.SF（注意拼写）——行尾应该是 CR/NL

# c++ - c++中的多线程应用程序和OpenCV？

> ID：11538131
> 
> 赞同：1
> 
> 时间：2012-07-18T09:20:55.567
> 
> 标签：c++, multithreading, boost, opencv

基本上我需要构建一个应用程序，其中主进程根据一些全局变量的值进行一些操作，辅助线程更新这个全局变量（比如每 100 毫秒）

你建议使用什么库来使用 opencv、c++ 和多线程？（视窗）

我听说有

*   开放式MP
*   促进
*   英特尔待定

对于这个简单的多线程应用程序，您建议使用哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:35:04.337

C++ 自其最新标准以来就支持线程。如果您可以选择 C++11，我会考虑使用`std::thread`标准库。[例如，您可以在此处](http://en.cppreference.com/w/cpp/thread)找到文档。

在我看来，语法非常简单易读（查看几个示例：[mutex](http://en.cppreference.com/w/cpp/thread/mutex)、[future](http://en.cppreference.com/w/cpp/thread/future)等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:24:51.977

您可以将 OpenMP 用于线程。你有用于计算机视觉的 OpenCV。使用 OpenMP。[这是](https://computing.llnl.gov/tutorials/openMP/)文档。希望能帮助到你。：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T12:41:16.193

我建议使用 boost 库，因为它拥有庞大的社区，您会找到所有可能的解决方案和示例代码。在 Boost Threads 中，变量传递比以往任何时候都容易。但是，c++11 具有与 boost 相似的线程功能，但您需要检查 c++ 11 的可用性。因此，如果您已经为其他功能安装了 boost，请使用 boost。其他 c++ 线程是您的出路。

# android - 我如何让我的 ShareActionProvider 动态提交文本（来自听众）查看寻呼机等

> ID：11538136
> 
> 赞同：6
> 
> 时间：2012-07-18T09:21:09.763
> 
> 标签：android, android-4.0-ice-cream-sandwich, actionbarsherlock, shareactionprovider

我正在使用Sherlock Library Action Bar，它类似于ICS操作栏，我卡住的地方是这个

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Save")
    .setIcon(R.drawable.ic_compose).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    menu.add("Search")
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    SubMenu sub = menu.addSubMenu("Options");
    sub.add(0, SubMenu.NONE, 0, "First");
    sub.add(0,SubMenu.NONE, 1, "Second");
    sub.add(0, SubMenu.NONE, 2, "Three");
    sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    // HERE IS WHere I AM FACING PROBLEM IN
    getSupportMenuInflater().inflate(R.menu.share_action_provider, menu);
    // Set file with share history to the provider and set the share intent.
    actionItem = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    actionProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME); //this is BRILLIANT WAY TO AVOID REPEATation
    actionProvider.setShareIntent(createShareIntent());

    return super.onCreateOptionsMenu(menu);
}

private Intent createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("text/plain");

    //THIS TEXT IS WHAT I WANT TO OBTAIN DYNAMICALLY
    shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Something goes here");
    return shareIntent;
} 
```

每当我尝试将`actionProvider.setShareIntent(createShareIntent());`听众或其他任何地方放在`actionProvider.setShareIntent(createShareIntent());`我得到的`D/View(11753): onTouchEvent: viewFlags is DISABLED`

我希望包含此共享操作提供程序，并希望输入我自己在用户输入时生成的文本。

欢迎任何意见。

添加这个不起作用

```
 actionItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            Log.e("THIS IS NEVER CALLED", "??");
            return true;
        }
    }); 
```

如何获取单击的“共享”按钮的更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-01T16:13:14.220

I hit a similar issue with a android.support.v7.app.ActionBarActivity derivative (though I think this approach should work for any activity) and I overrode onPrepareOptionsMenu and got the effect you were after:

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    if (actionProvider != null) {
        actionProvider.setShareIntent(createShareIntent());
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T15:56:19.463

我使用这样的菜单：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.your_share_button_name:
        share();
        return true;

    }
}

    private void share() {
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,
            "your text");
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "your subject");
    startActivity(Intent.createChooser(sharingIntent, "Share using"));
} 
```

就这样。我建议您将菜单的所有布局放在 res/menu 文件夹中的 xml 中。

# iphone - 在 iphone 的 xmpp 聊天中输入指示

> ID：11538141
> 
> 赞同：1
> 
> 时间：2012-07-18T09:21:30.457
> 
> 标签：iphone, xmpp, chat

我正在使用 XMPP 开发聊天应用程序。我的问题是，我想发送聊天通知。我尝试了休闲方式，但没有正确。

```
- (void)sendMessage:(id)sender
{   

    NSString *messageStr =messageField.text;
    if([messageStr length] > 0)
    {

         NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
         NSXMLElement *chatStatus=[NSXMLElement elementWithName:@"composing" xmlns:xmlns_chatstates];

        [body setStringValue:messageStr];
         NSXMLElement *message = [NSXMLElement elementWithName:@"message"];
        [message addAttributeWithName:@"type" stringValue:@"chat"];
        [message addAttributeWithName:@"to" stringValue:jidString];

        [message addChild:chatStatus];
        [message addChild:body];

        [[self xmppStream] sendElement:message];
    }
} 
```

我正在使用上述方法发送消息。但即使我没有输入，它也总是显示输入通知。任何人都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:58:11.933

根据[XEP-0085: Chat State Notifications](http://xmpp.org/extensions/xep-0085.html)，您应该发送另一个通知说您已停止输入，例如`<active/>`或`<paused/>`。

# php - PHP：排序数组输出但随机化相同的值

> ID：11538146
> 
> 赞同：1
> 
> 时间：2012-07-18T09:21:50.053
> 
> 标签：php, arrays

得到这个的最好/最简单的方法是什么：

我有的：

```
array('100', '100', '100', '80', '70', '70', '50', '45'); 
```

输出应该是什么样子：

```
100 (random order)
100 (random order)
100 (random order)
80
70 (random order)
70 (random order)
50
45 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:52:57.157

您必须使用 usort 或 uasort （uasort 保留数组的键）。使用 PHP 5.3，您可以这样做：

```
shuffle($array); // randomize

uasort($array, function($a, $b){
    if($a === $b) {
        return rand(0, 1);
    }
    return $a < $b;
}); 
```

您可能必须先命名函数，例如 php 文档显示[http://www.php.net/manual/fr/function.uasort.php](http://www.php.net/manual/fr/function.uasort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:46:37.580

You can use usort (http://www.php.net/manual/en/function.usort.php) or uksort depending on your requirements. You can then choose to randomly return a positive or negative number if the values are equal.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:48:32.993

Try something like this: [http://codepad.org/SzSeUM4u](http://codepad.org/SzSeUM4u)

Based on the aasort from: [Sort Multi-dimensional Array by Value](https://stackoverflow.com/questions/2699086/php-sort-multidimensional-array-by-value)

# java - OpenJPA native query how to use IN operator with a list

> ID：11538149
> 
> 赞同：0
> 
> 时间：2012-07-18T09:21:58.493
> 
> 标签：java, openjpa

I use OpenJPA 2.1 on WebSphere Application Server with a MySQL 5 DB.

I have a list of dates and want to use the IN operator to get only the entries from DB where the date in DB is also in the list.

```
List<Date> dates = new LinkedList<Date>();
dates.add(somedates); 
```

My query looks like this:

```
 List<Object> list = em
    .createNativeQuery(
        "SELECT w.date FROM week_table w WHERE w.date IN ?1")
        .setParameter(1, dates).getResultList(); 
```

But I get an ArgumentException: org.apache.openjpa.persistence.argumentexception the specified parameter of type is not a valid query parameter

```
Exception in thread "main" <openjpa-2.1.1-SNAPSHOT-r422266:1141200 nonfatal user error> org.apache.openjpa.persistence.ArgumentException:org.apache.openjpa.persistence.argumentexception the specified parameter of type "class java.util.LinkedList" is not a valid query parameter.
    at org.apache.openjpa.jdbc.sql.DBDictionary.setUnknown(DBDictionary.java:1426)
    at org.apache.openjpa.jdbc.kernel.SQLStoreQuery$SQLExecutor.executeQuery(SQLStoreQuery.java:218)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:863)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:794)
    at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)
    at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:315)
    at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:331) 
```

So how can I pass a List or the List Values into my query?

Best Regards Veote

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:07:09.427

Try using a JPQL (non native) query?

# iphone - iPhone4 SecItemCopyMatching 重启后返回-25300

> ID：11538150
> 
> 赞同：2
> 
> 时间：2012-07-18T09:21:59.513
> 
> 标签：iphone, security, ios5

我的方法：

```
+(SecKeyRef)getKeyByTagWithoutAlert:(NSString *)keyTag status:(OSStatus *) status{
    *status = noErr;
    SecKeyRef key = NULL;

    NSMutableDictionary *queryKey = [[NSMutableDictionary alloc] init];

    // Set the key query dictionary.
    [queryKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
    [queryKey setObject:[SecKeyUtility getDataByTag:keyTag] forKey:(id)kSecAttrApplicationTag];
    [queryKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [queryKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnRef];

    *status = SecItemCopyMatching((CFDictionaryRef)queryKey, (CFTypeRef *)&key);

    [queryKey release];
    return key;
} 
```

它工作正常，直到我重新启动我的 iPhone4。在此 SecItemCopyMatching 返回错误代码 -25300 之后，我的应用程序停止正常工作。在 iPhone3 上我没有这个问题，只是工作完美。你能帮助我吗？

*对不起我的英语不好。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:28:37.487

错误`25300`是`errSecItemNotFound`，这意味着您的钥匙链中没有这样的项目。

# iphone - 是否可以确定内存警告的级别？

> ID：11538154
> 
> 赞同：0
> 
> 时间：2012-07-18T09:22:06.057
> 
> 标签：iphone, ios, memory-management, ios4

我在 didReceiveMemoryWarning 中收到内存警告。我知道内存警告有不同的级别，例如 level-1、level-2。有没有办法确定警告级别？例子：

```
if(warning level == 1)
    <blah> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:41:06.993

希望这可以帮助！！！

有 4 个级别的警告（0 到 3）。这些是从内核内存观察器设置的，可以通过不那么公开的函数 OSMemoryNotificationCurrentLevel() 获得。

```
typedef enum {
    OSMemoryNotificationLevelAny      = -1,
    OSMemoryNotificationLevelNormal   =  0,
    OSMemoryNotificationLevelWarning  =  1,
    OSMemoryNotificationLevelUrgent   =  2,
    OSMemoryNotificationLevelCritical =  3
} OSMemoryNotificationLevel; 
```

没有记录级别是如何触发的。SpringBoard 配置为在每个内存级别执行以下操作：

```
Warning (not-normal) — Relaunch, or delay auto relaunch of nonessential background apps e.g. Mail.
Urgent — Quit all background apps, e.g. Safari and iPod.
Critical and beyond — The kernel will take over, probably killing SpringBoard or even reboot. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:23:50.500

我知道没有办法（除了私有/未记录的 API）知道内存级别警告。所以你不应该使用它。

查看[此](https://stackoverflow.com/questions/2915247/iphone-os-memory-warnings-what-do-the-different-levels-mean)问题以查看未记录的 API 以获取内存警告级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:25:36.833

我的第一个建议是研究文档中的内存警告通知（例如，`userInfo`如果存在，它的字典的内容是什么）。我不知道它是否提供了任何细节。

**但最终，您不应该推测内存警告的级别，只需假设最坏的情况并尽可能多地释放未使用的数据。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T21:13:03.277

没有（公共的、有效的）方法可以从客户设备上的系统中获取当前的内存压力水平。然而，有一种方法可以使用[Dispatch Source API获得内存压力](https://developer.apple.com/documentation/dispatch/dispatch_source_type_memorypressure)*变化*的通知。

内存压力调度源可用于通知应用程序内存压力的变化。这可以比 UIKit 提供的通知更细粒度，并且包括在内存压力恢复正常时通知的能力。

例如：

目标-C：

```
dispatch_source_t   memorySource    = NULL;

memorySource = dispatch_source_create(DISPATCH_SOURCE_TYPE_MEMORYPRESSURE, 0L, (DISPATCH_MEMORYPRESSURE_NORMAL | DISPATCH_MEMORYPRESSURE_WARN | DISPATCH_MEMORYPRESSURE_CRITICAL), [self privateQueue]);
if (memorySource != NULL) {
    dispatch_block_t eventHandler = dispatch_block_create(DISPATCH_BLOCK_ASSIGN_CURRENT, ^{
        if (dispatch_source_testcancel(memorySource) == 0 ){
            dispatch_source_memorypressure_flags_t  memoryPressure    = dispatch_source_get_data(memorySource);

            [self didReceiveMemoryPressure:memoryPressure];
        }
    });

   dispatch_source_set_event_handler(memorySource, eventHandler);
   dispatch_source_set_registration_handler(memorySource, eventHandler);
   [self setSource:memorySource];
   dispatch_activate([self source]);
} 
```

斯威夫特 4：

```
if let source:DispatchSourceMemoryPressure = DispatchSource.makeMemoryPressureSource(eventMask: .all, queue:self.privateQueue) as? DispatchSource {

    let eventHandler: DispatchSourceProtocol.DispatchSourceHandler = {
        let event:DispatchSource.MemoryPressureEvent = source.data
        if source.isCancelled == false {
            self.didReceive(memoryPressureEvent: event)
        }
    }

    source.setEventHandler(handler:eventHandler)
    source.setRegistrationHandler(handler:eventHandler)
    self.source = source
    self.source?.activate()
} 
```

请注意，事件处理程序也被用作“注册处理程序”。这将导致事件处理程序在调度源被激活时触发，有效地告诉应用程序当源被激活时“当前”值是什么。

# jquery - 使用悬停将变量设置为真正的jquery

> ID：11538155
> 
> 赞同：0
> 
> 时间：2012-07-18T09:22:10.683
> 
> 标签：jquery, boolean

我的问题很简单，但它让我很困惑。我正在使用 jquery 函数在变量为假时使元素闪烁，并在为真时隐藏：

```
function flasher(bl){
    if(!bl){
    setInterval(function(){
            $(".flash").fadeToggle("slow");
            }, 300);
    }
}
var bl = false;
$(document).ready(function(){
    $(".flash").on("hover", function(){
        bl = true;
    });

        flasher(bl);
}); 
```

当我使用警报时，它确实显示功能正在运行并且我得到了真实，但我无法看到我的错误。使用萤火虫 bl 的值保持为假。我已经尝试过 global bl 和 var bl，但都保持不变。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:27:33.623

试试这个 ：

```
function flasher(){
      setInterval(function(){
         if(!bl){
              $(".flash").fadeToggle("slow");
         }
      }, 300);
}

var bl = false;
$(document).ready(function(){
    $(".flash").hover(function(){
        bl = true;
    }, function() {
        bl = false;
    });
    flasher();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:29:17.770

您的问题是您的就绪函数在开始时只运行一次，因此您的函数闪烁器只运行一次。

每次更改变量的状态时都需要运行它。

```
$(document).ready(function(){
    var interval;
    $(".flash").on("hover", function(){ // hoverin
        interval = setInterval(function(){
               $(".flash").fadeToggle("slow");
            }, 300);
    }, function(){ // hoverout
        clearInterval(interval);
        $(".flash").fadeOut("slow");
    });
}); 
```

此外，在您的间隔中，您使用 300 毫秒的间隔，并且您的 fadeToggle 很慢（即 600 毫秒）。这意味着当您已经开始下一个时，您的淡入淡出动画还没有结束。即使您清除了间隔，您的动画也会被打乱并继续闪烁几秒钟。

另外，正如您已经被告知的那样，如果您打算继续使用 StackOverflow 寻求帮助，您应该遵守它的规则，并接受有效的答案。

# c - 增加 c 图形中的字体大小

> ID：11538157
> 
> 赞同：1
> 
> 时间：2012-07-18T09:22:26.620
> 
> 标签：c, linux, graphics, ubuntu-10.04

如何在c图形中增加字体大小/我知道其中一个函数就是settextstyle()，但是我系统安装的图形包没有这个函数。那么我该怎么做呢？PS：我正在使用 libgraph-1.0.2 包。请帮忙 ！

# java - SimpleDateFormat 似乎给出了不正确的结果

> ID：11538161
> 
> 赞同：3
> 
> 时间：2012-07-18T09:22:43.280
> 
> 标签：java, date, clojure

我为此使用 Java 7 和 Clojure 1.4。

我正在 Clojure 中为包含`Date`对象的表编写一些数据库测试，使用 OracleDB over `JDBC`.

我需要将我收到的日期（一个`Date`对象）与一个`String`- 所以大概我需要将该字符串转换为一个`Date`对象。经过一番谷歌搜索，我找到了 Java 的`SimpleDateFormat`.

这就是我使用的（带有额外的调试内容）

```
(defn parseDate [date]
  (do (debug (str "Parsing date: " date ))
    (let [ dateobj (java.text.SimpleDateFormat. "dd-MMM-YY")
           parsed (do (. dateobj setLenient false) (. dateobj parse date))]
      (debug (str "Result: " parsed)) parsed))) 
```

我输入了一些日期，然后得到以下输出..

```
Parsing date: 01-jan-12
Result: Mon Jan 02 00:00:00 GMT 2012
Parsing date: 01-jan-13
Result: Mon Dec 31 00:00:00 GMT 2012
Parsing date: 00-jan-12
Result: Mon Jan 02 00:00:00 GMT 2012
Parsing date: 02-jan-13
Result: Mon Dec 31 00:00:00 GMT 2012 
```

这似乎一点也不对。

返回的`Date`对象是这样的：`#<Date Mon Jan 02 00:00:00 GMT 2012>`，这显然不等于我从数据库中返回的内容，例如`#<Date 2012-01-01>`.

有人对此有任何想法吗？

注意：无论我是否使用`setLenient`（无论是真还是假），我都会得到相同的结果。

**回答（由 Jon Skeet [Link 提供回答](https://stackoverflow.com/a/11538275/1437524 "关联")）**

我在格式字符串中使用了 YY，实际上我应该使用 yy （因为 Y 是周年，y 是简单的年）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:28:36.310

我相信问题在于您使用的是 YY 而不是 yy。从 的文档中[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，`YY`指的是*周年*而不是年。

周年有点奇怪，除非你*知道*你想使用它，否则你可能不会。特别是，将周年与“月中的日”和“月”混合在一起几乎是不合适的。您通常会一起使用“一周年，一周中，一周中的一天”。

换句话说：这两个系统有点像RGB和HSV的颜色；就好像你已经定义了一种“红色、绿色、色调”的格式，这没有多大意义:)

# emacs - 用于清理 LaTeX 代码的 Elisp 宏

> ID：11538167
> 
> 赞同：3
> 
> 时间：2012-07-18T09:23:05.463
> 
> 标签：emacs, latex, elisp, auctex

有人知道一些用于清理 LaTeX 代码的好 elisp 宏吗？

我对其他人的资源进行了很多 LaTeX 编辑，并且我想扩展我的清理工具集，因为不是每个人都以我喜欢的方式组织他们的代码 ;-)

一个特别有趣的是，在缓冲区上运行函数 X 并让所有 LaTeX 环境（\begin{...} 和 \end{...} 对）位于它们自己的行上，这有助于代码。

我可以自己尝试一下，但想听听关于编写这样一个函数的最佳实践的建议，例如它当然不应该引入自己的空白行。

建议？

编辑：对于档案，这是我根据给出的答案的当前版本（假设使用 auctex）。它或多或少适合我目前的需求。我添加了 y-or-n 测试只是为了能够检测到我没有想到的极端情况。

```
(defun enviro-split ()
  "Find begin and end macros, and put them on their own line."
  (interactive)
  (save-excursion
(beginning-of-buffer)

;; loop over document looking for begin and end macros
(while (re-search-forward "\\\\\\(begin\\|end\\)" nil t)
  (catch 'continue 

    ; if the line is a pure comment, then goto next
    (if (TeX-in-commented-line)
    (throw 'continue nil)
      )
    ;; when you find one, back up to the beginning of the macro
    (search-backward "\\")

    ;; If it's not at the beginning of the line, add a newline
    (when (not (looking-back "^[ \t]*"))
      (if (y-or-n-p "newline?")
      (insert "\n")
    )
      )

    ;; move over the arguments, one or two pairs of matching braces
    (search-forward "{")        ; start of the argument
    (forward-char -1)
    (forward-sexp)          ; move over the argument
    (if (looking-at "[ \t]*{")  ; is there a second argument?
    (forward-sexp)
      )             ; move over it if so
    (if (looking-at "[ \t]*\\[")    ; is there a second argument?
    (forward-sexp)
      )             ; move over it if so
    (when (looking-at (concat "[ \t]*" (regexp-quote TeX-esc) "label"))
      (goto-char (match-end 0))
      (forward-sexp)
      )

    (if (looking-at (concat "[ \t]*%" ))
    (throw 'continue nil)
      ) 

    ;; If there is anything other than whitespace following the macro,
    ;; insert a newline
    (if (not (looking-at "\\s *$"))
    ;;(insert "\n")
    (if (y-or-n-p "newline (a)?")
        (insert "\n")
      )
      )
    ) ; end catch 'continue
  )
(LaTeX-fill-buffer 'left)
)
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:27:39.170

您可能可以编写一个正则表达式并为此进行正则表达式替换。但是，我发现这些操作的逻辑变得非常复杂，尤其是当您想要考虑各种边缘情况时。在您的示例中，您需要处理一些环境采用一个参数，而其他环境采用两个参数。我认为将一系列简单的正则表达式与基本的文本编辑命令结合起来更容易：

```
(defun enviro-split ()
  "Find begin and end macros, and put them on their own line."
  (interactive)
  (save-excursion
    (beginning-of-buffer)

    ;; loop over document looking for begin and end macros
    (while (re-search-forward "\\\\\\(begin\\|end\\)" nil t)

      ;; when you find one, back up to the beginning of the macro
      (search-backward "\\")

      ;; If it's not at the beginning of the line, add a newline
      (when (not (looking-at "^"))
        (insert "\n"))

      ;; move over the arguments, one or two pairs of matching braces
      (search-forward "{")              ; start of the argument
      (forward-char -1)
      (forward-sexp)                    ; move over the argument
      (if (looking-at "\\s *{")         ; is there a second argument?
          (forward-sexp))               ; move over it if so

      ;; If there is anything other than whitespace following the macro,
      ;; insert a newline
      (if (not (looking-at "\\s *$"))
          (insert "\n"))))) 
```

这种方法的优势在于使用 Emacs 的内置函数来移动 sexps，这比使用自己的正则表达式来处理大括号内的多个可能嵌套的表达式要容易得多。

# python - 在 python 中创建和访问列表列表

> ID：11538170
> 
> 赞同：0
> 
> 时间：2012-07-18T09:23:14.787
> 
> 标签：python, list

我对python有点陌生。我今天开始了。我的代码如下所示

```
testcases=[
(([0.5,0.4,0.3],'HHTH'),[0.4166666666666667, 0.432, 0.42183098591549295, 0.43639398998330553]),
(([0.14,0.32,0.42,0.81,0.21],'HHHTTTHHH'),[0.5255789473684211, 0.6512136991788505, 0.7295055220497553, 0.6187139453483192, 0.4823974597714815, 0.3895729901052968, 0.46081730193074644, 0.5444108434105802, 0.6297110187222278]),
(([0.14,0.32,0.42,0.81,0.21],'TTTHHHHHH'),[0.2907741935483871, 0.25157009005730924, 0.23136284577678012, 0.2766575695593804, 0.3296000585271367, 0.38957299010529806, 0.4608173019307465, 0.5444108434105804, 0.6297110187222278]),
(([0.12,0.45,0.23,0.99,0.35,0.36],'THHTHTTH'),[0.28514285714285714, 0.3378256513026052, 0.380956725493104, 0.3518717367468537, 0.37500429586037076, 0.36528605387582497, 0.3555106542906013, 0.37479179323540324]),
(([0.03,0.32,0.59,0.53,0.55,0.42,0.65],'HHTHTTHTHHT'),[0.528705501618123, 0.5522060353798126, 0.5337142767315369, 0.5521920592821695, 0.5348391689038525, 0.5152373451083692, 0.535385450497415, 0.5168208803156963, 0.5357708613431963, 0.5510509656933194, 0.536055356823069])]

print 'Inputs'
print '======'
for inputs,output in testcases:
    print inputs[0]

print 'Outputs'
print '======='
for inputs,output in testcases:
    print output[0] 
```

在上面的代码中，输出如下

输入

```
======
[0.5, 0.4, 0.3]
[0.14, 0.32, 0.42, 0.81, 0.21]
[0.14, 0.32, 0.42, 0.81, 0.21]
[0.12, 0.45, 0.23, 0.99, 0.35, 0.36]
[0.03, 0.32, 0.59, 0.53, 0.55, 0.42, 0.65]
Outputs
=======
0.416666666667
0.525578947368
0.290774193548
0.285142857143
0.528705501618 
```

但是我需要访问上面测试用例列表的每一行，以获得如下输出代码应该是什么？

```
([0.5,0.4,0.3],'HHTH'),[0.4166666666666667, 0.432, 0.42183098591549295, 0.43639398998330553]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:29:04.400

似乎您需要一个嵌套循环。例如：

```
for inputs,output in testcases:
    for output in outputs:
        print output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:36:58.273

这将**打印**您所追求的（如果这就是您的意思）。

```
>>> for inputs,outputs in testcases:
...     print '%r, %r' % (inputs, outputs)

([0.5, 0.4, 0.3], 'HHTH'), [0.4166666666666667, 0.432, 0.42183098591549295, 0.43639398998330553]
([0.14, 0.32, 0.42, 0.81, 0.21], 'HHHTTTHHH'), [0.5255789473684211, 0.6512136991788505, 0.7295055220497553, 0.6187139453483192, 0.4823974597714815, 0.3895729901052968, 0.46081730193074644, 0.5444108434105802, 0.6297110187222278]
([0.14, 0.32, 0.42, 0.81, 0.21], 'TTTHHHHHH'), [0.2907741935483871, 0.25157009005730924, 0.23136284577678012, 0.2766575695593804, 0.3296000585271367, 0.38957299010529806, 0.4608173019307465, 0.5444108434105804, 0.6297110187222278]
([0.12, 0.45, 0.23, 0.99, 0.35, 0.36], 'THHTHTTH'), [0.28514285714285714, 0.3378256513026052, 0.380956725493104, 0.3518717367468537, 0.37500429586037076, 0.36528605387582497, 0.3555106542906013, 0.37479179323540324]
([0.03, 0.32, 0.59, 0.53, 0.55, 0.42, 0.65], 'HHTHTTHTHHT'), [0.528705501618123, 0.5522060353798126, 0.5337142767315369, 0.5521920592821695, 0.5348391689038525, 0.5152373451083692, 0.535385450497415, 0.5168208803156963, 0.5357708613431963, 0.5510509656933194, 0.536055356823069] 
```

如果您确实需要`)`在行尾添加额外内容，请将 print 语句更改为：

```
print '%r, %r)' % (inputs, outputs) 
```

# java - 使用Java的WebDriver未单击雅虎邮件的“登录”按钮

> ID：11538172
> 
> 赞同：1
> 
> 时间：2012-07-18T09:23:30.670
> 
> 标签：java, selenium, selenium-webdriver, yahoo, yahoo-mail

我在 Java 中使用 Selenium WebDriver（又名 Selenium 2）。点击雅虎邮箱的“登录”按钮，我编写了以下代码：

```
driver.findElement(By.id(".save")).click(); 
```

但不幸的是，它不起作用。我的代码有什么问题？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:32:48.533

如果在执行测试时浏览器没有最大化，请使用以下代码行最大化浏览器：

```
driver.manage().window().maximize(); 
```

然后，“登录”按钮将在页面上可见，希望它应该可以工作。

# extjs - ExtJS 4.1.1：使用 TreeGrid/TreeStore

> ID：11538173
> 
> 赞同：1
> 
> 时间：2012-07-18T09:23:32.267
> 
> 标签：extjs, extjs4, extjs4.1, treegrid

我的代码有一些问题，我希望你能帮我解决，因为我有点碰壁了。

我在树网格中有一个字段，它具有以下属性：

```
 xtype : 'gridcolumn',
    id : 'raGridFormulaLink_Purchased',
    dataIndex: 'formulaLink',
    groupable : false,
    editor : {
        xtype: 'textfield'
    },      
    renderer: function(value, metaData, record, rowIndex, colIndex, store) {
        var rVal; var linkRec;
        if(value !== '' && value !== 0) {
            /* TODO Find linked Record based on ['child_id' => value] 
             * and print that record's [text] to rVal */
            rVal = Ext.local.langstore[448] + ' ' + value;
        }
        return rVal;
    },
    align: 'left',
    width: 100 
```

如您所见，我正在尝试做一个简单的 HLOOKUP 来查找链接的记录。但我无法从商店获得正确的记录。我怎样才能做到这一点？

该值具有正确的“child_id”，因此不是输入错误。

任何帮助表示赞赏，

GR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:52:44.007

解决了。

最终代码：

```
 renderer: function(value, metaData, record, rowIndex, colIndex, store) {
        var rVal; var rText = ''; var node;

        if(value !== '' && value !== 0) {
            if(record.isLeaf()) {
                var node = record.parentNode.findChild('child_id',value);
                rText = node.data.text;
                rVal = Ext.local.langstore[448] + ' ' + rText;
            }
        }
        return rVal;
    }, 
```

# php - 如何在 Drupal 中更改图像小部件/字段

> ID：11538174
> 
> 赞同：0
> 
> 时间：2012-07-18T09:23:36.097
> 
> 标签：php, drupal, drupal-7

在内容类型 -> xxx -> 管理字段中，我有一个名为“图像”的字段。字段类型也是“图像”，以及小部件类型。一切正常，但...

我拥有的图像小部件/字段不允许我从已上传的列表中选择图像......所以我每次想要使用它时都需要上传相同的图像。

我还需要注意我的网站已经上线，并且有一些数据，所以我正在寻找安全的替代品。当然，我有网站的暂存版本，我可以在上面进行测试。

我该如何解决这个问题？

编辑：我正在使用 Drupal 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:51:44.313

您可以使用[FileField](http://drupal.org/project/filefield_sources/) Sources 模块执行此操作（启用自动完成或带有[IMCE](http://drupal.org/project/imce)模块的文件浏览器）

# javascript - 从母版页按钮运行 javascript 函数

> ID：11538176
> 
> 赞同：0
> 
> 时间：2012-07-18T09:23:43.083
> 
> 标签：javascript, asp.net

我在子页面上有一个 javascript 函数，当单击母版页上的保存按钮时，我需要运行该函数。

```
ValidateCheckList = function() {
        var ErrorCodeU1001 = "U1001";
        var ErrorCodeU1002 = "U1002";
        var ErrorCodeU1003 = "U1003";

        var errors = [];
        $('<%= errorsHiddenField.ClientID %>').val("0");

        var fingerprintsTaken = $('<%= FingerprintsTakenYesNo.PluginSelector %>').YesNoPlugin(YesNoMethodsEnum.IsYes);
        if (!fingerprintsTaken) {
            errors.push(ErrorCodeU1001);
        }

        var dnaTaken = $('<%= DNATakenYesNo.PluginSelector %>').YesNoPlugin(YesNoMethodsEnum.IsYes);
        if (!dnaTaken) {
            errors.push(ErrorCodeU1002);
        }

        var photographTaken = $('<%= PhotographTakenYesNo.PluginSelector %>').YesNoPlugin(YesNoMethodsEnum.IsYes);
        if (!photographTaken) {
            errors.push(ErrorCodeU1003);
        }

        if (errors.length > 0) {
            ('<%= errorsHiddenField.ClientID %>').val(errors.length.toString());
            $(document).PageUtilPlugin(PageUtilMethodsEnum.DisplayUserNotificationMessage, { messageType: "Warning", message: errors });
        }
    } 
```

我努力了 -

```
$(document).ready(function() {
        document.getElementById("ctl00_ctl00_ContentPlaceHolder1_SaveButton").onclick = ValidateCheckList; 
```

但这不起作用。

它还需要进行回发。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:28:12.417

试试这个改变你这样的代码

```
function ValidateCheckList ()
{
  if(allvalidates)
    return true;
  else 
    return false;
} 
```

在页面加载中的母版页上保存按钮

```
button.Attribute.Add("OnClick", "return ValidateCheckList ()"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:30:48.283

你对父母和孩子到底是什么意思？如果您的意思是弹出窗口是子窗口，您可以使用它

```
childwindow = window.open("child.html", "Pop", "width=700,height=400, scrollbars=1");
childwindow.yourfunction(); 
```

# iphone - 在网站上分发 iPad 应用程序（.ipa 格式文件）

> ID：11538177
> 
> 赞同：11
> 
> 时间：2012-07-18T09:23:49.047
> 
> 标签：iphone, ios, ipad, distribution

我是新的 IOS 开发人员，我想在我的网站上分发我的 iPad 应用程序（.ipa 格式文件）。因此，其他人可以从我的网站下载我的 iPad 应用程序（.ipa 格式文件）。那么，其他人是否可以通过网站下载 iPad 应用程序（.ipa 格式文件）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T09:34:49.333

归档应用程序时，您需要选中“分发到企业”框。当你这样做时，会生成一个 plist 文件。（注意您提供的信息，URL 必须正确）。将 ipa 和 plist 放到您的服务器上。

然后您可以从 HTML 文件链接到 plist：

itms-services://?action=download-manifest&url=http://YOURSERVER/YOURAPP.plist

这就是您如何进行 OTA（空中分配）

这仅适用于专用设备的企业配置文件或 AdHoc 配置文件，因此用于测试目的。

您还可以使用[TestFlight](https://testflight.apple.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T09:49:44.420

您可以使用[http://www.diawi.com/](http://www.diawi.com/)上传 .ipa。但请确保只有注册设备用户才能在他们的设备上运行该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T08:49:58.903

Entrprise 可能是解决方案，但 Apple 表示 ipa 必须仅分发给公司员工。

# php - 在简码中包含 PHP

> ID：11538182
> 
> 赞同：0
> 
> 时间：2012-07-18T09:24:14.817
> 
> 标签：php, shortcode

嗨，我有一个字符串替换：

```
$sHTML = str_replace( "[+fs.area.'{$member[ "town" ]}'+]", hello", $sHTML ); 
```

我在数据库中有多个城镇，我不能为每个城镇添加静态短代码，因为用户可能稍后会添加城镇，我基本上想放入 html：

[+fs.area.townname+] 在这种情况下会显示你好我做错了什么还是有其他方法可以解决？

这不是 wordpress，我做了一些搜索，发现有一种方法可以在 wordpress 中做到这一点，但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:34:21.237

1.  您可以从 db 填充 $member 数组
2.  您可以使用 +fs.area.*+ 正则表达式

但我认为你想创建键/值表

键：+fs.area.glasgow+ 值：格拉斯哥

键：+fs.area.Glasgowe+ 值：格拉斯哥

并且您想从表中选择记录作为键并用字符串中的值替换出现。

# drupal - 如何在 Drupal 7 中使用 Google Analytics 跟踪社交互动

> ID：11538187
> 
> 赞同：0
> 
> 时间：2012-07-18T09:24:22.260
> 
> 标签：drupal, tracking

有人可以建议如何在 Drupal 7 中使用谷歌分析跟踪社交互动

一些链接，tutos...

谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:00:05.493

您可以使用 Google Analytic 自定义变量

*   [跟踪自定义变量](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)
*   [掌握 Google Analytics（分析）自定义变量](http://cutroni.com/blog/2011/05/18/mastering-google-analytics-custom-variables/)

# blackberry - Blackberry res folder naming convention

> ID：11538189
> 
> 赞同：2
> 
> 时间：2012-07-18T09:24:24.500
> 
> 标签：blackberry, naming-conventions

I created a static function like this.

```
public static Bitmap Bitmap(String path) {
    Bitmap bitmap = Bitmap
            .getBitmapResource(Display.getWidth() + "/" + path);
    System.out.println(Display.getWidth() + "" + path);
    return bitmap;
} 
```

However, when I called like this,

```
private Bitmap download = Config_GlobalFunction.Bitmap("btn_download.png"); 
```

The output gave me `FRIDG could not find 320/btn_download.png`.

In my `res` folder, I got an folder which was `img` and inside `img` got 6 different folders which were `160`, `240`, `320`, `360`, `480` and `640` folder.

How can I call correct folder's image based on `Display.getWidth()`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:13:26.950

**文件夹下**可能有文件夹层次结构，但`/res`您必须使用`getClass().getResourceAsStream(path)`而不是`Bitmap.getBitmapResource()`为了创建资源。

此示例从路径创建位图`/res/img/hi_res/ui/action_arrow.png`：

```
String imagePath = "/img/hi_res/ui/action_arrow.png"; 
InputStream is = getClass().getResourceAsStream(imagePath);
byte[] imageBytes = IOUtilities.streamToBytes(is);
Bitmap b = Bitmap.createBitmapFromBytes(imageBytes, 0, imageBytes.length, 1); 
```

这需要更多的工作，但这确实意味着您可以拥有一个不错的文件夹结构，而不是将数百张图像集中在一个文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:45:06.433

我以前遇到过这个问题。 [黑莓应用程序似乎没有很好地设置来处理子文件夹中的资源文件。](http://supportforums.blackberry.com/t5/Java-Development/Help-me-Resource-file-path-problem-in-JDE-4-5/td-p/297942) 也就是说，您可以将资源存储在文件夹中，但是当捆绑到您的应用程序（.cod 文件）中时，它们基本上都会被转储到同一个文件夹中。

如您所见，如果您有多个具有相同名称的资源（但在不同的文件夹中），则会导致问题。

我曾经使用 Netbeans IDE 来构建 BlackBerry 应用程序，而使用 Netbeans BlackBerry 插件，它似乎可以处理这个问题。但是，对于 RIM JDE 或 Eclipse 插件，它不会。也许这是`ant`工具集背后的构建脚本中的东西？

无论如何，我知道你想做一些类似于 Android 的事情，你会有：

*   **res/drawable-hdpi/icon.png**
*   **res/drawable-mdpi/icon.png**
*   **res/drawable-xhdpi/icon.png**

并根据屏幕尺寸/分辨率选择正确版本的 icon.png。这是个好主意。

但是，为简单起见，我可能会建议您将系统更改为仅在资源名称上使用**前缀，而不是文件夹。**我知道这很痛苦，但黑莓似乎处理得更好。

因此，只需调用您的图像：

*   **res/img/320_btn_download.png**
*   **res/img/360_btn_download.png**
*   **res/img/480_btn_download.png**

然后你的代码可以是：

```
public static Bitmap Bitmap(String path) {
    return Bitmap.getBitmapResource(Display.getWidth() + "_" + path);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:25:10.550

如果您想根据分辨率获取图像，那么...根据图像的分辨率为图像命名，例如`320x240_img1`，`360x480_img1`。无需将这些图像放在不同的文件夹中....将这些图像转储到您的 res 文件夹中并像这样调用

```
int x = Display.getWidth();
int y = Display.getHeight();

String xx = Integer.toString(x);
String yy =Integer.toString(y);
_encImg = EncodedImage.getEncodedImageResource(xx+"x"+yy+".jpg"); 
```

# ios - 使用静态库文件时，iOS 中的链接器命令失败并出现退出代码 1

> ID：11538190
> 
> 赞同：0
> 
> 时间：2012-07-18T09:24:32.573
> 
> 标签：ios, xcode4, static-libraries

我创建了一个静态库文件并在另一个项目中使用它并构建它，然后我收到如下错误消息。

体系结构 i386 的未定义符号：“_OBJC_CLASS_$_Test_For_Static”，引用自：AppDelegate.o ld 中的 objc-class-ref：找不到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

请提供解决此错误的建议。我通过以下链接创建一个静态库 [http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:29:10.587

将两个项目添加到 Xcode 工作区中，并简单地使静态库成为另一个项目的依赖项。您将需要配置标头搜索路径，然后 Xcode 会自动处理其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:22:53.480

为了解决这个问题，我们需要配置应用程序目标来构建静态库目标，我们需要配置应用程序目标以链接到静态库目标。

# css - 停止 chrome 从自动样式输入 type=search

> ID：11538192
> 
> 赞同：19
> 
> 时间：2012-07-18T09:24:37.780
> 
> 标签：css, google-chrome

有没有办法阻止 Chrome 设置`input type=search`. 我可以很好地设置输入的样式，`input type=text`尽管一旦我将其更改为 HTML5 搜索，它会将我应用于输入的所有样式框起来。

**类型 = 文本**

![文本](../Images/78303dbef8ceeffe426e134dcf0f6641.png)

**类型 = 搜索**

![搜索](../Images/f13ddf0a20f71815bd372d496ac3fc9b.png)

使用重置属性更新了答案

```
input[type="search"] {
    -webkit-appearance: textfield;
}

input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration  {
    -webkit-appearance: none;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T09:33:57.647

你可以试试：

```
input[type="search"] {
    -webkit-appearance: textfield;
}

input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none;
} 
```

它有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:30:26.980

查看此页面，可能会有所帮助:)

[http://css-tricks.com/webkit-html5-search-inputs/](http://css-tricks.com/webkit-html5-search-inputs/)

# variables - PHP TCPPDF WriteHTML() 不工作 POST 或 GET 变量

> ID：11538193
> 
> 赞同：1
> 
> 时间：2012-07-18T09:24:38.533
> 
> 标签：variables, tcpdf

我用 Tcpdf 创建 PDF；我对 Writehtml() 有疑问；

当我使用以下代码时没有问题。

```
$legend = '<img src="images/level7.gif">106 bis 109 <br><img src="images/level6.gif">102 bis 106 <br><img src="images/level5.gif">99 bis 102 <br><img src="images/level4.gif">95 bis 99 <br><img src="images/level3.gif">92 bis 95 <br><img src="images/level2.gif">88 bis 92 <br><img src="images/level1.gif">85 bis 88 <br><img src="images/level0.gif">Kein Wert vorhanden<br>";

$pdf->writeHTML($legend, true, 0, true, 0); 
```

/* 完美运行*/

但是当我尝试使用 POST 或 GET 传递相同的数据时

```
$legend = $_GET['data'];
$pdf->writeHTML($legend, true, 0, true, 0); 
```

pdf 文件正在打开（无错误）但没有数据...

我确定 $_GET['data'] 包含相等的 $legend ...

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-24T11:02:16.940

您必须将所有适用的字符转换为 HTML 实体

```
$legend = htmlentities($_GET['legend']); 
```

# plot - JavaFX 2.x：如何在图表上突出显示绘制的数据？

> ID：11538195
> 
> 赞同：1
> 
> 时间：2012-07-18T09:24:43.397
> 
> 标签：plot, charts, javafx-2, line

我想通过单击鼠标左键导出（.txt 或 .cvs）数据绘制在图表上，突出显示它然后单击鼠标右键打开一个弹出窗口，然后是一个文件选择器对话框以保存数据

这是一个图片示例

![在此处输入图像描述](../Images/8bdcee101039fb1525489438031ad68e.png)

这是一个示例代码

```
public class BaseXYChart extends Application {

@Override
public void start(Stage stage) {
   stage.setTitle("Linear plot");

   final CategoryAxis xAxis = new CategoryAxis();
   final NumberAxis yAxis = new NumberAxis(0, 22, 0.5);

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis){
        @Override
    public String toString(Number object){
        return String.format("%7.2f", object);
    }
});
final LineChart<String, Number>lineChart = new LineChart<String, Number>(xAxis, yAxis);

   lineChart.setCreateSymbols(false);
   lineChart.setAlternativeRowFillVisible(false);
   lineChart.setLegendVisible(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 1.5));
    series1.getData().add(new XYChart.Data("Mar", 2));
    series1.getData().add(new XYChart.Data("Apr", 2.5));
    series1.getData().add(new XYChart.Data("May", 3));
    series1.getData().add(new XYChart.Data("Jun", 4));
    series1.getData().add(new XYChart.Data("Jul", 6));
    series1.getData().add(new XYChart.Data("Aug", 9));
    series1.getData().add(new XYChart.Data("Sep", 12));
    series1.getData().add(new XYChart.Data("Oct", 15));
    series1.getData().add(new XYChart.Data("Nov", 20));
    series1.getData().add(new XYChart.Data("Dec", 22));

    BorderPane pane = new BorderPane();
    pane.setCenter(lineChart);          
    Scene scene = new Scene(pane, 800, 600);
    lineChart.getData().addAll(series1);

    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch(args);
} 
```

}

然后我的问题是如何选择绘制的线数据以便打开一个弹出窗口。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:36:53.933

在下面检查您的修改后的代码。

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Cursor;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.ContextMenu;
import javafx.scene.control.MenuItem;
import javafx.scene.effect.DropShadow;
import javafx.scene.input.MouseButton;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class BaseXYChart extends Application {

    private DropShadow ds = new DropShadow();

    private ContextMenu contextMenu;

    private XYChart.Series selectedSeries;

    @Override
    public void start(Stage stage) {
        stage.setTitle("Linear plot");

        final CategoryAxis xAxis = new CategoryAxis();
        final NumberAxis yAxis = new NumberAxis(0, 22, 0.5);

        yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

            @Override
            public String toString(Number object) {
                return String.format("%7.2f", object);
            }
        });
        final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);

        lineChart.setCreateSymbols(false);
        lineChart.setAlternativeRowFillVisible(false);
        lineChart.setLegendVisible(false);

        final XYChart.Series series1 = new XYChart.Series();

        series1.getData().add(new XYChart.Data("Jan", 1));
        series1.getData().add(new XYChart.Data("Feb", 1.5));
        series1.getData().add(new XYChart.Data("Mar", 2));
        series1.getData().add(new XYChart.Data("Apr", 2.5));
        series1.getData().add(new XYChart.Data("May", 3));
        series1.getData().add(new XYChart.Data("Jun", 4));
        series1.getData().add(new XYChart.Data("Jul", 6));
        series1.getData().add(new XYChart.Data("Aug", 9));
        series1.getData().add(new XYChart.Data("Sep", 12));
        series1.getData().add(new XYChart.Data("Oct", 15));
        series1.getData().add(new XYChart.Data("Nov", 20));
        series1.getData().add(new XYChart.Data("Dec", 22));

        BorderPane pane = new BorderPane();
        pane.setCenter(lineChart);
        Scene scene = new Scene(pane, 800, 600);
        lineChart.getData().addAll(series1);

        contextMenu = new ContextMenu();
        MenuItem menuItem = new MenuItem("Save data");
        contextMenu.getItems().add(menuItem);
        menuItem.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent arg0) {
                if (selectedSeries != null) {
                    System.out.println("Save data of " + selectedSeries.getData());
                    // Saving logic here
                }
            }
        });

        // for every series in linechart
        applyMouseEvents(series1);

        stage.setScene(scene);
        stage.show();
    }

    private void applyMouseEvents(final XYChart.Series series) {

        final Node node = series.getNode();

        node.setOnMouseEntered(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent arg0) {
                node.setEffect(ds);
                node.setCursor(Cursor.HAND);
            }
        });

        node.setOnMouseExited(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent arg0) {
                node.setEffect(null);
                node.setCursor(Cursor.DEFAULT);
            }
        });

        node.setOnMouseReleased(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent mouseEvent) {
                if (mouseEvent.getButton().equals(MouseButton.SECONDARY)) {
                    contextMenu.show(node, mouseEvent.getScreenX() + 1, mouseEvent.getScreenY() + 1);
                    // Set as selected
                    selectedSeries = series;
                    System.out.println("Selected Series data " + selectedSeries.getData());
                }
            }
        });
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# android - 在Android中将文本放在捕获图像上？

> ID：11538196
> 
> 赞同：0
> 
> 时间：2012-07-18T09:24:44.897
> 
> 标签：android

我正在开发一个有趣的 android 应用程序。我需要在其中捕获图像，然后在保存之前，我需要在捕获的图像上添加一些文本。是否可以在运行时在 android 中编辑捕获的图像，请建议我。Thaanxx提前..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:56:11.953

如果您使用默认意图来捕获图像，请使用以下代码。无论您触摸图像的何处，都会放置文本。cp，imageview 应该在您的布局中。而 RelativeLayout rl 是您的布局的 id。

```
ImageView cp = (ImageView) findViewById(R.id.img_cp);
                Intent cameraIntent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);

        cp.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                Log.v("touched x val of cap img >>", event.getX() + "");
                Log.v("touched y val of cap img >>", event.getY() + "");
                x = (int) event.getX();
                y = (int) event.getY();
                RelativeLayout rl = (RelativeLayout) findViewById(R.id.lay_lin);
                TextView iv = new TextView(Capture_Image.this);
                iv.setText("checking......");
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.leftMargin = x;
                params.topMargin = y;
                rl.addView(iv, params);
                return false;
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST) {
            photo = (Bitmap) data.getExtras().get("data");
            cp.setImageBitmap(photo);
        }

    } 
```

# asp.net-mvc-3 - 如何将列绑定到 DropDownList 并获取 MVC3 中选择的名称？

> ID：11538197
> 
> 赞同：1
> 
> 时间：2012-07-18T09:24:45.287
> 
> 标签：asp.net-mvc-3, c#-4.0

现在我正在显示项目表，他有一个Assing Link，当Assignwork单击Assign链接时，我将向他显示DropDown中的所有项目名称

## 型号代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;
using System.Data.Entity;

namespace Gridview_BugTracker.Models
{
    public class BugTracker_DataHelper
    {

        public static List<BugTracker_DataHelper> GetList{get;set;}

          public int ProjectId { get; set; }
          public string projectName { get; set; }           
          public string Description { get; set; }
           public  string status { get; set; }
           public int EmployeId { get; set; }
           public string EmployeName { get; set; }

    }          

   } 
```

## 控制器代码

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.Data;
    using Gridview_BugTracker.Models;
    using System.Data.SqlClient;
    using System.Data.Entity;

    namespace Gridview_BugTracker.Controllers
    {
        public class ProjectsController : Controller
        {
            //
            // GET: /Projects/
            /// <summary>
            ///
            /// </summary>
            /// <returns></returns>
            public ActionResult Index()
            {
                var bugedlist = GetList();
                return View(bugedlist);
            }
      /// <summary>
            /// The Bind data in Gridview
            /// </summary>
            /// <returns></returns>
            public List<BugTracker_DataHelper> GetList()
            {
                var modelList = new List<BugTracker_DataHelper>();
                using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
                {
                    conn.Open();
                    SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
                    SqlDataAdapter da = new SqlDataAdapter(dCmd);
                    DataSet ds = new DataSet();
                    da.Fill(ds);
                    conn.Close();
                    for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                    {
                        var model = new BugTracker_DataHelper();
                        model.ProjectId = Convert.ToInt16(ds.Tables[0].Rows[i]["ProjectId"]);
                        model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
                        model.Description = ds.Tables[0].Rows[i]["Description"].ToString();
                        model.status = ds.Tables[0].Rows[i]["Status"].ToString();
                        modelList.Add(model);
                    }
                }
                return modelList;
            }
       /// <summary>
        /// Assign The Project Display
        /// </summary>
        /// <returns></returns>
        [AcceptVerbs(HttpVerbs.Get)]
        public ActionResult AssignProject()
        {
            var bugedlist = Assinedwrok();
            return View(bugedlist);

        }
           public List<BugTracker_DataHelper> Assinedwrok()
         {
            var modelList = new List<BugTracker_DataHelper>();
             using(
            SqlConnection assignedconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
             {
                 {
                     assignedconn.Open();
                     SqlCommand Passnedcmd = new SqlCommand("select projectName from Projects", assignedconn);
                     SqlDataAdapter da = new SqlDataAdapter(Passnedcmd);
                     DataSet ds = new DataSet();
                     da.Fill(ds);

                     SqlDataReader adr = Passnedcmd.ExecuteReader();

                     for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                     {
                         var model = new BugTracker_DataHelper();
                         model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
                         modelList.Add(model);
                     }
                 }
                 return modelList;
             }
        }
        /// <summary>
        /// The Assigned The Work to Resources
        /// </summary>
        /// <returns></returns>
        public ActionResult AssignedWork()
        {
            return View();
        }
    }
} 
```

## 索引查看代码

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Index</title>
</head>
<body>
    <div>
    <h2>Index</h2>
    <p>
     <%: Html.ActionLink("Create New", "Create") %>
     <%:Html.ActionLink("Assign", "AssignProject")%>
      </p>
<table>
    <tr>         
        <th>
            ProjectName
        </th>

        <th>
           Status
        </th>

    </tr>

 <% foreach (var item in Model) { %> 

    <tr>          
        <td> 
            <%:Html.LabelForModel(item.projectName) %> 
        </td> 

        <td>
         <%:Html.LabelForModel(item.status) %>
        </td>

         <td>
            <%: Html.ActionLink("Edit", "Edit", new {id = item.ProjectId})%> |
            <%: Html.ActionLink("Details", "Details", new { id = item.ProjectId })%> |
            <%: Html.ActionLink("Delete", "Delete", new { id = item.ProjectId })%>
        </td>

        </tr>

       <%} %>
</table>
    </div>
</body>
</html> 
```

## 关联视图代码

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Gridview_BugTracker.Models.BugTracker_DataHelper>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>AssignProject</title>
</head>
<body>
    <div>
     <% using (Html.BeginForm()) 
     { %>      
    <%:Html.ValidationSummary(true)%>
     <fieldset>
        <legend>Projects</legend>
         <label for="ProjectName">ProjectName:</label>
         <%: Html.DropDownList("SelectItem",Model.projectName) %>

        </fieldset>
    <%} %>

    </div>
</body>
</html> 
```

## 我收到错误

## “/”应用程序中的服务器错误。

传入字典的模型项的类型为“System.Collections.Generic.List`1[Gridview_BugTracker.Models.BugTracker_DataHelper]”，但此字典需要“Gridview_BugTracker.Models.BugTracker_DataHelper”类型的模型项。

* * *

当我单击 assx 页面中的 Assingn 按钮时，它应该转到我的控制器中的 Assingn 方法所有都是列显示数据但没有得到 Deising 页面.....我在这里做错了什么............

# c - C 移位移位

> ID：11538198
> 
> 赞同：1
> 
> 时间：2012-07-18T09:24:46.363
> 
> 标签：c

这是一个不使用临时变量和使用移位操作交换两个数字的程序：

```
#include <stdio.h>
#include <conio.h>
int main(void)
{
    int a,b,i,j;
    clrscr();
    printf(“Enter two integers: “);
    scanf(“%d%d”,&a,&b);
    printf(“a=%d,b=%d\n”,a,b);
    for(i = 0; i < 16; i++)
    {
        if((a & (1 << i)) ^ (b & (1 << i)))
        {
            a = a ^ (1 << i);
            b = b ^ (1 << i);
        }    
    }
    printf(“a=%d,b=%d”,a,b);
    getch();
    return 0;
} 
```

我的问题是 1 在这个程序中的意义是什么？我知道 xoring 的方法如下

```
a = a^b;
b = a^b;
a = a^b; 
```

但我不知道上面的程序是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:35:13.590

如果只有一个被设置，它会切换每一位。

c = a & (1 << i) = true 如果 a 的第 i 位被设置

如果设置了 b 的第 i 位，则 d = b & (1 << i) = true

```
| c | d | Action          | c' | d' |
-------------------------------------
| 0 | 0 | Do nothing      | 0  | 0  |
| 0 | 1 | Toggle the bits | 1  | 0  |
| 1 | 0 | Toggle the bits | 0  | 1  |
| 1 | 1 | Do nothing      | 1  | 1  | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:28:16.063

1 在最右边的位置设置了一位。`1<<i`有一个位置`i`集。该程序循环遍历每个位，如果它们不同，则交换它们。

*   `a&(1<<i)`测试是否设置`a`了位`i`。
*   `((a&(1<<i))^(b&(1<<i)))`测试是否位`i`入`a`和`b`不同。
*   `a=a^(1<<i)`切换位`i`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:27:51.803

它类似于 XOR 技巧，但一次只交换一个位，并且仅当该位在`a`and中实际不同时`b`。

`1<<i`位`i`设置为 1，所有其他位设置为 0。

此外，这不会在*不使用临时变量的情况下*交换两个数字。它使用临时`i`.

# ruby-on-rails - 如何在提交时调用操作（Rails）？

> ID：11538199
> 
> 赞同：1
> 
> 时间：2012-07-18T09:24:48.150
> 
> 标签：ruby-on-rails, view, controller, action

有什么更好的方法来做到这一点：当用户在表单中输入数据并提交表单时，数据正在发送到某个站点。它是在用户编辑页面中制作的。

当用户提交表单时，我需要调用另一个操作。

我应该使用 before_edit 过滤器还是在提交标签中以某种方式调用它？

例如：

```
 def do
 //perform some sending actions
 end 
```

在我看来：

```
 <div class="submit" >
  <%= submit_tag "Save", :class => "btn wide",  controller_do_path%></div> 
```

# java - EJBProcessor 异常处理

> ID：11538204
> 
> 赞同：1
> 
> 时间：2012-07-18T09:25:00.137
> 
> 标签：java, jboss, esb

我有一个使用标准开箱即用 EJBProcessor 操作的 JBOSS ESB。如果在 EJB 中运行的方法调用中抛出异常，我如何获取异常？

任何意见将是有益的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:29:53.557

您可以`EJBProcessor`像这样子类化并覆盖 process 方法：

```
@Override
public Message process(Message pMessage) {
  try {
    pMessage = super.process(pMessage);
  } catch (Throwable wEx) {
    handleProcessError(pMessage, wEx);
  }
  return pMessage;
} 
```

您很可能会捕获 的实例`ActionProcessingException`，并且可以查看原因以在`EJB`.

您的操作配置`jboss-esb.xml`将保持完全相同，除了您将用子类的名称替换`org.jboss.soa.esb.actions.EJBProcessor`.

# iphone - 在 Objective-C 中以编程方式检测 youtube 视频链接

> ID：11538207
> 
> 赞同：7
> 
> 时间：2012-07-18T09:25:06.567
> 
> 标签：iphone, objective-c, youtube, download

我需要从 youtube 等视频网站下载和保存视频。我想将它们保存到 iPhone 的视频库中。如何检测视频并将其保存到库中？我已经检查了一些可用的源代码。这是我在下载操作中所做的，但不起作用。

```
- (IBAction)download {
    [downloadButton setEnabled:NO];

    [webView setUserInteractionEnabled:NO];

    UIUserInterfaceIdiom userInterfaceIdiom = [UIDevice currentDevice].userInterfaceIdiom;

    NSString *getURL = @"";

    if (userInterfaceIdiom == UIUserInterfaceIdiomPhone) {
        getURL = [webView stringByEvaluatingJavaScriptFromString:@"function getURL() {var player = document.getElementById('player'); var video = player.getElementsByTagName('video')[0]; return video.getAttribute('src');} getURL();"];
    } else {
        getURL = [webView stringByEvaluatingJavaScriptFromString:@"function getURL() {var bh = document.getElementsByClassName('bh'); if (bh.length) {return bh[0].getAttribute('src');} else {var zq = document.getElementsByClassName('zq')[0]; return zq.getAttribute('src');}} getURL();"];
    }

    NSString *getTitle = [webView stringByEvaluatingJavaScriptFromString:@"function getTitle() {var jm = document.getElementsByClassName('jm'); if (jm.length) {return jm[0].innerHTML;} else {var lp = document.getElementsByClassName('lp')[0]; return lp.childNodes[0].innerHTML;}} getTitle();"];

    NSString *getTitleFromChannel = [webView stringByEvaluatingJavaScriptFromString:@"function getTitleFromChannel() {var video_title = document.getElementById('video_title'); return video_title.childNodes[0].innerHTML;} getTitleFromChannel();"];

    NSLog(@"%@, %@, %@", getURL, getTitle, getTitleFromChannel);

    [webView setUserInteractionEnabled:YES];

    NSArray *components = [getTitle componentsSeparatedByCharactersInSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet]];
    getTitle = [components componentsJoinedByString:@" "];

    if ([getURL length] > 0) {
        if ([getTitle length] > 0) {
            videoTitle = [getTitle retain];

            bar = [[UIDownloadBar alloc] initWithURL:[NSURL URLWithString:getURL]
                                    progressBarFrame:CGRectMake(85.0, 17.0, 150.0, 11.0)
                                             timeout:15
                                            delegate:self];

            [bar setProgressViewStyle:UIProgressViewStyleBar];

            [toolbar addSubview:bar];
        } else {
            NSArray *components = [getTitleFromChannel componentsSeparatedByCharactersInSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet]];
            getTitleFromChannel = [components componentsJoinedByString:@" "];

            if ([getTitleFromChannel length] > 0) {
                videoTitle = [getTitleFromChannel retain];

                bar = [[UIDownloadBar alloc] initWithURL:[NSURL URLWithString:getURL]
                                        progressBarFrame:CGRectMake(85.0, 17.0, 150.0, 11.0)
                                                 timeout:15
                                                delegate:self];

                [bar setProgressViewStyle:UIProgressViewStyleBar];

                [toolbar addSubview:bar];
            } else {
                //NSLog(@"%@", [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('html')[0].innerHTML;"]);

                UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"MyTube" message:@"Couldn't get video title." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

                [alertView show];
                [alertView release];

                [downloadButton setEnabled:YES];
            }
        }
    } else {
        //NSLog(@"%@", [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('html')[0].innerHTML;"]);

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"MyTube" message:@"Couldn't get MP4 URL." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alertView show];
        [alertView release];

        [downloadButton setEnabled:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:11:03.770

如果您一直希望它们采用 <object> 格式，这将获取视频 ID。如果正则表达式在 iframe 中，显然需要更改它。

```
NSError *error = nil;
NSRegularExpression *regex = 
[NSRegularExpression regularExpressionWithPattern:@"<object .*name=\"movie\" value=\"[a-zA-z:\\/]*.com\\/\\w*\\/([A-Za-z0-9\\_-]*).*<\\/object>"
                                          options:NSRegularExpressionCaseInsensitive
                                            error:&error];

[regex enumerateMatchesInString:pageSource options:0 range:NSMakeRange(0, [string length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
    NSString *videoID = [pageSource substringWithRange:[match rangeAtIndex:1]];        
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:34:55.103

您可以将下载的视频保存到相册或应用程序目录本身。要下载视频，您必须生成相应视频的下载链接。如果从网站 youtube 下载视频，请参阅此源代码 [https:// github.com/comonitos/youtube_video](https://github.com/comonitos/youtube_video)。有些网站是下载受限的，可能无法下载。在所有其他网站的情况下，通过生成可下载的 url，您可以使其工作

# mysql - 将 MySQL 日期和时间转换为日期时间

> ID：11538211
> 
> 赞同：0
> 
> 时间：2012-07-18T09:25:14.920
> 
> 标签：mysql

我有一个有 4 列的表。日期登录，日期注销，时间登录，时间注销。

我怎样才能得到差异。我尝试过这样的事情；

```
SUM(TIMESTAMP(date_logout, time_logout) - TIMESTAMP(date_log, time_log)) 
```

但是，我得到的数字非常高，我无法将其转换为适当的时间。任何提示或线索？顺便说一句，我没有设计桌子：P

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:30:29.867

如果你想要几秒钟的差异：

```
SUM(UNIX_TIMESTAMP(TIMESTAMP(date_logout, time_logout)) - UNIX_TIMESTAMP(TIMESTAMP(date_log, time_log))) 
```

如果你想要几天的差异：

```
SUM(DATEDIFF(TIMESTAMP(date_logout, time_logout), TIMESTAMP(date_log, time_log))) 
```

如果您希望差异为 HH:mm:ss

```
SUM(TIMEDIFF(TIMESTAMP(date_logout, time_logout), TIMESTAMP(date_log, time_log))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:31:28.567

使用 TIMEDIFF FUNCTION 减去这两个值。

```
TIMEDIFF(TIMESTAMP(date_logout, time_logout) ,TIMESTAMP(date_log, time_log) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:36:24.297

```
TIMEDIFF(TIMESTAMP(date_logout, time_logout) , TIMESTAMP(date_log, time_log)) 
```

# c# - Listview 在 C# 中没有正确排序

> ID：11538213
> 
> 赞同：0
> 
> 时间：2012-07-18T09:25:25.623
> 
> 标签：c#, winforms, listview

我正在尝试对列表视图进行排序，然后删除多余的项目。但是项目既没有正确分类，也没有完全删除冗余。请帮忙..

```
lvwMessages.Sorting = SortOrder.Descending; 

for (int i = 0; i < lvwMessages.Items.Count - 1; i++)
{
   if (lvwMessages.Items[i].Tag == lvwMessages.Items[i + 1].Tag)
       lvwMessages.Items[i + 1].Remove();    
} 
```

![Listview 在运行时包含未排序和冗余的项目](../Images/5d00b018092940b6e300b71611d66489.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:33:05.600

您在迭代集合时正在更改集合。这总是有一些有趣的副作用。

EG 假设你有五个项目，分别有 ids 和 tags，

```
ID0 - Tag1 
ID1 - Tag1 
ID2 - Tag1
ID3 - Tag2
ID4 - Tag2. 
```

第一次通过循环，i = 0，Items 集合有 5 个元素。ID0 与 ID1 进行比较，去除 ID1。

下一次循环，i=1，Items 集合有 4 个元素。现在，不是将 ID0 与 ID2 进行比较，而是将 ID2 与 ID3 进行比较，并且没有任何内容被删除，等等......

你可以使用这样的东西：

```
int i = 0;
while (i < lvwMessages.Items.Count - 1)
{
   if (lvwMessages.Items[i].Tag == lvwMessages.Items[i + 1].Tag)
      lvwMessages.Items[i + 1].Remove();    
   else
      i++;
} 
```

仅当您没有删除项目时才增加计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:33:48.940

属性`Sorting`根据项目文本对项目进行排序。如果要基于 对 ListView 中的项目进行排序`Tag`，则应使用 Sort 方法。Sort 方法使用属性中`IComparer`指定的`ListViewItemSorter`对 ListView 中的项目执行手动排序。

下面是一个分拣机的例子：

```
public class ListViewItemComparer : IComparer
{
    public int Compare(object x, object y)
    {
        YourType a = (YourType)((ListViewItem)x).Tag;
        YourType b = (YourType)((ListViewItem)y).Tag;
        // compare tags
        return a.CompareTo(b);
    }
} 
```

用法：

```
listView.ListViewItemSorter = new ListViewItemComparer(); 
```

如果要更改排序方向，请将结果乘以`-1`或使用`b.Compare(a)`.

# grails - How to send mail from a Domain/Service in Grails

> ID：11538218
> 
> 赞同：2
> 
> 时间：2012-07-18T09:25:39.083
> 
> 标签：grails, grails-plugin, grails-2.0

I have [this plugin](http://grails.org/plugin/mail/) installed, I want to send mails from a Service/Domain class method , I was doing like this

```
 class TrainingService {
      def mailService
      public def sendMail() {
        mailService.sendMail {
            multipart true
            to "abc@xyz.com"
            subject "Hello,"
            body 'How are you?'

          }
} 
```

I got error "Cannot invoke method sendMail() on null object", How to resolve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:14:58.937

我缺少“发件人”属性，如果您使用的是多部分电子邮件，您还应该填写电子邮件的其他部分，我的代码片段：

```
mailService.sendMail {
            multipart true
            from '"Some account" <someaccount@email.com>'
            to 'anotheremail@somedomain.com'
            bcc emailAddresses.toArray()
            subject dto.title
            body emailPart1
            html g.render(
                    template: 'emailNotification',
                    model: [ name: dto.name ]
            )

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:19:24.283

您是否配置了 SMTP 服务器。您需要配置文件中的这些条目才能使邮件正常工作。你有这些吗？

```
grails {
    mail {
                    host = "hostname"
                    pop_port = 25
                    username = "username"
                    password = "password"
                    type = "pop3"

                }
} 
```

[您可以在此处](http://grails.org/plugin/mail/)找到有关配置的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T09:18:37.230

当我将名为“from”和“to”的变量传递给使用 sendMail 的方法时，出现此错误。尝试重命名 sendMail 方法并确保您没有任何冲突的变量名称。

# c++ - C++ 或 Qt 中的文件相关异常类

> ID：11538221
> 
> 赞同：0
> 
> 时间：2012-07-18T09:25:44.760
> 
> 标签：c++, exception

Java 有文件相关的异常类。

C++ 或 Qt 有类似的类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:36:37.143

您正在混合 c++（编程语言）和 Qt（库）...

如果您想使用裸 C++，那么 iostreams 有 ifstream 用于处理文件流，不知道它是否会引发异常 - 不要使用它 tbh ...但我建议检查*boost*和*文件系统*库，因为它具有更好的可读性语法和一些示例让你开始： http: [//www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/tutorial.html](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:58:04.543

标准库[流](http://www.cplusplus.com/reference/iostream/ios/)有两种模式：

1.  状态检查 - 程序员必须调用`good()`、`eof()`或`fail()`来`bad()`检测问题。

2.  异常抛出 - 程序员调用[`exceptions(...)`](http://www.cplusplus.com/reference/iostream/ios/exceptions/)以设置异常掩码，请参阅链接以获取示例。

Qt 库通常不使用异常，[`QIODevice`](http://qt-project.org/doc/qt-4.8/qiodevice.html)类（因此`QFile`）将返回 a`bool`来表示调用的成功或失败。错误信息可以从[`QIODevice::errorString()`](http://qt-project.org/doc/qt-4.8/qiodevice.html#errorString).

# hibernate - How can I represent my SQL INTEGER as floating point value using Hibernate's formula

> ID：11538227
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:01.100
> 
> 标签：hibernate, hql, hibernate-mapping

To achieve better performance I want to store percent value with two digits after floating point as integer. E.g. 99.99% as 9999\. How can I convert back 9999 to 99.99%? I cannot recompile my java code to do this in Java according to some security reasons. So, how can I do this using HQL formula in my externalized mappings files? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:44:13.037

对于 MySQL 5.5 工作：

> 连接（值 / 100.0，'%'）

和

> cast(a.percentValue AS double)/100

因 MySQLSyntaxErrorException 而失败

# php - 除了 GET 和 POST 之外，还有什么方法可以使用 PHP 将数据发送到服务器？

> ID：11538229
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:26:04.287
> 
> 标签：php, forms

我可以在不使用 get 或 post 的情况下将数据发送到 Web 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:28:52.277

不，没有。您可以做各种事情来隐藏或清理您的 GET 和 POST 数据，但仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:32:43.737

非 POST 请求（例如 HTTP PUT）中的 Cookie、任意 HTTP 标头和消息正文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:41:57.657

您并不真正了解 GET/POST 的含义。它只是 HTTP 标头中的“动词”。您实际上并不是“通过 POST 发送数据”，这只是一种简短的说法，即*“您正在使用标头中的 POST 动词和正文中的任意数据发出 HTTP 请求”*。“通过 GET 发送数据”是一种传统的说法，即*“使用标头中的 GET 动词发出 HTTP 请求并将一些数据放入 URL”*。

您可以在正文中发送您希望的任何数据并获取原始字节，例如：

```
$data = file_get_contents('php://input'); 
```

如果您使用 HTTP，则始终必须使用其中一种 HTTP 动词，GET 和 POST 是最容易使用的。如果您想避免使用 HTTP，请使用套接字构建您想要的任何自定义协议，但您应该有一个真正的理由这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T09:36:23.180

post 和 get 数据被添加到您的请求的标头中，php 会自动解析它们。

您可以使用 ajax 手动将您想要的任何内容添加到标题中，并使用 getallheaders() 在 php 中获取它。

# jquery - Using a pre-loader image to hide tinymce source code till the content loads

> ID：11538231
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:06.187
> 
> 标签：jquery, html, tinymce, preloader

We have integrated Tinymce for the system i am developing. My boss wants me to use a loading image till the full content loads within Tinymce textarea. I need just to hide HTML under a preloader til the content loads. Do anyone of you have an idea how i can do this?

Help much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:51:09.833

在编辑器的 init 上执行（将此代码放在您的 tinymce init 函数中）

```
...
theme: "advanced",   // example param
plugins = 'code',    // example param
setup: function (ed) {
    // gets executed when the editor is fully loaded
    ed.onInit.add(function(ed) {
        // hide the loading image here
        // give css display: none to the preloader image
    });
},
cleanup: true,    // example param
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:27:39.980

在内容未格式化之前隐藏编辑器：

```
setup: function (ed) {
    ed.onGetContent.add(function(ed, o) {
        jQuery('.mceEditor').hide();
    });
    ed.onInit.add(function(ed) {
        jQuery('.mceEditor').show('slow');
    });
} 
```

# asp.net - Mutliple dropdowns and values on the Paging

> ID：11538232
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:08.943
> 
> 标签：asp.net

I have a GridView and I populate it via a DATASET . Three of its columns are three DropDownLists and AllowPaging is set to true for the grid view. My problem is when I choose a value on anyone of the ddl and click on serach button i get the data on the gridview which will have paginig, but when i click on the second page i loose teh filtered calue onthe drop down and i again get the earlier dataset.

Is there any way/idea to persist the selected values? Thanks for your help. Please can you help me with this. if i am not filtering anyone of teh dropdown and then clicking on the second or third page i get the relevant data of that particular page. teh only problem is when i have a value selected on the dropdown .

code:

button click: { string _strBU = BUDropDownList.SelectedValue; string _strOU = OUDropDownList.SelectedValue;

```
string _strPortalID = !string.IsNullOrEmpty(TxtEmpPortalID.Text.Trim()) ?   TxtEmpPortalID.Text.Trim() : string.Empty;
string _strRU = RUDropDownList.SelectedValue;
string _strMngrPortalID = System.Web.HttpContext.Current.User.Identity.Name.ToString();
_strMngrPortalID = _strMngrPortalID.Substring(4, 6);

            SqlConnection sqlConnection = new SqlConnection();
            sqlConnection.ConnectionString = "server=;uid=;pwd=;database=HROrgchartDB";
            sqlConnection.Open();

            SqlCommand sqlEmployeeDetailsCommand = new SqlCommand();
            sqlEmployeeDetailsCommand.Connection = sqlConnection;
            sqlEmployeeDetailsCommand.CommandText = "EmployeeSearch";
            sqlEmployeeDetailsCommand.CommandType = CommandType.StoredProcedure;
            sqlEmployeeDetailsCommand.Parameters.Add(new SqlParameter("@BU", SqlDbType.VarChar, 50)).Value = _strBU;
            sqlEmployeeDetailsCommand.Parameters.Add(new SqlParameter("@OU", SqlDbType.VarChar, 50)).Value = _strOU;
            sqlEmployeeDetailsCommand.Parameters.Add(new SqlParameter("@PORTALID", SqlDbType.VarChar, 6)).Value = _strPortalID;
            sqlEmployeeDetailsCommand.Parameters.Add(new SqlParameter("@RU", SqlDbType.VarChar, 50)).Value = _strRU;
            sqlEmployeeDetailsCommand.Parameters.Add(new SqlParameter("@ManagerPortalID", SqlDbType.VarChar, 6)).Value = _strMngrPortalID;

            SqlDataAdapter da = new SqlDataAdapter(sqlEmployeeDetailsCommand);
            DataSet ds = new DataSet();
            da.Fill(ds);
            if (ds != null)
            {
                // gvAddorRelease.Visible = true;
                gridReportees.DataSource = ds;
                Cache["D2"] = ds;
                gridReportees.PageIndex = 0;
                gridReportees.DataBind();
            }
            else
            {

            }
            sqlConnection.Close();
        }
} 
```

event for paging :

```
gridReportees_PageIndexChanging:
{
gridReportees.PageIndex = e.NewPageIndex;
DataSet ds = new DataSet();
ds=(DataSet)Cache["D2"];
gridReportees.DataSource= ds;
gridReportees.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:17:12.770

**问题：** 当您单击下一页时，下拉菜单也会重新绑定，因此选择的索引更改为 0。

**解决方案：** 当您按下搜索按钮时，您必须保存 3 个下拉列表的选定值。下拉菜单存在于您的 gridview 中，因此首先您必须获取 gridview 行索引。您可以从 gridveiw_selectedindexchange 事件中获取行索引。[暗示]

```
ViewState["svalue1"] = ((DropDownList) gv.Rows[index].FindControl("dropdownlistID")).Text;

// also get the selected values of other 2 dropdowns 
```

现在，在获得 selectedvalues 后，您必须将 dropdwonlist.selected 值设置为我们保存在 ViewState 中的值。

```
gridReportees_PageIndexChanging()
{
  // After binding the grid
  // in this metho set the dropdown seleted value
  // example get a reference of your dropdown
   DropDownList ddl1 = (DropDownList) gv.Rows[index].FindControl("dropdownlistID");
   ddl.SelectedValue = ViewState["svalue1"].ToString();
  // follow the same steps for other 2 dropdownlists
} 
```

希望它对你有用。

# java - Shared objects between two JRuby instances in one JVM

> ID：11538233
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:13.613
> 
> 标签：java, jvm, jruby

I would like to know if it's possible to share an object between two JRuby instances if they run inside the same JVM?

I already tried to create a singleton java class that got referenced from both JRubies, but it's seems, that each JRuby creates it's own environment and it's own version of that java class.

Does someone know a way to solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:41:24.103

好的-实际上是两个问题。

1.  要共享的变量必须以 $ 符号开头（例如 $databases）。
2.  脚本容器的 LocalContextScope 必须设置为正确的值。

如果 LocalContextScope 设置为“singleton”和“concurrent”，则可能会出现以下情况。

```
require 'java'

include Java
import 'org.jruby.embed.ScriptingContainer'
import 'org.jruby.embed.LocalContextScope'

$a = "Test"

container = ScriptingContainer.new LocalContextScope::CONCURRENT
container.run_scriptlet "puts $a" 
```

# android - Unable to view inner tab from main tab in using titanium in android device?

> ID：11538237
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:17.550
> 
> 标签：android, titanium

I making application for Android and ipone using titanium sdk in which i have used tabgroup.but when i go from one one screen to another screen in same tab.tab is dissable in second screen while it is visible i iphone device not in Android device. I have used fiollwing codeto go from main window to inner window in same tab.

**

```
Continue.addEventListener('click',function(e)
      {
        var win = Titanium.UI.createWindow({
            url:'tab1_continue.js',backgroundColor:'#fff'
        });
        Titanium.UI.currentTab.open(win,{animated:true});** 
```

it does not work on android.plz help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:15:43.653

如果这是在“app.js”中，则使用此代码

```
Continue.addEventListener('click',function(e){
        var win = Titanium.UI.createWindow({
            url:'tab1_continue.js',backgroundColor:'#fff'
        });
        <tabName>.open(win,{animated:true});**
}); 
```

否则

```
Continue.addEventListener('click',function(e){
        var win = Titanium.UI.createWindow({
            url:'tab1_continue.js',backgroundColor:'#fff'
        });
        Titanium.UI.currentTab.open(win,{animated:true});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:42:06.667

“url”属性导致窗口重量级，这意味着它不能是选项卡组的子项（它必须占用所有内容）。阅读 Appcelerator 问答中[有关此主题](http://developer.appcelerator.com/question/132573/tabgroup-child-window-covers-tabgroup)的更多讨论。

# asp.net - datasets and joins. ASP.net

> ID：11538239
> 
> 赞同：0
> 
> 时间：2012-07-18T09:26:24.407
> 
> 标签：asp.net, dataset

I have 3 tables. Namely Job_Master,Print_details,Paper_Details.

The Structure of the table is as follows:

**Job_Master:**

jobno jobname amount

1 A 100
2 B 200
3 C 300

**Print_Details** id being the PK and jobno being FK

id jobno color

1 1 Cyan
2 1 Red
3 2 Black
4 3 Black
5 3 Green

**Paper Details** id being the PK and jobno being FK

id jobno Type

1 1 Art Paper
2 1 Photo Paper
3 2 Art Paper
4 3 Copier
5 3 Glossy Paper

I want a write a query in SQL server or perform Dataset operations in ASP.net so as to display the below resultset in the grid view:

**Desired Resultset:**

```
jobno jobname printDetails                    paperDetails                  amount

1     A       CYAN,RED                        Art Paper,Photo Paper         100
2     B       Black                           Art Paper                     200
3     C       Black,Green                     Copier,Glossy Paper           300 
```

is this possible using dataset operations in ASP.net or in a SQL server query. I am using SQL server 2008 R2 as my database and the fromt end has been designed using ASP.net3.5.

Any help on this is much appreciated.Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:57:37.990

尝试这个

```
SELECT DISTINCT a.Jobno, a.jobname,  COALESCE(b.color + ', ', '') + b.color,COALESCE(c.type + ', ', '') + c.type
FROM job_master a left JOIN cprint_details b ON a.jobno=b.jobno 
left join paper_details c on a.jobno=c.jobno 
ORDER BY a.jobno 
```

阅读此处了解更多信息 [链接](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

# canvas - 在 PhotoShop 中调整批量图像的大小

> ID：11538242
> 
> 赞同：3
> 
> 时间：2012-07-18T09:26:32.147
> 
> 标签：canvas, automation, photoshop, image-resizing

我经常被要求将图像（很多）调整为正方形，然后用 PhotoShop 保存它们。例如，如果图像是 400x200，那么我需要将画布的大小调整为 400x400。同样，如果图像为 321x850，则画布的大小将调整为 850x850，如果图像为 521x250，则画布的大小将调整为 521x521。

PhotoShop 中有没有办法自动完成这项繁琐的任务？我知道 PhotoShop 自动化，它会记录你的动作，但这不是我想要的。如果你能指出我正确的方向，我对解决方案的编程没有问题。这可能吗？

先感谢您。这可以为我节省数小时的繁琐重复工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T12:09:46.880

使用 javascript：您可以使用[此答案](https://stackoverflow.com/a/10304886/958490)来选择所选文件夹中的所有文件并循环浏览它们。在循环中，您需要像这样打开每个文件：

```
var doc = open(fileList[i]); 
```

然后检查长度与宽度：

```
if (doc.width !== doc.height) {             // if document is not already square...
    if (doc.width > doc.height) {               // if width is greater...
        doc.resizeCanvas(doc.width, doc.width)   // use this value for both sides...
    } else {                                      // else use height for both sides...
        doc.resizeCanvas(doc.height, doc.height)      // so you always get a square.
    }
} 
```

保存并关闭：

```
doc.save();
doc.close(); 
```

根据您要查找的内容，也有`doc.resizeImage()`。

[Adobe 脚本指南](http://www.adobe.com/devnet/photoshop/scripting.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T09:50:37.643

**在 Mac OS X 中批量调整图像大小**

您可以使用附带的 Preview 应用程序轻松地在 Mac OS X 中批量调整图像组的大小，无需任何额外的下载或昂贵的照片编辑应用程序，只需使用 Mac 免费的 Preview！这是如何做到的：

```
1\. Select all the images you want resized and open them within Preview
2\. From Preview, select the images that you want to batch resize from the drawer (Command+A will select them all)
3\. Now, go to the menu labeled Tools, and then Adjust Size
4\. Enter a value for what you want the new width and height to be
5\. Next, navigate to the File menu and click Save All
6\. All the images you selected are now resized! 
```

这适用于几乎所有 Mac OS X 版本中包含的预览版，快乐批量调整大小！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T19:40:14.970

使用这个脚本出错了。

```
if (doc.width !== doc.height) {             // if document is notalready square...
     if (doc.width > doc.height) {               // if width is greater...
         doc.resizeCanvas(doc.width, doc.width)   // use this value for both sides...
     else {                                      // else use height for both sides...
         doc.resizeCanvas(doc.height, doc.height)      // so you always get a square.
     } } 
```

它说在第 4 行非法使用 else

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-16T11:49:48.303

发生错误是因为第 3 行末尾缺少“}”。if-term 必须在 else-term 打开之前关闭。

```
if (doc.width !== doc.height) {                // if document is notalready square...
 if (doc.width > doc.height) {                 // if width is greater...
     doc.resizeCanvas(doc.width, doc.width)}   // use this value for both sides...
 else {                                        // else use height for both sides...
     doc.resizeCanvas(doc.height, doc.height)} // so you always get a square.
 } 
```

# c# - 为什么 Any() 不适用于 ac# null 对象

> ID：11538243
> 
> 赞同：69
> 
> 时间：2012-07-18T09:26:35.600
> 
> 标签：c#, .net, object, ienumerable

在空对象上调用[Any()](http://msdn.microsoft.com/en-us/library/bb337697 "微软文档")时，它会在 C# 中引发 ArgumentNullException。如果对象为空，则肯定没有“任何”，它可能应该返回 false。

为什么 C# 会这样？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-18T09:30:19.833

`Any()`正在问：“这个盒子里有什么东西吗？”

如果盒子是空的，答案显然是否定的。

但是如果一开始就没有盒子，那么这个问题就没有意义了，函数就会抱怨：“你到底在说什么？没有盒子。”

* * *

当我想将丢失的集合视为空集合时，我使用以下扩展方法：

```
public static IEnumerable<T> OrEmpty<T>(this IEnumerable<T> sequence)
{
    return sequence ?? Enumerable.Empty<T>();
} 
```

这可以与所有 LINQ 方法结合使用`foreach`，而不仅仅是`.Any()`.

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2017-10-11T14:19:29.380

使用现代 C#，您可以通过如下简单检查轻松处理 OP 场景：

```
List<string> foo = null;

if (foo?.Any() ?? false)
{
    DoStuff();
} 
```

这有点像`AnyOrDefault(bool default)`OP 期望`Any()`扩展方法执行的蹩脚实现。

你可以很容易地把它变成这样的扩展：

```
public static bool HasItems<T>(this IEnumerable<T> source)
{
    return (source?.Any() ?? false);
} 
```

~~老实说，我真的不喜欢这个名字`AnyOrDefault`，因为传递默认值是没有意义的（默认值 true 可能对以后阅读代码的人来说是非常卑鄙的）。~~`HasItems`按照评论中的建议重命名为。这是一个更好的名字！

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-07-18T09:30:06.590

在处理引用类型时，`null`值在语义上与“空”值不同。

字符串`null`与 不同`string.Empty`，并且 a`null` `IEnumerable<T>`与 `Enumerable.Empty<T>`（或该类型的任何其他“空”可枚举）不同。

如果`Any`不是扩展方法，则调用它`null`会导致`NullReferenceException`. 由于它*是*一种扩展方法，因此抛出一些异常（尽管不是必需的）是一个好主意，因为它保留了尝试调用方法的众所周知的语义`null`：**BOOM！**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-18T09:29:18.660

`Any()`是一个扩展方法，所以`this`实际上是作为方法的第一个参数传递的。在这种情况下，它抛出`ArgumentNullException`is `this`is 是可以理解的`null`。

您可以事先自行执行检查：

```
bool hasAny = yourData == null ? false : yourData.Any(yourPredicate); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T09:36:20.453

因为 Any() 它是这样的扩展方法：

```
public static bool Any(this IEnumerable enumerable)
{
    if (enumerable == null)
        throw ArgumentNullException("enumerable");
    ...
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T09:28:41.773

该`Any`方法针对 an 运行并告诉您*Enumerable 中*`IEnumerable`是否有任何项目。如果您不给它任何枚举，那么 ArgumentNullException 是合理的：没有（匹配）元素的集合与没有集合不同。

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-18T09:36:33.230

正如其他人已经提到的，`Any`检查序列是否包含元素。它不会阻止您传递`null`值（首先可能是什么错误）。

[`Enumerable`类](http://msdn.microsoft.com/en-us/library/bb341635)中的每个扩展方法都会抛出一个[`ArgumentNullException`](http://msdn.microsoft.com/en-us/library/system.argumentnullexception)if the `source`is `null`。加入`ArgumentNullExceptions`扩展实际上是一种[很好的做法](https://stackoverflow.com/a/463340/284240)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-09T07:13:13.077

`Any()`是一个扩展方法，`ArgumentNullException`如果源为空则抛出。你会什么都不做吗？通常，最好获得一些关于代码中正在发生的事情的明确指示，而不是默认值。

但这并不意味着它不能那样。如果您知道自己在做什么，请编写自己的自定义实现。

我只是想与您分享一些我公司正在遵循的实用建议。我们编写与私有 NuGet 共享的自定义包，这些包在我们的产品中广泛使用。检查列表是否为空/空是非常频繁的，因此我们决定编写我们的实现以`Any`使我们的代码更短更简单。*

# python - python pip install psycopg2 安装错误

> ID：11538249
> 
> 赞同：26
> 
> 时间：2012-07-18T09:27:04.537
> 
> 标签：python, postgresql, pip

我`pip install psycopg2`在mac系统上做了一个简单的。它安装得很好，但是当我尝试使用 psycopg2 时出现错误：

```
Reason: Incompatible library version: _psycopg.so requires version 1.0.0 or later, but libssl.0.9.8.dylib provides version 0.9.8 
```

`pip freeze`显示`psycopg2==2.4.5`刚刚好。我已经在几个 virtualenvs 上安装了 psycopg2，但这是我第一次看到这样的错误。我尝试卸载并重新安装，结果相同。请帮忙

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-12T22:50:43.600

这里接受的答案是正确的（除了我认为它必须是 ln -fs ，事实上我认为如果不是（？），它甚至可能会破坏你的操作系统的稳定性）。在碰到这个并处理它之后，我只想收集这个问题的完整解决方案和另一个 lib 问题（libcrypto.1.0.0.dylib），你将在 Mountain Lion 和 Snow Leopard 上遇到 Postgres 9.*，并且也许其他系统。这也阻止了我运行 psql，它抱怨相同的两个库。

`/usr/lib`本质上，在libssl 和 libcrypto中需要两个更高版本的库。您可以在 Postgres lib 目录中找到这些库所需的版本。

*   如果您是 OSX 并安装了 Postgres 的 Enterprise DB 版本，它将位于`/Library/PostgreSQL/9.2/lib`.
*   对于其他安装类型的 Postgres，在 Postgress 安装目录中查找 lib 目录，例如，对于 Postgress.app，在 中找到 lib 目录`/Applications/Postgres.app/Contents/MacOS/lib`，
*   在某处酿造`/usr/local/Cellar`，
*   在 *nix 上，无论您安装在哪里。但是，如果您的发行版仅通过包管理器具有更高版本，请先查看 *nix。

首先将这两个库中最新的从 Postgres 库目录复制到`/usr/lib`：

```
sudo cp /Library/PostgreSQL/9.2/lib/libssl.1.0.0.dylib /usr/lib
sudo cp /Library/PostgreSQL/9.2/lib/libcrypto.1.0.0.dylib /usr/lib 
```

然后更新（或创建）此库的 /usr/lib 符号链接。无论哪种方式，命令都是`ln -fs`：

```
sudo ln -fs /usr/lib/libssl.1.0.0.dylib /usr/lib/libssl.dylib
sudo ln -fs /usr/lib/libcrypto.1.0.0.dylib /usr/lib/libcrypto.dylib 
```

应该是固定的。很确定 ln -fs 比删除符号链接并重新制作它更好，因此 libssl 在不存在时被需要它的东西找不到的可能性较小（它做同样的事情；它首先删除符号链接，如果它是已经在那里了，只是比你输入它的速度还快）。总是警惕在 /usr/lib 上胡闹。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2019-11-27T19:18:51.483

为我工作：

```
env LDFLAGS='-L/usr/local/lib -L/usr/local/opt/openssl/lib
-L/usr/local/opt/readline/lib' pip install psycopg2 
```

来源：[无法在 Mac OS X 10.7 上的 virtualenv 中使用 pip 安装 psycopg2](https://stackoverflow.com/questions/9678408/cant-install-psycopg2-with-pip-in-virtualenv-on-mac-os-x-10-7/42264168#42264168)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-07-30T14:40:05.673

升级到 Mountain Lion 后，我遇到了类似的问题。

不要按照 Slack 的建议复制 libssl.* 文件，而是确保它`/usr/lib/libssl.dylib`实际上是指向最新版本库的软链接。

例如，在我的机器上，`ls -l /usr/lib/libssl*`给出：

```
lrwxr-xr-x  1 root  wheel    46B Jun 27 15:24 /usr/lib/libssl.1.0.0.dylib -> /Library/PostgreSQL/9.1/lib/libssl.1.0.0.dylib
lrwxr-xr-x  1 root  wheel    27B Jul 30 10:31 /usr/lib/libssl.dylib -> /usr/lib/libssl.1.0.0.dylib 
```

如果`libssl.dylib`没有链接到错误版本提到的版本，请确保您拥有该版本的库，然后确保`/usr/lib/libssl.dylib`指向它，而不是旧版本。

如果链接不存在，请像这样创建它

```
sudo ln -s library_to_link_to link_to_create 
```

当然，为您的机器使用适当的位置。对我来说，结果是：

```
sudo ln -s /usr/lib/libssl.1.0.0.dylib /usr/lib/libssl.dylib 
```

**编辑**：

似乎有些人对我的部分解决方案有问题。也就是说，删除这些重要的库甚至会暂时导致操作系统出现问题。

根据[Purrell 的回答](https://stackoverflow.com/questions/11538249/python-pip-install-psycopg2-install-error/12397173#12397173)，确保`-fs`在使用`ln`命令时包含标志，这有助于确保库不会在短时间内丢失。例如，

```
sudo ln -fs /usr/lib/libssl.1.0.0.dylib /usr/lib/libssl.dylib
sudo ln -fs /usr/lib/libcrypto.1.0.0.dylib /usr/lib/libcrypto.dylib 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-09T09:32:46.027

在 OSX 10.11 上，El Capitan 报告了替换符号链接的解决方案`Operation not permitted`。对我有用的解决方案是使用 brew 并设置 DYLD_LIBRARY_PATH。所以：

```
brew install openssl 
```

找到 openssl brew libs 的位置（`brew --prefix openssl`可以帮助），从目录开始搜索`/usr/local/Cellar/openssl`。就我而言，它在`/usr/local/Cellar/openssl/1.0.2d_1/lib`

最后设置 DYLD_LIBRARY_PATH，即在 .bash_profile 中添加这样的一行：

```
# replace location of lib files with folder name you found in previous step
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/Cellar/openssl/1.0.2d_1/lib 
```

更新：更通用/更好的选择是（感谢@dfrankow）：

*   使用 brew 查找 openssl 位置（注意，brew 可能很慢）：`DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:$(brew --prefix openssl)/lib`
*   出于开发目的，也许最好`DYLD_FALLBACK_LIBRARY_PATH`改用 - 检查[这个](https://stackoverflow.com/questions/3146274/is-it-ok-to-use-dyld-library-path-on-mac-os-x-and-whats-the-dynamic-library-s)

重新启动 shell，或者只是`source ~/.bash_profile`重新安装 psycopg2：

```
pip uninstall psycopg2
pip install psycopg2 
```

并测试它是否有效：

```
$ python -c"import psycopg2  ;   print('psycopg2 is now ok')" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T16:22:09.717

尝试执行 syncdb Postgres 9.1 和 /psycopg2/_psycopg.so 时添加了一个进一步的错误：

库未加载：@loader_path/../lib/libcrypto.dylib 引用自：/usr/lib/libpq.5.dylib 原因：库版本不兼容：libpq.5.dylib 需要 1.0.0 或更高版本，但 libcrypto。 0.9.8.dylib 提供 0.9.8 版本

通过从以下位置复制这六 (6) 个文件来解决：

本地：/库/PostgreSQL/9.1/lib/

libssl.1.0.0.dylib

libssl.a

libssl.dylib

libcrypto.1.0.0.dylib

libcrypto.a

libcrypto.dylib

到：本地：/usr/lib

这是在 Mac OSx 10.8.1 上，在 virtualenv (1.8.2) 和 pgAdmin (1.14.3) 中有一个网络。virtualenv里面是：

姜戈==1.4

psycopg2==2.4.5

......等等......现在恢复正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-15T09:58:04.383

对我来说，libcryto 和 libss 版本 1.0.0 位于以下位置：

```
/Library/PostgreSQL/9.1/lib/libcrypto.1.0.0.dylib
/Library/PostgreSQL/9.1/lib/libssl.1.0.0.dylib 
```

所以解决我的问题的命令是：

```
sudo ln -fs /Library/PostgreSQL/9.1/lib/libssl.1.0.0.dylib /usr/lib/libssl.dylib
sudo ln -fs /Library/PostgreSQL/9.1/lib/libcrypto.1.0.0.dylib /usr/lib/libcrypto.dylib 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-22T12:03:53.487

我的朋友，只需将 libssl.* 文件从 PostgreSQL lib 目录复制到 /usr/lib 并在这种情况下重新启动您的应用程序，一切都会完美的^_^

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-22T09:12:16.670

对于 Mavericks 的我来说，只需复制两个 dylib 并重新启动 Python：

```
cp /Library/PostgreSQL/9.3/lib/libssl.1.0.0.dylib /usr/lib/
cp /Library/PostgreSQL/9.3/lib/libcrypto.1.0.0.dylib /usr/lib/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-19T18:27:22.263

如果您不愿意将库复制到系统目录中，可以使用 DYLD_LIBRARY_PATH 环境变量强制操作系统在 Postgres 的库目录中搜索 libssl。例如：

```
$ DYLD_LIBRARY_PATH=/Library/PostgreSQL/9.4/lib pip install psycopg2 
```

（在`dyld`手册页下记录）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-06T10:03:15.713

我在我的 Mac OS High Sierra 上遇到了类似的问题。

ImportError：dlopen（/Users/chicha/Projects/CTMR/sample_registration/romans_env/lib/python3.7/site-packages/psycopg2/_psycopg.cpython-37m-darwin.so，2）：未加载库：/opt/local /lib/libssl.1.0.0.dylib

但是在“pip install postgres”之后它工作正常。根据 pip show -“postgres 是对 psycopg2 的高价值抽象”。安装时还安装了 psycopg2-binary 和 psycopg2-pool。所以，他们一起以某种方式修复了这种情况。

# php - Facebook Post to Wall doesn't post the picture

> ID：11538250
> 
> 赞同：0
> 
> 时间：2012-07-18T09:27:11.460
> 
> 标签：php, facebook, facebook-graph-api

I have implemented exactly the code which is shown on this page: [http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

Problem: All the fields in the object are filled correctly, and also posted correctly to facebook, **except the picture**.

```
<?php

if(isset($_POST['successmessage'])) {

    echo '<div class="info_message" style="margin:0 10px 10px 10px">
            <div style="float:left;display:inline;width:200px">
                <strong>'.$lang['checkout_text_42'].' '.$lang['checkout_text_43'].'</strong>
                <br>'.$lang['checkout_text_44'].'
            </div>
            <div style="float:left;display:inline">
                <a onclick="postToFeed(); return false;" style="cursor:pointer;float:left"><img src="images/post-design-to-fb.png" style="margin-top:4px"></a>
                <div id="msg" style="line-height:34px;float:left;margin-left:10px"></div>
            </div>
            <div style="clear:left"></div>
        </div>';

    ?>

    <div id='fb-root'></div>
    <script src='http://connect.facebook.net/<?php echo $locale; ?>/all.js'></script>
    <script> 
      FB.init({appId: "123455666777", status: true, cookie: true });

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          link: 'http://www.mydomain.com/configurator.php?id=<?php echo $_SESSION['sharetofb'];?>&lang=<?php echo $language;?>',
          picture: 'http://www.mydomain.com/images/designs/design-<?php echo $_SESSION['sharetofb'];?>.png',
          name: 'I just designed a DIY T-Shirt. Awesome!',
          caption: 'Click to check it out and customize it.',
          description: 'Choose from 500 different materials, colors, prints, shapes to assemble your unique custom T-Shirt.'
        };

        function callback(response) {

            if (response && response['post_id']) {
               document.getElementById('msg').innerHTML = "Your design was posted successfully!";
             } 

        }

        FB.ui(obj, callback);
      }

    </script>

    <?php

}

?> 
```

If I use the Direct URL Example given on the above mentioned facebook doc and copy/paste the url into the browser (substituted with my App ID and URL and content), it also shows everything except the picture.

The strange thing is: It showed and posted the picture yesterday. However after several times of testing and posting and deleting the the test posts from my wall, it didn't post the picture anymore.

I searched all the questions and answers here on stackoverflow and can exclude that it is a problem of having dashes in the picture url. I really cannot figure it out and are close to asuming that facebook is blocking post pictures if done too often??

Appreciate any hint which can lead me to the solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:50:46.763

您是否尝试过使用静态图片？它在工作吗？也许这取决于您传递给它的变量。

# visual-studio - 如何在 Visual Studio 2012 RC 中将数据库发布到提供程序

> ID：11538254
> 
> 赞同：2
> 
> 时间：2012-07-18T09:27:17.557
> 
> 标签：visual-studio

我的 Web 应用程序使用 MS SQL Server 2008 R2 Express 数据库。要在 Visual Studio 2010 中生成数据库脚本，我可以在服务器资源管理器中右键单击我的数据库，然后选择发布到提供者。

但是，Visual Studio 2012 RC 的菜单不包含发布到提供程序命令。那么如何在 Visual Studio 2012 RC 中生成数据库脚本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:41:36.197

这似乎确实丢失了。我猜你只需要打开 Visual Studio 2010 并发布到提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:18:14.927

你能行的 ：

[http://arcanecode.com/2012/08/07/sql-server-data-tools-in-visual-studio-2012publish-database-profile/](http://arcanecode.com/2012/08/07/sql-server-data-tools-in-visual-studio-2012publish-database-profile/)

[http://msdn.microsoft.com/en-us/library/hh500335(v=vs.103](http://msdn.microsoft.com/en-us/library/hh500335(v=vs.103) )

您还可以下载工具：

[http://msdn.microsoft.com/en-US/data/hh297027](http://msdn.microsoft.com/en-US/data/hh297027)

# java - Hibernate : Strange TypeCast Exception Thrown While retrieving records in Java from postgres database table

> ID：11538257
> 
> 赞同：0
> 
> 时间：2012-07-18T09:27:27.793
> 
> 标签：java, database, hibernate, postgresql

I am facing a strange type cast error ( Compile Time Error ) As soon as I retrieve the data from the journey table it throws following exception as it does not recognize the Object gotten from the list.

I don't know why it is complaining like this, As the object, is already of journey type and I made a list of templatized with "Journey" type, every record is supposed to be journey.

```
"INFO: HHH000397: Using ASTQueryTranslatorFactory
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to de.db.journeyTracker.model.journey
" 
```

## Code :

```
 public static void findalljourney(Session session )
    {

        String qryAllJourney = "SELECT j.id , j.operatingday, j.linename,  j.scheduledeparture, j.scheduledeparturestopname FROM journey j";

        Query query = session.createQuery(qryAllJourney);

        List<journey> allJourney;
        allJourney = query.list();                      

        for (int i = 0; i < allJourney.size(); i++) 
        {  

            String JourneyId =   allJourney.get(i).getJourneyid().toString(); /// TypeCast Exception Occured...
        } 
```

Following is the Model class for journey.

```
 public class journey 
{               
      int id ;
      String journeyid ;
      String linename ;
      Date operatingday ;
      Date realtimearrival;
      String  realtimearrivalstopname;
      String realtimearrivalstopnumber ;
      Date realtimedeparture ;
      String realtimedeparturestopname ;
      String realtimedeparturestopnumber;
      Date schedulearrival ;
      String schedulearrivalstopname ;
      String schedulearrivalstopnumber ;
      Date scheduledeparture ;
      String scheduledeparturestopname ;
      String  scheduledeparturestopnumber ;
      int arrivaldelay ;
      String direction ;
      String journeyoperator ;
      String schedulevehicletype ;
      String  vehicleid ;
      Double  distancerealtime;
      int  maximumspeedrealtime ;
      Boolean calledatallstops ;
      int departuredelay ;
      int maximumdelay; 
      int minimumdelay ;
      String phonenumber ;
      int comment_id ;
      Boolean arrivaldelayprojection ;
      Boolean  departuredelayprojection;
      Boolean maximumdelayprojection ;
      Boolean  maximumspeedrealtimedataincomplete;
      Boolean  minmaxdelaydataincomplete ;
      Boolean minimumdelayprojection ;
      Boolean realtimearrivalprojection ;
      Boolean  realtimedepartureprojection ;
       } 
```

Following is hibernate config file corresponding to above journey model

```
<?xml version="1.0"?>
<hibernate-mapping>
    <class name="de.db.journeyTracker.model.journey" table="JOURNEY">
        <id name="id" type="int">
            <column name="ID" />
            <generator class="assigned" />
        </id>
        <property name="journeyid" type="java.lang.String">
            <column name="JOURNEYID" />
        </property>
        <property name="linename" type="java.lang.String">
            <column name="LINENAME" />
        </property>
        <property name="operatingday" type="java.util.Date">
            <column name="OPERATINGDAY" />
        </property>
        <property name="realtimearrival" type="java.util.Date">
            <column name="REALTIMEARRIVAL" />
        </property>
        <property name="realtimearrivalstopname" type="java.lang.String">
            <column name="REALTIMEARRIVALSTOPNAME" />
        </property>
        <property name="realtimearrivalstopnumber" type="java.lang.String">
            <column name="REALTIMEARRIVALSTOPNUMBER" />
        </property>
        <property name="realtimedeparture" type="java.util.Date">
            <column name="REALTIMEDEPARTURE" />
        </property>
        <property name="realtimedeparturestopname" type="java.lang.String">
            <column name="REALTIMEDEPARTURESTOPNAME" />
        </property>
        <property name="realtimedeparturestopnumber" type="java.lang.String">
            <column name="REALTIMEDEPARTURESTOPNUMBER" />
        </property>
        <property name="schedulearrival" type="java.util.Date">
            <column name="SCHEDULEARRIVAL" />
        </property>
        <property name="schedulearrivalstopname" type="java.lang.String">
            <column name="SCHEDULEARRIVALSTOPNAME" />
        </property>
        <property name="schedulearrivalstopnumber" type="java.lang.String">
            <column name="SCHEDULEARRIVALSTOPNUMBER" />
        </property>
        <property name="scheduledeparture" type="java.util.Date">
            <column name="SCHEDULEDEPARTURE" />
        </property>
        <property name="scheduledeparturestopname" type="java.lang.String">
            <column name="SCHEDULEDEPARTURESTOPNAME" />
        </property>
        <property name="scheduledeparturestopnumber" type="java.lang.String">
            <column name="SCHEDULEDEPARTURESTOPNUMBER" />
        </property>
        <property name="arrivaldelay" type="int">
            <column name="ARRIVALDELAY" />
        </property>
        <property name="direction" type="java.lang.String">
            <column name="DIRECTION" />
        </property>
        <property name="journeyoperator" type="java.lang.String">
            <column name="JOURNEYOPERATOR" />
        </property>
        <property name="schedulevehicletype" type="java.lang.String">
            <column name="SCHEDULEVEHICLETYPE" />
        </property>
        <property name="vehicleid" type="java.lang.String">
            <column name="VEHICLEID" />
        </property>
        <property name="distancerealtime" type="java.lang.Double">
            <column name="DISTANCEREALTIME" />
        </property>
        <property name="maximumspeedrealtime" type="int">
            <column name="MAXIMUMSPEEDREALTIME" />
        </property>
        <property name="calledatallstops" type="java.lang.Boolean">
            <column name="CALLEDATALLSTOPS" />
        </property>
        <property name="departuredelay" type="int">
            <column name="DEPARTUREDELAY" />
        </property>
        <property name="maximumdelay" type="int">
            <column name="MAXIMUMDELAY" />
        </property>
        <property name="minimumdelay" type="int">
            <column name="MINIMUMDELAY" />
        </property>
        <property name="phonenumber" type="java.lang.String">
            <column name="PHONENUMBER" />
        </property>
        <property name="comment_id" type="int">
            <column name="COMMENT_ID" />
        </property>
        <property name="arrivaldelayprojection" type="java.lang.Boolean">
            <column name="ARRIVALDELAYPROJECTION" />
        </property>
        <property name="departuredelayprojection" type="java.lang.Boolean">
            <column name="DEPARTUREDELAYPROJECTION" />
        </property>
        <property name="maximumdelayprojection" type="java.lang.Boolean">
            <column name="MAXIMUMDELAYPROJECTION" />
        </property>
        <property name="maximumspeedrealtimedataincomplete" type="java.lang.Boolean">
            <column name="MAXIMUMSPEEDREALTIMEDATAINCOMPLETE" />
          </property>
          <property name="minmaxdelaydataincomplete" type="java.lang.Boolean">
              <column name="MINMAXDELAYDATAINCOMPLETE" />
          </property>
          <property name="minimumdelayprojection" type="java.lang.Boolean">
              <column name="MINIMUMDELAYPROJECTION" />
          </property>
          <property name="realtimearrivalprojection" type="java.lang.Boolean">
              <column name="REALTIMEARRIVALPROJECTION" />
          </property>
          <property name="realtimedepartureprojection" type="java.lang.Boolean">
              <column name="REALTIMEDEPARTUREPROJECTION" />
            </property>
         </class>
    </hibernate-mapping> 
```

and following is the main hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-
configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory >
  <!-- Database connection settings -->
  <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/newTestDB</property>
  <property name="connection.driver_class">org.postgresql.Driver</property>
  <property name="connection.username">postgres</property>
  <property name="connection.password">usman123</property>
  <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
  <!-- SQL dialect - generate SQL for a particular database -->
  <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
  <!-- Echo all executed SQL statements -->
  <property name="show_sql">false</property>
  <!-- Automatic schema creation (begin) === 
<property name="hibernate.hbm2ddl.auto">create</property>  
 Enable Hibernate's automatic session context management -->
  <property name="current_session_context_class">thread</property>
  <!-- Mapping resource configuration files -->
  <mapping resource="de/db/journeyTracker/model/TestTable.hbm.xml"/>
  <mapping resource="de/db/journeyTracker/model/gpspos.hbm.xml"/>
  <mapping resource="de/db/journeyTracker/model/journey.hbm.xml"/>
  <mapping resource="de/db/journeyTracker/model/trip.hbm.xml"/>

    </session-factory> </hibernate-configuration> 
```

* * *

## Edit:

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Integer cannot be cast to de.db.journeyTracker.model.journey
    at de.db.journeyTracker.model.journey.findalljourney(journey.java:323) 
```

I tried the following code.. AS you suggested .. But Still it is giving the exception

```
 List<Object[]> allJourney;
        allJourney = query.list();
        int Count = 0;
        for (Object[] Journey : allJourney)                 
        {                           

           String strJourneyId =  ((journey) Journey[0]).getJourneyid().toString();
           String strOperatingDay = ((journey) Journey[0]).getOperatingday().toString();
           String strLineName = ((journey) Journey[0]).getLinename();
           String strSchedualeDeparture = ((journey) Journey[0]).getScheduledeparture().toString();
           String strSchedualeDepartureStopName = ((journey) Journey[0]).getScheduledeparturestopname();

          System.out.println(strJourneyId + " " + strOperatingDay + " " + strLineName + " " + strSchedualeDeparture + " " + strSchedualeDepartureStopName);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:40:12.517

在 Hibernate 中使用 HSQL 查询尝试这种类型的查询

1>String qryAllJourney = "从旅程 j"; 这将返回所有旅程表记录，没有任何类型转换异常。

或者 - 假设课程旅程有一个适当的构造函数 - 作为一个实际的类型安全 Java 对象： String qryAllJourney = "select new Journey(j.id , j.operatingday, j.linename, j.scheduledeparture, j.scheduledeparturestopname) from Journey ” ;

如果您想了解更多详细信息，请通过此链接。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:44:37.243

这个查询：

```
SELECT j.id , j.operatingday, j.linename,  
       j.scheduledeparture, j.scheduledeparturestopname 
FROM journey j 
```

不选择旅程实例列表。相反，它选择对象数组列表。数组元素与选择列表中的值匹配：

```
 [0] = j.id
   [1] = j.operatingday
   ... 
```

请改用以下内容：

```
 SELECT j FROM journey j 
```

但是，如果您想坚持使用返回的数组，请选择：

```
 List<Object[]>  allJourney = query.list(); 
  //do what ever you need to do with result:
  for (Object[] row: allJourney) {
      Integer id = (Integer) row[0];
      Date operatingday = (Date) row[1];
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:42:34.630

这应该是一个 hsql 查询！

```
String qryAllJourney = "SELECT j.id , j.operatingday, j.linename, j.scheduledeparture, j.scheduledeparturestopname FROM journey j"; 
```

应该是这样的；

```
String qryAllJourney = "from Journey"; 
```

# c# - Why doesn't IList support AddRange

> ID：11538259
> 
> 赞同：97
> 
> 时间：2012-07-18T09:27:36.220
> 
> 标签：c#, .net, ilist

`List.AddRange()` exists, but `IList.AddRange()` doesn't.
This strikes me as odd. What's the reason behind this?

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-18T09:37:14.997

因为界面应该易于实现并且不包含“除了厨房之外的所有内容”。如果添加`AddRange`，则应添加`InsertRange`和`RemoveRange`（为了对称）。一个更好的问题是为什么没有`IList<T>`类似于接口的接口的扩展方法`IEnumerable<T>`。（就地`Sort`, `BinarySearch`, ... 的扩展方法会很有用）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-07-31T12:04:10.050

对于那些想要在 IList 上具有“AddRange”、“Sort”、... 的扩展方法的人，

下面是`AddRange`扩展方法：

```
 public static void AddRange<T>(this IList<T> source, IEnumerable<T> newList)
 {
     if (source == null)
     {
        throw new ArgumentNullException(nameof(source));
     }

     if (newList == null)
     {
        throw new ArgumentNullException(nameof(newList));
     }

     if (source is List<T> concreteList)
     {
        concreteList.AddRange(newList);
        return;
     }

     foreach (var element in newList)
     {
        source.Add(element);
     }
} 
```

我创建了一个小型库来执行此操作。我发现它比必须在每个项目上重做其扩展方法更实用。

有些方法比 List 慢，但它们可以完成工作。

这是让他们感兴趣的 GitHub：

[IListExtension 存储库](https://github.com/Emilien-M/IListExtension)

# python - Function call with a variable number of parameters?

> ID：11538266
> 
> 赞同：1
> 
> 时间：2012-07-18T09:28:04.417
> 
> 标签：python, function

> **Possible Duplicate:**
> [Having more then one parameter with def in python](https://stackoverflow.com/questions/11550285/having-more-then-one-parameter-with-def-in-python)

I need to make a function call which will contain a variable number of parameters - The parameters are contained in a list.

It would "look" like this for a list of 2 items:

```
TheFunction(item1, item2) 
```

And for a list of 3 items:

```
TheFunction(item1, item2, item3) 
```

Is there any easy, pythonic way of doing this? Some kind of loop using `getattr()`, for instance?

The list is of a variable size - I need to be able to call the function with just the list presented as a argument in the code. Specifically, I am calling the client.service.method() function in SUDS to call a web service method. This function accepts a variable number of arguments, I'm simply having trouble with calling it with a variable number of arguments.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:29:34.683

尝试这个，，

`TheFunction(*N_items)`

```
In [88]: def TheFunction(*N_items):
   ....:     print N_items
   ....:

In [89]: TheFunction(1)
(1,)

In [90]: TheFunction(1,2,3)
(1, 2, 3)

In [91]: TheFunction(1,2,3,4,5)
(1, 2, 3, 4, 5) 
```

即使打电话`*`也会帮助你...

```
In [92]: l = [1,2,3,4,5]

In [93]: TheFunction(*l)
(1, 2, 3, 4, 5)

In [94]: l = [1,2]

In [95]: TheFunction(*l)
(1, 2) 
```

# java - 抽象类实现接口

> ID：11538267
> 
> 赞同：1
> 
> 时间：2012-07-18T09:28:08.400
> 
> 标签：java, methods, interface, abstract-class

为什么实现接口的抽象类不需要实现接口的方法，而类却必须实现所有方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:29:30.423

由于抽象类将一个或多个方法的实现留给了它的扩展类，它可以通过实现额外的接口对它继承的方法契约做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:32:40.407

类不必实现已实现接口的所有方法。如果类没有实现接口的所有方法，则可以将其声明为抽象类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:35:55.993

根据定义，抽象类是可以具有未实现方法的类。如果一个抽象类实现了一个接口，它不一定要实现任何继承的方法。这并不意味着你不能实现它们中的任何一个。:D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T16:29:59.693

最终我们必须创建一个具体的类。只有这样我们才能创建一个实例并使用它。此外，在实现接口之后，抽象类不会成为具体类，但如果具体类留下未实现的方法，则它必须成为抽象类。

# php - 无法使 mysql_query 工作

> ID：11538274
> 
> 赞同：0
> 
> 时间：2012-07-18T09:28:33.237
> 
> 标签：php, mysql, forms

无法使此查询工作

```
if (isset($_GET['id'])){
  $id = $_GET['id'];

  if(isset($_POST['submit'])) {

    $id = (int)$id;
    $caption = mysql_real_escape_string($_POST['caption']);

    mysql_query(" UPDATE  `photo_gallery`.`photograph` SET  `caption` ='{$caption}' WHERE  `photograph`.`id` ='{$id}' "); 
```

但是当我手动将其更改为此时，它可以工作

```
mysql_query("UPDATE  `photo_gallery`.`photograph` SET  `caption` =  'bruv' WHERE  `photograph`.`id` =3"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:34:54.343

{$id} 周围有单引号。如果您的 id 是数据库中的提示，则不应引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:40:37.770

尝试这个：

```
mysql_query(" UPDATE  `photo_gallery`.`photograph` SET  `caption` ='".$caption."' WHERE  `photograph`.`id` = '".$id."' "); 
```

也用于`intval`解析 int instread。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:51:37.937

问题可能来自mysql_real_escape_string。在新版本中，转义是由 mysql 而不是由 php 完成的，所以....对我来说它是这样工作的。

```
$caption = $_POST['caption'];

mysql_query(" UPDATE  `photo_gallery`.`photograph` SET  `caption` ='".mysql_real_escape_string($caption)."' WHERE  `photograph`.`id` ='".$id."' "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:37:23.167

您的 SQL 命令中的花括号是否有原因？试试这个：

```
mysql_query(" UPDATE  `photo_gallery`.`photograph` SET  `caption` ='$caption' WHERE  `photograph`.`id` ='$id' "); 
```

# workflow - BPMN 2.0 的流程引擎

> ID：11538278
> 
> 赞同：7
> 
> 时间：2012-07-18T09:28:46.290
> 
> 标签：workflow, jbpm, business-process-management, bpmn, activiti

我正在对所有现有的 BPMN 2.0 流程引擎（例如 Activiti、jBPM 等）进行比较。我准备了一个执行下面给出的 BPMN 2.0 的 4 个流程引擎的列表；

流行的符合 BPMN 2.0 的开源引擎：

```
Activiti: http://www.activiti.org/
jBPM: http://www.jboss.org/jbpm
Bonita: http://www.bonitasoft.com/ 
```

商用引擎：

```
ActiveVOS: http://www.activevos.com/products 
```

如果您通过在上面的列表中添加任何现有的流程引擎（用于 BPMN 2.0）以及所有之间的快速比较来加强我的研究，我将不胜感激。

我宁愿做一个非常简短的比较，只列出重要的特性（区分特性，比如一个人可以做的事情，其他人不能做的事情，许可，与其他产品（如 tomcat 和 JBoss 以及操作系统等）的依赖关系）

PS：我在 Activiti vs jBPM 上发现了很多，但你的回答仍然是一个忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-07T03:31:52.027

我对 Activiti 很失望。它应该被称为 Spring BPM，因为没有它它就不能很好地工作。如果您不介意使用 Spring，那么 Activiti 可能更合适。如果您使用的是 JEE/CDI，那么 JBPM 更合适。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T15:59:45.753

我无法为您提供全面的比较，但我可以为您提供一些建议，以帮助您进行评估：

1.  一本“ [Activiti in Action](http://www.manning.com/rademakers2/) ”一书刚刚出版（2012 年 7 月），其中您将有一节回顾其他 BPMN 流程引擎（第 1.2.3 节 - 了解竞争对手）。
2.  对于 Activiti，最近还存在一个名为[camunda fox BPM Platform](http://www.camunda.com/fox/)的商业支持版本。[它们还提供了与此处](http://www.camunda.com/fox/enterprise/open-source-vs-enterprise/)提供的附加值的比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-15T20:40:09.113

我也做过这样的研究。以下是与我们的具体用例相关的关键点：

1.  博尼塔：

Bonita 采用零编码方法，这意味着它们提供了一个易于使用的 IDE 来构建您的流程，而无需编码。为此，Bonita 提出了连接器的概念。例如，如果您想使用 Web 服务，它们会为您提供图形向导。缺点是您必须手动编写纯 XML SOAP 信封并将其复制到图形文本框中。这种方法的问题在于，您只能实现 Bonita 预期的用例。如果你想集成一个 Bonita 没有为其开发连接器的系统，你必须自己编写这样的连接器，这是非常痛苦的。例如，Bonita 提供了一个 SOAP 连接器来使用 SOAP Web 服务。此连接器仅适用于 SOAP 1.2，但不适用于 SOAP 1.1 ([http://community.bonitasoft.com/answers/consume-soap-11-webservices-bonita-secure-web-service-connector](http://community.bonitasoft.com/answers/consume-soap-11-webservices-bonita-secure-web-service-connector)）。如果您有一个带有 SOAP 1.1 的遗留应用程序，那么您无法轻松地将这个系统集成到您的流程中。数据库也是如此。专用数据库版本只有几个数据库连接器。如果您的版本与连接器不匹配，则必须自己编写代码。

此外，Bonita 在免费社区版中不支持 LDAP 或 Active Directory Sync，这对于生产环境来说是一个相当不错的选择。另一件需要考虑的事情是，Bonita 是根据 GPL / LGPL 许可证获得许可的，当您想将 Bonita 集成到另一个企业应用程序中时，这可能会导致问题。此外，社区支持非常薄弱。有几个帖子已超过 2 年，这些帖子仍未得到答复。

另一个重要的事情是业务-IT-对齐。建模流程是 IT 和业务分析师参与其中的协作学科。这就是为什么您需要为两个用户组提供足够的工具（例如，为开发人员提供的 Eclipse 插件和为业务人员提供的易于使用的 Web 建模器）。Bonita 只提供 Bonita Studio，需要安装在你的机器上。这个IDE技术性很强，不适合商业用户。因此，很难与 Bonita 实现 Business-IT-Alignment。

Bonita 是一个 BPM 工具，用于非常琐碎和简单的流程。由于零编码方法，学习曲线非常低，您可以非常快速地开始建模。您需要较少的编程技能，并且无需编码即可实现您的流程。但是一旦您的流程变得非常复杂，由于缺乏灵活性，Bonita 可能不是最佳解决方案。您只能实现 Bonita 预期的用例。

jBPM：

jBPM 是一个非常强大的开源 BPM 引擎，它有很多特性。Web 建模器甚至支持一些 van der Aalst 工作流模式的预制模型 (workflowpatterns.com)。Business-IT-Alignment 是可以实现的，因为 jBPM 提供了 Eclipse 集成以及基于 Web 的建模器。有点棘手的是，据我所知，您只能在 Web 建模器中定义表单，而不能在 Eclipse 插件中定义。总而言之，jBPM 是在公司中使用的不错选择。我们最引人注目的是可扩展性。jBPM 基于规则引擎 Drools。这导致整个流程实例在数据库中作为 BLOBS 持久化。当您考虑搜索和可扩展性时，这是一个重要的展示因素。

此外，由于复杂性，学习曲线非常高。jBPM 不像 BPMN-Standard 建议的那样提供服务任务。相反，您必须定义自己的 Java 服务任务，并且必须在引擎中手动注册它们，这会导致编程非常低级。

活动：

最后，我们选择了 Activiti，因为这是一个非常易于使用的基于框架的引擎。它提供了一个 Eclipse 插件以及一个现代的 AngularJS Web-Modeler。这样，您就可以实现Business-IT-Alignment。REST-API 由 Spring Security 保护，这意味着您可以使用单点登录功能非常轻松地扩展引擎。由于 Apache 许可证 2.0，没有 copyleft，这意味着您在使用和可扩展性方面完全免费，这在生产环境中非常重要。

此外，BPMN-coverage 非常好。并非所有 BPMN 元素都已实现，但我不知道有任何引擎可以做到这一点。

Activiti Explorer 是一个演示前端，它演示了 Activiti API 的使用。由于此前端基于 VAADIN，因此可以非常轻松地进行扩展。社区非常活跃，这意味着如果您有任何问题，可以非常快速地获得帮助。

Activiti 为外部表单技术提供了良好的集成点，这对于生产使用非常重要。所有候选人的形式技术都​​非常严格。因此，将 XForms 之类的标准表单技术与 Engine 结合使用是有意义的。甚至这样更复杂的事情也可以通过 formKey-Attribute 来实现。

Activiti 不遵循零编码方法，这意味着如果您想编排服务，您将需要一些编码。但即使是与 SOAP 服务的通信也可以通过使用 Java 服务任务和 Apache CXF 来实现。编码工作量很低。

我希望我的关键点可以帮助您做出决定。需要明确的是，这不是 Activiti 的广告。正确的产品选择取决于具体的用例。我只想指出我们项目中最重要的几点。

最好的问候本

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-10T17:20:35.830

在我看来，Camunda BPM Platform 目前是开源领域的领导者。你提到了开源？因此，如果您愿意，请尝试 camunda： - 以 BPMN 为重点的干净引擎（共享、可嵌入或“远程”） - 干净且可工作的 REST API - 具有基本管理工具和开发就绪 API 的开箱即用平台 - 最大的开源社区（我的persnoal oppinion) - java 生态系统中的最佳方法。- 如果你喜欢 Java。- 如果你想让你的流程被你的 IT 人群接受。 [http://www.camunda.com/fox/product/details/](http://www.camunda.com/fox/product/details/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T19:00:01.853

Nommy，你应该看看 Roubroo——一个为原生支持 BPMN 2.0 而构建的流程引擎。它没有为支持新标准而改造旧流程引擎的遗留问题。它支持 BPMN 2.0 执行语义，包括 IOR 网关，我认为这是在网络图中定义业务流程的关键。jBPM 和 Activiti 基于底层 PVM，它对某些工作流模式有很好的支持，但不支持其他工作流模式。看看这篇研究论文：[http](http://eprints.qut.edu.au/14320/1/14320.pdf) ://eprints.qut.edu.au/14320/1/14320.pdf 和[http://www.workflowpatterns.com/evaluations/opensource/](http://www.workflowpatterns.com/evaluations/opensource/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T15:16:25.480

jBPM5 与环境无关，它不依赖于 JBoss，您可以在每个应用服务器、Servlet 容器或 SE 环境中运行它。jBPM5 获得了 Apache Software License V2 的许可，我认为这是一个非常好的主意。您当然可以在官方页面中找到更多信息。

干杯

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-03T12:35:31.283

关于jBPM：jBPM 是一个用Java 编写的开源工作流引擎，可以执行BPMN 2.0 中描述的业务流程（或早期版本中它自己的流程定义语言jPDL）。它由 JBoss 公司在 ASL（或早期版本中的 LGPL）下发布它包括，

*   与业务规则和事件处理的强大集成。
*   通过 Guvnor 存储库和管理控制台进行流程协作、监控和管理。
*   使用独立的 WS-HT 人工任务服务进行人工交互。

本质上，jBPM 将图形化流程描述作为输入。流程由与顺序流连接的任务组成。流程代表一个执行流程。流程的图形图（流程图）用作非技术用户和开发人员之间交流的基础。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-06T10:57:02.693

看看[Zeebe.io](https://zeebe.io) - 一个现代的云原生工作流引擎，具有一流的 Node.js 支持。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-12T22:43:09.013

还可以看看[Imixs-Workflow](http://www.imixs.org)，它是一个以人为中心的工作流引擎。与通常的引擎不同，Imixs 工作流程的特点是对以用户为中心的强大支持。

以人为本的业务流程管理意味着以面向任务的方式支持人的技能、活动和协作。使用这样的工作流引擎，您可以在基于 BPMN 2.0 标准的事件驱动的 BPM 架构中保护和安全地分发业务数据。

Imixs-Workflow 引擎是开源的，可以集成到 Jakarta EE 或开箱即用的部署中，微服务在[Docker](https://www.imixs.org/sub_microservice.html)容器中运行

# android - 以编程方式缩小 android WebView

> ID：11538280
> 
> 赞同：3
> 
> 时间：2012-07-18T09:28:50.593
> 
> 标签：android, cordova, webview

我需要找到一种方法来以编程方式缩小 android 上的 WebView。背景：我创建了一个具有固定布局的 phonegap/cordova 网络应用程序。我正在使用这些设置来正确显示跨设备的应用程序：

```
this.appView.getSettings().setUseWideViewPort(true); 
this.appView.getSettings().setLoadWithOverviewMode(true);
this.appView.getSettings().setSupportZoom(true);
this.appView.getSettings().setDefaultZoom(ZoomDensity.FAR);
this.appView.getSettings().setBuiltInZoomControls(true);
this.appView.setInitialScale(0); 
```

到目前为止，它运行良好，直到文本输入字段获得焦点。然后应用程序被重新缩放并且不可能返回到正确的视图。我搜索并解决了这个问题一天多，现在尝试了许多可能的解决方案，但没有一个对我有用。我现在正在研究的方法是在文本输入字段失去焦点时进行本机调用，然后重置缩放。但我不知道重置缩放的方法。

`webView.zoomOut();`太慢了，`webView.setInitialScale(..);`什么也不做。

我正在寻找类似的东西`webView.setZoomLevel(..);`，`webView.setScale(..);`但我在 api 中找不到它。

拔掉我的头发。请帮忙。

顺便说一句，我的元视口设置是

```
<meta name="viewport" content="width=640,height=device-height,target-densityDpi=device-dpi" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:45:50.967

这个问题没有答案。`zoomOut()`我想除了使用该功能缩小之外，没有其他方法可以设置缩放级别。所以我不得不忍受这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:59:56.747

这个问题中的一个回答有帮助吗？ [如何设置 webview 的初始缩放/宽度](https://stackoverflow.com/questions/3808532/how-to-set-the-initial-zoom-width-for-a-webview)

Brian首先建议：webview.getSettings().setUseWideViewPort(true); 然后 littleFluffyKitty 添加：使用 setInitialScale(50) 以及其他缩放设置。

祝你好运，我希望比我更有智慧的人能给你一个更好的答案。

# iphone - 导入 iOS 5.1 SDK 后 Xcode 4.2 运行缓慢

> ID：11538283
> 
> 赞同：0
> 
> 时间：2012-07-18T09:29:04.167
> 
> 标签：iphone, ios, xcode, osx-snow-leopard

解决这个问题后：[Xcode 4.2 with iOS 5.0 not detection iPhone iOS 5.1.1](https://stackoverflow.com/questions/11451304/xcode-4-2-with-ios-5-0-not-detecting-iphone-ios-5-1-1)我不幸发现自己的 Xcode 运行速度太慢，甚至滚动视口也需要几分钟，更不用说在设备上构建需要 5 分钟10秒...有谁知道是否以及如何解决这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:45:07.167

尝试使用最新版本的 Xcode 4.2.3 而不是 Xcode 4.2。因为它比以前的版本更轻。并且请使用至少 4GB 的 RAM 才能顺利运行。

# sql-server - 如何根据隔离级别读取原始数据

> ID：11538285
> 
> 赞同：2
> 
> 时间：2012-07-18T09:29:08.617
> 
> 标签：sql-server, tsql, isolation-level

我的测试表：

```
CREATE TABLE [dbo].[Personel](
    [PersonelID] [int] NOT NULL,
    [Name] [nchar](10) NULL,
 CONSTRAINT [PK_Personel] PRIMARY KEY CLUSTERED 
(
    [PersonelID] ASC
)
) 
```

我的测试数据：

```
insert into Personel
values (1, 'Jack')
, (2, 'John')
, (3, 'Kevin') 
```

连接 A：

```
begin tran
update Personel
set Name = 'Michael'
where PersonelID = 1 
```

连接 B：

```
SET TRANSACTION ISOLATION LEVEL ????

SELECT Name 
FROM Personel WITH (????)
where PersonelID = 1 
```

连接 A 启动事务并尝试更新数据，但事务仍在进行中。连接 B 尝试读取正在更新的数据。

有没有办法（隔离级别或提示或这两者的组合）在事务提交或回滚之前查看原始数据（Jack，而不是 Michael）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:45:41.463

SNAPSHOT（又名行版本控制）。

在快照隔离下，当 ti 在连接 B 中启动事务时，连接 B 将按原样查看数据（即使您没有启动显式事务，SELECT 语句也会启动隐式事务）。请参阅[了解基于行版本控制的隔离级别](http://msdn.microsoft.com/en-us/library/ms189050%28v=sql.105%29.aspx)：

> 快照事务执行的读取操作检索在快照事务启动时已提交的每一行的最后一个版本。

必须在数据库中明确启用 SNAPSHOT 支持：

```
ALTER DATABASE <DatabaseName> SET ALLOW_SNAPSHOT_ISOLATION ON; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:46:19.507

您可以在 SNAPSHOT 隔离级别访问旧版本的数据。

这要求数据库在开始之前启用快照隔离：

```
ALTER DATABASE <dbname> SET ALLOW_SNAPSHOT_ISOLATION ON 
```

然后在连接 B

```
SET TRANSACTION ISOLATION LEVEL SNAPSHOT

select * from Personel 
```

快照隔离有一些性能注意事项，因为它复制了读入 tempdb 的行。

[文档参考](http://msdn.microsoft.com/en-us/library/ms173763%28v=sql.105%29.aspx)

# iphone - iphone 应用程序崩溃很少有人可以通过以下日志告诉我崩溃的原因吗？

> ID：11538288
> 
> 赞同：-2
> 
> 时间：2012-07-18T09:29:23.460
> 
> 标签：iphone, ios, ipad

我正在使用带有四个选项卡的选项卡栏应用程序，在选项卡中的两个视图之间切换时，我遇到了问题，告诉我为什么会发生这种情况并帮助我解决这个问题。这是应用程序崩溃时的日志。

```
 Mon Jul 16 21:07:55 unknown MyApp[167] <Warning>: NVVC Dealloc 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.company.MyApp[0xe271]) Bug: launchd_core_logic.c:2688 (24132):10 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.company.MyApp[0xe271]) Working around 5020256\. Assuming the job crashed. 
        Mon Jul 16 21:08:23 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.company.MyApp[0xe271]) Job appears to have crashed: Segmentation 
        fault 
        Mon Jul 16 21:08:23 unknown SpringBoard[29] <Warning>: Application 'MyApp' exited abnormally with signal 11: Segmentation fault 
        Mon Jul 16 21:09:04 unknown lockdownd[20] <Error>: (0x403000) handle_connection: Could not receive USB message #7 from Xcode. Killing connection 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x55fb]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilephone[0xa13c]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.MyApp.app[0x137]) Exited: Killed 
        Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (com.apple.accessoryd) Exited: Killed 
        Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed 
        Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Memory level is not normal (15%). Delaying auto-relaunch of 'Mail' for 30 seconds. Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'app' exited abnormally with signal 9: Killed 
        Mon Jul 16 22:00:42 unknown SpringBoard[29] <Warning>: Application 'Phone' exited abnormally with signal 9: Killed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:03:28.640

根据查看您的崩溃日志，您的应用程序（即“MyApp”）由于分段错误而崩溃。它可能有不同的原因，可能的原因是任何变量被使用但它已经被释放或任何属性变量声明和定义冲突等。

我的建议是为此问题设置 NSZombiEnabled（在您的 XCode 项目中）并再次查看崩溃日志。使用 NSZombieEnabled，您将在崩溃日志中获得更详细的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:13:38.977

您的第二种观点可能有问题。您似乎不会在打开调试器并启用异常的情况下运行项目，您应该首先执行此操作。如果这无助于开始将一些 NSLogs 添加到您的第二个视图中，那么您可以在崩溃前查看它的进展情况。

# c - 超出范围的 C 数组内容是 '\0' 但不是随机值

> ID：11538294
> 
> 赞同：1
> 
> 时间：2012-07-18T09:29:31.913
> 
> 标签：c, string

我有一个数组

```
char * string = “hello”； 
```

当我阅读`string[5]`时，值为0。这不应该是一个随机值吗？

我的疑问来自于我`memcmp`用来比较两个数组时。argv 长度比数组长度长，但可以正常工作。我知道`memcmp`它在读取“\0”时停止，但数组没有“\0”。我在 Dev C++ 上对此进行了测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:30:38.573

不，该数组`"hello"`包含六个`char`s，最后一个是`'\0'`。所以在你的情况下`string[5]`是可以保证的`'\0'`。`string[6]`然而，给你未定义的行为。

但`memcmp`不会停在 0 字节处，只会停在 0 字节处`strcmp`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T09:35:51.077

这`"hello"`是一个字符串常量，保证以空值结尾。这意味着它在`'\0'`您指定的最后一个字符之后包含一个附加字符。

换句话说，它实际上相当于：

```
char string[] = {'h', 'e', 'l', 'l', 'o', '\0'}; 
```

您可以使用以下方法轻松检查：

```
#include <stdio.h>

char string[] = "hello";

int main()
{
    printf("%d\n", sizeof(string));
    return 0;
} 
```

（请注意，您不应该在生产代码中使用`%d`with ）`sizeof()`

该程序将输出`6`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:56:29.083

是的 memcmp 可以比较一个没有 '\0' 的数组。
例如看看这段代码。

```
int main () {

     char str1[]= "hello";
     char str2[]= "hello";
     std::cout << memcmp(str1, str2, 5);
     std::cout << memcmp(str1, str2, 6);
     return 0;
} 
```

它们都在屏幕上打印 0。大小为 5 时，比较时不带 '\0'。当 size 为 6 时，还比较 '\0'。memcmp 只是比较内存块。

# iphone - iOS：将 CGRectIntersectsRect 限制为一个交叉点？

> ID：11538296
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:29:43.540
> 
> 标签：iphone, objective-c, ios, sdk, cgrect

我正在使用基本的 CGRectIntersectsRect 来检测精灵之间的碰撞，如下所示：

```
if (CGRectIntersectsRect(staff.frame, imgView.frame)) {
    [self playSound];
} 
```

然而，由于`staff.frame`在 的帧上持续移动`imgView.frame`，该方法`playSound`被多次触发 - 与精灵相互覆盖所需的次数一样多 - 导致该`playSound`方法的播放量过多且不必要。

话虽如此，是否可以将`CGRectIntersectsRect`方法限制为在破坏检测之前只允许一次碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:04:25.063

您可以做的是声明一个`BOOL`实例变量并使用它在每次碰撞时只播放一次声音。您的代码将是这样的：

```
if (CGRectIntersectsRect(staff.frame, imgView.frame)) {
    if (!soundPlayed) {
        soundPlayed = YES;
        [self playSound];
    }
}
else {
    soundPlayed = NO;
} 
```

让我知道这是否适合您。

# windows - 以独立于区域设置的方式访问 Windows 性能计数器

> ID：11538299
> 
> 赞同：3
> 
> 时间：2012-07-18T09:29:49.220
> 
> 标签：windows, powershell, performancecounter, zabbix

我有一组混合服务器，一些运行英语 Windows，另一些运行意大利语 Windows。

有没有一种方法可以在不使用依赖于语言环境的字符串的情况下读取性能计数器的值？

[我在Zabbix 文档](http://www.zabbix.com/documentation/1.8/manual/config/windows_performance_counters)上读到应该可以使用类似的数字格式，`\2\6`但它对我不起作用，在 Zabbix 和 Powershell 中都没有。

我想监控 CPU 利用率 ( `\Processore(_Total)\% Tempo processore`)。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:12:14.940

解决方案很简单：唯一的问题是将所有信息放在一起。

首先，打开 regedit 并转到以下键：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib 
```

您将找到以三位数字命名的条目（例如 009、010、...）。这三个数字是一个语言 id：009 是英语，010 是意大利语，依此类推。

在每个条目中，您都会找到一个名为 Counter 的键。打开它（双击）并在文本编辑器中复制您首选语言的内容。您将拥有类似于以下内容的内容：

```
1
1847
2
System
4
Memory
6
% Processor Time
10
File Read Operations/sec
12
File Write Operations/sec
14
File Control Operations/sec
16
... 
```

如您所见，每个标签下方都有一个数字：即要使用的索引。例如， 的索引`% Processor Time`是`10`。

如果你有一个复合表达式（例如，`\Processore(_Total)\% Tempo processore`），你必须使用`\238(_Total)\6`（我使用意大利标签）。

在 Zabbix 中，用于监控过去 15 分钟平均 CPU 利用率的表达式是：

```
perf_counter[\238(_Total)\6, 900] 
```

我希望已经说完了：如果有什么不清楚的地方，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:19:18.747

您没有标记 powershell 或 zabbix，所以我想您不介意如何在 C 中执行此操作的示例：如果这是目标，您可以在 powershell 中使用它。

通常（正如您所指出的）您可以按索引查询。

他们在 MSDN 上有一个非常广泛的示例，它实际上是一个功能齐全的程序，包括如何按索引查询。：[MSDN：检索计数器数据](http://msdn.microsoft.com/en-us/library/aa373178%28v=vs.85%29.aspx)

# javascript - 带有转义字符的 Javascript 子字符串

> ID：11538304
> 
> 赞同：0
> 
> 时间：2012-07-18T09:30:07.193
> 
> 标签：javascript

我有一个如下的字符串

```
var string1 = " folder\\subfolder1\\subfolder2 " 
```

我想用 string1.replace 将“\”替换为“/”以便

```
var string2 = "folder/subfolder1/subfolder2" 
```

我试过了

```
 var rep = path.replace("\\", "/"); 
```

但不工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:32:15.570

您需要在全局范围内执行此操作，例如使用正则表达式文字和`g`标志；

```
var rep = path.replace(/\\/g, "/"); 
```

# php - php中变量传递的xml转换

> ID：11538308
> 
> 赞同：0
> 
> 时间：2012-07-18T09:30:24.743
> 
> 标签：php, xml, xslt

我的输入 xml 文件：

```
 <root>
 <child/> 
</root> 
```

我的预期输出将在视图页面源中：

```
<root>
  <child> 
    <new_element>new1</new_element>
    <new_element>new2</new_element> 
    <new_element>new3</new_element>
  </child>
</root> 
```

我在查看页面源中得到的实际输出：

```
<root>
  <child>&lt;new_element&gt;new1&lt;/new_element&gt;   &lt;new_element&gt;new2&lt;/new_element&gt;   &lt;new_element&gt;new3&lt;/new_element&gt;</child>
</root> 
```

我的 xlst 代码是：

```
<xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="test"/>

<xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="/root/child">
    <xsl:copy>
        <xsl:value-of select="$test"/>
    </xsl:copy> 
</xsl:template>

</xsl:stylesheet> 
```

我的PHP代码是：

```
<?php
            $xslt = new xsltProcessor;
            $xslt->importStyleSheet(DomDocument::load('test.xsl'));

            $val = '<new_element>new1</new_element>   <new_element>new2</new_element>   <new_element>new3</new_element>';
            $xslt->setParameter('','test',$val);
            echo $view = $xslt->transformToXML(DomDocument::load('test.xml'));
?> 
```

通过在浏览器中运行它，我得到了不解析 xml 标签的输出。请找出我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:52:10.607

参数 $test 键入为字符串，而**不是**文档，因此您的样式表的行为与您要求的行为完全相同。我不相信有任何标准的 XSLT 函数可以将文本字符串解析为 XDM 文档。

为了达到你的目的，你应该传递一个文件名作为你的参数值，而不是 text.xsl 的字符串内容。然后在您的样式表中，您可以使用 document() 函数。

# objective-c - 视网膜显示器的矩形尺寸是多少？

> ID：11538312
> 
> 赞同：0
> 
> 时间：2012-07-18T09:30:34.783
> 
> 标签：objective-c, ios, xcode, retina-display

我只是想知道我的图像是否有 x*y 尺寸。

当视网膜显示设备显示使用 a 创建的图像时`CGRectMake(0,0,x,y)`，那会是像素化图像吗？

应该是正确的尺寸`CGRectMake(0,0,x/2,y/2)`吗？

如何判断图像应具有的矩形大小？

我需要使用`contentScaleFactor = [UIScreen mainScreen].scale;`吗？

或者也许除以它：`CGRectMake(0,0,x/contentScaleFactor,y/contentScaleFactor)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:36:12.970

尺寸[以*点*而不是像素](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW15)来衡量。视网膜和非视网膜显示设备都有相同的点。在非视网膜显示设备上，一个点等于一个像素，但在视网膜显示设备上，一个点等于两个像素。因此，您将同时使用`CGRectMake(0,0,x,y)`两者。

为避免像素化图像，请确保提供带有`@2x`后缀的双分辨率图像。例如，如果您的常规图像命名为`foo.png`，则视网膜版本应命名为`foo@2x.png`。

编码时，请`foo.png`始终参考。`foo@2x.png`当您的应用程序在视网膜显示设备上运行时，将自动使用双分辨率图像 ( )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:22:06.147

对于非视网膜图像 (myImage.png) 尺寸应为 21x21，您应放置另一个尺寸为 42x42 且带有 @2x 后缀 (myImage@2x.png) 的图像。在代码中你可以写一些想法

```
UIImage *img = [UIImage imageNamed:@"myImage"]; 
```

此调用将根据 iPad 自动选择正确的文件。

正确的尺寸应该是

```
CGRectMake(0,0,21,21) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:36:07.757

术语“视网膜”和“非视网膜”与显示屏的分辨率有关，与显示屏的尺寸无关。分辨率与每英寸（点）的像素数有关。

在这种情况下编码时，尺寸将保持不变，只有图像分辨率会改变。

要了解如何在应用程序包中使用不同大小的资源，您可以查看此链接[http://panditpakhurde.com/tech/?p=365](http://panditpakhurde.com/tech/?p=365)

# ms-access - Access 2003 查询中的文本字段被正方形和亚洲符号替换

> ID：11538320
> 
> 赞同：1
> 
> 时间：2012-07-18T09:31:12.830
> 
> 标签：ms-access, character, symbols

我在 MS Access 2003 中遇到了一个奇怪的问题。我有一个相当复杂的查询，结合了几个表和查询。其中一个查询包含通过客户 ID 和订单 ID 绑定到订单列表的评论，但显示时的评论被方形符号和亚洲字母的不同组合替换，每条评论成对出现。评论查询本身在独立运行时显示评论很好。

“有趣”的是，我在这些评论的来源方面有几个选择，但无论我选择哪一个，结果都是一样的；正方形和亚洲刻字！甚至直接来自一个表，该表的其他字段在查询中显示良好..

有没有人熟悉这种行为，或者有更好的解决方案？

预先感谢

-维果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:58:36.663

备忘录数据类型在许多情况下都可能成为问题，包括在复杂查询中。您通常可以通过仅选择最左边的 255 个或更少的字符在一定程度上解决该问题。需要谨慎选择备忘录类型。

# c# - 使用ajax，jquery mvc更改下拉列表中的数据

> ID：11538322
> 
> 赞同：1
> 
> 时间：2012-07-18T09:31:16.943
> 
> 标签：c#, jquery, ajax, asp.net-mvc, html.dropdownlistfor

我有一个 dropdownlisftFor ，它从过滤的数据库中填充一些数据，还有一个复选框。这个想法是，当我取消选中该复选框时，我想使用没有过滤器的数据库数据更改填充在下拉框中的数据。

哪个是做这个的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:33:49.617

Ajax 和 jQuery 将是更简单和更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:53:37.773

建议的方法是将您的下拉列表作为一个单独的操作加载，并带有一个 bool 参数`filtered`。你可以在你的视图中调用它`@Html.Action("DropDownList", new {filtered = true})`

然后，当您取消选中该复选框时，调用一个函数，该函数将下拉列表替换为具有未过滤数据的操作。

```
$("#myCheckBox").click(function() {
    if($("#myCheckBox").attr("checked") == "checked"){
        $("#divContainingDropDown").load("../path/to/dropdown/action?filtered=true")
    } else {
        $("#divContainingDropDown").load("../path/to/dropdown/action?filtered=false")
    }
} 
```

此功能将用于过滤和取消过滤列表中的数据。

# android - 将数据从 Drupal 站点检索到 Android 应用程序的最佳方式

> ID：11538324
> 
> 赞同：0
> 
> 时间：2012-07-18T09:31:23.313
> 
> 标签：android, drupal

在 Android 应用程序中检索 Drupal 站点数据的正确方法是什么？

假设我需要将 30 个数据节点检索到列表视图中，其中每一行都使用 layoutInflater。在我的情况下，我从 Json 代码中获取数据，然后将它们保存到数组中，然后将每个数据索引调用到 listView 行中。这是正确的方法吗？

使用 7 个数组来保存数据并继续该过程是否有效？我觉得它并不笨重和不灵活。我对吗？

**已编辑 :: 添加了 JsonCode**

```
receivedJson = Json.getJsonString(Constants.HOST_DOMAIN_NAME
            + serviceEndPoint);

    try {

        /*
         * convert received Json String to Json array with
         * 
         * @getDrupalFinalJsonArray: METHOD
         */
        jsonArray = Json.getDrupalFinalJsonArray(receivedJson,
                objectParent, itemParent);
        /*
         * Define the length of @nodeBodyArray, @nodeAutherNameArray to be
         * the same length of sonArray but -1, since a factecus item added
         * at index(0) this ISSUE SHOULD BE SOLvER !
         */
        nodeTitleArray = new String[jsonArray.length() - 1];
        nodeAuthorNameArray = new String[jsonArray.length() - 1];
        nodeAuthorImageArray = new String[jsonArray.length() - 1];
        nodeCommentCount = new int[jsonArray.length() - 1];
        nodeNid = new int[jsonArray.length() - 1];
        postDate=new String[jsonArray.length()-1];

        nodeNid = Json.convertJsonArrayToIntJavaArray(jsonArray, "nid");
        nodeCommentCount = Json.convertJsonArrayToIntJavaArray(jsonArray,
                "commentcount");
        nodeTitleArray = Json.convertJsonArrayToStringJavaArray(jsonArray,
                "body");
        nodeAuthorNameArray = Json.convertJsonArrayToStringJavaArray(
                jsonArray, "author");
        nodeAuthorImageArray = Json.convertJsonArrayToStringJavaArray(
                jsonArray, "profile");
        postDate=Json.convertJsonArrayToStringJavaArray(jsonArray, Constants.NODE_POST_DATE_TAG);

    } catch (Exception e) {
    }
    adapter = new nodeListAdapter(context,
            android.R.layout.simple_list_item_1, nodeTitleArray,
            nodeAuthorNameArray, nodeAuthorImageArray, nodeCommentCount,
            nodeNid,postDate); // define the list adapter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:22:17.303

我建议用 title、nid、author 等字段制作 Node 类。以及从 Json 读取 Node 的 readJson 方法。

例如：

```
Node nodes[] = new Node[jsonArray.length() - 1];
for (int n = 0; n < jsonArray.length() - 2; n++) {
     nodes[n].readJson(jsonArray[n]);
} 
```

Node.readJson 实现从 json 数组中获取值并将其设置为适当的字段。

# c - Mac OSX Lion 上的 MongoDB C 驱动程序

> ID：11538325
> 
> 赞同：2
> 
> 时间：2012-07-18T09:31:25.303
> 
> 标签：c, mongodb, gcc

我正在尝试为我的应用程序为 mongo db 编写一个基于 C 的小型客户端。首先让我说我已经很长时间没有用C编程了，所以我面临的问题可能是一个非常基本的问题！我只是无法编译我的代码:-)

我正在使用 64 位 Apple Macbook Pro (OSX Lion)。gcc 是：

```
Target: i686-apple-darwin11
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00) 
```

我 git 克隆了[mongo c 驱动程序](https://github.com/mongodb/mongo-c-driver)，执行 git checkout 到 0.6，然后运行 ​​make。

```
make
make install
make test 
```

测试运行良好，库正确安装在 /usr/local/lib/ 中，.h 文件正确安装到 /usr/local/include。

然后我将一段代码复制粘贴到一个名为 data.c 的文件中，如下所示：

```
#include <stdio.h>
#include "mongo.h"

int main() {
  mongo conn[1];
  int status = mongo_connect(conn, "127.0.0.1", 27017);
  return 0;
} 
```

没什么特别的，只是想打开一个连接。当我尝试编译它时，我收到以下错误：

```
gcc --std=c99 -I/usr/local/include -L/usr/local/lib -o data data.c -lmongoc

Undefined symbols for architecture x86_64:
  "_mongo_connect", referenced from:
      _main in ccjPPPVs.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:22:02.487

Mongo-C-driver 动态库构建现在已针对 Mac OS X (Lion) 修复，请参阅

[https://github.com/mongodb/mongo-c-driver/commit/ea89d8fa966ccf601a67e1507e67e829775f6bcb](https://github.com/mongodb/mongo-c-driver/commit/ea89d8fa966ccf601a67e1507e67e829775f6bcb)

[https://jira.mongodb.org/browse/CDRIVER-158](https://jira.mongodb.org/browse/CDRIVER-158)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:04:18.923

mac 上似乎存在问题 - 改为链接静态库。

# java - Java NIO 非阻塞读取返回超时（Linux 内核问题？）

> ID：11538329
> 
> 赞同：0
> 
> 时间：2012-07-18T09:31:32.987
> 
> 标签：java, linux, kernel, nio, nonblocking

我遇到了与此处所述类似的问题：[Java Linux Nonblocking Socket Timeout Behavior](https://stackoverflow.com/questions/1023059/java-linux-nonblocking-socket-timeout-behavior)

我有一个用 Java NIO 实现的应用程序。它跟踪一堆套接字，当它们准备好读取时，我的应用程序将循环读取（删除代码和一些简洁的逻辑）：

```
 if (selkey.isReadable()) {
            int nread;
            while (true) {
                // read the header
                nread = mSocketChannel.read(mHeaderBuffer);
                if (nread == -1)
                    return;
                handle_message_header();
                // read the body
                nread = mSocketChannel.read(mPayloadBuffer);
                if (nread == -1)
                    return;
                handle_message_body();
            }
        } 
```

但是在第一次 read() 中我很少收到超时异常：

```
 java.io.IOException: Connection timed out
    at sun.nio.ch.FileDispatcher.read0(Native Method)
    at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:21)
    at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:202)
    at sun.nio.ch.IOUtil.read(IOUtil.java:175)
    at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:243) 
```

我深入研究了 jdk 源代码，read0 函数只是在套接字句柄上调用 read()。如果 read() 返回 -1 并且 errno == ETIMEDOUT，则会引发“连接超时”异常。

我们不使用 soSetTimeout() 或 tcp keepalive 选项。而且由于我只在客户端的集群上看到它，所以我无法重现它（我也没有 netstat 或其他工具的输出）。

我想知道 linux 内核在哪些情况下会在非阻塞 read() 中返回 ETIMEDOUT？这是错误还是功能？

有关出现此问题的机器的更多信息：

```
Linux slave1 2.6.18-164.e15 #1 SMP Thu Sep 3 03:28:30 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux
CentOS 5.4 
```

谢谢克里斯

编辑：根据我的日志文件（和程序流程），套接字是在服务器接受传入连接时创建的。然后从那个套接字至少有一个成功的recv，但是服务器两次写入失败。然后我在阅读时发现了异常。日志文件没有太多信息——因此，到目前为止，我对我的分析并不是 100% 确定的。我已经为套接字例程添加了很多调试输出，现在我为下一次做好了更好的准备。

感谢所有有用的评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:34:59.020

您正在从尚未正确完成的连接中读取数据。可能您在非阻塞模式下进行了连接，并且您还没有收到`OP_CONNECT`事件；你还没有打电话`finishConnect()`；或者它没有返回`true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:39:34.287

您的客户端尝试连接但未收到响应并最终超时。

EJP，感谢您的更正。

# javascript - 将新方法添加到 javascript 中的对象有什么区别？

> ID：11538331
> 
> 赞同：0
> 
> 时间：2012-07-18T09:31:36.123
> 
> 标签：javascript

在 javascript 中有两种方法可以将方法添加到对象中，以下方法有什么区别？

# 1

`var o = new Object(); o.method = function(){}`

# 2

`var o = new Object(); o.prototype.method = function(){}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:38:05.300

“原型”是全球性的。它可以被所有对象使用。您甚至可以覆盖或删除标准方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:43:10.597

如果您正在为一个对象定义一个新方法，那么它是本地的并且仅用于该对象的这个实例

另一方面，如果您在原型范围内定义它，那么它的全局和方法是为所有实例定义的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:39:03.817

关于原型，您必须首先弄清楚几件事。我在这里写的是一个粗略的概述。还有一些其他的东西涉及到原型是如何工作的，但我试图保持这个简单和基础。

这篇博客文章有一些关于我所说的很好的细节：http: [//javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)

只有函数具有 .prototype 属性。实例具有 .constructor 属性。在您的示例中，“o”是 Object 的一个实例。

所有的构造函数都是函数。

根据您使用的浏览器，实例将具有原型属性，例如：

```
.__proto__ 
```

这就是你通常认为的函数的 .prototype 属性。大多数（全部？）版本的 IE 都不*在*实例上提供“_ _ proto _ _”（用于 SO 格式的额外空格）属性。支持 ECMA5 的浏览器有一个名为 getPrototypeOf() 的方法，它返回实例的原型。

由于构造函数是函数，因此它们具有 .prototype 属性。所以 o.constructor.prototype 是一种以友好的跨浏览器方式访问原型的好方法。对此有一些警告，因为它可以被覆盖。有关更多信息，请参阅博客文章。

所以我们需要做的第一件事是重写你的代码，使语法实际上像我们期望的那样工作。从这一点开始，我将变量名称更改为更清晰：

```
var foo = new Object(); //a new instance of Object
foo.foo_method = function(){ console.log('foo'); } //add a function called 'foo_method' to our instance

var bar = new Object(); // a new instance of Object
bar.constructor.prototype.bar_method = function(){ console.log('bar'); } //add a function called 'bar_method' to the Object prototype

foo.foo_method(); //logs "foo"
foo.bar_method(); //logs "bar"

bar.bar_method(); //logs "bar"

try{
    bar.foo_method(); 
}catch(err){
   console.log(err); //Uncaught TypeError: Object #<Object> has no method 'foo_method' or "TypeError"
}

//Alternate way to add methods to prototypes. Only works in non-IE browsers.
bar.__proto__.woohoo_method = function(){ console.log('woohoo'); }

foo.woohoo_method(); //logs "woohoo"
bar.woohoo_method(); //logs "woohoo"​​​​​ 
```

# c# - 在 C# 的基类中使用派生类的字段

> ID：11538333
> 
> 赞同：0
> 
> 时间：2012-07-18T09:31:58.223
> 
> 标签：c#, inheritance, field, derived

我想要一个在基类中定义的字段，它将影响属于基类的对象的创建。但是，我希望能够在调用基类 cto'r**之前覆盖该字段的值。**一个例子：

```
class ObjNeedParam
{
    public ObjNeedParam(int p)
    {
        val = p;
    }
    int val;
    int Value{get{return Value;}}
}
class Base
{
    public Base()
    {
        obj = new ObjNeedParam(paramVal);
    }
    ObjNeedParam obj;
    protected int paramVal = 1;
}

class Derived : Base
{
    public Derived()
    { 
        //Once I'm here, obj has already been created with paramVal=1 instead of 2!            
        dummy = 3;
    }
    new int paramVal = 2;
    int dummy;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:35:38.743

这种做法有些可疑，因此您可能想在这里重新考虑您的方法。

如果您仍想继续执行此操作，正确的方法是使用一个`virtual`方法将此值提供给基本构造函数：

```
class Base
{
    public Base()
    {
        obj = new ObjNeedParam(GetParamVal());
    }

    protected virtual int GetParamVal() { return 1; }
}

class Derived : Base
{
    protected override int GetParamVal() { return 2; }
} 
```

**您必须确保`override`不使用在的构造`Derived`函数中初始化的`Derived`**任何类成员，因为该构造函数在调用覆盖时尚未运行！请参阅[构造函数中的虚拟成员调用](https://stackoverflow.com/questions/119506/virtual-member-call-in-a-constructor)。

**更新：**这有点值得怀疑，因为在构造某个派生类型的对象时，编译器有一个问题要解决：字段应该以什么顺序初始化，构造函数运行，以便保证任何构造函数内部的任何方法调用都能找到对象处于“可用”状态？

这个问题在一般情况下无法解决，因为根据定义，直到所有构造函数都返回，对象才处于可用状态，我们正在谈论从这些构造函数*内部调用方法。*因此，编译器必须尽可能多地保证，并防止或允许您做无法证明安全的事情。

在这种情况下，C++（有趣地）阻止了无法证明安全的事情，而 C# 允许这样做。因此，这有点值得怀疑，因为如果您不注意，可能会引入错误。更安全的方法是编写类，以便在构造函数运行后初始化该成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:40:21.700

您需要做的*不是*以这种方式初始化该字段。一种替代方法是将字段设为属性，并允许由子类覆盖。或者，允许通过参数在基类构造函数中设置字段，因此您可以编写如下代码：

```
class Base
{
    public Base() : this(1)
    {
    }

    public Base(int param)
    {
        paramVal = param;
    }

    private int paramVal;
}

class Derived : Base
{
    public Derived() : base(2)
    {   
    }
} 
```

最终，一个字段通常是类*私有*的，并且永远不会被派生类覆盖。如果您想公开它以供派生类操作，那么您可能需要字段以外的东西。

# c - 无法使用动态内存分配来存储运行时数组

> ID：11538336
> 
> 赞同：0
> 
> 时间：2012-07-18T09:32:08.727
> 
> 标签：c

以下是我在编写程序时遇到的一个问题，我提示用户输入任意数量的值，然后打印输入的每个整数的结果。

[https://stackoverflow.com/users/319824/gcc](https://stackoverflow.com/users/319824/gcc)在我的最后一个问题[How to test my program against an input test case file](https://stackoverflow.com/questions/11536306/how-to-test-my-program-against-an-input-test-case-file/11536412#11536412)中建议我使用动态内存分配 。

* * *

我的代码如下：

```
#include <stdio.h>
#include <stdlib.h>

struct node
{
int data;
struct node *next;
}*start;

void insertatend(int d)
{
struct node *n;
n=(struct node *)malloc(sizeof(struct node));
n->data=d;
n->next=NULL;

if(start==NULL)
{
    start=n;
}

else
{
    struct node *tmp;
    for(tmp=start;tmp->next!=NULL;tmp=tmp->next);
    tmp->next=n;
}

}

int max(int  a,int b)
{
int c=(a>b)?a:b;
return c;
}

int maxCoins(int n)
{
int arr[n+1],i;
arr[0]=0;
arr[1]=1;
arr[2]=2;
arr[3]=3;

if(n>2)
{

for(i=3;i<=n;i++)
{
    int k= arr[(int)(i/2)]+arr[(int)(i/3)]+arr[(int)(i/4)];
    arr[i]=max(i,k);
}
}

 return arr[n];
}

int main(void)
{
int coins,i;
start=NULL;
struct node*p;

while(scanf("%d",&coins))
{
    insertatend(coins);
}

for(p=start;p!=NULL;p=p->next)
{
    printf("%d\n",p->data);
}

getchar();
return 0;
} 
```

* * *

程序运行成功。我可以提供任意数量的输入，如果我尝试通过按 CTRL + Z 来突破，程序不会响应。我不能对这些问题使用动态内存分配吗？如果是的话，我错在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:36:27.960

```
while(scanf("%d",&coins)) 
```

如果您将 CTRL+Z 发送到您的程序，则`scanf`返回`EOF`，这是一个负数而不是 0，因此 contition 的计算结果为 true 并且您处于无限循环中。测试

```
while(scanf("%d",&coins) > 0) 
```

# python - 是否有 Python 的 Cake 等价物？

> ID：11538343
> 
> 赞同：8
> 
> 时间：2012-07-18T09:32:29.143
> 
> 标签：python, makefile, build-automation

我已经浏览了很多“为 Python 制作”项目，但我找不到任何一个简单的[蛋糕文件](https://github.com/jashkenas/coffee-script/wiki/%5BHowTo%5D-Compiling-and-Setting-Up-Build-Tools)。我正在寻找的是一个 Python 等价物，它可以让我：

1.  将构建命令保存在我的项目根目录中的单个文件中
2.  将每个任务定义为一个简单的函数，并在不带参数的情况下运行“make”文件时自动显示该描述
3.  导入我的 Python 模块

我正在描绘这样的事情：

```
from pymake import task, main

@task('reset_tables', 'Drop and recreate all MySQL tables')
def reset_tables():
    # ...

@task('build_stylus', 'Build the stylus files to public/css/*')
def build_stylus():
    from myproject import stylus_builder
    # ...

@task('build_cscript', 'Build the coffee-script files to public/js/*')
def build_cscript():
    # ...

@task('build', 'Build everything buildable')
def build():
    build_cscript()
    build_stylus()

# etc...

# Function that parses command line args etc...
main() 
```

我已经搜索和搜索，但没有找到类似的东西。如果它不存在，我会自己制作并可能用它来回答这个问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:58:26.843

自己构建一个简单的解决方案并不难：

```
import sys

tasks = {}
def task (f):
    tasks[f.__name__] = f
    return f

def showHelp ():
    print('Available tasks:')
    for name, task in tasks.items():
        print('  {0}: {1}'.format(name, task.__doc__))

def main ():
    if len(sys.argv) < 2 or sys.argv[1] not in tasks:
        showHelp()
        return

    print('Executing task {0}.'.format(sys.argv[1]))
    tasks[sys.argv[1]]() 
```

然后是一个小样本：

```
from pymake import task, main

@task
def print_foo():
    '''Prints foo'''
    print('foo')

@task
def print_hello_world():
    '''Prints hello world'''
    print('Hello World!')

@task
def print_both():
    '''Prints both'''
    print_foo()
    print_hello_world()

if __name__ == '__main__':
    main() 
```

以及使用时的样子：

```
> .\test.py
可用任务：
  print_hello_world：打印你好世界
  print_foo：打印 foo
  print_both：打印两者
> .\test.py print_hello_world
执行任务 print_hello_world。
你好世界！

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T11:32:26.297

你有没有考虑过使用[面料](http://docs.fabfile.org/en/1.4.3/index.html)？

要使用它来实现您的示例，您只需将其添加到名为的文件中`fabfile.py`：

```
def reset_tables():
    ''' Drop and recreate all MySQL tables '''
    # ...

def build_stylus():
    ''' Build the stylus files to public/css/ '''
    from myproject import stylus_builder
    # ...

def build_cscript():
    ''' Build the coffee-script files to public/js/* '''
    # ...

def build():
    ''' Build everything buildable '''
    build_cscript()
    build_stylus() 
```

然后你只需要运行`fab build`构建。您可以运行`fab -l`以查看可用命令及其描述。

猜猜还值得一提的是，fabric 提供了一些您可能（或可能不）觉得有用的其他功能。除此之外，它还有一些功能可以帮助将文件部署到远程服务器，还有一些功能可以让您通过 ssh 运行远程命令。由于看起来您正在开发一个基于 Web 的项目，您可能会发现这对于创建部署脚本或类似内容很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T00:45:06.480

有趣的是，有一个名为 Cake 的 Python 构建工具使用与您的示例几乎相同的语法。[在这里](https://github.com/alexcepoi/cake)看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:24:59.800

我只会创建一个标准的 Makefile 而不是找到特定于语言的东西。在我的一些项目中`make db`，`make test`、 等映射到用 Python 编写的脚本，但也可以很容易地使用任何可以从命令行执行脚本的语言。

# maven - 如何将控制台输出附加到maven中的文件？

> ID：11538344
> 
> 赞同：0
> 
> 时间：2012-07-18T09:32:29.273
> 
> 标签：maven, logging, exec-maven-plugin

我正在使用 exec-maven-plugin 执行一些特定的测试。我想将测试的控制台输出附加到文件中，而不隐藏控制台。
maven 中是否为该任务提供了任何支持？

1.  在测试开始之前，我使用 maven-antrun-plugin 执行记录器任务。那没有用。

2.  我使用 'tee' 命令使用 exec-maven-plugin 执行。这似乎也不起作用。

3.  我检查了使用带有 maven 的 log4j。但由于我是 log4j 日志记录的新手，我无法用它调试问题。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:34:43.090

使用`outputFile`参数：[http ://www.mojohaus.org/exec-maven-plugin/exec-mojo.html#outputFile](http://www.mojohaus.org/exec-maven-plugin/exec-mojo.html#outputFile)

> 程序标准和错误输出将被重定向到此可选字段指定的文件。如果未指定，则使用标准 Maven 日志记录。
> 
> 类型：java.io.File
> 
> 自：1.1-beta-2
> 
> 要求：否
> 
> 表达式：${exec.outputFile}

# javascript - Mongoose 检测数据库未准备好

> ID：11538345
> 
> 赞同：10
> 
> 时间：2012-07-18T09:32:35.053
> 
> 标签：javascript, node.js, mongodb, mongoose

是否可以检测到数据库未与 Mongoose 一起运行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-28T23:13:07.987

您可以通过简单地检查来判断猫鼬是否已经连接

```
mongoose.connection.readyState
0 = no
1 = yes 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-18T15:49:43.940

我建议使用`open`and`error`事件来检查您是否可以连接到数据库。这是我所有项目中使用的一个简单示例，用于仔细检查我是否已连接。

```
var mongoose = require('mongoose');

mongoose.connection.on('open', function (ref) {
  console.log('Connected to mongo server.');
});
mongoose.connection.on('error', function (err) {
  console.log('Could not connect to mongo server!');
  console.log(err);
});

mongoose.connect('mongodb://localhost/mongodb'); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-17T12:58:40.213

直截了当对我来说很好：

`mongoose.Connection.STATES.connected === mongoose.connection.readyState`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T15:03:09.080

显然 Mongoose 它自己不会抛出任何异常。

所以你可以使用 Mongo DB Native NodeJS Driver：

因此，您可以执行以下操作：

```
var mongoose = require('mongoose');

var Db = require('mongodb').Db,
    Server = require('mongodb').Server;

console.log(">> Connecting to mongodb on 127.0.0.1:27017");

var db = new Db('test', new Server("127.0.0.1", 27017, {}));

db.open(function(err, db) {
    console.log(">> Opening collection test");
    try {
        db.collection('test', function(err, collection) {
            console.log("dropped: ");
            console.dir(collection);
        });
    }
    catch (err) {
        if (!db) {
            throw('MongoDB server connection error!');
        }
        else {
            throw err;
        }
    }
});

process.on('uncaughtException', function(err) {
    console.log(err);
}); 
```

# c# - 如何在列表视图中禁用单选按钮

> ID：11538350
> 
> 赞同：2
> 
> 时间：2012-07-18T09:32:50.873
> 
> 标签：c#, winforms, listview, radio-button

我是一个非常菜鸟，这是我的第一篇文章，所以当我选中一个复选框并且它仅适用于一行时，需要您的帮助来尝试禁用列表视图中的所有单选按钮控件。

这是我的代码：

```
protected void chkb_DG_NO_CheckedChanged(object sender, EventArgs e)
        {

                    foreach (ListViewItem item in ListView1.Items)
                    {
                        RadioButton RD1 = (RadioButton)ListView1.Items[0].FindControl("R1");
                        RadioButton RD2 = (RadioButton)ListView1.Items[0].FindControl("R2");
                        RadioButton RD3 = (RadioButton)ListView1.Items[0].FindControl("R3");
                        RadioButton RD4 = (RadioButton)ListView1.Items[0].FindControl("R4");
                        RadioButton LD1 = (RadioButton)ListView1.Items[0].FindControl("L1");
                        RadioButton LD2 = (RadioButton)ListView1.Items[0].FindControl("L2");
                        RadioButton LD3 = (RadioButton)ListView1.Items[0].FindControl("L3");
                        RadioButton LD4 = (RadioButton)ListView1.Items[0].FindControl("L4");
                        RD1.Enabled = false;
                        RD2.Enabled = false;
                        RD3.Enabled = false;
                        RD4.Enabled = false;
                        LD1.Enabled = false;
                        LD2.Enabled = false;
                        LD3.Enabled = false;
                        LD4.Enabled = false;
                    }

        } 
```

我应该改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:42:54.053

我假设您使用的是 Windows 窗体。将所有 RadioButtons 放在一个容器中，例如 Panel 或 GroupBox。然后，您所有的 RadioButtons 将被组合在一起。一切都在[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/sefz7fxc%28VS.80%29.aspx)上进行了解释。

完成此任务后，遍历该组的控件，并禁用每个控件，使用如下伪代码：

```
foreach (RadioButton rButton in groupBox) {
                rButton.Enabled = this.Enabled;
} 
```

或者，只需键入以下代码：

```
groupBox.Enabled = false; 
```

禁用组框和其中的所有控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:35:42.140

RadioButton 单独工作。将 RadioGroup 设为父级以仅设置一个 RadioButton 处于活动状态。

# iphone - 并非所有类都可以访问对象属性

> ID：11538352
> 
> 赞同：1
> 
> 时间：2012-07-18T09:32:57.630
> 
> 标签：iphone, objective-c, init, alloc, core-bluetooth

我的项目中有 3 个类：HeliController、FlightView 和 ConnectionView。HeliController 存储一些连接数据，供 FlightView 和 ConnectionView 使用。

在 ConnectionView 和 HeliController 我都有

```
// Interface
#import "HeliController.h"
@property (retain) HeliController *heliController;

// Implementation
@synthesize HeliController = _HeliController 
```

ConnectionView 负责所有连接方法，因此此类接收我正在与之通信的外围设备。从这里，我发送要存储在 HeliController 中的外围数据（这也是外围类的委托）：

```
// ConnectionView.m
self.heliController = [[HeliController alloc] initWithDelegateAndPeripheral:self peripheral:peripheral]; 
// Self will receive callbacks from HeliController and the connected peripheral is stored in the HeliController

// HeliController.m:
- (id)initWithDelegateAndPeripheral:(id<HeliControllerDelegate>)delegate peripheral:(CBPeripheral *)peripheral{

if([super init]){
    self.peripheral = peripheral;
    self.peripheral.delegate = self;
}
return self; 
```

}

现在我可以从 ConnectionView 到达外围设备

```
self.heliController.peripheral 
```

并看到两者都有堆栈地址：

```
_heliController HeliController *    0x0017f9e0
_peripheral CBPeripheral *  0x0017e570 
```

从 FlightView 我也想获得外围数据。我愿意

```
self.heliController = [[HeliController alloc] init]; 
```

并在调试器中看到 self.heliController 在堆栈上获取地址

```
_heliController HeliController *    0x0018ac60 
```

但外围为零

```
_peripheral CBPeripheral *  0x00000000 
```

为什么是这样？我忘记了什么？当我不得不重组我的应用程序时出现了这个问题，我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:22:19.683

当我在这样的视图之间进行更改时，我的解决方案是将 heliController 对象发送到 FlightView：

```
- (IBAction)changeViewToFlight:(id)sender {

FlightView *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"FlightViewIdentifier"];

// Make sure the heliController object is passed on to the FlightView
vc.heliController = self.heliController;

[self.navigationController pushViewController:vc animated:YES];
} 
```

# javascript - 从 javascript 打开一个 word 文档

> ID：11538354
> 
> 赞同：0
> 
> 时间：2012-07-18T09:33:00.687
> 
> 标签：javascript, ms-word

我必须从支持跨浏览器的 javascript 打开一个 word 文档。然后我必须打印那个文件。

```
var objWord = new ActiveXObject("Word.Application");
objWord.Visible = true;
objWord.Documents.Open(resumePath); 
```

但我收到 ActiveXObject 的参考错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:34:58.040

如果没有在 JavaScript 中实现 Word 解析器并将文档转换为浏览器普遍支持的内容（例如 HTML）——你做不到。

相反，链接到文档，允许人们在他们选择的文字处理器中打开它，并使用该应用程序中内置的打印功能。

# javascript - XMLHttpRequest 的响应文本在 Mozilla 中为空（空白）

> ID：11538356
> 
> 赞同：0
> 
> 时间：2012-07-18T09:33:04.750
> 
> 标签：javascript, xmlhttprequest, responsetext

当我在 IE 中运行以下代码时，它运行良好。

但在 mozilla ff 中，layerId 的值为空，因为`reqGetSubMenuRef22.responseText`在 line1 处为空。

```
function ajaxFunctionCallGetSubMenuRef22(url)
{
    if (window.XMLHttpRequest) { // Non-IE browsers and IE>=7
      reqGetSubMenuRef22 = new XMLHttpRequest();

      reqGetSubMenuRef22.onreadystatechange = processStateChangeGetSubMenuRef22;
      try {
        reqGetSubMenuRef22.open("GET", url, true);
        (( reqGetSubMenuRef22.setRequestHeader && method == "GET" ) ?  reqGetSubMenuRef22.setRequestHeader("Content-Type", "application/x-www-form-urlencoded") : reqGetSubMenuRef22 );
      } catch (e) {
        alert(e);
      }
      reqGetSubMenuRef22.send(null);
    } 
    else if (window.ActiveXObject) { // IE    
      reqGetSubMenuRef22 = new ActiveXObject("Microsoft.XMLHTTP");
      if (reqGetSubMenuRef22) {
        reqGetSubMenuRef22.onreadystatechange = processStateChangeGetSubMenuRef22;
        reqGetSubMenuRef22.open("GET", url, true);
        reqGetSubMenuRef22.send();
      }
    }
}

function processStateChangeGetSubMenuRef22() 
{

    if (reqGetSubMenuRef22.readyState == 4) { // Complete
      if (reqGetSubMenuRef22.status == 200) { // OK response
            var textToSplit = reqGetSubMenuRef22.responseText; //line1

        if(textToSplit != null && textToSplit != '') {
                subMenuRef = textToSplit;
                }
            else {
                subMenuRef='';
                }

        layerId=subMenuRef; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:52:50.913

`processStateChangeGetSubMenuRef22`（不是最好的函数名称顺便说一句）是一个回调。它是在`reqGetSubMenuRef22`'s 上下文中调用的，所以不要使用 using `if (reqGetSubMenuRef22.readyState === 4)`，而是尝试使用`if (this.readyState === 4 && this.status === 200)`。
该函数被引用为`readystatechange`变量 的事件处理程序`reqGetSubMenuRef22`，因此该函数将是 的方法`reqGetSubMenuRef22`，逻辑上（在这种情况下）它被引用为`this`。

只是用一个类比来澄清这一点：你不会把你的客厅称为*Some Blvd Nr 的客厅。123，无论哪个城市，哪个国家*，你都喜欢吗？当人们过来时，你说*这是我的客厅，这是我们的家，这是我住的地方*......

在`reqGetSubMenuRef22`您的代码中似乎也是一个全局变量，您需要解决这个问题。在 MDN上阅读更多关于 JS 的`this`内容，并且，在 ajax 调用的情况下，进入`closures`.

* * *

```
function readyStateCallback()
{
    if (this.readyState === 4 && this.status === 200)
    {
        console.log(this.responseText);
        //JSON string?:
        var resp = JSON.parse(this.responseText);
        //just txt:
        var resp = this.responseText;
        //HTML?
        document.getElementById('showResponseHere').innerHTML = this.responseText;
        //many more things you can do here...
    }
} 
```

为什么`reqGetSubMenuRef22`不再工作了：

```
function sendRequest(str)
{
    var reqGetSubMenuRef22;//<-- local scope, only accessible in function
    var i;//local, too but different
    //try catch stuff: reqGetSubMenuRef22 is now an ajax object
    for (i=0;i<str.length;i++)
    {
        console.log(i);//just an example, you'll see why
    }
    reqGetSubMenuRef22.onreadystatechange = readyStateCallback;//reqGetSubMenuRef22 is still local
    //setup reqGetSubMenuRef22, then:
    reqGetSubMenuRef22.send();
}//end function 
```

当 sendRequest 函数返回时，所有局部变量都被 GC 处理，变量`i`从内存中删除。`reqGetSubMenuRef22`也应该是，但是它附加了一个事件，并且该事件将触发一个在全局范围或另一个仍然存在的范围中声明的函数。
该对象保持活动状态，因为 JS 正在侦听`reqGetSubMenuRef22`对象上的 onreadystatechange 事件。因此，即使它的名称不再与任何东西相关联，该对象仍然非常“在那里”。不是全局对象（又名窗口）调用该`readyStateCallback`函数，而是 ajax 对象（`reqGetSubMenuRef22`）调用。因此，您可以使用从该函数内部访问 ajax 对象，`this`该对象将始终指向调用该函数的对象。（像这样调用相同的函数`readyStateCallback();`, 这将指向全局对象 ( `window`)) 在回调完成它的工作之后`this`，或者 ajax 对象将被垃圾收集，除非有其他事件要发生，或者它仍然在程序中的其他地方引用。

我在解释这些东西方面很糟糕，而且我很清楚我在这里过度简化了事情，到处走捷径。但请务必阅读`this`JavaScript。
顺便说一句：在函数返回后仍然保持活动状态的对象实际上是某种闭包：变量超出范围，但仍然可以引用。归根结底就是这样，这允许一些非常强大的构造，所以我敦促你也研究一下！

# ios - iOS GDataXMLElement 设置元素值

> ID：11538358
> 
> 赞同：0
> 
> 时间：2012-07-18T09:33:12.007
> 
> 标签：ios, element, gdataxml

我在 iOS 中使用 GDataXML，我试图弄清楚如何更改节点的值（即原始 XML 文件中等效元素的内容）。我有一个`NSArray`从 XPath 查询返回的元素。但是，我似乎找不到正确的函数来更改或设置值。我基本上想做以下事情：

```
for (GDataXMLElement *element in elementArray) 
{
    [element setValue:myVal];
} 
```

但是没有可用的 setValue 方法`GDataXMLElement`，也没有可用的`GDataXMLNode`。最接近的`setValue:forKey`如下：

```
[element setValue:myVal forKey:myKey]; 
```

但我无法弄清楚 myKey 应该是什么。当我使用`[element name]`我得到错误

> “此类不符合键 [元素名称] 的键值编码

我完全迷路了，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:24:39.613

尝试使用`setStringValue:`. 例如：

```
[element setStringValue:myVal]; 
```

希望有帮助。

# wordpress - 在 PHP (wordpress) 中实现/显示样式化的 RSS 提要

> ID：11538360
> 
> 赞同：1
> 
> 时间：2012-07-18T09:33:13.720
> 
> 标签：wordpress, rss, feed

我有亚马逊链接

```
http://www.amazon.de/rss/new-releases/videogames/ 
```

我想把它展示在我选择的地方。我有一个外部 php 文件，其中 rss 提要应以列表的形式显示。有人想在没有插件的情况下让它工作吗？

非常感谢各位！

广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:36:29.740

必须将以下代码粘贴到要显示提要的任何位置。

不要忘记在第 3 行更新提要 url。要显示的项目数可以在第 6 行定义。

```
<?php
include_once(ABSPATH . WPINC . '/rss.php');
$feed = 'http://www.amazon.de/rss/new-releases/videogames/';
$rss = fetch_feed($feed);
if (!is_wp_error( $rss ) ) :
    $maxitems = $rss->get_item_quantity(3);
    $rss_items = $rss->get_items(0, $maxitems);
    if ($rss_items):
        echo "<ul>\n";
        foreach ( $rss_items as $item ) :
            echo '<li>';
            echo '<a href="' . $item->get_permalink() . '">' . $item->get_title() . "</a>\n";
            echo '<p>' . $item->get_description() . "</li>\n";
        endforeach;
        echo "</ul>\n";
    endif;
endif;
?> 
```

**资料来源：** [http ://wprecipes.com](http://wprecipes.com)

PS 不要忘记在[http://wordpress.stackexchange.com上有专门的 Wordpress SE](http://wordpress.stackexchange.com)

# jquery - 如何在struts jquery网格的灯箱onSelectRowTopics中显示jsp页面？

> ID：11538362
> 
> 赞同：0
> 
> 时间：2012-07-18T09:33:22.957
> 
> 标签：jquery, jsp, struts2, struts2-jquery

这是简短的代码，请分享您的想法，我正在使用 struts2-jquery-grid-plugin-3.2.1

```
 <s:url id="remoteurl"  action="CustomExtaction" namespace="/forcustomtemplete"/>                                                 
                                <sjg:grid
                                    id="gridtable"
                                    caption="Exercises "
                                    dataType="json"
                                    href="%{remoteurl}"
                                    gridModel="gridModel"
                                    cssClass="ui.jqgrid"
                                    height="345"
                                    width="1285"
                                    onSelectRowTopics="rowselected"
                                    loadonce="true"
                                    >
                                    <sjg:gridColumn name="exidd" cssClass="ui.jqgrid"  index="exId" title="Exercise Name" sortable="true" key="true" />
                                    <sjg:gridColumn name="sets" cssClass="ui.jqgrid" index="sets" title="Sets" sortable="true" key="true" />
                                    <sjg:gridColumn name="reps" cssClass="ui.jqgrid" index="reps" title="Reps" sortable="true" key="true"/>
                                    <sjg:gridColumn name="imgpath" cssClass="ui.jqgrid" align="center" index="imgpath"  title="Image" key="true" sortable="true"  formatter="formatLink"  />
                                </sjg:grid> 
```

# android - 在不提供地理坐标的情况下在谷歌地图中搜索位置

> ID：11538366
> 
> 赞同：3
> 
> 时间：2012-07-18T09:33:34.750
> 
> 标签：android, google-maps

在我的 Android 应用程序中，我想在一个`EditText`字段中提供一个位置/城市，并通过按下一个按钮，我希望 Google 地图显示该特定城市。

如果不给出城市坐标，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:35:37.383

使用地理编码器获取坐标，然后将地图的中心设置为结果。 [http://developer.android.com/reference/android/location/Geocoder.html](http://developer.android.com/reference/android/location/Geocoder.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:37:18.953

使用[Android - GeoCoder](http://developer.android.com/reference/android/location/Geocoder.html)类，从地址获取纬度、经度并使用它在谷歌地图上显示位置..

```
Geocoder geoCoder = new Geocoder(this, Locale.getDefault());    
    try {
        List<Address> addresses = geoCoder.getFromLocationName(
            "Address", 1);

        if (addresses.size() > 0) {
          GeoPoint p = new GeoPoint(
                    (int) (addresses.get(0).getLatitude() * 1E6), 
                    (int) (addresses.get(0).getLongitude() * 1E6));
        }    
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# asp.net-mvc - 使用 MVC 将数据放入局部视图或布局

> ID：11538367
> 
> 赞同：5
> 
> 时间：2012-07-18T09:33:39.050
> 
> 标签：asp.net-mvc

我想在布局和/或部分视图中显示有关登录用户的信息（用户名、公司名称、通知数量等）。这些将在每个页面上都很常见。是否有将这些数据提供给他们的技巧，或者是否可以扩展每个模型以在其中包含这些信息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T14:51:27.043

我建议您可以进行子操作并从布局中调用它，这样您就可以避免在所有视图模型中执行信息。

前任。

**子动作**

```
public class UserController
{
  [ChildActionOnly]
  public PartialViewResult UserInfo()
  {
     var userInfo = .. get the user information from session or db

     return PartialView(userInfo);
  }
} 
```

**局部视图**

```
@model UserInfoModel

@Html.DisplayFor(m => m.UserName)
@Html.DisplayFor(m => m.CompanyName)
... 
```

**布局视图**

```
<header>
  @Html.Action("UserInfo", "User")
</header> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:18:07.457

您仍然可以在 MVC 中创建符合您要求的母版页。查看此链接以了解如何在 MVC 中创建局部视图

[部分观点](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)

# jquery - jquery中click方法的参数

> ID：11538369
> 
> 赞同：0
> 
> 时间：2012-07-18T09:33:46.357
> 
> 标签：jquery, onclick

我正在尝试将单击功能绑定到 HTML 元素。所以我尝试了这个：-

```
$("#buttonId").click(alert("hey")); // does not work. 
```

然后我尝试了这个：-

```
$("#buttonId").click(function() {
    alert("hey");
}); // works perfectly fine. 
```

既然alert也是一个函数，为什么我不能直接通过呢。有人可以对此有所了解吗？

单击方法文档可在此处获得[http://api.jquery.com/click/](http://api.jquery.com/click/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:35:56.807

在第二个示例中，您将一个函数传递给该`click()`方法***，但没有调用它***。当有人点击该元素时，jQuery 将为*您*调用该函数。

然而，在第一个示例中，您正在调用“ `alert("hey")`”（返回`undefined`），并且*该*值被传递给`click`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:37:19.133

该`click`方法采用处理程序类型的参数，而`alert("hey");`函数调用既不是处理程序也不返回处理程序，即此调用无效。

# objective-c - NSDictionary 的描述 - 为什么有些键名带有引号？

> ID：11538371
> 
> 赞同：6
> 
> 时间：2012-07-18T09:33:48.907
> 
> 标签：objective-c, cocoa, nsdictionary

我在字典上使用了一个简单的 NSLog：

```
NSLog(@"dict %@", dictionary); 
```

结果是：

```
...
"first_name" = Peter;
gender = male;
id = 1171548848;
"last_name" = Lapisu;
... 
```

**为什么“引号”中有一些键名，而另一些则没有？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T09:37:32.670

当字符串包含字母+数字以外的字符时，它将引用该字符串。

这是`description`函数的基本方法。

# java - 以编程方式更改我的 PC IP

> ID：11538377
> 
> 赞同：-4
> 
> 时间：2012-07-18T09:34:14.570
> 
> 标签：java, python, ip

我正在构建需要主机每 30 分钟更改一次 IP 的应用程序，我可以在没有 3rd 方应用程序的情况下以编程方式进行吗？

Python 更可取，Java 也受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:01:49.623

如果您想更改您的外部（互联网）IP 地址，并且您的机器通过 dsl 连接到互联网，并且您的 ISP 为您分配了一个动态 IP，您可以重新启动路由器（实际上是您的 dsl 调制解调器，但它内置在路由器中如果你没有一个古老的模型）来获得一个新的 IP。

理论上，以编程方式重新启动路由器可以通过发送一个小的 SNMP 数据包告诉它自己重新启动来实现 - 假设路由器遵循协议并正确解释数据包，并且没有防火墙或其他过滤器阻止您和您之间的 SNMP 消息路由器。

在常见情况下，要设置的 SNMP OID 为[1.3.6.1.2.1.69.1.1.3](http://www.oid-info.com/get/1.3.6.1.2.1.69.1.1.3) - 您可以使用任何具有 SNMP 库的语言来执行此操作，例如 python的[pySNMP 。](http://pysnmp.sourceforge.net/)根据您的路由器型号，您可能需要不同的 OID，或者根本无法通过 SNMP 进行重置。

假设您的路由器 ip 是 192.168.0.1 并且它接受默认的重置 OID，这样的事情应该适用于 pySNMP：

```
from pysnmp.entity.rfc3413.oneliner import cmdgen
from pysnmp.proto import rfc1902
cmdgen.CommandGenerator().setCmd(
    cmdgen.CommunityData('my-agent', 'public', 1),
    cmdgen.UdpTransportTarget(('192.168.0.1', 161)),
    ((1,3,6,1,2,1,69,1,1,3,0), rfc1902.Integer(1))
) 
```

# html - 面包屑活动链接css

> ID：11538379
> 
> 赞同：0
> 
> 时间：2012-07-18T09:34:17.533
> 
> 标签：html, css, breadcrumbs

这是我想要获得的面包屑设计，但是如何获得具有箭头效果的激活 css，例如它如何用于悬停

[我的小提琴](http://jsfiddle.net/uqTyA/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:39:41.190

您需要使用单选按钮（您将隐藏）和标签来实现该行为。“活动”的将是`:checked`单选按钮。

[这](http://jsfiddle.net/uqTyA/5/)行得通，它只是 CSS3。

如果您需要保持当前结构，则需要使用 JavaScript。

# c - C中的反转字符串

> ID：11538381
> 
> 赞同：3
> 
> 时间：2012-07-18T09:34:24.513
> 
> 标签：c, string

以下代码有什么问题？

```
#define N 30
int main() {
    char str[N], new_str[N];
    int i,len;
    printf("Please enter 20 letters. \n");
    scanf("%s", str);
    len = strlen(str);
    printf("The length of str is  %d ", len);
    for (i=0; i< len; i++)
        new_str[i]=str[len-1-i];
    printf("The result is: %s\n", new_str);
    return 1;
} 
```

我检查了对于 16 个字符以下的每个字符串，程序都正常，并且在最后返回未定义的字符：

```
 Please enter 20 letters.
  1234567891111111

  The result is: 1111111987654321q=V?. 
```

`str, new_str`但是，如果我用 "" 进行初始化，问题就解决了。我仍然想知道是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T09:36:37.353

您需要添加空终止符：

```
new_str[len] = '\0'; 
```

否则，最后一个字符后面有垃圾，所以字符串没有结束

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T09:39:37.710

您需要在 new_str 中添加一个空终止符，否则 printf 不知道何时停止。或者，您可以将字符串*原位*反转，就像这样。

```
char s[] = "StackOverflow";
size_t l = strlen(s);
int i, j, k;
k = l/2;
// Work with half the length
for (i=0; i<k; i++) {
  // swap the two bytes
  j=s[i];
  s[i]=s[l-1-i];
  s[l-1-i]=j;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:38:13.857

字符串应该以零结尾。在 scanf 之后，`str`是，但`new_str`没有被赋予一个值，所以它仍然包含垃圾。循环之后，前 (20?) 个字符已设置，但您仍需要附加一个`\0`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T09:39:04.073

`new_str`不是 NUL 终止的。

从 复制所有字符后`str`，您需要在末尾添加一个 '\0'，`new_str`如下所示：

```
new_str[i] = '\0'; 
```

# facebook-apps - 将个人资料页面迁移到粉丝页面后无法访问我的应用

> ID：11538384
> 
> 赞同：0
> 
> 时间：2012-07-18T09:34:30.567
> 
> 标签：facebook-apps, administration, facebook-page

我对 Facebook 有一些问题。

最近，根据 Facebook 的建议，我决定将我的个人资料页面迁移到粉丝页面。

问题是现在，我无法访问我的应用程序管理页面（https://developers.facebook.com/apps/XXXXX）。我被重定向到[http://www.facebook.com/browse/admined_pa](http://www.facebook.com/browse/admined_pages/?id=XXXXX) ​​ges/?id=XXXXX 。

有没有办法解决这个问题？（例如，将我现有的应用程序附加到其他配置文件？）。

非常感谢，

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:46:25.170

Maybe you should have added another profile as admin of the app before switching.

From [https://www.facebook.com/help?page=213602951994043](https://www.facebook.com/help?page=213602951994043)

"You won't remain the admin of any groups or apps you managed from your personal account. Be sure to add new admins before converting. Additionally, content on your timeline (ex. photo albums, profile information, etc.) will not be transferred"

Sorry for the bad news :/

(You can always create a new app, you should still have the code, right?)

# ruby-on-rails - Ruby on Rails：允许用户输入新信息，或单击下拉菜单选择现有信息

> ID：11538390
> 
> 赞同：9
> 
> 时间：2012-07-18T09:34:46.590
> 
> 标签：ruby-on-rails, ruby, textbox, option, drop-down-menu

新的 ROR 程序员在这里。我正在尝试构建一个 Web 应用程序，允许用户填写表单，在其中输入公司信息，然后通过单击提交，将输入添加到数据库中。

目前，如果用户要创建一个新条目，他们会看到一些字段，例如“公司名称”。有一个空白框供他们输入新公司，旁边有一个下拉菜单，用户可以使用该菜单查看数据库中的现有公司。

```
<div class="field">
<%= f.label :company_name %><br />
<%= f.text_field :company_name %> 
```

```
<%= f.label :company_name %><br />
<%= f.select( :company_name, Company.all.map {|p| [p.company_name]}.uniq!, :prompt => "Select a Company") %> 
```

我正在寻找一种允许用户输入新公司的方法，或者单击下拉菜单并选择现有公司。

目前：如果没有在文本框中输入任何内容并且没有从下拉列表中选择任何选项，则将其保存为空白。如果输入了某些内容，但未选择任何选项，则将其保存为空白。但是，如果输入了某些内容并从下拉列表中选择了某些内容，则会保存下拉选项。

希望我没有让它太混乱。任何帮助都将不胜感激。

提前致谢。

编辑：

我的创建操作现在看起来像这样

```
 def create
@company = Company.new(params[:company])
@company.company_name = params[:new_company_name] unless params[:new_company_name].empty?

respond_to do |format|
  if @company.save
    format.html { redirect_to @company, notice: 'Company was successfully created.' }
    format.json { render json: @company, status: :created, location: @company }
  else
    format.html { render action: "new" }
    format.json { render json: @company.errors, status: :unprocessable_entity }
  end
end 
```

结尾

和表单视图：

```
<%= label :company_name %><br />
<%= text_field :new_company_name %>

<%= f.label :company_name %><br />
<%= f.select( :company_name, Company.all.map {|p| [p.company_name]}.uniq!, :prompt => "Select a Company") %> 
```

现在的新错误是：

参数数量错误（1 对 2）

提取来源：<%= label :company_name %>

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:21:36.483

您的视图中不能有两个同名的参数，因为 rails 不知道如何处理它们

@rodzyn 是对的，所以请把功劳给他.. :)

只是为了澄清：

你的表格：

```
<%= label_tag :new_company_name, "Company name" %><br />
<%= text_field_tag :new_company_name %>

<%= f.label :company_name %><br />
<%= f.select( :company_name, Company.all.map {|p| [p.company_name]}.uniq!, :prompt => "Select a Company") %> 
```

你的控制器：

```
@company = Company.new(params[:company])
@company.company_name = params[:new_company_name] unless params[:new_company_name].empty? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:07:01.503

你可以设置

```
<%= text_field :new_company_name %> 
```

然后在创建动作

```
@company = Company.new(params[:company])
@company.company_name = params[:new_company_name] unless params[:new_company_name].empty? 
```

# java - OSGI：在创建 JUnit 插件测试时发生奇怪的错误

> ID：11538395
> 
> 赞同：2
> 
> 时间：2012-07-18T09:35:04.343
> 
> 标签：java, eclipse, eclipse-plugin, osgi

当我为 JUnit 插件测试（在 eclipse 中）创建新的启动器、设置捆绑包依赖`com.springsource.org.junit`项`org.junit4_4.5.0.v20090824`（`org.hamcrest.core_1.1.0`包括 所以我有下一个问题：

1.  `com.springsource.org.junit`如果我有依赖关系 ，这个捆绑包有什么用？
2.  如果可能的话，我怎样才能摆脱这个捆绑包？
3.  如果无法摆脱，我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:46:37.477

OSGi 无法解析捆绑包 org.hamcrest.core_1.1.0。这就是您收到错误消息的原因。我有两个建议来解决这个问题。

转到JUnit Plug-in Test **Run Configuration中的****Plug-ins**选项卡。那里只选择测试所需的捆绑包。

 **1）为了获得所有需要的包（也是引用的包）单击按钮**添加所需的插件**

2) 当您开始测试时，您还必须确保所有捆绑包/插件都已启动。**在插件**选项卡中将**默认自动启动**设置为 true 。然后所有捆绑包都开始测试。您还可以手动配置要启动的捆绑包。

 **3) 为了检查您的所有捆绑软件是否已正确启动，请使用程序参数 -console 开始您的测试，然后在控制台中键入 ss。这将为您提供所有捆绑包的概览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:19:17.783

好的，我想我有一个解决方案。

从 MANIFEST 的依赖项选项卡中删除所有 junit 插件。搜索 org.hamcrest。如果您在 eclipse/plugins 目录中有 hamcrest，它现在会显示出来。

添加 Junit，然后添加 hamcrest ..

我希望它有帮助...****

# c++ - C++中的三维数组

> ID：11538396
> 
> 赞同：0
> 
> 时间：2012-07-18T09:35:04.787
> 
> 标签：c++, image, vector

我正在制作一个用于图像处理的三维数组 - X 和 Y 维度，然后是第三个维度，因为每个像素都没有一个值，而是 (bitsPerPixel/8) 值。

坦率地说，我不太精通 C++，但相机的 API 严格来说是 C++，所以我想在出发前咨询更熟练的人并问“这对吗？”：

```
vector<vector<vector<int>>> mask(m_nSizeX, vector<vector<int>>(m_nSizeY, vector<int>(m_nBitsPerPixel / 8))); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:36:57.853

如果您有 C++11 支持，那么可以。

如果没有，您的模板中需要一些额外的空格：

```
vector<vector<vector<int> > > 
```

代替

```
vector<vector<vector<int>>> 
```

等等...

虽然我个人不会使用 a`vector`作为最后一个值，而是使用结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:40:19.070

是的，定义是正确的。至于参数我不能说，因为我看不到你的标题

作为一般做法，我总是在类之前使用命名空间名称，所以我从不这样做：

```
using namespace std;
vector<int> numbers;

but instead

std::vector<int> numbers 
```

这只是为了让我更容易阅读和遵循错误此外，如果您打算传递这个 3D 向量，那么您可能还需要传递以定义向量的分配器。但这取决于你想做什么

# git - 选择性地拉取构建的提交（通过 git 和竹子）

> ID：11538401
> 
> 赞同：1
> 
> 时间：2012-07-18T09:35:26.977
> 
> 标签：git, build, continuous-integration, bamboo

有什么方法可以选择性地选择提交（或者提交组）并生成构建？

例如，假设我团队中的某个人已经提交了某项内容并且已经过测试，但我正在处理的部分尚未测试或尚未完成但已提交。我们希望其他更改被“拉入”以进行生产，但我的更改应该被排除在外。

我们正在使用 git，并使用 Atlassian Bamboo（我们将 JIRA 与提交中的问题编号集成在一起，这也有助于跟踪任务中的多个提交）。

除了维护不同的分支，或者从操作的角度改变事情之外，还有一些简单的方法可以实现我所追求的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:31:24.817

是的，它被称为每个功能的分支。正确完成后，您将始终拥有一个可部署的候选发布分支，并且您将始终能够“回滚”部署后出现问题的功能，而无需像功能切换这样的黑客攻击。这在这里详细解释：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# c++ - QML - Q_INVOKABLE 函数

> ID：11538404
> 
> 赞同：4
> 
> 时间：2012-07-18T09:35:36.590
> 
> 标签：c++, qt, qml, qt-quick

我在调用 Q_INVOKABLE 函数时遇到了 QML 问题。虽然我将函数标记为 Q_INVOKABLE 我收到错误

```
TypeError: Result of expression 'azdownloader.setData' is not a function
TypeError: Result of expression 'azdownloader.perform' is not a function 
```

我有这堂课：

```
typedef QString lyricsDownloaderString;

class lyricsDownloader : public QObject
{
public:
    Q_INVOKABLE virtual short perform() = 0;
    Q_INVOKABLE inline void setData(const string & a, const string & t); // set artist and track
 // some other data

protected:
    lyricsDownloader(const string & a, const string & t ) : artist(a), track(t) {} 
  /*other data*/
};

class AZLyricsDownloader : public lyricsDownloader
{
public:
    AZLyricsDownloader() : lyricsDownloader("", "") {}
    AZLyricsDownloader(const string & a, const string & t) : lyricsDownloader(a, t) {}
    Q_INVOKABLE short perform();
    Q_INVOKABLE inline void setData(const string & a, const string & t);// set artist and track
 /*other data*/ 
```

在 main.cpp

```
Q_DECL_EXPORT int main(int argc, char *argv[])
{
        QApplication app(argc, argv);

        mainWindow viewer;

        qmlRegisterUncreatableType<lyricsDownloader>("MaeLyrica", 1, 0, "lyricsDownloader", "");
        qmlRegisterType<AZLyricsDownloader>("MaeLyrica", 1, 0, "AZLyricsDownloader");
        viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
        viewer.setMainQmlFile(QLatin1String("qml/maelyrica/main.qml"));
        viewer.showFullScreen();

        return app.exec();
} 
```

在 main.qml

```
import QtQuick 1.1
import com.nokia.meego 1.0
import com.nokia.extras 1.0
import MaeLyrica 1.0

//property color fontcolor: "white"

PageStackWindow
{
    id: pagestackwindow
    visible: true
    MainPage
    {
        id: mainview
    }
    initialPage: mainview
    AZLyricsDownloader
    {
        id: azdownloader
    }
} 
```

在页面中

```
import QtQuick 1.1
import com.nokia.meego 1.0

Page
{
 /*some gui elements*/

        Button
        {
            id: go
            text: "Go!"
            width: parent.width
            onClicked:
            {
                goLoader.source = "ShowLyricsPage.qml"
                pageStack.push(goLoader.item)
                azdownloader.perform()
                showLyricsPage.busyind.visible = false
            }
        }
    }
/*dialogs and toolbar definitions*/
} 
```

另一个：

```
import QtQuick 1.1
import com.nokia.meego 1.0

Sheet {
    id: sheet

    acceptButtonText: "Save"
    rejectButtonText: "Cancel"
    onAccepted:
    {
        if ( artistfield.text == "" || trackfield.text == "" ) // check whether empty
        {
            emptyfieldsdialog.open()
        }
        else
        {
            selecttrack.text = artistfield.text + " - " + trackfield.text
            azdownloader.setData(artistfield.text, trackfield.text)
        }
    }

    content: Rectangle { /*some content here*/ }

    /*dialog definition*/ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T09:41:48.250

从您在此处粘贴的内容来看，粗略的检查表明您已经成功地完成了我们都开始做的事情：

您在基于 QObject 的类中忘记了 Q_OBJECT 宏。

没有那个，您将不会获得为您的类生成的元对象，因此信号、插槽和其他类似功能（例如 Q_INVOKABLE）将无法按预期运行。希望有帮助:)

# php - 获取 MySQL 数据库中重复次数最多的相似字段

> ID：11538409
> 
> 赞同：2
> 
> 时间：2012-07-18T09:35:50.267
> 
> 标签：php, mysql, sql, levenshtein-distance

假设我们有一个像这样的数据库：

Actions_tbl：

```
-------------------------------------------------- ------
编号 | 动作名称 | 用户ID|
-------------------------------------------------- ------
1 | 约翰读一本书 | 1     
2 | 阅读约翰的书| 高分辨率照片| CLIPARTO 1
3 | 乔跳过火| 2
4 | 读另一本书| 2
5 | 约翰在图书馆看书 | 1
6 | 乔读了一本书 | 2
7 | 读一本书| 3
8 | 无缘无故跳是罗纳德的习惯| 3

```

* * *

用户表：

```
----------------------
用户 ID | 用户名 |
----------------------
1 | 约翰
2 | 乔
3 | 罗纳德
4 | 阿拉兹
----------------------

```

* * *

想知道我是否可以选择重复次数最多的类似操作，而不管它的用户是什么，并将我自己的 user_name 替换为其当前用户！

读一本书，读一本书，再读一本书，在图书馆读一本书，读一本书和读一本书是最常见的单词，所以与读书相关的工作人员重复了6次，我的系统应该显示随机选择这六个句子之一并将 Araz 替换为 user_name

喜欢：阿拉兹看书

我的想法是

```
select replace(a.action_name , b.user_name) from actions_tbl a, user_tble b where a.user_id = b.user_id group_by 
```

然后使用 php 在 php 中一一检查相似之处

```
levenshtein() 
```

但这一个根本没有表现！

假设我想为一个大数据库和几个不同的表做同样的事情。这会毁了我的服务器！！！

有更好的想法吗？

在[http://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)中，levenshtein() 函数是作为 MySQL 函数实现的，但首先，你认为它有足够的性能吗？然后，如何在我的情况下使用它？也许一个自加入面包车解决了这个问题，但我对 sql 不是很好！

*** 相似动作，是有超过 X% 常用词的动作

* * *

********更多信息和说明：****

 **1.  我仅限于 PHP 和 MySQL。

2.  这只是一个例子，在我的真实项目中，动作是长段落。这就是为什么性能是一个问题。真实场景是：用户为多个项目输入了其项目的描述，这些数据可能过于相似（用户将有相同的工作领域），我想自动填写（基于之前的填写）下一个项目的描述，为了省时间。

3.  如果您有任何***实用***的 解决方案，我将不胜感激。我查看了 NLP 相关的解决方案，虽然它们很有趣，但我认为它们中的很多都不是准确的并且可以使用 PHP 来实现。

4.  输出应该是有意义的，并且像所有其他项目一样是一个适当的段落。这就是为什么我想从以前的选择中选择。

* * *

**感谢您的智慧回答，如果您能对这些情况有所了解，我们将不胜感激**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:22:09.277

你所说的是一个文本聚类过程。您正试图找到相似的文本，并随意选择其中之一。我不熟悉任何进行这种形式的文本挖掘的数据库。

对于您所描述的，一种非常基本的文本挖掘技术可能会起作用。创建一个包含除用户名之外的所有单词的术语文档矩阵。然后使用奇异值分解得到最大的奇异值和向量（这是相关矩阵的第一主成分）。类似的活动应该沿着这条线聚集。

如果您的词汇量有限并且表格中有术语，则可以通过重叠单词的比例来衡量两个动作之间的距离。你有动作中所有单词的列表吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:40:13.520

首先，您必须决定是要将给定输入与所有现有文本进行比较，还是对所有文本进行成对比较。您的问题要求后者，但您概述的应用程序听起来更像前者。

如果您仅将单个输入与您的数据库进行比较，那么我希望 levenshtein 距离计算在中等数据库大小的情况下足够快。除非您存储有关文本库当前内容的某种形式的中间数据结构，否则可能没有什么方法可以使事情变得更快。为每个新输入重新计算任何东西可能同样昂贵。

如果您想对每一对进行比较，那么对它们中的每一个进行 levenshtein 计算将花费太多时间。您将不得不设计一些其他的相似性概念。[我想到的第一件事就是后缀树](http://en.wikipedia.org/wiki/Suffix_tree)，它对不同形式的单词有一定的弹性. 您可以将所有段落插入到该树中。在后缀树通常存储单个指针的情况下，您可能希望存储一对索引，一个标识数据库行，另一个表示该行文本中的位置。构建树后，您可以遍历它以识别常见的子字符串，并为相应的对增加一些相似性计数器。您必须进行一些试验才能调整此度量。在增加计数器之前，您可能希望为公共字符串施加最小长度。由于长文本即使在语义上不相关，也有更大的机会出现常用词，因此您可能必须以某种方式补偿长度。我怀疑是否有一种规范的方法可以做到这一点。

[Gordon 建议](https://stackoverflow.com/a/11542420/1468366)的[术语-文档矩阵](http://en.wikipedia.org/wiki/Document-term_matrix)方法听起来也很有趣，您也应该能够在 PHP 中实现它。即使词根相同，这种方法也会对词形的变化更加敏感。另一方面，为存储在数据库中的矩阵保留一个合适的矩阵，并在更新主文本表时保持该结构同步可能会更容易。这两种方法都与 levenshtein distance 有根本的区别：它们不太关心整体顺序。我相信这对你来说是件好事，因为他们会认为“约翰在湖里游泳后读了一本书”比“在湖里游泳后，乔读了一本书”更类似于 levenshtein distance将。

您的示例表明您不仅要对相似性进行排名，还要确定集群边界，即“这些构成一个组”和“这些属于不同的组”。对此没有明确的界限，因此您还必须尝试使用​​启发式方法。除非总是选择最相似的文本，或者*k*个最相似的文本，对于您的应用程序来说就足够了。无论如何，我会先专注于相似度计算，然后再添加诸如用户名替换之类的东西。**

# git - 我改变了我的分支系统。我如何在github上对其进行排序？

> ID：11538417
> 
> 赞同：2
> 
> 时间：2012-07-18T09:36:16.980
> 
> 标签：git, github, branch, remote-branch

所以我做了一些不寻常的事情。我有几个分支，`master`并且`dev`. `master`具有最新的稳定版本，并且`dev`具有最前沿的技术，并将`master`在发布时合并。

然而，这并不是很好，因为很多人在提出拉取请求时，会到达主分支。最近，我不得不关闭一个拉取请求，并要求他们从 dev 分支签出一个新分支，并在那里进行更改，因为 dev 分支远远领先于 master 分支，合并会非常棘手。

所以，我决定制作`dev` `master`，制作`master` `stable`。

我做的第一件事，`dev`检查了：

```
git branch -m master stable 
```

然后切换到新分支：

```
git checkout stable 
```

然后移动`dev`到`master`：

```
git branch -m dev master 
```

所以，我现在在本地有两个分支，`master`（以前`dev`）和`stable`（以前`master`）。

然后我分别检查了每个分支，并`git push origin <branchname>`为每个分支运行。

## 问题

我注意到的第一个问题是，即使在推送之后，在新`stable`分支（是主分支）上，我也得到了这个`git status`：

```
# On branch stable
# Your branch is behind 'origin/master' by 6 commits, and can be fast-forwarded.
#
nothing to commit (working directory clean) 
```

git 仍然认为远程这个分支与 关联`master`，并且因为我`dev`进入`master`，它认为`stable`是落后的。如何让 git 将此分支与正确的远程分支相关联？

我注意到的第二个问题，在 GitHub 上，分支`dev`仍然存在。如何删除远程版本？

第三个问题，在 GitHub 上，如果我选择 branch `master`，它下面会显示对分支的最新提交`dev`。几次提交会改变这种情况吗？另一个分支也是如此（它表示最新提交`master`for `stable`）。

如何使远程完全更新到本地仓库中的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:13:35.150

1）对于你的第一个问题，你需要设置你的分支`stable`来跟踪一个远程分支`origin/stable`

```
 git branch --set-upstream stable origin/stable
 git branch --set-upstream master origin/master 
```

2）对于您的第二个问题，使用此 git 命令删除远程分支

```
git push origin :dev 
```

3）对于您的第三个问题，在提交、拉取和推送之后就可以了。

# jquery - 将 Jquery Ajax 结果附加到现有表

> ID：11538419
> 
> 赞同：0
> 
> 时间：2012-07-18T09:36:20.300
> 
> 标签：jquery, ajax, append

我需要将ajax请求结果放到现有表中，怎么做？这是我的ajax请求

```
$("input#order").click(function(){
    var idmenu  = $("#idmenu").val();
    var menu    = $("#idmenu :selected").text();
    var qty     = $("#qty").val();

    $.ajax({
        type    :'POST',
        url     :'<?php echo base_url();?>index.php/welcome/process',
        data    :'idmenu='+idmenu+'&menu='+menu+'&qty='+qty,
        beforeSend:function(){
            $("#result").html('<img src="<?php echo base_url();?>assets/loading.gif"/>');
        },
        success:function(result){
            //result is json format
        }
    });

}); 
```

这是来自ajax请求的json格式

```
{"itemname":"product1","qty":"3","prices":"4500"} 
```

这是我的表格格式

```
<table class="list-order">
    <tr>
        <th class="order">order</th>
        <th class="qty">qty</th>
        <th class="pice">price</th>
    </tr>
    //how to append ajax result here
    <tr>
        <td colspan="2"></td>
        <td align="right"><input type="submit"  size="25" id="process" value="Proses"/></td>
    </tr>
</table> 
```

我想附加ajax的结果

```
<tr>
    <td></td>
    <td></td>
    <td></td>
</tr> 
```

并且不在标签内，例如

```
<tr>
   <td>result is not here</td>
</tr> 
```

最终结果看起来像这样

```
<table class="list-order">
    <tr>
        <th class="order">order</th>
        <th class="qty">qty</th>
        <th class="pice">price</th>
    </tr>
    <!-- result look like this -->
    <tr>
        <td>product1</td>
        <td>2</td>
        </td>4500</td>
    </tr>
    <!-- end result-->
    <tr>
        <td colspan="2"></td>
        <td align="right"><input type="submit"  size="25" id="process" value="Proses"/></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:54:51.257

在不知道 JSON 的确切格式的情况下，很难给出明确的答案。但是，假设您有一个 JSON 对象数组来表示您的行，您需要遍历该数组并为每个对象执行以下操作：

*   创建一个新`<tr>`元素 -`var $tr = $('<tr/>');`
*   对于每一项信息（我假设每一项`<td>`），创建一个`<td>`元素并设置其内容 - `var $td = $('<td/>').html(x.y)`（`x`是您当前的对象，`y`是对象中的一个字段），然后将其附加到行 - `$tr.append($td);`。
*   追加现有表中最后一行之前的行 -`$('.list-order tr:last').before($tr);`

根据问题中提供的其他信息，以下代码应该可以完成您需要做的事情：

```
success: function(result) {
    //result is json format
    var $tr = $('<tr/>');
    $tr.append($('<td/>').html(result.itemname));
    $tr.append($('<td/>').html(result.qty));
    $tr.append($('<td/>').html(result.prices));
    $('.list-order tr:last').before($tr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:58:35.247

在您的 ajax 成功函数中：

```
success:function(result){
            //create new tr
            var $tr = $('<tr>');
            //extract value from result and put in tr
            $tr.html(result.someVal);
            //find first <tr> and append new tr after it
            $('table.list-order tr:first').after($tr);
         } 
```

# powerpoint - 有没有办法折叠/展开 PowerPoint 部分

> ID：11538426
> 
> 赞同：0
> 
> 时间：2012-07-18T09:36:30.020
> 
> 标签：powerpoint, office-interop

全部在标题中。使用 Presentation.SectionProperties，我可以添加/删除/重命名部分，但我找不到折叠/展开的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:54:41.347

有趣的问题，谢谢提问。我花了一点时间才弄清楚，但方法如下：

```
Dim oDW As DocumentWindow
Set oDW = Windows(1)
With oDW
    .ExpandSection 2, False
End With 
```

PPT对象模型的使用不是很直观，是吗？

# javascript - 创建一个粘性导航 css 和 jquery

> ID：11538428
> 
> 赞同：3
> 
> 时间：2012-07-18T09:36:34.250
> 
> 标签：javascript, jquery, html, css

我目前正在为一个网站制作一个粘性导航，我遇到了一些问题，当导航变得`position:fixed`似乎跳跃并且看起来“笨重”时，这是我正在尝试做的一个小提琴，

[http://jsfiddle.net/DKtLR/](http://jsfiddle.net/DKtLR/)

理想情况下，结果将是用户滚动并且导航不在固定位置，直到它滚动出视口，然后它变得固定并滑回视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:11:09.970

由于您只希望它在完全超出视口时固定，然后滑入，只需修改`top`属性，然后将其动画化回到视图中。请参阅[此小提琴](http://jsfiddle.net/chris27/D8V7b/1/)以获取工作示例。

**更新**

[这个更新的小提琴](http://jsfiddle.net/chris27/D8V7b/3/)应该更好地工作，因为它只应用尚未应用的行为，并在返回正常的“静态”位置时完全删除动态样式。

请注意，向上滚动时仍有闪烁 - 这是因为导航从其固定位置“跳”回其静态位置。这可以使用与上述动画类似的技术轻松解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:57:01.317

您可以简单地使用 StickyScroller jquery 插件：http: [//vertstudios.com/blog/jquery-sticky-scroller-position-fixed-plugin/](http://vertstudios.com/blog/jquery-sticky-scroller-position-fixed-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:46:02.487

我根据[这个解决方案](https://stackoverflow.com/questions/9144560/jquery-scroll-detect-when-user-stops-scrolling/9144790#9144790)制作了这个替代解决方案。基于`setInterval`功能（另请参阅控制台日志）。

```
var interval_id = false;
var curOffset, oldOffset;
var altmenu;
$(document).ready(function(){
    altmenu = $('.top-nav')[0].cloneNode(true);
    altmenu.style.position = 'absolute';
    altmenu.style.display = 'none';
    document.body.appendChild(altmenu);
    oldOffset = $(window).scrollTop();
    $(document).bind('scroll',function(){
        if (interval_id) {
            return;
        }
        //altmenu.style.display = 'none'; // optional
        interval_id = setInterval(function() {
            curOffset = $(window).scrollTop();
            if(curOffset == oldOffset) {
                console.log('scrolling stopped',curOffset);
                clearInterval(interval_id);
                interval_id = false;
                if (curOffset>120) {
                    altmenu.style.display = 'block';
                } else {
                    altmenu.style.display = 'none';
                }
                $(altmenu).css({
                    top: (curOffset-120)+'px'
                }).animate({
                    top: (curOffset)+'px'
                }, 500);
            }
            oldOffset = curOffset;
        }, 500); //setInterval
    });//scroll
});//ready 
```

[测试脚本](http://pastebin.com/ySrQJRHx)和[jsfiddle](http://jsfiddle.net/DKtLR/10/)在这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:59:12.933

## 在顶部，然后用动画固定，所以它不*笨重*

[这可能是](http://jsfiddle.net/dMLX7/)您正在寻找的解决方案，因为它在滚动出视图时提供了固定菜单栏，但是当它从顶部切换到固定时，它会执行向下滑动动画，因此感觉不像您描述的那样它*笨重*。

我在示例中使用的 HTML（简化）：

```
<div id="menu">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        ...
    </ul>
</div>
<div id="content" /> 
```

CSS当然很简单（只有相关的样式）

```
#menu {
    position: absolute;
    width: 100%;
}
#menu.out {
    position: fixed;
}
#menu ul {
    margin: 0;
    list-style: none;
}
#menu ul li {
    display: inline-block;
} 
```

以及执行它并且执行得如此之快的脚本（因此它执行得尽可能快，因为最慢的部分是对浏览器本机`getBoundingClientRect()`函数的调用，这意味着它仍然很快，非常快）：

```
$(function() {

    // save element references for faster execution
    var menu = $("#menu");
    var ul = menu.find("ul");
    var content = $("#content")[0];

    // get menu actual height
    var menuHeight = menu[0].getBoundingClientRect().bottom;

    // detect whether menu is scrolled out
    var inView= true;

    $(document).scroll(function(evt) {
        evt.preventDefault();

        var top = content.getBoundingClientRect().top;
        var nextInView = (top + menuHeight) > 0;

        // did state change so we have to change menu positioning
        if (inView ^ nextInView)
        {
            inView = nextInView;
            if (inView)
            {
                menu.removeClass("out");
            }
            else
            {
                menu.addClass("out");
                ul.hide().slideDown("fast");
            }
        }
    });

}); 
```

就是这样。您还可以通过设置 top 样式属性的动画`slideDown()`来调整动画，`slide in`同时您确切地知道必须在动画之前放置菜单的视口上方多少像素。

当您滚动页面并且菜单离开视图时，它会将其切换到固定位置并向下滚动菜单，因此它不仅可以跳转到视图中，而且*可以顺利返回*。

# android - 如何知道应用程序是否在 Android ICS 中被禁用

> ID：11538431
> 
> 赞同：7
> 
> 时间：2012-07-18T09:36:36.137
> 
> 标签：android

在 Android ICS 中，我们可以禁用内置应用程序。是否可以知道特定应用程序是否在代码中被禁用或启用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T08:22:59.400

```
ApplicationInfo ai = getActivity().getPackageManager().getApplicationInfo("your_package",0);

boolean appStatus = ai.enabled; 
```

如果`appStatus`是，`false`则应用程序被禁用:)

编辑：

在 Android 11（API 级别 30）上，您还需要告诉清单您要从哪些应用收集信息：

```
<manifest package="com.example.game">
    <queries>
        <package android:name="com.example.store" />
    </queries>
</manifest> 
```

来源：[https ://developer.android.com/training/basics/intents/package-visibility#package-name](https://developer.android.com/training/basics/intents/package-visibility#package-name)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-19T08:40:26.067

**接受的答案也可能导致异常**，即，`NameNotFoundException`因此您可能必须构建一个静默捕获异常并确定启用状态的流程（它实际上是第三种状态，即未安装）。

因此，最好像这样找到已启用和已安装的状态：

```
public static final int ENABLED = 0x00;
    public static final int DISABLED = 0x01;
    public static final int NOT_INSTALLED = 0x03;

    /**
     * @param context Context
     * @param packageName The Package name of the concerned App
     * @return State of the Application.
     *
     */
    public static int getAppState(@NonNull Context context, @NonNull String packageName) {
        final PackageManager packageManager = context.getPackageManager();

        // Check if the App is installed or not first
        Intent intent = packageManager.getLaunchIntentForPackage(packageName);
        if (intent == null) {
            return NOT_INSTALLED;
        }
        List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
        if(list.isEmpty()){
            // App is not installed
            return NOT_INSTALLED;
        }
        else{
            // Check if the App is enabled/disabled
            int appEnabledSetting = packageManager.getApplicationEnabledSetting(packageName);
            if(appEnabledSetting == COMPONENT_ENABLED_STATE_DISABLED || 
                    appEnabledSetting == COMPONENT_ENABLED_STATE_DISABLED_USER){
                return DISABLED;
            }
            else{
                return ENABLED;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:43:47.710

尝试[http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29)并检查返回的 ApplicationInfo 对象中的“启用”标志。

# wpf - wpf4, prim4 在同一区域的视图之间切换

> ID：11538433
> 
> 赞同：0
> 
> 时间：2012-07-18T09:36:46.783
> 
> 标签：wpf, views, prism, mef, switching

我想使用 wpf 和棱镜 MEF 在同一区域上显示同一区域的三个视图（列表、添加和编辑视图）。用户必须查阅列表并选择启用添加或编辑视图的操作。我不想使用弹出窗口。这是一种不基于外壳的导航。我尝试了视图的可见性，但我不喜欢它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:45:04.990

您可以创建一个包含三个视图的视图。选择一个视图后，您可以将活动视图替换为选定视图。

# php - SVG 外部链接适用于 Chrome，但不适用于 Safari (WebKit)

> ID：11538440
> 
> 赞同：0
> 
> 时间：2012-07-18T09:37:04.333
> 
> 标签：php, google-chrome, safari, webkit, svg

我正在开发一个需要根据变量显示不同 SVG 图像的 php 项目。图像显示在 iFrame 中，如下所示：

```
<iframe name="dispFrame" id="dispFrame" src="<?php echo $svgPath; ?>" frameborder="0">
</iframe> 
```

其中 $svgPath 是 SVG 文件的路径。这个 SVG 文件使用对另一个 SVG 的外部引用来包含它的一些元素（它是一种预制元素的库）。例子：

```
<use xlink:href="../library.svg#bluebox"  x="200" y="280"/> 
```

这适用于 Firefox 和**Chrome**，但由于某种原因它不适用于 Safari。在 Safari 中，会显示主 SVG 文件，但没有从外部库链接的元素。
我读过这曾经是**WebKit 的一个问题**（Chrome 和 Safari 都基于它），但显然 WebKit 说它现在已经**解决**了。我不确定为什么在 Chrome 中工作正常而在 Safari 中没有。
知道我可以做些什么来让它在 Safari 上也能正常工作吗？

# security - 此自定义 SSO 方案的任何安全漏洞

> ID：11538441
> 
> 赞同：0
> 
> 时间：2012-07-18T09:37:08.473
> 
> 标签：security, openid, single-sign-on

我将使用以下方案来实现 SSO -

初始登录 -

1.  每当用户加载客户端应用程序时，他都会被重定向到 SSO 登录页面。
2.  一旦用户登录，就会在客户端上设置一个加密的 cookie 令牌，并且该值也存储在会话中。

访问另一个应用程序 -

1.  当用户加载另一个客户端应用程序时，他会再次被重定向到 SSO 登录页面。
2.  SSO 模块首先检查加密的 cookie 是否存在，然后将该值与会话中的值进行比较。
3.  如果这两者都匹配，它会将用户重定向回经过身份验证的用户。
4.  否则它会要求用户输入用户名/密码。

此方案是否存在任何安全漏洞？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:56:14.847

对于 SSO 方案，该设计似乎相当标准。当然，即使这个概念是安全的，在该方案的实施中也可能出现漏洞。例如，一个安全的实现需要防止 SSO 身份验证 cookie 的泄露以及对依赖系统的身份断言中的漏洞。此外，身份验证机制本身的漏洞（例如弱密码）可能会在 SSO 环境中被放大，在该环境中，可以使用单个凭据对多个应用程序进行身份验证。

使用加密的 cookie 和会话来识别依赖应用程序的最终用户可能是多余的，如果动机是防御会话劫持攻击，则可能无效。如果包含这些 cookie 的 HTTP 请求曾经以明文形式发送，则会话 ID 和加密的 cookie 密文都将以明文形式发送，这可能会引发欺骗漏洞。（当然，不会发送 cookie 明文，但攻击者只需要 cookie 的密文内容。）为了减轻这种威胁，会话 cookie 应该设置为安全的，并且 SSO 登录页面只能通过 SSL 访问。

如果加密 cookie 的动机是允许在会话生命周期之后保存凭证，则需要注意使用适当的加密实践（例如，密钥管理和使用标准加密算法）。当然，cookie 应该被标记为安全的，以确保（出于实际目的）它不是以明文形式发送的。可能需要采取其他对策，例如在每次断言后更新 cookie 以防止重复，以及限制生命周期（例如，要求每*x*天重新验证一次）。

该方案还要求验证者在成功认证最终用户后向 RP 做出身份断言。有几种标准协议，例如[OAuth](http://en.wikipedia.org/wiki/OAuth)和[OpenID](http://en.wikipedia.org/wiki/OpenID)。

最后，用户应该有权终止 SSO 会话，以防止在用户离开会话时进行未经授权的访问。

当然，需要考虑依赖系统的保证要求——如果 SSO 系统受到损害，风险（在可能性和影响方面）是什么？随着风险的增加，防御妥协的战略和运营对策（例如，风险和脆弱性评估）的成本效益也会增加。

# java - 在 JFrame 中显示异常

> ID：11538443
> 
> 赞同：1
> 
> 时间：2012-07-18T09:37:12.737
> 
> 标签：java, swing, jframe

我正在使用 swing(JFrame) 作为我的应用程序的 UI。我需要使用 try/catch 向 JFrame 的红色标签显示程序面临的异常。

目前我正在这样做：

```
 some class extends JFrame 
  {      

         JLabel label=new JLabel("");
         add(label);
         findFile()

         {
              try{
                   //some code

                 }
              catch(IOException e)
                 {
                    label.setText(e.toString());
                 }

  } 
```

所以想知道用catch块写的一行代码是否正确？如果（是=确定）谢谢

否则请告诉我将异常打印为 JFrame 上的标签的方法。

提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:45:16.837

上面的代码可能不起作用，因为更新代码似乎没有在事件调度程序线程 (EDT) 中运行。该线程负责更新您的 UI、响应事件等。

您很可能必须使用[SwingUtilities.invokeLater(Runnable run)](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)来更新文本。

话虽如此，大多数 Swing 应用程序（据我所知）通常倾向于使用[JOptionPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)向用户显示错误消息和/或任何其他通知。

在网上找到这两个例子应该没​​有问题。

# iphone - XCode 方法文件

> ID：11538448
> 
> 赞同：0
> 
> 时间：2012-07-18T09:37:20.643
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

ai 如何创建一个 .m 文件，其中包含我的 iphone 应用程序的所有方法？

我需要这些方法才能从任何视图中调用。

示例方法：

```
-(void)loadinfo(id):sender{
//Dynamically load UI Stuff
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:36:37.880

听起来您想要的可以通过创建自定义子类的正常设计模式实现`NSObject`。不需要做任何花哨的事情，比如使用类方法或作为单例编写，但如果你愿意，你可以。

您需要做的就是创建一个标准的 NSObject 派生子类，其中包含您需要的所有方法（类或实例），然后在需要使用其方法之一时导入该类（通过直接调用类方法，或通过实例化类的对象并以正常方式调用对象上的方法）。因此，在所需文件中导入类：

```
#import "YourSubclass.h" 
```

然后，当你想调用一个方法时：

```
[YourSubclass yourClassMethod];  // If a class method 
```

或者

```
YourSubclass *subclass = [[YourSubclass alloc] init];   // If an instance method
[subclass yourInstanceMethod];
//[subclass release];  // Uncomment if *not* using ARC 
```

您也可以将这个子类实现为单例，尽管有些人认为这种设计模式不是一个好方法（Luke Redpath 在[他关于单例的文章中](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)陈述了这种观点），所以您是否选择采用这种方式取决于您。

# javascript - Native Phonegap，下载和创建文件，动态命名文件，返回路径

> ID：11538451
> 
> 赞同：0
> 
> 时间：2012-07-18T09:37:28.047
> 
> 标签：javascript, html, cordova

问题在于我对 Javascript afaik 缺乏知识。当我写：

```
function startOnDevice(){
   var path = document.addEventListener("deviceready", onDeviceReady, true);
} 
```

然后我怎样才能传递文件名应该是什么的“字符串”？（ei。到 onDeviceReady，然后再往下走。

然后在它被传递给 onDeviceReady 之后。它需要传递给 onFSSuccess：

```
function onDeviceReady() {
//what do we have in cache already?
$("#status").html("Checking your local cache....");    
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, null);    
}

function onFSSuccess(fileSystem) {
    fileSystem.root.getDirectory("dk.lector.html5Generic",{
        create:true
    },gotDir,onError);
} 
```

然后 onFSSuccess 需要以某种方式将值返回给变量路径。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:41:40.200

好的，这是一个新版本，因为您更新了问题中的代码：

```
var file = "foo.txt";

function onDeviceReady() {
  //what do we have in cache already?
  $("#status").html("Checking your local cache....");
  alert("file is " + file);    
  window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, 
  function (fileSystem) {
    onFSSuccess(fileSystem, file); // use file variable from above and pass as second param.
  }, null);    
}

function onFSSuccess(fileSystem, file) {
  alert("file is " + file);
  fileSystem.root.getDirectory("dk.lector.html5Generic",{
    create:true
   },gotDir,onError);
} 
```

# maven-2 - Maven 2 在 Ubuntu 中“找不到符号”，但在 Windows 中没问题

> ID：11538455
> 
> 赞同：1
> 
> 时间：2012-07-18T09:37:34.120
> 
> 标签：maven-2

当我在 Ubuntu 系统中运行“mvn install”时，我的项目出现了很多“找不到符号”的错误，例如：

> /home/cruisecontrol-bin-2.8.4/projects/PeerReview/arch/src/test/java/com/bleum/hydra/arch/repository/MockGuyRepositoryTest.java:[157,2] 找不到符号
> 符号：类 PaginationSupport
> 位置：类 com.bleum.hydra.ar
> 
> ​​ch.repository.MockGuyRepositoryTest /home/cruisecontrol-bin-2.8.4/projects/PeerReview/arch/src/test/java/com/bleum/hydra/arch/repository/MockGuyRepositoryTest.java： [157,67] 找不到符号
> 符号：变量排序
> 位置：com.bleum.hydra.ar​​ch.repository.MockGuyRepositoryTest 类

似乎所有错误都发生在测试类中。
但是，当我在 Windows XP 中使用相同的命令运行相同的项目时，一切都很好。在 Windows 的 Eclipse 中，没有任何编译错误。
这是 Ubuntu 的“mvn -v”信息：

> Apache Maven 2.2.1 (rdebian-1)
> Java 版本：1.6.0_20
> Java 主页：/usr/lib/jvm/java-6-openjdk/jre
> 默认语言环境：en_US，平台编码：UTF-8
> 操作系统名称：“linux”版本：“2.6.32-21-server”拱：“amd64”家庭：“unix”

这是 Windows 的“mvn -v”信息：

> Apache Maven 2.2.1 (r801777; 2009-08-07 03:16:01+0800)
> Java 版本：1.6.0_18
> Java 主页：C:\Program Files\Java\jdk1.6.0_18\jre
> 默认语言环境：en_US，平台编码：Cp1252
> 操作系统名称：“windows xp” 版本：“5.1” 架构：“x86” 系列：“windows”

任何想法？

# java - 来自同一枚举的动态 JComboBoxes

> ID：11538458
> 
> 赞同：1
> 
> 时间：2012-07-18T09:37:49.163
> 
> 标签：java, swing, enums, jcombobox

我正在尝试为 LARP 游戏设置角色管理器。在游戏中，一个角色可以拥有多个角色（1 个或 2 个）。我想使用两个组合框来生成角色，这两个组合框都来自同一个`enum`名为`Role`. 这本身很容易：

```
 JComboBox roleFirstComboBox = new JComboBox(IPlayerCharacter.Role.values());
    JComboBox roleSeondComboBox = new JComboBox(IPlayerCharacter.Role.values()); 
```

除非说我们的角色是：`Coder, Programmer, SysAdmin, Nerdfighter`您可以成为`Coder/Coder`. 所以第二个框需要排除在第一个框中选择的任何内容。

One thought I had was making a function to pass the enums to a List of some sort and then when one JComboBox is picked, it uses one of the standard container methods to find the asynchronous union(?) everything in Box2 that isn't in框 1。这看起来很可怕。我知道该解决方案使用[JComboBoxModel](https://stackoverflow.com/a/3191882/1075247)，但我不知道如何使其适应我的枚举。

获得这种功能的最佳方法是什么？

### 编辑：

这是我目前正在使用的代码，它只存在于我的窗格中，所以我认为它不再需要上下文。让我知道，如果需要的话。

### 创建组合框

```
JComboBox roleFirstComboBox = null;
JComboBox roleSecondComboBox = null;
...
roleFirstComboBox = new JComboBox(IPlayerCharacter.Role.values());
roleSecondComboBox = new JComboBox(IPlayerCharacter.Role.values()); 
```

### 添加一个动作监听器：

```
roleFirstComboBox.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        roleSecondComboBox.removeAll();
        roleSecondComboBox.addItem(null);
        for (Role role : IPlayerCharacter.Role.values()) {
            if (role != roleFirstComboBox.getSelectedItem()) {
                    roleSecondComboBox.addItem(role);
            } 
        }
    }
});
roleFirstComboBox.setSelectedIndex(0); 
```

### 将其添加到 groupLayout：

```
.addComponent(roleFirstComboBox)
.addComponent(roleSecondComboBox)) 
```

### 最后的外观和错误：

![在此处输入图像描述](../Images/a0417ac75935c4316864eff56fe1e98d.png)

这有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:21:02.517

您可以[`EnumSet`](http://docs.oracle.com/javase/6/docs/api/java/util/EnumSet.html)为每个组使用一个来将它们分开。

编辑：在您的`enum`中，您可以`Set`像这样为每个组创建一个，

```
Set<Resolution> peon = EnumSet.of(Role.Coder, Role.Programmer); 
```

然后你可以用它们制作模型，

```
for (Role r : Role.peon) {
    System.out.println(r.toString());
} 
```

然后根据需要更改模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:31:40.060

将 ActionListener 添加到第一个组合框。触发操作时，将第二个组合框中的模型重置为完整的角色列表，然后使用`removeItem(Object)`删除第二个框中已选择的角色。或者，清空模型并重新添加除所选项目之外的所有项目：

```
private enum Roles {CODER, MANAGER, USER}

JComboBox box1 = new JComboBox(Roles.values());
JComboBox box2 = new JComboBox();
public RoleSelection() {
    box1.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            box2.removeAllItems();
            box2.addItem(null); // For those with only one role
            for (Roles role : Roles.values()) {
                if (role != box1.getSelectedItem()) {
                    box2.addItem(role);
                }
            }
        }
    });
    // Trigger a selection even to update the second box
    box1.setSelectedIndex(0);

    add(box1, BorderLayout.NORTH);
    add(box2, BorderLayout.SOUTH);
    pack();
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public static void main(String[] args) {
    new RoleSelection().setVisible(true);
} 
```

# css - 将自定义 CSS 与 gwt 一起使用

> ID：11538463
> 
> 赞同：3
> 
> 时间：2012-07-18T09:38:07.057
> 
> 标签：css, gwt

如何设置 gwt 以使用我的自定义 css 进行化妆？这些链接根本没有帮助我： [https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss?hl=cs](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss?hl=cs) [http://code.google.com/p/google-web-toolkit -doc-1-5/wiki/GettingStartedStyle#Default_styles](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/GettingStartedStyle#Default_styles)

*   问题是我无法让 gwt 检测我在 lorum.gwt.xml 文件中声明的 css 文件，当我启动调试模式时，jetty 在启动时的日志输出中给出以下错误：

：

```
 00:00:00.811  [WARN] 404 - GET /lorum/stylesheet.css (127.0.0.1) 1418 bytes
          00:00:00.811  [INFO] Request headers
            00:00:00.811  [INFO] Host: 127.0.0.1:8888
            00:00:00.811  [INFO] Connection: keep-alive
            00:00:00.811  [INFO] User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/11.10 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19
            00:00:00.811  [INFO] Accept: text/css,*/*;q=0.1
            00:00:00.811  [INFO] Referer: http://127.0.0.1:8888/Home.html?gwt.codesvr=127.0.0.1:9997
            00:00:00.812  [INFO] Accept-Encoding: gzip,deflate,sdch
            00:00:00.812  [INFO] Accept-Language: en-US,en;q=0.8
            00:00:00.812  [INFO] Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
            00:00:00.812  [INFO] Cookie: JSESSIONID=ywoku1zfjs0b
          00:00:00.812  [INFO] Response headers
            00:00:00.812  [INFO] Content-Type: text/html; charset=iso-8859-1
            00:00:00.812 
```

它不会加载我的 CSS。

**lorum.gwt.xml 来源：**

```
l version="1.0" encoding="UTF-8"?>
<module rename-to='lorum'>
    <!-- Inherit the core Web Toolkit stuff.                        -->
    <inherits name='com.google.gwt.user.User'/>
    <inherits name='com.google.gwt.user.theme.chrome.Chrome'/>
    <inherits name="com.google.gwt.resources.Resources" />
    <inherits name="com.company.lorum.gwt.client.stylesheet.css"/>
    <entry-point class='com.company.lorum.gwt.client.LoadModuleLorum'/>

    <stylesheet src='stylesheet.css' />

    <servlet path="/AuthenticationImpl" class="com.company.lorum.gwt.server.implementations.AuthenticationServiceImpl" />
    <servlet path="/GeneralImpl" class="com.company.lorum.gwt.server.implementations.GeneralServiceImpl" />
    <servlet path="/ProjectImpl" class="com.company.lorum.gwt.server.implementations.ProjectServiceImpl" />
</module> 
```

*   我尝试在欢迎文件（Home.html）中继承我的css文件，它有效；但它不会将样式规则应用于我的小部件。而且我不喜欢这种方法，因为不同的浏览器对 css 语法的行为不同。如果你知道我是如何让它工作的，我会使用它。这是我的 Home.html 源

：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
    <link href="stylesheet.css" rel="stylesheet" type="text/css">
    <title>lorum</title>
</head>
<body>
<script language="javascript" src="lorum/lorum.nocache.js"></script>
</body>
</html> 
```

CSS（stylesheet.css）源（很简单，因为我只想测试它是否有效）：

```
.gwt-MenuBar {
color:green;
}
.gwt-Button {
font-size: 200%;
} 
```

**子问题：**
我必须将我的 css 文件存储在哪里，以便我的 lorum.gwt.xml 文件使用以下语法检测和使用它：`<stylesheet src='stylesheet.css' />`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T13:17:09.430

这对我有用，我不会为我自己的答案投票，只有在其他人验证该解决方案也适用于他们的情况下。

实际上，只需**2 个简单的步骤即可实现。**

* * *

**步骤 1.**
*将您的样式表 (css) 文件放在您的 webapp 文件夹中*

* * *

**步骤 2.**
*将以下行添加到您的 gwt.xml 文件：*

```
<stylesheet src='/yourstylesheetname.css' /> 
```

**注意：**把这条线放在最后一个继承声明和你的入口点声明之间。

* * *

**额外：** 我的 gwt.xml 来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='lorum'>
    <inherits name='com.google.gwt.user.User'/>
    <inherits name='com.google.gwt.user.theme.chrome.Chrome'/>
    <inherits name="com.google.gwt.resources.Resources" />

    <stylesheet src='/customsheet.css' />

    <entry-point class='com.company.lorum.gwt.client.LoadModuleLorum'/>

    <servlet path="/AuthenticationImpl" class="com.company.lorum.gwt.server.implementations.AuthenticationServiceImpl" />
    <servlet path="/GeneralImpl" class="com.company.lorum.gwt.server.implementations.GeneralServiceImpl" />
    <servlet path="/ProjectImpl" class="com.company.lorum.gwt.server.implementations.ProjectServiceImpl" />
</module> 
```

项目树

```
java     __ com __ company __ lorum __ gwt __ client __ **
                                           __ server __ **
                                           __ shared __ **
                                           __ Lorum.gwt.xml
resources__ **
webapp   __ WebFiles __ **
         __ WEB-INF  __ **
         __ Home.html
         __ mystylesheet.css 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:43:56.620

如果要将 css 引用放在 gwt.xml 文件中，则必须将文件添加到 public 文件夹中，然后您可以引用相对于编译文件位置的 css，因为它将从 js 文件中引用，这将使浏览器在文件旁边的已编译文件夹中查找。但是，您可以将它放在 webapp 文件夹中，这也会导致它被复制到目标并从 gwt.xml 中引用它。

将其放入 HTML 文件中也可以。但是，如果您要覆盖任何默认小部件样式，请将 css 链接放在 .nocache.js 文件之后，以便它覆盖其值

检查此以获取更多信息：

[我在哪里放置 GWT 应用程序的静态文件？战争文件夹还是公用文件夹？](https://stackoverflow.com/questions/1502166/where-do-i-put-static-files-for-gwt-app-war-folder-or-public-folder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:31:38.860

包含 CSS 文件有两种简单的方法。你可以在 HTML 中定义它，但是如果你想覆盖一个已经被使用的值，你必须在 CSS 属性的末尾使用 !important 标记。

或者您可以在 YourName.java 中定义它

```
public interface CellTabelResources extends CellTable.Resources {
    public interface CellTableStyle extends CellTable.Style {
    };

    @Source({ "style.css" })
    CellTableStyle cellTableStyle();
} 
```

这使您的 style.css 最重要，因此它会覆盖所有其他样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T11:23:05.327

以下解决方案对我有用：

1.  将 YourCss.css 文件放到 YourApplication.html 所在的同一目录下
2.  将以下行添加到`<head>`YourApplication.html 的块中：

    ```
    <link type="text/css" rel="stylesheet" href="YourCss.css"> 
    ```

# arm - 区分 arm-xscale-linux-gnueabi-gcc 和 arm-linux-gcc 编译器

> ID：11538465
> 
> 赞同：1
> 
> 时间：2012-07-18T09:38:14.697
> 
> 标签：arm, cross-compiling, xscale

我正在开发在两个不同的 pos 终端上运行的软件，并且我在 arm-xscale-linux-gnueabi-gcc 编译器上运行了共享库，我想将其用于另一个 arm-linux-gcc 终端。我使用下面的代码区分了 gcc（用于 PC）和 arm-xscale-linux-gnueabi-gcc（用于第一个终端），我可以很好地模拟。这两个编译器定义了以下宏**臂**。请帮助我区分这些，以便我可以使用相同的库

```
#ifdef __arm__
 // terminal specific code
#else
 // pc specific code
#endif 
```

另外，如果您有办法通过串行连接在 pc 和此终端 (arm-linux-gcc) 之间传输文件，请提供帮助。我已经尝试过使用 lrzsz 的 minicom，但由于缺少我找不到源代码的 libnsl 库，我无法交叉编译 lrzsz。

注意：我是新来的，但我还没有发现这个问题被讨论过。

谢谢。

# android - 包裹/序列化类加载器

> ID：11538472
> 
> 赞同：4
> 
> 时间：2012-07-18T09:38:40.423
> 
> 标签：android, classloader, serializable, parcelable

我想知道是否可以打包（或序列化） a`ClassLoader`以通过 a 将其发送`Message`到 Android 中的另一个进程。[`ClassLoader`](http://developer.android.com/reference/java/lang/ClassLoader.html)没有实现`Parcelable`/ `Serializable`。

关于如何做到这一点的任何提示？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:24:39.023

## 类加载器

类加载器基本上是一个哈希表，其条目由类名作为键，并指向加载到 VM 中的字节码。在 VM 本身中加载的字节代码当然是 Java 进程的限制，因为 Java 不允许您操作代码。请注意，字节码已由 JIT VM 编译为特定于 CPU 的代码，并将包含内存位置和其他低级结构。

*可以在同一个 VM*中共享类加载器（通过序列化或其他方式），因为类加载器仍然能够指向*原始*字节码。但是，为了序列化然后反序列化到另一个 VM，类加载器必须序列化字节码。还有问题。

## 序列化类加载器

作为一个思想实验，我们将如何序列化代码以便其他进程可以反序列化它？

我们必须将其作为类大小的块来处理，以便序列化实体具有整个类接口。我们必须将字节码中的指针“解开”到符号。我们还必须复制该类的整个字符串和符号表，以便自省继续工作。

我们刚刚定义的是类文件本身（稍有不同的是类成员的初始化与序列化）

让我重复一遍：**类文件** *是*类的序列化版本。

## DEX 难题

但是，Android 会将类文件预编译到 DEX 中。这是一个包含 JAR 优化版本的单个文件 - 类彼此预先链接，所有字符串符号位于相同的共享字符串/符号池中。所以，在 Android 中，你最小的可共享组件就是 DEX。

在许多情况下，应用程序或设备制造商会创建一个 ODEX 文件。这是一个已编译到特定 CPU 和架构（包括大端或小端系统）的 DEX 文件。

在 Android 中，您可以将 ODEX 文件视为序列化的类加载器。

## 远程类加载

问题的症结在于一个进程如何加载对原始进程可见的类文件。[yorkw](https://stackoverflow.com/users/873875/yorkw)建议了一个他/她发现的[类加载器](http://ejoe.cvs.sourceforge.net/viewvc/ejoe/EJOE/src/de/netseeker/ejoe/EJClassLoader.java?revision=1.28&view=markup)，它的功能类似于我的建议。方法是第一个进程实现类查找服务，返回类字节码。但是，由于上面列出的 DEX 问题，这不能直接在 Android 上运行。

## 解决方案？

因此，您实施的任何解决方案都将基于 (O)DEX。您基本上需要让您的客户端与您的服务器对话并请求一个 (O)DEX 文件，然后将其作为单个实体加载。加载它将返回您的新类加载器

现在，我从来没有这样做过，Android 完全有可能只允许加载一个 DEX 文件，从而破坏这种方法。YMMV

我真的希望这个讨论会有所帮助......

* * *

**TL;DR** You can't serialize a class loader; however you *might* be able to persuade another process to load a (O)DEX file which would produce the same result.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:53:20.160

不，很遗憾这是不可能的。ClassLoader 的某些子集可能可以使 parcelable，但我真的反对它。

如果您的问题是您试图从`Parcel`不同的应用程序中读取自定义类，您应该能够通过将该类复制到另一个应用程序来读取它（确保它在两个应用程序中位于同一个包中）。您所要做的就是在第一个应用程序中将其写入这样的包裹中：

```
parcel.writeParcelable(myCustomParcelable, 0); 
```

而在另一端，在您收到包裹的地方，请这样阅读：

```
MyCustomParcelable myCustomParcelable = (MyCustomParcelable)parcel.readParcelable(getClassLoader()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:05:58.893

鉴于 ClassLoader 的强大本机组件以及它的作用，我无法想象以任何方式与其他进程共享 ClassLoader，至少不会以任何有意义的方式。

# xml - 在 Visual C++ 中解析 xml

> ID：11538473
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:38:51.657
> 
> 标签：xml, parsing, visual-c++

我想在可视化 C++ 代码中获取 xml 字符串的节点值

我的 vc++ 代码是这样的

url=_T("http://www.xyz.com/val"); CString 结果 = g_pCAddonHandler->SendWebRequest(url, L"GET", L"", false); // 我向一个 web url 发送一个请求，它返回一个 xml 字符串，xml 的格式如下

回复

结果名称=“响应”numFound=“1”开始=“0”

文档

str name="id">497888/str

str name="lastName" 罗斯 /str

str name="name" 冬青 /str

/文档

/结果

/回复

注意：- 我没有使用 < & > 因为 stackoverflow 不允许这些。

请帮助获取所有节点。我在 VC++ 方面相对较新。

问候阿尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:45:32.863

您可以通过标记字符串并获取所有节点来编写自己的 XML 解析器，或者使用一些现有的解析器，如[TinyXML](http://www.grinninglizard.com/tinyxml2/index.html)，阅读[本](http://www.bluedinosaurs.com/code/blog/wordpress/2012/01/tutorial-using-tinyxml-part-1/)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:47:50.300

如果您发现 TinyXML 很困难，您可以随时尝试 [http://pugixml.org/](http://pugixml.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:30:35.827

试试这个

```
MSXML2::IXMLDOMDocumentPtr pXMLDom;
IXMLDOMNodeListPtr itemNodes = NULL;
CComBSTR bstrResp(szResponse);
::CoCreateInstance(MSXML2::CLSID_DOMDocument, NULL, CLSCTX_INPROC_SERVER,
        MSXML2::IID_IXMLDOMDocument, (void**)&pXMLDom);
BOOL bRet = pXMLDom->loadXML((BSTR) bstrResp);

if(bRet)
{
 itemNodes = pXMLDom->selectNodes(_T( "/response/result/doc/str[@name='id']"));
 CString szId =  itemNodes->item[0]->text
 ....

} 
```

有关详细信息，请检查此

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms756987%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms756987%28v=vs.85%29.aspx)

# c++ - 这个 C++ 静态分析规则是否有意义？

> ID：11538478
> 
> 赞同：12
> 
> 时间：2012-07-18T09:39:15.943
> 
> 标签：c++, reference, language-lawyer, reference-binding

我正在实现一些 C++ 静态分析规则，其中一个禁止函数返回引用或指向函数的引用参数的指针，即以下都是不合规的：

```
int *f(int& x) { return &x; } // #1
const int *g(const int& x) { return &x; } // #2
int& h(int& x) { return x; } // #3
const int& m(const int& x) { return x; } // #4 
```

对此给出的理由是“无论引用参数是临时对象还是对参数的引用，都是实现定义的行为。”

但是，我对此感到困惑，因为 C++ 中的流运算符是这样编写的，例如

```
std::ostream& operator<<(std::ostream& os, const X& x) {
    //...
    return os;
} 
```

我认为我非常有信心 C++ 中的流运算符通常不会表现出实现定义的行为，那么发生了什么？

根据我目前的理解，我希望 #1 和 #3 是明确定义的，基于临时对象不能绑定到非常量引用，因此`int& x`指的是具有超出范围的生命周期的真实对象函数，因此返回对该对象的指针或引用就可以了。我希望 #2 是狡猾的，因为临时可能已绑定到`const int& x`，在这种情况下，尝试获取其地址似乎是一个糟糕的计划。我不确定#4 - 我的直觉是这也可能是狡猾的，但我不确定。特别是，我不清楚在以下情况下会发生什么：

```
const int& m(const int& x) { return x; }
//...
const int& r = m(23); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T09:43:02.423

正如你所说，#1 和#3 很好（尽管#1 可以说是不好的风格）。

＃4很狡猾，原因与＃2相同；它允许将 const 引用传播到其生命周期之后的临时对象。

让我们检查：

```
#include <iostream>

struct C {
  C() { std::cout << "C()\n"; }
  ~C() { std::cout << "~C()\n"; }
  C(const C &) { std::cout << "C(const C &)\n"; }
};

const C &foo(const C &c) { return c; }

int main() { 
   const C &c = foo(C());
   std::cout << "c in scope\n";
} 
```

这输出：

```
C()
~C()
c in scope 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:35:15.823

在 C++11 中，如果还存在右值引用重载，则 #2 和 #4 可以变得安全。因此：

```
const int *get( const int &x ) { return &x; }
const int *get( const int &&x ) { return nullptr; }

void test() {
    const int x = 0;
    const int *p1 = get( x ); // OK; p1 is &x.
    const int *p2 = get( x+42 ); // OK; p2 is nullptr.
} 
```

因此，尽管它们很狡猾，但如果程序员知道它们在做什么，它们确实可以安全使用。禁止这样做是很严厉的。

（如果将 const 右值引用重载设为私有、未定义或以其他方式导致编译时或链接时错误，则可能更安全。对于 #4 情况尤其如此，我们返回引用但没有任何内容很好地返回一个引用，并且该语言不允许引用 null。）

# latex - 跳出gvim中的“主Latex文件”

> ID：11538479
> 
> 赞同：1
> 
> 时间：2012-07-18T09:39:18.007
> 
> 标签：latex, vim

我正在使用 gvim 编辑 LaTex 文件。有一些错误的键，在底线，系统要求我输入“主要的 LaTeX 文件：”。无论我输入什么，我都无法摆脱这个。我必须停止这个会话并再次重新打开 gvim。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:48:28.467

你可以输入`q`回车，或者`x`回车，或者只按回车键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:50:53.410

尝试按几次escape，然后`:q!<Enter>`

# python - 是否可以内省覆盖`__dir__`和`__getattribute__`的对象的实际属性/方法？

> ID：11538483
> 
> 赞同：0
> 
> 时间：2012-07-18T09:39:26.773
> 
> 标签：python, introspection

[这个问题](https://stackoverflow.com/questions/11536961/python-object-atributes-and-methods/11537394#comment15254706_11537394)的一些答案带来了非常愚蠢的方法来削弱访问覆盖对象实例的方法和属性的能力`__dir__`和`__getattribute__`.

属性和方法还在，但真的不可访问吗？

例如，`type(x)`即使`x.__class__`引发 AttributeError，仍然返回正确答案。

有没有办法访问隐藏的方法和属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:47:13.727

对于新样式类的实例，您可以执行以下操作：

```
object.__getattribute__(instance, '__dict__') 
```

我在阅读文档中标题为“[*对新样式类*](http://docs.python.org/reference/datamodel.html#more-attribute-access-for-new-style-classes)的更多属性访问”的部分时得到了这个想法，他们建议在其中做类似的事情以避免在其实现中无限递归。

# jquery - asp.net 访问 document.forms[0].controlD

> ID：11538500
> 
> 赞同：-2
> 
> 时间：2012-07-18T09:40:11.377
> 
> 标签：jquery, asp.net, visual-studio

我在通过 JQuery 访问任何 asp 控件时遇到问题。我知道还有其他选择可以做到这一点，但我想知道我做错了什么。这是一个简单的 asp.net 网站：

```
 <head runat="server">  
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js"  type="text/javascript"></script>  
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.3.min.js"  type="text/javascript"></script>  
        <title></title>  
    </head>  
    <body>  
        <form id="form1" runat="server">  
        <div id = "mydiv">  
            <input id="btnInit" type="button" value="button" />  
            <asp:Button ID="Button2" runat="server" Text="Button" />  
        </div>  
            <script>  
             jQuery(window).ready(function () {  
                 var form = document.forms[0];  
             });  
         </script>    
        </form>  
    </body> 
```

在 Jquery 函数中，我应该可以通过 ID（Button2）访问 asp.net 按钮，但我没有。我尝试：Button2、document.form1.Button2、document.forms[0].Button2，而 Visual Studio 看不到它。如果我通过萤火虫调试网站，我可以通过 ID 获取 Button2，但不能在 VS 中获取。有趣的是“form1.btnInit”的作品，但它不是asp.net 控件。

我整夜都在上面，我仍然不知道。有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T09:47:48.147

So you are unable to access the button like this?

```
 var $button = $('#Button2'); 
```

Alternatively you could add a class to the button and access it using that instead:

```
 <asp:Button ID="Button2" runat="server" Text="Button" class="button" /> 
```

Then access it like this:

```
 var $button = $('.button'); 
```

Hope this helps

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T09:42:19.973

您可以使用以下内容获取按钮及其 ID。它对我有用。

```
document.forms[0].Button2.id

alert("Button ID = " + document.forms[0].Button2.id); 
```

# qt - 在按钮上设置新布局

> ID：11538506
> 
> 赞同：1
> 
> 时间：2012-07-18T09:40:30.053
> 
> 标签：qt, layout

我在一个按钮上设置了一个布局（包含 QLabels 和 QSpacers），我想用一个新的布局替换它。为此，我编写了以下代码：

```
while(!layout.isEmpty())
{
    delete(layout.takeAt(0));
} 
```

在此之后，我设置了新的布局：

```
layout.addWidget(...)
layout.addSpacer(...)
...
button.setLayout(layout) 
```

不幸的是，设置了新布局，但仍然可以看到旧布局。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:27:00.450

根据您的评论，您想删除小部件中的项目，而不是布局。 [`QLayout::takeAt`](http://qt-project.org/doc/qt-4.8/qlayout.html#takeAt)返回一个`QLayoutItem*`。因此，您正在循环遍历小部件的布局并删除布局项，而不是添加到布局项的小部件。作为测试，您可以尝试以下方法：

```
while(!layout.isEmpty())
{
    delete layout.itemAt(0)->widget();
    delete layout.takeAt(0);
} 
```

然而，这不是我认为好的长期设计。可能在一些特殊情况下这是最好的方法，但我建议考虑使用堆叠的小部件或类似的东西在呈现的小部件之间来回切换，而不是在按钮中销毁并重新创建整个小部件数组. 或者，考虑两个不同的按钮，只销毁并重新插入按钮而不是按钮的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:50:34.500

你可以尝试做

```
delete button.layout(); 
```

在设置新布局之前。

或者，您可以将小部件等添加到现有布局中（然后不设置新布局）。

[编辑] 只要您只在旧布局上使用指针，这应该可以工作：

```
QLayout* layout = button.layout();
while( !layout->isEmpty() )
{
    delete( layout->takeAt( 0 ) );
}

layout->addWidget(...)   
layout->addSpacer(...)
// do not call button.setLayout() 
```

[Edit2] 如果这只是一个更新问题，你可以试试

```
button->update();
QApplication::processEvents( QEventLoop::IgnoreUserInputEvents ); 
```

# ios - 故事板和 SVN 冲突

> ID：11538510
> 
> 赞同：43
> 
> 时间：2012-07-18T09:40:43.127
> 
> 标签：ios, svn, storyboard

这是一个在引入故事板之前我们从未需要处理的问题 - 每当 UI 中存在冲突的可能性时，我们只是确保没有 2 个开发人员同时处理同一个 XIB 文件。我们避免解决 XIB 冲突的原因是可能存在有问题的副作用（XIB 以 XML 格式表示，因此没有合并 2 个版本的“好”方法）。

现在我们面临这个问题，因为我们所有的 UI 元素都在同一个 .storyboard 文件中 - 防止项目中任何 2 个 UI 元素同时工作使得并行工作变得非常困难。

关于如何解决这个问题的任何建议？提前感谢您的努力。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-20T12:05:07.980

将您的故事板分解为多个故事板。

您的应用没有理由只包含一个情节提要。将您的故事板分解为模块故事板。您可以使用`+storyboardWithName:bundle:`加载情节提要模块。

请参阅：[UIStoryboard 最佳实践](http://robsprogramknowledge.blogspot.com/2012/01/uistoryboard-best-practices.html)以了解其他好的故事板创意。

* * *

**更新**

重要的是要注意这不是问题的完整解决方案。同样，您无法完全避免源代码将大类分解为较小模块时发生合并冲突的可能性，您也无法避免情节提要合并冲突的可能性。这个想法是减少可能性，直到它成为一个可管理的问题。

在大型代码库中总会出现棘手的合并情况。适当分解的解决方案将减少冲突的数量并最大限度地减少所需的锁定次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:49:20.233

这是我在胡闹，试图找到解决方案时想到的。

如果您在 Xcode 中右键单击故事板文件并导航到“打开方式”，您会看到有多个选项 - 默认为“界面生成器 - iOS 故事板”。但是，您也可以选择“源代码”。

如果您以源代码模式打开故事板，则可以进行更改（尽管有点痛苦）。但是您可以从其他故事板添加代码并自己进行更改 - 我没有使用过 SVN，但使用 git 存储库我可以查看其他版本的故事板并复制代码。

我不会说这是一个很好的解决方案——当我尝试在 IB 中重新打开情节提要时，Xcode 随机崩溃时遇到了一些麻烦。有时将代码粘贴到作品中，有时则不然。有几次我不得不更改`<scene>`标签的值。以我的经验，这是非常偶然的，但如果你在尝试任何事情之前备份你的文件，它可能会起作用。

如果它确实有效，请告诉我 - 我很想看看是否可以找到解决这个问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:29:22.260

这是关于合并 XML 文件吗？

幸运的是，SVN 允许您更改用于执行不同类型文件合并的合并工具。（例如[使用 P4Merge 的教程](http://pontusmunck.com/2010/01/30/using-a-cool-merge-tool-with-svn-or-git/)）

所以现在你只需要找到一个合并 XML 文件的好工具（祝你好运:)）

有 WinMerge（带有 DisplayXMLFiles 预过滤器）、diffxml、[XMLMerger](http://sourceforge.net/projects/openshore/files/XML%20Merger/)或[java xmlmerge 工具](http://www.javaworld.com/javaworld/jw-07-2007/jw-07-xmlmerge.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-20T12:12:40.913

您还可以查看现代源代码管理工具。例如，Git 具有智能合并功能。请参阅[此链接](https://stackoverflow.com/questions/2471606/how-and-or-why-is-merging-in-git-better-than-in-svn)，了解您应该考虑*升级*工作流程的原因。

# facebook - Open Graph 元标记不解析

> ID：11538511
> 
> 赞同：1
> 
> 时间：2012-07-18T09:40:49.503
> 
> 标签：facebook, facebook-opengraph

我正在尝试生成自定义 og:meta 标签，以使我们能够通过 Open Graph API 发布操作，标签在页面中呈现良好，但不会被 linter 拾取。

您可以在此处看到暂存网址：http: [//yamgo.tv/zing](http://yamgo.tv/zing)，您将在 head 块中看到以下元标记：

```
<meta name="fb:app_id" content="361493867250674">
<meta name="og:type" content="yamgo-tv-test:channel">
<meta name="og:url" content="http://desktop.dev/zing">
<meta name="og:title" content="Zing">
<meta name="og:image" content="http://yamgo.mobi/images/xxhigh/logo/ZingLogo.jpg"> 
```

但是，如果我使用 Facebook 的 URL linter，我会得到以下信息：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fyamgo.tv%2Fzing](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fyamgo.tv%2Fzing)

linter 告诉我我没有 og:type 标签（我有），并且我还有其他缺失的标签，例如`og:title`我也有。

这只是一个临时站点；这会影响标签的正确掉毛吗？我认为即使该网站没有完全上线，它也会正确地 lint。

谢谢

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:01:53.253

您的 OG 元标记的语法错误。

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

# struts2 - JasperReport Plugin Struts2 强制下载

> ID：11538512
> 
> 赞同：2
> 
> 时间：2012-07-18T09:40:52.530
> 
> 标签：struts2, force-download, jasper-plugin

我正在为我的网络应用程序使用 Struts2、Spring 和 Hibernate。现在，我正在尝试使用 jasper 报告 struts 插件生成 PDF 报告。我将结果类型添加到 struts.xml 文件：

```
 <result-types> 
        <result-type name="jasper" class="org.apache.struts2.views.jasperreports.JasperReportsResult" default="false"/> 
    </result-types> 
```

动作定义：

```
 <action name="vf" class="packaget.InvoiceAction" method="seeInvoice">
         <result name="success" type="jasper">
             <param name="location">/WEB-INF/reports/invoice.jasper</param>
             <param name="dataSource">invoiceSource</param>
             <param name="format">PDF</param>
             <param name="contentDisposition">filename="Invoice.pdf</param>
             <param name="documentName">Invoice.pdf</param>
             <param name="reportParameters">invoiceParameters</param>
         </result>
    </action> 
```

这是我的行动课：

```
public class InvoiceAction extends BaseAction implements Preparable {       
  ...
  public String seeInvoice(){
         List<Invoice> invoice= new ArrayList<Invoice>();
         facturas.add(new Invoice());
         invoiceParameters.put("message","test");
        return SUCCESS;
    }

} 
```

我想生成一个下载弹出窗口，我不想在浏览器中看到报告。我怎么能强迫这个？`contentDisposition`或`documentName`参数无效...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T19:22:25.323

您必须在内容配置中添加“附件”。

```
<param name="contentDisposition">attachment</param> 
```

并删除**filename="Invoice.pdf"**。此参数与 documentName 的作用相同。一起使用它们将在 HTTP 响应中复制此信息。

```
<param name="contentDisposition">filename="Invoice.pdf"</param> 
```

# android - Android：显示警报对话框时，AsynTask 崩溃应用程序

> ID：11538513
> 
> 赞同：1
> 
> 时间：2012-07-18T09:40:54.417
> 
> 标签：android, android-asynctask, android-alertdialog

我有一个 AsynTask，当 doInBackground 方法调用另一个尝试显示警报对话框的类时，它会使整个应用程序崩溃。

以下是我的AsynTask，

```
private class ReserveAppointmentTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected void onPreExecute() {
        showDialog(RESERVING_PROGRESS_DIALOG);
    }

    @Override
    protected Void doInBackground(Void... params) {     
        WebServiceResponse.appointmentReservation(AppointmentConfirmationActivity.this, appointmentObj);
        return null;
    }

    @Override
    protected void onPostExecute(Void response) {
        removeDialog(RESERVING_PROGRESS_DIALOG);
    }

} 
```

WebserviceResponse.appointmentReservation 方法包含以下代码，我知道它进入了下面所述的 if 条件，

```
public static void appointmentReservation(AppointmentConfirmationActivity activity, Appointment appointmentObj){
    SetAppointmentResponse setAppointmentResponse = SetAppointmentResponse.extractJSONResponse(response);

    if(setAppointmentResponse.checkResponse()== RESPONSES.SUCCESSFULL){
        Dialogs.initAppointmentReservedDialog(activity);                            
    }

} 
```

Dialogs.initAppointmentReservedDialog 包含以下内容，

```
public static void initAppointmentReservedDialog(final Activity activity){

    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setMessage(activity.getString(R.string.appointment_reserved_dialog)).setCancelable(false).setPositiveButton(activity.getString(R.string.ok_button_dialog), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            Intent nextScreen = new Intent(activity, MainOptionsActivity.class);
            activity.startActivity(nextScreen);
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

我的日志中出现以下致命异常，

```
07-18 10:59:34.882: E/AndroidRuntime(4885): FATAL EXCEPTION: AsyncTask #2
07-18 10:59:34.882: E/AndroidRuntime(4885): java.lang.RuntimeException: An error occured while executing doInBackground()
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.lang.Thread.run(Thread.java:856)
07-18 10:59:34.882: E/AndroidRuntime(4885): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.os.Handler.<init>(Handler.java:121)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.app.Dialog.<init>(Dialog.java:107)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.app.AlertDialog.<init>(AlertDialog.java:114)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at org.digitalhealthagency.elaj.util.Dialogs.initAppointmentReservedDialog(Dialogs.java:277)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at org.digitalhealthagency.elaj.webservice.WebServiceResponse.appointmentReservation(WebServiceResponse.java:288)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at org.digitalhealthagency.elaj.gui.AppointmentConfirmationActivity$ReserveAppointmentTask.doInBackground(AppointmentConfirmationActivity.java:182)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at org.digitalhealthagency.elaj.gui.AppointmentConfirmationActivity$ReserveAppointmentTask.doInBackground(AppointmentConfirmationActivity.java:1)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-18 10:59:34.882: E/AndroidRuntime(4885):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-18 10:59:34.882: E/AndroidRuntime(4885):     ... 4 more 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:56:03.053

@PareshMayani 说的原因：你不能在里面做的时候更新 UI `doInBackground()`。是的，您可以，但为此您必须包含`runOnUiThread()`或使用`onPostExecute()`

我会建议在此过程后进行此类更改以更新 UI

```
private class ReserveAppointmentTask extends AsyncTask<Void, Void, Integer>{

    @Override
    protected void onPreExecute() {
        showDialog(RESERVING_PROGRESS_DIALOG);
    }
    @Override
    protected Integer doInBackground(Void... params) {        
        return WebServiceResponse.appointmentReservation(AppointmentConfirmationActivity.this, appointmentObj);            
    }
    @Override
    protected void onPostExecute(Integer response) {
        removeDialog(RESERVING_PROGRESS_DIALOG);
        if(response == RESPONSES.SUCCESSFULL){

            Dialogs.initAppointmentReservedDialog(activity);                            
        }
    }
} 
```

现在`appointmentReservation()`像这样改变你的方法

```
public static int appointmentReservation(AppointmentConfirmationActivity activity, Appointment appointmentObj){
        SetAppointmentResponse setAppointmentResponse = SetAppointmentResponse.extractJSONResponse(response);
        return setAppointmentResponse.checkResponse();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:44:44.227

将修改UI的部分移到`onPostExecute`方法中..

```
@Override
protected SetAppointmentResponse doInBackground(Void... params) {     
    return WebServiceResponse.appointmentReservation(AppointmentConfirmationActivity.this, appointmentObj);
}

@Override
protected void onPostExecute(SetAppointmentResponse response) {
    if(response.checkResponse()== RESPONSES.SUCCESSFULL){

        Dialogs.initAppointmentReservedDialog(activity);                            
    }
    removeDialog(RESERVING_PROGRESS_DIALOG);
} 
```

并且`appointmentReservation`需要修改为：

```
public static SetAppointmentResponse appointmentReservation(AppointmentConfirmationActivity activity, Appointment appointmentObj){

    return SetAppointmentResponse.extractJSONResponse(response);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:05:05.127

你可以使用 Handler 对象来做你想做的事。

在你的 WebServiceResponse 类中添加这个静态方法（它初始化一个新的处理程序）

```
public static Handler initHandler() {
    return new Handler() {
        public void handleMessage(Message msg) {
            if (msg.what == 0) {
                Dialogs.initAppointmentReservedDialog(activity);
            }
        }

    };
} 
```

在 onPreExecute 方法的 ReserveAppointmentTask 类中调用此方法。保留对此 Handler 的引用并将其传递给 AppointmentReservation 方法。然后像这样修改这个方法的代码：

```
public static void appointmentReservation(AppointmentConfirmationActivity activity, Appointment appointmentObj, Handler handler){

    SetAppointmentResponse setAppointmentResponse = SetAppointmentResponse.extractJSONResponse(response);

    if(setAppointmentResponse.checkResponse()== RESPONSES.SUCCESSFULL){

        handler.sendEmptyMessage(0);                            
    }

} 
```

要更好地了解 Handler，请查看这个很棒的教程：[http](http://www.vogella.com/articles/AndroidPerformance/article.html) ://www.vogella.com/articles/AndroidPerformance/article.html 。

我希望这能帮到您。

# php - 如何将 RESTful webservice 与 php 和 ajax 集成

> ID：11538514
> 
> 赞同：0
> 
> 时间：2012-07-18T09:40:54.997
> 
> 标签：php, ajax, rest

我有一个像这样的个人资料创建页面。

 `````
<html>
    <head>
        <script>
            function validateMe(){

               var xmlhttp;
               var userEmail = document.getElementById("email").value;
               var userPwd = document.getElementById("pwd").value;
               //alert(userEmail);
                if (window.XMLHttpRequest)
                  {// code for IE7+, Firefox, Chrome, Opera, Safari
                  xmlhttp=new XMLHttpRequest();
                  }
                else
                  {// code for IE6, IE5
                  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                  }
                xmlhttp.onreadystatechange=function()
                  {
                  if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        //alert(xmlhttp.responseText);
                    }
                    document.getElementById("responds").innerHTML=xmlhttp.responseText;
                    }

                xmlhttp.open("POST","api.php?email="+userEmail+"&pwd="+userPwd,true);
                xmlhttp.send();  
            }
        </script>
    </head>
    <body>
        <form name="login" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <table>
                <tr><td colspan="2">Login</td></tr>
                <tr><td>Username:</td><td><input type="text" name="email" id="email"/></td></tr>
                <tr><td>Password:</td><td><input type="text" name="pwd" id="pwd"/></td></tr>
                <tr><td><input type="button" value="Submit" name="submit" onclick="validateMe();"/><td></td></tr>
            </table>
            <div id="responds"></div>
        </form>
    </body>
</html> 
````  `我需要使用带有 php 和 ajax 的 RESTful Web 服务将这些数据插入到我的 MySql 数据库中。

我该如何实现这一点。谁能帮我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:17:54.667

First, I suggest you to use the jQuery Javascript framework. With it, it made dead simple to make AJAX requests and getting the input values (without worrying of the web browser, etc).

Second, I don't see any RESTful web service here. It's a simple POST form.

So please, details your question :)``

# c# - MVC4 包安装错误

> ID：11538517
> 
> 赞同：2
> 
> 时间：2012-07-18T09:41:15.660
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, installation, asp.net-mvc-4

我将 MVC4 与 MVC3 并排安装。

当我在 VS 2010 中创建新的 MVC4 Web 应用程序项目时，我收到此错误：

![mvc4 错误](../Images/aee47ce8253229d9db662f256e9fb4e4.png)

谷歌上没有这方面的内容。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:58:04.397

感谢[AndyM](https://stackoverflow.com/users/208908/andym)的帮助。

这是我解决问题的方法：

**1.**在Windows添加/删除程序中卸载NuGet

**2.**打开以下文件夹`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft Corporation\NuGet Package Manager`

**3.**删除那里的所有文件夹和文件

**4.**在 Windows 添加/删除程序中卸载 MVC 4，然后重新安装 MVC 4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:05:41.373

我能够从 Visual Studio 2010 的工具菜单中使用扩展管理器，卸载然后安装 nuget 并且工作正常。

# firefox - 如何在最新的 XULRunner sdk 中使用 Thebes 类？

> ID：11538519
> 
> 赞同：0
> 
> 时间：2012-07-18T09:41:20.253
> 
> 标签：firefox, xul, xpcom, xulrunner

我有从 7 到 11 个版本的 XULRunner 运行良好的 C++ 代码：

```
 nsRefPtr<gfxWindowsSurface> targetSurface = new gfxWindowsSurface(hDC, gfxWindowsSurface::FLAG_FOR_PRINTING); 
    nsRefPtr<gfxContext> ctx = new gfxContext(targetSurface); 
```

但是当我尝试用 XULRunner 12 及更高版本编译它时，它会导致链接错误：

```
error LNK2019: unresolved external symbol "public: __thiscall gfxContext::gfxContext(class gfxASurface *)" (??0gfxContext@@QAE@PAVgfxASurface@@@Z) 
error LNK2019: unresolved external symbol "public: __thiscall gfxWindowsSurface::gfxWindowsSurface(struct HDC__ *,unsigned int)" (??0gfxWindowsSurface@@QAE@PAUHDC__@@I@Z) 
```

我为 xul.lib 制作了垃圾箱，发现现在没有任何用于 THEBES API 的导出。当 SDK 将版本从 11 更改为 12 时，它们已被删除。在最新的 xulrunner sdk 中，是否可以在二进制 XPCOM 中使用 gfxWindowsSurface 和 gfxContext？

谢谢，

哔叽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:01:52.883

相关更改是[错误 683891](https://bugzilla.mozilla.org/show_bug.cgi?id=683891)，另请参阅[错误 718985](https://bugzilla.mozilla.org/show_bug.cgi?id=718985)以进行扩展讨论。允许第三方直接访问图形代码似乎不再被认为是可取的。所以你的问题的答案是：不，你不能再用股票 XULRunner 做到这一点。因此，您可以寻找替代方法来实现您的目标（例如，更高级别的绘图表面，如`<canvas>`bug 中建议的那样），或者您可以创建自己的 XULRunner 构建并恢复此特定补丁。

# java - 如何在聊天应用程序中匹配精确单词以进行匹配

> ID：11538522
> 
> 赞同：2
> 
> 时间：2012-07-18T09:41:28.410
> 
> 标签：java, android

嘿，我在为那个 Smily 代码找到确切的 Imotion(Facebook) 时遇到了一些问题。我输入了我的 Snippat 代码：

```
private static final HashMap<String, Integer> smilyRegexMap = new HashMap<String, Integer>();

static{
        smilyRegexMap.put( ":-)" , R.drawable.fb_smile);
        smilyRegexMap.put( ":)",R.drawable.fb_smile);
        smilyRegexMap.put( ":-]" , R.drawable.fb_smile);

        smilyRegexMap.put( ":-(", R.drawable.fb_frown);
        smilyRegexMap.put( ":(" , R.drawable.fb_frown);
        smilyRegexMap.put( ":-[" , R.drawable.fb_frown);

        smilyRegexMap.put( ":-P" , R.drawable.fb_tounge);
        smilyRegexMap.put( ":p", R.drawable.fb_tounge);

        smilyRegexMap.put( ":-D" , R.drawable.fb_grin);
        smilyRegexMap.put( ":D" , R.drawable.fb_grin);

        smilyRegexMap.put( ":-O" , R.drawable.fb_gasp);
        smilyRegexMap.put( ":*" , R.drawable.fb_gasp);

        smilyRegexMap.put( ";-)" , R.drawable.fb_wink);
        smilyRegexMap.put( ";)" , R.drawable.fb_wink);
        smilyRegexMap.put( ":putnam:" , R.drawable.fb_putnam);   
    } 
```

//================================================= =========

```
public static CharSequence addSmileySpans(Context ch, CharSequence your_recieved_message)
{
    //smilyRegexMap = new HashMap<Integer, String>();

    System.out.println("==In Spannable Function..........");
    SpannableStringBuilder builder = new SpannableStringBuilder(your_recieved_message);

    System.out.println("==================Size of Smily  : "+ smilyRegexMap.size());
    @SuppressWarnings("rawtypes")
    Iterator it = smilyRegexMap.entrySet().iterator();
    while (it.hasNext()) {
        @SuppressWarnings("rawtypes")
        Map.Entry pairs = (Map.Entry) it.next();

        Pattern mPattern = Pattern.compile((String) pairs.getKey(),Pattern.CASE_INSENSITIVE);
        Matcher matcher = mPattern.matcher(your_recieved_message);

        while (matcher.find()) {
            Bitmap smiley = BitmapFactory.decodeResource(ch.getResources(), ((Integer) pairs.getValue()));
            builder.setSpan(new ImageSpan(smiley), matcher.start(), matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        }
}   
    return builder;
} 
```

我有调用这个函数：

```
addSmileySpans(this,"Hi i m Happy :-)  ;-)  :p   :putnam:  "); 
```

===>>我的问题是当我输入时：putnam：然后得到类似的结果

嗨我快乐![在此处输入图像描述](../Images/fcd646df409be2313aac84423409535f.png) ![在此处输入图像描述](../Images/beb872072f40ed3b20c295575abdc602.png) ![在此处输入图像描述](../Images/d851aad74eee24cadbe5797bad16774f.png) ![在此处输入图像描述](../Images/7b8b32496ff3b53954b1ab68363f044e.png)![在此处输入图像描述](../Images/f97ad4fe1bcf5835d86ccbac855829a2.png)

//=============================================

Ookeyyy ...现在我使用此代码:::

```
Bitmap smiley = BitmapFactory.decodeResource(ch.getResources(), ((Integer) pairs.getValue()));
Object[] spans = builder.getSpans(matcher.start(), matcher.end(), ImageSpan.class);
if (spans == null || spans.length == 0) {
   builder.setSpan(new ImageSpan(smiley), matcher.start(), matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
} 
```

但它给出了一些错误::

当 Enter :putnam: 其结果是 ![在此处输入图像描述](../Images/f83bab40429c7faba4d004f79a8505d4.png)utnam:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:56:21.223

1.  您应该按照从“最大微笑代码”到“最小微笑代码”的顺序对微笑进行排序。
2.  当您找到下一个模式时，只需检查这段文本是否已经被 span 覆盖：

```
Object[] spans = builder.getSpans(matcher.start(), matcher.end(), Object.class);
if (spans == null || spans.length == 0) {
    //add new image span here
} 
```

# php - 将所有请求重定向到控制器 php

> ID：11538523
> 
> 赞同：0
> 
> 时间：2012-07-18T09:41:35.190
> 
> 标签：php, .htaccess, redirect

我正在考虑我的项目中的路由引擎，并且我尝试了几个星期通过单个 htaccess 重定向所有查询，它在根目录中，但是当我尝试打开已经存在的目录时，我必须添加每个被拒绝的文件夹访问规则。所以问题是：

*我可以通过通常的 htaccess 捕获对所有文件夹的所有请求，并仅通过控制器文件授予访问权限吗？*

> Ps 对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:53:38.470

要将所有请求重定向到单个文件，请使用：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

如果请求与现有目录匹配，则第一行停止请求路由到 index.php，第二行同样是文件名与请求匹配

如果您只想路由所有请求，无论是否存在与请求匹配的文件或目录，只需删除前 2 行

# c# - 为什么不工作淘汰赛foreach？

> ID：11538524
> 
> 赞同：0
> 
> 时间：2012-07-18T09:41:36.790
> 
> 标签：c#, asp.net-mvc-3, knockout.js

我没有，淘汰赛 foreach 不起作用。

看法：

```
@using PerpetuumSoft.Knockout
@using WebIdea.Domain.Entities
@model WebIdea.Web.Models.KnockoutProductList
@{
    ViewBag.Title = "Index";
    var ko = Html.CreateKnockoutContext();
}

<script src="/Scripts/knockout-2.1.0.js" type="text/javascript"></script>
<script src="/Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
<script src="/Scripts/perpetuum.knockout.js" type="text/javascript"></script>

@ko.Apply(Model)

@using (var items = ko.Foreach(m => m.Products))
{
<ul>
    <li>@items.Html.TextBox(x=>x.Url)</li>
</ul>
} 
```

模型：

```
public class KnockoutProductList
{
    public List<Product> Products { get; set; }
} 
```

html:

```
<script src="/Scripts/knockout-2.1.0.js" type="text/javascript"></script>
<script src="/Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
<script src="/Scripts/perpetuum.knockout.js" type="text/javascript"></script>

<script type="text/javascript"> 

var viewModelJs = {"Products":[{"Id":"6d222412-87f1-402e-b705-27a89c1572dd","Name":"asdasd","Price":123123,"Url":"http://www.ya.ru/hh33.jpg"},{"Id":"d578f8f3-a6f1-415c-9fd9-7848709cf8e0","Name":"twertwert","Price":12.3,"Url":"http://jewelry.ecommanager.net/uploads/images/products/42eb3d1c-4e7f-41eb-8238-becaaaff100a-thumb.jpg"}]};

var viewModel = ko.mapping.fromJS(viewModelJs); 

ko.applyBindings(viewModel);
</script>

<!-- ko foreach: Products -->
        <ul>
        <li><input data-bind="value : Url" /></li>
       </ul>
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:22:51.137

尝试在您的视图中执行此操作：

```
<ul>
@using (var items = ko.Foreach(m => m.Products))
{
    <li>@items.Html.TextBox(x=>x.Url)</li>
}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:02:28.907

您应该将值与“文本”绑定：

```
<!-- ko foreach: Products -->
        <ul>
        <li><input data-bind="text: Url()" /></li>
       </ul>
<!-- /ko --> 
```

问候。

# java - Android：TextView 的标题视图？

> ID：11538525
> 
> 赞同：1
> 
> 时间：2012-07-18T09:41:38.803
> 
> 标签：java, android, header, textview

您好，我和这篇文章有同样的问题：[UITextView 的标题视图？](https://stackoverflow.com/questions/1327881/header-view-for-a-uitextview)但是对于android，有人知道实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:31:50.550

我认为你必须实现一个新的自定义`View`扩展`LinearLayout`例如。您可以添加属性，例如要添加的文本和 customView。你试过了吗？

这是创建自定义视图的[文档](http://developer.android.com/guide/topics/ui/custom-components.html)，google 上有很多 tuts。

# sql-server-2008 - 将空列表传递给标量函数上的用户定义表类型参数

> ID：11538527
> 
> 赞同：2
> 
> 时间：2012-07-18T09:41:44.590
> 
> 标签：sql-server-2008, user-defined-functions, user-defined-types

所以我有这个用户定义的表类型参数，它在我的标量函数中使用并且可能为空。我已经阅读了有关将空列表传递给存储过程的表值参数的主题： [Binding empty list or null value to table valued parameter on a stored procedure (.net)](https://stackoverflow.com/questions/3630632/binding-empty-list-or-null-value-to-table-valued-parameter-on-a-stored-procedure)
基本上，正如其中一位回复者所说：

> “诀窍是：**根本不要传入参数**。表值参数的默认值为空表”

但是，当我在标量函数上尝试此操作时，出现错误：

> 为过程或函数提供的参数数量不足

那么如何将空值传递给标量函数的表值参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:04:17.610

函数的参数不是可选的，因此您需要将兼容的 TVP 传递给函数。我不确定我是否理解采用 TVP 类型但不需要的标量值函数的意义——这个函数有什么作用，没有 TVP 怎么办？你确定这不是TVF吗？

无论如何，这里是如何将一个空的 TVP 传递给一个标量函数：

```
DECLARE @x dbo.TVP_type_name;
SELECT dbo.function_name(@x); 
```

# r - 更改 data.frame 的 stringsAsFactors 设置

> ID：11538532
> 
> 赞同：31
> 
> 时间：2012-07-18T09:42:00.483
> 
> 标签：r, dataframe, default, options, r-factor

我有一个函数，我在其中定义了一个`data.frame`我使用循环填充数据的函数。在某些时候，我收到警告消息：

> 警告消息： 1: In `[<-.factor`( `*tmp*`, iseq, value = "CHANGE") : 无效因子水平，生成 NA

因此，当我定义我的 data.frame 时，我想将选项设置`stringsAsFactors`为`FALSE`但我不明白该怎么做。

我努力了：

```
DataFrame = data.frame(stringsAsFactors=FALSE) 
```

并且：

```
options(stringsAsFactors=FALSE) 
```

设置 stringsAsFactors 选项的正确方法是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-18T09:59:19.533

这取决于您如何填充数据框，而您没有提供任何代码。当你构建一个新的数据框时，你可以这样做：

```
x <- data.frame(aName = aVector, bName = bVector, stringsAsFactors = FALSE) 
```

在这种情况下，*如果*eg`aVector`是字符向量，那么数据框列`x$aName`也将是字符向量，而不是因子向量。将其与现有数据框（使用`rbind`或`cbind`类似）结合应该保留该模式。

当你执行

```
options(stringsAsFactors = FALSE) 
```

您更改全局默认设置。因此，您在执行该行后创建的每个数据框都不会自动转换为因子，除非明确告知这样做。如果您只需要避免在单个位置进行转换，那么我宁愿不更改默认值。但是，如果这会影响代码中的许多地方，那么更改默认值似乎是个好主意。

还有一件事：如果您的向量*已经*包含因子，那么以上都不会将其更改回字符向量。为此，您应该使用`as.character`或类似方法将其显式转换回来。

# ios - 如何在不同位置发布几乎相同版本的 iOS 应用程序

> ID：11538533
> 
> 赞同：1
> 
> 时间：2012-07-18T09:42:00.063
> 
> 标签：ios, xcode, cocoa-touch

**我的目标和研究：**我已经发布了一个可在英国下载的 iOS 应用程序，但我希望为美国发布一个（非常不同的）应用程序版本目前我假设我需要为新版本的应用程序 ...

1.  将“捆绑标识符”值更改为不同的值。

2.  确保在 App Store 中只有美国可以下载该应用程序。

**额外细节：**我的应用程序包含一个网站的 URL。美国用户总是希望它访问美国网站。英国用户总是希望它访问英国网站。这需要确保，否则应用程序将无法运行。

**我的问题：**还有什么我还没有发现我需要做的事情，或者我还没有考虑任何其他问题吗？

*注意*：我也在为我的应用程序的 android 版本讨论这个问题。该讨论提出了仅维护一个应用程序并将其本地化的可能性。*但是*，目前我怀疑这是否足以满足我的需求。是维护 1 个应用程序还是 2 个应用程序的决定可能会同时影响 android 和 iOS。[单击此处进行讨论](https://stackoverflow.com/questions/11524731/how-to-publish-an-almost-identical-version-of-my-android-app-in-a-different-loca)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:03:39.333

无需创建不同的应用程序即可在不同地区销售。正如你所说。您可以创建一个应用程序并使用本地化来根据本地化动态更改或替换应用程序中的内容。这在 iOS 上也是可能的。

本地化非常可靠。它基本上只是询问设备设置的默认语言，并相应地进行更改。

这是 Ray Wenderlich 网站上关于 iOS 本地化的精彩教程。

[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

但是，如果您想制作单独的应用程序，这也是可以接受的。您是正确的，您需要创建单独的捆绑包 ID。然后，您需要做的就是在 iTunes Connect 中的“权利和定价”下手动指定您希望在哪些国家/地区销售该应用程序。

至于您的主要问题是否还有其他要考虑的问题，实际上没有。此过程非常简单，您无需担心遇到任何非常糟糕的路障。

**编辑：**在这种情况下不同的本地化选项。

1.  使用内置的 iOS 本地化
2.  在 iTunes Connect 中上传不同的二进制文件并进行本地化
3.  使用地理位置服务
4.  提示用户
5.  服务器端位置检测和重定向

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:04:28.353

最佳做法是使用您在 Android 版本中建议的本地化。我知道用户可以轻松更改他/她的偏好，但您也可以通过位置和 IP 位置检查来加强您的解决方案。

请记住，同时发布两个版本并不能保证。世界各地的许多人使用美国 iTunes 帐户。所以这是一个很好的机会看到来自英国的人使用你的美国版应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:25:36.390

我最终的决定是首先使用 CTTelephonyNetworkInfo 来获取网络国家...

```
CTTelephonyNetworkInfo *networkInfo = [[[CTTelephonyNetworkInfo alloc] init] autorelease];
CTCarrier *carrier = [networkInfo subscriberCellularProvider];
NSString *isoCountryCode = [carrier isoCountryCode]; 
```

如果失败，请获取语言环境国家...

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCode = [locale objectForKey: NSLocaleCountryCode]; 
```

然后我保存结果，因此只需要完成一次，但可以在“设置”屏幕中更改它。

# meteor - 为什么我的 Meteor 模板在删除自动发布和手动发布/订阅集合时停止呈现？

> ID：11538535
> 
> 赞同：1
> 
> 时间：2012-07-18T09:42:04.323
> 
> 标签：meteor

由于我关闭了自动发布，因为它在现实世界中不切实际，我的模板停止呈现集合（#each 似乎没有循环）。我已经为集合设置了手动发布/订阅，当我将本地集合记录到控制台时，我可以看到其中包含项目，但模板无法呈现项目。

为了保持模板的自动更新特性，手动子/发布集合时我需要做些什么吗？

这是我创建的稀释测试用例：

```
// client

Col = new Meteor.Collection('testcol');

// I have tried wrapping this in autosubscribe as well: 
Meteor.subscribe('testcol', function() {
    return Col.find();
});

Template.hello.items = function() {
    var col = Col.find();
    if (col) {
        console.log("Test items" , col);
        return col.fetch().items;
    }
}

// server

if (Meteor.is_server) {
    Col = new Meteor.Collection('testcol');

    Meteor.publish('testcol', function() {
        return Col.find();
    })
}

// bootstrap: 

Meteor.startup(function () {  
  if (Col.find().count() < 5) {
    for (var i=0; i<5; i++) {
        Col.insert({
            title: 'Test ' + i,
            items: [
                {title: 'item 1', value:true},
                {title: 'item 2', value:false},
                {title: 'item 3', value:true}
            ]
        });
    }
    }
})

// Template

<head>
  <title>test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Where did the data gone to?</h1>
  Items from the test collection: 
  <UL>
  {{#each items}}
    <LI> ITEM: {{title}} 
  {{/each}}
</UL>
</template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:29:12.447

#each 的 Meteor 版本需要 a`Cursor`或 an`Array`作为您的代码点`items`，因为这是您的函数返回的每个文档的子属性，`undefined`因此您需要遍历所有 Docs 然后是 items 或 findOne({_id:???}) 循环它的物品；

因此，以下工作（支持版本 1）用于返回集合中的所有文档：

1.  `return col.find()`
2.  `return col.find().fetch()`

此外，您应该只在通用脚本中声明一次集合，然后在下面的相应工作代码中发布/订阅，如果您有问题，请回复。

.html

```
 1 <head>
  2     <title>test</title>
  3 </head>
  4 
  5 <body>
  6     {{> hello}}
  7 </body>
  8 
  9 <template name="hello">
 10 <h1>Where did the data gone to?</h1> 11 Items from the test collection: 
 12 <ul id="docs">
 13     {{#each docs}}
 14     <li>Doc: {{title}}
 15         <ul class="items">
 16             {{#each items}}
 17             <li>Item: {{title}}</li>
 18             {{/each}}
 19         </ul>
 20     </li>
 21     {{/each}}
 22 </ul>   
 23 </template> 
```

.js

```
 1 // client
  2 //
  3 Col = new Meteor.Collection('testcol');
  4 //
  5 // // I have tried wrapping this in autosubscribe as well: 
  6 if(Meteor.is_client){
  7     Meteor.subscribe('testcol');                                                                                                                                                                        
  8 
  9     Template.hello.docs  = function() {
 10          return Col.find();
 11     }
 12 } 
 13 
 14     
 15 // server
 16          
 17 if (Meteor.is_server) {
 18             
 19     Meteor.publish('testcol', function() {
 20         return Col.find();
 21     });
 22 }
 23 
 24 
 25 // bootstrap: 
 26 
 27 Meteor.startup(function () {  
 28     if (Col.find().count() < 5) {
 29         for (var i=0; i<5; i++) {
 30             Col.insert({
 31                 title: 'Test ' + i,
 32                 items: [
 33             {title: 'item 1', value:true},
 34                 {title: 'item 2', value:false},
 35                 {title: 'item 3', value:true}
 36             ]
 37             });
 38         }
 39     }
 40 }); 
```

# android - 如何在android中的tablelayout中修复单元格的大小

> ID：11538541
> 
> 赞同：0
> 
> 时间：2012-07-18T09:42:22.717
> 
> 标签：android, tablelayout, imagebutton

你如何修复（防止它们移动）android中表格布局中单元格的大小？

我在每个单元格内都有一个带有图像按钮的表格布局，问题是，当我更改（或删除）图像时，按钮的大小会发生变化。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:45:49.070

您可以使用属性 setMinimum Width/height 和 Maximum width/height 来避免这种情况

```
<ImageButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minWidth="100dp"
    android:maxWidth="200dp"
    android:minHeight="100dp"
    android:maxHeight="200dp"
    android:src="@drawable/ic_launcher" /> 
```

这肯定会帮助您完成工作。

谢谢

这可以帮助您以编程方式调整 ImageButton，同时检测不同的屏幕尺寸（小、中、大、超大）

```
//Determine screen size
    if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {     
        Toast.makeText(this, "Large screen",Toast.LENGTH_LONG).show();

    }
    else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) {     
        Toast.makeText(this, "Normal sized screen" , Toast.LENGTH_LONG).show();

    } 
    else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) {     
        Toast.makeText(this, "Small sized screen" , Toast.LENGTH_LONG).show();
    }
    else {
        Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();
    }

    //Determine density
    DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        int density = metrics.densityDpi;

        if (density==DisplayMetrics.DENSITY_HIGH) {
            Toast.makeText(this, "DENSITY_HIGH... Density is " + String.valueOf(density),  Toast.LENGTH_LONG).show();
        }
        else if (density==DisplayMetrics.DENSITY_MEDIUM) {
            Toast.makeText(this, "DENSITY_MEDIUM... Density is " + String.valueOf(density),  Toast.LENGTH_LONG).show();
        }
        else if (density==DisplayMetrics.DENSITY_LOW) {
            Toast.makeText(this, "DENSITY_LOW... Density is " + String.valueOf(density),  Toast.LENGTH_LONG).show();
        }
        else {
            Toast.makeText(this, "Density is neither HIGH, MEDIUM OR LOW.  Density is " + String.valueOf(density),  Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:45:33.677

将每个 View 的 layout_width 设置为 0。根据需要在每个 View 中添加 layout_weight

参考： http: [//pournaras.zilsen.com/2010/11/01/fixed-column-width-in-tablelayout/](http://pournaras.zilsen.com/2010/11/01/fixed-column-width-in-tablelayout/)

# javascript - 保存每个 POST 数据的 Chrome 扩展程序

> ID：11538545
> 
> 赞同：3
> 
> 时间：2012-07-18T09:43:02.070
> 
> 标签：javascript, google-chrome, google-chrome-extension

我需要做一个扩展来保存每个帖子数据。我搜索并发现我需要一个 background.js 文件来完成它......

我想知道的是如何在发送数据时“抓取”数据？

我在任何地方都找不到它...

谢谢！

我知道我应该使用 chrome.webRequest.onSendHeaders 但我不知道如何“抓取”帖子中的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:07:09.243

无法使用 chrome.WebRequest.* 获取发布数据。有关新闻，请参阅[http://code.google.com/p/chromium/issues/detail?id=91191](http://code.google.com/p/chromium/issues/detail?id=91191)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:35:30.443

这现在可以在 Chrome 的开发分支上使用。您可以通过检查 chrome.webRequest 对象的 requestBody 来访问发布数据。Google 需要参与者通过下面的链接提交他们的工作扩展，然后才能将后期支持推送到测试版并最终发布稳定版。

更多详细信息可在上述 URL 中找到： [http ://code.google.com/p/chromium/issues/detail?id=91191](http://code.google.com/p/chromium/issues/detail?id=91191)

和谷歌开发者文档：http: [//developer.chrome.com/trunk/extensions/webRequest.html](http://developer.chrome.com/trunk/extensions/webRequest.html)

# python - 通过 python win32com 检索 Outlook 联系人

> ID：11538550
> 
> 赞同：3
> 
> 时间：2012-07-18T09:43:19.863
> 
> 标签：python, windows, outlook, win32com

我正在尝试让联系人停止`Outlook`使用`Python`. 代码是：

```
import win32com.client
import pywintypes

o = win32com.client.Dispatch("Outlook.Application")
ns = o.GetNamespace("MAPI")
profile = ns.Folders.Item("Outlook")
contacts = profile.Folders.Item("Contacts") 
```

但它给出的错误是这样的：

```
Traceback (most recent call last):
  File "my_pro.py", line 7, in <module>
    profile = ns.Folders.Item("Outlook")
  File "C:\DOCUME~1\Manoj\LOCALS~1\Temp\gen_py\2.7\00062FFF-0000-0000-C000-00000
0000046x0x9x3\_Folders.py", line 70, in Item
    ret = self._oleobj_.InvokeTypes(81, LCID, 1, (9, 0), ((12, 1),),Index
pywintypes.com_error: (-2147352567, 'Exception occurred.', (4096, u'Microsoft Of
fice Outlook', u'The operation failed. An object could not be found.', None, 0,
-2147221233), None) 
```

我不明白为什么会抛出错误，因为我确实有一个名为`Outlook`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:25:18.533

您可能没有名为“Outlook”的配置文件（除非您创建了一个）

通常，“个人资料名称”是您的“收件箱”所在的顶级文件夹的名称。如“个人文件夹”中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-19T21:58:45.923

*   此选项适用于从`Outlook.pst`文件中提取联系人，而不是从 Exchange 服务器中提取。
    *   请参阅此[答案](https://stackoverflow.com/a/65800926/7758804)以从 Exchange 服务器上的全局地址列表中提取联系人。
*   这需要在 Windows 上安装 Outlook，但不运行。
    *   使用 python 3.8、Windows 10、Outlook Office 365 测试
*   创建`contacts_items`对象后，使用适当`Property`的方法提取所需的信息。
    *   可[`Properties`](https://docs.microsoft.com/en-us/office/vba/api/outlook.contactitem#properties)用于[`ContactItem object`](https://docs.microsoft.com/en-us/office/vba/api/outlook.contactitem)
*   我注意到它`outlook.Application.Quit()`没有关闭 Outlook，所以它可能需要在任务管理器中关闭。

```
import win32com.client

# create outlook object
outlook = win32com.client.Dispatch("Outlook.Application")
ns = outlook.GetNamespace("MAPI")

# create an object for the contacts in the default folder
contacts_items = ns.GetDefaultFolder(10).Items

# print name and email address
for c in contacts_items:
    print(f'{c.FullName}: {c.Email1Address}')

# create a dict of contacts
contacts = {c.FullName: c.Email1Address for c in contacts_items}

# close the application
outlook.Application.Quit() 
```

* * *

*   以下代码来自[使用 win32com 导入 Outlook 联系人](http://code.activestate.com/recipes/173216-import-outlook-contacts-using-win32com/)，但已针对 python 3.8 进行了更新

## `MSOutlook Class`

```
import win32com.client

DEBUG = 0

class MSOutlook:
    def __init__(self):
        self.outlookFound = 0
        try:
            self.oOutlookApp = \
                win32com.client.gencache.EnsureDispatch("Outlook.Application")
            self.outlookFound = 1
        except:
            print("MSOutlook: unable to load Outlook")

        self.records = []

    def loadContacts(self, keys=None):
        if not self.outlookFound:
            return

        # this should use more try/except blocks or nested blocks
        onMAPI = self.oOutlookApp.GetNamespace("MAPI")
        ofContacts = \
            onMAPI.GetDefaultFolder(win32com.client.constants.olFolderContacts)

        if DEBUG:
            print(f"number of contacts: {len(ofContacts.Items)}")

        for oc in range(len(ofContacts.Items)):
            contact = ofContacts.Items.Item(oc + 1)
            if contact.Class == win32com.client.constants.olContact:
                if keys is None:
                    # if we were't give a set of keys to use
                    # then build up a list of keys that we will be
                    # able to process
                    # I didn't include fields of type time, though
                    # those could probably be interpreted
                    keys = []
                    for key in contact._prop_map_get_:
                        if isinstance(getattr(contact, key), (int, str, unicode)):
                            keys.append(key)
                    if DEBUG:
                        keys.sort()
                        print("Fields\n======================================")
                        for key in keys:
                            print(key)
                record = {}
                for key in keys:
                    record[key] = getattr(contact, key)
                if DEBUG:
                    print(oc, record['FullName'])
                self.records.append(record) 
```

## 类用法

```
if DEBUG:
    print("attempting to load Outlook")
oOutlook = MSOutlook()
# delayed check for Outlook on win32 box
if not oOutlook.outlookFound:
    print("Outlook not found")
    sys.exit(1)

fields = ['FullName',
            'CompanyName', 
            'MailingAddressStreet',
            'MailingAddressCity', 
            'MailingAddressState', 
            'MailingAddressPostalCode',
            'HomeTelephoneNumber', 
            'BusinessTelephoneNumber', 
            'MobileTelephoneNumber',
            'Email1Address',
            'Body'
            ]

if DEBUG:
#     import time
    print("loading records...")
    startTime = time.time()
# you can either get all of the data fields
# or just a specific set of fields which is much faster
#oOutlook.loadContacts()
oOutlook.loadContacts(fields)
if DEBUG:
    print(f"loading took {time.time() - startTime} seconds")

print(f"Number of contacts: {len(oOutlook.records)}")

for i in range(len(oOutlook.records)):
    print(f"Contact: {oOutlook.records[i]['FullName']}")
    print(f"Body:\n{oOutlook.records[i]['Body']}") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T23:16:16.867

*   此选项适用于在 Outlook 连接到 Exchange 服务器时提取联系人。
*   我设法找到/修改了一个可行的解决方案。它将 Outlook 中所有联系人的电子邮件地址和全名保存为一个列表：

```
import win32com.client

# Outlook stuff
outApp = win32com.client.gencache.EnsureDispatch("Outlook.Application")
outGAL = outApp.Session.GetGlobalAddressList()
entries = outGAL.AddressEntries

# Empty list to store contact info
data_set = list()

# Iterates through your contact book and extracts/appends them to a list
for entry in entries:
    if entry.Type == "EX":
        user = entry.GetExchangeUser()
        if user is not None:
            if len(user.FirstName) > 0 and len(user.LastName) > 0:
                row = list()
                row.append(user.FirstName)
                row.append(user.LastName)
                row.append(user.PrimarySmtpAddress)
                """print("First Name: " + user.FirstName)
                print("Last Name: " + user.LastName)
                print("Email: " + user.PrimarySmtpAddress)"""
                data_set.append(row)

# Prints list
print(data_set) 
```

原始代码： [https ://www.excelcise.org/getting-information-from-outlook-global-address-list-gal-with-python/](https://www.excelcise.org/getting-information-from-outlook-global-address-list-gal-with-python/)

# php - PHP Mysql网站性能测量

> ID：11538553
> 
> 赞同：1
> 
> 时间：2012-07-18T09:43:44.737
> 
> 标签：php, mysql, performance, web

嗨，我想测量我的 PHP MySQL 网站性能，即可以建立的连接数。它可以承受多少负载。请建议我为上述工具提供一个工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:47:41.363

My sugestion: [JMeter](http://jmeter.apache.org/)

> The Apache JMeter™ desktop application is open source software, a 100% pure Java application designed to load test functional behavior and measure performance. It was originally designed for testing Web Applications but has since expanded to other test functions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:50:58.277

对于测试可扩展性/性能，我会推荐[tsung](http://tsung.erlang-projects.org/)。

> Tsung 的目的是模拟用户，以测试基于 IP 的客户端/服务器应用程序的可扩展性和性能。您可以使用它对服务器进行负载和压力测试。许多协议已经实现和测试，并且可以很容易地扩展。

# wcf - 通过 Web 服务使用 WCF 方法仅在 IIS 中而不是在 IDE 中出现错误

> ID：11538559
> 
> 赞同：0
> 
> 时间：2012-07-18T09:44:00.607
> 
> 标签：wcf, web-services

我在我的 Web 服务中添加了[http://ws.hipcricket.com/api/EndUser.svc](http://ws.hipcricket.com/api/EndUser.svc) 作为服务参考。我可以使用 IDE 中的方法，但是在 IIS 中托管相同的方法时出现以下错误：

错误一：

> 无法连接到（请参考上面的网址）。TCP错误码10060：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应69.20.116.221:80。

错误2：

> 没有可以接受消息的端点侦听（请参阅上面的 url）。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅内部异常（如果存在）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:47:10.973

Maybe you have a firewall blocking communication from your webserver? When developing on your local machine communications through the proxy may most likely be using your credentials, while the user that the application pool that your application is running under on your IIS server most probably does not have the correct rights.

# perl - 如何舍入尾数以 5 结尾的浮点数？

> ID：11538560
> 
> 赞同：2
> 
> 时间：2012-07-18T09:44:06.063
> 
> 标签：perl, rounding

我想四舍五入一个浮点数。例如，`sprintf '%.4f', 0.12345`退货`0.1235`和`sprintf '%.4f', 0.12325`退货`0.1232`。对于第二个示例，我希望它打印出来`0.1233`，而不是`0.1232`.

`sprintf`在 Perl 中还不够好。[`Math::BigFloat`](http://p3rl.org/Math%3a%3aBigFloat)可以，但是有点过头了。

有谁知道是否有其他有效的方法来四舍五入，或者 Perl 中是否有其他模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:32:25.270

舍入数字的确切方法`sprintf`取决于系统库如何舍入数字。如果您需要精确控制数字的舍入方式，您将需要使用一个明确实现所需舍入的库，或者编写一个函数来根据需要进行舍入。

例如，将一个正数四舍五入到任意精度，其中 5 舍入就可以了。

```
sub round {
    my $numer     = shift;
    my $precision = shift;
    return int($numer * 10 ** $precision + 0.5) * 10 ** -$precision;
} 
```

但是，对于负数，这不能正确舍入，-0.12324 会错误地舍入为 -0.1231。5 应该四舍五入（即朝向正无穷大）的解决方案是使用`floor`而不是`int`.

```
use POSIX qw(floor);
sub round {
    my $numer     = shift;
    my $precision = shift;
    return floor($numer * 10 ** $precision + 0.5) * 10 ** -$precision;
} 
```

如果相反 5 应该四舍五入到最大的绝对值（即远离 0 的舍入），那么您可以添加一个简单的负数检查以将它们朝正确的方向舍入。

```
sub round {
    my $numer     = shift;
    my $precision = shift;
    my $direction = $numer >= 0 ? 0.5 : -0.5;
    return int($numer * 10 ** $precision + $direction) * 10 ** -$precision;
} 
```

在某些情况下使用更复杂的四舍五入规则，其中所有数字在一个方向上舍入 5 的偏差是不可接受的，并且浮点数的任何（十进制）舍入都可能由于其二进制格式的不精确而出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:11:38.000

这对我有用：

```
print sprintf '%.*f', 4, 0.12325 
```

你的代码也对我有用。您是否单独测试了该代码？
你能告诉我们你的 perl 版本吗（`perl -v`）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-21T23:07:57.680

Perl 的`sprintf`好坏取决于它输入的数据。没有与 0.12345 或 0.12325 完全相同的浮点数：

*   最接近 0.12345 的浮点数正好是`2223877495995551/2**54`≈ 0.1234 **5** 0000000000004，这个值略大于输入。
*   最接近 0.12325 的浮点数正好是`4440549232587309/2**55`≈ 0.1232 **4** 9999999999998，这个值略小于输入。

请注意，后者的第 5 位小数是 4 而不是 5。在通常的规则下四舍五入到小数点后 4 位时，它们*必须*分别为 0.1235 和 0.1232。

你说 using`Math::BigFloat`有点矫枉过正，但似乎你真正想要的是十进制算术，所以矫枉过正是不可避免的。

# c++ - OpenMP将函数的执行分配给线程？

> ID：11538561
> 
> 赞同：2
> 
> 时间：2012-07-18T09:44:12.483
> 
> 标签：c++, multithreading, openmp

基本上我需要主线程根据一些全局变量的值继续执行一些操作，这些全局变量可以由辅助线程（以某些选定的时间间隔）编辑。就像是：

```
vector<int> mySharedVar;

void secondaryThreadFunction() {
   Do some operations
   And update mySharedVar if necessarily  
}

int main() {
 int count = 0;
 while(true) {
    count++;

    if (count%100) {  //> Each 100 iterations run a parallel thraed
      //> RUN secondaryThreadFunction in a separateThread
    }

    this is the main thread that based its operation on mySharedVar
 }
} 
```

哪个是用于运行单个并行线程的 openmp 命令`secondaryThreadFunction();`？

有没有比这更好的方法：

```
#pragma omp parallel num_threads(2)
    {
        int i = omp_get_thread_num();

        if (i == 0){
            mainThread();
        }
        if (i == 1 || omp_get_num_threads() != 2){
            secondaryThreadFunction();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:59:02.290

这是我想出的：

```
#include <omp.h>
#include <unistd.h>
#include <vector>
#include <iostream>

std::vector<int> mySharedVar(10);

void secondaryThreadFunction() {
  mySharedVar[5]++;
}

int main() {
  int  i = 0 ;

#pragma omp parallel sections shared(mySharedVar) private(i)
  {
#pragma omp section
    //main thread
    {
      while( mySharedVar[5] < 10) {
        std::cout << "main: ";
        for(i=0; i < mySharedVar.size(); ++i){
          std::cout << mySharedVar[i] << " ";
        }
        std::cout << std::endl;
        usleep(1.e5); // wait 0.1 seconds
      }
    }
#pragma omp section
    {  
      while( mySharedVar[5] < 10) {
        secondaryThreadFunction();  
        usleep(3.e5); // wait 0.3 seconds
      }
    }
  }
} 
```

编译并运行`g++ -fopenmp test_omp_01.cc && ./a.out`

输出：

```
main: 0 0 0 0 0 1 0 0 0 0 
main: 0 0 0 0 0 1 0 0 0 0 
main: 0 0 0 0 0 1 0 0 0 0 
main: 0 0 0 0 0 2 0 0 0 0 
main: 0 0 0 0 0 2 0 0 0 0 
main: 0 0 0 0 0 2 0 0 0 0 
main: 0 0 0 0 0 3 0 0 0 0 
main: 0 0 0 0 0 3 0 0 0 0 
main: 0 0 0 0 0 3 0 0 0 0 
main: 0 0 0 0 0 4 0 0 0 0 
main: 0 0 0 0 0 4 0 0 0 0 
main: 0 0 0 0 0 4 0 0 0 0 
main: 0 0 0 0 0 5 0 0 0 0 
main: 0 0 0 0 0 5 0 0 0 0 
main: 0 0 0 0 0 5 0 0 0 0 
main: 0 0 0 0 0 6 0 0 0 0 
main: 0 0 0 0 0 6 0 0 0 0 
main: 0 0 0 0 0 6 0 0 0 0 
main: 0 0 0 0 0 7 0 0 0 0 
main: 0 0 0 0 0 7 0 0 0 0 
main: 0 0 0 0 0 7 0 0 0 0 
main: 0 0 0 0 0 8 0 0 0 0 
main: 0 0 0 0 0 8 0 0 0 0 
main: 0 0 0 0 0 8 0 0 0 0 
main: 0 0 0 0 0 9 0 0 0 0 
main: 0 0 0 0 0 9 0 0 0 0 
main: 0 0 0 0 0 9 0 0 0 0 
```

# jquery - 在一个 Jquery 函数中，只调用第二个函数第一个函数返回结果

> ID：11538562
> 
> 赞同：1
> 
> 时间：2012-07-18T09:44:13.383
> 
> 标签：jquery, function, wait

这让我很头疼，我有 2 个函数 1) 获取 ID 2) 调用具有检索到的 ID 的第二个函数。

现在我需要将它们组合在一个函数中，但显然第二个函数在 GetSelectedID() 返回之前被调用

```
function FillControl() {
        var iSelectedID  = GetSelectedID();
        SetControlValuesWithSelectedID(iSelectedID);
}

function GetSelectedID() {
                $.ajax({
                    url: '123.ashx',
                    type: 'POST',
                    contentType: 'application/json',
                    success: function (data1) {
                            return data1;
                    }
                });
            } 
```

请帮助仅在调用第一个函数后才调用第二个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:51:02.283

加入一个回调函数。到您的 GetSelectedID 函数。

当您需要在第一个函数完成运行后同步触发第二个函数时，回调函数很有用。

```
function GetSelectedID(callback){
   // everything this function does
   var params = result;
   if(typeof(callback) == "function"){   // check if a callback was supplied
      callback(params);                  // run callback with your ID
   }
   return params; // also useful to return data in any case.
} 
```

并在您的正常代码中：

```
function FillControl() {
    GetSelectedID(function(params){
       SetControlValuesWithSelectedID(params);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:52:20.090

只需在 ajax 成功回调中调用第二个函数

```
GetSelectedID(function(iSelectedID){SetControlValuesWithSelectedID(iSelectedID);});
function GetSelectedID(callback) {
    $.ajax({ url: '123.ashx', 
        data: PassingObj, type: 'POST', contentType:  'application/json', 
        success: function (id) { 
            if(callback)
                callback(id);
        } 
    }); 
} 
```

如果您想从该函数 ( `id = GetSelectedID()`) 中获取返回值，则必须进行同步调用 ( `async: false`)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:52:50.270

您的`GetSelectedID()`函数是异步的，因为它执行 AJAX 请求。它将立即返回，但`iSelectedID`仅在一段时间后才可用。

您可以将回调函数`GetSelectedID()`传递给 ，从传递给 的成功回调中调用该函数`$.ajax()`，并将调用重新定位到`SetControlValuesWithSelectedID`该函数中：

```
function GetSelectedID(callback)
{
    $.ajax({
        url: '123.ashx',
        data: PassingObj,
        type: 'POST',
        contentType: 'application/json',
        success: function(data1) {
            callback(data1);
        }
    });
} 
```

然后：

```
function FillControl()
{
    GetSelectedID(function(iSelectedID) {
        SetControlValuesWithSelectedID(iSelectedID);
    });
} 
```

# javascript - 在 Chrome 中上传文件

> ID：11538563
> 
> 赞同：0
> 
> 时间：2012-07-18T09:44:15.643
> 
> 标签：javascript, html, google-chrome, file-upload, dom-events

我正在从我的电脑上传一张图片。它在 Firefox 中运行良好，但在 Chrome 中，选择文件的对话框没有打开！我在 Javascript 中调用输入类型的点击事件。

这是我正在做的事情：

```
<input type="file" id="fileElem" accept="image/*" style="display:none" >
<div id="fileSelect" class="drop-area">Select some files</div> 
```

这是Javascript：

```
var fileSelect = document.getElementById("fileSelect"),
fileElem = document.getElementById("fileElem");

fileElem.addEventListener("click",function(e){
  var files = this.files
  handleFiles(files)
},false)  

fileSelect.addEventListener("click", function (e) {
    fileElem.click();
  e.preventDefault(); 
}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:40:12.697

`<input type="file">`据我所知，没有浏览器可以让您在没有用户干预的情况下模拟点击本身。原因是安全。浏览器要求用户在页面某处进行显式手动点击（用户发起的点击）。但是，一旦发生这种情况，就很容易劫持点击并将其路由到文件输入。这就是你想要做的。

请参阅我关于该主题的 blob 帖子。它有一个应该可以工作的演示： http: [//ericbidelman.tumblr.com/post/14636214755/making-file-inputs-a-pleasure-to-look-at](http://ericbidelman.tumblr.com/post/14636214755/making-file-inputs-a-pleasure-to-look-at)

# c++ - Gstreamer 在 Windows 上明显的寻道间隙

> ID：11538565
> 
> 赞同：1
> 
> 时间：2012-07-18T09:44:27.937
> 
> 标签：c++, qt4, gstreamer, boost-thread

我编写了一个演示程序来执行 seek 。这是代码

```
#define BOOST_ALL_NO_LIB
#include <iostream>

#include <gst/gst.h>
#include <glib/gmain.h>
#include <boost/thread.hpp>
using namespace std;
int bus_state_changed(GstBus *bus, GstMessage *msg, gpointer loop)
{
    std::cerr << "bus message: " << GST_MESSAGE_TYPE_NAME(msg) << std::endl;
        GMainLoop *ptrLoop = (GMainLoop *) loop;
    switch (GST_MESSAGE_TYPE(msg))
    {
    case GST_MESSAGE_EOS:
        std::cout<<"End of stream\n";
        g_main_loop_quit(ptrLoop);
        break;
    case GST_MESSAGE_ERROR:
        {
        GError *err=0;

        gst_message_parse_error(msg, &err, 0);
        std::cerr<< "GST_MESSAGE_ERROR: " << err->message << ": "
        << GST_MESSAGE_SRC_NAME(msg);
        g_error_free(err);
        g_main_loop_quit(ptrLoop);
        break;
        }

    case GST_MESSAGE_STATE_CHANGED: {
        GstState old_state, new_state;

        gst_message_parse_state_changed (msg, &old_state, &new_state, NULL);
        g_print ("Element %s changed state from %s to %s.\n",
            GST_OBJECT_NAME (msg->src),
            gst_element_state_get_name (old_state),
            gst_element_state_get_name (new_state));
        break;
                                    }

    default:
        break;
    }
    return true;
}

int main()
{
    GMainLoop *loop;
    GstElement *pipeline=0;
    GstBus *bus=0;
    guint busWatchId;

    GError *err = 0;
    if(!gst_init_check(0, 0,&err))
    {
        std::string errmsg(err->message);
        g_error_free(err);
    }

    loop = g_main_loop_new(NULL, FALSE);

    //create a pipeline for audio/video playback
    pipeline = gst_element_factory_make("playbin2", "player");

    if(!pipeline)
    {
        std::cout<<"Can not get pipeline";
    }

    //get a bus to receive GSTMessages from pipeline.
    bus = gst_pipeline_get_bus(GST_PIPELINE(pipeline));

    if(!bus)
    {
        std::cout<<"Can not get bus";
    }

    //when the state of bus changes call bus_state_changed function.
    busWatchId = gst_bus_add_watch(bus, bus_state_changed, loop);
    //make the pipeline ready to use.
    gst_element_set_state(pipeline, GST_STATE_READY);

    boost::thread gloopThread([&](){g_main_loop_run(loop);});

g_object_set(G_OBJECT(pipeline), "uri","file:///C:/song.mp3" , 0);
gst_element_set_state(pipeline, GST_STATE_PLAYING);

std::cout<<"Seek will be perfomed now "<<std::endl;
gint64 pos =-1;
GstFormat fmt = GST_FORMAT_TIME;
    while(true)
    {

    if (!gst_element_query_position(pipeline, &fmt, &pos))
{
    std::cerr << "gst_element_query_position failed" << std::endl;
}
    //std::cout<<"\nCurrent Position"<<pos<<std::endl;
    if(pos > 2807641720)  // 3 seconds
    {
    if (!gst_element_seek_simple(pipeline, GST_FORMAT_TIME, GST_SEEK_FLAG_FLUSH,44531201814 ))
{
    std::cerr << "gst_element_seek failed" << std::endl;
}

    GstStateChangeReturn r = gst_element_get_state(pipeline, 0, 0, -1);
    std::cout << "state change return = " << r << std::endl;

        if (!gst_element_query_position(pipeline, &fmt, &pos))
{
    std::cerr << "gst_element_query_position failed 2" << std::endl;
}
    //std::cout<<"\nCurrent Position :"<<pos<<std::endl;
    break;
    }
   }
    while(true)
    {

        gst_element_query_position(pipeline, &fmt, &pos);
    //std::cout<<"\nCurrent Position"<<pos<<std::endl;
    if(pos > 47531201814)  // 3 seconds
    {
    gst_element_seek_simple(pipeline, GST_FORMAT_TIME, GST_SEEK_FLAG_FLUSH,50531201814 );
        gst_element_query_position(pipeline, &fmt, &pos);
    //std::cout<<"\nCurrent Position :"<<pos<<std::endl;
    break;
    }
   }
    while(true);

    return 0;
} 
```

这是我的 .pro 文件

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp
QMAKE_CXXFLAGS += -std=c++0x

CONFIG += link_pkgconfig
PKGCONFIG += gstreamer-0.10

win32: INCLUDEPATH += c:\boost_1_48_0 \

win32:CONFIG(release, debug|release): LIBS += -L$$PWD/../../../boost_1_48_0/stage/lib/ -lboost_thread-vc100-mt-1_48
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/../../../boost_1_48_0/stage/lib/ -lboost_thread-vc100-mt-gd-1_48

INCLUDEPATH += $$PWD/../../../boost_1_48_0/stage
DEPENDPATH += $$PWD/../../../boost_1_48_0/stage 
```

运行代码时，歌曲播放良好，但触发搜索时存在搜索间隙。相同的代码在 linux 上完美运行。我无法理解问题出在哪里。谢谢

# android - 创建这样的弹出窗口

> ID：11538569
> 
> 赞同：0
> 
> 时间：2012-07-18T09:44:41.203
> 
> 标签：android, user-interface, twitter

当我们单击链接时，如何在图像中制作弹出窗口以及它被称为什么？

![加载失败](../Images/5c526d941ffe1f34975492381d6159ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:50:43.267

我相信如果您使用[PopUpWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)并将背景设置为像您在问题中显示的图片中那样的气泡，您可以实现这一点。有关一个简单示例，请参见[上一篇 SO 帖子的答案。](https://stackoverflow.com/a/1967886/1482726)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:52:46.233

看看这个实现：

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:53:57.743

它只是一个弹出窗口。看看这里。它会向你解释清楚。

[http://www.edumobile.org/android/android-apps/quick-action-demo/](http://www.edumobile.org/android/android-apps/quick-action-demo/)

# url - 如何动态更改 liferay iframe portlet 的 URL？

> ID：11538571
> 
> 赞同：0
> 
> 时间：2012-07-18T09:44:43.583
> 
> 标签：url, iframe, liferay

我需要创建一个包含两个 portlet 的页面。第一个将需要在单击时更改第二个 iframe portlet 的 url 源。但是，要求是不应重新加载页面。

是否可以实施？如果是，那么如何？

我从[iframe 文档](http://www.liferay.com/community/wiki/-/wiki/Main/Iframe+Portlet#section-Iframe+Portlet-Change+the+URL+dynamically)中读到该页面可以更改，但它需要重新加载页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:08:17.870

就个人而言，我更喜欢用 Ajax 方式而不是 iframe 来做，在 JSR 268 中可以实现 Inter portlet 通信。有关更多详细信息，您可以访问此链接。

[http://www.liferay.com/community/wiki/-/wiki/Main/Inter-portlet+communication](http://www.liferay.com/community/wiki/-/wiki/Main/Inter-portlet+communication)

# python - 如何按列求和

> ID：11538574
> 
> 赞同：2
> 
> 时间：2012-07-18T09:44:49.463
> 
> 标签：python, pandas

我有一个数据文件，我想在其中按列求和。

数据看起来像：

```
Date;Heure;U12_min;U12_max;U12_moy
13/07/12-15:10:02;581072;41719;42058;41892
13/07/12-15:20:01;581088;41610;42108;41897
13/07/12-15:30:01;581105;41810;42048;41931
13/07/12-15:40:01;581122;41483;41988;41798
...
14/07/12-00:00:01;581955;42013;42377;42210
14/07/12-00:10:01;581972;41502;42117;41851
14/07/12-00:20:01;581988;41477;42349;42135
14/07/12-00:30:00;582005;42092;42517;42264
14/07/12-00:40:00;582022;41766;42653;42032 
14/07/12-00:50:01;582038;41836;42267;42069
14/07/12-01:00:01;582055;42056;42334;42214 
```

这是我的代码：

```
from pandas import *

fich = 'D://ENERGIE//test2.csv'
df = read_csv(fich, delimiter=";", index_col="Date")
df.sum["Heure"]
print df 
```

我收到以下消息

> ```
> df.sum["Heure"]
> TypeError: 'instancemethod' object is not subscriptable 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:00:21.147

pandas 的 groupby 函数不应该与 sum 一起使用吗？

```
from pandas import *

fich = 'D://ENERGIE//test2.csv'
df = read_csv(fich, delimiter=";", index_col="Date")
sumValue = df.groupby("Heure").sum()
print sumValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:09:29.057

或者，没有`pandas`，该`csv`模块非常方便：

```
import csv
fich = 'D://ENERGIE//test2.csv'

with open(fich) as f:
    d = csv.DictReader(f, delimiter=';')
    print sum(float(row['Heure']) for row in d) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:07:04.693

如果要对“Heure”列中的所有值求和，只需执行以下操作：

```
$> df.Heure.sum() 
```

# php - 不使用foreach递归遍历多维数组

> ID：11538576
> 
> 赞同：8
> 
> 时间：2012-07-18T09:44:53.170
> 
> 标签：php, recursion, multidimensional-array

我有一个这样的数组和使用 foreach 循环的代码。

```
$arr = array( array ( array( 'CAR_TIR', 'Tires', 100 ),
           array( 'CAR_OIL', 'Oil', 10 ),
           array( 'CAR_SPK', 'Spark Plugs', 4 )
          ),
       array ( array( 'VAN_TIR', 'Tires', 120 ),
           array( 'VAN_OIL', 'Oil', 12 ),
           array( 'VAN_SPK', 'Spark Plugs', 5 )
          ),
       array ( array( 'TRK_TIR', 'Tires', 150 ),
           array( 'TRK_OIL', 'Oil', 15 ),
           array( 'TRK_SPK', 'Spark Plugs', 6 )
          )
      );

function recarray($array)
{
    foreach($array as $key=>$value)
    {
        if(is_array($value))
        {
            RecArray($value);
        }
        else
        {
            echo "key = $key value = $value";
       }
    }
}
recarray($arr); 
```

我必须使用递归而不使用 foreach 来遍历数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:57:58.480

简单的深度优先搜索：

```
function DFS($array) {      
    for ($i = 0; $i < count($array); $i ++) {
        if (is_array($array[$i])) {
            DFS($array[$i]);
        }
        else {
            echo "key: ".$i.", value: ".$array[$i]."<br />";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:51:36.113

那么[array_walk_recursive()](http://www.php.net/manual/en/function.array-walk-recursive.php)呢？它可以将函数应用于数组的每个元素：

```
function test_print($value, $key)
{
    echo "key = $key value = $value";
}

array_walk_recursive($arr, 'test_print'); 
```

**未测试**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:52:12.297

我会使用一个while循环 - 比如

```
while($i < count($array)) {} 
```

# regex - 如何编写正则表达式以匹配'012356789'（第4个）

> ID：11538588
> 
> 赞同：3
> 
> 时间：2012-07-18T09:45:31.273
> 
> 标签：regex

现在，我正在使用`[012356789]`，但是还有其他方法可以实现“所有没有 4 的数字”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:46:43.623

你可以试试这个正则表达式：

```
[0-35-9] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T09:49:09.863

要确保字符串仅包含除 number 之外的数字`4`，您可以使用`^[0-35-9]+$`：表示字符串的`^`开头，`[0-35-9]`表示除数字之外的任何数字`4`，`+`表示一个或多个以及`$`字符串的结尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:53:19.100

对于这种简单的情况，其他人的建议绰绰有余。对于更复杂的情况，您可以使用以下内容：

```
(?!4)[0-9] 
```

当您使用字符类并且想要排除单个字母时，这会很好。（除示例之外的任何字母`x`）。它的意思是：`not followed by 4, any digit 0-9`

正如@stema 所指出的，从长远来看，这将使正则表达式更加“复杂”。如果要添加量词，则有两个“正则表达式元素”而不是一个，因此您需要：

```
(?:(?!4)[0-9]) 
```

（这`?:`意味着该组不是捕获组）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T09:54:23.070

另一种可能性是

```
[^\D4] 
```

`\D`不是数字，因此在否定字符类中它将匹配一个数字，然后您可以将“4”添加到否定类以将其从允许的字符中排除。

[在 regexr 上](http://regexr.com?31ihr)查看

# asp.net-mvc-3 - 控制器 -> 服务 -> 存储库：服务是否将实体映射到 ViewModel？

> ID：11538592
> 
> 赞同：8
> 
> 时间：2012-07-18T09:45:40.243
> 
> 标签：asp.net-mvc-3, service, repository-pattern

我有 MVC 应用程序，其中“M”包括服务和存储库层。

但是，我对在哪里以及如何做几件事感到有些困惑。

1.  一个服务调用两个存储库，或者调用它自己的存储库和另一个服务

例如

我有一个 ReferenceDataService，它使用我的参考表处理 CRUD 的所有逻辑。

然后在我的“客户服务”中，我需要“R”我的参考数据以获取例如描述而不是 ID。那么，我应该调用 ReferenceDataService 还是 ReferenceDataRepository？

1.  在某些层，我想从实体映射到 ViewModel。

我是在我的服务层还是在控制器中执行此操作？

例如，我的 ServiceLayer 是否执行从 VM 到实体并返回的映射/逻辑？

谢谢：）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T09:48:38.490

*   存储库与底层数据源通信。
*   服务层与具有域模型的存储库进行对话。它从/向存储库层获取/传递域模型。
*   控制器与服务层对话。控制器从/向服务层获取/传递域模型。
*   控制器调用映射层（如果有）在域模型和视图模型之间进行映射。如果您没有映射层，您可以在控制器中进行映射，尽管这很快就会变得很麻烦，在这种情况下[AutoMapper](http://automapper.codeplex.com/)可以作为一个非常方便的映射层。

另一个更简单的场景是当您不需要服务层时，这在较小的应用程序中通常是这种情况。服务层不会带来任何好处。因此控制器直接与具有域模型的存储库对话。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T09:55:29.163

ViewModel 包含在视图上显示模型所需的数据。如果您将使用其他视图（例如移动应用程序、桌面应用程序，甚至网络服务），您将需要在视图中显示其他数据。如果您将在服务层上进行映射，那么您将无法将其与其他类型的应用程序一起使用。因此，控制器是您映射域数据以在视图上显示它们的地方（无论您拥有什么类型的视图）。

# php - 如何实施 Yahoo/Facebook 之类的客户端计算机特定 Sing-in 密封以保护客户端免受网络钓鱼攻击？

> ID：11538596
> 
> 赞同：1
> 
> 时间：2012-07-18T09:46:13.297
> 
> 标签：php, mysql, database-design, session-cookies, yahoo

我们希望实施签章以降低对客户端进行网络钓鱼攻击的风险。我们希望客户知道他在我们的网站上，而不是我们网站的某些副本。一些网络搜索为我们提供了 Yahoo Sign-in-seal 功能的示例。你们能指导我实施这样的系统吗？

我想对具体的数据库设计提出建议，以及机制是否适用于 cookie 或其他东西，以及是否有比雅虎登录印章更好的解决方案来满足我们的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:00:49.370

有一个网站区域，用户可以在其中输入一些文本或选择图像。根据用户 ID 将此结果存储在您的数据库中。

完成此操作后，加密此值并将其设置在 cookie 中。

```
// Set a secret key
define('SECRET_KEY', 'HNBG:^yhCY*1omNhRg&');
// Sign in text - get this from the users row in the database
$signinSeal = 'Hello, User!';

// Encrypt value
$ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
$iv = mcrypt_create_iv($ivSize, MCRYPT_RAND);
$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, SECRET_KEY, $signinSeal, MCRYPT_MODE_ECB, $iv);
// Concat with IV - base64 so it can be safely sent
$encrypted = base64_encode($iv) . '|' . base64_encode($encrypted);

// Set in a cookie - mark as HTTP only to prevent it being stolen in an XSS attack
setcookie('signinSeal', $encrypted, time() + (60 * 60 * 24 * 30), '/', 'example.com', false, true); 
```

现在，当用户访问您的登录页面时，检查是否存在“signinSeal”cookie，base64 对其进行解码，解密并显示

```
if (array_key_exists('signinSeal', $_COOKIE) && !empty($_COOKIE['signinSeal'])) {
    // Split IV and encrypted string
    $fields = explode('|', $_COOKIE['signinSeal']);
    $iv = base64_decode($fields[0]);
    $encrypted = base64_decode($fields[1]);
    // Decrypt value
    $ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, SECRET_KEY, $encrypted, MCRYPT_MODE_ECB, $iv);

    // And display to the user
    echo htmlspecialchars($decrypted);
} 
```

一旦他们登录 - 我会再次设置 cookie，以确保它不会过期

# c - 使用结构传递变量

> ID：11538597
> 
> 赞同：0
> 
> 时间：2012-07-18T09:46:17.020
> 
> 标签：c, pointers, struct, segmentation-fault

我想使用结构传输一些变量。以下是示例程序代码。当我运行这个程序时，我得到了分段错误。我使用 gcc 编译器。

谁能帮我这个？

```
struct data{
    const char * ip;
    const char * address;
    const char * name;
};

int fun(struct data *arg) {
    //struct data *all;
    const char *name = arg->name;
    printf("\n My name is:%s",name);
    return 1; 
}

int main(int argc, char * const argv[]) {
    struct data * all;   
    int k=0;
    //data.name = argv[1];

    all->name=argv[1];
    k = fun(all);

    printf("\n k is:%d ",k);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:56:38.530

问题在这里：

```
struct data * all;
all->name=argv[1]; 
```

您尚未为`all`. 当您有一个未初始化的指针时，它指向内存中的随机位置，您可能无法访问这些位置。你有两个选择：

1.  在栈上分配：

    ```
    struct data all;
    all.name=argv[1];
    k = fun(&all); 
    ```

2.  在堆上分配：

    ```
    struct data *all = malloc(sizeof(*all));
    if (all != NULL)
    {
        all->name=argv[1];
        k = fun(all);
    }
    free(all); 
    ```

当您知道`all`仅在当前函数（以及您调用的函数）中需要时，第一种情况很好。因此，将其分配到堆栈上就足够了。

The second case is good for when you need `all` outside the function creating it, for example when you are returning it. Imagine a function initializing `all` and return it for others to use. In such a case, you can't allocate it on the stack, since it will get destroyed after the function returns.

You can read more about it in [this question](https://stackoverflow.com/q/5258724/912144).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:57:05.440

You need to allocate memory and assign it to the pointer `all`:

```
struct data * all;   
int k=0;
all = malloc(struct data);

all->name=argv[1];
k = fun(all);
//...
free(all); 
```

or use a local struct and pass its pointer to the function:

```
struct data all;   
int k=0;

all.name=argv[1];
k = fun(&all); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:56:47.853

`all` is a pointer to type `struct data`. You never assigned it, so it doesn't point to anything.

You need to do one of the following:

*   allocate `all` on the stack:

    `struct data all;`

*   allocate `all` on the heap:

```
 struct data* all = malloc(sizeof (struct data));   
    // don't forget to check if the allocation succeeded, 
    //and don't forget to free it when you're done 
```

# javascript - 如何阻止按钮单击中的重复操作？

> ID：11538601
> 
> 赞同：0
> 
> 时间：2012-07-18T09:46:25.503
> 
> 标签：javascript, jquery, html

我在 HTML 中创建了一个网站介绍页面。我单击一个按钮来重定向网站主页。现在我点击了两次或更多次，这意味着网站打开了两次或更多次。我只想要一个主页。打开主页时如何阻止该按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:55:57.600

您不应该在每次单击按钮时在同一个窗口中重定向而不是打开新窗口吗？

使用以下？

`<input type="button" value="To Home Page" onClick="location.href='http://homepage/'" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:06:36.903

如果表单中有一个按钮，

```
<a href="JavaScript:;" id='submit' >
 <img src= "images/remote_support.png"  width="140px" height="60px" style="position: absolute; top: 450px; left: 1000px;" />
</a>???????????????????????????????????????? 
```

使用 JavaScript/ [jQuery](http://en.wikipedia.org/wiki/JQuery)只需提交表单并制作

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(document).ready(function(){
        $('#submit').click(function(){
            newPopup('livesupport:8080/…');
            $('#submit').hide();
        });
    });
</script> 
```

# oracle - 找不到 fips.ora 文件

> ID：11538602
> 
> 赞同：0
> 
> 时间：2012-07-18T09:46:37.260
> 
> 标签：oracle, fips

我在 fips 兼容模式下配置 Oracle 数据库，但找不到 fips.ora，有人可以告诉我我需要创建一个新文件还是有任何默认位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:28:32.130

假设您使用的是 11g，fips.ora 文件要么位于`$ORACLE_HOME/ldap/admin`目录中，要么由`FIPS_HOME`环境变量指向。

如果它不存在创建它并添加 `SSLFIPS_140=TRUE`

请参阅[http://docs.oracle.com/cd/B28359_01/network.111/b28530/asoappe.htm](http://docs.oracle.com/cd/B28359_01/network.111/b28530/asoappe.htm)

# python - 从 Django 加载 CSS 和 JS 到 IIS7 有什么问题？

> ID：11538607
> 
> 赞同：3
> 
> 时间：2012-07-18T09:46:39.243
> 
> 标签：python, django, iis-7, iis-7.5

我成功地将我的 Django 站点部署到 IIS7，但我仍然有关于如何配置 IIS 以提供静态文件的问题。我从互联网上尝试了很多东西，但似乎没有任何效果。`manage.py runserver`在 Django 服务器 ( ) 和 with上一切正常`debug = True`，但是一旦我关闭调试 ( `debug = False`) 并在 IIS 上打开它，引导 css 和 js 就不会加载。

您对我为什么会遇到这种行为有任何想法吗？也许您可以向我指出一个分步指南来帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:39:15.163

在 IIS7 管理器中右键单击您的网站，然后

1.  添加虚拟目录
2.  将其命名为您希望 IIS 处理的文件夹的相同名称。让我们说静态
3.  在你的应用程序中添加你真正的静态文件夹的路径我在 myproject/static 然后确定

给你：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:15:10.610

如果您使用 django >= 1.3 并遵循文档，您可能正在使用['staticfiles' app](https://docs.djangoproject.com/en/dev/howto/static-files/)。

1.  首先，您必须将 II7 配置为从所选路径提供静态文件，默认情况下为 URL：`/static/`和 PATH `/staticfiles/`（我对 II7 没有经验，但配置文件应该很简单）
2.  然后运行`./manage.py collectstatic`将静态文件移动到正确的路径

你应该完成...

有关生产设置的更多信息，请[点击此处](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-production)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T14:58:59.953

您还需要将 web.config 文件插入到静态目录中，以便 IIS 提供文件。

请参阅：[Django 静态文件 - 404](https://stackoverflow.com/questions/18393073/django-static-files-404)

# php - 识别调用函数的行

> ID：11538610
> 
> 赞同：1
> 
> 时间：2012-07-18T09:46:46.983
> 
> 标签：php, sql, debugging, line

有这样的重复代码：

```
$SQL = " INSERT INTO ... ";

mysql_query($SQL, $conexion);
$error = mysql_error();

if($_ADM['id_user']==1) {
    if( ! empty($error)) {
        $debug = array(
                    'message' => "SQL Error in news_edit module.",
                    'line'    => '177',
                    'error'   => $error,
                    'SQL'     => $SQL
                );
        exit(print_r($debug));
    }
} 
```

这是一个通用代码，每次`$SQL`更改时都会重复它自己。我想要实现的是一种在发生任何错误时进行调试的方法，正如您所看到的，我有一个`line`包含上次`mysql_query`执行的数字行的参数，但我必须手动输入，并且每次添加代码时在此之前，`line`需要使用新的行值更改参数。

有什么方法可以确定上次`mysql_query`执行的位置吗？还有其他改进上述代码的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:49:59.927

尝试使用

```
'line'=> __LINE__, 
```

它是一个神奇的常数，显示文件的当前行..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:49:30.383

我认为你想要的是`debug_backtrace`功能。检查手册的规格：

[http://php.net/manual/en/function.debug-backtrace.php](http://php.net/manual/en/function.debug-backtrace.php)

# python - 蟒蛇回溯

> ID：11538611
> 
> 赞同：2
> 
> 时间：2012-07-18T09:46:49.957
> 
> 标签：python, recursion, backtracking, sudoku

最近发了几个关于递归和回溯的问题，感觉现在有所收获，试着写了一个测试，确实解决了数独问题，但是当我写成另一种格式的代码时，代码卡住了while 并返回 False，表示此问题没有解决方案。

grid 是一个 9x9 的列表列表，如果 list[i][j] 为零，则表示需要填写。

这是解决问题的代码：

```
def correct_solve(grid):

    # if there is no more zeros
    if found_solution(grid):
        return True

    for row in xrange(9):
        for col in xrange(9):
            if grid[row][col] == 0:
                for num in xrange(1, 10):
                    grid[row][col] = num
                    if check_sudoku(grid) == True:
                        if correct_solve(grid) == True:
                            return True
                # there are no numbers which could make
                # a valid solution, so backtrack
                grid[row][col] = 0
                return False 
```

这是另一个功能，我尝试以不同的方式解决问题，但失败了，我找不到问题出在哪里

```
def buggy_solve(grid, col):

    # if there is no more zeros
    if found_solution(grid):
        return True

    # if the col is over 8, make it to 0
    if col > 8:
        col = 0

    for row in xrange(9):
        if grid[row][col] == 0:
            for num in xrange(1, 10):
                grid[row][col] = num
                if check_sudoku(grid) == True:
                    # I tend to move to the next cell, and it seems that
                    # this is correct.
                    if buggy_solve(grid, col + 1) == True:
                        return True

            # if there are no valid solutions, backtrack.
            grid[row][col] = 0
            return False 
```

我试图调试程序并没有发现任何有用的东西，顺便说一句，调试一段递归代码有什么好的做法吗？

**编辑：**

这是我用来测试的矩阵：

```
easy = [[2,9,0,0,0,0,0,7,0],
        [3,0,6,0,0,8,4,0,0],
        [8,0,0,0,4,0,0,0,2],
        [0,2,0,0,3,1,0,0,7],
        [0,0,0,0,8,0,0,0,0],
        [1,0,0,9,5,0,0,6,0],
        [7,0,0,0,9,0,0,0,1],
        [0,0,1,2,0,0,3,0,6],
        [0,3,0,0,0,0,0,5,9]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:59:01.360

`correct_solve`查看整个网格，同时`buggy_solve`查看单个列。这意味着，如果问题还没有解决，`buggy_solve`只会在当前列中查找要填充的单元格——如果该列恰好没有空单元格，它将退出外部 for 循环并退出，而不使用显式`return`语句。因此，当发生这种情况时，您需要代码调用`buggy_solve`下一列（并使用适当的`return`语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:38:53.513

问题是您的递归解决方案永远不会开始回溯。相反，除非它意外地找到解决方案，否则它将以无休止的递归告终——这是非常不可能的，并且仅适用于大多数已解决的数独游戏。排除这些情况，这就是正在发生的事情：

```
if buggy_solve(grid, col + 1) == True:
    return True 
```

这个`buggy_solve`调用*永远不会*返回 false。因为如果需要，该函数将继续尝试和迭代列。当它到达最后一列时，它将再次从第一列开始，覆盖之前发生的一切。

因此，回溯永远不会开始。`check_sudoku`鉴于我们仍处于处理的早期阶段，并且大多数未填充的数独可能会在给定单元格中允许多个值，因此很少会失败。

您想要做的是防止`buggy_solve`重新开始，即删除列重置并使其简单地为无效列返回 false。这种方式`buggy_solve`会在某个时候返回 false 并且回溯实际上可以开始。

# python - Regex edit of a binary file/string using python

> ID：11538613
> 
> 赞同：2
> 
> 时间：2012-07-18T09:46:54.513
> 
> 标签：python, regex, hex

I'm searching a way to do some string substitution in python 2.7 usin regex on a binary file.

s is a string I get from reading a binary file. It contains this sequence (hex ) :

' 00 00 **03 00 00 01** 4A 50 20 43 52 55 4E 43 48 20 32 20 45 51 00 **F7 00 F0** '

here is the variable I use for finding the string to sub :

```
f01 = re.findall( br'\x03\x00\x00\x01(.*?)\xF7\x00\xF0', s) 
```

here is my sub :

```
f99 = re.sub( br'\x03\x00\x00\x01(.*?)\xF7\x00\xF0', br'\x03\x00\x00\x01\x4B\x4B\x4B\x4B\xF7\x00\xF0', s) 
```

now , while I got no error , my sub doesn't seem to change my string. Am I missing something ?

```
>>> f01 = re.findall( br'\x03\x00\x00\x01(.*?)\xF7\x00\xF0', s)
>>> print f01[0]
JP CRUNCH 2 EQ
>>> f99 = re.sub( br'\x03\x00\x00\x01(.*?)\xF7\x00\xF0', br'\x03\x00\x00\x01\x4B\x4B\x4B\x4B\xF7\x00\xF0', s)
>>> print f99
MThd
>>> print f99[0]
M
>>> print f01[0]
JP CRUNCH 2 EQ
>>> f01 = re.findall( br'\x03\x00\x00\x01(.*?)\xF7\x00\xF0', s)
>>> print f01[0]
JP CRUNCH 2 EQ 
```

I would like to have my initial string changed to \x03\x00\x00\x01\x4B\x4B\x4B\x4B\xF7\x00\xF0 so I can store it to a file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:40:39.957

`r''`文字前缀使所有斜线都按字面意思解释，即`r'\x00'`不是单个零字节，而是 4 个字符。

为避免将随机字节解释为正则表达式元字符，您可以使用[`re.escape`function](http://docs.python.org/library/re.html#re.escape)。

为避免在替换字符串中重复前缀、后缀，您可以使用 regex'lookahead,lookbehind：

```
>>> s
'\x00\x00\x03\x00\x00\x01JP CRUNCH 2 EQ\x00\xf7\x00\xf0'
>>> pre = b'\x03\x00\x00\x01'
>>> suff = b'\xf7\x00\xf0'
>>> re.sub(br'(?<=%s).*?(?=%s)' % tuple(map(re.escape, [pre, suff])), b'\x4b'*4, s)
'\x00\x00\x03\x00\x00\x01KKKK\xf7\x00\xf0' 
```

您可能需要`re.DOTALL`正则表达式标志来强制`.`匹配换行符。

# activemq - activemq --extdir option doesn't seem to work

> ID：11538614
> 
> 赞同：1
> 
> 时间：2012-07-18T09:46:57.680
> 
> 标签：activemq

I am starting an active mq broker using my own config file:

```
./apache-activemq-5.6.0/bin/activemq console xbean:custom-broker.xml 
```

The broker is using some classes I have defined which reside in a jar. For a while now I was just sticking the jar in the activemq lib folder, and everything worked fine. However I would now like for active mq to pick up the jar from a different folder, something which the `--extdir` option claims to be capable of doing. However I can't get it to work. I am executing the command:

```
./apache-activemq-5.6.0/bin/activemq console xbean:custom-broker.xml --extdir ../mylib/ 
```

where the jar in question is located in mylib, and am getting ClassNotFoundException every time.

What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:58:53.690

解决。--extdir 确实按预期工作，结果有人将其中一个包的名称更改了 1 个字符，这就是为什么 activemq 无法在 jar 中找到有问题的类：P。还值得注意的是，如果您想将多个文件夹添加到活动 mq 的类路径，那么您需要重复 --extdir 多次，如“--extdir foldr1 --extdir foldr2”，如此处所述：

[http://activemq.2283324.n4.nabble.com/Is-there-anyway-to-get-activeMQ-to-pick-up-a-jar-at-runtime-other-than-adding-it-to- the-activemqinst-td4654121.html#a4654190](http://activemq.2283324.n4.nabble.com/Is-there-anyway-to-get-activeMQ-to-pick-up-a-jar-at-runtime-other-than-adding-it-to-the-activemqinst-td4654121.html#a4654190)

# css - Creating header , footer and a left side bar using CSS

> ID：11538620
> 
> 赞同：0
> 
> 时间：2012-07-18T09:47:11.783
> 
> 标签：css

I am trying to create header , footer and a side bar that extends throughout the content but I am having problem. I have [jsfiddle](http://jsfiddle.net/kitex/zAYru/4/). but I am unsuccessful creating sidbar that is equal and with the containt in height.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:17:06.253

嘿，现在定义你的**侧边栏**和**内容**栏

```
width in % 
```

像这样

现场演示[http://jsfiddle.net/zAYru/5/](http://jsfiddle.net/zAYru/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:54:39.550

看到[这个答案](https://stackoverflow.com/a/1205485/728610)。用户建议您为侧边栏和主 div 提供相同数量的大底部填充和负底部填充。在侧边栏和主 div 周围放置一个容器，并将溢出隐藏在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:54:58.503

对于完整的侧边栏，您最好的选择可能是旧的仿列方法。您可以在 CSS 中执行此操作，但这对您来说可能更容易。

基本上你想要一个带有你的列背景的图像在一个细长的条带中。然后，您将其作为背景图像添加到您的父 div，它充当假装的全高列。

例如。

```
.container {
    background: url(your_image) repeat-y left top;
}

<div class="container">
    <div class="sidebar">SIDEBAR</div>
    <div class="content">CONTENT</div>
</div> 
```

你可以在这里阅读更多关于它的信息 - [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

# android - How to handle orientation change easily

> ID：11538621
> 
> 赞同：3
> 
> 时间：2012-07-18T09:47:12.070
> 
> 标签：android, orientation-changes

I'm working on a android application that adds every view programmaticaly. When the user turns the screen, I just want to values that are filled in to be displayed again.
Is there an easy way to let Android do this automaticaly?

My application is completely dynamic so it doens't have a predetermined layout, which makes it a lot harder.

So, how can I easily save the state of my screen?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:58:00.633

每次方向变化，android都会创建新视图并销毁旧视图。您可以在方向更改时保存数据并在创建新视图时重新初始化

使用`onConfigurationChanged`活动方法检测方向变化

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
  } 
```

不要忘记像这样在您的 AndroidManifest.XML 中编辑适当的元素以包含`android:configChanges`

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-28T09:30:38.673

有关 Hein 正确答案的详细解释，请参阅我之前的帖子：

[https://stackoverflow.com/a/57239493/5696328](https://stackoverflow.com/a/57239493/5696328)

# php - mcrypt_decrypt is not working properly

> ID：11538624
> 
> 赞同：0
> 
> 时间：2012-07-18T09:47:26.137
> 
> 标签：php, encryption

I'm working on a simple Zend application and I need to encrypt all the financial figures before storing them in the database, and decrypt them when needed. I used `mcrypt_encrypt()` and `mcrypt_decrypt()`. As I need to decrypt the figures I used a constant initialization vector(iv), which is not at all recommended.

here is my code:

```
define ('string','WdryhedeescmsfkirYNemsjdesapQ');
define ('iv', '$356?dWuSkm)@g%dnw#8mA*');

class FormatValues {

 const string= 'WdryhedeescmsfkirYNemsjdesapQ';
 const iv = '$356?dWuSkm)@g%dnw#8mA*';

 public function encrypt($val){
    $enc = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $val,self::string , MCRYPT_MODE_CBC,self::iv);
    return $enc;
 }

 public function decrypt($val){
    $dec = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $val,self::string , MCRYPT_MODE_CBC,self::iv), "\0");
    return $dec;

 }
} 
```

The `encrypt()` method encrypts the data, but when decrypting, it doesn't give the correct figure.

Why is this? Is there some other way to encrypt and decrypt data without having a constant iv?

Thanks in advance

Charu

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:53:31.673

我在我的项目中使用了类似的东西，试试吧！

```
$key = 'password to (en/de)crypt';
$string = ' string to be encrypted '; // note the spaces

$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key))));
$decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encrypted), MCRYPT_MODE_CBC, md5(md5($key))), "\0");

echo 'Encrypted:' . "\n";
var_dump($encrypted);

echo "\n";

echo 'Decrypted:' . "\n";
var_dump($decrypted); // spaces are preserved 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:51:06.010

不知道这是否是正确的答案，但是，您绝对不应该定义一个名为的常量`string`，因为它是 PHP 中的保留关键字。

# c - pointer in c to structure variable

> ID：11538635
> 
> 赞同：0
> 
> 时间：2012-07-18T09:47:53.967
> 
> 标签：c, pointers

Hi I have following code

```
#include <stdio.h>
#include <conio.h>
typedef struct test
{
    int a;
    int b;
    int c[10];
}tester;

typedef struct done
{
    tester* t;
    int nn;
}doner;

void main()
{
    doner d;
    d.t = (tester*)malloc(sizeof(d.t));
    d.t->a = 10;
    d.t->c[0] = 10;
    printf("%d\n", d.t->a);
    getch();
    return;
} 
```

I think the statement:

```
d.t = (tester*)malloc(sizeof(d.t)); 
```

is incorrect it should be:

```
d.t = (tester*)malloc(sizeof(tester)); 
```

but when I run this code it is not crashing please let me the why is this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:53:05.333

它没有崩溃的事实是因为它具有未定义的行为。正确的代码是第二个，但不需要强制转换。

```
d.t = malloc(sizeof(tester)); 
```

此外，您需要释放 malloc 的指针。

在许多系统上，写入 malloc 的缓冲区时不会检查堆，而只会在释放分配的内存时检查堆。在这种情况下，当您释放内存时，您可能会遇到某种崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:54:59.913

它没有崩溃的事实是这些内存分配错误如此阴险且难以检测的一个重要原因。你的程序只分配一个结构，并没有填满它，所以它运行超过分配给它的内存量这一事实不会影响其他任何东西。

`malloc`如果您的程序更多地使用动态分配的内存，那么对/的调用`free`将触发崩溃，因为您的结构覆盖了堆的链接元数据，或者程序的其他部分写入它们自己的 malloc 数据将覆盖您的结构。不管怎样，都不好看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:48:07.670

默认情况下，链接器要求操作系统在启动时为程序分配 1MiB 的（堆栈）内存。您的程序不会崩溃，因为所有引用仍位于操作系统为您的程序保留的同一内存（同一地址空间）中。从技术上讲，您尚未分配该内存，但由于指针仍在有效内存范围内，因此您的程序可以访问它。这就像在大多数情况下，您可以写入 dt->c[10]（尽管有效索引为 0-9）当使用与分配内存之外的内存位置相对应的指针时会发生崩溃。如果您有兴趣，请使用Google *Page Fault进行详细了解。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:53:28.657

你是对的。应该是`sizeof(tester)`，因为`d.t`只是一个指针。

现在，如果你写`sizeof(d.t)`你调用[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，这不是崩溃的保证。该程序可能运行正确、运行不正确、崩溃或订购披萨。无法保证具有未定义行为的程序会发生什么，即使在导致它的构造之前也是如此。

作为`free`ed`malloc`内存 - 在这个小示例程序中，您无需担心它，因为系统会在程序退出后释放内存，但通常您应该尝试释放您分配的任何内容以避免大型程序中的内存泄漏。

# java - Best tool for jar or class obfuscation without need of writing any additional config file

> ID：11538637
> 
> 赞同：18
> 
> 时间：2012-07-18T09:47:59.220
> 
> 标签：java, obfuscation, proguard

I'm looking for a tool which will give a acute performance in class or jar obfuscation and can contrive to obfuscate the jar easily. But for few day I stuck on searching for this tool. I know Proguard deserves itself, but I need a tool which will be very friendly and it can able to retrieve all available packages from the jar and show it. So that it will be easy to obfuscate. If I use Proguard I have to manipulate a configuration file called proguard.cfg that will be used during obfuscation and also I have to execute a command line, you know it is not only destructive but also very as tedious as ever. I know there are some available plugins for eclipse which are being used for obfuscation. But it is not acceptable because it is needed to write down a configuration file.

At length I got a tool named [Zelix](http://www.zelix.com) and working well according my requirements. But it can't perform all jar, it is giving some exceptions while analyzing classes and finally ceased to obfuscate.

Anybody can suggest me any other tool which will be better and can perform for all jar. I'm keenly waiting for your reply.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-23T19:04:28.477

以下是一些不错的 Jar 混淆器：

*   [临卫](http://proguard.sourceforge.net/)
*   [yGuard](http://www.yworks.com/en/products_yguard_about.html)
*   [JShrinker](http://www.e-t.com/jshrink.html)
*   [咖啡宝贝](http://home.comcast.net/~shvets/Programs/Tools/CafeBabe/)

[这](https://www.owasp.org/index.php/Bytecode_obfuscation)是一篇关于混淆的文章，展示了如何使用 Pro Guard 和 CafeBabe 。[这](http://docs.yworks.com/yfiles/doc/developers-guide/yGuard_obfuscation.html)是一个 yGuard 示例。由于它的 GUI 界面，JShrinker 相对更容易（因此我没有寻找任何教程）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T07:21:43.317

我已经在几个大型项目中成功使用了 Zelix，其中有数千个类被混淆。当 Zelix 无法找到您可能直接或间接引用的某些第三方类时，它可能会失败。您可以尝试排除无法混淆的类/包，或者告诉在哪里可以找到所有第三方 jar（如果它失败了）

在 Zelix 配置脚本中添加

```
exclude com.abc.Myclass; 
```

或者

```
fixedClasses com.abc.MyClass; 
```

添加第三方罐子

```
classpath   

"e:/META-INF/ant-1.5.1.jar"
"e:/META-INF/spring.jar"
"e:/META-INF/commons-io.jar"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T04:43:22.933

I used proguard that is very friendly. If you are using its GUI version is a very user friendly. You can use this software GUI very easily by running the giu jar of Proguard.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T04:33:51.400

混淆工具可能对您的项目有用。但是没有任何混淆工具可以满足您的需求。我提供了一个选项[JavaGuard](http://freecode.com/projects/javaguard) 。但它不确定您是否想要。

# c# - 使用 TimeStamp_Sys100NS 的负 CPU 使用率

> ID：11538640
> 
> 赞同：2
> 
> 时间：2012-07-18T09:48:05.853
> 
> 标签：c#, wmi, wql

我过去看过[WMI、负 CPU 使用值和 Timestamp_Sys100NS，](https://stackoverflow.com/questions/8267981/wmi-negative-cpu-usage-value-and-timestamp-sys100ns-in-past)但我没有做任何事情，只有两个读数之间的增量时间。

当 CPU 使用率非常低时，即系统空闲进程显示为 99%，我得到负 CPU 使用率读数。

我已经改编了 MSDN 文章中的代码和公式，但不知道为什么它可能是错误的。

[http://msdn.microsoft.com/en-us/library/aa392397%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa392397%28VS.85%29.aspx)

底部注释掉的行只给了我 0 或 100 的结果，我认为这是因为整数舍入或类似的东西，所以我在除法之前把它分成单独的部分作为双打。

```
 ulong N1 = 0;
        ulong D1 = 0;
        ulong N2 = 0;
        ulong D2 = 0;

        ManagementScope scope = new ManagementScope("\\\\" + Machine + "\\root\\cimv2");
        scope.Connect();

        WqlObjectQuery wqlQuery = new WqlObjectQuery("SELECT PercentProcessorTime, TimeStamp_Sys100NS FROM Win32_PerfRawData_PerfOS_Processor Where Name = '_Total'");
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, wqlQuery);

        foreach (ManagementObject proc in searcher.Get())
        {
            N1 = ulong.Parse(proc.Properties["PercentProcessorTime"].Value.ToString());
            D1 = ulong.Parse(proc.Properties["TimeStamp_Sys100NS"].Value.ToString());
        }

        System.Threading.Thread.Sleep(500);

        foreach (ManagementObject proc in searcher.Get())
        {
            N2 = ulong.Parse(proc.Properties["PercentProcessorTime"].Value.ToString());
            D2 = ulong.Parse(proc.Properties["TimeStamp_Sys100NS"].Value.ToString());
        }

        double cpu = N2 - N1;
        double time = D2 - D1;
        var x = (1 - (cpu / time)) * 100;
        //var x = (1 - ((N2 - N1) / (D2 - D1))) * 100;
        context.Response.Write(x); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:24:57.277

我遇到了完全相同的问题，我在示例中使用 Perl，但是您在下面看到的逻辑是相同的，我使用了[该 Microsoft 文档](http://technet.microsoft.com/en-us/library/cc757283%28WS.10%29.aspx)中描述的公式。

```
$average = (1 - ( ($n2-$n1) / ($d2-$d1) ) ) * 100; 
```

我试图解决这个问题好几天，但最后我只是选择了最明显的解决方案：

```
if ($average <0) { $average = 0; } 
```

最后，如果 CPU 非常低，没有人真正关心。就我而言，我正在寻找负载峰值和远程负载。也许你对我不知道的小变化感兴趣，对我来说 1% 或 0% 是完全一样的。

# c# - The ObjectContext instance has been disposed and can no longer be used for operations that require a connection

> ID：11538644
> 
> 赞同：0
> 
> 时间：2012-07-18T09:48:30.757
> 
> 标签：c#, entity-framework

Im using a seperate business logic class to get my Data Object from the database,

```
public partial class HelperUsers
{
    public User GetUser(string Username, string Password)
    {

        using (var myEntities = new BusinessLogic.Entities())
        {
            var query = (from u in myEntities.Users
                         join link in myEntities.linkUserPhoneNumbers on u.UserId equals link.UserId
                         join p in myEntities.PhoneNumbers on link.PhoneNumberId equals p.PhoneNumberId
                         where u.UserName == Username && u.Password == Password
                         select u).ToList();

            if (query.Any())
                return (User)query[0];
        }
        return null;

    }
} 
```

This works well however when using on my calling page

```
 protected void btnLoad_OnClick(object sender, EventArgs e)
  {
        HelperUsers helper = new HelperUsers();
        var myUser            helper.GetUser("username", "password")
        // This works fine 
        lblUserName.Text =  myUser.Username
        // If i try to read one of the child objects from the join it returns an error
        if (myUser.linkUserPhoneNumbers.Any())
        {
            //do something
        }
  } 
```

The error i get is

```
 The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

Anyone know a way around this, so that i can access all the info in my user object.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:57:39.523

如果您使用此声明：

```
using (var myEntities = new BusinessLogic.Entities()) 
```

然后你不能使用 myUser.linkUserPhoneNumbers.Any() 因为 linkUserPhoneNumbers 没有加载并且上下文被释放。您需要在查询中包含 linkUserPhoneNumbers 或保持上下文未处理。看这里：http: [//msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

# git - Simultaneously git add -p and git checkout -p

> ID：11538650
> 
> 赞同：20
> 
> 时间：2012-07-18T09:48:39.133
> 
> 标签：git

I'm manually reviewing a huge number of changes (in the 1000s) made by a search and replace script over some message catalogs. At the moment I'm doing `git add -p`, but I keep taking breaks to check other files or adjust the script, so I'm alternating that with `git checkout -p` to discard the changes I don't want. Is there a way to combine the two? I.e. for each hunk I want the option to stage it, or discard it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-13T16:20:09.150

如果您使用的是 Windows 或 Mac OS，您可以使用免费[的 SourceTree](https://www.sourcetreeapp.com/) GUI 应用程序，该应用程序允许您在差异视图中暂存或丢弃每个块（甚至从每个块中选择行）。

[![阶段/丢弃大块](../Images/f8c19c8f159325a3a5cb32117cc224e0.png)](https://i.stack.imgur.com/qaBQQ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T11:05:37.543

how about typing `j - leave this hunk undecided, see next undecided hunk` for hunks which you don't want to stage, and after all of these, run `git checkout --`, then those hunks selected will be staged, and other discarded.

when you are using `git add -p`, typing `?` will show the help

```
Stage this hunk [y,n,q,a,d,/,e,?]?
y - stage this hunk
n - do not stage this hunk
q - quit, do not stage this hunk nor any of the remaining ones
a - stage this and all the remaining hunks in the file
d - do not stage this hunk nor any of the remaining hunks in the file
g - select a hunk to go to
/ - search for a hunk matching the given regex
j - leave this hunk undecided, see next undecided hunk
J - leave this hunk undecided, see next hunk
k - leave this hunk undecided, see previous undecided hunk
K - leave this hunk undecided, see previous hunk
s - split the current hunk into smaller hunks
e - manually edit the current hunk
? - print help 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T11:22:04.873

你看过**git gui**吗？这是一个与 git 捆绑在一起的实用程序，它试图让复杂的操作变得容易，这些操作混合了暂存和结帐。你可以[在这里阅读](https://git-scm.com/docs/git-gui)

您可以选择执行一个大块并放弃其余的更改。通过这样做`ctrl + j`，`cmd + j`您可以签出所选文件。

我知道从 shell 中使用 git 会快得多，但在像这样的复杂情况下，在不同命令之间切换会成为一种开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-13T16:06:04.823

这与 Git 2.28（2020 年第三季度）更接近！
以前，“ `git checkout -p`”根本不处理新添加的路径。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 2c8bd84](https://github.com/git/git/commit/2c8bd8471a6abc68064dafc743362547fc730f77)（2020 年 5 月 27 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 2bdf00e](https://github.com/git/git/commit/2bdf00e66ae501c417fa33f887f2c60ef8719b2a))^(中，2020 年 6 月 9 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## [`checkout -p`](https://github.com/git/git/commit/2c8bd8471a6abc68064dafc743362547fc730f77): 正确处理新文件
> 
> ^(报告人：Merlin Büge)
> ^(帮助人：Jeff King)
> ^(签字人：Johannes Schindelin)
> 
> 最初的补丁选择代码是为 编写的`git add -p`，它工作的基本单元是一个大块。
> 
> 我们绕过它来处理[24ab81ae4d](https://github.com/git/git/commit/24ab81ae4d12c81076da256b3f9cdde45277f126)中的删除（“ `add-interactive`：处理空文件的删除”，2009-10-27，Git v1.6.6-rc0 -- [merge](https://github.com/git/git/commit/3176bd0b0da232207df99802bd714f51bc10f153)）。
> 但`git add -p`永远不会看到新文件，因为我们只考虑索引中跟踪的文件集。
> 
> 但是，由于`git checkout -p`&friends 使用了相同的机器，我们可以看到新文件。
> 
> 专门处理这个案例，为其添加一个仿照`deleted file`案例的新提示。
> 
> 这也解决了添加的`_empty`_ 文件无法通过`git checkout -p`.

所以现在的提示`git checkout -p`包括：

```
Discard mode change from worktree [y,n,q,a,d%s,?]?
Discard deletion from worktree [y,n,q,a,d%s,?]?
Discard addition from worktree [y,n,q,a,d%s,?]?     <===
Discard this hunk from worktree [y,n,q,a,d%s,?]? 
```

如果你丢弃你不想要的东西，并提交你需要的东西，那么 a[`git add $(git ls-files -o --exclude-standard)`](https://stackoverflow.com/a/15761947/6309)将添加新的剩余文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-18T11:28:05.987

暂存您需要的所有内容，提交然后重置或存储以清理工作目录以摆脱您不需要的内容。

# asp.net-mvc-3 - 如何在 MVC3 中将数据绑定到 DropDownList？

> ID：11538654
> 
> 赞同：0
> 
> 时间：2012-07-18T09:49:14.653
> 
> 标签：asp.net-mvc-3, html-select

我想将数据库中的数据绑定到 DropDownList ，我尝试了以下方法，但数据未绑定到下拉列表，谁能告诉我我在哪里做错了

这是我的控制器

```
 [AcceptVerbs(HttpVerbs.Get)]
         public ActionResult AddNew()
          {
        ViewBag.RoleName = new SelectList(GetRoles(), "RoleID", "RoleName");
        return View();
        }
        public List<SelectListItem> GetRoles()
       {
        var roles = new List<SelectListItem>();
        SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand Cmd = new SqlCommand("Select GroupId,EmplopyeeRole from  EmployeeGroup", conn);
        conn.Open();
        SqlDataAdapter da = new SqlDataAdapter(Cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);         
            for (int i = 0; i <= ds.Tables[0].Rows.Count-1; i++)
            {
                var model = new ResourceModel();
                model.RoleId = Convert.ToInt16(ds.Tables[0].Rows[i]["GroupId"]);
                model.RoleName = ds.Tables[0].Rows[i]["EmplopyeeRole"].ToString();
            }          
        conn.Close();
        return roles;
    } 
```

这是我的模型

```
 public class ResourceModel
{
    public static List<ResourceModel> GetList { get; set; }
    public Int16 EmployeeId { get; set; }
    public string EmployeeName { get; set; }
    public string EmployeeEmailId { get; set;}
    public string GroupName { get; set; }
    public string EmployeePassword { get; set; }

    public static List<SelectListItem> GetRoles { get; set; }
    public int RoleId { get; set; }
    public string RoleName { get; set; }      

} 
```

这是我的 aspxPage

```
 <%:Html.DropDownList("RoleName")%> 
```

当我放一个断点并看到我在 GetRoles 方法中有数据时..谁能告诉我我在哪里做错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:25:54.003

我想问题是您在模型中有一个名称为属性的属性，`RoleName`并且您在`ViewBag`.

所以在使用`<%:Html.DropDownList("RoleName")%>`的时候会有一种混乱。

我建议`ViewBag.RoleName`换成类似的东西`ViewBag.Roles`然后尝试，

`<%:Html.DropDownList("Roles")%>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:12:00.783

在 for 循环中，使用`roles.add(new SelectList{.Value=i, .Text=i});`字段而不是`i`

在视图页面使用`<%: Html.DropDownList("RoleName", New SelectList(youClass.GetRoles, "Value", "Text"))%>`和youClass导入页面。

linq 和 foreach 也好用~和Develop作为一个合适的扩展方式。

# asp.net - 我想在不使用验证或 javascript 的情况下检查文本框是否有多个小数点（在 gridview 中）

> ID：11538658
> 
> 赞同：1
> 
> 时间：2012-07-18T09:49:44.263
> 
> 标签：asp.net, gridview, textbox

我想在不使用验证或 javascript 的情况下检查文本框是否没有超过一个小数点（在 gridview 中），

我想在 textchanged 上检查这个...

我一直在验证，过滤 ajax 扩展器和所有这些，但我在这里

```
 protected void txtqty_TextChanged(object sender, EventArgs e)
        {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:34:50.177

给你...

```
using System.Text.RegularExpressions;

protected void txtqty_TextChanged(object sender, EventArgs e)
{

  decimal number;
  string value = txtqty.Text;

  if (decimal.TryParse(value, out number))
  {
    Regex rx = new Regex(@"[0-9]*\.?[0-9]*");

    if (!rx.IsMatch(value))
    {
      Response.Write("error");
    }
    Response.Write("good");
  }
  else
  {
    Response.Write("error");
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T04:26:57.247

```
Dim number As String = CType(BOMGridView.Rows(e.RowIndex).FindControl("editSpareFac"), TextBox).Text.ToString

If Regex.IsMatch(number, "^[0-9]+\.[0-9]$") Then
   SpareFac = CType(CType(BOMGridView.Rows(e.RowIndex).FindControl("editSpareFac"), TextBox).Text, Double)
Else
   lblErr.Text = "Special characters and alphabets are not allowed !!"
   Exit Sub
End 
```

# datamapper - 在 mule ee 3.3.0 上找不到数据映射器

> ID：11538659
> 
> 赞同：2
> 
> 时间：2012-07-18T09:49:49.980
> 
> 标签：datamapper, mule

我正在使用 mule ee 3.3.0 实现一个项目，我想使用数据映射器。供您参考，我不使用 MuleStudio。我正在使用实际的 Eclipse 和 Mule IDE 插件。一切正常，但我不能使用新的数据映射器功能。我没有在 Mule 库（ mule-enterprise-standalone-3.3.0 ）上找到任何数据映射器包，并且您的网站上也没有架构定义文件（应该类似于[http://www.mulesoft. org/schema/mule/e](http://www.mulesoft.org/schema/mule/e) ...）。

我错过了什么吗？

PS：我也在 MuleSoft 论坛上发布了这个问题，但我很想解决这个问题： [原始帖子](http://forum.mulesoft.org/mulesoft/topics/data_mapper_not_found_on_mule_ee_3_3_0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T17:47:39.750

在 3.3 MuleStudio 中首次亮相，但仍然没有 DataMapper。DataMapper 直到 3.4 才发布。

# java - 如何从 Neo4j Graph 中获取每个节点的不同中心性索引？

> ID：11538660
> 
> 赞同：0
> 
> 时间：2012-07-18T09:49:51.633
> 
> 标签：java, graph, social-networking, neo4j, sna

我正在做一个关于社交网络分析的伟大项目。我的目标是为图中的每个节点获取不同的中心性索引。我需要分析图表并从中得出一些有意义的完整信息。我正在为这个项目使用 Neo4J 图形数据库（社区版 1.8.M06）。而且我对 Neo4J 很陌生，只有两周的经验。

现在我的图表是一个友谊图表，所以我在图表中唯一的关系是友谊，这是相互的。该图是无向的、未加权的和单纯形的。很快我将在图中添加其他关系和对象，这会使它变得复杂。

我知道 Neo4J 有一个范围图算法的实现来测量中心性，我从这个[链接](http://grepcode.com/file/repo1.maven.org/maven2/org.neo4j/neo4j-graph-algo/1.8.M01/org/neo4j/graphalgo/impl/centrality/EigenvectorCentrality.java#EigenvectorCentrality)中得到了这些信息。但是我找不到任何关于如何使用它们来获得中心性度量的信息或示例。我也明白这些算法还[没有准备好生产](http://components.neo4j.org/neo4j-graph-algo/1.8.M06/)。

有没有人尝试过与 Neo4J 类似的东西？是否可以仅使用 Neo4J 来做到这一点？如果不能，我可以使用 R 编程语言从 Neo4J 获取 Centrality 索引吗？

我尝试将 R 与 igraph 包一起使用以从边缘列表中获取中心性。我想我可以使用 R 使用 REST API 访问 Neo4J。

我还发现了一些关于使用通用图算法解决[最短路径问题](http://docs.neo4j.org/chunked/snapshot/tutorials-java-embedded-graph-algo.html)的示例。但是没有获取中心性索引的直接示例。从一个例子中学习似乎是一个完美的主意。

谢谢，
迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:42:14.463

中心性算法的使用不如最短路径算法多，但您应该能够测试它们。它们的主要特点是随着图形的增长它们可能会变慢，因为它们需要详尽的遍历。你的图有多大？

# haskell - Emacs主提示中的函数名称自动完成 - haskell模式

> ID：11538662
> 
> 赞同：4
> 
> 时间：2012-07-18T09:50:03.687
> 
> 标签：haskell, emacs, haskell-mode

我正在通过 emacs 编写一个 .hs (haskell) 文件并使用“加载文件”(Cc Cl) 加载它。

为了测试功能，我切换到主提示窗口 (Cx o)，我需要在其中输入完整的功能名称。我确信必须有一种方法可以通过自动完成来获取函数名称，但我不知道该怎么做并且找不到？

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:20:20.263

这个答案在**绝**地对这个问题的评论中找到。

在主提示窗口中，如果您需要，说功能“doubleMe”，只需键入初始 2-3 个字母，如“dou”，然后按 Meta-/（元键或 Alt 键和斜杠一起）；您将找到自动完成的函数名称。在这种情况下 - “doubleMe”。

如果缓冲区和周围有多个函数名称或其他单词；以“dou”开头，然后继续按 Meta-/ ，直到找到所需的名称。

请注意，此功能适用于所有窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:47:02.757

是的。我使用 imenu.el

对于 C 语言，有很多可能性。

预计 imenu 应该适用于所有可能的语言。

# cross-platform - 暴雪等公司如何为 Mac 和 PC 制作暗黑破坏神？

> ID：11538663
> 
> 赞同：0
> 
> 时间：2012-07-18T09:50:18.603
> 
> 标签：cross-platform

Mac 程序是用 Objective-C 编写的。PC 程序是用 C# 或 vb.net 编写的。

那么暴雪只是制作了两个程序吗？

他们是否用 C++ 等通用语言实现其核心逻辑？

他们具体是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:12:00.410

> Mac 程序是用 Objective-C 编写的。PC 程序是用 C# 或 vb.net 编写的。

该声明似乎是您误解的途径，大多数平台不受特定语言的约束，但是，某些语言比其他语言更容易跨平台使用。

说到暴雪，我知道他们已经使用 Qt 编写了他们的启动器，使它们跨平台。另一方面，游戏本身依赖于用语言（C、C++ 和 x86 程序集）组合编写的旧游戏，但现在它似乎主要是 C++（注意：这是来自他们二进制文件中的许多 RCE，而不是从任何官方声明或任何东西）。

话虽如此，由于使用了不同的图形 API（DirectX 与 OpenGL）以及不同的操作系统功能，这些游戏并不是真正*的跨平台兼容。*

# php - 如何制作 GIF 图像的动画缩略图？

> ID：11538664
> 
> 赞同：3
> 
> 时间：2012-07-18T09:50:24.017
> 
> 标签：php, gd, thumbnails

我已经尝试了一切来获取缩略图的动画 GIF，但我失败了。如果原始图像是动画 GIF，我怎样才能使缩略图也成为动画？我正在使用 PHP 和 GD 库。

这是我的缩略图 PHP 代码：

```
function upload_thumb($photo_dest, $file_maxdim = "60") {
      // SET DESIRED WIDTH AND HEIGHT
    $x = 0;
    $y = 0;
      $width = $this->file_width;
      $height = $this->file_height;
      if($width > $height)
    { 
        $x = ceil(($width - $height) / 2);
        $width = $height;
      }
    elseif($width < $height)
    {
        $y = ceil(($height - $width) / 2);
        $height = $width;
      }

      // RESIZE IMAGE AND PUT IN USER DIRECTORY
      switch($this->file_ext)
    {
        case "gif":
        case "x-gif";
          $file = imagecreatetruecolor($file_maxdim, $file_maxdim);
          $new = imagecreatefromgif($this->file_tempname);
          $kek=imagecolorallocate($file, 255, 255, 255);
          imagefill($file,0,0,$kek);
          imagecopyresampled($file, $new, 0, 0, $x, $y, $file_maxdim, $file_maxdim, $width, $height);
          imagegif($file, $photo_dest, 100);
          ImageDestroy($new);
          ImageDestroy($file);
          break;

        case "bmp":
          $file = imagecreatetruecolor($file_maxdim, $file_maxdim);
          $new = $this->imagecreatefrombmp($this->file_tempname);
          for($i=0; $i<256; $i++) { imagecolorallocate($file, $i, $i, $i); }
          imagecopyresampled($file, $new, 0, 0, $x, $y, $file_maxdim, $file_maxdim, $width, $height); 
          imagejpeg($file, $photo_dest, 100);
          ImageDestroy($new);
          ImageDestroy($file);
          break;

        case "jpeg":
        case "jpg":
          $file = imagecreatetruecolor($file_maxdim, $file_maxdim);
          $new = imagecreatefromjpeg($this->file_tempname);
          for($i=0; $i<256; $i++) { imagecolorallocate($file, $i, $i, $i); }
          imagecopyresampled($file, $new, 0, 0, $x, $y, $file_maxdim, $file_maxdim, $width, $height);
          imagejpeg($file, $photo_dest, 100);
          ImageDestroy($new);
          ImageDestroy($file);
          break;

        case "png":
        case "apng";
        case "x-png";
        $photo_dest=strtolower($photo_dest);
        $photo_dest=str_replace("jpg","png",$photo_dest);
        $file = imagecreatetruecolor($width, $height);
        $new = imagecreatefrompng($this->file_tempname);
        imagealphablending($file,false);
        imagesavealpha($file,true);
        $transparent = imagecolorallocatealpha($file, 255, 255, 255, 127);
        imagefilledrectangle($file, 0, 0, $width, $height, $transparent);
        imagecopyresampled($file, $new, 0, 0, 0, 0, $width, $height, $this->file_width, $this->file_height);
        imagepng($file, $photo_dest);
        ImageDestroy($new);
        ImageDestroy($file);
        break;
      } 

      chmod($photo_dest, 0777);

      return true;
    } 
```

# php - 创建或转换 TinyMCE 下拉工具栏菜单

> ID：11538667
> 
> 赞同：2
> 
> 时间：2012-07-18T09:50:34.187
> 
> 标签：php, javascript, plugins, tinymce

我一直在尝试在我的 TinyMCE jQuery 版本中实现这个插件：

[http://www.tinymce.com/tryit/menu_button.php](http://www.tinymce.com/tryit/menu_button.php)

此示例使用 TinyMCE 加载插件，但不适用于 jQuery。

我想做的是将它创建为一个单独的 TinyMCE 插件，但我不确定如何实现。使用 TinyMCE 创建插件的教程都是关于对话框窗口的，但这不是我需要的，因为我只想有一个小片段的下拉菜单，它将添加到光标所在的位置。

谁能指出我的一些例子，它展示了如何创建这样一个工具栏下拉菜单？我疯狂地浏览了谷歌，找不到任何类似的东西，而且我上面发布的示例在技术上不是插件，因为我需要使用 PHP 生成内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:16:07.783

这项任务并不容易（也必须努力完成此任务）。您需要在自己的自定义插件之一中设置函数 createControl。我将向您展示我自己的插件之一的一些代码，它应该为您指明正确的方向

```
 /**
     * Creates control instances based in the incomming name. This method is normally not
     * needed since the addButton method of the tinymce.Editor class is a more easy way of adding buttons
     * but you sometimes need to create more complex controls like listboxes, split buttons etc then this
     * method can be used to create those.
     *
     * @param {String} n Name of the control to create.
     * @param {tinymce.ControlManager} cm Control manager to use inorder to create new control.
     * @return {tinymce.ui.Control} New control instance or null if no control was created.
     */
    // Creates a custom listbox
    createControl: function(n, cm) {

        switch (n) {
            // you may define more than one listbox here!
            // make sure this string is in your buttonconfig
            case 'my_new_listbox':

                var listboxIdPart = 'my_new_listbox';

                // Listbox erzeugen
                var ctrl = cm.createListBox(listboxIdPart, {
                title : 'Title',

                    // v could be 'value1_here' or "value2_here", it isbest to use simple numers as values
                    //need to specify what shall happen depending on the value
                  onselect : function(v) {

                    if (v == 0){
                        return;
                    }
                    else {
                                              // alert('value choosen:' + v)
                                              // your actions here
                      return;
                      }                     
                  }
                }); // closing bracket

                                    // Add entries to the dropdown
                ctrl.add('entry1', 'value1_here');
                ctrl.add('entry2', 'value2_here');
                ctrl.add('entry3', 'value3_here');

                // Return new listbox
                return ctrl;
        }
        return null;
    }, 
```

# java - 获取在计算机上使用 Java 安装的软件列表

> ID：11538672
> 
> 赞同：5
> 
> 时间：2012-07-18T09:50:50.973
> 
> 标签：java

如何获得已安装软件的列表及其 Java 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:59:04.293

StackOverflow 上还有[另一个问题，](https://stackoverflow.com/questions/6860968/check-for-installed-program-on-windows-using-java)用于检查特定软件的存在。

您可以列出所有具有

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall 
```

在开始时，然后将此文件路径末尾的任何内容作为软件的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T11:18:27.430

我认为以下代码可能会对您有所帮助。我是 java 新手，所以如果有任何更改，请编辑我的代码。

```
import java.io.IOException;
import java.io.InputStream;
import java.io.StringWriter;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;

public class getInstalledAppList {

  private static final String REGQUERY_UTIL = "reg query ";
  private static final String REGSTR_TOKEN = "REG_SZ";
  static String s = REGQUERY_UTIL + "HKEY_LOCAL_MACHINE\\Software"
                    + "\\Microsoft\\Windows\\CurrentVersion\\Uninstall";

public static String getCurrentUserPersonalFolderPath() {
    try {
      Process process = Runtime.getRuntime().exec(s);
      StreamReader reader = new StreamReader(process.getInputStream());

      reader.start();
      process.waitFor();
      reader.join();

      String result = reader.getResult();
      int p = result.indexOf(REGSTR_TOKEN);

      if (p == -1)
         return null;

      return result.substring(p + REGSTR_TOKEN.length()).trim();
    }
    catch (IOException | InterruptedException e) {
      return null;
    }
  }

  static class StreamReader extends Thread {
    private final InputStream is;
    private final StringWriter sw;

    StreamReader(InputStream is) {
      this.is = is;
      sw = new StringWriter();
    }

    @Override
    public void run() {
      try {
        int c;
        while ((c = is.read()) != -1)
          sw.write(c);
        }
        catch (IOException e) { e.printStackTrace(); }
      }

    String getResult() {
      return sw.toString();
    }
  }

  public static void main(String s[]) {

      getDisplayNameDword( getCurrentUserPersonalFolderPath()  );
  }

  private static void getDisplayNameDword(String str){

      Set<String> set = new HashSet<>();

      String [] array = new String[500];

      array = str.split("\n");

      for(String i : array){

          set.add( getName(i.trim()) ); 

      }

      Iterator i = set.iterator();

      while(i.hasNext()){

          System.out.println( i.next() );

      }

  }

  private static String getName(String s){
  Process process = null;
  try {
            // Run reg query, then read output with StreamReader (internal class)
             process = Runtime.getRuntime().exec("reg query " + 
                    '"'+ s + "\" /v " + "DisplayName");

            StreamReader reader = new StreamReader(process.getInputStream());
            reader.start();
            process.waitFor();
            reader.join();

            // Parse out the value
            String[] parsed = reader.getResult().split(REGSTR_TOKEN);
            if (parsed.length > 1) {
            return  (parsed[parsed.length-1]).trim();
            }

       } catch (IOException | InterruptedException e) {
           e.printStackTrace();
       }
  return null;
  }
} 
```

或使用 psinfo.exe 在 windows 中获取已安装的应用程序列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-17T11:53:27.270

我写了一个小库（[JavaListApps](https://github.com/drone-ah/JavaListApps)），它基于[ListPrograms](https://github.com/mavenlin/ListPrograms)执行此操作，而 ListPrograms又基于 从[StackOverflow Post](https://stackoverflow.com/questions/802499/how-can-i-enumerate-list-all-installed-applications-in-windows-xp/9757013#comment22371865_9757013) 链接 的[VB 脚本](http://www.vbforums.com/showthread.php?598355-Example-of-how-to-get-a-list-of-installed-programs-(like-Add-and-Remove-Programs))

我的需求有点有限，所以与 C++ 版本相比，还有未实现的部分。

# java - Java标记一个字符串

> ID：11538676
> 
> 赞同：2
> 
> 时间：2012-07-18T09:51:02.053
> 
> 标签：java, regex

我想标记以下字符串。“我和马克的兄弟一起回家玩电子游戏。” 结果应该是这样的。

```
I
went
home
with
Mark
'
s
brother
to
,
play
a
video
game
. 
```

你能告诉我如何使用正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:01:56.570

如果你真的想要`,`,`.`并且`'`作为单独的标记，你可以这样拆分：

```
String str = "I went home with Mark's brother, to play a video game.";
String[] tokens = str.split("(\\s|(?=[,.'])|(?<=[,.']))"); 
```

# jquery - jQuery：选择一个选项值并使复选框名称跟随

> ID：11538681
> 
> 赞同：0
> 
> 时间：2012-07-18T09:51:08.417
> 
> 标签：jquery

这是我的目标，但这只是静态的：

[http://jsfiddle.net/ySu7q/](http://jsfiddle.net/ySu7q/)

我希望使其动态化，因此下面的相关复选框遵循您在选择框中选择的值。

当您在当前的“18:00”选择框中选择并将其更改为另一个例如 19:00 时，我想这样做 - 然后下面的复选框应该跟随并更改为 1900，显示文本和名称都应该从`copyTime[1][1800]`到`copyTime[1][1900]`

我怎样才能做到这一点？我不知道从哪里开始，也许应该重写当前代码的结构以使其成为可能？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:01:56.843

我创建了一个可能的解决方案：

```
$('select').change(function(){
    var $this = $(this),
        time = $this.val(),
        $checkbox = $('#'+$this.attr('data-checkbox')),
        $checkbox_label = $('label[for="'+$this.attr('data-checkbox')+'"]');

    $checkbox.attr('name', 'copyTime[1]['+time+']');
    $checkbox_label.text(time);
});​​​​ 
```

[http://jsfiddle.net/ySu7q/1/](http://jsfiddle.net/ySu7q/1/)

绝对不完美，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:59:17.410

```
$(".select").change(function() {
    if($(this).is(":first-child"))
        $(".label:first-child").html($(this).val());
    else if($(this).is(":last-child"))
        $(".label:last-child").html($(this)val());
    else
        $(".label").eq(1).html($(this).val);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:02:53.263

你可以试试这个：

[http://jsfiddle.net/ySu7q/2/](http://jsfiddle.net/ySu7q/2/)

这是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:26:17.567

所以：

使用这种方式来复选框：

```
<input type="checkbox" name="copyTime[1][1800]" value="1" CHECKED> <span>1800</span> 
```

这是JS：

```
$('select').on('change', function(){

    var ind = $(this).index();
    var newVal = $(this).val().replace(':', '');
    //alert($("input:checkbox").eq(ind).attr('name'));
    $("input:checkbox").eq(ind).attr('name', 'copyTime[1]['+newVal+']');
    $("input:checkbox").eq(ind).next('span').html(newVal);

}); 
```

这是[小提琴](http://jsfiddle.net/epCbv/)

# iphone - iphone中的nslog图像名

> ID：11538683
> 
> 赞同：2
> 
> 时间：2012-07-18T09:51:11.427
> 
> 标签：iphone, objective-c, ios, arrays

我有一个`NSArray`图像。图像名称为 A、B、C、D。我需要`NSLog`从数组中获取这些图像的名称

```
NSLog(@"Name == %@", [Array objectAtIndex:1]); 
```

我必须用什么来代替这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T09:55:35.390

A`UIImage`不存储其文件名，如果您想跟踪创建它们的文件的名称，您也需要存储它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:01:53.230

正如wattson所建议的那样，这是不可能的。为此，您需要使用另一个数组，您可以在其中保存**imageName**。否则，您可以将**imageName**`NSMutableDictionary`保存为键，将**Array**对象保存为您以后可以阅读的对象。

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:30:49.253

如果您使用连接的图像名称覆盖数组的“描述”方法，它可以正常工作。

在这种情况下，NSLog 的工作方式是向每个对象询问一个描述自身的字符串，并将 -description 方法发送给对象。（注意：如果一个对象没有覆盖 description 方法，你会得到继承自 NSObject 的 -description 实现，这往往是这样的。参见 UsingTheDescriptionMethod

**注意**：描述方法只能用于调试目的

问候。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T10:05:11.413

据我所知，您无法从`UIImage`对象中获取图像文件的名称。如果您确实想这样做，您可以将名称与图像一起存储到一个`NSDictionary`对象中：

```
NSArray * imageNames = [NSArray arrayWithObjects:@"A.png", @"B.png", @"C.png", nil];
NSMutableArray * array = [NSMutableArray arrayWithCapacity:[imageNames count]];
for (NSString * imageName in imageNames)
  [array addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                    [UIImage imageNamed:imageName], @"image", imageName, @"name", nil]]; 
```

然后你可以像这样记录它：

```
NSLog(@"name = %@", [[array objectAtIndex:1] valueForKey:@"name"]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T09:56:41.930

你不能。如果 A、B、C、D 是实例变量，那么它们是您唯一可以控制的，例如

```
if ((UIImage*)[Array Objectatindex:1] == A) 
   bla-bla-bla you know that it's "A" 
```

分配后，无法访问映像名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T09:56:29.353

如果你想`NSLog`整体`NSArray`使用这个：

```
NSArray *_array = // your array
NSLog(@"array == %@", _array); 
```

**更新：#1**

一种可用的方法如下，而不是仅用对象填充`NSMutableArray`，`UIImage`您应该将“NSDictionary”对象添加到`NSMutableArray`具有以下内容的对象，如下所示：

```
NSMutableArray *_array = [NSMutableArray array];

// you could put this part inside a loop if you like
NSString *_imagePathWithName = @"...";
UIImage *_newImage = [UIImage imageNamed:_imagePathWithName]; // when you load it from you application bundle
// or [UIImage imageWithContentsOfFile:_imagePathWithName]; // loading from other place
NSDictionary *_imageDictionary = [NSDictionary dictionaryWithObjectsAndKeys:_newImage, @"keyForUIImage", _imagePathWithName, @"keyForFullPathAndName", nil];
[_array addObject:_imageDictionary]; 
```

当您想从数组中读取名称时

```
for (NSDisctionary *_dictionary in _array) {
    UIImage *_image = (UIImage *)[_dictionary valueForKey:@"keyForUIImage"];
    NSString *_fullPathWithName = (NSString *)[_dictionary valueForKey:@"keyForFullPathAndName"];
    // do whatever you'd like with the images and the path
} 
```****

# windows-phone-7 - 如何在 windows phone 中捕获和上传视频？

> ID：11538684
> 
> 赞同：0
> 
> 时间：2012-07-18T09:51:13.750
> 
> 标签：windows-phone-7

我的应用程序要求是捕获相机视频并同时上传到（Facebook、Youtube）。我的问题是我们可以获取相机流和缓冲区，然后在捕获仍在进行时上传吗？

我现在可以捕获视频并将其存储在隔离存储中，但是如果不保存到隔离存储，我们可以直接上传吗？如果是，那怎么办？

-罗梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:19:57.397

这个问题有多个问题，所以这是我的答案：

*   没有*内置*方法可以将视频上传到 Facebook 和 Youtube 等网站。
*   上传视频需要大量带宽，因此在两个网站上同时上传可能需要用户有稳定的互联网连接（即 Wifi）
*   实时上传视频流似乎也很困难，因为手机必须同时捕获、可能压缩和发送流。不要忘记您正在打电话，资源有限。

我认为你能做的最好的是将视频流保存到独立存储中，一旦用户完成捕获，允许他上传视频。

# sorting - SAS：proc总结和proc排序

> ID：11538685
> 
> 赞同：0
> 
> 时间：2012-07-18T09:51:17.830
> 
> 标签：sorting, sas, proc

如果您将 proc summary 与类子句一起使用，它将按照此类子句的顺序对您的观察结果进行***排序***。

```
proc summary data=One;
   by var_1;
   class var_2 var_3 var_4;
   output out = Two(drop= _freq_ _type_);
run; 
```

1）我是对的吗？

2）如果我没有指定所有字段会发生什么？

```
proc summary data = Three(keep= var_1 var_2 var_ 3 var_4 var_5 var_6);
   by var_1;
   class var_2 var_3;
   output out = Four(drop= _freq_ _type_ );
run; 
```

3）哪个进程更快：`proc summary`或`proc sort`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:06:47.200

这里有几点需要注意。

*   为了保留相同数量的行，您需要在 proc 汇总语句中指定 nway 选项。没有它，您将获得类变量的每 1、2 和 3 个组合。
*   我不确定你为什么有 BY 语句（这显然表明数据已经按该变量排序）。您可以轻松地将 var_1 包含在 CLASS 语句中。
*   Proc Summary 将首先按照 BY 变量的顺序对输出进行排序，然后按照指定的顺序对 CLASS 变量进行排序。
*   无论保留哪些变量，此逻辑都适用。
*   Proc Sort 在这个简单的例子中应该工作得更快，因为 Proc Summary 将执行不需要的进一步计算。
*   我有时会使用 Proc Summary 一步来对数据进行排序和重复数据删除（使用 maxid 函数），例如，我每天有多个 ID，我只想获取最新的一个。这样就不必对数据进行排序，然后每个 ID 每天提取最后一条记录。

希望这可以帮助。

这是我最后一点的一个例子。使用`_all_`请求返回数据集中的所有变量，这确实会在日志中为之前在 CLASS 语句中列出的变量创建警告，但可以安全地忽略它。基本上我懒惰不想为宽数据集单独指定剩余的变量。

```
data have;
input unique_id custno log_dt :datetime15.;
format log_dt datetime15.;
cards;
1 123 01jul2012:13:23
2 265 01jul2012:13:56
3 342 01jul2012:15:02
4 123 01jul2012:17:12
5 342 01jul2012:18:33
6 265 02jul2012:08:41
7 123 02jul2012:10:14
8 265 02jul2012:11:05
;
run;

proc summary data=have nway;
class custno log_dt;
format log_dt dtdate9.;
output out=want (drop=_:) maxid(log_dt(_all_))=;
run; 
```

# pipe - 如何在 Yahoo Pipes 中连接、格式化然后再次拆分字符串

> ID：11538689
> 
> 赞同：0
> 
> 时间：2012-07-18T09:51:26.060
> 
> 标签：pipe, yahoo, yahoo-pipes

我正在尝试获取提要，然后使用 Yahoo Pipes 为每个条目添加一个字段。

为了获取我想添加的字段内容，我必须使用 Fetch Data (http://www.myserver.com/?get=author) 从我的服务器获取一些数据

但是，我想在一个请求（http://www.myserver.com/?get=author1-author2-author3）中获取所有条目的信息，而不是发出与条目数量一样多的请求。

我的问题是我不知道如何创建包含所有带有“-”分隔符的字段的字符串（author1-author2-author3 ...）。我尝试使用 Loop 进行实验，但没有成功。

此外，我找不到将获取的数据与条目连接的方法。Loop 似乎没有提供这样的功能。

我的饲料：

```
<item><author>author1</author></item>
<item><author>author2</author></item>
<item><author>author3</author></item> 
```

我想要达到的目标：

```
<item><author>author1</author><authorid>34</authorid></item>
<item><author>author2</author><authorid>54</authorid></item>
<item><author>author3</author><authorid>30</authorid></item> 
```

我不指望一个正在运行的管道，只是一个提示我该怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:07:36.040

如果您有 Web 服务器，为什么要使用 Yahoo Pipes 来加入数据？使用 PHP 执行服务器端会更容易。

或者..您可以使用带有正则表达式的*替换*模块并将提要作为字符串处理，但这可能会是一个丑陋的管道黑客作业。需要捐赠者供稿的 URL 和您的网站以提供进一步帮助。

# ant - antlib 和类路径引用

> ID：11538696
> 
> 赞同：2
> 
> 时间：2012-07-18T09:51:46.153
> 
> 标签：ant, classpath

我有以下 build.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Minimal" default="default" basedir="." xmlns:artifact="antlib:org.apache.maven.artifact.ant">
    <path id= "libs.folder" >
         <fileset dir= "lib" >
             <include name= "*.jar" /> 
         </fileset>
    </path>

    <typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="libs.folder" /> 
    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="libs.folder"/>
    <artifact:pom id="pom.file" file="pom.xml" />
    <property name="pom.version" value="${pom.file.version}"/>

   <groovy src="test.groovy">
    <arg line="3"/>
   </groovy>
... 
```

它位于以下结构中：

```
my-project
  -> lib
     -> maven-ant-tasks.jar
     -> svnant.jar
     -> groovy-all.jar
     -> svnClientAdapter.jar
  -> build.xml
  -> pom.xml
  -> test.groovy 
```

当我运行构建文件时，我得到：

```
BUILD FAILED
....\build.xml:18: Problem: failed to create task or type antlib:org.apache.maven.artifact.ant:pom
Cause: The name is undefined.
Action: Check the spelling. 
```

如果我运行：

```
ant -lib lib 
```

它可以工作，但最好将所有内容保存在 build.xml 文件中 - 就像 groovy 和 svnant 库一样。

maven-ant-tasks.jar 有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T07:26:37.777

将 maven-ant-tasks-2.xxjar 和 maven-ant-tasks-2.xxpom 复制到 /lib。

[http://search.maven.org/#search|ga|1|a%3A%22maven-ant-tasks%22](http://search.maven.org/#search|ga|1|a%3A%22maven-ant-tasks%22)

注意：在[http://maven.apache.org/ant-tasks/阅读更多内容](http://maven.apache.org/ant-tasks/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:56:33.903

当您使用：

```
xmlns:artifact="antlib:org.apache.maven.artifact.ant" 
```

如果没有 typedef，则其库必须位于 ANTS CLasspath 中。即`ANT_HOME/lib`或`${user.home}/.ant/lib`指定的任何文件夹`-lib`。这就是为什么`ant -lib lib`有效。

如果您将其更改为与其他 antlib 一样的 typedef，它将起作用。

```
<typedef resource="org/apache/maven/artifact/ant/antlib.xml"
           uri="antlib:org.apache.maven.artifact.ant"
           classpathref="libs.folder" /> 
```

# c++ - 如何通过 ctypes 从 dll 回调将 char ** 传递给 python 并将其返回给 dll？

> ID：11538699
> 
> 赞同：0
> 
> 时间：2012-07-18T09:52:04.373
> 
> 标签：c++, python, c, ctypes

这是 C/C++ 客户端调用：

```
char **ppCharOut;
char *pHello = "hello";
char *pWorld = "world";
ppCharOut = new char*[2];
ppCharOut[0] = pHello;
ppCharOut[1] = pWorld;
PythonCallback1FP(reinterpret_cast<int>(&ppCharOut), 2); 
```

和

```
char **ppCharIn;
PythonCallback2FP(&ppCharIn);
cout << ppCharIn[0] << " " << ppCharIn[1]; 
```

经过近一天的谷歌搜索，阅读晦涩的文档，玩代码和核心转储，这里是相应的 Python / ctypes 代码：

```
def PythonCallBack1FP(arg1, arg2):
    from ctypes import POINTER, cast, c_char_p
    ppChar = cast(arg1, POINTER(POINTER(c_char_p))).contents
    for i in xrange(arg2):
        print ppChar[i] 
```

和

```
def PythonCallback2FP(addressOfCharPP):
    from ctypes import POINTER, cast, c_char_p, pointer
    ArrayType = c_char_p * 2
    arrayOfCharPs = ArrayType()
    arrayOfCharPs[0] = "HELLO"
    arrayOfCharPs[1] = "BACK"
    charPP = pointer(arrayOfCharPs)
    ptr = cast(addressOfCharPP, POINTER(POINTER(ArrayType))
    ptr[0] = charPP 
```

希望这可以帮助某人...

# c# - C# 正则表达式。嵌套标签。匹配剧透并将其转换为 bbcode

> ID：11538701
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:52:08.447
> 
> 标签：c#, regex, tags, nested, bbcode

我有以下 html 代码，它的嵌套级别最高为 3：

```
<div class="sp-wrap">
    <div class="sp-body" title="FAQ">
        Some text
        <div class="sp-wrap">
            <div class="sp-body" title="title1"> // Level 2
            Text1...
            </div>
        </div>
        <div class="sp-wrap">
            <div class="sp-body" title="title2"> // Level 2
            Text2...
            </div>
        </div>
        <div class="sp-wrap">
            <div class="sp-body" title="title3"> // Level 2
            Text3...
            <div class="sp-wrap">
                <div class="sp-body" title="title4"> // Level 3
                Text4...
                </div>
            </div>
        </div>
    </div>
</div> 
```

我需要将 div 标签替换为 bbcode 并且我的正则表达式仅适用于未嵌套的剧透：

```
Regex.Replace(outstring, 
              @"<div class=""sp-body"" title=""(.*?)"">(.*?)</div>", 
              "[spoiler=$1]$2[/spoiler]", 
              RegexOptions.Singleline); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:03:08.137

您的代码的问题是它只会替换第一次出现和下一个最接近 /div 出现的 div

```
<div>                    // replaced
    <div>                // not replaced 
    </div>               // replaced
</div>                   // not replaced 
```

一种方法是将其加载到 XML 中，然后使用 XPATH 仅修改您感兴趣的节点。如果是 HTML，您还可以使用 HTML 解析器，然后使用 CSS 选择器。

您可以轻松地修改开始 div（通过匹配类），但是正则表达式无法知道哪个是相应的结束 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:03:33.747

没有测试，但这个想法应该有效：

```
string s1 = Regex.Replace(outstring, @"<div class=""sp-body"" title=""(.*?)"">", "[spoiler=$1]", RegexOptions.Singleline);
string s2 = Regex.Replace(s1, @"</div>", "[/spoiler]", RegexOptions.Singleline); 
```

**编辑：**

```
string s1 = Regex.Replace(outstring, @"<div class=""sp-wrap"">\s*<div class=""sp-body"" title=""(.*?)"">", "[spoiler=$1]", RegexOptions.Singleline);
string s2 = Regex.Replace(s1, @"</div>\s*</div>", "[/spoiler]", RegexOptions.Singleline); 
```

应该产生类似的东西

```
[spoiler=FAQ]
    Some text
    [spoiler=title1] // Level 2
        Text1...
        [/spoiler]
    [spoiler=title2] // Level 2
        Text2...
        [/spoiler]
    [spoiler=title3] // Level 2
        Text3...
        [spoiler=title4] // Level 3
            Text4...
            [/spoiler]
    [/spoiler]
</div> 
```

正如您所看到的，它的缩进并不完美（我猜可以修复）并检测到`</div>`示例中缺少一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:05:20.547

使用 Regex 方法尚未完全完成此任务。使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)解析 Html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:23:04.397

为您的正则表达式创建一个循环：

```
var rgx = new Regex(@"<div class=""sp-body"" title=""(.*?)"">(.*?)</div>");
while (rgx.IsMatch(outstring))
{
    outstring = rgx.Replace(outstring, "[spoiler=$1]$2[/spoiler]");
} 
```

# mysql - 带有 InnoDB 表的 MySQL 不断崩溃

> ID：11538705
> 
> 赞同：1
> 
> 时间：2012-07-18T09:52:12.167
> 
> 标签：mysql, database, crash, innodb, stack-trace

两天前，我打算使用[PRM为 MySQL Master 设置故障转移，然后……每个问题都从这里开始。](https://github.com/jayjanssen/Percona-Pacemaker-Resource-Agents/blob/master/doc/PRM-setup-guide.rst)

启动后`corosync`，MySQL 挂起，socket 文件丢失，我的第一个错误是做了一个`kill -9`.

无法恢复旧主人`innodb_force_recovery = 4`，我提升了奴隶成为主人，但它遇到了同样的问题。

这是我的配置。

```
[mysqld]
# Settings user and group are ignored when systemd is used (fedora >= 15).
# If you need to run mysqld under different user or group, 
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd
user=mysql

datadir=/data2/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

## Files
back_log            = 300
open-files-limit    = 8192
open-files          = 1024  
skip-external-locking
skip-name-resolve

## Logging
relay-log           = mysqld-relay-bin
relay-log-index     = mysqld-relay-bin.index
#log                = mysql-gen.log 
log_warnings
log_bin             = mysql-bin
#log_queries_not_using_indexes
max_binlog_size         = 256M  #max size for binlog before rolling
expire_logs_days        = 4 #binlog files older than this will be purged

## Per-Thread Buffers * (max_connections) = total per-thread mem usage
thread_stack            = 256K    #default: 32bit: 192K, 64bit: 256K
sort_buffer_size        = 1M      #default: 2M, larger may cause perf issues
read_buffer_size        = 1M      #default: 128K, change in increments of 4K
read_rnd_buffer_size    = 1M      #default: 256K                
join_buffer_size        = 1M      #default: 128K
binlog_cache_size       = 64K     #default: 32K, size of buffer to hold TX queries
## total per-thread buffer memory usage: 8832000K = 8.625GB

## Query Cache
query_cache_size        = 32M   #global buffer
query_cache_limit       = 512K  #max query result size to put in cache

## Connections
max_connections         = 2000  #multiplier for memory usage via per-thread buffers
max_connect_errors      = 100   #default: 10
concurrent_insert       = 2 #default: 1, 2: enable insert for all instances
connect_timeout         = 30    #default -5.1.22: 5, +5.1.22: 10
max_allowed_packet      = 32M   #max size of incoming data to allow

## Default Table Settings
sql_mode            = NO_AUTO_CREATE_USER

## Table and TMP settings
max_heap_table_size         = 1G    #recommend same size as tmp_table_size
bulk_insert_buffer_size     = 1G    #recommend same size as tmp_table_size
tmp_table_size                  = 1G    #recommend 1G min
#tmpdir                         = /data/mysql-tmp0:/data/mysql-tmp1 #Recommend using RAMDISK for tmpdir

## Table cache settings
table_cache             = 512   #5.0.x <default: 64>
table_open_cache        = 512   #5.1.x, 5.5.x <default: 64>

## Thread settings
thread_concurrency      = 16  #recommend 2x CPU cores
thread_cache_size       = 100 #recommend 5% of max_connections

## MyISAM Engine
key_buffer          = 1M    #global buffer
myisam_sort_buffer_size     = 128M  #index buffer size for creating/altering indexes
myisam_max_sort_file_size   = 256M  #max file size for tmp table when creating/alering indexes
myisam_repair_threads       = 4 #thread quantity when running repairs
myisam_recover          = BACKUP    #repair mode, recommend BACKUP 

## InnoDB Plugin Independent Settings
#innodb_data_home_dir            = /data2/var/lib/mysql
#innodb_data_file_path      = ibdata1:128M;ibdata2:10M:autoextend
#innodb_log_file_size       = 512M  #64G_RAM+ = 768, 24G_RAM+ = 512, 8G_RAM+ = 256, 2G_RAM+ = 128 
#innodb_log_files_in_group  = 4 #combined size of all logs <4GB. <2G_RAM = 2, >2G_RAM = 4
innodb_buffer_pool_size     = 32G   #global buffer
innodb_additional_mem_pool_size = 4M    #global buffer
innodb_status_file          #extra reporting
innodb_file_per_table           #enable always
innodb_flush_log_at_trx_commit  = 2 #2/0 = perf, 1 = ACID
innodb_table_locks      = 0 #preserve table locks
innodb_log_buffer_size      = 128M  #global buffer
innodb_lock_wait_timeout    = 60    
innodb_thread_concurrency   = 16    #recommend 2x core quantity
innodb_commit_concurrency   = 16    #recommend 4x num disks
#innodb_flush_method        = O_DIRECT     #O_DIRECT = local/DAS, O_DSYNC = SAN/iSCSI
innodb_support_xa       = 0        #recommend 0, disable xa to negate extra disk flush
skip-innodb-doublewrite

## Binlog sync settings
## XA transactions = 1, otherwise set to 0 for best performance
sync_binlog         = 1

## TX Isolation
transaction-isolation       = REPEATABLE-READ #REPEATABLE-READ req for ACID, SERIALIZABLE req XA

## Per-Thread Buffer memory utilization equation:
#(read_buffer_size + read_rnd_buffer_size + sort_buffer_size + thread_stack + join_buffer_size + binlog_cache_size) * max_connections

## Global Buffer memory utilization equation:
# innodb_buffer_pool_size + innodb_additional_mem_pool_size + innodb_log_buffer_size + key_buffer_size + query_cache_size

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

# Semisynchronous Replication
# http://dev.mysql.com/doc/refman/5.5/en/replication-semisync.html
# uncomment next line on MASTER
;plugin-load=rpl_semi_sync_master=semisync_master.so
# uncomment next line on SLAVE
;plugin-load=rpl_semi_sync_slave=semisync_slave.so

# Others options for Semisynchronous Replication
;rpl_semi_sync_master_enabled=1
;rpl_semi_sync_master_timeout=10
;rpl_semi_sync_slave_enabled=1

# http://dev.mysql.com/doc/refman/5.5/en/performance-schema.html
;performance_schema

thread_cache_size = 4
query_cache_type = 1

slow-query-log
long_query_time         = 10
slow_query_log_file     = /var/log/mysql/mysql-slow.log
log-warnings            = 2

# slave config
skip-slave-start
server-id = 22
#read_only = 1
skip-name-resolve

log-bin=/data2/var/log/mysql/mysql-bin
relay_log_purge=0
binlog-format=MIXED
#expire_logs_days = 31
log-bin-trust-function-creators = 1

slave-skip-errors = 1062,1146,1032

replicate-wild-ignore-table=%.norep%

#testing
table_definition_cache = 5000

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

这台机器是在它的master遇到这个问题后才升级为master的（因为我不知道为什么，我干脆把它关掉了）。

我正在使用`mysql-server-5.5.23-1.el5.remi`版本。

这是 MySQL 日志文件。

```
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Last MySQL binlog file position 0 795, file name /data/var/log/mysql/mysql-bin.000801
120719 10:25:47  InnoDB: Waiting for the background threads to start
120719 10:25:48 InnoDB: 1.1.8 started; log sequence number 8068861682758
120719 10:25:48 [Note] Recovering after a crash using /data/var/log/mysql/mysql-bin
120719 10:25:48 [Note] Starting crash recovery...
120719 10:25:48 [Note] Crash recovery finished.
120719 10:25:49 [Warning] 'proxies_priv' entry '@ root@svr201NTC-647.localdomain' ignored in --skip-name-resolve mode.
120719 10:25:49 [Note] Event Scheduler: Loaded 27 events
120719 10:25:49 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.5.23-log'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi
120719 10:25:56 [Warning] Aborted connection 23 to db: 'reportingdb' user: 'adproject' host: '192.168.3.87' (Got an error reading communication packets)
120719 10:25:57 [Warning] Aborted connection 44 to db: 'reportingdb' user: 'adproject' host: '192.168.3.87' (Got an error reading communication packets)
120719 10:25:57 [Warning] Aborted connection 1 to db: 'reportingdb' user: 'adproject' host: '192.168.5.192' (Got an error reading communication packets)
03:25:57 UTC - mysqld got signal 8 ;
This could be because you hit a bug. It is also possible that this binary
or one of the libraries it was linked against is corrupt, improperly built,
or misconfigured. This error can also be caused by malfunctioning hardware.
We will try our best to scrape up some info that will hopefully help
diagnose the problem, but since we have already crashed, 
something is definitely wrong and this may fail.

key_buffer_size=8388608
read_buffer_size=131072
max_used_connections=19
max_threads=300
thread_count=16
connection_count=16
It is possible that mysqld could use up to 
key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 664409 K  bytes of memory
Hope that's ok; if not, decrease some variables in the equation.

Thread pointer: 0x1286fcd0
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 49a340b8 thread_stack 0x40000
/usr/libexec/mysqld(my_print_stacktrace+0x2e)[0x7ae02e]
/usr/libexec/mysqld(handle_fatal_signal+0x3e2)[0x679da2]
/lib64/libpthread.so.0[0x3154a0ebe0]
/usr/libexec/mysqld(_ZN12ha_partition21min_rows_for_estimateEv+0x4f)[0x9223af]
[0x49a2bf60]

Trying to get some variables.
Some pointers may be invalid and cause the dump to abort.
Query (11a7ad38): SELECT * FROM (
    SELECT B.bannerid, SUM(realclick)clicks, SUM(totalview)views,   
    ROUND((MAX(uv) + (SUM(uv) - MAX(uv))*0.1)*1.1)`uviews`  ,
        CAST(IF(SUM(realclick)=0 OR SUM(totalview)=0,'N/A',CONCAT(ROUND(SUM(realclick)*100/(SUM(totalview)),2))) as CHAR) `CTR`,
          SUM(A.`money`) money
    FROM `ox_banners` B
    INNER JOIN  `v3_ban_date_cpm7k` AS A   ON B.`campaignid` = A.`campaignid` AND B.`bannerid` = A.`bannerid`
    WHERE A.`bannerid` = NAME_CONST('_bannerid',144660) AND A.`campaignid` >0
    AND A.`dt` BETWEEN  NAME_CONST('_start',_latin1'2012-08-20' COLLATE 'latin1_swedish_ci') AND  NAME_CONST('_end',_latin1'2012-08-26' COLLATE 'latin1_swedish_ci')) A
Connection ID (thread ID): 47
Status: NOT_KILLED

The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains 
```

**每当有查询访问表中不存在的分区时，听起来 MySQL 就会崩溃**（注意上述查询中的`2012-08-20`and ）。`2012-08-26`令我惊讶的是它以前没有发生过。

我有很多可用的 RAM。

```
free -m
             total       used       free     shared    buffers     cached
Mem:         48289      31600      16688          0        666      23848
-/+ buffers/cache:       7085      41203
Swap:         8189         54       8135 
```

数据目录文件权限。

```
drwxr-xr-x 48 mysql mysql 118784 Jul 18 16:20 /data2/var/lib/mysql 
```

和`mysqld.log`。

```
(-rw-r----- 1 mysql mysql 36M Jul 18 17:14 /var/log/mysqld.log) 
```

那么我怎样才能找出导致我的表崩溃的原因以及如何修复它呢？

7 月 19 日：更新日志。

* * *

我一直在尝试按照[本](http://dev.mysql.com/doc/refman//5.5/en/using-stack-trace.html)指南进行调试，但没有帮助：

```
# resolve_stack_dump -s /tmp/mysqld.sym -n mysqld.stack | c++filt 
0x7ae02e my_print_stacktrace + 46
0x679da2 handle_fatal_signal + 994
0x3fed00ebe0 _end + -335143280
0x9223af ha_partition::min_rows_for_estimate() + 79
0x417c2ff0 _end + 1082221216

# addr2line -fie /usr/libexec/mysqld 0x2e
??
??:0
# addr2line -fie /usr/libexec/mysqld 0x3e2
??
??:0
# addr2line -fie /usr/libexec/mysqld 0x4f
??
??:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:57:34.440

请参阅以下错误报告：

“在 ha_partition::min_rows_for_estimate 中的handle_fatal_signal 8（除以零）用于 SELECT ...WHERE 在分区表上” [https://bugs.launchpad.net/percona-server/+bug/1033724](https://bugs.launchpad.net/percona-server/+bug/1033724)

# perl - 使用 Perl 在 HTTP 代理后面 FTP 文件

> ID：11538710
> 
> 赞同：3
> 
> 时间：2012-07-18T09:52:29.303
> 
> 标签：perl, proxy, ftp, net-ftp

我编写了一个简单的 Perl 脚本来列出，获取 mtime，然后获取文件（基于 mtime）。这是使用 RHEL5/6 中可用的 Perl Net::FTP 模块完成的。

我的问题是我现在必须调整这个脚本来传输位于 HTTP squid 代理（而不是 FTP 代理）后面的文件。

如果在为这些程序设置相关代理配置文件后使用 wget 或 lftp 等 Linux shell 命令，我可以 ftp 文件。

有没有办法在 Perl 中执行此操作而无需调用系统（shell）命令。我尝试设置 Net::FTP 防火墙选项（见下文），但我相信这仅适用于我们没有或不使用的 FTP 代理。

到目前为止，我的代码与此类似（为清楚起见，我省略了错误处理）：

```
my $host = '111.111.111.111';
my $ftp_port = 21;
my $passive = 0; #Have also tried with passive mode on.
my $firewall = 'proxy.xx:3128';
my $debug = 1;
my $username = 'foo';
my $password = 'bah';

my $ftp = Net::FTP->new($host, Port=> $ftp_port, Passive => $passive, Firewall => $firewall, Debug => $debug);
$ftp->login($username, $password);
my @file_list = $ftp->ls;
foreach my $file (@file_list) {
    my $mod_time = $ftp->mdtm($file);
    if($mod_time + $wait_time <= time() ) {
        $ftp->get($file);
    }
}
$ftp->quit; 
```

编辑：我收到的错误如下：

```
Net::FTP: new(111.111.111.111, Port => 21, Passive => 0, Firewall => proxy.xx:3128, Debug => 1)
Net::FTP>>> Net::FTP(2.77)
Net::FTP>>>   Exporter(5.63)
Net::FTP>>>   Net::Cmd(2.29)
Net::FTP>>>   IO::Socket::INET(1.31)
Net::FTP>>>     IO::Socket(1.31)
Net::FTP>>>       IO::Handle(1.28)
Net::FTP=GLOB(0x2640e60): Timeout at /etc/transfer/transfer_get.pl line 106 
```

如果我打开被动模式，我会得到同样的错误。如果我不提供防火墙选项，我也会收到类似的超时错误：

```
Net::FTP: new(111.111.111.111, Port => 21, Passive => 1, Debug => 1)
main crashed: Can't ftp to 111.111.111.111: Net::FTP: connect: Connection timed out 
```

在阅读 Net::FTP 上的手册后，我非常确定它不支持通过 http 代理进行传输。只是想知道实现列出远程文件的 mtime 然后在 Perl 中获取它们的最佳方法是什么。

谢谢

保罗

# jquery - 使用jquery从动态div中提取变量的值

> ID：11538711
> 
> 赞同：0
> 
> 时间：2012-07-18T09:52:38.837
> 
> 标签：jquery, xml, html5-video

**当我进行稍微不同的搜索时，我在另一个 Stack Overflow Q 中找到了答案。关键代码行是这样的：**

```
var videoFile = $(this).find('.vid_file').text(); 
```

**'this' 引用每个 videoLink div，然后它在 videoLink 中找到 vid_file div，并读取文本。希望这会帮助别人！**

我正在使用 HTML、XML 和 JQuery 创建一个动态视频库。读入 XML 文件后，我输出了一个 HTML 字符串，它为每个视频 (.videoLink) 创建了一个动态 div。在该 div 中是包含视频标题、背景 .jpg 的路径和视频文件 (.vid_file) 的名称的子 div。所有这些都正常工作。但是我在提取每个 .vid_file 的唯一值时遇到问题（我的数据库中有 6 个测试视频）。这是我正在使用的代码：

```
$('.videoLink').click(function(e){
    e.preventDefault();
    $('vid_file').each(function (){
    var videoFile = $(this).text();

    var videoCode = '<video controls autoplay autobuffer>' +
        '<source src="video/'+videoFile+'.ogv" type="video/ogg" />' +
        '<source src="video/'+videoFile+'.mp4" type="video/mp4" />' +
        '</video>';

    $('#videoPlayer').html(videoCode); 
```

等等（我正在使用 fancybox 来显示视频——这正在工作）。上面的代码会发生什么，当您单击一个时，它们都会播放。我意识到这正是我要求它对这段代码做的事情，但是已经尝试了许多变体（将点击事件嵌套在 .each 方法中；反之亦然，等等）并让它们完全播放是我最接近的一直在使它工作。所以我想我快到了。但不完全是。我错过了什么？在此先感谢您的帮助。——谢丽尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:59:39.510

看来您缺少选择器中的点。所以使用以下。

```
$('.vid_file').each(function (){
    var videoFile = $(this).text();

    var videoCode = '<video controls autoplay autobuffer>' +
        '<source src="video/'+videoFile+'.ogv" type="video/ogg" />' +
        '<source src="video/'+videoFile+'.mp4" type="video/mp4" />' +
        '</video>';

    $('#videoPlayer').html(videoCode);
} 
```

# iphone - UIButton 像闪烁

> ID：11538712
> 
> 赞同：4
> 
> 时间：2012-07-18T09:52:42.633
> 
> 标签：iphone

你好朋友如何制作像眨眼一样的 uibutton 我使用了波纹管代码，但它不像我的应用程序中的眨眼我正在开发录制所以我想喜欢那个按钮

```
CABasicAnimation *pulseAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
pulseAnimation.duration = .5;
pulseAnimation.toValue = [NSNumber numberWithFloat:1.1];
pulseAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
pulseAnimation.autoreverses = YES;
pulseAnimation.repeatCount = FLT_MAX;
[btnBlink.layer addAnimation:pulseAnimation forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:30:59.277

或者您可以通过调用定义的方法使用 NSTimerInteval 不断增加或减少按钮 alpha

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:20:54.157

@Nikki：您不需要为闪烁按钮制作动画，只需要两个图像，例如活动（有光泽）和非活动（没有任何光泽）模式图像。将其设置在按钮事件上。它看起来像眨眼:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:57:20.803

您可以使用[这个](https://github.com/frowing/UIView-blink)小类别来为您处理它。

```
 [self.button blinkWithDuration:0.5f 
                          speed:(NSTimeInterval)0.2f 
                 completionBlock: ^{
    self.button.hidden = YES;
  }
 ]; 
```

# java - 未在 Android 测试中生成覆盖率文件

> ID：11538721
> 
> 赞同：2
> 
> 时间：2012-07-18T09:53:07.667
> 
> 标签：java, android, testing, android-emulator, jenkins-plugins

我有 SDK 18，更新到 SDK 20 后，我在生成覆盖文件时遇到了问题。

> .../coverage.ec: Permission denied ... [report]nothing to do: 在任何数据文件中都找不到运行时覆盖率数据...

当我尝试“ant all clean emma debug install test”时，我使用了“ant clean emma install test”我有：

> “全部”不存在……

任何人都可以帮忙吗？

# javascript - 在 Backbone 中有条件地绑定事件 - 移动或桌面

> ID：11538725
> 
> 赞同：2
> 
> 时间：2012-07-18T09:53:22.657
> 
> 标签：javascript, jquery, backbone.js, backbone-events

为了更容易阅读，我将所有内容都放在了`initialize`函数下。这里有什么问题吗？警报被触发，所以它不是条件。我隐藏了共享操作，并希望在桌面上的悬停和移动设备上的点击上显示它们，因为悬停是不可能的。我在这里错过了什么吗？ `console.log()`不会抛出任何错误。

```
App.Views.Title = Backbone.View.extend({

initialize:function(){

    _.bindAll(this,"stickToTop");
    this.template = _.template($("#title").html());
    this.render();
    $(window).scroll(this.stickToTop);

    var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);
    var share = this.$(".share");

    if(isMobile){

        // alert('mobile')
        share.on('click' , this.shareMobile , this);

    }else{
        // alert('not mobile')
        share.on('hover' , this.shareDesktop , this);

    }

},
... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T11:57:05.383

我认为问题可能是您通过使用[delegateEvents](http://backbonejs.org/#View-delegateEvents)以 jquery 方式而不是 Backbone 方式绑定事件。

我建议您尝试以下方法：

```
if(isMobile){

    // alert('mobile')
    this.delegateEvents({"click .share" : "shareMobile"});

}else{
    // alert('not mobile')
    this.delegateEvents({"hover .share" : "shareDesktop"});

} 
```

希望这可以帮助。

- - - - 更新 - - - -

我自己对此进行了测试，您可以以非常漂亮的方式做到这一点！

首先从您的初始化方法中删除所有 isMobile 和委托事件垃圾，它只会把它弄乱！然后将 Backbone.View 事件哈希作为返回事件哈希的函数（是的，您可以这样做！）

```
events: function() {
  // check for the mobility HERE!
  var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);
  var events_hash = {
    // insert all the events that go here regardless of mobile or not
  };
  if (isMobile) {
    _.extend(events_hash, {"click .share": "shareMobile"});
  } else {
    _.extend(events_hash, {"hover .share": "shareDesktop"});
  }
  return events_hash;
} 
```

瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:03:02.247

我会这样做：

```
App.Views.Title = Backbone.View.extend({

    events : {
      'hover .mobile .share' : 'shareMobile',
      'click .desktop .share' : 'shareDesktop'
    },

    initialize:function(){

        //stuff...

        var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);

        if(isMobile){
           this.$el.addClass('mobile');
        }else{
           this.$el.addClass('desktop');
        }

    }
    //stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:09:26.667

嗯..是你定义 $share 但然后使用 share.on （没有 $）？

# c# - 使用 vb.net 进行条码扫描

> ID：11538731
> 
> 赞同：1
> 
> 时间：2012-07-18T09:53:51.297
> 
> 标签：c#, vb.net, barcode

我正在做 1 个桌面应用程序。我想在此添加条码读取功能。在我的应用程序中，所有产品的价格标签中都会有条形码。我将使用一些条形码扫描仪进行扫描。但我对所有这些一无所知。任何人都可以为此提供apme示例代码或一些参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:09:24.750

对于 USB 上的 COM，您需要 COM 端口号（在您的设备管理器中查看），假设 COM15 使用 VB.net 使用 System.IO.Ports.SerialPort 类：

```
Dim comPort As New SerialPort("COM15") 'New com port'
Dim terminatingChar As Char = Chr(10) 'Terminate at vbLF (new line)'

comPort.BaudRate = 9600 '9600 baud speed'
comPort.Encoding = Encoding.ASCII 'Decode the bytes via ASCII code'

comPort.Open() 'Open the port'

Dim myBarcode as String = "" 'Current barcode is empty'

While True'Read chars until the terminating char appears'
    Dim tempChar as Char = Convert.ToChar(comPort.ReadChar()) 'Read a char'
    If tempChar = terminatingChar Then Exit While 'If its the terminating char, exit the loop'
    myBarcode = myBarcode & tempChar 'If not append it to the barcode string'
End While

comPort.Close() '(!) Close the port'

Console.WriteLine(myBarcode.Trim()) 'Trim it and show it to the user' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:57:44.543

大多数可用的条形码扫描仪模拟键盘。它们带有配置条形码，可让您对其进行配置以执行不同的操作，例如在扫描后在代码末尾包含回车符。因此，一旦您扫描了一个代码，它就会出现在屏幕上，就好像它是被输入的一样（例如，如果一个文本框有焦点）。

# python - 蟒蛇：地图（新对象，[参数]）

> ID：11538732
> 
> 赞同：1
> 
> 时间：2012-07-18T09:53:53.077
> 
> 标签：python

我想使用`map`函数创建一个包含对象的数组：

```
class Something:
    def __init__( self, number ):
        ...

def new_object( x ):
    return Something(x)

map( new_object, [1,2,3,4] ) 
```

是否有等效于的默认 python 语法`new_object`？类似的东西`Something.new(x)`，我可以传递给地图？

（我不要求功能，我要求一些内置的类级功能。如果有内置的等价物，`lambda`我只想避免这种情况）`new_object`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:56:40.070

直截了当：

```
map( Something, [1,2,3,4] ) 
```

# java - 数组 NullPointerException 中的数据结构

> ID：11538734
> 
> 赞同：0
> 
> 时间：2012-07-18T09:53:59.817
> 
> 标签：java, arrays, data-structures, nullpointerexception

> **可能重复：**
> [创建对象数组时出现 NullPointerException](https://stackoverflow.com/questions/1922677/nullpointerexception-when-creating-an-array-of-object)

我在主要方法中有 NullPointerException

```
array[0].name = "blue"; 
```

结构类：

```
public class Items {

String name = "";
String disc = "";
} 
```

主要课程：

```
public class ItemsTest {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Items[] array = new Items[2];

            array[0].name = "blue"; //NullPointerException
        array[0].disc = "make";
        array[1].name = "blue";
        array[1].disc = "blue";
           }
} 
```

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:55:19.480

```
Items[] array = new Items[2]; 
```

您必须初始化数组的每个元素，默认情况下它们是`null`

做了，

```
Items[] array = new Items[2];
//initialization
array[0] = new Items();
array[0].name = "blue"; //NullPointerException
array[0].disc = "make";

//initialization
array[1] = new Items();
array[1].name = "blue";
array[1].disc = "blue"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:49:24.710

当你写这行时：

```
Items[] array = new Items[2]; 
```

您初始化了一个可以包含 2 个元素的 Items 类型的数组，或者换句话说，您只初始化了容器。

数组中的每个元素都是一个对象，也需要初始化，并且在寻址时`array[0].name`您试图访问当前的内部元素`null` 如果您检查 Jigar Joshi [answer](https://stackoverflow.com/a/11538754/1510122)，您会看到他还初始化了数组中的每个 Items 元素.

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:12:29.967

```
Items[] array = new Items[2]; // Creates an array of Items with null values 
```

因此不得不使用

```
Items[] array = { new Items(), new Items() }; // as suggested by aioobe.... 
```

或需要初始化数组

```
array[0] = new Items(); 
```

# java - 如何使用java打印PDF的一页？

> ID：11538735
> 
> 赞同：1
> 
> 时间：2012-07-18T09:54:00.387
> 
> 标签：java, printing, itext, java-6

> **可能重复：**
> [如何打印使用 iText 创建的 PDF？](https://stackoverflow.com/questions/4609667/how-to-print-a-pdf-created-with-itext)

我使用 iText 创建了一个 PDF。现在，我只想打印 PDF 文件的第一页。我该怎么做？

这是我正在尝试的东西，但显然不起作用。

```
AttributeSet aset = new HashAttributeSet();
aset.add(new PrinterName(PRINTER_NAME, null));

PrintService[] services = PrintServiceLookup.lookupPrintServices(null, aset);
PrintService service = services[0];

System.out.println(service);

PdfReader pdfReader;
pdfReader = new PdfReader(PDF_FILE);
byte[] page1 = pdfReader.getPageContent(1);

Doc doc = new SimpleDoc(page1, DocFlavor.BYTE_ARRAY.AUTOSENSE, null);

DocPrintJob pj = service.createPrintJob();
PrintRequestAttributeSet printRequestAttributeSet = new HashPrintRequestAttributeSet();

pj.print(doc, printRequestAttributeSet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:29:48.263

没试过，但这[是](http://www.java-forum.org/allgemeine-java-themen/99423-pdf-itext-drucken.html)我在 2 分钟内在网上找到的...

论坛是德语的，但是 `code`是英语的...应该可以

# c# - 设备中的 Windows Phone 7 应用程序部署问题

> ID：11538736
> 
> 赞同：0
> 
> 时间：2012-07-18T09:54:11.090
> 
> 标签：c#, .net, wcf, windows-phone-7, endpoint

嗨，这是我第一次使用我的 WP7 设备和 WCF，

我正在使用 WCF 服务与集中式数据库进行通信，当我尝试在模拟器中运行应用程序时它工作得很好，但是当我将它部署到设备时，我收到以下错误消息

```
 EndPointNotFoundException
  There was no endpoint listening at http://10.11.32.211:88/ABCService/Service.svc
  that could accept the message. This is often caused by an incorrect address or SOAP 
  action. See InnerException, if present, for more details. 
```

**我的 Web.config 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <!-- <client>
      <endpoint address="http://10.11.32.211:88/ABCService/Service.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IABCService"
        contract="ABCServiceReference.IABCService" name="BasicHttpBinding_IABCService" />
    </client> -->
    <bindings>

      <basicHttpBinding>
    <binding name="basicHttpBinding_ABCService" sendTimeout="00:01:30" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" transferMode="Buffered">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxNameTableCharCount="16384" maxBytesPerRead="2147483647" />
    </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
    <behavior>

      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>

      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  </configuration> 
```

**应用程序配置文件**

```
 <configuration>
 <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IABCService" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://10.11.32.211:88/ABCService/Service.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IABCService"
            contract="ABCServiceReference.IABCService" name="BasicHttpBinding_IABCService" />
    </client>
 </system.serviceModel>
 </configuration> 
```

**内部异常**

```
"The remote server returned an error: NotFound." 
```

## 堆栈跟踪

```
at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.OnGetResponse(IAsyncResult result)
at System.Net.Browser.ClientHttpWebRequest.<>c__DisplayClassa.<InvokeGetResponseCallback>b__8(Object state2)
at System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadPool.WorkItem.doWork(Object o)
at System.Threading.Timer.ring() 
```

我使用 WIFI 连接到 My Lan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:24:56.617

本地 DNS/路由器问题，通过更改路由器和 DNS 中的设置解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:00:40.713

我认为您的端点 IP **10.11.32.211:88**不是公开的，您可以使用手机访问那里

# winforms - 显示上下文选项卡时如何使用 Infragistics Ribbon 控制窗口标题位置

> ID：11538738
> 
> 赞同：0
> 
> 时间：2012-07-18T09:54:14.363
> 
> 标签：winforms, ribbon, infragistics

![丝带](../Images/49a217cf2d88ac2320245c5975c7b672.png)

有谁知道哪些设置控制 Windows 标题的位置，即此处显示的“Office 2010 Style Ribbon with Applica ...”？在示例中，标题根据可用空间相对于上下文选项卡移动。因此，如果您缩小窗口，它将跳转到选项卡的左侧。

在我的应用程序中，这不会发生。即使空间很小，标题也固执地停留在右侧。我想我们已经设置了一些控制它的东西，但我不知道这可能是什么，有人知道这是如何控制的吗？

# c - 不使用 pipe() 获取两个文件描述符

> ID：11538742
> 
> 赞同：3
> 
> 时间：2012-07-18T09:54:30.553
> 
> 标签：c, linux, pipe, shared-memory

我试图理解命令`pipe(2)`，例如：

```
int pipefd[2];
if (pipe(pipefd) == -1) {
    perror("pipe");
    exit(EXIT_FAILURE);
} 
```

我想获得两个带有 , 的文件描述符`shared memory`，用于匿名管道（父子关系）。

例如，这是父子进程之间的简单对话：

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdio.h>
#include <sys/wait.h>  
#include <unistd.h>    
#include <string.h>   
#define SHMSIZE 16
int main() {
   int shmid;
   char *shm;

   if(fork() == 0)   // child first

   {

      shmid = shmget(2009, SHMSIZE, 0);
      shm = shmat(shmid, 0, 0);
      char *s = (char *) shm;
      *s = '\0';
      int i;

      // child enters the input that would be stored in the shared memory
      for(i=0; i<3; i++) {
         int n;
         printf("Enter number<%i>: ", i);
         scanf("%d", &n);

         // convert the input into a c-string
         sprintf(s, "%s%d", s, n);
      }
      strcat(s, "\n");

      // display the contents of the shared memory
      printf ("I'm the child process , and I wrote:%s\n",shm);

      // detaches the shared memory segment
      shmdt(shm);
   }

   else   // parent

   {

       // get the segment
      shmid = shmget(2009, SHMSIZE, 0666 | IPC_CREAT);

      // attaching the segment to the father
      shm = shmat(shmid, 0, 0);

      // father waits for the son the finish
      wait(NULL);

      // father displays what the son wrote
      printf ("I'm the father , and my child wrote :%s\n",shm) ;

      // detaches the shared memory segment
      shmdt(shm);

      shmctl(shmid, IPC_RMID, NULL);
   }
   return 0;
} 
```

输出非常简单：

```
Enter number<0>: 123
Enter number<1>: 567
Enter number<2>: 789
I'm the child process , and I wrote:123567789

I'm the father , and my child wrote :123567789 
```

这是我的实现`shm_pipe_pipe()`，替换为`pipe(2)`：

```
int shm_pipe_pipe(int spd[2])
{
    spd[0] = shmget(2009, SHMSIZE, 0);
    spd[1] = shmget(2009, SHMSIZE, 0666 | IPC_CREAT);

     if (spd[0] == -1 || spd[1] == -1)
         return -1;
     return 1;

} 
```

我的问题是：

1.  我知道那`fd[0]`是用来阅读和`fd[1]`写作的，但它们到底是什么？地址？

2.  我上面写的功能`shm_pipe_pipe`似乎不起作用，它有什么问题？

谢谢`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T10:58:52.913

1.  回答您的第一个问题，它们保存文件描述符。它们不是地址。它们是表的索引。该表实际上具有将由内核解释的地址（如果描述符是磁盘文件，则为文件系统，如果它是网络套接字，则为网络堆栈等）。文件的用户永远不会得到实际地址。只有包含实际地址的表的索引才会提供给用户。该表的结构非常复杂，并且在各个子系统中有所不同。但基本概念是相对相同的。

下图对磁盘文件有效。

![此映像对磁盘文件有效](../Images/a8a1371ae8c81a69f934a24f2c3ad0db.png)

如果有两个独立的进程：

![两个独立的进程](../Images/eaefc9ffaec01904007590ad646f82e2.png)

如果是管道..

![Pipe就是这样工作的，它只有两个文件描述符](../Images/a79727e9531c9da363f1228946e7fb5b.png)

这是文件描述符表的一般视图 ![FDT](../Images/cd51d77093c6d60800e478000de73d95.png)

2.  `pipefd`您的第二个问题，您似乎正在尝试从返回的值填充文件描述符数组`shmget()`。

从`man 2 shmget`

> shmget() 返回与参数键值关联的共享内存段的标识符。如果 key 的值为 IPC_PRIVATE 或 key 不是 IPC_PRIVATE，不存在与 key 对应的共享内存段，并且指定了 IPC_CREAT，则创建一个新的共享内存段，其大小等于 size 值向上舍入为 PAGE_SIZE 的倍数在 shmflg。

了解 shmget() 的作用很重要。它要求一个向上取整的大小（usnig 系统的`PAGE_SIZE`）。该内存段由密钥标识。所以内核维护了一个**键值表**。该表还包含共享内存区域的地址。现在，当您调用 时`shmat()`，您使用 查询此表，`shmid`并且返回的地址与您的进程地址空间相关联。

所以`shmid`返回的`shmget()`是系统维护的键值对表中的一个条目，与使用的文件描述符无关`pipe()`。

底线是：

你不能这样实现`pipe`。为什么不看一下`pipe`自己的实际实现呢？

[http://sourceware.org/git/?p=glibc.git;a=blob;f=io/pipe.c;h=07a37ae778046e56c13e62fd2a2fa678f5546424;hb=HEAD](http://sourceware.org/git/?p=glibc.git;a=blob;f=io/pipe.c;h=07a37ae778046e56c13e62fd2a2fa678f5546424;hb=HEAD)

尽管该文件中没有任何用处，因为它只是调用 other `__pipe`。您可以克隆一个 git 存储库并使用 cscope 来查找`pipe`.

# vim - vim：为拆分窗口设置不同的状态行

> ID：11538745
> 
> 赞同：7
> 
> 时间：2012-07-18T09:54:39.883
> 
> 标签：vim

当我打开 2 个水平拆分文件时，每个窗口都有自己的状态行。

例如用命令

```
vim -o a.txt b.txt 
```

第一个窗口的状态行为“a.txt”，第二个窗口的状态行为“b.txt”。

我需要从命令行调用 vim，我需要放置一个自定义状态行，并且我希望每个窗口都有不同的状态行。

和

```
vim -o -c "set statusline=hello" a.txt b.txt 
```

我得到“你好”作为两个窗口的状态。

我应该怎么做才能将“hello”作为第一个窗口的状态行，将“world”作为第二个窗口的状态行；从命令行调用vim时？

此命令不起作用：

```
vim -o -c "set statusline=hello" a.txt -c "set statusline=world" b.txt 
```

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T10:01:07.627

您可以使用`setlocal`命令：

```
vim -o a.txt b.txt -c "setl stl=hello | wincmd j | setl stl=world" 
```

* * *

类型`:help 'stl'`

```
'statusline' 'stl'      string  (default empty)
                        global or local to window |global-local| 
```

我们可以看到：`stl`是一个`global or local to window`选项。
因此，`:setl stl=hello`将设置一个当前窗口本地的状态行。

# java - 检查 JCE Unlimited Strength Jurisdiction Policy 文件

> ID：11538746
> 
> 赞同：43
> 
> 时间：2012-07-18T09:54:46.260
> 
> 标签：java, jce

我确信 JCE Unlimited Strength Jurisdiction Policy 文件是否已正确安装在 JVM 中（因为系统的某些其他部分的行为就好像它们没有安装一样）。

有人可以提供一个代码示例，我可以用它来检查这些文件是否真的被 JVM 使用？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-18T12:27:07.717

我发现可以使用以下代码片段对其进行测试：

```
 int maxKeyLen = Cipher.getMaxAllowedKeyLength("AES");
    System.out.println(maxKeyLen); 
```

如果没有无限强度策略文件，则结果为 128，正确安装后结果为 2147483647。

# android - Android imagebutton如何改变图标大小

> ID：11538747
> 
> 赞同：8
> 
> 时间：2012-07-18T09:54:47.010
> 
> 标签：android, icons, imagebutton

我最近一直在研究界面，我在图像按钮大小方面遇到了很多问题。我在设计东西方面非常糟糕，而且我在使用 Android 图标时遇到了重大问题。因此，我对这些有一些疑问。

首先这是我目前的布局：

![在此处输入图像描述](../Images/f19577c65ba20ed69889ac7d97ff24a0.png)

如您所见，我有两个大小不同的图标，这并不好。我似乎无法强迫它们采用相同的尺寸。

我的问题是：

1 - 我如何强制它们采用相同的尺寸？

2 - hdpi、ldpi、mdpi 和 xhdpi 的推荐尺寸差异是多少？

3 - 为什么，如果我将 imageButton 背景颜色设置为与布局背景相同的颜色，图标会像背景中没有按钮一样移动？

例子：![在此处输入图像描述](../Images/ac8e582ebd8386b8acbb02f841ec279b.png)

提前致谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T09:59:24.067

对于这些 ImageButtons 使用（而不是 src）设置图像：

```
android:background="@drawable/image_name" 
```

接下来设置：

```
android:layout_height="10dp" //or any size required
android:layout_width="10dp" //or any size required ... let these 2 sizes be same for both the ImageButtons 
```

“dp”或“dip”是与设备无关的像素。android系统将负责调整不同屏幕分辨率的大小

此外，更好的做法是分别为您的按钮设置悬停图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-08T11:05:03.397

您可以使用 android:scaleType 属性并将其设置为“fitXY”，而不是用 android:background 替换 android:src。

请参阅：[Android - 图像按钮比例](https://stackoverflow.com/questions/24155422/android-image-button-scale)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:42:11.930

```
android:layout_height="10dp"

android:layout_width="10dp" 
```

不要留着`px`，你总是只需要留着`dp`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T10:04:58.323

输入这个：

在java中：

```
YOUR_VIEW.setLayoutParams(new LayoutParams(width,height)); 
```

或在 XML 中：

```
android:layout_height="10px"
android:layout_width="10px" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T10:53:31.027

正如其他答案所说，在布局 xml 文件中使用 dp 或 dip 设置按钮大小。

要处理不同的屏幕尺寸，请参阅此文档：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# java - .out 和 .log 文件有什么区别

> ID：11538749
> 
> 赞同：1
> 
> 时间：2012-07-18T09:54:51.923
> 
> 标签：java, logging, log4j

我从来没有费心去发现这个。让我们看看我有一个名为“myapp”的 java web 应用程序运行 myapp.out 和 myapp.log 文件有什么区别？

.log 文件可以根据 log4j.properties 设置旋转，.out 文件怎么样？我是否也需要为其设置轮换政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-19T11:24:49.903

.out 将打印与您部署的 java 应用程序相关的所有日志，而 .log 文件将打印与 weblogic 服务器相关的所有日志，例如 startup.stop、deployment 等。

.out 将在实例启动的地方有标准的 shell 输出，并且它主要有 Notice 和上面的日志级别将被写在上面。.log 也将包含服务器日志以及所有子系统日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:59:27.303

`.log`和之间的区别`.out`是文件名的最后三个字母。Log4j 和 System.out 可以重定向到其中任何一个。如果你正确使用 log4j，你应该得到很多 System.out 的输出，所以你不需要旋转它。

如果您的应用程序没有很好地使用 log4j 并且向 System.out 写入了*很多*内容，您可能需要轮换文件，但这需要您重新启动应用程序。

# android - 从堆栈中删除中间活动

> ID：11538752
> 
> 赞同：2
> 
> 时间：2012-07-18T09:55:05.697
> 
> 标签：android

如何实现此行为：

假设我有活动 A

然后我开始一个流程并进行活动 A、B、C、D

如果在 D 中成功，它将启动活动 E，堆栈将为 A、B、C、D、E

我在这里想要的是堆栈将是 A,E 所以 B,C,D 将从中间删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:59:59.390

```
ArrayList<Activity> activities =new ArrayList<Activity>(); 
```

创建它并将您的所有活动添加到此。当你需要关闭它们时输入：

```
activities.get(YOUR_ITEM_INDEX).finish(); 
```

我认为这将解决问题

让我知道结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:59:47.043

B、C、D 和 E 应从结果中的活动开始，并在 OnActivityResult 方法中结束。然后用 finish() 覆盖 E 活动中的后退按钮（或单击按钮时仅完成 E 活动）就可以了，当从 E 按下返回时，您将移回 A

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:01:24.667

您只需要确定我的活动可以采用的历史路径，并`finish()`在用户执行应该“展开”我的活动堆栈的操作时调用。

您还可以查看[FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY) / [FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)或`android:noHistory="true"`在您的*AndroidManifest.xml*中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:02:14.643

请参阅[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)`FLAG_ACTIVITY_CLEAR_TOP`。它符合您的需求吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:58:58.617

当从 B 开始活动 C 完成 B 时，就像从 C 开始 D 完成 C 一样，开始 E 现在完成 D 。最后，您将只有 Activity A 和 E 在堆栈中。

# c# - 什么是 ASP MVC 中的 django 中间件等价物？

> ID：11538753
> 
> 赞同：0
> 
> 时间：2012-07-18T09:55:14.160
> 
> 标签：c#, asp.net-mvc-3, django-middleware

基本上，我想为每个请求注入一些数据到 ViewData/ViewBag 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:56:55.713

在 ASP.NET MVC 中，这将是一个[操作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)。如果您想在全局范围内执行此操作，可以将其注册为[全局操作过滤器](http://weblogs.asp.net/gunnarpeipman/archive/2010/08/15/asp-net-mvc-3-global-action-filters.aspx)。这样，它将适用于所有控制器操作，因此您无需单独装饰它们。

所以你的过滤器可以这样定义：

```
public class GlobalViewBagInjectorActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.Controller.ViewBag.Foo = "bar";
    }
} 
```

并`RegisterGlobalFilters`在您的方法中注册`Global.asax`：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new GlobalViewBagInjectorActionFilter());
} 
```

现在，在您的所有视图中，您可以使用该`ViewBag.Foo`属性。

但在大多数情况下，[子操作](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)是一个更好的选择，`ViewBag`因为它们允许您传递强类型的视图模型，而不是依赖于弱类型的 ViewBag 和一些魔术字符串。

# callback - 从 ac# dll 回调一个 c++/cli 方法

> ID：11538759
> 
> 赞同：0
> 
> 时间：2012-07-18T09:55:47.960
> 
> 标签：callback, c++-cli

我有一个应用程序，其中 winform 由 c++/cli 托管类初始化。它们都是单独的项目，生成 dll，并且托管项目引用 winform dll（显然）。

所以现在场景是在 Winform 中单击某个按钮，我需要在我的托管类中调用一个方法。我知道代表是要走的路，但是一些小代码片段或一些关于我应该如何去做的指示会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:23:36.503

这是从 WPF 调用的 C++/CLI 函数的示例。
在 C++/CLI 方面：

**cppcli.h：**

```
// cppcli.h

#pragma once

using namespace System;

namespace cppcli 
{
    public ref class cppClass
    {
        public:
            String^ cppFunction(int value);
    };
} 
```

**cppcli.cpp：**

```
// This is the main DLL file.

#include "stdafx.h"  
#include "cppcli.h"

namespace cppcli 
{
    String^ cppClass::cppFunction(int value)
    {
        String^ message = gcnew String("The value you passed was: " + value);
        return message;
    }
} 
```

然后在 C# 方面：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    cppClass cppObj = new cppClass();
    string message = cppObj.cppFunction(42);
    textBlock1.Text = message;
} 
```

结果：
![生命的意义](../Images/c65ef28d4e316a47c968dbf9fbe248d1.png)

# wpf - 无法序列化泛型类型“System.Windows.FreezableCollection”

> ID：11538761
> 
> 赞同：3
> 
> 时间：2012-07-18T09:55:49.173
> 
> 标签：wpf, xaml, serialization

希望是一个简单的问题。我有一个自定义控件，其依赖属性包含另一个自定义控件的列表。

```
public static readonly DependencyProperty BlockObjectsProperty = DependencyProperty.Register("BlockObjects", typeof(FreezableCollection<BlockObject>), typeof(Block), new FrameworkPropertyMetadata(new FreezableCollection<BlockObject>(), null));
public FreezableCollection<BlockObject> BlockObjects
{
     get { return (FreezableCollection<BlockObject>)base.GetValue(BlockObjectsProperty); }
     set { base.SetValue(BlockObjectsProperty, value); }
} 
```

然后在 xaml 中使用它来填充控件

```
<Viewbox Grid.Row="2" Stretch="Uniform">
    <ItemsControl x:Name="tStack" ItemsSource="{TemplateBinding BlockObjects}" ContextMenu="{StaticResource BodyContextMenuKey}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical"  VerticalAlignment="Stretch" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
     </ItemsControl>
</Viewbox> 
```

我现在的问题是我想将它序列化到一个文件中，但是在使用 XamlWriter.Save 时我得到'无法序列化泛型类型'System.Windows.FreezableCollection`'。如果这是一个普通的类，我可以使用属性来描述它应该被序列化的方式（对吗？）但它是一个静态依赖属性，那么我如何让它序列化呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T14:44:03.867

好吧，愚蠢的我，网上有很多关于这方面的信息，简单的解决方案是采用通用的 freezablecollection 并派生一个非通用类，如下所示。

```
public class BlockObjectCollection : FreezableCollection<BlockObject>
{
} 
```

然后替换依赖属性

```
 public static readonly DependencyProperty BlockObjectsProperty = DependencyProperty.Register("BlockObjects", typeof(BlockObjectCollection), typeof(Block), new FrameworkPropertyMetadata(new BlockObjectCollection(), null));
    public BlockObjectCollection BlockObjects
    {
        get { return (BlockObjectCollection)base.GetValue(BlockObjectsProperty); }
        set { base.SetValue(BlockObjectsProperty, value); }
    } 
```

# c# - 从 SQL 查询中检索 sum(column) 并在将其检查为正数或负数后添加到 datagridviews

> ID：11538769
> 
> 赞同：0
> 
> 时间：2012-07-18T09:56:01.977
> 
> 标签：c#, sql-server-2008, datagridview

我的 Windows 应用程序（VS-2008 c#）中有一个表单，我需要在其中检索选定用户的总和（金额）和名称，其中每个用户可能有多个事务，这是我用于此的查询：

```
Select txt_name as Name,
       SUM(double_net_amt) as Amount 
       from match_transaction 
       where int_user_id IN (" + user_list + ") group by txt_name 
```

但现在我应该检查 sum(amount) 值并将其添加到 datagridview1 如果它是正数，否则将它添加到 DGV2 如果它是负数，

所以对于group by子句，我想不出办法，请帮助我.....：P /

提前谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:00:03.777

每个网格的单独查询，并更改要使用的每个查询`HAVING SUM(double_net_amount) > 0`（或 < 0）。

像这样：

```
select txt_name as Name,
       SUM(double_net_amt) as Amount 
from match_transaction 
where int_user_id IN (" + user_list + ") 
group by txt_name
having SUM(double_net_amt) > 0 
```

# wpf - 在 WPF+MVVM 应用程序中使用 Prism 有什么好处

> ID：11538770
> 
> 赞同：-3
> 
> 时间：2012-07-18T09:56:01.587
> 
> 标签：wpf, mvvm, prism-4

请告诉我在 WPF+MVVM 应用程序中使用 Prism 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:26:30.927

我建议您阅读他们的文档（您似乎还没有），或MSDN 杂志上的[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc785479.aspx)。基本上，Prism 鼓励并支持代码中的极端模块化：它允许您从程序集中动态加载功能，帮助构建每个加载的组件都可以贡献的复合用户界面，并且通常为所有内容增加一层巨大的复杂灵活性。

个人观点：对于中小型应用，我认为不会增加太多；复杂性不值得。对于部署在多种配置中的大型模块化应用程序，它是处理该问题的理想选择。

# windows-phone-7 - wp7 在页面和枢轴之间导航，我是否总是需要重新加载枢轴项目？

> ID：11538778
> 
> 赞同：0
> 
> 时间：2012-07-18T09:56:30.400
> 
> 标签：windows-phone-7

我开发了一个应用程序，它有一个带有枢轴项目的枢轴，其中列出了 http 链接（通过图像可视化）和一个带有 webbrowser 控件的页面。当我选择一个链接时，它会显示在网络浏览器中。现在，当我返回枢轴时，我遇到了问题，枢轴项目是空的，我需要再次加载它们。

所以我的问题是这是标准的预期行为吗？我问我没有使用 mvvm 模型的原因是我在数据透视项目中的项目是通过用户控件显示的。

我的第二个问题，您知道如何防止重新加载吗？我已经尝试将 webbrowser 作为弹出窗口，但我没有所需的 appbar 可用。可能有办法缓存或检索枢轴吗？

欢迎任何想法。

问候， 拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:20:28.890

我遇到了同样的情况，在离开 Pivot Page 后，我重新加载了`OnNavigatedTo`pivot 页面功能中的项目。

但是我做了一些优化，比如我缓存了静态数据，这样我就不必每次都从我的独立存储中加载它们，从而更快地加载页面。我有很多图像被加载到`ImageBrushes`构造函数中，这样我就避免了每次都分配它们。

# soap - 如何向 SOAP 信封 (gSOAP) 添加额外的命名空间

> ID：11538785
> 
> 赞同：2
> 
> 时间：2012-07-18T09:56:44.377
> 
> 标签：soap, gsoap, onvif

我正在实现一个 ONVIF 兼容设备。gSOAP 工具包用于从 ONVIF WSDL 文件生成 C++ 代码。除了 SOAP 错误处理之外，一切正常，ONVIF 指定了一个额外的命名空间，称为 ter = “http://www.onvif.org/ver10/error”。此名称空间需要包含在 gSOAP 发送的 SOAP 信封中。

我现在正在尝试这个几天，但我无法弄清楚。

有谁知道如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:41:18.657

我创建了一个假的 wsdl 文件来解决这个问题。

只需获取任何其他 wsdl 文件，并保留一个您永远不会使用的虚拟对象的 simpletype 定义。将此文件提供给 gsoap，您就完成了。

# c# - 在扩展中使用“ref”或“out”

> ID：11538802
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:57:56.077
> 
> 标签：c#, extension-methods

有谁知道解决这个聪明的方法？

```
public static void Invert(this ref bool value)
{
    value = !value;
} 
```

c# 说我不能在扩展中使用“ref”或“out”。但是像 List.Clear() 这样的扩展是存在的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T10:01:58.367

`List.Clear()`不是扩展方法，而是方法。即使它是一种扩展方法，它也不需要接收参数 as `ref`，因为它不会“返回”与您拥有的列表不同的列表，它会修改列表。

而且，一般来说，你不能。但你通常不需要。

关于什么：

```
public static bool Invert(this bool value)
{
    return !value;
}

bool x = false.Invert(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:01:34.247

首先，我知道没有`List.Clear`扩展方法。`List<T>.Clear()`是一种正常的方法。它没有`ref`参数。

第二个问题是`List<T>`可变引用类型。所以你可以修改它，而不改变引用本身。仅`ref`当您想更改引用本身或正在处理值类型时才需要。

# php - 带有警告的 PHP/Javascript 会话超时

> ID：11538803
> 
> 赞同：1
> 
> 时间：2012-07-18T09:57:56.903
> 
> 标签：php, javascript, session, popup, timeout

有谁知道我可以在哪里阅读教程，或者知道如何创建一个内置警告的基于 Javascript 的会话超时，以及可选的这些功能：

*   用户活动重置计时器
*   与数据库交互（最后一次出现在等）
*   如果不活动，它将注销用户（通过重定向到 logout.php 页面）
*   在注销用户之前，它将显示一条弹出消息，询问他们是否要继续

不幸的是，我对 Javascript 不太了解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:44:17.150

我不知道您的网站是如何完成的，但如果做得正确，您应该有一个登录会话和某种后端控制系统，如果先前的操作是在 X 分钟/小时前进行的，则该系统会拒绝任何操作并自动过期用户。如果你想实现一些客户端代码，你应该有一个javascript计时器，当过期时间即将结束时提醒用户，你也可以在过期时间到达后将用户重定向到主页或登录页面。这样，所有安全功能都在后端，javascript 仅作为显示行为的显示措施。

更新：

```
setInterval(function(){alert("Hey, your session is ending")},360000);

setInterval(function(){
    redirect();
},720000);

function redirect(){
    document.location = "../logout.php"
} 
```

更新2：

```
setInterval(function(){
    logout();
},600000);

function logout(){
    if(confirm('Logout?'))
        redirect();
    else
        alert('OK! keeping you logged in')
}

function redirect(){
    document.location = "../logout.php"
} 
```

带有此代码的每个页面都会在 10 分钟后询问用户是否要注销。这意味着您的会话不能自行过期，您必须将控制权留给用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-17T09:40:00.667

**5 分钟后会话注销**

```
<script type="text/javascript">
        var interval;
         $(document).on('mousemove', function () {
             clearInterval(interval);
             var coutdown = 5 * 60, $timer = $('.timer'); // After 5 minutes session expired  (mouse button click code)
             $timer.text(coutdown);
             interval = setInterval(function () {
                 $timer.text(--coutdown);

                 if (coutdown === 0) {

                     alert("Session expired. User successfully logged out.");
                     window.location = "UserLogin.php";
                 }

             }, 1000);
         }).mousemove();

         var interval;
                     $(document).on('keydown', function () {
             clearInterval(interval);
             var coutdown =5 * 60, $timer = $('.timer'); // After 5 minutes session expired (keyboard button press code)
             $timer.text(coutdown);
             interval = setInterval(function () {
                 $timer.text(--coutdown);

                 if (coutdown === 0) {

                     alert("Session expired User successfully logout.");
                     window.location = "UserLogin.php";
                 }

             }, 1000);
         }).mousemove();
    <script>

         <html>
            <div class="timer">
                 Time of session display on page 
            </div>
        </html> 
```

# data-binding - 如何在 row_loading 事件之后隐藏 silverlight 数据网格行？

> ID：11538807
> 
> 赞同：2
> 
> 时间：2012-07-18T09:58:04.707
> 
> 标签：data-binding, silverlight-4.0, datagrid, visibility

简单的在这里。我创建了一个数据网格，它有一组行。我想在加载行后根据特定逻辑隐藏特定行？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:33:32.927

在行加载事件上，即 LoadingRow，因此在每行加载时，您将获得 DataGridRow，其中您有 datacontext。让我们说人（id，名字）

这就是你可以玩的方式..

```
 private void dataGrid1_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        if(e.Row != null)
        {
            var row = e.Row.DataContext;
            var person = row as Person;
            if (person != null && person.Id == 2)
            {
                (e.Row as DataGridRow).IsEnabled = false;
            }
            if (person != null && person.Id == 1)
            {
                (e.Row as DataGridRow).Visibility = Visibility.Collapsed;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T08:14:12.107

代码需要调整，但我一直在寻找解决方案，并认为值得发布。

```
Private Sub gridComments_LoadingRow(sender As Object, e As DataGridRowEventArgs) Handles gridComments.LoadingRow
        Dim row As DataGridRow = e.Row
        For Each col As DataGridColumn In gridComments.Columns
            Dim g1 As FrameworkElement = col.GetCellContent(e.Row)
            Dim c As UIElement = g1.FindName("ChildElementName")
            c.Opacity = 0 'Change the desired properties here
        Next
    End Sub

private void gridComments_LoadingRow(object sender, DataGridRowEventArgs e)
{
    DataGridRow row = e.Row;
    foreach (DataGridColumn col in gridComments.Columns) {
        FrameworkElement g1 = col.GetCellContent(e.Row);
        UIElement c = g1.FindName("ChildElementName");
        c.Opacity = 0;
        //Change the desired properties here
    }
} 
```

有点晚了，但这对我有用。

# c# - 在 C# 项目中查找未注释的方法

> ID：11538808
> 
> 赞同：0
> 
> 时间：2012-07-18T09:58:05.803
> 
> 标签：c#, xml-comments

有没有办法找到程序集中没有任何 xml 注释的方法的数量。

```
public int Sum(int i, int j)
{   
    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:13:05.710

不

在我看来，编译器在编译代码时会消除注释代码。如果您可以使用 .net 框架附带的 ildasm.exe 工具来分析 .exe 文件（实际上它是编译代码后执行的可移植执行文件），您将看不到有关注释代码的信息。

# vb.net - linq 无法从数据库中找到值，尽管它存在于数据库中

> ID：11538809
> 
> 赞同：0
> 
> 时间：2012-07-18T09:58:09.080
> 
> 标签：vb.net, asp.net-mvc-3, linq

在 mvc3 中使用 linq 时，我注意到了一些违规行为。

我有一个带有“PIN”列的数据库表。列必须有 28 个字符，并且可以存储完全随机的字符。然后我有一个控制器动作：

```
 Function Unlock() As ActionResult
        Dim key As String = Request("token")
        If key IsNot Nothing Then
            Dim user As Users = db.Users.SingleOrDefault(Function(u) u.PIN = key)
            If user IsNot Nothing Then
                user.PIN = Nothing
                db.SaveChanges()
                Return View()
            End If
        End If
        Return RedirectToAction("Index", "Home", New With {.Area = ""})
    End Function 
```

例如，当 PIN 持有“Co/5c1mmil2e+clGK3c6JvdrGpQ=”键字符串时，会从查询字符串中读取完整的字符串，但用户引用始终没有结果，即使相同的值存储在数据库中。

另一方面，当 PIN 保持 "GbgI4QAaYWanaKWUm6j7Jg5IpA8=" 时，一切正常。所以我想也许 linq 有一些像 / 或 + 这样的字符的问题，但是如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:24:23.643

尝试 `u.PIN.Equals(key)`

在调试时使用 intelliTrace 将对 linq 有很大帮助。

在这种情况下，FirtsOrDefault 接缝对我来说更合理，而不是 SingleOrDefault

# .net - 如何避免在 IIF 中遇到错误的部分？

> ID：11538811
> 
> 赞同：4
> 
> 时间：2012-07-18T09:58:20.377
> 
> 标签：.net, vb.net, iif

我正在尝试在 vb.net 中使用 IIF，这是我的代码

```
Dim arr as new MyClass("ABC")
MyAnotherMethod(IIf(arr.SelectedValue.Count < 1, Nothing, arr.SelectedValue(0).Value),"xxx","yyy","zzz") 
```

上面的 IIF 会遇到真实的部分，但是在我运行这段代码之后，我收到了以下消息：

> 指数数组的边界之外。

我认为原因是虽然应该运行 true 部分，但 arr.SelectedValue(0).Value 已传递到 IIF，因此仍在引用 false 部分。

有没有像“andalso”这样适合我的情况的逻辑？以免跑错部分。

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T10:04:42.810

您需要使用[IF 运算符](http://msdn.microsoft.com/en-us/library/bb513985.aspx)而不是 IIF 函数

*“使用三个参数调用的 If 运算符的作用类似于 IIf 函数，只是它使用短路评估”*

它也是类型安全的，而 IIF 不是，所以你真的应该使用它。看看这些工作示例：

```
 Dim i As Integer

    'compiles if option strict is off (this is bad)
    i = IIf(True, "foo", 4) 

    'compiles even if option strict on, but results in a runtime error (this is even worse)
    i = CInt(IIf(True, "foo", 4)) 

    'won't compile (this is good because the compiler spotted the mistake for you)
    i = If(True, "foo", 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:06:44.913

# linux - Ada 编译器因“此系统上未安装 Ada 编译器”而崩溃。降级gcc版本后

> ID：11538813
> 
> 赞同：3
> 
> 时间：2012-07-18T09:58:27.523
> 
> 标签：linux, gcc, fedora, ada, gnat

我将我的 gcc 版本 4.6.3 降级为 4.3.4 但 ada 版本没有更改 gnat-4.6.3 所以我得到了错误

> 此系统上未安装 Ada 编译器。

如何将我的 ada 设置为 gnat 4.3.4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:12:42.577

这取决于您运行的系统以及安装方式。您需要从相同版本的 GCC 安装 GNAT，或者您需要以不干扰 GCC 其余部分的方式安装 GNAT。

# oracle - 一列中的所有行值

> ID：11538816
> 
> 赞同：3
> 
> 时间：2012-07-18T09:58:35.620
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想在一列中显示所有值。我该怎么做？

数据如下所示：

```
-----------------------------------------------
| user_id | degree_fi | degree_en | degree_sv |
-----------------------------------------------
| 3601464 | 3700      |  1600     |  2200     |
|  1020   | 100       |  0        |   0       |
| 3600520 |  100      | 1300      |  1400     |
| 3600882 |  0        |   100     |  200      |
| 3600520 |  3200     |   800     |  600      |
| 3600520 |  400      | 3000      |  1500     |
----------------------------------------------- 
```

我想要的是这样的：

```
-------------------------------------------------------------
| user_id | degree_fi    | degree_en       | degree_sv       |
--------------------------------------------------------------
| 3601464 | 3700         |  1600           |  2200           |
|  1020   | 100          |  0              |   0             |
| 3600520 | 100,3200,400 | 1300, 800, 3000 | 1400, 600, 1500 |
| 3600882 |  0           |   100           |  200            |
-------------------------------------------------------------- 
```

如您所见，3600520 的值不仅在一组中，而且也在一列中。我该怎么做？

提前致谢

```
create table USER_MULTI_DEGREE
(
  USER_ID   INTEGER not null,
  DEGREE_FI VARCHAR2(128),
  DEGREE_EN VARCHAR2(128),
  DEGREE_SV VARCHAR2(128)
);
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (3601464, '3700', '1600', '2200');
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (1020, '100', '0', '0');
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (3600520, '100', '1300', '1400');
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (3600882, '0', '100', '200');
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (3600520, '3200', '800', '600');
insert into USER_MULTI_DEGREE (USER_ID, DEGREE_FI, DEGREE_EN, DEGREE_SV) values (3600520, '400', '3000', '1500'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:43:23.297

如果您使用的是 11g R2，则可以使用内置的 listagg() 函数：

```
select user_id, listagg(degree_fi, ',') within group (order by degree_fi)
from user_Multi_degree
group by user_id 
```

如果您使用的是 11g R1，则必须为此定义自己的类型 - 请参阅[AskTom：stragg 函数](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:2196162600402)以获取示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:58:48.507

由于您使用的是 11g，并且假设它是 11gR2，因此您可以使用内置[`listagg()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm)函数；这是对弗兰克施密特的回答略有变化的分析版本：

```
select distinct user_id,
    listagg(degree_fi, ',') within group (order by degree_id)
        over (partition by user_id) as degree_fi,
    listagg(degree_en, ',') within group (order by degree_id)
        over (partition by user_id) as degree_en,
    listagg(degree_sv, ',') within group (order by degree_id)
        over (partition by user_id) as degree_sv
from user_multi_degree;

   USER_ID DEGREE_FI            DEGREE_EN            DEGREE_SV
---------- -------------------- -------------------- --------------------
      1020 100                  0                    0
   3600520 100,3200,400         1300,800,3000        1400,600,1500
   3600882 0                    100                  200
   3601464 3700                 1600                 2200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:34:01.873

为您的 SQL 创建和使用内联函数。根据表的大小，它可能会导致性能问题。如果是这种情况，您也可以考虑使用物化视图。

忘了 -*新*的LISTAGG 功能。

[11g 第 2 版中的 listagg 函数](http://www.oracle-developer.net/display.php?id=515)

# php - 哈希后如何获取url

> ID：11538819
> 
> 赞同：0
> 
> 时间：2012-07-18T09:58:44.470
> 
> 标签：php, url, hash

我有一个看起来像这样的网址：

```
zigzagstudio/#!/page_wedding2 
```

并且我需要在 # 之后占用 url 的一部分。事实上，我需要访问 page_wedding2 才能将数字广告与我的数据库中的 id 进行比较。这可能使用php吗？有人有代码示例吗？我还搜索了使用 javascript 的解决方案，但我不知道如何使用 javascript 将其发送到 php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:03:05.370

```
$url = "zigzagstudio/#!/page_wedding2";
$pattern = "([\#\!\/]+(.*))";

preg_match($pattern, $url, $string);
$name = $string[1];
echo $name; // prints 'page_wedding2' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:01:39.207

```
$url = 'zigzagstudio/#!/page_wedding2';
echo parse_url($url, PHP_URL_FRAGMENT); 
```

请参阅[parse_url](http://php.net/parse_url) () 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:04:37.547

您需要在 JavaScript 中阅读它，然后将其传递给您的 PHP。

像这样用 Javascript 阅读它：

```
var query = location.href.split('#');
var anchorPart = query[0]; 
```

一旦获得`anchorPart`并从中解析了相关信息，将其传递给您的 PHP - 可能有不同的方法来执行此操作，具体取决于您的 Web 应用程序。

您可以向page_wedding2.php发出[AJAX 请求，并将查询字符串中的任何解析信息传递给它。](http://api.jquery.com/jQuery.get/)在您自己的网页中使用返回的 HTML 字符串。

**编辑：** 为了澄清，[浏览器不会将 URL 的锚部分传递给服务器端](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:01:58.207

您可以在 PHP中使用[爆炸](http://php.net/manual/en/function.explode.php)并在 Javascript中[拆分。](http://www.w3schools.com/jsref/jsref_split.asp)

PHP：

```
$str = 'zigzagstudio/#!/page_wedding2';
$array = explode('#', $str);
echo array_pop($array); 
```

Javascript：

```
var str = 'zigzagstudio/#!/page_wedding2';
var str_array = str.split('#');
alert(str_array.pop()); 
```

# java - Java程序可被三整除而不使用模数

> ID：11538824
> 
> 赞同：1
> 
> 时间：2012-07-18T09:59:13.107
> 
> 标签：java

我想创建一个程序，其中用户将键入一个数字，该程序将判断它是否可以被 3 整除。但是%、/、+、*不能在程序中使用。这里有人对如何做到这一点有一些想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:04:38.897

```
public static void main(String[] args) {
    String number = "123456";

    int sum = 0;
    for (char c : number.toCharArray()) {
        sum = sum - (0 - c) - '0';
        while (sum >= 3) {
            sum -= 3;
        }
    }
    System.out.print("divisible by 3? ");
    System.out.println(sum == 0);
} 
```

或者，您可以继续减去 3，直到您的数字为 0（可被 3 整除）或 <0：不能被 3 整除。

ps：如果要处理负数需要调整

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T10:07:06.953

十分简单...

```
boolean divisibleBy3(int n) {
    return (""+n).matches("([0369]|[147]([0369]|[147][0369]*[258])*([" +
                          "258]|[147][0369]*[147])|[258]([0369]|[258]" +
                          "[0369]*[147])*([147]|[258][0369]*[258]))*");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:03:29.527

如果所有数字的总和也可被 3 整除，则该数字可被该数字整除。您可以迭代该过程，直到有一个小于 10 的数字并将其与已知除数（3,6 和 9）进行比较

由于它很可能是一个游戏或家庭作业并且你可以使用`+`你可以简单地使用减去两次：`a - - b`相当于`a + b`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T10:10:03.080

假设您可以使用 - 运算符然后

```
bool divBy3(int n)
{
  while (n >= 0)
  {
    n -= 3;
  }

  return n == 0;
} 
```

如果 n 可以被 3 整除，则返回 true，否则返回 false。请注意，这确实效率低下！使用 % 运算符会好得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:36:33.283

在二进制表示中被 3 整除就像在十进制 (10+1) 中被 11 整除：偶数位的数字总和减去奇数位的数字总和反过来又能被 3 整除（可能是 0）。

# java - 如何在 java 中添加 tiff 图像 x/y 分辨率标签？

> ID：11538829
> 
> 赞同：1
> 
> 时间：2012-07-18T09:59:18.980
> 
> 标签：java, image, tiff

我正面临这个问题[http://www-01.ibm.com/support/docview.wss?uid=swg1IO10129](http://www-01.ibm.com/support/docview.wss?uid=swg1IO10129)。

这里缺少图像的分辨率标签。现在我想为图像添加一个 tiff x/y 分辨率标签。

# python - 在 Python 3.2 中将字典添加到字典中

> ID：11538830
> 
> 赞同：1
> 
> 时间：2012-07-18T09:59:23.293
> 
> 标签：python, python-3.x

我正在尝试用一个语句在字典中创建字典。如果密钥不存在，则应创建它。

我现在拥有的代码片段：

```
self.data[self.stringvar1.get()] = { date : (int(self.total.get()), int(self.resources.get())) } 
```

这不会创建新键，但会覆盖 self.data，即使 stringvar1 不同。我尝试了几个选项，但找不到我想要的。我是否必须手动检查密钥是否存在，或者是否有一个简单的习惯用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:01:28.583

一种选择是制作`self.data`一个`collections.defaultdict(dict)`. 在此访问不存在的键`defaultdict`会自动为此键创建一个新字典，您可以简单地使用

```
self.data[self.stringvar1.get()][date] = (
    int(self.total.get()), int(self.resources.get())) 
```

请注意， a`defaultdict`存在隐藏错误的风险，因为您永远不会得到 a `KeyError`。另一种方法是使用普通`dict`的和`setdefault()`方法：

```
self.data.setdefault(self.stringvar1.get(), {})[date] = (
    int(self.total.get()), int(self.resources.get())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:16:22.607

This is more of an idea than an answer (maybe I can't add comments because I'm a 'new' user).

To merge dictionaries you might try doing something like:

```
var = dict(dict1.items() + dict2.items()) 
```

As for adding the key if it doesn't exist, you might want to check:

```
setdefault(key[, default])
If key is in the dictionary, return its value. If not, insert key with a value of default and return default. default defaults to None. 
```

# java - 在 Alfresco 中添加到文档的公共链接

> ID：11538833
> 
> 赞同：0
> 
> 时间：2012-07-18T09:59:28.147
> 
> 标签：java, alfresco

我已经安装了 alfresco-community-4.0，并希望将公共链接添加到文档，以便可以在不传递凭据的情况下公开访问它。请告诉我这样做的过程。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:28:45.327

您需要使用存储库中的 Guest Home。该空间专门用于存储您要公开的内容。

# iphone - iPhone中多个视图控制器中的通用XIB

> ID：11538836
> 
> 赞同：1
> 
> 时间：2012-07-18T09:59:40.257
> 
> 标签：iphone, xcode, ipad, uiviewcontroller

我有一个带有多个视图控制器的 iPhone 应用程序，在所有视图控制器的标题中都很常见。我不想使用相同的方法并在所有控制器中创建通用视图。所以我的问题是我如何在所有控制器中使用这个通用视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:01:43.067

分配新视图控制器时使用 initWithNibNamed:"name of your xib"。这很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:05:52.617

相同，但我们可以避免定义变量 -

```
[self.view addSubview:[[(NavAppAppDelegate *)[[UIApplication sharedApplication] delegate] headerview] view]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:26:53.043

好的，所以您必须在 Application Delegate 中创建一次。在.h

```
@property(nonatomic,strong) uiviewcontroller headerview; 
```

米

```
@synthesize headerview=_headerview; 
```

然后在appdelegate的“didFinishLaunchingWithOptions”中将其分配为单例

```
self.headerview = [[headerview alloc] initWithNibName:@"headerview" bundle:nil]; 
```

所以每次你想把它添加到你的视图中。导入后从您的类中的应用程序委托创建对象。

```
applicationdelegate app = [uiapplication sharedapplication]delegate];
[self.view addsubview:app.headerview.view]; 
```

# asp.net-mvc - 将区域与外部项目一起使用的 MVC4 可插拔方法是什么？

> ID：11538837
> 
> 赞同：2
> 
> 时间：2012-07-18T09:59:44.283
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我决定使用 asp.net-MVC4，做一些 POC 并坚持使用更大的解决方案，然后我找到了@nilesh [http://nileshhirapra.blogspot.sg/2012/02/aspnet-mvc-pluggable-application发布的解决方案.html](http://nileshhirapra.blogspot.sg/2012/02/aspnet-mvc-pluggable-application.html)。

它对 MVC3 工作正常，但是当尝试在 MVC4 中实现相同时，我的区域解决方案视图会抛出错误，说`no extension register for .cshtml.`使用 ASP .net mvc 4 空解决方案？

# asp.net-mvc-2 - 如何在 ASP.net MVC 的视图中显示 Image 属性

> ID：11538840
> 
> 赞同：0
> 
> 时间：2012-07-18T09:59:47.380
> 
> 标签：asp.net-mvc-2, qr-code

我想将我的卡的代码号转换为 QR 图像，所以我添加了一个对我的项目的引用。然后我在 Helper Class 中创建了一种方法：

```
public static Image GenerateQRCode(String code)
{
  QrEncoder qrEncoder = new QrEncoder(ErrorCorrectionLevel.H);
  QrCode qrCode = new QrCode();
  qrEncoder.TryEncode(code, out qrCode);
  Renderer renderer = new Renderer(5, Brushes.Black, Brushes.White);
  MemoryStream ms = new MemoryStream();
  renderer.WriteToStream(qrCode.Matrix, ms, System.Drawing.Imaging.ImageFormat.Png);
  return System.Drawing.Image.FromStream(ms);
} 
```

然后我在我看来调用这个函数：

```
 <%
     System.Drawing.Image image = ICEWeb.HelperClasses.HelperClass.GenerateQRCode("test");
  %> 
```

但它只显示`System.Drawing.Bitmap`，有人知道如何显示从我的函数返回的 System.Drawing.Image`GenerateQRCode()`吗？

塔纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:05:50.563

以 MVCishly 方式进行：通过编写自定义操作结果。您当前拥有的`GenerateQRCode`方法是您可以将其留在旧应用程序中的东西。

```
public class QRCodeResult : ActionResult
{
    public QRCodeResult(string code)
    {
        Code = code;
    }

    public string Code { get; private set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = "image/png";

        QrEncoder qrEncoder = new QrEncoder(ErrorCorrectionLevel.H);
        QrCode qrCode = new QrCode();
        qrEncoder.TryEncode(Code, out qrCode);
        Renderer renderer = new Renderer(5, Brushes.Black, Brushes.White);
        renderer.WriteToStream(qrCode.Matrix, response.OutputStream, System.Drawing.Imaging.ImageFormat.Png);
    }
} 
```

然后是控制器动作：

```
public ActionResult QRCode(string code)
{
    return new QRCodeResult(code);
} 
```

最后，在您想要显示 QR 码的某个视图中，使用`<img>`指向您编写的控制器操作的标签：

```
<img src="<%: Url.Action("QRCode", new { code = "test" }) %>" alt="" /> 
```

# php - 地址在 joomla 中未正确显示

> ID：11538843
> 
> 赞同：1
> 
> 时间：2012-07-18T09:59:52.140
> 
> 标签：php, joomla2.5, typography

我创建了一个名为 m2mreach.com 的网站，除了在联系我们页面“www.m2mreach.com/contact-us.html”中存在错误外，该网站运行良好，地址未显示在此.. 这里有我我附上了错误的图像。请协助.... ![在此处输入图像描述](../Images/7694375ef74a18ca8bb477a07cbcced4.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:06:30.210

[这和这个问题](https://stackoverflow.com/questions/11538698/address-not-showing-properly-in-joomla-2-5-website)是同一个问题，但我会回答这个问题，因为它的格式稍微好一点。

数据存在，它只是您`address`在 css 中应用的边距和填充。如果您删除边距并填充它会显示。如果您将边距设置`margin: 0 20px;`为地址显示。

我可以看到导致此问题的 css 来自 jckeditor 的typography.php。我认为您只需要覆盖该元素上的样式。

我对css不是很好，但这很容易解决。我建议您使用 FireFox 的[firebug](https://getfirebug.com/)或使用浏览器中的工具（Chrome 也有开发工具）。

# c# - 防止子进程在c#中显示shell窗口

> ID：11538848
> 
> 赞同：3
> 
> 时间：2012-07-18T10:00:08.277
> 
> 标签：c#, windows, process, processstartinfo

我正在使用 ffmpeg 编译视频，并且我想阻止它在执行操作时显示控制台。

这是我启动 ffmpeg 的方式：

```
ProcessStartInfo si = new ProcessStartInfo();
si.Arguments = string.Format("-y -loop 1 -t " + DucationToString(frameDuration) + " -r 25 -f image2 -i \"{0}\" \"{1}\"",
                             item.Value, otpt);
si.FileName = "ffmpeg";
si.UseShellExecute = false;

Process.Start(si).WaitForExit(); 
```

无论我尝试什么设置`ProcessStartInfo`，控制台总是会出现。

创建子进程时如何防止显示控制台？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:02:47.927

你应该尝试使用

```
ProcessStartInfo si = new ProcessStartInfo();
si.WindowStyle = ProcessWindowStyle.Hidden;
si.CreateNoWindow = true;
si.UseShellExecute = false; 
```

[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:07:32.320

设置[`ProcessStartInfo.CreateNoWindow`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.createnowindow)为`true`。

**请注意**：

要使用`ProcessWindowStyle.Hidden`或属性必须`ProcessStartInfo.CreateNoWindow`。`ProcessStartInfo.UseShellExecute``false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:04:21.437

你有没有在你的代码中添加这个

```
 si.CreateNoWindow = true;
    si.RedirectStandardOutput = true; 
```

# oauth - OAuth 临时凭证的用途是什么？

> ID：11538851
> 
> 赞同：0
> 
> 时间：2012-07-18T10:00:22.593
> 
> 标签：oauth

我正在阅读 OAuth 的协议工作流程 - [http://hueniverse.com/oauth/guide/workflow/](http://hueniverse.com/oauth/guide/workflow/)

我了解 OAuth 中访问凭证的需要，因为它们保证用户已授予对其资源的访问权限，但是临时凭证的目的是什么？它们显然对于将用户重定向到服务器的登录页面是必要的，但为什么呢？没有它们，服务会不会更不安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:14:03.107

需要该临时凭证（读取请求令牌）以确保访问令牌的请求来自授权客户端。

# java - 智能 gwt 教程和指导

> ID：11538857
> 
> 赞同：8
> 
> 时间：2012-07-18T10:00:53.133
> 
> 标签：java, javascript, gwt, smartgwt

我是 smart gwt 的新手，我需要一些帮助。请帮助一些好的智能 gwt 教程以及一些我可以购买的好书来学习这一点。我进行了一些搜索，实际上除了 javadocs 之外什么也没找到。所以请大家帮帮我！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T12:18:02.750

因为`GWT`，这里的一切，都是你的切入点：

[https://developers.google.com/web-toolkit/doc/latest/DevGuide](https://developers.google.com/web-toolkit/doc/latest/DevGuide)

那么对于`SmartGWT`，我认为每个人都应该从快速指南开始：

[http://www.smartclient.com/releases/SmartGWT_Quick_Start_Guide.pdf](http://www.smartclient.com/releases/SmartGWT_Quick_Start_Guide.pdf)

然后展示它非常好，因为你有提供代码的现场演示：

[http://www.smartclient.com/smartgwt/showcase/](http://www.smartclient.com/smartgwt/showcase/)

然后是其他一些链接，例如：

[http://www.javacodegeeks.com/2011/01/advanced-smartgwt-tutorial-part-1.html](http://www.javacodegeeks.com/2011/01/advanced-smartgwt-tutorial-part-1.html)
[http://smartgwt-tutorial.blogspot.fr/2011/03/smart-gwt-tutorials.html](http://smartgwt-tutorial.blogspot.fr/2011/03/smart-gwt-tutorials.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T10:07:10.807

我通过以下方式学习了 GWT 2.0：

[http://www.vogella.com/articles/GWT/article.html](http://www.vogella.com/articles/GWT/article.html)
[http://courses.coreservlets.com/Course-Materials/gwt.html](http://courses.coreservlets.com/Course-Materials/gwt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T13:03:46.977

访问给定的链接，该链接为您提供分步示例和说明。 [http://uptick.com.au/content/crud-gwt-gwtp-smartgwt-and-jpa](http://uptick.com.au/content/crud-gwt-gwtp-smartgwt-and-jpa)

# android - 如何找到安卓设备的详细信息

> ID：11538860
> 
> 赞同：3
> 
> 时间：2012-07-18T10:01:05.800
> 
> 标签：android

我想了解运行应用程序的设备的名称、Android 版本、屏幕尺寸、电池状态、网络状态和其他详细信息。设备详细信息是否有特定的内置类，或者我必须使用一些第三方工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:08:45.143

为了获得制造商、型号和版本使用，

**

```
Build.MANUFACTURER
Build.MODEL;
Build.VERSION.RELEASE 
```

**

对于屏幕尺寸使用，

```
 Display display = getWindowManager().getDefaultDisplay(); 
        width = display.getWidth();  //deprecated
        height = display.getHeight();//deprecated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:20:34.947

```
 TelephonyManager tMgr =(TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
     String mPhoneNumber = tMgr.getLine1Number();
     Log.i("model", android.os.Build.MODEL);
 WindowManager mWinMgr = (WindowManager)this.getSystemService(Context.WINDOW_SERVICE);
        _sWidth= mWinMgr.getDefaultDisplay().getWidth();
        _sHeight = mWinMgr.getDefaultDisplay().getHeight(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:35:38.130

不幸的是，没有一个类或实用程序可以用来获得所有这些。但是，您可以访问这些链接以获取有关如何获取每个链接的信息：

[电池电量](http://mihaifonoage.blogspot.com/2010/02/getting-battery-level-in-android-using.html)

[安卓版](http://developer.android.com/reference/android/os/Build.VERSION.html)

[屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

[网络状态](http://androidsnips.blogspot.com/2011/01/to-check-internet-connection-statustype.html)

我只是用谷歌搜索了他们每个人。好消息是，你的机器上也有谷歌！

# winforms - 如何从 cpp 文件访问表单组件

> ID：11538861
> 
> 赞同：0
> 
> 时间：2012-07-18T10:01:05.063
> 
> 标签：winforms, visual-c++

我正在使用 Windows 窗体应用程序。我有一个表格，即Form1.h。在这种形式中，我有一个名为 pictureBox1 的图片框。我有一个 main.cpp 文件，我想在其中访问 Form1.h 的 pictureBox1 并显示来自 main.cpp 文件的一些图像。

为此，我正在使用此代码

主文件

```
#include "Form1.h"
    using namespace PUMA_LED_TESTER;

Form1^ form1=gcnew Form1; 

form1->pictureBox1->Image =bmp; 
```

但是这段代码给出了错误

```
error C3145: 'form1' : global or static variable may not have managed type 'PUMA_LED_TESTER::Form1 ^'
          may not declare a global or static variable, or a member of a native type that refers to objects in the gc heap 
```

我不知道为什么会出现这个错误。任何人都可以告诉我这个错误的解决方案。

提前致谢

# java - jdbc 为什么不是 javax.sql.PooledConnection 继承自 java.sql.Connection

> ID：11538863
> 
> 赞同：3
> 
> 时间：2012-07-18T10:01:19.847
> 
> 标签：java, jdbc

每次我们实现 PooledConnection 时，我们都会编写

```
class MyConnection implements PooledConnection, Connection {
  // implement methods of PooledConnection and Connection 
} 
```

我想知道为什么`PooledConnection`不设计为`extends Connection`？因为毕竟a`PooledConnection`总是 a 。`Connection`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:10:07.470

我不确定，但我想`PooledConnection`不扩展的原因`Connection`是您可以制作一个`PooledConnection`使用任何其他现有`Connection`实现的更简单的实现，允许代码重用并保持功能分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:26:22.637

> ...因为 PooledConnection 毕竟总是一个 Connection 。

实际上，这就是重点。`PooledConnection`界面设计*允许*`PooledConnection`实例成为与实例*不同的*对象`Connection`。

为什么要这么做？那么在 XA 实现中，可能有`Connection`来自不同数据库供应商的许多不同实现，并且这些`PooledConnection`类旨在处理最重要的“东西”；例如跨多个数据库的事务协调。保持这两个接口不同意味着 XA 实现不需要将 XA 级连接实现为包装对象。

当然，既然`PooledConnection`和`Connection` *接口*，它们可以由同一个连接类实现......如果情况需要的话。

（或者至少，这是我的理论。要获得明确的答案，您需要询问编写产生这些接口的规范的人。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T18:26:13.427

A`PooledConnection`是物理连接的**句柄。**这个物理连接对象可能是一个 JDBC `Connection`，但另一方面它也可能是一个较低级别的特定于数据库的构造。

句柄是连接池用来创建逻辑`Connection`对象以分发给连接池的客户端（使用该`getConnection()`方法。当客户端关闭该连接时，连接池会被通知该连接`PooledConnection`再次可用。

A`PooledConnection`不打算直接用作 a `Connection`，因此它不扩展 Connection 接口。

# sql - Oracle 检查约束

> ID：11538869
> 
> 赞同：3
> 
> 时间：2012-07-18T10:01:35.180
> 
> 标签：sql, oracle, jpa

假设我有一个

`table User(userid, usernama)`和 a `table Owner(ownerid, ownername)`和 join `table UserOwnerMapping(userid, ownerid, IS_MASTER)` ，在用户和所有者之间创建多对多

is_master 默认为“N”。一个用户只能有一个主人。

如何使用约束来强制一个用户不超过一个主控？

我正在使用甲骨文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:09:42.143

您可以使用唯一的基于函数的索引来实现约束：

```
create unique index idx on userownermapping 
    (case when is_master='Y' then userid end); 
```

这只会在 is_master = 'Y' 时索引用户 ID，因此当 is_master = 'Y' 时强制用户 ID 唯一，否则不会：

```
SQL> create table UserOwnerMapping (userid integer, ownerid integer, IS_MASTER varchar2(1));

Table created.

SQL> 
SQL> create unique index idx on userownermapping 
  2      (case when is_master='Y' then userid end);

Index created.

SQL>     
SQL> insert into UserOwnerMapping (userid, ownerid, IS_MASTER) values (1, 2, 'Y');

1 row created.

SQL> 
SQL> insert into UserOwnerMapping (userid, ownerid, IS_MASTER) values (1, 3, 'N');

1 row created.

SQL>     
SQL> insert into UserOwnerMapping (userid, ownerid, IS_MASTER) values (1, 4, 'N');

1 row created.

SQL> 
SQL> insert into UserOwnerMapping (userid, ownerid, IS_MASTER) values (1, 5, 'Y');
insert into UserOwnerMapping (userid, ownerid, IS_MASTER) values (1, 5, 'Y')
*
ERROR at line 1:
ORA-00001: unique constraint (MYSCHEMA.IDX) violated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:08:41.807

使`userid`列唯一可以解决问题。为什么需要`is_master`？

你的意思是`ownerid`可以`null`在`UserOwnerMapping`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:45:32.043

您需要在 UserOwnerMapping 表上创建一个预插入触发器。这需要检查该 userid/ownerid 组合是否存在 IS_MASTER = Y 行。

# android - 在android中滚动时使滚动视图的边缘消失

> ID：11538873
> 
> 赞同：46
> 
> 时间：2012-07-18T10:01:46.173
> 
> 标签：android, scrollview, fade

我有`ScrollView`一个图像。

`ScrollView`当我滚动图像时，我希望边缘产生淡入淡出效果。我不是在谈论当你到达卷轴尽头时得到的效果。我希望渐变一直存在。

这就是我所做的（没有任何效果）：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.84"
    android:background="@drawable/screen_nespresso"
    android:fadingEdge="horizontal"
    android:fadingEdgeLength="@dimen/padding_large"
    android:fillViewport="false"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:visibility="visible" > 
```

谢谢！

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-05-24T00:31:08.843

我不确定您是否可以这样做，但是这对我有用：

```
<ScrollView android:requiresFadingEdge="vertical"> 
```

在您的代码中，您可以执行以下操作

```
ScrollView scroll = findById(); scroll.setFadingEdgeLength(150); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-13T05:58:24.533

这是水平的：

```
<HorizontalScrollView
    android:id="@+id/scroll"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:requiresFadingEdge="horizontal"
    android:fadingEdgeLength="80dp"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-19T17:39:18.310

在 ScrollView xml 代码中添加这些行。

```
<ScrollView
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fadeScrollbars="true"
    android:requiresFadingEdge="vertical"
    android:fadingEdgeLength="50dp"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-08T14:16:22.007

只需在滚动视图中添加这 3 行代码，它就会看起来很棒！

```
 android:fadingEdgeLength="80dp"
 android:overScrollMode="never"
 android:requiresFadingEdge="vertical" 
```

# linux - 如何从 Opensubtitles.org 下载特定语言的所有字幕？

> ID：11538875
> 
> 赞同：16
> 
> 时间：2012-07-18T10:01:49.213
> 
> 标签：linux, wget

对不起，如果这篇文章与这个论坛无关，但我找不到任何其他地方来问我的问题。如果您为我介绍一个适合这篇文章的地方，我们将不胜感激。顺便说一句，我正在尝试从 Opensubtitles.org 以特定语言（比如英语）下载所有字幕，并找到它们的另一种语言（比如阿拉伯语）的翻译。我试过 wget，但我无法从这个站点下载任何有用的东西。（我需要 .srt、.zip 和 .txt 文件）大家可以帮帮我吗？

最好的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T12:51:38.793

单独下载所有内容会给他们的服务器带来不必要的负载。最好使用类似[http://opus.lingfil.uu.se/OpenSubtitles.php](http://opus.lingfil.uu.se/OpenSubtitles.php)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T10:48:17.663

下载链接类似于：

```
http://dl.opensubtitles.org/en/download/sub/4617044 
```

其中 4617044 是字幕的 ID。您可以将此 URL 与 wget 一起使用来下载它，但它没有正确的文件名。

或者，您可以使用[XML-RPC api](http://trac.opensubtitles.org/projects/opensubtitles/wiki/XMLRPC)来搜索和下载字幕。

# blogger - 如何将此 Javascript 加载到我的 blogspot 页面？

> ID：11538890
> 
> 赞同：0
> 
> 时间：2012-07-18T10:02:41.057
> 
> 标签：blogger

再会！

新手，我在 google 中找到了这个 Javascript，我不知道如何将结果插入到我的新博客文章中。我想在新博客文章中显示随机文本

```
<script type="text/javascript">
<!--
//I. Array of banner that will randomly appear

var randomquote = new Array ( );
randomquote[0] = '<em>Allergic reactions</em>';
randomquote[1] = '<em>Dental hygiene </em>';
randomquote[2] = '<em>Diabetes</em>';
randomquote[3] = '<em>Back pain</em>';
randomquote[4] = '<em>Weight loss </em>';
randomquote[5] = '<em>Heat cramps</em>';
randomquote[6] = '<em>Heat stroke</em>';
randomquote[7] = '<em>Pain Medication </em>';
randomquote[8] = '<em>Diet plan</em>';
randomquote[9] = '<em>Dehydration</em>';

//II. function to generate number from 0 to n

function randomzero (n)
{
  return ( Math.floor ( Math.random ( )*0.9999999999999999* (n + 1)) );
}

//III. assign any random number from 0 to 2 to x.

x = randomzero(2);

//IV. display the text 

document.write(randomquote[x]);
//-->

</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T07:58:09.117

这很简单。我已经在博客中尝试过并且工作正常。

1.  打开你的博客
2.  创建新帖子
3.  使用 HTML 模式并粘贴上面的代码
4.  保存您的帖子并检查您的 HTML 代码是否仍然相同（我尝试博客最后更改了一些行）。
5.  预览您的帖子，您将看到诸如*过敏反应之类的文字*
6.  关闭预览，再次预览你的帖子，现在文字应该不一样了，比如*Diabetes*

您可以在 javascript 之前和之后添加任何文本（当然使用 HTML 格式）

# c# - 如何 ping 部署在 iis 中的网站/ip

> ID：11538896
> 
> 赞同：0
> 
> 时间：2012-07-18T10:02:55.367
> 
> 标签：c#, asp.net, ping

我需要创建一个旨在监控/检查部署在 iis 上的内部应用程序的连接性的网站，它就像我们开发的内部网站的链接列表。问题是，我如何才能检查网站是否已启动并运行？以及如何检查网站是否已关闭？我将简单地显示我们系统的链接并根据它们的状态对其进行着色，绿色表示启动，红色表示关闭或有错误..希望您的建议。示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:06:29.953

只需从该服务器加载任何内容，如果它加载您的站点已启动并正在运行，如果它没有加载，则只生成错误或显示红色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:08:41.307

最简单的方法是运行 Windows 服务或计划任务，它针对网站列表执行 WebRequests 并检查状态代码。

如果返回状态码 200，则显示绿色。任何其他（4xx、5xx、超时）显示为红色。让服务将结果存储在数据库中，并从该数据库中读取“红绿”页面。

这将是一个通用的、一刀切的解决方案。它可能不适用于所有站点，因为某些站点可能具有基本身份验证，在这种情况下，您的监视器将错误地记录该站点已关闭。因此，您需要针对站点存储元数据并执行基本身份验证（或任何其他业务逻辑）以确定它是启动还是关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:07:35.170

如果您可以访问要监视的网站，那么我认为最简单的方法是在要监视的网站上放置一个状态页面，以供您的服务轮询。这样，如果网站已启动，您可以通过阅读页面内容从中获取更高级的状态信息。

如果您只想检查 http 状态，则只需访问网站上的任何页面（最好是小页面！）并检查响应状态代码。

就像是

```
 // prepare the web page we will be asking for
                HttpWebRequest request = (HttpWebRequest)
                    WebRequest.Create(Url);
                //if (AuthRequired())
                //    request.Credentials = new NetworkCredential(Username, Password);
                // execute the request
                HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

然后你可以阅读 response.StatusCode

# eclipse - BlobUserType 类型的方法 nullSafeSet(PreparedStatement, Object, int, SessionImplementor) 必须覆盖或实现超类型方法

> ID：11538899
> 
> 赞同：3
> 
> 时间：2012-07-18T10:03:03.947
> 
> 标签：eclipse, hibernate

我正在尝试运行导入的开源，但运行后出现此错误：

```
The method nullSafeSet(PreparedStatement, Object, int, SessionImplementor) of type        
BlobUserType must override or implement a supertype method 
```

这是我没有在上面放任何东西的方法，因为我真的不需要它，但我必须坚持它。

```
 @Override
protected void nullSafeSet(PreparedStatement ps, Object value , int index ,      
    SessionImplementor si) throws SQLException{} 
```

这是课程代码：

```
 package org.squashtest.csp.tm.internal.infrastructure.hibernate;

   import java.io.IOException;
   import java.io.InputStream;
   import java.sql.PreparedStatement;
   import java.sql.ResultSet;
   import java.sql.SQLException;
   import java.sql.Types;

   import org.hibernate.HibernateException;
   import org.springframework.jdbc.support.lob.LobCreator;
   import org.springframework.jdbc.support.lob.LobHandler;
   import org.springframework.orm.hibernate3.support.AbstractLobType;
   import org.hibernate.engine.SessionImplementor;
   public class BlobUserType extends AbstractLobType {

@Override
public int[] sqlTypes() {
    return new int[] {Types.BLOB};
}

@Override
public Class<?> returnedClass() {
    return InputStream.class;
}

@Override
protected Object nullSafeGetInternal(ResultSet rs, String[] names,
        Object owner, LobHandler lobHandler) throws SQLException,
        IOException, HibernateException {
       return lobHandler.getBlobAsBinaryStream(rs, names[0]);

}

@Override
protected void nullSafeSetInternal(PreparedStatement ps, int index, Object   
    value, LobCreator lobCreator) throws SQLException,
        IOException, HibernateException {

      if (value != null) {
          lobCreator.setBlobAsBinaryStream(ps, index, (InputStream) value, 
         -1);

     }
      else {
            lobCreator.setBlobAsBytes(ps, index, null);
      }

}

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:29:05.087

此方法是针对与您使用的不同版本的 Hibernate 编写的。如您所见，例如[Hibernate 3.5中的 UserType 确实具有以下内容：](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/usertype/UserType.html#nullSafeSet%28java.sql.PreparedStatement,%20java.lang.Object,%20int%29)

```
void nullSafeSet(PreparedStatement st,
                 Object value,
                 int index) throws HibernateException, SQLException 
```

另一方面，[Hibernate 4.1确实有这样一个 UserType 类，其中方法签名与您的方法匹配：](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/usertype/UserType.html#nullSafeSet%28java.sql.PreparedStatement,%20java.lang.Object,%20int,%20org.hibernate.engine.spi.SessionImplementor%29)

```
void nullSafeSet(PreparedStatement st,
                 Object value,
                 int index,
                 SessionImplementor session)
                 throws HibernateException, SQLException 
```

# c# - 在 Windows 8 Metro 应用程序上实施 Google Analytics

> ID：11538904
> 
> 赞同：4
> 
> 时间：2012-07-18T10:03:17.100
> 
> 标签：c#, windows-8, google-analytics, windows-store-apps

我想在 Windows 8 / Metro 应用程序上实现 Google Analytics 跟踪。

没有 Windows SDK。

在您看来，最好的方法是什么？

谢谢，最好的问候

杰弗里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:16:11.640

[MarkedUp Analytics for Windows 8](https://markedup.com/register?utm_campaign=stackoverflowquestion)是 Windows 8 的另一个选项 - 它支持 WinJS 和 WinRT，甚至可以离线工作。它目前是免费的。（免责声明：我在 MarkedUp 上工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T00:45:17.303

这是你要找的东西吗？这是我们团队博客中关于我们如何解决该问题的文章：http: [//dreamteam-mobile.com/blog/2012/08/windows-8-metro-apps-google-analytics/](http://dreamteam-mobile.com/blog/2012/08/windows-8-metro-apps-google-analytics/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T03:00:29.767

这是一个很好的，具有很多功能和活动：

[https://github.com/AttackPattern/CSharpAnalytics](https://github.com/AttackPattern/CSharpAnalytics)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-05T00:14:48.813

如果您正在创建一个新应用程序，您可能希望使用[适用于 Windows 8 和 Windows Phone 的新 Google Analytics SDK](http://googleanalyticssdk.codeplex.com)。谷歌最近对 GA 进行了重大更新，并专门为应用程序（相对于网站）添加了各种时髦的功能。随着这一变化，他们废弃了旧的 UTM 协议，现在需要为所有应用程序使用更新的测量协议。AFAIK，这个 SDK 是唯一支持新测量协议的 SDK，因此是唯一一个与新的 GA 移动应用程序属性一起使用的 SDK。注意：您仍然可以将这些其他 SDK 与现有的 GA 属性一起使用，或者通过提供可验证的域名来欺骗 GA 认为您的应用程序是一个网站。

完全披露：我编写了这个 SDK 并出于这个原因创建了它。它支持 Win8 JS、Win8 Xaml、WP7 和 WP8。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-21T02:40:53.540

许多人不知道 Microsoft 提供**Telemetry SDK** [http://msdn.microsoft.com/library/windows/apps/hh967768](http://msdn.microsoft.com/library/windows/apps/hh967768)作为 nuget 扩展。

如果 GA 不是很强的要求，您可以尝试一下。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T02:22:38.533

我们在 Nascent 遇到了同样的问题，因此我们为它创建了一个开源项目。

查看[适用于 WinRT 的 Google Analytics](http://gawinrt.codeplex.com/)：一个非常简单但功能强大的适用于 Windows Store 应用程序的 Google Analytics 客户端库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-15T06:56:28.230

**免责声明：我是 Gappalytics 的作者**

您应该尝试[使用 Gappalytics](https://www.nuget.org/packages/Gappalytics/)进行代码/UI 事件跟踪，它是一个非常简单的库，可让您充分发挥 Google 分析的潜力。

它比 lib 之前提到的效果更好，因为它可以保持用户的唯一性，这样您的数据就不会倾斜。

# android - 在Android应用程序中忘记密码发送到电子邮件

> ID：11538906
> 
> 赞同：1
> 
> 时间：2012-07-18T10:03:20.900
> 
> 标签：android

嗨，我已经开发了一个登录表单（用户名、密码和提交按钮），使用 MySQL 连接通过我的 android 应用程序中的soap webservices。在这里我忘记了密码意味着我无法访问我的帐户。那么如何访问我的帐户。第一个注册页面在进入登录页面之前全部完成。注册页面有用户名、密码和电子邮件。所以当我忘记密码时意味着点击忘记密码文本视图。然后是忘记密码活动。当我输入我注册的电子邮件 ID 时，这意味着我的密码已发送到我的电子邮件 ID。我该怎么做。请指导我。如下图：![在此处输入图像描述](../Images/999d1be56fed36442976b19198e2b5bc.png)

![在此处输入图像描述](../Images/8070619d6ef096c2283ce0d600c01b71.png)

如何创建 dis 应用程序。我在活动的 XML 资源中完成了 dis 代码。如何创建 ForgetPassword Java 代码？我似乎无法做到这一点。

现在我的java代码是：

登录.java：

```
package com.soap;

 import org.ksoap2.SoapEnvelope;
 import org.ksoap2.serialization.PropertyInfo;
 import org.ksoap2.serialization.SoapObject;
 import org.ksoap2.serialization.SoapPrimitive;
 import org.ksoap2.serialization.SoapSerializationEnvelope;
 import org.ksoap2.transport.HttpTransportSE;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;

 public class Login extends Activity {
 private final String NAMESPACE = "http://ws.userlogin.com";
private final String URL = "http://192.168.1.168:8085/Login/services/Login?wsdl";
private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    Button register = (Button) findViewById(R.id.btn_reg);
    register.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), Register.class);
            startActivity(i);
        }
    });
    Button logout = (Button) findViewById(R.id.btn_logout);
    logout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), Login.class);
            startActivity(i);
        }
    });
    TextView forgetpassword = (TextView) findViewById(R.id.TextView03);
    forgetpassword.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), ForgetPassword.class);
            startActivity(i);
        }
    });
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

     public void onClick(View arg0) {
     loginAction();

        }
       });
        }

  private void loginAction(){
  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

           if(status.equals("Success!"))
            {
               Intent intent = new Intent(Login.this,HomePage.class);
               intent.putExtra("username",userName.getText().toString());
               startActivity(intent);

            }
           else
            {
               Intent i = new Intent(getApplicationContext(), Login.class);
               startActivity(i);
            }
           }

    catch(Exception e){

    }
   }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:50:29.990

如果用户密码未加密。

1-创建网络服务 emailPasswordToUser 这个“emailPasswordToUser”网络服务将接收一个“emailaddress”参数，用户将在您的Android应用程序中输入该参数，提交按钮后，您的“emailPasswordToUser”将通过KSOAP库命中。

"emailPasswordToUser" 此 Web 服务将检查：

A - 用户电子邮件地址是否存在于数据库中。

B - 如果存在，它将从“电子邮件地址”中检索用户信息，该信息是从 Web 服务参数接收的，并将用户密码通过电子邮件发送到该“电子邮件地址”，并将返回消息到 Android 端，该消息将被解析为“您的密码已发送到您的电子邮件地址”

C - 如果它不存在，webservice 将返回一条消息“没有这样的用户存在”

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:34:44.637

您必须创建一些可以访问 MySQL 的服务器，通过电子邮件找到密码并将电子邮件发送给用户。您不应该在应用程序中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:35:51.107

1.  您可以使用 Java Mail API 从您的应用程序发送邮件
2.  您必须有 Internet 连接才能在您的应用程序中使用此功能。
3.  有关 Java 邮件 API 实现的信息，请参阅此链接。[邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

# php - 从填充表中删除行

> ID：11538911
> 
> 赞同：0
> 
> 时间：2012-07-18T10:03:29.463
> 
> 标签：php, html

我目前面临一个奇怪的问题，即我的调试页面没有出现任何错误。我的表由几行组成，只有表的第一行不能删除。

样品形式：

```
$DB = new PDO('sqlite:database/Sample.db');
$result = $DB->query("select * from staff");        
foreach ($result as $row)
{
    $StaffNo= $row['StaffNo'];
    $Name= $row['Name'];
    $TelNo= $row ['TelNo']; 

 echo "<tr>";
//Go to remove.php to remove
echo "<form action=\"Remove.php\" method=\"post\">";
echo "<input type=\"hidden\" name=\"StaffNo\" value=\"$StaffNo\">";
echo "<input type=\"submit\" onclick=\"return confirm('Yes/No')\"/>";
echo "</form>";
 echo "</td>";
echo '<td data-column-name="Name" char="data">'.$Name.'</td>';
echo '<td data-column-name="TelNo" char="data">'.$TelNo.'</td>';
</tr>
} 
```

删除.php：

```
$StaffNo= $_POST["StaffNo"];
$DB = new PDO('sqlite:database/Sample.db');

$DB->query("DELETE FROM Staff WHERE StaffNo=".$StaffNo);

@header("location:view.php"); 
```

从上面的代码中，我可以删除除第一行之外的所有示例记录。它不会被删除......如果我在某处做错了，请告知......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:29:40.090

我已经尝试了您的代码，除了损坏的表格代码之外，一切似乎都很好。确保您的表格正确 ( `<table><tr><td>Content</td></tr></table>`)。在您的问题中，您缺少`<td>`第一个文件第 9 行的开头以及缺少的`<table>`标签。有些浏览器不能很好地处理损坏的表格，这可能会弄乱您的表单。

如果是空字符串，您的查询也会中断`$StaffNo`，因此请仔细检查。

您还可以尝试`header()`使用 删除呼叫并打印出错误`$DB->errorInfo()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:51:19.900

要将变量注入隐藏字段，您应该键入“.$StaffNo”。而不是“$StaffNo”。可能它不会删除表的第一行，因为它是唯一定义了 StaffNo 的行。

# ruby-on-rails-3 - rails 3中具有设计和acts_as_tenant的用户的唯一性

> ID：11538913
> 
> 赞同：7
> 
> 时间：2012-07-18T10:03:36.080
> 
> 标签：ruby-on-rails-3, devise, multi-tenant

我正在使用[acts_as_tenant](https://github.com/ErwinM/acts_as_tenant/) gem 来管理多租户，并且正在使用设计来管理用户。

我只为租户设置了设计用户模型和帐户模型。我可以针对多个租户创建用户——这一切都很好，除了当我尝试针对不同的租户 ID 使用相同的电子邮件创建两个用户时，我得到一个 uniqeness 错误。我正在使用所描述的 validates_uniqueness_to_tenant 选项。

用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

  acts_as_tenant(:account)
  validates_uniqueness_to_tenant :email
end 
```

账户模式

```
class Account < ActiveRecord::Base
  attr_accessible :name
end 
```

应用控制器

```
class ApplicationController < ActionController::Base
  set_current_tenant_by_subdomain(:account, :subdomain)
  protect_from_forgery
end 
```

这看起来应该基于acts_as_tenant中的所有文档工作，我是否需要在设计级别覆盖某些东西？

编辑：经过一番摸索和休息后，我相信问题是因为默认情况下，Devise 已向电子邮件列添加了唯一索引。这显然与acts_as_tenant 想要做的事情不符......我将尝试删除索引并查看Devise 是否呕吐。

编辑2：好的，现在已经正式放弃了。我对主站点进行了手动身份验证，并且可以与acts_as_tenant 一起正常工作。我只能假设acts_as_tenant 和Devise 在某个层次之间存在一些不兼容——在这个阶段我无法找到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T18:28:26.753

这样做的唯一方法是从设计中删除可验证模块并运行您自己的验证，如下所示：

```
class User < ActiveRecord::Base
  acts_as_tenant :account
  attr_accessible :email, :password, :remember_me

  #remove :validatable
  devise :database_authenticatable, :registerable,
    :recoverable, :rememberable, :trackable

  #run own validations
  #I've omitted any emailformatting checks for clarity's sake.
  validates :email, 
    presence: true,
    uniqueness: { scope: :account_id, case_sensitive: false }
  validates :password,
    presence: true,
    length: { :in => 6..20 },
    :if => :password_required?

protected
  # copied from validatable module
  def password_required?
    !persisted? || !password.nil? || !password_confirmation.nil?
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:07:47.153

我尚未对其进行测试，但我想知道更改顺序是否有助于acts_as_tenant 在设计接管之前完成其工作。

```
class User < ActiveRecord::Base

  acts_as_tenant(:account)
  validates_uniqueness_to_tenant :email

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T21:41:16.413

刚碰到这个问题。Swam 的解决方案非常好。

但我更喜欢不覆盖默认行为。所以我想出了这个解决方案：

```
validate :remove_old_email_validation_error
validates_uniqueness_of :email, :allow_blank => true, :if => :email_changed?, :scope => [:account_id]

private

def remove_old_email_validation_error
  errors.delete(:email)
end 
```

我们删除了电子邮件的默认验证错误，因此忽略了验证检查，我们再次进行自己的验证。我添加的内容来自 Validatable 模块，但我已添加`:scope`到其中。

保持秩序很重要。`devise`在命令后添加上面的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-09T08:44:46.687

我将其解决为：

`validate :remove_old_uniquess_email_error`

```
private

  def remove_old_uniquess_email_error
   errors.delete(:email) if self.company_id.nil? && errors[:email].present? && errors[:email] == ["already taken"]
  end 
```

# svn - 如何对已经存在的 svn 目录执行 svn 更新

> ID：11538917
> 
> 赞同：0
> 
> 时间：2012-07-18T10:03:54.133
> 
> 标签：svn, jenkins

我有两个 repo A 和 B。首先我将 repo A 签出到我的 Eulen 目录。

它包含带有一些模块的模块文件夹。现在我想更新存储库 B 到我的 Eulen->modules 文件夹中的模块文件夹。

所以我的问题是当我从 repo B 中获取模块时，它正在清理我目录的 modules 文件夹并将模块放入 repo B。

为了代替替换模块文件夹，我只需要 repo B 的模块和模块文件夹中已经存在的模块。

如何通过替换现有模块来执行从 repo B 到模块文件夹的模块签出？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:16:46.613

There is no way to make this so far as i know. You can try externals or a relocate, but does not what you need.

Maybe its better to use Git. This offers ways to do this.

Here you can find a quick [Git Hosting Service](http://www.saas-secure.com/en/git-hosting/index.html) to evaluate.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:25:58.893

这对于 SVN 是不可能的。

Subversion 在它检出的每个目录中都有一个元目录（.svn 或 _svn）。基本上，此元信息对应于存储库中的特定路径。它不允许您通过 svn 在同一个地方添加另一个 repo 内容。

相反，您可以 ->

*   使用[SVN 外部](http://svnbook.red-bean.com/en/1.0/ch07s03.html)
*   在单独的目录中签出 repo B 中的模块，然后使用脚本将它们移动到所需的位置。

# android - android：错误解析包

> ID：11538918
> 
> 赞同：1
> 
> 时间：2012-07-18T10:04:01.823
> 
> 标签：android, parsing, package

我正在从服务器下载 Android 应用程序并将其保存到内部存储器：

```
URLConnection connection = url.openConnection();
connection.connect();
// download the file
InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream(getFilesDir() + "/filename");
byte data[] = new byte[1024];
while ((count = input.read(data)) != -1) {
output.write(data, 0, count);
}
output.flush();
output.close();
input.close(); 
```

下载完成后，会出现通知。单击通知时，应安装该应用程序。

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(new File(getFilesDir()+ "/filename")),"application/vnd.android.package-archive");
PendingIntent act = PendingIntent.getActivity(MainActivity._activity,0, i, 0);
notification.setLatestEventInfo("TEXT", "TEXT, act); 
```

但是当我点击通知时，会出现一个对话框，上面写着：解析包错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:06:14.017

具有相同包名称的另一个应用程序可能已安装在设备中。所以你得到了错误。

# javascript - 工具栏和 XMLHttpRequest 状态 = 0

> ID：11538920
> 
> 赞同：0
> 
> 时间：2012-07-18T10:04:06.263
> 
> 标签：javascript, firefox-addon, xmlhttprequest

我正在开发一个带有单个按钮的 Firefox 工具栏，当单击该按钮时，可以从具有相同域的当前页面检索链接并遵守“**[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)**”。

所以假设我们在像 http://example.com/ 这样的页面上，它会提取像[http://example.com/some-other-page](http://example.com/)这样[的链接](http://example.com/some-other-page)

而这一切目前正在发挥作用。

我的问题是，一旦我获得所有链接，我希望我的扩展程序能够`XMLHttpRequest`检索链接页面的标题。

但是当我尝试这样做时，我得到一个响应状态 = 0。

这是我正在做的事情：

```
for(var j=0;j<numLinks;j++){
  var request = new XMLHttpRequest();
  alert(linksHref[j]);
  request.open('GET', linksHref[j], true);
  request.send();
  alert(request.status);
  if (request.status === 200) {
    ...
  }
} 
```

但它永远不会得到响应状态 200。

这段代码有什么问题？

我在[另一个问题](https://stackoverflow.com/questions/7131096/ff-extension-getting-xmlhttp-status-0)中发现建议使用 Request 模块。我试过但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:15:47.160

您应该为您的请求提供一个 onload 事件：

```
request.onload = 函数（）
{

   // 你想要发生的事情
   如果（request.readyState === 4 && request.status === 200）
   {

       // 成功！

   }

}

```

# javascript - 设置jquery对话框的高度

> ID：11538926
> 
> 赞同：0
> 
> 时间：2012-07-18T10:04:27.870
> 
> 标签：javascript, jquery, dialog

我有一个包含图像 (img) 的 jquery 对话框。我正在尝试设置框的高度以匹配图像，但我发现两者都设置为小于我指定的值。例如，以下几行：

```
console.log("h1 " + $('#display').height());
$("#display").dialog('option', 'height', img.height);                               
console.log("h2 " + $('#display').height());
console.log("ih " + img.height); 
```

向控制台生成以下输出：

```
h1 564 
h2 564 
ih 640 
```

这向我表明 $('#creativeImageDisplay').height() 是指内部高度，但选项中的“高度”是指外部高度。有没有办法设置内部高度（使得外部高度相应增加）？

*编辑*

```
('#display').outerHeight(true) 652 
('#display').outerHeight(false) 652 
('#display')innerHeight() 652 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:38:34.770

生成对话框后，它将输出如下内容：

```
<div class="ui-dialog ...">
    <div class="ui-dialog-titlebar ..."> ... </div>
    <div id="display" class="ui-dialog-content ..."> ....</div>
    <div class="ui-dialog-buttonpane ..."> ... </div>
</div> 
```

您可以简单地尝试`$("#display").height(im.height());`内部高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:04:03.583

**HTML：**

```
<div id="panel">
  <input type="button" id="btndialog1" name="btndialog1" value="Show Dialogue1"/>
  &nbsp;
  <input type="button" id="btndialog2" name="btndialog2" value="Show Dialogue2"/>
  <br/>
  <div id="imgdialog1" title="Dialogue1 with Image">
    <p>
      <img src="http://leandrovieira.com/projects/jquery/lightbox/photos/image1.jpg" id="img1">
    </p>
  </div>
  <div id="imgdialog2" title="Dialogue2 with image">
    <p>
      <img id="img2" src="http://www.xda-developers.com/wp-content/uploads/2011/02/android_boot_image.jpg"/>
    </p>
  </div>
</div> 
```

**查询：**

```
$(function() {
    $('#imgdialog1').dialog({
        autoOpen: false,
        'width': 'auto',
        'height': 'auto'
    });
    $('#imgdialog2').dialog({
        autoOpen: false,
        'width': 'auto',
        'height': 'auto'
    });
    $("#btndialog1").click(function() {
        $('#imgdialog1').dialog('open');
    });
    $("#btndialog2").click(function() {
        $('#imgdialog2').dialog('open');
    });
}); 
```

我已经做了垃圾箱，所以试试[http://codebins.com/bin/4ldqpad](http://codebins.com/bin/4ldqpad)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:57:02.593

只是为了整洁。感谢您提供的所有有用的意见。事实证明，问题在于我将图像位置设置为“固定”，这由于某种原因阻止了自动调整大小的工作。

# javascript - 延迟 on("click") 事件

> ID：11538927
> 
> 赞同：0
> 
> 时间：2012-07-18T10:04:34.140
> 
> 标签：javascript

我有这个代码

```
$("input").on('keyup', function () {
 $("block"),slideDown("slow")...... 
```

问题是当我写得很快时，块会再次做“动画”，而且比我写的要慢得多

是否有另一个事件可以用来仅“在我完成编写后”运行代码让我们说，我停止编写，然后它需要 500 毫秒，然后代码被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:09:02.877

```
function throttle(fn, time ){
    var timer = 0;
    return function() {
        clearTimeout(timer);
        timer = setTimeout($.proxy(fn, this), time);
    };
}

$("input").on('keyup', throttle(function () {
    $("block").slideDown("slow")
},500)); 
```

油门返回一个新函数，该函数在自上次调用函数后经过 500 毫秒后调用旧函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:10:26.853

像这样的东西是我以前用过的：

```
$(input).keyup(onKeyUp);

/**
 * Handler for the keyup event
 */
function onKeyUp() {
    //reset
    clearTimeout(myTimer);

    myTimer = setTimeout(otherFunction, 500);
} 
```

现在 otherFunction 将在 500 毫秒后被调用，但在每个 keyup 事件上，此计时器将被重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:18:33.607

尝试使用...

```
function slideDown(){
   ...
}    
// call
setTimeout(function(){ slideDown(); }, 1000); 
```

# android - 两列布局，第一列 wrap_content，第二列 fill_parent

> ID：11538937
> 
> 赞同：4
> 
> 时间：2012-07-18T10:04:58.230
> 
> 标签：android, android-layout

我必须设计 UI 以包含两列。

第一列应该包含标签，同一行中的第二列应该填充整个空间。下面是一些例子：

[http://temp.chrzanowski.info/so_layout.png](http://temp.chrzanowski.info/so_layout.png)

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:20:31.327

`TableLayout`与_`strechColumns = "1"`

它拉伸占据剩余空间的第二列。

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="1" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:08:52.143

以下`TableLayout`将为您提供所需的输出：

```
<TableLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:stretchColumns="1">
   <TableRow>
      <TextView
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Bla bla bla"
           android:singleLine="true" />            <!-- first column's view -->

      <EditText
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" /> <!-- second column's view -->
   </TableRow>

   ...

</TableLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:27:19.610

作为替代方案，您可以像这样执行 LinearLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100"
    android:gravity="center_vertical">
    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="40">
        <TextView
            android:layout_weight="1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="A very very very long text"
            android:singleLine="true"
            android:scrollHorizontally="true"
            android:ellipsize="end">
        </TextView>
    </LinearLayout>
    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="60">
        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="TextBox">
        </EditText>
    </LinearLayout>
</LinearLayout> 
```

要调整列的宽度，请修改`layout_weight`每个 LinearLayout 容器的。较小的值意味着较小的宽度，并且两个权重必须等于 100。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T10:21:10.640

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

        <LinearLayout 
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Label 1"
                android:layout_marginLeft="7dp"
                android:layout_marginTop="20dp"/>
            <TextView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Label Loooong2"
                android:layout_marginLeft="7dp"
                android:layout_marginTop="30dp"/>
            <TextView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Label 3"
                android:layout_marginLeft="7dp"
                android:layout_marginTop="30dp"/>
        </LinearLayout>

        <LinearLayout 
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:orientation="vertical">

            <EditText 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:hint="TextBox"/>
            <EditText 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:hint="TextBox"/>
            <EditText 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:hint="TextBox"/>
        </LinearLayout>

</LinearLayout> 
```

# mvvm - MVVM 教程 - '包装 IClientChannel' 问题

> ID：11538938
> 
> 赞同：1
> 
> 时间：2012-07-18T10:04:58.917
> 
> 标签：mvvm, wcf-client

这是关于 Mark Miller 的 MVVM 教程的问题，请[点击此处](http://www.developmentalmadness.com/archive/2010/03/08/mvvm-with-prism-101-ndash-part-6b-wrapping-iclientchannel.aspx)。

我有 3 个关于“包装 IClientChannel”的问题。

**问题一：**

马克写道：

> 下面是实例化 ClientChannelWrapper 的方法：
> 
> IClientChannelWrapper service = new ClientChannelWrapper("BasicHttpBinding_IMessageEndpoint");
> 
> 其中“BasicHttpBinding_IMessageEndPoint”是 ClientConfig 文件中端点配置的名称。

我的问题是 - 当我以前执行“添加服务引用...”时 - 我可以创建一个客户端对象，而无需指定端点字符串。使用 Mark 的方法 - 它需要我指定这个字符串，这对我来说似乎是一个限制。无论如何在不传递端点字符串的情况下使用他的“IClientChannelWrapper”吗？以某种方式模仿“添加服务参考...”的作用？

.

**问题2**

我知道大多数涉及 WPF 应用程序联系 WCF 服务的示例 - 使用 ASYNC 操作。我的问题是 - 为什么会这样？如果我使用 Mark 的方法 - 这意味着我需要编写 2 个接口（SYNC 和 ASYNC），这似乎是开销。为什么人们不通过简单地从单独的线程调用它来调用 SYNC 操作？

.

**问题 3：**

马克的课程是否也适用于“双工”服务？

我有一个 WCF 服务，我需要连接它才能通过回调方法接收通知。

# wpf - 如果选中复选框，则启用 ValidationRule

> ID：11538939
> 
> 赞同：0
> 
> 时间：2012-07-18T10:04:59.633
> 
> 标签：wpf, vb.net, validation

我想验证一些控件，但前提是我的复选框被选中。（在这个例子中，我只显示一个文本框来验证）

我尝试使用 BindingGroup，但这意味着该复选框也已验证，这给了我错误的结果。

现在我尝试使用 MultiBinding：

```
<CheckBox Name="chkUseLqv"
              Grid.Row="6"
              Grid.Column="0"
              Margin="0,0,8,0"
              HorizontalAlignment="Right"
              VerticalAlignment="Center"
              Content="Use LQV"
              IsChecked="{Binding LqvConfigurationEnabled}" />

[...]

<GroupBox Grid.Row="1"
          Grid.RowSpan="6"
          Grid.Column="4"
          Margin="5"
          Header="LQV Configuration"
          IsEnabled="{Binding LqvConfigurationEnabled}">
  <Grid>
    <TextBox Name="txtLqvDatabaseServer"
             Grid.Row="1"
             Grid.Column="1"
             VerticalAlignment="Center"
             Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}">
      <TextBox.Text>
        <MultiBinding Converter="{Converters:LqvConfigurationMultiBindingConverter}" UpdateSourceTrigger="PropertyChanged">
          <MultiBinding.ValidationRules>
            <LocalValidationRules:LqvDatabaseServerValidator />
          </MultiBinding.ValidationRules>
          <Binding ElementName="chkUseLqv" Path="IsChecked" />
          <Binding Path="LqvDatabaseServer" />
        </MultiBinding>
      </TextBox.Text>
    </TextBox>
  </Grid>
</GroupBox> 
```

我的验证器：

```
Imports System.Text.RegularExpressions

Namespace ValidationRules
  Public Class LqvDatabaseServerValidator
    Inherits ValidationRule

    Public Overrides Function Validate(ByVal value As Object, ByVal cultureInfo As System.Globalization.CultureInfo) As System.Windows.Controls.ValidationResult
      Dim useLqv = CType(value, Object()).OfType(Of Boolean).First()
      Dim valueFromSource = CType(value, Object()).OfType(Of String).FirstOrDefault()

      If useLqv Then
        If String.IsNullOrEmpty(valueFromSource) Then
          Return New ValidationResult(False, "This field is required!")
        End If

        If Not (
          Regex.IsMatch(valueFromSource, "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$") OrElse
          Regex.IsMatch(valueFromSource, "^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$")
          ) Then
          Return New ValidationResult(False, "Invalid input!")
        End If
      End If

      Return ValidationResult.ValidResult
    End Function
  End Class
End Namespace 
```

转换器：

```
Imports System.Windows.Markup

Namespace Converters
  Public Class LqvConfigurationMultiBindingConverter
    Inherits MarkupExtension
    Implements IMultiValueConverter

    Public Sub New()
    End Sub

    Private _orig As Object()

    Public Function Convert(ByVal values() As Object, ByVal targetType As System.Type, ByVal parameter As Object, ByVal culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IMultiValueConverter.Convert
      _orig = values
      Return values.OfType(Of String).FirstOrDefault()
    End Function

    Public Function ConvertBack(ByVal value As Object, ByVal targetTypes() As System.Type, ByVal parameter As Object, ByVal culture As System.Globalization.CultureInfo) As Object() Implements System.Windows.Data.IMultiValueConverter.ConvertBack
      Return _orig
    End Function

    Public Overrides Function ProvideValue(ByVal serviceProvider As System.IServiceProvider) As Object
      Return New LqvConfigurationMultiBindingConverter()
    End Function
  End Class
End Namespace 
```

但它不起作用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:59:35.017

我是这样做的：

在资源中定义样式：

```
<Style x:Key="lqvDependingFields" TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate">
      <Setter.Value>
        <ControlTemplate />
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <DataTrigger Binding="{Binding ElementName=chkUseLqv, Path=IsChecked}" Value="true">
        <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ValidationErrorTemplate}" />
      </DataTrigger>
    </Style.Triggers>
  </Style> 
```

有一个复选框：

```
<CheckBox Name="chkUseLqv"
          Grid.Row="6"
          Grid.Column="0"
          Margin="0,0,8,0"
          HorizontalAlignment="Right"
          VerticalAlignment="Center"
          Content="Use LQV"
          IsChecked="{Binding LqvConfigurationEnabled}" /> 
```

使用控件上的样式：

```
 <TextBox Name="txtLqvDatabaseServer"
             Grid.Row="1"
             Grid.Column="1"
             VerticalAlignment="Center"
             DependencyProperties:AttachedWindowProperties.HasValidationError="{Binding LqvDatabaseServerValidationError}"
             Style="{StaticResource lqvDependingFields}">
      <TextBox.Text>
        <Binding NotifyOnSourceUpdated="True"
                 Path="LqvDatabaseServer"
                 UpdateSourceTrigger="PropertyChanged">
          <Binding.ValidationRules>
            <LocalValidationRules:LqvDatabaseServerValidator ValidatesOnTargetUpdated="True" />
          </Binding.ValidationRules>
        </Binding>
      </TextBox.Text>
    </TextBox> 
```

依赖属性：

```
#Region "HasValidationErrorProperty"

    Public Shared ReadOnly HasValidationErrorProperty As DependencyProperty =
      DependencyProperty.RegisterAttached("HasValidationError", GetType(Boolean), GetType(AttachedWindowProperties),
                                          New FrameworkPropertyMetadata(False, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
                                                                        Nothing, AddressOf CoerceHasValidationError))

    Public Shared Function GetHasValidationError(ByVal d As DependencyObject) As Boolean
      Return CBool(d.GetValue(HasValidationErrorProperty))
    End Function

    Public Shared Sub SetHasValidationError(ByVal d As DependencyObject, ByVal value As Boolean)
      d.SetValue(HasValidationErrorProperty, value)
    End Sub

    Private Shared Function CoerceHasValidationError(ByVal d As DependencyObject, ByVal baseValue As Object) As Object
      Dim result As Boolean = CBool(baseValue)

      If BindingOperations.IsDataBound(d, HasValidationErrorProperty) Then
        If GetHasErrorDescriptor(d) Is Nothing Then
          Dim desc = DependencyPropertyDescriptor.FromProperty(Validation.HasErrorProperty, d.GetType)
          desc.AddValueChanged(d, AddressOf OnHasErrorChanged)
          SetHasErrorDescriptor(d, desc)
          result = Validation.GetHasError(d)
        End If
      Else
        If GetHasErrorDescriptor(d) IsNot Nothing Then
          Dim desc As DependencyPropertyDescriptor = GetHasErrorDescriptor(d)
          desc.RemoveValueChanged(d, AddressOf OnHasErrorChanged)
          SetHasErrorDescriptor(d, Nothing)
        End If
      End If

      Return result
    End Function

    Private Shared Sub OnHasErrorChanged(ByVal sender As Object, ByVal e As EventArgs)
      Dim d As DependencyObject = TryCast(sender, DependencyObject)

      If d IsNot Nothing Then
        d.SetValue(HasValidationErrorProperty, d.GetValue(Validation.HasErrorProperty))
      End If
    End Sub

    Private Shared ReadOnly HasErrorDescriptorProperty As DependencyProperty =
      DependencyProperty.RegisterAttached("HasErrorDescriptor", GetType(DependencyPropertyDescriptor), GetType(AttachedWindowProperties))

    Private Shared Function GetHasErrorDescriptor(ByVal d As DependencyObject) As DependencyPropertyDescriptor
      Return CType(d.GetValue(HasErrorDescriptorProperty), DependencyPropertyDescriptor)
    End Function

    Private Shared Sub SetHasErrorDescriptor(ByVal d As DependencyObject, ByVal value As DependencyPropertyDescriptor)
      d.SetValue(HasErrorDescriptorProperty, value)
    End Sub

#End Region 
```

我的 ViewModel 中的属性在哪里`LqvDatabaseServer`和是。`LqvDatabaseServerValidationErrors`

# php - joomla文章错误

> ID：11538942
> 
> 赞同：0
> 
> 时间：2012-07-18T10:05:13.283
> 
> 标签：php, wampserver, joomla2.5

我在安装 joomla 后登录 joomla 主页时收到此错误...如何解决此错误？这是一个调用堆栈错误。在这些功能上，它给出了以下错误消息：

```
(!) Notice: Array to string conversion in C:\wamp\www\Joomla\components\com_content\models\articles.php on line 124

    Time    Memory  Function       Location    
1   0.0106  147704  {main}( )   ..\index.php:0

2   4.1993  3885048 JSite->dispatch( )  ..\index.php:42

3   4.2998  4098608 JComponentHelper::renderComponent( )    ..\application.php:197

4   4.3968  4122720 JComponentHelper::executeComponent( )   ..\helper.php:351

5   4.3976  4142608 require_once( '6    4.5327  4384488 JController->execute( ) ..\content.php:16

6   4.5327  4384488 JController->execute( ) ..\content.php:16

7   4.5327  4384632 ContentController->display( )   ..\controller.php:760

8   4.7422  4878680 JController->display( ) ..\controller.php:74

9   4.8532  5211688 ContentViewFeatured->display( ) ..\controller.php:721

10  4.8556  5214224 JView->get( )   ..\view.html.php:40

11  4.8556  5214344 ContentModelFeatured->getItems( )   ..\view.php:386

12  4.8560  5223336 ContentModelArticles->getItems( )   ..\featured.php:80

13  4.8560  5223832 JModelList->getItems( ) ..\articles.php:476

14  4.8561  5223952 ContentModelFeatured->getStoreId( ) ..\modellist.php:118

15  4.8561  5224024 ContentModelArticles->getStoreId( ) ..\featured.php:102 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:01:41.183

转到管理员登录单击站点=>全局配置->服务器选项卡单击错误报告下拉列表单击简单单击保存并关闭在站点页面上刷新您的 Web 浏览器，通知将消失。

该问题本身是由 PHP 5.4.x 中的错误引起的，该错误现在随 XAMPP 1.8 一起安装。它只是一个建议性通知，因此还没有“损坏”。稍后您可能会遇到问题，但 Joomla 开发人员已意识到该问题并密切关注事态发展。

# video - 如何判断视频是否在浏览器中播放？

> ID：11538943
> 
> 赞同：0
> 
> 时间：2012-07-18T10:05:14.557
> 
> 标签：video, browser

我想知道是否有办法从浏览器**外部**了解浏览器本身是否正在播放视频。如果可以为每个浏览器执行此操作，那就太好了。我想也许这可以通过在播放视频时检查浏览器创建的文件来完成......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:14:16.837

对于 Flash 视频，我能想到的一种方法是查看 Flash 播放器是否正在运行。然而，这并不是很有说服力，因为 Flash 播放器也可以用于 Flash 游戏。

# spring - Spring security JSP 标签——我需要哪些 jars？

> ID：11538944
> 
> 赞同：2
> 
> 时间：2012-07-18T10:05:18.473
> 
> 标签：spring, security, jsp, taglib

我有一个使用 Spring-MVC 在 Spring 3.0 上成功运行的项目。我将其移至 Spring 3.1，同时将我的 jar 管理更改为 Maven，而不是手动下载/复制到 Ant 的 project/lib。

在加载日志中的第一个（登录）公共页面期间，我看到：信息：至少一个 JAR 已扫描 TLD，但不包含 TLD

这让我觉得我的 taglib URL 与适当的 taglib jar 不匹配。所以要么 URL 不正确，要么我没有合适的 jars。

在我的 JSP 顶部：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %> 
```

我认为这是有问题的安全标签，如下页所示（登录后）我收到一个新错误：javax.servlet.ServletException: javax.servlet.jsp.JspException: java.io.IOException: No visible WebSecurityExpressionHandler可以在应用程序上下文中找到实例。必须至少有一个才能支持 JSP 'authorize' 标记中的表达式。

这对我来说是新的——~~当我使用 Spring 3.0 库运行应用程序时，我不必定义“WebSecurityExpressionHandler”，~~所以要么我缺少一个提供相关内容的 jar，要么在 Spring 3.0 中发生了一些变化 -> 3.1 我应该如何配置我的应用程序的安全性。

编辑：我发现它看起来应该在我的配置中扮演该角色：

```
`<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler" />` 
```

在我 `<http auto-config="true" use-expressions="true" .... >`的 security-context.xml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:09:13.177

你至少应该有以下几个：

*   `spring-security-config`
*   `spring-security-web`
*   `spring-security-taglibs`

另外，您可以添加`spring-security-core`，但 Maven 应该将其解析为传递依赖项。

# android - 用于检索的数据库查询

> ID：11538952
> 
> 赞同：0
> 
> 时间：2012-07-18T10:05:56.267
> 
> 标签：android, database

我有以下查询来从数据库中检索数据。

但它总是返回为 0。

请帮我。

我的查询：

```
 System.out.println("passed="+grp);
    long sum=0;
    Cursor cursor1 = db.rawQuery(
                 "SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE category='Income' AND groups='grp'",null);
         if(cursor1.moveToFirst())
         {
           sum = cursor1.getLong(0);
         }
         cursor1.close();
         String housetotal=String.valueOf((long)sum);       
         System.out.println("house="+housetotal);
             return housetotal; 
```

我检查了数据库，有 2 个条目满足上述条件。

但是，它始终返回为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:13:19.860

对于字符串，使用 LIKE、NOT = 并且在 SQLITE 中使用 " not ' ：

```
"SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE category LIKE \"Income\" AND groups LIKE \"grp\"" 
```

# php - 一次将数据插入表中

> ID：11538953
> 
> 赞同：0
> 
> 时间：2012-07-18T10:05:59.477
> 
> 标签：php, mysql

这是我的代码

```
 echo    '<input type="submit" name="submit">'; 
```

我正在使用此查询从另一个表中获取数据

```
if($_POST['submit'])
 {
    $sql = mysql_query('SELECT q.username, q.firstanme,q.lastname FROM quizgroup q');
    foreach($sql as $s)
     {
        $username = $s->username;
        $firstname = $s->firstname;
        $lastname = $s->lastname;
        $sql = mysql_query('INSERT INTO user(username,firstname,lastname) VALUES('.$username.','.$first.','.$last.')');
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:29:41.503

尝试这个

```
insert into user (SELECT username, firstanme, lastname FROM quizgroup) 
```

此语句将数据从 quizgroup 复制到用户表

复制数据时不要使用“values”关键字

看这个

[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

# android - android JSON for循环空指针异常

> ID：11538954
> 
> 赞同：0
> 
> 时间：2012-07-18T10:06:07.600
> 
> 标签：android, json

嗨，我正在尝试创建一个 JSONObject，其中包含一个包含固定装置的日期数组，我目前在这一行得到一个空指针异常，`if(fixturesDict.length() == 0){`有人知道为什么吗？

这是我的代码

```
public void FillData() throws JSONException{    

      ListView list = getListView();
        list.scrollTo(0, 0);
        list.setVerticalFadingEdgeEnabled(false);

           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );

       fixturesView = LayoutInflater.from(getBaseContext()).inflate(R.layout.fixturescell,
                 null);

       //Log.v("MyFix", "fixturesArray = " + fixturesArray);
       if(fixturesArray.length() < 1){

             TextView emptytext = (TextView) fixturesView.findViewById(R.id.TextView02);
             emptytext.setText("No Upcoming Fixtures Available");

       }else{
        try{   

            for(int t = 0; t < fixturesArray.length(); t++){
               JSONObject matchDateDict = fixturesArray.getJSONObject(t);
                matchDate = matchDateDict.getString("matchdate");

               if(matchDatesHeadersArray.length() != 0){
                   int lm = t - 1;
                   JSONObject lastDateDict = fixturesArray.getJSONObject(lm);
                   String lastMatchDate = lastDateDict.getString("matchdate");

                   if(matchDate.equals(lastMatchDate)){
                   } else {
                       matchDatesHeadersArray.put(matchDate);
                   }
               } else {
                   matchDatesHeadersArray.put(matchDate);     
               }               
            }

            JSONObject fixturesDict = new JSONObject();
            JSONArray tempArray = new JSONArray();
            JSONArray newTempArray = new JSONArray();
            JSONObject tempDict = null;

            for(int f = 0; f < fixturesArray.length(); f++){
                String matchDateHeaderString = matchDatesHeadersArray.getString(f);
                tempDict = fixturesArray.getJSONObject(f);
                String currentMatchDate = tempDict.getString("matchdate");
                Log.v("myFix", "matchDateHeaderString = " + matchDateHeaderString + "currentMatchDate = " + currentMatchDate);

*if(fixturesDict.length() == 0){*

                    tempArray = null;
                } else {
                    tempArray = fixturesDict.getJSONArray(currentMatchDate);
                }

                if(!currentMatchDate.equals(matchDateHeaderString)){
                    // ADD TEXT INTO ARRAY FOR HEADER TITLES
                }

                newTempArray.put(tempDict);
                fixturesDict.put(matchDateHeaderString, newTempArray);
                Log.v("myFix", "SEMI fixturesDict = " + fixturesDict);

            }

            Log.v("myFix", "FULL fixturesDict = " + fixturesDict);

        }catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这是我得到的错误

```
07-18 11:01:48.974: E/AndroidRuntime(26155): java.lang.NullPointerException
07-18 11:01:48.974: E/AndroidRuntime(26155):at MIFixtures.FillData(MIFixtures.java:455)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at .MIFixtures$PostTask.onPostExecute(MIFixtures.java:390)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at e.MIFixtures$PostTask.onPostExecute(MIFixtures.java:1)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.os.AsyncTask.finish(AsyncTask.java:417)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.os.Looper.loop(Looper.java:143)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at android.app.ActivityThread.main(ActivityThread.java:4263)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at java.lang.reflect.Method.invokeNative(Native Method)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at java.lang.reflect.Method.invoke(Method.java:507)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-18 11:01:48.974: E/AndroidRuntime(26155):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 json 提要

```
{
    "code":200,
    "error":null,
    "data":{
        "fixtures":[
            {
                "kickoff":"15:00:00",
                "matchdate":"2012-07-28",
                "homescore":null,
                "awayscore":null,
                "attendance":null,
                "homepens":null,
                "awaypens":null,
                "division_id":"5059",
                "division":"Testing 1",
                "comp":"LGE",
                "location":null,
                "fixture_note":null,
                "hometeam_id":"64930",
                "hometeam":"Team 1",
                "awayteam_id":"64931",
                "awayteam":"Team 2"
            }, {
                "kickoff":"15:00:00",
                "matchdate":"2012-07-28",
                "homescore":null,
                "awayscore":null,
                "attendance":null,
                "homepens":null,
                "awaypens":null,
                "division_id":"5059",
                "division":"Testing 1",
                "comp":"LGE",
                "location":null, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:19:39.003

您`fixturesArray`调用时尚未创建`(fixturesArray.length() < 1)`

我建议检查该变量 `fixturesArray`并确保在您调用时它已被初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:21:08.063

你好参考下面的代码

JSON字符串

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
} 
```

# iphone - 从detailview返回后，滚动条从mapView中消失

> ID：11538970
> 
> 赞同：0
> 
> 时间：2012-07-18T10:07:03.450
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller, storyboard

我正在使用 ARC 和故事板做一个 iOS 项目。

目前的设置如下情节提要

```
TabbedBarController
    NavigationController
        MapView = events on map
            UIScrollbar -> To zoom with (yes I want it by bar)
    UIView
    NavigationController
        TableView = List of events
-----
UIView  = Detail 
```

所以细节视图没有在情节提要中连接，但是当在地图视图上并单击注释的 disclusre 按钮（=事件）时，您将转到详细视图（它被推到导航堆栈上）但是如果您单击返回滚动条从地图视图..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:47:41.523

是导航栏将其推出屏幕。通常导航栏是隐藏的，但是当我转到详细信息页面并返回时，它会显示。

所以我补充说：

```
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:YES];
    [[self navigationController] setNavigationBarHidden:YES animated:YES];

} 
```

它被修复了！

# haskell - 分析多态性的成本？

> ID：11538977
> 
> 赞同：18
> 
> 时间：2012-07-18T10:07:30.250
> 
> 标签：haskell, profiling, polymorphism, ghc

我有一个“不必要”多态的代码库，因为几乎每个函数都以某种方式是多态的（为什么不呢，什么时候可以？），但最终程序使用的函数只有少数具体类型。我已经开始花一些时间投入`SPECIALIZE`和`INLINABLE`编译指示来尝试降低所有这些多态性的性能成本，但是对于我的代码大小来说，它是非常偶然的。有没有办法从分析中得知每个函数在运行时“做多态性需要的事情”花费了多少时间？

（注意：我问过这个问题时不知道这样的事情在技术上是否可行，或者“多态性需要的东西”是否定义得足够好）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T14:11:13.567

确定成本的过程是：

*   构建基准 - 使用标准或其他一些测量工具
*   配置文件 - 具有 ghc 的配置文件支持
*   读核心——用ghc-core，如果性能原因不明显

通常你会发现一些太慢的操作；使用分析进行编译并准确确定哪些组件成本高，然后检查代码以优化它（例如，通过专门化数据结构或函数、更改算法或进行其他更改）。

对于性能关键的工作，您将去检查内核，看看微调编译器是否有帮助。

# jsf-2 - 用户单击浏览器后退按钮后强制 ViewScoped Bean 重新初始化（强制新 HTTP 请求）

> ID：11538983
> 
> 赞同：0
> 
> 时间：2012-07-18T10:08:08.943
> 
> 标签：jsf-2, primefaces, browser-cache, managed-bean

我正在使用 Mojarra 2.1.3、NetBeans 7.0.1、Primefaces 3.2。

我的应用程序中有一些由 ViewScoped 支持 bean 支持的动态 xhtml 页面。每个页面都有 p:dataTable 显示来自 backing bean 的 List<>。当用户导航到包含数据表中每个项目的详细信息的不同页面时，就会出现此问题。在浏览详细信息时，用户很可能会点击浏览器的后退按钮以返回列表。所以我在我的应用程序中实现了这样的过滤器。

```
 @Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {
    HttpServletRequest httpReq = (HttpServletRequest) request;
    HttpServletResponse httpRes = (HttpServletResponse) response;
    if (!httpReq.getRequestURI().startsWith(httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc) 
        httpRes.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1\. 
        httpRes.setHeader("Pragma", "no-cache"); // HTTP 1.0\. 
        httpRes.setDateHeader("Expires", 0); // Proxies. 
    }
    chain.doFilter(request, response);
} 
```

但是我有一个问题，正如这里所解释的：[当会话到期时如何将用户移动到超时页面，如果用户单击浏览器后退按钮](https://stackoverflow.com/questions/9766307/how-to-move-user-to-timeout-page-when-session-expires-if-user-click-on-browser)，浏览器应该改为向服务器发送一个完全值得的新 HTTP 请求。

但就我而言，它没有。相反，我看到无处不在的网页已过期，我认为这不是用户友好的体验。我想要的不是从浏览器缓存中加载它，而是向服务器创建一个新请求并显示正确的页面（不是网页有过期页面）。是否可以。

请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:19:33.517

如果导航是通过 POST 请求而不是 GET 请求进行的，则可能会发生这种情况。

您应该确保页面到页面的导航始终通过 GET 请求进行。例如

```
<p:dataTable value="#{bean.items}" var="item">
    <p:column>
        <h:link value="detail" outcome="detail">
            <f:param name="id" value="#{item.id}" />
        </h:link>
    </p:column>
</p:dataTable> 
```

# jquery - 如何在 jQuery 中正确添加表单？

> ID：11538984
> 
> 赞同：0
> 
> 时间：2012-07-18T10:08:11.653
> 
> 标签：jquery, forms, jsp

我在 jQuery 中有一个函数，它以`jsp`这种方式添加到我的视图中：

```
$("#mydiv").append("<form class=\"sendMessage\" id=\"" + item.message_id + "\">" +
                "<input type=\"submit\" value=\"Delete\" />" +
                "</form><br />");
}); 
```

我想继续提交此表单操作。所以我写了这个函数：

```
$(".sendMessage").submit(function(event) {
    alert("sendMessage");
}); 
```

不幸的是，这不起作用。但是，当我将表单直接添加到`jsp`视图中时，我的提交功能就起作用了。

```
<form class="sendMessage">
    <input type="submit" value="Delete" />
</form> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:12:28.070

```
$(document).on("submit","form.sendmessage",function(){alert("sendMessage");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:13:20.160

您是否在 DOM 上运行任何此代码准备就绪，即

```
$(document).ready(function() { 
```

// .ready() 的处理程序被调用。});

见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

??

并且您是否在通过 Jquery 添加到标记的表单的回调上应用提交绑定？因为否则它可能还不存在。

# html - 内容可编辑的 div 编辑问题

> ID：11538987
> 
> 赞同：0
> 
> 时间：2012-07-18T10:08:19.343
> 
> 标签：html, wysiwyg, contenteditable

我在编辑内容可编辑 div 时遇到问题（它的样式看起来像一个文本区域）。我现在正在 div 中显示这个 html。

```
<p>
     Hey [Recipient Name],
</p>
<p>
    I'm using <b>Planning Simple&trade;</b> to organize <b>Ranni Hill Mud Race</b>. Click on the RSVP button below to check out the details and get involved.
</p>

<p>
    Hope to see you there! <br>prince
</p> 
```

你可以在这里看到页面`http://96.126.109.96:850/test_invitation`。此处邀请内容显示在内容可编辑的 div 中。如果我尝试替换整个段落，整个内容都会被扭曲。

有没有办法来解决这个问题？或者是否有一个可定制的所见即所得编辑器可以编辑 HTML 并且可以应用这种样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:42:50.157

如果您`float:left`从

> .inner-cont-blk p

规则它工作得更好。

# java - NSS 共享数据库不适用于 SunPKCS11

> ID：11538988
> 
> 赞同：4
> 
> 时间：2012-07-18T10:08:20.420
> 
> 标签：java, cryptography, jce, nss, pkcs#11

我已将 NSS 3.12.4 配置为在 FIPS 模式下使用 SunPKCS11 提供程序与我的 java 程序一起使用，并且一切正常。现在我按照[https://blogs.oracle.com/meena/entry/what_s_new_in_nss1](https://blogs.oracle.com/meena/entry/what_s_new_in_nss1)中提到的步骤使 NSS 作为共享数据库工作。

当我在共享数据库模式下配置 NSS 时，secmod.db 文件按预期被 pkcs11.txt 替换。但是现在 SunPKCS11 无法初始化，因为在初始化期间似乎检查了 secmod.db。我还尝试使用 sql: 为 configDir 加上前缀，但这也不起作用。

我收到以下异常。

```
Caused by: java.io.FileNotFoundException: /etc/nss/secmod.db
    at sun.security.pkcs11.Secmod.initialize(Secmod.java:181)
    at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:179) 
```

任何人都尝试过使用 java 或任何方式解决此问题的 NSS 共享数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T21:05:58.630

为了让它为我工作，我采取了两个额外的步骤。

1.  使用 touch 创建一个空的 secmod.db - Java 代码只是检查它是否存在，实际上并没有使用它。
2.  在启动 Java 进程 'export NSS_DEFAULT_DB_TYPE=sql' 之前设置默认数据库类型

通过这两项更改，我现在有了一个使用 NSS 加载其密钥的服务器端进程。

# cakephp - 在模型中使用肥皂客户端

> ID：11538990
> 
> 赞同：0
> 
> 时间：2012-07-18T10:08:22.470
> 
> 标签：cakephp, soap, nusoap

我应该通过 WSDL（和 NuSOAP）从另一台服务器获取可用产品列表及其价格。

不需要视图（我认为不需要控制器）；所以我创建了一个没有表的模型（因为我不想存储服务器数据）

并`App:import('Vendor', 'path_to_nusoap.php')`在我的模型文件的开头使用。

让我们看看我的模型：

```
<?php
App::uses('AppModel', 'Model');
App::import('Vendor', 'nusoap' . DS . 'nusoap.php');
/**
 * MyModel Model
 *
 */
class MyModel extends AppModel {
    public $useTable = false;

    public $client = new nusoap_client('url', 'WSDL');

    public function products(){
        $products = $client->call('getProductsList');
        ////
        return $products;
    }
    public function prices(){
        $prices = $client->call('getPricesList');
        ////
        return $prices;
    }
} 
```

但它会导致错误（在那一行`public $client`：）

现在，问题：

1.  如何解决该错误？（使用承包商功能？）
2.  在模型上使用这个功能我错了吗？（而不是控制器）

对不起我糟糕的英语。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:56:07.230

您不能在方法范围之外创建对象！

使用构造函数：

```
public $Client;

public function __construct() {
    $this->Client = new nusoap_client('url', 'WSDL');

}

public function products() {
    $products = $this->Client->call('getProductsList');
    return $products;
} 
```

# php - CodeIgniter 删除 index.php 显示 404

> ID：11538992
> 
> 赞同：0
> 
> 时间：2012-07-18T10:08:39.043
> 
> 标签：php, codeigniter, mod-rewrite, routes

我知道这个主题在这里被多次看到，但我没有看到他们中的任何一个在这里解决我的问题......

我有一个使用 Codeigniter 的应用程序。我尝试删除 URL 中的 index.php，但似乎我今天被诅咒了。

这是我的 config.php 文件中的内容：

```
$config['base_url']   = "http://".$_SERVER['SERVER_NAME']."/";
$config['index_page']    = "";
$config['uri_protocol']  = 'AUTO'; 
```

这是我的 .htacess（如 CI 建议）：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

有了这个，我无法删除 URL 中的 index.php。事实上，它可以很好地删除它，但我在屏幕上有一个漂亮的 404。

我检查了`phpinfos()`mod_rewrite是否正确激活，这方面没有问题。

******编辑******

 **我检查了我的 apache 日志，这就是我所拥有的：

```
[Wed Jul 18 12:27:08 2012] [error] [client 127.0.0.1] File does not exist: [PATH]/trunk/user 
```

真正的路径应该是：

```
[PATH]/trunk/application/controllers/user 
```

我看到所有这些东西都设置在 index.php 文件中，但似乎从未调用过...

有人可以建议我解决这个问题吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:15:33.303

试试这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

第一个条件确保请求不是针对有效文件，第二个条件确保请求不是针对有效目录。对文件系统中实际不存在的文件或文件夹的所有请求都通过 index.php 发送。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T10:14:46.320

您不能阻止对 index.php 页面的访问，因为它是 CI 工作的主要页面。**

# unix - Unix 检查文件是否被任何符号链接引用

> ID：11538999
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:08:59.553
> 
> 标签：unix

如何检查目录中**的任何符号链接是否正在引用文件**- 我想删除除符号链接和引用文件之外的所有其他文件。是否有任何直接命令可以检查或解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:17:16.407

如果符号链接在同一目录中或在众所周知的目录中，那将很容易。只需检查是否没有其他文件共享相同的 inode `ls -d1Li`。

否则，没有直接的方法可以知道任何给定文件是否存在符号链接。即使探索所有已挂载的文件系统也不可靠，因为该链接可能存在于当前未挂载的文件系统上，或者存在于远程访问文件的远程机器上（NFS、CIFS 等）。