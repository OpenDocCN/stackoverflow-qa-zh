# StackOverflow 问答 10536000-10536999

# css - 将 CSS 类添加到 Html.ActionLink

> ID：10536000
> 
> 赞同：9
> 
> 时间：2012-05-10T14:19:32.337
> 
> 标签：css, asp.net-mvc-3, asp.net-mvc-views

我想在我的页面中设置一个链接的样式，并使用 Html.ActionLink 创建链接。问题是我不知道如何设置结果链接的样式。如何将 CSS 类添加到 Html.ActionLink 以设置样式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T14:23:57.070

```
Html.ActionLink("Link Name", 
                "ActionName",
                "ControllerName",
                null,
                new { @class = "myCssClass" }
                ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T16:48:31.423

```
@Html.ActionLink("Forgot Password ?", "ViewName","ControlerName",null, new { @class="Link"}) 
```

添加链接类是`<head>`标签

```
<style type="text/css">
        .Link
        {
            margin-bottom:20px;
            color:blue;
            font-weight:bold;
        }
    </style> 
```

# macos - 我的 OpenAL 框架坏了，我该如何修复它？(OSX 狮子)

> ID：10536001
> 
> 赞同：1
> 
> 时间：2012-05-10T14:19:35.667
> 
> 标签：macos, frameworks, osx-lion, openal

我正在开发一些游戏代码，它在 windows 和 mac 上都可以正常工作。声音也很完美。我为此使用 OpenAL。

最近我从 Creative Labs 安装了 OpenAL OSX 安装程序。它已经覆盖了我原来的 Apple OpenAL 框架，现在我的项目将不再编译（链接器错误、错误的架构和类似的东西）。

真正的问题是：我可以修复它吗？我可以找到原始的 Apple OpenAL 框架来替换我系统上的那个吗？如果没有，有人会好心地将文件发送给我以便可以将它们放回（如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:30:26.817

在尝试了几乎所有除了重新安装完整的操作系统（我重新安装了 lion 升级，我重新安装了 xcode，手动删除了东西......）之后，我发现被创意安装程序覆盖的框架是位于 /Library 中的框架/Frameworks 而不是 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks 中的那个

我以为它们是符号链接的，但事实并非如此。所以我只是将 10.7sdk 中的那个复制到 /Library/Frameworks 中的那个，然后一切都重新构建了！

最奇怪的是，如果在我的项目中，我右键单击“链接框架和库”列表中的 OpenAL 框架，然后选择“在 Finder 中显示”，我确实被重定向到了 sdk，但 xcode 没有似乎使用它，因为当我从 /Library/Frameworks 中删除 OpenAL.framework 时，xcode 将框架显示为红色并且不会构建。所以 xcode 告诉我它使用 sdk 文件夹中的那个，但实际上使用的是 /Library/Frameworks 中的那个。

我在其他论坛上读过（关于其他平台，如 iPhone 和其他东西），人们对此有疑问。XCode 告诉他们他们正在使用 iPhone sdk 中的框架，但实际上他们正在使用 /Library/Frameworks 中的框架。

所以这一定是xcode中的一个错误。

无论如何...解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T08:44:45.573

将框架添加到您的项目中。您包含文件以便编译，但您必须指定要链接的框架。它在 /System/Library/Frameworks/ 中。

# sql-server - 这个存储过程插入数据有什么问题？

> ID：10536002
> 
> 赞同：0
> 
> 时间：2012-05-10T14:19:37.903
> 
> 标签：sql-server

我正在尝试创建一个插入数据库表的存储过程，但它不会运行。调试器说'（'附近的语法不正确，但我发誓代码是正确的......

我在这里做错了什么？

感谢您的帮助哦，强大的 stackoverflow 蜂巢思维！

存储过程如下：

```
Create Proc InsertStaffMember
 (@fname varchar(50), 
  @lname varchar(50), 
  @initials varchar(3), 
  @phone varchar(20), 
  @phoneext varchar(10), 
  @stafftype char(1))
AS
    Insert into 
    (t09FirstName, t09LastName, t09Int, t09Phone, t09PhoneExt, t09Type)
    Values
    (@fname, @lname, @initials, @phone, @phoneext, @stafftype)
GO 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T14:20:57.120

您没有在 INSERT 中指定表名。

# jsf - Maven：将网页添加到两个 WAR 文件使用的 JAR 文件中

> ID：10536003
> 
> 赞同：0
> 
> 时间：2012-05-10T14:19:43.633
> 
> 标签：jsf, maven, web.xml

我目前有一个 Maven 原型通用 JAR，其中包含两个互斥的 Maven 原型 WAR 项目共有的共享 Java 类。

我最近发现了一个机会，可以将一些自定义错误网页、随附的 JSF 支持 bean 和支持 web.xml 配置（作为 Web 片段）的一部分用于此 JAR。

我的问题是一个 Maven 问题：如何配置我的两个 WAR 应用程序以“查看”这些网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:57:18.290

您应该研究所谓的[瘦战争](http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html)和[战争叠加](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)功能。

您可以使用包含共享资源的打包战争创建一个模块。现在，当其他战争模块依赖于它时 - 类型为“战争”的依赖 - 这些文件将被添加到新战争中。最好从你的瘦战中排除 jar，因为你不想捆绑它们并保存在 maven 存储库中。

# watin - 使用 SignalR 时，Watin 超时

> ID：10536004
> 
> 赞同：4
> 
> 时间：2012-05-10T14:19:49.820
> 
> 标签：watin, signalr

我们在验收测试中广泛使用 Watin，现在在将 SignalR 引入我们的网页时开始遇到问题。我们正在为“Button.Click”和“WebBrowser.GoTo”之类的东西超时，这些功能以前很完美。我们从 Watin 收到“Internet Explorer 忙时超时”异常，我猜这是因为 SignalR 正在从客户端轮询（当 WebSocket 到达时这可能会更好地工作）。有谁知道这个的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T00:41:56.857

我不是 SignalR 方面的专家，但我为一家生产名为[WebSync](http://www.frozenmountain.com/products/websync)的商业实施的公司工作。

我最初的怀疑是你可能达到了 IE 的并发请求限制。

首先，相同的测试在 Firefox 中是否可以正常工作，但在 IE 中不行？（IE 通常比其他并发请求的浏览器差）。还有什么版本的IE正在测试？不同代的浏览器的并发请求限制是不同的。查看[这篇记录 IE 并发请求限制的文章](http://weblogs.asp.net/mschwarz/archive/2008/07/21/internet-explorer-8-and-maximum-concurrent-connections.aspx)。在 IE 中，此限制甚至会影响在不同窗口中打开的同一页面的多个副本。但这取决于 IE 的版本，随着时间的推移，微软一直在稳步改进。

在某些情况下，IE 将运行每个域只有 2 个并发请求！在浏览器中打开开发人员工具并监控正在进行的活动 HttpRequest 可能是值得的。您将看到 SignalR 的长轮询请求，但请查看它们是否是任何其他频繁的 AJAX 活动，可能会阻塞第二个可用请求槽。（也许其他与 SignalR 完全无关的东西也在发出 AJAX 请求？或者可能是一个加载缓慢的资源，如臃肿的 CSS 或 JS 文件？）

对于 WebSync，我们通过将 websync 移动到像“stream.mydomain.com”这样的子域来解决这个问题。现在您的页面资源仍在“www.mydomain.com”上，因此即使在最坏的情况下，IE 也可以有 2 个并发请求到“www”。和 2 个并发请求“流式传输”。如果您的网站非常庞大，我们甚至可以使用“a.stream.mydomain.com”、“b.stream.mydomain.com”、....“z.stream.mydomain.com”进一步划分子域如果最终用户可能在多个浏览器窗口（每个窗口指向同一个域）中打开页面，这可以进一步缓解问题。

如果您无法移动长轮询连接，有些人会将图像、样式表和 javascript 等其他内容移动到单独的域（如“static.mydomain.com”），以便这些请求转到其他地方。

# html - 中心列表项

> ID：10536007
> 
> 赞同：0
> 
> 时间：2012-05-10T14:19:59.087
> 
> 标签：html, css

是否可以使用 CSS 在页面上居中列表项？我有一个很长的动态图像列表，它们以以下方式重复：

```
<ul class="imgSelec">
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
   <li><A href="#"><img src="#"></a></li>
</ul> 
```

每个图像宽 120 像素，填充 5 像素。该列表将显示在具有不同屏幕宽度的各种移动设备上，因此列表在大多数情况下会换行。我希望图像在页面上居中对齐，但我不知道该怎么做。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:21:56.073

```
.imgSelec ul li {
    width: 130px;
    margin: auto;
} 
```

注意：必须设置一个宽度，然后使用 margin: auto 来居中元素。

# delphi - 从文件夹中读取无效的文件名

> ID：10536009
> 
> 赞同：5
> 
> 时间：2012-05-10T14:20:01.197
> 
> 标签：delphi, file-io

我有一个有趣的问题。我们的一位客户通过电话录制了语音对话，但提供给录音的文件名无效。这是文件名的示例`123:123.wmv`

相信它，Windows Media 编码器创建了文件，所有信息都在文件中，但是 Windows 显然不识别文件名，只显示在文件夹中`123`，文件为 0KB

好吧，从这里开始编辑：感谢 Keith Miller 为我指明了正确的方向，我可以编写一个函数，从文件中提取流名称并使用它。

我已经包含了一份关于如何将两个数据流创建到一个文件中、读取流名称并从每个流中读取数据的工作副本。这太棒了，所以我希望其他人也可以使用它。我的代码忽略了主流。如果将数据写入主流，最好不要忽略它。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, uGeneralStuff;

type
  _FILE_STREAM_INFORMATION = record
    NextEntryOffset: cardinal;
    StreamNameLength: cardinal;
    StreamSize: int64;
    StreamAllocationSize: int64;
    StreamName: array[0..MAX_PATH] of WideChar;
  end;

  PFILE_STREAM_INFORMATION = ^_FILE_STREAM_INFORMATION;

  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    InfoBlock: _FILE_STREAM_INFORMATION;
    StatusBlock : record
      Status: Cardinal;
      Information: PDWORD;
    end;

    procedure CreateFile(FileName, Info: String);
    function ReadFile(FileName: String): String;
    function ReadStreams(filename: String): TStringList;
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

function NtQueryInformationFile(FileHandle : Cardinal;
                                  IoStatusBlock : Pointer;
                                  FileInformation : Pointer;
                                  FileInformationLength : Cardinal;
                                  FileInformationClass : Cardinal
                                  ): Cardinal; stdcall; external 'ntdll.dll';
implementation

uses Math, StrUtils;
{$R *.dfm}

function TForm1.ReadStreams(filename: String): TStringList;
var
  iFH1: Integer;
  aFileName: array[0..MAX_PATH] of WideChar;
  aStreamName: String;
begin
Result := TStringList.Create;
iFH1 := FileOpen(filename, GENERIC_READ);
NtQueryInformationFile(iFH1, @StatusBlock, @InfoBlock, SizeOf(InfoBlock), 22);  // 22 Means FileStreamInformation
FileClose(iFH1);
while (1=1) do
  begin
  if InfoBlock.StreamNameLength = 0 then
    break;
  CopyMemory(@aFileName, @InfoBlock.StreamName, InfoBlock.StreamNameLength);
  aStreamName := Copy(aFileName, 1, PosEx(':', aFileName, 2) - 1);
  if aStreamName <> ':' then   //Ignore main stream, because I know I didn't write data in there
    Result.Add(aStreamName);
  if (InfoBlock.NextEntryOffset = 0) then
    break;
  InfoBlock := PFILE_STREAM_INFORMATION(PByte(@InfoBlock) + InfoBlock.NextEntryOffset)^;
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
var
  aStreams: TStringList;
  I: Integer;
begin
aStreams := ReadStreams('C:\Temp\123');
for I := 0 to aStreams.Count - 1 do
  begin
  ShowMessage(ReadFile('C:\Temp\123' + aStreams[I]));
  end;
end;

procedure TForm1.CreateFile(FileName, Info: String);
var
  iFH1: Integer;
  Buffer: PAnsiString;
begin
  iFH1 := FileCreate(FileName);
  Buffer := PAnsiString(AnsiString(Info) + #0);
  FileWrite(iFH1, Buffer^, Length(Info));
  FileClose(iFH1);
end;

function TForm1.ReadFile(FileName: String): String;
var
  iFH1: Integer;
  Buffer: PAnsiChar;
  iFL: Integer;
  iBR, iCurPos, iReadSize: Integer;
begin
  iFH1 := FileOpen(FileName, GENERIC_READ);
  iFL := FileSeek(iFH1, 0, 2);
  FileSeek(iFH1, 0, 0);
  iReadSize := Min(iFL, 1024);
  Buffer := AllocMem(iReadSize + 1);
  iCurPos := 0;
  Result := '';
  while iCurPos < iFL do
    begin
    iBR := FileRead(iFH1, Buffer^, iReadSize);
    if iBR = -1 then
      break;
    Result := Result + Buffer;
    Inc(iCurPos, iBR);
    end;
  FileClose(iFH1);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  CreateFile('C:\Temp\123:123.txt', 'This is TestFile 1');
  CreateFile('C:\Temp\123:345.txt', 'This is TestFile 2');
  ShowMessage(ReadFile('C:\Temp\123:123.txt'));
  ShowMessage(ReadFile('C:\Temp\123:345.txt'));
end;

end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:32:29.857

在文件名中使用 : 会在文件中创建备用数据流。请参阅 [http://support.microsoft.com/kb/105763上的文章](http://support.microsoft.com/kb/105763)

在您的示例中，文件称为 123，流称为 123.wmv​​。您可以编写一个程序来从文件中提取流并使用常规文件名重写它。

[http://www.flexhex.com/docs/articles/alternate-streams.phtml](http://www.flexhex.com/docs/articles/alternate-streams.phtml)上的文章应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:30:36.973

~~`FindFirst`使用`TSearchRec`记录返回文件属性。那里有一个`FindData`元素 ( `TWin32FindData`)，其中包含一些额外的属性，例如文件的备用名称。也许你可以使用它。~~

**编辑**：我发现一个页面包含一个单元，该单元带有一个名为的函数`ADSFindFirst`（顺便说一下，它内部包含`NtQueryInformationFile`整齐的包装。）我这里没有 Delphi，但看起来很有希望：[http://www.tek-tips.com/faqs。 cfm?fid=7167](http://www.tek-tips.com/faqs.cfm?fid=7167)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:46:54.550

正如@KeithMiller[回答](https://stackoverflow.com/a/10536263/11480)的那样，您正在`'C:\Temp\123'`使用一个空的主流和两个备用流创建文件。

[根据文章](http://www.flexhex.com/docs/articles/alternate-streams.phtml)，我快速尝试使用 Delphi XE（所以 - Unicode！）代码来显示流名称：

```
type
  NTSTATUS = Cardinal;
  TFileInformationClass = (
    FileDirectoryInformation                  = 1,
    FileFullDirectoryInformation,
    FileBothDirectoryInformation,
    FileBasicInformation,
    FileStandardInformation,
    FileInternalInformation,
    FileEaInformation,
    FileAccessInformation,
    FileNameInformation,
    FileRenameInformation,
    FileLinkInformation,
    FileNamesInformation,
    FileDispositionInformation,
    FilePositionInformation,
    FileFullEaInformation,
    FileModeInformation,
    FileAlignmentInformation,
    FileAllInformation,
    FileAllocationInformation,
    FileEndOfFileInformation,
    FileAlternateNameInformation,
    FileStreamInformation,
    FilePipeInformation,
    FilePipeLocalInformation,
    FilePipeRemoteInformation,
    FileMailslotQueryInformation,
    FileMailslotSetInformation,
    FileCompressionInformation,
    FileObjectIdInformation,
    FileCompletionInformation,
    FileMoveClusterInformation,
    FileQuotaInformation,
    FileReparsePointInformation,
    FileNetworkOpenInformation,
    FileAttributeTagInformation,
    FileTrackingInformation,
    FileIdBothDirectoryInformation,
    FileIdFullDirectoryInformation,
    FileValidDataLengthInformation,
    FileShortNameInformation,
    FileIoCompletionNotificationInformation,
    FileIoStatusBlockRangeInformation,
    FileIoPriorityHintInformation,
    FileSfioReserveInformation,
    FileSfioVolumeInformation,
    FileHardLinkInformation,
    FileProcessIdsUsingFileInformation,
    FileNormalizedNameInformation,
    FileNetworkPhysicalNameInformation,
    FileIdGlobalTxDirectoryInformation,
    FileIsRemoteDeviceInformation,
    FileAttributeCacheInformation,
    FileNumaNodeInformation,
    FileStandardLinkInformation,
    FileRemoteProtocolInformation,
    FileMaximumInformation
  );
  PIOStatusBlock = ^TIOStatusBlock;
  TIOStatusBlock = packed record
    case Boolean of
      False: (Status: NTSTATUS; P: Pointer;);
      True: (Information:  ULONG_PTR);
  end;
  PFileStreamInformation = ^TFileStreamInformation;
  TFileStreamInformation = packed record
    NextEntryOffset: ULONG;
    StreamNameLength: ULONG;
    StreamSize: LARGE_INTEGER;
    StreamAllocationSize: LARGE_INTEGER;
    StreamName: array[0..0] of Char;
  end;

type
  TNtQueryInformationFile = function(FileHandle: THandle; IoStatusBlock: PIOStatusBlock;
  FileInformation: Pointer; Length: ULONG; FileInformationClass: TFileInformationClass): NTSTATUS; stdcall;

procedure GetAlternateFileStreamNames(const FileName: string; StreamNames: TStrings);
var
  hNT, hFile: THandle;
  NtQueryInformationFile: TNtQueryInformationFile;
  Buffer: array[Word] of Byte;
  ioStatus: TIOStatusBlock;
  P: PFileStreamInformation;
  S: string;
  L: Integer;
begin
  hNT := GetModuleHandle('ntdll.dll');
  if hNT = 0 then
    Exit;
  NtQueryInformationFile := GetProcAddress(hNT, 'NtQueryInformationFile');
  if @NtQueryInformationFile = nil then
    Exit;

  FillChar(Buffer, SizeOf(Buffer), 0);
  hFile := CreateFile(PChar(FileName), 0, FILE_SHARE_READ or FILE_SHARE_WRITE, nil, OPEN_EXISTING, 0, 0);
  try
    if NtQueryInformationFile(hFile, @ioStatus, @Buffer[0], SizeOf(Buffer), FileStreamInformation) = 0 then
    begin
      StreamNames.BeginUpdate;
      try
        StreamNames.Clear;
        P := @Buffer[0];
        while Assigned(P) do
        begin
          SetString(S, P^.StreamName, P^.StreamNameLength div SizeOf(Char));
          // strip trailing :$DATA
          L := Length(S);
          if (L >= 6) and (StrComp(@S[L - 5], ':$DATA') = 0) then
            Delete(S, L - 5, L);
          StreamNames.Add(S);

          if P^.NextEntryOffset = 0 then
            P := nil
          else
            P := Pointer(Integer(P) + P^.NextEntryOffset); //@Buffer[P^.NextEntryOffset];
        end;
      finally
        StreamNames.EndUpdate;
      end;
    end;
  finally
    CloseHandle(hFile);
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
var
  StreamNames: TStringList;
begin
  StreamNames := TStringList.Create;
  try
    GetAlternateFileStreamNames('C:\Temp\123', StreamNames);
    ShowMessage(StreamNames.Text);
  finally
    StreamNames.Free;
  end;
end; 
```

对于您的问题中发布的代码创建的文件，它显示以下条目：

1.  `':'`- 未命名的主流，我想
2.  `':123.txt'`- 第一个备用流
3.  `':345.txt'`- 第二个备用流

完全未经测试且很奇怪，还需要针对 D2007 及更早版本进行修改。

# javascript - array.push() 抛出奇怪的错误

> ID：10536011
> 
> 赞同：0
> 
> 时间：2012-05-10T14:20:03.297
> 
> 标签：javascript, jquery

我试图`X`在遍历 array 时将元素推入 array `Y`。在某些时候，在将新元素推入数组 X 时，我在浏览器控制台中收到“意外令牌：”错误。我能够在失败之前正确推送几个元素（几乎每次都在第 7 个元素左右）。

它是递归函数，可能会导致问题......这是代码：

```
function getPosition(img) {
    var tmpRandPosition = Math.floor(Math.random() * (9));

    if($.inArray(galleryPositions[tmpRandPosition], populatedPositions) != -1) {
        setTimeout("getPosition("+img+")",1);
    } else {
        populatedPositions.push(galleryPositions[tmpRandPosition]);

        return true;
    }
} 
```

正如您从脚本中看到的那样，我试图在 HTML 中的 8 个不同定位元素上随机显示照片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:22:46.180

似乎问题出在`setTimeout`功能上。尝试使用匿名函数而不是串联将参数传递给该函数：

```
setTimeout(function() { getPosition(img) }, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:27:59.580

这将打破：

```
setTimeout("getPosition("+img+")",1); 
```

因为它实际上写道：

```
setTimeout("getPosition(img_path.jpg)",1); 
```

并尝试评估它（使用`eval`）。

问题是 JS 认为`img_path.jpg`是一个变量。

使固定：

```
setTimeout("getPosition('"+img+"')",1); 
```

但永远不要这样做，因为评估字符串不好或不快。

而是向 setTimeout 发送一个匿名函数：

**修正：**

```
setTimeout(function() {
    getPosition(img);
}, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:31:19.437

[不要使用字符串参数调用 setTimeout。](https://stackoverflow.com/questions/3492015/why-do-people-say-that-javascript-eval-is-evil-but-you-get-no-objections-again) 总是使用一个函数。如果 img 变量易受攻击，则在这种情况下使用该字符串会使该代码遭受注入攻击。

# jquery - $(document).ready() 函数在文档实际加载到 IE 之前触发，有什么方法可以修复它？

> ID：10536016
> 
> 赞同：0
> 
> 时间：2012-05-10T14:20:11.300
> 
> 标签：jquery, internet-explorer, colorbox

我正在尝试将颜色框应用于演示页面上的某些链接，并使用 $(document).ready() 进行设置。问题是我定义的函数在元素实际加载之前触发（在实际加载任何内容之前）。以下脚本位于文件头部的末尾。

```
echo '
<script>
var $j = jQuery.noConflict();
$j(document).ready(function(){
';

while($descr = mysql_fetch_array($res_descr)) {         

    echo '
    try {
    $j(".fer_'.$descr['SectiunePagina'].'").colorbox({inline:true, width:"70%", height:"60%", href:"#fer_'.$descr['SectiunePagina'].'"});
    }
    catch(error) {
    alert(error.message);
    }
    ';
}                      
echo '
});
</script> 
'; 
```

error.message 是`Object doesn't support property or method colorbox.`，经过进一步检查，发现元素在触发时没有加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:30:35.523

确保在运行上述脚本之前链接到包含颜色框的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:37:17.120

这与脚本的定位没有太大关系。这是一个时间问题。

**ColorBox 依赖于加载其内容的 DOM**才能正常运行。这是其设计的基本部分。

**在调用 Colorbox之前**，您必须弄清楚如何将您希望 ColorBox 使用的内容加载到 DOM中。看起来您正在查询数据库的内容；这必须在您调用 ColorBox 之前完成。也许有一个回调函数可以用作 db 调用的一部分。

KJM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:13:16.900

如果您使用的是 JQuery 1.8.0，它可能是一个已知的错误；请参阅 < [http://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282) >。声称现在已修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:25:09.207

将上面的代码移到正文部分而不是头部部分的结束标记附近。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:36:08.860

把你的函数放在窗口加载函数之间

```
$(window).load(function(){
    //function here
}); 
```

# schema - Oracle SQL Developer 中的 DB2 - 默认模式

> ID：10536017
> 
> 赞同：1
> 
> 时间：2012-05-10T14:20:14.607
> 
> 标签：schema, db2, oracle-sqldeveloper

使用 Oracle SQL Developer 连接到 DB2 数据库时，有没有办法在连接属性中指定我的模式，以便我始终瞄准我想去的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:30:48.960

我不知道 Oracle SQL Developer 是如何工作的，但至少 DB2 的 JDBC 驱动程序可以选择在连接字符串中指定模式，例如：

```
jdbc:db2://server:50000/MYDB:currentSchema=MySchema; 
```

如果您可以手动更改 OSD 正在使用的连接字符串，那么也许您可以添加该选项。

# android - 按下主页按钮时出现 NotSerializableException

> ID：10536019
> 
> 赞同：10
> 
> 时间：2012-05-10T14:20:21.223
> 
> 标签：android

我有`Activity`一个私有类数据。在该`onSaveInstanceState`方法中，我尝试将其保存为`Data`. 这是我的整个活动：

```
public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public void onSaveInstanceState(Bundle outState){
        outState.putSerializable("TEST", new Data());
    }

    private class Data implements Serializable {

        private static final long serialVersionUID = -4312723541994925110L;

    }
} 
```

现在，当我更改设备的方向时，`Data`对象将被保存并按原样读取。但是，当我按下主页按钮时，应用程序在 logcat 中崩溃并显示以下内容：

> 05-10 20:05:51.895: E/AndroidRuntime(30317): 致命异常: main 05-10 20:05:51.895: E/AndroidRuntime(30317): java.lang.RuntimeException: Parcelable 遇到 IOException 写入可序列化对象（名称= com.rigidbits.test.TestActivity$Data) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.os.Parcel.writeSerializable(Parcel.java:1176) 05-10 20:05:51.895 : E/AndroidRuntime(30317): 在 android.os.Parcel.writeValue(Parcel.java:1130) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.os.Parcel.writeMapInternal(Parcel. java:488) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.os.Bundle.writeToParcel(Bundle.java:1552) 05-10 20:05:51.895: E/AndroidRuntime(30317) : 在 android.os.Parcel.writeBundle(Parcel.java:502) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.app.ActivityManagerProxy。activityPaused(ActivityManagerNative.java:1615) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2298) 05-10 20:05:51.895: E/ AndroidRuntime(30317): 在 android.app.ActivityThread.access$1700(ActivityThread.java:117) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.app.ActivityThread$H.handleMessage(ActivityThread. java:938) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-10 20:05:51.895: E/AndroidRuntime(30317) : 在 android.os.Looper.loop(Looper.java:130) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-10 20:05:51.895:E/AndroidRuntime(30317): at java.lang.reflect.Method.invoke(Method.java:507) 05-10 20:05:51.895: E/AndroidRuntime(30317): at com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:862) 05-10 20:05:51.895: E/AndroidRuntime(30317): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620) 05-10 20 ：05：51.895：E / AndroidRuntime（30317）：在dalvik.system.NativeStart.main（本机方法）05-10 20：05：51.895：E / AndroidRuntime（30317）：引起：java.io.NotSerializableException：com .rigidbits.test.TestActivity 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535) 05-10 20:05:51.895: E/AndroidRuntime( 30317): 在 java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847) 05-10 20:05:51.895: E/AndroidRuntime(30317):在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653) 05-10 20 :05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream。 defaultWriteObject(ObjectOutputStream.java:413) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241) 05-10 20:05:51.895: E/ AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847 ) 05-10 20:05:51.895:E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java :1653) 05-10 20:05:51.895: E/AndroidRuntime(30317): 在 android.os.Parcel.writeSerializable(Parcel.java:1171) 05-10 20:05:51.895: E/AndroidRuntime(30317): ... 16 更多

`onSaveInstanceState`当我在方法中注释该行以便*不*`Data`保存对象时，应用程序会正确消失。

 *有什么帮助吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T19:10:54.810

好的，我相信问题在于您使用的是**私有内部类**。

因此，它可以**访问您的外部类的方法和字段，**即您的活动。

因为你的活动不是可序列化的（*所以它不应该是*），你得到你的例外。

> InnerClass 的实例只能存在于 OuterClass 的实例中，并且可以直接访问其封闭实例的方法和字段。

![在此处输入图像描述](../Images/a5ed98aa960ca2a3aa2a65a1a55d3df2.png)

有两种解决方案。

*   使您的内部类静态

*   将您的内部类移动为自己的类并将其声明为公共

这些解决方案都使您`Data`的类本身成为一个类，然后它不需要您的活动实例存在

参考：[http ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)*

# php - 在同一页面上使用 get 变量？

> ID：10536022
> 
> 赞同：0
> 
> 时间：2012-05-10T14:20:30.270
> 
> 标签：php, jquery

我想知道是否有办法在保持在同一页面上的同时使用 GET 变量。

如果单击特定链接，我想使用 GET 变量执行一些 php/mysql 脚本。但是，一旦单击链接，我不希望页面上的任何内容发生变化，我只想让脚本在幕后运行。

现在，当用户在搜索页面上并将项目添加到他们的收藏夹时，所有搜索结果都会消失，并且 b/c 我正在重新提交

注意：下面的添加到收藏链接，链接到用户单击它时将进入的同一页面。

```
if(isset($_SESSION['username'])){
     echo '<div id="favbutton"><a href="search.php?id='.$id.'"><img src="./image/staricon.png"/>Add to favorites</a></div>';
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:22:29.223

jQuery 有一个 .get() 函数，您可以使用它来完成此操作： http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)。您可以使用它将任意数量的 GET 参数传递给您的服务器端脚本。如果该脚本返回任何数据，您可以实现回调以确定如何处理数据。

这是使用 jQuery .get() 的示例。jQuery 范例之一是“不显眼的 JavaScript”，因此在自己的脚本中而不是在过时的 onclick 属性中添加事件处理程序是标准的。也就是说，这是一个示例实现：

```
jQuery(document).ready(function($) {
    $(".clickable").click(function(e) { // Gets all elements with a class of "clickable"
        $.get("myScript.php",
            { myGETVar: $(this).attr("src") }, // Passes the "src" of the clicked element as "myGETVar"
            function(returnedData) {
                alert("The script returned: " + returnedData);
            }, "html" // In this case we're expecting the script to return html
        );
    });
} 
```

这只是一个简单的示例，但它演示了如何将单击处理程序附加到任意数量的元素（在本例中为具有类“可单击”的元素）并创建 ajax 请求。这个例子传递了被点击元素的“src”（假设你想将它与图像一起使用）并将它作为 GET 变量“myGETVar”传递给 myScript.php。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:21:31.783

您可以使用 ajax（仅限 JavaScript）或[jQuery get](http://api.jquery.com/jQuery.get/)来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:24:31.733

你必须使用 AJAX，你可以使用[jQuery.Ajax轻松地做到这一点](http://api.jquery.com/jQuery.ajax/)

您必须在服务器脚本中静默调用以将其添加到收藏夹，然后向用户显示成功消息。

# iphone - 整数声明和数组计数指令的问题

> ID：10536029
> 
> 赞同：0
> 
> 时间：2012-05-10T14:20:45.920
> 
> 标签：iphone, objective-c, ios, xcode

我正在编写一个应用程序，其中我有一个从服务器收到的 JSON 格式的用户列表。后来，我从该 JSON 中提取每个用户的数据，并创建了一个名为 UsersController 的对象，该对象具有四个字段（我不知道这是否是适当的词），称为 prod_id、userName、userThumb 和 createTime。在我的 ViewController 中，我有一个 UsersController 对象和一个用于存储所有用户的数组。UsersController 类的代码是：

```
//UsersController.h
#import <UIKit/UIKit.h>

@interface UsersController : NSObject{
    NSInteger *prof_id;
    NSString *createTime;
    NSString *fullName;
    NSString *thumb;
}

@property (nonatomic) NSInteger *prof_id;
@property (nonatomic, retain) IBOutlet NSString *createTime;
@property (nonatomic, retain) IBOutlet NSString *fullName;
@property (nonatomic, retain) IBOutlet NSString *thumb;

@end

//UsersController.m
#import "UsersController.h"

@implementation UsersController

@synthesize prof_id;
@synthesize fullName;
@synthesize createTime;
@synthesize thumb;

@end 
```

在 ViewController.m 我有以下代码：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

 NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];

NSArray *array_webdata=[[NSArray array] init];

NSString *searchStatus = [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding];    

array_webdata = [parsedata objectWithString:searchStatus error:nil];

//String with all data of each user
NSString *usersList = [array_webdata valueForKey:@"results"];    
NSLog(@"\n usersList =\n %@ \n", usersList);

//extract data from the JSON data received from the server
NSArray *userName = [usersList valueForKey:@"fullname"];    
NSArray *userID = [usersList valueForKey:@"prof_id"];
NSArray *userThumb = [usersList valueForKey:@"thumb"];
NSArray *userCreateTime = [usersList valueForKey:@"createTime"];    

NSMutableArray *arrayUsuarios = [[NSMutableArray alloc] initWithCapacity: [userID count]];
int i;
UsersController *usuarioSimple;
UsersController *usuarioAuxiliar;
for (int i=0; i<[userName count]; i++) {
    usuarioSimple = [[UsersController alloc] init];
    usuarioAuxiliar= [[UsersController alloc] init];

    //I store in the object called usuario the extracted data from JSON userName, userID, userThumb y userCreateTime
    usuarioSimple.prof_id = [userID objectAtIndex:i];
    usuarioSimple.fullName = [userName objectAtIndex:i];
    usuarioSimple.thumb = [userThumb objectAtIndex:i];
    usuarioSimple.createTime = [userCreateTime objectAtIndex:i];

    [arrayUsuarios addObject:usuarioSimple];

    usuarioAuxiliar = [arrayUsuarios objectAtIndex:i];

    NSLog(@"pruebaConsulta.prof_id[%@]:    %@",i, usuarioAuxiliar.prof_id);
    NSLog(@"pruebaConsulta.fullName[%@]:   %@",i, usuarioAuxiliar.fullName);
    NSLog(@"pruebaConsulta.thumb[%@]:      %@",i, usuarioAuxiliar.thumb);
    NSLog(@"pruebaConsulta.createTime[%@]: %@\n",i, usuarioAuxiliar.createTime);
    [usuarioSimple release];
    [usuarioAuxiliar release];

}

[searchStatus release];
[connection release];
[webData release];
[pool drain];

} 
```

在这里我有两个问题。第一个是在 bucle for 中使用的***i的声明。***我不知道为什么，但是当我执行时，当它必须显示***i***的值时，显示 (null)。

第二个问题是当我使用 [userID count]、[userName count]、[userThumb count] 或 [userCreateTime count] 时。这个指令不起作用，因为如果我写这行：

```
NSLog(@"userid count: %@", [userID count]); 
```

执行崩溃并说 EXC_BAD_ACCESS。我证明了很多可能的解决方案，但总是失败，我需要你的帮助。谢谢。

ps：对不起我的英语！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:24:25.713

您必须在格式化字符串中使用`%i`或`%d`包含整数。请参阅[字符串格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:29:12.637

count 将返回一个原始整数。

%@ 用于打印字符串或任何对象的字符串描述。

正如 DrummerB 所说，将 %i 或 %d 用于整数。

```
NSLog(@"userid count: %d", [userID count]); 
```

你得到 EXC_BAD_ACCESS 因为 NSLog 认为你已经传递了一个指向一个对象的指针，这对你来说是一个错误的访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:36:18.483

NSInteger 不是对象，它是一种类型，您将 prof_id 声明为 NSInteger*，这意味着指向整数的指针，而不是对象。

您不能将消息传递给 NSInteger 或其指针，因为它不是对象。您也不能将其添加到数组或字典中。您想使用 NSNumber，它封装了一个数字（例如整数）。然后，您可以将 NSNumber 作为对象传递，但通过向其发送 integerValue 消息来检索整数值。

```
NSInteger myInt = myNumber.integerValue; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:45:43.967

一些事情：

1.当你这样做时： NSLog(@"userid count: %@", [userID count]); 使用 %d 而不是 %@。

1.  当你这样做时：[arrayUsuarios addObject:usuarioSimple]; //你在最后一个索引处添加对象。

    usuarioAuxiliar = [arrayUsuarios objectAtIndex:i]; //这里你访问索引i处的对象，如果i> [arrayUsuarios count]，它将崩溃。

在这种情况下，你调用这个方法：[arrayUsuarios lastObject];

# spring-security - Spring 3：找不到 AuthenticationProcessingFilter

> ID：10536030
> 
> 赞同：7
> 
> 时间：2012-05-10T14:20:46.623
> 
> 标签：spring-security, spring-3

`AuthenticationProcessingFilter`从迁移`Spring 2`到`Spring 3`（使用弹簧核心）时我无法找到

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T14:56:42.123

在 Spring security 3.x 中，此类已重命名为 UsernamePasswordAuthenticationFilter。

参考：[http ://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AuthenticationProcessingFilter.html](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AuthenticationProcessingFilter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T04:24:32.810

如果您正在寻找在**AbstractAuthenticationProcessingFilter.SPRING_SECURITY_LAST_EXCEPTION_KEY**春季 3 中可用的常量， 那么该类中不再可用。

另一种选择是 spring 添加了**WebAttributes**类**org.springframework.security.web.WebAttributes**，您可以在其中使用以下代码获得相同的异常 - **session[WebAttributes.AUTHENTICATION_EXCEPTION]**

在 WebAttributes AUTHENTICATION_EXCEPTION 是字符串定义如下 WebAttributes.AUTHENTICATION_EXCEPTION = "SPRING_SECURITY_LAST_EXCEPTION_KEY"

希望这会有所帮助。

# testing - WSO2 SOA套件首次测试

> ID：10536031
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:20:50.037
> 
> 标签：testing, wso2, suite

Stackoverflow 社区。我发现可以在这个网站上联系 WSO2 社区，所以我要问一个简单的方向问题。

**我想部署一个简单的“Hello world”服务并在 WSO2 SOA Suite 上对其进行测试。我应该如何进行**（一步一步）**？**

与此目标相关的其他疑问是：

“什么是 WSO2 Carbon 功能？它是一个套件协调器，我可以在其上安装组件（如 ESB、治理注册表、BAM 等）吗？”

“我需要 Carbon、ESB 和/或 Carbon Studio 吗？”

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:22:14.253

Carbon 是基于 OSGi 的服务器基础。它处理常见的功能，如用户管理、传输、安全、日志记录、集群、缓存和限制。所有 WSO2 产品都是在这个核心框架之上运行的组件集。所以可供下载的独立产品是这样组成的..

*   WSO2 Carbon + Service Hosting 相关组件 = WSO2 Application Server
*   WSO2 Carbon + 中介/代理相关组件 = WSO2 ESB
*   WSO2 Carbon + SOA Governance 相关组件 = WSO2 Governence Registry
*   WSO2 Carbon + BPEL 组件 = WSO2 业务流程服务器

[此](http://wso2.com/products/platforms) 图将帮助您了解整个平台的功能。为了让事情变得更有趣，由于这个模块化架构基于 OSGi，您可以混合和匹配组件以满足您的要求。例如，如果您想将 BPEL 支持添加到 WSO2 ESB，只需将 BPEL 组件安装到您现有的 WSO2 ESB 中。

WSO2 Carbon Studio（最近更名为 Developer Studio）是基于 Eclipse 的 IDE，可帮助您使用图形编辑器创建工件、在 IDE 中测试和调试它们，并帮助将它们作为 Carbon Archives (.car) 部署到您的基于 WSO2 Carbon 的服务器或基于 WSO2 Stratos 的云。

[这篇](http://rangasiriwardena.blogspot.com/2011/02/creating-simple-axis-serviceaar-file.html)博客描述了如何在 WSO2 应用服务器中部署一个 Hello World 服务。 [这](http://wso2.org/project/carbon-studio/1.0.14/docs/shopping-cart-sample.html)是一个使用 carbon studio 进行开发和部署的高级示例。

# javascript - xhr javascript PUT 方法

> ID：10536032
> 
> 赞同：2
> 
> 时间：2012-05-10T14:20:53.720
> 
> 标签：javascript, xmlhttprequest, put

我需要在 PUT 方法中发送一个 xhr 请求

这是我的代码：

```
function put(_url, _callback,_data){

  var xhr = createCORSRequest('PUT',_url);
  if (!xhr){
    throw new Error('CORS not supported');
  }
  $('.ajax-loading').show();

  xhr.send(_data);

  /*SUCCESS -- do somenthing with data*/
  xhr.onload = function(){
    // process the response.
    _callback(xhr.responseText);
    $('.ajax-loading').hide();
  };

  xhr.onerror = function(e){
    console.log(e);
    $('.ajax-loading').show();
  };
} 
```

不知道为什么它不起作用，因为它没有将数据传递给我设置的 url。虽然在 POST 方法中执行相同的功能是可以的！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:53:29.447

您的方法是正确的，可能您必须检查是否在代码中调用该函数或其他内容。尝试在控制台中剪切并粘贴该函数，然后在控制台中调用它。

即使使用 CORS 服务器，在 chrome 中也能完美运行。

告诉我它是否有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T21:55:55.977

PUT 方法不适用于标准浏览器 HTTP 方法。您必须在 POST 变量中创建一个 _method=put 值来模拟 PUT 请求。

# java - 减少TomcatDeployer的间隔

> ID：10536037
> 
> 赞同：0
> 
> 时间：2012-05-10T14:21:05.777
> 
> 标签：java, deployment, jboss, jboss-4.2.x

如何减少[TomcatDeployer](https://docs.jboss.org/jbossas/javadoc/4.0.2/org/jboss/web/tomcat/tc5/TomcatDeployer.html)扫描新工件的时间间隔？我正在使用 JBoss 4.2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:45:48.483

由于您在 JBoss 中部署工件，因此您很可能会询问热部署扫描频率。

在 JBossAS 4.2 中，我相信您在`server/$instance_name/conf/jboss-service.xml`文件中为`DeploymentScanner`MBean 设置了热部署扫描频率：

```
 <!-- this is in milli-seconds, so 60000 ms means 60 seconds which is scanning every minute in the deploy folder for changes in the deployed packages -->
  <attribute name="ScanPeriod">60000</attribute>
  <attribute name="ScanEnabled">true</attribute> 
```

# php - 通过php更改css

> ID：10536043
> 
> 赞同：-5
> 
> 时间：2012-05-10T14:21:11.033
> 
> 标签：php, jquery, html, css

是否可以更改css属性？

好的，我有这个代码。

```
<form action="changecss.php" method="POST">
<table>
<tr>
<td>
which one do you want to change :
</td>
<td>
<select type="text" name="thecolorselect">
<option value="background">Background</option>
<option value="anchor">Achor</option>
<option value="paragraph">Paragraph</option>
</select>
</td>
<td>
Current attributes:
</td>
<td>
<select name="attr">
<!-- here will be listed the current attributes of the item -->
</select>
</td>
<td>
Change into:
</td>
<td>
<select type="text" name="thecolorinput">
<option value="red">Red</option>
<option value="blue">blue</option>
<option value="yellow">yellow</option>
</select>
</td>
</tr>
</table>
<button name="changecsspropertynow">Change the background color now</button>
</form> 
```

所以现在，当用户点击按钮时，指定的 css 属性应该更改为它在表单上设置的内容，例如：您要更改哪个：背景，当前属性：背景，更改为：蓝色。这只是一个过期，我只是不知道该怎么做，我现在只有想法，没有代码。如果有人在这里提供帮助，请提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:42:06.657

总结有关您的问题的讨论：

（可能）不需要在服务器端执行此操作。您可以通过 Javascript 读取这些选项的值并相应地更改样式。

如果您想记住数据库中用户的这些设置或类似的东西，您只需要 php。

如果您使用 jQuery ( ty @ JP Hellemons :-D )，那就更容易了。

更新：[在这里试试](http://jsfiddle.net/poikl/4mpWs/3/)

如果要存储这些设置，您可以：

1.  通过 cookie 或 local|session-Storage 将其存储在客户端
2.  发送 ajax 请求并将其存储在服务器端
3.  实际上确实提交表单并在服务器端处理它。

每种方法都有其优点和缺点，所以这取决于你，你想做什么。

# vi - 搜索并替换为通配符

> ID：10536051
> 
> 赞同：2
> 
> 时间：2012-05-10T14:21:39.100
> 
> 标签：vi

我有如下文字-

```
xA0
xA1
xB0
xB1 
```

我想将其替换为

```
(xA 0)
(xA 1)
(xB 0)
(xB 1) 
```

在这种情况下如何使用通配符？有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:30:58.457

是否：`s/\(x[AB]\)\([01]\)/(\1 \2)/`给你预期的结果？

* * *

# 说明

搜索和替换的一般模式是`s/pattern/replacement/`. 这里的第一场比赛是`x[AB]`. 这意味着我们想要 an`x`后跟 an`A`或 a `B`。用于对匹配`\( \)`进行分组并将结果存储在`\1`. 对数字执行相同操作，假定为`0`或`1`。最后通过 引用存储的组`\1`，`\2`并将其放在括号内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:27:00.720

如果文本的长度始终相同，则可以使用子字符串。

选择子字符串(Column, 1, 2) + ' ' + Substring(Column, 3, 1)

如果您有一个可变长度的值，但子字符串将不起作用。

# google-bigquery - BigQuery 查询限制中的表数

> ID：10536053
> 
> 赞同：0
> 
> 时间：2012-05-10T14:21:47.787
> 
> 标签：google-bigquery

在配额策略中，有一个**最大查询长度：10KB**，其中一个查询功能是可以使用具有相同架构的多个表，如果我不超过 10kb，查询中的表数量是否有限制?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-12T01:40:02.943

目前接受的答案是错误的（2014 年 10 月）。一个查询中可以引用的表的数量有一个限制：**1000**。

这也适用于表格范围。查看 BigQuery 官方文档中的[查询数据限制](https://cloud.google.com/bigquery/querying-data#limits)。

（顺便说一下，当前的最大查询长度也不同：256 KB）

分表可以降低成本，但会增加查询时间。根据[文档](https://cloud.google.com/bigquery/query-reference#from)，“每个附加表最多 50 毫秒”。

当然，这些限制可能会随着时间而改变，因此请务必查看官方文档而不是 SO 关于当前限制和配额的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:03:11.933

您可以在单个查询中查询多达 1,000 个表：只需将它们与逗号组合，如`SELECT foo FROM datast.table1, dataset.table2...`

# javascript - 如何获取当前可拖动和调整大小的 id？

> ID：10536054
> 
> 赞同：1
> 
> 时间：2012-05-10T14:21:50.003
> 
> 标签：javascript, jquery

如何获取当前可拖动和调整大小的 id？我喜欢

```
$('.demo')
.resizable({
start:function(event,ui){
$(ui).item.attr('id);
}

})
.draggable({
start:function(event,ui){
$(ui).item.attr('id);
}
}); 
```

但它返回未定义。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:25:01.983

你错过了`'`符号：

```
$(ui).item.attr('id'); 
```

# php - 混合身份验证 - 会话到期时该怎么办？

> ID：10536055
> 
> 赞同：1
> 
> 时间：2012-05-10T14:21:51.360
> 
> 标签：php, session, authentication, login, hybridauth

我已经编写了一个基于此处可用的 HybridAuth 库的系统：http: [//hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/)

用户可以使用 Facebook、Twitter 和站点本地登录系统登录。

但是我想知道当 PHP 会话到期时会发生什么（当前为 24 分钟 - 默认设置）。以前使用单点登录系统，我只是将用户重定向到那里，如果他们检查过记住我，它会自动重新建立那里的连接。

现在虽然我有三种方法可以让用户登录。

这些是我到目前为止提出的选项：

*   尝试使用每种可用的身份验证方法进行连接，直到找到连接
*   存储一个 cookie 客户端，其中包含用户上次使用的身份验证提供程序的信息，并且只尝试那个
*   强制用户选择如何再次登录（不理想）

如果有人有任何建议，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:43:25.730

我会保存一个包含登录方法的登录信息的cookie，并在每次会话到期时使用它。

如果用户使用另一种方法登录，我会用新的 cookie 替换旧的 cookie（或旧的登录方法）。

所以你的第二个选择。

第三个让用户感到困惑，第一个是不必要的资源消耗......

# google-apps-script - 将变量作为 DocumentApp.Attribute.FONT_SIZ 传递

> ID：10536061
> 
> 赞同：0
> 
> 时间：2012-05-10T14:22:01.203
> 
> 标签：google-apps-script

我希望能够允许我的用户为他们正在创建的文档指定字体大小（和系列）。我有一个他们在配置页面上选择的各种大小的列表框，但我不确定如何将它分配给代码。例如，这很好用：

'var lHeading2style = {}; lHeading2style[DocumentApp.Attribute.FONT_FAMILY]=DocumentApp.FontFamily.headingStyle2font；lHeading2style[DocumentApp.Attribute.FONT_SIZE] = 14; lHeading2style[DocumentApp.Attribute.BOLD] = false;'

但是，如果我如下所示设置一个变量，如何将它附加到我的代码行？

var **headerStyle3FontSize** = '8';

var lHeading3style = {}; lHeading3style[DocumentApp.Attribute.FONT_FAMILY]=DocumentApp.FontFamily+headingStyle3font；lHeading3style[DocumentApp.Attribute.FONT_SIZE] = ' **headingStyle3FontSize** '; lHeading3style[DocumentApp.Attribute.BOLD] = false; // 格式化样式

我也试过 lHeading3style[DocumentApp.Attribute.FONT_SIZE] = **headingStyle3FontSize**；

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:48:12.733

您应该为变量使用数字值，而不是字符串值。

```
var headingStyle3FontSize = 8;
lHeading3style[DocumentApp.Attribute.FONT_SIZE] = headingStyle3FontSize; 
```

# c# - 使用 Winform 选项卡控件

> ID：10536062
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:22:04.460
> 
> 标签：c#, .net, visual-studio-2010

在winforms中使用标签是好还是坏？

您是否需要执行任何特殊的操作才能在它们之间传递对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:24:25.557

您可以使用选项卡控件。它完全安全。

您不需要任何特殊的东西来在选项卡之间传递值。

当您想在一个作为选项卡控件的控件中打开多个表单时使用它们。

这些表单可以在选项卡项中作为子项/内容打开。即使您从一个选项卡切换到另一个选项卡，它们中的每一个都将保持其状态和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:25:06.303

选项卡是对表单上的控件进行分组和组织的合适工具。他们可以帮助整理繁忙的表格。

您不必做任何特别的事情来在不同选项卡上的控件之间传递数据，因为它们都在同一个表单上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:29:03.323

这取决于需求，Tabs 可以很好地对相关控件进行分组，但有时通过隐藏某些控件并不能提供很好的用户体验。

您不必做任何事情来在它们之间传递信息，并且您可以访问选项卡中的任何控件，并且任何选项卡中的控件都可以从托管它们的变量中访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:29:13.853

如果您想排序并避免多个新表单，TabControl 是一个很好的控件。如果你想在选项卡之间传递数据，没有问题，因为它是多个选项卡的一个控件。

# php - PHP中的图像超链接

> ID：10536065
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:22:11.970
> 
> 标签：php, drupal

我的块之一有以下 PHP 代码

```
<?php global $base_url; ?>
<div class = "order-help">
<div class = "rc-img"><img src = "<?php print $base_url; ?>/sites/all/themes/businessconnect/images/contacts-box.jpg" alt = ""/></div>
</div> 
```

这在我的块中显示图像很好，但我也想让图像成为其他页面的超链接。为此，我使用了以下代码

```
<?php global $base_url; ?>
<div class = "order-help">
<?php print( <a href="http://mylink.com/path/">
<div class = "rc-img">
<img src = "<?php print $base_url; ?>/sites/all/themes/businessconnect/images/contacts-box.jpg" alt = ""/></div>
</a>' ); ?>
</div> 
```

但它不起作用。我错过了什么？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:23:50.013

只需在 HTML 中添加一个`<a>`标签。

```
<div class = "rc-img">
    <a href="http://mylink.com/path/">
        <img src="<?php print $base_url; ?>/sites/all/themes/businessconnect/images/contacts-box.jpg" alt=""/>
    </a>
</div> 
```

您的代码无法正常工作，因为`print`需要您向它传递一个字符串，并且您还拥有`<?php print $base_url ?>`一个`<?php`块内部。

# php - 每次循环foreach时获取下一个变量

> ID：10536066
> 
> 赞同：0
> 
> 时间：2012-05-10T14:22:13.383
> 
> 标签：php, variables, foreach, calendar, vcalendar

我有一个 php 脚本，为存储在帖子中的每个“事件”创建一个日历事件。

它们存储为 ['listItem'][0]、['listItem'][1] 等，无论有多少。

下面的代码在为每个事件创建一个日历事件的意义上是有效的。但是，它仅从 ['listItem'][0] 获取数据。我需要找到一种方法来每次都转到 $_POST 中的下一个变量。

因此，如果有那么多但它们都在同一天进行，那么目前它会放置 10 个事件。

** eventDate 变量只存储一个日期。

提前感谢您的帮助。

```
foreach($_POST['listItem'] as $key => $value){

$eventDate = trim($_POST['listItem'][0]);

echo "BEGIN:VEVENT\n";
echo "METHOD:REQUEST\n"; // requied by Outlook
echo "DTSTART:".$eventDate."T190000Z\n";
echo "DTEND:".$eventDate."T193000Z\n";
echo "LOCATION:London\n";
echo "DESCRIPTION:Let's get together for New Years Eve\n";
echo "SUMMARY:".$eventDate."\n";
echo "DTSTAMP:".$eventDate."T190000Z\n";
echo "END:VEVENT\n";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:24:31.143

```
$eventDate = trim($_POST['listItem'][0]); 
```

应该成为

```
$eventDate = trim($value); 
```

foreach 将移动到下一个元素并在每次迭代中更新您的 $key 和 $value。

# qt - 使 QTextEdit ^Z 的 setText 知道

> ID：10536080
> 
> 赞同：0
> 
> 时间：2012-05-10T14:22:45.950
> 
> 标签：qt, qt4, state, qtextedit

当我使用 QTextEdit::setText() 时，更改似乎是不可撤销的，您无法恢复`CTRL+Z`，还有其他我应该使用的 API 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:59:41.483

代替

```
textEdit->setText("your text"); 
```

做这个：

```
textEdit->clear();
textEdit->append("your text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:50:48.733

要在您的应用程序中正确支持撤消/重做功能，您可能需要查看[Qt 的撤消框架文档](http://qt-project.org/doc/qt-4.8/qundo.html)。

# mysql - 优化 JDBC 查询

> ID：10536083
> 
> 赞同：0
> 
> 时间：2012-05-10T14:23:01.297
> 
> 标签：mysql, optimization, jdbc

我有一个程序连接到数据库并检查重复条目并删除重复项并更新原始记录中相同文本的数量。

我的问题是，只有 100000 条记录需要几个小时，并且程序以“需要堆空间”错误结束。

如何优化该程序以快速完成任务？

```
public class Main {
  // serveropsdb.properties file location = /opt/serverops/scripts/serverops.properties
  private final static String PROPERTIES_FILENAME=File.separatorChar+"opt"+File.separatorChar+"serverops"+File.separatorChar+"scripts"+File.separatorChar+"serveropsdb.properties";
  private final static String  DATE_FORMAT = "yyyy/MM/dd HH:mm:ss";
  private final static String  PROPERTY_NAME_STARTTIME= "start.time";
  private final static String  PROPERTY_NAME_ENDTIME= "end.time";
  private final static String  PROPERTY_NAME_DB_TABLENAME= "db.tablename";
  private final static String  PROPERTY_NAME_DB_USERNAME= "db.username";
  private final static String  PROPERTY_NAME_DB_PASSWORD= "db.password";
  private final static String  PROPERTY_NAME_DB_NAME= "db.name";

  public static void main(String[] args) {
    System.out.println("DB consolidation started");

    Properties properties = new Properties();
    try { //loading serverops.properties file
      properties.load(new FileInputStream(PROPERTIES_FILENAME));
    } catch (IOException e) {
      System.out.println("Error loading "+PROPERTIES_FILENAME+" properties!");
      e.printStackTrace();
    }

    try { // loading jdbc driver
      Class.forName("com.mysql.jdbc.Driver");
    } catch (ClassNotFoundException e) {
      System.out.println(" JDBC Driver not found");
      e.printStackTrace();
      return;
    }

    System.out.println("MySQL JDBC Driver found! Connecting to Database");
    Connection connection = null;

    ResultSet resultSet = null;
    ResultSet findResultSet = null;

    PreparedStatement allStatement, findStatement, updateStatement;

    //date formate used yyyy/MM/dd HH:mm:ss
    DateTimeFormatter dateFromatter= DateTimeFormat.forPattern(DATE_FORMAT);

    DateTime startDate = dateFromatter.parseDateTime(properties.getProperty(PROPERTY_NAME_STARTTIME));
    DateTime endDate= dateFromatter.parseDateTime( properties.getProperty( PROPERTY_NAME_ENDTIME));

    Timestamp t1 = new Timestamp(startDate.getMillis());
    Timestamp t2 = new Timestamp(endDate.getMillis());

    StringBuilder sql;      
    String toBeRemovedIndex ;
    int updateNumEntries; 
    String toBeRemovedLog;
    String toBeRemovedHostname; 
    boolean  updateDB=false;

    try { // connecting to DB with credentials from the properties file 
      connection = DriverManager.getConnection( 
        "jdbc:mysql://localhost:3306/"+properties.getProperty(PROPERTY_NAME_DB_NAME), 
        properties.getProperty(PROPERTY_NAME_DB_USERNAME),
        properties.getProperty(PROPERTY_NAME_DB_PASSWORD));

  // getting all record between start time and end time 
      sql = new StringBuilder( "SELECT * FROM" 
                             + properties.getProperty(PROPERTY_NAME_DB_TABLENAME)
                             + " WHERE last_seen BETWEEN ? AND ?");

      allStatement = connection.prepareStatement(sql.toString());
      allStatement.setTimestamp(1, t1);
      allStatement.setTimestamp(2,t2); 
      resultSet = allStatement.executeQuery( );

      while (resultSet.next()) {
        toBeRemovedIndex  = resultSet.getString(1);
        updateNumEntries = resultSet.getInt(2);
        toBeRemovedLog = resultSet.getString(3);
        toBeRemovedHostname = resultSet.getString(5);

        // selecting the duplicate entries with logmessage , id and hostname
        sql = new StringBuilder( "SELECT * FROM "
                               + properties.getProperty(PROPERTY_NAME_DB_TABLENAME) 
                               + " where log_message=? and  id <> ? and hostname = ?"  );

        findStatement = connection.prepareStatement(sql.toString());
        findStatement.setString(1, toBeRemovedLog );
        findStatement.setString(2, toBeRemovedIndex );
        findStatement.setString(3, toBeRemovedHostname);

        findResultSet  = findStatement.executeQuery();
        String newId="";
        while( findResultSet.next()) {
          newId = findResultSet.getString(1);
          updateNumEntries +=findResultSet.getInt(2);
          updateDB = true;
        }

        if(updateDB ) { //  if duplicate entry found - deleting it from the db 
          sql = new StringBuilder( "DELETE  FROM"
                                 + properties.getProperty(PROPERTY_NAME_DB_TABLENAME)
                                 + " where id = ?" );
          updateStatement = connection.prepareStatement(sql.toString());
          updateStatement.setString(1, toBeRemovedIndex  );
          updateStatement.executeUpdate();

          // updating similar entry with number of records
          sql = new StringBuilder( "Update "
                                 + properties.getProperty(PROPERTY_NAME_DB_TABLENAME)
                                 + " set number_of_entries = ? where  id = ? " );

          updateStatement = connection.prepareStatement(sql.toString());
          updateStatement.setLong(1, updateNumEntries );
          updateStatement.setString(2, newId );
          updateStatement.executeUpdate();
          updateDB = false;
          updateStatement=null;
        }
      }
    } catch (SQLException e) {
      System.out.println("Connection Failed! Check output console");
      e.printStackTrace();
      return;
    }

    DateTime now = new DateTime();

    if(connection != null) {
      try {
        connection.close();
      } catch (SQLException e) {
        e.printStackTrace();
      }
    }

    System.out.println( "Current time = "
                      + now.toString() 
                      + " DB consoladiation done successfully between "
                      + t1.toString() + " and "+ t2.toString());
    }
 } 
```

表结构：

```
 CREATE TABLE IF NOT EXISTS `syslog_parsed` (
     `id` char(36) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
     `number_of_entries` int(11) NOT NULL,
     `log_message` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
     `last_seen` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
     `hostname` varchar(200) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
     KEY `ID` (`id`)
   ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:41:00.963

您的基本问题是您嵌套了 while 循环。您的内部循环对包含 100k 个项目的表执行 sql 查询。这意味着您有大约 100000^2 次操作，包括 100k 次 sql 调用。此外，您的所有调用都没有关闭，因此 Java 将结果集保存在内存中 - 因此会出现 heapsize 错误。

您的大部分代码都是多余的，可以用 sql 语句省略。这可能不太正确，因此您应该针对您的数据库对其进行测试，但它为您提供了关键元素：

```
String sql = "SELECT id FROM ( "
           + "  SELECT id, log_message, hostname FROM syslog_parsed "
           + "  WHERE last_seen BETWEEN ? AND ? "
           + "  GROUP BY id, log_message, hostname "
           + ") x "//creates a subtable with grouped items
           + "GROUP BY id "
           + "HAVING count(*) > 1"//only returns rows that appear more than once

PreparedStatement stmt = connection.prepareStatement(sql.toString());
stmt.setTimestamp(1, t1);
stmt.setTimestamp(2, t2);
resultSet =  stmt.executeQuery( );

while (resultSet.next()) {
  //Copy result
  //Delete all of that result
  //Add back in one such result
} 
```

这应该运行得更快，因为代码只需要处理重复项（大概不超过 50k 条记录，但可能要少得多）。它将查找重复项的工作卸载到 sql 中，这非常适合此类任务。

未来的注意事项：请格式化您的代码，否则它很难阅读。您可能还想尝试关注真正重要的代码。

# java - JAX-RS 和 CDI / @Provider 和 beans.xml

> ID：10536087
> 
> 赞同：1
> 
> 时间：2012-05-10T14:23:12.950
> 
> 标签：java, jax-rs, cdi

我制作了一个使用 JAX-RS（RESTfull 服务）的简单项目

我有一个部署到 JBoss AS 6.1 的 JAX-RS（RESTfull 服务）Web 服务项目。与 JSON 集成的 resteasy 由 JBoss 6.1 AS 默认提供。我想更改默认 JSON 资源的日期格式。

我从 Internet 获得了一些帮助，并添加了一个扩展类`JacksonJsonProvider`：

*   [在 RestEasy 中访问 Jackson 对象映射器](https://stackoverflow.com/questions/8498413/accessing-jackson-object-mapper-in-resteasy)
*   [Jersey + Jackson JSON 日期格式序列化 - 如何更改格式或使用自定义 JacksonJsonProvider](https://stackoverflow.com/questions/4428109/jersey-jackson-json-date-serialization-format-problem-how-to-change-the-form)

```
@Provider
@Produces("application/json")
public class MyJacksonJsonProvider extends JacksonJsonProvider {
    public static final String pattern = "YYYY-MM-dd'T'HH:mm:ss";

    @Override
    public void writeTo(Object value, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap<String,Object> httpHeaders, OutputStream entityStream) throws IOException, WebApplicationException {
        ObjectMapper mapper = locateMapper(type, mediaType);

        // Set customized date format
        SimpleDateFormat sdf = new SimpleDateFormat(pattern);
        mapper.getSerializationConfig().setDateFormat(sdf);

        super.writeTo(value, type, genericType, annotations, mediaType, httpHeaders, entityStream);
    }
} 
```

在我在 WebContent/WEB-INF 下添加一个空 beans.xml 以进行 CDI 注入之前，这很有效。

`MyJacksonJsonProvider`没有被调用，我仍然得到默认的 JSON 日期格式。

即使在 pom.xml 下添加以下依赖项也无济于事：

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxrs</artifactId>
</dependency>
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-cdi</artifactId>
    <version>2.2.1.GA</version>
</dependency> 
```

`MyJacksonJsonProvider`如果我在“WebContent/WEB-INF”文件夹下有一个空的 beans.xml，有谁知道为什么会被忽略？提前非常感谢！

仅供参考，这是示例模型类：

```
@XmlRootElement(name = "movie")
public class Movie {

    String name;
    String director;
    int year;
    Date date;

    @XmlElement
    public String getName() {
        return name;
    }

    public void setName(String name) {
       this.name = name;
    }

    @XmlElement
    public String getDirector() {
        return director;
    }

    public void setDirector(String director) {
        this.director = director;
    }

    @XmlAttribute
    public int getYear() {
        return year;
    }

    public void setYear(int year) {
        this.year = year;
    }

    @XmlElement
    public Date getDate() {
       return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

} 
```

这是生成 JSON 资源的类：

```
@Path("/json/movie")
public class JSONService {

    @GET
    @Path("/get")
    @Produces("application/json")
    public Movie getMovieInJSON() {

        Movie movie = new Movie();
        movie.setName("Little flower");
        movie.setDirector("Zhang Zheng");
        movie.setYear(1979);
        movie.setDate(new Date());

        return movie; 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:08:12.597

我相信我也遇到过这种情况。这是一个[已知问题 (RESTEASY-555)](https://issues.jboss.org/browse/RESTEASY-555)，如果您无法将 Resteasy 升级到 >= 2.3.3.Final，解决方法是告诉 Weld 排除`MyJacksonJsonProvider`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:weld="http://jboss.org/schema/weld/beans"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://docs.jboss.org/cdi/beans_1_0.xsd
                           http://jboss.org/schema/weld/beans http://jboss.org/schema/weld/beans_1_1.xsd">
  <weld:scan>
    <weld:exclude name="MyJacksonJsonProvider" />
  </weld:scan>
</beans> 
```

# bash - BASH：读取用户输入时，Enter 带来新的一行

> ID：10536089
> 
> 赞同：10
> 
> 时间：2012-05-10T14:23:16.103
> 
> 标签：bash

我需要以下示例 bash 脚本的行为如下：

```
echo -e "Enter name: \c"
read U_IP_NAME
echo -e "You said your name is : $U_IP_NAME" 
```

这将输出到：

```
Enter name: Alok
You said your name is : Alok 
```

但我希望它是：

```
You said your name is : Alok 
```

有没有办法做到这一点？

**[通过以下解决方案解决：mouviciel]**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T15:02:12.683

您想将光标向上移动一行。这是通过以下方式实现的`tput cuu1`：

```
echo -e "Enter name: \c"
read U_IP_NAME

tput cuu1

echo -e "Your said your name is : $U_IP_NAME" 
```

更多信息`man tput`和`man terminfo`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T15:26:48.003

```
read -p "Enter your uip-name: " U_IP_NAME 
```

-p 提示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:49:41.677

你可以试试[这个语法](http://www.unix.com/shell-programming-scripting/135884-chomp-like-perl-operator-bash.html)：

U_IP_NAME="${U_IP_NAME%\\n}"

# mysql - 任何人都可以调试这个 bash 脚本来创建 mysql 数据库和用户吗？

> ID：10536090
> 
> 赞同：0
> 
> 时间：2012-05-10T14:23:29.817
> 
> 标签：mysql, bash

谁能告诉我为什么在运行命令后会出现此错误？

```
root@server1:/home# ./dbcreate.sh db_team1 team1 team1password
ERROR 1133 (42000) at line 1: Can't find any matching row in the user table 
```

这是我正在使用的脚本。

```
#!/bin/bash

MYSQL=`which mysql`
ROOTPASSWD=mypassword

Q1="CREATE DATABASE IF NOT EXISTS $1;"
Q2="SET PASSWORD FOR '$2'@'localhost'= PASSWORD('$3');"
Q3="GRANT ALL PRIVILEGES ON $1.* TO '$2'@'localhost' IDENTIFIED BY '$3';"
Q4="FLUSH PRIVILEGES;"
SQL="${Q1}${Q2}${Q3}${Q4}"

# Usage: $0 dbname dbuser dbpass"

$MYSQL -u root -p$ROOTPASSWD -e "$SQL" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:30:54.367

似乎您`NO_AUTO_CREATE_USER`启用了 mod，因此`GRANT`无法创建新用户（此外，通过创建用户`GRANT`可能无法在 5.5 和 5.6 中使用）。有关更多信息，请参见此处：

[http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_no_auto_create_user](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_no_auto_create_user)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T19:28:08.640

在尝试将用户关联到数据库之前添加用户创建语句

```
CREATE USER your_username@localhost IDENTIFIED BY 'your_user_password'; 
```

这应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T22:39:12.590

最后试试这个：

回声“$SQL” | mysql -u 根目录 -p

# c++ - 为什么首先调用虚拟基类构造函数？

> ID：10536091
> 
> 赞同：-4
> 
> 时间：2012-05-10T14:23:35.247
> 
> 标签：c++, inheritance, virtual

> **可能重复：**
> [在 C++ 中，什么是虚拟基类？](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)
> [虚拟继承](https://stackoverflow.com/questions/419943/virtual-inheritance)

为什么要从大多数派生类调用虚拟基类的构造函数……并且在继承层次结构中首先创建虚拟基类的对象……这背后的逻辑是什么？

我知道在使用虚拟继承的菱形结构中使用虚拟继承只创建了大多数基类的一个副本，但虚拟在线性继承中究竟做了什么。

```
class A{};
class B : virtual public A {};  
class C : virtual public B {}; 
```

实际上我们尝试使用这种继承来实现什么？

在虚拟继承的情况下，对象布局是什么？

有人可以解释 C++ 中这种行为背后的逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:38:17.480

虚拟继承可以说是默认的。如果我写类似：

```
class Base
{
public:
    virtual ~Base() {}
    virtual void f() = 0;
    virtual int g() const = 0;
    //  ...
}; 
```

，很明显这个类是要继承自的。如果我以后写：

```
class Middle : public virtual Base
{
public:
    virtual void f();  
}; 
```

，该类仍然显然是一个基类——它只实现了部分接口。在这种情况下，继承 *应该*是虚拟的，因为我不知道（或不想只强加一个解决方案） 的实现`g()`是在进一步的派生类中还是在姐妹类中（mixin-technology） . 因此，

```
class Derived1 : public Middle
{
public:
    virtual int g() const;
}; 
```

没有钻石，但作者`Middle`不知道会是这样，也不想禁止：

```
class M2 : public virtual Base
{
public:
    virtual int g() const;
};

class Derived2 : public Middle, public M2
{
}; 
```

并且给定这样的层次结构，谁*应该*调用`Base`'s 的构造函数。唯一合理的候选人是`Derived2`。

# xml - 来自 web 服务的日期时间格式错误 im xml Soap 响应

> ID：10536093
> 
> 赞同：2
> 
> 时间：2012-05-10T14:23:38.647
> 
> 标签：xml, web-services, soap, response

XML 文档中的错误 (45,65)。---> System.FormatException：字符串未被识别为有效的 DateTime

当我调用使用 Visual Studio Web 引用自动生成的 Web 服务时，我的 C# Web 应用程序客户端上出现 XML DateTime 异常。由于 Web 引用代理正在格式化 XML 响应，因此错误发生在 Web 服务客户端端点。由于错误的类型，我想知道将某些 Text 格式转换为 DateTimes 格式是否存在 .NET 错误或不兼容。什么是跟踪此错误原因并查看 XML 响应的好方法 - 我在 Visual Studio 2010 中找不到检查来自 Web 服务的 XML 响应的方法。我很感激我能得到的帮助。

信息：

在 System.DateTimeParse.ParseExactMultiple(String s, String[] 格式, DateTimeFormatInfo dtfi, DateTimeStyles 样式) 在 System.DateTime.ParseExact(String s, String[] 格式, IFormatProvider 提供程序, DateTimeStyles 样式) 在 System.Xml.Serialization.XmlSerializationReader Microsoft.Xml.Serialization.GeneratedAssembly 处的 .ToDate(String value)

我正在使用 SoapUI 进行测试和工作以显示 xml 响应，但在 visualstudio 2010 中出现错误。使用 SoapUI 在 xml 中响应两个日期的示例 >>>

1985-04-18T00:00:00

27/02/2009 16:07:02

注意：我从客户端消费网络服务。只是消费..

谢谢

# java - eclipse中的ant junit构建错误

> ID：10536095
> 
> 赞同：21
> 
> 时间：2012-05-10T14:23:52.123
> 
> 标签：java, eclipse, ant, junit

我希望有些人已经看到并解决了我现在使用 ant 脚本遇到的问题。我正在使用 ant 脚本在 eclipse 中编译我的 java 代码，但 eclipse 不断给我这些错误

```
[junitreport] Processing E:\workspace\DataOrchestrationDevelopment\DataOrchestration\Logs\jsreports\junit\html\TESTS-TestSuites.xml to C:\Users\u0160235\AppData\Local\Temp\null1503375679
[junitreport] Loading stylesheet jar:file:/E:/software/apache/apache-ant-1.8.2/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
[junitreport] : Error! The first argument to the non-static Java function 'replace' is not a valid object reference.
[junitreport] : Error! Cannot convert data-type 'void' to 'reference'.
[junitreport] : Fatal Error! Could not compile stylesheet
[junitreport] Failed to process E:\workspace\DataOrchestrationDevelopment\DataOrchestration\Logs\jsreports\junit\html\TESTS-TestSuites.xml

BUILD FAILED
E:\workspace\DataOrchestrationDevelopment\DataOrchestration\ant\developerbuild.xml:124: The following error occurred while executing this line:
E:\workspace\DataOrchestrationDevelopment\DataOrchestration\ant\QunitAntScript.xml:20: Errors while applying transformations: Fatal error during transformation 
```

我的环境设置：

*   Windows 7的
*   Eclipse 3.6 RC2 32 位
*   JDK 1.6 更新 32 32 位
*   蚂蚁 1.7.2
*   Junit 4（在 Eclipse 中）：在我的项目 jar 文件夹中，我有 junit-dep-4.8.2.jar

有一件事要提一下，如果我在 eclipse 之外使用相同的 ant 脚本编译我的代码，一切正常，但它在 eclipse 中不起作用。我试图用谷歌搜索上面样式表上方的错误，但这对我没有多大帮助。我的猜测是，在eclipse中使用了不同版本的junit，但我可能错了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T19:23:02.343

我在 Eclipse 中使用以下环境遇到了相同的样式表问题：

*   视窗 7 x64
*   Eclipse 3.7.2 (SR2) 32 位
*   JDK 1.6.0_32 32 位
*   Ant 1.7.2（来自 Eclipse）或 1.7.4（来自 Apache，当前）
*   Junit 4.8.1（项目依赖）

我的构建在使用 JDK 1.6.0_31 时成功，因此样式表问题似乎是 Java 6 build 32 发布时引入的 Ant 或 Java 错误。我在 Apache 的 Bugzilla 系统中找不到任何报告。如果它对某人有帮助，这些是构建 32 中包含的错误修复：[http ://www.oracle.com/technetwork/java/javase/2col/6u32bugfixes-1579554.html](http://www.oracle.com/technetwork/java/javase/2col/6u32bugfixes-1579554.html)

我目前的解决方法是使用 Java 6 JDK build 31。

**更新：使用较新 JDK 的解决方法**

*Eclipse中*的 Ant 故障始于 Java 6u32 和 Java7u4 中引入的缺陷。[Eclipse Bug #384757](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757)中报告了这个传奇，其中包括允许您使用更新的 JDK 的解决方法。

*   [从Eclipse Orbit 项目](http://download.eclipse.org/tools/orbit/downloads/)下载`org.apache.xalan`和`org.apache.xml.serializer`插件
*   将它们复制到 Java`java.ext.dirs`属性中列出的目录

我使用以下目录，因为它们是默认定义的并且独立于 JDK 版本：

*   在 Windows 上：`C:\Windows\Sun\Java\lib\ext`
*   在 Mac 上：`/Users/$USER/Library/Java/Extensions`

根本问题已报告给 Oracle，但[该错误不再存在于他们的错误数据库](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7167657)中。我并不乐观它会得到修复。

**更新：Apache 修复了 Ant 中的问题**

Apache 修复了根本问题；它可能在 Ant 1.9.0 版本中可用（[Apache Bug #54641](https://issues.apache.org/bugzilla/show_bug.cgi?id=54641)）。

**更新：Ant 1.9.1 计划用于 Eclipse 4.4**

正如@OliBlogger 提到的，Apache 修复了 Ant 1.9.1 中的根本问题。Eclipse 计划[在 Eclipse 4.4 中更新到 Ant 1.9.1](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395421)（也许更快，Eclipse 错误系统还没有 4.3.x 里程碑）。

**更新：在 Eclipse 4.4 中修复**

我确认我的构建现在使用随 Eclipse 4.4.1 (Windows 7) 分发的 Java 7 JDK build 67 和 Ant 1.9.2 成功，而无需使用 Orbit 插件解决方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T14:51:49.070

请尝试`Preferences->Ant->Runtime`将 Ant Home... 设置为您的 ant 安装文件夹。默认情况下，eclipse 附带并使用作为插件贡献的 ant。

如果需要，您还可以在那里添加其他 jars、文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:10:45.997

在[https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757#c18](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757#c18)中指出，对此的修复是在 Ant 1.9 中，但不幸的是，它现在似乎是针对 1.9.1 的。所以与此同时，这对我有用。

您可以使用来自[http://svn.apache.org/viewvc?view=revision&revision=1453414](http://svn.apache.org/viewvc?view=revision&revision=1453414)的样式表。然后将**“stledir”**添加到报告标签中。例子：`styledir="c:\utils"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T20:09:42.233

我有一个类似的问题。我的项目有这个组合：

Java：jdk1.6.0_45 Ant：eclipse\plugins\org.apache.ant_1.8.2.v20120109-1030 Java 编译器：1.6

我将我的 java 更改为 JRE6，它工作得非常好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T14:53:28.303

我尝试过使用几种不同的 JRE/JDK 设置（均为 1.6 和 1.7），但每个都有问题。

这显然不是一个完美的解决方案，但如果 JUnit 报告在构建文件中是“原始”的——没有包含在目标中，我似乎不会遇到这些问题。

糟糕的解决方法显然是因为目标是 Ant 的一个重要方面，但有时用于报告构建目标/依赖关系并不是那么关键。这对我来说还不是什么大问题，因为我以一种一次性的方式运行这些报告，而不是作为构建的一部分。

希望它可以帮助某人，但也希望这能得到妥善解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-29T14:37:23.707

根据[此处](https://ant.apache.org/manual/Tasks/junitreport.html)和[此处](https://ant.apache.org/manual/install.html#librarydependencies)的文档，Ant 任务`<JUnitReport>`需要 Apache Xalan 2.4.1+ 或 Xalan XSLT。它们可以从外部库[xalan.jar](https://xml.apache.org/xalan-j/)获得。确保您有这些依赖项。

# mysql - 当将两个工作 sql 语句与 UNION ALL 结合时，mysql 变得无响应

> ID：10536098
> 
> 赞同：0
> 
> 时间：2012-05-10T14:24:07.003
> 
> 标签：mysql, sql

我在 MySQL 数据库中有两个表。一个表包含默认值，另一个表包含覆盖值和添加。我编写了两个单独的工作 SQL 语句来从两者中选择所有元素，然后当有覆盖时，替换默认表的值。

```
SELECT
    d.id AS did, IFNULL(i.id, d.id) AS id, d.parent_id AS parent_id,
    IFNULL(i.content, d.content) AS content, d.order_id AS ord
  FROM cci d 
    LEFT JOIN instructions i ON d.order_id = i.order_id
      AND i.parent_id = d.parent_id
      AND i.specification_id = 'SOME ID'
  WHERE d.parent_id = 'SOME PARENT' AND d.specification_id = '1'
UNION ALL SELECT
    i.id AS did, i.id AS id, i.parent_id AS parent_id,
    i.content AS content, i.order_id AS ord
  FROM instructions i
  WHERE i.parent_id = 'SOME PARENT' 
    AND i.specification_id = 'SOME ID' 
    AND NOT EXISTS (SELECT 1 FROM cci d WHERE d.order_id = i.order_id AND d.parent_id = i.parent_id) 
```

这两部分单独工作正常且符合预期，但是当我将它们放在一起时，MySQL 会飙升到 90% 的 CPU 并冻结。显然有些事情不太正常。什么会导致这种冻结，或者我的陈述有什么问题？

谢谢

编辑：

解释的输出是：

```
id  | select_type          | table      | type | possible_keys | key  | key_len | ref  | rows | Extra
————————————————————————————————————————————————————————————————————————————————————————————————————————
1   | PRIMARY              | d          | ALL  | NULL          | NULL | NULL    | NULL | 105  | Using where
1   | PRIMARY              | i          | ALL  | NULL          | NULL | NULL    | NULL | 4    |  
2   | UNION                | i          | ALL  | NULL          | NULL | NULL    | NULL | 4    | Using where
3   | DEPENDENT SUBQUERY   | d          | ALL  | NULL          | NULL | NULL    | NULL | 105  | Using where
NULL| UNION RESULT         | <union1,2> | ALL  | NULL          | NULL | NULL    | NULL | NULL | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:15:41.973

问题在于优化器，它正在切换到非最佳连接策略。

问题可能是与 UNION ALL 一起出现的“不在”。

我认为您可以重写查询。这是一个开始：

```
SELECT (case when d.specification_id = '1' then d.id else i.id) AS did,
       ...
FROM cci d LEFT JOIN
     instructions i
     ON d.order_id = i.order_id  AND
        i.parent_id = d.parent_id AND
        i.specification_id = 'SOME ID' left outer join
     cci parent
     on d.parent_id = parent.parent_id
WHERE d.parent_id = 'SOME PARENT' AND d.specification_id in ('1', 'SOME ID') 
```

或者，使用临时表也可以解决您的问题。

# php - php如何访问对象数组

> ID：10536101
> 
> 赞同：3
> 
> 时间：2012-05-10T14:24:14.827
> 
> 标签：php, arrayobject

如何从以下对象数组访问项目数组

```
Cart66Cart Object
(
[_items:Cart66Cart:private] => Array
    (
        [2] => Cart66CartItem Object
            (
                [_productId:Cart66CartItem:private] => 327
                [_quantity:Cart66CartItem:private] => 3
                [_optionInfo:Cart66CartItem:private] => 
                [_priceDifference:Cart66CartItem:private] => 0
                [_customFieldInfo:Cart66CartItem:private] => 
                [_productUrl:Cart66CartItem:private] => http://localhost/odesk/cart66/fran-wilson-aloe-lip-care/
                [_formEntryIds:Cart66CartItem:private] => Array
                    (
                    )

            )

        [3] => Cart66CartItem Object
            (
                [_productId:Cart66CartItem:private] => 368
                [_quantity:Cart66CartItem:private] => 2
                [_optionInfo:Cart66CartItem:private] => 
                [_priceDifference:Cart66CartItem:private] => 0
                [_customFieldInfo:Cart66CartItem:private] => 
                [_productUrl:Cart66CartItem:private] => http://localhost/odesk/cart66/beauty-strokes-basic-shadow-brush/
                [_formEntryIds:Cart66CartItem:private] => Array
                    (
                    )

            )

    )

[_promotion:Cart66Cart:private] => 
[_promoStatus:Cart66Cart:private] => 0
[_shippingMethodId:Cart66Cart:private] => 13
[_liveRates:Cart66Cart:private] => Cart66LiveRates Object
    (
        [toZip] => 
        [weight] => 
        [rates] => Array
            (
            )

        [_toCountryCode:protected] => 
    )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:35:58.077

如果您*必须*访问私有/受保护的类属性，您可以简单地使用[魔术`__get`方法](http://php.net/manual/en/language.oop5.magic.php)。在这种情况下，反射将太过分了。不过，在这种情况下使用魔术方法是否具有良好的设计意义取决于您的情况。

```
class MyClass
{
    private $_items;

    public function __get($prop)
    {
        if ($prop == '_items') {
            return $this->_items;
        }
        throw new OutOfBoundsException;
    }
} 
```

**更新**

重新阅读后，您似乎只是希望您的对象表现得像一个数组。为此，您需要实现[`ArrayAccess`](http://us.php.net/manual/en/class.arrayaccess.php)相关方法并将其指向私有`$_items`属性。

```
class MyClass implements ArrayAccess
{
    private $_items = array();

    public function __construct() {
        $this->_items = array(
            "one"   => 1,
            "two"   => 2,
            "three" => 3,
        );
    }
    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->_items[] = $value;
        } else {
            $this->_items[$offset] = $value;
        }
    }
    public function offsetExists($offset) {
        return isset($this->_items[$offset]);
    }
    public function offsetUnset($offset) {
        unset($this->_items[$offset]);
    }
    public function offsetGet($offset) {
        return isset($this->_items[$offset]) ? $this->_items[$offset] : null;
    }
} 
```

最后，PHP*带有*一个内置[`ArrayObject`](http://us.php.net/manual/en/class.arrayobject.php)类，它可以使对象的行为非常像数组。您始终可以使用它并将相关方法指向私有`$_items`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:27:23.323

可能是这样的：

```
$object->_items[index]->_productId 
```

但是如果 _items 是私有的，你将需要一个公共的 getter 或弄乱反射类。您可以将私有属性设置为可通过 ReflectionProperty 访问试试这个：

```
 $reflectionObject = new ReflectionObject($yourObject);
    $property = $reflectionObject->getProperty('_items');
    $property->setAccessible(true);
    $items = $property->getValue($yourObject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:26:08.500

尝试以下操作：

```
$object->$first_node->$second_node->$third_node; 
```

# sql - Zend 中的 Dojo 网格实现问题

> ID：10536105
> 
> 赞同：0
> 
> 时间：2012-05-10T14:24:22.030
> 
> 标签：sql, zend-framework, dojo

我有一个非常大的问题，无法在 zend 中实现 dojo 网格。

这是我的脚本

`[View]`

```
<?php $this->headLink()->appendStylesheet($this->baseUrl() . '/scirpts/dojo/dojox/grid/resources/claroGrid.css'); ?>
<?php $this->dojo()->enable(); 
    $this->dojo()->requireModule('dojox.data.QueryReadStore')
                     ->requireModule('dojox.grid.DataGrid');
?>
<div id="view-content">
<?php $this->tabContainer()->captureStart('tabcontainer', array(), array('style' => 'width:100%;height:400px;')) ?>

    <?php $this->contentPane()->captureStart('tab1', array(), array('title' => 'User Manager')); ?>

    <script type="text/javascript" >    
      var structure = [ 
            { field: 'id', name: 'UserID', width: '50px' },
            { field: 'username', name : 'User Name', width: '100px' },
            { field: 'email', name : 'E Mail', width: '200px'}
         ]; 
    </script>
    <span dojoType="dojox.data.QueryReadStore" jsId="users" url="/users/loaduser"></span>
    <div id="grid1" dojoType="dojox.grid.DataGrid" store="users" structure="structure"></div> 

    <?php echo $this->contentPane()->captureEnd('tab1'); ?>
<?php echo $this->tabContainer()->captureEnd('tabcontainer'); ?>
</div> 
```

`Controller`

```
 public function loaduserAction()
    {
        // Load current data.
        $this->_helper->layout->disableLayout();
        $this->_helper->viewRenderer->setNoRender();

        $user = new Application_Model_Users();
        $users = $user->getUsers();
        $dojoData = new Zend_Dojo_Data('id', $users, 'id');
        echo $dojoData->toJson();
    } 
```

`[Layout]`

```
<?php
 if($this->dojo()->isEnabled()) {

        $this->dojo()-> setDjConfigOption('usePlainJson',true)

                  -> addStylesheetModule("dijit.themes.tundra")
                  -> setLocalPath($this->baseUrl('/scripts/dojo/dojo/dojo.js'));

        echo $this->dojo();

    }

?>   

    <body id="page1" class="tundra"> 
```

`[Bootstrap]`

```
$view = new Zend_View();
    $view->doctype('XHTML1_STRICT');
    $view->navigation = array();
    $view->subnavigation = array();

    $view->addHelperPath('Zend/Dojo/View/Helper/', 'Zend_Dojo_View_Helper'); 
    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer(); 
    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer); 
```

它没有显示任何内容，我没有检查 javascript 错误，这是我在网上找到的很好的教程之一，但似乎没有任何效果。我真的很沮丧。我需要你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:32:42.393

如果显示 dojox.grid.DataGrid 中的列名，则需要检查检索到的 json。否则检查 dojox.grid.DataGrid 的 CSS。通常，您需要明确指定 dojox.grid.DataGrid 的宽度和高度，如下所示：

```
style="width: 800px; height: 500px" 
```

# c++ - C++ 奇怪的情况，例如将现有变量应用于新变量

> ID：10536113
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:24:32.543
> 
> 标签：c++, string, visual-c++, variables, pointers

好吧，今天；我遇到了一个奇怪的小情况，例如`char* cFileCopy = strDrive;`_

这应该只在这一点上`cFileCopy`保持 的值`strDrive`，它确实如此，但是当我使用`strcat(cFileCopy, cFileName);`

的值`strDrive`也更改为`cFileCopy`after的值`strcat()`

_

我不确定发生了什么，但如果有人能对这种情况有所了解，这里是代码。

```
DWORD dwDrives = GetLogicalDrives();
char strDrive[3];

for(int i = 0; i<26; i++)
{
    wsprintf(strDrive, "%c:\\", 'A'+i);
    if(GetDriveType(strDrive) == DRIVE_REMOVABLE)
    {
        char* cFileName = new char[11];
        cFileName = "test.txt";
        char* cFileCopy = strDrive;
        strcat(cFileCopy, cFileName);
        MessageBox(NULL, strDrive, "Strange", MB_OK); //MSG - This shows drive:\test.txt when it should show only drive:\/
        MessageBox(NULL, cFileCopy, "OK", MB_OK); //MSG - This should be showing drive:\test.txt, which it does.
    }
} 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:29:48.597

您需要重新审视指针是如何工作的——如果您将两个变量指向同一个内存（如此处），那么对一个指向的内存的修改也会改变另一个指向的值。

请注意，您还在`strDrive`该调用中轻松地溢出了 3 字节缓冲区`strcat`，这将导致隐藏的错误浮出水面。还有一个泄漏，`cFileName`它没有`delete[]`调用匹配`new[]`（使用智能指针或`std::string`简化它）。

如果你想要你期望的语义，你应该使用 C++ `std::string`，而不是原始指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:39:31.523

诸如 strDrive[3] 之类的数组变量实际上存储了指向第一个值 (strDrive[0]) 的指针。使用 [n] 偏移地址到数组的特定索引并取消引用它，在这种情况下为您获取第 n 个字符。

当你做 char* cFileCopy = strDrive; 您正在将存储在 strDrive 中的地址复制到变量 cFileCopy。这两个现在指向同一个内存，所以从逻辑上讲，当您更改 cFileCopy 指向的值时，您会更改 strDrive 指向的值。如果在调试时将鼠标悬停在这两个变量上，您可能会看到它们显示的值相同（十六进制地址）。正如史蒂夫所说，您需要更好地理解指针。

你可以用 strcpy 实现你想要的，但它永远不会很漂亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:49:34.637

`cFileCopy`只是一个没有自己内存空间的指针，它引用`strDrive`. 正确地，它应该使用 new 或 malloc 为其创建空间，然后使用 strcpy 函数复制字符串 strDrive 。所以使用

```
char* cFileCopy = new char[15];
strcpy(cFileCopy,strDrive);
strcat(cFileCopy, cFileName);
delete[] cFileCopy; 
```

在这种情况下 strDrive 不会被改变。不要忘记，要释放内存就结束了。

# c - 如何在 C 程序中设置 CURLOPT_HTTPHEADER 的值，以便在 HTTP Post 请求中不发送 HTTP Header？

> ID：10536114
> 
> 赞同：0
> 
> 时间：2012-05-10T14:24:39.437
> 
> 标签：c, http

我在 http 中发送一个 post 请求，但我不想发送 HTTP 标头，我知道通过`CURLOPT_HTTPHEADER`在 C 程序中设置一些值，我们可以避免发送 HTTP 标头。我想知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:35:38.550

要删除内部默认标头，请将标头设置为冒号右侧没有值。即，如果“ `Content-Type`”是默认标头并且您希望它不被发送，则您将“添加”标头“ `Content-Type:`”到您设置的标头中`CURLOPT_HTTPHEADER`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:28:03.713

你的问题非常令人困惑。您想发送一个 HTTP 请求而不发送任何 HTTP 标*头*？这是不可能的 - 标头是 HTTP 请求定义的一部分。

事实上，您可以发送一个没有内容但带有正确 HTTP 标头的空白 HTTP 请求，这将是一个有效的 HTTP 请求。但是您根本*无法*发送没有（根本）但有正文的 HTTP 请求，因为没有它们，它就不是 HTTP 请求。

也许您只需要发送一条 TCP 消息。

# qt - 是否可以在 QTableWidget 中只选择一项

> ID：10536115
> 
> 赞同：15
> 
> 时间：2012-05-10T14:24:45.037
> 
> 标签：qt, qt4

我想知道如何以及是否可以一次只选择一个单元格或项目，而不是允许多项选择。先感谢您。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T14:28:31.593

```
tableWidget->setSelectionBehavior( QAbstractItemView::SelectItems );
tableWidget->setSelectionMode( QAbstractItemView::SingleSelection ); 
```

# oop - Opengl - 显示列表与 OOP

> ID：10536117
> 
> 赞同：0
> 
> 时间：2012-05-10T14:24:53.060
> 
> 标签：oop, opengl

我正在阅读 Nehe OpenGL 教程，并且有一个关于显示列表的教程。是否有任何理由使用它而不是“类和对象”方式？例如创建立方体类，然后只需简单地编写 cube.render(x, y, z); ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:39:55.533

这个*想法*是利用带有板载显示列表处理的硬件。基本上，您将在图形处理器的内存中构建显示列表，然后您可以通过发送单个命令来显示整个列表，而不是每次要显示对象时重新发送所有坐标等。这可以大大降低 CPU 和 GPU 之间的带宽需求。

实际上，它在很大程度上取决于您使用的硬件和 OpenGL 实现。在某些实现中，显示列表可以为您带来重大的性能改进——但在其他实现中，它基本上没有任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:02:00.293

> 我正在阅读 Nehe OpenGL 教程，并且有一个关于显示列表的教程。

我建议停止阅读Nehe。我从来没有在 stackoverflow 上看到过任何与 Nehe 相关的好东西，而且我看到的教程使用了太多特定于平台的 API。

而不是 NEHE，转到 OpenGL.org 并检查“书籍”部分。[或者， glprogramming.com](http://glprogramming.com/red/)上提供了“OpenGL 红皮书”的第一版。虽然它没有涵盖 OpenGL 4 中最新的 API，但所有可用的方法仍然可以通过“兼容性配置文件”在最新版本的 OpenGL 中使用。

> 是否有任何理由使用它而不是“类和对象”方式？

你混淆了两个不同的概念。显示列表是 OpenGL 保存 OpenGL 调用序列的方式，因此您可以稍后快速“调用”它们。根据 OpenGL 的实现，它可能会提高应用程序的性能。显示列表的使用与程序的内部组织 (OOP) 无关。您可以使用 OOP 并且仍然使用 cube.render() 中的显示列表。或者你可以使用顶点缓冲对象或任何你想要的。或者您可以以“非 OOP”风格工作，但仍然使用显示列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:08:54.283

显示列表是在 GPU 级别预编译的。您自己的渲染函数是在 CPU 级别编译的，其各个命令在运行时仍需要通过 GPU。

这就像将“存储过程”与调用内联 SQL 的自定义函数进行比较。存储过程在服务器端编译并生成执行计划，而自定义函数仅在客户端程序集中编译。

# android - 单击按钮时如何在android中获取带有ListView值的复选框，EditText？

> ID：10536128
> 
> 赞同：1
> 
> 时间：2012-05-10T14:25:14.340
> 
> 标签：android, listview, checkbox, android-edittext

我是 Android 世界的新手。我有一个列表视图，其中包含复选框和 EditText。当我在列表视图中显示记录时，我将选中复选框并在 editText 字段中输入文本。我会在很多行中做同样的事情。我有一个名为“保存”的按钮。使用它我想用新添加的文本和复选框值保存列表视图的详细信息。单击保存按钮时，我不知道如何获取值。请指导我。这是代码。

主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView android:id="@+id/TextView01" android:layout_height="wrap_content"
    android:text="List of items" android:textStyle="normal|bold"
    android:gravity="center_vertical|center_horizontal"
    android:layout_width="fill_parent"></TextView>
<ListView android:id="@+id/ListView01" android:layout_height="wrap_content"
    android:layout_width="fill_parent">
</ListView>
<Button android:text="Save" android:id="@+id/btnSave"
    android:layout_width="wrap_content" android:layout_height="wrap_content">
</Button>
</LinearLayout> 
```

列表视图.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content" android:gravity="left|center"
android:layout_width="wrap_content" android:paddingBottom="5px"
android:paddingTop="5px" android:paddingLeft="5px">
<TextView android:id="@+id/TextView01" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:gravity="center"
    android:textColor="#FFFF00" android:text="hi"></TextView>
<TextView android:text="hello" android:id="@+id/TextView02"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_marginLeft="10px" android:textColor="#0099CC"></TextView>
<EditText android:id="@+id/txtbox" android:layout_width="120px"
    android:layout_height="wrap_content" android:textSize="12sp"
    android:layout_x="211px" android:layout_y="13px">
</EditText>
<CheckBox android:id="@+id/chkbox1" android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

CustomListViewActivity.java：

```
package com.listivew;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class CustomListViewActivity extends ListActivity {
ListView l1;
static Context mContext;
Button btnSave;
private static class EfficientAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {
        return country.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listview, parent,
                    false);
            holder = new ViewHolder();
            holder.text = (TextView) convertView
                    .findViewById(R.id.TextView01);
            holder.text2 = (TextView) convertView
                    .findViewById(R.id.TextView02);
            holder.txt = (EditText) convertView.findViewById(R.id.txtbox);
            holder.cbox = (CheckBox) convertView.findViewById(R.id.chkbox1);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text.setText(curr[position]);
        holder.text2.setText(country[position]);
        holder.txt.setText("");
        holder.cbox.setChecked(false);

        return convertView;
    }

    public class ViewHolder {
        TextView text;
        TextView text2;
        EditText txt;
        CheckBox cbox;
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    l1 = (ListView) findViewById(R.id.ListView01);
    l1.setAdapter(new EfficientAdapter(this));
    btnSave = (Button)findViewById(R.id.btnSave);
    mContext = this;

    btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // I want to print the text which is in the listview one by one. 
            //Later i will insert it in the database
            Toast.makeText(getBaseContext(), "EditText Value, checkbox value and other values", Toast.LENGTH_SHORT).show();

        }
    });
}

private static final String[] country = { "item1", "item2", "item3",
        "item4", "item5", "item6" };
private static final String[] curr = { "1", "2", "3", "4", "5", "6" };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:31:52.900

试试这个，

```
btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
         for (int i = 0; i <l1.getCount() ; i++) {
             View vListSortOrder;
                    vListSortOrder=l1.getChildAt(i);     
                    try{
                    EditText edit=(EditText)vListSortOrder.findViewById(R.id.share_comment_edit);
                   String temp=edit.getText().toString();

        }
      }
    }); 
```

同样为 CheckBox 创建一个对象并获取其状态。简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:31:22.930

我知道 edittext 使用以下内容：

```
holder.txt = ((EditText) convertView.findViewById(R.id.txtbox).getEditableText()).toString(); 
```

# c# - 通过泛型传递类类型而不是接口

> ID：10536132
> 
> 赞同：2
> 
> 时间：2012-05-10T14:25:42.013
> 
> 标签：c#, generics, dependency-injection, castle-windsor

好的，我刚刚在我们的应用程序中实现了一个 Command-CommandHandler 模式，它将命令对象添加到队列中；然后通过 Castle Windsor 使用依赖注入以及通用方法来获取命令对象的相关处理程序。

命令界面是空白的，如下所示：

```
public interface ICommand
{
} 
```

虽然 CommandHandler 接口像这样处理它：

```
public interface ICommandHandler<TCommand> where TCommand : ICommand
{
    void Handle(TCommand command);
} 
```

然后通过我希望通过队列发送的命令来实现这些；然后通过 DependencyRegistration 包装器在 Castle Windsor 中注册，如下所示：

```
_dependencyRegister
    .AddRegistration<ICommandHandler<TestCommand>, TestCommandHandler>(); 
```

因此，将添加到队列中的每个命令都使用处理程序映射 1 到 1；然后在温莎城堡注册；所以我们可以使用这样的通用方法来获取特定 Command 对象的相关 CommandHandler ：

```
private void HandleCommand<T>(T queueItem) where T: ICommand
{
    var handler = _dependencyResolver.Resolve<ICommandHandler<T>>();

    handler.Handle(queueItem);
} 
```

最后一部分是队列调度程序方法，如下所示：

```
private void DispatchQueueItem(ICommand queueItem)
{
    HandleCommand(queueItem);
} 
```

对; 问题是，当我将命令作为 ICommand 从队列中拉出并将其传递给 DispatchQueueItem 方法时；当它被发送到 HandleCommand 方法时，“T”类型总是设置为“ICommand”接口；而不是接口的实际实现（DependencyRegistration 示例代码中的TestCommand）。

我的问题是；如何设置 HandleCommand 方法来获取实现的类型；不是界面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:45:26.400

将您的调度方法更改为通用：

```
private void DispatchQueueItem<T>(T queueItem)
    where T: ICommand
{
    HandleCommand(queueItem);
} 
```

更新您可以强制 C# 在运行时以这种方式定义对象类型

```
private static void DispatchQueueItem(ICommand queueItem)
{
    HandleCommand((dynamic)queueItem);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:41:36.383

我认为您*希望*它成为接口-但您只需要在其中定义一个方法合同-例如：

```
public interface ICommand
{
    void Execute();
}

//Concrete implementation:
public TestCommand : ICommand
{
    public void Execute()
    {
        //Do something
    }
} 
```

然后，当您从 DI 中获取 ICommand - 您可以调用`queueItem.Execute()`- 这将引用您分配的任何具体实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:55:58.333

Yout 队列将始终调度 ICommands。所以需要得到“引擎盖下”的类型：

```
private void HandleCommand<T>(T queueItem) where T: ICommand
{
  var typeParam = queueItem.GetType();
  var type = typeof(ICommandHandler<>).MakeGenericType(typeParam);
  var handler = _dependencyResolver.Resolve(type); 
```

我不确定确切的语法。手头没有温莎城堡的项目。

# playframework - 播放框架 jpa 和 postgresql

> ID：10536133
> 
> 赞同：1
> 
> 时间：2012-05-10T14:25:45.413
> 
> 标签：playframework, playframework-2.0

我是 Play 新手。我使用 2.0 版本我尝试将我的 projet 连接到 postgresql 数据库并使用 jpa 来检索数据。我可以连接到数据库，但我无法使用 jpa 发起请求。

当我在方法验证中尝试我的用户模型时

```
Query query = JPA.em().createQuery("myQuery") 
```

我有这个消息'

```
[RuntimeExeption: No EntityManager bound to this thread. Try to annotate your action method with @play.db.jpa.Transactional] 
```

对不起，我的英语不好 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:35:31.463

您必须使用@Transactional（包play.db.jpa）注释调用User.auenticate() 的控制器的方法。

# html - 如何制作实时网络（音频+视频）流？

> ID：10536135
> 
> 赞同：0
> 
> 时间：2012-05-10T14:25:47.617
> 
> 标签：html, http, streaming, video-streaming, live-streaming

我期待在一个网站上进行多个直播会话，例如多个“twitcams”。

Flash Media Server 是否适合我，或者我应该寻找什么？FMS 需要观众和广播员。它包括在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:29:12.777

我建议您尝试使用 websockets，特别是如果您想做多用户应用程序。有成千上万的教程。

可能是最好的解决方案：

[节点.js](http://htttp://www.nodejs.org)

这是一个类似的主题：

[堆栈-o](https://stackoverflow.com/questions/4241992/video-streaming-over-websockets-using-javascript)

# c# - 为什么会话对象会抛出空引用异常？

> ID：10536136
> 
> 赞同：6
> 
> 时间：2012-05-10T14:25:49.127
> 
> 标签：c#, asp.net, session

在我的一些 aspx 页面上，我正在检查这样的会话

```
if (bool.Parse(Session["YourAssessment"].ToString()) == false
    && bool.Parse(Session["MyAssessment"].ToString()) == true)
{
    Response.Redirect("~/myAssessment.aspx");
} 
```

如果我经常玩这些页面，它工作正常，但如果我至少在 5 分钟内对页面不做任何事情，运行页面会引发错误

```
Object reference not set to an instance of an object. 
```

以下是这个的堆栈

```
[NullReferenceException: Object reference not set to an instance of an object.]
   yourAssessment.Page_Load(Object sender, EventArgs e) in d:\Projects\NexLev\yourAssessment.aspx.cs:27
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

有人可以向我解释这种奇怪的行为吗？

正如我们所知，默认情况下会话持续时间为 20 分钟。

已编辑

看到我有一个页面默认aspx，它有一个按钮，可以在某些基础上修复重定向在默认页面上它检查像这样

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!HttpContext.Current.Request.IsAuthenticated)
    {
        Response.Redirect("~/login.aspx");
    }
    else
    {
        Session["YourAssessment"] = false;
        Session["MyAssessment"] = false;
    }
} 
```

在按钮点击它有

```
protected void imgClientFreeEval_Click(object sender,
    System.Web.UI.ImageClickEventArgs e)
{
    if (HttpContext.Current.Request.IsAuthenticated)
    {
        string sqlQuery = "SELECT count(*) FROM SurveyClient WHERE UserID='"
            + cWebUtil.GetCurrentUserID().ToString() + "'";
        SqlParameter[] arrParams = new SqlParameter[0];
        int countSurvey = int.Parse(
            Data.GetSQLScalerVarQueryResults(sqlQuery).ToString());
        if (countSurvey > 0)
        {
            Session["YourAssessment"] = true;
            Session["MyAssessment"] = false;
        }
        Response.Redirect((countSurvey > 0)
            ? "~/yourAssessment.aspx"
            : "~/myAssessment.aspx");
    }
    else
    {
        Response.Redirect("~/login.aspx");
    } 
```

在 myAssessment 页面上检查如下

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!HttpContext.Current.Request.IsAuthenticated)
    {
        Response.Redirect("~/login.aspx");
    }
    else
    {
        if (Session["YourAssessment"] != null
            && Session["MyAssessment"] != null
            && bool.Parse(Session["YourAssessment"].ToString())
            && !bool.Parse(Session["myAssessment"].ToString()))
        {
            Response.Redirect("~/yourAssessment.aspx");
        }
    }
} 
```

并在 yourAssessmtn 上像这样检查

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!HttpContext.Current.Request.IsAuthenticated)
    {
        Response.Redirect("~/login.aspx");
    }
    else
    {
        if (Session["YourAssessment"] != null
            && Session["MyAssessment"] != null
            && !bool.Parse(Session["YourAssessment"].ToString())
            && bool.Parse(Session["MyAssessment"].ToString()))
        {
            Response.Redirect("~/myAssessment.aspx");
        }

        PopulateAllSurveyByUser();
        if (ViewState["surveyClientID"] != null)
        {
            grdSurveyDetail.Visible = true;
            PopulateSurveyDetails(
                int.Parse(ViewState["surveyClientID"].ToString()));
        }
        else
        {
            grdSurveyDetail.Visible = false;
        }
    }
} 
```

有什么问题请解释一下？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T14:28:55.773

您首先需要检查该会话变量是否存在

```
if(Session["YourAssessment"] != null)
    // Do something with it
else
    // trying to call Session["YourAssessment"].ToString() here will FAIL. 
```

发生这种情况是因为您的会话具有生命周期，这意味着 - 它过期（定义它的 cookie 过期） - 因此您的对象消失了。您可以增加 `sessionState timeout`web.config 以使您的会话持续更长时间。

例如，在 web.config

```
 <system.web>
      <sessionState timeout="40" />
  </system.web> 
```

只要客户端不清除它，并且 Web 服务器已启动并运行，将使您的会话持续 40 分钟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:40:44.877

访问 Session 对象时始终检查 null ！
您可以编写一些可用于此的小实用程序：

```
public class SessionData
{
    public static T Get<T>(string key)
    {
        object value = HttpContext.Current.Session[key];

        if(value == null)
            return default(T);

        try
        {
            return (T)value;
        }
        catch(Exception e)
        {
            return default(T);
        }
    }

    public static void Put(string key, object value)
    {
        HttpContext.Current.Session[key] = value;
    }
} 
```

如果应用程序池被回收，会话可以为空。发生这种情况的原因有很多……

防止服务器丢失会话的一个技巧是从 javascript 对服务器进行“ping”。它可以每分钟左右向一些虚拟 url（空页面，或者如果你是性能狂，向 .ashx 处理程序）发出请求。它对于您长时间保持打开状态的页面很有用，例如巨大的编辑表单。
另外，请注意，调试和发布配置有不同的会话超时值！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:27:32.327

首先你可以像这样使用你的代码

```
if (!bool.Parse(Session["YourAssessment"].ToString()) && 
     bool.Parse(Session["MyAssessment"].ToString()))
    Response.Redirect("~/myAssessment.aspx"); 
```

你确定你的会话不是`null`

像这样检查

```
if (Session["YourAssessment"] != null && Session["MyAssessment"] != null && 
    !bool.Parse(Session["YourAssessment"].ToString()) && 
     bool.Parse(Session["MyAssessment"].ToString()))
        Response.Redirect("~/myAssessment.aspx"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:30:16.147

如果`Session`不为空，请重新检查它是否有 key`"YourAssessment"`和`"MyAssessment"`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T14:45:24.970

当您的 Session 过期时，您放置在会话中的对象（例如 Session["YourAssessment"] 变为 null 并且对这些对象的 .toString() 方法调用将引发对象引用错误）。要解决此问题，您必须先检查以确保会话变量为空，然后再尝试执行 toString()。

```
 if(Session["YourAssessment"] != null){
if (bool.Parse(Session["YourAssessment"].ToString()) == false &&    bool.Parse(Session["MyAssessment"].ToString()) == true)
        {
            Response.Redirect("~/myAssessment.aspx");
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T14:54:14.427

而不是 .ToString 和 Boolean.Parse 做`Convert.ToBoolean(Session["YourAssessment"])`

当我尝试`Boolean b = Convert.ToBoolean(null)`b = false ;)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T11:03:21.760

好吧，在所有关于此的文章之后，问题似乎是 IIS 应用程序重新启动，并且如果您的会话存储在进程中，这可能会导致会话变量的删除。因此，尝试记录应用程序结束事件并查看是否是这种情况，将其放入 Global.asax.cs application_end 事件中，此代码将记录应用程序重新启动及其发生原因：

```
protected void Application_End(object sender, EventArgs e)
{
  HttpRuntime runtime = (HttpRuntime)typeof(System.Web.HttpRuntime).InvokeMember("_theRuntime", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);

  string shutDownMessage = "";

  if (runtime != null)
  {
    shutDownMessage = Environment.NewLine + "Shutdown: " +
                      (string)runtime.GetType().InvokeMember("_shutDownMessage", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField, null, runtime, null) + 
                      Environment.NewLine + "Stack: " + Environment.NewLine +
                      (string)runtime.GetType().InvokeMember("_shutDownStack", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField, null, runtime, null);
  }

  string logFile =  HttpContext.Current.Server.MapPath(~/AppEndLog.log");
  string logMsg = "";
  if (File.Exists(logFile))
    logMsg = logMsg + File.ReadAllText(logFile) + Environment.NewLine + Environment.NewLine;
  logMsg = logMsg + Environment.NewLine + "ApplicationEnd - " + DateTime.Now.ToString() + shutDownMessage;
  File.WriteAllText(logFile, logMsg);

} 
```

# python - django：如何从视图中保存多对多字段

> ID：10536139
> 
> 赞同：0
> 
> 时间：2012-05-10T14:25:58.783
> 
> 标签：python, django

我有一个采用以下`save`方法 的模型

```
def save(self, *args, **kwargs):
    self.url = slugify(self.name)

    # Saving creative if object is saved first time
    if self.reloadImages is True:
        print "Reload IMages"
        for img in self.creative_url.split("\n"):
            content = urllib2.urlopen(img).read()
            extra_image = ExtraImage()
            extra_image.img.save("%s.jpg" %(self.name), ContentFile(content), save=False)
            extra_image.save()
            self.extra_imgs.add(extra_image)
            #print self.extra_imgs.all()
    #self.reloadImages = False
    super(Item, self).save(*args, **kwargs) 
```

我希望它创建一个`ExtraImage`对象（由 组成`ImageField`）。`extra_img`并将其添加到当前模型的 ManyToMany字段中......

奇怪的是，该方法似乎正确地完成了它的工作，页面刷新后我在`extra_imgs`字段中看不到任何东西。（并且`ExtraImage`项目实际上是创建的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:36:07.347

问题是您添加图像

```
self.extra_imgs.add(extra_image) 
```

before`self`在您的数据库中创建

```
super(Item, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:23:40.240

为了补充 San4ez 的答案，当我第一次开始学习 Django 时，这个问题（事实上，您必须在保存对象之前保存它的依赖项，并且依赖项并不总是按照您期望的方式进行）让我感到沮丧。

如果您有大型对象图（甚至是小型对象图 :)）并且您不想手动处理此问题，请查看具有 GraphSaver 类的[Django ORM 工具，该类将自动检测依赖关系并以正确的顺序保存图。](http://djangosnippets.org/snippets/2305/)

# java - Jackson - 当某些属性满足特定标准时，注释要从序列化中排除的类

> ID：10536142
> 
> 赞同：0
> 
> 时间：2012-05-10T14:26:04.137
> 
> 标签：java, json, jackson

我有以下用例，假设我有一个带有 WHEEL 对象列表的对象 CAR

```
class Car{
   List<Wheel> wheels;
   //getters and setters..
} 
```

现在让我们说 Wheel 类有一个属性`boolean isWinterTyre;`

我想知道是否有任何注释、自定义序列化内容或其他东西，以某种方式注释一个`Car`类或`Wheel`类本身以排除所有具有`isWinterTyre = true`包含在“ `wheels`”列表中的属性的轮子对象，同时将我的 Java ''实例序列化为`Car`JSON 表示.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:11:41.093

应该可以使用自定义序列化。[请参阅此处](http://www.techtraits.com/Programming/2011/11/20/using-custom-serializers-with-jackson/)的教程。

```
@JsonSerialize(using = CustomSerializer.class)
class Wheel {
   //getters and setters..
}

public class CustomSerializer extends JsonSerializer<Wheel> {

    @Override
    public void serialize(Wheel value, JsonGenerator generator, 
        SerializerProvider provider) throws IOException,
            JsonProcessingException {
                 if(value.getSomething() == something) {
                     //Output Wheel using the generator
                 } else {
                     //skip it
                 }
            }
} 
```

# xslt-2.0 - 我应该如何测试字符串中的 & 符号？

> ID：10536143
> 
> 赞同：1
> 
> 时间：2012-05-10T14:26:06.460
> 
> 标签：xslt-2.0, saxon

我根据字段的特定值设置了一个变量。在 a`<xsl:choose>`中，以下代码完美运行：

```
<xsl:when test="property_type='hotel'">47</xsl:when> 
```

但是，我现在需要检查诸如“b&b”之类的字符串：

```
<xsl:when test="property_type='b&b'">48</xsl:when> 
```

这失败了，给出：

> transform.xslt 的第 42 行第 72 列出错：SXXP0003：XML 解析器报告的错误：对实体“b”的引用必须以“;”结尾 分隔符。

我理解这个错误，但我不知道如何解决它。& 符号存在于数据 xml 中并且是有效的（它在 CDATA 中）。错误在我的 xslt 中无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:27:47.240

您需要使用 xml 实体转义 & 符号`&amp;`。您的代码应如下所示：

```
<xsl: when test="property_type='b&amp;b'">48</xsl:when> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:50:55.980

```
<xsl:when test="property_type='b&amp;b'">48</xsl:when> 
```

[格雷格回答](https://stackoverflow.com/questions/10536143/how-should-i-test-for-an-ampersand-in-a-string#comment13630094_10536143)

# java - 定时器：周期小于一毫秒

> ID：10536145
> 
> 赞同：7
> 
> 时间：2012-05-10T14:26:16.633
> 
> 标签：java, timer

正如标题，有没有办法让定时器在毫秒的阈值下工作？

我的问题与以下问题类似，但它适用于 Java： [Thread.Sleep for less than 1 ms](https://stackoverflow.com/questions/6254703/thread-sleep-for-less-than-1-millisecond)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T14:30:40.000

如果你想睡觉，`Thread.sleep`有 2 种方法，[其中一种接受 nanoseconds](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long,%20int%29)。如果你想安排一个任务，你可以使用[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)哪些`schedule`方法也可以使用纳秒。

正如@MarkoTopolnik 所解释的，结果很可能不会精确到纳秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T14:33:11.980

```
Thread.sleep(long millis, int nanos) 
```

另请查看[此答案](https://stackoverflow.com/questions/824110/accurate-sleep-for-java-on-windows)，详细了解 Windows 上的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:32:11.917

您可以等待没有人会通知的对象...

```
synchronized (someObjectNobodyWillNotify) {
    try {
        someObjectNobodyWillNotify.wait(0, nanosToSleep);
    }
    catch (InterruptedException e) {
        Thread.interrupt();
    }
} 
```

（在这种情况下，我猜虚假唤醒是可以的。如果不是，您需要`System.nanoTime()`在开始时记录您的并将其包装`wait`在一个循环中，以检查是否已经过了足够的时间。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:32:26.363

java.util.concurrent 包使用[TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html#NANOSECONDS)进行计时。TimeUnit 有一个 NANOSECONDS 字段。

# sql - SQL：如何将组合行分成单独的行

> ID：10536146
> 
> 赞同：2
> 
> 时间：2012-05-10T14:26:19.130
> 
> 标签：sql, sql-server, oracle, stored-procedures, tokenize

我有一个这样的数据库表：

```
id   |   check_number        |   amount
1    |   1001]1002]1003      |   200]300]100
2    |   2001]2002           |   500]1000
3    |   3002]3004]3005]3007 |   100]300]600]200 
```

我想将记录分成如下内容：

```
id   |   check_number    |   amount
1    |   1001            |   200
2    |   1002            |   300
3    |   1003            |   100
.    |     .             |    .
.    |     .             |    .
.    |     .             |    . 
```

如何仅在 Oracle 和 SQL Server 中使用 SQL 来执行此操作？

谢谢，

米洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:59:25.603

仅在 Oracle 中，使用 CONNECT BY LEVEL 方法（参见[此处](http://www.sqlsnippets.com/en/topic-12525.html)），但有几个注意事项：

```
select rownum, id,
       substr(']'||check_number||']'
              ,instr(']'||check_number||']',']',1,level)+1
              ,instr(']'||check_number||']',']',1,level+1) 
               - instr(']'||check_number||']',']',1,level) - 1) C1VALUE,
       substr(']'||amount||']'
              ,instr(']'||amount||']',']',1,level)+1
              ,instr(']'||amount||']',']',1,level+1) 
               - instr(']'||amount||']',']',1,level) - 1) C2VALUE
    from table
connect by id = prior id and prior dbms_random.value is not null  
      and level <= length(check_number) - length(replace(check_number,']')) + 1

ROWNUM ID  C1VALUE C2VALUE

1      1   1001    200
2      1   1002    300
3      1   1003    100
4      2   2001    500
5      2   2002    1000
6      3   3002    100
7      3   3004    300
8      3   3005    600
9      3   3007    200 
```

本质上，我们使用 oracle 的分层函数爆破查询，然后只获取 check_number 和 amount 列中每个“列”数据中的数据的子字符串。

主要警告：要转换的数据在两列中*必须*具有相同数量的“数据元素”，因为我们使用第一列来“计算”要转换的项目数。

我已经在 11gR2 上对此进行了测试。YMMV 也取决于 DMBS 版本。请注意需要使用“PRIOR”运算符，它可以防止 oracle 进入无限循环连接。

# php - PHP - 按价格、日期 ASC、DESC 等对数据行数组进行排序

> ID：10536147
> 
> 赞同：0
> 
> 时间：2012-05-10T14:26:21.763
> 
> 标签：php, multidimensional-array, sorting

我有一个包含关联数组行的数据数组，我想按价格、日期等对它们进行排序。这不能通过 SQL 完成，因为这些值不在数据库中 - 我只是有一个带有以下示例数据的大数组：

```
$data[0] = array(
                 'id' => '2',
                 'price' => '400.00',
                 'date' => '2012-05-21',
                 ),
$data[1] = array(
                 'id' => '4',
                 'price' => '660.00',
                 'date' => '2012-02-21',
                 ),
$data[2] = array(
                 'id' => '8',
                 'price' => '690.00',
                 'date' => '2012-01-21',
                 ) 
```

ETC..................

如何根据选择框对这个变量进行排序，例如按价格 ASC/DESC 和日期 ASC/DESC 排序

对不起，如果这很简单——我只是习惯于通过 SQL 来做这件事，在这种情况下我的大脑一片空白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:36:15.150

我想你可以修改这个函数： http: [//php.net/manual/en/function.sort.php#104464](http://php.net/manual/en/function.sort.php#104464)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:30:05.443

您应该使用`usort`并定义一个根据您想要的键进行排序的函数。

查看[http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)示例 2 和 4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:51:16.760

下面的示例代码将按 id 对其进行排序。

```
 $capitals = array(
     array(
             'id' => '2',
             'price' => '400.00',
             'date' => '2012-05-21',
             ),
     array(
             'id' => '1',
             'price' => '660.00',
             'date' => '2012-02-21',
             ),
     array(
             'id' => '0',
             'price' => '690.00',
             'date' => '2012-01-21',
             )

       );

  function cmp($a, $b)
  {
     return strcmp($a["id"], $b["id"]);
   }

 usort($capitals, "cmp");

 print_r($capitals); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T14:41:36.407

使用`usort`：

```
function sortBySubKey(&$array, $key)
{
    return usort($array, create_function('$a,$b', 'if ($a["'.$key.'"] == $b["'.$key.'"]) return 0; return ($a["'.$key.'"] < $b["'.$key.'"]) ? -1 : 1;'));
} 
```

您应该确保您的数组在这种算术比较 ( `<`) 的意义上保持有效值，例如。您可能应该将日期作为unix时间戳传递，将价格作为浮点数等等......

# actionscript-3 - AS3：在字符后删除并添加到变量

> ID：10536151
> 
> 赞同：1
> 
> 时间：2012-05-10T14:26:31.297
> 
> 标签：actionscript-3

我正在从一个 php 脚本中提取数据，该脚本为我提供了 facebook 上一个人的姓名以及这种格式的 ID：

> 人名：123456789

我想知道“：”之后是否有要拆分的地方，并将数字（ID）添加到数组中，并将人名添加到另一个数组中。

感谢您的帮助，以利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:39:34.083

像这样的东西：

```
var personArray:Array = [];
var idArray:Array = [];
var stringToSplit:String = "Person Name:123456789";
var splitArray:Array = stringToSplit.split(":");

personArray.push(splitArray[0]);
idArray.push(splitArray[1]);

trace(personArray); // outputs "Person Name"
trace(idArray); // outputs "123456789" 
```

# javascript - 如何在这个特定的上下文中调用我的 javascript 函数

> ID：10536153
> 
> 赞同：-2
> 
> 时间：2012-05-10T14:26:40.483
> 
> 标签：javascript, razor

谁能告诉我如何在以下上下文中调用函数 GetDuration：

```
@{
...
...
<div>  GetDuration(@item.StartDate, @item.EndDate) </div>
...
...
} 
```

该函数`GetDuration()`在我的上下文中提到的父 DIV 内动态创建另一个 DIV。

我有两个问题：

*   我不知道如何`GetDuration()`从代码中显示的位置调用我的函数
*   `startdatum.Month.ToString("MMMM");`返回`"MMMM"`而不是月份的名称

提前致谢！

这是我的代码：

```
<script type="text/javascript">

function GetDuration(startdatum, einddatum) {
    var maand1 = startdatum.Month.ToString("MMMM");
    var maand2 = einddatum.Month.ToString("MMMM");
    var duration = "Date: ";
    if (maand1 == maand2) {
        duration += item.Startdate.Day.ToString()
            + " - " + item.Enddate.Day.ToString()
            + " " + maand1
            + " " + item.Startdate.Year.ToString();
    }
    else {
        duration += item.Startdate.Day.ToString()
            + item.Startdate.Month.ToString("MMMM")
            + " - " + item.Enddate.Day.ToString()
            + " " + item.Enddate.Month.ToString("MMMM")
            + " " + item.Startdate.Year.ToString();
    }
    var dynDiv = document.createElement("div");
    dynDiv.class = "HP_DateDiv";
    dynDiv.innerHTML = duration;
    document.body.appendChild(dynDiv);
}

</script>

    @{  string prevYear = "";

    foreach (var item in ViewData.Model) {

        string year = item.StartDate.Year.ToString();
        if (year != prevYear)
        {
            <div class="contentheader"> 
                @year Formula 1 Tickets
            </div>

            prevYear = year;  
        }
        <div class="HP_eventBodyDiv">
            <div class="HP_picDiv" style = "width:100px; height:100px;">
                <a href="http://www.cssdrive.com/" class="highlightit"><img  src="../../Content/Pics/auto.jpg" alt="oto" height="50" width="50"/></a>
            </div>
            <div class="HP_eventDiv">
                <div class="HP_eventNameDiv">@item.Name
            </div>
<!--This is the spot to call my function with something like "GetDuration(@item.StartDate, @item.EndDate)"-->
                <div class="HP_viewBuyBtnsDiv">
                    <input id="btn_View" type="button" value="View Event" class="contentbtn"/>
                    <input id="btn_Buy" type="button" value="Buy Tickets" class="contentbtn"/>
                </div>
            </div>
        </div>            

        };
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:39:55.797

我要看看能不能给你解释一下。Razor Syntax 允许我们做一些很棒的事情，比如你在你的视图上做的事情。在视图上迭代集合的能力非常棒，并且可以为创建动态页面提供一些很好的灵活性。他们的服务器实际上是使用您提供的语法创建 Razor 视图，然后将构建 HTML 页面发送到客户端。这包括脚本标签。因此，您尝试做的事情实际上行不通。您不能像那样在 @foreach 中迭代调用 JavaScript 函数，因为该页面尚未呈现。只有在 Razor 视图完全形成后，您才应该考虑使用 Javascript。然后你可以使用 JavaScript 来编辑 DOM。

所以我的建议就是编辑所说的。让服务器计算该属性并将其与模型一起发送。

编辑：

在查看更新的代码后稍等，我认为您的做法是错误的。我不明白你为什么使用 javascript 来计算你的持续时间。您应该编辑您正在传递的模型以包含持续时间，特别是如果它是这样的计算字段。那么您可以像显示任何其他属性一样显示 Duration 。

编辑2：

```
public class MyNewClass
{
public DateTime StartDate {get;set;}
public DateTime EndDate {get;set;}
public int Duration
{
get{
//Do your Logic Here with startdate and enddate
}
set;
}
} 
```

# qt - 将 QStringList 公开为 QtScript 数组

> ID：10536154
> 
> 赞同：0
> 
> 时间：2012-05-10T14:26:41.437
> 
> 标签：qt, qtscript

我有一些需要对一些 C++ 数据进行操作的 QtScript。我已经通过 公开了许多变量`QScriptEngine::globalObject().setProperty()`，但这似乎只适用于简单数据类型和 QStrings。

我试过使用`QScriptEngine::newVariant()`，但没有一个`QVariant`成员函数暴露给脚本引擎。

理想情况下，我希望能够将 QStringList 转换为普通的 QtScript 数组并在其上调用本机数组函数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:55:31.143

我想你在追求[`qScriptValueFromSequence`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#qScriptValueFromSequence)。

# html - 居中对齐 H1 标签与图像的左侧和右侧

> ID：10536158
> 
> 赞同：2
> 
> 时间：2012-05-10T14:26:49.720
> 
> 标签：html, css, image

我正在尝试找到一种方法将包含图像的块居中对齐到`H1`标签的左侧和右侧。图像需要包装`h1`标签。`H1`标签需要能够随着标题的大小而增长：

```
<div class=titlewrap">
    <img src="/images/hl.png" class="dl">
        <h1 class="title">Gallery</h1>
    <img src="/images/hr.png" class="dr">    
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:40:37.700

如果这是 UI 的一部分（不是内容） - 填充 H1 的左侧并使用 CSS 背景图像，然后对包装器执行相同操作（但填充右端）。用于`background-position`将图像左对齐或右对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:48:33.487

尝试：

```
<style>
.titlewrap .dl, .titlewrap .dr{
    vertical-align:middle;
}
.titlewrap .title{
    display:inline-block;
    *display:inline;
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-25T02:37:16.573

对我有用的是：

HTML 标记：

```
<h1>
    <img src="img1.png" alt="back">
    This is the H1 text
    <img src="img2.png alt="logo">
</h1> 
```

CSS 标记：

```
h1 {
    position: relative;
}

img[alt="back"] {
    position: absolute;
    left: 20px /* Distance from the left side of the 
                  page where you want the image*/
}

img[alt="logo"] {
    position: absolute;
    right: 20px /* Distance from the right side of the
                   page where you want the image*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:42:24.420

尝试：

```
.titlewrap { float: left; left: 50%; position: relative}
.titlewrap > * {float:left; left: -50%}​ 
```

# winforms - 清除 UltraOptionSet 中的选定值

> ID：10536162
> 
> 赞同：0
> 
> 时间：2012-05-10T14:27:12.153
> 
> 标签：winforms, infragistics

我有一个未绑定的 UltraOptionSet 控件。选择值后，如何清除所选值？我希望取消选择 UltraOptionSet 控件中所有选项的净效果。

我尝试将 Value 属性设置为 null 和 DBNull.Value 但都没有清除选定的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:10:39.190

刚设置

```
optionSet.CheckedIndex = -1; 
```

这将清除当前选中的项目，并且不会设置任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:27:57.197

将值设置为 Null 而不是 DBNull.Value 它将清除选择。您还可以将值设置为空字符串。

还有其他一些方法，我相信这是清除未绑定 UltraOptionSet 值的所有可能方法：

```
this.ultraOptionSet1.Value = null;
this.ultraOptionSet1.Value = "";
this.ultraOptionSet1.CheckedIndex = -1;
this.ultraOptionSet1.CheckedItem = null;
this.ultraOptionSet1.ResetCheckedIndex(); 
```

# android - 即使 api >= 9 也不总是支持均衡器？

> ID：10536170
> 
> 赞同：13
> 
> 时间：2012-05-10T14:27:40.437
> 
> 标签：android, operation, equalizer, audioeffect

在启用均衡器功能之前，我检查 api 级别以确保它等于或大于 9。从我从用户那里获得的报告中，似乎无论如何都会抛出一些异常：

代码 `eq = new Equalizer(0, mp.getAudioSessionId())`可以提出：

```
Caused by: java.lang.UnsupportedOperationException: Effect library not loaded
at android.media.audiofx.AudioEffect.<init>(AudioEffect.java:355)
at android.media.audiofx.Equalizer.<init>(Equalizer.java:149) 
```

并且代码`eq.getBandLevelRange()`可以引发：

```
Caused by: java.lang.UnsupportedOperationException: AudioEffect: invalid parameter operation
at android.media.audiofx.AudioEffect.checkStatus(AudioEffect.java:1182)
at android.media.audiofx.Equalizer.getBandLevelRange(Equalizer.java:206) 
```

我不知道是否有解决方案，如果没有，我可以捕获这些异常并禁用均衡器，但我需要知道究竟是什么原因造成的，这样我就可以通知我的用户而不会让他们感到沮丧。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T17:23:12.177

我遇到了同样的问题，这是由于我完成后没有在我的均衡器上调用 release() 引起的。显然，如果已经存在太多的 AudioEffect，本机库将不允许实例化新的 AudioEffect。

# javascript - 如何使用字符串引用闭包，就像不使用 eval 使用成员函数一样？

> ID：10536171
> 
> 赞同：4
> 
> 时间：2012-05-10T14:27:47.317
> 
> 标签：javascript

我们有一些 js 代码拆分在许多文件中。我们有一个核心文件，它定义了许多其他 js 文件使用的代码。

目前我们有这样的事情：

核心.js：

```
window.mycore = function() {

    var myfunction1 = function() {
    };
    var myfunction2 = function() {
    };
    var myfunction3 = function() {
        //..
        var a =  myfunction1(b);
        //..        
    };
    //...
    // many "myfunction"
    //...
    var myfunctionN = function() {
    };
    var publish = function() {
        for(var i = 0; i < arguments.length; i++) {
            try {
                window.mycore[arguments[i]] = eval('(' + arguments[i] + ')');
            }
            catch(e) {
                Log.err(600, arguments[i], e);
            }
        }
    };
    publish("myfunction1", "myfunction7", "myfunction8",/*...*/"myfunctionM")
} 
```

应用程序.js：

```
// ...
// ...
var result = window.core.myfunction1("myparam");
// ...
// ... 
```

请注意，没有核心方法被声明为 window.core 对象的成员。相反，它们通过发布功能附加到核心对象。

这有一些优点：

*   核心代码可以引用任何核心函数，无需编写“window.core”。
*   我们避免在每个公共函数声明中写“var myfunction = window.mycore.myfunction = function() ...”
*   可以看到暴露的方法是集中的。

但是，在发布函数中使用 eval 给我们在使用代码分析工具时带来了问题，因为它们往往不理解 eval 声明。

所以，这是我的问题。哪个是改进此代码的更好方法，因此我们可以保留提到的优点但消除 eval 声明。我知道将一些名称/值对发送到发布函数的解决方案，例如 publish({'myfunction1': myfunction1}, ... )，但我也想避免函数名称重复。考虑到我不是在寻找根本性的变化，因为已经编写了很多代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:43:34.340

我不确定我是否完全理解您使用“发布”方法的原因，但是您是否有任何理由不只是从构造函数返回具有正确函数的对象？

IE：

```
window.mycore = (function() {
   var myFunc1 = function(a) {
      alert(a);
   };

   var myFunc2 = function(b) {
      // call to other function in the same scope
      myFunc1(b);
   }

   ...

   // at the end just expose the public members you want
   return {
      myFunc1: myFunc1,
      myFunc2: myFunc2
   };
})(); 
```

或者

```
window.mycore = (function() {
   return {
      myFunc1: function(a) {
         alert(a);
      },
      myFunc2: function(b) {
         this.myFunc1(b);
      }
   };
})(); 
```

或者，以另一种方式结束同一个对象:) ...一如既往有不同的方法可以到达那里

```
(function(){

    var o = {};

    o.func1 = function(a) {
        alert(a);
    }

    o.func2 = function(b) {
        this.func1(b);
    }

    window.mycore = o;

})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:43:47.773

因此，从根本上讲，我认为将这些名称空间编写为对象会对您有所帮助。但这完全是一个完全不同的主题。（并且基于您不想进行大量重构的事实而取消资格）。

话虽如此，我的第一个想法是，您可能可以*通过*`.call()`使用or`.apply()`方法来回避对 eval 的需求。他们允许你做的是将函数调用从你的函数名中链接出来。但这不适用于您提供发布功能的“字符串”。

所以在谷歌搜索之后，这就是你从字符串执行函数的方式：

```
var fn = window[settings.functionName];
if(typeof fn === 'function') {
    fn(t.parentNode.id);
} 
```

[https://stackoverflow.com/a/912642/680578](https://stackoverflow.com/a/912642/680578)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:57:44.050

我个人更喜欢@Jaime 方法，但也许你可以做类似的事情

```
window.mycore = function() {

    function myfunction1() {
    };
    function myfunction2() {
    };
    function myfunction3() {
       //..
       var a =  myfunction1(b);
       //..        
    };
    //...
    // many "myfunction"
    //...
    function myfunctionN() {
    };
    var publish = function() {
       for(var i = 0; i < arguments.length; i++) {
          try {
             window.mycore[arguments[i].name] = arguments[i];
          }
          catch(e) {
             Log.err(600, arguments[i].name, e);
          }
       }
    };
    publish(myfunction1, myfunction7, myfunction8,/*...*/myfunctionM);
} 
```

# php - 在一个查询中从多个表中提取数据并将数据匹配在一起

> ID：10536174
> 
> 赞同：0
> 
> 时间：2012-05-10T14:27:56.243
> 
> 标签：php, sql

好的，我有两个需要查询的 sql 表，它们是`product`和`product_to_category`

`product`好像

![在此处输入图像描述](../Images/23f8f6fad2295e174ef97740b31ac508.png)

`product_to_category`好像

![在此处输入图像描述](../Images/9b5f53a14f0bf3e014cb04690537fe5e.png)

我正在尝试查询这两个表，以便我可以选择某个类别号中的所有表，该类别号位于 中`product_to_category`，但也选择所有状态为 1 的表，这决定了它们是否处于活动状态。我正在尝试在单个查询中执行此操作，到目前为止，我的查询如下所示，问题是我不确定如何将`product_id`' 匹配在一起以按我的意愿工作。有人可以告诉我如何做到这一点吗？

```
mysql_query("SELECT * FROM product,product_to_category WHERE product.status = 1 AND product_to_category.category_id = 35 ORDER BY product.sort_order ASC") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:31:41.230

你应该使用 JOIN

`SELECT * FROM product p INNER JOIN product_to_category pc ON p.productid = pc.productid WHERE p.status = 1 AND pc.category_id = 35 ORDER BY p.sort_order ASC`

由于您不熟悉连接，我建议阅读以下内容：

SQL 连接的直观解释：

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:34:45.540

尝试：

```
SELECT * FROM product
INNER JOIN product_to_category ON (product.product_id = product_to_category.product_id)
WHERE 
     product_to_category.category_id = 35
     AND
     product.status = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:31:22.607

试试这个：

`mysql_query("SELECT * FROM product JOIN product_to_category ON (product.product_id = product_to_category.product_id) WHERE product.status = 1 AND product_to_category.category_id = 35 ORDER BY product.sort_order ASC")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:38:37.420

尝试以下查询。更容易理解

```
SELECT * FROM 
    product a
    JOIN product_to_category b ON a.product_id = b.product_id
WHERE 
    a.stock_status_id = 1
    AND b.category_id = 35; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:32:46.133

```
mysql_query("SELECT * FROM product p LEFT JOIN product_to_category pc ON (p.id = pc.product_id) WHERE p.status = 1 AND pc.category_id = 35 ORDER BY p.sort_order ASC"); 
```

这应该可以解决问题。确保查看 JOINS 及其不同类型

# c++ - C / C ++如何将宏参数扩展为引号之间的文本

> ID：10536175
> 
> 赞同：3
> 
> 时间：2012-05-10T14:27:57.083
> 
> 标签：c++, c, macros

这是我所拥有的（message() 是来自第三方库的专用日志记录功能）：

```
#define LOG(fmt, ...) message("%s %s(): #fmt", __FILE__, __func__, __VA_ARGS__); 
```

所以我希望能够做这样的事情：

```
LOG("Hello world")
LOG("Count = %d", count) 
```

并将其扩展到：

```
message("%s %s(): Hello world", __FILE__, __func__);
message("%s %s(): Count = %d", __FILE__, __func__, count); 
```

但是#fmt 的东西不起作用。它不计算宏参数并打印为“#fmt”。有可能做我想做的事吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:29:06.350

不要`#fmt`加引号。只需使用[字符串文字连接](http://en.wikipedia.org/wiki/C_syntax#String_literal_concatenation)来连接两个文字。

```
#define LOG(fmt, ...) message("%s %s(): " fmt, __FILE__, __func__, __VA_ARGS__); 
```

# android - 从 Android 应用程序调用具有身份验证（登录名和密码）的 Web 服务

> ID：10536179
> 
> 赞同：0
> 
> 时间：2012-05-10T14:28:04.337
> 
> 标签：android

从过去几天开始，我一直在编写一个调用本地 Web 服务的 Android 代码。我正在使用 Android 的 ksoap2 库“ksoap2-android-assembly-2.5.7-jar-with-dependencies.jar”来调用我在 .NET 中创建的 SOAP Web 服务问题是，在请求特定功能之前，我需要进行身份验证使用基本 http 请求的客户端。

这是我的代码：

```
public String CallSoapConnexion(String login, String mdp) {
    SoapObject request = new SoapObject(nms, mth);
    PropertyInfo pi = new PropertyInfo();
    pi.setName("login");
    pi.setValue(login);
    pi.setType(String.class);
    request.addProperty(pi);
    pi = new PropertyInfo();
    pi.setName("mdp");
    pi.setValue(mdp);
    pi.setType(String.class);
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.dotNet = true;

    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(urlHttp);

    List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();

    headerList
            .add(new HeaderProperty("Authorization", "Basic "
                    + org.kobjects.base64.Base64.encode("login:pasword"
                            .getBytes())));

    Object response = null;
    try {

        httpTransport.call(act, envelope, headerList);
        response = envelope.getResponse();

    } catch (Exception ex) {

        return ex.toString;

    }
    return ex.toString;
} 
```

但我得到以下异常：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@2:7 in java.io.InputStreamReader@44f66cb0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:36:52.697

Ksoap2 给了我很多麻烦，我最终使用 SAXparser 制作了自己的解析器，这是解析 XML 的最快方法。我就是这样做的。

首先在一个类中，我保存了 WebServices 需要的所有常量参数。它们都是公共的和静态的，所以我可以在项目的任何地方访问它们，而无需实例化类。我们称之为 MyConstants.class

```
//######################## LOGIN WEB SERVICE CONSTANTS
/**
 * This string constructs the SOAP Envelope you need to use to Use the DoLogin WebService.
 * Use this string with String.format in the following way.
 * @param sUserName (String)
 * @param sPassword (String)
 * @Example String env = String.format(WebserviceConsumer.LOGIN_ENVELOPE, username, password);
 * */
public static final String LOGIN_ENVELOPE = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
  "<soap:Body>" +
    "<Login xmlns=\"webServiceNamespace\">" +
      "<sUsername>%s</sUsername>" +
      "<sPassword>%s</sPassword>" +
    "</Login>" +
  "</soap:Body>" +
"</soap:Envelope>";
public static final String LOGIN_SOAP_ACTION = "webServiceNamespace/Login";
public static final String LOGIN_URL = "https://ws.yoururl.com/YourLoginPage.asmx?op=Login";
public static final int LOGIN = 100; 
```

这是我“做”的解析器。它基于我找到的另一个解析器，所以我不知道它是否完美，但它工作得很好。

[编辑] 一段时间后我更改了解析器，因为 SAX 解析器不是一个好方法。它速度快但效率不高，因为它创建了大量对象，然后必须由垃圾收集器收集。Google 建议使用 XMLPullParser 来完成这项工作。它的使用甚至比 SAX 更容易。[/编辑]

```
package com.yourproject.parsers;

import java.io.IOException;
import java.io.InputStream;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.os.Bundle;

/**Callback Example
 * @example
 * <?xml version="1.0" encoding="utf-8"?>
 * <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
 *     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 *     xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
 *     <soap:Body>
 *         <LoginResponse xmlns="https://ws.yoururl.com/" >
 *             <LoginResult>
 *                 <ROOT xmlns="" >
 *                     <PassportKey>
 *                         <Key>653215989827346254362544623544652321</Key>
 *                         <otherLoginInfo>585051</otherLoginInfo>
 *                     </PassportKey>
 *                 </ROOT>
 *             </LoginResult>
 *         </LoginResponse>
 *     </soap:Body>
 * </soap:Envelope>
 */

/**
 * The loginParser saves the parsed data in a bundle. Once the parsing is done, call the 
 * getResutl() function to get a bundle that has the login authentication result.
 * */
public class LoginParser extends DefaultHandler {
    private String foundData = "";
    private String authCode = "";
    private String otherInfo = "";
    private Bundle result;

    public synchronized void parse(InputStream is) throws ParserConfigurationException, SAXException, IOException{
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        xr.setContentHandler(this);

        xr.parse(new InputSource(is));
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        foundData += new String(ch, start, length);
    }

    @Override
    public void startDocument() throws SAXException{
        // Nothing to do
    }

    @Override
    public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException{
        foundData = "";
    }

    @Override
    public void endElement(String namespaceURI, String localName, String qName) throws SAXException{
        if (qName.equals("Key")) {
            authCode = foundData;
        } else if (qName.equals("otherLoginInfo")){
            otherInfo = foundData;
        }
    }

    @Override
    public void endDocument() throws SAXException{
        // Nothing to do.
    }

    public Bundle getResult(){
        result = new Bundle();
        result.putString("authCode", authCode);
        result.putString("otherInfo", otherInfo);
        return result;
    }
} 
```

现在是使用解析器的类。一旦你有了这个，你可以在你喜欢的项目中的任何地方调用它。

```
package com.yourproject.web;

import java.io.IOException;
import java.io.InputStream;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.util.EntityUtils;

import com.yourproject.parsers.LoginParser;

import android.content.Context;
import android.os.Bundle;
import android.util.Log;

/**
 * Public class used to send a SOAP message to our Webservices.
 * 
 * Code from
 * http://mobileorchard.com/android-app-development-calling-web-services/
 * */
public class WebserviceCall{
    LoginParser lp;
    [... other parsers ...]

    [... other parsers implementation ...]

    public Bundle CallWebServiceParseAndReturn(String url, String soapAction, String envelope, int callerRequest) throws Exception {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httpRequest = null;
        HttpResponse httpResponse = null;
        Bundle result = null;

        httpRequest = new HttpPost(url);
        if (envelope != null) {
            httpRequest.setEntity(new StringEntity(envelope));
            httpRequest.addHeader("Content-Type", "text/xml; charset=utf-8");
        }

        httpResponse = httpclient.execute(httpRequest);
        switch (callerRequest) {
        case MyConstants.LOGIN:
            lp = new LoginParser();
            lp.parse(httpResponse.getEntity().getContent());
            result = lp.getResult();
            break;
        case MyConstants.OTHERPARSERS:
        case default:
            break;
        return result;
    }
} 
```

最后，这是一个如何在项目中使用它的示例。

```
private void callWebserviceLogin(String userName, String password) {
    try{
        Bundle result = null;
        WebserviceCall wsCall = new WebserviceCall();
        String wsEnvelope = String.format(MyConstants.LOGIN_ENVELOPE, userName, password);
        result = wsCall.CallWebServiceParseAndReturn(MyConstants.LOGIN_URL, MyConstants.LOGIN_SOAP_ACTION, wsEnvelope, MyConstants.LOGIN);
        authenticationResult = result.getString("authCode");
    } catch (Exception e) {
        authenticationResult = "";
        Log.e("Login error", e.getMessage());
    }
} 
```

如果您看到我的信封常数，则字符串中有一些 %s 标记。当我使用 String.format 时，它会按照出现的顺序将每个标记替换为您在第一个参数之后传递的参数（即保存标记的字符串）。

我知道这不是你所期望的，但我希望这会有所帮助。

# antlr - 使用 antlr 简化 smalltalk 语法 - 一元减号和消息链

> ID：10536180
> 
> 赞同：1
> 
> 时间：2012-05-10T14:28:04.883
> 
> 标签：antlr, grammar, smalltalk, backtracking, unary-operator

我正在使用 antlr 编写简单的类似 smalltalk 的语法。它是 smalltalk 的简化版本，但基本思想是相同的（例如消息传递）。

到目前为止，这是我的语法：

```
grammar GAL;

options {
    //k=2;
    backtrack=true;
}

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

INT :   '0'..'9'+
    ;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

COMMENT
    :   '"' ( options {greedy=false;} : . )* '"' {$channel=HIDDEN;}
    ;

WS  :   ( ' '
        | '\t'
        ) {$channel=HIDDEN;}
    ;

NEW_LINE
    :   ('\r'?'\n')
    ;

STRING
    :  '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ;

BINARY_MESSAGE_CHAR
    :   ('~' | '!' | '@' | '%' | '&' | '*' | '-' | '+' | '=' | '|' | '\\' | '<' | '>' | ',' | '?' | '/')
        ('~' | '!' | '@' | '%' | '&' | '*' | '-' | '+' | '=' | '|' | '\\' | '<' | '>' | ',' | '?' | '/')?
    ;

// parser

program
    :   NEW_LINE* (statement (NEW_LINE+ | EOF))*
    ;

statement

    :   message_sending
    |   return_statement
    |   assignment
    |   temp_variables
    ;

return_statement
    :   '^' statement
    ;

assignment
    :   identifier ':=' statement
    ;

temp_variables
    :   '|' identifier+ '|'
    ;

object
    :   raw_object
    ;

raw_object
    :   number
    |   string
    |   identifier
    |   literal
    |   block
    |   '(' message_sending ')'
    ;

message_sending
    :   keyword_message_sending
    ;

keyword_message_sending
    :   binary_message_sending keyword_message?
    ;

binary_message_sending
    :   unary_message_sending binary_message*
    ;

unary_message_sending
    :   object (unary_message)*
    ;

unary_message
    :   unary_message_selector
    ;

binary_message
    :   binary_message_selector unary_message_sending
    ;

keyword_message
    :   (NEW_LINE? single_keyword_message_selector NEW_LINE? binary_message_sending)+
    ;

block 
    : 
      '[' (block_signiture

      )? NEW_LINE* 
      block_body

      NEW_LINE* ']'
    ;

block_body 
    :  (statement 

      )?
      (NEW_LINE+ statement 

      )*
    ;

block_signiture 
    : 
      (':' identifier

      )+ '|'
    ;

unary_message_selector
    :   identifier
    ;

binary_message_selector
    :   BINARY_MESSAGE_CHAR
    ;

single_keyword_message_selector
    :   identifier ':'
    ;

keyword_message_selector
    :   single_keyword_message_selector+
    ;

symbol
    :   '#' (string | identifier | binary_message_selector | keyword_message_selector)
    ; 

literal
    :   symbol block? // if there is block then this is method
    ;

number
    : /*'-'?*/
    ( INT | FLOAT )
    ;

string
    :   STRING
    ;

identifier
    :   ID
    ; 
```

**1\. 一元减号**

我对数字的一元减号有疑问（规则的注释部分`number`）。问题是减号是有效的二进制消息。更糟糕的是，两个减号也是有效的二进制消息。我需要的是一元减号，以防没有对象可以向其发送二进制消息（例如，-3+4 应该是一元减号，因为 -3 前面没有任何内容）。此外，(-3) 也应该是二进制减号。如果 1 -- -2 是带有参数 -2 的二进制消息“--”，那就太好了，但我可以没有它。我怎样才能做到这一点？

如果我取消注释一元减号，则在解析 1-2 之类的内容时会出现错误 MismatchedSetException(0!=null)。

**2\. 消息链**

在 smalltalk 中实现消息链接的最佳方法是什么？我的意思是这样的：

```
obj message1 + 3; 
    message2; 
    + 3; 
    keyword: 2+3 
```

在这种情况下，每条消息都将发送到同一个对象`obj`。应保持消息优先级（一元 > 二进制 > 关键字）。

**3\. 回溯**

大多数语法可以用 解析`k=2`，但是当输入是这样的：

```
1 + 2
Obj message: 
    1 + 2
    message2: 'string' 
```

解析器尝试将 Obj 匹配为`single_keyword_message_selector`并引发`UnwantedTokenExcaption`token `message`。如果删除`k=2`并设置`backtrack=true`（像我一样）一切正常。如何删除回溯并获得所需的行为？

此外，大多数语法都可以使用 解析`k=1`，所以我尝试`k=2`只为需要它的规则设置，但这被忽略了。我做了这样的事情：

```
rule
    options { k = 2; }
    : // rule definition
    ; 
```

但在我在全局选项中设置 k 之前它不起作用。我在这里想念什么？

* * *

**更新**：

从头开始编写语法并不是理想的解决方案，因为我有很多代码依赖它。此外，smalltalk 缺少的一些功能是设计上缺少的。这并不是要成为另一个 smalltalk 实现，smalltalk 只是一个灵感。

在这样的情况下，我会更乐意让一元减号工作：`-1+2`或`2+(-1)`. 像这样`2 -- -1`的情况并不那么重要。

此外，消息链接应该尽可能简单地完成。这意味着我不喜欢改变我正在生成的 AST 的想法。

关于回溯 - 我可以忍受它，只是出于个人好奇在这里问。

这是生成 AST 的少量修改语法 - 也许它有助于更​​好地理解我不想更改的内容。（temp_variables 可能会被删除，我还没有做出那个决定）。

```
grammar GAL;

options {
    //k=2;
    backtrack=true;
    language=CSharp3;
    output=AST;
}

tokens {
    HASH     = '#';
    COLON    = ':';
    DOT      = '.';
    CARET    = '^';
    PIPE     = '|';
    LBRACKET = '[';
    RBRACKET = ']';
    LPAREN   = '(';
    RPAREN   = ')';
    ASSIGN   = ':=';
}

// generated files options
@namespace { GAL.Compiler }
@lexer::namespace { GAL.Compiler}

// this will disable CLSComplaint warning in ANTLR generated code
@parser::header { 
// Do not bug me about [System.CLSCompliant(false)]
#pragma warning disable 3021 
}

@lexer::header { 
// Do not bug me about [System.CLSCompliant(false)]
#pragma warning disable 3021 
}

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

INT :   '0'..'9'+
    ;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

COMMENT
    :   '"' ( options {greedy=false;} : . )* '"' {$channel=Hidden;}
    ;

WS  :   ( ' '
        | '\t'
        ) {$channel=Hidden;}
    ;

NEW_LINE
    :   ('\r'?'\n')
    ;

STRING
    :  '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ;

BINARY_MESSAGE_CHAR
    :   ('~' | '!' | '@' | '%' | '&' | '*' | '-' | '+' | '=' | '|' | '\\' | '<' | '>' | ',' | '?' | '/')
        ('~' | '!' | '@' | '%' | '&' | '*' | '-' | '+' | '=' | '|' | '\\' | '<' | '>' | ',' | '?' | '/')?
    ;

// parser

public program returns [ AstProgram program ]
    : { $program = new AstProgram(); }
    NEW_LINE* 
    ( statement (NEW_LINE+ | EOF)
        { $program.AddStatement($statement.stmt); }
    )*
    ;

statement returns [ AstNode stmt ]
    : message_sending
        { $stmt = $message_sending.messageSending; } 
    | return_statement
        { $stmt = $return_statement.ret; }
    | assignment
        { $stmt = $assignment.assignment; }
    | temp_variables
        { $stmt = $temp_variables.tempVars; }
    ;

return_statement returns [ AstReturn ret ]
    : CARET statement
        { $ret = new AstReturn($CARET, $statement.stmt); }
    ;

assignment returns [ AstAssignment assignment ]
    : dotted_expression ASSIGN statement
        { $assignment = new AstAssignment($dotted_expression.dottedExpression, $ASSIGN, $statement.stmt); }
    ;

temp_variables returns [ AstTempVariables tempVars ]
    : p1=PIPE 
        { $tempVars = new AstTempVariables($p1); }
    ( identifier
        { $tempVars.AddVar($identifier.identifier); }
    )+ 
    p2=PIPE
        { $tempVars.EndToken = $p2; }
    ;

object returns [ AstNode obj ]
    : number
        { $obj = $number.number; }
    | string
        { $obj = $string.str; }
    | dotted_expression
        { $obj = $dotted_expression.dottedExpression; }
    | literal
        { $obj = $literal.literal; }
    | block
        { $obj = $block.block; }
    | LPAREN message_sending RPAREN
        { $obj = $message_sending.messageSending; }
    ;

message_sending returns [ AstKeywordMessageSending messageSending ]
    : keyword_message_sending
        { $messageSending = $keyword_message_sending.keywordMessageSending; }
    ;

keyword_message_sending returns [ AstKeywordMessageSending keywordMessageSending ]
    : binary_message_sending 
        { $keywordMessageSending = new AstKeywordMessageSending($binary_message_sending.binaryMessageSending); }
    ( keyword_message
        { $keywordMessageSending = $keywordMessageSending.NewMessage($keyword_message.keywordMessage); }
    )?
    ;

binary_message_sending returns [ AstBinaryMessageSending binaryMessageSending ]
    : unary_message_sending
        { $binaryMessageSending = new AstBinaryMessageSending($unary_message_sending.unaryMessageSending); }
    ( binary_message
        { $binaryMessageSending = $binaryMessageSending.NewMessage($binary_message.binaryMessage); }
    )*
    ;

unary_message_sending returns [ AstUnaryMessageSending unaryMessageSending ]
    : object 
        { $unaryMessageSending = new AstUnaryMessageSending($object.obj); }
    (
      unary_message
        { $unaryMessageSending = $unaryMessageSending.NewMessage($unary_message.unaryMessage); }
    )*
    ;

unary_message returns [ AstUnaryMessage unaryMessage ]
    : unary_message_selector
        { $unaryMessage = new AstUnaryMessage($unary_message_selector.unarySelector); }
    ;

binary_message returns [ AstBinaryMessage binaryMessage ]
    : binary_message_selector unary_message_sending
        { $binaryMessage = new AstBinaryMessage($binary_message_selector.binarySelector, $unary_message_sending.unaryMessageSending); }
    ;

keyword_message returns [ AstKeywordMessage keywordMessage ]
    : 
    { $keywordMessage = new AstKeywordMessage(); }
    (
      NEW_LINE? 
      single_keyword_message_selector 
      NEW_LINE? 
      binary_message_sending
        { $keywordMessage.AddMessagePart($single_keyword_message_selector.singleKwSelector, $binary_message_sending.binaryMessageSending); }
    )+
    ;

block returns [ AstBlock block ]
    : LBRACKET 
        { $block = new AstBlock($LBRACKET); }
    (
      block_signiture
        { $block.Signiture = $block_signiture.blkSigniture; }
    )? NEW_LINE* 
      block_body
        { $block.Body = $block_body.blkBody; }
      NEW_LINE* 
      RBRACKET
        { $block.SetEndToken($RBRACKET); }
    ;

block_body returns [ IList<AstNode> blkBody ]
    @init { $blkBody = new List<AstNode>(); }
    : 
    ( s1=statement 
        { $blkBody.Add($s1.stmt); }
    )?
    ( NEW_LINE+ s2=statement 
        { $blkBody.Add($s2.stmt); }
    )*
    ;

block_signiture returns [ AstBlockSigniture blkSigniture ]
    @init { $blkSigniture = new AstBlockSigniture(); }
    : 
    ( COLON identifier
        { $blkSigniture.AddIdentifier($COLON, $identifier.identifier); }
    )+ PIPE
        { $blkSigniture.SetEndToken($PIPE); }
    ;

unary_message_selector returns [ AstUnaryMessageSelector unarySelector ]
    : identifier
        { $unarySelector = new AstUnaryMessageSelector($identifier.identifier); }
    ;

binary_message_selector returns [ AstBinaryMessageSelector binarySelector ]
    : BINARY_MESSAGE_CHAR
        { $binarySelector = new AstBinaryMessageSelector($BINARY_MESSAGE_CHAR); }
    ;

single_keyword_message_selector returns [ AstIdentifier singleKwSelector ]
    : identifier COLON
        { $singleKwSelector = $identifier.identifier; }
    ;

keyword_message_selector returns [ AstKeywordMessageSelector keywordSelector ]
    @init { $keywordSelector = new AstKeywordMessageSelector(); }
    : 
    ( single_keyword_message_selector
        { $keywordSelector.AddIdentifier($single_keyword_message_selector.singleKwSelector); }
    )+
    ;

symbol returns [ AstSymbol symbol ]
    : HASH 
    ( string 
        { $symbol = new AstSymbol($HASH, $string.str); }
    | identifier 
        { $symbol = new AstSymbol($HASH, $identifier.identifier); }
    | binary_message_selector 
        { $symbol = new AstSymbol($HASH, $binary_message_selector.binarySelector); }
    | keyword_message_selector
        { $symbol = new AstSymbol($HASH, $keyword_message_selector.keywordSelector); }
    )
    ; 

literal returns [ AstNode literal ]
    : symbol
        { $literal = $symbol.symbol; }
    ( block
        { $literal = new AstMethod($symbol.symbol, $block.block); }
    )? // if there is block then this is method
    ;

number returns [ AstNode number ]
    : /*'-'?*/
    ( INT
        { $number = new AstInt($INT); }
    | FLOAT 
        { $number = new AstInt($FLOAT); }
    )
    ;

string returns [ AstString str ]
    : STRING
        { $str = new AstString($STRING); }
    ;

dotted_expression returns [ AstDottedExpression dottedExpression ]
    : i1=identifier 
        { $dottedExpression = new AstDottedExpression($i1.identifier); }
    (DOT i2=identifier
        { $dottedExpression.AddIdentifier($i2.identifier); }
    )*
    ;

identifier returns [ AstIdentifier identifier ]
    : ID
        { $identifier = new AstIdentifier($ID); }
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:49:51.527

嗨 Smalltalk 语法作家，

首先，要让 smalltalk 语法正确解析 (1 -- -2) 并支持可选的 '.' 在最后一条语句等处，您应该将空格视为重要的。不要把它放在隐藏频道上。

到目前为止，语法并没有将规则分解成足够小的片段。这将是您在 K=2 和回溯中看到的问题。

我建议您查看 Redline Smalltalk 项目[http://redline.st](http://redline.st)和[https://github.com/redline-smalltalk/redline-smalltalk定义的 ANTLR 中有效的 Smalltalk 语法](https://github.com/redline-smalltalk/redline-smalltalk)

Rgs，詹姆斯。

# java - JPQL：解析查询的语法错误，意外的标记

> ID：10536182
> 
> 赞同：1
> 
> 时间：2012-05-10T14:28:07.583
> 
> 标签：java, jpa, persistence, jpa-2.0, jpql

也许我没有看到它，但是指定组有什么问题？

查询数据库困难（当前为空）：

```
public void persist(Msg message) {
    LOG.info("\t" + message);
    LOG.info("isOpen?" + em.isOpen());
    em.getTransaction().begin();
    int id = message.getId();
    TypedQuery<Notes> q = em.createQuery("SELECT  n "
            + "FROM Notes n WHERE n.messageId = :messageId "
            + "AND n.group = :group", Notes.class);
    q.setParameter("messageId", message.getId()).setParameter("group", message.getGroup());
    List<Notes> results = q.getResultList();
    em.getTransaction().commit();
    for (Notes o : results) {
        LOG.info("object is \n\n" + o);
    }
} 
```

堆栈跟踪：

```
run:
May 10, 2012 7:17:17 AM net.bounceme.dur.usenet.controller.PropertiesReader getProps
INFO: NNTP.loadMessages...
[EL Info]: 2012-05-10 07:17:27.343--ServerSession(29959998)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Severe]: 2012-05-10 07:17:29.315--ServerSession(29959998)--Local Exception Stack: 
Exception [EclipseLink-8025] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.JPQLException
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
Exception Description: Syntax error parsing the query [Notes.getByIdAndGroup: SELECT DISTINCT n FROM Notes n WHERE n.messageId = :messageId AND n.group=group], line 1, column 74: unexpected token [group].
Internal Exception: NoViableAltException(34@[792:1: comparisonExpressionRightOperand returns [Object node] : (n= arithmeticExpression | n= nonArithmeticScalarExpression | n= anyOrAllExpression );])
    at net.bounceme.dur.usenet.swing.Frame.panelWithTable1PropertyChange(Frame.java:121)
    at net.bounceme.dur.usenet.swing.Frame.access$100(Frame.java:12)
    at net.bounceme.dur.usenet.swing.Frame$2.propertyChange(Frame.java:51) 
```

数据库：

```
thufir@dur:~$ 
thufir@dur:~$ mysql -u java -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 141
Server version: 5.1.58-1ubuntu1 (Ubuntu)

Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
mysql> describe nntp.notes;
+------------+------------+------+-----+---------+-------+
| Field      | Type       | Null | Key | Default | Extra |
+------------+------------+------+-----+---------+-------+
| ID         | bigint(20) | NO   | PRI | NULL    |       |
| GROUP_ID   | int(11)    | NO   |     | NULL    |       |
| STAMP      | date       | NO   |     | NULL    |       |
| NOTE       | text       | YES  |     | NULL    |       |
| MESSAGE_ID | int(11)    | NO   |     | NULL    |       |
| GROUP      | text       | NO   |     | NULL    |       |
+------------+------------+------+-----+---------+-------+
6 rows in set (0.03 sec)

mysql> quit;
Bye
thufir@dur:~$ 
```

这个类应该是Note还是Notes？同样，表格应该是 Note 还是 Notes？也许没关系。

实体：

```
package net.bounceme.dur.usenet.controller;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "notes", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Notes.findAll", query = "SELECT n FROM Notes n"),
    @NamedQuery(name = "Notes.findById", query = "SELECT n FROM Notes n WHERE n.id = :id"),
    @NamedQuery(name = "Notes.findByGroupId", query = "SELECT n FROM Notes n WHERE n.groupId = :groupId"),
    @NamedQuery(name = "Notes.findByStamp", query = "SELECT n FROM Notes n WHERE n.stamp = :stamp"),
    @NamedQuery(name = "Notes.findByMessageId", query = "SELECT n FROM Notes n WHERE n.messageId = :messageId"),
    @NamedQuery(name = "Notes.getByIdAndGroup", query = "SELECT DISTINCT n FROM Notes n WHERE n.messageId = :messageId AND n.group=group"),
})
public class Notes implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "ID", nullable = false)
    private Long id;
    @Basic(optional = false)
    @Column(name = "GROUP_ID", nullable = false)
    private int groupId;
    @Basic(optional = false)
    @Column(name = "STAMP", nullable = false)
    @Temporal(TemporalType.DATE)
    private Date stamp;
    @Lob
    @Column(name = "NOTE", length = 65535)
    private String note;
    @Basic(optional = false)
    @Column(name = "MESSAGE_ID", nullable = false)
    private int messageId;
    @Basic(optional = false)
    @Lob
    @Column(name = "GROUP", nullable = false, length = 65535)
    private String group;

    public Notes() {
    }

    public Notes(Long id) {
        this.id = id;
    }

    public Notes(Long id, int groupId, Date stamp, int messageId, String group) {
        this.id = id;
        this.groupId = groupId;
        this.stamp = stamp;
        this.messageId = messageId;
        this.group = group;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public int getGroupId() {
        return groupId;
    }

    public void setGroupId(int groupId) {
        this.groupId = groupId;
    }

    public Date getStamp() {
        return stamp;
    }

    public void setStamp(Date stamp) {
        this.stamp = stamp;
    }

    public String getNote() {
        return note;
    }

    public void setNote(String note) {
        this.note = note;
    }

    public int getMessageId() {
        return messageId;
    }

    public void setMessageId(int messageId) {
        this.messageId = messageId;
    }

    public String getGroup() {
        return group;
    }

    public void setGroup(String group) {
        this.group = group;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Notes)) {
            return false;
        }
        Notes other = (Notes) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "net.bounceme.dur.usenet.controller.Notes[ id=" + id + " ]";
    }

} 
```

现在我只使用一张表，但似乎无法获得有效的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:30:56.053

这个

```
"SELECT DISTINCT n FROM Notes n WHERE n.messageId = :messageId AND n.group=group" 
```

应该

```
"SELECT DISTINCT n FROM Notes n WHERE n.messageId = :messageId AND n.group=:group" 
```

它在组参数中缺少一个冒号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:44:01.023

> 解析查询的语法错误 [Notes.getByIdAndGroup: *SELECT DISTINCT n FROM Notes n WHERE n.messageId = :messageId AND n.group=group* ]，第 1 行，第 74 列：**意外标记 [group]。**

在 SQL 中，`GROUP`是一个保留字，这可能是出现此错误消息的原因。在 JPA2 中，应该可以通过将注释更改为来引用查询中的列名

```
@Column(name="\"GROUP\"") 
```

如果这在您的情况下不起作用，您最好的选择是将数据库列和注释更改为类似`GROUP_NAME`.

# java - 从 JUnit 测试用例中找不到资源文件

> ID：10536183
> 
> 赞同：68
> 
> 时间：2012-05-10T14:28:17.787
> 
> 标签：java, unit-testing, maven, junit, resourcebundle

**概括**

我的 JUnit 测试在执行期间没有找到它们需要的文件。我正在使用 Maven 进行依赖管理和编译。

**细节**

测试用例所需的所有文件位于：`src/test/resources`.

例如，`src/test/resources/resourceFile.txt`。

要访问资源，我使用以下代码：

```
URL url = getClass().getResource("/resourceFile.txt").getFile();
File file = new File(url); 
```

但随后`file.exists()`返回`false`。我得到的错误是：

```
Tests in error: 
  myJUnitTestCase(tests.MyJUnitTestClass): /home/me/workspace/Project%20Name/target/test-classes/resourceFile.txt (No such file or directory) 
```

请注意，以下给出了相同的错误（注意删除的`/`前缀）：

```
URL url = getClass().getClassLoader().getResource("resourceFile.txt").getFile();
File file = new File(url); 
```

似乎来自的文件`src/test/resources`没有被复制到`target/test-classes`.

有任何想法吗？

**以下问题没有帮助**

[为什么我无法在使用 Maven 的 Junit 测试运行中访问 src/test/resources？](https://stackoverflow.com/questions/7613359/why-cant-i-access-src-test-resources-in-junit-test-run-with-maven)

[在 JUnit @BeforeClass 中加载属性文件](https://stackoverflow.com/questions/9983426/loading-properties-file-in-junit-beforeclass)

[Junit中的测试数据如何处理？](https://stackoverflow.com/questions/2948861/how-to-deal-with-the-test-data-in-junit)

**软件版本**

Ubuntu 12.04

阿帕奇 Maven 2.2.1

Java 1.7.0

Eclipse（面向 Web 开发人员的 Java EE IDE）Indigo Service Release 2

**（截断）Maven POM**

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.groupId</groupId>
    <artifactId>artifactId</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>name</name>
    <build>
        <finalName>name</finalName>
        <directory>target</directory>
        <outputDirectory>target/classes</outputDirectory>
        <testOutputDirectory>target/test-classes</testOutputDirectory>
        <sourceDirectory>src/main/java</sourceDirectory>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
            </testResource>
        </testResources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-11T08:49:01.130

我的错误，资源文件实际上被复制到`target/test-classes`. **问题似乎是由于我的项目名称中的空格**，例如`Project%20Name`。

我现在按如下方式加载文件并且它可以工作：

```
org.apache.commons.io.FileUtils.toFile(myClass().getResource("resourceFile.txt")‌​); 
```

或者，（取自[Java：how to get a File from an escaped URL?](https://stackoverflow.com/questions/2166039/java-how-to-get-a-file-from-an-escaped-url)）这可能会更好（不依赖于 Apache Commons）：

```
myClass().getResource("resourceFile.txt")‌​.toURI(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T18:53:14.430

您知道 Maven 是基于*约定优于配置*的范式吗？所以你不应该配置默认的东西。

所有这些都代表了 Maven 中的默认值。所以最好的做法是不要定义它已经完成了。

```
 <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
    </testResources> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-09T03:59:33.220

这实际上是多余的，除非您想要覆盖默认值。所有这些设置都是隐含的默认值。

您可以通过使用此命令检查您的有效 POM 来验证这一点

`mvn help:effective-pom`

```
 <finalName>name</finalName>
    <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
    </testResources> 
```

例如，如果我想指向不同的测试资源路径或资源路径，你应该使用它，否则你不这样做。

```
 <resources>
        <resource>
            <directory>/home/josh/desktop/app_resources</directory>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>/home/josh/desktop/test_resources</directory>
        </testResource>
    </testResources> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-04T15:21:56.117

测试资源文件（src/test/resources）被加载到 target/test-classes 子文件夹。所以我们可以使用下面的代码来加载测试资源文件。

```
String resource = "sample.txt";
File file = new File(getClass().getClassLoader().getResource(resource).getFile());

System.out.println(file.getAbsolutePath()); 
```

**注意：**这里的 sample.txt 文件应该放在 src/test/resources 文件夹下。

有关更多详细信息，请参阅[options_to_load_test_resources](https://www.baeldung.com/junit-src-test-resources-directory-path)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-09T10:04:44.370

您可能已经定义：

```
<packaging>pom</packaging> 
```

如果你这样做了，当你启动测试时，资源将不会出现在目标目录中。也`mvn package`不会创建它。

相反，如果您定义：

```
<packaging>jar</packaging> 
```

或者什么都没有，因为默认值为`jar`. 由于 Maven 基于*Convention over Configuration*。你最终会得到：

*   src/main/resources => 目标/类
*   src/test/resources => 目标/测试类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-05T15:58:16.473

主类应该在 src/main/java
和
测试类应该在 src/test/java

如果所有在正确的地方并且仍然无法访问主类然后
右键单击项目 => Maven => 更新项目
希望所以这将解决问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-23T12:55:25.953

在 pom 文件中将 'maven.test.skip' 设为 false，同时构建项目测试资源将属于测试类。

<maven.test.skip>假</maven.test.skip>

# java - java中包含0.0和1.0之间的随机浮点数

> ID：10536189
> 
> 赞同：2
> 
> 时间：2012-05-10T14:28:53.650
> 
> 标签：java, random

> **可能重复：**
> [包含范围内的随机浮点双精度](https://stackoverflow.com/questions/9724404/random-floating-point-double-in-inclusive-range)

我正在做一个项目，我需要介于 0.0 和 1.0 之间的随机浮点数（包括 0.0 和 1.0）。在考虑了一段时间后，我发现它对我的项目可能并不那么重要，所以我只使用标准：

```
new Random().nextFloat(); 
```

它生成从 0.0（包括）到 1.0（不包括）的浮点数。

但我不能停止思考它实际上是如何实现 1.0 包容性的？

我能想到的一种方法是（伪代码）：

```
new Random().nextFloat() * (1.0 + "lowest possible value above 0"); 
```

我能想到的另一种方法是：

```
float myRandomFloat = 0;
float rand1 = new Random().nextFloat(); // [0;1)
float rand2 = 1.0f - new Random().nextFloat(); // (0;1]
boolean randPicker = new Random().nextBoolean();
if (randPicker)
    myRandomFloat = rand1;
else
    myRandomFloat = rand2; 
```

但我认为这应该更简单还是不？所以我真正的问题是：有没有真正的或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-10T14:51:12.830

如果你将 Random().nextFloat() 乘以 10，它会给你一个从 0 到 9 的数字，它们是数字系统中的基数，所以数字 10 并不存在，但它是两个基数的组合，所以您将永远无法将其作为随机数获得，但如果您真的需要它，我会选择您的第二个选项。

# javascript - Facebook 获取语言环境

> ID：10536192
> 
> 赞同：0
> 
> 时间：2012-05-10T14:28:55.850
> 
> 标签：javascript, jquery, facebook, facebook-graph-api

我究竟做错了什么？- 我正在尝试从 facebook iframe 选项卡中获取用户的区域设置，以根据位置显示相关内容。

```
 <script type="text/javascript">
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=" + 'MY APP ID';
            fjs.parentNode.insertBefore(js, fjs);
        } (document, 'script', 'facebook-jssdk'));

        window.fbAsyncInit = function () {
            if (location.protocol == 'https:') {
                FB._https = true;
            };
            FB.init({
                appId: 'MY APP ID',
                status : false,
                cookie : false,
                xfbml  : true,
            width: 810
            });
            FB.Canvas.scrollTo(0,0);
            FB.Canvas.setAutoGrow();
        }
</script>
<script>
FB.login(function(response) {
    if (response.authResponse) {
        if ($.data.get('user').get('locale') = "en_GB") {
            $("a").attr("href", "URL");
        }
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:10:11.963

我对 jQuery 不太了解，但这里有一些应该可以工作的东西：

```
FB.login(function(response) {
    if (response.authResponse && response.authResponse.user.locale == "en_GB") {
        $("a").attr("href", "URL");
    }
}); 
```

* * *

# 编辑

哦耶。*fb sdk 的加载是异步的，因此只有在调用fbAsyncInit*方法后才需要使用 FB 命名空间。试试这个：

```
window.fbAsyncInit = function () {
    if (location.protocol == 'https:') {
        FB._https = true;
    };
    FB.init({
        appId: 'MY APP ID',
        status : false,
        cookie : false,
        xfbml  : true,
        width: 810
    });
    FB.Canvas.scrollTo(0,0);
    FB.Canvas.setAutoGrow();

    FB.login(function(response) {
        if (response.authResponse && response.authResponse.user.locale == "en_GB") {
            $("a").attr("href", "URL");
        }
    });
}

(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=" + 'MY APP ID';
    fjs.parentNode.insertBefore(js, fjs);
} (document, 'script', 'facebook-jssdk')); 
```

请注意*FB.login*尝试弹出一个新窗口，并且由于在此代码中，由于用户操作未调用该方法，因此浏览器可能会阻止弹出窗口。

# .net - 如何使用 LINQ2SQL 连接到 Access 2010

> ID：10536197
> 
> 赞同：0
> 
> 时间：2012-05-10T14:29:09.487
> 
> 标签：.net, linq-to-sql

我想知道如何将 Access 2010 中的表拖到 dmbl 文件中，以便我可以在代码中利用 LINQ2SQL 的优势。

当我尝试将 Access 2010 中的表拖到 DBML 文件时，出现错误消息。它是：所选对象使用了不受支持的提供程序。

所以....你有什么想法吗？

我在等你的答案......

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:36:04.707

Linq to SQL 就是这样，一个用于 SQL Server 的 Linq 提供程序。它不支持 Access 数据库。查看[这个问题](https://stackoverflow.com/questions/295772/query-microsoft-access-mdb-database-using-linq-and-c-sharp)了解更多详情。不过，您似乎可以使用 Entity Framework for Access。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:43:56.010

对照 MS Access检查[LINQ asp.net 页面](https://stackoverflow.com/questions/194528/linq-asp-net-page-against-ms-access)`Jon Skeet`上的文字。

> 我不认为 LINQ to SQL 支持 Access。但是，如果您的表足够小以适合内存，LINQ to DataSet 将让您非常轻松地查询数据表等 - 特别是强类型数据集。

LINQ to SQL 仅适用于 SQL Server 数据库。您需要的是[Microsoft Entity Framework](http://msdn.microsoft.com/en-us/library/aa697427%28vs.80%29.aspx)。这使得面向对象访问您的 mdb。从这里您可以运行 LINQ 查询。

# java - 在 Maven 部署过程中添加一个额外的文件夹

> ID：10536201
> 
> 赞同：0
> 
> 时间：2012-05-10T14:29:14.853
> 
> 标签：java, maven, maven-2, maven-deploy-plugin

我目前在我的项目中有这个文件夹结构

```
CTIConnector
|- src
   |-main
      |-java
      |-resources
      |-webapp 
```

使用*mvn deploy*后，目标文件夹包含一个 jar，其中包含资源文件夹。但我还希望将 webapp 文件夹与 jar 放在同一文件夹中（不在 jar 内！）。有人可以告诉我该怎么做:)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:59:16.683

您可以配置 maven-resources-plugin 以将内容放在您想要的位置（无论如何它都是在 process-resources 生命周期阶段运行的：[Maven Build Lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)）。查看[copy-resources](http://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html)目标以了解详细信息。本质上，您将看到以下内容：

```
<project
    ...
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <executions>
                    <execution>
                        <id>copy-resources</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${basedir}/target/webapp</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>src/main/webapp</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    ...
    </build>
</project> 
```

# android - 如何以编程方式设置 Android SeekBar 进度可绘制

> ID：10536202
> 
> 赞同：12
> 
> 时间：2012-05-10T14:29:18.643
> 
> 标签：android, seekbar

我在以编程方式设置 SeekBar 的可绘制进度时遇到问题。当我在 .xml 文件中设置它时，一切正常。

```
<SeekBar
 android:id="@+id/sb"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 .....
 android:progressDrawable="@drawable/seek_bar"/> 
```

![从 .xml 设置](../Images/62b9961ccbc4591c434c507a3c51643e.png)

但是，当我尝试从这样的代码中设置它时，我遇到了问题：

```
seekBar.setProgressDrawable(getResources().getDrawable(R.drawable.seek_bar)); 
```

然后背景可绘制对象占据了整个搜索栏，以后我根本无法修改进度 - 拇指移动但进度可绘制仍然填充整个搜索栏。此外，seekbar 失去了圆角。似乎进度可绘制在搜索栏的顶部。

![在代码中设置时](../Images/0565fdc8cf3244b27e4026d3953772e3.png)

我尝试了[android progressBar 上提供的解决方案没有更新进度视图/drawable](https://stackoverflow.com/questions/4348032/android-progressbar-does-not-update-progress-view-drawable)，但它对我不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T09:35:33.180

我通过使用 .xml 形状作为我的 SeekBar 的背景解决了这个问题。可以通过 setProgressDrawable() 方法使用的完整的 SeekBar 解决方案应该是这样的：

```
//seek_bar.xml
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@android:id/background"
    android:drawable="@drawable/seek_bar_background"/>
<item android:id="@android:id/progress"
    android:drawable="@drawable/seek_bar_progress" />
</layer-list>

//seek_bar_background.xml
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<gradient
    android:angle="270"
    android:startColor="#8a8c8f"
    android:endColor="#58595b" />

<corners android:radius="5dip" />

</shape>

//seek_bar_progress.xml
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@android:id/background"
    android:drawable="@drawable/seek_bar_background"/>
<item android:id="@android:id/progress">
    <clip android:drawable="@drawable/seek_bar_progress_fill" />
</item>

</layer-list>

//seek_bar_progress_fill.xml
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<gradient
    android:startColor="#b3d27e"       
    android:endColor="#93c044"
    android:angle="270"
 />
 <corners android:radius="5dip" />  

</shape> 
```

在代码中，您可以像这样使用它：

```
progressBar.setProgressDrawable(getResources().getDrawable(R.drawable.seek_bar)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-26T20:55:26.490

The answer given above is for using xml, but just in case someone wanted to do this programmatically I have it below.

```
public class SeekBarBackgroundDrawable extends Drawable {

private Paint mPaint = new Paint();
private float dy;

public SeekBarBackgroundDrawable(Context ctx) {
    mPaint.setColor(Color.WHITE);
    dy = ctx.getResources().getDimension(R.dimen.one_dp);
}

@Override
public void draw(Canvas canvas) {
    canvas.drawRect(getBounds().left,getBounds().centerY()-dy/2,getBounds().right,getBounds().centerY()+dy/2,mPaint);
}

@Override
public void setAlpha(int i) {
    mPaint.setAlpha(i);
}

@Override
public void setColorFilter(ColorFilter colorFilter) {

}

@Override
public int getOpacity() {
    return PixelFormat.TRANSLUCENT;
} 
```

}

Above class is for the background of the seekbar (the part that always exists under the progress drawable)

```
public class SeekBarProgressDrawable extends ClipDrawable {

private Paint mPaint = new Paint();
private float dy;
private Rect mRect;

public SeekBarProgressDrawable(Drawable drawable, int gravity, int orientation, Context ctx) {
    super(drawable, gravity, orientation);
    mPaint.setColor(Color.WHITE);
    dy = ctx.getResources().getDimension(R.dimen.two_dp);
}

@Override
public void draw(Canvas canvas) {
    if (mRect==null) {
        mRect = new Rect(getBounds().left, (int)(getBounds().centerY() - dy / 2), getBounds().right, (int)(getBounds().centerY() + dy / 2));
        setBounds(mRect);
    }

    super.draw(canvas);
}

@Override
public void setAlpha(int i) {
    mPaint.setAlpha(i);
}

@Override
public void setColorFilter(ColorFilter colorFilter) {

}

@Override
public int getOpacity() {
    return PixelFormat.TRANSLUCENT;
} 
```

}

Above is the progress drawable. Notice it's a clip drawable. The cool part here is I am setting the bounds to be whatever I want, along with color. This allows for fine tuned customization of your drawable.

```
//Custom background drawable allows you to draw how you want it to look if needed
    SeekBarBackgroundDrawable backgroundDrawable = new SeekBarBackgroundDrawable(mContext);
    ColorDrawable progressDrawable = new ColorDrawable(Color.BLUE);
    //Custom seek bar progress drawable. Also allows you to modify appearance.
    SeekBarProgressDrawable clipProgressDrawable = new SeekBarProgressDrawable(progressDrawable,Gravity.LEFT,ClipDrawable.HORIZONTAL,mContext);
    Drawable[] drawables = new Drawable[]{backgroundDrawable,clipProgressDrawable};

    //Create layer drawables with android pre-defined ids
    LayerDrawable layerDrawable = new LayerDrawable(drawables);
    layerDrawable.setId(0,android.R.id.background);
    layerDrawable.setId(1,android.R.id.progress);

    //Set to seek bar
    seekBar.setProgressDrawable(layerDrawable); 
```

Above code uses custom drawables to edit seek bar. My main reason for doing this is I will be editing the look of the background drawable, so it has "notches" (although not implemented yet). You can't do that with a xml defined drawable (at-least not easily).

Another thing I noticed is that this process prevents the SeekBar's from getting as wide as the thumb drawable. It sets the bounds of the drawables so they never get to tall.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T14:52:13.313

我之前在更改代码中的搜索和进度条时遇到过问题。一旦我实际上必须加载两次drawable才能正确生效。我认为这与更改图像后的填充有关。

我只是在这里猜测，但尝试在之后设置填充

```
 getResources().getDrawable(R.drawable.seek_bar) // once
 seekBar.setProgressDrawable(getResources().getDrawable(R.drawable.seek_bar)); //twice
 seekBar.setPadding(int,int,int,int) 
```

并且也不会伤害它使其无效。

```
 seekBar.postInvalidate() 
```

非常hacky，我不喜欢它，但它以前为我解决了类似的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T08:06:41.517

您可以在 XML 中使用 android: maxHeight 来限制背景高度

```
<SeekBar
    android:id="@+id/original_volume"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:maxHeight="2dp"/> 
```

它不会夹住拇指

# c - ANSI-C：打印十进制整数的最大字符数

> ID：10536207
> 
> 赞同：17
> 
> 时间：2012-05-10T14:29:31.653
> 
> 标签：c, string, int, type-conversion

我想知道确定打印小数的最大字符数是否是一种简单的方法`int`。

我知道`<limits.h>`包含这样的定义，即 int 可以假设**的**`INT_MAX`最大值，但这不是我想要的。

 **我希望能够做类似的事情：

```
int get_int( void )
{
    char draft[ MAX_CHAR_OF_A_DECIMAL_INT ];

    fgets( draft, sizeof( draft ), stdin );
    return strtol( draft, NULL, 10 );
} 
```

但是如何以`MAX_CHAR_OF_A_DECIMAL_INT`可移植和低开销的方式找到 的价值呢？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T14:31:43.713

如果您假设`CHAR_BIT`是 8（POSIX 需要，因此对于任何针对 POSIX 系统以及任何其他主流系统（如 Windows）的代码都是一个安全的假设），一个便宜的安全公式是`3*sizeof(int)+2`. 如果没有，您可以制作它`3*sizeof(int)*CHAR_BIT/8+2`，或者有一个稍微简单的版本。

如果您对它起作用的原因感兴趣，`sizeof(int)`它本质上是`INT_MAX`（大约以 2^CHAR_BIT 为底的对数）的对数，并且不同底数的对数之间的转换（例如以 10 为底）只是乘法。特别是，3 是对数基数 10 的整数近似值/上限，即 256。

+2 是为了说明可能的符号和空终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T22:55:28.393

最简单的规范和可以说是最便携的方法是询问`snprintf()`需要多少空间：

```
char sbuf[2];
int ndigits;

ndigits = snprintf(sbuf, (size_t) 1, "%lld", (long long) INT_MIN); 
```

稍微不那么便携可能使用`intmax_t`and `%j`：

```
ndigits = snprintf(sbuf, (size_t) 1, "%j", (intmax_t) INT_MIN); 
```

人们可能会认为在运行时这样做太昂贵了，但它可以用于任何值，而不仅仅是任何整数类型的 MIN/MAX 值。

当然，您也可以使用简单的递归函数直接计算给定整数需要以 Base 10 表示法表示的位数：

```
unsigned int
numCharsB10(intmax_t n)
{
        if (n < 0)
                return numCharsB10((n == INTMAX_MIN) ? INTMAX_MAX : -n) + 1;
        if (n < 10)
                return 1;

        return 1 + numCharsB10(n / 10);
} 
```

但这当然也需要在运行时使用 CPU，即使是内联时也是如此，尽管可能比实际少一点`snprintf()`。

@R. 上面的答案虽然或多或少是错误的，但在正确的轨道上。下面是一些非常好、经过广泛测试和高度可移植的宏的正确推导，它们在编译时使用 实现计算`sizeof()`，使用对@R. 的初始措辞进行轻微修正开始：

首先，我们可以很容易地看到（或显示）它`sizeof(int)`是以 2 为底`UINT_MAX`的对数除以`sizeof()`(8, aka `CHAR_BIT`) 的一个单位表示的位数：

sizeof(int) == log2(UINT_MAX) / 8

因为`UINT_MAX`当然只是 2 ^ (sizeof(int) * 8)) 而 log2(x) 是 2^x 的倒数。

我们可以使用恒等式“logb(x) = log(x) / log(b)”（其中 log() 是自然对数）来求其他底的对数。例如，您可以使用以下方法计算“x”的“log base 2”：

log2(x) = log(x) / log(2)

并且：

log10(x) = log(x) / log(10)

所以，我们可以推断：

log10(v) = log2(v) / log2(10)

现在我们最终想要的是 的以 10 为底的对数`UINT_MAX`，所以由于 log2(10) 大约是 3，并且由于我们从上面知道 log2() 是关于 的`sizeof()`，所以我们可以说 log10( `UINT_MAX`) 大约是：

log10(2^(sizeof(int)*8)) ~= (sizeof(int) * 8) / 3

虽然这并不完美，特别是因为我们真正想要的是上限值，但是通过一些小的调整来考虑 log2(10) 到 3 的整数舍入，我们可以通过首先在 log2 项上加一个来得到我们需要的东西，然后从任何较大整数的结果中减去 1，得到这个“足够好”的表达式：

```
#if 0
#define __MAX_B10STRLEN_FOR_UNSIGNED_TYPE(t) \
    ((((sizeof(t) * CHAR_BIT) + 1) / 3) - ((sizeof(t) > 2) ? 1 : 0))
#endif 
```

更好的是，我们可以将第一个 log2() 项乘以 1/log2(10)（乘以除数的倒数与除数相同），这样做可以找到更好的整数近似值。我最近（重新？）在阅读肖恩安德森的比特黑客时遇到了这个建议：http: [//graphics.stanford.edu/~seander/bithacks.html#IntegerLog10](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLog10)

为了尽可能地使用整数数学来做到这一点，我们需要找到代表我们倒数的理想比率。这可以通过搜索将我们期望的值 1/log2(10) 乘以 2 的连续幂的最小小数部分来找到，在 2 的某个合理范围内，例如使用以下小 AWK 脚本：

```
 awk 'BEGIN {
            minf=1.0
    }
    END {
            for (i = 1; i <= 31; i++) {
                    a = 1.0 / (log(10) / log(2)) * 2^i
                    if (a > (2^32 / 32))
                            break;
                    n = int(a)
                    f = a - (n * 1.0)
                    if (f < minf) {
                            minf = f
                            minn = n
                            bits = i
                    }
                    # printf("a=%f, n=%d, f=%f, i=%d\n", a, n, f, i)
            }
            printf("%d + %f / %d, bits=%d\n", minn, minf, 2^bits, bits)
    }' < /dev/null

    1233 + 0.018862 / 4096, bits=12 
```

所以我们可以得到一个很好的整数近似值，将我们的 log2(v) 值乘以 1/log2(10)，方法是将它乘以 1233，然后右移 12（当然，2^12 是 4096）：

log10(UINT_MAX) ~= ((sizeof(int) * 8) + 1) * 1233 >> 12

并且，加上加一个来做相当于找到上限值的操作，这消除了摆弄奇数值的需要：

```
#define __MAX_B10STRLEN_FOR_UNSIGNED_TYPE(t) \
    (((((sizeof(t) * CHAR_BIT)) * 1233) >> 12) + 1)

/*
 * for signed types we need room for the sign, except for int64_t
 */
#define __MAX_B10STRLEN_FOR_SIGNED_TYPE(t) \
    (__MAX_B10STRLEN_FOR_UNSIGNED_TYPE(t) + ((sizeof(t) == 8) ? 0 : 1))

/*
 * NOTE: this gives a warning (for unsigned types of int and larger) saying
 * "comparison of unsigned expression < 0 is always false", and of course it
 * is, but that's what we want to know (if indeed type 't' is unsigned)!
 */
#define __MAX_B10STRLEN_FOR_INT_TYPE(t)                     \
    (((t) -1 < 0) ? __MAX_B10STRLEN_FOR_SIGNED_TYPE(t)      \
                  : __MAX_B10STRLEN_FOR_UNSIGNED_TYPE(t)) 
```

而通常编译器将在编译时评估我的`__MAX_B10STRLEN_FOR_INT_TYPE()`宏变成的表达式。当然，我的宏总是计算给定类型整数所需的最大空间，而不是特定整数值所需的确切空间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T17:24:09.200

我不知道在普通的 ANSI-C 中做你想做的事是否有任何技巧，但在 C++ 中，你可以轻松地使用模板元编程来做：

```
#include    <iostream>
#include    <limits>
#include    <climits>

template< typename T, unsigned long N = INT_MAX >
class   MaxLen
{
public:
    enum
    {
        StringLen = MaxLen< T, N / 10 >::StringLen + 1
    };
};

template< typename T >
class   MaxLen< T, 0 >
{
public:
    enum
    {
        StringLen = 1
    };
}; 
```

您可以从纯 C 代码中调用它，创建一个额外的 C++ 函数，如下所示：

```
extern "C"
int int_str_max( )
{
    return  MaxLen< int >::StringLen;
} 
```

这具有零执行时间开销并计算所需的确切空间。

* * *

您可以使用以下内容测试上述模板：

```
int main( )
{
std::cout << "Max: " << std::numeric_limits< short >::max( ) << std::endl;
std::cout << "Digits: " << std::numeric_limits< short >::digits10 << std::endl;
std::cout << "A \"short\" is " << sizeof( short ) << " bytes." << std::endl
    << "A string large enough to fit any \"short\" is "
    << MaxLen< short, SHRT_MAX >::StringLen << " bytes wide." << std::endl;

std::cout << "Max: " << std::numeric_limits< int >::max( ) << std::endl;
std::cout << "Digits: " << std::numeric_limits< int >::digits10 << std::endl;
std::cout << "An \"int\" is " << sizeof( int ) << " bytes." << std::endl
    << "A string large enough to fit any \"int\" is "
    << MaxLen< int >::StringLen << " bytes wide." << std::endl;

std::cout << "Max: " << std::numeric_limits< long >::max( ) << std::endl;
std::cout << "Digits: " << std::numeric_limits< long >::digits10 << std::endl;
std::cout << "A \"long\" is " << sizeof( long ) << " bytes." << std::endl
    << "A string large enough to fit any \"long\" is "
    << MaxLen< long, LONG_MAX >::StringLen << " bytes wide." << std::endl;

    return  0;
} 
```

输出是：

```
Max: 32767
Digits: 4
A "short" is 2 bytes.
A string large enough to fit any "short" is 6 bytes wide.
Max: 2147483647
Digits: 9
An "int" is 4 bytes.
A string large enough to fit any "int" is 11 bytes wide.
Max: 9223372036854775807
Digits: 18
A "long" is 8 bytes.
A string large enough to fit any "long" is 20 bytes wide. 
```

*   请注意与 MaxLen< T, N >::StringLen 的值略有不同`std::numeric_limits< T >::digits10`，因为如果无法达到“9”，则前者不考虑数字。当然，如果您不想在某些情况下浪费一个字节，您当然可以使用它并简单地添加两个。

* * *

编辑：

有些人可能觉得很奇怪，包括`<climits>`. 如果您可以使用 C++11，您将不需要它，并且会获得额外的简单性：

```
#include    <iostream>
#include    <limits>

template< typename T, unsigned long N = std::numeric_limits< T >::max( ) >
class   MaxLen
{
public:
    enum
    {
        StringLen = MaxLen< T, N / 10 >::StringLen + 1
    };
};

template< typename T >
class   MaxLen< T, 0 >
{
public:
    enum
    {
        StringLen = 1
    };
}; 
```

现在你可以使用

```
MaxLen< short >::StringLen 
```

代替

```
MaxLen< short, SHRT_MAX >::StringLen 
```

很好，不是吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-07T21:54:32.000

*b*位的有符号或无符号整数*x*的最大十进制位数*d与数字 2^* *b*的十进制位数匹配。对于带符号的数字，必须为符号添加一个额外的字符。

 ****x*的小数位数可以计算为 log_10( *x* )，四舍五入。

*因此， x*的最大小数位数将为 log_10(2^ *b* ) = *b* * log_10(2) = *b* * 0.301029995663981，四舍五入。

如果*s是用于存储**x*的某种整数类型的字节大小（由*sizeof*运算符给出） ，则其大小*b*（以位为单位）将为*b* = *s* * 8。因此，十进制数字的最大位数*d*将是 ( *s* * 8) * 0.301029995663981，四舍五入。向上取整将包括截断（转换为整数）和加 1。

 ***当然，所有这些常量都必须加 1 才能计算最后的 0 字节（请参阅以下示例中的 IntegerString）。

```
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>

#define COMMON_LOG_OF_2 0.301029995663981

#define MAX_DECIMAL_DIGITS_UCHAR        ((unsigned) (sizeof (unsigned char     ) * 8 * COMMON_LOG_OF_2) + 1)
#define MAX_DECIMAL_DIGITS_USHORT       ((unsigned) (sizeof (unsigned short    ) * 8 * COMMON_LOG_OF_2) + 1)
#define MAX_DECIMAL_DIGITS_UINT         ((unsigned) (sizeof (unsigned int      ) * 8 * COMMON_LOG_OF_2) + 1)
#define MAX_DECIMAL_DIGITS_ULONG        ((unsigned) (sizeof (unsigned long     ) * 8 * COMMON_LOG_OF_2) + 1)
#define MAX_DECIMAL_DIGITS_ULONGLONG    ((unsigned) (sizeof (unsigned long long) * 8 * COMMON_LOG_OF_2) + 1)
#define MAX_DECIMAL_DIGITS_UINT128      ((unsigned) (sizeof (unsigned __int128 ) * 8 * COMMON_LOG_OF_2) + 1)

#define MAX_DECIMAL_DIGITS_CHAR         (1 + MAX_DECIMAL_DIGITS_UCHAR    )
#define MAX_DECIMAL_DIGITS_SHORT        (1 + MAX_DECIMAL_DIGITS_USHORT   )
#define MAX_DECIMAL_DIGITS_INT          (1 + MAX_DECIMAL_DIGITS_UINT     )
#define MAX_DECIMAL_DIGITS_LONG         (1 + MAX_DECIMAL_DIGITS_ULONG    )
#define MAX_DECIMAL_DIGITS_LONGLONG     (1 + MAX_DECIMAL_DIGITS_ULONGLONG)
#define MAX_DECIMAL_DIGITS_INT128       (1 + MAX_DECIMAL_DIGITS_UINT128  )

int main (void)
{
    char IntegerString[MAX_DECIMAL_DIGITS_INT + 1];

    printf ("MAX_DECIMAL_DIGITS_UCHAR     = %2u\n",MAX_DECIMAL_DIGITS_UCHAR    );
    printf ("MAX_DECIMAL_DIGITS_USHORT    = %2u\n",MAX_DECIMAL_DIGITS_USHORT   );
    printf ("MAX_DECIMAL_DIGITS_UINT      = %2u\n",MAX_DECIMAL_DIGITS_UINT     );
    printf ("MAX_DECIMAL_DIGITS_ULONG     = %2u\n",MAX_DECIMAL_DIGITS_ULONG    );
    printf ("MAX_DECIMAL_DIGITS_ULONGLONG = %2u\n",MAX_DECIMAL_DIGITS_ULONGLONG);
    printf ("MAX_DECIMAL_DIGITS_UINT128   = %2u\n",MAX_DECIMAL_DIGITS_UINT128  );

    printf ("MAX_DECIMAL_DIGITS_CHAR      = %2u\n",MAX_DECIMAL_DIGITS_CHAR     );
    printf ("MAX_DECIMAL_DIGITS_SHORT     = %2u\n",MAX_DECIMAL_DIGITS_SHORT    );
    printf ("MAX_DECIMAL_DIGITS_INT       = %2u\n",MAX_DECIMAL_DIGITS_INT      );
    printf ("MAX_DECIMAL_DIGITS_LONG      = %2u\n",MAX_DECIMAL_DIGITS_LONG     );
    printf ("MAX_DECIMAL_DIGITS_LONGLONG  = %2u\n",MAX_DECIMAL_DIGITS_LONGLONG );
    printf ("MAX_DECIMAL_DIGITS_INT128    = %2u\n",MAX_DECIMAL_DIGITS_INT128   );

    sprintf (IntegerString,"%d",INT_MAX);
    printf ("INT_MAX       = %d\n",INT_MAX);
    printf ("IntegerString = %s\n",IntegerString);

    sprintf (IntegerString,"%d",INT_MIN);
    printf ("INT_MIN       = %d\n",INT_MIN);
    printf ("IntegerString = %s\n",IntegerString);

    return EXIT_SUCCESS;
} 
```

编辑：

不幸的是，在将表达式计算为常量时，使用浮点可能会导致问题。我已经通过乘以 2 ^ 11 并除以 2 ^ 8 来修改它们，因此所有计算都应该由预处理器使用整数执行：

```
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>

#define LOG2_x_2_11 616 // log(2) * 2^11

#define MAX_DECIMAL_DIGITS_UCHAR        (((sizeof (unsigned char     ) * LOG2_x_2_11) >> 8) + 1)
#define MAX_DECIMAL_DIGITS_USHORT       (((sizeof (unsigned short    ) * LOG2_x_2_11) >> 8) + 1)
#define MAX_DECIMAL_DIGITS_UINT         (((sizeof (unsigned int      ) * LOG2_x_2_11) >> 8) + 1)
#define MAX_DECIMAL_DIGITS_ULONG        (((sizeof (unsigned long     ) * LOG2_x_2_11) >> 8) + 1)
#define MAX_DECIMAL_DIGITS_ULONGLONG    (((sizeof (unsigned long long) * LOG2_x_2_11) >> 8) + 1)
#define MAX_DECIMAL_DIGITS_UINT128      (((sizeof (unsigned __int128 ) * LOG2_x_2_11) >> 8) + 1)

#define MAX_DECIMAL_DIGITS_CHAR     (1 + MAX_DECIMAL_DIGITS_UCHAR    )
#define MAX_DECIMAL_DIGITS_SHORT    (1 + MAX_DECIMAL_DIGITS_USHORT   )
#define MAX_DECIMAL_DIGITS_INT      (1 + MAX_DECIMAL_DIGITS_UINT     )
#define MAX_DECIMAL_DIGITS_LONG     (1 + MAX_DECIMAL_DIGITS_ULONG    )
#define MAX_DECIMAL_DIGITS_LONGLONG (1 + MAX_DECIMAL_DIGITS_ULONGLONG)
#define MAX_DECIMAL_DIGITS_INT128   (1 + MAX_DECIMAL_DIGITS_UINT128  )

int main (void)
{
    char IntegerString[MAX_DECIMAL_DIGITS_INT + 1];

    printf ("MAX_DECIMAL_DIGITS_UCHAR     = %2zu\n",MAX_DECIMAL_DIGITS_UCHAR    );
    printf ("MAX_DECIMAL_DIGITS_USHORT    = %2zu\n",MAX_DECIMAL_DIGITS_USHORT   );
    printf ("MAX_DECIMAL_DIGITS_UINT      = %2zu\n",MAX_DECIMAL_DIGITS_UINT     );
    printf ("MAX_DECIMAL_DIGITS_ULONG     = %2zu\n",MAX_DECIMAL_DIGITS_ULONG    );
    printf ("MAX_DECIMAL_DIGITS_ULONGLONG = %2zu\n",MAX_DECIMAL_DIGITS_ULONGLONG);
    printf ("MAX_DECIMAL_DIGITS_UINT128   = %2zu\n",MAX_DECIMAL_DIGITS_UINT128  );

    printf ("MAX_DECIMAL_DIGITS_CHAR      = %2zu\n",MAX_DECIMAL_DIGITS_CHAR     );
    printf ("MAX_DECIMAL_DIGITS_SHORT     = %2zu\n",MAX_DECIMAL_DIGITS_SHORT    );
    printf ("MAX_DECIMAL_DIGITS_INT       = %2zu\n",MAX_DECIMAL_DIGITS_INT      );
    printf ("MAX_DECIMAL_DIGITS_LONG      = %2zu\n",MAX_DECIMAL_DIGITS_LONG     );
    printf ("MAX_DECIMAL_DIGITS_LONGLONG  = %2zu\n",MAX_DECIMAL_DIGITS_LONGLONG );
    printf ("MAX_DECIMAL_DIGITS_INT128    = %2zu\n",MAX_DECIMAL_DIGITS_INT128   );

    sprintf (IntegerString,"%d",INT_MAX);
    printf ("INT_MAX       = %d\n",INT_MAX);
    printf ("IntegerString = %s\n",IntegerString);

    sprintf (IntegerString,"%d",INT_MIN);
    printf ("INT_MIN       = %d\n",INT_MIN);
    printf ("IntegerString = %s\n",IntegerString);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-26T20:46:38.190

接受答案后（2 年以上）

以下分数 10/33 完全满足未填充`int8_t`、`int16_t`和`int32_t`的需求`int128_t`。只有 1 个`char`额外的`int64_t`。精确或大于 1 的所有整数大小直到`int362_t`. 除此之外可能超过1。

```
#include <limits.h>
#define MAX_CHAR_LEN_DECIMAL_INTEGER(type) (10*sizeof(type)*CHAR_BIT/33 + 2)
#define MAX_CHAR_SIZE_DECIMAL_INTEGER(type) (10*sizeof(type)*CHAR_BIT/33 + 3)

int get_int( void ) {
                                            //   + 1 for the \n of fgets()
  char draft[MAX_CHAR_SIZE_DECIMAL_INTEGER(long) + 1];  //**

  fgets(draft, sizeof draft, stdin);
  return strtol(draft, NULL, 10);
} 
```

* * *

**`fgets()`通常最好使用附加`char`的终止`'\n'`.

类似于[@R..](https://stackoverflow.com/a/10536254/2410359)但分数更好。

* * *

推荐在读取用户输入时使用大容量的 2x 缓冲区。有时用户会添加空格、前导零等。

```
 char draft[2*(MAX_CHAR_SIZE_DECIMAL_INTEGER(long) + 1)];
  fgets(draft, sizeof draft, stdin); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-03T12:20:43.563

您可以使用以 10 为底的对数来计算位数。在我的系统中，使用数字的位表示来计算以 2 为底的对数上限并没有显着提高速度。对数基数 10 + 1 的底给出了位数，我加 2 来说明空字符和符号。

```
#include <limits.h>
#include <stdio.h>
#include <math.h>

int main(void){
  printf("%d %d\n", INT_MAX, (int)floor(log10(INT_MAX)) + 3);

  return 0;
} 
```

另请注意，an 的字节数`int`可以是 2 或 4，并且仅在旧系统中为 2，因此您可以计算上限并在程序中使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-20T17:41:18.197

在 C++11 及更高版本中，您可以执行以下操作：

```
namespace details {
    template<typename T>
    constexpr size_t max_to_string_length_impl(T value) {
        return (value >= 0 && value < 10) ? 1                            // [0..9] -> 1
            : (std::is_signed<T>::value && value < 0 && value > -10) ? 2 // [-9..-1] -> 2
            : 1 + max_to_string_length_impl(value / 10);                 // ..-10] [10.. -> recursion
    }
}

template<typename T>
constexpr size_t max_to_string_length() { 
    return std::max(
        details::max_to_string_length_impl(std::numeric_limits<T>::max()),
        details::max_to_string_length_impl(std::numeric_limits<T>::min())); 
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-25T23:40:50.493

这是C版本：

```
#include <limits.h>

#define xstr(s) str(s)
#define str(s) #s
#define INT_STR_MAX sizeof(xstr(INT_MAX))

char buffer[INT_STR_MAX]; 
```

然后：

```
$ gcc -E -o str.cpp str.c
$ grep buffer str.cpp
char buffer[sizeof("2147483647")];

$ gcc -S -o str.S str.c
$ grep buffer str.S
    .comm   buffer,11,1 
```********

# asp.net-mvc-3 - .Doc 文件未包含在 ASP.NET Publish 中

> ID：10536209
> 
> 赞同：4
> 
> 时间：2012-05-10T14:29:36.850
> 
> 标签：asp.net-mvc-3, publish

我有一个 ASP.NET 4.0 MVC 3.0 网站，我已经构建并发布到我机器上的一个目录中，准备通过 FTP 连接到我的托管站点。我有两个 .doc 文件，它们存在于 Content 文件夹下的文件夹中。当他们在自己的文件夹中时，发布时不包含该文件夹。然后我将它们包含在 Content 下的 Images 文件夹中。当我发布时，Images 文件夹中的所有文件都包括在内，除了两个 .doc 文件。

为什么 .doc 文件被忽略？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:55:31.203

我仔细研究了这个，我很确定它与文件的构建操作有关。如果将 Word 文档和 Excel 文档等文件添加到项目中，Visual Studio 默认不会将它们包含在发布中。但是，默认情况下它将包括图像文件和其他类似内容。要获取要包含在发布中的文件，请右键单击 Visual Studio 中的文档并选择属性。将构建操作设置为“内容”，您应该一切顺利。

# asp.net - 项目解决方案

> ID：10536211
> 
> 赞同：0
> 
> 时间：2012-05-10T14:29:44.273
> 
> 标签：asp.net

我希望你们能帮助我为客户提出一个新的解决方案。该项目的范围详细说明了从我这里获取数据。所以我创建了一个用户界面，用户可以在其中选择他们想要的数据，然后我会创建一个 xml 文件，该文件会通过电子邮件自动将其发送给用户。我将用户限制为一次只能选择 5 个项目，以便该工具不会超时 b/c xml 中有很多数据需要根据选择生成。现在用户要求不限于 5 个，并且希望能够选择他/她想要的数量。我的问题是有没有其他解决方案来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:45:42.923

重用当前解决方案的一个小技巧是编写一个包装器，以便接受任意数量的项目作为选择，然后按 5 块（或您选择的任何限制）处理它们

# actionscript-3 - Flash按钮隐藏一个DIV AS3

> ID：10536214
> 
> 赞同：0
> 
> 时间：2012-05-10T14:29:57.067
> 
> 标签：actionscript-3, flash-cs4

我需要一些关于 Flash 横幅的帮助。我需要在横幅中做一个隐藏 div 的按钮，我在 AS2 中找到了一种方法，但我需要使用 AS3，我根本不知道 ActionScript，所以我需要你的帮助。

我找到了这段代码，不幸的是它在 AS2 中：

```
on (release) {
import flash.external.ExternalInterface;
ExternalInterface.call("hideDiv", "operator");
}

<script type="text/javascript">
function hideDiv(id)
{
   document.getElementById(id).style.display = 'none';
}
</script> 
```

我的按钮实例名称是“closeBt”，我想隐藏 div“#flashcontainer”

请帮帮我。

更新

我的 AS3 代码

```
 import flash.external.ExternalInterface;
import flash.events.MouseEvent;

var myStage:Stage = this.stage;
myStage.scaleMode = StageScaleMode.NO_SCALE;
myStage.align = StageAlign.TOP_LEFT;

function resizeDisplay(event:Event):void{

    var swfWidth:int = myStage.stageWidth;
    var swfHeight:int = myStage.stageHeight;

    var flagaYPos:Number = swfHeight - flaga.height;
    var flagaXPos:Number = swfWidth - flaga.width;

    flaga.y = 40.75;
    flaga.x = -31.4;

}

myStage.addEventListener(Event.RESIZE, resizeDisplay);

closeBt.addEventListener(MouseEvent.CLICK, clickHandler);

trace("Button has been Clicked");

function clickHandler(e:MouseEvent):void {
    if(ExternalInterface.available)
    ExternalInterface.call("hideDiv", "operator");
} 
```

和我的 html 正文

```
<body style="margin:0; padding:0">
<script>
function hideDiv("operator")
{
   document.getElementById("operator").style.display = 'none';
}
</script> 
<div id="operator">
<!--url's used in the movie-->
<!--text used in the movie-->
<!-- saved from url=(0013)about:internet -->
<script language="JavaScript" type="text/javascript">
    AC_FL_RunContent(
        'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0',
        'width', '100%',
        'height', '100%',
        'src', 'Kopia baner01',
        'quality', 'high',
        'pluginspage', 'http://www.adobe.com/go/getflashplayer',
        'align', 'top',
        'play', 'true',
        'loop', 'true',
        'scale', 'noscale',
        'wmode', 'transparent',
        'devicefont', 'false',
        'id', 'Kopia baner01',
        'bgcolor', '#ffffff',
        'name', 'Kopia baner01',
        'menu', 'true',
        'allowFullScreen', 'false',
        'allowScriptAccess','sameDomain',
        'movie', 'Kopia baner01',
        'salign', 't'
        ); //end AC code
</script>
<noscript>
        <object style="display: none" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="100%" height="100%" id="Kopia baner01" align="top">
        <param name="allowScriptAccess" value="sameDomain" />
        <param name="allowFullScreen" value="false" />
        <param name="movie" value="Kopia baner01.swf" /><param name="quality" value="high" /><param name="scale" value="noscale" /><param name="salign" value="t" /><param name="wmode" value="transparent" /><param name="bgcolor" value="#ffffff" />  <embed src="Kopia baner01.swf" quality="high" scale="noscale" salign="t" wmode="transparent" bgcolor="#ffffff" width="100%" height="100%" name="Kopia baner01" align="top" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
        </object>

</noscript>
    </div>
</body> 
```

AS 在时间线上，我在 AS、AS2 或 AS3 上没有任何技能，我想用横幅隐藏 div，所以关闭 btn 会关闭横幅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:25:01.283

在 AS3 中，它看起来像这样：

```
import flash.external.ExternalInterface;
import flash.events.MouseEvent;

closeBt.addEventListener(MouseEvent.CLICK, clickHandler);

function clickHandler(e:MouseEvent):void {
    ExternalInterface.call("hideDiv", "operator");
} 
```

此代码假定您将脚本添加到时间线。如果您使用的是文档类，那么您将在“函数”之前添加一个“私有”修饰符。你提到你在 AS3 方面的经验不是很丰富，所以时间线将是现在要走的路。但是，如果您对 AS3 很认真，请务必查看课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:25:10.563

```
private function init():void
{
   closeBtn.addEventListener(MouseEvent.CLICK,onClick);
}

private function onClick(e:MouseEvent):void
{
    if(ExternalInterface.available)
        ExternalInterface.call("hideDiv","operator");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:25:44.717

试试这段 AS3 代码：

```
import flash.external.ExternalInterface;
closeBt.addEventListener(MouseEvent.CLICK, clickHandlerButton);
private function clickHandlerButton(e:MouseEvent):void{
    if(ExternalInterface.available) ExternalInterface.call("hideDiv","flashcontainer");
} 
```

# javascript - 使用 javascript 更改 URL

> ID：10536215
> 
> 赞同：0
> 
> 时间：2012-05-10T14:30:00.657
> 
> 标签：javascript, html, specifications

我知道更改 URL 是可能的，但我认为它只允许用于哈希标签后面的部分。（我将它用于 ajax 加载的内容。）

现在我看到一些网站甚至在不使用哈希标签的网站上更改了域之后的 URL。这在所有浏览器中都可能吗？我曾经读到，在未来的一些 html/js 规范中提出了这样的功能，但仍然没有被批准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:31:54.633

他们正在使用历史 API：

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

这在ajax中很常见。

请注意，调试起来并不容易和痛苦。

如果你喜欢，你可以阅读这个单页网站的来源：http: [//dystroy.org/re7210/](http://dystroy.org/re7210/)

# ruby-on-rails - rails update_attributes 方法返回 nil

> ID：10536218
> 
> 赞同：1
> 
> 时间：2012-05-10T14:30:10.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

这是代码：

```
def update
  if @user.update_attributes(params[:user])
    redirect_to my_account_path
  else
    redirect_to account_path
  end
end 
```

`@user.update_attributes`应该返回`true`或者`false`当验证失败但它返回时`nil`。

使用 Rails 3.1.2 和 Ruby 1.9.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:50:45.377

模型上的 attr_accessible 设置？

[http://apidock.com/rails/ActiveRecord/Persistence/update_attributes](http://apidock.com/rails/ActiveRecord/Persistence/update_attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:02:50.887

有时当我遇到这样的问题时，我会将更改更新`update_attributes`为`update_attributes!`- 这可能会强制引发立即异常，并可以准确指出返回的值是错误保存的原因。

如果未保存数据，它*应该返回 false。*[根据文档](http://apidock.com/rails/v3.2.1/ActiveResource/Base/update_attributes)：

> 如果由于资源无效而导致保存失败，则将返回 false。

这是来自 rails 源代码的片段（请注意，在幕后`update_attibutes`调用`save`）：

```
def save(*)
  begin
    create_or_update
  rescue ActiveRecord::RecordInvalid
    false
  end
end 
```

因此，它专门返回`false`，而不是`nil`在保存记录时出现问题。

# java - 以编程方式获取 Maven 工件

> ID：10536221
> 
> 赞同：14
> 
> 时间：2012-05-10T14:30:20.653
> 
> 标签：java, api, maven, dependencies, aether

我正在寻找可用于从远程存储库检索 Maven 工件的 Java API。到目前为止，我已经找到了[Eclipse Ather ，但它看起来对我的需求来说过于复杂，所以我正在寻找更简单的东西。](https://projects.eclipse.org/projects/technology.aether)

我需要的是：

*   我必须指定远程 Maven 存储库的位置
*   我喜欢根据它的 groupId + artifactId + version 来获取一个工件
*   API 必须提供工件的当前远程版本（考虑定期构建的 SNAPSHOT 工件，因此它们在其版本中具有生成的部分）
*   返回工件的位置，首选 HTTP URL（我将使用例如 Apache HTTP 客户端自行获取）
*   可选地检索作为所请求工件的依赖项的工件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T08:01:45.377

[jcabi-aether](http://aether.jcabi.com/) may help you (I'm a developer). It's a simple wrapper around Aether, that lets you find all transitive dependencies of a Maven artifact:

```
File repo = this.session.getLocalRepository().getBasedir();
Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

Thus, all you need to provide as an input is:

*   Local repo location, as a directory name
*   List of repote repositories (`MavenProject#getRemoteRepositories()`)
*   Maven coordinates of the artifact
*   Maven scope to look for

Absolute paths of every dependency found can be obtained as `Artifact#getPath()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:38:22.847

```
 public List<Artifact> findDependencies(Artifact artifact) throws DependencyCollectionException {

    CollectRequest collectRequest = new CollectRequest();
    collectRequest.setRoot( new Dependency(artifact, "" ) );
    collectRequest.addRepository(repository);

    final MavenServiceLocator locator = new MavenServiceLocator();
    locator.addService( RepositoryConnectorFactory.class, FileRepositoryConnectorFactory.class );
    locator.addService( RepositoryConnectorFactory.class, WagonRepositoryConnectorFactory.class );
    locator.setServices( WagonProvider.class, new WagonProvider() {
        public Wagon lookup(String roleHint) throws Exception {
            if (Arrays.asList("http", "https").contains(roleHint)) {
                return new LightweightHttpWagon();
            }
            return null;
        }

        public void release(Wagon wagon) {

        }
    });

    final RepositorySystem system = locator.getService(RepositorySystem.class);
    MavenRepositorySystemSession session = new MavenRepositorySystemSession();

    session.setLocalRepositoryManager( system.newLocalRepositoryManager(localRepository) );
    session.setTransferListener( new LoggingTransferListener() );
    session.setRepositoryListener( new LoggingRepositoryListener() );

    final List<Artifact> artifacts = new ArrayList<Artifact>();

    system.collectDependencies(session, collectRequest).getRoot().accept( new DependencyVisitor() {
        public boolean visitEnter(DependencyNode dependencyNode) {
            artifacts.add(dependencyNode.getDependency().getArtifact());
            return true;
        }

        public boolean visitLeave(DependencyNode dependencyNode) {
            return true;
        }
    });
    return artifacts;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:01:53.737

Aether jest 实际上非常简单和优雅的方式来做到这一点。这是 Maven 3 的主要增强功能之一，许多人都在寻找它。查看[这个](http://www.sonatype.com/people/2011/01/how-to-use-aether-in-maven-plugins/)以获取一些可以使用的初始代码。我不记得有一种方法可以获取工件的确切 URL，但 AFAIR 支持其他要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:07:25.990

你试过使用[Apache Ivy](http://ant.apache.org/ivy/)吗？它支持获取 Maven 依赖项。

这个用例的文档有点稀疏，但我在[这里](https://cwiki.apache.org/IVY/programmatic-use-of-ivy.html)找到了一些关于 Ivy 编程使用的信息。

# magento - Magento平板产品

> ID：10536222
> 
> 赞同：5
> 
> 时间：2012-05-10T14:30:21.997
> 
> 标签：magento

尝试启用和重新索引产品平面数据时 - 从 magento 收到错误

> 平面目录模块限制为 64 个可过滤和/或可排序的属性。目前有521个。请减少可过滤/可排序属性的数量以使用此模块。

我无法理解这意味着什么以及 magento 从哪里获得这些值。在属性中，我只有 321 个不同的属性，所以 magento 从哪里获得当前使用的 521 的值以及其中 64 个的限制？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:03:27.457

当`Mage_Catalog_Model_Resource_Product_Flat_Indexer::prepareFlatTable()`您的产品超过

```
<global>
    <catalog>
        <product>
            <flat>
                <max_index_count>64</max_index_count>
            </flat>
        </product>
    </catalog>
</global> 
```

索引。这个最大值通常在`app/code/core/Mage/Catalog/etc/config.xml`默认 mySQL 安装允许的 64 个键的最大数量中定义并匹配，在它们出现错误之前

```
ERROR 1069: Too many keys specified. Max 64 keys allowed 
```

您的问题不是您的产品有多少属性，而是其中有多少是*可过滤和/或可排序的（当然，您的**所有*属性除外）。

跟踪`Mage_Catalog_Model_Resource_Product_Flat_Indexer::getFlatIndexes()`以了解 Magento 如何达到总共 521 个索引。

为了快速检查，您还可以查看您的`catalog_eav_attribute`表并检查有多少属性是可过滤的 ( `is_filterable = 1`) 和/或可排序的 ( `used_for_sort_by`= 1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T14:47:13.703

您收到的错误来自以下文件：

/app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Product/Flat|Indexer.php

似乎此限制是在位于以下文件中的目录 config.xml 文件中设置的：

/app/code/core/Mage/Catalog/etc|config.xml

搜索“max_index_count”，您会发现该值设置为 64。

我不确定为什么会有这个限制，但我不得不想象他们有充分的理由将其设置为 64。发生）你可以改变这个值，看看会发生什么。

您拥有的索引数（521）来自 Indexer.php 文件中的 getFlatIndexes 函数。我猜你是 521 因为你有你的 321 + Magento 默认使用的一些额外的。

如果我不得不猜测，这个限制是为了防止平面目录表在水平方向上变得太大。我猜当表格太大时会出现速度问题。

# sql-server-ce - 带有客户端证书的 SqlCeReplication

> ID：10536223
> 
> 赞同：0
> 
> 时间：2012-05-10T14:30:23.260
> 
> 标签：sql-server-ce, replication, ssl-certificate, merge-replication

我们有很多设备使用 SQL CE 合并复制（通过 SSL 并配置了基本身份验证）来同步他们的数据库。现在我们希望我们的客户另外使用客户证书来标识自己，但我们不确定是否支持此配置。

在 Web 配置向导中，您可以要求客户端提供证书：

![SQL Web 配置向导](../Images/97f7267aa7565c04a4c0ca2cd6d8c69a.png)

但是[SqlCeReplication 类](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcereplication%28v=vs.80%29.aspx)上没有允许从文件或证书存储中指定证书的属性。因此，复制尝试失败并出现错误：

> 向运行 IIS 的计算机发送数据的请求失败。有关详细信息，请参阅 HRESULT。NativeError：28037 HResult：0x80072F0C

目前，我非常不确定 SQL CE 合并复制是否支持客户端证书。[MSDN](http://msdn.microsoft.com/en-us/library/ms152511.aspx)上有三个页面非常清楚地说明：

> 合并复制的 Web 同步支持使用服务器证书，但不支持使用客户端证书。

但是，为什么 Web 同步向导会提供该选项呢？如果有人可以肯定地告诉我，客户端证书是否可能，我会非常高兴。

# asp.net-mvc - 如何将我自己的模型类与 MVC 中的 EF 实体类结合使用？

> ID：10536225
> 
> 赞同：1
> 
> 时间：2012-05-10T14:30:28.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, ado.net

所以我是 MVC 的新手，现在正在使用 MVC3 和实体框架。由于数据库已经存在，我目前正在使用模型/模式第一种方法。因此，我创建了我的 ADO.NET 实体数据模型 (.edmx)，并且在我的 MVC 应用程序中拥有所有需要的实体。到目前为止，这一切都很好。

但是，假设我的一个实体是“客户”实体。我可以看到自动生成的`partial`类继承自`EntityObject`MyEntites.Designer.cs。此时我想向我的 MVC 模型添加一些自定义业务逻辑。自然地，我相信答案是使用我自己`partial`在名为“客户”的模型中创建的类。

在问这个问题之前我做了很多搜索，看到关于 POCO、T4 模板、修改自动生成的代码等的各种信息，我迷路了。将我自己的业务逻辑和自定义代码添加到 EF 自动生成的实体中是不是很痛苦？我当然不想一遍又一遍地修改自动生成的代码。

我需要一个直截了当的解释来让众所周知的“灯泡”亮起来，然后我就可以从那里起飞了。有人可以帮我回答如何做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:32:50.793

将您自己的类代码保存在不同的文件中，但使用相同的类和命名空间。这将有助于避免您的代码被 T4 代码生成器覆盖。

[扩展实体框架生成的类型](http://msdn.microsoft.com/en-us/library/dd456844.aspx)

您还可以使用元类向生成的类添加属性：

[向生成的类添加属性](http://ardalis.com/adding-attributes-to-generated-classes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T12:39:52.470

这些代码是自动生成的，并将在每次模型更新或更改时被覆盖。

您可以通过扩展模型来实现您所需要的。假设 EF 为您生成了以下实体类：

```
namespace YourSolution
{
    using System;
    using System.Collections.Generic;

    public partial class News
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }        
        public int UserID { get; set; }

        public virtual UserProfile User{ get; set; }
    }
} 
```

并且您想要做一些工作来保留您的数据注释和属性。因此，请按照以下步骤操作：

首先，在某个地方（无论你想要什么，但最好是在`Models`）添加两个类，如下所示：

```
namespace YourSolution
{
    [MetadataType(typeof(NewsAttribs))]
    public partial class News
    {
         // leave it empty.
    }

    public class NewsAttribs
    {            
        // Your attribs will come here.
    }
} 
```

然后将您想要的属性和属性添加到第二类 -`NewsAttribs`这里。：

```
public class NewsAttrib
{
    [Display(Name = "News title")]
    [Required(ErrorMessage = "Please enter the news title.")]
    public string Title { get; set; }

    // and other properties you want...
} 
```

**笔记：**

1）生成的实体类的命名空间和你的类**必须相同**——这里`YourSolution`。

2）您的第一个类**必须**是`partial`并且其名称**必须**与 EF 生成的类相同。

经历这个，你的属性再也不会丢失了......

# java - Java - Trident 动画库 - 容器调整大小时反射插值

> ID：10536229
> 
> 赞同：1
> 
> 时间：2012-05-10T14:30:41.857
> 
> 标签：java, swing, animation

我对 .js 很陌生`Trident Animation Library`，但我设法将它用于我的动画并且效果非常好。

我的要求是基本上`JComponent`从容器的一个角到容器的中间为 a 设置动画。

下面是我的伪代码

```
this.setLayout(null);    
JButton button =  new JButton();
button.setLocation(new Point (0,0));
Point center =  new Point(getWidth()/2, getHeight()/2);
Timeline timeline = new Timeline(notification.getComponent());
timeline.addPropertyToInterpolate("location", button .getLocation(), center );
timeline.setDuration(1000);
timeline.play(); 
```

现在，当我的容器调整大小时，容器的中心会发生变化。例如：如果容器的初始中心是 (100,100) 并且容器调整大小后新中心是 (200,200)。

有什么方法可以在插值时反映新中心，以便组件移动到 (200, 200) 而不是 (100, 100)？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:41:23.470

这是我首先想到的事情：

在开始存储当前窗口/面板大小。在每个时间线上“勾选”检查当前窗口/面板大小是否与您开始使用的不同（即面板已调整大小）。如果它已调整大小，请停止当前时间线并基于新面板中心创建具有新路径的新时间线。

# javascript - Firefox 中的模态对话框消息被截断

> ID：10536240
> 
> 赞同：0
> 
> 时间：2012-05-10T14:31:12.307
> 
> 标签：javascript, jquery, asp.net

我正在使用模态对话框提示用户消息。它在 IE 中运行良好，但在 Firefox 中只显示第一行。我怎样才能解决这个问题。这就是我的消息的格式。

```
 var modal = "<div id='modal_pop'><table><tr><td> "                    
           + "Please check you have a valid value to proceed.<br> Change the value if possible. Value should be valid to proceed further.<br>"
           + "Value should not be a number or a special case character<br>
Make changes and save the work before exiting it.<br>  " 
           + "Click logoff now or continute using the application.</td> </tr> </table></div>"; 
```

这是 jQuery 对话框：

```
var showPopup = function() {
            $(modal).dialog({
                buttons: {
                    "Test": function() {
                                        //ABC
                                      },
                    "Test1": function() {
                                        //XYZ
                                     }
                },
                 modal: true,
             width: 430,
         height: 100,
         resizable:'yes',
         scroll:'no'
               });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:34:21.870

尝试将宽度设置为自动`width: 'auto'`并检查。我认为文本由于溢出而被删减。

# kernel - 企业级 VMware 管理程序、ESX、ESXi，它们是用什么编程语言编写的？

> ID：10536241
> 
> 赞同：0
> 
> 时间：2012-05-10T14:31:14.803
> 
> 标签：kernel, vmware, virtualization

我没有在任何地方看到这个问题/答案，所以这里是：有人知道 VMware ESX/ESXi 虚拟机管理程序是用什么编程语言（或语言）编程的吗？我对管理程序代码以及高可用性、DRS、容错等功能中的代码感兴趣。谢谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T18:50:11.060

VMware ESX/ESXi 虚拟机管理程序、内核和设备驱动程序是用 C 编写的。管理层通常是用 C++ 编写的，但是有很多 C。另外还有很多 bash、perl 和 python 脚本。

# tfs - 使用 tf.exe 获取不同工作区的代码

> ID：10536246
> 
> 赞同：4
> 
> 时间：2012-05-10T14:31:22.823
> 
> 标签：tfs, continuous-integration, tf-cli

我正在使用一个本地工作区在我的机器上开发代码，以从 TFS 获取和签入代码。我还在构建一个使用我的机器并需要获取最新代码的自动化 CI 应用程序。我使用以下内容获取 CI 应用程序的最新信息：

```
tf get $/abc/abc /recursive /all 
```

我想使用不同的本地工作区（CI 工作区）来获取最新信息以避免与开发代码冲突。但是使用 tf，我无法在使用 get 命令时指定工作区，而且[MSDN 文档](http://msdn.microsoft.com/en-us/library/fx7sdeyf.aspx)也没有显示这样做。如何使用“tf get”来指定我想要使用的工作空间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:41:14.707

在 之前`tf get`，将目录更改为 CI 工作区中映射的目录之一。tf get 将使服务器和工作区基于映射驱动器的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T07:54:31.257

我还创建了一个自动构建过程，并在此过程中执行“干净”获取，即重命名当前本地工作文件夹，然后在执行完整构建和单元测试之前将文件从 tfs 重新获取到工作文件夹的干净副本. 我在单独的文件夹中使用 Nant 脚本，因此不能只更改目录（更改 Nant 中的当前目录不适用于此问题）。我的解决方案是创建并运行一个批处理文件。下面的示例 Nant 脚本：

```
<!--do a clean get to the solution folder-->
    <target name="clean_get">

    <!--Create the batch file-->
    <property name ="batch.file" value="clean_get.bat" />
    <echo file="${batch.file}" append="True">md ${workfolder.path}</echo>
    <echo file="${batch.file}" append="True">${environment::newline()}cd ${workfolder.path}</echo>
    <echo file="${batch.file}" append="True">${environment::newline()}tf get $/${project.name}  /recursive</echo>

    <!--Run the batch file-->
    <exec program="clean_get.bat" >
    </exec>

<!--Delete the batch file - we're done with it-->
<delete file="${batch.file}" failonerror="false" /> 
```

# android - 在另一个 android 应用程序中重用依赖于 Application 类的子类的活动

> ID：10536249
> 
> 赞同：0
> 
> 时间：2012-05-10T14:31:23.663
> 
> 标签：android

我有一个 android 应用程序，其中我继承了 Application 类（定义 MyApplication），以及一些具有 MyApplication 实例作为成员的活动，并依赖它来获取一些全局配置变量和函数。

现在，如果我想在另一个 Android 应用程序中重用一个或多个活动怎么办？我想我可以将要在两个应用程序中共享的活动放在一个 android 库项目中，但是如果我在我的新应用程序中也继承 Application 类会发生什么？

两个不同的Application子类的两个不同的实例能否同时存在，会不会有什么麻烦？我应该考虑一种完全不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:41:51.803

是的，这行不通。

* * *

**解决方案**（用于创建一个非常健壮的框架）

* * *

1.  使用活动创建您的图书馆。
2.  创建一个你的应用程序类应该实现的接口。说，你把它命名为：MyInterface
3.  现在每次获得应用程序时，将其转换为 MyInterface，并调用所需的函数。

* * *

换句话说，每个使用这个库的应用程序都应该创建应用程序类来实现`MyInterface`

# c++ - 3D 空间中的拉格朗日插值

> ID：10536259
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:32:11.090
> 
> 标签：c++, visual-studio, opengl, 3d, interpolation

有没有人实现过拉格朗日插值的工作算法，在三维空间中工作，通过三个或更多点，可以通过 Visual Studio 以某种方式绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:09:07.843

理论： [http ://www.youtube.com/watch?feature=iv&annotation_id=annotation_973360&src_vid=_zK_KhHW6og&v=anbLwKsESew](http://www.youtube.com/watch?feature=iv&annotation_id=annotation_973360&src_vid=_zK_KhHW6og&v=anbLwKsESew)

线性插值示例：[http ://www.youtube.com/watch?feature=iv&annotation_id=annotation_973360&src_vid=_zK_KhHW6og&v=anbLwKsESew](http://www.youtube.com/watch?feature=iv&annotation_id=annotation_973360&src_vid=_zK_KhHW6og&v=anbLwKsESew)

二次插值示例：[http ://www.youtube.com/watch?src_vid=anbLwKsESew&annotation_id=annotation_118813&v=QWvgMUZ5rqs&feature=iv](http://www.youtube.com/watch?src_vid=anbLwKsESew&annotation_id=annotation_118813&v=QWvgMUZ5rqs&feature=iv)

# c - 如何知道我从哪里启动

> ID：10536261
> 
> 赞同：4
> 
> 时间：2012-05-10T14:32:22.030
> 
> 标签：c, linux, linux-kernel, kernel

我开发了一个应用程序，可以在引导磁盘为**'/dev/nftla1'**或**'dev/hdc1' 的**多个平台上运行。Grub 引导加载程序具有此信息。

但是一旦内核接管并且应用程序开始运行，它就变得无关紧要了。但是，在我主要在**'C'**中的应用程序中，我想知道引导的来源，因为在这些平台上访问文件的方式不同。

我的问题是：是否有系统命令或您知道的任何技巧可以帮助我实现目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:49:15.730

您可以从 grub 传递内核引导选项，然后检查它们。

```
cat /proc/cmdline
BOOT_IMAGE=/boot/vmlinuz-2.6.32-33-generic root=UUID=3c231d1a-b6cb-4526-95fe-eb8984c7a91a ro quiet splash 
```

[更多信息](https://superuser.com/a/49749)。

**更新：** 您可以使用此 C 代码解析`/proc/cmdline`：

```
#include <stdio.h>                                                                                                                                            
#include <stdlib.h>                                                                                                                                           
#include <string.h>                                                                                                                                           

int parse_option(const char *line, const char *option, char *value, size_t size)                                                                              
{                                                                                                                                                             
    const char *p0, *p1;                                                                                                                                      
    int len;                                                                                                                                                  

    p0 = strstr(line, option);                                                                                                                                
    if (!p0)                                                                                                                                                  
        return 0;                                                                                                                                             
    p0 += strlen(option);                                                                                                                                     
    p1  = strchr(p0, ' ');                                                                                                                                    
    if (!p1)                                                                                                                                                  
       p1 = p0 + strlen(p0);                                                                                                                                  
    len = p1 - p0;                                                                                                                                            
    if (len > size - 1)                                                                                                                                       
        len = size - 1;                                                                                                                                       
    memcpy(value, p0, len);                                                                                                                                   
    value[len] = '\0';                                                                                                                                        
    return len;                                                                                                                                               
}

void get_cmdline_option(const char *option, char *value, size_t size)                                                                                         
{                                                                                                                                                             
    FILE  *fp;                                                                                                                                                
    char  *line = NULL;                                                                                                                                       
    size_t len = 0;                                                                                                                                           
    size_t read;                                                                                                                                              

    if (!size)                                                                                                                                                
        return;                                                                                                                                               
    *value = '\0';                                                                                                                                            
    fp = fopen("/proc/cmdline", "r");                                                                                                                         
    if (fp == NULL)                                                                                                                                           
         return;                                                                                                                                              
    while ((read = getline(&line, &len, fp)) != -1) {                                                                                                         
        printf("%s", line);                                                                                                                                   
        if (parse_option(line, option, value, size))                                                                                                          
            break;                                                                                                                                            
    }                                                                                                                                                         
    fclose(fp);                                                                                                                                           
    if (line)                                                                                                                                                 
        free(line);
    return;                                                                                                                                                   
}                                                                                                                                                             

int main(int argc, char **argv)                                                                                                                               
{                                                                                                                                                             
    char root[128];                                                                                                                                           
    get_cmdline_option("root=", root, sizeof(root));                                                                                                          
    printf("root='%s'\n", root);                                                                                                                              
    return 0;                                                                                                                                                 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:38:15.190

检查`/`安装位置。

```
> mount | grep ' / '
/dev/sda1 on / type ext4 (rw,errors=remount-ro) 
```

（实际上，根据您的描述，我想您应该查看正在从中读取的目录的安装位置。那不一定是引导驱动器。）

```
> df -h /tmp/
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             113G   13G   95G  12% / 
```

**编辑**

您正在使用 rootfs，这意味着上述内容对您没有帮助。（这也意味着我更不明白为什么你需要找出你从哪里启动，但让我们把它放在一边。）

亚历山大已经指出`/proc/cmdline`。为了完整起见，我想我会提供另一种选择：您可以查看引导消息：

```
> dmesg | grep mounted
[    1.964952] EXT4-fs (sda1): mounted filesystem with ordered data mode 
```

（请注意，在上面的`df`命令中，您应该将 替换为`/tmp/`您正在读取的目录。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T02:11:39.670

你可以得到你正在寻找的下`/proc/mounts`

例如：

```
$ grep \ /\  /proc/mounts 
rootfs / rootfs rw 0 0
/dev/disk/by-uuid/<uuid> / ext4 rw,noatime,user_xattr,barrier=1,data=ordered 0 0 
```

而不是`/dev/disk/by-uuid/<uuid>`, 它可以是`/dev/disk/by-label/<label>`,`/dev/disk/by-id/<id>`或`/dev/disk/by-path/<path>`

进而

```
$ readlink /dev/disk/by-uuid/<uuid>
../../sda3 
```

希望以上内容对您的应用程序有用。

# xcode - 动态链接文件

> ID：10536264
> 
> 赞同：1
> 
> 时间：2012-05-10T14:32:30.030
> 
> 标签：xcode, macos, cocoa

我们有一个 Mac OS X 应用程序，可以标记系统周围的各种文件夹和文件。如果您单击这些“书签”文件中的任何一个，它将打开。

问题：当这些文件之一被重命名时，应用程序无法再找到它们。

问题：我们如何动态链接这些文件，以便即使在 move 或 rename 之后它们仍然可以工作？像硬链接或别名？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:01:25.443

[请参阅访问文件和目录](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/AccessingFilesandDirectories/AccessingFilesandDirectories.html)的“使用书签定位文件”部分。

# powershell - Powershell：在函数中定义详细开关

> ID：10536282
> 
> 赞同：13
> 
> 时间：2012-05-10T14:33:16.287
> 
> 标签：powershell, powershell-2.0

参考[这个](http://blogs.msdn.com/b/powershell/archive/2007/02/25/supporting-whatif-confirm-verbose-in-scripts.aspx)链接，我试图在我的脚本中引入详细模式。

当我有这样定义的函数时 -

```
function TestVerbose
{
    param(
        [switch]$verbose,
        [Parameter(Mandatory = $True)] 
        $p1
    )

    if($verbose)
    {
     Write-Verbose "Verbose Mode"
    }
}

Get-Help TestVerbose 
```

我收到以下错误 -

> Get-Help：为命令定义了多次名为“Verbose”的参数。在 line:12 char:9 + Get-Help <<<< TestVerbose + CategoryInfo : MetadataError: (:) [Get-Help], MetadataException + FullyQualifiedErrorId : ParameterNameAlreadyExistsForCommand,Microsoft.PowerShell.Commands.GetHelpCommand

**但是，**如果我像这样定义函数[删除参数强制属性]，它工作正常

```
function TestVerbose
{
    param(
        [switch]$verbose,
        $p1
    )
    if($verbose)
    {
     Write-Verbose "Verbose Mode"
    }    
}

Get-Help TestVerbose 
```

知道为什么会有这种行为吗？我想保留强制开关并希望用户像这样执行我的功能 -

> TestVerbose -详细

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T15:05:22.120

看来您正在使用 PoweShell v2，其中保留了 Verbose（以及调试、whatif 等），并自动为您提供了它们的功能。该功能已经存在，而不是编写您自己的“详细”检测开关。在详细的情况下，您不必在参数声明中指定它，其他参数如 whatif 需要特殊的语法。

```
C:\Users\james> function testverbose{
>>     param(
>>         [Parameter(Mandatory = $True)]
>>         $bar
>>     )
>>
>>     Write-Verbose "VERBOSE!"
>>     $bar
>> }
>>
C:\Users\james> testverbose -bar "woot"
woot
C:\Users\james> testverbose -bar "woot" -Verbose
VERBOSE: VERBOSE!
woot 
```

# grails - 如何使用外部服务作为 Grails 应用程序配置的来源？

> ID：10536288
> 
> 赞同：0
> 
> 时间：2012-05-10T14:33:42.560
> 
> 标签：grails, configuration, groovy

[Grails 文档的第 3.4 节](http://grails.org/doc/latest/guide/conf.html#configExternalized)说 Grails 应用程序可以从外部源进行配置：

```
grails.config.locations = [
    "classpath:${appName}-config.properties",
    "classpath:${appName}-config.groovy",
    "file:${userHome}/.grails/${appName}-config.properties",
    "file:${userHome}/.grails/${appName}-config.groovy" ] 
```

此外，可以通过指定一个作为配置脚本的类来加载配置：

```
grails.config.locations = [com.my.app.MyConfig] 
```

我的问题是：

1.  您能否举一个 MyConfig 类实现的示例？从文档中不是很清楚。
2.  如果我想使用一些外部 JSON REST 服务作为我的配置数据的来源，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:22:46.063

回答第二个问题：您可以在 BootStrap.groovy init 闭包中执行此操作，因为基本上，它允许您执行任何代码：

```
// Inject grails app
def grailsApplication

def init = { servletContext ->
    def externalValue = getItUsingRest(someUrl)
    grailsApplication.config.my.custom.var = externalValue
} 
```

根据您使用的 grails 版本，您可能需要使用

```
org.codehaus.groovy.grails.commons.ConfigurationHolde.config 
```

改为进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:00:22.477

您的应用程序配置实际上可以是一个 Groovy 脚本。因此，任何看起来像您的 Config.groovy 的类都可以充当配置类。在我们的项目中，我们倾向于将配置保留在 grails 应用程序之外，以便可以在不重新编译所有内容的情况下配置应用程序。

也许[我的这篇文章](http://www.pasopas.nl/2012/loading-grails-configuration-files-update/)会给你一个关于如何使用和加载外部配置文件的提示。

# java - 使用正则表达式在两个字符串之间查找字符串

> ID：10536289
> 
> 赞同：2
> 
> 时间：2012-05-10T14:33:47.830
> 
> 标签：java, regex

我正在使用正则表达式在两个字符串之间查找字符串

代码：

```
 Pattern pattern = Pattern.compile("EMAIL_BODY_XML_START_NODE"+"(.*)(\\n+)(.*)"+"EMAIL_BODY_XML_END_NODE");
        Matcher matcher = pattern.matcher(part);
        if (matcher.find()) {
                      .......... 
```

它适用于文本，但当文本包含特殊字符（如换行符）时，它会中断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:39:14.270

您还需要编译模式以`.`匹配行终止符。为此，您需要使用`DOTALL`标志。

```
Pattern pattern = Pattern.compile(regex, Pattern.DOTALL); 
```

编辑：对不起，我已经有一段时间没有遇到这个问题了。您还必须将中间正则表达式从更改`(.*)(\\n+)(.*)`为`(.*?)`. `*?`如果您有多个`EMAIL_BODY_XML_START_NODE`元素，则需要惰性量词 ( )。否则，正则表达式将匹配第一个元素的开头与最后一个元素的结尾，而不是为每个元素单独匹配。虽然我猜这对你来说不太可能。

# c++ - 使用 LValue 引用移动语义

> ID：10536290
> 
> 赞同：3
> 
> 时间：2012-05-10T14:33:50.827
> 
> 标签：c++, c++11

所以 Move 语义很棒，给了我们更高的性能。

我读到这是一个全新的功能，如果没有 C++11，这是“不可能”做到的。

但是我们可以在 C++11 之前做到这一点吗？就像下面这样的东西。

```
class AAA
{
private:
    int* m_data;
public:
    AAA(int _data) : m_data(new int(_data)) { }
    AAA(AAA& _other) // Not using RValue reference.
    {
        m_data = _other.m_data;
        _other.m_data = nullptr;
    }

    ~AAA() { delete m_data; }
};

int main()
{
    AAA sth1(100);
    AAA sth2(sth1)
    return 0;
} 
```

我认为 RValue 引用的存在不是为了制作参数略有不同的相同函数（如 Const 和 Non-Const）。

简单地说，RValue 引用只是另一种“类型”，我们可以同时执行 Copy 构造函数和 Move 构造函数。就是这样。

想知道我是正确的还是遗漏了一些巨大的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:37:42.807

`std::auto_ptr`完全按照你的建议做了。问题在于它使行为变得混乱并且无法复制。右值引用允许创建可以移动和复制的类。

右值引用允许基于上下文的自动移动/复制（例如临时移动）尝试使用左值样式复制构造函数（实际执行移动）来模拟这一点可能是灾难性的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:38:28.493

我的理解是，**移动语义不仅是可能的，而且还可以作为C++03 编译器的库（ [Boost.Move](http://www.boost.org/libs/move/#move.what_is_boost_move)** ）使用（可能有一些限制）。然而，语言实现可能是必要的，既允许在不触及任何代码的情况下进行自由优化，又尽可能地简化它的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:37:07.000

是的，缺少一些东西，即使它们是非 const，你也不会得到左值。非 const 左值不能从临时对象中生成，因此您的尝试在这种情况下不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:38:24.457

如果你想将一个右值传递给你的构造函数怎么办？您的 ctor 将失败，因为它是非常量的。使用 rvalue 引用，您可以将 rvalue 传递给 ctor，然后从中移动，因为 rvalue 始终是临时的。

# r - R：ddply 重复年度累积数据

> ID：10536295
> 
> 赞同：4
> 
> 时间：2012-05-10T14:34:00.793
> 
> 标签：r, plyr

[与这里](https://stackoverflow.com/questions/10518925/r-using-ddply-in-a-loop-over-data-frame-columns)的这个问题相关，但为了清楚起见，我决定问另一个问题，因为“新”问题与原始问题没有直接关系。简而言之，我正在使用 ddply 对三年中的每一年累积一个值。我的代码从第一年获取数据，并在该列的第二年和第三年行中重复。我的猜测是每个 1 年的块都被复制到整个列，但我不明白为什么。

问：如何在指定列的右侧行中获得每年的累计值？

[编辑：for 循环 - 或类似的东西 - 很重要，因为最终我想根据列名列表自动计算新列，而不是手动计算每个新列。循环遍历列名列表。]

![在此处输入图像描述](../Images/9ea58aadf0fce300944eb1f8d94dba08.png)

我经常使用 ddply 和 cumsum 组合，所以突然遇到问题是相当令人烦恼的。

[编辑：此代码已更新为我确定的解决方案，该解决方案基于以下@Chase 的回答]

```
require(lubridate)
require(plyr)
require(xts)
require(reshape)
require(reshape2)

set.seed(12345)
# create dummy time series data
monthsback <- 24
startdate <- as.Date(paste(year(now()),month(now()),"1",sep = "-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(startdate), by = "month", length.out = monthsback),
                   myvalue1 = runif(monthsback, min = 600, max = 800),
                   myvalue2 = runif(monthsback, min = 1900, max = 2400),
                   myvalue3 = runif(monthsback, min = 50, max = 80),
                   myvalue4 = runif(monthsback, min = 200, max = 300))

mydf$year <- as.numeric(format(as.Date(mydf$mydate), format="%Y"))
mydf$month <- as.numeric(format(as.Date(mydf$mydate), format="%m"))

# Select columns to process
newcolnames <- c('myvalue1','myvalue4','myvalue2')

# melt n' cast
mydf.m <- mydf[,c('mydate','year',newcolnames)]
mydf.m <- melt(mydf.m, measure.vars = newcolnames)
mydf.m <- ddply(mydf.m, c("year", "variable"), transform, newcol = cumsum(value))
mydf.m <- dcast(mydate ~ variable, data = mydf.m, value.var = "newcol")
colnames(mydf.m) <- c('mydate',paste(newcolnames, "_cum", sep = ""))
mydf <- merge(mydf, mydf.m, by = 'mydate', all = FALSE)
mydf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:43:57.763

我并没有真正遵循您的 for 循环，但是您是否使事情过于复杂？你不能直接使用`transform`and`ddply`吗？

```
#Make sure it's ordered properly
mydf <- mydf[order(mydf$year, mydf$month),]

#Use ddply to calculate the cumsum by year:
ddply(mydf, "year", transform, 
      cumsum1 = cumsum(myvalue1), 
      cumsum2 = cumsum(myvalue2))
#----------
       mydate myvalue1 myvalue2 year month   cumsum1   cumsum2
1  2010-05-01 744.1808 264.4543 2010     5  744.1808  264.4543
2  2010-06-01 775.1546 238.9828 2010     6 1519.3354  503.4371
3  2010-07-01 752.1965 269.8544 2010     7 2271.5319  773.2915
....
9  2011-01-01 745.5411 218.7712 2011     1  745.5411  218.7712
10 2011-02-01 797.9474 268.1834 2011     2 1543.4884  486.9546
11 2011-03-01 606.9071 237.0104 2011     3 2150.3955  723.9650
...
21 2012-01-01 690.7456 225.9681 2012     1  690.7456  225.9681
22 2012-02-01 665.3505 232.1225 2012     2 1356.0961  458.0906
23 2012-03-01 793.0831 206.0195 2012     3 2149.1792  664.1101 
```

*编辑*- 这是未经测试的，因为我在这台机器上没有 R，但这是我的想法：

```
require(reshape2)
mydf.m <- melt(mydf, measure.vars = newcolnames)
mydf.m <- ddply(mydf.m, c("year", "variable"), transform, newcol = cumsum(value))
dcast(mydate + year + month  ~ variable, data = mydf.m, value.var = "newcol") 
```

# coffeescript - 无法识别在构造函数中调用类函数

> ID：10536304
> 
> 赞同：2
> 
> 时间：2012-05-10T14:34:29.750
> 
> 标签：coffeescript

# 回答：

原来我`new`在创建类实例时忽略了使用关键字。问题本身的代码很好。

# 问题：

我有一个相当简单的类，其中构造函数调用类上的另一个方法（editor_for_node）。调用发生在 jQuery each() 循环内，但我也尝试将它移到外面。

```
define ['jquery'], ($) ->
  class Editor
    constructor: (@node, @data, @template) ->
      @node.widgets().each (i, elem) =>
        data = if @data then @data[i] else null
        node = $(elem)
        @editor_for_node node, data

    editor_for_node: (node, data) ->
      console.log 'hello!'

  return {
    'Editor': Editor,
  } 
```

当该行`@editor_for_node node, data`被调用时，我收到一个错误（在 Firebug 中）说`this.editor_for_node is not a function`.

我真的不明白为什么这不能正常工作，我能看到的唯一可能的奇怪来源是我在一开始就使用了 require.js 的定义函数。

# 编辑：生成的输出

```
(function() {

  define(['jquery'], function($) {
    var Editor;
    Editor = (function() {

      Editor.name = 'Editor';

      function Editor(node, data, template) {
        var _this = this;
        this.node = node;
        this.data = data;
        this.template = template;
        this.node.widgets().each(function(i, elem) {
          data = _this.data ? _this.data[i] : null;
          node = $(elem);
          return _this.editor_for_node(node, data);
        });
      }

      Editor.prototype.editor_for_node = function(node, data) {
        return console.log('hello!');
      };

      return Editor;

    })();
    return {
      'Editor': Editor
    };
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:58:05.220

第一：您使用的是哪个版本的 CoffeeScript？在某些以前的版本中，胖箭头一直是错误的来源。

如果您使用的是最新的（1.3.1），那么我会继续说这是一个缩进问题。当我复制并粘贴您的代码时，它工作正常。你在混合制表符和空格吗？验证编译后的输出是否包含该行

```
Editor.prototype.editor_for_node = ... 
```

**更新：**请参阅对此答案的评论。原来问题是`new`调用构造函数时没有使用关键字。

# c# - 从 System.Net.WebException 向用户打印异常的第一部分

> ID：10536306
> 
> 赞同：0
> 
> 时间：2012-05-10T14:34:40.667
> 
> 标签：c#, exception-handling

是否可以只打印 System.Net.WebException 的第一部分？我想用它来打印第一部分，例如：

“远程服务器返回错误：(503) 服务器不可用。”

跳过所有其他的，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:35:13.523

```
Exception.Message returns a string 
```

# javascript - 如何将 cookie 中的值加载到向导窗格 (dojo) 中的表单

> ID：10536307
> 
> 赞同：0
> 
> 时间：2012-05-10T14:34:40.577
> 
> 标签：javascript, cookies, dojo

如果用户已经访问过该站点并选中记住我复选框，我正在尝试从 cookie 数据中自动填写表单...我的 cookie 包含一个数据数组...我正在尝试用数组数据填充表单..

这是示例代码

```
Cookie_check: function () {
            var Cookie_Array = registry.byId("form").getChildren();
            console.log(Cookie_Array);
            var Cookie_Info = new Array();
            dArrayUtil.forEach(Cookie_Array, function (item, i) {
                Cookie_Info.push(item.value);
            });
            console.log(Cookie_Info);
            //set cookie
            cookie("cookie_name", dJson.toJson(Cookie_Info), { expires: 5 });

            //get cookie infor into an array
            var cookie_name = dJson.fromJson(cookie("cookie_name"));
            console.log(cookie_name);

            //fill the form using the cookie information

            dArrayUtil.forEach(cookie_name, function (item) {

                    console.log(item);
                    registry.byId("form").setFormValues(item);

            });

        }, 
```

我有几个问题 - 1.如何检查是否已经存在 cookie 并使用 cookie 信息设置表单？（在上面的函数中，我错过了使用 cookie 数据（数组）填充表单的条件) 2\. 我如何在加载向导窗格时传递这个函数？

非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:05:20.700

这个饼干是怎么碎的？

```
require(["dojo/dom-form", "dojo/cookie"], function(domForm, dCookie){

  function beforeFormSubmit() {
    dCookie(
         "formdata",
         domForm.toJson("myForm"),
         {expires: 5}
    );
  }
  function onWizardPaneShow() {
    var formData = dCookie("formdata");
    dojo.query("#myForm input").forEach(function ( inputEl) { 
       if(inputEl.name && formData[inputEl.name])
          inputEl.value = formData[inputEl.name];
    });
  }
}); 
```

# c++ - 发布模式错误，但不在调试模式下

> ID：10536309
> 
> 赞同：1
> 
> 时间：2012-05-10T14:34:51.777
> 
> 标签：c++, multithreading, release-mode

我的代码在调试模式下运行良好，但在发布模式下失败。

这是我失败的代码片段：

```
LOADER->AllocBundle(&m_InitialContent);
while(!m_InitialContent.isReady())
{
    this->LoadingScreen();
} 
```

AllocBundle() 将加载包含在 m_InitialContent 中的内容，并在完成后将其就绪状态设置为 true。这是使用多线程实现的。

`this->LoadingScreen()`应该呈现一个加载屏幕，但是目前尚未实现，因此该函数有一个空的主体。

显然这可能是错误的原因：如果我给函数 LoadingScreen() 一行代码：`std::cout<<"Loading"<<std::endl;`那么它将运行良好。

如果我不这样做，那么代码就会卡在`while(!m_InitialContent.isReady())`它甚至不会跳转到括号 ( `this->LoadingScreen();`) 之间的代码。显然它也不会更新 while 语句中的表达式，因为它永远停留在那里。

有谁知道可能是什么原因造成的？如果是这样，问题可能是什么？我完全不解。

* * *

编辑：应要求提供附加代码

ContentLoader 的成员：`details::ContentBundleAllocator m_CBA;`

```
 void ContentLoader::AllocBundle(ContentBundle* pBundle)
    {
        ASSERT(!(m_CBA.isRunning()), "ContentBundleAllocator is still busy");
        m_CBA.Alloc(pBundle, m_SystemInfo.dwNumberOfProcessors);
    }

void details::ContentBundleAllocator::Alloc(ContentBundle* pCB, UINT numThreads)
{
    m_bIsRunning = true;
    m_pCB = pCB;
    pCB->m_bIsReady = false;

    m_NumRunningThrds = numThreads;
    std::pair<UINT,HANDLE> p;
    for (UINT i = 0; i < numThreads; ++i)
    {
        p.second = (HANDLE)_beginthreadex(NULL,
                                          NULL,
                                          &details::ContentBundleAllocator::AllocBundle,
                                          this,
                                          NULL,&p.first);
        SetThreadPriority(p.second,THREAD_PRIORITY_HIGHEST);
        m_Threads.Insert(p);
    }
}

unsigned int __stdcall details::ContentBundleAllocator::AllocBundle(void* param)
{
//PREPARE
    ContentBundleAllocator* pCBA = (ContentBundleAllocator*)param;

//LOAD STUFF [collapsed for visibility+]

   //EXIT===========================================================================================================
        pCBA->m_NumRunningThrds -= 1;
        if (pCBA->m_NumRunningThrds == 0)
        {
            pCBA->m_bIsRunning = false;
            pCBA->m_pCB->m_bIsReady = true;
            pCBA->Clear();
    #ifdef DEBUG
            std::tcout << std::endl;
    #endif
            std::tcout<<_T("exiting allocation...")<<std::endl;
        }

    std::tcout<<_T("exiting thread...")<<std::endl;
    return 0;
}

bool isReady() const {return m_bIsReady;} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T14:44:48.770

当您在调试模式下编译代码时，编译器会在幕后做很多事情，以防止程序员犯的许多错误导致应用程序崩溃。当您在 Release 中运行时，所有赌注都已取消。如果您的代码不正确，那么您在 Release 中崩溃的可能性比在 Debug 中要大得多。

需要检查的几件事：

1.  确保所有变量都正确初始化
2.  确保您没有任何死锁或竞争条件
3.  确保您没有传递指向已被释放的本地对象的指针
4.  确保您的字符串正确地以 NULL 结尾
5.  不要出现`catch`您没有预料到的异常，然后继续运行，就好像什么都没发生一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T15:13:15.843

您正在`m_bIsReady`从没有内存障碍的不同线程访问变量。这是错误的，因为它可能被优化器或处理器缓存缓存。您必须保护此变量免于同时访问 CriticalSection、互斥锁或您的库中可用的任何同步原语。

请注意，可能还有更多错误，但这也绝对是一个错误。根据经验：从不同线程访问的每个变量都必须使用互斥锁/临界区/其他方式进行保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:00:21.513

快速浏览似乎`m_NumRunningThrds`并没有受到同时访问的保护，因此`if (pCBA->m_NumRunningThrds == 0)`可能永远不会满足。

# javascript - 为什么方法从 sendRequest() 上的自定义对象中丢失

> ID：10536312
> 
> 赞同：0
> 
> 时间：2012-05-10T14:34:55.987
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在 chrome 扩展的内容脚本中使用简单的自定义类型。然后通过 chrome.extension.sendRequest() 将项目数组发送到后台页面。在 bgpage 调试器中显示我的类型的实例没有这些方法。此外，具有未定义值的类型属性也会发生同样的情况。怎么了。

```
function User(id, holder) {
  this.id = id;
  var hObj = {};
  hObj[holder] = 'undefined'; // this is ok
  this.holder = hObj;
  this.Result = undefined; // this will be lost
  this.Code = undefined; // this will be lost
}
// this will be lost
User.prototype.getFirstHolderType = function() {
  for (h in this.holder) {
    if (h) return h;
  }
  return false;
};
// this will be lost
User.prototype.hasHolderType = function(h_type) {
  for (h in this.holder) {
    if (h_type === h) return true;
  }
  return false;
};

//...

 chrome.extension.sendRequest({id: "users_come", users: users}, 
          function(response) {}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:45:10.600

消息传递使用`JSON.stringify`，它在对对象进行字符串化时从对象中删除函数。

**为什么？** 函数不仅仅是代码——它是一个包含大量变量/范围信息的[闭包。](https://en.wikipedia.org/wiki/Closure_%28computer_science%29)如果一个函数使用一个全局变量并且该函数被移动到一个新的执行环境，它应该如何表现？（事实上​​，这个问题比“它应该如何表现？”更深刻，更像是“函数范围内的所有变量如何与函数一起传输？”。）

如果您想传输您的函数代码（并提前知道目的地将存在必要的变量），您可以使用`toString`您的成员函数来传输字符串并`eval`在到达时使用并重新创建它们。

（`JSON.stringify`也会删除具有`undefined`值的成员。例如，`JSON.stringify({"a":undefined})`yield `"{}"`。如果您希望保留这些值，请将它们设置为`null`。设置为`undefined`的成员变量与从未设置的成员变量无法区分。）

# ruby-on-rails - Rails、ActiveRecord 或 gem 中是否有现有的解决方案，用于获取任何关联记录的最新更改的时间戳？

> ID：10536313
> 
> 赞同：2
> 
> 时间：2012-05-10T14:34:56.693
> 
> 标签：ruby-on-rails, activerecord, associations

假设我有：

```
class Foo < ActiveRecord::Base
  has_many :bar
end

class Bar < ActiveRecord::Base
  belongs_to :foo
end 
```

还假设`Bar`该类具有时间戳字段（更新记录时自动更新的字段）。

**问题：**`updated_at` Rails、ActiveRecord 或某处的 gem 中是否有现有的功能/方法调用允许我调用一个方法，该方法将告诉我任何记录中的列中的最新值， 在`Foo`类上定义的任何关联中?

因此，理论上的`foo.latest_change_to_associated_objects`方法应该给我一个时间戳，说明最新`updated_at`字段何时用于我的任何关联记录（在这种情况下，用于任何`Bar`记录）。

最简单的情况，你有一个父类并且只有一个关联很简单——一两个回调就可以了。我很好奇一个类定义了许多关联的情况。是否有一个 gem（或我缺少的 ActiveRecord 中已有的功能）允许我声明任何/所有关联以具有此功能？

显然我可以做一个 SQL 调用来解决这个问题，但我不想每次检查最新更改时都这样做。似乎应该有一个回调链，`latest_change_on_association`当任何关联的记录发生更改时，它会自动更新父级上的字段（或任何你想调用的字段），这样检索最新的更改时间戳就是检查单个字段上的问题父记录。

**注意：**我查看了[http://api.rubyonrails.org/classes/ActiveModel/Observer.html](http://api.rubyonrails.org/classes/ActiveModel/Observer.html)，但问题是我必须为每个类编写一个观察者。如果从关联列表创建观察者的自动化已经包含在 gem 或其他东西中，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:04:23.753

当关联记录之一发生更改时，您可以使用它`:touch`来自动更新父记录的`updated_at`时间戳（或*任何其他时间戳字段）：*`belongs_to`

重点是我的：

> ：触碰
> 
> 如果为 true，则在保存或销毁此记录时将触摸关联的对象（将 updated_at/on 属性设置为 now）。如果您指定了一个符号，那么除了 updated_at/on 属性之外**，该属性还将使用当前时间进行更新。**

如果你真的想使用你的`last_association_updated_at`专栏，你可以：

```
belongs_to :parent_class, :touch => :last_association_updated_at 
```

请参阅[有关关联的 Rails 指南](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to-label-Options)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:00:16.420

我建议在父类的表中添加一个列，该列将保存最新更改的时间戳。我们将列称为“last_association_updated_at”。然后`:touch`在每个子类中使用关联选项。任何时候创建、修改或删除子记录时，该`last_association_updated_at`列都会更新为当前时间。

```
class Foo < ActiveRecord::Base
  has_many :bar
end

class Bar < ActiveRecord::Base
  belongs_to :foo, :touch => :last_association_updated_at
end

class Baz < ActiveRecord::Base
  belongs_to :foo, :touch => :last_association_updated_at
end 
```

# ios - ios 上的 XML-RPC 请求

> ID：10536316
> 
> 赞同：0
> 
> 时间：2012-05-10T14:35:08.817
> 
> 标签：ios, xml-rpc

我需要在我的 ios 应用程序中实现 XML-RPC 调用。我刚刚遇到了这个库：[https](https://github.com/eczarny/xmlrpc) ://github.com/eczarny/xmlrpc但我不知道如何将它导入我的项目中。

我是IOS的新手，如果问题是“愚蠢的”，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:22:05.903

检查这个 SO 问题和答案

[适用于 iOS 项目的 XMLRPC-iOS](https://stackoverflow.com/questions/7362892/xmlrpc-ios-for-ios-project)

在那个答案中，“mja”给出了下载他的项目的 dropBox 链接。您可以下载该项目并从该项目中学习 xml-rpc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T16:15:42.207

它是一个很棒的图书馆，我也使用它。为了能够安装和使用它，请按照以下说明进行操作。

只需安装 CocoaPods：

```
$ sudo gem install cocoapods 
```

然后打开一个终端窗口并将目录更改为项目的根目录并创建一个 Podfile

```
$ touch Podfile 
```

使用您选择的任何编辑器（我使用 TextEdit）打开您创建的 Podfile 并在下面粘贴此行：

```
pod 'xmlrpc', '~> 2.3' 
```

返回您的终端窗口并运行以下命令（这仅执行一次，但对于其他 pod 只需跳过 pod setup 命令）：

```
$ pod setup 
```

比运行以下命令：

```
$ pod install 
```

完毕。我也用这个库，太棒了！！！

按照[此](http://www.monster.com.tw/archives/7140)链接获取示例代码：

# wcf - 在 Mac 上的浏览 器 Silverlight 客户端中轮询双工服务失败

> ID：10536317
> 
> 赞同：0
> 
> 时间：2012-05-10T14:35:12.010
> 
> 标签：wcf, silverlight, pollingduplexhttpbinding

我们有一个 Silverlight 客户端，它在 Mac 上运行“浏览器外”。此客户端通过轮询双工绑定使用 WCF 服务。

在客户端中，我正在监听 System.ServiceModel.DuplexClientBase 派生的“InnerChannel”属性公开的“Faulted”事件，它代表客户端的服务。

恰好一分钟后，该“故障”事件被触发，之后通道不再工作，即当服务器尝试通过回调通道发送消息时，它会收到超时异常。

这是我的一个理论：我怀疑客户端中的底层轮询操作有 1 分钟的超时。在服务器端，pollingDuplexHttpBinding 部分的 serverPollTimeout 属性设置为超过一分钟。这意味着如果服务器在此期间没有任何信息可告诉客户端，则服务器会持有一个轮询请求超过一分钟。我怀疑这揭示了客户端轮询消息中的超时。为了测试我的理论，我将 serverPollTimeout 设置减少到不到一分钟，而且确实 - 没有显示问题。

在客户端，有[PollingDuplexBindingElement.ClientPollTimeout](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.pollingduplexbindingelement.clientpolltimeout%28v=vs.95%29)属性，根据[此](http://blogs.msdn.com/b/silverlightws/archive/2010/07/16/pollingduplex-multiple-mode-timeouts-demystified.aspx)博客，该属性正是应该告诉客户端等待一分钟以上的设置。此设置的默认值为 5 分钟，我什至明确设置了它——但问题仍然存在（没有上述解决方法）。

请注意，此问题仅在浏览器客户端之外的 Mac 上发生。

总结一下，这是我的问题：

*   我如何/在哪里可以看到描述性错误消息，准确说明这里的问题是什么？
*   为什么它只发生在浏览器客户端之外的 Mac 中？
*   有人可以证实我的理论吗？
*   如果我的理论是正确的——我如何才能真正为客户端中的轮询请求设置超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:58:59.300

在与 Microsoft 支持有关的长线程之后，这里是关于此问题的结论：

*   该问题也与“常规” WCF 调用有关。如果我们从 SL Mac OOB 调用常规 WCF 操作，它将在恰好一分钟后超时，即使超时设置得更高
*   Microsoft 确认 60 秒是 Mac OS 上的默认超时，并且 SL 运行时不会调用所需的 Mac OS API 将其设置为更高的值，即使 SL 客户端代码使用记录在案的 SL API 来更改超时。他们说这是“设计使然”，因为他们不知道即使在长时间轮询中服务器可能需要这么长时间的任何情况

# python - 对数刻度插值

> ID：10536322
> 
> 赞同：1
> 
> 时间：2012-05-10T14:35:23.700
> 
> 标签：python, numpy, matplotlib, scipy, interpolation

我想插入一些数据，并将结果绘制在对数刻度 ( `pyplot.loglog`) 上。问题是生成的插值看起来很奇怪，并且在对数刻度上绘制时显示不连续性。插入对数缩放数据的最佳方法是什么？

```
pyplot.loglog(x, y, '+')
pyplot.hold(True)
s = scipy.interpolate.InterpolatedUnivariateSpline(x, y)
xs = numpy.logspace(numpy.log10(numpy.min(x)), numpy.log10(numpy.max(x)))
pyplot.loglog(xs, s(xs)) # This looks very strange because of the log scale! 
```

实际上，我通过插入数据日志成功地做到了这一点，但我想知道是否有更简单的方法可以实现相同的结果？

```
pyplot.loglog(x, y, '+')
pyplot.hold(True)
s = scipy.interpolate.InterpolatedUnivariateSpline(numpy.log10(x), numpy.log10(y))
xs = numpy.logspace(numpy.log10(numpy.min(x)), numpy.log10(numpy.max(x)))
pyplot.loglog(xs, numpy.power(10, s(numpy.log10(xs))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:04:28.690

看起来像先取数据的对数，然后拟合是一种正常的方法。请参阅[拟合幂律分布](http://www.scipy.org/Cookbook/FittingData#head-f5ee70fa6d2c896b0538cf717fa0a9c07b172a86-2)。

# iphone - 将 Core Plot 饼图添加为子视图 - 饼图未绘制

> ID：10536327
> 
> 赞同：2
> 
> 时间：2012-05-10T14:35:41.540
> 
> 标签：iphone, cocoa-touch, core-plot, pie-chart

我是 iOS 编程和 Core Plot 的新手。我正在使用 XCode 4.2 和 iOS 5，并使用 iOS 模拟器测试 iPhone 应用程序。

我知道我在这里忽略了一些东西（在这件事上打破了一天多的时间并尝试了很多谷歌并尝试了各种可能的解决方案，但都是徒劳的）。有人可以帮忙或任何指示吗？

我正在尝试做一些非常简单的事情-> 添加饼图（使用 Core Plot 完成）作为子视图。最初，我将饼图显示为模态视图，效果很好。现在，在同一个视图中，我想添加几个按钮，所以我创建了一个视图（按下按钮时会显示），在其中添加了 2 个按钮，还尝试添加这个饼图。按钮显示正常，但看不到饼图！

这是名为“GraphView”的视图的 XIB 文件，当按下按钮时会显示该文件：

![显示 UI 组件的 XIB 屏幕截图](../Images/173c13d3b2d4e01dbfbd140d17c487aa.png)

在上面的屏幕截图中，突出显示的视图“视图”是一个 UIView 对象，我想在其中显示饼图。整个视图“GraphView”显示良好；两个按钮出现，但我添加到子视图的饼图没有。我在上图中添加为子视图的 UIView 对象也可以正常显示（我通过为其设置背景颜色来检查它）。这是代码：

**图形视图.H**

```
#import <UIKit/UIKit.h>
#import "PieChartView.h"

@interface GraphView : UIViewController

    @property (strong, nonatomic) PieChartView *pieChartView;
    // gView is the view which is linked to the 'UIView' subview in IB
    // in the above figure
    @property (strong, nonatomic) IBOutlet UIView *gView;
    @property (strong, nonatomic) IBOutlet UIButton *buttonBack;
    @property (strong, nonatomic) IBOutlet UIButton *buttonMail;

    -(void) setHistoryData:(NSArray *)history;
    ...
    ...
@end 
```

**图形视图.M**

```
...
...
@synthesize gView;
@synthesize buttonBack;
@synthesize buttonMail;
...
...
-(void) setHistoryData:(NSArray *)history {
    NSLog(@"GraphView: setHistoryData");
    [pieChartView setHistoryData:history];
    [gView addSubview:pieChartView];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self) {
      // Custom initialization
  }
  pieChartView = [[PieChartView alloc] init];
  return self;
}
...
... 
```

#pragma mark - 查看生命周期

```
- (void)viewDidLoad
{
  NSLog(@"GraphView: viewDidLoad");
  [super viewDidLoad];

  [pieChartView initializeGraph];
}

- (void)viewDidUnload
{
  [super viewDidUnload];
  // Release any retained subviews of the main view.
  // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  // Return YES for supported orientations
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

**PIECARTVIEW.H** 这是绘制（“应该”绘制）饼图的那个！

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

// I tied subclassing 'UIViewController' or just 'UIView'...all in vain
@interface PieChartView : CPTGraphHostingView <CPTPlotDataSource> {
   CPTXYGraph *graph;
   CPTPieChart *pieChart;
}

@property (nonatomic, retain) CPTXYGraph *graph;

-(void) initializeGraph;
-(void) initializePieChart;
-(void) setHistoryData:(NSArray *)history;

@end 
```

**PICHARTVIEW.m**

```
...
@implementation PieChartView

@synthesize graph;

NSArray *historyData;

// I added the NSLog to see if these get called, but they don't seem to get called!
// So, this means that the pie chart is not being drawn actually!
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
     NSLog(@"numberOfRecordsForPlot: History count: %d", (int)[historyData count]);
     return [historyData count];
}

 // This too isn't getting called
-(NSNumber *) numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {   
    NSLog(@"historyView: numberForPlot");
    return [historyData objectAtIndex:index];
}

// This too is not getting called! OMG!
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {
   NSLog(@"HistoryView: dataLabelForPlot");
   ...
}

// This method is getting called. Am seeing the log messages
-(void) initializeGraph {

   NSLog(@"HistoryView: initializeGraph");

   graph = [[CPTXYGraph alloc] init];

   CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
   [graph applyTheme:theme];

  CPTGraphHostingView *hostingView = (CPTGraphHostingView *) self;
  hostingView.hostedGraph = graph;  
  //hostingView.bounds = CGRectMake(5, 5, 70, 70);
  [self initializePieChart];  
}

// This method is also getting called. I see the log messages from this method too
/** 
 * Initialize the pie chart for display
 */
-(void) initializePieChart {

  NSLog(@"HistoryView: initializePieChart");
  pieChart = [[CPTPieChart alloc] init];
  pieChart.dataSource = self;
  pieChart.pieRadius = 100.0;
  pieChart.opaque = FALSE;
  //pieChart.pieRadius = 60;
  pieChart.shadowOffset = CGSizeMake(-1, 1);
  pieChart.identifier = @"PieChart";
  pieChart.startAngle = M_PI_4;
  pieChart.sliceDirection = CPTPieDirectionCounterClockwise;
  pieChart.labelOffset = -0.6;
  [graph addPlot:pieChart];
  NSLog(@"added pie chart to the graph view");
}

// This also is getting called
-(void) setHistoryData:(NSArray *)history {
    NSLog(@"HistoryView: setHistoryData");
    historyData = history;
}

...
...
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:15:56.390

你不需要`gView`财产。删除它并将`pieChartView`声明更改为：

```
@property (strong, nonatomic) IBOutlet PieChartView *pieChartView; 
```

将自定义视图链接到此属性，而不是将`gView`IB 中的类更改为`PieChartView`. 还要删除此属性的初始化`-initWithNibName:bundle:`——加载 nib 时视图将自动初始化。

# kvc - KVC valueForKey 返回一个 __NSCFConstantString 而不是一个 __NSCFString

> ID：10536329
> 
> 赞同：0
> 
> 时间：2012-05-10T14:35:43.367
> 
> 标签：kvc

我在我的项目中使用 KVC。

而且，在我的一堂课中，我写了这个属性：

```
@property ( nonatomic, strong )             NSString            *notes; 
```

我想在该属性中放置一个 NSString 对象：

在设置值之前，我想测试目的地的类名。

```
a = [ newContainer valueForKey:@"notes"];
if( a != nil && ![ b isKindOfClass:[ a class ] ] )

// here b is the new NSString value 
```

结果是 xcode 表明类不一样！

```
(gdb) po [ b class ]
__NSCFString

(gdb) po [ a class ]
__NSCFConstantString 
```

我读到这不是很重要，并且 __NSCFConstantString 是 NSString 的私有子类。

但是，就我而言，我需要在更新对象之前检查对象的所有属性。

而且我不想在我的代码中有：

```
// OK, classes aren't the same ... 
// ---- BUT WE MUST test it again to know if a is a NSString and b a subclass of NSString or anything else ... 
```

伯克！

有人有同样的问题吗？

非常感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:50:23.090

三点：

1- 您应该检查 [NSString class]，您的财产的公开公开类别，而不是您财产当前价值的类别。

想象一下，当您检查值类而不是属性类时会发生什么：在将您的属性设置为 NSMutableString（它是 NSString 的完美实例）之后，您不能再将其设置为常规 NSString（因为 NSString 不是NSMutableString 的子类）。您当前的问题是本段中描述的问题的一种变体，可能更容易理解。

2-测试应该在拥有财产的班级中进行，而不是像现在这样在外面进行。因为只有那个类才有权知道它接受的对象的类型。

3- 所以。使用标准的 validateValue:forKey:error: 方法，这是你的朋友。这个方法将由类实现，它会确保 notes 是一个 NSString。在类之外，您不会直接检查值的类型，而是要求容器类对其进行验证。

瞧！

# sdk - Lync ConversationRemoved 获取当前对话文本

> ID：10536331
> 
> 赞同：0
> 
> 时间：2012-05-10T14:35:47.390
> 
> 标签：sdk, lync

我正在使用 Lync SDK，我正在寻找是否有人知道如何获取正在关闭的对话的对话文本。

我正在举办这个活动。

```
static void _conversationManager_ConversationRemoved(object sender, Microsoft.Lync.Model.Conversation.ConversationManagerEventArgs e) 
```

而且我无法从这个唯一的参与者那里获得任何对话文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:35:30.253

如果您订阅 ConversationManager 的 ConversationAdded 事件，那么您可以在每个新对话开始时收到通知。然后，在该对话中，您可以订阅 InstantMessageModality 的 InstantMessageReceived 事件（假设您要捕获即时消息对话的对话文本）。

然后，您应该将其存储在某个地方。例如，您可以有一个对话 ID、时间戳和消息列表。我希望您希望获得格式良好的输出，例如：

```
用户 1 (10:01) 一些文本
用户 2 (10:02) 更多文字

```

我认为你将不得不自己制作这个，但这应该很容易。只要您存储（对于收到的每条消息）时间戳、发送它的用户、它所属的对话 ID 和文本，您就可以在以后构建它们。

然后，在您的 ConversationRemoved 事件中，您可以从列表中提取所有数据，对其进行格式化，然后对它做任何您想做的事情。

希望有帮助。

-汤姆

# java - 缺少 Android JRE 系统库 (java.awt.*)

> ID：10536332
> 
> 赞同：4
> 
> 时间：2012-05-10T14:35:50.633
> 
> 标签：java, android

我正在尝试在 Android 上运行 pdfbox.jar 库，似乎我做的一切都是正确的。我使用 Eclipse 插件来部署项目。代码非常简单，只需调用 pdfbox.jar 库即可。

所有需要的 jar 都以正确的顺序位于类路径中，并且应该在 dalvik 重新编译字节码时导出。

但是我所有让它工作的尝试都失败了，当我部署项目时出现以下错误

```
05-10 13:53:42.590: I/dalvikvm(14009): Failed resolving Lorg/apache/pdfbox/pdmodel/PDDocument; interface 911 'Ljava/awt/print/Pageable;'
05-10 13:53:42.590: W/dalvikvm(14009): Link of class 'Lorg/apache/pdfbox/pdmodel/PDDocument;' failed
05-10 13:53:42.590: E/dalvikvm(14009): Could not find class 'org.apache.pdfbox.pdmodel.PDDocument', referenced from method com.ibm.ext.pdf.PDFExtractor.extractText 
```

* * *

```
05-10 13:53:54.881: E/AndroidRuntime(14009): FATAL EXCEPTION: main
05-10 13:53:54.881: E/AndroidRuntime(14009): java.lang.NoClassDefFoundError: org.apache.pdfbox.pdmodel.PDDocument
05-10 13:53:54.881: E/AndroidRuntime(14009):    at com.ibm.ext.pdf.PDFExtractor.extractText(PDFExtractor.java:52)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at com.ibm.ext.pdf.PDFBoxActivity.onCreate(PDFBoxActivity.java:14)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.Activity.performCreate(Activity.java:4465)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.os.Looper.loop(Looper.java:137)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at java.lang.reflect.Method.invokeNative(Native Method)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at java.lang.reflect.Method.invoke(Method.java:511)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-10 13:53:54.881: E/AndroidRuntime(14009):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

```
org/apache/pdfbox/pdmodel/PDDocument implements java/awt/print/Pageable 
```

似乎 dalvit 出于某种原因不知道导出 java.awt.* 类，或者我在类路径中仍然遗漏了一些东西。

我想知道是否有任何解决方案或者这是有效的情况，我不能使用依赖于 dalvik 不知道使用的 jre 库的 jars。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:40:33.483

Android 不包含大多数`java.awt.*`类，因此依赖这些类的第三方 Java 库需要重写才能在 Android 上运行，或者干脆不使用。

> 我不能使用依赖于 dalvik 不知道使用的 jre 库的 jar。

更准确地说，您不能使用依赖于 Android SDK 不包含的类的 JAR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:40:42.617

问题是Android 对AWT 的支持很少。

这是很明显 Android 不是 Java 平台的领域之一。Android 有自己的用于处理图形和 GUI 的堆栈。

> 我想知道有没有解决办法...

这个 SO question - [Using awt with android](https://stackoverflow.com/questions/3897775/using-awt-with-android) - 有一个答案提到了一个商业产品，它允许您在 Android 上运行 Swing 代码。我不确定，但我想这个产品也支持 AWT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T07:52:34.550

正如其他人所指出的，问题是由于 android 中缺乏 AWT 支持。一种解决方法可能是使用 PDFBox 的 android 端口：

[https://github.com/Birdbrain2/PdfBox-Android](https://github.com/Birdbrain2/PdfBox-Android)

**tldr;** 将您对 PDFBox 的 gradle 依赖替换为： org.apache:pdfbox-android: *latest version here*，如果遇到 DexIndexOverflowException 异常，请考虑向您的应用程序添加 MultiDex 支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:41:52.693

Android 支持的 AWT 的唯一部分是字体包。

[将 AWT 图形代码移植到 Android](https://stackoverflow.com/questions/5783624/porting-awt-graphics-code-to-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T15:21:12.233

这个完美！;-)

[Birdbrain2/PdfBox-Android](https://github.com/Birdbrain2/PdfBox-Android)

有同样的问题，它解决了。希望这可以帮助！

# c# - 在等待 Parallel.ForEach 时实时更新 Winforms UI

> ID：10536333
> 
> 赞同：0
> 
> 时间：2012-05-10T14:35:51.743
> 
> 标签：c#, c#-4.0, asynchronous, system.reactive

下面的代码不能“实时”工作。目的是，当单击按钮时，验证后台线程上的一组数据。在验证所有数据之前，我不能允许真正的“提交”，但我确实希望文本框实时更新。

相反，文本框会一次更新为奇数。

我想正在发生的事情是 task.Wait 阻塞了 observable，因为我在主线程上观察，但我看不到解决这个问题的方法，因为我需要在主线程上更新。

（显然这只是一个概念证明）

有点相关的注释 - 这段代码是否保证线程安全？谢谢。

```
private Subject<int> _subject; 
    public Form1()
    {
        InitializeComponent();
    }

    private int sleep = 2000;
    private int i = 0;
    private void LongRunningValidation(int num)
    {
        if (num % 2 == 0) return;

        Thread.Sleep(sleep * (i++));

        _subject.OnNext(num);
    }

    private ConcurrentBag<int> _bag;
    private void simpleButton1_Click(object sender, EventArgs e)
    {
        _subject = new Subject<int>();
        _subject.SubscribeOn(Scheduler.TaskPool).ObserveOn(SynchronizationContext.Current).Synchronize().Subscribe(UpdateTextBox);

        _bag = new ConcurrentBag<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

        if(Validate())
        {
            //submit
        }
    }

    private bool Validate()
    {
        var task = Task.Factory.StartNew(StartValidationAsync);

        task.Wait();

        return true;
    }

    private void StartValidationAsync()
    {
        Parallel.ForEach(_bag, LongRunningValidation);
    }

    private void UpdateTextBox(int i)
    {
        textEdit1.Text = textEdit1.Text + "," + i;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:07:37.737

你的`Validate` 方法不是异步的，正如你所说的阻塞主线程。尝试使用事件：

```
public delegate void ValidatedHandler(bool validate);
public event ValidatedHandler Validated;

private void Validate()
    {
        var task = Task.Factory.StartNew(StartValidationAsync);

        if (Validated != null)
           Validated(true);
    } 
```

并订阅事件：

```
private void simpleButton1_Click(object sender, EventArgs e)
{
    _subject = new Subject<int>();
     _subject.SubscribeOn(Scheduler.TaskPool).ObserveOn(SynchronizationContext.Current).Synchronize().Subscribe(UpdateTextBox);

_bag = new ConcurrentBag<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

this.Validated += OnValidated;
}

public void OnValidated(bool validate)
{
        if(validate)
        {
            //submit
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:40:33.193

即使您正在运行后台线程，Windows 窗体也不会自动更新 UI。尝试在要更新的任何内容上调用 Update()。

# java - 将 XFA 与 PDFBox 相结合

> ID：10536334
> 
> 赞同：8
> 
> 时间：2012-05-10T14:35:54.677
> 
> 标签：java, forms, pdf, pdfbox, pdf-form

我想用 PDFBox java 库填写 PDF 表单。PDF 表单是使用 Adob​​e Live Designer 创建的，因此它使用 XFA 格式。

我尝试查找有关使用 PDFBox 填写 XFA PDF 表单的资源，但到目前为止我还没有运气。我看到 API 中提供了一个 PDAcroForm.setXFA 方法，但我不知道如何使用它。

您知道是否可以使用 PDFBox 填写 PDF 表单？如果是，是否有任何代码示例或教程可以实现这一目标？如果不是，实现这一目标的最佳选择是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-28T19:32:09.270

这是我在被分配解决问题时能够管理的最好的。我将 pdf 保存为优化（在生命周期中）（我不是做 pdf 的人）。这是PDF打开部分，XML复制然后保存：

```
 PDDocument document = PDDocument.load(fileInputStream);
    fileInputStream.close();
    document.setAllSecurityToBeRemoved(true);

    Map<String, String> values = new HashMap<String, String>();
    values.put("variable_name", "value");

    setFields(document, values); // see code below

    PDAcroForm form = document.getDocumentCatalog().getAcroForm();
    Document documentXML = form.getXFA().getDocument();

    NodeList dataElements = documentXML.getElementsByTagName("xfa:data");
    if (dataElements != null) {
        for (int i = 0; i < dataElements.getLength(); i++) {
            setXFAFields(dataElements.item(i), values);
        }
    }

    COSStream cosout = new COSStream(new RandomAccessBuffer());

    TransformerFactory.newInstance().newTransformer()
            .transform(new DOMSource(documentXML), new StreamResult(cosout.createUnfilteredStream()));

    form.setXFA(new PDXFA(cosout));

    FileOutputStream fios = new FileOutputStream(new File(docOut + ".pdf"));
    document.save(fios);
    document.close();
    try {
        fios.flush();
    } finally {
        fios.close();
    } 
```

然后是为字段设置值的方法。我设置了 XFA 和 AcroForm：

```
public void setXFAFields(Node pNode, Map<String, String> values) throws IOException {
    if (values.containsKey(pNode.getNodeName())) {
        pNode.setTextContent(values.get(pNode.getNodeName()));
    } else {
        NodeList childNodes = pNode.getChildNodes();
        if (childNodes != null) {
            for (int i = 0; i < childNodes.getLength(); i++) {
                setXFAFields(childNodes.item(i), values);
            }
        }
    }
}

public void setFields(PDDocument pdfDocument, Map<String, String> values) throws IOException {

    @SuppressWarnings("unchecked")
    List<PDField> fields = pdfDocument.getDocumentCatalog().getAcroForm().getFields();
    for (PDField pdField : fields) {
        setFields(pdField, values);
    }
}

private void setFields(PDField field, Map<String, String> values) throws IOException {
    List<COSObjectable> kids = field.getKids();
    if (kids != null) {
        for (COSObjectable pdfObj : kids) {
            if (pdfObj instanceof PDField) {
                setFields((PDField) pdfObj, values);
            }
        }
    } else {
        // remove the [0] from the name to match values in our map
        String partialName = field.getPartialName().replaceAll("\\[\\d\\]", "");
        if (!(field instanceof PDSignatureField) && values.containsKey(partialName)) {
            field.setValue(values.get(partialName));
        }
    }
} 
```

这项工作，但不适用于所有“种类”的 PDF 生命周期产品，有些人收到关于“扩展功能”不再启用但仍然有效的警告消息。优化版是我发现的唯一一个填充后打开不提示信息的。

我填充了 XFA 和 Acroform，否则它不适用于所有查看器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T17:47:13.490

该问题专门标识了该主题中的 PDFBox 库；您不需要 iText，XFA 操作可以使用 PDFBox 1.8 中可用的 PDXFA 对象来完成。

非常感谢 Maruan Sahyoun 在 PDFBox + XFA 上的出色工作。

仅当您删除 PDDocument 上的所有安全性时，此代码才有效。
它还假设 PDXFA 中的 COS 对象是一个 COSStream。下面的简单示例读取 xml 流并将其写回 PDF。

```
 PDDocument doc = PDDocument.load("filename");
 doc.setAllSecurityToBeRemoved(true);

 PDDocumentCatalog docCatalog = doc.getDocumentCatalog();
 PDAcroForm form = docCatalog.getAcroForm();

 PDXFA xfa = form.getXFA();
 COSBase cos = xfa.getCOSObject();
 COSStream coss = (COSStream) cos;
 InputStream cosin = coss.getUnfilteredStream();
 Document document = documentBuilder.parse(cosin);

 COSStream cosout = new COSStream(new RandomAccessBuffer());
 OutputStream out = cosout.createUnfilteredStream();

 TransformerFactory tFactory = TransformerFactory.newInstance();
 Transformer transformer = tFactory.newTransformer();
 DOMSource source = new DOMSource(xmlDoc);
 StreamResult result = new StreamResult(out);
 transformer.transform(source, result);

 PDXFA xfaout = new PDXFA(cosout);
 form.setXFA(xfaout); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:20:24.633

我对 pdfbox 不熟悉，但您可以在访问 XFA (XML) DOM 后使用 iText ( [http://itextpdf.com/ ) 执行此操作。](http://itextpdf.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T16:04:29.730

试试这个，它将合并所有没有 xfa 和 XFA 的 pdf（这是仅使用 PDBox 时）

```
 PDAcroForm form = document.getDocumentCatalog().getAcroForm();
 if(form != null) {
      document.setAllSecurityToBeRemoved(true);
      form.flatten();
      if(form.hasXFA()) {
         form.setXFA(null);
      }
 }                       
 merge.appendDocument(anyPDFDoc, document); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-06T16:55:35.230

AcroForm 用于带有静态字段的 PDF。如果 PDF 有 xfa 表单，您可以使用 itext (Java) 或 itextsharp (.net) 来填充您的数据。XFA 表单的唯一问题是它们不能用 itext 进行展平，我发现只有使用 Bullzip 或类似的 pdf 创建器来打开使用 itext 创建的 xfa pdf 并将其传递给 Bullzip，这将吐出展平的 pdf 版本。希望这会给你一些想法。

下面的代码只是一个粗略的想法 xfa 是如何填充的。

```
XfaForm xfa = pdfFormFields.Xfa;
dynamic bytes = Encoding.UTF8.GetBytes("<?xml version=\"1.0\" encoding=\"UTF-8\"?> <form1> <staticform>" + "\r\n<barcode>" + barcode + "</barcode></staticform> <flowForm><Extra>" + Extra + "</Extra></flowForm> </form1>");
MemoryStream ms = new MemoryStream(bytes);
pdfStamper.AcroFields.Xfa.FillXfaForm(ms); 
```

您现在可以使用您创建的 xfa pdf 并通过 Bullzip 打印

const string Printer_Name = "Bullzip PDF 打印机";

```
 PdfSettings pdfSettings = new PdfSettings();
                    pdfSettings.PrinterName = Printer_Name;
                    pdfSettings.SetValue("Output", flatten_pdf);
                    pdfSettings.SetValue("ShowPDF", "no");
                    pdfSettings.SetValue("ShowSettings", "never");
                    pdfSettings.SetValue("ShowSaveAS", "never");
                    pdfSettings.SetValue("ShowProgress", "no");
                    pdfSettings.SetValue("ShowProgressFinished", "no");
                    pdfSettings.SetValue("ConfirmOverwrite", "no");
                    pdfSettings.WriteSettings(PdfSettingsFileType.RunOnce);
                    PdfUtil.PrintFile(xfa_pdffile, Printer_Name); 
```

输出文件将被展平pdf ..

# facebook-like - 类似 modx cms (php) 中的 Facebook 风格系统

> ID：10536340
> 
> 赞同：0
> 
> 时间：2012-05-10T14:36:13.133
> 
> 标签：facebook-like, modx

尝试在 modx 中构建一个简单的类似系统（它使用 php 代码片段），我只需要一个登录用户可以按下的按钮，它可以向资源添加“喜欢”。

更新自定义桌子或电视会更好吗？我的想法是，如果它是一个模板变量，我可以使用 getResource 按喜欢的数量进行排序。

关于解决此问题的最佳方法或如何构建此问题的任何想法都会有所帮助。我的php知识有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:59:42.597

取决于您之后将如何使用它，以及您存储的数据是否不仅仅是“喜欢”计数。电视的资源很昂贵[如果您要使用 getResources 浏览整个资源集更是如此]，因此如果您要在事后进行大量处理，我会查看自定义表格〜或〜探索使用页面上的属性集[我认为编写一个更新页面属性的插件应该很容易]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T01:41:01.403

我肯定会去定制表。

虽然您可以简单地增加数字电视来计算喜欢的数量，但您会遇到这样一种情况，任何人都可以无限制地继续喜欢资源 - 虽然您没有指定确切的概念，但这几乎是不可取的. 使用自定义表，您可以为喜欢该资源的用户 ID 添加一个关系别名，添加一个时间戳以便您知道它何时发生，并让您的幻想在现在向您开放的其他功能上疯狂运行。

虽然对自定义表不是硬性要求，但您可能需要花时间学习 xPDO，它是 MODX 所基于的数据库抽象层。有一个[关于 RTFM 的很棒的教程可以引导您完成它](http://rtfm.modx.com/display/revolution20/Using+Custom+Database+Tables+in+your+3rd+Party+Components)。

# c# - 模型依赖于两个存储库。如何嘲笑其中之一？

> ID：10536348
> 
> 赞同：0
> 
> 时间：2012-05-10T14:36:42.960
> 
> 标签：c#, .net, repository-pattern, mvp, passive-view

我有一个`Project`实体，其中包含一组`Word`实体。我的`WordsRepository`取决于`Project`实体。它应该对项目包含的单词集进行操作。

```
public interface IWordsRepository
{
    List<Word> FetchAll();
}
public class WordsRepository : IWordsRepository
{
    private readonly Project _project;

    public WordsRepository(Project project)
    {
        if (project == null)
            throw new ArgumentNullException("project");
        this._project = project;
    }
    public List<Word> FetchAll()
    {
        // code for retrieveing words for the project from the database
    }        
} 
```

现在让我们深入挖掘一下。这是我的`ProjectsModel`。

```
public class ProjectsModel
{
    private readonly IProjectsRepository _rep;
    private IWordsRepository _wordsRep;
    private IProjectsModelObserver _presenter;

    // Regular contructor for usual purpose
    public ProjectsModel()
    {            
        this._rep = new ProjectsRepository(Program.context);
    }

    public ProjectsModel(IProjectsRepository repository)
    {
        this._rep = repository;
    }

    public virtual void AttachPresenter(IProjectsModelObserver observer)
    {
        this._presenter = observer;
    }

    public List<Project> projects
    {
        get
        {
            List<Project> tmpList = _rep.FetchAll();
            return (tmpList != null) ? tmpList : new List<Project>();
        }
    }

    private Project _selectedProject;
    public Project selectedProject
    {
        get
        {
            if (_selectedProject == null)
                _selectedProject = projects.FirstOrDefault();
            return _selectedProject;
        }
        set
        {
            if (!projects.Contains(value))
                throw new InvalidOperationException("Project not in the Projects list");

            _selectedProject = projects[projects.IndexOf(value)];
            // Recreating Words repository depending on project
            // Here is my issue:
            // As I should recreate the Words repository here, passing a new selected project 
            // how can I mock it and make this class testable?
            this._wordsRep = new WordsRepository(this._selectedProject);

            if (this._presenter != null)
                this._presenter.SelectedProjectChanged(_selectedProject);
        }
    }

    private List<Word> _words;
    public List<Word> Words
    {
        get
        {
          // Fetching set of words in Project. Just invoking a words repository
        }
    }
} 
```

当模型的选定项目发生更改时，它应该重新创建`WordsRepository`，但不能以这种方式进行测试。

我怎么能嘲笑它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:50:59.567

您需要使用工厂来创建新的`WordsRepository`. 您可能知道，每当您`new`在代码中看到这个词时，最好创建一个工厂类来为您提供所请求的实例，因为这样您就可以模拟工厂以在测试时返回您想要的任何实例。

所以你会改变这个：

```
 _WordsRep = WordsRepositoryFactory.CreateNewRepository(_selectedProject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:52:18.743

查看托管可扩展性框架。基本上，您有一个接口，该接口上有多个实现。但是，在运行时，您希望能够相互切换这些实现。为此，您不能静态链接到任何一个实现，并且应该允许框架确定为您使用哪一个。

MEF 将允许您 [Import(typeof(IWordsRepository))]。这将允许您将不同的实现作为部署项放入。代码看起来像这样。

```
[Export(typeof(IWordsRepository))]
public class WordsRepository : IWordsRepository
{
   public List<Word> FetchAll()
   {
       //this class will hit the database
   }
}

[Export(typeof(IWordsRepository))]
public class WordsRepositoryTest : IWordsRepository
{
   public List<Word> FetchAll()
   {
        //this class will not go to the database, maybe an xml file or something.    
   } 
} 
```

然后，您的 ProjectsModel 将使用：

```
[Import(typeof(IWordsRepository))]
IWordsRepository _repo; 
```

将这两种类型存储在两个不同的 dll 中，并将测试类型作为单元测试的部署项放入。它将使用您放入的任何实现。

有关 MEF 的更多信息：http: [//msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

有关部署项目的更多信息：http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:55:35.213

我发现您的代码难以理解，但正如 Tejs 所提到的，工厂是一种选择。另一种可能性可能是没有设置器，而是使用 SetSelectedProject(IWordsRepository) 方法。在您的特定项目中，这可能会也可能不会。

# c# - C#代码没有调用它应该调用的c++ dll函数（它有一个类指针作为参数），我不应该改变c++代码

> ID：10536349
> 
> 赞同：0
> 
> 时间：2012-05-10T14:36:51.133
> 
> 标签：c#, c++, visual-c++, interop, marshalling

下面提到的是我在 c++ 中的 dll 函数

```
static bool t72CalculateRMDMethodResult( const double     AccountBalanceAtSetup,
                                     const long       ClientCurrentAge,
                                     const char       Frequency,
                                     double *         pRMDMethodResult,
                                     IRSLookupTable & LookupTable) 
```

下面提到的是我的 c++ 类，它有一个指针作为参数传递给上述函数

```
class IRSLookupTable
{

    public:
        struct IRSLookupTableRow
        {
            unsigned int    Key;
            double          Value;
        };

        IRSLookupTable( const char * pFilename );
        IRSLookupTable( const struct IRSLookupTableRow Table[], const unsigned int NumEntries );
        virtual ~IRSLookupTable();

        bool         LookupValueByKey(const unsigned int Key, double * Value);
        virtual bool ParseLine( char * Buffer, unsigned int * Key, double * Value);
        bool         IsInitialized();

    private:
        typedef map <unsigned int, double> IRSLookupTableData;

        IRSLookupTableData m_IRSTableData;
        bool               m_bInitialized;
}; 
```

下面是我如何在 c# 中调用 c++ dll 函数，我不确定它是否正确，我无法输入 dll 函数

```
[DllImport("t72CalculatorDLL.dll", ExactSpelling = true, EntryPoint = "t72CalculateRMDMethodResult")]
    public static extern bool t72CalculateRMDMethodResult(double AccountBalanceAtSetup, int ClientCurrentAge, char Frequency, double* pRMDMethodResult, [MarshalAs(UnmanagedType.LPStruct)] ref IRSLookupTable LookupTable); 
```

这是我用 C# 编写的 C++ 类的定义

```
 [DataContract]
public unsafe class IRSLookupTable
{
    public struct IRSLookupTableRow
    {
        public uint Key;
        public double Value;
    };

    public IRSLookupTable()
    {
        m_bInitialized = true;
    }
    public IRSLookupTable(char* pFilename)
    {
        //        uint Key;
        //        double Value;
        //        m_bInitialized = false;

        //        Debug.Assert( pFilename );
        //        if (pFilename ==null )
        //{
        //    // return without setting the flag to true
        //    return;
        //}

        //// open the file
        //std::ifstream InputFile(pFilename);
        //if ( ! InputFile )
        //{
        //    // return without setting the flag to true
        //    return;
        //}

        //while ( InputFile.getline( &gTmpBuffer[0], BUFFERSIZE) )
        //{
        //    if ( ! ParseLine( gTmpBuffer, &Key, &Value ) )
        //    {
        //        m_IRSTableData[Key] = Value;
        //    }
        //    else
        //    {
        //        // return without setting the flag to true
        //        return;
        //    }
        //}

        //m_bInitialized = true;
    }
    public IRSLookupTable(IRSLookupTableRow* Table, uint NumEntries)
    {
        m_bInitialized = false;

        for (uint i = 0; i < NumEntries; i++)
        {
            m_IRSTableData[Table[i].Key] = Table[i].Value;
        }

        m_bInitialized = true;
    }

    ~IRSLookupTable() { }

    public bool LookupValueByKey(uint Key, double* Value) { return true; }
    public virtual bool ParseLine(char* Buffer, uint* Key, double* Value) { return true; }
    public bool IsInitialized() { return true; }

    private SortedDictionary<uint, double> m_IRSTableData;
    private bool m_bInitialized;
} 
```

任何人都可以帮我解决这个问题，我对 c# 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:05:11.767

我没有看到你将 C++ 函数导出到哪里？？？您将 t72... 函数定义为“静态”？？？您希望它仅在它定义的 .cpp 文件中可见？

我建议将您的 C++ 函数定义为：

```
extern "C" bool WINAPI t72CalculateRMDMethodResult( const double     AccountBalanceAtSetup,
                                     const long       ClientCurrentAge,
                                     const char       Frequency,
                                     double *         pRMDMethodResult,
                                     IRSLookupTable & LookupTable) 
```

编辑您的 .def 文件并为 t72CalculateRMDMethodResult 添加一个导出条目。

您可以使用“dumpbin /exports mydll.dll”来确定函数是否正确导出。（显然用你的 dll 代替 mydll.dll）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:51:26.067

如果您无法更改 C++ 代码，那么您可以编写一个 C++/CLI 层，将其公开给 C# 代码。通过这种方式，您可以避免任何丑陋的 DLL 导入和导出（我从未学习过如何做到这一点）。m 使用这种技术，您可以完全保持 C++ 代码不变。

我假设您至少使用 VS2005，因为您提到了 C#。

查看这篇文章[C++/CLI 混合模式 DLL 创建](https://stackoverflow.com/questions/2691325/c-cli-mixed-mode-dll-creation)

# svn - 撤消使用他们的并标记为已解决 - SVN

> ID：10536350
> 
> 赞同：7
> 
> 时间：2012-05-10T14:36:56.493
> 
> 标签：svn, tortoisesvn

*假设*- 不是我这样做 - 假设我认识的人更新了他们的文件工作副本，看到冲突，匆忙点击“使用他们的”然后很快标记为已解决......

有什么办法可以撤消它并取回我……呃……我的意思是有人丢失了……的几百行代码？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-23T15:47:04.490

也许这可能会帮助其他有类似问题的人：我们有这种情况，我们在回收站中找到了已删除的文件。我们实际上找到了 .mine 和 .theirs 文件，并且我们能够恢复更改

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T14:41:57.717

如果您使用`Eclipse`编写代码，请右键单击您的文件，转到`Compare with`并检查`Local history`. 然后您应该会看到带有时间戳的文件的本地副本列表。如果您双击其中任何一个，它将以比较模式打开它，您可以在其中查看它（并复制您丢失的工作）。

类似的 IDE 可能有也可能没有某种本地版本控制/备份。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T13:48:09.247

您几乎丢失了数据，但回收站中仍有一份副本。如果您没有清空回收站，您可以从他们那里恢复。面临同样的问题，但在回收站中找到它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T14:40:40.087

如果这仅在您进行合并的本地工作副本中发生更改并承诺为时已晚，请*使用他们的*手段说是的，我将是他们的，并将粉碎我自己的更改。如果更改是在将分支合并到主干期间完成的，那么分支上还会存在更改。比你能拿回他们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T14:48:04.023

不，你已经失去了它。

当您..r 朋友.. 看到冲突时，磁盘上将有 2 个文件，其中两个版本都发生了更改。当您单击“使用他们的”时，您将使用其中一个文件的修订版覆盖您的 WC 文件。但是，当您单击“已解决”时，您删除了两个临时修订文件。

所以，如果你幸运的话，它们可能可以通过一些取消删除的软件来恢复，然后你可以通过这些更改取消选择你的​​ WC（尝试恢复以前的版本，然后将文件作为补丁应用）

# iphone - 如何在调用dismissmodalviewcontroller 之前加载呈现视图控制器？

> ID：10536359
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:37:43.240
> 
> 标签：iphone, ios

我试图在关闭 modalviewcontroller 之前运行自定义动画。动画效果很好，但结果是黑屏，因为我假设当前视图控制器尚未加载。有没有办法加载presentingViewController，执行我的动画，然后关闭modalviewcontroller。

注意：presentingViewController 当前指向我的 tabbarcontroller，而不是显示 modalview 的实际 uiviewcontroller。

谢谢！

```
[UIView beginAnimations:@"suck" context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:103 forView:self.navigationController.view cache:YES];
[[self navigationController].view setHidden:YES];
[UIView setAnimationPosition:CGPointMake(260, 431)];
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:40:17.123

所以我发现另一种方法是创建模态视图的屏幕截图图像，关闭动画设置为 NO 的模态视图控制器，然后在前一个视图控制器的顶部为图像设置动画。

感谢[我如何在 iOS 上的视图之间进行扩展/收缩转换？](https://stackoverflow.com/questions/7109707/how-do-i-make-an-expand-contract-transition-between-views-on-ios)用于显示如何生成图像。

# c# - 与 C# 相比，在 Objective C 中实现协议的语法？

> ID：10536360
> 
> 赞同：1
> 
> 时间：2012-05-10T14:37:45.140
> 
> 标签：c#, objective-c

尽管我在 Objective C 方面没有经验，但我公司的意外事件导致我在很短的时间内被起草并发布了一个 iphone 应用程序。我在遵循一些语法时遇到了麻烦：

我有以下方法定义：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

它存在于使用此接口定义的类中：

```
@interface TableExampleViewController : UIViewController 
    <UITableViewDelegate, UITableViewDataSource>
{
    NSArray *lightbulbs;
} 
```

方法声明是什么意思？我理解`UITableViewCell *)`是返回类型，`cellForRowAtIndexPath`是方法名，`(NSIndexPath *) indedPath`是参数，但是有什么意义`tableView:(UITableView *)tableView`呢？我认为它与类实现的协议有关。c# 中的等效语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:43:33.817

在 Objective-C 中，方法名包括所有参数名，所以方法名是

```
tableView:cellForRowAtIndexPath: 
```

其中包括两个冒号`:`。

它与协议实现无关——它只是在 Objective-C 中命名方法的方式。所以想象中的 C# 等价物就是

```
UITableViewCell tableViewcellForRowAtIndexPath(UITableView tableView, NSIndexPath indexPath) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:47:23.737

```
tableView: cellForRowAtIndexPath: 
```

是方法名，和c#的命名不同。在 c# 中，方法定义可能是

```
UITableViewCell GetCellFromTableViewAtIndexPaht(UITableView tableView, NSIndexPath indexPath) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:44:04.183

这就是委托设计模式。基本上，您的 UIViewController 类中的 UITableView 实例要求您的视图控制器为指定的索引提供一个 UITableViewCell。因此，假设您的视图控制器中有一系列歌曲，并且您希望它们出现在表格视图中。然后，您将创建一个新的 UITableViewCell，将其 textLabel.text 设置为指定索引 (indexPath.row) 处歌曲的标题并返回该单元格。因为出于性能原因你应该重用 UITableViewCells，我建议阅读文档中的 Table View Programming Guide，尤其是[Populating a Table View](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW11)

# ios - 我尝试写入文件后文件不存在 IOS

> ID：10536370
> 
> 赞同：1
> 
> 时间：2012-05-10T14:38:08.980
> 
> 标签：ios, ios5

我有一个现有文件，我想删除它的内容，然后再次写入，但只能逐行附加。这是我的代码，不确定为什么它不起作用：

```
if ([filemgr removeItemAtPath: fileName error: NULL]  == YES){
        NSLog (@"Remove successful");
    }
    else{
        NSLog (@"Remove failed");
    }

    NSString *cachePath = [[NSString alloc] initWithFormat:@"%@",fileName];
    NSFileHandle *fileHandler = [NSFileHandle fileHandleForUpdatingAtPath:cachePath];
    BOOL isFirst = NO;

    for(id entry in serializedObjects){
        NSString *sectionName = [NSString stringWithFormat:@"!%@\n", entry];
        [fileHandler writeData:[sectionName dataUsingEncoding:NSUTF8StringEncoding]];

        if (!isFirst) {
            [fileHandler seekToEndOfFile];
            isFirst = YES;
        }

        NSArray *list = [serializedObjects objectForKey:entry];

        for (int i = 0; i < list.count; i++) {
            NSString *line = [[list objectAtIndex:i] stringByAppendingString:@"\n"];
            [fileHandler writeData:[line dataUsingEncoding:NSUTF8StringEncoding]];
        }

        [fileHandler writeData:[[NSString stringWithFormat:@"%@", @"~\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    }

[fileHandler closeFile]; 
```

我的想法是将第一行写入文件并附加其他行。有人看到我在这里做错了吗？

此方法完成后，我看不到任何错误，但在我手动检查后，我尝试写入的文件不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:43:53.347

您的文件句柄写入不会立即写入磁盘的 I/O 缓冲区。因为 io 很慢，这是文件句柄对象中内置的效率。为确保它写入磁盘，您必须使用 synchronizeFile 刷新 io 缓冲区。完成文件句柄后，您还需要调用 closeFile（这也将同步，因此同步是可选的）。

# jquery - 如何使用 JQuery 重定向并同时打开一个新窗口？

> ID：10536371
> 
> 赞同：0
> 
> 时间：2012-05-10T14:38:09.420
> 
> 标签：jquery, redirect, hyperlink, window

我正在处理一个用户有两个按钮的页面。一个按钮只是将它们重定向到主页，另一个按钮不仅将它们重定向到主页，而且还会打开一个新窗口/选项卡到不同的链接。

```
 <button class="return" type="button">
        <?= $html->image('cross.gif') ?> Return
      </button>
      <button class="walletcards" type="button">
        <?= $html->image('cross.gif') ?> Print Wallet Cards
      </button>

    <script type="text/javascript">
      $(document).ready( function() {
         $('button.return').click( function() {
         $(window.location).attr('href','/accounts/view/<?=$data['Email']  ['acctgrpid'];   ?>');
});

$('button.walletcards').click(function(){
 $(location).attr('href', '/accounts/view/<?=$data['Email']['acctgrpid']; ?>')
 });

 $('button.walletcards').click(function(){
  window.close();
  window.open('/wallet_cards/account/<?=$data['Email']['acctgrpid']; ?>');
  }); 
```

现在我的问题有效，但它为链接打开了两个窗口/选项卡（“/wallet_cards/account....）我如何阻止它打开两个窗口/选项卡，或者有更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:46:29.010

您的代码与您所描述的内容相比有点令人困惑。看起来您的代码正在做的是向按钮添加 2 个单击事件，一个重定向到帐户，一个关闭窗口并打开一个新的到 wallet_cards/account。

此外，您的 window.close() 位于您的 window.open() 之前...我会反转这些以防止出现问题。

所以我会更新为：

```
$('button.walletcards').click(function() {
    window.open('/wallet_cards/account/<?=$data['Email']['acctgrpid']; ?>');
    window.location.href = '/wallet_cards/account/<?=$data['Email']['acctgrpid']; ?>';
    //window.close();  // Not sure why you are redirecting but then closing the window...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:42:01.057

你为什么不尝试把这两个动作放在同一个函数中呢？

```
$('button.walletcards').click(function(){
  window.close();
  window.open('/wallet_cards/account/<?=$data['Email']['acctgrpid']; ?>');

 $(location).attr('href', '/accounts/view/<?=$data['Email']['acctgrpid']; ?>')
 }); 
```

# jquery - jQuery触发点击第一个孩子

> ID：10536374
> 
> 赞同：5
> 
> 时间：2012-05-10T14:38:22.663
> 
> 标签：jquery, triggers, click

我试图`.loader`在文档准备好时调用第一个孩子的点击，但没有成功：

html:

```
<a class="loader" data-target="david-boy" title="Danny Boy-Rivera">
    <span class="img"><span class="play"></span><img src="img/gallery-image1.jpg" alt="" /></span>
    <h2>Danny Boy</h2>
</a> 
```

jQuery：

```
//Does not work
$('a.loader:first-child').bind('click');
$('a.loader:first-child').trigger('click');
$('a.loader:first-child').click();
//Works
$('a.loader:first-child').css("background", "red"); 
```

任何想法为什么？

## 更新

处理程序：

```
$('.loader').click(function(){
    var name=$(this).data("target");
    callVideo(name);
}); 
```

## 更新2

所以问题是我`:first-child`在处理程序之前声明了这个动作。我改变了他们的位置，一切都好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T14:47:05.453

您是否在启动触发的“点击”**之前**定义了处理程序？

这是您的小提琴中完全相同的代码，除了我将处理程序放在触发器**之前**

```
$(document).ready(function(){
    $('.loader').click(function(){
       alert($(this).data("target")); 
    });
    $('.loader:first-child').click();
    $('.loader:first-child').css("background", "red");
});​ 
```

这将弹出您正在寻找的警报

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T14:40:55.370

你需要有一个点击事件的处理程序......

```
$('a.loader:first-child').click(function(){
    alert('clicked');
});

$('a.loader:first-child').click(); 
```

* * *

**更新：**

您的处理程序可能在元素准备好之前已附加。

```
$(function(){
    $('.loader').click(function(){
        var name=$(this).data("target");
            callVideo(name);
    });
}); 
```

# c# - 尝试在 VS2008 中创建新的 WinCE 项目时出错

> ID：10536380
> 
> 赞同：0
> 
> 时间：2012-05-10T14:38:50.557
> 
> 标签：c#, visual-studio-2008, windows-ce

我正在使用 Visual Studio 2008，并且正在尝试创建一个新的 WinCE 项目。但是当我创建项目时，出现错误：

![错误模板](../Images/8e809d1d82b3eaea8730c81e25536bdc.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:25:38.180

您使用的 Visual Studio 的 SKU 是什么（Express、Standard、Pro、Ultimate）？设备开发仅在 Professional 或更好的 IIRC 中可用（它随 Studio 的每个版本而变化）。如果您有正确的 SKU，您还必须确保已安装设备开发支持（可以在安装期间取消选中）。如果这两个都是真的，那么检查指示的文件是否存在 - 如果不存在，我会修复或重新安装 Studio。

# facebook-apps - Facebook Canvas 应用高度小于 800 像素

> ID：10536385
> 
> 赞同：2
> 
> 时间：2012-05-10T14:39:15.233
> 
> 标签：facebook-apps

我有 2 个 facebook 应用程序，一个是 872px 高度，另一个是 712px 高度。对于 827px 应用程序，我已使用 facebook JS SDK 成功地将应用程序的大小从 800 重新调整为 872px。但是对于 712 像素，我无法将其从 800 像素降低。facebook canvas 应用程序是否有最小高度，或者我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:29:23.267

显然 Canvas APP 不能低于 800 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:53:39.433

您是否尝试过动态设置高度？这对我有用，因为我试图显示高度小于 800 像素的多个页面。我的页面标签的通常高度约为 700 像素。

```
window.fbAsyncInit = function() {
   FB.init({
      appId: window.FB_APP_ID
   });

   // set height dependent on page (min height is 800px) 
   // but we are attempting to get it shorter
   var body_height = $('body').first().outerHeight();

   FB.Canvas.setSize({ 
      height: body_height
   });
} 
```

什么也对我有用，如果不抓住身体高度是将高度设置为比加载时的任何页面都短，然后触发 setAutoGrow() 函数将其扩展到适当的高度，但会有一些延迟。虽然这会导致您的画布成为初始设置的高度（例如 480 像素），然后每当您的超时触发时都会扩大到大小。

```
window.fbAsyncInit = function() {
   FB.init({
      appId: window.FB_APP_ID
   });

   FB.Canvas.setSize({ 
      height: 480 // some height shorter than necessary
   });

   setTimeout(function(){
      FB.Canvas.setAutoGrow();
   }, 500);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T15:28:59.153

处理它：

```
 FB.Canvas.getPageInfo(
        function(info) {
            // console.log(info);
            if (info.clientHeight< 800) FB.Canvas.setSize({ height: 800 });
        }
    ); 
```

# linux - 如何在linux中了解特定端口的流量

> ID：10536386
> 
> 赞同：7
> 
> 时间：2012-05-10T14:39:16.360
> 
> 标签：linux, port, traffic, network-traffic

我正在寻找一段时间内通过特定端口的流量。例如，通过 3306 端口的流量持续 10 秒。有没有办法找到这些信息？

我看到“/sbin/ifconfig eth0 05”可用于获取有关总字节数的信息，但我正在寻找有关特定端口流量的信息。

提前致谢，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T14:42:15.493

```
tcpdump -i eth0 -s 1500 port 3306 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-07T07:06:32.930

```
sudo iftop -P -n -N -m 10M -f 'port 3260' 
```

*   -P 显示端口
*   -n 不查找主机名
*   -N 显示端口而不是服务名称
*   -m 带宽规模限制
*   -f 过滤规则

# javascript - jQuery 滑块在 IE 中不起作用

> ID：10536388
> 
> 赞同：0
> 
> 时间：2012-05-10T14:39:18.357
> 
> 标签：javascript, jquery, html, css, slider

我的代码在除 IE 之外的所有浏览器上都能完美运行。我尝试了所有可以在论坛上找到的解决方案，但都没有成功。我还在学习 JavaScript，所以我稍后会学习 jQuery。问题是在 IE 中，幻灯片垂直显示，没有效果。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <link href="stylesheet...css" rel="stylesheet" type="text/css" />

    <title>div test</title>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="jquery.bxSlider.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function(){
            var slider = $('#slider1').bxSlider({
                controls: false
            });

            $('#bx-prev').click(function () {
                slider.goToPreviousSlide();
                return false;
            });

            $('#bx-next').click(function () {
                slider.goToNextSlide();
                return false;
            });
        });
    </script>
</head>

<body>
    <div id="slider1">
        <div>
            <div id="wrapper">
                <div id="head"><img alt="logo" align="left" src="logo.png"/></div>
                <div id="main"> <div id="content">content</div> </div>
                <div id="rash"><img alt="r" align="middle" 
                                    style="position:relative;top:-70px;" 
                                    src="image1.png"/></div>
                <div style="clear:both"></div>
            </div>
        </div>
        <div>
            <div id="wrapper">
                <div id="head"><img alt="logo" align="left" src="logo.png"/></div>
                <div id="main"> <div id="content">content</div> </div>
                <div id="rash"><img alt="r" align="middle" 
                                    style="position:relative;top:-70px;"
                                    src="image1.png"/></div>
                <div style="clear:both"></div>
            </div>
        </div>
        <div>page3</div>
        <div>page4</div>
    </div>
    <div id="bx-next">next</div>
    <div id="bx-prev">prev</div>
</body>
</html> 
```

这是我的样式表：

```
div#head {
    width:100%;
    height:100px;
    /*background-color:antiquewhite;*/
    margin-bottom:100px;
}

div#content {
    border-left: 2px solid #F0F8FF;
    border-right: 2px solid #8a815d;
    border-top: 2px solid #8a815d;
    border-bottom: 2px solid #8a815d;
    width:400px;
    height:300px;
    -webkit-border-radius: 0px 28px 20px 0px;
    -moz-border-radius: 0px 28px 20px 0px;
    border-radius: 0px 28px 20px 0px;
    font-family:Arial,Helvetica,sans-serif;
    color:#8a815d;
    padding-left:100px;
    background-color:#F0FFFF;
    background-color: rgba(215,227,211,0.3);
    position:relative;
    top:20px;
    left:0px
}

div#wrapper {
    width: 100%;
    margin-top: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
    margin-right: 0px;
    padding: 0px;
}

div#main {
    /* background-color:black;*/
    width:50%;
    height:360px;
    float:left;
}

div#rash {
    float:right;
    /*background-color:blue;*/
    height:360px;
    width:50%;
}

body {
    background-color: #E8F3F9;
    background-image: url('squares layer.png');
    background-repeat:no-repeat;
    background-size:cover;
    background-position:center;
}

/*next button*/
#bx-next {
    position:absolute;
    top:45%;
    right:3px;
    z-index:998;
    width: 30px;
    height: 30px;
    text-indent: -999999px;
    background: url(gray_next.png) no-repeat 0 -30px;
}

/*previous button*/
#bx-prev {
    position:absolute;
    top:45%;
    left:4px;
    z-index:998;
    width: 30px;
    height: 30px;
    text-indent: -999999px;
    background: url(gray_prev.png) no-repeat 0 -30px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T16:50:30.010

我也遇到了类似的问题，我还没有得出结论，但到目前为止我发现要调试这个问题，你应该从验证你的代码开始。 [http://validator.w3.org/](http://validator.w3.org/) 我复制了你的代码，它说你有 5 个错误，所以我认为首先要修复这些错误，因为 IE 非常挑剔，如果你有任何错误可能会影响你的格式。另外我知道 IE 对代码顶部的文档类型很挑剔，如果不正确，它也会影响页面的格式。如果我能解决我的类似问题，我会通知您，因为这很可能与您遇到的问题相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:45:14.027

`<div id="wrapper">`被定义两次。页面上每个元素的 ID 都必须是唯一的。`<div id="head">`,`<div id="main">`和`<div id="content">`也是如此`<div id="rash">`。

另外，您是否尝试过在 IE 控制台中调试它？尝试查看控制台是否在运行时记录任何错误。然后回到 SO 并发布这些错误。

干杯。

# r - 在 ggplot2 中使用 grconvertX/grconvertY

> ID：10536396
> 
> 赞同：9
> 
> 时间：2012-05-10T14:39:44.130
> 
> 标签：r, ggplot2, lattice

我想弄清楚如何在 ggplot 中使用 grconvertX/grconvertX。我的最终目标是通过从用户坐标到设备坐标来为**ggplot2**图形（可能还有lattice **）**添加注释。我知道它可以用 grobs 完成，但我想知道是否有更简单的方法。`grid.text``grid.lines`

以下代码允许我将值从用户坐标传递到 ndc 坐标，并使用这些值用`grid.text`.

```
graphics.off()      # close graphics windows   

library(grid)
library(gridBase)

test= data.frame(
  x = c(1,2,3),
  y = c(12,10,3),
  n = c(75,76,73)
  )

par(mar = c(13,5,2,3))

plot(test$y ~ test$x,type="b", ann=F)

for (i in 1:nrow(test))

{
  X=grconvertX(i , from="user", to="ndc")
  grid.text(x=X, y =0.2, label=paste("GRID.text at\nuser.x=", i, "\n", "ndc.x=", (signif( X, 5))   ) ) 
  grid.lines(x=c(X, X), y = c(0.28, 0.33) )
}
#add some code to save as PDF ... 
```

![在此处输入图像描述](../Images/dbf2b27954477653765a0b5dc1c98fed.png)

该代码基于我之前的一篇文章中的解决方案：[混合 X 和 Y 坐标系](https://stackoverflow.com/questions/10471277/mixing-x-and-y-coordinate-systems)。您可以看到原始绘图中的 x 坐标是如何转换为 ndc 的。这种方法的优点是我可以为 Y 使用设备坐标。

**我以为我可以在ggplot2**（也可能在**lattice**）中轻松地做同样的事情。

```
library(ggplot2)
graphics.off()      # close graphics windows   

qplot(x=x, y=y, data=test)+geom_line()+  opts(plot.margin = unit(c(1,3,8,1), "lines"))

for (i in 1:nrow(test))

{
  X=grconvertX(i , from="user", to="ndc")
  grid.text(x=X, y =0.2, label=paste("GRID.text at\nuser.x=", i, "\n", "ndc.x=", (signif( X, 5))   ) ) 
  grid.lines(x=c(X, X), y = c(0.28, 0.33) )
}

#add some code to save as PDF... 
```

但是，它不能正常工作。坐标好像有点不对。垂直线和文本与图上的刻度标签不对应。谁能告诉我如何解决它？提前非常感谢。

![在此处输入图像描述](../Images/dee98bd0f3eadb2d214f7870622d6c6b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T17:36:54.263

`grconvertX`and函数使用`grconvertY`基本图形，而 ggplot2 使用网格图形。一般来说，这两种不同的图形引擎不能很好地协同工作（尽管您已经演示了使用`gridBase`to help）。您的第一个示例有效，因为您从基本图形开始，因此用户坐标系与基本图形一起存在并`grconvertX`从中转换。在第二种情况下，用户坐标系从未在基本图形中设置，因此看起来它可能使用默认坐标 0,1，这与顶部视口坐标相似但不完全相同，因此您会得到类似但不完全正确的东西（我真的很惊讶你没有收到错误或警告

通常对于网格图形，在坐标之间进行转换的等价物是仅使用感兴趣的坐标系创建一个新的视口（或使用正确的坐标系推送/弹出到现有视口），然后在该视口中添加注释。

这是一个创建绘图的示例，然后向下移动到包含主绘图的视口，创建一个具有相同尺寸但关闭裁剪的新视口，x 比例基于数据，y 比例为 0,1 ，然后相应地添加一些文本：

```
library(ggplot2)
library(grid)

test= data.frame(   x = c(1,2,3),   y = c(12,10,3),   n = c(75,76,73)   )  

qplot(x=x, y=y, data=test)+geom_line()+  opts(plot.margin = unit(c(1,3,8,1), "lines"))  

current.vpTree()
downViewport('panel-3-4')
pushViewport(dataViewport( test$x, clip='off',yscale=c(0,1)))

for (i in 1:nrow(test))  {
    grid.text(x=i, y = -0.2, default.units='native',
        label=paste("GRID.text at\nuser.x=", i, "\n"   ) )
        grid.lines(x=c(i, i), y = c(-0.1, 0), default.units='native' )
 } 
```

这里棘手的事情之一是 ggplot2 没有设置视口比例以匹配正在绘制的数据，而是自己进行转换。在这种情况下，根据 x 数据设置比例是可行的，但如果 ggplot2 做了一些更有趣的事情，那么这可能不起作用。我们需要的是某种方法来从 ggplot2 获取转换后的坐标，以便在对 grid.text 的调用中使用。

# python - OpenCV：从摄像头编写视频，奇怪的结果（Python 和 Mac）

> ID：10536397
> 
> 赞同：0
> 
> 时间：2012-05-10T14:39:51.443
> 
> 标签：python, macos, opencv

我正在尝试从网络摄像头中抓取帧，然后将它们写入视频中。它有效，视频显示了一些东西，但它没用。

在这里，您可以看到我获得的视频示例：

![我得到的那种视频](../Images/5c0a9ef3c5432e8058fa12ed916cb144.png)

脚本很大，所以我会尝试为这个问题挑选相关的部分：

```
import cv
capture = cv.CaptureFromCAM(1) # from webcam
frame  = cv.QueryFrame(capture)
newvideo = 'Videos/%d_%d_%d_%d_%d_%d.avi' % (localtime()[0],localtime()[1],localtime()[2],localtime()[3],localtime()[4],localtime()[5])
video = cv.CreateVideoWriter(newvideo, cv.CV_FOURCC('D','I','V','X'), 30, cv.GetSize(frame), 1)

while(1):
frame  = cv.QueryFrame(capture)
cv.WriteFrame(video, frame)
key = cv.WaitKey( int((1/30.)*1000)+1 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:20:03.893

提示：开始防御性地编码并检查您拨打的电话的返回。例如：

```
video = cv.CreateVideoWriter(newvideo, cv.CV_FOURCC('D','I','V','X'), 30, cv.GetSize(frame), 1)    
if not video :
    print "Error in creating video writer"
    sys.exit(1) 
```

[这可能是与编解码器相关的问题，因此请尝试使用其他编解码器](https://stackoverflow.com/questions/1136989/creating-avi-files-in-opencv/1137034#1137034)创建视频：

```
video = cv.CreateVideoWriter(newvideo, cv.CV_FOURCC('F','L','V','1'), 30, cv.GetSize(frame), 1) 
```

更新已安装的可能是个好主意。

# java - 在不运行 RSA Authentication Manager 的情况下将 RSA SecurID 集成到 Web 应用程序

> ID：10536402
> 
> 赞同：5
> 
> 时间：2012-05-10T14:40:00.537
> 
> 标签：java, rsa, securid

我对 RSA SecurID 完全陌生。我必须在 Java Web 应用程序中使用它进行身份验证。是否可以通过创建适当的数据库结构、使用 RSA 提供的 jar 文件和配置来做到这一点，或者我必须安装独立的 RSA 身份验证管理器应用程序并在我想对用户进行身份验证时使用适当的 API 访问它（或处理令牌注册ETC）？

我在 Windows 环境中工作。如果运行 RSA Authentication Manager 是不可避免的，那么只有 Windows 2003 和 2008 服务器可以运行应用程序吗？有没有解决方法？该文件说： [http ://www.rsa.com/products/securid/datasheets/11575_h9052_amsp_ds_0312.pdf](http://www.rsa.com/products/securid/datasheets/11575_h9052_amsp_ds_0312.pdf)

我知道来自另一个供应商的其他令牌类型，可以通过在我的应用程序中简单地使用一些 jar 来处理，第一眼看上去我很惊讶，似乎我必须在其上运行一个 Windows 服务器和一个健壮的应用程序才能做一些事情使用 RSA SecurID 进行“入门”测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-04T18:22:14.753

您需要 RSA SecurID 身份验证引擎 (SAE) API。SAE 是在其应用程序中内置了用户管理、安全策略、密码管理和报告功能的组织的理想解决方案。您可以调用这些 API 来验证令牌。

[详细信息可以在这里找到](http://www.emc.com/security/rsa-securid/rsa-securid-authentication-engine.htm#!details)

# jquery - Jquery TextArea 在更改事件上添加类并在提交时禁用其他元素

> ID：10536407
> 
> 赞同：0
> 
> 时间：2012-05-10T14:40:27.733
> 
> 标签：jquery, class

我正在尝试在 keyup 事件上向 textarea 添加一个类。事件正在触发，但没有添加类。在这里，如果该类不存在，我将尝试将其添加到该 textarea 实例

```
 $("textarea").live("keyup", function() {
    $("this[class='']").addClass("modified");
      }); 
```

在提交期间，我使用下面的代码来禁用那些没有修改类的代码。但这不是提交任何 textareas 。所以看起来上面的代码中没有添加任何类。

```
$("textarea:not(.modified)").attr("disabled", "disabled"); 
```

有人可以帮我看看这段代码有什么问题吗？

谢谢

问候

基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:42:43.707

它应该是

```
$("textarea").live("keyup", function(e) {
  $(e.target).addClass("modified");
}); 
```

如果该类已经存在，则不会添加该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:46:45.107

我看到两种可能性：

在 jQuery 中使用关键字`this`时，不需要引号。

我会尝试类似的东西：

```
if ( !($(this.hasClass("modified")) ){

     $(this).addClass("modified");
} 
```

第二个问题可能是您试图向没有类的对象添加一个类，该字段上是否可能已经存在另一个类？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:50:19.507

基兰，

我对此进行了测试，它确实在 keyup 上添加了类。试试这个而不是你的代码，看看它是否有效。

```
$('textarea').keyup(function() {
    $(this).addClass("modified");
  }); 
```

你提交时的表单是什么样的？您是否厌倦了在代码中添加一个调试器来查看您`$("textarea:not(.modified)").attr("disabled", "disabled");`是否受到攻击？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:54:37.117

```
 $("textarea").on("keyup", function() {
       $(this).addClass("modified");
  }); 
```

# iphone - 为 iPhone 中的现有应用程序启用推送通知服务？

> ID：10536408
> 
> 赞同：0
> 
> 时间：2012-05-10T14:40:31.283
> 
> 标签：iphone

我在 iPhone 中有一个应用程序，我正在尝试实现推送通知。我已经为这个项目创建了 appstore 和 adhoc 证书。现在我很困惑如何为现有证书启用推送通知。任何人都可以给我要遵循的步骤。当我通过谷歌时，我只有一个模糊的想法。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:43:34.907

使用本教程。他们对此有很好的解释

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

# jquery - JQuery，点击时淡入背景图片

> ID：10536418
> 
> 赞同：0
> 
> 时间：2012-05-10T14:41:04.653
> 
> 标签：jquery

我希望背景图像在“点击”时淡出，这就是我现在得到的。它工作正常，但我希望图像在点击时淡入...

```
$(document).ready(function() {
//this represents window.load in javascript.

//now to select the element suppose you have anchor tag <a> with id=clickme

$("#test").click(function() {

//select the element whose background image you want to change. suppose with id=imgBack
$("body").css({'background-image':'url(url to image)'}); 

})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:50:08.540

您需要创建一个 div，并在其中放置背景图像，然后将其设置为 display:none;

然后在您的点击功能上执行此操作

```
$('#wrapperdiv').fadeIn(); 
```

在 fadeIn() 函数中，你可以传入一个数字，告诉它你希望它以多快的速度淡入（以毫秒为单位），所以如果你想让它动画 400 毫秒，你可以这样写 .fadeIn(400);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:07:19.280

这是[现场示例](http://jsfiddle.net/riateche/FfV4Z/)。

HTML：

```
<body>
  <div id="no_background"></div>
  <div id="wrapper">
    <!-- page content goes here -->
    <input type="button" id="test" value="Show background">  
  </div>
</body> 
```

CSS：

```
body {
  background: url(/path/to/background.png);
}

#no_background {
  background: white;    
  position: fixed;
  left: 0px;
  top: 0px;
  width: 100%;
  height: 100%;
  z-index: 1;
}

#wrapper {
  position: relative;
  z-index: 2;
} 
```

JS：

```
$("#test").click(function() {
  $("#no_background").fadeOut();
}); 
```

# xaml - 在 ListView.View Gridview 中触发 RadioButton 检查事件

> ID：10536424
> 
> 赞同：0
> 
> 时间：2012-05-10T14:41:33.863
> 
> 标签：xaml, listview, gridview, datatemplate

我有一个使用 GridView 作为视图的 ListView，并且列表中的每个项目都有一个带有 RadioButton 的 DataTemplate。我试图弄清楚如何检查第一个（或任何） RadioButton 并实际触发 Checked 事件。这是我的xml：

```
 <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Selected">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <RadioButton    Name="selectedFoo" 
                                                    Checked="selectedRadio_Checked"
                                                    IsChecked="True"

                                                    Tag="{Binding Id}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Id" DisplayMemberBinding="{Binding Id}"/>
                        <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}"/>
                    </GridView>
                </ListView.View>
            </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:28:51.570

我最终将处理程序附加到单选按钮加载事件并将其称为 Checked 处理程序。不是最好的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T17:56:19.603

```
private void RadioListBox_SelectionChanged(object sender, RoutedEventArgs e)
{
    var button = sender as RadioButton;
    MessageBox.Show(button.Tag.ToString());
} 
```

```
<ListView Margin="18,32,20,45" Name="lstVW" ItemsSource="{Binding}">
    <ListView.View>
        <GridView>
             <GridViewColumn Header="ID" DisplayMemberBinding="{Binding Id}" Width="50"/>
             <GridViewColumn Header="Drug Generic Name" DisplayMemberBinding="{Binding Name}" Width="700"/>
             <GridViewColumn Header="Status" DisplayMemberBinding="{Binding Status}" Width="100"/>
             <GridViewColumn Header="Status">
                 <GridViewColumn.CellTemplate>
                      <DataTemplate>
                           <StackPanel>
                                <RadioButton x:Name="rad" GroupName="optionsStatus" IsChecked="False" Tag="{Binding Id}" Background="WhiteSmoke" Height="30"  Click="RadioListBox_SelectionChanged"/>
                           </StackPanel>
                      </DataTemplate>
                 </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

# ajax - 如何在生成 PDF 文件以供下载时显示进度条，而不出现 IE“下载”警告

> ID：10536425
> 
> 赞同：4
> 
> 时间：2012-05-10T14:41:33.850
> 
> 标签：ajax, spring, post, client-server, download

我已经在客户端和服务器之间进行了通信。过程很简单：

1.  我正在向在文件系统中生成 pdf 的控制器发出 AJAX POST 请求
2.  上述请求成功后，将发出表单 GET 请求以取回 pdf，并打开标准浏览器“保存或打开”对话框

我有一个两步过程的原因是因为我需要在生成 pdf 时有一个进度条。

第二个请求是表单提交而不是 AJAX 请求的一部分的原因是因为我无法获得标准浏览器的“保存或打开”对话框。

这种方法的问题是 IE7 和 IE8 会弹出一个恼人的通知栏，通知用户下载内容很危险，我不希望这样。

所以：

1.  我需要进度条。
2.  如果我只请求 AJAX 请求，我需要一种方法来弹出“保存或打开”对话框。
3.  如果我使用 GET 提交表单，我需要一种知道何时生成文件以停止进度条的方法，例如服务器和客户端之间的共享标志。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:51:05.090

一种可能（有点反模式）的解决方法是这样，但这可能不是一个很好的设计

但是我以前见过这个（并且承认我这样做过），除了一些内疚之外，它确实起到了作用

*   用户单击指向生成 PDF 的 servlet 的链接，然后等待（应应用超时设置）直到它准备好...（Content-Disposition 标头等...），就像常规下载一样

*   servlet 将在生成 PDF 时报告共享会话变量的进度

*   对服务器的 AJAX 调用将从会话变量中读取进度并向用户显示

*   PDF 完成后，浏览器只会下载它（可能存在请求超时风险）

这里的主要问题是使用请求线程作为工作线程并阻止它，这可能会给这个答案带来一些反对意见......

我对 Message Driven Beans 不太熟悉，但这是另一个可能更好的解决方案。

# eclipse - 使用 ant-errors 更新 Eclipse 工作区

> ID：10536428
> 
> 赞同：1
> 
> 时间：2012-05-10T14:41:37.420
> 
> 标签：eclipse, ant, pdflatex

我有托管在 Eclipse 环境中的 LaTeX 项目。为了编译 LaTeX 代码，我使用了一个`pdflatex.exe`从本地 MiKTeX 安装调用的 ant 脚本。到目前为止，这对我来说很好。

现在的问题是：如果编译`pdflatex.exe`检测到文件中的一些错误`.tex`。有没有办法从ant脚本告诉eclipse，哪些文件有错误，并在项目资源管理器中用红色标记或其他东西标记这些文件，以便于识别？

这些标记称为*标签装饰*。如何通过 ant 脚本设置它们？是否有一些最终可以设置的文件属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:36:55.893

您无法通过 Ant 脚本在项目资源上添加错误标记，但您可以尝试可能为您完成工作的[TeXlipse插件。](http://texlipse.sourceforge.net/screenshots/)

# mysql - 一个查询可以引用两个特定的表

> ID：10536437
> 
> 赞同：1
> 
> 时间：2012-05-10T14:42:07.497
> 
> 标签：mysql, database, join, left-join

这已经涉及到四个 INNER JOIN 和一个 LEFT JOIN，但我不确定如何再引用一个类似于 LEFT JOIN 表的表。

这是我当前的查询，它可以正常工作

```
 SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, count(xvi.variantid) as cnt
    FROM xcart_products xp
    INNER JOIN xcart_variants xv ON xp.productid = xv.productid
    INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
    INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
    INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
    LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
    GROUP BY xco.optionid
    ORDER by xp.product DESC 
```

所以基本上每个产品都有一个类和一个变体，然后每个类都有类选项，每个变体都有变体项目。变体有自己的变体图像，每个类都有自己的“详细”图像（xcart_images_D）。到目前为止，我正在引用变体图像，但我想做的不是计算 xvi.variantid，而是计算每个 optionid 有多少详细图像。

我有一个可以执行此操作的查询，但不幸的是我无法使用此查询来提取 xcart_images_W。那个查询是 belo

```
 SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiD.image_path, xiD.path_on_server, count(xiD.optionid) as cnt
    FROM xcart_products xp
    INNER JOIN xcart_classes xc ON xp.productid = xc.productid AND xc.class = 'Color'
    INNER JOIN xcart_class_options xco ON xc.classid = xco.classid
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco.optionid
    GROUP BY xp.product, xco.optionid
    ORDER by xp.product DESC 
```

是否可以引用这两个表或它们的外键使其无法这样做？

下面我提供了表结构。

```
+ xcart_products
    - productid*
    - product
+ xcart_variants
    - variantid*
    - productid (xcart_products.productid)
+ xcart_variant_items [bridge table]
    - optionid*
    - variantid (xcart_variants.variantid)
+ xcart_classes
    - classid*
    - productid (xcart_products.productid)
    - class
+ xcart_class_options
    - optionid*
    - option_name
    - classid (xcart_classes.classid)
+ xcart_images_W
    - imageid*
    - id (xcart_variants.variantid)
    - image_path
+ xcart_images_D
    - imageid* [not relational with xcart_images_W.imageid]
    - id (xcart_products.productid)
    - optionid (xcart_class_options.optionid)
    - image_path

* Primary Key
() relational data
[] notes 
```

目前正在工作但查询混乱。我该如何清理？

```
 SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path
 FROM xcart_products xp
 INNER JOIN xcart_variants xv ON xp.productid = xv.productid
 INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
 INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
 INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
 LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
 LEFT JOIN (
 SELECT COUNT(xiD.optionid) as dCount 
    FROM xcart_products xp2
    INNER JOIN xcart_classes xc2 ON xp2.productid = xc2.productid AND xc2.class = 'Color'
    INNER JOIN xcart_class_options xco2 ON xc2.classid = xco2.classid
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco2.optionid
 ) ON xiW.id = xvi.variantid
 GROUP BY xco.optionid
 ORDER by xp.product DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:23:20.903

在您提供表定义之前，这并不完全清楚。您是否尝试在第一个查询中将 count(xvi.variantid) 替换为 count(xiW.id) ？

更新：

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, count(xvi.variantid) as cnt
FROM xcart_products xp
INNER JOIN xcart_variants xv ON xp.productid = xv.productid
INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
LEFT JOIN (
   SELECT COUNT(xiD.id) as Dcount 
   FROM xcart_images_D xiD 
   INNER JOIN xcart_images_W xiW ON xiW.column = xiD.column /*please update accordingly */
 ) ON xiW.id = xvi.variantid 
GROUP BY xco.optionid
ORDER by xp.product DESC 
```

再次更新：

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, count(xvi.variantid) as cnt, xiD.totalD
FROM xcart_products xp
INNER JOIN xcart_variants xv ON xp.productid = xv.productid
INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
LEFT JOIN (
   SELECT count(xiD.id) as totalD, xiD.optionid FROM xcart_images_D xiD WHERE xiD.optionid = xvi.optionid
) ON xiD.optionid = xvi.optionid
GROUP BY xco.optionid
ORDER by xp.product DESC 
```

# javascript - 如何制作唯一的 div id？

> ID：10536439
> 
> 赞同：0
> 
> 时间：2012-05-10T14:42:11.943
> 
> 标签：javascript

这是我的html标记......问题是javascript循环不起作用......我犯了一些错误......我不知道为什么......我想循环$（'#opt_art'）.mouseover等...... . 并且每个循环都使脚本像第一个循环 $('#opt_art1).mouseover，第二个循环 $('#opt_art2).mouseover 等

```
<?php include('header.php'); ?>
    <script type="text/javascript">
        $(document).ready(function(){
            var i = 0;
            do{
                var num = i;
                $('#opt_art'+num).mouseover(function(){
                    $('.opsi'+num).show();
                });
                $('#opt_art'+num).mouseout(function(){
                    $('.opsi'+num).fadeOut(2000);
                });
                i++;    
            }
            while(i<=2);
        });
    </script>
    <?php
        for($i=1;$i<=2;$i++){
    ?>
        <div id="art_category"><p>News</p></div><!-- end of category -->
        <div id="art_title"><p>Sherlock Holmes 2</p></div><!-- end of art_title -->
        <div id="rounded_artikel">
            <li><img src="images/42897.jpg" width="110" height="110" class="art_image"/></li>
            <ul><li><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec bibendum bibendum magna at egestas. Sed commodo gravida arcu id accumsan. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque vulputate, velit vitae pellentesque condimentum, lectus mi tempor nisl, sed sagittis est massa eu justo. Cras sed quam sed mauris elementum consectetur. Nunc vitae tortor diam, in hendrerit risus. Nulla et diam non libero vehicula blandit. Etiam facilisis, risus mattis venenatis iaculis, risus dolor lobortis sapien, a malesuada magna nibh nec tellus. Integer viverra, sapien quis pellentesque lobortis, tellus erat mattis nulla, vitae laoreet erat dolor sed ante.</p></ul></li>
        </div><!-- end of rounded_artikel -->
        <div id="art_info">
            <img src="images/communication-icon.png" width="23" height="23" class="comment"/><li class="total_komentar"><a href="#">123</a> Komentar</li>
            <img src="images/40395696544694793.png" width="23" height="21" class="art_date_icon"/><li class="art_date">19-06-2012</li>
            <img src="images/1903484911.png" width="23" height="21" class="author_icon"/><li class="author">straw_hat</li>
            <div id="opt_art<?=$i;?>">Option<?php echo $i; ?></div>
            <div class="opsi<?=$i;?>"><center><a href="#">Readmore</a> | <a href="#">Comment</a></center></div>
        </div><!-- end of art_info -->
    <?php } ?>
<?php include('footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:44:09.963

您忘记增加`i`变量：

```
 ...
   });
   i++;
}
while(i<=5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:49:03.580

*为什么*它对您不起作用[已经](https://stackoverflow.com/a/10536485/444991) [得到](https://stackoverflow.com/a/10536482/444991)解答，但是我想为您正在做的事情提供*更好的选择。*

将事件处理程序绑定到多个元素有*异味*。您正在循环匹配的集合并*为每个元素*添加一个事件处理程序。

相反，您应该将处理程序附加到*一个*元素并利用[事件冒泡](https://softwareengineering.stackexchange.com/questions/110883/how-does-event-bubbling-generally-work-and-is-it-synonym-to-event-propagation)。这可以使用[`on()`](http://api.jquery.com/on)方法和可选的选择器来完成。

```
$(document).on('mouseover  mouseout', '[id^="opt_"]', function (e) {
    var el = $('.opsi'  + this.id.slice('opt_'.length));

    if (e.type === "mouseover") {
        el.show();
    } else {
        el.fadeOut(2000);
    }
}); 
```

上面的代码监听 a `mouseover`or`mouseout`事件触发，并检查它是否发生在 ID[以 开头的元素上](http://api.jquery.com/attribute-starts-with-selector/) `opt_`，如果发生则执行事件处理程序。

有关更多信息，您可以阅读完整的文档[`on()`](http://api.jquery.com/on)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:44:21.413

你不是在 incermenting`i`也可以只使用`i`variable 而不是第二个 var `num`。尝试这个。

```
var i = 1;
do{
   $('#opt_art'+i).mouseover(function(){
    $('.opsi'+i).show();
   });  
   $('#opt_art'+i).mouseout(function(){
        $('.opsi'+i).fadeOut(2000);
   });
}
while(i++<=5); 
```

# php - 测试数组 PHP

> ID：10536442
> 
> 赞同：1
> 
> 时间：2012-05-10T14:42:19.707
> 
> 标签：php

我在下面创建了一个数组：

```
$email[] = $post[0];

$email[].= $post[2]; 
```

结果是：

```
$email = Array ( [JESSICA] => jessica.doe@laerdal.com ) 
```

然后我将它传递给类构造函数：

```
$email_user = new Email($id,$email,$subject,$heading,$messages,$keys); 
```

该类如下所示：

```
class Email extends Users { 

protected $id;
public $strings;
public $user_email;
public $subject;
public $heading;
public $messages;
public $keys;

public function __construct($id,$user_email,$subject,$heading,$messages,$keys) {

parent::__construct($id);
$this->user_email = $user_email;
$this->subject = $subject;
$this->heading = $heading;
$this->messages = $messages;
$this->keys = $keys; 
```

如果我测试看看 $this->user_email 是否是一个数组，使用：

```
if(is_array($this->user_email)) {
   echo "TRUE";
} 
```

它返回假。怎么来的？

***我发现了问题，与名为 $email 的变量发生冲突。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:47:41.160

请注意，`.=`运算符的使用通常用于连接两个字符串。

通过说`$email[] = somevalue`，您实际上是在将值任意推入数组中，这对于您正在做的事情来说已经足够了。你最终得到：

```
$email[] = $post[0];
$email[] = $post[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:45:00.320

尝试：

```
public $user_email = array(); 
```

删除连接：`$email[].= $post[2];` `$email[] = $post[2];`很好。

# r - R bins 是列长度的百分比

> ID：10536443
> 
> 赞同：1
> 
> 时间：2012-05-10T14:42:20.080
> 
> 标签：r, transformation, bins

我有一个包含几列的表，值从 1 到 8。这些列有不同的长度，所以我在最后用 NA 填充它们。我想转换数据的每一列，所以我会为每一列得到类似的东西：

```
 1  2  3  4  5  6  7  8
0-25    1  0  0  0  0  1  0  2
25-50   5  1  2  0  0  0  0  1
50-75   12 2  2  3  0  1  1  1
75-100  3  25 1  1  1  0  0  0 
```

其中行名是原始列实际长度的百分比（即没有 NA），列名是原始 0 到 8 值，新值是每个百分比中原始值的出现次数。任何想法将不胜感激。

最好的，

林斯

PS/我意识到我原来的信息很混乱。我要转换的数据包含来自时间序列的许多列，如下所示：

```
1
1
8
1
3
4
1
5
1
6
2
7
1
NA
NA 
```

我需要计算在系列的 0-25%、25-50% 等范围内每个值（1 到 8）的出现频率。Joris 的回答非常有用。我可以处理它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:08:12.947

由于缺乏一些信息，我可以为您提供：

说0是没有发生，1是发生。然后，您可以将以下小脚本用于一列的结果。将它包装在一个函数中，将它应用到列上，你就会得到你需要的东西。

```
x <- c(1,0,0,1,1,0,1,0,0,0,1,0,1,1,1,NA,NA,NA,NA,NA,NA)

prop <- which(x==1) / sum(!is.na(x))*100
result <- cut(prop,breaks=c(0,25,50,75,100))
table(result) 
```

# php - MYSQL 排序功能，取决于使用数据库字段值作为数组键的算术运算

> ID：10536447
> 
> 赞同：3
> 
> 时间：2012-05-10T14:42:27.280
> 
> 标签：php, mysql, cakephp

我有产品表，有 2 个字段：价格、货币。货币字段中的可能值为 1、2、3。1 代表 MDL，2 代表美元，3 代表欧元。我必须按 mdl 货币的价格对我的产品进行分类。所以我有一个带有费率的数组：

`$v = array(1,11.38,15.8);`

请帮助我的查询，我尝试过这样的事情，但我遇到了错误：

```
$results = $this->Product
                ->query("SELECT `id`,`price`,`currency` FROM products 
                         ORDER BY price*$v[currency] DESC"); 
```

嗯...我会尝试通过一个例子来解释。

我的桌子：

```
id|price|currency
_________________
1 | 500 | 2
2 | 300 | 3 
```

它显示第一个产品价格以美元保存，第二个产品价格以欧元保存。但我必须在 MDL 值中对它们进行排序。所以我得到了每个值的一系列费率： `$rates = array([1] = > 1, [2] => 11.50, [3] => 15.50);`

所以我必须通过公式的结果订购我的产品：`price*value rate`

在第一种情况下：`500*$rates['currency value from db, in our case 2] = 500 * 11.50`等

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:46:11.593

由于这个问题的扩展示例，我编辑了这个查询。让我们假设货币也存储在某个表中，让我们说`currency`（如果没有，它应该是无论如何）。

表`currency`应如下：

```
ID        VALUE        CODE
-----------------------------
1         1            USD
2         11.38        EUR
3         15.8         MDL 
```

那么查询应该是：

```
SELECT p.`id`, p.`price`, p.`price` * c.`value` AS 'ratio' 
FROM products p
LEFT JOIN currency c ON c.`id` = p.`currency`
ORDER BY `ratio` DESC 
```

通过此查询，您根据产品表中的货币 ID 从表货币中选择货币值，最后按配给价格 * 货币值排序结果。

我知道，也许您在某些配置中仅将货币硬编码为数组，但将货币放入数据库确实会更好（如果不是）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T11:54:18.197

您不能使用数据库列名作为数组键，因为 mysql 的实例比 php 晚。在 php 中，您只需生成传递给数据库管理系统的查询字符串。
您的查询应如下所示：

```
$results = $this->Product->query
        (
        "SELECT `id`,`price`,
        CASE `currency` 
            WHEN '1' THEN $v[0]
            WHEN '2' THEN $v[1]
            WHEN '3' THEN $v[2]
        END AS 'ratio'
        FROM products
        ORDER BY price*ratio DESC
        "
        ); 
```

# php - 使用 PHP 和 MySQL、Timespan 添加的基于订阅的帐户管理？

> ID：10536453
> 
> 赞同：4
> 
> 时间：2012-05-10T14:42:36.337
> 
> 标签：php, mysql, account

我想在 PHP 和 MySQL 驱动的网站上创建一个简单的基于订阅的帐户管理。我需要跟踪某些类型的用户帐户和订阅的长度。我希望用户能够选择一个“订阅包”（青铜、白银、黄金）和他希望订阅持续的时间跨度（一周、一个月、一年）。

但是，评级较高的订阅（金 > 银 > 铜）应优先于评级较低的订阅。这意味着，如果用户应该同时拥有白银订阅和黄金订阅，那么显然应该首先使用黄金订阅的时间跨度，并且只有当它用完时，才应该使用白银订阅。

为了在内部存储订阅，我创建了一个表：

```
INT id
INT user_id
INT type
DATETIME start
DATETIME end 
```

**我的问题是：如何确定用户帐户在某个时间点是否有有效的订阅以及该订阅的类型？最重要的是，当已经有一个订阅正在运行时，我会对如何动态添加更多订阅感兴趣。**

更精确的例子：

*   用户在第 1 天购买了 5 天的青铜 -> 订阅“青铜”从第 1 天到第 5 天运行。
*   在第 2 天，用户决定他想要额外的“银”并再购买 5 天
*   现在的情况：铜牌（第 1 天）、银牌（第 2-6 天）、铜牌（第 7-10 天）

最好，我想在 MySQL 查询中完成大部分工作，但我不确定这是否可能。如果一切都失败了，我将不得不求助于 PHP。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:14:13.323

首先，要查找当前有效的订阅，您的查询应该构造如下：

```
$query = "SELECT * ".
         "FROM subscriptions_table ".
         "WHERE user_id = $user_id ".
         "  AND start < '" . date("Y-m-d") ." 23:59:59' ".
         "  AND end > '" . date("Y-m-d") ." 00:00:00' ".
         "ORDER BY type";
$results = mysql_query($query); 
```

这将为您提供订阅的每日粒度。如果您想精确到分钟，请取出时间并将日期格式调整为`date("Y-m-d H:i:s")`

您在此处的结果将是该用户的一系列订阅，首先是最高类型。为了评估要显示的层级，您可以使用第一个结果，您可以通过`$subscriptionRow = mysql_fetch_array($results);`

当发生购买时，您将不得不做更多的事情。基本上，遍历每个现有订阅并相应地调整时间。确保在此代码之前没有使用上述`$subscriptionRow`分配：

```
$adjustmentQueries = array();
while ($subscriptionRow = mysql_fetch_array($results))
{
   if ($subscriptionRow['type'] > $purchaseType) { } //do nothing
   else
   {
      $newDate = date("Y-m-d H:i:s", strtotime("+".$intNumDaysPurchased." days", strtotime($subscriptionRow['end'])));
      $adjustmentQueries[] = "UPDATE subscriptions_table SET end = '$newEndDate' WHERE id=$subscriptionRow['id']";
   }
}

foreach ($adjustmentQueries as $adjQuery) { mysql_query($adjQuery); } 
```

# c# - 以新形式打开图像c#

> ID：10536457
> 
> 赞同：1
> 
> 时间：2012-05-10T14:42:53.500
> 
> 标签：c#, winforms

我有一张图片显示在

```
picShowPicture.Image = Image.FromFile(textbox1.Text) 
```

目前图像显示在主屏幕上我想要的是当用户从数据库中选择图像时，它会在新窗口中打开？

这是怎么做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:46:50.053

在 Designer 中创建一个新表单并在其中选择一个**PictureBox**。并创建一个特殊的方法，例如

```
public void SetPicture(Image image) 
```

这会将图像设置为 PictureBox。

在选择图片通话时：

```
YourForm form = new YourForm();
form.SetPicture(Image.FromFile(textbox1.Text));
form.ShowDialog(); 
```

或者您可以动态创建新表单：

```
Form form = new Form();

PictureBox pictureBox = new PictureBox();
pictureBox.Dock = DockStyle.Fill;
pictureBox.Image = Image.FromFile(textbox1.Text);
pictureBox.SizeMode = PictureBoxSizeMode.StretchImage;
form.Controls.Add(pictureBox);

form.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:52:03.703

我将假设“从数据库中选择图像”并不*意味着*您正在（反）序列化 BLOB，而只是希望代码使图像显示在新窗口中。我将进一步假设您在项目中创建了第二个表单，名为“Form2”，并带有一个名为“picImageViewerOnForm2”的图像查看器。

`var newImage = Image.FromFile(textbox1.Text);`
`var newForm = new Form2();`

`newForm.picImageViewerOnForm2.Image = newImage;`
`newForm.Show();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:54:46.867

将Form添加到应用程序并在其上放置PictureBox，假设PictureBox的ID为“pictureBox1”，然后在该表单上创建公共属性以访问picutre框，如下所示：

```
public partial class ShowPictureForm : Form
{
  public PictureBox ImagePictureBox { get { return this.pictureBox1; } }

  public ShowPictureForm()
  {
    InitializeComponent();
  }
} 
```

然后显示这样的新形式：

```
ShowPictureForm spf = new ShowPictureForm();
spf.ImagePictureBox.Image.FromFile(textbox1.Text)
spf.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:52:59.227

将一个名为“ShowImageWindow”的新 Windows 窗体添加到您的项目中。在窗口中添加一个图片框，代码如下：

```
public Image ImageToShow { get; set; }

public ShowImageWindow()
{
    InitializeComponent();
}

private void ShowImageWindow_Load(object sender, EventArgs e)
{
    pictureBox1.Image = ImageToShow;
} 
```

然后创建并显示窗口，如下所示：

```
Image img = Image.FromFile(textBox1.Text);
ShowImageWindow frm = new ShowImageWindow();
frm.ImageToShow = img;
frm.ShowDialog();
frm.Dispose(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:47:35.710

创建一个接受图像路径作为构造函数的新表单（从 System.Windows.Forms.Form 派生的新类型）。

说新形式是 ImageForm。在此表单内创建 PictureBox。

在函数 ShowImageWindow （或类似的主窗体）中，调用如下

```
ImageForm imageForm = new ImageForm(textbox1.Text)  
imageForm.ShowDialog() 
```

在ImageForm的ctor中，将Image设置为ImageForm里面的picturebox控件

```
 public ImageForm(String imagePath)
 {
   pictureBox1.Image = Image.FromFile(imagePath);
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T14:48:29.553

1.  创建一个只有图片框的新表单。

2.  然后在形成该表单对象时，将图像作为参数传递（当然，您必须创建表单的参数化构造函数）并将该图像传递到全局图像变量中。

3.  在 Form_Load 中，将该全局图像变量设置为您的图像控制图像。

# sql-server - SQL Native Client 和 SQL Native Client 10 有什么区别？

> ID：10536458
> 
> 赞同：0
> 
> 时间：2012-05-10T14:42:58.227
> 
> 标签：sql-server, upgrade, sqlncli

从 SQL Server 2005 升级到 2008 时，任何人都可以将我引导到概述将连接字符串从 SQLNCLI 更改为 SQLNCLI10 的一般或详细原因的链接或来源吗？

在数据类型问题之外，我没有看到任何差异。我只想以最少的复杂性尽可能少的步骤，如果没有性能提升或功能缺失。我只是不明白做这一步的意义，至少现在是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:03:01.687

下面给出的 Microsoft SQLNCli 团队博客文章描述了 SQL Native Client 和 SQL Native Client 10 之间的区别。

[**Microsoft SQL Server Native Client 和 Microsoft SQL Server 2008 Native Client**](http://blogs.msdn.com/b/sqlnativeclient/archive/2008/02/27/microsoft-sql-server-native-client-and-microsoft-sql-server-2008-native-client.aspx)

# android - 在 Android 中创建不同高度的选项卡

> ID：10536462
> 
> 赞同：1
> 
> 时间：2012-05-10T14:43:22.007
> 
> 标签：android, android-layout

如何创建以下布局？

![在此处输入图像描述](../Images/87d3072f2ac7fe80ceb65f7d36f59e36.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:48:48.383

给那些没有被选中的标签，一个背景，它们的顶部是透明的，并且假装比选中的要短。

# google-bigquery - 将数据从 SELECT 追加到现有表

> ID：10536472
> 
> 赞同：1
> 
> 时间：2012-05-10T14:43:40.180
> 
> 标签：google-bigquery

我正在尝试将从 SELECT 获取的数据附加到另一个现有表，但我不断收到以下错误：

***提供的 Schema 与表projectId*不匹配：*datasetId*。*现有表***

这是我的请求正文：

```
{'projectId': projectId,
 'configuration': {
     'query': {
         'query': query,
         'destinationTable': {
             'projectId': projectId,
                 'datasetId': datasetId,
                 'tableId': tableId
         },
         'writeDisposition': "WRITE_APPEND"
     }
  }
} 
```

似乎*writeDisposition*选项没有得到评估。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:06:20.493

为了使追加工作，现有表的架构必须与您要追加的查询结果的架构完全匹配。您能否验证是否是这种情况（检查这一点的一种方法是将此查询保存为表并将架构与您要附加到的表进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:40:11.863

好吧，我想我在这里得到了一些东西。这是一个奇怪的...实际上，如果您具有完全相同的模式（字段模式），它就不起作用。

这是源表架构：

```
 "schema": {
   "fields": [
   {
     "name": "ID_CLIENT",
     "type": "INTEGER",
     "mode": "NULLABLE"
   },
   {
     "name": "IDENTITE",
     "type": "STRING",
     "mode": "NULLABLE"
   }
  ]
  } 
```

如果我使用浏览器界面 (bigquery.cloud.google.com) 中的复制功能，我会得到与预期完全相同的架构：

```
"schema": {
  "fields": [
  {
    "name": "ID_CLIENT",
    "type": "INTEGER",
    "mode": "NULLABLE"
  },
  {
    "name": "IDENTITE",
    "type": "STRING",
    "mode": "NULLABLE"
  }
  ]
 } 
```

但是我不能从以下提取附加到复制的表：

```
SELECT ID_CLIENT + 1 AS ID_CLIENT, RIGHT(IDENTITE,12) AS IDENTITE FROM datasetid.client 
```

尽管它返回相同的模式，至少从浏览器界面视图来看，它在内部返回以下模式：

```
"schema": {
 "fields": [
 {
   "name": "ID_CLIENT",
   "type": "INTEGER",
   "mode": "REQUIRED"
 },
 {
   "name": "IDENTITE",
   "type": "STRING",
   "mode": "NULLABLE"
 }
] 
```

}

这不是完全相同的模式（检查模式）。

更奇怪的是这个选择：

```
SELECT ID_CLIENT, IDENTITE FROM datasetid.client 
```

返回此架构：

```
"schema": {
  "fields": [
  {
    "name": "ID_CLIENT",
    "type": "INTEGER",
    "mode": "REQUIRED"
  },
  {
    "name": "IDENTITE",
    "type": "STRING",
    "mode": "REQUIRED"
  }
 ]
} 
```

结论：

不要依赖来自浏览器界面的表模式信息，始终使用 Tables.get API。复制并没有真正按预期工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T23:17:31.553

我已使用 bq 命令行工具成功地将数据从 CSV 文件附加到现有表中。我在这里看到的唯一区别是配置

**write_disposition**而不是 writeDisposition 如原始问题所示。

我所做的是将附加标志添加到 bq 命令行实用程序（python 脚本）以进行加载，它就像魅力一样工作。

我必须使用以下内容更新 bq.py。

1.  为加载功能添加了一个名为 --append 的新标志
2.  在 RunWithArgs 下的 _Load 类中检查是否设置了附加，如果设置了 'write_disposition' = 'WRITE_APPEND'

bq.py 的代码更改如下

在 Class 的`__init__`函数中`_Load`添加以下内容

```
**flags.DEFINE_boolean(
        'append', False,
        'If true then data is appended to the existing table',
        flag_values=fv)** 
```

并在下面的语句之后的类函数`RunWithArgs`中`_Load`

```
if self.replace:
      opts['write_disposition'] = 'WRITE_TRUNCATE' 
```

---> 添加以下文字

```
**if self.append:
      opts['write_disposition'] = 'WRITE_APPEND'** 
```

现在在命令行中

```
> bq.py --append=true <mydataset>.<existingtable> <filename>.gz 
```

会将压缩（gzipped）csv 文件的内容附加到现有表中。

# c++ - 堆栈溢出视觉 C++，可能是数组大小？

> ID：10536479
> 
> 赞同：0
> 
> 时间：2012-05-10T14:44:02.023
> 
> 标签：c++, arrays, stack, overflow

据我所知，这不是由无限递归引起的。

该程序可以在较小的数组中正常运行（它是一个音频编辑器）。现在我增加了功能以允许更大的阵列（最多 5 分钟的音频，26460000 条 16 位数据 ~50mb）。

由于增加了数组的大小，我在一个特定函数上收到堆栈溢出错误，它应该通过将数组向后写入新数组来反转输入文件的播放，然后覆盖原始数组。我猜每个数组可能高达 50MB，这可能是问题所在：

```
//initialise temporary new array to place samples in
short signed int reverse_data[max_number_samples];  

for (i=0; i<track_samples; i++)
{  //puts data from sound_data into reverse_data backwards.
  reverse_data[(max_number_samples-1)-i]=sound_data[i];    
}

for (i=0; i<track_samples; i++)    
{     //now overwrites sound_data with the data in reverse_data
  sound_data[i]=reverse_data[i];
} 
```

我对 C++ 和一般编程相当陌生，并且不确定我在调试期间遇到的错误真正告诉我什么。

任何帮助将不胜感激，我确信有一个足够简单的解决方案（我已经阅读了涉及“堆”的内容，但我不确定“堆”到底是什么）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:45:42.567

您不应该在堆栈上分配大型数据结构，因为堆栈的大小是有界的。在堆上分配它。

更好的是，您应该避免手动分配和使用`std::vector`，这将关心内存分配本身。作为奖励，您无需关心解除分配。（这是现代 C++ 方式。）

顺便说一句，如果`max_number_samples`很大，您可能应该只分配您需要的数量：

```
std::vector<short int> reverse_data(track_samples); 
```

（您的其余代码保持原样）。

编辑：
更好的主意：您可以将数组反转到位，而无需复制到其他数组中！只需从索引 0 到一半大小并交换`i`th 和`(size - 1 - i)`th 项目：

```
for (i=0; i < track_samples/2; i++)
{
    std::swap(sound_data[i], sound_data[track_samples-1-i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:59:54.497

正如 Vlad[指出的那样](https://stackoverflow.com/a/10536508/8747)，不要在堆栈上分配 50MB。

但是，这一点没有实际意义，因为您不需要分配*任何*数据。尝试用一次调用替换整个代码片段[`std::reverse`](http://en.cppreference.com/w/cpp/algorithm/reverse)：

```
std::reverse(&sound_data[0], &sound_data[track_samples]); 
```

* * *

*后记*：别忘了`#include <algorithm>`。

# css - 另一个div图像中心的css div

> ID：10536481
> 
> 赞同：1
> 
> 时间：2012-05-10T14:44:06.077
> 
> 标签：css

我有以下 HTML 代码：

```
 <div id="inner">
    <div id="wrap">
      <img src="images/thumb/3.jpeg"/> 
      </div>
 </div> 
```

并应用了以下样式：

```
body{

    background:url(pattern/pattern1.png);
}
#inner{
    margin:0 auto;
    position:relative;
    height:400px;
    width:400px;
    background:#669;
    text-align:center;
}

#wrap{

    width:50%;

    margin:0 auto;

} 
```

问题是图像始终保持在内部 div 的顶部居中，但我希望它位于环绕的中心

**!------------------------------------------------- -------------------------** 仍然是同样的问题，这是 jsfiddle 中的代码：http: [//jsfiddle.net/RNhvz/](http://jsfiddle.net/RNhvz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:49:34.337

你`margin: 0 auto`是你问题的一部分。

你知道你的图像的高度吗？我认为它低于 400 像素。`0`将您的样式更改为`margin`400 和图像高度之间差异的一半。

例如，如果您的图像高度为 200 像素，请将您的`margin`样式更改为：

`margin: 100px auto`

(400 - 200) / 2 = 100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:06:26.880

您应该将边距直接应用于图像元素：[JSFiddle example1](http://jsfiddle.net/RNhvz/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:36:04.073

如果你的 #inner 总是有 400px 的高度，那么只需使用以下代码：

```
#inner{
    /* Your code: */
    margin:0 auto;
    position:relative;
    height:400px;
    width:400px;
    background:#669;
    text-align:center;

    /* Solution part I. */
    line-height: 400px;
}

/* Solution part II. */
img {
    margin: 0 auto;
    vertical-align: middle; 
} 
```

这样，图像将在垂直和水平方向居中，而且 - 更重要的是 - 此解决方案不需要您知道图像大小。而且你不需要#wrap div。您可以保留 HTML 语法，但不需要此元素的宽度和边距规则。

这是工作代码：[http](http://tinkerbin.com/YOjVvnVZ) ://tinkerbin.com/YOjVvnVZ 。

# jpa-2.0 - EntityManagerFactory 未使用 @PersistenceUnit 注入

> ID：10536483
> 
> 赞同：1
> 
> 时间：2012-05-10T14:44:11.427
> 
> 标签：jpa-2.0, glassfish-3, jta, entitymanager, persistence.xml

我是一个java初学者。我在使用 JTA 事务配置持久性单元时遇到了麻烦。我需要使用已经定义、配置和填充的 PostgreSQL 数据库。使用 netbeans，我创建了`persistance.xml`和`glassfish-resources.xml`作为休闲：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="WellWatcherPU" transaction-type="JTA">
         <jta-data-source>WellWatcherDB</jta-data-source>
         <exclude-unlisted-classes>false</exclude-unlisted-classes>
         <properties>
             <property name="eclipselink.logging.logger" value="org.eclipse.persistence.logging.DefaultSessionLog"/>
             <property name="eclipselink.logging.level" value="FINE"/>
         </properties>
     </persistence-unit>
</persistence> 
```

和

```
<resources>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="org.postgresql.ds.PGSimpleDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="post-gre-sql_geowellex_geowellexPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="localhost"/>
        <property name="portNumber" value="5432"/>
        <property name="databaseName" value="DBNAME"/>
        <property name="User" value="USER"/>
        <property name="Password" value="PASSWORD"/>
        <property name="URL" value="jdbc:postgresql://localhost:5432/DBNAME"/>
        <property name="driverClass" value="org.postgresql.Driver"/>
    </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="WellWatcherDB" object-type="user" pool-name="post-gre-sql_geowellex_geowellexPool"/>
</resources> 
```

这就是我获得 EntityManagerFactory 和 EntityManager 的方式（在 netBeans 示例中使用）

```
public class EUserDao {

@Resource
private UserTransaction utx = null;
@PersistenceUnit(unitName = "WellWatcherPU")
private EntityManagerFactory emf = null;

public EntityManager getEntityManager() {
    return emf.createEntityManager();  <-------- NullPointerException here
}

public EUser getOne(long userId){
    EntityManager em = getEntityManager();
    try {
        return em.find(EUser.class, userId);
    } finally {
        em.close();
    }
} 
```

编辑：

这是我的 glassfish 部署日志：

信息：[EL 配置]：2012-05-10 12:01:13.534--ServerSession(2017352940)--Connection(1901223982)--Thread(Thread[admin-thread-pool-4848(5),5,grizzly- kernel])--connecting(DatabaseLogin(platform=>DatabasePlatform user name=> "" connector=>JNDIConnector datasource name=>null ))

信息：[EL 配置]：2012-05-10 12:01:13.534--ServerSession(2017352940)--Connection(1462281761)--Thread(Thread[admin-thread-pool-4848(5),5,grizzly- kernel])--连接：jdbc:postgresql://localhost:5432/geowellex?loginTimeout=0&prepareThreshold=0 用户：geowellex 数据库：PostgreSQL 版本：9.1.3 驱动程序：PostgreSQL 本机驱动程序版本：PostgreSQL 8.3 JDBC3 with SSL (build 603 )

信息：[EL 配置]：2012-05-10 12:01:13.534--ServerSession(2017352940)--Connection(766700859)--Thread(Thread[admin-thread-pool-4848(5),5,grizzly- kernel])--connecting(DatabaseLogin(platform=>PostgreSQLPlatform用户名=>""连接器=>JNDIConnector数据源名=>null))

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:13:54.037

最可能的问题是您的 EUserDao 只是普通课程。注入仅适用于容器管理的类。普通类不会处理 @PersistenceUnit 和 @Resource 之类的注释。

以下类型的类是容器管理的类（在这些类中可以使用 @PersistenceUnit）：

*   Servlet：servlet、servlet 过滤器、事件监听器
*   JSP：标签处理程序、标签库事件监听器
*   JSF：作用域托管 bean
*   JAX-WS：服务端点、处理程序
*   EJB：bean，拦截器
*   托管bean：托管bean
*   CDI：CDI 风格的托管 bean、装饰器
*   Java EE 平台：主类（静态）、登录回调处理程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:37:56.047

我在您的代码声明中看到：

```
private EntityManagerFactory emf = null; 
```

但永远不要创造一个......像这样

```
emf = Persistence.createEntityManagerFactory("WellWatcherPU"); 
```

这就是为什么在使用对象时会出现空指针异常！

```
public EntityManager getEntityManager() {
    return emf.createEntityManager();  <-------- NullPointerException here
} 
```

# javascript - 元素添加到 DOM 但不显示在屏幕上

> ID：10536488
> 
> 赞同：1
> 
> 时间：2012-05-10T14:44:35.750
> 
> 标签：javascript, jquery, html

基本上我的问题是，当我从 javascript（使用 jquery）添加元素时，我添加的元素会显示在 Web 检查器中，但根本不会显示在浏览器中。

我想要做的是模拟我喜欢 google+ 刚推出时的一些东西，即当您希望用户输入项目列表时，您为他们提供一个文本字段，一旦他们开始向其中添加内容文本字段，然后在输入第一个字符后立即出现一个新的文本字段，并在其下方显示。所以我是我的代码，我让用户输入他们想要实现的一系列目标，我为他们提供一个文本字段（如果用户正在编辑他们之前制作的列表，则为他们提供多个）并且一旦最后一个文本字段有数据然后它将以编程方式创建一个新的文本字段。

HTML：

```
<div class="field-group clickToAddGroup">
  <label>Goals: </label>
  <div class="input">
    <input type="text" name="goals" value="Goal1">
    <input type="text" name="goals" value="Goal2">
    <input type="text" name="goals" value="Goal3">
    <input type="text" name="goals" value="Goal4">
    <input type="text" name="goals" placeholder="Type to add Goal" class="clickToAdd">
  </div>
</div> 
```

Javascript：

```
$(".clickToAdd").live('keyup',function(){
    console.log("key up triggered");
    if( $(this).val() != '' )
    {
        console.log("cloning in process");

        var theClone = $(this).clone().val('');    // Set the new element to null
        theClone.appendTo( $(this).parent() ); // Clone Parent
        $(this).removeClass('clickToAdd');     // Remove the click to add class

        console.log("clone complete");
    }
    console.log("key up finished");
    console.log("----");
});

$('.clickToAddGroup input').live('blur', function(){
    if( $(this).val() == '' && !$(this).hasClass('clickToAdd') )
        $(this).remove();
}); 
```

现在上面的代码实际上可以工作，但是当我单击（或选项卡到）最后一个文本字段（具有 clickToAdd 类的文本字段）并开始输入时页面第一次加载时，我在 web 检查器中看到 javascript 正确运行并创建新字段并将其放置在应有的位置，但我实际上并没有在屏幕上看到它。但是，当我将刚刚在文本字段中写入的内容删除并失去焦点（触发“模糊”）时，文本字段被删除，然后我可以看到显示的文本字段。从这一点开始，当我将内容添加到最后一个字段（带有 clickToAdd 类的字段）时，它 100% 完美地工作，它添加了元素并且通过 web 检查器可见并且显示在屏幕上。

编辑：我将代码复制到 jsfiddle（包括我正在使用的 css）并在那里尝试它，它恰好按预期完美地工作，没有我遇到的问题。 [http://jsfiddle.net/qz2QK/2/](http://jsfiddle.net/qz2QK/2/)

编辑 2：在“var theClone = $(this).clone().val('');”行中添加了“var” 所以它不是隐含的全局变量。

# sql-server-2008 - 使用 LLBLGEN 通过 JOIN 选择 TOP 100

> ID：10536491
> 
> 赞同：0
> 
> 时间：2012-05-10T14:44:48.230
> 
> 标签：sql-server-2008, tsql, orm, llblgenpro

我使用 LLBLgen 作为 ORM 并希望实现以下目标：

> **表 1**：
> 会话 ID
> 
> **表 2**：
> SessionId
> 时间戳

```
SELECT TOP 100 * FROM Table1
INNER JOIN Table2 ON Table1.SessionId = Table2.SessionId
ORDER BY Table2.Timestamp DESC 
```

此代码在 SQL Server 2008 R2 上直接执行时运行良好 - 如果可用，则从 Table1 中准确返回 100 行，但不知何故，我无法使用 LLBLGen 获得相同的结果。目前我仍在使用 2.6，但如果需要，可以选择更新。

是否有可能在 LLBLGen 中实现这种行为？

如果我在 LLBLGen 中使用正常机制，这就是结果

```
SELECT * FROM Table1
INNER JOIN Table2 ON Table1.SessionId = Table2.SessionId
ORDER BY Table2.Timestamp DESC 
```

顺便说一句：我读到 LLBLGen 从阅读器那里获取 TOP 100 结果，然后终止连接。尽管如此，与直接执行 SQL 相比，使用 LLBLGen 的查询需要更长的时间（令我惊讶的是，这对于后面的查询也很重要！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:16:09.863

它不会添加 TOP 因为这可能会在您有连接时返回重复的行，并且您的查询中存在一种情况（您没有发布真正的查询），您的投影中有明显的违规类型字段。

通常，在获取实体时，llblgen pro 会在您的情况下添加 TOP 和 DISTINCT。如果它不能添加 distinct，因为您的查询返回类型为 image、ntext、text 的字段，或者您对不在投影中的字段进行排序（因此无法应用 distinct，否则 sqlserver 将抛出错误），它也不会添加 TOP，因为这可能意味着您在受 TOP 限制的集合中获得潜在的重复行，这些行被过滤掉，因为实体始终是唯一的。

示例：根据 Order 上的过滤器获取客户（因此使用连接），将在 Northwind 上创建客户 INNER JOIN 订单，但由于这是 1:n 关系，因此会创建重复项。如果客户包含文本、图像或 ntext 字段，则无法应用 distinct，因此如果我们随后指定 TOP，您将获得重复的行。由于 llblgen pro 永远不会将重复的行具体化为实体，因此您得到的实体将少于您要求的值。

因此，在这种特殊情况下，它会切换*到*客户端限制：一旦它读取了您要求的实体数（而不是行！），它就会终止连接。因此，如果您要求 10 个实体并且在前 10010 行中有 10000 个重复行，那么您将至少获取 10000 行。

所以我的猜测是 table2 上的排序问题，因为这会阻止 DISTINCT 被发出。这是 sqlserver 上的非法查询：

SELECT DISTINCT C.CompanyName FROM Customers C INNER JOIN Orders O on c.CustomerId = o.CustomerId ORDER BY o.OrderDate DESC;

原因是 ORDER BY 为所有字段附加了一个隐藏列，以便对不在投影中的字段进行排序，这破坏了独特性。这在 RDBMS-s 中很常见。

所以 TL;DR: 这是一个功能:)

# keyword - 这种区分大小写的真正含义是什么？

> ID：10536497
> 
> 赞同：1
> 
> 时间：2012-05-10T14:45:15.437
> 
> 标签：keyword, case-sensitive, eiffel

我们都知道有一些区分大小写的语言，以及不区分大小写的语言。根据我找到的详细信息，Eiffel 是不区分大小写的。如果一种语言不区分大小写，这意味着它的关键字也不区分大小写，对吧？但是，在埃菲尔，有一个小问题。请查看以下链接

[http://docs.eiffel.com/book/method/eiffel-language-reserved-words#False](http://docs.eiffel.com/book/method/eiffel-language-reserved-words#False)

上面的链接包含 Eiffel 关键字列表。通常，如果一种语言不区分大小写，则所有关键字在其网站中都以小写或大写形式列出。但是，在上面的链接中，1.12、1.23 等中的关键字是有大小写的。这意味着，关键字“True”、“False”、“TUPLE”、“Void”等同时具有小写和大写字母。

那么，这是否意味着 Eiffel**关键字**区分大小写？如果答案是否定的，那么为什么会以这样的方式列出它们呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:36:09.650

这只是风格问题。在 Eiffel 中，所有类名都按照惯例全部大写。TUPLE 是一个类，所以它通常全部大写。

表示值或常数（True、False、Result、Current、Void、...）的关键字的首字母大写。

“常规”关键字（以及几乎所有其他关键字）都是小写的。

Eiffel 不区分大小写，因此您可以编写 tuple、Tuple 或 TUPle，但这样做的风格很差。有关此问题的更多信息，请参阅此帖子：http: [//dev.eiffel.com/Style_Guidelines](http://dev.eiffel.com/Style_Guidelines)

# php - 使用 CodeIgniter 2.0 发送加密电子邮件

> ID：10536505
> 
> 赞同：1
> 
> 时间：2012-05-10T14:45:35.620
> 
> 标签：php, email, codeigniter, email-attachments

我正在寻找一种使用 CodeIgniter 2.0 电子邮件库发送加密电子邮件的方法。那里有任何库或扩展内置库以发送加密电子邮件的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:13:04.290

它不是 CI 2.0 内置库，但您可以使用 Postmark 发送加密电子邮件 - 我相信 CI 插件与标准 CI 电子邮件库非常相似。[http://developer.postmarkapp.com/developer-build.html](http://developer.postmarkapp.com/developer-build.html)

# iphone - 如何找到正确的图像路径

> ID：10536514
> 
> 赞同：2
> 
> 时间：2012-05-10T14:45:53.517
> 
> 标签：iphone, objective-c, ios, image, ipad

我将图像保存在文件夹“pic”中（图像完整路径的示例：）`/Users/apple/Library/Application Support/iPhone Simulator/5.1/Applications/2526EA68-229D-40BC-BB57-56E46EB55691/Documents/pic/1.jpg`。

“文档”路径是通过调用获得的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

所以路径肯定是正确的。但是当我这样做时：

```
 [tempImage setImage:[UIImage imageNamed:fullImagePath]] 
```

似乎找不到图像，因为没有显示图像。我想知道这个问题的原因以及如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:50:39.757

`imageNamed`仅适用于主包中的图像，不适用于子目录。

采用

```
[UIImage imageWithContentsOfFile:filePath] 
```

反而。

# sql - 将表格转换为逗号分隔的字符串

> ID：10536515
> 
> 赞同：1
> 
> 时间：2012-05-10T14:45:54.500
> 
> 标签：sql, sql-server-2008

我在表变量中有一行，如下所示：

```
CanEdit | CanView | CanAdd | CanDelete 
```

所有列都是位域。我需要将此表转换为逗号分隔的字符串，如下所示：

*   如果用户对每一列都有 true... `E,V,A,D`

*   如果用户只有编辑和添加... `E,A`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:51:36.907

由于它是一个固定的集合，它可以直接如下进行。

```
SUBSTRING(
    CASE WHEN CanEdit   = 1 THEN ',E' ELSE '' END
  + CASE WHEN CanView   = 1 THEN ',V' ELSE '' END
  + CASE WHEN CanAdd    = 1 THEN ',A' ELSE '' END
  + CASE WHEN CanDelete = 1 THEN ',D' ELSE '' END,
  2,
  7
) 
```

也就是说，这是非常罕见的推荐。

如果您正在重构数据，这会颠倒数据的原子性，并且被认为是 SQL 中存在根本问题的反模式。

如果您这样做是为了在客户端中进行演示，那么在 SQL 中执行此操作会将您的数据层和表示层耦合在一起，这是另一种反模式。

# java - 反编译的java类有一些特殊字符

> ID：10536517
> 
> 赞同：4
> 
> 时间：2012-05-10T14:46:01.610
> 
> 标签：java, decompiling

我反编译了一些 java 类，得到了一个带有特殊字符的源代码：

```
this.val$b.dispose();
this.val$domainLabel.setText((String)domains_config.get("description")); 
```

这是什么意思：`this.val$b`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:09:19.070

根据 Java 规范（参见[http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.8](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.8)） $ 是标识符中的有效值。但是，请注意**“$ 字符应仅用于机械生成的源代码中，或者很少用于访问遗留系统上预先存在的名称。”**

在反编译代码中看到变量名中的美元符号有两个常见原因：

**1\. 您的源代码包含一个内部类**（也许，但不一定是匿名的），在这种情况下，内部类的东西将具有变量和构造函数名称，例如`outerclass$innerclass`. （例如，参见关于内部类如何真正工作的部分中的[http://docstore.mik.ua/orelly/java/exp/ch05_09.htm ）。](http://docstore.mik.ua/orelly/java/exp/ch05_09.htm)如果该类是匿名的，则名称将具有命名方案/形式，例如 outerclass$ 后跟 outerclass$1 等等

**2\. 代码已通过混淆器运行。**混淆器符合“机械生成”源代码的标准，因此它可以在 ame 中使用美元符号。一个例子是 RetroGuard，它[在他们网站上的常见问题解答](http://www.retrologic.com/innerclasses.doc7.html)中解释了在变量和类名中使用 $ 的标准。本质上，混淆器使用 $ 作为消歧器，并将使用生成的名称重命名类或变量（通常在可能的情况下使用单字符字母以最小化代码大小），重命名的内容和不重命名的内容取决于变量的范围等。

在您的特定示例中， val$b 在我看来它可能是一个已被混淆的变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:55:03.653

根据[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)变量名中的美元符号是有效的，但不推荐，他们提到自动生成的代码可能会使用它

下面是从链接复制的，我**加粗**部分强调

变量名区分大小写。变量的名称可以是任何合法标识符——无限长度的 Unicode 字母和数字序列，以字母、**美元符号“$”**或下划线字符“ *”开头。然而，惯例是始终以字母开头变量名，而不是“$”或“* ”。**此外，按照惯例，从不使用美元符号字符。您可能会发现自动生成的名称将包含美元符号的某些情况**，但您的变量名应始终避免使用它。下划线字符也有类似的约定；虽然以“_”开头的变量名称在技术上是合法的，但不鼓励这种做法。不允许使用空格。后续字符可以是字母、数字、美元符号或下划线字符。惯例（和常识）也适用于该规则。为变量选择名称时，请使用完整的单词而不是隐晦的缩写。这样做将使您的代码更易于阅读和理解。在许多情况下，它还会使您的代码自我记录；例如，名为 cadence、speed 和 gear 的字段比 s、c 和 g 等缩写版本更直观。另外请记住，您选择的名称不能是关键字或保留字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:52:35.653

（嗯，我想这实际上是答案）

`$`在 Java 中没有特殊含义，这只是反编译器为变量名提出的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:52:42.343

'$' 是 java 标识符中的有效字符。所以“val$b”只是字段的名称。请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:53:49.350

有效的 java 标识符可以[包含](http://www.adp-gmbh.ch/java/language/identifiers.html)字母（`a`- `z`、`A`- `Z`）、数字（`0`- `9`）、下划线（`_`）和美元（`$`）。因此，您看到的 id 名称只是一个有效名称，没有任何特殊含义。

# c++ - 对于文件读取，何时使用 filebuf

> ID：10536519
> 
> 赞同：0
> 
> 时间：2012-05-10T14:46:02.687
> 
> 标签：c++, file-io, iostream, filebuf

我将从只读二进制文件中进行随机访问读取。ifstream 的接口似乎比 filebuf 简单；但是有没有什么用例可以让 filebuf 提供更好的性能？

更多详细信息：我有一个固定长度（48 字节）记录的文件，并将按顺序进行随机访问读取——读取 1 条记录，处理，读取 1 条记录（从其他地方），处理，...。 （遍历一棵树。）文件永远不会改变。由于记录是固定长度的，我以后可能会使用 48 字节记录的“字符类型”，但我认为这不会对性能产生任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:43:46.940

如果您在 Linux 上使用 mmap 可能会解决一点一点读取文件的整个问题。

或者提升内存映射文件？ [http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/classes/mapped_file.html](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/classes/mapped_file.html)

# objective-c - 带有重复选项的 NSOperation

> ID：10536523
> 
> 赞同：1
> 
> 时间：2012-05-10T14:46:13.670
> 
> 标签：objective-c, nstimer, nsoperation

我开发了一个类别，使 NSOperation 能够在后台以定时间隔执行。我真的很感激能得到一些反馈，尤其是我没有想到的这种方法的任何潜在问题。

谢谢！

这是代码：

NSOperation+Repeat.h

```
#import <Foundation/Foundation.h>

@interface NSOperation (repeat)

@property (readonly, nonatomic) NSTimeInterval repeatInterval;
@property (readonly, nonatomic) NSOperationQueue *repeatOperationQueue;

- (void)performUsingOperationQueue:(NSOperationQueue *)operationQueue;
- (void)performAtRepeatingInterval:(NSTimeInterval)interval usingOperationQueue:(NSOperationQueue *)operationQueue;

@end 
```

NSOperation+Repeat.m

```
#import "NSOperation+repeat.h"
#import <objc/runtime.h>

static char const * const RepeatPropertiesKey = "RepeatProperties";

@implementation NSOperation (repeat)

@dynamic repeatInterval;
@dynamic repeatOperationQueue;

static NSString * RepeatIntervalKey = @"interval";
static NSString * RepeatOperationQueueKey = @"operationQueue";
static NSString * RepeatTimerKey = @"timer";

- (NSMutableDictionary *)repeatProperties {
    NSMutableDictionary * properties = objc_getAssociatedObject(self, RepeatPropertiesKey);
    if (properties == nil) {
        properties = [NSMutableDictionary new];
        objc_setAssociatedObject(self, RepeatPropertiesKey, properties, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }
    return properties;
}

- (NSTimeInterval)interval {
    NSNumber * interval = [[self repeatProperties] objectForKey:RepeatIntervalKey];
    return [interval doubleValue];
}

- (NSOperationQueue *)repeatOperationQueue {
    NSOperationQueue * operationQueue = [[self repeatProperties] objectForKey:RepeatOperationQueueKey];
    return operationQueue;
}

- (void)performUsingOperationQueue:(NSOperationQueue *)operationQueue {
    [operationQueue addOperation:[self copy]];
}

- (void)performAtInterval:(NSTimer *)timer {
    [self performUsingOperationQueue:self.repeatOperationQueue];
}

- (void)performAtRepeatingInterval:(NSTimeInterval)interval usingOperationQueue:(NSOperationQueue *)operationQueue {
    // Save interval and operationQueue in repeatProperties
    [self.repeatProperties setValue:[NSNumber numberWithDouble:interval] forKey:RepeatIntervalKey];
    [self.repeatProperties setValue:operationQueue forKey:RepeatOperationQueueKey];

    // Create timer to call performAtInterval on self
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:(interval*60)
                                                      target:self
                                                    selector:@selector(performAtInterval:)
                                                    userInfo:nil
                                                     repeats:YES];

    // Save the timer in repeatProperties
    [self.repeatProperties setValue:timer forKey:RepeatTimerKey];

    [self performUsingOperationQueue:operationQueue];
}

@end 
```

这是一个可以重复的 NSOperation 子类的示例：

MSScheduleImportOperation.h

```
#import <Foundation/Foundation.h>
#import "NSOperation+Repeat.h"

@interface MSScheduleImportOperation : NSOperation <NSCopying>

@property (readonly, strong, nonatomic) NSString* employeeId;

- (id)initWithEmployeeId:(NSString *)employeeId;

@end 
```

MSScheduleImportOperation.m

```
#import "MSScheduleImportOperation.h"

@implementation MSScheduleImportOperation

@synthesize employeeId = __employeeId;

- (id)initWithEmployeeId:(NSString *)employeeId     {
    self = [super init];
    __employeeId = [employeeId copy];
    return self;
}

- (id)copyWithZone:(NSZone *)zone {
    MSScheduleImportOperation* copy = [[MSScheduleImportOperation alloc] initWithEmployeeId:self.employeeId];
    return copy;
}

- (void)main
{
 ...   
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:03:02.557

[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)说：

> 一个操作对象是一个单次对象——也就是说，它执行一次它的任务，不能被用来再次执行它。

所以第一个问题是可能有内部因素阻止它工作。虽然，我看到你试图通过复制来解决这个问题。

这给我们带来了另一个问题，`NSOperation`就是没有标榜符合`NSCopying`。

```
[operationQueue addOperation:[self copy]]; 
```

此行应引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T21:51:47.480

`NSOperation`而不是对象复制自身并将副本添加到的类别`NSOperationQueue`- 在更高级别管理它会更简单。例如：

```
+[RepeatingOperation operationBlock:(InitOperationBlock)operationBlock
                              queue:(NSOperationQueue*)queue
                           interval:(NSTimeInterval)interval]; 
```

where`InitOperationBlock`将是创建和配置操作的块。

主要的好处是 API 更难搞砸。例如在原始帖子中的类别中，`performUsingOperationQueue:`如果您忘记设置`repeatOperationQueue`.

# php - Zend_Translate：不是字符串，而是基于 ID 的翻译——或者如何处理原始字符串的变化

> ID：10536524
> 
> 赞同：0
> 
> 时间：2012-05-10T14:46:13.673
> 
> 标签：php, zend-framework, translation, zend-translate

据我了解， Zend_Translate 使用字符串作为翻译文件的键。这意味着如果我更改原始字符串（例如修复一些错字），该字符串的所有翻译都将丢失。

有没有办法自动更新这些翻译？我的想法是在原始字符串发生更改时将这些翻译标记为“TODO”。

为了实现这一点，我想我必须使用基于 ID 的翻译系统而不是基于字符串的翻译系统。每个字符串都有一个唯一的 ID。

我知道基于字符串的翻译系统的优点是相等的字符串不必翻译两次。这在我的应用程序中是一个非常罕见的用例，因此将相等的字符串翻译两次绝对没问题。

我想自己实现这个，但我不知道如何以良好的性能做到这一点。

对此有何建议？Zend_Translate 可以处理原始字符串的变化吗？是否有其他翻译系统可以处理此用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:29:28.907

这不能自动处理。至少不容易。（可能通过代码分析、代码生成等来完成）。我们使用“存根”进行翻译 -`$this->translate('please-register') // Please register.`工作正常，但为开发人员增加了更多工作 - 他们甚至需要为母语创建翻译文件。:)

# java - Android函数将数组直接返回到变量中

> ID：10536528
> 
> 赞同：2
> 
> 时间：2012-05-10T14:46:21.220
> 
> 标签：java, android, arrays, variable-assignment

我看到javascript有类似的东西。
有可能在Android中做这样的事情吗？我知道如何使用数组名称，我的问题是关于直接从组成数组的变量返回和分配。

```
private int[] calcHead() {
    int i;
    int j;
    int k;
    // Do stuff
    return {i, j, k};     <-- is this possible? (I am getting error: "The Method must return a result of type int[]")
}

private void otherFunc(){
    int a;
    int b;
    int c;

    {a, b, c} = calcHead();   <-- is this possible?
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:50:56.790

这是一个相当基本的问题：无论如何：

```
public int[] foo() {
    int i = 0;
    int j = 0;
    int k = 0;
    return new int[]{i,j,k};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T22:17:10.133

在回答问题的第二部分，而不是

```
{a, b, c} = calcHead(); 
```

你可以做

```
a = b = c = calcHead(); 
```

虽然它不是很优雅，但它会将返回值分配给每个变量......

希望有帮助！

# ajax - 使用 CAS Proxy 和 Spring Security 调用 RESTful 服务

> ID：10536529
> 
> 赞同：0
> 
> 时间：2012-05-10T14:46:22.863
> 
> 标签：ajax, spring-security, cas

我目前正在使用带有 CAS 的 Spring Security 作为身份验证机制来保护 Web 应用程序以及我的 RESTful 服务 API（在单独的服务器上）。我想在 AJAX 中从我的 Web 应用程序调用 RESTful 服务。我已成功设置从 Web 应用程序到服务的 CAS 代理。在我的 AJAX/JQuery 代码中使用 PGT 调用服务以检索服务数据的最佳方式是什么？

现在我可以使用以下测试 servlet 成功读取服务数据，但想知道使用 AJAX 的方法是什么。

```
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {
String targetUrl = "https://example.com/services/helloworld";

final CasAuthenticationToken token = (CasAuthenticationToken) req
    .getUserPrincipal();
final String proxyTicket = token.getAssertion().getPrincipal()
    .getProxyTicketFor(targetUrl);

// Make a remote call using the proxy ticket
final String serviceUrl = targetUrl + "?ticket="
    + URLEncoder.encode(proxyTicket, "UTF-8");
String proxyResponse = CommonUtils.getResponseFromServer(serviceUrl);

resp.setStatus(HttpServletResponse.SC_OK);
resp.setContentType("text/plain");
PrintWriter writer = resp.getWriter();
writer.println(proxyResponse);
writer.flush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:04:08.667

我最终放弃了这个并转向 OAuth 2 解决方案。

# regex - ASP.NET MVC4 正则表达式模型验证属性不适用于带有重音字符的客户端

> ID：10536530
> 
> 赞同：8
> 
> 时间：2012-05-10T14:46:24.467
> 
> 标签：regex, jquery-validate, asp.net-mvc-4

在 ASP.NET MVC 3 项目中，我需要验证视图中的名称字段以允许特定的重音字符集。因此，在我的视图模型中，我在适当的属性上定义了一个正则表达式属性，如下所示：

```
[RegularExpression("^[a-zA-Zá]{2,50}$")] 
```

请注意这不是确切的代码，它被简化以使我的问题更容易理解。

此正则表达式在服务器端工作正常，但在客户端不起作用。如果查看输入字段的 HTML 是否包含此属性：

```
data-val-regex-pattern="^[a-zA-Z&amp;#225;]{2,50}$" 
```

如您所见，重音字符已转换为破坏正则表达式的 HTML 实体。谁能告诉我为什么会发生这种情况以及如何解决？

**更新**

抱歉，我是个彻头彻尾的白痴。我完全忘记了我们几天前升级到 MVC 4 beta。随后我创建了两个小测试项目，一个在 MVC 3 中，一个在 MVC 4 中。问题只存在于 MVC 4 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:43:21.217

原来有人问过同样的问题。我的谷歌搜索直到现在才找到它。

[asp.net mvc 4中的DataAnnotations验证（正则表达式）-剃刀视图](https://stackoverflow.com/questions/8244572/dataannotations-validation-regular-expression-in-asp-net-mvc-4-razor-view)

该问题已报告为 MVC 4 beta 中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:12:36.983

**试试这个：**

```
^[a-zA-Z\u00E1]{2,50}$ 
```

*使用`\uXXXX`, where`XXXX`字符的十六进制代码。*

# c# - 无法从我的网格视图中获取数据

> ID：10536537
> 
> 赞同：0
> 
> 时间：2012-05-10T14:47:01.333
> 
> 标签：c#, asp.net, .net, gridview

我在我的gridview中获取特定单元格的数据时遇到问题我正在这样做：

```
double total = 0;

for (int i = 0; i < GridFactures.Rows.Count; i++)
    total += Convert.ToDouble(GridFactures.Rows[i].Cells[6].Text.ToString());

lblTotalTTC.Text = "Montant total TTC : " + total; 
```

有问题的列在我的 aspx 文件中声明：

```
<asp:TemplateField HeaderText="Montant TTC">
    <ItemTemplate>
        <asp:Label ID="lblMontantTTC" runat="server" Text='<%#Eval("MontantTTC") %>'/>
    </ItemTemplate>
</asp:TemplateField> 
```

我确定这始终是我要检查的第六列。我休息了一下，`GridFactures.Rows[i].Cells[6].Text.ToString()`总是包含“”仅此而已...感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:09:43.530

而不是这段代码：

```
for (int i = 0; i < GridFactures.Rows.Count; i++)
    total += Convert.ToDouble(GridFactures.Rows[i].Cells[6].Text.ToString()); 
```

试试这个：

```
for (int i = 0; i < GridFactures.Rows.Count; i++)
{
    Control ctrl = GridFactures.Rows[i].Cells[6].FindControl("lblMontantTTC");
    if (ctrl != null)
    {
        Label lbl = ctrl as Label;
        if (lbl != null)
        {
            total += Convert.ToDouble(lbl.Text);
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:48:51.690

记住它是一个从零开始的索引，所以 [6] 表示单元格 7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:10:30.497

如果我没记错的话（并且您的标签是单元格中的第一个/唯一控件） -

您需要在索引 0 处请求控件，或者通过 id 找到它，然后请求 .Text

像这样：

```
GridFactures.Rows[i].Cells[6].Controls[0].Text.ToString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:56:51.913

我知道为什么。我自己也遇到了同样的情况。您需要检查为空的字段，如果是，请先将其转换为零。

```
 total += (GridFactures.Rows[i].Cells[6].Text == "")? 0d : Convert.ToDouble(GridFactures.Rows[i].Cells[6].Text.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T18:02:14.610

如何使用 LINQ 而不是循环？

```
double mySum = 
        GridFactures.Rows
                    .Cast<GridViewRows>()
                    .Sum(row =>  
                Double.Parse(((Label)row.FindControl("lblMontantTTC")).Text)); 
```

如果您没有看到任何值，那么您的网格实际上还没有被数据绑定，或者 ViewState 在网格上被禁用。这一切都取决于您在页面生命周期中执行此计算的位置/时间。

# python - 描述符和 python 提供的属性

> ID：10536539
> 
> 赞同：5
> 
> 时间：2012-05-10T14:47:05.607
> 
> 标签：python, descriptor, new-style-class

我正在学习 Python，并且试图更好地理解描述符。当我查看这本 Python 在线书籍： http: [//www.cafepy.com/article/python_attributes_and_methods/ch01s05.html](http://www.cafepy.com/article/python_attributes_and_methods/ch01s05.html)时，它说：

1.  如果 attrname 是 objectname 的特殊（即 Python 提供的）属性，则返回它。

我不明白 Python 提供的含义。有人可以给我一个 Python 提供的属性的示例，该属性优先于通常的解析顺序吗？

注意：我只对新式类感兴趣（据我所知，描述符甚至不适用于旧式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:00:53.957

`__class__`， 例如：

```
>>> class Test(object):
    __dict__ = {'__class__' : "dict of Test"}
    def __init__(self):
        self.__dict__['__class__'] = "dict of test"

>>> test = Test()
>>> test.__class__
<class '__main__.Test'>
>>> test.__dict__
{'__class__': 'dict of test'}
>>> Test.__dict__
dict_proxy({'__dict__': {'__class__': 'dict of test'}, '__module__': '__main__', '__weakref__': <attribute '__weakref__' of 'Test' objects>, '__doc__': None, '__init__': <function __init__ at 0x02BD2770>})
>>> 
```

等效于旧式类：

```
>>> class Test:
        pass

>>> Test.__dict__["__class__"] = "spam"
>>> test = Test()
>>> test.__class__
<class __main__.Test at 0x02BD1110>
>>> test.__dict__ = {'__class__': "foo"}
>>> test.__class__
<class __main__.Test at 0x02BD1110> 
```

尽管

```
>>> test.__dict__ = {'__lolcat__': "bar"}
>>> test.__lolcat__
'bar' 
```

根据对象的类型，还有更多特殊的属性名称。例如，函数：

```
>>> def test():pass

>>> dir(test)
['__call__', '__class__', '__closure__', '__code__', '__defaults__', '__delattr__', '__dict__', '__doc__', '__format__', '__get__', '__getattribute__', '__globals__', '__hash__', '__init__', '__module__', '__name__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'func_closure', 'func_code', 'func_defaults', 'func_dict', 'func_doc', 'func_globals', 'func_name']
>>> test.func_closure
>>> test.__dict__['func_closure']='roflcopter'
>>> test.func_closure
>>> test.__dict__['foo']='bar'
>>> test.foo
'bar' 
```

有关概述，请参见[http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:13:00.470

如您所料，步骤 1 完全错误且不存在。

# java - 为什么 jsp 的静态部分在 java 部分之后流式传输？

> ID：10536540
> 
> 赞同：0
> 
> 时间：2012-05-10T14:47:08.820
> 
> 标签：java, google-app-engine, jsp

我在 Eclipse Indigo 中使用 Google App Engine 编写了以下 jsp 示例页面：

```
<html>
<head>
</head>
<body>    
<% response.getWriter().println("<h1><a href=\"VotingMainPage.jsp\">  Hello World <br></a></h1>"); %>
</body>
</html> 
```

令我困惑的是，本地浏览器的输出是：

```
<h1><a href="VotingMainPage.jsp">  Hello World <br></a></h1>

<html>
<head>
</head>
<body>          
</body>
</html> 
```

java代码生成的文本在静态html之前，虽然在页面中它在静态代码里面。

我必须做什么，才能按照我在代码中的顺序将内容打印到响应中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:16:26.643

使用`out`而不是`response.getWriter()`使用 JSP 页面正在使用的同一个编写器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:50:42.033

如果您使用的是小脚本，那么这将完成这项工作。

```
<html>
<head>
</head>
<body>    
<%= "<h1><a href=\"VotingMainPage.jsp\">  Hello World <br></a></h1>" %>
</body>
</html> 
```

但是你最好使用 JSTL。

* * *

您的代码不起作用的原因是 GAE 的 JSP 编译器显然将 JSPWriter 包装在某种缓冲写入器中。当您直接使用写入器时，您的输出实际上“超过”了 JSP 写入缓冲写入器的内容。

# jquery - jQuery UI - 改变按钮颜色

> ID：10536541
> 
> 赞同：9
> 
> 时间：2012-05-10T14:47:10.490
> 
> 标签：jquery, jquery-ui, jquery-ui-button

Using jQuery UI I have two radio buttons, Approve/Reject, which I would like to style independantly, so when 'Approve' is selected, it will be blue, and when 'Reject' is selected, it will be red:

![未选择任何内容](../Images/07c751d0f0cdb5bb1f02b06cd5fbbf99.png)

![批准选定](../Images/6cd5d08f3d66dc935ae82a89fbf12089.png)

![拒绝选择](../Images/b5502026cc6444e0f49590d393a25d45.png)

为我糟糕的红色按钮模型道歉:-) 希望这能让你了解我所追求的。我尝试更改两个按钮/标签的类，但这并没有反映到 jQuery-UI 覆盖层上。

这是我当前生成按钮的代码，并根据选择显示勾号或叉号：

```
$('.approvedToggle').buttonset();

$('input:radio').click(function() {
    if($(this).val() === 'approve') {
        $(this).parent('div').children(".tick").show();
        $(this).parent('div').children(".cross").hide();
    } else {
        $(this).parent('div').children(".tick").hide();
        $(this).parent('div').children(".cross").show();
    }
}); 
```

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T15:49:21.287

您需要做的是*覆盖*jQuery UI 默认样式。

以下是[文档](http://jqueryui.com/demos/button/#theming)所述：

> 如果需要更深层次的定制，可以修改 jquery.ui.button.css 样式表中引用的特定于小部件的类。这些类在下面以粗体突出显示。
> 
> 带有 jQ​​uery UI CSS 框架类的示例标记
> 
> `<button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"> <span class="ui-button-text">Button Label</span> </button>`

所以基本上，你可以做的是这样的：

**HTML**：

```
<div id="approvedToggle">
    <input type="radio" id="ApproveButton" name="radio" />
    <label id="ApproveButtonLabel" for="ApproveButton">Approve</label>

    <input type="radio" id="RejectButton" name="radio" />
    <label id="RejectButtonLabel" for="RejectButton">Reject</label>
</div>​ 
```

**CSS** *（重要！这个样式必须在 jQuery UI CSS 文件之后声明）*：

```
#ApproveButtonLabel.ui-state-active { background: blue; }
#ApproveButtonLabel.ui-state-active span.ui-button-text { color: red; }

#RejectButtonLabel.ui-state-active { background: red; }
#RejectButtonLabel.ui-state-active span.ui-button-text { color: blue; } 
```

**jQuery** :

```
$('#approvedToggle').buttonset();​ 
```

**输出**：

![在此处输入图像描述](../Images/de39f2e5be9089c4a6d9ff8a8cb18a7a.png)

***[查看工作中的 jsFiddle 演示](http://jsfiddle.net/2abqU/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T16:04:39.143

我将它用于 JQueryUI 按钮

CSS：

```
button.red-button
{
   background:radial-gradient(#FF0000,#660000);
   color:white;
   border-color:#660000;
}
button.red-button:hover
{ 
    background:radial-gradient(#FF0000,#880000);
   color:white;
   border-color:#660000;
}
button.red-button:active
{
    background:radial-gradient(#FF0000,#660000);
   color:white;
   border-color:#660000;
} 
```

html：

```
<button class="red-button">Button</button> 
```

对于您的情况，也许可以使用：

CSS：

```
input.red-button
input.red-button:hover
input.red-button:active 
```

# c - 如何通过设置适当的 CURLOPT_HTTPHEADER 值来禁用通过 C 程序发送 HTTP 标头？

> ID：10536544
> 
> 赞同：1
> 
> 时间：2012-05-10T14:47:14.577
> 
> 标签：c, http

我想通过 HTTP 发布请求发送 XML 消息，但我不想发送 HTTP 标头。在 C 程序中可以不发送设置 CURLOPT_HTTPHEADER 值的标头。我想知道该怎么做。

# javascript - Firefox 中未定义表单

> ID：10536546
> 
> 赞同：0
> 
> 时间：2012-05-10T14:47:19.210
> 
> 标签：javascript, html, firefox, dom

我正在尝试获取元素选项的值：

```
<div id="decorazioni_agg">Decorazioni aggiuntive:<br>
        <select id="decorazioni" name="decorazioni">
            <option class="option" value="smarties">Smarties</option>
            <option class="option" value="scaglie">Scaglette di
                            cioccolato</option>
            <option class="option" value="cheerios">Cheerios</option>
            <option class="option" value="chocopops">Choco 
                            Pops</option>
        </select><br>

        <input class="button" name="aggiungi" type="button" value="Aggiungi 
                    decorazione" onClick="add_decoration(decorazioni.value)">
    </div> 
```

这是函数 add_decoration(obj)：

```
function add_decoration(tipo)
{
if(tipo == 'smarties')
    add_smarties();
else
    add_something(tipo);
} 
```

现在，这适用于 Chrome 和 IE8，但不适用于 Firefox 3.5；Firefox 错误控制台说：

```
decorazioni is not defined 
```

我怎么能不使用一堆开关，这样我就可以保持我的代码干净？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:51:35.887

不要在 HTML 中绑定事件处理程序。

```
<input class="button" id="aggiungi" name="aggiungi" type="button" value="Aggiungi decorazione" />

document.getElementById('aggiungi').onclick= function () {
    add_decoration(document.getElementById('decorazioni').value);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:49:33.110

```
onclick="var elem = document.getElementById('decorazioni'); add_decoration(elem.options[elem.selectedIndex].value);" 
```

但是，最好使用正确的事件注册而不是内联事件。这是一个 jQuery 示例；为了让它工作，给按钮一个 id：

```
$('#buttonid').on('click', function() {
    add_decoration($('#decorazioni').val());
}); 
```

# .net - .NET 4.0：如果泛型参数为 Nullable，我如何获取其基础类型？

> ID：10536553
> 
> 赞同：3
> 
> 时间：2012-05-10T14:47:38.837
> 
> 标签：.net, generics, reflection, types

注意：我不是要确定泛型参数是否可以为空。我想知道的是，如果它可以*为*空，那么可以为空的底层类型是什么？

这是我正在尝试的：

```
Function CreateTdParameter(Of T)(Name As String, Value As T) As TdParameter

    Dim TdType As TdType
    Dim ValueType As Type = GetType(T)

    If ValueType.IsGenericType Then
        Dim GenType As Type = ValueType.GetGenericTypeDefinition()
        If GenType = GetType(Nullable(Of )) Then
            ValueType = Activator.CreateInstance(GenType.MakeGenericType(New Type() {ValueType}))
            ValueType = Nullable.GetUnderlyingType(ValueType.GetGenericTypeDefinition().UnderlyingSystemType)
        End If
    End If

    If ValueType = GetType(String) Then
        TdType = Teradata.Client.Provider.TdType.VarChar
    ElseIf ValueType = GetType(Integer) Then
        TdType = Teradata.Client.Provider.TdType.Integer
    ElseIf ValueType = GetType(DateTime) Then
        TdType = Teradata.Client.Provider.TdType.Timestamp
    Else
        Throw New NotImplementedException(String.Format("{0} not expected.", Value.GetType))
    End If

    Return CreateTdParameter(Name, Value, TdType, ParameterDirection.Input)

End Function 
```

`DateTime?`通过`Value`参数传递a时会导致以下错误：

`GenericArguments[0], 'System.Nullable`1 [System.DateTime]'，在'System.Nullable`1[T]' violates the constraint of type 'T'.`

看来我需要获取底层类型才能使用反射实例化该类型的可空值。不知道如何绕过这个catch-22。

谁能指出我可以判断泛型类型是否可以为空的方法，如果是，我如何获得它的基础类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:53:30.807

我将使用 C# 作为示例：

```
Type underlyingType = Nullable.GetUnderlyingType(typeof(T));
if(underlyingType != null) {
    .. is nullable, with underlying-type as described
} 
```

# java - 有没有办法在请求者付费标记的 Amazon S3 存储桶中列出对象？

> ID：10536556
> 
> 赞同：1
> 
> 时间：2012-05-10T14:47:46.107
> 
> 标签：java, amazon-s3, amazon-web-services, jets3t

我正在尝试获取 aws-publicdatasets 存储桶中用于 commoncrawl 的对象名称列表。我一直在研究使用 Jets3t 来 createSignedGetUrl 但我不确定是否可以通过以下方法获取对象列表：

```
 credentials = new AWSCredentials(accessId, secretId);
    restS3Service = new RestS3Service(credentials);
    restS3Service.setRequesterPaysEnabled(true);
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR, cal.get(Calendar.HOUR)+1);
    Date expiryDate = new Date(cal.getTimeInMillis());
    String getUrl = restS3Service.createSignedGetUrl(bucketName, null,
            expiryDate, false);

    S3Object obj = signedUrlHandler.getObjectWithSignedUrl(getUrl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:43:46.100

[Requester Pays](http://docs.amazonwebservices.com/AmazonDevPay/latest/DevPayDeveloperGuide/S3RequesterPays.html#DevPayS3RequesterPays)功能可用于共享存储桶，并允许由经过身份验证的 AWS 用户而不是存储桶的所有者支付共享存储桶的使用费。

因此，如果您想创建一个签名 URL，那么没有人可以通过签名 URL 访问该对象。如何识别它是由哪个 AWS 账户访问的，或者当没有 S3 用户访问它时会发生什么。

我认为这是不可能的。

# android - ActionBar 自定义标题为 ImaveView 而不是 TextView

> ID：10536559
> 
> 赞同：8
> 
> 时间：2012-05-10T14:47:53.827
> 
> 标签：android, customization, android-actionbar

我试图在操作栏上解决这个问题，但从我可以看到的标题基本上是一个 TextView 但我需要放置一个图像而不是纯文本。我尝试将其设置到 Style Themes.xml 中，如下所示：

```
<item name="android:actionBarStyle">@style/MyActionBar</item> 
```

然后我定义了这种风格

```
 <style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/action_background</item>
    <item name="android:titleTextStyle">@style/ActionbarTitleStyle</item>
</style> 
```

我认为我可以定义标题的背景，但即使我这样做不是我想要的，请尝试 getActionBar().setCustomView(layout); 但是在调用 setContentView 之前我的操作栏为空，我需要在 Base 类中使用它。

PD。我只需要关心 HONEYCOMB 和更高版本，所以请不要建议 Sherlock 或 Jonhanilson 实现。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T14:55:03.670

如果你想要一个图像，你可以指定应用程序的标志和图标（它将被用来代替图标）：

```
<application
    android:icon="@drawable/ic_launcher"
    android:logo="@drawable/logo"
    android:label="@string/app_name"
    android:name=".AppName"
    > 
```

现在你有一个任意图像而不是你的启动器图标。您接下来需要做的是摆脱文本。在您的样式中执行以下操作：

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="titleTextStyle">@style/NoTitleText</item>
    <item name="android:titleTextStyle">@style/NoTitleText</item>
    <item name="subtitleTextStyle">@style/NoTitleText</item>
    <item name="android:subtitleTextStyle">@style/NoTitleText</item>     
</style>

<style name="NoTitleText">
    <item name="android:textSize">0sp</item>
    <item name="android:textColor">#00000000</item>
</style> 
```

如果我没记错的话，你应该同时使用`item name="titleTextStyle"`，`item name="android:titleTextStyle"`如果你使用 ActionBarSherlock。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:56:09.613

像这样覆盖 setContentView：

```
@Override
public void setContentView(int resLayoutId) {
    super.setContentView(resLayoutId);
    // TODO Set your actionbar changes here
} 
```

或者，您可以这样做：

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/action_background</item>
    <item name="android:titleTextStyle">@style/ActionbarTitleStyle</item>
    <item name="android:displayOptions">showCustom</item>
    <item name="android:customNavigationLayout">@layout/custom_nav_layout</item>
</style> 
```

# android - 在 Eclipse 中使用来自 GitHub 的 Maven Android 库

> ID：10536560
> 
> 赞同：1
> 
> 时间：2012-05-10T14:47:55.053
> 
> 标签：android, eclipse, git, maven, android-library

我们正在制作一个 Android 应用程序，我们想使用一个名为 EasyNFC (https://github.com/Mobisocial/EasyNFC) 的库。

然而，我们遇到了很多麻烦，要让一切都很好地协同工作。我们希望在 Eclipse 中可以使用 EasyNFC，以便我们可以从我们的 Android 项目中引用该库，但同时也保持拉取更新的能力（即我们不想继续复制/粘贴）。问题：

1.  EasyNFC 是一个 Maven 项目（我们已经在使用 m2eclipse）
2.  EasyNFC 托管在 Git 上（我们已经在使用 m2e Git 连接器）
3.  EasyNFC 旨在用作 Android 库，但不是 Eclipse 项目

有没有一种简单的方法可以将 EasyNFC 作为 Maven/Git/Android 项目导入 Eclipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:10:42.523

### EasyNFC 旨在用作 Android 库，但不是 Eclipse 项目。

我检查了它的 pom.xml 并玩了一下。

1.  它使用 android-2.3.3.jar 作为 POM 中的依赖项并不意味着它必须是一个 Android 库项目。
2.  根据项目结构和<packaging>定义的POM，很明显，生产者希望消费者开发者使用它作为一个常规的java项目（bulid作为一个jar库）。此外，POM 中定义的 maven-android-plugin 很冗长，在构建时不涉及 android 阶段/目标。它还使用了一个古老的 2.8.4 版本，所以我猜它最初是作为 Android 库项目创建的，最近被转换为常规的 java 项目，并且没有清理未使用的代码。

### 有没有一种简单的方法可以将 EasyNFC 作为 Maven/Git/Android 项目导入 Eclipse？

假设您使用最新的 Android SDK & ADT 版本，在 Eclipse 中（需要 m2eclipse），只需将其作为常规的 mavenized java 项目导入即可：`File -> Import ... -> Maven -> Existing Maven Projects`完成后，您可以在 Package Explorer 中看到 easynfc 有标记为大写 M 和 J 的图标，这意味着Mavenized Java 项目。

在Android项目中，将easynfc项目添加到项目构建路径：`Properties -> Java Build Path -> Projects -> Add ...`然后导出easynfc项目：构建类路径：`Properties -> Java Build Path -> Order and Export`。

现在您应该能够在您的 Android 项目中使用 easynfc 并在 Eclipse 中构建/运行/调试它。

希望这可以帮助。

# wordpress - WP 插件：在类中使用 add_filter

> ID：10536564
> 
> 赞同：4
> 
> 时间：2012-05-10T14:48:03.283
> 
> 标签：wordpress

我正在使用 WP v3.3.1，并且正在尝试制作插件。我已经让它半工作了。它启动了，并且 add_action 有效，但由于某种原因，我的过滤器没有被触发。当我四处搜索时，我看到我应该这样做，但它不起作用。我还尝试将它包含在课堂之外，但这也不起作用。错误日志是从构造函数写入的，但不是`xmlAddMethod`. 我在一个文件中测试了 xmlrpc 调用，它可以工作，但是在制作类时遇到了问题。

```
//DOESN'T WORK HERE
add_filter( 'xmlrpc_methods', array( &$this, 'xmlAddMethod') );

class TargetDomain extends Domain 
{
    public function __construct() 
    {        
        error_log('TARGET: __construct');
        //DOESN'T WORK HERE EITHER
        add_filter( 'xmlrpc_methods', array( &$this, 'xmlAddMethod') );
        parent::__construct();
    }

    function xmlAddMethod( $methods ) 
    {
        error_log('TARGET: xml_add_method');
        $methods['myBlog.publishPost'] = 'publishMyPost';
        return $methods;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T15:17:05.670

改变这个：

```
add_filter( 'xmlrpc_methods', array( &$this, 'xmlAddMethod') ); 
```

至：

```
add_filter( 'xmlrpc_methods', array( 'TargetDomain', 'xmlAddMethod') ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-21T10:51:11.673

您还可以使用 php 的魔法**__CLASS__**常量。

```
add_filter( 'xmlrpc_methods', array( __CLASS__, 'xmlAddMethod') ); 
```

# android - 9-patch - 1px 边界模糊

> ID：10536568
> 
> 赞同：6
> 
> 时间：2012-05-10T14:48:13.843
> 
> 标签：android, nine-patch

我正在测试 HTC Desire 这是一个 hdpi 设备。当您查看图像时，问题很明显：

![9-patch - 1px 边界模糊](../Images/2f22fd5f8817be54b6580a34e50a3be9.png)

这是我的 9-patch（使用标准 9-patch 工具制作）的外观（放大）：

![9-patch - 1px 边界模糊](../Images/0b5cbb356bb2c36d8e9be619fd4d67c6.png)

左图是我的 Photoshop 文件，右图是我设备的屏幕截图。如您所见，存在巨大差异。假设阴影不是那么重要，但模糊的边界看起来很糟糕。

**我的 9-patch png 错了吗？我该怎么做才能获得漂亮的清晰 1px 实心边框？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T15:32:54.947

您应该为不同可绘制文件夹中的每个 png 使用 9-path 工具。有时问题是 Android 尝试转换 png 并模糊黑线，这导致后来出现正确显示的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T23:18:08.317

为了避免这个问题，只需将 9 补丁放在 drawable-no-dpi 文件夹中。这允许对所有密度都有一个图像。并且android不会触摸图像。

这主要是我为我的项目所做的，除非我真的想在密度之间有所不同。在这种情况下，我为每个密度创建一个 9-patch。

**替代解决方案：**

将顶部和左侧标记每边缩小 1 个像素。这将确保可缩放部分不与灰色边框重叠。

# c# - 在用户控件表单上查找字段

> ID：10536572
> 
> 赞同：0
> 
> 时间：2012-05-10T14:48:46.730
> 
> 标签：c#, asp.net, .net

我在用户控件表单上有一个字段“x”，它包含在 aspx 页面和使用 SharePoint 母版页的页面上。我试图在我的代码中的 aspx 页面上找到字段 x，但它会引发“未设置对象引用”错误。我已经尝试过，但没有任何效果，

```
((TextBox)Page.Master.FindControl("PlaceHolderMain").FindControl("Experience").FindControl("x")).Text

((TextBox)this.FindControl("x")).Text

((TextBox)Page.Master.FindControl("PlaceHolderMain").FindControl("x")).Text 
```

我可以在页面源代码中找到该字段，

```
<input name="ctl00$PlaceHolderMain$ctl00$x" type="text" value="3" id="ctl00_PlaceHolderMain_ctl00_x" class="textbox" /> 
```

**更新：-**

以前我在 aspx 页面的加载事件上以编程方式添加用户控件，

```
UserControl uc = (UserControl)Page.LoadControl("Experience.ascx");
experineceForm.Controls.Add(uc); 
```

但是通过查看页面源，我怀疑并考虑使用以下代码在设计时添加它，

```
<%@ Register TagPrefix="uc" TagName="Experience" Src="Experience.ascx" %>

<div id="experineceForm" runat="server">
   <uc:experience id="idExperienceForm" runat="server"/>
</div> 
```

完成此操作后，我可以使用以下代码找到控件，

```
((TextBox)Page.Master.FindControl("PlaceHolderMain").FindControl("idExperienceForm").FindControl("txtEmployeeComments")).Text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:53:23.750

AFAIK，`((TextBox)Page.Master.FindControl("x")).Text`应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:10:56.530

试试这个函数（如下）对 ID 进行递归搜索。**System.NullReferenceException: Object reference not set to an instance of an object**错误很可能是因为脚本没有找到文本框，所以控件没有`.Text`属性。注意：root 将是包含您要查找的文本框的 asp.net 占位符对象或 asp.net 面板等的 id。在尝试使用控件之前，您应该测试是否返回 null。

```
public Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id) {
        return root;
    }
    Control c = default(Control);
    foreach ( c in root.Controls) {
        Control t = FindControlRecursive(c, id);
        if ((t != null)) {
            return t;
        }
    }
    return null;
} 
```

# android - 安卓无衬线字体

> ID：10536573
> 
> 赞同：1
> 
> 时间：2012-05-10T14:48:46.910
> 
> 标签：android, html, css, android-fonts

[我最近意识到，在http://www.codestyle.org/css/font-family/index.shtml](http://www.codestyle.org/css/font-family/index.shtml)的帮助下，Android 浏览器在我的字体堆栈中没有任何字体作为 Times Replacement 。

```
"Times New Roman",Times,FreeSerif,"DejaVu Serif",serif 
```

我对此并不生气，因为它看起来不错。但我想知道字体的名称是什么，以便我可以将它包含在我的字体堆栈中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:06:13.357

您不需要添加名称，因为 Android 浏览器会检查您当前的列表，注意到没有任何特定名称匹配，并使用`serif`映射到浏览器的衬线字体。同样，对于 Android sans-serif 字体（这是您的标题所指的...），仅使用通用名称`sans-serif`。

奇怪的是，经常宣传的*名字*`Droid Serif`不起作用。它只是 Android 浏览器的另一个无法识别的名称。例如，请参阅问题[Using CSS font-family to select Droid fonts not working on Android](https://stackoverflow.com/questions/5078008/using-css-font-family-to-select-droid-fonts-not-working-on-android)（这个问题比评论和答案更有用）。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:31:11.570

最初的 Android 字体是“Droid”（Serif 版本是“Droid Serif”）：[http](http://en.wikipedia.org/wiki/Droid_(font) ://en.wikipedia.org/wiki/Droid_(font )

较新设备中的字体是“Roboto”，但我不确定它是否有衬线版本。*

# vbscript - 在 VBScript 中读取字符串

> ID：10536576
> 
> 赞同：0
> 
> 时间：2012-05-10T14:48:49.617
> 
> 标签：vbscript

我想修改我的函数，从法语页面标题中的数据库记录的值中删除标记：

```
Function removeSup(strToRemove)
    strToRemove = Replace(strToRemove,"<sup>","(")
    strToRemove = Replace(strToRemove,"</sup>",")")
    response.Write(strToRemove)
End Function 
```

以便它可以读取标签的内容。如果内容是 ® 或 a ™，则什么也不做，但如果是 MD 或 MC，则进行替换。我只是还没弄清楚如何用 VBScript 读取字符串，所以这是我应该用 VBScript 做的事情，还是将它传递给 jQuery 来做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:32:47.647

您可以使用正则表达式，但如果我理解您的意思，您可以按如下方式进行。Jquery 只是 javascript，如果这是用于 web，最好不要混合使用 vbscript 和 javascript，除非真的有必要。

```
Function removeSup(strToRemove) 
    strToRemove = Replace(strToRemove,"<sup>MD</sup>","(MD)") 
    strToRemove = Replace(strToRemove,"<sup>MC</sup>","(MD)") 
    response.Write(strToRemove) 
End Function 
```

# spring-mvc - Spring 3 MVC 请求参数映射。在控制器中调用处理程序时来自同一类的两个参数

> ID：10536579
> 
> 赞同：0
> 
> 时间：2012-05-10T14:48:53.767
> 
> 标签：spring-mvc, spring-3, spring-annotations

我试图弄清楚如何通过 URL 将同一类的两个不同参数传递给控制器​​中的处理程序方法。例如，给定一个带有“id”参数的“Foo”类（我只是说一个参数以使其简单，但从一个有负载的类中考虑），控制器的代码如下所示：

```
@Controller(value = "customerCareRemoteService")
public class CustomerCareRemoteServiceImpl {

// Othe methods/requests

    @RequestMapping(value = "/" + "prueba" , method = RequestMethod.GET)
    public @ResponseBody String prueba(Foo pFoo1, Foo pFoo2) {
        //stupid and not interesting code
        String answer = "pFoo1.id is " + pFoo1.id + ". pFoo2.id is " + pFoo2.id.";
        System.out.println(answer);
        return answer;

    }

} 
```

因此，当我调用此方法时，两个参数之间没有区别：

```
http://myfakeurl/prueba?id=1&id=2 
```

我应该如何处理？有没有办法给参数“加前缀”？我见过@RequestParam，但它对我不起作用，因为它不能用于我自己的美容课程（或者我错了吗？）。我也想避免包装类。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:48:32.527

你应该使用@PathVariable 来解决这个问题。

您的映射网址将是这样的。

```
@RequestMapping(value = "/" + "prueba" + "/{id1}/{id2}" , method = RequestMethod.GET) 
```

你的功能中的争论是。

```
public @ResponseBody String prueba(@PathVariable int pFoo1, @PathVariable int pFoo2) 
```

通过这种方式，您可以获得控制器中的两个 ID，以便使用它们进行进一步操作。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:37:37.507

因此，在同事的帮助下，我来到了讨论该主题的下一页：

[绑定 Spring MVC 命令对象时自定义参数名称](http://java.dzone.com/articles/customizing-parameter-names)

这导致了下一个 StackOverFlow 问题：

[绑定spring mvc命令对象时如何自定义参数名称](https://stackoverflow.com/questions/8986593/how-to-customize-parameter-names-when-binding-spring-mvc-command-objects/9003314#9003314)

所以看起来没有像“使用注释X”这样的简单解决方案，而是创建自己的解析器，并使用自定义注释（作为一个好的新手，我仍在努力理解它:-S）。

# javascript - 多个下拉列表第一个选择从第二个下拉列表中删除值，最多 7 个下拉列表

> ID：10536585
> 
> 赞同：1
> 
> 时间：2012-05-10T14:49:23.283
> 
> 标签：javascript

我在 html 中有 7 个下拉框。它们都将填充相同的数据。我想要做的是，当第一个下拉列表被选中时，它会从下一个下拉列表中删除选定的项目。因此，如果您有数据：A、B、C、D、E、F、G、H、I 在一个下拉列表中，如果我在第一个下拉列表中选择 B，那么在下一个下拉列表中它应该只显示 A、C、D ,E,F,G,H,I 等最多 7 个下拉菜单。我不知道在 JavaScript 中解决这个问题的最佳方法是什么。示例代码：下面的代码在我的电脑上的 IE7 和 IE8 上不起作用，任何人都知道我必须对其进行哪些更改才能使用此代码.. **提前感谢您的帮助**

```
 function callSave(select) {

        var parent = select.parentNode;    

       var usedValues = {};    

      for (var i = 0; i < parent.children.length; ++i) {

        var s = parent.children[i];

      if (s.nodeName.toLowerCase() != 'select') {
           continue;
        }        

     if (s.value != '') {
         usedValues[ s.value ] = s;
      } 
  }    

   for (var i = 0; i < parent.children.length; ++i) {      
      var s = parent.children[i];        
      if (s.nodeName.toLowerCase() != 'select') {
          continue;
      }        

      for (var j = 0; j < s.children.length; ++j) {           
         var o = s.children[j];             
        if (o.nodeName.toLowerCase() != 'option') {
            continue;
        }            

         var p = o.value == '' ? undefined : usedValues[o.value];          
         if (p == undefined || p == s) {
             o.style.display = '';
         }          
         else {
             o.style.display = 'none';
         }
       }
    }
 }

HTML:
  <div>
      <select onChange="callSave(this)">
       <option></option>
       <option>A</option>
      <option>B</option>
       <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
      <option>G</option>
      <option>H</option>
   </select>
  <select onChange="callSave(this)">
       <option></option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
        <option>G</option>
       <option>H</option>
  </select>
   <select onChange="callSave(this)">
       <option></option>
       <option>A</option>
       <option>B</option>
      <option>C</option>
      <option>D</option>
       <option>E</option>
       <option>F</option>
      <option>G</option>
      <option>H</option>
   </select>
   <select onChange="callSave(this)">
      <option></option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
      <option>G</option>
      <option>H</option>
  </select> 
```

# javascript - jqPlot Chart – 不显示 ajax 数据

> ID：10536586
> 
> 赞同：1
> 
> 时间：2012-05-10T14:49:23.890
> 
> 标签：javascript, spring-mvc, jqplot

我正在使用 jqPlot “AJAX JSON 数据渲染器”，如下所述：[http](http://www.jqplot.com/tests/data-renderers.php) ://www.jqplot.com/tests/data-renderers.php 。
我的服务器端是 Spring MVC。在服务器上，我渲染了一个 Object[][] 矩阵，矩阵的每一行包含 2 个对象：[LocalTime.toString(“HH:mm”), Integer]。响应返回为“@ResponseBody”<p> 我可以看到数据是从服务器检索的，当我在警报中显示它时，我看到以下内容：

`[["09:00",5],["09:30",5],["10:00",5],["10:30",5],["11:00",10],["11:30",10],["12:00",10],["12:30",10],["13:00",5]]`

我也尝试使用`List<List<Object>>`而不是数组。我无法让它工作。我得到的只是一张空图表。这是javascript：

```
<script>
    $(document).ready(function(){
      var ajaxDataRenderer = function(url, plot, options) {
        var ret = null;
        $.ajax({
          async: false,
          url: url,
          dataType:"json",
          success: function(data) {
            ret = data;
          }
        });
        alert("OUT: " + ret);
        return ret;
      };
       var jsonurl = "chartData";

      var plot2 = $.jqplot('chart', jsonurl,{
        dataRenderer: ajaxDataRenderer,
        dataRendererOptions: {
          unusedOptionalUrl: jsonurl
        }
      });
    });
</script> 
```

我在这里看到[JSON for jqPlot](https://stackoverflow.com/questions/6693579/json-for-jqplot)每个人都建议构建一个字符串并解析它。这是唯一的方法吗？
我还查看了几个类似的问题，但找不到答案。
将不胜感激任何提示...</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:34:42.600

这个问题是很久以前提出的，所以我假设你现在已经继续前进了......但我也在寻找这个......并且刚刚找到了答案。嗯...一个答案。

问题是，当您输入日期时，您从 ajaxDataRenderer 传回的东西看起来不再像 json。我不知道为什么，但是如果您将 dataType 更改为文本，那么您的警报将输出数据。但是图表失败了，因为它没有设置为处理字符串。

所以....你使用 eval 来强制 js 将字符串转换为实际的数组，如下所示：

```
var ajaxDataRenderer = function(url, plot, options) {
     var ret = null;

     $.ajax({
      // have to use synchronous here, else the function
      // will return before the data is fetched
      async: false,
      url: url,
      dataType:"text",
      success: function(data) {
          ret = data;
          }
    });

    //clear out the loading message from the div
    $('#chartdiv').empty();
    //evaluate the returned string...to turn it into the data structure.
    return eval(ret);
}; 
```

无论如何，这对我有用。然后我让我的 url 返回代表数据的文本。

希望这可以帮助其他人寻找答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:19:35.677

[此示例 jsfiddle 显示](http://jsfiddle.net/X9jEz/)了在您的情况下进入绘图的数据应该是什么样子。

由于您在 x 轴上使用时间（日期），因此您必须告诉图表如何呈现它，并且没有比使用`DateAxisRenderer`. 下面的代码（也在示例中）显示了它是如何完成的：

```
 axes: {
        xaxis: {
            label: "x label",
            renderer: $.jqplot.DateAxisRenderer,
            tickOptions:{formatString:'%H:%M'}
        }
    } 
```

# javascript - Solr & AJAX 设置响应查询正确

> ID：10536592
> 
> 赞同：1
> 
> 时间：2012-05-10T14:49:39.717
> 
> 标签：javascript, ajax, json, solr

我使用[Solr 的 AJAX 示例的 JSON 输出](http://wiki.apache.org/solr/SolJSON)作为我项目的基础。但是，我通过在表单中​​添加下拉菜单并在参数中添加分面来修改了一些内容。

参数：

```
function getstandardargs() {
    var params = [
        'wt=json'
        ,'facet=true'
        ,'facet.field=brand1'
        ,'facet.field=brand2'
        ,'facet.field=brand3'
        ,'facet.field=brand4'
        ,'facet.limit=2'
        ]; 
```

下拉式菜单：

```
<form name="f1" onsubmit='xmlhttpPost("/solr/select"); return false;'>
  <p>query: <input name="query" type="text">  
  <select id="Entity">
  <option value="brand1">Universal</option>
  <option value="brand2">Paramount</option>
  <option value="brand3">Fox</option>
  <option value="brand4">Sony</option>
</select> 
  <input value="Go" type="submit"></p> 
```

我正在尝试将下拉值添加到我的方面查询结果中，如下所示：

```
var rsp = eval("("+str+")");
var c=document.getElementById("Entity");
cat=c.options[c.selectedIndex].value;
var output=rsp.facet_counts.facet_fields;
html += "Entity: " + output+'.'+cat; 
```

我的方面响应发回：**Entity: [object Object].Universal**。如何正确地将下拉值添加到响应查询中，以便 Solr 实际上可以返回正确的构面值？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:55:56.043

通过为您的 ajax 请求使用库，您无疑会降低此问题的复杂性，因为：

*   您可以轻松地进行将它们转换为选择选项所需的 dom 操作
*   您可以任意发送请求，期望返回一个实际的 json 对象
*   你可以避免使用`eval`

既然你说你的回应是“实体：[object Object].Universal”，你能试着用`console.log( output );`官方来告诉我们对象中返回了什么吗？通过将字符串与对象连接可能会弄乱输出对象

如果它实际上是一个对象，您可以像这样迭代地访问它：

```
for(var x in rsp.facet_counts.facet_fields) {
    //rsp.facet_counts.facet_fields[x]
} 
```

# asp.net - GridView 作为 DataTable 源仅第一次排序

> ID：10536593
> 
> 赞同：0
> 
> 时间：2012-05-10T14:49:44.780
> 
> 标签：asp.net, gridview, datatable

[我使用此 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)中的代码在我的 GridView 上实现了排序，其中 DataTable 作为 DataSource 。但是，当我单击任何列时，我的网格第一次排序，之后它不会在单击任何其他列时排序。

### PageLoad() 事件中的代码 -

```
if (!Page.IsPostBack)
{
      HView hv = new HView ();
      DataTable HTable = new DataTable("hTable");
      HTable = hv.FillTable();
      Session["hTable"] = HTable;
      GridView2.DataSource = Session["hTable"];
      GridView2.DataBind();
} 
```

### 排序事件中的代码 -

```
 protected void GridView2_Sorting(object sender, GridViewSortEventArgs e)
    {
        DataTable notesDT = Session["hTable"] as DataTable;
        if (notesDT != null)
        {                
            notesDT.DefaultView.Sort = e.SortExpression + " " + GetSortDirection(e.SortDirection);                
            GridView2.DataSource = Session["hTable"];
            GridView2.DataBind();
        }
    } 
```

有人知道我可能做错了什么吗？

### 编辑：我刚刚意识到这一点。如果我选择一个特定的行，我有另一个视图，其中填充了有关该行的详细信息。当我在尝试对任何列进行排序之前先查看一些行详细信息时，排序工作得非常好，任意次数。但是，如果我在选择一行之前尝试排序，它只能工作一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:02:03.223

您不需要将数据表存储到会话中。实际上将整个数据表放入会话中根本不是一个好主意。有什么特别的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:03:52.130

您在排序事件中使用`DataTable`as `DataSource`，但您应该改用排序视图。对视图进行排序不会改变表中数据的排序顺序，只会改变视图中的顺序。

```
protected void GridView2_Sorting(object sender, GridViewSortEventArgs e)
{
    DataTable notesDT = Session["hTable"] as DataTable;
    if (notesDT != null)
    {                
        notesDT.DefaultView.Sort = e.SortExpression + " " + GetSortDirection(e.SortDirection);                
        GridView2.DataSource = notesDT.DefaultView;
        GridView2.DataBind();
    }
} 
```

**编辑**：虽然我刚刚注意到您使用的是来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)的相同代码。

您还可以尝试从视图中创建一个新的 DataTable：

```
GridView2.DataSource = notesDT.DefaultView.ToTable(true); 
```

# jquery - 切换多个动作

> ID：10536594
> 
> 赞同：0
> 
> 时间：2012-05-10T14:49:49.553
> 
> 标签：jquery

我有一个包含很多事件的 div。我尝试了两件事：

1- 使用条件进行切换的第二部分。它有效，但响应并不完美，有一秒钟的延迟。我在这里简化了案例：http: [//jsfiddle.net/T26vF/2/](http://jsfiddle.net/T26vF/2/)

2-然后我尝试了一个简单的切换。当我单击一个对象时，它可以正常工作。但是这里的问题是，当我在切换的第一部分并单击背景或另一个对象并返回到第一个对象时，我必须单击两次，（第一次单击仍然执行第二部分的切换）。我在这里简化了案例：http: [//jsfiddle.net/T26vF/4/](http://jsfiddle.net/T26vF/4/)

```
$(function(){

    // THIS
    $(".arrodonit").toggle(
        function(){ $(this).children("img").animate({"width":"411px","marginLeft": "-85px","marginTop": "-80px"}, 900); 
                    $(this).siblings(".fons").fadeOut("slow");
                  },

        function(){ $(this).children("img").animate({"width":"233px","marginLeft": "0px","marginTop": "0px"}, 900); 
                    $(this).siblings(".fons").fadeIn("slow");
        }
    );

    // NOT THIS
    $(".arrodonit").click(function(e) {
        e.stopPropagation();
        $('.arrodonit').not(this).siblings(".fons").fadeIn("slow");
        $('.arrodonit').not(this).children("img").stop().animate({ "width":"233px","marginLeft": "0px","marginTop": "0px",}, 900);
        $(".mesInfo").fadeIn()
        $(".info").fadeOut()
    });

    // DOCUMENT
    $(document).click(function() {
       $('.fons').fadeIn();
       $('.arrodonit img').animate({ "width":"233px","marginLeft": "0px","marginTop": "0px"}, 900); 
    });

}) 
```

我问：
- 我的代码有什么问题？
- 如果我在第一种情况下设置条件，为什么会有延迟？
- 为什么我要在第二个例子中点击两次？
- 有没有更好的方法来做同样的动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:09:51.760

这只是一个技巧，`stop().animate()`当您有一系列动画事件时尝试使用，这将减少您的延迟

希望这可以帮助

# php - 使用javascript检索行中的选定值

> ID：10536599
> 
> 赞同：0
> 
> 时间：2012-05-10T14:50:08.023
> 
> 标签：php, javascript

我有一个多行表，每一行都有一个下拉列表。我是 javascript 新手，无法从行中检索所选值。知道怎么做吗？提前致谢。

代码：

```
function chng_page(serialNum, rowid)
{
    alert(rowid);
    alert(serialNum);
    var select_index = document.getElementById('orderStatus').selectedIndex; 
    //get the value of selected option
    var option_value = document.getElementById('orderStatus').options[select_index].value;

    //redirect with value as a url parameter
    window.location = 'orderStatus.php?serialNum=' + serialNum + '&status=' + option_value;
}
</script> 
```

//下拉列表代码

```
<select id="orderStatus" name="orderStatus" onchange="chng_page(<?php echo $serialNum?    >, this.parentNode.parentNode.rowIndex)">
   <option value="Pending" <?php echo ($status == "Pending") ? ' selected="selected"' : ''; ?>>Pending</option>
   <option value="Cooking" <?php echo ($status == "Cooking") ? ' selected="selected"' : ''; ?>>Cooking</option>
   <option value="On The Way" <?php echo ($status == "On The Way") ? ' selected="selected"' : ''; ?>>On The Way</option>
   <option value="Delivered" <?php echo ($status == "Delivered") ? ' selected="selected"' : ''; ?>>Delivered</option>   
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:01:09.703

您没有提到每行中的选择元素是否具有唯一的 id，但它以某种方式在您的代码中显示它们确实如此。
在这种情况下，您可以使用 JQuery（一种流行的 JavaScript 框架）来检索选定的值。
假设您已在 HTML 中包含 JQuery 文件，并将事件处理程序附加到 select 元素（为使其更容易，将当前 select 元素的 id 作为函数中的参数传递），请执行以下操作：

```
var selected_value = $("#id_of_select_element option:selected").val(); 
```

如果选择元素的 id 是唯一的，那一行代码肯定可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:02:26.350

您在所有表格行中的下拉列表具有相同的名称/ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:09:06.520

如果每一行都有一个具有相同 id-> #orderStatus 的下拉列表，你应该试试这个，

```
function chng_page(serialNum, ddlist)
{
    var rowid = ddlist.parentNode.parentNode.rowIndex
    alert(rowid);
    alert(serialNum);
    var select_index = ddlist.selectedIndex; 
    //get the value of selected option
    var option_value = ddlist.options[select_index].value;

    //redirect with value as a url parameter
    window.location = 'orderStatus.php?serialNum=' + serialNum + '&status=' + option_value;
}

<select name="orderStatus" onchange="chng_page(<?php echo $serialNum?>, this)">
   <option value="Pending" <?php echo ($status == "Pending") ? ' selected="selected"' : ''; ?>>Pending</option>
   <option value="Cooking" <?php echo ($status == "Cooking") ? ' selected="selected"' : ''; ?>>Cooking</option>
   <option value="On The Way" <?php echo ($status == "On The Way") ? ' selected="selected"' : ''; ?>>On The Way</option>
   <option value="Delivered" <?php echo ($status == "Delivered") ? ' selected="selected"' : ''; ?>>Delivered</option>   
</select> 
```

# r - 如何从作者列表中检索/计算引文计数和/或引文索引？

> ID：10536601
> 
> 赞同：20
> 
> 时间：2012-05-10T14:50:13.883
> 
> 标签：r, api, web-scraping, citations

我有一个作者名单。我希望自动检索/计算每个作者的（理想情况下每年）引文索引（h-index、m-quotient、g-index、HCP 指标或...）。

```
Author Year Index
first  2000   1
first  2001   2
first  2002   3 
```

考虑到每位研究人员每篇论文的引用次数，我可以计算出所有这些指标。

```
Author Paper Year Citation_count
first    1    2000   1
first    2    2000   2
first    3    2002   3 
```

尽管我努力了，我还没有找到能够做到这一点的 API/scraping 方法。

我的机构可以访问许多服务，包括 Web of Science。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:35:15.157

实际上，主要问题是建立[引文图](http://en.wikipedia.org/wiki/Citation_graph)。一旦你有了它，你就可以计算任何你想要的指标（例如[h-index](http://en.wikipedia.org/wiki/H-index)、[g-index](http://en.wikipedia.org/wiki/G-index)、[PageRank](http://en.wikipedia.org/wiki/PageRank)）。

假设您有一组论文（您以某种方式检索到），您可以从每篇论文中提取引文并构建引文图。你可能会发现有用[的 ParsCit，一个开源 CRF 参考字符串和逻辑文档结构解析包](http://aye.comp.nus.edu.sg/parsCit/)，它也被[CiteSeerX](http://citeseerx.ist.psu.edu/index)使用并且效果很好。

# asp.net - MS Web 部署跳过删除规则不跳过

> ID：10536605
> 
> 赞同：5
> 
> 时间：2012-05-10T14:50:24.343
> 
> 标签：asp.net, msbuild, webdeploy

我在我的项目中添加了以下跳过规则，但是当我使用 Web Deploy 发布内容时，/config 文件夹中的文件被清除了。

我正在使用[这里](http://blog.alanta.nl/2011/02/web-deploy-customizing-deployment.html)找到的过程，我发誓它以前是有效的。

我已将以下内容添加到我的项目文件中：

```
<PropertyGroup>
    <OnBeforePackageUsingManifest>AddCustomSkipRules</OnBeforePackageUsingManifest>
</PropertyGroup>
<Target Name="AddCustomSkipRules">
    <ItemGroup>
      <MsDeploySkipRules Include="SkipConfigFolder">
        <SkipAction>Delete</SkipAction>
        <ObjectName>dirPath</ObjectName>
        <AbsolutePath>.*\\config\\$</AbsolutePath>
        <XPath></XPath>
      </MsDeploySkipRules>
      <MsDeploySkipRules Include="SkipConfigSubFolders">
        <SkipAction>Delete</SkipAction>
        <ObjectName>dirPath</ObjectName>
        <AbsolutePath>.*\\config\\.*$</AbsolutePath>
        <XPath></XPath>
      </MsDeploySkipRules>  
    </ItemGroup>
</Target> 
```

当我发布时（通过命令行使用包生成的 cmd 文件），输出以下内容：

```
-------------------------------------------------------
 Start executing msdeploy.exe
-------------------------------------------------------
 "C:\Program Files\IIS\Microsoft Web Deploy V2\\msdeploy.exe" 
   -source:package='<MyPackageFile>' 
   -dest:auto,includeAcls='False' 
   -verb:sync 
   -disableLink:AppPoolExtension 
   -disableLink:ContentExtension 
   -disableLink:CertificateExtension 
   -skip:skipaction='Delete',objectname='dirPath',absolutepath='.*\\config\\$' 
   -skip:skipaction='Delete',objectname='dirPath',absolutepath='.*\\config\\.*$' 
   -setParamFile:"<MySetParameters.xml>"
Info: Deleting filePath (Default Web Site/uPPK_32\config\New Text Document.txt). 
```

似乎正在添加跳过规则，但请注意正在删除 New Text Document.txt。我怎样才能防止这种情况？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:14:19.220

我认为您的第二个跳过行需要使用 filePath 而不是 DirPath，因为您在那里选择文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T17:04:13.070

属性的值是`absolutePath`正则表达式，因此您可能想要一个值`'\\config'`，`'\\config$'`而不是问题中显示的两个示例跳过设置的值。

# vba - Excel循环遍历列表，转置并根据单元格内容创建矩阵

> ID：10536611
> 
> 赞同：1
> 
> 时间：2012-05-10T14:50:50.380
> 
> 标签：vba, excel, transpose

`"KEY*"`我收到一个 500k+ 行的大文件，但所有内容都在 A 列中。我需要运行一个宏，将数据转换为矩阵形式，但只有在 ActiveCell 中找到时才会创建一个新行。例如：

```
| KEY 4759839 | asljhk | 35049 | | sklahksdjf|
| KEY 359     | skj    | 487   |y| 2985789   | 
```

我文件中的上述数据最初在 A 列中如下所示：

```
KEY 4759839
asljhk
35049

sklahksdjf
KEY 359
skj
487
y
2985789 
```

注意事项：

*   空白单元格也需要转置，所以宏不能基于emptyCell停止
*   KEY 之间的单元格数量不是恒定的，因此它实际上需要读取单元格以知道它是否应该创建一个新行
*   它可以根据一行中的 20 个空单元格停止，也可以提示输入最大行数
*   （可选）如果一行中的最后一个项目有某种视觉指示器会很好，这样就可以判断最后一个项目是否为空白单元格

我四处搜索，发现一个宏具有相同的一般主题，但它基于每 6 行，我没有足够的知识来尝试修改它以适应我的情况。但如果它在这里有帮助，那就是：

```
Sub kTest()
    Dim a, w(), i As Long, j As Long, c As Integer
    a = Range([a1], [a500000].End(xlUp))
    ReDim w(1 To UBound(a, 1), 1 To 6)
    j = 1
    For i = 1 To UBound(a, 1)
        c = 1 + (i - 1) Mod 6: w(j, c) = a(i, 1)
        If c = 6 Then j = j + 1
    Next i
    [c1].Resize(j, 6) = w
End Sub 
```

我将不胜感激您能给我的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:06:43.167

这适用于您在问题中提供的示例数据 - 它在从 B1 开始的表中输出结果。它在我的机器上运行 500k 行不到一秒。

```
Sub kTest()
    Dim originalData As Variant
    Dim result As Variant
    Dim i As Long
    Dim j As Long
    Dim k As Long
    Dim countKeys As Long
    Dim countColumns As Long
    Dim maxColumns As Long

    originalData = Range([a1], [a500000].End(xlUp))

    countKeys = 0
    maxColumns = 0

    'Calculate the number of lines and columns that will be required
    For i = LBound(originalData, 1) To UBound(originalData, 1)
        If Left(originalData(i, 1), 3) = "KEY" Then
            countKeys = countKeys + 1
            maxColumns = IIf(countColumns > maxColumns, countColumns, maxColumns)
            countColumns = 1
        Else
            countColumns = countColumns + 1
        End If
    Next i

    'Create the resulting array
    ReDim result(1 To countKeys, 1 To maxColumns) As Variant

    j = 0
    k = 1
    For i = LBound(originalData, 1) To UBound(originalData, 1)
        If Left(originalData(i, 1), 3) = "KEY" Then
            j = j + 1
            k = 1
        Else
            k = k + 1
        End If
        result(j, k) = originalData(i, 1)
    Next i

    With ActiveSheet
        .Cells(1, 2).Resize(UBound(result, 1), UBound(result, 2)) = result
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:01:09.203

测试和工作：

```
 Sub test()
    Row = 0
    col = 1

    'Find the last not empty cell by selecting the bottom cell and moving up
    Max = Range("A650000").End(xlUp).Row 'Or whatever the last allowed row number is

    'loop through the data
    For i = 1 To Max
        'Check if the left 3 characters of the cell are "KEY" and start a new row if they are
        If (Left(Range("A" & i).Value, 3) = "KEY") Then
             Row = Row + 1
             col = 1
        End If

        Cells(Row, col).Value = Range("A" & i).Value
        If (i > Row) Then
            Range("A" & i).Value = ""
        End If
        col = col + 1

    Next i
End Sub 
```

# sql-server-2005 - 使用 JET.OLEDB 驱动程序对 csv 文件执行 sql select 语句

> ID：10536613
> 
> 赞同：0
> 
> 时间：2012-05-10T14:50:52.953
> 
> 标签：sql-server-2005, jet, subquery

我正在尝试执行以下 SQL 语句（在 SQL Server 2005 中构建和测试）

```
 Select *
 From mytesttable
 where myPk in
 (
      select t3 from (
          select field1, substring(field3, charindex(":", field3),6) t2, min(mypk) t3
          from mytesttable
          group by field2, substring(field3, charindex(":", field3),6)
      ) t
  ) 
```

我知道我不能使用子字符串或字符索引。所以最里面的选择在vbs中是这样的：

```
strsql = "select mid(field3, instr(1, field3, ":")), min(mypk) from "
strsql = strsql & myCSVFileName 
strsql = strsql & myCSVFileName & " GROUP By mid(field3, instr(1, field3, ":")) " 
```

这运行良好。

但是当我尝试添加下一个选择来包装最内部的选择时，它会失败。代码如下所示：

```
strsql = "select mypk from ( select mid(field3, instr(1, field3, ":")), min(mypk)     from "
strsql = strsql & myCSVFileName 
strsql = strsql & myCSVFileName & " GROUP By mid(field3, instr(1, field3, ":")) )" 
```

我得到的错误信息是有

> 没有为一个或多个必需参数指定值

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:56:06.153

Jet不知道，但是在SQL Server等平台，派生表必须有别名。换句话说，你需要

```
... FROM (select ... ) AS YouMustProvideAnAliasForThisDerivedTable 
```

每次提到列时也要小心使用相同的大小写（mypk 与 myPk），尽管这似乎不是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:35:28.847

您的字符串中有一些错误，但在 Jet 中不需要为派生表提供别名。

您已经使用 csv 名称重复了该行，在应该使用单引号或两个双引号时使用了双引号，并且您没有返回名为 mypk 的字段。这对我有用，但前提是字段 3 始终包含带有冒号的文本。

```
myCSVFileName = "Table.csv"
strsql = "select pk from ( select mid(field3, instr(1, field3, ':')), min(mypk) as pk from "
strsql = strsql & myCSVFileName & " GROUP By mid(field3, instr(1, field3, ':')) )" 
```

# shell - 如何从 haskell 程序调用 bash 或 shell 脚本？

> ID：10536614
> 
> 赞同：25
> 
> 时间：2012-05-10T14:50:52.970
> 
> 标签：shell, haskell, ffi

我正在用我在 gitbash 中运行的 haskell 编写一些 shell 脚本，但是我希望能够从这些脚本中使用其他一些现有的脚本。

例如，我想运行 maven 目标或执行 git pull，但不必专门与这些工具集成。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-10T14:54:30.690

您可以使用[`System.Process`](https://hackage.haskell.org/package/process/docs/System-Process.html). 例如执行`seq 1 10`shell命令：

```
> import System.Process

> readProcess "seq" ["1", "10"] ""
"1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n"
it :: String

> readProcessWithExitCode  "seq" ["1", "10"] ""
(ExitSuccess,"1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n","")
it :: (GHC.IO.Exception.ExitCode, String, String) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T14:58:05.407

对的，这是可能的。您可以使用`process`package，它导出了许多有用的功能。最简单的是`System.Cmd.system`，它可以在 shell 中运行一些应用程序，产生退出代码。

`System.Process`模块中还提供了更高级的功能。使用此模块，您可以运行进程并以多种方式与其通信（输入管道、退出代码、等待进程停止、修改其环境等）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T14:55:14.953

当然。您可以从使用[system](http://hackage.haskell.org/packages/archive/process/1.0.1.3/doc/html/System-Cmd.html)调用外部进程开始。

[System.Process](http://hackage.haskell.org/packages/archive/process/1.0.1.3/doc/html/System-Process.html)库以跨平台方式提供更复杂的管道和过程控制。

最后，您可以考虑[通过 shell DSL](http://hackage.haskell.org/packages/archive/shellish/0.1.4/doc/html/Shellish.html)将您的 shell 脚本移植到 Haskell 。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-30T23:03:16.560

[Turtle](http://hackage.haskell.org/package/turtle/docs/Turtle-Tutorial.html)是非常好的现代 haskell 库。

# ruby-on-rails - 删除每个关系

> ID：10536615
> 
> 赞同：2
> 
> 时间：2012-05-10T14:50:54.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个模型：`Event`和`Link`.

*   事件`has_many :links`
*   关联`belongs_to :event`

我想在`events_controller.rb#destroy`调用该操作时删除所有相关链接。

这是销毁动作：

```
def destroy
  @event = Event.find(params[:id])
  @event.destroy

  links = @event.links

  for link in links do
    link.destroy
  end

  respond_to do |format|
    format.html { redirect_to :back }
    format.json { head :no_content }
  end
end 
```

但这似乎不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:52:34.063

停在那里，你不必重新发明这个轮子。Rails 会为您做到这一点。

在您的模型中，只需指定

```
class Event
  has_many :links, :dependent => :destroy
end 
```

而当你删除一个 时`Event`，它的所有链接都会被自动销毁。

[从关于从关联](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Deleting+from+associations)中删除的 Rails 指南：

> 相关联
> 
> has_many、has_one 和 belongs_to 关联支持 :dependent 选项。这允许您指定在删除所有者时应删除关联的记录。

# jquery - 在 jQuery 函数中传递参数失败 .fadeOut()

> ID：10536617
> 
> 赞同：0
> 
> 时间：2012-05-10T14:50:56.387
> 
> 标签：jquery

我试图将参数传递给 myFunction，但它似乎会导致问题，因为它位于 jQuery 函数中。有小费吗？

```
//this works fine
myFunction(1);

//this doesn't work fine!
$('myObj').fadeOut(1000, myFunction(1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:55:05.747

可能有点过分，但是您是否尝试在回调中调用该函数？

```
$('myObj').fadeOut(1000, function() {
    myFunction(1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:57:06.600

来自[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

> 如果您想向回调函数发送参数，您可以定义一个新的匿名函数来调用您的参数化函数。例如：
> 
> var pageUrl = generateNextPageUrl(); $(“#content”).fadeOut(1000, function () { refreshContent(pageUrl) });
> 
> 如果没有匿名函数定义，我假设的回调会立即被调用（原文如此），而无需等待完成淡出效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:58:13.387

你需要传递函数的引用

```
$('myObj').fadeOut(1000, myFunction); 
```

但是回调函数没有发送任何参数，所以你需要在其他地方设置你的参数。例如：

```
var time = 1;
function myFunction(){
    time += 1 // do anything you want with the parameter
} 
```

# asp.net - jcarousel 和谷歌索引

> ID：10536621
> 
> 赞同：0
> 
> 时间：2012-05-10T14:51:08.430
> 
> 标签：asp.net, jcarousel, google-index

我正在使用 jcarousel 在我的网站上显示项目幻灯片。

仅供参考，我正在传递 JSON 字符串以将项目添加到 jcarousel。但是因为 jcarousel 是使用 javascript 创建并在运行时显示的 -
内容没有被 Google 索引。

为了将内容编入索引，我正在考虑删除 jcarousel 并正常添加内容。
然后使用 jQuery/javascript 滚动项目。

还有其他更好的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:55:24.370

您的解决方案似乎确实是最相关的，即使它增加了页面的加载时间。

可以参考谷歌官方文档：[Making AJAX Applications Crawlable](https://developers.google.com/webmasters/ajax-crawling/)

# php - 单击任何一个链接时要禁用的一组链接

> ID：10536622
> 
> 赞同：0
> 
> 时间：2012-05-10T14:51:09.850
> 
> 标签：php, javascript, html, hyperlink

`<div>`我在 php 页面的标签内有 5 个（比如说）链接。当访问者点击任何一个链接时，所有 5 个链接都必须被禁用。如何使这成为可能？我有一些想法可以禁用用户单击的链接

```
<a href="someaction" onClick='this.disabled=true;'>LINK 1</a>
<a href="someaction" onClick='this.disabled=true;'>LINK 2</a>
<a href="someaction" onClick='this.disabled=true;'>LINK 3</a>
<a href="someaction" onClick='this.disabled=true;'>LINK 4</a>
<a href="someaction" onClick='this.disabled=true;'>LINK 5</a> 
```

因此，如果我单击 LINK 1，则只会禁用 LINK 1。我需要禁用所有 5 个链接（只有这五个而不是页面中的其他链接）。

建议我简单和最好的方法:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:52:51.987

`<a>`标签不支持`disabled`属性，只有`input`, `textarea`,支持`button`。

如果你想让链接不可点击，你可以为空`href`属性：

```
<a href="someaction" onClick='this.href="";'>LINK 5</a> 
```

或者您可以模拟`disabled`属性：

```
<a href="someaction" onClick='if(this.disabled){ return false; } else { this.disabled = true; }'>LINK 5</a> 
```

它将防止未来的点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:58:39.603

不确定这是否是最好的方法，但可以肯定的是，它会完成这项工作。

```
function removeLink(id){
    document.getElementById(id).innerHTML = 'LINK 1<br />LINK 2<br />LINK 3<br />LINK 4<br />LINK 5<br />';

}

<span id="removeLinkId">
    <a href="someaction" onClick="removeLinks('removeLinkId');">LINK 1</a>
    <a href="someaction" onClick="removeLinks('removeLinkId');">LINK 2</a>
    <a href="someaction" onClick="removeLinks('removeLinkId');">LINK 3</a>
    <a href="someaction" onClick="removeLinks('removeLinkId');">LINK 4</a>
    <a href="someaction" onClick="removeLinks('removeLinkId');">LINK 5</a>
</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:00:39.540

HTML：

```
<a href="www.google.se" id="foo">LINK 1</a> 
```

Javascript：

```
//Get the element you need.
var a = getElementById("foo");

//Remember to use the REFERENCE, not actually CALLING the callback.
a.onclick = callback;

function callback() {
    //a.setAttribute("style", "display:none;");
    a.removeAttribute("href");
    return false; //Stop the event (don't navigate
} 
```

Javascript JQUERY：

```
//Get the element and bind it in one "line".
var a = $("a#foo);
a.bind(
    "click",
    function() {

        a.hide();
        a.removeAttr("href");

        //Stop the event from bubbling
        return false; 
    }); 
```

# sql - Oracle SQL 将日期格式从 DD-Mon-YY 转换为 YYYYMM

> ID：10536626
> 
> 赞同：5
> 
> 时间：2012-05-10T14:51:26.293
> 
> 标签：sql, oracle, date-format, to-date

我要比较 2 个表中的日期，但问题是一个表的日期为 DD-Mon-YY 格式，另一个表的日期为 YYYYMM 格式。

我需要将它们都设为 YYYYMM 以进行比较。

我需要创建这样的东西：

```
SELECT * FROM offers 
WHERE offer_date = (SELECT to_date(create_date, 'YYYYMM') FROM customers where id = '12345678') 
AND offer_rate > 0 
```

其中 create_date 类似于 2006 年 3 月 12 日，而 offer_date 类似于 200605

我需要在哪里调整此查询的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:11:57.780

作为`offer_date`一个数字，并且其准确性低于您的真实日期，这可能会起作用...
- 将您的真实日期转换为格式字符串`YYYYMM`
- 将该值转换为 INT
- 比较您的结果`offer_date`

```
SELECT
  *
FROM
  offers
WHERE
    offer_date = (SELECT CAST(to_char(create_date, 'YYYYMM') AS INT) FROM customers where id = '12345678')
AND offer_rate > 0 
```

此外，通过对 进行所有操作，`create_date`您只需对一个值进行处理。

此外，如果您操纵了`offer_date`您将无法在该字段上使用任何索引，因此强制扫描而不是搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:54:58.933

我错过了什么吗？您可以在比较中转换 offer_date ：

```
SELECT *
FROM offers
WHERE to_char(offer_date, 'YYYYMM') = (SELECT to_date(create_date, 'YYYYMM') FROM customers where id = '12345678') AND
      offer_rate > 0 
```

# xml - 使用带有 XML::LibXSLT 的 XSLT 模板渲染 XML::XPath::NodeSet

> ID：10536627
> 
> 赞同：0
> 
> 时间：2012-05-10T14:51:27.640
> 
> 标签：xml, perl, xslt, xpath

我需要渲染通过找到的节点集[`XML::XPath`](https://metacpan.org/module/XML%3a%3aXPath)

```
my $source = XML::LibXML->load_xml(location => 'xml/animals.xml');
my $nodeset = $source->find('//area[@id="01"]'); 
```

使用 XSLT 模板[`XML::LibXSLT`](https://metacpan.org/module/XML%3a%3aLibXSLT)：

```
my $xslt = XML::LibXSLT->new();
my $style_doc = XML::LibXML->load_xml(location=>'xml/animal_template.xsl', no_cdata=>1);
my $stylesheet = $xslt->parse_stylesheet($style_doc); 
```

但我不能简单地将节点集提供给`$stylesheet->transform()`：

```
my $results = $stylesheet->transform($nodeset); 
```

因为 transform 需要一个[`XML::LibXML::Document`](https://metacpan.org/module/XML%3a%3aLibXML%3a%3aDocument)对象，而不是 `XML::XPath::NodeSet`.

我应该怎么办？有没有办法`XML::LibXML::Document`从 a创建一个`XML::XPath::NodeSet`？

或者也许给 XSLT 模板一个变量，这样我就不必使用 XPath 查找节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:19:25.920

没有将对象转换为`XML::XPath::NodeSet`对象的直接方法`XML::LibXML::Document`。此外，通常不可能，因为 Nodeset 可以包含任意数量的 XML 元素，而 XML 文档必须只有一个根元素。

但是 XPath 是 XSLT 的一个组成部分，因此您没有理由不重写转换，以便它`//area[@id="01"]`自己进行选择，然后将整个文档提供给它，由 XML::LibXML 解析。这是我会选择的方法。

如果您有理由`<area id="01">`单独选择元素，则可以通过将 Nodeset 中的每个元素转换为字符串并将它们捆绑为虚拟`<root>`XML 元素来构建新的 XML 文档，但这远非理想的解决方案。

如果您对实施解决方案有疑问，请再次询问。

# ruby-on-rails - 如何通过 url 参数动态设置 Datatables 搜索和列过滤器状态？

> ID：10536628
> 
> 赞同：2
> 
> 时间：2012-05-10T14:51:34.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datatables

假设我有两个模型：**customers**和**orders**。每个订单都属于一个客户。

我还设置了一个带有显示所有订单的数据表的订单（索引）视图。如果我想查看给定客户的所有订单，我所要做的就是过滤该客户的结果，在“搜索”字段中写入相关客户名称或从其列过滤字段中选择该客户。

现在我想实现一个客户订单链接，它会自动显示带有这些设置的订单数据表。

换句话说，我希望 /orders?isearch='customer_name+customer_surname' 的链接将显示已在搜索字段中写入客户全名的数据表（或相应设置的客户列过滤器）。

当然我可以从控制器中获取**@customer**实例变量并将其传递给视图，但是*呢*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:32:49.020

在初始化代码中使用**oSearch**变量，我可以为搜索字段定义一个初始化值，即 isearch 变量：

```
$(document).ready( function() {

  var isearch = $('#isearch').val()   

  $('#example').dataTable( {
    "oSearch": {"sSearch": isearch}
  } );
} ) 
```

isearch 值存储在视图中适当的隐藏字段中：

```
 <%= hidden_field_tag "isearch", @isearch.to_s, { :id => "isearch" } %> 
```

（**这是迄今为止我发现的将实例变量传递给 Rails 中的 .js 文件的最佳方法**）。

最后但同样重要的是，@isearch 实例变量是从 order_controller 设置的：

```
@isearch = params[:isearch] 
```

当然，它的值应该像这样传递给 url：

```
.../orders?isearch='customer_name+customer_surname' 
```

**- - 附录 - -**

我发现我不需要实例变量，实际上我可以使用这个 javascript 函数传递任意数量的 url 参数：

```
function getUrlParam( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1].replace("+", " "); 
```

}

然后我可以像这样从我的 .js 文件中获取它们：

```
// fetches url params
var isearch = getUrlParam('isearch');
var customer_name = getUrlParam('customer_name');
var order_status = getUrlParam('order_status'); 
```

根据这些值，我不仅可以设置 oSearch 变量，还可以使用 Datatables **aoSearchCols**初始化参数（[http://www.datatables.net/ref#aoSearchCols](http://www.datatables.net/ref#aoSearchCols)）设置特定列

最后一个要解决的问题，鉴于我正在使用带有选择元素的单个列过滤（http://www.datatables.net/release-datatables/examples/api/multi_filter_select.html），因此根据 URL 设置每个选择元素-通过的参数。我用这个 jQuery 指令做到了：

```
// sets all select filters according to url passed params
$('select').val([customer_name, preparation_kind, preparation_status]); 
```

从性能的角度来看，这个解决方案是可以改进的，但是它很简单而且很有效。

# c# - 如何将 XML 读入数据集中

> ID：10536637
> 
> 赞同：2
> 
> 时间：2012-05-10T14:52:02.377
> 
> 标签：c#, xml, datagrid

我有一个类，它转到一个 URL 并使用 xmlDoc.Load(URL) 获取一个 xml 文档。为了测试该类，我添加了一个 Web 项目以在网格视图中显示 xml。

在一个按钮单击中，我创建了一个 xml 文档的实例并将其填充为：

xmlDoc = myClassName()

我被困在如何将 xmlDoc 转换为数据源可用的格式

我完全不知道如何让 xml 在网格中显示为 dataset.ReadXml 似乎需要一个文件路径。我不明白其他重载。我想我必须将 xml 读入字符串或其他内容，但我不明白如何做到这一点 - 即使在这里阅读了许多帖子和 MSDN - 谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:55:23.093

例子：

```
string xml =@"<xml><customer><id>1</id></customer></xml>";

DataSet ds = new DataSet();
ds.ReadXml(XmlReader.Create(new StringReader(xml))); 
```

现在将数据源设置为您的网格：

```
grid.DataSource=newDataSet.Tables[0]; 
```

**更新：**

```
DataSet ds = new DataSet();
//xmlDocument is your XmlDocument instance
ds.ReadXml(XmlReader.Create(new StringReader(xmlDocument.InnerXml)));

grid.DataSource=newDataSet.Tables[0]; 
```

# asp.net - 找不到资源错误 - 在我的本地机器上运行，而不是 IIS

> ID：10536639
> 
> 赞同：2
> 
> 时间：2012-05-10T14:52:03.733
> 
> 标签：asp.net, visual-studio-2010

每次我尝试启动我的项目时，我都会不断收到此错误消息。

无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的网址：/

我尝试将网页设置为我的起始页，并尝试将身份验证模式更改为

```
<identity impersonate="true"/>

<authorization>
    <allow users="*"/>
</authorization> 
```

但我有点不同

“/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/Views/Shared/default.aspx

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.225

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:33:27.243

我要做的第一件事是尝试再次构建应用程序，看看你是否得到任何错误。如果您没有收到任何错误，您可以尝试的另一件事是移动应用程序的运行位置，因为 IIRC 视觉工作室在从共享目录工作时可能会有点奇怪（我从名称猜测它位于网络位置如果不是他们忽略最后一个建议）

我唯一能想到的另一件事是您的网络配置文件可能以某种方式搞砸了。如果 Visual Studios 生成的标准 web 配置文件没有重大变化，那么我说创建一个新的 asp 项目并将新创建的 web 配置复制到当前项目

希望这可以帮助

# xtext - 忍者在 xText 中构建

> ID：10536640
> 
> 赞同：2
> 
> 时间：2012-05-10T14:52:03.640
> 
> 标签：xtext

我正在尝试使用 xtext为[ninja build定义语法。](http://martine.github.com/ninja/)

我无法回答三个棘手的问题。

*   按制表符缩进：

如何处理缩进。ninja 构建文件中的*规则*可能有几个变量定义，前面带有制表符间距（类似于 make 文件）。当语言有 SL 注释、忽略空格并通过制表符（python、make、...）进行缩进时，这会成为一个问题

```
cflags = -g
rule cc
  command = gcc $cflags -c $in -o $out 
```

*   交叉引用保留的变量名集：

存在一组保留变量。自动完成应该能够引用保留的和用户定义的变量集。

```
command = gcc $cflags -c $in -o $out 
```

*   自动完成未与 WS 分隔的交叉引用变量名称

org.eclipse.xtext.common.Terminals 隐藏 WS 令牌。ID 令牌由空格分隔。但在 ninja 脚本（类似于 make 文件）中，解析应该使用最长匹配的变量名来完成。

```
some_var = some_value
command  = $some_var.h 
```

任何想法表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T11:03:39.687

查看 Xtext 2.8.0 版本：[https ://www.eclipse.org/Xtext/releasenotes.html](https://www.eclipse.org/Xtext/releasenotes.html)

该`Whitespace-Aware Languages`部分指出：

> Xtext 2.8 支持使用空格来指定结构的语言，例如在Python 中使用缩进来分隔代码块。这是通过语法中定义的合成标记完成的：
> 
> ```
> terminal BEGIN: 'synthetic:BEGIN';
> terminal END: 'synthetic:END'; 
> ```
> 
> 这些标记可以像语法规则中的其他终端一样使用：
> 
> ```
> WhitespaceAwareBlock:
>     BEGIN
>         ...
>     END; 
> ```
> 
> Eclipse 示例（文件 → 新建 → 示例 → Xtext 示例）中提供的新示例语言 Home Automation 演示了这个概念。它允许如下代码：
> 
> ```
> Rule 'Report error' when Heater.error then
>     var String report
>     do
>         Thread.sleep(500)
>         report = HeaterDiagnostic.readError
>     while (report == null)
>     println(report) 
> ```
> 
> 更多详细信息可在文档中找到。

# objective-c - 覆盖方法的 Objective-C 约定

> ID：10536643
> 
> 赞同：8
> 
> 时间：2012-05-10T14:52:13.313
> 
> 标签：objective-c, oop, overriding

在 Java 中，当您覆盖一个方法时，建议（几乎是被迫）添加`@Override`注解。在 Objective-C 世界中是否有标记（在注释中或通过其他机制）覆盖方法的约定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:56:21.843

不。Objective-C 中的所有方法都是通过 Objective-C 的消息传递发送的，因此所有方法都可以被覆盖。这是语言的一部分。

也没有标记这个的约定。这是它发生的语言的一部分，如果你要评论否则它只会在你以后偶然或有意地这样做时感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T09:45:42.093

我不确定 Xcode 是否这样做，但来自 Jetbrains 的 AppCode IDE 会自动使用边距中的小蓝色***覆盖徽章***注释被覆盖的方法，如下所示：

![应用程序代码覆盖](../Images/481fe818375ac37669cb7e95840ba468.png)

. . 除此之外（也显示了），我还喜欢创建一些实时模板（在 Xcode 中也称为代码片段），以使用 #pragma 标记来注释被覆盖的方法。我发现它有助于按以下顺序定义标准结构：

*   类方法
*   初始化和销毁
*   公共方法/协议方法
*   被覆盖的方法
*   私有方法

通过使用实时模板/代码片段，我只需键入“覆盖 [tab]”，IDE 就会为我创建 #pragma 标记。

. . 也许您甚至可以使用 OCLint 来检查该结构是否得到遵守。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:54:16.587

不，不是。

这似乎并不重要，可能是因为动态调度。

# vbscript - 将变量从 vbscript 传递到批处理文件

> ID：10536646
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:16.947
> 
> 标签：vbscript, batch-file

假设我有一个批处理文件，其中我调用了一个 VBScript（它返回 ERRORLEVEL），例如：

```
 @echo off
    echo Passing the control to VBSCript.
    Cscript test.vbs
    if %ERRORLEVEL% EQU 0 (
    echo done here!!!!
    EXIT /B 0
    )
    if %ERRORLEVEL% EQU 1
    echo EROOR!!!!!!!
    EXIT /B 1
    ) 
```

test.vbs 就像：

```
 Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
    strComputer = "."
    strKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
    strEntry1a = "DisplayName"
    strEntry1b = "QuietDisplayName"
    strEntry1c = "DisplayVersion"
    .......................................
    ..........some code here...............
    .......................................
    IF i=0 THEN
    WScript.Echo "Congratulations!! Everything is fine......
    WScript.Quit 0
    ELSE
    WScript.Echo "Sorry Mate.. Things out here look bad....
    WScript.Quit 1
    END IF 
```

我的问题是，在执行此批处理文件时........我无法在我的批处理脚本中捕获我的 VBScript 生成的 %ERRORLEVEL%（PS：单独运行时 test.vbs 执行良好）。此外，我得到一个奇怪的输出：

```
 Passing the control to VBSCript.
    Microsoft (R) Windows Script Host Version 5.7
    Copyright (C) Microsoft Corporation. All rights reserved.

    ............................
    ............................
    ......VB Code Running........
    ..........here.............

    0 was unexpected at this time. 
```

为什么我会得到“此时 0 出乎意料”。批处理文件中的错误。我还能如何将错误代码从 vbscript 传递到其父批处理脚本？

欢迎任何帮助.......在此先感谢。

* * *

## 新编辑，

感谢 PA 的回复。实际上我现在正在设置一个不同的变量，即 ERRORLEV，如下所示：

```
 IF ERRORLEVEL 0 SET /a ERRORLEV=0
      IF ERRORLEVEL 1 SET /a ERRORLEV=1
      IF ERRORLEVEL 2 SET /a ERRORLEV=2
      echo the value of ERRORLEV is :
      echo %ERRORLEV%
      if %ERRORLEV% EQU 0 (
      echo Nothing is to be Done
      EXIT /B 0
      )
      IF %ERRORLEV% EQU 2 (
      echo Let start then.......
      EXIT /B 1
      ) 
```

现在最好的部分是变量 ERRORLEV 被正确设置/回显。但是我无法在“IF”命令中使用它。我得到的输出是：

```
 the value of ERRORLEV is :
      2
      0 was unexpected at this time. 
```

你能建议一下，可能是什么情况？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:00:17.537

如中所述`HELP IF`

*ERRORLEVEL number - 如果最后一个程序运行返回的退出代码**等于或大于**指定的数字，则指定一个真条件。*

所以你需要用这个特殊的语法来测试 ERRORLEVEL。

```
IF ERRORLEVEL 2 DOTHIS &goto :eof
IF ERRORLEVEL 1 DOTHAT &goto :eof
DOGOOD 
```

# jquery - 为什么我收到 Rails 3.2 jQuery Coffeescript 语法错误

> ID：10536647
> 
> 赞同：1
> 
> 时间：2012-05-10T14:52:18.663
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

我有一个名为“组织”的控制器，带有视图。

我正在尝试将我的一个视图中的一个表制作成一个 jQuery 数据表。在使用 Coffeescript 之前，我已经这样做了一千次了。

我在开发模式下运行，所以我不需要预编译我的资产。

我的 application.js 看起来像这样：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我的 organizations.js.coffee 看起来像这样：

```
jQuery ->
  $.("#organizations").dataTable() 
```

我在打开的括号上遇到语法错误。我的问题是什么？这应该是一个简单的任务。

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:55:20.253

我不确定你想在这里实现什么，但不应该`$.("#organizations")`是`$("#organizations")`？（不带点）

# android - 在安卓应用上撤消谷歌账户访问确认

> ID：10536650
> 
> 赞同：2
> 
> 时间：2012-05-10T14:52:23.623
> 
> 标签：android, accountmanager

我正在使用[从 Android 应用程序对 App Engine 进行身份验证中](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)所述的代码，以在我的 GAE 应用程序上启用 Google 帐户身份验证。问题是，一旦我允许我的 android 应用程序访问一个帐户，我就无法使用同一个帐户再次重复该过程（用于测试）。我试过了：

*   无效验证令牌（）
*   清除数据（设置 => 应用程序 => 管理应用程序）
*   卸载该应用程序

但是该应用程序仍然可以访问该帐户。下面是我用来显示用户确认意图的代码片段：

```
private class GetAuthTokenCallback implements AccountManagerCallback<Bundle> {
    public void run(AccountManagerFuture<Bundle> result) {
        Bundle bundle;
        try {
            bundle = result.getResult();
            Intent intent = (Intent)bundle.get(AccountManager.KEY_INTENT);
            if(intent != null) {
                // User input required
                startActivity(intent);
            } else {
                onGetAuthToken(bundle);
            }
        } catch (OperationCanceledException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (AuthenticatorException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}; 
```

有没有人遇到过这个？知道如何在下一次运行时强制确认吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:50:55.503

这些权限保存在系统数据库中。卸载后应将您的应用程序删除，但清除应用程序数据没有任何效果。如果它不起作用，可能是一个错误。在不同的设备和/或模拟器上尝试。可能可行的极端措施是恢复出厂设置:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T11:14:14.420

我找到了一种更清洁的解决方案。我认为要快一点。您只需要执行 2 个步骤（下面的 1 和 2；显示了详细步骤）：

0）我不认为这个额外的步骤是必要的（没有尝试过），但我还是添加了它。只需从您的应用程序中断开连接`PlusClient`即可。

```
mPlusClient.clearDefaultAccount();
mPlusClient.disconnect(); 
```

1) 从您设备上`Google Play services`的所有应用程序屏幕（或已下载的屏幕）中清除应用程序中的数据。`Settings`

2)从您在网络上的 Google 帐户部分的`Connected applications and sites`屏幕中撤消您的应用程序的权限。`Privacy`

3）好吧，再次连接。它现在应该可以工作了。需要时重复步骤。

**注意：**步骤 1 和 2 至关重要。如果您只执行第 1 步，它将照常登录您的应用程序，还会显示 Toast 语句`Welcome back to <app_name>. You're signed in as <account_name>`

# javascript - 'after' 方法不适用于尚未在 DOM 中的元素

> ID：10536652
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:27.370
> 
> 标签：javascript, jquery

我想将两个 HTML 元素一个接一个地添加到一个 Dom 元素中。但是这个调用不适用于 jQuery

```
$("<button>click me</button>").after("<span> or be happy </span>")
                              .appendTo("#someId"); 
```

我不能将两个元素组合在一个字符串中的原因是我想在第一个字符串中添加一个事件处理程序。所以我真正想做的是：

```
$("<button>click me</button>").after("<span> or be happy </span>")
                              .on("click", function() {
                                  // do something
                              }); 
```

现在，我的解决方法是为按钮分配一个 id 并在单独的 jQuery 调用中添加“span”。像这样...

```
$('<button id="uid">click me</button>').on("click", function() {
                                            // do something
                                           });
$('#uid').after('<span> or be happy</span>'); 
```

它有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:48:20.743

只需`.after()`在`.append()`.

[http://jsfiddle.net/Kr9m4/](http://jsfiddle.net/Kr9m4/)

```
$("<button>click me</button>").on("click", function() {
    // do something
})
    .appendTo("#someId")
    .after("<span> or be happy </span>"); 
```

或像这样：

[http://jsfiddle.net/Kr9m4/1/](http://jsfiddle.net/Kr9m4/1/)

```
$("<button>", { text:"click me",
               click: function() {
                  // do something
               }})
    .appendTo("#someId")
    .after("<span> or be happy </span>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:56:13.873

你应该这样做：

```
var _button = $('<button>')
                  .text('click me')
                  .on('click', function () { }),
    _span = $('<span>').text(' or be happy');

// not sure about the order, so just switch these two if ever
$('#foo').after(_button).after(_span); 
```

### 编辑

根据[文档](http://api.jquery.com/after/#disconnected-dom-nodes)，即使节点尚未断开连接，您实际上也可以插入 DOM 节点（并进行操作）。这假设 jQuery 1.4+。

因此，如果您符合该要求，您应该能够在一份声明中完成所有这些：

```
$('<button>').text('click me')
             .on('click', function () {
                 // ...
             })
             .after('<span>')
                 .text(' or be happy')
                 .appendTo('#uid')
                 ; 
```

# asp.net-mvc - 如何重定向回我的搜索结果？

> ID：10536654
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:34.420
> 
> 标签：asp.net-mvc, .net-4.0

我开始研究 MVC4 应用程序。我有一个名为 People 的控制器。索引视图具有搜索功能。当用户输入搜索条件时，搜索结果将显示在名为 SearchIndex 的视图中。此视图是使用默认脚手架搭建的。在 SearchIndex 视图中，每个人都在每行右侧列出，并带有编辑、详细信息和删除链接。当单击其中一个链接时，生成的视图在页面底部有一个链接，标记为“返回列表”。当单击“返回列表”链接时，用户将返回到没有搜索结果的患者控制器的索引视图，迫使用户再次输入搜索条件。

我想修改“返回列表”链接，使其重定向到具有先前搜索结果的 SearchIndex 视图，因此用户无需执行其他搜索。我该怎么做呢？我注意到 SearchIndex 视图在查询字符串中有搜索条件，但我不确定如何传递查询字符串，或者这是否是完成我正在尝试做的事情的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:55:31.753

您应该将输入的搜索条件传递给视图模型，然后当您点击“返回列表”时，您应该将搜索结果传递回该页面，就像您首先传递它们以执行搜索一样。

因此，如果您使用 ActionLinks，您可以执行以下操作：

```
@Html.ActionLink("Back to List", "SearchIndex", "People", new { searchTerm = model.SearchTerm}); 
```

# ruby-on-rails - 如何为数据库中的块创建新行或在 Rails 中为每个块创建新模型？

> ID：10536657
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:44.030
> 
> 标签：ruby-on-rails, database-design, model

我正在使用 Rails 创建一个婴儿鹳派对/婴儿送礼会礼物注册表应用程序，蜜蜂妈妈创建一个注册表，其他朋友可以提名礼物等。

我正在使用 Rails，在学习了几本 Rails 书籍后，我进入了中级阶段。问题是我不知道如何创建一个固定的婴儿注册表，妈妈可以在每个产品类别旁边选择数量、颜色、品牌并保存。

我创建了模型注册表和列的数量、品牌、颜色等。过了一会儿，我认为这将不起作用，因为如何为这些列命名每个类别（行）并使其保持固定（在某种意义上）并几乎分开像表格？几乎感觉我需要为每个类别创建一个单独的模型，但这不是最有效的方法吗？

这真的很难解释，但我被卡住或错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:40:00.030

听起来您正在描述注册表项和特征之间的多对多关系。所以一个项目可以有很多特征（颜色、质量、品牌），一个特征可以有很多项目（所以你可以通过颜色、质量等找到所有项目）。

查看：

[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

```
class Color
  has_and_belongs_to_many :items
end

class Items
  has_and_belongs_to_many :colors
end 
```

将允许您执行以下操作：

```
item = Item.find 1
color = Color.find_by_name 'blue'
item.colors << color

# all the items for a color
color.items    # item 1

# all the colors for an item
item.colors    # blue 
```

构建您的表单以支持这一点需要一些工作，我建议在谷歌上搜索示例。

# mysql - 这是为数据库应用程序提供服务的安全方法吗？

> ID：10536658
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:50.543
> 
> 标签：mysql, vb.net, security, connection-string

WinFormsApp 登录将信息传递给 .php（基于服务器）登录（提供的凭据正确）到 DB 以检索解密密钥。WinFormsApp 然后在硬编码的加密连接字符串上使用解密密钥并使应用程序可用。

这将消除在运行时加密/解密连接字符串的必要性，实际上使任何未经授权的人使用无用的软件。

我的思维过程有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:04:41.633

如果解密密钥以纯文本形式发送回 WinForms 应用程序，那么这在技术上就是一个安全漏洞。但由于只有成功通过身份验证才能获得它，所以它有所缓解。为了提高安全性，您可以在两端使用硬编码的加密密钥对解密密钥进行加密。这并不完全是万无一失的，但有时安全性并不是要 100% 万无一失，它只是将标准提高到足够高。这取决于它需要有多安全。更彻底的安全设计是让服务器端完成所有数据访问，这样客户端就不需要连接字符串，但我确信这需要大量的重新设计。或者，如果它是 SQL Server，您可以使用集成安全性。

# php - 减少（组合）包含对象的数组的最有效方法是什么？

> ID：10536661
> 
> 赞同：0
> 
> 时间：2012-05-10T14:52:55.637
> 
> 标签：php, arrays, performance

`partId`我有一个包含 a和 a的对象数组`quantity`。我希望`partId`最终数组中的每个都是唯一的，方法是将`quantity`具有相同`partId`.

我要这个：

```
Array
(
    [0] => stdClass Object
        (
            [partId] => 232032
            [quantity] => 2
        )

    [1] => stdClass Object
        (
            [partId] => 232032
            [quantity] => 1
        )

    [2] => stdClass Object
        (
            [partId] => 232031
            [quantity] => 1
        )
) 
```

以这样的方式结束：

```
Array
(
    [0] => stdClass Object
        (
            [partId] => 232032
            [quantity] => 3
        )

    [1] => stdClass Object
        (
            [partId] => 232031
            [quantity] => 1
        )
) 
```

* * *

这就是我现在正在做的事情，我觉得必须有更好的方法。

```
$tmp = array();
foreach ($array1 as $item) {
    if (array_key_exists($item->partId, $tmp)) {
        $tmp[$item->partId]->quantity += $item->quantity;
    } else {
        $tmp[$item->partId] = $item;
    }
}
$array2 = array_merge($tmp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:02:42.607

你快到了：

```
$tmp = array();
foreach ($array1 as $key => $item) {
    if (array_key_exists($item->partId, $tmp)) {
        $array1[$tmp[$item->partId]]->quantity += $item->quantity;
        unset($array1[$key]);
    } else {
        $tmp[$item->partId] = $key;
    }
}

print_r($array1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:14:11.090

显然`isset()`比 稍快`array_key_exists`，所以你可以这样做

```
if ( isset($tmp[$item->partId]) || array_key_exists($item->partId, $tmp) )
{
    ...
} 
```

这会给你一个小小的推动。

我确实喜欢你的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:02:16.053

可能使用关联数组作为临时数据结构，以 partId 作为键，然后遍历原始元素，如果键的值为 null，则将对象插入到临时关联数组中，否则将现有对象从原始数组中的对象。

# php - 寻找简单的PHP多路加密方法

> ID：10536664
> 
> 赞同：2
> 
> 时间：2012-05-10T14:53:01.353
> 
> 标签：php, key, encryption

我需要借助秘密静态密钥来解密加密的 POST 值字符串。

我看过 crypt() （但它只是单向的）和 Mcrypt，GnuPG，......但我对它们不满意。我认为它们对于我的简单问题来说太复杂了。我应该使用什么？我不需要 IV 形状或超级安全的算法。是否有任何我不知道的基本 PHP 函数？

我只需要像这样对用户隐藏图像路径： ImageJPEG(ImageCreateFromJPEG( decode($_REQUEST['encryptedImage'],'secret Key') ));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:59:38.597

## 更新（27/09/17）：

由于[mcrypt_encrypt自](http://php.net/manual/en/function.mcrypt-encrypt.php)**PHP 7.1.0**起已弃用。[我已经使用openssl](http://php.net/manual/en/ref.openssl.php)添加了一个简单的加密/解密。

```
function encrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
    // hash
    $key = hash('sha256', $key);
    // create iv - encrypt method AES-256-CBC expects 16 bytes
    $iv = substr(hash('sha256', $secret), 0, 16);
    // encrypt
    $output = openssl_encrypt($string, $method, $key, 0, $iv);
    // encode
    return base64_encode($output);
}

function decrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
    // hash
    $key = hash('sha256', $key);
    // create iv - encrypt method AES-256-CBC expects 16 bytes
    $iv = substr(hash('sha256', $secret), 0, 16);
    // decode
    $string = base64_decode($string);
    // decrypt
    return openssl_decrypt($string, $method, $key, 0, $iv);
}

$str = 'Encrypt this text';
echo "Plain: " .$str. "\n";

// encrypt
$encrypted_str = encrypt($str);
echo "Encrypted: " .$encrypted_str. "\n";

// decrypt
$decrypted_str = decrypt($encrypted_str);
echo "Decrypted: " .$decrypted_str. "\n"; 
```

**原答案：**

再简单不过了：**（PHP < 7.1.0）：**

```
<?php 
define('SECRET',md5('Some secret key'));

function encrypt($value){
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    return mcrypt_encrypt(MCRYPT_RIJNDAEL_256, SECRET, $value, MCRYPT_MODE_ECB, $iv);
}

function decrypt($value){
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, SECRET, $value, MCRYPT_MODE_ECB, $iv));
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:58:15.587

您可以将内置函数包装起来，使它们更友好。[就像mcrypt_cbc](http://www.php.net/manual/en/function.mcrypt-cbc.php)文档页面上的第二个用户帖子一样：

```
<?php
$stuff="String to enc/enc/dec/dec =,=,";
$key="XiTo74dOO09N48YeUmuvbL0E";

function nl() {
    echo "<br/> \n";
}
$iv = mcrypt_create_iv (mcrypt_get_block_size (MCRYPT_TripleDES, MCRYPT_MODE_CBC), MCRYPT_DEV_RANDOM);

// Encrypting
function encrypt($string, $key) {
    $enc = "";
    global $iv;
    $enc=mcrypt_cbc (MCRYPT_TripleDES, $key, $string, MCRYPT_ENCRYPT, $iv);

  return base64_encode($enc);
}

// Decrypting
function decrypt($string, $key) {
    $dec = "";
    $string = trim(base64_decode($string));
    global $iv;
    $dec = mcrypt_cbc (MCRYPT_TripleDES, $key, $string, MCRYPT_DECRYPT, $iv);
  return $dec;
}

$encrypted = encrypt($stuff, $key);
$decrypted = decrypt($encrypted, $key);

echo "Encrypted is ".$encrypted . nl();
echo "Decrypted is ".$decrypted . nl();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:07:11.837

这是我所知道的唯一基本的内置功能。

```
$string = "/path/img.jpg";

$scramble = str_rot13($string);

echo "<p>Scrambled: ".$scramble;

echo "<p>Unscrambled: ".str_rot13($scramble); 
```

# javascript - 使用 Dojo 的 dijit DropDownButton 时如何更改工具提示的位置？

> ID：10536667
> 
> 赞同：1
> 
> 时间：2012-05-10T14:53:18.077
> 
> 标签：javascript, dojo

当前标记如下所示：

```
<div data-dojo-type="dijit.form.DropDownButton" data-dojo-props="dropDownPosition: 'above'">
    <span>413</span>
    <div data-dojo-type="dijit.TooltipDialog">
      <button data-dojo-type="dijit.form.Button">413</button>
      <button data-dojo-type="dijit.form.Button">617</button>
      <button data-dojo-type="dijit.form.Button">860</button>
      <button data-dojo-type="dijit.form.Button">203</button>
    </div>
</div> 
```

`data-dojo-props`在我添加属性之前一切正常。使用该属性，小部件根本不会呈现对话框。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:25:47.753

您引用的文档表明它`dropDownPosition`需要一个数组，而不是单个字符串。改为“ `data-dojo-props="dropDownPosition: 'above'"`_`data-dojo-props="dropDownPosition: ['above']`

例如 [http://jsfiddle.net/RoystonS/E4RHv/](http://jsfiddle.net/RoystonS/E4RHv/)

# jquery - 无法使用 jQuery 更新复选框的选中状态

> ID：10536669
> 
> 赞同：1
> 
> 时间：2012-05-10T14:53:19.380
> 
> 标签：jquery, forms

单击添加按钮时，我正在使用最后一行的克隆添加新行，但如果它已经在最后一行中选中，则希望取消选中复选框。

请检查整个代码：http: [//jsfiddle.net/MMDZX/](http://jsfiddle.net/MMDZX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:58:49.550

将虚线更改为：

```
jQuery("#dataTable tr:last").find("input[type='checkbox']").attr("checked", false); 
```

两个问题：

*   您正在搜索错误类型的输入元素（`type=text`而不是`type=checkbox`）。
*   您使用的是字符串而不是布尔值来设置属性，如果您将其设置为选中状态会很好，因为字符串是真实的。

此外，`.children().children()`是不必要的。`.find()` （或[祖先-后代](http://api.jquery.com/descendant-selector/)）在这种情况下更漂亮。

[**演示。**](http://jsfiddle.net/karim79/MMDZX/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:59:28.333

在此处查看工作代码：http: [//jsfiddle.net/3rLqV/](http://jsfiddle.net/3rLqV/)

将删除检查状态行更改为：

```
jQuery("#dataTable tr:last input[type='checkbox']").removeAttr("checked"); 
```

您的两个主要问题是您正在寻找`type='text'`，而不是复选框，并且您不能设置`checked`为 false。它存在或不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:26:19.597

To remove checked status of checkbox when you clone last row.

You can add following line,

jqasdasuery.find("input[type='checkbox']").attr('checked',false);

After

var jqasdasuery = jQuery("#dataTable tr:last").clone();

in "#addRow" click function.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:14:45.657

```
 $(document).ready(function () {
            $("#addRow").on('click', function () {
                var jqasdasuery = $("#dataTable tr:last").clone();

                $("#dataTable tbody").append(jqasdasuery);
                $("#dataTable tr:last").find(':checkbox').attr('checked', false);
                $("#dataTable tr:last").find('select option:first').attr('selected', true); 
                setAttributes();
            });

            $("#deleteRow").on('click', function () {
                if ($("#dataTable tr").length === $("#dataTable input:checked").length) {
                    alert("You cant delete all the rows")
                } else {
                    $("#dataTable").find(':checked').each(function () {
                        $(this).parents('tr').remove();
                    });
                }

                setAttributes();
            });
        });

        function setAttributes() {
            $("#dataTable tr").each(function (i) {
                $(this).find(":checkbox").attr("name", "chk" + i);
                $(this).find(":text").attr("name", "txt" + i);
                $(this).find("select").attr("name", "country" + i);
            });

            //$("#dataTable tr:last").find("input[type='text']").attr("checked", "false");
        }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:59:42.870

尝试这个

```
 // to add new row
        jQuery("#addRow").click(function () {
            var jqasdasuery = jQuery("#dataTable tr:last").clone();
            jqasdasuery.find('input[type=checkbox]').attr("checked", false);
            jQuery("#dataTable").append(jqasdasuery);
            setAttributes();
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T14:59:58.227

添加

`$(':checkbox',jqasdasuery).attr('checked', false);`

克隆之后。

# java - JVM 1.6 版将创建多少个字符串对象

> ID：10536670
> 
> 赞同：5
> 
> 时间：2012-05-10T14:53:19.597
> 
> 标签：java

> **可能重复：**
> [关于 Java 字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)

最近我读了一篇java文章，发现下面的说法“改进了java 6以后的字符串池技术”。他们提到的一个例子如下

```
String one = "one";
String two = new String("one"); 
```

上述示例创建的对象数 = 1

在这里我有点困惑，即使我们使用`new`关键字 how come 它也不会创建新对象并使用在字符串池中创建的对象。

请澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:59:32.950

我认为做一个 == 两个应该有助于确定创建了多少对象。

# objective-c - 以编程方式在导航控制器中添加按钮以支持 5.0 之前的版本

> ID：10536681
> 
> 赞同：2
> 
> 时间：2012-05-10T14:54:08.120
> 
> 标签：objective-c, ios, xcode, ios5, ios4

在我的项目中使用以下代码行，我能够以编程方式将按钮添加到 UINavigationViewController：

```
modalView.navigationItem.rightBarButtonItems = buttons; 
```

这在 5.0 之后的应用程序构建中效果很好，但我也想支持 4.3。rightBarButtonItems 仅在 5.0 之后支持。

我搜索了文档，但找不到 4.3 可以以编程方式支持的等效功能。

欢迎提出有关此功能的建议或资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:00:23.683

最接近的等价物是`rightBarButtonItem`. 要将多个按钮分配给`rightBarButtonItem`，您有两种选择：

1.  使用分段控件（我相信这是 Apple 在 Mail.app 中使用的，用于箭头按钮从消息跳转到消息）并将分段控件包装在`UIBarButtonItem`with 中`initWithCustomView:`。

2.  创建多个按钮，将它们包装在一个透明的容器视图中，并使用此容器视图创建一个`UIBarButtonItem`（再次使用`initWithCustomView:`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:58:14.483

`rightBarButtonItem`您可以使用自 2.0 起可用的单个按钮添加。如果您想在一侧有多个按钮，我认为您将不得不使用自定义视图和一些“黑客”。

# proxy - 推荐具有反向代理功能的代理服务器

> ID：10536684
> 
> 赞同：1
> 
> 时间：2012-05-10T14:54:21.937
> 
> 标签：proxy, reverse-proxy, dynamic-proxy

在我的应用程序中，服务器和客户端都由我自己托管，每个客户端都有一个配置，可以配置它应该连接的服务器，通信基于 HTTP。现在，我要求客户端的连接服务器应该能够动态更改，但是要更改服务器 url 配置将需要重新启动客户端，这将需要几分钟。所以我想在客户端和服务器之间添加一个代理服务器，它可以通过一些规则将来自不同客户端的请求转发到不同的服务器。

我无法添加反向代理服务器，因为我无法区分来自不同客户端的请求，因为我的代理服务器将只有一个域名，我无法在客户端的请求 URL 中添加参数。

但我可以更改客户端以强制它使用代理。

所以我的计划是为客户端设置代理，为每个客户端指定一个虚服务器url，代理服务器在请求中获取服务器url，然后按照规则将请求转发到真实服务器。

有没有服务器可以做这样的事情？当然，如果可以在不重新启动代理服务器的情况下更改规则会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:07:29.350

我从这个好的答案中获取了这个链接，就在 SO

*   [代理服务器和反向代理服务器的区别](https://stackoverflow.com/questions/224664/difference-between-proxy-server-and-reverse-proxy-server#answer-366212)

此列表的所有学分都[归功于 qyb2zm302](https://stackoverflow.com/users/44862/qyb2zm302)，我建议您使用[squid](http://www.squid-cache.org/)或[nginx](http://nginx.net/)

## HTTP反向代理软件（服务器端）

*   [apache mod_proxy](http://wiki.apache.org/cocoon/ApacheModProxy)
*   [乌贼](http://www.squid-cache.org/)
*   [nginx](http://nginx.net/) （由俄罗斯人编写，用于 hulu.com、垃圾邮件网站等）
*   [HAProxy](http://haproxy.1wt.eu/)
*   [轻型httpd](http://redmine.lighttpd.net/projects/lighttpd)
*   [perlbal](http://www.danga.com/perlbal/)（为 livejournal 编写）
*   [磅](http://www.apsis.ch/pound/)
*   [清漆缓存](http://varnish.projects.linpro.no/)（由freebsd内核大师编写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:59:36.617

我认为使用 HTTP 标头[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)可能会有所帮助。

# c# - 用于接口或继承类的 ASP.NET MVC3 编辑器模板

> ID：10536688
> 
> 赞同：4
> 
> 时间：2012-05-10T14:54:33.843
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, mvc-editor-templates

需要以与使用类相同的方式使用采用接口的“EditorTemplate”。

我有两个问题：

1.  如果我包含名称为“EditorTemplate”的“DataAnnotation”“DataType”，我只会识别“EditorTemplate”。这并没有给我带来太多困扰，但是能够按类型识别它会很好，就像它有一个带有我的类型（类）名称的“EditorTemplate”一样。`[DataType ("ICanBeListed")]`

2.  我的界面使用泛型来定义属性的列表和返回类型。由于这个原因，我不知道如何做模板。

我知道有两个查询，但做同样的问题。

档案：

理想的视图模型：

```
[DisplayName("Field one")]
public FieldOne MyFieldOne { get; set; }

[DisplayName("Field two")]
public FieldTwo MyFieldTwo { get; set; } 
```

第1点的解决方案：

```
[DisplayName("Field one")]
[DataType("ICanBeListed")]
public FieldOne MyFieldOne { get; set; }

[DisplayName("Field two")]
[DataType("ICanBeListed")]
public FieldTwo MyFieldTwo { get; set; } 
```

界面：

```
public interface ICanBeListed<T, U>
{
    U Id { get; set; }

    string Description { get; set; }

    IList<T> ToList();
} 
```

课程：

```
public class FieldOne : ICanBeListed<FieldOne, string>
{
    public string Id { get; set; }

    public string Descripcion { get; set; }

    public IList<FieldOne> List()
    {
        return new List<FieldOne>
        {
            new FieldOne{Id = "1", Descripcion = "Description 1"},
            new FieldOne{Id = "2", Descripcion = "Description 2"}
        };
    }
}

public class FieldTwo : ICanBeListed<FieldTwo, int>
{
    public int Id { get; set; }

    public string Descripcion { get; set; }

    public IList<FieldTwo> List()
    {
        return new List<FieldTwo>
        {
            new FieldTwo{Id = 1, Descripcion = "Descripcion 1"},
            new FieldTwo{Id = 2, Descripcion = "Descripcion 2"}
        };
    }
} 
```

模板编辑器：

```
@model Mvc3ConditionalValidation.Models.ICanBeListed<object, object>
@Html.DropDownListFor(model => model.Id, new SelectList(Model.ToList(), "Id", "Description")) 
```

看法：

```
<div class="editor-field">
    @Html.EditorFor(model => model.MyFieldOne)
    @Html.ValidationMessageFor(model => model.MyFieldOne)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.MyFieldTwo)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.MyFieldTwo)
    @Html.ValidationMessageFor(model => model.MyFieldTwo)
</div> 
```

我尝试更改一个类的接口：

查看型号：

```
public class FieldTwo : CanBeListed<FieldTwo, int>
{
    public override int Id { get; set; }

    public override string Description { get; set; }

    public override IList<FieldTwo> ForList()
    {
        return new List<FieldTwo>
        {
            new FieldTwo{Id = 1, Description = "Descripcion 1"},
            new FieldTwo{Id = 2, Description = "Descripcion 2"}
        };
    }
} 
```

类（在接口之前）：

```
public abstract class CanBeListed<T, U>
{
    public virtual U Id { get; set; }

    public virtual string Description { get; set; }

    public abstract IList<T> ForList();
} 
```

但问题是一样的：

**传入字典的模型项的类型为“Mvc3ConditionalValidation.Models.FieldOne”，但此字典需要类型为“Mvc3ConditionalValidation.Models.CanBeListed`2[System.Object,System.Object]”的模型项。**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:01:43.197

您声明 EditorTemplate 只能采用`ICanBeListed<object, object>`. 基本上，您声明要`ICanBeListed<,>`对两种不同类型使用相同的模板，这不是您想要做的。您需要创建一个 EditorTemplate`FieldOne`和`FieldTwo`它们是不同的，以便您可以正确地使模型类型匹配。

# excel - 让excel只显示两位小数

> ID：10536691
> 
> 赞同：1
> 
> 时间：2012-05-10T14:54:46.027
> 
> 标签：excel

我尝试了各种各样的事情，但没有什么能像它应该的那样工作。我用过这个`office button, excel options, advanced, and set the automatic insert decimal place to 0'.` `Then I tried the format cells, and set the decimal places to 2`方法。没有什么能给我我想要的。我要么得到带两位小数的整数，例如 23.00，要么当我在单元格中输入 5.23 时，我只显示“23”。

有没有办法显示不带小数位的整数，并且 excel 在非整数中从不显示超过 2 个小数位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:07:39.417

您可以通过在 FormatCells -> Number Tab -> Custom -> Type 中应用格式 0.## 来格式化单元格以显示最多 2 个小数位（整数不显示）。查看[此对话](http://www.excelforum.com/excel-general/560141-show-decimal-point-only-if-not-a-whole-number.html)了解更多详情

# asp.net-mvc - 控件列表的 asp.net MVC 正则表达式验证

> ID：10536695
> 
> 赞同：0
> 
> 时间：2012-05-10T14:55:02.897
> 
> 标签：asp.net-mvc, validation, list

我在使用 asp.net MVC 2.0 中的正则表达式自定义验证器验证控件列表时遇到问题。

我的代码如下。这使用自定义验证器。但这不起作用，有什么建议吗？如果任何一个控件值无效，则将错误分配给所有控件。

```
[QuestionRegularExpression(@"\d{2}", ErrorMessage = "Must be numeric")]
public List<IDateQuestion> DriverViolationsList { get; private set; }
    public ViolationDatesFormModel()
    {
        DriverViolationsList = new List<IDateQuestion>();
    } 
```

这没有用。任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:06:06.937

你需要注册适配器`Global.asax.cs`

```
protected void Application_Start()
{
    //...
    DataAnnotationsModelValidatorProvider.RegisterAdapter(
        typeof(QuestionRegularExpressionAttribute),
        typeof(RegularExpressionAttributeAdapter));
} 
```

# android - 根据设备的屏幕大小调用函数（hdpi/ldpi/mdpi）

> ID：10536701
> 
> 赞同：0
> 
> 时间：2012-05-10T14:55:07.273
> 
> 标签：android

在 mdpi 设备上，我想调用这个方法：

```
final float scale = getResources().getDisplayMetrics().density;
double height_px =  45 * scale + 0.5; 
```

但是当应用程序在 hdpi 设备上运行时我想忽略该方法，我如何确定班级的屏幕尺寸？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:22:31.883

是的，你可以像这样检查比例值，

```
final float scale = getResources().getDisplayMetrics().density; 
```

现在你有了规模价值。比例值像这样变化，

对于**MDPI**设备，比例值为**1.0**。

对于**LDPI**设备，比例值为**0.75。**

对于**HDPI**设备，比例值为**1.50**。

对于**XHDPI**设备，比例值为**2.0**。

做一个交叉检查，

```
if(scale <1.50)
{
double height_px =  45 * scale + 0.5;
} 
```

这意味着此代码不会在高分辨率及以上分辨率下执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T09:08:03.660

也可以这样做：

```
int dpiDensity = getResources().getDisplayMetrics().densityDpi; 
```

然后您可以将结果值与 DisplayMetrics 中的常量进行比较，如下所示：

```
switch(dpiDensity){
    case DisplayMetrics.DENSITY_LOW:
        //Do sth for LDPI-screen devices
        break;
    case DisplayMetrics.DENSITY_MEDIUM:
        //Do sth for MDPI-screen devices
        break;
    case DisplayMetrics.DENSITY_HIGH:
        //Do sth for HDPI-screen devices
        break;
    case DisplayMetrics.DENSITY_XHIGH:
        //Do sth for XHDPI-screen devices
        break;  
} 
```

还有一个名为 DENSITY_DEFAULT 的常量，但它的值与 DENSITY_MEDIUM 相同。

# html - HTML 元素上的 margin-bottom 导致其上方有额外的空间 - Firebug 没有揭示原因

> ID：10536703
> 
> 赞同：3
> 
> 时间：2012-05-10T14:55:13.377
> 
> 标签：html, css, margins

我正在建立这个页面： http: [//gwwc2.centreforeffectivealtruism.org/](http://gwwc2.centreforeffectivealtruism.org/)。正如您将看到的，前 2 个可见的 HTML 元素是一个图像（蓝色背景下的文本“Giving What We Can”）和一个水平菜单。我希望这些之间没有空间，但是我无缘无故地在 CSS、Firebug 或 Chrome 的等效开发工具中看到。（这是[我试图在 Chrome 中查找原因的视频](http://www.screencast-o-matic.com/watch/clh62a57n)- 我一个接一个地单击一个元素，通常会看到一些边距或填充，这解释了突出显示的 2 个元素之间的间隙，但正如您所见，没有。 )

由于发布此 mattmanser 指出删除底部 HTML 元素（菜单）的 margin-bottom 解决了问题。我现在的问题是为什么底部边距应该在此上方留出空间？（第二个问题是是否有比 Firebug 或 Chrome 的开发者工具更好的工具来发现这些东西，因为他们没有透露这一点。）

## HTML/CSS（可跳过）

您最好自己检查 HTML 和 CSS（它有点复杂，因为它在基于 Zen 的 Drupal 主题中），但这里有一个部分示例。这2个元素是：

```
<div id="gwwc-logo-header">
    <a href="/">
        <img src="/sites/givingwhatwecan.org/themes/gwwc2/images/chrome/header/top-blue-header.png" alt="Giving What We Can">
    </a>
</div>

<div class="region region-header">
  <div id="block-superfish-1" class="block block-superfish first last odd">
</div> 
```

这些ID/类都没有我可以看到的任何边距/填充集（除了如上所述`.block`有*底部*边距）。

*问题已编辑以反映保证金底部负责*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:09:27.953

元素 id`block-superfish-1`具有向元素`block`添加 a`margin-bottom`的类`1.5em`。

这就是造成差距的原因。您单击视频末尾的元素，该值将显示在资源管理器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:13:28.060

这是解决您的问题的方法。将以下代码添加到您的 CSS。

```
#gwwc-logo-header {
height: 45px;
} 
```

干杯！！！

# ruby - 全新的 gitorious 安装 – 推送失败并出现 EOFError

> ID：10536707
> 
> 赞同：1
> 
> 时间：2012-05-10T14:55:21.110
> 
> 标签：ruby, git, gitorious, eoferror

我在 Ubuntu 11.04 机器上部署 Gitorious。一切正常，除了推。

客户得到这个：

```
$ git push origin master 

== Gitorious: 
========================================================== 
fatal error 
======================================================================== 

fatal: The remote end hung up unexpectedly 
```

服务器在*gitorious_auth.log*中显示了这一点：

```
I, [2012-05-08 18:40:45#7589]  INFO -- : Connection from "12.34.56.78 
50393 22" (admin): git-receive-pack 'test/test.git' 
F, [2012-05-08 18:40:45#7589] FATAL -- : EOFError end of file 
reached: /usr/lib/ruby/1.8/net/protocol.rb:135:in `sysread' 
  /usr/lib/ruby/1.8/net/protocol.rb:135:in `rbuf_fill' 
  /usr/lib/ruby/1.8/timeout.rb:67:in `timeout' 
  /usr/lib/ruby/1.8/timeout.rb:101:in `timeout' 
  /usr/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill' 
  /usr/lib/ruby/1.8/net/protocol.rb:116:in `readuntil' 
  /usr/lib/ruby/1.8/net/protocol.rb:126:in `readline' 
  /usr/lib/ruby/1.8/net/http.rb:2028:in `read_status_line' 
  /usr/lib/ruby/1.8/net/http.rb:2017:in `read_new' 
  /usr/lib/ruby/1.8/net/http.rb:1051:in `request' 
  /usr/lib/ruby/1.8/net/http.rb:772:in `get' 
  /var/www/gitorious/script/../lib/gitorious/ssh/client.rb:85:in 
`configuration' 
  /var/www/gitorious/script/../lib/gitorious/ssh/client.rb:59:in 
`real_path' 
  /var/www/gitorious/script/../lib/gitorious/ssh/client.rb:73:in 
`to_git_shell_argument' 
  /usr/bin/gitorious:60 
```

我怎样才能使推动工作？

最好的，

鲁本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:02:26.463

原来问题是由错误`gitorious_client_host`设置引起的，我天真地设置为`localhost`.

然后发生的事情`/lib/gitorious/ssh/client.rb:85`是 gitorious 试图通过 获取存储库配置`http://localhost/project/repo`，但 nginx 服务器尚未配置为从`localhost`.

两种可能的**解决方案**：

1.  将`gitorious_client_host`设置设置为您的公共 gitorious 主机名。
2.  将您的 nginx 或其他服务器配置更改为也从`localhost`.

但是，第二种解决方案可能会导致其他应用程序出现问题。

# jquery-ui - 从 php 生成的 Jquery UI 多个对话框

> ID：10536710
> 
> 赞同：0
> 
> 时间：2012-05-10T14:55:25.760
> 
> 标签：jquery-ui, dialog, jquery-ui-dialog

使用 Jquery UI 对话框时遇到问题。我从 php（while 循环）生成一个表，其中包含名称、电子邮件、评论等标题。评论设置为显示：无，我想显示它们，只有当我单击相应行中的“查看”之类的按钮时。问题是 jquery 将生成多个对话框，而不是一个。

所以，我的 jquery 代码看起来像（来自示例）：

```
$.fx.speeds._default = 1000;
 $(function() {
 $( ".dialog" ).dialog({
 autoOpen: false,
 show: "blind",
 hide: "explode"
 });

 $( ".opener" ).click(function() {
 $(".dialog").dialog( "open" );
 return false;
});
}); 
```

！其中 .dialog 是我为我的评论设置的类，而 opener 是我为我的按钮视图设置的类。

我应该怎么做才能只收到一个对话框，对应于点击的行？如果我单击第 2 行的视图，我想要带有与对话框 2 对应的注释的对话框。不是全部。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:58:41.873

随着`$(".dialog").dialog( "open" );`您打开所有带有 class 的对话框`.dialog`。我不知道您的 HTML，但您应该查找要打开的对话框。所以使用类似的东西：

```
$.fx.speeds._default = 1000;
 $(function() {
 $( ".dialog" ).dialog({
 autoOpen: false,
 show: "blind",
 hide: "explode"
 });

 $( ".opener" ).click(function() {
 $(this).parent('.dialog').dialog( "open" );
 return false;
});
}); 
```

# c# - 当源和目标都在同一个远程文件服务器上时，是否远程处理 File.Copy？

> ID：10536717
> 
> 赞同：1
> 
> 时间：2012-05-10T14:55:42.160
> 
> 标签：c#, .net, windows, file-io

我正在将遗留数据迁移到新系统。我需要将 10000 个文件区域中的某些内容从一个目录结构复制到另一个目录结构。旧的和新的目录结构都在同一个文件服务器上，在另一个国家的数据中心的某个地方。我必须运行负责在本地复制文件的应用程序（而不是在远程文件服务器上）。

我当前的实现一次将一个文件读入内存流。然后将内存流写入另一个位置的新创建文件。这很好用，但是很明显，我将每个文件从文件服务器传输到本地计算机，然后再传输回文件服务器。

我想知道如果我改用 File.Copy(src, trg) 是否会有所作为。Windows 是否足够聪明地处理远程（在文件服务器上）复制文件的过程，而无需在该过程中通过线路发送单个字节的文件数据？

如果使用 File.Copy(...) 无法做到这一点，是否有另一种方法可以达到我完全远程处理文件复制操作的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:57:34.433

简短的回答：不，不会。

可以登录远程服务器吗？然后你可以在那里开始工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:06:06.147

取决于windows的版本。如果服务器是 2K3 或更高版本，您也许可以使用[Powershell remoting](http://technet.microsoft.com/en-us/library/dd819505.aspx)。

如果远程处理可用，启动 PS 并执行`enter-pssession ServerInADistantLand`-- 然后您可以使用正常的 DOS 或 Powershell 命令进行复制。

# java - 通过 AJP 的 Tomcat 7 Websockects 不工作。有什么建议么？

> ID：10536718
> 
> 赞同：2
> 
> 时间：2012-05-10T14:55:42.723
> 
> 标签：java, tomcat, websocket, ajp, atmosphere

如果将您的协议设置为 AjpNioProtocol，有谁知道 Tomcat 版本 7.0.27 AJP 连接器是否可以支持 http 升级（websockets）。 [http://tomcat.apache.org/tomcat-7.0-doc/config/ajp.html#Connector_Comparison](http://tomcat.apache.org/tomcat-7.0-doc/config/ajp.html#Connector_Comparison)

我正在使用气氛，但即使有基本的套接字请求，客户端 websocket 也会关闭。Atmo 错误：连接关闭，没有发送关闭帧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T15:17:40.577

AJP 协议不支持 WebSocket。如果您在反向代理中使用 HTTP 而不是 AJP，它可能会起作用（取决于代理）。

# ios - 了解采样器

> ID：10536721
> 
> 赞同：0
> 
> 时间：2012-05-10T14:56:01.063
> 
> 标签：ios, instruments

我有一个基于位置的应用程序，它在后台无限运行。电池消耗得很快，所以我使用 Sampler 来查看应用程序在后台时发生的情况。除非发生位置更改，否则它应该在后台不做任何事情。

这是采样器返回的内容： ![在此处输入图像描述](../Images/edddf4a023ee91e8c3d08e636d842cc8.png)

我看到 XMPPModule 已停用，占用了 24.1%，而它根本不应该运行。我在这个块上设置了断点，它们永远不会被调用，那么这到底意味着什么呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:00:19.953

XMPPModule 可能是“红鲱鱼”。我建议在 Sampler 上使用 Instruments “Energy Diagnostics” 来跟踪电池消耗问题。

# firefox - 两台不同计算机上相同版本的 Firefox (v12) 以不同方式显示固定宽度浮动

> ID：10536728
> 
> 赞同：1
> 
> 时间：2012-05-10T14:56:21.960
> 
> 标签：firefox, css-float

我的浮动在 Windows 机器上的一个人的 Firefox (v.12) 上中断（我知道）...... Windows 上相同版本的 Firefox 在其他机器上显示正常。

布局的简化分解：两个包含两个浮动固定宽度 div 的容器 div：

```
<div id="frame" style="width:942px; display:block"> <!--extra 2 px to accommodate border on interior div -->

 <div id="frame_content" style="width:940px; border: 1px solid; display: block">

  <div id="column_left" style="width:626px;float:left;"></div>

  <div id="column_right" style="width:314px;float:right;"></div> <!-- combined width of floated divs = 940 -->

 </div>

</div> 
```

将 column_right 的宽度调整为 313px 修复，但列之间有 1px 的间隙。

在我的智慧结束 - 因为它只是一台电脑！有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:05:59.640

每台机器的缩放级别是否不同？我自己也看到过类似的情况，浮动元素在某些缩放级别上换行。尝试在受影响的机器上按 ctrl 0 将缩放重置为 100%

# xml-parsing - 有没有办法使用axis2接受SOAP请求中的实体

> ID：10536729
> 
> 赞同：0
> 
> 时间：2012-05-10T14:56:29.570
> 
> 标签：xml-parsing, entity, axis2, woodstox

目前我对实体没有任何问题 `&lt; &gt; &apos; &amp;.`但是如果我提供一些其他实体，则会在axis2中出现以下错误

```
faultstring>com.ctc.wstx.exc.WstxParsingException: Undeclared general entity "Euml"
 at [row,col {unknown-source}]: [6,28]</faultstring>
         <detail>
            <Exception>org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxParsingException: Undeclared general entity "Euml"
 at [row,col {unknown-source}]: [6,28] 
```

有没有办法在axis2中添加实体解析器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:12:08.863

不。实体需要文档类型声明，但 SOAP 明确禁止 DTD。Axis2 严格执行此操作，因为不这样做会带来[安全风险](http://svn.apache.org/repos/asf/axis/axis2/java/core/security/CVE-2010-1632.pdf)。

# loops - 退出excel中的嵌套循环

> ID：10536730
> 
> 赞同：4
> 
> 时间：2012-05-10T14:56:37.053
> 
> 标签：loops, excel, vba

我在宏中有一个循环，我正在编写以下结构：

这本书有两个工作表。原始数据（因此是 endpointData 变量）和总帐（总帐）表（因此是 endpointGL 变量）

此函数中有三个`for`循环：

(1) 第一个循环遍历原始数据文件中的每条记录。
(2) 第二个循环遍历来自`REGEXP`（正则表达式搜索）的已验证匹配项，并且
(3) 第三个循环遍历 G/L 并找到相应的匹配项并将（使用：）`PUT_DATA_RANGE`该数据放入适当的位置。

这是我的意思：

伪代码：

```
For i = 2 To endpointData

    If SOME_TEST = True Then
        Set MATCHES = REGEXP.EXECUTE()
        For Each myMatch In MATCHES
            For j = 1 To endpointGL
                If myMatch.value = SOME_CONDITION Then
                    PUT_DATA_RANGE
                    Exit For
                ElseIf myMatch.value <> SOME_CONDITION Then
                    MsgBox ("there might be a problem")
                    ' EXIT BOTH LOOPS HERE

                    ' write handler code
            Next
            End If
        Next
    End If
Next i 
```

现在你会注意到我对自己有一些评论。如果第三个循环在总帐中找不到匹配项，则代码当前中断以通知用户。但是该消息框`MsgBox("there might be a problem")`与第三个循环一起循环。我如何让 excel 退出两个循环并将第一个 for 循环带到原始数据中的下一个可用记录？

顺便说一句，我试过用 an 退出它，`Exit For`但这似乎并不完全有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:01:25.460

我看到两个选项。

1) 使用一系列布尔值来检查外部循环是否应该继续

2）使用goto语句退出内循环直接回到主程序

在这种情况下，goto 可能不会那么糟糕，因为您没有跳转到完全不同的代码部分。好好记录一下吧...

# python - 使用python在一段RNA序列内进行碱基配对

> ID：10536733
> 
> 赞同：0
> 
> 时间：2012-05-10T14:56:51.920
> 
> 标签：python, bioinformatics

我无法让我的代码完全按照我的意愿行事。我想定义一个函数，它接受两个数字作为参数，并使用这些数字来查看以前存储为字符串的 RNA 代码的一部分。

然后我想计算该部分中所有可能的碱基对，以便'a'和'u'对以及'g'和'c'对。但是，对之间必须有 3 个字符的间隙，并且对不能交叉。例如，如果 rna[4] 与 rna[10] 配对，则 rna[5] 不能与 rna[12] 配对。但是，如果一对出现在 4 到 10 之间，即 5 和 9 之间，那就没问题了。

到目前为止我有

```
def base_pairs(x,y):
return (x=='a' and y=='u' or
    x=='u' and y=='a' or
    x=='c' and y=='g' or
    x=='g' and y=='c' or
    x=='g' and y=='u' or
    x=='u' and y=='g' )

rna = raw_input('Enter RNA sequence: ')
n = len(rna)

def opt(x,y):
    for i in range(x,y-5):
        j = i+4
        if base_pairs(rna[i],rna[j])==1:
            print i,j
            a = i
            b = j
            if b-a > 3:
                if base_pairs(a+1,b-1)==1:
                    print a+1,b-1
                    a = a+1
                    b = b-1
        else:
            j=j+1 
```

例如，当我输入 accguugacgcag 我想使用 opt(0,12) 并得到 0,4 5,11 6,10 目前我只得到 0,4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:06:25.877

我已经开始使用您的功能的新版本。我已经结合了我在对您的问题的评论中提到的想法。此外，我已经将 rna 字符串作为参数，但是可以很容易地删除它。此版本不会产生您要求的输出，但它可能会适应您的需求。我机器上的输出是 o,4 和 5,9。我不明白为什么你更喜欢 5,11 而不是 5,9，所以我无法改变它来给出这个结果。

```
def is_base_pair(x, y):
    return (x=='a' and y=='u' or
            x=='u' and y=='a' or
            x=='c' and y=='g' or
            x=='g' and y=='c' or
            x=='g' and y=='u' or
            x=='u' and y=='g' )

# start and end are the inclusive range of places in which to look for pairs
def opt(rna, start, end):
    # if the range is too small, give up
    if start + 4 > end:
        return

    # the next left side to try to match
    nextLeft = start

    while nextLeft + 4 <= end:
        # find the right nucleobase to match the one at nextLeft
        #   start looking at the minimal distance and incrementally get bigger
        potentialRight = nextLeft + 4
        while not is_base_pair (rna[nextLeft], rna[potentialRight]) and potentialRight <= end:
            potentialRight += 1

        if is_base_pair (rna[nextLeft], rna[potentialRight]):
            print nextLeft, potentialRight
            # recursively search for pairs between the elements of this pair
            opt(rna, nextLeft + 1, potentialRight - 1)
            nextLeft = potentialRight + 1
        else:
            nextLeft += 1 
```

如果您对它的工作原理有任何疑问，请告诉我。

# android - 使用来自一个活动的单选按钮/复选框的数据在另一个活动中显示？

> ID：10536736
> 
> 赞同：0
> 
> 时间：2012-05-10T14:57:03.513
> 
> 标签：android, mysql

我正在制作一个应用程序，您可以使用单选按钮和复选框从不同的事物中进行选择。所以我想知道如何让选定的数据出现在另一个活动中？

这是您选择想要的咖啡的课程。

```
 package com.coffee2go.coffee2go;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public class coffee2 extends Activity {

    private RadioGroup choosecoffee;
    private Button order;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.coffee2);

        choosecoffee = (RadioGroup) findViewById(R.id.choosetypeofcoffee);
        order = (Button) findViewById(R.id.order_coffee);

        addListenerOnButton();

    }

    private void addListenerOnButton() {
        // TODO Auto-generated method stub

        order.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                startActivity(new Intent(coffee2.this, order.class));

            }
        });

        choosecoffee.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                startActivity(new Intent(coffee2.this, order.class));
            }
        });

    }
}' 
```

这是我希望信息出现的类。信息还应保存到网络服务器 000webhost.com 上的 mySQL 数据库中

```
 'package com.coffee2go.coffee2go;

import android.app.Activity;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public class order extends Activity {
    private RadioGroup choosecoffee;
    private RadioButton bryggkaffe, latte, espresso;

    private RadioGroup sizeofcoffee;
    private RadioButton small, big;

    private CheckBox sugar, milk;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order);

        TextView orderlist = (TextView) findViewById(R.id.orderlist);
        TextView pricelist = (TextView) findViewById(R.id.pricelist);
        choosecoffee = (RadioGroup) findViewById(R.id.choosetypeofcoffee);
        bryggkaffe = (RadioButton) findViewById(R.id.bryggkaffe);
        latte = (RadioButton) findViewById(R.id.latte);
        espresso = (RadioButton) findViewById(R.id.espresso);

        sizeofcoffee = (RadioGroup) findViewById(R.id.choosecoffeesize);
        small = (RadioButton) findViewById(R.id.small);
        big = (RadioButton) findViewById(R.id.big);

        sugar = (CheckBox) findViewById(R.id.sugar);
        milk = (CheckBox) findViewById(R.id.milk);

        if (bryggkaffe.isChecked() == true) {
            orderlist.append("Bryggkaffe\n");

        }
        if (latte.isChecked() == true) {
            orderlist.append("Latte\n");
        }

        if (espresso.isChecked() == true) {
            orderlist.append("Espresso\n");
        }
        if (small.isChecked() == true) {
            orderlist.append("Liten\n");
        }

        if (big.isChecked() == true) {
            orderlist.append("Stor\n");
        }

        if (sugar.isChecked() == true) {
            orderlist.append("Socker\n");
        }

        if (milk.isChecked() == true) {
            orderlist.append("Mjölk\n");

        }

    }' 
```

有没有办法做到这一点？我还需要创建一个连接类和一个php吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:04:57.157

您可以在 Intent 中传递数据来创建您的第二个活动。

这是您从第一个活动中调用的内容：

```
Intent orderIntent = new Intent(coffee2.this, order.class)); 
orderIntent.putExtra("CoffeeType", someVariableThatHoldsCoffeeType);
startActivity(orderIntent); 
```

在您的第二个活动（订单）中，您可以从 onCreate(...) 方法的 Intent 中检索 Coffee 类型：

```
Intent callingActivityIntent =getIntent();
String coffeeType=sender.getExtras().getString("CoffeeType");
//Do something with the coffeeType variable
... 
```

这是一个如何从头到尾传递数据的教程：http: [//mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/](http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:20:28.807

Gophermofer 有正确的想法，但您的应用程序似乎像这样`coffee2`-> `order`->运行`coffee2`。因此，与其`order`使用 startActivity() 启动您的课程，不如将相同的 Intent 传递给 startActivityForResult()。

```
startActivityForResult(new Intent(coffee2.this, order.class), 1); 
```

一旦用户完成他们的订单`order`，使用 setResult() 像这样：

```
Intent intent = new Intent();
intent.putExtra("Order", orderlist.getText().toString());
... // continue this for everything you want to pass back
setResult(10, intent);
finish(); 
```

现在回到`coffee2`设置 onActivityResult() 函数：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == 1 && resultCode == 10) {
        String orderlist = data.getString("Order");
        // Process the order
    }
} 
```

瞧！[在活动之间](http://developer.android.com/guide/topics/intents/intents-filters.html)传递信息。

# r - 将列表添加到列表时丢失信息

> ID：10536738
> 
> 赞同：3
> 
> 时间：2012-05-10T14:57:10.360
> 
> 标签：r

我正在使用 R 2.13 尝试以下代码：

```
aa <- list()
aa["test"] <- list(x1=5,x2=7) 
```

我得到的是：

```
> aa
$test
[1] 5 
```

但我想要更接近的东西：

```
$test
 $x1 5
 $x2 7 
```

有人可以解释我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:09:02.150

好的，刚刚发现我做错了什么！

```
aa[["test"]] <- list(x1=5,x2=7) 
```

行得通！

# java - Coldfusion 与 Java IDN 处理国际域

> ID：10536740
> 
> 赞同：0
> 
> 时间：2012-05-10T14:57:27.417
> 
> 标签：java, coldfusion, internationalization, coldfusion-9, idn

我正在重写我们的一个表单，以便它可以处理国际域，但在我开始之前，我想我会测试处理 IDN 的能力。

我的想法是，如果有人输入像：http://清华大学.cn 这样的域，我会将其作为 punycode 存储在我的数据库中。考虑到这一点，我找到了 Java IDN 处理程序并编写了以下测试代码：

```
<cfset strUrl = "http://清华大学.cn" />
<cfoutput>
#strURL#
</cfoutput>     
<!--- Create a Java URL. --->
<cfset jUrl = CreateObject( "java", "java.net.IDN" ).toAscii(strUrl) />

<cfoutput>
#jURL#
</cfoutput> 
```

然而，在运行这个我得到一个错误：

> 在输入中发现了一个禁止的代码点http://æ̧...å�žå¤§å¦

这发生`.toAscii`在线上。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:22:54.570

`<cfprocessingdirective pageencoding="utf-8">`我在页面顶部添加了现在使用 Java IDN 正确编码和解码中文的页面。

我在评论部分找到了这个解决方案：

[http://www.bennadel.com/blog/1155-Cleaning-High-Ascii-Values-For-Web-Safeness-In-ColdFusion.htm](http://www.bennadel.com/blog/1155-Cleaning-High-Ascii-Values-For-Web-Safeness-In-ColdFusion.htm)

# java - 价值在方法的路上迷失了

> ID：10536743
> 
> 赞同：0
> 
> 时间：2012-05-10T14:57:39.720
> 
> 标签：java, android, type-conversion

我仍然是一个初学者，但试图学习所以可能会做一些非常愚蠢的事情。我的问题是关于我正在尝试制作的一个简单的 Android 计算器，但我认为这个问题涉及我认为我理解的基本 Java。我从按下的按钮中获取值，然后将其传递给显示输入的方法，然后为输入设置全局变量。如果我按“1”，则方法标题中的值为“1”，但随后会在该方法中丢失。也许我不明白如何像我想的那样处理 Java 类型——不知道。我曾经让逻辑工作，但不得不改变它的显示方式，当然，这在某个地方搞砸了我的逻辑。无论如何，我现在将发布通过的声明和接收方法。提前致谢。

```
 public void initButtons()
{
    //register buttons as listeners
    final Button button1 = (Button) findViewById(R.id.button1);
    final Button button2 = (Button) findViewById(R.id.button2);
    final Button button3 = (Button) findViewById(R.id.button3);
    final Button button4 = (Button) findViewById(R.id.button4);
    final Button button5 = (Button) findViewById(R.id.button5);
    final Button button6 = (Button) findViewById(R.id.button6);
    final Button button7 = (Button) findViewById(R.id.button7);
    final Button button8 = (Button) findViewById(R.id.button8);
    final Button button9 = (Button) findViewById(R.id.button9);
    final Button button10 = (Button) findViewById(R.id.button10);
    final Button addButton = (Button) findViewById(R.id.addButton);
    final Button subButton = (Button) findViewById(R.id.subButton);
    final Button multButton = (Button) findViewById(R.id.multButton);
    final Button divButton = (Button) findViewById(R.id.divButton);
    final Button calcButton = (Button) findViewById(R.id.calcButton);
    final Button clearButton = (Button) findViewById(R.id.clearButton);

    //when button is pressed, send num to calc function
    button1.setOnClickListener
    (new Button.OnClickListener()
        {
            public void onClick(View v)
            {
                inputString = button1.getText().toString();
                displayCalc(inputString);
                //displayCalc(1.0);
            }
        }
    );

    private void displayCalc(String curValue)
{
    if (hasChanged = false)
    {
        //display number if reset
        String display = curValue;
        number1 = Double.parseDouble(display);
    }
    else                                                    
    {
    //  display = display + operator + curValue;
        //number2 = Double.parseDouble(curValue);
    }
    //showDisplay(display);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:01:50.187

Java 中的比较使用双等号“==”进行。

只需将布尔值放在括号之间，就可以更好地测试布尔值，如下所示：

```
if(myBool){
    //do something
}
else if(!myOtherBool){
    //do something else
} 
```

# java - 无法刷新 Groovy 套接字

> ID：10536745
> 
> 赞同：2
> 
> 时间：2012-05-10T14:57:46.233
> 
> 标签：java, android, sockets, groovy

我对拒绝正确刷新的 java.net.SocketOutputStream 感到沮丧！我必须忽略显而易见的事情。在下面的 Groovy 脚本中，我尝试连接到在我的 Galaxy Nexus Android 4.0.2 手机上运行的简单套接字服务器，它在我的 5 秒超时到期后立即给我一个套接字关闭异常。

SocketClient.groovy

```
import java.net.*
socket = new Socket()
socket.connect(new InetSocketAddress(InetAddress.getByAddress([172,17,57,21] as byte[]), 58789), 5000)
println "Connected!"
socket.withStreams { input, output ->
    println "Processing ${input.class.name} and ${output.class.name} streams..."
    output.withWriter {
        it << 'echo testing\n\n'; 
        it.flush();
        output.flush()
        def readerThread = Thread.start {
            println "Request written, reading response..."; println input.text
        }
        println "Waiting 5 secs for read to complete."
        readerThread.join(5000)
    }
    println "Stream closed!"
} 
```

我尝试了所有不同的刷新方式，包括直接刷新输出流到使用写入器的间接包装和刷新。在流关闭之前服务器上不会出现任何数据，这会导致套接字关闭，这会导致任何从套接字读取的尝试崩溃。我究竟做错了什么？我也会在下面内联我的 Android 代码。这是一个启动套接字服务器的简单活动。

MyServer.java

```
package com.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class MyServer extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        RawSocketServer rawSocketServer = new RawSocketServer();
        String port = rawSocketServer.getLocalPort();
        TextView textView = (TextView) this.findViewById(R.id.mainTextView);
        textView.setText("Server bound to port " + port);
        rawSocketServer.start();
    }
} 
```

RawSocketServer.java

```
package com.example;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

/**
 * Created by IntelliJ IDEA.
 * User: cliff
 * Date: 5/9/12
 * Time: 4:03 PM
 */
public class RawSocketServer {

    public static final int PORT = 0;
    private ServerSocket serverSocket;

    public RawSocketServer() {
        this(PORT);
    }

    public RawSocketServer(int port) {
        try {
            this.serverSocket = new ServerSocket(port);
        } catch (IOException e) {
            e.printStackTrace();
            throw new RuntimeException("server cannot bind to port " + port);
        }
    }

    public void start() {
        new Thread(new Runnable() {
            public void run() {
                go();
            }
        }).start();
    }

    private void go() {
        Socket socket = null;
        while (true) {
            try {
                socket = this.serverSocket.accept();
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("cannot accept from server socket" + e);
            }
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Could not get input stream from socket. " + e);
            }
            PrintWriter writer = null;
            try {
                writer = new PrintWriter(socket.getOutputStream());
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Could not get output stream from socket. " + e);
            }
            try {
                for (String line = reader.readLine(); line !=null; line = reader.readLine()) {
                    writer.print(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Error reading/writing from/to socket. " + e);
            }
        }
    }

    public String getLocalPort() {
        return "" + serverSocket.getLocalPort();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:35:26.340

在 Blackdrag 的帮助下，我终于想通了。我的问题出在多个领域。由于缺少换行符（如 blackdrag 建议的那样），客户端读取将挂起。由于客户端从不关闭其写入流，服务器读取循环也会挂起。这导致了先有鸡还是先有蛋的问题，即关闭写入流会关闭关闭读取流的套接字。我最终需要输入一个“协议”，如果你愿意的话，它会指示对话何时完成，服务器应该停止读取并关闭套接字。在客户端上写入“完成”字符串成为该指标。工作客户端和服务器的完整源代码如下：（我知道这是糟糕的 Android 代码，但它最初只是为了测试我的新 Galaxy Nexus 上的通信，我'

SocketClient.groovy

```
import java.net.*
socket = new Socket()
socket.connect(new InetSocketAddress(InetAddress.getByAddress([172,17,57,21] as byte[]), 58302), 5000)
println "Connected!"
socket.withStreams { input, output ->
    println "Processing ${input.class.name} and ${output.class.name} streams..."
    output.withWriter {
        it << 'my name is cliff\ndone\n'; 
        it.flush();
        output.flush()
        def readerThread = Thread.start {
            println "Request written, reading response..."; println input.text
        }
        println "Waiting 5 secs for read to complete."
        readerThread.join(60000)
    }
    println "Stream closed!"
} 
```

MyServer.java

```
package com.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class MyServer extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        RawSocketServer rawSocketServer = new RawSocketServer();
        String port = rawSocketServer.getLocalPort();
        TextView textView = (TextView) this.findViewById(R.id.mainTextView);
        textView.setText("Server bound to port " + port);
        rawSocketServer.start();
    }
} 
```

RawSocketServer.java

```
package com.example;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

/**
 * Created by IntelliJ IDEA.
 * User: cliff
 * Date: 5/9/12
 * Time: 4:03 PM
 */
public class RawSocketServer {

    public static final int PORT = 0;
    private ServerSocket serverSocket;

    public RawSocketServer() {
        this(PORT);
    }

    public RawSocketServer(int port) {
        try {
            this.serverSocket = new ServerSocket(port);
        } catch (IOException e) {
            e.printStackTrace();
            throw new RuntimeException("server cannot bind to port " + port);
        }
    }

    public void start() {
        new Thread(new Runnable() {
            public void run() {
                go();
            }
        }).start();
    }

    private void go() {
        Socket socket = null;
        while (true) {
            try {
                socket = this.serverSocket.accept();
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("cannot accept from server socket" + e);
            }
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Could not get input stream from socket. " + e);
            }
            PrintWriter writer = null;
            try {
                writer = new PrintWriter(socket.getOutputStream());
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Could not get output stream from socket. " + e);
            }
            try {
                for (String line = reader.readLine(); line !=null; line = reader.readLine()) {
                    if(line.trim().equalsIgnoreCase("done")) break;
                    writer.println(line);
                    writer.flush();
                }
                writer.close();
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException("Error reading/writing from/to socket. " + e);
            }
        }
    }

    public String getLocalPort() {
        return "" + serverSocket.getLocalPort();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:53:50.343

我想知道....那里有“它<<'回声测试'”。在 Writer 上使用它意味着 afaik 没有写入行尾。由于您的服务器使用 readLine，它需要一个行结尾。因此数据可能到达，但 readLine 没有完成，因为它等待行尾。然后修复将是例如“it << 'echo testing\n'”或“it << 'echo testing' << '\n'”。

现在我不太了解Android API，但是您的服务器在“writer.print(line);”中可能有同样的问题，因为我认为用readLine 读取的行不再包含行尾。不过既然没有再读，那现在应该没问题了。

# c++ - 如何在 Visual Studio 2010 中查看二维数组的所有元素？

> ID：10536746
> 
> 赞同：18
> 
> 时间：2012-05-10T14:57:50.913
> 
> 标签：c++, visual-studio-2010, debugging

我正在 Visual Studio 2010 中调试我的 c++ 代码，并希望查看我的数组的内容，比如 Q，它是 17x17。当我插入断点并尝试调试时，我只看到变量“Q”。当我将它带到“Watch”屏幕并将其重命名为“Q,17”时，我看到了一层。

但我也想看看另一个维度。我不能写“Q,17,17”。什么是正确的命令？

谢谢...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T15:06:42.840

你不能，至少不能直接。

您可以做的是放入`&array[0][0]`内存窗口，然后调整它的大小，使列数与一行`array`数据匹配。

或者，您可以放入`array[0],17`监视窗口，然后重复它`array[1],17`，等等。

也许不是您要寻找的答案，而是监视窗口虽然功能强大，但无法满足您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-13T06:23:07.520

如果您想以更图形化的方式查看以 2D 组织的值，您可以尝试使用[Array Visualizer 扩展](https://marketplace.visualstudio.com/items?itemName=AmirLiberman.ArrayVisualizer)。它适用于小型多维数组。

它是一个免费的开源扩展，可以通过 MarketPlace 下载。它旨在在调试应用程序时显示数组。**Visual Studio 2010、2012、2013**和 2015有多个版本，不幸的是它似乎没有更新到 2017。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T08:49:57.607

将数组 Q 放到全局范围内，您可以看到它的所有元素（如果它是本地数组，您可以复制到全局数组并在全局数组上操作）：

```
int Q[17][17];
int main(){
    int x=1, y=1, z;
} 
```

调试好，算法验证好之后，就可以随意使用本地数组了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T16:44:12.833

提出的解决方案仅适用于一维数组。但是每行具有固定大小的二维数组（在数学中将第一个维度视为一行）可以分配为一维数组，如下所示：

```
int ** a = new int * [n];
int * b = new int [n*n];

a[0] = &b[0];
for (int i=1; i<n; i++)
{
    a[i] = a[i-1]+n;
}
int count=0;
for (int i=0; i<n; i++)
{
    for (int j=0; j<n; j++)
    {
        a[i][j]= rgen.randInt(-10,10);
    }
} 
```

然后，您可以在代码中用作矩阵，并使用假设您的矩阵是 10 x 10 来`a`可视化。`b,100`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-29T09:39:06.097

可以直接查看静态分配的全局内存或局部变量

我没有找到在 VS2010 中查看动态分配的二维数组的方法（只有一维）。VS2019可以，通过

```
double ** a;
a = (double**)malloc(5 * sizeof(double*));
a[0]=(double*)malloc(10 * sizeof(double));
... 
```

`(double(*)[10]) a[0],5`（在观察窗口中添加）

![图片](../Images/1cabe27e2eecbc9f84fe6db029884acc.png)

而这里的这个也可以 `(double(**)[10])a,5`

# php - 在 WordPress 中扩展 WP 电子商务通知电子邮件

> ID：10536751
> 
> 赞同：1
> 
> 时间：2012-05-10T14:58:08.973
> 
> 标签：php, wordpress, e-commerce

我正在做一场噩梦，试图在 wp ecommerce 中为 wordpress 扩展管理员电子邮件。这些报告非常基本，没有支持添加到电子邮件的文档。

我希望能够将送货地址详细信息添加到管理报告中，这样我就不必每次进行销售时都登录到 Wordpress 后端来查看 purchase_log。

我尝试从这里[http://getshopped.org/forums/topic/add-shipping-method-to-admin-email/](http://getshopped.org/forums/topic/add-shipping-method-to-admin-email/)遵循一个示例，但没有运气。

我已经添加了这个：

```
 $report = str_replace( '%shipping_country%', $purchase_log['shipping_country'], $report );
    $report = str_replace( '%billing_country%', $purchase_log['billing_country'], $report );
    $report = str_replace( '%shipping_country%', $purchase_log['shipping_country'], $report );
    $report = str_replace( '%buyer_name%', wpsc_display_purchlog_buyers_name(), $report );
    $report = str_replace( '%shipping_address%', wpsc_display_purchlog_shipping_address(), $report );
    $report = str_replace( '%shipping_city%', wpsc_display_purchlog_shipping_city(), $report );
    $report = str_replace( '%shipping_country%', wpsc_display_purchlog_shipping_country(), $report ); 
```

对此（最初在 wpsc_transaction_results_functions.php 中）

```
 $report = apply_filters( 'wpsc_transaction_result_report', $report );
    $report = str_replace( '%purchase_id%', $report_id, $report );
    $report = str_replace( '%product_list%', $report_product_list, $report );
    $report = str_replace( '%total_tax%', $total_tax, $report );
    $report = str_replace( '%total_shipping%', $total_shipping_email, $report ); 
```

ETC...

但是在输入信用卡详细信息后出现以下错误 - 有人知道添加到报告中的简单方法吗？干杯伙计们

![付款后出错](../Images/bf8a45bd1ff136c1f08d1c80c82763a0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:27:00.953

我知道自从它打开以来已经有一段时间了，但我找到了解决方案。这有点混乱，但它有效。

因此，就在上面代码中的过滤器上方`wpsc-transaction_results_functions.php`，我创建了一个如下所示的数据库查询：

```
$cust_info = $wpdb->get_results("SELECT * FROM wp_wpsc_submited_form_data WHERE log_id = '$log_id'", ARRAY_A); 
```

然后我发现数组结果的哪些部分是我需要的信息，我通过添加：

```
echo '<pre>';
print_r ($cust_info);
echo '</pre>'; 
```

然后我下订单，数组出现在交易结果屏幕上。所以我然后设置变量...

```
$first_name = $cust_info[0]['value'];
$last_name = $cust_info[1]['value'];
$address_1 = $cust_info[2]['value'];
$city = $cust_info[3]['value']; 
```

然后我创建了简码，即

```
$message = str_replace( '%first_name%', $first_name, $message ); 
```

并且不要忘记删除`print_r ($cust_info);`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:43:06.257

在寻找类似问题时发现了这篇文章...
我建议使用 wpsc 的商店样式插件。 [http://haet.at/wp-ecommerce-shop-styling](http://haet.at/wp-ecommerce-shop-styling)

# sql-server - “NOEXEC ON”中的有趣行为

> ID：10536756
> 
> 赞同：12
> 
> 时间：2012-05-10T14:58:25.373
> 
> 标签：sql-server, tsql

当我用 编写一些 T-SQL 查询时`NOEXEC ON`，我经历了 SQL Server 的有趣行为，我很好奇它为什么会发生。有时我只得到

> 命令成功。

消息如我所料，但有时我收到一个或多个

> （0 行受影响）

消息。

我知道该`SET NOEXEC ON`命令编译查询但不执行它，所以我认为我不应该得到任何

> （0 行受影响）

消息。

在第一个示例中，一切看起来都很正常。

```
SET NOEXEC ON
INSERT INTO Test (column1) VALUES ('etc') 
```

结果：

> 命令成功。

但在第二个例子中，我认为出了点问题......

```
SET NOEXEC ON
DELETE FROM Test 
```

结果：

> （0 行受影响）

在第三个示例中，我使用了临时表：

```
CREATE TABLE #tmp (id INT IDENTITY(1, 1), idX INT)

SET NOEXEC ON
INSERT INTO #tmp (idX) VALUES (1)
DELETE FROM Test

SET NOEXEC OFF
DROP TABLE #tmp 
```

结果：

> （0 行受影响）

最后我只添加`GO`到我的查询中，我认为结果很有趣

```
CREATE TABLE #tmp (id INT IDENTITY(1, 1), idX INT)
SET NOEXEC ON
GO

INSERT INTO #tmp (idX) VALUES (1)
DELETE FROM Test

SET NOEXEC OFF
DROP TABLE #tmp 
```

结果：

> （0 行受影响）
> 
> （0 行受影响）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:40:58.827

尽管这可能不是您问题的答案：

但是当你删除

```
SET NOEXEC ON 
DELETE FROM Test 
```

如果您向`DELETE`STATEMENT 添加 where 条件，例如`DELETE FROM Test WHERE COLUMN1='etc'`

你会得到想要的结果...这种行为可能是因为我们执行了 DDL 和 DML 语句。

我还分析了第三种情况，如果您在临时表中插入它会给您（0 行受影响），但如果在某个数据库或永久表上完成相同的插入，它会给出（命令成功完成。）

这里可能是因为临时表和永久表。

对于第四个，您添加了一个`GO`：

`GO`将执行相关的 sql 命令 n 次。

因此，如果您单独执行插入语句和删除语句都有一些返回值并且`GO`正在将它们添加到批处理计划中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:24:06.277

我在 SQl Server 2005 和 2008 上重现了该行为，因此它不是 R2 独有的，并且插入发生的相同事情发生在更新语句中，因此删除似乎是例外。甚至截断（这几乎是一个删除获取标准消息）

我还认为它可能是 SQL Server Management Studio 的东西，但不是，我在另一个工具上进行了测试，甚至在 SQLCMD 上运行它并且可以看到相同的行为：

![在此处输入图像描述](../Images/ab6f313a906c07bb51643c25bd5470a4.png)

除了“命令成功”。消息未出现（这必须是 SSMS 专有的）

无论如何，我无法解释，但我能猜到。我想它的发生是因为 delete 语句做了其他（或更少） Insert 和 Update 没有做的事情。编译过程分为四个部分：解析、规范化、编译和优化。我假设这些步骤中的某些内容由 delete 语句以不同的方式完成，这就是我们得到不同结果的原因

# ruby-on-rails - 我在哪里将这个咖啡脚本放在 rails 3.2 中？

> ID：10536758
> 
> 赞同：0
> 
> 时间：2012-05-10T14:58:30.953
> 
> 标签：ruby-on-rails, coffeescript, ruby-on-rails-3.2

我的控制器在 app/controllers/admin/customer_service/tickets_controller.rb

我写了一个tickets.js.coffee 脚本用于显示视图......

只是想知道我把它放在哪里，自动包含在内？

应用程序/资产/javascript/admin/customer_services/tickets.js.coffee ？

我尝试过的一切都不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:01:08.190

在您的`application.js`文件中，有关于要包含哪些文件的指令。确保包含您的文件，并且应该这样做。（理所当然地认为您没有更改资产管道默认配置）。

有关更多信息，请参见[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)。

# ios - 按下 TextField 时向上移动 UIView

> ID：10536760
> 
> 赞同：1
> 
> 时间：2012-05-10T14:58:41.750
> 
> 标签：ios, xcode, uitextfielddelegate

我有 2 个文本字段，如果单击文本字段（在纵向模式下），键盘不会隐藏文本字段。但是当我更改为 Landscape 时，键盘会覆盖 textFields。我不知道如何在委托方法（textFieldShouldBeginEditing，textFieldShouldEndEditing）中设置帧大小，以便它可以在纵向和横向上工作。或者我应该使用滚动视图吗？![在此处输入图像描述](../Images/0ae4f00521e97b5a870ddb0dd41fcd6b.png)

![在此处输入图像描述](../Images/03f232c61e44b995400c896ccff1b4d2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:45:17.540

您必须使用 a`scrollView`并将其他 UI 元素作为`ScrollView`. 并且框架大小`scrollView`也应该使用整个窗口大小`Landscape Mode`（为此您需要学习`autoresizingmask`）..然后当您调用`textField`and时，即使您的键盘在视图中`keyboard appears`，您也需要减小框架的大小以滚动..`scrollView`

下面是我的 textFieldDidBeginEditing 和 textFieldDidEndEditing 方法的代码：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: 0.2];
    scrollView.frame = CGRectMake(0,0,320,150); 
    [scrollView scrollRectToVisible:textField.frame animated:YES];
    [UIView commitAnimations];

}

- (void)textFieldDidEndEditing:(UITextField *)textField
{

    [self autoCalculateDownPayment];
    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: 0.2];
    scrollView.frame = CGRectMake(0,0,320,416);
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:02:58.720

我无法给你一个 100% 确定的答案，既因为它有点主观，也因为我无法真正看到你的应用程序（打印屏幕会很好）。但是，在我看来，a`UIScrollView`将是一个很好的答案。另一种选择是为您的 动画制作动画`UITextField`，以便在键盘出现时它可以“向上”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:06:50.467

`(void)textFieldDidBeginEditing:(UITextField *)textField`您应该将视图控制器的框架设置为在方法的屏幕中心显示编辑框（例如） 。计算应取决于方向。并将框架设置为原始的`(void)textFieldDidEndEditing:(UITextField *)textField`.

还有不同的方法，例如使用滚动视图并在触摸编辑框时更改其内容偏移量。

# c# - 如何将总数除以给定因素和下限？

> ID：10536765
> 
> 赞同：0
> 
> 时间：2012-05-10T14:58:56.150
> 
> 标签：c#, algorithm, math, distribution, boundary

我想问：

*   我有任何正整数，比如说：`10`
*   然后我得到随机整数（它们也是随机数），比方说：`5, 7, 8`
*   我想计算浮点数，例如：`5*x + 7*x + 8*x = 10`
*   这一刻我明白了，但我想有一个共同的下限（比方说**`3`**），例如：

> 5 * x > 3
> 7 * x > 3
> 8 * x > 3

*   可以更正数字（比率）以达到此状态，因此在此特定示例中，它将如下所示：

> ```
> sum = 5 + 7 + 8 = 20
> x = 10 (total) / 20 (sum)
> x = 0.5
> 
> results: 5*0.5 + 7*0.5 + 8*0.5 = 2.5 + 3.5 + 4 = 10 (total) 
> ```

到目前为止一切都很好，但`2.5`现在低于给定的最小值。限制`3`，那么如何解决这个问题！

有可能吗，如果可以，怎么做？（最好在 C# 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:29:23.887

让我们以您的为例，看看我们将如何解决它。

我将使用 5x 7x 8x 更改为使用 5x 7y 8z，因为已经决定这些必须更改以适应要求，因此不会全部相同。

```
So currently you get a total answer of 10 by having 

5 times 0.5 = 2.5
7 times 0.5 = 3.5
8 times 0.5 = 4 
```

但是，5 乘以 0.5 不大于 3

因此，要使 5 倍 x 至少 3，我们必须将总数增加 0.5

因为 3（您至少想要的数字）- 2.5（您拥有的数字）是 0.5

所以 TOTAL 必须增加 0.5。

作为 x must = 3 的 5 倍，我们可以看到 x must = 3 除以 5，得到 0.6

```
now lets recalculate your sum

5 times 0.6 = 3
7 tiems 0.5 = 3.5
8 times 0.5 = 4 
```

加起来= 10.5 ...啊，球。

好的，所以我们可以看到 y 或 z 必须变小以确保答案仍然是 10

所以让我们选择 8 次 z = 4（因为 4 是 3 的进一步，并且会给我们最背风的方式）

0.5 除以 8 = 0.0625

所以 z 必须减少 0.0625 以抵消从 5 倍 x 增加的 0.5

所以 z 现在 = 0.5 - 0.0625 即 0.4375

```
lets redo your sum with these new numbers!

5 times 0.6 = 3
7 times 0.5 = 3.5
8 times  0.4375 = 3.5 
```

3 加 3.5 加 3.5 = 10！我们成功了！耶

我希望这有帮助！如果不是很好，我还是很喜欢这样做：D

总而言之，我们必须增加 x 以使 5x 至少为 3，但 x 的增加意味着答案大于 10，因此 y 或 z 必须减少总增加量来抵消这一点，我们将增加量除以通过其他数字之一，计算出我们需要从 z 或 y 中减去多少才能使其再次成为完美的 10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:08:23.133

你的要求是矛盾的。如果 x 是单值，则不可能保证 5*x + 7*x + 8*x = 10 同时 5*x > 3。如果你可以使用 5*x + 7*y + 8*z = 10，那么如果你有 3*value_count < 10 但这是我想的其他任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:10:58.187

看来你必须先解决一个任务，然后才能编码。让我们看看你给定的条件你所有乘以 X 的数字必须大于 3，这就是为什么它们的最大计数应该是 6，因为 7 * 3 已经是 21，大于 20。其次，取决于你的数字，我们必须计算数字的最小值。如果它是 6，我们有除法 20 到 6 = 3 的最小值，如果它是 5，那么我们有 20 % 5 = 4。只有在这两个条件下，我们才能计算“X”。

# c# - VS2010 找不到常见的 C# dll

> ID：10536766
> 
> 赞同：0
> 
> 时间：2012-05-10T14:58:58.387
> 
> 标签：c#, visual-studio-2010, dll

很抱歉这个简单的问题，但这一直在杀死我，我似乎无法找到答案。我正在使用 VS2010 用 C# 编写 Silverlight 5.0 应用程序。.NET 4.5.40805 SP1Rel。在代码隐藏的指令中，我添加了“使用 System.Diagnostics;” 所以我可以使用“Process（）”。虽然智能感知将为我完成“System.Diagnostics”，但我似乎无法使用位于其中的 Process 类。如果我尝试通过解决方案资源管理器“添加参考”，则 System.Diagnostics 不存在。

我使用了错误的指令吗？（[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)以及对象资源管理器表明我不是）有效添加这些引用是否有我遗漏的东西？请帮我解决这个反复出现的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:05:40.887

AFAIK，由于其核心 CLR 和安全考虑，Silverlight 无法访问 System.Diagnostics.Process。您链接到的 MSDN 页面没有可供查找的“Microsoft Silverlight”框架版本，这是一个很好的标记。Silverlight 中确实存在的任何类都将具有 MSDN 页面的“Silverlight”版本（不要查看“.NET Framework 4”版本）。

例如，System.Diagnostics 命名空间的 .NET Framework 4 版本显示了大量条目：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx) 但是，同一页面仅适用于 Silverlight显示一些：http: [//msdn.microsoft.com/en-us/library/system.diagnostics%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics%28VS.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:05:32.180

我的猜测是您的项目设置为使用框架的“客户端配置文件”版本。您可以通过右键单击您的项目并选择属性来更改此设置，然后在“应用程序”选项卡下，将目标框架更改为不使用“客户端配置文件”的内容。

如果不是这种情况，那么我不确定该建议什么，并希望比我更有知识的人做出回应。:)

# javascript - 在 Javascript 书签中使用 Facebook Javascript SDK 来更新用户状态？

> ID：10536772
> 
> 赞同：0
> 
> 时间：2012-05-10T14:59:12.793
> 
> 标签：javascript, facebook, oauth, facebook-javascript-sdk, bookmarklet

我只是想知道是否可以在 Javascript 书签中使用 Facebook Javascript SDK 和 OAuth 2.0，因为我无法让它工作。我实际上想要做的是通过我的书签更新我的 Facebook 状态，但似乎 FB.init 什么也没做。我也没有收到任何失败响应。

是否可以做这样的事情，或者我是否违反了任何沙箱？

我正在使用一个很好用的 jquery 小书签样板。初始化小书签时，我附加了 sdk

```
 var d = document,
        js = d.createElement('script'),
        root_node = d.createElement('div');

    js.id = 'facebook-jssdk';
    js.async = true;
    js.src = "http://connect.facebook.net/en_US/all.js";
    root_node.id = 'fb-root';
    d.getElementsByTagName('body')[0].appendChild(root_node);
    d.getElementsByTagName('head')[0].appendChild(js); 
```

然后调用 fb.init

```
 window.fbAsyncInit = function(){

        console.log('JS-SDK loaded');

        FB.init({ 
            appId: 'XXX', 
            status: true, 
            cookie: true,
            xfbml: true,
            oauth: true
        });

        FB.getLoginStatus(function(response){
            console.log(response);
        });

    }; 
```

实际上它看起来像“console.log（response）”永远不会被调用

谢谢，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:25:07.397

您可能应该让您的小书签在您的 Canvas URL 上打开一个新页面，然后从该页面发布。

# javascript - 使用 webkit 的移动垂直范围滑块

> ID：10536776
> 
> 赞同：0
> 
> 时间：2012-05-10T14:59:27.333
> 
> 标签：javascript, css, xui

我几乎完成了我的项目，但只有这最后一件事我已经推迟了一段时间。

我目前有几个滑块（都是水平的）——它们都可以工作。我目前正在使用移动范围滑块库，可以在这里找到：[https ://github.com/ubilabs/mobile-range-slider/blob/master/README.md](https://github.com/ubilabs/mobile-range-slider/blob/master/README.md)

有谁知道我可以如何扩展这个或者一些 CSS3 技巧来使其成为一个垂直滑块？

我想我可以通过使用变换和翻转它来获得幸运，但是滑动动作不跟踪（它只是轻微移动，当它移动时它不一定跟踪滑动动作，即向上滑动可能会向上移动滑块但是也可以将其向下移动 - 如果这有意义吗？）

我尝试的 CSS 是：

```
-webkit-transform: rotate(90deg); 
```

我目前只专注于 iPhone 和 Android - 任何其他移动平台都将是一个奖励，但在这个阶段不是必需的。

任何帮助或指示将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:32:01.793

尝试将 -webkit 用于 chrome 和 safari：

[http://css-infos.net/property/-webkit-appearance](http://css-infos.net/property/-webkit-appearance)

# .net - 选择一种方法来本地化大型 .NET 应用程序

> ID：10536784
> 
> 赞同：1
> 
> 时间：2012-05-10T14:59:48.463
> 
> 标签：.net, winforms, localization, gettext

我知道本地化 .NET 应用程序的问题在这里问了很多次。

但我怀疑使用 Resources 和 3-d 方资源编辑工具对大型 .NET 应用程序进行本地化的方法的有效性。

我正在考虑使用以下方法之一：

1.  为所有解决方案表单设置 Localizable=True，并使用 3-d 方资源编辑器，例如：Zeta Resource Editor，来编辑和管理资源。缺点：

    *   我们的解决方案有大约 100 个表单，对于 30 种额外的语言，将有 30*100 = 3000 个新的 resx 文件！
    *   与翻译人员互动的很多努力：每次产品更新后，我需要向他们发送纯文本的 excel 文件，并在每次语言更改后手动更新项目资源。
    *   语言文件的一部分（大部分？）总是过时的，因为翻译人员可能会在产品发布后完成他们的工作，我们不能在不重新编译项目的情况下包含他们的更改。
2.  使用基于自定义字典的类（如 GNU GetText），它将加载带有翻译的老式 ini 文件。缺点：需要做额外的工作，比如编写一个帮助工具来为翻译人员编辑ini文件。优点：新语言版本可能会在产品发布后作为单独的 ini 文件发布。

不幸的是，我无法比较这两种方式的性能。

**哪种方法更好？请分享您的经验！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:19:07.637

您确实应该坚持使用标准的 .NET 本地化系统 ( `ResourceManager`)。

解决您遇到的问题的一种方法（管理将各种语言的大量 .resx 文件导入到您的解决方案中，处理翻译交付的延迟）是在您的解决方案，但保持启用本地化。因此，从现在开始，您将仅使用英语资源构建您的解决方案，但仍具有加载附属程序集（如果存在）的能力。

然后，您可以建立一个不同的项目（称为本地化项目），其唯一目的是管理将您的英语资源翻译成各种语言。您必须定期将英语 resx 文件从您的主要解决方案同步到您的本地化项目（但这允许您以可控的方式进行同步，这将有助于与翻译人员打交道）。您收到的翻译将被检入该项目的源代码控制系统。

然后，您需要编写一些东西来从您的本地化项目构建您的附属程序集，并将它们放入您的纯英语版本中，从而为您提供具有所有本地化的构建。可以使用[Resgen.exe](http://msdn.microsoft.com/en-us/library/ccec7sz1%28v=vs.80%29.aspx)（创建 .resources 文件）和[Al.exe](http://msdn.microsoft.com/en-us/library/21a15yht.aspx)（创建 dll 文件）从 resx 文件构建附属程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:25:56.760

We use a large excel file with keys in the first column, and one column per language. A little script in the excel document spits out the necessary resx files (one per language), these resx files are then checked into the source tree.

Only the translation assembly will have satellite assemblies, and handles the translations for the entire application. So all other assemblies (UI etc.) will have no satellite assemblies.

In forms we use the keys as texts (for labels, buttons, captions) and recursively translate the forms when shown. For non-control texts we just use a single static class to fetch the translated text given a resource key with code.

This "single file" translation database works very well, and using excel is convenient since your translators probably will already have it installed and are familiar with it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T21:33:05.350

好吧，我当然不想在这里跑题，但是根据任何合理的定义，没有一个脚本可以完成需要完成的工作是简单或微不足道的。涉及的问题太广泛了。即使是最琐碎的脚本的编写成本也将远远超过购买成熟的翻译应用程序的成本。而且该应用程序几乎肯定会比脚本做的更多（甚至仅指基本功能）。

# jquery - 当另存为图像时得到水印或空白图像

> ID：10536785
> 
> 赞同：0
> 
> 时间：2012-05-10T14:59:53.783
> 
> 标签：jquery, image, drupal, watermark, galleria

我正在使用 Galleria 全屏主题。将该js代码放在我的主js文件中，不要右键单击：

```
$('img').live('contextmenu', function(e){
return false;
}); 
```

但不要在 IE Windows 上工作。所以，我想在另存为图像时获取水印或空白图像。因为我的形象很重要，想强力保护。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:05:00.233

如果你想在它们上面加水印，把水印放在外面，只向客户提供带水印的图像。任何使用 javascript 的解决方案都不起作用，因为用户可以简单地关闭 javascript。

# twitter-bootstrap - opa : 在导航栏中使用 dropdown_li

> ID：10536787
> 
> 赞同：1
> 
> 时间：2012-05-10T14:59:54.767
> 
> 标签：twitter-bootstrap, list, opa

我想将 dropdown_li 用于导航栏。Opa 文档说我应该在 WB.List 中使用它，但我不知道如何使用。

List 模块中没有将 xhtml 作为输入的方法。我尝试使用有序或无序的方法，但它失败了。

什么是正确的用途？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:25:45.720

前任 ：

```
WBootstrap.Navigation.nav([
  {custom_li=WBootstrap.Navigation.dropdown_li(toggle_html, none, nav_elt_list)}
], false) 
```

和 ：

*   toggle_html 一个用作切换的 xhtml 元素，
*   并且 nav_elt_list 是[http://doc.opalang.org/type/stdlib.widgets.bootstrap/WBootstrap/Navigation/elt的列表](http://doc.opalang.org/type/stdlib.widgets.bootstrap/WBootstrap/Navigation/elt)

# c++ - 避免 std::map::find() 的密钥构造

> ID：10536788
> 
> 赞同：25
> 
> 时间：2012-05-10T14:59:57.863
> 
> 标签：c++, c++11

假设我有一个`std::map<std::string, int>`. `std::string`可以与没有`std::string`临时变量的 C 字符串 (const char*) 进行比较。但是，`map::find()`似乎迫使我构建一个临时的`std::string`，这可能需要分配内存。我该如何避免这种情况？从概念上讲，这很容易，但 STL 似乎阻止了这一点。

```
#include <map>

int main()
{
    std::map<std::string, int> m;
    m.find("Olaf");
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-23T07:25:33.597

您的担忧是真实的，C++11 没有好的解决方法。

C++14 通过添加模板化重载来解决这个问题`std::map::find`——相关提案是[N3657](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3657.htm)。在 C++14 中，您的程序将如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <map>
#include <algorithm>

class std_string {
    char *m_s;
public:
    std_string() { m_s = nullptr; }
    std_string(const char* s) { puts("Oops! A new std_string was constructed!"); m_s = strdup(s); }
    ~std_string() { free(m_s); }
    std_string(std_string&& ss) = delete;
    std_string(const std_string& ss) = delete;
    std_string& operator=(std_string&& ss) = delete;
    std_string& operator=(const std_string& ss) = delete;

    bool operator< (const char* s) const { return strcmp(m_s, s) < 0; }
    bool operator< (const std_string& ss) const { return strcmp(m_s, ss.m_s) < 0; }
    friend bool operator< (const char* s, const std_string& ss) { return strcmp(s, ss.m_s) < 0; }
};

int main()
{
    {
        puts("The C++11 way makes a copy...");
        std::map<std_string, int> m;
        auto it = m.find("Olaf");
    }
    {
        puts("The C++14 way doesn't...");
        std::map<std_string, int, std::less<>> m;
        auto it = m.find("Olaf");
    }
} 
```

(`std::less<>`是广义的“小于”比较器，等同于`operator<`.C++03 和 C++11 具有此比较器的设计破坏版本，强制两个参数为相同类型。C++14 最终做到了对的。）

不幸的是，委员会似乎已经决定人们应该检查他们所有的 C++11 代码并更新每个容器以`std::less<>`用作比较器——这不仅仅是默认情况下发生的。这个决定没有充分的理由；这就是它的方式。（请参阅我上面关于设计破坏的评论。C++ 有一个坏习惯，即在几年后引入“真实”版本之前引入破坏版本。）

对于 C++11，`std::map::find`只有一个重载（采用 的那个`const Key&`），因此任何解决方法都必然涉及将`Key`类型更改为更便宜 - 我们不能只是摆弄比较器，因为当执行到达比较器时，我们已经将`find`'s 参数提升为`Key`类型。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <map>
#include <algorithm>

class std_string {
    char *m_s;
public:
    std_string() : m_s(nullptr) { }
    std_string(const char* s) : m_s(strdup(s)) { puts("Oops! A new std_string was constructed!"); }
    ~std_string() { free(m_s); }
    std_string(std_string&& ss) : m_s(nullptr) { std::swap(m_s, ss.m_s); }
    std_string(const std_string& ss) : m_s(strdup(ss.data())) { puts("Oops! A new std_string was constructed!"); }
    std_string& operator=(std_string&& ss) = delete;
    std_string& operator=(const std_string& ss) = delete;

    const char* data() const { return m_s; }

    bool operator< (const char* s) const { return strcmp(m_s, s) < 0; }
    bool operator< (const std_string& ss) const { return strcmp(m_s, ss.m_s) < 0; }
    friend bool operator< (const char* s, const std_string& ss) { return strcmp(s, ss.m_s) < 0; }
};

struct string_or_ptr {
    union {
        const char* ptr;
        alignas(std_string) unsigned char str[sizeof (std_string)];
    } m_u;
    bool m_deep;

    char const* & ptr() { return m_u.ptr; }
    std_string& str() { return *reinterpret_cast<std_string*>(m_u.str); }
    char const* const & ptr() const { return m_u.ptr; }
    std_string const& str() const { return *reinterpret_cast<const std_string*>(m_u.str); }

    string_or_ptr() : m_deep(false) { ptr() = ""; }
    string_or_ptr(const char* s) : m_deep(false) { ptr() = s; }
    string_or_ptr(std_string&& s) : m_deep(true) { new ((void*)&str()) std_string(std::move(s)); }
    string_or_ptr(const std_string& s) : m_deep(true) { new ((void*)&str()) std_string(s); }
    ~string_or_ptr() { if (m_deep) str().~std_string(); }
    std_string& operator=(std_string&& ss) = delete;
    std_string& operator=(const std_string& ss) = delete;

    operator const char*() const { return m_deep ? str().data() : ptr(); }

    bool operator< (const char* s) const { return strcmp((const char*)*this, s) < 0; }
    bool operator< (const std_string& ss) const { return (const char*)*this < ss; }
    bool operator< (const string_or_ptr& sp) const { return strcmp((const char*)*this, (const char*)sp) < 0; }
    friend bool operator< (const char* s, const string_or_ptr& sp) { return strcmp(s, (const char*)sp) < 0; }
    friend bool operator< (const std_string& ss, const string_or_ptr& sp) { return ss < (const char*)sp; }
};

int main()
{
    {
        puts("The C++11 way...");
        std::map<std_string, int> m;
        auto it = m.find("Olaf");
    }
    {
        puts("The C++11 way with a custom string-or-pointer Key type...");
        std::map<string_or_ptr, int> m;
        auto it = m.find("Olaf");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:15:19.573

实际上没有办法强制`find`使用与用于创建`map`. 如果您可以将不同的传递给`find`，它如何保证两个比较将提供相同的顺序？

相反，只需考虑以下情况：

1）你`char*`在你的程序中传递。在这种情况下，不要那样做。改为使用`std::string`，如果需要，创建一次，尽可能接近起源。然后不需要转换。

2）您正在尝试查找字符串文字。在这种情况下，为什么密钥是 a `string`？将键改为命名良好的枚举类型：

```
enum names { OLAF };
map<names, int> m;
m.find(OLAF); 
```

3) 您想同时查找*字符串*和 C 字符串文字。在这种情况下，我将创建一个由枚举索引但在 main 开始时构建一次的字符串全局查找表。然后你会打电话给像`m.find(global_strings[OLAF]);`

编辑：您似乎非常关注/关注`string`这里的性能影响。您是否分析过您的应用程序并发现`string`分配是您应用程序时间的重要部分？我当然会在嵌入式系统/设备上相信这一点。

此外，您已经标记了您的问题 C++，但您似乎完全拒绝使用 C++ 的内置字符串功能，该功能远远超过“降低性能成本”。它提供了各种有用的功能/方法/运算符，但最重要的是它为您管理内存，因此您无需花费数天或数周时间寻找那些毫无疑问会突然出现的真正阴险的错误。

如果您正在从网络读取可变长度数据，我无法完全掌握两者之间的性能差异，除了使用为您提供一些安全和内存管理之外的其他`char* buffer = new char[needed_size];`东西。`std::string s; s.resize(needed_size);``string`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:49:07.730

如果从文字构造字符串对您来说确实是一个衡量的性能瓶颈，您可以使用自己的类而不是`std::string`保存字符串或指向文字的指针的类。缺点是一些额外的复杂性，加上将指针的大小添加到要插入容器中的元素。请注意，根据 的要求，该值是不可变的`map`，因此存储 的结果是安全的`c_str`。

```
class mystring
{
    std::string  str;
    const char * value;
public:
    mystring() : value(NULL)
    {
    }
    void setString(const std::string & s)
    {
        assert(value == NULL);
        str = s;
        value = str.c_str();
    }
    void setLiteral(const char * s)
    {
        assert(value == NULL);
        value = s;
    }
    bool operator<(const mystring & rhs)
    {
        return strcmp(literal, rhs.literal) < 0;
    }
};

std::map<mystring, int> m;
mystring text;
text.setString(some_key);
m.insert(std::make_pair(text, some_data));
// ...
mystring key;
key.setLiteral("Olaf");
m[key] = new_value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-01T07:49:44.413

没有办法专门为`map::find()`函数定义比较器。相反，我建议您使用创建比较器 (myOwnCmp) 并`std::map<char*, int, myOwnCmp>`为您的程序 delcare a。对于非常大的程序或当测试用例的数量非常多时，它会相对更快，`std::map<string, int>`因为通过调用字符串构造函数来创建字符串并随后调用其析构函数会消耗大量时间。使用 const char* 作为键只会涉及指针比较。

您唯一需要注意的是，当您通过覆盖插入函数或创建自己的添加函数来填充地图时，创建一个单独的 char* 本地副本作为参数，因为指针有可能以后可以修改或删除。因此，您要确保在将 char* 添加为地图的键之前保留了 char* 的本地副本。

代码会是这样的： -

```
 struct myOwnComp {
        bool operator()(const char* a, const char* b) const {
            return (strcmp(a, b) < 0);
        }
    };

std::map<char*, int, myOwnComp> mymap;

void addToMap(char*& ref, int value)
{
    char *key = new char[strlen(ref) + 1]{};
    std::copy(ref, ref + strlen(ref), key);
    mymap[key] = value;
} 
```

# python - 使用 Python 测量两个事件之间的时间（像素颜色变化）会将所有内容冻结几秒钟

> ID：10536791
> 
> 赞同：0
> 
> 时间：2012-05-10T15:00:09.533
> 
> 标签：python, timer, keyboard, mouse

我为 Windows 编写了一个非常简单的工具来测量 Python 2.7 中两个事件之间的时间。具体来说：

1.  用鼠标指向要作为参考的像素，然后按“左控制”键
2.  当您想启动计时器时，您单击（任意位置）

代码如下：

```
import pyHook, pythoncom
import win32api
import sys
import time
from ctypes import windll
#from PIL import ImageGrab # alternative solution to windll

class Timer:
    def __init__ (self):
        pass

    def Reset (self):
        self.t = time.clock ()

    def Stop (self):
        self.t = time.clock () - self.t

    def Get (self):
        return self.t

def GetPixelColor (x, y):
    dc = windll.user32.GetDC (0)
    return windll.gdi32.GetPixel(dc, x, y)

class Test:
    def __init__ (self):
        self.timer = Timer ()
        self.color = -1
        self.ready = False

    def OnKbEvent (self, e):
        if e.Key == "Lcontrol":
            self.x, self.y = win32api.GetCursorPos ()
            self.color = GetPixelColor (self.x, self.y)
            self.ready = True
            print ("Control point selected")
            print (self.color)

        return True

    def OnMouseEvent(self, e):
        if self.ready:
            if e.Message == 513: # mouse left down
                self.timer.Reset ()
                while self.color == GetPixelColor (self.x, self.y):
                    time.sleep (0.100)
                self.timer.Stop ()
                print "%.5f" % self.timer.Get ()
                sys.exit ()

        return True

t = Test ()
hm = pyHook.HookManager ()
hm.KeyDown = t.OnKbEvent
hm.MouseAllButtonsDown = t.OnMouseEvent
hm.HookKeyboard ()
hm.HookMouse ()

pythoncom.PumpMessages () 
```

该脚本有效，但在我的机器（Win7）上比正常需要多 5 秒。在这段时间里，一切似乎都凝固了。

关于我做错了什么/如何改进脚本的任何提示？TIA

# javascript - 使用 javascript 以编程方式调整 rich:modalpanel (version 3.x)

> ID：10536793
> 
> 赞同：1
> 
> 时间：2012-05-10T15:00:10.553
> 
> 标签：javascript, resize, richfaces, panel, client-side

有谁知道这是否可能，如果可以，如何在打开时使用 javascript 以编程方式调整richfaces modalpanel 的大小。我想在面板的控件部分添加一个展开图标来展开面板。

通过 bean 设置新的宽度和高度的面板重新渲染可能是一种方法，但我真的很想在客户端这样做。

# java - java netty/nio connect 在 windows 2003 上产生过多的中断

> ID：10536798
> 
> 赞同：1
> 
> 时间：2012-05-10T15:00:18.300
> 
> 标签：java, nio, netty

我在一台机器上使用 netty nio 进行客户端服务器通信。

除了某些 Windows 2003 机器外，相同的客户端/服务器程序在许多服务器上都可以正常工作。

如果服务器未运行并且客户端尝试连接（在某些超时后导致异常），则服务器上的中断数量会急剧增加。

通常中断数（由 Windows 性能 gui 显示）平均为 300/s。当客户端尝试连接时，中断会上升到大约 1000/s。

只要客户端正在运行，即使它没有尝试重新连接并且一旦能够连接，它也会保持高中断/秒。

如果客户端可以在第一次尝试时连接到服务器，则不会发生这种情况。

增加的中断计数会导致服务器时钟的强烈漂移。

**关于发生了什么以及如何避免它的任何想法或建议？**

阅读后：http: [//blogs.technet.com/b/markrussinovich/archive/2008/04/07/3031251.aspx](http://blogs.technet.com/b/markrussinovich/archive/2008/04/07/3031251.aspx)

我运行 KernRate 得到以下结果：

当客户端尝试连接时：

```
P0     K 0:00:00.015 ( 0.2%)  U 0:00:00.031 ( 0.4%)  I 0:00:07.265 (99.4%)  DPC
 0:00:00.000 ( 0.0%)  Interrupt 0:00:00.000 ( 0.0%)
   Interrupts= 6117, Interrupt Rate= 837/sec.

Context Switches     ,       307153,         42004/sec.
System Calls         ,       404125,         55265/sec.
Page Faults          ,         1050,         144/sec.
I/O Read Operations  ,          143,         20/sec.
I/O Write Operations ,          386,         53/sec.
I/O Other Operations ,         1407,         192/sec.
I/O Read Bytes       ,        14712,         103/ I/O
I/O Write Bytes      ,        49575,         128/ I/O
I/O Other Bytes      ,       182356,         130/ I/O

 Module                                Hits   msec  %Total  Events/Sec
 intelppm                              11144       7311    97 %    38106962
 ntoskrnl                                196       7311     1 %      670222
 hal                                      69       7311     0 %      235945
 win32k                                   53       7311     0 %      181233
 ramirr2                                   6       7311     0 %       20517
 afd                                       2       7311     0 %        6839
 tcpip                                     2       7311     0 %        6839
 Ntfs                                      1       7311     0 %        3419
 bxvbdx                                    1       7311     0 %        3419 
```

当客户端进程未运行时：

```
P0     K 0:00:00.015 ( 0.3%)  U 0:00:00.000 ( 0.0%)  I 0:00:04.546 (99.7%)  DPC
 0:00:00.000 ( 0.0%)  Interrupt 0:00:00.000 ( 0.0%)
   Interrupts= 2213, Interrupt Rate= 485/sec.

                              Total      Avg. Rate
Context Switches     ,         9398,         2060/sec.
System Calls         ,        29104,         6379/sec.
Page Faults          ,         2158,         473/sec.
I/O Read Operations  ,          130,         28/sec.
I/O Write Operations ,          273,         60/sec.
I/O Other Operations ,          619,         136/sec.
I/O Read Bytes       ,        12029,         93/ I/O
I/O Write Bytes      ,        37754,         138/ I/O
I/O Other Bytes      ,        92840,         150/ I/O

 Module                                Hits   msec  %Total  Events/Sec
 intelppm                               7208       4561    99 %    39508879
 ntoskrnl                                 20       4561     0 %      109625
 win32k                                   10       4561     0 %       54812
 hal                                       4       4561     0 %       21925
 ramirr2                                   3       4561     0 %       16443
 tcpip                                     3       4561     0 %       16443
 Ntfs                                      1       4561     0 %        5481 
```

——罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:42:50.453

此问题已在错误[356 的错误修复中得到解决 - HashedWheelTimer.waitForNextTick() 中的错误？](https://github.com/netty/netty/issues/356)

这个 bug 是由 windows 在 java 调用 Thread.sleep() 时产生中断引起的，如果时间低于 10 毫秒，则通过不休眠来解决。

应用此更改后，中断率保持不变。

# oracle - SQL*Plus 在远程连接上插入查询时“崩溃”

> ID：10536804
> 
> 赞同：0
> 
> 时间：2012-05-10T15:00:31.653
> 
> 标签：oracle, sqlplus

我们有两台 CentOS 6.2 机器。一个运行 Oracle 11g2，另一个运行我们自己的定制软件。该软件从命令行调用 SQL*Plus 来执行一系列查询。其中一个查询使 SQL*Plus 崩溃，没有发出任何警告/错误，只是直接进入命令行并以代码 1 退出。

我尝试从 SQL*Plus 手动运行此查询，同样的问题。我试图在本地数据库服务器上运行它，它只是工作。

运行我们自己的软件的机器上的设置：我从数据库服务器复制了 $ORACLE_HOME 内容。将 ORACLE_HOME 设置为该路径 将 LD_LIBRARY_PATH 设置为 $ORACLE_HOME/lib 将 PATH 设置为 $PATH:$ORACLE_HOME/bin

SQL*Plus 调用完美无缺，只是不适用于特定类型的查询。有什么建议么？

```
insert into DPF_RT_DATA_ANALYSIS (
run_id,
entity_name,
table_state,
state_type,
column_name,
ctype,
function,
step,
value,
occurences
)
select 
'&RUN_ID',
'MUT_BAG_WPL_GMT',
'ANALYSIS_MUT_BAG_WPL_GMT',
'ANALYSIS',
'WOONPLAATS',
'Varchar2',
'MIN_FREQ',
step,
value,
occ
from (
select rownum step, colname value, freq occ
from (
select WOONPLAATS colname, count(WOONPLAATS) freq
from MUT_BAG_WPL_GMT
group by WOONPLAATS
order by freq asc
) where rownum <= 20
); 
```

有人遇到过这个问题或对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:04:02.493

问题是由于 SQL*Plus 11.2.0.1.0 中的一个错误造成的……我们已经更新到 11.2.0.3.0，我们的问题似乎已经消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:03:51.887

尝试为您的派生表起别名，例如：

```
insert into DPF_RT_DATA_ANALYSIS (
    run_id,
    entity_name,
    table_state,
    state_type,
    column_name,
    ctype,
    function,
    step,
    value,
    occurences
    )
select '&RUN_ID',
    'MUT_BAG_WPL_GMT',
    'ANALYSIS_MUT_BAG_WPL_GMT',
    'ANALYSIS',
    'WOONPLAATS',
    'Varchar2',
    'MIN_FREQ',
    step,
    value,
    occ
from (
    select rownum step,
        colname value,
        freq occ
    from (
        select WOONPLAATS colname,
            count(WOONPLAATS) freq
        from MUT_BAG_WPL_GMT
        group by WOONPLAATS
        order by freq asc
        ) a
    where rownum <= 20
    ) b; 
```

# web - 码头不上来

> ID：10536805
> 
> 赞同：1
> 
> 时间：2012-05-10T15:00:37.880
> 
> 标签：web, webserver, jetty

我在 Linux 平台上以编程方式启动码头。第一次它运行良好，但下一次它只是挂起，当我进入浏览器时，我只看到目录列表，而不是实际的网页。我在 RHEL5 机器上使用的 Jetty 版本是 6.1.26（我知道它较旧，但它对我们来说是标准的）。

问题是当我删除临时文件夹（我使用 webapp.setTempDirectory(tempDirectory); 我的 webapps 得到扩展的地方设置）并重新启动码头时，它工作正常。

请帮忙。

提前致谢。

web.xml 仅供参考

` `xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee/web-app](http://java.sun.com/xml/ns/j2ee/web-app)_2_4.xsd" version="2.4"> Name Struts
action org.apache.struts.action.ActionServlet`

 ````
 <init-param> 
        <param-name>config</param-name> 
        <param-value>/WEB-INF/config/struts-config.xml</param-value> 
    </init-param> 

    <init-param> 
        <param-name>debug</param-name> 
        <param-value>3</param-value> 
    </init-param> 

    <init-param> 
        <param-name>detail</param-name> 
        <param-value>3</param-value> 
    </init-param> 

    <load-on-startup>1</load-on-startup> 
</servlet> 

<servlet-mapping> 
    <servlet-name>action</servlet-name> 
    <url-pattern>*.do</url-pattern> 
</servlet-mapping>

<servlet>
    <servlet-name>DisplayChart</servlet-name>
    <servlet-class>org.jfree.chart.servlet.DisplayChart</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DisplayChart</servlet-name>
    <url-pattern>/servlet/DisplayChart</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>DisableDynamicJSPReloading</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>reload-interval</param-name>
        <param-value>-1</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet>

<servlet>
    <display-name>Jersey Webservice Servlet</display-name> 
    <servlet-name>springDispatcher</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param> 
        <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name> 
        <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value> 
    </init-param> 
    <init-param> 
        <param-name>com.sun.jersey.config.property.packages</param-name> 
        <param-value>com.rest.controller</param-value>
    </init-param> 
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>springDispatcher</servlet-name>
    <url-pattern>/webservice/*</url-pattern>
</servlet-mapping>

<listener>      
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<listener>
    <listener-class>com.web.listener.BatchProgressorContextListener</listener-class>
</listener>

<context-param>      
    <param-name>contextConfigLocation</param-name>      
    <param-value>classpath:beans-spring.xml</param-value>   
</context-param> 

<welcome-file-list>
    <welcome-file>initForm.jsp</welcome-file>
    <welcome-file>index.jsp</welcome-file> 
    <welcome-file>index.html</welcome-file> 
    <welcome-file>index.htm</welcome-file> 
</welcome-file-list> 

</web-app> 
```` 

```

# javascript - 在 Web 应用程序中放置 JavaScript 单元测试文件的位置

> ID：10536806
> 
> 赞同：3
> 
> 时间：2012-05-10T15:00:39.097
> 
> 标签：javascript, qunit, module-packaging

我正在开发一个组件（这是一个 Web 应用程序 - struts - 作为 WAR 部署），并且我开发了一些新的 Javascript，我为此编写了一些 QUnit 测试。我不知道我需要将 QUnit 附带的文件（qunit.js、qunit.ccs、myTestClass.js 和 hmtl 页面）放在哪里，这样它们就不会被打包和部署在生产工件中。

例如，所有的 java 单元测试都进入一个 test 文件夹。但是 html/jsp/js 文件需要位于 webapp 文件夹中的某个位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:18:38.237

我遇到了同样的问题，我将它们放在 webapp 之外的目录中，并创建了一个 .html，它调用使用相对路径加载实际的 js 库。我认为人们目前还没有这个问题的标准位置。

我正在使用 IntelliJ Idea，因此很容易在 webapp 之外定义一个不会进入最终战争的文件夹。

希望这可以帮助。

# cordova - iPhone 摄像头是否需要我编写 XCode 项目？

> ID：10536808
> 
> 赞同：0
> 
> 时间：2012-05-10T15:00:44.587
> 
> 标签：cordova

根据[PhoneGap 文档](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner)，我可以像这样编写 JavaScript 概念验证：

```
window.plugins.barcodeScanner.scan(
    function(result) {
        if (result.cancelled)
            alert("the user cancelled the scan")
        else
            alert("we got a barcode: " + result.text)
    },
    function(error) {
        alert("scanning failed: " + error)
    }
) 
```

但它随后开始谈论一个 XCode 项目。

问：我需要编写 XCode 应用程序才能使用 PhoneGap 的条形码扫描仪功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:04:44.367

是的，您需要设置 XCode。PhoneGap 是一个可用于构建跨平台移动应用程序的框架。JavaScript API 在所有平台上都是相同的，但每个应用程序都必须由 XCode 或 Eclipse 等原生工具构建。

有一个名为[PhoneGap Build](https://build.phonegap.com/)的服务，您可以将代码上传到该服务，以便在云中构建应用程序，但我认为它还不支持 BarcodeScanner。

# simperium - Simperium 与文档库 Core Data 应用程序

> ID：10536816
> 
> 赞同：1
> 
> 时间：2012-05-10T15:01:19.220
> 
> 标签：simperium

是否可以将 Simperium (http://simperium.com) 与基于文档的 Core Data 应用程序一起使用？该示例是一个“鞋盒”风格的应用程序，我没有看到任何设置文档 ID 或其他内容的选项。

如果没有，是否可以使用这样的选项扩展 Simperium？

服务看起来真的很棒！很想看看它是否像看起来那样可以很好地替代 iCloud（从后端访问数据是一个非常好的功能！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:34:36.007

尚不支持基于文档的 Core Data 应用程序，但我们认为这是一个很好的功能请求。谢谢，很高兴你认为这很棒！

# forms - Zend 框架表单：在重用表单时，我调用了 removeElement，但 IsValid 在删除的元素上失败了......为什么？

> ID：10536817
> 
> 赞同：0
> 
> 时间：2012-05-10T15:01:23.557
> 
> 标签：forms, zend-framework

我的一个表格有一些必填字段，而有些则没有，可以说“姓名”是必需的，但“注释”不是：

```
class Form_CompanyForm extends Zend_Form{
public function init(){
    // add element: ID textbox
    $ID = $this->createElement('hidden', 'id');
    $this->addElement($ID);

    // add element: name textbox
    $name = $this->createElement('text', 'name');
    $name->setLabel('name:');
    **$name->setRequired(TRUE);**
    $name->setAttrib('size',100);
    $name->setAttrib('maxlength',255);
    $name->addFilters(array(new Zend_Filter_StringTrim()));
    $this->addElement($name);

        // add element: note text area
    $note = $this->createElement('textarea', 'note');
    $note->setLabel('note:');
    **$note->setRequired(FALSE);**
    $note->setAttrib('cols',50);
    $note->setAttrib('rows',4);
    $note->addFilters(array(new Zend_Filter_StringTrim()));     
    $this->addElement($note); 
```

...

我的一个控制器调用此表单并使用其所有字段。这工作正常，并且名称字段的验证发生。

但是...另一个控制器使用相同的表单，只是为了更改注释...为此，我使用 removeElement() 从表单中删除名称：

```
public function editcompanynoteAction(){
    $mod = new Model_Company();
    $frm = new Form_CompanyForm();
    $frm->removeElement('name');        
    $frm->setAction('/companyland/editcompany');
    $frm->setMethod('post');
    if($this->getRequest()->isPost()){
        if($frm->isValid($_POST)){ 
```

...

表单正确显示，只存在注释字段，如预期的那样

**但是**在保存表单后，验证失败，因为需要“名称”字段......

我是 Zend 的新手，我不明白为什么表单验证会失败......在一个被删除的元素上。

网上有关于使用 removeElement 的示例...我尝试了 clearValidators() 没有成功，并查看了[Zend 表单验证](https://stackoverflow.com/questions/1707002/zend-form-validation)

评论说“您应该在调用 $form->isValid() 之前删除验证器。”

但是怎么做？

您能给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:43:52.033

把这条线

```
$frm->getElement('name')->setRequired(false); 
```

前

```
$frm->removeElement('name'); 
```

# python - 在 Python 中调用实例变量时遇到问题

> ID：10536825
> 
> 赞同：1
> 
> 时间：2012-05-10T15:01:54.460
> 
> 标签：python, class, object, python-2.7, instance-variables

我现在才刚刚开始在课堂上学习，但遇到了一些我不明白的事情。假设我有一堂课...

```
class Area(object):
    def __init__(self, name, items):
        self.name = name
        self.items = items 
```

现在，如果我以这种方式启动 Area 的实例：

```
impala = Area("Impala", ["shotgun", "salt"]) 
```

然后调用一个变量，说：

```
print impala.items 
```

它工作得很好。但是，如果我尝试以这种方式启动它：

```
class impala(Area):
    def __init__(self):
        self.name = "Impala"
        self.items = ["shotgun", "salt"] 
```

然后尝试做同样的事情它给了我一个错误：“类型对象'impala'没有属性'items'”

有人可以告诉我在第二个示例中我做错了什么以及为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:04:54.087

您为您的类和变量使用相同的名称。`impala`并且`impala`，我假设 Python 正在访问类，而不是实例。

为避免这种情况，我建议您的变量名称遵循[PEP-8](http://www.python.org/dev/peps/pep-0008/)`CapWords` ，在和局部变量中给出类名称`lowercase_with_underscores`。当然，在命名项目时也应该小心，不要在同一个命名空间中有两个具有相同名称的事物。

```
>>> class Area(object):
...     def __init__(self, name, items):
...         self.name = name
...         self.items = items
... 
>>> class Impala(Area):
...     def __init__(self):
...         self.name = "Impala"
...         self.items = ["shotgun", "salt"]
... 
>>> impala = Impala()
>>> impala.items
['shotgun', 'salt'] 
```

# xslt - XSLT 错误产生“不明确的规则匹配”

> ID：10536828
> 
> 赞同：7
> 
> 时间：2012-05-10T15:02:11.943
> 
> 标签：xslt, match

我正在尝试针对两种情况进行匹配：

1.  字符串包含除数字以外的字符
2.  字符串超过 8 个字符。

所以 XSLT 是：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="record[translate(employeeNumber, 'abcdefghijklmnopqrstuvwxyzABCDEFGHILKLMNOIPQRSTUVWXYZ!£$%^', '')]"/>
    <xsl:template match="record[string-length(employeeNumber) &lt; 9]"/>
</xsl:stylesheet> 
```

测试数据为：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <records>
        <record>
            <employeeNumber>12345678</employeeNumber>
        </record>
        <record>
            <employeeNumber>1234567A</employeeNumber>
        </record>
        <record>
            <employeeNumber>12345678A</employeeNumber>
        </record>
        <record>
            <employeeNumber>123456789</employeeNumber>
        </record>
    </records>
</request> 
```

这是应该返回的：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <records>
        <record>
            <employeeNumber>1234567A</employeeNumber>
        </record>
        <record>
            <employeeNumber>12345678A</employeeNumber>
        </record>
        <record>
            <employeeNumber>123456789</employeeNumber>
        </record>
    </records>
</request> 
```

但是，正如我在 Oxygen 中所说，我收到了错误：

`Severity: warning Description: Ambiguous rule match for /request[1]/records[1]/record[1] Matches both "record[string-length(employeeNumber) < 9]" on line 13 of file:/C:/Users/mdown/Desktop/Untitled21.xsl and "record[translate(employeeNumber, 'abcdefghijklmnopqrstuvwxyzABCDEFGHILKLMNOIPQRSTUVWXYZ!£$%^', '')]" on line 12 of file:/C:/Users/mdown/Desktop/Untitled21.xsl`

这样做的原因是因为它匹配两个规则，但这应该不是问题。我将如何更改 XSLT 以支持这些选项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T15:49:21.490

在我看来，您好像收到的是警告，而不是错误。如果您想避免警告，然后决定哪个模板应该具有更高的优先级并`<xsl:template match="foo" priority="5"/>`根据需要进行设置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T21:32:41.057

XSLT 规范说，如果一个节点匹配多个具有相同优先级的模板规则，则这是一个“可恢复的错误”。允许实现忽略错误并选择最后出现的模板，或者允许将其视为硬错误。Saxon 允许通过命令行参数选择这些选项中的任何一个，但默认情况下它选择中间选项，即报告警告并继续。

我建议当您收到此警告时，检查这两条规则并决定要优先考虑其中的哪条。然后给两个规则明确的优先级属性，这样就不会有歧义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:18:41.453

我不确定这是否可行，但尝试在第一个模板匹配中添加对长度的相反检查

```
<xsl:template match="record
       [translate(employeeNumber, 'abcdefghijklmnopqrstuvwxyzABCDEFGHILKLMNOIPQRSTUVWXYZ!£$%^', '')]
       [string-length(employeeNumber) &gt;= 9]"/"/> 

<xsl:template match="record[string-length(employeeNumber) &lt; 9]"/> 
```

这有点重复编码，但它们现在不应该匹配相同的记录。

# wcf-data-services - 在过滤（where 子句）查询上使用 .IncludeTotalCount() 的 OData 查询

> ID：10536830
> 
> 赞同：1
> 
> 时间：2012-05-10T15:02:14.783
> 
> 标签：wcf-data-services, odata

假设我在 Netflix OData 端点上有以下查询：

```
Titles.Where(x=>x.AverageRating > 3.0) 
```

有没有办法用来`.IncludeTotalCount()`获取适合 where 子句的标题数？（不是资源中项目的总数`Titles`。）

我查看了此处提供的代码：http: [//msdn.microsoft.com/en-us/library/ee474390.aspx](http://msdn.microsoft.com/en-us/library/ee474390.aspx)

但它似乎不适用于 where 子句。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T16:20:11.523

我试过这个，它工作得很好：

```
DemoService ctx = new DemoService(new Uri("http://services.odata.org/OData/OData.svc/"));
var query = (DataServiceQuery<Product>)ctx.Products.IncludeTotalCount().Where(p => p.Rating < 4);
QueryOperationResponse<Product> response = (QueryOperationResponse<Product>)query.Execute();
Console.WriteLine(response.TotalCount);
foreach (var i in response)
{
    Console.WriteLine(i.Name + ", " + i.Rating.ToString());
} 
```

在您的情况下，“它不起作用”是什么意思？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:43:52.370

根据@Vitek Karas 的回复和您的评论，您似乎需要将从 where 子句返回的 IQueryable 转换为 DataServiceQuery。

# android - APK - 屏幕支持

> ID：10536836
> 
> 赞同：0
> 
> 时间：2012-05-10T15:02:45.040
> 
> 标签：android, apk

我有一个用于测试的 APK，我想知道在上传到 Google Play 之前是否可以知道它支持什么屏幕。我无权访问 AndroidManifest.xml。

问候，克劳迪奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:07:28.983

提取您的 APK 文件，您将获得 Manifest 文件。

右键单击APK文件，选择提取文件

使用winrar、7zip等软件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:08:28.110

您可以使用 WinRAR 之类的文件打开 .apk 文件并查看 AndroidManifest.xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:35:43.680

使用 WinRar 或 7Zip 打开 apk 并查找 AndroidManifest.xml

# android - Android 列表部分

> ID：10536837
> 
> 赞同：0
> 
> 时间：2012-05-10T15:02:44.990
> 
> 标签：android, listview, onclick, categories

我需要一种没有任何自定义 listAdapters 的简单方法来创建带有部分或类别的 ListView。

重要的是，类别分隔符不算作 listItem，因为我在 onClick() 中使用我的列表项位置，所以每个项目都很重要。

是否有捷径可寻？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:12:57.547

如果您想要标准 ListView 中的部分标题，您将不得不制作自己的适配器。

您可以使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)，这听起来正是您所需要的。

**编辑**

好的，那么您想使用 CommonsWare 的 MergeAdapter。我*只是*为其他人发布了它，它也适用于你。我什至包括说明。:)

[合并适配器答案](https://stackoverflow.com/a/10535980/1105376)

希望这可以帮助！

# ruby-on-rails - jruby记录如何设置包名

> ID：10536838
> 
> 赞同：0
> 
> 时间：2012-05-10T15:02:47.130
> 
> 标签：ruby-on-rails, logging, package, jruby

当我使用 jruby 1.6.2 rails 3.09 应用程序查看 Jboss AS 7.01 下的日志时，我看到如下消息

16:31:24,259 INFO [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/apollo]] (http-0.0.0.0-0.0.0.0-8180-32) 处理由 SessionsController#new 作为 HTML

如何将“org.apache.catalina.core.ContainerBase”更改为更适合我需要的内容。背景是我想在 jboss 日志记录部分中定义一些包名，每个包名使用不同的记录器处理程序。所以我需要我自己的应用程序的包名，而不是 org.apache。一般来说：我如何影响必须记录的消息的除外。

提前致谢

艾哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:17:47.873

设置备用日志记录机制，例如，如果您使用 SLF4J，请将这些添加到*web.xml*：

```
<context-param>
  <param-name>jruby.rack.logging</param-name>
  <param-value>slf4j</param-value>
</context-param>
<context-param>
  <param-name>jruby.rack.logging.name</param-name>
  <param-value>apollo-rails-app</param-value>
</context-param> 
```

**也支持**log4j****

# android - Android - 是否可以从软键盘中隐藏某些字符？

> ID：10536839
> 
> 赞同：0
> 
> 时间：2012-05-10T15:02:52.473
> 
> 标签：android, android-softkeyboard

是否可以隐藏（或禁用）软键盘上的某些字符？之前有人问过：[Android软键盘-禁用某些键](https://stackoverflow.com/questions/9454368/android-soft-keyboard-disable-certain-keys)但没有答案。

（我宁愿隐藏也不愿禁用键，但两者都可以）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:04:43.410

只有当您创建第 3 方键盘并且用户选择它作为要在其设备上使用的键盘时，才能完成此操作。我认为您不能很容易地在自己的应用程序中自定义键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:05:20.290

> 是否可以隐藏（或禁用）软键盘上的某些字符？

仅当您创建自己的输入法编辑器（又名软键盘）并让用户切换到它时。

类似的属性`android:inputType`是一些输入法编辑器将尊重并可能控制可用字符的提示。但是，不能保证任何给定的输入法编辑器都会支持它以及它将选择包含和排除哪些字符。

# dynamics-crm-2011 - 将 PhoneCall `to` 和 `from` 字段复制到新的 PhoneCall

> ID：10536842
> 
> 赞同：2
> 
> 时间：2012-05-10T15:02:59.167
> 
> 标签：dynamics-crm-2011

我正在 PhoneCall 功能区上创建一个按钮，用于创建*后续呼叫*。我尝试使用 javascript 和[XrmServiceToolkit](http://xrmservicetoolkit.codeplex.com/)来做到这一点。看起来我根本不能用 SOAP 端点来做这件事，而用 REST 做这件事有点棘手。

如何将字段复制`to`到`from`新活动？

**更新**最初我尝试使用 XrmServiceToolkit javascript库，但按照彼得的回答切换到 C# 来复制字段。

尽管如此，还是没有结果。我这样做：

```
EntityCollection toCollection = new EntityCollection();
foreach (var activityParty in ((EntityCollection)previousActivity["to"]).Entities)
{
    Entity newActivityParty = new Entity(ActivityParty.EntityLogicalName);
    newActivityParty["activityid"] = new EntityReference(context.PrimaryEntityName, context.PrimaryEntityId);
    newActivityParty["partyid"] = activityParty["partyid"];
    newActivityParty["participationtypemask"] = new OptionSetValue(2);//activityParty["participationtypemask"];
    //service.Create(newActivityParty);

    toCollection.Entities.Add(newActivityParty);
}
entity["to"] = toCollection; 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:00:31.497

如果您发现 JavaScript 很麻烦，并且想要更前端的做事方式，您可以有一个解决方案，单击功能区按钮，打开一个新的电话表单，其中包含您需要预先填充的详细信息。您使用当前表单中所需的参数构建 URL，这将在新表单上设置值（您的后续电话）。看看[MSDN - Setting field values using paramaters](http://msdn.microsoft.com/en-us/library/gg334375.aspx)。

您应该可以通过这种方式将您的`to`和`from`字段复制到新表单中。

请注意，这是一种替代方法。如果您想使用 JavaScript**完全**自动化创建后续电话呼叫，那么我建议您使用 REST 端点并在遇到困难时发布一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:12:58.757

**编辑：**考虑到这一点，最符合逻辑的方法如下：

1.  `PhoneCall`在实体（其目标是）中创建一个自引用查找字段/关系`PhoneCall`，称为`new_OriginatingCall`. 这将为您提供后续电话的跟踪。
2.  在检查字段中是否存在值的实体上创建一个`Create`操作前/验证插件。如果存在，则从原始填充和字段。`PhoneCall``new_OriginatingCall``to``from``PhoneCall`
3.  在附加到您的按钮的 javascript 中，创建一个新`PhoneCall`的`new_OriginatingCall`填充。

这样，无论后续调用如何生成，`to`and`from`字段总是在服务器端正确填充。

编辑：有关如何`PartyList`通过 Linq 检索和设置 s 的示例，请参见下文。

```
// newPc is the Target entity of the plugin.
var pc = xsc.PhoneCallSet
    .Single(x => x.ActivityId == newPc.new_OriginatingCall.Id);
// pc is now a copy of the original phone call.

// Have to make new activity party lists because the activity parties attached to
// the original phone call activity have the activity id set to the original
// phone call.
// Trying to attach them unchanged to the new phone call (which would have a new 
// activity id) results in a FaultException.
var to = pc.To.Select(x => new ActivityParty { PartyId = x.PartyId });
var from = pc.From.Select(x => new ActivityParty { PartyId = x.PartyId });

// Prep the new phone call.
PhoneCall pcNew = new PhoneCall
{
    To = to,
    From = from,
    Subject = pc.Subject,
    ActualDurationMinutes = pc.ActualDurationMinutes,
    DirectionCode = pc.DirectionCode,
    PhoneNumber = pc.PhoneNumber
};

// Create the new phone call.
service.Create(pcNew); 
```

~~如果您可以`PartyList`在 .NET 中比在 javascript 中更轻松地组装 s，我强烈建议您使用[从 Ribbon JScript CRM Online 2011 调用 C# 代码](https://stackoverflow.com/q/5091565/684271)的好问题中建议的两个最佳答案之一（即通过创建“插件”来触发您的代码“自定义实体或在通过javascript设置的实体中包含一个字段`PhoneCall`，并在更新时触发一个插件，该插件检查该字段的状态并做出相应反应）。~~

~~我经常使用这两种方法，因为使用 javascript 在 CRM 中实现类似结果通常很复杂。~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:08:28.310

毕竟，最终还是用 JavaScript 做的：

```
function main() {
    var newActivity = new XrmServiceToolkit.Soap.BusinessEntity('phonecall');

    newActivity.attributes['phonecall'] = {
        id : Xrm.Page.data.entity.getId(),
        logicalName : 'phonecall',
        type : 'EntityReference'
    }

    newActivity.attributes['to'] = {
        type: 'EntityCollection',
        value: lookupToEntityReferenceCollection('to')
    }

    var newId = XrmServiceToolkit.Soap.Create(newActivity);
}

function lookupToEntityReferenceCollection(lookupName) {
    var result = [],
        lookupValue = Xrm.Page.getAttribute(lookupName).getValue();

    if (lookupValue === null) {return result;}

    var arrayLength = lookupValue.length;

    for (var i = 0; i < arrayLength;i++) {
        result.push({
            id: lookupValue[i].id, 
            logicalName: lookupValue[i].typename,
            type: 'EntityReference'
        });
    }
    return result;
} 
```

# ruby - 为什么这个 rspec 测试会抛出“nil:NilClass 的未定义方法‘调用’”错误？

> ID：10536846
> 
> 赞同：4
> 
> 时间：2012-05-10T15:03:09.917
> 
> 标签：ruby, rspec

我正在尝试将 rspec_api_documentation (https://github.com/zipmark/rspec_api_documentation) 集成到我的 sinatra 应用程序中。我遇到了下面的错误。我显然已经将错误简化为一个简单的测试，因为我认为一旦我弄清楚配置中有什么问题，一旦重新集成到我更大的应用程序中它就会工作。

谢谢！

**在 app.rb 中：**

```
require 'rubygems'
require 'sinatra'

get '/index' do
  "hewoah!"
end 
```

**在 spec.rb 中：**

```
require "rspec_api_documentation"
require "rspec_api_documentation/dsl"

RspecApiDocumentation.configure do |config|
#  config.app = App
end

resource "Users" do
  get "/index" do
    example "Returns text" do
      do_request
      status.should be_ok
    end
  end
end 
```

**`rspec spec/acceptance/spec.rb --require ./app.rb`** F**的结果**

```
Failures:

  1) Users GET /index Returns text
     Failure/Error: do_request
     NoMethodError:
       undefined method `call' for nil:NilClass
     # ./spec/acceptance/spec.rb:11:in `block (3 levels) in <top (required)>'

Finished in 0.02234 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/acceptance/spec.rb:10 # Users GET /index Returns text 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:15:37.810

要注册您的裸应用程序，您需要将应用程序设置为 Sinatra::Application：

```
specApiDocumentation.configure do |config|
#  config.app = App 
end 
```

到：

```
specApiDocumentation.configure do |config|
   config.app = Sinatra::Application
end 
```

# javascript - 有没有人有可以在对象上使用的 Javascript 快速排序？

> ID：10536849
> 
> 赞同：-2
> 
> 时间：2012-05-10T15:03:26.160
> 
> 标签：javascript, algorithm

> **可能重复：**
> [如何对 javascript 对象数组进行排序？](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)

每次我写自己的快速排序时，它最终花费的时间比我最初想象的要长得多。我有一个非常小的数组，但仍然希望有一个方便的快速排序。

就像是

```
quicksort(myObjectArray) {
    //myObject[i].key is what the sort is done on
} 
```

我实际上是在谷歌上做的，所以如果你在雅虎或谷歌上发布一个指向前三页或四页中的任何一个的链接，其中包含明显不完整的代码，否则我为什么要在这里问……那么你就是在浪费你的生命在 stackoverflow 上拖钓和实际上没有回答任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:08:54.660

只需使用 .sort：

```
myObjectArray.sort(function(a,b){
    // handle .key here depending on your application
}); 
```

例子：

[http://www.sitepoint.com/sophisticated-sorting-in-javascript/](http://www.sitepoint.com/sophisticated-sorting-in-javascript/)

# java - 删除变量内存

> ID：10536854
> 
> 赞同：8
> 
> 时间：2012-05-10T15:03:43.787
> 
> 标签：java, memory, memory-management

嗨考虑我有三个数组变量`a[dynamic], b[dynamic], c[dynamic]`。它们可以是任何大小现在我想销毁变量说 a。我确定我不会再使用该变量了。欢迎任何想法和建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T15:08:25.677

您可以向垃圾收集器指示可以通过分配一个数组来释放`null`它：

```
 int[] a = new int[someSize];
    int[] b = new int[someSize];
    ....
    // I no longer need 'a'
    a = null;
    // ... but I can still use 'b' 
```

不过有几点需要注意：

*   这不会释放空间。相反，它使数组*有资格*被垃圾收集器释放。GC 可能很长一段时间都无法释放它。

*   事实上，数组只有在*不可访问*时才有资格进行垃圾回收。如果您已将数组的引用分配给另一个（仍然存在的）变量或可访问对象，则 GC 不会回收它。

*   在现实生活中的 Java 应用程序中这样做几乎没有任何意义。通常的做法是简单地允许变量在正常的计算过程中超出范围¹。`null`如果变量不会长时间超出范围并且它指的是大型数组/对象或网络，您只会显式地显示一个变量（或对象字段或数组元素）。

*   `System.gc()`在分配`null`... 或 ever ²之后尝试通过调用来强制 GC 运行是非常不可取的。如果电话有任何影响，它可能会很昂贵。最好让 JVM 在最佳时间安排一次 GC。

* * *

^(1 - 任何合理的 JVM 实现都会知道当方法退出时局部变量会超出范围。JVM 是否以更精细的粒度跟踪范围是特定于实现的，而且（老实说）我*不知道*JVM 在实践中如何处理这个问题。)

^(请注意，只要GC 不删除可访问（即非垃圾）对象，几乎任何东西在*技术上都符合 JLS 要求。*这包括一个使用 Epsilon no-op GC 的 JVM，它从不收集垃圾并在 JVM 空间不足时终止它。)

^(2 - 唯一合法的原因是：1）测试 GC 相关功能的行为；例如终结器、引用队列处理器等，或 2) 在实时应用程序中避免有害的 GC 暂停；例如，在实时游戏中更改“级别”时运行 GC。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:20:58.937

Stephen C 已经回答了您的问题，但对于非原始类型，您还想确保如果您不需要数组中的所有对象都标记为 null，这将确保您没有内存泄漏。

就像是：

```
for(Object obj : myObjectArray){
  obj = null;
} 
```

然后使您的数组引用为空

```
myObjectArray = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T13:11:43.237

从 arrayList 中删除所有元素

`arrayList.removeAll(arrayList);`

# iphone - iOS KeyChain 未从后台检索值

> ID：10536859
> 
> 赞同：91
> 
> 时间：2012-05-10T15:03:52.073
> 
> 标签：iphone, ios, background, keychain, lockscreen

我目前正在 iOS KeyChain 中存储用户名（电子邮件）和电子邮件和密码的加盐哈希。我正在使用[此处](https://gist.github.com/1170641)找到的 ARC'ified 版本。

```
KeychainItemWrapper *wrapper = [[KeychainItemWrapper alloc] initWithIdentifier:@"MyCustomIdentifier" accessGroup:nil];
[wrapper setObject:APP_NAME forKey:(__bridge id)kSecAttrService];
[wrapper setObject:email forKey:(__bridge id)kSecAttrAccount];
[wrapper setObject:token forKey:(__bridge id)kSecValueData]; 
```

当我需要在应用程序处于活动状态时为我的网络调用提取令牌时，这一切都很好。它适用于从干净的启动登录，以及整个网络调用。当应用程序在后台时，麻烦就开始了。

请记住，这只是偶尔发生，我还没有将其固定到特定的 iOS 版本或设备上。

用户旅行一个位置（区域监控），我想用他们的状态更新服务器。我尝试将令牌从钥匙串中拉出，就像我对其他所有网络调用所做的那样，并更新状态。但对于一些用户来说，价值为零。没有它，我无法更新网络内容。为什么这对大多数人有效，但对一小部分人无效？

```
KeychainItemWrapper *wrapper = [[KeychainItemWrapper alloc] initWithIdentifier:@"MyCustomIdentifier" accessGroup:nil];
NSString *token = [wrapper objectForKey:(__bridge id)kSecValueData]; 
```

我已经回到 keychainwrapper 的非 ARC 版本，但我仍然得到相同的结果。我将不胜感激对此的任何反馈。这只是我用户的一小部分，但这是我想解决而不是担心的问题。提前致谢。

此外，我所有的后台工作都是在 backgroundTask 中设置的，以防止事情超时。我对钥匙串周围的工作没有任何问题，但在我的令牌被填满之前我不会让事情继续进行。

**编辑** 我已经发现我的问题是他们的钥匙串没有从后台检索值。我将在下面发布答案并接受它，因为我觉得这个问题以后可能对其他人有价值。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-14T12:10:31.083

由于原因，我的问题接近标记，但不完全是。在阅读了一个又一个博客，一个又一个教程之后，我终于找到了一个暗示可能会发生什么的文章。

锁定的主屏幕。钥匙串教程总是将钥匙串的可访问性设置留空，因此它默认为 Apple 的最低/最安全的访问级别。但是，如果用户在锁定屏幕上有密码，则此级别不允许访问钥匙串。答对了！这解释了零星的行为以及为什么这只发生在一小部分用户身上。

一行代码，解决了整个混乱。

```
[wrapper setObject:(__bridge id)kSecAttrAccessibleAlways forKey:(__bridge id)kSecAttrAccessible]; 
```

在我设置用户名和密码值的地方添加这一行。奇迹般有效。希望这会帮助那里的人。它让我困惑了很长一段时间，直到我能够将这些碎片拼凑在一起。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-07-08T22:43:35.797

使用`kSecAttrAccessibleAfterFirstUnlock`而不是`kSecAttrAccessibleAlways`.

来自[苹果的文档](https://developer.apple.com/library/ios/DOCUMENTATION/Security/Reference/keychainservices/index.html)：

> **`kSecAttrAccessibleAfterFirstUnlock`**
> 重新启动后无法访问钥匙串项中的数据，直到用户解锁设备一次。
> 
> 第一次解锁后，数据仍然可以访问，直到下一次重新启动。**对于需要由后台应用程序访问的项目，建议使用此选项。**使用加密备份时，具有此属性的项目会迁移到新设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T08:46:31.663

在我的例子中，watchOS2 在 iOS 端访问钥匙串数据。

一开始，使用 kSecAttrAccessibleWhenUnlockedThisDeviceOnly。无论 iPhone 是否被锁定，我都可以读取数据。当手表尝试访问钥匙串时我会收到错误，这让我非常困惑：：SecTrustEvaluate [leaf IssuerCommonName SubjectCommonName]

在某些情况下，它会变成： : SecOSStatusWith error:[-25308] Error Domain=NSOSStatusErrorDomain Code=-25308 "ks_crypt: e00002e2 failed to 'oe' item (class 6, bag: 0) 在钥匙串被锁定时尝试访问项目。 " UserInfo={NSDescription=ks_crypt: e00002e2 未能“oe”项目（类 6，包：0）在钥匙串锁定时尝试访问项目。}

如果我得到更多信息，我会更新我的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T13:33:13.250

这可能是由于 Apple 的数据保护政策，从开发人员的角度来看，该政策在某种程度上是模糊的。解决方法是在应用程序启动时检查钥匙串是否可访问，如果不可访问，您可能会根据您的应用程序类型杀死您的应用程序（使用适当的弹出窗口）。

```
+(BOOL) isKeychainAccessible
{
    NSString *keychainTestKey = @"keychainTestKey";
    NSString *keychainTestValue = @"keychainTestValue";
    [self createKeychainValue:keychainTestValue forIdentifier:keychainTestKey];
    NSString *loadedValue = [self keychainStringFromMatchingIdentifier:keychainTestKey];
    [self deleteItemFromKeychainWithIdentifier:keychainTestKey];
    return ([keychainTestValue isEqualToString: loadedValue]);
} 
```

# groovy - 如何在groovy中用“\”替换所有“/”？

> ID：10536863
> 
> 赞同：3
> 
> 时间：2012-05-10T15:03:57.927
> 
> 标签：groovy

尝试了以下方法，

```
 def str1 = "/home/test-data/"
    def str2 = str1.replaceAll('\\/','\\')
            println str2 
```

控制台中的错误：线程“main”中的异常 java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：1

```
 def str1 = "/home/test-data/"
    def str2 = str1.replaceAll('\\/','\')
            println str2 
```

脚本错误：删除不必要的分号

```
 def str1 = "/home/test-data/"
    def str2 = str1.replaceAll('\\/','\')
            println str2 
```

在控制台中打印如下：'home'test-data'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:10:06.127

您的答案：

```
def str1 = "/home/test-data/"
def str2 = str1.replaceAll('\\/','\\\\')
println str2 
```

相反：

```
def str1 = "\\home\\test-data\\"
def str2 = str1.replaceAll('\\\\','/')
println str2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T15:06:57.750

您需要 4 个反斜杠而不是 2 个。请参阅[https://issues.apache.org/jira/browse/GROOVY-2225](https://issues.apache.org/jira/browse/GROOVY-2225)

# java - 释放按钮后执行操作

> ID：10536866
> 
> 赞同：0
> 
> 时间：2012-05-10T15:04:07.097
> 
> 标签：java, swing, jbutton, background-process, swingworker

我有以下问题。我有一个带有按钮的小表单（我们在这里讨论的是 JAVA），它通过与服务器的套接字连接以表单形式发送数据。现在，当我按下按钮时，它正在建立这个单一的连接，但与此同时，如果你得到我的话，按钮仍然保持“按下”状态。在由 actionlistener 激活的操作完成（建立连接、发送数据、关闭连接）之后，按钮被释放。

现在我的问题是，是否有一个简单的解决方法，如果有（或没有），我该如何解决？

提前致谢。

```
submit.addActionListener(this); 
```

这是部分，但我希望在案文中明确说明。

```
public void actionPerformed(ActionEvent ae) {
        if (ae.getSource() == submit) {
            boodschap = testtext.getText();
//            System.out.println(boodschap);
            try {
                try {
                    UserConnection connect = new UserConnection(boodschap);
                } catch (SQLException ex) {
                    Logger.getLogger(UserAction.class.getName()).log(Level.SEVERE, null, ex);
                }
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(UserAction.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
} 
```

（哦，这段代码就像一个魅力。代码没有任何问题，它只是显示给你我的意思的指示。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:06:20.090

问题是您正在 UI 线程上执行长时间运行的操作。如果您将代码放入 SwingWorker 甚至放入 Runnable 并在新线程中运行它应该可以解决您的问题

# sql - 外连接内的条件？

> ID：10536867
> 
> 赞同：0
> 
> 时间：2012-05-10T15:04:07.317
> 
> 标签：sql, sql-server, sql-server-2008

我的简化查询如下所示：

```
 SELECT p.product_Id,
       p.productName,
       s.LastSales_date
FROM products as p 
            LEFT OUTER JOIN
 (  SELECT product_id , 
           max(Sales_date) as LastSales_date  
          FROM Sales group by product_id) as s
on s.product_id=p.product_Id 
where  
  (s.LastSales_date is null or  -- is it right? 
  s.LastSales_date between '2012/01/01' and '2012/01/05') 
```

结果：

```
ProductName       LastSalesDate  
   p_A             2012/01/01
   p_C             2012/01/01
   p_E             2012/01/02 
```

但是有一行错过了，那一行没有sales_date，所以，如何得到如下结果：

```
ProductName       LastSalesDate  
   p_A             2012/01/01
   p_b             <null>
   p_C             2012/01/01
   p_E             2012/01/02 
```

我的问题 (null) 的行没有出现我感谢任何尝试:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:09:51.467

使用外连接时，重要的是要记住从连接本身过滤外部数据，否则会产生内连接。

```
SELECT p.product_Id,
       p.productName,
       s.LastSales_date
FROM products as p 
LEFT OUTER JOIN
 (
   SELECT product_id , 
          max(Sales_date) as LastSales_date  
     FROM Sales 
    group by product_id
 ) as s
on s.product_id = p.product_Id 
-- Filter s here
and s.LastSales_date between '2012/01/01' and '2012/01/05' 
```

在这种情况下，您可以使用 HAVING 过滤聚合本身：

```
SELECT p.product_Id,
       p.productName,
       s.LastSales_date
FROM products as p 
LEFT OUTER JOIN
 (
   SELECT product_id , 
          max(Sales_date) as LastSales_date  
     FROM Sales 
    group by product_id
-- Filter max(Sales_date) here
   having max(Sales_date) between '2012/01/01' and '2012/01/05'
 ) as s
on s.product_id = p.product_Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:17:38.977

我希望你提到的结果，但如果你发现这不起作用，我建议使用 COALESCE。

也许...

```
SELECT
p.product_Id
, p.productName
, COALESCE(s.LastSales_date,'')
FROM
products p 
LEFT OUTER JOIN
    (SELECT
        product_id
        , MAX(Sales_date) AS LastSales_date  
    FROM
        Sales
    GROUP BY
        product_id
    )  s on s.product_id = p.product_Id 
WHERE  
COALESCE(s.LastSales_date,'')  = ''
OR
COALESCE(s.LastSales_date,'') BETWEEN  '2012/01/01' and '2012/01/05' 
```

# sharepoint - Sharepoint 中的订单号。整数？

> ID：10536868
> 
> 赞同：2
> 
> 时间：2012-05-10T15:04:12.120
> 
> 标签：sharepoint, numbers, integer, fieldtype

我添加了一个应该以编程方式用作订单列的列表列。作为字段类型，我将使用 SPFieldType.Integer。

现在我只是想知道为什么不能从用户那里选择这个字段类型。有什么好的理由，为什么可以选择 Number，但不能从列表属性中选择 Integer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:15:29.617

您可以通过 UI（新字段：数字并将**小数位数设置为 0**，这不是本机）或通过 CAML创建整数字段

例如：

```
 <Field
    ID="{5CCF58EA-0F3B-4D49-9797-A4BEF557FB15}"
    Name="Banner_BodyWidth"
    DisplayName="Banner Body Width"
    Type="Number"
    Decimals="0"
    Min="0"
    Required="FALSE">
    <Default>300</Default>
</Field> 
```

或者另一方面，不要忘记您在所有内容类型中都有一个内置的 order 字段，您可以安全地用于该目的，并且会给您一个 UI，如果您转到**http( s)://your-site-collection-url/_layouts/reorder.aspx?List={guid-of-the-targeted-list}**

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:08:14.430

不太确定您的意思，但 SharePoint 开发中的一个常见错误是在数字字段实际上是 Double 值时将它们处理为整数。

# vba - 将用户表单作为参数从 word vba 传递到 vb.net

> ID：10536869
> 
> 赞同：3
> 
> 时间：2012-05-10T15:04:12.520
> 
> 标签：vba

我正在尝试迁移处理单词模板的系统的一部分。到目前为止，通用功能已经分布在文件服务器上的几个 .dots（使用 vba）上。我们现在的目标是将这个功能放入一个 vb.net 应用程序中，我们与之交互作为来自 word 的参考。

我想从 vba 调用 vb.net 功能，将用户表单作为参数传递。从 vb.net 中的表单测试类，它可以很好地与 TestFunction(inForm:=Me) 一起使用。从 vba 我尝试了各种各样的电话，但我都没有开始工作。

**.net 函数我试图调用**

`Public Sub TestFunction(ByVal inForm As Form) 'do something...
End Sub`

**从单词 vba 调用**

`Public sReference As MyNetApp.DocFunc`

 ````
Set sReference = CreateObject("MyNetApp.DocFunc")
sReference.TestFunction(frmMyForm) 
````  `参考 .net 根据以下设置设置：[http](http://www.geeksengine.com/article/create-dll.html) ://www.geeksengine.com/article/create-dll.html并与其他功能一起正常工作，只是我无法弄清楚如何处理的表单。

所以，我的问题是我如何通过表格？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:14:18.573

我不确定这是否可能，但你真的需要这样做吗？如果您只需要表单上的数据，那么只需传递数据。`

# php - 如何按内容过滤我的 MySQL 结果？即如果包含主题标签

> ID：10536871
> 
> 赞同：0
> 
> 时间：2012-05-10T15:04:21.903
> 
> 标签：php, mysql, hashtag

只想知道如果“内容”字段包含主题标签，我如何使用 mysql 过滤掉结果。

例如，如果结果内容是：“#Euro2012 is going to be awesome”

我不会在我的 MySQL 结果中返回这个......

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:56:30.427

使用`regex`and `preg_match_all()`，你可以有这样的东西：

```
$str = <<<STR
this is a string
with a #tag and
another #hello one
STR;

$matches = array();
if (preg_match_all('/#([^\s]+)/', $str, $matches)) {
  var_dump($matches[1]);
} 
```

这给出了以下输出：

```
array
  0 => string 'tag' (length=3)
  1 => string 'hello' (length=5) 
```

而且，如果您需要对这些进行更多操作，您应该查看手册的 PCRE 函数部分：还有一些其他的可能对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T15:05:05.223

对于 varchar 字段，您可以使用[LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)：

```
SELECT * FROM myTable WHERE myVarCharField NOT LIKE '%#Euro2012%' 
```

对于文本字段，您需要查看[全文搜索](https://stackoverflow.com/questions/614358/is-full-text-search-the-answer)。

**更新（由评论建议）：**

正则表达式解决方案：

```
SELECT * FROM myTable WHERE myVarCharField NOT RLIKE '#.*\s' 
```

如果要按以主题标签开头的字段进行过滤，请添加`^`到正则表达式。

# android - CSS3 线性渐变在 android 上不起作用。

> ID：10536876
> 
> 赞同：11
> 
> 时间：2012-05-10T15:04:33.910
> 
> 标签：android, css

新手问题在这里，但由于某种原因我无法弄清楚。我有以下 CSS 在我的 iPhone 上运行良好，但在我的 Android 上运行良好。通过查看带有 android 的 jQuery Mobile 演示，我知道它可以处理背景渐变。谢谢

```
.mydiv {
  background:    -moz-linear-gradient(#FFFFFF, #F1F1F1) repeat scroll 0 0 #EEEEEE;
  background: -webkit-linear-gradient(#FFFFFF, #F1F1F1) repeat scroll 0 0 #EEEEEE;
  background: linear-gradient(#FFFFFF, #F1F1F1) repeat scroll 0 0 #EEEEEE;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T15:09:48.640

4.0以下的Android浏览器，根据**[caniuse](http://caniuse.com/#search=gradient,)**使用旧`-webkit`语法：

```
background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #a7cfdf), color-stop(100%, #23538a)); 
```

奖励：我建议您使用 LESS 或 Compass/SASS 之类的东西，它会为您节省所有这些工作[http://compass-style.org/](http://compass-style.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-27T16:38:47.557

我遇到了这个问题，因为我在 Android 2.2 上遇到了线性渐变问题。问题是，我们的线性渐变使用了新的角度系统

```
-webkit-linear-gradient(to top #000000 0%, #ffffff 100%) 
```

但是，较旧的 Android 支持旧的角度系统（没有*to*）。上述梯度的等价物将是

```
-webkit-linear-gradient(bottom #000000 0%, #ffffff 100%) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:13:04.847

```
background-color:#666633; //fallback
background:-webkit-linear-gradient(top, #666633,    #333300);  //webkit
background:-moz-linear- gradient(top, #666633, #333300) //mozilla 
```

这行得通。

# greendroid - GreenDroid 操作栏忽略菜单？

> ID：10536877
> 
> 赞同：0
> 
> 时间：2012-05-10T15:04:37.800
> 
> 标签：greendroid

Greendroid 不能使用 xml 中定义的菜单在操作栏中显示它们吗？例如，在 onCreateOptionsMenu() 中加载了以下菜单，但它没有出现在操作栏中。我认为 ActionbarSherlock 能够做到这一点，不是 greendroid 也有能力吗？

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
   android:id="@+id/new_client"
   android:icon="@drawable/plus"
   android:showAsAction="always"
   android:title="new client"/>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:56:45.000

GreenDroid 是一个很棒的库，但如果您正在开始新项目 - 请选择 ActionBarSherclock。不幸的是，GreenDroid 不再由其作者更新。

我在我的一个项目中使用 GreenDroid，我也在寻找同样的东西。

GreenDroid 是一个开源项目。也许将来有人会向它添加此功能。但这可能不是一件简单的事情。

我没有检查，但我看到在 GitHub 上现在有 228 个 GreenDroid 项目的分支。也许有人实际上在其中一个中添加了这个功能

[https://github.com/cyrilmottier/GreenDroid/network](https://github.com/cyrilmottier/GreenDroid/network)

但就像我说的。如果您正在开始新项目 - ActionBarSherlock 将是一个更好的选择。

# javascript - 在不同视图之间共享相同的操作/功能

> ID：10536882
> 
> 赞同：0
> 
> 时间：2012-05-10T15:04:44.633
> 
> 标签：javascript, backbone.js

假设我有不同的视图，每个视图都有特定于`events: { "dblclick div.editable": "edit" }`
我想`edit`在不同视图之间共享功能（然后也保存）的项目的 DOM 事件。

```
var View1 = Backbone.View.extend({

     events: { "dblclick div.editable": "edit" },

     edit: function () {} // function I would like to share btw diff views
});

var View2 = Backbone.View.extend({

     events: { "dblclick div.editable": "edit" },

     edit: function () {} // function I would like to share btw diff views
}); 
```

有可能吗？
最好的方法是什么？
有一些例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:09:03.163

在[Backbone patterns 网站上](http://ricostacruz.com/backbone-patterns/#mixins)，描述了如何使用**Mixins**来解决这种设计问题：

> 问题：有时您对多个对象具有相同的功能，而将对象包装在父对象中是没有意义的。例如，如果您有两个共享方法的视图，但没有——也不应该——有一个共享的父视图。
> 
> 解决方案：对于这种情况，使用 mixin 是合适的。

所以在这种情况下，它可能是这样的：

```
App.Mixins.Editable = {
  edit: function() { /* ... */ },

  open: function() { /*... */ },

  close: function() { /* ... */ }
};

App.Views.YourEditPage = Backbone.View.extend(
  _.extend({}, App.Mixins.Editable, {

   events: { "dblclick div.editable": "edit" },

  // (Methods and attributes here)

})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:39:41.093

即使我认为@IntoTheVoid 更优雅，我也想公开一个非常简单的方法：一个 Utils 模块：

```
var App = function(){};

App.Utils = {
  myCommonFunction: function( param ){ 
    // code 
  }
}

var View1 = Backbone.View.extend({
     events: { "dblclick div.editable": "edit" },
     edit: function() {
       App.Utils.myCommonFunction( "param" );
     }
});

var View2 = Backbone.View.extend({
     events: { "dblclick div.editable": "edit" },
     edit: function() {
       App.Utils.myCommonFunction( "param" );
     }
}); 
```

# c# - LINQ 选择查询总是产生真值

> ID：10536883
> 
> 赞同：1
> 
> 时间：2012-05-10T15:04:48.343
> 
> 标签：c#, linq

当我点击以下行时，无论连接`Roles`表中是否出现“本地”，我总是收到一个 true。

```
if (objUserRoles.Select(x => (x.Role.Role1 == "local")).Count() > 0) 
```

我的语法正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T15:06:24.787

您正在寻找：

```
if (objUserRoles.Any(x => x.Role.Role1 == "local")) 
```

您正在做的是选择一系列`bool`s。例如，如果您的查询返回了 3 个项目`false, true, false`，那么您要求该`false, true, false`序列的表达式，而不仅仅是位于它为真的位置的对象。看起来您正在尝试选择该系列布尔值为真的值，这意味着您应该使用`Where`而不是`Select`. 但是，由于您真正在做的`Where`就是`Count`检查至少一个，所以您应该这样做`Any`，这样做效率更高。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T15:06:16.193

你需要的是`Where`：

```
if (objUserRoles.Where(x => x.Role.Role1 == "local").Count() > 0) 
```

或者`Any`它甚至更好（并且性能更好，因为在大多数情况下它不会像这样遍历整个集合`Count()`）

```
 if (objUserRoles.Any(x => x.Role.Role1 == "local")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:06:25.660

**使用[Where](http://msdn.microsoft.com/en-us/library/bb534803.aspx)扩展方法**

它检查条件

```
if (objUserRoles.Where(x => (x.Role.Role1 == "local")).Count() > 0) 
```

或者

**[任何](http://msdn.microsoft.com/en-us/library/bb534972.aspx)扩展方法**

```
if (objUserRoles.Any(x => x.Role.Role1 == "local")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T15:06:45.147

我认为您想使用 .Where(expr) 而不是 .Select(expr)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T15:07:04.383

最好有一个`Any`

```
if (objUserRoles.Where(x => (x.Role.Role1 == "local")).Any()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T15:13:29.310

正如其他人指出的那样， .Any() 或 .Where().Count() 将为您提供所需的内容。你的代码...

```
if (objUserRoles.Select(x => (x.Role.Role1 == "local")).Count() > 0) 
```

...实际上是`IEnumerable<bool>`在创建一个基于`x.Role.Role1 == "local"`. 您的最终结果始终为真，因为除非您的 objUserRoles 集合实际上包含 0 个元素，否则`.Count()`您的`IEnumerable<bool>`将始终大于 0。

希望澄清对您有意义！:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T15:09:46.067

好吧，您的 are not 语句将您中的任何内容转换`objUserRoles`为 a `boolean`，因此结果集

```
objUserRoles.Select(x => (x.Role.Role1 == "local")) 
```

是一个`IEnumerable<bool>`包含尽可能多的元素的`objUserRoles`集合。我想您想要做的事情由以下查询描述

```
if (objUserRoles.Where(x => x.Role.Role1 == "local").Count() > 0) 
```

甚至更好

```
if (objUserRoles.Any(x => x.Role.Role1 == "local")) 
```

# selenium - 功能/验收测试的正确结构

> ID：10536891
> 
> 赞同：5
> 
> 时间：2012-05-10T15:05:07.520
> 
> 标签：selenium, structure, functional-testing, acceptance-testing, jboss-arquillian

我目前正在为一个项目构建一个自动化的功能/验收测试套件，但是我没有很多编写这些类型测试的经验，所以我想获得一些关于正确构建它们的输入。具体来说，我正在使用 Arquillian 的 Graphene 扩展。

例如，假设我有 3 个测试，A、B 和 C。

**TestA**：测试登录到应用程序中的帐户。因此，如果测试成功，浏览器应该在帐户的主页/信息页面上。

**TestB**：测试修改帐户密码。这需要登录帐户，然后测试密码更改功能。

**TestC**：测试修改帐户的电子邮件。这将再次需要登录帐户，然后测试电子邮件更改功能。

如果 TestA 由于登录代码问题而失败，显然 TestB 和 TestC 也应该失败，因为它们需要登录到帐户。

**问题**：自动化功能/验收测试是否应该重复一个完成测试所验证的过程所必需的过程？在这种情况下，TestB 和 TestC 需要先登录该帐户，然后再执行任何其他操作。每个测试是否应该明确调用类似：

```
/* ...initial test setup code here */
LoginPage.login(username, password);
assertTrue(onCorrectAccountPage);
AccountModification.changePassword(newPassword); 
```

或者我应该使用某种方式将帐户模拟到测试 B 和 C 可以使用的会话中，以便即使 TestA（实际登录测试）失败，它们也不会失败？

由于这些是用户接受测试，我的想法是他们应该做用户会做的事情并在必要时登录，但我不确定这是否是不必要的重复，应该以不同的方式处理（即，像对待功能，类似于标准单元测试），我想从在这方面有更多经验的人那里获得反馈。

提前致谢。希望我的问题不会太复杂。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:22:17.677

我个人这样做是为了让每个测试用例尽可能多地复制用户的操作，但会删除需要的地方。例如，TestA：登录，进入正确的网站，进入它的管理系统，找到一个用户，并删除部分用户信息（如姓名），TestB：登录，进入正确的网站，进入它是管理系统，找到一个用户，并尝试通过一个按钮完全删除用户。

TestA 和 TestB 最终位于同一页面 - 用户详细信息页面。因此，在测试 A 中，我可以按照用户的操作方式正确完成所有操作，但在测试 B 中，我直接转到该用户的详细信息页面，而不是手动进行正确的导航。为什么？

节省时间，既然测试 A 已经测试过了，为什么我还要在测试 B 中重新进行导航？

请记住，测试不应相互依赖——如果所有三个测试都因您无法登录而失败——这就是重点，您无法登录，因此您无法执行任何其他操作。

将其视为用户。每个测试都有他们自己正在测试的用户可查看的功能，但如果您无法登录，用户将无法看到任何内容或对该功能进行任何操作。如果我无法登录，我就无法更改我的密码或电子邮件 - 所以从逻辑上讲，测试应该以同样的方式失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T22:48:29.313

这实际上是一个针对每个项目的问题，因为这两种方法都是有效的方法，但在不同的情况下，应该更喜欢一种方法。在一个大系统中，我更喜欢从头到尾运行测试用例，无论这重复步骤的频率如何（例如，我为每个测试都登录）。我相信这就是 Arran 已经说过的（+1！）。我通常这样做的原因是因为有时从前一个屏幕继承的状态可能会在以后导致错误，而自动化测试非常适合发现这种情况。然而，有了这些，我确保测试数据对于引导步骤都是有效的，并以最快的解决方案为目标。例如，登录应始终具有正确的用户名和密码，然后在检查登录是否成功时，

话虽如此，您还可以编写在某种功能流中测试多个需求的测试。如果流程中断，则应编写测试以识别整个任务失败的区域。我只会将这个推荐给小型项目，或者如果由于缺乏资源而没有优先考虑测试。例如，运行登录、选择商品、放入购物车、结账和付款的测试将测试所有这些功能，并允许团队修复总体“流程”，而不仅仅是几个可能断开的，错误。然而，我再次认为第一种方法更彻底，但也需要更多时间（但值得经常这样做:)）。

由于担心我的答案会变得太长和阻塞，我不会在这里进一步讨论，但是在这方面有很多要谈的，我建议坐下来画出你想要测试的东西在应用程序中，现在和将来。这可能会非常有启发性，并鼓励良好的测试结构和自动化写作实践。希望这会有所帮助，而且时间不会太长:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:38:53.920

在*用户验收*测试中，您不想模拟，而是尽可能接近最终用户使用系统的方式。

但是，单元测试的口头禅[*每次测试一个断言*](http://blog.astrumfutura.com/2009/02/unit-testing-one-test-one-assertion-why-it-works/)可以扩展到验收测试：在 TestA 中，您的验证逻辑是关于断言正确登录：在 TestB 中，您不需要重复此验证，只需断言密码修改已正确处理。

在 JUnit 中，可以使用[`assumeTrue`](http://junit.sourceforge.net/javadoc/org/junit/Assume.html#assumeTrue%28boolean%29)而不是`assertTrue`为此目的。所以你的 TestB 会变成：

```
/* ...initial test setup code here */
LoginPage.login(username, password);
assumeTrue(onCorrectAccountPage);
AccountModification.changePassword(newPassword); 
```

现在，如果假设真失败，则简单地忽略测试。但是，您的 TestA 仍然会失败，告诉您和您的最终用户真正的问题是什么。

# java - 我可以避免使用 Grape 在 Groovy 中加载模块吗？

> ID：10536894
> 
> 赞同：4
> 
> 时间：2012-05-10T15:05:22.840
> 
> 标签：java, maven, groovy, grape

我正在用 groovy 编写我的第一个自动化脚本，但遇到了障碍。在使用 AntBuilder 类运行 sshexec() 时，我遇到了以下错误：

```
: Problem: failed to create task or type sshexec
Cause: the class org.apache.tools.ant.taskdefs.optional.ssh.SSHExec was not found.
    This looks like one of Ant's optional components.
Action: Check that the appropriate optional JAR exists in
    -ANT_HOME\lib
    -the IDE Ant configuration dialogs

Do not panic, this is a common problem.
The commonest cause is a missing JAR.

This is not a bug; it is a configuration problem 
```

到目前为止，我为此找到的最佳解决方案是使用

```
Grape.grab(group : "com.jcraft", module : "jsch", classLoader : this.class.classLoader.rootLoader)
Grape.grab(group:"ant", module:"ant-jsch", classLoader:this.class.classLoader.rootLoader) 
```

为了加载所需的模块。但是，我想消除 Grape 从远程 Maven 存储库下载 jar 的延迟时间。

有没有办法下载和保存模块以供将来使用，也许在 JAVA_PATH 或类似的东西中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:02:45.597

使用 Grape 注解在运行时下载脚本依赖项：

```
@Grapes([
    @Grab(group='org.apache.ant', module='ant-jsch', version='1.8.3'),
    @GrabConfig(systemClassLoader=true)
])

def ant = new AntBuilder()

ant.sshexec(host:"somehost", username:"yo", password:"dude", command:"ls") 
```

如果您在防火墙后面，您还可以配置 Maven 存储库的位置：

```
@GrabResolver(name="my-repo", root="http://my.hostname/maven/repo") 
```

最后提示，属性**groovy.grape.autoDownload**可用于控制葡萄是进行远程下载还是仅使用其缓存文件。

```
groovy -Dgroovy.grape.autoDownload=false myscript.groovy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:16:56.150

将所需的 jar 添加到 %ANT_HOME% 和 %GROOVY_HOME% 不起作用。

解决方案是将罐子放在 %USERPROFILE%.groovy\lib 下 - 之后不再需要 Grape 调用。希望这对其他有同样问题的人有用。

感谢[戴夫](https://stackoverflow.com/users/438992/dave-newton)让我走上正轨。

*   [来源：groovy.codehaus.org](http://groovy.codehaus.org/Running)参见“向类路径中添加内容”标题
*   [来源：相关的SO问题](https://stackoverflow.com/a/254448/1387419)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:10:31.110

假设您只在几台机器上运行您的代码，我将创建一个 grapeConfig.xml 文件并将 ivy.cache.ttl.default 设置为 30 天左右。这将告诉 Grape，如果您有一个使用版本范围的依赖项，仅每 30 天检查一次远程存储库以获取更新的依赖项。有关更多详细信息，请参阅[此帖子](http://spring-java-ee.posterous.com/fixing-slow-grab-dependencies-issue-with-groo)。

# c++ - 在独立类中重新排序公共非虚拟方法是否会破坏 ABI？

> ID：10536896
> 
> 赞同：12
> 
> 时间：2012-05-10T15:05:27.170
> 
> 标签：c++, backwards-compatibility, abi

更改独立类中公共非虚拟非内联重载方法的顺序是否会破坏 ABI？

前：

```
class MyFinalClass
{
public:
    // ...
    void doSomething(char c, int i, int n);
    void doSomething(char c, int i);
    // ...
}; 
```

后：

```
class MyFinalClass
{
public:
    // ...
    void doSomething(char c, int i);
    void doSomething(char c, int i, int n);
    // ...
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T15:09:14.177

这些函数是通过它们的名称和签名链接的，而不是它们在类中的位置。所以不，你没有破坏 ABI。

虚函数是另一回事，因为它们（通常）通过它们在 vtable 中的位置链接。如果您始终重新编译依赖于定义顺序的标头的每个文件，这将不是问题，但如果该类存在于库中，则可能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:53:10.210

更新课程时有两件事会破坏 ABI。Mark 指出的虚函数（请记住，这并不是因为您没有将函数标记为虚函数。）

其他的东西是内联函数，因为它们使用了你的变量成员。如果您的变量成员的顺序发生变化，那么在其他软件中编译的那些内联也会中断。

正如 Russel Greene 所指出的（见评论），变量成员的顺序也会导致对齐差异，这足以改变分配对象的大小。这也会破坏您的分配（假设客户的代码使用`new`）

并且添加/删除成员可能不会破坏 ABI（您仍然可以在此处分配一个字节或在那里分配一个字......）但这通常是一个交易破坏者。

# email - 从不同于邮件服务器的 rDNS 的域发送电子邮件

> ID：10536897
> 
> 赞同：1
> 
> 时间：2012-05-10T15:05:31.417
> 
> 标签：email, dns, spam-prevention, mail-server, mx-record

我们有一个专门的服务器来存储我们的电子邮件，我们会说这个服务器的 IP 地址是 1.1.1.1。

rDNS 设置为 mail.xxxxx.com（这是 xxxxx.com 的 MX 记录，有一条指向 1.1.1.1 的 A 记录）。

我们还为一些客户托管电子邮件，例如 yyyyy.com，其 MX 记录为 mail.yyyyy.com（mail.yyyyy.com 记录中的 A 指向 1.1.1.1）。

当我们从 ASP.NET 站点发送电子邮件时，我们使用 mail.xxxxx.com 作为邮件服务器并使用专门的设置登录。无论发件人地址如何，我们都会使用这些设置，它可以是 info@xxxxx.com 或 info@yyyyy.com。

我们从不同域 mail.xxxxx.com 的邮件服务器发送发件人地址为 info@yyyyy.com 的电子邮件是否重要，但它确实具有相同的 IP？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:08:03.290

这很正常，我唯一担心的是使用与客户端相同的 IP。如果您信任客户，那么这不是问题。但是，如果您不这样做，我建议您获取更多 IP 地址，以防您的客户将您的地址列入黑名单。

在事物的领域方面，它不应该有所作为。为了更加确定，您可以为每个域添加 SPF 记录，以表明允许该域从该 IP 地址发送电子邮件。

# java - 如何在java中设置自定义货币？

> ID：10536899
> 
> 赞同：12
> 
> 时间：2012-05-10T15:05:32.977
> 
> 标签：java, format, set, currency

我试图制作手动货币。这是我的代码

```
DecimalFormat df = new DecimalFormat();
DecimalFormatSymbols dfs = new DecimalFormatSymbols();
dfs.setCurrencySymbol("$");
dfs.setGroupingSeparator('.');
dfs.setDecimalSeparator('.');
df.setDecimalFormatSymbols(dfs);
System.out.println(df.format(3333454)); 
```

程序输出为

> 3.333.454

为什么我设置的货币符号没有出现？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-10T15:15:02.417

尝试这个：

```
NumberFormat df = NumberFormat.getCurrencyInstance();
DecimalFormatSymbols dfs = new DecimalFormatSymbols();
dfs.setCurrencySymbol("$");
dfs.setGroupingSeparator('.');
dfs.setMonetaryDecimalSeparator('.');
((DecimalFormat) df).setDecimalFormatSymbols(dfs);
System.out.println(df.format(3333454)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T15:08:57.093

因为您使用[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)标准模式。您需要为您的自定义模式提供`\u00A4`货币符号。

或者你使用[`NumberFormat.getCurrencyInstance()`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#getCurrencyInstance%28%29).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:11:32.743

您已经告诉 DecimalFormat 在必须格式化货币时使用哪个货币符号。但是您还没有告诉它格式化货币。无参数构造函数使用的默认模式并不意味着格式化货币。为此使用专用模式。

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)会告诉您您需要知道的一切。

# vb.net - 如何在列表视图中获取所选项目的“价值”

> ID：10536901
> 
> 赞同：1
> 
> 时间：2012-05-10T15:05:34.367
> 
> 标签：vb.net

我在 vb.net 中使用 listView 来显示一些详细信息（例如，班级中学生的示例列表）。我需要获取他们的 student_id ，这是学生表中的主键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:08:37.233

如果您使用 WinForms，我怀疑，当您将项目添加到列表视图时，您应该将标签设置为整个 DataRow 对象或 student_id 列的值。然后，在您引用该项目的任何地方，您都可以访问该项目的标签属性以获取必要的信息。例如，这样的事情会起作用：

```
For Each row As DataRow In table
    Dim item As ListViewItem = ListView1.Items.Add(row("student_name").ToString())
    item.Tag = row(row("student_id").ToString())
Next 
```

然后像这样的代码来获取学生 ID 和项目：

```
Private Sub ListView1_ItemSelectionChanged(ByVal sender As Object, ByVal e As System.Windows.Forms.ListViewItemSelectionChangedEventArgs) Handles ListView1.ItemSelectionChanged
    Dim studentId As String = CType(e.Item.Tag, String)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:19:07.367

使用[ListView.SelectedValue 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.selectedvalue.aspx)

# c++ - 在 Qt 4.8 中集成 OGRE 1.7.3

> ID：10536902
> 
> 赞同：4
> 
> 时间：2012-05-10T15:05:35.050
> 
> 标签：c++, qt, qt4, ogre3d

我尝试将 ogre3d 小部件嵌入 Ubuntu 上的 qt 小部件，但我们看到黑屏。

当我们使用 ogre::Root::RenderWindow 而不使用父窗口小部件（作为主窗口）时，一切正常。但是当我们创建 ogre::Root::RenderWindow 作为其他主窗口的子窗口时，我们会遇到 ogre 无法工作。

这是代码：

cpp： http: [//pastebin.com/Rbxa5btj](http://pastebin.com/Rbxa5btj)

标题： http: [//pastebin.com/F4w5eQ7d](http://pastebin.com/F4w5eQ7d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T17:51:31.980

我遇到了这个问题，我需要调用`XSync`如下所示的方法。这是`OgreWidget::initialize`方法的一部分，其中`OgreWidget`子类`QWidget`. `initialize`被调用作为构造的一部分`OgreWidget`，之后`m_OgreRoot`被分配并且渲染系统被设置。

```
setAttribute(Qt::WA_PaintOnScreen, true);
setAttribute(Qt::WA_NoSystemBackground, true);

setFocusPolicy(Qt::StrongFocus);

Ogre::String winHandle;
QX11Info info = x11Info();
winHandle = Ogre::StringConverter::toString((unsigned long)(info.display()));
winHandle += ":";
winHandle += Ogre::StringConverter::toString((unsigned int)(info.screen()));
winHandle += ":";
winHandle += Ogre::StringConverter::toString((unsigned long)(winId()));

Ogre::NameValuePairList params;
params["parentWindowHandle"] = winHandle;
params["FSAA"] = Ogre::String("8");

int w = width();
int h = height();
// Need to call XSync or the window handles will be invalid.
XSync(info.display(), False);
m_OgreWindow =
      m_OgreRoot->createRenderWindow("OgreWidget_RenderWindow",
                                     qMax(w, 640), qMax(h, 480), false, &params); 
```

这是为 Qt 5.1.0 修改的相同代码。 `QX11Info`在 Qt 5.0.x 中被删除，然后添加到 Qt 5.1.0 的“附加”组件中。新`QX11Info`类只有静态方法。

```
#include <QtX11Extras/QX11Info>
...
setAttribute(Qt::WA_PaintOnScreen, true);
setAttribute(Qt::WA_NoSystemBackground, true);

setFocusPolicy(Qt::StrongFocus);

Ogre::String winHandle;
winHandle = Ogre::StringConverter::toString((unsigned long)(QX11Info::display()));
winHandle += ":";
winHandle += Ogre::StringConverter::toString((unsigned int)(QX11Info::appScreen()));
winHandle += ":";
winHandle += Ogre::StringConverter::toString((unsigned long)(winId()));

Ogre::NameValuePairList params;
params["parentWindowHandle"] = winHandle;
params["FSAA"] = Ogre::String("8");

int w = width();
int h = height();
// Need to call XSync or the window handles will be invalid.
XSync(QX11Info::display(), False);
m_OgreWindow =
      m_OgreRoot->createRenderWindow("OgreWidget_RenderWindow",
                                     qMax(w, 640), qMax(h, 480), false, &params); 
```

# algorithm - 如何理解代码：计算 range(0:a) 中 1 的个数

> ID：10536903
> 
> 赞同：2
> 
> 时间：2012-05-10T15:05:40.823
> 
> 标签：algorithm, recurrence

我看到一个代码用于计算范围（0，a）中所有整数中的 1 位总数。

```
int count(int a)
{
    int sum = 0;
    while(a)
    {
        sum +=1;
        a = a & (a-1);
    }
    return sum;
}
long solve(int a)
{
 if(a == 0) return 0 ;
 if(a % 2 == 0) return solve(a - 1) + count(a) ;
 return ((long)a + 1) / 2 + 2 * solve(a / 2) ;
} 
```

我可以理解计数功能，但真的无法理解求解中的递归：

```
if (a%2 ==1)
   solve(a) = (a+1)/2 + 2* solve(a/2) 
```

有没有人可以解释一下？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:15:32.007

假设你有号码`n = 2X+1`并且你想找到

```
solve(n) = sum of count(i) for 0<=i<=n 
```

这等于：

```
solve(n) = sum of count(2j)+count(2j+1) for 0<=j<=X 
```

由于`count(2j+1) = count(2j)+1`和`count(2j) = count(j)`，您可以简化为：

```
solve(n) = sum of 2*count(2j)+1 for 0<=j<=X
         = sum of 2*count(j)+1 for 0<=j<=X
         = 2*(sum of count(j) for 0<=j<=X) + (sum of 1 for 0<=j<=X)
         = 2*solve(X) + X + 1
         = 2*solve(floor(n/2)) + (n+1)/2 
```

这是你的递归关系。

如果`n`是偶数（因此不是形式`2X+1`），您可以使用公式

```
solve(n) = count(n) + solve(n-1) 
```

这直接来自上述`solve`作为总和的定义。

# asp-classic - 使用 amazon SES 在经典 asp 中发送电子邮件

> ID：10536907
> 
> 赞同：3
> 
> 时间：2012-05-10T15:05:57.130
> 
> 标签：asp-classic, amazon-web-services, amazon-ses, cdo.message

我正在尝试使用 Amazon SES 发送一封测试电子邮件，但没有成功：

```
Dim iMsg, iConf, Flds
Set iMsg = CreateObject("CDO.Message")
Set iConf = CreateObject("CDO.Configuration")

Set Flds = iConf.Fields

Const cdoSendUsingPort = 2

With Flds
.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = cdoSendUsingPort 
.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "email-smtp.us-east-1.amazonaws.com"
.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True
.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1 'basic 
.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "ABCDE"
.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "12345"
.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 10
.Update
End With

With iMsg
Set .Configuration = iConf
.To = "bar@foo.com"
.From = "foo@bar.com"
.Subject = "test"
.TextBody = "body"
.Send
End With

response.write("sent") 
```

日志信息似乎表明身份验证有问题。不幸的是，我并不精通，也不明白我可能做错了什么。

```
Response: 250-email-smtp.amazonaws.com
Response: 250-8BITMIME
Response: 250-SIZE 10485760
Response: 250-STARTTLS
Response: 250-AUTH PLAIN LOGIN
Response: 250 Ok

Command: AUTH LOGIN

Response: 530 Must issue a STARTTLS command first

Command: MAIL FROM: [address in verified senders list]

Response: 530 Authentication required

Command: Quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:15:29.027

解决方案如下：

> 响应：530 必须先发出 STARTTLS 命令

在进行身份验证之前，您需要启用安全连接。您已经通过配置*启用*了SSL：

```
.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True 
```

将其更改为：

```
.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1 
```

（注意从`True`到的变化`1`）

# ruby - 覆盖特定实例属性的方法

> ID：10536909
> 
> 赞同：1
> 
> 时间：2012-05-10T15:06:01.993
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有一个`Invoice`继承自`ActiveRecord::Base`. `Invoice`有一个名为 的属性`tax`。我想要做的是，从`to_s`看起来`tax`像`19,00 %`.

现在，如何覆盖`to_s`实例属性的方法？

我知道，我可以在`number_with_precision`启用 I18n 的视图中执行此操作，但我希望该功能处于中心位置。这是`to_s`属性的方法。

这是完成此行为的正确方法还是有其他方法可以完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:11:37.327

您不能覆盖`to_s`属性的方法。您*可以*做的是在您的 Invoice 模型中创建一个方法，`formatted_tax`如下所示：

```
class Invoice < ActiveRecord::Base
  def formatted_tax
    # do your formatting on self.tax here
  end
end 
```

# scala - Scala 编译失败

> ID：10536912
> 
> 赞同：0
> 
> 时间：2012-05-10T15:06:17.440
> 
> 标签：scala, compiler-errors

我有一些代码，它“即时”编译（scala 2.9.1）一个scala类（即在运行时从scala应用程序代码调用scala编译器）

*有时*编译会失败（见下文）。
你能解释一下它是什么以及如何解决这个问题吗？

```
java.lang.AssertionError：断言失败
    在 scala.Predef$.assert(Predef.scala:89)
    在 scala.tools.nsc.transform.Erasure$ErasureTransformer.bridgeDefs(Erasure.scala:875)
    在 scala.tools.nsc.transform.Erasure$ErasureTransformer.addBridges(Erasure.scala:956)
    在 scala.tools.nsc.transform.Erasure$ErasureTransformer$$anon$3.preErase(Erasure.scala:1135
```

```
java.lang.AssertionError：断言失败
  在 scala.Predef$.assert(Predef.scala:89)
  在 scala.tools.nsc.symtab.InfoTransformers$InfoTransformer.insert(InfoTransformers.scala:21) 在 scala.tools.nsc.symtab.InfoTransformers$InfoTransformer.insert(InfoTransformers.scala:25)
  在 scala.tools.nsc.symtab.InfoTransformers$InfoTransformer.insert(InfoTransformers.scala:25)
```

```
java.lang.Error: no-symbol 没有所有者
  在 scala.tools.nsc.symtab.SymbolTable.abort(SymbolTable.scala:34)
  在 scala.tools.nsc.symtab.Symbols$NoSymbol$.owner(Symbols.scala:2150)
  在 scala.tools.nsc.transform.Erasure$ErasureTransformer$$anon$3.preErase(Erasure.scala:1112)
  在 scala.tools.nsc.transform.Erasure$ErasureTransformer$$anon$3.transform(Erasure.scala:1157)
```

# asp.net - asp.net onselectedindexchanged 方法位置

> ID：10536921
> 
> 赞同：3
> 
> 时间：2012-05-10T15:06:46.130
> 
> 标签：asp.net

在 GridView 中，为什么我必须在同一页面而不是 C# 文件中定义选择方法？

例如，在 index.aspx 中，我有

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="index.aspx.cs" Inherits="GridViewApp.index" %>     
<asp:GridView ID="GridView1" runat="server" 
          onselectedindexchanged="GridView1_SelectedIndexChanged" 
        DataSourceID="SqlDataSource2" AllowPaging="True" AllowSorting="True">
            <Columns>
                <asp:CommandField ShowSelectButton="True"  />
            </Columns>
        </asp:GridView> 
```

GridView1_SelectedIndexChanged，这个方法必须在 index.aspx 而不是 index.aspx.cs 中定义？

错误信息是

```
Compiler Error Message: CS1061: 'ASP.index_aspx' does not contain a definition for 'GridView1_SelectedIndexChanged' and no extension method 'GridView1_SelectedIndexChanged' accepting a first argument of type 'ASP.index_aspx' could be found (are you missing a using directive or an assembly reference?) 
```

更新：解决。清理项目后，重建它。现在可以了。构建/调试项目的正确方法是什么？如何清理缓存？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T15:37:14.523

该方法`GridView1_SelectedIndexChanged`需要在包含 的页面上定义，`GridView1`并确保您至少将其声明为`protected`

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
   //do magic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:57:13.000

你有定义背后的代码吗？你确定它正在被使用？在你的 aspx 页面的顶部，你应该有一个看起来像这样的[页面指令：](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)

```
<%@ Page Language="C#" AutoEventWireup="True" Inherits="The Class Name in index.aspx.cs" Codebehind="index.aspx.cs" %> 
```

一旦你设置好你的代码，并且你确定它正在被使用，你需要为在你的 GridView 上触发的[SelectedIndexChanged事件创建一个事件处理程序。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx)

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Write("GridView1_SelectedIndexChanged");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:09:40.650

在 aspx 页面上，您定义当特定事件发生时要调用的事件处理程序，以及您实际实现该方法的 cs 文件。

就像您的情况一样：在 aspx 页面中，您定义`SelectedIndexChanged`事件触发时`GridView1_SelectedIndexChanged`要调用的事件处理程序，并在 cs 文件中提供实现。

# solr - nutch 会爬过表格吗？

> ID：10536926
> 
> 赞同：1
> 
> 时间：2012-05-10T15:07:03.180
> 
> 标签：solr, lucene, web-crawler, nutch

我想知道 nutch 1.4 是否开箱即用。例如，如果有一个下拉列表，它会尝试从下拉列表中的项目中组合所有可能的页面吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T03:16:33.437

Nutch 通过 HTTP 请求获取所需页面的 html 源。现在页面的 html 源代码可以包含其中编码的下拉列表。如果使用复杂的脚本（如 dojo / ajax）对其进行编码，那么它将无法像浏览器那样解释它。如果在 html 源代码中立即看到下拉列表的外链接，则 nutch 将抓取这些页面。除了正常的文本内容，Nutch 还解析 html 页面的 Java 脚本部分。

现在为了验证这一点，在 bowser / wget 中打开页面。在记事本/vi 等文本编辑器中查看页面源代码。你能看到那里的下拉框的链接吗？如果是，那么 nutch 将抓取那些外链，否则不会。

# php - 减法时如何用php更新mysql

> ID：10536929
> 
> 赞同：1
> 
> 时间：2012-05-10T15:07:07.547
> 
> 标签：php, mysql

我想用 PHP 和 mySQL 更新一个表。我需要从 mysql 数据库中已经存在的值中添加或减去我选择的任何数字。当我添加到“player_qty”时它可以正常工作，但当我减去/删除时不行。它给了我想要的信息，已经删除了这么多，但是当我检查数据库时，值是相同的——不是删除。

```
$register_query = "SELECT * FROM players WHERE player_id='$add_player_id' AND event_name = '$event_name'";
$register_check = mysql_query($register_query, $db); 
$register_found_users = mysql_num_rows($register_check);

if($_POST['button'] == "Add") {
    if($register_found_users>0){
    mysql_query("UPDATE players 
    SET  
    player_qty = player_qty + $add_player_qty,
    player_pickedup = '1', 
    event_user = '$event_user'  
    WHERE player_id = '$add_player_id'");
    $msg = $add_player_qty.' more ticket(s) added to '.$add_player_id.'.';
    } else {
    $insertSQL1 = "
    INSERT INTO players 
    (player_id, player_qty, player_adt, player_level, player_pickedup, event_name, event_type, event_end, event_user)
    VALUES 
    ('$add_player_id', '$add_player_qty', NULL, NULL, '1', '$event_name', '$event_type', '$event_end', '$event_user')";
    mysql_select_db($dbname, $db);
    $Result1 = mysql_query($insertSQL1, $db) or die(mysql_error()); 
    $msg = $add_player_id.' added to DB w/ '.$add_player_qty.' ticket(s)'; 
    }
}elseif($_POST['button'] == "Delete") {
    if($register_found_users>0){
    mysql_query("UPDATE players 
    SET  
    player_qty = player_qty - $add_player_qty,
    player_pickedup = '1', 
    event_user = $event_user 
    WHERE player_id = '$add_player_id'");
    $msg = $add_player_qty.' ticket(s) deleted from '.$add_player_id.'.';
    } else {
    $msg = $add_player_id.' not in database. Please add manually.'; 
    }
} else {
    //
}
      <!-- FORM TO ADD PLAYER TO DATABASE IF DOESN'T EXIST -->
      <form action="" method="post" enctype="multipart/form-data" name="form_add_player" id="form_add_player" style="display:<?php echo $css;?>;">

          <label for="add_player_id">PLAYER #: </label>
          <input type="text" name="add_player_id" id="add_player_id" value=""/>

          <label for="add_player_qty">QUANTITY: </label>
          <select name="add_player_qty" id="add_player_qty">
            <option value="1">1</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>

            <input name="event_end" type="hidden" id="event_end" value="<?php echo $row_get_type['event_end'];?>" />
            <input type="submit" name="button" value="Add" class="button">
            <input type="submit" name="button" value="Delete" class="button">          

      </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:14:16.347

在您的减法查询中，您没有设置`'`您的条目值之一 - 可能这会导致 mysql 错误，因此查询不会被执行。

```
mysql_query("UPDATE `players` 
 SET  
 `player_qty` = `player_qty` - $add_player_qty,
 `player_pickedup` = '1', 
 `event_user` = '$event_user'
 WHERE `player_id` = '$add_player_id'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:16:27.480

在所有查询中将 $add_player_qty 替换为 '$add_player_qty'

# java - 读取和写入 SecretKey 到文件

> ID：10536930
> 
> 赞同：6
> 
> 时间：2012-05-10T15:07:07.660
> 
> 标签：java, cryptography

我希望能够将 DES SecretKey 保存到文件中，以便您以后可以导入和使用它。看了几条路线，都觉得有点啰嗦，难道就没有简洁简单的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T15:49:14.050

在 Java 中将 a保存到文件中最“自然”的方法`SecretKey`是使用[a`KeyStore`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html) : 这正是它的用途（当然，您也可以保存证书）。

[文档](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html)中的示例显示了如何保存私钥和密钥。它还将使用保护参数（此处为密码）对其进行加密。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T15:37:18.440

`javax.crypto.SecretKey extends java.security.Key`

`java.security.Key extends java.io.Serializable`

因此，如果您信任存储密钥的文件系统，您可以使用 写出密钥`java.io.ObjectOutputStream`并在 using 中读取它`java.io.ObjectInputStream`。

```
ObjectOutputStream oout = new ObjectOutputStream(outputStream);
try {
  oout.writeObject(myKey);
} finally {
  oout.close();
} 
```

并且输入看起来相似

```
Key key;
ObjectInputStream oin = new ObjectInputStream(inputStream);
try {
  key = (Key) oin.readObject();
} finally {
  oin.close();
} 
```

要生成密钥，您需要一个`KeyFactory`或[`SecretKeyFactory`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/SecretKeyFactory.html)

```
SecretKeyFactory factory = SecretKeyFactory.getInstance(algorithm); 
```

然后生成一个秘密

```
factory.generateSecret(keySpec); 
```

给定一个适合算法的关键规范。有关算法特定实现的指针，请参见[`KeySpec`javadoc 。](http://docs.oracle.com/javase/7/docs/api/java/security/spec/KeySpec.html)`KeySpec`

对于 DES，看看[`DESKeySpec`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/DESKeySpec.html)你可能想要[更现代](http://en.wikipedia.org/wiki/Cryptography_standards#Encryption_standards)的 .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T15:51:04.733

不清楚一些事情：您认为“冗长”，您如何生成密钥，以及您拥有的密钥格式。如果您没有密钥，您可以使用 keytool （一个实用程序附带jdk) 生成它并将其放入一个称为密​​钥库的文件中。您还可以使用 KeyGenerator 类和 KeyStore 类以编程方式执行相同的操作（两者都有很好的文档，并且[KeyStore javadoc](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)有一个示例，它完全符合您的要求。）

如果这很冗长，您可以生成密钥并将其作为明文放入文本文件中。然后您可以使用 BufferedReader 访问它。这不太安全，因为任何有权访问此文件的人都会知道您的密钥，但这更容易一些。

# facebook - Facebook 请求权限无法显示在框架中

> ID：10536932
> 
> 赞同：0
> 
> 时间：2012-05-10T15:07:12.337
> 
> 标签：facebook

我有一个网络应用程序，允许用户将他们的 Facebook 帐户绑定到我们网站的登录名，并可以互换使用它们。

在 Internet Explorer 8 和 9 中，登录 FB 的用户在尝试将他们的 FB 帐户与我们的帐户连接时收到错误消息。 ![FB 无法在帧错误中显示](../Images/d58c8a19ab650036153daa8779dc61f2.png)

当我单击错误消息中的链接时，我得到以下页面： ![FB 端点已弃用](../Images/90543d4645d4e150871c209718293d1f.png)

我在 [http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php使用了一个非常旧的 API 版本 v0.4](http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php)

javascript代码是：

```
FB_RequireFeatures(["Api"], function()
    {
        FB.init("<?php echo HSWI_FB_KEY ?>", "/xd_receiver.htm");
        var api = FB.Facebook.apiClient;
        var permissions = 'email,publish_stream';
        FB.Connect.showPermissionDialog(permissions, function(response)
        {
            if(response.indexOf("publish_stream") === -1)
            {
                // user denied the publish_stream extended permission
                $("input.fb_publish_stream").each(
                    function(i)
                    {
                        this.checked = false;
                    }
                );
            }

            api.users_hasAppPermission('email', function(response2)
            {
                if(response.indexOf("email") === -1 && response2 !== 1)
                {
                    // user denied the email extended permission
                    // showAskForEmail();
                }
                else
                {
                    $('#facebookRegForm').submit();
                }
            });
        });
    }); 
```

这曾经有效，页面上的任何内容都没有改变。

我是 FB 集成的新手，这是我继承的一个项目。

是否有已知的解决方法？

我是否必须更新我的 API 版本？

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:12:40.933

我将我的 FB SDK 代码更新为最新版本的 JS（异步）和 PHP SDK（v.3.1.1）。

这解决了我的问题。

# sql - 具有分组依据的通用 SQL 查询

> ID：10536938
> 
> 赞同：0
> 
> 时间：2012-05-10T15:07:30.963
> 
> 标签：sql, group-by

[**请点击此处查看示例表格和说明**。](http://www.dbasupport.com/forums/attachment.php?attachmentid=587&d=1336661439)

根据附加图像，我有两个表“VEHICLE”和“VEHICLE_CLASS”。

我需要一个查询来获取结果行，其中每个 VEHICLE_CLASS 按状态分组了多少 VEHICLES，如附图所示。

查询应该是通用的，以便可以在任何数据库（MySQL/Oracle/MSSQL/DB2）中使用

请帮忙。

```
CREATE TABLE VEHICLE 
(
    VEHICLE_ID varchar(20), 
    VEHICLE_CLASS_ID varchar(30),
    STATUS int
);

CREATE TABLE VEHICLE_CLASS
(
    VEHICLE_CLASS_ID varchar(30),
    VEHICLE_CLASS_NAME varchar(30)
);

INSERT INTO VEHICLE
   (VEHICLE_ID, VEHICLE_CLASS_ID, STATUS)
VALUES
   ('vehicle_001', 'vehicle_class_001', 0),
   ('vehicle_002', 'vehicle_class_002', 1),
   ('vehicle_003', 'vehicle_class_003', 2),
   ('vehicle_004', 'vehicle_class_001', 0),
   ('vehicle_005', 'vehicle_class_002', 2),
   ('vehicle_006', 'vehicle_class_001', 0),
   ('vehicle_007', NULL, 1);

INSERT INTO VEHICLE_CLASS
   (VEHICLE_CLASS_ID, VEHICLE_CLASS_NAME)
VALUES
   ('vehicle_class_001', 'ABC'),
   ('vehicle_class_002', 'BCD'),
   ('vehicle_class_003', 'EFG'); 
```

这是我尝试但无法获得所需结果的查询：

```
SELECT veh.VEHICLE_CLASS_ID, vehclass.VEHICLE_CLASS_NAME, 
    SUM( CASE WHEN veh.STATUS=2 THEN COUNT(veh.VEHICLE_ID) end) Completed,
    SUM( CASE WHEN veh.STATUS!=2 THEN COUNT(veh.VEHICLE_ID) end) not_completed
FROM VEHICLE veh LEFT JOIN VEHICLE_CLASS vehclass on veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID
    GROUP BY veh.VEHICLE_CLASS_ID having veh.VEHICLE_CLASS_ID is not null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:11:30.930

你在哪里很近。而不是 `SUM( CASE WHEN veh.STATUS=2 THEN COUNT(veh.VEHICLE_ID)`它，然后是 1 并且您还需要按 VEHICLE_CLASS_NAME 分组（在 MySQL 中除外，但您希望它在其他人中工作）。

```
SELECT veh.VEHICLE_CLASS_ID, 
       vehclass.VEHICLE_CLASS_NAME, 
       Sum(CASE 
             WHEN veh.STATUS = 2 THEN 1 
           END) Completed, 
       Sum(CASE 
             WHEN veh.STATUS <> 2 THEN 1 
           END) not_completed 
FROM   VEHICLE veh 
       LEFT JOIN VEHICLE_CLASS vehclass 
         ON veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID 
GROUP  BY veh.VEHICLE_CLASS_ID, 
          vehclass.VEHICLE_CLASS_NAME 
HAVING veh.VEHICLE_CLASS_ID IS NOT NULL; 
```

[演示 SQL 服务器](http://sqlfiddle.com/#!3/c175a/6)

[演示 MySQL](http://sqlfiddle.com/#!2/c175a/2)

[演示甲骨文](http://sqlfiddle.com/#!4/b66b1/2)

**笔记**

*   正如 Lamak 指出的那样`<>`，通常使用它，但它似乎`!=`得到了很好的支持，但你需要测试
*   我没有添加`Else 0`因为图像在 SUM_not_completed 中包含一个空格。`COALACE`如果您确实想要零，您可以选择这样做或添加
*   如果您知道您在 MySQL 中，您可以删除`CASE`并执行`Sum(veh.STATUS = 2) Completed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:12:39.483

试试这个：

```
SELECT  veh.VEHICLE_CLASS_ID, 
        vehclass.VEHICLE_CLASS_NAME, 
        SUM(CASE WHEN veh.STATUS = 2 THEN 1 ELSE 0 END) Completed,
        SUM(CASE WHEN veh.STATUS <> 2 THEN 1 ELSE 0 END) not_completed
FROM VEHICLE veh 
LEFT JOIN VEHICLE_CLASS vehclass 
ON veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID
WHERE veh.VEHICLE_CLASS_ID IS NOT NULL
GROUP BY veh.VEHICLE_CLASS_ID, vehclass.VEHICLE_CLASS_NAME; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:13:17.793

也许是这样的：

```
SELECT
    VEHICLE_CLASS.VEHICLE_CLASS_NAME,
    (
        SELECT
            COUNT(*)
        FROM
            VEHICLE
        WHERE
            VEHICLE.STATUS=2
            AND VEHICLE.VEHICLE_CLASS_ID=VEHICLE_CLASS.VEHICLE_CLASS_ID
    ) AS SUM_Completed,
    (
        SELECT
            COUNT(*)
        FROM
            VEHICLE
        WHERE
            VEHICLE.STATUS IN (1,0)
            AND VEHICLE.VEHICLE_CLASS_ID=VEHICLE_CLASS.VEHICLE_CLASS_ID
    ) AS SUM_Not_Completed
FROM
    VEHICLE_CLASS 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:13:44.813

```
select vehclass.VEHICLE_CLASS_NAME,
    SUM(case when veh.status = 2 then 1 end) Completed,
    SUM(case when veh.status != 2 then 1 end) not_completed
from VEHICLE veh
left join VEHICLE_CLASS vehclass on veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID
where veh.VEHICLE_CLASS_ID is not null
group by veh.VEHICLE_CLASS_NAME 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T15:17:50.273

```
SELECT VC.VEHICLE_CLASS_ID, VC.VEHICLE_CLASS_NAME, 
    SUM(CASE WHEN V.STATUS=2 THEN 1 ELSE 0 END) Completed,
    SUM(CASE WHEN V.STATUS!=2 THEN 1 ELSE 0 END) not_completed
FROM VEHICLE V
    JOIN VEHICLE_CLASS VC on V.VEHICLE_CLASS_ID = VC.VEHICLE_CLASS_ID
GROUP BY VC.VEHICLE_CLASS_ID, VC.VEHICLE_CLASS_NAME 
```

# spring - SpringMVC Maven 休眠项目

> ID：10536940
> 
> 赞同：0
> 
> 时间：2012-05-10T15:07:37.440
> 
> 标签：spring, hibernate, maven, spring-mvc

嗨，我是使用 Spring MVC 的新手，我最近创建了一个我在网上关注的项目。运行时出现错误：

org.springframework.beans.factory.BeanDefinitionStoreException：IOException 从 ServletContext 资源 [/WEB-INF/spring-servlet.xml] 解析 XML 文档；嵌套异常是 java.io.FileNotFoundException: 无法打开 ServletContext 资源 [/WEB-INF/spring-servlet.xml]

```
The spring-servlet is in the root of the WEB-INF directory 

The following is my code

spring-servlet.xml

    <?xml  version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:jee="http://www.springframework.org/schema/jee"
        xmlns:lang="http://www.springframework.org/schema/lang"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
            http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

        <context:annotation-config />
        <context:component-scan base-package="net.viralpatel.contact.controller" />

        <bean id="jspViewResolver"
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="viewClass"
                value="org.springframework.web.servlet.view.JstlView" />
            <property name="prefix" value="/WEB-INF/view/" />
            <property name="suffix" value=".jsp" />
        </bean>

        <bean id="messageSource"
            class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
            <property name="basename" value="classpath:messages" />
            <property name="defaultEncoding" value="UTF-8" />
        </bean>
        <bean id="propertyConfigurer"
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
            p:location="/WEB-INF/jdbc.properties" />

        <bean id="dataSource"
            class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
            p:driverClassName="${jdbc.driverClassName}"
            p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
            p:password="${jdbc.password}" />

        <bean id="sessionFactory"
            class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="configLocation">
                <value>classpath:hibernate.cfg.xml</value>
            </property>
            <property name="configurationClass">
                <value>org.hibernate.cfg.AnnotationConfiguration</value>
            </property>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                    <prop key="hibernate.show_sql">true</prop>
                </props>
            </property>
        </bean>

        <tx:annotation-driven />
        <bean id="transactionManager"
            class="org.springframework.orm.hibernate3.HibernateTransactionManager">
            <property name="sessionFactory" ref="sessionFactory" />
        </bean>
    </beans>
    web.xml

     <?xml version="1.0" encoding="UTF-8"?>
        <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://java.sun.com/xml/ns/javaee"
            xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
            id="WebApp_ID" version="2.5">
            <display-name>Spring3-Hibernate</display-name>
            <welcome-file-list>
                <welcome-file>list.html</welcome-file>
            </welcome-file-list>
            <servlet>
                <servlet-name>spring</servlet-name>
                <servlet-class>
                    org.springframework.web.servlet.DispatcherServlet
                </servlet-class>

                <load-on-startup>1</load-on-startup>
            </servlet>
            <servlet-mapping>
                <servlet-name>spring</servlet-name>
                <url-pattern>/</url-pattern>
            </servlet-mapping>
        </web-app>

RUNTIME ERRORS;

HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: Servlet.init() for servlet spring threw exception
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:662)

root cause 

org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/spring-servlet.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]...........................................

CONSOLE ERRORS:

May 10, 2012 10:46:44 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jdk1.6.0_25\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\apache-maven-3.0.4\bin;C:\flex_sdk_4.6\bin\bin;C:\jboss\bin%;C:\Program Files\Apache Software Foundation\Tomcat 7.0;C:\ant\bin;C:\Program Files\Java\jdk1.7.0_04\bin;C:\Program Files\Java\jdk1.6.0_29\bin;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Windows;C:\Windows\system32
May 10, 2012 10:46:44 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Spring3HibernateMaven' did not find a matching property.
May 10, 2012 10:46:44 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MVCTest' did not find a matching property.
May 10, 2012 10:46:44 AM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8400
May 10, 2012 10:46:44 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 350 ms
May 10, 2012 10:46:44 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
May 10, 2012 10:46:44 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.33
May 10, 2012 10:46:44 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Thu May 10 10:46:44 BOT 2012]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@908881: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 352 ms
May 10, 2012 10:46:45 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'appServlet'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'appServlet-servlet': startup date [Thu May 10 10:46:45 BOT 2012]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2d95b3: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,homeController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@908881
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.test.myapp.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 661 ms
log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.StandardServletEnvironment).
log4j:WARN Please initialize the log4j system properly.
May 10, 2012 10:46:46 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
May 10, 2012 10:46:46 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/spring-servlet.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    ... 33 more
May 10, 2012 10:46:46 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /Spring3HibernateMaven threw load() exception
java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
May 10, 2012 10:46:46 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8400
May 10, 2012 10:46:46 AM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
May 10, 2012 10:46:46 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/39  config=null
May 10, 2012 10:46:46 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2043 ms
May 10, 2012 10:46:55 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
May 10, 2012 10:46:55 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/spring-servlet.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    ... 28 more
May 10, 2012 10:46:55 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet spring
java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:37:27.667

Spring 期望来自 DispatcherServlet 的 spring-servlet.xml。来自 Spring 文档

> 在初始化 DispatcherServlet 时，Spring MVC 在您的 Web 应用程序的 WEB-INF 目录中查找名为 [servlet-name]-servlet.xml 的文件并创建在那里定义的 bean，覆盖任何同名定义的 bean 的定义在全球范围内。

在 servlet 中定义不同的应用程序上下文（我通常将默认的 applicationContext.xml 移动到 servlet 中）或创建该文件。

# asp.net - 在 VisualStudio 网站项目上构建操作

> ID：10536943
> 
> 赞同：0
> 
> 时间：2012-05-10T15:07:52.977
> 
> 标签：asp.net, visual-studio, visual-studio-2010, publish, publishing

我需要将任意文件类型添加到 VisualStudio**网站**项目并让它们与站点一起发布。

将项目转换为 Web 应用程序根本不是一种选择，因为它很大。

我需要我的发布包含（复制）随机文件，例如许可证 (.lic) 和其他文件。

我当前的问题是 Bin 文件夹中的 .lic 库许可证。我需要在发布时将其复制。有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:54:54.880

将 bin 文件夹添加到您的网站项目中，将许可证文件添加到其中，然后使用菜单中的网站 -> 复制网站选项并复制许可证文件。在这里，您可以完全控制将哪些文件部署到何处。

# facebook - 无法让 facebook 的“like”按钮在这个网站上工作，有什么想法吗？

> ID：10536950
> 
> 赞同：0
> 
> 时间：2012-05-10T15:08:10.620
> 
> 标签：facebook, facebook-like

这是站点>>（已删除）***自从发布此问题以来，该站点已被重做，因此没用。***

我正在使用一个插件，并且还尝试使用这里解释的常用 facebook like 按钮：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

无论如何，like 按钮根本不起作用或似乎有一个# url。

我在 StackExchange 中查看了任何类似的问题，但所有问题似乎都不同，任何想法或答案链接都将受到高度赞赏。

示例代码：

真的没有太多代码可以展示，只有 facebook 在他们的网站上给你的代码，像这样：

这紧跟在标签之后：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) return;
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));</script> 
```

这在我希望按钮出现的位置：

```
<div class="fb-like" data-href="http://www.elsolitario.com/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

它应该是那么简单，但似乎无论如何都行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:29:43.043

It appears that you forgot to add appId parameter in

```
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1 
```

it should be

```
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=YOUR_APP_ID 
```

Here's some code i'm using... Header:

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
 <script src="http://connect.facebook.net/en_US/all.js"></script> 
```

Right after header:

```
<div id="fb-root"></div>
<script>
  FB.init({
    appId  : 'YOUR_APP_ID',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    oauth  : true // enable OAuth 2.0
  });
</script> 
```

And the button wherever you need it:

```
<fb:like href="YOUR_LINK" show_faces='false' layout="button_count" stream='false' header='false'></fb:like> 
```

# jquery - 从父母中选择最后一个元素

> ID：10536955
> 
> 赞同：0
> 
> 时间：2012-05-10T15:08:27.250
> 
> 标签：jquery

我对 JQuery 很陌生，所以这可能是一个简单的...

考虑一下这个 HTML 结构——我知道它不是有效的 HTML，但这不是重点：

```
<table id="mytable">
<tr>
    <td><input type="checkbox" checked="checked" /></td>
    <td>1.2</td>
    <td>1.3</td>
</tr>
<tr>
    <td><input type="checkbox" checked="checked" /></td>
    <td>2.2</td>
    <td>2.3</td>
</tr>
<tr>
    <td><input type="checkbox" /></td>
    <td>3.2</td>
    <td>3.3</td>
</tr>
</table> 
```

基本上我需要从标记了复选框的每个表格行中选择最后一个表格单元格，在这种情况下，表格单元格包含“1.3”和“2.3”（不是“3.3”）。找到选中的复选框很容易，但不知何故，我总是只得到最后一个表格行中的最后一个表格单元格（“2.3”）。有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:11:14.847

可能是这样的：

```
var foo = $('#mytable tr:has("input:checked") td:last-child'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:14:49.573

```
var result;

$('#mytable tr').each(function() {
    if ($(this).find('input').attr('checked') == 'checked') {           
        result = $(this).children('td:last-child').html();
        alert(result);
    }       
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:18:58.510

可能有更简单的方法可以做到这一点，但这是我的解决方案：

```
$("#mytable td input:checked")
    .parent().parent()
    .find("td:last")
    .css("color","red");​ 
```

要查看一个工作示例：http: [//jsfiddle.net/exQZJ/](http://jsfiddle.net/exQZJ/)

# ruby-on-rails-3 - Devise gem 对 database_authenticable 使用什么加密策略？

> ID：10536962
> 
> 赞同：1
> 
> 时间：2012-05-10T15:08:43.960
> 
> 标签：ruby-on-rails-3, devise

只是想知道它是否使用 MD5 或什么来加密密码。准备技术文档，只想彻底。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:14:38.720

默认情况下，它使用 bcrypt。但是也支持其他人

# c# - 会话超时后 System.Security.Principal.Identity.IsAuthenticated 的设置是什么？

> ID：10536963
> 
> 赞同：0
> 
> 时间：2012-05-10T15:08:53.070
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我目前正在添加一个操作过滤器来处理我们网站中的会话超时：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
public class SsoExpireFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if(!(filterContext.Controller.GetType() == typeof(HomeController) 
            && filterContext.ActionDescriptor.ActionName == MVC.Home.ActionNames.Index))
        {
            if(filterContext.ActionDescriptor.ActionName != MVC.Home.ActionNames.TimeoutRedirect.ToLower())
            {
                if (!Thread.CurrentPrincipal.Identity.IsAuthenticated)
                {
                    if (filterContext.HttpContext.Request.IsAjaxRequest())
                        filterContext.Result = new JsonResult { Data = "_Logon_" };
                    else
                        filterContext.Result = new RedirectToRouteResult(
                            new RouteValueDictionary
                        {
                            {"Controller", "Home"},
                            {"Action", "TimeoutRedirect"}
                        });
                }
            }
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

我期望 Principal.Identity 上的 IsAuthenticated 标志在超时后为假，但是当它在动作过滤器中被击中时它仍然是真的。（我知道会话已经超时，因为我在 Global.asax 中的 Session_End 上设置了一个断点，这是第一个命中的）。

我们网站的身份验证由公司标准的“单点登录”dll 处理，所以我猜这是在设置单独的身份验证超时，这听起来可能吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:17:21.083

我想你想用 HttpContext.User.Identity 替换 Thread.CurrentPrincipal.Identity.IsAuthenticated

我认为您对 Thread.CurrentPrincipal 所做的事情是询问正在为您的服务器上的 Web 应用程序提供服务的用户是否经过身份验证。您要做的是询问用户是否已通过身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:40:21.243

会话和身份验证 cookie 是不同的东西。您可以拥有仍然经过身份验证但会话已过期的用户。看看这篇文章：[asp.net cookies, authentication and session timeouts](https://stackoverflow.com/questions/454616/asp-net-cookies-authentication-and-session-timeouts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:26:36.490

可能有点逃避，但在与业务中的其他团队协商后，我将遵循使用公司“单点登录”dll 并使用 Session.KeepAlive 方法的其他站点的模型，所以我将没有需要这个动作过滤器。

# tsql - 将两个表连接在一起

> ID：10536968
> 
> 赞同：0
> 
> 时间：2012-05-10T15:09:05.300
> 
> 标签：tsql

我有一个`select`查询以下列方式返回两列。如果它有助于解决问题，我可以将它放在临时表中或将其设为 CTE。问题在后面列出。

```
id     (cnt)
28002   11
28010   14
28029   13
28037   7
28045   6
28053   3
28061   6
28070   5
28100   5
28118   10
29009   1 
```

但我现在想从另一个具有以下定义的表中选择

```
id
sub_id
numberOfObjects 
```

所以样本数据可能是

```
id      sub_id    numberofObjects
28002   203125        10
28002   203126        56
28002   203127        75
28002   203128        76
28002   203129        5
28002   203130        50
28061   203131        26
28061   203132        7
28061   203133        14
28061   203134        32
29009   105678        33 
```

如您所见，一个`id`有很多`sub_id`.

## 我的目标：

对于第一个 select 语句中的每个 id，我希望它与第二个 select 语句中的 id 匹配，并提取 numberOfObjects 小于 15 的所有 sub_ids

所以我的结果应该是

```
id      sub_id    numberofObjects
28002   203125        10

28002   203129        5

28061   203132        7
28061   203133        14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:27:49.503

这个怎么样：

```
SELECT f.id
    , ot.sub_id
    , ot.numberofobjects
FROM 
      ( ...first query...) f
JOIN otherTable ot
  ON ot.id = f.id
WHERE ot.numberofobjects < 15 
```

如果您希望主 id 出现，即使没有 subid 少于 15...

```
SELECT f.id
    , ot.sub_id
    , ot.numberofobjects
FROM 
      ( ...first query...) f
LEFT JOIN otherTable ot
  ON ot.id = f.id
  AND ot.numberofobjects < 15 
```

是的，您可以使用 CTE 而不是内联视图。

# iphone - ipad 上的 zxing 库无法识别条形码

> ID：10536971
> 
> 赞同：2
> 
> 时间：2012-05-10T15:09:13.227
> 
> 标签：iphone, objective-c, ipad, zxing

我正在开发两个独立的项目（用于 iphone 和 ipad）。设备摄像头使用库扫描条形码`zxing`并将其文本填充到`UILabel`. 在 iPhone 上一切正常，但在 ipad 上 zxing 无法识别条形码。这是我的启动代码：

```
-(IBAction)scanWithCameraButtonPressed:(id)sender
{
    NSLog(@"scanWithCameraButtonPressed: called");

    ZXingWidgetController *widController = [[ZXingWidgetController alloc] initWithDelegate:self showCancel:YES OneDMode:NO];

    NSMutableSet *readers = [[NSMutableSet alloc ] init];

    //QRCodeReader* qrcodeReader = [[QRCodeReader alloc] init];
    //[readers addObject:qrcodeReader];

    //AztecReader *aztecReader = [[AztecReader alloc] init];
    //[readers addObject:aztecReader];

    //DataMatrixReader *dataMatrixReader=[[DataMatrixReader alloc] init];
    //[readers addObject:dataMatrixReader];

    //MultiFormatOneDReader *multiFormatOneDReader=[[MultiFormatOneDReader alloc] init];
    //[readers addObject:multiFormatOneDReader];

    MultiFormatUPCEANReader *multiFormatUPCEANReader=[[MultiFormatUPCEANReader alloc] init];
    [readers addObject:multiFormatUPCEANReader];

    widController.readers = readers;

    NSBundle *mainBundle = [NSBundle mainBundle];
    widController.soundToPlay =
    [NSURL fileURLWithPath:[mainBundle pathForResource:@"beep-beep" ofType:@"aiff"] isDirectory:NO];
    [self presentModalViewController:widController animated:YES];
} 
```

我正在使用 iOS 5.0 的 iphone 3gs 上测试这些应用程序 <- 在 iOS 5.1 的 ipad2 上工作 <- 无法识别

所有的zxing链接过程都是一样的，代码是一样的。

请帮帮我，问题出在哪里？

# .net - 将 DLL 报告回主窗体

> ID：10536974
> 
> 赞同：1
> 
> 时间：2012-05-10T15:09:17.157
> 
> 标签：.net, visual-studio, design-patterns

我正在使用 GUI 模式（一个项目）和控制台模式（另一个项目）构建一个 .NET 解决方案。这些项目中的每一个都引用了一个共享类库，该类库包含每个应用程序背后的共享逻辑内容。我希望 DLL 尽可能与每个客户端应用程序隔离。如何让 DLL 向 gui 报告进度？现在，GUI 项目引用了 DLL。VS2010 / .NET 不允许我从 DLL 中引用 GUI，因为这将是一个循环引用。

我怎样才能做到这一点？在 .NET 设计或软件设计中如何处理这个问题有什么一般原则吗？有没有办法在不引用调用项目的情况下使用回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:17:48.627

打破循环引用的最简单方法是创建两个模块都引用的另一个库。

另一种选择是使用可以由逻辑 DLL 引发并在 gui/console 部分中处理的事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:54:58.430

在我看来，您需要在您的 DLL 中添加一个自定义事件，然后将其附加到您的 GUI 中。

这里有一些代码使它更容易理解。

首先让我们创建一个 DLL 的模拟，它执行类似于加载的操作，还定义了一个我们可以在我们的 GUI 中附加到接收完成百分比的事件：

```
public class MyDLLType
{
  public decimal PercentageComplete = 5;

  public event EventHandler<CustomEventArgs> StatusChanged;

  public virtual void OnStatusChanged(CustomEventArgs e)
  {
   if(StatusChanged != null)
   {
      StatusChanged(this, e);
   }
  }

  public void DoSomething()
  {

     var eventArgs = new CustomEventArgs();
     eventArgs.PercentageComplete = PercentageComplete;

     OnStatusChanged(eventArgs);

     if(PercentageComplete < 100)
     {
       Thread.Sleep(500);
       PercentageComplete++;
       DoSomething();
     }
  }
} 
```

现在我们有了一个模拟 DLL，它`StatusChanged`为我们的 GUI 提供了一个要挂钩的事件。这是一个利用这一点的模拟 GUI：

```
public class MyGUI
{
void Main()
{
    var myNiceDLLType = new MyDLLType();
    myNiceDLLType.StatusChanged += UpdateStatusChange;
    myNiceDLLType.DoSomething();
}

public void UpdateStatusChange(object sender, CustomEventArgs e)
{
 var percentageComplete = e.PercentageComplete;
 Console.WriteLine(percentageComplete);
}
} 
```

和宾果游戏，我们的 GUI 正在从 DLL 接收完整的百分比，而 DLL 不需要了解有关 GUI 的任何信息。

我在上面使用的 CustomEventArgs 如下所示：

```
public class CustomEventArgs : EventArgs
{
    public decimal PercentageComplete{get;set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:12:18.573

如果设计是这样的，它需要循环引用，恕我直言，您应该在必要的地方重新设计那部分代码。

我建议将相关代码放到[codereview.stackexchange.com](http://codereview.stackexchange.com)

# entity-framework - 从六月 CTP EF 4.2 升级

> ID：10536976
> 
> 赞同：0
> 
> 时间：2012-05-10T15:09:29.730
> 
> 标签：entity-framework, ef-code-first

我们目前正在开发一个首先使用 EF 代码的应用程序（EF 2011 年 6 月 CTP）。

我的第一个问题是：是否值得尝试升级以使用更高版本的 EF？

其次，如果是这样，是否有人知道升级所涉及的步骤 - 当我尝试为 EF 5.0 - beta 2 安装 NuGet 包时，我最终会遇到问题，因为目标框架仍然是 4.2。

非常感谢，

詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:18:21.217

CTP 早就死了，没有其他版本出现，因为所有这些东西目前都是 .NET 4.5 beta 和 EF 5.0 beta 的一部分。您必须升级到这两个，升级将包括将应用程序重新定位回 .NET 4.0 / .NET 4.5，删除当前 EF 版本的所有依赖项，并为 .NET 4.5 / EF 5.0 重新添加这些依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:24:13.897

前段时间我写了一篇关于此的博客文章：http: [//blog.3d-logic.com/2012/04/11/entity-framework-zombie-aka-microsoft-entity-framework-june-2011-ctp/](http://blog.3d-logic.com/2012/04/11/entity-framework-zombie-a-k-a-microsoft-entity-framework-june-2011-ctp/)。CTP 4.2 存在许多问题，因为与将 .NET Framework 库从 .NET Framework （如 4.2 目标）交付相关的技术挑战。迁移到 .NET Framework 4.5，它包含与 EF 4.2 相同的功能集 + 错误修复并具有上线许可证。在此基础上使用 EF 5.0，您将进入一个更美好的世界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T15:18:13.867

感谢所有的回复。

我的主要问题是，我们首先在 4.2 代码的实现中严重依赖 ENUM。我试图将项目迁移到 4.5，但不支持 ENUM，并且每个层次结构的表也存在问题（这很容易修复）。下一步将是升级到 VS11 并使用 5.0 - 但这是一项艰巨的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T17:35:09.447

@jwsadler：作为 .net Framework 4.5 的一部分发布的核心 EF 库支持枚举（例如 System.Data.Entity.dll）。要使枚举与 CodeFirst/DbContext 一起使用，您确实需要 NuGet 的 EF 5.0.0 包（使用`Install-Package EntityFramework -pre`（-pre 很重要））。为此，您需要 VS 11，因为 Visual Studio 2010 不能用于创建面向 .NET Framework 4.5 的应用程序。请注意，在 Visual Studio 11 上安装 nuget 包时，会考虑为项目设置的 .NET Framework 的目标版本。如果您以 .NET Framework 4 为目标，您将无法使用 EF5 功能，例如枚举或空间。

# azure - Windows Workflow 4 Correlation Query 在实例密钥计算中包含网站实例名称并失败

> ID：10536983
> 
> 赞同：1
> 
> 时间：2012-05-10T15:09:50.993
> 
> 标签：azure, workflow-foundation-4

我正在尝试在 Azure 上托管一个长时间运行的工作流服务，但我遇到了相关问题。
我已经将 timeToUnload 和 timeToPersist 设置为 0，并且我在工作流中勾选了“发送前的持久性” - 这不是持久性的问题，它与实例键的计算方式有关。

当一个 Web 服务器启动一个工作流，而另一个 Web 服务器尝试对该工作流执行另一个操作时，它会失败并显示

> System.ServiceModel.FaultException：InstancePersistenceCommand 的执行被中断，因为实例键“12e0b449-7a71-812d-977a-ab89864a272f”未与实例关联。这可能是因为实例或密钥已被清理，或者因为密钥无效。如果生成密钥的消息在错误的时间发送或包含不正确的相关数据，则密钥可能无效。

我使用 wcf 服务诊断对此进行了深入研究，发现这是因为实例密钥的计算包括*网站实例名称*，因此给定的工作流实例只能从实例化它的同一台机器回调（*因为 Azure 设置每个角色实例上的不同网站实例名称*）。

解释一下，当我创建工作流的新实例时，我有一个活动，它获取工作流实例 Guid，然后返回该 guid，并且还使用相关初始化程序来设置相关句柄。

我在 web.config 中启用了服务跟踪，因此在服务跟踪查看器中，当我实例化工作流的新实例时，我可以看到以下情况；

```
<ApplicationData >
    <TraceData >
        <DataItem >
            <TraceRecord Severity ="Information" Channel="Analytic " xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord ">
                <TraceIdentifier >225</ TraceIdentifier>
                <Description >Calculated correlation key '496e3207-fe9d-919f-b1df-f329c5a64934' using values 'key1:10013d62-286e-4a8f-aeb2-70582591cd7f,' in parent scope '{/NewOrbit.ExVerifier.Web_IN_2_Web/Workflow/Application/}Application_default1.xamlx'.</Description >
                <AppDomain >/LM/W3SVC/1273337584/ROOT-1-129811251826070757</AppDomain >
            </TraceRecord >
        </DataItem >
    </TraceData >
</ApplicationData > 
```

重要的一行是这样的：

> 使用父范围“{/NewOrbit.ExVerifier.Web_IN_2_Web/Workflow/Application/}Application_default1.xamlx”中的值“key1:10013d62-286e-4a8f-aeb2-70582591cd7f”计算相关键“496e3207-fe9d-919f-b1df-f329c5a64934” '。

这个特定工作流实例的 Guid 是`10013d62-286e-4a8f-aeb2-70582591cd7f`这样的，工作流引擎从`496e3207-fe9d-919f-b1df-f329c5a64934`. 我可以看到带有 guid 的工作流实例，`[System.Activities.DurableInstancing].[InstancesTable]`我可以看到 .in 中的实例键`[System.Activities.DurableInstancing].[KeysTable]`。到目前为止，一切都很好，如果同一台服务器稍后调用相同的工作流程，一切正常。但是，如果*其他*服务器尝试访问工作流，我会收到上面提到的相关错误。再次查看诊断跟踪，我可以看到：

```
<TraceData >
    <DataItem >
        <TraceRecord Severity ="Information" Channel="Analytic " xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord ">
            <TraceIdentifier >225</ TraceIdentifier>
            <Description >Calculated correlation key '12e0b449-7a71-812d-977a-ab89864a272f' using values 'key1:10013d62-286e-4a8f-aeb2-70582591cd7f,' in parent scope '{/NewOrbit.ExVerifier.Web_IN_5_Web/Workflow/Application/}Application_default1.xamlx'.                     </Description >
            <AppDomain >/LM/W3SVC/1273337584/ROOT-1-129811251818669004</AppDomain >
        </TraceRecord >
    </DataItem >
</TraceData > 
```

重要的线是

> 使用父范围“{/NewOrbit.ExVerifier.Web_IN_5_Web/Workflow/Application/}Application_default1.xamlx”中的值“key1:10013d62-286e-4a8f-aeb2-70582591cd7f”计算相关键“12e0b449-7a71-812d-977a-ab89864a272f” '。

如您所见，传入的是同一个 Guid，但系统在计算 Instance key 时包含了网站实例的名称，因此最终会得到一个完全不同的实例 key。

我创建了一个全新的项目来测试它并发现了完全相同的问题。我觉得我必须做一些非常简单的错误，因为我找不到其他人有同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:50:16.027

几个月后，我找到了解决这个问题的方法。根本问题是 Azure 在每个角色实例上为网站命名不同；与“默认网站”不同，该网站被称为类似`NewOrbit.ExVerifier.Web_IN_0_Web`（给定您的 Web 项目 NewOrbit.ExVerifier.Web 的命名空间）。工作流使用网站名称作为用于计算实例密钥的算法的一部分，因此存在问题。

解决方案很简单，就是在角色启动期间重命名网站，以便在所有实例上调用相同的名称。解决根本问题而不是处理后果，如此明显，我第一次从未见过。

这是您如何执行此操作的方法（基于此：http: [//blogs.msdn.com/b/tomholl/archive/2011/06/28/hosting-services-with-was-and-iis-on-windows -azure.aspx](http://blogs.msdn.com/b/tomholl/archive/2011/06/28/hosting-services-with-was-and-iis-on-windows-azure.aspx) )

## 将 powershell 配置为具有提升的访问权限，以便在配置 IIS 后进行更改：

在`ServiceDefinition.csdef`添加一个启动任务：

```
<ServiceDefinition name="WasInAzure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="WebRole1">
      ...
      <Startup>
          <Task commandLine="setup\startup.cmd" executionContext="elevated" />
      </Startup>
  </WebRole>
</ServiceDefinition> 
```

`Setup\Startup.cmd`应该有这个内容：

```
powershell -command "set-executionpolicy Unrestricted" >> out.txt 
```

## 将角色 OnStart 配置为具有管理员权限

在`ServiceDefinition.csdef`添加这个：

```
<ServiceDefinition name="WasInAzure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="WebRole1">
  ...
    <Runtime executionContext="elevated" />
  </WebRole>
</ServiceDefinition> 
```

## 创建一个 powershell 脚本来重命名网站

创建一个`setup\RoleStart.ps1`文件：

```
write-host "Begin RoleStart.ps1"
import-module WebAdministration
$siteName = "*" + $args[0] + "*"
Get-WebSite $siteName | Foreach-Object { 
    $site = $_;
    $siteref = "IIS:/Sites/" + $site.Name;
    try {
        Rename-Item $siteref 'MyWebSite'
        write-host $siteName + " was renamed"
    }
    catch
    {
       write-host "Failed to rename " + $siteName + " : " + $error[0]
    }
}
write-host "End RoleStart.ps1" 
```

（将 MyWebSite 替换为您希望在所有服务器上调用该网站的任何内容）。

## 在角色启动时运行 RoleStart.ps1：

在您的网站项目的根目录中创建或编辑 WebRole.cs 并添加以下代码：

```
public class WebRole : RoleEntryPoint
{
    public override bool OnStart()
    {
        var startInfo = new ProcessStartInfo()
        {
            FileName = "powershell.exe",
            Arguments = @".\setup\rolestart.ps1",
            RedirectStandardOutput = true,
            UseShellExecute=false,
        };
        var writer = new StreamWriter("out.txt");
        var process = Process.Start(startInfo);
        process.WaitForExit();
        writer.Write(process.StandardOutput.ReadToEnd());
        writer.Close();
        return base.OnStart();
    }
} 
```

应该就是这样。如果您启动多个 Web 角色实例并使用 RDP 连接到它们，您现在应该能够看到该网站在所有实例上都被称为相同，因此工作流持久性有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:13:04.860

看来这是在 Web 角色中运行工作流服务的问题。看起来解决方法是在没有相同问题的工作角色中运行您的工作流服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:46:29.937

我不熟悉工作流持久性。但是其他人报告说他们已经成功地使 SQL Azure 与 WF 持久性一起工作，我建议您检查 [http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/2dac9194-0067- 4e16-8e95-c15a72cb0069/](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/2dac9194-0067-4e16-8e95-c15a72cb0069/)和[http://www.theworkflowelement.com/2011/05/wf-persistence-on-sql-azure.html](http://www.theworkflowelement.com/2011/05/wf-persistence-on-sql-azure.html)看看他们是否有帮助。

最好的祝福，

明旭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:25:51.563

我们是 WF 和 WCF 的新手，但想知道您是否可以构建自己的实例存储。

这应该使您能够覆盖 InstanceKey 从而您可以计算自己的。

网上有很多例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-30T21:09:50.033

经过大量反编译和搜索，我终于找到了密钥的生成位置。

在 System.ServiceModel.Channels.CorrelationKey 类**中，System.ServiceModel**

**GenerateKeyString**方法可以解决问题。现在我必须找到一种方法来覆盖此方法并制作我自己的生成密钥算法，以便同一个实例可以在多个具有不同名称的 Web 服务器中运行。

```
private static Guid GenerateKey(string keyString)
{
  return new Guid(HashHelper.ComputeHash(Encoding.Unicode.GetBytes(keyString)));
}

private static string GenerateKeyString(ReadOnlyDictionaryInternal<string, string> keyData, string scopeName, string provider)
{
  if (string.IsNullOrEmpty(scopeName))
    throw DiagnosticUtility.ExceptionUtility.ThrowHelperArgument("scopeName", System.ServiceModel.SR.GetString("ScopeNameMustBeSpecified"));
  if (provider.Length == 0)
    throw DiagnosticUtility.ExceptionUtility.ThrowHelperArgument("provider", System.ServiceModel.SR.GetString("ProviderCannotBeEmptyString"));
  StringBuilder stringBuilder1 = new StringBuilder();
  StringBuilder stringBuilder2 = new StringBuilder();
  SortedList<string, string> sortedList = new SortedList<string, string>((IDictionary<string, string>) keyData, (IComparer<string>) StringComparer.Ordinal);
  stringBuilder2.Append(sortedList.Count.ToString((IFormatProvider) NumberFormatInfo.InvariantInfo));
  stringBuilder2.Append('.');
  for (int index = 0; index < sortedList.Count; ++index)
  {
    if (index > 0)
      stringBuilder1.Append('&');
    stringBuilder1.Append(sortedList.Keys[index]);
    stringBuilder1.Append('=');
    stringBuilder1.Append(sortedList.Values[index]);
    stringBuilder2.Append(sortedList.Keys[index].Length.ToString((IFormatProvider) NumberFormatInfo.InvariantInfo));
    stringBuilder2.Append('.');
    stringBuilder2.Append(sortedList.Values[index].Length.ToString((IFormatProvider) NumberFormatInfo.InvariantInfo));
    stringBuilder2.Append('.');
  }
  if (sortedList.Count > 0)
    stringBuilder1.Append(',');
  stringBuilder1.Append(scopeName);
  stringBuilder1.Append(',');
  stringBuilder1.Append(provider);
  stringBuilder2.Append(scopeName.Length.ToString((IFormatProvider) NumberFormatInfo.InvariantInfo));
  stringBuilder2.Append('.');
  stringBuilder2.Append(provider.Length.ToString((IFormatProvider) NumberFormatInfo.InvariantInfo));
  stringBuilder1.Append('|');
  stringBuilder1.Append((object) stringBuilder2);
  return ((object) stringBuilder1).ToString();
} 
```

# sql-server - SQL Server 数据在带有 Intranet IP 地址的备注字段中具有脚本标记

> ID：10536986
> 
> 赞同：0
> 
> 时间：2012-05-10T15:09:55.957
> 
> 标签：sql-server, coldfusion

我们有一个 ColdFusion 页面，管理员可以在登录后插入/更新一些房地产记录。我们注意到，在一个名为“描述”的表格的备注字段中，有时会出现黑客/垃圾信息的标签。我已经介绍了验证码。该页面受密码保护，没有任何页面的链接——搜索引擎无法访问，除非有人意外给出了网址。我们现在也在跟踪进行插入/更新的人的 IP 地址。但是我们仍然看到描述字段中的所有数据都在有效文本的末尾附加了 [垃圾文本] -append，内部 IP 地址为 192.168.0.101。这个IP是某人的个人电脑。我们的理论之一是该人的计算机受到损害。但是什么样的病毒会这样做呢？还，我想做的是有一个名为“已批准”的字段，默认情况下为“否”，但只要发生插入/更新，它就会变为“否”并“触发”一封电子邮件给管理员关于更改。SSMS 中的语法可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:28:51.703

最可能的原因是 SQL 注入。可能是您的内部 PC 受到恶意软件或病毒的破坏，这些恶意软件或病毒正在使用数十种攻击中的一种攻击您的站点。其中最常见的完全按照您的描述...将内容附加到数据库中文本或字符字段的末尾。下面[描述](http://www.coldfusionmuse.com/index.cfm/2008/7/18/Injection-Using-CAST-And-ASCII)了一种常见的攻击方式。

我还会检查以下内容

*   确保处理程序脚本也被“锁定”——而不仅仅是根 URL。有时，您包含的脚本可通过 url 访问并用于黑客攻击。
*   在您的站点中寻找可能没有密码保护的旧代码。如果您有遗留代码库，则可能存在一些需要清理的旧代码:)
*   *在 Web 日志中查找以EXEC(*开头的值的 URL 参数 - 这是一种常见的注入方法。
*   严格扫描有问题的 PC。安装 charles 或 wireshark 并观察 HTTP 流量，看看发生了什么。

最后，检查所有鳕鱼是否存在 SQLi 漏洞。确保所有变量都使用 cfqueryparam 并且您有其他控件。密码不是您需要的唯一保护级别:)

# sql-server - 表使用的空间

> ID：10536988
> 
> 赞同：3
> 
> 时间：2012-05-10T15:10:04.113
> 
> 标签：sql-server, tsql, sql-server-2008-r2

此过程是否准确显示数据库中使用的空间？我怀疑结果。

```
DECLARE @TableName VARCHAR(100)    --For storing values in the cursor

--Cursor to get the name of all user tables from the sysobjects listing
DECLARE tableCursor CURSOR
FOR 
select [name]
from dbo.sysobjects 
where  OBJECTPROPERTY(id, N'IsUserTable') = 1
FOR READ ONLY

--A procedure level temp table to store the results
CREATE TABLE #TempTable
(
    tableName varchar(100),
    numberofRows varchar(100),
    reservedSize varchar(50),
    dataSize varchar(50),
    indexSize varchar(50),
    unusedSize varchar(50)
)

--Open the cursor
OPEN tableCursor

--Get the first table name from the cursor
FETCH NEXT FROM tableCursor INTO @TableName

--Loop until the cursor was not able to fetch
WHILE (@@Fetch_Status >= 0)
BEGIN
    --Dump the results of the sp_spaceused query to the temp table
    INSERT  #TempTable
        EXEC sp_spaceused @TableName

    --Get the next table name
    FETCH NEXT FROM tableCursor INTO @TableName
END

--Get rid of the cursor
CLOSE tableCursor
DEALLOCATE tableCursor

--Select all records so we can use the reults
SELECT * 
FROM #TempTable order BY tablename

--Final cleanup!
DROP TABLE #TempTable 
```

很抱歉这篇文章的格式。StackO 肯定有问题 - 今天没有格式化工具栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:20:13.953

您的代码提供了已用空间的逐表视图。您也可以`sp_spaceused`不带参数运行以获取整个数据库大小的概览。是什么让你怀疑结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:25:20.627

您不妨考虑使用[系统的动态视图/功能之一](http://msdn.microsoft.com/en-us/library/ms188754.aspx)

例如，考虑使用[sys.dm_db_index_physical_stats](http://msdn.microsoft.com/en-us/library/ms188917.aspx)来返回有关用于堆聚集和非聚集索引的页面的更详细信息的简单查询：

```
select * from sys.dm_db_index_physical_stats ( 
    DEFAULT 
  , DEFAULT 
  , DEFAULT 
  , DEFAULT 
  , 'DETAILED'
) 
```

# haskell - 使用建设性代数包定义代数模块

> ID：10536990
> 
> 赞同：6
> 
> 时间：2012-05-10T15:10:07.640
> 
> 标签：haskell, superclass

包**constructive-algebra**允许您定义代数*模块*的实例（如*矢量空间*，但使用需要*字段的**环*）

 **这是我定义模块*的尝试：

```
{-# LANGUAGE MultiParamTypeClasses, TypeSynonymInstances #-}
module A where
import Algebra.Structures.Module
import Algebra.Structures.CommutativeRing
import Algebra.Structures.Group

newtype A = A [(Integer,String)]

instance Group A where
    (A a) <+> (A b) = A $ a ++ b
    zero = A []
    neg (A a) = A $ [((-k),c) | (k,c) <-  a]

instance Module Integer A where
    r *> (A as) = A [(r <*> k,c) | (k,c) <- as] 
```

它失败了：

```
A.hs:15:10:
    Overlapping instances for Group A
      arising from the superclasses of an instance declaration
    Matching instances:
      instance Ring a => Group a -- Defined in Algebra.Structures.Group
      instance Group A -- Defined at A.hs:9:10-16
    In the instance declaration for `Module Integer A'

A.hs:15:10:
    No instance for (Ring A)
      arising from the superclasses of an instance declaration
    Possible fix: add an instance declaration for (Ring A)
    In the instance declaration for `Module Integer A'
Failed, modules loaded: none. 
```

如果我将`Group`实例注释掉，那么：

```
A.hs:16:10:
    No instance for (Ring A)
      arising from the superclasses of an instance declaration
    Possible fix: add an instance declaration for (Ring A)
    In the instance declaration for `Module Integer A'
Failed, modules loaded: none. 
```

我将其读为需要一个实例，该实例`Ring A`没有`Module Integer A`意义，并且在类定义中也不需要：

```
class (CommutativeRing r, AbelianGroup m) => Module r m where
  -- | Scalar multiplication.
  (*>) :: r -> m -> m 
```

你能解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:06:21.247

该软件包包含一个

```
instance Ring a => Group a where ... 
```

实例头`a`匹配每个类型表达式，因此具有任何其他类型表达式的任何实例都将重叠。只有在某个地方实际使用了这样的实例时，这种重叠才会导致错误。在您的模块中，您使用实例

```
instance Module Integer A where
    r *> (A as) = A [(r <*> k,c) | (k,c) <- as] 
```

该类对参数`Module`有`AbelianGroup`限制¹。`m`这意味着一个`Group`约束。所以对于这个实例，必须查找的`Group`实例。`A`编译器找到两个匹配的实例。

这是第一个报告的错误。

下一个是因为编译器试图`AbelianGroup`为`A`. 编译器此时知道的唯一实例是

```
instance (Group a, Ring a) => AbelianGroup a 
```

所以它试图找到`instance Ring A where ...`，但当然没有。

而不是注释掉`instance Group A where ...`，您应该添加一个

```
instance AbelianGroup a 
```

（即使是谎言，我们现在只想让它编译）并添加`OverlappingInstances`到
`{-# LANGUAGE #-}`pragma 中。

使用`OverlappingInstances`，选择最具体的匹配实例，所以它在这里做你想要的。

¹顺便说一句，除非订单在列表中无关紧要，否则您`A`不是一个实例，`AbelianGroup`而且理所当然地不可能。`[(Integer,String)]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:01:04.217

这种类型的检查没有令人讨厌的语言扩展。

```
{-# LANGUAGE MultiParamTypeClasses, TypeSynonymInstances #-}
module A where
import Algebra.Structures.Module
import Algebra.Structures.CommutativeRing
import Algebra.Structures.Group

newtype A = A [(Integer,String)]

instance Ring A where 
  A xs <+> A ys = A (xs ++ ys)
  neg (A a) = A $ [((-k),c) | (k,c) <-  a]
  A x <*> A y = A [b | a <- x, b <- y ]
  one = A []
  zero = A []

instance Module Integer A where
     r *> (A as) = A [(r <*> k,c) | (k,c) <- as] 
```

`<+>` `<*>`在and`neg`中独立定义`Ring`and有点令人困惑 `Group`；它们是完全独立的符号，但随后它们在使 all 的一般实例中组合在一起`Rings` `Groups`，因此如果`Ring`已定义，则`Group`不能定义，因为它已经说过了。我不确定这是由类型类系统的工作方式强加给作者的。 `Module`需要`Ring`或者更确切地说`CommutativeRing`。`CommutativeRing`基本上只是重命名`Ring`；没有进一步的定义。它应该让你接受 Haskell 中不可检查的交换性断言。因此，可以说，您应该在模块之外“证明`CommutativeRing`法律”，然后再进行`Module`实例。但是请注意，这些定律在快速检查命题中表达，因此您应该运行快速检查`propMulComm`并`propCommutativeRing`专门针对这种类型。

不知道如何处理 1 和 0，但是您可以通过使用合适的结构来解决关于顺序的问题，也许：

```
 import qualified Data.Set as S

 newtype B = B {getBs :: S.Set (Integer,String) } 
```

但是，我想，有了新类型，你也可以重新定义`Eq`A 以理解它。事实上，您必须运行快速检查命题。

* * *

[编辑：这是一个版本，其中包含 QuickCheck http://hpaste.org/68351](http://hpaste.org/68351)所需的附加材料以及不同 Eq 实例的“失败”和“确定”快速检查语句。这个包对我来说似乎很合理；如果您不想要 Ring 和 CommutativeRing 业务，我认为您应该重新定义 Module，因为他说他“只考虑交换情况，可以改为实现左右模块。” 否则，您将无法使用快速检查，这显然是该软件包的主要要点，现在我看到了发生了什么，并且他使这变得非常容易做到。因为 A 正是他试图通过普遍使用快速检查来排除的那种事情，在这种情况下肯定很难欺骗。*

# php - Joomla 1.6 - 使用 jform 注册用户以更正用户组

> ID：10536991
> 
> 赞同：0
> 
> 时间：2012-05-10T15:10:10.620
> 
> 标签：php, html, joomla, joomla1.6, joomla-jform

我正在为该站点使用两种注册表单-一种自动将用户注册为“客户”，然后第二个表单将用于“提供者”。

默认表单的全局配置是为“客户”用户组注册的。第二种形式；但是，自动将用户注册为“客户”，我希望他们注册为提供者“组值 = 11”。谁能帮我解决这个问题？

我认为我需要做的就是在底部附近创建一个隐藏的输入字段，如下所示：

```
<input id="jform_group" type="hidden" name="jform[group]" value="11" /> 
```

不幸的是，这仍然将用户注册为客户（id 值为“10”）。

我还尝试将全局配置删除为“已注册”，但默认情况下不会注册到“客户”，而是仅注册到“已注册”。我想弄清楚如何覆盖它，以便表单在其正确的用户组下注册。

任何帮助深表感谢！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:24:13.400

仅在表单中添加隐藏字段是无法做到的。因为 Joomla 核心不处理该值。它从配置中获取默认组。如果未设置，则默认为 2。

```
$system = $params->get('new_usertype', 2); 
```

您必须构建一个可以处理该隐藏字段的用户插件，并根据隐藏字段值设置用户组。该插件应与 onContentPrepareData 事件一起运行并修改数据参数。

您还可以构建处理用户注册的自定义组件。不要破解 JOOMLA 核心。

# silverlight - 在 silverlight 中分配引用而不是值

> ID：10536992
> 
> 赞同：0
> 
> 时间：2012-05-10T15:10:11.930
> 
> 标签：silverlight, reference, drawing, line

我正在silverlight中制作一个应用程序。在该应用程序中，我使用二维线阵列作为

```
Line[][] Ecg=new Line[4][]; 
```

在应用程序的后面部分我使用代码作为

```
Line line=new Line();
line=Ecg[i][j];
line.Y1=line.Y1 + 100;
line.Y2=line.Y2 + 100;
//cod for drawing of line 
```

上面我的问题是，每当我增加对象线的 Y1 和 Y2 的值时，它都会增加 Ecg 数组中的值。我没有得到什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:16:47.453

您正在创建一个新的 new Line() 对象，然后将其与第二行一起丢弃：

```
Line line=new Line();
line =... 
```

然后，您将从数组中分配对 Line() 对象的引用：

```
line=Ecg[i][j] 
```

如果您随后更改该 Line 对象的属性，则它与数组中的对象相同。

您可能打算改为从数组中的对象复制值？：

```
Line line=new Line()
    {
        X1= Ecg[i][j].X1, 
        X2= Ecg[i][j].X2, = Ecg[i][j].Y1, 
        Y2= Ecg[i][j].Y2 
    });
line.Y1=line.Y1 + 100;
line.Y2=line.Y2 + 100; 
```

*这一切似乎有点奇怪。你想要得到的最终结果是什么？*

# jquery - 1.8可拖动的Jquery错误

> ID：10536994
> 
> 赞同：0
> 
> 时间：2012-05-10T15:10:14.770
> 
> 标签：jquery, draggable

这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>

<script>
 $(document).ready(function(){
    $( "#draggable" ).draggable();
 });
</script>

<div id="draggable" 
    style="
        position: fixed;
        left: 50%;
        margin-left: -100px;
        top: 30%;
        width: 200px; 
        background: rgba(255,255,255,0.66); 
        border: 2px  solid rgba(0,0,0,0.5); 
        border-radius: 4px; padding: 8px;
    "
>
   This is a test
</div> 
```

如您所见，我在使用之前调用了查询 1.8.16 文件。但是我第一次使用 jQuery 它给了我错误：

```
Can't find variable $ 
```

这是关于 jQuery 没有被加载。我尝试使用 safari 检查器查看，我确定文件已正确加载。链接没问题。我加载文件，然后执行脚本。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:11:48.420

您包含 jQuery UI 但不包含核心 jQuery 库，您需要添加：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

或[在这里下载](http://docs.jquery.com/Downloading_jQuery)

**注意**- 你需要在 jQueryUI 之前包含 jQuery

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:11:46.827

在 jQueryUI 旁边，您还需要 jQuery。请也包含此脚本！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:13:12.510

您正在加载 jquery UI，但您是否忘记同时加载 jquery 框架本身？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```