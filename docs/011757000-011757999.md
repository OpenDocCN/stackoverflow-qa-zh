# StackOverflow 问答 11757000-11757999

# php - Access-Control-Allow-Origin 服务器端由 php

> ID：11757001
> 
> 赞同：-1
> 
> 时间：2012-08-01T10:07:05.253
> 
> 标签：php, javascript, tomcat, cross-domain

我在这个主题上有问题：Access-Control-Allow-Origin。

我阅读了它，发现可以使用 php 获得响应，[here](http://www.nsbasic.com/app/technotes/TN11.htm#getting)

但我不知道如何使该代码适应 javascript，我仍然有同样的问题。

我在javascript中试过这个：

```
var url ='http://localhost:8080/com.webserver/rest/manage/order?parameter=parameter';
req=Ajax("getResponse.php/?" + url)
  if (req.status=200)
alert("hi"); 
```

在 php 文件上：

```
<?php
echo file_get_contents($_GET['url']); 
?> 
```

什么都没有发生。我尝试使用ajax，例如：

```
$.ajax({
          url: "http://localhost:8080/com.webserver/rest/manage/order?parameter=parameter",
          async: false,
          dataType: 'html',
          success: function (text) {
            alert(text);
          }
        }); 
```

但总是同样的问题......

我在网上看到很多人有同样的问题，但没有人得到回应。我刚刚找到了 2 种方法，使用 chrome 和一个选项，但只是推荐给开发人员并在服务器上添加标头，但我不知道在哪里添加它们。我正在为该本地主机使用 apache tomcat catalina。我有 2 个服务器，网页（在 xampp 中）和休息（在 tomcat 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:11:07.243

改变

`req=Ajax("getResponse.php/?" + url)`

到

`req=Ajax("getResponse.php/?url=" + url)`

请记住，这是不安全的，我可以将任何内容传递给 url 参数，并且您的 php 脚本会使用它。允许人们从您的本地系统读取文件以及让您的 php 脚本从其他地方下载恶意文件

编辑：

保护它的最佳方法是使用操作列表，这意味着用户永远不会看到 url，只能修改操作词。例如

`req=Ajax("getResponse.php/?do=getOrders")`

然后在 php

```
$actions = array();
$actions['getOrders'] = "http://localhost:8080/com.webserver/rest/manage/order?parameter=parameter";

if(array_key_exists($_GET['do'], $actions))
 echo file_get_contents($actions[$_GET['do']]); 
```

通常你想做更多的事情，只是将一个动作翻译成一个 url，你可能想要传递额外的参数。在这种情况下，您可以使用一个开关或一堆 IF 来检查 $_GET['do'] 是否等于某个值，然后对其进行处理。但是要给出每个可能的实现方法的例子需要几个小时，所以你可能想使用谷歌。

请注意：虽然建议使用此方法为您的脚本增加 100 倍的安全性，但它并非万无一失，特别是如果您也开始传递来自用户的参数。再次使用谷歌。

# php - 如何覆盖 curl_exec 设置标题

> ID：11757007
> 
> 赞同：0
> 
> 时间：2012-08-01T10:07:38.083
> 
> 标签：php, curl, header, download

我正在为 js 构建一个 combine/minify php 脚本，使用了一些在线 minify 脚本，我被困在 Google 的 Closure minify 脚本中。此特定脚本要求您对需要缩小的内容进行 POST，然后在响应中获得缩小后的代码。我的脚本需要这样工作：
1\. 用户添加要缩小和/或合并的文件
2\. 用户单击“开始”
3\. 脚本在后台运行，并开始下载；下载的文件是：
3a。一个大 js 文件，其中包含所提供文件的组合缩小内容或
3b。一个包含所提供文件的缩小版本的存档。

3a 的要点是在服务器上没有创建文件，而是我更改了标题并简单地输出了缩小的内容。这就是我遇到问题的地方。我的 minify 方法中的代码如下所示：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://closure-compiler.appspot.com/compile');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'output_info=compiled_code&output_format=text&compilation_level=SIMPLE_OPTIMIZATIONS&js_code=' . urlencode($str));
$result = curl_exec($ch);

return $result; 
```

后来在代码中，我有

```
$js = mini($js);
header('Content-Description: File Transfer');
header('Content-Type: application/javascript');
header('Content-Disposition: attachment; filename='.$ourFileName);
header('Content-Transfer-Encoding: text');
echo $js; 
```

如果不清楚，第一个代码段中的*$str*变量是所有文件的实际组合内容，*mini*是 minify 方法。问题是，如果我运行它，我会在浏览器窗口中看到内容（被截断），如果我检查页面，我会看到一个错误：

```
Cannot modify header information - headers already sent by (output started at E:\work\AdoTube\workspace\php\script.php:47) 
```

（第 47 行是 curl_exec 调用）。如果我绕过 minify 方法，我会得到一个不错的“下载文件”，而且文件看起来还不错。所以，我的猜测是 curl_exec 调用在我的脚本上设置了一些标题，这会阻止我稍后在代码中更改标题。
我如何解决它？我知道一个想法是将结果写入临时文件，然后下载它，但我不想这样做，除非它是唯一的选择。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:28:52.497

`curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);`

# php - PHP SOAP 返回 NULL

> ID：11757009
> 
> 赞同：0
> 
> 时间：2012-08-01T10:08:08.603
> 
> 标签：php, soap, soap-client

早上好，

我正在设置 PHP 应用程序以与 SOAP Web 服务进行通信，但遇到了问题。在服务上调用“GetIntradaySnapshotForCommodity”函数时，PHP 返回 NULL。但是，当我检查“__getLastResponse()”内容时，会返回一个有效的 XML 响应。

以下是我的 SOAP 交互代码。

```
$client = new SoapClient('liffecommoditiesservice.wsdl', array('trace' => TRUE));

$result = $client->GetIntradaySnapshotForCommodity(array(
    'securityToken' => 'XXX',
    'commoditiySymbol' => 'XT'
));

var_dump($result); //This returns NULL

var_dump($client->__getLastRequest()); //This response is included below
var_dump($client->__getLastResponse()); //This response is included below 
```

**$client->__getLastRequest()**

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://liffecommoditieswebservice.if5.com/"><SOAP-ENV:Body><ns1:GetIntradaySnapshotForCommodity><ns1:securityToken>XXX</ns1:securityToken><ns1:commoditiySymbol>XT</ns1:commoditiySymbol></ns1:GetIntradaySnapshotForCommodity></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

**$client->__getLastResponse()**

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ArrayOfIntradaySnapshot xmlns="http://liffecommoditieswebservice.if5.com/"><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Jan-13</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>191 </Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>192.95 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Jan-14</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>161.5 </Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>165.75 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Jul-13</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>-</Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>201.3 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Mar-13</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>-</Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>195.2 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Mar-14</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>-</Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>168.1 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>May-13</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>195 </LastTradePrice><LastTradeVolume>30 </LastTradeVolume><LastTradeTime>08:57:17 </LastTradeTime><Bid>194.25 </Bid><Ask>199 </Ask><High>195 </High><Low>195 </Low> <SettlementPrice>198 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>30 </CurrentCumulativeVolume><PriceChange>-3</PriceChange> <PercentagePriceChange>-1.52%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>May-14</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>-</Bid><Ask>-</Ask><High>-</High><Low>-</Low> <SettlementPrice>172.25 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>-</CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Nov-12</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>190 </LastTradePrice><LastTradeVolume>20 </LastTradeVolume><LastTradeTime>09:20:13 </LastTradeTime><Bid>190 </Bid><Ask>190.5 </Ask><High>191 </High><Low>189 </Low> <SettlementPrice>191.95 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>129 </CurrentCumulativeVolume><PriceChange>-1.94999999999999</PriceChange> <PercentagePriceChange>-1.02%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Nov-13</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>161 </Bid><Ask>167 </Ask><High>-</High><Low>-</Low> <SettlementPrice>165.25 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>0 </CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot><IntradaySnapshot><CommoditySymbol>XT</CommoditySymbol><DeliveryMonth>Nov-14</DeliveryMonth><TimeStamp>01-Aug-2012 10:48:01</TimeStamp><LastTradePrice>-</LastTradePrice><LastTradeVolume>-</LastTradeVolume><LastTradeTime>-</LastTradeTime><Bid>-</Bid><Ask>164 </Ask><High>-</High><Low>-</Low> <SettlementPrice>164 </SettlementPrice><OpenInterest>-</OpenInterest><CurrentCumulativeVolume>0 </CurrentCumulativeVolume><PriceChange>0</PriceChange> <PercentagePriceChange>0%</PercentagePriceChange></IntradaySnapshot></ArrayOfIntradaySnapshot></soap:Body></soap:Envelope> 
```

**$client->__getFunctions()**

```
array(4) {
    [0]=>
        string(101) "GetEODSnapshotForCommodityResponse GetEODSnapshotForCommodity(GetEODSnapshotForCommodity $parameters)"
    [1]=>
        string(116) "GetIntradaySnapshotForCommodityResponse GetIntradaySnapshotForCommodity(GetIntradaySnapshotForCommodity $parameters)"
    [2]=>
        string(101) "GetEODSnapshotForCommodityResponse GetEODSnapshotForCommodity(GetEODSnapshotForCommodity $parameters)"
    [3]=>
        string(116) "GetIntradaySnapshotForCommodityResponse GetIntradaySnapshotForCommodity(GetIntradaySnapshotForCommodity $parameters)"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:15:07.393

对于任何感兴趣的人来说，这个问题似乎是由 PHP PEAR 库中的一个错误引起的，即一个完全有效的 SOAP 响应没有被正确地转换为一个对象。

我最终改用了 SOAP PEAR 库，它的工作就像做梦一样。

# sencha-touch-2 - 本地存储检索问题 - sencha touch 2

> ID：11757010
> 
> 赞同：0
> 
> 时间：2012-08-01T10:08:15.817
> 
> 标签：sencha-touch-2, local-storage

我可以成功地将数据保存到本地存储并检索它。但是，如果我刷新我的浏览器，然后尝试调用本地存储中的数据，它就会失败。我正在像这样保存数据；

```
var eventStore = Ext.getStore('Details');

if(null == eventStore.findRecord('id', currentEvent.data.id)) {
    eventStore.add(currentEvent);
}

eventStore.sync();

eventStore.sort([{ property: 'dateCreated', direction: 'Desc' }]);

console.log('Data saved, store has ' + eventStore.getCount() + ' items');
console.log(localStorage); 
```

当我刷新浏览器并检查控制台时，该条目就在那里，但是当我尝试像下面这样调用它时，它失败了。

```
var store = Ext.getStore('Details');
var storeId = store.findRecord('id', 'LC');
console.log('Details store has ' + store.getCount() + ' items');
console.log(storeId.data.id);
return; 
```

我是 Sencha touch 的新手，非常感谢任何关于我做错了什么的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:30:57.550

您必须检查属性**phantom: true**新创建的模型。如果未设置或为假，代理将不会同步它是远程存储，但仅保留在存储的“内存”中:)

我建议通过**model.save()**而不是 store 的 sync() 调用保存您的事件记录。看看[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model-method-save](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model-method-save)。代理可以为模型定义为商店。

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:33:53.580

问题解决了！只需将 sencha touch 更新到最新版本，一切正常。

# regex - 城市名称的正则表达式

> ID：11757013
> 
> 赞同：9
> 
> 时间：2012-08-01T10:08:29.103
> 
> 标签：regex, city

我需要一个用于验证城市文本框的正则表达式，城市文本框字段只接受字母、空格和破折号（-）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-09-05T00:45:13.630

该答案假定@Manaysah 所指的字母也包含变音符号的使用。我添加了单引号 ' 因为加拿大和法国的许多名字都有它。我还添加了句点（点），因为它是合同名称所必需的。

基于我想出的@UIDs 答案，

> ```
> ^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0080-\u024F]*$ 
> ```

它接受的城市列表：

> ```
> Toronto
> St. Catharines
> San Fransisco
> Val-d'Or
> Presqu'ile
> Niagara on the Lake
> Niagara-on-the-Lake
> München
> toronto
> toRonTo
> villes du Québec
> Provence-Alpes-Côte d'Azur
> Île-de-France
> Kópavogur
> Garðabær
> Sauðárkrókur
> Þorlákshöfn 
> ```

它拒绝什么：

> ```
> A----B
> ------
> *******
> &&
> ()
> //
> \\ 
> ```

我没有添加括号和其他标记的使用，因为它不属于这个问题的范围。

我已经远离 \s 的空白。制表符和换行符不是城市名称的一部分，我认为不应使用。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-01T10:13:27.347

这可以是任意复杂的，具体取决于您需要匹配的精确程度以及您愿意允许的变化。

一些相当简单的东西`^[a-zA-Z]+(?:[\s-][a-zA-Z]+)*$`应该可以工作。

**警告**：这与 München 等城市不匹配，但在这里您基本上需要使用表达式的 [a-zA-Z] 部分，并定义您的特定情况允许哪些字符。

请记住，它还允许像 San----Francisco 之类的东西，或者有几个空格。

转换为类似：1 个或多个字母，后跟一个块：0 个或多个空格或破折号和更多字母，最后一个块可以出现 0 次或更多次。

里面有奇怪的东西：`?:`位。如果您不熟悉正则表达式，可能会造成混淆，但这只是说明括号之间的正则表达式不是捕获组（我不想捕获它匹配的部分以便以后重用），所以括号仅用于对表达式进行分组（而不是捕获匹配项）。

```
"New York" // passes

"San-Francisco" // passes

"San Fran Cisco" // passes (sorry, needed an example with three tokens)

"Chicago" // passes

"  Chicago" // doesn't pass, starts with spaces

"San-" // doesn't pass, ends with a dash 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-24T19:35:25.070

如果有人在搜索城市名称的正则表达式时需要它，请添加我的答案，就像我一样

请使用这个：

```
^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$ 
```

由于许多城市名称包含破折号，例如**田纳西州的 Soddy-Daisy**或特殊字符，例如**加利福尼亚州拉加纳达弗林特里奇的 ñ**

希望这可以帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-09T20:37:53.913

这是我发现效果最好的一个

对于 PCRE 风格，允许`\p{L}`（.NET、php、Golang）

```
/^\p{L}+(?:([\ \-\']|(\.\ ))\p{L}+)*$/u 
```

对于不允许`\p{L}`将其替换为的正则表达式`[a-zA-Z\u0080-\u024F]`

所以对于 javascript，python 正则表达式使用

```
/^[a-zA-Z\u0080-\u024F]+(?:([\ \-\']|(\.\ ))[a-zA-Z\u0080-\u024F]+)*$/ 
```

白名单一堆字符很容易，但在你的正则表达式中有一些需要注意的地方

*   不应允许连续的非字母字符。即`Los Angeles`应该失败，因为它有两个空格
*   句号后面应该有一个空格。即`St.Albert`应该失败，因为它缺少空间
*   名称不能以非字母字符开头或结尾，即`-Chicago-`应该失败
*   空白字符`\s`!== `\`，即制表符和换行符可以通过，因此应定义空格字符

*注意：*在构建正则表达式规则时，我发现[https://regex101.com/tests](https://regex101.com/tests)非常有帮助，因为您可以轻松创建单元测试

js：[https](https://regex101.com/r/cgJwc0/1/tests)
://regex101.com/r/cgJwc0/1/tests php：[https ://regex101.com/r/Yo3GV2/1/tests](https://regex101.com/r/Yo3GV2/1/tests)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-05T10:43:03.337

这是一种适用于大多数城市的方法，并且已经过测试：

```
^[a-zA-Z\u0080-\u024F]+(?:. |-| |')*([1-9a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0080-\u024F]*$ 
```

下面的 Python 代码，包括它的测试。

```
import re
import pytest

CITY_RE = re.compile(
    r"^[a-zA-Z\u0080-\u024F]+(?:. |-| |')*"  # a word
    r"([1-9a-zA-Z\u0080-\u024F]+(?:. |-| |'))*"
    r"[a-zA-Z\u0080-\u024F]*$"
)

def is_city(value: str) -> bool:
    valid = CITY_RE.match(value) is not None
    return valid

# Tests
@pytest.mark.parametrize(
    "value,expected",
    (
        ("1", False),
        ("Toronto", True),
        ("Saint-Père-en-Retz", True),
        ("Saint Père en Retz", True),
        ("Saint-Père en Retz", True),
        ("Paris 13e Arrondissement", True),
        ("Paris  13e  Arrondissement ", True),
        ("Bouc-Étourdi", True),
        ("Arnac-la-Poste", True),
        ("Bourré", True),
        ("Å", True),
        ("San Francisco", True),
    ),
)
def test_is_city(value, expected):
    valid, msg = validate.is_city(value)
    assert valid is expected 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T10:11:53.873

```
^[a-zA-Z\- ]+$ 
```

这也可能有用[http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-01T10:12:39.933

使用这个正则表达式：

`^[a-zA-Z-\s]+$`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-18T15:26:39.613

经过数小时寻找城市正则表达式匹配器后，我构建了它，它满足我的需求 100%

```
(?ix)^[A-Z.-]+(?:\s+[A-Z.-]+)*$ 
```

测试城市的表达式。火柴

*   城市
*   圣城
*   一些愚蠢的城市
*   市街
*   太多话城市

似乎有多种正则表达式，我为我的 Java 需求构建了它，它工作得很好

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-17T03:15:40.603

```
^[a-zA-Z.-]+(?:[\s-][\/a-zA-Z.]+)*$ 
```

这将有助于识别一些城市名称，例如 St. Johns、Baie-Sainte-Anne、Grand-Salut/Grand Falls

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-26T10:30:04.113

你可以试试这个：

`^\p{L}+(?:[\s\-]\p{L}+)*`

上述正则表达式将：

*   限制前导和尾随空格、连字符
*   匹配名称为 Néewiller-près-lauterbourg 的城市

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-20T14:24:16.623

我喜欢shepley的建议，但它有几个缺陷。

如果您将 shpeley 的正则表达式更改为此，它将不接受其他特殊字符：

^([a-zA-Z\u0080-\u024F]{1}[a-zA-Z\u0080-\u024F\。|\-| |']*[a-zA-Z\u0080-\u024F\ .']{1})$

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-15T09:19:39.440

我用那个：

```
^[a-zA-Z\\u0080-\\u024F.]+((?:[ -.|'])[a-zA-Z\\u0080-\\u024F]+)*$ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-22T04:29:37.057

以下是一些有趣的边缘案例：

*   的坟场
*   的Gravendeel
*   的坟场
*   的格雷文赞德
*   ['s Heer Arendskerke](https://en.wikipedia.org/wiki/%27s-Heer_Arendskerke)
*   的海伦伯格
*   的海伦胡克
*   海尔托亨博斯
*   不难
*   't Veld
*   赞德
*   100 英里的房子
*   [10 月 6 日市](https://en.wikipedia.org/wiki/6th_of_October_(city))

因此，不要忘记添加`'`和`0-9`作为城市名称的可能第一个字符。

# javascript - 可见性之间的性能差异：隐藏和显示：无

> ID：11757016
> 
> 赞同：67
> 
> 时间：2012-08-01T10:08:42.223
> 
> 标签：javascript, html, css, performance

我想在我的 jQuery Backbone.js Web 应用程序中简化一些事情。一种这样的简化是我的菜单和对话框小部件的行为。

以前我在开始时创建了菜单的 div 框并使用`display: none; opacity:0;`. 当我需要一个菜单​​时，我将其样式更改为`display:block`然后使用 jQuery ui 位置实用程序来定位 div 框（因为`display:none`无法定位的元素），完成后，最后将其样式更改为`opacity:1`.

现在我只想用 隐藏它们`visibility:hidden`，当我需要一个时，我使用位置实用程序，然后将样式更改为`visibility:visible`。当我开始使用这种新方法时，在整个 Web 应用程序会话中，我将有大约 10 个 div 框隐藏但占用空间，这与以前使用`display:none`.

我的新方法有什么影响？它是否会在任何方面影响浏览器性能？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-01T10:14:13.537

`display:none;`元素[不在渲染树中 all](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Render_tree_construction)，因此它们在面值上会表现得更好。

不过，我怀疑您会因此遇到任何真正可见的性能问题。如果您需要`opacity: 0`或`visibility: hidden` **因为它们的功能**，那么只需使用它们。如果您不需要该功能，请使用`display: none;`

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-28T13:54:04.533

如果您通过 javascript 在可见和不可见状态之间切换，那么可见性：隐藏应该是更好的执行者。看到它在可见和隐藏状态下总是占用相同数量的空间，因此每次使它看起来消失时都不会导致其下方元素的回流。对于 display:none ，您将其从文档流中删除，然后当您将其设置为 display:block 时，您将重新渲染它并将该元素下方的所有内容向下推，基本上将所有这些内容再次放置。

但是，如果您正在执行诸如切换按钮按下时的可见状态之类的操作，那么您确实应该使用适合您需求的东西，而不是性能更好的东西，因为在这种情况下性能差异可以忽略不计。当您以每秒大约 20 次的速度使用 dom 进行动画处理时，您可以担心可见性的性能：隐藏与显示：无。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-08-01T10:15:33.620

`visibility: hidden`不会导致文档重新流动，而`display: none`会。

`display: none`：HTML 引擎将*完全*忽略元素及其子元素。引擎不会忽略标有`visibility: hidden`的元素，它会对元素及其子元素进行所有计算，但不会将元素渲染到视口。

如果需要位置和尺寸属性的值，则`visibility: hidden`必须使用，并且您必须处理视口中的空白区域，通常通过将该元素包装在另一个具有 0 宽度和高度以及“溢出：隐藏”的元素中。

`display:none`将从文档的*正常流程*中删除该元素，并将该元素及其子元素的位置/高度/宽度的值设置为 0。当 elements`display`属性更改为 以外的其他值`none`时，它会触发完整的文档重新流，这对于大文档来说可能是一个问题 - 有时在功能有限的硬件上呈现的不是那么大的文档。

`display: none`是在视口上隐藏元素时使用的自然且合乎逻辑的解决方案，`visibility: hidden`应在需要的地方/时间用作后备。

编辑：正如@Juan 所指出的，`display: none`当您需要向 DOM 树中添加许多元素时，这是一种选择。`visibility: hidden`将为添加到树的每个元素触发重新流动，而`display: none`不会。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-01T10:12:47.973

我不知道和之间有任何性能差异`display:none`——`visibility:hidden`即使有，对于少至 10 个元素，它也完全可以忽略不计。正如您所说，您的主要关注点应该是是否希望元素保留在文档流中，在这种情况下`visibility`是更好的选择，因为它维护了元素的框模型。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-15T11:55:10.873

`display: block`好吧，和之间的主要性能差异`visibility: hidden`是，如果您有一个包含 100000 个元素的列表，`visibility: hidden`则不会使您免于 DOM 挂起，因为它不会从 DOM 中删除元素。 `visibility: hidden`行为像`opacity: 0`+ `pointer-events: none`。`display: none`像`Element.remove()`.

现场示例：[https ://jsfiddle.net/u2dou58r/10/](https://jsfiddle.net/u2dou58r/10/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-28T23:16:00.700

根据个人经验，刚刚在一个简单的静态页面上尝试了一个位于“隐藏”按钮下方的表单，`visibility: hidden`它完美地执行，而`display: none`导致可点击按钮在点击时略微跳跃，好像它试图显示隐藏按钮一毫秒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T10:14:36.937

好吧，visibility:none 仍然使用 div 的空间。因此，您可能会跳过定位部分，因为它的位置已经分配（并由此获得更好的性能）。

但是我以某种方式猜测您需要 display:none 方法来在触发“显示”事件时正确分配空间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T10:22:25.470

我认为这可能与这个问题有关：[CSS Properties: Display vs. Visibility](https://stackoverflow.com/questions/3475119/css-properties-display-vs-visibility)

我只引用有趣的部分：

> 该元素永远不会从 DOM 层次结构中删除。使用 display:none 时，所有块级显示“样式”都完全“隐藏”，而使用 visibility:hidden; 元素本身是隐藏的，但它仍然占据 DOM 中的可视空间。

所以在浏览器性能方面应该没有真正的区别，因为两个版本仍然在 DOM 层次结构中。这些属性只影响*元素*相对于 DOM 的显示方式。

# mongodb - MongoDb 查询需要很长时间

> ID：11757017
> 
> 赞同：0
> 
> 时间：2012-08-01T10:09:00.747
> 
> 标签：mongodb, optimization, indexing

我有一个向量集合集合的大小

```
print vectors.count() 
```

是

> > 102020

当我遍历字段时

```
start = time.time()
for v in vectors.find({},{'vector' : 1, '_id' : 0}):
    pass
print "total time:" , end-start 
```

> > 总时间：5.05100011826

but when I run with explain() I see that the query takes substantially less time.

```
print vectors.find({},{'vector' : 1, '_id' : 0}).explain() 
```

> > {u'nYields': 0, u'allPlans': [{u'cursor': u'BasicCursor', u'indexBounds': {}}], u'nChunkSkips': 0, u'**millis': 23**, u'n': 102020, u'cursor': u'BasicCursor', u'indexBounds': {}, u'nscannedObjects': 102020, u'isMultiKey': False, u'indexOnly': False, u'nscanned': 102020}

Why is there such a huge time difference? Is there anyway to speed this up? I loaded all of the vectors to a sql DB text field and the same query was less than one second. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:42:52.553

我的猜测是，第二个仅向您展示 mongoDB 实际执行“查找”需要多快，而前者还涉及将每条记录检索到控制台并处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:32:25.243

You might want to play with [batch_size](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.batch_size) to improve the speed and reduce the amount of network hops when iterating through results.

```
start = time.time()
for v in vectors.find({},{'vector' : 1, '_id' : 0}).batch_size(1000):
    pass
print "total time:" , end-start 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T10:34:22.483

您可以为要查询的字段提供索引，在您的情况下，它是`"vector"`：

```
vectors.createIndex({"vector":1},{sparse:true}) 
```

然后您可以查看查询时间。

# jquery - 如何验证jquery中的下拉字段

> ID：11757018
> 
> 赞同：0
> 
> 时间：2012-08-01T10:09:01.357
> 
> 标签：jquery

我有一个隐藏类型的文本框。我刚刚获得了文本框的名称并将其设置为下拉列表的 id。

现在我需要验证下拉菜单。这就是我所做的。

```
 <input type="hidden" value="100" name="test1_season_1">

    $('input[value="100"][type="hidden"]').each(function(){
         myString = $(this).attr('name');

         $("#formId").validate({
            rules: {
                myString: "required",
                },
             messages: {
                 mystring: "<br>Please select from dropdown.",       
             }
         });
    }); 
```

但是没有显示验证消息。

所以我直接给出了文本框名称并检查验证，这次它有效。

```
 $("#formId").validate({
            rules: {
                test1_season_1: "required",
                },
             messages: {
                 test1_season_1: "<br>Please select from dropdown.",       
             }
         }); 
```

我的问题是，每次都会动态生成文本框名称，所以不能直接给。如果存在两个隐藏类型的文本框，我必须生成两个下拉列表。

请帮我不要这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:12:21.283

给输入 a`class`并使用类规则

```
$.validator.addClassRules("myvalidator", { 
   required: true, 
   message: "<br>Please select from dropdown." 
});

<input type="hidden" value="100" class="myvalidator" name="test1_season_2">
<input type="hidden" value="100" class="myvalidator" name="test1_season_3">
<input type="hidden" value="100" class="myvalidator" name="test1_season_999"> 
```

[`addClassRules`这里的文档](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:16:02.153

在初始化对象时（无论如何），您不能将变量的值用作设置属性的键。初始化对象的语法将接受不带引号的键，因此您实际上要说的是使用 key 创建一个属性`myString`，而您想要的是创建一个属性，其键是`myString`变量的值。

请尝试以下操作：

```
myString = $(this).attr('name');
alert(correctString); // not entirely sure about this line - where does correctString come from?

var rules = {};
rules[myString] = "required";

var messages = {};
messages[myString] = "<br>Please select from dropdown.";

$("#formId").validate({
    rules: rules,
    messages: messages
}); 
```

您可以创建两个包含所有规则和消息的对象，而不是调用`.validate()`每个隐藏的输入，然后调用`.validate()`一次：

```
var rules = {};
var messages = {};

$('input[value="100"][type="hidden"]').each(function() {
    myString = $(this).attr('name');
    rules[myString] = 'required';
    messages[myString] = '<br>Please select from dropdown.';
});

$("#formId").validate({
    rules: rules,
    messages: messages
}); 
```

# vb.net - Low quality thumbnails in listview VB.net

> ID：11757020
> 
> 赞同：2
> 
> 时间：2012-08-01T10:09:20.380
> 
> 标签：vb.net, image, listview, thumbnails

I use VB.net

I use ListView to view 50*x thumbnails(.jpg) at the left to the items.

But instead of 32bit high quality thumbnails, ListView lowers them to 8bit or 16bit(not sure).

Here's the code

```
Private Sub afterprocessed()
    ListView1.Items.Clear()
    Dim imlTemp As New ImageList
    Dim dirFiles() As String = IO.Directory.GetFiles("backend\communicate\thumbnails")
    Dim _imgList As New ImageList
    Dim imgSize As New Size
    imgSize.Width = 50
    ListView1.SmallImageList = _imgList
    Dim count As Integer = 0
    Dim item As New ListViewItem
    For Each dirFile As String In dirFiles
        Dim imgFilename As String = IO.Path.GetFileNameWithoutExtension(dirFile)
        Dim img As New System.Drawing.Bitmap(dirFile)
        Dim imgImage As Image = Image.FromFile(dirFile)
        'Dim imgHeight As Integer
        'imgHeight = imgImage.Height
        imgSize.Height = imgImage.Height
        _imgList.ImageSize = imgSize
        _imgList.Images.Add(img.Clone)
        ListView1.Items.Add(imgFilename, count)
        count += 1
    Next
End Sub 
```

And the quality is noticably low. Compared to original JPG

Any advice? I'd greatly appreciate it :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:21:53.400

你需要这个。

```
this.ListView1.SmallImageList.ColorDepth = ColorDepth.Depth32Bit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:25:19.587

有一次我遇到了类似的问题，我发现它是由使用该`ImageList.ImageSize`方法引起的，该方法似乎使用了较差的调整大小算法。我通过确保我使用的所有图像在加载它们之前在磁盘上已经是正确的大小来解决它。但是，如果这不是您的选择，那么在将它们添加到 ImageList*之前*[调整它们](http://www.vb-helper.com/howto_net_image_resize.html) 的大小应该不会太难。

# java - 如何在 ContentProvider 中传递 Rawquery？

> ID：11757022
> 
> 赞同：0
> 
> 时间：2012-08-01T10:09:23.477
> 
> 标签：java, android, android-contentprovider

如何将`rawQuery`使用`ContentProvider`从一个应用程序传递到另一个应用程序？例子：`select max(date) from tblename`

示例：查询主要活动：

```
private Uri CONTENT_URI = Uri.parse("content://ubra.c.apps.pro/Details");
cursor = getContentResolver().query(CONTENT_URI, null,null, null, "datePDate DESC"); 
```

在`ContentProvider`：

```
static UriMatcher uriMatcher;
static String PRO_NAME = "ubra.c.apps.pro";
Uri CONTENT_URI = Uri.parse("content://" + PRO_NAME
        + "/Details");

public Cursor query(Uri uri, String[] arg1, String arg2, String[] arg3,
        String arg4) {
    switch (uriMatcher.match(uri)) 
    {
    case 1:         
        CPcursor = DBConnection.query("Details",  arg1, arg2, arg3,arg2, arg2, arg4);
        break; 
```

我如何`rawQuery`在这里使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:17:27.367

问题的最佳解决方案。

```
public Cursor query(Uri uri, String[] arg1, String arg2, String[] arg3,String arg4) 
{
    switch (uriMatcher.match(uri)) 
    {
    case 1:         
       CPcursor =  DBConnection.rawQuery("Enter your SQL query Here"')", null);
        break;
}
} 
```

# c# - 即使在添加所需的命名空间后出现“必需”错误

> ID：11757030
> 
> 赞同：3
> 
> 时间：2012-08-01T10:09:59.257
> 
> 标签：c#, .net, asp.net-mvc

看看下面的代码，我正在使用 required(System.ComponentModel.DataAnnotations) 命名空间，但它一直向我显示红色波浪状的错误，即找不到“类型或命名空间名称‘必需’”（您是否缺少 using 指令。 ....)

```
using System.ComponentModel.DataAnnotations;

namespace SportsStore.Domain.Entities {

public class ShippingDetails {
    [Required(ErrorMessage = "Please enter a name")]
    public string Name { get; set; }

    [Required(ErrorMessage = "Please enter the first address line")]
    public string Line1 { get; set; }
    public string Line2 { get; set; }
    public string Line3 { get; set; }

    [Required(ErrorMessage = "Please enter a city name")]
    public string City { get; set; }

    [Required(ErrorMessage = "Please enter a state name")]
    public string State { get; set; }

    public string Zip { get; set; }

    [Required(ErrorMessage = "Please enter a country name")]
    public string Country { get; set; }

    public bool GiftWrap { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T10:15:06.583

右键单击项目引用。选择添加参考。

在 .Net 选项卡中选择`System.ComponentModel.DataAnnotations`

![在此处输入图像描述](../Images/595fac34b914f84f32782429d3834947.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:12:19.553

选择“必需”关键字并按 Ctrl+">"。它将通过智能感知向您显示相应的命名空间名称。如果命名空间未找到或不可用，它将显示-“生成类...”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:13:01.453

您是否在项目中引用了**System.ComponentModel.DataAnnotations.dll**程序集？

此外，有时不能依赖 Intellisense - 确定错误的唯一方法是实际编译。

# java - Spring Security with path variable parameters

> ID：11757032
> 
> 赞同：6
> 
> 时间：2012-08-01T10:10:17.813
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

I would like to create security rules based on custom url parameters (path variables). In example. Let say I want to have user that has admin access for resources called Brand1 and Brand2 but has no access to resource called Brand3\. We may edit resources using following links.

```
http://myapp/brand/edit/1
http://myapp/brand/edit/2
http://myapp/brand/edit/3 
```

now in security context I would like to do something like that

```
 <security:intercept-url pattern="/brand/edit/{brandId}" 
           access="hasRole('ROLE_ADMIN') or
                   @authorizationService.hasBrandPermission(
                   #brandId, principal.username)"/> 
```

The only thing I get is username. BrandId is always null. I used to do that with @PreAuthorize and it worked but now I would like to centralized security configuration in single xml file instead of spreading it across all controller classes. Moreover when I was using @PreAuthorize my access-denied-handler did not redirect me into denied page but display ugly AccessDeniedException insead.

I would really aprecieate any ideas.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-24T21:38:04.880

将您的 Spring Security 版本更改`pom.xml`为`4.1.0.RELEASE`：

```
<spring-security.version>4.1.0.RELEASE</spring-security.version>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${spring-security.version}</version>
</dependency> 
```

之后你可能需要清理你的 Maven 项目。

*（我知道，这是一个老问题。尽管如此，三年后我遇到了同样的问题）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:43:02.087

您可以尝试使用正则表达式。

如果您使用 spring security 3.1 ，则需要在 http 元素中添加属性**path-type="regex"或****request-matcher="regex"**

有关更多详细信息，请参阅文档

# visual-studio-2010 - How to *manually* launch the last successful build in Visual Studio?

> ID：11757034
> 
> 赞同：5
> 
> 时间：2012-08-01T10:10:27.090
> 
> 标签：visual-studio-2010, visual-studio

I've turned off the dialog "build failed do you want to launch last successful build", and don't want to turn it back on. Is there a way to manually (menu command, macro) launch the last successful build, without having to start a build at all? This is useful to show something to another person while I'm the middle of coding and I've broken the build (or simply don't want to wait for the next compilation, whether it succeeds or fails).

Launching the exe in the bin folder doesn't work, first because it doesn't have the current command-line argument & working directory setup in the build options, and secondly I get asserts: apparently it's expecting to be attached to the debugger (which I think we still have with the "last successful build" dialog?). This is for Visual C++ 2010.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-13T20:41:12.247

工具 > 选项 > 项目和解决方案 > 构建和运行 > “运行时，当项目过期时：” > 从不构建

这是一个 AutoHotKey 脚本，我用来在“提示构建”（使用 Ctrl+1）和“从不构建”（使用 Ctrl+2）之间切换。

```
ToggleBuildBeforeRun(skipBuild)
{
    SetTitleMatchMode, 2
    IfWinActive, Visual Studio
    {
        Send !to^ebuild{Space}and{Space}run

        Sleep 800
        Send {Tab 4}{Down 2}

        if (skipBuild)
        {
            Send {Up 1}
        }

        Sleep 600
        Send {Enter}
    }
}

^1::
ToggleBuildBeforeRun(false)
return

^2::
ToggleBuildBeforeRun(true)
return 
```

# cakephp - Relationships on Cakephp 2.0

> ID：11757037
> 
> 赞同：1
> 
> 时间：2012-08-01T10:10:39.903
> 
> 标签：cakephp, model, foreign-keys, cakephp-2.0, relationship

I have two models : `Absence, Students`;

Absence fetch name and absence number from Students, now i want to linking model together, but i have been struggling to figure out how to map those relationships,

i dont have groups table, cause works well before, but now cake php said error by not have linking model., i used this following line before and work fine!

```
 $this->loadModel("Student");
    $siswas=$this->Student->find('all');
    $this->set('students', $siswas); 
```

but now i have error detected, named Internal server 500, and i don't know what i have to do., before my application is fine, but now is something wrong happens, now i need to linking model together, i need help for it..

any help would appreciated..

**EDIT :**

"My Problems has been Solved, the problem is because database is not working well thank for the answers"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:20:54.173

表结构将是：

```
Students Table
id    student_name   other fields

absents table
id  student_id  other fields 
```

学生模特关系

```
$hasMany = array('Absent'); 
```

缺少模型关系

```
$belongsTo = array('Student'); 
```

# tcl - Tcl/Tk：当用户改变窗口大小时如何缩放小部件

> ID：11757038
> 
> 赞同：0
> 
> 时间：2012-08-01T10:10:45.977
> 
> 标签：tcl, tk

我有一个窗口，里面有小部件。当我手动重新调整窗口大小时，小部件会在高度减小时自行缩放，但在宽度改变或高度放大超过初始高度时不会。如何使小部件堆叠到窗口的边框？

创建窗口的代码：

```
wm title $base "KitKite Sparam Viewer"
set frm_main      [frame  $base.main_frm]
pack $frm_main

grid [frame $frm_main.graph ] -row 1 -column 1
set g [sparam_graph_widget $frm_main.graph graph]

grid [set frm [frame $frm_main.frm]] -row 1 -column 2
#from and to frame
set from      [frame $frm.from -relief ridge -bd 2]
set from_lbl  [label $from.lbl -text "From:"]
set f_tbl_frm [frame $from.tbl_f]
set to        [frame $frm.to -relief ridge   -bd 2]
set to_lbl    [label $to.lbl   -text "To:"]
set t_tbl_frm [frame $to.tbl_t]

grid $from      -column 1 -row 1 -sticky nwe
grid $from_lbl  -row 1 -sticky nsew
grid $f_tbl_frm -row 2 -sticky nsew
grid $to        -column 2 -row 1 -sticky nwe
grid $to_lbl    -row 1 -sticky nsew
grid $t_tbl_frm -row 2 -sticky nsew

set from_t [sparam_table_widget $f_tbl_frm f_tbl]
set to_t   [sparam_table_widget $t_tbl_frm t_tbl]

set data        [frame $frm.data]
set data_lbl    [label $data.lbl -text "Choose data type to show"]
set isi         [checkbutton $data.cb_isi -variable cb(isi) -command [list __sp_data_changed isi $g] -text ISI       ]
set xt          [checkbutton $data.cb_xt  -variable cb(xt)  -command [list __sp_data_changed xt  $g] -text XT        ]
set ref         [checkbutton $data.cb_ref -variable cb(ref) -command [list __sp_data_changed ref $g] -text Reflection]
set conf_button [button $data.bt_conf -text "Configure connections" -command [list __sp_configure_datapath]]

grid $data        -column 1 -row 2 -columnspan 2 -sticky new
grid $data_lbl    -column 1 -row 1 -columnspan 2 -sticky nsew
grid $isi         -column 1 -row 2               -sticky nsw
grid $xt          -column 1 -row 3               -sticky nsw
grid $ref         -column 1 -row 4               -sticky nsw
grid $conf_button -column 2 -row 2 -rowspan 3    -sticky nsew

grid rowconfigure $frm 1 -weight 4 -uniform 1
grid rowconfigure $frm 2 -weight 1 -uniform 1
grid rowconfigure $frm_main 1 -weight 5 -uniform 1 
```

`$base`是使用创建的窗口的名称，`toplevel` `sparam_graph_widget`并且`sparam_table_widget`是创建并放置在框架内的过程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:01:04.187

为了使至少一个小部件扩展以占用空间，您需要设置至少一列具有非零权重。

```
grid columnconfigure $containerWidget $someWidgetOrIndex -weight 1 
```

请注意，一旦您这样做，该列将优先处理水平方向上的所有大小变化。您可以通过将多个列设置为具有非零权重来调整这一点，并为不同的列赋予不同的权重（`-weight 2`将收到两倍大的变化`-weight 1`）。

您可能还需要调整用于`pack`外框的选项。通过将不同的帧设置为不同的颜色进行调试，以便您可以看到发生了什么……</p>

# php - 插入多行

> ID：11757040
> 
> 赞同：-1
> 
> 时间：2012-08-01T10:10:49.047
> 
> 标签：php, mysql, arrays, loops

我尝试在我的数据库中插入多行，该图像未保存到文件夹，
我收到此错误

> Blockquote ArrayArray你的SQL语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'Chrysanthemum.jpg')、('Hydrangeas.jpg')'、'('Chrysanthemum.jpg')、('Hydrangeas.j' 行附近使用正确的语法1

这是我的代码：

```
$hopid = $_POST[photo_hop_id];
$title = $_POST['photo_name_id'];

if(!is_array($title)) {
    $title = array();
}

$titleds = "('" . implode("'), ('", $title) . "')";

$tmp_file = $_FILES['ne_photo_image']['tmp_name'];
$file = $_FILES['ne_photo_image']['name'];  

if(!is_array($tmp_file)) {
    $tmp_file = array();
}
if(!is_array($file)) {
    $file = array();
}

$sementara = "('" . implode("'), ('", $tmp_file) . "')";
$filed = "('" . implode("'), ('", $file) . "')";    

$tmp_file1 = $_FILES['fe_photo_image']['tmp_name'];
$file1 = $_FILES['fe_photo_image']['name']; 

if(!is_array($tmp_file1)) {
    $tmp_file = array();
}
if(!is_array($file1)) {
    $file = array();
}

$sementara1 = "('" . implode("'), ('", $tmp_file) . "')";
$filed1 = "('" . implode("'), ('", $file) . "')";   

if(!move_uploaded_file($sementara, 'image/' . $filed)) {
    echo $_FILES["ne_photo_image"]["error"];
}

if(!move_uploaded_file($sementara1, 'image/' . $filed1)) {
    echo $_FILES["fe_photo_image"]["error"];
}

$y = "INSERT INTO photo VALUES (null, '".$filed."', '".$filed1."', '".$hopid."', '".$titleds."')";
$z = mysql_query($y) or die (mysql_error());
if($z) {
    $msg = "Data sudah ditambahkan";
}
else {
    $msg = "Data tidak bisa dimasukkan";
}

echo print_r($y); 
```

这是我的表格：

```
<form method="post" enctype="multipart/form-data">
    <table border="0"cellpadding="0" cellspacing="0" width= "100%">
        <tr>
            <td>Hop Name :<?echo "$data[hop_name]"?>
                <input type='hidden' name='photo_hop_id' value='<?echo"$data[hop_id]"?>'>
            </td>
        </tr>
        <table border="0"cellpadding="0" cellspacing="0" width= "100%">
            <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Near End Site Name : <?echo "$data[ne_site_name]" ?>
                    </br>
                    Near End Site Id : <?echo "$data[ne_site_code]" ?>
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Far End Site Name : <?echo "$data[fe_site_name]" ?>
                    </br>
                    Far End Site Id : <?echo "$data[fe_site_code]"?>
                </td>
            </tr>   
            <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?  $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 1");
                    $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]" ?> 
                    <input type='hidden' name='photo_name_id[]' value='<?echo"$dpm1[0]"?>'> :  
                    <input type="file" name="ne_photo_image[]">
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?echo "$dpm1[0]"?> : <input type="file" name="fe_photo_image[]">
                </td>
            </tr>   
            <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <? $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 2");
                    $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]" ?> 
                    <input type='hidden' name='photo_name_id[]' value='<?echo"$dpm1[0]"?>'> :  
                    <input type="file" name="ne_photo_image[]">
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?echo "$dpm1[0]"?> : <input type="file" name="fe_photo_image[]">
                </td>
            </tr>   
        </table>
    </table>

    <input type="submit" value="insert" />
</form> 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:20:17.177

您的错误显然来自这一行：

```
$y = "INSERT INTO photo VALUES (null, '".$filed."', '".$filed1."', '".$hopid."', '".$titleds."')"; 
```

例如，您的 var`$filed`是一个内爆数组，看起来像`('foo'), ('bar')`. 最后，您的请求将如下所示`INSERT INTO photo VALUE (null, '('foo'), ('bar')', [...]);`。

`$filed`您必须转义, `$filed1`, `$hopid`,中的简单引号`$titleds`，但我很确定您的请求完全错误。

你能给我们`photo`表~~模式~~结构吗？

编辑 ：

给出的结构：`(photo_id,ne_photo_image,fe_photo_image,hop_id,title)`

要在表中插入多行，您必须使用这种语法：

```
INSERT INTO photo(`photo_id`, `ne_photo_image`, `fe_photo_image`, `hop_id`, `title`)
VALUES
    (null, 'foo', 'bar', 'baz', 'qux'),
    (null, 'foo', 'bar', 'baz', 'qux'),
    (null, 'foo', 'bar', 'baz', 'qux'); 
```

Aka，您必须**逐行**插入数据，而不是逐列插入数据（您现在尝试尝试的内容）。

你的代码应该是这样的（这绝对不是一段完整的代码，我不确定是否理解你所有的代码，然后我给你一些跟踪）：

```
<?php 
   $hopid = $_POST['photo_hop_id'];

   $titles = $_POST['photo_name_id'];
   $ne_photo_images = $_FILES['ne_photo_image']['tmp_name'];
   $fe_photo_images = $_FILES['fe_photo_image']['tmp_name'];

   /*
   I assume $titles, $ne_photo_images and $fe_photo_images 
   have the same number of elements, in the right order.
   */

   $sql = "INSERT INTO photo(`photo_id`, `ne_photo_image`, `fe_photo_image`, `hop_id`,    `title`) VALUES";
   for($i = 0, $l = sizeof($titles) ; $i < $l ; $i++)
   {
      //adding row datas
      $sql .= " (null, 
                 '".$ne_photo_images [$i]."', 
                 '".$fe_photo_images [$i]."', 
                 '".$hopid."', 
                 '".$titles[$i]."')";
      if($i < $l - 1)
         $sql .= ",";
   }

   if(mysql_query($sql))
      //get happy
   else
      //take a coffee
?> 
```

同样，这段代码远非完美，我只是想向您解释如何解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:16:33.870

`$filed`去掉, , 周围的`$filed1`撇号`$titleds`

```
$y = "INSERT INTO photo VALUES (null, ".$filed.", ".$filed1.", '".$hopid."', ".$titleds.")"; 
```

永远不要使用`mysql_*`函数，因为它已被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:26:44.703

在您的代码中，您将提交的数据分配给各个变量。您正在检查这些变量是否是数组。如果没有，您将使用`array()`. 因此，您尝试将其转换为没有元素的数组变量，因为当您执行该分配时，您将覆盖任何现有值。

所以最后，如果您提交的数据不是数组，您可能在数组中没有任何元素用于插入！

供测试用：

```
$abc = 'hi';
if(!is_array($abc))
{
    $abc = array();
}
print_r($abc); // $abc will be an empty array 
```

另外，请阅读 samsam 和 Alexander 指出的关于单引号的内容。

另一件事是，`$_POST`是一个关联数组。你必须传入`key`as 字符串。在您的第一行 :`$hopid = $_POST[photo_hop_id];`中，应该是这样的：`$hopid = $_POST['photo_hop_id'];`

当你想回显一个变量的值时，你可以简单地这样做`echo $variblename;`：在您的代码:`<?echo "$dpm1[0]"?>`中，最好像这样使用它：（`<?echo $dpm1[0]?>`即，没有双引号，因为其中没有其他字符串）。

# http - 在 WADL 中定义 HTTP 基本身份验证标头的最具描述性的方法是什么？

> ID：11757048
> 
> 赞同：1
> 
> 时间：2012-08-01T10:11:20.310
> 
> 标签：http, rest, wadl

我想在 WADL 中描述 HTTP 基本身份验证，实现此目的的最具描述性的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:38:06.433

由于基本身份验证是作为标头实现的，因此只需在请求中使用参数即可。

```
<method name="GET">
    <request>
        <param name="Authorization" style="header" type="xs:string" required="true" />
        <!-- other headers... -->
    </request>

    <response>
        <!-- repsonse.. -->
    </response>
</method> 
```

# android - 如何在自定义对话框中捕获复选框选项？

> ID：11757054
> 
> 赞同：1
> 
> 时间：2012-08-01T10:11:50.223
> 
> 标签：android, dialog

![对话框截图](../Images/b8befb96ab6feb48c303da6078aa0e1d.png)

**我的目标是**
创建一个自定义对话框，该对话框由顶部的可滚动列表视图和底部的“确定”按钮组成。对于列表视图中的每一行，我都放置了一个复选框，我希望捕获单击“确定”时选中的复选框。

**问题**
在查看了一些在线教程以及一些问答后，我想出了一个基本的方法。我所做的是

1\. 在列表视图的适配器中，我在创建时通过 setTag() 将选项名称附加到每个复选框
2\. 在适配器中设置一个 onCheckedChangeListener ，将选中的选项放入数组中或删除如果取消选择该选项
3\. 在主 UI 活动的 onCreateDialog 中，将 OnClickListener 附加到“确定”按钮，并使其从适配器检索选项数组（在步骤 2 中获得）。

它最终起作用；但我认为这太麻烦而且不优雅。我曾考虑将 onItemClickListener 用于列表视图或将自定义视图放入 AlertDialog （提供更好的按钮/复选框管理），但经过一些试验后放弃了。

有没有人能想到更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:33:54.177

阅读有关具有多选模式的警报对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:09:46.223

我需要一个相当复杂的对话框，最后我把它写成一个扩展 RelativeLayout 的小部件。单击我的日历图标时，它会启动一个使用小部件的活动，根据数据库中的内容填充日历中的天数：

![日历小部件](../Images/4c6a7424a2e4c2d38beba4090c2991d9.png)

当您扩展一个布局时，您可以完全控制它的大小、布局以及它在画布上绘制的内容。该活动实现 OnTouchListener 以获取日历上的哪个日期已被触摸 - 我确信这同样适用于添加图像并获取已选中的复选框。

# mysql - 在 CakePHP 中按 FIELD 排序

> ID：11757056
> 
> 赞同：3
> 
> 时间：2012-08-01T10:11:53.920
> 
> 标签：mysql, cakephp-2.0

我正在尝试使用以下代码在 CakePHP 2 应用程序中实现自定义排序顺序：

```
var $paginate = array(
    'Project' => array(
        'conditions' => array('Project.deleted' => 0),
        'order' => array(
            'Project.pinned' => 'desc',
            'FIELD(Project.status, 1, 3, 4, 0, 2) DESC'
            'Project.date_start' => 'asc',
            'Project.name' => 'asc',
        ),
    ),
); 
```

但是，由于某种原因`FIELD(Project.status, 1, 3, 4, 0, 2) DESC`被 Cake 忽略了。你能帮我让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:50:21.537

我通过在 /lib/Cake/Controller/Component/PaginatorComponent.php 中进行更改使其工作

我刚刚发现了如何做到这一点，我知道它并不完美，因为它不能验证陈述是否正确，但我认为这对于遇到这个问题的人来说是一个好的开始。

在函数 validateSort 中，我添加了最后一个 elseif，它是 ORDER BY FIELD。问题是 $order[$alias.'.'.$field] = $value 不能与 FIELD 一起使用，因为它与大多数其他 ORDER BY 子句的工作方式不同。

```
foreach ($options['order'] as $key => $value) {
    $field = $key;
    $alias = $object->alias;
    if (strpos($key, '.') !== false) {
        list($alias, $field) = explode('.', $key);
    }

    if ($object->hasField($field)) {
        $order[$alias . '.' . $field] = $value;

    } elseif ($object->hasField($key, true)) {
        $order[$field] = $value;
    } elseif (isset($object->{$alias}) && $object->{$alias}->hasField($field, true)) {
        $order[$alias . '.' . $field] = $value;                 
    } elseif (strpos($alias, 'FIELD')==0){
        $order[$key]=$value;
    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-16T09:13:29.173

从订单中删除数组，删除数组后在我的情况下工作

```
var $paginate = array(
    'Project' => array(
        'conditions' => array('Project.deleted' => 0),
        'order' =>
            'Project.pinned' => 'desc',
            'FIELD(Project.status, 1, 3, 4, 0, 2) DESC'
            'Project.date_start' => 'asc',
            'Project.name' => 'asc',
    ),
); 
```

# requirejs - Requirejs 向脚本元素添加参数

> ID：11757057
> 
> 赞同：6
> 
> 时间：2012-08-01T10:11:57.257
> 
> 标签：requirejs

是否可以向 sctipt 元素添加参数

例如

```
<script 
    ...
    src="XX.js"
></script> 
```

我想添加参数 hello="world" 所以这被添加到页面：

```
<script 
    ... 
    src="XX.js"
    hallo="welt"
></script> 
```

原因：我有一个 js 库（[aloha-editor](http://aloha-editor.org/)），它依赖于加载它的插件的参数（并且主要功能实际上在插件中）。但是，我只想在用户想要编辑时加载插件，并且 requirejs 是最佳选择，因为它用于应用程序的其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:21:58.353

如果您将 aloha 脚本包装在定义函数中，则可以传递如下参数（[链接](http://requirejs.org/docs/api.html#config-moduleconfig)）：

```
//in main appfile
require.config({
    'config': {
        'aloha': {
            src: "XX.js",
            hallo: "welt"
        }
     }
});

//and in the aloha file
define(['module'], function (module) {
    var src = module.config().src,
        hallo = module.config().hallo;

    ... // the aloha code
}); 
```

文档中还有一种替代的“简化”语法。

编辑：也许我误解了这个问题，如果你问是否可以将 html 属性添加到页面上已有的脚本标签：`<script src='' data-src='xx.js' data-hallo='welt'></script>`是用于向标签添加自定义属性的新 html5 语法，所有前面的数据都是正确的语法。

# wordpress - 从heroku拉取Git

> ID：11757061
> 
> 赞同：1
> 
> 时间：2012-08-01T10:12:28.347
> 
> 标签：wordpress, git, heroku, github

我如何从heroku中提取？我在我的 heroku 应用程序中运行了 wordpress，我通过模板编辑器更改了一些内容。

我想在本地也进行这些更改。

当我尝试从 heroku 中提取信息时，我收到以下消息：

```
Already up-to-date. 
```

但我在本地没有这些变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:17:23.570

收到*Already up-to-date*消息是正常的，因为远程更改没有提交和推送。

由于您无法从 Heroku 提交和推送，因此您需要在本地工作然后部署。这就是你首先应该如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:56:45.267

你用模板编辑器改变了什么？可能是配置，而不是代码，对吗？因此，如果您从 Heroku 拉取数据，您不会看到变化吗？（我不熟悉 wordpress - 但我怀疑模板更改会导致代码更改）。所以我想我假设它是正确的：没有变化。

也许您真正想要的是数据库更改？

顺便说一句，您现在可以使用新的克隆 Heroku 应用程序[`heroku git:clone`](https://devcenter.heroku.com/articles/clone-heroku-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:16:04.603

返回什么`git branch -r --no-merged`？如果它返回任何分支，则意味着这些分支具有您在当前分支中还没有的更改。合并它们以获取更改。

否则，你拉的东西确实没有任何变化。这可能意味着您正在另一个分支中寻找更改。

在这种情况下，您可能想要做的是`git fetch <heroku>`heroku 是指向 heroku 存储库的远程名称。这将从heroku获取所有banches，然后您可以合并它们。

# java - android得到响应错误

> ID：11757063
> 
> 赞同：0
> 
> 时间：2012-08-01T10:12:29.707
> 
> 标签：java, android

在我的应用程序中，请求没有给我任何回应，我不知道为什么。这是我的代码。

```
public static String getResponse(final HttpUriRequest request, final int successCode, final boolean requiresResponse) throws Exception {

        final HttpClient client = getHttpClient();
        System.out.println("getResponce4="+client);
        final HttpResponse response = client.execute(request);
        System.out.println("getResponce5");
        final HttpEntity entity = response.getEntity();
        System.out.println("getResponce6");

        final StringBuilder sb = new StringBuilder();
        if (entity != null) {
            final InputStream stream = entity.getContent();
            byte bytes[] = new byte[4096];
            int numBytes;
            while ((numBytes=stream.read(bytes))!=-1) {
                if (numBytes!=0) {
                    sb.append(new String(bytes, 0, numBytes));
                }
            }
        }

        if (response.getStatusLine().getStatusCode() != successCode) {
            closeConnection(client);
            throw new Exception(sb.toString());
        }
        System.out.println("getResponce1");
        closeConnection(client);
        System.out.println("getResponce2");
        if (!requiresResponse) return null;
        System.out.println("getResponce3");
        return sb.toString();
    }

    private static void closeConnection(final HttpClient client) {
        try {
            final Method closeMethod = client.getClass().getMethod("close");
            if (closeMethod != null) {
                closeMethod.invoke(client);
            }
        }
        catch (IllegalArgumentException ignored) {}
        catch (IllegalAccessException ignored) {}
        catch (InvocationTargetException ignored) {}
        catch (SecurityException ignored) {}
        catch (NoSuchMethodException ignored) {}
    }

    private static HttpClient getHttpClient() {
        Class<?> androidClientClass;
        try {
            androidClientClass = Class.forName("android.net.http.AndroidHttpClient");
            final Method method = androidClientClass.getMethod("newInstance", String.class);

            return (HttpClient) method.invoke(null, "newInstance");

        } catch (ClassNotFoundException ignored) {}
        catch (IllegalArgumentException ignored) {}
        catch (IllegalAccessException ignored) {}
        catch (InvocationTargetException ignored) {}
        catch (SecurityException ignored) {}
        catch (NoSuchMethodException ignored) {}

        return new DefaultHttpClient();
    }

    private static String notInitialized() {
        return "{ \"errorCode\" : 101 }";
    }

public static String getAddress(final String key1, final String key2, final String lat, final String lng) throws Exception {

    final HttpGet get = new HttpGet("http://192.168.1.9/getUser");

    return getResponse(get, 200, true);
} 
```

我在 System.out.println 的帮助下进行了检查，发现在此之后（最终的 HttpResponse response = client.execute(request);）它无法继续工作。System.out.println("getResponce5"); 已经不打印了。我不明白这里有什么问题。

我发现了异常

```
08-01 14:44:29.272: WARN/System.err(14718): java.lang.RuntimeException: This thread forbids HTTP requests
08-01 14:44:29.272: WARN/System.err(14718): at android.net.http.AndroidHttpClient$1.process(AndroidHttpClient.java:91)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:290)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:160)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:401)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-01 14:44:29.272: WARN/System.err(14718): at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:243)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.VTGClient.getResponse(VTGClient.java:59)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.VTGClient.getAddress(VTGClient.java:139)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.DataActivity$1.onClick(DataActivity.java:75)
08-01 14:44:29.272: WARN/System.err(14718): at android.view.View.performClick(View.java:2532)
08-01 14:44:29.272: WARN/System.err(14718): at android.view.View$PerformClick.run(View.java:9293)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Handler.handleCallback(Handler.java:587)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Looper.loop(Looper.java:150)
08-01 14:44:29.282: WARN/System.err(14718): at android.app.ActivityThread.main(ActivityThread.java:4277)
08-01 14:44:29.282: WARN/System.err(14718): at java.lang.reflect.Method.invokeNative(Native Method)
08-01 14:44:29.282: WARN/System.err(14718): at java.lang.reflect.Method.invoke(Method.java:507)
08-01 14:44:29.282: WARN/System.err(14718): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 14:44:29.282: WARN/System.err(14718): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 14:44:29.282: WARN/System.err(14718): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:23:06.460

不使用`System.out.println(`，改为使用`Log.v(tag, text)`；

有关 Log 类的更多信息：http: [//developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

# javascript - 在处理方法之前调用的回调

> ID：11757069
> 
> 赞同：0
> 
> 时间：2012-08-01T10:12:50.583
> 
> 标签：javascript, cordova

嘿，我正在使用 phonegap 数据库，并试图了解为什么在处理方法完成之前调用我的回调，下面是 js 代码和指示我的声明的日志

代码如下：（首先调用的方法是insertIntoDB(x,y);）

```
 var databaseVersion = 1;

function createTable(tx, tableName, tableColumns){
    var sqlStatement = 'CREATE TABLE IF NOT EXISTS '+tableName+' (_id unique, ' + tableColumns+')';
    tx.executeSql('DROP TABLE IF EXISTS '+tableName);
    tx.executeSql(sqlStatement);
    console.log('now doInsertion (if successful should be called');
}

function createMenuDataBase(tx){
    var tableName ="element";
    var tableColumns = ["name", "resource","remoteData", "picture", "pageId", "type", 
        "localAction", "replaceText", "textSize", "textColor","background", "sortOrder"];
    createTable(tx, tableName, tableColumns);
}

function insertIntoDB(tableName,json){
    checkDatabaseVersion(doInsertion,tableName,json);
}

function doInsertion(dbName,json){
    console.log('starting doInsertion');
    var sqlStart = "INSERT INTO "+dbName+" (";
    var sqlEnd =");"
    $.each(json.list, function(i, object) {
        var first = true;
        var columns="";
        var values = ") VALUES ("

        for (property in object) {
            //            alert(property);
            if(property!=undefined){

                if(first){
                    columns +=property;
                    values +=object[property];
                    first=false;
                } else {   
                    columns += ', '+property;
                    values +=', '+object[property];
                }
            }
        }
        console.log(sqlStart+columns+values+sqlEnd);
    });
}

function checkDatabaseVersion(callback,dbName,json){
    var localDatabaseVersion = localStorage.getItem("localDatabaseVersion");
    alert(localDatabaseVersion);
    if(localDatabaseVersion == 'undefined' || localDatabaseVersion == null){
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(createMenuDataBase, errorCB, callback(dbName,json));

    //localStorage.setItem("localDatabaseVersion",databaseVersion);
    }
} 
```

这是来自cordova/我的应用程序的logcat：

```
08-01 12:09:02.857: D/DroidGap(24433): onMessage(spinner,stop)
08-01 12:09:03.467: D/CordovaLog(24433): starting doInsertion
08-01 12:09:03.467: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 24 : starting doInsertion
08-01 12:09:03.472: D/CordovaLog(24433): INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.9747386311565038, null, 9765, img, 1, 0, null, /content/picture/menu/product, null, null, mainMenu.menu, showProductCatalog(product), null, Y, 0);
08-01 12:09:03.477: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 46 : INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.9747386311565038, null, 9765, img, 1, 0, null, /content/picture/menu/product, null, null, mainMenu.menu, showProductCatalog(product), null, Y, 0);
08-01 12:09:03.477: D/CordovaLog(24433): INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.9847155498013517, null, 9753, img, 1, 1, null, /content/picture/menu/social, null, null, mainMenu.menu, showSocialMedia(socialmedia), null, Y, 0);
08-01 12:09:03.477: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 46 : INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.9847155498013517, null, 9753, img, 1, 1, null, /content/picture/menu/social, null, null, mainMenu.menu, showSocialMedia(socialmedia), null, Y, 0);
08-01 12:09:03.482: D/CordovaLog(24433): INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.5451258043474583, null, 9759, img, 1, 2, null, /content/picture/menu/store, null, null, mainMenu.menu, menu(store), null, Y, 0);
08-01 12:09:03.482: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 46 : INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.5451258043474583, null, 9759, img, 1, 2, null, /content/picture/menu/store, null, null, mainMenu.menu, menu(store), null, Y, 0);
08-01 12:09:03.482: D/CordovaLog(24433): INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.6883956226802171, null, 9762, img, 1, 3, null, /content/picture/menu/showroom, null, null, mainMenu.menu, showCollection(collection), null, Y, 0);
08-01 12:09:03.482: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 46 : INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.6883956226802171, null, 9762, img, 1, 3, null, /content/picture/menu/showroom, null, null, mainMenu.menu, showCollection(collection), null, Y, 0);
08-01 12:09:03.487: D/CordovaLog(24433): INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.21612715546682493, null, 9768, img, 1, 4, null, /content/picture/menu/beskeder, null, null, mainMenu.menu, showNotificationList(notificationList), null, Y, 0);
08-01 12:09:03.487: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 46 : INSERT INTO element (name, resource, id, type, appId, sortOrder, background, picture, textColor, remoteData, pageId, localAction, replaceText, active, textSize) VALUES (menu0.21612715546682493, null, 9768, img, 1, 4, null, /content/picture/menu/beskeder, null, null, mainMenu.menu, showNotificationList(notificationList), null, Y, 0);
08-01 12:09:03.497: D/CordovaLog(24433): now doInsertion (if successful should be called
08-01 12:09:03.497: D/CordovaLog(24433): file:///android_asset/www/js/Database.js: Line 7 : now doInsertion (if successful should be called 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:51:32.877

您正在调用回调而不是传递它：

```
db.transaction(createMenuDataBase, errorCB, callback(dbName,json));

callback(dbName,json) //Calls the function and passes the result to `db.transaction` as callback but it's not a function since the result is not a function. 
```

试试这个：

```
db.transaction(createMenuDataBase, errorCB, callback); 
```

或者如果`callback`需要这些参数，那么：

```
db.transaction(createMenuDataBase, errorCB, callback.bind( null, dbName, json )); 
```

# javascript - 设置超时不适用于功能

> ID：11757075
> 
> 赞同：3
> 
> 时间：2012-08-01T10:13:01.393
> 
> 标签：javascript, jquery

我正在使用以下内容暂停 javascript 几秒钟：

```
 setTimeout(start_countdown(),3000); 
```

它不起作用，无论秒数如何，都会调用该函数。但是，以下函数确实有效，它不使用函数。

```
setTimeout(alert('hi'),3000); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T10:15:32.903

您需要传递函数引用。您正在传递函数的返回值。

区别在于：一个是您想要执行的函数的蓝图，另一个意味着您正在立即执行该函数并将其返回值传递给`setTimeout`.

```
setTimeout(start_countdown, 3000); 
```

如果你想做一些比简单地调用命名函数更复杂的事情，或者你想将一个参数传递给命名函数，你需要将一个匿名函数传递给超时并在其中调用你的函数：

```
setTimeout(function() {
    start_countdown(/* possible params */);
    /* other code here as required */
}, 3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:15:44.580

如果您不需要传递参数，请不要使用 ()

```
setTimeout(start_countdown,3000); 
```

如果你这样做，你必须包装你的功能

```
setTimeout(function(){start_countdown(parameter)},3000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:13:26.530

改写

```
setTimeout(start_countdown, 3000); 
```

没有括号`()`
，第二个例子也可以写成

```
setTimeout(function() { alert('hi'); }, 3000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:16:08.860

在不同的浏览器中，它以不同的方式工作。在 IE 中，您需要使用匿名函数将参数传递给回调：

> setTimeout(function(){alert('hi')},3000);

# android - android在弹出视图上设置文本

> ID：11757090
> 
> 赞同：0
> 
> 时间：2012-08-01T10:13:28.533
> 
> 标签：android, textview, android-fragments

我有一个片段工作正常的应用程序，

我有一个带有按钮的视图，当一个按钮被点击时，会显示一个弹出视图，

但我需要在弹出视图上为按下的每个按钮设置不同的文本。

我是 android 和 java 的新手，刚刚意识到我不明白如何将数据发送到弹出视图，为弹出视图设置 xml 上的文本，

```
public class Tab2HeadH1 extends Fragment   implements OnClickListener{

    //testeo popero

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.tab_2_head_buttons, container,false);

        //Buttons

        final Button buttonNose = (Button) view.findViewById(R.id.button_pop_nose);

        buttonNose.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
              //aqui tus tareas,,

                LayoutInflater layoutInflater = (LayoutInflater)getActivity().getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

               View popupView = layoutInflater.inflate(R.layout.popup, null);  
                        final PopupWindow popupWindow = new PopupWindow(
                          popupView, 
                          LayoutParams.WRAP_CONTENT,  
                                LayoutParams.WRAP_CONTENT);

                        Button btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
                        btnDismiss.setOnClickListener(new Button.OnClickListener(){

                @Override
                public void onClick(View v) {
                 // TODO Auto-generated method stub
                 popupWindow.dismiss();
                }});

                        popupWindow.showAsDropDown(buttonNose, 50, 30);

            }

        });

        Button buttonEye = (Button) view.findViewById(R.id.button_pop_eye);

        buttonEye.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
               // onLoginClicked(v);
                Toast.makeText(getActivity(), "ss9 eye",
                        Toast.LENGTH_SHORT).show();

            }
        });

return view;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        super.onViewCreated(view, savedInstanceState);

        ((TabActivity)getActivity()).setHeader("TAPING APPLICATION");
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {

        }
    }

} 
```

和xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@android:color/background_light">
 <LinearLayout 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical" 
     android:layout_margin="1dp"
     android:background="@android:color/darker_gray">
     >
     <LinearLayout 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:layout_margin="20dp">
      <TextView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="It's a PopupWindow" />
      <ImageView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:src="@drawable/ic_launcher" />
      <Button
          android:id="@+id/dismiss"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="Dismiss" />
      </LinearLayout>
 </LinearLayout>
</LinearLayout> 
```

那么如何设置textView的文本，

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:21:48.880

您需要在弹出布局中找到您的 textView 并设置弹出文本

```
TextView text = popupView.findViewById(R.id.popup_text);
text.setText(your text); 
```

# iphone - 在 iOS 中取消 ASIFormDataRequest

> ID：11757094
> 
> 赞同：0
> 
> 时间：2012-08-01T10:13:48.703
> 
> 标签：iphone, objective-c, asihttprequest

你好。我正在使用 ASIFormDataRequest 将图像上传到服务器。我想要取消上传图片的选项，所以我试图取消所有上传请求，但它似乎不起作用。

这是我的代码：

```
if (asiRequest) {
    NSLog(@"cancel call");
    [asiRequest cancel];
    asiRequest.delegate = nil;
    asiRequest.uploadProgressDelegate = nil;
    asiRequest = nil;
    progressbar.hidden=YES;
    uploadinglbl.hidden=YES;
    photosCountlbl.hidden=YES;
    [self.spinner stopAnimating];

    //[self.navigationController popViewControllerAnimated:YES];
} 
```

谁能帮助我如何取消所有请求？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:34:50.147

```
if(![asiRequest isCancelled]) {
 // Cancels an asynchronous request
 [asiRequest cancel];
 // Cancels an asynchronous request, clearing all delegates and blocks first
 [asiRequest clearDelegatesAndCancel];
} 
```

# templates - Slim，Twig - 如何将 var 传递给 Twig 到基本模板

> ID：11757098
> 
> 赞同：1
> 
> 时间：2012-08-01T10:14:00.470
> 
> 标签：templates, session, twig, slim

我想在用户面板框中显示未读消息的数量，每次用户登录时都会出现。

如何将 msg 的数量从控制器传递到基本布局中包含的用户面板框？我不能为此使用路由，因为面板出现在所有页面上（索引也是如此）。

现在我使用全局会话发送它，但我认为它可以做得更好。有什么线索吗？

控制器：

```
if(isset($_SESSION['user_id'])){
$unreaded=Model::factory('Message')->filter('getUnreadedGroups',$_SESSION['user_id']);
$_SESSION['unreaded']=$unreaded->opened;} 
```

基地布局

```
<!DOCTYPE html>
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <link rel="stylesheet" href="/css/reset.css" />
                <link rel="stylesheet" href="/css/style.css" />
                <title>{% block page_title %} {% endblock %}</title>
                <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
                <script type="text/javascript" src="/js/jquery.scripts.js"></script>
            </head>
            <body>
                <div id="all">

                    <div id="top-container">
                        <div id="logo">test</div>
                        <div id="search-box"></div>
                    </div>
                    <div id="left-side">
                        <div class="menu">
                            <ul>
                                <li class="nav_dashboard active"><a href="/">Strona główna</a></li>
                                <li class="nav_graphs"><a href="/wszystkie">Wzory</a></li>
                                <li class="nav_forms"><a href="/najnowsze">Najnowsze</a></li>
                                <li class="nav_typography"><a href="/najlepiej-oceniane">Najlepiej oceniane</a></li>
                            </ul>
                        </div>
                    </div>

                    <div id="page">
        {% block content %} {% endblock %}
                    </div>

                    <div id="right-side">
                        <div id="login-container">

                            {% if session.user_id is defined %}
                                    {% include 'user_panel.php' %}
                            {% else %}
                                    {% include 'login_form.php' %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </body>
        </html> 
```

用户面板框

```
 <div class="login-top" id="login-form-top">
        <div id="welcome">Witaj, <span>John Doe</span></div>
        <p id="last-login">Ostatnie logowanie:</p>
        <div id="logout-msg-container">
            <div class="logut"><a href="/wyloguj" class="logout">Wyloguj</a></div>
            <a id="msg-number" href="/profil/wiadomosci">
                <span class="number">
                  {% if session.unreaded >0 %}
                    {{ session.unreaded }}
                  {% else %} 0
                  {% endif %}
                </span>
            </a>
        </div>
    </div>
    <div class="menu">
        <p class="header">Profil użytkownika</p>
        <ul>
            <li><a href="/profil/edytuj">Twoje Dane</a></li>
            <li><a href="/profil/galeria">Twoje zbiory</a></li>
            <li><a href="/profil/wiadomosci">Twoje wiadomości</a></li>
        </ul>
    </div> 
```

典型模板

```
{% extends 'layout.php' %}

    {% block page_title %}Najnowsze pliki{% endblock %}
    {% block content %}
                    <div id="page-top">
                        <h1>Najnowsze</h1>
                        <p>+ <span class="blue">12</span> wzorów</p>
                    </div>

                    <div id="main-topvote">
                        <div class="title"><a href="">Najnowsze</a><span>( ostatni tydzień )</span></div>
                        <div class="content">
                            {% for file in files %}
                                <p>{{ file.idFile }}<br/> {{ file.date_add }}<br/> {{ file.desc }}<br/> {{ file.title }}<br/><br/></p>
                            {% else %}  
                                <p>There are currently no articles.</p>
                            {% endfor %}
                        </div>
                    </div>
    {% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:35:35.797

我还没有测试过这个（[https://github.com/fabpot/Twig/issues/293](https://github.com/fabpot/Twig/issues/293)）：

基地布局：

```
...
<div id="right-side">
    {% block side %}
        {% block side-login %}
            {% if session.user_id is defined %}
               {% include 'user_panel.php' %}
            {% else %}
               {% include 'login_form.php' %}
            {% endif %}
        {% endblock %}
    {% endblock %}
</div>
... 
```

典型模板：

```
...
{% block side %}
    {% set count = 12 %}
    {% block side-login %}
        {{ parent() }}
    {% endblock %}
{% endblock %}
... 
```

因此，您可以在用户面板框中使用 {{count}}。您也可以尝试跳过侧登录块定义..但我不确定。

# wpf - 覆盖每个模块的一些主题样式和属性

> ID：11757099
> 
> 赞同：0
> 
> 时间：2012-08-01T10:14:05.583
> 
> 标签：wpf, themes, prism-4, basedon

我正在使用“Prism”编写一个 WPF 应用程序，并且一些购买的 Grid 主题应用了“Xceed Theme”。我正在设计我们的客户要求的巨大变化，让他们可以选择修改某些属性（例如所选行的背景），并且此功能可在每个屏幕“模块”中使用。

所以我的问题是：

1.  将我的 xceed 网格主题源添加到我的`App.xaml`合并字典后，如何在另一个 xaml 文件中覆盖它的一些样式（我知道其键）`app.xaml`（可能通过添加`BasedOn`到`style`标签）？
2.  是否可以为每个模块创建自定义资源字典并`app.xaml`在加载时将其添加到合并字典中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:34:03.340

就我而言，我使用了动态资源。主项目加载主样式。像这样的东西：

```
<FontFamily x:Key="ApplicationFontFamily">Tahoma</FontFamily> 
```

在我的模块中，我以编程方式对其进行了更改：

```
Application.Current.Resources["ApplicationFontFamily"] = new FontFamily("Arial"); 
```

它对我有用；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:05:21.793

您可以在每个模块内的主窗口/控件资源中添加样式更改。然后差异将分别适用于每个模块。

# css - 在 IE9 中查看源自用户代理样式表的 css 样式

> ID：11757101
> 
> 赞同：2
> 
> 时间：2012-08-01T10:14:07.107
> 
> 标签：css, internet-explorer-9, stylesheet, user-agent

IE9 中是否有办法查看源自用户代理的样式？

类似于 firebug 的[show user agent css](https://getfirebug.com/wiki/index.php/Style_Side_Panel#User_agent_rules)功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T14:15:23.323

今天我翻阅了一个不错的网站。[Internet Explorer 用户代理样式表](http://www.iecss.com/)

您可以在一张漂亮的表格中找到上一个 IE 版本的所有用户代理样式。当然，您可以通过点击在任何主要浏览器上打开开发人员工具`F12`

![ICSS.com 快照](../Images/f605d48f4185ce8ac77c346dbf26a1ff.png)

在**IE11**中，您将看到如下所示的图片。导航到*DOM Explorer*打开右侧的*计算样式并禁用标记为红色的选项。*

![IE11 开发者工具](../Images/59fb7c017164b5a078aad47646cd7882.png)

现在我无法在我的一台计算机上找到有效的 IE9 安装。所以我希望这对你仍然有用。

# jquery - 如何使我的固定位置文章滑块在 iPad 上平滑

> ID：11757102
> 
> 赞同：0
> 
> 时间：2012-08-01T10:14:06.813
> 
> 标签：jquery, ios, ipad, css, slider

我的客户需要一个文章滚动器，它将传出的文章留在当前滚动位置，并将新文章放在顶部。

我使用 CSS3 转换实现了这一点，方法是将传出文章的上边距设置为等于当前 $(window).scrollTop() 值的负值，然后使用 $(window).scrollTop(0 将页面滚动到顶部）。幻灯片完成后，我将外发文章的上边距重置为零，为下一次过渡做好准备。我在这里上传了一个简化的例子[http://www.siblify.com/stackslider/](http://www.siblify.com/stackslider/)但这里是专门管理“下一个”点击滚动的代码。

```
#container {
height:auto;
width:800px;
position:relative;
overflow:hidden;
margin:0 auto;
padding:60px 0 20px;
}

.slidePanel {
position:absolute;
left:0;
top:0;
width:760px;
z-index:900;
background:grey;
-webkit-transition:left .5s ease-in-out;
-moz-transition:left .5s ease-in-out;
-o-transition:left .5s ease-in-out;
padding:60px 20px 20px;
}

.prevPanel {
left:-800px;
}

.currentPanel {
z-index:1000;
display:block;
}

.nextPanel {
left:800px;
}

div.sliding {
left:0;
}

div.slidingOffLeft {
left:-840px;
}

div.slidingOffRight {
left:840px;
}

<div id="controls">
        <a href="prev">Prev</a> <a href="next">Next</a>
    </div>

    <div id="container">
        <div class="prevPanel slidePanel">
            <!-- content here -->
        </div>

        <div class="currentPanel slidePanel">
            <!-- content here -->
        </div>

        <div class="nextPanel slidePanel">
            <!-- content here -->
        </div>
    </div>

$('a[href="next"]').click(function(i) {
        i.preventDefault();
        $('.prevPanel').remove();
        $('.currentPanel').css({
            "margin-top": "-" + $(window).scrollTop() + "px"
        });
        $(window).scrollTop(0);
        $('.currentPanel').addClass('slidingOffLeft').delay(500).removeClass('slidingOffLeft currentPanel').addClass('prevPanel');
        $('.nextPanel').addClass('sliding').delay(500).removeClass('sliding nextPanel').addClass('currentPanel');
        setTimeout(function() {
            $('#container').height($('.currentPanel').height());
            $('.prevPanel').css({
                'margin-top': '0px'
            });
        }, 500)

        }) 
```

此方法在桌面浏览器上完美运行，但在 iPad 上添加负边距和 $(window).scrollTop(0) 不会立即发生，因此在文章被拉回之前，当窗口滚动到顶部时，您会看到轻微的光点到位。

任何关于如何让这两个事件在 iOS 上同时触发的建议或可以提高性能的替代方法将不胜感激。

**注意：**在我的示例中，“上一个”和“下一个”按钮在点击时会跳下页面。这是一个已知的 iOS 固定定位错误，在这个项目中对我来说不是问题，因为最终版本将是手势控制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:44:46.713

哇..所以我查看了您的代码并感到很困惑..看起来很复杂：D您有很多类在切换..我将如何以某种方式解决这个问题..（警告我累了所以我将使用某种伪代码:))

```
DIV 1 with overflow hidden and fixed bounds
 DIV 2 which will be as wide as sum of widths of all panels
  PANEL 1 fixed width height and so on..
  PANEL 2
  .....
  PANEL N
 2 VID :)
1 VID 
```

然后你可以将 CSS TRANSFORM 应用于`DIV 2`这样的

```
CSS:
DIV 2
  -webkit-transntion:  left 500ms;
  // in case you will be faced with flickering while the transition going on try using this - should help
  -webkit-perspective: 1000;
  -webkit-backface-visibility: hidden; 
```

然后你可以在你的JS中有这样的东西

```
 onTouchForwardButton
     offset = DIV_2.left - currPanel.next().width()
     DIV_2.css(left, offset); 
```

再次......当你不会滚动整个身体时，你可以避免使用 scrollTop 功能......或者你可以将它推迟到转换回调......你可以用`webkitTransitionEnd`事件来处理它。但是我认为在这种情况下只滚动每个面板元素更有意义。所以毕竟尝试这样做，即使使用 scrollTop 功能它可能会表现得更好..我认为在你的代码中可能会出现这些延迟和超时的问题..

所以再次为这个讨厌的伪代码感到抱歉，但我懒得写括号等等......也许明天我可以做得更好并重写我的答案......

祝你好运！

# iphone - iOS：如何处理图像？

> ID：11757107
> 
> 赞同：1
> 
> 时间：2012-08-01T10:14:33.010
> 
> 标签：iphone, objective-c, ios

我正在制作一个照片管理应用程序。我创建了一个名为 photo 的类，其中包含照片的名称、照片上的注释和图像。我知道如何设置名称和注释——它们都是 NSString，但我应该为我的图像使用什么数据类型？

目前，我正在使用 NSData，对吗？

* * *

**编辑**

显然，NSData 是对的。那么，我应该如何将 UIImage 中的图像放入 NSData 对象并再次返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:19:23.960

来自 UIImage 的数据：

```
NSData *imageData = UIImagePNGRepresentation(image); 
```

或者，来自数据的 UIImage：

```
UIImage *image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:20:16.830

您可以将图像存储为 UIImage 或 NSData

你可以简单地从另一个那里得到一个：

```
NSData *data = UIImagePNGRepresentation(image);
UIImage *image=[UIImage imageWithData:data]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:25:20.487

如果您需要图像来呈现，最好在您的`UIImage`对象中保存一个实例，`NSData`当您需要保存它或从网络或磁盘获取它时将其传输到/从。如果您的情况更像是文件管理器而不是照片查看器，则此答案不适用。无论如何，先前的答案已向您提供了传输程序。

# objective-c - 套接字检查 TCP/IP 连接是否存在并缩短超时

> ID：11757109
> 
> 赞同：0
> 
> 时间：2012-08-01T10:14:36.623
> 
> 标签：objective-c, sockets, adhoc

我正在尝试将我的 iOS 应用程序连接到 adhoc 网络上的打印机，在向打印机发送任何内容之前，我需要检查连接是否打开且有效，我该如何实现？目前我正在执行以下 CFReadStreamRef readStream; CFWriteStreamRef 写流；

```
readStream = NULL;
writeStream = NULL;

CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)IPADDRESS, NUM_PORT,NULL ,&writeStream );

if(writeStream)
{
    //inputStream = (__bridge NSInputStream *)readStream;
    oStream = (__bridge NSOutputStream *)writeStream;

    //[iStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    //[iStream setDelegate:delegate];
    [oStream setDelegate:delegate];
    //[iStream open];
    [oStream open];
} 
```

和

```
 int bytesWritten;
   int bytesTotal = [data length];

   bytesWritten = [oStream write:[data bytes] maxLength: bytesTotal];
   NSLog(@"Bytes Written To Printer : %d",bytesWritten); 
```

但它总是会进入并且 writeStream 永远不会为空，所以我无法阻止它尝试将数据推送到套接字。

〜编辑 - 也许我最好改写我的问题，我怎样才能阻止它挂起 30 多秒，直到它意识到没有连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:18:41.283

> 在向打印机发送任何内容之前，我需要检查连接是否打开且有效，我该如何实现？

通过向打印机发送一些东西。在 TCP 中检测连接问题的唯一方法是对其进行一些 I/O。

# c# - 如何通过 3G 连接检查互联网连接状态？

> ID：11757111
> 
> 赞同：2
> 
> 时间：2012-08-01T10:14:42.510
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我有以下方法：

```
public static bool IsNetworkConnected()
{
    ConnectionProfile InternetConnectionProfile = NetworkInformation.GetInternetConnectionProfile();
    IReadOnlyList<ConnectionProfile> connectionProfile = NetworkInformation.GetConnectionProfiles();
    if (InternetConnectionProfile == null)
        return false;
    else
        return true;
} 
```

当我以典型方式（通过 LAN 电缆或 Wi-Fi）连接到互联网时，它工作正常。当我使用我的 3G USB 调制解调器时，它返回 false（`InternectConnectionProfile`为 null）。这是为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:27:11.510

您可以考虑在 Internet 上 ping 一个服务器。这不是您问题的 100% 答案，但从不同的角度来看可能会有所帮助。

```
using System.Net;
using System.Net.NetworkInformation;

using (Ping Packet = new Ping()) 
{
    if (Packet.Send(IPAddress.Parse(IP), 1000, new byte[] { 0 }).Status ==   IPStatus.Success))
    {
       // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:06:21.677

尝试

```
public static bool IsConnectedToInternet()
{
        ConnectionProfile connectionProfile = NetworkInformation.GetInternetConnectionProfile();
        return (connectionProfile!=null && connectionProfile.GetNetworkConnectivityLevel() == NetworkConnectivityLevel.InternetAccess);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:21:28.817

这可能会对您有所帮助 [http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/a7ba014c-3a31-4ff3-ba10-0c835305828b/](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/a7ba014c-3a31-4ff3-ba10-0c835305828b/)

# javascript - javascript 简单的正则表达式

> ID：11757113
> 
> 赞同：0
> 
> 时间：2012-08-01T10:14:45.710
> 
> 标签：javascript, regex

嗨，对于下面的 javascript，我想要一个正则表达式，它将用 \Left 方括号替换所有左方括号实例，用 \ 加上右方括号替换右方括号或用 \ 点替换句号

```
<script type="text/javascript" type="text/javascript">

        $(document).ready(function () {
            var someId = '#Something[0].AnotherSelected[5].Validator';

            alert(s);
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:26:10.930

```
var str = 'something[.something]].something[';
console.log(str.replace(/[\[\]\.]/g, '\\\\')); 
```

输出

```
something\\\\something\\\\\\something\\'; 
```

[编辑-基于以下OP的评论：

```
console.log(str.replace(/[\[\]\.]/g, function($0) { return '\\\\'+$0; })) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:46:35.970

首先我们需要一个匹配 '[',']' 和 '.' 的正则表达式 全球范围内。
此正则表达式如下所示：

```
 /(\[|\]|\.)/g 
```

然后我们将每个出现的地方替换为 \\ 并与匹配的子字符串[$&连接](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#section_5)

```
var someId  = "#Something[0].AnotherSelected[5].Validator";
var newstr  = someId.replace(/(\[|\]|\.)/g, "\\\\$&")
alert(newstr)​ 
```

输出是

```
 #Something\\[0\\]\\.AnotherSelected\\[5\\]\\.Validator 
```

你可以在[jsfiddle上测试它](http://jsfiddle.net/EDDBT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:19:19.207

```
someId = someId.replace(/\[/g, "\\\\[").replace(/\./g, "\\\\."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:44:20.967

```
someId = someId.replace(/[][.]/g, '\\\\$&'); 
```

# php - 无法获得 $POST 的价值

> ID：11757114
> 
> 赞同：-5
> 
> 时间：2012-08-01T10:14:45.593
> 
> 标签：php, ajax, file

大家好，我有这个问题我无法比较这两个字符串

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }

         $flag = 0;
         $stringData = $_POST['data']; // echo = null
         $file = "/var/www/devData/test/ciao.txt"; 
         $fh = fopen($file, 'a+') or die("can't open file");

         while(!feof($fh)) {
                    $theData = fgets($fh, filesize($file));
                    array_push($arr,$theData);
                    $i++;
         }  
         for($j=0; $j<count($arr); $j++) 
         if($stringData == $arr[j]){ // is the problem 
            $flag = 1;
         }
         if($flag = 0){
            fwrite($fh, $stringData); // fwrite works perfectly even if i try to print $string the result is null 
         }
         fclose($fh); 

 ?> 
```

有人可以解释我如何解决这个问题？这个脚本的目标是避免用户写两次相同的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:24:33.137

```
 if($stringData == $arr[j]){ // is the problem 
                           ^^^
                      is missing a $ 
```

激活错误报告，这应该会自动向您指出：

```
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

# android - 为什么 dragShadowBuilder 不显示 imageview？

> ID：11757115
> 
> 赞同：1
> 
> 时间：2012-08-01T10:14:53.700
> 
> 标签：android, drag-and-drop, imageview

我正在尝试使用 dragShadowBuilder(View view) 构造函数发送给它的 ImageView 与我开始拖动的那个不相关。ImageView img=new ImageView(this); img.setbackgroundresource(R.drawable.icon); 为什么 dragShadowBuilder 在拖动过程中不显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:03:51.577

我认为问题在于 ImageView 在添加到布局之前不会被绘制。我通过使用扩展 ShadowBuilder 绘制位图解决了这个问题：

```
public class LJDragShadowBuilder extends View.DragShadowBuilder {

   private Bitmap image; // image to draw as a drag shadow

   public LJDragShadowBuilder(Bitmap _image) {
      super();
      image = _image;
   }

   public void onDrawShadow(Canvas canvas)
   {
      canvas.drawBitmap(image, 0, 0, null);
   }

   public void onProvideShadowMetrics(Point shadowSize, Point shadowTouchPoint)
   {
      shadowSize.x = image.getWidth();
      shadowSize.y = image.getHeight();
      shadowTouchPoint.x = shadowSize.x / 2;
      shadowTouchPoint.y = shadowSize.y / 2;
   }
} 
```

# android - 如何在列表视图中显示 sd 卡中的 mp3 文件？

> ID：11757117
> 
> 赞同：0
> 
> 时间：2012-08-01T10:15:03.730
> 
> 标签：android, listview, audio, show, sd-card

我创建了一个记录音频并将其存储在 SD 卡中的应用程序。我
成功地完成了这部分。这是将音频文件插入 SD 卡的代码。

```
protected void addRecordingToMediaLibrary() {
    ContentValues values = new ContentValues(4);
    long current = System.currentTimeMillis();
    values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName());
    values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
    values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
    values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
    ContentResolver contentResolver = getContentResolver();

    Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    Uri newUri = contentResolver.insert(base, values);

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
    Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
} 
```

但现在我想在 listView 中显示这个音频文件，但我不知道该怎么做。
请给我任何参考或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T11:07:46.123

首先提取所有的mp3文件。

使用我开发的这个方法....获取sd卡的mp3文件

为了获得详细信息，我还问了一个问题**[Observing changes in android content observer for Audio.Media.EXTERNAL_CONTENT_URI](https://stackoverflow.com/questions/15899110/detecting-changes-in-android-content-observer-for-audio-media-external-content-u)**

此代码适用于**mnt/sdcrad**和**extSdCard**

在这段代码中我检索到

1.  文件名

2.  文件路径

3.  时间

4.  期间

对于每个 mp3 文件。您可以检索很多字段，请参阅此[http://developer.android.com/reference/android/provider/MediaStore.Audio.AudioColumns.html](http://developer.android.com/reference/android/provider/MediaStore.Audio.AudioColumns.html)

```
 private void getAllAudio() {
     Cursor mCursor = null;

     try {
         mCursor = context.getContentResolver().query(
             Audio.Media.EXTERNAL_CONTENT_URI, null, null, null, "_id");

         System.out.println("Cursor count is " + mCursor.getCount());

         if (mCursor.getCount() != 0) {

             do {

                 long date = mCursor.getLong(mCursor
                     .getColumnIndexOrThrow(Audio.Media.DATE_ADDED));

                 String Duration = mCursor.getString(mCursor
                     .getColumnIndexOrThrow(Audio.Media.DURATION));
                 String DISPLAY_NAME = mCursor.getString(mCursor
                     .getColumnIndexOrThrow(Audio.Media.DISPLAY_NAME));
                 String DATA = mCursor.getString(mCursor
                     .getColumnIndexOrThrow(Audio.Media.DATA));
                 double TIME_STAMP = mCursor.getInt(mCursor
                     .getColumnIndexOrThrow(Audio.Media.DATE_ADDED));

                 System.out.println("Name:" + DISPLAY_NAME);
                 System.out.println("data " + DATA);
                 System.out.println("time " + TIME_STAMP);
                 System.out.println("time " + Duration);

                 //Here you can create data base for recoring entries or may can create ArrayList of Class bean object having this fields for showing in ListView.

             } while (mCursor.moveToNext());

         }
     } catch (Exception e) {
         e.printStackTrace();
     } finally {
         if (mCursor != null) {
             mCursor.close();
             mCursor = null;
         }
     }

 }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:33:24.993

Try using `MediaStore` from **android.provider.MediaStore** package, you can get the music files on the sdcard using this...

And this **below tutorial from stackoverflow.com** will be a great help...

[Android MP3 file Filtering form sdcard](https://stackoverflow.com/questions/10351482/android-mp3-file-filtering-form-sdcard)

Edit : Removed blog url... Blog no more exits...

# ruby-on-rails - Capybara webkit无效响应错误，如何调试？

> ID：11757118
> 
> 赞同：10
> 
> 时间：2012-08-01T10:15:03.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, capybara-webkit

我正在尝试为网页编写请求规范。

此页面在开发中正常工作，没有错误。

但是在 capybara webkit 中运行我在尝试提交表单后收到此错误：

```
 Failure/Error: Unable to find matching line from backtrace
 Capybara::Driver::Webkit::WebkitInvalidResponseError:
   Unable to load URL: https://127.0.0.1:33416/sign_in 
```

为了找出原因，我开始剥离页面上的标记和 JavaScript。以至于它是一个带有普通提交按钮的空表单。我仍然收到上述错误！

测试现在字面意思是：

```
it "should be able create a new foo", :js, :focus do
  visit new_foo_path
  find('#submit').click
end 
```

但是，如果我删除 :js 选项，此测试确实有效：

```
it "should be able create a new foo", :focus do
  visit new_foo_path
  find('#submit').click
end 
```

Javascript 测试在此应用程序的其他页面中确实有效...

这对我来说毫无意义。有人对如何从这里进行调试有任何建议吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T10:34:47.070

将以下内容添加到您的水豚配置中。

```
require 'rack/utils'
Capybara.app = Rack::ShowExceptions.new(NameOfYourRailsApp::Application) 
```

当您现在收到错误时，您会在标准输出上看到它，并且 rack 将呈现一个页面，其中包含有关环境（cookie 等）和回溯的详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T08:53:45.777

您看到的错误很可能是 capybara-webkit 告诉您页面中存在某种异常的神秘方式。不久前我遇到[了同样的问题](https://github.com/thoughtbot/capybara-webkit/issues/87#issuecomment-3594982)，“无法加载 URL”的事情完全让我失望，很难找到实际的问题。

作为一些尝试的事情，我建议：

*   确保您安装了最新版本的 capybara-webkit。
*   检查实际形式以外的测试元素，例如控制器逻辑和涉及的任何模型。剥离一切，直到一无所有。
*   查看有关此问题的[讨论](https://github.com/thoughtbot/capybara-webkit/issues/87)并从那里跟踪线索。我很确定这是同一个问题或相关问题。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-27T22:49:27.380

我正在使用子域，我可以将以下内容添加到`spec_helper.rb`：

```
Capybara.configure do |config|
  config.javascript_driver = :webkit
  config.server_port = 3000
  config.app_host = "http://subdomain.local.host:3000"
end 
```

显然之前添加`127.0.0.1 subdomain.local.host`到我的`/etc/hosts`文件中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-17T06:08:37.117

我有一个类似的问题，并且能够通过启用启用的测试来解决`page.driver.browser.ignore_ssl_errors`它`:js`。这是对我有用的代码：

```
config.before(:each) do
    if Capybara.current_driver == :webkit
      # Need to manually specify ignoring of SSL errors
      page.driver.browser.ignore_ssl_errors
    end
end 
```

# javascript - HTML 的问题

> ID：11757121
> 
> 赞同：-2
> 
> 时间：2012-08-01T10:15:23.067
> 
> 标签：javascript, html, tags

嗨，我已经为此挣扎了太多小时了。我看不出它有什么问题。

这是源代码的链接：[jsfiddle.net/jPPjr/7](http://jsfiddle.net/jPPjr/7)

我不想要这个小盒子，所以我从代码中删除了它。

当我输入一个字段时，另一个应该更改其值，反之亦然。但是当我输入绿色时，什么也没有发生。它在 jsfiddle 中对我有用，但当我把它放在 php 文件中并使用我自己的标签时就不行了。

```
<html>
<head>
  <script type="text/javascript">

var inputA = document.getElementById("color");
var inputB = document.getElementById("code");

inputA.onkeyup = function() {
   var v = this.value.toLowerCase();
    if (colormapping.color2code[v]){
       inputB.value = colormapping.color2code[v];
    } else {
        inputB.value = '';
    }
   }
inputB.onkeyup = function() {
   var v = this.value.toUpperCase();
    if (colormapping.code2color[v]){
        inputA.value = colormapping.code2color[v];
    } else {
        inputA.value = '';
    }
}
colormapping = {
    color2code:{
       green : '#008000',
       red   : '#FF0000'
    },
    code2color:{
       '#008000':'green',
       '#FF0000':'red'
    }
}
</script>
</head>

<body>
Name:<br />
<input id="color"><br />
Code:<br />
<input id="code">

</body>
</html> 
```

代码应该可以工作（根据我），但它没有......这就是我已经走了多远。问题可能是我的标签。为什么它不起作用？：/

为愚蠢的帖子道歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:37:47.160

您的脚本将在页面完全加载之前执行，因此 yu 应该使其仅在页面完全加载后执行。像这样：

```
<html>
<head>
  <script type="text/javascript">
  onload = function() { //wrap your code with this

    var inputA = document.getElementById("color");
    var inputB = document.getElementById("code");

    inputA.onkeyup = function() {
       var v = this.value.toLowerCase();
        if (colormapping.color2code[v]){
           inputB.value = colormapping.color2code[v];
        } else {
            inputB.value = '';
        }
       }
    inputB.onkeyup = function() {
       var v = this.value.toUpperCase();
        if (colormapping.code2color[v]){
            inputA.value = colormapping.code2color[v];
        } else {
            inputA.value = '';
        }
    }
    colormapping = {
        color2code:{
           green : '#008000',
           red   : '#FF0000'
        },
        code2color:{
           '#008000':'green',
           '#FF0000':'red'
        }
    }

  }
  </script>
</head>

<body>
Name:<br />
<input id="color"><br />
Code:<br />
<input id="code">

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:29:04.463

移动你的

```
<script>
...
</script> 
```

从输入字段*下方*的 HTML 头部。`document.getElementById(...)`不能“向前”工作，所以你的`inputA`and`inputB`是`null`.

# list - 如何比较列表中的两个值？

> ID：11757122
> 
> 赞同：1
> 
> 时间：2012-08-01T10:15:25.010
> 
> 标签：list, grails, groovy

我想知道如何比较 List 的两个值。例如，我有一个`List`可能包含许多名称的名称，`values`例如`(Ana, Ben, Maria, Ana)`. 从这个 List 中，由于名字 Ana 被列出了两次，所以应该只在数据库中插入一次，否则会返回错误。我知道唯一约束可以解决这个问题，但不是我正在从事的当前 grails 项目的要求。那么在不使用唯一约束的情况下，如何在将列表的值插入数据库之前比较它们？

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:18:54.383

假设您并不意味着要避免`unique`Groovy 中的方法，您可以这样做：

```
List names = [ 'Ana', 'Ben', 'Maria', 'Ana' ]

assert names.unique(false) != names 
```

`names`这会从(is )创建一个新列表，`[ 'Ana', 'Ben', 'Maria' ]`并断言它与原始列表不同。

当我们[传递`false`给`unique`方法](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#unique%28boolean%29)时，它会创建一个新列表。如果通过`true`，它将修改原始列表...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:58:23.097

您可以使用不允许重复元素的 Set 而不是 List。如果将 names 变量声明为 Set，则无法添加重复元素。每次查看变量时，您都可以确定它自然地充满了独特的元素。

此外，如果您想将列表转换为集合，您可以执行以下操作：

```
def uniqueNames = names as Set 
```

# windows - 在哪里安装我的自签名证书

> ID：11757132
> 
> 赞同：2
> 
> 时间：2012-08-01T10:15:51.303
> 
> 标签：windows, security, certificate, x509certificate

我需要在我的客户端机器上安装我的自签名证书并按照[此链接](http://msdn.microsoft.com/en-us/library/ms172241.aspx)中的步骤操作。

但是在本文档中的命令中显示`certmgr.exe -add good.cer -c -s -r localMachine TrustedPublisher` 了与 WDK 中的文档“WinDDK/7600.16385.1/src/general/build/driversigning/selfsign_readme.htm#_Toc138233166”相同的命令命名为`"trustedpublisher"`.

```
certmgr.exe -add certfilename.cer -s -r localMachine trustedpublisher 
```

这其中哪一个是正确的？证书将安装在哪里？另外，我只能`"Trusted Publisher"`在我的电脑中找到命名的文件夹。

那么除了“Root”之外，我应该在哪里安装证书？

请指导我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:30:17.223

由于`TrustedPUblisher`在这种情况下是证书存储，而不是命令行参数，并且 Microsoft Windows 对这种事情不区分大小写，因此任何一种情况都应该有效。

对于自签名证书，您很可能应该将证书添加到`Root`和`TrustedPublisher`.

# oauth-2.0 - Oauth 不工作 CX api

> ID：11757134
> 
> 赞同：1
> 
> 时间：2012-08-01T10:15:53.653
> 
> 标签：oauth-2.0

我正在尝试将 oauth 用于 CX 公开的 api，我遵循了他们的文档，但仍然收到 HTTP“BAD REQUEST”错误，这是代码 -

```
 String method = "POST";
    String code = "";
    NameValuePair[] data = {
                             new NameValuePair("grant_type", "authorization_code"),
                             new NameValuePair("code", code),
                             new NameValuePair("redirect_uri",URLEncoder.encode(CALLBACK_URL, "UTF-8"))              
                            }; 
    String secret = CONSUMER_KEY+":"+CONSUMER_SECRET;
    String encodedSecret = Base64.encodeBase64String(secret.getBytes("UTF-8"));
    org.apache.commons.httpclient.HttpClient httpClient = new org.apache.commons.httpclient.HttpClient();
    PostMethod httpMethod = new PostMethod(ACCESS_TOKEN_ENDPOINT_URL);
    httpMethod.addRequestHeader("Authorization","Basic "+encodedSecret);
    httpMethod.setRequestBody(data);
    System.out.println("HTTP call -- " + method + " " + ACCESS_TOKEN_ENDPOINT_URL);
    httpClient.executeMethod(httpMethod); 
```

谢谢，赫曼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:13:52.693

我已经测试了您的代码的以下轻微修改并且它有效。你可以仔细检查一下

1.  您的密钥已被批准（鉴于您看到的错误，这不应该是问题）。
2.  您使用的是正确的 ACCESS_TOKEN_ENDPOINT_URL
3.  尝试让 auth_code 响应和令牌请求的 redirect_uri 相同

    ```
     String method = "POST";
        String authCode = "[AUTH-CODE-HERE]";
        String CONSUMER_KEY="[YOUR-KEY-HERE]";
        String CONSUMER_SECRET="[YOUR-SECRET-HERE]";
        String ACCESS_TOKEN_ENDPOINT_URL="https://api.cx.com/1/oauth/token";
        String REDIRECT_URI="[YOUR-REDIRECT-HERE]";

        NameValuePair[] data = {
                new NameValuePair("grant_type", "authorization_code"),
                new NameValuePair("code", authCode),
                new NameValuePair("redirect_uri", REDIRECT_URI)
        };
        String secret = CONSUMER_KEY+":"+CONSUMER_SECRET;
        String encodedSecret = Base64.encodeBase64String(secret.getBytes("UTF-8"));

        PostMethod httpMethod = new PostMethod(ACCESS_TOKEN_ENDPOINT_URL);
        httpMethod.addRequestHeader("Authorization","Basic "+encodedSecret);
        httpMethod.setRequestBody(data);
        System.out.println("HTTP call -- " + method + " " + ACCESS_TOKEN_ENDPOINT_URL);
        int responseCode = httpClient.executeMethod(httpMethod);
        System.out.println(responseCode);
        System.out.println(httpMethod.getResponseBodyAsString()); 
    ```

如果您仍然遇到问题，您能否发布以下行的结果： System.out.println(httpMethod.getResponseBodyAsString());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T21:48:00.820

CX 开发人员 API 已停止使用。带来不便敬请谅解。

# android - insertWithOnConflict() 与插入或替换

> ID：11757141
> 
> 赞同：3
> 
> 时间：2012-08-01T10:16:18.463
> 
> 标签：android, sqlite

我正在重构我的代码并将所有`insert`语句替换为`insert or replace`while 我发现使用以下方法`db.insert()`而不是准备好的语句：

```
public static void insertIntoTableByNameAndFieldsAndValues(
        String tableName, String[] fields, String[] values, Context c)
        throws FieldsAndValuesMismatchException, UnrecognizedTypeException   {

    DatabaseAbstractionLayer dal = new DatabaseAbstractionLayer(c);
    SQLiteDatabase db = dal.getWritableDatabase();

    ContentValues con = new ContentValues();

    if (fields.length != values.length)
        throw new FieldsAndValuesMismatchException(
                "fieldsString and values are not the same size");

    int fieldCount = fields.length;

    for (int i = 0; i < fieldCount; i++) {
        String[] fieldArr = fields[i].split(":");
        String value = values[i];
        if (fieldArr[1].equalsIgnoreCase("long")) {
            // long
            if(value.equalsIgnoreCase("null")){
                con.putNull(fieldArr[0]);
            }else{
                con.put(fieldArr[0],(long) Integer.parseInt(value));
            }
        } else if (fieldArr[1].equalsIgnoreCase("string") || fieldArr[1].equalsIgnoreCase("text")) {
            // string

            if(value.equalsIgnoreCase("null")){
                con.putNull(fieldArr[0]);
            }else{
                con.put(fieldArr[0], value);
            }

        }else if(fieldArr[1].equalsIgnoreCase("double")){
            //double

            if(value.equalsIgnoreCase("null")){
                con.putNull(fieldArr[0]);
            }else{
                con.put(fieldArr[0], Double.valueOf(value));
            }

        } else {
            throw new UnrecognizedTypeException(fieldArr[1]
                    + " is not string,text, long or double");
        }
    }

    db.insert(tableName, null, con);

 db.close();
} 
```

我不想重写代码并使用原始查询。发生冲突时有没有办法替换一行？我想`insertWithOnConflict()`会这样做，但我找不到一个很好的例子。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T11:35:12.273

是的，（如果您不遵循 Android 使用的行标识符的标准名称，请更改`BaseColumns._ID`为合适的名称），这应该可以满足您的要求：

```
db.insertWithOnConflict(tableName, BaseColumns._ID, v, 
        SQLiteDatabase.CONFLICT_REPLACE); 
```

但是 - 这种方法肯定会做很多毫无意义的事情。简而言之，可以归结为：

```
public static void insertIntoTableByNameAndFieldsAndValues(
    String tableName, String[] fields, String[] values, Context c)
    throws FieldsAndValuesMismatchException {

    if (fields.length != values.length) {
        throw new FieldsAndValuesMismatchException(
            "fields[] and values[] are not the same length");
    }
    ContentValues v = new ContentValues();
    // You really don't need to distinguish between integers, doubles
    // etc. etc. - SQLite is type agnostic, just dumping Strings from Java
    // will work just fine - the *only* point in converting stuff is to check
    // the format prior to inserts.
    // Using "null" as the null identifier is also pointless. Pass actual null
    // values instead - calling #putNull("somecolumn") is the same 
    // as #put("somecolumn", null)
    for (int i = 0; i < fields.length; i++) {
        v.put(fields[i], values[i]);
    }
    db.insertWithOnConflict(tableName, BaseColumns._ID, v, 
            SQLiteDatabase.CONFLICT_REPLACE);
} 
```

# c# - 我想让 RadioButton ListItems ReadOnly 不改变 asp.net 中控件的外观

> ID：11757142
> 
> 赞同：1
> 
> 时间：2012-08-01T10:16:28.457
> 
> 标签：c#, asp.net

在这里，如果我给 Enable="False" 属性，那么外观会从黑色变为灰色...我不想更改外观...该怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:19:16.167

尝试使用此属性，（以 d 结尾）

```
Enabled="False" 
```

# php - 使用 AS3 从无法通过 Web 访问的服务器下载文件

> ID：11757144
> 
> 赞同：0
> 
> 时间：2012-08-01T10:16:31.513
> 
> 标签：php, actionscript-3, file

我设法创建了一个使用 file.download(urlRequest); 的 AS3 脚本。- 当引用可通过网络访问的位置时，这可以正常工作。是否可以让闪存引用它所在的服务器上的位置？我想让它有权下载的文件尽可能安全。

我意识到我可以在 AS3 中引用一个 PHP 文件来启动下载，但这在 Silverlight 应用程序中使用浏览器窗口时不起作用，因此如果可能的话需要闪存来进行下载。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:30:01.797

也许在服务器上使用 htaccess 规则？如果请求来自不同的主机/服务器，则以 403 错误响应。如果请求来自同一主机/服务器，那么下载文件？

例如：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^www.your-site.com [NC]
RewriteRule .* - [F] 
```

这不是阻止访问的最安全方法，因为引荐来源标头可能会在浏览器中被欺骗或禁用。

另一个想法：

文件的 url 通过 php 脚本推送。如果请求的 ip 地址不在数据库中，则不允许下载文件。使用您的闪存向具有 ip 地址的服务器发布请求（服务器将 ip 添加到数据库中的白名单中），然后执行您的`file.download(urlRequest)`?

同样不是最安全的，因为有人可以发布他们的 ip，欺骗他们的引荐来源标头，然后获取文件......

不过，总比没有好。

# winforms - 应用程序未激活时触发

> ID：11757146
> 
> 赞同：0
> 
> 时间：2012-08-01T10:16:43.463
> 
> 标签：winforms

我有一个应用程序（Winform，基于 TAB 的 MDI 应用程序），现在我们正在添加一些功能。这些功能是在 WPF 中开发的。一个新表单包含元素宿主，它将承载此 WPF 用户控件。这个新添加的表单显示在每个 Tab 的一角。当应用程序最小化/最大化事件被触发时，通过这些我可以显示或隐藏这个新表单。此外，这个新表单的 Topmost 属性设置为 true。

但是当主窗体仍然显示并且打开另一个应用程序（如记事本）时，新添加的窗体会显示在此记事本上。新表单应该放在记事本后面，但它始终位于顶部。

关于如何寄回的任何建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:32:54.673

[当应用程序变为活动状态](https://stackoverflow.com/questions/2615744/detect-when-application-becomes-active)后从检测中选择的答案 解决了我的问题。

我也在抓

```
main.Deactivate += new EventHandler(main_Deactivate); 
```

谢谢你。

# mysql - 从表中选择最后 x 行并使用选择的最后一个索引号 (+1) 来开始下一个相同的查询

> ID：11757149
> 
> 赞同：2
> 
> 时间：2012-08-01T10:16:46.520
> 
> 标签：mysql

我需要每 5 分钟将添加到 mysql 表中的最后数据捕获到文件中（cron）

我需要使用最后一个索引号作为下一个查询的开头 (+1) .. 等等。

基本上我需要将唯一记录块捕获到没有记录重叠的单个文本文件中。

IE

Index_No Forename 姓氏

第1012章

1013 安·史密斯

1014 迈克·霍普

首次运行查询将获得一定数量的事件，最多 1014 个。

下一个查询将在 5 分钟后自动运行（cron ？）并从 1015 开始。

等等……每5分钟一次。

我在 www 上到处寻找答案，但还没有找到答案。我正在专门寻找从上一个查询 (+1) 到每 5 分钟最后一次当前条目循环的最后一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:21:37.390

我想如果我正在实现这个要求，我会编写一个小程序来运行查询并将输出吐到一个文件中。该程序还将使用某种持久性数据存储（文本文件/db/whatever）来跟踪最后一条记录。

然后，您可以只使用 cron 来调用您的程序。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:42:07.393

有一个带有 index_No 的日志表，并在您查询时使用最后一个 No 更新它。像这样的东西

```
Create table index_log(Index_no int)

Insert into index_log(Index_no)
select 1014

select columns from source_table
where index_no>(select index_no from index_log)

Update index_log
set index_no=(select max(index_no) from source_table 
```

# c++ - C++ 中指向构造函数的指针的语法

> ID：11757150
> 
> 赞同：3
> 
> 时间：2012-08-01T10:16:48.550
> 
> 标签：c++

我正在制作一个跨平台库，在多个平台上实现几个基本原语。为了验证基元（即类）的每个实现是否提供所有平台所需的核心成员，我使用以下构造：

```
template<typename _Ty> int _MethodVerifyHelper(_Ty);
#define ENSURE_MEMBER_DECL(className, methodName, returnType, ...) typedef char __PROTOTYPE_VERIFIER__[sizeof(_MethodVerifyHelper<returnType (className::*)(__VA_ARGS__)>(&className::methodName))] 
```

然后我写这样的东西：

```
ENSURE_MEMBER_DECL(Event, TryWait, bool, unsigned); 
```

所以如果 Event 类没有`bool TryWait(unsigned)`方法，我们会在这里得到一个编译错误。

问题是：**在 C++ 中是否有类似的语法来声明指向构造函数的指针？**如果类不提供具有给定参数类型的构造函数，我想要一个导致编译时错误的语句。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T10:22:21.373

您无法获取构造函数的地址，但如果无法使用给定的一组参数构造对象，则很容易出现编译时错误：

```
typedef int dummyToTriggerError[ sizeof( T( arg1, arg2, arg3 ) ) ]; 
```

当然，最重要的部分是`sizeof`表达式，它包含一个永远不会被计算但必须是合法的对象的构造。它被包裹在 a`typedef`中，以确保它永远不会生成任何代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:21:54.570

不，您不能将指针指向构造函数。

确保提供特定构造函数的方法是在非执行上下文中模拟对构造函数的调用（例如`sizeof`）：

```
static_assert(sizeof(className(std::declval<arg1_type>(), std::declval<arg2_type>())) > 0, ""); 
```

# php - Symfony2：URL 中的用户名

> ID：11757152
> 
> 赞同：3
> 
> 时间：2012-08-01T10:16:56.863
> 
> 标签：php, model-view-controller, symfony, routing

这个问题很常见，在这里出现了很多次，但对于 Symfony2 框架却不是。我想创建一个路由，直接在域之后使用用户名来访问用户配置文件，如下所示：`domain.com/username`. 路线应该是：

```
Profile:
    pattern: /{pseudo}
    defaults: { _controller: **Bundle:Default:member } 
```

但是很明显，这种溃败会像其他溃败一样`/main`，太糟糕了。文档说我们可以对模式进行一些限制，例如将伪设置为精确的 En 或 Fr：

```
Profile:
    pattern: /{pseudo}
    requirements:
        pseudo:  en|fr 
```

我可以用它来使伪不等于其他类似`main , messages , post , blog`的路由，但我也有很多路由，路由器看起来很难看。如果这是一种有效的方式，请展示如何使要求*不等于* `main, messages,...` 或有另一种方式，我会很感激知道它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:22:13.547

您可能不应将其限制在路由级别，而应限制在用户注册过程中。如果您将`/{pseudo}`路由**放在**所有其他路由（如您的`/main`或`/messages`路由）之后，则该模式仅匹配与您的任何其他路由不匹配的所有请求。

例如

```
main:
    pattern: /main
    defaults:  { _controller: YourBundle:Main:show }

% put all the other routes here

% your very last route
pseudo:
    pattern: /{pseudo}
    defaults:  { _controller: YourBundle:User:show } 
```

您还可以向最后一条路线添加要求，使其仅包含例如 8 个字符和仅包含字母数字值或您喜欢的任何正则表达式。

```
requirements:
    pattern: ^\[a-z0-9]{,8}$ 
```

但是，如果您真的想通过需求限制访问，您可以只添加一个不允许某些名称的需求正则表达式。尽管如此，我强烈建议不要：

```
requirements:
    pattern: ^(?!main|messages|...)$ 
```

这在[文档](http://symfony.com/doc/current/book/routing.html)中也有详细说明。

# simulation - OMNET++/MIXIM：如何纠正以下编译器的错误

> ID：11757153
> 
> 赞同：1
> 
> 时间：2012-08-01T10:17:13.247
> 
> 标签：simulation, omnet++, mixim

说明 资源路径 位置 类型

**make: ***配置文件 '' 不存在 -- 将 OMNeT++ bin 目录添加到路径以便可以找到 opp_configfilepath，或者将 OMNETPP_CONFIGFILE 变量设置为指向 Makefile.inc。停止。Makefile /IWF 第 55 行 C/C++ 问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T17:00:50.593

我对 OMNET++ 4.3.1 也有同样的问题，事实证明我将 omnet 源文件提取到 C:\Omnet 而不是 make 脚本的默认预期位置 c:/omnetpp-4.3.1。因此，当您尝试构建 mixim 时，构建会通过给出两个错误而停止，其中一个是

```
make: *** Config file 'c:/omnetpp-4.3.1/Makefile.inc' does not exist -- 
```

要解决此问题，请导航到 mixim（或任何文件夹）>out>gcc-debug>.last-copts 或者您可以在工作区中搜索类似 omnetpp- **4.3.1**的内容，记住版本，以找到文件。然后只需更改 -Ic:/omnetpp-4。*.* /include 到您提取 omnet++ 的确切目录路径。

# c# - 实体框架保存大图

> ID：11757154
> 
> 赞同：0
> 
> 时间：2012-08-01T10:17:22.857
> 
> 标签：c#, entity-framework-4

我正在创建一个字段：

```
public Byte[] Image { get; set; } 
```

这将创建一个名为 Image 的字段，其数据类型`varbinary`和长度为`4000`。

当我保存一条记录时，它将无法保存，因为图像很难保存在 varbinary(4000) 中。

如何使其成为图像数据类型或更大的二进制长度？

我正在使用 sqlserver ce 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:30:23.420

您必须更改属性的映射以使用`image`数据库中的类型。您可以使用数据注释来做到这一点：

```
[Column(TypeName = "image")]
public Byte[] Image { get; set; } 
```

或使用流畅的 API：

```
modelBuilder.Entity<...>().Property(e => e.Image).HasColumnType("image"); 
```

# javascript - 浏览器中的可标记图像

> ID：11757155
> 
> 赞同：0
> 
> 时间：2012-08-01T10:17:30.250
> 
> 标签：javascript, jquery

我正在为客户构建目标电子邮件系统。他们希望能够发送海报风格的电子邮件，然后在收件人浏览器中制作可点击的图像区域。我确信这可以使用 PHP mailer 之类的技术来完成；但是有人知道标记图像并允许用户通过浏览器界面使它们可点击的方式/库吗？

干杯肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:22:19.543

您可以使用[图像映射](http://www.w3schools.com/tags/tag_map.asp)使图像上的某些区域可点击。

# c# - 制作一个特定于类的泛型方法

> ID：11757157
> 
> 赞同：1
> 
> 时间：2012-08-01T10:17:44.450
> 
> 标签：c#, .net, generics

我已经创建了这个更新方法

```
 public void Update(Person updated)
   {
       var oldProperties = GetType().GetProperties();
       var newProperties = updated.GetType().GetProperties();
       for (var i = 0; i < oldProperties.Length; i++)
       {
           var oldval = oldProperties[i].GetValue(this, null);
           var newval = newProperties[i].GetValue(updated, null);
           if (oldval != newval)
               oldProperties[i].SetValue(this, newval, null);
       }
   } 
```

它所做的是比较两个 Person 对象以及是否有任何新值。它更新原始对象。这很好用，但作为一个懒惰的程序员，我希望它更可重用。

我希望它像这样工作。

```
Person p1 = new Person(){Name = "John"};
Person p2 = new Person(){Name = "Johnny"};

p1.Update(p2);
p1.Name  => "Johnny"

Car c1 = new Car(){Brand = "Peugeot"};
Car c2 = new Car(){Brand = "BMW"};

c1.Update(c2);
c1.Brand => "BMW"

c1.Update(p1); //This should not be possible and result in an error. 
```

我正在考虑使用抽象类来保存方法，然后使用一些泛型，但我不知道如何使其特定于类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:21:01.527

```
 public static void Update(object original, object updated)
   {
       var oldProperties = original.GetType().GetProperties();
       var newProperties = updated.GetType().GetProperties();
       for (var i = 0; i < oldProperties.Length; i++)
       {
           var oldval = oldProperties[i].GetValue(original, null);
           var newval = newProperties[i].GetValue(updated, null);
           if (!Equals(oldval,newval))
               oldProperties[i].SetValue(original, newval, null);
       }
   } 
```

或者如果你想确保相同的类型：

```
 public static void Update<T>(T original, T updated)
   {
       var properties = typeof(T).GetProperties();
       for (var i = 0; i < properties.Length; i++)
       {
           var oldval = properties[i].GetValue(original, null);
           var newval = properties[i].GetValue(updated, null);
           if (!Equals(oldval,newval))
               properties[i].SetValue(original, newval, null);
       }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:27:17.627

您的代码有一个小缺陷，事实上，如果您不强制这两个对象实际上是*完全相同的*类型，它们可能不具有相同的属性并且您将面临错误。

像这样的泛型方法应该可以在几乎任何东西上正确运行，只要它是 a `class`（这就是约束`where T: class`的用途：如果它不是您要传递的类，则代码将无法编译）。

```
static void Update<T>(T original, T updated) where T : class
{
    var Properties = typeof(T).GetProperties();
    foreach (PropertyInfo property in Properties)
    {
        var oldval = property.GetValue(original, null);
        var newval = property.GetValue(updated, null);
        if (oldval != newval) property.SetValue(original, newval, null);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:20:30.267

试试这个模式：

```
interface IUpdateable
{
void Update(IUpdateable updated)
}

public void Update<T>(T updated) where T:IUpdateable
{
...
...
} 
```

# mysql - 上传 MySQL-dump 时如何维护标准值的字符集

> ID：11757158
> 
> 赞同：0
> 
> 时间：2012-08-01T10:17:49.010
> 
> 标签：mysql, character-encoding, mysqldump

我有一个 MySQL4 数据库`db4`（字符集：latin1），我想`db5`使用以下命令将其复制到 MySQL5 数据库（标准字符集：utf-8）：

```
mysqldump -u dbo4 --password="..." --default-character-set="latin1" db4 | mysql -S /tmp/mysql5.sock -u dbo5 --password="..." --default-character-set="latin1" db5 
```

条目的值以正确的方式复制。但是某些字段的标准值中包含的德语变音符号（äüö...）后来被称为“？”

我的复制命令有什么问题？

我只是想保持一切原样（数据库中的所有数据都存储为“latin1”）

# javascript - 如何从 CSS 中获取颜色值

> ID：11757164
> 
> 赞同：-1
> 
> 时间：2012-08-01T10:18:35.680
> 
> 标签：javascript, jquery, css

我在 CSS 文件中定义颜色

```
 .level1 {
color: ["#7FFF00", "#00CA9A", "#2CB371", "#124B21","#006400"];
}
  .level2 {
color: ["#7FFF01", "#00FA8A", "#1CB371", "#328B22","#006400"];
 } 
```

现在我想从 javascript JS 文件中读取这些颜色

```
 var color = $(".level1").css("color");
   var color2 = $(".level2").css("color"); 
```

我的颜色为空 你能解释一下我做错了什么吗？

颜色的定义是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:21:33.697

CSS 会丢弃它无法识别的规则和值，因此您不能在样式表中存储任意数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:22:49.323

问题是您的颜色声明在语法上是错误的。您正在尝试声明一些看起来像颜色数组的东西，这在 CSS 中不受支持。浏览器将忽略它无法理解的规则，因此不会应用颜色。

由于它没有被应用，jQuery 无法找到该元素的颜色属性的值，因此返回 null。

如果您修复颜色声明，则仅提供一种颜色：

```
.level1 {
    color: #7FFF00;
} 
```

您的 jQuery 代码可以正常工作。

# ruby - 从 MacPorts 切换到 Homebrew 后 libcurl 缺少库

> ID：11757166
> 
> 赞同：0
> 
> 时间：2012-08-01T10:18:42.287
> 
> 标签：ruby, macos, libcurl, typhoeus

不久前我删除了 Macports，所以现在我使用 Homebrew。现在我正在尝试使用依赖于 multicurl 的 typhoeus ruby​​ gem。

当我尝试执行我的 ruby​​script 时，我收到以下错误消息：

```
/Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi/library.rb:121:in `block in ffi_lib': Could not open library 'libcurl': dlopen(libcurl, 10): image not found. (LoadError) Could not open library 'libcurl.dylib': dlopen(libcurl.dylib, 10): Library not loaded: /opt/local/lib/libidn.11.dylib   Referenced from: /usr/local/lib/libcurl.dylib   Reason: image not found   from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi/library.rb:88:in `map'     from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi/library.rb:88:in `ffi_lib'     from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:405:in `<module:Curl>'    from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:6:in `<module:Typhoeus>'  from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:5:in `<top (required)>'   from /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'  from /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'  from /Users/myusername/.rvm/gems/ruby-1.9.3-p125/gems/typhoeus-0.4.2/lib/typhoeus.rb:5:in `<top (required)>'    from /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'  from /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'    from /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'  from app.rb:3:in `<main>' 
```

显然有些文件丢失了。

当我执行时，`$ otool -L /usr/local/bin/curl`我得到：

```
/usr/local/lib/libcurl.4.dylib (compatibility version 7.0.0, current version 7.0.0)
/opt/local/lib/libidn.11.dylib (compatibility version 18.0.0, current version 18.5.0)
/opt/local/lib/libintl.8.dylib (compatibility version 10.0.0, current version 10.1.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
/opt/local/lib/libiconv.2.dylib (compatibility version 8.0.0, current version 8.1.0)
/System/Library/Frameworks/LDAP.framework/Versions/A/LDAP (compatibility version 1.0.0, current version 2.2.0)
/opt/local/lib/libssl.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)
/opt/local/lib/libcrypto.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)
/opt/local/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5) 
```

这里的问题是我的文件夹`/opt/local/`甚至不存在。

*   如何修复丢失的链接？
*   我在哪里可以找到丢失的文件？（libidn.11.dylib、libintl.8.dylib、libssl.1.0.0.dylib、libcrypto.1.0.0.dylib 和 libz.1.dylib）？

附加信息：

*   我正在使用 ruby​​ 1.9.3 和 Mac OSX 10.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:37:52.070

听起来您还没有完全删除 MacPorts 及其`curl`.

如果您还没有，您将需要遵循[http://guide.macports.org/chunked/installing.macports.uninstalling.html](http://guide.macports.org/chunked/installing.macports.uninstalling.html)上的指南，具体如下：

```
$ sudo rm -rf \
    /opt/local \
    /Applications/DarwinPorts \
    /Applications/MacPorts \
    /Library/LaunchDaemons/org.macports.* \
    /Library/Receipts/DarwinPorts*.pkg \
    /Library/Receipts/MacPorts*.pkg \
    /Library/StartupItems/DarwinPortsStartup \
    /Library/Tcl/darwinports1.0 \
    /Library/Tcl/macports1.0 \
    ~/.macports 
```

之后，您将需要使用`sudo rm /usr/local/bin/curl`.

`curl`并且`libcurl`已经包含在 OS X 中，但`/usr/local/bin`在`/usr/bin`. 因此，在某些时候，您可能安装了一个新版本的`curl`MacPorts，而现在还剩下。

因此，您将需要完全`curl`清除`/usr/local`. 这最终可能会有点棘手，如果您没有安装很多 Homebrew，那么`/usr/local`在重新安装 Homebrew 之前完全清除 Homebrew 并手动清理可能是个好主意。

最后，一旦`curl`消失，您将需要删除依赖于 libcurl 的 gem 并重新安装。

`curl`如果在卸载 MacPorts 之前使用 MacPorts 卸载所有这些可能都可以避免，但我自己从未使用过 MacPorts，所以不是 100%。

# javascript - 使用 jQuery 捕获 Twitter“Tweet”按钮的点击

> ID：11757170
> 
> 赞同：5
> 
> 时间：2012-08-01T10:19:15.010
> 
> 标签：javascript, jquery, twitter, onclick

我的网站上有以下代码，当它访问 Twitter 的 API 时会生成它自己的标记。

我希望在此过程中调用一个 JavaScript 函数`onClick`，但是随着标记的变化，它似乎并不像`onClick`在锚点上添加一个那么简单。

如何捕捉“推文”按钮的点击？

```
<div class="social_button twitter_button">
  <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal">
    Tweet
  </a>
  <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T10:30:05.587

您无法处理此元素上的点击事件，因为它位于 iFrame 中，但是 twitter 为您提供了将事件绑定到按钮的机会。

示例： http: [//jsfiddle.net/ZwHBf/2/](http://jsfiddle.net/ZwHBf/2/) 文档：[https ://dev.twitter.com/docs/intents/events](https://dev.twitter.com/docs/intents/events)

代码： HTML：

```
<div class="social_button twitter_button">
    <div id="foo">
        <a href="https://google.com" class="twitter-share-button" data-count="horizontal">
    Tweet
  </a>
    </div>
    <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
    <script type="text/javascript" charset="utf-8">
        window.twttr = (function (d, s, id) {
            var t, js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
            return window.twttr || (t = {
                _e: [],
                ready: function (f) {
                    t._e.push(f)
                }
            });
        }(document, "script", "twitter-wjs"));
    </script>
</div>​ 
```

JS：

```
twttr.events.bind('click', function(event) {
    console.log('clicked');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T09:37:11.440

向您的网站添加自定义 Twitter 按钮比您想象的要容易得多。

```
<a href="http://twitter.com/share">Tweet</a> 
```

是的，真的，仅此而已。给你的链接一些设计的爱和tada！您自己的自定义 Twitter 按钮。

**在弹出窗口中打开 Twitter 共享框**

要将 Twitter 共享框显示为弹出窗口，只需添加几行 javascript 即可在新窗口中打开链接。这是一个使用 jQuery 的示例：

```
<a class="twitter popup" href="http://twitter.com/share">Tweet</a>

<script>
  $('.popup').click(function(event) {
    var width  = 575,
        height = 400,
        left   = ($(window).width()  - width)  / 2,
        top    = ($(window).height() - height) / 2,
        url    = this.href,
        opts   = 'status=1' +
                 ',width='  + width  +
                 ',height=' + height +
                 ',top='    + top    +
                 ',left='   + left;

    window.open(url, 'twitter', opts);

    return false;
  });
</script> 
```

**注意：**这只是一个例子。您可能希望将 javascript 代码放在 .js 文件中，并在准备好文档时调用它。

```
$(document).ready(function() {
  $('.popup').click(function(event) {
    // and so on...
  }
}); 
```

为推文设置默认消息

您可以为推文设置默认文本，将文本参数添加到链接：

```
<a class="twitter popup" href="http://twitter.com/share?text=This%20is%20so%20easy">Tweet</a> 
```

现在，当您的用户单击您的推文链接时，默认情况下，推文框中将显示“这很容易”的消息。 [更多的..](http://www.webpop.com/blog/2011/02/16/add-a-custom-twitter-button-to-your-website)

# django - Django admin：唯一的电子邮件验证对自己失败

> ID：11757172
> 
> 赞同：2
> 
> 时间：2012-08-01T10:19:18.167
> 
> 标签：django, validation, django-forms, django-admin

嗨，这是我的 admin.py 中的一个片段

```
#admin.py
class UserForm(forms.ModelForm):
    class Meta:
        model = User

    def clean_email(self):
        email = self.cleaned_data['email']
        if User.objects.filter(email=email).exists():
            raise forms.ValidationError("This email already used")
        return email

class UserAdmin(admin.ModelAdmin):
    form = UserForm

admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

我使用它来检查是否无法使用已使用的电子邮件地址创建新用户。问题是，当我编辑现有用户时，验证检查失败，因为有一个用户使用该邮件地址，但这没关系，因为它是我正在编辑的那个。

如何告诉表单验证忽略与当前用户的匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T10:26:06.483

从查询中排除当前实例：

```
def clean_email(self):
    email = self.cleaned_data['email']
    if User.objects.filter(email=email).exclude(pk=self.instance.pk).exists():
        raise forms.ValidationError("This email already used")
    return email 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T09:00:31.633

`unique`使用模型字段验证唯一性要好得多。

您可以使用`User`具有唯一电子邮件约束的自定义模型。

[查看此内容以获取有关在您自己的https://stackoverflow.com/a/1560617/527064](https://stackoverflow.com/a/1560617/527064)上实施唯一验证的更多信息

# android - 响应变量的变化

> ID：11757178
> 
> 赞同：1
> 
> 时间：2012-08-01T10:19:28.143
> 
> 标签：android

我做了一个显示当前时间的 toast 的服务。当“分钟”的值发生变化时，应该显示吐司。我应该怎么办 ？这是代码。是否有必要创建一个监听器来监听分钟变量的变化？请帮我。

```
public class Servicedemo extends Service{
@Override
public void onCreate() {

    super.onCreate();
    Toast.makeText(this, "Service Started", Toast.LENGTH_SHORT).show();
     String str;

        Calendar c=Calendar.getInstance();
        int hour=c.get(Calendar.HOUR);
        int min=c.get(Calendar.MINUTE);
        str=String.valueOf(hour)+":"+String.valueOf(min);

        Toast.makeText(this, str , Toast.LENGTH_SHORT).show();

}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_SHORT).show();
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:29:31.033

您需要创建一个 timertask 并覆盖 run 方法，例如：

```
 public class yourAsyncTimerTask extends TimerTask{

    @Override
    public void run() {
                Calendar c=Calendar.getInstance();
                int hour=c.get(Calendar.HOUR);
                int min=c.get(Calendar.MINUTE);
                String str = String.valueOf(hour)+":"+String.valueOf(min);

            Toast.makeText(this, str , Toast.LENGTH_SHORT).show();

    }

} 
```

并设置你的计时器

```
Timer timer = new Timer();      
timer.schedule(new yourAsyncTimerTask(), 1 * 60 * 1000,  1 * 60 * 1000); 
```

# php - SQL 删除查询 INNER JOIN

> ID：11757182
> 
> 赞同：-2
> 
> 时间：2012-08-01T10:20:03.123
> 
> 标签：php, mysql, sql

我目前正在尝试使用 php 从 mysql 表中删除一行。我有两张非常基本的桌子。“工作表”和“工作表劳力”。工作表包含一个名为 job_ID 的字段，它有一个名为 WS_ID 的字段。Worksheet_Labour 有一个名为 WS_ID 的字段和各种其他字段。我正在尝试删除 worksheet_labour 中可以在工作表中找到的特定 job_ID 的所有信息。这是我迄今为止尝试过的，但到目前为止还没有任何运气。任何帮助将不胜感激。谢谢

```
 if(isset($_GET["delete"]))
        {       
            $SQL = "DELETE FROM worksheet_labour INNER JOIN worksheet ON worksheet_labour.WS_ID = worksheet.WS_ID WHERE job_ID = '1234'";
            $resultset2 = mysql_query($SQL);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:27:28.783

试试这个：

```
$SQL = "DELETE wl FROM worksheet_labour wl INNER JOIN worksheet w ON wl.WS_ID = w.WS_ID WHERE wl.job_ID = '1234'"; 
```

# android - 碎片禁用按钮触摸android

> ID：11757188
> 
> 赞同：1
> 
> 时间：2012-08-01T10:20:31.700
> 
> 标签：android, button

我有一个片段工作正常的应用程序，但是当一个按钮被录音时，我显示一个弹出窗口，是一个小窗口，所以一些按钮不在视图中，可以点击，

那么如何禁用其他按钮，当我弹出窗口时，

```
public class Tab2HeadH1 extends Fragment   implements OnClickListener{

    //testeo popero

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.tab_2_head_buttons, container,false);

        //Buttons

        final Button buttonNose = (Button) view.findViewById(R.id.button_pop_nose);

        buttonNose.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
              //aqui tus tareas,,

                LayoutInflater layoutInflater = (LayoutInflater)getActivity().getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

               View popupView = layoutInflater.inflate(R.layout.popup, null);  
                        final PopupWindow popupWindow = new PopupWindow(
                          popupView, 
                          LayoutParams.WRAP_CONTENT,  
                                LayoutParams.WRAP_CONTENT);

                        Button btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
                        btnDismiss.setOnClickListener(new Button.OnClickListener(){

                @Override
                public void onClick(View v) {
                 // TODO Auto-generated method stub
                 popupWindow.dismiss();
                }});

                        popupWindow.showAsDropDown(buttonNose, 50, 30);

            }

        });

        Button buttonEye = (Button) view.findViewById(R.id.button_pop_eye);

        buttonEye.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
               // onLoginClicked(v);
                Toast.makeText(getActivity(), "ss9 eye",
                        Toast.LENGTH_SHORT).show();

            }
        });

return view;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        super.onViewCreated(view, savedInstanceState);

        ((TabActivity)getActivity()).setHeader("TAPING APPLICATION");
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {

        }
    }

} 
```

谢谢

# python - 后验分布 MCMC 的 Fisher 信息

> ID：11757190
> 
> 赞同：1
> 
> 时间：2012-08-01T10:20:35.427
> 
> 标签：python, mcmc

我使用的方法需要我计算后验分布的 Fisher 信息（关于所有超参数）。我目前拥有的是来自后验分布的蒙特卡洛样本。我觉得我可以分别通过二阶和一阶导数的样本均值和协方差来使用和近似这些，但我正在寻找一种更有效的方法。

但是，有人建议我使用，`optim(..., Hessian=TRUE)`但是我看不出优化例程有什么帮助。

# mysql - MySQL小数忽略逻辑运算符

> ID：11757191
> 
> 赞同：1
> 
> 时间：2012-08-01T10:20:38.990
> 
> 标签：mysql, operators, decimal

`utility`是一`DECIMAL(10,2)`列。

```
SELECT * FROM items WHERE utility >= 50 
```

例如，此查询返回实用程序为 4.25 的事物。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:22:13.190

尝试：

```
SELECT * FROM items WHERE utility >= CAST(50 AS DECIMAL(10,2));

SELECT * FROM items WHERE utility >= 50.0; 
```

# unicode - QWebView::findText 不适用于 Unicode 的组合变音符号

> ID：11757194
> 
> 赞同：2
> 
> 时间：2012-08-01T10:20:47.990
> 
> 标签：unicode, normalization, qtwebkit, unicode-normalization, text-normalization

我正在使用`QtWebKit`( `QWebView`) 来显示文本，并且我想通过`QWebView::findText`.

问题是必须显示的文本包含所谓的 Unicode 的组合变音符号，尽管它们应该忽略这些“标记”（字符），但它们`QWebView::findText()`和 JavaScript`window.find()`都不会忽略这些“标记”（字符）。

例如，如果文本中有一个单词“ti̇̀krăs”（“t”，“i”，Combining Dot Above，Combining Grave Accent，“k”，“r”，“a”，Combining Breve，“s”）， findText() 在搜索查询“tikras”（“t”、“i”、“k”、“r”、“a”、“s”）时无法找到该词。

在这种情况下，其他基于 WebKit 的浏览器（Chrome、Safari）似乎可以正常工作。

对于这种情况，我能做些什么吗？

# javascript - 占位符html中的图像？

> ID：11757196
> 
> 赞同：5
> 
> 时间：2012-08-01T10:20:55.883
> 
> 标签：javascript, html, css, textbox, placeholder

我可以用纯 html 做这样的事情吗，如果需要 css 和 javascript：

![谷歌自定义搜索图片](../Images/b64c51b5004dbe1b8c95ba34b17f9774.png)

而当鼠标对焦时，就变成了这样：

![专注时的 Google 自定义搜索](../Images/61487ea0b64106ebadeb02a845fc241f.png)

所以我在想一个图像占位符。我在正确的轨道上，还是有更好/更简单或更直接的方法？

**编辑：**纯粹出于好奇，我将如何使用 JavaScript 完成此任务，因为所有当前答案都与 CSS 相关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T10:24:24.550

据我所知，这只是 CSS 背景图像。

[http://www.w3schools.com/cssref/pr_background-image.asp](http://www.w3schools.com/cssref/pr_background-image.asp)

看看那里，你可以通过设置它的位置来完成这个：http: [//www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

您还可以根据项目是否聚焦或不简单地在聚焦时显示背景图像并在不喜欢时隐藏它来更改背景图像：

```
#item:focus{
bacground image code here
} 
```

更多关于焦点的细节：http: [//www.w3schools.com/cssref/sel_focus.asp](http://www.w3schools.com/cssref/sel_focus.asp)

还有一些重点使用示例：[http ://www.mozilla.org/access/keyboard/snav/css_usage.html](http://www.mozilla.org/access/keyboard/snav/css_usage.html)

更新资源 - 感谢@MrMisterMan

[http://developer.mozilla.org/en/CSS/background-image](http://developer.mozilla.org/en/CSS/background-image)

[http://developer.mozilla.org/en/CSS/background-position](http://developer.mozilla.org/en/CSS/background-position)

JAVASCRIPT：

使用 JavaScript 将属性添加到您的元素，如下所示：

这将在获得焦点时调用您的函数并将其传递给输入元素。

您还可以检测 onfocusout

希望这会有所帮助，任何问题都可以问:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T10:05:50.097

如果您只需要支持最新的浏览器，请使用：

## HTML：

```
<input placeholder="Google Custom Search" type="search" name="q"> 
```

## CSS：

```
#myInput::-webkit-input-placeholder {
  color: transparent;
  text-indent: -9999px;
  background-image: url("http://placehold.it/150x20");
  background-position: 0 50%;
  background-repeat: no-repeat; 
}
#myInput::-moz-placeholder {
  /* Firefox 19+ */
  color: transparent;
  text-indent: -9999px;
  background-image: url("http://placehold.it/150x20");
  background-position: 0 50%;
  background-repeat: no-repeat; 
}
#myInput:-moz-placeholder {
  /* Firefox 18- */
  color: transparent;
  text-indent: -9999px;
  background-image: url("http://placehold.it/150x20");
  background-position: 0 50%;
  background-repeat: no-repeat; 
}
#myInput:-ms-input-placeholder {
  /* IE 10- */
  color: transparent;
  text-indent: -9999px;
  background-image: url("http://placehold.it/150x20");
  background-position: 0 50%;
  background-repeat: no-repeat; 
} 
```

[JSFiddle](http://jsfiddle.net/handtrix/HDmw2/)

[浏览器支持](http://caniuse.com/#feat=input-placeholder)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:24:11.933

如果您需要图像（问题中的谷歌徽标），您应该将占位符图像设置为文本字段的背景：

```
input.search {
    background-image: url("placeholder.gif");
    background-repeat: no-repeat;
}
input.search:focus {
    background-image: none;
} 
```

**注意：** `:focus`是css中的一个伪类，在焦点上激活

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:54:35.080

你可以只使用 CSS。

你可以给出一个 4px 宽度的实心边框。
您可以使用`moz-border`或`webkit-border`半径为您的输入制作圆角。
您可以使用边框背景图像。

在这里您可以阅读有关 css3 边框[http://www.w3schools.com/css3/css3_borders.asp](http://www.w3schools.com/css3/css3_borders.asp)

你可以试试

```
input {
    border:2px solid #dadada;
    border-radius:7px;
    font-size:20px;
    padding:5px; 
}

input:focus { 
    outline:none;
    border-color:#9ecaed;
    box-shadow:0 0 10px #9ecaed;
} 
```

***[这](http://jsfiddle.net/94Mm6/)***是工作小提琴

# reporting - 向量积分 Pentaho

> ID：11757198
> 
> 赞同：1
> 
> 时间：2012-08-01T10:20:56.867
> 
> 标签：reporting, integration, pentaho

我有一个关于 Vectorwise 与 Pentaho 集成的问题。Pentaho 与其他数据库一起工作得很好，但与 Vectorwise 的集成总是会出现同样的错误。

**AdhocWebService.ERROR_0012 - 无法生成报告预览。请检查服务器日志以获取错误的详细信息。**

当我检查错误日志时，它说：

**

> 错误 [org.pentaho.platform.plugin.services.connections.metadata.sql.SqlMetadataQueryExec] SqlMetadataQueryExec.ERROR_0002 - 查询执行失败：QueryModelMetaData.ERROR_0001 - !QueryModelMetaData.ERROR_0001_MetadataColumnNotFound！生成的 SQL： SELECT "BT_TIME_DIMENSION_TIME_DIMENSION"."cl_year" AS "COL0" ,AVG("BT_TIME_DIMENSION_TIME_DIMENSION"."cl_week") AS "COL1" FROM "time_dimension" "BT_TIME_DIMENSION_TIME_DIMENSION" GROUP BY "BT_TIME_DIMENSION_TIME_DIMENSION"."cl_year" ORDER B " 错误 [org.pentaho.platform.engine.services.solution.SolutionEngine] db143504-d7c1-11e1-b334-355c9beece81:SOLUTION-ENGINE:preview.xaction: 动作序列执行失败，详情见下文 | 错误时间：2012 年 7 月 27 日星期五下午 1:35:40 IST | 会话 ID：乔 | 实例 ID：db143504-d7c1-11e1-b334-355c9beece81 | 动作序列：preview.xaction | 执行堆栈：执行操作：规则 (MQLRelationalDataComponent) | 动作类：MQLRelationalDataComponent | 动作描述：规则 | 循环索引（基于 1）：0

**

当我直接在 Vectorwise 服务器上运行相同的查询时，将获得输出。

**请帮我。提前谢谢:)**

# android - 使用 NDK 编译本机代码

> ID：11757206
> 
> 赞同：3
> 
> 时间：2012-08-01T10:21:32.950
> 
> 标签：android, android-ndk, native

当我尝试像这样编译本机 C 代码时：

```
:~/com.***.sample.ndk1$ ./ndk-build
Android NDK: Could not find platform files (headers and libraries)    
Android NDK: Please run build/tools/build-platforms.sh to build the corresponding      directory.    
/com.***.sample.ndk1/build/core/init.mk:345: *** Android NDK: Aborting    .  Stop.

:~/com.***.sample.ndk1$ build/tools/build-platforms.sh
.: 39: Can't open build/tools/../core/ndk-common.sh
:~/com.***.sample.ndk1$ 
```

显示上述错误。

任何人都可以回答来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:39:32.903

您必须将 Your NDK 位置目录添加到您的系统`PATH`变量中：假设您的 ndk 在`/opt/android/android-ndk-r8b`文件夹中，android sdk 在`/opt/android/android-sdk`文件夹中，因此，您可以将以下行添加到您的`~/.bash_profile`（在文件末尾）： `export PATH=$PATH:/opt/android/android-ndk-r8b:/opt/android/android-sdk`

此外，您可以运行以下命令：

`chmod -R a+r /opt/android/android-ndk-r8b`

`chmod -R a+r /opt/android/android-sdk`

# css - 是否可以从屏幕左下角到右上角重复背景？

> ID：11757210
> 
> 赞同：0
> 
> 时间：2012-08-01T10:21:41.280
> 
> 标签：css, background, rotation

我有一些图像模式，我希望它打击一个元素（例如身体）。我可以创建带有背景的伪元素并将其旋转 n 度，但这是一个糟糕的解决方案，因为我不知道块的比例。

有什么想法可以仅使用 CSS 来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:46:48.680

虽然没有一个 CSS 属性可以满足您的需求，但它可以被黑客入侵。

这有点难看，也不是真正的重复，但它可能对你有用。

HTML：

```
<div class="container"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
.container {
    width: 500px;
    height: 500px;
    background-image:
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png"),
        url("http://i.stack.imgur.com/R5Ux6.png");
    background-position:
        0% 100%,
        10% 90%,
        20% 80%,
        30% 70%,
        40% 60%,
        50% 50%,
        60% 40%,
        70% 30%,
        80% 20%,
        90% 10%,
        100% 0%;
    background-repeat: no-repeat;
}​ 
```

[http://jsfiddle.net/z4FD3/](http://jsfiddle.net/z4FD3/)

在这里，我将相同的图像重复了 10 次。您可以根据需要执行多次，只需在位置之间添加更多行和更小的间隔（例如：0% 100%、2% 98%、4% 96%）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:45:49.337

![图案](../Images/87089db660c167c172d50e7a14e81fa1.png)

为什么不制作一个看起来像上面的例子一样倾斜的图案

# facebook - Facebook 缩略图无法加载

> ID：11757214
> 
> 赞同：0
> 
> 时间：2012-08-01T10:22:06.497
> 
> 标签：facebook, facebook-graph-api

我搜索了许多类似的帖子，大多数人似乎都在问如何更改他们的缩略图......我什至没有做到这一点。

我的 中有以下元信息：

```
<meta property="og:title" content="MyWebsite"/>
<meta property="og:type" content="company"/>
<meta property="og:url" content="http://www.myWebsite.com/"/>
<meta property="og:image" content="http://www.myWebsite.com/images/logo.jpg"/>
<meta property="og:description"
          content="MyWebsite is brilliant."/> 
```

当我尝试将[http://www.MyWebsite.com](http://www.MyWebsite.com)粘贴到 Facebook 状态更新中时，它会正确显示描述，但不会拉取图像。

我使用了 Facebook Debugger/Linter，它正确地拉动了一切……那么不相交的地方在哪里？我尝试了不同的浏览器，但仍然没有缩略图。

我注意到的一件事是，如果我使用 W3C 验证我的网站，就会说“属性”不允许作为属性。这是正常的吗？

标志有尺寸吗？我的大约是 574 像素 x 187 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:27:22.487

以应用程序管理员的身份使用调试工具（设置 app_id OG 标签以帮助解决此问题）。如果您是应用程序管理员，则调试工具应在 Facebook 上共享时重置缓存并拾取新图像。

# sql - Sql Server 2008 中基于日期时间的查询

> ID：11757226
> 
> 赞同：0
> 
> 时间：2012-08-01T10:22:52.873
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我将日期时间存储在我的表中的 LeaveFrom 和 LeaveTo 字段中的叶子，例如

LeaveFrom = 05/26/2012 12:00:00 和 LeaveTo = 06/30/2012.. 等等

从前端我只传递月份和年份。那么相同的搜索条件是什么。

我需要按月和按年进行搜索的标准。在特定月份有多少人申请休假/或缺勤。

**感谢你们所有人……几乎所有人都接近预期……谢谢，我需要的是“提示”……非常感谢你们所有人……**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:29:11.233

假设您想获得一组在给定月/年休假的人：

以下是一些可能有用的完整更新代码：

```
declare @dateFrom datetime  
declare @dateTo datetime 
set @dateFrom = DateAdd(day, 0, DateAdd(month, @Month - 1, 
                DateAdd(Year, @Year-1900, 0)))
set @dateTo = DATEADD("month", 1, @dateFrom)
SELECT * FROM @yourtable WHERE LeaveFrom < @dateTo AND LeaveTo >= @dateFrom 
```

我只计算一次日期，而不是为每个选定的行计算日期。上面的代码也可以很容易地转换成一条 SQL 语句。我这样写是为了使其易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:31:31.897

试试这个：

```
where   (MONTH(LeaveFrom) = @Month 
        and YEAR(LeaveFrom) = @Year )
         OR
        (and MONTH(LeaveTo) = @Month 
        and YEAR(LeaveTo) = @Year ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:29:52.983

```
SELECT * FROM {your table name}
WHERE LeaveFrom >= CAST({input month} + '/1/' + {input year} AS DATETIME) AND
    LeaveTo <= DATEADD(dd, -1, DATEADD(mm, 1, CAST({input month} + '/1/' + {input year} AS DATETIME))) 
```

更准确地说，你可以减去一分钟而不是一整天。

```
SELECT * FROM {your table name}
WHERE LeaveFrom >= CAST({input month} + '/1/' + {input year} AS DATETIME) AND
    LeaveTo < DATEADD(mm, 1, CAST({input month} + '/1/' + {input year} AS DATETIME)) 
```

你开始让每个人都对你想要的东西感到困惑，但根据你最后的评论，这里是查询。

```
SELECT * FROM {your table name}
WHERE MONTH(LeaveFrom) = {input month} AND YEAR(LeaveFrom) = {input year} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:39:12.783

```
DECLARE @month int
DECLARE @year int
SET @month = 7
SET @year = 2012

SELECT * FROM table
WHERE 
(DATEPART(yy, LeaveFrom) = @year
AND DATEPART(mm, LeaveFrom) = @month) OR 
(DATEPART(mm, LeaveTo) = @month AND DATEPART(yy, LeaveTo) = @Year) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:19:46.993

据我所知，您希望所有在 LeaveFrom 和 LeaveTo 之间与所选月份重叠的行。我提供了一些示例日期作为文档。

```
declare @yourtable table(LeaveFrom datetime, LeaveTo datetime)
insert @yourtable values('2012-05-26 12:00:00', '2012-06-30')
insert @yourtable values('2012-01-26 12:00:00', '2012-12-30')
insert @yourtable values('2012-01-26 12:00:00', '2012-04-30')
insert @yourtable values('2012-05-26 12:00:00', '2012-12-30')
insert @yourtable values('2012-01-26 12:00:00', '2012-05-30')
insert @yourtable values('2012-06-26 12:00:00', '2012-12-30')
insert @yourtable values('2011-01-01 12:00:00', '2011-01-01')

declare @month tinyint = 5
declare @year int = 2012

-- calculate a data corresponding to month and year (2012-05-01)
declare @date datetime= dateadd(month, (@year-1900) * 12 + @month-1, 0)

select * from @yourtable
where datediff(month , LeaveFrom, @date) between 0 and datediff(month , LeaveFrom, LeaveTo) 
```

编辑：具有相同结果的另一种可能方式：

```
select * from @yourtable
where @date between dateadd(month, datediff(month, 0, LeaveFrom), 0) 
and dateadd(month, datediff(month, 0, LeaveTo), 0) 
```

结果：

```
LeaveFrom               LeaveTo
----------------------- -----------------------
2012-05-26 12:00:00.000 2012-06-30 00:00:00.000
2012-01-26 12:00:00.000 2012-12-30 00:00:00.000
2012-05-26 12:00:00.000 2012-12-30 00:00:00.000
2012-01-26 12:00:00.000 2012-05-30 00:00:00.000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T11:31:14.967

试试这个。性能方面，这将做得最好

```
declare @month int, @year int
select @month=6, @year=2012

select columns from table
where 
LeaveFrom>=Dateadd(month,(@year-1900)*12+@month-1,0) and
LeaveTo<Dateadd(month,(@year-1900)*12+@month,0) 
```

您可能还需要知道如何以各种方式模拟日期序列函数 [http://beyondrelational.com/modules/2/blogs/70/posts/15788/10-ways-to-simulate-dateserial-function.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/15788/10-ways-to-simulate-dateserial-function.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-21T13:01:48.820

DECLARE @Temp TABLE ( ID INT IDENTITY(1, 1) ,LeaveFrom DATETIME ,LeaveTo DATETIME ,UserName VARCHAR(100) )

插入@Temp值（'2015-01-01'，'2015-01-05'，'Ramesh'），（'2015-01-07'，'2015-01-09'，'Suresh'），（ '2015-01-03','2015-01-06','Dinesh'),('2015-01-15','2015-01-25','Kamlesh'),('2015-01-12 ' ,'2015-01-17' ,'莫寒' )

SELECT COUNT(*) FROM @Temp WHERE '2015' BETWEEN YEAR(LeaveFrom) AND YEAR(LeaveTo) AND '1' BETWEEN MONTH(LeaveFrom) AND MONTH(LeaveTo)

# ruby - Mongodb 简单更新在 Ruby/Mongoid 中不起作用

> ID：11757228
> 
> 赞同：3
> 
> 时间：2012-08-01T10:23:07.160
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongoid

我有以下 MongoDB 更新操作，但它似乎不起作用，有人知道为什么吗？

```
User.collection.update({ _id: BSON::ObjectId("5018ed448712ff240e0000a0") }, 
                       { "$set" => { name: "ben" } }) 
```

它不会抛出错误，而只是我猜测的一些整数是文档大小。

我正在使用 Mongoid 2.4.10/Rails 3.2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:36:15.830

如果您使用的是 Mongoid，您只需进行查找和更新：

```
User.find("5018ed448712ff240e0000a0").update_attributes!(name: "ben") 
```

或者你可以使用设置：

```
User.find("5018ed448712ff240e0000a0").set(:name, "ben") 
```

请注意，`set()`需要 2 个参数；它不接受哈希作为参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:59:17.677

您可以改用 mongoid API 并使用以下命令：

```
User.find("5018ed448712ff240e0000a0").set(name: "ben") 
```

# jquery - 将 div 中的图像垂直居中

> ID：11757229
> 
> 赞同：0
> 
> 时间：2012-08-01T10:23:07.873
> 
> 标签：jquery, image, center

我有这个代码用于在一堆 div 中垂直居中图像。

```
function centerImages(parent, image) {
    var parent_height = $(image).parent().height();  
    var image_height = $(image).height();  
    var top_margin = (parent_height - image_height)/2;  
    $(image).css( 'margin-top' , top_margin);
}
centerImages(".clients li", ".clients li img"); 
```

..但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:32:56.103

试试这个，

```
div.clients li img { vertical-align:middle; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:26:39.547

试试这个...

```
function centerImages(image) {
    var parent_height = $(image).parent().height();  
    var image_height = $(image).height();  
    var top_margin = (parent_height - image_height) / 2;  
    $(image).css( 'margin-top' , top_margin);
}
$(".clients li img").each(function() {
    centerImages(this);
}); 
```

您实际上并没有传递图像，只是传递了类选择器。上面选择了所有相关的图像并将它们传入 - 不需要 parent 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:29:11.313

如果您`div`的高度相同并且只包含图像，那是一个纯 CSS 解决方案：http:
[//jsfiddle.net/Tpy2w/](http://jsfiddle.net/Tpy2w/)

相关CSS

```
div {
  width: 300px;
  height : 300px; 
  line-height: 300px; 
  text-align: center;    
}

div img {
  vertical-align: middle;
} 
```

只需为 div设置一个`height`和相同的值。`line-height`然后应用`vertical-align: middle`在图像上

# struts2 - Struts2 - 使用 xml 文件的验证失败导致操作类参数从生成的 jsp 中消失

> ID：11757235
> 
> 赞同：0
> 
> 时间：2012-08-01T10:23:49.200
> 
> 标签：struts2, struts

我有一个 A 类：

```
class A extends ActionSupport{

  int someId;
  // getters/setters

  public String execute(){
    setSomeId(2);
    return SUCCESS;
  }

  public String save(){
   // something
  }

} 
```

在`struts.xml`中，我配置了一个动作“ `ViewId`”，它将我们带到默认方法`execute`，在哪里`someId`设置。然后，我们被带到一个 jsp 页面`show.jsp`，我可以在其中访问该`someId`值。在 show.jsp 中，我必须输入电子邮件 ID，然后提交页面。现在在“”中调用的动作`Save`将我们带到动作类的保存方法。但是，我在相应的 validation.xml 文件中进行了一些检查`A-Save-validation.xml`，它将检查输入的电子邮件的格式。问题是，如果 xml 验证失败，我们将返回 show.jsp，但 viewId 参数现在不可用。为什么会这样？

输入页面应该与之前的用户相似。只有现在验证的字段应该有一个与之关联的错误页面。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:09:29.810

就像@Umesh 所说，在调用动作的方法**之前，验证发生在相应的拦截器上。**

当验证失败时，该操作的方法永远不会被调用，您将被带到 INPUT 结果。

为了实现你想要的，你有一些选择：

1.  在您的操作中实现可准备的接口
2.  在您的方法中执行验证。
3.  在要填充的项目之前在 jsp 中使用 s:action 来调用填充相关部分的操作

1可能是最简单的。我也喜欢选项3。

# php - 嵌入式 gallery2 与主机的 smarty3 类不兼容

> ID：11757236
> 
> 赞同：0
> 
> 时间：2012-08-01T10:23:58.783
> 
> 标签：php, smarty

我们即将将主站点的软件升级到 smarty3。一切正常，除了使用 smarty2 的 gallery2 的嵌入式版本。

它是这样包含的：

```
require_once('../../gallery2/embed.php'); 
```

嵌入的 gallery2 自动扩展了我们主站点的 smarty3 类（smarty2 和 3 使用相同的类名）。所以gallery2现在像smarty2一样使用smarty3，它不起作用。

在这种情况下，smarty2 和 smarty3 可以和平共存吗？

*   重命名两个 smarty 类之一......失败（破坏 smarty 内部的东西）
*   尝试使用 smarty3 兼容函数扩展 gallery2 的模板对象...失败
*   是的，命名空间将是解决方案，但由于 smarty 不会开箱即用地使用它们......

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:35:37.237

我用肮脏的方式解决了它。通过将 smarty2 重构为不同的类名 + 重命名所有包含的函数（它们都在一个单独的函数中），将 smarty2 与 smarty3 分开 + 使用我重命名的函数编译代码的一些更改。不漂亮。但有效。

# asp.net-mvc-3 - 在 windows server 2008 r2 中运行应用程序时，字典错误中不存在给定键

> ID：11757237
> 
> 赞同：0
> 
> 时间：2012-08-01T10:24:03.530
> 
> 标签：asp.net-mvc-3, razor

我有一个使用 MVC3 Razor 制作的 Web 应用程序。

应用程序在浏览器中正常启动，但在文本框中输入一些值并单击搜索按钮后出现错误

“**给定的键不在字典中**”。

这只发生在 Windows server 2008 R2 中。在 Windows 7、Windows server 2008 sp1 等其他操作系统中，它工作正常。

下面是堆栈跟踪

```
[KeyNotFoundException: The given key was not present in the dictionary.]
   System.Collections.Generic.Dictionary`2.get_Item(TKey key) +12686831
   CVR_Prototype.Controllers.HomeController.CvrDetailsCompleted() +171
   lambda_method(Closure , ControllerBase , Object[] ) +79
   System.Web.Mvc.Async.<>c__DisplayClass7.<BeginExecute>b__5(IAsyncResult asyncResult) +288
   System.Web.Mvc.Async.<>c__DisplayClass41.<BeginInvokeAsynchronousActionMethod>b__40(IAsyncResult asyncResult) +22
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +129
   System.Web.Mvc.Async.<>c__DisplayClass51.<InvokeActionMethodFilterAsynchronously>b__4b() +810887
   System.Web.Mvc.Async.<>c__DisplayClass51.<InvokeActionMethodFilterAsynchronously>b__4b() +810887
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__38(IAsyncResult asyncResult) +15
   System.Web.Mvc.Async.<>c__DisplayClass2c.<BeginInvokeAction>b__22() +33
   System.Web.Mvc.Async.<>c__DisplayClass27.<BeginInvokeAction>b__24(IAsyncResult asyncResult) +811468
   System.Web.Mvc.<>c__DisplayClass19.<BeginExecuteCore>b__14(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.AsyncController.EndExecuteCore(IAsyncResult asyncResult) +67
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.AsyncController.EndExecute(IAsyncResult asyncResult) +53
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__4(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +54
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +136 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:59:15.117

**资料来源**：[http ://shahvaibhav.com/solving-the-given-key-was-not-present-in-the-dictionary-error-of-visual-studio-2010/](http://shahvaibhav.com/solving-the-given-key-was-not-present-in-the-dictionary-error-of-visual-studio-2010/)

在开发 mvc3 razor 应用程序时，我遇到了一个奇怪的错误“字典中不存在给定的键”。

在谷歌搜索了几个小时后，我找到了这个错误的解决方案。

实际上这个错误意味着“这通常意味着您已经安装了一个自定义数据提供程序，使用该提供程序创建了一个服务器资源管理器连接，然后在不删除服务器资源管理器条目的情况下卸载了提供程序”要解决这个错误你必须做的第一件事关闭所有视觉工作室实例。

现在转到您的用户 AppData 目录（例如 C:\Users\Administrator\AppData）（注意：如果您关闭了“显示隐藏文件和文件夹”，AppData 可能不会显示在 Windows 资源管理器中）

n AppData 转到 Roaming > Microsoft > Visual Studio > 10.0 > ServerExplorer

在那里您将找到名为 DefaultView.SEView 的文件。该文件存储所有连接。

这是一个纯 XML 文件，因此理论上，您可以通过其 Label 定位无效连接，然后删除包含的 DataViewNode XML 元素。在实践中，我对此并没有太多的运气——该文件通过索引存储 blob 与连接的连接，因此删除单个项目可能会使这些索引失效。但是，如果您定义了很多连接并且您不想重新创建它们，那么可能值得尝试一下，以防您比我更幸运。否则，只需删除 DefaultView.SEView 文件。

现在重新启动视觉工作室并完成。现在你摆脱了那个糟糕的错误。

# ocaml - 如何在 OCaml 解释器 shell 中重复最后一个命令

> ID：11757239
> 
> 赞同：25
> 
> 时间：2012-08-01T10:24:10.083
> 
> 标签：ocaml, interpreter

我一直在尝试 OCaml。有时使用解释器外壳测试一些代码会更快，但是当我按下“向上”键时它不会显示最后一个命令。

当我错过输入内容或希望看到一点变化会产生什么时，这是一种痛苦。

有谁知道它是否还有其他钥匙？

谢谢，

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-01T10:28:58.663

使用`rlwrap`：

```
rlwrap ocaml 
```

`ocaml`本身没有 readline 支持。

您可以使用`~/.inputrc`. 例如，您可以向其中添加这样的行：

```
$if ocaml
"\C-o": "()\C-b"
"\C-n": ";;\n"
$endif 
```

`ctrl-o`现在您可以`ctrl-n`在`ocaml`. 就试一试吧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T23:11:54.233

您可以使用改进的顶层[utop](https://forge.ocamlcore.org/projects/utop/)。此外，它包括很好的完成能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T09:46:48.877

我使用 ctrl + 向上箭头作为先前的输入

# blackberry - 适用于第三方（非本地）应用程序的 BlackBerry Internet Service

> ID：11757242
> 
> 赞同：1
> 
> 时间：2012-08-01T10:24:18.367
> 
> 标签：blackberry, blackberry-jde

我开发了一个小型 j2me 应用程序，它与服务器通信并将其转换为 .COD 用于 BlackBerry 设备。它不能在我的 BIS 连接上运行，我如何通过 BIS 连接在我的 BlackBerry 设备上运行该应用程序。我听说过以 RIM 为解决方案的 Alliance 计划。我该如何注册，该程序是否有任何替代方案？

# scala - scala：隐式转换不起作用

> ID：11757250
> 
> 赞同：6
> 
> 时间：2012-08-01T10:25:06.407
> 
> 标签：scala

我的功能有问题`implicit`，从包中导入。

我有一个使用正则表达式在文本中查找内容的类。我想将其用作：

```
val pattern = "some pattern here".r                                          
pattern findSomethingIn some_text 
```

为此，我定义了一个`implicit`函数以转换为包含函数`pattern`的包装器`Wrapper``findSomethingIn`

```
package mypackage {                                                          

  class Wrapper ( val pattern: Regex ) {                                     
    def findSomethingIn( text: String ): Something = ...                     
  }                                                                          

  object Wrapper {                                                           
    implicit def regex2Something( pat: Regex ): Wrapper = new Wrapper( pat ) 
  }                                                                          

} 
```

如果我用它作为

```
import mypackage._                                                           

Wrapper.regex2Something( pattern ) findSomethingIn some_text 
```

有用。而如果我使用

```
pattern findSomethingIn some_text // implicit should work here?? 
```

我明白了

```
value findPriceIn is not a member of scala.util.amtching.Regex 
```

所以隐式转换在这里不起作用......有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T10:28:40.800

你会需要

```
import mypackage.Wrapper._ 
```

导入适当的方法。

有关更多信息，请参阅[此博客条目](http://daily-scala.blogspot.co.uk/2009/08/implicit-methods.html)，并特别注意对象的定义/导入`Conversions`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:01:12.237

布赖恩的答案是最好的，虽然另一种方法是使用包对象

```
package object mypackage {                                                           
  implicit def regex2Something( pat: Regex ): Wrapper = new Wrapper( pat ) 
} 
```

这将允许您使用原始`import mypackage._`行，因为隐式 def 将在包本身中。

[http://www.scala-lang.org/docu/files/packageobjects/packageobjects.html](http://www.scala-lang.org/docu/files/packageobjects/packageobjects.html)

# java - 如何确定为什么 Spring @Controller 没有收到请求？

> ID：11757252
> 
> 赞同：2
> 
> 时间：2012-08-01T10:25:18.317
> 
> 标签：java, spring, spring-mvc

我无法将请求路由到使用 @RequestMapping 的 Spring @Controller 之一，这通常是由我的拼写错误引起的，但是当您像我一样有很多控制器时，查找这些拼写错误仍然很烦人。

例如像 /abc/{id}/something/{anotherId} 这样的 URI

有没有办法让 spring 打印出它用来确定不匹配的过程？特别有用的是知道匹配的 URI 路径有多远，因为这将使查找错别字变得容易得多。

有哪些调试标志可用于解决路由问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:11:47.270

你可以做几件事——

1.  将日志级别提高到 DEBUG 甚至可能是 TRACE，这将清楚地显示 Spring MVC 如何尝试将您的请求与处理程序方法匹配。

2.  调试 - 您可以早在 DispatcherServlet 中设置断点，然后查看映射是如何解决的。

3.  您可以实现端点文档控制器 - 类似这些 - [http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html](http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html)，它可以显示应用程序中支持的所有端点 URI .

# ubuntu - 在 Ubuntu 12.04 中搞砸了 .bash_profile

> ID：11757255
> 
> 赞同：0
> 
> 时间：2012-08-01T10:25:33.797
> 
> 标签：ubuntu, ubuntu-12.04

在进行一些配置以包含`JAVA_HOME`在环境中时，我创建了文件`.bash_profile`，`JAVA_HOME`并使用`PATH`变量对其进行了更新。更新`PATH`变量时，我忘记包含`PATH:`在命令中`EXPORT PATH='PATH:/usr/...`。然后，我运行了命令`source /.bash_profile`，它把一切都搞砸了。现在我在 中也找不到基本命令，并在命令等中`PATH`显示错误。`vi``ls`

我现在希望一切都恢复到以前的状态。请掌舵我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:36:41.980

您可以使用完整路径`/usr/bin/<command>`或`/bin/<command>`通常调用命令。

您也可以交互方式自己导出新的 PATH：

```
export PATH=/bin:/usr/bin 
```

此外，当您编辑您`.bash_profile`想要的`export PATH=$PATH:<new path>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:39:37.840

你可能希望你`.bash_profile`看起来像这样：

```
export PATH="$PATH:/another/path/to/something" 
```

这会将您的新路径附加到现有路径（将`$`变量名替换为其内容）。另外，我建议`~/.bashrc`在每次 bash 调用时使用该文件来加载值。（一定要做好备份）

那么，您是否尝试过打开和关闭它？再次登录后，您`PATH`应该看起来正常。

# .net - 是否可以有一个带有文本和可点击链接的标签控件？

> ID：11757260
> 
> 赞同：0
> 
> 时间：2012-08-01T10:26:08.303
> 
> 标签：.net, winforms, hyperlink, label

我需要显示几行带有格式为链接（即蓝色、下划线等）的 URL 的文本，并在单击时在浏览器中加载适当的站点。

例子：

> 我强烈推荐的第一个站点是[StackOverflow](https://stackoverflow.com/)，另一个是[ServerFault](https://serverfault.com/)。

我知道我可以使用多个`Label`和`LinkLabel`控件，但这是唯一的方法吗？可以通过单个控件来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:31:06.237

您可以为此使用[`LinkLabel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.linklabel.aspx)控件：

> LinkLabel 控件与 Label 控件类似，不同之处在于它可以显示超链接。可以在控件的文本中指定多个超链接。每个超链接可以在应用程序中执行不同的任务。例如，您可以使用超链接在 Microsoft Internet Explorer 中显示网站或加载与应用程序关联的日志文件。

使用起来有点尴尬，例如 IIRC 链接是使用索引和内容范围定义的，这使得可本地化的文本有点复杂，但它确实做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:26:08.303

适当配置`RichTextBox`的控件允许实现这一点 - 更改以下属性的默认值：

*   设置`BorderStyle`为`BorderStyle.None`,
*   设置`ReadOnly`为`true`,
*   设置`ScrollBars`为`RichTextBoxScrollBars.None`.

此时控件看起来像一个标签，但是当鼠标`IBeam`悬停在它上面时光标会变成 ，并且文本框将允许选择文本 - 为避免这种情况，您需要覆盖以下事件：

*   `SelectionChanged`- 取消选择文本，
*   `GotFocus`- 将焦点返回给父母，
*   `MouseEnter`- 将光标改回`Cursors.Arrow`。

# c# - 在 webgrid 中隐藏一列？

> ID：11757264
> 
> 赞同：0
> 
> 时间：2012-08-01T10:26:18.907
> 
> 标签：c#, asp.net-mvc

如何隐藏 webgrid 中的列？我应该能够从网格中访问这些值，但用户不应该能够看到网格中的列。没有条件，但我完全想隐藏那些列

我的专栏是

```
grid.Column(header: "Phone") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:36:09.970

可能最简单的方法是使用一些 CSS/jQuery，其中“TABLECLASS”是表类的名称：

```
table.TABLECLASS th:first-child, table td:first-child {
    display: none;
} 
```

我认为没有办法通过内置的 WebGrid 做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T11:55:51.877

如果要隐藏第二列，例如：

```
 $(document).ready(function()
  {
  $("#yourGridId th:nth-child(2)").hide();
  $("#yourGridId td:nth-child(2)").hide();
  } 
```

# database - Django - 按外键字符串过滤

> ID：11757265
> 
> 赞同：0
> 
> 时间：2012-08-01T10:26:22.463
> 
> 标签：database, django, filter

主表：

```
class example(models.Model):
    name = models.CharField('Item Name', max_length=200)
    color = models.ManyToManyField(Color)
    category = models.ForeignKey(Category)
    image = models.ImageField('Item Image',upload_to="example/images/") 
```

类别表：

```
class Category(models.Model):
    catname = models.CharField('Category Name',max_length=100) 
```

在根据类别过滤示例表时如何查询它。

这没有成功：

```
def list(request, cat):
    c = example.object.filter(category = cat) 
```

我应该改变什么来使这个过滤工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:29:06.183

请参阅[Django 的相关查找文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)：

```
def list(request, cat):
    c = example.objects.filter(category__catname=cat) 
```

# php - 我在 RSS 中的描述标签有错误

> ID：11757266
> 
> 赞同：0
> 
> 时间：2012-08-01T10:26:27.143
> 
> 标签：php, rss

我有这个错误：

> 此页面包含以下错误：
> 
> 第 15 行第 812 列的错误：开始和结束标记不匹配：br 第 0 行和描述 下面是页面的呈现直到第一个错误。

此错误仅在我添加（描述）标记时显示，没有它我没有任何错误并且我需要它，当我查看源代码时，我可以看到描述标记及其内容。
我尝试了很多方法来解决这个问题，但现在我无望了，我正在使用这个类：[rss_generator.inc.php](http://www.phpclasses.org/browse/file/13354.html)

我知道问题不在于班级，因为我尝试了很多班级并且我有同样的错误。

她是浏览器页面源中的输出：

```
<item>
      <title>السودان.. مقتل ستة اشخاص في احتجاجات</title>
      <description>اعلنت متحدثة باسم الحكومة يوم امس، قتل ستة اشخاص خلال احتجاجات على ارتفاع اسعار وسائل النقل في اقليم دارفور في السودان.وذكر شهود عيان في وقت سابق لوكالة فرانس برس ان الشرطة اطلقت الغاز المسيل للدموع على المتظاهرين الذين كانوا موزعين في مجموعات في السوق الرئيسية.واضاف ان المتظاهرين القوا الحجارة على مبان حكومية واحرقوا اطارات في الشوارع.وقالت المتحدثة ان التظاهرة بدأت بسبب رفض الطلاب لاسعار وسائل النقل التي اعلنتها الحكومة.</description>
      <link>http://www.mysite.com</link>
      <pubDate>2012-08-01 13:08:04</pubDate>
      <guid isPermaLink="true">http://newsite.com</guid>
    </item> 
```

请问有什么建议吗？？对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:59:29.407

您可以尝试设置描述`<![CDATA[`并`]]>`避免此错误。

```
<?xml version="1.0" encoding="utf-8" ?>

<rss version="2.0">

    <channel>

        <item>
            <description><![CDATA[ Your description ]]></description>
        </item>

    </channel>

</rss> 
```

所以描述可以包含任何html标签。

希望这会有所帮助。

# xmpp - 创建用于测试的测试 XMPP 客户端

> ID：11757268
> 
> 赞同：1
> 
> 时间：2012-08-01T10:26:34.600
> 
> 标签：xmpp, openfire, smack, xmppframework

我试图在 Java 中创建一个 XMPP 测试客户端，我想插入我的代码，它的行为就像真正的 xmpp 客户端，但会输出消息，例如到日志中。我的目标是这样做，因为我想在现实的环境中或接近的环境中进行测试。

理想情况下，我不想模拟或存根它，因为我希望运行 xmpp 客户端。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:12:09.973

你遇到过[Psi](http://psi-im.org/)吗？它是一个非常强大的跨平台 XMPP 客户端，让您可以在其控制台中查看原始 XMPP 流以及粘贴您自己的 XML 以直接发送。它可以节省您编写自己的基于 Smack 的 XMPP 客户端的时间。也看看我听到的相似的[gajim 。](http://gajim.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:52:31.883

这将帮助您在 xmpp 上向接收者发送消息。请记住，在运行此之前，您必须配置 openfire

```
import org.jivesoftware.smack.Chat;
import org.jivesoftware.smack.ChatManager;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.MessageListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Presence;

public class SenderTest 
{
public static void main(String args[])
{
    //ConnectionConfiguration connConfig = new ConnectionConfiguration("localhost", 5222);
        //connConfig.setSASLAuthenticationEnabled(false);
     ConnectionConfiguration connConfig = new ConnectionConfiguration("localhost", 5222);
     //ConnectionConfiguration connConfig = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
       XMPPConnection connection = new XMPPConnection(connConfig);

        try {
            connection.connect();
            System.out.println("Connected to " + connection.getHost());
        } catch (XMPPException ex) {
            //ex.printStackTrace();
            System.out.println("Failed to connect to " + connection.getHost());
            System.exit(1);
        }
        try {
            connection.login("sender@example.com", "a");
            System.out.println("Logged in as " + connection.getUser());

            Presence presence = new Presence(Presence.Type.available);
            connection.sendPacket(presence);

        } catch (XMPPException ex) {
            //ex.printStackTrace();
            System.out.println("Failed to log in as " + connection.getUser());
            System.exit(1);
        }

    ChatManager chatmanager = connection.getChatManager();
    Chat newChat = chatmanager.createChat("receiver@gmail.com", new MessageListener() {
        public void processMessage(Chat chat, Message message) {
            System.out.println("Received message: " + message);
        }
    });

    try {
        newChat.sendMessage("Howdy!");
        System.out.println("Message Sent...");
    }
    catch (XMPPException e) {
        System.out.println("Error Delivering block");
    }
}

} 
```

# php - 考虑到函数的字符集从 PHP5.2 更改为 PHP5.4

> ID：11757274
> 
> 赞同：5
> 
> 时间：2012-08-01T10:26:51.720
> 
> 标签：php, character-encoding, htmlspecialchars

将文件保存为 ISO-8859-1 并使用命令时

```
echo "test: ".htmlspecialchars("äöü"); 
```

返回将只是“测试：”。

这是因为 htmlspecialchars 的标准字符集在 PHP5.4 中更改为 UTF-8。您需要明确设置字符集：

```
echo "test: ".htmlspecialchars("äöü", ENT_COMPAT | ENT_HTML401, 'ISO-8859-1'); 
```

如果您不设置字符集，PHP5.4 中是否还有其他无法正常工作的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:31:44.297

`htmlentities`似乎是另一个被改变的功能：http: [//de3.php.net/manual/de/migration54.other.php](http://de3.php.net/manual/de/migration54.other.php)

PHP 5.2->5.3 的迁移指南不再提供更改默认字符集的功能：http: [//de3.php.net/manual/de/migration53.php](http://de3.php.net/manual/de/migration53.php)

所以可能只是`htmlspecialchars()`和`htmlentities`

无论如何，我认为这两个绝对应该去“向后不兼容的变化” - 列表[http://de3.php.net/manual/de/migration54.incompatible.php](http://de3.php.net/manual/de/migration54.incompatible.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T13:11:09.447

对于 latin1 中的遗留项目，我们根据以下说明将 htmlspecialchars 替换为自制函数 htmlXspecialchars：[http ://ufive.unibe.ch/?c=php54entitiesfix&q=&l=e](http://ufive.unibe.ch/?c=php54entitiesfix&q=&l=e)

# asp.net - LINQ 动态查询可为空的字段

> ID：11757277
> 
> 赞同：2
> 
> 时间：2012-08-01T10:27:13.623
> 
> 标签：asp.net, vb.net, dynamic-linq

假设一个 SQL 表 'employees'（包含一个名为 'endDate' 的可为空的日期时间字段）

静态 LINQ：

```
dim  result = db.employees.where(function(c) not(c.endDate.hasValue)) 
```

完美运行！

动态 LINQ：

```
dim  result = db.employees.where("it.endDate == null") 
```

引发错误

> 运算符 '=' 与操作数类型 'DateTime?' 不兼容 和“布尔”

现在，由于这个问题，我的项目完全被阻止了。你们中有人已经遇到过这个问题吗？

非常感谢 - zSkk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:29:17.227

SQL 中没有像 ==(double equal) 这样的东西，如果要比较，请使用 =(single equal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:28:01.857

它应该是`it.endDate is null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-05T04:22:05.677

it.endDate 为 null**不起作用**.... LINQ Dynamic 期望**it.endDate == null**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:11:09.797

尝试`IS`

```
Dim  result = db.employees.Where("it.endDate IS null") 
```

# p2p - 如何更新 DHT 中的条目

> ID：11757278
> 
> 赞同：3
> 
> 时间：2012-08-01T10:27:14.027
> 
> 标签：p2p, key-value, datastore, dht, kademlia

我知道（理论上）数据是如何存储在 DHT 中的。但是，我不确定如何更新与密钥关联的数据。这可能吗？此外，如何在 DHT 中处理冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:03:13.847

DHT 简单地定义`put(key,value)`和`get(key)`操作，各种 DHT 算法的核心围绕如何定位负责特定密钥的节点。

这些节点对已经存储的值的传入`put`请求执行的操作很大程度上取决于 DHT 网络的目的和实现，而不是算法本身。

例如，一个节点可能会选择给所有传入的值加上时间戳，并返回带有多个单独的时间戳问题的列表。或者它可能会返回还包含每个值的源地址的列表。或者他们可能只是覆盖存储的值。

如果密钥与值或源 ID 中的签名之间存在某种关系或类似的东西，您可以将足够的智能放入节点中以加密方式验证数据，从而允许它们通过替换为每个密钥保留单个规范值旧数据。

在 bittorrent 的 DHT 的情况下，你不会想要那个。许多不同的 bittorrent 对等点向来自不同源地址的单个密钥宣布它们的存在。因此，节点实际上存储了唯一的`<key,IP,port>`元组，`<IP,port>`可以将其视为值。这意味着它将在每次查找时返回 IP 和端口列表。由于 DHT 将有多个节点负责一个密钥，因此您实际上将有***K***（桶大小）节点响应不同的列表。

TL;DR：它依赖于实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:30:50.053

有可能的。我研究了糕点 dht。可以更改存储在给定密钥下的数据，但糕点开发人员建议不要这样做，因为它可能会产生令人讨厌的副作用，主要是复制存储在其他节点上的已更改数据。（请参阅 freepastrys 主页上的常见问题解答）。

但是，我不确定它会如何影响其他 dhts，例如和弦或挂毯。

关于冲突，我也只有糕点的经验。如果您尝试将数据存储在已使用的键下，则会引发异常。

# android - 无法使用 Maven 编译 android 内部应用程序

> ID：11757285
> 
> 赞同：0
> 
> 时间：2012-08-01T10:27:36.383
> 
> 标签：android, build, maven-3

我正在尝试使用 maven 编译 android ics 4.0.4 Phone 应用程序。通过将所需的内部 jar 添加为系统库，我能够使用 eclipse 正确编译。所需的罐子是：classes-full-debug.jar 来自

```
framework_intermediates
android-common_intermediates
guava_intermediates
ext_intermediates
com.android.phone.common_intermediates
com.android.vcard_intermediates 
```

的构建。

这是的依赖部分`pom.xml`：

```
`
    <dependencies>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>framework_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>android-common_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>com.android.phone.common_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>com.android.vcard_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>ext_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.username.ics</groupId>
            <artifactId>guava_intermediates</artifactId>
            <version>0.1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
` 
```

[为了使用 Maven 进行编译，我使用此处](http://www.mkyong.com/maven/how-to-include-library-manully-into-maven-local-repository/)`mvn install:install-file`所述的命令在本地安装了这些 jar 。现在当我编译时，它说找不到一些内部类。这是日志：

```
`[INFO] /ssd/packages_app_git/username_ics_packages/apps/Phone/src/com/android/phone/INetworkQueryServiceCallback.aidl:19: couldn't find import for class com.android.internal.telephony.OperatorInfo
[ERROR] Error when generating sources.
org.apache.maven.plugin.MojoExecutionException: 
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateAidlFiles(GenerateSourcesMojo.java:451)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:118)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /ssd/packages_app_git/username_ics_packages/apps/Phone && /home/username/Dev/android-sdk-linux/platform-tools/aidl -p/home/username/Dev/android-sdk-linux/platforms/android-15/framework.aidl -I/ssd/packages_app_git/username_ics_packages/apps/Phone/target/generated-sources/extracted-dependencies/src/main/java -I/ssd/packages_app_git/username_ics_packages/apps/Phone/src /ssd/packages_app_git/username_ics_packages/apps/Phone/src/com/android/phone/INetworkQueryServiceCallback.aidl /ssd/packages_app_git/username_ics_packages/apps/Phone/target/generated-sources/aidl/com/android/phone/INetworkQueryServiceCallback.java, Result = 1
    at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:215)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateAidlFiles(GenerateSourcesMojo.java:449)
    ... 22 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
.
.
.
` 
```

显然缺少`com.android.internal.telephony.OperatorInfo`的是 framework_intermediates jar。关于为什么这可能会失败的任何想法？

# android - VideoView中心的全屏视频？

> ID：11757295
> 
> 赞同：0
> 
> 时间：2012-08-01T10:28:06.493
> 
> 标签：android, android-videoview

现在，当我在 VideoView 中播放不成比例的视频时，视频被放置在 VideoView 的左上角...

1.  有没有办法在 VideoView 的中心放置一个 nu 比例视频？

2.  有没有办法裁剪和 nu-proportional 以便它可以缩放到全屏？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:01:57.580

尝试`android:gravity="center"`在布局文件的 XML 中添加到您的 VideoView

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-14T18:54:43.630

videoView 上没有重力，或者至少不再存在。您可以将 WRAP_CONTENT 用于宽度和高度，将其放在 relativeLayout 中并使用 centerInParent。

# ruby-on-rails - 使用 Chef 安装 RoR 堆栈

> ID：11757297
> 
> 赞同：4
> 
> 时间：2012-08-01T10:28:07.627
> 
> 标签：ruby-on-rails, chef-infra, vagrant

我正在尝试安装一个 RoR 堆栈，目前我并不关心使用哪个应用程序服务器。

我想使用 chef-solo & vagrant（开发）或 ec2（生产），但找不到一个好的演练或教程来帮助我开始，而无需花费数天时间学习厨师。

我找不到任何符合这些要求的东西，这似乎有点奇怪，因为这对于任何 RoR 开发人员来说都是一个很棒的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:49:45.210

看看 application_ruby 食谱[https://github.com/opscode-cookbooks/application_ruby](https://github.com/opscode-cookbooks/application_ruby) 除此之外，主厨文档非常好（就像 vagrant 文档一样），您应该能够相对快速地整理出一个简单的部署那些

# python - 如何检查列表列表中的两个元组是否不相同

> ID：11757298
> 
> 赞同：0
> 
> 时间：2012-08-01T10:28:12.413
> 
> 标签：python

```
lt1 = [(1, 1), (1, 1), (1, 5), (1, 4), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2)] 
```

如果上面列表中的 (1,1) 或其他一些元组多次出现，我该如何报告错误

同样对于列表

```
lt22 = [['a', (1,1)], ['a', (1,2)], ['a', (1,2)], ['a', (1,3)], ['b', (2,1)], ['b', (2,2)], ['b', (2,2)]] 
```

如果 ['a', (1,2)] 或任何其他元素多次出现如何报告错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:31:10.967

使用集合和循环；如果您以前看过一个元素，该集合会让您知道：

```
seen = set()
for el in lt1:
    if el in seen:
        raise ValueError, 'More than one %r in your list' % (el,)
    seen.add(el) 
```

请注意，对于第二个列表中的可变元素，您希望首先将它们转换为非可变变体，例如元组：

```
seen = set()
for el in lt22:
    el = tuple(el)
    if el in seen:
        raise ValueError, 'More than one %r in your list' % (el,)
    seen.add(el) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:34:17.493

如果您只是想检测它，而不是确切地看到哪些元素多次出现，您可以这样做：

```
if len(lt1) != len(set(lt1)):
    # Not all unique 
```

在第二个示例中，您需要在转换为集合之前将列表映射到元组：

```
if len(lt22) != len(set(map(tuple, lt22))):
    # Not all unique 
```

如果您想知道每个项目发生了多少次，请使用`collections.Counter`python 2.7 中引入的 ：

```
>>> from collections import Counter
>>> {k: d for k, d in Counter(lt1).items() if d > 1}
{(1, 1): 2} 
```

同样，您必须在使用它之前映射`lt22`到它才能工作。`tuple`

如果您只需要一个多次出现的项目列表，Martijns 解决方案可能是该特定任务最有效的解决方案*。*

# c++ - GMP库函数

> ID：11757300
> 
> 赞同：1
> 
> 时间：2012-08-01T10:28:36.103
> 
> 标签：c++

GMP 库中是否有任何函数可以为我提供任何 GMP 变量的 bitLength？

```
mpz_t temp;
mpz_init(temp);
mpz_set_ui(temp,356678789); 
```

那么如何找到温度的位长呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:45:49.447

也许有更好的方法，但是在阅读[了文档](http://gmplib.org/manual/Integer-Logic-and-Bit-Fiddling.html#Integer-Logic-and-Bit-Fiddling)后，我想出了一个：

```
mp_bitcnt_t msb(mpz_t& m) {
  mpz_t n = m.get_moz_t();
  mp_bitcnt_t remaining = mpz_popcount(n), last = -1;
  while (remaining) {
    --remaining;
    last = mpz_scan1(n, last + 1);
  }
  return last;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:23:56.137

GMP 有一个库函数可以为您执行此操作：

```
size_t mpz_sizeinbase (mpz_t OP, int BASE) 
```

然后`mpz_sizeinbase(temp,2);`是表示 所需的位数`abs(temp)`：

> 返回以给定 BASE 中的位数测量的 OP 大小。BASE 可以在 2 到 62 之间变化。OP 的符号被忽略，只使用绝对值。结果将是精确的或 1 太大。如果 BASE 是 2 的幂，则结果总是准确的。如果 OP 为零，则返回值始终为 1。

# php - 这是否有可能在 wordpress 中获得具有多个父 ID 的类别？

> ID：11757303
> 
> 赞同：0
> 
> 时间：2012-08-01T10:28:44.940
> 
> 标签：php, wordpress

让我们假设，我正在使用这个

```
$categories1=get_categories('orderby=name&order=ASC&hide_empty=0&parent=4'); 
```

在这一行中，它将返回一个属于 parent=4 类别的类别列表。我想要两个父类别的列表，我尝试使用逗号

```
$categories1=get_categories('orderby=name&order=ASC&hide_empty=0&parent=4,8'); 
```

但它返回空数组。那么是否可以从两个父级获取类别列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:32:30.290

文档说它只需要一个整数而不是一个字符串，例如排除或包含您可以列出 id 的位置。您可能必须进行 2 次查询并合并数组。

# c++ - 如何在 C++ 中读取不断增长的文本文件？

> ID：11757304
> 
> 赞同：13
> 
> 时间：2012-08-01T10:28:46.567
> 
> 标签：c++, logging, stl, fstream, seekg

我正在尝试从一个正在增长的文件中读取（类似于什么`tail -F`），但我的代码肯定存在一些问题：

```
string   log, logFile("test.log");
size_t   p = 0;

while(true)
{
    ifstream ifs(logFile.c_str());

    ifs.seekg(p);  //*1

    while(ifs.eof() == false)
    {
        getline(ifs, log);

        cout << log << endl;

        p = ifs.tellg();  //*2
    }

    nanosleep(&pause, NULL);
} 
```

如果没有 //*1 和 //*2 行，日志文件会被正确读取到其末尾，但如果添加新行，则不会发生任何事情。

使用 seekg 和 tellg 我试图存储文件的当前结束位置，这样当我重新打开它时，我可以去那里阅读已添加的内容。

我想知道我的代码有什么问题，以及是否真的有必要为此关闭并重新打开同一个文件。

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T10:36:44.530

循环不正确，因为`eof()`遇到时[`tellg()`](http://en.cppreference.com/w/cpp/io/basic_istream/tellg)返回，并且在调用后`-1`没有立即检查需要的。将循环更改为：`eof()``getline()`

```
while (getline(ifs, log))
{
    cout << log << endl;
    p = ifs.tellg();
} 
```

此外， as`p`声明为`size_t`when `tellg()`return`-1`的值`p`被设置为`4294967295`。这意味着`seekg()`被设置为超出文件末尾。更改`p`to的类型`std::streamoff`并确认调用`seekg()`成功：

```
if (ifs.seekg(p))
{
    while (getline(ifs, log))
    {
        cout << log << endl;
        p = ifs.tellg();
    }
} 
```

* * *

> 如果确实有必要为此关闭并重新打开同一个文件。

不，这不是必需的，但您需要从流中获取状态`clear()`。`eof`以下是已发布代码的更正版本的替代方法：

```
#include <iostream>
#include <string>
#include <fstream>

int main()
{
    std::ifstream ifs("test.log");

    if (ifs.is_open())
    {
        std::string line;
        while (true)
        {
            while (std::getline(ifs, line)) std::cout << line << "\n";
            if (!ifs.eof()) break; // Ensure end of read was EOF.
            ifs.clear();

            // You may want a sleep in here to avoid
            // being a CPU hog.
        }
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-07T05:27:32.637

由于这些答案都没有奏效，我想出了一个有效的答案......

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main()
{
    string   log, logFile("test.txt");
    std::streamoff   p = 0;
    ifstream ifs(logFile.c_str());

    while(true)
    {

        ifs.seekg(p);  //*1
        while (getline(ifs, log))
        {
            cout << log << endl;
            if(ifs.tellg() == -1) p = p + log.size();
            else p = ifs.tellg();
        }
        ifs.clear();

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-13T00:21:34.547

这种方法对我很有效：

```
#include <string>
#include <chrono>
#include <thread>
#include <fstream>
#include <iostream>

int main(int, char* argv[])
{
    // open file passed in on command line (at end of file)
    std::ifstream ifs(argv[1], std::ios::ate);

    if(!ifs.is_open())
    {
        std::cerr << "ERROR: opening log file: " << argv[1] << '\n';
        return 1;
    }

    // remember file position
    std::ios::streampos gpos = ifs.tellg();

    std::string line;
    bool done = false;

    while(!done)
    {
        // try to read line
        if(!std::getline(ifs, line) || ifs.eof())
        {
            // if we fail, clear stream, return to beginning of line
            ifs.clear();
            ifs.seekg(gpos);

            // and wait to try again
            std::this_thread::sleep_for(std::chrono::milliseconds(100));
            continue;
        }

        // remember the position of the next line in case
        // the next read fails
        gpos = ifs.tellg();

        // process line here
        std::cout << "line: " << line << std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T14:42:30.943

这段代码对我有用：

```
struct timespec pause;
pause.tv_sec  = 1;
pause.tv_nsec = 0;

std::ifstream ifs("test.log");
std::streamoff p;

if(ifs.is_open())
{
    std::string line;

    while(true)
    {
        if(ifs.seekg(p))
        {
            while(std::getline(ifs, line))
            {
                std::cout << line << std::endl;
                p = ifs.tellg();
            }
        }

        ifs.clear();

        nanosleep(&pause, NULL);
    }
} 
```

# java - android setOnclickListener onClick 方法非最终变量

> ID：11757306
> 
> 赞同：1
> 
> 时间：2012-08-01T10:28:51.323
> 
> 标签：java, android

我是 Android 编程新手。
我想使用 for 循环来做类似的事情。
这是我的代码：

```
int stubs[] = {R.id.stub_1, R.id.stub_2, R.id.stub_3};
View viewStubs[] = {stub_1, stub_2e, stub_3};
Button buttons[] = {button2, button3, button4};
button2 = (Button)findViewById(R.id.button2);
button3 = (Button)findViewById(R.id.button3);
button4 = (Button)findViewById(R.id.button4);
for(int i=0; i<buttons.length; i++){
            buttons[i].setOnClickListener(new View.OnClickListener() {      
                public void onClick(View v) {
                    if(viewStubs[i] == null){
                        viewStubs[i] = ((ViewStub)findViewById(stubs[i])).inflate();
                    }

                }
            }
        } 
```

但是，onClick方法“i”有错误：
`Cannot refer to a non-final variable i inside an inner class defined in a different method`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:55:04.637

> for(int i = 0; i < something.length; i++){
> 
> ```
>  final int inmutable_index = i;
> 
>  btn.setOnClickListener(new OnClickListener(){...}); 
> ```
> 
> }

现在您可以在 for-loop 内部使用最终变量 inmutable_index 没有任何问题，只需将内部类中 i 变量的所有使用替换为 inmutable_index 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:51:38.083

`viewStubs`数组应该是`this`类的属性（似乎它可能是静态的）。

```
int stubs[] = {R.id.stub_1, R.id.stub_2, R.id.stub_3};
// viewStubs should be a property of this class (maybe static)
viewStubs[] = {stub_1, stub_2, stub_3};

Button buttons[] = {
   (Button)findViewById(R.id.button2),
   (Button)findViewById(R.id.button3),
   (Button)findViewById(R.id.button4)
};

for (int i=0; i<buttons.length; i++) {
    View.OnClickListener listener = new View.OnClickListener() {
        private int viewId;

        private int stubId;

        public void onClick(View v) {
           if (viewStubs[stubId] == null) {
              viewStubs[stubId] = (ViewStub)findViewById(viewId).inflate();
           }
        }

        public View.OnClickListener setIds(int vid, int sid) {
           viewId = vid;
           stubId = sid;
           return this;
        }
    }
    buttons[i].setOnClickListener(listener.setIds(stubs[i], i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:30:54.607

尝试添加`final`之前`int i`。

# jquery - 容器内的 div 在单击时飞过容器

> ID：11757307
> 
> 赞同：0
> 
> 时间：2012-08-01T10:28:54.257
> 
> 标签：jquery, css

我在一个容器中有 4 个 div，就像这样

```
.container{
    width:500px;
    height:450px;
    margin:0 auto;
    border:1px solid blue;  
}
.box1{  
    background-color:#F00;
    width:350px;
    height:450px;
    float:left;
}

.box2{
    background-color:#0F0;
    width:150px;
    height:150px;
    float:right;    
}

<div class="container">
    <div class="box1"></div>
    <div class="box2"></div>
    <div class="box2"></div>
    <div class="box2"></div>
</div> 
```

我希望单击（在容器或任何 div 上），容器内的所有 div 都会飞，然后离开屏幕（像爆炸一样）。我可以用 jQuery 制作动画，但我找不到如何将 div 放在容器外。任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:35:14.420

您可以使用以下`animate`功能：

```
$(".container").click(function()
{
    $(".box1").animate({top: "-200px", left: "-400px" }, 1000);
    $(".box2").animate({top: "-300px", left:  "100px" }, 1000);
    $(".box3").animate({top: "-500px", left: "-200px" }, 1000);
    $(".box4").animate({top:  "100px", left: "-500px" }, 1000);
}); 
```

其中`top`and`left`属性可以是任何你喜欢的东西，但要让其中一个为负数，让它们离开屏幕。

您还可以将它们修改为`bottom`并`right`让它们离开屏幕的另一侧，但您需要一个相当高的值（如 2000）

# javascript - javascript jquery mass delete cookies 有相似的名称吗？

> ID：11757312
> 
> 赞同：0
> 
> 时间：2012-08-01T10:29:09.693
> 
> 标签：javascript, cookies

我正在寻找删除所有具有相似名称“SID12345UID123456789”的网络 cookie 的方法，它们的名称中都有 SID 和 UID。

它可以通过 jquery 或纯 JavaScript 完成感谢任何建议

**更新：** 在其他脚本的基础上工作，我用 indexOf 使它工作但很简单。我知道有些人可以通过正则表达式匹配做得更好。请帮忙

```
var cookies = document.cookie.split(";");
for(var i=0; i < cookies.length; i++) {
    var equals = cookies[i].indexOf("="),
        name = equals > -1 ? cookies[i].substr(0, equals) : cookies[i];

    if ( name.indexOf('SID') > 0 && name.indexOf('UID') > 0 ){
        alert(name);//for test
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:31:24.387

如果您在自己的代码中创建这些，您应该在创建新的之前删除现有的（从而避免问题）。

否则，您可以使用[此页面](https://stackoverflow.com/questions/2144386/javascript-delete-cookie)上的功能。运行一个循环来查找具有该名称的 cookie。如果找到它，请将其删除，然后再查看（直到没有剩余）。

# c# - 在 ListBox 中看不到结果

> ID：11757317
> 
> 赞同：0
> 
> 时间：2012-08-01T10:29:23.333
> 
> 标签：c#, .net, winforms

我有这段 C# 代码：

```
private void btn_getPixels_Click_Click(object sender, EventArgs e)
{
    listBox1.Items.Clear();
    listBox1.Items.Add("Pixel             Color");
    try
    {
        Bitmap img = new Bitmap(pictureBox1.Image);
        Color c;

        for (int i = 0; i < img.Width; i++)
        {
            for (int j = 0; j < img.Height; j++)
            {
                c = img.GetPixel(i, j);
                listBox1.Items.Add(i + "," + j + "   " + c.Name);
            }
        }

        MessageBox.Show("SUCESSFULLY DONE");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

问题是外部循环完成后，我在 listBox1 中看不到任何结果。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:41:53.307

您的代码成功运行（我检查过）。似乎是因为`img.Width`or`img.Height`是大值，并且您的程序仍在工作（因此您看不到结果）。试试这个循环，看看结果：

```
 for (int i = 0; i < 50; i++)
    {
        for (int j = 0; j < 50; j++)
        {
            ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:42:53.993

我对您的代码没有任何问题： ![在此处输入图像描述](../Images/c7e158f08c58ee2f82d130371530bb2c.png)

当然，mb 你必须改变宽度和高度进行测试。

# django - Django：为什么formset中的form.id是空的？

> ID：11757320
> 
> 赞同：1
> 
> 时间：2012-08-01T10:29:30.763
> 
> 标签：django

我遇到了一个奇怪的问题。

我创建了一个常规表单集，一切都按预期工作：

```
deal_formset = formset_factory(DealCForm, extra=0)
...
formset = deal_formset(data) 
```

在模板中，虽然我似乎没有得到当前表单的 id，但我正在迭代它。为什么 form.id 为空？

```
{{ formset.management_form }}
{% if formset %}
  {% for form in formset %}  
   ...
    {{form.id}}   
  {% endfor %}
{% endif %} 
```

# asp.net-mvc - 自定义模型绑定 MVC

> ID：11757322
> 
> 赞同：1
> 
> 时间：2012-08-01T10:29:39.100
> 
> 标签：asp.net-mvc, json, deserialization, model-binding

我正在尝试将 JSON 对象列表传递给控制器​​方法，并自动在控制器中定义和填充正确的类型。

JSON 发布到控制器：

```
{ Type : 'Image', ImageName : 'blah.jpg' },
{ Type : 'Text', Text: 'Hello', Font: 'Some Font' }.. 
```

控制器：

```
public ActionResult SaveCOntent(IList<Item> content) 
```

所以我得到的印象是我需要使用 ModelBinding 将元素转换为正确的类型。我试过关注另一个建议的帖子（http://stackoverflow.com/questions/6484972/viewmodel-with-listbaseclass-and-editor-templates），它在某种程度上起作用..我得到了正确“类型”的列表' 但所有属性都设置为默认值且未填充。

我尝试使用以下内容扩展 DefaultModelBinder：

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var typeName = (string)bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".ItemTypeName").ConvertTo(typeof(string));

        if (typeName == "LINK")
        {

            bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => new Link(), typeof(Link));

            base.BindModel(controllerContext, bindingContext);
        }
        else if (typeName == "IMAGE")
        {
            //bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => new Image(), typeof(Image));
            //base.BindModel(controllerContext, bindingContext);
            return null;

        }

        return base.BindModel(controllerContext, bindingContext);
    } 
```

现在这适用于第一种类型（链接），但是一旦我尝试对 Image 执行相同操作，我就会收到一条错误消息

已添加具有相同密钥的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:43:13.390

结果它工作正常，我的问题是这个对象的基类有一个同名的属性。

# fancybox - 使用 fancybox 2 在现有图库中打开图像

> ID：11757323
> 
> 赞同：0
> 
> 时间：2012-08-01T10:29:43.060
> 
> 标签：fancybox, gallery

我有一个简单的画廊：

```
<ul class="gallery">
    <li><a class="fancybox-buttons" data-fancybox-group="gallery" href="/path/to/image1.jpg"><img src="/path/to/image1_thumb.jpg" /></a></li>
    <li><a class="fancybox-buttons" data-fancybox-group="gallery" href="/path/to/image2.jpg"><img src="/path/to/image3_thumb.jpg" /></a></li>
    <li><a class="fancybox-buttons" data-fancybox-group="gallery" href="/path/to/image3.jpg"><img src="/path/to/image3_thumb.jpg" /></a></li>
</ul> 
```

在我的 HTML 头中，我添加了：

```
<link rel="stylesheet" type="text/css" href="/path/to/jquery.fancybox.css" media="all" />
<link rel="stylesheet" type="text/css" href="/path/to/jquery.fancybox-buttons.css" media="all" />
<link rel="stylesheet" type="text/css" href="/path/to/jquery.fancybox-thumbs.css" media="all" />
<script type="text/javascript" src="/path/to/jquery.min.js"></script>
<script type="text/javascript" src="/path/to/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="/path/to/jquery.fancybox-buttons.js"></script>
<script type="text/javascript" src="/path/to/jquery.fancybox-thumbs.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.fancybox-buttons').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        prevEffect  : 'none',
        nextEffect  : 'none',
        closeBtn    : false,
        helpers     : {
            title : {
                type : 'inside'
            },
            buttons : {},
                thumbs : {
                    width  : 120,
                    height : 80
                }
            },
}); 
```

});

画廊工作正常！

现在我想用链接、包含按钮和拇指打开图库的第一项（索引 0）：

```
<a href="javascript:$.fancybox.open($('.fancybox-buttons'), {index : 0});">show gallery</a> 
```

该链接打开了幻想框，但未显示画廊。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:00:00.260

如果你已经将 fancybox 绑定到一个特定的选择器，你只需要使用`.eq()`方法来触发它来选择`index`你想要的，比如：

```
<a href="javascript:;" onclick="$('.fancybox-buttons').eq(0).click();">show gallery</a> 
```

# android - 如何在 ormlite 中为列设置默认值？

> ID：11757329
> 
> 赞同：4
> 
> 时间：2012-08-01T10:30:01.710
> 
> 标签：android, ormlite

我是 ormlite 新手，我想为某些字段设置默认值，例如

```
@DatabaseField(generatedId = true, canBeNull = false)
int id;
@DatabaseField(canBeNull = true)
String user_type;
@DatabaseField(canBeNull = true)
String username;
@DatabaseField(canBeNull = true)
String password;
@DatabaseField(canBeNull = true)
int id_color; 
```

我必须为用户名字段设置默认值。我该怎么做呢？提前致谢！！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T12:42:06.957

> 我必须为用户名字段设置默认值。我该怎么做呢？

我在[ORMLite 文档](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite.html)上花了很多时间。你应该总是从那里开始。如果您转到文档索引并查找[默认值](http://ormlite.com/docs/default-value)，它会告诉您注释中有一个`defaultValue`字段。`@DatabaseField`这是该[字段的 javadocs](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#defaultValue%28%29)。

像下面这样的东西应该可以工作：

```
@DatabaseField(defaultValue = "unknownName", canBeNull = true)
String username; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T09:25:52.867

但是，当您必须将日期字段初始化为当前日期时，使用默认值是 delecate。

因此，在您的域类的构造函数中（假设为 Person），您应该按如下方式初始化该字段：

```
public Person(String user_type,...,Date enrollement){
    this.user_type=user_type; 
    //....
    // or Calendar.getInstance().getTime()
    this.enrollement = (enrollement == null ) ? new Date() : enrollement;
} 
```

# javascript - IE 中奇怪的 Javascript 错误

> ID：11757332
> 
> 赞同：5
> 
> 时间：2012-08-01T10:30:15.783
> 
> 标签：javascript, jquery, javascript-events

得到一个奇怪的`.stopPropagation()`错误`IE`

我的代码如下，

```
$(document).ready(function(){
    var options = {
    $this: "",
    $menuItems: $(".mainMenu > li"),
    $blueBar: $(".blueBar"),
    $submenuBg: $("#submenuBg"),
    $sortOptions: $(".sortOptions"),
    $submenu: $(".submenu"),
    submenuClass: ".submenu",
    blueBarClass: ".blueBar",
    selectedClass: "selected",
    sortOptionsClass: ".sortOptions",
    subSubmenu: "ul",
    subSubmenuClass: "sub-submenu"      
    };

    $sortBy.toggle(function(){
            options.$this = $(this);
            ddlShow(event, options);
        }, 
        function(){
            options.$this = $(this);
            ddlHide(options);
        }
    );

});

var ddlShow = function(event, options){
    event.stopPropagation();
    options.$this.children(options.sortOptionsClass).show();    
}

var ddlHide = function(options){
options.$this.children(options.sortOptionsClass).hide();
} 
```

收到以下错误

> 对象不支持属性或方法“停止传播”

代码在`Chrome`和中运行良好`FX`。

我该如何解决这个问题？

**注意：**相同的代码在没有`object options`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-27T09:44:26.117

替换 `e.stopPropagation();` 为 `if (e.stopPropagation) e.stopPropagation(); else e.cancelBubble = true;`为我工作

谢谢

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T10:48:56.500

在 IE 中，我们在事件对象的 javascript 中没有可用的 stopPropogation 方法。如果您在 google 中搜索，您会在 ie 和基于 webkit 的浏览器中找到不同的事件对象实现。所以为了纠正 jQuery 提供了一个单一的接口来处理它，所以你应该使用 jQuery 处理事件的方式来停止出现这个错误。

您可以阅读本文以获得更多说明[http://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T10:32:54.540

Have your `toggle` handlers accept the event parameter from jQuery:

```
$sortBy.toggle(function(event){ // ADDED PARAMETER
        options.$this = $(this);
        ddlShow(event, options);
    }, 
```

If you do not do this, then when calling `ddlShow` the argument `event` resolves to `window.event`, which is an object that has not been "normalized" by jQuery for cross-browser consistency.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T10:32:32.497

Here:

```
$sortBy.toggle(function(){  <-- you must get the event object from jquery.
        options.$this = $(this);
        ddlShow(event, options);
    }, 
    function(){
        options.$this = $(this);
        ddlHide(options);
    }
); 
```

Then:

```
$sortBy.toggle(function(event){ ... ddlShow(event, options); }... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T10:38:12.527

JQuery by default passes the event object, you just have to declare it in the function arguments to use it within the function.

```
$sortBy.toggle(function(event){

    // Do your stuff here

}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T10:43:40.667

此外，不建议`event`用作参数名称。

`event`指全局事件对象。定义类似的东西`e`

```
function(e, options){
    e.stopPropagation();
    //do stuff here    
} 
```

# c# - 如何使用实体框架实现 3 层方法？

> ID：11757335
> 
> 赞同：0
> 
> 时间：2012-08-01T10:30:26.287
> 
> 标签：c#, wpf, entity-framework-4, 3-tier

我知道这个问题被问了很多次，但我无法清楚地了解我需要什么。

我有一个 WPF 应用程序，我需要使用 3 层方法重做。

我使用实体框架来创建数据模型并使用 Linq 查询来查询数据。

```
objCustomer = dbContext.Customers.Where(c => c.CustCode == oLoadDtl.CustNo).First(); 
```

我在程序中需要的任何地方都使用 Linq 查询从数据库中获取记录。

所以，我只想知道哪些东西都在 DAL、业务逻辑和 UI 层之下。

另外，我如何将它们分开？

实体数据模型可以视为 DAL 吗？

将实体模型放在单独的类库中是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:49:04.783

最好创建一个名为 DataAccess 的特殊类来封装 EntityFramework-invokes。对于业务逻辑，您可以创建模型类，如果需要，它们将使用 DAL。其他细节取决于您的应用程序应该做什么。例如：

```
//DAL
public class DataAccess
{
    public static void GetCustomerByNumber(int number)
    {
        var objCustomer = dbContext.Customers.Where(c => c.CustCode == number).First();
        return objCustomer;
    }
}

//Models
public class Customer
{
    public string Name { get; set; }
    public int Number { get; set; }

    public Customer GetCustomerByNumber(int number) 
    {
       return DataAccess.GetCustomerByNumber(number);
    }

    public void ChangeProfile(ProfileInfo profile)
    {
       //...
    }
} 
```

主要是解决方案的可扩展性、可重用性和效率。

# c# - 在 FileUpload 的 SaveAs() 和 HttpPostedFile.SaveAs() 中

> ID：11757346
> 
> 赞同：1
> 
> 时间：2012-08-01T10:31:10.520
> 
> 标签：c#, asp.net, file-upload, .net-4.0

`FileUpload1.SaveAs()`和有什么区别`HttpPostedFile.SaveAs()`。我知道两者都用于将文件或文件上传到 Web 服务器，但我想知道更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:55:40.763

这就是 FileUpload 在幕后所做的

```
public void SaveAs(string filename) {
     HttpPostedFile f = PostedFile;
     if (f != null) {
          f.SaveAs(filename);
     }
} 
```

它只是 HttpPostedFile.SaveAs() 的包装器，所以没有区别。

# java - log4j ：当前时间（以毫秒为单位）

> ID：11757348
> 
> 赞同：18
> 
> 时间：2012-08-01T10:31:14.340
> 
> 标签：java, log4j

在`log4j.properties`我可以设置`PatternLayout`例如`("[%p] %c - %m - %d %n")`

是否有任何符号 (%something) 以毫秒为单位返回当前时间？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-01T10:38:40.607

你可以试试这个。

```
log4j.appender.appender_name.layout=org.apache.log4j.PatternLayout
log4j.appender.appender_name.layout.ConversionPattern=%d %p [%c] - %m%n 
```

日期参数`%d`。例如：`%d{HH:mm:ss,SSS}`。

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-01T10:43:22.643

没有完全符合您要求的 Log4J 符号。

`%d`返回具有给定模式的当前日期，由 a `SimpleDateFormat`（您放在括号之间的模式）定义，但不给您以毫秒为单位的时间。

`%r`给出自**执行开始以来的**毫秒数。

实现您想要的一种可能的方法是扩展 Log4j 的行为，它要复杂得多，但如果它是绝对必要的......你去：

[自定义 log4j](http://www.jajakarta.org/log4j/jakarta-log4j-1.1.3/docs/deepExtension.html)（编辑：不再在线？）
[自定义 log4j](https://logging.apache.org/log4j/2.x/manual/extending.html)（编辑：2018 替代方案）

**编辑**：请记住，根据您的评论，如果您需要计算不同机器中执行之间的时间差异，您必须确保机器的时钟是同步的，否则会导致您得出错误的结论。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-01T10:40:27.187

试试这个，

```
 %d{dd MMM yyyy HH:mm:ss,SSS} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-18T12:44:31.013

您应该可以`%d{UNIX_MILLIS}`从[手册](https://logging.apache.org/log4j/2.x/manual/layouts.html)中使用：

> `%d{UNIX}`以秒为单位输出 UNIX 时间。`%d{UNIX_MILLIS}`以毫秒为单位输出 UNIX 时间。UNIX 时间是当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，对于 UNIX，以秒为单位，对于 UNIX_MILLIS，以毫秒为单位。虽然时间单位是毫秒，但粒度取决于操作系统 (Windows)。这是输出事件时间的一种有效方式，因为只发生从 long 到 String 的转换，不涉及日期格式。

# ios - ASIFormDataRequest 请求字符串

> ID：11757352
> 
> 赞同：2
> 
> 时间：2012-08-01T10:31:30.743
> 
> 标签：ios, http, post, asihttprequest

我正在使用 ASIFormDataRequest 在服务器上发送请求。我的问题是 - 我如何检查应该发送到服务器的请求字符串。

例如这样的字符串：

```
client=100001&time=1341271289&sign=99f031b0189aa006ee19ac22e77032a
d&city=2&name=%D0%98%D0%BC%D1%8F&phone=050+111+22+33&email=user
%40mafia.ua&text=%D0%97%D0%B0%D1%87%D0%B5%D0%BC+%D0%B2%D1%8B+
%D1%80%D0%B0%D1%81%D0%BA%D0%BE%D0%B4%D0%B8%D1%80%D0%BE 
```

我的意思是我需要将这个字符串输出到 NSLog

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:51:15.337

找到您的 ASIHTTPRequestConfig.h 文件并查找行

```
 // When set to 1, ASIFormDataRequests will print information about the request body to the console 
    #ifndef DEBUG_FORM_DATA_REQUEST
    #define DEBUG_FORM_DATA_REQUEST 0
    #endif 
```

设置`DEBUG_FORM_DATA_REQUEST 1`，你就完成了！

# math - 如何计算“Sn = 1*1+2* 2+3*3+...+n*n” (N>=1)

> ID：11757354
> 
> 赞同：1
> 
> 时间：2012-08-01T10:31:43.983
> 
> 标签：math, series

如何计算这个系列`Sn=1*1+2*2+3*3+...+n*n where (n>1)`。
请给我提示

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T10:33:49.767

According to [Wikipedia](http://en.wikipedia.org/wiki/Square_pyramidal_number)

```
S = n * (n + 1) * (2*n + 1) / 6 
```

It is easy to prove this using [induction](http://en.wikipedia.org/wiki/Mathematical_induction).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T10:35:26.107

From [this page](http://www.trans4mind.com/personal_development/mathematics/series/sumNaturalSquares.htm), the following formula can be used

![Formula](../Images/778cd090cc6b021fb715586763391ddf.png)

Please post **math** questions on [http://math.stackexchange.com](http://math.stackexchange.com). SO is for programming-related questions.

# ruby-on-rails - Rails: Logging errors and common request logs into different log files

> ID：11757358
> 
> 赞同：3
> 
> 时间：2012-08-01T10:32:14.620
> 
> 标签：ruby-on-rails, logging

here's my question. I wonder if there's any way writing different levels' of logs in to different log files. For example: warnings into warnings.log errors into errors.log

Does rails support doing this in settings? I really didn't find how. Any idea?

Thanks a lot !!

# python - 如何创建迁移以将初始数据插入表中？

> ID：11757361
> 
> 赞同：0
> 
> 时间：2012-08-01T10:32:29.743
> 
> 标签：python, django, django-south

所以这是我的模型：

```
class Config(models.Model):
    config_key = models.CharField(max_length=50)
    config_value = models.CharField(max_length=255) 
```

我创建了一个初始迁移：

```
python manage.py schemamigration myapp --initial 
```

但现在我想在配置表中插入一些初始数据并创建一个插入该数据的迁移（基本上它将在插入 sql 查询上运行）。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:41:27.360

```
python manage.py datamigration myapp name_migration 
```

# php - Is it possible in PHP to call a variable as function?

> ID：11757363
> 
> 赞同：-5
> 
> 时间：2012-08-01T10:32:34.677
> 
> 标签：php, function, variables

> **Possible Duplicate:**
> [Use a variable to define a PHP function](https://stackoverflow.com/questions/7213825/use-a-variable-to-define-a-php-function)
> [Use Variable as Function Name in PHP](https://stackoverflow.com/questions/8466473/use-variable-as-function-name-in-php)

I want to perform a conditional function call but I don't necessarily know what what the function will be, so that would be a long switch.

For example;

```
$userSelection = "calculator"; /* or "stocks" or whatever widget */

$widget->get_widget($userSelection);

public function __construct($userSelection){

/* pseudo code */
call function $userSelection();

}

public function calculator(){
/* Get Calculator */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:35:00.013

Sure there is. This feature is called [variable functions](http://php.net/manual/en/functions.variable-functions.php):

```
$functionName = "strlen";
$length = $$functionName("Hello world!"); 
```

The `$$var(...)` syntax is convenient, but it will only work with free functions. If you want to call a class method this way, you will need to use [`call_user_func`](http://www.php.net/manual/en/function.call-user-func.php) or [`call_user_func_array`](http://www.php.net/manual/en/function.call-user-func-array.php) (these functions can also handle the "free function" case).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:37:07.660

It's pretty simple if that's what you mean.

```
function calculator() {
    echo 'foo';
}

$userSelection = "calculator";

if (function_exists($userSelection)) {
    $userSelection();
} 
```

Or within a class like in your example:

```
 class widget {

        public function __construct($userSelection) {
            echo 'constructed widget<br>';
            if (function_exists($userSelection)) {
                $this->$userSelection();
            }
        }

        public function calculator() {
            echo 'bar';
        }

    }

    $userSelection = "calculator";
    $widget = new widget($userSelection); 
```

Or from outside a class when the function is part of the class.

```
 class widget {

        public function calculator() {
            echo 'bar';
        }

    }

    $widget = new widget();
    $userSelection = "calculator";
    $widget->$userSelection(); 
```

I would work with if/else statements though to determine the function to be called just to be sure that only valid functions are executed (do you sanitize the user selection or do you just get it from a `$_POST`? The latter would be a very bad idea).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:40:03.617

If it's just a function you're after then using this should solve your problems

```
$function = "echo";
$$function "fooBar"; 
```

If it's a class method that you want to keep flexible use [magic method __call()](http://php.net/manual/en/language.oop5.overloading.php) which will allow you to use method names that are not pre-defined.

`__call()` is triggered when invoking inaccessible methods in an object context.

i.e.

```
class Foo {
    public function __call($name, $arguments) {
        echo $name;
    }
}

$foo = new Foo();
$foo->bar(); // will echo "bar" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:35:02.600

Look at the [call-user-func](http://php.net/manual/en/function.call-user-func.php) function. This allows you to call another function, e.g.

```
call_user_func('calculator') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T10:35:35.703

`call_user_func($userSelection);`

[http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T10:35:51.137

看看这个 php 函数：

call_user_func(): [http://php.net/manual/de/function.call-user-func.php](http://php.net/manual/de/function.call-user-func.php)

call_user_func_array(): [http://www.php.net/manual/de/function.call-user-func-array.php](http://www.php.net/manual/de/function.call-user-func-array.php)

create_function(): [http://www.php.net/manual/de/function.create-function.php](http://www.php.net/manual/de/function.create-function.php)

还有一种直接（虽然丑陋）的执行语法：

```
function some_func(args) {...}
$function_name='some_func';
$$function_name(args2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T10:36:37.177

您可以使用`call_user_func()`它，如下所示：

```
$userSelection = "calculator";
call_user_func($userSelection[, $param1, $param2, ...]);
call_user_func_array($userSelection, $params); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T10:41:30.647

PHP 内置函数 'eval' 可以做任何事情，但要小心注入。

```
$var = "somefunction";
eval("$var();"); 
```

[http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-01T10:45:44.227

您可以执行以下操作：

```
$var = 'abc';

switch ($var) {
  case 'abc':
    $result = $var('test param');
    echo $result;
  break;
 default :
    echo 'default';
 break;
}

function abc($data) {
  return $data;
} 
```

# database-design - one to many annotation mapping with composite key

> ID：11757365
> 
> 赞同：0
> 
> 时间：2012-08-01T10:32:42.717
> 
> 标签：database-design, annotations, hibernate-mapping

I have two tables as mentioned below. The point is to have 'n' choice for my question. I have designed to have composite key on the second table instead of having one more column for primary key. With this approach i have two questions.

1.  Is this a good approach in table design? i mean TABLE QUESTIONCHOICE has composite key rather than a primary key.

2.  How do i make one to many mapping in Hibernate between QUESTIONBANK and QUESTIONCHOICE tables using annotations?

Any points and suggestions will be of great help.

Thanks,

-Vijay Selvaraj

```
CREATE TABLE QUESTIONBANK(
    QUESTIONID INT NOT NULL AUTO_INCREMENT(10001, 1),
    QUESTION VARCHAR(200) NOT NULL,
    TOPIC VARCHAR(20) NOT NULL,
    SUBTOPIC VARCHAR(20) NOT NULL,
    COMPLEXITY SMALLINT  NOT NULL DEFAULT 1,
    QUESTIONTYPE SMALLINT  NOT NULL,
    VERSION INT NOT NULL DEFAULT 0,
    CONSTRAINT QUESTIONBANK_PK PRIMARY KEY (QUESTIONID)
);

CREATE TABLE QUESTIONCHOICE(
   QID INT NOT NULL,
   CHOICE VARCHAR(100) NOT NULL,
   CORRECT_CHOICE BOOLEAN, 
   VERSION INT NOT NULL DEFAULT 0,
   CONSTRAINT QUESTIONCHOICE_PK PRIMARY KEY (QID, Choice),
   CONSTRAINT QUESTIONCHOICE_FK FOREIGN KEY (QID) REFERENCES QUESTIONBANK (QUESTIONID)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:52:15.130

让我回答你问题的前半部分......

> 1.  这是表格设计的好方法吗？我的意思是 TABLE QUESTIONCHOICE 具有复合键而不是主键。

这不是一个非此即彼的命题。您有一个键，它恰好是**复合**键和主键。

您的设计是否有效取决于相同的值是否`CHOICE`应该能够存在于多`QUESTIONCHOICE`行中（连接到不同的问题）：

*   如果是，那么您的设计是正确的。
*   如果不是，那是不正确的，你应该把它`CHOICE`单独作为一个键。

是否还要添加代理键是一个平衡问题，这里有[一些标准](https://stackoverflow.com/a/11639189/533120)可以帮助您做出决定。

# asp-classic - 如何防止在ASP经典中按浏览器刷新引起的重新发布

> ID：11757371
> 
> 赞同：1
> 
> 时间：2012-08-01T10:33:15.997
> 
> 标签：asp-classic

我是 ASP 新手。

我有一个 submit.asp 页面 =>thankyou.asp 页面。当按下浏览器刷新时，它会重新加载并重新发送新的数据提交。这导致我收到很多多次提交。

我正在尝试添加它，它的工作，但是当按下离开按钮时仍然没有什么问题，thankyou.asp 页面刷新并加载一个新的条目。

```
 <script type="text/javascript">

      window.onbeforeunload = function() {
      return "You are leaving now! See you again !";
      }

    </script> 
```

我正在寻求有关如何在浏览器刷新时重定向到另一个页面的帮助。

谢谢！

迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:35:25.360

更改它，以便如果用户提交，您处理表单，然后*重定向*回页面本身。这样当用户刷新时，它不会再次提交表单

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:00:12.233

正如 Faisal 所说，重定向回同一页面将阻止表单在刷新时重新提交。

这可以通过以下方式完成：

```
<%
If Request.Form("submit") <> "" Then

    'form processing goes here

    Response.Redirect "thankyou.asp"
End If
%> 
```

其中`"submit"`与属性`Request.Form("submit")`有关`name`

```
<input type="submit" name="submit" value="Submit!" /> 
```

在提交.asp

# objective-c - How to check wired ethernet is connected or not in mac programmatically?

> ID：11757376
> 
> 赞同：1
> 
> 时间：2012-08-01T10:33:47.943
> 
> 标签：objective-c, macos

I am using `[[CWInterface interface] interfacestate]` to check airport is on/off. I need similar code to check ethernet adapter is connected or not.

# algorithm - 如何获取目标连接组件的边界椭圆

> ID：11757377
> 
> 赞同：0
> 
> 时间：2012-08-01T10:33:48.337
> 
> 标签：algorithm, opencv, computer-vision, matlab

假设我们在图像中有一个连接组件，如下图所示：[图像 http://dl.dropbox.com/u/92688392/ellipse.jpg](http://dl.dropbox.com/u/92688392/ellipse.jpg)。

我的问题是如何计算连接组件的边界椭圆（图像中的红色椭圆）。我检查了 MATLAB 函数[regionprops](http://www.mathworks.nl/help/toolbox/images/ref/regionprops.html)，并了解 MATLAB 如何做到这一点。我还注意到 Opencv 具有类似的功能来执行[CBlob::GetEllipse()](http://opencv.willowgarage.com/wiki/cvBlobsLib/#cvBlobsLib-1)。但是，虽然我了解他们是如何通过阅读代码获得结果的，但其背后的基本理论对我来说仍然不清楚。因此，我想知道是否有一些标准算法可以完成这项工作。谢谢！

**编辑：**

根据评论，我重新组织了我的问题：在[图像时刻维基百科](http://en.wikipedia.org/wiki/Image_moment)中，最长轴角的计算公式是

![公式](../Images/c0ed71bb32384680f2018a718432c25c.png)

但是，在 MATLAB 函数[regionprops](http://www.mathworks.nl/help/toolbox/images/ref/regionprops.html)中，代码如下：

```
 % Calculate orientation.
    if (uyy > uxx)
        num = uyy - uxx + sqrt((uyy - uxx)^2 + 4*uxy^2);
        den = 2*uxy;
    else
        num = 2*uxy;
        den = uxx - uyy + sqrt((uxx - uyy)^2 + 4*uxy^2);
    end 
```

此实现与维基百科中的公式不一致。我想知道哪个是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:17:20.620

如果您正在寻找 OpenCV 实现，我可以给您。算法如下：

1.  将图像转换为 1 位（黑白）
2.  查找所有轮廓
3.  创建包含已建立轮廓的所有点的轮廓
4.  计算这个轮廓的凸包
5.  找到包含在上一步轮廓中计算的最小正方形的旋转椭圆（矩形）

这是代码：

```
Mat src = imread("ellipse.jpg"), tmp;
vector<Vec4i> hierarchy;
vector<vector<Point> > contours;
vector<Point> bigContour, hull;
RotatedRect ell;

//step 1
cvtColor(src, tmp, CV_BGR2GRAY);
threshold(tmp, tmp, 100, 255, THRESH_BINARY);

//step 2
findContours(tmp, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

//step 3
for (size_t i=0; i<contours.size(); i++)
{
    for (size_t j=0; j<contours[i].size(); j++)
    {
        bigContour.push_back(contours[i][j]);
    }
}

//step 4
convexHull(bigContour, hull);

//step 5
ell = fitEllipse(hull);

//drawing result
ellipse(src, ell, Scalar(0,0,255), 2);

imshow("result", src);
waitKey(); 
```

这是输入：

![输入](../Images/b3b05988d4739a29f749c53cf3a8b69b.png)

结果如下：

![结果图片](../Images/eb1f773c64eb969e797d416f76ab202d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:43:24.253

我试图找出它背后的算法是什么，以便我可以编写自己的实现。我在[mathworks 的博客文章中](http://blogs.mathworks.com/steve/2010/07/30/visualizing-regionprops-ellipse-measurements/)找到了它。在其中一条评论中，作者说：

> regionprops 计算所讨论对象的二阶矩，然后返回具有相同二阶矩的椭圆的测量值。

后来：

> 使用的方程式来自 Haralick 和 Shapiro，Computer and Robot Vision vol。1，附录 A，Addison-Wesley 1992。我通过构建一个包含长轴长度 = 100 和短轴长度 = 50 的椭圆的图像进行了完整性检查，并且 regionprops 返回了正确的测量值。

我没有那本书，但似乎我需要得到一本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:22:26.040

我不确定 matlab 或 opencv 如何计算椭球。但是如果你对它背后的数学感兴趣，有一种非常好的优化方法，叫做[Löwner-John ellipsoid](http://www.stanford.edu/class/ee364a/lectures/geom.pdf)。[您可以在斯坦福凸优化](http://www.stanford.edu/class/ee364a/lectures.html)课程中找到有关此方法的更多信息。我希望它有帮助...

# android - 使用内部存储保存整数列表

> ID：11757379
> 
> 赞同：0
> 
> 时间：2012-08-01T10:33:50.530
> 
> 标签：android, string, storage, internal

我试图通过将每个整数保存在内部存储中文件的新行中来在我的应用程序中保存整数列表。为了检索它，我逐行读取它并将每个行值（解析为整数）放入我的整数列表中。我知道数据库更适合这种东西，但这应该可以。

我现在尝试了很长一段时间，但它似乎从来没有奏效。尝试阅读时，我总是得到一个空指针异常。我记录了“行”，它给出了它应该具有的值。但

保存一个 id，将其添加为新字符串：

```
private void saveToFavorites(Integer saveFav) {
            String favstr = String.valueOf(saveFav);
            BufferedWriter writer = null;
            try {
              writer = new BufferedWriter(new OutputStreamWriter(openFileOutput("favorites", MODE_WORLD_WRITEABLE)));
              writer.newLine();
              writer.append((favstr));
              System.out.println(" added to favs :"+ saveFav);
            } catch (Exception e) {
                    e.printStackTrace();
            } finally {
              if (writer != null) {
                try {
                    writer.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
              }
            }
        } 
```

以及阅读方法：

```
 @SuppressWarnings("null")
    private List<Integer> readFileFromInternalStorage() {
            List<Integer> favs = null;
            BufferedReader input = null;
            try {
              input = new BufferedReader(new InputStreamReader(openFileInput("favorites")));
              String line;
              while ((line = input.readLine()) != null) {
                  System.out.println("readFileFromInternalStorage line value: "+ line );
                 favs.add(Integer.parseInt(line));
              }
            } catch (Exception e) {
                e.printStackTrace();
                System.out.println("readFileFromInternalStorage: fail" );
            } finally {
            if (input != null) {
              try {
                input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
              }
            }
            return favs;
        } 
```

这是在其他活动中。我认为它会工作，但它显然没有。回读时，logline: System.out.println("readFileFromInternalStorage line value: "+ line ); 显示 line 的值等于最后添加的 id 和一个空行，而不是其他行。所以逐行保存失败。同样，当将其解析为整数时，它会失败，这很奇怪，因为它只是一个数字。

```
08-01 12:29:54.190: I/System.out(1540): readFileFromInternalStorage line value: 
08-01 12:29:54.190: I/System.out(1540): readFileFromInternalStorage line value: 301 
```

有谁知道我需要改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:47:25.497

因为我建议序列`Integer`化`Serializable`整个`List`：

```
private void saveList(List<Integer> list) {
try {
            File file = Environment.getExternalStorageDirectory();
            File filename = new File(file, "yourfilename");
            fos = new FileOutputStream(filename);
            out = new ObjectOutputStream(fos);
            out.writeObject(list);
            out.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
}

private void readList()
{

    try {
                File file = Environment.getExternalStorageDirectory();
                File filename = new File(file, "yourfilename");
                fis = new FileInputStream(filename);
                in = new ObjectInputStream(fis);
                List<Integer> list= (List<Integer>) in.readObject();
                in.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            } catch (ClassNotFoundException ex) {
                ex.printStackTrace();
            }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:40:00.570

试试这个它可以帮助你：- 1 - 字符串 saveFav = 包含所有整数，这种形式 I1+"/"I2+"/"I3;

2：-然后将其保存到文件中

```
 private void saveToFavorites(String saveFav) { 
       //right here your code for write into file saveFave string
 } 
```

在读取文件读取字符串和拆分（“/”）。它为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:46:09.667

这是一些工作代码，可以读取和写入手机内部存储器的整数。您可以创建一个数组或整数列表，基本上只是对其进行迭代，直到所有整数都保存/读取到内存/从内存中读取：

这是将 int 写入内存的代码：

```
public void writePrimitiveInternalMemory(String filename, int value) {
        SharedPreferences preferences = this.getPreferences(Activity.MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putInt(filename, value);
        editor.commit();

    } 
```

这是从内存中读取的代码：

```
public int readPrimitiveInternalMemoryInteger(String filename) {
        SharedPreferences preferences = this.getPreferences(Activity.MODE_PRIVATE);
        return preferences.getInt(filename, 0);

    } 
```

我希望这可以帮助你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:50:17.107

您没有分配整数列表...

```
List<Integer> favs = null; 
```

分配一个新的arraylist..

```
List<Integer> favs = new ArrayList<Integer>(); 
```

# python - unindent does not match any outer indentation level

> ID：11757380
> 
> 赞同：0
> 
> 时间：2012-08-01T10:33:54.243
> 
> 标签：python, indentation

> **Possible Duplicate:**
> [IndentationError: unindent does not match any outer indentation level](https://stackoverflow.com/questions/492387/indentationerror-unindent-does-not-match-any-outer-indentation-level)

i wrote the following python code but i can't see what is the cause of the problem but i get the following error message:

def post(self): ^ IndentationError: unindent does not match any outer indentation level

```
class MainHandler(webapp2.RequestHandler):
def get(self):
    self.response.out.write(form)

def post(self):
    self.response.out.write("valid")

app = webapp2.WSGIApplication([('/', MainHandler)],debug=True) 
```

any help will be appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:37:23.353

Your code example is riddled with TAB characters. If you are mixing tabs with spaces, the error is almost a given.

Use the [python `tabnanny`](http://docs.python.org/library/tabnanny.html) to clean up your source-code, switch your editor to use spaces only, then fix your indentations:

```
python -m tabnanny -v path/to/your/code.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:37:22.923

You've mixed up spaces and tabs. Run the script in `python -tt` to verify.

# javascript - Excel Web Query not seeing the table on a page

> ID：11757382
> 
> 赞同：0
> 
> 时间：2012-08-01T10:33:58.383
> 
> 标签：javascript, html, css, excel

i have written a web page , with divs, tables CSS etc , and one of the outputs to the page is indended that the results from a query are displayed in a table on the page , and then pulled by an excel web query to the users desktop.

i fully understand the web query system , what i dont understand is why when trying to pass the query string , the page comes up , but NONE of the tables on my page are being selectable for the excel web query.

i am certain its something in my CSS thats stopping it , but i cant find out what tags etc could cause this , any advice is greatly welcome.

Peter

examples here [http://sdrv.ms/NTSH6E](http://sdrv.ms/NTSH6E)

# java - 布尔引用

> ID：11757390
> 
> 赞同：0
> 
> 时间：2012-08-01T10:34:51.513
> 
> 标签：java, arrays, boolean

我正在处理`txt`包含 4 个布尔特征的文件行。我想将一个 boolean[] 传递给一个方法，并引用它来自哪一行（哪一行由该行上的另一个变量定义，该变量是增量的，但不一定是有序的）。

有没有办法创建一个数组，某种类型，引用行变量，然后是该行的 4 个布尔值？

如果不直接，我可以使用 0 和 1 分别代表 false 和 true，例如。`array[i][0] = 0;` 然后在接收方法中将其转换为布尔值：

```
boolean charone = (array[i][0] == 1) ? true : false; 
```

编辑：特征表示线上的坐标是否最大为整个`txt`文件描述的符号。

```
Pattern patternx = Pattern.compile("(?<=(<))((-)*?(\\d+))(?=(,))"); 
Pattern patterny = Pattern.compile("(?<=(,))((-)*?(\\d+))(?=(>))");

for(String pin : pins){
        boolean sidemax = false;
        boolean sidemin = false;
        boolean top = false;
        boolean bottom = false;
        int i = Integer.parseInt(pin.split(" ")[1]);
        Matcher matcherx = patternx.matcher(pin);
        Matcher matchery = patterny.matcher(pin);

        while (matcherx.find()){

            String numb = matcherx.group(0);        
            int x = Integer.parseInt(numb);

            if (x >= maxx) {
                sidemax = true;
            }
            if (x <= minx){
                sidemin = true;
            }
        }
        while (matchery.find()){

            String numb = matchery.group(0);
            int y = Integer.parseInt(numb);

            if (y >= maxy) {
                top = true;
            }
            if (y <= miny) {
                bottom = true;
            } 
        } 
```

有没有办法`sidemax, sidemin, top, and bottom`通过将它们直接添加到传入的每一行的数组中来实现另一种方法，这样数组将是二维的，顶层是参考，底层是 4 个布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:44:36.840

Java 是一种面向对象的语言。创建类来表示您的数据：

```
public class Line {
    private int lineNumber;
    private boolean value1;
    private boolean value2;
    private boolean value3;
    private boolean value4;

    // constructor, getters, other potential useful methods omitted
} 
```

读取文件时，创建上述`Line`类的实例，并将这些实例传递给需要 4 个布尔值和它们来自的行号的方法。

# javascript - How to create a blur / shadow in raphael 2.X?

> ID：11757397
> 
> 赞同：0
> 
> 时间：2012-08-01T10:35:17.463
> 
> 标签：javascript, raphael, blur

I was wondering if there's a way to create a blur in raphael.

I've had a google around and looked on stack overflow but all of the solutions lead to 404's on github and/or are for a outdated version of raphael.

Does anyone know of a current way of adding blurs and shadows to raphael?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:19:20.247

这也可能对您有用：[http ://raphaeljs.com/reference.html#Element.glow](http://raphaeljs.com/reference.html#Element.glow)

```
var paper = new Raphael(document.getElementById('canvas'), 500, 500);

var circle = paper.circle(100, 100, 80);
circle.attr({
    fill: "#f00"
});
circle.glow({
    offsetx: 2,
    offsety: 2
});​ 
```

# google-analytics - Cross domain tracking works separately in each domain(not linked)

> ID：11757402
> 
> 赞同：-1
> 
> 时间：2012-08-01T10:35:48.947
> 
> 标签：google-analytics

Using Google Analytics, I am trying to track initiated from external site(siteA.com). At siteA.com, open new window to go main site(siteB.com).

So I put setDomainName("none"), trackPageview, and getLinkerUrl(URL_TO_SiteB) on siteA.com. And open URL returned from getLinkerUrl, open new window to go siteB.com And also put setDomainName("none"), setAllowLinker(true), trackPageview on siteB.com.

But, I think something wrong with this configuration.

At navigation summary, there is no previous page or next page at page tracked from siteA.com. And strange page(another page of siteB.com) is recorded as previous page of siteB.com.

Is there any missing part of configuration?

In short, site A > site B linking is not working(there is no page having site A as previous page and there are strange pages used as previous page of site B).

I am struggling with this issue about a month. I eagerly waiting for your help.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:00:40.387

您使用的代码用于跟踪 iframe。

`<a>`要在到 siteB 的链接中设置跨域跟踪，请添加

`onclick="_gaq.push(['_link', this.href]); return false;"`

在此处完成详细信息 [https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains)

# sql - 子查询在 sql server 中返回超过 1 个值

> ID：11757405
> 
> 赞同：1
> 
> 时间：2012-08-01T10:35:58.903
> 
> 标签：sql, sql-server

```
 SELECT * FROM TableC
     INNER JOIN TableB ON TableB.mid=TableC.mid
     INNER JOIN TableA ON TableA.userid=(
                                         SELECT distinct userid 
                                           FROM TableB) 
```

子查询返回超过 1 个值。

**医学_硕士**

```
 MedicalID MedicalName
       1(pk)     abc
       2         xyx
       3         pqr 
```

**Child_Medical_Master**

```
 ChildMID MedicalID Station Name
       1(pk)    1(fk)     bnb     mfk
       2        1         def     rwr
       3        2         re      wrw 
```

**医疗_访问**

```
 VTID  PMID  RFMID age
       1(pk) 2(fk) 1      34
       2     2     3      45
       3     3     1      45
       4     1     2      44
       5     2     2      76 
```

**医学_研究**

```
 UID   VTID  ChildMID SMID   Date  time 
       1(pk) 1(fk) 1        1      kk    jdj
       2     2     3        2      kdf   lfl
       6     3     2        3      rgr   rtr 
```

**博士_硕士**

```
 RFMID  Doctorname
       1(pk)  mr.john
       2      mr.jack
       3      mr.jim 
```

**PAtient_Master**

```
 PMID   Firstname LastNAme
       1(pk)  df         ere
       2      rwe        rwer
       3      rwr        fwr 
```

**学习_硕士**

```
 SMID   MedicalID Description Duration
       1(pk)  1(fk)     fdf         efe
       2      1         ddf         dfdf
       3      2         df          ef 
```

我想要表中的这些列应该如何成为我的正确查询？

```
UID,PMID,FIRSTNAME,LASTNAME,AGE,MEDICALNAME,DESCRIPTION,STATION,DATE,DoctorName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:37:45.187

Assuming you don't want to do a normal join and there is a purpose to the subquery over a normal join:

You either need to limit what is coming into the subquery like this:

```
select * from TableC
inner join TableB on TableB.mid=TableC.mid
inner join TableA on TableA.userid=(select distinct userid from TableB where userid=3) 
```

or change your main query like this:

```
select * from TableC
inner join TableB on TableB.mid=TableC.mid
inner join TableA on TableA.userid in (select distinct userid from TableB) 
```

Okay, got the code and made a [sqlfiddle](http://sqlfiddle.com/#!2/e8b61/4) for you to see it working.

```
select
    medical_study.uid,
    patient_master.PMID,
    patient_master.firstname,
    patient_master.surname,
    medical_visit.age,
    medical_master.medicalName,
    study_master.descripto,
    child_medical_master.station,
    medical_study.dater,
    doctor_master.doctorname
from
    medical_master
    join child_medical_master
        on medical_master.medicalID=child_medical_master.medicalID
    join medical_study
        on child_medical_master.childMID=medical_study.childMID
    join medical_visit
        on medical_study.VTID=medical_visit.VTID
    join doctor_master
        on medical_visit.RFMID=doctor_master.RFMID
    join patient_master
        on medical_visit.PMID=patient_master.PMID
    join study_master
        on medical_master.medicalID=study_master.medicalID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:38:59.130

try this:

```
 select * from TableC
    inner join TableB on TableB.mid=TableC.mid
    inner join TableA on TableA.userid=TableB.userid 
```

# regex - 匹配双 '&&' 字符或双 '||' 在正则表达式中

> ID：11757406
> 
> 赞同：1
> 
> 时间：2012-08-01T10:36:00.530
> 
> 标签：regex

`&{2}`可以匹配双'&&'字符（换句话说 - 一个`AND`运算符），一切都如我所料。但是，`[&{2}|\|{2}]`将匹配单个 '&' 或 '|' 字符。我该怎么办？为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:40:24.697

`[]`是一个字符组，即*“该组中的任何字符”。*特殊字符在其中没有任何或不同的含义。使用常规组：

```
(&{2}|\|{2}) 
```

如果您希望它不捕获：

```
(?:&{2}|\|{2}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:43:03.417

你有没有尝试过

```
/([&|])\1/

()   - capture
[&|] - character class which matches a single & or |
\1   - and match what has been captured 
```

匹配和加倍 & 或 |

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:37:56.223

`[]`在这种情况下不要使用。

```
&{2}|\|{2} 
```

使用示例：

```
$ perl -ne 'print if /&{2}|\|{2}/' <<EOF
> &&
> ||
> |
> EOF
&&
|| 
```

正如你所看到的`&&`，`||`匹配和`|`不匹配。

# c# - 当有两个点数组时找到两条线的交点

> ID：11757407
> 
> 赞同：0
> 
> 时间：2012-08-01T10:36:03.417
> 
> 标签：c#

```
PointF[] points1;
PointF[] points2;
_Gd.DrawLines(new Pen(new SolidBrush(Color.Purple)),points1);
_Gd.DrawLines(new Pen(new SolidBrush(Color.Green)),points2); 
```

上面的代码用来画两条线，我想找到上面两条线的所有交点，我怎么在 C# 中做到这一点？谢谢！

# iphone - Cocos2d 中的游戏中心成就

> ID：11757409
> 
> 赞同：2
> 
> 时间：2012-08-01T10:36:12.640
> 
> 标签：iphone, cocos2d-iphone, game-center, achievements

在我的应用程序中，我能够成功添加游戏中心成就。但我无法重置这些成就。我尝试了Apple的游戏套件教程中描述的方法，但是一旦在游戏中心添加了成就，我仍然无法重置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:47:26.233

您从 Apple 的 GameKit 教程中尝试过什么？

无论您使用什么（UIKit，Cocos2d），这都应该有效：

找到您的身份验证方法并调用重置成就方法：即

```
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {

[GKAchievement resetAchievementsWithCompletionHandler:^(NSError *error) {
            NSLog(@"achievements reset");
        }];

}]; 
```

完成后不要忘记评论重置方法，否则每次登录游戏中心都会重置成就。让我知道事情的后续。

# sql-server - 在假定的等效数据库中查找具有不同类型的列

> ID：11757410
> 
> 赞同：1
> 
> 时间：2012-08-01T10:36:20.770
> 
> 标签：sql-server

我们的每个客户都有一个包含自己数据的数据库。每个数据库都应该具有完全相同的结构。如何找到数据类型已更改的列，其中表名和列名相同但数据类型不同？是否有可以执行此操作的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:40:42.137

拍摄模式的快照并使用[REDGATE 的 SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=sqlcompare&gclid=CPudiK2exrECFURfTAodKGcAwg)实用程序。

或将模式导出为文本并使用[BeyondCompare](http://www.scootersoftware.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:38:00.180

[Atlantis SchemaInspector](http://www.atlantis-interactive.co.uk/products/schemainspector/)是实现此目的的好工具。

**编辑：** 如果你想要 SQL 查询，你需要在一个查询中同时使用两个数据库。因此数据库必须位于一个 sql server 实例上，或者 sql server 实例必须可用作链接服务器。

询问：

```
SELECT
    *
/* source database >>> */
FROM [SourceDatabase].[sys].[schemas] AS S_A
INNER JOIN [SourceDatabase].[sys].[objects] AS O_A
    ON [O_A].[schema_id] = [S_A].[schema_id]
INNER JOIN [SourceDatabase].[sys].[columns] AS C_A
    ON [C_A].[object_id] = [O_A].[object_id]
/* <<< source database */
/* target database >>> */
LEFT JOIN [TargetDatabase].[sys].[schemas] AS S_B
    ON [S_B].[name] = [S_A].[name]
LEFT JOIN [TargetDatabase].[sys].[objects] AS O_B
    ON [O_B].[schema_id] = [S_B].[schema_id]
        AND [O_B].[name] = [O_A].[name]
LEFT JOIN [TargetDatabase].[sys].[columns] AS C_B
    ON [C_B].[object_id] = [O_B].[object_id]
        AND [C_B].[name] = [C_A].[name]
/* <<< target database */
WHERE [C_B].[column_id] IS NULL
    OR [C_B].[system_type_id] <> [C_A].[system_type_id] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:45:41.027

如果两个数据库都可以恢复到同一台服务器，您可以比较两组系统目录视图以确定差异：

```
SELECT 
    TableName = t.name,
    ColumnName = c.name,
    TypeName = ty.name,
    TableName2 = t2.name,
    ColumnName2 = c2.name,
    TypeName2 = ty2.name
FROM DB1.sys.columns c
INNER JOIN DB1.sys.tables t ON c.object_id = t.object_id
INNER JOIN DB1.sys.types ty ON c.system_type_id = ty.system_type_id
INNER JOIN DB2.sys.tables t2 ON t.name = t2.Name
INNER JOIN DB2.sys.columns c2 ON c2.object_id = t2.object_id AND c.name = c2.name
INNER JOIN DB2.sys.types ty2 ON c2.system_type_id = ty2.system_type_id
WHERE
    c.system_type_id <> c2.system_type_id 
```

当然，您可以从`sys.columns`目录视图中添加更多列，例如`precision`，`scale`对于类似的类型`DECIMAL(18,2)`，或`max_length`对于基于字符串的类型（如`VARCHAR(50)`等） - 根据需要调整此基本查询

# javascript - 如何使用来自其他控件的值刷新 CGridView 控件

> ID：11757414
> 
> 赞同：1
> 
> 时间：2012-08-01T10:36:30.493
> 
> 标签：javascript, web-applications, yii

我在我的应用程序中设置了一个 CGridView 小部件。它显示用户帐户列表。我还有另外两个基本上过滤掉用户的下拉列表。我的问题是我不能使用下拉列表中的值来过滤掉用户。我真正需要的是根据下拉列表中的选定值刷新用户帐户列表。

我应该如何使用 Javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:08:59.817

是的，您使用 Javascript 来执行此操作。CGridView 的[jquery.yiigridview.js](https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/assets/gridview/jquery.yiigridview.js#L222 "https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/assets/gridview/jquery.yiigridview.js#L222")具有`$('#id-of-grid').yiiGridView('update', options)`可用于此类事情的功能：

```
function(){// in your function
    $('#id-of-grid').yiiGridView('update', {data: {value_of_list: $(this).val()}});
} 
```

`value_of_list`这将使用下拉列表中选择的值调用呈现此视图的 url 。

**编辑：**

`$('#id-of-grid').yiiGridView('update', options)`签名表明您可以指定要更新的网格，以及要发送的特定选项。在上面我只发送的示例中`data`，我还可以使用`url`选项指定将数据发送到哪个 url。完整的选项列表可以在我上面指定的链接中看到。

# jdbc - jdbc中的可调用语句

> ID：11757416
> 
> 赞同：0
> 
> 时间：2012-08-01T10:36:35.027
> 
> 标签：jdbc, callable-statement

嗨，我使用可调用语句编写了一个 jdbc 程序，并且我还安装了连接器 j。我也在 mysql 中创建了一个存储过程。我还安装了以下驱动程序

C:\Program Files\MySQL\mysql-connector-java-5.1.21 (3)\mysql-connector-java-5.1.21 但我仍然收到错误

java.sql.SQLException：找不到适合 jdbc:mysql:localhost 的驱动程序

java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T10:56:23.317

如果您是通过 Eclipse 执行此操作，那么您必须将 mysql 所需的 jar 文件放入项目结构的 lib 文件夹中，或者使用 Eclipse 的构建路径。如果您正在执行此本地系统，则必须设置`path(Environmental variable)`.

# mysql - 在不删除原始数据库的情况下从数据库中删除重复项的问题

> ID：11757425
> 
> 赞同：0
> 
> 时间：2012-08-01T10:37:06.590
> 
> 标签：mysql

我整天都被困在这上面，终于找到了一个脚本，它可以删除除原始数据之外的所有数据，无论如何，我做了必要的更改以允许它与我的代码一起工作，不幸的是它吐出了一个语法错误。我已经看了大约 2 个小时了，我只是看不到它。无论如何，我使用的是 MySQL DB，并且是我使用的脚本。

```
DELETE * 
FROM music u
JOIN (

SELECT melody, chorus1, chorus2, MIN( id ) AS minid
FROM music
GROUP BY melody, chorus1, chorus2
HAVING (
COUNT( * ) >1
)
) AS dupusers ON u.melody = dupusers.melody
AND u.chorus1 = dupusers.chorus1
AND u.chorus2 = dupusers.chorus2
ORDER BY u.melody, u.chorus1, u.chorus2
WHERE u.id <> minid 
```

我收到以下错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '* FROM music u JOIN ( SELECT melody, chorus1, chorus2, MIN(id) AS minid ' 附近使用正确的语法

这是..

```
* 
FROM music u
JOIN (

SELECT melody, chorus1, chorus2, MIN( id ) AS minid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:40:29.747

这是因为您有语法错误，`DELETE *` 并且您在`WHERE`子句之后使用了`ORDER BY`子句。无需在无限制`ORDER BY`的查询中使用子句尝试：`DELETE`

```
DELETE u
FROM music u
    INNER JOIN (
        SELECT melody, chorus1, chorus2, MIN( id ) AS minid
        FROM music
        GROUP BY melody, chorus1, chorus2
        HAVING COUNT(*) >1
    ) dupusers
    ON u.melody = dupusers.melody
        AND u.chorus1 = dupusers.chorus1
        AND u.chorus2 = dupusers.chorus2
WHERE u.id <> minid; 
```

另一种删除重复项的简单方法是在表上添加唯一索引，请参见[此处](https://stackoverflow.com/questions/11557757/cleaning-up-db-of-redundant-data/11557812#11557812)。

```
ALTER IGNORE TABLE music ADD UNIQUE KEY ix1(melody, chorus1, chorus2); 
```

# javascript - How do I export the content of a page as either jpg or pdf with Highcharts and scrollable data?

> ID：11757430
> 
> 赞同：2
> 
> 时间：2012-08-01T10:37:24.883
> 
> 标签：javascript, pdf, export, highcharts, jpeg

I have a page that contains some data and some Highcharts. Highcharts has some fantastic functionality for exporting the chart as an image. How do I include the contents of a table or div to be exported with the chart so that there is one big image or pdf that contains the chart and the data? What I have tried so far, none of which is ideal, is:

html2canvas, seems like the best solution but does not seem to include Highcarts. Maybe I'm doing something wrong as the documentation doesn't seem great and I have been unable to find any good examples from Goggling that include the charts.

The second best solution that I have come across is including the data in the Highcharts. Example of this is located: [http://jsfiddle.net/highcharts/z9zXM/](http://jsfiddle.net/highcharts/z9zXM/) This could work, but would destroy the current formatting on the page. In other words, it would be an ugly solution :).

The other solutions that I found are to do with screenshots, but this would not capture the full page.

The ideal solution that may or may not exist is, using JavaScript in someway to combine a div or table with the Highchart into a pdf or jpg, is this possible and if it is, where would I find an example?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:33:36.397

将本机 Highcharts 导出功能与 html2canvas 结合起来怎么样？

首先，您将 Highcharts 导出到文件中。我猜想知道你必须调用的 URL 来获取图像就足够了。

其次，您使用标准的 html2canvas 魔法来生成没有图表的文档。（您可能需要使用图表指定 div 的宽度和高度，以便它不会在导出的文件中折叠）。

最后，您使用 gd 或 imagemagick 将一个粘贴到另一个上并返回给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-19T12:33:01.133

这很简单，您可以使用此代码来捕获您必须在 html2canvas 中定义 div id 的特定区域的屏幕截图。我在这里使用 2 div-:

div id="car"
div id ="chartContainer"
如果你只想捕获汽车然后使用**car**我在这里只捕获汽车 你可以更改**chartContainer**以捕获图形 **html2canvas($( '#car')** 复制并粘贴此代码

```
<html>
    <head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script>
    window.onload = function () {

    var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,
        theme: "light2",
        title:{
            text: "Simple Line Chart"
        },
        axisY:{
            includeZero: false
        },
        data: [{        
            type: "line",       
            dataPoints: [
                { y: 450 },
                { y: 414},
                { y: 520, indexLabel: "highest",markerColor: "red", markerType: "triangle" },
                { y: 460 },
                { y: 450 },
                { y: 500 },
                { y: 480 },
                { y: 480 },
                { y: 410 , indexLabel: "lowest",markerColor: "DarkSlateGrey", markerType: "cross" },
                { y: 500 },
                { y: 480 },
                { y: 510 }

            ]
        }]
    });
    chart.render();

    }
</script>
</head>

<body bgcolor="black">
<div id="wholebody">  
<a href="javascript:genScreenshotgraph()"><button style="background:aqua; cursor:pointer">Get Screenshot of Cars onl </button> </a>

<div id="car" align="center">
    <i class="fa fa-car" style="font-size:70px;color:red;"></i>
    <i class="fa fa-car" style="font-size:60px;color:red;"></i>
    <i class="fa fa-car" style="font-size:50px;color:red;"></i>
    <i class="fa fa-car" style="font-size:20px;color:red;"></i>
    <i class="fa fa-car" style="font-size:50px;color:red;"></i>
    <i class="fa fa-car" style="font-size:60px;color:red;"></i>
    <i class="fa fa-car" style="font-size:70px;color:red;"></i>
</div>
<br>
<div id="chartContainer" style="height: 370px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

<div id="box1">
</div>
</div>>
</body>

<script>

function genScreenshotgraph() 
{
    html2canvas($('#car'), {

      onrendered: function(canvas) {

        var imgData = canvas.toDataURL("image/jpeg");
        var pdf = new jsPDF();
        pdf.addImage(imgData, 'JPEG', 0, 0, -180, -180);
        pdf.save("download.pdf");

      }
     });

}

</script>

</html>
```

# r - 读取 R 函数的源代码，包括 C

> ID：11757435
> 
> 赞同：4
> 
> 时间：2012-08-01T10:37:44.243
> 
> 标签：r

假设我对 R 函数的工作原理感到好奇，比如[HoltWinters](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/HoltWinters.html)。我输入`HoltWinters`了它，它显示了该函数的 R 源代码。经检查，源代码显示该函数是第二个函数的包装器：

```
 final.fit <- hw(alpha, beta, gamma) 
```

据推测，重要的工作发生在函数 hw 中。但是，我在任何地方都找不到这个函数来读取它的源代码

```
> hw
Error: object 'hw' not found 
```

如何阅读源代码？

* * *

编辑：好的，所以现在我已经阅读`hw`了，我看到它是一个包装器`C_HoltWinters`。*我*怎么读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T11:06:25.720

正如您成功找到的那样，有几行

```
hw <- function(alpha, beta, gamma)
    .C(C_HoltWinters,
    .... 
```

在HoltWinters 函数的[源代码中。](http://svn.r-project.org/R/trunk/src/library/stats/R/HoltWinters.R)这意味着我们需要查看 C 文件：您可以在[此处](http://cran.r-project.org/sources.html)找到 R 的所有源代码，或者直接前往[此处](http://svn.r-project.org/R/trunk/src/library/stats/src/HoltWinters.c)。

# math - 找到一个大阶乘数的除数之和？

> ID：11757439
> 
> 赞同：4
> 
> 时间：2012-08-01T10:37:48.483
> 
> 标签：math, factorial

我试图想出一种有效的方法来列出一个大阶乘的所有除数。比方说1000！用蛮力是完全不可能的。有没有有效的方法？我需要处理它们，即找到它们的总和以应对编程挑战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:59:34.533

1.  找到每个数字 <= 1000 的素数分解。我会将其存储为素数 -> 幂的字典。例如，对于像 24 这样的单个数字，`{2: 3, 3: 1}`因为 24 是`2**3 * 3**1`。
2.  求 的素因数分解`1000!`。这是数字 <= 1000 的字典的组合，通过对每个键（素数）的所有值求和来组合。
3.  然后，您可以使用[此页面上的公式 14，](http://mathworld.wolfram.com/DivisorFunction.html)正如 @AakashM 已经说过的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T18:58:25.820

以下是有效解决方案的步骤：

1.  嗯！可以表示为：- n! = (a1^p1) (a2^p2)x...(ak^pk)。

    其中 ak 是小于 n 的素数除数，而 pk 是可以除 n! 的最高幂。

2.  通过筛子找到素数和最高幂可以很容易地找到：

    ```
    countofpower =  [n/a] + [n/a^2] + [n/a^3] +...... or   `  while (n)
    {
      n/ = a;
      ans += n
    } 
    ```

3.  因素计数 =`(ans1 +1)*(ans2 +1)*....(ansk +1)`

4.  在计算这最后一步之后是总和：

    ```
    SUM = product of all (pow(ak,pk+1)-1)/(ak-1);
    ex = 4! 
    4! = 2^3 * 3^1;
    count of factors = (3+1)*(1+1) = 8 (1,2,3,4,6,8,12,24)
    sum = ( 1 + 2 + 4 + 8)*(1 + 3) = 60. 
    ```

# android - Android DDMS 加载的 GPX 文件自行暂停

> ID：11757440
> 
> 赞同：0
> 
> 时间：2012-08-01T10:37:54.207
> 
> 标签：android, android-emulator, gpx

我正在将 GPX 文件加载到我的模拟器中。

**问题**

该文件有 7226 个点（在 Point Count 列中如此说明），因此文件被正确加载。但是，当我按下播放按钮时，问题就发生了，它只读取了大约 4 点，然后才自行暂停。这不是我想要的功能。

**问题**

如何让它在不暂停自身的情况下运行整个文件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:35:26.643

只是为了回答我的研究中的问题以及那些自己寻找解决方案的人。

`DDMS`即使使用您可以在网上找到的不同类型的转换器，我也无法通过 加载整个 GPX 文件。

最终的解决方案是拥有一组将 GPX 文件解码为一组位置的类，然后对它们做任何你想做的事情。

我希望这会有所帮助，即使它只是确认您认为它不起作用（好吧我无法解决！）:)

# mysql - 在 MySQL 存储函数中声明整数变量时出错

> ID：11757441
> 
> 赞同：8
> 
> 时间：2012-08-01T10:37:55.233
> 
> 标签：mysql, function, variables, integer, procedure

尝试在 MySQL 中声明新的存储函数时出现错误（服务器版本：5.5.13）

基本上，我有一个大表，它根据字符串的开始方式对字符串进行分类。我的函数接受一个字符串（来自用户输入），然后通过在数据库中搜索分类来告诉您该字符串的分类。它有点像 LIKE 查询，除了相反，因为它是包含完整字符串的用户输入，而数据库包含正在搜索的字符串。希望这是有道理的！

它背后的概念和逻辑工作正常，因为我已经在 PHP 中编写/开发了它并且它工作得很好，但是当试图将它转换为存储函数时，我从 MySQL 中得到一个错误。该函数的代码是：

```
delimiter $

DROP FUNCTION IF EXISTS get_string_class$
CREATE FUNCTION get_string_class(mystring VARCHAR(15))

RETURNS VARCHAR(15)
READS SQL DATA
BEGIN

DECLARE i INT;
SET i = 2;

DECLARE mystringlength INT;
SET mystringlength = LENGTH(mystring);

DECLARE segment VARCHAR(15);
DECLARE String_Class VARCHAR(15);
SET String_Class = NULL;

WHILE i <= mystringlength DO

   SET segment = LEFT(mystring, i);

   SET String_Class = (SELECT String_Class FROM string_class_list WHERE String_Begins = segment);

   IF SELECT FOUND_ROWS() = 1 THEN
      RETURN String_Class
   END IF;

   i = i + 1;

END WHILE;

RETURN String_Class;

END$
delimiter ; 
```

我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
to your MySQL server version for the right syntax to use near 
'DECLARE mystringlength INT; SET mystringlength = LENGTH(mystring);
DECLARE segm' at line 10 
```

我已经做了很多尝试，试图找出我哪里出错了。我什至完全去掉了循环来测试它，但仍然得到同样的错误。有谁知道我在声明该 INT 变量时做错了什么？这可能是非常基本的东西......！

首先十分感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T10:42:21.800

有一些语法错误 -

其中之一是 -*所有声明必须在 BEGIN...END 子句的开头*。

```
DELIMITER $

DROP FUNCTION IF EXISTS get_string_class$
CREATE FUNCTION get_string_class(mystring VARCHAR(15))

RETURNS VARCHAR(15)
READS SQL DATA
BEGIN

DECLARE i INT;
DECLARE segment VARCHAR(15);
DECLARE String_Class VARCHAR(15);
DECLARE mystringlength INT;

SET i = 2;
SET mystringlength = LENGTH(mystring);
SET String_Class = NULL;

WHILE i <= mystringlength DO

   SET segment = LEFT(mystring, i);

   SET String_Class = (SELECT String_Class FROM string_class_list WHERE String_Begins = segment);

   IF (SELECT FOUND_ROWS()) = 1 THEN
      RETURN String_Class;
   END IF;

   SET i = i + 1;

END WHILE;

RETURN String_Class;

END$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T10:44:09.840

`DECLARE`存储过程中的部分必须在顶部，`SET`然后其他语句开始。

# c# - 为特定区域创建 S3 存储桶

> ID：11757443
> 
> 赞同：4
> 
> 时间：2012-08-01T10:37:57.467
> 
> 标签：c#, amazon-s3, region, bucket

如果我按如下方式创建 S3 存储桶：

```
 AmazonS3Config amazonS3Config = new AmazonS3Config
    {
        ServiceURL = "s3-eu-west-1.amazonaws.com"
    };
    AmazonS3Client amazonS3Client = new AmazonS3Client(myAccessKeyId, 
        mySecretAccessKey, amazonS3Config)

    PutBucketRequest request = new PutBucketRequest
    {
        BucketName = bucket.Name,
        BucketRegion = S3Region.EU
    };
    amazonS3Client.PutBucket(request); 
```

如您所见，我已明确指定在欧盟地区创建我的存储桶，
但是当我转到 AWS 资源管理器时，我可以看到我的存储桶在所有地区都可用。

如果我的存储桶总是在所有区域中复制，那么指定存储桶区域有什么意义？
谁能澄清一下？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T23:24:56.043

大概您指的是[AWS Toolkit for Eclipse](http://aws.amazon.com/eclipse/)或[AWS Toolkit for Microsoft Visual Studio的 AWS Explorer 视图中的](http://aws.amazon.com/visualstudio/)[Amazon S3](http://aws.amazon.com/s3/)节点？

Amazon S3 在 AWS 服务中是独一无二的，它以各种方式处理其区域（可能只是一个遗留问题，因为它是早期产品之一），直到今天，这也反映在[AWS 管理控制台中：](http://aws.amazon.com/console/)

此处相关的主要设计方面是**S3 存储桶名称必须是全球唯一的**，无论您在哪个区域创建它。这可能就是为什么 AWS 决定在一个视图中显示所有存储桶，而不是像所有其他服务那样按区域分隔，这无疑会非常令人困惑（并且随着存储桶数量的增加也会变得笨拙）。

**但是**，存储桶仍会在您指定的区域中创建，只是由于*AWS Explorers*和*AWS 管理控制台*中的统一表示，它并不明显。您可以通过打开存储桶的属性视图来查看存储桶的区域（通过工具包中的“*属性*”上下文菜单或控制台中的“*属性*”按钮）。

* * *

## 更新

我刚刚意识到[AWS Toolkit for Eclipse](http://aws.amazon.com/eclipse/)实际上缺少这样一个 S3 存储桶的属性窗口，这不仅严重限制了它的功能（例如，因为您不能更改高级存储桶选项），而且必须被认为是一个显着的可用性根据您的问题，错误。

考虑到可用的视图空间和所需的完全简单的 API 操作，这实际上非常令人费解——我通常每天都使用 Visual Studio 和 Eclipse，并且长期以来一直切换到[AWS Toolkit for Microsoft Visual Studio](http://aws.amazon.com/visualstudio/)，因为它被认为是性能优势和更大更深的服务覆盖范围，但还没有意识到这个真正令人惊讶的遗漏。

因此，您暂时需要*借助 AWS 管理控制台*或*AWS Toolkit for Microsoft Visual Studio*来直观地检查/验证您的区域。

# css - “文本溢出：省略号”不是有效的 CSS 吗？

> ID：11757446
> 
> 赞同：7
> 
> 时间：2012-08-01T10:38:07.457
> 
> 标签：css, w3c-validation

[此代码在通过W3C CSS Validator](http://jigsaw.w3.org/css-validator)运行时会触发错误：

```
p{
    text-overflow: ellipsis;
} 
```

我得到：

```
行代码上下文错误/警告
2 p 解析错误 [空字符串]

```

它只是验证器中的一个错误，还是我错过了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T10:45:29.697

这是[CSS 验证器中的一个错误](https://www.w3.org/Bugs/Public/show_bug.cgi?id=16250)，已被报告。`text-overflow:ellipsis`是一个有效的规则，但是不幸的是 W3C CSS 验证器容易出错（参见[错误列表](https://www.w3.org/Bugs/Public/buglist.cgi?product=CSSValidator)）。

但是，请注意，当前的工作草案将一些`text-overflow`值列为[风险特征](http://www.w3.org/TR/2012/WD-css3-ui-20120117/#atrisk)：

> 工作组已确定以下功能在退出 CR 时有可能从 CSS 基本用户界面模块级别 3 中删除。如果实施者希望看到这些特性保留在本规范中，则敦促他们实现这些特性。所有其他特性要么在规范参考中定义（例如 CSS 2.1 [CSS21] 或选择器 [SELECT]），要么被认为具有两个或多个实现，因此不会在不返回最后调用的情况下被丢弃。
> 
> *   [...]
> *   `text-overflow`适当的价值：`<string>`
> *   `text-overflow`属性 2 值语法和定义。

虽然这不会影响`ellipsis`值，但它可能是验证器中错误的来源：

> 解析错误 [空字符串]

### 参考

*   W3C：CSS 基本用户界面模块级别 3 (CSS3 UI)：(WD-20120117)
    *   [有风险的功能](http://www.w3.org/TR/2012/WD-css3-ui-20120117/#atrisk)
    *   [8.2\. 溢出省略号：“文本溢出”属性](http://www.w3.org/TR/2012/WD-css3-ui-20120117/#text-overflow)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:40:36.613

它基于[MDN 的参考](https://developer.mozilla.org/en/CSS/text-overflow)有效，该参考还链接到规范：[http ://dev.w3.org/csswg/css3-ui/#text-overflow](http://dev.w3.org/csswg/css3-ui/#text-overflow)

出于好奇，我通过验证器运行了自己的网站之一。我注意到它列出了一些我不会考虑错误的东西，例如正确前缀的供应商扩展和数据 URI。

# javascript - 即使用户正在导航到其他页面，也会在一段时间后打开弹出窗口

> ID：11757450
> 
> 赞同：1
> 
> 时间：2012-08-01T10:38:13.727
> 
> 标签：javascript, jquery, cookies, popup

我需要一些有关此 javascript 代码的帮助。

我有这个代码：

```
jQuery(document).ready(function(){
    if (document.cookie.indexOf('visited=true') == -1) {
    var fifteenDays = 1000*60*60*24*1;
    var expires = new Date((new Date()).valueOf() + fifteenDays);
    document.cookie = "visited=true;expires=" + expires.toUTCString();
    window.setTimeout(
function() {
    jQuery.colorbox({href:"/popup.htm", open:true, iframe:false, innerWidth:600, innerHeight:490}); 
        },

30000 )}}); 
```

它应该在 30 秒后打开一个弹出窗口，每天一次。问题是它在 30 秒后打开的弹出窗口停留在页面上。即使客户端导航到其他页面，有没有办法让它在 30 秒后打开？因此，如果用户在一个页面上停留 15 秒，而在另一个页面上停留 15 秒，则会收到弹出窗口。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:40:55.380

**是的。**

但不可能使用`document.cookie`.

您需要使用服务器端 cookie 或 HTML 本地存储/会话存储。

像，`Response.SetCookie("Visited", true)`。我不知道你用什么做后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:43:03.947

没门。页面卸载后，您将无法执行任何其他操作。您需要使用服务器上的其他资源（cookies、会话等）来检查窗口是否已经显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:44:03.493

这里要克服的基本问题是在页面之间传递“状态”。由于您已经在示例中使用了 cookie，因此我们将使用它。您需要使用用户在网站上的时间（最初为 0）设置会话 cookie。然后，您需要每隔一段时间（可能每 5 秒）“轮询”一次 cookie 以更新站点总时间计数，并将其读回。如果是 30 秒或更长时间，请触发弹出窗口。

所以不要使用：

```
setTimeout(function() {
    // open alert box
}, 30000); 
```

你会做这样的事情：

```
setTimeout(function() {
    // Increment 'time-on-site' cookie value by 5000
    // Then, if 'time-on-site' cookie value >= 30000, fire popup
}, 5000); 
```

**更新** 当然，这需要与服务器进行更多的来回操作，因为您需要每 5 秒传达一次更新的值。

# c++ - 等量的构造函数和析构函数调用是否确保没有内存泄漏？

> ID：11757456
> 
> 赞同：1
> 
> 时间：2012-08-01T10:38:42.830
> 
> 标签：c++, memory-management, memory-leaks

假设我们有一个名为的类`memoryCounter`，它试图捕获由`MyClass`类引起的内存泄漏。

```
class memoryCounter
{
public:
    static int MyClassCount;
};
int memoryCounter::MyClassCount = 0; 
```

`MyClass`假设我们在构造函数和析构函数（以及它拥有的任何其他构造函数，还假设我们不修改`MyClassCount`构造函数/析构函数之外的任何其他地方）的构造函数和析构函数中放入以下行：

```
MyClass()
{
    memoryCounter::MyClassCount++;
}
virtual ~MyClass()
{
    memoryCounter::MyClassCount--;
} 
```

现在，我们是否可以*绝对确定*如果`memoryCounter::MyClassCount`包含零，那么到目前为止我们分配的所有内存都已释放并且没有泄漏？或者是否存在变量包含零的情况，但会分配我们没有释放的内存（请考虑“MyClass”也是基类或派生类的情况）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:40:25.177

不，你不能。也可以有其他构造函数（至少是复制构造函数）。你不算他们。

你也不能`static`这么简单地计算变量的破坏，因为它们在`main`退出后被破坏

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:05:05.473

如果计数为零，则没有 的实例`MyClass`。无论`MyClass`对象是完整对象、基类子对象还是成员子对象，它都适用。这并不一定意味着没有内存泄漏，因为`MyClass`它本身可能会泄漏内存。

需要注意的是默认生成的复制构造函数。你说假设“它拥有的任何其他构造函数”会增加你的全局计数，但是很容易错过代码中没有出现的构造函数。您可以在这里应用三个规则 - 您定义了一个析构函数，因此您应该定义了一个复制构造函数。请注意，该规则还告诉您定义一个复制赋值运算符，在这种情况下不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:09:05.540

谁说只有构造函数才能分配内存？如果某些非构造函数成员函数（静态或非静态）分配内存，而析构函数没有正确清理，则您已经泄漏了该内存。

所以，答案是**否定**的。您已经计算了通过标准构造函数创建的类实例。不多也不少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:53:53.220

您假设 MyClass （以及从它派生的任何内容）都正确编写。特别是，不会检测到此泄漏：

```
class BadClass : private MyClass
{
  public:
     BadClass() { int *x = new int(5); }
} 
```

您的计数器所做的是告诉您每个构造都有一个破坏，这意味着没有人泄漏任何“MyClass”对象。

但这与没有内存泄漏不同。

# sharepoint - Sharepoint 2010 网站的奇怪登录问题

> ID：11757458
> 
> 赞同：0
> 
> 时间：2012-08-01T10:38:47.230
> 
> 标签：sharepoint, authentication, sharepoint-2010

我面临一个 Intranet sharepoint 2010 站点的奇怪身份验证问题。

当站点所有者组的用户尝试通过此 URL 访问站点时， **http://machine name:1111/**会弹出一个 windows 凭据，即使用户提供了正确的登录详细信息，他也无法登录。但是当用户尝试访问此 URL，**http://machine name:1111/SitePages/Home.aspx**他能够成功登录。

本站采用经典认证方式。

请让我知道，这种奇怪行为的原因可能是什么。

问候奈米什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:13:50.693

现在解决了。

物理目录应该对每个人都具有“读取”权限。就我而言，文件夹 1111 已删除此权限。我已经赋予了上述权利，并且现在可以正常工作。

问候

# ruby-on-rails - how can i fetch the tr of this structure in nokogiri of in html response

> ID：11757459
> 
> 赞同：-2
> 
> 时间：2012-08-01T10:38:47.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri

how can i fetch the tr which mention in code of this structure in nokogiri of in html response

```
<html>
  <body>
    <table>

    </table>

  <table>
    <tbody>
      <tr>
        <td>
          <table>
            <tr></tr>
              <tr><td> wanna this text as output.</td></tr>
          </table>
         </td>
      </tr>
    </tbody>
   </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:29:43.847

有多种方法可以访问该文本，例如：

```
html = Nokogiri::HTML my_html_string
row_text = html.at('//table[2]/tbody/tr/td/table/tr[2]').text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:38:14.330

我更喜欢使用 CSS 访问器，因为它们更宽容。使用您的 HTML 示例，我将使用：

```
irb(main):026:0> doc.search('table table tr').last.text
" wanna this text as output." 
```

或者，XPATH 访问器是：

```
irb(main):042:0> doc.search('//table//table//tr').last.text
" wanna this text as output." 
```

您正在寻找包含多行的嵌套表。你想要最后一行。

每当您在浏览器中查看 HTML 并看到`<table><tbody>`组合时，请务必小心。浏览器会进行大量代码修复，当您直接检索 HTML 并将其传递给解析器时，这可能会导致标签不存在。而且，您在浏览器输出中看到的那些不存在的标签会在您添加它们时抛弃您的 CSS 或 XPath 访问权限。特别是，`<tbody>`这是一个真正常见的问题。

# wordpress - how to populate widgets on sidebar on theme activation

> ID：11757461
> 
> 赞同：3
> 
> 时间：2012-08-01T10:39:03.923
> 
> 标签：wordpress, widget, sidebar

What I am trying to do is pre-populate the sidebar widget area with some default widgets on theme activation.

```
if ( ! dynamic_sidebar( 'sidebar' ) ) : 
```

does add the widgets but it doesnot show up in the sidebar of widgets section and

```
if ( is_active_sidebar( 'sidebar' ) ) { 
```

this function doesnot work if the widgets are not loaded in the sidebar widgetized area.

I know it is possible but I am just out of idea. I googled but didnot find any solutions. Thank you for any help in advance.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T11:46:43.840

如果您使用[`after_switch_theme`](http://adambrown.info/p/wp_hooks/hook/after_switch_theme)钩子，但您需要设置小部件的那一刻，您的回答并不清楚。

要激活小部件，我建议将其直接写入数据库，`get_option('sidebars_widgets')`其中应该提供一个数组，并使用`update_option('sidebars_widgets', $new_activated_widgets)`.

这应该可以帮助您入门。

```
/**
 * set new widgets on theme activate
 * @param string $old_theme
 * @param WP_Theme $WP_theme
 */
function set_default_theme_widgets ($old_theme, $WP_theme = null) {
    // check if the new theme is your theme
    // figure it out
    var_dump($WP_theme);

    // the name is (probably) the slug/id
    $new_active_widgets = array (
        'sidebar-name' => array (
            'widget-name-1',
            'widget-name-2',
            'widget-name-3',
        ),
        'footer-sidebar' => array(
            'widget-name-1',
            'widget-name-2',
            'widget-name-3',
        )
    );

    // save new widgets to DB
    update_option('sidebars_widgets', $new_active_widgets);
}
add_action('after_switch_theme', 'set_default_theme_widgets', 10, 2); 
```

经过测试，只需将其粘贴到`functions.php`您的主题中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T13:01:21.917

如果其他人需要知道如何将多个默认小部件（不同的实例）同时添加到多个侧边栏，以下代码会将小部件添加到页面和管理小部件选项卡下。我意识到这可能对除了我之外的所有人来说都是显而易见的。

所以基于janw和kcssm的努力：

```
function add_theme_widgets($old_theme, $WP_theme = null) {

    $activate = array(
        'right-sidebar' => array(
            'recent-posts-1', 
            'categories-1', 
            'archives-1'
        ), 
        'footer-sidebar' => array(
            'recent-posts-2', 
            'categories-2', 
            'archives-2'
        )
    );

    /* the default titles will appear */
    update_option('widget_recent-posts', array(
        1 => array('title' => ''), 
        2 => array('title' => '')));

    update_option('widget_categories', array(
        1 => array('title' => ''), 
        2 => array('title' => '')));

    update_option('widget_archives', array(
        1 => array('title' => ''), 
        2 => array('title' => '')));

    update_option('sidebars_widgets',  $activate);
}

add_action('after_switch_theme', 'add_theme_widgets', 10, 2); 
```

但是，这将删除任何其他设置，因此请小心操作！

# android - move from one scene to another in cocos 2D_android

> ID：11757466
> 
> 赞同：1
> 
> 时间：2012-08-01T10:39:34.173
> 
> 标签：android, cocos2d-iphone, cocos2d-android

I want to make a game with levels. That means in the first level the user have to kill some targets; if he wins he passes to the next level with new targets and new background.

I use [this game tutorial](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/).

I have these classes ---->

```
 package game.wael.ialhi;

     import org.cocos2d.layers.CCScene;
     import org.cocos2d.nodes.CCDirector;
     import org.cocos2d.opengl.CCGLSurfaceView;
     import org.cocos2d.sound.SoundEngine;
     import android.app.Activity;
     import android.content.Intent;
     import android.os.Bundle;
     import android.view.Window;
     import android.view.WindowManager;
     import android.widget.Toast;

     public class SimpleGame extends Activity{
     protected CCGLSurfaceView _glSurfaceView;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,
            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    _glSurfaceView = new CCGLSurfaceView(this);

    setContentView(_glSurfaceView);
}

@Override
public void onStart()
{
    super.onStart();

    CCDirector.sharedDirector().attachInView(_glSurfaceView);

     CCDirector.sharedDirector().setDeviceOrientation(CCDirector
            .kCCDeviceOrientationLandscapeLeft);

    CCDirector.sharedDirector().setDisplayFPS(true);

    CCDirector.sharedDirector().setAnimationInterval(1.0f / 60.0f);

    CCScene scene = GameLayer.scene();
    CCDirector.sharedDirector().runWithScene(scene);
}

@Override
public void onPause()
{
    super.onPause();

    CCDirector.sharedDirector().pause();
    SoundEngine.sharedEngine().stopSound();
}

@Override
public void onResume()
{
    super.onResume();

    CCDirector.sharedDirector().resume();
}

@Override
public void onStop()
{
    super.onStop();

    CCDirector.sharedDirector().end();
    SoundEngine.sharedEngine().stopSound();
}
    } 
```

I made some modification in this GameLayer class. In the update method I added these lines so that when the user wins he pass to the next scene (GameLayer1) ---->

```
 CCScene scene=GameLayer1.scene();                           
   CCDirector.sharedDirector().runWithScene(scene); 
```

and this the complete class ------>

```
 package game.wael.ialhi;

    public class GameLayer extends CCColorLayer{
protected ArrayList<CCSprite> _targets;
protected ArrayList<CCSprite> _projectiles;
protected int _projectilesDestroyed;
public static int nb;

public static CCScene scene()
{
    CCScene scene = CCScene.node();
    CCColorLayer layer = new GameLayer(ccColor4B.ccc4(255, 255, 255, 255));

    scene.addChild(layer);

    return scene;
}

protected GameLayer(ccColor4B color)
{
    super(color);

    this.setIsTouchEnabled(true);

    _targets = new ArrayList<CCSprite>();
    _projectiles = new ArrayList<CCSprite>();
    _projectilesDestroyed = 0;

    CGSize winSize = CCDirector.sharedDirector().displaySize();
    CCSprite player = CCSprite.sprite("Player.png");

    player.setPosition(CGPoint.ccp(player.getContentSize().width / 2.0f,
            winSize.height / 2.0f));

    addChild(player);

    // Handle sound
    Context context = CCDirector.sharedDirector().getActivity();
    SoundEngine.sharedEngine().preloadEffect(context, R.raw.pew_pew_lei);
    SoundEngine.sharedEngine().playSound(context, R.raw.background_music_aac,
            true);

    this.schedule("gameLogic", 1.0f);
    this.schedule("update");
}

@Override
public boolean ccTouchesEnded(MotionEvent event)
{
    // Choose one of the touches to work with
    CGPoint location =
            CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), 
            event.getY()));

    // Set up initial location of projectile
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    CCSprite projectile = CCSprite.sprite("Projectile.png");

    projectile.setPosition(20, winSize.height / 2.0f);

    // Determine offset of location to projectile
    int offX = (int)(location.x - projectile.getPosition().x);
    int offY = (int)(location.y - projectile.getPosition().y);

    // Bail out if we are shooting down or backwards
    if (offX <= 0)
        return true;

    // Ok to add now - we've double checked position
    addChild(projectile);

    projectile.setTag(2);
    _projectiles.add(projectile);

    // Determine where we wish to shoot the projectile to
    int realX = (int)(winSize.width + (projectile.getContentSize().width /
             2.0f));
    float ratio = (float)offY / (float)offX;
    int realY = (int)((realX * ratio) + projectile.getPosition().y);
    CGPoint realDest = CGPoint.ccp(realX, realY);

    // Determine the length of how far we're shooting
    int offRealX = (int)(realX - projectile.getPosition().x);
    int offRealY = (int)(realY - projectile.getPosition().y);
    float length = (float)Math.sqrt((offRealX * offRealX) + (offRealY * 
             offRealY));
    float velocity = 480.0f / 1.0f; // 480 pixels / 1 sec
    float realMoveDuration = length / velocity;

    // Move projectile to actual endpoint
    projectile.runAction(CCSequence.actions(
            CCMoveTo.action(realMoveDuration, realDest),
            CCCallFuncN.action(this, "spriteMoveFinished")));

    // Pew!
    Context context = CCDirector.sharedDirector().getActivity();
    SoundEngine.sharedEngine().playEffect(context, R.raw.pew_pew_lei);

    return true;
}

public void gameLogic(float dt)
{
    addTarget();
}

public void update(float dt)
{
    ArrayList<CCSprite> projectilesToDelete = new ArrayList<CCSprite>();

    for (CCSprite projectile : _projectiles)
    {
        CGRect projectileRect = CGRect.make(projectile.getPosition().x 
              - (projectile.getContentSize().width / 2.0f),
                                            projectile.getPosition().y - (projectile.getContentSize().height / 2.0f),
                                            projectile.getContentSize().width,
                                            projectile.getContentSize().height);

        ArrayList<CCSprite> targetsToDelete = new ArrayList<CCSprite>();

        for (CCSprite target : _targets)
        {
            CGRect targetRect = CGRect.make(target.getPosition().x -
                 (target.getContentSize().width),
                                            target.getPosition().y - (target.getContentSize().height),
                                            target.getContentSize().width,
                                            target.getContentSize().height);

            if (CGRect.intersects(projectileRect, targetRect))
                targetsToDelete.add(target);
        }

        for (CCSprite target : targetsToDelete)
        {
            _targets.remove(target);
            removeChild(target, true);
        }

        if (targetsToDelete.size() > 0)
            projectilesToDelete.add(projectile);
    }
    int k=0;
    for (CCSprite projectile : projectilesToDelete)
    {
        _projectiles.remove(projectile);
        removeChild(projectile, true);

        if (++_projectilesDestroyed > 4)
        {
            _projectilesDestroyed = 0;
            CCDirector.sharedDirector().replaceScene(GameOverLayer.
                            scene("You Win!",255,255,255,255));
            nb=1;
            /*Thread timer = new Thread() {
                @Override
                public void run() {
                    try {
                        sleep(2000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    } finally {

           // i add these lignes to pass to the next scene if the user wins     
    CCScene scene = GameLayer1.scene();
    CCDirector.sharedDirector().runWithScene(scene);

                    }
                }
            };
            timer.start();*/

        }
    }

}

protected void addTarget()
{
    Random rand = new Random();
    CCSprite target = CCSprite.sprite("Target.png");

    // Determine where to spawn the target along the Y axis
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    int minY = (int)(target.getContentSize().height / 2.0f);
    int maxY = (int)(winSize.height - target.getContentSize().height / 2.0f);
    int rangeY = maxY - minY;
    int actualY = rand.nextInt(rangeY) + minY;

    // Create the target slightly off-screen along the right edge,
    // and along a random position along the Y axis as calculated above
    target.setPosition(winSize.width + (target.getContentSize().width / 2.0f),
             actualY);
    addChild(target);

    target.setTag(1);
    _targets.add(target);

    // Determine speed of the target
    int minDuration = 2;
    int maxDuration = 4;
    int rangeDuration = maxDuration - minDuration;
    int actualDuration = rand.nextInt(rangeDuration) + minDuration;

    // Create the actions
    CCMoveTo actionMove = CCMoveTo.action(actualDuration,
           CGPoint.ccp(-target.getContentSize().width / 2.0f, actualY));
    CCCallFuncN actionMoveDone = CCCallFuncN.action(this, 
            "spriteMoveFinished");
    CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);

    target.runAction(actions);
}

public void spriteMoveFinished(Object sender)
{
    CCSprite sprite = (CCSprite)sender;

    if (sprite.getTag() == 1)
    {
        _targets.remove(sprite);

        _projectilesDestroyed = 0;
        CCDirector.sharedDirector().replaceScene(GameOverLayer.
                    scene("You Lose :(",255,255,255,255));
        nb=0;
    }
    else if (sprite.getTag() == 2)
        _projectiles.remove(sprite);

    this.removeChild(sprite, true);
}
      } 
```

When the users wins the background changes but the new sprites never show up. How can I get the new sprites to show up as well?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T09:54:54.497

```
CCMenuItem level1 = CCMenuItemLabel.item("Level 1", this, "level1");

    CCMenuItem items[] = { level1};
    CCMenu menu = CCMenu.menu(items);
    menu.alignItemsVertically(50);
    this.addChild(menu);

public void level1(Object sender) {
    System.out.println("!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    CCScene scene = GameLayer.scene();
    CCDirector.sharedDirector().pushScene(scene);
    System.out.println("&&&&&&&&&&&&&&&&&&&&&&&&&&&");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T09:24:26.787

```
CCDirector.sharedDirector().replaceScene(Level1.scene()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:53:12.450

```
CCdirector.sharedDirector().runWithScene(scene); 
```

这会导致语法错误吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:18:19.467

您是否删除了当前图层

```
 removeFromParentAndCleanup(true); 
```

或者

```
 removeSelf(); 
```

之后你可以替换场景

```
 CCScene scene = GameLayer.scene();
  CCDirector.sharedDirector().replaceScene(scene); 
```

您还必须将所有变量重置为初始位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:55:24.877

您必须使用 pushScene 才能进入下一个级别

```
 CCScene scene = GameLayerSec.scene();
    CCDirector.sharedDirector().pushScene(scene);

    GameLayerSec.scene() should be the next scene you designed for your next level. 
```

# php - php命令行最大进程

> ID：11757470
> 
> 赞同：2
> 
> 时间：2012-08-01T10:39:49.237
> 
> 标签：php, multiprocessing, command-line-interface

我在一分钟内使用命令行在我的服务器上运行了多次 PHP 脚本。但我想为它添加一些最大值。

此脚本不必每次运行超过 10 个 PHP 进程。

```
#1 php -r myhardandlongprocess.php
#2 php -r myhardandlongprocess.php
..
#10 php -r myhardandlongprocess.php 
```

有什么标准方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:45:00.963

您可以使用以下[`exec()`](http://php.net/manual/en/function.exec.php)命令执行此操作：

```
$output;
$return;
exec('ps |grep ' . __FILE__ . ' |wc -l', $output, $return);

echo ((int) trim($output[0])) - 1; 
```

**编辑：**更改为`exec()`因为`system()`直接输出所有内容。

# python - Python skipping last element in while iterating a list using for loop

> ID：11757474
> 
> 赞同：-2
> 
> 时间：2012-08-01T10:40:05.910
> 
> 标签：python

```
class Sample:

    def __init__(self):
        self.lst_report_footer_strings = ['Manager', 'Accountant', 'Created By', 
                                         'fifth', '', '']
        int_size_of_string = 0
        lst_temp_report_footer = self.lst_report_footer_strings
        for lst_report_footer_item in self.lst_report_footer_strings:
            print lst_temp_report_footer
            print lst_report_footer_item
            if lst_report_footer_item in ('', ' '):
                print "Inside if : Item ==" + lst_report_footer_item
                lst_temp_report_footer.remove(lst_report_footer_item)   
                print "list after remove == " + str(lst_temp_report_footer)
            else:
                print "Inside else : length = ", str(len(lst_report_footer_item))
                int_size_of_string += len(lst_report_footer_item)

if __name__ == '__main__':
    ins_class = Sample() 
```

**Output**

```
['Manager', 'Accountant', 'Created By', 'fifth', '', '']
Manager
Inside else : length =  7
['Manager', 'Accountant', 'Created By', 'fifth', '', '']
Accountant
Inside else : length =  10
['Manager', 'Accountant', 'Created By', 'fifth', '', '']
Created By
Inside else : length =  10
['Manager', 'Accountant', 'Created By', 'fifth', '', '']
fifth
Inside else : length =  5
['Manager', 'Accountant', 'Created By', 'fifth', '', '']

Inside if : Item ==
list after remove == ['Manager', 'Accountant', 'Created By', 'fifth', ''] 
```

**What i need is....**

```
list after remove == ['Manager', 'Accountant', 'Created By', 'fifth'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:54:28.820

我已经把它变成了一段更简单的代码，并试图找出你真正想要做的事情。有很多不必要的代码，你为什么要使用一个类来说明你的问题？

```
>>> x=['Manager', 'Accountant', 'Created By', 'fifth', '', '']
>>> result = [i for i in x if i.strip()]
>>> result
['Manager', 'Accountant', 'Created By', 'fifth']
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:54:16.953

这等效于您的类，没有调试打印，并且具有缩短的变量名称。

```
class Sample:
   def __init__(self):
       self.footers = ['Manager', 'Accountant', 'Created By', 'fifth', '', '']
       self.footers = [x for x in self.footers if x.strip() != ""]
       self.int_size_of_string = sum(len(x) for x in self.footers)

if __name__ == '__main__':
    myclass = Sample()
    print myclass.footers
    print myclass.int_size_of_string 
```

我还创建了`int_size_of_string`一个属性，否则一旦`__init__`完成就无法访问它（你不能从 中返回值`__init__`）。该`strip`方法从字符串的两端删除任意数量的空格和其他空白字符。

您的代码不起作用的原因是您在迭代列表时正在修改列表。您删除了倒数第二个项目，所以最后一个项目取而代之，然后当它移到下一个项目时，就没有更多的项目了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:01:07.597

好的，它不起作用的原因是因为您的循环遍历了列表中的每个项目。当它找到一个空间时，它会删除该项目。并显示您当前的列表。所以第一次，它会告诉你空间，因为它们有 2 个。

但是，现在你的循环失败了，因为你在循环中修改了列表，所以没有更多的项目可以迭代，因为你在 6 中的第 5 项，然后你删除了第 5 项，现在是列表仅包含 5 个项目，但循环寻找项目 6。因为没有，它退出。让列表保持原样。

本质上，您应该做的是：

```
class Sample:
   def __init__(self):
       self.lst_report_footer_strings = \
['Manager', 'Accountant', 'Created By', 'fifth', '', '']
       int_size_of_string = 0
       lst_temp_report_footer = self.lst_report_footer_strings
       temp_remove_list = []
       for lst_report_footer_item in xrange(len(self.lst_report_footer_strings)):
           print lst_temp_report_footer
           print self.lst_report_footer_strings[lst_report_footer_item]
           if lst_temp_report_footer[lst_report_footer_item] in ['',' ']:
               print "Inside if : Item =="+self.lst_report_footer_strings[lst_report_footer_item]
               temp_remove_list.append(lst_report_footer_item)   
           else:
               print "Inside else : length = ",str(len(lst_temp_report_footer[lst_report_footer_item]))
               int_size_of_string += len(lst_temp_report_footer[lst_report_footer_item])

       for item in reversed(temp_remove_list):
           del lst_temp_report_footer[item]

       print "final list : == ",lst_temp_report_footer

if __name__ == '__main__':
    ins_class = Sample() 
```

注意 - 这个文件中的选项卡有些奇怪，我希望它能为你解决。

# linux - 了解 Tcpdump 过滤器和位掩码

> ID：11757477
> 
> 赞同：9
> 
> 时间：2012-08-01T10:40:13.647
> 
> 标签：linux, networking, packet-sniffers, tcpdump, sniffing

我正在尝试使用 tcpdump 来嗅探 http 标头。

这个过滤器效果很好，但我无法理解 -

```
(((ip[2:2] - ((ip[0]&0xf)<<2)) - ((tcp[12]&0xf0)>>2)) != 0) 
```

我用谷歌搜索了它，但我找不到任何有用的信息

这是整个 tcpdump 命令

```
sudo tcpdump -A 'dst [dest host] or src [src host]  and tcp  and 
(((ip[2:2] - ((ip[0]&0xf)<<2)) - ((tcp[12]&0xf0)>>2)) != 0)' -i eth0 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T15:36:05.097

获取 http 标头的不是 BPF 过滤器，而是 tcpdump 命令上的“-A”开关。

您的 tcpdump 命令在 eth0 上查找到某个目的地或某个源的 tcp 流量，其中最终 BPF 过滤器涉及的计算结果为非零总数。使用“-A”选项，它以 ASCII 格式打印每个数据包减去其链接级别的标头。

我已经解释了下面的计算，但我相信实际过滤器中存在一些问题，可能是通过复制和粘贴。当您在 tcpdump 中使用这些过滤器时，您使用的是 tcp 位掩码，通常在检查不落在字节边界上的字段时使用

*   `ip[2:2]`指 IP 标头中的两个字节（即第 3 和第 4 字节），从字节 2 开始（记住它从偏移量 0 开始）。这个总数表示 IP 数据包的总长度，最大可以是 65535 字节。

对于这里的位掩码，为清楚起见，我预先添加了一个“0”，因此掩码`0xf`变为`0x0f`. 根据下面 GuyHarris 的评论，面具上的前导“0”被删除。

*   `ip[0]&0x0f`指 IP 标头中字节 0（即第 1 个字节）的后半部分，这将为您提供 32 位字的 IP 标头长度，因此，通常将其乘以 4 进行此类计算。

*   `tcp[12]&0xf0)`指第 12 个字节的前半部分（即第 11 个字节），它是数据偏移字段，它以 32 位字指定 TCP 标头的大小，因此，通常将其乘以 4 进行此类计算。

您需要将最后 2 个长度乘以 4，因为它们是 32 位/4 字节字，因此需要转换为以字节为单位的总数，以便计算正确

您的过滤器应该计算：

*   IP 数据包长度（以字节为单位） - IP 标头长度 - TCP 标头长度

并寻找该值为零，即像这样

`sudo tcpdump -A -nnpi eth0 '(ip[2:2] - ((ip[0]&0x0f)*4) - ((tcp[12]&0xf0)*4) != 0)'`

当您执行减法时，您正在寻找一个非零的总数。这个非零总数意味着在第 4 层之上有数据，即 tcp 有效负载中的数据，通常是应用程序流量。

`port 80`假设大多数 http 流量通过端口 80，您可能还需要添加。

安全人员通常使用这样的过滤器来检测 SYN 上的数据，这是不正常的，但根据 RFC，这是允许的。所以整个事情看起来像 -

`'tcp[13]=0x02 and (ip[2:2] - ((ip[0]&0x0f)*4) - ((tcp[12]&0xf0)*4) != 0)'`

[TCPIPGuide](http://www.tcpipguide.com/)是一个非常好的免费在线 TCP/IP 指南。

更新：根据 Guy Harris 的更新修改位掩码上的“前导零”部分。

# java - 如果字段值为空，如何告诉杰克逊在序列化期间忽略字段？

> ID：11757487
> 
> 赞同：776
> 
> 时间：2012-08-01T10:40:31.037
> 
> 标签：java, jackson

如果该字段的值为空，如何将 Jackson 配置为在序列化期间忽略该字段值。

例如：

```
public class SomeClass {
   // what jackson annotation causes jackson to skip over this value if it is null but will 
   // serialize it otherwise 
   private String someValue; 
} 
```

* * *

## 回答 #1

> 赞同：1212
> 
> 时间：2012-08-01T14:57:34.390

要使用 Jackson >2.0 禁止序列化具有空值的属性，您可以[直接](http://fasterxml.github.com/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonInclude.Include.html)[配置`ObjectMapper`](http://fasterxml.github.com/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonInclude.Include.html)，或使用[`@JsonInclude`](http://fasterxml.github.com/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonInclude.html)注释：

```
mapper.setSerializationInclusion(Include.NON_NULL); 
```

或者：

```
@JsonInclude(Include.NON_NULL)
class Foo
{
  String bar;
} 
```

或者，您可以`@JsonInclude`在 getter 中使用，以便在值不为 null 时显示属性。

我对[如何防止 Map 中的空值和 bean 中的空字段通过 Jackson 序列化的](https://stackoverflow.com/questions/11449211/)[回答](https://stackoverflow.com/questions/11449211/how-to-prevent-null-values-inside-a-map-and-null-fields-inside-a-bean-from-getti/11464975#11464975)中提供了一个更完整的示例。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-07-29T13:46:01.080

Just to expand on the other answers - if you need to control the omission of null values on a per-field basis, annotate the field in question (or alternatively annotate the field's 'getter').

**example -** here only `fieldOne` will be omitted from the JSON if it is null. `fieldTwo` will always be included in the JSON regardless of if it is null.

```
public class Foo {

    @JsonInclude(JsonInclude.Include.NON_NULL) 
    private String fieldOne;

    private String fieldTwo;
} 
```

To omit all null values in the class as a default, annotate the class. Per-field/getter annotations can still be used to override this default if necessary.

**example -** here `fieldOne` and `fieldTwo` will be omitted from the JSON if they are null, respectively, because this is the default set by the class annotation. `fieldThree` however will override the default and will always be included, because of the annotation on the field.

```
@JsonInclude(JsonInclude.Include.NON_NULL)
public class Foo {

    private String fieldOne;

    private String fieldTwo;

    @JsonInclude(JsonInclude.Include.ALWAYS)
    private String fieldThree;
} 
```

* * *

**UPDATE**

The above is for **Jackson 2**. For **earlier versions** of Jackson you need to use:

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) 
```

instead of

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

*If this update is useful, please upvote ZiglioUK's answer below, it pointed out the newer Jackson 2 annotation long before I updated my answer to use it!*

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2013-06-27T07:39:33.660

With Jackson > 1.9.11 and < 2.x use `@JsonSerialize` annotation to do that:

`@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)`

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2014-01-20T02:28:43.873

In Jackson 2.x, use:

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2013-04-01T14:47:29.460

您可以使用以下映射器配置：

```
mapper.getSerializationConfig().setSerializationInclusion(Inclusion.NON_NULL); 
```

从 2.5 开始，您可以使用：

```
mapper.setSerializationInclusion(Include.NON_NULL); 
```

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2016-11-16T08:04:58.680

You can set `application.properties`:

```
spring.jackson.default-property-inclusion=non_null 
```

or `application.yaml`:

```
spring:
  jackson:
    default-property-inclusion: non_null 
```

[http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html](http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-04-24T19:07:07.790

in my case

```
@JsonInclude(Include.NON_EMPTY) 
```

made it work.

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-05-02T15:44:15.607

```
@JsonInclude(JsonInclude.Include.NON_NULL)
@JsonInclude(JsonInclude.Include.NON_EMPTY) 
```

should work.

`Include.NON_EMPTY` indicates that property is serialized if its value is not null and not empty. `Include.NON_NULL` indicates that property is serialized if its value is not null.

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-11-22T06:21:23.090

This Will work in **Spring boot 2.0.3+ and Jackson 2.0+**

```
import com.fasterxml.jackson.annotation.JsonInclude;

@JsonInclude(JsonInclude.Include.NON_NULL)
public class ApiDTO
{
    // your class variable and 
    // methods
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-04-27T21:52:09.667

If you want to add this rule to all models in Jackson 2.6+ use:

```
mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-11-28T20:56:03.750

If in **Spring Boot**, you can customize the jackson `ObjectMapper` directly through property files.

Example `application.yml`:

```
spring:
  jackson:
    default-property-inclusion: non_null # only include props if non-null 
```

Possible values are:

```
always|non_null|non_absent|non_default|non_empty 
```

More: [https://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-07-19T21:14:05.710

For Jackson 2.5 use :

```
@JsonInclude(content=Include.NON_NULL) 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-11-23T06:42:35.297

If you're trying to serialize a list of object and one of them is null you'll end up including the null item in the JSON even with

```
mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); 
```

will result in:

```
[{myObject},null] 
```

to get this:

```
[{myObject}] 
```

one can do something like:

```
mapper.getSerializerProvider().setNullValueSerializer(new JsonSerializer<Object>() {
        @Override
        public void serialize(Object obj, JsonGenerator jsonGen, SerializerProvider unused)
                throws IOException
        {
            //IGNORES NULL VALUES!
        }
    }); 
```

TIP: If you're using DropWizard you can retrieve the `ObjectMapper` being used by Jersey using `environment.getObjectMapper()`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-10-24T07:13:37.250

This has been troubling me for quite some time and I finally found the issue. The issue was due to a wrong import. Earlier I had been using

```
com.fasterxml.jackson.databind.annotation.JsonSerialize 
```

Which had been deprecated. Just replace the import by

```
import org.codehaus.jackson.map.annotate.JsonSerialize;
import org.codehaus.jackson.map.annotate.JsonSerialize.Inclusion; 
```

and use it as

```
@JsonSerialize(include=Inclusion.NON_NULL) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-01-22T20:57:34.823

Global configuration if you use Spring

```
@Configuration
public class JsonConfigurations {

    @Bean
    public Jackson2ObjectMapperBuilder objectMapperBuilder() {
        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();
        builder.serializationInclusion(JsonInclude.Include.NON_NULL);
        builder.serializationInclusion(JsonInclude.Include.NON_EMPTY);
        builder.failOnUnknownProperties(false);
        return builder;
    }

} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-12-12T13:05:14.413

We have lot of answers to this question. This answer may be helpful in some scenarios If you want to ignore the null values you can use the NOT_NULL in class level. as below

```
@JsonInclude(Include.NON_NULL)
class Foo
{
  String bar;
} 
```

Some times you may need to ignore the empty values such as you may have initialized the arrayList but there is no elements in that list.In that time using NOT_EMPTY annotation to ignore those empty value fields

```
@JsonInclude(Include.NON_EMPTY)
class Foo
{
  String bar;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-05-26T19:43:32.030

Case one

```
@JsonInclude(JsonInclude.Include.NON_NULL)
private String someString; 
```

Case two

```
@JsonInclude(JsonInclude.Include.NON_EMPTY)
private String someString; 
```

If `someString` is null, it will be ignored on both of cases. If `someString` is "" it just only be ignored on case two.

The same for `List = null` or `List.size() = 0`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-26T20:12:06.077

Jackson 2.x+ use

```
mapper.getSerializationConfig().withSerializationInclusion(JsonInclude.Include.NON_NULL); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-05-16T22:56:45.967

Also, you have to change your approach when using Map myVariable as described in the documentation to eleminate nulls:

```
From documentation:
com.fasterxml.jackson.annotation.JsonInclude

@JacksonAnnotation
@Target(value={ANNOTATION_TYPE, FIELD, METHOD, PARAMETER, TYPE})
@Retention(value=RUNTIME)
Annotation used to indicate when value of the annotated property (when used for a field, method or constructor parameter), or all properties of the annotated class, is to be serialized. Without annotation property values are always included, but by using this annotation one can specify simple exclusion rules to reduce amount of properties to write out.

*Note that the main inclusion criteria (one annotated with value) is checked on Java object level, for the annotated type, and NOT on JSON output -- so even with Include.NON_NULL it is possible that JSON null values are output, if object reference in question is not `null`. An example is java.util.concurrent.atomic.AtomicReference instance constructed to reference null value: such a value would be serialized as JSON null, and not filtered out.

To base inclusion on value of contained value(s), you will typically also need to specify content() annotation; for example, specifying only value as Include.NON_EMPTY for a {link java.util.Map} would exclude Maps with no values, but would include Maps with `null` values. To exclude Map with only `null` value, you would use both annotations like so:
public class Bean {
   @JsonInclude(value=Include.NON_EMPTY, content=Include.NON_NULL)
   public Map<String,String> entries;
}

Similarly you could Maps that only contain "empty" elements, or "non-default" values (see Include.NON_EMPTY and Include.NON_DEFAULT for more details).
In addition to `Map`s, `content` concept is also supported for referential types (like java.util.concurrent.atomic.AtomicReference). Note that `content` is NOT currently (as of Jackson 2.9) supported for arrays or java.util.Collections, but supported may be added in future versions.
Since:
2.0 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-02T07:11:18.777

Try this -

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)
public class XYZ {

    protected String field1;

    protected String field2;
 } 
```

And for non-null values (On getters/class level) -

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_EMPTY) 
```

# svn - XCode's svn "abort trap: 6" message

> ID：11757491
> 
> 赞同：4
> 
> 时间：2012-08-01T10:40:44.657
> 
> 标签：svn, xcode4.4, xcode4.5

I've discovered problem with svn tool after updating XCode to version 4.4\. I receive "Abort trap: 6" message every time I try to execute any command like list, checkout, etc.

For example:

```
berec-Mac:~ berec$ /Applications/Xcode45-DP3.app/Contents/Developer/usr/bin/svn list https://source.com/mysource
Abort trap: 6 
```

Thank you in advance for advise.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:07:33.590

解决方案在[这里](http://niob.be/development/2011/07/30/fix-os-x-svn-ssl-bug/)。我的问题的核心是 Neon svn 模块。为了解决 XCode 的 svn 客户端，我刚刚将 Xcode 的 svn 二进制文件替换为包含 Serf 模块的 svn 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:50:58.153

[从自制软件](https://brew.sh/)安装 svn ：

```
brew install svn 
```

比使用 /usr/local/bin/svn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:10:46.530

根据我的假设，可能有两个原因。

1）可能是您使用的网络有很多代理设置，这会造成问题。

2) 从 Xcode --> 首选项下载 Xcode 命令运行工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:45:33.233

尝试使用`xcrun`（[参考](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)）：

```
$ xcrun svn list https://source.com/mysource 
```

您可能需要先确保您的`xcode-select`([参考](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)) 配置正确：

```
$ xcode-select -print-path 
```

哪个应该回来：

```
/Applications/Xcode45-DP3.app/Contents/Developer 
```

如果没有，请使用：

```
$ xcode-select -switch /Applications/Xcode45-DP3.app/Contents/Developer 
```

# mysql - 全文搜索最快的方法是什么？

> ID：11757493
> 
> 赞同：0
> 
> 时间：2012-08-01T10:40:47.093
> 
> 标签：mysql, hadoop, full-text-search

我想对文件中的文本行进行全文搜索（在某些关键字上）。

目前我们正在使用 RDB(MySQL)，但这需要一段时间。我想要它更快。

我突然想到使用 Hadoop，但与成本相比，它的性能提升并不是那么好。（随着机器数量的增加，性能将变为 1/n + 一些开销......我猜。）

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:53:41.273

你看过 SOLR/Lucene 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:08:55.147

如果您正在寻找一些个人使用的基于 GUI 的解决方案，那么请尝试将[SQLyog 的](http://www.webyog.com/en/downloads.php)数据搜索功能与 MySQL 一起使用。它执行的搜索与谷歌搜索非常相似……使用起来非常简单直观。值得一试...

![SQLlyog 数据搜索截图](../Images/4b706b77cd57e502d7816ee49359cd28.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:24:34.623

您看过 SaaS 解决方案吗？我是 http://IndexDen.com 的所有者[，](http://IndexDen.com)但您也可以查看：Searchify 或 Websolr。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:53:10.130

你应该用 MySQL 试试 Sphinx。最适合全文搜索及其开源软件，语法与MySQL非常相似。

[狮身人面像搜索引擎维基](http://en.wikipedia.org/wiki/Sphinx_%28search_engine%29)

[狮身人面像网站](http://sphinxsearch.com/)

# web-services - Spring WS & Spring -integration：org.w3c.dom.DOMException：HIERARCHY_REQUEST_ERR：试图插入不允许的节点

> ID：11757494
> 
> 赞同：0
> 
> 时间：2012-08-01T10:40:46.443
> 
> 标签：web-services, spring-ws, spring-integration

我正在尝试使用 Spring Integration 和 Spring-ws 调用使用 Axis 2 和 SOAP 1.2 的 Web 服务。我收到以下错误

试图在不允许的地方插入一个节点。在 org.apache.axiom.om.impl.dom.NodeImpl.insertBefore(NodeImpl.java:261) 在 org.apache.axiom.om.impl.dom.NodeImpl.appendChild(NodeImpl.java:240) 在 org.apache .xml.utils.DOMBuilder.append(DOMBuilder.java:179) 在 org.apache.xml.utils.DOMBuilder.startElement(DOMBuilder.java:326) 在 org.apache.xalan.transformer.TransformerIdentityImpl.startElement(TransformerIdentityImpl.java :1072) 在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501) 在 com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java :400) 在 com.sun 的 com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)。

```
Can anyone is having a clue as  i am quite new to web services development. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:37:20.497

Sounds like malformed XML; suggest you google "hierarchy_request_err java"; there are lots of results that might help you. If you can't figure it out, post the XML here and maybe someone can help.

# c - 以下代码如何工作？找到树的深度？

> ID：11757496
> 
> 赞同：0
> 
> 时间：2012-08-01T10:40:53.323
> 
> 标签：c

请解释以下代码的工作原理？我无法得到递归。

```
int depth(struct tree *q)
{ 
    int h1,h2;
    if(q==NULL)
       return 0;
    else
    {
       h1=depth(q->left);
       h2=depth(q->right);
    }
    return (max(h1,h2) +1 );
} 
```

递归在上述代码中是如何工作的？h1 和 h2 如何获得价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:59:34.037

想象一棵只有 3 个节点、1 个根和 2 个子节点的简单树

```
 Node R
     /      \
    /        \
Node A      Node B 
```

第一次调用 depth 将 Node R 作为它的参数。

呼叫 1)`q`不是`NULL`这样`depth()`被称为节点 R 左 == 节点 A

调用 2)`q`不是`NULL`这样`depth()`调用节点 A left ==`NULL`

调用 3)`q`所以`NULL`返回 0；

调用 2)`h1 = 0;` 现在调用节点 A right = NULL

调用 4)`q`所以`NULL`返回 0；

呼叫 2)`h1 = 0; h2 = 0; return max(0, 0) + 1`

调用 1)`h1 = 1;` 现在调用节点 R 右 = 节点 B

调用 5)`q`不是为节点 B left == NULL 调用`NULL`的`depth()`

调用 6)`q`就是`NULL`这样返回 0；

调用 5)`h1 = 0;` 现在调用节点 B right = NULL

调用 7)`q`就是`NULL`这样返回 0；

呼叫 5)`h1 = 0; h2 = 0; return max(0, 0) + 1;`

呼叫 1)`h1 = 1; h2 = 1; return max(1, 1) + 1;`

返回 2。

# php - 将文档存储在不同的集合中 - 带有 symfony2 的 Mongodb

> ID：11757501
> 
> 赞同：0
> 
> 时间：2012-08-01T10:41:17.027
> 
> 标签：php, mongodb, collections, symfony

我尝试使用 Mongodb 和 symfony2 将文档存储在不同的集合中

这是我的控制器，他将文档设置到数据库中。

```
public function createAction(){
$post = new Post();
$post->setUrl('A Foo Bar');
$post->setTitle('asdf');
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$dm->persist($post);
$dm->flush();
return new Response('Created post id '.$post->getId());} 
```

如您所见，这是[DoctrineMongoDBBundle官方文档的示例](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html)

但问题是，默认情况下，它将文档创建到一个名为类的集合中，在我的例子中是 Post()，所以集合名称是 Post。我想将文档保存到一个名为 charlies_posts 或任何字符串的集合中作为变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:31:50.357

这很简单 :) 在文档类的定义中只需使用“collection”参数。

这是一个例子：

```
<?php

namespace MyProject\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
 * @ODM\Document(
 *     collection="charlies_posts"
 * )
 */
class Post
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:13:43.653

是的，正如你所说，我们可以将其定义为参数。

```
Documents\User:
  type: document
  db: my_db
  collection: charlies_post 
```

在这种情况下，在 YAML 映射文件中，可能会选择不同的集合，但在我的情况下，我想动态设置集合名称，因为我有与用户相关的帖子，所以 charlies 帖子应该转到 charlies_post 集合，而 peter 帖子应该转到 peter_post收藏...

我想必须有一种方法来设置它，但我找不到它..

# php - 无法在 symfony2 中安装 sonata-admin 软件包

> ID：11757502
> 
> 赞同：0
> 
> 时间：2012-08-01T10:41:22.637
> 
> 标签：php, symfony

当我将 sonata-admin 包安装到我的 symfony 项目中时。我已将我的 yml 文件配置如下：

```
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]
        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss: 
```

我有 deps 文件如下：

```
[SonataAdminBundle]
    git=git://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle
    version=origin/2.0 
```

我收到以下错误

> 安装/更新 SonataAdminBundle a25d8c0e084ed4a175b89a93e93bdea2cf5563ab 致命：无法查找 github.com（端口 9418）（不知道这样的主机。）

```
 [Symfony\Component\Config\Exception\FileLoaderLoadException]

  Cannot import resource "C:\wamp\www\Symfony\app/config\config.yml" from "C:\wa
mp\www\Symfony\app/config/config_dev.yml".

  [InvalidArgumentException]

  There is no extension able to load the configuration for "sonata_block" (in C:
\wamp\www\Symfony\app/config\config.yml). Looked for namespace "sonata_block", f
ound "framework", "security", "twig", "monolog", "swiftmailer", "doctrine", "ass
etic", "sensio_framework_extra", "jms_security_extra", "acme_hello", "acme_task"
, "ensl_jobeet", "acme_demo", "web_profiler", "sensio_distribution"

  [Symfony\Component\Config\Exception\FileLoaderLoadException]

  Cannot import resource "C:\wamp\www\Symfony\app/config\config.yml" from "C:\wa
mp\www\Symfony\app/config/config_dev.yml".

  [InvalidArgumentException]

  There is no extension able to load the configuration for "sonata_block" (in C:
\wamp\www\Symfony\app/config\config.yml). Looked for namespace "sonata_block", f
ound "framework", "security", "twig", "monolog", "swiftmailer", "doctrine", "ass
etic", "sensio_framework_extra", "jms_security_extra", "acme_hello", "acme_task"
, "ensl_jobeet", "acme_demo", "web_profiler", "sensio_distribution" 
```

在这种情况下我该怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:08:42.250

当您尝试安装您的供应商时，它似乎无法使用 git: 协议与 github.com 联系，这就是为什么它说它无法使用 9418 端口进行联系，这是 git 协议使用的端口。这可能是由于某些防火墙阻止了此端口或任何类似原因。由于它无法下载 SonataAdmin 代码，这就是您收到所有其他错误的原因。

您可以做的是将 git: 协议替换为 http: 协议，该协议也可用于访问 github。因此，只需将您的部门更改为：

```
[SonataAdminBundle]
    git=http://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle
    version=origin/2.0 
```

它应该可以工作

# xml - 将多个 XML 文件导入 R

> ID：11757506
> 
> 赞同：1
> 
> 时间：2012-08-01T10:41:31.747
> 
> 标签：xml, database, r, file

将多个 XML 文件连接成一个文件的最佳方法是什么？

我想先在目录中使用连接（使用 cat 在 Mac/Terminal 上工作），但后来意识到这会重复根注释/标题，所以会破坏事情。

# java - 如何停止 Eclipse 关于目标文件夹内容的警告？

> ID：11757507
> 
> 赞同：9
> 
> 时间：2012-08-01T10:41:36.637
> 
> 标签：java, eclipse, warnings

我从我的`target`文件夹中生成的文件（例如，从 XSD 或安全报告生成的 Java 代码）中收到大量无法修复的警告，并且它在我的源代码中隐藏了正确的警告。

有谁知道告诉 Eclipse 不要在某些文件夹或“派生”或目标文件夹中显示警告的方法？

我只能找到以下两个“几乎”解决方案：

1.  “问题”视图中的过滤器允许您隐藏在其描述中包含（或不包含）特定字符串的警告，但不是其路径或资源（文件）的一部分。即使可以，这也不是一个理想的解决方案，因为警告仍会显示在包资源管理器中的项目上，隐藏潜在的真实警告。
2.  在“Source”选项卡下的“Java Build Path”设置中使用最新的 Eclipse 版本（Juno / 4.2），您可以从每个`source`文件夹中“忽略可选的编译问题”。但这显然不适用于文件夹不是源文件夹的情况（如surefire报告）。但是，它*确实*解决了有关生成源的警告的一个特定问题，但可能不会在其他源不（不能）包含为源的情况下解决。

如果有一种方法可以告诉 eclipse 不完全显示有关目标文件夹中事物的警告，那就太好了，因为它通常不是很有用并且可能隐藏实际问题。

干杯，
    斯文德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T10:04:20.387

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T10:47:08.487

不是源文件夹的文件夹不会被 Eclipse 编译。所以你不应该对那些有 Java 错误/警告。

对于源文件夹，您已经有了解决方案（“忽略可选的编译问题”参数）。

# java - 有没有Java多媒体转换库

> ID：11757508
> 
> 赞同：4
> 
> 时间：2012-08-01T10:41:37.260
> 
> 标签：java

我想知道是否有像 Apache Commons 之类的库或类似的东西来帮助将媒体文件（例如 avi、mkv、mp4 等）任意转换为任意？例如，InputFile 的格式为 .avi，OutputFile 的格式为 mp4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:16:30.613

请参阅以下任一内容以在一系列格式之间进行转换。

*   [Jffmpeg](http://jffmpeg.sourceforge.net/)是一个插件，允许播放许多常见的音频和视频格式。它基于 FFMPEG 项目的部分 Java 端口，支持纯 Java 代码中的许多编解码器。在尚未移植编解码器的情况下，JNI 包装器允许直接调用完整的 FFMPEG 代码。
*   [Xuggle](http://www.xuggle.com/) - 一个免费的开源库，供 Java 开发人员实时解压缩、操作和压缩录制或直播的视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:49:05.673

我知道的唯一库是[ffmpeg](http://ffmpeg.org/)，但您必须通过 JNI 运行它。

# ms-access - 如何始终在访问报表中显示子报表

> ID：11757511
> 
> 赞同：2
> 
> 时间：2012-08-01T10:41:43.690
> 
> 标签：ms-access, ms-access-2007, ms-access-2003, ms-access-2000

我在访问报告“Admissions”中有一个名为 AdmSubreport1 的子报告。子报表从查询 AdmQuery 中提取数据。子报表还有一个报表标题。问题是当 admquery 没有返回结果时，子报表就完全显示了。即使 admquery 没有返回任何结果，是否有可能子报告标题至少会显示。

有可能我可以将标题放在子报表之外，但我不能考虑这个选项，因为实际上我在同一个报表中有四个子报表运行 4 个不同的查询（所以我无法在它拥有的报表上修复标题的位置与子报告一起动态移动）。

我尝试寻找允许我执行此操作的设置，但找不到。

我用的是access 2003

帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:44:03.830

当没有要显示的数据时，您必须使用 VBA 代码为表单显示*某些内容。*然后表单将至少显示并显示您的标题。

您可以查看此链接以获得一些想法：[http](http://allenbrowne.com/casu-20.html) ://allenbrowne.com/casu-20.html 。

# c# - 隐藏母版页控件

> ID：11757516
> 
> 赞同：0
> 
> 时间：2012-08-01T10:42:11.053
> 
> 标签：c#, asp.net, vb.net

我想从内容页面隐藏母版页表。

我试图以不同的方式隐藏表格控件，但我在线收到以下错误消息：

```
tbl = (HtmlTable)Page.Master.FindControl("tbl_login"); 
```

错误：

> 你调用的对象是空的。

这是母版页上的表格控件和从登录页面隐藏母版页控件的代码。

![代码](../Images/65ff725d0e978507d10462207c904025.png)

有一个名为 POView 的页面，它有一个链接按钮来批准 PO，当您点击它发送请求的按钮时，它会显示弹出窗口，其中定义了一个母版页（文本框和 html 表中的两个按钮）的控件很少到另一个名为登录的页面，该页面验证用户密码并在数据库中进行一些更新，然后将消息显示到此弹出窗口（response.write）。

我想要的只是从此登录页面隐藏控件（母版页上定义的文本框和按钮）。

注意：该登录页面没有任何母版页的引用标记。

@Page Language="C#" AutoEventWireup="true" CodeFile="login.aspx.cs" Inherits="login" %>

**补充：**这里是主页面按钮的onClick函数。它正在向登录页面发送请求。

```
function showHint(str, str2, str3, reason)
{

gDiv = 'appFeedback';

xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
  {
  alert ("Your browser does not support AJAX!");
  return;
  }
  //replace "tricky" chars in QS
  var pwd=  str.replace('£','!!pound!!');
  pwd=  pwd.replace('£','!!pound!!');
  pwd=  pwd.replace('£','!!pound!!');
  pwd=  pwd.replace('£','!!pound!!');
  pwd=  pwd.replace('&','!!and!!');
  pwd=  pwd.replace('&','!!and!!');
  pwd=  pwd.replace('&','!!and!!');
  pwd=  pwd.replace('&','!!and!!');

var url="login.aspx";
url=url+"?q="+pwd;
url=url+"&q2="+str2;
url=url+"&q3="+str3;
url=url+"&reason="+reason;
url=url+"&entity=<%= Request["entity"] %>";
url=url+"&sid="+Math.random();

xmlHttp.onreadystatechange=stateChanged;
xmlHttp.open("GET",url,true);
xmlHttp.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:35:25.180

登录后尝试调用这个javascript`window.opener.document.getElementById("tbl_login").style.visibility="hidden";`

在您的代码中，它给出为

```
xmlHttp.onreadystatechange=stateChanged; 
```

这里的“stateChanged”必须是一个 javascript 函数，它将在登录后被触发。在该函数中，您可以编写要隐藏的代码。

有关更多信息，`readystatechangedevent`请查看：http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp

**从登录页面返回成功**

```
//After doing the Logic return the status (foreg:- i return here as "success")
Response.Clear();
Response.ContentType = "text/plain";
Response.Write("success");
Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:33:13.087

当内容页面有指令时

```
<%@ MasterType VirtualPath="~/Main.Master" %> 
```

您可以访问母版页的内容。现在，如果您在母版页上创建方法只是隐藏您的表格 - 像这样

```
public void SetTableUnvisible()
{
    tbl_login.Visible = false;
} 
```

您可以在内容页面的 Page_Load 事件上调用此方法

```
Master.SetTableUnvisible(); 
```

并且您的桌子不再可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:05:45.880

听起来您总是试图删除表格，即使一个或多个页面甚至不包含该表格，因为它们无论如何都不引用母版页。那是对的吗？

如果是这样，您的代码将会失败，因为您无论如何都在取消引用 Page.Master，即使它并不总是存在。试试这个，它会在尝试使用它之前检查是否有母版页：

```
MasterPage master = Page.Master;
if (master != null)
{
    tbl = master.FindControl("tbl_login") as HtmlTable;
    if (tbl != null)
    {
        tbl.IsVisible = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T11:00:04.630

如果您的登录页面不使用母版页，那么您不能在服务器上执行此操作，而只能使用客户端代码。制作一个隐藏表格的脚本方法。您可以将其插入母版页：

```
<script type="text/javascript">
function hideTable()
{
   $('#<%=tbl_login.ClientID%>').hide();
}
</script> 
```

在登录页面中：

```
ClientScript.RegisterStartupScript(this.GetType(), "hide", "hideTable();", true); 
```

顺便说一句，如果您想在母版页中执行任何操作，请不要尝试从您的页面中找到其上的控件。在主页面中编写一个方法来执行此操作并从您的页面调用它。您需要转换`Master`为主类型，或将主类型放入为您执行此操作的主指令中。

# python - 没有基本名称的文件的路径

> ID：11757520
> 
> 赞同：82
> 
> 时间：2012-08-01T10:42:25.910
> 
> 标签：python

如何获取没有文件基名的文件路径？

像`/a/path/to/my/file.txt`-->`/a/path/to/my/`

试了`.split()`没有成功。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-08-01T10:44:18.150

使用`os.path.dirname(filename)`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-01T10:45:55.910

你可以`import os`

```
>>> filepath
'/a/path/to/my/file.txt'
>>> os.path.dirname(filepath)
'/a/path/to/my'
>>> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T10:49:01.300

```
(dirname, filename) = os.path.split(path) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-01T10:45:44.717

检查子项`os.path`

```
os.path.dirname('/test/one') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-06T12:49:52.003

从 Python 3.4 开始，您可以使用 Pathlib。

```
from pathlib import Path

path = Path("/a/path/to/my/file.txt")
print(path.parent) 
```

# css - 单击/聚焦按钮后不显示按钮悬停效果

> ID：11757522
> 
> 赞同：1
> 
> 时间：2012-08-01T10:42:43.627
> 
> 标签：css, focus, hover, vaadin

我正在使用 Vaadin 框架开发一个 Web 应用程序。

我有一个样式为 BaseTheme.BUTTON_LINK 的 Button 并显示了一个图标。按钮被分配了一个具有悬停状态的 CSS 类，当按钮悬停时，图标被替换。很简单。

但是，我发现一旦单击按钮，悬停就会停止工作，直到您单击其他位置。单击后按钮似乎已聚焦，然后悬停效果不起作用。

有谁知道使用 Vaadin 或 CSS 的方法来解决这个问题？

**编辑：**添加了 HTML 和 CSS

HTML：

```
<div style="height: 26px; width: 292px; overflow: hidden; float: left; padding-left: 6px; padding-top: 0px;">
  <div style="float: left; margin-left: 0px;">
    <div class="v-button v-button-link link v-button-m2m-refreshbutton m2m-refreshbutton" tabindex="0" role="button">
      <span class="v-button-wrap">
        <img class="v-icon" alt="" src="/M2M/VAADIN/themes/m2m/../m2m/img/refresh_.png">
        <span class="v-button-caption"></span>
      </span>
    </div>
  </div>
</div> 
```

CSS：

```
.m2m-refreshbutton:hover {
    background: url("../m2m/img/refresh_hover.png") no-repeat center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:39:28.290

我在使用 Vaadin 创建 Liferay portlet 时遇到了同样的问题。我可以通过更改 CSS Vaadin 使用来修复它（通过使用[CSS Inject Add-on](https://vaadin.com/directory#addon/cssinject)，但也可以只提供自定义 Vaadin 主题）。对我有用的 CSS 是：

```
.v-button:active .v-button-wrap, .v-button.v-pressed .v-button-wrap, .v-button:focus .v-button-wrap {
background: #d4d4d4 url(/html/themes/classic/images/portlet/header_bg.png) repeat-x 0 0 !important} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:25:33.520

一般来说，最好只使用 CSS 中的背景图像来执行此操作。

您还应该为此使用`<a></a>`标签，因为例如较旧的 Internet Explorer 不会将链接状态应用于除`<a></a>`.

基本上可以像这样为链接的不同状态获取不同的图像：

HTML：

```
<a class="someClass" href="location"></a> 
```

CSS：

```
.someClass {
    background-image: url(path_from_css_file/link.png);
    background-repeat: no-repeat;
    background-position: top left;
}

.someClass:hover {
    background-image: url(path_from_css_file/link_hover.png);
}

.someClass:focus {
    background-image: url(path_from_css_file/link_focus.png);
}

.someClass:active {
    background-image: url(path_from_css_file/link_active.png);
}

.someClass:visited {
    background-image: url(path_from_css_file/link_visited.png);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-10T18:55:30.417

使用javascript是可能的。

首先获取按钮

```
buttonElement = document.getElementById("yourID"); 
```

将事件侦听器添加到按钮并调用函数。

```
ButtonElement.addEventListener('click', nofocus); 
```

创建函数

```
function nofocus () {
this.blur();
} 
```

每当您单击按钮时。焦点状态将消失。

# javascript - 隐藏 rangeSelector 时的 Highcharts 库存控制范围

> ID：11757523
> 
> 赞同：0
> 
> 时间：2012-08-01T10:42:47.187
> 
> 标签：javascript, jquery, html, highcharts, highstock

当 rangeSelector 被隐藏时，如何控制在 Highstock 中发生事件（例如，单击按钮或加载页面）时选择的范围。

[API](http://www.highcharts.com/stock/ref/#rangeSelector)指定隐藏 rangeSelector，设置一个，`rangeSelector : {enabled: false}`但这不仅隐藏了 rangeSelector，而且完全禁用了用户对其的控制。在这个[例子](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/stock/rangeselector/enabled/)中，你可以看到禁用 rangeSelector 的效果。

有没有办法在禁用 rangeSelector 的情况下控制范围？或者有没有办法隐藏 rangeSelector，但保持启用状态，以便与其关联的控件仍然有效。

**背景资料：**

我希望能够制作自己的一组控件来控制 HTML/CSS 的范围并以不同的方式定位它们，因为我不喜欢当前控件的美感。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:07:43.137

```
var chart = new Highcharts.StockChart({

    chart: {
        renderTo: 'container'
    },

    rangeSelector: {
        selected: 1
    },

    series: [{
        name: 'USD to EUR',
        data: usdeur
    }]
})

chart.rangeSelector.destroy(); 
```

# javascript - 如何避免对来自 JSON 的脚本使用 eval？

> ID：11757526
> 
> 赞同：1
> 
> 时间：2012-08-01T10:42:51.793
> 
> 标签：javascript, jquery, json, eval

我的 Web 应用程序（运行 jQuery）从服务器获取以下 JSON 响应：

```
{
    "script_0": "$('#objview_0_306').on('click', function(e){ getObjectResponse(96089, '306', 'display'); e.preventDefault();});",    
    "verb_0": "display",
    "obid_0": "0_306",
    "body_0": "<div id=\"objview_0_306\"></div>",
    "icon_0": "icons/caseman16.png",
    "close_0": "previousTab();",
    "title_0": "Cases",
    "cmdCount": "1"
} 
```

script_0 元素包含必须运行的脚本，在这种情况下，将 onClick 事件添加到 DOM 元素。

目前，我使用 eval() 来运行脚本，因为它们以字符串形式返回。有没有办法避免使用 eval()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:47:01.590

诺普。eval（和别名 Function 构造函数等）旨在完成此任务，将字符串解析为可运行的 javascript。

如果您不想使用`eval`，而不是从服务器返回完整的 javascript，您可以在 json 响应中返回值，指示您的客户端应用程序执行预定义的任务。

我要抄袭@Esailija 的评论：你到底为什么会有json 代码？这是一种数据交换格式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:46:05.543

`eval`我认为如果没有它的衍生物或其衍生物之一，你就无法实现你想要的。

您可以查看`jQuery.globalEval()`方法，如下所述：http: [//api.jquery.com/jQuery.globalEval/](http://api.jquery.com/jQuery.globalEval/)

你也可以看看这个`jQuery.getScript()`方法：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:46:27.093

我会第一个说出通常的`eval == evil`口头禅，但我也是一个现实主义者，有时会打破规则。

我会说你可能在这里有一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:47:07.370

您可以尝试将该字符串与代码附加到 DOM，然后在所需元素上触发 click 事件。

# c# - C#将未知数量的值添加到数组中

> ID：11757528
> 
> 赞同：0
> 
> 时间：2012-08-01T10:42:53.457
> 
> 标签：c#, arrays

我想将多个值添加到一个数组中，但我想在我喜欢的时候停下来。

这是我添加的条件

```
while (numbers[i] != 10)
{
    i++;
    numbers[i] = int.Parse(Console.ReadLine());
    Console.WriteLine(numbers[i]);
} 
```

当输入的值为 10 时它将停止。但我希望它在我按下 ENTER 时停止。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:46:38.797

如果您询问如何检测“只需按 ENTER”条件：

```
var input = Console.ReadLine();
if (input == "") {
    break;
}

numbers[i] = int.Parse(input);
// etc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:46:01.380

```
var numbers = new List<int>();
string s;
while(!string.IsNullOrEmpty(s = Console.ReadLine())) {
    numbers.Add(int.Parse(s));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:46:22.720

我猜你正在寻找一些方法来重新调整数组的大小，你可以使用[Array.Resize](http://coderbuddy.wordpress.com/2009/10/19/dynamic-arrays/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:46:42.147

`numbers`像这样声明。

```
List<int> numbers = new List<int>(); 
```

然后像这样修改循环。

```
while (numbers[i] != 10)
{
    i++;

    string input = Console.ReadLine();
    if (string.IsNullOrEmpty(input)) { break; }

    numbers.Add(int.Parse(input));
    Console.WriteLine(numbers[i]);  
} 
```

# php - 在PHP中获取无序列表的所有列表项

> ID：11757534
> 
> 赞同：0
> 
> 时间：2012-08-01T10:43:18.263
> 
> 标签：php, javascript, jquery, ajax

我有这些标签云列表

```
<ul #id = "tag-cloud-list">
    <li class = "items">Music</li>
    <li class = "items">Lion</li>
    <li class = "items">Dwarf</li<
</ul> 
```

那是由 JQuery 生成的。这里的项目是我将插入数据库的标签。现在我的问题是有可能得到`<li>`ul 中的所有项目吗？并将它们放在 PHP 数组中？因为这些标签中的每一个都将被插入到数据库中。如果我无法使用 php 获取 li 项，那么如何将这些列表项插入数据库？因为我需要它们，因为它是某个项目或帖子的标签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T10:51:55.033

您必须进行 AJAX 调用：

```
var lis = new Array();

// Iterate through the <li> items
$("#tag-cloud-list").children("li").each(function()
{
    lis.push($(this).text());
});

// Make AJAX call and set data to something like "Music::Lion::Dwarf"
$.ajax({
    url: "dostuff.php",
    type: "POST",
    data: { items: lis.join("::") },
    success: function() { alert("OK"); }
}); 
```

然后在 PHP 脚本中，使用

```
$lis = $_POST['items'];
$liarray = explode("::", $lis); 
```

`li`检索项目数组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:46:12.193

除非您以某种方式将数据发送回服务器，否则您无法在 PHP 中获取这些信息。PHP 在服务器上执行，如果这是通过 jquery 进入的，那么 PHP 对此一无所知。

您将需要使用 javascript 获取所有信息并将其发送回服务器，或者您需要将整个页面 HTML（以某种方式）发送回服务器以供 PHP 查看。我建议第一个选项。

编辑：我对 javascript 不感冒，只使用一些基本功能，但您可以将事件写入 a`<div>`或数据进入的位置。`<li>`该函数将找出有多少`<ul id="tag-cloud-list">`弹出它们到一个数组中，并通过表单或 ajax 查询将它们发送到 PHP 服务器。

抱歉，我对 js 代码帮不上什么忙。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:47:24.500

您需要使用 JQuery 中的 .find() 函数获取 ul 中的所有项目，并使用 ajax 进行 POST 并处理信息

# css - CSS图像大小，如何填充，但不拉伸？

> ID：11757537
> 
> 赞同：499
> 
> 时间：2012-08-01T10:43:22.223
> 
> 标签：css, image

我有一张图片，我想为它设置一个特定的宽度和高度（以像素为单位）

但是如果我使用 css ( ) 设置宽度和高度`width:150px; height:100px`，图像会被拉伸，并且可能很难看。

如何使用 CSS 将图像**填充**到特定大小，而**不是拉伸**它？

填充和拉伸图像的示例：

原图：

![原来的](../Images/c3356c0bd67e0dab1adb67086221dd86.png)

拉伸图像：

![拉伸](../Images/022ae628cd84e3f0daaf79bcb9ee1038.png)

填充图像：

![填充](../Images/48d25f7523bbf057bf222f162a384a81.png)

**请注意，在上面的填充图像示例中：首先，图像被调整为 150x255（保持纵横比），然后将其*裁剪*为 150x100。**

* * *

## 回答 #1

> 赞同：728
> 
> 时间：2015-03-17T15:25:31.320

您可以使用 css 属性[`object-fit`](https://developer.mozilla.org/docs/Web/CSS/object-fit)。 *（“设置如何调整替换元素的内容，例如`<img>`or `<video>`，以适应其容器。”）*

```
.cover {
  object-fit: cover;
  width: 50px;
  height: 100px;
}
```

```
<img src="http://i.stack.imgur.com/2OrtT.jpg" class="cover" width="242" height="363" />
```

[在此处查看示例](http://codepen.io/afonsoduarte/pen/EaOROW)

IE 有一个 polyfill：[https ://github.com/anselmh/object-fit](https://github.com/anselmh/object-fit)

**相关：（** *指定元素内容在它的框中的对齐方式。）*[`object-position`](https://developer.mozilla.org/docs/Web/CSS/object-position)

 ** * *

## 回答 #2

> 赞同：427
> 
> 时间：2012-08-01T16:17:42.090

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2017-03-24T13:47:01.030

**增强了[@afonsoduarte 接受的答案](https://stackoverflow.com/a/29103071/4390133)。**
如果您使用**引导程序**

* * *

有以下三个区别：

1.  提供`width:100%`风格。
    如果您使用**引导程序**并希望图像拉伸所有可用宽度，这将很有帮助。

2.  指定`height`属性是可选的，您可以根据需要删除/保留它

    ```
    .cover {
       object-fit: cover;
       width: 100%;
       /*height: 300px;  optional, you can remove it, but in my case it was good */
    } 
    ```

3.  顺便说一句，不需要在元素上提供`height`and`width`属性，`image`因为它们将被样式覆盖。
    所以写这样的东西就足够了。

    ```
    <img class="cover" src="url to img ..."  /> 
    ```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2012-08-01T10:49:22.833

唯一真正的方法是在图像周围放置一个容器并使用`overflow:hidden`：

**HTML**

```
<div class="container"><img src="ckk.jpg" /></div> 
```

**CSS**

```
.container {
    width: 300px;
    height: 200px;
    display: block;
    position: relative;
    overflow: hidden;
}

.container img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
} 
```

在 CSS 中做你想做的事情并将图像居中是一件痛苦的事情，在 jquery 中有一个快速修复，例如：

```
var conHeight = $(".container").height();
var imgHeight = $(".container img").height();
var gap = (imgHeight - conHeight) / 2;
$(".container img").css("margin-top", -gap); 
```

[http://jsfiddle.net/x86Q7/2/](http://jsfiddle.net/x86Q7/2/)

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2016-08-25T22:13:09.380

**CSS解决方案无JS无背景图：**

**方法 1“margin auto”（IE8+ - NOT FF！）：**

```
div{
  width:150px; 
  height:100px; 
  position:relative;
  overflow:hidden;
}
div img{
  position:absolute; 
  top:0; 
  bottom:0; 
  margin: auto;
  width:100%;
}
```

```
<p>Original:</p>
<img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>

<p>Wrapped:</p>
<div>
  <img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
</div>
```

[http://jsfiddle.net/5xjr05dt/](http://jsfiddle.net/5xjr05dt/)

**方法2“转换”（IE9+）：**

```
div{
  width:150px; 
  height:100px; 
  position:relative;
  overflow:hidden;
}

div img{
  position:absolute; 
  width:100%;
  top: 50%;
  -ms-transform: translateY(-50%);
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
}
```

```
<p>Original:</p>
<img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>

<p>Wrapped:</p>
<div>
  <img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
</div>
```

[http://jsfiddle.net/5xjr05dt/1/](http://jsfiddle.net/5xjr05dt/1/)

方法 2 可用于在固定宽度/高度的容器中将图像居中。两者都可能溢出 - 如果图像小于容器，它仍然会居中。

[http://jsfiddle.net/5xjr05dt/3/](http://jsfiddle.net/5xjr05dt/3/)

**方法 3“双重包装”（IE8+ - NOT FF!）：**

```
.outer{
  width:150px; 
  height:100px; 
  margin: 200px auto; /* just for example */
  border: 1px solid red; /* just for example */
  /* overflow: hidden;	*/ /* TURN THIS ON */
  position: relative;
}
.inner { 
    border: 1px solid green; /* just for example */
    position: absolute;
    top: 0;
    bottom: 0;
    margin: auto;
    display: table;
    left: 50%;
}
.inner img {
    display: block;
    border: 1px solid blue; /* just for example */
    position: relative;
    right: 50%;
    opacity: .5; /* just for example */
}
```

```
<div class="outer">
  <div class="inner">
     <img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
  </div>
</div>
```

[http://jsfiddle.net/5xjr05dt/5/](http://jsfiddle.net/5xjr05dt/5/)

**方法4“双包装和双图像”（IE8+）：**

```
.outer{
  width:150px; 
  height:100px; 
  margin: 200px auto; /* just for example */
  border: 1px solid red; /* just for example */
  /* overflow: hidden;	*/ /* TURN THIS ON */
  position: relative;
}
.inner { 
    border: 1px solid green; /* just for example */
    position: absolute;
    top: 50%;
    bottom: 0;
    display: table;
    left: 50%;
}
.inner .real_image {
    display: block;
    border: 1px solid blue; /* just for example */
    position: absolute;
    bottom: 50%;
    right: 50%;
    opacity: .5; /* just for example */
}

.inner .placeholder_image{
  opacity: 0.1; /* should be 0 */
}
```

```
<div class="outer">
  <div class="inner">
    <img class="real_image" src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
    <img class="placeholder_image"  src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
  </div>
</div>
```

[http://jsfiddle.net/5xjr05dt/26/](http://jsfiddle.net/5xjr05dt/26/)

*   方法 1 的支持稍好一些 - 您必须设置图像的宽度或高度！
*   带有前缀的方法 2 也有不错的支持（从 ie9 开始） - 方法 2 在 Opera mini 上不支持！
*   方法 3 使用两个包装器 - 可以溢出宽度和高度。
*   方法 4 使用双图像（一个作为占位符），这会带来一些额外的带宽开销，但更好的跨浏览器支持。

**方法 1 和 3 似乎不适用于 Firefox**

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-05-15T20:03:10.633

***不需要*图像作为背景的解决方案，并且会自动调整大小而不会被切断或扭曲。**

另一种解决方案是将图像放入具有所需宽度和高度的容器中。使用此方法，您不必将图像设置为元素的背景图像。

然后，您可以使用`img`标签执行此操作，只需在元素上设置 max-width 和 max-height。

CSS：

```
.imgContainer {
    display: block;
    width: 150px; 
    height: 100px;
}

.imgContainer img {
    max-width: 100%;
    max-height: 100%;
} 
```

HTML：

```
<div class='imgContainer'>
    <img src='imagesrc.jpg' />
</div> 
```

现在，当您更改容器的大小时，图像将自动增长到尽可能大，而不会超出界限或扭曲。

如果要将**图像**垂直和水平居中，可以将容器 css 更改为：

```
.imgContainer {
    display: table-cell;
    width: 150px; 
    height: 100px;
    text-align: center;
    vertical-align: middle;
} 
```

这是一个 JS Fiddle [http://jsfiddle.net/9kUYC/2/](http://jsfiddle.net/9kUYC/2/)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-06-18T14:21:18.040

*   不使用css背景
*   只有 1 个 div 可以剪辑它
*   调整到最小宽度而不是保持正确的纵横比
*   从中心裁剪（垂直和水平，您可以使用顶部、左侧和变换进行调整）

如果您使用主题或其他东西，请小心，他们通常会声明 img max-width 为 100%。你必须不做任何事情。测试一下:)

[https://jsfiddle.net/o63u8sh4/](https://jsfiddle.net/o63u8sh4/)

```
<p>Original:</p>
<img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>

<p>Wrapped:</p>
<div>
    <img src="http://i.stack.imgur.com/2OrtT.jpg" alt="image"/>
</div>

div{
  width:150px; 
  height:100px; 
  position:relative;
  overflow:hidden;
}
div img{
  min-width:100%;
  min-height:100%;
  height:auto;
  position:relative;
  top:50%;
  left:50%;
  transform:translateY(-50%) translateX(-50%);
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-02-14T04:54:31.933

使用 jQuery 建立@Dominic Green 的答案，这里有一个解决方案，应该适用于比它们高或比它们宽的图像。

[http://jsfiddle.net/grZLR/4/](http://jsfiddle.net/grZLR/4/)

可能有一种更优雅的方式来处理 JavaScript，但这确实有效。

```
function myTest() {
  var imgH = $("#my-img").height();
  var imgW = $("#my-img").width();
  if(imgW > imgH) {
    $(".container img").css("height", "100%");
    var conWidth = $(".container").width();
    var imgWidth = $(".container img").width();
    var gap = (imgWidth - conWidth)/2;
    $(".container img").css("margin-left", -gap);
  } else {
    $(".container img").css("width", "100%");
    var conHeight = $(".container").height();
    var imgHeight = $(".container img").height();
    var gap = (imgHeight - conHeight)/2;
    $(".container img").css("margin-top", -gap);
  }
}
myTest(); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-04-15T21:21:31.760

我帮助构建了一个名为[Fillmore](https://github.com/Jux/jquery-fillmore)的 jQuery 插件，它处理`background-size: cover`支持它的浏览器，并为那些不支持它的浏览器提供一个 shim。给它看看！

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-09-21T13:20:12.440

这会将图像填充到特定大小，而不拉伸或裁剪

```
img{
    width:150px;  //your requirement size
    height:100px; //your requirement size

/*Scale down will take the necessary specified space that is 150px x 100px without stretching the image*/
    object-fit:scale-down;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-08-01T10:51:56.440

尝试这样的事情：http: [//jsfiddle.net/D7E3E/4/](http://jsfiddle.net/D7E3E/4/)

使用带有溢出的容器：隐藏

编辑：@Dominic Green 打败了我。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-11-07T17:17:54.010

你可以通过'flex'显示来做到这一点。为了我！：

```
.avatar-img {
    display: flex;
    justify-content: center;
    align-items: stretch;
    border-radius: 50%;
    border: 1px  solid #dee2e6;
    height: 5.5rem;
    width: 5.5rem;
    overflow: hidden;
}
.avatar-img > img {
    flex-grow: 1;
    object-fit: cover;
}
```

```
<div>
  <div class="avatar-img">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSqczw3Fb_TYsj0hbPEy0u7Ay2bVq1KurD6hw&amp;usqp=CAU" alt="Test!'s profile photo">
  </div>
  <div class="avatar-img">
    <img src="https://i.pinimg.com/236x/a1/37/09/a137098873af3bf6180dd24cbe388ae9--flower-iphone-wallpaper-wallpapers-flowers.jpg" alt="Test!'s profile photo">
  </div>
</div>
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-02-04T21:44:32.827

after reading StackOverflow answers the simple solution I got is

```
.profilePosts div {

background: url("xyz");
background-size: contain;
background-repeat: no-repeat;
width: x;
height: y;

} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-09-06T06:44:59.060

我认为这个答案已经很晚了。无论如何，希望这将有助于未来的人。我遇到了以角度定位卡片的问题。显示了一系列事件的卡片。如果事件的图像宽度对于卡片来说很大，则图像应通过从两侧裁剪和高度为 100% 的方式显示。如果图像高度较长，则图像底部被裁剪，宽度为 100%。这是我的纯CSS解决方案：

[![在此处输入图像描述](../Images/52c71e09cf567da6976da5e745462612.png)](https://i.stack.imgur.com/cNPxd.png)

**HTML：**

```
 <span class="block clear img-card b-b b-light text-center" [ngStyle]="{'background-image' : 'url('+event.image+')'}"></span> 
```

**CSS**

```
.img-card {
background-repeat: no-repeat;
background-size: cover;
background-position: 50% 50%;
width: 100%;
overflow: hidden;
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-09-23T06:46:11.300

要全屏显示图像，请尝试以下操作：

**背景重复：圆形；**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-03T04:15:11.950

```
<div class="container">
     <img src="http://i.stack.imgur.com/2OrtT.jpg"/>
</div>

<style>
.container {
       width: 150px;
       height: 100px;
       overflow: hidden;
}
</style> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-24T04:24:25.430

据我所知，有一个插件可以让这变得简单。

[jQuery 插件：自动将 <img> 转换为背景样式](https://github.com/louisho5/jQuery-Image-2-Background-Plugin)

```
<img class="fill" src="image.jpg" alt="Fill Image"></img>

<script>
    $("img.fill").img2bg();
</script> 
```

此外，这种方式也满足了可访问性的需求。由于此插件不会从您的代码中删除您的 <img> 标签，因此屏幕阅读器仍会告诉您 ALT 文本而不是跳过它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-11-04T11:03:33.817

你必须`background-size : cover`在css中使用

js代码

```
 <div>
   <div className={styles.banner}>banner</div>
 </div> 
```

CSS代码

```
.banner{
  background: 
    url("./images/home-bg.jpg");
  background-size: cover;
  height: 53rem;
  width: 100%;
} 
```

*   对象拟合不起作用
*   `background-size: contain`也不工作*

# c# - Silverlight，鼠标单击路径中的间隙

> ID：11757541
> 
> 赞同：1
> 
> 时间：2012-08-01T10:43:54.250
> 
> 标签：c#, wpf, silverlight, xaml

我正在开发一个 Silverlight 应用程序，它在 Canvas 上显示多个小图标，每个图标的大小约为 10x10 像素。图标由路径定义。

有一个可用性问题，一些图标的形状像这样，因此，如果用户在间隙中单击，则不会记录任何单击。请参阅下图以了解我的意思。

![在此处输入图像描述](../Images/43cac6d9dbf672c0d8ac0e7ad48cf640.png)

我想知道，WPF/Silverlight 中是否有一种简单的方法可以使路径的“背景”成为可点击的？而不是将它包装在另一个 WPF 类型中，这会增加渲染器的负担。

或者，是否有一个简单的修复来改进系统，比如将路径包裹在矩形或其他几何图形中以使整个区域可点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:28:13.127

使用带有绘图组的绘图笔刷，而不是路径。

```
<Rectangle Name="TransparentBack"  Height="10" Width="10">
    <Rectangle.Fill>
        <DrawingBrush>
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="Transparent">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry>
                                <RectangleGeometry.Rect>
                                    <Rect Height="1" Width="1"/>
                                </RectangleGeometry.Rect>
                            </RectangleGeometry>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="White">
                        <GeometryDrawing.Geometry>
                            <PathGeometry>
                                <PathFigure StartPoint="0,0">
                                    <LineSegment Point="0,1"/>
                                    <LineSegment Point="1,1"/>
                                </PathFigure>
                            </PathGeometry>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </Rectangle.Fill>
</Rectangle> 
```

# c++ - GDI+：改变 DPI

> ID：11757542
> 
> 赞同：1
> 
> 时间：2012-08-01T10:44:02.713
> 
> 标签：c++, vb6, gdi+, gdi

我有两点需要澄清：

*   将图像**DPI**从**200**更改为**100**是否意味着我必须将图像大小调整一半，或者我可以保持实际尺寸但降低 DPI。

*   我认为 GDI+ 可能是更改图像 DPI 的一个不错的替代方案，我以这种方式搜索过，但我没有找到显示如何使用 GDI+ 更改 DPI 的示例。

关于这些问题的任何想法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:23:07.780

更改现有图像的 dpi 没有多大意义。它记录了创建图像的设备的分辨率。这样它就可以在具有不同 dpi 设置的另一台设备上以相同的物理尺寸显示。这就是当您在分辨率为 600 dpi 的打印机上打印时，您在 96 dpi 的显示器上使用绘画程序绘制的图像不会变成六分之一大小的邮票。

当您已经拥有图像时，通过在代码中更改它，您基本上是在尝试更改创建图像的设备的特征。这没有意义，您的代码无法返回，例如更改相机中的 CCD 或更改监视器分辨率。

这只是一个参考编号。

您可以以任何您想要的尺寸显示或打印图像，它不必*与*原始尺寸相匹配。

# java - 从 Spring 控制器返回 JSON 数据类型/视图

> ID：11757546
> 
> 赞同：0
> 
> 时间：2012-08-01T10:44:12.657
> 
> 标签：java, json, web-services, spring

如何将现有的基于 XML 的 Web 服务转换为 JSON 类型的 Web 服务？

我有这个示例资源：

```
@Controller
public class CustomerController {
    @RequestMapping(value="customers", method=RequestMethod.GET)
    public @ResponseBody CustomerList customers(Model model) {
        CustomerList list = new CustomerList();
        list.getCustomer().add(new Customer("1", "John Doe"));
        list.getCustomer().add(new Customer("2", "Jane Doe"));
        return list;
    }
} 
```

到目前为止，我在访问它时没有遇到任何错误，我只想将此服务返回给客户端的数据从 XML 更改为 JSON。

使用此实体：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "customer"
})
@XmlRootElement(name = "CustomerList")
public class CustomerList {

    @XmlElement(name = "Customer", required = true)
    protected List<Customer> customer;

    public List<Customer> getCustomer() {
        if (customer == null) {
            customer = new ArrayList<Customer>();
        }
        return this.customer;
    }

} 
```

servlet-context.xml：

```
<oxm:jaxb2-marshaller id="marshaller" contextPath="com.mycompany.api.model"/>
<beans:bean id="customerList" class="org.springframework.web.servlet.view.xml.MarshallingView">
        <beans:constructor-arg ref="marshaller"/>
</beans:bean> 
```

如何将服务的输出更改为 JSON？我需要在实体/模型中放置 JSON 类型的注释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:08:38.007

使用[Jackson JSON 处理器](http://jackson.codehaus.org/)，您的代码将非常相似。该模型将采用简单的 POJO 格式。再次使用 @ResponseBody 进行响应，Jackson 将负责 JSON 转换。

请参阅这个[Spring 3 MVC 和 JSON 示例](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)。

# linq - 父母和父母的父母的LINQ组

> ID：11757553
> 
> 赞同：1
> 
> 时间：2012-08-01T10:44:45.577
> 
> 标签：linq, linq-to-entities

我有两张桌子：

**工作**

*   日期
*   小时
*   员工ID

**员工**

*   员工ID
*   员工老板ID

EmployeeBossId 指的是另一个员工，他可能也有老板等等。

所有者可以处于无限数量的层次结构中（尽管实际上只有 3 个级别）。我正在寻找一个 LINQ 语句形式的智能数据库调用，它可以接收一个**EmployeeId**并告诉我该员工的所有**小时数**的总和，包括任何“子”员工 - 按每个直接子员工分组！

**例子**

*   鲍勃
*   吉姆
    *   乔伊
    *   安东尼
        *   本
        *   丽塔
    *   席德
*   担
    *   哈利
    *   莎莉
*   麦克风

如果我提供 Jim 的 EmployeeId，我想要 Joey、Anthony（包括 Ben 和 Rita 的小时数）和 Sid 的总小时数。

我知道我问的有点多，但是我在决定如何攻击这个时遇到了麻烦，并希望那里的其他人清楚。谢谢。

我正在寻找要在一个数据库调用中完成的整个事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:37:35.833

SQL Server 支持称为[Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)的东西，它基本上允许您执行“递归查询”，这正是您解决父/父-父问题所需要的。

不幸的是，Linq 不支持这一点。但是有一种方法可以做到这一点，但它需要在您的 C# 代码中使用一些 SQL（准确地说是在上下文中）。请参阅[此问题](https://stackoverflow.com/questions/584841/common-table-expression-cte-in-linq-to-sql)和[此操作方法](http://msdn.microsoft.com/en-us/library/bb399403.aspx)。

# c# - Azure 表：在不创建特定类或不知道整个架构的情况下获取

> ID：11757561
> 
> 赞同：2
> 
> 时间：2012-08-01T10:45:23.523
> 
> 标签：c#, .net, azure, cloud, azure-table-storage

我有一个带有特定 shema 的表“常量”，例如：
*PartitionKey、RowKey、Timestamp、ARG1、ARG2、ARG3*

例如这些实体：
*production, 0, 01/01/2012, L, 5, 7*
*production, 1, 01/01/2012, F, 7, 7*

我可以在不创建类的情况下获取实体吗？
比如：

```
var query = MagicFunctionWichGiveAEntity("production", "0"); //0 is the RowKey  
var result = query.ValueOf("ARG1") // result = L 
```

我找到[了这篇文章](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/28/reading-and-saving-table-storage-entities-without-knowing-the-schema-or-updating-tablestorageentity-schema-at-runtime.aspx)，但看起来很复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:05:29.757

做到这一点的唯一方法是使用**ReadingEntity**事件（如您参考的帖子中所述）。如果您想看到一个完整的工作实施，我建议您查看位于此处的**存储服务智能客户端：http:** [//archive.msdn.microsoft.com/appfabriccat/Release/ProjectReleases.aspx?ReleaseId =5474](http://archive.msdn.microsoft.com/appfabriccat/Release/ProjectReleases.aspx?ReleaseId=5474)

您需要查看文件：

*   Client\Helpers\CloudStorageHelper.cs
*   Client\Helpers\ConversionHelper.cs
*   Client\Helpers\CustomEntity.cs

另一种解决方案是直接与 REST API 交互，您可以在其中获取 XML 格式的实体：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179421](http://msdn.microsoft.com/en-us/library/windowsazure/dd179421)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:29:18.550

我编写了一个客户端，它通过使用字典来保存名称/值对来支持动态（未指定）列。它还支持许多其他功能，例如数组、枚举和大于 64K 的数据。

它可以免费供个人使用。您可以在[http://www.lucifure.com](http://www.lucifure.com) 或通过 NuGet.com 获得它。

# c# - 随机分布

> ID：11757566
> 
> 赞同：2
> 
> 时间：2012-08-01T10:45:40.823
> 
> 标签：c#

我想知道如何创建一个随机类，将表中的数据随机分配到 36 个其他表而不重复，以及如何打印出这些表。请问是编程新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:00:17.303

撇开围绕“表格”的混淆，您随机分配 X 个项目的一般方式是：

1.  把它们放在一个列表中，
2.  随机选择一个项目
3.  从列表中删除该项目
4.  返回 1) 当还有可用的物品时

或在代码中（使用 1-200 的数字列表作为要分发的数据）

```
static Random random = new Random();
public static void Main(string[] args)
{
    var list = new List<int>(Enumerable.Range(1,200));
    while(list.Count>0)
    {
        var item = list[random.Next(0,list.Count)];
        list.Remove(item);

        // Do something with 'item'
    }
} 
```

现场示例：[http ://rextester.com/WBOK18374](http://rextester.com/WBOK18374)

但是，如果它的分布需要随机化，您可以将所有项目放在 a 中`Queue`，然后`Dequeue`一次一个地选择一个随机放置它们的位置。

在此示例中，再次使用数字 1-200 作为数据和 36`List<int>`作为目标，代码将类似于：

```
var tables = new List<int>[36];
for(var i=0;i<36;i++)
{
    tables[i] = new List<int>();
}

var stack = new Queue<int>(Enumerable.Range(1,300));
while(stack.Count>0)
{
    var next = stack.Dequeue();
    var table = tables[random.Next(0,36)];
    table.Add(next);
} 
```

现场示例：[http ://rextester.com/HBDWH46108](http://rextester.com/HBDWH46108)

最后，如果这是您正在谈论的 SQL 表（您没有这样标记它，而是将其标记为 C# - 因此上面的答案），那么您不应该拥有 36 个看起来相同的表。您应该有 1 个包含您的数据的表，当它被提取时，您可以随机化结果。或者，当它被插入时，你可以随机分配任何东西。

# database - 面向服务设计的客户端数据库是否有意义？

> ID：11757574
> 
> 赞同：0
> 
> 时间：2012-08-01T10:45:55.653
> 
> 标签：database, api, database-design, soa

假设每次 Web 客户端调用特定 API 时，服务器（或服务器集群）都会启动 Web 提取器。该网络提取器旨在收集一些法律数据，以便由网络客户端显示。

服务器端是否应该有一个设计良好且安全的数据库，并强制客户端每次要显示一些相关数据时调用 API？
在这种情况下，假设客户端想要将这些检索到的数据链接到它自己的数据库中存在的数据。客户端将它们与检索到的数据 ID/令牌链接起来是否有意义？因此，它不需要为这些远程数据建模特定的数据库表，而是涉及更多请求以找到这些 ID/令牌所针对的远程数据。

还是应该在客户端有一个特定的数据库以避免由所有这些 API Client => Server 流引起的巨大网络调用？

假设情况发生变化并且这些数据变得严格保密并且不允许客户端网络存储它，仍然想知道这个问题......

或两者？即使两个数据库之间存在冗余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:09:24.040

您的问题是指缓存问题。数据库不是存储缓存数据的唯一解决方案。只有当此数据具有较长的有效期并且应该用于在客户端查询不同的表示时，我才会选择数据库。如果数据的生存时间很短，则可能一些就地缓存解决方案更可取，其中数据以序列化方式有效表示。在客户端或服务器端拥有此缓存取决于安全要求以及您牢记的架构应该走向的方式。

# facebook - 如何通过 facebook 连接收集数据并在新页面中打印

> ID：11757575
> 
> 赞同：1
> 
> 时间：2012-08-01T10:45:59.763
> 
> 标签：facebook, session, printing

如果有人可以帮助我，那就太好了。

我正在用 PHP 开发一个站点（ww.xyz.com），并成功地在该站点的索引页面上集成了“使用 Facebook 登录”按钮。我已经对其进行了测试，并且工作正常。

这个网站除了“用 Facebook 登录”按钮外，还有它自己的登录表单，已经注册的用户可以通过它登录到这个站点。一旦用户通过此登录表单登录（不是使用 Facebook 选项登录），会话就会启动，用户将被带到另一个页面，其中显示了他的个人资料详细信息（如名字、姓氏、电子邮件地址等）。

现在使用“使用 Facebook 登录”按钮，我想做一个类似的功能。一旦用户通过 facebook 帐户进行身份验证，应该执行以下两个步骤。

**第 1 步：如果用户通过网站自己的登录表单打开适当的会话登录，他或她应该被带到相同的页面。在此页面中，应显示用户数据（如图片、名字、姓氏等）。步**

**步骤 2\. 收集 facebook connect 发送的这些数据（图片、名字、姓氏等）并将其存储在我的 MYSQL 数据库中。**

下面是 index.html 页面的代码供您参考。

```
<html xmlns="http://www.w3.org/1999/xhtml"   
xmlns:fb="http://www.facebook.com/2008/fbml">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0  
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>XYZ Index</title>
<style type="text/css">
<!--
.ptour_crtbtn { BORDER-BOTTOM: #ccc 1px outset; MIN-WIDTH: 100px; TEXT-   
ALIGN:       center; BORDER-LEFT: #ccc 1px outset; PADDING-BOTTOM: 4px; PADDING-LEFT:  
2px; PADDING-RIGHT: 2px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: 
#fff; BORDER-TOP: #ccc 1px outset; CURSOR: pointer; BORDER-RIGHT: #ccc 1px outset; 
PADDING-TOP: 5px; -moz-border-radius: 7px; -webkit-border-radius: 7px
}
.style1 {color: #0000FF}

#content {  BORDER-BOTTOM: #ccc 1px solid; BORDER-LEFT: #ccc 1px solid; PADDING-  
BOTTOM: 12px; BACKGROUND-COLOR: #fff; MARGIN: 0px auto; PADDING-LEFT: 20px; WIDTH: 
350px; PADDING-RIGHT: 20px; BORDER-TOP: #ccc 1px solid; BORDER-RIGHT: #ccc 1px solid; 
PADDING-TOP: 20px; -moz-border-radius: 7px; -webkit-border-radius: 7px
}
.style3 {color: #0000FF; font-weight: bold; }
.style5 {
color: #0000FF;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-weight: bold;
}
.style7 {color: #0000FF; font-family: Geneva, Arial, Helvetica, sans-serif; }
.style8 {font-family: Geneva, Arial, Helvetica, sans-serif}
-->
</style>
</head>

<body>
<p><img src="./images/header.JPG" width="1266" height="127" alt="header" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="content">
<h1 class="style1">Login Form:</h1>
<form method="post" action="Login.php">
<p>
<label style="DISPLAY: block"><span class="style3">Email:</span></label>
<input class="text" 
name="username" />
</p>
<p>
<label style="DISPLAY: block"><span class="style3">Password:</span></label>
<input class="text" 
type="password" name="password" />
'</p>
<p><a href="http://dl.dropbox.com/u/7106563/r-ednalan/login_form.html#">Forgot 
password?</a></p>
<p>
<button class="ptour_crtbtn" name="login" type="submit"><span    
class="style1"><strong>Talk</strong></span><strong>i</strong>n</button>
</p>
<pre><span class="style5">OR</span><span class="style8"><script 
src="http://connect.facebook.net/en_US/all.js"></script><script>
 FB.init({ 
    appId:'XXXXX', 
    cookie:true, 
    status:true, 
    xfbml:true 
 });
  </script></span>

  <fb:login-button onlogin="alert('Authenticated!');"><div align="left">Login with   
  Facebook</div></fb:login-button></p>

  </p>
  </pre>
  </form>

  </body>
  </html> 
```

# java - 在列中布置字符串集合

> ID：11757576
> 
> 赞同：1
> 
> 时间：2012-08-01T10:46:00.973
> 
> 标签：java, collections

我有一个字符串列表，我想在 HTML 表格中显示，这些字符串尽可能均匀地分布在指定数量的列中。

```
public String toHtmlTable(Collection<String> values, int columns) {
    // TODO
} 
```

我希望字符串显示如下：

```
A    E    I
B    F    J
C    G
D    H

(i.e. "<table><tr><td>A</td><td>E</td><td>I</td></tr>...</table>") 
```

我不想要这个：

```
A    B    C
D    E    F
G    H    I
J 
```

有什么好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:43:02.483

一些代码可能会提供一些帮助：

我有点懒，还有两件事还没做：

*   不`<table></table>`添加标签。这很简单。
*   空 `<td></td>`没有处理。

代码：

```
public void tt() {
    // you could ignore the ImmutableList stuff, it just prepares the string list, nothing more.
    final List<String> l = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j");
    final int col = 3;
    final int size = l.size();
    final int n = size / col;
    final StringBuffer sb = new StringBuffer("");
    for (int i = 0; i <= n; i++) {
        int k = i;
        sb.append("<tr>\n");
        while (k < size) {
            sb.append("<td>" + l.get(k) + "</td>");
            k += n + 1;
        }
        sb.append("\n</tr>\n");
    }
    System.out.println(sb.toString());
} 
```

输出：

```
<tr>
<td>a</td><td>e</td><td>i</td>
</tr>
<tr>
<td>b</td><td>f</td><td>j</td>
</tr>
<tr>
<td>c</td><td>g</td>
</tr>
<tr>
<td>d</td><td>h</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:19:12.673

假设您的表有`n`列并且您有`x`多个字符串，您最终需要

`m = ceiling(x/n)`行。所以你要做的就是在输出一行html时，相应地偏移你的变量。您的第一行输出应如下所示：

```
arr[0]    arr[m]        arr[2m]        arr[3m]      ....     arr[nm] 
```

那么下一行将是：

```
arr[1]    arr[m+1]      arr[2m+1]      arr[3m+1]    ....     arr[nm+1]
arr[2]    arr[m+2]      arr[2m+2]      arr[3m+2]    ....     arr[nm+2]
....
arr[m-1]  arr[2m-1]     arr[3m-1]      arr[4m-11]   ....     arr[(n+1)m-1] 
```

您可以弄清楚如何编写嵌套循环来输出它，这并不难。

每行表示如下：

```
arr[i]    arr[m+i]      arr[2m+i]      arr[3m+i]    ....     arr[nm+i] 
```

`i`从`0`到`(m-1)`。_

我希望这有帮助。

# android - Android 按钮 2 次点击

> ID：11757586
> 
> 赞同：1
> 
> 时间：2012-08-01T10:46:23.893
> 
> 标签：android, android-layout, android-button

单击2次后如何更改android按钮？第一次更改按钮我将使用此代码

```
{
    public void onClick(View v) {
        b.setBackgroundDrawable(getResources().getDrawable(R.drawable.menubuttonpressed));
    }
} 
```

再按一次后我想再次更改按钮视图，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:50:34.403

也许这样做：

```
int count = 0;

public void onClick(View v) {
    count++;

   if(count == 2){
      count = 0;
      b.setBackgroundDrawable(getResources()
                      .getDrawable(R.drawable.menubuttonpressed));
   }
} 
```

这将在每 2 次单击按钮（视图）后设置背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:51:12.417

```
private int clickCount =0;

public void onClick(View v) {

    if (clickCount==0) {
        b.setBackgroundDrawable(getResources().getDrawable(R.drawable.menubuttonpressed));
    } else {
        // do something else
    }
    clickCount++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:56:40.410

好吧，一种方法是保留一个柜台。

```
numberOfClicks = 0;
...
public void onClick(View v) {
  ...
  if(numberOfClicks==0)
    b.setBackgroundDrawable(getResources().getDrawable(R.drawable.menubuttonpressed0));
  else if(numberofClicks==1)
    b.setBackgroundDrawable(getResources().getDrawable(R.drawable.menubuttonpressed1));
  ...
  numberofClicks++;
} 
```

# java - 使用 ANT 从 javadoc 生成中排除一些源文件

> ID：11757587
> 
> 赞同：0
> 
> 时间：2012-08-01T10:46:24.127
> 
> 标签：java, ant, javadoc

> **可能重复：**
> [如何使 Ant Javadoc 类排除两个文件？](https://stackoverflow.com/questions/6060998/how-can-i-make-an-ant-javadoc-class-exclude-two-files)

我想排除一些 Eclipse 相关文件的 javadoc 生成，比如`Activator.java`我的 ant javadoc 目标。我有下面的代码示例，它为单个文档下的不同 java 项目生成 javadoc。

```
<project basedir="." default="jdoc" name="ANT_TASK">
<target description="creates the javadoc for the XXXXX module" name="jdoc">
      <javadoc
               destdir="docs/api"
               use="true"
               public="true"
               splitindex="true"
               classpath="..\com.sample.script.modules\bin"
               packagenames="com.sample.package1,
                             com.sample.test1"
               windowtitle="XXXXX 1.0 API"> 
        <sourcepath>
              <pathelement path="..\com.sample.package\src"/>
              <pathelement path="..\com.sample.test\src"/>        
        </sourcepath>
        <doctitle><![CDATA[<h1>XXXXX 1.0 API</h1>]]></doctitle>
        <bottom><![CDATA[<i>Copyright &#169; 1999-2012 XXXX company Ltd. All Rights Reserved.</i>]]></bottom>
      </javadoc>
</target>
</project> 
```

谁能帮助我如何`Activator.java`从 javadoc 生成中排除该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:09:41.467

直接来自 javadoc ant 任务：

```
<fileset dir="src" defaultexcludes="yes">
  <include name="com/dummy/test/**"/>
  <exclude name="com/dummy/test/doc-files/**"/>
</fileset>

<doctitle><![CDATA[<h1>Test</h1>]]></doctitle>
<bottom><![CDATA[<i>Copyright &#169; 2000 Dummy Corp. All Rights Reserved.</i>]]></bottom>
<tag name="todo" scope="all" description="To do:"/>
<group title="Group 1 Packages" packages="com.dummy.test.a*"/>
<group title="Group 2 Packages" packages="com.dummy.test.b*:com.dummy.test.c*"/>
<link offline="true" href="http://download.oracle.com/javase/6/docs/api/" packagelistLoc="C:\tmp"/>
<link href="http://developer.java.sun.com/developer/products/xml/docs/api/"/> 
```

所以我会将文件放入文件集的排除列表中。

# selenium - 找出 jqGrid 是否已加载并准备好 Selenium 的最佳方法

> ID：11757595
> 
> 赞同：4
> 
> 时间：2012-08-01T10:46:43.187
> 
> 标签：selenium, jqgrid

您如何通过 selenium 确定 jqGrid 是否已加载并准备好使用。

一些细节：

*   我正在使用 C# 驱动程序
*   我有一个方法：`new WebDriverWait(driver, new TimeSpan(0, 0, 0, 30)).Until(x => loadingdissapearedcondition)`我用它来等到 Loading.. 元素消失。
*   我有时也使用这个脚本：

`private const string script = @"return ($('#{0}').jqGrid('getGridParam', 'reccount') !=x undefined) && ($('#{0}').jqGrid('getGridParam', 'reccount') != 0) && (!$('#load_{0}').is(':visible')) && (!$('#busyIcon').is(':visible'))";`

```
private readonly string waitScript;

waitScript = string.Format(script, jqGridId);

public void WaitUntilLoadIconDissappears()
{
    driver.WaitUntil(MAXWAIT, Wait);
}

public bool Wait()
{
    var executeScript = ((IJavaScriptExecutor) driver).ExecuteScript(waitScript);
    bool result;
    bool tryParse = bool.TryParse(executeScript.SafeToString(), out result);
    return tryParse && result;
} 
```

查找 jqGrid 是否已完成记录和加载。

我需要更好的东西——如果我们使用 jqGrid 的本地数据，即使上述两个也不会让驱动程序等到加载完成。我也很好奇什么是最好的方法，或者至少是其他人如何处理这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T11:22:11.053

我以前从未使用过 Selenium，所以我不确定我是否正确理解了您的问题。jqGrid 将首先被初始化，然后（可选地）可以从服务器加载数据。在初始化阶段，原始`<table id="grid"></table>`元素将被转换为相对复杂的 HTML 片段，即网格。在初始化结束时，表格的 DOM 元素（`$("#grid")[0]`）将获得 expando `grid`。

所以你可以像这样使用测试

```
if ($("#grid")[0].grid) {
    // grid is initialized
} 
```

确定网格已经初始化。jqGrid 在内部使用相同的测试（例如，请参见[此处）。](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L652)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T10:08:48.527

这是Java和jqgrid的解决方案。如果尚未加载网格数据，则右寻呼机没有价值，因此只需检查其长度。isElementPresent、isDisplayed 等方法似乎不适用于网格右分页器对象。ajax 时它始终存在于页面代码中，但在加载动态数据时会设置文本值。

```
public void waitForGridPagerRight(String gridName) throws Exception {

    for (int second = 0;; second++) {
        if (second >= 15) {
            fail("Timeout.");
        }
        try {
            if (driver
                    .findElement(By.id("pager_" + gridName + "_right"))
                    .getText().length() > 2)
                break;
        } catch (Exception e) {
        }
        Thread.sleep(1000);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T21:40:35.733

不知道为什么@Oleg 的回答对我不起作用。似乎在进行 ajax 调用之前就已经填充了网格。看来新版本可能会有一些变化。看起来在 ajax 调用中发生的最后一件事是“加载”块被隐藏了，所以我找到了那个元素并检查了它的显示属性：

```
 def wait_for_jqgrid(self, t=20):
    def check_jqgrid(driver):
      #the last thing jqgrid does after the ajax call is to turn off the loading div
      #so we find it and check to see if its display attribute is no longer set to 'none'
      script = 'pid = $.jgrid.jqID($(".ui-jqgrid-btable").get(0).p.id); return $("#load_"+pid).get(0).style.display == "none";'
      return driver.execute_script(script)
    WebDriverWait(self.driver, t).until(check_jqgrid) 
```

当加载 div 被隐藏时，我们就完成了。这是 python 但相同的 javascript 位应该在 Java 或其他任何东西中工作。

# wpf - 事件触发器在 ItemControl 中不起作用

> ID：11757596
> 
> 赞同：0
> 
> 时间：2012-08-01T10:46:44.093
> 
> 标签：wpf, silverlight, itemscontrol, event-triggers

我有一个由列表填充的项目控件，列表是两个参数“时间”和“描述”的集合。为此，我使用 HyperLinkBut​​ton 表示时间，使用 Label 表示描述。

我想要的是，我想在主视图模型中使用超链接按钮的 EventTrigger 创建单击事件。我的代码是：

```
<ItemsControl 
    x:Name="transcriptionTextControl" 
    ItemsSource="{Binding MyCollectionOfTranscription, Mode=TwoWay}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <HyperlinkButton Content="{Binding Time}">
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Time"/>
                    </ToolTipService.ToolTip>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction 
                                Command="{Binding HyperLinkButtonCommand}" 
                                CommandParameter="{Binding 
                                    ElementName=transcriptionTextControl }" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </HyperlinkButton>
                <sdk:Label Content="{Binding Description}"/>
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

当我构建项目时，它没有给出错误，但超链接的 ICommand 显示警告为“无法解析符号 HyperLinkBut​​tonCommand”，而此事件触发器在此之外工作正常。

没有得到，它背后的实际问题是什么，请提出您的宝贵建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:21:30.633

首先，

```
<i:InvokeCommandAction 
    Command="{Binding HyperLinkButtonCommand}" 
    CommandParameter="{Binding 
        ElementName=transcriptionTextControl }" /> 
```

Binding 试图定位`HyperLinkButtonCommand`在其中包含的类型的实例上调用的属性`MyCollectionOfTranscription`（您不需要绑定到这个双向）。

（旁注，将 ItemsControl 发送到您的 Command*不是*MVVM。）

迭代此集合中的`ItemsControl`每个元素，创建定义在 中的模板的副本`ItemsControl.ItemTemplate`，并设置`BindingContext`等于此元素（我假设它是一个成绩单）。`HyperLinkButtonCommand`如果您启动数据绑定调试设置，您可以从绑定无法找到您的警告中看出这一点。

![在此处输入图像描述](../Images/5747b18e4e57e4292dcd6f129d93b6b3.png)

假设

1.  `HyperLinkButtonCommand`是您的 ViewModel 中定义的命令，并且
2.  这个 xaml 的根是一个窗口（可能是一个用户控件，但我在这里假设）
3.  您的 ViewModel 是`DataContext`Window 的

您可以将绑定更改为以下内容，它应该可以工作（或者您应该从中获得线索）

```
<i:InvokeCommandAction 
    Command="{Binding HyperLinkButtonCommand, 
              RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" 
    CommandParameter="{Binding 
        ElementName=transcriptionTextControl }" /> 
```

在这种情况下，我更喜欢只给我的 root 一个`x:Name`“root”并使用“ElementName=root”。

# java - 安卓、Java 套接字

> ID：11757598
> 
> 赞同：2
> 
> 时间：2012-08-01T10:46:48.590
> 
> 标签：java, php, android

我在**android中创建了一个****TCP 套接字客户端**，并使用了一个开放的 src 套接字应用程序，我用它作为服务器向我的 android 应用程序发送消息，一切正常。

 **但值得怀疑的是，这两个设备都使用我的家庭 wifi 连接，因此具有 192.xxx 系列 ip，

但是，如果我的设备连接到我家中的 wifi 路由器，IP 为 192.xxx 并且服务器具有静态 IP，我的服务器是否能够向**远程设备**发送消息，无论设备是否具有本地网络伊普？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:05:57.283

不，您将无法向远程设备发送数据，除非它启动连接，否则您无法启动与动态 Ip（远程设备）的连接**

# c# - 如何根据行值在 DataTables 中查找行

> ID：11757599
> 
> 赞同：0
> 
> 时间：2012-08-01T10:46:57.357
> 
> 标签：c#, select, datatable, row

我有一个 DataTable，其中可能有一列中的值看起来像`x:1` `x:2` `a:1` `a:2`etc...但它们也可能看起来像`x*`or `a*`。

在我的代码中，我得到了一个完整的值来搜索（例如`x:1`），但行本身可以包含`x*`该列中的值。我可以以某种方式使用 Select 方法来搜索行吗？

现在它看起来像这样：

```
strSelect = string.Format("[{0}]='{1}'", colName, ValueToSearch);
rows = tempTable.Select(strSelect); 
```

但当然，我会得到的唯一行是那些看起来与表格中的一模一样的行。这意味着在搜索时`x:1`，我不会得到与`x*`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:18:46.260

代码`strSelect = string.Format("[{0}]='{1}'", colName, ValueToSearch);`将选择相同的值。如果要搜索子集，则必须使用 LIKE 运算符：

```
strSelect = string.Format("[{0}] LIKE '{1}'", colName, ValueToSearch.Replace("*", "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:50:21.280

我暂时假设您的数据库包含 4 行，在您要查询的给定列中具有以下值：

*   x:1
*   x:2
*   X*
*   一个：1
*   a2
*   一个*

您声明您正在获得一个值，例如您需要在查询中使用的 'x:1'，但您暗示查询最终应该返回前三个记录 - 值为 'x: 1'、'x:2' 和'x*'。换句话说，虽然你得到的是'x:1'，但你实际上想要搜索任何值以'x'开头的记录。

如果是这种情况，您最好在发出查询之前修改 C# 代码中的值。如果您的搜索值确实是“x:1”形式，您可以在将其交给 SQL 查询之前将最后两个字符截掉：

```
string searchValue = "x:1"; // this presumably actually comes from user input
searchValue = searchValue.Substring(0, searchValue.Length - 2);
// Now searchValue is just "x", so go ahead and create your SQL query using the 'LIKE' operator 
```

我觉得这只是对您的实际数据的简化，这使得它很难精确并且也使得提供包含错误检查的示例变得更加困难。

对于一个稍微复杂一点的例子，也许用户给你的搜索值可以是一串字母，或者是一串字母，后跟冒号，后跟更多字母。在这种情况下，您需要检查给定的字符串是否包含冒号，如果包含冒号，则需要将冒号及其后面的任何内容剪掉：

```
string searchValue = "abc:def";
if (searchValue.Contains(":"))
    searchValue = searchValue.Substring(0, searchValue.IndexOf(":"));
// Having stripped off ":def", you're left with "abc" 
```

现在您可以继续使用 LIKE 运算符发出查询，正如 TcKs 在他的回答中已经显示的那样。例如，您可以修改已有的查询代码，如下所示：

```
strSelect = string.Format("[{0}] LIKE '{1}'", colName, ValueToSearch);
rows = tempTable.Select(strSelect); 
```

通过使用 LIKE 运算符，您现在正在查找任何具有以“abc”*开头的值的记录。*

# javascript - 将变量传递给引用的函数？

> ID：11757601
> 
> 赞同：1
> 
> 时间：2012-08-01T10:46:59.687
> 
> 标签：javascript, jquery

我目前在 javascript ajax 调用中有一个无名函数：

（此代码已精简到要领，可能存在一些错误）

```
function call(name){
    var type = services[name].type

    $.oajax({
        success: function(data) {
            fbposts=data.data
                if (type === "grupp"){
                    var postid=fbposts[fbpost].id.split("_");
                    return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
                }
                else if (fbposts[fbpost].actions){
                    return fbposts[fbpost].actions[0].link;
                }
            }
        }       
    })
}; 
```

我想在欧洲使用

```
success: successfunction, 
```

并引用这样的函数：

```
function success(data) {
            fbposts=data.data
                if (type === "grupp"){
                    var postid=fbposts[fbpost].id.split("_");
                    return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
                }
                else if (fbposts[fbpost].actions){
                    return fbposts[fbpost].actions[0].link;
                }
            }
        }       
    }) 
```

此时，不再定义类型变量。我能以某种方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:51:57.923

一种可行的方法是使用`context`参数 on `$.ajax`-- 例如：

```
function successFunction(data) {
    fbposts=data.data;
    if (type === "grupp"){
        var postid=fbposts[fbpost].id.split("_");
        return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
    }
    else if (fbposts[fbpost].actions){
        return fbposts[fbpost].actions[0].link;
    }
}

function call(name){
    var type = services[name].type;
    $.oajax({
        success: successFunction,
        context: { type: type }
    );
} 
```

在你的函数中使用`context`cause指向你传入的任何内容。所以在上面的例子中，当我们阅读`this``success``context``successFunction`

```
if (type ...) 
```

这意味着`type`指的是，这与我们从内部保存`this.type`的值相同。`type``context``call`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:50:39.233

是的，您可以通过定义`success()`inside来解决这个问题`call`，所以这具有相同的范围：

```
function call(name){
    var type = services[name].type;
    function success(data) {
                fbposts=data.data
                    if (type === "grupp"){
                        var postid=fbposts[fbpost].id.split("_");
                        return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
                    }
                    else if (fbposts[fbpost].actions){
                        return fbposts[fbpost].actions[0].link;
                    }
                }
            }       
        })

    $.oajax({
        success: success   
    })
}; 
```

替代解决方案是将其存储在外部，例如。在某个外部范围内，在某个变量中，或附加到 DOM 元素之一。

您还可以使用包装器，以正确的类型调用将返回知道这种类型的成功函数，如下所示：

```
function make_success(type){
    return function(data){
        // do what you need for success callback
    };
}
var my_success_callback = make_success('some_type'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:54:13.807

您可以让成功函数返回您需要传递给 ajax 的函数，并将类型变量传递给父函数——就像 Python 装饰器一样。这是一个例子：

```
function call(name){
    var type = services[name].type;

    $.ajax({
        success: success(type)
    })
};

function success(type) {
    return function(data) {
        // We have access to 'type' in here!

        fbposts=data.data;
        if (type === "grupp"){
            var postid=fbposts[fbpost].id.split("_");
            return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
        }
        else if (fbposts[fbpost].actions){
            return fbposts[fbpost].actions[0].link;
        }
    }
} 
```

# python - 在 chroot 中运行时出现 Python 错误

> ID：11757602
> 
> 赞同：3
> 
> 时间：2012-08-01T10:46:59.390
> 
> 标签：python, runtime, chroot, jail

我尝试在 chroot 中运行一些 Python 程序，但出现以下错误

```
Could not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]
'import site' failed; use -v for traceback 
```

我使用 ldd 来查找 python 运行时所依赖的库，并将其复制到监狱内部。你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:02:58.887

您需要从 /usr/lib/pyshared 和 /usr/lib/python{$version} 获取文件并将它们复制到您的 chroot 中。

路径可能略有不同，您可以尝试使用 strace python 来查看它尝试加载的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:50:50.003

那是因为某些库在 chroot 环境中是不可见的。

复制它们或使用`mount --bind`.

只是为了说明我的意思（当然你不需要复制所有的库）：

```
# cp -R /usr/lib /home/user/chroot/usr/lib 
```

或者，使用安装绑定：

```
# mount --bind /usr/lib /home/user/chroot/usr/lib 
```

# ruby-on-rails - 导轨、编辑器和回形针

> ID：11757604
> 
> 赞同：1
> 
> 时间：2012-08-01T10:47:02.723
> 
> 标签：ruby-on-rails, paperclip, wysiwyg, redactor

我刚刚遇到了 RedActor (http://redactorjs.com/)，一个所见即所得的编辑器。我想将它与 Rails 和 Paperclip 结合使用，但我不知道从哪里开始。我搜索了文档并发现了用于上传文件和图像的 PHP 示例。

谷歌没有为我找到任何东西。（关键词：Rails Paperclip RedActor）。我在 GitHub 上找到了这个 gem (https://github.com/SammyLin/redactor-rails)，但它只提供与 ActiveRecord 和 CarrierWave 的集成。

我必须做些什么才能让 RedActor 与 Ruby On Rails 和 Paperclip 一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T06:37:57.423

我是 Sammy 和 redactor-rails 开发人员。

redactor-rails gem 现在只提供与 ActiveRecord 和 CarrierWave 的集成。

将来，我将提供与回形针的集成。

请稍等片刻。

[https://github.com/SammyLin/redactor-rails/issues?state=open](https://github.com/SammyLin/redactor-rails/issues?state=open)

如果我还有什么可以帮助您的，请提交问题！

# liferay-6 - 无法从 AJAX 请求连接到 Portlet 类。

> ID：11757608
> 
> 赞同：0
> 
> 时间：2012-08-01T10:47:11.610
> 
> 标签：liferay-6

我正在使用 Liferay 6.1 CE 进行门户应用程序开发。我正在尝试在我的 Portlet 中使用 Jquery 和 AJAX。这是我的 JSP 页面，如图所示：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<portlet:defineObjects />

<script type="text/javascript">

$(document).ready(function(){

jQuery.ajax({
url:'<portlet:resourceURL id="ajax" ></portlet:resourceURL>',
data: {id:data},
type: 'POST',
datatype:'json',
success: function(respData) {
alert(respData);
}
});
});
</script> 
```

这是我的 MVC Portlet 类

```
public class ArrayPortlet extends MVCPortlet {

@Resource(name="ajax")
public void testAjax(
PortletConfig config, ResourceRequest request, ResourceResponse response)
throws Exception {

}
} 
```

但我无法连接到我的 Java 类。有人可以帮我吗。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:52:59.483

试试这个，

```
public class ArrayPortlet extends MVCPortlet {

@override
public void serveResource(ResourceRequest request, ResourceResponse response)
throws Exception {

 }
} 
```

在这里，您将覆盖 GenericPortlet 类的 serveResource 方法。

# jsp - servlet 文件上传

> ID：11757615
> 
> 赞同：0
> 
> 时间：2012-08-01T10:47:33.047
> 
> 标签：jsp, servlets, file-upload

HTTP 状态 500 - 实例化 servlet 类 UploadServlet 时出错

* * *

类型异常报告

消息 实例化 servlet 类 UploadServlet 时出错

描述 服务器遇到了一个内部错误（错误实例化 servlet 类 UploadServlet），它阻止了它完成这个请求。

例外

```
javax.servlet.ServletException: Error instantiating servlet class UploadServlet
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

java.lang.ClassNotFoundException: UploadServlet
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:59:32.787

这意味着您的 UploadServlet 不在 Web 应用程序的 CLASSPATH 中。确保在 CLASSPATH 中声明您的 servlet。

# r - 在 R 中使用 IF 函数

> ID：11757617
> 
> 赞同：6
> 
> 时间：2012-08-01T10:47:43.623
> 
> 标签：r, if-statement

我`if`在 R 中运行一个简短的函数，但收到以下警告消息：

```
In if ((runif(50, 0, 1) < 0.69)) { :  the condition has length > 1 and only the first element will be used`. 
```

我对 R 的初步掌握使我相信它会`runif`生成一个向量但会`if`产生一个值，所以我认为这就是问题所在。if 这里有什么简单的替代吗？

此外，我希望最终产品是两个参数的矩阵组合，但我不确定在这`rnorm`两种情况下将 50 放入函数中是否正确。

```
Test <-
 if((runif(50, 0, 1)<0.69)) {
 rnorm(50, 25, 4)
 } else {
 rnorm(50, 28, 4.3)
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T10:59:40.520

`if()`期望括号中的任何内容计算为长度为 1 (`TRUE`或`FALSE`) 的逻辑向量。如果向量长于 1，则如警告所示，仅使用向量的第一个元素。

如果`ifelse()`将其用作：

```
ifelse(test, TRUE_CASE, FALSE_CASE) 
```

对于您的示例，我们有：

```
set.seed(1)
ifelse(runif(50, 0, 1) < 0.69, rnorm(50, 25, 4), rnorm(50, 28, 4.3)) 
```

或者

```
set.seed(1)
test <- runif(50, 0, 1)
Tcase <- rnorm(50, 25, 4)
Fcase <- rnorm(50, 28, 4.3)
ifelse(test, Tcase, Fcase) 
```

两者都可以，因为在进行比较之前和之前`ifelse()`生成两个向量。`TRUE_CASE``FALSE_CASE`

示例输出是：

```
R> ifelse(test < 0.69, Tcase, Fcase)
 [1] 24.77549 24.37682 19.11699 28.31967 26.67177 25.55472 27.41873 26.55069
 [9] 24.78478 19.49176 23.34002 23.42284 24.76275 29.40010 29.14852 24.34191
[17] 33.19383 32.98973 27.22665 34.82338 30.40149 26.45833 28.07413 24.55062
[25] 28.52443 26.59242 22.55189 26.36448 28.67952 30.73209 32.92160 23.53111
[33] 20.82346 27.27888 35.23336 34.60647 26.01493 27.75896 25.20201 22.02691
[41] 26.31093 17.78017 26.79981 25.61301 33.69045 25.82438 22.16021 27.44291
[49] 27.22791 27.56918 
```

另一种方法是只生成所需的值

```
want <- test < 0.69
res <- test ## copy vector of correct length
res[want] <- rnorm(S <- sum(want), 25, 4)
res[!want] <- rnorm(length(res) - S, 28, 4.3)

R> res
 [1] 27.85067 24.70574 24.84946 22.04696 22.27336 36.03795 29.82793 23.70292
 [9] 25.24064 22.64442 27.12598 18.92642 26.22623 18.85420 26.97382 23.79610
[17] 32.55148 31.81162 22.88688 25.33725 37.48624 22.39162 24.77241 17.34256
[25] 29.70633 18.34011 23.14588 20.53632 26.90338 21.99672 33.34867 25.06958
[33] 19.85480 18.43758 21.87467 26.80075 27.37908 24.92576 28.89241 23.72773
[41] 37.92431 21.28255 28.45495 19.05016 20.69923 29.96509 29.00012 22.51493
[49] 27.66824 26.56380 
```

这显然与之前的数字不同，但这仅仅是因为我们生成的随机数更少。我怀疑这会比`ifelse()`大多数问题更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:59:35.113

您需要`any`or `all`，它将逻辑向量转换为单个逻辑（实际上是长度为 1 的向量）。

# c# - 试图创建一个包含结构的数组？

> ID：11757619
> 
> 赞同：3
> 
> 时间：2012-08-01T10:47:55.647
> 
> 标签：c#, .net, arrays, class, struct

我试图让一个数组保存一个包含两个元素的结构，以保存一个 Xml 标记名称及其值。

我想让数组像这样工作：

```
MyArrayStruct[Count].TagName = "Bla Bla";  
MyArrayStruct[Count].TagValue = "Bla Bla Bla"; 
```

有人可以帮我完成这项工作。

* * *

```
public struct TagContents
{
     String TagName;
     String TagValue;        
}; 
```

我在将 Array 声明为 Struct 以使其按我想要的方式工作时遇到问题，我将它的工作方式与注释代码一样。

```
public void LoadXML()
{
    if (File.Exists("Data.xml"))
    {
        //Readin XML
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load("Data.xml");
        XmlNodeList dataNodes = xmlDoc.SelectNodes("//FieldData");
        //Count the nodes
        int Max = 0;
        foreach (XmlNode node in dataNodes)
        {
            Max = Max + 1;
        }

        int Count = 0;
        //TagContents MyXmlPointer = new TagContents();
        // MyXmlPointer[] ArrayNode;
        //  ArrayNode = new MyXmlPointer[Max];

        foreach (XmlNode node in dataNodes)
        {
            // ArrayNode[Count].TagName =node.SelectSingleNode("Have not found what to put here yet but will get there").Name;
            // ArrayNode[Count].TagValue =node.SelectSingleNode("Have not found what to put here yet but will get there").InnerText;                      
        }
    }
    else
    {
        MessageBox.Show("Could not find file Data.xml");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:52:23.283

制作字段`public`：

```
public class TagContent
{
    public String TagName;
    public String TagValue;
}; 
```

并使用它，我建议使用泛型（Like [`List<>`](http://msdn.microsoft.com/en-us/library/6sh2ey19)）：

```
var tags = new List<TagContent>();

tags.Add(new TagContent{TagName = "aaa", TagValue = "vvv"});

// use it:
// get value of 'TagName' of item 5:
var tagname5 = tags[5].TagName; 
```

# vb.net - 如何在 vb.net winform 中嵌入 swf 对象？

> ID：11757620
> 
> 赞同：0
> 
> 时间：2012-08-01T10:47:56.630
> 
> 标签：vb.net, visual-studio-2010, flash, embedded-resource

我有一个 swf 对象，我想使用 COM Shockwave Flash Object 控件嵌入它。我四处搜索，但我只找到了涉及使用文件或互联网 URL 的答案。当我使用一键发布方法时，我想有一种方法可以将我的 flash 对象*作为资源文件*嵌入到我的应用程序中。

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:05:05.190

我过去做过类似的事情，但从数据库表而不是资源加载

Swf 是表单上的一个 AxShockwaveFlash 对象，用于显示 flash 项。

如果您将资源添加为 .swf 并将 FileType 设置为二进制，则它应该将其作为字节数组返回，然后您可以在 memorystream 构造函数中使用它

```
Using ms As New IO.MemoryStream(my.resources.TheFlashFile), fs As New IO.MemoryStream()
                Using bwriter As New IO.BinaryWriter(fs)
                    ' Write length of stream for flash AxHost.State 
                    bwriter.Write(8 + ms.ToArray.Length)
                    bwriter.Write(&H55665566)
                    ' Length of flash movie file 
                    bwriter.Write(ms.ToArray.Length)
                    bwriter.Write(ms.ToArray)
                    fs.Seek(0, IO.SeekOrigin.Begin)
                    swf.OcxState = New AxHost.State(fs, 1, False, Nothing)
                End Using
            End Using 
```

# boost-python - 访问已包装在 Python 中的 C++ 中的变量

> ID：11757621
> 
> 赞同：0
> 
> 时间：2012-08-01T10:47:59.197
> 
> 标签：boost-python

如何通过下面的 BoostPython 方法访问已包装在 Python 中的 C++ 中的变量（在这种情况下，我想访问`y`）：

```
boost::python::exec("y = x", main_namespace); 
```

提前致谢。

编辑：假设 y 是一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:27:00.160

所有 Python 类、函数、变量等都包含在 dicts 中。由于您似乎已经有了`main_namespace`字典，您可以这样做：

```
using namespace boost::python;

// .................................................

object y = main_namespace["y"];
std::string yString = extract<char const*>(y); 
```

# c# - 动态创建 ImageButtons

> ID：11757622
> 
> 赞同：0
> 
> 时间：2012-08-01T10:48:14.457
> 
> 标签：c#, asp.net, html

我想要做的是创建以下

```
 for(int i = 0; i < numberOfAnswers; i++){
        imgString = imgString + "<td><asp:ImageButton id='" + questionName + "' ImageURL='Styles/unClicked.png' runat='server' /></td>";
    } 
```

但是当我使用 HTMLTextWriter 写出字符串时，它 attualy 将标签写出 exsatly 而不是将它们转换为 html。

我是否必须用 HTML 编写它们并使用 javascript 来调用方法，或者有没有一种方法可以做到这一点而不会变得那么复杂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:52:19.353

您应该实例化`ImageButton`对象并将它们添加到页面的控制结构中。然后他们将呈现自己的标记，注册事件等。

```
for(int i = 0; i < numberOfAnswers; i++){
    var ib = new ImageButton();
    var td = new HtmlTableCell();

    // assign values, like ID, Image URL, event handlers, etc. here
    ib.ID = "button_" + i;
    ib.ImageUrl = "foo";
    ib.Click += ( sender, e ) => {
        // anonymous event handler
    };

    // "container" can be any control on the page, such as a table row
    container.Controls.Add( td );
    td.Controls.Add( ib );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:50:53.560

使用 HTML.Encode() 方法写出字符串

检查以下网址

[http://www.dotnetperls.com/encode-html-string](http://www.dotnetperls.com/encode-html-string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:59:33.790

```
 for (var i = 0; i < 5; i++)
    {
        ImageButton imgBtn = new ImageButton();
        imgBtn.ID = "question" + i;
        imgBtn.ImageUrl = "Styles/unClicked.png";

        PlaceHolder1.Controls.Add(imgBtn);
    } 
```

PlaceHolder1 是 runat 服务器控件，您想在其中添加您生成的按钮。

# php - 获取linkedin个人资料

> ID：11757624
> 
> 赞同：0
> 
> 时间：2012-08-01T10:48:21.337
> 
> 标签：php, linkedin

我现在正在构建新的应用程序，我需要在成功验证后获取用户的[linkedin](http://www.linkedin.com/)配置文件信息。我根据文档创建了以下步骤：

```
https://developer.linkedin.com/documents/getting-started-javascript-api 
```

我已将以下代码放在头部 -

```
 <script type="text/javascript" src="http://platform.linkedin.com/in.js">
          api_key: meufo7vcx8ul
          authorize: true
        </script> 
```

并将其放入正文部分，但我对这部分代码感到困惑：

```
<script type="in/Login">
    Hello, <?js= firstName ?> <?js= lastName ?>.
</script> 
```

当我尝试运行此页面时，它会提供`syntax error`. 我不明白我从哪里得到配置文件信息数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:26:07.167

对于您提到的错误，**关闭 PHP 短打开标签。**. 并获取个人资料信息：请参阅此链接：[Linkedin Profile Info](http://developer.linkedinlabs.com/tutorials/jsapi_profile/)示例代码。

或尝试：

```
<script type="in/Login">
Hello, <?php echo '<' . '?js= firstname ?' . '>' ; ?> <?php echo '<' . '?js= lastName ?' . '>' ; ?>.
</script> 
```

# android - 在 telephonyService.endCall() 之后隐藏传递的呼叫？

> ID：11757628
> 
> 赞同：1
> 
> 时间：2012-08-01T10:48:52.710
> 
> 标签：android

在我的应用程序中，我以这种方式使用自动结束通话来获取号码列表...

```
public class PhoneStateBroadcastReceiver extends BroadcastReceiver {
private static final String TAG = null;
String incommingNumber;
String inc= "+799999999";

public void onReceive(Context context, Intent intent) {
Bundle bundle = intent.getExtras();

if(null == bundle)
        return;
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);       
try {
    // Java reflection to gain access to TelephonyManager's
    // ITelephony getter
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    Log.v(TAG, "Get getTeleService...");
    Class c = Class.forName(tm.getClass().getName());
    Method m = c.getDeclaredMethod("getITelephony");
    m.setAccessible(true);
    com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);  
    Bundle b = intent.getExtras();
    incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
    Log.v(TAG,incommingNumber );
    Log.v(TAG,incno1 );
    if ( incommingNumber.equals(inc) )
    {
         telephonyService = (ITelephony) m.invoke(tm);
           telephonyService.silenceRinger();
    telephonyService.endCall();
    Log.v(TAG,"BYE BYE BYE" );
    }
    else{

    telephonyService.answerRingingCall();
    Log.v(TAG,"HELLO HELLO HELLO" );
    }

} catch (Exception e) {
    e.printStackTrace();
    Log.e(TAG,
            "FATAL ERROR: could not connect to telephony subsystem");
    Log.e(TAG, "Exception object: " + e);
}

}
    } 
```

它适用于我...但未接来电显示在手机中...是否可以隐藏而不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:44:13.513

是的，使用以下行来取消呼叫通知。 `telephonyService.cancelMissedCallsNotification();`

# powershell - 括号或引号破坏了 powershell 命令

> ID：11757638
> 
> 赞同：1
> 
> 时间：2012-08-01T10:49:06.640
> 
> 标签：powershell

我知道这一定很简单，但我不知道该怎么做。我在通过 XML 读取的变量中有一个字符串。该变量名为 $software，其值为 Java Flash Reader "Flash (IE)"

然后稍后从命令行启动：

```
C:\Deployment\Ninite\NiniteOne.exe /select $xmlsoftware $installtype /remote file:"$NiniteTargets" $shortcuts $autoupdate /cachepath "$NiniteCache" $userinterface "$NiniteLog" 
```

该命令在到达“Flash (IE)”部分时中断。我认为括号在那个变量中发生了一些事情，但我不确定。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:00:15.540

首先：为什么委托`cmd`只是为了运行一个程序？PowerShell 也是一个外壳：

```
blabla.exe /select $software /silent 
```

但问题比这复杂一点，即使`cmd`去掉了 's 参数解析的复杂性：

```
PS> $software = 'Java Flash Reader "Flash (IE)"'
PS> .\echoargs.exe /select $software /silent
arg 1: /select
arg 2: Java Flash Reader Flash
arg 3: (IE)
arg 4: /silent 
```

您可以将值中的引号替换`\"`为使其工作，显然：

```
PS> $software = $software -replace '"', '\"'
PS> .\echoargs.exe /select $software /silent
arg 1: /select
arg 2: Java Flash Reader "Flash (IE)"
arg 3: /silent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:29:04.867

尝试`$software`这样声明：

```
$software = $('Java Flash Reader "Flash (IE)"') 
```

另一种选择是尝试像这样声明：

```
$software = "Java Flash Reader `"Flash `(IE`)`"" 
```

添加背部抽动以逃避`(`和`"`

# javascript - 如何加载有关当前页面的特定代码？

> ID：11757641
> 
> 赞同：0
> 
> 时间：2012-08-01T10:49:19.240
> 
> 标签：javascript, requirejs

我正在构建一个复杂的网络应用程序，为了简单起见，我在各种文件中制作了各种模块（对象）。某些页面可能需要这些模块，而其他页面则不需要。

出于这个原因，我想避免为任何页面加载所有模块，从而增加无用请求的数量。

到目前为止，我是这样工作的：

1.  我包括所有*需要*的库
2.  之后，我`jQuery(function() {});`使用当前页面的具体 #ids 或 .classes 参数实例化这些库

一切正常，但由于我的应用程序变得非常简单，我想用 RequireJS 管理我的 JS。

这就是事情开始让我有点困惑的地方。

我知道我可以在需要时使用 加载我的模块`require(['module1', 'module2', 'etc'], function (module1, module2, etc) {})`，但我怎么说：

> “在此页面上，您加载这些模块，并使用这些 #id 和 .classes 实例化它们”

和

> “在此其他页面上，您仅使用此#other-id 加载该模块”

?

例如，module1 将从 api 加载数据，并将它们列出到作为参数给出的特定表中：

```
// in page 1
var mod1 = new Module1($('#content>table');
mod1.init(); // will load the data from the api with the url located at <table data-api-url="http://....">

// in page 2
var mod1 = new Module1($('#content .items>table'); // The table where we want the data to be populated is not at the same position!
mod1.init(); 
```

这意味着，根据页面，我必须以不同的方式加载我的模块。这就是我不知道如何使用 RequireJs 的方式：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:34:49.037

您需要的是每个页面的 javascript 文件。该文件将负责执行您的页面特定代码。

我假设您将使用 r.js 来优化和打包您的代码。

我们可以将 Module1、Module2 等解释为库，因为它们将在多个页面上使用。*为避免浏览器对每个库模块*执行一个请求，您可以将此模块包含在优化的*主*文件中：

像这样配置构建配置文件的“模块：”属性：

```
...
modules: [
   {
       name: "main" // this is your main file
       includes: [
          "module1",
          "module2",
          "etc..."
       ]
   }
]
... 
```

通过这样做，你告诉 requirejs 是这样的：优化我的“main.js”文件并在其中包含它的所有依赖项，还包括“module1”、“module2”等。你必须这样做，因为在你的主文件中，你不要在 require()/define() 调用中包含这些模块，但如果特定于页面的模块需要它们，您仍然希望它们可用。您不必为您拥有的每个库模块执行此操作，只需为您的大多数页面使用的那些模块执行此操作。

然后，为您的页面创建一个 javascript 文件以使用这些模块：

```
define(function(require, exports, module) {
   var $ = require("jquery"),
       module1 = require("module1");

   var mod1 = new Module1($('#content>table'));
   mod1.init();       

   //other page specific-code.
}); 
```

然后在 html 文件上：

```
<script data-main="main" data-start="home" src="require.js"></script> 
```

因此，当页面加载时，它会请求 require.js，然后请求 main.js，然后再请求 home.js，仅此而已。

我将放置另一个问题的链接，以便此答案获得一些上下文：[如何在多页项目中使用 RequireJS 构建配置文件 + r.js](https://stackoverflow.com/questions/11674824/how-to-use-requirejs-build-profile-r-js-in-a-mult-page-project/11730147#11730147)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T08:31:43.693

RequireJS 的创建者实际上做了一个使用页面特定主文件的示例项目：[https ://github.com/requirejs/example-multipage](https://github.com/requirejs/example-multipage)

# java - Cygwin CTRL-C（信号中断）无法正常工作 - JVM 关闭挂钩未启动

> ID：11757643
> 
> 赞同：18
> 
> 时间：2012-08-01T10:49:28.120
> 
> 标签：java, cygwin, interrupt, sigint, shutdown-hook

我正在开发一个 Java 应用程序，它利用关闭挂钩来清理程序的终止/中断，但我注意到 Cygwin 的 CTRL-C 实现似乎不会触发关闭挂钩。从表面上看，它似乎已经中断了进程，将控制权交还给了命令行，但是根本没有触发进程的关闭挂钩，因此不会发生清理。

在 cmd 他们被抓住了，但由于各种限制，我需要以某种方式让他们在 Cygwin 中工作。

有没有办法通过 Cygwin 在正在运行的进程中触发 SIGINT，或者可能是我可以用来清理中断和终止的关闭挂钩的替代方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-06T19:07:51.420

Bash 通过中间 bash 进程（bash shell -> bash -> java）调用非 cygwin (windows) 可执行文件。当您键入 Ctrl-C 时，bash 进程会收到一个 SIGINT 并杀死子 java 进程，因此不会调用关闭挂钩。Windows 进程不知道 SIGINT、SIGTERM 或 SIGKILL 等信号。

如[-Xrs](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)选项文档中所述，java 进程为 CTRL_C_EVENT windows 事件注册控制台控制处理程序，并触发调用关闭挂钩的正常终止。要让 Ctrl-C 按预期工作，您需要确保 java 进程接收到它，但现在它被 bash 拦截并且没有传递给子进程。

这个问题可以重述为：如何让 Cygwin 将 Ctrl-C 转发到 Windows 控制台进程？

注意：上述 bash 行为已在版本 1.7.25 上得到验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:44:33.767

[这个线程](http://stream-recorder.com/forum/killing-rtmpsrv-rtmpdump-inside-windows-t14051.html)可能会有所启发。一些选项

```
timeout 1d <command> 
```

或者

Howard Chu 的[Ctrl-C 补丁](http://thread.gmane.org/gmane.comp.gnu.mingw.msys/3793/focus=3797)

# javascript - 用jQuery加载页面全宽和屏幕（或窗口）的高度？

> ID：11757646
> 
> 赞同：1
> 
> 时间：2012-08-01T10:49:46.013
> 
> 标签：javascript, jquery, html, css

我不知道这是否可能，并且我已经尝试过寻找解决方案，但是一点运气都没有。

我正在尝试使用动画 gif (loader-bar.gif) 的整页加载屏幕，而背景稍微透明（或模糊）。我想这可以通过 jQuery 实现，但我真的不明白如何实现这一点？

我自己已经尝试了几件事，但总是导致相同或相似的问题；或动画 gif 在页面加载和/或加载器页面未覆盖整个区域时不显示动画，尤其是在显示额外内容时（即使高度：100% 也不显示；唯一的“修复”是通过使用 height:300%; 但这当然不是解决方案）。

所以我决定重做全屏/窗口加载页面，大概jQuery可以正确完成这项工作吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T11:09:50.867

我可能会这样解决它：[尝试演示](http://jsfiddle.net/EWkHf/)

**优点是**，覆盖的内容居中，您不会被困在背景图像上。因此，您可以将任何内容放入叠加层，例如文本“待命”加上动画 gif。

### CSS

```
body, html {
    margin:         0;
    padding:        0;
}

div.overlay {
    display:        table;
    position:       fixed;
    top:            0;
    left:           0;
    width:          100%;
    height:         100%;
}
div.overlay > div {
    display:        table-cell;
    width:          100%;
    height:         100%;
    background:     #ccc;
    text-align:     center;
    vertical-align: middle;
} 
```

### HTML

```
<div class="overlay"><div>CENTERED ICON</div></div> 
```

### JavaScript

```
// on load finished
$(window).load(function() {
    // select element and fade it out
    $('.overlay').fadeOut();
}); 
```

**请注意**`$(window).load()`，当所有内容都加载完成时，您应该使用as this fires，因此也应使用图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:56:09.287

尝试定义一个元素 - 或通过 js 附加它 - 作为正文中的第一个节点，例如

```
<div id="load">Please wait</div> 
```

用这种风格

```
html, body, #load { height: 100%; width: 100%; }
#load {
   position    : fixed;
   z-index     : 1; /* or higher if necessary */
   top         : 0;
   left        : 0;
   overflow    : hidden;
   text-indent : 100%;
   font-size   : 0;
   background  : url(some-animated-loader.gif) center no-repeat;
} 
```

`load`然后在或`DomReady`事件发生时删除（或隐藏）该 div

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T11:02:50.887

尝试这样的事情-> [http://jsfiddle.net/3wU6C/5](http://jsfiddle.net/3wU6C/5)

# php - ftp_put(): TYPE 现在是 8 位二进制。为什么它给我这个警告？

> ID：11757649
> 
> 赞同：0
> 
> 时间：2012-08-01T10:50:06.033
> 
> 标签：php, ftp

我在 PHP 中有以下代码：

```
$connection = @ftp_connect (IP of the server, 21);
ftp_login ($connection, User in FTP, Password in FTP);

ftp_pasv ($connection, true);
ftp_put ($connection, Remote File, Local file, FTP_BINARY); 
```

我创建了到 FTP 的连接并且可以登录，但是**ftp_put**函数总是上传一个带有警告的空文件：

```
Warning:  ftp_put(): TYPE is now 8-bit binary 
```

但是，当我将 FTP_BINARY 更改为 FTP_ASCII 时，文件会上传，但由于“特殊字符”（这是一张 jpg 照片），它的内容与“原始文件”不同。问题是：

为什么不使用 FTP_BINARY 并向我显示此警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-04T12:28:26.513

这些警告可以在 FTP_BINARY 或 FTP_ASCII 中与 ftp_put() 或 ftp_get() 一起出现：

*   警告：ftp_get(): TYPE 现在是 8 位二进制
*   警告：ftp_get(): TYPE 现在是 ASCII
*   警告：ftp_put(): TYPE 现在是 8 位二进制
*   警告：ftp_put(): TYPE 现在是 ASCII

您可以使用@ftp_put 或@ftp_get 将它们静音，但在“get”的情况下，目标文件会被系统地删除而不被替换。

当放置在 ftp_put() 或 ftp_get() 之前，被动模式必须更正它们：

```
 ftp_pasv($connection, true); 
```

# html - html中的marquee标签适用于水平方向但不适用于垂直方向

> ID：11757651
> 
> 赞同：0
> 
> 时间：2012-08-01T10:50:14.937
> 
> 标签：html, marquee

选框标签完美地适用于水平方向，但是当我将其方向设置为向上或向下时，发生的情况是图片仅向下滚动到屏幕/页面的一半。我希望它一直滚动到页面底部，但事实并非如此。为什么？

```
 <html>
        <marquee behavior="scroll" direction="down">
           <img src="Blue Hills.jpg" />
           <img src="Water lilies.jpg" />
           <img src="Sunset.jpg" />
        </marquee>

   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:10:26.507

该`marquee`属性 `height="100%"`应该可以解决问题。

请注意，高度`marquee`是相对于驻地内的容器的`marquee`。在您没有任何容器的情况下，`marquee`它将占据整个屏幕

`marquee`标签实际上是一种老式的 HTML 技术，AFAIK 未在现代网站中使用。

不过，如果您真的想要这样的动画，您应该考虑查看[jQuery](http://jquery.com/)替代品，例如[jScroller](http://jscroller.markusbordihn.de/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:00:33.797

[现场演示](http://jsfiddle.net/XAzv5/5/)

[http://jsfiddle.net/XAzv5/5/](http://jsfiddle.net/XAzv5/5/)

# java - Java方法中多参数和数组参数的区别

> ID：11757653
> 
> 赞同：1
> 
> 时间：2012-08-01T10:50:17.777
> 
> 标签：java, arguments

我有一个接受多个参数的方法：`void doodle(Object o, Object... objects)`.

有什么方法可以区分`objects`是真正的数组还是仅由多个参数构建的数组？

`void doodle(Object o, Object[] objects)`Java 中不允许重载类似的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:52:19.043

没有办法区分，因为没有真正的区别。

`Object...`只不过是语法糖，在底层，*真正的*方法签名有`Object[]`，这就是为什么你不能重载它，它基本上是一样的。

对于您的特定用例，您可以测试该方法是否具有可变参数并相应地创建可视化，看看这是否有帮助：

[http://java.sun.com/javase/6/docs/api/java/lang/reflect/Method.html#isV​​arArgs%28%29](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Method.html#isVarArgs%28%29)

# qt - appendRow 后带有 QStandardItemModel 的 QSortFilterProxyModel 不起作用

> ID：11757657
> 
> 赞同：3
> 
> 时间：2012-08-01T10:50:26.720
> 
> 标签：qt, qt4, qstandarditemmodel, qsortfilterproxymodel

这是我得到的：

*   一个`QTreeView`小部件（*）；
*   源模型`MainModel`继承自`QStandardItemModel`. 没有重新实现虚`data() const`方法；
*   代理`MainFilterProxyModel`继承自`QSortFilterProxyModel`；

那个树：

```
[PERIOD 1]
   [CHILD 1]
   [CHILD 2]
      [SUBCHILD 2.1]
      ...
   [CHILD N]
[PERIOD 2]
...
[PERIOD N] 
```

所以主要问题是当我试图添加一个像 (**) 代码那样的**CHILD-row时。**过滤器代理模型，在文档被添加到源模型后，不知道新行，也没有在树上显示。

我确定代理在方法完成工作`QStandardItemModel`时没有收到信号`appendRow`，因此代理无法过滤新行，也没有使其可见。

有什么帮助吗？

谢谢。

PS：如果我关闭代理，一切都很好。但问题不在于代理。代理只是没有得到关于附加到主源模型的新行的信号......

* * *

(*)*这里是`QTreeView`*：

```
MainView::MainView( QWidget* parent /* = 0 */ ) : QTreeView( parent )
{
     if( !model_ )
     {
          model_ = new MainModel( this );
     }

     if( !proxy_ )
     {
          proxy_ = new MainFilterProxyModel( this );
          proxy_->setDynamicSortFilter( true );
          proxy_->setSourceModel( model_ );

          setModel( proxy_ );
     }
} 
```

* * *

(**)*这是我的附加功能*：

```
void MainModel::addRow( const DocumentPtr& document, QStandardItem* parentItem )
{
     assert( document );

     QList< QStandardItem* > items;
     items << ( new QStandardItem );
     items << ( new QStandardItem );
     items << ( new QStandardItem );
     items << ( new QStandardItem );
     items << ( new QStandardItem );
     items << ( new QStandardItem );
     items << ( new QStandardItem );

     updateRow( document, items );

     if( !parentItem )
     {
          BOOST_FOREACH( const TimePeriod& period, TimePeriod::all() )
          {
               if( period.contains( QDateTime::fromTime_t( document->creationDate() ) ) )
               {
                    QStandardItem* periodItem = itemByPeriod( period );
                    Q_ASSERT( periodItem );

                    periodItem->appendRow( items );

                    break;
               }
          }
     }
     else
     {
          parentItem->appendRow( items );
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T17:37:06.367

建模的基类是`QAbstractItemModel`. 最好使用抽象类的方法来做你想做的事。`QStandardItemModel`是抽象方法的简单实现，`QAbstractItemModel`并且大多数`QStandardItemModel`新方法由重新实现的抽象函数使用。这是使用抽象类方法添加项目和子项目的代码：

```
QAbstractItemModel * pModel = new QStandardItemModel(parent);

int nRows = pModel->rowCount();
pModel->insertRow(nRows); // this will emit rowsAboutToBeInserted() and rowsInserted() signals
pModel->insertColumn(0); // this will emit columnsAboutToBeInserted() and columnsInserted() signals
const QModelIndex indexFirstItem = pModel->index(nRows, 0);
pModel->setData(indexFirstItem, "Item text"); // this will emit dataChanged() signal
int nChildRows = pModel->rowCount(indexFirstItem);
pModel->insertRow(nChildRows, indexFirstItem); // this will emit rowsInserted()
pModel->insertColumn(0, indexFirstItem); // we also need to do this for the item's children
const QModelIndex indexChild = pModel->index(nChildRows, 0, indexFirstItem);
pModel->setData(indexChild, "Child item text"); 
```

如果我们尝试使用 QStandardItemModel 方法做同样的事情，它看起来像：

```
QStandardItemModel *pModel = new QStandardItemModel(parent);
QStandardItem *pItem = new QStandardItem("Item text");
pItem->appendRow(new QStandardItem); // pItem is not yet added to pModel and rowsInserted won't be emitted
pModel->appendRow(pItem); // this will probably emit rowsInserted() signal but since we set tha text of the item when creating the pItem the dataChanged() signal won't be emitted. 
```

因此，如果您确实`pItem->appendRow()`添加了子项目并且 pItem 尚未添加到模型中，您可能不会收到`rowsInserted()`信号，因此不会通知代理模型。根据我的经验，第一种方法效果更好，并且更健壮，尽管您需要编写几行额外的代码。直接使用`QStandardItemModel`方法通常会以丢失信号或其他问题而告终。您需要查看的只是文档`QAbstractItemModel`和`QModelIndex`文档。

# django - 如何使用 Django 和tastepie 注册匿名用户？

> ID：11757658
> 
> 赞同：2
> 
> 时间：2012-08-01T10:50:28.673
> 
> 标签：django, tastypie

```
class CreateUserResource(ModelResource):
    class Meta:
        allowed_methods = ['post']
        object_class = User
        authentication = ApiKeyAuthentication()
        authorization = DjangoAuthorization()
        include_resource_uri = False
        fields = ['username']
        models.signals.post_save.connect(create_api_key, sender=User)

    def obj_create(self, bundle, request=None, **kwargs):
        username, password = bundle.data['username'], bundle.data['password']
        #try:
        bundle.obj = User.objects.create_user(username, '', password)
        #except IntegrityError:
            #raise BadRequest('That username already exists')
        #return bundle 
```

我正在使用此资源来创建新用户。但为了做到这一点，我需要一个 api_key。由于我是匿名的，我怎样才能获得 api_key？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:08:00.537

你为什么不创建一个未经身份验证/授权的用户？

```
authentication = Authentication()
authorization = Authorization() 
```

ApiKeyAuthentication() 需要一个 appr。数据库表“tastypie_apikey”中的条目...

这是我在未经身份验证时创建用户帐户的方式：

```
class CreateUserResource(ModelResource):
    class Meta:
        resource_name = 'user'
        allowed_methods = ['post']
        object_class = User
        authentication = Authentication()
        authorization = Authorization()
        include_resource_uri = False
        fields = ['username']

    def obj_create(self, bundle, request=None, **kwargs):
        try:
            bundle = super(CreateUserResource, self).obj_create(bundle, request, **kwargs)
            bundle.obj.set_password(bundle.data.get('password'))
            bundle.obj.save() 
            '''assign user to a group w/ sufficient permissions''' 
            user = User.objects.get(id=bundle.obj.id)
            group = Group.objects.get(id=1)
            user.groups.add(group)
        except IntegrityError:
            raise BadRequest('That username already exists')
        return bundle 
```

# android - Sensor.TYPE_ROTATION_VECTOR 返回 null

> ID：11757659
> 
> 赞同：5
> 
> 时间：2012-08-01T10:50:32.740
> 
> 标签：android, android-sensors

当我在设备上调用 SensorManager.getDefaultSensor(Sensor.TYPE_ROTATION_VECTOR) 时，它返回 null。我知道这是一个虚拟传感器（做一些巧妙的数学运算以从真实传感器中获取值）。我返回 null 因为我的设备没有 ROTATION_VECTOR 工作所需的硬件传感器之一。

所以我的问题是：

*   使 ROTATION_VECTOR 工作需要哪些硬件传感器
*   什么物理设备可以做到这一点（例如，如果我今天购买平板电脑并希望旋转矢量传感器工作，我需要购买什么设备）？
*   在没有 ROTATION_VECTOR 传感器的情况下，我必须使用哪些选项来计算设备方向？

编辑：我们就此与三星进行了交谈，并确定平板电脑中的陀螺仪传感器已损坏，这就是为什么我们将旋转矢量传感器归零的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T12:36:26.723

如果您阅读有关如何为此传感器[定义坐标的](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)`Sensor.TYPE_ROTATION_VECTOR:`文档（查找部分），那么所需的硬件是显而易见的：`accelerometer`和`magnetometer`. 陀螺仪也可用于获得更稳定的结果（我在某处链接描述了该传感器如何工作但找不到它）。

# c++ - 一个关于 C++ 组件化的想法

> ID：11757661
> 
> 赞同：3
> 
> 时间：2012-08-01T10:50:37.787
> 
> 标签：c++, oop, design-patterns, components

我一直在尝试理解与 C++ 相关的组件化（与 OOP 概念相反，也称为面向组件的编程）。

我在互联网上对此进行了研究，但可用的结构化信息很少。windows COM 对象看起来非常组件化。我发现[http://c2.com/cgi/wiki?ComponentDefinition](http://c2.com/cgi/wiki?ComponentDefinition)很有用。

什么是最好和最简单的 C++ 代码示例来说明组件化概念？

我有一些高层次的想法，比如：

1.  我有一个英文*单词*。一个*词*由几个符号或 *字符*组成。现在，每个*字符*可以有几种类型，如 *字母、数字、标点符号、空格等。*所以，每个 *字母、数字等。*代表*基本组成部分*，在此基础上，一个*词*将形成并存在。*单词*成为一个聚合组件（*符号）*，基于它形成一个*句子*等等。

2.  *质子、中子和电子*是形成*原子*的*单个集合成分*。

 *那么，复合设计模式与组件化概念有什么不同呢？

请指导我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:29:44.853

您提到的“[复合](http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29)”是一种设计模式。设计模式是在软件设计过程中适用的问题-解决方案对。

如果我正确理解了您对“组件化”一词的解释，那么它是一种架构原则，它遵循比设计更高的抽象级别来定义 SW 的结构。

（如果你对我所说的架构感兴趣，请参阅[这篇](http://www.sei.cmu.edu/library/assets/ICSE03-1.pdf)试图正式定义术语设计/架构的论文。）

如果您稍微深入一点，“复合”有助于使用相同的界面处理容器和内容。例如，如果您在示例中应用“复合”模式，您可以定义一个接口“粒子”，然后可以将原子/电子/质子/中子视为粒子，同时还保持容器/内容关系。这是一个非常具体的问题-解决方案对，只能在某些情况下出现。

但是，“组件化”可以适用于更广泛的情况，如果一开始就存在任何容器-内容关系，您不会受到打扰。即使组件之间存在这样的关系，您也不在乎用相同的接口对待它们。*

# unicode - 如何在 UTF-16 LE <-> BE 之间进行转换？

> ID：11757669
> 
> 赞同：1
> 
> 时间：2012-08-01T10:51:00.387
> 
> 标签：unicode, endianness, utf-16

如果我想转换 UTF-16 BE <-> LE，我应该考虑什么？我可以把它们当作一个普通的 2 字节整数数组吗？或者我应该遵循一些特殊的 Unicode 算法来处理一些特殊情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:54:09.923

您只需要对代码单元进行字节重新排序，从而获取两个字节，交换它们并将它们写回。这就是所有需要考虑的。

但是通常有一种简单的方法可以以一种编码读取流并以另一种编码将其写回。通常具有可忽略的性能缺陷（尤其是在 UTF-16 情况下）。因此，为了使您的代码更清晰，您可能应该选择这样的解决方案。但是，无论您是否准确地知道输入编码，这种简单的方法都应该起作用。

# jquery - 将逗号分隔的输入框值拆分为jquery中的数组，并循环遍历它

> ID：11757671
> 
> 赞同：42
> 
> 时间：2012-08-01T10:51:09.160
> 
> 标签：jquery

我有一个隐藏的输入框，我从中检索逗号分隔的文本值（例如`'apple,banana,jam'`）使用：

```
var searchTerms = $("#searchKeywords").val(); 
```

我想将值拆分为一个数组，然后循环遍历该数组。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-01T10:59:27.130

```
var array = $('#searchKeywords').val().split(","); 
```

然后

```
$.each(array,function(i){
   alert(array[i]);
}); 
```

或者

```
for (i=0;i<array.length;i++){
     alert(array[i]);
} 
```

或者

```
for(var index = 0; index < array.length; index++) {
     console.log(array[index]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:52:52.873

```
var array = searchTerms.split(",");

for (var i in array){
     alert(array[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T08:35:08.113

使用js split() 方法创建数组

```
var keywords = $('#searchKeywords').val().split(","); 
```

然后使用 jQuery.each() 函数循环遍历数组。正如[文档](http://api.jquery.com/jquery.each/)所说：

> 在数组的情况下，回调每次都会传递一个数组索引和一个对应的数组值

```
$.each(keywords, function(i, keyword){
   console.log(keyword);
}); 
```

# git - git：如何查看对单个分支的提交

> ID：11757672
> 
> 赞同：16
> 
> 时间：2012-08-01T10:51:09.143
> 
> 标签：git

一位同事从master创建了一个本地分支（'branchA'），做了一些工作，推送它，合并到master中，做了更多的工作并再次推送它。同时，其他同事一直在做其他分支，合并到master。

现在我需要拉分支A 来查看它。所以我做了一个`git pull`，`git checkout -b branchA origin/branchA`这很好。但是所有命令（git diff/log/show）都显示了在 repo 中所有分支的提交。

如何查看对 branchA 所做的所有提交与创建它的 master 版本的差异？

另外，我`git diff`如何针对 master 的当前 HEAD 进行分支，但只查看分支 A 中更改的文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T11:20:24.183

以下适用于您的第二个问题，即如何找到`branchA`与您当地当前版本的`master`. 您想使用“双点”语法`git log`来查看所有`branchA`不在`master`. 以机智：

```
git log master..branchA 
```

根据`git log`手册页：

```
SYNOPSIS
   git log [<options>] [<since>..<until>] [[--] <path>...]
   ...
   <since>..<until>
   Show only commits between the named two commits. When either <since> or <until> is omitted, it defaults to HEAD, i.e. the tip of the current branch.
   For a more complete list of ways to spell <since> and <until>, see gitrevisions(7). 
```

如果您想在其中一个`master`或中看到提交`branchA`，但不是在两个中都看到提交，您可以使用“三点”语法：

```
git log master...branchA 
```

`git diff`最后，您可以分别使用与, 即`git diff master..branchA`和完全相同的语法`git diff master...branchA`。

顺便说一句，如果您已`branchA`签出，您甚至不需要将其指定为`<until>`. 如果未指定， Git 将假定`HEAD`它，因此这两组命令是等效的：

```
git checkout branchA
git log master.. 
```

和

```
git log master..branchA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:27:43.813

1.  `git diff master..brnachA`：将比较master的HEAD和branchA之间的所有修改文件。
2.  `git diff master...brnachA`: 会将 branchA 与创建它的 master 版本进行比较。

仅供参考：`git diff`将在命令行中生成输出。如果您想在某些可视化工具中查看输出，请使用`git difftool`.

您也可以将所有`git diff`参数和选项传递给`git difftool`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:22:05.183

Git 提交不会保留有关他们提交的“哪个分支”的信息。他们只会在树上给你一个点，你可以从那里走回来。一旦发生合并，您无法从合并提交中确定哪个父级来自您开始的分支。[这将在此处](http://jhw.dreamwidth.org/1868.html)详细讨论。

这是我的理解。如果我错了，我很乐意得到纠正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:09:50.517

你可以使用 git log --branches=mybranch

这将显示特定分支的日志

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:30:26.417

git log HEAD..branch 当你在 master 分支上时。

在此处查看更多详细信息：[如何在 git 中获取分支上的更改](https://stackoverflow.com/questions/53569/how-to-get-the-changes-on-a-branch-in-git)

# java - Java 可恢复哈希计算

> ID：11757676
> 
> 赞同：8
> 
> 时间：2012-08-01T10:51:16.197
> 
> 标签：java, serialization, hash, resume

我想实现在服务器上上传的某些文件的可恢复的即时哈希生成。这些文件很大，所以我正在使用 MessageDigest 类的 update(byte[]) 方法（如此处所述，例如：[How can I generate an MD5 hash?](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java)），因为新字节来自 HttpServletRequest 的 InputStream。

一切都很顺利，但是，当我想添加可恢复的上传支持时，它变得很有趣。如果上载过早终止，则不完整的文件将存储在磁盘上。但是，控制器（和底层服务）退出，因此 MessageDigest 对象丢失。在此之前，我是否可以将 MessageDigest 对象序列化到磁盘（或 DB，没关系），这样当我再次反序列化对象时，它会记住它的临时状态，所以当我恢复上传时（从确切的它之前被终止的地方，所以没有字节是多余的，也没有一些字节丢失）并继续更新（）反序列化的MessageDigest，最终我得到相同的结果（哈希），就好像文件是一次上传的一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:46:50.280

获取自定义 MD5 实现之一，例如[this one](http://ostermiller.org/utils/src/MD5.java.html)或[this one](http://www.twmacinta.com/myjava/fast_md5.php)。使其可序列化或仅公开其内部状态。上传中止时保留状态，恢复上传时恢复状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:46:56.467

哈希计算起来很便宜（MD5 加倍；你确定你不想要 SHA1 吗？）。一旦您检测到上传已恢复，我建议您从头开始重新散列所有内容。除非上传量真的很大，否则运行时间应该很短——希望大的、中断的上传量很少。

# list - 无冲突/2

> ID：11757678
> 
> 赞同：1
> 
> 时间：2012-08-01T10:51:24.843
> 
> 标签：list, prolog

我正在尝试编写一个包含软件包和版本列表的程序。如果候选集中没有冲突的版本，它应该是真的。也就是说，如果没有列出不同版本的包。

```
?- conflict_free([cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.3']).
true.

?- conflict_free([cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.0']).
false.

?- conflict_free([gfortran, gcc, libc6, libc6], ['4.4.3', '4.4.3', '2.11.1', '2.11.1']).
true.

?- conflict_free([gfortran, gcc, libc6, libc6], ['4.4.3', '4.4.3', '2.11.1', '2.7.3']).
false. 
```

我尝试使用 position/4 来查找重复元素的索引，其行为如下：

```
?- positions([a, b, c, b, c, a, d, b, c], b, Posn, 0).
Posn = [1, 3, 7].

?- positions([cython, gcc, gcc], gcc, Posn, 0).
Posn = [1, 2]. 
```

我尝试递归地使用`position/4`来检查返回`Posn`是否 >= `2`，然后尝试使用版本列表中的索引并查看是否有任何不同的版本。但这对我不起作用...

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:37:50.997

首先，让我们`zip`列出列表，将它们组合成一对列表：

```
?- pairs_keys_values(PkgVer, [cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.3']).
PkgVer = [cython-'0.11.2', gcc-'4.4.3', gcc-'4.4.3']. 
```

`pairs_keys_values`如果你的 Prolog 没有它，它很容易实现。现在，摆脱重复的键值对：

```
?- pairs_keys_values(PkgVer, [cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.3']),
|    list_to_set(PkgVer, S).
PkgVer = [cython-'0.11.2', gcc-'4.4.3', gcc-'4.4.3'],
S = [cython-'0.11.2', gcc-'4.4.3']. 
```

这使用 SWI-Prolog 谓词`list_to_set/2`。您也可以使用`sort/2`. 解压集合：

```
?- pairs_keys_values(PkgVer, [cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.3']),
|    list_to_set(PkgVer, S),
|    pairs_keys_values(S, Packages, _).
PkgVer = [cython-'0.11.2', gcc-'4.4.3', gcc-'4.4.3'],
S = [cython-'0.11.2', gcc-'4.4.3'],
Packages = [cython, gcc] . 
```

最后，您可以检查是否`Packages`是带有 SWI`is_set`谓词的集合或其某种重新实现（提示：`sort/2`列表，然后检查长度是否发生变化）。所以，

```
conflict_free(Packages, Versions) :-
    pairs_keys_values(PkgVer, Packages, Versions),
    list_to_set(PkgVer, PkgVerSet),
    pairs_keys_values(PkgVerSet, PkgSet, _),
    is_set(PkgSet). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:52:15.133

这里有一个简单的实现：

```
conflict_free(Packages, Versions) :-
    \+ (nth1(I, Packages, P),
        nth1(I, Versions, A),
        nth1(J, Packages, P), J \= I,
        nth1(J, Versions, B), A \= B ). 
```

测试：

```
?- conflict_free([cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.3']).
true.

?- conflict_free([cython, gcc, gcc], ['0.11.2', '4.4.3', '4.4.0']).
false.

?- conflict_free([gfortran, gcc, libc6, libc6], ['4.4.3', '4.4.3', '2.11.1', '2.11.1']).
true.

?- conflict_free([gfortran, gcc, libc6, libc6], ['4.4.3', '4.4.3', '2.11.1', '2.7.3']).
false. 
```

nth1/3 它用于将包与位置处的版本配对，因此规则可以读取：

> 没有列出不同版本的软件包

# android - 当 TrafficStats tx 和 rx 值被重置？

> ID：11757679
> 
> 赞同：1
> 
> 时间：2012-08-01T10:51:29.347
> 
> 标签：android

我的应用程序使用 TrafficStats 类来读取每个应用程序的 tx 和 rx。我定期检查 tx 和 rx 值。我观察到的是这些值在设备重新启动或用户从 3g 切换到 wifi 时重置。我的问题是，除了这些活动之外，tx 和 rx 值何时重置以及 tx、rx 值的最大范围是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:34:05.210

`tx`并且`rx`值以`long`（4字节）返回。因此，对于`unsigned long`，最大值将是`2^32`。我相信当溢出时计数器也会重置。

# java - 调用另一个活动 android manifest xml

> ID：11757683
> 
> 赞同：0
> 
> 时间：2012-08-01T10:51:36.200
> 
> 标签：java, android, android-intent, android-manifest

我有两个独立的应用程序，我想在第一个应用程序中调用从第二个应用程序启动一个活动，这是我的代码：

```
Intent intent1 = new Intent(Intent.ACTION_MAIN);
intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent1.setComponent(new ComponentName("org.two.three.application","org.two.three.application.one));
Context H= context;
H.startActivity(intent1); 
```

在项目的 android 清单中，我有这段代码，我有一行：

```
<activity android:name=".one">
    </activity> 
```

但是我不断收到运行时错误，logcat 说：

> “找不到明确的活动类 {org.two.three.application/org.two.three.application.one}；您是否在 AndroidManifest.xml 中声明了此活动？”

谁能看到我的错误？我唯一能想到的是我的第一个活动包是`org.two.three.Class`，而第二个是`org.two.three.application.SecondClass`。这有关系吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:55:13.593

首先尝试删除您正在添加的那些代码

**

```
intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent1.setComponent(new ComponentName("org.two.three.application","org.two.three.application.one));
Context H= context; 
```

**

**然后将以下代码添加到 onClick 之类的操作方法中**

```
Intent intent = new Intent(this, NewActivity.class);
startActivity(intent);

Add your Android Manifest configuration file

   <activity android:name="NewActivity"></activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:54:59.453

您只需要公开您的活动即可。为此，只需添加

```
android:exported="true" 
```

到`<activity>`清单中的标签。

通常，活动对包外的其他组件不可用。这是标准的默认行为。但是，当然，如果您愿意，您可以使它们可用。

# silverstripe - 银条混乱

> ID：11757686
> 
> 赞同：1
> 
> 时间：2012-08-01T10:51:39.433
> 
> 标签：silverstripe

我对如何在 SilverStripe 3 中使用 RESTful 服务器 API 有点困惑。我刚刚开始学习，以下内容让我感到困惑。

> 我们网站上的所有内容都存储在数据库中。作为 DataObject 类的子类的每个类在我们的数据库中都有自己的表。
> 
> 这样一个类的每个对象将对应于该表中的一行——这是我们的“数据对象”，模型-视图-控制器的“模型”。页面类型有一个数据对象，它代表我们页面的所有数据。它不是直接从 DataObject 继承，而是从 SiteTree 继承。我们通常创建一个“页面”数据对象，并为所有其他页面类型创建子类。这使我们能够定义在我们网站的所有页面上一致的行为。

我这样做是为了设置页面，但现在我正在学习 RESTful 服务器 API，它说要创建一个扩展 DataObject 的对象。

原谅我的无知，但扩展 SiteTree 不是一回事吗？

很困惑，所以会很感激一些启示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:11:19.843

如上所述，如果您扩展 SiteTree，那么您就是在扩展 DataObject，但会产生很多开销。其中一些开销可能对您有用，因为 SiteTree 提供了版本控制、层次结构和其他不错的技巧，使其成为您网站中页面的一个很好的类。

但是，如果您想管理大量对象，或者如果您不使用层次结构或版本控制模型，或者如果您只想自定义对象在 CMS 中的呈现或管理方式，那么最好扩展数据对象直接。[SilverStripe文档站点](http://doc.silverstripe.org/framework/en/)和[SSBits](http://www.ssbits.com/)上有各种关于此的教程

[这](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple/)也可能对您有用。

一旦您的 DataObject 子类为您工作得很好，您就可以开始向它添加 RestfulServer 功能。最基本的方法是在你的类中添加一个静态属性：

```
static $api_access = true; 
```

有关使用 RestfulServer 的更多信息，请[点击此处](https://github.com/silverstripe/silverstripe-restfulserver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:26:51.803

您是否看过以下网址：[http ://doc.silverstripe.org/framework/en/reference/restfulservice](http://doc.silverstripe.org/framework/en/reference/restfulservice)

此示例允许您以 RSS 格式提供数据。我不确定是否有一种简单的方法可以将数据输出为 JSON，但是网络上有很多将 rss 转换为 json 的示例，因此您可以简单地更新您的应用程序以使用这种格式并在需要时进行转换.

# android - 如何在android中的表中显示随机行

> ID：11757689
> 
> 赞同：2
> 
> 时间：2012-08-01T10:51:39.757
> 
> 标签：android

我必须从表格中选择一个随机行并将其显示在按钮和文本视图上......我正在使用它......

游标结果=sqldb.rawQuery("SELECT * FROM quiztable ORDER BY RANDOM() LIMIT 1",null );

```
 String ques=result.getString(1);
            String op1=result.getString(2);
            String op2=result.getString(3);
            String op3=result.getString(4);
            String ans=result.getString(5);
            txt17.setText(ques);
            btn10.setText(op1);
            btn11.setText(op2);
            btn12.setText(op3); 
```

但没有显示记录....我尝试尝试捕获块并使用 toast 显示错误....它说“请求索引 -1，大小为 1”

代码中的错误是什么？任何人都可以告诉它的解决方案吗？

先感谢您 ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:58:51.337

在从中取出项目之前，您没有移动光标。

行前

```
 String ques=result.getString(1); 
```

尝试调用：

```
result.moveToFirst(); 
```

光标始终默认位于位置 -1，即第一条记录之前的位置。两者`moveToFirst();`或`moveToNext();`都将使您获得第一条记录。

# ios - UIPopoverController 在 iPad 中的位置

> ID：11757690
> 
> 赞同：0
> 
> 时间：2012-08-01T10:51:46.137
> 
> 标签：ios, ipad, uipopovercontroller

我在按钮单击时打开了一个弹出窗口。

我想设置该视图的 x 和 y 位置。我已经尝试了很多，但无法正确设置。

这是我的代码：

```
-(IBAction)product2_click_h2
{
    //build our custom popover view
    UIViewController* popoverContent2 = [[UIViewController alloc]
                                         init];

    UIView* popoverView2 = [[UIView alloc]initWithFrame:CGRectMake(100,100,200,200)];

    popoverView2.backgroundColor = [UIColor greenColor];

    UITextView *prod2_info = [[UITextView alloc]initWithFrame:CGRectMake(5,5,390,290)];
    [prod2_info setFont:[UIFont fontWithName:@"Arial" size:15]];
    [popoverView2 addSubview:prod2_info];
    [prod2_info setEditable:NO];
    prod2_info.text = @"\n"
    "                    Higher Mileage Motor Oil :\n "
    "                --------------------------------------\n\n"
    "  -->  MaxLife NextGen Higher Mileage Motor Oil  \n\n" 
    "- Special seal conditioners rejuvenate seals\n"
    "   within the engine block to help \n"
    "   prevent oil leaks that lead to sludge and deposits.\n"
    "- Anti-oxidant additives reduce oil viscosity breakdown\n"
    "  to help prevent engine clogging sludge and deposit formation. \n"
    "- Detergents chemically bond with and remove existing\n"
    "  sludge and deposits\n"
    "- Additional friction-reducing additives help reduce abrasion within engine\n"
    "- Anti-wear agents help prevent engine damage \n"
    "- Available in the following viscosity grades \n"
    "    - 5W-30     \n "
    "   - 10W-30    \n ";
    prod2_info.scrollEnabled =YES;
    popoverContent2.view = popoverView2;
    popoverContent2.contentSizeForViewInPopover = CGSizeMake(400,300);

    //create a popover controller
    self.popovercontroller_2 = [[UIPopoverController alloc]
                                initWithContentViewController:popoverContent2];

    //present the popover view non-modal with a
    //refrence to the button pressed within the current view
    [self.popovercontroller_2 presentPopoverFromRect:product2.frame
                                              inView:self.view
                            permittedArrowDirections:UIPopoverArrowDirectionAny
                                            animated:YES];

} 
```

这是它现在的样子：

![在此处输入图像描述](../Images/a30d84ef3af077d858c4062090250e16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:42:27.307

而不是这个：

```
[self.popovercontroller_2 presentPopoverFromRect:product2.frame
                                          inView:self.view
                        permittedArrowDirections:UIPopoverArrowDirectionAny
                                        animated:YES]; 
```

只需像这样进行更改：

```
[self.popovercontroller_2 presentPopoverFromRect:product2.frame
                                          inView:**button.bounds**
                        permittedArrowDirections:UIPopoverArrowDirectionAny
                                        animated:YES]; 
```

# ios - 使用 NSMutableArray 项设置 UIViewController 的标题

> ID：11757695
> 
> 赞同：0
> 
> 时间：2012-08-01T10:52:03.130
> 
> 标签：ios, uiviewcontroller, title

`UIViewController`是否可以通过数组项设置 a 的标题？例如，如果我有食物`NSArray`或`NSMutableArray`食物列表，单击食物名称，然后它会成为加载视图中的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:58:04.037

假设您有一系列食物名称，例如：

```
NSArray *foodArr = [NSArray arrayWithObjects:@"Chicken",@"Cheese",@"Hamburger"] 
```

并且您希望标题为“Cheese”（索引 1 处的对象），您需要从数组中获取 NSString：

```
NSString *foodTitle = [foodArr objectAtIndex:1]; 
```

然后您可以将标题设置为该字符串：

```
self.navigationController.title = foodTitle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:58:06.580

如果你有一个字符串数组，你可以这样做：

```
yourViewController.title = [self.myNameArray objectAtIndex:selectedIndex]; 
```

如果您有一个带有 title 属性的对象数组：

```
yourViewController.title = [[self.myObjectArray objectAtIndex:selectedIndex] title]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:58:34.863

如果您将 UINavigationController 与 NavigationBar 一起使用，您可以轻松地执行以下操作：

```
-(void) viewDidLoad {

   self.navigationItem.title = [NSString stringWithString:@"%@",[yourTitles objectAtIndex:yourIndex];

} 
```

如果您不使用它，那么您将手动添加将显示您的标题并执行相同操作的 UILabel：

```
-(void) viewDidLoad {

   [titleLabel setText:[NSString stringWithString:@"%@",[yourTitles objectAtIndex:yourIndex]];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:58:40.107

是的很简单

```
//Assuming you are displaying food item in tableView
//vController is class object which is going to be pushed on navigation stack
//Put this line in didSelectRowAtIndexPath method

yourViewControllerObject.title = [foodItemArray objectAtIndex:indexPath.row]; 
```

# .net - 如何在 F# 中编写内联大字符串

> ID：11757699
> 
> 赞同：14
> 
> 时间：2012-08-01T10:52:20.117
> 
> 标签：.net, string, f#, literals

在 C# 中，我可以使用：

```
string myBigString = @"

<someXmlForInstance>
  <someChild />
</someXmlForInstance>

"; 
```

如何在 F# 中执行此操作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T14:13:39.827

在 F# 3.0 VS 2012 中，添加了对[三引号字符串的](http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx)支持。

> 在三引号字符串中，三引号 ("""...""") 之间的所有内容都保持逐字记录；根本没有逃避。因此，如果我想将一些 XAML 作为字符串文字，这很容易：

```
let xaml = """ 
<StackPanel xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
            Name="mainPanel"> 
  <Border BorderThickness="15.0" BorderBrush="Black"> 
    <StackPanel Name="stackPanel1"> 
      <TextBlock Text="Super BreakAway!" FontSize="24" HorizontalAlignment="Center" /> 
      <TextBlock Text="written in F#, by Brian McNamara - press 'p' to pause" 
                 FontSize="12" HorizontalAlignment="Center" /> 
      <Border BorderThickness="2.0" BorderBrush="Black"> 
        <Canvas Name="canvas" Background="White" /> 
      </Border> 
    </StackPanel> 
  </Border> 
</StackPanel>""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:57:06.637

> 如果前面有 @ 符号，则文字是逐字字符串。这意味着任何转义序列都将被忽略，除了两个引号字符被解释为一个引号字符。
> 
> 来源：[字符串（F#）](http://msdn.microsoft.com/en-us/library/dd323829.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:01:39.310

尝试一下：

```
let str1 = "abc
     def"
let str2 = "abc\
     def" 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/362314fe.aspx](http://msdn.microsoft.com/en-us/library/362314fe.aspx)

# joomla - joomla 中的美德玛特组件

> ID：11757701
> 
> 赞同：0
> 
> 时间：2012-08-01T10:52:51.077
> 
> 标签：joomla, virtuemart

我是 joomla 1.5 的新手。我试图在我的网站上实施美德玛特。[我从http://virtuemart.net/downloads](http://virtuemart.net/downloads)下载了 VirtueMart 2.0.8（稳定版）。在安装过程中，我遇到了以下问题：“**错误！无法在包中找到 XML 安装文件。** ”。如何解决这个问题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:36:20.640

从您提供的链接中下载 3.7MB 包后，您需要将其中的文件解压缩并手动上传和安装每个包。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T14:31:06.450

从[http://virtuemart.net/downloads](http://virtuemart.net/downloads)下载 VirtueMart 2.0.10 后。您需要解压缩 zip 并安装 com_virtuemart.2.0.10.zip 文件

# android - Android 捕获应用程序崩溃

> ID：11757706
> 
> 赞同：1
> 
> 时间：2012-08-01T10:53:01.587
> 
> 标签：android, exception-handling

我想知道是否可以覆盖一个方法（或类似的东西），当应用程序由于某些异常而崩溃时将调用该方法。

我想这样做，所以下次用户登录时，它会给他/她一条消息，表明应用程序已崩溃，并且该错误将尽快修复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T10:57:28.833

使用`Thread`和`setDefaultUncaughtExceptionHandler()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:11:27.363

我找到了一个完美的简单小解决方案：

创建我的应用程序后，我会执行以下操作：

```
// Ceck if the app crashed last time

    if(this.getIO().readPrimitiveInternalMemoryBoolean(FileNames.SpaceDroid.CrashReport) == true) {
                this.getGameLog().d(classTAG, "App crashed last time");

            }
            else {
                this.getGameLog().d(classTAG, "App didn't crash last time");

            }

            // Flag the app as chrashed and when the app is exited, then mark it as false.
            this.getIO().writePrimitiveInternalMemory(FileNames.SpaceDroid.CrashReport, true); 
```

当我的应用程序被关闭时，我会执行以下操作：

```
@Override
    public void onDispose() {
        super.onDispose();
        this.getIO().writePrimitiveInternalMemory(FileNames.SpaceDroid.CrashReport, false);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:55:53.340

您可以在日志中使用 try catch 语句和日志信息。google play 还提供了一种机制来通知您有关生产中应用程序崩溃的情况。

# matlab - matlab：quadprog抱怨功能不是对称的

> ID：11757709
> 
> 赞同：4
> 
> 时间：2012-08-01T10:53:18.743
> 
> 标签：matlab, quadprog

当我`quadprog`使用给定的功能`F`matlab 输出运行时：

```
Warning: Your Hessian is not symmetric.
Resetting H=(H+H')/2\. 
```

但是，检查功能和转置之间的区别：

```
>> max(max(abs(F-F')))

ans =

   (1,1)     7.1054e-015 
```

表明它们实际上是相同的。`quadprog`即使函数因机器错误而接近对称，是否也会输出此警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:18:47.757

用于在 quadprog 源中存在反对称的测试是

```
norm(H-H',inf) > eps 
```

即它检查无穷范数是否大于机器ε。自从

```
7.1054e-15 > eps = 2.22e-16 
```

您的 Hessian 显示为非对称。

# java - 使用 Java NetBeans 编译器运行多线程代码时进程挂起

> ID：11757711
> 
> 赞同：-5
> 
> 时间：2012-08-01T10:53:27.677
> 
> 标签：java, multithreading, freeze

当我运行以下代码时，这是使用 java netbeans 编译器进行多线程处理的示例，我的电脑挂起。
为什么会这样？

```
class clicker implements Runnable
{
  int click=0;
  Thread t;
  private volatile boolean runn=true;
  public clicker(int p)
  {
    t=new Thread(this);
    t.setPriority(p);
  }
  public void run()
  {
    while(runn)
      click++;
  }
  public void stop()
  {
    runn=false;
  }
  public void start()
  {
    t.start();
  }
}
public class Hilopri
{
  public static void main(String args[])
  {
    Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
    clicker hi=new clicker(Thread.NORM_PRIORITY+2);
    clicker low=new clicker(Thread.NORM_PRIORITY-2);
    low.start();
    hi.start();
    try
    {
      Thread.sleep(500);
    }
    catch(Exception e)
    {
      low.stop();
      hi.stop();
    }
    try
    {
      hi.t.join();
      low.t.join();
    }
    catch(Exception e)
    {
      System.out.println(e);
    }
    System.out.println("Low"+low.click);
    System.out.println("High"+hi.click);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:00:04.367

这是因为您在 catch 块中调用`low.stop()`and ，该块仅在抛出异常 <=> 被中断`hi.stop()`时才执行。`Thread.sleep(500)`您的代码中没有任何内容会中断它。

您可能打算将停止调用放在 finally 块中：

```
 try {
        Thread.sleep(500);
    } catch (Exception e) {
    } finally {
        low.stop();
        hi.stop();
    } 
```

# php - 相同的函数返回不同的输出

> ID：11757712
> 
> 赞同：0
> 
> 时间：2012-08-01T10:53:30.410
> 
> 标签：php, datetime, date, strtotime

嗯，这看起来很奇怪。请多多包涵。有人在SO中问过[这个问题。](https://stackoverflow.com/questions/11756351/php-weekdays-of-current-week-why-is-date-and-strtotime-taking-next-week/11756424#11756424)他想要上周一的日期。所以我建议

```
$monday=date(Y-m-d,strtotime('Monday this week')) 
```

输出在我的本地主机中非常完美。它显示了`2012-07-30`。另一个人评论说我提到的功能不起作用。它给出了相同的日期

```
$monday=date(Y-m-d,strtotime('Monday')) 
```

即，`2012-08-06`。而且他没有说谎！他链接的在线编辑器显示下周一的日期。检查[这个！](http://ideone.com/F6tOE)为什么会这样？？

我搜索了，但找不到背后的原因。是因为旧版本的php吗？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:25:11.490

在 5.2.17 和 5.3.10 之间的某个地方，问题得到了修复：http: [//viper-7.com/1PPz5m](http://viper-7.com/1PPz5m)（查看粘贴历史记录）。

[在 5.3.0 版本](http://www.php.net/ChangeLog-5.php#5.3.0)的更新日志中挖掘我发现了这个：

> 适当支持“本周”、“上一周”/“上周”和“下周”短语，以便它们实际上表示一周，而不是当天周围的 7 天。

听起来这可能就是我的答案。基本上在 5.3.0 之前`this week`等可能会给你错误的答案，因为它会在当前日期周围的 7 天中寻找星期一，而在 5.3.0 及更高版本中它将被正确解释。

# java - Apache CXF 转发到带有模型的 JSP 页面

> ID：11757714
> 
> 赞同：2
> 
> 时间：2012-08-01T10:53:33.900
> 
> 标签：java, apache, cxf, jax-rs

我使用 Apache CXF。我有这个控制器

```
@GET
@Path("/benchmark")
@Produces("text/html")
public Response getForbiddenBrowserList() {
    MyModel model = generateMyModel();
    //And now I want to do something like:
    return Response.ok( JspView("WEB-INF/pages/benchmark.jsp", model) ).build();
} 
```

我在 Apache CXF 中找不到类似“JspView”的东西。如何在 CXF 中快速返回 JSP 页面并将“模型”传递给 JSP？

请给我一个简单的例子好吗？（我找到[了这个文档](http://cxf.apache.org/docs/jax-rs-redirection.html)，但它对我不起作用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:40:11.770

好吧，我有一个可能的解决方案。它以前对我不起作用，因为我忘记了 register jaxrs:provider

**控制器：**

```
@GET
@Path("/benchmark")
@Produces("text/html")
public MyModel getForbiddenBrowserList() {
    MyModel model = generateMyModel();
    //And now I want to do something like:
    return MyModel;
} 
```

**jax-rs 弹簧配置：**

```
 <jaxrs:server id="notesService" address="/">
    ...
        <jaxrs:providers>
            <ref bean="dispatchProvider"/>
        </jaxrs:providers>
    </jaxrs:server>

  <bean id="dispatchProvider" class="org.apache.cxf.jaxrs.provider.RequestDispatcherProvider">
      <property name="classResources">
          <map>
              <entry key="com.acme.MyModel" value="/WEB-INF/pages/model.jsp"/>
          </map>
      </property>
      <property name="beanNames">
          <map>
              <entry key="com.acme.MyModel" value="myModel"/>
          </map>
      </property>
 </bean> 
```

**和model.jsp：**

```
<%@ page import="com.acme.MyModel" %>
<%
    MyModel myModel= (MyModel) request.getAttribute("myModel");
%>
<html>
    <head></head>
    <body>
        Model: <%= myModel.value %>
    </body>
</html> 
```

# xml - xpath查询xml

> ID：11757721
> 
> 赞同：2
> 
> 时间：2012-08-01T10:54:03.423
> 
> 标签：xml, xslt, xslt-2.0

我有一个输入xml如下

```
<maindocument>
<first>
<testing>random text</testing>
<checking>random test</checking>
</first>
<testing>
<testing>sample</testing>
<checking>welcome</checking>
<import>
<downloading>valuable text</downloading>
</import>
</testing>
</maindocument> 
```

这里的输出我想要像下面一样的输出

```
<maindocument>
<import>
<doctype>Valuable</doctype>
<docint>text</docint>
</import>
</maindocument 
```

我正在xslt中尝试上面的代码在绝对路径和相对路径的帮助下，我的问题是我将如何进入测试元素，然后我必须从那里选择导入元素。

请指导我

问候卡西克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:04:19.740

将正确的元素复制到输出很容易，并且使用 XSLT 2.0 也很容易分解元素的内容`downloading`：

```
<xsl:output indent="yes"/>

<xsl:template match="maindocument">
  <xsl:copy>
    <xsl:apply-templates select="testing/import"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="import">
  <xsl:copy>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template>

<xsl:template match="import/downloading">
  <xsl:analyze-string select="." regex="(\w)(\w+)\s+(\w+)">
    <xsl:matching-substring>
      <doctype>
        <xsl:value-of select="concat(upper-case(regex-group(1)), regex-group(2))"/>
      </doctype>
      <docint>
        <xsl:value-of select="regex-group(3)"/>
      </docint>
    </xsl:matching-substring>
  </xsl:analyze-string>
</xsl:template>

</xsl:stylesheet> 
```

使用 Saxon 9.4 上述样式表转换输入

```
<maindocument>
<first>
<testing>random text</testing>
<checking>random test</checking>
</first>
<testing>
<testing>sample</testing>
<checking>welcome</checking>
<import>
<downloading>valuable text</downloading>
</import>
</testing>
</maindocument> 
```

进入

```
<maindocument>
   <import>
      <doctype>Valuable</doctype>
      <docint>text</docint>
   </import>
</maindocument> 
```

的使用`analyze-string`是一个例子，从你的样本中我不清楚`downloading`元素可以有什么样的输入以及你想如何处理它。因此，如果以上内容还不够，请发布更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:09:09.663

```
With the help of absolute path and relative path my question is how i will get into testing element then i have to select import element from there. 
```

实际上，没有必要指定一个完整的路径`testing`并检查它是否有一个`import`孩子。

XSLT 处理模型（**[内置模板](http://www.w3.org/TR/1999/REC-xslt-19991116#built-in-rule)**）与您的模板和适当的模板匹配模式相结合，为您进行导航。

如果没有与特定节点匹配的显式模板，则选择执行内置模板。应用内置模板的累积结果是遍历文档树，只输出文本节点。

可以指定模板以仅针对应该以不同的特定方式处理的节点覆盖内置模板。当内置模板为节点的子节点应用模板并且存在与该节点匹配的显式（用户提供的）模板时，选择该显式模板用于该节点的执行/处理。

**这个简短的 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <maindocument>
        <xsl:apply-templates/>
     </maindocument>
 </xsl:template>

 <xsl:template match="import/downloading">
  <import>
    <doctype><xsl:value-of select="substring-before(., ' ')"/></doctype>
    <docint><xsl:value-of select="substring-after(., ' ')"/></docint>
  </import>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于提供的 XMLdocument 时**：

```
<maindocument>
    <first>
        <testing>random text</testing>
        <checking>random test</checking>
    </first>
    <testing>
        <testing>sample</testing>
        <checking>welcome</checking>
        <import>
            <downloading>valuable text</downloading>
        </import>
    </testing>
</maindocument> 
```

**产生想要的正确结果**：

```
<maindocument>
   <import>
      <doctype>valuable</doctype>
      <docint>text</docint>
   </import>
</maindocument> 
```

# ruby-on-rails - 在 rails 的 will_paginate 的 page_entries_info 中给出自定义消息

> ID：11757726
> 
> 赞同：7
> 
> 时间：2012-08-01T10:54:17.223
> 
> 标签：ruby-on-rails, ruby, will-paginate

我是新来的轨道。我想为 page_entries_info 显示我的自定义消息。我已经通过以下链接，但不能理解太多。谁能详细解释一下。

[我如何指定自定义措辞在一个将分页视图助手中](https://stackoverflow.com/questions/7653669/how-do-i-specify-custom-wording-in-a-will-paginate-view-helper)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T11:38:48.453

这是默认加载的，取自[项目 wiki](https://github.com/mislav/will_paginate/wiki/I18n)

```
en:
  will_paginate:
    page_entries_info:
      single_page:
        zero:  "No %{model} found"
        one:   "Displaying 1 %{model}"
        other: "Displaying all %{count} %{model}"
      single_page_html:
        zero:  "No %{model} found"
        one:   "Displaying <b>1</b> %{model}"
        other: "Displaying <b>all&nbsp;%{count}</b> %{model}"

      multi_page: "Displaying %{model} %{from} - %{to} of %{count} in total"
      multi_page_html: "Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{count}</b> in total" 
```

您需要更改`multi_page_html`and `multi_page`，最后 2 个条目。

在您的`en.yml`文件（或任何文件）中放置如下内容：

```
en:
  will_paginate:
    line_item:
      page_entries_info:
        multi_page: "Displaying %{from} - %{to} of %{count} of %{model}"        
        multi_page_html: "Displaying <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{count}</b> of %{model}" 
```

如果您对 yml 文件[rails 有困难，i18n 指南](http://guides.rubyonrails.org/i18n.html)有点高级，但提供了有关如何使用 yml 文件的很好的信息 - 只需向下滚动一点 :)。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T18:12:47.427

另一种选择是您可以在您的`page_entries_info()`方法中定义您的方法`ApplicationHelper` 并像往常一样使用它。如果您知道不需要覆盖边缘情况（如我的情况），这将为您提供更大的灵活性，甚至可以更加清洁和高效。[您可以在此处](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/view_helpers.rb)参考原始方法定义并查看您需要实现的所有内容。以下代码将运行您的大部分问题！

```
def page_entries_info(collection, options = {})
  entry_name = options[:entry_name] || (collection.empty?? 'item' :
      collection.first.class.name.split('::').last.titleize)
  if collection.total_pages < 2
    case collection.size
    when 0; "No #{entry_name.pluralize} found"
    else; "Displaying all #{entry_name.pluralize}"
    end
  else
    %{Displaying %d - %d of %d #{entry_name.pluralize}} % [
      collection.offset + 1,
      collection.offset + collection.length,
      collection.total_entries
    ]
  end
end 
```

# javascript - 在 vaadin 中隐藏/展开布局

> ID：11757727
> 
> 赞同：1
> 
> 时间：2012-08-01T10:54:25.190
> 
> 标签：javascript, layout, show-hide, vaadin

在此站点的左上角有一个带有下拉布局的 StackExchange 按钮。如果你点击它，它会打开，如果你点击其他地方，它会被隐藏。给定按钮和布局，是否可以在 vaadin 应用程序中创建类似的组合？

两个条件是：

1.  从代码中了解布局的状态（隐藏或显示）（这就是 javascript 不合适的原因）。

2.  按钮应展开和隐藏布局，单击时的其余区域应仅将其隐藏（与此处的 StackExchange 按钮相同）。

有谁知道解决方案？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:07:07.677

两种可能性：

原生 Vaadin：[PopupView](https://vaadin.com/api/com/vaadin/ui/PopupView.html)。这是在 Vaadin 采样器[中使用它的示例。](http://demo.vaadin.com/sampler#PopupViewContents)无法控制弹出窗口的放置，并且显示弹出窗口不能由视图本身以外的任何东西控制。

Vaadin Addon : [Overlays](http://demo.vaadin.com/sampler#PopupViewContents)允许您相对于任何其他组件覆盖任何组件（例如布局），可以由单独的组件（例如按钮）控制

# .net - T4 包含项目根目录的文件路径

> ID：11757730
> 
> 赞同：10
> 
> 时间：2012-08-01T10:54:30.027
> 
> 标签：.net, t4

如何相对于项目根目录包含文件？类似的东西`<# @include file="~/Infrastructure/Manager.ttinclude" #>`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T12:45:25.163

你应该使用`$(ProjectDir)`

```
<#@ include file="$(ProjectDir)\Infrastructure\Manager.ttinclude" #> 
```

您也可以`$(SolutionDir)`用于解决方案根目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T12:02:23.237

如果您想在某个共享项目中包含文件，那么您可以在下面使用

```
<#@ include file="..\AnotherProjectFolderName\AnotherSubFolder\Shared.ttinclude" #> 
```

首先 .. 将被解析为当前文件路径所以如果 .tt 在项目目录的任何子文件夹下，那么你可以使用

```
<#@ include file="..\..\AnotherProjectDirectory\AnotherSubFolder\Shared.ttinclude" #> 
```

一个 ..\ 表示上一层文件夹。

# blackberry - 如何让拨轮向所有方向滚动？

> ID：11757736
> 
> 赞同：1
> 
> 时间：2012-08-01T10:54:46.177
> 
> 标签：blackberry, gridview

这是我的`navigationMovement()`：

```
protected boolean navigationMovement(int dx, int dy, int status, int time) {

        int focusIndex = getFieldWithFocusIndex();

        while (dy > 0) {
            if (focusIndex >= getFieldCount()) {
                return false;
            } else {
                Field f = getField(focusIndex);
                if (f.isFocusable()) {
                    f.setFocus();
                    dy--;
                }
            }
        }

        while (dy < 0) {
            if (focusIndex < 0) {
                return false;
            } else {
                Field f = getField(focusIndex);

                if (f.isFocusable()) {
                    f.setFocus();
                    dy++;
                }
            }
        }

        while (dx > 0) {
            focusIndex++;

            if (focusIndex >= getFieldCount()) {
                return false;
            } else {
                Field f = getField(focusIndex);

                if (f.isFocusable()) {
                    f.setFocus();
                    dx--;
                }
            }
        }

        while (dx < 0) {
            focusIndex--;

            if (focusIndex < 0) {
                return false;
            } else {
                Field f = getField(focusIndex);

                if (f.isFocusable()) {
                    f.setFocus();
                    dx++;
                }
            }
        }

        return true;
} 
```

这只允许滚轮左右滚动，但我想要上、下、左和右。

我的布局是[这样](http://img805.imageshack.us/img805/8688/91334828.png)的。

它是 3 行 x 4 列。

这段代码正在检查`getField(0->10)`，这就是为什么它不能从 0 到 4。

我希望它可以在各个方向移动。如何实施？

**更新**

```
protected void sublayout(int width, int height) {
        int y = 0;

        Field[] fields = new Field[columnWidths.length];
        int currentColumn = 0;
        int rowHeight = 0;

        for (int i = 0; i < getFieldCount(); i++) {
            fields[currentColumn] = getField(i);
            fields[currentColumn]
                    .setChangeListener(new FieldChangeListener() {
                        public void fieldChanged(Field field, int context) {
                            final int focusIndex = getFieldWithFocusIndex();
                            if (focusIndex == position) {
                                Main.getUiApplication().popScreen(
                                        mainscreen);
                            } else {
                                Main.getUiApplication().popScreen(
                                        mainscreen);
                                Main.getUiApplication().pushScreen(
                                        new Custom_LoadingScreen(1));
                                Main.getUiApplication().invokeLater(
                                        new Runnable() {
                                            public void run() {
                                                if (focusIndex == 0)
                                                    Main.getUiApplication()
                                                            .pushScreen(
                                                                    new Main_AllLatestNews());
                                                else
                                                    Main.getUiApplication()
                                                            .pushScreen(
                                                                    new Main_ParticularCategoryAllNews(
                                                                            catnewsid[focusIndex],
                                                                            focusIndex,
                                                                            cattitle[focusIndex]));
                                            }
                                        }, 1 * 1000, false);
                            }
                        }
                    });
            layoutChild(fields[currentColumn], columnWidths[currentColumn],
                    height - y);

            if (fields[currentColumn].getHeight() > rowHeight) {
                rowHeight = fields[currentColumn].getHeight() + 10;
            }

            currentColumn++;

            if ((currentColumn == columnWidths.length)
                    || (i == (getFieldCount() - 1))) {
                int x = 0;

                if (this.allRowHeight >= 0) {
                    rowHeight = this.allRowHeight;
                }

                for (int c = 0; c < currentColumn; c++) {
                    long fieldStyle = fields[c].getStyle();
                    int fieldXOffset = 0;
                    long fieldHalign = fieldStyle & Field.FIELD_HALIGN_MASK;

                    if (fieldHalign == Field.FIELD_RIGHT) {
                        fieldXOffset = columnWidths[c]
                                - fields[c].getWidth();
                    } else if (fieldHalign == Field.FIELD_HCENTER) {
                        fieldXOffset = (columnWidths[c] - fields[c]
                                .getWidth()) / 2;
                    }

                    int fieldYOffset = 0;
                    long fieldValign = fieldStyle & Field.FIELD_VALIGN_MASK;

                    if (fieldValign == Field.FIELD_BOTTOM) {
                        fieldYOffset = rowHeight - fields[c].getHeight();
                    } else if (fieldValign == Field.FIELD_VCENTER) {
                        fieldYOffset = (rowHeight - fields[c].getHeight()) / 2;
                    }

                    setPositionChild(fields[c], x + fieldXOffset, y
                            + fieldYOffset);
                    x += columnWidths[c];
                }

                currentColumn = 0;
                y += rowHeight;
            }

            if (y >= height) {
                break;
            }
        }

        int totalWidth = 0;

        for (int i = 0; i < columnWidths.length; i++) {
            totalWidth += columnWidths[i];
        }

        if (position > -1) {
            Field f = getField(position);
            f.setFocus();
        }

        setExtent(totalWidth, Math.min(y, height));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:35:32.330

您以相同方式处理 dx 和 dy 的代码问题。您需要以不同方式计算下一个前一个索引，具体取决于它是水平滚动还是垂直。

顺便说一句，你用什么经理？`FlowFieldManager`? 因为我认为它应该在默认`navigationMovement`实现中按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:28:02.773

我只是找到了每次移动+/-列大小的解决方案

```
while (dy > 0) {
            if (focusIndex + columnwidth.length >= getFieldCount()) {
                return false;
            } else {
                Field f = getField(focusIndex + columnwidth.length);
                if (f.isFocusable()) {
                    f.setFocus();
                    dy--;
                }
            }
        }

while (dy < 0) {
            if (focusIndex - columnwidth.length < 0) {
                return false;
            } else {
                Field f = getField(focusIndex - columnwidth.length);

                if (f.isFocusable()) {
                    f.setFocus();
                    dy++;
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:05:38.547

`navigationMovement`默认将提供对所有可聚焦组件的焦点。重要的是您使用了什么布局以及如何安排这些管理器。你有行、列的结构，所以如果你对一行使用水平管理器，它的元素将获得焦点，在完成所有元素后，焦点将下降到第二个水平管理器。

# javascript - MongoDB map/reduce、forEach 不是函数？

> ID：11757739
> 
> 赞同：1
> 
> 时间：2012-08-01T10:55:06.973
> 
> 标签：javascript, mongodb, mapreduce

我正在 MongoDB 中创建一个 Map 函数，一旦我在数组上使用 forEach() 就会出现问题。

这可能是用户的样子：

```
"channels" : [
    "Channel 1",
    "Channel 2",
],
"user_id" : "somehash" 
```

这是导致错误的我的地图功能：

```
var map = function() {
    if(this.channels && this.user_id) {

        var user_id = this.user_id;

        this.channels.forEach(function(z, user_id) {
            emit(z, {user: user_id});
        });
    }
} 
```

当我在 mongo 中运行我的 Map/Reduce 时，我使用以下命令，我还收到以下错误：

```
> db.users.mapReduce(map, reduce, {out : "myoutput" });
Wed Aug  1 12:48:11 uncaught exception: map reduce failed:{
    "assertion" : "map invoke failed: JS Error: TypeError: this.channels.forEach is not a function nofile_b:3",
    "assertionCode" : 9014,
    "errmsg" : "db assertion failure",
    "ok" : 0
} 
```

我尝试了一些不同的方法，但似乎都不起作用，这可能是一个简单的问题，但我看不出我在哪里做错了。

很高兴在这个问题上得到一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:20:28.193

通过使用**for**而不是**forEach**来修复它，因为它仍然是我可以`.length`在其上使用的向量。

解决方案：

```
var map = function() {
    if(this.channels && this.user_id) {
        var user_id = this.user_id;
        for(var i = 0, imax = this.channels.length; i<imax; i++) {
            emit(this.channels[i], {user: user_id});
        }   
    }
} 
```

# ios - 在用户允许共享并找到位置后继续处理

> ID：11757744
> 
> 赞同：0
> 
> 时间：2012-08-01T10:55:19.530
> 
> 标签：ios, asynchronous, cllocationmanager

我有这样的事情：

```
CLLocationManager *locManager = [[CLLocationManager alloc] init];
locManager.delegate = self;
locManager.desiredAccuracy = kCLLocationAccuracyBest;
[locManager startUpdatingLocation]; 
```

但我需要低于经纬度用户。显然，尝试在 startUpdatingLocation 下方获取**locManager.coordinate**我**的**应用程序崩溃。

在用户允许共享位置并且已找到位置后，如何设置执行流程的条件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:11:39.633

调用`startUpdatingLocation`后可能需要一些时间才能获得位置。系统首先检查应用程序是否启用了定位服务，并要求用户允许定位服务。首先需要打开 GPS 硬件。它需要一些时间才能确定位置。

因此，您应该更新 UI 以向用户显示后台正在发生的事情。考虑使用一个`UIActivityIndicatorView`并且可能将`userInteractionEnabled`视图设置为 NO。此外，为用户提供取消操作的选项也是一个好习惯。

在您的委托中，您必须实现以下两种方法：

```
– locationManager:didUpdateToLocation:fromLocation:
– locationManager:didFailWithError: 
```

您可以在此处删除`UIActivityIndicatorView`并重新启用用户交互。如果成功，您可以使用 的坐标`CLLocationManager`来做任何您想做的事情。在失败的情况下显示错误警报。

`stopUpdatingLocation`当您不再需要定位服务时拨打电话以节省电量。

# java - 从日志文件到 wan 的恒定数据馈送

> ID：11757747
> 
> 赞同：1
> 
> 时间：2012-08-01T10:55:26.643
> 
> 标签：java, client-server, wan

我正在寻找一种通过网络提供日志文件的有效方法（某种恶魔）。每个数据包都是来自日志文件的多行，以便可以从另一端处理它们。服务器独立于客户端很重要，这意味着它应该能够在客户端连接时“保存”要发送的数据包。

注意：我的目标是双向通信，而不是广播。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:01:02.383

您可以尝试使用消息队列中间件，例如 RabbitMQ。这是一种解耦您描述的两个系统的好方法。消息代理（RabbitMQ）将对消息进行排队，直到客户端/服务器连接并使用它们。您可以有一个用于服务器消息的队列和另一个用于发往客户端的响应的队列。你可以只在服务器上运行 RabbitMQ 代理，或者你也可以在客户端上运行 RabbitMQ 代理并在它们之间铲起消息。

# mysql - 可以在文件中加载数据采取ftp文件位置

> ID：11757748
> 
> 赞同：-1
> 
> 时间：2012-08-01T10:55:27.130
> 
> 标签：mysql, sql

有什么办法可以跑

```
LOAD DATA INFILE 
```

命令，当文件存在于 FTP 位置时？例如这样的：

```
LOAD DATA INFILE 'USER%40WEBSITE.COM:PASSWORD@ftp.WEBSITE.COM/FILE.csv'; 
REPLACE INTO TABLE mytable FIELDS TERMINATED BY '|' LINES TERMINATED BY '\n' IGNORE 1 LINES 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:30:34.643

不，MySQL 文件相关功能只能访问数据库服务器或客户端上的文件，而不能访问其他机器（除非您设置了网络文件系统挂载，以使远程机器看起来是本地的）。

# mysql - 仅返回另一个唯一列的最大值

> ID：11757750
> 
> 赞同：0
> 
> 时间：2012-08-01T10:55:37.070
> 
> 标签：mysql

最好不要下载整个数据库并扫描每个项目，是否有一个 MySQL 查询可以访问该表：

```
__________________________________
|   ColID   |      Timestamp      |
|___________|_____________________|
|_____2_____|_2012-08-01_12:00:00_|
|_____1_____|_2012-08-01_12:01:00_|
|_____3_____|_2012-08-01_12:02:00_|
|_____3_____|_2012-08-01_12:03:00_|
|_____2_____|_2012-08-01_12:04:00_|
|_____3_____|_2012-08-01_12:05:00_| 
```

并且只返回这些行：

```
__________________________________
|   ColID   |      Timestamp      |
|___________|_____________________|
|_____1_____|_2012-08-01_12:01:00_|
|_____2_____|_2012-08-01_12:04:00_|
|_____3_____|_2012-08-01_12:05:00_| 
```

以便只提取一个`ColID`最高的`Timestamp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:57:23.633

`GROUP BY`与 一起使用`MAX`：

```
SELECT   ColID, MAX(Timestamp) AS Timestamp
FROM     tbl
GROUP BY ColID 
```

* * *

此外，您可能希望将来记住一个提示：如果您还想为每个最大值选择可能在同一个表中的其他列，`ColID`由于 的性质，您不能在上述查询中直接选择它`GROUP BY`。您需要将查询包装在 id 和 date 列上的连接子选择中：

```
SELECT b.*
FROM   tbl a
JOIN   (
       SELECT   ColID, MAX(Timestamp) AS max_timestamp
       FROM     tbl
       GROUP BY ColID
       ) b ON a.ColID = b.ColID AND a.max_timestamp = b.Timestamp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:57:31.800

是的，您可以通过使用`GROUP BY`with `MAX`as 来实现这一点：

```
SELECT ColID, MAX(Timestamp) AS max_Timestamp      
FROM my_table
GROUP BY ColID; 
```

# ant - 在ant的同一个sql任务中，是否可以为不同的事务提供不同的事务行为呢？

> ID：11757751
> 
> 赞同：0
> 
> 时间：2012-08-01T10:55:37.580
> 
> 标签：ant

```
<target name="create-db-tables" depends="initialize">
        <fail message="Missing property [datasource.url]." unless="datasource.url" />
        <fail message="Missing property [db.user]." unless="db.user" />
        <fail message="Missing property [db.password]." unless="db.password" />
        <fail message="Missing property [db.sql.driver]." unless="db.sql.driver" />
        <sql driver="${db.sql.driver}" url="${datasource.url}" userid="${db.user}" password="${db.password}" output="${basedir}/createTable.log" onerror="continue">
<classpath>
    <pathelement location="${basedir}/../lib/ojdbc.jar"/>
</classpath>
            <transaction src="${basedir}/ddl/dropTables.sql" />
            <transaction src="${basedir}/ddl/createTables.sql" />
        </sql>
</target> 
```

我在我的 ant 脚本中定义了上述目标，它首先删除表然后创建它们。我希望 ant 在删除表时忽略错误（即 onerror="continue"），但在创建表期间发生错误时抛出异常（即 onerror="abort"）。但它采用“sql”标签中的事务行为，因此它对所有事务都是通用的。

我不想创建单独的 sql 标签并重复数据库详细信息。另外，我想通过文件执行sql。我怎样才能通过蚂蚁做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:21:34.603

我会这样做：

1.  为您需要的每个段创建一个 sql 标记，只需重用您提供的属性（这可能看起来很丑陋且重复但有效）
2.  在 sql 标记之前定义类路径并通过重用它`classpathref`

它可能看起来像这样：

```
<target name="create-db-tables" depends="initialize">
        <fail message="Missing property [datasource.url]." unless="datasource.url" />
        <fail message="Missing property [db.user]." unless="db.user" />
        <fail message="Missing property [db.password]." unless="db.password" />
        <fail message="Missing property [db.sql.driver]." unless="db.sql.driver" />

        <classpath id="ojdbcpath">
             <pathelement location="${basedir}/../lib/ojdbc.jar"/>
        </classpath> 

        <!--- First Drop -->
        <sql driver="${db.sql.driver}" url="${datasource.url}"
            userid="${db.user}" password="${db.password}"
            output="${basedir}/createTable.log" onerror="continue"
            classpathref="ojdbcpath">
            <transaction src="${basedir}/ddl/dropTables.sql" />
        </sql>

        <!--- Then create -->
        <sql driver="${db.sql.driver}" url="${datasource.url}" 
            userid="${db.user}" password="${db.password}" 
            output="${basedir}/createTable.log" onerror="abort" 
            classpathref="ojdbcpath">
            <transaction src="${basedir}/ddl/createTables.sql" />
        </sql>
</target> 
```

# java - 使用 JAAS 进行身份验证后无法从登录页面重定向

> ID：11757755
> 
> 赞同：2
> 
> 时间：2012-08-01T10:55:50.573
> 
> 标签：java, servlets, redirect, jetty, jaas

用户登录后，如果再次访问，我想进行**重定向，这样如果他/她****已经通过身份验证**`/login`，用户就无法访问登录表单。

 **我正在使用**Jetty 8**，我在[FormAuthenticator.java:168](http://archive.eclipse.org/jetty/8.0.0.M2/xref/org/eclipse/jetty/security/authentication/FormAuthenticator.html#168)方法中发现`validateRequest`，如果用户访问登录或错误页面，则用户**永远不会经过身份验证，尽管可能是这种情况**

```
if (isLoginOrErrorPage(URIUtil.addPaths(request.getServletPath(),request.getPathInfo())))
    return Authentication.NOT_CHECKED; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:34:20.467

此问题已于 2012-08-07 修复。我认为 Jetty 在这里没有按预期工作。出于这个原因，我[提交了一个](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386714)关于重定向行为的错误。看看最新的 Jetty 8，它现在应该可以为你工作，分别看看[修复](https://github.com/eclipse/jetty.project/blob/jetty-8/jetty-security/src/main/java/org/eclipse/jetty/security/authentication/FormAuthenticator.java#L191)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T06:25:01.137

我为你描述的问题苦苦挣扎了一段时间......

当用户已经登录时，我尝试使用会话、请求和响应的 API 进行重定向，但是在使用 Jetty 时，用户的身份验证数据显然无法从登录页面获得。

我对 JSP 和 Jetty 完全陌生（我将它用于课堂作业），但我提出了一个运行良好的解决方案，即使认为它不是理想的解决方案。

首先，我通过在我的登录页面中添加一个变量来查看该页面是否已经加载，使用以下 JSP 做了一个小绕过：

```
<%
if(session.getAttribute("loginLoadedOnce") == "true")
{
    response.sendRedirect("/redirect.jsp");
}
else
{
    session.setAttribute("loginLoadedOnce", "true");
}
%> 
```

这样，如果属性设置不正确，它将让用户尝试登录。否则，它将重定向到重定向页面。重定向页面将提供可用的用户数据，并且能够查看用户是否具有某些角色。

重定向页面的 JSP 代码如下：

```
<%
if(request.isUserInRole("admin"))
{
    String url = response.encodeRedirectURL("admin/AdminPage.jsp");
    response.sendRedirect(url);
}
else if(request.isUserInRole("accounting"))
{
    String url = response.encodeRedirectURL("/accounting/Mainpage.jsp");
    response.sendRedirect(url);
}
else
{
    // Here the user has no role that we are aware of.
    session.setAttribute("loginLoadedOnce", "false"); // stop redirect loop.
    response.sendRedirect("/login.jsp");
}
%> 
```

在这里，我们检查用户的角色并重定向到角色的正确页面。

就像现在一样，用户必须先注销才能返回登录页面。每个尝试返回登录页面的尝试最终都会重定向，即使使用浏览器的“返回”按钮也是如此。

希望这会对某人有所帮助。**

# c# - Json 日期时间问题

> ID：11757757
> 
> 赞同：18
> 
> 时间：2012-08-01T10:55:56.070
> 
> 标签：c#, asp.net, json, datetime, json.net

> **可能重复：**
> [如何强制 netwtonsoft json 序列化程序将日期时间属性序列化为字符串？](https://stackoverflow.com/questions/7670629/how-to-force-netwtonsoft-json-serializer-to-serialize-datetime-property-to-strin)

我正在使用 Newtonsoft.Json 将我的对象转换为 JSON 文件。但是我遇到了问题`DateTime`，在我的对象中，日期时间字段设置为`"7/30/2012 8:29:12 PM"`但在 JSON 文件中。我得到`DateTime`这种格式的字段：

`"\/Date(1343660352227+0530)\/"`.

我需要得到与`DateTime`对象相同的格式。可能吗？我应该怎么做才能获得相同的格式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T13:46:58.600

我得到了如下解决方案。

```
JsonConvert.SerializeObject(this, Formatting.None, new IsoDateTimeConverter() {
    DateTimeFormat = "yyyy-MM-dd hh:mm:ss"
}); 
```

这是答案：

[如何强制 netwtonsoft json 序列化程序将 datetime 属性序列化为字符串？](https://stackoverflow.com/questions/7670629/how-to-force-netwtonsoft-json-serializer-to-serialize-datetime-property-to-strin)

# php - php动态创建css类

> ID：11757762
> 
> 赞同：0
> 
> 时间：2012-08-01T10:56:09.207
> 
> 标签：php, arrays, foreach

我有一个已完成的代码，我想在我完成的代码中添加另一个代码。

完成代码：

```
function module( $prefix, $comma_seperated_suffixes ) {
    foreach( (array)explode( ",", $comma_seperated_suffixes ) as $suffix ) {
    $module_name = $prefix.trim($suffix);
    if(count(JModuleHelper::getModules($module_name))) {
            module_block($module_name); 
        }
    }
} 
```

我搬到`count(JModuleHelper::getModules($module_name))`了`module`功能，以前它在`module_block`

*请不要使用 tovolt 类，我的意思是没有 php 类的简单代码*

**模块计数块**

我假设我正在调用这个模块`module("top-col-", "1,2,3");`，那么我有三个模块被称为`top-col-1, top-col-2, top-col-3`

那么我的计数模块将如下所示：

```
$TopCol1 = (int)(count(JModuleHelper::getModules($module_name)) > 0);
$TopCol2 = (int)(count(JModuleHelper::getModules($module_name)) > 0);
$TopCol3 = (int)(count(JModuleHelper::getModules($module_name)) > 0); 
```

上面的代码将仅计入活动模块（检查活动模块的唯一方法），如果模块处于活动状态，则其`var`将是`1`.

现在是计算活动模块的时候了：

```
$topColCount = $TopCol1 + $TopCol2 + $TopCol3;
if ($topColCount) : $TopColClass = 'count-' . $topColCount; 
endif; 
```

我正在计算模块案例，我想将这样的 CSS 类设置`count-1, count-2, count-3`为活动模块。我希望该类用于`module_block`. 请记住，上面的变量是静态的，因为我是手动制作的。但是如果我调用函数，那么 var 需要随着函数值的变化而变化，比如如果用户调用`module("bottom", "1,2,3");`，那么`count_modules`它将是`$bottom1, $bottom2, $bottom3`，类将是`$bottomClass`。

我想`count_module`使用相同的代码 生成`module("bottom", "1,2,3");`

**感谢@steve 的帮助**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:43:09.887

如果我正确理解这一点，这应该会有所帮助。

tovolt 类：（注意添加到此类的新功能“prep_modules”）

```
<?php

//////////////////    BEGIN CLASS tovolt
class tovolt{
    function tovolt() {
        //// constructor function - used to setup default variable states, etc. - if this is omitted PHP may have a fit ( depending on version and config )
    }

    public static $TopColClass = 'default-value';

    function code_block( $jdoc_name ) {
?>
<div id="top-col" class="<?php echo self::$TopColClass; ?> columns">
        <div class="panel">
            <jdoc:include type="modules" name="<?php echo $jdoc_name; ?>" style="html5" />
        </div>
    </div>
<?php
    }

    function module( $prefix, $comma_seperated_suffixes ) {
        foreach( (array)explode( ",", $comma_seperated_suffixes ) as $suffix ) {
            $module_name = $prefix.trim($suffix);
            self::code_block( $module_name );
        }
    }

    //////////////////    BEGIN NEW FUNCTIONS
    function prep_modules( $MODULE_LIST ) {
        $READY_MODULES = array();
        foreach( (array)$MODULE_LIST as $module_name ) {
            $MATCHED_MODULES = JModuleHelper::getModules($module_name);
            $matched_count = count( $MATCHED_MODULES );
            $matched_list = implode( ',', range( 1, $matched_count ) );
            $READY_MODULES[$module_name] = array(
                'MODULES'    =>    $MATCHED_MODULES,
                'count'      =>    $matched_count,
                'list'       =>    $matched_list,
            );
        }
    }        
    //////////////////    END NEW FUNCTIONS

}
//////////////////    END CLASS tovolt
?> 
```

* * *

内容页面代码 - 靠近顶部：（准备此页面的模块）

```
//////////////////    SOMEWHERE BEFORE THE OUTPUT SECTION, LOAD MODULES FOR THIS PAGE
$READY_MODULES = tovolt::prep_modules( 'top', 'side', 'etc' ); 
```

* * *

内容页面代码-内容输出区：（选择最适合您设计的方法）

方法 1 - 输出单个部分：

```
//////////////////    DOWN IN THE MODULE OUTPUT SECTION - TO OUTPUT A SINGLE SECTION USE:
$section = 'top';
if( @$READY_MODULES[$section]['count'] > 0 ) {
    tovolt::$TopColClass = $section;                //// if you need to change: $TopColClass
    tovolt::module( $section."-col-", $READY_MODULES[$section]['list'] );        
} 
```

方法2 - 按加载顺序输出：

```
//////////////////    DOWN IN THE MODULE OUTPUT SECTION - TO OUTPUT ALL SECTIONS IN LOADED SEQUENCE USE:
foreach( (array)$READY_MODULES as $section=>$THIS_VAR_IS_NOT_DIRECTLY_REFERENCED ) {
    if( @$READY_MODULES[$section]['count'] > 0 ) {
        tovolt::$TopColClass = $section;                //// if you need to change: $TopColClass
        tovolt::module( $section."-col-", $READY_MODULES[$section]['list'] );        
    }    
} 
```

方法 3 - 任意输出：

```
//////////////////    DOWN IN THE MODULE OUTPUT SECTION - TO OUTPUT MULTIPLE SECTIONS IN AN ARBITRARY ORDER:
foreach( array( 'side', 'top' ) as $section ) {
    if( @$READY_MODULES[$section]['count'] > 0 ) {
        tovolt::$TopColClass = $section;                //// if you need to change: $TopColClass
        tovolt::module( $section."-col-", $READY_MODULES[$section]['list'] );        
    }    
} 
```

# c# - .Net 实时软件许可

> ID：11757765
> 
> 赞同：9
> 
> 时间：2012-08-01T10:56:23.243
> 
> 标签：c#, .net, licensing

我制作了一个程序，在将其出售给客户之前需要获得许可。由于我不确定它是否至少能让我获得商业许可软件的成本，所以我不想购买。

因此，我正在寻找有关如何使用以下逻辑实现许可功能的建议：

*   每次应用程序启动时，所有许可证密钥都会在服务器端进行验证（除了许可证号之外，用户端没有存储任何许可信息）。
*   只有一个应用程序同时使用一个许可证密钥运行。

我不知道如何保护我的程序免于简单的反编译/反汇编以及仅删除检查许可证的调用？或者制作自己的服务器，在每个许可证上做出响应？这种安全性通常是如何产生的？

我搜索了免费的 SDK 或类似的东西，但找不到任何东西。我将非常感谢您的帮助！

PS：我并不渴望让系统“坚不可摧”，但我希望获得比支付 5.10 美元购买程序副本更昂贵的破解保护。

PPS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:04:52.867

> 我不知道如何保护我的程序免于简单的反编译/反汇编以及仅删除检查许可证的调用？或者制作自己的服务器，在每个许可证上做出响应？这种安全性通常是如何产生的？

您混淆了许可和混淆。为了防止上述情况，您需要使用混淆器来混淆您的 exe 和 dll。

> 由于我不确定它是否至少能让我获得商业许可软件的成本，所以我不想购买。

恕我直言，比起从头开始开发许可计划（正如他们所说，重新发明轮子），您最好专注于并花时间在您的实际软件上。

如果您愿意接受付费解决方案，请查看[CryptoLicensing](http://www.ssware.com/cryptolicensing/cryptolicensing_net.htm)（用于许可和复制保护）和[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)（用于混淆和代码保护）。

免责声明：我为上述产品的开发商 LogicNP Software 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:13:01.233

（抱歉不能评论别人的帖子？？？）

这取决于您的应用程序在做什么。

我目前面临和你一样的问题。我要登录系统，只需获取并与数据库中的内容进行比较。如果不存在，请不要启动应用程序。并不是说我需要更多，该应用程序依赖于我的数据库，没有它它就毫无用处。

然后他们可以花几个小时根据他们在查询中看到的内容来弄清楚我的数据库是什么样子，或者实际上重写了我的整个产品。我将在应用程序安全方面花很少的钱。我希望拥有的唯一保护是不显示我的服务器数据。

# ruby-on-rails - 缓存计数器列未保存重新计算的值

> ID：11757769
> 
> 赞同：0
> 
> 时间：2012-08-01T10:56:39.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, counter-cache

我弄乱了用户表中的计数器缓存列。我尝试重新计算它，但它没有保存值。

这不起作用：

```
User.update_all("boards_count=(Select count(*) from boards where boards.user_id=users.id)") 
```

甚至没有这个：

```
 User.all.each do |user|
     user.boards_count = user.boards.length 
     user.save // this is returning true but value is not reflected in the database.
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:17:15.033

计数器缓存是只读模型的属性。

尝试使用 reset_counters ( [http://apidock.com/rails/ActiveRecord/CounterCache/reset_counters](http://apidock.com/rails/ActiveRecord/CounterCache/reset_counters) ) 或使用连接运行原始 sql，例如`ActiveRecord::Base.connection.execute("UPDATE ....")`

# php - Mysql查询解决方案

> ID：11757772
> 
> 赞同：0
> 
> 时间：2012-08-01T10:56:43.103
> 
> 标签：php, mysql

亲爱的朋友们，我有一张桌子（code_bit_table），其中有文章商店。每篇文章都有 SUBJECT，然后每篇文章都有 TITLE 和 TAGS。我想根据标题或标签字段中的任何字母但在单个主题中搜索表格。例如，我只想搜索 PHP，而在 PHP 中，我想检查 TITLE 或 TAGS 字段是否包含一些文本（例如数组）。

问题是我的查询也返回了其他主题。这可能是一个非常简单的问题，但让我很困惑

> ```
>  SELECT * FROM code_bit_table WHERE `subject` = 'PHP'  AND `tags` LIKE 
>    '%text%' OR `title` LIKE '%text%' 
> ```

该查询工作正常，但为什么它返回其他主题，如 jQuery 等也存在于同一个表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:23:46.010

您必须将`tags`and分组`title`。

```
SELECT * 
  FROM code_bit_table 
 WHERE `subject` = 'PHP'  AND 
       (`tags` LIKE '%text%' OR 
        `title` LIKE '%text%'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:58:58.820

括号是你的朋友。

```
SELECT *
FROM code_bit_table
WHERE `subject` = 'PHP'
    AND (`tags` LIKE '%text%'
          OR `title` LIKE '%text%'
    ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:59:06.583

```
 SELECT * FROM code_bit_table WHERE `subject` = 'PHP'  AND (`tags` LIKE 
   '%text%' OR `title` LIKE '%text%') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T10:59:36.120

您必须将左括号'（'＆'）'作为`OR`部分覆盖`AND`运算符的优先级：

```
SELECT * 
FROM code_bit_table 
WHERE `subject` = 'PHP'  AND 
      (`tags` LIKE '%text%' OR `title` LIKE '%text%'); 
```

# php - 进行 Magento 更新的最佳实践？

> ID：11757775
> 
> 赞同：8
> 
> 时间：2012-08-01T10:57:04.840
> 
> 标签：php, magento

进行 Magento 更新（维护不善的 Magento 安装）的最佳实践是什么。

我想到了以下几点：

*   查看 app/code/local 中的完全覆盖模块 - 将文件与旧版本进行比较并将它们转发到新的 Magento 版本
*   比较模板
*   比较布局 XML 文件（如果它们被直接复制到自定义主题文件夹并且没有使用仅包含实际更新的单个 layout.xml）
*   将重写类的方法与原始类的方法进行比较

主要问题是：在旧的、维护不善的 Magento 安装中比较文件时，您永远不知道被复制的原始文件具有哪个版本。有时我试图通过查看文件评论中 Magento 的版权来识别旧版本。

为了避免更新过程中的麻烦，我们通常会执行以下操作：

*   避免重写，改用事件
*   如果需要重写，尽量不要复制代码，而是调用 parent::method() 以在被覆盖的类中只保留必要的功能
*   如果需要复制代码，请使用标记注释，例如`[Mycompany BEGIN] ... [Mycompany END]`
*   不要复制整个布局文件，而是使用一个仅更新的 layout.xml。

但是，如果没有采取这些预防措施，如何进行更新？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:15:24.677

正如其他人所指出的那样，这里的关键是使其与全新安装相当，所以这就是我在版本控制的帮助下要做的事情。

1.  让自己获得当前使用的 Magento 的干净版本，并且不要忘记使其具有可比性。或者使用现有的 magento git 镜像（查看更多[http://blog.speedupmate.com/post/4063307705/magento-git-mirror](http://blog.speedupmate.com/post/4063307705/magento-git-mirror)）

2.  建立一个基于 1\. 的主仓库并在手边

    在评论中询问：您的最终目标是拥有一个干净的核心，其中包含 git 中存在于 magento 安装文件中的所有文件。这是必需的，因此您可以将所有内容与全新安装进行比较。管理核心更改、核心文件树（现有的、不存在的、添加的文件）。您可以使用 .gitignore 处理您的异常（不包括媒体、缓存、所有具有服务器特定范围 local.xml .htaccess 的字段）。我发现将 Magento 核心文件移出到不同的（非公共）目录很容易（如此处所述[http://blog.speedupmate.com/post/9992573819/poor-mans-multisite-setup-for-magento](http://blog.speedupmate.com/post/9992573819/poor-mans-multisite-setup-for-magento)) 这会给我一个代码状态，其中 .htaccess 在升级时不会发生冲突。我也从不在版本控制、缓存和 magento 生成的所有临时文件中包含媒体。这将保证您清除升级路径，因为您可以在升级期间禁用所有。稍后比较代码将为您提供需要概述的内容范围，并且您可以估计比较更改的部分并上线升级需要多长时间。

3.  现在使用您现有的站点和 git 配置（以使其具有可比性）`git init`在您的代码库上执行一个并将所有内容添加到 git 那里，这将检查您的 git 配置并使每个文件具有可比性（相同的换行符、空格等）然后修复文件权限相同。之后，您可以从您的站点中删除 .git 文件夹，因为您只使用 git 来使文件在那里进行比较。

    在评论中询问：这里的重点是让 git 为您工作，例如将所有行尾转换为 unix 样式并忽略空格，理论上您也可以忽略权限，但这没有用（这里的格式有点不对，所以 \ 代表换行符命令之间

    `git config core.autocrlf input \ git config core.eol lf \ git config apply.whitespace nowarn`

    现在，如果您`git init` 添加这些配置并将所有内容添加到 git，那么在提交阶段 git 将替换所有 Windows 行尾和所有废话，以统一和可比较的样式。请注意，zend 编码标准建议使用 unix 样式的行结尾，但是您还会看到 Zend 库不遵循其自己的标准的文件。这里的关键点是您需要您的文件具有可比性，以最大限度地减少您必须做的差异负载。在 git 为您格式化所有错误的安装文件后，您将删除 .git 文件夹。Git仅用于在此步骤中自动化“使事物具有可比性的过程”，仅此而已

4.  根据 1\. 中的主存储库签出您的测试存储库

5.  从该结帐文件夹中删除所有内容并仅保留 .git ，因此它是空的，但版本控制仍然存在。它将处于所有内容都已删除的状态，这在这里很重要，因为您将知道您可能在坏网站上删除了哪些文件。

    在评论中询问：我通常在 git config 中添加忽略空格（本地或全局范围可用）并让 git 为我处理。在团队中工作时，我们始终同意基于 Zend 标准：4 个空格用于制表符，unix 样式行尾和 3 中提到的 git config 变量。如果涉及构建脚本，我们会使用提交挂钩进行代码格式化和验证。

6.  将所有文件移动到您的空目录（请注意，您已经从现有站点中删除了 .git 目录，使其具有可比性）从您*安装的 magento 安装（它们现在是可比较的）并运行`git status > changes.txt`. 这个文件现在列出了你在“f cked up installation”中拥有的所有差异、你拥有的任何新文件、任何已删除、重命名等文件，*以及你当前使用的干净的 Magento 代码。

    根据评论解释：我通常这样做`git status --porcelain`

7.  有一个 .gitignore 文件来帮助您丢弃 local.xml var/* 或您不需要版本控制的每个文件/目录，以及 .DS_Store、.Thumbs.db 和您的 ide 从 git 创建的项目文件。您不需要所有媒体和缓存文件以及版本控制中每台服务器中不同的文件。

从那里您应该仔细查看该列表，并根据该列表，您应该：

*   将每个核心更改移动到 app/code/local/ 并将更改的文件签出到其原始状态（保留复制的文件并丢弃核心中的更改`git checkout filename`）
*   将每个更改的核心模板和布局文件移动到您自己的主题文件夹并将更改的文件签出到其原始状态
*   恢复或迁移 .htaccess 更改或决定是否需要保留或丢弃

现在你的状态仍然很差，但你现在是：

*   基于清洁核心
*   基于单独分支中的版本化主树

现在，您可以受益于版本控制、可比较和基于您的主分支的单独分支，其中包含 Magento 的可合并版本。因此，让我们尝试升级，这是 100% 成功的关键点。

1.  第一步是禁用您现在已分离到 app/code/local/Mage/ 和分离主题的所有“废话”。如果您的核心清晰并且可以禁用主题，则您没有自定义代码干扰升级过程。所以继续禁用：

    *   通过将所有本地扩展和自定义社区扩展移出 app/etc/modules/ 到临时文件夹，让它成为 app/etc/inactive/
    *   禁用自定义主题并打开 base/default/
    *   这是您处于可比较状态的好处。你知道有什么不同，你可以禁用它并根据它进行诊断
2.  现在，如果您的 repo 中的主树中的所有主要版本都单独标记或分支，那么获得更高版本只是一个命令： git merge "magento-vhateverthenextversionis"

    *   再次执行此操作后，“git status > changes.txt”将为您提供版本之间所有已更改文件的列表
    *   在浏览器上执行该站点将执行升级，并且由于您使用默认主题并且没有激活任何自定义，它会像魅力一样执行
    *   逐个版本重复升级版本，并通过在测试分支中标记或根据现有测试分支为每个版本创建一个新分支来保存代码状态，这样您就可以为您升级的每个 magento 版本保存干净状态
    *   这里的额外好处是，如果您使用版本控制执行此操作，您还将摆脱新版本丢弃的文件，您可以轻松删除它们
3.  如果您已经将 2\. 迭代到您想要的 magento 版本到最新版本，那么是时候吃掉您继承的“s*it”并执行以下操作：

    *   分析您拥有的所有扩展，看看它们是否可以升级，是否可以升级并打开看看它们是否适用于默认主题
    *   将 app/code/local/Mage 中的每个核心重写与来自 app/code/core/Mage 的新形式的原始版本进行比较。您可以使用诸如 winmerge.org 之类的差异工具或更改（您喜欢的任何操作系统和工具）或对整个文件夹进行差异化
    *   您的模板和覆盖的模板或布局也是如此。比较原始并将您的更改合并到新的基本模板并摆脱旧的 DOM
    *   一一开启主题更改和扩展并调试
4.  如果您到了这一点，那么您已经完成了大量工作，这取决于安装的混乱程度，这可能需要几天时间。但是，嘿，现在您有一个干净的 magento 核心，它是受版本控制的、合并和概览的单独覆盖，以及可以禁用的单独主题中的所有内容。

5.  有趣的部分是，如果 magento 的下一次升级可用，您可以吹口哨并将其添加为与您的主树相比并合并更改，了解更改的内容并明确概述和测试的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:44:36.770

我将首先指出您的问题内容表明对（我至少认为是）最佳实践有清晰的理解。

关于潜在的多个原始版本：软件升级的目标是使新的类和方法到位。这意味着（正如您所提到的）移植*任何*自定义，无论它们是如何实现的。

除了勤奋的差异之外，不幸的是，适合您情况的最佳技术将是**回归测试**- 检查生成的多个视图的输出。

很有可能您可能需要下注，即**从全新安装开始并积极引入**仍然认为必要的自定义功能和主题。这似乎不是最有效的方法，但我认为以下是超出明显开销的好处：

1.  您将毫无意外地控制所有自定义行为
2.  您将得到一个健康的单一来源代码库的保证
3.  **在某些时候，*您*成为了代码的所有者**，而重新集成自定义的白名单/肯定方法似乎是确保您的所有权符合您期望的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:30:52.000

我要做的第一件事是将站点复制到开发环境中。现在对此进行备份，以便您可以随时恢复到该状态。同样在这一点上，我会将实时站点置于代码锁定状态。除非绝对必要，否则不再更改代码（如果有更改，您将不得不在新的开发环境中复制它们）

既然您已经拥有了可供您使用的网站的安全副本，那么乐趣就开始了。

我要做的第一件事是下载您正在运行的 Magento 库存版本的副本。在股票版本和您当前拥有的版本之间对 /app/code/core 进行比较。这将告诉您您的差异是什么。我会尝试维护您当前拥有的所有功能，同时让核心恢复正常。

希望此时您已经安装了相当干净的 Magento。您可以考虑将其推回实时服务器，但我有一种感觉，您可能不得不做很多事情才能做到这一点，所以它可能不是一个可行的选择。

现在，我将对开发站点进行单独备份，以便您可以在需要时返回到这一点。

现在，我将尝试在开发站点上进行升级。希望一切顺利，升级没有问题。如果您不这样做，请进行所需的更正并从那里继续。

此时，您应该有一个在升级时稳定的代码库。再次实时备份（只是为了安全起见），向上推送新代码，并希望一切正常。

# jakarta-ee - 在 BI Publisher 11g Web 服务中列出报表

> ID：11757781
> 
> 赞同：0
> 
> 时间：2012-08-01T10:57:13.557
> 
> 标签：jakarta-ee, bi-publisher

有没有办法使用它提供的 Web 服务 (ReportService) 在 BI Publisher 11g 中列出可用的报告？我没有找到任何基于方法名称的东西，但也许我遗漏了一些东西。我尝试用谷歌搜索一些东西，但我主要找到有关如何创建 BI Publisher 报告的教程。：/

此外，如果使用 Web 服务无法做到这一点，也许还有其他方法可以从 java ee 应用程序以编程方式执行此操作？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:27:52.200

BI Publisher 提供的 Web 服务具有名为 的方法`getFolderContents`，它可以很好地完成工作。我一开始没有看到它，因为出于某种原因，SOAP UI 没有将它列在可用方法中。

# ios - 如果 iPad mini 的分辨率是 1024x768，现有的 iPad 应用程序是否已经可以在上面运行？

> ID：11757783
> 
> 赞同：2
> 
> 时间：2012-08-01T10:57:25.217
> 
> 标签：ios, xcode, ipad

传闻 iPad mini 的尺寸为 1024x768，屏幕为 7.85 英寸。

现有的 iPad 应用程序是否可以在此设备上使用，或者开发人员是否必须发布另一个版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:02:00.320

iPad mini 将具有相同的屏幕分辨率，但每英寸像素值更大，因此所有应用程序都应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:59:24.787

取决于它们的编程方式，但由于大多数 iPad 应用程序默认为 1024x768 分辨率，它们应该可以工作。

# asp.net-mvc-3 - 显示最后上传的图像 Mvc

> ID：11757789
> 
> 赞同：0
> 
> 时间：2012-08-01T10:57:36.790
> 
> 标签：asp.net-mvc-3, upload

我正在使用 MVC 应用程序创建 Avatar 函数

我有上传和图像的功能，并存储在一个文件夹中。

我希望能够显示此图像，并且一旦上传了较新版本，图像就会更改。比如典型的头像功能。

这是我下面的上传代码

```
 [AcceptVerbs(HttpVerbs.Post)]
    public void Upload()
    {

        foreach (string file in Request.Files)
        {
            var postedFile = Request.Files[file];
            postedFile.SaveAs(Server.MapPath("~/UploadedFiles/") + Path.GetFileName(postedFile.FileName));

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:05:02.350

您应该查看 System.Web.Caching 和 CacheDependency 类。[http://msdn.microsoft.com/en-us/library/system.web.caching.cachedependency.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cachedependency.aspx)。

基本上，您应该考虑创建在 ASP.NET 缓存中查找请求的 URI 的图像处理程序路由。如果未找到，请在将文件添加到缓存的同时加载响应流输出的文件，并在文件上添加 CacheDependency。这应该确保它会在上传替换后从缓存中擦除。

# javascript - MRAID 文件参考

> ID：11757790
> 
> 赞同：0
> 
> 时间：2012-08-01T10:57:38.640
> 
> 标签：javascript

IAB MRAID 规范 [http://www.iab.net/media/file/IAB_MRAID_VersionOne_final.pdf](http://www.iab.net/media/file/IAB_MRAID_VersionOne_final.pdf) 表示对 mraid.js 文件的引用应该是 MRAID 兼容广告中的第一行

> MRAID 脚本参考
> MRAID 注释遵循 HTML Javascript 语法，因此完整的网页和 HTML 片段都可以识别为 MRAID 广告。
> 
> `<script src="mraid.js"></script>`

没关系。但我确信某些 CTO 相信 mraid.js 不存在是可以的。当然，它必须存在并包含一些函数调用，以确认 MRAID 函数请求的存在或初始化 MRAID 命名空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:58:32.500

请参阅 api 规范中的以下文本：

“广告设计师必须包含 MRAID 的 JavaScript 识别参考，但实际的 JavaScript 库是由容器提供的，SDK 有责任确保在脚本参考后及时将它们提供给广告。 "

所以答案取决于你在做什么/你在这个过程中是谁。如果您正在设计广告，那么您不必担心它。

如果您正在开发一个应该显示广告的移动应用程序，您必须确保您的 MRAID 库/代码使该文件可用。

# osgi - 从 OSGi 包获取资源

> ID：11757793
> 
> 赞同：2
> 
> 时间：2012-08-01T10:57:50.747
> 
> 标签：osgi, bundle, apache-felix, getresource

我尝试使用 Felix/OSGi 从捆绑 jar 中获取文件作为资源。我已阅读[No access to Bundle Resource/File (OSGi)](https://stackoverflow.com/questions/6244993/no-access-to-bundle-resource-file-osgi)和[How to reference an included file in OSGi bundle when execution java.io.File or FileInputStream](https://stackoverflow.com/questions/3810303/how-to-reference-an-included-file-in-osgi-bundle-when-performing-java-io-file-or)但我不明白如何获取资源。

现在我有加载器应用程序和一个包（[包在这里](https://www.dropbox.com/s/bdlcahl5xipe2mj/I_MainForm-1.0-SNAPSHOT.jar)）。

在捆绑包中，我有注册服务的激活器：

```
 public void start(BundleContext context) throws Exception {
    Hashtable<String, String> props = new Hashtable<String, String>();
    props.put("Funct", "MainForm");
    context.registerService(MainFormInterface.class.getName(), new MainForm(), props);

    ServiceReference[] refs = context.getServiceReferences(
            MainFormInterface.class.getName(), "(Funct=MainForm)");
    if (refs == null) {
        System.out.println("Not Found MainForm on start");
    } else {
        MainFormInterface MainForm = (MainFormInterface) context.getService(refs[0]);
        MainForm.sendContext(context);
        MainForm.showWindow();
    }
} 
```

服务等级是

```
 package ihtika2.mainform;

import ihtika2.mainform.service.MainFormInterface;
import javax.swing.SwingUtilities;
import org.osgi.framework.BundleContext;

/**
 *
 * @author Arthur
 */
public class MainForm implements MainFormInterface {

    BundleContext context;

    @Override
    public void sendContext(BundleContext context) {
        this.context = context;
    }

    IC_MainForm MainForm;

    @Override
    public void showWindow() {
        SwingUtilities.invokeLater(new Runnable() {
            // This creates of the application window.
            @Override
            public void run() {
                MainForm = new IC_MainForm();
//                MainForm.main();
                MainForm.main(context);

            }
        });
    } 
```

表格的代码是

```
package ihtika2.mainform;

import com.google.code.ihtika.Vars.Ini;
import ihtika2.i_aboutform.service.AboutFormInterface;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.Properties;
import javax.swing.JFrame;
import org.apache.log4j.*;
import org.osgi.framework.BundleContext;
import org.osgi.framework.ServiceReference;

/**
 *
 * @author Arthur Khusnutdinov
 */
public class IC_MainForm extends JFrame {

    private static IC_MainForm localFrame;
    BundleContext context;

    /**
     * Creates new form IC_MainForm
     */
    public IC_MainForm(BundleContext context) {
        initComponents();
        PropertyConfigurator.configure(props());
        Ini.logger = Logger.getRootLogger();
        this.context = context;

    }

    public IC_MainForm() {
//        if (Ini.goUpdate) {
//            JDialog updateDialog = null;
//            if (updateDialog == null) {
//                updateDialog = new UpdateIhtikaClient(null);
//            }
//            IhtikaClientApp.getApplication().show(updateDialog);
//
//        } else {
////            JOptionPane.showMessageDialog(null, "Ваша копия программы устарела"
////                    + "На http://ihtik.lib.ru/ ...", "LectorInstaller", 1);
////            System.exit(0);
//            show(new IhtikaClientView(this));
//        } 
        try {

            URL configURL = context.getBundle().getEntry("ihtika2/mainform/favicon_1.jpg");
            System.out.println("sdfsdfsdf");
            if (configURL != null) {
                InputStream input = configURL.openStream();
                try {
                    // process your input here or in separate method
                } finally {
                    input.close();
                }
            }

//            InputStream www = getClass().getResourceAsStream("/ihtika2/mainform/service/favicon_1.jpg");
//            InputStream www = getClass().getResourceAsStream("/com/google/code/ihtika/resources/favicon_1.jpg");

//            BufferedImage qqq;
//            qqq = javax.imageio.ImageIO.read(www);
//            this.setIconImage(qqq); // NOI18N

        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        menuBar = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem2 = new javax.swing.JMenuItem();
        jMenuItem1 = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setIconImages(null);

        jMenu1.setText("Главное меню");

        jMenuItem2.setText("О программе");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem2);

        jMenuItem1.setText("Выход");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem1);

        menuBar.add(jMenu1);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 800, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 598, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>                        

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
        // TODO add your handling code here:
        System.exit(0);
    }                                          

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {                                           
        try {

            ServiceReference[] refs = context.getServiceReferences(
                    AboutFormInterface.class.getName(), "(Funct=*)");
            if (refs == null) {
                System.out.println("Not Found AboutForm on show");
            } else {
                AboutFormInterface AboutForm = (AboutFormInterface) context.getService(refs[0]);
                AboutForm.showWindow();
            }
        } catch (Exception ex) {
            Ini.logger.fatal("Error on showing AboutForm", ex);
        }

    }                                          

//    public void main() {
    public void main(final BundleContext context) {

        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception ex) {
            Ini.logger.fatal("Error in MainForm: ", ex);
        }
        //</editor-fold>

//        if (args.length>0 && (args[0].equals("update") || args[0].equals("updatesvn"))) {
//            Ini.updateType = args[0];
//            Ini.goUpdate = true;
//        }

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                localFrame = new IC_MainForm(context);
                localFrame.setVisible(true);
            }
        });
    }

    public static void stop() {
        localFrame.setVisible(false);
        localFrame.dispose();
        localFrame = null;
    }

    private static Properties props() {
        Properties props = new Properties();
        props.put("log4j.rootLogger", "INFO, R");
        props.put("log4j.appender.R",
                "org.apache.log4j.DailyRollingFileAppender");
        props.put("log4j.appender.R.File", "logs/IhtikaClient.log");
        props.put("log4j.appender.R.Append", "true");
        props.put("log4j.appender.R.Threshold", "INFO");
        props.put("log4j.appender.R.DatePattern", "'.'yyyy-MM-dd");
        props.put("log4j.appender.R.layout", "org.apache.log4j.PatternLayout");
        props.put("log4j.appender.R.layout.ConversionPattern",
                //"%d{HH:mm:ss,SSS} %c - %m%n");
                //"[%5p] %d{yyyy-MM-dd mm:ss} (%F:%M:%L)%n%m%n%n");
                "[%5p] %d{yyyy-MM-dd mm:ss} %c (%F:%M:%L)%n%m%n");
        return props;
    }
    // Variables declaration - do not modify                     
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuBar menuBar;
    // End of variables declaration                   
} 
```

现在 jpg 图像位于路径 ihtika2\mainform\favicon_1.jpg 上的包中

但现在开始显示错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ihtika2.mainform.IC_MainForm.<init>(IC_MainForm.java:54)
    at ihtika2.mainform.MainForm$1.run(MainForm.java:32)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

错误在哪里？谢谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:23:37.167

我认为`context`in`IC_MainForm`是空的；你没有把它设置在`IC_MainForm()`.

# javascript - 使用 Javascript（和 Blackberry WebWorks SDK）创建、保存读取 cookie

> ID：11757799
> 
> 赞同：0
> 
> 时间：2012-08-01T10:58:19.357
> 
> 标签：javascript, cookies, blackberry-webworks

我要开发一个 Blackberry OS 5 + 应用程序，我需要存储电子邮件、密码和语言设置。

Blackberry OS 5 没有本地存储支持，所以我需要使用另一种方法。在某处我读到我可以使用 cookie（密码将被加密存储）。

但我的问题是我不知道如何使用 Webworks SDK 和/或 javascript 创建、保存和读取 cookie。

我该怎么做？

# python - 获取堆栈中上一级函数的 __file__

> ID：11757801
> 
> 赞同：8
> 
> 时间：2012-08-01T10:58:36.227
> 
> 标签：python, stack, filepath

我发现我经常使用这种模式：

```
os.path.join(os.path.dirname(__file__), file_path) 
```

所以我决定在一个包含许多这样的小实用程序的文件中放入一个函数：

```
def filepath_in_cwd(file_path): 
    return os.path.join(os.path.dirname(__file__), file_path) 
```

问题是，`__file__`返回*当前*文件，因此返回当前文件夹，我错过了重点。我可以做这个丑陋的黑客（或者只是继续写模式）：

```
def filepath_in_cwd(py_file_name, file_path): 
    return os.path.join(os.path.dirname(py_file_name), file_path) 
```

然后对它的调用将如下所示：

```
filepath_in_cwd(__file__, "my_file.txt") 
```

但如果我有办法获得`__file__`堆栈中上一层的函数，我会更喜欢它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T11:14:03.693

这应该这样做：

```
inspect.getfile(sys._getframe(1)) 
```

[`sys._getframe(1)`](http://docs.python.org/library/sys.html#sys._getframe)获取调用者框架，[`inspect.getfile(...)`](http://docs.python.org/library/inspect.html#inspect.getfile)检索文件名。

# rational-number - 生成下一个有理数

> ID：11757807
> 
> 赞同：0
> 
> 时间：2012-08-01T10:58:58.267
> 
> 标签：rational-number

我如何将下一个有理数生成为 2 个整数变量。例如，如果我有 x=3 且 y = 2，则下一个有理数是 x=3 且 y=3。数字生成需要像下一个顺序：

[查看所需订单](http://upload.wikimedia.org/wikipedia/commons/8/85/Diagonal_argument.svg)

有人知道我该如何实现它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:25:01.897

n 是分子，d 是分母：

```
if (n%2 == d%2) {
  n++;
  if (d > 1) d--;
} else {
  d++;
  if (n > 1) n--;
} 
```

# java - JList水平调整大小导致垂直缩小

> ID：11757813
> 
> 赞同：0
> 
> 时间：2012-08-01T10:59:08.283
> 
> 标签：java, swing, jscrollpane, jlist

我在 ScrollPane 中有一个 jList，当我调整框架大小时它的行为很奇怪。通常是这样的： ![前](../Images/3da62b7d8dad8ab9c1a67c845cb85ad7.png) 在我水平增长左边的表格后，我的 jList 变成了这样： ![后](../Images/f0e63fbf20a3f7c3a766eda6b066e9d7.png)

我发布了一些可能有用的 gui 代码：

```
 scrlInterfaceList.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scrlInterfaceList.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

    //---- list1 ----
    lstInterfaces.setBorder(BorderFactory.createTitledBorder(LFwPolicyMaker.messages.getString("IpMacMatcher.MatchTab.controlPanel.interfaces.title")));
    lstInterfaces.setPreferredSize(null);
    lstInterfaces.setMaximumSize(new Dimension(55, 90));
    lstInterfaces.setMinimumSize(new Dimension(55, 90));

    lstInterfaces.setLayoutOrientation(JList.VERTICAL);
    lstInterfaces.setModel(new AbstractListModel() {

        String[] strings = getInterfaces();

        public int getSize() {
            return strings.length;
        }

        public Object getElementAt(int i) {
            return strings[i];
        }
    });
    scrlInterfaceList.setViewportView(lstInterfaces);

    setSelectedInterfaces();

    add(scrlInterfaceList,new GridBagConstraints(0, 5, 1, 1, 0.0, 0.0,
                GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                new Insets(0, 0, 0, 0), 0, 0)); 
```

可能是什么问题？我希望 jList 继续水平缩小，如组合框，上面的按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:32:53.633

尝试将滚动窗格的 GridBagConstraints 的权重值设置为 1.0

# encoding - 如何将 .xlsx 文件转换为编码 utf-8？

> ID：11757814
> 
> 赞同：4
> 
> 时间：2012-08-01T10:59:09.483
> 
> 标签：encoding, utf-8, xlsx

我有 Excel 文件 somefile.xlsx，我想将此文件转换为编码 utf-8 吗？请告诉，如何使这个？

# css - css 的不透明度功能 - div 内的透明度

> ID：11757829
> 
> 赞同：3
> 
> 时间：2012-08-01T10:59:53.560
> 
> 标签：css, html

我对 html 功能的工作感到困惑`opacity`......假设有两个`divs`，一个在另一个内部，并且我应用于`opacity`外部 div，它也会自动将不透明度应用于内部`div`。我们如何才能撤消它，就像 opacity 应该只适用于 external `div`？

我使用了 css 代码不透明度 [http://jsfiddle.net/4uMdj/](http://jsfiddle.net/4uMdj/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:04:09.747

如果您`background-color`在外部 DIV 中使用，那么您可以`rgba`为其定义值。像这样写：

```
.outer{
 background-color: rgba(0,0,0,0.5);
} 
```

& 为 IE 使用 IE 过滤器

您可以从这里为 IE 生成 rgba 过滤器[http://kimili.com/journal/rgba-hsla-css-generator-for-internet-explorer/](http://kimili.com/journal/rgba-hsla-css-generator-for-internet-explorer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:03:33.570

```
.parent{
    position: relative;
}

.parent:before {
    z-index: -1;
    content: '';
    position: absolute;

    opacity: 0.3;
    width: xxpx;
    height: xxpx;
    background: ; 
}

.child{
    Color:xx;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:03:55.523

如果您只是设置颜色更容易和更安全地使用背景不透明度，这不会影响任何嵌套元素

```
.alpha
    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.6);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T11:40:59.713

如果你使用 css，你可以使用 rgba，但你必须覆盖子元素的背景，否则它将从父 div 继承：[jsfiddle 示例](http://jsfiddle.net/s3YYr/3/)

示例中的CSS：

```
.opacity {
    background-color: rgba(0,150,0,0.2);
    padding: 20px;
    border: 1px solid #000;
}
.noopacity {
    border: 1px solid #000;
    background-color: #090; /*non alpha background*/
    padding: 20px;
} 
```

跨浏览器有效的最简单方法是使用您需要的颜色和透明度创建一个 1px PNG 文件，并使用以下 css：

```
.opacity {
    background: url("path/to/your/1px/transparent/background/image.png");
} 
```

因为图像不会被用作继承背景；）

（注意：IE6默认不支持PNG透明！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:03:01.750

如果您在`opacity`其父元素上使用应用，则无法撤消（增加）嵌套元素的不透明度。

尝试改用`background: rgba(r,g,b, opacity)`：这不会对嵌套元素应用不透明度

# unity3d - 设置配置设置的最佳实践

> ID：11757830
> 
> 赞同：2
> 
> 时间：2012-08-01T11:00:00.683
> 
> 标签：unity3d

我有一些具有在编辑器中设置的公共属性的游戏对象。

现在，我想更改它，以便从配置文件中加载其中一些。

例如：userForm 脚本有公共字符串 uploadURL。

什么是最佳实践。我可以在 Start() 有一个脚本来读取配置并设置每个游戏对象的属性。但是，我怎么能保证我的设置在其他对象之前运行呢？

有替代方案吗？

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:03:00.043

好吧，该`Awake()`方法在之前运行`Start()`，这可能会对您有所帮助。您还可以从 Unity IDE 编辑特定脚本的运行顺序（确保特定组件在给定更新周期中首先运行）。

但是，如果您从文件加载配置，您可能会发现拥有一个从一个配置文件设置所有游戏对象的单一总体“配置加载器”更容易（也更有效），而不是让每个组件从一个配置文件中读取。分开归档。

# javascript - 使用 sql 数据库更新谷歌地图标记

> ID：11757835
> 
> 赞同：0
> 
> 时间：2012-08-01T11:00:07.793
> 
> 标签：javascript, google-maps

我是谷歌地图的新手。我尝试使用谷歌地图开发跟踪系统。我成功开发了一个连接到 sql 数据库以检索标记的地图。根据gps单位更新数据库。我想每 10 秒在地图上显示一次。这是我的绳子。如果有人可以，请帮助我。谢谢。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps AJAX + mySQL/PHP Example</title>
 <script src="http://maps.google.com/maps/api/js?sensor=false"
        type="text/javascript"></script>

<script type="text/javascript">
 //<![CDATA[

  var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
  };

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(6.93360361159907, 79.85547582),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function doNothing() {}

//]]>
</script>

</head>

 <body onload="load()">
 <div id="map" style="width: 1000px; height: 600px"></div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:39:08.697

如果您计划每 10 秒更新一次地图上的标记，则必须每 10 秒从数据库请求位置数据。对于小型项目，[轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)数据库将是最简单的选择。否则，您可以查看[web sockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)。

在回调中，您可以更改标记位置

```
marker.setPosition() 
```

# java - 如何分配二维字符串数组？

> ID：11757837
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:00:08.827
> 
> 标签：java

```
String[][] str=null;
str = new String[3]; 
```

*我有一个数组字符串

```
String[][] str=null; 
```

如果我分配`str=new String[3]`它的值显示错误。怎么做*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:01:07.030

```
String[][] str=null;
 str=new String[3][3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:02:50.710

`String[][] str=null;`是矩阵而不是向量。您必须将其作为一个来启动。`String[rows][columns]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:44:05.647

```
String[][] str=null;
str = new String[3]; 
```

您声明二维数组，但像一维一样初始化。

代码应该是

```
String[][] str=null;
str=new String[1][1]; 
```

或者

```
String[][] str=null;
str=new String[2][1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:05:32.070

```
 String[][] str=null;
     str=new String[3][]; 
```

默认情况下，它会将值设置为`null`

# hardware - intel e7-4807 是否支持 Pause-loop 退出

> ID：11757839
> 
> 赞同：0
> 
> 时间：2012-08-01T11:00:15.647
> 
> 标签：hardware, virtualization

intel e7-4807 是否支持 Pause-loop 退出

libvirt 从哪个版本支持 Pause-loop 退出。

谢谢。我已经在谷歌上搜索了很长时间，但没有结果。感到非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:39:03.620

如果问题在一个半月后仍然相关，并且如果您拥有其中一个处理器，请在其上运行 VirtualBox 虚拟机并检查日志文件中的 VMX_VMCS_CTRL_PROC_EXEC_CONTROLS_PAUSE_EXIT（暂停时退出）和/或 VMX_VMCS_CTRL_PROC_EXEC2_PAUSE_LOOP_EXIT（退出指定暂停循环数）。

# css - LESS mixin 建议

> ID：11757841
> 
> 赞同：3
> 
> 时间：2012-08-01T11:00:23.777
> 
> 标签：css, less

我试图为我的字体大小和行高创建一个 LESS mixin，但是当我尝试运行它时出现错误。任何人都可以建议我可能在哪里出错：

```
.font( @size: 1.6, @line: @size * 1.5 ){
  @fontSizeRem: @size;
  @fontSizePx: ( @size * 10 );
  @lineHeightRem: @line;
  @lineHeightPx: ( @line * 10 );
  font-size: ~"@{fontSizePx}px";
  font-size: ~"@{fontSizeRem}rem";
  line-height: ~"@{lineHeightPx}px";
  line-height: ~"@{lineHeightRem}rem";
}

h1{
 .font(1.6);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:06:03.570

LESS 不支持依赖于其他参数的参数。要实现可选的第二个参数，您可以添加另一个 mixin：

```
.font( @size:1.6 ) {
  .font(@size, @size * 1.5)
}
.font( @size, @line ) {
    /* ... See question for the remainder ... */ 
```

编译为：

```
h1 {
  font-size: 16px;
  font-size: 1.6rem;
  line-height: 24.000000000000004px;
  line-height: 2.4000000000000004rem;
} 
```

# java - 什么是原子变量，它的用途是什么？

> ID：11757844
> 
> 赞同：0
> 
> 时间：2012-08-01T11:00:46.360
> 
> 标签：java

```
public List<Minterm> completeMinterm(Minterm minterm, String variables){
  List<Minterm> minterms=new ArrayList<Minterm>();

    Minterm m1=new Minterm();
    Minterm m2=new Minterm();
    for (int k = 0; k < minterms.size(); k++) {
        for (int i = 0; i < variables.length(); i++) {
       ..
        }
            m1= minterms.get(k);
            m1.addAtom(new Atom(variables.charAt(i),false));
            m2 = minterms.get(k);
            m2.addAtom(new Atom(variables.charAt(i),true));

        ..
    }
    } 
```

我使用eclipse调试器发现错误，我不明白，为什么添加到的原子`m2`也同时添加到`m1`，运行此行时：

> m2.addAtom(new Atom(variables.charAt(i),true));

任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:03:24.397

在这之后

```
m1= minterms.get(k);
m1.addAtom(new Atom(variables.charAt(i),false));
m2 = minterms.get(k);
m2.addAtom(new Atom(variables.charAt(i),true)); 
```

m1 和 m2 指向同一个对象（从 返回`minterms.get(k);`）。例如，您可以尝试比较 m1 和 m2 哈希码或指针 ( `m1==m2`)。

# java - 常量的改变对 JSP 不生效

> ID：11757849
> 
> 赞同：0
> 
> 时间：2012-08-01T11:00:59.947
> 
> 标签：java, jsp

我在 java 接口 () 中定义了一个常量`Constants`，如下所示：

```
public final static int DEFAULT_VAL = 2; 
```

这在我的代码中的几个 JSP 中使用：

```
if (sample.hasModule(Constants.DEFAULT_VAL){
    // some code
} 
```

但是，当我最近将常量的类型从 更改`int`为时`long`，我在 jsp 上得到了一个`noSuchMethodError`调用它，因为`Constants.DEFAULT_VAL`jsp 中的仍然返回 int 而不是 long。

我还更改了所有方法，例如`hasModule`从将`int`as 参数更改为`long`.

java中的常量有什么特殊处理吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:30:50.010

因为你只发布了一条线，我只能猜到。

JSP 文件 - 因为 apprivtation 保留 - 使用 Java 执行。Java 允许您覆盖方法。

假设您在特定类中的方法具有方法“hasModule(int numer)”。如果您将**int**值传递给该方法，则没有问题。如果将 long 值传递给方法，编译器或 JVM 会查找名称为“hasModule()”且参数签名为**long**值的方法。Java 是否找不到该方法，您的错误消息是它的结果之一。

# node.js - 如何在我的开发环境中测试 https？

> ID：11757852
> 
> 赞同：1
> 
> 时间：2012-08-01T11:01:04.523
> 
> 标签：node.js, https, node-http-proxy

我们的生产服务器在 SSL 终结器后面，我们的开发环境不是。我们如何在开发中复制 SSL？

感谢任何线索。

# php - 如何使用php将原始数据发送到IP

> ID：11757855
> 
> 赞同：3
> 
> 时间：2012-08-01T11:01:13.197
> 
> 标签：php, sockets

我正在尝试使用 php 脚本将原始数据发送到嵌入式设备（基于 WizFi wlan 模块的 Wifi Shield 安装在 Arduino Leonardo 上）。我可以通过执行以下操作成功地将数据发送到设备：

`echo -n "teststring" | nc xx.xx.xx.xx 4000`在 unix 终端 (Mac OS X) 上（x 代表设备 ip 的占位符）

或使用带有 ip、端口并选择“RAW”作为连接类型的 Putty（在 Windows XP 下）。

为了达到同样的效果，我尝试在 php 脚本中建立一个套接字（因为我想通过 Web 表单向设备发送数据）。

请参阅下面的示例代码：

```
$mysocket = socket_create(AF_INET, SOCK_RAW,255);  

if ($mysocket === false) {
  $errorcode = socket_last_error();
  $errormsg = socket_strerror($errorcode);
  die("could not establish socket: [$errorcode] $errormsg");
}

// connect to socket
if (socket_connect($mysocket, 'xx.xx.xx.xx', 4000)) {
  $text = "Socket connection seems successful!";
} else {
  $text = "Unable to connect<pre>".socket_strerror(socket_last_error())."</pre>";
}

echo $text;

echo "Mystring: ";
echo $mystring;

echo "try to send data";

// send string to server
socket_write($mysocket, $mystring, strlen($mystring)) or die("Could not send data");
$errorcode = socket_last_error();
$errormsg = socket_strerror($errorcode);

echo "errorcode:";
echo $errorcode;
echo $errormsg;

socket_close($mysocket); 
```

套接字创建命令（参数的最后一个整数）的相应协议是：（我从服务器（Synology NAS）的 /etc/protocols 复制的列表。

```
<!-- language: none -->
ip      0       IP
icmp    1       ICMP
igmp    2       IGMP
ggp     3       GGP
tcp     6       TCP
pup     12      PUP
udp     17      UDP
idp     22      IDP
raw     255     RAW 
```

在这个例子中，我使用了 RAW。

我从 shell 运行这些示例， `php phpscriptinshell.php` 因为我在使用 SOCK_RAW 选项时遇到了麻烦，因为不允许我通过基于 Web 的 php 脚本运行命令。

所以最后我得到了错误输出：

套接字连接似乎成功！尝试发送数据PHP警告：socket_write（）：无法写入套接字 [22]：第 37 行 /volume2/web/phpscriptinshell.php 中的参数无效

警告：socket_write()：无法写入套接字 [22]：/volume2/web/phpscriptinshell.php 第 37 行 ficus> php phpscriptinshell.php 中的参数无效

当我使用协议的其他选项时。例如 ICMP 为 1 我没有收到任何错误，但也没有传输数据。当我将 0 用于 IP 时，我得到“无法建立套接字：[93] 不支持协议” Wehn 我将 6 用于 TCP，终端变得无响应并且 wifi 芯片失去了与网络的连接。

所以我的问题是：

1) 为什么我在尝试写入套接字时得到“无效参数”？

2) 使用 TCP 作为协议参数时会发生什么？

3）使用php发送数据的正确方法应该是什么？

4) 你对解决这个问题有什么建议？

非常感谢您的提示！

作为第二次尝试遵循 Barmers Hint 我尝试了相同的脚本但替换

```
$mysocket = socket_create(AF_INET, SOCK_RAW,255); 
```

经过

```
$mysocket = socket_create(AF_INET, SOCK_STREAM,SOL_TCP); 
```

并再次与

```
$mysocket = socket_create(AF_INET, SOCK_STREAM,6); 
```

按照我用作第二个脚本的第二个提示：

```
$socket = stream_socket_server("tcp://62.32.29.210:4000", $errno, $errstr);

if (!$socket) {
echo "$errstr ($errno)<br />\n";

} else {
while ($conn = stream_socket_accept($socket)) {
fwrite($conn, 'The local time is ' . date('n/j/Y g:i a') . "\n");

fclose($conn);
}
fclose($socket);
} 
```

对不起，我对格式不太熟悉，所以请道歉。感谢上次让我的帖子看起来不错的那个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:15:00.883

你要：

```
$mysocket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP); 
```

`SOCK_RAW`用于当您需要访问数据包标头或某些低级协议（如 ICMP）时。

# php - 在购物车框架中，什么是“模型”字段？

> ID：11757857
> 
> 赞同：0
> 
> 时间：2012-08-01T11:01:37.600
> 
> 标签：php, opencart

我已经开始研究 OpenCart。

当我编辑产品时，有一个字段`model`不能为空。我知道很多其他的电子商务程序也有一个`model`属性。

有人能告诉我这个`model`字段是做什么用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:04:48.233

通常，“产品型号”字段是店主用来识别确切产品的产品编号。通常，在我知道的商店系统中，它不需要是唯一的，也不是必填字段（因为商店通过其 ID 而非型号来识别产品）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:03:07.643

`model`将是您正在查看的产品的型号。基本上是产品的唯一标识符。确保没有重复的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:42:33.790

我正在使用opencart。MODEL 是制造商的型号。

$product_info['model'] 是找到用于更改主题的模型的位置

# vb.net - DNN 调度程序运行成功，但数据库中没有数据更新

> ID：11757859
> 
> 赞同：0
> 
> 时间：2012-08-01T11:01:41.213
> 
> 标签：vb.net, dotnetnuke

在 DNN 上开发的网站（由其他人创建的网站）上工作。可以在网站的 Scheduler History 中看到 Scheduler 运行成功。调度程序函数说它正在将 XML 文件写入数据库，但运行调度程序后数据库没有更新。

在哪里可以找到数据库的连接字符串？在 schedulerproject.vb 文件中没有指定。我还能在哪里找到这个？知道这里可能是什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:56:28.200

这实际上取决于您正在运行的实际计划作业。

但是，根据最佳实践，大多数数据库连接都在`<connectionStrings>`web.config 部分中。

# android - 向动态 Android TextView 添加边距

> ID：11757860
> 
> 赞同：1
> 
> 时间：2012-08-01T11:01:55.910
> 
> 标签：android, textview, margin, android-relativelayout, toast

我已经查看了一堆以前的答案，并尝试了标记为工作的代码，但到目前为止，我所做的任何事情都无法说服我在 runtme 创建的 TextView 从左到右完全填充屏幕。我想在两侧添加一个与普通 Toast 类似的边距。之后，我可以为形状添加阴影。

这是我的表单布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rel_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/hello_world"
        android:textColor="@color/holobrightblue"
        android:textSize="48sp"
        android:textStyle="bold"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

..和我的代码

```
textView = new TextView(m_Context);
RoundRectShape rs = new RoundRectShape(new float[] { 10, 10, 10, 10, 10, 10, 10, 10 }, null, null);

ShapeDrawable sd =  new ShapeDrawable(rs);
sd.setAlpha(m_opacity);
textView.setBackgroundDrawable(sd);             
textView.setTextColor(m_txtcolor);  
textView.setText(toasttitle+"\n"+toastmessage);
textView.setBackgroundColor(Color.BLACK);
textView.setPadding(10,10,10,10);

LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);

lp.setMargins(60, 0, 60, 0);          
textView.setLayoutParams(lp);

toastView = new Toast(m_Context);
toastView.setView(textView);
toastView.setDuration(m_toastlen);
toastView.setGravity(m_screengravity, 0,0);
toastView.show(); 
```

如前所述，我从其他解决方案中尝试过的任何东西似乎都无法说服 textview 填充所有水平空间。

我试过删除那个形状等......

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:13:20.640

您将**需要包含您的 TextView 的持有人 RelativeLayout**，

然后您可以将**持有人的重力设置为 CENTER**

```
RelativeLayout head2 = new RelativeLayout(this);
head2.setId(++myid);
RelativeLayout.LayoutParams head2Params = new RelativeLayout.LayoutParams(
        LayoutParams.FILL_PARENT, 25);
head2Params.addRule(RelativeLayout.BELOW, head1.getId());
head2.setLayoutParams(head2Params);
head2.setBackgroundColor(Color.CYAN); 
```

**然后你创建 TextView**

```
textView = new TextView(m_Context);
RoundRectShape rs = new RoundRectShape(new float[] { 10, 10, 10, 10, 10, 10, 10, 10 }, null, null);

ShapeDrawable sd =  new ShapeDrawable(rs);
sd.setAlpha(m_opacity);
textView.setBackgroundDrawable(sd);             
textView.setTextColor(m_txtcolor);  
textView.setText(toasttitle+"\n"+toastmessage);
textView.setBackgroundColor(Color.BLACK);
textView.setPadding(10,10,10,10);

LinearLayout.LayoutParams lp = new
   LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                                          ^^^^^^^^^^^^
                                          ^^^^^^^^^^^^MUST  EDIT
lp.setMargins(60, 0, 60, 0);          
textView.setLayoutParams(lp); 
```

**然后将您的 Textview 添加到具有 Center Gravity 的持有人 relativeLayout**

```
head2.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
head2.addView(textView); 
```

展示下

```
toastView = new Toast(m_Context);
toastView.setView(textView);
toastView.setDuration(m_toastlen);
toastView.setGravity(m_screengravity, 0,0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-02T12:08:51.240

这是将 textview ( text ) 设置为给定边距的简单代码，

```
LayoutParams lp = new LayoutParams(text.getWidth(), text.getHeight());
        lp.setMargins(5, 5, 0, 5);
        text.setLayoutParams(lp); 
```

setMargins() 的参数如下：

```
LayoutParams.setMargins(int left,int top , int right,int bottom) 
```

setLayoutParams 以 LayoutParams 的 Object 为参数

# entity-framework - SaveChanges 查询生成性能

> ID：11757863
> 
> 赞同：0
> 
> 时间：2012-08-01T11:02:02.617
> 
> 标签：entity-framework, entity-framework-5

保存大量记录时，即使记录属于同一类型，SaveChanges 似乎也很慢。下图显示了尝试保存约 60000 条记录的分析会话，这些记录属于混合类型，但其中许多共享相同类型。我的期望是 SaveChanges 调用的 CreateDbCommandDefinition 将为每个记录类型调用一次，令人惊讶的是它是为每个记录单独调用的。这当然会导致性能不佳。

我用 EF 4.3.1 和 5.0 都检查了这一点，结果相同。无论如何配置EF，它不会为数据库中插入/更新的每条记录创建一个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:27:27.570

EF 在单独的 SQL 命令和单独的数据库往返中执行每个修改 - 这是性能不佳的主要原因。目前没有办法改变这一点，除非您从 codeplex 下载[EF 源代码](https://entityframework.codeplex.com/)并自己实现命令批处理 - 甚至还有[相关的工作项](http://entityframework.codeplex.com/workitem/53)和[功能请求](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015357-batch-cud-support)。

# flyway - Flyway 1.7 迁移事务

> ID：11757864
> 
> 赞同：1
> 
> 时间：2012-08-01T11:02:03.273
> 
> 标签：flyway

我目前正在使用 flyway 1.7 和 jBoss 7。当 flyway 迁移运行时，如果完全迁移的时间超过 5 分钟，jBoss 显示它会使事务超时，但即使在那之后 flyway 继续迁移，最终我最终得到了完全迁移DB 但由于事务超时而导致部署失败。我最近还意识到，如果我在迁移运行时尝试关闭 jBoss，迁移不会受到影响并且它们会继续执行。这是一种可取的行为吗？flyway 是否在她自己的某种被阻止的事务下运行迁移，我对此无能为力？

问候， D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T12:03:49.090

我建议在独立应用程序中使用 flyway。此应用程序可能会解析您的`standalone.xml`文件以获取数据库连接的参数。这样做的好处是在 JBoss 启动时不会加载用于迁移的代码，因此不会浪费您的内存。第二个优点（如果我错了，请纠正我）：当应用程序在 JBoss 中启动时，您可以配置 Hibernate 设置以验证 DB 结构。因此，您可以确定 DB 结构符合您的对象模型的要求。

# javascript - 根据导航链接显示不同的 div 内容

> ID：11757865
> 
> 赞同：0
> 
> 时间：2012-08-01T11:02:06.413
> 
> 标签：javascript, jquery, html

我正在为一家拥有许多办事处的公司创建一个联系页面，因此他们不想为每个办事处创建一个新页面，而是希望内容根据所选位置进行更改。

我让它与一个选择框一起工作，但在环顾四周后，它很难设置选择框的样式并且不适合移动设备。

因此，我想创建一个下拉导航菜单，当用户单击菜单项时，div 内容将更改（或隐藏 div 并将其替换为另一个）。我发现下面的代码只适用于两个链接，但客户有 40 多个办公室，所以我认为必须有更好的方法来处理这个问题？我可以获得每个链接或 li 一个唯一的 ID。

HTML：

```
<a href="#" id="link_1">Press me</a>
<a href="#" id="link_2">Press me</a>

<div id="div_1"> Content1 </div>
<div id="div_2"> Content2 </div> 
```

查询：

```
$(document).ready(function(){
    // Hide div 2 by default
    $('#div_2').hide();

    $('#link_2').click(function() { 
        $('#div_1').hide();
        $('#div_2').show();
    });

    $('#link_1').click(function(){ 
        $('#div_2').hide();
        $('#div_1').show();
    }); 
}); 
```

可以稍微改变一下问题，但仍然需要相同的结果：

我目前使用一个“选择框”，它完全按照我想要的方式使用以下内容：

JS：

```
<script type="text/javascript">
$(document).ready(function () {
$('.eurowrapper').hide();
$('#option1').show();
$('#selectMe').change(function () {
    $('.eurowrapper').hide();
    $('#'+$(this).val()).show();
})
});
</script> 
```

HTML：

```
<div class="styled-select">
<select id="selectMe">
<option value="option1">Head Office</option>
<option value="option2">Belgravia</option>
<option value="option3">Brighton</option>
<option value="option4">Chelsea</option>
<option value="option5">Clapham</option>
<option value="option6">Glasgow</option>
<option value="option7">Holland Park</option>
<option value="option8">Hyde Park</option>
<option value="option9">Islington</option>
<option value="option10">Maidstone</option>
<option value="option11">Oxford</option>
<option value="option12">Reading</option>
<option value="option13">St John's Wood</option>
<option value="option14">Tower Bridge</option>
<option value="option15">Wapping</option>
<option value="option16">Cluttons Resorts</option>
</select>
</div> 
```

和分区：

```
<div id="option1" class="eurowrapper" style="float: left;"> Content </div>

<div id="option2" class="eurowrapper" style="float: left;"> More Content </div> 
```

上述工作完美，在页面加载“总公司”联系方式在那里，当从“选择”框中选择另一个城镇时，这种情况会发生变化。

我想像我之前说的那样离开选择框并使用下拉导航，有什​​么方法可以让我拥有与选择框完全相同的功能，JS fiddle：

[http://jsfiddle.net/NY9bW/](http://jsfiddle.net/NY9bW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:07:28.373

我有一个解决方案给你：

将 A 标签更改为：

```
<a href="#id_of_div" class="links" id="link_1">Press me</a>
<a href="#id_of_div2" class="links" id="link_2">Press me</a> 
```

Div 应该是这样的：

```
<div id="id_of_div" class="divs"> Content1 </div>
<div id="id_of_div2" class="divs"> Content2 </div> 
```

jQuery 将如下所示：

```
$('a.links').click(function (e){
   e.preventDefault();
   var div_id = $('a.links').index($(this))
   $('.divs').hide().eq(div_id).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:01:59.053

这是对 Alaa Badran 解决方案的一个小修改：我们可以做的不是隐藏所有 div，然后“显示”选定的一个，而是：将所有 div 的初始 CSS“显示”属性设置为“无”。像这样：

```
CSS:
#location1toN {
    display : none;
} 
```

然后，当用户从您的下拉列表或链接中选择一个位置时，获取适当的 div 的 ID，如 Badran 所示，然后只需通过 jQuery 更改特定 div 的 CSS 属性，如下所示：

```
jQuery:
$(id_of_correct_div).css("display","block") ; 
```

它基本上是相同的，但稍微更优化的解决方案。

或者另一种解决方案：由于它是一个联系页面，因此要填写的字段将基本相同，但其内容会根据所选位置而变化。所以你可以只有**一个**div，包含“地址”“联系电话”“电子邮件地址”等字段。然后，当用户从列表中选择一个位置时，您可以向服务器发送 AJAX 请求，获取联系方式从服务器，并更新**一个**div 的字段。由于是 AJAX，页面不会刷新。它可能会占用大量服务器，但绝对可以节省您创建 40 个 div！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:26:22.170

您可以通过选择它们来使用您获得的数组的索引，不必将它们硬编码为 id。

```
var contentDivs = $('.contentDiv');

$('.links').click(function(){
  var index = $(this).index();

  $('.contentDiv').hide();
  $(contentDivs[index]).show();

}); 
```

但这意味着，如果您更改订单，它将与同一个办公室不对应，如果有 40 个办公室，这将导致错误。

因此，更不容易出错的解决方案是为办公室提供数据属性、类或 ID，以便您识别它们。像你一样，但我会根据他们的办公室命名他们。

```
<a href="#" class="contentLink" data-office="melbourne" >Press me</a>
<a href="#" id="contentLink" data-office="sydney" >Press me</a>

<div id="content_melbourne" class="contentDiv"> Content1 </div>
<div id="content_sydney" class="contentDiv"> Content2 </div>

<script>
$(document).ready(function(){
     $('.contentLink').click(function(){
     var office = $(this).attr('data-office');

     $('.contentDiv').hide();
     $('#content_' + office).show();

   });
});
</script> 
```

# php - 使用word文档作为模板并替换里面的标签

> ID：11757866
> 
> 赞同：1
> 
> 时间：2012-08-01T11:02:07.547
> 
> 标签：php

我到处寻找，但什么也没找到，我的网站上有一个 word 文档导入器，我的客户想导入一个带有 %Test1 之类标签的 word 文档，这些将被 PHP 脚本替换并以 .文档格式。

我不知道如何去做，因此将不胜感激指针或示例；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:04:53.180

我找到了一个很棒的库来做到这一点：PHPWord。

# nhibernate - NHibernate 集合加载，“非法访问加载集合”

> ID：11757870
> 
> 赞同：7
> 
> 时间：2012-08-01T11:02:21.417
> 
> 标签：nhibernate, fluent-nhibernate

我在加载集合时遇到问题。我的设置是简单的一对多关联，使用 FluentNHibernate 映射。实体被加载并没有抛出异常，但访问相关集合显示“*非法访问加载集合*”。我将在此处粘贴相关部分的代码。

```
[Serializable]
[DataContract(IsReference = true)]
public partial class Department : Entity
{
    ...
    [DataMember]
    public virtual IList<PressJobRun> PressJobRun
    {
        get { return pressJobRunField; }
        protected set { pressJobRunField = value; }
    }
    ...
} 
```

映射如下

```
public DepartmentMap()
{
    Id(x => x.Id);
    Map(x => x.Name)
        .Not.Nullable()
        .Length(100);
    HasMany(x => x.PressJobRun)
        .AsBag()
        .Inverse()
        .Cascade.AllDeleteOrphan()
        .LazyLoad()
        .BatchSize(50);
    ...
} 
```

我还尝试通过排除该行和调用来禁用延迟加载，`.Not.LazyLoad()`但是 end 是相同的。

```
 using (var tx = m_Repository.Session.BeginTransaction())
    {
        var depts = m_Repository.Session.CreateCriteria<Department>().List<Department>();
        var dept = depts[0];
        ...
    } 
```

我意识到公开会话不是要做的事情，但这是为了确保会话是打开的。

当我深入研究异常时，我看到以下堆栈跟踪：

```
 at NHibernate.Collection.AbstractPersistentCollection.Initialize(Boolean writing)
   at NHibernate.Collection.AbstractPersistentCollection.Read()
   at NHibernate.Collection.AbstractPersistentCollection.ReadSize()
   at NHibernate.Collection.PersistentBag.get_Count()
   at NHibernate.DebugHelpers.CollectionProxy`1.get_Items() 
```

* * *

The interesting gremlin comes here. I've set breakpoint on setter line of `PressJobRun` property.

*   if I step over it and quick watch `pressJobRunField`, I see the "*illegal access to loading exception*".
*   if I first quick watch `value` variable, I see the loaded collection. Stepping over setter line works as expected.

* * *

What I use

*   Visual Studio 2012, targeting .NET 4
*   NHibernate 3.3.1.400
*   SQL CE 4
*   Castle
*   Castle AutoTx facitlity
*   I manage session per WCF request myself

* * *

What I've tried

*   disabling lazy loading
*   made sure that session is open, and that it's same session during execution of offending code
*   toggled `Inverted` map of collection (thought I believe it should be inverted)
*   cleaned and rebuilt solution
*   made sure in Configuration Manager that all projects in solution are being built
*   set debugger to break on all thrown exceptions. Debugger doesn't break with exception that i see set in collection

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:00:19.030

Problem is that when `PressJobRub.Department` property is set, my code also adds the `PressJobRun` to appropriate collection in `Department`. I did initialize the collection, but problem was that the collection which NHibernate uses fails for some reason when calling `Contains()` method. I'm still in wonder about gremlin I described in the question, and why the debugger didn't break on exception when I unticked '*Enable just my code debugging*' and set it to break on *Thrown* exceptions too.

Anyhow, solution is to map `PressJobRun.Department` access to field (in my case to `Access.PascalCaseField(Prefix.mUnderscore)`) in order to avoid call that adds the entity to `Department.PressJobRun` collection.

[Krzysztof Kozmic's article](http://kozmic.pl/2009/05/13/two-way-one-to-many-associations-in-nhibernate/) explained this, although in my case collection wasn't uninitialized.

# django - django模板继承和assingment_tag

> ID：11757878
> 
> 赞同：1
> 
> 时间：2012-08-01T11:02:59.873
> 
> 标签：django, inheritance, block, extends

我想写一个分配标签并添加`app/templatetags/app_extras.py`

```
@register.assignment_tag
def get_obj (objid) :
    return get_object_or_404(MyModel, id=objid) 
```

并在模板中

```
{% extends "index.html" %}

{% load app_extras %}
{% get_obj 1 as obj %}

{% block title %}{{ obj.name }}{% endblock %}
{% block content %}{{ obj.description }}{% endblock %} 
```

变量`obj`在块中不可见。

如果我写

```
...
{% load app_extras %}

{% block title %}{% get_obj 1 as obj %}{{ obj.name }}{% endblock %}
... 
```

obj 在块中定义，但在“内容”块中未定义。

如何使变量在块中可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:40:59.103

这里有两个问题。首先 - 当您处于二级模板（“扩展”基本模板）中时，外部的内容`{% block %}`不会被处理。这就是为什么您在块中没有分配值的原因。它确实从未被分配过。

第二个问题是块中的上下文是特定的并且只能在块中访问，而不是在块之间。要使其在多个块中可用 - 您必须共享它。这是如何`context`使用的`assignment_tag`：

```
@register.assignment_tag(takes_context=True)
def get_obj (context, objid) :
    context.obj = get_object_or_404(MyModel, id=objid)
    return context.obj 
```

使用此标记，您可以在第一个块中分配变量：

```
{% block title %}{% get_obj 1 as obj %}{{ obj.name }}{% endblock %} 
```

然后在下一个块中从上下文中使用它：

```
{% block content %}{{ obj.name }}{% endblock %} 
```

*恕我直言，这不是最好的做事方式，尽管它有效。这里的问题是模板修改/覆盖了上下文，并且在某些情况下可能导致不良行为。*

# c++ - OpenGL 是非常特定于机器的

> ID：11757879
> 
> 赞同：7
> 
> 时间：2012-08-01T11:03:00.357
> 
> 标签：c++, opengl, render, sfml, glew

最近我开始在 C++ 中使用 OpenGL 进行一些 3D 渲染，但奇怪的是它似乎只在少数机器上工作。我正在使用 OpenGL 3.0 或更高版本（目前它设置为 3.0）使用顶点数组对象（不确定它是如何调用的，但 API 修订版删除了 glBegin、glEnd 等）。

在另一台机器上测试之前，我总是询问他们的 GPU 驱动程序，其中大多数支持 OpenGL 4.2，如果没有，我确保他们至少支持 3.0。然而在某些机器上，我的应用程序只是崩溃了，或者不渲染任何东西，OpenGL 不会抛出任何错误（我每帧至少检查一次错误）。不过，它在我自己的机器上运行得非常好，而且在某些情况下，我的机器甚至比一些它不工作的机器还要老。

我开始只使用 OpenGL 本身和 GLEW，但为了易于使用和其他一些我喜欢的功能切换到 SFML 和 GLEW，但 OpenGL 本身并没有改变它的行为。我确实重写了我正在开发的引擎，以封装所有 GL 调用并合并顶点数组对象和其他一些功能，事实上我可以给你一个应用程序使用的所有 API 调用的列表。显然它并没有在测试应用程序中使用所有这些，但这些都是我在引擎中使用的所有调用（这是能够渲染的最低限度，所以是的，引擎甚至还没有接近完成）：

*   glAttachShader
*   glBindAttribLocation
*   glBindBuffer
*   glBindVertexArray
*   glBufferData
*   glBufferSubData
*   gl清除
*   glClearColor
*   glClearDepth
*   glCompileShader
*   glCreate程序
*   glCreateShader
*   glCullFace
*   glDeleteBuffers
*   glDeleteProgram
*   glDeleteShader
*   glDeleteVertexArrays
*   glDepthFunc
*   glDepthMask
*   glDepthRange
*   glDisableVertexAttribArray
*   glDrawElements
*   gl启用
*   glEnableVertexAttribArray
*   glFrontFace
*   glGenBuffers
*   glGenVertexArrays
*   glGetAttribLocation
*   glGetBufferParameteriv
*   glGetBufferSubData
*   glGetError
*   glGetIntegerv
*   glGetProgramInfoLog
*   glGetProgramiv
*   glGetShaderInfoLog
*   glGetShaderiv
*   glGetShaderSource
*   glGetUniformLocation
*   glIs程序
*   glIsShader
*   glLink程序
*   glMapBufferRange
*   glPixelStorei
*   glShaderSource
*   glUniform(1i, 1ui, 1f, 2f, 3f, 4f, Matrix3fv, Matrix4fv)
*   glUnmapBuffer
*   glUseProgram
*   glVertexAttrib(1i, 1ui, 1f, 2f, 3f, 4f)
*   glVertexAttribPointer

总之，Shader 和 ShaderProgram 部分没什么特别的，我有一些方法来创建/编译它们，预先设置一些属性位置，最后设置属性/制服。缓冲区对象也没有什么特别之处，您可以写入、读取和映射缓冲区，目前我只使用 GL_ARRAY_BUFFER 和 GL_ELEMENT_ARRAY_BUFFER。最后我使用顶点数组对象来实际渲染对象，显然我设置了属性指针，并封装了绘图调用和程序使用，它总是使用索引绘图。

此外，我在谷歌和堆栈溢出本身上进行了广泛搜索以寻找答案。但是所有的问题都与 OpenGL 无法在任何地方工作有关，例如，一些 API 调用没有按顺序调用或根本没有调用。遗憾的是，这些答案都不适合我，它一直在我自己的机器和我可以直接访问的其他机器上工作，但是当我将应用程序发送给其他人在他们的机器上测试它时它从来没有工作过。

希望这足够具体 XD

**编辑，从下面的帖子中复制**

*每个测试都是在 windows vista 或 7 上完成的。我对每个 API 调用都进行了 OpenGL 错误检查，但似乎没有一个发现任何错误。我无法在我自己的机器上重现它，但在其他机器上进行更多跟踪后，我发现它在渲染之前不会崩溃。设置工作正常，它可以完美地创建所有缓冲区和对象，但是一旦我尝试渲染网格（VAO），它就会崩溃而没有任何错误（除了 .exe 已经停止工作）。我怀疑命令 glUseProgram 或 glDrawElements*

关于一个例子，除非你想搜索大约 10 个类，我不能给你一个**简短**的例子

**编辑，一小段代码渲染一个对象**

Mesh 类将这些结构添加到对象中，因此它知道要绘制什么：

```
// Define Geometry (draw command)
struct Geometry
{
    // Primitives
    PrimitiveType primitiveType;

    // Indices
    IndexType indexType;
    unsigned int count;  // elements
    unsigned int offset; // bytes
}; 
```

哦，顺便说一句，“几何标记”只是一个字符串，在该字符串下可以“放置”多个绘制调用，几个定义：

```
// Define a list of primitives
typedef std::vector<Geometry> GeometryList;

// Define Geometry ordered by tag
typedef std::map<const std::string, GeometryList> GeometryMap; 
```

对于每个“绘制”调用，它都会返回一个字符串，以便网格类可以绑定适当的材质。

```
//-----------------------------------------------------------------------
const std::string HardwareObject::nextGeometryTag()
{
    // Loop back
    GeometryMap::const_iterator end = _geometry.end();
    if(_activeGeometry == end)
    {
        // Bind and go to begin
        glBindVertexArray(_GL_VertexArray);
        _activeGeometry = _geometry.begin();
    }

    // Check if new tag exists
    else if(++_activeGeometry == end)
    {
        // Unbind and return empty tag
        glBindVertexArray(0);
        return "";
    }
    return _activeGeometry->first;
}

//-----------------------------------------------------------------------
bool HardwareObject::drawGeometryTag() const
{
    // Validate current tag
    if(_activeGeometry == _geometry.end()) return false;

    // Draw each geometry call of tag
    for(GeometryList::const_iterator it = _activeGeometry->second.begin(); it != _activeGeometry->second.end(); ++it)
        glDrawElements(it->primitiveType, it->count, it->indexType, (void*)it->offset);

    // GL Error
    return !Console::GET().getError("HardwareObject Drawing");
}

//-----------------------------------------------------------------------
void HardwareObject::resetGeometryTag()
{
    _activeGeometry = _geometry.end();
} 
```

**编辑，网格调用所有上述方法来实际渲染对象**

lockVertexAttributes() 只是确保所有属性指针都绑定到正确的顶点缓冲区。HardwareProgram 的 bind 方法只是检查程序是否编译并调用 glUseProgram

```
//-----------------------------------------------------------------------
bool Mesh::render()
{
    // Lock vertex attributes
    if(!lockVertexAttributes()) return false;

    // To avoid errors
    _object.resetGeometryTag();

    // Loop while there's a tag
    for(std::string tag = _object.nextGeometryTag(); tag != ""; tag = _object.nextGeometryTag())
    {
        // Find material
        MaterialMap::const_iterator it = _materials.find(tag);
        if(it == _materials.end()) continue;

        // Bind material (get program directly)
        const HardwareProgram *prog = it->second->getProgram();
        if(!prog) continue;
        if(!prog->bind()) continue;

        // Draw tag
        _object.drawGeometryTag();
    }

    // Ok!
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:57:24.177

我敢打赌，你是`GL_ELEMENT_ARRAY_BUFFER`通过你的 VAO 来绑定的。

过去（几年前）我在某些版本的 NVidia 驱动程序上遇到过这个问题（虽然我没有任何版本的记录），这纯粹是让应用程序崩溃。

我当时的解决方法是依靠 VAO 来设置`GL_ARRAY_BUFFER`绑定和顶点属性指针，但我明确地`GL_ELEMENT_ARRAY_BUFFER`在`glBindVertexArray`.

我想现在问题已经解决了，但是周围的一些老司机可能会出现这个问题。

你能看到有问题的平台配置模式吗？

# sql - 没有从 MSCRM 数据库的 Sql 中查看任何记录

> ID：11757883
> 
> 赞同：1
> 
> 时间：2012-08-01T11:03:06.627
> 
> 标签：sql, sql-server, sql-server-2008, dynamics-crm

我正在访问 MSCRM 数据库。我没有从 SQL 中的视图中获取任何记录。我从表中获取所有记录，但没有从视图中获取任何记录。如果我登录到服务器然后选择视图，那么它会显示所有数据，但如果我正在从另一台机器访问数据库，然后它没有显示任何记录。它没有给我任何错误，但根本没有从 View 中获取任何记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:43:53.017

用户需要被定义为 CRM 应用程序本身中的用户，具有读取您正在查询的实体类型的权限。CRM 的 SQL 视图考虑了当前登录的用户并最终加入到系统用户（也就是 CRM 中的用户记录）。

记录可见性由 CRM 角色驱动，并且取决于您的访问级别，记录的基础所有者。例如，如果您只能在“业务单位”级别看到“联系人”，而另一个业务单位的同事拥有“联系人 A”，您将看不到“联系人 A”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:18:37.937

尝试使用其他用户帐户访问数据库。可能是您的用户帐户没有任何数据访问权限。

# c# - 找不到线程抛出对象，但对象显然存在

> ID：11757885
> 
> 赞同：0
> 
> 时间：2012-08-01T11:03:11.650
> 
> 标签：c#, parallel-processing, nullreferenceexception

我在 C# VS11 Beta 中有一个应用程序。

下面的代码抛出`NullReferenceException`（注释行）

```
private void ParralelProcessor(Int32 threadNum)
{
    HashSet<Feature> Features = new HashSet<Feature>();
    HashSet<FeatureType> FeatureTypes = new  HashSet<FeatureType>();
    DataTable TopographicFeatures = new DataTable();
    DataTable TopographicFeatureObjects = new DataTable();
    DataTable CartographicText = new DataTable();
    DataTable CartographicSymbol = new DataTable();
    List<DataRow> FeaturesAsRows = new List<DataRow>();
    List<DataRow> FeatureObjectsAsRows = new List<DataRow>();
    List<DataRow> CartographicTextAsRows = new List<DataRow>();
    List<DataRow> CartographicSymbolAsRows = new List<DataRow>();
    Thread.Sleep(100);
    TopographicFeatures.Columns.Add("fid", typeof(System.Int64));
    TopographicFeatures.Columns.Add("FeatureId", typeof(System.Int16));
    TopographicFeatureObjects.Columns.Add("fid", typeof(System.Int64));
//BELOW
    TopographicFeatureObjects.Columns.Add("GeoCoordinates", typeof(SqlGeometry)); //THIS LINE
//ABOVE
    TopographicFeatureObjects.Columns.Add("TypeId", typeof(System.Int16));
    CartographicText.Columns.Add("fid", typeof(System.Int64));
    CartographicText.Columns.Add("textString", typeof(System.String));
    CartographicText.Columns.Add("anchorPosition", typeof(System.Int16));
    CartographicText.Columns.Add("font", typeof(System.Int16));
    CartographicText.Columns.Add("height", typeof(System.Decimal));
    CartographicText.Columns.Add("orientation", typeof(System.Decimal));
    CartographicSymbol.Columns.Add("fid", typeof(System.Int64));
    CartographicSymbol.Columns.Add("orientation", typeof(System.Decimal)); 
```

调试信息显示表不是`null`，列集合也不是。

它在`Parralel.For`循环中调用的方法中运行，如下所示

```
Parallel.For(1, ThreadsPerFile + 1, X => { ParralelProcessor(X); }); 
```

所有对象都在方法中声明和处理，因此每个线程都有自己的实例。

我对为什么这会引发异常感到有些困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:12:28.963

我对这种专栏没有太多经验，但也许这会有所帮助：

由于 SqlGeometry 不是 .NET 中的基本类型之一，因此请确保遵守[Microsoft](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.datatype%28v=vs.110%29.aspx)的以下引用：

> 尽管可以将列定义为基本 .NET Framework 数据类型和 Byte[] 以外的数据类型，但此类列将被视为用户定义的类型，受以下使用限制。（有关用户定义类型的更多信息，请参阅创建和使用用户定义类型。）
> 
> 该列不能是 RowFilter 或 Select 表达式的一部分。
> 
> 如果该列用作 PrimaryKey，或用作 Sort 或用于 DataView，则必须将其视为不可变字段；列数据一旦添加到表中就不得更改。
> 
> 它的 ColumnMapping 只能设置为 MappingType.Element。
> 
> 实现列数据类型的类必须用 SerializableAttribute 进行标记，如果需要，实现 ISerializable 或 IXmlSerializable 接口。
> 
> 对更改跟踪的支持是有限的。要利用 DataTable 类的更改跟踪机制，实现列数据类型的类必须实现 IChangeTracking 接口，或者通过在行上调用 SetModified 或通过将列值对象分配给单独实例化的列值对象。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:56:55.000

注释掉该行时代码是否运行良好？我有一种感觉，问题要么不在那条线上，要么是 SqlGeometry 把事情搞砸了。

# android - 该线程禁止 HTTP 请求

> ID：11757890
> 
> 赞同：1
> 
> 时间：2012-08-01T11:03:36.113
> 
> 标签：android, httpclient

在我的应用程序中，我正在尝试提出请求，但我收到了一个错误。这是我的代码和异常。我检查了我的代码，发现异常来自最终的 HttpResponse response = client.execute(request); 这条线。这里有什么问题。

```
public static String getResponse(final HttpUriRequest request, final int successCode, final boolean requiresResponse)  {
        final StringBuilder sb = new StringBuilder();

        final HttpClient client = getHttpClient();
        System.out.println("getResponce4");
        try {
            final HttpResponse response = client.execute(request);
            System.out.println("getResponce5");
            final HttpEntity entity = response.getEntity();
            System.out.println("getResponce6");

            if (entity != null) {
                final InputStream stream = entity.getContent();
                byte bytes[] = new byte[4096];
                int numBytes;
                while ((numBytes=stream.read(bytes))!=-1) {
                    if (numBytes!=0) {
                        sb.append(new String(bytes, 0, numBytes));
                    }
                }
            }

            if (response.getStatusLine().getStatusCode() != successCode) {
                closeConnection(client);
                throw new Exception(sb.toString());
            }
            System.out.println("getResponce1");
            closeConnection(client);
            System.out.println("getResponce2");
            if (!requiresResponse) return null;
            System.out.println("getResponce3");

        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        } catch (Exception e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        return sb.toString();
    }

    private static void closeConnection(final HttpClient client) {
        try {
            final Method closeMethod = client.getClass().getMethod("close");
            if (closeMethod != null) {
                closeMethod.invoke(client);
            }
        }
        catch (IllegalArgumentException ignored) {}
        catch (IllegalAccessException ignored) {}
        catch (InvocationTargetException ignored) {}
        catch (SecurityException ignored) {}
        catch (NoSuchMethodException ignored) {}
    }

    private static HttpClient getHttpClient() {
        Class<?> androidClientClass;
        try {
            androidClientClass = Class.forName("android.net.http.AndroidHttpClient");
            final Method method = androidClientClass.getMethod("newInstance", String.class);

            return (HttpClient) method.invoke(null, "newInstance");

        } catch (ClassNotFoundException ignored) {}
        catch (IllegalArgumentException ignored) {}
        catch (IllegalAccessException ignored) {}
        catch (InvocationTargetException ignored) {}
        catch (SecurityException ignored) {}
        catch (NoSuchMethodException ignored) {}

        return new DefaultHttpClient();
    }

    private static String notInitialized() {
        return "{ \"errorCode\" : 101 }";
    }

    public static String getAddress(final String key1, final String key2, final String lat, final String lng) throws Exception {

        final HttpGet get = new HttpGet("http://192.168.1.4:3000/api/1.0/zoappsgeo/address/lookup");

        return getResponse(get, 200, true);
    } 
```

例外

```
08-01 14:44:29.272: WARN/System.err(14718): java.lang.RuntimeException: This thread forbids HTTP requests
08-01 14:44:29.272: WARN/System.err(14718): at android.net.http.AndroidHttpClient$1.process(AndroidHttpClient.java:91)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:290)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:160)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:401)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-01 14:44:29.272: WARN/System.err(14718): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-01 14:44:29.272: WARN/System.err(14718): at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:243)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.VTGClient.getResponse(VTGClient.java:59)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.VTGClient.getAddress(VTGClient.java:139)
08-01 14:44:29.272: WARN/System.err(14718): at com.ZoApps.DataActivity$1.onClick(DataActivity.java:75)
08-01 14:44:29.272: WARN/System.err(14718): at android.view.View.performClick(View.java:2532)
08-01 14:44:29.272: WARN/System.err(14718): at android.view.View$PerformClick.run(View.java:9293)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Handler.handleCallback(Handler.java:587)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 14:44:29.272: WARN/System.err(14718): at android.os.Looper.loop(Looper.java:150)
08-01 14:44:29.282: WARN/System.err(14718): at android.app.ActivityThread.main(ActivityThread.java:4277)
08-01 14:44:29.282: WARN/System.err(14718): at java.lang.reflect.Method.invokeNative(Native Method)
08-01 14:44:29.282: WARN/System.err(14718): at java.lang.reflect.Method.invoke(Method.java:507)
08-01 14:44:29.282: WARN/System.err(14718): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 14:44:29.282: WARN/System.err(14718): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 14:44:29.282: WARN/System.err(14718): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T13:42:55.560

DefaultHttpClient（来自 org.apache.http.impl.client 包）自 Android API 级别 1 以来一直存在。AndroidHttpClient（来自 android.net.http.AndroidHttpClient 包）仅在 Android API 级别 8 之后才可用。

然而，最重要的是 AndroidHttpClient 不允许在主（通常是 GUI）应用程序线程中执行。

更多信息请访问[http://www.intertech.com/Blog/android-defaulthttpclientandroidhttpclient-and-httpparams/](http://www.intertech.com/Blog/android-defaulthttpclientandroidhttpclient-and-httpparams/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T21:32:29.753

问题是android不允许从ui线程发送请求：

AndroidHttpClient：

```
if (Looper.myLooper() != null && Looper.myLooper() == Looper.getMainLooper() ) {
         throw new RuntimeException("This thread forbids HTTP requests");
} 
```

您可以在请求之前使用 DefaultHttpClient 或 AsyncTask。

还要检查：http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/) lib。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:11:56.440

我也有这个问题。改变你的

```
androidClientClass = Class.forName("android.net.http.AndroidHttpClient"); 
```

进入

```
androidClientClass = Class.forName("android.net.http.DefaultHttpClient"); 
```

它已经完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:10:47.997

作为一种快速解决方案，将 AndroidHttpClient 替换为 DefaultHttpClient 类。虽然这不是一个好的解决方案，但应该可以。

# jquery - 在日期列表中查找最接近的给定日期

> ID：11757894
> 
> 赞同：0
> 
> 时间：2012-08-01T11:03:53.007
> 
> 标签：jquery, date, timeline

我正在使用 jQuery [scrollTo](http://demos.flesler.com/jquery/scrollTo/)插件创建一个可水平滚动的时间线。

我有一个日历作为选择日期的界面。选择日期后，我想滚动到时间线中最近的日期。

如何在时间线中找到与所选日期最接近的日期？用于计算的最佳日期格式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:05:56.100

Javascript 日期有一个[`valueOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/valueOf)函数，它返回表示为纪元的日期，或者简单地说是自 1970 年 1 月 1 日以来的毫秒数。

找到最接近一个数字的数字是微不足道的......这是一些基本的区别。

# javascript - 元素添加到 DOM 时触发事件：JQuery Livequery Equivalent in 1.7

> ID：11757901
> 
> 赞同：4
> 
> 时间：2012-08-01T11:04:37.080
> 
> 标签：javascript, jquery, livequery

我想在页面上出现特定元素时触发事件（我不控制源页面 - 这是一个 Chrome 扩展）

我已阅读有关[JQuery 1.7 的 on() 方法](http://api.jquery.com/on/)的文档。然而，这似乎是关于等待在选择器上触发特定事件 - 单击事件 - 而不是通常在添加与选择器匹配的元素时。

等效于现在未维护的 livequery 插件：

```
$('a').livequery(function () {
  console.log('yaay a link was added');
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:29:59.313

如果这是为 Chrome 18+ 设计的 chrome 扩展，那么您可以使用[DOM4 规范中称为 Mutation Observers](http://www.w3.org/TR/dom/#mutation-observers)的功能。这会分配一个回调，当 DOM 发生更改时会触发该回调，然后您可以使用它来做任何您想做的事情。它仍然很新，但这里有更多[信息](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)

该页面的代码示例：

```
var insertedNodes = [];
var observer = new WebKitMutationObserver(function(mutations) {
 mutations.forEach(function(mutation) {
   for (var i = 0; i < mutation.addedNodes.length; i++)
     insertedNodes.push(mutation.addedNodes[i]);
 })
});
observer.observe(document, { childList: true });
console.log(insertedNodes); 
```

**更新**：也刚刚注意到一个[基于此 API 的库](https://code.google.com/p/mutation-summary/)，它可能更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:30:07.297

## `.livequery()`工作原理

`.livequery()`有两个用途：

*   当您将事件类型作为第一个参数传递时，
*   当您将回调（函数）作为第一个参数传递时，

在第一种情况下，您完全可以将其替换为当前使用的`.on()`或已弃用`.delegate()`的`.live()`（如果您的 jQuery 版本早于 1.7）。

在第二种情况下，它看起来像是`.livequery()`覆盖标准的 DOM 修改 JS 方法，或者将自身“挂钩”到它们中。要模仿这种行为，您需要做一些类似的事情，或者只是重新设计您的脚本以避免该障碍。

如果您选择使用自己的实现，请确保您不会犯与`.live()`开发人员相同的错误：将选择器从 jQuery 参数移动到模块的函数参数中：`jQuery(selector).live(...)`-> `jQuery(...).on(..., selector, ...)`，因为不需要在您执行时执行准备你的脚本（它只在发生变化时执行）。

## 监听添加到 DOM 中的新元素

您很不走运，因为没有广泛采用的事件负责侦听插入到 DOM 中的新 DOM 元素。您可以使用的可能事件列表如下：

[https://developer.mozilla.org/en/DOM_Client_Object_Cross-Reference/DOM_Events](https://developer.mozilla.org/en/DOM_Client_Object_Cross-Reference/DOM_Events)

# cakephp - Cakephp 2.0 - 动态填充选择框？

> ID：11757911
> 
> 赞同：0
> 
> 时间：2012-08-01T11:05:08.983
> 
> 标签：cakephp, cakephp-2.0

我有一个模型：类别。任何类别都可能有子类别。该模型使用树行为（**Cakephp 2.0**）。我想创建一个带有两个选择框的表单。一个带有类别，另一个带有子类别。当我选择一个类别时，应根据我的选择动态填充包含子类别的框。例如，如果有体育、电影类别和子类别足球、篮球和喜剧、科幻，如果我在第一个框中选择电影，则第二个应该填充喜剧和科幻作为选项。环顾四周，我找到了解决方案，但它不起作用。

解决方案是表单中应该是一个脚本（Js），它观察第一个框的状态。当它发生变化时，它会从控制器调用一个函数，将结果呈现在一个元素中，该元素填充第二个框的选项。

所以我做了什么。

**模型**

```
<?php
class Category extends AppModel { 
var $name = 'Category';
var $actsAs = array('Tree'); 
} 
?> 
```

模型字段：id、parent_id、lft、rght、name

**控制器 - 方法**

```
function ajax_categories() {

$this->set('options',
    $this->Category->find('list',
        array(
            'conditions' => array(
                'Category.parent_id' => $_GET['data']['Category']['id']
            )
        )
    )
);

$this->render('/elements/ajax_dropdown', 'ajax');
} 
```

它应该找到表中以所选选项为父亲的所有记录（这意味着它会找到从第一个框中选择的类别的子类别）

**元素（ajax_dropdown）**

```
<?php foreach($options as $key => $val) { ?>
<option value="<?php echo $key; ?>"><?php echo $val; ?></option>
<?php } ?> 
```

**查看 - 表格**

```
<?php
$this->Html->script('prototype', array('inline' => false));
echo $this->Form->create('Category');

echo $this->Form>input('Category.id',array('id'=>'Category.id','label'=>'Parent',
'empty' => '-- Pick a category --' ,'options' => $cats));

 echo $this->Form->input('Subcategory',array('id' =>
'Subcategory','label'=>'Subcategory', 'empty' => '-- Pick a subcategory --' ));

 echo $this->Form->input('name',array('label'=>'Name'));

 echo $this->Form->end('Add');

 $this->Js->get('#Category.id')->event(
'change', $this->Js->request(
    array('controller'=>'categories','action'=>'ajax_categories'),
    array('update' => '#Subcategory', 'dataExpression' => true, 'data'
            => '$("#Category.id").serialize()')
)
);
?> 
```

其中*$cats*是一个包含类别的 var。

问题是什么都没有发生。当我选择一个类别时，第二个选择框是空的。我已经包含了 Js 助手和 RequestHandler，当然我加载了 jquery 脚本，输出缓冲区（nappo 提醒我）我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:33:56.253

我发现了错误。它需要一个**回声**

```
 echo $this->Js->get('#Category.id')->event(
'change', $this->Js->request(
 array('controller'=>'categories','action'=>'ajax_categories'),
 array('update' => '#Subcategory', 'dataExpression' => true, 'data'
        => '$("#Category.id").serialize()')
)
); 
```

# jquery - jQuery 脚本在 FF 中有效，但在 Chrome 中无效

> ID：11757923
> 
> 赞同：1
> 
> 时间：2012-08-01T11:06:00.120
> 
> 标签：jquery, ajax, firefox, google-chrome

我一直在使用您在此处找到的 fullBg 脚本：http: [//bavotasan.com/2011/full-sizebackground-image-jquery-plugin/](http://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/)

```
(function($) {
  $.fn.fullBg = function(){
    var bgImg = $(this);        

    function resizeImg() {
      var imgwidth = bgImg.width();
      var imgheight = bgImg.height();

      var winwidth = $(window).width();
      var winheight = $(window).height();

      var widthratio = winwidth / imgwidth;
      var heightratio = winheight / imgheight;

      var widthdiff = heightratio * imgwidth;
      var heightdiff = widthratio * imgheight;

      if(heightdiff>winheight) {
        bgImg.css({
          width: winwidth+'px',
          height: heightdiff+'px'
        });
      } else {
        bgImg.css({
          width: widthdiff+'px',
          height: winheight+'px'
        });     
      }
    } 
    resizeImg();
    $(window).resize(function() {
      resizeImg();
    }); 
  };
})(jQuery) 
```

它似乎在 FF 中工作得很好，但在 Chrome 中却不行。如果您只是快速查看一下脚本的使用有什么问题，我将不胜感激，因为我已经没有想法了......我正在使用 jquery-ujs rails 插件来处理 ajax 请求（https://github .com/rails/jquery-ujs/wiki/ajax)

```
(function() {

  $(window).load(function() {
    var Layout;
    $(function() {
      return $(".thumb_container").draggable({
        containment: 'document',
        scroll: false,
        zIndex: 5
      });
    });
    $('.background').fullBg();
    Layout = {
      config: {
        effectIn: 'fadeIn',
        effectOut: 'fadeOut',
        speed: 300
      },
      init: function() {
        $('.thumb').on('ajax:success', this.changeData);
        return $('.thumb').on('ajax:complete', this.changeBg);
      },
      changeData: function(event, data, status, xhr) {
        var config, effectIn, effectOut, imgPath, speed;
        config = Layout.config;
        effectIn = config.effectIn;
        effectOut = config.effectOut;
        speed = config.speed;
        imgPath = data.image_bg;
        $(".background")[effectOut](speed).detach();
        $("<img class='background'>").appendTo('#container').attr({
          src: imgPath,
          'data-id': artistId
        });
        return event.preventDefault();
      },
      changeBg: function(xhr, status) {
        return $('.background').fullBg();
      }
    };
    return Layout.init();
  });

}).call(this); 
```

我尝试使用 ajax:complete，没有它。它在任何情况下都可以在 FF 中使用，并且 img 标签具有“宽度”样式属性：

```
<img class="background" src="/media/BAhbBlsHOgZmSSIsMjAxMi8wNi8yMy8yMl8yOV8xN180NzhfXzY1XzU1XzIwMDIuanBnBjoGRVQ" data-id="1" style="width: 1246px; height: 1477px;"> 
```

，但在 Chrome 中它似乎是半生不熟的，例如。

```
<img class="background" src="/media/BAhbBlsHOgZmSSIsMjAxMi8wNi8yMy8yMl8yOV8xN180NzhfXzY1XzU1XzIwMDIuanBnBjoGRVQ" data-id="1" style="height: 399px; "> 
```

所以有“高度”样式属性，但没有“宽度”属性，一旦我调整了窗口大小，fullBg() 就完成了它的功能**。**我应该更正什么以使其在 FF 和 Chrome 中都能正常工作？

提前致谢！

**更新：**修正了左括号错字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:32:37.427

问题的解决方案是脚本需要等待调用 fullBg() 函数，直到图像完全加载

```
(function() {

  $(window).load(function() {
    var Layout;
    $(function() {
      return $(".thumb_container").draggable({
        containment: 'document',
        scroll: false,
        zIndex: 5
      });
    });
    $('.background').fullBg();
    Layout = {
      config: {
        effectIn: 'fadeIn',
        effectOut: 'fadeOut',
        speed: 300
      },
      init: function() {
        $('.thumb').on('ajax:success', this.changeData);
      },
      changeData: function(event, data, status, xhr) {
        var config, effectIn, effectOut, imgPath, speed;
        config = Layout.config;
        effectIn = config.effectIn;
        effectOut = config.effectOut;
        speed = config.speed;
        imgPath = data.image_bg;
        $(".background")[effectOut](speed).detach();
        $("<img class='background'>").appendTo('body').attr({
          src: imgPath,
          'data-id': artistId
        }).load( function() {
           $(this).fullBg();
        });
      }
    };
    return Layout.init();
  });

}).call(this); 
```

我认为 ajax:complete 是完全加载图像的状态（以及传递的其余数据）......不，不是

更新：示例扩展

# c# - 如何在运行时设置动态表达式名称（JSON Parser）

> ID：11757928
> 
> 赞同：0
> 
> 时间：2012-08-01T11:06:42.570
> 
> 标签：c#, json, dynamic, javascriptserializer

我正在构建一个 JSON 文件解析器。我目前使用 JavaScriptSerializer 类将 JSON 文件读入 DynamicJsonObject 看起来像

```
dynamic glossaryEntry 
```

然后我可以通过以下方式检索顶级 json 节点。用于检索这个名为 Scoring 的 JSON 组，看起来像

```
{
    "Scoring":
    [
        {
            "blah": "blah",
            "blah": "blah"      
        },
        {
            "blah": "blah",
            "blah": "blah"      
        }   
    ]
} 
```

我使用动态表达式：

```
return glossaryEntry.Scoring; 
```

或者例如我会使用

```
return glossaryEntry.quests; 
```

对于看起来像这样的 JSON：

```
{
    "quests":
    [
        ... 
    ]
} 
```

这是非常硬编码的，需要我提前知道可以解析的所有可能的标识符。我在想必须有一种方法可以让动态表达式评估为某些东西，以便可以在运行时确定词汇表条目。“this”部分？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:34:53.567

您可以将您的 json 字符串反序列化为`Dictionary<string,object>`

```
var glossaryEntry = new JavaScriptSerializer().Deserialize<Dictionary<string, object>>(json);
var keys = glossaryEntry.Keys.ToList();

var scoring1 = glossaryEntry["Scoring"];
//OR
var scoring2 = glossaryEntry[keys[0]]; 
```

# iphone - 获取项目 iPhone 中已保存视频文件的 UITableView 列表

> ID：11757931
> 
> 赞同：0
> 
> 时间：2012-08-01T11:06:56.703
> 
> 标签：iphone, objective-c, ios, xcode

在这里，我试图获取我保存在项目中的文件列表。

![文件列表](../Images/4dbff9e725a59cef6b2ae30d10030d6a.png)

正如您在屏幕截图中看到的那样，我有一些视频文件，我已将其复制到我的项目中。我想在表格视图中显示这些文件列表。而在 didselectRowMethod 中我想获取所选视频文件的路径，然后想用它来播放。

是否可以？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:19:32.240

当然，您可以像这样存档它：

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil]; 
```

现在`dirContents`将保存所有文件的路径。

如果你只想要电影，你可以这样做：

```
NSPredicate *f = [NSPredicate predicateWithFormat:@"self ENDSWITH '.mp4'"];
NSArray *videos = [dirContents filteredArrayUsingPredicate:f]; 
```

您的表视图数据源应指向`videos`或`dirContents` 在您的

```
-(void)tableView:(UITableView *)tableview didSelectRowAtIndexPath :(NSIndexPath *)indexPath {

NSString *bundlePath=[[NSBundle mainBundle] bundlePath];

NSString *pathToVideo=[bundlePath stringByAppendingPathComponent:[videos objectAtIndex:indexPath.row];      

} 
```

# javascript - 如何从 js 读取查询字符串

> ID：11757933
> 
> 赞同：1
> 
> 时间：2012-08-01T11:07:06.910
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

我需要一个函数来读取查询字符串值吗？

如果我给键，那么该方法应该返回相应的值。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:13:02.387

试试这个会有所帮助

```
function fnGetValueByKey(key)
{
  key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + key + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:09:47.003

我一直使用以下，它似乎工作

```
function urlParam(name){
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec (window.location.href);
    if (results == null)
        return "";
        else
        return results[1];  
} 
```

你只需要打电话`urlParam("yourName");`，它就会返回你的价值；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:11:47.707

y使用 getQuery('mykey') 访问所需的查询；

```
function getQuery( key) {
        var hu = window.location.search.substring(1), gy = hu.split("&"), val;
        keyValue = {};
        for ( var i = 0; i < gy.length; i++) {
            val = gy[i].split("=");
            keyValue[val[0]] = val[1];
        }
        return keyValue[key];
    } 
```

# git - 设置 Git 远程 SSH (git-upload-pack / git-receive-pack)

> ID：11757934
> 
> 赞同：4
> 
> 时间：2012-08-01T11:07:10.040
> 
> 标签：git, url, ssh, git-clone

我有一台具有 SSH 访问权限的服务器，我想在那里放置一个 Git 原始存储库。我刚刚在本地创建了一个 --bare --shared 存储库并将其复制到每个 SCP 的服务器上。现在我想根据 SSH url 克隆这个 repo。我试过

```
ssh://USERNAME@HOST/folder1/folder2/gifolder.git
ssh://USERNAME:PASSWORD@HOST/folder1/folder2/gifolder.git
ssh://USERNAME@HOST:PORT/folder1/folder2/gifolder.git
ssh://USERNAME@HOST:/folder1/folder2/gifolder.git 
```

以及以上的一些组合。但 Git 总是说

```
"fatal: The remote end hung up unexpectedly" 
```

尽管我可以使用 USERNAME 和 PASSWORD 将每个 SSH 连接到主机。

是否可以按照我想要的方式使用 git，还是我必须完全不同地设置它？

更新：

我将 Git 扩展配置为使用 OpenSSH 而不是 Putty，现在 OpenSSH 要求我在“克隆”后输入密码。当我输入正确的密码时，我收到以下错误：

```
bash: git-upload-pack: command not found 
```

（OpenSSH 似乎与服务器建立了连接，因为它希望我在输入其他内容时重新输入密码）所以。现在我需要解决这个新问题。首先：我无法在服务器上安装 git。是否可以在不安装 git 的情况下使“git-upload-pack”和“git-receive-pack”可用？

再次感谢

更新2 - 解决方案：

解决方案是将远程存储库目录集成为每个 SSH/SFTP 的本地目录。为此，我正在使用[http://www.expandrive.com/ 。](http://www.expandrive.com/)谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:19:21.013

在执行 ssh 时，您需要远程路径中的二进制文件**git-upload-pack**和**git-receive-pack 。**

如果没有像这样为存储库中的每个远程链接配置它们

```
git config remote.origin.uploadpack /somepath/git/git-upload-pack
git config remote.origin.receivepack /somepath/git/git-receive-pack 
```

其中**origin**是遥控器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:55:49.697

建立 ssh 连接时不需要输入密码：
如果您的公钥发布在 ~/.ssh/authorized_keys 上，这就足够了。

如果您的私钥受密码保护，您可能需要密码（在这种情况下，请参阅“ [ssh daemon asks for a password](http://sitaramc.github.com/gitolite/sts.html#stsapp1) ”，您可能需要密码`ssh-agent`）。

否则，请参阅“ [Unable to Git-push master to Github](https://stackoverflow.com/questions/922210/unable-to-git-push-master-to-github/922461#922461) ”了解更多 ssh 调试技巧，包括：

*   `ssh -vvvT ssh://USERNAME@HOST`（确保 HOME 已定义，尤其是在 Windows 上：请参阅“ [Heroku push master`ssh`问题](https://stackoverflow.com/questions/6018551/heroku-push-master-ssh-problem/6018945#6018945)”）
*   检查服务器上 sshd 的日志（例如 in `/var/log/secure`，但可能因操作系统而异）

* * *

Openssh 是一个更安全的选择（并与 mysysgit 一起打包），但它仍然需要您正确定义 %HOME%。

再次，`ssh -vvvT`将在这里提供帮助。

> 首先：我无法在服务器上安装 git。是否可以在不安装 git的情况下
> 使“ `git-upload-pack`”和“ ”可用？`git-receive-pack`

不，这是不可能的。

`git`必须安装，并且在`sshd`（`ssh`服务器上运行的守护程序）的路径中。

* * *

[OP andineupert](https://stackoverflow.com/users/720350/andineupert)在评论中总结道：

> 由于需要在服务器上安装 git（我不能），我不得不将远程 repo-dir 集成为每个 SSH/SFTP 的本地目录。
> 现在一切正常。

# search - sharepoint 2010 客户端对象搜索

> ID：11757935
> 
> 赞同：3
> 
> 时间：2012-08-01T11:07:11.003
> 
> 标签：search, sharepoint-2010, sharepoint-clientobject

我刚刚进入客户端对象，编写 Caml 查询以检索列表和项目，并在 asp.net MVC 环境中呈现输出，一切正常。这个想法是使用 MVC 作为表示层，使用 Sharepoint 作为存储库，出于各种业务原因（例如利用工作流、业务流程和有关 sharepoint 的所有优点）

我不确定的问题是提供“搜索”。有没有一种方法可以使用客户端对象来运行 Sharepoint Search，并检索结果（例如，作为项目列表？）

非常感谢任何帮助或经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:13:49.800

SharePoint 2010 客户端对象模型不包括用于搜索的 API。作为替代方案，您可以使用 Search Web Service。这里有一些资源：

[Windows SharePoint Services 查询 Web 服务](http://msdn.microsoft.com/en-us/library/ms470518%28v=office.12%29.aspx)

[使用 SharePoint Server 2007 中的搜索 Web 服务以编程方式创建搜索查询](http://msdn.microsoft.com/en-us/library/bb625950%28v=office.12%29.aspx)

[如何：使用 Web 服务查询搜索](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2008/07/17/how-to-query-search-using-the-web-service.aspx)

# web-services - 在 glassfish v3 上部署多个继承的 Web 服务时出错

> ID：11757936
> 
> 赞同：0
> 
> 时间：2012-08-01T11:07:14.410
> 
> 标签：web-services, java-ee-6, glassfish-3

我尝试在 glassfish v3 上部署几个 Web 服务。不幸的是，我在 8 次尝试中有 6 次尝试了一个错误，即捆绑包不包含 bean。

奇怪的是，当我尝试几次时它会起作用。

这是我的代码：

类 BaseWebServcie：

```
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.ejb.Stateless;
import javax.jws.WebService; 
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

@WebService
@Stateless
public class BaseWebService {

@PersistenceContext
EntityManager em; 

public long getResponse() {

            //using EntityManager
            ...
    return new Date().getTime();
}
} 
```

类：WebServiceProxy1

```
import javax.ejb.Stateless;
import javax.jws.WebService;

@WebService
@Stateless 
public class ConcreteWebService1 extends BaseConcreteWebService {
} 
```

我的项目包含其他几个 Web 服务。都从类 BaseWebService 继承一个 getResponse() 方法。但是，如果我尝试在 glassfish 上部署它，则会出现以下错误消息。

Schwerwiegend：引用错误：此捆绑包没有名称为 [BaseConcreteWebService] 的 bean Schwerwiegend：部署应用程序时出现异常 [ConcreteWebService] Schwerwiegend：引用错误：此捆绑包在 org.glassfish.apf.AnnotationInfo@6c7f1f 处没有名称为 [BaseConcreteWebService] 的 bean java.lang.IllegalStateException：引用错误：此包在 com.sun.enterprise.deployment.archivist.Archivist.readAnnotations(Archivist.java:487) 的 org.glassfish.apf.AnnotationInfo@6c7f1f 中没有名称为 [BaseConcreteWebService] 的 bean在 com.sun.enterprise.deployment.archivist.Archivist.readAnnotations(Archivist.java:429) 在 com.sun.enterprise.deployment.archivist.Archivist.readRestDeploymentDescriptors(Archivist.java:405) 在 com.sun.enterprise.deployment .archivist.Archivist.readDeploymentDescriptors(Archivist.java:380) 在 com.sun。Enterprise.deployment.archivist.Archivist.open(Archivist.java:243) 在 com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:252) 在 com.sun.enterprise.deployment.archivist.Archivist。 open(Archivist.java:213) at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:165) at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:185)在 org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:94) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:827) 在 com.sun.enterprise.v3 .server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:769) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368) 在 com.sun.enterprise.v3.server。ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375) at com.sun.enterprise.v3.server.ApplicationLoaderService.postConstruct(ApplicationLoaderService.java:219) at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:131)在 com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91) 在 com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82) 在 com.sun.hk2.component.SingletonInhabitant.get (SingletonInhabitant.java:67) 在 com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139) 在 com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78) 在 com.sun。 com.sun.enterprise.v3.server.AppServerStartup 上的 enterprise.v3.server.AppServerStartup.run(AppServerStartup.java:253)。doStart(AppServerStartup.java:145) 在 com.sun.enterprise.v3.server.AppServerStartup.start(AppServerStartup.java:136) 在 com.sun.enterprise.glassfish.bootstrap.GlassFishImpl.start(GlassFishImpl.java:79)在 com.sun.enterprise.glassfish.bootstrap.GlassFishDecorator.start(GlassFishDecorator.java:63) 在 com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishImpl.start(OSGiGlassFishImpl.java:69) 在 com.sun.enterprise .glassfish.bootstrap.GlassFishMain$Launcher.launch(GlassFishMain.java:117) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl .invoke(DelegatingMethodAccessorImpl.java:43) 在 com.sun.enterprise.glassfish.bootstrap 的 java.lang.reflect.Method.invoke(Method.java:601)。GlassFishMain.main(GlassFishMain.java:97) 在 com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)

有没有人知道如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T17:11:17.537

EJB 的部署顺序不是确定的，因为它基于循环 Java HashSet。因此，当加载子 EJB 时，GF 会尝试查找父 EJB，但如果尚未加载父 EJB，您将遇到“引用错误：”。我们的解决方法是使用 EJB 组合而不是继承。我们在 GF 3.1.1 中遇到了同样的问题。希望这个问题在新版本的 GF 中得到解决。

# php - php Mail() 和 Outlook

> ID：11757937
> 
> 赞同：6
> 
> 时间：2012-08-01T11:07:17.783
> 
> 标签：php, email, outlook

我有以下代码：

```
 $subject = "Test Email";
    $from = "noreply@bob.com";
    ini_set("sendmail_from", $from);
$message = "<html><body bgcolor=\"#DCEEFC\"> 
                Hello<br><br>
                This is a <b>test</b> email.
                <br><br><hr>
                <a href=\"\">Click Here</a>     
                <br><br><hr>
                <br><br>
                Thank you for your time,<br><br>
            </body></html>";

    $headers  = "MIME-Version: 1.0\r\n";
    $headers .= "Content-type: text/html\r\n"; 
    $headers .= "From: " . $from . "\r\n";
    mail($mail, $subject, $message, $headers); 
```

但是，当我向自己发送电子邮件时，我会在 Outlook 中看到所有代码。如果我将它发送给其他人，他们会看到 HTML。如果我将它发送到我的 hotmail，他们会看到 HTML。

这是我的 Outlook (2007) 的问题吗，如果是，是什么问题，或者我可以在电子邮件中做些什么来保证它正确显示吗？

请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T11:17:14.620

我发现了问题：

[对于 Godaddy 基于 Web 的邮件，HTML 电子邮件无法正确显示](https://stackoverflow.com/questions/7032621/html-email-not-displaying-correctly-for-godaddy-web-based-mail)

改变：

```
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html\r\n"; 
$headers .= "From: " . $from . "\r\n"; 
```

至：

```
$headers  = "MIME-Version: 1.0" . PHP_EOL;
$headers .= "Content-Type: text/html; charset=ISO-8859-1" . PHP_EOL;
$headers .= "From: Site<$from>" . PHP_EOL; 
```

感谢您的所有帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:16:13.397

尝试重新排序标题。我记得前段时间遇到过同样的问题，并且在我使用以下标题后它起作用了：

```
 $headers = "From: " .$from. "\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=iso-8859-1\r\n";
    $headers .= "Content-Transfer-Encoding: 8bit\r\n"; 
```

不过，我建议使用[现成的 php 邮件程序类](http://code.google.com/a/apache-extras.org/p/phpmailer/)- 它让生活变得更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:08:47.910

听起来您将 Outlook 设置为以纯文本形式显示消息，无论它们以何种格式发送。

进入您的 Outlook 首选项并更改它以查看它们到达的格式的消息。

# python - Python不是从对象列表中随机抽样

> ID：11757938
> 
> 赞同：4
> 
> 时间：2012-08-01T11:07:18.647
> 
> 标签：python, performance, algorithm

我有大约 20,000 个对象的字典键是对象的字符串表示形式，值是对象本身。每个对象都有属性`self.length`和`self.rate`。`self.rate`计算为`1.5E-8*self.length`。

我需要根据他们的费率从这个字典中选择一个预定数量的项目（在这个例子中我们会说 500 个）。具有较低比率的对象不太可能被选择，而具有较高比率的对象更有可能被选中。

我认为我可以做到这一点的方式非常缓慢。

在一段时间内，虽然所选对象的数量小于所需选择的数量，但我在0和dict和选择该元素的长度之间生成一个随机数。然后我生成另一个随机数，如果随机数小于`rate`列表中所选对象的随机数，则将其添加到所选对象中。起初这似乎很好，但现在我意识到它太慢了。有没有人有关于如何更快地做到这一点的建议？

一些代码：对象的类定义

```
from numpy import random
class object():
    def __init__(self, length):
        self.length  = length
        self.rate = (1.15E-8*self.length)

    def select(self):
        x = random.uniform(0,1)
        if(x<self.rate):
            return True
        else:
            return False 
```

以及完成其余工作的函数（在另一个模块中）：

```
def select_random(object_dict,maxselect):
    nselect = 0
    object_names = object_dict.keys()
    selected_objects = []
    while(nselect < maxselect):
        x = random.randint(0,len(object_dict))
        if(object_dict[object_names[x]].select()):
            nselect +=1
            selected_objects.append(object_names[x])
    return(selected_objects) 
```

我认为使它真正变慢的原因是每个对象被选择的概率是如此之小，以至于在选择一个对象之前需要进行多次迭代，更不用说 500 个或更多。

长度分布：

```
Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
     51     822    1311    1770    2112  103000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:20:06.957

尝试这个：

```
import numpy as np    # requires NumPy 1.7 (!)

def select_random(object_dict, n):
    keys = object_dict.keys()
    rate = np.array([x.rate for x in keys])
    prob = rate / rate.sum()
    return np.random.choice(keys, size=n, replace=True, p=prob) 
```

（[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html)）

PS，调用 class 是个坏主意`object`，因为这也是内置通用基类的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:28:18.000

通过递增地总结项目的权重，您可以通过在 [0, T) 中统一选择一个随机数来根据权重随机选择一个，其中 T 是所有权重的总和，并取第一个较大的项目总比（例如二进制印章）。如果您想要更大的样本，您可以重复此操作，或者像此代码一样对随机数进行排序并执行类似合并排序的步骤。复杂性是一样的，但我认为代码更简单一些，因为二进制印章总是容易出错。

```
import random

def accumulate_weights(weighted_items):
    T = 0.0
    for w, i in weighted_items:
        T += w
        yield (T, i)

def sample_weighted(weighted_items, n):
    cumulative = list(accumulate_weights(weighted_items))
    T = cumulative[-1][0]
    i = 0
    for sample in sorted(random.uniform(0, T) for _ in xrange(n)):
        while sample > cumulative[i][0]:
            i += 1
        yield cumulative[i][1]

r = list(sample_weighted([(1.0, 'a'), (2.0, 'b'), (5.0, 'c'), (1.0, 'd')], 10000))
print [(x, r.count(x)) for x in 'abcd'] 
```

如果不明显，您可以使用您的“费率”作为权重。当您有一个对象的比率为 0.15 和另一个对象的比率为 0.3 时，重要的是第二个对象的出现频率是第一个对象的两倍。这就是这段代码中权重的作用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:17:57.880

我不知道这种方法是否会更快，但它会更准确：

1.  做一个 cumsum`length`并将其保存到一个名为的列表中`cumsum`
2.  假设长度是整数（否则你将不得不标准化并选择一个介于 0 和 1 之间的数字）选择一个介于 0 和最后一个元素之间的随机数`cumsum`
3.  遍历 cumsum 并获取小于或等于您选择的数字的第一个元素的索引。
4.  转到步骤 2。选择另一个号码。

假设`lengths`现在是：`[1,4,2,10,5]`现在你随机选择一个介于和之间的数字 - 你会得到对我来说听起来更准确的元素。`cumsum``[1,5,7,17,22]``0``22``i``lengeths[i]/cumsum[-1]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:48:27.470

您的费率介于 5.865e-07 和 0.0011845 之间，并且您的统一随机选择介于 0 和 1 之间，我相信如果您能够根据 1311 的中位数选择 500 个对象，您将是幸运的。

你需要改变你的随机选择

```
x = random.uniform(0,1) 
```

成为

```
import random
x = random.triangular(51, 103000 , 1311 ) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-01T11:27:02.297

如果你需要足够多的对象，你可以这样编写 select 函数：

```
def select(self):
  x = randint(0,self.length)
  if x > self.legth - c:
   return False
  return True 
```

这样，概率将取决于常数 c 和长度（反映到速率）

# objective-c - 在 iOS 应用程序中执行 ODATA READ 查询

> ID：11757939
> 
> 赞同：0
> 
> 时间：2012-08-01T11:07:19.813
> 
> 标签：objective-c, ios, odata

我正在为需要来自 ODATA 服务的数据的 iPad 开发应用程序。该服务提供活动列表，每个活动都有详细信息。

首先，我获得了两个日期（date_from 和 date_to）之间所有活动的列表。这个列表有一个“id”、“description”、“date_from”和“date_to”。

代码：

```
WindowsCredential *cred = [[[WindowsCredential alloc] initWithUserName:@"user" password:@"password"]autorelease];

    PROXY001 *proxy = [[PROXY001 alloc] initWithUri:@"http://ip:8000/odata/PROXY001/" credential:cred];

    DataServiceQuery *query =[proxy v1collection];
    [query filter:@"owner eq 'OWNER' and date_from eq '20120101' and date_to eq '20121231'"];

    QueryOperationResponse *response = [query execute];

    NSMutableArray *activities = [[NSMutableArray alloc] init];

    activities =[[response getResult] retain];

    for (int i=0; i<activities.count; i++) {

        v1collection *c = [activities objectAtIndex:i];

        //etc...

    } 
```

但我需要了解每项活动的更多详细信息。要执行此操作，我有这个 uri：

```
http://ip:8000/odata/PROXY001/v1collection(binary'0050569C007D1ED1A8E615C3E1D843E1') 
```

binary'0050569C007D1ED1A8E615C3E1D843E1' 是一个活动的“id”。

问题是我不知道如何使用ObjectiveC。

对不起我的英语不好。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:43:25.333

我找到了解决方案。

```
NSString *stringToExecute = [NSString stringWithFormat:@"v1Collection(binary'%@')", guid];
QueryOperationResponse *response = [proxy execute:stringToExecute];
NSMutableArray *activitiesArray  = [response getResult];
Activities* activity = [activitiesArray objectAtIndex:0];
NSLog(@"Localization = %@", activity.getact_location); 
```

# hash - 限制冲突的最小可能散列

> ID：11757942
> 
> 赞同：2
> 
> 时间：2012-08-01T11:07:39.563
> 
> 标签：hash, collision

我们有几个 1 到 500 个元素的集合。平均集合大小为 17。我们希望对所有元素进行哈希处理，以确保新元素还不是集合的一部分，并且我们正在寻找可能的最小哈希字符串。我们目前`sha1`对集合中的每个项目使用一个唯一元素，但我们想减小它的大小。

我们可以使用哪些方法来缩短我们必须存储的字符串：获取字符串中的第 X 个元素？X最后？

只取 sha1 字符串的一小部分是否安全？如果是这样，那么 X 字符和 500 个元素的冲突概率是多少？（X 等于 3,4,5 或更多？）

# vmware - VMWARE 无法从桌面打开终端

> ID：11757943
> 
> 赞同：0
> 
> 时间：2012-08-01T11:07:50.903
> 
> 标签：vmware, vmware-workstation

我刚刚在我的 Windows 桌面上安装了 VMWARE 和 RHEL 5.4。我不知道如何开始 - 关闭它，但我通过单击与 VMWARE 窗口关联的关闭按钮来做同样的事情。它声明一条确认消息以暂停我说“是”的虚拟机。

下次当我通过单击 VM 图标并选择“播放虚拟机”来启动 VMWARE 时，它会打开 VM 窗口。现在我尝试从桌面快捷菜单选项打开一个终端窗口 - 鼠标光标显示正在加载某些内容，但之后一切都保持原样。终端永远不会打开。鼠标指针返回正常箭头。

我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:47:08.917

You just suspended a VM. If you want to shutdown it - go to the VM menu and select "shutdown VM". There another menu item - "Power Off" if you select it and your RHEL VM have VMware Tools installed that the VM has a signal to power off gracefully (instead of simply switching off, which like to remove power coord).

# php - Twitter api 每小时只允许 150 次 json 调用，并且 twitter 会丢弃不需要的 cookie。我该如何防止这种情况？

> ID：11757945
> 
> 赞同：0
> 
> 时间：2012-08-01T11:08:06.533
> 
> 标签：php, jquery, json, caching

我的网站上有一个 twitter 提要，它由 jquery 推文插件 tweet.seaofclouds.com 和其他一些从 3rd 方网站获取 json 提要的 json 插件提供支持。

问题是 twitter api 每小时只允许 150 个调用，因此每小时有 40 个访问者，平均每个访问者有 5 个页面浏览量，我远远超过了这个最大值。特别是因为 twitter 禁用了对提要的缓存。

此外，还有饼干法则问题。Twitter 在请求提要时丢弃 cookie，我不想要它们，因为它们需要有被丢弃的权限，所以我想一直禁用它们。

此外，我的网站是 SSL 安全的，我想加载尽可能少的外部资源，我希望它全部本地化。

如何在本地缓存这些 json 提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:08:06.533

对于这个问题，我编写了自己的数据库存储机制来存储 json 提要并在需要时获取它们并返回它们。这样我只需要每 5 分钟获取一次，而我获得的访问者/网页浏览量是无关紧要的。

这是mysql中的数据库创建代码

```
CREATE TABLE IF NOT EXISTS `twitterbackup` (
  `url` text NOT NULL,
  `tijd` int(11) NOT NULL,
  `inhoud` text NOT NULL,
  FULLTEXT KEY `url` (`url`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

然后在 PHP 中，我有一些安全检查的代码，因为你永远不知道你会得到什么

```
<?php
/* JSON Backup script written by Michael Dibbets
 * Copyright 2012 by Michael Dibbets
 * http://www.facebook.com/michael.dibbets - mdibbets[at]outlook.com
 * Licenced under the MIT license http://opensource.org/licenses/MIT
 */
// Basic sql injection protection.
// Using explode because str_replace fails to many times when certain character combinations exist. 
// Replace, remove as you see fit. This setup works for my server, and str_replace works on another. 
// Use whatever has your fancy
function protect($s)
    {
    $s = mysql_real_escape_string($s);
    $s = implode(" ",explode(";",$s));
    $s = implode(" ",explode("UNION",$s));
    $s = implode(" ",explode("BENCHMARK",$s));
    $s = implode(" ",explode("WAITFOR DELAY",$s));
    $s = implode(" ",explode("LOAD_FILE",$s));
    $s = implode(" ",explode("OUTFILE",$s));
    $s = implode(" ",explode("INFORMATION_SCHEMA",$s));
    $s = implode(" ",explode("Char(",$s));
    $s = implode(" ",explode("CAST(",$s));
    return $s;
    }
function get_data($url)
    {
    // Initialise data to have at least something to work with
    $data = "";
        // What time is it?
        $now = strtotime("now");
        // Connect to our database
        $db = mysqli_connect("localhost", "USERNAME", "PASSWORD", "DATABASE");
        if (mysqli_connect_errno($mysqli)) 
            {
            die("ARGH!");
            }
        // Basic protection agains sql injection by banning unsafe words
        $saveurl = protect($url);
        // Count how many times the url has been found.
        $count = $db->query("SELECT count(*) as counter FROM twitterbackup WHERE `url`='$saveurl'")->fetch_assoc();
        // Has the url been found?
        if($count['counter'] == 0)
            {
            // Fetch twitter json 
            $ch = curl_init();
            $timeout = 5;
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($ch,CURLOPT_URL,$url);
            curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
            curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
            $data = curl_exec($ch);
            curl_close($ch);
            // make the json data database safe
            $data = str_replace('\\','\\\\',$data);
            $data = mysql_real_escape_string($data);
            //$data = mysql_real_escape_string($data);
            // Enter json data in the database
            $db->query("INSERT INTO `DATABASE`.`twitterbackup` (`url`, `tijd`, `inhoud`) VALUES ('$saveurl', '$now', '$data')");
            // End of we have not found the url
            }
        // If the URL has been found
        else
            {
            // get the values in the database that are connected to the url
            $res = $db->query("SELECT * FROM twitterbackup WHERE `url`='$saveurl'")->fetch_assoc();
            // Is the current json in database younger than five minutes?
            if((int)$res['tijd'] < (int)strtotime("-5 minutes"))
                {
                // Fetch twitter json with curl
                $ch = curl_init();
                $timeout = 5;
                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
                curl_setopt($ch,CURLOPT_URL,$url);
                curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
                curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
                $data = curl_exec($ch);
                curl_close($ch);
                // Make the json data safe for the database
                $data = str_replace('\\','\\\\',$data);
                $data = mysql_real_escape_string($data);
                // Update the database with the most recent feed
                $db->query("UPDATE  `DATABASE`.`twitterbackup` SET 
                            `tijd` =  '$now',
                            `inhoud` =  '$data' 
                            WHERE  `twitterbackup`.`url` =  '$saveurl'");
                // End if the url has been found and lifetime is older than five minutes
                }
            // If the lifetime isn't older then 5 minutes
            else
                {
                // return database content
                $data = $res['inhoud'];
                }
            // end of if we have found the url
            }
          // try to beat mysql_real_escape_string to return valid json. Always check valid json returend and edit this if it fails at some piece. Try http://jsonlint.com/
          $data = str_replace('\\"','"',$data);
          // implode because str_replace won't do everthing for some reason I can't understand.
          $data = implode('\\',explode('\\\\',$data));
          // Data retourneren
          return $data;
        // end check if it's from the twitter api
        }
// End of function get_data();
// How long may the json be cached by browser(to stop unneccesary requests in this case 5 minutes)
$seconds_to_cache = 5*60;
$ts = gmdate("D, d M Y H:i:s", time() + $seconds_to_cache) . " GMT";
header("Expires: $ts");
header("Pragma: cache");
header("Cache-Control: max-age=$seconds_to_cache");
header('Content-type: application/json');
echo get_data($_GET['url']);
?> 
```

然后在 twitter.js 中，您只需替换 getJSON url 以指向您的本地服务器，如下所示（在 jquery.tweet.js 底部的某处，您会找到这一行）

寻找：`$.getJSON(build_api_url()).success(function(data){`

代替：

```
// For debug purposes
// console.log("/scripts/twitter/tweet/curlthispage.php?url="+encodeURIComponent(build_api_url()));
        $.getJSON("/scripts/twitter/tweet/curlthispage.php?url="+encodeURIComponent(build_api_url())).success(function(data){ 
```

# java - 方法终止时是否需要关闭连接和语句？

> ID：11757948
> 
> 赞同：1
> 
> 时间：2012-08-01T11:08:27.533
> 
> 标签：java, jdbc

在 JDBC literatur 我经常遇到像这样的片段

```
void databaseCall() {
    Connection con = null;
    Statement statement = null        
    try {      
          con = getConnection(...);    
          statement = con.createStatement(...);        
          // do some query
    } catch (SQLException e) {
         // bla bla
    } finally {
         try {con.close();} catch (Exception e1) {}
         try {statement.close();} catch (Exception e1) {}
    }
} 
```

我知道明确地关闭连接和语句是最佳实践，但是，在这种情况下，显然资源`con`和`statement`方法完成时将被关闭，即当`try`块完成时。块中的`close`语句`finally`真的有必要吗？即使我们没有显式释放资源，当方法完成时它们不会以任何方式关闭吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:24:40.533

不，他们不会被关闭。

如果`getConnection()`创建一个新的连接，那么在方法结束时唯一会发生的事情是连接可能会被垃圾收集。但是 GC 不会为您调用 close() 方法。而且，无论如何，您希望尽快关闭。

大多数时候，`getConnection()`只会从连接池中获得一个连接，这些连接会保持打开很长时间。如果您没有`close()`连接，它将不会被放回可用连接池中，并且在几秒钟或几分钟后，您将不再有任何可用连接。

标题询问关于`System.exit()`，但问题正文没有。如果您调用`System.exit()`，则连接将最终关闭，因为数据库会注意到通信中断。但程序启动、执行查询和退出的情况极为罕见。大多数应用程序启动并保持运行数天甚至数月。因此，您真的想在使用完毕后释放连接。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-18T09:48:53.077

假设您为 ekart 应用程序带来了 20 个连接。这意味着连接池只有 20 个连接。如果您向服务器发送请求，池为每个请求提供一个连接。如果您不关闭连接，则在第 20 个请求后您会收到“OutOfConnectionError”，即使您无法处理此错误并且您无法发送请求，因为没有连接。如果您关闭连接，那么只有您可以发送新请求......

# c - argv[1][0] 是什么意思？

> ID：11757951
> 
> 赞同：2
> 
> 时间：2012-08-01T11:08:44.603
> 
> 标签：c

我正在阅读`mcachefs`一些代码，但无法理解一些代码，如下所示：

```
printf("mcachefs " __MCACHEFS_VERSION__ " starting up...\n");

if (argc == 1 || argv[1][0] == '-')
{
    fprintf(stderr,
        "\tError : first argument shall be the the mcachefs_mountpoint !\n");
    exit(2);
} 
```

我有两个问题：1：对于`printf("mcachefs " __MCACHEFS_VERSION__ " starting up...\n")`，它是正确的使用方式`printf`吗？我从未见过这样的使用方式。

1.  是什么意思`argv[1][0]`？我知道`argv[]`代表来自命令行的参数。但是，它不是**一维**数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:11:40.480

对于第一个问题，很可能`__MCACHEFS_VERSION__`是字符串文字的宏。在 C 中，如果它们之间没有任何内容，则将字符串文字连接起来。

对于第二个问题，`argv[1][0]`是指传递给函数的第一个参数的第一个字符（例如，如果您键入命令`myprogram -la`，则`myprogram`可以从 argv[0] 访问，并且`-la`将在 中`argv[1]`）。`argv[0]`是可执行文件的名称，因此可执行文件的参数将来自索引 1。

因此，代码检查是否`argc == 1`表示没有传入参数，或者`argv[1][0] == '-'`表示第一个参数类似于标志，并返回错误。这里的逻辑是：我们先检查参数个数，如果参数个数不是1（逻辑运算符的短路效应），那么我们检查第一个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:13:54.340

1.  当 C 编译器看到很多字符串文字彼此相邻时，它会将它们连接成一个长字符串。因此，`printf()`只要将宏`__MCACHEFS_VERSION__`扩展为字符串，就可以使用 of。该字符串最好不包含任何百分比字符...我将其写为

    `printf("mcachefs %s starting up...\n", __MCACHEFS_VERSION__);`

2.  正如其他人所指出的，`argv[1]`是字符串数组中的第二个字符串`argv`，字符串是字符数组，`argv[1][0]`第二个字符串中的第一个字符也是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:10:43.900

表示第二个字符串的第一个字符`argv`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T11:10:54.603

这将确定第一个参数的第一个字符是否为破折号。

因此对于

```
command -firstparam 
```

(argc == 1 || argv[1][0] == '-') 将评估为真。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T11:14:38.857

`argv[1][0]`指第二个字符串的第一个字符。

表达方式

`if (argc == 1 || argv[1][0])`

依赖于语言短路评估来保护数组取消引用。换句话说，如果测试`argc == 1`失败，则`argv[1][0]`不会评估后续表达式。如果是这样，那么取消引用可能会导致段错误。

printf 中的表达式依赖于 C 语言对字符串文字连接的支持。宏`__MCACHEFS_VERSION__`将在某处被#defined 为字符串文字。它允许您跨新行拆分字符串，或在宏中使用它们，如示例中所示。有关字符串文字连接的更多示例，请参见此处：[http ://en.wikipedia.org/wiki/C_syntax#String_literal_concatenation](http://en.wikipedia.org/wiki/C_syntax#String_literal_concatenation)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T11:19:06.233

1.  `__MCACHEFS_VERSION__`是字符串文字的宏，例如`"1.0"`. 当多个字符串文字相邻放置时，它们会被连接：在这种情况下`"Version:" __MCACHEFS_VERSION__ "..."`会变成。`"Version: 1.0..."`

2.  `argv[1][0]`指第二个元素的第一个元素。它相当于：

    `const char* firstArg = argv[1];`

    `char firstCharOfFirstArg = firstArg[0];`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-01T11:32:59.733

argv 是一维数组。它的元素是字符指针。所以 argv[i] 给出了一个指向内存中 char 的指针。argv 中的值指向程序名称的第一个字符（以 ac null 结尾的“字符串”）以及传递给程序的任何附加参数。

argv[0] -------> my_program
argv[1] -------> -some_arg

要获取 argv 元素指向的字符，您可以使用取消引用运算符：

*argv[1]

或者，C 还允许数组语法取消引用指针：
argv[1][0] /* 取消引用存储在 argv[1] 中的指针 */

如果字符指针在 argv 数组之外使用可能会更清楚：

```
char *arg1 = argv[1]

printf("first char of the first arg is %c\n",*arg1);  /* dereference char pointer */
printf("another way to access first char of %c\n",arg1[0]); /* dereference char pointer */ 
```

# html - 不同屏幕中的html“left”属性

> ID：11757954
> 
> 赞同：0
> 
> 时间：2012-08-01T11:08:52.053
> 
> 标签：html, css

我想制作 facebook 通知列表（“见下图”）或 stackoverflow 通知

![在此处输入图像描述](../Images/4b3ae8501f993672c612438170252234.png)")

**但是当我更改css中的*左侧*值时，它会在不同的屏幕（宽屏或正常）中更改**

怎么办，请检查下面的代码

html代码是

```
<div style="float:right;text-align:right;margin-right:10px;width: 113px;">
    <a  class ="notifications" >
        Press here
    </a>
</div>

<div id="notificationRegionWrapper" style="margin-left: 0px;  left: 0px;">
    <div id="notificationRegion" class=""><div id="notificationDropHeader">
            <div id="notificationDropHeaderText" style="padding-top: 6px;">
                Notification List 
            </div>
        </div>
        <div class="notification_item" style="opacity: 1;">
            <div class="notification_item_desc">
                <p class="notification_item_title">
                    Test One
                </p>
            </div>
        </div>
    </div>
 </div> 
```

css 在这里

```
#notificationRegionWrapper{
    background: none repeat scroll 0 0 white;
    box-shadow: 0 0 12px #888888;
    display: none;
    margin-left: 223px;
    max-height: 70%;
    overflow-x: hidden;
    overflow-y: auto;
    position: absolute;
    top: 137px;
    width: 360px;
    z-index: 10;
     }

     #notificationRegion #notificationDropHeader {
    background-color: white;                    
    border-bottom: 1px solid #C5C5C5;
    height: 30px;
    width: 100%;
}
#notificationRegion .notification_item {
    background: -moz-linear-gradient(center top , #F9F9F9, #EBEDEE) repeat scroll 0 0 transparent;
    border-bottom: 1px solid #C5C5C5;
    border-top: 1px solid white;
    cursor: pointer;
    display: table;
    min-height: 70px;
    padding-bottom: 10px;
    width: 100%;
}
#notificationRegion .notification_item .notification_item_pic {

    float: right;
    height: 51px;
    margin: 12px;
    width: 51px;
}
#notificationRegion .notification_item .notification_item_desc {
    float: left;
    margin: 10px 0 0 1px;
    width: 77%;
}
#notificationRegion .notification_item .notification_photo {
    border-radius: 15px 15px 15px 15px;
    height: 51px;
    width: 51px;
}
#notificationRegion .notification_item .notification_item_desc .notification_item_time {
    color: #777777;
    font-size: 10px;
    float: right;
} 
```

***jQuery在这里：***

```
$(document).on('click',".notifications",function(){
     $("#notificationRegionWrapper").show();
    });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:20:50.970

解决此问题的最简单方法是放入`<div id="notificationRegionWrapper">...</div>`包含打开下拉列表的链接的 div 中。

然后不要使用绝对定位，而是`#notificationRegionWrapper`使用相对定位。这样，下拉菜单将始终相对于链接定位，并且在所有屏幕尺寸上都相同。

例如：http: [//jsfiddle.net/Eeqrm/](http://jsfiddle.net/Eeqrm/)

请注意，您还需要给父 div `position:relative;`。

# java - 在java中生成图像

> ID：11757957
> 
> 赞同：0
> 
> 时间：2012-08-01T11:09:00.107
> 
> 标签：java, image, jframe

对于我的问题的背景，我正在使用有限元软件 COMSOL，您无需打开软件即可使用 java 运行该软件。因此，我试图将它与另一个用 java 编写的软件结合起来并在 Eclipse 中运行。我的问题是让 COMSOL 生成一个图像文件，比如在我的 2D 模拟桌面上。用于导出 *.txt 文件的代码几乎相同并且有效，但它不适用于图像，我想看看是否有人可以帮助我考虑在哪里寻找以弄清楚如何完成此操作。

我附上了##代码片段，我认为这些片段足以解释我正在尝试做的事情，而不会让你们所有人陷入困境。

```
import com.comsol.model.*;
import com.comsol.model.util.*;

/** Model exported on Jul 24 2012, 13:33 by COMSOL 4.2.1.110\. */
public class COMSOL_Model {

  public static Model run() {
    Model model = ModelUtil.create("Model");

    //code to set up and solve the model
    // and then at the end, you tell COMSOL what to export...

        //this code works...
        model.result("pg1").feature("glob1").set("data", "dset"+i);
    model.result().export("plot1").set("filename",  C:\\Users\\Alex\\Desktop\\temp_data_"+i+".txt");
    model.result().export("plot1").run();

       //this code does NOT work
    model.result("pg2").feature("surf1").set("data", "dset"+i);
    model.result("pg2").set("window", "window"+i);
    model.result("pg2").run();
    model.result().export().create("img"+i, "Image2D");
    model.result("pg2").set("window", "graphics");
    model.result("pg2").set("windowtitle", "");
    model.result().export("img"+i)
         .set("pngfilename", "C:\\Users\\Alex\\Desktop\\surface.png");
    model.result().export("img1").run(); 
```

所以我的第一个问题是，有人可以从理论上或用代码解释为什么这不起作用吗？我猜是因为我需要一个像“ImageIO.write”这样的特殊方法。任何提示或想法将不胜感激。

我尝试通过 COMSOL 提供的代码来解决这个问题，以创建一个显示模拟进度的 GUI，然后在 GUI 上打印例如 2D/3D 图像。我在一个大的“for”循环中使用了它，其中java为每次迭代创建了一个GUI和一个新图。问题是，我可以让java复制框架和进度条以及GUI的所有内容，除了打印在上面的图片，我想看看是否有人有任何建议。我的一个想法是让java截取屏幕截图，然后裁剪图像。有什么想法吗？

以下是我认为必要的带有注释的大部分代码：

```
import com.comsol.model.*;
import com.comsol.model.util.*;
import com.comsol.modelguiswing.SwingGraphicsPanel;
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Transparency;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.*;

public class reuse_solver {

//paste this into configurations
//C:\Program Files\COMSOL\COMSOL42a\lib\win64

private Model model;

public static void main(String[] args) {
    reuse_solver recycler= new reuse_solver();
    recycler.init();
    recycler.looper();
}

public void looper() {
    model = original.run();
    for (int iSimul = 1; iSimul<5; iSimul++){
            start(iSimul);
        }
    }

   //this is the code to have eclipse run comsol    
private void init() {
    ModelUtil.initStandalone(true);     
}

private void start(int iSimul) {

    if (iSimul==1){     
        Progress(iSimul);
        synchronized(model){
            try {
                model.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            }
    }else{
        Studier(iSimul);
        Progress(iSimul);
        synchronized(model){
            try {
                model.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            }
        }
}

/this creates the GUI and then runs COMSOL, showing the progress
private void Progress(int i){
    final String sol = "sol"+i;
    final int k = i;
    lookandfeel();
    final JFrame frame = new JFrame("This is an example GUI for Frying");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1000, 730);
    final JPanel mainPanel = new JPanel();
    frame.getContentPane().add(mainPanel);
    mainPanel.setLayout(new BorderLayout());
    final SwingGraphicsPanel graphicsPanel = new SwingGraphicsPanel("window"+i, "Window"+i);
    mainPanel.add(graphicsPanel, BorderLayout.CENTER);
    SwingProgressPanel progressPanel =new SwingProgressPanel();
    mainPanel.add(progressPanel, BorderLayout.PAGE_END);
    progressPanel.updateProgressLog("Starting\n"+i+"\n");
    ProgressWorker.setContext(new SwingDemoProgressContext(progressPanel)); 
    final int pWidth = frame.getWidth();
    final int pHeight = frame.getHeight();
    frame.setVisible(true);

    ProgressWorker.run(new Runnable() {
        public void run() {
            model.sol(sol).feature().create("t1","PlotWhileSolving");
            model.sol(sol).runAll();

            exporter(k, pHeight, pWidth, frame);    

        }

    });

}

//code to help COMSOL run in a loop
private void Studier(int i) {
    //COMSOL code goes here     
}

private void exporter(int i, int pHeight, int pWidth, JFrame frame) {

            //this code will tell java to put the image in the GUI window once the simulation is done

            model.result("pg2").feature("surf1").set("data", "dset"+i);
    model.result("pg2").set("window", "window"+i);
    model.result("pg2").run();

    // this will generate an image on my desktop, but it will not put the image that was put in the GUI

    BufferedImage bi = new BufferedImage(pWidth,pHeight, BufferedImage.TYPE_INT_RGB); 
    Graphics g = bi.createGraphics();
    frame.paint(g);  //this == JComponent
    g.dispose();
    try{ImageIO.write(bi,"png",new File("C:\\Users\\Alex\\Desktop\\surf_"+i+".png"));}catch (Exception e) {}

    synchronized(model){
        model.notify();
    }
}   

private void lookandfeel() {
    try {
    UIManager.setLookAndFeel(
    UIManager.getSystemLookAndFeelClassName());
    }
    catch (Exception e) {
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:57:31.557

请参阅[ComponentImageCapture.java](https://stackoverflow.com/questions/5853879/java-swing-obtain-image-of-jframe/5853992#5853992)以捕获 Swing 组件的图像。该代码显然存在与 AWT 组件有关的问题。

在这种情况下，使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29)捕获图像，但仅捕获组件的区域，而不是整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T21:16:45.860

COMSOL 使用图形窗口创建要导出的图像。当 COMSOL 在独立模式下启动时，图形引擎不会以允许导出的方式加载。但是，在从 Java 运行 COMSOL 时，可以通过使用客户端服务器模型而不是使用独立版本并在服务器实例上启用图形来解决此问题。

下面是一些我用来从 COMSOL 桌面运行或直接调用 java 的代码。

```
public static void main(String[] args) throws IOException {
    String tag1 = System.getProperty("cs.currentmodel");
    if (tag1 == null) {
        // ModelUtil.initStandalone(true);
        ModelUtil.connect();
        ModelUtil.showProgress(false);
        model = ModelUtil.load("ModelTag", args[0]);
        run();
        ModelUtil.clear();
        ModelUtil.disconnect();
        System.exit(0);
    }
    else {
        model = ModelUtil.model(tag1);
        run();
    }
} 
```

然后您可以使用图形选项启动 COMSOL 服务器：

```
comsolserver -graphics 
```

这将允许您的导出工作。我确信有一种方法可以在 java 中启动 COMSOL 服务器实例，但我不必为我的项目这样做。

# php - 如何使用php取消设置mongodb中的所有记录字符串？

> ID：11757959
> 
> 赞同：3
> 
> 时间：2012-08-01T11:09:05.720
> 
> 标签：php, mongodb

我的数据库记录了这样的事情......

```
{
   "_id": ObjectId("50118b145e69ef2c0e007a2"),
   "class": "customer",
   "dbid": "1829",
   "value": "aaa@hotmail.com" 
}

{
   "_id": ObjectId("50118b145e69ef2c0e007a1"),
   "class": "customer",
   "dbid": "1828",
   "value": "bbb@hotmail.com" 
} 
```

我的 PHP 代码

```
define('DB_HOST', 'localhost');
define('DB_DBNAME', 'mydb');
define('DB_USERNAME', 'mongouser');
define('DB_PASSWORD', 'mongopasswd');
define('DB_DSN', "mongodb://". DB_USERNAME .":". DB_PASSWORD ."@". DB_HOST ."/". DB_DBNAME);
$DB = new Mongo(DB_DSN);
if (!$DB) { die('DB Connection failed!'); }

$MONGODB = $DB->DB_DBNAME;
$COLLECTION = $MONGODB->my_customer; 
```

我尝试使用下面的代码从所有记录（如删除字段）中使用 $unset "dbid"，但它不起作用。

PS：我尝试在 stackoverflow 中搜索，但总是在命令行中显示教程，但我需要它在 PHP 脚本中工作。

```
$COLLECTION->update(array('$unset' => array('dbid' => true))); 
```

我尝试这段代码也没有用。:(

```
$COLLECTION->update(array('$unset' => array('dbid' => true)), array('multiple'=>true)); 
```

如果大家有什么想法请分享..

非常感谢。:)

* * *

- - - - - 更新 - - - - -

我已经找到了问题的解决方案。

@Marc 你是对的！我忘记了*标准* ，我发现我的代码也是错误的。

问题是 mongodb 扩展与定义值混淆。（它认为 DB_DBNAME 是数据库名称）所以，我添加+更改了一些代码，如下所示。

```
$mongodb_name = DB_DBNAME;
$MONGODB = $DB->$mongodb_name;
$COLLECTION = $MONGODB->my_customer; 
```

现在，我尝试@Marc 示例代码

从所有记录中删除 ($unset) 字符串...（有效！）

```
$COLLECTION->update(array('dbid' => array('$exists' => true)), array('$unset' => array('dbid' => true)), array('multiple' => true)); 
```

要将字符串插入所有记录...我使用此代码。（作品！）

```
$COLLECTION->update(array('dbid' => array('$exists' => false)), array('$set' => array('dbid' => 'new_value')), array('multiple' => true)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:20:49.190

您忘记了标准，因此解决方案是：

```
$COLLECTION->update(
    array('dbid' => array('$exists' => true)),
    array('$unset' => array('dbid' => true)),
    array('multiple' => true)
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T11:23:45.267

我认为这样的事情会起作用

```
 $collection->update(
        array( '$unset' => array('dbid' => true) );
        array("upsert" => true, "multiple" => true)
    ); 
```

# php - 在 mongo php 中创建迭代器？

> ID：11757960
> 
> 赞同：0
> 
> 时间：2012-08-01T11:09:07.357
> 
> 标签：php, mongodb

我在 mongo db 中有这个联系人集合。我需要根据公司 ID 在 php 中为此联系人集合创建并返回一个迭代器。

```
function contact_iterator($company_id) 
{

   // code
} 
```

如何根据 company_id 创建和返回联系人集合的迭代器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:30:47.863

a 的默认结果`find()`是[MongoCursor](http://www.php.net/manual/en/class.mongocursor.php) .. 又名迭代器 :)。

```
<?php
    // Connect to MongoDB server
    $mongo = new Mongo();

    // Use database 'mydb' and collection 'contacts'
    $collection = $mongo->mydb->contacts;

    $cursor = $collection->find(array('company_id' => $company_id));

    // $company = $cursor->getNext();

    //  .. or .. 

    // foreach ($cursor as $company) {
        // ..
    // }
?> 
```

# java - Java & MySQL 实时应用

> ID：11757961
> 
> 赞同：0
> 
> 时间：2012-08-01T11:09:09.293
> 
> 标签：java, mysql, percona

我目前正在开发 HMS 应用程序，多网络用户一起工作，我希望能够：

1.  当用户 1 更新患者记录时，用户 2 自动刷新视图。
2.  当用户编辑患者文件时，user2 if try edit Java 对话框将显示一条消息（用户已经在编辑此文件，您无法提交更改）。

这些点对我来说太重要了，所以任何人都可以帮忙吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:36:09.277

1.) 你必须为你的`autorefresh`函数创建一个 javascript。

2.）它包含患者的表必须有一列（*比方说`UserEditing`*），指示某人是否正在编辑（例如`1`，*某人正在修改*或`0` *何时不*修改）。这通常称为`flag`. 每次用户尝试编辑患者信息时，您的应用程序都必须检查此列的值`UserEditing`。如果它检索到，`1`那么您的应用程序会弹出一条消息，指示有人正在对患者进行编辑。

希望这可以帮助 ：）

# java - 将 Optional.absent() 值简洁地传递给方法

> ID：11757962
> 
> 赞同：20
> 
> 时间：2012-08-01T11:09:11.130
> 
> 标签：java, generics, guava

使用 Guava 的`Optional`类型作为方法参数的一个问题是您不能简单地编写

```
// method declaration
public void foo(Optional<String> arg);

// compiler error
foo(Optional.absent()); 
```

由于类型推断失败，而是必须显式添加类型：

```
// real method call
foo(Optional.<String> absent()); 
```

我怎样才能避免它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-30T16:48:41.377

如果您正在处理一小组`Optional<>`类型（例如，主要是字符串或少数其他类型），只需创建一些为您绑定类型参数的辅助方法：

```
public final class AbsentValues {
    public static Optional<String> absentString() {
        return Optional.<String>absent();
    }
} 
```

您甚至可以静态导入这些以生成更简洁的代码：

```
import static AbsentValues.*;

...

foo(absentString()); 
```

对于不太常见`Optional<>`的类型，只需明确指定类型参数。它可能不漂亮，但它是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-26T08:40:45.533

因此，这是执行此操作的正确方法。如果没有别的原因，让我至少在这里展示一下，以供我自己将来参考，供像我这样不阅读问题的每个人使用 :) 感谢 ColinD（和 Alexey）。

```
foo(Optional.<String>absent()) 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-01T11:09:11.130

就在写问题的时候，我想到了

```
public class GuavaConstants {
    @SuppressWarnings( { "raw" })
    public static final Optional ABSENT = Optional.absent();

    // similar for empty ImmutableList, etc.
} 
```

然后电话看起来像

```
@SuppressWarnings( { "unchecked" })
foo(GuavaConstants.ABSENT); 
```

有更好的方法吗？

# phpmyadmin - 如何使用 PHPmyAdmin 找出数据库和表的字符集？

> ID：11757966
> 
> 赞同：10
> 
> 时间：2012-08-01T11:09:24.617
> 
> 标签：phpmyadmin

PHPMyAdmin 中有没有办法找出表和/或数据库的字符集？

唯一显示的是排序规则。但据我了解，排序规则只告诉数据库如何比较数据，而字符集告诉数据库如何存储数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T11:16:54.933

尝试编写 SQL 命令：

```
SELECT * FROM information_schema.SCHEMATA S
WHERE schema_name = "myDataBase"; 
```

您可能想查看[此答案以及](https://stackoverflow.com/questions/1049728/how-do-i-see-what-character-set-a-database-table-column-is-in-mysql)[对此资源](http://dev.mysql.com/doc/refman/4.1/en/charset-database.html)的评论；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T06:39:41.810

或者，在大多数情况下，您也可以通过查看归类名称本身来找到它。假设排序规则名称是“latin1_swedish_ci”，那么数据库的字符集是“latin1”。

# java - 从 EJB 记录事务的成功

> ID：11757975
> 
> 赞同：2
> 
> 时间：2012-08-01T11:09:55.910
> 
> 标签：java, transactions, ejb

我想记录参与事务的 EJB 方法的错误或成功。我应该把日志放在哪里？据我所知，交易将在我`doSomething`完成后提交。因此，在该方法中，我无法确定提交是否成功。这就提出了这个问题。

```
public class MyEjb {

  @Inject
  AnotherEjb anotherEjb;

  @Inject
  LoggerEjb logger;

  public void doSomeThing() {
     MyBean b = getSomething();
     anotherEjb.persistSg(b);

     /* logger.log is transaction if of attrubute NOT_SUPPORTED to
        ensure separation from caller transaction */
     logger.log("Did something successfully.");
  }

}

public class AnotherEjb {

  @Inject
  EntitiyManager em;

  public void persistSg(MyBean entity) {
    em.persist(entity);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:40:30.897

你试过 CDI 的事务观察器吗？

[http://docs.jboss.org/weld/reference/latest/en-US/html/events.html#d0e4075](http://docs.jboss.org/weld/reference/latest/en-US/html/events.html#d0e4075)

此代码触发一个事件：

```
@Inject Event<CategoryUpdate> categoryUpdateEvent;

public void someTransactionalMethod() {
    CategoryUpdate categoryUpdate = new CategoryUpdate();
    categoryUpdateEvent.fire(categoryUpdate);
} 
```

这段代码观察到相同的事件，但只有在事务成功时才会被调用：

```
public void refreshCategoryTree(@Observes(during = AFTER_SUCCESS) CategoryUpdate event) {
    ......
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:53:14.163

使用 bean 管理的事务，它使您可以控制 UserTransaction 的开始/提交/回滚。我建议将开始/提交/回滚逻辑添加到 EJB 拦截器中，因为这可以让您跨多个 EJB 重用逻辑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T11:32:30.397

不幸的是，我认为答案是“视情况而定”——我不相信有一个适用于所有情况的通用答案。例如，您不说是什么在调用这些 EJB。如果您的架构具有常见的“业务服务层”，那么将日志记录放在那里可能既实用又明智......

关于日志记录本身，我建议您不要执行上述操作。首先，不要调用 .log 本身。而是调用特定的日志级别（DEBUG、INFO 等）。接下来，在调用日志语句之前检查是否启用了此日志级别。是的，这是一个 PITA，但在性能方面具有可衡量的结果。最后，尽量不要像上面所做的那样记录一点简单的文本。日志记录是一个将您掌握的一些有用信息提供给日志文件的*机会。*你错过了这个机会！如果你记录，至少记录一些关于你刚刚找到、创建或没有的 bean 的信息。

祝你好运！

# c# - 从 Metro 应用程序访问受 ACS 保护的 Azure 中的 Web API 站点

> ID：11757978
> 
> 赞同：2
> 
> 时间：2012-08-01T11:10:16.840
> 
> 标签：c#, azure, windows-8, acs

我有一个运行 ASP.Net Web API 应用程序的 Azure Worker 角色。这受 ACS 保护。当我使用浏览器浏览 Web api 时，ACS 要求我针对 Google 或 LiveId 进行身份验证。当我进行身份验证时，我可以看到数据。

我正在尝试从 Win 8 Metro Style App 访问相同的 API。我正在尝试使用 WebAuthenticationBroker。

```
WebAuthenticationResult webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
                                                        WebAuthenticationOptions.None,
                                                        new Uri("https://xxxxx.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2fyyyyy.cloudapp.net%2f"),
                                                        new Uri("http://yyyyy.cloudapp.net/")
                                                       ); 
```

当我启动应用程序时，它要求我像以前一样通过 Google 或 LiveId 进行身份验证。这通过了，我得到了一个成功的结果。

然后我使用 HttpClient 创建对 API 的调用：

```
 HttpClient client = new HttpClient();
    Uri _baseUri = new Uri("http://yyyyy.cloudapp.net/api/");
    client.BaseAddress = _baseUri;

    var response = client.GetAsync("Values/").Result;
    var responseBodyAsText = response.Content.ReadAsStringAsync().Result;

    var ids = JsonConvert.DeserializeObject<IList<int>>(responseBodyAsText); 
```

这种工作，它似乎正确导航到 URI，但返回的有效负载是 HTML 要求我登录，而不是我期望的 JSON 数据。

我在这方面花费的时间比明智的要多，而且我的想法已经用完了！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:24:46.437

在 localhost 上进行测试时，您必须确保 ACS 可以访问您的计算机。

正如@caleb 所写，您需要侦听令牌并将其重定向给代理。您可以查看我的帖子，其中包含一个工作示例以及如何设置它。

[WebAuthenticationBroker 是否在 Windows 8 Metro App post Release Candidate 中工作](https://stackoverflow.com/questions/12485665/does-the-webauthenticationbroker-work-in-windows-8-metro-app-post-release-candid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:48:57.337

将`WebAuthenticationBroker`继续浏览，直到浏览器要加载的 URL 是 callbackUri 参数中指定的 URL。然后它将向您返回最终 url，包括任何查询参数。它实际上从未向 callbackUri 发出请求。

您遇到的问题是 ACS 实现的 WS-Federation 协议将令牌发回返回 url（在 ACS 配置门户中指定），这可能与您在 AuthenticateAsync 方法中指定为 callbackUri 参数的 url 相同。

您需要做的是处理该帖子并将请求重定向到 callbackUri，但使用包含令牌的查询字符串。

我正在使用 WebApi 和 WIF，并且我将 callbackUri 指定为`http://localhost:3949/api/federationcallback/end`并将返回 url 指定为`http://localhost:3949/api/federationcallback`. 这使我可以让控制器处理帖子，然后使用 URL 中的令牌进行重定向。控制器看起来像这样。

```
public class FederationcallbackController : ApiController
{
    public HttpResponseMessage Post()
    {
        var response = this.Request.CreateResponse(HttpStatusCode.Redirect);
        response.Headers.Add("Location", "/api/federationcallback/end?acsToken=" + ExtractBootstrapToken());

        return response;
    }

    protected virtual string ExtractBootstrapToken()
    {
        return HttpContext.Current.User.BootstrapToken();
    }
} 
```

然后我可以像这样得到令牌：

```
var authenticateResult = await WebAuthenticationBroker.AuthenticateAsync(
            WebAuthenticationOptions.None,
            new Uri("https://xyz.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost:3949%2f"),
            new Uri("http://localhost:3949/api/federationcallback/end"));

var oauthToken = authenticateResult.ResponseData.Substring(authenticateResult.ResponseData.IndexOf("acsToken=", StringComparison.Ordinal) + 9); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:07:52.043

`WebAuthenticationResult`调用 API 时不应该重新使用令牌吗？

```
var webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, 
        new Uri("https://xxxxx.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2fyyyyy.cloudapp.net%2f"), new Uri("http://yyyyy.cloudapp.net/"));

var client = new HttpClient();
client.DefaultRequestHeaders.Authorization
        = new AuthenticationHeaderValue("OAuth", webAuthenticationResult.ResponseData); 
```

# c# - 通过 Exec 函数更改加载项按钮的 buttonText

> ID：11757980
> 
> 赞同：2
> 
> 时间：2012-08-01T11:10:23.910
> 
> 标签：c#, visual-studio-2010, exec, add-in, visual-studio-addins

我在 MSDN 中多次看到这句话：“插件可以稍后通过响应 QueryStatus 方法来更改 ButtonText 名称”。但从来没有看到如何做到这一点。有人可以帮助我吗？

当用户点击加载项按钮时，我想更改加载项按钮文本（按钮上显示的文本）。例如：我有一个加载项，它的文本是`LogOn`. 我想将此文本更改`LogOut`为用户按下它的时间。

谢谢！

# encoding - 如何通过 IIS 平滑流技术流式传输 MP3 文件

> ID：11757984
> 
> 赞同：1
> 
> 时间：2012-08-01T11:10:39.487
> 
> 标签：encoding, mp3, smooth-streaming

在我的项目中，我需要使用平滑流技术从 IIS 流式传输 MP3 文件。我相信我们可以通过将 MP3 文件编码为 .isma 文件（仅音频流）来实现相同的目的。我的问题是如何使用 Expression Encoder SDK（而不是通过 Expression Encoder GUI 工具）对这些 MP3 文件进行编码，或者是否有任何不同的技术可以在不使用平滑流的情况下通过 IIS 流式传输 MP3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:28:54.687

我通过使用 MediaElement 控件和渐进式下载技术解决了这个问题。只需使用 MP3 文件的 Url 指定 MediaElement 控件的 Source 属性。

# plot - Matlab：堆叠各种图

> ID：11757987
> 
> 赞同：5
> 
> 时间：2012-08-01T11:10:51.163
> 
> 标签：plot, matlab

我对下图有疑问：

![在此处输入图像描述](../Images/cc9b7dd3220e0b4d54ec9ff58145bcdc.png) 本质上，我们这里有两个具有相同 x 轴的子图。我现在想节省空间，而不是有两个带有两个 x-axix 标签的子图，我想消除它们之间的空间并将它们堆叠在一起。

有什么简单的方法可以做到这一点吗？

非常感谢！帕特里克

```
%% Data
t  = 0:100;
f1 = 0.3;
f2 = 0.07;
u1 = sin(f1*t);   cu1 = 'r'; %red
u2 = cos(f2*t);   cu2 = 'b'; %blue
v1 = 5*u1.^2;     cv1 = 'm'; %magenta
v2 = 5*u2.^2;     cv2 = 'c'; %cyan

figure;
h(1) = subplot(2,1,1); % upper plot
plot(t,u1,'Color',cu1,'DisplayName','u1'); hold on;
plot(t,u2,'Color',cu2,'DisplayName','u2'); hold off;

xlabel('Time t [s]');
ylabel('u [some unit]');
legend(gca,'show');

h(2) = subplot(2,1,2); % lower plot
plot(t,v1,'Color',cv1,'DisplayName','v1'); hold on;
plot(t,v2,'Color',cv2,'DisplayName','v2'); hold off;

xlabel('Time t [s]');
ylabel('v [some unit^2]');
legend('show');

linkaxes(h,'x'); % link the axes in x direction (just for convenience) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T11:52:51.113

删除上图的 xticks：

```
set(h(1),'xticklabel',[]); 
```

并删除 xlabel （删除或注释代码中的该行）

现在通过改变它们的位置将两者靠得更近：

```
pos=get(h,'position');
bottom=pos{2}(2);
top=pos{1}(2)+pos{1}(4);
plotspace=top-bottom;
pos{2}(4)=plotspace/2;
pos{1}(4)=plotspace/2;
pos{1}(2)=bottom+plotspace/2;

set(h(1),'position',pos{1});
set(h(2),'position',pos{2}); 
```

那么你会得到

![在此处输入图像描述](../Images/1ef68cde6dcccff176a2c672a4de991d.png)

y 轴标签开始重叠，因此您可能还需要调整这些标签

```
set(h(1),'ytick',[-0.5 0 0.5]); 
```

例如，或在右侧放置一个 y 轴：

```
set(h(2),'YAxisLocation','right') 
```

# python - 有效地删除和检查列表

> ID：11757989
> 
> 赞同：0
> 
> 时间：2012-08-01T11:10:54.597
> 
> 标签：python, list, for-loop, indexing

现在我正在尝试将战舰棋盘游戏作为练习，并且我大部分时间都在使用带有一些杂项独立功能的类。下面的一切都是独立的。我无法完全理解它，如果我按列表中从最后一个到第一个的顺序攻击船只，这会起作用，但如果你以任何其他顺序进行，它会破坏说列表索引不存在。请帮忙。

基本上我的系统是每当一艘船被“击中”（移动与shipList中的位置相同）然后它添加一个hitList。这些功能是检查 hitList 中的任何项目是否与船舶的已知位置...在制造船舶对象时在单独的列表中创建。我已经尝试了 2 天来完成这项工作

```
def checkForSunk(shipList, hitList):

    #Lists is something like this [[0,1],[0,2],[0,3]]
    #ShipList[0] is list, [1] is name of ship
    #ShipList is ALL ships.

    print 'SHIPLIST : %s' % (shipList)
    #[[[[0,1],[0,2],[0,3],[0,4],[0,5],[],[]], 'Destroyer'], [[[0,1],[0,2],[0,3],[0,4],[0,5],[],[]], 'Destroyer'], [[[0,1],[0,2],[0,3],[0,4],[0,5],[],[]], 'Destroyer']]

    #[[[0,1],[0,2],[0,3],[0,4],[0,5],[],[]], 'Destroyer']
    #   0                                       1
    print 'HITLIST : %s ' % (hitList)
    for j in range(len(shipList)):
        for i in shipList[j][0]:
            if i in hitList:
                print 'True in ship # %s' % (shipList[j][1])
                del shipList[j][0][shipList[j][0].index(i)] #Delete that part of the ship from the list.
    #Check if there's any empty ships, and delete the ship if there are.
    for j in range(len(shipList)):
        print shipList[j] #Problem around here!!!!!!!!!!!!
        if listIsEmpty(shipList[j][0]):
            print '%s has been sunk!' % (shipList[j][1])
            del shipList[j]

def isGameOver(shiplist):
    if shiplist == []:
        return True
    else:
        return False

def listIsEmpty(list):
    for i in range(len(list)):
        if list[i] != []: #If it finds anything thats not empty, return False. Else true
            return False
        else:
            return True 
```

我做错了吗？我应该物理删除列表吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:54:46.287

答案与[使用 for-loop 的问题 Delete item in a list](https://stackoverflow.com/questions/2057419/python-delete-item-in-a-list-using-a-for-loop)相同：

向后迭代：

```
for j in range(len(shipList) - 1, -1, -1): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:11:56.863

如果我理解得很好，你`hitlist`包含所有命中（意思是，你不会在每次移动时检查）：如果是这样，gecco 的症状是正确的：你不能在迭代列表时删除列表中的元素（这会使索引无效）。但是颠倒列表并不能解决这个问题，因为如果你从第一艘到最后一艘沉船，你也会遇到同样的问题。

如果您不想过多地更改代码，请替换`del shipList[j]`为`shipList[j][0] = None`（您不删除列表元素，因此迭代仍然有效），然后重新定义函数`isGameOver`：

```
def isGameOver(shiplist):
    ret = True
    for ship in shiplist:
        if shiplist[0] is not None:
            ret = False
            break
    return ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:52:26.520

您遇到的错误已在@gecco 答案中进行了解释。

避免使用嵌套循环可以使代码易于理解。

例如，以下函数是错误的，因为它只会检查列表中的第一个元素。

```
def listIsEmpty(list):
    for i in range(len(list)):
        if list[i] != []: #If it finds anything thats not empty, return False. Else true
            return False
        else:
            return True 
```

它可以写成

```
def listIsEmpty(alist):
    return not any(alist) 
```

和 checkForSunk 函数

```
#Check if there's any empty ships, and delete the ship if there are.
for j in range(len(shipList)):
    print shipList[j] #Problem around here!!!!!!!!!!!!
    if listIsEmpty(shipList[j][0]):
        print '%s has been sunk!' % (shipList[j][1])
        del shipList[j] 
```

可以写成

```
# sometimes use filter can make thing easier.
shipList = [k for k in shipList if not listIsEmpty(k[0])] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T11:45:27.683

对不起，我无法为您提供解决方案代码，因为您没有提供足够的信息或代码让我为您修复。但我提供的代码示例可能有助于您理解这些列表。

```
#a list with 10 object
mylist = [1,2,3,4,5,6,7,8,9,10]
print mylist
>>> 
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
#if i print the 6th object:
print mylist[5]
>>> 
6
#if i delete an object from the end:
del mylist[9]
print mylist
>>>
[1, 2, 3, 4, 5, 6, 7, 8, 9]
#as you can see, the item is gone, and the list only has 9 objects.

#if i print the 6th object:
print mylist[5]
>>> 
6

#but if i delete an item from the middle
del mylist[4]
print mylist
>>>
[1, 2, 3, 4, 6, 7, 8, 9]
#i now have 8 objects as expected, but the objects location in the list has changed.

#if i print the 6th object:
print mylist[5]
>>> 
7 
```

我希望这有帮助

# javascript - jQuery 移动图标计数徽章/气泡

> ID：11757990
> 
> 赞同：11
> 
> 时间：2012-08-01T11:11:02.677
> 
> 标签：javascript, jquery-mobile

如何在 jQuery mobile 中的图标（数据图标）上添加计数气泡或徽章。有没有更好的方法将其添加为小部件而不是使用 CSS 进行操作？我希望从服务器动态更新计数。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-03T23:13:52.147

这是我的徽章图标版本，可以通过 CSS 轻松调整（假设`border-radius`支持）：

```
.my-badge {
  display: none;
  background: #BA070F;
  color: #fff;
  padding: 1px 7px;
  position: absolute;
  right: 4px;
  top: -12px;
  z-index: 999;
  border-radius: .8em;
  border: 2px solid #fff;
} 
```

默认情况下它是隐藏的 ( `display: none`)，应该显示/隐藏并根据需要以编程方式更新计数。这是我如何在 jQuery ymmv 中执行此操作的一个简单示例：

```
$('#badge-page1').html(++badgeCount).fadeIn(); 
```

我这样做是为了与基于无序列表的 jQuery Mobile NavBar 一起使用。这是一个标签的标记示例，包括`span`我添加的使用上述样式的徽章：

```
<li class="ui-badge-container">
  <span id="badge-page1" class="my-badge"></span>
  <a href="#page-tab1" data-role="tab">Tab 1</a>
</li> 
```

请注意，徽章是绝对定位的，因此它必须位于`position: relative`. 我创建了一个简单的类来添加到包含元素，在这种情况下，父元素`li`如上所示：

```
.ui-badge-container {
  position: relative;
} 
```

这是它的样子：

![在此处输入图像描述](../Images/4ab323700fb11d63a82baecac763c60a.png)

这是一个[fiddle](http://jsfiddle.net/ey27uLr9/)，稍作修改以用作静态示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T07:05:22.867

HTML：

```
<span class="ui-li-count ui-btn-corner-all countBubl">12</span> 
```

CSS：

```
.countBubl {float:left;margin-top:-42px;margin-left:35px;background:#ed1d24;color:#fff;padding:2px;} 
```

将 HTML 粘贴到您的图像标记旁边。“您可以根据图标大小调整上边距和左边距。我认为它可能有效”。谢谢。

# mvvm - 如何在 AngularJS 视图中实现条件逻辑

> ID：11757993
> 
> 赞同：4
> 
> 时间：2012-08-01T11:11:13.633
> 
> 标签：mvvm, angularjs

我有一个带有物品的控制器。假设如果有任何项目，我想在表格中显示项目。这样的逻辑如何在“视图”中实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T11:42:22.603

ng-repeat 已经为你处理好了。ng-repeat 仅在有项目时将 html 放在那里。

或者，如果您甚至不希望 table 元素存在（甚至不会弄乱计算！）您可以执行以下操作：

```
<table class="table" ng-show="items.length">
<tr ng-repeat="item in items">
<td>{{item}}</td>
</tr>
</table> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:45:54.080

检查 [http://www.codinginsight.com/angularjs-if-else-statement/](http://www.codinginsight.com/angularjs-if-else-statement/)

臭名昭著的 angularjs if else 语句！！！当我开始使用 Angularjs 时，我有点惊讶于找不到 if/else 语句。

所以我正在做一个项目，我注意到在使用 if/else 语句时，加载时会显示条件。你可以使用 ng-cloak 来解决这个问题。

```
<div class="ng-cloak">
 <p ng-show="statement">Show this line</span>
 <p ng-hide="statement">Show this line instead</span>
</div> 
```

.ng-cloak { 显示：无 }

谢谢阿马杜

# database - postgresql 中的 max_stack_depth 错误

> ID：11757996
> 
> 赞同：3
> 
> 时间：2012-08-01T11:11:29.500
> 
> 标签：database, postgresql

我创建触发器来存储工资金额，但是当我触发插入查询时

```
INSERT INTO employees(
            employee_id, first_name, last_name, email, phone_number,  hire_date, 
            job_id, salary, commission_pct, manager_id, department_id)
    VALUES (2002,'poiuy','patel','bhargavgor@dfghj',9898562123,'2012-07-31 00:00:00','IT_PROG',4500.00,0.00,100,60); 
```

然后它会显示以下错误来设置限制`max_stack_depth`所以任何人都可以给我解决这个错误的想法..

我也尝试更改`max_stack_depth`配置文件中的值，但它不起作用

错误如下

```
ERROR:  stack depth limit exceeded
HINT:  Increase the configuration parameter "max_stack_depth" (currently 2048kB), after ensuring the platform's stack depth limit is adequate. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:29:07.997

我会说您有一个`ON INSERT OR UPDATE`触发器`employees`，直接或间接`UPDATE`地对`employees`表执行操作，而不检查它是直接调用还是通过触发器调用。

这通常是一个编程错误，你在桌子上做一个`UPDATE`而`employee`不是让你的`BEFORE INSERT OR UPDATE ... FOR EACH ROW`触发器修改`NEW`.

有时是两个触发器之间的相互递归，这更难处理。不幸的是，我不知道有什么方法可以检测触发器是由直接客户端语句还是通过另一个存储的过程或触发器调用的。通常需要进行设计更改以避免相互递归。

请参阅[防止 PostgreSQL 中的递归触发器](https://stackoverflow.com/questions/708562/prevent-recursive-trigger-in-postgresql)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:27:47.280

您能否发布更改 max_stack_depth 时收到的错误消息。

Linux 系统中的“ ulimit -s ”将给出堆栈深度。将 max_stack_depth 设置为比您的实际服务器限制 (ulimit -s) 少一或二。

设置后请重新加载。

# windows - SetupDiCallClassInstaller 的等效 API，用于卸载我的调制解调器

> ID：11757997
> 
> 赞同：2
> 
> 时间：2012-08-01T11:11:34.537
> 
> 标签：windows, winapi, 64-bit, 32bit-64bit, setupapi

我使用`SetupDiCallClassInstaller`with`DIF_REMOVE`作为参数来卸载我的调制解调器。但是当我在“Windows 7”“64 位”机器上测试我的应用程序时出现错误`0xE0000235`，但我找不到解决这个问题的解决方案。

一些谈论这个的[SO 链接](https://stackoverflow.com/questions/8684061/setupdicallclassinstaller-throws-error-in-wow64-when-compiled-for-32-bit-on-a-64)没有解决方案，而是创建一个 64 位 exe，我不想这样做。

我的问题是有没有其他 API 可以做同样的事情（我想卸载我的调制解调器）？