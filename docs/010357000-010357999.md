# StackOverflow 问答 10357000-10357999

# c# - 不要在gridview中显示日期时间最小值

> ID：10357000
> 
> 赞同：2
> 
> 时间：2012-04-27T19:53:06.840
> 
> 标签：c#

给定：

```
public class Customer
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public DateTime Birthdate { get; set; }
} 
```

我有一些未输入生日的列表，因此当我绑定到 GridView 时，它显示 DateTime.MinValue。如果生日是 DateTime.MinValue，有哪些不同的方法可以在 gridview 中显示空白？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T19:54:39.067

除非将其映射到数据库，否则我会将其设为可空：

```
public class Customer
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public DateTime? Birthdate { get; set; }
} 
```

**编辑：**

如果它被映射，那么我只需为其创建一个只读可为空的值：

```
public DateTime? BirthdateDisplay
{
   get
   {
      if (this.Birthdate == default(DateTime))
         return null;
      else
         return this.Birthdate;
   }   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:57:02.403

您可以向 Customer 添加一个名为 BirthDateStr 的附加属性。

```
public class Customer
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public DateTime Birthdate { get; set; }
    public string BirthDateStr
    {
        get
        {
            if (Birthdate != DateTime.MinValue)
                return Birthdate.ToString();
            else
                return "";
        }
} 
```

显然，您可以对 getter 中的 BirthDateStr 进行任何您想做的格式化，以使其与您的格式相匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-08T06:11:46.600

或者，您可以更新前端 GridView 显示以隐藏 DateTime.MinValue，如下所示：

```
<asp:TemplateField HeaderText="Last Request Date">
<ItemTemplate><%# (DateTime)Eval("LastRequestDate").Equals(DateTime.MinValue) ? "" : string.Format("{0:dd/MM/yyyy hh:mm:ss tt}", (DateTime)Eval("LastRequestDate")) %></ItemTemplate> 
```

# r - 创建根据 Z 轴着色的 3D 绘图

> ID：10357002
> 
> 赞同：2
> 
> 时间：2012-04-27T19:53:19.270
> 
> 标签：r, 3d, plot

```
 library(Sleuth2)

 mlr<-lm(ex1222$Buchanan2000~ex1222$Perot96*ex1222$Gore2000)

for (i in 0:3) {
           assign(paste("betaHat", i, sep=""), 
           summary(mlr)$coeff[i+1,1])
               }

x<-sort(ex1222$Perot96)
y<-sort(ex1222$Gore2000)

z1 <- outer(x, y, function(a,b) betaHat0+betaHat1*a+betaHat2*b+betaHat3*a*b)
nrz <- nrow(z)
ncz <- ncol(z)

# Create a function interpolating colors in the range of specified colors
jet.colors <- colorRampPalette( c("blue", "red") ) 

# Generate the desired number of colors from this palette
nbcol <- 100
color <- jet.colors(nbcol)

# Compute the z-value at the facet centres
zfacet <- z[-1, -1] + z[-1, -ncz] + z[-nrz, -1] + z[-nrz, -ncz]

# Recode facet z-values into color indices
facetcol <- cut(zfacet, nbcol)

persp(x, y, z1, col=color[facetcol],theta=-30, lwd=.3,xlab="Perot 96", ylab="Gore 2000", zlab="Predicted Votes for Buchanan") 
```

你好，

我正在尝试为上面的情节着色。我在想我想要更高的“z”值，颜色更深的红色（或任何颜色）。

任何有关如何实现这一目标的帮助将不胜感激。

此外，请随意提出不同的功能来实现这一点。

谢谢！

***编辑....在查看 ?persp 上的示例后，我放置了我的新代码。我想改变颜色，但我对新情节的可读性不太满意***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:51:35.893

我稍微修改了你的代码。

```
library(Sleuth2) 
```

使用参数通常`data`比使用通过以下方式从数据帧中提取的预测变量更好的做法`$`：

```
mlr<-lm(Buchanan2000~Perot96*Gore2000,data=ex1222) 
```

我们可以使用`expand.grid()`and`predict()`以一种干净的方式获得回归结果：

```
perot <- seq(1000,40000,by=1000)
gore <-  seq(1000,400000,by=2000) 
```

如果您希望在观察位置评估方面，则可以`perot <- sort(unique(ex1222$Perot96)); gore <- sort(unique(ex1222$Gore2000))`改用。

```
pframe <- with(ex1222,expand.grid(Perot96=perot,Gore2000=gore))
mlrpred <- predict(mlr,newdata=pframe) 
```

现在将预测转换为矩阵：

```
nrz <- length(perot)
ncz <- length(gore)
z <- matrix(mlrpred,nrow=nrz) 
```

我选择从浅红色（`#ffcccc`，带有相当多的蓝色/绿色的红色）到深红色（`#cc0000`，一点红色，没有别的东西）。

```
jet.colors <- colorRampPalette( c("#ffcccc", "#cc0000") ) 
```

您还可以使用`grep("red",colors(),value=TRUE)`查看 reds R 内置的内容。

```
# Generate the desired number of colors from this palette
nbcol <- 100
color <- jet.colors(nbcol)

# Compute the z-value at the facet centres
zfacet <- z[-1, -1] + z[-1, -ncz] + z[-nrz, -1] + z[-nrz, -ncz]
# Recode facet z-values into color indices
facetcol <- cut(zfacet, nbcol)

persp(perot, gore, z,
      col=color[facetcol],theta=-30, lwd=.3,
      xlab="Perot 96", ylab="Gore 2000", zlab="Predicted Votes for Buchanan") 
```

![在此处输入图像描述](../Images/6ec90b6b458756fcf7767fd39d1e76cb.png)

你说你对情节的“可读性不太满意”，但这不是很具体......我会花一些时间在`?persp`页面上看看你的一些选择是什么......

另一种选择是`rgl`包装：

```
library(rgl)
## see ?persp3d for discussion of colour handling
vertcol <- cut(z, nbcol)
persp3d(perot, gore, z,
      col=color[vertcol],smooth=FALSE,lit=FALSE,
      xlab="Perot 96", ylab="Gore 2000", zlab="Predicted Votes for Buchanan") 
```

![在此处输入图像描述](../Images/b6db3266ad1b205f5d0ec4c376bcd1e8.png)

`scatter3d`从包中也可能值得一看`car`（关于 SO 的其他帖子描述了如何调整其一些图形属性）。

```
library(car)
scatter3d(Buchanan2000~Perot96*Gore2000,data=ex1222) 
```

![在此处输入图像描述](../Images/f84fc50afa9cb49fa8f1244220d46c70.png)

# dictionary - 使用地图时在集合中返回什么

> ID：10357015
> 
> 赞同：1
> 
> 时间：2012-04-27T19:54:34.377
> 
> 标签：dictionary, clojure, reduce

我阅读了很多关于 Clojure 的文档（并且需要再次阅读）并阅读了关于 SO 的几个 Clojure 问题，以获得对语言的“感觉”。除了 elisp 中的一些小函数之外，我以前从未用任何 Lisp 语言编写过。我在 Clojure 中编写了我的第一个项目 Euler 解决方案，在继续深入之前，我想更好地了解有关*map*和*reduce*的一些知识。

使用 lambda，我最终得到以下结果（将 3 或 5 或两者的所有倍数相加在 1 到 1000 之间）：

```
(reduce + (map #(if (or (= 0 (mod %1 3)) (= 0 (mod %1 5))) %1 0) (range 1 1000))) 
```

我把它放在一行是因为我把它写在 REPL 上（它给出了正确的解决方案）。

没有 lambda，我写了这个：

```
(defn val [x] (if (or (= 0 (mod x 3)) (= 0 (mod x 5))) x 0)) 
```

然后我计算这样做的解决方案：

```
(reduce + (map val (range 1 1000))) 
```

在这两种情况下，我的问题都涉及在执行*reduce*之前地图应该返回什么。完成*地图*后，我注意到我最终得到了一个如下所示的列表：*(0 0 3 0 5 6 ...)*。

*我尝试删除val*定义末尾的“0”，但随后我收到了一个由*(nil nil 3 nil 5 6 etc.)*组成的列表。我不知道*nil*是否有问题。我发现无论如何我都会在进行左折叠时进行求和，这样零就不是真正的问题了。

但是仍然：返回的合理地图是什么？(0 0 3 0 5 6 ...) 或 (nil nil 3 nil 5 6...) 或 (3 5 6 ...) （我将如何处理最后一个？）或其他什么？

我应该“过滤掉”零点/零点吗？如果是的话怎么办？

我知道我在问一个基本问题，但 map/reduce 显然是我会经常使用的东西，所以欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:34:59.967

听起来您已经对将**映射关注点与归约分离的需求**有了直观的理解。 map 生成的数据不被归约使用是完全自然的。事实上，使用零是加法的标识值这一事实使这更加优雅。

*   映射工作是生成新数据（在本例中为 3 5 或“忽略”）
*   减少的工作是决定要包括什么并产生最终结果。

您开始使用的是惯用的 clojure，无需再将其复杂化，因此下一个示例只是为了说明让 map 决定要包含的内容的意义：

```
(reduce #(if-not (zero? %1) (+ %1 %2) %2) (map val (range 10))) 
```

在这个人为的例子中，reduce 函数忽略了零。在典型的现实世界代码中，如果这个想法就像过滤掉一些值一样简单，那么人们倾向于只使用这个`filter`函数

```
(reduce + (filter #(not (zero? %)) (map val (range 10)))) 
```

您也可以从过滤器开始并跳过地图：

```
(reduce + (filter #(or (zero? (rem % 3)) (zero? (rem % 5))) (range 10))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T11:32:26.933

口号是清晰。

*   使用`filter`，不使用`map`。然后，您不必选择稍后必须决定不采取行动的空值。
*   命名过滤/映射功能会有所帮助。使用`let` or `letfn`， not `defn`，除非您在其他地方使用过该功能。

根据这个建议采取行动使我们...

```
(let [divides-by-3-or-5? (fn [n] (or (zero? (mod n 3)) (zero? (mod n 5))))]
  (reduce + (filter divides-by-3-or-5? (range 1 1000)))) 
```

你可能想暂时停在这里。

这读起来不错，但`divides-by-3-or-5?`功能卡在喉咙里。改变因素，我们需要一个全新的功能。而那个重复的短语`(zero? (mod n ...))`罐子。所以 ...

我们想要一个函数，它——给定一个可能因素的列表（或其他集合）——告诉我们它们中的任何一个是否适用于给定的数字。换句话说，我们想要

*   一组数字的函数 - 可能的因素 - ...
*   返回一个数字的*函数*- 候选者 - ...
*   这告诉我们候选人是否可以被任何可能的因素整除。

一个这样的功能是

```
(fn [ns] (fn [n] (some (fn [x] (zero? (mod n x))) ns))) 
```

...我们可以这样使用

```
(let [divides-by-any? (fn [ns] (fn [n] (some (fn [x] (zero? (mod n x))) ns)))]
  (reduce + (filter (divides-by-any? [3 5]) (range 1 1000)))) 
```

笔记

*   这种“改进”使程序变慢了一点。
*   `divides-by-any?`可能被证明足以被提升为 `defn`.
*   如果操作很关键，您可以考虑去除冗余因素。例如`[2 3 6]`可以简化为`[6]`.
*   如果操作*非常*关键，并且因子作为常量提供，您可以考虑使用返回 using 的宏创建过滤器函数`or`。

这是一个有点[毛茸茸的故事](http://en.wikipedia.org/wiki/Shaggy_dog_story)，但它讲述了你提到的问题所引发的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:55:59.440

在你的情况下，我会使用[keep](http://clojuredocs.org/clojure_core/clojure.core/keep)而不是`map`. 它类似于，`map`除了它只保留非零值。

# facebook-graph-api - 喜欢的“链接”和“网站”字段之间的区别

> ID：10357018
> 
> 赞同：1
> 
> 时间：2012-04-27T19:54:48.397
> 
> 标签：facebook-graph-api, facebook-like, facebook-opengraph

在过去的几个月里，我一直在使用为 Like 返回的数据中存在的“链接”字段，以确定被喜欢的 Open Graph 对象是否是我的应用程序的一部分。一直以来，链接字段都包含被喜欢对象的 og:url 值。现在，链接字段包含一个 Facebook 页面的 URL，该页面是为被喜欢的对象自动创建的。我发现有时“网站”字段包含对象的 og:url 值，但有时不会返回网站字段（即使明确请求）。

还有其他人遇到这个问题吗？我是否错过了 Facebook 关于它们如何彻底改变这些字段含义的公告？我在吃疯狂的药吗？这只是目前围绕喜欢/发送功能的许多当前错误的症状吗？在提交错误报告之前，我想把它扔给社区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:09:51.483

[开放图协议](https://developers.facebook.com/docs/opengraphprotocol/)

页面管理

要管理您的页面，您需要将其与您的 Facebook 帐户或 Facebook 平台应用程序相关联。将您的页面与用户帐户和 Facebook 平台应用程序相关联是有效的。

要将页面与您的 Facebook 帐户相关联，请将附加属性 fb:admins 添加到您的页面，并使用逗号分隔的用户 ID 或拥有该页面的 Facebook 帐户的用户名列表，例如：

```
<meta property="fb:admins" content="USER_ID1,USER_ID2"/> 
```

每个列出的用户必须在 URL 上单击“赞”才能被批准为管理员。这是为了防止用户在未经他们同意的情况下成为管理员。

> 所以我认为使用站点 url 取决于管理员用户是否喜欢该页面。

# jquery - Jquery DIV 弹出窗口

> ID：10357025
> 
> 赞同：-1
> 
> 时间：2012-04-27T19:55:34.557
> 
> 标签：jquery, html, popup, focus

我有 20 多列的表。有些列有一个添加链接，会在 div 层中生成一个弹出窗口。我现在遇到的问题是，当我在需要向右滚动的列上单击添加时，它会创建弹出窗口，但它会跳回第一列并失去焦点。我如何确保它不会跳回第一列并将焦点保持在单击添加之前的位置？

```
$(function () {
    var moveLeft = 15;
    var moveDown = 20;

    $('a.trythis').click(function (e) {
        $('#popup').show().css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft).appendTo('body');

    });

    $('#closethis').click(function (e) {
        $('#popup').hide();

    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:01:36.443

在这两种点击功能中，`return false`或者使用`e.preventDefault()`. 这将阻止浏览器尝试跟踪链接（可能是`#`）并仅应用 javascript

# .net - 与 .Net 兼容的 Socket.IO 示例

> ID：10357026
> 
> 赞同：0
> 
> 时间：2012-04-27T19:55:35.297
> 
> 标签：.net, wcf, node.js, push-notification, socket.io

我需要一个Hello World！在 Windows 上运行的 socket.IO 示例。客户端：HTML、JavaScript 服务器：能够连接到 .Net 你见过这样的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:59:36.053

Node.js 和 Socket.io 应该可以直接在 Windows 上运行。Node.js 应该能够在本地或远程与您的 .Net 服务器通信。

这是我关于在 Windows 7 上运行 Node 和 Socket.IO 的一个老问题。Node.js [+ Socket.io + Windows 7 / 8？](https://stackoverflow.com/questions/7274442/node-js-socket-io-windows-7)

这个问题应该回答有关让两者进行通信的任何问题： [Communicating between Node.Js and ASP.NET MVC Application](https://stackoverflow.com/questions/8091031/communicating-between-node-js-and-asp-net-mvc-application)

# android - 异步任务httppost？

> ID：10357027
> 
> 赞同：1
> 
> 时间：2012-04-27T19:55:35.540
> 
> 标签：android, android-layout

我是为 android 创建应用程序的新手，也是第一次使用 asynctask。我想在后台运行一个 httpost，但不断出错。我使用正确的参数吗？我也需要后执行吗？

这是我的代码

public void send(View v) { new sendtask().execute(); }

```
 private class sendtask extends AsyncTask<String,Void, String> {

    String msg = msgTextField.getText().toString();  
    String msg1 = spinner1.getSelectedItem().toString();
    String msg2 = spinner2.getSelectedItem().toString();

    protected String doInBackground(String...url) {

          try {

               HttpClient httpclient = new DefaultHttpClient();
               HttpPost httppost = new HttpPost("http://10.0.2.2:80/test3.php");
               List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);;
               nameValuePairs.add(new BasicNameValuePair("id", "12345"));
               nameValuePairs.add(new BasicNameValuePair("name", msg));
               nameValuePairs.add(new BasicNameValuePair("gender",msg1));
               nameValuePairs.add(new BasicNameValuePair("age",msg2));
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));                   
               httpclient.execute(httppost);

               msgTextField.setText(""); // clear text box
             } catch (ClientProtocolException e) {
                 // TODO Auto-generated catch block
             } catch (IOException e) {
                 // TODO Auto-generated catch block
             }
        return null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:07:58.670

OnPostExecute 用于需要更新用户界面（doInBackground(String...url)方法中不能更新用户界面），OnPostExecute接收的参数是doInBackground(String...url)返回的值，而不是您的案例是否与用户相关，如果发布了帖子，则通知您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:43:35.893

您还应该包括错误以帮助识别和解决问题，但在这种情况下，解决方案可能如下：

```
private class sendtask extends AsyncTask<String, Void, String> {
    String msg = msgTextField.getText().toString();
    String msg1 = spinner1.getSelectedItem().toString();
    String msg2 = spinner2.getSelectedItem().toString();

    protected String doInBackground(String... url) {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://10.0.2.2:80/test3.php");
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
            nameValuePairs.add(new BasicNameValuePair("id", "12345"));
            nameValuePairs.add(new BasicNameValuePair("name", msg));
            nameValuePairs.add(new BasicNameValuePair("gender", msg1));
            nameValuePairs.add(new BasicNameValuePair("age", msg2));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            httpclient.execute(httppost);

            return "";
        } catch (ClientProtocolException e) {
            return "ClientProtocolException";
        } catch (IOException e) {
            return "IOException";
        }
    }

    protected void onPostExecute(String result) {
        msgTextField.setText(result); // clear text box
    }
} 
```

重要的变化是`msgTextField.setText("");`现在`onPostExecute()`，它接收要显示的文本`doInBackground()`。您必须在主线程上进行所有 UI 更改，也就是说，不能在`doInBackground()`.

# java - Java继承和递归

> ID：10357029
> 
> 赞同：3
> 
> 时间：2012-04-27T19:55:53.013
> 
> 标签：java, inheritance, recursion

我有一个超类和一个子类，如下所示：

```
class Tree{
 ..
 public void add(..){
 //makes a call to protected function add(..) 
 }//for client to use.
 protected TreeNode add(..){}//recursive function which calls itslef
}

class Stree extends Tree{
 //overrides the recursive add function from class Tree
 protected TreeNode add(..){
   ..
   super.add();//calls the non-recursive add function in superclass.
 }
} 
```

这里的问题是，当我`super.add()`从子类中的新 add 函数调用时，它转到`Tree.add()`. 里面`Tree.add()`。有一个调用`add()`，它调用子类中的递归 add 函数而不是 super，即`Stree.add()`，而不是`Tree.add()`导致无限循环。各位看出来问题出在哪里了吗？

这是一项家庭作业，因此我无法更改递归函数的名称。我被明确要求向递归添加函数添加功能，而不重写任何现有代码，这基本上意味着我将不得不调用原始`add()`函数。

编辑：Tree.add()//recursive 的代码。请注意，我无法修改此代码以获得我寻求的功能。

```
protected StreeNode add(StreeNode node, String value) {
        if (node == null) {
            node = new StreeNode(value);
            numElements++;
        } else if (node.data.compareTo(value) == 0) {
            // do nothing, String was already in Set
        } else if (node.data.compareTo(value) > 0) {
            node.left = add(node.left, value);      // x = change(x)
        } else {
            node.right = add(node.right, value);    // x = change(x)
        }

        return node;
    } 
```

编辑：现在我看到这是预期的行为，我该如何实现以下目标：

1.  使用原始递归添加值`add()`
2.  实现额外的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:11:17.437

在没有看到参数的情况下，我假设`void add(...)`是将某些东西添加到树中的方法，而受保护的递归方法会查找要添加到的节点，然后执行添加。

我进一步假设公共非递归方法将树的根作为开始参数传递给递归方法，而递归方法传递左子或右子直到你碰到叶子。因此，调用非递归方法可能会一次又一次地从根开始。

因此，我会说递归和继承方法不应该调用非递归版本，而应该再次调用自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:04:37.347

行。这是随机的，可能没有多大意义。

在您的评论中，它说您的 Tree.add 是递归的，而 STree.add 是递归的：

创建受保护的方法 Tree.addCommon(..)，它不递归，只做需要做的事情。

Tree.add(..) 调用 addCommon(..)，然后 this.add(..) 进行递归。

STree.add(..) 它是额外的东西，调用 super.addCommon(..) 来获取常见的东西，然后 this.add(..) 进行递归。

我知道。应该写伪代码。懒惰的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:19:15.893

如果你不能修改类，也许情况并非如此，但我认为最好的解决方案是创建另一个名为 addHelper(...) 的方法来负责递归，然后在 add(. ..） 方法。

# asp.net - DropDownList 值垂直倾斜

> ID：10357031
> 
> 赞同：0
> 
> 时间：2012-04-27T19:55:59.907
> 
> 标签：asp.net, vb.net

我有一个下拉列表，它在第二页上从单独的下拉列表选定值绑定。该数字应为“563000”，但当列表填充时，它显示为... 5 3 6 0 0 0 Vertically?? 这是我用来绑定的代码。

```
Protected Sub button1_Click(sender As Object, e As EventArgs) Handles button1.Click
Dim val1 As String = DropDownList1.SelectedValue.Substring(0, 6)
Dim val2 As String = DropDownList1.SelectedValue.Substring(0, 4)
Session("value1") = val1.ToString
Session("value2") = val2.ToString
Response.Redirect("Page2.aspx")
End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
DropDownList1.DataSource = CType(Session.Item("value1"), String)
DropDownList1.DataBind()
DropDownList2.DataSource = CType(Session.Item("value2"), String)
DropDownList2.DataBind()     
End Sub 
```

有人知道为什么我会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:06:38.443

当您将 a`String`作为 DataSource 提供给 a`DropDownList`时，它会将其解释为字符集合，将每个字符转换为生成的 HTML 中的一个项目`select`。您要做的是将值放入`List`对象中并将其作为数据源提供：

```
Dim items As New List(Of String)
items.Add(CType(Session.Item("value1"), String)
DropDownList1.DataSource = items
DropDownList1.DataBind() 
```

# mediawiki - 如何强制 MediaWiki 评估具有高优先级的函数？

> ID：10357032
> 
> 赞同：-2
> 
> 时间：2012-04-27T19:56:02.890
> 
> 标签：mediawiki, mediawiki-templates, semantic-mediawiki

我在“选择时显示”表单中的默认标签存在持久性问题。

```
<div id="test-a">

{{#show: MyPage | ?MyAttribute}}
{|class="formtable"
! A:
| {{{field|input type = text|default= {{#show SomePage | ?SomeAttribute}} }}}
|-
! B:
| {{{field|input type = text|default= {{#show SomeOtherPage | ?SomeOtherAttribute}}  }}}
|}
</div> 
```

字段默认为“{{#show SomePage | ?SomeAttribute}}”和“{{#show SomeOtherPage | ?SomeOtherAttribute}}”，而不是评估#show 命令。

无论如何，我如何强制 MediaWiki 评估 #show 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T11:08:01.663

正如 Tgr 所说，您在`:`之后缺少一些 s `#show`。修复语法，它会起作用，这不是优先级问题。

# javascript - Javascript对象继承

> ID：10357033
> 
> 赞同：5
> 
> 时间：2012-04-27T19:56:15.040
> 
> 标签：javascript, oop, object

请帮助我理解这段代码。

```
var person = {
    'first-name': 'FirstName',
    'last-name': 'LastName',
    'gender': 'Male'
};

var anotherPerson = new Object(person);
anotherPerson.desig = 'Designation';

console.log('Another person designation: ' + anotherPerson['desig'] + ', person designation: ' + person['desig']); 
```

我预计输出是，`Another person designation: Designation, person designation: undefined`但令我惊讶的是，我发现它是``Another person designation: Designation, person designation: Designation`。

据我说`anotherPerson`，扩展`person`对象和属性设置为`anotherPerson`不应该对`person`对象可见。我在这里错了吗？还是两个对象都指向同一个位置？

**[编辑]**

现在还有更多惊喜。

我在上面添加了以下代码。

```
person.place = 'XYZ';
console.log(person['place'] + ', ' + anotherPerson['place']); // Expected: XYZ, undefined. Result: XYZ, XYZ. 
```

基于上述结果和答案，我认为两个对象都指的是同一个位置。现在我又添加了几行

```
person = undefined;
console.log(anotherPerson['place']) //Expected: error, Result: XYZ. ??!?!?
console.log(person['place']) // Expected: error, Result: error. 
```

有人可以让我明白这一点吗？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:03:52.577

您没有进行扩展或任何类型的继承。

这更接近：

```
var Person = function () {
    this["first-name"] = 'FirstName',
    this["last-name"] = 'LastName',
    this["gender"] = 'Male'
};

var person = new Person();
var anotherPerson = new Person(); 
```

现在您有两个*单独*的`Person`. 如果你也想`anotherPerson`成为一个子类..

```
var Person = function () {
    this["first-name"] = 'FirstName',
    this["last-name"] = 'LastName',
    this["gender"] = 'Male'
};

var AnotherPerson = function () {
    this.desig = "Designation";
}
AnotherPerson.prototype = new Person();   // inherit from Person
AnotherPerson.prototype.constructor = AnotherPerson;  // reset constructor

var person = new Person();
var anotherPerson = new AnotherPerson();

console.log(person.desig); // undefined
console.log(anotherPerson.desig); // Designation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:02:41.123

不是一个真正的解决方案，但对我来说，这就是我克隆对象的方式，我可以扩展它：

```
var anotherPerson = new Object();
for(i in person) anotherPerson[i]=person[i]; 
```

代替

```
var anotherPerson = new Object(person); 
```

然后它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:06:26.433

该`Object`函数（注意：同样，如果你不熟悉发生的事情，更令人吃惊的是，它适用于调用`new Object(...)`）如果传递的不是布尔值、数字或字符串类型的东西，它就不会创建新对象；它只是返回已经存在的对象。（理由：因为它已经是一个对象。几乎所有东西都是 Javascript 中的一个对象。）

因此，`anotherPerson`是与 完全相同的对象`person`，所以当你修改它时，你也修改它`person`。

我并不认为这是明智的行为；但这是语言规范定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:34:30.753

如果你想扩展/继承一个对象，那么你可以做

```
var person = {
    'first-name': 'FirstName',
    'last-name': 'LastName',
    'gender': 'Male'
};
if (typeof Object.create !== 'function')
{
    Object.create=function(o)
    {
        function F(){}
        F.prototype=o;
        return new F();
    }
}
var newPerson=Object.create(person);
newPerson.age=25;
newPerson.gender="Female";

console.log(person.gender); // Male
console.log(newPerson.gender); // Female

console.log(person.age); // undefined
console.log(newPerson.age); // 25 
```

[**小提琴**](http://jsfiddle.net/qKyCL/)

**参考：** [**JavaScript 中的原型继承**](http://javascript.crockford.com/prototypal.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T22:14:10.653

JavaScript中继承实现的通用解决方案

```
function inherits(base, extension)
{
   for ( var property in base )
   {
      try
      {
         extension[property] = base[property];
      }
      catch( warning ){}
   }
} 
```

# tsql - 我应该为常见的大型连接 SQL 创建表值函数吗

> ID：10357037
> 
> 赞同：2
> 
> 时间：2012-04-27T19:56:48.163
> 
> 标签：tsql, join, sql-function, query-parameters

仅使用 SQL 几个月（到目前为止，这个地方提供了巨大的帮助，谢谢大家！）但即使我是一名初学者 DB 程序员，我已经注意到有很多大型连接，我发现自己一遍又一遍地重复。我正在考虑为常用连接创建一个表值函数，并允许将参数传递给该函数以过滤结果。

例如。而不是写

```
SELECT * 
FROM T1 join T2 on T1.A = T2.A 
        join T3 on T2.B = T3.B
        join T4 on T3.C = T4.D
WHERE T1.D = '15' AND T2.D = '20' AND T3.C = '12' 
```

我会写

```
SELECT * 
FROM dbo.SOME_FUNCTION(' T1.D = '15' AND T2.D = '20' AND T3.C = '12' ') 
```

我的问题就是这个。这是我应该尝试做的事情吗？或者我是不是因为想这样做而懒得离谱？

整天都在尝试研究/编写这个函数，并且在这样做时遇到了很多/很多问题。我知道最终我可以/将使它发挥作用，只是想知道它是否值得我花时间。

PS：对不起，如果这个问题很愚蠢，不是我想在这个网站上问的第一个问题，但这里是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:13:49.600

Table-valued functions are a nice way to avoid repetitive SELECT statements, but it isn't the only way to do so. I would put the statements in a view, because it can be indexed. You still can have your table-valued function, which selects records from the view using the parameters.

Imagine that you have the following 2 types of retrievals from your view:

1, `SELECT ... WHERE Column1 = @p1`

2, `SELECT ... WHERE Column2 = @p2 AND Column3 = @p3`

In this case you should add the matching two indices to the view

*   Column1

*   Column2 + Column3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:12:50.430

我想也许你的想法是合理的，但方法不是很理想。可能有两种体面的方法可以解决这个问题。首先是创建一个视图：

```
CREATE VIEW dbo.SOME_VIEW AS
(
    SELECT 
        -- [list out the columns here], do not use *
    FROM 
        T1 
    JOIN 
        T2 on T1.A = T2.A 
    JOIN 
        T3 on T2.B = T3.B
    JOIN 
        T4 on T3.C = T4.D
) 
```

有了这个，您的查询是：

```
SELECT * FROM SOME_VIEW
WHERE ... 
```

函数方法可以工作，但我会将函数更改为接受三个参数，而不是您在示例中显示的单个字符串方法，以便您改为这样做：

```
SELECT * FROM dbo.SOME_FUNCTION('15', '20', '12') 
```

同样，根据您访问数据的方式，存储过程可能更合适：

```
EXEC dbo.spSomeStoredProcedure @T1D = '15', @T2D = '20', @T3C = '12' 
```

**编辑：**表值函数和存储过程都应该使用上面的视图。

# java - Jersey POST 方法正在接收空值作为参数

> ID：10357041
> 
> 赞同：13
> 
> 时间：2012-04-27T19:57:18.813
> 
> 标签：java, json, rest, post, jersey

我正在使用 Jersey 开发 RESTful 服务，它适用于 GET 方法。但是我不能让它与 POST 方法和 JSON 或文本参数一起工作。这就是我所做的：

```
@Path("/method/")
@POST
@Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN})
@Produces({MediaType.APPLICATION_JSON})
public ResponseObject method(@Context Request request, @PathParam("ob1") Object obj1, @PathParam("obj2") String obj2) {
...
} 
```

我只得到所有参数的空值。我试图只使用一个字符串作为参数，但它也不起作用......我试图从 IOS 访问这些方法，也许这就是问题之一。但是我一直在嗅探我的局域网，我可以在数据包正文中看到正确的参数......这是正确的吗？

我从 XCode 发送了不同的正文内容：

```
obj1={"id1": "value1", "id2" : "value2"}&obj2=xxxx 
```

和：

```
{"id1": "value1", "id2" : "value2"},xxxx 
```

虽然我一直在玩 @QueryParam 和 @PathParam 没有结果......总是为空......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-28T05:58:43.120

路径参数是与特定模式匹配的请求 URL 的一部分。因此，对于可以指定为路径参数的内容存在字符限制 - 特别是任何特殊字符都需要进行 URL 编码。这适用于任何类型的请求（*GET*、*POST*、*PUT*、*DELETE*）。

作为一般规则，您应该将路径参数限制为简单的值，例如标识符或资源端点——更复杂的数据应该通过请求参数或请求主体本身传递给 REST 服务。这是一种混合方法，将实体标识符作为路径参数传递，并在请求正文中传递实体数据：

```
@Path("/contacts/{id}")
@PUT
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response updateContact(@PathParam final String contactId, Contact contact) {
} 
```

在上面的示例中，*contactId*作为路径参数获取，并且联系人是从请求正文中自动序列化的。

我上面描述的是***一般***规则。现在关于您的案例的细节，我在您的代码中注意到的一件事是您实际上没有定义任何路径参数。请记住，它们必须被定义为`@Path`注释的一部分，然后才能在 REST 方法中使用：

```
@Path("/method/{obj1}/{obj2}")
public ResponseObject method(@Context Request request, @PathParam("obj1") Object obj1, @PathParam("obj2") String obj2) {
} 
```

通过上述更改，您的参数不应再显示为空，假设您已在客户端正确编码 URL。

* * *

*** 编辑 ***

根据您的评论，我认为您需要更加熟悉 JAX-RS 规范和各种参数类型。我建议通读[RESTEasy JAX-RS 文档](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html)。它有一些特定于供应商的实现细节，但总而言之，它是 JAX-RS 的优秀指南。

* * *

### @PathParam

***目的***：用于将请求 URL 的一部分注入到变量中。请注意，URL 参数*不*被视为 URL 的一部分。

***示例***：给定 URL *[http://services.example.com/contacts/20578](http://services.example.com/contacts/20578)*，我可以定义：

```
@Path("/contacts/{id}") 
```

我可以从中注入一个`@PathParam("id")`.

```
public Response getContact(@PathParam("id") final String identifier); 
```

这适用于*任何*类型的 HTTP 请求（*GET*、*POST*、*PUT*、*DELETE*）。

* * *

### @QueryParam

***目的***：用于将查询字符串的一部分或将编码数据形成一个变量。查询字符串是 URL 中`?`. *当请求类型为application/x-www-form-urlencoded*时，表单编码数据是在 HTTP 请求正文中传递的 URL 编码名称/值对数据。通常，查询参数作为 GET 请求的 URL 字符串的一部分传递，而在 POST 请求的请求正文中传递。

示例：给定 URL [http://services.example.com/contacts?group=Business](http://services.example.com/contacts?group=Business)，我可以注入一个`@QueryParam("group")`

```
public Response getContactsInGroup(@QueryParam("group") final String groupName); 
```

在 POST 请求中使用查询参数是不典型的，但如果请求类型是*application/x-www-form-urlencoded*则可以：

```
@POST
@Path("/contacts")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public Response createContact(@QueryParam("contact") final Contact contactData, @QueryParam("metadata") final String metaData); 
```

这些只是高级示例，请通读我链接的[文档](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#_PathParam)以更好地了解每种参数类型如何工作以及何时使用哪一种。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T09:57:31.110

我刚开始在 java 中开发 webservice，并且在 POST 数据方面遇到了同样的问题。我得到了使用 @FormParam 读取 POST 数据的非常简单的解决方案[，](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#_FormParam)实际上我使用[@QueryParam](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#_QueryParam)读取 POST 数据，我认为它仅用于使用 GET 方法读取 QueryString 数据

这里给出了一个非常好的文档。读完这篇文章，我的大部分困惑都被清除了。 [http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html)

提示：只需确保在使用 @FormParam 时使用“application/x-www-form-urlencoded”mime 类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-09T21:46:11.613

我会将其作为对已接受答案的评论发布，但我只是不好意思这样做。

除了上述出色的建议之外，我还要补充一点，至少在 2.0.x 版本中，Jersey 不会`@FormParam` 从查询字符串中提取。相反，它希望将其作为名称-值对包含在请求正文中。

例如`POST http://localhost/app?name=Joe`，您将 `POST http://localhost/app` 使用正文发送而不是 ：

```
name=Joe 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-09T22:30:31.137

假设我们有一个`tenant`具有`id`和`name`属性的对象，REST 资源通过 `@POST`和公开`@PATH("/xyz/tenants")`。

JSON 中的正文示例：

```
{"id":"001","name":"myname"} 
```

XML 中的正文示例：

```
<tenant><id>001</id><name>myname</name></tenant> 
```

# java - Libgdx：手机的后退按钮在屏幕之间继续

> ID：10357042
> 
> 赞同：5
> 
> 时间：2012-04-27T19:57:19.470
> 
> 标签：java, input, libgdx

我有三个实现 LibGdx Screen 类的类：

MainMenuScreen、LevelSelectScreen、GameScreen

现在我将 MainMenuScreen 的 setCatchBackKey 设置为 false，所以游戏只会在按下后退出。

LevelSelectScreen 和 GameScreen 已将 setCatchBackKey 设置为 true。

在 GameScreen 的渲染函数中，我有：

```
@Override
public void render(float delta)
{
    gameTime = delta;

    if (Gdx.input.isKeyPressed(Keys.BACK))
       new LevelSelectScreen(game);

    ...
} 
```

它将屏幕设置为显示级别选择，并且在 LevelSelectScreens 的渲染功能中我有：

```
@Override
public void render(float delta)
{
    if (Gdx.input.isKeyPressed(Keys.BACK))
        new MainMenuScreen(game);

    Update();
    Draw();
} //end render 
```

我遇到的问题是，当我按回 GameScreen 时，LevelSelectScreen 会在屏幕上闪烁片刻，然后直接回到 MainMenuScreen。

我想我可以设置一些变量来检查屏幕初始化时是否已经按下 Back，但只是好奇 LibGdx 中是否已经包含一些“神奇”功能，或者只是代码结构也可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T23:14:14.990

首先扩展 Stage 类，如下所示：

```
public static class MyStage extends Stage{
    public MyStage(float width, float height, boolean keepAspectRatio, SpriteBatch batch){
        super(width, height, keepAspectRatio, batch);
    }       
    @Override
    public boolean keyDown(int keyCode) {
        if(keyCode==Keys.BACK||keyCode==Keys.MENU){
            if(getHardKeyListener()!=null)
                getHardKeyListener().onHardKey(keyCode, 1);
        }           
        return super.keyDown(keyCode);
    }
    @Override
    public boolean keyUp(int keyCode) {
        if(keyCode==Keys.BACK||keyCode==Keys.MENU){
            if(getHardKeyListener()!=null)
                getHardKeyListener().onHardKey(keyCode, 0);
        }
        return super.keyUp(keyCode);
    }   

    /*********************Hard key listener***********************/
    public interface OnHardKeyListener{
        /**
         * Happens when user press hard key 
         * @param keyCode Back or Menu key (keyCode one of the constants in Input.Keys)
         * @param state 1 - key down, 0 - key up  
         */
        public abstract void onHardKey(int keyCode, int state);
    }
    private OnHardKeyListener _HardKeyListener = null;  
    public void setHardKeyListener(OnHardKeyListener HardKeyListener) {
        _HardKeyListener = HardKeyListener;
    }       
    public OnHardKeyListener getHardKeyListener() {
        return _HardKeyListener;
    }
} 
```

然后在你的`Screen`课上：

```
protected final MyStage stage;
public YourScreen(Game game)
{
    this.game = game;   
    stage = new MyStage(Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), true, game.spriteBatch);                    

    Gdx.input.setInputProcessor(stage);  
    //prevents the app from being pause...      
    Gdx.input.setCatchBackKey(true);
    Gdx.input.setCatchMenuKey(true);

    //Sets hard key listener...
    stage.setHardKeyListener(new OnHardKeyListener() {          
        @Override
        public void onHardKey(int keyCode, int state) {
            if(keyCode==Keys.BACK && state==1){
                //do something      
            }       
        }
    });
} 
```

希望它可以帮助您或其他正在寻找这些东西的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T22:46:16.163

您可以实现 InputProcessor 接口，而不是使用 Gdx.input.isKeyPressed(int)。

InputProcessor 的文档：http: [//libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/InputProcessor.html](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/InputProcessor.html)

不要忘记注册您的 InputProcessor 以接收输入事件，使用： Gdx.input.setInputProcessor(InputProcessor);

对于这种特殊情况，请使用[keyDown](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/InputProcessor.html#keyDown%28int%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:43:00.713

我使用一个 Activity 类，它为我拥有的每个屏幕扩展“AndroidApplication”类，例如 LevelSelectActivity、MainMenuActivity 和 GameActivity。在这些类中的每一个中都有一个“屏幕”扩展类对象，就像您拥有的类一样，暂停、恢复和返回键等事件的控制是 Activity 类而不是屏幕类的职责。当需要返回时，只需调用例如 GameActivity 类中的“finish()”方法。它会自动转到 SelectLevelActivity。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T11:22:49.907

我所做的是存储最后一次按下后退键的时间，如果只是最近就不要对其做出反应。

# sql - SQL插入一行重复行

> ID：10357050
> 
> 赞同：1
> 
> 时间：2012-04-27T19:57:44.470
> 
> 标签：sql, duplicate-removal

从此表：

`DECLARE @tmp TABLE (id int, ahccs int, info varchar(25), endDate date)`

```
5   123 et  2012-09-15
2   321 et  2012-04-27
2   321 et  2012-04-27
2   321 et  2012-04-27
3   134 et  2012-04-27 
```

我怎么能只将这些值插入另一个表

```
5   123 et  2012-09-15
2   321 et  2012-04-27
3   134 et  2012-04-27 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:00:15.947

使用不同的**关键字**：

```
Create table TableName AS (Select Distinct [id] as id, [ahccs] as ahccs, [info] as info, [endDate] as endDate From Table_Name) 
```

# python - 将 Tkinter 与文本游戏一起运行？

> ID：10357058
> 
> 赞同：0
> 
> 时间：2012-04-27T19:58:29.633
> 
> 标签：python, user-interface, tkinter

如何允许从 IDLE 命令行上的文本输入更新图形？如果我有类似的东西：

```
from Tkinter import *

root = Tk()
can = Canvas(root, height=500, width=100)
can.pack()
mainloop()

x = input("what is a number? ")
print x 
```

该窗口将出现，但命令行上的提示不会出现。关于我如何允许这样做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:25:47.793

我建议只使用 tkinter 的小部件。

```
import Tkinter as tk

def numEntered(*args):
    print x.get()
    x.set('')
    return

root = tk.Tk()
can = tk.Canvas(root, height=500, width=100)
can.pack()

inputFrame=tk.LabelFrame(root, text="What is a number?")
inputFrame.pack()

x=tk.StringVar()
inputEntry=tk.Entry(inputFrame,textvariable=x)
inputEntry.pack()

inputEntry.bind('<Return>',numEntered)

tk.mainloop() 
```

请注意几项：1）我将文本条目放在标签框架中，这在您使用包几何管理器时会有所帮助。2）当用户输入一个数字并按下回车键时，我使用了bind方法来执行该功能。3) 函数打印数字然后清除变量。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:15:20.970

如果它只是用于调试或一次性配置/输入，您可以将其作为命令行参数传递给您的程序，或者将提示代码放在 mainloop() 调用之前的任何位置。另一方面，如果它是对游戏的持续输入，您应该在主窗体中添加一个文本输入字段和一个按钮，以便用户可以输入数据并按下按钮以指示他们何时完成输入并拥有一个事件处理程序绑定到按钮处理输入字段的内容。

如果以上都没有多大意义，请查看[TkDocs](http://www.tkdocs.com/index.html)站点，该站点有很多关于 Tk 的有用信息，包括如何在 Python（以及其他语言）中进行所有调用的代码示例。

# jquery - Jquery 事件日历

> ID：10357060
> 
> 赞同：-2
> 
> 时间：2012-04-27T19:58:43.920
> 
> 标签：jquery, html

我需要一点帮助并为工作提供便利。我需要创建一个带有突出显示事件的简单日历。是否有一个 jQuery 插件，这将是最简单的方法？

![日历](../Images/ab5f7d040c23e395340d6f7bd7099a53.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:07:03.053

我是[Kalendae](https://github.com/ChiperSoft/Kalendae)的忠实粉丝，它甚至不需要 jQuery 来工作。

这是一个演示：[http ://chipersoft.github.com/Kalendae/](http://chipersoft.github.com/Kalendae/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:02:37.673

是的，[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:06:29.030

这些似乎并不完全是您所需要的，但如果您找不到最合适的，它们可能有助于创造您需要的东西......

jQuery UI 日期选择器：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

Adam Shaw 的 FullCalendar：[http ://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

# jquery - 根据父 div 的尺寸定位图像叠加层

> ID：10357071
> 
> 赞同：0
> 
> 时间：2012-04-27T19:59:39.523
> 
> 标签：jquery, hover, jquery-animate, overlay, dimensions

我有一个动画图像叠加层，我试图根据叠加层父 div 的高度进行定位。父 div 的尺寸是动态创建的。

我目前使用的代码：

```
jQuery('.parentdiv').hover(function(){
jQuery(".overlaydiv", this).stop().animate({"opacity": "0.95", top:'0px'},{queue:false,duration:500});
}, function() {
jQuery(".overlaydiv", this).stop().animate({"opacity": "0.95", top: '185px'},{queue:false,duration:500});
}); 
```

我想知道的是如何计算外部 div 的高度，然后将其应用于我现有的代码。具体来说，我需要将 185px 替换为当时父 div 的高度。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:04:48.757

`outerHeight()`在 JQuery ( [Source](http://api.jquery.com/outerHeight/) ) 中尝试：

```
top: $(this).outerHeight(true) //specfiy true because we want to include margins 
```

**编辑：虽然，如果您想将孩子垂直放置在父母*之后，请尝试：***

```
top: $(this).outerHeight(true) + $(this).position().top 
```

# php - 如何在一个查询中使用这两个选择查询

> ID：10357073
> 
> 赞同：0
> 
> 时间：2012-04-27T19:59:50.943
> 
> 标签：php, mysql

```
$rget_comments  = mysql_query("SELECT DISTINCT comment.id, comment.comment_name, comment.comment_body FROM rs_comments AS comment WHERE comment.comment_parent ='0' ORDER BY comment.id ASC");
while( $get_comment = mysql_fetch_array( $rget_comments ) )
{

    echo '+ <a href="comment.php?id=' . $get_comment['id'] . '">' . $get_comment['comment_name'] . '</a><br />';
    echo $get_comment['body'] . '<br />';

    $rget_comments  = mysql_query("SELECT DISTINCT 
    (sub_comment.id) AS sub_id, (sub_comment.comment_name) AS sub_comment_name, (sub_comment.comment_body) AS sub_comment_body 
    FROM rs_comments AS sub_comment WHERE sub_comment ON sub_comment.comment_parent = '1'");
    while( $get_comment = mysql_fetch_array( $rget_comments ) )
    {

        echo '- <a href="comment.php?id=' . $get_comment['sub_id'] . '">' . $get_comment['sub_comment_name'] . '</a><br />';
        echo $get_comment['sub_body'] . '<br />';
    }

} 
```

我的餐桌信息：

```
CREATE TABLE IF NOT EXISTS `rs_comments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `comment_type` varchar(255) NOT NULL,
  `comment_post_ID` int(11) NOT NULL,
  `comment_parent` int(11) NOT NULL,
  `comment_name` varchar(128) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `comment_body` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

INSERT INTO `rs_comments` (`id`, `comment_type`, `comment_post_ID`, `comment_parent`, `comment_name`,`comment_body`) VALUES
(1, 'post', 1, 0, 'test comment', 'test comment body'),
(2, 'post', 1, 0, 'test comment 2', 'test comment 2 body'),
(3, 'post', 1, 1, 'sub comment 1', 'sub comment 1 body'),
(4, 'post', 1, 1, 'sub comment 2', 'sub comment 2 body'); 
```

我有一个查询，但只会返回第一行：

```
 $rget_comments    = mysql_query("
    SELECT DISTINCT 
    comment.id, comment.comment_name, comment.comment_body, (sub_comment.id) AS sub_id, (sub_comment.comment_name) AS sub_comment_name, (sub_comment.comment_body) AS sub_comment_body
    FROM rs_comments AS comment
    LEFT OUTER JOIN rs_comments AS sub_comment ON sub_comment.comment_parent = comment.id
    WHERE  comment.comment_parent ='0' 
    GROUP BY comment.id
    ORDER BY comment.id ASC");
    while( $get_comment = mysql_fetch_array( $rget_comments ) )
    {
        echo '+ <a href="comment.php?id=' . $get_comment['id'] . '">' . $get_comment['comment_name'] . '</a><br />';
        echo $get_comment['body'] . '<br />';

        echo '- <a href="comment.php?id=' . $get_comment['sub_id'] . '">' . $get_comment['sub_comment_name'] . '</a><br />';
        echo $get_comment['sub_body'] . '<br />';
    } 
```

结果：

```
+test comment
test comment 1 body
-sub comment 1
sub comment 1 body
+test comment 2
test comment 2 body 
```

预期结果：

```
+test comment 
test comment 1 body 
-sub comment 1 
sub comment 1 body 
-sub comment 2
sub comment 2 body 
+test comment 2
test comment 2 body 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:09:44.907

`GROUP BY comment.id`导致这个问题。`GROUP BY`将具有相同 id 和不同 sub_id 的两条记录分组为一个。像这样删除它：

SQL：

```
SELECT DISTINCT 
    comment.id, comment.comment_name, comment.comment_body, (sub_comment.id) AS sub_id, (sub_comment.comment_name) AS sub_comment_name, (sub_comment.comment_body) AS sub_comment_body
    FROM rs_comments AS comment
      LEFT OUTER JOIN rs_comments AS sub_comment ON sub_comment.comment_parent = comment.id
    WHERE comment.comment_parent ='0' 
    ORDER BY comment.id ASC 
```

PHP：

```
$flag = array();
while( $get_comment = mysql_fetch_array( $rget_comments ) ) {
  if(!isset($flag[$get_comment['id']])) {
      echo '+ <a href="comment.php?id=' . $get_comment['id'] . '">' . $get_comment['comment_name'] . '</a><br />';
      echo $get_comment['body'] . '<br />';
      $flag[$get_comment['id']] = true;
  }
  if($get_comment['sub_id']) {
      echo '- <a href="comment.php?id=' . $get_comment['sub_id'] . '">' . $get_comment['sub_comment_name'] . '</a><br />';
      echo $get_comment['sub_body'] . '<br />';
  }
} 
```

# c# - DataGrid 行标题不与内容对齐

> ID：10357077
> 
> 赞同：1
> 
> 时间：2012-04-27T20:00:00.910
> 
> 标签：c#, wpf, datagrid, text-alignment

我有一个 WPF DataGrid，并且行标题没有与内容垂直对齐。知道为什么吗？ ![在此处输入图像描述](../Images/9ef32377ea0e055085ebaf3666f6e8bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:38:43.267

似乎 RowHeaders 默认为 VerticalAlignment = Center，而 TextBlock 默认为 Top。它们彼此之间仍然有些偏差，但是一旦我更改了该属性，它对我来说就足够近了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:05:37.633

您是否尝试过将行高设置为当前大小的两倍？它可能会指出您为它们设置了不同的对齐/填充属性:) 只是一个建议 :) 是的，代码会很有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:05:45.253

我相信默认情况下，行标题是这样对齐的。您应该能够通过以下方式说出您想要的对齐方式：

```
yourDataDrid.RowHeaderStyle.BasedOn = yourDataDrid.CellStyle; 
```

# sql - SQL 中的循环和数组

> ID：10357084
> 
> 赞同：1
> 
> 时间：2012-04-27T20:00:40.250
> 
> 标签：sql, oracle

我有一个名为**SOURCE_TAG**的表，我想在其中插入一个数据，其中所有插入语句仅在其中一列中有所不同（此列是名为**SOURCE_LU**的表中的主键 id ）。但是，要获得列的 id，我还应该做一些工作。

以下列表包含**stringKeys列表（** **SOURCE_LU**中的一列）所以首先，我应该像下面的 Oracle SQL 中的伪代码一样思考

```
stringKeys= {"foo","bar","foobar","barfoo",...,"etc"}
for(each s in StringKeys) {

SELECT SOURCE_LU where stringKeys=s and Store the id in a list (lets say idList)

} 
```

在获得 id 列表后，将每个 id 插入到 SOURCE_TAG 中，每行的其他类似数据

```
for (each id in listId ){
  INSERT INTO SOURCE_TAG values (x,y,id)

} 
```

对不起，我是一个几乎没有 SQL 知识的 Java 人。那么在 Oracle SQL 中应该如何使用数组和循环呢？解决方案越简单越好。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:06:24.403

SQL 本身没有循环，但 Oracle 有一种称为 PL/SQL 的过程语言可供您使用。它有循环、条件、变量和其他你可能习惯的东西。

但是，我认为您要完成的工作可以在常规 SQL 中完成。请注意，我已经很多年没有使用过 Oracle 安装了，现在也无法访问，但是在 PostgreSQL 中，您可以执行以下操作：

```
INSERT INTO SOURCE_TAG
(YEAR_ID,SOURCE_TAG_LU_ID,PRIORITY_ORDER,STATUS_EN,SOURCE_LU_ID)
select 4 as year_id, 2 as source_tag, 1000 as priority_order, 'ACTIVE' as status_en, id
from source_lu
where stringkeys in ('foo', 'bar', ...)
group by year_id, source_tag, priority_order, status_en, id; 
```

可能`group by id`在最后一行就足够了。

# groovy - 扩展 Groovy 字符串类

> ID：10357092
> 
> 赞同：6
> 
> 时间：2012-04-27T20:01:41.373
> 
> 标签：groovy, template-engine, frontend, extend

Groovy 允许在前端页面中使用字符串做一些好事，例如：

`${"hello".capitalize()}`

如何向`String`类添加新的自定义方法？像：

`${"hello".custom()}`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T20:08:30.807

使用元类

```
String.metaClass.custom = { //dosomething } 
```

请参阅[http://www.groovyexamples.org/2010/07/19/dynamically-add-properties-to-a-class/](http://www.groovyexamples.org/2010/07/19/dynamically-add-properties-to-a-class/)

# localization - 波斯语中的 Facebook 赞框 - 赞按钮上的边距错误

> ID：10357094
> 
> 赞同：0
> 
> 时间：2012-04-27T20:02:03.400
> 
> 标签：localization, facebook-likebox

在我的网站 www.bazarak.af 中，我有一个点赞框，但点赞按钮中的竖起大拇指图标位置不正确。它实际上隐藏了一个字符。

怎么了？以及如何解决？

图片： ![在此处输入图像描述](../Images/2a476aea1da08404b8617b4de1b1d99c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:05:00.200

问题在于你的CSS。可能您隐藏了溢出并固定了按钮大小。

# ruby-on-rails - 将文件上传到 Rails 应用程序 - 设计类以避免代码重复的方法

> ID：10357099
> 
> 赞同：0
> 
> 时间：2012-04-27T20:02:54.403
> 
> 标签：ruby-on-rails, file-upload

我需要编写代码，使用户能够通过我的 rails 应用程序将照片或 csv 文件从他们的计算机上传到服务器上的文件夹。我是新手，一直在网上看教程来做到这一点。我见过很多方法，所以我不确定哪种方法最适合我的情况：

在我的应用程序中，会有不同类型的用户，例如访问者、成员、管理员。只有成员和管理员才能上传文件。我还没有实现身份验证，但最终会这样做。我试图了解这种情况下的控制器和模型是什么：我在想：1）成员模型、成员控制器和成员视图 2）管理员模型、管理员控制器和管理员视图

既然管理文件的功能对两者都是通用的，那该去哪里呢？我需要 file_upload 模型、file_upload_controller 和 file_upload 视图吗？

任何与此场景类似的教程？似乎是一件很常见的事情......我找不到太多关于它的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:32:28.290

我实际上只会创建一个模型，成员，并为其赋予一个属性来区分不同类型的用户——包括管理员。我会保持简单。

另外，我会推荐 Paperclip 来处理文件上传。

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

即使您使用两个独立的实体（成员和管理员），您也可以轻松地将文件上传功能插入到它们中。

# django - 如何获取当前在 Django 管理站点中的用户的用户权限

> ID：10357101
> 
> 赞同：0
> 
> 时间：2012-04-27T20:02:56.613
> 
> 标签：django

我有某些字段，我只想在某些管理员位于管理站点时向他们显示。我正在考虑使用`list_display`来执行此操作，但首先需要找出一种方法来确定当前正在查看管理站点的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:05:59.207

除非您到处传递请求对象，否则解决方案通常是使用线程本地存储和一些更新每个请求的值的中间件。

[http://djangosnippets.org/snippets/2179/](http://djangosnippets.org/snippets/2179/)

# javascript - 如何确定可见 jqGrid 网格的 ID？

> ID：10357106
> 
> 赞同：1
> 
> 时间：2012-04-27T20:03:51.393
> 
> 标签：javascript, jquery, jqgrid, visible

我有一个带有多个 jqGrids 的页面，但一次只能看到一个。我想要一个简单的函数来返回随时可见的函数。是否有这样的功能，可以显示哪些 div 是可见的：

```
$('div').each(function(){
    if($(this).is(':visible')){
        alert($(this).attr('id'));
    }
}); 
```

有没有这样的东西可以解析页面上的所有 jqGrids？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:13:39.330

您可能需要以下内容

```
$("table.ui-jqgrid-btable:visible").attr('id'); 
```

如果桌子上没有网格，您将获得`undefined`价值。如果多个网格可见，您将获得第一个网格的 id。

要拥有所有可见网格的 id 数组，您可以使用以下代码

```
var ids = $.map($("table.ui-jqgrid-btable:visible"), function(value) {
        return value.id;
    });
// now we have all ids in the array
alert(ids.join()); // display all as comma-separated 
```

`grid`您可以通过对expandos的测试使上述代码更安全：

```
var ids = $.map($("table.ui-jqgrid-btable:visible"), function(value) {
        if (value.grid) { return value.id; }
    });
// now we have all ids in the array
alert(ids.join()); // display all as comma-separated 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:09:30.250

据我所见，所有网格都用 div 类包裹`ui-jqgrid`。所以试试下面的东西，

```
$('div.ui-jqgrid:visible').each(function () {
   alert(this.id); //above would return the gview_<table_id> or gbox_<table_id> or 
                   //something_<table_id>
   alert($(this).find('.ui-jqgrid-btable').attr('id')); //should return table_id
}); 
```

# javascript - 循环遍历 json 子对象并对每个“元素”做一些事情

> ID：10357108
> 
> 赞同：0
> 
> 时间：2012-04-27T20:03:52.510
> 
> 标签：javascript, arrays, json, html-table, row

我是 json 数组/对象的新手。我正在尝试访问 .json 文件中的一些子对象。我已经尝试过这里的建议，但我不断得到“未定义”的结果。这是.json——

```
{
  "DACcourses": [
    {
       "longTitle": "<a href='#'>Ammo-29 Electrical Explosives Safety for Naval Facilities</a>",
      "longDescript": "ammo-29.html",
      "atrrsLink": "Win 95+",
      "delMeth": "standard",
      "sked": [
        {
         "classNumb": "926",
          "startDate": "4/16/2012",
          "endDate": "4/20/2012",
          "location": "NMC Fort Worth, TX",
          "status": "scheduled",
          "emptySeats": "Availability"
        },
        {
          "classNumb": "001",
          "startDate": "6/4/2012",
          "endDate": "6/8/2012",
          "location": "McAlester, OK",
          "status": "scheduled",
          "emptySeats": "Availability"
        },
        {
          "classNumb": "920",
          "startDate": "6/18/2012",
          "endDate": "6/22/2012",
          "location": "Belle Chasse, LA",
          "status": "scheduled",
          "emptySeats": "Class Full"
        }
      ]}
]} 
```

我一定是在做一些根本错误的事情。所以这是我的代码。最后，我试图从每个“sked”对象中构建表格行。但是我无法在控制台中显示单个数据元素。这是我的尝试：

```
$('#content').on("click", "#catList tbody tr", function() {
                    var aData = oTable.fnGetData( this );
                    console.log( aData );
                    var scheduleData = aData.sked;
                    var catLink = 'catalog/' + aData.longDescript;
                    $('#fullDescript').load(catLink, function() {
                        if (!$('#fullDescript #offerings')) {
                            $('.enrollBTN').hide();
                        };

                        if ($(scheduleData).length > 0) {
                            $(scheduleData).each(function() {
                                for(var i = 0; i < scheduleData.length; i++) {
                                    /*var startDate = aData.sked.startDate[2];
                                    var endDate = aData.sked.endDate[3];
                                    var location = aData.sked.location[4];
                                    var classNumb = aData.sked.classNumb[1];
                                    var status = aData.sked.status[5];
                                    var emptySeats = aData.sked.emptySeats[6];*/
                                    //var item = scheduleData[i];
                                    console.log( aData.sked.startDate[2] );
                                    var html = "<tr>";
                                        html += "<td>" + item.classNumb + "<\/td>";
                                        //console.log( aData.sked[1].classNumb );
                                        /*html += "<td>" + scheduleData.endDate + "<\/td>";
                                        html += "<td>" + scheduleData.location + "<\/td>";
                                        html += "<td>" + scheduleData.classNumb + "<\/td>";
                                        html += "<td>" + scheduleData.status + "<\/td>";
                                        html += "<td>" + scheduleData.emptySeats + "<\/td>";*/
                                        html += "<\/tr>";
                                        //return scheduleData;
                                    };
                                $('#schedule tbody').append($(html));
                            });
                        };
                    });

                    $('#content').hide();
                    $('#fullDescript').show();
                }); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:17:17.550

似乎您只需要**each**或**for**循环，但不需要两者。看起来是否使用**item = scheduleData[i]**也存在一些混淆。试试这个：

```
if ($(scheduleData).length > 0) {
    for(var i = 0; i < scheduleData.length; i++) {
        var item = scheduleData[i];
        var html = "<tr>";
        html += "<td>" + item.endDate + "</td>";
        // ... etc
        html += "</td>";
    }
} 
```

就像 PS 一样，我建议您研究像[Mustache.js](https://github.com/janl/mustache.js)这样的 JS 模板工具。这将允许您将数据与显示模板分开，因此您可以消除解析代码。它看起来像这样：

```
var template = "{{#sked}}<tr><td>{{endDate}}</td><td>{{location}}</td></tr>{{/sked}}";
var html = "<table>" + Mustache.render(template, aData) + "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:25:10.550

> 我一定是在做一些根本错误的事情

是的，你是。

使用循环时，您通过关键字`.each`引用当前元素。`this`所以你不需要`for`循环。或者，如果您想要`for`循环，则不需要`.each`循环。在我看来，使用`for`循环。`.each`在这种情况下只是一个开销。

**更新：** @dbaseman 为您提供了您所需要的 :)

**更新 2**：请尝试以下代码。与 dbaseman 基本相同，但 dbaseman 的代码片段错过了关闭`<tr>`元素。

```
if ($(scheduleData).length > 0) {
    for(var i = 0; i < scheduleData.length; i++) {
        var item = scheduleData[i];
        var html = "<tr>";
        html += "<td>" + item.endDate + "</td>";
        // ... etc
        html += "</tr>"; // should close the <tr> here
    }
} 
```

# android - Android SQLite INSERT 导致应用程序崩溃

> ID：10357109
> 
> 赞同：1
> 
> 时间：2012-04-27T20:04:06.193
> 
> 标签：android, sqlite, insert, crash

我正在尝试将一些数据插入到我创建的表中。我有这堂课：

```
public class DataBase extends SQLiteOpenHelper {
private static final String DB_NAME = "db_mydatabase";
private static final int DB_VERSION = 1;

private static final String TBL_USERS = "users";
private static final String TBL_USERSE_CREATE = "CREATE TABLE IF NOT EXISTS "
                            + TBL_USERS + "(id integer PRIMARY KEY AUTOINCREMENT, "
                            + "usr varchar(128) NOT NULL UNIQUE, psw varchar(512));";

public DataBase(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

public List<String> GetUsersList() {
    List<String> users = new ArrayList<String>();
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor c = db.rawQuery("SELECT id, usr FROM " + TBL_USERS, null);
    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String firstName = c.getString(c.getColumnIndex("USR"));
                users.add(firstName);
                } while (c.moveToNext());
        }
    }
    return users;
}

public void CreateNewUser(String username, String password) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.execSQL("INSERT INTO " + TBL_USERS + " (usr, psw) VALUES ('" + username + "', '" + password + "')");
            //If I comment this line, it doesn't crashes anymore, but I don't see why
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(TBL_USERSE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TBL_USERS);
    onCreate(db);
} 
```

}

因此，当我按下 REGISTER 按钮时，EditText 中的用户名和密码将发送到 CreateNewUser。我的 Activity 类如下所示：

```
public class RegisterActivity extends Activity {
List<String> values;
DataBase dtb;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    ListView listView = (ListView) findViewById(R.id.listView1);

    dtb = new DataBase(MainActivity.MainContext);
    values = dtb.GetUsersList();

    listView.setAdapter(new ArrayAdapter<String>(MainActivity.MainContext, R.layout.listitem, values));

    Button Create = (Button) findViewById(R.id.Create);
    Create.setOnClickListener(new View.OnClickListener() {
       public void onClick(View arg0) {
           EditText username = (EditText)findViewById(R.id.Username);
           EditText password = (EditText)findViewById(R.id.Password);
           if (username.getText().length()>0 && password.getText().length()>0) {
               if (values.indexOf(username.getText())<0) {
                   dtb.CreateNewUser(username.getText().toString(), password.getText().toString());
                   values = dtb.GetUsersList();
               }
           }
       }
    });
} 
```

}

我是 SQLite 程序员的初学者，我得到了这个可以理解的严重错误和崩溃

```
> **04-24 12:30:51.340: E/CursorWindow(7986): 对字段槽 0,-1 的错误请求。numRows = 1，numColumns = 2** 04-24 12:30:51.350：
> D/AndroidRuntime(7986): 关闭 VM 04-24 12:30:51.350:
> W/dalvikvm(7986): threadid=3: 线程以未捕获的异常退出
> (组=0x4001b188) 04-24 12:30:51.350: E/AndroidRuntime(7986):
> 未捕获的处理程序：线程主因未捕获的异常而退出
> **04-24 12:30:51.380: E/AndroidRuntime(7986): java.lang.IllegalStateException: 从行 0 col -1 获取字段槽
> 失败** 04-24 12:30:51.380: E/AndroidRuntime(7986): at
> android.database.CursorWindow.getString_native(Native Method) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.database.CursorWindow.getString(CursorWindow.java:329) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> com.bma.myagenda.DataBase.GetUsersList(DataBase.java:32) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> com.bma.myagenda.RegisterActivity$1.onClick(RegisterActivity.java:46)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.View.performClick(View.java:2364) 04-24 12:30:51.380:
> E/AndroidRuntime(7986): 在
> android.view.View.onTouchEvent(View.java:4179) 04-24 12:30:51.380:
> E/AndroidRuntime(7986): 在
> android.widget.TextView.onTouchEvent(TextView.java:6541) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.View.dispatchTouchEvent(View.java:3709) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> android.app.Activity.dispatchTouchEvent(Activity.java:2061) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> android.view.ViewRoot.handleMessage(ViewRoot.java:1691) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.os.Handler.dispatchMessage(Handler.java:99) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> android.os.Looper.loop(Looper.java:123) 04-24 12:30:51.380:
> E/AndroidRuntime(7986): 在
> android.app.ActivityThread.main(ActivityThread.java:4363) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> java.lang.reflect.Method.invokeNative(Native Method) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> java.lang.reflect.Method.invoke(Method.java:521) 04-24 12:30:51.380:
> E/AndroidRuntime(7986): 在
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
> 04-24 12:30:51.380: E/AndroidRuntime(7986): 在
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 04-24
> 12:30:51.380: E/AndroidRuntime(7986): 在
> dalvik.system.NativeStart.main（本机方法）

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:09:52.217

尝试用以下代码替换您的插入代码：

```
public void CreateNewUser(String username, String password) {
    SQLiteDatabase db = this.getWritableDatabase();

ContentValues initialValues = new ContentValues();
initialValues.put(usr, username);
initialValues.put(psw, password);

db.insert(TBL_USERS, null, initialValues);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:10:07.450

改变

```
String firstName = c.getString(c.getColumnIndex("USR")); 
```

到

```
String firstName = c.getString(1); 
```

错误

```
CursorWindow(7986): Bad request for field slot 0,-1\. numRows = 1, numColumns = 2
...java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

表示您在 a 的第一行中请求索引为 -1 in 的列`Cursor`。您的代码中唯一从 a 请求数据的部分`Cursor`是`c.getString(columnIndex)`. 这意味着您获得的 columnIndex 必须是`-1`. 现在，如果您阅读[文档](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)，`Cursor.getColumnIndex`您会发现：

> 返回给定列名的从零开始的索引，如果该列不存在，则返回 -1。

这意味着没有名为 的列`"USR"`。如果您查看您的表定义，您可以看到您命名它`"usr"`。所以要修复你的错误，你可以做

```
String firstName = c.getString(c.getColumnIndex("usr")); 
```

但是（这是可选的并且可能导致错误）：由于您请求了，`Cursor`因为`SELECT id, usr FROM ..`您保证这`id`是列`0`并且`usr`是您的列`1`，`Cursor`您可以直接使用`1`。

还有其他可以改进的地方：

```
if (c != null ) {
    while(c.moveToNext()) {
        String firstName = c.getString(1);
        users.add(firstName);
    }
    c.close();
} 
```

*a）*您可以将其简化`if () do {} while ()`为简单的`while() {}`
*b）*您应该在`Cursor`不需要它时关闭它。你至少可以防止这样的警告。

您还应该`INSERT`使用 bindArgs 版本的`execSQL`. 尝试`'`在用户名中输入 a，您会发现它会按照您的操作方式崩溃。使用 bindArgs 可以防止这种情况发生，因为它会自动转义`'`.

```
db.execSQL("INSERT INTO " + TBL_USERS + " (usr, psw) VALUES (?, ?)", new String[]{ username, password }); 
```

> 如果我评论这一行，它不会再崩溃，但我不明白为什么

那是因为那`Cursor`是空的，你没有找到导致错误的代码。

最后一件事：`varchar(128)`在 SQLite 中没有影响，因为：

> 请注意，类型名称后面的括号中的数字参数（例如：“VARCHAR(255)”）会被 SQLite 忽略 - SQLite 不会对字符串、BLOB 或数值的长度施加任何长度限制。[*来源*](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:14:02.660

改变：

```
String firstName = c.getString(c.getColumnIndex("USR")); 
```

到：

```
String firstName = c.getString(c.getColumnIndex("usr"));  //USR != usr 
```

# drupal - 如何在不编码的情况下使用 Drupal 7 进行数据库查询？

> ID：10357115
> 
> 赞同：2
> 
> 时间：2012-04-27T20:04:36.040
> 
> 标签：drupal, drupal-7, drupal-views, drupal-modules

我的教授最近给我的班级分配了一项作业，我需要帮助找到这样做的工具。

我们有一个表数据库（客户、付款、订单等），我需要使用 Drupal 7 来允许用户查看客户信息、查看客户数据（即付款历史记录）或编辑客户信息。这将涉及选择语句、聚合子句、连接等。它还将涉及输入客户名称/信息的表格。

这里有一个问题：我不允许编写任何代码。这意味着没有 API，没有 SQL 查询，也没有 PHP。我只被允许使用现成的模块。

所以我的问题是：我应该使用什么模块，以及如何使用它们？

我知道视图是一个很好的起点，但视图的默认选项是针对内容的。我在数据库上有表，而不是内容。同样据我了解，视图的自定义查询需要编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:11:19.117

我相信这就是您正在寻找的：

[http://drupal.org/project/data](http://drupal.org/project/data)

如果它与 Views 模块正确集成，那么您将不需要进行任何手动编码来创建查询您的表的 View。

（免责声明：我实际上并没有使用它）

# c - C 标头问题：#include 和“未定义的引用”

> ID：10357117
> 
> 赞同：36
> 
> 时间：2012-04-27T20:04:40.143
> 
> 标签：c, gcc, header, header-files, undefined-reference

好吧，我一直在尝试使用这个最长的时间，但我似乎无法让它正常工作。我有三个文件，`main.c`,`hello_world.c`和`hello_world.h`. 无论出于何种原因，它们似乎都不能很好地编译，我真的不知道为什么......

这是我的源文件。首先 hello_world.c：

```
#include <stdio.h>
#include "hello_world.h"

int hello_world(void) {
  printf("Hello, Stack Overflow!\n");
  return 0;
} 
```

然后 hello_world.h，简单：

```
int hello_world(void); 
```

最后是 main.c：

```
#include "hello_world.h"

int main() {
  hello_world();
  return 0;
} 
```

当我把它放入 GCC 时，这就是我得到的：

```
cc main.c -o 主要
/tmp/ccSRLvFl.o：在函数“main”中：
main.c:(.text+0x5): undefined reference to `hello_world'
collect2: ld 返回 1 个退出状态
make: *** [main] 错误 1

```

任何人都可以帮助我吗？我真的坚持这一点，但我 99% 确定这是一个非常简单的解决方法。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-27T20:07:54.363

```
gcc main.c hello_world.c -o main 
```

此外，始终使用标头保护：

```
#ifndef HELLO_WORLD_H
#define HELLO_WORLD_H

/* header file contents go here */

#endif /* HELLO_WORLD_H */ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-27T20:08:10.807

您没有在编译中包含 hello_world.c。

```
 gcc hello_world.c main.c   -o main 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T20:08:43.507

您没有链接到 hello_world.c。

一个简单的方法是运行这个编译命令：

`cc -o main main.c hello_world.c`

更复杂的项目通常使用构建脚本或制作文件，将编译和链接命令分开，但上述命令（结合两个步骤）对于小型项目应该很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-27T20:07:12.920

您应该将从您的第二个 .c 文件 hello_world.c 编译的目标文件链接到您的 main.o

试试这个

```
cc -c main.c
cc -c hello_world.c
cc *.o -o hello_world 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T08:44:18.407

是的，您似乎忘记了链接 hello_world.c。我将 gcc hello_world.c main.c -o main。如果文件数量较少，我们可以使用这种方法，但在较大的项目中，最好使用 Make 文件或一些编译脚本。

# python - 如何在 python 中使用 eval

> ID：10357119
> 
> 赞同：1
> 
> 时间：2012-04-27T20:04:40.410
> 
> 标签：python, eval

我有一个游戏我已经做了一段时间了。核心是 C++，但我使用 Python 编写脚本和攻击/状态效果/项目等。

我有点把自己编码到一个角落里，我不得不使用 eval 来获得我想要的行为。以下是它的产生方式：

我有一个用于指定攻击的 xml 文档，如下所示：

```
<Attack name="Megiddo Flare" mp="144" accuracy="1.5" targetting="EnemyParty">
    <Flags>
        <IgnoreElements/>
        <Unreflectable/>
        <ConstantDamage/>
        <LockedTargetting/>
    </Flags>
    <Components>
        <ElementalWeightComponent>
            <Element name="Fire" weight="0.5"/> 
        </ElementalWeightComponent>
        <ConstantDamageCalculatorComponent damage="9995" index="DamageCalculatorComponent"/>    
    </Components>
</Attack> 
```

我在 python 中解析这个文件，并构建我的攻击。每个攻击由任意数量的组件组成，以实现不同的行为。在这个攻击的例子中，我实现了一个 DamageCalculatorComponent，告诉 python 使用 ConstantDamage 变体。我在我的脚本文件中实现了所有这些组件。这对于我将经常使用的组件类型来说非常好。在某些攻击中，该攻击将是使用该特定组件变体的唯一攻击。我希望能够在 xml 文件中指定 Component 类，而不是将组件添加到我的脚本文件中。

例如，如果我要执行最终幻想中的经典白风攻击（根据攻击者的生命值恢复团队生命值）

```
<Attack name="White Wind" mp="41" targetting="AnyParty">
    <Flags>
        <LockedTargetting/>
    </Flags>
    <Components>
        <CustomComponent index="DamageCalculatorComponent">
            <![CDATA[
                class WhiteWindDamageComponent(DamageCalculatorComponent):
                    def __init__(self, Owner):
                        DamageCalculatorComponent.__init__(self, Owner)

                    def CalculateDamage(self, Action, Mechanics):
                        Dmg = 0
                        character = Action.GetUsers().GetFirst()
                        SM = character.GetComponent("StatManagerComponent")
                        if (SM != None):
                            Dmg = -SM.GetCurrentHP()
                        return Dmg
                return WhiteWindDamageComponent(Owner)
            ]]>     
        </CustomComponent>
    </Components>
</Attack> 
```

我想知道是否有更好的方法来做到这一点？我能看到的唯一另一种方法是将每个可能的组件变体定义放入我的 python 文件中，并扩展我的组件创建者以检查其他变体。单次使用的组件似乎有点浪费。动态生成类型是否有更好/更安全的替代方案，或者我没有看到的另一种解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:33:02.267

内联 Python 不好，因为

*   Python 源代码编辑器无法理解您的源代码文件，您将错过语法高亮显示

*   所有其他可用于 lint 和验证源代码的工具，如 pylint 也将失败

**选择**

在元素中`<CustomComponent index="DamageCalculatorComponent">`

...添加参数`script`：

`<CustomComponent index="DamageCalculatorComponent" script="damager.py">`

然后`damager.py`在文件系统的某处添加文件。

按照此处所述加载它：[Python 3 中 execfile 的替代方法是什么？](https://stackoverflow.com/questions/436198/what-is-an-alternative-to-execfile-in-python-3-0)

在您的主游戏引擎代码中，使用已加载的系统模块构建类，例如：

```
 damager_class = sys.modules["mymodulename"].my_factory_function() 
```

所有 Python 模块都必须共享某种约定的类名/入口点函数。

如果您想拥有真正可插拔的架构，请使用 Python 鸡蛋和`setup.py`入口点

*   [http://wiki.pylonshq.com/display/pylonscookbook/Using+Entry+Points+to+Write+Plugins](http://wiki.pylonshq.com/display/pylonscookbook/Using+Entry+Points+to+Write+Plugins)

例子

*   [https://github.com/miohtama/vvv/blob/master/setup.py](https://github.com/miohtama/vvv/blob/master/setup.py)

# ssrs-2008 - SSRS ReportViewer 控件链接报表不在顶部开始

> ID：10357120
> 
> 赞同：1
> 
> 时间：2012-04-27T20:04:40.660
> 
> 标签：ssrs-2008

我在 Web 表单上使用 SSRS ReportViewer 控件 (2008) 来显示 SSRS 报告。SSRS 报告有许多其他 SSRS 报告的链接。当我单击其中一个链接的报告时，我得到了不需要的行为。

正如我所期望的那样，报告的顶部不是可见的，而是从底部开始的。浏览器窗口右侧的滚动条位于最底部，我需要向上滚动才能查看报告的顶部。

我不希望我的用户每次导航到新报告时都必须向上滚动。有没有办法可以强制报告从顶部开始？（所以右手边的滚动条从顶部开始）

当我在 Visual Studio 2008 中预览报表时，我没有看到这种行为。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:20:51.603

您使用的是哪个浏览器？例如，我知道 Chrome 不支持报告管理器（报告减半）。

看看这个[链接](http://msdn.microsoft.com/en-us/library/ms251673.aspx)和这个[链接](http://msdn.microsoft.com/en-us/library/ms252090.aspx)，他们可能会帮助你。

# codeigniter - 使用 xampp 让 Codeigniter 在 localhost 上工作

> ID：10357121
> 
> 赞同：3
> 
> 时间：2012-04-27T20:04:45.537
> 
> 标签：codeigniter, xampp

我在 Windows 7 机器上安装了 Netbeans、Codeigniter 和 xampp，我只是想调用一个简单的对象来显示 hello world。

在用尽许多教程后，我不断收到 Object not found 错误。当我运行我的脚本时，它使用以下网址

```
http://localhost/project1/CodeIgniter_2.1.0/application/controllers/hello.php 
```

因此，当我从浏览器调用 localhost/xampp 时，xampp 工作正常，尽管我不确定还需要配置什么。

我尝试了许多不同的基本网址，尽管目前我`config.php`的设置如下`$config['base_url'] = '';`

我是一个新手，只是想把东西设置好，这样我就可以开始做项目了，但几天都过不了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T21:27:26.807

这不是 CodeIgniter URL 的工作方式。它应该是：

```
http://path/to/codeigniter/index.php/<controller>/<function>/<param> 
```

所以，在你的情况下，它应该是：

```
http://localhost/project1/CodeIgniter_2.1.0/index.php/hello 
```

`$config['base_url']`应该设置为`index.php`，所以它应该是：

```
$config['base_url'] = 'http://localhost/project1/CodeIgniter_2.1.0/index.php'; 
```

文档：http : [//codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

# c# - Socket EndReceive 订单/数据问题

> ID：10357129
> 
> 赞同：1
> 
> 时间：2012-04-27T20:05:45.083
> 
> 标签：c#, .net, sockets, tcp

**背景：**

我正在编程的应用程序使用异步套接字（使用 BeginSend、EndSend、BeginReceive、EndReceive）在彼此之间发送数据。套接字是 TCP，没有套接字标志，在 IPV4 上。

它使用发送一个 4 字节 (int) 消息的系统，然后是一个长度在前一个消息中指定的消息。我使用处理 MessageLength 和 MessageBody 的函数助手。流程是这样的

1.  开始接收（）
2.  结束接收（）
3.  消息长度接收（）
4.  开始接收（）
5.  MessageBodyReceived()

**问题：**

当我以 16kb 的块发送文件数据时，问题就出现了（还有额外的小开销：offset、pieceIndex 等）。有时，在接收MessageLength时，它会从上一条消息中的*随机部分*接收数据，而不是实际的消息长度。这个问题的一部分是它并不总是发生在设定的偏移量（例如文件/片段/ 16 kb块的开头或结尾）并且可能发生在任何文件中，但是如果我发送更多文件/更大的文件会发生更多.

发送的某些内部消息（例如 RequestMessages）从未遇到此问题。所有内部消息均小于 100 字节。

在请求另一个块之前，我尝试等待文件块完全保存，但它仍然失败。我也尝试过限制一次发送多少块，但这只能解决使用 127.0.0.1（本地客户端）而不是跨网络（LAN）时的问题。

我花了几个小时浏览我的应用程序，看看是否有任何问题，但我还没有看到它将错误数据作为标题发送的任何地方。这个问题似乎总是介于两个客户端的发送和接收之间。是否有我应该使用的套接字/发送方法设置？或者它可能是某种竞争条件（我考虑过竞争条件，但数据可以在文件中随机出现的事实让我重新考虑了这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:04:52.170

从这个问题来看，我猜你正在处理的问题是在 MonoTorrent 库中。

我自己从来没有遇到过这样的问题。通过查看代码，我认为接收部分已经订购，因为网络 IO 在处理第一个消息之前不会尝试接收第二个消息。PieceMessages 的写请求也在 DiskIO 中排队，所以这应该不是问题。

但是，在发送过程中，可以从多个地方调用 ProcessQueue 函数。并且由 ProcessQueue 间接调用的 EnqueueSendMessage 实际上并不将消息排入任何队列。它只是简单地调用 Socket.BeginSend。我不知道 Socket.BeginSend() 内部是否有任何队列机制。如果没有，当多个线程试图使同一个套接字“BeginSend”不同的数据时，这可能会带来一些问题。

# java - 在java中返回SETOF记录的函数=错误

> ID：10357132
> 
> 赞同：1
> 
> 时间：2012-04-27T20:05:52.460
> 
> 标签：java, sql, postgresql

我必须使用 PostgreSQL，但是当我尝试用 Java 读取函数时遇到了一点问题。

我的功能：

```
CREATE OR REPLACE FUNCTION tiena.RecursosData7(x text, OUT id text, OUT valor text)RETURNS SETOF record
AS
'
    SELECT recursodc.idrecursodc, recursodc.valorfonte
    FROM tiena.recursodc
    WHERE valorfonte=$1;
'
LANGUAGE 'sql'; 
```

然后在Java中我试图以这种方式读取函数：

```
try {
    if (AbrirConexao()) {
        conn.setAutoCommit(false);
        proc = conn.prepareCall("{ call tiena.recursosdata7(?,?, ?)}");
        proc.setString(1,"IG - SP");
        proc.registerOutParameter(2, Types.VARCHAR);
        proc.registerOutParameter(3, Types.VARCHAR);

        //proc.execute();
        //resSet = (ResultSet) proc.getObject(1);
        resSet = proc.executeQuery();
        while(resSet.next())
        {
            String id = resSet.getString(1);
            String fonte = resSet.getString(2);
            System.out.println("id : "+ id +", fonte: "+ fonte);
        }
        proc.close();
    } 
```

但我总是得到同样的错误。

```
Erro : Nenhum resultado foi retornado pela consulta.
org.postgresql.util.PSQLException: Nenhum resultado foi retornado pela consulta.
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:274)
        at LerArquivos.ConexaoBD.RecuperarIDRecurso2(ConexaoBD.java:117)
        at upload_cg.Main.main(Main.java:24) 
```

我试图移动参数的位置，函数，我搜索了很多，但我没有找到解决方案。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:27:08.483

[Bellninita](https://stackoverflow.com/users/1361911/bellninita)，请考虑改用游标。以下是示例 Java 和 SQL 代码，它们的组件与您似乎需要的相似。这类似于用于相同目的的生产代码：

```
protected Fault getFault(Integer dataCode, Integer faultCode,
        GregorianCalendar downloadTime, IFilterEncoder filter, FaultType faultType, boolean verbose) {
    // verbose: flag to display logging statements.
    Fault fault = new Fault(faultCode, 0);
    try {
        // We must be inside a transaction for cursors to work.
        conn.setAutoCommit(false);
        // Procedure call: getFault(integer, text, timestamp, integer)
        proc = conn.prepareCall("{ ? = call getfaultCount(?, ?, ?, ?, ?) }");
        proc.registerOutParameter(1, Types.OTHER);
        proc.setInt(2, dataCode);
        proc.setInt(3, faultCode);
        Timestamp ts = new Timestamp(downloadTime.getTimeInMillis());
        cal.setTimeZone(downloadTime.getTimeZone());
        proc.setTimestamp(4, ts, cal);
        proc.setInt(5, filter.getEncodedFilter());
        proc.setString(6, faultType.toString());
        proc.execute();
        if(verbose) {
            log.logInfo(this.getClass().getName(), "SQL: " + proc.toString());
        }
        results = (ResultSet) proc.getObject(1);
        while (results.next()) {
            //Do something with the results here
        }
    } catch (SQLException e) {
        //Log or handle exceptions here
    }
    return fault;
} 
```

这是函数内部的 SQL（又名存储过程）：

```
CREATE OR REPLACE FUNCTION getfaultcount(_dataCodeid integer, _faultcode integer, _downloadtime timestamp without time zone, _filterbitmap integer, _faulttype text)
  RETURNS refcursor AS
$BODY$
DECLARE mycurs refcursor;
BEGIN 
    OPEN mycurs FOR
    SELECT count(*) as faultcount, _downloadtime as downloadtime
    FROM    fs_fault f
        JOIN download_time d ON f.downloadtimeid = d.id
    WHERE   f.faultcode = _faultcode
        AND f.statusid IN(2, 4)
        AND d.downloadtime = _downloadtime
        AND d.dataCodeid = _dataCodeid 
    GROUP BY f.faultcode
    ;
    RETURN mycurs;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION getfaultcount(integer, integer, timestamp without time zone, integer, text) OWNER TO postgres; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T19:16:28.180

最好的方法是在 SELECT 的 FROM 子句中使用集合返回函数。无需使用 a `CallableStatement`，常规的`PreparedStatement`就可以了。

```
PreparedStatement pstmt = conn.prepareStatement("select * from tiena.recursosdata7(?)");
proc.setString(1,"IG - SP");
ResultSet resSet = pstmt.executeQuery();
while(resSet.next())
{
    String id = resSet.getString(1);
    String fonte = resSet.getString(2);
    System.out.println("id : "+ id +", fonte: "+ fonte);
}
pstmt.close(); 
```

# xml - 我需要使用 VBS 更改 XML 文档中的属性

> ID：10357133
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:05:52.930
> 
> 标签：xml, vbscript, xml-parsing

我一直在网上寻找一种干净的方法来使用 VBS 更改 XML 节点中的 2 个属性（不幸的是，我对这个客户端的唯一选择）。XML 中有一个节点，如下所示：

```
<lot id="ajhgkhga" lot="1" block="1" section="73R"> 
```

我需要将其更改为此（并保留 XML 文档的其余部分）：

```
<lot id="ajhgkhga" lot="1" block="22" section="55"> 
```

我一天中的大部分时间都在破解 VBS，这就是我现在所处的位置：

```
 Dim objXMLDoc
Dim objXMLElement
Dim objXMLNodeList
Dim numObjXMLNodeList
Dim i
Dim lot
Dim section
Dim attr

set objXMLDoc = CreateObject("Microsoft.XMLDOM")

objXMLDoc.async = "false"
objXMLDoc.load("section73R.xml")

Set objXMLNodeList = objXMLDoc.getElementsByTagName("lot")

numObjXMLNodeList = objXMLNodeList.length

For i = 0 to numObjXMLNodeList - 1

    ' current value of the block and section attributes of the lot element
    block = objXMLNodeList.item(i).getAttribute("block")
    section = objXMLNodeList.item(i).getAttribute("section")
    'Wscript.Echo block & " " & section

    ' new value of the block and section attributes of the lot element
    objXMLNodeList.item(i).setAttribute "block", "22"
    objXMLNodeList.item(i).setAttribute "section", "55"

Next 
```

如上所述，这会引发错误。我的 VBS 印章在这一点上几乎不存在，我已经很长时间没有这样做了。上面的代码只是为了尝试读取属性而设计的，我认为一旦我有了替换值就不会太难了。

谁能帮我弄清楚如何替换这些值？这样做告诉我我在这个脚本中有多远？提前致谢！

编辑：我现在可以取出两个属性值（参见上面的代码更改）。我现在需要的只是一种将新属性值写入 XML 文件的方法，这将是一个完成的交易。任何人都可以给我任何指示吗？

编辑＃2：一旦我能够检索属性值并且我已经编辑了上面的代码，我就能够很快解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:14:46.897

目前尚不清楚您的文档的结构是什么。我能够使用此代码更改属性。显然，我的文档中没有多个“批次”，因此您可能需要遍历节点以找到要编辑的节点。不过，这应该可以帮助您：

```
Dim oXML
Set oXML = CreateObject("Microsoft.XMLDOM")
oXML.loadXML("<list><lot id=""ajhgkhga"" lot=""1"" block=""1"" section=""73R""></lot></list>")

Dim ixnLot
Set ixnLot = oXML.selectSingleNode("//list/lot")
ixnLot.Attributes.getNamedItem("block").Text = "22"
ixnLot.Attributes.getNamedItem("section").Text = "55"

'oXML.Save 'You'll need to call the same method to actually save the changes to the file 
```

# xsd - XML Schema Choice - 至少选择一个，但不重复

> ID：10357135
> 
> 赞同：3
> 
> 时间：2012-04-27T20:05:58.907
> 
> 标签：xsd, unique, choice

我如何强制选择至少一个，但不重复？

以下语法允许任何 c 元素最多重复 3 次。

```
<choice minOccurs="1" maxOccurs="3">
    <element name="c1" type="string" />
    <element name="c2" type="string" />             
    <element name="c3" type="string" />
</choice> 
```

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:12:44.683

松开`maxOccurs="3"`，你得到的是“至少选择一个”，不再重复。

对于粒子，默认值为`minOccurs="1"`; 一个强制性的选择，每个选项粒子本身都是强制性的，是你的答案。

更新：根据您的评论，如果您正在寻找您所描述的粒子的任何有序组合，那么这是您可以通过 XSD 规范获得的最佳效果。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:choice>
                <xsd:sequence>
                    <xsd:element ref="c1"/>
                    <xsd:element ref="c2" minOccurs="0"/>
                    <xsd:element ref="c3" minOccurs="0"/>
                </xsd:sequence>
                <xsd:sequence>
                    <xsd:element ref="c2"/>
                    <xsd:element ref="c3" minOccurs="0"/>
                </xsd:sequence>
                <xsd:element ref="c3"/>
            </xsd:choice>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="c1" type="xsd:string"/>
    <xsd:element name="c2" type="xsd:string"/>
    <xsd:element name="c3" type="xsd:string"/>
</xsd:schema> 
```

这已经很乱了；如果您正在寻找更多数量的粒子或任何无序组合，那么我会将模型更改为类似的东西（这些是 XSD 1.0 的限制 - 这一切都与您可以使用的 XPath 语法中的限制有关选择器/字段）。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="c" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="pk">
            <xsd:selector xpath="*"/>
            <xsd:field xpath="@code"/>
        </xsd:key> 
    </xsd:element>
    <xsd:element name="c" type="TC" abstract="true"/>   
    <xsd:element name="c1" type="TC1" substitutionGroup="c"/>
    <xsd:element name="c2" type="TC2" substitutionGroup="c"/>
    <xsd:element name="c3" type="TC3" substitutionGroup="c"/>

    <xsd:complexType name="TC">
        <xsd:simpleContent>
            <xsd:extension base="xsd:string">
                <xsd:attribute name="code" type="xsd:string"/>
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType>
    <xsd:complexType name="TC1">
        <xsd:simpleContent>
            <xsd:restriction base="TC">
                <xsd:attribute name="code" type="xsd:string" fixed="c1"/>
            </xsd:restriction>
        </xsd:simpleContent>
    </xsd:complexType>
    <xsd:complexType name="TC2">
        <xsd:simpleContent>
            <xsd:restriction base="TC">
                <xsd:attribute name="code" type="xsd:string" fixed="c2"/>
            </xsd:restriction>
        </xsd:simpleContent>
    </xsd:complexType>
    <xsd:complexType name="TC3">
        <xsd:simpleContent>
            <xsd:restriction base="TC">
                <xsd:attribute name="code" type="xsd:string" fixed="c3"/>
            </xsd:restriction>
        </xsd:simpleContent>
    </xsd:complexType>  
</xsd:schema> 
```

示例 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
    <c1 code="c1">c11</c1>
    <c2 code="c2">c21</c2>
    <c3 code="c3">c21</c3>
</root> 
```

或这个：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
    <c2 code="c2">c21</c2>
    <c1 code="c1">c11</c1>
</root> 
```

基本上，您正在键入一些使您的元素独一无二的组件，它是数据的一部分，而不是标签名称。再次，凌乱，但作为一个练习，它可能会给你一个想法。

# apache - Apache 2.4.1 和旧模组

> ID：10357139
> 
> 赞同：1
> 
> 时间：2012-04-27T20:06:18.967
> 
> 标签：apache

我一直在研究升级到 Apache 2.4.1 的可能性，并发现这些模块与它不兼容

*   mod_limitipconn
*   mod_evasive
*   mod_rpaf

有谁知道是否有可用于 2.4.1 的替代模块和/或这些模块的功能是否包含在 Apache 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T05:07:36.770

mod_qos 是替代 mod_evasive 的选择 [http://opensource.adnovum.ch/mod_qos/](http://opensource.adnovum.ch/mod_qos/)

注意： [https ://sourceforge.net/projects/mod-qos/forums/forum/697421/topic/5084013](https://sourceforge.net/projects/mod-qos/forums/forum/697421/topic/5084013)

mod_qos 10.5 与 Apache 2.4 一起编译但是：1) 使用 QS_Srv* 指令时要小心（它们可能无法按预期工作，因为连接记录在很长一段时间后被清除）2) QS_SrvMinDataRate 不可用（使用[http://httpd. apache.org/docs/2.4/mod/mod_reqtimeout.html](http://httpd.apache.org/docs/2.4/mod/mod_reqtimeout.html)代替）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:09:26.923

的服务`mod_rpaf`现在由 Apache 在[mod_remoteip](http://httpd.apache.org/docs/2.4/mod/mod_remoteip.html)中提供。我不熟悉其他模块。

# perl - 从远程服务器获取文件 - Perl/Unix

> ID：10357144
> 
> 赞同：2
> 
> 时间：2012-04-27T20:06:29.107
> 
> 标签：perl, unix

关于我之前发布的[问题](https://superuser.com/questions/416858/get-all-files-created-in-past-24-hours-unix/416865#416865)，我编写了以下脚本来加载特定文件：

```
#!/bin/perl

use strict;
use Net::FTP;

my $ftpOb = Net::FTP->new("X")
         or die ("Could not connect to the FTP Server: $@");
print "Connected \n";

$ftpOb->login("A", "B")
         or die ("Incorrect server credentials");
print "Logged in \n";

print " Current folder is: " . $ftpOb->pwd();

$ftpOb->cwd("root/Folder") or die ("Cannot connect to the folder on Server");
print "Transferred to folder \n";

$ftpOb->get("621418185-006249189002-5383.txt")
         or die ("Error occured while fetching the file");

$ftpOb->quit; 
```

但是，代码似乎无法更改工作目录，我得到以下输出：

```
Connected
Logged in
Cannot connect to the folder on Server at ./GetUploadFile.pl line 16.
 Current folder is: / 
```

谁能帮我在这里调试问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:15:14.627

Include `$ftpOb->message()` in your error messages (except for the connect, where `$@` is the correct error message).

Also do a dir() and list what files/directories are available.

# php - 当一个字段可能包含也可能不包含值时，mysql选择数据

> ID：10357145
> 
> 赞同：1
> 
> 时间：2012-04-27T20:06:29.580
> 
> 标签：php, mysql

有一个 MYSQL 查找表，它返回在多个完成者 (N) 中某个位置 (P) 收到的分数，具有多种格式 (points_id)。不同的点结构用于不同的事件。有时得分取决于完成者的数量（N），有时则不然。这是表格的简短版本，有两个示例结构。points_id -1 点取决于 N Point_id -2 点不依赖。

积分

```
 points_id |   P   |   N   | points |
           1     |   1   |   3   |   90   |
           1     |   1   |   2   |   85   |
           1     |   1   |   1   |   80   |
           1     |   2   |   3   |   60   |
           1     |   2   |   2   |   50   |
           1     |   3   |   3   |   30   |
           3     |   1   |       |  100   |
           3     |   2   |       |   90   |
           3     |   3   |       |   80   |
           3     |   3   |       |   70   | 
```

所以我的问题是：1）有没有办法将通配符放在表数据中。例如，如果显示空白的 N 列中有一个 % 并且我做了这个查询。

```
SELECT points from t1 WHERE points_id=3 and P=3 and N=2 
```

它会返回 96？PS我知道这不起作用，但显示了我的想法。

2）我希望它快，可以把它放在一个程序中以用于更大的查询。我猜除非有一种非常简单的方法来做我上面展示的事情。最快的方法是在 points_id =3 的情况下为所有不同的 N 设置行。真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:23:14.860

您可以考虑 UNION ALL：

```
SELECT points from t1 WHERE points_id=3 AND P=3
UNION ALL
SELECT points from t1 WHERE points_id=3 AND N=2 
```

无论 P=3 还是 N=2，这都会得到结果。我复制了你的数据库模式并尝试了这个，它产生了：

```
points
------
80
70 
```

如果您确实希望它能够快速处理大量数据 - 您真的希望拥有一个索引和/或主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T11:04:56.137

尝试这个 ：

```
SELECT points from t1 WHERE points_id=3 and P=3 and (N=2 OR (IFNULL(N,'')='')) 
// dataType of N varchar
SELECT points from t1 WHERE points_id=3 and P=3 and (N=2 OR (IFNULL(N,0)=0))
//  dataType of N numeric type 
```

**让我知道是否有任何变化或误会您**

# c# - C#.Net 和 VB.Net 有什么区别（语法除外）？

> ID：10357146
> 
> 赞同：0
> 
> 时间：2012-04-27T20:06:30.870
> 
> 标签：c#, .net, vb.net

请让我知道 C#.Net 和 VB.Net 之间的区别。我在我的项目中使用 C#.Net，但是当我遇到其他一些程序员时，他们经常称 VB.Net 比 C#.Net 更强大、更简单。我总是问他们`"Why it is more powerful then C#, since it uses the same framework?"`，但我仍然没有得到任何有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:10:41.753

*   指针 (C#)
*   XML 文字 (VB.NET)
*   VB6 剩菜 (VB.NET)
*   其他一些语法差异

最后，不是很多。虽然，有人说 C# 程序员的薪水更高（从未调查过，但这是可能的）。

这也取决于你对“强大”和“简单”的定义。两者在工作中都很强大。C# 在性能方面可能有一点优势，因为它有指针。但在大多数情况下很少使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:07:51.737

从技术上讲，除了语法没有区别。两者都使用公共语言运行时 ( [wikipedia](http://en.wikipedia.org/wiki/Common_Language_Runtime) ) ( [msdn](http://msdn.microsoft.com/en-us/library/ddk909ch%28v=vs.90%29.aspx) )。它们只是使用相同库的两种不同语言，并且实际上编译为相同的东西。这是您可以在 VB.net 中编写库、将其编译为 dll 并将该 dll 包含在 ac# 程序中的原因之一。

有一些小的差异，但在大多数情况下，选择其中一个几乎完全是个人喜好。就个人而言，我发现 c# 语法不太容易出错，但有些人喜欢 VB 的“英语性”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T20:10:41.943

这是同一件事。我什至不知道为什么微软有 C# 和 VB，因为它确实做同样的事情。

# c# - 在 C# 中将字符串转换为整数时出现异常

> ID：10357150
> 
> 赞同：4
> 
> 时间：2012-04-27T20:06:58.990
> 
> 标签：c#, exception, type-conversion

我收到错误：未处理格式异常，输入字符串的格式不正确。
对于这一行：

```
int right = System.Convert.ToInt32(rightAngleTB.Text); 
```

rightAngleTB 是 TextBox，值 Text 是“25”（没有“”）。

我真的没有看到问题:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T20:08:08.823

你真的应该使用`int.TryParse`. 转换要容易得多，而且不会出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:26:03.023

我经常注意到用户有时在他们的输入中有前导或尾随空格。使用 .Trim() 将摆脱前导和尾随空格。然后 TryParse 会给你一个 int （如果修剪后的 Text 是一个整数）而不抛出异常

使用以下内容：

```
int right = 0;  //Or you may want to set it to some other default value

if(!int.TryParse(rightAngleTB.Text.Trim(), out right))
{
    // Do some error handling here.. Maybe tell the user that data is invalid.
}

// do the rest of your coding.. 
```

如果上述 TryParse 失败，则 right 的值将是您在上面的声明中设置的值。（在这种情况下为 0...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:21:03.843

试试下面的代码。

```
using System;

public class StringParsing
{
public static void Main()
{
  // get rightAngleTB.Text here
  TryToParse(rightAngleTB.Text);
}

private static void TryToParse(string value)
{
  int number;
  bool result = Int32.TryParse(value, out number);
  if (result)
  {
     Console.WriteLine("Converted '{0}' to {1}.", value, number);         
  }
  else
  {
     if (value == null) value = ""; 
     Console.WriteLine("Attempted conversion of '{0}' failed.", value);
  }
} 
```

# c# - 从 WPF 中的 dll 设置窗口图标

> ID：10357169
> 
> 赞同：2
> 
> 时间：2012-04-27T20:08:20.803
> 
> 标签：c#, wpf, xaml

我想从 dll 设置我的窗口图标，但它的抛出错误。

我在 JIMS.Resources.dll 中有一个名为 JIMS.ico 的图标，我在窗口中使用它作为

```
<Window x:Class="JIMS.Home"        
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                  
        Title="JIMS" WindowStyle="None" 
        Icon="/JIMS.Resources;component/JIMS.ico">
</Window> 
```

但它抛出一个异常

```
System.Windows.Markup.XamlParseException occurred
  HResult=-2146233087
  Message='Provide value on 'System.Windows.Baml2006.TypeConverterMarkupExtension' threw an exception.' Line number '4' and line position '145'.
  Source=PresentationFramework
  LineNumber=4
  LinePosition=145
  StackTrace:
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at JIMS.Home.InitializeComponent() in d:\JIMS\JIMS\Home.xaml:line 1
       at JIMS.Home..ctor() in D:\JIMS\JIMS\Home.xaml.cs:line 25
  InnerException: System.IO.IOException
       HResult=-2146232800
       Message=Cannot locate resource 'jims.ico'.
       Source=PresentationFramework
       StackTrace:
            at MS.Internal.AppModel.ResourcePart.GetStreamCore(FileMode mode, FileAccess access)
            at System.IO.Packaging.PackagePart.GetStream(FileMode mode, FileAccess access)
            at System.IO.Packaging.PackWebResponse.CachedResponse.GetResponseStream()
            at System.IO.Packaging.PackWebResponse.GetResponseStream()
            at System.IO.Packaging.PackWebResponse.get_ContentType()
            at System.Windows.Media.Imaging.BitmapDecoder.SetupDecoderFromUriOrStream(Uri uri, Stream stream, BitmapCacheOption cacheOption, Guid& clsId, Boolean& isOriginalWritable, Stream& uriStream, UnmanagedMemoryStream& unmanagedMemoryStream, SafeFileHandle& safeFilehandle)
            at System.Windows.Media.Imaging.BitmapDecoder.CreateFromUriOrStream(Uri baseUri, Uri uri, Stream stream, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption, RequestCachePolicy uriCachePolicy, Boolean insertInDecoderCache)
            at System.Windows.Media.Imaging.BitmapFrame.CreateFromUriOrStream(Uri baseUri, Uri uri, Stream stream, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption, RequestCachePolicy uriCachePolicy)
            at System.Windows.Media.ImageSourceConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
            at System.Windows.Baml2006.TypeConverterMarkupExtension.ProvideValue(IServiceProvider serviceProvider)
            at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T01:05:03.160

尝试以下方法：

`Icon="pack://application:,,,/JIMS.Resources;component/JIMS.ico"`

为此，必须将图标构建为`Resource`

# python - 为什么 P4Python 无法识别 P4CONFIG 设置？

> ID：10357173
> 
> 赞同：1
> 
> 时间：2012-04-27T20:08:36.017
> 
> 标签：python, linux, perforce, p4python

我有以下代码：

```
# script0.py
def main():
    p4 = p4python.P4.P4()
    p4.connect()
    print os.environ['P4CONFIG']
    print p4.p4config_file
    p4.disconnect() 
```

通过以下方式调用：

```
# script0_test.py
subprocess.check_call(['script0.py']) 
```

并且正在输出：

```
.p4config
noconfig 
```

当从命令行调用 script0.py 或使用 subprocess.check_call(shell=True) 时，它会输出正确的信息：

```
.p4config
/home/nyap/proj/.p4config 
```

为什么 p4 对象在 shell=False 时无法识别 P4CONFIG 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-15T15:45:10.210

我遇到了同样的问题。它似乎是特定于 Linux 的 P4Python 中的一个错误。P4 类正在初始化，当前工作目录设置为“/”而不是实际工作目录。然后，这会阻止 P4 查找 .p4config 文件。

以下解决方法为我修复了它：

```
 p4 = P4.P4(cwd=os.getcwd()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:29:44.680

从命令行，`p4 set`P4CONFIG 显示什么？如果它不存在，那么您需要执行`p4 set P4CONFIG=".p4config"`（在 Windows 或 OS X 上）。如果你的`p4 set`输出已经列出了 P4CONFIG 那么我不知道......如果你在 Linux 上，[p4 set 手册页](http://www.perforce.com/perforce/doc.current/manuals/cmdref/set.html)说它将显示相应的环境变量，但你不能那样设置它们。在那种情况下，我不知道。

# iphone - 我应该使用@2x 还是-hd？

> ID：10357178
> 
> 赞同：3
> 
> 时间：2012-04-27T20:09:05.563
> 
> 标签：iphone, ios, cocos2d-iphone

我对使用 @2x 或 -hd 之间的区别感到困惑，其中一个比另一个更有效或更快吗？我正在使用 Cocos2D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:21:10.743

我很漂亮，谁都不比谁快

就我而言，因为我喜欢将 Cocos 与 UIKit 一起使用，所以我对所有与 Cocos 相关的图像（纹理等）使用 -hd 后缀，并为将与 UIKit 一起使用的图像使用@2x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:33:53.773

`@2x`在加载之前使用`CCDirector`..所以加载屏幕和图标`@2x`是**必须的**

如果`CCDirector`已经加载（又名..你在游戏中），你可以使用`@2x`或者`-hd`但如果我记得正确`-hd`地稍微慢一点，你必须在应用程序委托中启用视网膜显示......删除以下评论：

```
if (![director enableRetinDisplay:YES]) CCLOG(@"Retina Display Not supported"); 
```

如果您正在使用，则不需要启用视网膜显示`@2x`

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-27T20:17:56.777

像其他海报一样，我从未听说过 iOS 中图像名称的“-hd”后缀。

你在哪里看到的？用于视网膜设备或 iPad 的应用程序名称有时会将 -hd 作为名称的一部分，但据我所知，iOS 中的“-hd”后缀没有正式含义。

您应该将程序设置为使用标准图像。要支持 Retina 设备，您应该保存每个图像的 2 个版本，“anImage.png”和“anImage@2x.png”，其中带有@2x 后缀的图像的高度和宽度是其两倍。

# scala - scala-tools Maven 存储库更改：sbt Broken

> ID：10357180
> 
> 赞同：1
> 
> 时间：2012-04-27T20:09:18.403
> 
> 标签：scala, sbt

昨天，Typesafe 存储库（位于[http://scala-tools.org/repo-releases](http://scala-tools.org/repo-releases)）似乎已关闭。今天，该页面称它正在“取消”以支持从 Sonatype 提供服务。问题是我刚刚安装的 sbt 版本（来自 mac 上的自制软件）仍在查看旧的 repo 并且它失败了：

```
[info] Resolving com.eed3si9n#sbt-assembly;0.8.0 ...
[warn] module not found: com.eed3si9n#sbt-assembly;0.8.0 
```

更改项目的 repo URL 很简单：在 Build.scala 中找到。但这对我没有好处，因为在项目的构建被触发（推断这一点）之前，找不到装配 jar。然后我在这里找到了关于不得不炸开罐子的帖子。

好的，我通过从 sbt-assembly github 自述文件中获取解析器定义来解决此问题。但是，我的问题是，为什么 0.8.0 的 sbt-assembly 不在新的 sonatype 存储库中？

[新版本回购](https://oss.sonatype.org/content/groups/scala-tools/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:59:21.690

Eugene 还没有将 sbt-assembly 推到 Sonatype 上。更重要的是，您使用的是过时的 SBT 版本。Typesafe 从未提供或支持 Scala 工具托管。相反，它是由 David Pollak（Lift 的创建者）提供给社区的一项服务。此后，他决定退出社区，包括托管 Scala Tools。这就是存储库处于“日落模式”的原因。大多数 Scala 构建工具（包括 SBT）的最新版本不再指向 Scala Tools。

我的建议是首先升级到新版本的 SBT。其次，提交关于 sbt-assembly 的问题，促使 Eugene 采取必要的步骤将项目放入 Sonatype 的存储库中。

# variables - 批量循环遍历变量，不能cd到每个变量吗？

> ID：10357181
> 
> 赞同：1
> 
> 时间：2012-04-27T20:09:26.017
> 
> 标签：variables, loops, batch-file

我在批处理文件中有一个 for 循环：

```
@echo off
set logpath1=C:\path\to\first\log
set logpath2=C:\path\to\second\log
FOR %%G IN (%logpath1% %logpath2%) DO (
  pushd %%G
  pushd ..\
  for %%D IN (%CD%) DO SET "dirname=%%~nxD"
  popd
  echo Will prefix files in %%G with %supername%
  :: do operations.
  popd
) 
```

但是，这似乎并没有改变我的工作目录。如果我从

```
C:\tmp\path\to 
```

然后我得到

```
Will prefix files in C:\path\to\first\log with tmp
Will prefix files in C:\path\to\second\log with tmp 
```

我的目的是将日志文件压缩到多个目录中。我尝试过 chdir、cd /d 和 &~pd0 而不是 %CD%，并搜索了高低。谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:18:05.863

放

```
setlocal enabledelayedexpansion 
```

在批处理文件的顶部并在循环中使用`!CD!`而不是。`%CD%`根据`%supername%`设置的位置，您可能也需要在那里使用`!`。

# android - MediaRecorder.AudioSource.VOICE_CALL 在 SGS2 上不起作用（通话录音）

> ID：10357187
> 
> 赞同：3
> 
> 时间：2012-04-27T20:09:48.200
> 
> 标签：android, mediarecorder

使用 mediarecorder 录制通话，将音频源设置为

MediaRecorder.AudioSource.VOICE_CALL

在三星 Galaxy S2 (Android 2.3.4) 上不起作用，在应用程序中冻结并且没有创建录音（VOICE_UPLINK/VOICE_DOWNLINK 都可以，但只记录上行/下行链路，而不是双方的声音）。

但是，例如 CallRecorder 应用程序（来自 Android Market）确实可以工作（记录双方的声音）。所以这是可能的。

它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:36:24.000

I am trying to record through `AudioSource.CAMCORDER` on a Galaxy S2, but I have the same issue; I get no samples. Actually, I tried to have two audio sources, `.MIC` and `.CAMCORDER`, recording separate samples, but I guess, just like khan said, `.MIC` will probably work.

# c++ - 双打的 printf 舍入行为

> ID：10357192
> 
> 赞同：16
> 
> 时间：2012-04-27T20:10:02.943
> 
> 标签：c++, c, double, printf, rounding

有人可以解释这种行为吗？我很清楚浮点数的机器级表示。这似乎与 printf 及其格式有关。这两个数字都用浮点表示法精确表示（检查：乘以 64 得到一个整数）。

```
#include <stdio.h>
#include <iostream>
using namespace std;

int main() {
  double x1=108.765625;
  printf("%34.30f\n", x1);
  printf("%9.5f\n", x1);
  printf("%34.30f\n", x1*64);

  double x2=108.046875;
  printf("%34.30lf\n", x2);
  printf("%9.5f\n", x2);
  printf("%34.30f\n", x2*64);
} 
```

输出：

```
> 108.765625000000000000000000000000
> 108.76562
> 6961.000000000000000000000000000000
> 108.046875000000000000000000000000
> 108.04688
> 6915.000000000000000000000000000000 
```

请注意，第一个数字向下取整，第二个数字向上取整。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T20:15:09.773

这是“四舍五入”或“银行家四舍五入”。选择舍入表示的最后一位数字，即使该数字恰好介于两者之间。

[http://linuxgazette.net/144/misc/lg/a_question_of_rounding_in_issue_143.html](http://linuxgazette.net/144/misc/lg/a_question_of_rounding_in_issue_143.html)：
“对于 GNU C 库，printf() 使用的舍入规则是“银行家舍入”或“舍入到偶数”。这比其他一些 C 库，正如 C99 规范所说，转换为十进制应该使用当前选择的 IEEE 舍入模式（默认银行家舍入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:15:01.757

`%9.5f`输出给出小数点后 5 位的数字，这是最接近源数字的数字。

# python - python：使用 Popen 与 shell 命令交互

> ID：10357193
> 
> 赞同：0
> 
> 时间：2012-04-27T20:10:03.350
> 
> 标签：python, stdin, popen

我需要使用 python 执行几个 shell 命令，但我无法解决其中一个问题。当我scp到另一台机器时，通常它会提示并询问是否将此机器添加到已知主机。我希望程序自动输入“是”，但我无法让它工作。到目前为止，我的程序如下所示：

```
from subprocess import Popen, PIPE, STDOUT

def auto():
  user = "abc"
  inst_dns = "example.com"    
  private_key = "sample.sem"
  capFile = "/home/ubuntu/*.cap"

  temp = "%s@%s:~" %(user, inst_dns)
  scp_cmd = ["scp", "-i", private_key, capFile, temp]

  print ( "The scp command is: %s" %" ".join(scp_cmd) )
  scpExec = Popen(scp_cmd, shell=False, stdin=PIPE, stdout=PIPE)
  # this is the place I tried to write "yes" 
  # but doesn't work
  scpExec.stdin.write("yes\n")
  scpExec.stdin.flush()
  while True:
    output = scpExec.stdout.readline()
    print ("output: %s" %output)
    if output == "": 
      break 
```

如果我运行这个程序，它仍然会提示并要求输入。如何自动响应提示？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:28:17.523

系统会提示您将主机密钥添加到已知主机文件，因为 ssh 配置为`StrictHostKeyChecking`. 从手册页：

> 严格的主机密钥检查
> 
> 如果此标志设置为“yes”，ssh(1) 将永远不会自动将主机密钥添加到 ~/.ssh/known_hosts 文件，并拒绝连接到主机密钥已更改的主机。这提供了针对特洛伊木马攻击的最大保护，尽管当 /etc/ssh/ssh_known_hosts 文件维护不善或频繁建立与新主机的连接时可能会很烦人。此选项强制用户手动添加所有新主机。如果此标志设置为“no”，ssh 将自动将新的主机密钥添加到用户已知的主机文件中。如果此标志设置为“询问”，则只有在用户确认这是他们真正想要做的事情后，新的主机密钥才会添加到用户已知的主机文件中，并且 ssh 将

`StrictHostKeyChecking`如果您希望 ssh/scp 在不提示的情况下自动接受新密钥，您可以设置为“no”。在命令行上：

```
scp -o StrictHostKeyChecking=no ... 
```

您还可以启用批处理模式：

> 批处理模式
> 
> 如果设置为“yes”，密码短语/密码查询将被禁用。此选项在没有用户提供密码的脚本和其他批处理作业中很有用。论据必须是“是”或“否”。默认值为“否”。

使用`BatchMode=yes`, ssh/scp 将失败而不是提示（这通常是对脚本的改进）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:29:11.853

我知道避免被问及指纹匹配的最佳方法是在`.ssh/known_hosts`. 在大多数情况下，您确实应该已经知道远程机器的公钥是什么，并且很容易将它们放在`known_hosts`ssh 可以找到的位置。

在您不知道并且不能知道远程公钥的少数情况下，最正确的解决方案取决于您不知道的原因。例如，如果您正在编写需要在任意用户机器上运行的软件，并且可能需要代表用户 ssh 到其他任意机器，那么最好让您的软件`ssh-keyscan`自行运行以获取表面上的远程公共密钥，如果可能的话，让用户明确地批准或拒绝它，如果批准，将密钥附加到 known_hosts*然后*调用 ssh。

# wcf - WCF：异步方法，在服务中还是在客户端？

> ID：10357195
> 
> 赞同：1
> 
> 时间：2012-04-27T20:10:14.297
> 
> 标签：wcf, asynchronous

好吧，我正在考虑每次调用都使用 WCF 服务，并出于可伸缩性原因使用异步方法。然后我在想，在服务或客户端中有什么更好的异步方法？

我看到的所有示例都在服务合同中实现了开始/结束方法，然后客户端使用这些方法。

但是，我正在考虑其他可能性。是否可以在服务和客户端中使用普通方法实现开始/结束方法或使用 CTP 并异步使用服务的方法？如果我使用这种形式，我会失去可扩展性的好处吗？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:21:31.673

在这种情况下，我会使用 Begin/End 模式——它是向客户端明确的消息，表明该服务是一个长时间运行的操作，并且应该会在处理过程中出现延迟。

另一方面，如果您有正常的方法并且如果其中一个客户没有正确编码方法调用，那么您所有的可伸缩性工作都将无济于事。

# jquery - 将变量传递到 URL

> ID：10357196
> 
> 赞同：0
> 
> 时间：2012-04-27T20:10:18.577
> 
> 标签：jquery

我正在尝试将 2 个表单元素中的值添加到一个函数中，并且可以获得第一个添加但无法为第二个编写代码的正确方法。

```
$(function() {
   $('#form_orderTracking').click(function(){
       $('#CustomerDetails').load('TrackOrder1.asp?OrderID=' + $('#orderID').val());
   });
}); 
```

我正在尝试添加 emailAddress 字段的值，以便 url 读取：

```
TrackOrder1?OrderID=123456&EmailAddress=abc@123.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:15:08.147

Instead of appending the query string to the url, you can pass it to `.load` as a 2nd parameter. If you pass an object, it'll use `POST`, if you pass a string, it'll use `GET` (like your example).

`$.param` converts the object to a string, so it uses `GET`.

```
$('#CustomerDetails').load('TrackOrder1.asp', $.param({
    orderID: $('#orderID').val(),
    EmailAddress: emailAddress
})); 
```

Or you can just append to your string, like so:

```
$('#CustomerDetails').load('TrackOrder1.asp?OrderID=' + $('#orderID').val() + '&EmailAddress=' + emailAddress); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:15:19.500

```
var url = 'TrackOrder1.asp?OrderID=' + uriEncodeComponent($('#orderID').val()) + '&EmailAddress=' + uriEncodeComponent(email);
$('#CustomerDetails').load(url); 
```

It is also best to run the values through `uriEncodeComponent()` to ensure they are encoded properly.

# objective-c - 如何从网站以 xml 格式获取数据并使用 Objective-c 解析该数据以执行操作

> ID：10357198
> 
> 赞同：4
> 
> 时间：2012-04-27T20:10:32.403
> 
> 标签：objective-c, ios, xml-parsing, nsxmlparser, nsxml

我想从网站careercup.com 以xml 格式获取数据并使用objective c 对其进行解析，并希望将一些结果数据加载到plist 文件中。谁能指导我如何去做这件事？意思是如何从网站以 xml 格式获取数据，一旦我得到数据，我将它存储在哪里，以便我可以解析它并将我需要的任何内容加载到我的 plist 文件中。我想解决以 xml 格式获取网站数据并首先存储它的问题。据我所知，解析可以使用 NSXML 解析器等来实现。但我想知道如何以 xml 格式检索网站，然后将检索到的 xml 数据存储在哪里，以便我可以解析它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:31:56.220

这是您需要的一个很好的例子[http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)

如需更深入地查看可用的 xml 解析器 对于 ios，您可以查看此[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-项目](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

这两个链接都可以让您快速发展您的想法！

# php - REST 与 PHP，如何选择查询字符串

> ID：10357199
> 
> 赞同：2
> 
> 时间：2012-04-27T20:10:39.087
> 
> 标签：php, web-services, rest

我将为此示例展示两种类型的查询字符串。我知道 Web 服务的查询字符串应该看起来比 1 多于 2

1.  [http://localhost/findbyproductcode/4xxheua](http://localhost/findbyproductcode/4xxheua)
2.  [http://localhost/findbyproductcode?productcode=4xxheua](http://localhost/findbyproductcode?productcode=4xxheua)

我的问题是：你如何管理 php 中的第一个？这不只是对第二个 URL 的重写吗？

使用#2 查询字符串，我想有一个 findbyproductcode.php 页面处理 GET 变量（？productcode=4xxheua），使用此产品代码检查一些数据库并发回一些数据。

#1 应该如何工作？我应该有一个 4xxheua.php 吗？（显然不是......）......我只是不明白这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:14:53.697

您更喜欢 1 而不是 2 的唯一原因是因为 1 在语义上更直观。

有这样的 URL 是有意义的：

[http://www.myblog.com/article/2012-04-29/i-did-nothing-all-day](http://www.myblog.com/article/2012-04-29/i-did-nothing-all-day)

而不是

[http://www.myblog.com/index.php?page=article&id=23423](http://www.myblog.com/index.php?page=article&id=23423)

据说它也有助于您的 SEO 得分。

如果您只是在构建 Web 服务，例如：机器与机器对话 - 那么 URL 的外观并不重要。您也可以只拥有一个接受*所有*输入并根据输入数据在内部进行“路由”的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:14:55.950

如果您正在尝试编写 API，则有很多工作要做 - 是的，涉及重写，但不必为所有参数提供一个页面 - Luracast 有一个很棒的开源 Rest API 调用 ed restler 开始和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:38:53.370

实现#1的一个例子，

1：将所有没有图像的路径，css（等）发送到`root/index.php`（例如Apache上的mod_rewrite）
2：在`index.php`，从`$_SERVER['pathinfo']`或其他方式获取参数。
3：解析处理。

如果您使用 Apatche 和 mod_rewrite，请查看文档：

*   [mod_rewrite：URL 重写初学者指南](http://www.sitepoint.com/article/guide-url-rewriting/)
*   [URL重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:45:11.977

是的，只是 URL 重写。我目前正在使用 Symfony 1.3，他们的 htaccess 看起来像这样：

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
  RewriteEngine On

  # uncomment the following line, if you are having trouble
  # getting no_script_name to work
  #RewriteBase /

  # we skip all files with .something
  #RewriteCond %{REQUEST_URI} \..+$
  #RewriteCond %{REQUEST_URI} !\.html$
  #RewriteRule .* - [L]

  # we check if the .html version is here (caching)
  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  # no, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

在这种情况下，只需将 index.php 设置为您的控制器，您就可以获取此虚拟主机的所有 URL 发送给它。简单的！

# xml - 选择结果集中的几列作为 XML

> ID：10357203
> 
> 赞同：1
> 
> 时间：2012-04-27T20:10:54.120
> 
> 标签：xml, tsql, sql-server-2008-r2

我有一个简单的`SELECT`语句，它从单个表中选择几列：

```
SELECT id, name, phone, address 
FROM tmp_user 
```

是否可以更改此查询，以便仅`id`和`name`在 select 中，其余详细信息在 xml 节点中？

我预计这个选择的输出应该是

```
id  name        extra data
1   Shreedhar   <data><phone>...</phone><address>...</address></data>
2   John Doe    <data><phone>...</phone><address>...</address></data>
3   Jane Doe    <data><phone>...</phone><address>...</address></data> 
```

返回表的最后一列应该是带有所需数据的 XML 类型。我知道如何使用 FOR XML 将整个结果集转换为 XML。但是，我只寻找要转换的部分列。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:29:12.937

Sure! No problem - try something like this:

```
SELECT 
    id, name,
    (SELECT phone, address
     FROM dbo.tmp_user u2
     WHERE u2.id = u1.id
     FOR XML PATH('data')) AS 'ExtraData'
FROM    
   dbo.tmp_user u1 
```

This gives me an output pretty exactly like the one you're looking for.

![enter image description here](../Images/50659aeda46c5ae7c78f1d1f7bdca3d9.png)

# php - 更新然后更换模具

> ID：10357206
> 
> 赞同：2
> 
> 时间：2012-04-27T20:11:02.630
> 
> 标签：php, mysql, sql

如果 user_id 有一行，那么我想更新，如果不插入（但我被告知使用替换）。在表中有 id （这是主键，auto inc）和 user_id （索引，会话相关）。我有一个表格，当数据更改时，它应该在数据库中为会话中的特定用户更改，否则它只是为会话中的特定用户添加

```
if (empty($err)) {

        $thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
        $abstract = mysql_real_escape_string($_POST['abstract']);

$query="UPDATE thesis SET thesis_Name ='$thesis_Name',
abstract='$abstract' WHERE id='$_SESSION[user_id]'
IF ROW_COUNT()=0
REPLACE INTO  thesis (thesis_Name,abstract)VALUES ('$thesis_Name', '$abstract')
";

mysql_query($query) or die();

 // query is ok?
 if (mysql_query($the_query, $link) ){

 // redirect to user profile
 header('Location: myaccount.php?id=' . $user_id);
        } 
```

有了这个页面就死了。

编辑：

```
`thesis` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`user_id` int(11) NOT NULL,
`thesis_Name` varchar(200) NOT NULL,
`abstract` varchar(200) NOT NULL,

 PRIMARY KEY (`id`),
 KEY `user_id` (`user_id`)
 ) 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:15:16.093

```
INSERT
INTO    thesis (id, abstract, thesis)
VALUES  ('$_SESSION[user_id]', '$abstract', '$thesis_Name')
ON DUPLICATE KEY
UPDATE
        abstract = VALUES(abstract),
        thesis_Name = VALUES(thesis_Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:17:07.830

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:20:03.260

您可以使用准备好的语句来执行此操作。您可以查看示例 sql ；

```
DROP PROCEDURE IF EXISTS `UPDATETHESIS`

|

CREATE PROCEDURE `UPDATETHESIS` (IN _id VARCHAR(50), IN _thesis_name VARCHAR(50), IN _abstract VARCHAR(50))

    NOT DETERMINISTIC

    CONTAINS SQL

    SQL SECURITY INVOKER

IF EXISTS (SELECT * FROM thesis WHERE id = _id)
    BEGIN
        UPDATE thesis SET thesis_Name = _thesis_name,
        abstract = _abstract WHERE id = _id    
    END
ELSE
    BEGIN
       INSERT INTO thesis (thesis_Name,abstract) VALUES (_thesis_name, _abstract)
    END 
```

你可以这样称呼`CALL UPDATETHESIS(userid, thesis_name, abstratc);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:20:28.420

您的代码中存在一些问题。首先，您不必在同一个查询中进行插入和替换：如果没有要替换的行，替换将插入（此外，我什至不确定您使用的 sql 语法是否正确）...

然后你做一个`mysql_query($query) or die()`可能是你的代码死的地方（可能是因为你使用的 sql 语法可能不正确）。

在那之后，您再次执行 mysql_query，这将再次重新执行查询。无论如何，如果您的查询不起作用，那么您的代码将在前一行中消失......

你能做的是

```
$query = "REPLACE INTO blablabla";
if (!mysql_query($query))
echo "the query failed";
else header ("location:blabla"); 
```

但是您的查询应该提到您想要更新的 user_id 像这样 REPLACE INTO thesis (id, thesis_Name, abstract) VALUES ('{$_SESSION[userid]}', '$thesis_name', '$abstract');

# c++ - 内联汇编 (__asm) 块可以阻止功能优化吗？

> ID：10357207
> 
> 赞同：5
> 
> 时间：2012-04-27T20:11:14.330
> 
> 标签：c++, visual-c++, x86, inline-assembly

使用 Microsoft Visual C++（不是 CLI，只是标准的本机 C++）时，内联汇编是否会导致函数的优化被禁用？

当我使用 IDA 检查时，块外的一些功能代码似乎确实发生了变化，但我不确定原因是什么。该函数（相对）简单，包含位操作和一些数学运算，但没有外部调用。

我能想到的其他可能原因是：

*   额外配置以启用内联汇编中的调试。
*   异常处理的改变（虽然看起来并不像这样）
*   由于某些未知的编译器逻辑，部分内联了其他内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T20:17:21.943

是的。请参阅 MSDN 文章：[优化内联汇编](http://msdn.microsoft.com/en-us/library/5hd5ywk0.aspx)以及[内联汇编的优势](http://msdn.microsoft.com/en-us/library/80ccffx3.aspx)

来自文章：

> 函数中存在的`__asm`块会以多种方式影响优化。首先，编译器不会尝试优化`__asm`块本身。你用汇编语言写的正是你得到的。其次，__asm 块的存在会影响寄存器变量的存储。`__asm`如果寄存器的内容会被块更改，编译器会避免在块中注册变量`__asm`。最后，一些其他函数范围的优化将受到在函数中包含汇编语言的影响。

# excel - VBA Excel - 功能卡住

> ID：10357215
> 
> 赞同：2
> 
> 时间：2012-04-27T20:11:56.380
> 
> 标签：excel, vba

我是新的 ti VBA，我想执行以下功能，希望有人可以帮助我

当我单击我的函数时，我需要设置一个从单元格 A2 开始的宏，会出现一个对话框，我可以在其中输入相关信息并将其插入到相关单元格中

将数据插入 3 个字段（B2、C2、D2）

然后选择 B3 我可以再次按下我的按钮再次做同样的变薄

继承人我的代码到目前为止

```
Dim StartCell As Integer

 Private Sub Cancel_Click()
     Unload GarageDimensions

End Sub

Private Sub LengthBox_Change()

If LengthBox.Value >= 15 Then
    MsgBox "Are you sure? You do realise it is just a garage!"
    Exit Sub
End If

End Sub
Private Sub Submit_Click()
'This code tells the text entered into the job reference textbox to be inserted _
into the first cell in the job reference column.

StartCell = Cells(1, 2)

Sheets("Data").Activate
If IsBlankStartCell Then

    ActiveCell(1, 1) = JobRef.Text
     ActiveCell.Offset(0, 1).Select

ActiveCell(1, 1) = LengthBox.Value
 ActiveCell.Offset(0, 1).Select

    ActiveCell(1, 1) = ListBox1.Value
    ActiveCell.Offset(0, 1).Select

    ActiveCell(1, 1) = ListBox1.Value * LengthBox.Value

Else
     Range("A1").End(xlDown).Offset(1, 0).Select

End If

Unload GarageDimensions

End Sub
Private Sub UserForm_Initialize()

With ListBox1
    .AddItem "2.2"
    .AddItem "2.8"
    .AddItem "3.4"
End With

     ListBox1.ListIndex = 0

End Sub 
```

提前感谢您的回答

亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:54:31.097

你不需要这个`Private Sub LengthBox_Change()`事件。您可以像我在下面所做的那样在事件中`LengthBox`或`Design Mode`事件中设置 TextBox 的 MAX 个字符。`UserForm_Initialize()`

此外，如果您硬编码，`Startcell`那么每次运行用户窗体时，数据将从 A2 开始，如果那里有任何数据，那么它将被覆盖。而是尝试找到可以写入的最后一个可用行。

顺便说一句，这是您正在尝试的（未**测试**）吗？

```
Option Explicit

Dim StartCell As Integer
Dim ws As Worksheet

Private Sub UserForm_Initialize()
    Set ws = Sheets("Data")

    With ListBox1
        .AddItem "2.2"
        .AddItem "2.8"
        .AddItem "3.4"
        .ListIndex = 0
    End With

    LengthBox.MaxLength = 14
End Sub

Private Sub Submit_Click()
    With ws
        '~~> Find the first empty row to write
        StartCell = .Range("A" & Rows.Count).End(xlUp).Row + 1

        .Range("A" & StartCell).Value = Val(Trim(ListBox1.Value)) _
        * Val(Trim(LengthBox.Value))

        .Range("B" & StartCell).Value = JobRef.Text
        .Range("C" & StartCell).Value = LengthBox.Value
        .Range("D" & StartCell).Value = ListBox1.Value
    End With

    Unload Me
End Sub

Private Sub Cancel_Click()
    Set ws = Nothing
    Unload Me
End Sub 
```

# php - PHP file_get_contents() 超时？

> ID：10357224
> 
> 赞同：2
> 
> 时间：2012-04-27T20:12:37.653
> 
> 标签：php, download, file-get-contents

我正处于构建 PHP 应用程序的早期阶段，其中一部分涉及使用`file_get_contents()`从远程服务器获取大文件并将它们传输给用户。例如，要获取的目标文件是 200 mB。

*   如果下载到服务器的时间过长，这个过程会超时吗？
*   如果是这样，有没有办法延长这个超时？
*   正在下载的这个文件是否也可以同时传输给用户，还是必须将文件保存在服务器上，然后在下载完成后由用户手动获取？

我只是想确保在我做太多事情之前知道我的选择或限制。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:15:34.977

是的，您可以使用[**`set_time_limit(0)`**](http://il.php.net/manual/en/function.set-time-limit.php)和**[`max_execution_time`指令](http://il.php.net/manual/en/info.configuration.php#ini.max-execution-time)**来取消 PHP 施加的时间限制。

您可以打开文件流，并将其无缝传输给用户。
阅读**[`fopen()`](http://il.php.net/manual/en/function.fopen.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:15:52.643

如果不是超时，您可能会遇到内存问题，具体取决于您的 PHP 配置方式。您可以通过代码手动调整很多这些设置，没有太大困难。

[http://php.net/manual/en/function.ini-set.php](http://php.net/manual/en/function.ini-set.php)

```
ini_set('memory_limit', '256M'); 
```

# orientation - 使用 Bullet 和 Ogre3D 平滑旋转

> ID：10357228
> 
> 赞同：1
> 
> 时间：2012-04-27T20:13:10.317
> 
> 标签：orientation, quaternions, ogre3d, bullet, bulletphysics

在我使用 Ogre3D 和 Bullet 物理实现的游戏中，我一直遇到一个关于实现角色定向的问题。

我所拥有的：角色正在移动的方向向量，以及它的当前方向。

我需要什么：设置角色的方向以面对它移动的方式。

我有一段代码可以满足我的要求：

```
btTransform src = body->getCenterOfMassTransform();
btVector3 up = BtOgre::Convert::toBullet(Ogre::Vector3::UNIT_X);
btVector3 normDirection = mDirection.normalized();
btScalar angle = acos(up.dot(normDirection));
btVector3 axis = up.cross(normDirection);
src.setRotation(btQuaternion(axis, angle));
body->setCenterOfMassTransform(src); 
```

“body”是我要定位的刚体。

然而，这个片段有几个问题：

1）当改变方向时，它往往会“抖动”，即它迅速面向一个方向，然后在将自己校正到它应该处于的方向之前大约一秒钟左右。

2) 大多数时候，代码运行时，我从 Bullet 的 btQuaternion 得到一个断言错误
`assert(d != btScalar(0.0));`

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:34:52.070

我认为你不应该对这些事情使用像'acos'这样的函数，因为它可能会导致边界情况的一些不一致，就像上面提到的 180 对 0 旋转一样。您还可以获得此类数据的高数值错误。

第二件事是——一般来说——你应该避免在物理引擎中设置明确的位置和旋转，而是施加力和扭矩来让你的身体随心所欲地移动。您当前的方法现在可能工作得很好，但是当您添加另一个对象并强制您的角色占据相同的空间时，您的模拟将会爆炸。在这个阶段很难修复它，所以最好从一开始就做好:)。

我知道找到正确的力/扭矩可能很棘手，但这是使您的模拟保持一致的最佳方法。

# perl - Perl 打印 $(^b)

> ID：10357234
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:13:45.140
> 
> 标签：perl

当我找到 Perl 的时候`$^O`，我很好奇是否还有更多这样的变量，因为`^`让我想起了一个正则表达式。当我进入

```
print "$(^b)"; 
```

它提出了一些数字：

```
1000 81 90 91 92 93 100 150 1000 
```

这些是什么意思？这是某种`0xdeadbeef`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T20:17:37.033

我认为您只是打印出[$(](http://perldoc.perl.org/perlvar.html)的值。

> 这个过程的真正gid。如果您使用的机器同时支持多个组的成员资格，请给出您所在的组的空格分隔列表。第一个数字是 getgid() 返回的数字，随后是 getgroups() 返回的数字，其中一个可能与第一个数字相同。
> 
> 但是，分配给 $( 的值必须是用于设置实际 gid 的单个数字。因此，在没有强制数字的情况下，不应将 $( 给定的值分配回 $(，例如通过添加零。请注意，这是与有效的 gid ($) 不同，它确实需要一个列表。
> 
> 您可以使用 POSIX::setgid() 同时更改实际 gid 和有效 gid。对 $( 的更改需要检查 $! 以在尝试更改后检测任何可能的错误。

这是比较：

```
diff <(perl -le 'print "$(";') <(perl -le 'print "$(^b)";')
1c1
< 20 20 402 12 33 61 79 80 81 98 100 204 401
---
> 20 20 402 12 33 61 79 80 81 98 100 204 401^b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:17:44.647

[`perldoc perlvar`](http://perldoc.perl.org/perlvar.html)有关所有各种内置变量的列表（以及它们的`use English;`等效名称） ，请参阅文档。

# visual-studio - googletest 和 VS2010：不能使用 EXPECT_EQ

> ID：10357235
> 
> 赞同：0
> 
> 时间：2012-04-27T20:13:45.843
> 
> 标签：visual-studio, visual-c++, googletest

我已经将一个项目转换为 VS2010。它包括一个基于 googletest 的单元测试项目。当我使用宏`EXPECT_EQ`时，我收到以下链接器错误：

> LNK2019：未解析的外部符号“class testing::internal::String __cdecl testing::internal::StrStreamToString(class std::basic_stringstream,class std::allocator > *)”(?StrStreamToString@internal@testing@@YA?AVString @12@PAV?$basic_stringstream@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 在函数“public: class testing::internal::String __thiscall testing”中引用::Message::GetString(void)const " (?GetString@Message@testing@@QBE?AVString@internal@2@XZ)

当我使用`EXPECT_TRUE`时，一切正常。有人知道这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:51:17.070

EXPECT_EQ 尝试将您的数据值转换为字符串以供显示；EXPECT_TRUE 没有。

在没有看到您的代码的情况下，您似乎正在测试一个用户类型，该功能可以编译但未链接，即未实现。

这是一个常见的问题。如果 EXPECT_TRUE 有效，您可能只想坚持下去。

# python - plotting more than one plot with different axes types

> ID：10357236
> 
> 赞同：1
> 
> 时间：2012-04-27T20:13:49.023
> 
> 标签：python, python-3.x, matplotlib, python-2.7

I have the following code but I want them to be on the same graph but different subplots.

What's the simplest way to create different axes?

```
from pylab import *

figure(0)
x =1
y = 2
plot(x, y, marker ='^', linewidth=4.0)
xlabel('time (s)')
ylabel('cost ($)')
title('cost vs. time')

figure(1)

x = 4
y = 100
plot(x, y, marker ='^', linewidth=4.0)
xlabel('cost ($)')
ylabel('performance (miles/hr) ')
title('cost vs. time')

show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:28:48.177

您可以使用`pyplot.subplots`. 我正在使用`pyplot`推荐用于编程的 api（参见： http: [//matplotlib.sourceforge.net/api/pyplot_api.html#pyplot](http://matplotlib.sourceforge.net/api/pyplot_api.html#pyplot)）

```
import matplotlib.pyplot as plt

fig, (ax0, ax1) = plt.subplots(ncols=2)
x = 1
y = 2
ax0.plot(x, y, marker ='^')
ax0.set_xlabel('time (s)')
ax0.set_ylabel('cost ($)')
ax0.set_title('Plot 1')

x = 4
y = 100
ax1.plot(x, y, marker ='^')
ax1.set_xlabel('cost ($)')
ax1.set_ylabel('performance (miles/hr)')
ax1.set_title('Plot 2')

fig.suptitle('cost vs. time')
plt.subplots_adjust(top=0.85, bottom=0.1, wspace=0.25)
plt.show() 
```

![结果图](../Images/2b57628878ceb4d1f1c0fd3328064d0d.png)

# jquery - jQuery 不再适用于 AJAX 返回

> ID：10357243
> 
> 赞同：0
> 
> 时间：2012-04-27T20:14:37.970
> 
> 标签：jquery, ajax

我有一个表单，提交时会调用我的 AJAX 并更新我的数据库，

```
$(".bill-upd-submit").click(function() {
         var elem = $(this);
         $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {
         // fade new data in
         elem.closest('li').html(data);
        });

    }); 
```

但是，当返回表单时，我的 jquery 不再起作用，有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:22:33.757

您正在替换具有事件的元素。尝试使用事件委托以使其保持绑定。

```
$("body").on("click",".bill-upd-submit",function(){...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:54:31.223

请试试

```
$(".bill-upd-submit").live("click",function(e) 
```

代替

```
$(".bill-upd-submit").click(function() 
```

这可能会对您有所帮助。

# java - no longer possible in Spring 3.1

> ID：10357249
> 
> 赞同：2
> 
> 时间：2012-04-27T20:15:07.660
> 
> 标签：java, spring, aspectj

Why was the attribute **mode** removed from Spring 3.1 [task xsd](http://www.springframework.org/schema/task/spring-task-3.1.xsd)? It's there in 3.0 version, and also the code in Spring 3.1 classes still check for the attribute and activate AspectJ mode is found.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T02:09:58.963

有趣的！可能只是一个错误 - 我推测这是一个错误的原因是因为仍然可以通过`@Configuration`using选择模式`@EnableAsync(mode=AdviceMode.ASPECTJ)`

这回答了您的部分问题，即为什么检查模式仍然存在于代码中 - 因为可以通过 @Configuration.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T06:48:32.993

这是一个[错误](https://jira.spring.io/browse/SPR-10177)。在 3.1.4/3.2.1 中修复。使用 spring-task-3.0.xsd 或 spring-task-3.2.xsd 作为解决方法。

# jquery - FlexSlider - reset slideshowSpeed when jumping to slide

> ID：10357256
> 
> 赞同：0
> 
> 时间：2012-04-27T20:15:25.433
> 
> 标签：jquery, flexslider

I have a website where I'm utilizing flex Slider. I have a navigation where the user can jump to slides.

It is a continuous carousel slide show. Right now I have slideshowSpeed set to 6000 milliseconds.

The problem is this: when the user jumps to a new slide, the slideshowSpeed is not reset.
For instance: we're on slide one, 2000 milliseconds elapse and the user clicks to slide 3\. Now there are only 4000 milliseconds remaining on slide 3\. I would like to reset the timer to begin the 6000 millisecond count again.

Anyone have a good idea on how to do this? maybe it isn't possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:00:39.710

我有一个问题，客户可以在继续之前确定每张幻灯片出现多长时间。我发现更改 slider.slideshowSpeed 确实会更改滑块中的 slideshowSpeed 属性，但不会产生任何影响。

在查看 flexSlider 代码的非最小版本时，我发现您在初始化滑块时设置的所有属性都放入了一个名为 vars 的对象中，因此要更改暂停滑块所需的时间，请将 vars 属性更改为slideshowSpeed 然后恢复滑块：

//暂停滑块

.slider.pause();

//更改滑块中的任何变量

slider.vars.slideshowSpeed = parseInt(slider.slides.eq(slider.currentSlide).attr("intermission")) * 1000;

//重新启动滑块

滑块.resume();

其中 slider.resume() 再次初始化动画。

在上面的示例中，我在 li 上有一个名为“intermission”的属性，其中有一个数字，用于确定幻灯片的新速度 x1000，因此它以 ms 为单位。

关于您的问题，我猜如果您暂停滑块然后再次恢复，滑块计时应该重置。

滑块.暂停（）；

滑块.resume();

试一试 - 我希望它对你有用。

也许某些属性 Getters 和 Setters 在 FlexSlider 中会很有用，但我想当有可用的解决方法（即使未记录）时，没有它们可以将文件大小保持在最低限度。

干杯，乔纳森

# asp.net - xslt 在 asp.net 中表现出色

> ID：10357262
> 
> 赞同：1
> 
> 时间：2012-04-27T20:15:40.873
> 
> 标签：asp.net, xml, excel, xslt, xslt-1.0

我必须从我的 asp.net 页面导出到 excel。我想采用 xml/xsl 的路由到 excel 而不是 datagrid 导出。在网络上我知道如何做到这一点。 [在此处输入链接描述](http://social.msdn.microsoft.com/Forums/ar/csharpgeneral/thread/c7ec0b70-9330-4af1-b8ec-d60118d71cac) 我想知道如何使用列跨度、颜色、行跨度等格式化 xsl。

```
<Table>
        <Row>
            <Cell><Data ss:Type="String">Row 1, Col 1</Data></Cell>
            <Cell><Data ss:Type="String">Row 1, Col 2</Data></Cell>
            <Cell><Data ss:Type="String">Row 1, Col 3</Data></Cell>
            <Cell><Data ss:Type="String">Row 1, Col 4</Data></Cell>
       </Row> 
```

xsl 就像上面一样，我想知道如何格式化列跨度，提供颜色等......任何可用的文档。如果我在加载 excel 时提供带有 html 格式的普通 xsl，它不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:12:04.343

我不知道这会有多大帮助，但请尝试将您的 excel 工作表保存为 xml 电子表格 2007/2010 格式。然后尝试使用记事本打开它，可以看到源代码。此外，如果您尝试修改记事本中的任何内容，您将在 excel 表中看到输出。

# php - Problems with PHP DOMDocument LoadHTML when parsing CDATA Sections in Script tags

> ID：10357264
> 
> 赞同：3
> 
> 时间：2012-04-27T20:16:01.210
> 
> 标签：php, javascript, html, domdocument, cdata

I have been getting this error when trying to parse HTML with a script tag using PHP's DOMDocument class.

```
Warning: DOMDocument::loadHTML(): Unexpected end tag : style in Entity, line: 71 in /var/www/signage-dev/dynaml/includes/page.php on line 95 
```

I have even tried CDATA tags but it has resulted in the same error

My script tag is

```
<script type="text/javascript">
//<![CDATA[
document.write('<style type="text/css"> .printBTN { display: inline; } </style>');
//]]>   
</script> 
```

This snippet is supposed to show a print button when JavaScript is enabled. I don't believe this is the most effective way of doing this (the previous developers created this), but even so, I wish to find a solution to this problem since I may run into this problem again in the future and it may not be as easy to fix as this is.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:11:53.620

这个问题似乎有解决方案[Why split tag when writing it with document.write()?](https://stackoverflow.com/a/236106/548806)

我猜 php DOM 比大多数浏览器更严格。我有时看到的解决方案是在链接答案下方的评论中发布的解决方案，用`<\/script>`或 在这种情况下将其转义`<\/style>`，但我认为只有脚本标签才有必要。

# .net - 如何将可为空的布尔值绑定到复选框？

> ID：10357266
> 
> 赞同：5
> 
> 时间：2012-04-27T20:16:10.747
> 
> 标签：.net, winforms, nullable

我将信息显示为`ThreeState`启用的复选框，并希望以最简单的方式使用可为空的布尔值。

目前我正在使用嵌套的三元表达式；但有更清晰的方法吗？

```
bool? foo = null;
checkBox1.CheckState = foo.HasValue ?
    (foo == true ? CheckState.Checked : CheckState.Unchecked) :
    CheckState.Indeterminate; 
```

** 请注意，复选框和表单是只读的。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:17:46.377

我就是这样做的。

我会添加一个扩展方法来清理它。

```
 public static CheckState ToCheckboxState(this bool booleanValue)
    {
        return booleanValue.ToCheckboxState();
    }

    public static CheckState ToCheckboxState(this bool? booleanValue)
    {
        return booleanValue.HasValue ?
               (booleanValue == true ? CheckState.Checked : CheckState.Unchecked) :
               CheckState.Indeterminate;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:20:25.200

更清楚的是一个有争议的陈述。例如，我可以说这更清楚。

```
if(foo.HasValue)
{
    if(foo == true) 
       checkBox1.CheckState = CheckState.Checked;
    else
       checkBox1.CheckState = CheckState.Unchecked;
}
else
    checkBox1.CheckState  = CheckState.Indeterminate; 
```

另一种选择是为此创建一个方法：

```
checkBox1.CheckState = GetCheckState(foo);

public CheckState GetCheckState(bool? foo)
{
    if(foo.HasValue)
    {
        if(foo == true) 
           return CheckState.Checked;
        else
           return CheckState.Unchecked;
    }
    else
        return CheckState.Indeterminate

} 
```

但是我喜欢你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:30:48.557

基于@Nathan对扩展方法的建议，我想出了这个：

```
public static void SetCheckedNull(this CheckBox c, bool? Value)
{
    if (!c.ThreeState)
        c.Checked = Value == true;
    else
        c.CheckState = Value.HasValue ?
            (Value == true ? CheckState.Checked : CheckState.Unchecked) :
            CheckState.Indeterminate;
} 
```

我唯一不喜欢的是，在设置“正常”复选框时：

```
checkBox1.Checked = someBool; 
```

与设置启用 ThreeState 的复选框相比：

```
checkBox2.SetCheckedNull(someNullableBool); 
```

后者只是感觉不同，它稍微调整了强迫症。:)

# java - Android request a url with out opening browser

> ID：10357270
> 
> 赞同：2
> 
> 时间：2012-04-27T20:16:41.027
> 
> 标签：java, android

So I have an arduino with an Ethernet shield and I am currently controlling it using browser url commands eg "192.168.2.1/digital/2/1" (digital pin 2 goes high), i want to have an android button which requests that url without opening it in the browser.. is that possible and how would i do it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:27:57.843

这就是我在 Android 中执行 URL 请求的方式：

```
public InputStream download(String url) {
    URL myFileURL = null;
    InputStream is = null;
    try {
        myFileURL = new URL(url);
        is = myFileURL.openStream();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
    return is;
} 
```

这将返回该 URL 中的任何内容，并且永远不会打开浏览器。您可以选择任何您想要对 InputStream 执行的操作。

# c# - Windows service installation assigning to the created user

> ID：10357272
> 
> 赞同：1
> 
> 时间：2012-04-27T20:16:59.477
> 
> 标签：c#, visual-studio, windows-services, installation, remoting

Whenever a windows service is installed/reinstalled, i want to assign the set user to the service ie. if the service is running under a user test123 with a password,i need to make sure when the installer is ran the service is attached to the same user (not to any localsystem (System.ServiceProcess.ServiceAccount.LocalSystem)).

* * *

```
 //Check whether my service exists- MyWinService is my service name.

     System.Management.SelectQuery sQuery = new System.Management.SelectQuery(string.Format("select Name,startname from Win32_Service where name ='MyWinService' ")); 
 using (System.Management.ManagementObjectSearcher mgmtSearcher = new System.Management.ManagementObjectSearcher(sQuery))
{
                        foreach (System.Management.ManagementObject service1 in mgmtSearcher.Get())
            {
string servicelogondetails =
string.Format("Name: {0} ,  Logon : {1} ", service1["Name"].ToString(), service1["startname"]).ToString();
MessageBox.Show(servicelogondetails).ToString();
              }
 } 
```

* * *

I am not able to find passsword property to assign it (I don't want to view/read, just assign back).

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418(v=vs.85).aspx)

```
System.ServiceProcess.ServiceProcessInstaller installer=new
System.ServiceProcess.ServiceProcessInstaller(); 

installer.Account = System.ServiceProcess.ServiceAccount.User; 
```

My question is if i assign to ServiceAccount.User, do i need to set again user name & password or if its ServiceAccount.User will take care of user name and password? If i need to assign password back to installer, how do i can do that? Thanks in advance.

```
installer.Password = <<something>>;
installer.Username = <<something>>; 
```

PS: System.Management.dll is referenced to the project & using System.Management is being added to the namespace in order for System.Management.SelectQuery to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:31:02.393

为安装程序分配用户名和密码是可选的。如果没有通过，安装服务时会提示。

如果要分配用户名和密码，可以通过读取一些外部配置文件并分配它们来实现。

我不知道有一种方法可以从现有服务中检索用户凭据并分配它们。

# visual-studio - Type provider calling another dll in F#

> ID：10357273
> 
> 赞同：4
> 
> 时间：2012-04-27T20:17:00.650
> 
> 标签：visual-studio, dll, f#, type-providers

In the construction of the internal representation for a provided type, I call indirectly in the quotation for the internal representation of my type, another dll, whose code I can modify.

Currently, when I consume the type provider, tells me it can't find such dll:

"Could not load file or Assembly xxxx or one of its dependency"

When I inspect VS using Process Explorer, though, I can see the dll XXX loaded... Are there anything to do to have the code in quotations accept code from outside dll ?

** update **

I tried with a simplified example, and it seems that it is possible to call such outside dll without any special thing to do. In my case, all the dll XXX depends on are loaded, I see them in Process explorer as well as in the modules windows when I debug devenv.exe itself....

I have no idea where to look to. Here is the inner exception.

** update **

If I copy the xxx dll and its dependencies in one of this path, the compiler works fine. I still wonder what can trigger devenv.exe to correctly show them loaded but not accessible.

```
=== Pre-bind state information ===
LOG: User = xxx\Administrator
LOG: DisplayName = bloombergapi, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Administrator\AppData\Local\Microsoft\VisualStudio\11.0\devenv.exe.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/bloombergapi/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/bloombergapi/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/bloombergapi/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/bloombergapi/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/bloombergapi/bloombergapi.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/bloombergapi.DLL. 
```

...

**ANSWER**

It seems impossible to call a function that takes as an argument a Type from another library. A union type works, but not a type proper... This is illustrated below

--Library.dll

```
namespace Library

module SampleModule = 
     type LocalUnion = | LocalUnion  of int

     type Localtype() = 
        member x.value = 2 
```

--LibraryTP.dll

```
namespace LibraryTP

module Module =
   open System.Reflection
   open Samples.FSharp.ProvidedTypes
   open FSharpx.TypeProviders.DSL
   open Microsoft.FSharp.Core.CompilerServices

   let f a = 
     Library.SampleModule.sampleFunction a a 

   let g (a:Library.SampleModule.LocalUnion) = 
      let (Library.SampleModule.LocalUnion(v)) = a
      v

   let ftype (a:Library.SampleModule.Localtype) = 
        a.value

   let createTP ns =
       erasedType<obj> (Assembly.GetExecutingAssembly()) ns "Outside"
       |> staticParameter "file"
          (fun typeName (parameterValues:string) ->
               erasedType<obj> (Assembly.GetExecutingAssembly()) ns typeName
               |+!> (   provideProperty 
                           "test"                             //OK
                           typeof<float>                   
                           (fun args -> <@@  g ( f 2 ) @@>)      
                         |> makePropertyStatic
                     )
               |+!> (   provideProperty 
                           "test2"                             //KO
                           typeof<int>                   
                           (fun args -> <@@ ftype ( Library.SampleModule.Localtype())  @@>)   
                        |> makePropertyStatic   
                     )
                  )

   [<TypeProvider>]
   type public CustomTypeProvider(cfg:TypeProviderConfig) as this =
      inherit TypeProviderForNamespaces()

      do this.AddNamespace("TP", [createTP "TP"])

   [<TypeProviderAssembly>]
   do() 
```

--Program.fs

```
 type sampleValue = TP.Outside<""> 

   [<EntryPoint>] 
   let main(args) = 
      let t = sampleValue.Test        //OK
      let tt = sampleValue.Test2      //KO 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T17:07:54.707

您的程序集可能会被加载到不同的[绑定上下文中](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)。当引用被反序列化时，它可能会尝试将程序集加载到一个绑定上下文，即使程序集已经加载到另一个上下文，此尝试也可能会失败。作为类型提供程序设计时程序集中的解决方法，您可以将处理程序添加到[AssemblyResolve 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)并尝试在已加载程序集的列表中查找目标程序集。

```
 do System.AppDomain.CurrentDomain.add_AssemblyResolve(fun _ args ->
        let name = System.Reflection.AssemblyName(args.Name)
        let existingAssembly = 
            System.AppDomain.CurrentDomain.GetAssemblies()
            |> Seq.tryFind(fun a -> System.Reflection.AssemblyName.ReferenceMatchesDefinition(name, a.GetName()))
        match existingAssembly with
        | Some a -> a
        | None -> null
        ) 
```

# java - SAX 回调未更新全局字符串缓冲区

> ID：10357274
> 
> 赞同：2
> 
> 时间：2012-04-27T20:17:07.307
> 
> 标签：java, sax, stringbuffer

需要帮助弄清楚为什么我的字符串缓冲区在用覆盖的 SAX 回调方法更新后为空。我的代码：

```
public class SAXXMLParser extends DefaultHandler
{
    SAXParserFactory factory;
SAXXMLParser dh;
SAXParser sax;
StringBuffer accumulator;
String remember = "";

public String saxParse( String msgToParse, String uriPathExpression )
        throws SAXException, IOException, ParserConfigurationException 
{
    System.out.println( "saxParse" );

    factory = SAXParserFactory.newInstance();
    sax = factory.newSAXParser();
    dh = new SAXXMLParser();
    InputStream is = new ByteArrayInputStream( msgToParse.getBytes() );
    sax.parse( is , dh );

    System.err.println( remember );
    return remember;
}

public void startElement( String uri, String localName, String elementName,           Attributes attrs )
{
    accumulator.setLength(0);
}

public void endElement( String uri, String name, String qName )
{
    System.out.println( qName );
    if( qName.equalsIgnoreCase( "my element" ) )
    {
        remember = accumulator.toString();
    }
}

public void characters( char[] ch, int start, int len )
{
    accumulator.append( ch, start, len );
}

public void startDocument()
{
    accumulator = new StringBuffer();
}
} 
```

在另一个类中，我调用 SAXXMLParser.saxParse(string, string) 期望返回一个字符串（记住），但记住始终为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:22:58.513

您需要返回`dh.remember`而不是`remember`

或者

打电话`sax.parse( is , this );`而不是`sax.parse( is , dh );`

# php - 为与我们的服务器交互的 chrome 扩展实施 google oauth2

> ID：10357281
> 
> 赞同：3
> 
> 时间：2012-04-27T20:17:41.107
> 
> 标签：php, javascript, google-chrome, google-chrome-extension, oauth-2.0

**需要什么**：一个 chrome 扩展，它使用 google ooauth2.0 登录扩展，并使用访问令牌将他的操作数据安全地发送到我的服务器，在那里我从访问令牌获取用户详细信息并保存他的操作，服务器实现在 php.ini 中。

**我所做的：使用重定向网址**[http://www.google.com/robots.txt](http://www.google.com/robots.txt)注册 Google API 访问“Web 应用程序的客户端 ID” ，如[http://smus.com/oauth2-chrome-extensions/](http://smus.com/oauth2-chrome-extensions/)所述.

基于相同的教程及其代码，我正在扩展中获取用户的访问令牌，并能够将其与数据一起发送到我的服务器..

**问题：** 1）现在在我的服务器上，我需要从该令牌获取数据..我需要调用[https://www.googleapis.com/oauth2/v1/userinfo?access_token=ya29.AHES6ZRCgM2nEI0-25KvlmIuZdSH6DbY1rhj9M4auzF86kHXobOeFA](https://www.googleapis.com/oauth2/v1/userinfo?access_token=ya29.AHES6ZRCgM2nEI0-25KvlmIuZdSH6DbY1rhj9M4auzF86kHXobOeFA)页面但它不起作用.. 2) 当我点击 chrome 中的检查弹出窗口时，我可以看到客户端 ID 和客户端密码，这个密码不应该是安全的吗？

因此，我完全迷失在流程中……访问令牌是否应该采用相同的格式……我什至不确定……如果有人做过类似的事情，请向我推荐一个完整的库，包括客户端和服务器端的工作..

PS 由于谷歌文档现在说 oauth1.0 已被弃用，并将很快被删除..（同时仅在 oauth1.0 中提供所有演示代码..）请不要建议任何 oauth1.0 库..

# javascript - 将一个 jquery get 请求数组传递给 $.when()

> ID：10357284
> 
> 赞同：0
> 
> 时间：2012-04-27T20:17:52.133
> 
> 标签：javascript, jquery

我有以下参数：

```
a = [{param:'a'}, {param:'b'}, {param:'c'}] 
```

我想为每个参数发出一个获取请求，如下所示：

```
a.map(function(ai){return $.get('myapi/get?ai='+ai.param)}) 
```

一旦所有的获取请求都完成了，我该怎么做？

我尝试过使用 $.when，如下所示：

```
$.when(
    a.map(function(ai){return $.get('myapi/get?ai='+ai)})
)
.done(function(results){
    results.forEach(function(ri, i){
        ri.success(function(result){
            a[i].result = result
        }
    }
    do_something_with(a)
} 
```

不幸的是，我显然误解了这个`$.when().done()`成语，因为当我打电话时`do_something_with(a)`我没有新的`.result`属性。我猜这是因为`when`看到一个数组，所以直接进入`.done()`，而不是等待每个组件`get`完成。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:19:37.937

你需要：

```
$.when.apply($, myArray); 
```

即使用`Function.apply`to 调用`$.when()`，`this === $`其余参数是数组的内容*，*`myArray`其中该数组包含每次调用返回的延迟对象`$.get`。

* * *

要回答您评论中的第二个问题，您可以通过此 map 函数传递您的延迟对象数组，该函数返回一个*新*的延迟对象数组，无论它是否成功，都将在每次 AJAX 调用完成时解析该数组。

```
var alwaysDef = def.map(function(old) {
    var def = $.Deferred();
    old.always(def.resolve);
    return def;
}); 
```

`.done`请注意，我不确定在此实例中最终将哪些参数（如果有）传递给最终函数。

如果这很重要，延迟对象总是按顺序调用，因此您可以`.done`为每个原始承诺注册一个处理程序，将 AJAX 结果存储在一个数组中以供以后使用，以及一个`.fail`存储`null`值的处理程序。

这将确保在您`.when`获得每个单独的结果之前不会调用您的最终处理程序。

# svg - 如何使笔划宽度不受当前变换矩阵的影响

> ID：10357292
> 
> 赞同：43
> 
> 时间：2012-04-27T20:18:48.217
> 
> 标签：svg, postscript, coordinate-transformation

在 SVG（以及 Canvas、Quartz、Postscript 等）中，变换矩阵会影响路径坐标和线宽。有没有办法进行调整，使线宽不受影响？也就是说，在下面的示例中，X 和 Y 的比例尺不同，这使得正方形变成了矩形，这还可以，但也会使两侧的线条变宽。

```
 <g transform="rotate(30) scale(5,1) ">
      <rect x="10" y="10" width="20" height="20" 
            stroke="blue" fill="none" stroke-width="2"/>
  </g> 
```

![矩形宽度缩放笔](../Images/2df3c2704334abad6bc419b28f999992.png)

我可以看到这在很多情况下都会很有用，但是有没有办法选择退出呢？我想我想要一个单独的笔 TM 或者能够将笔设置为 CTM 转换为圆形的椭圆，但我没有看到类似的东西。

缺乏这一点，我认为我不必告诉 SVG 我的 CTM 而是自己转换坐标，这意味着将原语转换`rect`为它们的`path`等价物。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-27T20:24:04.730

**编辑：**

您可以将一个属性添加到您的矩形中以完全获得此行为：

```
vector-effect="non-scaling-stroke" 
```

**这是错误的：**

如果您将变换直接应用于形状，而不是它所在的组，这将起作用。当然，如果您想将多个项目分组并将它们全部缩放在一起，那么这种方法将行不通。

```
<rect x="10" y="10" width="20" height="20" 
            stroke="blue" fill="none" stroke-width="2"
            transform="rotate(30) scale(5,1)"/> 
```

这也可能取决于您的 SVG 查看器；Inkscape 以您想要的方式呈现您的文件（笔画宽度不受比例影响），但 Chrome 呈现它，如您所示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T02:59:27.353

在后记中，描述路径和执行笔划是单独的事件，因此完全有可能拥有单独的“笔”TM。

```
%!PS
%A Funky Shape

matrix currentmatrix %save normal matrix for stroke pen
306 396 translate
72 72 scale
1 1 5 { pop
    360 5 div rotate
    1 0 translate
    0 0 moveto
    1 1 5 { pop
        360 5 div rotate
        1 0 translate
        1 0 lineto
        -1 0 translate
    } for
    -1 0 translate
    closepath
} for
setmatrix
[ 1 -3 4 2 0 0 ] concat %put some skew in the pen
10 rotate     %makes it look more "organic"
stroke
showpage 
```

# java - 使用 ThreadLocal 与 Atomic

> ID：10357295
> 
> 赞同：4
> 
> 时间：2012-04-27T20:19:02.477
> 
> 标签：java, multithreading, concurrency

根据`ThreadLocal`'s javadoc，它听起来像是一个特定于线程的容器，用于 1+ 原子字段。

目的是`ThreadLocal`表示单个 的所有原子字段`Thread`，还是仅在您有多个`Atomic*`需要逻辑分组的实例时提供便利容器？

我想我想知道为什么我会想要使用 a`ThreadLocal`而不是，比如说 an `AtomicLong`or `AtomicInteger`？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T20:20:38.610

的目的`ThreadLocal`是字段不必*是*原子的——不需要将它们的值与集中式内存同步。它们是线程本地的，仅存在于线程本地内存存储中。

> 为什么我要使用 ThreadLocal 而不是 AtomicLong 或 AtomicInteger？

`ThreadLocal`对于存储某些东西的每个线程副本非常有用。例如`SimpleDateFormat`，不幸的是不可重入的。

```
private final ThreadLocal<DateFormat> threadLocal =
        new ThreadLocal<DateFormat>() {
    @Override
    protected DateFormat initialValue() {
        return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS");
    }
};
...
// get one that is per-thread
DateFormat dateFormat = threadLocal.get(); 
```

这是一个有用的模式，因为这样我们就不必`synchronize`担心或担心任何`volatile`或其他具有内存屏障的原子操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:23:21.197

> 我想我想知道为什么我会想要使用 ThreadLocal 而不是 AtomicLong 或 AtomicInteger？

它们服务于**完全**不同的目的。`ThreadLocal`意味着您不必通过授予每个线程自己的对象副本来担心同步。因此，存储在 a 中的对象`ThreadLocal`不可能被多个线程访问。

`Atomic*`也意味着您不必担心同步，但它们专门用于跨线程共享。

# c# - 我如何处理从网页中抓取的特殊字符（xml 和字符串）

> ID：10357298
> 
> 赞同：0
> 
> 时间：2012-04-27T20:19:23.003
> 
> 标签：c#, special-characters

使用 HTMLAgility、C#、XML

我正在使用 HTMLAgility 来抓取网页，然后填充一个类结构，然后将其序列化为 XML 文档。

我正在处理的数据是吉他和弦，因此我需要管理一些特殊字符。

我正在努力解决的特殊字符是前面字符串中的中间字符“Aº7”（这意味着在音乐方面减少了）。

当我从网页中获取字符串时，我在监视窗口中看到一个黑色菱形的问号，这反过来又被填充到 XML 中。

我的选择是 a) 适当地处理字符，以便它在 XML 中呈现为字符。b) 将字符串中此字符的每个实例转换为单词“dim”

最好的解决方法是什么，因为在替换语句中确实找到了字符（使用字符（代码））。

我不确定我“应该”如何解决这个问题。

下面的代码是我用来抓取数据的（为了清楚起见，这是一个一次性完成的功能，一旦我拥有可用格式的数据，就永远不会再次使用！，只是为了创建一个 xml 序列化对象结构而构建）。

```
 public void BuildDBFromWebSite()
    {
        string[] chordKeys = { "A", "A#", "Ab", "B", "Bb", "C", "C#", "D", "D#", "Db", "E", "Eb", "F", "F#", "G", "G#", "Gb" };

        HtmlWeb web = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

        foreach (string chordKeyName in chordKeys)
        {
            //LOOP THROUGH THE CHORD KEYS
            chordKey theChordKey = new chordKey() { KeyName = chordKeyName };
            _keys.Add(theChordKey);

            //grab the tone page
            doc = web.Load("http://www.scales-chords.com/showchbykey.php?key=" + theChordKey.KeyName);

            HtmlNode chordListTable = doc.DocumentNode.SelectSingleNode("/html/body/div[@id='wrapper']/div[@id='body']/div[@id='left']/div[@id='visit']/table/tbody");            

            //  CHORDS
            HtmlNodeCollection chordRows = chordListTable.SelectNodes("tr");

            for (int i = 2; i < chordRows.Count; i++)
            {
                //LOOP THROUGH THE CHORDS
                Chord theChord = new Chord();

                HtmlNodeCollection chordInfoCells = chordRows[i].SelectNodes("td");
                HtmlNode chordLink = chordInfoCells[0].SelectSingleNode("a[@href]");

                //each of the next 3 cells can contain a bad glyph for diminished chords
                theChord.ChordName = chordInfoCells[0].InnerText;
                theChord.ChordNameText = chordInfoCells[1].InnerText;
                theChord.Family = chordInfoCells[2].InnerText;
                theChord.Importance = chordInfoCells[3].InnerText;

                //HtmlAgilityPack.HtmlAttribute href = chordLink.Attributes["href"];
                //HTMLAgility tries to encode the bad glyph but uses the wrong escape and breaks the href, work around is to manually strip the href myself
                string theURL = chordLink.OuterHtml;
                theURL = theURL.Remove(0,9);
                int startPos = theURL.IndexOf(">") - 1;

                theURL = theURL.Substring(0, startPos);

                const string theBadCode = "º";

                theChord.ChordNameURL = HTMLEncodeSpecialChars(theURL);
                theChordKey.Chords.Add(theChord);
            }

            //VARIATIONS ETC
            foreach (Chord theChord in theChordKey.Chords)
            {
                //grab the tone page
                doc = web.Load("http://www.scales-chords.com/" + theChord.ChordNameURL);

                HtmlNode chordMoreInfoTable = doc.DocumentNode.SelectSingleNode("/html/body/div[@id='wrapper']/div[@id='body']/div[@id='left']/div[@id='visit']/center/table[1]/tbody");
                HtmlNodeCollection chordMoreInfoRows = chordMoreInfoTable.SelectNodes("tr");

                theChord.Notes = chordMoreInfoRows[3].SelectNodes("td")[1].InnerText;
                theChord.Structure = chordMoreInfoRows[4].SelectNodes("td")[1].InnerText;
                theChord.BelongsTo = chordMoreInfoRows[6].SelectNodes("td")[1].InnerText;

                HtmlNodeCollection variationHTML = doc.DocumentNode.SelectNodes("/html/body/div[@id='wrapper']/div[@id='body']/div[@id='left']/div[@id='visit']/center/b");

                for (int iVariation = 1; iVariation < variationHTML.Count; iVariation=iVariation+2)
                {
                    Variation theVariation = new Variation();

                    theVariation.Notation = variationHTML[iVariation].NextSibling.InnerHtml;
                    theVariation.Difficuty = variationHTML[iVariation + 1].NextSibling.InnerText;

                    string[] theStrings = theVariation.Notation.Split(' ');
                    try
                    {
                        theVariation.String1 = theStrings[1];
                        theVariation.String2 = theStrings[2];
                        theVariation.String3 = theStrings[3];
                        theVariation.String4 = theStrings[4];
                        theVariation.String5 = theStrings[5];
                        theVariation.String6 = theStrings[6];
                    }
                    catch (Exception ex)
                    {

                    }
                    theChord.Variations.Add(theVariation);

                    Console.WriteLine(theChord.ChordNameText + " : " + theVariation.Notation);
                }
            }
        }

        this.SaveToDisk("C:\\chords.xml");
    } 
```

谢谢

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:53:38.340

您遇到的问题很可能是由于编码。该页面声明他们使用 charset `windows-1252`，因此像这样更改您的代码应该可以工作。

```
WebClient client = new WebClient();
client.Encoding = System.Text.Encoding.GetEncoding("windows-1252");
doc = web.Load(client.OpenRead("http://www.scales-chords.com/showchbykey.php?key=" + theChordKey.KeyName)); 
```

当然，如果您在哪里多次使用此函数，我会将`WebClient`实例的声明移出 foreach。

# matlab - 为什么神经网络会因为梯度而停止训练？

> ID：10357299
> 
> 赞同：3
> 
> 时间：2012-04-27T20:19:28.337
> 
> 标签：matlab, neural-network, nntool

我正在训练一个神经网络，由于梯度停止条件，它停止了训练。从我可以看到梯度 8.14e ^(-0.6)大于最小梯度 1e ^(-0.5)，那它为什么停止了？是不是因为梯度没有改善所以没有什么继续的意义？

我对神经网络（并使用 MATLAB 的 nntool）非常陌生，因此非常感谢任何帮助/解释。

![神经网络训练性能](../Images/997492bc40a64dcc907d3be1eb1584bd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:39:36.580

这不是神经网络问题，而是理解浮点表示的问题：

8.14e-06 = 8.14×10^-6 = 0.00000814 < 0.00001 = 1.0x10^-5 = 1e-05

# bash - 后缀管道邮件到脚本不起作用

> ID：10357300
> 
> 赞同：1
> 
> 时间：2012-04-27T20:19:29.360
> 
> 标签：bash, email, sh, postfix-mta

我已经完成了研究并尝试了很多方法，但无济于事，我仍然无法让我的 postfix 邮件运行脚本。

**/etc/aliases 的内容**

```
test2: "|/home/testscript.sh" 
```

**/home/testscript.sh 的内容 注意：我在脚本中尝试了多种方式。即使是简单的回声也不起作用。**

```
#!/bin/sh
read msg
echo $MSG 
```

我试过运行脚本，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:25:12.670

所以你会说它有效吗？

即使您成功地将邮件定向到脚本，您也不会看到“echo”命令的输出。如果您希望从脚本获得电子邮件响应，则脚本将需要调用`/bin/mail`（`sendmail`或联系 SMTP 服务器或其他东西）来生成消息。如果您只是想验证它是否正常工作，则需要创建一些可以看到它的输出——例如，通过将消息写入文件系统：

```
#!/bin/sh
cat > /tmp/msg 
```

您还应该查看您的邮件日志（通常但不一定`/var/log/mail`），看看是否有任何错误（或成功的迹象！）。

# java - 如何从 sql sever 2005 读取 java Servlet 中的阿拉伯字母？

> ID：10357301
> 
> 赞同：1
> 
> 时间：2012-04-27T20:19:30.490
> 
> 标签：java, eclipse, tomcat

我只得到结果？？？？？？当我使用 java Servlet 在 Eclipse 中读取数据库时

结果是英语

福特福克斯电动汽车达到 100 英里/加仑以上 福特开始生产福克斯电动汽车，声称它将在效率方面超越电动汽车竞争对手，同时它的目标是丰田普锐斯，其 C-Max 混合动力和插电式混合动力预计将在下半年推出明年的。

工作正常。

但作为阿拉伯语不起作用'D39H/J）//这应该是阿拉伯语'DEEDC）

```
package website;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class Home extends HttpServlet {

    private static final long serialVersionUID = 8443024680664769771L;

    public void doGet(HttpServletRequest req,
            HttpServletResponse res)
            throws ServletException, IOException {
        res.setContentType("text/html");
        res.setCharacterEncoding("utf-8");
        PrintWriter out = res.getWriter();
        out.println("<html>");
        out.println("<head>");
        out.println("<title>info");
        out.println("</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<center>");
        out.println("<table>");
        out.println("<tr>");
        out.println("<td>");
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

            Connection con = DriverManager.getConnection("jdbc:odbc:website");
            Statement stat = con.createStatement();
            //ResultSet rs=stat.executeQuery("select * from res where word='"+search+"' or web='"+search+"'");
            ResultSet rs = stat.executeQuery("select * from news");
            String hyper = null;
            while (rs.next()) {
                String header = rs.getString("headline");
                hyper = rs.getString("link");
                String info = rs.getString("info");
                out.println("<a href=" + hyper + ">" + header + "</a>");
                out.println("<p>" + info + "</p>");
            }
        } catch (SQLException e) {
            // TODO: handle exception
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        out.println("</td>");
        out.println("</tr>");
        out.println("</table>");
        out.println("</body>");
        out.println("</html>");

        out.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:05:37.927

尝试

```
 String header=rs.getString("headline").getBytes("utf-8");
                hyper=rs.getString("link").getBytes("utf-8");
                String info=rs.getString("info").getBytes("utf-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T17:15:03.243

*   经过大量搜索后，我发现了一个非常好的解决方法，即将阿拉伯语的列转换为 varbinary，然后将其作为字节放入您的 java 项目中，然后创建一个新字符串，该字符串将字节数组作为构造函数参数，这将使用阿拉伯编码“Windows-1256”来映射阿拉伯字符的正确值

    *   这是代码示例

SQL 选择语句：

```
select cast([column_name] as varbinary(max)) from [table_name] where [condition] 
```

爪哇代码：

```
 Statement stat = con.createStatement();
            ResultSet rs = stat.executeQuery("select cast([column_name] as varbinary(max)) from [table_name] where [condition]");
            while (rs.next()) {
                byte[] tmp = rs.getBytes("column_name");
                String cloumn_value = new String(tmp, "Windows-1256");
                //cloumn_value arabic value
            } 
```

# java - 试图从 txt 文件中填充二维 ArrayList

> ID：10357302
> 
> 赞同：1
> 
> 时间：2012-04-27T20:19:31.280
> 
> 标签：java, multidimensional-array, arraylist, java.util.scanner

这应该是一个 Sudoku Puzzle 求解器，并且需要我使用二维 ArrayList 来解谜。

我正在尝试使用 txt 文件中的数字填充 ArrayList。我的测试类中的代码可以制作一个 9x9 ArrayList 并使用我制作的循环填充数字 1-9，以测试填充二维 ArrayList 的工作原理。

```
import java.util.*;
import java.io.*;

public class test
{
    public static void main(String args[])
    {
        ArrayList<ArrayList<Integer>> data = new ArrayList<ArrayList<Integer>>(); 

    //Loop to add 9 rows
    for(int i=1; i<=9; i++)
    {
        data.add(new ArrayList<Integer>());
    }

    //Loop to fill the 9 rows with 1-9
    for(int k=0; k<9; k++)
    {
        for(int j=1; j<=9; j++)
        {
            data.get(k).add(j);
        }
    }

    //Loop to print out the 9 rows
    for(int r=0; r<9; r++)
    {
        System.out.println("Row "+(r+1)+data.get(r));
    }

    //Reads the file. Need to use this to set the array
    File file = new File("F:\\Data Structures 244\\FINAL PROJECT\\SudokuSolver\\sudoku.txt");

    try {

        Scanner scanner = new Scanner(file);

        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            System.out.println(line);
        }
        scanner.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    }
} 
```

当我尝试获取存储在 txt 文件中的数字并使用它们按照读取顺序填充 ArrayList 时，我的问题就出现了。我尝试了这段代码，以便它从 txt 文件中读取数字并通过重复将其放入 ArrayList 中，以便它将 txt 文件中的前 9 个数字放入 ArrayList 的第一行，然后转到下一个txt 文件中的行以及 ArrayList 来填充这些数字。

```
File file = new File("F:/Data Structures 244/FINAL PROJECT/SudokuSolver/sudoku.txt");

     //Needs this try and catch
     try {
        Scanner solutionFile = new Scanner(file);
            int cell=0;
        while (solutionFile.hasNextInt()) 
            {
                //Loop to fill the 9 rows with the numbers from the sudoku.txt
                for(int k=0; k<9; k++)
                {
                    for(int j=1; j<=9; j++)
                    {
                    cell = solutionFile.nextInt();
                    data.get(k).add(cell);
                    }

                }   
        }
        solutionFile.close();
       } 

      catch (FileNotFoundException e) 
      {
        e.printStackTrace();
    }

     for(int r=0; r<9; r++)
        {
            System.out.println("Row "+(r+1)+data.get(r));
        } 
```

我得到了`Exception in thread "main" java.util.NoSuchElementException` 这条线`cell = solutionFile.nextInt();`

这是 sudoku.txt 文件

```
346791528
918524637
572836914
163257489
895143762
427689351
239415876
684372195
751968243 
```

我一开始就这样尝试并得到了那个错误，但后来我尝试将所有数字放在一行上，这样我的 for 循环一次只能读取 9 个数字，但是当我测试打印 ArrayList 或应该在它添加它们之后，整个 ArrayList 都是空白的。

它没有从文件中读取数字并将它们放入 ArrayList 以便打印有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:26:35.360

一个整数可以是多个字符。您将整行读取为一个数字，然后在完成九次读取（每行 1 次）后失败。

您可以重新格式化您的文本文件，以便将数字分解：（我相信如果不是换行肯定会有空格）

很喜欢

```
3 4 6 7 9 1 5 2 8
... 
```

或者您可以阅读整个数字并自己解析

```
int temp = solutionFile.nextInt();

for(int i = 8; i > 0; i--) {
   int cell = temp / (10 * i);
   data.get(k).add(cell);
}

//add the last cell
int cell = temp % 10;
data.get(k).add(cell); 
```

或者您可以将值读取为字符串并解析它

```
String line = solutionFile.next();

for(int i = 0; i < line.length; i++) {
   Integer cell = Integer.parseInt(line.substring(i, i+1));
   data.get(k).add(cell);
} 
```

这不是打印数字列表的有效方法（ArrayList`toString`不会为您打印列表，您必须手动执行）

```
 for(int r=0; r<9; r++)
    {
        System.out.println("Row "+(r+1)+data.get(r));
    } 
```

应该是这样的

```
 for(int r = 0; r < data.size(); r++)
 {
    System.out.print("Row " + (r+1) + ": ");
    for(Integer num : data.get(r)) {
       System.out.print(num + " ");
    }
    System.out.println(); //to end the line
 } 
```

# ruby - Ruby 字符串替换

> ID：10357303
> 
> 赞同：19
> 
> 时间：2012-04-27T20:19:33.407
> 
> 标签：ruby

不知道这个术语叫什么（替代？），但是如果你在 python 中输入

```
num1 = 4  
num2 = 2  
print("Lucky numbers: %d %d" %(num1, num2)) 
```

你得到“幸运数字：4 2”

我如何在红宝石中做到这一点？

尝试执行上述方案时，如果我有一个变量，它就可以工作，但如果我需要插入多个变量，则括号不是有效的语法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-27T20:22:53.013

您可以在 Ruby 中使用称为*字符串插值的方法来完成此操作。*

前任：

```
num1 = 4  
num2 = 2  
puts "Lucky numbers: #{num1} #{num2}"; 
```

这里 #{} 中的每个变量都被解释为不是一个字符串，而是一个变量名，并且值被替换。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-27T20:28:16.600

```
num1 = 4  
num2 = 2  
print "Lucky numbers: %d %d" % [num1, num2] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-27T20:26:40.150

```
n1, n2 = 17, 42
puts "Lucky single number: %d" % n1
puts "Lucky multiple numbers: %d %d" % [ n1, n2 ]
puts "Lucky inline interpolation: #{n1} #{n2}" 
```

有关[`String#%`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25)方法中允许的格式的文档，请阅读[`Kernel#sprintf`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf).

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-26T16:25:36.237

您还可以使用哈希进行字符串替换。如果您有多个需要用相同字符串替换的实例，这很有用。

```
p "%{foo} == %{foo}" % {:foo => "bar" }
# => "bar == bar" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-27T20:29:12.057

最接近模仿 Python 中的语法的 Ruby 方法是`sprintf`和`format`，它们是彼此的别名。[您可以在Ruby Docs](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)中深入了解它们。

这是一个例子：

```
num1 = 4
num2 = 2
sprintf("Lucky numbers: %d %d", num1, num2) 
```

这将输出：“幸运数字：4 2”

括号当然是可选的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T20:24:31.773

这称为打印格式。

查看更多示例[Ruby 格式化打印](http://www.wellho.net/resources/ex.php4?item=r109/d4_6)

你试过类似的东西`"%d"%10` 吗？它评估为`"10"`

```
1.9.3-p0 :003 > "%02x"%(10)
 => "0a" 
1.9.3-p0 :004 > 

1.9.3-p0 :005 > print "Nicely formatted string with an int: %d" % 10
Nicely formatted string with an int: 10 => nil 
1.9.3-p0 :006 > 
```

# xna - 游戏 AI - 行为树

> ID：10357305
> 
> 赞同：3
> 
> 时间：2012-04-27T20:19:37.380
> 
> 标签：xna, artificial-intelligence, behavior-tree

您如何为游戏制作强大的 AI/脚本系统？

**1)**对于所有 NPC/环境/实体，您是否给他们一个单独的单一行为树（等等。巡逻行为、盟友行为、供应商行为、门行为）？如果屏幕上有 500 个单元，我应该对树进行完整传递（从根 -> 节点/动作开始）还是应该对所有单元进行 1 节点进度？

**2)**我在 update() 函数中做 AI 逻辑...但我听说有些游戏有独立的 AI 线程，有什么想法吗？

**3)**我想知道如何将我的游戏划分为部分/章节...我是否使用一个简单的变量 (EVENT="Mission 3") 来表示玩家的过往情况，并使其全部成为线性的？然后在上面的树中使用变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:38:09.403

我会尽力回答你的问题。

1.  我在静态类中执行所有分支逻辑和行为树，例如：

    ```
     public static class Behavior
    {
        //Branch
        public static Action Selector(Func<bool> cond, Action ifTrue, Action ifFalse) {
            return () => { if (cond()) { ifTrue(); } else { ifFalse(); } };
            }
        public static Action Sequencer(Action a, Action b) {
              return () => { a(); b(); }
            }

        //Example trees
        public static Func<bool> ifPlayerIsInSight = () => { return true; /*...true iff WorldState shows guard can see player...*/};

        public static Action shootAtPlayer = () => { /*...aim guard's weapon at player and fire...*/ };

        public static Func<bool> ifUnderFire = () => { return true; /*...true iff WorldState shows guard hears player gunfire...*/};

        public static Action takeCover = () => { /*...guard runs for nearest shelter... */};

        public static Action walkBackAndForthGuardingDoorway = () => { /*...default guard patrol behaviour...*/ };

        public static Action patrollingGuardBehaviour =
          Selector(Behavior.ifPlayerIsInSight, Behavior.shootAtPlayer,
            Selector(Behavior.ifUnderFire, Behavior.takeCover,
              Behavior.walkBackAndForthGuardingDoorway));
    } 
    ```

    1.  在 LateUpdate() 或最后执行它，这样它就不会滞后于主循环。

    2.  它是由你决定。您可以在每个行为树中实现一个“状态”，或者将其拆分并管理在什么时间使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T09:35:57.927

1.  每个 NPC/Agent 都有自己的行为树。树被更新并且它“知道”从哪里继续，所以效率通常相当好。
2.  AI 可以在主线程中更新，也可以在单独的线程中更新。这取决于你。
3.  这取决于你。

[行为](https://github.com/TencentOpen/behaviac)是一个非常优秀的。

behaviac 支持行为树、有限状态机和分层任务网络。行为可以在设计器中设计和调试，由游戏导出和执行。

C++版本适用于客户端和服务器端。

而且，它是开源的！

# javascript - turn.js 和谷歌分析

> ID：10357307
> 
> 赞同：0
> 
> 时间：2012-04-27T20:19:47.043
> 
> 标签：javascript, google-analytics, turnjs

我正在尝试通过 Google Analytics 收集 turn.js 插件上的事件或自定义变量跟踪。现在它是为自定义变量设置的。我正在尝试跟踪翻页时间。在插件中有一个名为“turned”的事件处理程序。这是一个在翻页时运行的事件。我在这里设置了我的分析，但他们错误地收集到谷歌。对此的任何帮助表示赞赏。我有下面的 JS 事件：

```
when: {

    turned: function(event, page, view) {

        _gaq.push(['_setCustomVar', 1, 'Page Spread Scope 1', 'page spread ' + view, 1 ]);
        _gaq.push(['_trackPageview']);

        }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:42:20.307

不知道你想要什么确切的数据，但我认为它是这样的。现在才写，所以没有完全测试。我确实调试了它，它似乎工作正常。它应该记录页面+页码，并且应该使用新的 _trackTiming 方法记录该页面上的时间

对于您的页面，请打开此代码段：

```
<script>
$('#magazine').turn().bind("click", function(event){
pagenumber = $('#magazine').turn('page');
myTimer();  
});
</script> 
```

然后这在你脑海中的某个地方。

```
<script>
var startTime = new Date().getTime();

function myTimer(event) {
  var endTime = new Date().getTime();
  var timeSpent = endTime - startTime;
  var hourInMillis = 1000 * 60 * 60;

  if (0 < timeSpent && timeSpent < hourInMillis) {
  _gaq.push(['_trackTiming', 'page-timer', 'time-on-page', timeSpent, pagenumber, 1]);
  _gaq.push(['_trackPageview', 'turnedpage-' +pagenumber]);
  }
 return this;
}
//wiremedia.nl
</script> 
```

# razor - mvc 剃须刀 Html.Raw("

> ID：10357309
> 
> 赞同：0
> 
> 时间：2012-04-27T20:20:02.617
> 
> 标签：razor

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:30:07.777

这是`ToString()`造成问题的原因。`Html.Raw`返回一个特殊的`HtmlString`告诉 Razor 它不需要编码，但随后您将其直接转回确实已编码的常规字符串。只需使用：

```
@Html.Raw("</div><div class=\"newDiv\">") 
```

# ios - 链接器错误：未定义符号，未找到符号

> ID：10357311
> 
> 赞同：3
> 
> 时间：2012-04-27T20:20:04.227
> 
> 标签：ios, xcode, linker

我收到这些 Apple Mach-O Linker 错误，但我不知道如何阅读这些内容。在我的项目中导入“CLCredentialHeader.h”和“CLCredentialHeader.m”后出现这些错误。

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_SFHFKeychainUtils", referenced from:
      objc-class-ref in CLCredentialHandler.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T20:23:28.700

确保它`SFHFKeychainUtils.m`出现在构建目标的“编译源”构建阶段。有时，将文件添加到 Xcode 中的项目不会将所有实现文件添加到适当的目标。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T05:25:46.543

有时当我从另一个项目拖放一个类并忘记在弹出的窗口中标记“添加到目标”时，我会得到这个。我认为这是一个非常合理的问题。错误消息也不是很直观。解决方案很容易在 XCode 中单击项目，然后单击“Build Phases”并打开“Compile Source”，然后说“+”。这里的一些图片比所有的话都说得更多。

所以如果错误看起来像这样，它告诉我 DataAccess 类是未定义的。

![在此处输入图像描述](../Images/e21bc628848ddcc7e683b446960bb84e.png)

我认为这是我刚刚拖放到项目中的一个类。我将 DataAccess.m 添加到我的项目中

![在此处输入图像描述](../Images/443b1d490580b10029f4aad51a144c44.png)

最初我可以通过标记“添加到目标”来避免它

![在此处输入图像描述](../Images/abf0164a1164ae78a176d57c2de2a217.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T08:44:56.700

如果上述答案对您不起作用，请检查您是否添加了安全框架。如果没有，则将其添加到目标的构建阶段部分。那么应该没问题:)

# windows - 从自定义 AMI 使用自动登录启动多个 ec2 windows 服务器

> ID：10357313
> 
> 赞同：1
> 
> 时间：2012-04-27T20:20:11.587
> 
> 标签：windows, amazon-ec2, ec2-ami

帮助！！！

我正在尝试创建一个 Windows ami，它在启动时（需要在短时间内启动多个 [20] 实时服务器）自动登录并运行 .exe 应用程序（不幸的是，我无法让应用程序作为服务运行）。机器名称也必须是唯一的。

问题在 sysprep 之前工作正常，但是当我从 ami 启动实例时，它无法登录，因为机器名称显然已从原始机器映像更改。

我管理它的唯一方法是不进行 sysprep，使用 ami，然后在启动时登录新机器并手动更改机器名称，并设置自动登录 sysinternal 工具。这并不理想，因为最终用户不是技术人员，而且时间限制不允许有效地执行此操作。

我已经黔驴技穷了！非常感激你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-31T14:50:58.527

我知道这是一个非常古老的问题。尽管如此，当我遇到类似问题时，谷歌还是让我想到了这个问题。我做了以下事情来解决我的问题。

*   根据您的喜好自定义实例。将使用此实例创建 AMI。

    *   创建具有管理员权限的新用户帐户。这是必需的，因为 Sysprep\Ec2ConfigService 将重置管理员密码。将此用户添加到组`Remote Desktop Users`中，以便您可以使用此用户帐户进行 RDP。
*   编辑 EC2 的 Sysprep 应答文件以启用自动登录。

    *   将以下内容附加到文件中`component`命名的节点`Microsoft-Windows-Shell-Setup``C:\Program Files\Amazon\Ec2ConfigService\sysprep2008.xml`

.

```
<AutoLogon>
  <Password>
    <Value>NewUser'sPassword</Value>
    <PlainText>true</PlainText>
  </Password>
  <Username>NewUser'sName</Username>
  <Enabled>true</Enabled>
  <LogonCount>999</LogonCount>
</AutoLogon> 
```

生成的文件应该类似于下面的代码片段。我已经删除了这个答案不需要的部分。

```
<?xml version="1.0" encoding="utf-8"?>
<unattend xmlns="urn:schemas-microsoft-com:unattend">
  <settings pass="oobeSystem">
    <!-- snip -->
    <component name="Microsoft-Windows-Shell-Setup" processorArchitecture="amd64" publicKeyToken="31bf3856ad364e35" language="neutral" versionScope="nonSxS" xmlns:wcm="http://schemas.microsoft.com/WMIConfig/2002/State" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <!-- snip -->    
        <AutoLogon>
          <Password>
            <Value>NewUser'sPassword</Value>
            <PlainText>true</PlainText>
          </Password>
          <Username>NewUser'sName</Username>
          <Enabled>true</Enabled>
          <LogonCount>999</LogonCount>
        </AutoLogon>
    </component>
  </settings>
  <!-- snip -->
</unattend> 
```

*   接下来我们编辑 EC2ConfigService 设置。

    *   在文件`"C:\Program Files\Amazon\Ec2ConfigService\Settings\BundleConfig.xml"`中，确保值为`SetPasswordAfterSysprep`is `Yes`。
    *   在文件中`"C:\Program Files\Amazon\Ec2ConfigService\Settings\config.xml"`，确保`state`节点具有`Enabled`plugin的值`Ec2SetPassword`。
    *   在文件中，确保的`"C:\Program Files\Amazon\Ec2ConfigService\Settings\config.xml"`值为。`RemoveCredentialsfromSysprepOnStartup``false`
*   您已经在登录时启动了一个 exe。`AutoLogonCount`使用相同的机制，还启动一个将从注册表中删除设置的脚本。这一步很重要，否则在 999 次（根据上面提到的示例）登录后，自动登录将停止。

.

```
powershell.exe  -command { Remove-ItemProperty -Path "HKLM:\Software\Microsoft\Windows NT\CurrentVersion\winlogon"  -Name AutoLogonCount -Force -ErrorAction 0 } 
```

*   现在我们可以启动 Sysprep。使用 UI 或以下命令。

.

```
%ProgramFiles%\Amazon\Ec2ConfigService\ec2config.exe -sysprep 
```

使用从上述实例创建的 AMI 启动的任何实例都会无限期地保留自动登录行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:03:53.913

不知道这个软件能不能帮上忙，看LogonExpert及其卫星文章：

1)[部署](http://www.logonexpert.com/help/install.html) 2)[命令行/vbscript 控制](http://www.logonexpert.com/help/command.html) 3) 调度

# java - 在 Spring Security 中检查现有的 HttpSession

> ID：10357314
> 
> 赞同：0
> 
> 时间：2012-04-27T20:20:17.500
> 
> 标签：java, spring, spring-mvc, spring-security

是否可以通过检查 Spring Security 中现有的 HttpSession 来对用户进行身份验证？我希望用户在一个 URL (http://example.com/auth) 上通过 CAS 进行身份验证，而不是其他 URL。例如，如果他们直接访问[http://example.com/content](http://example.com/content)，那么我想检查 HttpSession 并在他们尚未登录 CAS 的情况下返回 401 Unauthorized 代码。如果他们已经进入 /auth 页面并登录，那么进入 /content 将返回内容。这样做的主要原因是为了避免 CAS 在身份验证期间导致的任何重定向。

我是 Spring Security 的新手，不知道我是否需要自定义 AuthenticationManager、AuthenticationEntryPoint、两者或其他东西。AuthenticationManager 没有办法让我访问 HttpSession，并且 AuthenticationEntryPoint 似乎不是实现此功能的正确位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:09:46.523

Spring Security 没有使用 HTTP 会话。相反，您可以轻松调用此静态方法：

```
SecurityContextHolder.getContext().getAuthentication(); 
```

坦率地说，我认为您需要正确配置 Spring 安全性以避免检查身份验证并手动重定向到其他页面。

# javascript - JavaScript 按钮不起作用；代码与其他工作按钮相同吗？

> ID：10357315
> 
> 赞同：0
> 
> 时间：2012-04-27T20:20:18.080
> 
> 标签：javascript, jquery, html, css

我正在使用 HTML、CSS 和 JavaScript 编写网站。我在一个页面上有两个按钮，它们使用 JavaScript 在单击时显示信息（每个按钮在单击时淡出其他信息以节省空间）。但是相同的代码不适用于我的其他按钮？

**JavaScript**：

```
<script type = text/javascript>
$('#scoreButton20102011').click(function() {
    $("#maleRec20102011").fadeIn(1000);
    $("#femaleRec20102011").fadeIn(1000);
    $("#maleRec20112012").fadeOut(1000);
    $("#femaleRec20112012").fadeOut(1000);
});
$('#scoreButton20112012').click(function() {
    $("#maleRec20112012").fadeIn(1000);
    $("#femaleRec20112012").fadeIn(1000);
    $("#maleRec20102011").fadeOut(1000);
    $("#femaleRec20102011").fadeOut(1000);
});​
</script> 
```

2010/11 的按钮显示两个按钮文本，而 2011/12 的按钮使所有内容都淡出？我不明白为什么。

**CSS**：

```
#maleRec20112012 {
    border-top: 3px solid #000;
    border-left: 3px solid #000;
    border-right: 3px solid #000;
    border-bottom: 3px solid #000;
    position: absolute;
    display: none;
    right: 0;
    width: 350px;
    height: 400px;
}

#femaleRec20112012 {
    border-top: 3px solid #E6E6DC;
    border-left: 3px solid #E6E6DC;
    border-right: 3px solid #E6E6DC;
    border-bottom: 3px solid #000;
    position: absolute;
    display: none;
    left: 0;
    width: 350px;
    height: 400px;
}

#maleRec20102011 {
    border-top: 3px solid #E6E6DC;
    border-left: 3px solid #E6E6DC;
    border-right: 3px solid #E6E6DC;
    border-bottom: 3px solid #000;
    position: absolute;
    display: none;
    left: 0;
    width: 350px;
    height: 400px;
}

#femaleRec20102011 {
    border-top: 3px solid #E6E6DC;
    border-left: 3px solid #E6E6DC;
    border-right: 3px solid #E6E6DC;
    border-bottom: 3px solid #000;
    position: absolute;
    display: none;
    left: 0;
    width: 350px;
    height: 400px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:28:37.620

尝试使用

```
 <script type = text/javascript>
            $('#scoreButton20102011').live('click',function()
            {
                $("#maleRec20102011").fadeIn(1000);
                $("#femaleRec20102011").fadeIn(1000);
                $("#maleRec20112012").fadeOut(1000);
                $("#femaleRec20112012").fadeOut(1000);                  
            });
            $('#scoreButton20112012').live('click',function()
            {
                $("#maleRec20112012").fadeIn(1000);
                $("#femaleRec20112012").fadeIn(1000);
                $("#maleRec20102011").fadeOut(1000);
                $("#femaleRec20102011").fadeOut(1000);
            });

        </script> 
```

或尝试将代码放在 onready 函数中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:47:02.910

这个简化的 JSFiddle 是否按您的预期工作？[http://jsfiddle.net/9JAGK/](http://jsfiddle.net/9JAGK/)如果是这样，我猜你的问题实际上是在你的代码中的其他地方。也许检查可能分配给您的按钮或样式的任何其他事件，这些事件可能与淡入/淡出冲突？

# c# - C# 中的等效 java 强制转换

> ID：10357321
> 
> 赞同：4
> 
> 时间：2012-04-27T20:20:34.237
> 
> 标签：c#

我需要帮助来迁移 java 方法：

```
(int)System.currentTimeMillis(); //result -186983989 (java) return diferent values 
```

但在 C# 中总是返回相同的值：

```
DateTime Jan1st1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
TimeSpan span = DateTime.UtcNow - Jan1st1970;
Int32 resultado = (int)span.TotalMilliseconds; //result is always -2147483648 and i need same as java 
```

很少见，因为在调试 quickwatch 时显示正确的值，但在执行`resultado`中总是 -2147483648

**我需要这个 -186983989 结果，和 java 一样。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:25:31.510

您将需要使用 Int64（长）。Int32 不足以容纳该值。

```
Int32.MaxValue = 2,147,483,647
Int64.MaxValue = 9,223,372,036,854,775,808 
```

[http://forums.asp.net/post/1203789.aspx](http://forums.asp.net/post/1203789.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:23:31.790

TotalMilliseconds 是双精度，而不是 Int32。可能是你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:53:50.637

为了模仿溢出行为，你可以使用 unchecked 关键字来做一些事情，但我对 Java 的了解不够，无法知道这是否正确

```
DateTime Jan1st1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
TimeSpan span = DateTime.UtcNow - Jan1st1970;

unchecked{
     int mm = Int32.MaxValue;
     mm += (int)(span.TotalMilliseconds % Int32.MaxValue);
     Console.WriteLine(mm); 
} 
```

作为旁白 `-2147483648 = Int32.MinValue`

# javascript - JS：将范围作为参数传递，将其绑定到将返回的函数

> ID：10357324
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:20:41.697
> 
> 标签：javascript, function, scope, return, bind

是否可以在父函数的范围内定义一个函数，并在返回之前将通过父函数传递的参数绑定为其范围？

这是一个例子：

```
var myObject = {
    foo: "bar"
};

var myFunction = (function() {
    return function() {
        return this.foo;
    };
}).call(myObject);

myFunction.call(myObject); // I'd like to bind myObject as this does ...

myFunction(); // ... but I'd like to do it before invoking it, without .call() or .apply() 
```

或者另一个复杂的例子，它描述了我正在尝试做的事情：

```
var createMyCopy = function(original, self) {
    var copy;

    eval("copy=" + original.toString());

    console.log(copy()); // returns undefined
};

(function() {
    var self = "Hello world",
        myFunction = function() {
            return self;
        };

    console.log(myFunction()); // returns "Hello world"

    createMyCopy(myFunction);
})(); 
```

我正在尝试创建一个函数的副本，这样我就可以在不更改原始函数的情况下对其进行更改，但我也希望在副本中包含原始函数中定义的变量......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:26:36.553

你的意思是这样吗？

```
var myObject = {
    foo: "bar"
};

var myFunction = (function() {
    var self = this;
    return function() {
        return self.foo;
    };
}).call(myObject); 
```

我认为您在问题中混淆了范围和上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:27:58.900

我*想*你的意思是：

```
var myFunction = (function(obj) {
    return function() {
        return obj.foo;
    };
})(myObject); 
```

*立即调用*的函数表达式被传递`myObject`并返回一个新函数，其中该参数被绑定为变量`obj`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:22:54.020

我不确定你的意思，但你可以这样做：

```
var myObject = {
    foo: "bar"
};
function myFunction() {
    return this.foo;
}
console.log(myFunction.apply(myObject)); // bar 
```

的第一个参数`apply`是（即指的是`context`什么）。`this`的第二个参数`apply`是一个参数数组（但我在这里省略了，因为没有参数）。

# grid - Ext JS 4：更改 Ext-JS 网格单元格编辑小部件示例的宽度和高度

> ID：10357329
> 
> 赞同：0
> 
> 时间：2012-04-27T20:21:22.487
> 
> 标签：grid, height, width, extjs

我正在努力弄清楚如何更改 Ext JS 网格（*或任何 Ext JS 小部件*）的宽度和高度。它们似乎总是保持在固定的高度和宽度。有没有人这样做过？我只是想获得一个概念证明，用于针对其他 JavaScript UI 框架评估这个框架。

这是我现在正在玩的示例：

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/cell-editing.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/cell-editing.html)

网格有不同的 div HTML 标签，但不幸的是，列和数据是通过 JavaScript 动态构建的，您无法通过查看 HTML 源代码看到标记。下面的 div HTML 标签是围绕网格列和数据的 4 个组件。我可以在 Firebug 和 Google Chrome 开发人员工具中更改样式，但不能在实际的 CSS 中更改。

构成 Ext JS 网格的 DIV HTML 标记：

```
gridpanel-1010_header
toolbar-1018
headercontainer-1011
gridpanel-1010-body 
```

以下是“cell-editing.html”示例中使用的样式。我猜它一定在这儿的某个地方。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cell Editing Grid Example</title>
    <link rel="stylesheet" type="text/css" href="../../resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="../shared/example.css" />
    <link rel="stylesheet" type="text/css" href="../ux/css/CheckHeader.css" />
    <script type="text/javascript" src="../../bootstrap.js"></script>

    <script type="text/javascript" src="cell-editing-keith.js"></script>
</head>
<body>
    <div id="editor-grid"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:19:36.450

如果您自己有网格，您似乎可以使用 JavaScript 属性修改宽度和高度。您不应该像以前那样在 CSS 中控制这些属性。

您可以在实例化对象时定义“宽度”和“高度”属性。请注意，如果使用百分比，Ext JS 代码将会崩溃。如果您使用数字，则假定它以像素为单位。如果您想使用百分比来执行此操作，请确保在百分比周围加上单引号。

```
var grid = Ext.create('Ext.grid.Panel', {
  ...
  width: '100%',
  height: 300,
  ...
}); 
```

如果您不知道最终用户正在查看小部件的设备（计算机显示器、平板电脑、智能手机等），并且小部件/容器嵌入在另一个容器中，则使用 E​​xt JS 布局可能更有用。布局定义容器如何调整其子容器的大小。我注意到这与 Java Swing UI 架构非常相似。Ext JS 框架的开发人员做了一个非常好的方法来总结您在网页中找到的布局，就像用户界面设计人员使用的架构一样。

**容器布局（又名布局）：**在其父*容器*中组织 HTML 元素并管理其子项目的大小（“项目只是 Ext JS 框架用于您添加到容器的对象列表的属性名称）

```
- Auto (default layout)
- Anchor
- Absolute
- Table
- Column
- Card
- Hbox
- Vbox
- Accordian
- Border
- Box
- Fit 
```

**组件布局：为***组件*组织 HTML 元素

 *```
- Dock Layout
- Toolbar Layout
- Field Layout (formerly known as Form Layout in Ext JS 3)
- TriggerField Layout 
```*

# php - 回显一个数组键..如何？

> ID：10357331
> 
> 赞同：-2
> 
> 时间：2012-04-27T20:21:46.580
> 
> 标签：php, codeigniter, simplepie

我希望将我的数组键的值回显到该控制器的视图中。我无法完全弄清楚。因此，对于第一个提要，我想将 mmafighting 回显到视图中。然后它将遍历其余部分。

这是我的控制器代码：

```
function index()
{
$this->load->library('simplepie');
       $feeds = array('mmafighting' => 'http://www.mmafighting.com/rss/current',
                    'bbc' => 'http://feeds.bbci.co.uk/news/world/us_and_canada/rss.xml',
                    'bloodyelbow' => 'http://www.bloodyelbow.com/rss',
                    'ufc' => 'http://www.ufc.com/rss/news',
                    'hackernews' => 'http://news.ycombinator.com/rss',
                    'msnbc' => 'http://www.msn.com/rss/news.aspx',
                    'msnbc2' => 'http://www.msn.com/rss/msnmoney.aspx',
                    'msnbc3' => 'http://www.msn.com/rss/msnshopping_top.aspx'

                 );
    foreach ($feeds as $site=>$url)
    {
        $data['feed'][$site] = new SimplePie();
        $data['feed'][$site]->set_feed_url($url);
        $data['feed'][$site]->set_cache_location(APPPATH.'cache');
        $data['feed'][$site]->set_cache_duration(300);
        $data['feed'][$site]->init();
        $data['feed'][$site]->handle_content_type();
    }
    $this->load->view('feedsview', $data);
} 
```

这是我的视图代码：

```
<?php
$feedCount = 0; 
$rowCount = 0;
?>
<?php foreach ($feed as $site): ?>

    <?php if ($site->data): ?>
            <div class="feed">
            <h2><?php // echo original array key here ?></h2>
            <ul>
            <?php $items = $site->get_items(0, 5); ?>
            <?php foreach ($items as $item): ?>
                <li><a href="<?php echo $item->get_link(); ?>"><?php echo $item->get_title(); ?></a></li>
            <?php endforeach; ?>
        </ul>
        </div>
        <?php endif; ?>

<?php $feedCount++; ?>
<?php if ($feedCount === 3) {
    echo '<div style="clear:both;">&nbsp;</div>';
    $feedCount = 0;
    $rowCount++;
        if ($rowCount === 2) {
            echo '<div style="width:1000px; margin-bottom:20px;height:100px; border:1px solid #252525; float:left;">images</div>';
            }
    } ?>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:26:42.647

我不确定我是否理解，但如何做到这一点：

```
<?php foreach ($feed as $key => $site): ?>

    <?php if ($site->data): ?>
            <div class="feed">
            <h2><?php echo $key ?></h2>
            <ul> 
```

# sql - Oracle：DISTINCT 与 GROUP BY 与 ROW_NUMBER

> ID：10357333
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:22:03.863
> 
> 标签：sql, oracle

在 Oracle 中，以下三个查询中哪个最有效：

```
SELECT DISTINCT a, b
FROM tab 
```

* * *

```
SELECT a, b
FROM tab
GROUP BY a, b 
```

* * *

```
SELECT a, b
FROM
(SELECT a, b, row_number() OVER (PARTITION BY a, b ORDER BY a, b) rn
 FROM tab )
WHERE rn = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:51:16.150

第一个是正确的选择，因为其他是实现相同目标的古怪和非标准（并且有点反常）的方式。

# java - 应该选择哪种数据结构？[安卓词典]

> ID：10357342
> 
> 赞同：1
> 
> 时间：2012-04-27T20:22:37.110
> 
> 标签：java, android, algorithm, dictionary

几个小时后，我从互联网上搜索了信息，我仍然不确定。我的问题是：我想在 android 设备（java 基础）上实现一个字典，我的要求是速度，然后是内存效率，但我无法决定使用哪种数据结构进行搜索。我有一个数据结构列表，帮助我理解它们并选择一个：

*   三叉树
*   特里
*   阿霍-科拉西克树
*   [...您的建议 DS...]

如果有人可以指导我在我们找到单词后获得结果（许多领域：发音，意思，例句......），那将是非常友好的？我们会将这些信息保存在另一个数据文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:42:39.060

在搜索数据结构之前，您需要列出设计的主要关注点。这本词典提供了哪些功能？它的主要特点是什么？快速搜索？空间紧凑？插入/删除友好吗？交叉引用友好吗？只有当你想到这些时，你才能衡量候选结构的好坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:28:52.617

它可以通过多种方式实现，其中之一是 Trie。路线由数字表示，节点指向单词集合。trie的用法在[这里解释](http://stevehanov.ca/blog/index.php?id=120)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T23:48:37.000

同意亨特麦克米伦的评论。如果您需要像常规字典一样按字母顺序对单词进行排序，您可以使用 Java TreeMap，它是一个 SortedMap。

# css - Facebook like 按钮被剪裁

> ID：10357352
> 
> 赞同：0
> 
> 时间：2012-04-27T20:23:30.510
> 
> 标签：css, facebook

也许你可以帮助我。我的 Facebook 按钮工作正常，但现在似乎有两个问题：

1) 发送按钮不再可见。这是对 Facebook 的改变吗？

2）即使我将溢出设置为自动，它也会被我的页面容器裁剪（我什至尝试过可见）

我的网站是[http://easydiablo3.com](http://easydiablo3.com)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:28:11.863

1) 是的，这是一个 Facebook 错误： http: [//developers.facebook.com/bugs/299191993489218 ?browse=search_4f9b0114e02557f41110709](http://developers.facebook.com/bugs/299191993489218?browse=search_4f9b0114e02557f41110709)

2) 除了重叠的横幅广告外，Chrome 中的位置对我来说很好：http: [//screencast.com/t/1FRbfxbk](http://screencast.com/t/1FRbfxbk)

# c# - 使用多个 using 语句来处理 DataSet 和 DataTables

> ID：10357356
> 
> 赞同：0
> 
> 时间：2012-04-27T20:23:45.410
> 
> 标签：c#, dataset, disposing

你能解释一下这里发生了什么吗？

```
using(DataSet ds = GetDataSet()) // will this get disposed? if yes (when?)
{
    using(DataTable dt = ds.Tables[0]) /* in this line is ds available for dt? i found some issue with this kind of statement. dt gets null after this line */
    {
          // i know that ds is available here.
          //some code
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:30:22.997

```
using(DataSet ds = GetDataSet()){

  using(DataTable dt = ds.Tables[0])
  // dt will be NULL if there are no tables in ds
  {
    // both dt & ds will be available here

  }// dt will get disposed

}// ds will be disposed at this point... 
```

等效的代码是：

```
try{
 DataSet ds = GetDataSet();
 try{
  DataTable dt = ds.Tables[0];
  // dt will not be null if there are any tables in ds
  // Both ds & dt available here...
 }
 finally{
  dt.Dispose();
 }
}
finally{
 ds.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:32:03.090

是的，`ds`将在您样品的最后一个末端支架处进行处理。是的，`ds`在您构建时可用`dt`。原因`dt`很`null`简单，`ds.Tables[0]`就是返回 null。从[文档](http://msdn.microsoft.com/en-us/library/cfsd7dz4.aspx)中，该`null`值意味着`DataTable`您正在寻找的不存在。我的猜测是`DataSet`没有填充值。[有关示例](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)，请参阅文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:29:39.103

该`using()`语句接受 any`IDisposable`并`Dispose()`在它的范围通过异常或正常执行退出时调用它。

因此`dt`将在通过内部关闭时首先处理`}`，然后`ds`在通过外部关闭 '}` 时进行处理：

```
using(DataSet ds = GetDataSet()) 
{
    using(DataTable dt = ds.Tables[0]) 
    {
        ....
    } // <-- dt disposed here or if unhandled exception thrown

} // <-- ds disposed here or if unhandled exception thrown. 
```

有关详细信息，请参阅[有关 Using 语句的 MSDN 部分](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:30:15.653

是的，它会在你离开相应的括号后被处理掉。使用调用 dispose，它只能与实现 IDisposable 的对象一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T20:30:48.657

这里的[使用语句](http://msdn.microsoft.com/en-us/library/aa664736%28v=vs.71%29.aspx)：

```
using (ResourceType resource = expression) { ... } 
```

相当于：

```
ResourceType resource = expression;
try {
    ...
}
finally {
   if (resource != null) ((IDisposable)resource).Dispose();
} 
```

（如果`ResourceType`是值类型，将省略空检查）。

所以在你的情况下，第一次使用是有意义的，假设`GetDataSet()`创建一个新的数据集，以后没有其他人会使用它。第二个`using`没有多大意义 - 据我所知，您不需要处理数据集表。

您得到 null 的原因`dt`可能是`Tables`集合中没有任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T20:31:35.857

像这样想：

`using resource`

您的`resource`遗嘱将住在这里，所有其他“使用”声明或其他方法的孩子都可以使用

`end of using`

所以对你的问题：

`ds`将在第一个`using`区块的末尾处理

`dt`将获得第一个`DataTable`发现`ds`并将在其自己的`using`块的末尾进行处理

发生这种情况是因为`using`这种形式的语句将始终调用`Dispose`它所管理的资源的方法，因此，您只能将`using`块用于实现的类型`IDisposable`

# haskell - text GHC only, aeson Portable？

> ID：10357361
> 
> 赞同：4
> 
> 时间：2012-04-27T20:24:55.063
> 
> 标签：haskell

[text](http://hackage.haskell.org/package/text)包被标记为 GHC-only，而aeson[包](http://hackage.haskell.org/package/aeson)被标记为 Portable。但是，`aeson`依赖于`text`包中的 Data.Text.Internal。但如果`text`是 GHC-only，那么肯定`aeson`也必须如此吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T21:40:13.180

大多数时候，便携性/稳定性标签并没有真正被认真对待，对于它们的使用方式没有社区标准。`aeson`当然不能跨 Haskell 实现移植，因为它使用 Template Haskell，它只在 GHC 上可用。然而，我会假设它可以跨平台移植（即 Mac、Windows、Linux），所以我猜它使用这个术语的方式与使用方式不同`text`。

# sql - 如何在一个语句中同时使用“插入”和“值”

> ID：10357362
> 
> 赞同：0
> 
> 时间：2012-04-27T20:24:58.157
> 
> 标签：sql, database, select, insert

我想将 2 张桌子连接在一起。TableB 有 15 个不同的值，我想进入 TableA（我要插入的那个）。但是，我还想为 TableA 插入单独的值。例如，我想将 TableB 中的 15 个单独的值插入到 TableA 中，但我还希望能够在 TableA 中插入另一个字段（“区域”）

```
 --so far I have this
 insert into TableA ((id)
      select distinct(id) from TableB
      group by id), region values('NYC') 
```

我不确定如何在其中插入区域...以上失败了。我需要对那里的区域进行硬核，因为它们不在另一张表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:27:54.533

你可能想要这样的东西：

```
insert into TableA (id, region)
select distinct id, 'NYC'
from TableB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:27:40.033

```
INSERT INTO TableA (ID, REGION)
SELECT ID, 'NYC'
FROM TableB
GROUP BY ID 
```

而已。

`DISTINCT`是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:27:44.330

尝试这样的事情：

```
insert into TableA (id, region)
    select distinct id, "NYC"
    from TableB
    group by id 
```

# android - AdMob Android 无法正常工作

> ID：10357364
> 
> 赞同：0
> 
> 时间：2012-04-27T20:25:07.547
> 
> 标签：android, admob

我按照本教程了解如何在我的应用程序中实施 AdMob。

[https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals?hl=no-NO](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals?hl=no-NO)

当我尝试获取我的布局时，它不起作用，它只说布局`main cannot be resolved or is not a field`。

但是在我的布局文件夹中，我有一个名为 main.xml 的布局。

错误发生在这行代码中：

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.main); 
```

我该如何解决这个问题？我读过导入 R 文件可以使它工作，但它不适合我。

**更新**

好的，只是我这边的一个错误，布局没有任何 ID。但是当我尝试在这里实现这段代码时：

```
 adView = new AdView(this, AdSize.BANNER, "key");
 RelativeLayout layout = (RelativeLayout)findViewById(R.id.main);
 layout.addView(adView);
 adView.loadAd(new AdRequest()); 
```

该`adView`对象是唯一的`NULL`，当我尝试启动它时，我的应用程序崩溃了。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:27:25.920

您实际上应该确保您没有导入 R 文件。我之前有过几次，删除那个导入修复了它。仔细检查以确保它没有被导入

希望这可以帮助！

# c# - 孩子之间的 C# 事件

> ID：10357371
> 
> 赞同：1
> 
> 时间：2012-04-27T20:25:36.937
> 
> 标签：c#, events, delegates, children, loose-coupling

我在事件中遇到了一些麻烦：

可以说我有 3 个班级 1 是“主人”和 2 个“奴隶”。

主实例化从属。

其中一个从属是调试显示类，它报告正在运行的程序的各个方面。另一个从站包含自己的对象，其中包含调试显示需要报告的变量。

我想到的第一件事就是在从属和从属的子类上公开一个属性，然后让主控将它传递给调试显示，但这似乎是非常糟糕的设计？

所以我做了一些阅读并了解了 C# 中的委托（我了解基础知识并且能够自己编写一些简单的示例）。

我发现的所有示例都涉及侦听器也是引发异常的类的发起者。那么我应该如何支持两个孩子之间的传递/处理事件（或数据）？

非常感谢任何建议。

PS：我试图用谷歌搜索，但发现了大量涉及事件/代表但不太像这样的例子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:28:22.120

使用事件时，您可以将两个不同的类连接在一起，即

```
o1.MyEvent += o2.MyHandler; 
```

仅仅因为 WinForms 设计者总是使用`this.MyHandler`并不意味着它是唯一的选择。

您还可以仔细阅读 Microsoft 文档[How to: Implement Property Change Notification](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

# json - 自定义 JSON 服务

> ID：10357373
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:25:49.403
> 
> 标签：json, liferay

我们如何开发自定义 JSON 服务的任何线索。

我们没有 service.xml，因为在内部该服务将调用 liferay 服务来检索活动。从我们的portlet 中，我们希望通过Ajax 调用这个Custom JSON Service 并显示结果。

我们不想使用serveResource。

问候，蒂娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:40:53.553

使用 XMLHttpRequest() 对象：

```
<%@include file="include.jsp"%>
<script type='text/javascript'>
function <portlet:namespace/>myService() {
var xhr = new XMLHttpRequest();
//...
var url = "<%=request.getContextPath()%>/myCustomJSONService";
xhr.open("GET", url, true);
xhr.send();
}
</script>
<table>
<tr>
<td><b><a href="#"
<!--Creates Refresh hyperlink-->
onclick="<portlet:namespace/>myService();"
style="color: black;">Refresh</a></b></td>
</tr>
</table>
<br/>
<div id="<portlet:namespace/>messageText">
</div> 
```

这里的 myCustomJSONService 可以是一个向用户发送一些 JSON 数据的 servlet。

请参阅 A. Sarin：Portlet 实战，第 12.2.3 章：“使用 portlet 或 servlet 组件处理 Ajax 请求”

# vim - 是否可以在 vimscript 中访问 vim 的命令行参数？

> ID：10357374
> 
> 赞同：18
> 
> 时间：2012-04-27T20:25:49.810
> 
> 标签：vim

我在写这个问题的时候找到了答案，所以我把它扩大了一点。我想访问`--servername`参数，以便在我的`.vimrc`文件中创建动态设置。

通过 vim 的帮助，我找到了`v:servername`变量，并且我的脚本正在运行。但是，现在我很好奇是否可以访问任意命令行参数。例如，如果我想知道 vim 是处于 Lisp 模式 ( `-l`) 还是调试模式 ( `-D`)，我该怎么做？他们似乎没有对应`v:`的变量。

这是我通过自动完成找到的变量`:help v:<Tab>` ![在此处输入图像描述](../Images/480e1b774d801b8da161c28d6cd6215c.png)

是否有从 vimscript 访问命令行参数的通用方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T21:36:19.897

奇怪的是，我认为答案可能是“不，没有直接的方法可以访问命令行上指定的启动选项”。

该`:args`命令 和`argv()`可用于访问启动时指定的文件名，但这不是您想要的。

我在 Vim 的论坛上看到有人提供了这个解决方案来获取 Linux 上的启动命令行：

```
:exe '!tr "\0" " " </proc/' . getpid() . '/cmdline' 
```

我假设 Windows 上有类似的命令。. . .

您可以在此处查看该论坛主题：

[http://groups.google.com/group/vim_use/browse_thread/thread/43773f27cdc10265/ad17ae8180c0fb6e?show_docid=ad17ae8180c0fb6e](http://groups.google.com/group/vim_use/browse_thread/thread/43773f27cdc10265/ad17ae8180c0fb6e?show_docid=ad17ae8180c0fb6e)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T21:36:54.713

我的谷歌搜索表明此功能已被提出但从未实施。但是，我确实想出了一些仍然有效的方法：

```
:echo split( system( "ps -o command= -p " . getpid() ) )
# => [ 'vim', ... arguments ... ] 
```

（在 OS X Lion 上测试。）

该`getpid()`函数获取 Vim 的 PID，然后我们`ps`使用选项在外部调用以返回进程的“命令”值，然后用于`split()`将命令拆分为列表。

# asp.net-mvc - mvc+jqm actionlink html文本问题

> ID：10357380
> 
> 赞同：1
> 
> 时间：2012-04-27T20:26:20.977
> 
> 标签：asp.net-mvc, jquery-mobile, razor, asp.net-mvc-4

我刚开始使用 MVC，我正在尝试构建一个示例，概念证明页面用于 mvc 与 jquery-mobile 的交互。我已经为此寻找答案，但我认为我知道的还不够多，无法制定适当的查询。

在我看来，我正在尝试生成具有这样功能的输出（从 jqm 演示站点采样）：

```
 <ul data-role="listview" data-inset="true">
        <li><a href="index.html">
            <h3>Stephen Weber</h3>
            <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
            <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
            <p class="ui-li-aside"><strong>6:24</strong>PM</p>
        </a></li>
        <li><a href="index.html">
            <h3>jQuery Team</h3>
            <p><strong>Boston Conference Planning</strong></p>
            <p>In preparation for the upcoming conference in Boston, we need to start gathering a list of sponsors and speakers.</p>
            <p class="ui-li-aside"><strong>9:18</strong>AM</p>
        </a></li>
    </ul> 
```

所以，我是这样工作的：

```
@foreach (var item in Model) {
    <li>
          @Html.ActionLink( LargeExpandedMultiContentText, "Edit", new { id = item.SysID })
        </li>
} 
```

我的问题，我不知道一个简单的提问方式，是，在 MVC 术语中，我如何填充变量，以便 ActionLink() 生成的 href 与我从 jqm 网站采样的样式相匹配？

我已经尝试过了，虽然它几乎可以工作，但我确信它不是“正确”的方式，尤其是当我到达将“Steven Weber”和其他字符串从项目/模型中拉出的地方......加上它对文本进行编码，但我确信有一种方法可以很容易地处理这个问题。

```
@foreach (var item in Model) {
    <li>
        @{ String txt =  "<h3>Stephen Weber</h3><p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p><p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>         <p class=\"ui-li-aside\"><strong>6:24</strong>PM</p>";
        }
        @Html.ActionLink( txt, "Edit", new { id = item.SysID })
    </li>
} 
```

谢谢，感谢您的帮助

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:53:46.157

我不确定是否可以`Html.ActionLink`用来构建如此复杂的动作链接。也就是说，Html Helpers 应该只是帮助函数，通过为您提供以通常需要的方式呈现 HTML 的快捷方式，让您的生活更轻松。你**不需要**使用它们。在这种情况下，我认为您应该使用普通的 html 标签，并`Url.Action`创建正确的 URL。

如果您想将此信息包含在可枚举模型中，我可能会执行以下操作：

```
@foreach (var item in Model) {
    <li><a href="@Url.Action(item.Action)">
        <h3>@item.Name</h3>
        <p><strong>@item.Title</strong></p>
        <p>@item.Message</p>
        <p class="ui-li-aside"><strong>@item.Time</strong>@item.TimePeriod</p>
    </a></li>
} 
```

注意：您正在寻找显示内容而不对其进行编码的功能是`@Html.Raw`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:15:32.750

在回答我的另一个“半问题”时，我发现了这个资源......

[http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

我相信底部的“剃刀代表”项目会满足我的需要。

```
@{
  Func<dynamic, object> b = 
   @<strong>@item</strong>;
}

@b("Bold this") 
```

# asp.net - 如何为我的 ASP.Net Web 应用程序测试 Windows 服务调度程序？

> ID：10357392
> 
> 赞同：0
> 
> 时间：2012-04-27T20:26:45.510
> 
> 标签：asp.net, windows-services

我为我的网络应用程序创建了一个调度程序，设置为每 3 秒触发一次。我想使用 Console.Write("bob") 来查看调度程序是否正常工作，但什么也没发生，只有在单击“调试”按钮后才创建网页。我是在测试错误的方式还是调度程序确实不起作用？

这是我写的代码：

```
namespace Scheduler
{
    public partial class CheckExpireService : ServiceBase
    {
        private CheckExpireJob job;
        private Timer stateTimer;
        private TimerCallback timerDelegate;

        public CheckExpireService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            job = new CheckExpireJob();
            timerDelegate = new TimerCallback(job.CheckExpireApplicants);
            stateTimer = new Timer(timerDelegate, null, 1000, 3000);
        }

        protected override void OnStop()
        {
            stateTimer.Dispose();
        }
    }
}

namespace Scheduler
{
    class CheckExpireJob: ServiceBase
    {
        public void CheckExpireApplicants(object stateObject) {
        Console.Write("bob");
        }
    }
} 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:55:26.370

（我打算发表评论，但编辑和回答是我似乎唯一可用的东西。）

首先，我认为您不能在调试模式下运行 Windows 服务……它必须作为服务编译和安装，并使用 Windows 中的服务管理器启动和停止。如果您在 Web 应用程序的某处有此代码，它将无法工作。它需要是一个单独的项目。

其次，您不能像这样构造和调用服务。如果您想要一个按时间间隔执行某项操作的服务，您需要在服务中拥有计时器及其所有工作。

您无法安排 Web 应用程序...当有人访问该页面时它会运行。你真正需要安排什么？定期更新 Web 应用程序将从中提取的数据？

需要更多地了解您要完成的工作才能获得帮助。

# c# - 这个（通用范围类）条件逻辑是否应该用多态性代替？如果是，那为什么？

> ID：10357393
> 
> 赞同：3
> 
> 时间：2012-04-27T20:26:55.817
> 
> 标签：c#, oop, generics, if-statement, switch-statement

下面显示的是一个通用范围类。这样做的目的是保存一个范围，然后在请求时指定（布尔值）给定值是否在范围内。

我已经阅读了多个帖子、问题、博客等，上面写着“[用多态性替换条件](http://sourcemaking.com/refactoring/replace-conditional-with-polymorphism)”

我的问题是，是否真的值得将代码分成多个类，每个类实际上只有一行代码。希望下面的代码能说明我的意思。

该类依赖于另外两个类，此处未显示，但如果有人需要它，我可以稍后包含它。

```
namespace Common.Utilities
{
    public class GenericRange<T>
       where T : struct, IComparable<T>
   {
      #region Properties
      public T Min { get; private set; }
      public T Max { get; private set; }
      public GenericRangeType RangeType { get; private set; }
      #endregion

      #region Constructors
      public GenericRange(T min, T max, GenericRangeType rangeType = GenericRangeType.Inclusive)
      {
         // Check Parameters
         Min = min;
         Max = max;
         RangeType = rangeType;
      }
      #endregion

      #region Methods
      #region Private
      private bool IsInclusive(T value)
      {
         return value.IsGreaterThanOrEqualTo(Min) && value.IsLessThanOrEqualTo(Max);
      }

      private bool IsInclusiveMin(T value)
      {
         return value.IsGreaterThanOrEqualTo(Min) && value.IsLessThan(Max);
      }

      private bool IsInclusiveMax(T value)
      {
         return value.IsGreaterThan(Min) && value.IsLessThanOrEqualTo(Max);
      }

      private bool IsExclusive(T value)
      {
         return value.IsGreaterThan(Min) && value.IsLessThan(Max);
      }
      #endregion

      #region Public
      public bool Contains(T value)
      {
         switch (RangeType)
         {
            case GenericRangeType.Inclusive: return IsInclusive(value);
            case GenericRangeType.InclusiveMin: return IsInclusiveMin(value);
            case GenericRangeType.InclusiveMax: return IsInclusiveMax(value);
            case GenericRangeType.Exclusive: return IsExclusive(value);
            default: throw new NotImplementedException();
         }
      }

      public override string ToString()
      {
         return String.Format("Min: {0}, Max: {1}, Type: {2}", Min, Max, RangeType);
      }
      #endregion
      #endregion
    }
} 
```

唯一的公共方法是：Contain 和 ToString。如果我通过多态正确理解它，我应该为每个比较类型创建一个单独的具体类，然后使 Contain 成为一个虚拟方法。

我想了解的主要事情是，好处/优势是什么？

如果这是这个问题的错误地方，那么我很抱歉。让我知道，我会移动它。

**编辑 1：** 如果有人需要，可以完成此操作的附加代码：

```
public static class ComparableExtensions
{
    public static bool IsEqualTo<T>(this T leftHand, T value) where T : IComparable<T>
    {
        return leftHand.CompareTo(value) == 0;
   }

    public static bool IsGreaterThan<T>(this T leftHand, T value) where T : IComparable<T>
    {
        return leftHand.CompareTo(value) > 0;
    }
    public static bool IsGreaterThanOrEqualTo<T>(this T leftHand, T value) where T : IComparable<T>
    {
        return leftHand.CompareTo(value) >= 0;
    }

    public static bool IsLessThan<T>(this T leftHand, T value) where T : IComparable<T>
    {
        return leftHand.CompareTo(value) < 0;
    }
    public static bool IsLessThanOrEqualTo<T>(this T leftHand, T value) where T : IComparable<T>
    {
        return leftHand.CompareTo(value) <= 0;
    }
}   

public enum GenericRangeType
{
    Inclusive,
    Exclusive,
    InclusiveMin,
    InclusiveMax
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:36:52.587

将其分解为不同的类可以让您在不更改现有代码的情况下扩展 Contains。在这种情况下，它没有太大意义，因为您已经在这里涵盖了 contains 的所有基础，但在其他情况下，可扩展性可能非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:43:34.127

IMO - 您使用的泛型更像是“模板”类，而不是经典 OOPS 术语中的纯粹基类。

我的意思是，如果你写过这样的类：

```
public class GenericRange{...}

public class IntRange : GenericRange{...}
public class DecimalRange : GenericRange{...} 
```

在这种情况下，将 Contains 的实现真正分解为单独的子类型作为重写方法是有意义的。

但是由于您使用的是代码模板，因此您确实获得了多态行为的好处，这取决于您初始化模板类的方式。

所以，如果你这样做了：

```
new GenericRange<int>(1, 100, inclusive);
new GenericRange<decimal>(1.0, 100.0, inclusive); 
```

您确实已经完成了多态行为，我认为这是泛型的一大好处，因为它允许您对此类代码进行模板化，而不是像前面所示的那样拥有专门的子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:47:49.260

我认为你所拥有的很好，只要它将来不需要扩展太多，并且你不需要它成为可以在其他程序集中扩展的公共类。如果您想要更多的灵活性，您可以使用多态性，或者制作一个`Func<T, bool>`(probably `private`，因为您可能只想公开该`Contains`方法，而不是它是使用 a 实现的事实`Func`) 设置时`RangeType`设置。然后你的`Contains`方法变成`return myFunc(value);`.

# python - 使用 __new__ 更改类的基类

> ID：10357394
> 
> 赞同：0
> 
> 时间：2012-04-27T20:27:08.620
> 
> 标签：python

我想在运行时使用 __new__ 更改类的基类。我拼命地看着，但我想不通。

```
class A(object): pass

class B(object): pass

class C(B): 

    some_attribute_in_c='hello'

    def __new__(cls):
        cls.__bases=(A,) #some code here to change the base class
        return super(C,cls).__new__(A)

x=C()
x.some_attribute_in_c #return Error: x has no attribute 'some_attribute_in_c' 
```

放入 __new__() 的正确代码是什么，以便最后一行返回“hello”，x 是基类 A 的 C 实例。

**添加**
了我的用例如下。

```
class Pet(object):
    some_attribute_in_pet='I\'m a pet.'

class Dog(Pet):
    some_attribute_in_species='My species is dog.'

class Cat(Pet):
    some_attribute_in_species='My species is cat.'

class PetBuyer(Pet):

    def __new__(cls,desired_animal):
        animal_bought=globals[desired_animal]
        cls.__bases=(animal_bought,) #some code here to change the base class
        return super(PetBuyer,cls).__new__(animal_bought)

    def __init__(self,desired_animal):
        print self.some_attribute_in_pet
        print self.some_attribute_in_species

x = PetBuyer('Dog') 
```

我想打印最后一行。

> 我是一只宠物。
> 我的品种是狗。

我的目标是在 PetBuyer 中使用 __new__() ，就像动物类的工厂一样。我这样做的原因是语法 PetBuyer('Dog') 在我的程序中很方便。

**ADDED2**
我这样做的原因如下。我必须编写的代码对我来说很复杂，因为我无法推断出正确的类设计。因此，无论如何我都可以对我的问题进行编码，因为我可以更好地理解它。但是，鉴于上述情况，我现在重构还为时过早。我还没有理解我的问题的某些组件之间的交互，在运行时更改基类将帮助我做到这一点。之后我会更适应重构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:33:43.307

当您覆盖`__new__`该类已经存在时，无论如何`__new__`用于创建给定类的实例，您想要的可以通过 a 完成`metaclass`，它可以像类的工厂一样

例如

```
class A(object): pass

class B(object): pass

class M(type):
    def __new__(cls, clsname, bases, attribs):
        # change bases
        bases = (A,)
        return type(clsname, bases, attribs)

class C(B): 
    __metaclass__ = M    
    some_attribute_in_c='hello'

print C.__bases__
x = C()
print isinstance(x, A)
print x.some_attribute_in_c 
```

输出：

```
(<class '__main__.A'>,)
True
hello 
```

在看到 OP 的编辑后，我会说**忘记以上所有内容**，你不需要任何元类，只需要一个`PetBuyer`由 (has a) 组成的简单类`Pet`，所以问题是你为什么不能将宠物传递给 PetBuyer，例如

```
class Pet(object):
    some_attribute_in_pet='I\'m a pet.'

class Dog(Pet):
    some_attribute_in_species='My species is dog.'

class Cat(Pet):
    some_attribute_in_species='My species is cat.'

class PetBuyer(Pet):

    def __init__(self, pet):
        self.pet = pet

        print self.pet.some_attribute_in_pet
        print self.pet.some_attribute_in_species

x = PetBuyer(Dog()) 
```

我也不明白为什么你需要改变`class`PetBuyer，IMO 的设计很糟糕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T01:05:19.120

根据您的新信息，听起来您需要动态创建类型。您当然没有义务创建一个套件来描述这些类型，您可以通过直接调用函数`class`在运行时创建它们：`type`

```
def make_thingy(bases):
    new_thingy_class = type("???", bases, {})
    new_thingy_instance = new_thingy_class()
    print new_thingy_instance.some_attribute_in_pet
    print new_thingy_instance.some_attribute_in_species
    return new_thingy_instance

x = new_thingy(Dog) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:20:53.067

TokenMacGuy 提供并由 delnan 暗示的我的问题的直接答案是

```
class Pet(object):
    pet_attribute='I\'m a pet.'

class Dog(Pet):
    species_attribute='My species is dog.'

class Cat(Pet):
    species_attribute='My species is cat.'

class NewThingy(object):

    def __new__(cls,desired_base):
        x = type(desired_base.__name__+'NewThingy',
                 (NewThingy,desired_base),{})
        return super(NewThingy,cls).__new__(x,cls)

    def __init__(self,desired_base):
        print self.pet_attribute
        print self.species_attribute

x = NewThingy(Dog) 
```

这打印

> 我是一只宠物。
> 我的品种是狗。

# math - 您如何解释 FFT 输出产生的频率

> ID：10357395
> 
> 赞同：1
> 
> 时间：2012-04-27T20:27:08.703
> 
> 标签：math, audio, signal-processing, fft

执行 FFT 时，输出数组中每个元素的频率由下式表示：

元素 k 处的频率为 f(k) = k/NT

其中 N 是样本数（因此是输出数组中的元素数），T 是以秒为单位的时间滑动。f 以赫兹为单位

我的问题是，鉴于该公式，每个元素的频率将始终小于 1 HZ，并且 FFT 永远不会产生高于 1HZ 的频率

那么如何在更高的频率上运行呢？就像人耳能听到的一样（20HZ 到 20KHZ）

感谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:36:09.007

这都是关于采样频率的。所以想象一下，你有一个 48 kHz 的采样率，这很常见。现在您正在对数据执行 FFT，其中包含`N = 1024`点。然后，您可以为每个人分配`n in N`一个特定的频率。这是怎么做到的？假设它`N`等于采样率。现在您可以检索每个其他的方程`n`。您选择`N`的越大，频率的间距就越小。

**编辑**还看看[这个](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)相关/类似的SO问题，尤其是Paul R的回答非常有帮助。

# javascript - devexpress mvc PageControl 和 PerformCallback

> ID：10357396
> 
> 赞同：0
> 
> 时间：2012-04-27T20:27:10.757
> 
> 标签：javascript, asp.net-mvc-3, devexpress

**devexpress mvc PageControl不支持**PerformCallback是对还是我？

本声明

```
 @Html.DevExpress().PageControl(
  settings =>
  {
  settings.CallbackRouteValues = new { Controller = "Profile", Action = "Content_Callback" };
  settings.ClientSideEvents.BeginCallback = "function (s,e) { e.customArgs['currentUserId'] = $('#currentUserId').val(); }";

  settings.Name = "userProfilePageControl";
  settings.EnableClientSideAPI = true;
  ... 
```

生成 Javascript **“userProfilePageControl.PerformCallback 不是函数”**错误

```
 function profileRefresh() {
        userProfilePageControl.PerformCallback();
    } 
```

其他一切都很好，即使选项卡切换回调也可以正常工作......：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T04:39:06.063

没有 SetActiveTab 客户端功能吗？

[客户端功能](http://demos.devexpress.com/MVCxNavigationAndLayoutDemos/TabControl/ClientSideAPI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:49:38.290

没有这样的方法，也不需要以编程方式执行回调。

请参阅[Tab Strip - AJAX](http://demos.devexpress.com/MVC/TabControl/Callbacks)在线演示以了解有关如何按需加载 TabPages 的更多信息（通过回调）

# asp.net - Web 分析和 IE 标准模式

> ID：10357399
> 
> 赞同：2
> 
> 时间：2012-04-27T20:27:19.057
> 
> 标签：asp.net, internet-explorer, google-analytics, web-analytics, web-analytics-tools

我试着在网上甚至在这个网站上寻找这个问题，但找不到我正在寻找的确切答案。因此，如果重复此问题，我深表歉意。

我的问题是关于网络分析工具如何报告用户正在使用的 IE 版本以及是否基于各种浏览器模式/标准模式。因此，例如，当我建立一个网站时，我可以包含元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" > 
```

以防万一不知道的人，这将迫使 IE 使用 IE 7 标准呈现页面。您几乎可以对 7 及以上版本的 IE 执行此操作。

所以可以说我在我的网站上使用它。当我有我的分析工具（比如说网络趋势）时，抓住用户版本的 IE，即使他们使用的是 IE8，它会显示为 IE7 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:01:24.157

即使设置为 IE7 也会被记录为 IE8。仿真不影响用户代理发送到谷歌。_utm.gif 不会在获取请求中发送浏览器版本。Google 从发出请求时始终发送的 http 标头获取该信息。

谷歌对此表示：“任何网页的 HTTP 请求都包含有关浏览器和发出请求的计算机的详细信息，例如主机名、浏览器类型、引用者和语言。”

这是在 IE7 模拟页面上对 google 的请求的样子，请注意用户代理。（只是自己测试过）结果：

```
Request: GET /__utm.gif?utmwv=5.2.9&utms=4&utmn=1555859696&containing-datazzz HTTP/1.1
Accept: image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5
Referer: http://www.wiremedia.nl/ietest.html
Accept-Language: nl-NL
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Host: www.google-analytics.com
Connection: Keep-Alive 
```

# ruby-on-rails - 在保存表单之前操作 check_box 值

> ID：10357400
> 
> 赞同：1
> 
> 时间：2012-04-27T20:27:25.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, checkbox

我有一个具有 4 个属性的模型 Fruit `:name, :characteristic1 ,:characteristic2,:characteristic3`。在水果表中`:characteristic1 ,:characteristic2,:characteristic3`的字段将接收来自 6 个复选框的值（因为我不想将所有 6 个字段添加到水果表中），用户只需选择其中的 3 个。我将如何选择值在复选框中并将它们插入`:characteristic1 ,:characteristic2,:characteristic3`，不要忘记接受输入为 text_field 的：name 字段？我确信这必须在控制器中完成，但我不知道如何。提前谢谢你。

形式

```
 <%= form_for @fruit ,:url=>{:action =>"create"} do |f| %>
      <%=f.text_field :name %>

      <%=f.fields_for :characteristics do |c| %>
        <!--Characteristics checkboxes -->
        <%end%>
       <%=f.submit "submit" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:37:05.943

我会告诉你创建 2 个新模型：Characteristic 和 FruitCharacteristic

水果通过水果会有很多特征

并阅读这个 api page 找到一些很酷的东西来解决表单问题

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

**更新：** 这应该适用于多对多

```
<ul>
   <% Characteristic.all.each do |c| %>
      <li><%= check_box_tag :characteristics_ids, c.id, @fruit.characteristics.include?(c), :name => 'fruit[characteristics_ids][]' %>
      <%= label_tag :characteristics_ids, c.name %></li>
   <% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T16:18:26.777

由于您希望限制用户仅选择 3 个类别，因此最好沿“characteristic1”、“characteristic2”和“characteristic3”之类的行提供 3 个选择框/3 组复选框。然后在控制器中，您可以使用 params[:fruit][:characteristic1] 等简单地访问这些值。

# system.reactive - 使用 Rx Repeat() 和 Replay() 缓存并重新启动 DNS 查询

> ID：10357402
> 
> 赞同：3
> 
> 时间：2012-04-27T20:27:26.607
> 
> 标签：system.reactive

我是 Rx 新手，所以我希望你能忍受我。作为我自己的练习，也可能是我可以为同事演示的示例，我为 Dns.BeginGetHostEntry()/EndGetHostEntry() 完成了两个包装类：DnsResolver 和 DnsResolverRx。

每个类都有一个公共静态方法：

```
void Resolve(string host, Action<IPHostEntry> getResult, Control context = null); 
```

...以及使其有趣的一些附加要求： 1\. 如果提供了上下文，则必须在关联线程上调用 getResult 2\. 同一主机的先前结果缓存 MaxResultAge 秒。

非 Rx 版本工作正常，但与这个问题并不真正相关。Rx 版本如下所示：

```
class DnsResolverRx
{
  static Func<string, IObservable<IPHostEntry>> _resolver = Observable.FromAsyncPattern<string, IPHostEntry>(Dns.BeginGetHostEntry, Dns.EndGetHostEntry);

  public static void Resolve(string host, Action<IPHostEntry> setResult, Control context = null)
  {
    IObservable<IPHostEntry> result;
    result = _cache.GetOrCreateValue( // a trivial TryGetValue wrapper
      host,
      () => _resolver(host)
        .Do(e => Debug.WriteLine("resolved"))
        .Repeat()
        .Do(e => Debug.WriteLine("repeated"))
        .Replay(MaxResultAge)
        .RefCount()
    );

    result = result.Take(1); // each request needs only 1 result

    if (context != null)
      result = result.ObserveOn(context);

    result.Subscribe(
      entry => setResult(entry),
      ex => setResult(null)
    );
  }
}

static void Main(string[] args)
{
  for (int i=0; i<10; ++i)
  {
    int num = i;
    Debug.WriteLine("start" + num);
    DnsResolverRx.Resolve("chief", e => Debug.WriteLine("done"+num));
    Thread.Sleep(200);
  }

  Console.ReadLine();
} 
```

Replay() 似乎有效，因此 MaxResultAge 中的第一个请求都已完成，重用相同的结果。然而，下一个请求触发了Repeat()，我最终得到了一个看似无止境的循环：

```
start0
start1
start2
start3
start4
start5
resolved
repeated
done0
done1
done2
done3
done4
done5
start6
resolved
repeated
resolved
repeated
... and so on ad infinitum 
```

谁能告诉我发生了什么，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T21:14:37.957

好吧 - 刚刚意识到 FromAsyncPatterns 是一次性的，基本上无法重新启动，并且它们在引用时开始，而不是在订阅时开始。

更换

```
_resolver(host) 
```

和

```
Observable.Defer(() => _resolver(host)) 
```

似乎可以解决问题。

如果没有人反对（而且我没有发现其他问题），我很快就会接受这个答案。

# xslt - XSL 不断为 jsRender 提供花括号

> ID：10357403
> 
> 赞同：2
> 
> 时间：2012-04-27T20:27:33.147
> 
> 标签：xslt, jsrender, aspdotnetstorefront

我正在使用 AspDotNetStorefront（这就是我必须使用 xsl 的原因），我的客户希望能够对某个类别的产品进行排序。我决定使用 tablesorter 并使用 jsrender 来渲染模板。

除了创建一个特殊链接之外，我可以做任何事情，因为 xsl 正在为 jsrender 模板剥离我的花括号之一。

因此，我有一个带有 productImage 的对象，例如 /images/blah.jpg，并且以下内容可以正常工作。

```
<td>{{:productImage}}</td> 
```

太好了-所以我尝试输入一个链接：

```
<td><a href='{{:productImage}}'>See the image</a></td> 
```

xsl 将我的模板输出为：

```
<td><a href='{:productImage}'>See the image</a></td> 
```

所以它没有被正确渲染。在过去的几个小时里，我尝试了各种想法，但无法让它正常工作。如何防止 XSL 打断我的花括号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:36:20.203

XSLT在您[的](http://www.w3.org/TR/xslt#dt-attribute-value-template)`{}`. 规范说：

`a double left or right curly brace outside an expression will be replaced by a single curly brace.`

话虽如此，将花括号的数量加倍似乎可以解决问题。以下节点放入 XSLT：

```
<something a="{{{{a}}}}"/> 
```

产生以下结果树：

```
<something a="{{a}}"/> 
```

**更新**：XSLT 2.0 规范对 double`{{`和[属性值模板](http://www.w3.org/TR/xslt20/#attribute-value-templates)部分有更多`}}`的说明。

# windows-phone-7 - 如何在 Windows Phone Mango 上打开自定义相册

> ID：10357407
> 
> 赞同：2
> 
> 时间：2012-04-27T20:27:43.427
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我正在使用此代码打开图片库：

```
PhotoChooserTask imageChooser = new PhotoChooserTask();
imageChooser.Show(); 
```

那么有什么方法可以打开所需的相册，例如“保存的图片”或某些用户创建的相册？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:21:08.720

**PictureAlbum**没有**构造**函数，**Picture.Album**是只读的，防止在现有相册之间重新分配图片，并且没有提交相册的方法。

 ****[您可以使用MediaLibrary.SavePicture 方法](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx)将图像放置在媒体库中，并且可以访问它们。

如果您想从 Windows Phone 中的媒体库访问，您可以这样做：

```
 MediaLibrary m = new MediaLibrary();

foreach (var r in m.Pictures)
{
Stream imageStream = r.GetImage();

var imageToShow = new Image()
{
Source = PictureDecoder.DecodeJpeg(r.GetImage())
};

lstImageFromMediaLibrary.Items.Add(imageToShow);
}
} 
```****

# powershell - Powershell 脚本针对服务器上的共享运行

> ID：10357409
> 
> 赞同：0
> 
> 时间：2012-04-27T20:27:45.327
> 
> 标签：powershell, delete-file, recycle-bin

我正在服务器上的文件共享上运行本地 PC 上的 powershell 脚本。我在脚本中有代码让用户选择永久删除某些内容（使用 Remove-Item）或使用此代码将某些内容发送到回收站：

```
[Microsoft.VisualBasic.FileIO.Filesystem]::DeleteFile($file.fullname,'OnlyErrorDialogs','SendToRecycleBin') 
```

在本地（从我的桌面或从服务器）针对相应位置本地的文件夹运行时，它可以正常工作。已识别的文件将被删除并立即显示在回收站中。

但是，如果从我的桌面运行到文件共享，它会删除文件，但它不会出现在服务器的回收站或本地回收站中。我已经尝试过 UNC 命名和映射驱动器命名，并且开始相信这可能是设计使然。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:37:18.220

只有从重定向文件夹中删除的文件才会进入回收站。如果您希望能够取消删除通过网络删除的文件，那么您需要使用第三方实用程序。

# sql - 任何方法来识别哪些行是由 where 子句中的哪些条件生成的

> ID：10357410
> 
> 赞同：2
> 
> 时间：2012-04-27T20:27:53.160
> 
> 标签：sql, postgresql-9.1

我有 2 个表格，一个包含旅行的开始和结束位置，另一个包含该旅行期间每分钟车辆的纬度/经度位置。这些表通过tripID 关联。

像这样的东西：

```
trip_table:
TRIPID | DEP | ARR
------------------
1      | CLE | CHI
2      | CLE | ATL
3      | ATL | CLE

position_table:
TRIPID | TIME              | LAT  | LON
-----------------------------------------
2      | May-20-2012T00:23 | 35.4 | -84.2
2      | May-20-2012T00:24 | 35.5 | -84.1
3      | May-21-2012T11:14 | 42.0 | -112.4 
```

我有一个由 2 个条件组成的查询： 1\. 提取行程出发/到达特定位置的所有位置数据 2\. 提取行程经过特定纬度/经度的所有位置数据：

```
SELECT p.* FROM position AS p 
JOIN trip_table t ON (t.tripid = p.tripid)
WHERE (t.dep = 'CLE' OR t.arr = 'CLE)
OR (p.lat > 34 AND p.lat < 40 AND p.lon > -100 AND p.lon < -90) 
```

我的问题是：是否可以修改此查询以确定结果的哪些行来自第一个条件（即行程离开/到达指定位置）以及哪些来自第二个条件（即行程通过指定的纬度/隆）？

目前我唯一的想法是运行 2 个单独的查询，但如果可以减少查询的总数，我想避免这种情况。

如果有针对此类问题的标准 SQL 解决方案，那就太好了；如果没有，那么如果有一个特定于 PostgreSQL 的解决方案也可以。

编辑：如果有人想知道我为什么要这样做 - 结果位置被绘制在地图上，我想根据它们是来自有界区域还是来自两个到达/离开位置之间对它们进行颜色编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:31:30.373

你可以尝试这样的事情：

```
SELECT p.col1, p.col2, p.col3,
     t.dep = 'CLE' OR t.arr = 'CLE' AS first_condition,
     p.lat > 34 AND p.lat < 40 AND p.lon > -100 AND p.lon < -90 AS second_condition
FROM position AS p 
JOIN trip_table t ON (t.tripid = p.tripid)
WHERE (t.dep = 'CLE' OR t.arr = 'CLE')
OR (p.lat > 34 AND p.lat < 40 AND p.lon > -100 AND p.lon < -90) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:37:26.940

我认为您可以通过案例陈述进行识别，如下所示。代码变得有点多余，但我已经在 Oracle 上进行了测试，它可以工作：

```
SELECT p.*,
       case when t.dep = 'CLE' or t.arr = 'CLE' then 'FROM_CLE_CLAUSE'
            when (p.lat > 34 AND p.lat < 40 AND p.lon > -100 AND p.lon < -90) then 'OTHER_CLAUSE'
       end
  FROM position AS p 
  JOIN trip_table t 
    ON (t.tripid = p.tripid)
 WHERE (t.dep = 'CLE' OR t.arr = 'CLE)   
    OR (p.lat > 34 AND p.lat < 40 AND p.lon > -100 AND p.lon < -90) 
```

# android - 如何保持 Listview 中突出显示的单击项？

> ID：10357415
> 
> 赞同：1
> 
> 时间：2012-04-27T20:28:03.067
> 
> 标签：android, listview

我需要让一个列表视图保持选定的视图突出显示，直到选择另一个项目，在这种情况下，前一个视图删除突出显示，最后点击的获得突出显示。

我试图不这样做并使用单选按钮，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:35:11.187

其实很简单：

在单个列表视图项的自定义布局中，确保它具有以下属性：

```
android:background="?android:attr/activatedBackgroundIndicator" > 
```

例如，以下是 SDK 附带的[HoneycombGallery 示例](http://developer.android.com/resources/samples/HoneycombGallery/index.html)中的列表视图项布局（位于[title_list_item.xml](http://developer.android.com/resources/samples/HoneycombGallery/res/layout/title_list_item.html)文件中：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dp"
    android:gravity="bottom"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:background="?android:attr/activatedBackgroundIndicator" >
</TextView> 
```

该属性将导致背景颜色根据单个列表项是否被选中而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:06:57.390

我是 android 新手，所以我发现这个问题很有趣，最后我在 1 个半小时后成功了；-)

这是代码：
main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

listinflater.xml

```
 android:id="@+id/tvItem"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView" /> 
```

PreservelistitemActivity.java

```
package com.mehuljoisar;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class PreservelistitemActivity extends Activity {

//declaring variable
ListView listView1;
MyAdapter adapter1;
Integer length,i;
String[] data = {"Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh","Mehul","Milind","Aamir","Amitabh"};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //binding to the view
    listView1 = (ListView)findViewById(R.id.listView1);

    //set adapter
    adapter1=new MyAdapter(PreservelistitemActivity.this,data);
    listView1.setAdapter(adapter1);

}

public class MyAdapter extends BaseAdapter{
    private final Activity context;
    private final String[] data;

    public MyAdapter(Activity context,
            String[] data) {
        // TODO Auto-generated constructor stub
        super();
        this.context=context;
        this.data=data;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater inflater = context.getLayoutInflater();
        convertView = inflater.inflate(R.layout.listinflater, null);

        final TextView tvItem = (TextView)convertView.findViewById(R.id.tvItem);

        tvItem.setText(data[position]);

        listView1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

/*          length=parent.getAdapter().getCount();

                for(i=0;i<length;i++)
                {
                    //clear
                    if(i==position)
                    {
                    //set
                    }
                }
*/          

                v.setSelected(true);    
            }
        });

        return convertView;
    }

}
} 
```

# java - Oracle：违反唯一约束的异常，但我的数据实际上并未违反它

> ID：10357420
> 
> 赞同：0
> 
> 时间：2012-04-27T20:28:24.033
> 
> 标签：java, sql, oracle11g, execute, unique-constraint

我正在尝试将一些数据从 excel 文件插入到表中。我有两个excel文件如下：

```
Test2:
5/12/2012     5/18/2012 ABQ ANC 1   52
5/12/2012     5/18/2012 ABQ ANC 2   30
5/12/2012     5/18/2012 ABQ ANC 3   34
5/12/2012     5/18/2012 ABQ ANC 4   41
5/12/2012     5/18/2012 ABQ ANC 5   53--->duplicate row
5/12/2012     5/18/2012 ABQ ANC 6   18
5/12/2012      5/18/2012    ABQ ANC 7   4
5/12/2012      5/18/2012    ABQ ATL 1   389
5/12/2012     5/18/2012 ABQ ATL 2   312 
```

测试1：

```
5/12/2012     5/18/2012 ABQ ATL 4   259
5/12/2012     5/18/2012 ABQ ATL 5   362
5/12/2012     5/18/2012 ABQ ATL 6   240
5/12/2012     5/18/2012 ABQ ATL 7   88
5/12/2012     5/18/2012 ABQ ANC 5   53--->duplicate row
5/12/2012     5/18/2012 ABQ AUS 2   2
5/12/2012     5/18/2012 ABQ BDL 1   164
5/12/2012     5/18/2012 ABQ BDL 2   128
5/12/2012     5/18/2012 ABQ BDL 3   132 
```

我的桌子一开始是空的。所以我插入第一个文件（test2），它工作正常。插入第二个文件（test1）时，它应该在 test1 的第 5 行给出“违反唯一约束”异常。我故意复制该行以进行测试。我编写了以下代码来进行插入。如您所见，批量大小为 3。

插入第二个文件时，代码执行第一批（前 3 行）很好。在第二批（第 4-6 行）中，由于第 (5) 行之一重复，因此引发 BatchUpdatException。我捕获了该异常，并在 catch 块中，我一次处理每一行（第 4-6 行）。所以第 4 行的插入应该可以正常工作。但事实并非如此。相反，它会引发 sqlException。第 5 行也抛出异常（重复行）。但第 6 行没有。第 6 行 executeUpdate() 运行良好。此时，如果我查看我的数据库表，我看到第 4 行也与第 6 行一起插入到表中。怎么会发生这种情况，它只是在第 4 行抛出异常？

我的目标是让用户知道重复行在哪里。由于这种异常行为，当用户尝试插入第二个文件时，会被告知第 4 行和第 5 行中存在重复行。

```
String sqlStatement = "INSERT INTO DMD_VOL_UPLOAD (ORIGIN, DESTINATION, DAY_OF_WEEK, EFFECTIVE_DATE, DISCONTINUE_DATE, VOLUME)";
    int batchSize=3;
    sqlStatement += " VALUES(?, ?, ?, ?, ?, ?)";
    con = session.connection();
        pstmt = con.prepareStatement(sqlStatement);
    for(currentRow=1; currentRow<=rowCount; currentRow++){
        try{
                forecastBatch = (ForecastBatch) list.get(currentRow-1);                                 
                pstmt = (PreparedStatement) prepareStatement(pstmt, forecastBatch);         
                pstmt.addBatch();               
                if(currentRow % batchSize == 0 || currentRow==rowCount){
                    updateCounts = pstmt.executeBatch();
                    con.commit();
                    pstmt.clearBatch();
                }                           
        }catch(BatchUpdateException e){
                int endPoint = currentRow;
                int i;
                for(i=currentRow-batchSize; i<endPoint; i++){
                    forecastBatch = (ForecastBatch) list.get(i);
                    try{
                        pstmt = (PreparedStatement) prepareStatement(pstmt, forecastBatch); 
                        pstmt.executeUpdate();**strong text**
                        con.commit();
                    }catch(SQLException ex){
                        errorRowNum = errorRowNum + (i+1) + ", ";
                        ex.printStackTrace();
                    }   
                }
        }catch(SQLException e){
                e.printStackTrace();
        }
    }//end of the first for loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:44:11.187

当你`executeBatch`做一批语句时，有的语句可能成功，有的语句可能失败。如果一个语句失败，这并不意味着 JDBC 驱动程序回滚成功的语句。如果一条语句失败，JDBC 驱动程序可能会选择尝试执行批处理中的所有语句，或者一旦语句失败，它可能会选择停止执行批处理中的语句（听起来您正在使用的驱动程序选择停止执行语句为一旦出现故障）。

当你得到一个`BatchUpdateException`，你需要打电话`getUpdateCounts`。这将为您提供一个数组`int`，告诉您语句更新了多少行，`Statement.SUCCESS_NO_INFO`指示语句成功但没有可用的行数，或者`Statement.EXECUTE_FAILED`表示语句失败。我希望您会返回一个双元素数组，指示批处理中的第一条语句（电子表格中的第 4 行）成功，而批处理中的第二条语句（电子表格中的第 5 行）失败。数组中缺少第三个元素表示批处理中的第三条语句（电子表格中的第 6 行）未执行。您的重试代码只需要重试未执行的语句。在这种情况下，只需要重试第三条语句（电子表格中的第 6 行），因为它`BatchUpdateException`已经告诉您第一条语句成功而第二条语句失败。

# jquery - jQuery Datatables aoColumns 排序错误

> ID：10357422
> 
> 赞同：0
> 
> 时间：2012-04-27T20:28:36.487
> 
> 标签：jquery, datatables

好的，我正在使用来自 Datatables.net 的 DataTables 我有一个似乎遇到排序问题的表。目前“aoColumns”的设置如下

```
null,
{"iDataSort": 2, "bSortable": true},
{"bVisible": true, "sType": "num"},
{"iDataSort": 4, "bSortable": true},
{"bVisible": true, "sType": "num"} 
```

它是 5 列，其中 2 列是隐藏的，所以.. 0 是引发这篇文章的初始排序问题的列。1 应该是显示目的，只有 2 是隐藏的，应该作为 1 的排序 3 应该是显示目的，只有 4 是隐藏的，应该作为 3 的排序

我需要将第一列识别为 html，因此它会删除 HTML，因为其中包含链接，目前它设置为`null`，问题是它破坏了 Chrome 中的排序。

我试着让它像

```
{"sType": "html", "bSortable": true},
{"iDataSort": 2, "bSortable": true},
{"bVisible": true, "sType": "num"},
{"iDataSort": 4, "bSortable": true},
{"bVisible": true, "sType": "num"} 
```

这打破了桌子本身。

首先我试过

```
{ "sType": "html", "bSortable": true},
{ "sType": "num", "bSortable": true},
{ "sType": "num", "bSortable": true} 
```

（在我意识到我有 2 个隐藏列之前）这有效但物理上破坏了表格布局。所以现在我坚持试图从 a 到 b 保持所有 5 列显示 3，而 2 隐藏和失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:24:48.457

尝试这个：

```
aoColumns: [
   {"sType": "html", "bSortable": true},
   {"iDataSort": 2, "bSortable": true, "bUseRendered":false},
   {"bVisible": true, "sType": "numeric"},
   {"iDataSort": 4, "bSortable": true, "bUseRendered":false},
   {"bVisible": true, "sType": "numeric"}
] 
```

我必须使用渲染图像而不是值的列来执行此操作，然后创建一个隐藏列，其中包含要排序的实际值。

我希望这有帮助

# jsf - PrimeFaces 文件上传停止工作

> ID：10357425
> 
> 赞同：0
> 
> 时间：2012-04-27T20:28:42.863
> 
> 标签：jsf, file-upload, primefaces

我在使用 PrimeFaces 上传文件时遇到问题。我在 StackOverflow 上浏览了旧帖子，没有发现任何有用的东西。奇怪的是我昨天让它工作了，但我现在启动了我的服务器并且它不再工作了。当我尝试访问上传的文件时，它给了我 NPE。

所以我下载了commons-fileupload-1.2.2.jar和commons-io-1.4，把它们放在我的类路径中，`web.xml`像这样配置我

```
 <filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

我在 xhtml 页面中的表单包含一个带有描述的字段、一个组合框和一个字段上传元素

```
 <h:form enctype="multipart/form-data">
            <p:panel header="#{submitProjectPage['header']}">
                <h:panelGrid columns="2">
                    #{submitProjectPage['chooseProject']}
                    <p:selectOneMenu value="#{submitProjectBean.project}" converter="projectConverter">
                        <f:selectItems value="#{submitProjectBean.studentsProjects}" />
                    </p:selectOneMenu> 
```

最后我的bean是`RequestScoped`并且有这个方法

```
private UploadedFile projectFile;

public void submitProject(ActionEvent event) {//also tried without parameter
    project.setFile(projectFile.getContents());
    project.setStatus(StatusEnum.DELIVERED);
    daoBean.update(project);
}
                    #{submitProjectPage['submitInformation']}
                    <p:inputTextarea rows="10" value="#{submitProjectBean.s}"/>
                    #{submitProjectPage['file']}
                    <p:fileUpload value="#{submitProjectBean.projectFile}" mode="simple" />

                    <p:commandButton ajax="false" value="#{submitProjectPage['submit']}" 
                                    actionListener="#{submitProjectBean.submitProject}" />
                </h:panelGrid>
            </p:panel> 
```

我确定我的导入正确，projectFile 字段还有一个设置器，所以我真的不知道问题出在哪里。我正在使用 PrimeFaces v 3.01

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:57:59.317

我找到了一个解决方案，问题是 Glassfish 出于某种原因没有部署 apache 库，所以我将它们从类路径中删除，再次添加它们并且它神奇地工作:-)

所以也许它会帮助某人:)

# git - 如何使 git 不更改特定文件的行尾？

> ID：10357436
> 
> 赞同：66
> 
> 时间：2012-04-27T20:29:57.693
> 
> 标签：git

由于 Microsoft 的 Visual Studio 中的“功能”，.sln 文件必须具有 windows 样式的行尾，以便 windows 资源管理器可以在 Visual Studio 中打开它们。所以我需要能够提交这个具有完整行尾的特定文件。如果所有其他文件都得到转换，那很好。问题是如何让 git 只接受一个带有 windows 结尾的文件？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-04-27T20:40:15.083

查看[gitatttributes](https://git-scm.com/docs/gitattributes)文档。使用最新版本的 git，您可以设置`eol`文件的属性以控制在签出文件时将使用哪些行尾。

您应该能够`.gitattributes`在您的存储库中创建一个类似于以下内容的文件：

```
path/to/my/file eol=crlf 
```

# java - 来自黑莓知识库的AnimatedGIFField，不知道如何操作gif

> ID：10357437
> 
> 赞同：-1
> 
> 时间：2012-04-27T20:30:07.340
> 
> 标签：java, blackberry, animated-gif

我正在使用此代码，如果有人熟悉它，它来自黑莓知识库。无论如何，我想知道如何使用这个类来操作 GIF。我可以在屏幕上看到 gif，但它会不断重复并且不会消失。任何帮助是极大的赞赏！

公共类 AnimatedGIFField 扩展 BitmapField { private GIFEncodedImage _image; //要绘制的图像。私有 int _currentFrame; //动画序列中的当前帧。私人 int _width; //图片的宽度（背景框）。私人int _height；//图片的高度（背景框）。私有动画线程_动画线程；

```
public AnimatedGIFField(GIFEncodedImage image)
{
    this(image, 0);
}

public AnimatedGIFField(GIFEncodedImage image, long style)
{
    //Call super to setup the field with the specified style.
    //The image is passed in as well for the field to
    //configure its required size.
    super(image.getBitmap(), style);

    //Store the image and it's dimensions.
    _image = image;
    _width = image.getWidth();
    _height = image.getHeight();

    //Start the animation thread.
    _animatorThread = new AnimatorThread(this);
    _animatorThread.start();
}

protected void paint(Graphics graphics)
{
    //Call super.paint. This will draw the first background
    //frame and handle any required focus drawing.
    super.paint(graphics);

    //Don't redraw the background if this is the first frame.
    if (_currentFrame != 0)
    {
        //Draw the animation frame.
        graphics.drawImage(_image.getFrameLeft(_currentFrame), _image.getFrameTop(_currentFrame),
            _image.getFrameWidth(_currentFrame), _image.getFrameHeight(_currentFrame), _image, _currentFrame, 0, 0);
    }
}

//Stop the animation thread when the screen the field is on is
//popped off of the display stack.
protected void onUndisplay()
{
    _animatorThread.stop();
    super.onUndisplay();
}

//A thread to handle the animation.
private class AnimatorThread extends Thread
{
    private AnimatedGIFField _theField;
    private boolean _keepGoing = true;
    private int _totalFrames;     //The total number of
                                    frames in the image.
    private int _loopCount;       //The number of times the
                                  animation has looped (completed).
    private int _totalLoops;      //The number of times the animation should loop (set in the image).

    public AnimatorThread(AnimatedGIFField theField)
    {
        _theField = theField;
        _totalFrames = _image.getFrameCount();
        _totalLoops = _image.getIterations();

    }

    public synchronized void stop()
    {
        _keepGoing = false;
    }

    public void run()
    {
        while(_keepGoing)
        {
            //Invalidate the field so that it is redrawn.
            UiApplication.getUiApplication().invokeAndWait(new Runnable()
            {
                public void run()
                {
                    _theField.invalidate();
                }
            });

            try
            {
                //Sleep for the current frame delay before
                //the next frame is drawn.
                sleep(_image.getFrameDelay(_currentFrame) * 10);
            }
            catch (InterruptedException iex)
            {} //Couldn't sleep.

            //Increment the frame.
            ++_currentFrame;

            if (_currentFrame == _totalFrames)
            {
                //Reset back to frame 0 if we have reached the end.
                _currentFrame = 0;

                ++_loopCount;

                //Check if the animation should continue.
                if (_loopCount == _totalLoops)
                {
                    _keepGoing = false;
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:42:36.847

不要打电话**`super.paint(graphics)`**，而是自己画所有需要画的东西。重新编写您的`paint(Graphics graphics)`方法，如下所示：

```
private boolean isPaint = true;
protected void paint(Graphics graphics) {
    if(!isPaint) return;
//  super.paint(graphics);      
    if (_currentFrame == _image.getFrameCount()-1) {
        graphics.setGlobalAlpha(0);
        isPaint = false;
    }
    graphics.drawImage(
                _image.getFrameLeft(_currentFrame),
                _image.getFrameTop(_currentFrame),
                _image.getFrameWidth(_currentFrame),
                _image.getFrameHeight(_currentFrame), _image,
                _currentFrame, 0, 0
            );
} 
```

# iphone - 添加 2 个输入的 AVCaptureSession 冻结预览层

> ID：10357439
> 
> 赞同：1
> 
> 时间：2012-04-27T20:30:10.623
> 
> 标签：iphone, xcode, avfoundation, avcapturesession

如果我只是将视频添加为输入，则预览层可以正常工作，并且视频记录也很好，但是如果我尝试添加音频，则预览层会冻结，并且视频文件已损坏。是什么导致了这一切？

```
-(void) record {
AVCaptureSession *session = [[AVCaptureSession alloc] init];
[session beginConfiguration];
session.sessionPreset = AVCaptureSessionPresetMedium;

CALayer *viewLayer = self.vImagePreview.layer;
NSLog(@"viewLayer = %@", viewLayer);

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
captureVideoPreviewLayer.frame = self.vImagePreview.bounds;

[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [self frontFacingCameraIfAvailable];
NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}

AVCaptureDevice *audioCaptureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];

AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioCaptureDevice error:nil];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

AVCaptureMovieFileOutput *movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

NSString *archives = [documentsDirectoryPath stringByAppendingPathComponent:@"archives"];
NSString *outputpathofmovie = [[archives stringByAppendingPathComponent:@"Test"] stringByAppendingString:@".mp4"];
NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputpathofmovie];
[session addInput:input];
[session addInput:audioInput];
[session addOutput:movieFileOutput];
[session commitConfiguration];
[session startRunning];
[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self];
}
-(AVCaptureDevice *)frontFacingCameraIfAvailable
{
NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
AVCaptureDevice *captureDevice = nil;
for (AVCaptureDevice *device in videoDevices)
{
    if (device.position == AVCaptureDevicePositionFront)
    {
        captureDevice = device;
        break;
    }
}

//  couldn't find one on the front, so just get the default video device.
if ( ! captureDevice)
{
    captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
}

return captureDevice;
} 
```

# mysql - 选择树节点的所有后代

> ID：10357443
> 
> 赞同：2
> 
> 时间：2012-04-27T20:30:26.637
> 
> 标签：mysql, stored-procedures, adjacency-list

我正在使用邻接列表模型在 MySQL 数据库中存储（非常动态的）树结构。我需要一种方法来选择给定节点的所有后代，最好是通过对存储例程的一次调用。我知道嵌套集模型会让这件事变得简单，但它会让其他事情变得非常困难，所以不幸的是它不是我的选择。这是我到目前为止所得到的：

```
DELIMITER //

CREATE PROCEDURE get_descendants(node_id INT)
    BEGIN

    DROP TEMPORARY TABLE IF EXISTS descendants;
    CREATE TEMPORARY TABLE descendants (id INT, name VARCHAR(100), parent_id INT);

    INSERT INTO descendants
        SELECT *
        FROM nodes
        WHERE parent_id <=> node_id;

    -- ...?

    END//

DELIMITER ; 
```

这个想法是继续向下钻取并将子代附加到后代表，直到我到达叶子。然后我可以从程序外部访问临时表......我希望。（我不能从存储的函数返回结果集，这真的很糟糕。）

我需要以某种方式遍历结果并为每一行发出一个新的 SELECT 语句。我读过游标在这里可能会有所帮助，但我不知道如何。似乎使用游标您必须预先选择所有内容，然后进行迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:08:39.053

这要看`read : write`比例。如果你的阅读率非常高，做一个全关系表会很有帮助，而不是临时的。

一种伪方法（不是真正的代码！）：

```
1\. node(1) has child node(2)
     -> Insert a row with (parent_id = 1, child_id = 2, direct = True)

2\. node(2) has child node(3)
     -> Insert a row with (parent_id = 2, child_id = 3, direct = True)
     -> Choose all ascendants of node(2)
     -> Ascendants of node(2) : [node(1)]
     -> Insert a row with (parent_id = 1, child_id = 3, direct = False)

3\. To retrieve all descendants of node(1)
     -> SELECT child_id FROM [table] WHERE parent_id = 1;

4\. To retrieve children of node(1)
     -> SELECT child_id FROM [table] WHERE parent_id = 1 AND direct = True;

5\. To retrieve all ascendants of node(3)
     -> SELECT parent_id FROM [table] WHERE child_id = 3;

6\. To retrieve parent of node(3)
     -> SELECT parent_id FROM [table] WHERE child_id = 3 AND direct = True;

+-----------+----------+--------+
| parent_id | child_id | direct |
+-----------+----------+--------|
|         1 |        2 | True   |
|         1 |        3 | False  |
|         2 |        3 | True   |
....
+-----------+----------+--------+
Index 1 on ( parent_id, direct )
Index 2 on ( child_id, direct ) 
```

这种方法在更新关系时性能很差。使用风险自负。

# java - 如何配置jsoup白名单以允许内部锚点

> ID：10357444
> 
> 赞同：4
> 
> 时间：2012-04-27T20:30:41.053
> 
> 标签：java, jsoup

如何配置 jsoup`Whitelist`以允许内部锚引用，而不允许任何任意值？

示例 html：

```
<a href="#section1" target="_self">Jump To Section 1</a>
    <!-- ... -->
<a name="section1">Section 1</a> 
```

如果我尝试用放松`Whitelist`的方式清理代码，`href`则会删除。

```
Jsoup.clean(html, Whitelist.relaxed().addAttributes("a", "name", "target"); 
```

返回以下内容：

```
<a target="_self">Jump To Section 1</a>
   <!-- ... -->
<a name="section1">Section 1</a> 
```

如果我手动构建 a`Whitelist`并添加我想要的标签和属性，但不调用，`addProtocols(....)`我可以让 jsoup 保留`href`原位，但这似乎不是一个好的解决方案，因为它不会过滤`href`掉包含 JavaScript。`href`例如，我希望从以下内容中删除a 标签（或至少是）：

```
<a href="javascript:alert(1111);" target="_self">Jump To Section 1</a>
<a name="section1">Section 1</a> 
```

这可以用jsoup吗？

我确实看到了以下对 jsoup 的补丁提交，但它看起来并没有进入 jsoup 代码库： [https ://github.com/jhy/jsoup/pull/77](https://github.com/jhy/jsoup/pull/77)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:22:28.407

```
Whitelist whitelist=new Whitelist();

Cleaner cleaner = new Cleaner(whitelist);

whitelist.addAttributes("a","accesskey","dir","lang","style","tabindex","title","href");

cleaner.clean(doc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T20:14:19.090

如果没有提供协议/将其列入白名单，则所有协议都被隐式允许（参见[isSafeAttribute](https://github.com/rorygibson/jsoup/blob/master/src/main/java/org/jsoup/safety/Whitelist.java)）。如果您想允许内部锚点，那么您永远不需要调用`addProtocol`白名单的锚点标签，不幸的是（`href`至少是这样）。看起来有一个添加支持的[拉取请求](https://github.com/jhy/jsoup/pull/77)，但它从未合并。

请注意，如果您允许所有协议，恶意用户可以在链接单击时运行 Javascript：

`<a href="javascript:alert('Arbitrary code');">Some text</a>`

因此，如果您不信任您的 HTML，请注意这一点。

如果您只想允许say、、、`http`和`https`锚标签，那么我相信您不走运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T07:12:07.457

得到 3 个赞成票的回复根本没有回答这个问题。

OP中提到的github链接目前已合并，对于正在寻找答案的其他人

```
Whitelist.relaxed().addProtocols("a", "href", "#") 
```

[参考：Jsoup API 文档](https://jsoup.org/apidocs/org/jsoup/safety/Whitelist.html#addProtocols-java.lang.String-java.lang.String-java.lang.String...-)

# jquery - 尝试通过 AJAX 提交时出现 %5Bobject%20Object%5D（未找到 404）

> ID：10357445
> 
> 赞同：18
> 
> 时间：2012-04-27T20:30:42.280
> 
> 标签：jquery, ajax, post

我正在尝试通过 ajax 将变量传递给将运行 MySQL 查询的 PHP 脚本。但是，我不断收到错误 404 Not Found：“http://myurl/database/%5Bobject%20Object%5D”。

看起来它正在尝试将数据发送到[http://myurl/database/%5Bobject%20Object%5D](http://myurl/database/%5Bobject%20Object%5D)而不是我定义的 PHP 脚本。真的不知所措……我认为将绝对 URL 放入其中会起作用。

下面是我的代码。将永远感激任何帮助....

```
<script type="text/javascript">
function insertData()
 {
    var dataid= $('#dataid').attr('value');
    var industry = $('#industry').attr('value');
   var geolocation = $('#geolocation').attr('value');
    $.post({
        type: "POST",
        url: "http://myURL/database/InsertData.php",
        data: "dataid="+ dataid+"&amp;industry="+ industry +"&amp;geolocation="+ geolocation,
        });
return false;
};

</script> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T11:56:10.880

正如 andi 所说，[$.post](http://api.jquery.com/jQuery.post/)需要一个 URL 字符串作为第一个参数；如果要传递选项对象，则必须使用[$.ajax](http://api.jquery.com/jQuery.ajax/)。

当您尝试调用`$.post(<option object>)`时，选项对象被用作 URL；在那个过程中，它被转换为字符串（转换为字符串的对象变成`[object <type>]`了 Javascript；在这种情况下，`[object Object]`），它被 URL 编码（`%5Bobject%20Object%5D`），并且，因为它不以 a`/`或协议名称开头，它被解释为相对 URL，并以当前协议、域和路径为前缀。然后，由于没有更多参数，一个空的 POST AJAX 请求被发送到该 URL。

另一个问题是你`&amp;`用来分隔参数；这应该只在 HTML 中完成，在这里你应该只使用`&`. （或数据对象，正如埃文所说，那样你就不需要考虑编码问题。）和`.val()`和`.attr('value')`不一样；第一个是字段的当前值，第二个是加载页面时的任何值。

最简单的正确方法是：

```
function insertData() {
    var data = $('#dataid,#industry,#geolocation').serialize();
    $.post('http://myURL/database/InsertData.php', data);
    return false;
} 
```

这假定三个字段具有相同的和`name`$ [.serialize](http://api.jquery.com/serialize/)用于参数名称。`id``name`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-27T20:42:05.677

您应该更改`$.post`为`$.ajax`或将 URL 和数据作为参数传递。 [$.post](http://api.jquery.com/jQuery.post/)只是[$.ajax](http://api.jquery.com/jQuery.ajax/)的简写，它将 URL 作为第一个参数。

所以应该是：

```
$.ajax({
    type: "POST",
    url: "http://myURL/database/InsertData.php",
    data: "dataid="+ dataid+"&amp;industry="+ industry +"&amp;geolocation="+ geolocation
}); 
```

或者，使用 $.post

```
$.post("http://myURL/database/InsertData.php", "dataid="+ dataid+"&amp;industry="+ industry +"&amp;geolocation="+ geolocation); 
```

请记住，文档几乎总是很有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:37:05.887

尝试在对象中发送您的数据，例如：

```
data: {
    dataid : dataid,
    industry : industry,
    geolocation : geolocation
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-18T11:20:18.907

It seems to be a jquery bug. `jQuery.post` is a shorthand of `jQuery.ajax({method:"post"});`, so I changed my code to this, and it worked for me. Hope they will correct this issue.

Note, the issue still exists in 1.10.2 and 2.0.2 versions.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T20:55:41.457

Evan 是对的，尝试将您的数据发送到一个对象，jquery 将负责正确地对值进行 URL 编码。字符串连接在 js 中可能会出现问题。

# c# - 查询字符串错误

> ID：10357450
> 
> 赞同：1
> 
> 时间：2012-04-27T20:31:10.563
> 
> 标签：c#, windows-phone-7, query-string, tiles

对于我的辅助磁贴，我遇到了一些 queryStrings 的奇怪行为。字符串如下：

```
 "/MainPage.xaml?link=" + "touch.facebook.com/home.php?refsrc=http://touch.facebook.com/home.php" 
```

即使第二部分是 Uri.EscapeUriString()'ed 与否，应用程序根本不会从辅助磁贴开始。在加载任何内容之前，它会立即崩溃。

关于queryStrings，我有什么需要考虑的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:48:36.217

第二个`?`必须是`&`

**编辑：** URI 有一个给定的形式`page ? argument = value & argument = value & ...`等

在尝试使用它之前解析你的 uri：

```
string uri = "/MainPage.xaml?link=" + "touch.facebook.com/home.php?refsrc=http://touch.facebook.com/home.php";

string[] array = uri.Split('?');
if (array.Length > 2)
    uri = array[0] + "?" + string.Join("&", array.Skip(1).ToArray()); 
```

# jquery - IE 接受 302 响应，但忽略它

> ID：10357452
> 
> 赞同：1
> 
> 时间：2012-04-27T20:31:16.277
> 
> 标签：jquery, internet-explorer, post, redirect

我们使用 jquery/ajax 向服务器发送一些数据（post 方法）。并以 302 重定向作为响应。但什么也没发生。我的意思是，我们在 IE 开发工具和新位置看到“302 found”，但浏览器忽略它并停留在同一页面上。您能给我们一些建议吗？在其他浏览器，如 FF、Chrome、Safari 和 Opera 重定向工作正常。

UPD：问题解决了。位置是http链接，但我们在https之上工作。我认为IE不喜欢它。当我们将位置链接更改为 https 时，一切都开始工作了。

# c# - 通过编程排序绑定到 DataGridView 的可排序 BindingList

> ID：10357462
> 
> 赞同：5
> 
> 时间：2012-04-27T20:32:11.083
> 
> 标签：c#, winforms, data-binding, datagridview, bindinglist

我已经实现了在[http://msdn.microsoft.com/en-us/library/aa480736.aspx](http://msdn.microsoft.com/en-us/library/aa480736.aspx)找到的 SortableSearchableList 类，并为其添加了一个 Sort 方法，如下所示：

```
public void Sort(PropertyDescriptor prop, ListSortDirection direction)
{
ApplySortCore(prop, direction);
} 
```

此类在通过单击任何列标题对我的 DataGridView 进行排序时起作用，但我需要能够以编程方式为指定列调用 Sort 方法（在此示例中使用 sortButton 控件）。我在网上找到的几个代码示例建议获取列的 PropertyDescriptor 并将其传递给 ApplySortCore 方法。我还没有让它发挥作用。我可以获取 DataGridView 或 SortableSearchableList 的 PropertyDescriptorCollection 属性，但似乎无法获取 Find 方法来获取指定列/成员的 PropertyDescriptor。这是我的其余代码：

```
namespace SortableBindingListTest
{
public partial class Form1 : Form
{
    private SortableSearchableList<Tags> alarms = new SortableSearchableList<Tags>();
    public Form1()
    {
        InitializeComponent();
        alarms.Add(new Tags("some text", "1"));
        alarms.Add(new Tags("more text", "2"));
        alarms.Add(new Tags("another one", "3"));
        dataGridView1.AutoGenerateColumns = false;
        dataGridView1.AllowUserToAddRows = true;
        dataGridView1.EditMode = DataGridViewEditMode.EditOnEnter;
        dataGridView1.RowHeadersVisible = false;
        dataGridView1.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill;
        DataGridViewTextBoxColumn alarmColumn = new DataGridViewTextBoxColumn();
        alarmColumn.DataPropertyName = "Alarm";
        alarmColumn.Name = "Alarm";
        alarmColumn.HeaderText = "Alarm";
        DataGridViewTextBoxColumn messageColumn = new DataGridViewTextBoxColumn();
        messageColumn.DataPropertyName = "Message";
        messageColumn.Name = "Message";
        messageColumn.HeaderText = "Message";
        dataGridView1.Columns.Add(alarmColumn);
        dataGridView1.Columns.Add(messageColumn);
        dataGridView1.DataSource = alarms;
    }

    private void sortButton_Click(object sender, EventArgs e)
    {
        // try getting properties of BindingList
        PropertyDescriptorCollection listProperties = TypeDescriptor.GetProperties(alarms);
        PropertyDescriptor alarmProp = listProperties.Find("Alarm", false);
        // prop is null at this point, so the next line fails
        alarms.Sort(alarmProp, ListSortDirection.Ascending);
        // try getting properties of DataGridView column
        PropertyDescriptorCollection dgvProperties = TypeDescriptor.GetProperties(dataGridView1);
        PropertyDescriptor columnProp = dgvProperties.Find("Alarm", false);
        // columnProp is null at this point, so the next line also fails
        alarms.Sort(columnProp, ListSortDirection.Ascending);
    }
}

public class Tags : INotifyPropertyChanged
{
    private string _alarm;
    private string _message;
    public event PropertyChangedEventHandler PropertyChanged;
    public Tags(string alarm, string message)
    {
        _alarm = alarm;
        _message = message;
    }

    public string Alarm
    {
        get { return _alarm; }
        set
        {
            _alarm = value;
            this.NotifyPropertyChanged("Alarm");
        }
    }
    public string Message
    {
        get { return _message; }
        set
        {
            _message = value;
            this.NotifyPropertyChanged("Message");
        }
    }
    private void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
}
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:36:42.540

尝试这个

```
dataGridView1.Sort(dataGridView.Columns[0],ListSortDirection.Ascending); 
```

# node.js - 移动设备上的 NodeJS 和 Socket.io，我可以每秒轮询一次吗？

> ID：10357463
> 
> 赞同：0
> 
> 时间：2012-04-27T20:32:12.510
> 
> 标签：node.js, socket.io

Socket.io 有多轻量级？我是否能够每秒从客户端向服务器发送一条消息而不会出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:41:17.003

Socket.io 使用一组可用的 IO 机制工作。首先，它尝试 HTML5 网络套接字。这些本质上创建了一个适当的 TCP 套接字，因此开销很小。只要这是可用的，移动应用程序应该没问题。

然而，堆栈中较低的机制涉及 Flash 对象和轮询`XmlHttpRequest`，后者在使用移动应用程序时可能非常浪费。我当然不建议在手机上使用 1 秒的轮询率。

我的建议是检测 socket.io 何时恢复到轮询模式并改变您的应用程序的工作方式。使用较低的轮询率，但在必要时强制更新。

# python-2.7 - 在pygame中使多个球移动

> ID：10357466
> 
> 赞同：1
> 
> 时间：2012-04-27T20:32:40.907
> 
> 标签：python-2.7, pygame

我需要让这段代码中的球随机移动。我不确定我做错了什么。我是编程新手，这可能编码错误，因此将不胜感激。现在，代码在屏幕中间创建了一个可以上下移动的角色，并在屏幕左上角创建了一个不会移动的球。我希望屏幕上有多个球，最终我希望球随机移动，如果它们与角色发生碰撞，你就会输掉这个简单的游戏。

```
from pygame import *
import random

class Ball(sprite.Sprite):
    def __init__(self, numballs, balls = []):
        sprite.Sprite.__init__(self)
        self.image = image.load('ball.png')
        self.rect = self.image.get_rect()
        self.numballs = numballs
        self.balls = balls

    def multipleBalls(self):
        for count in range(self.numballs):
            self.balls.append(dict)
            self.balls[count] = {'x': 0, 'y': 0, 'xmove': random.randint(1,2), 'ymove':random.randint(1,2)}

    def ballMove(self):
        for count in range(self.numballs):
            self.balls[count]['x'] = self.balls[count]['x'] + self.balls[count]['xmove']
            self.balls[count]['y'] = self.balls[count]['y'] + self.balls[count]['ymove']

    def ballsOnScreen(self):
        for count in range(self.numballs):
            self.screen.blit(self.image, (self.balls[count]['x'], self.balls[count]['y']))

    def ballBarrier(self):
        for count in range(self.numballs):
            if self.balls[count]['x'] > 620:
                self.balls[count]['xmove'] = random.randint(-2, 0)
            if self.balls[count]['x'] < -10:
                self.balls[count]['xmove'] = random.randint(0, 2)
            if self.balls[count]['y'] > 470:
                self.balls[count]['ymove'] = random.randint(-2, 0)
            if self.balls[count]['y'] < -10:
                self.balls[count]['ymove'] = random.randint(0, 2)

    def manageBall(self):
        self.multipleBalls()
        self.ballsOnScreen()
        self.ballMove()
        self.ballBarrier()

class Character(sprite.Sprite):
    def __init__(self, xy):
        sprite.Sprite.__init__(self)
        self.image = image.load('character.png')
        self.rect = self.image.get_rect()
        self.rect.centerx, self.rect.centery = xy
        self.movementspeed = 1
        self.velocity = 0

    def down(self):
        self.velocity += self.movementspeed

    def up(self):
        self.velocity -= self.movementspeed

    def characterMove(self, dy):
        if self.rect.bottom + dy > 480:
            self.rect.bottom = 480
        elif self.rect.top + dy < 0:
            self.rect.top = 0
        else:
            self.rect.y += dy

    def update(self):
        self.characterMove(self.velocity)

class Game(object):
    def __init__(self):
        init()
        key.set_repeat(1, 30)
        self.screen = display.set_mode((640, 480))
        self.clock = time.Clock()
        display.set_caption('Game')
        event.set_allowed([QUIT, KEYDOWN, KEYUP])
        self.background = Surface((640, 480))
        self.background.fill((0,0,0))
        self.screen.blit(self.background, (0,0))
        display.flip()
        self.sprites = sprite.RenderUpdates()
        self.character = Character((320, 240))
        self.sprites.add(self.character)
        self.ball = Ball(5)
        self.sprites.add(self.ball)

    def run(self):
        running = True
        while running == True:
            self.clock.tick(60)
            running = self.handleEvents()
            display.set_caption('game %d fps' % self.clock.get_fps())
            for sprite in self.sprites:
                sprite.update()
            self.sprites.clear(self.screen, self.background)
            dirty = self.sprites.draw(self.screen)
            display.update(dirty)
            self.ball.manageBall()

    def handleEvents(self):
        for e in event.get():
            if e.type == QUIT:
                return False

            elif e.type == KEYDOWN:
                if e.key == K_ESCAPE:
                    return False
                if e.key == K_UP:
                    self.character.up()
                if e.key == K_DOWN:
                    self.character.down()

        return True

def main():
    game = Game()
    game.run()
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:29:28.383

我以前从未使用过 Sprite 类，所以这是一个很好的练习。:)

我修复了您的代码，只需将图像路径更改回您的图标位置，您应该一切顺利。如果您运行的是旧版本的 Python，打印语句可能需要重新格式化。

我在 Ball 和 Character 类中取出了对 Sprite **init**方法的强制调用，它不会让我将它们添加到 game.sprites 渲染组中。不知道为什么。

我正在运行 Python 3.2.2 和 Pygame 1.9.2pre 所以 YMMV。:)

控制：

UP / DOWN =移动你的家伙。

R = 添加一个新的随机球。

```
from pygame import *
import random

SCREEN_WIDTH = 640
SCREEN_HEIGHT = 480

FPS = 60

class Ball(sprite.Sprite):
    def __init__(self, xy = (0,0), xm = 0, ym = 0):
        sprite.Sprite.__init__(self)
        self.img_load('evil_balloon_32x32.png')
        self.rect.centerx, self.rect.centery = xy

        self.xmove = xm
        self.ymove = ym

    def update(self):
        self.move()
        self.ballBarrier()

    def move(self):
        self.rect.x += self.xmove
        self.rect.y += self.ymove

    def img_load(self, filename):
        self.image = image.load(filename)
        self.rect = self.image.get_rect()

    def ballBarrier(self):
        """
        Checks to make sure ball is within bounds, adjusts movement speed if it's not
        """
        if self.rect.right > SCREEN_WIDTH:
            self.xmove = random.randint(-2, 0)
        if self.rect.left < 0:
            self.xmove = random.randint(0, 2)
        if self.rect.bottom > SCREEN_HEIGHT:
            self.ymove = random.randint(-2, 0)
        if self.rect.top < 0:
            self.ymove = random.randint(0, 2)

class ball_manager():
    def __init__(self, numballs = 5, balls = []):      
        self.blist = balls

        if numballs > 0:
            self.multipleBalls(numballs) # moved this here so balls get init'd only once

    def update(self):
        """
        Update position of all balls
        """
        for ball in self.blist:
            self.ballMove(ball)

    def add_ball(self, xy = (0,0), xm = 0, ym = 0):
        self.blist.append(Ball(xy, xm, ym)) # appends a random ball

    def multipleBalls(self, numballs):
        for i in range(numballs):
            self.add_ball((random.randint(0, SCREEN_WIDTH),
                          random.randint(0, SCREEN_HEIGHT)),
                          random.randint(-2,2),
                          random.randint(-2,2))

class Character(sprite.Sprite):
    def __init__(self, xy):
        sprite.Sprite.__init__(self)
        self.img_load()

        self.rect.centerx, self.rect.centery = xy

        self.movementspeed = 1
        self.velocity = 0

    def down(self):
        self.velocity += self.movementspeed

    def up(self):
        self.velocity -= self.movementspeed

    def characterMove(self, dy):
        if self.rect.bottom + dy > SCREEN_HEIGHT:
            self.rect.bottom = SCREEN_HEIGHT
            self.velocity = 0
        elif self.rect.top + dy < 0:
            self.rect.top = 0
            self.velocity = 0
        else:
            self.rect.y += dy

    def update(self):
        self.characterMove(self.velocity)

    def img_load(self):
        self.image = image.load("scary_clown_32x32.png")
        self.rect = self.image.get_rect()

class Game(object):
    def __init__(self):
        init()
        key.set_repeat(1, 30)
        self.screen = display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
        self.clock = time.Clock()
        display.set_caption('Game')

        event.set_allowed([QUIT, KEYDOWN, KEYUP])
        self.background = Surface((SCREEN_WIDTH, SCREEN_HEIGHT))
        self.background.fill((0,0,0))
        self.screen.blit(self.background, (0,0))
        display.flip()

        self.sprites = sprite.RenderUpdates()

        self.character = Character((SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2))

        self.sprites.add(self.character)

        self.balls = ball_manager(5)

        for ball in self.balls.blist:
            self.sprites.add(ball)

    def run(self):
        running = True
        while running == True:
            self.clock.tick(FPS)
            running = self.handleEvents()
            display.set_caption('game %d fps' % self.clock.get_fps())

            self.sprites.clear(self.screen, self.background)

            for sprite in self.sprites:
                sprite.update()

            dirty = self.sprites.draw(self.screen)
            display.update(dirty)

    def handleEvents(self):
        for e in event.get():
            if e.type == QUIT:
                return False

            elif e.type == KEYDOWN:
                if e.key == K_ESCAPE:
                    return False
                if e.key == K_UP:
                    self.character.up()
                if e.key == K_DOWN:
                    self.character.down()
                if e.key == K_r:
                   self.sprites.add(Ball((random.randint(0, SCREEN_WIDTH),
                          random.randint(0, SCREEN_HEIGHT)),
                          random.randint(-2,2),
                          random.randint(-2,2))) 

        return True

def main():
    game = Game()
    game.run()
    quit()

main()
sys.exit() 
```

# javascript - 为什么这个 knockoutjs observableArray 不会导致 UI 更新？

> ID：10357469
> 
> 赞同：15
> 
> 时间：2012-04-27T20:33:01.407
> 
> 标签：javascript, knockout.js

我有一种感觉，我在这里错过了一些简单的东西，但就是不能完全理解这一点。这是我的脚本：

```
function FormDefinition()
{
    var self = this;
    self.Fields = ko.observableArray([new FieldDefinition()]);    
}

function FieldDefinition()
{
    var self = this;
    self.Name = "Test";
}
function ViewModel()
{
    var self = this;
    self.formDef = ko.observable(new FormDefinition());
    self.Name = "bob"
    self.addField = function(){
        this.formDef().Fields().push(new FieldDefinition());                    
    }            
}

ko.applyBindings(new ViewModel()); 
```

这是我的标记：

```
<a data-bind="click: addField">Add</a><br/>
<span data-bind="text: Name"></span>
<ul data-bind="foreach: formDef().Fields">
    <li data-bind="text: Name"></li>
</ul>​ 
```

这是一个 jsFiddle：http: [//jsfiddle.net/5xSmr/](http://jsfiddle.net/5xSmr/)

预期的行为是单击“添加”会导致 ui 更新。调试显示 addfield 被调用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-27T20:58:17.887

修复了你的小提琴：http: [//jsfiddle.net/5xSmr/2/](http://jsfiddle.net/5xSmr/2/)

```
<a data-bind="click: AddField">Add</a><br/>
<span data-bind="text: Name"></span>
<ul data-bind="foreach: formDef().Fields()">
    <li data-bind="text: Name"></li>
</ul> 
```

```
function FormDefinition()
{
    var self = this;
    self.Fields = ko.observableArray();    
}

function FieldDefinition()
{
    var self = this;
    self.Name = "Test";
}
function ViewModel()
{
    var self = this;
    self.formDef = ko.observable(new FormDefinition());
    self.Name = "bob"
    self.AddField = function(){
        this.formDef().Fields.push({Name:"test"});
    }            
}

ko.applyBindings(new ViewModel()); 
```

主要问题是您正在调用 Fields() 而不仅仅是 Fields。Fields() 返回解包后的数组，并通过直接推送到它，ko 永远不会知道它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:58:08.447

干得好 ：-）

[http://jsfiddle.net/JasonMore/Q6J6a/3/](http://jsfiddle.net/JasonMore/Q6J6a/3/)

**看法**

```
<a href='#' data-bind="click: AddField">Add</a><br/>
<span data-bind="text: Name"></span>
<ul data-bind="foreach: formDef.Fields">
    <li data-bind="text: Name"></li>
</ul>​ 
```

**Javascript**

```
var FormDefinition = function ()
{
    var self = this;
    self.Fields = ko.observableArray();    
}

var ViewModel = function()
{
    var self = this;
    self.formDef = new FormDefinition();
    self.Name = ko.observable("bob");
    self.AddField = function(){
        self.formDef.Fields.push({Name:"test"});            
    }            
}

ko.applyBindings(new ViewModel()); 
```

​</p>

​</p>

# c++ - 可变参数模板和“预期类型”错误

> ID：10357471
> 
> 赞同：4
> 
> 时间：2012-04-27T20:33:41.673
> 
> 标签：c++, c++11, variadic-templates

我正在自己实现（主要是为了学习目的），`tuple`我刚刚遇到了一个问题。我有以下代码：

```
namespace Rose
{
    template<typename T>
    struct RemoveReference
    {
        typedef T Type;
    };

    template<typename T>
    struct RemoveReference<T &>
    {
        typedef T Type;
    };

    template<typename... Elems>
    class Tuple;

    template<typename First, typename... Elems>
    class Tuple<First, Elems...>
    {
    public:
        Tuple(First a, Elems... more)
            : More(more...), Element(a)
        {
        }

        Tuple<First, Elems...> & operator=(const Tuple<RemoveReference<First>::Type,
                                           RemoveReference<Elems>::Type...> & rhs)
        {
            this->Element = rhs.Element;
            this->More = rhs.More;

            return *this;
        }

    private:
        Tuple<Elems...> More;
        First Element;
    };

    template<typename Only>
    class Tuple<Only>
    {
    public:
        Tuple(Only a) : Element(a)
        {
        }

        Tuple<Only> & operator=(const Tuple<RemoveReference<Only>::Type> & rhs)
        {
            this->Element = rhs.Element;

            return *this;
        }

    private:
        Only Element;
    };
}

int main()
{
    Rose::Tuple<int, float, int> t(1, 1.f, 2);
} 
```

这会导致以下错误（还有更多，但这是必不可少的）：

> 错误：“模板结构 Rose::Tuple”的模板参数列表中的参数 1 的类型/值不匹配错误：需要一个类型，得到“Rose::RemoveReference::Type”

我真的不明白这是怎么回事。`RemoveReference`单独使用时，该特征有效。

这里有两个测试用例：

*   [我在上面粘贴的代码不起作用](http://ideone.com/fx2L8)
*   [`RemoveReference`单独使用时有效的证明](http://ideone.com/Qav5c)

我已经用 G++ 4.6.1、4.5.1 和 Clang++ 2.9 尝试过这段代码。

这些错误出现的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:39:14.613

`RemoveReference<T>::Type`是依赖类型，所以需要在`typename`这里添加：

```
 Tuple<First, Elems...> & operator=(const Tuple<typename RemoveReference<First>::Type,
                                                       typename RemoveReference<Elems>::Type...> & rhs) 
```

可能还有其他地方。

# css - 将两个 id 放在一个 a href 中

> ID：10357475
> 
> 赞同：1
> 
> 时间：2012-04-27T20:33:54.443
> 
> 标签：css

我正在尝试制作一个用 CSS 改变两件事的按钮。首先，它会使文本出现，其次它会使文本顶部的图像消失。我已经尝试了很多东西，但我就是无法让它工作。任何帮助将不胜感激。CSS是

```
p {
    color:#591865;
    text-align:center;
    opacity:0;

}

p:target {
    color:# a1a100;
    opacity:1;
    -webkit-transition: opacity 1s linear;
}

#image {
    opacity: 1;
    background-image:url(images/01.jpg);
    height: 786px;
    width:1024;
}

#image:target {
    opacity:0;
} 
```

和 html 是

```
<nav>
            <a href="#one, #image">One</a>
            <a href="#two, #image">Two</a>
            <a href="#three, #image">Three</a>
            <a href="#four, #image">Four</a>
        </nav>
       <div id="image"><img src="images/01.jpg"/></div> 
       <div>
        <p id="one"><img src="graphics/filler.png" width="281" height="128" onClick="javascript:playVideo1();"/></p> 
        <p id="two"><video src="images/01.m4v" poster="images/01.jpg" autoplay controls></video></p>
        <p id="three">Number Three</p>
        <p id="four">Number Four</p> 
   </div>
   </div> 
```

感谢您的任何意见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:44:39.270

这是不可能的，因为它目前是写的。要以这种方式影响*两个*不同的元素，需要 JavaScript。

但是，如果您能够对 HTML 重新排序（并且愿意仅获得更现代的浏览器的支持），那么可以使用以下 HTML 来实现它：

```
<nav>
<a href="#one">One</a>
<a href="#two">Two</a>
<a href="#three">Three</a>
<a href="#four">Four</a>
</nav>
<div>
    <p id="one">
        <img src="graphics/filler.png" width="281" height="128" onclick="javascript:playVideo1();"/>
    </p>
    <p id="two">
        <video src="images/01.m4v" poster="images/01.jpg" autoplay controls></video>
    </p>
    <p id="three">
        Number Three
    </p>
    <p id="four">
        Number Four
    </p>
    <div id="image">
        <img src="images/01.jpg"/>
    </div>
</div>​ 
```

以及额外的 CSS 选择器：

```
p:target ~ #image {
    opacity:0;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PwVSn/)。

如果 JavaScript 是一个选项，那么以下工作：

```
var links = document.querySelectorAll('nav > a'),
    image = document.getElementById('image');

for (var i=0,len=links.length; i<len; i++){
    links[i].onclick = function(e){
        image.style.opacity = '0';
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PwVSn/1/)。

参考：

1.  CSS：

    *   [`E ~ F`, 一般兄弟组合子](http://www.w3.org/TR/selectors/#selectors).
2.  JavaScript：

    *   [`getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById).
    *   [`querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll).
    *   [`element.style`](https://developer.mozilla.org/en/DOM/element.style).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:39:13.833

像这样的东西？（我在这里使用 jQuery，但同样的想法可以很容易地应用于常规 javascript）

```
<a href="#" onclick="toggleVisible('one', 'image')">One</a>
<script type="text/javascript">
    function toggleVisible( textId, imageId ) {
        $( "#" + textId ).show(); //It should be semicolon
        $( "#" + imageId ).hide();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:45:24.097

您不能在单个 href 中创建两个 id，因为 # href 使浏览器专注于您链接到的对象，因此如果您指向 2 个对象，浏览器就无法同时关注它们...

例如：假设您将两个 href 用于输入文本，两者都会被聚焦？当您键入时，它会在两者上输入相同的内容吗？

你可以使用javascript：

```
<a href="#" onclick="toggleVisible('one', 'image')">One</a>
<script type="text/javascript">
    function toggleVisible( textId, imageId ) {
        $( "#" + textId ).show().
        $( "#" + imageId ).hide();
    }
</script> 
```

当然你必须包括jquery： `<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T12:19:22.493

我试图完成类似的事情，即仅使用 css 来显示\隐藏使用锚点的项目，以及目标选择器......

我没有时间为这个问题创建一个特定的例子，但我相信你可以弄清楚......；）

这是小提琴...

```
(http://jsfiddle.net/pB72f/) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T06:43:44.230

正如 david Thomas 所说，您不能将 2 个 id 放入 url，但是有一个不需要 javascript 的复杂 css 解决方案。在您的提案中，您有四个 a 标签，因此您有 4 个单独的页面可以处于的状态。将所有 4 个 p 标签包装在 4 个嵌套跨度标签中的父 div 内，并为每个跨度标签标识每个人的 id状态

```
<nav>
    <a href="#oneimage1">One</a>
    <a href="#twoimage1">Two</a>
    <a href="#oneimage2">Three</a>
    <a href="#twoimage2">Four</a>
</nav>
<span id="oneimage1">
    <span id="twoimage1">
        <span id="oneimage2">
            <span id="twoimage2">

                <div id="image1"><img src="images/01.jpg"/></div>
                <div id="image2"><img src="images/01.jpg"/></div> 
                <div>
                    <p id="one">Number One</p> 
                    <p id="two">Number ~Two</p> 
                </div>
            </span>
        </span>
    </span>
</span> 
```

然后CSS看起来像这样

```
span#oneimage1:target #image1 {Properties: values; go here }
span#oneimage1:target #one    {Properties: values; go here }

span#oneimage2:target #image2 {Properties: values; go here }
span#oneimage2:target #one    {Properties: values; go here }

span#twoimage1:target #image1 {Properties: values; go here }
span#twoimage1:target #two    {Properties: values; go here }

span#twoimage2:target #image2 {Properties: values; go here }
span#twoimage2:target #two    {Properties: values; go here } 
```

这是有效的，因为您的目标是您希望从 url 控制的所有元素的父级。因为你需要四个 id 并且你只能在一个元素上放置一个 id，因此你需要嵌套 4 个 span 元素，这些元素是你希望控制其 css 的元素。

祝一切顺利。TJE

# google-maps - 居中 InfoWindow Google Map IFrame

> ID：10357478
> 
> 赞同：0
> 
> 时间：2012-04-27T20:34:17.940
> 
> 标签：google-maps

有没有办法在谷歌地图 iFrame 上将弹出窗口（信息窗口）居中以确保它不会被切断？

使用 Google Map API 代替 iFrame 会更容易吗？如果是这样，是否有一个 API 调用可以在 infoWIndow 上默认为我提供相同的信息？

注意：我尝试过使用 Google Map API，我更喜欢使用 iFrame。唯一的缺点是我没有获得使用 google map iFrame 附带的额外信息。看起来我需要自己用 HTML 填充这个窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:43:16.477

顺便说一句，这里是如何创建自定义信息窗口的一个很好的例子。

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

您可以使用任何 html，例如自定义标题、div 和链接

这是带有 Google 地图的 Placed API：

[https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

# javascript - 如何确定对象在 Javascript 中是“自定义”的？

> ID：10357481
> 
> 赞同：2
> 
> 时间：2012-04-27T20:34:34.263
> 
> 标签：javascript, object

为了澄清我的标题，我需要一种方法来确定对象不是字符串、数字、布尔值或任何其他预定义的 JavaScript 对象。想到的一种方法是：

```
if(!typeof myCustomObj == "string" && !typeof myCustomObj  == "number" && !typeof myCustomObj == "boolean") { 
```

我可以检查是否`myCustomObj`是一个对象，如下所示：

```
if(typeof myCustomObj == "object") { 
```

但是，这仅适用于原始值，因为这`typeof new String("hello world") == "object")`是真的。

确定对象是否**不是**预定义的 JavaScript 对象的可靠方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:37:35.117

这是 jQuery 在[jQuery.isPlainObject()中的操作方式](http://api.jquery.com/jQuery.isPlainObject/)

```
function (obj) {
    // Must be an Object.
    // Because of IE, we also have to check the presence of the constructor property.
    // Make sure that DOM nodes and window objects don't pass through, as well
    if (!obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow(obj)) {
        return false;
    }

    try {
        // Not own constructor property must be Object
        if (obj.constructor && !hasOwn.call(obj, "constructor") && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
            return false;
        }
    } catch(e) {
        // IE8,9 Will throw exceptions on certain host objects #9897
        return false;
    }

    // Own properties are enumerated firstly, so to speed up,
    // if last one is own, then all properties are own.
    var key;
    for (key in obj) {}

    return key === undefined || hasOwn.call(obj, key);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T20:36:36.317

您可以在对象原型上使用“toString”函数：

```
var typ = Object.prototype.toString.call( someTestObject ); 
```

这为内置类型提供了诸如“[object String]”或“[object Date]”之类的答案。不幸的是，您无法区分作为普通 Object 实例创建的事物和使用构造函数创建的事物，但从某种意义上说，这些事物并没有太大的不同。

# javascript - 预编译 rails-3 资产管道，使 javascript 失败，阻止 heroku 部署

> ID：10357504
> 
> 赞同：0
> 
> 时间：2012-04-27T20:36:51.360
> 
> 标签：javascript, ruby-on-rails, ruby, heroku, asset-pipeline

我在 rails-3.2.3/bootstrap 应用程序上使用[datatables](http://datatables.net/) js 对表的字段进行排序。

如果我在本地运行应用程序而不预编译资产管道，它可以正常工作，但是一旦我运行：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

生成的 public/assets 阻止 DataTables 插件工作，即使它看起来正确打包到 public/assets/manifest.yml 文件和 public/assets 目录中：

```
lsoave@ubuntu:~/rails/github/gitwatcher$ ls -l app/assets/javascripts
total 84
-rw-rw-r-- 1 lsoave lsoave   553 2012-04-27 21:36 application.js
-rw-rw-r-- 1 lsoave lsoave    99 2012-04-20 21:37 bootstrap.js.coffee
-rw-rw-r-- 1 lsoave lsoave  3387 2012-04-26 20:12 DT_bootstrap.js
-rw-rw-r-- 1 lsoave lsoave 71947 2012-04-26 20:12 jquery.dataTables.min.js
lsoave@ubuntu:~/rails/github/gitwatcher$ 
```

任何一个 application.js 看起来都不错：

```
app/assets/javascripts/application.js:

//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require DT_bootstrap
//= require jquery.dataTables.min
//= require_tree . 
```

当然，这更有问题，因为它会阻止 rails 应用程序在 heroku 上运行（我可以从头开始编译应用程序，或者使用本地预编译的版本，但它们无论如何都不起作用）。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:00:42.587

我只是让它自己工作。你在用`jquery-datatables-rails`宝石吗？如果没有，你应该！将此行放在您的 gemfile 中：

```
gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails' 
```

并运行：

> 捆绑安装

注意：不要将它放在您的资产组中，否则在部署到 heroku 时它将不起作用（因为资产组未在生产中使用）。

另外，请确保将此行放在您的 application.rb 中：

```
config.assets.initialize_on_precompile = false 
```

将这些添加到您的 application.js

```
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap 
```

将此添加到您的 application.css：

```
 *= require dataTables/jquery.dataTables.bootstrap 
```

并将其添加到您正在使用数据表的控制器的 js.coffee 文件中：

如果您使用流体容器：

```
#// For fluid containers
$('#dashboard').dataTable({
  "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
  "sPaginationType": "bootstrap"
}); 
```

如果您使用固定宽度的容器：

```
#// For fixed width containers
$('.datatable').dataTable({
  "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
  "sPaginationType": "bootstrap"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:00:36.687

这可能有几个原因不起作用。最好的选择是从这里开始：

[http://www.neilmiddleton.com/heroku-asset-pipeline-faq/](http://www.neilmiddleton.com/heroku-asset-pipeline-faq/)

# ruby - Selenium Ruby Webdriver 无法运行 Chrome 浏览器

> ID：10357507
> 
> 赞同：1
> 
> 时间：2012-04-27T20:36:57.110
> 
> 标签：ruby, google-chrome, selenium, webdriver

我正在尝试为 chrome 启动远程会话并不断遇到同样的问题。剧本没那么复杂。我想知道是否不是某些可能设置不正确的开关。下面是我正在使用的一段代码以及我正在返回的错误（或其中的一部分，很长）。我看到浏览器尝试打开然后立即关闭。

```
require "selenium-webdriver"
require "test/unit"

class PageLinks < Test::Unit::TestCase

  def setup
    @caps = Selenium::WebDriver::Remote::Capabilities.chrome
    @caps['chrome.switches'] = %w[--ignore-certificate-errors]
    @driver = Selenium::WebDriver.for( :remote, :url => 'http://localhost:4444/wd/hub', :desired_capabilities => @caps )
    @driver.manage.timeouts.implicit_wait = 200
    @driver.manage.timeouts.page_load = 200
    @wait = Selenium::WebDriver::Wait.new(:timeout => 200)
    @verification_errors = []
  end

  def teardown
    @driver.quit
  end

  def test_pagelinks
    @driver.get('http://www.yahoo.com')
    @driver.find_element(:link, "HOME").click 
```

## ……

```
test_pagelinks(PageLinks):
Selenium::WebDriver::Error::UnknownError: [GET, HEAD, DELETE]
Command duration or timeout: 2 milliseconds
Build info: version: '2.20.0', revision: '16008', time: '2012-02-27 19:03:04'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_03'
Driver info: driver.version: RemoteWebDriver (org.openqa.selenium.UnsupportedCommandException)
[remote server] sun.reflect.NativeConstructorAccessorImpl():-2:in `newInstance0'
[remote server] sun.reflect.NativeConstructorAccessorImpl():-1:in `newInstance' 
```

…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:26:31.720

page_load 超时设置是 Firefox 驱动程序中的一项实验性功能，Chrome 驱动程序尚不支持。

# django - Backbone.js 和 Django（没有 Tastypie）

> ID：10357509
> 
> 赞同：1
> 
> 时间：2012-04-27T20:37:02.120
> 
> 标签：django, backbone.js

我正在为我的网站使用 Django 并尝试合并backbone.js。Backbone 鼓励使用 Tastypie——但我不愿意。有没有办法在没有美味派的情况下使用主干.js 和 django？有没有关于如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:11:36.510

我一直是你。只需为骨干创建一个自定义 API 即可读取特定实例。

真正的意思是，在您的views.py 中制作自定义视图，并将它们附加到urls.py 中的自定义url 以用于主干。您的视图必须返回一个或多个对象的 JSON 版本

所以你最终会得到主干喜欢的友好的 url

例如，如果我有一个盒子模型，我想编写一个 url 和一个视图，将我数据库中的所有盒子发送到我的前端，将它们传递到主干 - 我可以制作一个像这样的 url /api/v1/box/all / 真的是你想要的任何东西。在您看来，您只需要记住返回 JSON。

请记住 - 您需要更新视图才能从主干同步（tastypie PUTS）更新，例如 /api/v1/box/3/update?updatedinfodata

如果您希望我扩展或显示一些代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:27:24.897

机器人可以使用 TastyPie 并构建您自己的 API。

您只需要知道 Backbone 发送给 API 的信息以及它期望接收的数据。

# c# - 带有 Visual Studio Express 的 VSTO Excel 加载项

> ID：10357520
> 
> 赞同：4
> 
> 时间：2012-04-27T20:37:49.013
> 
> 标签：c#, visual-studio-2010, excel, vsto, add-in

我想使用 Visual Studio C# 2010 Express 为 MS Excel 创建一个加载项（精确的功能区）。[我已经在这里](http://msdn.microsoft.com/en-us/gg621187)、[这里](http://www.c-sharpcorner.com/uploadfile/ptmujeeb/create-custom-tab-in-office-ribbon-at-excel-word-2007/)和其他地方搜索并阅读了它。但是，当我想创建一个新项目时，我看不到任何所描述的模板，我什至看不到 Office 选项卡。是因为我使用的是 Express 版吗？我认为不应该。因为在这个[官方比较](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison)中，他们说所有版本都能够进行办公开发。

我可以做些什么来开发这个插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T20:43:24.193

根据MSDN 论坛上的[这篇文章](http://social.msdn.microsoft.com/Forums/eu/vsto/thread/2efda09a-0e59-464d-b3c7-0ed0d9d88244)，Visual Studio Tools for Office 在 Express 版中不可用。我不确定您在比较页面上的哪个位置阅读该内容（快速浏览并没有说明 Express 版本）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T20:16:18.273

使用 .NET 制作 Excel 插件的 VSTO 的一个很好的替代方法是[Excel-DNA](http://exceldna.codeplex.com)（我开发的）。它是一个免费库，使用 C API（作为 .xll 插件）将您的 .NET 程序集与 Excel 集成。您可以为 Excel（VSTO 不支持）创建用户定义的工作表函数 (UDF)，并制作功能区、RTD 服务器。您无需任何注册或管理员权限即可轻松部署（单个 .xll 文件），即使对于功能区和 RTD 服务器也是如此。

如果您只想通过 COM 接口进行集成，而不是制作 UDF 或使用专门的 Excel 功能，另一种选择是[NetOffice](http://netoffice.codeplex.com)。该项目为您提供了一组与版本无关的 Office 和 Visio 互操作程序集，并允许您轻松制作针对不同版本 Office 的加载项。NetOffice 也可以用作 Excel-DNA 插件中的 COM 互操作库。

这两个方向都可以在 Visual Studio 的 Express 版本以及免费的[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/) IDE 中正常工作。

# java - 我需要什么 Java 布局？

> ID：10357521
> 
> 赞同：-4
> 
> 时间：2012-04-27T20:38:12.367
> 
> 标签：java, swing, layout

我有一个 JPanel，例如，如果我单击“INSERT”按钮，我可以添加一个 JButton 和一个 JLabel。我的问题是我需要在 JButton 下插入 JLabel。JLabel 文本必须居中，尊重 JButton 文本。之后，我想要一个大约 10 像素的空间来再次使用我的“INSERT”按钮，并在 JButton 和 JLabel 上水平添加一个具有相同方向的新对。

谢谢！

PD：请尝试补充您的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:08:49.303

这是一个快速示例，它显示了一个动态（我假设您想要的）设置，以允许插入未定义数量的面板：

```
public class AwesomeAnswer {

  public static void main(String[] args) {
     // please not that this is only an example and not a 
     // Swing thread safe way of starting a JFrame
     JFrame frame = new JFrame();

     JPanel content = (JPanel)frame.getContentPane();
     // create our top panel that will hold all of the inserted panels
     JPanel page = new JPanel();
     page.setLayout( new BoxLayout( page, BoxLayout.Y_AXIS ) );
     // add our page to the frame content pane
     content.add( page );
     // add two button/label panels
     page.add( insert( "This is an awesome answer", "Accept" ) );
     page.add( insert( "Say thank you", "Thank" ) );

     frame.pack();
     frame.setVisible( true );
  }

  public static final JPanel insert( String labelText, String buttonText ) {
     // create the label and the button
     JLabel lbl = new JLabel( labelText );
     JButton btn = new JButton( buttonText );
     // create the panel that will hold the label and the button
     JPanel wrapPanel = new JPanel( new GridBagLayout() );
     wrapPanel.setBorder( BorderFactory.createEmptyBorder( 10, 10, 10, 10 ) );
     // tell the grid bag how to behave
     GridBagConstraints gbc = new GridBagConstraints();
     gbc.gridwidth = 0;
     gbc.gridheight = 2;

     // make the button centered
     JPanel buttonPanel = new JPanel( new FlowLayout( 0, 0, FlowLayout.CENTER ) );
     buttonPanel.add( btn );

     // make the label centered
     JPanel labelPanel = new JPanel( new FlowLayout( 0, 0, FlowLayout.CENTER ) );
     labelPanel.add( lbl );

     // add our button and label to the grid bag with our constraints
     wrapPanel.add( buttonPanel, gbc );
     wrapPanel.add( labelPanel, gbc );

     return wrapPanel;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:56:52.003

我认为你有类似的东西

```
rootPane
    +-----panelButton
    |            +------JButton
    |
    +-----panelPanels
              +-----panel
                     +---JButton
                     +---JLabel 
```

可以`SpringLayout`帮助你

```
SpringUtilities.makeGrid(panel,
                     2, 1, //rows, cols
                     0, 0, //initialX, initialY
                     5, 5);//xPad, yPad 
```

# linq - 对 IEnumerable 进行排序 在 IEnumerable 中 >

> ID：10357522
> 
> 赞同：1
> 
> 时间：2012-04-27T20:38:18.220
> 
> 标签：linq, c#-4.0, lambda

我有一个类型的对象`IEnumerable<IEnumerable<int>>`。我需要对内部的整数进行排序，`IEnumerable<int>`但我不知道该怎么做。

我尝试使用以下代码转换`IEnumerable<IEnumerable<int>>`为`List<List<int>>`以使排序更容易：

```
var sortedResults = results.ForEach(x => x.ToList()); 
```

但我收到错误“无法将 void 分配给隐式类型变量”

如果我同时进行排序和转换，我也会收到相同的错误：

```
var sortedResults = results.ToList().ForEach(x => x.ToList().Sort((a ,b) => a.CompareTo(b)))); 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:39:15.210

只需使用[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)- 因为这些是整数，这意味着您可以使用数字本身作为标准：

```
sortedResults = results.Select(x => x.OrderBy(num => num)); 
```

上面假设您希望输出只是一个`IEnumerable<IEnumerable<int>>`如果您需要列表，`ToList()`则需要使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:39:36.473

```
var sortedResults = results.Select(list => list.OrderBy(x => x)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:36:24.883

我试图绘制一个如何使用 IEnumerable 进行排序的示例，我想我可以帮助您了解它是如何工作的。观察示例，希望对您理解示例有所帮助：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        class Person
        {
            public string name { get; set; }
            public int personage { get; set; }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Person[] p ={new Person{name="Alice",personage=10 },
                         new Person{name="Alex",personage=11},
                         new Person{name="Danny",personage=12}};
            IEnumerable<Person> query = p.OrderBy(ps => ps.personage);
            foreach (Person item in query)
            {
                textBox1.Text += item.name + item.personage.ToString() + Environment.NewLine;
            }

        } 
```

结果是：
Alice10
Alex11
Danny12

# node.js - 无法在 Heroku 上成功执行 Node.js 应用程序（每次都崩溃）

> ID：10357523
> 
> 赞同：5
> 
> 时间：2012-04-27T20:38:31.187
> 
> 标签：node.js, heroku, foreman

我基本上按照他们的说明在 Heroku 上尝试了一个示例 node.js 应用程序：[https ://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)

该应用程序在本地运行良好`foreman start`，但是，每次我部署应用程序时它都会崩溃。 ***我究竟做错了什么？***

**我的`Procfile`包含：**

```
web: node web.js 
```

**我的`package.json`包含：**

```
{
  "name": "testapp",
  "version": "0.0.1",
  "engines": {
      "node": "0.6.15"
    , "npm": "1.1.9"    
  }
  , "dependencies": {
    "tower": "0.4.0-12"
  }
} 
```

**我的`web.js`包含：**

```
var express = require('express');

var app = express.createServer(express.logger());

app.get('/', function(request, response) {
  response.send('Hello World!');
});

var port = process.env.PORT || 3000;
app.listen(port, function() {
  console.log("Listening on " + port);
}); 
```

该应用程序部署并启动，但每次都崩溃。我从应用程序看到的日志输出是：

```
2012-04-27T20:21:31+00:00 heroku[web.1]: State changed from created to starting
2012-04-27T20:21:37+00:00 heroku[web.1]: Starting process with command `node web.js`
2012-04-27T20:21:38+00:00 app[web.1]: 
2012-04-27T20:21:38+00:00 app[web.1]: node.js:201
2012-04-27T20:21:38+00:00 app[web.1]:         throw e; // process.nextTick error, or 'error' event on first tick
2012-04-27T20:21:38+00:00 app[web.1]:               ^
2012-04-27T20:21:38+00:00 app[web.1]: Error: Cannot find module 'express'
2012-04-27T20:21:38+00:00 app[web.1]:     at Function._resolveFilename (module.js:332:11)
2012-04-27T20:21:38+00:00 app[web.1]:     at Function._load (module.js:279:25)
2012-04-27T20:21:38+00:00 app[web.1]:     at Module.require (module.js:354:17)
2012-04-27T20:21:38+00:00 app[web.1]:     at require (module.js:370:17)
2012-04-27T20:21:38+00:00 app[web.1]:     at Object.<anonymous> (/app/web.js:1:77)
2012-04-27T20:21:38+00:00 app[web.1]:     at Module._compile (module.js:441:26)
2012-04-27T20:21:38+00:00 app[web.1]:     at Object..js (module.js:459:10)
2012-04-27T20:21:38+00:00 app[web.1]:     at Module.load (module.js:348:31)
2012-04-27T20:21:38+00:00 app[web.1]:     at Function._load (module.js:308:12)
2012-04-27T20:21:38+00:00 app[web.1]:     at Array.0 (module.js:479:10)
2012-04-27T20:21:39+00:00 heroku[web.1]: Process exited with status 1
2012-04-27T20:21:40+00:00 heroku[web.1]: State changed from starting to crashed
2012-04-27T20:30:01+00:00 heroku[router]: Error H10 (App crashed) -> GET testapp.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T20:45:11.443

看来您在 web.js 中需要 express，那么为什么不将 express 添加到依赖项中呢？您的本地副本可能已经安装了 express，这就是您没有收到任何错误的原因。Tower 可能需要 express，但是，您不能直接从中访问 express，它是 tower 目录中的子模块，而不是您的应用程序目录中的子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:42:35.783

在过去，这是一个 npm 版本的问题。我建议升级到最新版本并至少重新安装 express。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T23:09:53.170

检查您是否在 package.json 的 devDependencies 下没有明确定义。如果这样做，即使运行`npm install express --save`也不会将其移至依赖项。

我在使用 vue-cli 创建的 Vue.js 项目中遇到了这个问题，它在 devDependencies 下添加了 express dep。

# powershell - 我可以将 powershell 输出格式化为 TeamCity 日志中的可折叠树视图吗？

> ID：10357525
> 
> 赞同：12
> 
> 时间：2012-04-27T20:38:35.430
> 
> 标签：powershell, teamcity

是否可以格式化 powershell 输出，使其在 TeamCity 构建日志树视图中呈现为可折叠部分？

例如，我的构建步骤使用了一个 powershell 运行器，并发出了一个

```
write-host " #################  deployment manifest ############################"
ls -r -i *.* | %{ $_.FullName } 
```

输出这个：

```
[15:28:13] #################  deployment manifest ############################
[15:28:13]\\10.10.10.49\d$\sites\account.foo.net\v32\Bin
[15:28:13]\\10.10.10.49\d$\sites\account.foo.net\v32\contact
[15:28:13]\\10.10.10.49\d$\sites\account.foo.net\v32\Content
[15:28:13]\\10.10.10.49\d$\sites\account.foo.net\v32\controls
[15:28:13]\\10.10.10.49\d$\sites\account.foo.net\v32\error 
```

我希望日志的那块可以在树视图中折叠。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T20:55:53.260

是的，我们使用我们的 powershell 脚本执行此操作，您需要获取构建脚本以[使用构建状态更新 Teamcity](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity)。更具体地说，您需要[报告构建进度](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingBuildProgress)，这将告诉 Teamcity 工作块的开始和结束时间。构建完成后，Teamcity 将使用此信息在日志的树视图上创建节点。

在 powershell 中执行以下操作：

```
write-host "##teamcity[progressStart '<message>']"

do work

write-host "##teamcity[progressFinish '<message>']" 
```

**注意**您需要确保开始和结束消息中的消息相同，块可以嵌套。您也可以改用[阻止消息](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-BlocksofServiceMessages)。我不知道到底有什么区别，但你似乎得到了相同的结果：

```
write-host "##teamcity[blockOpened name='<blockName>']"

do work

write-host "##teamcity[blockClosed name='<blockName>']" 
```

# asp.net-mvc-4 - 无法让 ASP.NET 4 Web API 返回状态代码“201 - 已创建”以成功发布

> ID：10357526
> 
> 赞同：8
> 
> 时间：2012-04-27T20:38:44.120
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在尝试`201 Created`使用 ASP.NET 4 Web API 返回 RESTful POST 操作的 HTTP 状态代码，但我总是得到一个`200 OK`.

我目前正在 IIS 7.5.7600.16385、VS 2010 Professional、Windows 7 64-bit Professional 上调试。

```
public MyResource Post(MyResource myResource)
{
    MyResource createdResource;
    ...
    HttpResponse response = HttpContext.Current.Response;
    response.ClearHeaders(); // added this later, no luck
    response.ClearContent(); // added this later, no luck
    response.StatusCode = (int)HttpStatusCode.Created;
    SetCrossOriginHeaders(response);
    return createdResource;
} 
```

我看过其他`HttpContext.Current.Response.StatusCode`在返回数据之前设置的例子，所以我不认为这会是一个问题。我还没有在 MVC 4 源代码中找到它。

*（这与我对[这个问题](https://stackoverflow.com/questions/10336733/different-return-types-for-asp-net-mvc-4-web-api)的调查有关，但不同的主题足以保证自己的问题）*

我不确定问题是 IIS 还是 Web API。我会做进一步的测试来缩小范围。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T21:07:44.890

`HttpContext.Current`是过去的宿醉。

您需要将响应定义为`HttpResponseMessage<T>`：

```
public HttpResponseMessage<MyResource> Post(MyResource myResource)
{
    .... // set the myResource
    return new HttpResponseMessage<MyResource>(myResource)
            {
                StatusCode = HttpStatusCode.Created
            };
} 
```

* * *

# 更新

正如您可能从评论中注意到的那样，这种方法适用于**beta**版本。**不是**RC。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-10T08:43:18.997

试试这个：

```
return Request.CreateResponse<MyResource>(HttpStatusCode.Created, createdResource); 
```

# windows - C# Web 应用程序下载文件对话框

> ID：10357536
> 
> 赞同：0
> 
> 时间：2012-04-27T20:39:30.247
> 
> 标签：windows, file, dialog, save

我有一个 C# Windows 应用程序，想用一个字节 [] 打开标准的保存/下载文件对话框。我可以使用 System.Web.Mvc.Controller 在我的 MVC3 Web 应用程序中使用以下代码执行此操作：

```
FileStream fs =  = System.IO.File.OpenRead(fileName);
File(fs, "application/zip", fileName.Substring(fileName.LastIndexOf('\\') + 1)); 
```

如何在 Windows 应用程序中完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:55:28.443

您的 MVC 应用程序没有打开该对话框，浏览器打开了。在 Winforms 应用程序中，您可以使用：

```
Byte[] data;
/// initialize data

using (SaveFileDialog dialog = new SaveFileDialog())
{
  dialog.Filter = "zip files (*.zip)|*.zip|All files (*.*)|*.*";
  dialog.FilterIndex = 2;
  dialog.RestoreDirectory = true;
  if (dialog.ShowDialog() == DialogResult.OK)
  {
    using (FileStream fs = new FileStream(dialog.FileName, FileMode.CreateNew))
    {
      fs.Write(data, 0, data.Length);
    }
  }
} 
```

# python - Django 模型上我的 __unicode__ 方法中的 TypeError

> ID：10357542
> 
> 赞同：0
> 
> 时间：2012-04-27T20:40:05.957
> 
> 标签：python, django, unicode, django-models

我对 django 有点困惑`__unicode__()`。我还是个新手。

我有这个代码：

模型.py

```
class Order(models.Model):
    order_num = models.IntegerField(verbose_name="OR Number")
    order_date = models.DateTimeField(auto_now_add=True,verbose_name="OR Date")
    customer = models.ForeignKey(User)

    def __unicode__(self):
        return self.order_num 
```

我在管理员端注册它。当我尝试添加订单时出现错误：

```
TypeError at /admin/store/order/add/
coercing to Unicode: need string or buffer, int found 
```

我将在方法上声明什么`__unicode__(self)`？

很明显，我的字段上没有字符串。如何声明缓冲区？

或者

任何人都有另一个答案..请帮助..谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:45:47.637

`__unicode__`需要返回一个`unicode`对象。

您看到的错误是因为只能自动转换字符串或缓冲区协议对象（最好显式转换它们）。

对于内置的 Python 类型，或任何具有自己`__unicode__`方法的用户定义类，您可以调用`unicode`它们：

```
def __unicode__(self):
    return unicode(self.order_num) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:46:45.490

你应该`__unicode__`像这样声明你的函数：

```
def __unicode__(self):
    return u'%s' % self.order_num 
```

[其他模型实例方法](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#unicode)中的更多信息

# java - 欧拉计划设计模式

> ID：10357548
> 
> 赞同：5
> 
> 时间：2012-04-27T20:40:25.020
> 
> 标签：java, design-patterns

是否有一种设计模式有助于构建组件基础以帮助解决 Project Euler 问题？我已经解决了大约 30 个问题 - 我发现我需要重用以前编写的功能（例如素数检查）。我没有在实用程序类中编写静态方法，而是考虑拥有一个计算器接口 - 由各种具体类实现，这些类将解决不同的子问题。当我解决越来越复杂的问题时，我可以在此基础上再接再厉——也许吧？有人有什么好的建议吗？我正在解决Java中的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T21:01:37.153

有些函数反复派上用场，例如生成素数。您可以保留一个包含有用功能的文件。除此之外，我认为没有任何好处。欧拉计划问题更多的是关于数学而不是复杂的编程，我认为如果你必须编写大量代码，那么你做错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:58:53.303

此类事物的经典模式是模板设计模式，但您可以在其他设计模式中构建它，例如访问者，这取决于您的需求和品味。您可能会发现此链接很有用：[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)

# ios - 安装没有证书的 Xcode 应用程序

> ID：10357550
> 
> 赞同：1
> 
> 时间：2012-04-27T20:40:37.973
> 
> 标签：ios, xcode, jailbreak

我想在我的 iPhone 上安装我的学期项目应用程序，班级给了我一个开发者帐户，但教授从来没有“绕过”帮助我配置它以进行调试。

我也越狱了，所以我想一定有办法让它在那里，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:46:18.740

有越狱iPhone的方法。这个适用于 iOS 5，但没有调试： [http ://techtalktone.wordpress.com/2011/12/05/testing-your-ios-apps-on-a-jailbroken-device-2/](http://techtalktone.wordpress.com/2011/12/05/testing-your-ios-apps-on-a-jailbroken-device-2/)

编辑：从 appstore 升级到最新的 xcode（我认为是 4.3.2）和 iOS sdk 5.1 后，指南的最后一部分似乎存在问题（您告诉 Xcode 允许它）

它对我也不起作用。问题是自从有了新的 Xcode，Developer 文件夹就不再存在了。我设法找到了新命令，所以它现在对我有用：而不是

```
sudo /usr/bin/sed -i .bak ‘s/XCiPhoneOSCodeSignContext/XCCodeSignContext/’ /Developer/Platforms/iPhoneOS.platform/Info.plist 
```

现在应该是：

```
sudo /usr/bin/sed -i .bak ‘s/XCiPhoneOSCodeSignContext/XCCodeSignContext/’ /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Info.plist 
```

我希望我没有拼错任何东西，因为我是从 Windows 写的并且无法验证。只需使用 TAB 自动完成命令

完成此操作后，您需要进入您的项目，进入构建设置并将所有代码签名字段（我认为是 5）更改为您新创建的证书的名称。

希望这对现在有所帮助。如果它不让我知道。

# mysql - twitter 风格的关注者/关注者/朋友 sql 查询

> ID：10357552
> 
> 赞同：4
> 
> 时间：2012-04-27T20:41:04.193
> 
> 标签：mysql

我正在开发一种 twitter 类型的跟踪系统。我正在加入两个表，用户和关注者，以获取关注者表中用户的名字和姓氏。然后我在追随者表上运行内部联接以捕获追随者和朋友关系。我将结果显示为关注者（谁关注你）、关注者（你关注的人）和朋友（相互关注）。

通过下面的查询，我只能显示想见他们朋友的用户的姓名。我想显示用户的 FRIENDS，而不是用户自己的名字，但不知道如何让 users 表执行双重任务——即显示用户名和用户名他们的朋友，或者只是朋友的名字。

谢谢。

```
SELECT users.id, users.firstname, users.lastname, followers.follower_user_id, followers.followee_user_id
            FROM users
            JOIN followers ON followers.follower_user_id = users.id
            INNER JOIN followers ff ON followers.followee_user_id = ff.follower_user_id AND followers.follower_user_id = ff.followee_user_id 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:08:00.087

我相信您的架构需要一个联合表来组装您需要的信息；在多个表中执行此操作可能更有效。使用来自用户的（可能）重复信息来维护单独的关注者表也可能是不可取的。更有效的模式是：

```
mysql> select * from users;
+-----+------------+---------+
| uid | fname      | lname   |
+-----+------------+---------+
|   1 | Phillip    | Jackson |
|   2 | Another    | Name    |
|   3 | Some Crazy | User    |
|   4 | Nameless   | Person  |
+-----+------------+---------+
4 rows in set (0.00 sec)

mysql> select * from follows;
+---------+-----------+
| user_id | follow_id |
+---------+-----------+
|       1 |         4 |
|       2 |         3 |
|       3 |         2 |
|       4 |         2 |
+---------+-----------+
4 rows in set (0.00 sec) 
```

然后您的查询将如下所示：

```
select users.uid,
users.fname,
users.lname,
u.uid,
u.fname,
u.lname from users
inner join follows f on (f.user_id=users.uid)
inner join users u on (u.uid=f.follow_id) 
```

返回：

```
mysql> select users.uid,
    -> users.fname,
    -> users.lname,
    -> u.uid,
    -> u.fname,
    -> u.lname from users
    -> inner join follows f on (f.user_id=users.uid)
    -> inner join users u on (u.uid=f.follow_id);
+-----+------------+---------+-----+------------+--------+
| uid | fname      | lname   | uid | fname      | lname  |
+-----+------------+---------+-----+------------+--------+
|   1 | Phillip    | Jackson |   4 | Nameless   | Person |
|   4 | Nameless   | Person  |   2 | Another    | Name   |
|   2 | Another    | Name    |   3 | Some Crazy | User   |
|   3 | Some Crazy | User    |   2 | Another    | Name   |
+-----+------------+---------+-----+------------+--------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:54:59.413

```
SELECT  u.id, u.first_name, u.last_name, uf.id, uf.first_name, uf.last_name
FROM    users u
JOIN    followers f
ON      f.follower_user_id = u.id
JOIN    followers ff
ON      (ff.followee_user_id, ff.follower_user_id) = (f.follower_user_id, f.followee_user_id)
JOIN    users uf
ON      uf.id = f.followee_user_id 
```

# c# - CompileAssemblyFromFile：我可以在富文本框中提供源代码吗？

> ID：10357556
> 
> 赞同：1
> 
> 时间：2012-04-27T20:41:26.050
> 
> 标签：c#, codedom

使用 CodeDOM 我能够编译我在单独文件中编写的源代码：

```
 CompilerResults results = codeCompiler.CompileAssemblyFromFile(parameters, @"C:\MyScript.cs");
    results.CompiledAssembly.GetType("Script").GetMethod("Main").Invoke(null, null); 
```

有没有一种方法可以代替从文件中读取源代码 - MyScript.cs - 所以我可以在表单上放置一个富文本框并将代码放入其中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:31:01.827

查看文档[`CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)：它包含一个方法，该方法[`CompileAssemblyFromSource()`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromsource.aspx)采用一个或多个包含要编译的代码的字符串。

因此，您的代码可能如下所示：

```
CompilerResults results = codeCompiler.CompileAssemblyFromSource(
    parameters, codeFromTextBox); 
```

# css - 在特定元素上重置 CSS 样式的最佳实践方法？

> ID：10357557
> 
> 赞同：1
> 
> 时间：2012-04-27T20:41:27.173
> 
> 标签：css, html

我正在构建一个 html5/js/css 应用程序，该应用程序将存在于我客户现有 html 的 div 中。我想确保我的应用程序没有继承任何客户端的 CSS 样式。

是否有重置此 div 及其后代元素的最佳实践？

我想我会使用类似的东西：

```
#my-id * { //styles } 
```

我想知道是否有更好/最佳实践的方法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:49:58.880

这将非常困难/可能无法确保。Starx 所指的解决方案类型假定除了浏览器默认值之外没有预设样式，并且在该上下文中“重置”是指协调各种浏览器默认值之间的不一致。

但在您的情况下，您的客户端 CSS 可能已经包含高度特定的选择器，例如

```
#someDiv .aClass a{float:left;} 
```

...并且应用那些“CSS重置”解决方案根本不会覆盖它。

您可以看到，Truth 的选择器的[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)也比这低，因此在这种情况下将无法覆盖客户端的样式。

您的问题非常相似：[如何从元素中删除所有继承和计算的样式？](https://stackoverflow.com/questions/8198543/how-to-remove-all-inherited-and-computed-styles-from-an-element)

所以简短的回答是：没有办法确保这一点，因为你不能“从一个元素中删除所有继承和计算的样式”......**更新：** ......除非你可以预期并用具有适当的新声明覆盖每个预先存在的样式声明特异性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:42:56.303

如果你只想更新这个特定的 div，那么你所拥有的就可以了。你忘了重置 div 本身：

```
#my-id, #my-id * { /* styles */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:01:27.403

您可能正在寻找 Eric 的[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)，因为它是强大的重置之一。

但是重置规则适用于整个页面，而不仅仅是框。所以，修改规则，保持在`#my-id`前面。

# c# - 运算符“&&”不能应用于“int”和“bool”类型的操作数

> ID：10357559
> 
> 赞同：2
> 
> 时间：2012-04-27T20:41:54.603
> 
> 标签：c#

```
if (Console.CursorTop=3 && Console.CursorLeft==7) {
    Console.WriteLine();
} 
```

有错误

```
Error   1   Operator '&&' cannot be applied to operands of type 'int' and 'bool' 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T20:43:06.843

你不是说（注意双等号）

```
Console.CursorTop == 3 
```

否则，它是一项任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:43:40.843

更正您的语法，将 =3 替换为 ==3

```
if (Console.CursorTop==3 && Console.CursorLeft==7)
{
    Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T20:44:32.223

如果您尝试将 CursorTop 与 3 进行比较，那么您需要`if (Console.CursorTop==3 && Console.CursorLeft==7)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-17T08:58:36.570

在 C# 中 = 不用于比较两个值。为了在两个值之间进行比较，您需要在语句中放置 ==。

```
if (Console.CursorTop**==**3 && Console.CursorLeft==7) {
     Console.WriteLine();
} 
```

# ruby-on-rails - 如何在 RSpec 中测试 send_data？或者......在这种情况下我应该测试什么？

> ID：10357563
> 
> 赞同：14
> 
> 时间：2012-04-27T20:42:31.620
> 
> 标签：ruby-on-rails, rspec

使用 RSpec 测试以下代码的最佳方法是什么？我应该测试什么？show 动作打开一个文件并将其流式传输。另外，如果该操作依赖于某处存在的文件，我可以对其进行测试吗？

```
def show
  image_option = params[:image_option]
  respond_to do |format|
    format.js
    format.pdf {open_bmap_file("#{@bmap.bmap_pdf_file}", 'application/pdf', "#{@bmap.bmap_name}.pdf", "pdf", "pdf")}
    format.png {open_bmap_file("#{@bmap.bmap_png_file}", 'image/png', "#{@bmap.bmap_name}.png", "png", image_option)}
  end
end

private

def open_bmap_file(filename, application_type, send_filename, format, image_option = nil)
  filename = "app/assets/images/image_not_available_small.png" unless File.exist? filename
  path = Bmap.bmaps_pngs_path

case image_option
  when "image"
    filename = "#{@bmap.bmap_name}.png"
  when "large_thumbnail"
    filename = "#{@bmap.bmap_name}_large_thumb.png"
  when "thumbnail"
    filename = "#{@bmap.bmap_name}_thumb.png"
  when "pdf"
    filename = "#{@bmap.bmap_name}.pdf"
    path = Bmap.bmaps_pdfs_path
  else
    filename = "#{@bmap.bmap_name}.pdf"
    path = Bmap.bmaps_pdfs_path
end

begin
  File.open(path + filename, 'rb') do |f|
    send_data f.read, :disposition => image_option == "pdf" ? 'attachment' : 'inline', :type => application_type, :filename => send_filename
  end
rescue
  flash[:error] = 'File not found.'
  redirect_to root_url
end 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-10T04:23:57.770

我需要`send_data`在一个下载 csv 文件的控制器操作中进行测试，我通过以下方式进行了测试。

### 控制器：

```
def index
  respond_to do |format|
    format.csv do
      send_data(Model.generate_csv,
                type: 'text/csv; charset=utf-8; header=present',
                filename: "report.csv",
                disposition: 'attachment')
    end
  end
end 
```

### （rspec 2 解决方案）controller_spec：

```
context "when format is csv" do
  let(:csv_string)  { Model.generate_csv }
  let(:csv_options) { {filename: "report.csv", disposition: 'attachment', type: 'text/csv; charset=utf-8; header=present'} }

  it "should return a csv attachment" do
    @controller.should_receive(:send_data).with(csv_string, csv_options).
      and_return { @controller.render nothing: true } # to prevent a 'missing template' error

    get :index, format: :csv
  end
end 
```

### （rspec 3 解决方案）controller_spec：

```
context "when format is csv" do
  let(:csv_string)  { Model.generate_csv }
  let(:csv_options) { {filename: "report.csv", disposition: 'attachment', type: 'text/csv; charset=utf-8; header=present'} }

  it "should return a csv attachment" do
    expect(@controller).to receive(:send_data).with(csv_string, csv_options) {
      @controller.render nothing: true # to prevent a 'missing template' error
    }

    get :index, format: :csv
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T10:36:58.543

它帮助了我

```
stub(controller).send_data { controller.render nothing: true } 
```

# asp.net-mvc-3 - LINQ Query 返回 IQueryable，需要它是单个结果

> ID：10357564
> 
> 赞同：1
> 
> 时间：2012-04-27T20:42:35.383
> 
> 标签：asp.net-mvc-3, linq

我目前在我的一个控制器中编写了一个 LINQ 查询，我想返回一篇带有相应评论和主题的博客文章（基于模型）。

这就是我目前的查询，我曾经用它来返回主页的所有博客文章的列表。我添加了“其中 p.id == id （这是 ActionResult 用于获取正确帖子的参数。

```
var post = from p in db.Set<BlogPost>()
                   where p.id == id
                   select new PostViewModel
                              {
                                  Id = p.id,
                                  Title = p.Title,
                                  DateCreated = p.DateCreated,
                                  Content = p.Content,
                                  Topics = p.Topics,
                                  Comments = p.Comments,
                                  CommentCount = p.Comments.Count
                              };

return View(post); 
```

当我只想将它作为单个帖子时，当前的返回正在发送一个 IQueryable。目前我在我的剃刀视图中有一个 foreach 是无用和错误的，但它有效。我怎样才能改变它来做我想做的事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:45:37.457

你可以做：

```
return View(post.SingleOrDefault()); 
```

或者，如果您想在案例列表为空时出现异常：

```
return View(post.Single()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:45:07.263

只需在您的查询中添加`First()`或`Single()`（哪个适合您取决于上下文）：

```
return View(post.First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:45:28.683

这样做`post.First()`应该可以解决问题。实际上，任何产生具体值的函数都可以工作。[`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx), [`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx), [`Single`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx), [`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx), [`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx), 或[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)

我已经包含了每种方法的链接，因此您可以查看适合您的方法。听起来您将需要第一个或单个变体，这取决于您是否需要在多个帖子被拉出时出现错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T20:45:37.007

听起来您想使用 First 或 Single：

```
return View(post.Single()); 
```

它们之间的区别在于，`Single`如果找到多个匹配行，则会引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T21:02:36.573

用这个替换你的 LINQ

```
var post = (from p in db.Set<BlogPost>()
               where p.id == id
               select new PostViewModel
                          {
                              Id = p.id,
                              Title = p.Title,
                              DateCreated = p.DateCreated,
                              Content = p.Content,
                              Topics = p.Topics,
                              Comments = p.Comments,
                              CommentCount = p.Comments.Count
                          }).FirstOrDefault(); 
```

# c# - WPF 中 MDI 应用程序的最佳方法？

> ID：10357567
> 
> 赞同：8
> 
> 时间：2012-04-27T20:42:52.857
> 
> 标签：c#, wpf, xaml, mdi

我正在为商店开发 WPF 应用程序。

所以我有一个MainWindow，其余的都是Child。

哪个是用作子窗口的最佳选择。

1.  窗户
2.  用户控制

窗口将是正常的，它将位于 MainWindow 的顶部，如果它的 UserControl 它将位于 MainWindow 的 Canvas 中。

所以任何人都可以建议我在这两个中最好使用哪个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T20:49:04.867

我建议为您的子窗口使用 UserControls。这使您可以在主窗口上设置所有“父”控件，并且子窗口不会覆盖它们。

作为进一步的建议，我建议研究 Caliburn Micro。这是处理 WPF 窗口和用户控件的一个很好的框架。

要将子 UserControl 添加到父窗口，我通常只需将 ContentControl 添加到我的主窗体，如下所示：

```
<ContentControl x:Name="ViewWindow" Margin="10" /> 
```

只需将您的孩子分配给该控件，您就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T21:33:12.253

我建议使用像 AvalonDock 这样的 MDI 框架：http://avalondock.codeplex.com/[你](http://avalondock.codeplex.com/) 会节省很多时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T20:49:41.927

就像生活和编码中的许多事情一样：这取决于:)

*   窗户

    *   当新窗口有自己的状态和行为时
    *   当主窗口和弹出窗口之间几乎没有交互/消息传递时
*   用户控制

    *   当底层主窗口的状态对弹窗的操作至关重要时
    *   当需要在 2 个窗口之间传递状态更改时

这些是我想到的一些设计决策……

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-28T07:35:21.857

请参考网站：[http ://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T04:08:30.613

当您决定使用父子窗口交互时，子窗口将非常适合桌面应用程序，尽管我个人建议您在主窗口中使用框架并使用它来承载多个页面。

要了解有关 WPF 和 silverlight 中导航的更多信息，您可以访问[此链接](http://msdn.microsoft.com/en-us/library/ms750478.aspx)

使用这种方法将帮助您获得以下优势：

1.  由于未附加的事件处理程序，内存泄漏的可能性较小。
2.  由于您可以将页面背景设置为透明，因此无需指示子窗口的样式即可实现一致的设计。
3.  当其他程序与您正在构建的软件同时使用时，用户不会很难找到焦点所在的窗口。

我还认为在构建这个软件时你还可以考虑很多东西，但最终你仍然是应该决定这个问题的人。

这只是我的建议，希望对您有所帮助:)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-28T13:33:43.327

考虑检查[MDIContainer](http://mdicontainer.codeplex.com)。[与WPF 的 MDI](http://wpfmdi.codeplex.com)类似的项目，但它为您提供更多自由，因为它不会强制您实现 MDIChild 窗口、界面或任何东西。

# c++ - 计算输入数字的最小值、最大值和平均值

> ID：10357579
> 
> 赞同：1
> 
> 时间：2012-04-27T20:43:49.263
> 
> 标签：c++, performance, algorithm

有没有办法在不使用数组的情况下计算所有数字的平均值/最小值/最大值？每秒需要计算多达 10,000 个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:45:56.937

当然。保留您收到的最小和最大数字，以及数字的总和和计数。当您需要最小或最大的时，请将其退回。当您需要平均值时，将总和除以数字。

[Boost Accumulators](http://boost-sandbox.sourceforge.net/libs/accumulators/doc/html/index.html)包括上述所有的实现，以及其他一些实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:46:06.840

是的，

保留一个初始化为较高值的最小变量，如果您看到较低的值，请更新它。

用最大变量做相反的事情。

将所有数字相加，然后将该总和除以总数得到平均值。

以下代码不进行边界检查（例如计数 > 0，总计不溢出），但应该给您一个想法：

```
int minimum = // Initialize to large #, in C# would be int.MaxValue
int maximum = // Initialize to most negative #, in C# would be int.MinValue
int count = 0;
int total = 0;

void StatsForNewNumber(int number)
{
    if (number < minimum) minimum = number;
    if (number > maximum) maximum = number;
    count++;
    total += number;
}

int Average()
{
    return total / count;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:46:39.517

绝对：一次可以计算一个项目。

保持当前最小值和当前最大值，计算运行总数和计数。当您需要平均值时，将运行总数除以计数，您就会得到答案。

```
class calc {
    double minVal, maxVal, total;
    int count;
public:
    calc()
    :   minVal(numeric_limits<double>::max)
    ,   maxVal(numeric_limits<double>::min)
    ,   total(0)
    ,   count(0) {
    }
    void process(double num) {
        minVal = min(minVal, num);
        maxVal = max(maxVal, num);
        total += num;
        count++;
    }
    double getAvg() {
        // TODO: Check count to be > 0 here
        return total / count;
    }
    double getMin() {
        return minVal;
    }
    double getMax() {
        return maxVal;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T20:48:31.377

创建四个变量：一个用于存储 minVal，一个用于 maxVal，一个用于总和，一个用于在每次新输入后递增。将每个新输入与 minVal 和 maxVal 进行比较，并根据需要进行更新。将输入值添加到总和，递增计数器。平均值始终是总和/计数器，因此您可以在需要时即时查询该值，或者在完成后在最后计算它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T20:49:14.337

您实际上不需要在数组中存储任何数字来查找平均值/最小值/最大值，因为您正在迭代您所做的数字

```
if(currentSmallest > currentNumber)
     currentSmallest = currentNumber

if(currentLargest < currentNumber)
     currentLargest = currentNumber 
```

此外，您将保留一个计数器和总和，通过将这些数字相除，您将得到平均值。无需将它们存储在数组中。

# c# - ClickOnce 安装文件夹 URL 相对

> ID：10357580
> 
> 赞同：0
> 
> 时间：2012-04-27T20:44:00.937
> 
> 标签：c#, .net, clickonce

部署[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序时，安装文件夹 URL 是否可以使其相对于托管它的 Web 应用程序目录？

例如，对于本地测试，我发布到[http://localhost:54592](http://localhost:54592)。但是，当部署此 Web 应用程序时，它可以是从[http://www.foo.com](http://www.foo.com)到[http://www.foo.com/MyVirtualDirectory的任何内容](http://www.foo.com/MyVirtualDirectory)

我想要在其当前位置找到安装程序的路径，以及安装程序完成后的应用程序以引用 Web 应用程序主机，而不是开发 URL。

平台：[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)、.NET 4.0 和 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:24:30.293

`*.application`如果您坚持作为您的应用程序源，这开箱即用。您只需在 Web 应用程序中选择一个文件夹即可发布 ClickOnce 应用程序，并且该应用程序可从您的应用程序下的此地址获得。

例如，如果将您的站点复制到 ClickOnce 文件夹`C:\inetpub\wwwroot\mysite`并将 ClickOnce 复制到`C:\inetpub\wwwroot\mysite\myapp`ClickOnce`MyClickOnce.application`文件夹中。

然后您将您的网站公开为`http://example.com`，并且 ClickOnce 应用程序在`http://example.com/myapp/MyClickOnce.application`.

如果`setup.exe`您需要在将清单发布到目标位置后重新创建清单。这是用`mage.exe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:17:22.533

在“选项”对话框的“清单”选项卡中，您可以选中“排除部署提供程序 URL”复选框。

然后根据您放置的位置向您的用户提供安装 URL。当他们运行它时，它将创建并保存他们从中获取它的 URL，并始终在那里寻找更新。

# ios - 如何设置居中或拉伸的背景图像？

> ID：10357586
> 
> 赞同：0
> 
> 时间：2012-04-27T20:44:46.203
> 
> 标签：ios, cocoa-touch, uiview, background-image

我有通用应用程序。在该应用程序中，我需要将背景图像居中或拉伸。这样，当我旋转设备或切换设备时，图像会正确显示。

这是我的代码`viewDidLoad`：

```
self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"tux.png"]] 
```

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:06:36.053

我认为你不能轻易使它以 为中心`backgroundColor`。您可以：

*   在将图像设置为 之前拉伸它`backgroundColor`，请参阅[如何填充 UIView 的背景图像](https://stackoverflow.com/questions/8077740/how-to-fill-background-image-of-an-uiview)。

*   创建自定义子类，通过覆盖方法`UIView`自己绘制背景图；`drawRect:`

*   或者添加一个`UIImageView`给你的视图作为背景。请参阅[“UIView 类参考：子类化的替代方案”](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)：

    > 基于图像的背景 - 对于显示相对静态内容的视图，请考虑使用`UIImageView`带有手势识别器的对象，而不是子类化并自己绘制图像。或者，您也可以使用通用`UIView`对象并将您的图像指定为视图`CALayer`对象的内容。

# javascript - jquery DataTables.net 插件：排序时如何忽略特定行

> ID：10357587
> 
> 赞同：1
> 
> 时间：2012-04-27T20:44:48.730
> 
> 标签：javascript, jquery, html, datatables

经过长时间的艰苦搜索，我在任何地方都找不到我的问题的答案。基本上，我根据用户的输入动态创建了一个表，并且在表中的每个第 4 个条目之后插入一行只有一个按钮。我需要的是排序功能忽略带有按钮的行并将它们留在原处，同时对表格的其余部分进行排序。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:27:53.097

```
"fnDrawCallback": function (oSettings) {                  }
                    var rows = $('.searchResultRow');

                    rows.each(function (index) {

                        if (index == 4 || index == 9) {
                            var insertLearn = $("<tr></tr>").addClass("searchResultRow ");

                            insertLearn.append(buildCell().attr('colspan', 9).html("<img src='../img/LearnMoreAnimated_v1-1.gif' />"));

                            $("#results_table > tbody > tr").eq(index).after(insertLearn);
                        }

                    });
                } 
```

这就是我能够得到它的方式......感谢您为我指明正确方向的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:13:59.030

你没有 - 要做的是使用 DataTables`fnDrawCallback`在每次抽奖时插入第四行。`DataTables`将始终在每次绘制时清空`<tbody>`元素，因此无论如何这都是必需的。

# php - PHP - 使用 exec() 和 shell_exec() 执行 ffmpeg 什么都不做

> ID：10357588
> 
> 赞同：0
> 
> 时间：2012-04-27T20:44:57.030
> 
> 标签：php, audio, ffmpeg, audio-converter

我正在尝试使用 ffmpeg 在 PHP 中转换音频文件，我通过 post 将音频文件作为 m4a 获取，我想将其转换为 mp3。为此，我执行以下操作：

```
$commandOutput = shell_exec('ffmpeg -i '.$filePath.' -ar 8000 -ab 16000 '.str_replace('m4a', 'mp3', $filePath)); 
```

然而它什么也不做，并且 commandOutput 也不包含任何内容。该文件已正确保存但未转换为 mp3，当我在终端中运行相同的命令时，它会正确转换文件。知道会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:50:20.583

尝试像这样包装命令：

```
exec($cmd." 2>&1", $out, $ret);
if ($ret){
    echo "There was a problem!\n";
    print_r($out);
}else{
    echo "Everything went better than expected!\n";
} 
```

`exec()`让您捕获所有输出并获取退出代码。添加`2>&1`确保重定向`STDERR`到，`STDOUT`以便您可以看到任何错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:51:17.353

您可以使用 ffmpeg-php 扩展：http: [//sourceforge.net/projects/ffmpeg-php/](http://sourceforge.net/projects/ffmpeg-php/)

# php - 计算论坛上的帖子数量

> ID：10357589
> 
> 赞同：1
> 
> 时间：2012-04-27T20:45:05.477
> 
> 标签：php, mysql, query-optimization

我有一个论坛，其中包含主题标题、帖子计数和其他信息。我已经设法优化其他查询/完全删除它们，但是计算每个线程的帖子计数的那个会减慢主板页面的加载速度。

IE`echo $boards->getPostCount($thread)`

里面`getPostCount($thread)`只是： `$query = $this->db->query("SELECT COUNT(id) FROM forum_posts WHERE threadid = '$thread'`

这是一个问题，因为它必须为每个线程执行此操作，并且每页有 20 个线程。

有没有其他方法可以事先获取这些信息，或者以某种方式最小化获取这些信息所需的查询？在任何给定时间都有 150 个用户，因此每页加载 3K 查询不是我想要的。

谢谢。

编辑：我使用的查询的解释： [mysql 解释 http://screensnapr.com/e/01hulx.png](http://screensnapr.com/e/01hulx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:48:00.257

使用连接：

```
SELECT  t.*, COUNT(fp.id)
FROM    threads t
LEFT JOIN
        forum_posts fp
ON      fp.threadid = t.id
ORDER BY
        t.last_updated DESC
LIMIT 20 
```

但是，这仍然需要引擎在每次重新加载时计算每个线程的帖子。

您可以启用查询缓存（它非常适合这样的查询），或者只需在每次发布或删除帖子时添加一个`post_count`字段并更新它。`threads`

# php - PHP 减去 2 个变量的值

> ID：10357606
> 
> 赞同：1
> 
> 时间：2012-04-27T20:46:01.310
> 
> 标签：php

我有一个页面，当数据发布到它时，它会将值插入到我的数据库中。

我试图事先从数据库中获取所有值的总和，然后插入该值，然后在有意义的情况下将 SUM 从插入的值中取出？

```
$totalquery = mysql_query("SELECT SUM(bill) FROM `outgoings` WHERE outgoings.user_id = '$uid'") or die(mysql_error());
$totalresult = mysql_fetch_array($totalquery);          
$uid = $_SESSION['oauth_id'];
$id = $_POST['col-id'];
$sanitized_monthly_income = mysql_real_escape_string($_POST['monthly-income']);
mysql_query("INSERT INTO income (id, user_id, monthly_income) VALUES ('$id', '$uid', '$sanitized_monthly_income') ON DUPLICATE KEY UPDATE monthly_income = VALUES(monthly_income)");
echo $sanitized_monthly_income - $totalresult["SUM(bill)"]; 
```

这是我收到的错误

> 注意：未定义变量：第 18 行 update_salary.php 中的 uid

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:47:30.097

您在`$uid`分配之前使用：

```
 $totalquery = mysql_query("SELECT SUM(bill) FROM `outgoings`
                            WHERE outgoings.user_id = '$uid'") or die(mysql_error());
 #                                                     ^^^^
 # then later ...

 $uid = $_SESSION['oauth_id']; 
```

您可能需要将分配移到您尝试访问该值的行上方。

# c++ - 如何关闭处理已转换为 FILE* 的句柄？

> ID：10357607
> 
> 赞同：2
> 
> 时间：2012-04-27T20:46:02.007
> 
> 标签：c++, windows, winapi, file-io

我正在尝试重定向子进程的输出并将 a 返回`FILE*`给父进程。

我基本上是在遵循[创建具有重定向输入和输出的子进程](http://msdn.microsoft.com/en-us/library/ms682499%28v=vs.85%29.aspx)的代码示例。唯一的修改是我将整个事情封装在一个函数中并执行

```
return _fdopen(_open_osfhandle((intptr_t)g_hChildStd_OUT_Rd, _O_RDONLY), "rb");
```

问题是我想清理并`fclose`抛出错误。完成后我应该关闭手柄`_fdopen`吗？我该怎么清理这里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:14:48.520

关闭打开的文件流的正确方法`_fdopen`是调用`fclose`. 如果这对您不起作用，那么您还有其他问题。

调用后不要关闭文件描述符`_fdopen`。文档并没有确切说明，但是该`FILE`对象拥有该文件描述符，并且会在您调用`fclose`. 同样，文件描述符拥有文件句柄，因此您也不应该调用`CloseHandle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T10:47:08.777

回答可能会很晚，但只是添加以供参考。我查看了调用堆栈`fclose`，它实际上正在调用`CloseHandle`

```
auto NThdl = CreateFileW(L"D:\\s.txt", GENERIC_READ | GENERIC_WRITE, 0, nullptr, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr);
    if (NThdl != INVALID_HANDLE_VALUE)
    {
        int iohdl = _open_osfhandle((intptr_t) NThdl, O_RDWR | O_BINARY);
        if (iohdl != 0xFFFFFFFF)
        {
            FILE *hLstFile = _wfdopen(iohdl, L"w+bc");
            fwrite("Bogus", 5, 1, hLstFile);

            fclose(hLstFile);            

            // Exception
            CloseHandle(NThdl);
        }
    } 
```

![在此处输入图像描述](../Images/256eff38610a69a90bbe542af41c4315.png)

并且尝试调用`CloseHandle`after`fclose`会导致异常说*Handle 无效。*

# linux - 什么是tomcat内存堆提交？

> ID：10357611
> 
> 赞同：2
> 
> 时间：2012-04-27T20:46:31.480
> 
> 标签：linux, tomcat, memory, out-of-memory, heap-memory

我们正在监控 tomcat 服务器，我发现每当 Committed Heap memory 达到 Max heap memory 我的 tomcat 崩溃或 OOM 错误，但同时 Heap Used 内存使用正常。有人可以解释使用了什么提交以及为什么在使用堆时它崩溃是正常的。

请参阅下图，以便您了解一些情况。

![在此处输入图像描述](../Images/b7899b981576ca30140bc31f883ab555.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T21:05:33.587

承诺空间是非虚拟空间。即静态分配给JVM的给定分区的空间。当您使用可选的大小调整开关 -Xms 和 -Xmx 时，并非所有内容最初都提交到特定的内存分区。由于世代需要扩展，他们被允许成长为“虚拟”空间。

您的图表看起来应该是如何工作的。随着您使用的空间向您的承诺增长，承诺空间向最大扩展。当提交达到它的最大大小时，它无处可去。如果它不能通过最后一次 GC 来拯救自己，那么你的 JVM 就会崩溃。

# c++ - 使用 Boost Spirit 的流解析器和自定义语法

> ID：10357617
> 
> 赞同：4
> 
> 时间：2012-04-27T20:46:57.673
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

## 概要

我想利用 Boost Spirit 的[流解析器 API](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/qi/reference/parse_api/stream_api.html)来`std::istream`增量解析。但是，我找不到一个很好的例子来说明如何将它与基于迭代器的语法一起使用。从概念上讲，我的目标是解析无限类型的对象流`T`。

## 细节

`T`具有 type和 skipper属性的 Qi 语法`S`通常具有以下形式：

```
template <typename Iterator>
struct grammar : qi::grammar<Iterator, T(), S>; 
```

如何在基于流的 API 中使用这样的语法？具体来说，我对流 API 的心智模型是我可以按照以下方式做一些事情：

```
// Callback invoked for each successfully parsed instance of T.
void f(T const& x)
{
}

// What iterator type?
grammar<???> parser;
skipper<???> skipper;

T x;

std::ifstream ifs("/path/to/file");
ifs.unsetf(std::ios::skipws)
while (! ifs.eof())
{
    ifs >> phrase_match(parser, skipper, x);
    if (ifs.good() || ifs.eof())
        f(x);
} 
```

我正在努力整合需要迭代器的传统语法。它如何与流 API 配合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:56:49.493

您缺少[Spirit 多通道迭代器](http://www.boost.org/libs/spirit/doc/html/spirit/support/multi_pass.html)。但是请注意，除非您竭尽全力确保语法具有最小的回溯，否则*不会增量地解析流。*

# http - Ubuntu 中的 HTTP 请求

> ID：10357618
> 
> 赞同：14
> 
> 时间：2012-04-27T20:47:02.380
> 
> 标签：http, url, browser, ubuntu, request

我需要在 ubuntu 中调用 HTTP 请求，我该怎么做？我似乎无法找到关于如何做到这一点的答案？

**如何在不调用 lynx 之类的浏览器的情况下运行以下 url？**

```
http://www.smsggglobal.com/http-api.php?action=sendsms&user=asda&password=123123&&from=123123&to=1232&text=adsdad 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T20:51:44.903

在命令提示符下，运行以下命令：

```
curl http://www.smsggglobal.com/http-api.php?action=sendsms&user=asda&password=123123&&from=123123&to=1232&text=adsdad 
```

curl 命令对给定的 url 和参数执行 http 请求。

如果您需要指定另一个 HTTP 方法`use curl -X <TYPE> <URL>`，像这样：

```
curl -X POST http://www.smsggglobal.com/http-api.php?action=sendsms&user=asda&password=123123&&from=123123&to=1232&text=adsdad 
```

卷曲文档：[http ://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T20:48:38.563

显示结果：

```
curl http://www.smsggglobal.com/http-api.php?action=sendsms&user=asda&password=123123&&from=123123&to=1232&text=adsdad 
```

或者

将结果保存为文件

```
wget http://www.smsggglobal.com/http-api.php?action=sendsms&user=asda&password=123123&&from=123123&to=1232&text=adsdad 
```

# rest - Bugzilla rest api 激活

> ID：10357621
> 
> 赞同：3
> 
> 时间：2012-04-27T20:47:04.197
> 
> 标签：rest, fedora, bugzilla

我在我的 Fedora 服务器上安装了 Bugzilla。我想使用 Rest Api，但找不到如何激活它。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-02T18:52:15.260

这个问题可以通过安装一些被列为可选的 Perl 模块来解决。对我有用的是启用 mod_rewrite 并安装与 Bugzilla API 有关的可选模块。确保您安装的所有模块都是最新的。您还需要确保启用 mod_rewrite 以便您可以在 URL 中联系 /rest/ 而不是 /rest.cgi/

为 Windows 启用 mod_rewrite 的示例： [https ://tomelliott.com/php/mod_rewrite-windows-apache-url-rewriting](https://tomelliott.com/php/mod_rewrite-windows-apache-url-rewriting)

模块列表（必需和可选）： [https ://www.bugzilla.org/releases/5.0/release-notes.html](https://www.bugzilla.org/releases/5.0/release-notes.html)

仔细查看可选模块的表格。在“启用功能”功能下，您将看到 API 运行需要这两个 perl 模块。

```
JSON::RPC   (Any)   JSON-RPC Interface, REST Interface

Test::Taint 1.06    JSON-RPC Interface, XML-RPC Interface, REST Interface 
```

请注意，如果您使用不同的操作系统，或者想要升级不同的版本，您可能需要查看不同的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:51:42.060

REST API 未与官方 Bugzilla 版本捆绑在一起。[您可以在此处](https://wiki.mozilla.org/Bugzilla%3aREST_API#Your_Own_Installation)获取安装说明。

# unicode - '—' 的 ASCII 字符代码是什么？

> ID：10357622
> 
> 赞同：34
> 
> 时间：2012-04-27T20:47:06.473
> 
> 标签：unicode, character-encoding, ascii, special-characters

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-27T20:54:41.173

Quotation from wiki ([Em dash](http://en.wikipedia.org/wiki/%E2%80%94#Em_dash))

> When an actual em dash is unavailable—as in the ASCII character set—a double ("--") or triple hyphen-minus ("---") is used. In Unicode, the em dash is U+2014 (decimal 8212).

Em dash character is not a part of ASCII character set.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-27T20:54:56.920

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-20T13:32:43.113

Windows For Windows on a keyboard with a Numeric keypad:

***Use*** Alt+0150 (en dash), ***Alt+0151 (em dash)***, or Alt+8722 (minus sign) using the numeric keypad.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T20:55:08.553

This character does not exist in ASCII, but only in Unicode, usually encoded by UTF-8.

In UTF-8, characters are encoded by 2- or 3-byte sequences (or occasionally longer), where none of the two or three bytes is a valid ASCII code, where all of them are outside the ASCII range of 0 through 127.

One suspects that the foregoing only partly answers your question, but if so then this is probably because your question is, inadvertently, only partly asked. For further details, you can extend your question with more specifics.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-17T01:18:42.583

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-19T14:04:08.900

Alt + 0151 seems to do the trick—perhaps it doesn't work on all keyboards.

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2019-03-28T14:17:06.287

alt-196 - while holding down the 'Alt' key, type 196 on the numeric keypad, then release the 'Alt' key

# jquery - 关于选择 id 问题的 Jquery

> ID：10357623
> 
> 赞同：0
> 
> 时间：2012-04-27T20:47:21.287
> 
> 标签：jquery

你能告诉我我的代码有什么问题吗？我已经给出了以下所有部分的代码；HTML/CSS 和 JQuery

当我单击 go veg 按钮时，鱼类应该隐藏。

CSS 文件

```
div{
 display:inline;
 float:left;
 height:245px;
 text-align:left;
 border: solid #000 3px;
} 
```

.html 文件

```
<html>
 <head>
    <link rel="stylesheet"  type="text/css" href="file://c:/jquery/chapter-2/begin/styles/my_style.css"   />
    <script src="file://c:/jquery/chapter-2/begin/scripts/jquery.js"    type="text/javascript"></script>
    <script src="file://c:/jquery/chapter-2/begin/scripts/my_scripts.js" type="text/javascript"></script>
 </head>

<body>
<div class="topper">
    <h2>Our Menu</h2>
      <div class="buttons"><button type="submit" value="vegon">Go Vegetarian</button></div>
      <div class="buttons"><button type="submit" value="restoreme">Restore Menu</button></div>
</div>
<div class="middle">
<li>Thai-style Halibut
 <ul class="menu_list">
  <li                 >coconut milk</li>
  <li class="fish"    >pan-fried halibut</li>
  <li                 >lemongrass broth</li>
  <li                 >vegetables</li>
  <li                 >Thai spices </li>
 </ul>
</li>
<li>Braised Delight
 <ul class="menu_list">
  <li class="meat"    >lamb shoulder</li>
  <li                 >cippolini onions</li>
  <li                 >carrots</li>
  <li                 >baby turnip</li>
  <li                 >braising jus</li>
 </ul>
</li>
<li>House Grilled Panini
 <ul class="menu_list">
  <li class="meat"    >prosciutto</li>
  <li                 >provolone</li>
  <li                 >avocado</li>
  <li                 >cherry tomatoes</li>
  <li                 >sourdough roll</li>
  <li                 >shoestring fries </li>
 </ul>
</li>
<li>House Slider
 <ul class="menu_list">
  <li                 >eggplant</li>
  <li                 >zucchini</li>
  <li class="hamburger">hamburger</li>
  <li                 >balsamic vinegar</li>
  <li                 >onion</li>
  <li                 >carrots</li>
  <li                 >multigrain roll</li>
  <li                 >goat cheese</li>
 </ul>
</li>   <li>Frittata
 <ul class="menu_list">
  <li class="meat"    >eggs</li>
  <li                 >Asiago cheese</li>
  <li                 >potatoes </li>
 </ul>
</li>
<li>Coconut Soup
 <ul class="menu_list">
  <li                 >coconut milk</li>
  <li class="meat"    >chicken</li>
  <li                 >vegetable broth</li>
 </ul>
</li>
<li>Soup Du Jour
 <ul class="menu_list">
  <li class="meat"    >grilled steak</li>
  <li                 >mushrooms</li>
  <li                 >vegetables</li>
  <li                 >vegetable broth </li>
 </ul>
</li>
<li>Hot and Sour Soup
 <ul class="menu_list">
  <li                 >roasted pork</li>
  <li                 >carrots</li>
  <li                 >Chinese mushrooms</li>
  <li                 >chili</li>
  <li                 >vegetable broth </li>
 </ul>
</li>
<li>Avocado Rolls
  <ul class="menu_list">
  <li                 >avocado</li>
  <li                 >whole chiles</li>
  <li                 >sweet red peppers</li>
  <li                 >ginger sauce</li>
 </ul>
</li>
</div>
</body>
</html> 
```

js文件

```
$(document).ready(function() {
    $(".buttons").click(function(){
    $("li.fish").hide();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:50:32.570

该代码似乎[有效](http://jsfiddle.net/EG242/)，但无论如何将选择精确到按钮而不是容器。

```
$(".buttons button").click(function(){
    $("li.fish").hide();
}); 
```

从您的代码来看，您正在加载脚本，例如

```
<script src="file://c:/jquery/chapter-2/begin/scripts/jquery.js"    type="text/javascript"></script> 
```

Make是路径正确并且被加载。此外，如果您使用相对路径而不是绝对路径会更好。

```
<script src="scripts/jquery.js" type="text/javascript"></script> 
```

上面的代码片段表示，有一个带有 jQ​​uery 脚本的文件夹，与活动文件位于相同的基本路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:52:04.343

你的代码很好。我怀疑你可能没有加载 jQuery。尝试换出对 Google CDN 文件的本地引用：

```
https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

您还必须确保您的本地 js 文件也已加载。您似乎正在阅读一些书籍示例，因此请考虑使用资源的相对路径：

如果您的网页当前位于 中`c:/jQuery/chapter-2/`，请使用以下文件引用：

```
<script src="begin/scripts/jquery.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:57:08.400

没有错每件事都很好。只需替换头部的以下行

```
<script src="file://c:/jquery/chapter-2/begin/scripts/jquery.js"    type="text/javascript"></script> 
```

用这条线

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> 
```

# ruby-on-rails - 服务器环境变量应该存储在 Ruby on Rails 中的什么位置？

> ID：10357624
> 
> 赞同：2
> 
> 时间：2012-04-27T20:47:21.270
> 
> 标签：ruby-on-rails

我应该在哪里存储特定于我的 ruby​​ 项目中的开发、测试、生产服务器的密钥？例如，应该在哪里存储我的开发特定的 amazon s3 密钥和密钥？我的 config/development.rb 文件？我看到的一个问题是，如果该文件是公共 github 项目的一部分，它将向所有人展示。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:56:39.600

您将单独的环境变量分别存储在`config/development.rb`,`config/testing.rb`和`config/production.rb`中。

但是，如果您的文件将存储在公共 git 存储库中，您不希望将任何敏感信息硬编码到其中。最好的方法是使用属于您的一部分的 yaml 文件`.gitignore`或在您的 shell 中使用环境变量。我更喜欢后者，像这样：

```
PAPERCLIP_OPTIONS = { storage:          :s3,
                      bucket:           ENV['S3_BUCKET'],
                      s3_credentials: { access_key_id: ENV['S3_KEY'],
                                        secret_access_key: ENV['S3_SECRET'] }} 
```

然后，您只需在运行应用程序的系统上设置环境变量。

如果您使用 yaml 配置文件方法，**则必须将敏感配置文件添加到您的`.gitignore`文件**中。否则，它们仍将被上传到您的公共仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:55:20.010

如果您查看 config 目录，您将看到一个 YAML 文件，其中包含数据库凭据信息。您可以为您的云环境做同样的事情。

```
development:
  server: xiy-234
  username: hello
  password: 1325abc

production:
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:57:19.600

您可以将这些信息放在 config 目录中的 .yml 文件中。

例如：

```
production:
  access_key_id: xxx
  secret_access_key: xx
  bucket: xxx

development:
  access_key_id: xxx
  secret_access_key: xxx
  bucket: xxx

staging:
  access_key_id: xxx
  secret_access_key: xxx
  bucket: xxx 
```

完成此操作后，您必须通过执行以下操作将这些密钥存储在哈希中：

```
APIS_CONFIG = {'amazons3' => YAML.load_file("#{RAILS_ROOT}/config/amazons3.yml")[Rails.env]} 
```

（您可以将前一行代码放在目录`.rb`中的文件中`config/initializers`）

请注意，您可能会觉得这个[Railscast](http://railscasts.com/episodes/85-yaml-configuration-file)很有趣。

# javascript - 使用 jQuery 将 ul 拆分为更多 ul

> ID：10357628
> 
> 赞同：1
> 
> 时间：2012-04-27T20:47:32.880
> 
> 标签：javascript, jquery, split, while-loop, each

我用 jQuery 制作了一个脚本。该脚本将 li 列表拆分为更多 ul 列表。当列表超过 10 li 项时，必须将列表拆分为更多 ul。我已经在这篇文章中制作了脚本。

但是脚本不起作用。我在这里做错了什么。该脚本用于导航中的子菜单。当导航li项大于4时，li项的ul必须拆分成两个ul。我该如何修复这个脚本。谢谢！

```
submenu();
function submenu() {
    $(".submenu").each(function () {
        if($("li", this).length > 4){
            $(this).closest(".submenu").addClass("width-2")

            var submenu = $(this).closest(".submenu");
            var $bigList = $(this), group;

            while((group = $bigList.find('li:lt(8)').remove()).length) {
                $('<ul/>').append(group).appendTo(submenu);
            }

        }
        if($("li", this).length > 10){
            $(this).closest(".submenu").addClass("width-3")

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:23:23.243

我不完全确定我理解您要做什么，但是此代码会将每个子菜单 UL 拆分为指定大小的更多子菜单，同时将所有项目保持在原始 DOM 顺序中：

```
function splitSubmenu(maxNumItems) {
    $(".submenu").each(function () {

        // get all child li tags
        var list$ = $(this).children("li");
        var num, nextAfter$, after$ = $(this);

        // as long as the current list it too long, loop
        while (list$.length > maxNumItems) {
            // decide how many to remove this iteration
            num = Math.min(maxNumItems, list$.length - maxNumItems);
            // create new UL tag, append num items to it 
            // and insert it into the DOM
            nextAfter$ = $('<ul class="submenu">')
                .append(list$.slice(maxNumItems, maxNumItems + num))
                .insertAfter(after$);
            // update insertion point for next loop iteration
            after$ = nextAfter$;
            // remove the items we just took out from the current jQuery object
            list$ = list$.filter(function(index) {
                return(index < maxNumItems || index >= 2 * maxNumItems);
            });
        }
    });
}

splitSubmenu(4); 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/VMjvQ/](http://jsfiddle.net/jfriend00/VMjvQ/)。

我不明白您要对附加类做什么，因此不包括该部分。

# java - 在 Android 中解密 Rijndael

> ID：10357630
> 
> 赞同：1
> 
> 时间：2012-04-27T20:47:44.487
> 
> 标签：java, android, encryption, rijndael

我基本上需要解密从使用 Rijndael 加密的服务器中检索到的密码，我以前从未使用过加密/解密，我完全迷路了。我在这个网站的某个地方发现 Java 实现了一些不需要外部库的方法，但我没有得到它。我唯一需要的是解密，因为无论如何我都不会写回服务器。

关于如何做或在哪里可以找到有关它的文档的任何想法？

我不知道这段代码是否是我正在寻找的答案，我不太了解它，正如我所说，我以前从未使用过这种东西[：](https://stackoverflow.com/questions/587357/rijndael-support-in-java)

```
byte[] sessionKey = null; //Where you get this from is beyond the scope of this post
byte[] iv = null ; //Ditto
byte[] plaintext = null; //Whatever you want to encrypt/decrypt
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
//You can use ENCRYPT_MODE or DECRYPT_MODE
cipher.calling init(Cipher.ENCRYPT_MODE, new SecretKeySpec(sessionKey, "AES"), new IvParameterSpec(iv));
byte[] ciphertext = cipher.doFinal(plaintext); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:50:04.963

这是一个简单的加密实用程序类，可能对您有所帮助。它基于 ferenc.hechler 在以下 url 上发布的代码： [http](http://www.androidsnippets.com/encryptdecrypt-strings) ://www.androidsnippets.com/encryptdecrypt-strings 我已经对其进行了一些更改以满足我的需要。

```
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class SimpleCrypto {

    private static final int KEY_SIZE = 128;

    public static String encrypt(String seed, String cleartext) throws NoSuchAlgorithmException, InvalidKeyException, NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException {
        final byte[] rawKey = getRawKey(seed.getBytes());
        final byte[] result = encrypt(rawKey, cleartext.getBytes());
        return bin2hex(result);
    }

    public static String decrypt(String seed, String encrypted) throws NoSuchAlgorithmException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchPaddingException {
        final byte[] rawKey = getRawKey(seed.getBytes());
        final byte[] enc = toByte(encrypted);
        final byte[] result = decrypt(rawKey, enc);
        return new String(result);
    }

    public static String decrypt(String seed, byte[] encrypted) throws NoSuchAlgorithmException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchPaddingException {
        final byte[] rawKey = getRawKey(seed.getBytes());
        final byte[] result = decrypt(rawKey, encrypted);
        return new String(result);
    }

    private static byte[] getRawKey(byte[] seed) throws NoSuchAlgorithmException {
        final KeyGenerator kgen = KeyGenerator.getInstance("AES");
        final SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
        kgen.init(KEY_SIZE, sr); // 192 and 256 bits may not be available
        final SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    public static byte[] encrypt(byte[] raw, byte[] clear) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
        final SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        final Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        final byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    public static byte[] decrypt(byte[] raw, byte[] encrypted) throws IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
        final SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        final Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        final byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
    }

    public static String toHex(String txt) {
        return bin2hex(txt.getBytes());
    }

    public static String fromHex(String hex) {
        return new String(toByte(hex));
    }

    public static byte[] toByte(String hexString) {
        final int len = hexString.length() / 2;
        final byte[] result = new byte[len];
        for (int i = 0; i < len; i++) {
            result[i] = Integer.valueOf(hexString.substring(2 * i, 2 * i + 2), 16).byteValue();
        }
        return result;
    }

    public static byte[] getHash(String str) {
        MessageDigest digest = null;
        try {
            digest = MessageDigest.getInstance("SHA-256");
        } catch (NoSuchAlgorithmException ex) {
            ex.printStackTrace();
        }
        digest.reset();
        return digest.digest(str.getBytes());
    }

    static String bin2hex(byte[] data) {
        return String.format("%0" + (data.length * 2) + "X", new BigInteger(1, data));
    }
} 
```

以下是您将如何使用它来解密某些内容：

```
 final String ssid = "MY_WIFI_SSID";
    final String encWifiKey = "myEncryptedWifiKeyString";

    String wifiKey = "";
    try {
        wifiKey = new String(SimpleCrypto.decrypt(SimpleCrypto.getHash(ssid), Base64.decode(encWifiKey, Base64.DEFAULT)));
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (BadPaddingException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        e.printStackTrace();
    } 
```

# events - Powerpoint VBA App_SlideShowBegin

> ID：10357634
> 
> 赞同：6
> 
> 时间：2012-04-27T20:48:29.020
> 
> 标签：events, vba, powerpoint

为了在 Powerpoint 中使用 SlideShowBegin 事件，您必须按以下方式配置类模块：

```
Public WithEvents App As Application

    Private Sub App_SlideShowBegin(ByVal Wn As SlideShowWindow)
        MsgBox "SlideShowBegin"
    End Sub 
```

然后，在非类模块中，您必须创建该类型的对象并将 App 设置为 Application。

```
Dim X As New Class1

Sub InitializeApp()
Set X.App = Application
End Sub 
```

现在，我唯一遇到的问题是，如果您不使用 Powerpoint 中的宏菜单手动调用 InitializeApp，事件将不起作用。您必须先调用此子程序，然后才能在幻灯片开始时调用此子程序，包括此子程序。

在运行我的 powerpoint 之前，我该如何去调用这个 sub？有一个更好的方法吗？

编辑：

我试过使用 Class_Initialize 但它只有在第一次使用时才会被调用，或者你做出如下声明`Dim X as Class1; X = new Class1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:07:23.587

通常，事件处理程序作为加载项的一部分安装，您可以在 Auto_Open 子例程中初始化类，该子例程始终在加载项加载时运行。如果您想在单个演示文稿中包含一个事件处理程序，使其初始化的一种方法是包含一个形状，当鼠标悬停或单击时会触发一个宏，该宏会初始化您的事件处理程序并转到下一张幻灯片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-30T13:57:32.197

回答一个老问题，但我希望我的解决方案可以帮助解决这个问题的人。

针对此问题的一般建议是使用插件或在幻灯片上放置一些元素，然后在单击或悬停时执行初始化。两者都不总是需要的，所以我有以下方法：

在某些模块中：

```
Dim slideShowRunning As Boolean
-----------------------------
Sub SlideShowBegin(ByVal Wn As SlideShowWindow)
    ' Your code for start-up
End Sub
-----------------------------
Public Sub OnSlideShowPageChange(ByVal Wn As SlideShowWindow)
    If TypeName(slideShowRunning) = "Empty" Or slideShowRunning = False Then
        slideShowRunning = True
        SlideShowBegin Wn
    End If
End Sub
----------------------------
Public Sub OnSlideShowTerminate(ByVal Wn As SlideShowWindow)
    slideShowRunning = False
End Sub 
```

对我来说，这非常有效。**注意**我绝不是 vba 专家，实际上我的 vba 编程时间可能不到 50 小时（在 powerpoint 中可能只有 8 小时）。所以这可能是一个可怕的解决方案。我不知道，但对我来说它有效，所以我喜欢分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-23T15:41:10.467

事实上， OnSlideShowPageChange 在幻灯片开始时运行。如果不需要使用全局变量，请确保它在后续页面更改中不起作用。有关详细信息，请参阅 C. Binair 的回答。

# html - HTML5 按钮不隐藏

> ID：10357638
> 
> 赞同：0
> 
> 时间：2012-04-27T20:48:42.370
> 
> 标签：html

我正在使用 HTML5。我喜欢隐藏我正在使用的按钮：

```
 $('#butt1').hide();

     <button id="butt1">Button1</button> 
```

知道为什么它可能无法在 HTML5 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:50:12.957

把它放在：

```
$(document).ready(function(){

      //....My blah di blah  

        $('#butt1').hide(); 

      //....My other stuff 

}); 
```

顺便说一句，您的问题与 Html 5 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:51:26.727

1.  [https://stackoverflow.com/a/10357651/139010](https://stackoverflow.com/a/10357651/139010)，或
2.  将`<script>`标签移动到标记中的标签**之后**`<button>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:51:54.500

您的 jQuery 需要在脚本标签中。

# r - 在查找函数的帮助参考页面时如何指定包？

> ID：10357642
> 
> 赞同：6
> 
> 时间：2012-04-27T20:49:08.383
> 
> 标签：r, emacs, packages, ess

如何查找函数的帮助手册页并在 R 中指定包？例如，count 同时出现在 seqinr 和 plyr 中。如果我想在 plyr 中查找计数，命令是什么？我尝试了一些明显（但错误）的猜测，例如 "?plyr::count"

**编辑：** 当我做 ?count 时，我收到以下消息：

```
Help on topic 'count' was found in the following packages:

  Package               Library
  plyr                  /Library/Frameworks/R.framework/Versions/2.15/Resources/library
  seqinr                /Library/Frameworks/R.framework/Versions/2.15/Resources/library 
```

当我执行 ?plyr::count 时，我得到：

```
No documentation for 'plyr::count' in specified packages and libraries:
you could try '??plyr::count' 
```

当我执行 ?plyr:::count 时，我得到：

```
No documentation for 'plyr:::count' in specified packages and libraries:
you could try '??plyr:::count' 
```

添加两个问号也会给我一个没有找到文档的错误。查找非模棱两可功能的帮助工作正常（例如？情节）

这是在 emacs + ESS 中运行的 OSX 上的 R 2.15.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:56:39.200

使用`package=`参数`help`：

```
help("count", package="plyr") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T20:56:50.297

正确的方法是：

```
?plyr::count
?plyr:::count 
```

有关详细信息，请参阅`?"?"`- 显示了两个示例。

两者都为我工作，加载了两个包，甚至没有加载包。如果您安装了软件包，这就引出了一个问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T20:55:22.970

你很接近，你需要三个：`:::`

```
?seqinr:::count # for seqinr
?plyr:::count # for plyr 
```

# asp.net - 如何将在 https: 下运行的 .Net Web 服务服务公开给 javascript？

> ID：10357649
> 
> 赞同：0
> 
> 时间：2012-04-27T20:50:01.340
> 
> 标签：asp.net, web-services, .net-4.0

我使用 .Net 的 Scriptmanager 向我的客户端 javascript 公开一个 Web 服务，如下所示：

```
 <asp:ScriptManager ID="scriptMgr" runat="server">
    <services>
        <asp:servicereference Path="RmUiControlDataSVC.svc" />
    </services>
</asp:ScriptManager> 
```

在我的 javascript 中，我可以这样称呼它：

```
var service = new RmUiControlDataSVC(); 
```

当我从本地服务器运行它时，它工作正常，我可以在其中运行方法。当我使用远程部署并连接到我的站点时，它也会运行`http:`。（在我的站点上工作[http://myserver/msftqa/RmMain.aspx](http://myserver/msftqa/RmMain.aspx)）但是，当我尝试使用`https:`（https： //mysite.com/msftqa/RmMain.aspx）。现在，当我尝试访问服务的方法时，我得到一个

> 503服务不可用

通过 Firebug 检查显示我的 Svc 正在尝试使用`http:`而不是绑定，`https:`并且无法找到该服务。这是 web.config 的相关部分

```
 <service name="Company.App.RM.RmUiControlDataSVC">
    <endpoint address="" behaviorConfiguration="Company.App.RM.RmUiControlDataAspNetAjaxBehavior"
      binding="webHttpBinding" contract="Company.App.RM.RmUiControlDataSVC" />
  </service> 
```

有没有一种方法可以告诉服务`https:`在通过 https 连接时使用，但在使用连接时仍然可以使用`http:`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:18:32.463

通过 http 和 https 公开 WCF 意味着您需要两个端点。您可以以声明方式或编程方式进行配置：

[http://netpl.blogspot.com/2010/05/how-to-programmatically-configure-ssl.html](http://netpl.blogspot.com/2010/05/how-to-programmatically-configure-ssl.html)

# ruby - Ruby 中用于西班牙语检测的字符串解析

> ID：10357652
> 
> 赞同：0
> 
> 时间：2012-04-27T20:50:14.107
> 
> 标签：ruby, regex, string, parsing, internationalization

我遇到了一个字符串，需要确定字符串的语言是西班牙语还是英语。我计划解析停用词 - 西班牙语 (`de, es, si, y") 与英语 ('of', 'is', 'if', 'and')？如果西班牙语出现的次数多于英语出现次数，那么，我断定该页面是西班牙语。

是否有任何可用的 Ruby 片段来执行此操作？如果不是，那么字符串解析或正则表达式的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:37:13.560

如果您有一个包含句子（或至少是一系列单词）的字符串，则可以使用`string.split(' ')`将字符串拆分为单词数组。从那里，您可以使用`.each`遍历列表并处理每个单词。例如：

```
def detect_language(sentence)
    english_count = 0
    spanish_count = 0
    sentence.split(' ').each {|word|
        if looks_like_english(word)
            english_count += 1
        elsif looks_like_spanish(word)
            spanish_count += 1
        end
    }

    retval = ["spanish", "unknown", "english"]
    retval[(english_count <=> spanish_count) + 1]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:30:48.460

我有相同任务的经验。经过几天的讨论，决定拒绝正则表达式/文本解析解决方案。

现在我使用支持自动检测语言的翻译网络服务器（如 google、bing、...）。我认为这是解决它的最佳方法（当然，如果您的条件允许）

# c# - KERNEL_DATA_INPAGE_ERROR 测试代码时不断蓝屏

> ID：10357656
> 
> 赞同：1
> 
> 时间：2012-04-27T20:50:44.817
> 
> 标签：c#, .net, memory, windows-7, cryptography

我的代码中显然存在问题，但我太新手了，无法意识到它可能是什么。

我设计了一个简单的程序来计算文件的各种加密哈希。它似乎在较小的文件上工作得很好（我什至使用多个线程）......但是当我尝试在一个大的 ISO 文件（近 4GB）上测试它时，我的计算机非常可靠地崩溃并出现 KERNEL_DATA_INPAGE_ERROR。

我在做一些效率很低的事情吗？在我看来，太多的内存被用完了，尽管我曾试图限制一次内存的使用......我想知道这是我的代码，还是我的电脑出了问题...... .

fwiw 我有一个运行 4 个线程的 i5 处理器和使用 Windows 7 x64 的 4GB 内存。

这是我的代码： http: [//pastebin.com/KA3KrStf](http://pastebin.com/KA3KrStf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:53:03.453

几乎可以肯定问题不在您的程序中。用户模式代码不会产生内核错误。问题出在您的硬件或驱动程序中。您应该将搜索指向那个方向，而不是调查您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:53:45.743

这个代码是 ring3，所以它不应该**蓝屏**你的机器。我只能想象您的 RAM 或 HDD 损坏，当您尝试分配大量内存时会触发 BSOD。

# sql - SQL 查询产量相差一列

> ID：10357658
> 
> 赞同：0
> 
> 时间：2012-04-27T20:50:55.233
> 
> 标签：sql

我知道还有其他一些类似于我想要完成的主题，但我正在努力解决这个问题。我需要能够使用来自多个表的相当复杂的查询为一列而不是另一列获得不同的 SQL 查询结果。

这是当前查询：

```
select llattrdata.ID dataid,

max(case when llattrdata.ATTRID = 2 then llattrdata.VALSTR end) TED_ID

from llattrdata, dtree 

where
llattrdata.DEFID = 19400074 and
llattrdata.VERNUM = dtree.VERSIONNUM and
llattrdata.ID = dtree.DATAID

group by llattrdata.ID 
```

当前结果：
DATAID TED_ID
19400078 10083 19400943
10083
19400941 10335

所需结果：
DATAID TED_ID
19400078 10083
19400941 10335

有人可以帮帮我吗？我知道它可能涉及某种连接，但我不完全确定在这种情况下如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:54:48.367

```
SELECT MIN(dataid) dataid, TED_ID
FROM
(
    SELECT
        llattrdata.ID dataid,
        MAX(CASE WHEN llattrdata.ATTRID = 2 THEN llattrdata.VALSTR END) TED_ID
    FROM llattrdata
    JOIN dtree ON llattrdata.ID = dtree.DATAID
    WHERE llattrdata.DEFID = 19400074
    AND llattrdata.VERNUM = dtree.VERSIONNUM
    GROUP BY llattrdata.ID
) T1
GROUP BY TED_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:04:56.840

您可以尝试按第二列分组并在第一列上使用 min() 或 max()，因为您不介意为第一列选择哪个值。尽管我不确定您是否可以嵌套这样的组函数-取决于数据库（您可以使用视图或类似方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:56:44.923

尝试将 MAX() 函数分配给第一个 SELECT 项而不是第二个。

# python - Python 比已编译的 Haskell 更快？

> ID：10357663
> 
> 赞同：44
> 
> 时间：2012-04-27T20:51:20.293
> 
> 标签：python, haskell, quicksort

我有一个用 Python 和 Haskell 编写的简单脚本。它读取包含 1,000,000 个换行符分隔的整数的文件，将该文件解析为整数列表，对其进行快速排序，然后将其写入已排序的不同文件。该文件与未排序的文件具有相同的格式。简单的。

这是哈斯克尔：

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        lesser  = filter (< p) xs
        greater = filter (>= p) xs

main = do
    file <- readFile "data"
    let un = lines file
    let f = map (\x -> read x::Int ) un
    let done = quicksort f
    writeFile "sorted" (unlines (map show done)) 
```

这是Python：

```
def qs(ar):
    if len(ar) == 0:
        return ar

    p = ar[0]
    return qs([i for i in ar if i < p]) + [p] + qs([i for i in ar if i > p])

def read_file(fn):
    f = open(fn)
    data = f.read()
    f.close()
    return data

def write_file(fn, data):
    f = open('sorted', 'w')
    f.write(data)
    f.close()

def main():
    data = read_file('data')

    lines = data.split('\n')
    lines = [int(l) for l in lines]

    done = qs(lines)
    done = [str(l) for l in done]

    write_file('sorted', "\n".join(done))

if __name__ == '__main__':
    main() 
```

很简单。现在我编译 Haskell 代码

```
$ ghc -O2 --make quick.hs 
```

我给这两个计时：

```
$ time ./quick
$ time python qs.py 
```

结果：

哈斯克尔：

```
real    0m10.820s
user    0m10.656s
sys 0m0.154s 
```

Python：

```
real    0m9.888s
user    0m9.669s
sys 0m0.203s 
```

Python 怎么可能比本地代码 Haskell 更快？

谢谢

**编辑**：

*   Python版本：2.7.1
*   GHC 版本：7.0.4
*   Mac OSX，10.7.3
*   2.4GHz 英特尔酷睿 i5

列表由

```
from random import shuffle
a = [str(a) for a in xrange(0, 1000*1000)]
shuffle(a)
s = "\n".join(a)
f = open('data', 'w')
f.write(s)
f.close() 
```

所以所有的数字都是唯一的。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-28T03:54:20.193

**原始的 Haskell 代码**

Haskell 版本有两个问题：

*   您正在使用字符串 IO，它构建字符的链接列表
*   您正在使用看起来像快速排序的非快速排序。

该程序在我的 Intel Core2 2.5 GHz 笔记本电脑上运行需要 18.7 秒。（使用 -O2 的 GHC 7.4）

**Daniel 的 ByteString 版本**

这得到了很大改进，但请注意它仍然使用低效的内置合并排序。

他的版本需要 8.1 秒（并且不处理负数，但这对于本次探索来说不是问题）。

**笔记**

从这里开始，这个答案使用以下包：`Vector`、`attoparsec`和. 另请注意，使用 timsort 的 kindall 版本在我的机器上需要 2.8 秒（编辑：使用 pypy 需要 2 秒）。`text``vector-algorithms`

**文字版**

我撕掉了 Daniel 的版本，将其翻译为 Text（因此它可以处理各种编码），并使用`Vector`ST monad 中的可变对象添加了更好的排序：

```
import Data.Attoparsec.Text.Lazy
import qualified Data.Text.Lazy as T
import qualified Data.Text.Lazy.IO as TIO
import qualified Data.Vector.Unboxed as V
import qualified Data.Vector.Algorithms.Intro as I
import Control.Applicative
import Control.Monad.ST
import System.Environment (getArgs)

parser = many (decimal <* char '\n')

main = do
    numbers <- TIO.readFile =<< fmap head getArgs
    case parse parser numbers of
        Done t r | T.null t -> writeFile "sorted" . unlines
                                                  . map show . vsort $ r
        x -> error $ Prelude.take 40 (show x)

vsort :: [Int] -> [Int]
vsort l = runST $ do
        let v = V.fromList l
        m <- V.unsafeThaw v
        I.sort m
        v' <- V.unsafeFreeze m
        return (V.toList v') 
```

这在 4 秒内运行（并且也不处理底片）

**返回字节串**

所以现在我们知道我们可以制作一个更快的更通用的程序，那么让仅 ASCii 的版本更快呢？没问题！

```
import qualified Data.ByteString.Lazy.Char8 as BS
import Data.Attoparsec.ByteString.Lazy (parse,  Result(..))
import Data.Attoparsec.ByteString.Char8 (decimal, char)
import Control.Applicative ((<*), many)
import qualified Data.Vector.Unboxed as V
import qualified Data.Vector.Algorithms.Intro as I
import Control.Monad.ST

parser = many (decimal <* char '\n')

main = do
    numbers <- BS.readFile "rands"
    case parse parser numbers of
        Done t r | BS.null t -> writeFile "sorted" . unlines
                                                   . map show . vsort $ r

vsort :: [Int] -> [Int]
vsort l = runST $ do
        let v = V.fromList l
        m <- V.unsafeThaw v
        I.sort m
        v' <- V.unsafeFreeze m
        return (V.toList v') 
```

这在 2.3 秒内运行。

**生成测试文件**

以防万一有人好奇，我的测试文件由以下人员生成：

```
import Control.Monad.CryptoRandom
import Crypto.Random
main = do
  g <- newGenIO :: IO SystemRandom
  let rs = Prelude.take (2^20) (map abs (crandoms g) :: [Int])
  writeFile "rands" (unlines $ map show rs) 
```

如果您想知道为什么`vsort`不在 Hackage 上以更简单的形式打包......我也是。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-27T21:37:37.613

简而言之，不要使用`read`. 替换`read`为这样的函数：

```
import Numeric

fastRead :: String -> Int
fastRead s = case readDec s of [(n, "")] -> n 
```

我得到了相当公平的加速：

```
~/programming% time ./test.slow
./test.slow  9.82s user 0.06s system 99% cpu 9.901 total
~/programming% time ./test.fast
./test.fast  6.99s user 0.05s system 99% cpu 7.064 total
~/programming% time ./test.bytestring
./test.bytestring  4.94s user 0.06s system 99% cpu 5.026 total 
```

只是为了好玩，上面的结果包括一个使用`ByteString`ULTIMATE BARE-METAL SPEED 的版本（因此通过完全忽略文件编码问题而未能通过“为 21 世纪做好准备”测试）。它还有一些其他差异；例如，它发送到标准库的排序功能。完整代码如下。

```
import qualified Data.ByteString as BS
import Data.Attoparsec.ByteString.Char8
import Control.Applicative
import Data.List

parser = many (decimal <* char '\n')

reallyParse p bs = case parse p bs of
    Partial f -> f BS.empty
    v -> v

main = do
    numbers <- BS.readFile "data"
    case reallyParse parser numbers of
        Done t r | BS.null t -> writeFile "sorted" . unlines . map show . sort $ r 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-27T21:30:15.557

与其说是 Haskellite，不如说是 Pythonista，但我会尝试一下：

1.  在您测量的运行时中，仅读取和写入文件就有相当多的开销，这在两个程序之间可能非常相似。另外，请注意您已经为这两个程序预热了缓存。

2.  您的大部分时间都花在制作列表和列表片段的副本上。Python 列表操作经过高度优化，是该语言中最常用的部分之一，并且列表推导通常也非常高效，它们将大部分时间花在 Python 解释器中的 C 语言上。在 Python 中速度慢但在静态语言中速度很快的东西并不多，例如对象实例上的属性查找。

3.  您的 Python 实现会丢弃等于枢轴的数字，因此到最后它可能会排序更少的项目，从而具有明显的优势。（如果您正在排序的数据集中没有重复项，这不是问题。）修复此错误可能需要在每次调用 时对列表的大部分内容进行另一个副本`qs()`，这会使 Python 速度慢一点。

4.  您没有提及您使用的是哪个版本的 Python。如果您使用的是 2.x，您可能只需切换到 Python 3.x 就可以让 Haskell 击败 Python。:-)

我对这两种语言在这里基本上并驾齐驱并不感到惊讶（10% 的差异并不值得注意）。使用 C 作为性能基准，Haskell 因其惰性函数性质而损失了一些性能，而 Python 由于是解释性语言而损失了一些性能。一场体面的比赛。

由于 Daniel Wagner 使用内置的 发布了一个优化的 Haskell 版本`sort`，这里有一个类似的优化 Python 版本，使用`list.sort()`：

```
mylist = [int(x.strip()) for x in open("data")]
mylist.sort()
open("sorted", "w").write("\n".join(str(x) for x in mylist)) 
```

在我的机器上需要 3.5 秒，而原始代码大约需要 9 秒。几乎与优化的 Haskell 并驾齐驱。原因：它大部分时间都花在 C 编程库上。此外，TimSort（Python 中使用的排序）是一头*野兽。*

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-03T17:22:52.637

这是事后的事，但我认为大部分的麻烦在于 Haskell 的写作。下面的模块非常原始——应该使用构建器，当然也可以避免通过 String 进行荒谬的往返显示——但它很简单，并且明显优于使用 kindall 改进的 python 的 pypy，并且优于其他地方的 2 秒和 4 秒 Haskell 模块在这个页面上（令我惊讶的是他们使用列表的程度，所以我又转了几圈。）

```
$ time aa.hs        real    0m0.709s
$ time pypy aa.py   real    0m1.818s
$ time python aa.py real    0m3.103s 
```

我正在使用推荐用于来自矢量算法的未装箱矢量的排序。以某种形式使用 Data.Vector.Unboxed 现在显然是做这类事情的标准、幼稚的方式——它是新的 Data.List（用于 Int、Double 等）`sort`。我认为这仍然可以得到很大的改进，特别是在写入端。从要求它打印一堆索引而不是写入文件中可以看出，读取和排序总共需要大约 0.2 秒，因此写入时间是其他时间的两倍。如果 pypy 大部分时间都在使用 timsort 或其他什么东西，那么看起来排序本身在 Haskell 中肯定要好得多，而且同样简单——如果你能掌握该死的向量……

我不确定为什么没有方便的函数来读取和写入自然格式的未装箱的东西的向量——如果有的话，这将是三行长，并且会避免 String 并且速度更快，但也许我只是没有没见过他们。

```
import qualified Data.ByteString.Lazy.Char8 as BL
import qualified Data.ByteString.Char8 as B
import qualified Data.Vector.Unboxed.Mutable as M
import qualified Data.Vector.Unboxed as V
import Data.Vector.Algorithms.Radix 
import System.IO

main  = do  unsorted <- fmap toInts (BL.readFile "data")
            vec <- V.thaw unsorted
            sorted <- sort vec >> V.freeze vec
            withFile "sorted" WriteMode $ \handle ->
               V.mapM_ (writeLine handle) sorted

writeLine :: Handle -> Int -> IO ()
writeLine h int = B.hPut h $ B.pack (show int ++ "\n")

toInts :: BL.ByteString -> V.Vector Int
toInts bs = V.unfoldr oneInt (BL.cons ' ' bs) 

oneInt :: BL.ByteString -> Maybe (Int, BL.ByteString)
oneInt bs = if BL.null bs then Nothing else 
               let bstail = BL.tail bs
               in if BL.null bstail then Nothing else BL.readInt bstail 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-28T22:00:19.890

我注意到了一些其他人由于某种原因没有注意到的问题；你的haskell和python代码都有这个。（请告诉我它是否在自动优化中得到修复，我对优化一无所知）。为此，我将在 haskell 中演示。在您的代码中，您可以像这样定义较小和较大的列表：

```
where lesser = filter (<p) xs
      greater = filter (>=p) xs 
```

这很糟糕，因为您将 xs 中的每个元素与 p 进行了两次比较，一次是为了进入较小的列表，另一次是为了进入较大的列表。这（理论上；我没有检查时间）使您的排序使用**两倍**的比较；这是一场灾难。相反，您应该创建一个函数，使用谓词将列表分成两个列表，以这样的方式

```
split f xs 
```

相当于

```
(filter f xs, filter (not.f) xs) 
```

使用这种函数，您只需比较列表中的每个元素**一次**即可知道将其放在元组的哪一侧。
好的，让我们这样做：

```
where
    split :: (a -> Bool) -> [a] -> ([a], [a])
    split _ [] = ([],[])
    split f (x:xs)
        |f x       = let (a,b) = split f xs in (x:a,b)
        |otherwise = let (a,b) = split f xs in (a,x:b) 
```

现在让我们用

```
let (lesser, greater) = split (p>) xs in (insert function here) 
```

完整代码：

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) =
    let (lesser, greater) = splitf (p>) xs
    in (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        splitf :: (a -> Bool) -> [a] -> ([a], [a])
        splitf _ [] = ([],[])
        splitf f (x:xs)
            |f x       = let (a,b) = splitf f xs in (x:a,b)
            |otherwise = let (a,b) = splitf f xs in (a,x:b) 
```

出于某种原因，我无法在 where 子句中纠正 getter/lesser 部分，所以我必须在 let 子句中纠正它。另外，如果它不是尾递归，请告诉我并为我修复它（我还不知道尾递归如何完全工作）

现在你应该对 python 代码做同样的事情。我不知道python，所以我不能为你做。

**编辑：** 实际上在 Data.List 中已经有这样的功能，称为分区。请注意，这证明了对这种函数的需要，因为否则它不会被定义。这将代码缩小为：

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) =
    let (lesser, greater) = partition (p>) xs
    in (quicksort lesser) ++ [p] ++ (quicksort greater) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-27T22:11:43.557

为了跟进@kindall 有趣的答案，这些时间取决于您使用的 python / Haskell 实现、运行测试的硬件配置以及两种语言的算法实现。

尽管如此，我们还是可以尝试获得一些关于一种语言实现与另一种语言或从一种语言到另一种语言的相对性能的良好提示。使用像 qsort 这样的众所周知的算法，这是一个好的开始。

为了说明 python/python 比较，我刚刚在同一台机器上的 CPython 2.7.3 和 PyPy 1.8 上测试了您的脚本：

*   CPython：~8s
*   PyPy：~2.5s

这表明语言实现还有改进的空间，也许编译的 Haskell 最多不能解释和编译你的相应代码。如果您在 Python 中寻找速度，如果需要并且您的覆盖代码允许您这样做，还可以考虑切换到 pypy。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-27T21:13:33.287

Python 确实针对这类事情进行了优化。我怀疑 Haskell 不是。这是一个[类似的问题](https://stackoverflow.com/questions/9378500/why-is-splitting-a-string-slower-in-c-than-python)，它提供了一些非常好的答案。

# iphone - 从格式为“4/26/1980”的 NSString 中检索日或月 int

> ID：10357667
> 
> 赞同：2
> 
> 时间：2012-04-27T20:51:32.690
> 
> 标签：iphone, ios, xcode, ipad

我在将字符串转换为 NSDate 时遇到了一些问题，所以也许有更好/更简单的方法来做到这一点。

我有一个日期格式为“dd/mm/yyyy”的 NSString，但是，有些不包含年份，只是“dd/mm”。

我正在尝试将日期和月份存储在我的 SQLite 数据库中，因此我需要单独取出这些组件。我曾尝试将它们转换为 NSDate 但因为有些没有年份，它与 NSDate 格式不匹配并且失败。我在遵循这样的示例时也遇到了问题[，](https://stackoverflow.com/questions/3917250/converting-nsstring-to-nsdate-and-back-again)因为我的原始 dateString 格式不同（使用斜杠而不是破折号）。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T00:10:01.097

```
NSString *dateString = @"01/04/1981";
NSArray *dateComponentsArray = [dateString componentsSeparatedByString:@"/"];
NSString *monthString = [dateComponentArray objectAtIndex:0];
NSString *dayString = [dateComponentsArray objectAtIndex:1];
if ([dateComponentsArray objectAtIndex:2]) {
    NSString *yearString = [dateComponentsArray objectAtIndex:2];
} 
```

NSFormatter 似乎有点矫枉过正，因为它非常昂贵。如果您确定不会对格式进行任何更改，那么这应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T23:08:43.737

SQLite 甚至没有适当的本地日期类型（请参阅[我最近关于此主题的帖子](https://stackoverflow.com/questions/10344786/sqlite-query-compare-datetime-field-with-current-date-time/10345684#10345684)），并且在您可以在 SQLite 中存储日期的范围内，在没有一年的情况下它没有意义。也不确定没有一年的 NSDate 是否有意义。

就个人而言，我只是将日、月和年这三个字段作为单独的数字字段存储在数据库中，如果您不知道该人的出生年份，则将年份留空。因此，只需按照@benzado 的建议使用一个简单的 NSScanner：

```
int day;
int month;
int year;

NSScanner *scanner = [NSScanner scannerWithString:birthdayString];

if ([scanner scanInt:&month] &&
    [scanner scanString:@"/" intoString:nil] &&
    [scanner scanInt:&day])
{
    // found valid month/day

    if ([scanner scanString:@"/" intoString:nil] && 
        [scanner scanInt:&year])
    {
        // found year too
    }
} 
```

或者使用 NSString 的 componentsSeparatedByString 将其放入 @Jacob 建议的字符串数组中：

```
NSString *monthString, *dayString, *yearString;

NSArray *dateComponents = [birthdayString componentsSeparatedByString:@"/"];

if ([dateComponents count] >= 2)
{
    monthString = [dateComponents objectAtIndex:0];
    dayString   = [dateComponents objectAtIndex:1];

    // found month and day

    if ([dates count] == 3)
    {
        yearString = [dateComponents objectAtIndex:2];

        // found year, too
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T00:18:11.623

您可以使用良好的 ol'fashed `NSScanner`。

```
NSScanner *scanner = [NSScanner scannerWithString:x];
int month, day;
if (
    [scanner scanInt:&month] &&
    [scanner scanString:@"/" intoString:nil] &&
    [scanner scanInt:&day]
) {
    NSLog(@"Got month = %d and day = %d", month, day);
} 
```

对照文档检查这一点，因为我是凭记忆写的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T21:12:22.770

我认为这有你需要的答案：

[Apple iOS 日期格式指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T21:03:44.827

如果它那么简单，你不能只检查'/'吗？也尝试使用 NSDateFormatter，这可能会对您有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T20:54:55.633

当日期没有年份时，您需要弄清楚这意味着什么。它假设当前年份还是其他年份？一旦弄清楚了，就可以将年份附加到字符串中，然后解析日期。

# haskell - 如何理解 Haskell 中的“Currying”？

> ID：10357668
> 
> 赞同：2
> 
> 时间：2012-04-27T20:51:33.470
> 
> 标签：haskell

假设有一个名为“smallerc”的函数

```
 smallerc :: Integer -> (Integer->Integer)
    smallerc x y = if x <=y then x else y 
```

为什么不使用以下方法声明函数：

```
 smallerc :: (Integer -> Integer) ->Integer 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T21:03:18.620

理解柯里化的关键是要理解没有一个函数具有多个参数。*haskell 中的每个*函数都只有一个参数。但由于`->`运算符的右关联属性，这并不能立即清楚。

当你看到这个：

```
Integer -> Integer -> Integer 
```

它等价于：

```
Integer -> (Integer -> Integer) 
```

在这两种情况下，函数都接受一个`Integer`并*返回一个函数*。（返回的函数是一个接受一个`Integer`并返回一个的函数`Integer`。）所以这可能类似于一个简单的数学运算；它接受一个`Integer`（假设是 5）并返回一个函数，该函数接受另一个`Integer`（再次为 5）并将其添加到第一个，并返回结果（10）。

但是当你这样做时：

```
(Integer -> Integer) -> Integer 
```

你创建了一些非常不同的东西——一个*接受*一个函数并返回一个`Integer`. 这也可能是实现数学函数的一种方式；但不是将 an`Integer`作为第一个参数，而是采用数学运算本身！例如，假设您向该函数传递了一个函数，该函数将传递给它的任何内容加 5。然后该函数传递`5`给*该*函数，并返回结果 (10)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:59:37.217

箭头运算符是右结合的。意思是，您的第一个示例将是一个函数，该函数接受一个`Integer`并返回`Integer -> Integer`一个函数，该函数接受一个整数并返回一个整数。相比之下，您的第二个示例将是一个函数，该函数接受一个`Integer -> Integer`函数并返回一个`Integer`.

# jquery - IE 8 问题：无法识别的表达式：第一个类型

> ID：10357670
> 
> 赞同：2
> 
> 时间：2012-04-27T20:51:42.687
> 
> 标签：jquery, internet-explorer, internet-explorer-8

当我加载页面时，在 IE 8 中读取此错误：

> 代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 2.0.50727；.NET4.0C；.NET4.0E）时间戳：2012 年 4 月 27 日星期五 18:38:27 UTC
> 
> Messaggio：语法错误，无法识别的表达式：第一个类型 Linea：3 Carattere：14659 Codice：0 URI： [http ://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

在 Firefox、Chrome 和其他都可以！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:09:48.900

`:first-of-type`不是 jQuery 选择器。`:first-of-type`仅适用于本机支持此选择器的浏览器。

对于其他浏览器，扩展选择器集 ( `$.expr[':']`)。看看[这个项目](https://github.com/keithclark/JQuery-Extended-Selectors)。[jquery-extra-selectors.js](https://github.com/keithclark/JQuery-Extended-Selectors/blob/master/jquery-extra-selectors.js)添加了对几个伪类选择器的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T02:40:19.107

如果您只想获取容器内的第一个元素，那么`:first-of-type`您可以使用`:first-child`即使在**IE8**中也支持的选择器。

# php - 创建多个php数组

> ID：10357674
> 
> 赞同：0
> 
> 时间：2012-04-27T20:51:59.770
> 
> 标签：php

我有一个带有复选框的 html 表单。有人选择一个或多个复选框并点击删除按钮，然后它将从数据库中删除文件引用并从 Amazon S3 中删除文件。这是我用来查找所有复选框的代码

```
$checkbox_select = JRequest::getVar('checkboxselect', '', 'POST'); //just a Joomla way of doing a $_POST with extra security
var_dump($checkbox_select); //this returns: array(2) { ["video_1.mp4"]=> string(2) "on" ["video_2.mp4"]=> string(2) "on" ["video_3.mp4"]=> string(2) "on"} 

// Localize and sanitize each individual value
foreach (array_keys($checkbox_select) as $element) {
    $deleteNames[] = $db->quote($element);
}
var_dump($deleteNames); //array(3) { [0]=> string(13) "'video_3.mp4'" [1]=> string(13) "'video_2.mp4'" [2]=> string(13) "'video_1.mp4'" } 
```

我的问题是 Amazon S3 和多个文件删除。我需要将 S3 删除的格式非常混乱：

```
$s3->delete_objects('mybucket', array(

'objects' => array( // accepts a *list* of one or more *hashes*

    // a *hash* that contains a "key" key with a value, and maybe a "version_id" key with a value
    array('key' => 'object (file) name'),

    // a second hash representing a file
    // a third hash representing a file
    // and so on...
),
)); 
```

据我了解（来自 S3 delete_objects 函数）最终关联的数组具有`key`作为实际键值。最后`var_dump`，我将所有视频名称放在一个数组中，现在我只需将该数组转换为以下格式的一组数组：

```
array ('key' => 'video_1.mp4'),
array ('key' => 'video_2.mp4'),
array ('key' => 'video_3.mp4'),
...and so on 
```

如何创建这些数组？我应该使用我拥有的第一个 var_dump 还是第二个（它们都列出了视频文件名）？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:29:49.270

查看[array_push()](http://php.net/manual/en/function.array-push.php)的 php 文档中的[这篇文章](http://www.php.net/manual/en/function.array-push.php#61217)。您将简要了解如何实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:31:19.983

您可以使用[foreach](http://php.net/manual/en/control-structures.foreach.php)循环遍历数组并以所需格式创建一个新数组。

例子：

```
<?php

foreach (array_keys($checkbox_select) as $element) {
    $deleteNames[] = array('key' => $db->quote($element));
} 
```

*未经测试，可能包含错误*

# python - 如何配置 nginx 为另一个域提供特定的 django url 路径

> ID：10357675
> 
> 赞同：2
> 
> 时间：2012-04-27T20:52:00.470
> 
> 标签：python, django, nginx

我已经配置了 nginx + uwsgi 来服务 foo.com，但是 foo.com/bar/ 我想像 bar.com 一样服务它

例如： foo.com/bar/test/ = bar.com/test/

我也想让 bar.com 机器人不允许。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:38:12.190

假设您已`foo.com`配置为：

```
location / {
 # your normal stuff
} 
```

像这样的东西应该工作：

```
location / {
   rewrite  ^/bar/(.*)$  bar.com/$1? break;
} 
```

有关阻止机器人，请参阅[此 nginx 论坛条目](http://forum.nginx.org/read.php?2,221162,221162)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:22:20.843

```
server {
    listen   80;
    server_name foo.com;
    root   /full/server/path/to/foo/folder;
    index index.html index.php;
    # This redirects anyone that directly types "foo.com/bar/xyz to bar.com/xyz"
    if ($request_uri ~ ^/bar(.*)$) {
        return 301 http://bar.com$1;
        # Alternative for old nginx versions
        # rewrite ^ http://bar.com$1 redirect;
    }

    # foo.com location blocks go below
    ...
}

server {
    listen   80;
    server_name bar.com;
    root /full/server/path/to/foo/bar/folder;
    index index.html index.php;

    # bar.com location blocks go below
    ...
} 
```

# html - Rails 将散列输出到 x * y 行的 html

> ID：10357676
> 
> 赞同：1
> 
> 时间：2012-04-27T20:52:03.117
> 
> 标签：html, ruby-on-rails-3, html-table

我有一个我想通过 html 表输出的图像哈希。

这是我在 PHP 中完成的一项基本任务，但我想看看 ruby​​ 可以做什么神奇的东西来轻松实现它。

我看过助手和教程，它们都非常复杂。

这是我当前打印图像的方式。我如何将其转换为输出到 4 xn 表之类的东西？

```
 <% @photos.each do |photo| %>

    <%= image_tag photo["images"][4]["source"] %><br/>

    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:05:12.737

看一下这个[`each_slice`](http://ruby-doc.org/core-1.9.2/Enumerable.html#method-i-each_slice)方法，它可以让你按给定大小的组来抓取你的数组。你应该能够做类似的事情

```
<table>
<% @photos.each_slice(4) do |group| %>
      <tr>
      <%group.each do |photo|%>
           <td>
           <%= image_tag photo["images"][4]["source"] %>
           <td>
      <% end %>
      </tr>
<% end %>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:02:28.620

我认为[in_groups_of](http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Array/Grouping.html#M000833)可能会帮助你：

```
<table>
<% @photos.in_groups_of(4, false) do |photos| %>
    <tr>
    <% photos.each do |photo| %>
        <td><%= image_tag photo["images"][4]["source"] %></td>
    <% end %>
    </tr>
<% end %>
</table> 
```

通过`false`作为第二个参数传递，最后一行可能不完整。如果你想显示一个空白图像，你可以传递一个空的照片对象（假设它的 URI 指向你的网站正在使用的空白图像）或者只是直接的 URI，如果照片数组只是一个 URI 数组。

# c# - 利用 ASP.NET MVC 和 Encoding.com 进行视频上传的正确工作流程

> ID：10357678
> 
> 赞同：2
> 
> 时间：2012-04-27T20:52:07.063
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

任何有使用云编码服务（如 Encoding.com 和 asp.net MVC）经验的人都可以为我指明正确的工作流程方向吗？

我会将我的视频存储在 Amazon S3 中，因此我想避免强迫用户上传到我的网络服务器，然后立即推送到 S3。

Encoding.com 已在此处提供此上传[脚本](http://www.encoding.com/how_can_i_use_your_.net_uploader_tool)

我想知道这是否是工作流程的正确开始，我将从这里去哪里？我想我可以得到这个结果并调用他们的 API 来开始处理。

只是寻找关于整个工作流程的一般信息/帮助，以及在所有这些发生时向用户展示的内容。

任何见解将不胜感激。

# c# - 在 mvc 应用程序中存储图像的最佳方法

> ID：10357680
> 
> 赞同：0
> 
> 时间：2012-04-27T20:52:34.093
> 
> 标签：c#, database, asp.net-mvc-3

我打算开发网络应用程序。存储房地产信息。

技术。详细信息：MSSQL、NHIBERNATE ORM、C#、ASP.NET MVC3

属性会有一些属性，比如 `Created, Updated, Id, Name, ... and IList<Photo> Photos.` 所以这里会有一对多的关系，一个属性可以有很多张照片。在照片实体的另一边，有参考`Property object`并将`ImageData and ImageMimeType`照片存储在数据库中。

在 apress book mvc3 pro 中建议使用此解决方案来存储图像，但我想知道当这些数据库因为存储在其中的图像而变得庞大时会发生什么。任何想法都是有帮助的。

您使用哪种方法？服务器上的数据库或文件路径？任何想法，链接都是有帮助的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:40:37.200

如[本文所述](http://blog.sqlauthority.com/2007/12/13/sql-server-do-not-store-images-in-database-store-location-of-images-url/)......

存储 URL 更容易添加、编辑、删除，数据库大小也减少，而不是以二进制格式存储图像。

# c# - 如何将 KindleGen 作为 dll 而不是 exe 运行？

> ID：10357682
> 
> 赞同：1
> 
> 时间：2012-04-27T20:53:02.150
> 
> 标签：c#, kindle, kindlegen

继续[使用 C# 以编程方式创建 Kindle 书籍？](https://stackoverflow.com/questions/10345954/create-kindle-book-programmatically-using-c/10346217)，我一直在联系我的虚拟主机，他们不允许在我的共享主机包上运行 exe。我无法获得 VPS，所以有没有人知道 KindleGen 的 dll 版本是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:34:32.673

我最终得到了一个 VPS 并在上面运行 kindlegen 实用程序。

# objective-c - Objective-C 有闭包，而 C 没有？

> ID：10357694
> 
> 赞同：0
> 
> 时间：2012-04-27T20:54:04.003
> 
> 标签：objective-c, c, closures

听说C没有闭包，今天看到了Objective-C中闭包的使用。Objective-C 支持闭包而不是 C 吗？

**更新：感谢所有答案。** 我也在网上找到了这个关于块的指南：http: [//pragmaticstudio.com/blog/2010/7/28/ios4-blocks-1](http://pragmaticstudio.com/blog/2010/7/28/ios4-blocks-1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:56:07.353

Apple 添加了`^`运算符以添加关闭支持。但是，它不依赖于 Objective-C，并且也可以在 C 和 C++ 中使用，只要您使用 Apple 的 GCC 或 LLVM 分支编译项目。这个新功能称为[块](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:01:42.497

C 具有应用程序定义的结构形式的闭包，其中包含函数指针和数据指针。问题在于许多/大多数采用回调指针（如`qsort`）的接口仅接受函数指针而不接受相应的数据指针，因此无法将闭包传递给它们。

顺便说一句，理论上可以在库级别添加闭包支持而无需编译器的帮助，即创建一个库，该库将返回指向闭包的函数指针。但是，库代码将相当依赖于实现/机器。它需要为可执行代码分配空间并生成代码以将固定指针值（保存为闭包对象的一部分）与其他参数一起传递给函数。

# javascript - 跨不同页面显示 JS var

> ID：10357702
> 
> 赞同：2
> 
> 时间：2012-04-27T20:54:49.777
> 
> 标签：javascript, html

这是一个困难的问题，因为我不知道如何措辞。我正在使用 HTML5 和 JS 制作一个购物车网站，我已经完成了大部分工作，但在一个重要方面需要帮助。

目前，我的“立即购买”按钮位于链接到 1 个页面的标签中，用户可以在其中输入他的信息并进行购买，该页面称为“结帐”。我希望这个“结帐”页面显示他想要购买的商品的价格。

例如）用户点击价值 10.00 美元的书并点击立即购买按钮。此按钮会将他发送到确认页面，该页面将显示填写表格，但该页面不显示他正在购买的商品的价格。

这就是我的问题所在。除了为每个产品制作不同的页面（我只有 9 个产品）之外，我想不出任何解决方案。

另外，如果不是很明显，我仍然是 JS 的初学者。在帮助我弄清楚如何在每个特定项目的“结帐”页面上显示价格而不创建 9 个单独的页面时，任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:02:14.097

如果我理解正确，您是在问如何在 Javascript 中存储一个可以被多个页面检索的变量。

执行此操作的规范方法是使用**cookie**。原生 cookie 库比较杂乱，所以我推荐使用 cookie 库，[像这样](http://code.google.com/p/cookies/)。

但是，由于您的问题已标记为`html5`，因此您可能愿意接受`sessionStorage`HTML5 解决方案，这比 cookie 简单得多。

```
sessionStorage.setItem("price", 100);
var price = sessionStorage.getItem("price"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:00:04.687

最好的方法是使用一些服务器端解决方案。客户端将他的表单发送到您的服务器，在那里对表单进行评估并呈现相应的 html 页面。

唯一的另一种方法是使用 cookie 或本地存储 - 但这相当难看。

您绝对应该阅读一些关于 php 和 mysql 的教程，但我将简要介绍如何实现这一点。

您在页面上提供这样的表格：

```
<form method="post" action="your-serverside-phpscript-that-processes-your-form.php>
   How many Ipads you wanna buy:<input type="number" name="ipads">
   <button type="submit">
</form> 
```

现在在服务器端，您的 php-script 可以评估表单。

所有表单域都存储在一个`$_POST`数组中。( $_POST["ipads"] ) 获取用户在表单中输入的值。您还不需要将这些值存储在数据库中。您评估表单值并使用相应的数据（总价）创建结帐页面。现在用户提交结帐表单，您再次处理并存储在数据库中。

我不会写下（对不起，太累了）这个服务器端部分是如何工作的，那里有很多 tuts，只需在 google 上搜索 php+mysql。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T21:02:22.437

由于您希望将这些数据全部保存在客户端，因此我鼓励您查看[Amplify.Store](http://amplifyjs.com/api/store/)。完全披露，我目前受雇于它背后的公司——但它很棒，而且免费。

保存数据很容易：

```
amplify.store( 'cart', { name: 'Book Title', price: 10.99 } ); 
```

要稍后访问它，您可以简单地调用：

```
amplify.store( 'cart' ); 
```

这将返回您的对象，您可以从中获取当前加载的所有产品。Amplify 将评估您的系统并确定最佳存储方法并使用它。这消除了你盘子里的所有猜测，让你做你想做的事。

请理解，虽然在客户端持久化数据很方便，但它绝不是安全的。在处理财务性质的交易和问题时，您应该始终将数字置于消费者手中。

通常，此类数据存储在服务器端、会话、数据库或两者的组合中。但是，如果您了解风险，并且您的模型允许这种类型的持久性，那么无论如何都可以随意将其用作解决方案。

# svn - SVN 覆盖 XML 文件的本地副本而不是显示冲突

> ID：10357706
> 
> 赞同：0
> 
> 时间：2012-04-27T20:55:06.837
> 
> 标签：svn, windows-7, tortoisesvn

我有一个 SVN 存储库来管理我们的项目，并且我们有一个已提交到基础的应用程序的配置文件，以便每个开发人员都可以获得格式。然后他/她需要修改该文件以匹配他们的系统设置。我最近提交了我的配置文件副本（错误地），在下一次更新时，其他所有人都自动更新到我的副本，而不是 SVN 声明冲突状态。下面一行特别吸引我：

```
<Address>http://192.168.1.136:8080/FeatureServer</Address> 
```

这是我的本地 IP 地址，每个开发人员都必须修改此行以将其指向他们的 IP 地址。一旦我提交了我的文件，SVN 现在只需在“更新”时将其他所有人的配置文件更新到我的副本。为什么呢？是不是因为这不是一个代码文件而 SVN 不知何故知道它？我确实在代码文件中遇到了冲突，所以我不认为 SVN 搞砸了。在这种情况下有什么特别之处？

我在 64 位机器上在 Windows 7 上使用 TortoiseSVN 1.7.4。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:18:03.763

事实证明，如果开发人员没有更改他/她的文件，他们将收到来自服务器的更新。当我更改副本然后进行更新时，确实会出现冲突。

# xml - 如何使用 E4X 创建包含子属性的父项的列表？

> ID：10357712
> 
> 赞同：0
> 
> 时间：2012-04-27T20:55:35.700
> 
> 标签：xml, actionscript-3, flash, e4x

我在使用 E4X 挖掘我的 XML 文档时无法获得想要的结果。例如，我想要使用下面的 XML 查找所有具有**d_type SW 的****d_locations**，然后创建一个包含代码和**hfloor**编号的所有 SW d_types 的列表 - 这是**d_type**之上的一个级别.

 ******所以为了说明这个例子，我想输出一个这样的列表：

**类型：SW**

**18楼：SW18.10N**

**15楼：SW15.W2**

**15楼：LB12**

**15楼：LB17**

**S2层：SWS2.3**

如何使用 E4X 做到这一点？非常感谢！

马蒂纳比

```
<?xml version="1.0" encoding="UTF-8"?>
<bldg>

<hfloor number="18">
<d_location d_code="SW18.10N" d_type="SW" description="Ferbludgit thingamabob">
        <d_image>3e_pic1</d_image>
    <d_image>3e_pic2</d_image>
        <d_image>3e_pic3</d_image>
        <d_image>3e_pic4</d_image>
        <d_image>3e_pic5</d_image>
        <d_video>3e_vid_1</d_video>
        <d_video>3e_vid_2</d_video>
        <d_video></d_video>
</d_location>
</hfloor>

<hfloor number="15">
<d_location d_code="W1" d_type="PSW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="SW15.W2" d_type="SW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="W3" d_type="LB" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
    <d_location d_code="LB12" d_type="SW" description="Screwed up whosamadingy">
        <d_image>media/lb15_12/LB-12 LOOKING NORTH.png</d_image>
    <d_image>media/lb15_12/LB-12 LOOKING SOUTH.png</d_image>
        <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12.png</d_image>
    <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12-2.png</d_image>
    <d_image>media/lb15_12/Post Demo from CITC018306365-2.png</d_image>
        <d_image>media/lb15_12/Rebuilt from CITC018306365.png</d_image>
    <d_image>media/lb15_12/WEI LB 12 level 15.png</d_image>
        <d_video>Video 1</d_video>
        <d_video>Video 2</d_video>
        <d_video>Video 3</d_video>
</d_location>

<d_location d_code="LB17" d_type="SW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="LB8" d_type="EB" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="W14" d_type="CB" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
</hfloor>

<hfloor number="S2">
<d_location d_code="W3" d_type="LB" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="SWS2.3" d_type="SW" description="Whacked flogatron">
        <d_image>media/sw_s2_3/CITC000155966.png</d_image>
    <d_image>media/sw_s2_3/CITC000155983.png</d_image>
        <d_image>media/sw_s2_3/CITC000155996.png</d_image>
        <d_image>media/sw_s2_3/CITC000156003.png</d_image>
        <d_image>media/sw_s2_3/Screen shot 2012-04-19 at 5.54.42 PM.png</d_image>
        <d_image>media/sw_s2_3/WEI SWS2.3.png</d_image>
        <d_video>lbs.6e vid</d_video>
        <d_video></d_video>
        <d_video></d_video>
</d_location>
<d_location d_code="LB17" d_type="ES" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="LB8" d_type="SW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
</hfloor>

</bldg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:59:48.530

你需要在两个过程中做到这一点。首先收集 d_location 节点。这将返回一个 XMLList。然后对于它的每个元素，您会找到父节点，即 h_floor 节点，其中包含您想要的楼层代码。

```
var xml:XML = <bldg><hfloor number="18">
    <d_location d_code="SW18.10N" d_type="SW" description="Ferbludgit thingamabob">
        <d_image>3e_pic1</d_image>
        <d_image>3e_pic2</d_image>
        <d_image>3e_pic3</d_image>
        <d_image>3e_pic4</d_image>
        <d_image>3e_pic5</d_image>
        <d_video>3e_vid_1</d_video>
        <d_video>3e_vid_2</d_video>
        <d_video></d_video>
    </d_location>
</hfloor>

<hfloor number="15">
    <d_location d_code="W1" d_type="PSW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="SW15.W2" d_type="SW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="W3" d_type="LB" description="Broken fetzer valve">
            <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="LB12" d_type="SW" description="Screwed up whosamadingy">
        <d_image>media/lb15_12/LB-12 LOOKING NORTH.png</d_image>
        <d_image>media/lb15_12/LB-12 LOOKING SOUTH.png</d_image>
        <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12.png</d_image>
        <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12-2.png</d_image>
        <d_image>media/lb15_12/Post Demo from CITC018306365-2.png</d_image>
        <d_image>media/lb15_12/Rebuilt from CITC018306365.png</d_image>
        <d_image>media/lb15_12/WEI LB 12 level 15.png</d_image>
        <d_video>Video 1</d_video>
        <d_video>Video 2</d_video>
        <d_video>Video 3</d_video>
    </d_location>

    <d_location d_code="LB17" d_type="SW" description="Broken fetzer valve">
            <d_image>3s_pic1</d_image>
    </d_location>

    <d_location d_code="LB8" d_type="EB" description="Broken fetzer valve">
            <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="W14" d_type="CB" description="Broken fetzer valve">
            <d_image>3s_pic1</d_image>
    </d_location>
</hfloor>

<hfloor number="S2">
    <d_location d_code="W3" d_type="LB" description="Broken fetzer valve">
            <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="SWS2.3" d_type="SW" description="Whacked flogatron">
        <d_image>media/sw_s2_3/CITC000155966.png</d_image>
        <d_image>media/sw_s2_3/CITC000155983.png</d_image>
        <d_image>media/sw_s2_3/CITC000155996.png</d_image>
        <d_image>media/sw_s2_3/CITC000156003.png</d_image>
        <d_image>media/sw_s2_3/Screen shot 2012-04-19 at 5.54.42 PM.png</d_image>
        <d_image>media/sw_s2_3/WEI SWS2.3.png</d_image>
        <d_video>lbs.6e vid</d_video>
        <d_video></d_video>
        <d_video></d_video>
    </d_location>
    <d_location d_code="LB17" d_type="ES" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
    </d_location>
    <d_location d_code="LB8" d_type="SW" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
    </d_location>
</hfloor> 
```

;

然后你创建这个函数，它将执行两步过程：

```
function find(type:String) {
    var D_LOCATIONS:XMLList = (xml..d_location.(@d_type==type));
    for each (var loc:XML in D_LOCATIONS) {
        trace("Floor:", loc.parent().@number, loc.@d_code );        
    }
} 
```

像这样称呼它

```
find("SW"); 
```******

# user-agent - 这个用户代理是什么？（……Applex*0TV……）

> ID：10357714
> 
> 赞同：4
> 
> 时间：2012-04-27T20:55:46.377
> 
> 标签：user-agent

这非常奇怪，所以我希望有人可以在这里帮助我。

我看到一个用户代理使用我无法识别的用户代理 ID 访问我们的网站。此外，搜索网络和所有用户代理搜索网站都被证明是徒劳的。如果这是一些我只看到几十次的深奥 UA，我不会在意，但我每天看到的次数在 130,000 到 200,000 次之间。

用户代理始终是这种模式的变体：

AppleCoreMedia/1.0.0.9A336a（Applex*0TV；U；CPU OS 5_0，如 Mac OS X；en_us）

关键的共同点是与“Applex*0TV”一起使用的 AppleCoreMedia 库——我的直觉说这是 Apple iTV 的某种变体，除了 iTV 非常清楚地将自己标识为“AppleTV”......

……所以，这*是*什么？任何帮助将不胜感激....

# android - 自定义 Google Maps API

> ID：10357715
> 
> 赞同：0
> 
> 时间：2012-04-27T20:55:49.657
> 
> 标签：android, mobile, google-maps-markers, google-maps-mobile

有谁知道如何：

1) 使谷歌地图不能缩放？使它具有固定的缩放大小并且用户无法更改它？

2) 是否让地图 API 加载我选择的图片并将用户当前位置的小蓝点覆盖在上面？

这就是我想要做的，我想要一张世界的自定义图片（我在 Photoshop 或 w/e 中创建的，它将是 .jpeg、.png 或任何可以工作的文件格式）图片世界将是“艺术”，我只想让谷歌地图覆盖你在世界上的那个小蓝点。例如，如果您在纽约州纽约市，您会看到世界图片，蓝点位于图片上的纽约。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:57:27.250

关于您的第二个问题：听起来您实际上想用您自己创建的图像替换 Google 地图图块。据我所知，Maps API 无法做到这一点。您可以通过将自己的创建作为叠加层添加到地图上来潜在地破解某些东西，但这可能无法提供您正在寻找的结果，特别是如果您希望用户仍然能够平移/拖动地图。

相反，您可能想看看[osmdroid](http://code.google.com/p/osmdroid/)（Android 开放街道地图）项目。它们确实支持通过[ModularTileProviderArchitecture加载您自己的图块](http://code.google.com/p/osmdroid/wiki/ModularTileProviderArchitecture)加载您自己的图块。它可能会给你更多的自由和灵活性，但对于你所追求的可能是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:36:26.270

您应该能够按如下方式控制地图：

map = (MapView) findViewById(R.id.mapview);

map.setBuiltInZoomControls(false);

至于覆盖图像，您需要创建一个图像布局文件（在 XML 中），然后将其膨胀到地图的顶部。本教程向您展示了扩展布局并将其添加到现有视图的基础知识：

[http://www.mysamplecode.com/2011/10/android-dynamic-layout-using-xml-add.html](http://www.mysamplecode.com/2011/10/android-dynamic-layout-using-xml-add.html)

要定位膨胀的布局（您的图像），您需要使用 LayoutParams (http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html) 将新视图的位置设置到地图。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:53:32.380

我知道 OSM 既时髦又酷，但 OP 询问了 Google 地图——Google Maps API 文档（[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)）中很容易回答这个问题。

Google Maps API 多年来一直支持自定义地图。我认为您可以编辑他们的第一个“ImageMapType”（[https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes)）示例来解决您的问题。

在您的情况下，您可以将“maxZoom”和“minZoom”字段设置为您想要为其创建艺术品的任何缩放。使用“mapOptions”字典取消缩放控制。您需要将您的作品切割成图块，并将其“getTileUrl”函数替换为返回平铺图像的函数。

# javascript - 如何将 JavaScript 代码嵌入 Google 协作平台页面？

> ID：10357716
> 
> 赞同：11
> 
> 时间：2012-04-27T20:55:49.740
> 
> 标签：javascript, google-sites

我有一个 Google 协作平台页面。如何在其中嵌入 JavaScript 代码，而无需实现小工具并在其中添加 JavaScript 代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-09T23:21:35.600

**您可以运行一些 JavaScript 代码，但是**在页面编辑期间它会自动包装到一个琐碎的小工具中，并且在渲染页面时它将在 iframe 内执行，并且**无法与主页面的 DOM 交互**- 这是被阻止的通过浏览器和 Google 网站的安全机制。

因此，如果您不想实现小工具，您的脚本所做的任何事情都会在其 iframe 的沙箱中执行，其外部大小是在页面设计时定义的。

即使您在其中实现了一个带有脚本的小工具，它也将在同一个 iframe 沙箱中运行。但是小工具有一些优点，例如访问 API，允许动态更改 iframe 的大小，以及其他一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-06T14:31:46.017

参考[*这篇文章*](http://blog.ncce.org/2013/12/10/put-javascript-into-google-sites/)你需要创建一个可以从服务器访问的Google Gadget文件来共享文件并编写以下代码：

```
<Module>
<ModulePrefs title="Custom Gadget"/>
<Content type="html">
<![CDATA[
<script src="PUT YOUR SCRIPT HERE"></script>
]]>
</Content>
</Module> 
```

将文件另存为*Name.xml*并将其上传到具有公共访问权限（不受密码保护）的文件托管服务。然后插入如下链接：

> 插入 > .. 更多小工具 > 通过 URL 添加小工具

[![在此处输入图像描述](../Images/b455eb36408e1640071ee264ef17ebf3.png)](https://i.stack.imgur.com/6BDgg.png) 将 url 复制到保存的 .xml Google Gadget 代码后，您将通过您自己的自定义 Google Gadget 嵌入 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-14T20:54:12.973

您可以使用该`HTML Box`小工具，您可以在菜单中找到它：

![在菜单中选择 HTML 框。](../Images/d2f7c4abdc091f773e2d03ddcfa0b5bd.png)

它允许您[插入自定义 HTML、CSS 和 Javascript](https://support.google.com/sites/answer/2500646?hl=en&ref_topic=1046075)。

注意事项：

*   您的 HTML 加载到`<iframe>`,
*   您的代码**无法**与`HTML Box`
*   目前`HTML Box`不支持`<iframe>`，
*   您的脚本无法创建任何`<script>`,`<img>`或`<a>`标签,

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-08T05:13:30.873

谷歌更新了嵌入 HTML 和 Javascript 的机制。

请参阅[https://gsuiteupdates.googleblog.com/2017/12/embed-html-and-javascript-in-new-google-sites.html](https://gsuiteupdates.googleblog.com/2017/12/embed-html-and-javascript-in-new-google-sites.html)。

它仍然在 iframe 中被沙盒化，具有@Serge Populov 的回答中提到的限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T22:01:47.190

您可以在此处阅读有关如何执行此操作的 Google 文档[http://support.google.com/sites/bin/answer.py?hl=en&answer=2500646&ctx=cb&src=cb&cbid=-11zqfs2rw8yfe&cbrank=0](http://support.google.com/sites/bin/answer.py?hl=en&answer=2500646&ctx=cb&src=cb&cbid=-11zqfs2rw8yfe&cbrank=0)

# php - Zend 表单验证只显示一个错误

> ID：10357719
> 
> 赞同：1
> 
> 时间：2012-04-27T20:55:58.537
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我希望为表单设置一条错误消息，但仍会验证每个字段。

该表格是一个包含 10 个问题的调查。他们每个人都以相同的方式验证（`->setRequired(true)`）。所以基本上，我只是为了验证每个问题都有答案，如果其中一个问题没有得到回答，则会在表格顶部显示一条消息。

我尝试了几种解决方案并得到了相同的结果。我的错误已添加到表单中，而且所有单个错误也会显示。

这是我最近的一次拍摄：

```
public function isValid($data)
{
    $errors = 0;

    parent::isValid($data);

    foreach ($this->getElements() as $element) {

        if ($element->hasErrors()) {

            $element->clearErrorMessages();

            $element->setErrors(array());

            $errors++;
        }
    }

    if (count($errors) > 0) {
        $this->setErrorMessages(array('Please answer all questions before proceeding.'));
        return false;
    }

    return true;
} 
```

任何人都可以解释为什么这不能像我预期的那样工作吗？必须有一种更优雅的方式来做到这一点。

编辑：

这就是我最终的结果。由于我的表单元素是根据一系列问题动态填充的，因此可能与大多数情况有所不同，但应该适用一般的想法。通常，您可以只计算单选元素的数量，但在我的情况下，与其循环遍历元素并检查类型，计算我的问题数组更容易。

```
public function isValid($data)
{
    $valid_values = 0;

    parent::isValid($data);

    foreach ($this->getValues() as $value) {
        if ($value >= 1 && $value <= 10) {
            $valid_values++;
        }
    }

    if ($valid_values <> count($this->_questions)) {
        $this->setErrorMessages(array('Please answer all questions before proceeding.'));
        return false;
    }

    return true;
} 
```

仍然不确定这是最优雅的方式，但它适用于我的特殊情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:03:56.240

在我看来，如果你真的每个字段只有一个验证器，为什么不在控制器中管理它，而不是覆盖 isValid ？

`if ($form->isValid($_POST)) { /* success */ } else { /* error as at least one field is missing */ }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:22:05.023

您可以通过在创建表单元素时从表单元素中移除“错误”装饰器来移除错误元素。这将验证所有元素，但不会产生任何错误消息。但是您必须不能在表单元素中显示错误。您必须找到其他方法来反馈错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:46:18.023

您可以从每个元素中删除`Error`装饰器（因此不会显示这些错误）。然后将自定义装饰器添加到检查的表单（！）中`$form->isValid()`（尽管在装饰器本身中，返回装饰器所附加的实体会`$this->getElement()->isValid();`有点令人困惑`getElement()`）然后呈现您的单个消息（可能在您的表单上方，使用默认位置`PREPEND`）。

听起来您已经处理了第二部分（在表单级别呈现您的单个消息），因此只需`Error`从元素本身中删除装饰器就可以为您完成工作。

# ios - Three20 非常奇怪的 iOS 方向问题

> ID：10357726
> 
> 赞同：0
> 
> 时间：2012-04-27T20:56:32.173
> 
> 标签：ios, interface-builder, orientation, three20

这是我见过的 iOS 开发中最奇怪的问题之一。我对 iOS 开发比较陌生，所以如果我遗漏了一些明显的东西或者我的术语不完全正确，我深表歉意。如果您需要澄清，请在评论中告诉我，我会相应地编辑我的问题。

**问题**

我正在使用 Three20，所以这可能与它有关。但我有一个“主视图”，它基本上是一系列链接到其他视图的图像（如下图所示）。如果我从纵向视图开始，一切都很好。

![在此处输入图像描述](../Images/d98f0d03651e7ba533502897b5447c3c.png)

下一个视图是表格视图，如下所示：

![在此处输入图像描述](../Images/1ede862adea157bb05903a1381016ae0.png)

耶！我可以旋转，世界一切正常。**但是**如果我回到那个主视图，旋转到风景，然后去这个桌面视图，世界就会中断。

![在此处输入图像描述](../Images/cd476e7ab8470cb2c831e2a20b8080c9.png)

您会看到现在我的桌子右侧添加了一个随机空间。我不知道它是从哪里来的，又是怎么来的。这是我的`Controller.m`文件：

```
#import "FriendTabsController.h"
#import "MyAppApp.h"
#import "JohnDoeManager.h"

@implementation FriendTabsController

@synthesize innerView, segmentedControl, innerController, friendsController, friendRequestsController;

- (void)addBottomGutter:(UIViewController*)controller {
  if ([controller isKindOfClass:[TTTableViewController class]]) {
    TTTableViewController* tableViewController = (TTTableViewController*)controller;
    tableViewController.tableView.scrollIndicatorInsets = UIEdgeInsetsMake(0,0,50+44,0);
    tableViewController.tableView.contentInset = UIEdgeInsetsMake(0,0,50+44,0);
  }
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    
    return YES;
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
  [super viewDidLoad];

  self.title = @"Friends";
  self.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque;
  self.navigationController.navigationBar.tintColor = nil;

  friendsController = [[FriendsController alloc] init];
  friendRequestsController = [[FriendsController alloc] init];
  ((FriendsController*)friendRequestsController).friendRequests = YES;

  [self addBottomGutter:friendsController];
  [self addBottomGutter:friendRequestsController];

  innerController = friendsController;
  [innerView addSubview:innerController.view];
  [innerController viewDidLoad];

    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    [self loadBannerAd:(orientation)];

}
-(void) loadBannerAd:(UIInterfaceOrientation)orientation{ 

  MainLayer *mi = [MainLayer getInstance];
    if (mi.useJohnDoeAds) {
    [[JohnDoeManager sharedInstance] setCurrentViewController:self];
    [mi.JohnDoeBanner.view removeFromSuperview];

        if(orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
            // This is a portait ad
            if ([[MyAppUtils getCurrentDevice] isEqualToString:@"iphone"]) {
                [mi.JohnDoeBanner setFrame:CGRectMake(0, 410-44, 320, 50)];
            }else{
                [mi.JohnDoeBanner setFrame:CGRectMake(0, 1024-44-90-20, 768, 90)];
            }                
        } else {
            // Landscape
            if ([[MyAppUtils getCurrentDevice] isEqualToString:@"iphone"]) {
                [mi.JohnDoeBanner setFrame:CGRectMake(0, 320-44-58, 410, 50)];
            }else{
                [mi.JohnDoeBanner setFrame:CGRectMake((1024-768)/2, 768-44-90-20, 768, 90)];
            }              
        }

        [self.view addSubview:mi.JohnDoeBanner.view];
          [mi.JohnDoeBanner rollOver];           
  }
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [self loadBannerAd:(toInterfaceOrientation)];
}

- (IBAction)didChangeSegment:(UISegmentedControl *)control {
  if (innerController) {
    [innerController viewWillDisappear:NO];
    [innerController.view removeFromSuperview];
    [innerController viewDidDisappear:NO];
  }

  switch (control.selectedSegmentIndex) {
    case 0:
      innerController = friendsController;
      self.title = @"Friends";

      break;
    case 1:
      innerController = friendRequestsController;
      self.title = @"Requests";

      break;
  }
  [innerController viewWillAppear:NO];
  [innerView addSubview:innerController.view];
  [innerController viewDidAppear:NO]; 
}

- (void)viewWillAppear:(BOOL)animated {
  [super viewWillAppear:animated];
  [innerController viewWillAppear:animated];
  self.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque;
  self.navigationController.navigationBar.tintColor = nil;
}

- (void)viewDidAppear:(BOOL)animated {
  [super viewDidAppear:animated];
  [innerController viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated {
  [innerController viewWillDisappear:animated];
  [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated {
  [innerController viewDidDisappear:animated];
  [super viewDidDisappear:animated];
}

- (void)didReceiveMemoryWarning {
  [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
  [friendsController release], friendsController = nil;
  [friendRequestsController release], friendRequestsController = nil;
  [super viewDidUnload];
}

- (void)dealloc {
  [super dealloc];
}

@end 
```

那么有人可以告诉我发生了什么吗？帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:42:42.753

您需要将 WantsFullScreenLayout 属性设置为 YES。

在你的初始化方法集中

```
self.wantsFullScreenLayout = YES; 
```

这将解决您的问题。

# extjs - 从绑定到列表的商店中删除记录时出现空错误

> ID：10357733
> 
> 赞同：1
> 
> 时间：2012-04-27T20:56:59.350
> 
> 标签：extjs

我有一个绑定到数据存储的列表。当我从该商店删除记录时，出现错误

```
dom.parentNode.removeChild(dom);

Ext.define.afterRemove (ext-all-debug.js:23908)
Ext.define.removeDocked (ext-all-debug.js:33183)
Ext.define.hideVerticalScroller (ext-all-debug.js:77741)
Ext.define.determineScrollbars (ext-all-debug.js:77651)
Ext.define.onViewRefresh (ext-all-debug.js:77869)
call (ext-all-debug.js:10472) 
```

因为 dom.parentNode 为空。dom 对象是一个 gridscroller，事件似乎是作为一些标准的延迟布局刷新发生的。

基本上，这发生在我从绑定到列表的商店中删除记录之后。

```
store.remove(rec);
store.sync(); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:17:28.327

好吧，它看起来像是 4.0.7 版本中的一个错误，因为 4.1 有效。

# java - 0.999...乘法时可以四舍五入为1吗？

> ID：10357734
> 
> 赞同：0
> 
> 时间：2012-04-27T20:57:01.950
> 
> 标签：java, actionscript-3, math, floating-point

将非常接近 1 的浮点数与 int > 0 相乘时，是否可以将其解释为 1。

也就是说，如果 Math.random() 返回其可能的最高结果（比 1.0 低 1 步），将

```
(int)(Math.random() * 8) 
```

是 8 还是 7？

举个实际的例子，这个经常使用的构造能否给出索引越界错误：

```
someArray[(int)(Math.random() * someArray.length)]; 
```

我对 Java 和 ActionScript 3 的答案特别感兴趣，但我想它们都使用相同的浮点运算规则，并且任何平台的答案都会很有用。

更新：虽然我已经接受了一个答案，但我仍然希望确认这在 ActionScript 3 中也不会出错，因为一位同事报告说他曾经看到它出错是部分促使我提出这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:03:08.773

因为 8 是 2 的幂，所以将浮点数乘以它永远不会增加或删除值的精度，除非溢出。乘以其他数字，特别是浮点数（除了 2 的负幂，例如 0.25、0.0625 等），会降低精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:14:35.750

在 java (http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html) 中使用 Math.random，该值可以大于或等于 0.0 且小于 1.0。

使用值为 0.999999 的测试， (int)(Math.random() * 8) 的值为 8。您可以使用下一个代码测试实验

```
public static void main(String args[]) {
        for (int i = 0; i <= 100; i++) {
            double frac1=0.999999999999999999 ;
            double frac=Math.random() ;
            int integer=(int) (frac*8);
            int integer1=(int) (frac1*8);
            System.out.println( integer+"-"+frac);
            System.out.println( integer1+"-"+frac);
        }
    } 
```

但是 Math.random()*8 可以返回其他值，例如 1、2、3、4、5、7 或 6，这取决于 Math.random 返回的值。您可以运行示例代码对此进行测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:15:56.827

实际上，快速详尽的搜索可以表明对于任何具有浮点数的 32 位整数都不会发生这种情况：

```
public static void main(String[] args) {
    int repr = Float.floatToIntBits(1f) - 1;
    float val = Float.intBitsToFloat(repr);
    for (long i = 1; i <= -(long)Integer.MIN_VALUE; i++) {
        if ((int) (val * i) == i) {
            System.out.println("FOUND VALUE: " + i);
        }
        if ((int) (val * -i) == -i) {
            System.out.println("FOUND VALUE: " + -i);
        }
        if (i % 100000000 == 0) {
            System.out.println("Done: " + (double)i/Integer.MAX_VALUE);
        }
    }
    // nothing printed
} 
```

# architecture - Symfony2 Doctrine2 过滤器和规则的正确实体设计

> ID：10357735
> 
> 赞同：3
> 
> 时间：2012-04-27T20:57:03.053
> 
> 标签：architecture, symfony, doctrine-orm

所以我想做以下事情，我真的只是在寻找关于如何设计它的建议。

*   我有`Filter`可以在某些实体类型上运行的 s
*   `Filter`必须`Rule`定义自己的行为
*   `Filter`s 处理实体，使用它们的规则，并返回一个布尔值
*   作为一个具体的例子，我可能想过滤掉给定字段上的某些正则表达式被拒绝，我可以为它定义规则。我也可以有不同的规则，在同一个过滤器中使用简单的前缀匹配。

所以我想出了以下内容

```
interface FilterInterface
{
    /**
     * Load the rules for this filter
     */
    function loadRules();

    /**
     * Filter an entity in an optional context
     * @param mixed $entity Should return true for $this->supportsEntity($entity)
     * @param array $context Other information
     * 
     * @return boolean True if the $entity passes this filter
     */
    function filter($entity, $context = array());

    /**
     * Check if filter supports the entity type
     * @param mixed $entity
     * 
     * @return boolean true if this Filter can be run for that entity type
     */
    function supportsEntity($entity);
} 
```

然后我打算做：

```
class ImageFilter implements FilterInterface 
```

这将从数据库中加载规则并实现过滤器。

所以最初我虽然有一个像

`FilterRule`：

*   范围（枚举类型来定义哪个过滤器使用它）
*   类型（可以有不同类型的规则，比如我提到的正则表达式与前缀）
*   值（字符串，取决于规则的类型）

并且会在范围设置为某个常量的地方`ImageFilter`加载s 。`FilterRule`然后`ImageFilter`会做繁重的检查过滤器类型并将其应用于实体，一个接一个。以下伪代码演示了这一点。

```
public function filter($entity)
{
    foreach ($this->rules as $rule) {
        switch($rule->getType()) {
            case RULE_TYPE_REGEX:
                $this->doRegex();
            break;
            case RULE_TYPE_PREFIX:
                $this->doPrefix();
            break;
        }
    }
} 
```

但后来我想知道，该实体是否应该对上述`switch`区块负责？所以它会变成这样：

```
public function filter($entity)
{
    foreach ($this->rules as $rule) {
        $rule->process($entity);
    }
} 
```

这对我来说似乎更干净，`Filter`只要“范围”正确，它就不关心新规则以及如何处理它们。 **但我的印象是实体应该是简单的 POPO**，所以看起来这种逻辑是一种不好的模式（但我从来没有 100% 确定实体应该真正做多少）。

我还考虑过使用[继承映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/inheritance-mapping.html)，因此每个`Rule`“类型”都可以是不同的类，并且它的逻辑非常简单（最多只有几行）。最后，我在想也许不同类型的`Rule`应该以某种方式使用组合来产生“行为”或可以完成实际工作的东西......

所以总结一下，这是我目前的想法：

1.  `Filter`做所有的工作检查类型`Rule`并采取相应的行动。`Rule`只是一个“愚蠢”的实体来保存一些字符串
2.  `Rule`完成检查自己的类型并对给定实体做某事的所有工作。现在`Rule`实体有点“胖”但它隐藏了实现`Filter`并且`Filter`不需要更改以添加新`Rule`类型
3.  `Rule`使用继承来做上述，实际上是相同的想法，但没有更多的`switch`声明
4.  2\. 或 3\. 但`Rule`为每种类型实例化不同的“行为”对象（不真正使用依赖注入似乎很糟糕，封装行为似乎是一个很好的设计）
5.  结合 1\. 和 4\. 这样就`Filter`可以得到正确的行为`Rule`（现在可以像“行为”工厂一样使用依赖注入）

我想我越想越倾向于最后几个选项，但我不知道这方面的最佳实践。我确信这是一个相对常见的例子，所以我希望得到一些关于采取哪个方向的意见。（抱歉这么长的问题，希望它足够完整，可以回答）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T12:53:06.143

我从你在这里给出的解释中得到的是你有三个不同的东西-`Rules`和。所以，我会把这三个分开。`Filters``RuleProcessing`

`Rules`将只是定义过滤器的行为。

`Filters`将加载您想要做的规则和其他检查。

并将`Rule Processing`单独保存将取`$entity`并`$rule`返回处理后的结果。那么你会得到这样的东西：

```
public function filter($entity)
{
    foreach ($this->rules as $rule) {
        RuleProcessing->processRule($entity, $rule);
    }
} 
```

（如果我的理解在这里不正确，请告诉我。）

# java - 休眠列表警告；

> ID：10357737
> 
> 赞同：0
> 
> 时间：2012-04-27T20:57:07.430
> 
> 标签：java, hibernate, list

我的 Hibernate 类上有以下代码：

```
public List<Something> getSomethingList(Integer[] ls){
    String sql = "FROM SOMETHING WHERE IDSOMETHING IN (:ls)";

    return this.getSession().createQuery(sql).setParameterList("ls", ls).list();
} 
```

我在返回线上有一个警告。警告如下：

```
Type safety: The expression of type List needs unchecked conversion to conform to List<Something> 
```

我知道这不是一个大问题，但我该如何解决这个警告？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:02:22.237

第一个选项：这个：

```
 List<Permission> permissions = Collections.checkedList(Permission.class, this.getSession().createQuery(sql).setParameterList("ls", ls).list()); 
```

应该是这样的：

```
List<Permission> permissions = Collections.checkedList(this.getSession().createQuery(sql).setParameterList("ls", ls).list(),Permission.class); 
```

第二种选择：

采用：

```
 @SuppressWarnings("unchecked") 
```

就个人而言，我喜欢第二种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-01T06:04:21.363

**防止 Eclipse 为不可避免的问题生成警告**

在 Eclipse 中，转到 Window>Preferences>Java>Compiler>Errors/Warnings 并在 Generic 类型下，选中复选框
`Ignore unavoidable generic type problems due to raw APIs`

这将关闭针对类似问题的不必要警告，例如上述不可避免的问题。

# wpf - ContentTemplateSelector 不会重新评估绑定更改

> ID：10357743
> 
> 赞同：5
> 
> 时间：2012-04-27T20:57:46.040
> 
> 标签：wpf, datagrid, contenttemplateselector

**前言**

我创建了两个不同的数据 DataTemplates 以允许更快地加载我的数据网格单元格。一个基本上是文本块，另一个是更昂贵的 UserControl。在加载时，数据模板选择器决定它是否需要加载便宜还是更昂贵的控件，这将首次加载/性能从约 12 秒降低到约 2 秒，因为大多数单元格不需要复杂且与其他模板相比，加载一个简单模板所需的时间几乎没有。

无论如何，它在负载时效果很好。但是，当我更改下面的数据时，这会引发属性更改并且应该强制 DataTemplateSelector 再次调用 SelectTemplate() 以重新评估要使用的数据模板 - 好吧，它没有。

有趣的是，在上述失败之后，当我单击一个单元格时，它会调用 SelectTemplate() 并在需要时翻转 DataTemplate。

**代码**

```
<DataGrid>
 .....
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ContentControl Content="{Binding Intervals[0].Self}" 
                      ContentTemplateSelector="{StaticResource TxtVsExpensiveCell_TemplateSelector}"/>
         </DataTemplate>
       </DataGridTemplateColumn.CellTemplate> 
```

请注意，由 DataTemplate Selector 选择的更复杂的控件可以完美地工作，因为我在没有 DataTemplateSelector 的情况下对其进行了测试。另外，关于 Binding Intervals[0].Self - self 是一个返回“this”的属性，这是我绑定到的对象的引用，唯一的原因是（当 Self 被提升时）到强制重新评估 DataTemplate。显然这并不完全奏效。

**问题**

如何强制数据模板重新评估？

**支持代码***

这是我的资源字典（没什么花哨的）

```
<DataTemplate x:Key="SimpleTemplate">
    <TextBlock DataContext="{Binding}"/>
</DataTemplate>

<DataTemplate x:Key="ComplexTemplate">
    <Views:ComplexCell DataContext="{Binding}"/>
</DataTemplate>

<Views:MyTemplateSelector
    x:Key="TxtVsExpensiveCell_TemplateSelector"
    SimpleTemplate="{StaticResource SimpleTemplate}"
    ComplexTemplate="{StaticResource ComplexTemplate}"/> 
```

显然我有 MyTemplateSelector 类覆盖 SelectTemplate 并且工作得很好......

# javascript - 如何通过向上移动到地址栏来检测鼠标离开页面？

> ID：10357744
> 
> 赞同：4
> 
> 时间：2012-04-27T20:57:52.393
> 
> 标签：javascript, jquery, jquery-events

我创建了一个 jQuery 事件，当访问者离开页面时会弹出一个对话框。我正在使用 e.pageY 来检测鼠标位置。当鼠标在 Y: 小于 2 时，弹出对话框。问题是，当我向下滚动页面并决定离开页面时，弹出窗口不显示，因为鼠标不在 Y：小于 2。我该如何解决这个问题。即，当我离开页面并将鼠标悬停在地址栏上时，尽管向下滚动，仍会出现一个弹出窗口。

这是我的代码和底部的工作示例。

```
var mouseLastYPos = null;
$(document).mousemove(function(e){ 
    if(mouseLastYPos){ 
        if (e.pageY < mouseLastYPos && e.pageY <= 2){

           $('#mystuff').show();

        }
    }
    mouseLastYPos = e.pageY;
});​ 
```

工作示例：http: [//jsfiddle.net/bmHbt/](http://jsfiddle.net/bmHbt/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-28T13:20:17.697

老问题，但我想我也应该分享我的代码，也许有人觉得它有用。

```
$(function(){
    var mouseY = 0;
    var topValue = 0;
    window.addEventListener("mouseout",function(e){
        mouseY = e.clientY;
        if(mouseY<topValue) {
            alert("Do something here!!!");
        }
    },
    false);
}); 
```

[JSFIDDLE 链接](https://jsfiddle.net/e0wft7p4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T17:00:30.047

这是我的实现：http: [//jsfiddle.net/fq8HT/](http://jsfiddle.net/fq8HT/)

它还试图通过包括上次触发 mousemove 之间的差异来解释某人移动鼠标的速度非常快。

```
(function() {

  var current_scroll = 0;
  var last_mouse_y = null;

  $(document)
    .scroll(function() {
      current_scroll = $(this).scrollTop();
    })
    .mousemove(function(e) {
      var speed = last_mouse_y - e.pageY;
      var success_val = e.pageY - speed;

      if (success_val < last_mouse_y && success_val <= current_scroll) {
        $('#stop-leaving').show();
      } else {
        $('#stop-leaving').hide();
      }

      last_mouse_y = e.pageY;
    });

})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:08:50.373

不确定这将是一个有效的功能。但无论如何，您可能必须跟踪页面的滚动位置以及其他一些变量，但从中您应该能够检测浏览器窗口顶部的位置并使其更好地工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T21:43:28.210

我相信没有可靠的方法可以知道鼠标离开了文档。如果您移动鼠标的速度足够快，那么您将什么也看不到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-01T22:06:02.923

这是一个没有 jQuery 的解决方案，应该适用于桌面浏览器上的 IE8+，当用户将鼠标指向页面顶部时会触发：

```
document.addEventListener('mouseleave', function(e) {
  // position of the mouse when it leaves the document, we only care about the top of the document so we use `e.pageY`
  console.log('e.pageY: ', e.pageY);

  // get the position of where the page is scrolled to. 
  console.log('document.body.scrollTop: ', document.body.scrollTop);

  console.log(e.pageY - document.body.scrollTop);

  var isLeaving = e.pageY - document.body.scrollTop;

  // you can adjust this number value to compensate if the user leaves
  if (isLeaving <= 50) {
    // do something here!
  }
}); 
```

此代码段的一般目的是检测用户退出页面的意图，然后*执行*诸如触发模式之类的操作。

```
document.addEventListener('mouseleave', e => {
  var isLeaving = e.pageY - document.body.scrollTop;

  if (isLeaving <= 50) {
    // do something ...
    let elms = document.querySelectorAll('.target');
    for (var i = elms.length - 1; i >= 0; i--) {
      elms[i].innerHTML = 'Welcome Back!'
    }
  }
});
```

```
 html, body, section {
    min-height: 100vh;
    min-width: 100vw;
    display: flex;
    flex-flow: column nowrap;
    justify-content: center;
    align-items: center;
  }

  h1 {
    text-align: center;
  }
```

```
<section>
  <h1 class="target">Get ahead and try to leave</h1>
</section>

<section>
  <h1 class="target">Get ahead and try to leave</h1>
</section>

<section>
  <h1 class="target">Get ahead and try to leave</h1>
</section>

<section>
  <h1 class="target">Get ahead and try to leave</h1>
</section>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-07T22:29:42.193

我知道这是可以做到的。这是一个工作演示： http://modules.xcart-service.com/?target= [exit_offers_demo](http://modules.xcart-service.com/?target=exit_offers_demo)

这满足了 OP 的所有要求 - 您可以向下滚动，它的行为仍然相同。如果有人能阐明它是如何实现的，那就太好了……

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-29T08:31:51.467

**你可以使用它：**

```
(function($){
    var topValue = 50;
    var mouseY = 0;
    jQuery( "body" ).on('mousemove',function( event ) {
        mouseY = event.clientY;
        if(mouseY <= topValue) {

            alert('ok ');
        }

    });

})(jQuery); 
```

另一个这里最适合你：

```
$(document).bind("mouseleave", function(e) {
        if (e.pageY - $(window).scrollTop() <= 1) {    
            // $('#BeforeYouLeaveDiv').show();
            alert('ok ');
            $(document).unbind("mouseleave");
        }
    }); 
```

# jquery - 如果替代文本为空白，则禁止显示幻灯片标题

> ID：10357751
> 
> 赞同：0
> 
> 时间：2012-04-27T20:58:52.707
> 
> 标签：jquery, slideshow, caption

我正在使用一个简单的 jQuery 幻灯片，它通过使用图像标题和替代文本中的文本在图像上创建标题。它很好用，但是当幻灯片中的图像没有标题/替代时，我不希望它显示任何内容。

请参阅此处的示例代码：http: [//jsfiddle.net/qWZWJ/24/](http://jsfiddle.net/qWZWJ/24/)

我基本上需要添加一个 IF 语句来测试图像标题/alt 是否为空白，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:05:32.627

将 javascript 上的“显示标题”内容更改为：

```
//Display the caption
if($('#slideshow-caption p').html() != "")
    $('#slideshow-caption').css({opacity: 0.7, bottom:0}); 
```

请享用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:33:08.423

嘿，对不起，这是一个修复：

使用它作为你的脚本：

```
<script type="text/javascript">
$(document).ready(function() {        

    //Execute the slideShow, set 4 seconds for each images
    slideShow(2000);

});

var timer;

function slideShow(speed) {

    //append a LI item to the UL list for displaying caption
    $('ul.slideshow').append('<li id="slideshow-caption" class="caption"><div class="slideshow-caption-container"><h3></h3><p></p></div></li>');

    //Set the opacity of all images to 0
    $('ul.slideshow li').css({opacity: 0.0});

    //Get the first image and display it (set it to full opacity)
    $('ul.slideshow li:first').css({opacity: 1.0}).addClass('show');

    //Get the caption of the first image from REL attribute and display it
    $('#slideshow-caption h3').html($('ul.slideshow li.show').find('img').attr('title'));
    $('#slideshow-caption p').html($('ul.slideshow li.show').find('img').attr('alt'));

    //Call the gallery function to run the slideshow    
    timer = setInterval('gallery()',speed);

    //pause the slideshow on mouse over
    $('ul.slideshow').hover(
        function () {
            clearInterval(timer);    
        },     
        function () {
            timer = setInterval('gallery()',speed);            
        }
    );

}

function gallery() {

    //if no IMGs have the show class, grab the first image
    var current = ($('ul.slideshow li.show')?  $('ul.slideshow li.show') : $('#ul.slideshow li:first'));

    //trying to avoid speed issue
    if(current.queue('fx').length == 0) {    

        //Get next image, if it reached the end of the slideshow, rotate it back to the first image
        var next = ((current.next().length) ? ((current.next().attr('id') == 'slideshow-caption')? clearInterval(timer) :current.next()) : $('ul.slideshow li:first'));

        if (next) {    

            //Get next image caption
            var title = next.find('img').attr('title');    
            var desc = next.find('img').attr('alt');    

            //Set the fade in effect for the next image, show class has higher z-index
            next.css({opacity: 0.0}).addClass('show').animate({opacity: 1.0}, 1000);

            //Hide the caption first, and then set and display the caption
            $('#slideshow-caption').slideToggle(300, function () {
                $('#slideshow-caption h3').html(title);
                $('#slideshow-caption p').html(desc);
                if(desc != "" || title != "")
                {
                    $('#slideshow-caption').css({opacity: 0.7, bottom:0});   
                    $('#slideshow-caption').slideToggle(500);                                         
                }
            });        

            //Hide the current image
            current.animate({opacity: 0.0}, 1000).removeClass('show');
        }
    }

}
</script> 
```

# c# - 与现有的 Windows Media Player 互操作

> ID：10357758
> 
> 赞同：0
> 
> 时间：2012-04-27T20:59:09.460
> 
> 标签：c#, winapi, media-player

我一直在挖掘，无法确定如何在 Windows Media Player 中播放特定视频。

使用 WM_Command's 我已经能够播放/暂停现有视频，但还没有找到通过 Windows 消息播放特定视频文件的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:02:01.147

使用 DirectX AudioVideoPlayback：

[http://msdn.microsoft.com/en-us/library/bb324497(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb324497(VS.85).aspx)

```
[C#]using Microsoft.DirectX.AudioVideoPlayback;
public class MyVideoPlayer : System.Windows.Forms.Form
{
    /* ... */
    private void OpenFile()
    {
        try
        {
            Video ourVideo = new Video("C:\\Example.avi");
            /* ... */
        }
    }
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:52:06.180

您可以在您的应用程序中创建一个 WMP 实例，然后通过 IWMPPlayerApplication::switchToPlayerApplication [取消停靠播放器。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564264%28v=vs.85%29.aspx)

# javascript - 使用 jQuery 在 Object 元素的属性内设置值？

> ID：10357764
> 
> 赞同：4
> 
> 时间：2012-04-27T21:00:04.857
> 
> 标签：javascript, jquery, html, object

以下是问题的概要：

```
console.log($("#clippy")); //For testing purposes. The element is properly selected.

//Next, I need to grab the text value I want to be copied into the clipboard...
var textToCopy = $(".permalink input[name='link']").text();

//How can I paste the value inside textToCopy inside the appropriate areas:
//Here's the exact HTML I need to manipulate, with the two params I need to modify.
//Labeled: "<-----HERE!"

/*<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
        width="110"
        height="25"
        id="clippy" >
    <param name="movie" value="/flash/clippy.swf"/>
    <param name="allowScriptAccess" value="always" />
    <param name="quality" value="high" />
    <param name="scale" value="noscale" />
    <param NAME="FlashVars" value="text=sergio is the best champ"> <-------HERE!
    <param name="bgcolor" value="#fff">
    <embed src="../../Public/javascripts/clippy.swf"
            width="110"
            height="25"
            name="clippy"
            quality="high"
            allowScriptAccess="always"
            type="application/x-shockwave-flash"
            pluginspage="http://www.macromedia.com/go/getflashplayer"
            FlashVars="text=sergio is the best champ" <--------AND HERE!
            bgcolor="#fff"
    />
</object>*/ 
```

假设 的值为`textToCopy`“Welcome to The Matrix.”，这将是生成的 HTML：

```
 /*<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
        width="110"
        height="25"
        id="clippy" >
    <param name="movie" value="/flash/clippy.swf"/>
    <param name="allowScriptAccess" value="always" />
    <param name="quality" value="high" />
    <param name="scale" value="noscale" />
    <param NAME="FlashVars" value="text=Welcome to The Matrix."> <-------HERE!
    <param name="bgcolor" value="#fff">
    <embed src="../../Public/javascripts/clippy.swf"
            width="110"
            height="25"
            name="clippy"
            quality="high"
            allowScriptAccess="always"
            type="application/x-shockwave-flash"
            pluginspage="http://www.macromedia.com/go/getflashplayer"
            FlashVars="text=Welcome to The Matrix." <--------AND HERE!
            bgcolor="#fff"
    />
</object>*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T21:11:11.977

您可以通过按名称查找参数来访问对象的参数：

```
$('#clippy').find('param[name="FlashVars"]').val(textToCopy); 
```

您可以像这样访问对象中嵌入的属性：

```
$('#clippy').find('embed').attr('FlashVars', textToCopy); 
```

# r - ggplot2中的绘图线和组美学

> ID：10357768
> 
> 赞同：48
> 
> 时间：2012-04-27T21:00:19.863
> 
> 标签：r, ggplot2

这个问题是从一个较早的[问题及其答案开始的。](https://stackoverflow.com/questions/10349096/group-data-and-plot-multiple-lines-in-r)

首先是一些玩具数据：

```
df = read.table(text = 
"School      Year    Value 
 A           1998    5
 B           1999    10
 C           2000    15
 A           2000    7
 B           2001    15
 C           2002    20", sep = "", header = TRUE) 
```

最初的问题询问如何为每所学校绘制价值年线。答案或多或少对应于下面的 p1 和 p2。但也要考虑p3。

```
library(ggplot2)

(p1 <- ggplot(data = df, aes(x = Year, y = Value, colour = School)) +       
   geom_line() + geom_point())

(p2 <- ggplot(data = df, aes(x = factor(Year), y = Value, colour = School)) +       
  geom_line(aes(group = School)) + geom_point())

(p3 <- ggplot(data = df, aes(x = factor(Year), y = Value, colour = School)) +       
  geom_line() + geom_point()) 
```

p1 和 p2 都可以完成这项工作。p1 和 p2 之间的区别在于 p1 将`Year`其视为数字，而 p2 将`Year`其视为一个因子。此外，p2`group`在`geom_line`. 但是，当`group`美学像 p3 中那样下降时，线条就不会被绘制出来。

问题是：为什么`group`当 x 轴变量是一个因素`group`时审美是必要的，而当 x 轴变量是数字时不需要审美？

![在此处输入图像描述](../Images/42c339aaf3f37cc2f8ef52ed982fbbe7.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-27T21:57:04.397

[用哈德利自己](https://groups.google.com/group/ggplot2/browse_thread/thread/3f0aba84eeebf74c)的话来说：

> [*对于在水平轴上具有因子的折线图*] 重要的是手动指定分组。默认情况下，ggplot2 使用图中所有分类变量的组合来对几何图形进行分组——这不适用于该图，因为每个点都有一条单独的线。手动指定 group = 1 表示您想要一条连接所有点的单线。

[实际上，您可以按照 koshke 在这里展示的](http://kohske.wordpress.com/2010/12/27/faq-geom_line-doesnt-draw-lines/)非常不同的方式对这些点进行分组

# cucumber - 使用 Cucumber 和 Capybara 为无效 SSL 证书设置配置文件

> ID：10357769
> 
> 赞同：0
> 
> 时间：2012-04-27T21:00:20.267
> 
> 标签：cucumber, webdriver, ssl-certificate, capybara

-=更新=-

我遇到的问题是证书有效，但站点对证书无效。保留默认设置（提供带有证书默认设置的配置文件或使用 Capybara 中的标准 :selenium 驱动程序）适用于我的情况。我误以为我需要修改我的 Firefox 配置文件才能使驱动程序正常工作，但事实并非如此。

从我的自定义配置文件中删除证书设置解决了这个问题。谢谢贾里布。

-=原始问题=-

我目前正在尝试将我的测试浏览器设置为在使用 Cucumber 和 Capybara 时忽略无效的 SSL 证书。我的 env.rb 中有以下内容：

```
Capybara.register_driver :selenium_profile do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new
  profile.secure_ssl = false
  profile.assume_untrusted_certificate_issuer = false
  Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile)
end 

Capybara.configure do |config|
  config.run_server = false
  config.default_driver = :selenium_profile
  config.default_wait_time = 15
end 
```

环境似乎设置正确，并且测试用例运行良好，直到我遇到无效证书。

我在上面的代码中做错了什么吗？是否有另一种选择（使用脚本/代码）来创建忽略证书的新配置文件？我正在尝试在 qa 站点上进行一些黑盒测试，因此自签名证书并不是一个真正的选择。单独的 Firefox 配置文件不好，因为代码需要可移植。想法？

环境：

```
OS X.7.3
Firefox 12.0
ruby-1.9.2
capybara (1.1.2 ruby, 0.4.1.2)
capybara-webkit (0.8.0)
cucumber (1.1.9)
selenium-webdriver (2.21.2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:29:18.293

你试过没有`profile.assume_untrusted_certificate_issuer = false` 和有 `profile.accept_untrusted_certs = True`

# sql - SQL 效率 - 3 个嵌套选择作为列严重滞后

> ID：10357770
> 
> 赞同：1
> 
> 时间：2012-04-27T21:00:29.133
> 
> 标签：sql, database

我有一个有效但需要永远的查询。我的“姓氏”列是 3 个选择查询。我知道必须有更好的方法来做到这一点。

```
SELECT LOANS.BALANCE, TAXES.TAX_DUE,
       (SELECT SBAOFFCR.LAST_NAME 
        FROM SBAOFFCR 
        WHERE SBAOFFCR.INITIALS = 
              (SELECT PMGTMAIN.OFFICER 
               FROM PMGTMAIN 
               WHERE PMGTMAIN.BOC_NUM_STRING = LOANS.BOC_NUM_STRING 
               AND PMGTMAIN.SEQ =
                   (SELECT MAX(SEQ) 
                    FROM PMGTMAIN 
                    WHERE PMGTMAIN.BOC_NUM_STRING 
                                             = LOANS.BOC_NUM_STRING))) AS LastName

FROM LOANS 
LEFT JOIN TAXES 
ON LOANS.BOC_NUM_STRING = TAXES.BOC_NUM_STRING
WHERE LOANS.BALANCE > 0 
```

`PMGTMAIN``LOANS`AND中的每一条记录都有几条/多条记录`TAXES`。
`PMGTMAIN`列中有员工姓名缩写`OFFICER`，可以在`SBAOFFCR`表中作为列引用，`INITIALS`并且在`SBAOFFCR`表中有一个列`LAST_NAME`，这是我从联接中的每条记录所需要的`LOANS/TAXES`。
而且我不能`OFFICER`从中获取任何`PMGTMAIN WHERE LOANS.BOC_NUM_STRING = PMGTMAIN.BOC_NUM_STRING`东西，它必须是带有 的那个`MAX(PMGTMAIN.SEQ)`。就像我说的，我的查询有效，但花了大约 10 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:41:18.093

恐怕我们通常需要更多信息，为什么需要这么长时间，尽管我确实觉得创建索引（如果它们不存在的话）可能是你最好的选择。

不过试试这个，以防万一：

```
SELECT Loans.balance, COALESCE(Taxes.tax_due, 0), SbaOffcr.last_name
FROM Loans
LEFT JOIN Taxes
ON Taxes.boc_num_string = Loans.boc_num_string
JOIN Pmgtmain as Main
ON Main.boc_num_string = Loans.boc_num_string
LEFT JOIN Pmgtmain as Exclude
ON Exclude.boc_num_string = Loans.boc_num_string
AND Main.seq < Exclude.seq
JOIN SbaOffcr
ON SbaOffcr.initials = Pmgtmain.Officer
WHERE Loans.balance > 0
AND Exclude.boc_num_string IS NULL 
```

哦 - 为什么你的表/列被命名为*短*名称？它似乎主要是令人困惑的。有些东西向我暗示，您的架构可能会被调整。

# android - 选项卡图标填充选项卡什么时候不应该？

> ID：10357772
> 
> 赞同：1
> 
> 时间：2012-04-27T21:00:42.053
> 
> 标签：android, android-tabhost

我在一个应用程序中有一个 tabhost，它对每个选项卡都使用选项卡图标和文本。对于我的生活，我无法让图标居中于文本上方，而不是填充整个选项卡。我的搜索只导致其他人试图让图标填满整个标签。我见过的所有其他示例在文本上方都有图标。

这是我设置和添加选项卡的方式：

```
tabs = (TabHost) this.findViewById(R.id.conference_tabhost);
tabs.setOnTabChangedListener(this);
tabs.setup();

TabSpec tspecMenu = tabs.newTabSpec(tab_tag_menu);
tspecMenu.setIndicator("Menu", getResources().getDrawable(R.drawable.ic_tab_menu));
tspecMenu.setContent(R.id.tab_menu_view);
tabs.addTab(tspecMenu); 
```

这是我的布局的开始：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/conference_tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </TabWidget>
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"> 
```

# iphone - NSMutableArray 没有正确添加对象？

> ID：10357776
> 
> 赞同：0
> 
> 时间：2012-04-27T21:00:56.273
> 
> 标签：iphone, objective-c, ios, xcode, nsmutablearray

我有一个按钮可以在 ButtonClick 上保存单元格的数据

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    self.checkbox = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect checkboxRect = CGRectMake(135, 150, 36, 36);
    [self.checkbox setFrame:checkboxRect];  
    [self.checkbox setImage:[UIImage imageNamed:@"unselected@2x.png"]forState:UIControlStateNormal];
    [self.checkbox setImage:[UIImage imageNamed:@"selected@2x.png"] forState:UIControlStateSelected];
    [self.checkbox addTarget:self action:@selector(checkboxClicked:) forControlEvents:UIControlEventTouchUpInside];
    self.accessoryView = self.checkbox;
    array = [NSMutableArray array];
}
return self;
}
-(void)checkboxClicked:(UIButton *)sender{
sender.selected = !sender.selected;
UITableViewCell *cell = (AddressBookCell *)sender.superview;
if(sender.selected){
    [array addObject:cell]; 
}
} 
```

我在我的另一个班级中使用了那个数组，但它一直给我空数组；

这是我的另一堂课，它给了我一个零日志。

```
-(void)textMessage{
/*UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Not Implmeneted Yet" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];

[alert show];
[alert release];*/
AddressBookCell *names = [[AddressBookCell alloc]init];
NSLog(@"%d",[[names array]count]);

} 
```

![1] [http://min.us/m2GMsoRap](http://min.us/m2GMsoRap)

我需要一种在单击按钮时存储数据并将其传输到我的其他类的方法。

## 编辑##完整代码

```
#import "AddressBookCell.h"

@implementation AddressBookCell
@synthesize checkbox;
@synthesize array;
@synthesize addressController;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    self.checkbox = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect checkboxRect = CGRectMake(135, 150, 36, 36);
    [self.checkbox setFrame:checkboxRect];  
    [self.checkbox setImage:[UIImage imageNamed:@"unselected@2x.png"]forState:UIControlStateNormal];
    [self.checkbox setImage:[UIImage imageNamed:@"selected@2x.png"] forState:UIControlStateSelected];
    [self.checkbox addTarget:self action:@selector(checkboxClicked:) forControlEvents:UIControlEventTouchUpInside];
    self.accessoryView = self.checkbox;

    array = [[NSMutableArray alloc]init];

}
return self; 
```

}

```
-(void)checkboxClicked:(UIButton *)sender{
sender.selected = !sender.selected;
UITableViewCell *cell = (AddressBookCell *)sender.superview;
NSLog(@"%d'",cell.tag);

if(sender.selected){
    [array addObject:cell];  
}else{
    if([array containsObject:cell]){
        [array removeObject:cell];
    }
    NSLog(@"%d", [array count]);
} 
```

}

现在我的另一堂课

```
-(void)setUpContacts{

NSDictionary *alphabet = [[NSDictionary alloc]initWithObjectsAndKeys:[NSNumber numberWithInt:0],@"A",[NSNumber numberWithInt:1],@"B",[NSNumber numberWithInt:2],@"C",[NSNumber numberWithInt:3],@"D",[NSNumber numberWithInt:4],@"E",[NSNumber numberWithInt:5],@"F",[NSNumber numberWithInt:6],@"G",[NSNumber numberWithInt:7],@"H",[NSNumber numberWithInt:8],@"I",[NSNumber numberWithInt:9],@"J",[NSNumber numberWithInt:10],@"K",[NSNumber numberWithInt:11],@"L",[NSNumber numberWithInt:12],@"M",[NSNumber numberWithInt:13],@"N",[NSNumber numberWithInt:14],@"O",[NSNumber numberWithInt:15],@"P",[NSNumber numberWithInt:16],@"Q",[NSNumber numberWithInt:17],@"R",[NSNumber numberWithInt:18],@"S",[NSNumber numberWithInt:19],@"T",[NSNumber numberWithInt:20],@"U",[NSNumber numberWithInt:21],@"V",[NSNumber numberWithInt:22],@"W",[NSNumber numberWithInt:23],@"X",[NSNumber numberWithInt:24],@"Y",[NSNumber numberWithInt:25],@"Z", nil];

NSMutableArray *tempArray = [[NSMutableArray alloc]init];
for(int i = 0; i<=27; i++){
    [tempArray addObject:[NSNull null]];
}
Contacts *contact = [[Contacts alloc]init];
contactNumbers = [contact phoneNumbers];
for (NSDictionary* info in contactNumbers) {
    firstLetter = [info objectForKey:@"lastName"];
    int index = 27;
    if([firstLetter length] > 0){
        firstLetter =[NSString stringWithFormat:@"%C",[firstLetter characterAtIndex:0]];

        firstLetter= [firstLetter capitalizedString];

        if([alphabet objectForKey:firstLetter]){

            NSNumber *t = [alphabet valueForKey:firstLetter];
            index = [t intValue] + 1;
        }
    }
    if([tempArray objectAtIndex:index] == [NSNull null]){
        [tempArray insertObject:[NSMutableArray array] atIndex:index];
    }
    [[tempArray objectAtIndex:index] addObject:info];
}
[alphabet release];    
NSArray *alphabet2 = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil];
NSMutableArray *tempArray2 = [[NSMutableArray alloc]init];
NSMutableArray *titleTemp = [[NSMutableArray alloc]init];
int c = 0;
for(int i = 0; i<=27; i++){
    if([tempArray objectAtIndex:i] != [NSNull null]){
        if(i == 0){
            [titleTemp insertObject:@"Suggested" atIndex:c];
        }else if(i == 27){
            [titleTemp insertObject:@"Others" atIndex:c];
        }else{
            int loc = i -1;

            [titleTemp insertObject:[alphabet2 objectAtIndex:loc] atIndex:c];
        }
        [tempArray2 insertObject:[tempArray objectAtIndex:i] atIndex:c];
        c++;
    }
}
[alphabet2 release];
[tempArray release];
letterArray = tempArray2;
titlePointer = titleTemp; 
```

}

```
-(void)textMessage{
/*UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Not Implmeneted Yet" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];

[alert show];
[alert release];*/
AddressBookCell *names = [[AddressBookCell alloc]init];
savedArray = [NSArray arrayWithArray:[names array]];
NSLog(@"%@",savedArray); 
```

}

```
- (void)viewDidLoad{

[super viewDidLoad];
[self setUpContacts];

indexPaths = [[NSMutableDictionary alloc]init];   

//suggestedPeople = [[NSArray alloc]initWithObjects:@"User1",@"User2",@"User3",@"User4", nil];

//set up the tableView
self.myTableView = [[UITableView alloc]initWithFrame:self.view.bounds        style:UITableViewStyleGrouped];
self.myTableView.delegate = self;
self.myTableView.dataSource = self;
self.title = @"Select Friends";
self.myTableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view addSubview:myTableView];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Text"style:UIBarButtonItemStylePlain target:self action:@selector(textMessage)];

//testing section 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:23:22.923

当然它是空的，你在你的另一个类中分配/初始化了一个 AdressBookCell 的新实例，所以它的数组中没有任何东西。您需要另一个类中的一个属性，该属性指向您填充数组的第一个类的实例，然后您可以使用 [pointerToFirstClass array] 获取该数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:22:32.300

看起来您正在使用手动内存管理。如果不是，则需要指定。

在这种情况下，当您使用 line 创建数组时`[NSMutableArray array]`，您正在创建一个自动释放的对象，该对象将在您的其他类尝试访问它之前被释放。

您需要在创建它时保留它，并在您的 dealloc 中释放它。如果您更改`[NSMutableArray array]`为`[[NSMutableArray array] retain]`并在您的 dealloc 中添加`[array release]`一行，则该数组不会在您身上消失，直到您释放拥有的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:25:13.460

你没有提供足够的信息来说明发生了什么，但我可以猜到......

零的日志可能意味着一个空数组，或者更可能是一个 nil 数组......试试这个：

```
AddressBookCell *names = [[AddressBookCell alloc]init];
NSLog(@"%@",[names array]); 
```

# data-modeling - Datomic 中的数据建模

> ID：10357778
> 
> 赞同：64
> 
> 时间：2012-04-27T21:01:03.840
> 
> 标签：data-modeling, datomic

我一直在研究[Datomic](http://datomic.com/)，它看起来非常有趣。但是，虽然似乎有[关于 Datomic 在技术上如何工作的非常好的信息](http://docs.datomic.com/tutorial.html)，但我还没有看到太多关于应该如何考虑数据建模的信息。

Datomic 中的数据建模有哪些最佳实践？有没有关于这个主题的好资源？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-13T03:14:28.433

## 警告讲师

由于 Datomic 是新的并且我对它的经验有限，因此不应以任何方式将此答案视为最佳实践。将此作为 Datomic 的介绍，适用于那些具有关系背景并渴望更高效的数据存储的人。

## 入门

在 Datomic 中，您将域数据建模为拥有*Values* for *Attributes的**实体*。因为对另一个*实体*的引用可以是 Attribute 的值，所以*您**可以*简单地对*实体*之间的*关系*进行建模。

 ***乍一看，这与在传统关系数据库中建模数据的方式并没有什么不同。在 SQL 中，表行是*实体*，表的列名称是具有*Values的**属性*。*关系*由一个表行中的外键值表示，该外键值引用*另一*表行的主*键值*。

 ***这种相似性很好，因为您可以在对域进行建模时勾勒出传统的 ER 图。您可以像在 SQL 数据库中一样依赖关系，但不需要弄乱外键，因为这是为您处理的。Datomic 中的写入是事务性的，您的读取是一致的。因此，您可以以任何合适的粒度将数据分成实体，依靠连接来提供更大的图景。这是您在许多 NoSQL 存储中失去的便利，在这些存储中，通常拥有大型非规范化实体以在更新期间实现某种有用的原子性水平。

在这一点上，你有了一个好的开始。但 Datomic 比 SQL 数据库灵活得多。

## 利用

时间本质上是所有 Datomic 数据的一部分，因此无需将数据历史记录作为数据模型的一部分。这可能是 Datomic 最受关注的方面。

在 Datomic 中，您的模式没有严格定义为 SQL 所需的“矩形”。也就是说，实体[1](https://docs.datomic.com/on-prem/best-practices.html#nohistory-for-high-churn)可以具有满足您的模型所需的任何属性。实体不需要具有`NULL`不适用于它的属性的默认值或默认值。您可以根据需要向特定的单个实体添加属性。

因此，您可以随着时间的推移更改单个实体的形状，以响应您领域的变化（或您对领域理解的变化）。所以呢？这与 MongoDB 和 CouchDB 等文档存储不同。

不同之处在于，使用 Datomic，您可以在所有受影响的实体上以原子方式更改架构。这意味着您可以发出一个事务来更新所有实体的形状，*基于任意域逻辑*，**用您的语言**[2] 编写，在提交之前执行不会影响读者。我不知道在关系或文档存储空间中有任何接近这种权力的东西。

您的实体也没有被严格定义为“住在一张桌子上”。您决定什么定义了 Datomic 中实体的“类型”。您可以选择明确并强制模型中的每个实体都有一个`:table`属性，该属性表示它是什么“类型”。或者，您的实体只需满足每种类型的属性要求即可符合任意数量的“类型”。

例如，您的模型可能要求：

*   一个人需要属性`:name`, `:ssn`,`:dob`
*   员工需要`:name`, `:title`,`:salary`
*   居民要求`:name`，`:address`
*   会员需要`:id`, `:plan`,`:expiration`

这意味着像我这样的实体：

```
{:name "Brian" :ssn 123-45-6789 :dob 1976-09-15 
 :address "400 South State St, Chicago, IL 60605"
 :id 42 :plan "Basic" :expiration 2012-05-01} 
```

可以推断为 a `Person`、 a`Resident` **和**a`Member` **但不是**a `Employee`。

Datomic 查询在[Datalog](http://en.wikipedia.org/wiki/Datalog)中表达，并且可以合并以您自己的语言表达的规则，引用未存储在 Datomic 中的数据和资源。您可以将*数据库函数*存储为 Datomic 内部的一等值。这些类似于 SQL 中的存储过程，但可以作为事务内部的值进行操作，并且也可以用您的语言编写。这两个功能都可以让您以更以域为中心的方式表达查询和更新。

最后，OO 和关系世界之间的[阻抗不匹配](http://www.codinghorror.com/blog/2006/06/object-relational-mapping-is-the-vietnam-of-computer-science.html)一直让我感到沮丧。使用功能性的、以数据为中心的语言 (Clojure) 有助于实现这一点，但 Datomic 看起来提供了一种持久的数据存储，它不需要通过脑力体操从代码到存储进行桥接。

例如，从 Datomic 获取的实体看起来和行为类似于 Clojure（或 Java）映射。它可以传递到更高级别的应用程序，而无需转换为对象实例或通用数据结构。遍历该实体的关系将从 Datomic 懒惰地获取相关实体。但是保证它们与原始查询一致，即使面对并发更新。这些实体看起来就像是嵌套在第一个实体中的普通旧地图。

在我看来，这使得数据建模更自然，更不用说一场战斗了。

## 潜在的陷阱

*   冲突的属性

    上面的示例说明了模型中的潜在缺陷。如果您后来决定这`:id`也是 的一个属性`Employee`怎么办？解决方案是将您的属性组织到*名称空间*中。所以你会同时拥有`:member/id`和`:employee/id`。提前这样做有助于避免以后发生冲突。

*   一个属性的定义不能改变（还）

    一旦您将 Datomic 中的属性定义为特定类型、索引与否、唯一等，您以后就无法更改它。我们在`ALTER TABLE ALTER COLUMN`这里用 SQL 用语说话。现在，您可以创建具有正确定义的替换属性并移动现有数据。

    这听起来可能很糟糕，但事实并非如此。由于事务是序列化的，您可以提交一个创建新属性、将数据复制到其中、解决冲突并删除旧属性的事务。它将在不受其他事务干扰的情况下运行，并且可以利用您的母语中的特定于域的逻辑来完成它。这本质上是 RDBMS 在您发出 时在幕后所做的事情`ALTER TABLE`，但您为规则命名。

*   不要做“糖果店里的孩子”

    灵活的模式并不意味着没有数据模型。我建议一些前期计划以理智的方式对事物进行建模，就像对任何其他数据存储一样。*在必要*时利用 Datomic 的灵活性，而不仅仅是因为可以。

*   避免存储大量、不断变化的数据

    对于 BLOB 或不断变化的非常大的数据，Datomic 不是一个好的数据存储。因为它保留了以前值的历史记录，~~并且没有清除旧版本的方法（还）~~。这种东西几乎总是更适合像 S3 这样的对象存储。更新：有一种方法可以[在每个属性的基础上禁用历史记录](https://docs.datomic.com/on-prem/best-practices.html#nohistory-for-high-churn)。更新：现在还有一种方法可以[删除数据](https://docs.datomic.com/on-prem/excision.html)；然而，存储对外部对象的引用而不是对象本身可能仍然是处理 BLOB 的最佳方法。将此策略与使用[字节数组](https://docs.datomic.com/on-prem/schema.html#bytes-limitations)进行比较。

## 资源

*   [原子邮件列表](https://groups.google.com/group/datomic)
*   Freenode 上的 IRC 频道 #datomic

## 笔记

1.  我的意思是行意义上的实体，而不是更恰当地描述为实体类型的表格意义上的实体。
2.  我的理解是目前支持 Java 和 Clojure，但未来可能支持其他 JVM 语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T18:16:30.507

来自 bkirkbri 的一个非常好的答案。我想做一些补充：

1.  如果您存储许多相似但不等于“类型”或模式的实体，请在模式中使用类型关键字，例如

    ```
    `[:db/add #db/id[:db.part/user] :db/ident :article.type/animal]
    [:db/add #db/id[:db.part/user] :db/ident :article.type/weapon]
    [:db/add #db/id[:db.part/user] :db/ident :article.type/candy]

    {:db/id #db/id[:db.part/db]
     :db/ident :article/type
     :db/valueType :db.type/ref
     :db/cardinality :db.cardinality/one
     :db/doc "The type of article"
     :db.install/_attribute :db.part/db}` 
    ```

 `当您阅读它们时，从查询中获取实体 ID 并使用`datomic.api/entity`，并`eid`在必要时通过按类型分派的多方法解析它们，因为在某些更复杂的模式中很难对所有属性进行良好的查询。`******

# php - 会话数组在服务器上被区别对待/覆盖，但在本地 XAMPP 上没有

> ID：10357782
> 
> 赞同：0
> 
> 时间：2012-04-27T21:01:20.080
> 
> 标签：php, session

我有一个在会话中存储数组的站点。项目被添加到数组中，并且数组循环显示项目。

在我本地的 XAMPP 上它工作正常，但现在我已经上传了它，它显示出一些奇怪的行为。

我的数组应该是这样的：

```
Array
(
    [bag] => Array
        (
            [0] => Array
                (
                    [item_id] => 4
                    [stock_id] => 7
                    [quant] => 1
                )
         )
) 
```

在我添加一个项目之后，它会在点击几下后变成这样：

```
Array
(
    [bag] => 1
) 
```

出现错误：

```
Warning: Invalid argument supplied for foreach() in /public_html/xxx.php on line xx 
```

对于 php .ini 配置或类似的配置，我应该注意一些会话设置吗？（如果有帮助，我正在使用 Hostgator）

* * *

我将项目添加到数组的一种简化方式-

```
function AddBag()
{
//get info
    $item_id   = $_POST['item_id'];
    $quant      = $_POST['quant];
    $stock_id  = $_POST['stock_id];

    if (isset($_SESSION['bag'])) {$bag_array = $_SESSION['bag'];}
    else                         {$bag_array = array();}

//add item into array
    $new_item = array("item_id" => $item_id, "stock_id" => $stock_id, "quant" =>         $quant);
    array_push($bag_array, $new_item);

//update session with new array
    $_SESSION['bag'] = $bag_array;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:36:58.567

我想我自己找到了答案——

我有一个这样的 foreach 循环：

```
foreach ($_SESSION['bag'] as $bag) {$bag_num = $bag_num + $bag['quant']; 
```

这在我本地的 XAMPP 上测试它很好，但在我的主机上它没有。将其更改为：

```
foreach ($_SESSION['bag'] as $bagx) {$bag_num = $bag_num + $bagx['quant']; 
```

似乎工作。

我可以看到为什么会有冲突，但不知道为什么它会在一个或另一个上起作用，有什么想法吗？

# iphone - 将 App 上传到 App Store iOS

> ID：10357783
> 
> 赞同：0
> 
> 时间：2012-04-27T21:01:22.577
> 
> 标签：iphone, xcode, uploading

我正在尝试验证我的应用程序的应用程序上传过程中的步骤。我正处于要求使用身份签名的步骤。当我选择下载身份时，它说管理员必须首先请求身份。我也不知道怎么导入。我已经支付了一百美元，它还没有过期。感谢你给与我的帮助。

已回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:31:17.497

您是否已完成所有这些步骤？

转到供应门户。

• 在配置下单击“分发”选项卡。

• 确保您尝试上传的应用程序的分发配置文件存在。如果不存在，请创建一个。

• 下载配置文件，并将其拖到 Xcode 管理器中。

• 然后在您的应用程序中，在构建设置（针对目标和项目）中，在代码签名下，确保所有条目与您在供应门户中设置的分发配置文件相匹配。

• 然后在 Xcode 中编辑方案以存档，并确保将其设置为“iOS 设备”而不是模拟器的存档。

![在此处输入图像描述](../Images/eef1f9b5ee5d93863838640f02a02830.png)

# java - 高效的过滤算法

> ID：10357788
> 
> 赞同：2
> 
> 时间：2012-04-27T21:01:28.893
> 
> 标签：java, algorithm, data-structures

我正在开发一个服务应用程序。我正在接收一个请求对象，我需要通过一组过滤器传递这个对象并返回响应。我需要大约 10 个过滤器让对象通过。

目前，应用程序正在对每个过滤器进行顺序搜索，如下所示：

```
public List<Element) FilterA(Request request){
  for(Element element in items)
  {
     // compare element to request object elements   
     // there are different field checking per object
  }
} 
```

所以有 FilterB、FilterC 等。它们都以类似的方式完成，在 for 循环中比较不同的字段。

这可以通过哈希集完成吗？还是二分查找？

或者有没有有效的算法。本质上，我想将 O(n) 改进为更少的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:34:09.037

如果您有*n 个*列表和*f*个过滤器，则基本上只有两种方法：遍历列表并将每个过滤器应用于每个单独的元素（如果它通过所有元素，则保留它，否则将其删除）；或者做你现在正在做的事情，让每个过滤器遍历整个列表。两者都有 O(n*f) 的最坏情况复杂度，假设 O(1) 元素删除（我建议使用 LinkedList 来实现这一点，如有必要，将内容复制到一个）。

您实际上只能通过利用输入的属性来改善这种复杂性。也许您可以将多个过滤器组合成一个（例如，当它们是范围检查时）或者从列表中取出一个元素也会导致其他元素的删除。此外，如果您能猜出哪些过滤器可能会删除更多元素，那么首先运行这些过滤器会有所回报。

所以，是的，这实际上取决于您要过滤的内容类型以及过滤器的外观。在最一般的情况下，您不会赢得太多（只要您已经在使用可以在 O(1) 时间内从中删除元素的列表），但是如果您考虑到您的输入信息，您可能会有所收获。

# java - 从用户获取数据，然后将其插入 javadb

> ID：10357792
> 
> 赞同：0
> 
> 时间：2012-04-27T21:01:43.433
> 
> 标签：java, sql, derby, javadb

如果我有一个带有接口的代码，该接口从用户那里获取数据，然后将此数据存储在字符串类型的变量中，我怎样才能将这个变量插入数据库？这是我所说的一个例子：

```
String s1="user@hotmail.com";
Class.forName("org.apache.derby.jdbc.ClientDriver");
Connection con=
 DriverManager.getConnection("jdbc:derby://localhost:1527/SampleDB","app","app");
Statement st=con.createStatement();
st.executeUpdate("INSERT INTO EMAIL"+"(ID)"+"VALUES(s1)"); 
```

但是这种方式不起作用，并且不会在数据库中插入这个字符串类型的变量！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:07:12.240

使用`PreparedStatemt`. [您可以在http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中找到一个示例

为防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，所有查询都应参数化，并且永远不应使用字符串连接来创建动态 SQL。

# php - PHP 看不到 MySQL

> ID：10357793
> 
> 赞同：2
> 
> 时间：2012-04-27T21:01:47.303
> 
> 标签：php, mysql, apache

我已经看过这篇文章[PHP doesn't see mysql extension](https://stackoverflow.com/questions/9329639/php-doesnt-see-mysql-extension)，但它没有帮助我。
我用：

*   Windows 7（VM 中的 32 位和真实 PC 中的 64 位）
*   带有 SSL 的 Apache 2.2
*   PHP 5.3.8
*   mysql 5.5.23

在`httpd.conf`我用 PHP 配置 Apache

```
PHPIniDir "C:\WEB\PHP\"
LoadModule php5_module "C:\WEB\PHP\php5apache2_2.dll"
ScriptAlias /php "C:/WEB/PHP/"
AddType application/x-httpd-php .php
Action application/x-httpd-php "/php/php-cgi.exe" 
```

在`php.ini`我设置

```
extension_dir = "C:/WEB/PHP/ext/"
[PHP_MYSQL]
extension=php_mysql.dll
[PHP_MYSQLI]
extension=php_mysqli.dll 
```

MySql 已启动并正常工作，但 PHP 看不到 mysql。
我也尝试复制`libmysql.dll`并`%windir%\system32`重新启动网络服务器，但它没有工作。
如果您需要，我可以发布其他信息。

**更新1：**
跑步`<?php phpinfo(); ?>`我只能看到`mysqlnd`，但`mysql`也看不到`mysqli`。
如果我跑`php -i`我会看到

```
mysql

MySQL Support => enabled
Active Persistent Links => 0
Active Links => 0
Client API version => mysqlnd 5.0.8-dev - 20102224 - $Revision: 310735 $ 
```

**更新 2：**
Apache、PHP 和 MySQL 文件夹与以前的工作电脑相同。
我复制了它们，重新配置了路径，安装并启动了服务：

```
httpd -k install && httpd -k start
mysqld --install && net start mysql 
```

**更新 3：**

*   我可以通过 DOS 控制台使用 mysql
*   如果我尝试运行现有的 PhpMyAdmin，我会得到`The mysql extension is missing. Please check your PHP configuration.`

**更新4：**
我检查了[一切](http://www.voidtools.com/)`php.ini`，我的电脑上唯一的就是php文件夹中的那个。

**更新5：**
我试过这个代码：

```
<?php
ini_set('display_errors', 'on');
error_reporting(E_ALL);
mysql_connect();
?> 
```

我得到`Fatal error: Call to undefined function mysql_connect() in C:\var\www\Apache\test.php on line 4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:01:50.130

我已经修复了相同的问题，将以下路径添加到 Windows 的环境变量“路径”（系统 > 高级 > 环境变量 > 路径）：

c:\Program Files\PHP5;C:\Program Files\MySQL\MySQL Server 5.5\lib

第一个是 php.ini 所在的位置，第二个（最重要的！）是 libmysql.dll 所在的位置（通常在 mysql 安装目录内的“lib”目录中）

[这个操作在 PHP.net 页面http://php.net/manual/en/mysqli.installation.php](http://php.net/manual/en/mysqli.installation.php)中有很好的描述

现在它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:37:12.300

您需要将 php.ini 文件中的`extension=php_mysql.dll`和`extension=php_mysqli.dll`行向上移动。它们应该具有所有通用设置。

据我所知，没有 and 部分`php_mysql`，`php_mysqli`它只是`mysql`and `mysqli`，但那些只包含这些模块的特定设置。在读取这些设置之前加载实际的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:34:00.007

我现在看到的最可行和最省时的选择是重新安装 WAMP 本身，并将旧文件和 dbs 迁移到新文件。

# actionscript-3 - 我可以将 oauth 2.0 与 flex 一起使用吗？

> ID：10357797
> 
> 赞同：1
> 
> 时间：2012-04-27T21:02:02.113
> 
> 标签：actionscript-3, apache-flex, oauth-2.0

我希望我的 flex 移动应用程序连接到 Google 服务，特别是新的 Google Drive，以上传和下载文件。这可能使用 AS3 和 Flash Builder 吗？我相信身份验证需要 oauth 2.0。这可以用动作脚本完成吗？我环顾四周，只发现了 oauth v1 库。此外，是否有任何与 Google Drive 配合使用的 API 与 Flash Builder 配合使用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:06:22.643

是的

> 用于 oAuth 客户端实现的 Actionscript 3 库，用于 Flash、Flex 和 AIR。

[http://code.google.com/p/oauth-as3/](http://code.google.com/p/oauth-as3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T18:10:45.860

我不知道您是否仍然对 Google Drive API 感兴趣，但我刚刚发布了一个（真正的）测试版。您可以在这里查看：[http](http://code.google.com/p/google-drive-as3-api-client/) ://code.google.com/p/google-drive-as3-api-client/ 。请参阅 Wiki 部分中的示例并参考您可以在此处找到的完整示例（针对 Flex）：[http ://code.google.com/p/google-drive-as3-api-client/source/browse/trunk/ src/AS3GoogleDriveAPI.mxml](http://code.google.com/p/google-drive-as3-api-client/source/browse/trunk/src/AS3GoogleDriveAPI.mxml)

再见

# qt - 是否可以更改 Qt 中顶级菜单的外观？

> ID：10357798
> 
> 赞同：2
> 
> 时间：2012-04-27T21:02:09.290
> 
> 标签：qt, winapi, qt4

我正在使用最新版本的 Qt，并注意到在 Windows 上，菜单以非常老式的方式呈现（类似于它们在其他跨平台应用程序（如 Firefox）上的外观）。我希望菜单渲染（颜色、渐变等）呈现出更现代的外观。是否可以在 Qt 中皮肤或修改菜单的呈现方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:11:47.867

我不确定您使用的是哪个版本的 Qt 或 Windows，但在我安装了 Qt 4.8.1 的 Windows 7 计算机上，默认菜单看起来很正常，就像任何其他 Windows 7 菜单一样。

要更改菜单的外观，您有两个广泛（简单）的选项：

1.  使用[QStyle](http://qt-project.org/doc/qt-4.8/qstyle.html)将其更改为不同的“原生”外观（使用`QApplication::setStyle()`或`QWidget::setStyle()`）。例如，您可以使它看起来像这样的 Windows XP 菜单：

    ```
    fileMenu->setStyle(new QWindowsXPStyle); 
    ```

2.  使用 Qt[样式表](http://doc.qt.nokia.com/4.8-snapshot/stylesheet-examples.html#customizing-qmenu)自定义您希望如何呈现菜单。例如：

    ```
    fileMenu->setStyleSheet("background-color: red;"); 
    ```

# macos - 配置：错误：C 编译器无法创建可执行文件

> ID：10357804
> 
> 赞同：158
> 
> 时间：2012-04-27T21:02:31.617
> 
> 标签：macos, memcached, osx-lion, libevent

我在stackoverflow上检查了许多类似的问题，但还没有找到答案。

我正在尝试在 Lion OSX 上安装 memcached，如此[处所示](http://www.glenscott.co.uk/blog/2009/08/30/install-memcached-php-extension-on-os-x-snow-leopard/)。

这是我得到的：

```
j-court-demones-macbook-pro:libevent-1.4.12-stable jcourtdemone$ ./configure; make
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking for C compiler default output file name... 
configure: error: in `/tmp/libevent-1.4.12-stable':
configure: error: C compiler cannot create executables
See `config.log' for more details.
make: *** No targets specified and no makefile found.  Stop. 
```

我已经按照几个地方的建议重新安装了 Xcode，但没有骰子。

这是我的 config.log：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.63\.  Invocation command line was

  $ ./configure 

## --------- ##
## Platform. ##
## --------- ##

hostname = j-court-demones-macbook-pro.local
uname -m = x86_64
uname -r = 11.3.0
uname -s = Darwin
uname -v = Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64
Kernel configured for up to 8 processors.
4 processors are physically available.
8 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1 2 3 4 5 6 7
Primary memory available: 4.00 gigabytes
Default processor set: 109 tasks, 599 threads, 8 processors
Load average: 0.98, Mach factor: 7.01
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /usr/bin
PATH: /Developer/usr/bin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /usr/local/bin
PATH: /usr/X11/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2077: checking for a BSD-compatible install
configure:2145: result: /usr/bin/install -c
configure:2156: checking whether build environment is sane
configure:2199: result: yes
configure:2224: checking for a thread-safe mkdir -p
configure:2263: result: ./install-sh -c -d
configure:2276: checking for gawk
configure:2306: result: no
configure:2276: checking for mawk
configure:2306: result: no
configure:2276: checking for nawk
configure:2306: result: no
configure:2276: checking for awk
configure:2292: found /usr/bin/awk
configure:2303: result: awk
configure:2314: checking whether make sets $(MAKE)
configure:2336: result: yes
configure:2575: checking for gcc
configure:2591: found /Developer/usr/bin/gcc
configure:2602: result: gcc
configure:2834: checking for C compiler version
configure:2842: gcc --version >&5
i686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5484)
Copyright (C) 2005 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2846: $? = 0
configure:2853: gcc -v >&5
Using built-in specs.
Target: i686-apple-darwin9
Configured with: /var/tmp/gcc/gcc-5484~1/src/configure --disable-checking -enable-werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-transform-name=/^[cg][^.-]*$/s/$/-4.0/ --with-gxx-include-dir=/include/c++/4.0.0 --with-slibdir=/usr/lib --build=i686-apple-darwin9 --with-arch=apple --with-tune=generic --host=i686-apple-darwin9 --target=i686-apple-darwin9
Thread model: posix
gcc version 4.0.1 (Apple Inc. build 5484)
configure:2857: $? = 0
configure:2864: gcc -V >&5
gcc-4.0: argument to `-V' is missing
configure:2868: $? = 1
configure:2891: checking for C compiler default output file name
configure:2913: gcc    conftest.c  >&5
ld: library not found for -lcrt1.10.5.o
collect2: ld returned 1 exit status
configure:2917: $? = 1
configure:2955: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE "libevent"
| #define VERSION "1.4.12-stable"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2961: error: in `/tmp/libevent-1.4.12-stable':
configure:2964: error: C compiler cannot create executables
See `config.log' for more details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXCPP_set=
ac_cv_env_CXXCPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_F77_set=
ac_cv_env_F77_value=
ac_cv_env_FFLAGS_set=
ac_cv_env_FFLAGS_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_path_install='/usr/bin/install -c'
ac_cv_prog_AWK=awk
ac_cv_prog_ac_ct_CC=gcc
ac_cv_prog_make_make_set=yes

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='${SHELL} /tmp/libevent-1.4.12-stable/missing --run aclocal-1.10'
AMDEPBACKSLASH=''
AMDEP_FALSE=''
AMDEP_TRUE=''
AMTAR='${SHELL} /tmp/libevent-1.4.12-stable/missing --run tar'
AR=''
AUTOCONF='${SHELL} /tmp/libevent-1.4.12-stable/missing --run autoconf'
AUTOHEADER='${SHELL} /tmp/libevent-1.4.12-stable/missing --run autoheader'
AUTOMAKE='${SHELL} /tmp/libevent-1.4.12-stable/missing --run automake-1.10'
AWK='awk'
BUILD_WIN32_FALSE=''
BUILD_WIN32_TRUE=''
CC='gcc'
CCDEPMODE=''
CFLAGS=''
CPP=''
CPPFLAGS=''
CXX=''
CXXCPP=''
CXXDEPMODE=''
CXXFLAGS=''
CYGPATH_W='echo'
DEFS=''
DEPDIR=''
DSYMUTIL=''
ECHO='/bin/echo'
ECHO_C='\c'
ECHO_N=''
ECHO_T=''
EGREP=''
EXEEXT=''
F77=''
FFLAGS=''
GREP=''
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'
LDFLAGS=''
LIBOBJS=''
LIBS=''
LIBTOOL=''
LIBTOOL_DEPS=''
LN_S=''
LTLIBOBJS=''
MAKEINFO='${SHELL} /tmp/libevent-1.4.12-stable/missing --run makeinfo'
MKDIR_P='./install-sh -c -d'
NMEDIT=''
OBJEXT=''
PACKAGE='libevent'
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
RANLIB=''
SED=''
SET_MAKE=''
SHELL='/bin/sh'
STRIP=''
VERSION='1.4.12-stable'
ac_ct_CC='gcc'
ac_ct_CXX=''
ac_ct_F77=''
am__fastdepCC_FALSE=''
am__fastdepCC_TRUE=''
am__fastdepCXX_FALSE=''
am__fastdepCXX_TRUE=''
am__include=''
am__isrc=''
am__leading_dot='.'
am__quote=''
am__tar='${AMTAR} chof - "$$tardir"'
am__untar='${AMTAR} xf -'
bindir='${exec_prefix}/bin'
build=''
build_alias=''
build_cpu=''
build_os=''
build_vendor=''
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE}'
dvidir='${docdir}'
exec_prefix='NONE'
host=''
host_alias=''
host_cpu=''
host_os=''
host_vendor=''
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_sh='$(SHELL) /tmp/libevent-1.4.12-stable/install-sh'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
mkdir_p='$(top_builddir)/./install-sh -c -d'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='/usr/local'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define PACKAGE_STRING ""
#define PACKAGE_BUGREPORT ""
#define PACKAGE "libevent"
#define VERSION "1.4.12-stable"

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-29T20:03:05.777

我安装了 10.8 和带有命令行工具的 Xcode 4.4，但我仍然收到此错误。我注意到我的 config.log 中有两行相关的行，而不是重新安装 Xcode：

```
configure:5130: checking for C compiler version
configure:5139: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc --version >&5 
```

这条路对我来说并不存在。相反，我有：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain 
```

C 编译器（“cc”）位于 xctoolchain 目录中。我为 OSX10.8.xctoolchain 创建了一个符号链接，指向 XcodeDefault.xctoolchain 并修复了它。现在 memcached 安装脚本可以找到编译器版本并继续运行。

```
cd /Applications/Xcode.app/Contents/Developer/Toolchains
sudo ln -s XcodeDefault.xctoolchain OSX10.8.xctoolchain 
```

正如评论中所建议的，如果您在 Yosemite (10.10) 或 Mavericks (10.9) 上遇到此问题，您可以更新上面的符号链接命令以指向该特定版本（`OSX10.9.xctoolchain`或`OSX10.10.xctoolchain`）。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-04-27T21:59:48.490

您有一套旧的开发人员工具。gcc 将其版本报告为 4.0.1。这可能是从旧版本的操作系统迁移后遗留下来的。如果您已经安装了 Xcode 4.3.x，您需要启动它，进入它的首选项，选择 Locations 选项卡，然后单击命令行工具包旁边的“安装”。

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-11-15T04:56:31.197

当您看到此错误消息时，您可能在升级后尚未接受*Xcode 许可协议。*

首先，确保您已升级命令行工具：

```
$ xcode-select --install 
```

现在，Apple 希望您在使用这些工具之前同意他们的许可：

```
$ gcc
Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.

$ sudo gcc
You have not agreed to the Xcode license agreements. You must agree to both license agreements below in order to use Xcode.
[...] 
```

接受它后，命令行工具将按预期工作。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-20T02:36:14.983

我已经在 xcode 中安装了命令行工具，但我的仍然出错：

```
line 3619: /usr/bin/gcc-4.2: No such file or directory 
```

当我进入`which gcc`它返回

```
/usr/bin/gcc 
```

当我进入时，`gcc -v`我得到了一堆东西

```
..  
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

所以我创建了一个符号链接：

```
cd /usr/bin
sudo ln -s gcc gcc-4.2 
```

它奏效了！

（config.log 文件位于 make 试图构建的目录中）

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-12-20T23:30:05.440

我刚刚在构建 apache 时遇到了这个问题。我使用的解决方案与 Mostafa 相同，我必须导出 2 个变量：

```
export CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
CPP='/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -E' 
```

这是一个 Mac OSX Mavericks

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-06-04T16:34:00.767

首先使用获取 gcc 路径

> 命令：**哪个 gcc**
> 
> 输出：/usr/bin/gcc

我有同样的问题，请在下面的命令中设置 gcc 路径并安装

> **CC=/usr/bin/gcc rvm 安装 1.9.3**

稍后，如果您得到“ *Ruby was built without documentation* ”，请运行以下命令

> **rvm 文档生成-ri**

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-09-15T23:12:56.633

将“clang”设置为编译器配置应该对我有用：

```
export CC=clang
pip install --no-clean pycrypto 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-10-17T17:04:47.750

对我来说，这是 gcc 的一个问题，由`gcc -v`. [最近这篇文章](https://stackoverflow.com/a/11975148/1050862)说要升级 Xcode来`sudo xcode-select -switch /Applications/Xcode.app`解决这个问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-10-23T08:19:09.513

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-01T06:21:28.837

如果有人来这里是因为 RVM / Ruby 正在制造问题（中间人/咕噜声），我已经解决了我的问题。

PS。steroscott 的回答不久前解决了我的问题……这次不是这样。

就我而言，rvm 正在尝试通过自制软件使用下载的 gcc。我运行了 gcc 的 brew 卸载（对我来说是 gcc46）并重新运行了 ruby​​ 安装的代码（旧项目旧 ruby​​ v）

```
$ brew uninstall gcc46

$ rvm install 1.9.3 
```

在检查需求的过程中，它自动为我和繁荣获取了更新的 gcc，现在一切正常。哦，重要的是，从 rvm 命令安装 gcc 可能需要大约 10-15 分钟而不会抛出任何文本，它没有被冻结:) 祝你好运

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-29T11:59:23.100

当我尝试安装 Pod 时，我在构建 react-native 应用程序时遇到了这个问题。我必须导出 2 个变量：

```
export CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
CPP='/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -E' 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-27T17:29:10.670

就我而言，我试过 `xcode-select --install`了，但它说商店里没有。然后，受到`gcc -v`Rimian 的启发，我检查了我的 gcc : 然后我收到一条消息说我不同意。

从那时起，我只是遵循了协议流程`gcc -v`，在我同意它对我来说很好之后。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-25T17:48:03.107

确保您的 Xcode 应用程序名称中没有空格（如果您保留旧版本可能会发生 - 例如将其重命名为“Xcode 4.app”）；构建工具将在 Xcode 包路径中被引用，并且许多脚本无法正确处理带有空格的引用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-07T10:18:40.513

关于 clang iOS 交叉编译器

我发现问题出在`miphoneos-version-min=5.0`. 我已经变成了`miphoneos-version-min=8.0`。现在它起作用了。

我只是想建议使用创建一个简单的 test.c 文件并通过在日志中写入的命令对其进行编译。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-17T07:17:12.390

确保 Xcode.app 包的路径没有空格或奇怪的字符。我在 ~/Downloads/Last Dev Tools/ 文件夹中安装了 Xcode，因此使用空格并将文件夹重命名为 LastDevTools 解决了这个问题（尽管在重置 xcode-select -p 之后）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-26T23:09:34.333

检查您所在`clang`的位置：

```
which clang 
```

它应该在`/usr/bin/clang`. 在我以前的情况下，它来自 Miniconda，它被人为地放在命令行 PATH 上。修复这个问题，让 clang 来自 Xcode，这应该会让你前进。

# wcf - Rest 与 Wcf 的优缺点

> ID：10357806
> 
> 赞同：31
> 
> 时间：2012-04-27T21:02:39.470
> 
> 标签：wcf, rest

使用 rest 服务与 wcf 服务的优缺点是什么？

我想知道使用哪种类型，我有兴趣找到某种比较。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-28T20:55:06.737

休息是一种通过互联网进行交流的方式。这是选择地址作为方法位置并返回 HTML 标准数据（当然是 javascript、css、html）的一个非常基本的过程。

WCF 是一个 .net 库，用于让两个程序使用 SOAP 相互通信。其中包括两个非常熟悉的程序交易类信息。

鉴于 Rest 是一个过程，而 WCF 是一个类库，一个更好的问题可能是“Rest vs Soap”。

底线是，如果您需要两个应用程序进行交谈，您可能想要使用 WCF。即使这些应用程序都不是用 .net 编写的。但是，如果您需要网络技术访问信息（通常 javascript 访问是通过这种方式完成的），您将需要使用 Rest。

只是一个快速的旁注，WCF 也很好地休息，所以你真的不会出错。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T21:18:05.003

你在问一个关于苹果和橘子的问题。REST 是用于创建 Web 服务的模式。我不是这方面的专家，但您可以在[Wikipedia](http://en.wikipedia.org/wiki/Representational_state_transfer)上找到大量详细信息。WCF 是一种用于创建 Web 服务的 Microsoft 技术（主要使用[SOAP](http://en.wikipedia.org/wiki/SOAP)，尽管它是如此可配置，您也可以在其上执行 REST - 请参阅[ASP.Net WebAPI](http://www.asp.net/web-api)）。

WCF 的优点：

1.  非常可配置 - 如果您能想象到，WCF 可能可以做到。
2.  如果您坚持使用 Microsoft 堆栈，则易于使用。Visual Studio 为您完成 90% 的工作。

WCF 的缺点：

1.  非常可配置 - 有时让它完全按照你的意愿去做可能会有点痛苦，特别是如果你是新手。
2.  不同技术栈之间的通信可能会出现一些问题。我听说过当指向 WCF 服务时，Java 服务会卷曲而死。据我所知，这是 Java 库的问题，而不是 WCF，但谁知道呢。

这就是现在想到的所有内容，但希望这能给您对 WCF 的良好印象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-28T17:00:54.107

如果您绝对确定 HTTP 是您要使用的协议，并且您希望将其作为“应用程序”协议，而不仅仅是“传输”协议，那么就像 ASP.NET Web API 之类的协议。

如果您为数据中心中的服务器构建服务以相互通信，那么请认真考虑 WCF。

是否做 REST 是一个完全不同的问题。这项服务会持续多年吗？它会有很多不同的客户吗？其中一些客户会不受您的控制吗？如果您的回答是肯定的，那么可能值得研究 REST 约束可以带来哪些好处。

# c# - “数据类型对布尔运算无效。”

> ID：10357809
> 
> 赞同：2
> 
> 时间：2012-04-27T21:03:02.830
> 
> 标签：c#, sql-server-ce

我正在尝试根据前一个 ComboBox 的选择为 ComboBox 选择一组数据。我一直相信这是`SELECT`第二种方法中的声明，但我无法弄清楚为什么它不起作用。当我运行应用程序时，我收到此错误：

> 数据类型对布尔运算无效。[数据类型（如果已知）= int，数据类型（如果已知）= nvarchar ]。

我尝试使用`Parameter.AddWithValue`并将值设置为字符串无济于事。有人介意教我如何正确解决这个问题吗？谢谢你。

```
private void cboCities_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cboCities.SelectedIndex > -1)
        {
            SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *");
            cn.Open();
            SqlCeCommand cmd = cn.CreateCommand();
            cmd.CommandText = "SELECT Name FROM Parks WHERE CityId ='" + cboCities.SelectedValue + "'ORDER BY Name ASC";
            SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            cn.Close();
            cboParks.ValueMember = "ParkId";
            cboParks.DisplayMember = "Name";
            cboParks.DataSource = ds.Tables[0];
            cboParks.SelectedIndex = -1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:11:33.577

您是否尝试过类似以下的方法？

```
//[...code...]    
    cmd.CommandText = "SELECT Name FROM Parks WHERE CityId = @CityId ORDER BY Name ASC";
    cmd.Parameters.Add("@CityId", System.Data.SqlDbType.Int, 2).Value = Convert.ToInt32(cboCities.SelectedValue);
//[...code...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:06:06.370

Parks 表中的 CityId 是整数吗？

您正在将一个 int 即 CityId 与一个字符串 '...cboCities.SelectedValue ...中的值...'进行比较

尝试将 City 转换为整数：

```
cmd.CommandText = "SELECT Name FROM Parks WHERE CAST(CityId AS NVARCAR)  ='" + cboCities.SelectedValue + "'ORDER BY Name ASC"; 
```

或者，如果您确定 in cboCities.SelectedValue 与 CityId 相同，您也可以不带引号尝试（整数到整数比较）

```
cmd.CommandText = "SELECT Name FROM Parks WHERE CityId = " + cboCities.SelectedValue + " ORDER BY Name ASC"; 
```

（注意我已经删除了 cboCities.SelectedValue 周围的单引号）

# c - 将应用程序从小端架构移植到大端架构

> ID：10357813
> 
> 赞同：5
> 
> 时间：2012-04-27T21:03:11.927
> 
> 标签：c, network-programming, endianness

我有一个使用 Berkley socker API 在 Linux 下使用 C 在 x86 架构上开发的 TCP 服务器。服务器运行良好，没有任何问题。但现在由于某些原因，我必须在具有`big-endian`架构的 MIPS 架构上运行服务器。

服务器和客户端通过一组预定义的协议进行通信。我将举例说明服务器如何向客户端发送简单消息：

```
struct echo_req req;

  req.header.version = OFP_VERSION;
  req.header.type = OFPT_ECHO_REQUEST;
  req.header.length = htons (sizeof req);
  req.header.xid = htonl(y);
  req.data = htonl (456);

char data[sizeof (req)];
data[0] = req.header.version;
data[1] = req.header.type;
memcpy (data + 2, &req.header.length, 2);
memcpy (data + 4, &req.header.xid, 4);
memcpy (data + 8, &req.data, 4);

  if ((send (sock_fd, &data, sizeof (data), 0) == -1))
    {
      printf ("Error in sending echo request message\n");
      exit (-1);
    }
printf("Echo Request sent!\n"); 
```

如您所见，我使用`htonl`and`htons`用于任何比字节长的类型，将其转换为网络字节顺序。组成数据包后，我将数据序列化并打包成`char`数组，最后将其发送到网络。

现在，在我在 Big-endian 架构上运行我的服务器之前，我想清除一些东西。在我看来，作为我`memcpy`的数据并打包它，如果我通过网络发送它，它不应该对大端架构造成任何问题，因为 memcpy 会将数据逐字节复制到数组中，因此应该有在 Big-endian 上运行时，字节排序不会有任何问题。然而，我想得到你们那里的人的意见，我认为他们比我知道的要多得多，因为我仍然是网络编程的初学者:)。无论我是否走在正确的轨道上，请指导我。非常感谢所有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:08:07.143

是的，`memcpy`只需按顺序从源复制字节到目标。

如果没有看到您的其余代码，就不可能说您在任何应该使用的地方都使用了 hton(l|s)。也有可能您已经完成了诸如逐字节复制浮点数字节之类的操作，这不一定有效，与字节顺序问题无关。

不过，我在您上面发布的代码中没有看到任何明显的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:48:05.330

您是否确保在接收数据时也使用 ntoh/ntos？

顺便说一句，您应该简单地使用该结构来发送数据；将它重新组装到字符数组中只会占用 CPU 时间并且可能会出现错误。

# mysql - 需要从两个字段中选择，根据第二个的最高值在第一个字段中唯一

> ID：10357817
> 
> 赞同：0
> 
> 时间：2012-04-27T21:03:48.543
> 
> 标签：mysql, sql

我有一个包含三个字段的表，一个 ID、一个日期（字符串）和一个 INT。像这样。

```
+---------------------------
+BH|2012-09-01|56789
+BH|2011-09-01|56765
+BH|2010-08-01|67866
+CH|2012-09-01|58789
+CH|2011-09-01|56795
+CH|2010-08-01|67866
+DH|2012-09-01|52789
+DH|2011-09-01|56665
+DH|2010-08-01|67866 
```

我基本上需要为每个 ID，我只需要返回具有最高日期字符串的行。从这个例子中，我的结果需要是。

```
+---------------------------
+BH|2012-09-01|56789
+CH|2012-09-01|58789
+DH|2012-09-01|52789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:10:01.683

```
SELECT t.id, t.date_column, t.int_column
    FROM YourTable t
        INNER JOIN (SELECT id, MAX(date_column) AS MaxDate
                        FROM YourTable
                        GROUP BY id) q
            ON t.id = q.id
                AND t.date_column = q.MaxDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:30:08.927

假设以下结构：

```
CREATE TABLE  `stackoverflow`.`table_10357817` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Date` datetime NOT NULL,
  `Number` int(11) NOT NULL,
  `Code` char(2) NOT NULL,
  PRIMARY KEY (`Id`) USING BTREE
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=latin1 
```

以下查询将使用预期的结果：

```
SELECT Code, Date, Number
FROM table_10357817
GROUP BY Code
HAVING Date = MAX(Date) 
```

GROUP BY 强制每个代码（您称之为 id）生成一个结果，而 HAVING 子句仅返回与每个代码/id 的最大日期匹配的数据。

**更新**

使用了以下数据脚本：

```
INSERT INTO table_10357817 
    (Code, Date, Number)
VALUES 
    ('BH', '2012-09-01', 56789),
    ('BH', '2011-09-01', 56765),
    ('BH', '2010-08-01', 67866),
    ('CH', '2012-09-01', 58789),
    ('CH', '2011-09-01', 56795),
    ('CH', '2010-08-01', 67866),
    ('DH', '2012-09-01', 52789),
    ('DH', '2011-09-01', 56665),
    ('DH', '2010-08-01', 67866) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:07:33.260

```
SELECT id, date, int
FROM (  SELECT id, date, int
        FROM table_name
        ORDER BY date DESC) AS h
GROUP BY id 
```

将 table_name 和列替换为正确的。

# c# - 异常详细信息：System.Exception：已添加具有相同键的项目

> ID：10357819
> 
> 赞同：0
> 
> 时间：2012-04-27T21:04:07.323
> 
> 标签：c#, asp.net

我看过很多关于这个 ASP.NET 错误的帖子，但我无法弄清楚它如何应用于我的代码。

该页面在我的开发机器上加载没有任何错误。我只在我的生产机器上得到错误。

```
[Exception: An item with the same key has already been added.]
bli_main.Page_Load(Object sender, EventArgs e) in c:\inetpub\wwwroot\bli_main.master.cs:149
System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
System.Web.UI.Control.LoadRecursive() +71
System.Web.UI.Control.LoadRecursive() +190
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

它说错误的根源在第 149 行，这是我的 Page_Load 函数的右括号所在的行。

这是给出错误的页面的完整源代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using MySql.Data.MySqlClient;
using System.Text.RegularExpressions;
using System.Web.Script.Serialization;
using System.Net;
using System.Configuration;

public partial class bli_main : System.Web.UI.MasterPage
{

public static string connectionString = ConfigurationSettings.AppSettings["connectionString"];

string sql;

//poll variables
List<string> poll_ids = new List<string>();
List<string> poll_long_descriptions = new List<string>();
List<string> poll_short_descriptions = new List<string>();
List<List<string>> questions = new List<List<string>>();
List<List<int>> questionTypes = new List<List<int>>();
List<List<int>> questionIDs = new List<List<int>>();
List<List<string>> responses = new List<List<string>>();

Dictionary<string, List<string>> d_questions = new Dictionary<string, List<string>>();
Dictionary<string, List<int>> d_questionTypes = new Dictionary<string, List<int>>();
Dictionary<string, List<int>> d_questionIDs = new Dictionary<string, List<int>>();
Dictionary<string, List<string>> d_responses = new Dictionary<string, List<string>>();

protected void Page_Load(object sender, EventArgs e)
{
    MySqlConnection connector = new MySqlConnection(connectionString);
    MySqlCommand command;
    MySqlDataReader reader;

    TableRow columnsRow = new TableRow();
    Table1.Rows.Add(columnsRow);
    columnsRow.VerticalAlign = VerticalAlign.Top;

    connector.Open();

    //pull table columns from database
    sql = "SELECT * FROM column_table WHERE column_page_key = @page";
    command = new MySqlCommand(sql, connector);
    command.Parameters.AddWithValue("@page", pageNumber.Value);
    command.CommandTimeout = 30000;
    reader = command.ExecuteReader();
    try
    {
        while (reader.Read())
        {
            TableCell c = new TableCell();
            columnsRow.Cells.Add(c);
            c.BorderWidth = 1;
            c.ID = "column_" + reader["column_id"].ToString();
            if (reader["column_type_key"].ToString().Equals("1"))
                c.Width = 600;
            if (reader["column_type_key"].ToString().Equals("2"))
                c.Width = 250;
        }
    }
    catch (Exception ex)
    {
        reader.Close();
        connector.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        reader.Close();
        connector.Close();
    }

    //for each column, pull all widgets and load them in, and make an add-widget button
    foreach (TableCell c in columnsRow.Cells)
    {
        string column_id = (c.ID.Split('_'))[1];
        sql = "SELECT * FROM widget_instance_table, widget_instance_content_table "
            + "WHERE widget_instance_column_key=@column AND widget_instance_id=widget_instance_content_widget_instance_key";
        connector.Open();
        command = new MySqlCommand(sql, connector);
        command.Parameters.AddWithValue("@column", column_id);
        reader = command.ExecuteReader();

        try
        {
            //for each widget in the column
            while (reader.Read())
            {
                Table t = new Table();
                t.BorderWidth = 1;
                c.Controls.Add(t);
                TableCell cc;

                string widgetType = reader["widget_instance_content_type_key"].ToString();

                //if it's an article widget
                if (widgetType.Equals("7")) buildArticleWidget(t, reader["widget_instance_content_content_key"].ToString());

                //if it's a tweet widget
                else if (widgetType.Equals("13")) buildTweetWidget(t);

                //if it's a poll widget
                else if (widgetType.Equals("12")) buildPollWidget(t, reader["widget_instance_id"].ToString());

                //if it's a testimonial widget
                else if (widgetType.Equals("4")) buildTestimonialWidget(t, reader["widget_instance_id"].ToString());

                //if it's a standard content widget
                else if (widgetType.Equals("1")) buildStandardContentWidget(t, reader["widget_instance_id"].ToString());

                //otherwise
                else
                {
                    t = new Table();
                    t.BorderWidth = 1;
                    TableRow r = new TableRow();
                    cc = new TableCell();
                    c.Controls.Add(t);
                    t.Rows.Add(r);
                    r.Cells.Add(cc);
                    cc.Text = "Other widget type goes Here";
                }
            }
        }
        catch (Exception ex)
        {
            reader.Close();
            connector.Close();
            throw new Exception(ex.Message);
        }
        finally
        {
            reader.Close();
            connector.Close();
        }
    }

}

protected void buildTestimonialWidget(Table t, string widget_id)
{
    TableRow r;
    TableCell c;

    t.BorderWidth = 1;
    r = new TableRow();
    c = new TableCell();
    t.Rows.Add(r);
    r.Cells.Add(c);
    c.Text = "Testimonial " + widget_id + " goes here.";

    MySqlConnection dataConn = new MySqlConnection(); ;
    dataConn.ConnectionString = connectionString;
    dataConn.Open();

    //get widget configuration info from database
    string sql = "SELECT * from content_table, widget_instance_content_table "
               + "WHERE widget_instance_content_content_key = cont_id "
               + "AND widget_instance_content_widget_instance_key = @widget_id";

    MySqlCommand dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@widget_id", widget_id);
    MySqlDataReader dataReader = dataCmd.ExecuteReader();

    string article_title = "";
    string article_content = "";

    try
    {
        if (dataReader.Read())
        {
            article_title = dataReader["cont_desc"].ToString();
            article_content = dataReader["cont_content_1"].ToString();
        }
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }
    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_title;

    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_content;
    c.Text = HttpUtility.HtmlDecode(c.Text);
    Regex.Replace(c.Text, "<.*?>", string.Empty);

}

protected void buildStandardContentWidget(Table t, string widget_id)
{
    TableRow r;
    TableCell c;

    t.BorderWidth = 1;
    r = new TableRow();
    c = new TableCell();
    t.Rows.Add(r);
    r.Cells.Add(c);
    c.Text = "Standard Content " + widget_id + " goes here.";

    MySqlConnection dataConn = new MySqlConnection(); ;
    dataConn.ConnectionString = connectionString;
    dataConn.Open();

    //get widget configuration info from database
    string sql = "SELECT * from content_table, widget_instance_content_table "
               + "WHERE widget_instance_content_content_key = cont_id "
               + "AND widget_instance_content_widget_instance_key = @widget_id";

    MySqlCommand dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@widget_id", widget_id);
    MySqlDataReader dataReader = dataCmd.ExecuteReader();

    string article_title = "";
    string article_content = "";

    try
    {
        if (dataReader.Read())
        {
            article_title = dataReader["cont_desc"].ToString();
            article_content = dataReader["cont_content_1"].ToString();
        }
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }
    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_title;

    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_content;
    c.Text = HttpUtility.HtmlDecode(c.Text);
    Regex.Replace(c.Text, "<.*?>", string.Empty);

}

protected void buildPollWidget(Table t, string widget_id)
{

    MySqlConnection dataConn;
    MySqlCommand dataCmd;
    MySqlDataReader dataReader;

    //get the poll key of the poll from the widget instance table
    dataConn = new MySqlConnection();
    dataConn.ConnectionString = connectionString;
    dataConn.Open();
    sql = "SELECT widget_instance_content_content_key from widget_instance_content_table where widget_instance_content_widget_instance_key=@widget_id";
    dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@widget_id", widget_id);
    dataReader = dataCmd.ExecuteReader();

    string poll;
    try
    {
        dataReader.Read();
        poll = dataReader[0].ToString();
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }

    //get the long and short descriptions of the poll
    //get the elements of the poll from the element table
    dataConn = new MySqlConnection();
    dataConn.ConnectionString = connectionString;
    dataConn.Open();
    sql = "SELECT * FROM poll_table WHERE poll_id=@poll";
    dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@poll", poll);
    dataReader = dataCmd.ExecuteReader();

    string poll_long_desc;
    string poll_short_desc;
    try
    {
        dataReader.Read();
        poll_long_desc = dataReader["poll_long_desc"].ToString();
        poll_short_desc = dataReader["poll_short_desc"].ToString();
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }

    //get the elements of the poll from the element table
    dataConn = new MySqlConnection(); ;
    dataConn.ConnectionString = connectionString;
    dataConn.Open();
    sql = "SELECT * FROM poll_element_table WHERE poll_table_key=@poll";
    dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@poll", poll);
    dataReader = dataCmd.ExecuteReader();

    List<string> qs = new List<string>();
    List<int> qtypes = new List<int>();
    List<int> qids = new List<int>();
    List<string> ans = new List<string>();

    try
    {
        while (dataReader.Read())
        {
            qs.Add(dataReader["poll_element_question"].ToString());
            qtypes.Add(Int32.Parse(dataReader["poll_element_type_key"].ToString()));
            qids.Add(Int32.Parse(dataReader["poll_element_id"].ToString()));
            ans.Add("");
        }
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }

    questions.Add(qs);
    questionTypes.Add(qtypes);
    questionIDs.Add(qids);
    responses.Add(ans);

    d_questions.Add(widget_id, qs);
    d_questionTypes.Add(widget_id, qtypes);
    d_questionIDs.Add(widget_id, qids);
    d_responses.Add(widget_id, ans);

    TableRow r;
    TableCell c;
    Button b;
    //for each poll

    //display poll descriptions
    r = new TableRow();
    r.CssClass = "bodysan";
    t.Rows.Add(r);
    c = new TableCell();
    c.ColumnSpan = 2;
    c.CssClass = "bodysan";
    r.Cells.Add(c);
    c.Text = poll_short_desc;
    r = new TableRow();
    t.Rows.Add(r);
    c = new TableCell();
    c.CssClass = "bodysan";
    c.ColumnSpan = 2;
    r.Cells.Add(c);
    c.Text = poll_long_desc;

    //display the questions and response fields
    for (int j = 0; j < d_questions[widget_id].Count; j++)
    {
        r = new TableRow();
        r.CssClass = "bodysan";
        t.Rows.Add(r);
        c = new TableCell();
        c.CssClass = "bodysan";
        r.Cells.Add(c);
        c = new TableCell();
        c.CssClass = "bodysan";
        r.Cells.Add(c);
        c.Text = d_questions[widget_id][j];
        //c.Text = questions[0][j];
        r = new TableRow();
        r.CssClass = "bodysan";
        t.Rows.Add(r);
        int type = d_questionTypes[widget_id][j];
        c = new TableCell();
        c.CssClass = "bodysan";
        r.Cells.Add(c);
        r.Cells.Add(makeResponseCell(type, Int32.Parse(widget_id), j));
    }

    r = new TableRow();
    r.CssClass = "bodysan";
    t.Rows.Add(r);
    c = new TableCell();
    c.CssClass = "bodysan";
    r.Cells.Add(c);
    b = new Button();
    b.CssClass = "bodysan";
    c.Controls.Add(b);
    b.Text = "Submit Poll";
    b.ID = "submit_" + widget_id + "_poll";
    b.Click += new EventHandler(this.submit);
}

//stores responses in database.
public void submit(Object sender, EventArgs e)
{
    bool valid = true;

    //get the poll ID.
    Button b = (Button)sender;
    string poll = b.ID.Split('_')[1];
    //for each repsonse in this poll

    for (int i = 0; i < d_responses[poll].Count; i++)
    {
        Table tb = (Table)b.Parent.Parent.Parent;
        TableCell c = tb.Rows[2 * i + 3].Cells[1];
        int type = d_questionTypes[poll][i];
        string text = "";
        if (type == 1)
        {
            //throw new Exception("i=" + i + ", cellControls=" + c.Controls.Count + ", cellText=" + c.Text);
            TextBox t = (TextBox)c.Controls[0];
            text = t.Text;
            t.Text = "";
        }
        if (type == 2)
        {
            RadioButtonList r = (RadioButtonList)c.Controls[0];
            text = r.Text;
            r.ClearSelection();
        }
        if (type == 3)
        {
            RadioButtonList r = (RadioButtonList)c.Controls[0];
            text = r.Text;
            r.ClearSelection();
        }

        int element_id = d_questionIDs[poll][i];
        string response = text;
        //TODO: Update client ID from -1 to real client ID after login is implemented
        int client_id = -1;

        //responses[poll][i] = text;

        MySqlConnection dataConn;
        MySqlCommand dataCmd;

        dataConn = new MySqlConnection();
        dataConn.ConnectionString = connectionString;
        dataConn.Open();

        try
        {
            sql = "INSERT INTO poll_response_table "
                + "(poll_response_client_key, poll_response_poll_element_key, poll_response_response) "
                + "VALUES (@client_id, @element_id, @response)";

            dataCmd = new MySqlCommand(sql, dataConn);
            dataCmd.Parameters.AddWithValue("@client_id", client_id);
            dataCmd.Parameters.AddWithValue("@element_id", element_id);
            dataCmd.Parameters.AddWithValue("@response", response);

            dataCmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            dataConn.Close();
            throw new Exception(ex.Message);
        }
        finally
        {
            dataConn.Close();
        }

    }
    /*
    Response.Write("<table><tr><td>");
    foreach (string s in responses[poll])
        Response.Write(s + "<br/>");

    foreach (List<string> l in responses)
    {
        Response.Write("----- <br/>");
        foreach(string s in l)
            Response.Write("- " + s + " <br/>");
    }
    Response.Write("</td></tr></table>");
    */
}

protected TableCell makeResponseCell(int type, int poll, int element)
{
    TableCell c = new TableCell();
    RadioButtonList r;
    TextBox t;
    switch (type)
    {
        //freeform textbox
        case 1:
            t = new TextBox();
            c.Controls.Add(new TextBox());
            break;
        //yes/no
        case 2:
            r = new RadioButtonList();
            r.RepeatDirection = RepeatDirection.Horizontal;
            c.Controls.Add(r);
            r.Items.Add("yes");
            r.Items.Add("no");
            break;
        //1-5
        case 3:
            r = new RadioButtonList();
            r.RepeatDirection = RepeatDirection.Horizontal;
            c.Controls.Add(r);
            r.Items.Add("1");
            r.Items.Add("2");
            r.Items.Add("3");
            r.Items.Add("4");
            r.Items.Add("5");
            break;
        //default = textbox
        default:
            c.Controls.Add(new TextBox());
            break;
    }

    c.ID = poll + "_" + element + "_response";

    return c;
}

protected void buildArticleWidget(Table t, string article_id)
{
    TableRow r;
    TableCell c;

    t.BorderWidth = 1;
    r = new TableRow();
    c = new TableCell();
    t.Rows.Add(r);
    r.Cells.Add(c);
    c.Text = "Article " + article_id + " goes here.";

    MySqlConnection dataConn = new MySqlConnection(); ;
    dataConn.ConnectionString = connectionString;
    dataConn.Open();

    //get widget configuration info from database
    string sql = "SELECT * from content_table WHERE cont_id=@cont_id";

    MySqlCommand dataCmd = new MySqlCommand(sql, dataConn);
    dataCmd.Parameters.AddWithValue("@cont_id", article_id);
    MySqlDataReader dataReader = dataCmd.ExecuteReader();

    string article_title = "";
    string article_content = "";

    try
    {
        if (dataReader.Read())
        {
            article_title = dataReader["cont_desc"].ToString();
            article_content = dataReader["cont_content_1"].ToString();
        }
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }

    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_title;

    r = new TableRow();
    t.Rows.Add(r);

    c = new TableCell();
    r.Cells.Add(c);

    c.Text = article_content;
    c.Text = HttpUtility.HtmlDecode(c.Text);
    Regex.Replace(c.Text, "<.*?>", string.Empty);

}

protected void buildTweetWidget(Table t)
{
    MySqlConnection dataConn = new MySqlConnection(connectionString);
    dataConn.Open();

    //get widget configuration info from database
    string sql = "SELECT * from widget_config WHERE widgcon_id=2";

    MySqlCommand dataCmd = new MySqlCommand(sql, dataConn);
    MySqlDataReader dataReader = dataCmd.ExecuteReader();

    int num_tweets_displayed;
    string account;
    try
    {
        dataReader.Read();
        num_tweets_displayed = (int)(dataReader["widgcon_num_items_displayed"]);
        account = dataReader["widgcon_currently_displayed"].ToString();
    }
    catch (Exception ex)
    {
        dataReader.Close();
        dataConn.Close();
        throw new Exception(ex.Message);
    }
    finally
    {
        dataReader.Close();
        dataConn.Close();
    }
    string tweets = ("<br/>");

    foreach (var tweet in GetTweets(account).Take(num_tweets_displayed))
    {
        string s = Regex.Replace(HttpUtility.HtmlEncode(tweet), @"[a-z]+://[^\s]+",
            x => "<a href='" + x.Value.Replace("'", "&quot;") + "' style='tweet_link'>" + x.Value + "</a>",
            RegexOptions.Compiled | RegexOptions.IgnoreCase);
        tweets += (s + "<br/><br/>");
    }

    TableRow r = new TableRow();
    TableCell c = new TableCell();
    c.Text = "Tweet Widget";
    t.Rows.Add(r);
    r.Cells.Add(c);

    r = new TableRow();
    c = new TableCell();
    t.Rows.Add(r);
    r.Cells.Add(c);
    c.Text = tweets;

}

// called by buildTweetWidget
public List<string> GetTweets(string account)
{
    var ls = new List<string>();
    var jss = new JavaScriptSerializer();
    try
    {
        var d = jss.Deserialize<List<Dictionary<string, object>>>(
            new WebClient()
            .DownloadString("http://api.twitter.com/1/statuses/user_timeline.json?screen_name=" + account));

        foreach (var x in d)
            ls.Add((string)x["text"]);
    }
    catch
    {
        ls.Add("Unauthorized.");
    }

    return ls;
} 
```

}

我一直在寻找重复的变量名，但没有找到。如果之前已经回答过这个问题，我深表歉意。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:12:48.573

如果你检查这个查询，它可能不止一次返回 widget_id 并且它必须是唯一的，因为你正在将它添加到字典中。

```
SELECT * FROM widget_instance_table, widget_instance_content_table "
            + "WHERE widget_instance_column_key=@column AND widget_instance_id=widget_instance_content_widget_instance_key 
```

# cakephp - cakephp v2 布局未加载

> ID：10357820
> 
> 赞同：1
> 
> 时间：2012-04-27T21:04:15.997
> 
> 标签：cakephp, layout, view, cakephp-2.1

嗨，我想向我的 cakephp 添加一个新布局，但不知何故，系统一直从控制器而不是 /app/View/Layouts 文件夹中查找视图文件夹。

```
Error: The view for TestsController::desktop() was not found.
Error: Confirm you have created the file: /app/View/Tests/desktop.ctp 
```

desktop.ctp 文件位于 /app/View/Layouts 中。与default.ctp相同的地方

控制器中的代码是：

```
public function desktop() {

    $this->layout = 'desktop';
} 
```

这里有什么问题？我不明白为什么 cakephp 一直在查看 view/controller-name 文件夹...我需要修复这个问题，因为我想将此布局用于其他控制器。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:29:15.570

如果您仔细阅读消息，您会看到 cake 告诉您它找不到您的**视图**，而不是您的布局。

所以，创建一个空`/app/View/Tests/desktop.ctp`，看看会发生什么。我希望魔法.. :)

# python - Python继承怪异取决于子类的调用方式

> ID：10357821
> 
> 赞同：1
> 
> 时间：2012-04-27T21:04:38.557
> 
> 标签：python

当我从另一个类调用子类时出现错误，但当我直接调用它时却没有。似乎当我从不同的类创建这个子类的实例时，超类中的信息没有传递给子类。

```
class HBatom(object):
    def __init__(self, struct, sele, **kwargs):
        self.struct = struct
        self.sele = sele

class HDonor(HBatom):
    def __init__(self,struct,sele,**kwargs):
        super(HDonor,self).__init__(struct,sele,**kwargs)
        self.find_H()
    def find_H(self):
        bonded = self.struct.select(''.join(["bonded to ", self.sele.getSelstr()])) 
```

这有效

```
import HBonds
HB = HBonds.HDonor(structure,Nsel,f_wat=1) 
```

但是，当我创建一个包含 HDonors 字典的类的实例，然后告诉它填充时，我得到一个错误

```
HN = HBonds.HNtwrk(structure,1)
HN.build_HNtwrk()

AttributeError: 'HDonor' object has no attribute 'sele' 
```

用 pdb 执行告诉我，在第二种情况下*self*不包含 HBatom 父类的属性。*self*如何在第一种情况下包含该信息但在第二种情况下不包含该信息？

抱歉，我没有在原始帖子中包含 HNtwrk。总代码将近 400 行，所以我不想包含不必要的内容。这是HNtwrk的相关部分

```
class HNtwrk:
  def __init__(self,structure, f_wat = 0):
    self.f_wat = f_wat
    self.struct = structure
    self.rh_o = 2.5
    self.rn_o = 3.5
    self.Dons = dict()
    self.Accs = dict()

def build_HNtwrk(self):
    Dsele = self.struct.select(DonStr)
    Asele = self.struct.select(AccStr)
    self.addDons(Dsele)
    self.addAccs(Asele)

def addDons(self, Dsele):
    for pairs in iterNeighbors(Dsele,self.rn_o,Asele):
        iN = pairs[0].getIndices()[0]
        iA = pairs[1].getIndices()[0]

        if iN not in self.Dons:
            Hdon = HDonor(self.struct,pairs[0].getSelstr,f_wat=self.f_wat)
            self.Dons[iN] = Hdon 
```

当我设置 Hdon 时代码会跳闸，因为 HDonor.find_H() 需要 HBatom 属性。当从 HNtwrk 创建 HDonor 实例时，就好像在 HDonor 初始化期间未调用 HBatom.__init__()。为了清楚起见，HNtwrk 与其他类出现在同一个文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:05:16.487

使用**具体的超类名称**，即`HBatom`代替`super`.

当您调用`super(HDonor, self)`, 并且`self`实际上是 , 的子级时`HDonor`，`super`结果会将函数调用传递给`HDonor`类，而不是`HBatom`您预期的。

有关为什么会产生问题的更多详细信息，请参阅[此答案。](https://stackoverflow.com/a/5066411/13767)`super`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:32:07.077

问题解决了。事实证明，这根本不是继承问题。我遇到了问题，因为我打电话

```
Hdon = HDonor(self.struct,pairs[0].getSelstr,f_wat=self.f_wat) 
```

而不是应该用

```
Hdon = HDonor(self.struct,pairs[0].getSelstr(),f_wat=self.f_wat) 
```

因此，我没有通过我认为我通过的内容，这引发了我包含在 HBatom.__init__() 中的一个写得很糟糕的异常（我未能将其作为代码片段包含在内）。感谢那些提供建议的人。将来我将创建一个单独的小代码来隔离问题并发布完整的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T03:37:20.957

您没有显示`HNtwrk`or的代码`build_HNtwrk`，但我猜这`HNtwrk.__init__`不会调用父`__init__`方法。

# php - 发送一个附件

> ID：10357822
> 
> 赞同：0
> 
> 时间：2012-04-27T21:04:39.767
> 
> 标签：php, attachment, mailer

我正在使用以下代码发送带有电子邮件的单个附件。我使用 phpmailer 类：我知道这是一件非常简单易行的事情，但它不起作用。

这是我的 php 调用；

```
$mail->AddAttachment($_FILES['attach']['name']); 
```

这是我的html；

```
<form id="Form" name="Form" method="POST" action="<?php $PHP_SELF ?>"  enctype="multipart/form-data">
<input id="attach" name="attach" type="file" /> 
```

我也用它发送电子邮件。电子邮件已发送，但附件未发送。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:09:47.587

用错误检查代码封装您的代码，以便您知道它是否有效：

```
if (!$mail->AddAttachment($filepath, $_FILES['attach']['name']) {
  echo "Error attaching file at $filepath. Dumping variables to output.";
  var_dump($_FILES['attach']);
} 
```

请注意，您不能简单地将文件名传递给 AddAttachment 方法；根据[PHPMailer API](http://www.tig12.net/downloads/apidocs/wp/wp-includes/PHPMailer.class.html#det_methods_AddAttachment) ，第一个参数应该是一个路径。您必须弄清楚该路径是什么，然后还包括文件名。

# java - Volatile HashMap vs ConcurrentHashMap

> ID：10357823
> 
> 赞同：21
> 
> 时间：2012-04-27T21:04:40.763
> 
> 标签：java, caching, concurrency, hashmap

我有一个缓存类，其中包含一个`volatile HashMap<T>`存储缓存项。

很好奇换成会有什么`volatile HashMap`后果`ConcurrentHashMap`？

我会获得性能提升吗？此缓存是只读缓存。

最好的选择是什么？只是HashMap？缓存是按时间间隔填充的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-27T21:09:52.843

首先，您似乎不了解`volatile`关键字的作用。它确保如果声明的变量所持有的*引用值*`volatile`发生更改，其他线程将看到它而不是缓存副本。它与访问线程安全无关`HashMap`

鉴于此，以及您说的是只读的事实`HashMap`......您当然不需要使用任何提供线程安全的东西，包括`ConcurrentHashMap`

**编辑添加：**您的最后一次编辑现在说“缓存正在按时间间隔填充”

那不是只读的，是吗？

*如果您在编写（更新现有的 HashMap）时*要让线程从中读取，那么您应该使用 a `ConcurrentHashMap`，是的。

如果您要填充一个全新的`HashMap`然后将其分配给现有变量，那么您使用`volatile`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T21:22:22.690

你说缓存是只读的，但也会在一个看起来矛盾的时间间隔内更新。

如果整个缓存定期更新，我会继续使用 volatile。volatile 将确保更新后的地图安全发布。

```
public final class  Cache
{
   private volatile Map<?,?> cache;

   private void mapUpdate() {
      Map<?,?> newCache = new HashMap<>();

      // populate the map

      // update the reference with an immutable collection
      cache = Collections.unmodifiableMap(newCache);
   }
} 
```

如果间隔更新正在修改同一个缓存，那么您可能想要使用 ConcurrentHashMap，或者复制映射、更新副本并更新引用。

```
public final class  Cache
{
   private volatile Map<?,?> cache;

   private void mapUpdate() {
      Map<?,?> newCache = new HashMap<>(cache);

      // update the map

      // update the reference with an immutable collection
      cache = Collections.unmodifiableMap(newCache);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T04:35:53.583

我的 Web 应用程序有一个类似的用例。我正在为我的内存缓存使用 HashMap。用例如下 -

1.  一个用户请求进来，首先使用输入键检查缓存是否存在记录。这是在 add 方法中完成的。
2.  如果对象不存在，则它将新记录插入缓存中。
3.  同样，在 remove 方法中，首先使用键检查缓存中是否存在记录，如果找到则将其删除。

我想确保两个线程同时执行一个添加和另一个删除方法，这种方法会确保他们在他们看到缓存中的最新数据吗？如果我没有错，那么同步方法负责线程安全，而 volatile 负责可见性。

```
private volatile HashMap<String,String> activeRequests = new HashMap<String,String>();
public synchronized boolean add(String pageKey, String space, String pageName) {
    if (!(activeRequests.get(pageKey) == null)) {
       return false;
    }
    activeRequests.put(pageKey, space + ":" + pageName);
    return true;
}

public synchronized void remove(String pageKey) {       
    if(!(activeRequests.get(pageKey) == null))
        activeRequests.remove(pageKey);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-18T20:21:33.887

AFAIK，虽然第[一个答案解释正确](https://stackoverflow.com/a/10357895/469718)，但根据用例，在缓存上使用经常刷新和替换的 volatile 是不必要的开销，假设这只是静态元数据快照而不由其他线程更新，**实际上可能是坏的或不一致的。**

如果你举一个 Http Request 的例子，它从缓存中读取所有内容以获取所需的所有内容，该请求使用映射的引用，然后开始从引用中读取一些键，然后在读取的中途，缓存引用更新为新的哈希图（刷新），现在它开始读取缓存的不同状态，如果缓存中的条目不是特定时间快照**T** ，则可能会变得不一致。使用 volatile，您在 T1 读取 Key1:Val1，在**T2**读取 Key2:Val2，而您需要在 T1 读取 Val1、Val2 以获取相同的快照。使用 volatile 您的参考总是会更新，您可以第一次读取 Key1:Val1 和第二次读取 Key1:Val2 在同一请求中提供不同的数据。

如果没有 volatile，请求将使用始终指向引用快照的引用，直到完成处理。如果没有 volatile，您将始终在 T1 读取 Key1:Val1 并在**T2**读取相同的值 Key2:Val1 。一旦使用此引用的所有请求都完成，旧的取消引用映射将被 GCed。

# javascript - Javascript JSON 比较/差异？

> ID：10357830
> 
> 赞同：22
> 
> 时间：2012-04-27T21:05:19.843
> 
> 标签：javascript

假设我有以下 2 个 json 对象：

```
JSON A:
{
"Field A":"1",
"Field B":"2",
"Field D":"Something",
"Field E":"6"
}

JSON B:
{
"Field A":"1",
"Field B":"2",
"Field C":"3",
"Field D":"Different"
} 
```

示例函数：function (jsonstringA, jsonstringB)

示例（如果使用 JSON A 和 JSON B 作为参数）：

返回一个新的 JSON 对象，其中包含：

```
{
"Field C":"3", // because function sees jsonstringB had no "Field C"
"Field D": "Different" // sees jsonstringB had a different value for "Field D"
} 
```

请注意，它使用 jsonstringA 作为比较的基础，因此该函数仅返回缺少的字段和 jsonStringB 的值。这就是为什么不返回“字段 E”及其值的原因。

如果可能想出一个返回包含已更改值的 json 对象的函数，最好的方法是什么？

我尝试了什么：我尝试通过手动指定我要检查的字段来进行比较，但我想要一些要求我不要硬编码“字段”的东西，因为它效率很低而且每次我添加JSON B 的一个新字段，我必须在我正在寻找的字段中进行硬编码......这就是为什么我正在寻找不那么痛苦的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T21:10:23.093

创建这样的函数并不难。只需遍历第二个对象中的每个字段，如果它不存在于第一个对象中或值与第一个对象不同，则将该字段放入返回对象中。

```
var compareJSON = function(obj1, obj2) {
  var ret = {};
  for(var i in obj2) {
    if(!obj1.hasOwnProperty(i) || obj2[i] !== obj1[i]) {
      ret[i] = obj2[i];
    }
  }
  return ret;
}; 
```

[您可以在此演示页面](http://jsfiddle.net/muJEu/)上看到它的实际效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:12:01.983

您可以在[这里查看 json diff wrapper](https://github.com/samsonjs/json-diff)

它也有演示页面。你可以使用这个包装器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T00:46:08.260

该函数，正是我所追求的，对于非 JSON 对象比较也很有用

[http://jsfiddle.net/muJEu/11/](http://jsfiddle.net/muJEu/11/)

还将它扩展到深层嵌套对象。

```
isEmpty 
```

可以通过多种方式完成。请参阅 [对象是否为空？](https://stackoverflow.com/questions/4994201/is-object-empty/7815752#7815752)

```
var compareObj = function(obj1, obj2) { 
  var ret = {},rett; 
  for(var i in obj2) { 
      rett = {};  
      if (typeof obj2[i] === 'object'){
          rett = compareObj (obj1[i], obj2[i]) ;
          if (!isEmpty(rett) ){
           ret[i]= rett
          }              
       }else{
           if(!obj1 || !obj1.hasOwnProperty(i) || obj2[i] !== obj1[i]) { 
              ret[i] = obj2[i]; 
      } 
   }
  } 
  return ret; 
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-16T06:44:25.663

在彼得奥尔森的回答中，它不会检查`array`值，为了克服这个问题，我已经修改了这样的解决方案。

```
var compareJSON = function(obj1, obj2) { 
      var ret = {}; 
      for(var i in obj2) { 
        if(!obj1.hasOwnProperty(i) || obj2[i] !== obj1[i]) {
          if(!Array.isArray(obj2[i]) || !(JSON.stringify(obj2[i]) == JSON.stringify(obj1[i]))){
          ret[i] = obj2[i];
          }
        } 
      } 
      return ret; 
    }; 
```

# google-doodle - 谷歌可能为这个“Gideon Sundback doodle”使用了哪些可能的网络技术

> ID：10357834
> 
> 赞同：0
> 
> 时间：2012-04-27T21:05:42.970
> 
> 标签：google-doodle

谷歌可能为这个[Gideon Sundback 涂鸦](http://www.youtube.com/watch?v=utijBRRmAJo&feature=relmfu)使用了哪些网络技术（[见视频](http://www.youtube.com/watch?v=utijBRRmAJo&feature=relmfu)）

[http://www.youtube.com/watch?v=utijBRRmAJo&feature=relmfu](http://www.youtube.com/watch?v=utijBRRmAJo&feature=relmfu)

我真的很好奇。在网络浏览器中，我们真的可以做到这么多吗？我猜它不是闪光灯，否则我不会怀疑。有可用的源代码或类似示例吗？

猜猜它展示了我们现在可以在网络技术中扩展多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:43:38.683

使用了 Canvas 元素`<canvas>`。所有现代浏览器现在都支持 HTML5 - Firefox、chrome 和 Opera。是的，今天的浏览器可以做到这些！

拉链齿是从 png sprite 文件中绘制到画布上的。拉链滑块也位于该 png 图像中。整个交互动画是用 Javascript 编码的。拉链剥离效果是使用上下文对象的 arc() 方法完成的，在这种情况下上下文是 2d。

一旦您单击滑块，它就会隐藏所有 Dom 元素 - 按钮和文本输入，您看到的只是画布绘图。由于使用了使用的javascript代码，不能单独在本地html文件上重新创建效果。我认为使用了一些外部库。我不确定 google.listen() 方法是如何工作的，因为它没有定义。在这里查看 javascript， [在这个线程中，这是美化的 javascript 代码，使用 jsbeautifier.org](https://stackoverflow.com/questions/10295980/is-the-gideon-sundback-zipper-doodlegoogle-24th-april-completely-javascript)

# c++ - remove_if 出现问题（在几次删除后停止删除）

> ID：10357836
> 
> 赞同：4
> 
> 时间：2012-04-27T21:05:49.563
> 
> 标签：c++, algorithm, remove-if

下面的代码想要获取一个字符串并仅输出英文字母表中的小写字母。

```
string simplifyString(string word)
{
    word.erase(remove_if(word.begin(), word.end(), [](char letter){return !isalpha(letter);}));
    transform(word.begin(), word.end(), word.begin(), tolower);
    return word;
}

int main()
{
    string s = "a.b.c.d.e.f.g.h.";
    cout << simplifyString(s) << endl;;
    return 0;
} 
```

输出为：abcdefgh.fgh

所以代码工作，然后停止工作。到底他妈发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T21:08:47.850

```
word.erase(remove_if(...)); 
```

这很接近，但并不完全正确。这只会*删除*由`remove_if`. 您要删除整个范围：

```
word.erase(remove_if(...), word.end()); 
```

# ruby-on-rails - Rails 3.查询不正确

> ID：10357841
> 
> 赞同：4
> 
> 时间：2012-04-27T21:05:59.837
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个名为cheduled_sessions 的表和一个名为instructor_performed 的布尔列，用于检查教师是否教过这门课。

所以我需要找到所有老师没有教课的记录。但我不能这样做：`ScheduledSession.where(:instructor_performed => false)`因为如果单元格为空白，它将不会返回该记录。我只需要所有不真实的记录。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T21:20:15.923

听起来您的`instructor_performed`列可以是 true、false 或 NULL，因此您需要查询 false 或 NULL，如下所示：

```
ScheduledSession.where(instructor_performed: [false, nil]) 
```

如果您将数据库表设置为在该列中不允许空值，则可以避免这种复杂性。您可以在迁移中创建表时指定此约束：

```
add_column :scheduled_session, :instructor_performed, :boolean,
  null: false, default: false 
```

或者

```
create_table :scheduled_session do |t|
  t.boolean :instructor_performed, null: false, default: false
  ...
end 
```

或者您可以更改现有列的约束：

```
change_column_null :scheduled_session, :instructor_performed, false, false 
```

在上述所有内容中，我们将列设置为仅允许真值或假值，*并且*我们告诉它使用默认值假。（如果不设置默认值，则无法添加无空约束，因为现有数据违反了它。）

当我设置布尔列时，我几乎总是不允许空值（除非我真的想要三态属性），因为它让我可以这样做来查找所有不正确的内容：

```
ScheduledSession.where(instructor_performed: false) 
```

* * *

请注意，其他鼓励使用 SQL 片段的答案（现已删除）`"instructor_performed != true"`将不起作用，因为 SQL 不允许您使用`=`或`!=`匹配 NULL 值。有点奇怪，但这是规则。相反，SQL 让你这样做：

```
SELECT * from scheduled_sessions WHERE instructor_performed IS NULL
  OR instructor_performed = FALSE; 
```

`where`只要您仍然知道您正在搜索两个值，上面的 Rails查询就会对您有所隐藏。

# javascript - Getting countdown to count correctly

> ID：10357843
> 
> 赞同：0
> 
> 时间：2012-04-27T21:06:13.453
> 
> 标签：javascript, jquery, countdown

Hey all i have this code posted here: **http://jsfiddle.net/mN6Gy/12/**

Problem is it skips numbers in the seconds (goes from 30, 25, 24, 23, 22, 21, 20, 15,...)

and once the seconds reach 00 it start back over on 99, 98, 97, 96...!!

Any help to find this in the code would be great!

Thanks,

David

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:46:09.327

Oh boy, this is was not fun to debug - and I'm not sure I have all the answers...

The issue I found is that you have too many days so your indexes are off.

```
Options.format: "dd:hh:mm:ss"
> Actually have '119:01:16:18' (for example) 
```

So when you are looping through, all your indexes are off by one - for now. But when the time gets to <100 days, it would be right - I think.

As a hacky solution to see what I mean (and so you may have a place to start the fix), see this editing snippet:

```
 switch (options.format[i]) {
      case 'h':
        digits[c].__max = ((c-1) % 2 == 0) ? 2: 9;  // <== EDIT
        if (c % 2 == 0)
          digits[c].__condmax = 4;
        break;
      case 'd':
        digits[c].__max = 9;
        break;
      case 'm':
      case 's':
        digits[c].__max = ((c-1) % 2 == 0) ? 5: 9;  // <== EDIT
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T02:03:34.917

Generally, the code seems to run fine - after `x` seconds, the counter counts `x` less. The `setInterval()` function in your code

```
setInterval(moveStep(digits.length - 1), 1000); 
```

calls `moveStep()` every 1000 miliseconds, i.e. every second. However, you cannot expect your computer, your operating system and your browser to be totally precise with miliseconds. Sometimes the event triggers sooner and sometimes it triggers later (especially if you are also running other programs that may interfere or slow down your code). So it just may happen that instead of

```
counter=2 - 1 second delay - counter=1 - 1 second delay - counter=0 
```

you get

```
counter=2 - 2 second delay - counter=1 - counter=0 
```

or something like that. In this case, you wouldn't see the `counter=1`, because it gets immediately redrawn when the next event triggers and `counter` is set to `0`.

One thing you can do is to use `setTimeout` instead of `setInterval`, so you get

```
var callback = function() {
    moveStep(digits.length - 1);
    setTimeOut(callback, 1000);
}

setTimeOut(callback, 1000); 
```

In this case, the timed events won't line up in a queue and then trigger at once, like they did in the previous case. This is because you don't set the interval, but just a timeout - the next event is scheduled to occur 1 second after the current event has finished. This way, the time between two events will always be (approximately) 1 second.

However, the problem here is with the world approximately. In the first case, `setInterval()` schedules the events to occur 1 second, 2 seconds, 3 seconds etc. from now, so after `x` seconds, your counter should be decreased by `x`, although it sometimes doesn't redraw at every step. However, in the second case, when using `setTimeout`, the little deviations from 1000 miliseconds may slowly build up, so your counter will get decremented by `x*1.1` after `x` seconds, or something like that. In other words, you can't guarantee it to be on time.

To sum it up, you're facing a common problem with `setInterval` and I don't think there is much to do about it.

# jquery - 如何在 iOS 网络应用程序中禁用橡皮筋？

> ID：10357844
> 
> 赞同：27
> 
> 时间：2012-04-27T21:06:18.183
> 
> 标签：jquery, web-applications, rubber-band

这个：

```
$('body').on('touchmove', function(e) { e.preventDefault(); }); 
```

有效，但会禁用整个页面的滚动，这远非理想。

这个：

```
$('*').on('touchstart', function(e){
    var element = $(this).get(0);

    if ( element.scrollTop <= 0 )                                           element.scrollTop = 1;
    if ( element.scrollTop + element.offsetHeight >= element.scrollHeight ) element.scrollTop = element.scrollHeight - element.offsetHeight - 1;
}); 
```

适用于具有滚动区域的页面。但是，当没有任何内容可滚动时，它将再次显示橡皮筋。

所以我的问题：

如何禁用橡皮筋效果并仍然保持`-webkit-overflow-scrolling`区域可滚动？

[更新]

**最佳解决方案**

禁用所有不可滚动元素（例如选项卡栏或导航栏）的滚动。

```
anElement.addEventListener('touchmove', function( event ){ event.preventDefault() }; 
```

将滚动处理程序附加到可滚动元素，例如主要内容。

```
anElement.addEventListener('touchstart', function( event ){
        if( this.scrollTop === 0 ) {
            this.scrollTop += 1;
        } else if( this.scrollTop + this.offsetHeight >= this.scrollHeight ) {
            this.scrollTop -= 1;
        }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-07T02:24:09.847

Ran into the same issue recently with a SPA where the `<body>` rubber-banding was detracting from the experience, but I needed scrolling in sub-areas. Many thanks to dSquared's suggestions, as Method 1 worked best for me. Here is my small expansion of his suggestion that I implemented in a project for work that looks all the way up the tree to find any elements (not just divs) that have a `.scroll` class on it:

```
// Prevent rubber-banding of the body, but allow for scrolling elements
$('body').on('touchmove', function (e) {
    var searchTerms = '.scroll, .scroll-y, .scroll-x',
        $target = $(e.target),
        parents = $target.parents(searchTerms);

    if (parents.length || $target.hasClass(searchTerms)) {
        // ignore as we want the scroll to happen
        // (This is where we may need to check if at limit)
    } else {
        e.preventDefault();
    }
}); 
```

And here is what the CSS looks like:

```
body {
    height: 100%;
    overflow: hidden;
}
.scroll, .scroll-y, .scroll-x {
    -webkit-overflow-scrolling: touch;
}
.scroll > *, .scroll-y > *, .scroll-x > * {
    -webkit-transform : translateZ(0);
}
.scroll { overflow: auto; }
.scroll-y { overflow-y: auto; }
.scroll-x { overflow-x: auto; } 
```

You only need one library (jQuery or [Zepto](http://zeptojs.com/)) and you get native scrolling with momentum and no rubber-banding on the body. Also, I've added the translateZ to fix some issues I've had with elements disappearing during scrolling and it can be used to [GPU accelerate your elements](http://creativejs.com/2011/12/day-2-gpu-accelerate-your-dom-elements/).

BUT (and this is a big but), as dSquared points out, the whole page rubber-bands when the scroll element is at its limit and attempted to scroll further. Personally, I consider this a failure so I'm continuing to work on it, just wanted to pitch in on trying to figure this out. Adding a check along the lines of the OP's code might be the answer, but I haven't tried it.

UPDATE (10/7/12):

After lots of work, I've gotten the following code working perfectly in iOS6 (haven't tested in anything else). No rubber-banding on the body, no more issues when at the limit of the scroll area, and it has native scrolling performance throughout. It's obviously a lot more code that originally, but I think this will give the behavior closest to the OP's goals.

```
(function registerScrolling($) {
    var prevTouchPosition = {},
        scrollYClass = 'scroll-y',
        scrollXClass = 'scroll-x',
        searchTerms = '.' + scrollYClass + ', .' + scrollXClass;

    $('body').on('touchstart', function (e) {
        var $scroll = $(e.target).closest(searchTerms),
            targetTouch = e.originalEvent.targetTouches[0];

        // Store previous touch position if within a scroll element
        prevTouchPosition = $scroll.length ? { x: targetTouch.pageX, y: targetTouch.pageY } : {};
    });

$('body').on('touchmove', function (e) {
    var $scroll = $(e.target).closest(searchTerms),
        targetTouch = e.originalEvent.targetTouches[0];

    if (prevTouchPosition && $scroll.length) {
        // Set move helper and update previous touch position
        var move = {
            x: targetTouch.pageX - prevTouchPosition.x,
            y: targetTouch.pageY - prevTouchPosition.y
        };
        prevTouchPosition = { x: targetTouch.pageX, y: targetTouch.pageY };

        // Check for scroll-y or scroll-x classes
        if ($scroll.hasClass(scrollYClass)) {
            var scrollHeight = $scroll[0].scrollHeight,
                outerHeight = $scroll.outerHeight(),

                atUpperLimit = ($scroll.scrollTop() === 0),
                atLowerLimit = (scrollHeight - $scroll.scrollTop() === outerHeight);

            if (scrollHeight > outerHeight) {
                // If at either limit move 1px away to allow normal scroll behavior on future moves,
                // but stop propagation on this move to remove limit behavior bubbling up to body
                if (move.y > 0 && atUpperLimit) {
                    $scroll.scrollTop(1);
                    e.stopPropagation();
                } else if (move.y < 0 && atLowerLimit) {
                    $scroll.scrollTop($scroll.scrollTop() - 1);
                    e.stopPropagation();
                }

                // If only moving right or left, prevent bad scroll.
                if(Math.abs(move.x) > 0 && Math.abs(move.y) < 3){
                  e.preventDefault()
                }

                // Normal scrolling behavior passes through
            } else {
                // No scrolling / adjustment when there is nothing to scroll
                e.preventDefault();
            }
        } else if ($scroll.hasClass(scrollXClass)) {
            var scrollWidth = $scroll[0].scrollWidth,
                outerWidth = $scroll.outerWidth(),

                atLeftLimit = $scroll.scrollLeft() === 0,
                atRightLimit = scrollWidth - $scroll.scrollLeft() === outerWidth;

            if (scrollWidth > outerWidth) {
                if (move.x > 0 && atLeftLimit) {
                    $scroll.scrollLeft(1);
                    e.stopPropagation();
                } else if (move.x < 0 && atRightLimit) {
                    $scroll.scrollLeft($scroll.scrollLeft() - 1);
                    e.stopPropagation();
                }
                // If only moving up or down, prevent bad scroll.
                if(Math.abs(move.y) > 0 && Math.abs(move.x) < 3){
                  e.preventDefault();
                }

                // Normal scrolling behavior passes through
            } else {
                // No scrolling / adjustment when there is nothing to scroll
                e.preventDefault();
            }
        }
    } else {
        // Prevent scrolling on non-scrolling elements
        e.preventDefault();
    }
});
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T20:46:33.913

不幸的是，没有“灵丹妙药”解决此问题，因为 Mobile Safari 上的橡皮筋滚动是浏览器本身的内置“功能”。通过使用浏览器提供的任何默认滚动机制，您最终会得到某种程度的橡皮筋滚动。

我建议有两种方法来解决这个问题：

**方法一**

绑定到元素`touchmove`上的事件并检查事件的目标以查看您是否希望它像这样触发：`</body>``touchmove`

HTML

```
<div class="scroll">
    <p>...</p>
    <p>...</p>
</div> 
```

JS

```
$('body').on('touchmove', function(e) {
    // this is the node the touchmove event fired on
    // in this example it would be the </p> element
    target = e.target;

    // we need to find the parent container
    // we get it like so; assumes div as parent
    parent = $(e.target).closest('div');

    // check if the parent is a scroll window by class //
    if ($(parent).hasClass('scroll')){
        // ignore as we want the scroll to happen
    } else {
        e.preventDefault();
    }
}); 
```

**[JSFiddle 示例在这里](http://jsfiddle.net/6QAVZ/10/)**

此方法使用浏览器的默认滚动，但是它的缺点是在滚动的顶部或底部时仍然会有橡皮筋滚动`</div>`。

**方法二**

像以前一样绑定到元素的`touchmove`事件`</body>`，但是在这种情况下，我们阻止**所有** `touchmove`事件并依靠优秀的[iScroll 4](http://cubiq.org/iscroll-4)插件来处理滚动，如下所示：

HTML

```
<div id="wrapper">
    <div id="scroller">
        <p>...</p>
        <p>...</p>
    </div>
</div> 
```

JS

```
$(document).ready(function(){
    // prevent all scroll //
    $('body').on('touchmove', function(e) {
        e.preventDefault();
    });

    // apply iscroll to scrolling element
    // requires use of id
    var newscroll = new iScroll('wrapper');
});​​ 
```

**[JSFiddle 示例在这里](http://jsfiddle.net/bMUdQ/9/)**

这是我的首选方法，因为它阻止了所有橡皮筋滚动并提供了一个很好的滚动区域，但是它依赖于插件的使用。

我希望这有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-19T09:22:37.413

有没有人考虑过只使用固定在身体上的位置？这是一个不错、简单且原生的解决方案。不需要Javascript。

```
body{
    position: fixed;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-27T18:18:56.413

这是一个使用 jQuery 和 Hammer.js (jquery-implementation) 的解决方案。那是两个库，但是如果您在移动设备上工作，那么无论如何您都可能想要包含 Hammer。

对于冒泡到顶部的每个拖动事件（因此非滚动拖动交互可以使用 stopPropagation），处理程序检查它是否冒泡通过具有 class=scrolling 的任何元素，如果是，则用户是否在允许的边界内滚动scrollContainer，只有这样它才允许本机滚动。

```
$("body").hammer().on('drag swipe', function(e){

    var scrollTarget = $(e.gesture.target).closest(".scrollable");
    if(scrollTarget.length)
    {
        var scrollTopMax = scrollTarget[0].scrollHeight - scrollTarget.outerHeight();
        if(scrollTopMax > 0){
            var scrollTop = scrollTarget.scrollTop();
            if(scrollTop > 0 && scrollTop < scrollTopMax){
                //console.log("scrolling in the middle");
            }
            else if(scrollTop <= 0 && e.gesture.deltaY < 0){
                //console.log("scrolling from top");
            }
            else if(scrollTop >= scrollTopMax && e.gesture.deltaY > 0){
                //console.log("scrolling from bottom");
            }
            else{
                //console.log("trying to scroll out of boundaries");
                e.gesture.preventDefault();
            }
        }
        else{
            //console.log("content to short to scroll");
            e.gesture.preventDefault();
        }
    }
    else{
        //console.log("no containing element with class=scrollable");
        e.gesture.preventDefault();
    }
}); 
```

通过捏等杀死阻力；如果您的视图是用户可缩放的，则根据需要进行转义以允许缩放

```
$("body").hammer().on('doubletap rotate pinch', function(e){
    e.gesture.preventDefault();
}); 
```

在 ios7/safari、android4.3/webview 和 android4.3/firefoxMobile25 上进行了测试，并且是唯一没有中断的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-26T19:15:13.473

最后我混合了一些方法，这些代码是工作版本。但是你必须包含[hammer.js](https://github.com/EightMedia/jquery.hammer.js/)

CSS

```
.scrollable{
    overflow:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;
    *{-webkit-transform:translate3d(0,0,0);}
} 
```

JAVASCRIPT

```
$(document).on("touchmove",function(e){
    e.preventDefault();
});
$("body").on("touchstart",".scrollable",function(e){
    if(e.currentTarget.scrollTop===0){
        e.currentTarget.scrollTop = 1;
    }else if(e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight){
        e.currentTarget.scrollTop-=1;
    }
});
$("body").on("touchmove",".scrollable",function(e){
    e.stopPropagation();
});

$("body").hammer().on("pinch",function(e){
    e.gesture.preventDefault();
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-21T00:19:24.533

根据@Mark 的回答，我们提出了这个似乎可行的替代方案。替换`.page_list`为可滚动项的类名。

```
var INITIAL_Y = 0; // Tracks initial Y position, needed to kill Safari bounce effect

function kill_safari_bounce() {
    $( document ).on( 'touchstart', function( e ){
        INITIAL_Y = e.originalEvent.touches[0].clientY;
    });

    $( document ).on( 'touchmove', function( e ) {
        // Get scrollable ancestor if one exists
        var scrollable_ancestor = $( e.target ).closest( '.page_list' )[0];

        // Nothing scrollable? Block move.
        if ( !scrollable_ancestor ) {
            e.preventDefault();
            return;
        }

        // If here, prevent move if at scrollable boundaries.
        var scroll_delta = INITIAL_Y - e.originalEvent.touches[0].clientY;
        var scroll_pos = scrollable_ancestor.scrollTop;         
        var at_bottom = (scroll_pos + $(scrollable_ancestor).height()) == scrollable_ancestor.scrollHeight;

        if ( (scroll_delta < 0 && scroll_pos == 0) ||
             (scroll_delta > 0 && at_bottom) ){
            e.preventDefault();
        }    
    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-18T09:12:59.027

在我看来，我写了这个问题的最佳解决方案。除非元素有 y 滚动，否则它通常会禁用滚动。

```
/********************************************************************************
 * Disable rubber band (c)2013 - Mark van Wijnen | www.CrystalMinds.nl
 ********************************************************************************/
$(function(){
    var scrollY = 0;

    $(document).on('touchstart', function( e ){
        scrollY = e.originalEvent.touches.item(0).clientY;
    });

    $(document).on('touchmove', function( e ){
        var scrollPos       = e.target.scrollTop;
        var scrollDelta     = scrollY - e.originalEvent.touches.item(0).clientY;
        var scrollBottom    = scrollPos + $(e.target).height();
        scrollY             = e.originalEvent.touches.item(0).clientY;

        if ( $(e.target).css( 'overflow-y' ) != 'scroll' || ( scrollDelta < 0 && scrollPos == 0 ) || ( scrollDelta > 0 && scrollBottom == e.target.scrollHeight ) ) 
            e.preventDefault();
    });
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-10-08T17:14:14.607

`-webkit-overflow-scrolling: auto;`只需在要防止弹跳的 div 中添加一个

# zend-framework - 如何通过 application.ini 添加资源类型

> ID：10357846
> 
> 赞同：1
> 
> 时间：2012-04-27T21:06:21.083
> 
> 标签：zend-framework

如何在 application.ini 中添加此资源类型。（在 Bootstrap.php 中工作，但如果可能的话，我更喜欢在 application.ini 中......）

```
protected function _initResourceLoader()
{
    $this->_resourceLoader->addResourceType( 'service', 'services/', 'Service' );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:12:18.513

您可以创建自己的应用程序资源：

```
class My_Resource_Resourceloader extends Zend_Application_Resource_ResourceAbstract
{
    public function init()
    {
        $options = $this->getOptions();

        /* @var $resourceLoader Zend_Loader_Autoloader_Resource */
        $resourceLoader = $this->getBootstrap()->getResourceLoader();
        foreach ($options as $method => $params) {
            if (method_exists($resourceLoader, $method)) {
                call_user_func_array(array($resourceLoader, $method), $params);
            }
        }
    }
} 
```

在 application.ini 中指定资源路径：

```
pluginpaths.My_Resource = "My/Resource" 
```

配置单一资源：

```
resources.resourceloader.addResourceType.1 = "service"
resources.resourceloader.addResourceType.2 = "services/"
resources.resourceloader.addResourceType.3 = "Service" 
```

配置多个资源：

```
resources.resourceloader.addResourceTypes.1.acl.path = "acls/"
resources.resourceloader.addResourceTypes.1.acl.namespace = "Acl"
resources.resourceloader.addResourceTypes.1.service.path = "services/"
resources.resourceloader.addResourceTypes.1.service.namespace = "Service" 
```

# sql-server - 当 msdeploy 在创建用户时失败时，我的 SQL Server 数据库处于什么状态？

> ID：10357848
> 
> 赞同：0
> 
> 时间：2012-04-27T21:06:39.087
> 
> 标签：sql-server, msdeploy, webdeploy

我正在使用 msdeploy（版本 2）将数据库从机器 A 传输到机器 B。

在机器 A 上的数据库中有一些用户在机器 B 上不存在，因此传输（部分）失败并显示以下消息：

```
Error Code: ERROR_SQL_EXECUTION_FAILURE
More Information: An error occurred during execution of the database script. 
The error occurred between the following lines of the script: "3" and "5". 
The verbose log might have more information about the error. 
The command started with the following: "CREATE USER [someDomain\someUser] FOR LOGIN [someDomain" 
Windows NT user or group 'someDomain\someUser' not found. 
Check the name again. http://go.microsoft.com/fwlink/?LinkId=178587 
```

数据库似乎被转移了，除了用户创建。有谁知道这次失败后数据库处于什么状态？

有什么方法可以在没有用户（或者没有特定用户的情况下更好）的情况下使用 msdeploy 传输数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:42:50.607

Web 部署使用 SMO（SQL 管理对象）编写脚本并将脚本应用于 SQL 数据库，并使用 dbfullsql 提供程序公开大多数 SMO 设置（因此，这些选项中的大多数：http: [//msdn.microsoft.com/en -us/library/microsoft.sqlserver.management.smo.transfer_properties.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.transfer_properties.aspx)）。如果由于这种登录不存在或用户未找到错误而要跳过用户，您应该能够通过添加脚本选项来做到这一点：copyAllUsers=false 到同步源。例如：

msdeploy.exe -verb:sync -source:dbfullsql="Data Source=.\SQLExpress;Initial Catalog=MySourceDb;User Id=localUser;Password=LocalPass",copyAllUsers=false -dest:dbfullsql="Data Source=RemoteSQLServer;Initial目录=MyDestDb；用户 ID=remoteUser；密码=RemotePass"

顺便说一句，我很惊讶你注意到数据库似乎已经同步了——我希望情况并非如此。如果您有权限，Web Deploy 将创建数据库，如果它在最初尝试建立连接时不存在，但您的失败发生在脚本执行的早期，我相信 Web Deploy dbfullsql 同步由默认（数据库创建与脚本执行是分开的，不进行事务处理）。因此，数据库可能存在于它没有预先同步的地方，但我不希望数据存在于其中。

# javascript - 什么数据类型是 $('#checkbox').attr('checked')

> ID：10357849
> 
> 赞同：1
> 
> 时间：2012-04-27T21:06:46.777
> 
> 标签：javascript, jquery, html, checkbox

我在网上做了很多搜索，发现了将`$('#checkbox').attr('checked')`其视为字符串的示例和其他将其视为布尔值的示例。

就我而言，我发现此语句按预期工作：

```
$('#AcceptAgreement').attr('checked', false); 
```

但是这个没有：

```
if ($('#AcceptAgreement').attr('checked') == true) 
```

第二个语句是错误的，因为实际上该值是“已检查”。

那么它是哪一个？它是字符串还是布尔值，如何以可靠的方式读写它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:17:16.797

可能您不应该使用属性，只需使用 dom 节点的“已检查”属性来更改状态

```
$('#AcceptAgreement')[0].checked = false
if ($('#AcceptAgreement')[0].checked) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:10:24.340

这取决于您使用的 jQuery 版本。

`checked`既是属性又是属性。在旧版本的 jQuery 中，`.attr()`总是返回属性，而不是属性，它通常是一个布尔值。较新版本的 jquery (1.6+) 有一个称为`.prop`返回布尔属性值的新方法，而`.attr()`现在正确返回字符串值。我不确定属性更改时属性是否总是更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:09:03.593

它是一个字符串，但 jQuery 允许您使用布尔值设置它，然后相应地更改属性。将其设置为“false”会导致`attr('checked')`返回`undefined`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T21:13:34.683

有一种找出数据类型的基本方法

```
console.log(typeof $('#AcceptAgreement').attr('checked')); 
```

但在 jQuery 1.7 之前，它用于返回属性值，现在它返回纯字符串。

另一种选择是`.prop('checked')`返回布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T21:12:08.060

要编写，您必须使用：

```
$('#AcceptAgreement').attr('checked', 'checked'); 
```

如果你想知道它是否被检查可以使用：

```
if($('#AcceptAgreement').attr('checked')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T21:12:20.547

您可以使用：

```
if ($('#AcceptAgreement').is(':checked'))
{
   //...
} 
```

或缩短：

```
$('#isAgeSelected').is(':checked') ? /*true*/ : /*false*/ ; 
```

# orbeon - 表单运行器持久性、会话 Cookie

> ID：10357853
> 
> 赞同：0
> 
> 时间：2012-04-27T21:06:59.720
> 
> 标签：orbeon

我们正在将 Form Runner/Builder 集成到具有自定义持久层的项目中。

现在我们设置了 emptySessionPath="true" 以保持 Orbeon 和我们的 Java 应用程序在同一个会话中。

Orbeon 在持久性 CRUD 调用中传递 jsessionid cookie……除了以下实例……

1.  用户连接到我们的 Java 应用并登录，设置了 jsessionid cookie
2.  用户在 /fr/OurApp/formtest/edit/3eb4ddcf03f2410084e5578adb1e2a7b 访问现有表单实例（存在会话 Cookie）
3.  对我们的自定义持久层进行持久化调用，但不转发 cookie

但是，如果用户首先通过调用 /fr/orbeon/builder/edit/f40efbe298204d16b6474fcdfea4c9fd 来编辑表单本身，这确实会将 cookie 传递给持久层

此时用户可以访问步骤 2 以完成表单实例，并且 cookie 将保留。似乎由于某种原因需要启动表单构建器才能在完成表单时将 cookie 转发到持久层？

关于为什么 cookie 没有在步骤 2 中通过的任何想法？

仅供参考，这是在 Orbeon 3.9 CE 上，在 3.8 中也有相同的行为。使用 VMWare TC 服务器 (Tomcat)。我们的 java 应用程序是 Spring/Grails 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:42:49.407

我想知道这是否可能是[此错误](http://forge.ow2.org/tracker/index.php?func=detail&aid=315104&group_id=168&atid=350207)中描述的内容（特别参见评论）。基本上，您似乎并不总是可以可靠地生产`JSESSIONID`cookie。正如错误所说，我们现在没有解决方案。

您认为该错误是否与您的情况相对应？

# events - 在 Doctrine 2 上未触发 preUpdate 和 postUpdate 事件

> ID：10357855
> 
> 赞同：11
> 
> 时间：2012-04-27T21:07:01.497
> 
> 标签：events, symfony, doctrine

我已按照本教程中的说明进行操作： http: [//symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)，并创建了一个简单的侦听器，用于侦听 Doctrine 在插入或更新实体时调度的事件. preInsert 和 postInsert 事件工作正常，并在创建新实体时分派。但是，无论如何，在实体的更新上都不会调用 preUpdate 和 postUpdate。onFlush 也是如此。作为旁注，我有一个控制台生成的控制器，它支持基本的 CRUD 操作，并且保持不变。

下面是一些代码片段来演示我这样做的方式。

配置.yml

```
annotation.listener:
    class: City\AnnotatorBundle\Listener\AnnotationListener
    tags:
        -  { name: doctrine.event_listener, event: postUpdate} 
```

监听器实现（为了简单起见，我省略了其他函数，只留下了 postUpdate）

```
class AnnotationListener
{

    public function postUpdate(LifecycleEventArgs $args)
    {
        $entity=$args->getEntity();

        echo $entity->getId();
        die;
    }
} 
```

实体 id 永远不会显示，并且脚本会继续执行直到它完成，尽管函数结束时**死亡。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T09:54:35.473

你忘了加`@HasLifecycleCallbacks`注解吗？您可以使用`@PreUpdate`注释并完全跳过服务定义。

```
/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class YouEntity
{

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpdate(){
        // .... your pre-update logic here
    }
    ....
} 
```

在我看来，这种附加事件的方式要容易得多，因为您不必**明确**定义新的服务和侦听器。此外，您还可以直接访问正在更新的数据，因为此方法是您实体中的位置。

现在，缺点是您将逻辑与模型混合在一起，如果可能的话，应该避免这种情况......

您可以在此处阅读有关生命周期回调的更多信息：http: [//symfony.com/doc/master/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks](http://symfony.com/doc/master/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)

# ruby - 更改由 Watir Webdriver 在 ruby 中创建的浏览器的进程优先级

> ID：10357857
> 
> 赞同：2
> 
> 时间：2012-04-27T21:07:08.213
> 
> 标签：ruby, windows, browser, watir-webdriver

我在 Windows 计算机上的 ruby​​ mine 中有这个：

```
require 'watir-webdriver'

Before do
  @browser = Watir::Browser.new :ie
end 
```

我需要将@browser 更改为以更高的优先级运行，因为当其他程序同时运行时会出现一些超时问题。我知道如何增加允许超时的时间，但经过一些测试后，我发现我必须将超时设置得比我认为可以接受的要高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:17:46.350

我发现您实际上可以从对象深处找到网络驱动浏览器的 PID `@browser`（读取所有受保护和私有组件），然后`renice`使用负数来提高优先级，这可能需要`sudo`非 root 用户允许。

我已经探索了[将这个对象导出](https://stackoverflow.com/q/8838274/1069375)为 ASCII 格式进行存储，这实际上是可行的，尽管将其导入回来是另一个问题的主题。试试这个（每次我的代码启动一个新的代码时，我这样做只是为了好玩`Watir::Browser`）：

```
require "yaml" 
File.open("browserObj.yaml", 'w').write YAML::dump($browser) 
```

然后，当您查看此文件**browserObj.yaml**时，它会为您提供各种有趣的信息，例如：

```
 server_url: !ruby/object:URI::HTTP 
      fragment: 
      host: 127.0.0.1
      opaque: 
      parser: 
      password: 
      path: /hub/
      port: 7055
      query: 
      registry: 
      scheme: http
      user: 
    timeout: 
  launcher: !ruby/object:Selenium::WebDriver::Firefox::Launcher 
    binary: !ruby/object:Selenium::WebDriver::Firefox::Binary 
      process: !ruby/object:ChildProcess::Unix::ForkExecProcess 
        args: 
        - ./firefox.sh
        - -no-remote
        - -foreground
        detach: false
        duplex: false
        environment: {}

        exit_code: 
        io: 
        pid: 6114
        started: true 
```

请注意最后第二行中的 PID，此时您的代码可以轻松检测并执行任何操作。

这甚至比简单地用例如解析分层进程树更安全。`pstree -panu $PPID`查找子浏览器进程。

在我自己的东西中，我实际上并不打扰（例如，当我需要杀死正确的 Firefox 进程而不是其他进程时），因为我通过 DISPLAY 去。我所有的桌面/交互式用户的东西都发生在 DISPLAY :0 上，而我的 Watir Webdriver 的东西发生在由 Xvfb 或 Xephyr 托管的 DISPLAY :99 上，我可以更有选择性地`kill`/`xkill`借助`xprop`和`xwininfo`.

**编辑**`kill`为了完整起见，如果需要，这是我用来向 watir-webdriver 浏览器的 pid 发送命令的 Unix/Cygwin 命令：

```
awk '/pid:/ {print $2;}' browserObj.yaml |xargs -rt kill 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:52:48.007

浏览文档和代码，我没有看到任何现成的方法来查找驱动程序使用的 IE 的进程 ID。您可以尝试使用系统工具来发现正在侦听 webdriver 端口（默认 5555）的进程并对该进程进行 nicing。在 posix 上，您可以尝试`lsof`或`netstat`使用特定端口查找进程，我不知道如何在 Windows 上为您提供帮助。

当然，如果这是一个资源竞争问题，你为什么不给你的 watir 测试一个更好的受控环境，没有其他东西阻止它以你想要的速度运行。

# ruby-on-rails - 检测是否显示或处理基于 GET 或 POST 的表单

> ID：10357860
> 
> 赞同：0
> 
> 时间：2012-04-27T21:07:13.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, rails-routing

我有一个`User`模型和一个`Account`控制器。当用户访问`/account`url 时，它应该显示一个表单，其中包含一个包含用户名的文本字段和一个提交表单的按钮。

我有`match '/account' => 'account#index'`我的路线。

在我的控制器中，我定义了这个方法：

```
def index
  @user = User.find(session[:user_id])
end 
```

（检查用户身份验证发生在 a 中`before_filter`）

现在表单正确显示，甚至正确填充。但是，我需要知道如何判断表单是否已提交。什么是铁轨方式？我是否有一条单独的路线来监视对 的`POST`请求`/account`？还是我在`index`方法中检测请求类型？我在什么时候决定表格是否已提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:17:55.180

您可以检测表单是否已在索引控制器内部提交。我相信 params 哈希将密钥 :method 设置为用于请求的方法。

另一种方法是重做您的路线。而不是`match '/account' => 'account#index'`你可以这样做：

```
get '/account' => 'account#index'
post '/account' => 'account#post_action' 
```

然后在您的控制器内部，您可以执行以下操作：

```
def index
  @user = User.find session[user_id]
end

def post_action
  @user = User.find session[user_id]
  if @user.update_attributes params[:user]
    flash[:notice] = 'Update Successful'
    render :action => index
  else
    flash[:notice] = 'Update Unsuccessful'
    render :action => index
  end
end 
```

# java - 您如何创建一个音调发生器，其音调可以在 Java 中“实时”或在运行中进行操作？

> ID：10357861
> 
> 赞同：2
> 
> 时间：2012-04-27T21:07:15.013
> 
> 标签：java, signal-processing, audio

我想用java制作一个可以实时操作的基本音调发生器（只是音高开始）。

我想从简单开始，然后添加更复杂的音调生成和效果，最终得到某种基本的合成器。

我[在这个站点上发现了一篇有用的帖子，](https://stackoverflow.com/questions/7782721/java-raw-audio-output/7782749#7782749)其中包含一个小程序 Beeper.java 中的一些示例代码。

它生成了一个音调并将其保存到一个剪辑中。然后，它会在需要时循环播放该剪辑。相关音调生成位：

```
/** Generates a tone, and assigns it to the Clip. */
public void generateTone()
    throws LineUnavailableException {
    if ( clip!=null ) {
        clip.stop();
        clip.close();
    } else {
        clip = AudioSystem.getClip();
    }
    boolean addHarmonic = harmonic.isSelected();

    int intSR = ((Integer)sampleRate.getSelectedItem()).intValue();
    int intFPW = framesPerWavelength.getValue();

    float sampleRate = (float)intSR;

    // oddly, the sound does not loop well for less than
    // around 5 or so, wavelengths
    int wavelengths = 20;
    byte[] buf = new byte[2*intFPW*wavelengths];
    AudioFormat af = new AudioFormat(
        sampleRate,
        8,  // sample size in bits
        2,  // channels
        true,  // signed
        false  // bigendian
        );

    int maxVol = 127;
    for(int i=0; i<intFPW*wavelengths; i++){
        double angle = ((float)(i*2)/((float)intFPW))*(Math.PI);
        buf[i*2]=getByteValue(angle);
        if(addHarmonic) {
            buf[(i*2)+1]=getByteValue(2*angle);
        } else {
            buf[(i*2)+1] = buf[i*2];
        }
    }

    try {
        byte[] b = buf;
        AudioInputStream ais = new AudioInputStream(
            new ByteArrayInputStream(b),
            af,
            buf.length/2 );

        clip.open( ais );
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

循环位：

```
/** Loops the current Clip until a commence false is passed. */
public void loopSound(boolean commence) {
    if ( commence ) {
        clip.setFramePosition(0);
        clip.loop( Clip.LOOP_CONTINUOUSLY );
    } else {
        clip.stop();
    }
} 
```

我试图解决这个问题，以便在背景中创建另一个剪辑，并在我想更改音高时快速更改另一个剪辑，但是当一个剪辑开始而另一个剪辑停止时，当然会有明显的咔哒声。

所以我猜我需要某种巧妙的缓冲来做到这一点，将一个波的结束与另一波无缝匹配？

还是使用预先生成的剪辑是不可能的？如果是这样，我应该怎么做？

顺便说一句，软件合成器是如何工作的？它们是连续生成所有声音和效果，还是像 Beeper.java 一样预生成“剪辑”和循环？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:08:40.263

听起来您想用 Java 实现一个用相位累加器实现的[数控振荡器 (NCO) 。](http://en.wikipedia.org/wiki/Numerically_controlled_oscillator)

基本上，您需要计算出您想要的频率的增量相位，然后继续将这个模 2pi 添加到累加器中。累加器的值用作`sin()`生成样本值的值。

当你想改变频率时，你更新 delta-phase。这确保了样本的连续性（波中没有突然中断）。我怀疑这是导致您点击的原因。如果你想要更好的改变，那么你需要在一堆样本上逐渐改变 delta-phase。

# html - CSS：锚点不接受高度

> ID：10357862
> 
> 赞同：10
> 
> 时间：2012-04-27T21:07:16.370
> 
> 标签：html, css, hyperlink, html-lists

我已经为此拉了一个多小时的头发，我只是不明白为什么它不起作用。

HTML：

```
<div id="mainmenu">
    <div class="menu">
        <ul>
            <li class="page_item page-item-6"><a href="http://localhost/mysite/blog/">Blog</a></li>
            <li class="page_item page-item-4 current_page_item"><a href="http://localhost/mysite/">Front Page</a></li>
            <li class="page_item page-item-2"><a href="http://localhost/mysite/sample-page/">Sample Page</a></li>
        </ul>
    </div>
</div> 
```

CSS：

```
div#mainmenu { position: absolute; top: 40px; right: 0; font-size: 77%; }
div#mainmenu div.menu ul,
div#mainmenu div.menu ul li,
div#mainmenu div.menu ul li a
{
    height: 36px;
}
div#mainmenu div.menu ul {  
    display: table;
    float: left;
    width: 700px;
    table-layout: fixed;

    position: relative;
}
div#mainmenu div.menu ul li
{
    display: table-cell;
    padding: 0 10px;
    overflow: hidden;
}
div#mainmenu div.menu ul li a
{
    width: auto;
    background: none;
    margin: 10px auto;
} 
```

![在此处输入图像描述](../Images/eefebbcd5a542cdfeb24138b0d07502b.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T21:09:59.540

改成`div#mainmenu div.menu ul li a`这样：

```
div#mainmenu div.menu ul li a
{
    display: block;
    width: auto;
    background: none;
    margin: 10px auto;
} 
```

`a`元素是`inline`默认的，你不能设置内联元素的高度/宽度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T21:13:09.720

链接的默认显示类型是内联，它不响应高度或宽度。相反，告诉您的链接是内联块，这会保留链接的流程，但让它们尊重您的特定大小（高度）的请求。

```
div#mainmenu div.menu ul li a
{
    display:inline-block;
    height:36px;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T21:10:14.070

尝试行高而不是高度：

`line-height:36px`

[http://jsfiddle.net/AlienWebguy/dP4F9/](http://jsfiddle.net/AlienWebguy/dP4F9/)

# jquery - jquery - tablesorterpager 和自定义解析器不能一起工作

> ID：10357863
> 
> 赞同：0
> 
> 时间：2012-04-27T21:07:27.373
> 
> 标签：jquery, tablesorter

我正在编写一段代码来让用户创建和维护联系人列表。联系人列在表格中，第一个单元格是一个复选框，如果此联系人已经在此联系人列表中，则选中该复选框。

我正在使用 tablesorterpager 插件，因此用户可以轻松地翻阅联系人列表；我有一个用于复选框字段的自定义解析器，它将根据复选框是否被选中来对联系人进行排序。

我的问题是我不能同时让这两个工作。

相关代码是这样的：

```
$(function() {
        $('#userTable')
                .tablesorter({
                        headers: {
                                0: {
                                        sorter: 'checkbox'
                                }
                        }
                })
                .tablesorterPager({container: $("#pager")});
}); 
```

如果我注释掉 .tablesorter 调用或 .tablesorterPager 调用，那么另一个可以正常工作。如果我不评论它们，那么只有第二个调用实际上有效 - 似乎我可以有分页或自定义解析器，但不能同时使用。我已经交换了两个电话，并且始终是第二个正在运行的电话-第一个消失了。

我认为我遗漏了一些明显的东西，但我找不到什么。两个调用本身显然都很好，因为当另一个被注释掉时它们可以工作，但它们不能一起工作。

我正在使用 tablesorter 2.1.19（[从这里](https://github.com/Mottie/tablesorter)）；和jQuery 1.7.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T00:30:52.770

当您使用该解析器时，它使用“updateCell”方法来更改单元格内容，但由于该方法使用 rowIndex 和 cellIndex 确定单元格位置，因此当寻呼机处于活动状态时，它可能无法获得准确的信息。因此，最简单的解决方案是将寻呼机`removeRows`选项设置为`false`.

这是[一个演示](http://jsfiddle.net/Mottie/vCTHw/96/)

```
// add parser through the tablesorter addParser method
$.tablesorter.addParser({
  id: 'checkbox',
  is: function(s) {
    return false;
  },
  format: function(s, table, cell, cellIndex) {
    var $c = $(cell);
    // return 1 for true, 2 for false, so true sorts before false
    if (!$c.hasClass('updateCheckbox')) {
      $c.addClass('updateCheckbox').bind('change', function() {
        // resort the table after the checkbox status has changed
        var resort = false;
        $(table).trigger('updateCell', [cell, resort]);
      });
    }
    return ($c.find('input[type=checkbox]')[0].checked) ? 1 : 2;
  },
  type: 'numeric'
});

$(function() {

  $('table')
    .tablesorter({
      widgets: ['zebra'],
      headers: {
        0: { sorter: 'checkbox' }
      }
    })
    .tablesorterPager({
    // target the pager markup - see the HTML block below
    container: $(".pager"),
    // remove rows from the table to speed up the sort of large tables.
    // setting this to false, only hides the non-visible rows; needed
    // if you plan to add/remove rows with the pager enabled.
    removeRows: false
  });

});​ 
```

# android - 如何获得全屏图像？

> ID：10357865
> 
> 赞同：0
> 
> 时间：2012-04-27T21:07:38.973
> 
> 标签：android, gridview, gallery, image-gallery

我已经创建了网格视图并在该网格中插入了一些图像，当我单击它应该作为全屏打开的任何图像时，现在当我向右或向左滑动时，必须切换图像（必须打开另一个图像）这是到目前为止我所做的代码

```
 public class ChaildHood extends Activity
  {    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.g_view);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(ChaildHood.this, "" + position, Toast.LENGTH_SHORT).show();

        }
    });
}

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(10, 10, 10,10);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.child,
            R.drawable.child1,
    };
}
} 
```

这是 g_view xml：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/gridview"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:columnWidth="90dp"
android:numColumns="auto_fit"
android:verticalSpacing="10dp"
android:horizontalSpacing="10dp"
android:stretchMode="columnWidth"
android:gravity="center"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:15:54.533

您可以获取视图的 ImageResource 并使用结果使用可绘制对象创建新的全屏视图。

这是你自己可以弄清楚的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:15:10.930

然而，在 onclick 事件中，您会获得单击项目的位置，因此只需使用 imageview 设计一个新的布局文件，其宽度和高度将填充父级并创建一个显示此布局文件的活动。

现在在 onclick 上只需调用它启动此活动并将位置作为参数传递（使用捆绑）。在活动中，您将获得参数并显示所需的图像。然后，您可以在触摸方法中实现向左滑动和向右滑动事件。只需增加和减少位置值，并在同一活动上显示来自图像数组的新图像。

# ios - 使用 UIBezierPath 的圆角多边形

> ID：10357869
> 
> 赞同：1
> 
> 时间：2012-04-27T21:07:53.130
> 
> 标签：ios, core-graphics, polygon, uibezierpath

我想使用 UIBezierPath 创建一个带圆角的多边形。我相信这将可以使用与[http://www.codeproject.com/Articles/31859/Draw-a-Smooth-Curve-through-a-Set-of-2D-Points-wit](http://www.codeproject.com/Articles/31859/Draw-a-Smooth-Curve-through-a-Set-of-2D-Points-wit)`addCurveToPoint:controlPoint1:controlPoint2:`中的代码类似的代码，但我想知道是否有任何现有的（或更好的）方法可以实现这一目标？

我应该指出，这将需要用于任何凸多边形（例如在 voronoi 图中找到），而不仅仅是矩形。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T00:42:59.947

你不想要 addCurveToPoint。如果您使用的是 UIBezierPath，则需要 addArcWithCenter:radius:startAngle:endAngle:顺时针：

这就是你要做的。画出你的矩形。找出你想要的圆角半径。在每个角落画圆，从每边插入你的角落半径。（每个角圆的中心将从每个角插入 x 和 y 中的角半径。）然后绘制 4 条线的序列，连接矩形与每个角的圆接触的点。

每条弧线将覆盖 90 度（pi/2，以弧度为单位）。右上角的范围从 0 到 pi/2。左上角的角度将从 pi/2 开始并转到 pi。左下角的圆弧范围从 pi 到 3/2 pi。右下角的角度范围为 3/2 pi 到 2pi。

您将使用以下序列：

*   moveToPoint addLineToPoint -- 第一边

    addArcWithCenter:radius:startAngle:endAngle:顺时针 -- 第一个圆角

    lineToPoint --第二边，到下一个圆角的开始

    addArcWithCenter:radius:startAngle:endAngle:顺时针 -- 第二个圆角

    lineToPoint --第三边，到下一个圆角的开始

    addArcWithCenter:radius:startAngle:endAngle:顺时针 -- 第三个圆角

    lineToPoint --forth 边，到最后一个圆角的开始

    addArcWithCenter:radius:startAngle:endAngle:顺时针——第四个圆角，连接回第一边。

    关闭路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:45:12.360

您可以使用 PaintCodeApp，因此您不必编写任何绘图代码。有一个演示下载可用： http: [//www.paintcodeapp.com/](http://www.paintcodeapp.com/)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2015-11-30T14:14:09.227

您可以参考下面的链接来创建一个带有圆角的多边形。

[http://www.scriptscoop.net/t/ec0f886dcfea/create-hexagon-imageview-shape-in​​-ios.html](http://www.scriptscoop.net/t/ec0f886dcfea/create-hexagon-imageview-shape-in-ios.html)

# asp.net - 在 .net 中将表添加到 dbml

> ID：10357871
> 
> 赞同：0
> 
> 时间：2012-04-27T21:07:55.583
> 
> 标签：asp.net, asp.net-mvc, linq-to-sql, asp.net-mvc-2

我有一个在 .net 中使用 MVC 架构的应用程序，并且有一个 dbml 文件。Web 配置文件中使用了三个连接字符串。当前的连接字符串用于生产服务器，我转到 .dbml 文件并单击属性并将连接更改为我的本地系统的 Contentionstring1，重建它并引发错误。它肯定无法识别所有方法和所有我正在拉来自 dbml ，但我想至少更改连接字符串应该可以工作，因为数据库是相同的副本，我构建了解决方案并尝试了一切但没有运气。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:05:44.953

您必须非常小心 .dbml 中自动生成的连接字符串。我假设您正在使用向导来创建 dbml？如果你已经到了它创建 connectionstring1 的阶段，那么你就有了某种重复，它会不断回来咬你。

我的建议是摆脱 dbml，从 web.config 文件中清除所有连接字符串，然后重新开始。一次完成一个 dbml 生成过程，并确保每次创建新连接字符串时都有唯一的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T23:20:31.357

在其中打开**“yourDBML.designer.cs”**，您会发现

```
base(global::System.Configuration.ConfigurationManager.ConnectionStrings["CookItHere"].ConnectionString, mappingSource) 
```

将其更改为您需要的。希望这对你有用。

# css - CSS：获取“禁用”输入背景颜色？

> ID：10357875
> 
> 赞同：2
> 
> 时间：2012-04-27T21:08:24.730
> 
> 标签：css

是否有一种特殊的 CSS 系统颜色等效于系统禁用的文本输入背景颜色？我知道有一种用于禁用的*文本*颜色 ( `GrayText`)，但我找不到用于*背景*颜色的一种。

为了更清楚，我正在寻找当您执行以下操作时设置的背景颜色：

```
<input type="text" disabled /> 
```

我不想重新设计禁用的输入；我想在其他地方使用现有的系统样式。

**编辑：**

为了更清楚，我正在寻找**系统颜色关键字**，而不是实际颜色。例如，要使用系统定义的禁用*文本*颜色，您可以这样做：

```
<span style="color: GrayText;">This text looks like disabled text in your operating system</span> 
```

我只是找不到*背景*颜色的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-12T21:22:37.470

我在尝试为选择设置 javascript 替换样式时遇到了这个问题。虽然 CSS 规范没有任何进展，但有一个 jQuery 替代方案。

```
$("input:disabled").css("background-color") 
```

这会从已禁用的输入中返回 RGB 颜色，因此不幸的是它不如 CSS 颜色灵活，但它可以跨浏览器工作，并对通过 CSS 应用于禁用元素的自定义颜色做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:30:10.033

这不是关键字的目的——颜色的使用[我相信]在技术上取决于浏览器供应商——如果他们观察操作系统的偏好，那么这取决于他们。

[W3C 规范中](http://www.w3.org/TR/css3-color/#colorunits)最初有少量颜色名称。然而，这些被扩展为包括大多数浏览器供应商支持的[X11 颜色名称列表。](http://en.wikipedia.org/wiki/X11_color_names)

这些列表一起是浏览器中可接受的所有*有效名称。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:05:53.377

根据最新的 CSS 规范，“禁用”背景颜色没有系统颜色关键字。

# ruby-on-rails-3 - 在哪里最好使用 twitter-bootstrap 编辑 CSS

> ID：10357883
> 
> 赞同：3
> 
> 时间：2012-04-27T21:09:04.480
> 
> 标签：ruby-on-rails-3, css, twitter-bootstrap

我目前正在尝试掌握引导程序，并且正在努力理解我应该在哪里编辑 CSS。我创建了一个 custom.css.scss 文件来编辑我的 app/assets/stylesheets 文件夹中的设置，但是当我添加规则时，它们似乎经常被覆盖，因此我发现我必须通过转到外部库引导程序来编辑某些元素-sass 资源并深入到 ../stylesheets/bootstrap 文件夹，然后我必须在其中寻找要更改的相关样式。我确定我这样做是错误的，我应该做些什么来确保我的 custom.css.scss 具有优先权？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:45:44.467

您不想自己编辑引导文件，但 CSS 规则具有确定使用哪些 CSS 规则的优先级结构。它不是非常复杂，但在你掌握它之前有点棘手。

[Smashing Magazine](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)对它的介绍相对较好，并附有其他来源的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:37:00.233

在资产中找到的 application.css 中包含所有其他样式，您只需要更改这些样式的顺序，如下所述：[Rails 3.1 Load css in special order](https://stackoverflow.com/questions/8890929/rails-3-1-load-css-in-particular-order)。

# c# - 程序编译，但它没有像我想要的那样执行

> ID：10357884
> 
> 赞同：-5
> 
> 时间：2012-04-27T21:09:07.103
> 
> 标签：c#, android, monodevelop, xamarin.android

我正在尝试让程序开发数学问题，以便我的用户可以回答它们。我自己运行程序，它显示按钮供我点击，它们的数字在增加。谁能帮我解决这个问题。我关心的程序部分是 int Correctcount 的开始。请帮忙

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;

namespace Jagtutor
{

    [Activity(Label = "Addition")]
    public class AdditionsActivity : Activity
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            // Create your application here
            SetContentView(Resource.Layout.Second);

            var label = FindViewById<TextView>(Resource.Id.screen3Label);
            label.Text = Intent.GetStringExtra("ModuleData") ?? "Data not available";

            {
            int correctCount = 0;
            int count = 0;

                 while (count < 10);
                {
                    Random gen = new Random();
                    int num1 = gen.Next();
                    int num2 = gen.Next(); 

                    Console.Write("What is");
                    Console.Write(num1);
                    Console.Write( " - ");
                    Console.Write( num2);
                    Console.Write( "?");
                    int answer = Int32.Parse(Console.ReadLine());

                    if (num1 + num2 == answer) {
                        Console.Write(" Your are Correct!\n");
                        correctCount++;

                    }
                    else
                        Console.Write( "Your answer is wrong" );
                        Console.Write(num1);
                        Console.Write(" + ");
                        Console.Write(num2);
                        Console.Write("should be ");
                        Console.Write(num1 + num2);
                        count++;
                }
            }

        }
    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:13:07.077

你会在 last 的主体周围缺少 { }`else`吗？

# iphone - 检查哪个请求来自 NSURLConnection 委托

> ID：10357890
> 
> 赞同：0
> 
> 时间：2012-04-27T21:09:41.553
> 
> 标签：iphone, objective-c, ios, ipad, nsurlconnection

在委托方法中检查哪个请求是哪个请求的最佳方法是什么：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{

} 
```

现在我有一个 NSURLConnection ，我在发出请求之前设置为 NSURLConnection 并在里面`didReceiveResponse`做：

```
if (self.tempConnection == connection) 
```

但是有可能这不适用于竞争条件。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:14:03.957

在 OS5 中有更好的方法。忘记所有那些烦人的委托消息。让连接为您构建数据，并将完成的代码与您的开始代码保持一致：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.site.com"]];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
    NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
    NSLog(@"got response %d, data = %@, error = %@", [httpResponse statusCode], data, error);
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:13:44.430

我已经研究了很多不同的方法来做到这一点，我发现到目前为止最干净和最容易管理的是使用块模式。这样，您就可以保证在完成后响应正确的请求，避免竞争条件，并且在异步调用期间变量或对象超出范围不会有任何问题。阅读/维护代码也容易得多。

ASIHTTPRequest 和 AFNetworking API 都提供了块模式（但是不再支持 ASI，因此最好使用 AFNetworking 来获取新内容）。如果您不想使用这些库之一，但想自己做，您可以下载 AFNetworking 的源代码并查看它们的实现。然而，这似乎是很多额外的工作，没有什么价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T23:26:17.120

考虑创建一个单独的类作为委托。然后，对于每个生成的 NSURLConnection，为该 NSURLConnection 实例化一个委托类的新实例

这里有一些简短的代码来说明这一点：

```
@interface ConnectionDelegate : NSObject <NSURLConnectionDelegate> 
```

...然后实现 .m 文件中的方法

现在，我猜你可能有你在 UIViewController 子类（或其他一些服务于不同目的的类）中发布的代码？

无论您在何处启动请求，请使用以下代码：

```
ConnectionDelegate *newDelegate = [[ConnectionDelegate alloc] init];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"<url here">]];
[NSURLConnection connectionWithRequest:request delegate:newDelegate];

//then you can repeat this for every new request you need to make
//and a different delegate will handle this
newDelegate = [[ConnectionDelegate alloc] init];
request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"<url here">]];
[NSURLConnection connectionWithRequest:request delegate:newDelegate];

// ...continue as many times as you'd like
newDelegate = [[ConnectionDelegate alloc] init];
request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"<url here">]];
[NSURLConnection connectionWithRequest:request delegate:newDelegate]; 
```

您可能会考虑将所有委托对象存储在 NSDictionary 或其他一些数据结构中以跟踪它们。我会考虑在 connectionDidFinishLoading 中使用 NSNotification 来发布连接完成的通知，并提供从响应创建的任何对象。让我知道您是否需要代码来帮助您将其可视化。希望这可以帮助！

# c# - 使用 LINQ 读取 XML 元素

> ID：10357896
> 
> 赞同：1
> 
> 时间：2012-04-27T21:09:56.040
> 
> 标签：c#, xml, linq-to-xml

我正在尝试使用 LINQ 从 XML 文件中读取值。这真的是我第一次尝试使用 LINQ 与普通的 C#/.Net 方法。

我的 XML 如下所示：

```
<Description>
<Account Green="A" White="D">House</Account>
<Account Green="B" White="D">Car</Account>
</Description> 
```

这是我正在使用的 LINQ 表达式。我想读取值 House，换句话说，具有属性 A 和 D 的元素。

```
var feeds = (from item in doc.Descendants("Description")
 from category in item.Elements("Account")                    
 let attribute = category.Attribute("Green")                    
 let xAttribute = category.Attribute("White")                    
 where attribute != null && (xAttribute != null && (xAttribute.Value == "A" 
 && attribute.Value == "D")) select item.Value).ToString(); 
```

我无法弄清楚我做错了什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:14:51.387

你有一个`IEnumerable<string>`这里 - 你显然只想要一个字符串，所以添加一个`First()`来获取枚举中第一项的值：

```
var feeds = (from item in doc.Descendants("Description")
 from category in item.Elements("Account")                    
 let attribute = category.Attribute("Green")                    
 let xAttribute = category.Attribute("White")                    
 where attribute != null && (xAttribute != null && (xAttribute.Value == "A" 
 && attribute.Value == "D")) select category.Value).First(); 
```

实现相同目标的更简单方法可能是：

```
string result = doc.Descendants("Account")
                   .Where(x => x.Attribute("Green") != null && x.Attribute("Green").Value == "A"
                            && x.Attribute("White") != null && x.Attribute("White").Value == "D")
                   .Select(x => x.Value)
                   .First(); 
```

# mysql - 将整个表分配给其他表

> ID：10357897
> 
> 赞同：1
> 
> 时间：2012-04-27T21:09:57.477
> 
> 标签：mysql, sql

假设我有下表

```
create table Article
(
  ART_ID        bigint not null auto_increment,
  ART_NAME      varchar(25) not null,
  ART_COST      decimal(8,2) not null,
  ART_DESC      text,
  primary key(ART_ID)
); 
```

还有这张桌子

```
create table Fruits
(
  FRUITS_ID     bigint not null auto_increment,
  FRUITS_TYPE   varchar(15),
  FRUITS_FROZEN timestamp DEFAULT CURRENT_TIMESTAMP,
  primary key(FRUITS_ID )
); 
```

我希望 Fruits 表具有表 Article 的所有字段。我该如何实施？我应该通过某种关系引用它还是有其他技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:17:16.513

我认为您需要在这里添加一个`ARTICLE_ID`字段`Fruits`，然后`Articles.ART_ID`通过[FOREIGN KEY](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)约束对其进行引用以确保数据一致性。

请注意，这意味着对于每个水果，要设置一些“文章”字段，`Articles`必须存在相应的记录。如果您不希望文章字段对水果是强制性的，您可以使该`ARTICLE_ID`字段为空。这仍然允许定义外键，但它只会在存储的值`ARTICLE_ID`不是时强制引用`NULL`。

# c# - 将 sql 查询附加到 ListView 控件

> ID：10357903
> 
> 赞同：0
> 
> 时间：2012-04-27T21:10:04.310
> 
> 标签：c#, asp.net

这是我的 asp.net 代码：

```
public static void GetInvoices(int client_id)
{
    using ( var conn = new SqlConnection( GetConnectionString() ) )
    using ( var cmd = conn.CreateCommand() )
    {
        conn.Open();
        cmd.CommandText =
        conn.Open();
        cmd.CommandText =
        @"SELECT o.OrderID, o.OrderDate, o.Status, o.ShipDate, o.PostAmount, sum(p.PaymentAmt) as Paid
            FROM Orders o left outer join payment p on o.orderid = p.orderid WHERE o.DistID = @client_id
            Group by o.OrderID, o.OrderDate, o.Status, o.ShipDate, o.PostAmount
            Order By o.OrderDate Desc";
        cmd.Parameters.AddWithValue( "@client_id", client_id );
        cmd.ExecuteNonQuery();;
    }
} 
```

如何将由此返回的信息（可能返回 0 行）附加到 ListView 控件？

是不是很简单

```
ListViewInvoices.DataSource = GetInvoices(1);
ListViewInvoices.DataBind(); 
```

或者是否有更多涉及将其连接到 sql 查询数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:27:12.293

如您所见，GetInvoices 是一个 void 方法；什么都不返回。您将需要使用 DataAdapter 来填充和返回 DataTable 或 DataSet。然后最后两行应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:59:34.847

GetInvoices 既不返回 DataSet 也不返回 DataTable，您只是在执行查询，但没有在 DataContainer aka DataSet 或 DataTable 中获取返回的数据。

# amazon-s3 - 如何检测 Amazon S3 中的变化？

> ID：10357906
> 
> 赞同：4
> 
> 时间：2012-04-27T21:10:14.393
> 
> 标签：amazon-s3, amazon-web-services

> **可能重复：**
> [新 S3 对象的](https://stackoverflow.com/questions/7985599/notification-of-new-s3-objects)
> [通知在用户上传到 S3 存储桶时收到通知？](https://stackoverflow.com/questions/8674561/get-notified-when-user-uploads-to-an-s3-bucket)

检测 Amazon S3 变化的最有效方法是什么？许多分布式盒子需要与 S3 同步本地文件。每个盒子都需要与 S3 存储桶的一部分同步。有时文件会从外部来源放入存储桶中，因此这些盒子不会知道它。

我可以编写一个脚本，不断爬取 S3 上的所有文件，并在发生更改时通知相应的框，但这会很慢而且成本很高。（将有数百万个文件）。我考虑过在存储桶上启用日志记录，但是写入日志需要很长时间，而且我希望能很快收到更改通知。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:21:23.453

Amazon 提供了一种通知存储桶事件的方法（如此处所示[）](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/NotificationHowTo.html)，但目前唯一支持的事件是*s3:ReducedRedundancyLostObject*。

恐怕今天您可以做您想做的唯一方法是通过轮询（或像您说的那样爬行）或修改将文件上传到您的存储桶的客户端（如果您可以控制他们的代码）为了在上传/更改内容时通知您的盒子。

# objective-c - 寻求在 iOS 中访问 NWS 严重警报的建议

> ID：10357917
> 
> 赞同：1
> 
> 时间：2012-04-27T21:11:29.247
> 
> 标签：objective-c, ios, soap, weather, cap

我正在学习 Objective-C，我想开发一个教育/天气应用程序，根据用户当前的位置向用户显示当前状况和恶劣天气警报。

迄今为止，我已经成功地找到了用户的位置并显示了从 Google 天气 API 发送的当前状况。我现在将注意力转向显示恶劣天气警报，这就是我遇到的一个问题，我似乎无法在 StackOverflow 的其他地方解决或找到它。

我发现这个[NWS 警报 Cap/Atom 服务](http://alerts.weather.gov/#cap)似乎是可行的方法，但我并不真正了解如何以非常一般的方式访问警报。该服务分别显示每个状态和站...当然我不必遍历它们来找到正确的？

我认为我现在最大的问题是找出访问此服务 URL 的一般方法。谁能提供一些见解，也许是如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:13:41.817

我不确定这是否会有所帮助，但这至少应该按特定状态缩小范围：

```
NSString *theCurrentState = @"il"; // lowercase two-letter code

NSURL *theNWSAtomUrl = [NSURL URLWithString:
                              [NSString stringWithFormat: @"http://alerts.weather.gov/cap/%@.php?x=0", theCurrentState]
                       ]; 
```

现在，除此之外，我看到的困难是您需要同时解析区域和县 - 也就是说，可能会针对用户的县发出一些警报，而可能会针对用户的一般区域发出其他警报。每个都有一个特定的代码，不幸的是，我没有立即意识到任何方法可以将邮政编码与这些代码相关联。不过，总得有办法。这可能会有所帮助：[http ://www.nws.noaa.gov/emwin/winugc.htm](http://www.nws.noaa.gov/emwin/winugc.htm)

# ios - 从超级视图中删除视图时，是否删除所有动画？

> ID：10357920
> 
> 赞同：1
> 
> 时间：2012-04-27T21:11:56.447
> 
> 标签：ios, core-animation

1.  我向 view_A 添加了一个无限重复的动画。
2.  动画开始。
3.  我将 view_A 从其父视图中换成了 view_B。
4.  view_A 上的动画停止了——我可以在我的`animationDidStop:finished:`委托方法中看出这一点——我可以看到`[view_A.layer animationForKey:theAnimationKey]`is `nil`、`view_A.layer.animationKeys`is`nil`和`view_A.layer.animations`（在 GDB 中打印 view_A.layer 可以显示）是空的。（**问题1**：当视图从其父视图中删除时，所有动画都会自动删除吗？）
5.  我交换 view_A 回来。奇怪的事情来了：我看到动画还在继续。（**问题2**：动画停止并从其视图中移除后如何继续播放？）
6.  更奇怪的是，我*可以*在第 5 步之后通过调用来停止动画`[view_A.layer removeAnimationForKey:theAnimationKey]`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T23:24:16.483

我相信这是核心动画的一个错误。这是我的雷达： http://openradar.appspot.com/radar?id= [6165852231565312](http://openradar.appspot.com/radar?id=6165852231565312)。

# java - 圈子识别

> ID：10357921
> 
> 赞同：1
> 
> 时间：2012-04-27T21:11:58.677
> 
> 标签：java

> **可能重复：**
> [用于圆识别的快速 Java 库](https://stackoverflow.com/questions/556108/fast-java-library-for-circle-recognition)

我正在寻找一个好的 Java 算法/库来识别位图中的圆，并返回圆心的坐标。圆圈有一种颜色。（例如绿色）。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:35:21.307

首先，我应该说我有点同意您的问题应该被关闭，因为它是重复的。但是，我不太喜欢所提供的答案，因为对于这样一个简单的问题来说它是矫枉过正的。

我会：

*   找到所有*连接*的绿色斑点。这不是完全微不足道的，但也不是那么难。
*   对于每个 blob，找到具有最小 x 坐标的点和具有最大 x 坐标的点，并在 y 中执行相同的操作。然后你很容易得到 blob 的边界框的尺寸。如果 x 和 y 维度不同，则您没有圆。但是，您应该允许一些小的差异，因为用像素绘制圆会导致不完美的圆。
*   最后，如果你有一个圆，边界框的中心（大约）是圆的中心，半径是边界框宽度的一半。你可以画一个这样的圆圈，看看有多少绿色像素适合你的圆圈。同样，您必须允许一些缺陷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:27:00.667

好吧，您可以尝试使用 Neuroph 框架（Java 神经网络框架）。

[http://neuroph.sourceforge.net/](http://neuroph.sourceforge.net/)

它的 api 非常好，但有一个问题。识别取决于您从中提取圆圈的图像的“亮度”。你可以联系这个框架的作者，他是贝尔格莱德大学的博士生，Artificall inteligence 的助教。

我希望我能帮助你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:29:19.667

[您可以尝试通过使用Radon 变换](http://en.wikipedia.org/wiki/Radon_transform)分析图像数据并扫描结果图像中的水平线来实现自己的方法。

# javascript - 在 javascript 中添加表格值在 NaN 的表格单元格中给了我一个结果

> ID：10357923
> 
> 赞同：0
> 
> 时间：2012-04-27T21:12:01.250
> 
> 标签：javascript

我在我的总表格单元格值中得到 NaN 的结果。我添加了两个总单元格，每次用户输入数量时都会计算这些单元格。我试图弄清楚并理解为什么我会得到这个结果。这是其中包含计算的函数的代码。

```
<html>
<head>
<title> Cart </title>
<h1> My cart </h1>
<script type = "text/javascript">

function retr()
{
    var cke = document.cookie;
    var tot1 = document.getElementById("t1").value;
    var tot2 = document.getElementById("t2").value;

    if (cke.length>0) { 
         start = cke.indexOf("Circle=");
         if (start!= -1) {
             start = start + 7
             end = cke.indexOf("$", start);
             if (end == -1) end = cke.length;
             qu1 = cke.substring(start, end);
             document.getElementById("q1").value = qu1;
        }
    }

    if (cke.length>0) {
        start1 = cke.indexOf("$");
        if (start1!= -1) {
            start1 = start1 + 0
            end = cke.indexOf("e", start1);
            if (end == -1) end = cke.length;
            pr1 = cke.substring(start1, end);
            document.getElementById("p1").value = pr1;

        }
    }

    document.getElementById("t1").value = parseFloat(qu1) * parseFloat(pr1);

    if (cke.length>0) {
        start = cke.indexOf("Stickman=");
        if (start!= -1) {
            start = start + 9
            end = cke.indexOf("$", start);
            if (end == -1) end = cke.length;
            qu2 = cke.substring(start, end);
            document.getElementById("q2").value = qu2;
        }
    }

    if (cke.length>0) {
        start = cke.indexOf("$");
        if (start!= -1) {
            start = start + 54
            end = cke.indexOf("e", start);
            if (end == -1) end = cke.length;
            pr2 = cke.substring(start, end);
            document.getElementById("p2").value = pr2;
        }
    }

    alert(qu1);
    alert(pr1);
    alert(qu2);
    alert(pr2);
    alert(t2);
    document.getElementById("t2").value = parseFloat(qu2) * parseFloat(pr2);
    document.getElementById("tot").value = parseFloat(tot1) + parseFloat(tot2);
    document.getElementById("ret").value = cke;
}

</script>
</head>

<body onload = "retr()">
<table border = "1">
    <td>Circle </td>
    <td><input type = "text" size = "8" id = "q1" readonly = "readonly" /></td> 
    <td> <input type = "text" size = "8" id = "p1" readonly = "readonly" /> </td>
    <td> <input type = "text" size = "8" id ="t1">  </td>
    <tr> </tr>
    <td> Stickman </td>
    <td> <input type = "text" size = "8" id = "q2" readonly = "readonly" /></td>
    <td> <input type = "text" size = "8" id = "p2" readonly = "readonly" /> </td>
    <td> <input type = "text" size = "8" id = "t2" >  </td>
    <tr> </tr>
    <td colspan = "3">  TOTAL:</td>
    <td> <input type = "text" size = "8" id = "tot">  </td>
</table> 
<br /> <br />
<input type ="text" id = "ret" readonly = "readonly" />
<br / > <br />
<input type = "button" value = "Checkout">
<br /> <br />
<a href = "store.html" > Continue Shopping </a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:45:57.433

好的，假设你的 cookie 看起来像这样：

```
"Circle=123$456e; Stickman=123$456e" 
```

我已修复您的代码以运行。这是一个工作示例：

[jsfiddle 示例](http://jsfiddle.net/snies/kMzeS/12/)

您的代码中有几个问题，要点：

1.  您保留了不是数字的“$”符号，因此您得到了 NaN
2.  您在填充后没有设置变量 tot1 和 tot2，或者至少您没有提供默认值。
3.  在搜索第二个价格时，您没有使用最后一个“$”符号的 start1 位置作为起点。因此，您最终以错误的价格结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:54:24.967

您是否熟悉 JavaScript 值：[非数字](http://www.w3schools.com/jsref/jsref_nan.asp)(NaN)？听起来某些用户输入的值正在生成一个基本上是非法数字的结果。

# ssas - Analysis Services 维度 - 两个属性处于同一级别时的键列用法

> ID：10357929
> 
> 赞同：1
> 
> 时间：2012-04-27T21:12:17.967
> 
> 标签：ssas

我的查询是关于分析服务 (2008) 中维度属性的 KeyColumn 属性的设置。具体归结为：我有一个维度，我目前关心三个属性：SudoKey、代码和描述。

SudoKey 是最细粒度的，但 Code 和 Description 处于同一级别，也就是说每个 Code 成员都有一个 Description 成员，反之亦然。

我的用户希望单独访问两者（一些用户发现代码更有效，而其他用户更喜欢使用描述）。

我目前正在考虑，为了提高效率而不是定义 SudoKey > Code*和*SudoKey > Description 关系，我应该定义一个 SudoKey > Code 关系并使用 Code 作为 Description 的 KeyColumn 值（使用 NameColumn 值的 Description ）......只有我我对我正在做的事情没有信心，成功至关重要！

任何输入将不胜感激！:)

编辑：我的意思是，我不知道这是否会起作用/是否会产生减少分析服务必须做的工作的预期效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:14:20.633

你所解释的是一个典型的维度，这两种关系都应该是关键列。对于 SSAS 来说，这不会是更多的工作。维度中的所有属性都可能被最终用户查看和使用，因此我不明白您为什么要尝试将关系更改为键。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T23:24:48.870

您的维度键将是唯一属性，它直接在事实表上引用，因此如果您有 sudoKey，请使用它。

关于浏览，如果您正确配置维度关系，您的用户将能够通过任何属性浏览多维数据集。

您在维度配置的第二个选项卡上配置维度关系（这非常重要，可能是您在多维数据集上拥有的最重要的配置之一）。在这种情况下，您会将您的 key 属性作为主要属性，而其他两个与它直接相关

# ios - MonoTouch 中的自定义标签栏项目

> ID：10357930
> 
> 赞同：1
> 
> 时间：2012-04-27T21:12:20.067
> 
> 标签：ios, xamarin.ios, uitabbar

我想创建类似于此处显示的自定义标签栏项目：

![在此处输入图像描述](../Images/ccd8757b77c2a88487070de53b4d80cb.png)

我认为这些必须首先在 Photoshop 或类似应用程序中设计和创建。是否有任何资源或教程可以演示在 Photoshop 中创建此类项目以及如何在 MonoTouch 中使用这些项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:26:21.123

创建和捆绑位图是一种选择——而且可能是最常见的一种（谷歌搜索应该找到几个教程）。现在，为了获得最佳质量，您需要为*旧*iPhone/iPod、较新的视网膜 iPhone/iPod、iPad (1,2) 和视网膜 iPad 3 提供多套。这可能需要很多空间来覆盖每个带有漂亮图标的外壳（否则看起来不会那么好）。

另一种**方法**是在运行时创建位图，例如使用 CoreGraphics API。这可能看起来适得其反（在许多情况下肯定会适得其反），但它的优点是需要更少的（存储）空间和/或获得更好的质量（见注）。

为什么 ？因为如果您在运行时创建它们，那么您只会为您正在执行的特定设备创建它们。您甚至可以缓存它们并在丢失时重新创建它们（例如，如果 iOS 刷新您的应用程序缓存）。

如果您不是艺术家（我也不是），您可能希望查看易于获得许可的矢量图标。您的屏幕截图中的那些看起来是单色的，甚至可以使用（捆绑或额外的轮廓）自定义字体 - 就像[FontAwesome](http://fortawesome.github.com/Font-Awesome/) (CC BY 3.0) 或类似来源提供的字体。

注意：也许你注意到（我知道我注意到了）一些 iPad 应用程序在 iPad3 上看起来很**漂亮**（与其他应用程序相比），即使它们是在硬件可用前几个月发布的。矢量图形获胜;-)

**更新：**有人已经编写了一个[脚本](https://github.com/jogloran/Font-Awesome)来将 FontAwesome 字符转换为 iOS 标签栏图标。但是，由于它是在应用程序之外完成的，因此您需要每个位图的多个版本才能在每个设备上获得最佳外观。

# php - 在指定时间后转到注销页面 - 由于使用 ajax 调用的标头命令而出现问题

> ID：10357936
> 
> 赞同：0
> 
> 时间：2012-04-27T21:12:40.237
> 
> 标签：php, ajax, header, logout

我正在使用 php/ajax 中的 api，并且我在每个页面中都包含测试，如果用户在一段时间后由于不活动而没有注销。它有效，但在某些时候我遇到了麻烦。这是故事：

我有一个名为 index.php 的文件。Index.php 有一个 div - 我们将其命名为“div”。它还有一些按钮——我们将其命名为“新建”和“修改”。当我按下按钮时，文件 new.php 和 modify.php 的主体通过 ajax 方法加载到“div”。到现在为止还挺好。但是当用户在一段时间内变得不活动时，它应该注销他。它确实如此。但不幸的是——它发生的原因很清楚——注销页面没有打印到 index.php 中，而是打印到“div”的正文中。这很容易理解——按下“新建”按钮会将我移至 new.php。New.php 检查我是否已登录 - 我没有登录，所以它会将我重定向到 logout.page，因此 new.php 生成注销页面，它成为我的“div”的主体。这是问题：如何重定向整个页面（index. php) 注销页面，如果我已注销并且未在 div 中打印它。请记住，按“新建”按钮不会刷新 index.php，因为我使用 ajax。它只会刷新我的 div。甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:17:10.523

使用 javascript 重定向怎么样？你真的不需要关心“黑客”用户，因为他们没有登录就没有任何权限，所以只需重定向普通用户：

```
<script language="JavaScript">document.location="/logout.php";</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:17:35.227

不要在 中进行重定向`new.php`，而是让 PHP 脚本在用户注销时返回一些特定值，分析 AJAX 调用中的输出，并在必要时通过 javascript 进行重定向。

换句话说：

*   如果`new.php`成功做你通常做的事
*   如果`new.php`返回一些“身份验证失败”状态，做你的重定向

最好的方法是将 AJAX 响应封装在 JSON 对象中，这样您就可以同时拥有数据和响应代码，以便在 javascript 端更轻松地进行分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:19:25.503

试试这个 - 将“3000”更改为任意毫秒数（例如，如果是 15 分钟，请将其设置为“900000”）

```
<script>

(function(){
  setTimeout( function(){
      window.location = "www.yourawesomesite.com/logout";
    }
  ,3000)
})();

</script> 
```

# javascript - Javascript onclick 出错

> ID：10357942
> 
> 赞同：0
> 
> 时间：2012-04-27T21:12:53.367
> 
> 标签：javascript, css, web

我的结构是这样的：

```
<div>
    <div>
        <ul>
           <li id="li1" onclick="someJavascriptFunction()">......</li>
        </ul>
    </div>
    <div>
        <ul>
           <li id="anotherli1">......</li>
        </ul>
     </div>
</div> 
```

的JavaScript：

```
function getExecJob(execid){
<c:forEach var="exec" items="${execjobList}">
    var index = '${exec.execid}';

    var ele = document.getElementById("execjoblist"+index);
    if('${exec.execid}'==execid){
        ele.style.color='#DF013A';
        <c:set var ="currentExecId" value="${exec.execid}"/>
        <c:set var ="execJob" value="${exec}"/>
    }else{
        ele.style.color='#339';
    }
</c:forEach>
} 
```

我在 javascript 函数中更改了 css 样式代码。现在不仅是这个 li1，而且所有像“anotherli1”这样的 lis 也响应 click 。如果我点击它们，它们就会变色！

谁能给我一些关于这里发生的事情以及我该如何解决的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:23:25.797

```
$(document).ready( function() {
   $("li").click(function() {
      //your_func(this)
       $(this).css('color', 'red');
   });

}); 
```

这将在您单击任何 li 时出现。[你可以在这里](http://jsfiddle.net/WCJtX/1/)查看演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:29:57.257

在你的 JavaScript 中，你有`<c:forEach var="exec" items="${execjobList}">`你的函数。

因此，在该函数中，它为每个添加代码，`<li>`而不仅仅是您单击的那个。每个`<li>`都将设置为`#DF013A`或`#339`。

# vb.net - 在 VB.net 中发布损坏

> ID：10357947
> 
> 赞同：2
> 
> 时间：2012-04-27T21:13:18.233
> 
> 标签：vb.net, publish

**我设法在 vb.net 项目中破坏了我的项目>发布能力。我想在安装程序中包含一些文件，并尝试使用 Project>Properties>Resources>Files 和 Add Resource 来执行此操作。那失败了，所以我回到那里并删除了资源。我可以发布项目，但是当我尝试运行 setup.exe 时，它​​会给出“联系供应商错误”，并且查看日志时会出现如下错误。我被困住了。**

错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* 确定信任时发生异常。检测到以下失败消息： + 值不在预期范围内。

*   激活 C:\Documents and Settings\Bob&Sue\My Documents\Visual Studio 2010\Projects\Spiffy\Spiffy\publish\Spiffy.application 导致异常。检测到以下失败消息： + 值不在预期范围内。

**我创建了一个新项目 (Junk28APR12)，它只有 Form1 和 Label1（带有文本“Hello World！”），它将发布，但我再次无法成功运行 setup.exe。以下是完整的错误日志：**

平台版本信息 Windows：5.1.2600.196608 (Win32NT) 公共语言运行时：4.0.30319.239 System.Deployment.dll：4.0.30319.1 (RTMRel.030319-0100) clr.dll：4.0.30319.239 (RTMGDR.030319-230.dll) dll : 4.0.30319.1 (RTMRel.030319-0100) dfshim.dll : 4.0.31106.0 (Main.031106-0000)

来源 部署网址：file:///C:/Documents%20and%20Settings/Bob&Sue/My%20Documents/Visual%20Studio%202010/Projects/Junk28APR12/​​Junk28APR12/​​publish/Junk28APR12.application 应用程序网址：file:///C :/Documents%20and%20Settings/Bob&Sue/My%20Documents/Visual%20Studio%202010/Projects/Junk28APR12/​​Junk28APR12/​​publish/Application%20Files/Junk28APR12_1_0_0_0/Junk28APR12.exe.manifest

身份部署身份：Junk28APR12.application，版本=1.0.0.0，Culture=neutral，PublicKeyToken=18093298bace470a，processorArchitecture=x86 应用程序身份：Junk28APR12.exe，版本=1.0.0.0，Culture=neutral，PublicKeyToken=18093298bace470a，processorArchitecture=x86，类型=win32

应用程序摘要 * 可安装的应用程序。

错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* 确定信任时发生异常。检测到以下失败消息： + 值不在预期范围内。* 激活 C:\Documents and Settings\Bob&Sue\My Documents\Visual Studio 2010\Projects\Junk28APR12\Junk28APR12\publish\Junk28APR12.application 导致异常。检测到以下失败消息： + 值不在预期范围内。

组件存储事务失败摘要未检测到事务错误。

警告 此操作期间没有警告。

操作进度状态 * [28/04/2012 11:12:14] : C:\Documents and Settings\Bob&Sue\My Documents\Visual Studio 2010\Projects\Junk28APR12\Junk28APR12\publish\Junk28APR12.application 的激活已启动。* [28/04/2012 11:12:14]：部署清单的处理已成功完成。* [28/04/2012 11:12:14] : 应用程序的安装已经开始。* [28/04/2012 11:12:14]：应用程序清单的处理已成功完成。* [28/04/2012 11:12:15]：找到兼容的运行时版本 4.0.30319。

错误详细信息 在此操作期间检测到以下错误。* [28/04/2012 11:12:15] System.ArgumentException - 值不在预期范围内。- 来源：mscorlib - 堆栈跟踪：在 System.Deployment.Internal.Isolation.IDefinitionAppId.EnumAppPath() 在 System.ActivationContext.CreateFromNameAndManifests(ApplicationIdentity applicationIdentity, String[] manifestPaths) 在 System.Deployment.Application.ActivationDescription.ToActivationContext() 在System.Deployment.Application.ApplicationActivator.DownloadApplication(SubscriptionState subState, ActivationDescription actDesc, Int64 transactionId, TempDirectory& downloadTemp) 在 System.Deployment.Application.ApplicationActivator.InstallApplication(SubscriptionState& subState, ActivationDescription actDesc) 在 System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl) 在 System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state) * [28/ 04/2012 11:12:15] System.ArgumentException - 值不在预期范围内。- 来源：mscorlib - 堆栈跟踪：System.Deployment.Internal.Isolation.IDefinitionAppId.EnumAppPath() at System.ActivationContext.CreateFromNameAndManifests(ApplicationIdentity applicationIdentity, String[] manifestPaths) at System.Deployment.Application.ActivationDescription。

组件商店交易详情 没有可用的交易信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T08:24:15.437

谢谢吉姆，您的[链接](https://stackoverflow.com/questions/1166233/clickonce-error-value-does-not-fall-within-the-expected-range)提示了解决方案。这是因为我的用户名中有一个“&”，所以默认发布路径中有一个“&”，这会导致问题。我只是将发布路径更改为在“我的文档”之外并且它起作用了。

我已经创建了一个文件夹 C:\VB_NET\ 并且将来的东西会放在那里（肯定会发布，也可能是未来的项目）。

MS知道这个问题，显然不会解决它。我对此很好，但他们应该更清楚地表明这就是问题所在。

# actionscript-3 - 如何将 DefaultComplexItemRenderer 背景 alpha 设置为 0

> ID：10357955
> 
> 赞同：0
> 
> 时间：2012-04-27T21:14:10.633
> 
> 标签：actionscript-3, flash, apache-flex, flex4, mxml

我有一个简单的列表，其中包含图像的 tileLayout。从我看过的示例来看，我应该使用 DefaultComplexItemRenderer。它工作正常，我的图像数组加载正常，但每个项目都有一个坚实的背景。我需要每个图像背后的背景具有 0 的 alpha。我该如何设置？

过去我刚刚制作了一个自定义 itemRenderer，并覆盖了 itemRenderers 上的 drawBackground 函数，但 DefaultComplexRenderer 没有要覆盖的 drawBackground 函数。

弹性代码中是否有另一个简单的解决方案？或者，如果有人可以向我展示如何制作自定义 DefaultComplexRenderer，那就太棒了。

注意：这是一个 Flex MOBILE 项目。我知道有些 itemRenderer 对移动设备不友好。Adobe 说“总是在 AS3 中而不是在 mxml 中使用项目渲染器”，所以请记住这一点。

谢谢！

这是我的代码：

```
 <fx:Declarations>
        <s:ArrayList id="arrList">
            <s:BitmapImage source="assets/images/one.png" scaleMode="letterbox" smooth="true" width="100%" height="100%"/>
            <s:BitmapImage source="assets/images/two.png" scaleMode="letterbox" smooth="true" width="100%" height="100%"/>
            <s:BitmapImage source="assets/images/three.png" scaleMode="letterbox" smooth="true" width="100%" height="100%"/>
            <s:BitmapImage source="assets/images/four.png" scaleMode="letterbox" smooth="true" width="100%" height="100%"/>
        </s:ArrayList>
    </fx:Declarations>

<s:List id="extrasList_list" width="100%" height="100%"
                        dataProvider="{arrList}"
                        itemRenderer="spark.skins.spark.DefaultComplexItemRenderer"
                        horizontalCenter="0"
                        verticalCenter="0">
                    <s:layout>
                        <s:TileLayout requestedColumnCount="-1"
                                      requestedRowCount="-1"
                                      horizontalGap="10"
                                      verticalGap="10"
                                      orientation="rows"
                                      columnAlign="justifyUsingWidth" 
                                      />
                    </s:layout>
                </s:List> 
```

我尝试过的事情：

这在我的主css文件中......

```
s|DefaultComplexItemRenderer {
    contentBackgroundAlpha:0;
} 
```

但我收到此警告，但它不起作用...

```
-Cannot resolve namespace qualified type 'DefaultComplexItemRenderer' in CSS selector 'DefaultComplexItemRenderer' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:01:59.103

**[编辑]** Flex 的`contentBackgroundAlpha`和`contentBackgroundColor`样式`List`有些误导！您通常希望设置项目渲染器的样式。在列表的上下文中，这些样式只会影响可能出现在列表*周围*的一小部分“镶边” 。有关渲染器样式的详细信息，请参见下文。

如果您只想显示图像，[IconItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/IconItemRenderer.html)是您的最佳选择。它进行了扩展`LabelItemRenderer`，因此针对移动设备进行了优化，并且还具有两个文本字段。

Flex List 组件回收项目渲染器以提高效率，并且只创建所需数量的渲染器来显示当前可见的内容。为此，列表会填充渲染器的`data`属性。所以你想使用这个`data`属性来配置你的项目渲染器。

一种有效的方法是覆盖 setter 函数`data`。创建一个扩展的新 Actionscript 类，将`IconItemRenderer`其添加到其中：

```
override public function set data(value:Object):void
{
    super.data = value;
    // IconItemRenderer already has a BitmapImage component, it's property name is iconDisplay
    // your ArrayList should therefore only contain Strings representing the image sources
    // note how I've changed your ArrayList in the declarations tag below
    iconDisplay.source = data.imageSource;
} 
```

您可能希望配置该`iconDisplay`BitmapImage 以查看您想要的样子。上面的方法可能会被频繁调用，因此您可以将只需要在其他地方发生一次的代码...通过覆盖 Flex 组件生命周期方法，例如`createChildren()`：

```
override protected function createChildren():void
{
    super.createChildren();
    iconDisplay.scaleMode="letterbox";
    iconDisplay.smooth=true;
} 
```

现在告诉`List`使用你的渲染器和这样的语法：

```
<s:List itemRenderer="com.yourdomain.or.whatever.MyIconItemRendererClass" /> 
```

**样式化渲染器：**

```
<s:List alternatingItemColors="[0xFFFFFF, 0xFFFFFF]" selectionColor="#FF0000" /> 
```

另一种方法是覆盖移动项目渲染器`drawBackground()`和/或`drawBorder()`受保护的方法，并使用图形 api 绘制您自己的东西（或根本不绘制）。

**提供数据：**

与其给列表一个`BitmapImage`组件数组，不如给它一个包含数据的对象数组。最好使用强类型对象，但这也有效：

```
<fx:Declarations>
        <s:ArrayList id="arrList">
            <fx:Object imageSource="assets/images/one.png" />
            <fx:Object imageSource="assets/images/two.png" />
            <fx:Object imageSource="assets/images/three.png" />
        </s:ArrayList>
</fx:Declarations> 
```

我喜欢在 Actionscript 中编写渲染器……但`IconItemRenderer`在顶部的文档链接中也有一个 MXML 示例。它还显示了如何在此渲染器中设置两个文本区域的值（使用`labelField`和`messageField`）。您还可以指定返回标签/消息/图标值的函数（使用`labelFunction`、`messageFunction`和`iconFunction`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T21:26:29.370

看起来您应该可以`setStyle('contentBackgroundAlpha', 0);`在 DefaultComplexItemRenderer 上使用。

不是 100% 这是你要找的，不是很熟悉这个类。你有什么理由使用它来扩展LabelItemRenderer？

**编辑**

我相信您可能想要扩展[IconItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/IconItemRenderer.html)

看看这个教程

[http://www.youtube.com/watch?v=EOpsDZaQrOI](http://www.youtube.com/watch?v=EOpsDZaQrOI)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T23:36:50.013

感谢您尝试帮助大家，但我发现最快/简单的解决方案就像将 DefaultComplexItemRender 从 SDK 复制到自定义的一样简单，然后更改这一行代码

`autoDrawBackground="false"`

这很简单，而且很有效。

# jquery - 如何关闭 ajax 加载页面并恢复旧内容？

> ID：10357962
> 
> 赞同：1
> 
> 时间：2012-04-27T21:14:53.403
> 
> 标签：jquery, ajax

我正在开发一个单页投资组合网站，该网站将从单独的 html 文件中提取项目。所以，目前我有这段代码将新的 URL（特别是`#project`div）加载到当前的 div`#port-content`中。

**我的 custom.js 的一部分如下：**

```
var hash = window.location.hash.substr(1);
var href = $('.ajax').each(function(){
var href = $(this).attr('href');
if(hash==href.substr(0,href.length-5)){
    var toLoad = hash+'.html #project';
    $('#port-content').load(toLoad)
        }                                           
    });

    $('a.port-more').click(function(){                        
        var toLoad = $(this).attr('href')+' #project';
        $('#port-content').hide('normal',loadContent);
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
        function loadContent() {
            $('#port-content').load(toLoad,'',showNewContent())
        }
        function showNewContent() {
            $('#port-content').show('normal');
        }
        return false;
    }); 
```

如何关闭此内容并恢复我原来的`#port-content`div。我试图创建一个相反的新功能，但没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:16:53.757

```
var HTMLstorage = "";
$("#something").on("click", function()
{
var HTMLstorage = $("#someDivWithOldContent").html();
$("#someDivWithOldContent").html(yourNewHTML);
} 
```

第 22 条是您可能会丢失处理程序分配，具体取决于您分配它们的方式

基本上在替换之前捕获 HTML。如上所述，一旦恢复它，您可能需要重新分配处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:20:46.723

使用`.data()`声音这样的正确选项。

```
function loadContent() {
   if(!$('#port-content').data('default')) $("#port-content").data('default', $("#port-content").html());
   $('#port-content').load(toLoad,'',showNewContent())
}
// and create another function to load the default
function loadDefault() {
  $('#port-content').html($("port-content").data('default'));
} 
```

# java - 在java中使用vi编辑器编辑文件

> ID：10357967
> 
> 赞同：0
> 
> 时间：2012-04-27T21:15:27.957
> 
> 标签：java, vi

我正在编写一个程序，我需要远程登录到远程机器，访问文件并对其进行编辑。我能够做远程登录部分。这使我可以访问该系统的 OutputStream 和 InputStream。我可以发送命令并使用 vi 编辑器打开文件。我也能够读取文件的内容

```
DataInputStream data = new DataInputStream(telnet.getInputStream());
data.readLine(). 
```

但我无法写入此文件或编辑它。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:47:55.610

我怀疑您在远程系统上遇到了行编辑问题。我认为使用`sed`（如@Jim Garrison 提到的）或使用`ed`基于行的编辑器将代替基于键的编辑器，如 vi 或 emacs。

这是一个快速示例，说明如何使用 ed 编辑名为“file”的文件。 `man ed`应显示各种功能。

```
> ed file
file: No such file or directory
i
hello there
.
1
hello there
a
and now append a line
.
1,$n
1       hello there
2       and now append a line
w
34
q

> cat file
hello there
and now append a line 
```

# google-chrome - 为网站开发禁用缓存

> ID：10357969
> 
> 赞同：0
> 
> 时间：2012-04-27T21:15:40.370
> 
> 标签：google-chrome

> **可能重复：**
> [为网站开发禁用 chrome 缓存](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)

我正在修改站点的外观（css 修改），但由于烦人的持久缓存，无法在 chrome 上看到结果。我试过 shift+refresh 但它不起作用。如何暂时禁用缓存或以某种方式刷新页面以使我可以看到更改？

（顺便说一下谷歌浏览器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:16:25.883

开发人员工具的右下角有一个名为“设置”的齿轮，可让您禁用缓存。

在电脑上，你可以通过按 ctrl+shift+i 打开它

或在 mac command+option+i

# google-chrome - 如何让我的网页在 IE8、IE9、Chrome 和 FF 上看起来一样

> ID：10357972
> 
> 赞同：0
> 
> 时间：2012-04-27T21:15:48.217
> 
> 标签：google-chrome, internet-explorer-8, internet-explorer-9

我有一张表格，在 ie8 上样式已关闭，在 ie9 中根本没有出现 - 但在 Chrome 和 FF 中看起来不错。我调整了像素和边距，但 ie8 和 ie9 没有任何变化，甚至无法正确加载页面。

我正在使用可移动类型，并且是 css 和 html 术语的新手。这是一个链接：[http](http://www.longworth.com/portfolio.html) ://www.longworth.com/portfolio.html 。请注意如何发送图片以比较边缘的表格。

任何帮助将不胜感激！我还不想认输。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:25:23.913

您只能为 IE 添加特殊说明。有关更多详细信息，请参见[此处](http://www.quirksmode.org/css/condcom.html)。

```
<!--[if IE 8]>
<link rel="stylesheet" href="/css/ie8.css" />
<![endif]--> 
```

在`ie8.css`你的内部可以有一些样式来修复你所看到的怪异，但这不会影响 Chrome 或 Firefox 的布局。冲洗并重复 IE9。

# java - 绘图爆炸 Android OpenGL ES 2.0

> ID：10357977
> 
> 赞同：1
> 
> 时间：2012-04-27T21:16:09.797
> 
> 标签：java, android, animation, opengl-es, opengl-es-2.0

我正在开发一款游戏（[此处为 beta 版](https://play.google.com/store/apps/details?id=com.embeddedmicro.wormholebeta "测试版在这里")），我正在使用我拥有的图像绘制爆炸。随着爆炸的老化，它的大小会增加并变得更加透明，直到它消失为止。

我的问题是这似乎是我的代码的瓶颈。我很容易达到 60FPS，但是当爆炸开始发生时，这很容易下降到 30FPS。如果我只禁用爆炸，我会得到恒定的 60FPS。

我可以用 OpenGL 做些什么来更有效地渲染这些内容吗？

我按顺序绘制它们，我只绑定纹理和顶点一次。

对于优化 OpenGL 调用，我应该注意什么一般的东西？

我的代码是用 Java 编写的，用本机代码重写这部分有帮助吗？

我有一个绘制所有爆炸的主要绘制函数

```
public void draw() {
    GLES20.glUniform1i(GraphicsEngine.uEnableVortex, 0);
    for (Boom boom : mBooms) {
        boom.drawCloud();
    }
    mHugeBoom.drawCloud();
    GLES20.glUniform1i(GraphicsEngine.uEnableVortex, 1);

    // Prepare the data
    GLES20.glVertexAttribPointer(GraphicsEngine.aPositionHandle, 3,
            GLES20.GL_FLOAT, false, 12, mVerticesBuffer);
    GraphicsEngine.clearShape();

    // Disable textures
    GLES20.glUniform1i(GraphicsEngine.uEnableTextureHandle, 0);

    GLES20.glLineWidth(2.0f);

    for (Boom boom : mBooms) {
        boom.drawSparks();
    }
    mHugeBoom.drawSparks();
} 
```

然后是“繁荣”

```
public void drawCloud(){
        if (mActive) {
            float pDone = mTotalTime / 600.0f / mSize;
            if (pDone <= 1.0f) {
                mBurst.setColor(mRGBA);
                mBurst.draw(mMMatrix);
            }
        }
    }

    public void drawSparks(){
        if (mActive) {
            for (Particle particle : mParticles) {
                particle.draw();
            }
        }
    } 
```

实物图

```
public void draw(float[] MMatrix, boolean setColor) {
    // Prepare the triangle data
    GraphicsEngine.setShape(mShape);

    if (mTextureId != -1) {
        GraphicsEngine.bindTexture(mTextureId);
        if (mCustomTex) {
            GLES20.glVertexAttribPointer(GraphicsEngine.aTexCoordHandle, 2,
                    GLES20.GL_FLOAT, false, 8, mTextureBuffer);
            GLES20.glEnableVertexAttribArray(GraphicsEngine.aTexCoordHandle);
            GraphicsEngine.clearTexture();
        } else {
            GraphicsEngine.setTexture(mShape);
        }
    } else {
        GLES20.glUniform1i(GraphicsEngine.uEnableTextureHandle, 0);
    }

    // Apply a ModelView Projection transformation
    GLES20.glUniformMatrix4fv(GraphicsEngine.uMMatrixHandle, 1, false,
            MMatrix, 0);

    if (setColor)
        GLES20.glUniform4fv(GraphicsEngine.uColorHandle, 1, mRGBA, 0);

    GLES20.glDrawElements(GLES20.GL_TRIANGLES,
            GraphicsEngine.getNumIndicies(mShape),
            GLES20.GL_UNSIGNED_SHORT, GraphicsEngine.getIndicies(mShape));

} 
```

防止重新加载已加载纹理的代码

```
public static void setShape(int i) {
    if (mState.shape != i) {
        GLES20.glVertexAttribPointer(aPositionHandle, 3, GLES20.GL_FLOAT,
                false, 12, mShapes[i].vertices);
        mState.shape = i;
    }
}

public static void setTexture(int i) {
    if (mState.texture != i) {
        GLES20.glVertexAttribPointer(GraphicsEngine.aTexCoordHandle, 2,
                GLES20.GL_FLOAT, false, 8, mShapes[i].texture);
        mState.texture = i;
    }
} 
```

# one-time-password - 您可以使用一次性密码来加密手机和服务器之间的通信吗？

> ID：10357978
> 
> 赞同：1
> 
> 时间：2012-04-27T21:16:15.517
> 
> 标签：one-time-password

如果我的应用程序不接受 SSL 与客户端通信，我应该如何加密流量？我需要一些快速的东西（所以公钥算法是不可能的）。我在考虑一次性密码，但问题是由于应用程序大小的限制，我无法在移动应用程序上存储很长的密钥。你会推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:13:05.013

你怎么知道 SSL 的速度不快？你做过基准测试吗？正如大卫所说，SSL 仅使用公钥加密进行设置并建立共享秘密，然后将其用作快速对称算法的密钥。因此，在您拒绝 SSL 之前，您应该先对其进行实际测试。

# packet - 在 LAN 唤醒 (WOL) 协议中将密码放在哪里？

> ID：10357979
> 
> 赞同：1
> 
> 时间：2012-04-27T21:16:20.493
> 
> 标签：packet, wake-on-lan

我在网上搜索了很长时间，但我没有找到如何在 Wake On Lan 魔术包中引入最终的站密码，希望我们能帮助我，所以有人知道如何在 WOL 协议中管理站密码?

这是我创建魔术包的方式：

```
0xFF 0xFF 0xFF 0xFF 0xFF 0xFF
[ 16 times MAC address ] 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:49:40.070

根据维基百科，您必须在 MAC 地址后附加 6 字节密码：

```
0xFF 0xFF 0xFF 0xFF 0xFF 0xFF
[ 16 times MAC address ]
[ Password ] 
```

但只有少数硬件实现了此功能。如果您的路由器或计算机不支持魔术包密码，也许您可​​以自己做（使用开源路由器、兼容 DD-WRT 或使用 Arduino 或 Raspberry Pi 制作的网络唤醒中继器）。请参阅本教程：[http ://www.finalclap.com/tuto/arduino-wake-on-lan-repeater-80/](http://www.finalclap.com/tuto/arduino-wake-on-lan-repeater-80/)

# c# - 将 C# 字符串传递给批处理

> ID：10357983
> 
> 赞同：0
> 
> 时间：2012-04-27T21:16:38.480
> 
> 标签：c#, windows, batch-file

我环顾了一会，并没有找到很多关于我的问题的有希望的文章。

我正在尝试编写一个程序，该程序将使用 openFileDialog 向用户查询文件的路径，并将输出保存到 C# 中的字符串。我想要用它做的是在命令脚本中使用所述路径，它将文件复制到计算机的另一部分以供我正在编写的程序使用。

我对 C# 很陌生，所以如果可能的话，我将不胜感激虚拟版本。到目前为止，我知道我必须设置一个新进程来运行批处理命令，但是我从来没有找到如何将 C# 字符串传递给批处理脚本的好例子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:18:50.150

为什么不直接使用 .NET 的内置[Copy](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.90%29.aspx)方法？您也可以使用[Backgroundworker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或[Task](http://msdn.microsoft.com/en-us/library/System.Threading.Tasks.Task.aspx)使其发生在不同的线程上。

如果您必须启动一个单独的进程，那么您可以使用[Process.Start](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)并将 ProcessInfo 设置为路径并以这种方式传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:26:34.363

如果您的脚本很长，我会使用 a`StringBuilder`然后将字符串写入文件：

```
// set srcFilename and xcopyOptions (like /Y, for example)

var sb = new StringBuilder();
sb.Append( "XCOPY " )
  .Append( xcopyOptions )
  .Append( " " )
  .Append( srcFilename )
  .Append( " " )
  .AppendLine( dstDir );

// repeat for as many copy commands as you want
// ...

File.WriteAllText( scriptFilename, sb.ToString() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:26:53.343

除了已经可用的帖子之外，如果您*真的*想使用批处理，将变量传递给它就像将参数传递给可执行文件一样。

*   实例进程，其中“ececutable”是一个批处理文件
*   分配参数，它将像参数一样传递给批处理的变量。

    处理 thisProcess = new Process(); thisProcess.StartInfo.CreateNoWindow = true; //不需要窗口
    thisProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    thisProcess.StartInfo.WorkingDirectory = @"DirectoryOfTheBacth";
    thisProcess.StartInfo.FileName = "批处理文件名";
    thisProcess.StartInfo.Arguments = "参数";
    thisProcess.StartInfo.UseShellExecute = false; //NO SHELL 执行
    thisProcess.StartInfo.RedirectStandardOutput = true; //STDO 重定向，所以我们可以看到发生了什么
    thisProcess.Start(); // 最后，开始进程

[如何将参数从 C# 传递到批处理文件？](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/2a27f180-b880-4da1-832b-b71997eea2a1)

# java - Java Spring ApplicationContext 配置

> ID：10357985
> 
> 赞同：1
> 
> 时间：2012-04-27T21:17:10.543
> 
> 标签：java, spring, unit-testing

我正在将我所有的 Spring 配置转移到 Java 代码中。我遇到了一个问题，我现在想根据命令行开关或 Maven 配置文件等设置我正在使用的配置文件……我还想避免在每个测试中放置所有相同的注释类。这不是一个 Web 应用程序，而是一个功能测试套件。

这是我的尝试：

```
public class CompanyApplicationContextInitializer 
  implements ApplicationContextInitializer<ConfigurableApplicationContext> {

  @Override
  public void initialize(final ConfigurableApplicationContext applicationContext) {
    final AnnotationConfigApplicationContext rootContext = new AnnotationConfigApplicationContext();
    rootContext.getEnvironment().setActiveProfiles(System.getProperty("spring.profile.active", "local"));
    rootContext.register(LocalConfiguration.class, SauceLabsConfiguration.class);
  }
} 
```

然后我用以下注释对我的测试进行了注释：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = CompanyApplicationContextInitializer.class) 
```

但是，当我尝试运行我的测试时，我的自动接线部件没有被找到。我在正确的轨道上吗？我如何在这个类中以编程方式设置我的 ApplicationContext？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T10:08:01.230

上面示例的问题是您传递了一个ApplicationContextInitializer 类@ContextConfiguration#classes。#classes 属性旨在接受标有 Spring 的 @Configuration 注释的类。

ApplicationContextInitializer 主要用于 Web 应用程序，在这些应用程序中很难以编程方式访问 WebApplicationContext。“contextInitializerClasses” init-param 可以传递给 Spring DispatcherServlet，Spring 将在正确的时间调用您的 ACI 实现，允许您在 #refresh() 之前操作应用程序上下文。

在您的情况下，您似乎只关心为集成测试激活配置文件。所以你的 ACI 是不必要的。使用 Spring 的 @ActiveProfiles 注释标记您的集成测试，以指示哪些配置文件处于活动状态。

请注意，如果 spring.profiles.active 已设置为 JVM 系统属性或环境变量，则指定的配置文件将自动激活。即不需要像在 ACI 实现中那样调用 System#getProperty。但是，需要注意的一件事是，根据 ACI 实现中的逻辑，如果 spring.profiles.active 是作为系统属性或环境变量提供的注释，您似乎想要回退到名为“local”的配置文件。您可能有兴趣知道有一个“保留的默认配置文件”，字面意思是“默认”。这可能与您在“本地”配置文件中寻找的语义相同。考虑将您的“本地”配置文件重命名为“默认”。

最后，请注意，在 @ContextConfiguration 类中提供 ApplicationContextInitializer 支持确实存在一个开放的改进请求：[https](https://jira.springsource.org/browse/SPR-9011) ://jira.springsource.org/browse/SPR-9011 。你可能想把手表放在上面。例如，如果没有其他配置文件处于活动状态，它将允许您以编程方式激活“本地”的简单选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:23:14.450

尝试将应用上下文 XML 的位置添加到第二个注释：

```
@ContextConfiguration(locations = {
    "classpath:applicationContext.xml"
}) 
```

# ruby-on-rails - 在 ubuntu 上使用 apache2 在 Rails 上安装 Ruby 时出现问题

> ID：10357988
> 
> 赞同：0
> 
> 时间：2012-04-27T21:17:15.860
> 
> 标签：ruby-on-rails, apache2, ubuntu-server

使用[http://www.modrails.com/install.html](http://www.modrails.com/install.html)上的指南，我安装了 Ruby on rails 和 phusion-passenger 以使用 apache2 进行部署。（在 ubuntu-server 上）（这不是开发服务器）。当我运行“rails -s”时，rails 脚本工作正常，但是当我尝试使用 apache 访问服务器时，我得到一个“500 - 内部服务器错误”。

来自apache的错误文件：

```
[Fri Apr 27 22:52:01 2012] [notice] caught SIGTERM, shutting down
[Fri Apr 27 22:52:02 2012] [warn] module passenger_module is already loaded, skipping
[Fri Apr 27 22:52:02 2012] [notice] Apache/2.2.20 (Ubuntu) Phusion_Passenger/2.2.11 PHP/5.3.6-13ubuntu3.6 with Suhosin-Patch configured -- resuming normal operations
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- phusion_passenger/utils (LoadError)
[Fri Apr 27 22:52:02 2012] [notice] Apache/2.2.20 (Ubuntu) Phusion_Passenger/2.2.11 PHP/5.3.6-13ubuntu3.6 with Suhosin-Patch configured -- resuming normal operations
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- phusion_passenger/utils (LoadError)
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from /usr/lib/phusion_passenger/passenger-spawn-server:53:in `<main>'
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- phusion_passenger/utils (LoadError)
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from /usr/lib/phusion_passenger/passenger-spawn-server:53:in `<main>'
[ pid=1140 file=ext/apache2/Hooks.cpp:727 time=2012-04-27 22:52:08.639 ]:
Unexpected error in mod_passenger: Cannot spawn application '/var/www/steffen/rails': The spawn server has exited unexpectedly.
Backtrace:
    in 'virtual Passenger::Application::SessionPtr Passenger::ApplicationPoolServer::Client::get(const Passenger::PoolOptions&)' (ApplicationPoolServer.h:471)
    in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:523)

<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- phusion_passenger/utils (LoadError)
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from /usr/lib/phusion_passenger/passenger-spawn-server:53:in `<main>'
[ pid=1139 file=ext/apache2/Hooks.cpp:727 time=2012-04-27 22:52:10.809 ]:
Unexpected error in mod_passenger: Cannot spawn application '/var/www/steffen/rails': The spawn server has exited unexpectedly.
Backtrace:
   in 'virtual Passenger::Application::SessionPtr Passenger::ApplicationPoolServer::Client::get(const Passenger::PoolOptions&)' (ApplicationPoolServer.h:471)
   in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:523) 
```

任何熟悉此错误的人 - 并想帮助我？

据我了解，这个errorlinge是解决问题的关键，但是谷歌搜索并没有对我有太大帮助。

```
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- phusion_passenger/utils (LoadError) 
```

编辑：我发现我的第一个错误是我在 apache 的 mods-enables 文件中写了“bun”而不是“bin”。因此没有将其指向正确的 ruby​​ 目录。

我现在收到乘客产生的错误。说以下：

```
Ruby (Rack) application could not be started
Error message:
    no such file to load -- bundler 
```

然后它继续进行很长的回溯，我将在这里发布一个简短的片段：

```
Backtrace:
0 lib/rubygems/custom_require> 29:in `require'
1 lib/rubygems/custom_require> 29:in `require'
2 /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb 325 in     `prepare_app_process'
3 /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb 156 in `block in initialize_server'
4 /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb 572 in `report_app_init_status'
5 /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb 154 in `initialize_server'
6 /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb 204 in `start_synchronously' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T21:37:53.537

我有同样的问题，然后我通过 gems 安装乘客来修复它。

访问 Phusion Passenger (mod_rails) 网站以获取有关 Passenger 的完整文档。您需要安装 GCC 来设置乘客。

通过 Gem 安装乘客

```
gem install passenger 
```

运行 apache2 的乘客安装脚本

```
passenger-install-apache2-module 
```

将以下内容放入/etc/httpd/conf.d/passenger.conf（最好直接从passenger-install-apache2-module输出中复制）

```
LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-2.2.3/ext/apache2    /mod_passenger.so
PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-2.2.3
PassengerRuby /usr/bin/ruby 
```

原始指南位于[http://www.interworx.com/support/faq/how-to-install-ruby-on-rails-and-passenger/](http://www.interworx.com/support/faq/how-to-install-ruby-on-rails-and-passenger/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T21:19:29.127

尝试在您的生产机器上运行它：

```
bundle exec rake assets:precompile 
```

# python - 如何从 numpy 数组生成音频？

> ID：10357992
> 
> 赞同：67
> 
> 时间：2012-04-27T21:17:23.660
> 
> 标签：python, audio, numpy, matplotlib

我想从 numpy 中的二维数组创建“心率监视器”效果，并希望音调反映数组中的值。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-28T01:00:51.850

您可以使用from[`write`函数](http://docs.scipy.org/doc/scipy-0.9.0/reference/generated/scipy.io.wavfile.write.html)`scipy.io.wavfile`创建一个 wav 文件，然后您可以随意播放该文件。请注意，数组必须是整数，因此如果您有浮点数，您可能需要适当地缩放它们：

```
import numpy as np
from scipy.io.wavfile import write

data = np.random.uniform(-1,1,44100) # 44100 random samples between -1 and 1
scaled = np.int16(data/np.max(np.abs(data)) * 32767)
write('test.wav', 44100, scaled) 
```

如果你想让 Python 真正播放音频，那么[这个页面](http://wiki.python.org/moin/Audio/)提供了一些包/模块的概述。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-05-24T21:05:17.630

对于 2016 年来到这里的人来说，scikits.audiolab 似乎不再起作用了。我能够使用 sounddevice 获得解决方案。

```
import numpy as np
import sounddevice as sd

fs = 44100
data = np.random.uniform(-1, 1, fs)
sd.play(data, fs) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-09-21T11:31:10.723

在 Jupyter 中，最好的选择是：

```
from IPython.display import Audio
wave_audio = numpy.sin(numpy.linspace(0, 3000, 20000))
Audio(wave_audio, rate=20000) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-04-30T12:10:26.677

此外，您可以尝试[scikits.audiolab](http://cournape.github.com/audiolab/)。它具有文件 IO 和“播放”数组的能力。数组不必是整数。模仿 dbaupp 的例子：

```
import numpy as np
import scikits.audiolab

data = np.random.uniform(-1,1,44100)
# write array to file:
scikits.audiolab.wavwrite(data, 'test.wav', fs=44100, enc='pcm16')
# play the array:
scikits.audiolab.play(data, fs=44100) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-05-31T18:10:02.487

我在使用 时遇到了一些问题`scikit.audiolabs`，所以我为此任务寻找了一些其他选项。我想出了[sounddevice](https://github.com/spatialaudio/python-sounddevice/ "声音设备")，它似乎更新了很多。我没有检查它是否适用于 Python 3。

执行您想要的操作的简单方法是：

```
import numpy as np
import sounddevice as sd

sd.default.samplerate = 44100

time = 2.0
frequency = 440

# Generate time of samples between 0 and two seconds
samples = np.arange(44100 * time) / 44100.0
# Recall that a sinusoidal wave of frequency f has formula w(t) = A*sin(2*pi*f*t)
wave = 10000 * np.sin(2 * np.pi * frequency * samples)
# Convert it to wav format (16 bits)
wav_wave = np.array(wave, dtype=np.int16)

sd.play(wav_wave, blocking=True) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-27T20:38:54.257

PyGame 具有`pygame.sndarray`可以将 numpy 数据作为音频播放的模块。其他答案可能更好，因为 PyGame 可能难以启动和运行。话又说回来，scipy 和 numpy 都有各自的困难，所以将 PyGame 添加到组合中可能并不是一个很大的步骤。

[http://www.pygame.org/docs/ref/sndarray.html](http://www.pygame.org/docs/ref/sndarray.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-17T07:17:09.370

另一个现代且方便的解决方案是使用[pysoundfile](https://pysoundfile.readthedocs.io/)，它可以读写[多种音频文件格式](http://www.mega-nerd.com/libsndfile/#Features)：

```
import numpy as np
import soundfile as sf

data = np.random.uniform(-1, 1, 44100)
sf.write('new_file.wav', data, 44100) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-12T18:06:23.763

不确定如何从阵列中生成音频的细节，但我发现[mpg321](http://mpg321.sourceforge.net/)是一款出色的命令行音频播放器，并且可能适合您。

我将它用作[Anki](http://ankisrs.net/)的首选播放器，它是用 python 编写的，并且有一些库，可以作为将代码/数组与音频接口的一个很好的起点。

查看：

*   [anki.sound.py](https://github.com/dae/libanki/blob/master/anki/sound.py)
*   [自定义播放器.py](https://github.com/dae/ankiplugins/blob/master/customPlayer.py)