# StackOverflow 问答 11886000-11886999

# javafx - JavaFX 和装有 Windows XP 的旧 PC

> ID：11886002
> 
> 赞同：6
> 
> 时间：2012-08-09T14:46:36.270
> 
> 标签：javafx, javafx-2

我想知道使用 JavaFX 2.1 制作 gui 的独立应用程序是否可以在装有 Windows XP 的相当旧的计算机上运行，​​因为该应用程序旨在在那台计算机上运行。我之所以问是因为我是 JavaFX 的初学者，而且似乎该技术的要求很高，上次我收到警告：“检测到错误的驱动程序版本，设备已禁用。请将您的驱动程序更新到至少版本 8.15.10.2302 ”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:29:23.977

如果您的机器满足最低系统硬件要求并且您安装了最新的图形驱动程序，那么 JavaFX 2.1 应该可以在您的 Windows XP 机器上运行。

JavaFX 能否在机器上工作取决于机器中的硬件以及安装的图形驱动程序。

以下是[JavaFX 2.1 系统要求](http://docs.oracle.com/javafx/2/system_requirements_2-1/jfxpub-system_requirements_2-1.htm)。

您引用的版本字符串似乎是针对集成英特尔芯片组图形驱动程序的。[您可以从 Intel](http://downloadcenter.intel.com/SearchResult.aspx?lang=eng&ProductFamily=Graphics&ProductLine=Desktop%20graphics%20drivers&ProductProduct=Intel%C2%AE%20G45%20Express%20Chipset)下载此类驱动程序的当前版本。

**更新**

> 如果您的系统不支持硬件加速，那么 JavaFX 使用 Java2D 软件管道”——可以肯定的是，我的程序仍然可以工作，但图形质量较差，对吧？

至少在某些使用较旧驱动程序的情况下，该应用程序似乎可以通过[回退到软件管道来](http://javafx-jira.kenai.com/browse/RT-13426)工作。虽然这种回退方法适用于大部分较旧的硬件和软件组合，但鉴于各种较旧的硬件和驱动程序组合，我认为它没有经过全面测试，而且我认为不能保证该程序仍将按预期运行。

下面概述了我对 JavaFX 2.0 和 2.1 的体验。

如果图形硬件未在 JavaFX 系统要求中列出支持硬件加速，则 JavaFX 将回退到软件渲染器并且应用程序将正常工作（尽管可能会降低性能并且无法访问某些条件功能，例如（也许）效果或 3D 渲染）。这种情况应该很少见，因为 JavaFX 支持多种硬件加速硬件。

如果图形硬件在 JavaFX 系统要求中被列为支持硬件加速并且驱动程序是最新的，那么 JavaFX 将使用硬件渲染器并且您的应用程序将正常工作。这是迄今为止最常见的情况 - 在过去几年购买的任何桌面都应满足最低 JavaFX 硬件加速规范和驱动程序要求。

如果图形硬件在 JavaFX 系统要求中列为支持硬件加速，并且驱动程序未达到 JavaFX 正常运行所需的级别，则应用程序可能无法运行（应用程序可能会回退到软件管道并继续运行或者您可能会收到一条消息，说明驱动程序需要更新）或应用程序将开始出现渲染错误并可能冻结或崩溃。这种情况应该只发生在极低百分比的可能运行时目标上。

如果您有硬件和驱动程序组合的实例，其中 JavaFX 的行为未如您所愿（即未正确执行您的程序、记录虚假异常或冻结和崩溃），则使用硬件和软件规范提交[jira 问题](http://javafx-jira.kenai.com)以获取 JavaFX团队研究为该组合提供支持。

# time - VB6中的Time函数返回什么类型的变量

> ID：11886004
> 
> 赞同：3
> 
> 时间：2012-08-09T14:46:39.080
> 
> 标签：time, vb6

在 VB6 中，`Time`函数返回什么类型的变量？

```
Dim x
x = Time 
```

我知道默认情况下`x`是一个变体，但我想添加`As FooBar`到它的末尾。FooBar 是什么类型的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:01:08.923

正如手册中明确指出的那样：

> 返回表示当前系统时间的 Variant (Date)。

# asp.net - Map IQueryable to IQueryable in Linq with nested objects

> ID：11886009
> 
> 赞同：5
> 
> 时间：2012-08-09T14:46:44.773
> 
> 标签：asp.net, entity-framework, automapper, asp.net-web-api, dto

I'm trying to map IQueryable< entity> to IQueryable< entityDTO> using Automapper for generating Linq. I'm working on a Web API project w/ entity framework and oracle 11g.

```
public virtual IQueryable<TDto> Get() 
{
IQueryable<TEntity> EntObjs;
EntObjs = GenericService.Get();     
var Dtos = EntObjs.Project().To<TDto>();
return Dtos;
} 
```

It works fine as long as the Tentity type does not have any Collections in it. I found info at [http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code](http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code) that has got be halfway to solving the problem. I know I can map the collections with Automapper using the follow function, but I need it to be in linq so I do not break the Iquerable chain.

```
Mapper.Map<TSource, TDestination>(Source,Destincation); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:21:31.860

~~您可以在查询链中使用它。~~

例如：

```
EntObjs.Project(). Select(x=> Mapper.Map(x))... 
```

# google-apps-script - 从用户那里获取信息后，让图表出现在 UI 中

> ID：11886020
> 
> 赞同：0
> 
> 时间：2012-08-09T14:47:16.527
> 
> 标签：google-apps-script

我在谷歌应用程序脚本中创建了一个 UI 网络应用程序，它访问电子表格中的数据库，操作数据，然后将其放入图表中。现在我的问题是我让图表重新显示到 Ui 中。我什至不知道这是否有可能，但类似的事情。这是我迄今为止尝试过的：

1.  首先，我在 doGet 函数中创建了一个图表，然后在我从用户那里获取一些信息后尝试访问和编辑。问题是当我 .build() 图表时，它变成了一个通用对象并且无法编辑。

    其次，我在获取信息后尝试将图表添加到 Ui，但我无法让 ui 更新。再次，我不知道正确的方法来做到这一点。

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:41:40.177

为了更新 UI，您需要确保在处理函数中返回应用程序 (UiInstance)。

# javascript - 循环中的多个 Javascript 延迟

> ID：11886022
> 
> 赞同：2
> 
> 时间：2012-08-09T14:47:18.323
> 
> 标签：javascript, jquery, loops, delay, settimeout

我如何构建评论所展示的功能？

```
// for(x=0;x<10;x++)
$('a[attr*="unique"]:first').attr('id', 'mysuperid1');
document.getElementById("mysuperid1").click();
// delay

$("span:contains(action)").parent().click();
// delay

$jq("a:contains(action)").attr('id', 'mysuperid2');
document.getElementById("mysuperid2").click();
// delay

$('input[value="action"]').attr('id', "mysuperid3");
document.getElementById("mysuperid3").click();
// delay

// back to the top of loop 
```

（名称和选择/搜索词已被修改）

我认为的问题就像在这里找到的问题[http://darklaunch.com/2011/05/21/javascript-for-loop-using-settimeout-to-pass-argument](http://darklaunch.com/2011/05/21/javascript-for-loop-using-settimeout-to-pass-argument)但我不知道如何推断什么由于我不是 javascript 开发人员，因此在该链接上被教导包含多个延迟。

这是一个机器人，它将为我自动执行一些网络任务。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:52:46.843

也许您可以将这种方法用作模板，然后将所有任务划分为各自的功能。

```
var delay = 1000;

function beginTasks(){
    taskOne();
}

function taskOne(){
    // Do something
    window.setTimeout(function(){
        taskTwo();
    }, delay);
}

function taskTwo(){
    // Do something else
    window.setTimeout(function(){
        beginTasks(); // <-- back to start
    }, delay);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:54:33.287

您不能在 Javascript 中执行“睡眠”操作。

但是，您可以使用也可用于浏览器的[异步](https://github.com/caolan/async/)节点模块，它会为您提供一些不错的异步语法包装器，以帮助您处理诸如 setTimeout 之类的异步函数。

您的代码应类似于：

```
async.whilst( function ( ) {
    /* condition */
}, function ( whilstCallback ) {
    async.series( [
        function ( seriesCallback ) { /* action 1 */ seriesCallback( ); },
        window.setTimeout.bind( window, 1000 ),
        function ( seriesCallback ) { /* action 2 */ seriesCallback( ); },
        window.setTimeout.bind( window, 1000 ),
        /* ... */
    ], whilstCallback );
} ); 
```

# java - 从 URL 中删除十六进制字符

> ID：11886027
> 
> 赞同：2
> 
> 时间：2012-08-09T14:47:29.330
> 
> 标签：java, url, url-encoding

请处理这个琐碎的问题。

我得到一些`"SOME_DOMAIN?q\x3dnintendo+mathe\x26um\x3d1\x26ie\x3dUTF-8\x26tbm\x3dshop\x26cid\x3d8123694338777545283\x26sa\x3dX\x26ei\x3dL8cjUJmHO8L30gGa1ICgCw\x26ved\x3d0CI4BEIIIMAk"`包含一些转义字符的 URL。

删除这些十六进制字符的最佳方法是什么？我有这个下面的片段，它现在解决了我的问题，但看起来不像是一个可靠的解决方案。

```
 url = url.replace("\\x2F","/");
    url = url.replace("\\x26","&");
    url = url.replace("\\x3d","=");
    url = url.replace("\\x2F","/");
    url = url.replace("\\x2F","/"); 
```

我没有遇到过这个问题，但是 URL 之间可能会出现空格。应该`URLDecoder.decode`解决我的问题吗？

友善的建议。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:58:46.357

这有效

```
 URLDecoder.decode(yourURLString.replace("\\x", "%"), "UTF-8") 
```

看看这个在行动:)

```
public static void main(String[] args) throws UnsupportedEncodingException {
    String s = "SOME_DOMAIN?q\\x3dnintendo+mathe\\x26um\\x3d1\\x26ie\\x3dUTF-8\\x26tbm\\x3dshop\\x26cid\\x3d8123694338777545283\\x26sa\\x3dX\\x26ei\\x3dL8cjUJmHO8L30gGa1ICgCw\\x26ved\\x3d0CI4BEIIIMAk";
    System.out.println(URLDecoder.decode(s.replace("\\x", "%"), "UTF-8"));

} 
```

返回

```
SOME_DOMAIN?q=nintendo mathe&um=1&ie=UTF-8&tbm=shop&cid=8123694338777545283&sa=X&ei=L8cjUJmHO8L30gGa1ICgCw&ved=0CI4BEIIIMAk 
```

* * *

基本上，您需要使用以下方法替换`\x`和`%`解码它：

```
 URLDecoder.decode(url, "UTF-8"); 
```

看这里

[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLDecoder.html#decode%28java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLDecoder.html#decode%28java.lang.String,%20java.lang.String%29)

# c# - "No data exists for the row column" error returned by 'OleDbDataReader'

> ID：11886031
> 
> 赞同：0
> 
> 时间：2012-08-09T14:47:39.727
> 
> 标签：c#, oledbdatareader

I am trying to use [OleDbDataReader](https://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader%28v=vs.110%29.aspx) but it is returning this error:

```
No data exists for the row column 
```

I am using an Access database. Can anyone help me identify the source of this error? Here is my code:

```
private void UpdateStudent_Load(object sender, EventArgs e)
{
    OleDbDataAdapter da = new OleDbDataAdapter();

    da.SelectCommand = new OleDbCommand(
        "select * from Students where SID= " + U_ID, con);

    con.Open();
    OleDbDataReader rd = da.SelectCommand.ExecuteReader();

    if (rd.Read())
    {
        //txtId.Text = U_ID;
        txtId.Text = rd["SID"].ToString();
    }

    rd.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:52:08.953

您可以尝试使用此代码

```
var queryString = "select * from Students where SID= " + U_ID, con;
using (OleDbConnection connection = new OleDbConnection(connectionString))
{
    OleDbCommand command = new OleDbCommand(queryString, connection);
    connection.Open();
    OleDbDataReader reader = command.ExecuteReader();

    while (reader.Read())
    {
        txtId.Text = reader["SID"].ToString();
    }
    reader.Close();
} 
```

# c++ - C++/Win32 Smallest possible MessageBox("Hello") app exe?

> ID：11886036
> 
> 赞同：0
> 
> 时间：2012-08-09T14:47:55.383
> 
> 标签：c++, winapi, optimization

I am working on a project that is getting really large and I need to have the exe uploaded to someone every time a new build is out, and my connection is by phone modem.

I want to compile the smallest possible exe for an application whose purpose is to run the code: `MessageBox(0, "Hello", 0, MB_OK);`

I am using Visual Studio 2010\. My attempts so far:

Version 0, size and switches:

> 7kB (release)
> Used: \O1

Version 1, size and switches:

> 3kB (release)
> Used: \O1, Off buffer security check, Ignore default library linkage.

Can this be made even smaller than 3kB? What compiler flags influence the size of the executable?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T14:56:54.503

针对 CRT 动态链接（即在代码生成选项中为 CRT 选择“多线程 DLL”；应该是默认设置）。选择尺寸优化。告诉链接器降低对齐要求（ /ALIGN 和[/OPT:NOWIN98](http://support.microsoft.com/kb/235956)，可以在项目配置对话框中链接器选项下的命令行选项框中输入）（注意：这可能会导致您的应用程序无法在某些 Windows 下运行版本）。

除此之外，您还可以使用像[UPX](http://upx.sourceforge.net/)这样的打包程序，但请记住，如果某些防病毒工具无法成功分析打包的可执行文件的内容，它们会错误地将打包的可执行文件检测为恶意软件。Windows 可执行文件的其他可用打包程序包括[Crinkler](http://www.crinkler.net/)和[kkrunchy](http://www.farbrausch.de/~fg/kkrunchy/)

即使没有打包器，您也可以做一些技巧，例如合并 PE 部分并将代码放在 PE 标头中。通过这样做，您可以获得大约 700 字节左右（未压缩）的简单“Hello world”MessageBox 可执行文件。我不认为 Visual C++ 链接器支持这类操作。有关如何手动完成此操作的示例，请参见[Tiny PE页面（他将其发挥到了极致）。](http://www.phreedom.org/research/tinype/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:59:17.720

创建一个新的 C++ Win32 项目，然后选择空项目选项。

添加一个文件 main.cpp，其内容如下：

```
#include <Windows.h>

void HelloWorldMain()
{
    MessageBox(0, L"Hello", 0, MB_OK);
} 
```

在项目属性中，关闭 Buffer Security Check（C++ > Code Generation），Ignore All Default Libraries（Linker > Input），并将Entry Point（Linker > Advanced）设置为HelloWorldMain。

构建发布配置；输出 exe 将是 3K。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T16:03:20.323

```
#undef UNICODE
#define UNICODE
#include <windows.h>

void startup()
{
    MessageBox( 0, L"Hello", L"Hi", MB_SETFOREGROUND );
    ExitProcess( 0 );
} 
```

* * *

```
[d:\开发\测试]
> cl foo.cpp kernel32.lib user32.lib /O2 /link /entry:startup /subsystem:windows
foo.cpp

[d:\开发\测试]
> 目录 foo.exe
 驱动器 D 中的卷是数据
 卷序列号为 A875-F9FD

 d:\dev\test 目录

09.08.2012 18:00 2 560 foo.exe
               1 文件 2 560 字节
               0 Dir(s) 144 102 051 840 字节空闲

[d:\开发\测试]
> _

```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-09T14:52:39.367

就像是：

```
#include <windows.h>

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,PSTR szCmdLine, int iCmdShow)
{
     MessageBox (NULL, "Hello, Windows 98!", "HelloMsg", MB_OK) ;

     return 0 ;
} 
```

# android - Heat Map of user interaction with a touchscreen application (Android, iOS)

> ID：11886042
> 
> 赞同：1
> 
> 时间：2012-08-09T14:48:25.840
> 
> 标签：android, ios, visualization, touchscreen, heatmap

I noticed there are a large number of player guides on YouTube that show a "heat map" or visual of typical user interaction with a touchscreen application, like this example:

[http://www.youtube.com/watch?v=H5mVS1sEAZI](http://www.youtube.com/watch?v=H5mVS1sEAZI)

I have an Android application being used for research purposes, and we are already tracking (in a SQLLite database) when and where users touch / interact with a video.

We would love to create a visualization of where and when users are touching the screen.

Are there any tools, APIs, etc. out there that anyone has seen for generating this kind of data visualization?

If not, is there any good way to take screenshots of the video / application at a moment in time when users touch the application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:10:32.760

对于 iOS，您可以使用[https://heatma.ps](https://heatma.ps) SDK

# dependency-injection - Using Ninject.MockingKernel with Asp.Net Web API

> ID：11886044
> 
> 赞同：4
> 
> 时间：2012-08-09T14:48:28.813
> 
> 标签：dependency-injection, ninject, ninject-extensions

I've set up a Web API project using Ninject, and I've used the fix detailed [here](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/) for getting it to work with the latest version of the Web API. Everything is working fine, but I'm now trying to write some tests.

I'm using in-memory hosting to run the project for the tests, as detailed [here](http://www.strathweb.com/2012/06/asp-net-web-api-integration-testing-with-in-memory-hosting), as I have a `DelegatingHandler` that performs authentication and then sets a property on the request message that is used by all the Api Controllers.

So, I've got a base class for my tests, and have a `SetUp` method where I set up the `HttpServer` and configuration, which I've pretty much taken from my working Ninject code:

```
[SetUp]
public void Setup()
{
    bootstrapper = new Bootstrapper();

    DynamicModuleUtility.RegisterModule(
        typeof(OnePerRequestHttpModule));

    DynamicModuleUtility.RegisterModule(
        typeof(NinjectHttpModule));

    bootstrapper.Initialize(CreateKernel);

    var config = new HttpConfiguration();
    config.Routes.MapHttpRoute("Login",
        "api/auth/token",
        new { controller = "Users", action = "Login" });

    config.IncludeErrorDetailPolicy =
        IncludeErrorDetailPolicy.Always;

    config.DependencyResolver = 
        new NinjectResolver(CreateKernel());

    config.MessageHandlers.Add(
        new AuthenticationHandler(CreateUserManager()));

    Server = new HttpServer(config);
} 
```

This is how I create the `MoqMockingKernel`:

```
private static IKernel CreateKernel()
{
    var kernel = new MoqMockingKernel();
    kernel.Bind<Func<IKernel>>()
        .ToMethod(ctx => () => new Bootstrapper().Kernel);
    kernel.Bind<IHttpModule>()
        .To<HttpApplicationInitializationHttpModule>();

    RegisterServices(kernel);

    GlobalConfiguration.Configuration.DependencyResolver = 
        new NinjectResolver(kernel);

    return kernel;
} 
```

And this is how I register the objects to use:

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IUserManager>().ToMock();

    kernel.Bind<UsersController>().ToSelf();
} 
```

While I'm not testing the Controller per se, I do want a proper instance of it to be called, which is why I'm binding it ToSelf. I must admit that I am assuming that this is correct. This is an example of a test:

```
public void UserCannotLogin()
{
    System.Net.Http.HttpClient client = 
        new System.Net.Http.HttpClient(Server);

    string json = string.Format(
        "{{ \"Username\": \"{0}\", \"Password\": \"{1}\" }}", 
        "wrong", "wrong");

    HttpRequestMessage request = 
        CreateRequest(@"api/auth/token", json, HttpMethod.Get);

    Action action = () => client.SendAsync(request);

    using (var response = client.SendAsync(request).Result)
    {
        response.StatusCode.Should()
            .Be(HttpStatusCode.Unauthorized);
    }
} 
```

I'm basically getting a 404 error. When I debug it, it does go to my `DelegatingHandler`, but it doesn't go to my controller.

I get the feeling that I'm fundamentally missing a point here, and it may not even be possible to do what I'm trying to do, but if anyone has any suggestions for either how to do this, or a different way to achieve the same thing, I'm all ears.

*Update* I think that it's because the default behaviour of the `MockingKernel` is to provide a Mock unless told otherwise, so it is returning a Mock of `IHttpControllerSelector`. I've set up a couple of default ones now:

```
kernel.Bind<IHttpControllerSelector>()
    .To<DefaultHttpControllerSelector>();
kernel.Bind<IContentNegotiator>()
    .To<DefaultContentNegotiator>(); 
```

It's still not working, I think because there are no formatters specified. I'll try that tomorrow and see if that gets me there.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:38:32.850

好的，当我说我在这里从根本上错过了一点时，我认为我是正确的，但我会回答这个问题，以防它帮助其他人避免同样的错误！

我认为， Ninject`MockingKernel`主要是关于自动模拟，所以如果你有很多接口，你不关心它们在测试中是如何设置的，你可以在测试中忽略它们，它们会自动创建用于你。

在 Web API 的情况下，绝对*不是*这种情况，因为您不希望控制器选择器类被自动模拟，否则您最终不会调用您的控制器。

所以，我想出的解决方案是坚持使用标准的 Ninject `Kernel`，然后将你的接口绑定到一个常量 Mock 对象：

```
kernel.Bind<IUserManager>().ToConstant(CreateUserManager());

private IUserManager CreateUserManager()
{
    Mock<IUserManager> userManager = new Mock<IUserManager>();

    // Set up the methods you want mocked

    return userManager.Object;
} 
```

这样做，我已经能够成功编写使用 HttpClient 调用内存中 HttpServer 的测试，该 HttpServer 成功调用我的`DelegatingHandler`然后最终到达我的控制器。

# pdf - Is there any way to have an Adobe PDF Fragment accept parameters to change its behavior?

> ID：11886045
> 
> 赞同：1
> 
> 时间：2012-08-09T14:48:30.550
> 
> 标签：pdf, adobe, pdf-generation, fragment, subform

I'm looking to create an adobe pdf fragment (footer) with a name, address, and phone number. However, some documents require a different phone number for international usage. Instead of creating 2 fragments and using a Choice subform, I was hoping there was a way to create a single fragment that had the phone number dynamically generate based on some property.

Is there any way to do what I'm thinking, or do I have to stick with 2 separate fragments + a choice subform?

* * *

Further clarification:

My thought is this... if I can have the fragment use script to dynamically set the text of the phone number field, that would be great. The forms themselves would set some sort of variable or custom property or something that the fragment could use in its script.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:11:26.430

您可以在主表单中使用具有适当值的隐藏复选框，并使用 adobe javascript 从“表单片段”访问它。

# c# - How to specify a name to which object will be serialized by WebApi?

> ID：11886046
> 
> 赞同：0
> 
> 时间：2012-08-09T14:48:36.143
> 
> 标签：c#, c#-4.0, serialization, asp.net-web-api

My web api is returning a set of objects which are differ from the Domain object. Forexample, I my domain has an Employee class but I don't want to expose all the members of the Employee class in my api so I created another class called EmployeeApiModel.

Now my WebApi is returning a List of EmployeeApiModel but I want to be able to specify the name to which it should serialize to. That is instead of `<EmployeeApiModel>` tag in the xml, I want to get `<Employee>` but without changing the fact that the underlying class which is being serialized is EmployeeApiModel.

How can I achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:22:23.917

从技术上讲，Web Api 基于内容协商机制同时支持 json 和 xml，Json 是默认格式，如果要接收 xml，只需加上 header：

> 接受：应用程序/xml

要了解更多内容协商，请访问[此](http://blogs.msdn.com/b/kiranchalla/archive/2012/02/25/content-negotiation-in-asp-net-mvc4-web-api-beta-part-1.aspx)

由于您希望您的 api 同时支持 json 和 xml，因此您应该使用 DataContract 和 DataMember 属性对您的模型进行序列化：EmployeeApiModel，例如：

```
[DataContract(Name = "Employee")]
public class EmployeeApiModel
{
    [DataMember(Name = "Name2")]
    public string Name { get; set; }

    [DataMember]
    public string Email { get; set; }
} 
```

[在此博客文章中](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:58:18.283

您可以使用各种 Attribute 标签来控制序列化 XML 的输出。

```
[XmlRoot("Employee")]
Public class EmployeeApiModel
{
    [XmlElement("fname")]
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int age { get; set; }
} 
```

这将产生如下 XML：

```
<Employee>
    <fname>John</fname>
     <LastName >Smith</LastName >
    <age>24</age>  
</RootElementsName> 
```

您可以在此处阅读有关各种 XML 修饰符的更多信息：http: [//msdn.microsoft.com/en-us/library/e123c76w](http://msdn.microsoft.com/en-us/library/e123c76w)。

如果您想对 JSON 使用现有的 XML 修饰符，请查看这篇文章：[将 .Net 对象序列化为 json，使用 xml 属性控制](https://stackoverflow.com/questions/4686817/serialize-net-object-to-json-controlled-using-xml-attributes)

# cocoa - Adding NSTableView to NSView Programmatically

> ID：11886048
> 
> 赞同：1
> 
> 时间：2012-08-09T14:48:38.867
> 
> 标签：cocoa, nstableview, nsview, nstableviewcell, nstablecolumn

I am having a bit of trouble adding a NSTableView to an NSView programatically. The view is the first view of an NSSplitView. My Pointers are set up right i am sure of it because I can add a NSButton to the view no problem. Also my tableview's delegate and datasource methods are working as expected. If I use interface builder to add the table view to my view it works. However, I dont want to use IB. I would like to be able to do this through code. Here is the code I am currently using.

```
-(void)awakeFromNib{

    tableData = [[NSMutableArray alloc]initWithObjects:@"March",@"April",@"May", nil];

    tableView = [[NSTableView alloc]initWithFrame:firstView.frame];

    [tableView setDataSource:self];
    [tableView setDelegate:self];

    [firstView addSubview:tableView];

    NSButton *j = [[NSButton alloc]initWithFrame:firstView.frame];
    [j setTitle:@"help"];

    [firstView addSubview:j];

} 
```

The NSButton object appears on screen although if I comment out the button the tableview does not appear. What am I doing wrong. Thanks for the help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:29:34.870

谢谢，在您的帮助下，我能够解决这个问题。IB 自动在表格视图周围插入 NSScrollview，它还为您插入一列。为了从代码中执行此操作，您需要分配一个滚动视图和一个列。如果其他人遇到这个问题，这就是我目前正在使用的。

```
-(void)awakeFromNib{

    tableData = [[NSMutableArray alloc]initWithObjects:@"March",@"April",@"May", nil];

    NSScrollView * tableContainer = [[NSScrollView alloc] initWithFrame:firstView.bounds];

    //This allows the view to be resized by the view holding it 
    [tableContainer setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];

    tableView = [[NSTableView alloc] initWithFrame:tableContainer.frame];
    [tableView setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
    NSTableColumn *column =[[NSTableColumn alloc]initWithIdentifier:@"1"];
    [column.headerCell setTitle:@"Header Title"];

    [tableView addTableColumn:column];

    [tableView setDataSource:self];
    [tableView setDelegate:self];

    [tableContainer setDocumentView:tableView];

    [firstView addSubview:tableContainer];

    //You mentioned that ARC is turned off so You need to release these:
    [tableView release];
    [tableContainer release];
    [column release];

} 
```

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:14:05.023

`NSTableView`默认情况下在`NSScrollView`. 所以你可以这样做：

```
tableData = [[NSMutableArray alloc] initWithObjects:@"March",@"April",@"May", nil];

NSScrollView * tableContainer = [[NSScrollView alloc] initWithFrame:firstView.frame];
tableView = [[NSTableView alloc] initWithFrame:firstView.frame];

[tableView setDataSource:self];
[tableView setDelegate:self];

[tableContainer setDocumentView:tableView];

[firstView addSubview:tableContainer];

//You mentioned that ARC is turned off so You need to release these:
[tableView release];
[tableContainer release]; 
```

# node.js - how can I track down which module is causing a require.paths error?

> ID：11886053
> 
> 赞同：0
> 
> 时间：2012-08-09T14:48:46.487
> 
> 标签：node.js, coffeescript

I've got a simple coffee script web server set up:

```
http = require 'http'
express = require 'express'

http.createServer (req, res) ->
        res.writeHead 200
        res.end 'Hello, World!'
.listen 8888

console.log 'Server running at http://127.0.0.1:8888/' 
```

When I run this, it's fine and serving pages:

```
~/jsfinder> coffee app.coffee
Server running at http://127.0.0.1:8888/ 
```

OK no problems there. But when I try the same with nodemon I get:

```
~/jsfinder> nodemon app.coffee

Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.Module._compile.Object.defineProperty.get (module.js:386:11)
    at Object.<anonymous> (/home/user/bin/nodemon@0.6.12:4:21)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

So this is either a bug in nodemon or one of my modules in my npm globals is actually using require.paths. I'm going with the latter. Thing is, I have about 12 modules installed globally, so should I just grep them all and find it that way? Or does that exception stack trace tell me something that I'm not seeing? Does this look like a legit bug in nodemon?

I ran an `npm update -g` with no issues this morning, so all my modules should be up to date.

Update: did some grepping in the node modules directory with no results:

```
/usr/lib/nodejs/npm/node_modules> find . -type f -print0 | xargs -0 grep require.paths
/usr/lib/nodejs/npm/node_modules> cd ..
/usr/lib/nodejs/npm> find . -type f -print0 | xargs -0 grep require.paths
/usr/lib/nodejs/npm> cd ..
/usr/lib/nodejs> find . -type f -print0 | xargs -0 grep require.paths
./module.js:    throw new Error('require.paths is removed. Use ' + 
```

And:

```
~/jsfinder> find . -type f -print0 | xargs -0 grep require.paths
~/jsfinder> 
```

So that's telling me that no module in globals or locals is using require.paths. **Confusing**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:55:20.993

I would go with the former and would be willing to bet that the error is in `nodemon@0.6.12:4:21` :)

I don't think your update command worked, since `nodemon` should be `@0.6.23`.

# sql - 依赖于 FK 的复杂 SQL 约束

> ID：11886055
> 
> 赞同：0
> 
> 时间：2012-08-09T14:48:50.363
> 
> 标签：sql, sql-server, tsql

基本上我在约束中想要的逻辑是这样的......

```
IF([AssetTypeId] = 1) 
THEN
    [FileId] IS NOT NULL AND [Url] IS NULL 
END

IF([AssetTypeId] = 0) 
THEN
   [FileId] IS NULL AND [Url] IS NOT NULL)
END 
```

AssetTypeId 是当前表的 FK 引用/约束。我得到的错误表明语法错误，无论我如何用一个例外来表达这个，当我这样做时......

```
([AssetTypeId] = 1) AND [FileId] IS NOT NULL AND [Url] IS NULL 
OR
([AssetTypeId] = 0)  AND [FileId] IS NULL AND [Url] IS NOT NULL 
```

它给了我这个错误：

```
'Asset (dbo)' table
- Unable to add constraint 'CK_Asset_FileIdOrUrlRequiredNotBoth'.  
The ALTER TABLE statement conflicted with the CHECK constraint "CK_Asset_FileIdOrUrlRequiredNotBoth". The conflict occurred in database "MyDb", table 
```

“dbo.资产”。

我似乎无法弄清楚为什么 SQL 不允许我这样做。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:52:29.950

当消息在创建约束期间指示违反了*相同的约束时：*

```
'Asset (dbo)' table
- Unable to add constraint 'CK_Asset_FileIdOrUrlRequiredNotBoth'.  
The ALTER TABLE statement conflicted with the CHECK constraint "CK_Asset_FileIdOrUrlRequiredNotBoth". The conflict occurred in database "MyDb", table 
```

这意味着该表中存在不符合您所需约束的现有数据。约束在语法上是有效的，否则不会走到这一步。

在实施约束之前，您需要找到错误数据并进行更正。

例如

```
SELECT * from Asset where
([AssetTypeId] = 1) AND ([FileId] IS NULL OR [Url] IS NOT NULL )
OR
([AssetTypeId] = 0)  AND ([FileId] IS NOT NULL OR [Url] IS NULL) 
```

应该找到坏数据

# java - 将java对象直接导入mysql表，列是对象的变量

> ID：11886058
> 
> 赞同：2
> 
> 时间：2012-08-09T14:48:53.313
> 
> 标签：java, mysql, orm, import, object-relational-model

假设我有一个带有变量 x、y 和 z 的 Java 对象，我想将它自动导入到具有列 id、x、y 和 z 的 MySQL 数据库表中。有没有一种简单的方法可以做到这一点，还是我必须为每个单独的班级手动完成？

谢谢。

编辑：通过“自动”，就像我可以做类似的事情：

```
some_instance.importIntoDB(database_table_name) 
```

或者

```
some_instance = extractFromDB(database_table_name, conditions); 
```

显然，它不会那么简单，但我正在寻找类似于对象序列化和将 java 对象转换为 XML 并返回的流线型的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:16:43.133

回答我自己的问题，因为其他人认为这太微不足道了，不能只关心关键字答案：

Java EE 有一个包（持久性）专门处理将 Java 对象直接与 MySQL 表链接。

**1.制作persistence.xml**

这种方法的一个核心组件是定义一个persistence.xml 文件，该文件指定与Java-MySQL 映射关联的各种属性。通常，Java IDE（即 Netbeans、Eclipse）将有一个接口来处理生成适当的 persistence.xml。

**2.EntityManager 对象**

Java EE 中的 EntityManager 是处理对象映射的关键控制器类。它可以由

```
EntityManager em = Persistence.createEntityManagerFactory(
        [PERSISTENCE_UNIT]).createEntityManager(); 
```

其中 [PERSISTENCE_UNIT] 是在创建“persistence.xml”文件时指定的“持久性单元名称”（通过 IDE 接口）

可以在此处找到如何使用 EntityManager 的示例：http: [//docs.oracle.com/javaee/6/tutorial/doc/gijst.html](http://docs.oracle.com/javaee/6/tutorial/doc/gijst.html)

**3.标记对象类**

需要映射到数据库的数据类型需要使用以@开头的注释进行标记，以指定它们的使用方式。可以在以下链接中找到一个示例：http: [//hop2croft.wordpress.com/2011/07/06/jpa-basic-example-with-entitymanager-spring-and-maven/](http://hop2croft.wordpress.com/2011/07/06/jpa-basic-example-with-entitymanager-spring-and-maven/)

注意：此链接的作者使用 Maven 和 Spring。如果正在使用 Netbeans，则可以忽略大部分页面，唯一相关的部分是定义“Car”类的部分（只需搜索“public class Car”），它提供了如何标记的教育示例上一节课。

注2：由于作者使用的是Spring，很多出现在“Car.java”之外的注解，比如@Transactional，可能不适用。

用户在此过程中可能遇到的一个可能问题是主键的处理，这些主键通常设置为“自动递增”。此页面解决了在将新对象实例插入数据库时​​让系统自动处理主键的问题：http: [//www.developerscrappad.com/408/java/java-ee/ejb3- jpa-3-ways-of-generating-primary-key-through-generatedvalue/](http://www.developerscrappad.com/408/java/java-ee/ejb3-jpa-3-ways-of-generating-primary-key-through-generatedvalue/)

最后，将所有具有@Entity 标记的类/对象添加到persistence.xml 是一个好主意，因为如果不这样做可能会导致运行时问题。

希望这可以帮助其他新手，否则他们可能会因为提出我刚刚提出的同样明显无知的问题而被否决。

# android - Cyanogenmod android.jar 文件

> ID：11886059
> 
> 赞同：2
> 
> 时间：2012-08-09T14:49:04.030
> 
> 标签：android, cyanogenmod

我正在尝试编写一个应用程序，该应用程序使用了一些添加到 cyanogenmod 并且在标准的 andriod api 中不存在的类和常量。

我的问题是，使用 android SDK、eclipse 和 ADT，是否可以获取和构建 cyanogenmod 版本的 andriod.jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:08:57.573

以防其他人最终陷入这种情况。

由于在编译期间使用的 andriod.jar 文件基本上是一组存根，因此我创建了自己的单独 jar 文件，其中包含必要类和常量的存根版本，并在编译时为我的应用程序包含该类（在我的情况下使用 Maven 范围）。

# django - 渲染时 ViewDoesNotExist

> ID：11886062
> 
> 赞同：0
> 
> 时间：2012-08-09T14:49:07.900
> 
> 标签：django

我`views.py`分成两个文件，组织如下：

```
views/
  __init__.py
  public.py
  private.py 
```

在一个视图中（公开），我渲染了一个模板，它具有以下内容：

```
<a href='{% url app.views.private.login_view %}'>Login</a> 
```

加载 url 时出现以下错误：

> ## / 处的模板语法错误
> 
> 渲染时捕获`ViewDoesNotExist`：无法导入`app.views.private.app.views`。错误是：没有命名的模块`app.views`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:06:43.183

你在用`{% load url from future %}`吗？如果是这样，您将需要在您的网址周围加上引号，以便它是`{% url 'app.views.private.login_view' %}`

Django 1.3 的发行说明对此进行了解释。 [https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:27:53.197

`{% url ... %}`尝试命名您的网址，然后在标签内使用该名称，如下所示：

```
#urls.py
url(r'^xyz/abc/$','app.views.private.login_view', name='login_view'),

#login_view.html (template-code)
<a href='{% url login_view %}'>Login</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:12:18.937

我建议[命名您的 url patterns](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)，然后在`{% url %}`标签中使用该名称。

# java - Android Phonegap 致命错误

> ID：11886064
> 
> 赞同：2
> 
> 时间：2012-08-09T14:49:09.903
> 
> 标签：java, android, html, cordova

我刚开始使用 phonegap，所以我完成了本教程 [http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html][1] [1]: [http://docs. phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html)

目录：

```
 08-09 14:36:21.752: E/AndroidRuntime(543): FATAL EXCEPTION: main
08-09 14:36:21.752: E/AndroidRuntime(543): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.apache.cordova.example/org.apache.cordova.example.cordovaExample}: java.lang.ClassNotFoundException: org.apache.cordova.example.cordovaExample in loader dalvik.system.PathClassLoader[/data/app/org.apache.cordova.example-1.apk]
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.os.Looper.loop(Looper.java:123)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-09 14:36:21.752: E/AndroidRuntime(543):  at java.lang.reflect.Method.invokeNative(Native Method)
08-09 14:36:21.752: E/AndroidRuntime(543):  at java.lang.reflect.Method.invoke(Method.java:521)
08-09 14:36:21.752: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-09 14:36:21.752: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-09 14:36:21.752: E/AndroidRuntime(543):  at dalvik.system.NativeStart.main(Native Method)
08-09 14:36:21.752: E/AndroidRuntime(543): Caused by: java.lang.ClassNotFoundException: org.apache.cordova.example.cordovaExample in loader dalvik.system.PathClassLoader[/data/app/org.apache.cordova.example-1.apk]
08-09 14:36:21.752: E/AndroidRuntime(543):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-09 14:36:21.752: E/AndroidRuntime(543):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-09 14:36:21.752: E/AndroidRuntime(543):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-09 14:36:21.752: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-09 14:36:21.752: E/AndroidRuntime(543):  ... 11 more 
```

**更新**的 MainActivity：

```
package org.apache.cordova.example;

import org.apache.cordova.DroidGap;

import android.os.Bundle;

public class MainActivity extends DroidGap
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

**笔记：**

**我的 .jar 文件夹称为“libs”。**

**我添加了 cordova2.0.0.jar 作为构建路径。**

**我尝试添加 plugins.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<plugins>
    <plugin name="App" value="com.phonegap.App"/>
    <plugin name="Geolocation" value="com.phonegap.GeoBroker"/>
    <plugin name="Device" value="com.phonegap.Device"/>
    <plugin name="Accelerometer" value="com.phonegap.AccelListener"/>
    <plugin name="Compass" value="com.phonegap.CompassListener"/>
    <plugin name="Media" value="com.phonegap.AudioHandler"/>
    <plugin name="Camera" value="com.phonegap.CameraLauncher"/>
    <plugin name="Contacts" value="com.phonegap.ContactManager"/>
    <plugin name="Crypto" value="com.phonegap.CryptoHandler"/>
    <plugin name="File" value="com.phonegap.FileUtils"/>
    <plugin name="Network Status" value="com.phonegap.NetworkManager"/>
    <plugin name="Notification" value="com.phonegap.Notification"/>
    <plugin name="Storage" value="com.phonegap.Storage"/>
    <plugin name="Temperature" value="com.phonegap.TempListener"/>
    <plugin name="FileTransfer" value="com.phonegap.FileTransfer"/>
    <plugin name="Capture" value="com.phonegap.Capture"/>
</plugins> 
```

**清单**：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="org.apache.cordova.example" android:versionName="1.1" android:versionCode="5">
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application android:icon="@drawable/icon" android:label="@string/app_name"
        android:debuggable="true">
        <activity android:name="cordovaExample" android:label="@string/app_name" 
                  android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="5" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:22:54.010

我猜您 manifest.xml 中提供的包/活动名称与您的 java 文件中的包/类名称不匹配。这就是它正在寻找的：

```
Caused by: java.lang.ClassNotFoundException:     org.apache.cordova.example.cordovaExample 
```

这就是它得到的：

```
package com.example.yourappname;
...
public class MainActivity extends DroidGap {
...
} 
```

您的 manifest.xml 看起来如何？可能是复制粘贴错误；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T11:29:37.127

遇到了同样的问题，烦人……现在我得到了临时解决方案……从任何工作项目中复制以下文件并在当前项目中进行进度..

```
ant.properties
build.xml
proguard-project.txt
project.properties
.classpath
.project 
```

注意：一次替换所有文件..在更新工作空间时，我向我提出了这个问题..它对我有用..但没有得到确切的解决方案...
一次导入示例项目**..Phonegap/lib/android/示例**以便更好地理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T10:25:46.900

我遇到了和你类似的问题。我跟着这个[链接](http://cleancodedevelopment-qualityseal.blogspot.in/2012/12/first-phonegap-app-with-android-using.html)

我得到了同样的错误。我错误地复制了整个清单文件。但后来我恢复到 Eclipse 为我创建的清单，并且只更改了使用 phonegap 所需的部分。我按照上面链接中列出的步骤进行操作，它工作正常。（Ubuntu 10.04，Eclipse 开普勒）

# asp.net - ASP.NET 面板未结束

> ID：11886065
> 
> 赞同：2
> 
> 时间：2012-08-09T14:49:11.763
> 
> 标签：asp.net, panel, accordion

我创建了一个带有 AJAX Accordion 控件的 ASP.NET 页面。窗格中有几个控件，出于各种原因，我将其中一些放在 Panel 控件中。

但是，当页面呈现时，面板结束标记之后页面上的控件会出现在面板内部。对于我的生活，我无法弄清楚为什么，这让我发疯！即使在包含面板的面板之后单击手风琴面板的标题也不会导致面板扩展，这是在我添加面板之前发生的，似乎是因为即使 IT 也表现得好像它在面板中一样！

任何想法我做错了什么？我怎样才能让页面相信面板结束了！！？

```
 <asp:Accordion ID="accQuestionnaire" runat="server" RequireOpenedPane="false" ContentCssClass="AccordionContent" HeaderCssClass="AccordionHeader" FadeTransitions="true"
        transitionduration="250" HeaderSelectedCssClass="AccordionSelected" SelectedIndex="0" SuppressHeaderPostbacks="true" >
        <Panes>
            <%--START OF Tristan Link Pane (0)-------------------------------------------------------------%>
            <asp:AccordionPane ID="pnTristanLink" runat="server" ContentCssClass="AccordionContent" ViewStateMode="Enabled" >
                <Header>
                    Tristan Link                                    
                </Header>
                <Content>                        
                    <div class="centrebuttonsdiv" >
                        <asp:Button ID="btnSearchTristan" runat="server" CssClass="largebutton" Text="Search Tristan" /><br />
                    </div>
                    <asp:Panel ID="pnlTristanSearch" runat="server" CssClass="panel" >
                        <div class="leftdiv"> <%--Matching Tristan results--%>
                            <asp:FormView ID="fvTristanSearch" runat="server" CssClass="FormView" >
                                <ItemTemplate>
                                    <asp:Label ID="lblTristanSearchLabel" runat="server" CssClass="fieldtitle" Text="The information from Tristan for this Case Number is:" /><br /><br />
                                    <asp:Label ID="lblAnimalNameLabel" runat="server" CssClass="fieldtitle" Text="Horse Name: " />
                                    <asp:Label ID="lblAnimalName" runat="server" Text='<%# Eval("PetName") & " " & Eval("ClientNameLast") %>' /><br />
                                    <asp:Label ID="lblGenderLabel" runat="server" CssClass="fieldtitle" Text="Sex: " />
                                    <asp:Label ID="lblGender" runat="server" Text='<%# Eval("L_GenderDesc") %>' /><br />
                                    <asp:Label ID="lblBreedLabel" runat="server" CssClass="fieldtitle" Text="Breed: " />
                                    <asp:Label ID="lblBreed" runat="server" Text='<%# Eval("L_BreedDesc") %>' /><br />
                                    <asp:Label ID="lblDOBLabel" runat="server" CssClass="fieldtitle" Text="DOB: " />
                                    <asp:Label ID="lblDOB" runat="server" Text='<%# Eval("PetDOB", "{0:d}") %>' /><br /><br />
                                </ItemTemplate>
                            </asp:FormView>
                        </div>
                        <div class="rightdiv">
                            <br /><br />
                            <asp:Label ID="lblUnmatchedAppointments" runat="server" Text="Appointments for this horse with no Colic Study details:" Visible="false" /><br />
                            <asp:ListBox ID="lstUnmatchedAppointments" runat="server" DataSourceID="SQLUnmatchedAppointments" DataTextField="AppointmentDate" DataTextFormatString="{0:d}" DataValueField="AppointmentID"
                                Visible = "False" />
                        </div>
                        <div class="cleardiv" />
                    </asp:Panel>

                    <div class="centrebuttonsdiv" >
                        <asp:Label ID="lblTristanSearchInstructions" runat="server" Text="Select an appointment from the list above and click 'Save Section' to continue.  Otherwise, click 'Clear Retrieved Information'
                            to search again" Visible="false" /><br />
                        <asp:Button ID="btnClearTristanSearch" runat="server" Text="Clear Retrieved Information" Visible="false" CssClass="largebutton" />
                        <asp:Button ID="btnSaveTristanLink" runat="server" Text="Save Section" OnClientClick="disablePanes()" Visible="false" Enabled="false" CssClass="largebutton" />
                    </div>                    
                </Content>
            </asp:AccordionPane> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:30:28.143

我相信改变这条线：

```
<div class="cleardiv" /> 
```

对此

```
<div class="cleardiv"></div> 
```

将解决该渲染问题； `<div>`通常不是自闭合标签。

# mysql - 从另一个表实体更新 MySQL 表列

> ID：11886069
> 
> 赞同：0
> 
> 时间：2012-08-09T14:49:20.110
> 
> 标签：mysql

我有 2 个表，我需要使用 table1 中的列更新 table2 中的列。table2.id2 是空的，我必须使用 table1.id 填充它。`table1.code`此外，您必须知道我在这些表（和）中有 2 列可以相互匹配`table2.code`。这是我的 SQL：

```
UPDATE table2 SET table2.id2 = table1.id WHERE table2.code = table1.code; 
```

这个查询对吗？我收到了这个错误，但我确定它`table1.code`存在。

> [Err] 1054 - 'where 子句' 中的未知列 'table1.code'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:35:17.880

假设您可以使用代码连接两个表

```
UPDATE T2
  JOIN T1 ON T1.CODE = T2.CODE
SET
  T2.ID2 = T1.ID
WHERE
  T2.ID2 = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:56:13.580

那样不行。

拿着这个：

```
UPDATE table2 SET id2 = (SELECT id from table1 WHERE code = 'somecode') WHERE code = 'somecode'; 
```

# c# - 使用 Win MMDevice API 静音特定的音频输入

> ID：11886077
> 
> 赞同：1
> 
> 时间：2012-08-09T14:49:56.570
> 
> 标签：c#, c++, winapi

我有一个非常具体的要求，我需要将“辅助”输入静音。我已经在使用[Windows Core Audio API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370784(v=vs.85).aspx)，例如 EndpointVolume 和 MMDevice。

## 设想

我需要在这里将辅助输出音量静音，以达到预期的效果。下图是音频设备及其属性。

![图1](../Images/7a021d4dc1e153559d02b28ad9e9d9d5.png "图1")

## 问题

*   使用`MMDeviceEnumerator`它时，上面描述的端点似乎不包括该屏幕截图后半部分显示的任何“输出音量级别”。

*   将实际录音设备（*辅助*）静音并不会真正静音听到的内容。

*   这必须尽可能简单，尽可能少的人工交互。环境将完全通过应用程序控制，因为它是一个信息亭。下面的屏幕截图表明了当我说*“辅助录音设备静音时什么都不做”*时所指的内容：

![图 2](../Images/d49a578c23ba6b34ea4a9fb3eab24a92.png "图 2")

[*级别*选项卡的](https://i.stack.imgur.com/dEkUW.png "看例子")各个“输入输出级别”是否存在隐藏位置？我在 MMDevice 中的任何地方都找不到它，这意味着我目前无法通过代码将此设备静音。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:45:03.433

如果您已安装（很可能）Windows SDK。你可以看看这个例子：C:\Program Files\Microsoft SDKs\Windows\v7.0\Samples\multimedia\audio\EndpointVolume

这是否枚举了播放辅助输入的设备？

# android - Android，访问服务器上10,000+记录数据库的首选方法

> ID：11886078
> 
> 赞同：0
> 
> 时间：2012-08-09T14:49:58.880
> 
> 标签：android, sql, database, web-services, enterprise

所以我需要一些帮助来确定我需要什么来完成一项任务。

简单明了...我正在考虑通过 Android 访问多个数据库，其中一些可能包含超过 10,000 条记录。从我所看到的返回 JSON 的 Web 服务是实现这种性质的方式，但我认为这不能完全回答我的问题，也不知道这是否是解决此问题的首选方式。

再深入一点……我现在在市场上有一些应用程序，但这将是我第一次尝试企业风格的应用程序，而且我访问的公共 Web 服务的占用空间比现在要小得多。我在服务器/网络管理领域几乎没有经验，这是我被绊倒的地方。这是从头开始的，我必须能够获得完成这项任务所需的几乎所有资源。

如果有帮助的话，后端似乎有一个 SQL Server 2008。如果我需要提供更多详细信息，请告诉我。我正在寻找一种能够处理组织增长、可扩展性、身份验证和用户易用性的解决方案......所以也要记住这一点。

那么，使用大量数据集进行企业应用程序的最佳实践/首选方法是什么？大狗在做什么，怎么做？在客户端和服务器端。我试图不要在这件事上“把狗赶出去”，这是其中一项措施两次并削减一次的情况，这就是我试图获得大量投入和帮助的原因。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:55:18.263

If you don't have an API/service yet, you need to write one on top of your database.

I can think of two approaches, depending upon your use case.

1.  Paging: Setup an API that supports paging, and show the results page by page. The user can't possibly view 10000 records in one go.

2.  Search and suggest: Try creating a suggestion list, when the user starts typing out something. Fetch results that start with the initial characters entered. However, the API should limit the results to a comfortable number, so that you don't have to parse a lot.

Depending on your use case, you could try one of these.

# android - 在android中停止异步任务线程

> ID：11886079
> 
> 赞同：1
> 
> 时间：2012-08-09T14:50:00.733
> 
> 标签：android, android-asynctask, threadpool

我正在扩展 AsynTask 以更新屏幕上的图像。图像通过套接字从输入流中不断更新。当我按下后退按钮时，我已经从异步任务 doinbackground() 中出来了。从 doinbackground() 出来后，我将关闭输入流和套接字。

我在哪里得到以下异常

```
08-09 20:19:24.410: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
08-09 20:19:24.420: W/System.err(32597):    at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:448)
08-09 20:19:24.420: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
08-09 20:19:24.420: W/System.err(32597):    at com.einstructions.interwriteworkspace.WorkSpaceActivity$GetImageStreamFromServer.doInBackground(WorkSpaceActivity.java:618)
08-09 20:19:24.430: W/System.err(32597):    at android.os.AsyncTask$2.call(AsyncTask.java:252)
08-09 20:19:24.450: W/System.err(32597):    at java.lang.Thread.run(Thread.java:1020)
08-09 20:19:24.450: W/System.err(32597):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-09 20:19:24.470: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.480: W/System.err(32597):    at com.einstructions.interwriteworkspace.WorkSpaceActivity$GetImageStreamFromServer.doInBackground(WorkSpaceActivity.java:1)
08-09 20:19:24.480: W/System.err(32597):    at org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
08-09 20:19:24.480: W/System.err(32597):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-09 20:19:24.490: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
08-09 20:19:24.490: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.490: W/System.err(32597):    at com.einstructions.interwriteworkspace.WorkSpaceActivity$GetImageStreamFromServer.doInBackground(WorkSpaceActivity.java:618)
08-09 20:19:24.500: W/System.err(32597):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-09 20:19:24.500: W/System.err(32597):    at org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
08-09 20:19:24.500: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.500: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
08-09 20:19:24.510: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.510: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.510: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.520: W/System.err(32597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-09 20:19:24.520: W/System.err(32597):    at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:448)
08-09 20:19:24.520: W/System.err(32597):    at java.util.concurrent.FutureTask.run(FutureTask.java:137) 
```

可以请帮助我

问候迷你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-01T16:41:28.397

`GetImageStreamFromServer`暂停/停止 Activity 时必须取消任务。在 onPause/onStop 内使用，

```
getImageStreamFromServerTask.cancel(true); 
```

# c# - Visual Basic，为什么什么都没有？

> ID：11886087
> 
> 赞同：2
> 
> 时间：2012-08-09T14:50:16.917
> 
> 标签：c#, .net, vb.net

在学校里，我主要使用 Java、C 和 Python。现在我正在工作，我一直在使用.Net。有时我必须从事 Visual Basic 项目，这是一次愉快的学习经历，但我似乎有时会被一些事情挂断。我的主要问题之一来自 Visual Basic 使用`Nothing`而不是`null`在 C# 和 F# 中使用的事实。

`Nothing`和，对我来说，除了可以在 Visual Basic 中设置为不可为空的值类型并且该值将设置为其默认值（即整数为 0）`null`之外，似乎基本相同。`Nothing`在 C# 中，如果将不可为空的值类型设置为`null`，则会出现编译时错误。拥有数据类型的默认值，但创建类型`Nullable`和设置值以`DBNull.Value`使用数据库让我失望。切换到`Nothing`from并不直观`null`。我查看了在 C# 和 VB 中将字符串设置为 null/Nothing 的 IL 代码，并且每次将字符串设置为 ldnull。那么，为什么 Visual Basic 使用`Nothing`而不是`null`其他 .Net 语言，有什么根本原因吗？

tl;dr 为什么 Visual Basic 使用`Nothing`而不是`null`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:56:11.397

请记住，VB 基于原始的 Basic，它旨在成为真正的*BASIC*，非程序员的人很容易理解。

如果您尝试向非程序员解释什么是值，这更有意义。

“X的价值是什么”

或者

“X 的值为空” --> 导致“嗯”？NULL到底是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:56:50.727

如果您想复制`nothing`C# 中的功能，请尝试使用`default(int)`where`int`是变量的类型。

当类型未知时，这通常与泛型一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:56:37.573

`Nothing`是在 VB6 和早期版本的 VB 中使用的关键字。我不知道他们为什么选择这个术语，但他们将它保留在 .NET 中，因为它是核心 VB 语言语法的一部分并且是为了向后兼容。也许最初选择它是因为它是一个新手理解的更简单的术语？

# php - Yii 什么是“控制器视图”？

> ID：11886089
> 
> 赞同：-3
> 
> 时间：2012-08-09T14:50:26.117
> 
> 标签：php, yii

我正在阅读 Yii 在线指南中的 Yii URL 管理：[http](http://www.yiiframework.com/doc/guide/1.1/en/topics.url) ://www.yiiframework.com/doc/guide/1.1/en/topics.url 。

一行说：

> 尽管 URL 可以在**控制器视图**中硬编码，但动态创建它们通常更灵活： $url=$this->createUrl($route,$params); ......

“控制器视图”这个词对我来说真的很新鲜。我经常听到“in Views”、“in Model”、“in Controller”，但从来没有听到“in Controller Views”。你能帮我理解这个词吗？它是“控制器”或“视图”还是与上述三件事完全不同的那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:41:14.380

在该上下文中，*控制器视图*仅表示*视图*，该指南的这一部分实际上是在试图告诉您，如果可以避免的话，您不应该在任何地方对 url 进行硬编码。

这更像是一种方便的东西，而不是 MVC / Yii 规则。如果您对 url 进行硬编码，并且将来更改应用程序的布局或 url 结构，那么您将不得不返回整个应用程序，更改硬编码 url 的每个实例，这样更容易使用`createUrl()`并让它处理未来有任何变化。

[（即您提到的创建网址](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#creating-urls)部分正上方的红框注释）

# c# - 带有服务类调用泛型方法的 Ioc

> ID：11886090
> 
> 赞同：1
> 
> 时间：2012-08-09T14:50:26.347
> 
> 标签：c#, generics, domain-driven-design, inversion-of-control, mvp

我很难理解 Ioc 和泛型，尤其是我的公司如何设置与此相关的层。我们在 MVP 架构下工作。

我有一个汽车课：

```
class Car : ICar
{
   IList<IWheel> wheels{get;set;}
   IEngine engine{get;set;}
   string registrationplate {get;set;}

   public Car(){}
} 
```

并且我希望能够获得一个新创建的 ICar，并且我还希望能够通过 Id 找到 ICar。问题是我不确定为什么在我正在进行的项目中做出了一些设计选择。已经创建的其他服务的结构如下：

我有汽车和车轮服务：

```
class WheelService : BaseService
{
    IWheel wheel;

    public IWheel Create()
    {
        return new wheel()
    }

 }
class CarService : BaseService
{
   WheelService wheelservice;

   public ICar CarCreate()
   {
     wheelservice = new Wheelservice()
     car = new Car();
     IWheel wheel = wheelservice.Create();
     car.wheels.add(wheel);
     return car;
   }

   public ICar Find(int id)
   {
        return (Car)base.Find<Car>(id);
   }

} 
```

1.  首先，我发现“为每个实体提供服务”很奇怪。我不会想到一个弱实体会有服务。我的想法是 CarService create 方法将像工厂方法一样工作，而无需调用车轮服务。
    此外，在演示者代码中实际上使用了轮服务创建方法，以将 IWheel 一直返回到 UI，以便可以设置值并向上传递。再一次，这对我来说似乎很奇怪。表示演示者可以从 UI 请求完整的 ICar 对象。

2.  Service create方法中的依赖是否正常？我原以为这将通过 IoC 引入。但是，如果 ICar Create 方法要处理所有创建（包括轮子等），那么大概容器将包含许多与此特定服务相关的接口？

3.  如果我要引入接口，我需要调整 CarService.Find 方法，该方法目前正在使用具体类。它使用 BaseService，并且只有这一层与容器交互以获得正确的存储库：

```
class BaseService
{
private object myRepository;

 protected T GetRepository<T>(Type serviceType)
    {

        if (myRepository == null)
        {
            myRepository = (T)IoCRepositoryFactory.GetRepositoryInstance(typeof(T), serviceType);
        }
        return (T)myRepository;
     }

protected virtual IGenericRepository Repository
    {
        get
        {
            return GetRepository<IGenericRepository>(this.GetType());
        }
    }

protected virtual T Find<T>(Object id) where T : class
    {
        return (T)Repository.GetByID<T>(id);
    }

} 
```

如果我只使用接口，我不确定如何调用这个 find 方法，因为当前的服务定义正在使用具体的类。

抱歉，这是一个冗长的帖子。我已经查看了三天，但我需要知道其他人对当前设置的看法，以及我是否应该将 IOC 用于服务层中的域对象，或者我是否应该遵循当前设置。此刻对我来说，这一切都感觉有点耦合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:28:47.520

我想你有很多误解。

我将从服务结构开始。您不必让每个服务只处理一种类型的实体，但只要不妨碍效率就没有错。您的示例可能过于简单化，因此您可能可以让 CarService 处理车轮管理，而不会出现任何未来的维护问题，但是按实体划分服务是很常见的，尽管它通常需要一些例外，但它通常可以正常工作。

不过，您编写的 IoC 代码有各种各样的错误。IoC 的目标是将执行依赖项管理的所有代码保存在一个不碍事的地方。您的代码有 CarService 显式实例化 WheelService，而这应该由您的 IoC 容器处理。此外，拥有 GetRepository 方法非常尴尬，并且应该由您的 IoC 容器自动处理。

您可以设置服务和存储库的一种方法是这样的（如果您使用的是构造函数注入）。这只是一个例子（并且是一个冗长的例子），不要在没有完全理解它的情况下将这个结构复制到你自己的代码中。

```
public interface IRepository {
    //Some interfaces
    //This method could only really be implemented if you are using an ORMapper like NHibernate
    public T FindById<T>(Object id) { }
}

public class BaseRepository : IRepository {
    //Some base crud methods and stuff. You can implement this if you're using an ORMapper
    public T FindById<T>(Object id) 
    { 
        return CurrentSession.FindById<T>(id);
    }
}

public class WheelRepository : BaseRepository {
    //Wheel crud

    //If you don't have an ORMapper because you're a masochist you can implement this here
    public Wheel FindById(Object id) { }
}

public class CarRepository : BaseRepository {
    //Car crud

    //If you don't have an ORMapper because you're a masochist you can implement this here
    public Car FindById(Object id) { }
}

public class BaseService {
    protected BaseRepository _baseRepository;

    //This constructor is automatically called by your IoC container when you want a BaseService
    public BaseService(BaseRepository repository)
    {
        _baseRepository = repository;
    }

    //More methods
}

public class WheelService : BaseService
{
    protected WheelRepository _wheelRepository;

    public WheelService(WheelRepository wheelRepo) : base(wheelRepo)
}

public class CarService : BaseService
{
    protected WheelService _wheelService;
    protected CarRepository _carRepository;

    public CarService(WheelService wheelService, CarRepository carRepository)
    {
        _wheelService = wheelService;
        _carRepository = carRepository;
    }
} 
```

由于您使用的是 MVP，我假设某种 WPF/Winforms 应用程序，但我想如果您真的想让它适合 asp.net，您也可以做一个 Web 应用程序。在任何一种情况下，它们都有一个工厂，您可以配置它来创建您的演示者类。在那个工厂里，你会让它在那里完成所有的注射，在一个你永远不必担心甚至在设置后看的地方不碍事。该代码只会调用它：

```
//Override the default factory method (just made this up)
public override Presenter GetPresenter(Type presenterType)
{
    return ComponentFactory.GetInstance(presenterType);
} 
```

然后，如果您有一个依赖于服务的演示者，它会自动在那里，服务所需的一切也将在那里。请注意，其他任何地方都没有丑陋的服务构造函数或工厂调用。所有依赖项都由容器自动设置。

我不知道为什么你们公司的代码有那些糟糕的 GetRepository 方法。这是反模式的一个实例，因为您正在用 GetRepository 调用替换通常像 new Repository() 这样的构造函数调用，而这只是稍微更易于维护。

您应该尝试使用一些知名的容器。[Structuremap](http://docs.structuremap.net/QuickStart.htm)是一个相当不错的。

# java - JSF AjaxBehaviorEvent 未触发

> ID：11886092
> 
> 赞同：0
> 
> 时间：2012-08-09T14:50:29.677
> 
> 标签：java, ajax, jsf, jakarta-ee

我的 jsf 表单中有一个名为“全选”的组件`<h:selectManyMenu>`。`<h:selectBooleanCheckbox>`单击时`<h:selectBooleanCheckbox>`，所有项目`<h:selectManyMenu>`都被选中，我可以看到所有项目都被选中，但`valueChangeListener`没有触发方法。我试图放入`listener="#{teamController.dummy}"`标签`<f:ajax>`但不起作用。有什么解决办法吗？

```
<div style="margin-bottom: 10px; float: right;">
    <h:selectBooleanCheckbox value="#{teamController.selectAll}"
        valueChangeListener="#{teamController.selectAll}"> Select All
        <f:ajax event="click" render="showList" />
    </h:selectBooleanCheckbox>
</div>
<div style="margin: 0px;">
    <p:message for="showList" styleClass="showListRequired">
    </p:message>
    <h:selectManyMenu id="showList" value="#{teamController.selectedList}"
        style="height:200px; width: 280px;" immediate="true"
        required="true" requiredMessage="#{msgs.showListRequired}"
        valueChangeListener="#{teamController.dummy}">
        <f:ajax event="valueChange" render="showList" />    
        <f:selectItems value="#{teamController.showList}" />
    </h:selectManyMenu>
</div> 
```

# windows - 如何在批处理程序的文件中替换当前日期mmddyyyy

> ID：11886094
> 
> 赞同：0
> 
> 时间：2012-08-09T14:50:30.847
> 
> 标签：windows, batch-file

希望我能找到我正在尝试的答案。

我有一个`JOFAACKR.WSDFHER1.08092012.GILLJOCAR.J8RJXV2Y_SumRpt.JOBAACKR`在远程服务器上命名的文件，我需要将此文件放到我的服务器上。我写了一个下载程序，当我提到确切的文件名时，它确实让我得到了完美的文件。现在我试图通过一个变量传递一个日期值。
`set mmddyyyy=%date:~4,2%%date:~7,2%%date:~10,4%`
那么，我可以写一些类似的东西`*.%mmddyyyy%.*.JOBAACKR`来获取以当前日期命名的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:08:36.560

```
C:\> set mydate=%date:~4,2%%date:~7,2%%date:~10,4%
C:\> echo %mydate%
03082013 
```

# mysql - MySQL，同一张表上的字段相关的元组，GROUP BY还是SELF JOIN？

> ID：11886100
> 
> 赞同：0
> 
> 时间：2012-08-09T14:50:47.463
> 
> 标签：mysql, join, group-by

我有这些表（简化）：

```
Appointment(
    INT idAppointment,
    DATETIME start,
    DATETIME end)

AppointmentInvolved(
    INT idAppointment,
    INT idInvolved)

Involved(
    INT idInvolved,
    VARCHAR name,
    INT type,
    INT idIncident)

Incident(
    INT idIncident,
    VARCHAR description) 
```

发生了一起事件，可能涉及到几个事件。每个 Involved 可以有多个约会，并且每个约会可以由多个 Involved 参加。涉及的有类型（本例中，principal=1，secondary=2）。

给定一个 idAppointment，我需要知道参与该事件的负责人，无论他是否要参加该特定约会。

至今：

```
SELECT(*)
FROM Appointments a
INNER JOIN (AppointmentInvolved ai) ON ai.idAppointment = a.idAppointment,
INNER JOIN (Involved i) ON i.idInvolved = ai.idInvolved,
INNER JOIN (Incident in) ON i.idIncident = in.idIncident,
WHERE a.idAppointment = <WHATEV>
WHERE in.type=1 
```

除非所涉及的校长要去参加那个约会，否则这显然是行不通的。这是某种自我加入吗？我真的不需要 Incident 表，因为参与人员可以通过 idInvolved 直接关联。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:16:40.453

```
SELECT * 
FROM Involved I
WHERE I.type=1 
  AND I.idIncident IN (SELECT I2.idIncident 
                       FROM AppointmentInvolved AI
                          INNER JOIN Involved I2 ON AI.idInvolved = I2.idInvolved
                          WHERE AI.idAppointment=<WHATEV>) 
```

# silverlight - Silverlight 5 数据网格缺少数据

> ID：11886101
> 
> 赞同：0
> 
> 时间：2012-08-09T14:50:48.093
> 
> 标签：silverlight, datagrid

我正在尝试将 xml 数据集绑定到 Silverlight 数据网格。我的 xml 中有 21 行网格显示标题正常和 21 行，但行显示没有数据。如果我查看 ItemsSource 属性，它会显示行日期在那里。

由于 Stack Overflow 所做的编辑，我在发布所有代码时遇到问题。这是关键部分。如果您需要查看其他内容，我会将其作为评论发布。

```
grdData.ItemsSource = cloData.LoadData("Sample.xml")

public class clsData
{
    public System.Collections.IEnumerable LoadData(string pName)
    {
        XDocument nutritionsDoc = XDocument.Load(pName);

        List<Nutrition> data = (from nutrition in nutritionsDoc.Descendants("Nutrition")
                                select new Nutrition
                                {
                                    Group = nutrition.Attribute("Group").Value,
                                    Name = nutrition.Attribute("Name").Value,
                                    Quantity = nutrition.Attribute("Quantity").Value
                                }).ToList();

        return data;
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:49:48.183

我刚刚把营养课变成了公开课，神奇地解决了。

鲍勃

# firefox - 在 Chrome、Firefox 和 Safari 中强制标准/怪癖模式？

> ID：11886102
> 
> 赞同：3
> 
> 时间：2012-08-09T14:50:51.760
> 
> 标签：firefox, google-chrome, safari, standards-compliance, quirks-mode

有没有办法在 Chrome、Firefox 和 Safari 中从浏览器强制标准/怪癖模式（类似于 IE 所做的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:33:58.963

使用[Webkit](http://trac.webkit.org/browser/trunk/Source/WebCore/css/quirks.css)或[Gecko](http://mxr.mozilla.org/mozilla-central/source/layout/style/quirk.css)的 quirksmode 样式表，并通过以下几种方式之一打开或关闭它：

*   [用户样式表](http://brugbart.com/Articles/custom-style-sheets)
*   [风格切换器](http://www.alistapart.com/articles/bodyswitchers/)
*   [CSSOM](http://dev.w3.org/csswg/cssom/)
*   [DOM 2 级样式 API](http://www.w3.org/TR/DOM-Level-2-Style/css.html)

# javascript - 高图表 - 垂直和水平渐变

> ID：11886108
> 
> 赞同：1
> 
> 时间：2012-08-09T14:51:09.347
> 
> 标签：javascript, charts, highcharts

我正在使用 HighCharts 做一些简单的条形图。图表有时是水平条形图，有时是垂直条形图。有没有办法根据它是水平还是垂直来修改渐变顺序和阴影？

这是我在 js 中设置的开始：

函数 buildChart(cType, cTitle, categoriesX, titleY, seriesData1, isPercent) {

```
var flipLabels = 0,
    labelSpace = 40,
    labelWidth = 160,
    labelHeight = 60,
    labelAlign = 'center',
    labelSize = 12,
    labelSpacingY = 30,
    labelSpacingX = 0,
    yAxisLineColor = null,
    yAxisTitle = '',
    chartWidth = 800, //$('#chart_modal').width(),
    chartHeight = (60 * categoriesX.length) + 150,
    perShapeGradient = {
        x1:0,
        y1:0,
        x2:1,
        y2:0
    },
    gradientBuild = [
        [0, '#6482fb'],
        [1, '#5775df']
    ]; 
```

垂直图表看起来正确，从浅到深，右侧有阴影： ![垂直图表看起来正确](../Images/36e9a4fb1ee01d4f43869f882f6475b2.png)

但是Horziontal倒退了。顶部应该是轻的。底部深色，下方有阴影： ![水平条形图翻转](../Images/7e1b581b567a439dc45673bd80c6f544.png)

如何翻转渐变和阴影，但仅适用于水平条形图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:48:32.940

实际上，您正在谈论两种不同的图表类型。您所说的***水平条形图***只是`type: 'bar'`在 HighCharts 中。***垂直条形图***只是在`type: 'column'`HighCharts 中。以下是有关如何控制每种类型的阴影的示例：

*   [HighCharts 列类型](http://jsfiddle.net/J3qN8/1/)
*   [HighCharts 条形图](http://jsfiddle.net/6VMsp/1/)

# javascript - jQuery 对话框不显示

> ID：11886109
> 
> 赞同：0
> 
> 时间：2012-08-09T14:51:10.163
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

似乎我的两个对话框中的一个不会出现，尽管第二个对话框在被要求时会出现。两者都在`$.get()`成功函数内。如图所示：

```
$.getJSON('addCategory.php', {'ordre':ordre,'nom':nom}, function(data) 
                            {
                                console.log(data.result);

                                    $('div id="Dialog_Feedback2">Une catégorie porte déjà ce nom ou cet ordre!</div>').dialog(
                                    {
                                        autoOpen:false,
                                        title:'Une erreur est survenue!',
                                        width:300,
                                        height:'auto',
                                        resizable: false,
                                        show:"slide",
                                        modal:true,
                                        buttons:{
                                            "OK" : function()
                                            {
                                                $( this ).remove();
                                            }
                                        }
                                    });

                                    $('<div id="Dialog_Feedback">L\'ajout a été effectué avec succès!</div>').dialog({
                                        autoOpen:false,
                                        title:'Catégorie ajoutée!',
                                        width:400,
                                        height:'auto',
                                        resizable:false,
                                        modal:true,
                                        buttons:{
                                            "Ok": function()
                                            {
                                                $(this).remove();
                                                window.location.reload();
                                            }
                                        }
                                    }); 
                                    if(data.result =="true")
                                    {
                                        console.log("NO!");
                                        $('#Dialog_Feedback').dialog("open");
                                    }
                                    else
                                    {
                                        console.log("Yeah!");
                                        $('#Dialog_Feedback2').dialog("open");

                                    }                           
                                }

                            );
                        } 
```

这是我在控制台中看到的：

`false`

`Yeah!`

但`#Dialog_Feedback2`不会出现。当它返回时`true`，另一个对话框会正确显示。

为什么不显示第二个对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:58:59.707

这是一个非常简单的问题，您所要做的就是正确编写 div 标签，您缺少开头的克拉。所以这条线

```
$('div id="Dialog_Feedback2">Une catégorie porte déjà ce nom ou cet ordre</div>').dialog(` 
```

应该从

```
$('<d 
```

不只是

```
$('d 
```

这应该为您提供所需的操作。

# php - 解析错误：语法错误，文件意外结束 - 第 59 行

> ID：11886113
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:51:29.327
> 
> 标签：php, wordpress

在 Wordpress 中激活修改后的主题时出现此错误：

解析错误：语法错误，第 59 行 C:\xampp\htdocs\wp-content\themes\manifest_v1.1\functions.php 中的文件意外结束

functions.php 文件已被修改为允许在发表评论时选择“主题”行。

这是代码：

```
<?php
$cats=array(
1=>'Category 1',
2=>'Category 2',
3=>'Category 3'
);

function showCats($cats){

?>
<select name="commentCats">
<?php
foreach($cats as $key=>$cat){
?>
<option value="<?php print $key; ?>"><?php print $cat; ?></option>
<?
}
?>
</select>
<?php
}
add_action ('comment_post', 'add_comment_fields', 1);
function add_comment_fields($comment_id) {
            add_comment_meta($comment_id, 'commentCats', $_POST['commentCats'], true);
}
function manifest_comment($comment, $args, $depth){
print $depth;
global $cats;
 $catID = get_comment_meta(get_comment_ID(),"commentCats", true);
 $GLOBALS['comment'] = $comment; ?>
   <li <?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>">
     <div id="comment-<?php comment_ID(); ?>">
      <div class="comment-author vcard">
         <?php echo get_avatar($comment,$size='48',$default='<path_to_url>' ); ?>

         <?php printf(__('<cite class="fn">%s</cite> <span class="says">says:</span>'),         get_comment_author_link()) ?>
      </div>

      <?php if ($comment->comment_approved == '0') : ?>
         <em><?php _e('Your comment is awaiting moderation.') ?></em>
         <br />
      <?php endif; ?>

      <div class="comment-meta commentmetadata"><a href="<?php echo htmlspecialchars( get_comment_link( $comment->comment_ID ) ) ?>"><?php printf(__('%1$s at %2$s'), get_comment_date(),  get_comment_time()) ?></a><?php edit_comment_link(__('(Edit)'),'  ','') ?></div>
      <?php if($catID){ ?>
      <h3><?php 

      print $cats[$catID]; ?></h3>
    <?php } ?>
      <?php comment_text() ?>

      <div class="reply">
         <?php comment_reply_link(array_merge($args, array('depth' => $depth, 'max_depth' => $args['max_depth']))) ?>
      </div>
     </div>
<?php 
} 

?> 
```

我不知道问题是什么，有人告诉我它正在另一台测试机器上工作。我目前正在本地机器上测试主题。我正在使用 XAMPP (http://www.apachefriends.org/en/xampp-windows.html) 进行测试，其中包括 Apache、MySQL、PHP 和 PHPmyAdmin。我正在使用全新安装的 Wordpress 3.4.1 版。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:55:21.787

Line 36 - you forgot a `;` after the call:

```
<?php printf(__('<cite class="fn">%s</cite> <span class="says">says:</span>'),         get_comment_author_link()) ?> 
```

Edit: as I saw from the comments and further looking at the code in eclipse, you are missing quite a few `;` after statements:

```
<?php comment_text() ?>
<?php comment_reply_link(array_merge($args, array('depth' => $depth, 'max_depth' => $args['max_depth']))) ?> 
```

# c# - 使用公式映射字符串的 IEnumerable

> ID：11886119
> 
> 赞同：1
> 
> 时间：2012-08-09T14:51:47.897
> 
> 标签：c#, fluent-nhibernate

我有一个实体，叫做“竞争”

在比赛中，我有一个财产：

```
IEnumerable<string> EventCodes {get;set;} 
```

我正在尝试做的是从我的映射文件映射此摘录时的子选择：

```
public CompetitionMap()
{
    Id(x => x.Id);

    Map(x => x.DisciplineCodes)
        .Formula("(SELECT DISTINCT DisciplineCode 
            from tblSomeOtherTable WHERE EventID = [ID])");

    Table("tblCompetitions");
} 
```

但是，这会引发此错误：

> {“无法确定类型：System.Collections.Generic.IEnumerable`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=4.0.0.0, Culture =中性，PublicKeyToken=b77a5c561934e089，对于列：NHibernate.Mapping.Formula((SELECT DISTINCT EventCode from tblSomeOtherTable WHERE EventID = [ID]))"}

值得一提的是 tblSomeOtherTable 没有被映射，也不会被映射。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:43:08.840

尝试将“IEnumerable”更改为“ICollection”。完成后，将 Map 更改为具有以下规范的 HasMany：

```
HasMany(x => x.EventCodes)
            .Table("tblSomeOtherTable")
            .KeyColumn("EventID")
            .Element("DisciplineCode")
            .AsSet()
            .ReadOnly(); 
```

当然，如果另一个表实际上没有被称为“tblSomeOtherTable”（我希望它不是），那么也要进行修改。

我从未真正使用过“元素”，但我认为这应该可行。

# objective-c - MPNowPlayingInfoCenter 在锁定屏幕上显示歌词

> ID：11886120
> 
> 赞同：2
> 
> 时间：2012-08-09T14:51:51.023
> 
> 标签：objective-c, ios5, mpnowplayinginfocenter

音乐应用程序在锁定屏幕上显示歌词（文本页面）。

我试图将 MPMediaItemPropertyLyrics 设置为显示大量文本，但事实并非如此。有任何想法吗？

```
MPNowPlayingInfoCenter* mpic = [MPNowPlayingInfoCenter defaultCenter];
            mpic.nowPlayingInfo = @{MPMediaItemPropertyAlbumTitle:sight.guide.name,
        MPMediaItemPropertyTitle:sight.name, MPMediaItemPropertyLyrics:sight.note}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T10:30:53.677

您不能设置歌词。

只能设置以下文档中显示的某些类型的属性： [https ://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPNowPlayingInfoCenter_Class/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPNowPlayingInfoCenter_Class/Reference/Reference.html)

# javascript - 使用类而不是 ID（通过 CLASS 而不是 ID 获取元素）

> ID：11886122
> 
> 赞同：0
> 
> 时间：2012-08-09T14:51:54.710
> 
> 标签：javascript, prototypejs, element, prototype

我正在使用使用 ID 作为元素的原型工具提示。我在页面中的工具提示更多，因此它不允许我在页面中使用相同的 ID 超过一次。有没有办法使用 CLASS 作为元素而不是 ID？这就是我所拥有的。

```
<div style="margin-right: 2px" id="tooltip_bio" class="">Learn More</div>
        <script type="text/javascript" language="javascript">
            new Tip('tooltip_bio', "Tooltip Content", {
                title: "Bio",
                closeButton: true,
                showOn: 'click',
                hideOn: { element: 'closeButton', event: 'click'},
                stem: 'bottomMiddle',
                hook: { target: 'topMiddle', tip: 'bottomMiddle' },
                offset: { x: 0, y: -2 },
                width: '300px'
            });
       </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:28:39.113

从原型文档中，您可以执行类似的操作。

```
document.observe('dom:loaded', function() {
  $$('a[rel]').each(function(element) {
    new Tip(element, element.rel,{
        title: "Bio",
        closeButton: true,
        showOn: 'click',
        hideOn: { element: 'closeButton', event: 'click'},
        stem: 'bottomMiddle',
        hook: { target: 'topMiddle', tip: 'bottomMiddle' },
        offset: { x: 0, y: -2 },
        width: '300px'
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:06:49.410

我不太熟悉`prototypejs`，但如果它需要一个 ID，只需将你的 ID 放入一个数组中，然后迭代。

```
;["id_1", "id_2", "id_3"].each(function(id, i) {

    new Tip(id, "Tooltip Content", {
        title: "Bio",
        closeButton: true,
        showOn: 'click',
        hideOn: { element: 'closeButton', event: 'click'},
        stem: 'bottomMiddle',
        hook: { target: 'topMiddle', tip: 'bottomMiddle' },
        offset: { x: 0, y: -2 },
        width: '300px'
    });

}); 
```

# c++ - 如何将 QImage 转换为 opencv Mat

> ID：11886123
> 
> 赞同：8
> 
> 时间：2012-08-09T14:51:55.507
> 
> 标签：c++, qt, opencv

我在互联网上搜索过，但找不到将 a `QImage`(or `QPixmap`) 转换为 OpenCV的方法`Mat`。我该怎么做？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-24T07:03:04.737

在您发布此问题一年后，互联网上出现了很好的答案：

*   [*在 cv::mat 和 Qimage 之间正确转换*](http://qtandopencv.blogspot.com/2013/08/how-to-convert-between-cvmat-and-qimage.html)
*   [*在 cv::Mat 和 QImage 或 QPixmap 之间转换*](http://asmaloney.com/2013/11/code/converting-between-cvmat-and-qimage-or-qpixmap/)

但在我看来，如果您同时使用 Qt 和 OpenCV，那么 type`QImage`可能**只是用于显示**，这种情况您可能想要使用，`QPixmap`因为它已针对显示进行了优化。所以这就是我所做的：

1.  将图片加载为`cv::Mat`，如果要显示图片，请转换为`QPixmap`使用第二篇介绍的非复制方法。
2.  在`cv::Mat`.
3.  在工作流程中的任何时候，您都可以调用诸如`Mat2QPixmap()`获取实时结果之类的东西。
4.  永远不要转换`QPixmap`为`cv::Mat`，考虑到每种类型的目的，这样做是没有意义的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T15:37:50.157

如果 QImage 仍然存在，并且您只需要对其执行快速操作，那么您可以使用 QImage 内存构造一个 cv::Mat ：

`cv::Mat mat(image.height(), image.width(), CV_8UC3, (cv::Scalar*)image.scanLine(0));`

这假设 QImage 是 3 通道，即 RGB888。

如果 QImage 正在消失，那么您需要复制数据，请参阅[Qimage to cv::Mat conversion 奇怪的行为](https://stackoverflow.com/questions/11170485/qimage-to-cvmat-convertion-strange-behaviour)。

如果 QImage 是 Format_ARGB32_Premultiplied（首选格式），那么您需要将每个像素转换为 OpenCV 的 BGR 布局。cv::cvtcolor() 函数可以在最新版本中将 ARGB 转换为 RGB。
或者您可以在复制数据之前使用[QImage::convertToFormat()](https://doc.qt.io/qt-5/qimage.html)转换为 RGB。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-15T02:56:22.087

Qt 5.11（可能还有一些早期版本）对此的答案：

```
 cv::Mat mat(image.height(), image.width(),CV_8UC3, image.bits());  
    // image.scanline() does not exist, 
    //and height/width is interchanged for a matrix 
```

再次假设 QImage 为 RGB888（即 QImage::Format_RGB888）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-19T22:34:17.390

我在 OpenCV 3.1+ 样式代码中的尝试：

```
void qimage_to_mat(const QImage& image, cv::OutputArray out) {

    switch(image.format()) {
        case QImage::Format_Invalid:
        {
            cv::Mat empty;
            empty.copyTo(out);
            break;
        }
        case QImage::Format_RGB32:
        {
            cv::Mat view(image.height(),image.width(),CV_8UC4,(void *)image.constBits(),image.bytesPerLine());
            view.copyTo(out);
            break;
        }
        case QImage::Format_RGB888:
        {
            cv::Mat view(image.height(),image.width(),CV_8UC3,(void *)image.constBits(),image.bytesPerLine());
            cvtColor(view, out, cv::COLOR_RGB2BGR);
            break;
        }
        default:
        {
            QImage conv = image.convertToFormat(QImage::Format_ARGB32);
            cv::Mat view(conv.height(),conv.width(),CV_8UC4,(void *)conv.constBits(),conv.bytesPerLine());
            view.copyTo(out);
            break;
        }
    }
}

void mat_to_qimage(cv::InputArray image, QImage& out)
{
    switch(image.type())
    {
        case CV_8UC4:
        {
            cv::Mat view(image.getMat());
            QImage view2(view.data, view.cols, view.rows, view.step[0], QImage::Format_ARGB32);
            out = view2.copy();
            break;
        }
        case CV_8UC3:
        {
            cv::Mat mat;
            cvtColor(image, mat, cv::COLOR_BGR2BGRA); //COLOR_BGR2RGB doesn't behave so use RGBA
            QImage view(mat.data, mat.cols, mat.rows, mat.step[0], QImage::Format_ARGB32);
            out = view.copy();
            break;
        }
        case CV_8UC1:
        {
            cv::Mat mat;
            cvtColor(image, mat, cv::COLOR_GRAY2BGRA);
            QImage view(mat.data, mat.cols, mat.rows, mat.step[0], QImage::Format_ARGB32);
            out = view.copy();
            break;
        }
        default:
        {
            throw invalid_argument("Image format not supported");
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-10T05:55:38.787

我会将图像保存到磁盘并从 cv 重新打开它；）

@^ 我已经尝试过以前的解决方案。它似乎不适合我。虽然我得到了一些图像，但它看起来像是一些条形码信息类型的图像。我猜有一些参数不匹配。

# jquery - jQuery Mobile 页面 - 结构有问题 - 不会触发 $.ajax

> ID：11886125
> 
> 赞同：0
> 
> 时间：2012-08-09T14:51:57.797
> 
> 标签：jquery, ajax, mobile

有这个涉及的代码。该页面列出了团队成员提交的请假申请，并允许经理批准或拒绝申请。页面的流程是：

1.  在 pageshow 上，调用 getLeaveDetails()
2.  getLeaveDetails() 使用 $.ajax 调用 /webservices/getPendingLeaveApps.ashx
3.  成功后，调用 showForm(data, textStatus, jqXHR) - 这工作正常
4.  showForm 在 a 内创建标记 - 这很好用
5.  在运行时创建的标记包括按钮 - 这很好用
6.  “approve”和“reject”这两个按钮分别调用它们各自的函数approveLeave(iID)和rejectLeave(iID)——当然是通过ID来批准或拒绝——这也可以
7.  approvalLeave(iID) 和 rejectLeave(iID) 依次使用 $.ajax 调用 .ASHX 页面，将 ID 作为参数传递给 ASHX 以处理操作 - 在页面上选择批准或拒绝 - 这不是在职的

我究竟做错了什么？或者有没有人可以提出更好的结构？非常非常欢迎任何帮助。完全没有 JS 和 HTML 方面的经验。

非常感谢

最好的祝愿

艾尔

```
<div data-role="page"  id="pLeave" data-add-back-btn="true"  data-back-btn-text="Home">
<script type="text/javascript">
    $('#pLeave').live('pageshow', function () {
        getLeaveDetails() ;
    }) ;

    function getLeaveDetails() {
        $.ajax({
            type: 'POST',
            data: {numRows: 10},
            url: '/webservices/getPendingLeaveApps.ashx', 
            success: function(data, textStatus, jqXHR) {
                showForm(data, textStatus, jqXHR) ;
            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert('error' + textStatus + ' ' + errorThrown + ' ' + jqXHR.status + ' ' + jqXHR.statusText + ' ' + jqXHR.data + ' ' + jqXHR.responseText);
                //$("#result_labels").append('<p> textStatus ' + textStatus + '</p>') ;
            }
        });
    }

    function showForm(data, textStatus, jqXHR) {
        $("#resultsArea").html("") ;
        var h = '' ;
        for (i = 0; i < data.length; i++) {
            h = h + '<ul data-role="listview" data-inset="true">' ;
            h = h + '<li>' ;
            h = h + '<p><strong>' + data[i].empName + '</strong></p>' ;
            h = h + '<p><strong>'  + data[i].designation +'</strong></p>' ;
            h = h + '<p><strong> Applied for ' + data[i].noOfDays + ' days of ' + data[i].category + ' leave' ;
            h = h + '<p><strong> From ' + data[i].startDate + ' To ' + data[i].endDate + '</strong></p>' ;
            h = h + '<input type="button" value="Approve" data-inline="true" onclick="approveLeave(' + data[i].id + ');" />' ;
            h = h + '<input type="button" value="Reject" data-inline="true"  onclick="rejectLeave(' + data[i].id + ');" />' ;
            h = h + '</li></ul>' ;
        }
        $("#resultsArea").html(h) ;
        $("#resultsArea").trigger("create");
    }
    function approveLeave(iID) {
        $.ajax({
            type: 'POST',
            data: {id: iID, action: "A"},
            url: '/webservices/mob_processLeave.ashx', 
            success: function(data, textStatus, jqXHR) {
                //showForm(data, textStatus, jqXHR) ;
                getLeaveDetails() ;
            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert('error' + textStatus + ' ' + errorThrown + ' ' + jqXHR.status + ' ' + jqXHR.statusText + ' ' + jqXHR.data + ' ' + jqXHR.responseText);
                getLeaveDetails() ;
            }
        });
    }
    function rejectLeave(iID) {
        $.ajax({
            type: 'POST',
            data: {id: iID, action: "R"},
            url: '/webservices/mob_processLeave.ashx', 
            success: function(data, textStatus, jqXHR) {
                //showForm(data, textStatus, jqXHR) ;
                getLeaveDetails() ;
            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert('error' + textStatus + ' ' + errorThrown + ' ' + jqXHR.status + ' ' + jqXHR.statusText + ' ' + jqXHR.data + ' ' + jqXHR.responseText);
                getLeaveDetails() ;
            }
        });
    }
</script>
<div data-role="header">
    <h1>Leave Apps</h1>
</div><!-- /header -->
<div data-role="content">   
    <div class="content-primary">
        <div id="resultsArea">
        </div>
    </div>
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:23:25.940

它现在正在工作 - 真的，非常愚蠢的错误 - 很抱歉向这个最有用的组发送垃圾邮件。传递给 mob_processLeave.ashx 的参数错误。在开始编码和标准化参数之前写下所有内容的另一个合适的例子。应该通过“approve”而不是“A”作为第二个参数。

```
data: {id: iID, action: "approve"},
url: '/webservices/mob_processLeave.ashx', 
```

不过，希望代码片段对某人有所帮助。

最好的祝愿

艾尔

# database - 是否有带有 Web GUI 的良好在线数据库？

> ID：11886127
> 
> 赞同：0
> 
> 时间：2012-08-09T14:51:58.663
> 
> 标签：database, cloud

我正在尝试找到一个具有自己基于 Web 的 GUI 的良好在线/云数据库。如果可能的话，我想找一个有 API 的，这样我就可以以编程方式访问数据，但仍然有一个很好的前端，允许用户登录和编辑记录。我知道 Google 的 Fusion Tables 可以做到这一点，但是界面很笨拙，很难用于真正的数据库。

我还没有找到类似的东西......有人可以推荐吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:56:17.510

我知道 RackSpace Cloud 最近推出了他们的云数据库服务。我对他们的云服务（云服务器和云文件/CDN）有很好的体验。但是我对他们的云数据库服务没有经验。

[RackSpace 云数据库](http://www.rackspace.com/cloud/public/databases/)

# c#-4.0 - 在 C# 的运行时更改命名空间

> ID：11886130
> 
> 赞同：2
> 
> 时间：2012-08-09T14:52:26.890
> 
> 标签：c#-4.0, dynamic, namespaces, runtime

我首先要声明我不需要这个或计划实施这个；这是一个纯粹的“假设”或“你能做到”的场景。

如果我有一个如下的 C# 类：

```
Namespace Test
{
    public static class TestClass
    {
    }
} 
```

有没有办法在运行时将“Test”的命名空间更改为任何其他字符串？

通常你会打电话`Test.TestClass`，我想知道你是否可以做某种反射或运行时汇编操作来改变调用喜欢`NewNameSpace.TestClass`？

谢谢！

我喜欢学习这些东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:27:33.753

通过这里没有回应和我自己的研究，这似乎是不可能的。

# localization - 如何本地化无脚本（iframe）reCAPTCHA？

> ID：11886131
> 
> 赞同：0
> 
> 时间：2012-08-09T14:52:26.430
> 
> 标签：localization, recaptcha, noscript

我知道要本地化常规（JavaScript）reCAPTCHA，我可以按照[文档](https://developers.google.com/recaptcha/docs/customization#i18n)中的规定为 Recaptcha.create 方法提供 lang 属性，我尝试通过在这样的查询字符串中传递 lang 来为 noscript 版本做同样的事情`http://www.google.com/recaptcha/api/noscript?k=<key>&lang=ru`，但我仍然得到一个英文版。

有谁知道如何本地化 iframe 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:04:51.097

尝试使用 &hl=ru 参数。希望这有帮助。

# git - 在 Git 中创建新分支时可以添加消息/注释/评论吗？

> ID：11886132
> 
> 赞同：33
> 
> 时间：2012-08-09T14:52:26.840
> 
> 标签：git, comments, message, git-branch

我正在做一些探索性的工作，我很可能会在同一任务的几个不同变体上花费 30 分钟。我想在 git 中跟踪它们，这样我就可以在方法之间来回跳转。如果有 3 或 6 或 9 个分支，我可能需要比分支名称更多的信息来区分它们。

将评论附加到新分支的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-09T14:54:48.760

You want branch descriptions:

```
git branch --edit-description 
```

This will open up your editor and let you attach metadata to the branch. You can extract it with:

```
git config branch.<branch>.description 
```

A couple of important notes:

1.  This is stored locally. By definition it can't be pushed since it's stored in `.git/config`. All the same it works great for this use case.

2.  If you delete the branch, the description will delete as well.

3.  You can push this description into merge commits if you set `git config --global merge.branchdesc true`. This means when you issue `git merge --log <branch>`, it'll force the branch description into the stock merge commit message. This has a lot of uses. For example, this is how I track topic branch release notes at my employer.

# java - 包含相同包或不同包的类的文件夹

> ID：11886140
> 
> 赞同：2
> 
> 时间：2012-08-09T14:52:46.360
> 
> 标签：java, class, import, package

因为我的程序有许多单独的类，所以我在我的项目中创建了 2 个文件夹（我使用的是 JDeveloper），名为“panels”和“buttons”，其中放置了扩展 JPanel 或 JButton 的相应类。我对我的所有类都使用了相同的包，以便放置在文件夹中的那些可以被其他未放置在同一文件夹中而不导入的类引用（我所有的类都属于同一个包，例如我的包裹）。

我的问题是我应该改变它并使目录的类属于一个单独的包（例如，“panels”目录中的类属于 mypackage.panels 包和“buttons”目录中的类属于 mypackage.buttons）？第一种方法效果很好，并且不需要导入，但我想知道这是否是“正确”的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:55:22.503

Yes, in general I'd strongly encourage you to make your directory structure match your package structure. Some IDEs will enforce this, and other developers are likely to expect it - it's useful to know exactly where to find a particular file.

Now whether you *really* want separate packages for these controls is a different question, and one we can't answer.

# file - 如何使用 shellscript 创建文件并在其上放置字符串？

> ID：11886144
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:05.680
> 
> 标签：file, shell, ubuntu-12.04

我想在其中创建一个文件`/usr/share/applications/`并在其上放置一个字符串。

**到目前为止我所拥有的：**

```
sudo touch /usr/share/applications/test.desktop
dentry="testing"
sudo echo $dentry >> /usr/share/applications/test.desktop 
```

但这会引发错误`Permission Denied`。我应该怎么做才能使它起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:42:10.253

您应该使用自己的权限创建文件，然后`sudo cp`将其放置到位。

第二个命令不起作用的原因是重定向是由您的 shell 设置的，`sudo`甚至在运行之前。您可以通过运行来解决此问题，`sudo sh -c 'echo stuff >>file'`但这比简单的 更容易发生风险`sudo cp`，并且还具有竞争条件（如果您运行此脚本的两个并发实例，它们最终可能会将信息两次写入文件）。

# endeca - Endeca Web Studio 不工作

> ID：11886147
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:19.917
> 
> 标签：endeca

当我在网络工作室中单击搜索配置或维度顺序时，我收到以下错误：

操作失败，因为管理器状态为“已停止”。要使操作成功，管理器状态必须为运行。确保所有 ENE 和 A-ENE 都在运行。

它是 4.8 版。这是在我到达这里之前很久就安装和配置的。我在 Endeca 没有经验。不知道这一切是如何运作的，网上的信息也不是很有帮助。

任何帮助，将不胜感激。

谢谢！布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:47:27.133

4.8版本没有Endeca HTTP Service或Endeca Tool Service，另外不清楚作者的安装是在Windows上运行的。我相信 Endeca v4.8 只有 Web Studio（Tomcat 应用程序）、JCD、Dgraph 和 Agraph 进程。话虽如此，错误消息表明您需要确保 Dgraph 或 Agraph 进程正在运行（ENE 是 endeca 导航引擎的缩写，是 dgraph 的别名，a-ene 是 agraph 的别名）

tomcat 日志中可能有更多信息，请检查那些应该位于工作空间\logs 文件夹下的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:08:02.197

所有 endeca 服务都需要运行。在 Windows 机器上，确保“Endeca HTTP 服务”、“Endeca JCD”和“Endeca 工具服务”都在运行。

# asp.net - 识别所有 asp:Image 控件在后面的代码中

> ID：11886149
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:21.903
> 
> 标签：asp.net, vb.net

我试图在后面的 vb.net 代码中找到所有 asp:Image 控件，以将 ImageUrl 动态设置为相同的图像文件。我可以为每个控件单独执行此操作，但是编写 10 多 `imgQuestion.ImageUrl = cdn.Uri.ToString & "images/question.png"`行似乎有点傻。我不需要跳过任何图像控件——页面上的每一个都将被更改。有没有办法在不指定每个 ID 的情况下识别所有这些？

ID 的名称并非全都类似，例如“Image1”、“Image2”，而是“PaymentNote”、“search”等，因此我无法使用类似的名称遍历所有数字 `FindControl("Image" & controlNumber)`

还有另一种方法可以做到这一点吗？我更愿意将图像控件 ID 保留为有意义的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:30:15.187

您可以递归地使用`FindControl`, 从`Page`和 对于每个控件检查它是否是`<asp:Image..`.

我自己选择的首选语言是 C#，所以我无法展示 VB 示例。但这是一个 C# 示例：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ChangeImageUrls(Page);
    }
    private void ChangeImageUrls(Control ctrl)
    {
        foreach (Control subCtrl in ctrl.Controls)
        {
            if (subCtrl is Image)
            {
                ((Image)subCtrl).ImageUrl = "...";
            }
            if (subCtrl.HasControls())
                ChangeImageUrls(subCtrl);
        }
    }
} 
```

# ios - Xcode 4.4 changes to localization - how do I NOT localize main storyboard?

> ID：11886150
> 
> 赞同：3
> 
> 时间：2012-08-09T14:53:23.720
> 
> 标签：ios, xcode, localization

I'm localizing an app for the first time, and only need to localize my "Localizable.strings" file. To set that up I created the file, then selected it and pressed the "Make localized..." button and it let me add an English localization (I haven't added any other languages yet).

To my surprise, with Xcode 4.4, doing that also automatically localized these files, moving them into the "en.lproj" folder:

*   InfoPlist.strings
*   MainStoryboard.storyboard

I don't need or want to localize the storyboard file, as there's nothing in it that's language based... and as far as I know, I don't need to localize InfoPlist.strings either (unless I decide to localize the app name?).

So, how do I unlocalize a file?

I see there's an option for "Use base internationalization" which from my understanding would use a base main storyboard rather than localizing it. That sounds like what I need, but according to the Xcode 4.4 release notes that won't work on iOS projects:

> The Use Base Internationalization setting in the project editor works only on Mac products for deployment on OS X v.10.8 and later. Xcode must also be running on OS X v.10.8 or later. This setting is not supported on iOS projects. 11712855

[https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

Thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:26:47.540

如果您选择一个文件并查看该文件的信息。在“常规”点击下，有一个本地化部分，带有 +/- 用于各种语言。只需从那里删除所有语言，它将不再被本地化。

# sql - Classic ASP bizarre SQL error

> ID：11886151
> 
> 赞同：1
> 
> 时间：2012-08-09T14:53:25.357
> 
> 标签：sql, ms-access, asp-classic, odbc, database-connection

I am connecting to a Access DB, with following Conn String

`Conn.Open "PROVIDER=Microsoft.Jet.OLEDB.4.0;DATA SOURCE=\\server\share\Data\PFWTRAN.MDB"`

The following SQL works fine;

```
SQLIn =     "SELECT Date, Time " & _
            "FROM Transactions " & _
            "WHERE TokenNumber = " & TokenNo & " " & _
            "AND Date >= " & FromDateG & " " & _
            "AND Direction = -1 " & _               
            "ORDER BY Date, TransactionNumber;" 
```

However, I want rows where Transactions.Exception = 0, yet when I add this AND condition, the script fails when the RS is opened;

`error '80004005' /path/.../.../...asp, line 97`

If I remove the AND condition, it works again.

Even If I try and put 'Exception' in the SELECT section, it won't run and gives me that error.

Why would the inclusion of one field cause such an error? I read the error is due to permissions, but my permissions are fine as the SQL works without this one field in it.

Any clues?

It is a very old Access 95 database (or even earlier), perhaps I need to change connection provided?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:59:39.633

“*但是，我想要 Transaction.Exception = 0 的行，但是当我添加此 AND 条件时，打开 RS 时脚本失败*”

但是 Transaction.Exception 指的是与您的查询使用的表不同的表。

```
FROM Transactions 
```

`Date`,`Time`和`Exception`是A​​ccess 中的[问题名称和保留字](http://allenbrowne.com/AppIssueBadWord.html)。将这些名称括在方括号中，或在它们前面加上表名/别名。

考虑切换您的方法以使用参数查询......并将其`TokenNo`和`FromDateG`值作为参数提供，而不是将它们的值构建到`SELECT`语句中。

# java - how to instance generic abstract class

> ID：11886152
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:27.790
> 
> 标签：java, oop, machine-learning

I am trying to profile a ann algorithm written in Java that is implemented as a generic abstract class and I cant figure out how to instance it.

Eclipse gives me error "Cannot instantiate the type KdTree" which is not very helpful. Any ideas on how to instance this class so I can test it?

Class defination and constructor:

```
public abstract class KdTree<T> {    
    private KdTree(int dimensions, Integer sizeLimit) {
        this.dimensions = dimensions;
    }
} 
```

My attempt to instance it:

```
public class test_robo {
    public void run_test() 
    {
        KdTree<Integer> tree = new KdTree<Integer>(1,1);
    }
} 
```

link to the full code for KdTree [http://robowiki.net/wiki/User:Rednaxela/kD-Tree](http://robowiki.net/wiki/User:Rednaxela/kD-Tree)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:57:17.573

首先，你不能实例化一个抽象类。

我在您提供的链接中看到了代码；那里已经很少有基类的实现`KdTree<T>`。

1.  加权平方欧几里得
2.  加权曼哈顿
    ...

如果这不是您想要的，请扩展基类并根据需要实现所有这些抽象方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:55:34.130

You cannot instantiate an abstract class directly. The reason it is declared abstract is that it is not meant to be used by itself - you have to provide an implementation of its abstract methods first.

You need to inherit your own class from the abstract base, implement its abstract methods, and then instantiate your class. An instance of your class is automatically an instance of its abstract base.

```
public class ProfilerTree extends KdTree<Integer> {
    public ProfilerTree(int dimensions, Integer sizeLimit) {
        super(dimensions, sizeLimit);
    }
    ...
    // Implement abstract methods of KdTree<Integer> here
}
...
KdTree<Integer> tree = new ProfilerTree(1,1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:57:27.120

您可以通过构造一个匿名子类来实例化它，如下所示：

```
KdTree<Integer> tree = new KdTree<Integer>(1,1)
{
    @Override
    public void myAbstractMethodName()
    {
        //do something!
    }
}; 
```

否则，您可以生成自己的实现：

```
private class KdTreeSub extends KdTree<Integer>
{
    public KdTreeSub()
    {
        super(1, 1);
    }
} 
```

后来叫它

```
public void myMethod()
{
   ...
   KdTree<Integer> kdtree = new KdTreeSub();
   ...
} 
```

原因是抽象类不是完整的类。它们缺少其中的一部分，通常是一种方法。此方法标有“抽象”标识符：

```
public abstract int read(); 
```

这背后的想法是您可以构造一个处理其他部分的类：

```
public byte[] read(int len)
{
    byte[] b = new byte[len];
    for(int i = 0; i < b.length; i++) b[i] = read();
    return b;
} 
```

并简化创建新类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:56:02.237

你不能实例化一个抽象类。抽象实际上意味着它本身没有意义，所以它总是必须被扩展并实现它的方法。

*与接口不同，抽象类可以包含非静态和最终的字段，它们可以包含已实现的方法。这种抽象类类似于接口，只是它们提供了部分实现，将其留给子类来完成实现。如果抽象类仅包含抽象方法声明，则应将其声明为接口。多个接口可以由类层次结构中任何位置的类实现，无论它们是否以任何方式相互关联。例如，想想 Comparable 或 Cloneable。相比之下，抽象类最常被子类化以共享实现部分。单个抽象类由具有很多共同点的类似类（抽象类的实现部分）子类化，*

见[http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T15:06:15.067

就目前而言，该类并不打算被实例化。它旨在存储具体实现的样板代码。您的链接中有 4 个，以`WeightedSqrEuclid`.

您可以简单地通过 eg 实例化它们，`new WeightedSqrEuclid<Integer>(1,1)`或者，如果您想分析通用代码，请编写您自己的扩展类`KdTree`。

但是，在后一种情况下，您应该在同一文件中创建子类，或者将构造函数更改`KdTree`为至少`protected`. 这是因为，要创建这种类型的子类，您需要调用`KdTree`实现中的构造函数之一。

# jquery - jquery tabs and conditional ruby code on document.ready()

> ID：11886157
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:49.933
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui

I want to load my jquery tabs if a certain condition is true. Is it possible to have a ruby if statement embedded in document.ready() or by the time that is processed its too late? Is there a better way to accomplish this?

This doesn't seem to work:

```
<script>
$(document).ready(function() {
    <% if @event.scheduled.empty? %>
    $( "#tabs" ).tabs();    
    <% end %>   
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T10:27:03.283

当您在 JQuery 中使用 ruby​​ if 条件时，您需要摆脱这种情况，您可以使用 escape_javascript 标记来实现。尝试这个，

```
<script>
  $(document).ready(function() {
    <%= escape_javascript(if @event.scheduled.empty?) %>
    $( "#tabs" ).tabs();    
    <% end %>   
  });    
</script> 
```

# jquery - Adding With jQuery - Weird Click Behavior

> ID：11886159
> 
> 赞同：0
> 
> 时间：2012-08-09T14:53:55.920
> 
> 标签：jquery, html, click, append

I'm having some weird behavior with `appendTo()` in jQuery.

This is my JS:

```
$(document).ready(function() {
    $("a#mydiv").click(function () {
        $(this).append('<div class="well">Added div</div>' );
        $(this).appendTo(div.last);
    });
}); 
```

And my HTML:

```
<div id="last">
    <center><a id="mydiv"><h3>New List</h3></a></center>
</div> 
```

Obviously, when I click the "New List" link, I get a new `<div>` added to `<div id="last">`. It looks like this:

![Picture of divs](../Images/1fab6ec570c3811b2f053b10a3339e7d.png)

And if I keeping clicking `New List`, I get more and more `<div>`s. This is fine. However, when I click one of the newly-create `<div>`s, it also adds one. (WHen I click the "added div" grey space). I;m going to be putting textboxes in these new `<div>`s, and I don't want it adding more and more `<div>`s when the user clicks to type.

What can I do to make it so new `<div>`s are created *only* when I click the "New List" link?

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:55:56.640

使用`.after()`而不是`.append()`. 目前，您的新 div 已添加到您的 a 标记中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:57:09.710

那是因为`append()`添加了一个**孩子**，而不是**兄弟姐妹**。所以点击指的是整个容器**myDiv**，其中包含所有添加的 div 并保持可点击状态。用于`after()`添加同级。

# c# - NAudio directSound.stop 问题（？）

> ID：11886161
> 
> 赞同：0
> 
> 时间：2012-08-09T14:54:00.523
> 
> 标签：c#, naudio

`WaveProvider`为什么在我调用*Stop* on之后又提取了一个数据块`DirectSoundOut`？即使在暂停之后也会发生。

我正在使用 NAudio 1.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:02:12.893

这只是一种人工制品的方式`DirectSoundOut`已被写入。它是开源的，因此您可以在[此处](http://naudio.codeplex.com/SourceControl/changeset/view/25e1ba2cce59#NAudio/Wave/WaveOutputs/DirectSoundOut.cs)查看代码。您可以通过`PlaybackState == PlaybackState.Stopped`在调用`WaitHandle.WaitAny`in之后检查 for 来阻止这种情况`PlaybackThreadFunc`。

# database-design - duplicating columns to enforce constraints?

> ID：11886162
> 
> 赞同：0
> 
> 时间：2012-08-09T14:54:08.567
> 
> 标签：database-design, relational-database

I have some complex constraints required and some span over multiple tables. Is it better to duplicate the column (part of the primary key) to enforce the constraint OR use a stored procedure instead?

Here is an example:

```
create table responses
(
   resp_id int PRIMARY KEY
   participant_id int,
   session_id int,
   form_id int,
   section_id int,
   sec_target_id int,
   quest_id int,
   input_method_id int,
   foreign key(form_id, section_id) references form_sections(form_id, section_id),
   foreign key(section_id, quest_id) references questions(section_id, quest_id),
   foreign key(session_id, form_id) references session_forms(session_id, form_id),
   unique(resp_id, session_id)
);

create table user_responses
(
   resp_id int PRIMARY KEY
   participant_id int,
   session_id int,
   instructor_id int,
   foreign key(resp_id, session_id) references responses(resp_id, session_id),
   foreign key(session_id, instructor_id) references session_instructors(session_id, instructor_id)
); 
```

There can be two types of responses: anonymous or user. User responses has an instructor associated with it for each session. In the table user_responses, I duplicate the column session_id from responses table so I can enforce the constraint that the instructor_id is actually assigned to the selected session.

There are many complex constraints like this and some future additional requirements that may cause a DDL change, is it better to enforce the constraints through a SP or the method above?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:41:05.263

是的，通常最好复制列以在需要的地方强制执行约束。注意一些可能会在未来发生变化的极端情况，但总的来说，我认为这种方法没有任何问题。这里重要的一点是，能够强制执行复合外键很有帮助。我不记得 MySQL 是否具有此功能，但大多数 RDBMS 应该。

# ruby - How to reference the requiring file in Ruby?

> ID：11886169
> 
> 赞同：0
> 
> 时间：2012-08-09T14:54:25.967
> 
> 标签：ruby

I would like to be able to give a required file the knowledge of the requiring, like so

```
#requiring file
require 'required_file', __FILE__ 
```

or

```
#required file
puts __REQUIRING_FILE__ 
```

is there a way to achieve that somehow ? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:40:02.457

Ruby 还允许您覆盖 require 方法。

这是一个添加基准测试以要求[https://gist.github.com/278994](https://gist.github.com/278994)的示例。然后您可以使用 Kernel.caller 来获取调用 require 方法的文件的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:07:30.300

不确定您是否可以知道需要哪个文件，但`Module`有回调`included`，`extended`以便您可以对尝试包含它的另一个模块做出反应。也许您可以重构您的概念以使用此功能。

见[http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-included](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-included)

# php - WideImage - Transparent PNG to JPEG

> ID：11886170
> 
> 赞同：1
> 
> 时间：2012-08-09T14:54:30.377
> 
> 标签：php, image

Whenever a user uploads a photo using my script, WideImage converts it to JPEG. However, I just noticed that if I upload a PNG picture, with a transparent background, it makes it black instead.

Is there any way to make this white instead?

This is how i save the image:

```
$img->resizeDown('500', null)->saveToFile('annonce_billeder/'.$bnavn.'.jpeg', 70); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:00:04.530

## 编辑

我查看了 API，我没有看到任何用于在 resizeDown 上设置 BG 颜色或在 resizeDown 之前更改 PNG 上的 alpha 通道的任何内容......但是，我认为您可以使用 merge 方法将 PNG 与白色背景图像。看一下该函数的 API，本质上 PNG 图像将是“水印”。

[http://wideimage.sourceforge.net/wp-content/current/doc/WideImage/WideImage_Image.html#methodmerge](http://wideimage.sourceforge.net/wp-content/current/doc/WideImage/WideImage_Image.html#methodmerge)

* * *

发布一些代码可能会有所帮助...您也许可以使用此方法

$white = $image->allocateColor(255, 255, 255);

# r - 如何查看R的源代码（预解析）

> ID：11886174
> 
> 赞同：8
> 
> 时间：2012-08-09T14:54:33.423
> 
> 标签：r

尴尬的基本问题。

当想了解 R 的源代码时，我通常会在 R 中写下它的名称并通读代码。这种方法的缺点是我会得到去掉注释的代码。

假设我使用 git，而不是 subversion，我有哪些简单的解决方案才能查看源代码？

例如，我可以通过 git 下载 R 的源代码吗？（与 github 一样）

是否有一些网站可以轻松搜索所有代码？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:02:42.580

要使用 git-svn 下载当前的 R-development svn（除了 git，您可能还需要安装 git-svn）：

```
git svn clone https://svn.r-project.org/R/trunk/ 
```

要在线浏览 R-project 源代码，只需访问同一站点：

```
https://svn.r-project.org/R/trunk/ 
```

或者，对于其他分支：

```
https://svn.r-project.org/R/ 
```

例如，要`glm()`在 R 开发源代码中搜索相关代码，我通常会尝试使用 Google 搜索：

```
glm site:svn.r-project.org/R/trunk/ 
```

# php - 使用 DOMDocument 和 DOMXPath 遍历元素

> ID：11886176
> 
> 赞同：2
> 
> 时间：2012-08-09T14:54:36.063
> 
> 标签：php, dom, xpath

我正在尝试遍历包含的每个子元素`div`：

```
$html = '    <div id="roothtml">
<h1>
Introduction</h1>
<p>text</p>
<h2>
text</h2>
<p>
test</p>
</div>'; 
```

我有这个 PHP：

```
$dom = new DOMDocument();
$dom->loadHTML($html);

$dom->preserveWhitespace = false;

$xpath = new DOMXPath($dom);
$els = $xpath->query("/div");
print_r($els); 
```

我得到的只是`DOMNodeList Object ( )`

看过[IBM 教程](http://www.ibm.com/developerworks/opensource/library/x-xpathphp/index.html)后，我应该得到一个数组。我做错了什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:57:32.553

您使用了错误的查询字符串，您应该使用`//div`.

[像这样](http://viper-7.com/Gloyhb)遍历列表：

```
$els = $xpath->query("//div");
foreach( $els as $el) {
    echo $el->textContent;
} 
```

# java - Why can't send the correct data with sockets? JAVA (Client-Server Program running on local)

> ID：11886180
> 
> 赞同：0
> 
> 时间：2012-08-09T14:54:51.337
> 
> 标签：java, sockets, io, client-server

i'm trying to make a server client program in java. I'm trying to run on same system. It sends a text file from client to server including names etc. But when the server gets the file it just prints "[]" characters. Does that mean null or does that mean corrupted data?

Here is the server;

```
package temel;

import java.io.File;
import java.io.InputStream;
import java.net.Socket;
import java.net.ServerSocket;

public class VeriAlma {

  private static int port;

  private static Socket socket;
  public VeriAlma(int port)
  {
      VeriAlma.port=port;
  }
  public static void veriAl() {
    try {
        ServerSocket listener = new ServerSocket(port);

                socket = listener.accept(); 

    }
    catch (java.lang.Exception ex) {
      ex.printStackTrace(System.out);
    }
  }

  public String run() {
    try {
      InputStream in = socket.getInputStream();

        String file_name = "x.txt";

        File file=new File(file_name);

        ByteStream.toFile(in, file);
      return file_name;
    }
    catch (java.lang.Exception ex) {
      ex.printStackTrace(System.out);
      return "asdasd";
    }
  }
  public void setPort(int port)
  {
      VeriAlma.port=port;

  }
} 
```

Here is the client

```
package temel;
import java.io.*;
import java.net.*;
import java.lang.*;

import java.io.OutputStream;
import java.io.InputStream;
import java.io.File;
import java.io.FileOutputStream;

import java.net.Socket;

public class VeriGonderme {

      // host and port of receiver
      private static int    port;
      private static String host;

      public VeriGonderme(int port,String host)
      {
          this.port=port;
          this.host=host;
      }
      public void veriGonder(String dosyaIsmi) {
        try {
          Socket       socket = new Socket(host, port);
          OutputStream os     = socket.getOutputStream();

          ByteStream.toStream(os, 1);

            ByteStream.toStream(os, dosyaIsmi);
            ByteStream.toStream(os, new File(dosyaIsmi));
          }catch (Exception ex) {
          ex.printStackTrace();
        }
        }
      public void setPort(int port)
      {
          this.port=port;

      }
      public void setHost(String host)
      {
          this.host=host;

      }

      } 
```

host is "localhost" port is 4444

[This is the original code i modified it a little bit](http://www.adp-gmbh.ch/blog/2004/november/15.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:14:15.617

> 但是当服务器获取文件时，它只打印“[]”字符。

我希望看到一些这样的字符，因为您将值`1`作为 4 字节二进制文件发送。即`\0\0\0\u0001` 如果你删除它并且只发送一次文件，它可能会像你预期的那样做。

# email - Reverse DNS in email does not work: Received from mail.example.org (unkown [1.2.3.4.6])

> ID：11886183
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:54:55.953
> 
> 标签：email, dns, reverse, postfix-mta

This is the email header of one of our notification mails send through SMTP:

> Received: from mgi74201.gutt.it (mgi74201.gutt.it. [5.9.63.186]) by mx.google.com with ESMTP id ABCD1234; Wed, 08 Aug 2012 09:36:18 -0700 (PDT) Received: from mgi74201.gutt.it (unknown [5.9.63.186]) (Authenticated sender: noreply@maxrev.de) by mgi74201.gutt.it (Postfix) with ESMTPA id ABCD1234 for <***@gmail.com>; Wed, 8 Aug 2012 18:35:55 +0200 (CEST)

As you can see google was able to check PTR:5.9.63.186 (resulting mgi74201.gutt.it.), but our own mail client results "unknown".

We've tested `nslookup 5.9.63.186` and it results as expected:

> Using username "abc". Authenticating with public key "abc" Last login: Wed Aug 8 19:31:01 2012 from 123.abc root@mgi74201:~# nslookup 5.9.63.186 Server: 8.8.4.4 Address:
> 8.8.4.4#53 Non-authoritative answer: 186.63.9.5.in-addr.arpa name = mgi74201.gutt.it. Authoritative answers can be found from: abc@mgi74201:~#

So why does the Reverse DNS not work? A postfix related problem?

EDIT: postfix results:

> Aug 9 17:00:59 mgi74201 postfix/smtpd[19261]: warning: 5.9.63.186: address not listed for hostname mgi74201.gutt.it Aug 9 17:00:59 mgi74201 postfix/smtpd[19261]: connect from unknown[5.9.63.186]

But hosts file seems to be correct:

```
# 'hosts' file configuration. 

::ffff:5.9.63.186     mgi74201.gutt.it     mgi74201 
::1     ip6-localhost     ip6-loopback 
fe00::0     ip6-localnet 
ff00::0     ip6-mcastprefix 
ff02::1     ip6-allnodes 
ff02::2     ip6-allrouters 
ff02::3     ip6-allhosts 
127.0.0.1 localhost.localdomain localhost mgi74201.gutt.it.local 
# Auto-generated hostname. Please do not remove this comment. 
5.9.63.186 mgi74201.gutt.it  mgi74201 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:33:49.630

尝试将`hosts`文件的最后一行移到第一个位置。效果应该是`mgi74201.gutt.it`将得到解决`5.9.63.186`而不是`::ffff:5.9.63.186`

或者，也许更好的是，为 IPv6 地址分配一个不同的主机名，就像`ip6-localhost`不同于`localhost`.

# jquery - 关闭 Jquery 对话框

> ID：11886184
> 
> 赞同：0
> 
> 时间：2012-08-09T14:55:08.810
> 
> 标签：jquery, dialog

我正在使用下面的代码从另一个对话框打开对话框。

```
var newDiv = $(document.createElement('div'));
var cnt = '<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span></p>' + MyMessage;
cnt += '<br/><BR/><input type=button value=Close onClick=$(this).dialog("close") />&nbsp;'; //add two buttons
newDiv.html(cnt); 
newDiv.dialog({ title: "Warning", dialogClass: "error", modal: true }) 
```

关闭按钮行为不起作用。我试过 $(newDiv) 而不是 $(this) 但它没有用。你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:56:36.007

我认为它`newDiv.dialog("close");`应该是这样的。

您需要为此指定一个事件。例如，

```
$("#somebutton").click(function(){
   newDiv = $(".yourdialogdivclass");
   newDiv.dialog("close");
}); 
```

# twitter-bootstrap - Twitter bootstrap：中心按钮工具栏？

> ID：11886192
> 
> 赞同：5
> 
> 时间：2012-08-09T14:55:35.640
> 
> 标签：twitter-bootstrap

```
<div class="row">
    <div class="span12">
      <div class="btn-toolbar">
      <!-- buttons go here -->
       </div>
    </div>
</div> 
```

有没有办法在不使用偏移的情况下使我的按钮工具栏居中？

我尝试应用“margin：0 auto；” 到我的工具栏 div 但这不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:07:34.143

[http://jsfiddle.net/rx9Y2/](http://jsfiddle.net/rx9Y2/)

```
<div class="row">
    <div class="span12">
      <div class="btn-toolbar">
          <div class="btn-group">
              <button class="btn">1</button>
              <button class="btn">2</button>
              <button class="btn">3</button>
          </div>
          <div class="btn-group">
              <button class="btn">1</button>
              <button class="btn">2</button>
              <button class="btn">3</button>
          </div>
       </div>
    </div>
</div>​ 
```

* * *

```
.btn-toolbar{
  text-align: center;
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-08T06:51:01.417

你可以使用内联 CSS，它对我有用。

```
<div class="btn-toolbar" style="justify-content: center; display: flex;" > 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T21:48:32.177

尝试在引导程序 3 的行类上添加“中心”属性。喜欢

`<div class="row center"> .... </div>`

# c++ - 函数指针 - 编译时错误

> ID：11886195
> 
> 赞同：1
> 
> 时间：2012-08-09T14:55:43.893
> 
> 标签：c++, function-pointers, pointer-to-member

我是函数指针的新手，希望得到您的帮助。我有一个方法：

```
int test3(int i)
{
    return i;
} 
```

然后在另一种方法（不是主要）中，我这样做：

```
int (*pTest3)(int) = test3; 
```

从我读过的例子来看，这似乎没问题。但是，我得到一个编译时错误：

> testFile.cpp:277:25: 错误：'int ({anonymous}::CheckingConsumer::)(int)' 类型的参数不匹配'int (*)(int)'</p>

我不明白出了什么问题。任何帮助，将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T15:01:40.387

您`test3`是 a`struct`或 a的成员函数`class`。类成员函数具有`this`传递给它们的隐藏参数，因此不能与普通函数指针一起使用。您需要将函数声明为`static`或将其移到`struct`/之外`class`，以便它不再具有隐藏`this`参数，或者使用类方法指针而不是函数指针：

```
// static class method:
class X
{
    static int test3(int i)
    {
        ...
    }
};

// Non-class method, at global scope
int test3(int i)
{
    ...
}

// Class method pointer
class X
{
    int test3(int i)
    {
        ...
    }
};

// Create the method pointer
int (X::*pTest3) = &X::test3;
X *obj;
// Call the method pointer on an object
(obj ->* pTest3)(42); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:42:16.957

您的方法`test3`似乎是一个实例方法。稍后您将其定义`pTest3`为函数指针，而不是成员函数指针。

简单指针和成员指针之间的主要区别在于，使用成员指针需要对象的实例。对象的实例告诉应该处理什么对象，指针的值告诉应该使用对象的什么数据字段或应该调用什么成员函数。成员指针的值在概念上等同于从对象开头到其成员的偏移量。

使用 typedef 声明成员指针：

```
typedef int (SomeClass::*MyMethodPtr)(int i);
MyMethodPtr ptr3 = SomeClass::test3; 
```

现在使用这个指针：

```
class SomeClass *pab = &ab;
int ret_value = (pab->*ptr3)(4); 
```

请注意，使用了类的实例。关于成员指针还有其他重要的一点。它们被实现为结构，其中包含 2 到 5 个简单的指针和偏移量，具体取决于编译器和其他方面，如多重继承、虚拟基类的存在等。

# c# - Web API 中 DefaultControllerFactory 的等价物是什么？

> ID：11886197
> 
> 赞同：13
> 
> 时间：2012-08-09T14:55:45.297
> 
> 标签：c#, asp.net-web-api

我们正在尝试用新的 ASP.NET Web API 替换以前的 DefaultControllerFactory，以更好地处理 REST/XML 调用。在网上搜索总是指向实现`System.Web.Http.Dependencies.IDependencyResolver`然后处理`GetService()`接口所需的以及其他一些方法。

然而，它似乎正在缓存 ApiController 实例和任何新的控制器，它似乎并没有解决。由于性能问题，在启动期间很难提供所有可能的 ApiController 实例。

`DefaultControllerFactory`允许提供控制器实例并缓存“命中”条目，但当无法延迟加载实例时会引发错误。

**是否还有其他需要实现的重载/控制器工厂方法？**

到目前为止，搜索没有产生任何命中，但任何指针都会很棒。感谢您的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T15:19:46.480

~~它`IHttpControllerActivator`由`DefaultHttpControllerActivator`.~~

您可以使用以下方法替换它：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerActivator), 
        new MyOwnActivatior()); 
```

 ~~# 哎呀！

我的意思是`IHttpControllerSelector`！

* * *

它`IHttpControllerSelector`由`DefaultHttpControllerSelector`.

您可以使用以下方法替换它：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), 
        new MyOwnActivatior()); 
```~~

# php - PHP 数组声明

> ID：11886206
> 
> 赞同：0
> 
> 时间：2012-08-09T14:56:11.193
> 
> 标签：php, arrays, loops

```
for ($k = 0; $k < $count; $k++) {
    $master[$k] = $namearray[$k], $streetarray[$k], $localityarray[$k], $regionarray[$k], $postalcodearray[$k], $phonearray[$k];
} 
```

我想声明一个新数组并从已声明的其他数组中设置值。我以为我可以遍历键并设置值，但这对我不起作用。

完整代码如下。我正在解析黄页搜索结果并尝试将搜索结果输出到 csv 文件中。在下面的代码中，我删除了循环，只向数组添加了一些值，以确保我的错误不是别的东西。

```
<?php

            // include required functions
            include('simple_html_dom.php');

            $url = "http://www.yellowpages.com/" . $_POST['city'] . '-' . $_POST['state'] . '-' . $_POST['postalcode'] . '/' . $_POST['category'] . '?g=' . $_POST['city'] . '%2C+' . $_POST['state'] . '+' . $_POST['postalcode'] . '&q=' . $_POST['category'];

            // get DOM from URL
            $html = file_get_html($url);

            // find all business name
            foreach($html->find('h3.business-name') as $name)
                //echo $name->innertext . '<br />';
                $namearray[] = $name->innertext;

            // find all business street address
            foreach($html->find('span.street-address') as $street) 
                //echo $street->innertext . '<br />';
                $streetarray[] = $street->innertext;

            // find all business city
            foreach($html->find('span.locality') as $locality)
                //echo $locality->innertext . '<br />';
                $localityarray[] = $locality->innertext;            

            // find all business state
            foreach($html->find('span.region') as $region)
                //echo $region->innertext . '<br />';
                $regionarray[] = $region->innertext;            

            // find all business postal code
            foreach($html->find('span.postal-code') as $postalcode)
                //echo $postalcode->innertext . '<br />';
                $postalcodearray[] = $postalcode->innertext;                

            // find all business phone
            foreach($html->find('span.business-phone') as $phone)
                //echo $phone->innertext . '<br />';
                $phonearray[] = $phone->innertext;

        ?>
        <p>Search results for: <?php echo $_POST['category'] . ' ' . $_POST['city'] . ' ' . $_POST['state'] . ' ' . $_POST['postalcode'];  ?></p>
        <?php
            // Output results
            $count = count($namearray);
            for ($i = 0; $i < $count; $i++) {
                echo $namearray[$i] . '<br />';
                echo $streetarray[$i] . '<br />';
                echo $localityarray[$i] . ',' . $regionarray[$i] . ' ' . $postalcodearray[$i] . '<br />';
                echo $phonearray[$i] . '<br />' . '<br />';
            }

        $list = array (
            array($namearray[0], $streetarray[0], $localityarray[0], $regionarray[0], $postalcodearray[0], $phonearray[0]),
            array($namearray[1], $streetarray[1], $localityarray[1], $regionarray[1], $postalcodearray[1], $phonearray[1]),
            array($namearray[2], $streetarray[2], $localityarray[2], $regionarray[2], $postalcodearray[2], $phonearray[2]),
            array($namearray[3], $streetarray[3], $localityarray[3], $regionarray[3], $postalcodearray[3], $phonearray[3])
        );

        $fp = fopen('hrpsearch.csv', 'w');

        foreach ($list as $fields) {
            fputcsv($fp, $fields);
        }

        fclose($fp);

        ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:59:15.810

尝试：

```
$master = array();
for ($k = 0; $k < $count; $k++) {
    $master[$k] = array
        ( $namearray[$k]
        , $streetarray[$k]
        , $localityarray[$k]
        , $regionarray[$k]
        , $postalcodearray[$k]
        , $phonearray[$k]
        );
} 
```

这将为您创建一个新的二维数组，其中包含每个子数组的关联键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:58:57.650

尝试

```
for($k = 0; $k < $count; $k++) {
    $master[$k] = array(
        $namearray[$k], 
        $streetarray[$k], 
        $localityarray[$k], 
        $regionarray[$k], 
        $postalcodearray[$k], 
        $phonearray[$k]
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:59:20.943

也许您只是想实现这一目标？

```
$master[$k] = array($namearray[$k], $streetarray[$k], $localityarray[$k], $regionarray[$k], $postalcodearray[$k], $phonearray[$k]); 
```

我建议改用：

```
$master[$k]['name'] = $namearray[$k];
$master[$k]['street'] = $streetarray[$k];
... 
```

数据的检索将更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:00:15.153

我认为@DaveRandom 的答案是您正在寻找的（我暗示）。

由于 PHP 数组可以是任何类型（标量、数组、对象等），因此您需要告诉它您正在分配一个带有结构的数组`array()`。

最终结果将是：

```
$master[$k] = array($namearray[$k], $streetarray[$k], $localityarray[$k], $regionarray[$k], $postalcodearray[$k], $phonearray[$k]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:01:19.807

试试这个

```
for ($k = 0; $k < $count; $k++) {
    $master[$k] = array($namearray[$k], $streetarray[$k], $localityarray[$k], $regionarray[$k], $postalcodearray[$k], $phonearray[$k]);
} 
```

或者更好地创建关联数组

```
for ($k = 0; $k < $count; $k++) {
    $master[$k] = array('name'=>$namearray[$k], 
                        'street'=>$streetarray[$k], 
                        'city'=>$localityarray[$k], 
                        'region'=>$regionarray[$k], 
                        'postalCode'=>$postalcodearray[$k], 
                        'phone'=>$phonearray[$k]);
} 
```

您还需要检查您的数组元素是否不为空，或者只是将 @ 放在数组元素之前，例如 'name'=>@$namearray[$k]。如果元素不存在，它将删除任何警告。

# sql - 加入 teradata 中的多个表

> ID：11886209
> 
> 赞同：0
> 
> 时间：2012-08-09T14:56:30.193
> 
> 标签：sql, database, inner-join, teradata

请帮我解决这个问题

```
sel a.col1,a.co2,a.col3,.........b.col1,b.col2..,c.col1,c.col2
from table1 as a inner join table2 as b on a.col1 =b.col1
inner join table3 as c on a.col1 = b.col1
where col1 = xxxxx; 
```

现在我需要再加入一个表table4。由于 table4 中没有 col1 作为主索引，因此我需要将其加入到另一个具有主键的表中。

以下是我需要将其包含在上述 sel 语句中的不同查询。

```
Sel xx.col1,yy.aaa,yy.bbb,zz.ccc,zz.ddd,zz.eee
from tablea as xx, tableb as yy, table4 as zz
where xx.col1 = yy.bbb and yy.aaa = zz.ccc 
```

主要指标：

*   col1 用于表 1、表 2、表 3、表 xx
*   用于tableb的aaa
*   表4的ccc

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:35:38.843

怎么样：

```
Select a.leg,c.btn,p.prods,svc.sr,speed.test, a.leg, b.acct_id, e.emp_no, e.emp_name
FROM db1.tb1 as a 
    inner join db1.tb2 as C ON a.leg = C.leg 
    inner join db1.tb3 as p ON a.leg = p.leg 
    inner join db1.tb3 as svc on a.leg = svc.leg 
    inner join db2.tb4 as speed on a.leg = speed.leg
    inner join db4.tb1 as b on a.leg = b.sce_acct_id
    inner join db4.tb5 as e on b.acct_id = e.acct_id
where a.leg ='xxxx' 
```

# php - 如何修改 zii.widgets.CBreadcrumbs 自动生成的 html？

> ID：11886211
> 
> 赞同：2
> 
> 时间：2012-08-09T14:56:31.787
> 
> 标签：php, yii

我需要修改 Yii 框架小部件 - zii.widgets.CBreadcrumbs。默认情况下，它会打印：

```
<div class="breadcrumbs">
<a href="/dr/dr/public_html/">Home</a> » <span>News</span></div> 
```

但是我需要：

```
<ul class="menu">
   <li><a href="/dr/dr/public_html/">Home</a></li>
   <li>News</li>
</ul> 
```

那我怎么改呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T07:13:55.857

1.  如果您使用的是最新版本的[Yii (1.1.11) ，那么您在](http://www.yiiframework.com/news/55/yii-php-framework-1-1-11-is-released/ "http://www.yiiframework.com/news/55/yii-php-framework-1-1-11-is-released/")[CBreadcrumbs](http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs "http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs")中有一些*新*选项，即：并且使用这些（以及）您可以轻松实现您的要求。`activeLinkTemplate``inactiveLinkTemplate``tagName`

    您只需在包含面包屑小部件的文件中为这些选项添加值，默认情况下，它位于布局文件中：*protected/views/layouts/main.php*，如下所示：

    ```
    <?php if(isset($this->breadcrumbs)):?>
        <?php $this->widget('zii.widgets.CBreadcrumbs', array(
            'links'=>$this->breadcrumbs,

            'tagName'=>'ul', // will change the container to ul
            'activeLinkTemplate'=>'<li><a href="{url}">{label}</a></li>', // will generate the clickable breadcrumb links 
            'inactiveLinkTemplate'=>'<li>{label}</li>', // will generate the current page url : <li>News</li>
            'homeLink'=>'<li><a href="'.Yii::app()->homeUrl.'">Home</a></li>' // will generate your homeurl item : <li><a href="/dr/dr/public_html/">Home</a></li>
        )); ?><!-- breadcrumbs -->
    <?php endif?> 
    ```

    `'activeLinkTemplate'`为活动/可点击链接生成链接，并`'inactiveLinkTemplate'`生成不可点击且没有 url 的当前 url。

    `{url}`并且`{label}`是每个视图的面包屑对象提供的*url*和*label值。*例如：-

    ```
    // in some view.php file, you'll see this
    $this->breadcrumbs=array( // array is label=>url
        'Label1'=>array('route1'),
        'Label2'=>array('route2'),
        'Label3',
    ); 
    ```

2.  如果您使用的是 1.1.11 之前的版本，则必须使用`extend`CBreadcrumbs 类并修改`run()`方法以输出面包屑，包含在`<li>`. 一旦你看到现有的`run()`方法，你就会很清楚如何去做。

**编辑：**

错过了如何添加 css 类。您可以通过在此小部件的 htmlOptions 数组中添加类键值来做到这一点：

```
<?php $this->widget('zii.widgets.CBreadcrumbs', array(
    'links'=>$this->breadcrumbs,

    'tagName'=>'ul', // will change the container to ul
    'htmlOptions'=>array('class'=>'menu'),
    // ... rest of the code ...
 )); ?><!-- breadcrumbs --> 
```

# titanium - 我如何在 iOS xCode SDK 中检索数据？

> ID：11886213
> 
> 赞同：1
> 
> 时间：2012-08-09T14:56:34.970
> 
> 标签：titanium, titanium-modules

我正在使用钛。我想制作钛模块（适用于 iOS）。一切正常。但是，我如何在 xCode 中检索通过 .js 文件发送的数据。

```
in .js file

var data = "Mritunjay";
var oldData = "Singh";
var data = module_tset.findData({"newData":data,"oldData":oldData});

in xCode 

-(id)findData:(NSMutableArray *)args
{
 NSMutableArray *ary = [[NSMutableArray alloc]initWithArray:args];

// How i retrieve "newData" Value in xCode?

} 
```

请帮我..！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:44:57.170

[首先，您应该检查文档。](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/iOS_Module_Development_Guide)

另外，[查看 GitHub 上的示例 moddevguide 项目](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile/ios)，他们有非常简单直接的示例说明如何执行此操作。

简而言之，这里是提取这些参数的代码（假设您设置正确）。

```
-(id)findData:(id)args
{
    ENSURE_SINGLE_ARG(args,NSDictionary); // Standard practice
    NSString *newData_Pass = [TiUtils stringValue:[args objectForKey:@"newData"]];  

    // Now do something with newData!

} 
```

就是这样！

# android - 使用 Graph Api 的 Android Facebook 事件

> ID：11886216
> 
> 赞同：0
> 
> 时间：2012-08-09T14:56:51.257
> 
> 标签：android, facebook, facebook-graph-api

我已经使用 Graph Api 成功创建了事件，如下所示。

```
Bundle params = new Bundle();
params.putString("name", "Sample Emvent");
params.putString("start_time", "2013-07-04");
Utility.mAsyncRunner.request("me/events", params, "POST",
                             new EventListener(), null); 
```

我得到了一些 id 作为回应。现在我的问题是 1) 我如何分享这个活动？2) 我如何登记参加此活动？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:25:50.637

*   您可以使用此网址分享活动： `https://www.facebook.com/events/EVENT_ID`

*   您可以使用 Graph API 通过向 EVENT_ID/attending 发出 HTTP POST 来回复用户参加*。*见这里：[https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# c# - Metro 应用程序使用 socketstream 在 C# 中写入 Win32 TCPListener

> ID：11886217
> 
> 赞同：0
> 
> 时间：2012-08-09T14:56:53.680
> 
> 标签：c#, windows, sockets, windows-8, microsoft-metro

去年我写了一个家庭自动化应用程序，我可以用它来从笔记本电脑控制服务器——服务器应用程序使用了以下资源

```
using System.Net;
using System.Net.Sockets;
using System.IO; 
```

然后创建 TCPListener 以接收来自本地网络的命令。

```
 TcpListener server = new TcpListener(localAddr, port);

      // Start listening for client requests.
      server.Start();

       // Buffer for reading data
       Byte[] bytes = new Byte[256];
       String data = null;

            while (true)
            {

                    TcpClient client = server.AcceptTcpClient();
                     data = null;

                     // Get a stream object for reading and writing
                     NetworkStream stream = client.GetStream(); 
```

然后处理流以获得正确的命令和参数，这对客户端和服务器都有效。

我开始为遥控器编写一个地铁应用程序，正因为如此，我不得不使用

```
using Windows.Networking.Sockets;
using Windows.Networking; 
```

然后创建了一个 async void 来发送命令。（对不起，这很乱）

```
 async void sendTest()
    {
        StreamSocket socket = new StreamSocket();

        await socket.ConnectAsync(new HostName("192.168.88.1"), "13000",SocketProtectionLevel.PlainSocket);

        DataWriter writer;

        writer = new DataWriter(socket.OutputStream);

        // Write first the length of the string as UINT32 value followed up by the string. Writing data to the writer will just store data in memory. 
        string stringToSend = "Hello";
        writer.WriteUInt32(writer.MeasureString(stringToSend));
        writer.WriteString(stringToSend);

        await writer.StoreAsync();
    } 
```

我得到一个异常（在超时期间没有响应）

我知道我的服务器没有给出响应，但我已经尝试了很多东西，比如 AcceptSocket，但是这些仍然没有检测到客户端已经连接。

我想知道 Metro 是否有另一个我可以使用的网络库，或者是否有人可以为我的服务器侦听器建议替代代码。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T01:09:46.497

似乎您正在寻找 StreamSocketListener。那这个呢？

```
private StreamSocketListener listener;

private async void Test()
{
    listener = new StreamSocketListener();
    listener.ConnectionReceived += OnConnection;
    await listener.BindServiceNameAsync(port.ToString());
}

private async void OnConnection(StreamSocketListener sender,
    StreamSocketListenerConnectionReceivedEventArgs args)
{
    // Streams for reading a writing.
    DataReader reader = new DataReader(listener.InputStream);
    DataWriter writer = new DataWriter(socket.OutputStream);

    writer.WriteString("Hello");
    await writer.StoreAsync();
} 
```

# cluster-analysis - 链接类型“调整完成”如何在 WEKA 中用于凝聚层次聚类？

> ID：11886219
> 
> 赞同：1
> 
> 时间：2012-08-09T14:56:54.733
> 
> 标签：cluster-analysis, weka, hierarchical-clustering

我能找到的关于“调整后的完整”链接的唯一描述是这样的：“与完整链接相同，但在集群距离内最大”

“在集群距离内”是什么意思？

最终如何使用这种链接方法计算两个集群之间的距离？

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:54:03.603

开源软件的一大优点是您可以准确了解该软件的工作原理。下面的代码显示了[Weka 的算法源代码](https://svn.scms.waikato.ac.nz/svn/weka/trunk/weka/src/main/java/weka/clusterers/HierarchicalClusterer.java)，`HierarchicalClusterer`更具体地说，它显示了实现`COMPLETE`and`ADJCOMPLETE`功能的部分。区别如下：

*   就像`COMPLETE`链接方法一样，计算集群 1 的一个节点与集群 2 的一个节点之间的最大距离，并将其存储在`fBestDist`
*   然后，找到集群 1 或集群 2 中节点之间的最大距离并将其存储在`fMaxDist`
*   `fMaxDist`最后减去`fBestDist`

`ADJCOMPLETE`因此，使用as计算的两个集群之间的距离`linkType`对应于`COMPLETE`距离减去集群 1 或集群 2 中 2 个节点之间的最大距离。

`Adjusted Complete-Link`在以下[论文](https://encrypted.google.com/url?sa=t&rct=j&q=%22adjusted%20complete%22&source=web&cd=2&ved=0CEIQFjAB&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.11.4772&rep=rep1&type=pdf&ei=RBEkUOivCdDwsgb77oGYDQ&usg=AFQjCNFRK0mYN1JNhLYbz1hyL0PeBmnolw&cad=rja)中提出：

> Sepandar Kamvar、Dan Klein 和 Christopher Manning (2002)。*使用基于模型的方法解释和扩展经典凝聚聚类算法*。在第 19 届机器学习国际会议论文集中 (ICML-2002)

根据它（第 4.2 节），如果集群具有不同的半径，则应使用其`Adjusted Complete-Link`版本（参见图 10）。`Complete-Link`

```
case COMPLETE:
case ADJCOMLPETE:
  // find complete link distance aka maximum link, which is the largest distance between
  // any item in cluster1 and any item in cluster2
  fBestDist = 0;
  for (int i = 0; i < cluster1.size(); i++) {
    int i1 = cluster1.elementAt(i);
    for (int j = 0; j < cluster2.size(); j++) {
      int i2 = cluster2.elementAt(j);
      double fDist = fDistance[i1][i2];
      if (fBestDist < fDist) {
        fBestDist = fDist;
      }
    }
  }
  if (m_nLinkType == COMPLETE) {
    break;
  }
  // calculate adjustment, which is the largest within cluster distance
  double fMaxDist = 0;
  for (int i = 0; i < cluster1.size(); i++) {
    int i1 = cluster1.elementAt(i);
    for (int j = i+1; j < cluster1.size(); j++) {
      int i2 = cluster1.elementAt(j);
      double fDist = fDistance[i1][i2];
      if (fMaxDist < fDist) {
        fMaxDist = fDist;
      }
    }
  }
  for (int i = 0; i < cluster2.size(); i++) {
    int i1 = cluster2.elementAt(i);
    for (int j = i+1; j < cluster2.size(); j++) {
      int i2 = cluster2.elementAt(j);
      double fDist = fDistance[i1][i2];
      if (fMaxDist < fDist) {
        fMaxDist = fDist;
      }
    }
  }
  fBestDist -= fMaxDist;
  break; 
```

# git - git svn 克隆混乱

> ID：11886220
> 
> 赞同：0
> 
> 时间：2012-08-09T14:56:55.897
> 
> 标签：git, git-svn

我在*svn*中有一个项目，设置为：

```
project
 branches/
 tags/
 trunk/ 
```

当我做一个

```
git svn clone -s -r ##:HEAD path/to/svn 
```

我得到的只是一系列文件和文件夹，我相信这些文件和文件夹来自`trunk`以及当我执行

```
git branch 
```

我所看到的只是`master`我应该看到的时间`master`和`clean`（`clean`在下面`branches/`）

发生什么了？

如果我做：

```
git svn clone -r ##:HEAD path/to/svn 
```

然后我得到我的布局：

```
project
 branches/
 tags/
 trunk/ 
```

但*git*无法识别`branches`. 也是`trunk`一个`branches`....

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:35:41.360

我相信您的分支已创建，但您没有看到它们，因为它们是远程分支。试试`git branch -va`。例如，要使用这些远程分支，您可以创建一个本地分支：

`$ git checkout -b working_from_branch -t clean remotes/branches/clean`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:01:39.067

尝试以下命令：

```
git branch -r 
```

...这应该向您显示该存储库知道的所有远程分支。假设您的分支/目录是平面的（没有嵌套分支或分支层次结构）， git svn clone -s 应该会自动识别它们。

这些没有出现在对 git 分支的默认响应中的原因是直接在 git 中的远程分支上工作通常是不好的做法。当您将更改发送到远程存储库时，无论如何都会发送远程分支上的所有内容。通过签出本地跟踪分支，您可以保留删除提交的选项（通过创建另一个本地跟踪分支，并复制您想要发送到那里的更改）。要创建跟踪分支，请使用：

```
git checkout -b master-mybranch -t mybranch 
```

其中 mybranch 是您要跟踪的分支。我使用 master-* 作为我自己的约定，但是您可以将跟踪分支命名为任何您喜欢的名称，只要它可以帮助您记住它是什么。祝你好运！

# jquery - 在启动时重新定位我的图像

> ID：11886222
> 
> 赞同：1
> 
> 时间：2012-08-09T14:57:04.703
> 
> 标签：jquery, css, image

我在我的 css 中的几个地方都有条目，例如：

```
button {
  background-image: url('../images/button.png');
} 
```

我想要一个 jQuery 中的函数，它将`images/`所有`background-image`url 中的所有出现更改为：

```
button {
  background-image: url('../images/Customer/button.png');
} 
```

我目前使用这段可怕的代码来做这件事，但我怀疑使用 jQuery 有一种更简洁的方法。请注意，图像的实际位置保存在`sessionStorage`.

```
// Hacks all CSS styles that refer to the images folder.
for ( s = 0; s < document.styleSheets.length; s++ ) {
  var mysheet=document.styleSheets[s];
  var myrules=mysheet.cssRules? mysheet.cssRules: mysheet.rules;
  // Look for: background-image: url(images/button.png); 
  for (i=0; i < myrules.length; i++){
    var css = myrules[i].style.cssText;
    if(css.indexOf('images/') != -1 ){
      // Surgery on the cssText because the individual entries are read only.
      // Replace the css.
      myrules[i].style.cssText = css.replace("images/", sessionStorage.images);
      // That's the new style.

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:01:57.103

你不应该在这里需要 jQuery。

尝试引入新的 CSS 定义`button`并将其添加到页面中。这将覆盖您之前的定义。

```
var style = document.createElement('style');
style.type = 'text/css';
style.innerHTML = 'button { background-image: url("../images/Customer/button.png"); }';
document.head.appendChild(style); 
```

`button`或者，调整元素的内联 CSS ：

```
var buttons = document.getElementsByTagName('button'),
    i = 0;

for (; i < buttons.length; i++) {
    buttons[i].style.backgroundImage = 'url("../images/Customer/button.png")';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:09:46.610

将此插件与 jQuery 一起使用：

**jQuery.Rule** -- [http://flesler-plugins.googlecode.com/files/jquery.rule-1.0.2-min.js](http://flesler-plugins.googlecode.com/files/jquery.rule-1.0.2-min.js)

然后执行以下操作：

```
$(function(){

    var customer = 'Oscar';

    // Get all stylesheets
    $.rule().sheets.map(function(index, cssSheet){
            // Get all css rules from all the stylesheets
        $.each(cssSheet.cssRules, function(index, cssRule){
            // If cssRule is 'background-image' type
            if(cssRule.cssText.indexOf('background-image') != -1){
                // Prepare new cssRule adding the customer
                var newCssRule = cssRule.cssText.replace('/images/', '/images/' + customer + '/');
                // Add new cssRule to the correct stylesheet
                $.rule(newCssRule).appendTo('style');
            }
        });
    });

}); 
```

只是要知道，你可以用这个做更多的事情，看看这个链接：

[http://flesler.webs.com/jQuery.Rule/](http://flesler.webs.com/jQuery.Rule/)

希望这可以帮助 ：-）

# calendar - jquery StrutsTypeConverter json struts2 不转换

> ID：11886223
> 
> 赞同：0
> 
> 时间：2012-08-09T14:57:06.607
> 
> 标签：calendar, jsonresult

我对 struts2-json-plugin 和 StrutsTypeConverter 有疑问。我有一个包含 java.util.Calendar 条目的数据库的结果。

我有一个公共类 CalendarTypeConverter 扩展了 StrutsTypeConverter，它将 DB resutl 转换为日期字符串。

当我使用 Struts2 tags 时，会调用转换器并完成转换。当我将 org.apache.struts2.json.JSONResult 用于 jQuery 网格时，没有使用转换器，也没有进行任何转换。

如何获得带有转换后的日历数据的 JSON 结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:01:33.333

您需要一个 JavaScript 来完成这项工作。

在 colModel 中使用这样的东西

```
{name:'dateOfBirth', formatter:'date', formatter:formatCalendarDay()} 
```

创建一个网格函数，如：此函数以 mm/dd/yyyy 格式返回。您可以检查所需的字符串格式。

```
formatCalendarDay: function() {
        return function(cellvalue, options, rowObject) {
            if (cellvalue != null) {
                return cellvalue.month + '/' + cellvalue.day + '/' + cellvalue.year;
            } else {
                return ' ';
            }
        };
    }, 
```

# c# - 树视图的 Sql Join 查询

> ID：11886224
> 
> 赞同：1
> 
> 时间：2012-08-09T14:57:06.853
> 
> 标签：c#, sql-server, tsql, radtreeview

嗨，我的数据库中有 3 个表： ![在此处输入图像描述](../Images/5d9f91014dbd70474904ffd55473cdd1.png)

![在此处输入图像描述](../Images/6e52e11ad43435ad3cd5d15c48346522.png)

我想在 treeView 中显示来自该表的选择查询。我使用 RadTreeView，在树视图中显示。我需要通过这些字段进行查询： DisplyMember | 家长会员 | 儿童会员。

![在此处输入图像描述](../Images/62a0e8e5e5bdc62523376ccc75916793.png)

**如何为此查询加入这些表？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:45:11.233

您的数据源将是您用于显示表格的数据网格或列表。显示成员将是您想要的任何内容，因此请说出此成员的组名。父成员将是组。值成员将是 groupid。我对 radtree 视图并不熟悉，但我认为这可能会有所帮助。也检查一下。它可以帮助你[http://www.telerik.com/help/winforms/treeview-data-binding-binding-to-object-relational-data.html](http://www.telerik.com/help/winforms/treeview-data-binding-binding-to-object-relational-data.html)

# .net - LibUsbDotNet.dll 在哪里？

> ID：11886227
> 
> 赞同：1
> 
> 时间：2012-08-09T14:57:11.143
> 
> 标签：.net, usb

第一个`LibUsbDotNet 2.2.8 Help`示例需要项目引用 LibUsbDotNet.dll。示例代码是：

```
using LibUsbDotNet;
using LibUsbDotNet.Info;
using LibUsbDotNet.Main;
namespace Examples
{
    internal class ShowInfo
    {
        public static UsbDevice MyUsbDevice;
        ... 
```

尝试使用 google 或在 stackoverflow 上查找 LibUsbDotNet.dll 充其量是不清楚的。使用 LibUsbDotNet_Setup.2.2.8 安装程序会安装 LibUsbDotNet 帮助，但不会安装 LibUsbDotNet.dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:00:15.093

刚刚自己安装了 LibUsbDotNet，发现 DLL 应该位于 C:\Program Files\LibUsbDotNet 假设您在安装时进行了“完整安装”（默认选项）。如果您只检查了文档而不是运行时，它就不会被放置在那里。 ![LibUsbDotNet 的位置](../Images/6fa84e77d5ef7cc99b7870dccb9d1fd0.png)

# java - 如何在 JavaFX 2.2 中绘制清晰、不透明的细线？

> ID：11886230
> 
> 赞同：3
> 
> 时间：2012-08-09T14:57:12.800
> 
> 标签：java, javafx, javafx-2

在 JavaFX 2.2 中绘制清晰、不透明的细线的最佳方法是什么？

文档说，其中一个`strokeWidth`将`0.0d`是一条细线，但它根本不可见。值`> 0.0d and <1.0d`显示的线条非常好，但也没有表现出不透明的行为。当一条线切割另一条线时，相交点比线的其余部分轻（我希望这种行为来自具有一定透明度的线）。最后，`1.0d`绘制一条宽度为几个像素的白线。

这是我的测试代码：

```
LineBuilder.create().startX(i*gridSize).startY(0).endX(i*gridSize).endY(height).smooth(false).stroke(Color.WHITE).strokeWidth(0.5d).fill(Color.WHITE).build(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:24:01.887

您可以使用[Region](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html)子类，例如Parent的[Pane ，并将](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)[snapToPixel](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html#snapToPixelProperty)设置为 true。

此外，请参阅坐标系上的[节点文档。](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)

> 在设备像素级别，整数坐标映射到角落和像素之间的裂缝和像素的中心出现在整数像素位置之间的中点。因为所有坐标值都是用浮点数指定的，所以坐标可以精确地指向这些角（当浮点值具有精确的整数值时）或像素上的任何位置。例如，坐标 (0.5, 0.5) 将指向舞台左上角像素的中心。类似地，尺寸为 10 x 10 的 (0, 0) 矩形将从舞台左上角像素的左上角跨越到第 10 条扫描线上第 10 个像素的右下角。该矩形内最后一个像素的像素中心将位于坐标 (9.5, 9.5) 处。

另请参阅[形状](http://docs.oracle.com/javafx/2/api/index.html)文档：

> 大多数节点往往只对其应用整数转换，并且通常它们也使用整数坐标定义。对于这种常见情况，具有直线边缘的形状填充往往很清晰，因为它们与落在整数设备坐标上的像素之间的裂缝对齐，因此往往会自然地覆盖整个像素。另一方面，对这些相同的形状进行描边通常会导致轮廓模糊，因为默认描边属性指定默认描边宽度为 1.0 坐标，该坐标通常恰好映射到 1 个设备像素，并且描边应该跨越形状的边界, 落在边界两侧的一半。由于许多常见形状的边框往往直接落在整数坐标上，并且这些整数坐标通常精确映射到整数设备位置，因此边框往往会导致形状边框两侧的像素行和列的覆盖率为 50%而不是 100% 覆盖其中之一。因此，填充通常可能是清脆的，但笔画通常是模糊的。
> 
> 避免这些模糊轮廓的两种常见解决方案是使用完全覆盖更多像素的更宽笔划 - 如果没有有效的缩放变换，通常 2.0 的笔划宽度将实现这一点 - 或者指定 StrokeType.INSIDE 或 StrokeType.OUTSIDE 笔划样式 - 这会将默认的单个单位笔划偏向于形状边框内部或外部的完整像素行或列之一。

因此，如果您将节点留在不 snapToPixel 的组或区域中，您可以按照 Shape 文档中的上述说明进行操作。

这是一些示例代码：

```
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Line;
import javafx.scene.shape.LineBuilder;
import javafx.scene.shape.StrokeType;
import javafx.scene.text.Text;
import javafx.stage.Stage;

/** http://stackoverflow.com/questions/11886230/how-to-draw-a-crisp-opaque-hairline-in-javafx-2-2 */
public class LineWidths extends Application {
  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) {
    Line fuzzyline = LineBuilder.create()
        .startX(5).startY(50)
        .endX(90).endY(50)
        .stroke(Color.BLACK).strokeWidth(1)
      .build();
    Line hairline = LineBuilder.create()
        .startX(4.5).startY(99.5)
        .endX(89.5).endY(99.5)
        .stroke(Color.BLACK).strokeWidth(1)
      .build();
    Line fatline = LineBuilder.create()
        .startX(5).startY(150)
        .endX(90).endY(150)
        .stroke(Color.BLACK).strokeWidth(1).strokeType(StrokeType.OUTSIDE)
      .build();
    Pane snappedPane = new Pane();
    Line insideline = LineBuilder.create()
        .startX(5).startY(25)
        .endX(90).endY(25)
        .stroke(Color.BLACK).strokeWidth(1)
      .build();
    snappedPane.setSnapToPixel(true);
    snappedPane.getChildren().add(insideline);
    snappedPane.setPrefSize(100, 50);
    snappedPane.relocate(-0.5, 174.5);

    stage.setScene(
      new Scene(
        new Group(
          fuzzyline, hairline, fatline, snappedPane,
          new Text(10, 40, "fuzzyline"),  
          new Text(10, 90, "hairline"),  
          new Text(10, 140, "fatline"),  
          new Text(10, 190, "snappedPane")
        ), 100, 250
      )
    );
    stage.show();
  }
} 
```

![线型样本](../Images/6bca5aa553c90134ab307a0d2a5963a7.png)

# ruby-on-rails - Redactor - 第一段总是在 p 标签之外

> ID：11886234
> 
> 赞同：1
> 
> 时间：2012-08-09T14:57:20.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wysiwyg, redactor

我最近开始将 redactor(http://redactorjs.com/) 合并到一个 rails 3.2 应用程序中。这是一个非常酷的编辑器，但我一直遇到的一个问题是第一段的输出 - 即一旦你开始在输入框中输入 - 只是在 div 标签内或完全没有标签而不是 ap 标签。下面的示例...有其他人遇到过这个问题吗？有修复吗？另外，如果在您回答这个问题时有人有任何其他的 wysiwig 编辑器建议，我会全神贯注。

```
<div class="span4 offset2">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<span rel="pastemarkerend" id="pastemarkerend20547"></span>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<span rel="pastemarkerend" id="pastemarkerend51485"></span><br>
</p>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:26:41.563

不知道这是否有帮助，但我在 redactor.js 中遇到了一个类似的问题，其中所有文本都以粗体开头（包含在`strong`标签中）。

事实证明，我使用的 CSS 在某种程度上影响了 redactor 生成输出的方式。尝试隔离您的编辑器，删除您的 css 或将其包含在另一个标签中，然后看看会发生什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T13:59:56.000

也许有点晚了，但我们有一个 Redactor 的错误，每次用户从另一个网页复制/粘贴文本（即其中包含 HTML）到 Redactor 画布时都会发生该错误：由于完全混乱，我们丢失了文本的随机部分已发送邮件中的 HTML（我们使用 Redactor 编写所有邮件）。

标签总是出现在混乱的邮件中，所以我的猜测是 Redactor 不能很好地处理 HTML 的粘贴。

您是否尝试更新插件？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T16:29:50.833

您可以将 ckeditor 与 Rails 3.2 一起使用，易于设置。

[https://github.com/galetahub/ckeditor](https://github.com/galetahub/ckeditor)

我尝试使用 redactor JS 和 rails 3.2，但无法重现您的问题。

[https://github.com/senayar/redactor_with_rails3](https://github.com/senayar/redactor_with_rails3)

你能提供一些代码来帮助你吗？

# javascript - 如何调整打开列表中的“+”号？(CSS)

> ID：11886238
> 
> 赞同：3
> 
> 时间：2012-08-09T14:57:31.630
> 
> 标签：javascript, css

我正在尝试本地化网站的主题，使其从右到左（而不是从左到右：RTL 而不是 LTR）。

我发现很难做的一件事是解决列表向左而不是向右打开的方式。这是一个存在此类问题的网页示例：

[http://pancher.org/alerts](http://pancher.org/alerts)

有人可以告诉我怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:05:29.677

您的`expandable-hitarea`班级设置为`float: left`. 您可以将其更改为`float: right`并调整一点 CSS，它会按您的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:06:06.010

`RTL.css`如果语言切换到 rtl 语言，您可以单独编写并包含它。或者，您也可以直接用 CSS 编写它：

```
<html lang="he" dir="rtl">
  ...
</html> 
```

接着：

```
html[dir='rtl'] <element> { /* styles */ }
/* or */
html[lang='he'] <element> { /* styles */ } 
```

当然，您需要一个镜像的图像精灵才能使其工作。

# javascript - Dust.js 在渲染时覆盖 Knockout observables

> ID：11886239
> 
> 赞同：1
> 
> 时间：2012-08-09T14:57:38.433
> 
> 标签：javascript, knockout.js, dust.js

我在一个项目中同时使用[Dust.js](http://akdubya.github.com/dustjs/)和[Knockout.js](http://knockoutjs.com/)，使用一个名为[Duster-KO](https://github.com/socialtables/duster-ko)的模块来集成两者。当我尝试在客户端渲染灰尘模板时会出现问题：当我将一个可观察对象或任何包含可观察对象的对象传递给 Context 参数中的dust.render() 时，灰尘实际上将 KO 可观察对象设置为“块”对象。我相信这是因为 Knockout observables 是函数，所以 Dust 认为我传递给它的函数是回调而不是 observable，然后它正在执行并以某种方式设置 observable。

有什么办法可以避免这个问题，或者防止 Dust 接触到 observables？

这是我遇到的情况的示例：

```
var guest = exports.guest = function(opts) {
  this.first = ko.observable(opts.first||"")
  this.last = ko.observable(opts.last||"")

  // ... more model code here
}

var table = exports.table = function(opts) {
  // This is an observable array of guest objects
  this.guests = ko.observableArray(opts.guests||[])
  this.template = "tableTemplate"
  this.target = opts.target  // This is whatever DOM element we are injecting the template into

  // ... more model code here

  var self = this

  this.draw = function() {
    // Before we render the Dust template, the guest's first and last name are as they should be

    // this.ctx is a Context object inherited from another parent object, which has the current object pushed onto it
    var rendered = dust.render(self.template, this.ctx)

    // At this point in the code, the guest's first and last name have been set to Chunk objects, rather than their actual first and last names

    self.target.appendChild(rendered)
  }
} 
```

在上面的例子中，在我渲染灰尘模板之前，每个客人的名字和姓氏都是完整的，并且应该是。但是，之后它们被更改为 Chunk 对象。

不幸的是，在有人建议之前，移除 Dust 并仅使用 Knockout 不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:16:14.340

你是否应用了 Duster-Ko 自述文件中提到的 hack ？？？

> 为什么 Dust hack :(
> 
> 不愉快的生意，那个。
> 
> Dust 期望任何功能标签都接受一组参数（块、上下文）。我们可以为每个 KO Observer 构建一个 Dust 友好的包装器，并从中构建 Dust 上下文，但这似乎是大量不必要的对象创建。
> 
> 相反，我们只是破解 Dust 以不像通常那样评估 Observers，并使用更多标准的辅助过滤器来处理后果。
> 
> 来源
> 
> 这些更改是在您使用的任何dust*js 中完成的。
> 
> 主要黑客：
> 
> ```
> Chunk.prototype.reference = function(elem, context, auto, filters) {
> -  if (typeof elem === "function") {
> +  if (typeof elem === "function" && elem.name != "observable") {
>      elem = elem(this, context, null, {auto: auto, filters: filters});` 
> ```
> 
> 哦，另外，我们正在手动调用一些 Dust 模板并对其进行评估。要手动调用模板，我们需要传入一个 Dust Chunk 对象，通常我们不会接触到它，所以：
> 
> ```
> +dust.chunk= Chunk Tis all! Checkout lib/dust-patch.js for a patch 
> ```
> 
> 针对未指定的 Dust 源（目前，dust-core-0.3.0.js 是预期目标）。

# android - VFY：找不到签名中引用的类

> ID：11886240
> 
> 赞同：8
> 
> 时间：2012-08-09T14:57:51.153
> 
> 标签：android, jar

我有一个简单的 android 应用程序，它在其构建路径上使用 modbus 库（“jamod”）。当我运行它时它立即崩溃。我在这个问题上有基本相同的问题：[Getting "Caused by: java.lang.VerifyError:"](https://stackoverflow.com/questions/6247862/getting-caused-by-java-lang-verifyerror)

但我无法真正解决问题。我的应用程序以前运行良好，现在无论我做什么，它似乎都不起作用。

以下是 logcat 输出。提前致谢。

```
08-09 14:36:47.753: W/dalvikvm(396): VFY: unable to find class referenced in signature (Lnet/wimpi/modbus/net/TCPMasterConnection;)
08-09 14:36:47.823: W/dalvikvm(396): VFY: unable to resolve exception class 510 (Lnet/wimpi/modbus/ModbusIOException;)
08-09 14:36:47.823: W/dalvikvm(396): VFY: unable to find exception handler at addr 0x18
08-09 14:36:47.854: W/dalvikvm(396): VFY:  rejected Lcom/example/xmlparsertest/JavaModBusTcpDriver;.<init> (Ljava/lang/String;I)V
08-09 14:36:47.854: W/dalvikvm(396): VFY:  rejecting opcode 0x0d at 0x0018
08-09 14:36:47.854: W/dalvikvm(396): VFY:  rejected Lcom/example/xmlparsertest/JavaModBusTcpDriver;.<init> (Ljava/lang/String;I)V
08-09 14:36:47.854: W/dalvikvm(396): Verifier rejected class Lcom/example/xmlparsertest/JavaModBusTcpDriver;
08-09 14:36:47.854: D/AndroidRuntime(396): Shutting down VM
08-09 14:36:47.854: W/dalvikvm(396): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-09 14:36:47.873: E/AndroidRuntime(396): FATAL EXCEPTION: main
08-09 14:36:47.873: E/AndroidRuntime(396): java.lang.VerifyError: com.example.xmlparsertest.JavaModBusTcpDriver
08-09 14:36:47.873: E/AndroidRuntime(396):  at com.example.xmlparsertest.MainActivity.<init>(MainActivity.java:13)
08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.Class.newInstanceImpl(Native Method)
08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.Class.newInstance(Class.java:1429)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.os.Looper.loop(Looper.java:123)
08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.reflect.Method.invokeNative(Native Method)
08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.reflect.Method.invoke(Method.java:521)
08-09 14:36:47.873: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-09 14:36:47.873: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-09 14:36:47.873: E/AndroidRuntime(396):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T21:39:14.817

仔细检查您正在做的一件事是在“构建路径”窗口的“订购和导出”选项卡中勾选了 jar 文件的复选框。这将在构建的 APK 中包含该库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T15:42:54.547

你把jamod jar 文件放在Eclipse 的“libs”目录中了吗？如果不是，即使它在编译期间位于路径上，也不会捆绑到您的应用程序中。这是一个相当新的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:22:42.347

即使我的所有库都在“LIB”文件夹中并且也将它们添加到构建路径中，并且 ECLIPSE 可以在编译时轻松找到它们，但是当它们部署在一个真正的设备，它给了问题。解决方案：确保您的库文件放在 ECLIPSE 项目的“libs”文件夹中，而不是放在“lib”或“library”中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-04T12:20:17.467

当存在不兼容的资源（如接口/类/库文件）、不正确的继承/将静态/实例级别标识符封装为变量/方法/参数/类/文件时，会出现此错误 (java.lang.VerifyError)。

这个问题是由于违反了代码中的 OOP 设计原则而出现的。所以代码被jvm的验证过程拒绝并在运行时抛出验证错误。如果您仔细查看错误堆栈跟踪，则 jvm 堆栈 [java.lang.Class.newInstanceImpl(Native Method)... java.lang.Class 正在创建 class-A(com.example.xmlparsertest.MainActivity) 的实例。新实例...]。此类引用或被其他类引用违反了设计原则，导致该类无法实例化。

```
 08-09 14:36:47.854: W/dalvikvm(396): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
    08-09 14:36:47.873: E/AndroidRuntime(396): FATAL EXCEPTION: main
    08-09 14:36:47.873: E/AndroidRuntime(396): java.lang.VerifyError: com.example.xmlparsertest.JavaModBusTcpDriver
    08-09 14:36:47.873: E/AndroidRuntime(396):  at com.example.xmlparsertest.MainActivity.<init>(MainActivity.java:13)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.Class.newInstanceImpl(Native Method)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.Class.newInstance(Class.java:1429)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.os.Looper.loop(Looper.java:123)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at java.lang.reflect.Method.invoke(Method.java:521)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    08-09 14:36:47.873: E/AndroidRuntime(396):  at dalvik.system.NativeStart.main(Native Method) 
```

不能忽略这些警告，因为这些警告会导致 FATAL EXCEPTIONS。Dalvikvm Engineers 已经像 Sun Engineers Done 一样实施了 OOP 原则。有各种博客/论坛，人们说要忽略这些警告。因此，请不要忽略这些警告并更正它们，尤其是针对医疗/银行/安全领域应用程序或该警告导致应用程序中断。

请重新检查您在代码中实现的 OOP 设计原则（例如继承/封装/多态性等）。我被要求检查并消除大型多模块 android 应用程序上的此类错误，我发现许多设计违规。

解决此类问题的第一个触发器使与进入 FATAL ERROR 的类相关的所有内容都公开/非最终。一旦你解决了，然后一个接一个地实施你的设计原则，你将获得一个无错误的应用程序。

谢谢，Vinod Bherwal（Android 架构师）。

# java - 无法运行下面的 try and catch 程序

> ID：11886247
> 
> 赞同：-5
> 
> 时间：2012-08-09T14:58:29.770
> 
> 标签：java

```
public class exdemo1 {

    public static void main(String args[]) {
        int a = 10, b = 0, ans;
        int arr[] = {10, 20, 30};
        try {
            ans = a / b;
            System.out.println("Division" + ans);
            System.out.println("4th Element" + arr[3]);
        } catch (ArithmeticException ae) ;
            {
                System.out.println(ae);
            }
         catch (ArrayindexoutofboundsException ae) {
            System.out.println(ae);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:01:43.423

现在您的代码格式正确，您可能会注意到`;`第一个 catch 块之后的额外内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:03:58.977

我不知道你到底是什么意思，但这些是我注意到的问题：

*   您的数组**没有**第 4 个元素，它有 3 个元素，最后一个元素可以通过`arr[2]`
*   你不能除以 0。
*   `catch (ArithmeticException ae) ;`您必须删除`;`行尾的，您不需要那里。
*   `ArrayindexoutofboundsException`正确的类是`ArrayIndexOutOfBoundsException`.

由于 catch 语句，我假设您知道前两个。

修复这些应该使您的程序编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:03:24.253

它是 ArrayIndexOutOfBoundsException 而不是 ArrayindexoutofboundsException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:01:32.410

在第一个 . 之后有一个额外的分号`catch`。删除它。另外，我不认为`ArrayindexoutofboundsException`是一个有效的例外，应该是`ArrayIndexOutOfBoundsException`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:11:14.090

您将两个程序混合在一起，但只会抛出一个异常。你的程序基本上做同样的事情

```
public static void main(String... args) {
     int a = 10, b = 0;
     int ans = a / b;
} 
```

这将打印抛出的异常。

# php - Magento Community 1.7.0.2 - 导出产品 CSV

> ID：11886249
> 
> 赞同：3
> 
> 时间：2012-08-09T14:58:36.513
> 
> 标签：php, magento, magento-1.7

相当新的 Magento 安装，产品已设置等，并且正要导出产品 CSV，一旦我提交了正常表单，错误“没有发送有效数据”我开始进行一些调试以查看发生了什么。第一站是 exception.log

```
Notice: Undefined index:   in /app/code/core/Mage/ImportExport/Model/Export/Entity/Product.php on line 539' in /app/code/core/Mage/Core/functions.php:245 
```

导致问题的功能是：

```
/**
 * Update data row with information about categories. Return true, if data row was updated
 *
 * @param array $dataRow
 * @param array $rowCategories
 * @param int $productId
 * @return bool
 */
protected function _updateDataWithCategoryColumns(&$dataRow, &$rowCategories, $productId)
{
    if (!isset($rowCategories[$productId])) {
        return false;
    }

    $categoryId = array_shift($rowCategories[$productId]);
    $dataRow[self::COL_ROOT_CATEGORY] = $this->_rootCategories[$categoryId];
    if (isset($this->_categories[$categoryId])) {
        $dataRow[self::COL_CATEGORY] = $this->_categories[$categoryId];
    }

    return true;
} 
```

由于某种原因，$categoryId 没有设置为 $rowCategories 不是数组。

我已经重新运行了索引管理以防万一，但在我看来，类别或其他东西有问题。我知道一个快速解决方法是在继续之前检查 $categoryId 是否已设置，但我想首先知道是什么导致了错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T23:01:21.310

在magento修复之前，您可以将文件复制到
`local/Mage/ImportExport/Model/Export/Entity/Product.php`

并更改第 534 行：

```
if (!isset($rowCategories[$productId])) {
    return false;
} 
```

至

```
if (!isset($rowCategories[$productId]) or empty($rowCategories[$productId])) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:58:44.050

我有同样的问题。因为我只是想导出一个产品 - 修复很简单：我只是将产品添加到一个类别中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T22:52:30.013

出口产品表格上的过滤器似乎有问题。在 magento 1.7.0.2 上对此的简单修复：

1.  将文件**app/code/core/Mage/ImportExport/Model/Export.php 复制**到**app/code/local/Mage/ImportExport/Model/Export.php**。
2.  在第 145 行附近，在**export()**方法上，注释掉 if 和 else。表单上从来没有过滤器。
3.  将文件**app/code/core/Mage/ImportExport/controllers/Adminhtml/ExportController.php**复制到**app/code/local/Mage/ImportExport/controllers/Adminhtml/ExportController**。
4.  在第 77 行附近，在**exportAction()**方法上，注释掉 if 和 else。同上的原因

那是为我做的。

# solr - Solr 主从故障转移设置以实现高可用性

> ID：11886250
> 
> 赞同：4
> 
> 时间：2012-08-09T14:58:41.443
> 
> 标签：solr, elasticsearch, solrj, solrcloud

在使用 Solr（我们目前使用的是 3.5）时，我们如何设置 Masters 以进行故障转移？

假设在我的设置中我有两个主人和两个奴隶。应用程序将所有写入提交到一个活动的主服务器，两个从服务器都从这个活动的主服务器获取更新。还有另一个中继器与 Master 的目的相同。

现在我的问题是，如果 Master 出于某种原因倒下，我如何在没有任何手动干预的情况下将 Repeater 设置为 Master。从站如何开始从中继器而不是损坏的主站获取更新。有推荐的方法吗？是否有任何其他推荐的主/从设置来确保 Solr 系统的高可用性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:05:28.700

此时，您最好的选择可能是调查当前 Solr 4.0 alpha 中存在的 SolrCloud 功能，在撰写本文时，该功能将在几个月内发布。SolrCloud 的目标是处理数据分发和主节点选举，使用 ZooKeeper 分布式数据库在集群内维护关于哪些节点服务于同时角色的共识。

还有其他更传统的方法可以为 Solr 3 的复制主从架构设置故障转移，但我个人不希望在 Solr 4.0 即将发布时进行投资。

***编辑：**请参阅[Linux-HA](http://linux-ha.org/)，了解一种这样的传统方法。就我个人而言，我会创建一个专门构建的守护进程来重新配置你的核心和负载均衡器，使用 ZooKeeper 进行存在检测和分布式锁。*

如果外包是一种选择，您可以考虑托管服务，例如我自己不起眼的[Websolr](http://websolr.com/)。我们默认提供这种分发和热故障转移，因此我们的客户不必担心它的实施机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:13:56.513

我同意尼克的观点。Solr 3.x 中的复制工作方式并不总是很方便，尤其是对于主故障转移。如果你打算考虑 Solr 4，你可能也想看看 elasticsearch，它以非常出色的方式解决了这类问题！

它使用推送复制而不是 Solr 使用的拉取机制。这意味着文档在所有节点上都被重新索引。听起来可能很奇怪，但这可以减少网络负载（例如由于段合并）。此外，一个节点被选为主节点，如果它崩溃，另一个节点将自动取代它成为新的主节点。

# .net - SQL Linq 语法

> ID：11886252
> 
> 赞同：-4
> 
> 时间：2012-08-09T14:58:46.010
> 
> 标签：.net, sql, linq

所需的 SQL 等效项：

```
select * from polls where (id=(select max(id) from polls where publish_at=(select max(publish_at) from polls where publish_at<='2012-08-10 00:00:00')) and status=1 ) 
```

我已经尝试过了，但它给出了 Null 而它应该返回一行。

```
var qry = db.Polls.Where(p => p.id == db.Polls.Where(x => x.publish_at == db.Polls.Max(y => y.publish_at) && x.publish_at <= System.DateTime.Today).Max(x => x.id) && p.status.Equals(PollStatus.Active)).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:12:47.043

一种方法是这样的：

```
db.polls.Where(p => p.id == polls.Where(x => x.publish_at == polls.Max(y => y.publish_at)).Max(x => x.id)); 
```

像这样的另一种方式：

```
from p in db.polls
where p.id == (from x in db.polls
               where x.id == (from y in db.polls
                              where y.publish_at == db.polls.Max(y => y.publish_at)
                              select y.id).Max())
               select x.id).Max())
select p; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:10:19.837

```
var query = from p in context.Polls
            where p.id == (from p2 in context.Polls
                           where p2.publish_at == context.Polls.Max(x => x.publish_at)
                           select p2).Max(y => y.id)
            select p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:49:59.173

这很好用：

```
var qry = db.Polls.Where(p => p.id == db.Polls.Where(x => x.publish_at == db.Polls.Where(y => y.publish_at<=System.DateTime.Today).Max(y=>y.publish_at)).Max(x => x.id) && p.status.Equals(PollStatus.Active)).FirstOrDefault(); 
```

# css - CSS 选择器 - 仅定位页面上的第一个

> ID：11886253
> 
> 赞同：0
> 
> 时间：2012-08-09T14:58:49.633
> 
> 标签：css, css-selectors

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:07:43.803

:first-child 可以工作，但如果你不想使用伪类也可以创建一个类来设置元素的样式......可能更容易：

```
<div id="mem-tools">
  <div class="members">
    <a href="#" class="first-link">Link One</a>
    <a href="#">Link Two</a>
  </div>
</div> 
```

然后你可以相应地设置类的样式：

```
#mem-tools a.first-link{
  padding:15px 0 0 65px;
  font-weight:bold;
  color:#444444;
  font-size:14px;
  height:35px;
  display:block;
} 
```

这样你就可以避免假货。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:00:55.717

`#mem-tools a:first-child`可能会成功

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-31T15:03:28.027

```
.mem-tools +a {
/*
 try your Styles here
*/
} 
```

# python - 使用numpy和scipy在python中将wrf数据的网格点插值到lat lon

> ID：11886255
> 
> 赞同：1
> 
> 时间：2012-08-09T14:58:53.830
> 
> 标签：python, numpy, scipy, spatial-interpolation

我是python的新手，我正在尝试编写一个函数，该函数将从netcdf文件中获取一个numpy数组，维度为[时间、高度、经度、纬度]，并将函数内插到指定的纬度和经度。我已经研究了 scipy.interpolate 但仍然不确定从那里去哪里。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T16:10:56.030

如果您希望（a）将整个数据集内插到一组新的纬度/经度坐标或（b）在单个纬度/经度位置获取值，我无法从这个问题中判断出来。

[无论哪种方式，如果您不习惯在 python 中执行此操作，那么在气候数据运算符](https://code.zmaw.de/projects/cdo)中使用 remapgrid 会容易得多（确保您安装了 netCDF 支持）。这确实需要 netCDF 文件遵循 CF-Conventions（请参阅这篇关于使您的 WRF 文件符合 CF 的[帖子）。](http://www.unidata.ucar.edu/blogs/developer/en/entry/wrf_goes_cf_two)

remapgrid 的文档可在[此处](https://www.rsmas.miami.edu/users/rajib/cdo.pdf)找到。有关网格选项的信息，请参见第 1.3 节（第 9-12 页），有关插值技术的信息，请参见第 2.10 节（从第 106 页开始）。如何重新映射有几个选项，您使用的命令取决于您的应用程序。

(a)这是一个使用双线性插值重新映射到高斯 (128x64) 网格的示例

```
cdo remapbil,n32 wrfout_d01_1999-01-01-01_00:00:00.nc out.nc 
```

(b) 这是一个使用最近邻映射到一个纬度、经度点的重新映射示例：

```
cdo remapnn,lon=-107.0_lat=34.0 wrfout_d01_1999-01-01-01_00:00:00.nc out.nc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-25T07:51:01.810

您可以使用`XESMF`它来重新网格化它。

它有GEOSChem 的[教程](https://github.com/geoschem/GEOSChem-python-tutorial)，但它几乎与 WRF 相同。

我写了一个关于如何重新网格化 WRF 数据的[笔记本。](https://github.com/zxdawn/GEOSChem-python-tutorial/blob/master/Chapter04_regridding_WRFChem.ipynb)

# opengl - GLSL 中的 Photoshop 投影样式

> ID：11886258
> 
> 赞同：4
> 
> 时间：2012-08-09T14:58:57.963
> 
> 标签：opengl, glsl, photoshop

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:15:32.533

我也对这个答案很感兴趣，因为我试图在我的开源项目中复制 Photoshop 图层样式：

[https://github.com/vinniefalco/LayerEffects](https://github.com/vinniefalco/LayerEffects)

这是我所知道的：

*   阴影和内阴影是彼此的对偶。在图层上添加阴影与向具有反转蒙版的图层添加内阴影相同。

*   技术设置为“精确”的外发光计算具有倒角度量的欧几里德距离变换 (EDT)。

*   描边设置为渐变，“Shape Burst”使用相同的 EDT。

*   技术设置为“更柔和”的外发光使用一些未知变换，与用于投影的变换相同。

由于距离变换在几乎所有 Photoshop 图层样式中都起着关键作用，因此可以合理地假设投影中的未知变换是 EDT 的变体。我能找到的唯一其他变体称为“高斯距离变换”（GDT）。不幸的是，在“用于医疗、遥感和工业应用的 2-D 和 3-D 图像配准”一书中只有一种描述。PDF 可用：

[http://read.pudn.com/downloads85/ebook/327739/Wiley%5B1%5D.Interscience.2-D.and.3-D.Image.Registration.for.Medical.Remote.Sensing.and.Industrial。应用程序.pdf](http://read.pudn.com/downloads85/ebook/327739/Wiley%5B1%5D.Interscience.2-D.and.3-D.Image.Registration.for.Medical.Remote.Sensing.and.Industrial.Applications.pdf)

以下是 GDT 的描述：

*如果我们用单调递增的径向函数对图像进行卷积，将得到一个功能类似于距离变换图像的图像。高斯的倒数可以用作单调递增的径向函数。因此，要获得图像的距离变换，需要对图像进行高斯卷积，并将卷积后的图像的强度反转。以这种方式计算距离变换使得获得的距离对噪声不太敏感。这在图 4.6 中的一个例子中得到了证明。图 4.6a 和 4.6b 分别显示了通过高斯卷积计算得到的图像 4.5a 和 4.5b 的距离变换。与欧几里得距离变换相比，高斯卷积计算的距离变换对噪声不太敏感。*

鉴于此图像：

[![前](../Images/acf1179749210fdbd7750e002661d898.png)](https://i.stack.imgur.com/clNIS.png)
[（来源：[imgfsr.com](http://www.imgfsr.com/sitebuilder/images/fig4.5a-256x256.png)）]

这是带符号的欧几里得距离变换和带符号的高斯距离变换：

[![美东时间](../Images/3f7610a59031029080c6b09755da0f93.png)](https://i.stack.imgur.com/f051I.png)
[（来源：[imgfsr.com](http://www.imgfsr.com/sitebuilder/images/fig4.5c-256x256.png)）]
[![GDT](../Images/ec06ecf80c6ac817ac5ee08c09bb2e92.png)](https://i.stack.imgur.com/lyGLS.png)

（图片来自[http://www.imgfsr.com/ifsr_dtg.html](http://www.imgfsr.com/ifsr_dtg.html)）

# php - 如何通过 Salesforce 集成在 PHP 中检测和捕获“连接超时”

> ID：11886261
> 
> 赞同：1
> 
> 时间：2012-08-09T14:59:02.927
> 
> 标签：php, salesforce, integration

我使用 Salesforce API Webservices 通过 PHP 创建/更新记录。我测试我最终会收到一条来自 Salesforce 的消息，说“无法连接到主机”，所以我怀疑这是我的大多数用户在 php 脚本失败时所期望的。

我相信我尝试了捕获和异常，但它似乎不起作用。

# c - 使用 OpenSSL 从内存中读取公钥/私钥

> ID：11886262
> 
> 赞同：9
> 
> 时间：2012-08-09T14:59:06.587
> 
> 标签：c, ssl, openssl

我在我的项目中使用公钥/私钥来加密/解密一些数据。

我在服务器上托管一个公钥（“public.pem”）。

“public.pem”看起来像这样：

```
-----BEGIN PUBLIC KEY-----
.....
.....
-----END PUBLIC KEY----- 
```

我编写了一个客户端，它下载这个公钥并将其保存到磁盘，然后使用该文件的文件描述符调用 OpenSSL 的 PEM_read_RSA_PUBKEY()。此操作效果很好，结果是一个准备好加密的 RSA 对象。

我想避免每次都将公钥写入磁盘（因为我已经在内存中有缓冲区）。

如何在不将缓冲区保存到磁盘的情况下执行相同的操作？我注意到一个名为：PEM_read_bio_RSAPublicKey() 的函数，但我不确定它是否使用了 BIO 结构。我在正确的道路上吗？

所以真正的问题是：如何直接从内存而不是文件描述符中读取 RSA 对象的公钥/私钥。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-09T17:35:02.897

你在正确的轨道上。您必须通过 BIO 缓冲区将 PEM 密钥包装在内存中`BIO_new_mem_buf()`。换句话说，类似：

```
BIO *bufio;
RSA *rsa

bufio = BIO_new_mem_buf((void*)pem_key_buffer, pem_key_buffer_len);
PEM_read_bio_RSAPublicKey(bufio, &rsa, 0, NULL); 
```

相同的方法对 RSA 私钥（通过`PEM_read_bio_RSAPrivateKey`）有效，但在这种情况下，您肯定需要满足密码短语。查看[手册页](http://www.openssl.org/docs/crypto/pem.html)以获取详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-11T09:41:45.367

SquareRootOfTwentyThree 的方法对我不起作用。这是我的解决方案。

```
BIO* bio = BIO_new(BIO_s_mem());
int len = BIO_write(bio, pem_key_buffer, pem_key_buffer_len);
EVP_PKEY* evp_key = PEM_read_bio_PUBKEY(bio, NULL, NULL, NULL);
RSA* rsa = EVP_PKEY_get1_RSA(evp_key); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-04T07:57:26.920

这是完整的示例，展示了嵌入式密钥，以及如何使用 C++11 唯一指针来管理 OpenSSL 资源。

更新：根据光谱的[评论](https://stackoverflow.com/users/3212865/spectras)。不再使用专业化`default_delete<T>.`

```
/* compile with:

    c++ -Wall -pedantic  -std=c++17 main.cc  -lssl -lcrypto -o main
*/

#include <memory>
#include <iostream>

#include <openssl/err.h>
#include <openssl/pem.h>

#include <assert.h>
#include <string.h>

/* Custom deletors for use with unique_ptr */

struct EVP_PKEY_deleter {
  void operator()(EVP_PKEY* p) const {
      if (p)
        EVP_PKEY_free(p);
  }
};

struct BIO_deleter {
  void operator()(BIO* p) const {
      if (p)
        BIO_free(p);
  }
};

/* Smart pointers wrapping OpenSSL resources */

using evp_key_ptr = std::unique_ptr<EVP_PKEY, EVP_PKEY_deleter>;
using bio_ptr = std::unique_ptr<BIO, BIO_deleter>;

/* Create key based on memory contents */

evp_key_ptr load_public_key(const char* buf, size_t len)
{
  bio_ptr bp (BIO_new_mem_buf((void*) buf, len));
  if (!bp)
    throw std::runtime_error("BIO_new_mem_buf failed");

  EVP_PKEY * kp = nullptr;

  kp = PEM_read_bio_PUBKEY(bp.get(), &kp, nullptr, nullptr);
  ERR_print_errors_fp(stderr);
  return evp_key_ptr{kp};
}

int main()
{
  const char * RSA_PUBLIC_KEY=R"(
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA80ZqDPPW5eOH6TWdLsEJ
8qf6hoMJfFZ3BL9Fz+YNGeBpF3zxKmm8UuRrBHHVZZB2Gs1MTo06IU3fqDfFsOyh
J6pHeJF3wyUlYZuYbGAyMlZZ/+M5TOvo92f7lt/A40QThCVf1vS5o+V8sFkgnz3N
C7+VvC4dYrv+fwnmnWGxPy1qfp3orB+81S4OPRiaoy+cQBZs10KCQaNBI/Upzl2R
3dMkWKM+6yQViKTHavT4DRRZ1MKp9995qOR3XfhhJdWuDl4moXcU3RcX4kluvS5q
b8oTnVyd2QB1GkUw6OKLWB/5jN1V1WzeYK447x2h4aPmJfsn5gCFJs6deq2RFQBR
SQIDAQAB
-----END PUBLIC KEY-----
)";
  ERR_load_crypto_strings();
  ERR_free_strings();

  auto pubkey = load_public_key(RSA_PUBLIC_KEY, strlen(RSA_PUBLIC_KEY));
  if (pubkey)
    std::cout << "load_public_key success" << std::endl;
} 
```

# c# - 不能将重复值插入到唯一索引中（但是...）

> ID：11886267
> 
> 赞同：2
> 
> 时间：2012-08-09T14:59:35.693
> 
> 标签：c#, asp.net, .net, entity-framework, razor

我正在尝试将产品添加到购物车，但它返回以下内容：

更新条目时出错。有关详细信息，请参阅内部异常。

> 内部异常：System.Data.SqlServerCe.SqlCeException (0x80004005)：无法将重复值插入唯一索引。[表名 = Cart,Constraint name = PK_ *Cart* _0000000000000997] 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor) 在 System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr) 在 System.Data.SqlServerCe System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery() 的 System.Data.SqlServerCe.SqlCeMultiCommand.ExecuteNonQuery() 的 System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery() 的 .SqlCeCommand.ExecuteCommand(CommandBehavior 行为，字符串方法，ResultSetOptions 选项) System.Data.Mapping.Update.Internal.DynamicUpdateCommand .Execute(UpdateTranslator 翻译器，EntityConnection 连接，字典`2 identifierValues, List`1 generateValues) 在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器)
> 
> System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache) 的 System.Data.Objects.ObjectContext.SaveChanges 的 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器) 的堆栈跟踪(SaveOptions 选项) 在 System.Data.Objects.ObjectContext.SaveChanges() 在 JTS.Security.Identity.Push.ToCart(Int32 userId, String partNumber, String productDescription, Int32 quantity, Decimal price, Decimal lineTotal, String orderId, DateTime dateTime, Boolean isBoxed ) 在 c:\Users\Jase\Documents\Visual Studio 2012\WebSites\One\App_Code\JTS.cs:line 251

但问题是，我没有任何唯一索引。我什至尝试删除所有主键（只是为了看看这是否会改变任何东西） - 它没有。

编码：

```
public bool ToCart(int userId,
                    string partNumber,
                    string productDescription,
                    int quantity,
                    decimal price,
                    decimal lineTotal,
                    string orderId,
                    DateTime dateTime,
                    bool isBoxed)
                {
                    bool addedToCart = false;

                    try
                    {
                        Cart cart = new Cart()
                        {
                            UserId = userId,
                            PartNumber = partNumber,
                            Description = productDescription,
                            Quantity = quantity,
                            Price = price,
                            LineTotal = lineTotal,
                            OrderId = orderId,
                            OrderDate = dateTime,
                            IsBoxed = isBoxed
                        };

                        database.AddToCarts(cart);
                        database.SaveChanges();

                        addedToCart = true;
                    }
                    catch (Exception exception)
                    {
                        addedToCart = false;
                        //Response(exception.Message);
                        addToCartExceptionDetails = exception.Message +
                            Environment.NewLine + Environment.NewLine + "Inner exception" +
                            exception.InnerException +
                            Environment.NewLine + Environment.NewLine + "Stack trace" +
                            exception.StackTrace;
                    }

                    return addedToCart;
                } 
```

此外，如果我创建一个新订单（创建一个新的 OrderID），它将向购物车添加一个项目。但是，它永远不会在现有 OrderId 下向购物车添加超过 1 件商品！

我究竟做错了什么？为什么这不起作用？

表定义

* * *

```
Column Name   Data Type   Length   Allow Nulls     Unique    Primary Key
UserId        int         4        Yes             No        No
OrderId       nvarchar    1000     No              No        Yes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:37:30.737

如果您有一个删除并重新添加内容的表，则在插入 ID 等于现有 ID 的新行时可能会出现此错误为什么不检查此[链接](https://stackoverflow.com/questions/6284045/a-duplicate-value-cannot-be-inserted-into-a-unique-index)表单更多信息

# powershell - 通过 PowerShell 自动上传 SSL FTP

> ID：11886268
> 
> 赞同：4
> 
> 时间：2012-08-09T14:59:35.767
> 
> 标签：powershell, ssl, webclient, ftpwebrequest

我已经搜索并阅读了很多关于在 PowerShell 中下载*SSL FTP*文件的信息……但是如何上传它们呢？我有一个需要每天上传的文件名，但我收到了我未登录的错误。我目前正在上传到其他 FTP 站点，如下所示：

```
$Filename = "myfile.txt"
$FullPath = "\\server\share\$Filename"
$ftp = "ftp://user:pass@ftp.domain.com/$Filename"
$ftpWebClient = New-Object System.Net.WebClient
$ULuri= New-Object System.URI($ftp)
$ftpWebClient.UploadFile($ULuri, $FullPath) 
```

*我是否需要为SSL FTP*上传创建一个全新的代码块，还是只需要对该代码进行细微调整？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:06:15.037

我使用 WinSCP DLL 来做这些事情。在此处查看一些示例： [http ://winscp.net/eng/docs/library#powershell](http://winscp.net/eng/docs/library#powershell)

这是我的一些示例代码。

```
[Reflection.Assembly]::LoadFrom("D:\WinSCP.dll") | Out-Null
$sessionOptions = New-Object WinSCP.SessionOptions
$sessionOptions.Protocol = [WinSCP.Protocol]::Sftp
$sessionOptions.HostName = "192.168.1.120"
$sessionOptions.UserName = "user"
$sessionOptions.Password = "pass"
$session = New-Object WinSCP.Session
$session.Open($sessionOptions)

#upload stuff here, check the link for detail on how, and use powershell to populate your file list!

$session.Dispose() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-14T21:18:02.873

由于您已经在脚本中使用 .NET 框架中的 WebClient 类，我建议您通过在 PowerShell 中嵌入 C# 代码，从支持 FTP over TLS 的 WebClient 创建一个派生版本：

```
$typeDefinition = @"
using System;
using System.Net;
public class FtpClient : WebClient
{
    protected override WebRequest GetWebRequest(Uri address)
    {
        FtpWebRequest ftpWebRequest = base.GetWebRequest(address) as FtpWebRequest;
        ftpWebRequest.EnableSsl = true;
        return ftpWebRequest;
    }
}
"@

Add-Type -TypeDefinition $typeDefinition
$ftpClient = New-Object FtpClient
$ftpClient.UploadFile("ftp://your-ftp-server/yourfile.name", "C:\YourLocalFile.name") 
```

# actionscript-3 - As3 光标根据鼠标的 x 坐标旋转

> ID：11886270
> 
> 赞同：0
> 
> 时间：2012-08-09T14:59:42.533
> 
> 标签：actionscript-3, mouse-cursor

您可以在下面找到我的意思。当我转到不同的 X 位置时，我需要我的影片剪辑旋转。

[http://www2.mediamind.com/creative_zone/movistar_agua_wallpaper_msn/index.html](http://www2.mediamind.com/creative_zone/movistar_agua_wallpaper_msn/index.html)

根据 X 位置函数旋转对我来说就足够了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:38:25.753

请参考以下站点教程： [mouse-follow-with-easing-smooth-rotation-v2](http://www.freeactionscript.com/2011/01/mouse-follow-with-easing-smooth-rotation-v2/)

# c# - EF 4.3 与最小导航属性的一对多关系

> ID：11886271
> 
> 赞同：1
> 
> 时间：2012-08-09T14:59:43.727
> 
> 标签：c#, entity-framework-4

我有以下情况：

```
public class Person
{
    public string Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public ICollection<PhoneNumber> PhoneNumbers { get; set; }
}

public class PhoneNumber
{
    public int Id { get; set; }
    public string Number { get; set; }
    public string Type { get; set; }
} 
```

哪个应该与数据库中的模式匹配，如下所示：

```
CREATE TABLE [dbo].[Contacts]
(
    [ContactId]         NVARCHAR(50)    NOT NULL,
    [FirstName]         NVARCHAR(150)   NOT NULL,
    [LastName]          NVARCHAR(150)   NOT NULL
)

CREATE TABLE [dbo].[PhoneNumbers]
(
    [PhoneNumberId]     INT IDENTITY(1,1)   NOT NULL,
    [ContactId]         NVARCHAR(50)        NOT NULL,
    [PhoneNumber]       NVARCHAR(20)        NOT NULL,
    [Type]              NVARCHAR(1000)      NOT NULL
) 
```

我也有两个实现 EntityTypeConfiguration 的类。

```
public class PhoneNumberConfiguration : EntityTypeConfiguration<PhoneNumber>
{
    public PhoneNumberConfiguration()
    {
        ToTable(TableName);

        Property(e => e.Id).HasColumnName("PhoneNumberId");
        Property(e => e.Value).HasColumnName("PhoneNumber");
        Property(e => e.PhoneType).HasColumnName("Type");
    }
}

public class ContactConfiguration : EntityTypeConfiguration<Person>
{
    public ContactConfiguration()
    {
        ToTable("Contacts");

        Property(contact => contact.Id)
            .HasColumnName("ContactId");
    }
} 
```

由此，我可以使用 EF 4.3 的 fluent API 来指定电话号码和人员之间的外键位于存储在名为 ContactId 的字段中的电话号码表中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:10:20.120

是的，这是可能的。在`ContactConfiguration`构造函数中添加映射：

```
HasMany(contact => contact.PhoneNumbers)
    .WithRequired()
    .Map(map => map.MapKey("ContactId")); 
```

# jquery - 用jquery验证单选按钮？

> ID：11886274
> 
> 赞同：2
> 
> 时间：2012-08-09T14:59:55.390
> 
> 标签：jquery, forms

如何使用 jQuery 验证这两个单选按钮？应检查一个按钮：

```
<input type="radio" name="muuttuminen" value="Kylla" /> Kyllä
<input type="radio" name="muuttuminen" value="Ei"/>Ei 
```

我知道如何验证常规文本输入字段，但我想知道这个。

```
 $(function() {
        $("#submit").click(function(){
 //validation part
          var dataString = $('#service-test').serialize();
          //alert (dataString);return false;
         $.ajax({
        type: "POST",
        url: "../quiz.php",
        data: dataString,
        dataType: "text",
        error: function(){ alert ('Nyt jotakin meni kyllä pahemman kerran pieleen. Yritä uudelleen?');
     },
        success: 
        function(data) {
     $("#resultcontainer").html(data);
     $("#service-test").hide();

       }

      });
      return false;

        });
      }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:04:21.263

您可以使用`:checked`选择器和`length`属性：

```
 $(".submit").click(function() {
       if ($('input[name="muuttuminen"]:checked').length == 0) {
         alert('please...');
         return false; } 
          else {
          $.ajax({
           //...
         })
       }
       return false;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:03:15.263

你可以像下面给出的那样做。

**[现场演示](http://jsfiddle.net/rajaadil/tCXgg/3/)**

```
$(function() {
    $("#submit").click(function() {     
      if($('input[type=radio][name=muuttuminen]:checked').length == 0)
      {
         alert("Please select atleast one");
         return false;
      }
      else
      {
          alert("radio button selected value: ");
      }      
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:11:18.473

你可以这样做，[jsFiddle示例](http://jsfiddle.net/QKHwn/1/)：

```
$(function() {
    $("input[type=submit]").click(function() {
        var atLeastOneChecked = false;

        $("input[type=radio]").each(function() {
            if ($(this).attr("checked") == "checked") {
                atLeastOneChecked = true;
            }
        });

        if (!atLeastOneChecked) {
            $("#checked").text("Check one");
        } else {
            $("#checked").text("One is checked");
        }
    });
});​ 
```

这是一个通用示例，它将检查页面上的所有单选按钮，您可能不希望这样做，因此可能值得将您的单选按钮放在一个组中并以这种方式检查该组：

```
$("#inputgroup").find("input[type=radio]").each(function() {
    // do the validation here
}); 
```

检查这两个特定按钮的代码是：

```
$("input[type=radio][name=muuttuminen]").each(function() {
    // do the validation here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:04:04.863

您的代码非常不完整，但类似于

```
var valid = false;

$('#yourForm').find(':input:radio').each(function(){
    if($(this).prop('checked'))
        valid = true;
});

if(!valid)
    return false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:06:46.893

您可以使用[选中的伪类](http://reference.sitepoint.com/css/pseudoclass-checked)。这是您可能用于表单提交的小提琴。 [http://jsfiddle.net/WhPcj/](http://jsfiddle.net/WhPcj/)

# java - 使用 Geotools 从数据库中获取多点

> ID：11886275
> 
> 赞同：1
> 
> 时间：2012-08-09T14:59:57.043
> 
> 标签：java, postgis, geotools

我只想知道如何`Multipoint`从 PostGIS 数据库创建一个实例。

我进行查询，然后得到一个`ResultSet`命名的`area`. 具有`MultiPolygon`属性的列名为`geom`，因此我执行以下操作：

```
MultiPolygon m = (MultiPolygon)area.getObject("geom"); 
```

强制施法虽然不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:45:39.643

您不应该直接引用 ResultSet，而应该通过为您处理转换的数据存储接口工作。有关搜索数据集和检索几何的示例，请参阅[查询教程。](http://docs.geotools.org/stable/tutorials/filter/query.html)

你需要类似的东西：

```
 SimpleFeatureSource source = dataStore.getFeatureSource(typeName);

    FeatureType schema = source.getSchema();
    String name = schema.getGeometryDescriptor().getLocalName();

    Filter filter = CQL.toFilter(text.getText());

    Query query = new Query(typeName, filter, new String[] { name });

    SimpleFeatureCollection features = source.getFeatures(query); 
```

# php - 查询以获取列的差异

> ID：11886276
> 
> 赞同：1
> 
> 时间：2012-08-09T14:59:57.450
> 
> 标签：php, mysql, join

我有两个表，主键为“poll_id”，每个表中的列名为“object_id”。我无法从 t1 中获取 t2 中不存在且带有 poll_id （主键）的对象。

```
 T1                           T2

poll_id|object_id            poll_id|object_id
1      | 2                    1     |  2
1      | 3                          | 
```

我需要得到`[poll_id]=>1,[object_id]=>3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:02:30.120

尝试

```
select t1.* from t1 
left join t2 on t1.poll_id = t2.poll_id and t1.object_id = t2.object_id
where t2.object_id is null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:07:33.337

使用**不存在**

```
SELECT poll_id, object_id
FROM t1
WHERE NOT EXISTS
      ( SELECT *
        FROM t2
        WHERE t2.poll_id = t1.poll_id
          AND t2.object_id = t1.object_id
      ) 
  AND poll_id = 1 ;                        -- additional requirement 
```

使用**LEFT JOIN / IS NULL**

```
SELECT t1.poll_id, t1.object_id
FROM t1
  LEFT JOIN t2
    ON  t2.poll_id = t1.poll_id
    AND t2.object_id = t1.object_id
WHERE t2.object_id IS NULL 
  AND t1.poll_id = 1 ;                        -- additional requirement 
```

使用**NOT IN**：

```
SELECT poll_id, object_id
FROM t1
WHERE (poll_id, object_id) NOT IN
      ( SELECT poll_id, object_id
        FROM t2
      ) 
  AND poll_id = 1 ;                        -- additional requirement 
```

# lua - Lua-迭代嵌套表

> ID：11886277
> 
> 赞同：3
> 
> 时间：2012-08-09T15:00:01.027
> 
> 标签：lua

我已经学习 Lua 几个星期了，这是我一次又一次的症结所在。我试图阅读有关该主题的帖子和书籍。

我使用 Lua 查询软件监控系统 (Nimsoft)，我的数据以表的形式返回给我。

我不会发布整个输出，但这里有一个我认为将描述结构的片段：

表参考是“h_resp”

```
root:
      domain:nevil-nmsdom
      robotlist:
        1:
          ssl_mode:0
          os_user2:
          origin:nevil-nmshub
          os_major:UNIX
          ip:192.168.1.58
          os_minor:Linux
          addr:/nevil-nmsdom/nevil-nmshub/nevil-multibot_03
          status:0
          license:1
          last_inst_change:1340754931
          created:1341306789
          offline:0
          last_change:1341306869
          lastupdate:1344522976
          autoremove:0
          os_user1:
          flags:1
          os_description:Linux 2.6.32-5-amd64 #1 SMP Mon Jan 16 16:22:28 UTC 2012 x86_64
          name:nevil-multibot_03
          metric_id:M64FB142FE77606C2E924DD91FFCC3BB4
          device_id:DDFF83AB8CD8BC99B88221524F9320D22
          heartbeat:900
          port:48100
          version:5.52 Dec 29 2011
        2: etc...etc.... 
```

我使用我在这个论坛上找到的 tdump 函数来实现这一点。

```
for k,v in pairs(h_resp) do
print(k.."    ",v)
end 
```

给我最高水平，我明白这一点。

```
domain    nevil-nmsdom
robotlist    table:0x22136a0 
```

然后我尝试获取“机器人列表”

```
for k,v in pairs(h_resp.robotlist) do
print(k.."    ",v)
end 
```

正如您在下面看到的那样，索引是整数，并且是另一个表。

```
 1    table:0x237e530
  0    table:0x22112a0
  3    table:0x2211460
  2    table:0x2392ee0
  5    table:0x2213e80
  4    table:0x22130e0
  7    table:0x2283b80
  6    table:0x2283ff0
  8    table:0x22a71e0 
```

我还知道我可以使用以下方法解决这些“嵌套”表之一：

```
for k,v in pairs(h_resp.robotlist["0"]) do
print(k.."    ",v)
end

  ssl_mode    0
  os_user2    
  origin    network
  os_major    UNIX
  ip    192.168.1.31
  os_minor    Linux
  addr    /nevil-nmsdom/nevil-nmshub/nevil-mysql
  status    0
  ...etc...etc... 
```

就我而言，我无法弄清楚如何让 Lua 遍历存储在 robotlist 中的所有表。

其次，我为冗长的电子邮件道歉，但我仍在努力学习/理解这一点……我以前没有编程/脚本编写经验。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:14:03.797

如果要打印表格列表，然后打印每个表格的内部，然后再打印一次（很像 inception），最简单的方法是使用**递归**。

您将需要检查您正在查看的表格的当前元素的类型：

```
function DeepPrint (e)
    -- if e is a table, we should iterate over its elements
    if type(e) == "table" then
        for k,v in pairs(e) do -- for every element in the table
            print(k)
            DeepPrint(v)       -- recursively repeat the same procedure
        end
    else -- if not, we can just print it
        print(e)
    end
end 
```

你应该看看 Lua 手册，那里解释了一切。//编辑：我应该更清楚；手册中有一节包含与上述非常相似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T00:34:36.203

@Bartek Banachewicz 的回答对我帮助很大。但是，我确实必须更改代码的顺序才能使其正常工作。我的代码显然与下面不同，但使用与上面相同的想法对我有用。

注意我需要在迭代块内移动 if-else 块并检查类型 v。

```
function DeepPrint (e)
-- if e is a table, we should iterate over its elements
    for k,v in pairs(e) do -- for every element in the table
        if type(v) == "table" then
          print(k)
          DeepPrint(v)       -- recursively repeat the same procedure
        else -- if not, we can just print it
          //EDIT: print(v .. k)
        end
    end
end 
```

谢谢你的指导

# java - 尝试实现 GPS 定位器时出现 RunTimeException

> ID：11886278
> 
> 赞同：0
> 
> 时间：2012-08-09T15:00:03.080
> 
> 标签：java, android, gps

我正在为我的应用程序添加 GPS 定位服务。但是我收到了这个错误，我似乎无法修复。我已经包含了我所有的相关编码。如果有人对我的任何与错误无关的编码有意见，我也会很感激。

日志猫

```
 08-09 11:19:24.602: E/AndroidRuntime(715): FATAL EXCEPTION: main
08-09 11:19:24.602: E/AndroidRuntime(715): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.com.proto1/com.example.com.proto1.menu}: android.view.InflateException: Binary XML file line #77: Error inflating class com.google.android.maps.MapView
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.os.Looper.loop(Looper.java:137)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-09 11:19:24.602: E/AndroidRuntime(715):  at java.lang.reflect.Method.invokeNative(Native Method)
08-09 11:19:24.602: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:511)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-09 11:19:24.602: E/AndroidRuntime(715):  at dalvik.system.NativeStart.main(Native Method)
08-09 11:19:24.602: E/AndroidRuntime(715): Caused by: android.view.InflateException: Binary XML file line #77: Error inflating class com.google.android.maps.MapView
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.Activity.setContentView(Activity.java:1867)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.example.com.proto1.menu.onCreate(menu.java:62)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.Activity.performCreate(Activity.java:5008)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-09 11:19:24.602: E/AndroidRuntime(715):  ... 11 more
08-09 11:19:24.602: E/AndroidRuntime(715): Caused by: java.lang.reflect.InvocationTargetException
08-09 11:19:24.602: E/AndroidRuntime(715):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-09 11:19:24.602: E/AndroidRuntime(715):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-09 11:19:24.602: E/AndroidRuntime(715):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
08-09 11:19:24.602: E/AndroidRuntime(715):  ... 22 more
08-09 11:19:24.602: E/AndroidRuntime(715): Caused by: java.lang.IllegalArgumentException: MapViews can only be created inside instances of MapActivity.
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.google.android.maps.MapView.<init>(MapView.java:291)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.google.android.maps.MapView.<init>(MapView.java:264)
08-09 11:19:24.602: E/AndroidRuntime(715):  at com.google.android.maps.MapView.<init>(MapView.java:247)
08-09 11:19:24.602: E/AndroidRuntime(715):  ... 25 more 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.com.proto1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/theeye"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".mainj"
            android:label="@string/title_activity_mainj" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Infoactive"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.INFOSCREEN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VoicePrompts"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VOICEPROMPTS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VPon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VPON" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VPoff"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VPOFF" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <!-- android name must match the name of the java you want to use -->
        <activity
            android:name=".VoiceRecognition"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.RECOGNITIONMENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Recognition"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="ACTION_RECOGNIZE_SPEECH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SpeakingAndroid"
            android:label="tts" >
            <intent-filter>
                <action android:name="android.intent.action.SPEAK" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MyGPSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="GPS_LOCATION" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <library
            name="com.google.android.maps"
            file="/system/framework/com.google.android.maps.jar" />

        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

主要 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <ListView
        android:id="@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="5dp" >
    </ListView>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:gravity="bottom"
        android:orientation="horizontal"
        android:weightSum="100" >

        <Button
            android:id="@+id/aboutbutton"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="center"
            android:text="@string/a"
            android:textSize="25dp" />

        <Button
            android:id="@+id/talk"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="center"
            android:text="talk"
            android:textSize="25dp" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="horizontal"
        android:weightSum="100" >

        <Button
            android:id="@+id/voicebutton"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="center"
            android:text="@string/starttalking"
            android:textSize="25dp" />

        <Button
            android:id="@+id/btn_speak"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="center"
            android:text="@string/start"
            android:textSize="25dp" />
    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/myGMap"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="API_Key_String"
        android:clickable="true"
        android:enabled="true" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

菜单（主）Java

```
package com.example.com.proto1;

import android.app.Activity;
import android.content.Intent;
import android.location.Location;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.speech.tts.TextToSpeech;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import com.example.com.proto1.MyGPSActivity.LocationResult;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

@SuppressWarnings("unused")
public class menu extends Activity implements TextToSpeech.OnInitListener,
        OnClickListener {

    LocationResult locationResult = new LocationResult() {
        @Override
        public void gotLocation(Location location) {
            // Got the location!
        }
    };
    MyGPSActivity myLocation = new MyGPSActivity();

    // defined
    TextToSpeech mTts;
    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    // remember to include a listview on the xml or the voice recognition code
    // will not work
    public ListView mList;
    // TTS object
    Button speakButton, infoButton, voiceButton, talkButton;

    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    @Override
    protected void onCreate(Bundle aboutmenu) {
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        SpeakingAndroid speak = new SpeakingAndroid();

        VoiceRecognition voiceinput = new VoiceRecognition();

        // get a reference to the button element listed in the XML layout
        speakButton = (Button) findViewById(R.id.btn_speak);
        infoButton = (Button) findViewById(R.id.aboutbutton);
        voiceButton = (Button) findViewById(R.id.voicebutton);
        talkButton = (Button) findViewById(R.id.talk);

        // listen for clicks
        infoButton.setOnClickListener(this);
        speakButton.setOnClickListener(this);
        talkButton.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        // calling method
        voiceinputbuttons();

        // Check to see if a recognition activity is present
        // if running on AVD virtual device it will give this message. The mic
        // required only works on an actual android device//
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            voiceButton.setOnClickListener(this);
        } else {
            voiceButton.setEnabled(false);
            voiceButton.setText("Recognizer not present");
        }

    }

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation

        // returns a fail statement if speech doesn't work
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    public void informationmenu() {
        speakWords("information screen");
        startActivity(new Intent("android.intent.action.INFOSCREEN"));
    }

    public void voicemenu() {
        speakWords("voice recognition menu");
        startActivity(new Intent("android.intent.action.RECOGNITIONMENU"));
    }

    public void mainmenu() {
        speakWords("main menu");
        startActivity(new Intent("android.intent.action.MENU"));
    }

    // creating method
    public void voiceinputbuttons() {
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    }

    // respond to button clicks
    public void onClick(View v) {
        switch (v.getId()) {

        // use switch case so each button does a different thing
        // accurately(similar to an if statement)
        case R.id.btn_speak:
            String words1 = speakButton.getText().toString();

            // speakwords(xxxx); is the piece of code that actually calls the
            // text to speech
            speakWords(words1);
            myLocation.getLocation(this, locationResult);

            break;
        case R.id.aboutbutton:
            String words2 = infoButton.getText().toString();
            speakWords(words2);
            Intent infoIntent = new Intent("android.intent.action.INFOSCREEN");
            startActivity(infoIntent);
            break;
        case R.id.voicebutton:
            speakWords("Speak Now");
            startVoiceRecognitionActivity(); // call for voice recognition
                                                // activity
            break;
        case R.id.talk:
            speakWords("This is the main menu.");
            break;
        }
    }

    // speak the user text
    // setting up the speakWords code
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
            // matches is the result of voice input. It is a list of what the
            // user possibly said.
            // Using an if statement for the keyword you want to use allows the
            // use of any activity if keywords match
            // it is possible to set up multiple keywords to use the same
            // activity so more than one word will allow the user
            // to use the activity (makes it so the user doesn't have to
            // memorize words from a list)
            // to use an activity from the voice input information simply use
            // the following format;
            // if (matches.contains("keyword here") { startActivity(new
            // == Intent("name.of.manifest.ACTIVITY")

            if (matches.contains("information")) {
                informationmenu();
            }
            if (matches.contains("info screen")) {
                informationmenu();
            }
            if (matches.contains("info")) {
                informationmenu();
            }
            if (matches.contains("about")) {
                informationmenu();
            }

            if (matches.contains("home")) {
                mainmenu();
            }
            if (matches.contains("menu")) {
                mainmenu();
            }
            if (matches.contains("home screen")) {
                mainmenu();
            }
            if (matches.contains("speak")) {
                startActivity(new Intent("android.intent.action.SPEAK"));
            }
            if (matches.contains("close")) {
                finish();
            }
            if (matches.contains("stop")) {
                finish();
            }
            if (matches.contains("finish")) {
                finish();
            }
            if (matches.contains("voice")) {
                voicemenu();
            }
            if (matches.contains("recognition")) {
                voicemenu();
            }
            if (matches.contains("voice recognition")) {
                voicemenu();
            }

        }

        // still in the onActivityResult: This is for the text to speech part

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        super.onActivityResult(requestCode, resultCode, data);

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        myTTS.shutdown();
    }

} 
```

GPS 爪哇

```
package com.example.com.proto1;

import java.util.Timer;
import java.util.TimerTask;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class MyGPSActivity {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled = false;
    boolean network_enabled = false;

    public boolean getLocation(Context context, LocationResult result) {
        // I use LocationResult callback class to pass location value from
        // MyLocation to user code.
        locationResult = result;
        if (lm == null)
            lm = (LocationManager) context
                    .getSystemService(Context.LOCATION_SERVICE);

        // exceptions will be thrown if provider is not permitted.
        try {
            gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        } catch (Exception ex) {
        }
        try {
            network_enabled = lm
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        } catch (Exception ex) {
        }

        // don't start listeners if no provider is enabled
        if (!gps_enabled && !network_enabled)
            return false;

        if (gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                    locationListenerGps);
        if (network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                    locationListenerNetwork);
        timer1 = new Timer();
        timer1.schedule(new GetLastLocation(), 20000);
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
            lm.removeUpdates(locationListenerGps);
            lm.removeUpdates(locationListenerNetwork);

            Location net_loc = null, gps_loc = null;
            if (gps_enabled)
                gps_loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (network_enabled)
                net_loc = lm
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

            // if there are both values use the latest one
            if (gps_loc != null && net_loc != null) {
                if (gps_loc.getTime() > net_loc.getTime())
                    locationResult.gotLocation(gps_loc);
                else
                    locationResult.gotLocation(net_loc);
                return;
            }

            if (gps_loc != null) {
                locationResult.gotLocation(gps_loc);
                return;
            }
            if (net_loc != null) {
                locationResult.gotLocation(net_loc);
                return;
            }
            locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult {
        public abstract void gotLocation(Location location);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:13:13.460

将以下行放入 AndroidManifest.xml 文件的 application 元素中。

```
<uses-library android:name="com.google.android.maps" /> 
```

# vba - UsedRange.Count 计数错误

> ID：11886284
> 
> 赞同：6
> 
> 时间：2012-08-09T15:00:18.103
> 
> 标签：vba, excel

**摘要：**我从一张表中取出一行数据并将其粘贴到另一张表中，但是该表将是一种日常使用的东西，新数据只是在旧数据下方输入。

**问题：**每次新运行时，都会将 7 添加到`UsedRange.Count`. 例如：一次运行`UsedRange.Count`将是 7；下次我运行该函数时，计数将为 14。

**我在寻找什么：**为什么会这样，有没有办法帮助`UsedRange`更准确

- 为了参考，我已经包含了整个函数。

```
Function eftGrabber()

        Dim usedRows As Integer
        Dim i As Integer

        ChDir "\\..."       

        Workbooks.Open Filename:= _
        "\\...\eftGrabber.xlsm"

        usedRows = Sheets("EFT").UsedRange.Count

        Windows("Data").Activate

        Sheets("DataSheet").Range("A11").EntireRow.Copy

        Windows("eftGrabber").Activate

        Sheets("EFT").Range("A" & usedRows + 1).Select

        ActiveSheet.Paste

        i = usedRows

        Do                            'THIS LOOP DELETES BLANKS AFTER POSTING NEW LINES

            Range("A" & i).Select

            If Range("A" & i) = "" Then

                ActiveCell.EntireRow.Delete

            End If

              i = i - 1

        Loop Until i = 1

        Windows("eftGrabber").Activate

        ActiveWorkbook.Save

  Windows("eftGrabber").Close

End Function 
```

如果我遗漏了任何重要的细节，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T15:08:48.497

改变：`usedRows = Sheets("EFT").UsedRange.Count`

至：`usedRows = Sheets("EFT").Range("A" & Sheets("EFT").Rows.Count).End(xlUp).Row`

其中“A”可以更改为您希望计算总列数的任何行。

使用是有危险的，`UsedRange`因为它会考虑这样的事情和没有数据的格式化单元格以及其他可能会给你带来意想不到的结果的事情，比如如果你期望你的数据从 Range("A1") 开始，但它确实开始于另一个范围！

但是，我会说，如果您真的想使用`UsedRange`，您上面的代码仍然无法获取行。改用它`UsedRange.Rows.Count`或获取 UsedRange 的最后一个绝对单元格，使用`UsedRange.SpecialCells(xlCellTypeLastCell).Row`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-29T08:28:10.100

这两条线很神奇

```
 usedCol = ThisWorkbook.ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Column
  usedRow = ThisWorkbook.ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Row 
```

欲了解更多信息，请访问 Microsoft 网站

[http://msdn.microsoft.com/en-us/library/office/ff196157.aspx](http://msdn.microsoft.com/en-us/library/office/ff196157.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-25T20:21:31.987

谢谢讨论...

`.UsedRange.Rows.Count``.UsedRange.Columns.Count`只要单元格A1中有东西，就可以正常工作。否则需要使用 SpecialCells 解决方案。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T00:21:46.967

如果你像这样使用“UsedRange”，它就可以工作>>

```
x := Sheet.UsedRange.Row + Sheet.UsedRange.Rows.Count - 1;
y := Sheet.UsedRange.Column + Sheet.UsedRange.Columns.Count - 1; 
```

SpecialCells 的问题是您不能在受保护的工作表上使用它。

# c++ - 检查 C++11 库功能

> ID：11886288
> 
> 赞同：9
> 
> 时间：2012-08-09T15:00:36.130
> 
> 标签：c++, visual-c++, c++11, libstdc++, libc++

**检查标准库**的特定 C++11 功能是否存在的好方法是什么。

对于编译器功能，我只是顺便检查了（恕我直言）主要编译器（目前*VC++*、*gcc*、*clang*，也许是*Intel*）的编译器版本虽然这不是最好和最灵活的方法，但我不知道任何更好的东西，除了具有非常好的宏的*clang 。*`__has_feature`

但对于与编译器没有那么严格耦合的库特性来说，情况就更糟了。目前，我想使用相同的方法检查*VC++*的编译器版本（假设它使用自己的库，这很容易）。对于*clang*，我至少可以`__has_include`用于大规模的基于标头的查询。除此之外，我想检查`__GLIBCXX__`'s value if defined 可能是一个好主意，但是我又找不到任何关于特定*libstdc++*版本引入了哪些功能的信息，除了当前版本支持的内容。

这些方法应该保留给预处理器检查等，因为我想在没有任何复杂配置过程并且不使用任何第三方库（是的，*boost*是第三方的）的仅头文件库中使用它。

1.  那么在那些（非常狭窄的）条件下，我检查特定 C++11 库功能的可能性是什么。甚至可能在声明的特定函数或类型的规模上？

2.  **如果检查编译器或库版本仍然是最好的方法，我在哪里可以找到有关特定**版本的*libstdc++*（可能还有其他重要的，可能是*libc++* ）支持的特定 C++11 功能的详细信息？

FWIW 目前我对`<cstdint>`C++11`<cmath>`函数和感兴趣`std::hash`，但这可能会改变，并且对于一般方法可能并不重要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:07:04.613

除了知道哪个编译器在哪个版本中实现了什么并且有适当的定义之外，您在这里真的没有什么好做的。

gcc 有一个用于库功能的[特殊表。](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)主要问题`__has_include`当然是对旧版标准的补充。`libstdc++`也有必要的包含，但这并不意味着启用这些文件的内容的必要定义。它也不会告诉你任何关于可用实现的实际数量（有时是不完整的）。

由于您有一个仅包含标头的库，因此这不适用于您，但仍然很重要：C++11 和 C++03 之间的二进制不兼容可能会卷土重来。

我真的不会自己解决任何问题，而是使用[Boost.Config](http://www.boost.org/doc/libs/1_50_0/libs/config/doc/html/index.html)。最初它只描述语言特性，但现在已扩展到标准库头文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T20:02:39.533

您*可以*编写 autoconf 宏来检查，如果这样做，请将它们提交到[http://www.gnu.org/software/autoconf-archive/](http://www.gnu.org/software/autoconf-archive/)
迄今为止唯一相关的是检查完整覆盖范围，而不是单个功能：[http： //www.gnu.org/software/autoconf-archive/ax_cxx_header_stdcxx_0x.html#ax_cxx_header_stdcxx_0x](http://www.gnu.org/software/autoconf-archive/ax_cxx_header_stdcxx_0x.html#ax_cxx_header_stdcxx_0x) 但这不符合没有复杂配置检查的要求。

> 除此之外，我猜`__GLIBCXX__`如果定义了检查的值可能是个好主意，

查看 的值`__GLIBCXX__`是没有用的，[它包含版本发布的日期，](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/libstdc++/manual/manual/abi.html)这几乎不会告诉您有关版本的任何信息（例如，4.6.3 是在 4.7.0 之后发布的，因此具有较晚的日期，`__GLIBCXX__`但具有较少的 C++11 功能.) 将 libstdc++ 与 GCC 一起使用时，您希望在`__GLIBC__`和`__GLIBC_MINOR__`检查版本时使用通用 GCC 版本号（通常，您只能将给定版本的 libstdc++ 与它附带的 GCC 版本一起使用。）

**编辑：**从 GCC 7 开始，libstdc++ 头文件定义了一个新宏`_GLIBCXX_RELEASE`，它被定义为与 GCC 相同的值`__GNUC__`，但即使在非 GCC 编译器中使用 libstdc++ 头文件时仍然可用。

> 但话又说回来，除了当前版本支持的内容之外，我找不到任何关于哪些特定 libstdc++ 版本引入了哪些功能的信息。

以前版本的 libstdc++ C++11 状态表可在线获取所有 GCC 文档所在的位置：http: [//gcc.gnu.org/onlinedocs/](http://gcc.gnu.org/onlinedocs/)

对于 4.7，它位于[http://gcc.gnu.org/onlinedocs/gcc-4.7.1/libstdc++/manual/manual/status.html#status.iso.2011](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/libstdc++/manual/manual/status.html#status.iso.2011)，对于 4.6，它位于[http://gcc.gnu。 org/onlinedocs/gcc-4.6.3/libstdc++/manual/manual/status.html#status.iso.200x](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/manual/manual/status.html#status.iso.200x)和以前的版本都包含在源代码中（但无论如何，4.6 之前的版本中的覆盖范围相当不完整。）

每个版本的发行说明中都列出了一些新增功能，例如[http://gcc.gnu.org/gcc-4.7/changes.html](http://gcc.gnu.org/gcc-4.7/changes.html)（在 libstdc++ 部分）

**编辑：**对于 C++17 库支持，我们现在列出了哪个版本首先添加了该功能，因此您只需查看最新文档：[https ://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#状态.iso.201z](https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.201z)

> FWIW 目前我对`<cstdint>`C++11`<cmath>`函数和`std::hash`

它们应该存在于所有支持 C++0x/C++11 的 libstdc++ 版本中。

# ruby-on-rails - 好的做法是在 Rails 中向 db 添加持久数据吗？

> ID：11886289
> 
> 赞同：0
> 
> 时间：2012-08-09T15:00:36.957
> 
> 标签：ruby-on-rails, database

我是 Rails 新手，我正在尝试开发和部署我的第一个 ruby​​ 应用程序。在此过程中，我在数据库中创建了某些没有关联模型的表。例如，用户角色表。尽管使用模型并通过网络界面添加数据可能会更好，但这不是问题的主题，表格可能带有城市列表或其他一些数据。初始种群很清楚，这项工作是用“rake db:seed”完成的。但是，如果我需要向该表中添加更多数据怎么办？最佳做法是什么？当然，种子文件应该填充新数据。但是我已经有了这张表，其中包含生产中的数据。如何在那里添加这些新数据？我想到的唯一答案是使用纯 SQL。但这似乎不是“铁路方式”。谢谢你。

更新。作为自然的延续，不仅需要创建新的数据，还需要更新和删除已经存在的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:10:11.600

您可以让 seed.rb 仅在不存在时插入新记录。例如

```
cities = [
  { :name => 'New York'},
  { :name => 'Paris' },
  { :name => 'Tokyo' },
  { :name => 'Saigon' }]
cities.each do |city|
  City.create(city) unless City.exists?(:name => city[:name])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:17:32.223

或者

```
cities.each do |city|
  City.find_or_create_by_name(city[:name])
end 
```

这将触发查询以检查记录并且它不存在它将创建一个。使用时做同样的工作，除非但如前所述，我们将通过“Rails Way”。

# c# - 使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型

> ID：11886290
> 
> 赞同：108
> 
> 时间：2012-08-09T15:00:37.887
> 
> 标签：c#, .net, xml, xmlserializer

在使用 .NET 时，我遇到了一个非常奇怪的问题`XmlSerializer`。

采取以下示例类：

```
public class Order 
{
    public PaymentCollection Payments { get; set; }

    //everything else is serializable (including other collections of non-abstract types)
}

public class PaymentCollection : Collection<Payment>
{
}

public abstract class Payment 
{
    //abstract methods
}

public class BankPayment : Payment
{
    //method implementations
} 
```

AFAIK，有三种不同的方法可以解决`InvalidOperationException`由于序列化程序不知道`Payment`.

**1.添加`XmlInclude`到`Payment`类定义：**

这是不可能的，因为所有类都包含在我无法控制的外部引用中。

**`XmlSerializer`2\. 在创建实例时传递派生类型的类型**

不工作。

**3.定义`XmlAttributeOverrides`目标属性以覆盖属性的默认序列化（如[this SO post](https://stackoverflow.com/questions/2689566/how-to-add-xmlinclude-attribute-dynamically)中所述）**

也不起作用（`XmlAttributeOverrides`初始化如下）。

```
Type bankPayment = typeof(BankPayment);

XmlAttributes attributes = new XmlAttributes();
attributes.XmlElements.Add(new XmlElementAttribute(bankPayment.Name, bankPayment));

XmlAttributeOverrides overrides = new XmlAttributeOverrides();
overrides.Add(typeof(Order), "Payments", attributes); 
```

`XmlSerializer`然后将使用适当的构造函数。

注意：*不起作用*我的意思是`InvalidOperationException`(*`BankPayment`不是预期的...* ) 被抛出。

任何人都可以对这个主题有所了解吗？如何进一步解决问题？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-23T12:23:29.220

这对我有用：

```
[XmlInclude(typeof(BankPayment))]
[Serializable]
public abstract class Payment { }    

[Serializable]
public class BankPayment : Payment {} 

[Serializable]
public class Payments : List<Payment>{}

XmlSerializer serializer = new XmlSerializer(typeof(Payments), new Type[]{typeof(Payment)}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-09T17:09:41.123

刚刚解决了问题。在挖掘了一段时间后，我发现[这篇 SO 帖子](https://stackoverflow.com/questions/4616505/is-there-a-reason-why-a-base-class-decorated-with-xmlinclude-would-still-throw-a)涵盖了完全相同的情况。它让我走上了正轨。

基本上，**如果**派生类作为额外类型包含在内，则`XmlSerializer`需要知道默认命名空间。必须发生这种情况的确切原因仍然未知，但序列化现在仍在工作。

 *** * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-04T14:43:43.243

基于[此](https://social.msdn.microsoft.com/Forums/en-US/83181d16-a048-44e5-b675-a0e8ef82f5b7/why-do-i-have-to-xmlinclude-derived-classes-in-order-to-serialize?forum=asmxandxml)，我能够通过更改`XmlSerializer`我正在使用的构造函数而不是更改类来解决这个问题。

而不是使用这样的东西（在其他答案中建议）：

```
[XmlInclude(typeof(Derived))]
public class Base {}

public class Derived : Base {}

public void Serialize()
{
    TextWriter writer = new StreamWriter(SchedulePath);
    XmlSerializer xmlSerializer = new XmlSerializer(typeof(List<Derived>));
    xmlSerializer.Serialize(writer, data);
    writer.Close();
} 
```

我这样做了：

```
public class Base {}

public class Derived : Base {}

public void Serialize()
{
    TextWriter writer = new StreamWriter(SchedulePath);
    XmlSerializer xmlSerializer = new XmlSerializer(typeof(List<Derived>), new[] { typeof(Derived) });
    xmlSerializer.Serialize(writer, data);
    writer.Close();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-09T23:08:56.493

只需在 Base 中执行，这样任何孩子都可以被序列化，更少的代码更清晰的代码。

```
public abstract class XmlBaseClass  
{
  public virtual string Serialize()
  {
    this.SerializeValidation();

    XmlSerializerNamespaces XmlNamespaces = new XmlSerializerNamespaces(new[] { XmlQualifiedName.Empty });
    XmlWriterSettings XmlSettings = new XmlWriterSettings
    {
      Indent = true,
      OmitXmlDeclaration = true
    };

    StringWriter StringWriter = new StringWriter();

    XmlSerializer Serializer = new XmlSerializer(this.GetType());
    XmlWriter XmlWriter = XmlWriter.Create(StringWriter, XmlSettings);
    Serializer.Serialize(XmlWriter, this, XmlNamespaces);
    StringWriter.Flush();
    StringWriter.Close();

    return StringWriter.ToString();

  }

  protected virtual void SerializeValidation() {}
}

[XmlRoot(ElementName = "MyRoot", Namespace = "MyNamespace")]
public class XmlChildClass : XmlBaseClass
{
  protected override void SerializeValidation()
  {
    //Add custom validation logic here or anything else you need to do
  }
} 
```

这样，无论情况如何，您都可以在子类上调用 Serialize，并且仍然能够在对象序列化之前执行您需要做的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-17T20:48:10.420

我同意 bizl

```
[XmlInclude(typeof(ParentOfTheItem))]
[Serializable]
public abstract class WarningsType{ } 
```

此外，如果您需要将此包含的类应用于对象项，您可以这样做

```
[System.Xml.Serialization.XmlElementAttribute("Warnings", typeof(WarningsType))]
public object[] Items
{
    get
    {
        return this.itemsField;
    }
    set
    {
        this.itemsField = value;
    }
} 
```**

# mysql - 在 SQL 中引用代码值表

> ID：11886296
> 
> 赞同：1
> 
> 时间：2012-08-09T15:01:06.003
> 
> 标签：mysql, sql

我刚刚开始使用 MySQL 并且有一个快速的问题。我想创建一个包含字段“SEX”的表“My_Table”。我还想创建一个表“SEX_Values”，其中包含字段“CODE”和“VALUE”，0 = 男性，1 = 女性。所以它看起来像这样。

```
 My_Table            SEX_Values
  +--------+          +--------+--------+ 
  |  SEX   |          |  CODE  |  VALUE |
  +--------+          +--------+--------+
  |        |          |   0    |  male  |
  +--------+          +--------+--------+
                      |   1    | female |
                      +--------+--------+ 
```

我想以某种方式对 My_Table 中的 SEX 字段施加约束，以便插入/导入其中的数据必须与 SEX_Values 表中的代码之一匹配，如果不匹配，我想发出警告，某事像这样。

```
 My_Table             SEX_Values
  +--------+           +--------+--------+ 
  |  SEX   |<reference>|  CODE  |  VALUE |
  +--------+           +--------+--------+
  |   1    |  >OK      |   0    |  male  |
  +--------+           +--------+--------+
  |   0    |  >OK      |   1    | female |
  +--------+           +--------+--------+
  |   0    |  >OK
  +--------+
  |   3    |  >Throws Warning
  +--------+ 
```

任何帮助将不胜感激，因为我以前没有使用过 SQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:11:59.383

您所描述的内容称为[FOREIGN KEY](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)。

从本质上讲，它确保了引用完整性——换句话说，您不能插入被引用表中不存在的任何内容，也不能从被引用表中删除仍然存在于主表中的任何内容。

因此，在您的情况下，如果它仍然存在，则无法插入`Hermaphrodite`in `My_Table`，也无法从中`SEX_Values`删除in 。`male``SEX_Values``male``My_Table`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:10:50.017

```
CREATE TABLE SEX_Values
(
    `CODE` INT NOT NULL,
    `VALUES` VARCHAR(10),
    PRIMARY KEY (`CODE`)   -- !!
);

CREATE TABLE My_Table
(
    SEX INT,
    FOREIGN KEY (SEX) REFERENCES SEX_VALUES(`CODE`)   -- !!
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:09:45.503

为什么不使用[枚举类型](http://dev.mysql.com/doc/refman/5.0/en/enum.html)？

您可以使用创建表

```
CREATE TABLE my_table(
  sex enum("male", "female") NOT NULL
); 
```

这样你就可以像这样插入：

```
INSERT INTO my_table(`sex`) VALUES("male") 
```

您具有使用字符串的语法优势（我认为这比使用数字代码更清楚），MySQL 将优化数据库，就像您使用代码一样，它会执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:13:54.423

一个非常简单的解决方案是将`sex`列的数据类型设置为`bit`，它只接受 0、1 或空值（[MSDN ref.](http://msdn.microsoft.com/en-us/library/ms177603.aspx)）。

还要在字段定义中设置`NOT NULL`约束，以便同时排除 NULL 值。

# glassfish-3 - Glassfish 3.1 在不修改 JVM 但默认管理服务的情况下启用 JMX

> ID：11886302
> 
> 赞同：0
> 
> 时间：2012-08-09T15:01:20.367
> 
> 标签：glassfish-3, jmx

在回答我自己的问题之前，我打开了一个关于如何在 glassfish 服务器 3.1 上启用 jmx 的会话。 [JMX 身份验证](https://stackoverflow.com/questions/10596759/jmx-authentication/10872404#10872404)

但现在我有两台 Linux 机器并安装了相同的 glasfish 服务器 3.1。第一个不需要任何特殊的 JVM 设置来启用 remotejmx。但是第二个没有通过相同的设置连接，因此需要添加以下 jvm 设置。（除了 $JAVA_HOME/jre/lib/management/jmxremote.password 和 $JAVA_HOME/jre/lib/management/jmxremote.access）。

```
-Djava.rmi.server.hostname=yourhostname 
-Dcom.sun.management.jmxremote.port=8686
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=false 
```

对于两个 glassfish 服务器，我都检查了服务器配置。您是否认为 glassfish 服务器 3.1 运行不稳定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:50:39.590

我已经重置了管理员密码，然后我可以使用默认设置通过 JMX 连接连接 Glassfish 服务器（没有额外的 JVM 参数）

```
#asadmin change-admin-password 
```

# actionscript-3 - 如何在 Air Mobile App 中录制音频？

> ID：11886304
> 
> 赞同：1
> 
> 时间：2012-08-09T15:01:31.833
> 
> 标签：actionscript-3, mobile, air, audio-recording

我已经搜索了很长时间，但没有找到任何关于它的信息。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:05:10.450

AIR2 版本的 Galaxy-Tab1 设备在 3 年前测试时运行良好。

请参考我的代码。我可能会工作得很好。相信我。

这里使用的框架是链接。

WAVWriter: [WAVWriter](http://code.google.com/p/ghostcat/source/browse/trunk/ghostcatfp10/src/ghostcat/media/WAVWriter.as?r=424)

ShineMP3Encoder: [ShineMP3Encoder](http://code.google.com/p/flash-kikko/)

**此代码是骨架，但工作正常。**

```
import com.adobe.audio.format.WAVWriter;
import fr.kikko.lab.ShineMP3Encoder;
import flash.events.SampleDataEvent;
import flash.media.Microphone;
import flash.media.Sound;
import flash.utils.ByteArray;
import flash.events.Event;

var mp3encoder:ShineMP3Encoder;
var microphone:Microphone;
var isRecording:Boolean=false;
var soundRecording:ByteArray;

function startMicRecording():void 
{
    isRecording=true;
    soundRecording = new ByteArray();
    microphone=Microphone.getMicrophone();
    microphone.rate=44;
    microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
}

function stopMicRecording():void {

    isRecording=false;
    microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
    soundRecording.position=0;

    convert2MP3();
}

function gotMicData(micData:SampleDataEvent):void 
{
    soundRecording.writeBytes(micData.data);
}

function convert2MP3():void
{
    var wavWrite:WAVWriter = new WAVWriter();
    wavWrite.numOfChannels=1;
    wavWrite.sampleBitRate=16;
    wavWrite.samplingRate=44100;

    var wav:ByteArray = new ByteArray();

    wavWrite.processSamples(wav, soundRecording, 44100,1);
    wav.position=0;

    /* 
     If the process is compressed into mp3 if you have big problems, 
     just as .wav format save. following code: 
     var file:FileReference = new FileReference();
     file.save(wav,"your_file_name.wav");
    */

    mp3encoder=new ShineMP3Encoder(wav);
    mp3encoder.addEventListener(Event.COMPLETE, onEncoded);
    mp3encoder.start();
}

function onEncoded(e:Event):void 
{
    mp3encoder.mp3Data.position=0;
    mp3encoder.saveAs("your_file_name.mp3");
} 
```

# jpa - 列出类的所有实体时，JPA 返回同一实例的多个对象

> ID：11886306
> 
> 赞同：2
> 
> 时间：2012-08-09T15:01:39.820
> 
> 标签：jpa, persistence, db2

我有一个带有子实体列表的 JPA 实体。在这种情况下，一个附加了角色的用户实体。

它看起来（有点简化 - 省略了一些字段/方法）如下：

```
@Entity
public class MyUser{

 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 private Long myUserId;

 private String username; 

 @OneToMany
 @JoinTable(name = "userrole",
   joinColumns = {
     @JoinColumn(name="myUserId", unique = true)           
   },
   inverseJoinColumns = {
     @JoinColumn(name="roleId")
   }
 )
 private Collection<Role> roles;    

 public Collection<Role> getRoles() {
     return roles;
 }
} 
```

如果感兴趣，角色实体非常简单。

```
@Entity
public class Role {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long roleId;
  private String role; // a few more string fields here . 
```

当我添加两个用户和每个用户几百个角色时，当我列出用户时，我会得到一个奇怪的行为。每个用户都列出了几百次（相同的用户 = 相同的唯一 ID）。

有问题的代码：

```
Query q = em.createQuery("SELECT u FROM MyUser u LEFT JOIN FETCH u.roles");
Collection<MyUser> users = q.getResultList();

for(MyUser u : users){
     // print/use u here
} 
```

但是，当我只是访问数据库并执行 select 语句时，它似乎很好。每个用户只存在一次。

在这种情况下，我将 OpenJPA 1.2 与 IBM DB2 数据库一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:14:34.007

我认为您的模型错误，通常用户角色关系不是 OneToMany 而是“ManyToMany”，因此您应该将代码更改为如下所示：

```
@Entity
public class MyUser{

 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 private Long myUserId;

 private String username; 

 @ManyToMany //This should be many to many
 @JoinTable(name = "userrole",
   joinColumns = {
     @JoinColumn(name="myUserId") //The userId in the join table should
                                  //NOT be unique because the userId can
                                  //be many times with different roles
   },
   inverseJoinColumns = {
     @JoinColumn(name="roleId")
   }
 )
 private Collection<Role> roles;    

 public Collection<Role> getRoles() {
     return roles;
 }
} 
```

试试这个方法，看看它是否有效。

此外，您的查询不应该需要左连接，一旦您在每个实体上使用 getRoles() 方法（使用 LAZY Fetch），JPA 应该自动获取角色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:30:07.183

实际上，对 User 和 UserRole 实体进行 @ManyToMany 映射是合理的。您的查询的问题是它返回连接表中的所有行，我认为您不需要这些行。因此，只需按如下方式添加`group by u`到您的查询中：

```
SELECT u FROM MyUser u LEFT JOIN FETCH u.roles GROUP BY u 
```

你就完成了。

# javascript - 根据下拉列表中的选定值启用文本框

> ID：11886311
> 
> 赞同：1
> 
> 时间：2012-08-09T15:01:52.610
> 
> 标签：javascript, jquery

您好我有一个 HTML 页面，其中有一个文本框和一个下拉框。当页面第一次加载时，根据下拉（选择）中的值，需要启用或禁用文本框。我想使用 javascript 或 jquery 来做到这一点。我需要一点帮助。

```
<table>
  <tr>
    <td class="td">
      <input type="text" size="3" name="length21" value="0" disabled="disabled"/>
    </td>
    <td class="td">
      <div class="type">
        <select name="type1" id="field_type">
          <option value="TEXT" SELECTED="">TEXT</option>
          <option value="TEXTAREA" >TEXTAREA</option>
          <option value="DROPDOWN" >DROPDOWN</option>
          <option value="DATE" >DATE</option>
          <option value="CHECKBOX" >CHECKBOX</option>
          <option value="SEPARATOR" >SEPARATOR</option>
          <option value="DATETIME" >DATETIME</option>
          <option value="HIERARCHY" >HIERARCHY</option>
        </select>
      </div>
    </td>
  </tr>
  <tr>
    <td class="td">
      <input type="text" size="3" name="length21" value="0" disabled="disabled"/>
    </td>
    <td class="td">
      <div class="type">
        <select name="type2" id="field_type">
          <option value="TEXT" >TEXT</option>
          <option value="TEXTAREA" >TEXTAREA</option>
          <option value="DROPDOWN" SELECTED="">DROPDOWN</option>
          <option value="DATE" >DATE</option>
          <option value="CHECKBOX" >CHECKBOX</option>
          <option value="SEPARATOR" >SEPARATOR</option>
          <option value="DATETIME" >DATETIME</option>
          <option value="HIERARCHY" >HIERARCHY</option>
        </select>
      </div>
    </td>
  </tr>
</table> 
```

现在我想要的是，当页面加载时，对于下拉选择 TEXT 的行，文本框将被启用。但不是为了另一个。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:05:31.907

在 jQuery 中：

```
$(document).ready(function(){
  $('select').on('change',function(){
    if($('select').val() == "TEXT") {
      $(this).parents('td').siblings('td').children('input').removeAttr('disabled');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:17:37.913

稍微更改了 Scott 的代码，使其适用于您的负载：

```
$(document).ready(function() {
    $('select').each(function() {
        var comboBox = $(this);
        checkValue(comboBox);
        comboBox.on('change', function() {
            checkValue(comboBox);
        });
    });
});

function checkValue(comboBox) {
    if (comboBox.val() == "TEXT") {
        comboBox.parents('td').siblings('td').children('input').removeAttr('disabled');
    }
    else {
        comboBox.parents('td').siblings('td').children('input').attr('disabled','disabled');
    }
}​ 
```

这是一个小提琴顺便说一句：http: [//jsfiddle.net/BbStP/1](http://jsfiddle.net/BbStP/1)

# php - preg_replace 删除单/双字符单词

> ID：11886315
> 
> 赞同：0
> 
> 时间：2012-08-09T15:01:58.193
> 
> 标签：php, regex, preg-replace

我有这条线

```
$txt=preg_replace('#\s(\S){1,2}\s#',' ',$txt); 
```

我想删除所有单字符和双字符单词（a、no、do 等...）。

它有效，但并不完美 - 当我的字符串看起来像这样时：

```
xxxxx a b c d e xxxxx 
```

然后我的代码会留下这样的东西（每两个匹配的单词都会被省略）

```
xxxxx b d xxxxx 
```

我知道预赛看起来像“a”、“b”、“c”、“d”、“e”，那么有什么简单的方法可以解决这个问题吗？我想过复制每个空格，但也许有人会有更好的主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:04:22.953

在重复的片段周围添加一个重复的非捕获组，如下所示：

```
$txt = preg_replace('#(?:\s+\S{1,2})+\s+#',' ',$txt); 
```

我还删除了周围不必要的捕获组`\S`，因为您不使用或不需要它，并且在重复时无法正确捕获。

[您可以在此演示](http://viper-7.com/GWjtYK)中看到它的工作原理。

# c# - 如何使用 REST API 将附件发布到 JIRA？

> ID：11886316
> 
> 赞同：9
> 
> 时间：2012-08-09T15:01:58.570
> 
> 标签：c#, rest, jira

**如何在 C# 中使用 JIRA REST API 和 HttpWebRequest 将附件发布到 JIRA？**

从[/rest/api/2/issue/{issueIdOrKey}/attachments 下的文档中](https://docs.atlassian.com/jira/REST/latest/#d2e4527)：

> 邮政
> 
> 为问题添加一个或多个附件。
> 
> 该资源需要一个多部分的帖子。media-type multipart/form-data 在 RFC 1867 中定义。大多数客户端库都有使处理多部分帖子变得简单的类。例如，在 Java 中，Apache HTTP 组件库提供了一个 MultiPartEntity，它使得提交多部分 POST 变得简单。
> 
> 为了防止 XSRF 攻击，因为这个方法接受 multipart/form-data，所以它上面有 XSRF 保护。这意味着您必须在请求中提交 X-Atlassian-Token: nocheck 的标头，否则将被阻止。
> 
> 包含附件的 multipart/form-data 参数的名称必须是“file”
> 
> 上传名为“myfile.txt”的文件以发出 REST-123 的简单示例：
> 
> curl -D- -u admin:admin -X POST -H "X-Atlassian-Token: nocheck" -F "file=@myfile.txt" [http://myhost.test/rest/api/2/issue/TEST -123/附件](http://myhost.test/rest/api/2/issue/TEST-123/attachments)

* * *

我有

```
foreach (JIRAAttachments attachm in attachments.attachments)
{
    request = HttpWebRequest.Create(
                  logInformation.GetUri() + "/rest/api/2/issue/" + key + "/attachments"
              ) as HttpWebRequest;
    request.Headers.Add("Authorization: Basic " + logInformation.GetEncodeAuthentication());
    request.Method = "POST";
    request.ContentType = "multipart/form-data";
    request.Headers.Add("X-Atlassian-Token: nocheck file=@" + Path.GetFullPath(@"..\Attachments\" + attachm.filename));
    request.KeepAlive = true;
    request.Proxy = wp;
    response = (HttpWebResponse)request.GetResponse();
    Stream s = response.GetResponseStream();
    FileStream fs = new FileStream(Path.GetFullPath(@"..\Attachments\" + attachm.filename), FileMode.Open);
    byte[] write = new byte[256];
    int count = fs.Read(write, 0, write.Length);
    while (count > 0)
    {
        s.Write(write, 0, count);
        count = fs.Read(write, 0, write.Length);
    }
    fs.Close();
    s.Close();
    response.Close();
} 
```

但它返回一个 404 错误...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:12:16.827

解决了你的问题：

```
var boundary = string.Format("----------{0:N}", Guid.NewGuid());
System.IO.MemoryStream content = new MemoryStream();
var writer = new StreamWriter(content);
foreach (var att in attachments)
{

    writer.WriteLine("--{0}", boundary);
    writer.WriteLine("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"", "file", Path.GetFileName(att["filename"]));
    writer.WriteLine("Content-Type: {0}", att.ContentType);
    writer.WriteLine();
    writer.Flush();
    att.Stream.CopyTo(content);
    writer.WriteLine();
}
writer.WriteLine("--" + boundary + "--");
writer.Flush();
content.Seek(0, SeekOrigin.Begin);

HttpWebRequest oRequest = null;
oRequest = (HttpWebRequest)HttpWebRequest.Create(string.Format(RestBaseURI + "issue/{0}/attachments", item.Key));
oRequest.ContentType = string.Format("multipart/form-data; boundary={0}", boundary);
oRequest.Method = "POST";
oRequest.Headers.Add("Authorization", AuthData);
oRequest.Headers.Add("X-Atlassian-Token", "nocheck");
oRequest.UseDefaultCredentials = true;
oRequest.KeepAlive = true;
oRequest.ContentLength = content.Length;

using (var oStream = oRequest.GetRequestStream())
{
    content.CopyTo(oStream);
}

using (var oResponse = (HttpWebResponse)oRequest.GetResponse())
{
    using (var reader = new StreamReader(oResponse.GetResponseStream()))
    {
        var responseData = reader.ReadToEnd();
        var data = JObject.Parse(responseData);
    }
} 
```

PS：thanks2mod删除我以前的帖子！好的 ...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-28T13:22:23.720

OP 的代码中有几个错误。

使用@mabu 提供的代码片段和我在[http://www.briangrinstead.com/blog/multipart-form-post-in-c](http://www.briangrinstead.com/blog/multipart-form-post-in-c)上找到的代码，这是一个*功能**代码块，用于将附件上传到 Jira。

```
public bool AddAttachments(string issueKey, IEnumerable<string> filePaths)
{
    string restUrl = Jira.FormatRestUrl(m_JiraId, true);
    string issueLinkUrl = String.Format("{0}/issue/{1}/attachments", restUrl, issueKey);

    var filesToUpload = new List<FileInfo>();
    foreach (var filePath in filePaths)
    {
        if (!File.Exists(filePath))
        {
            Jira.LogError("File '{0}' doesn't exist", filePath);
            return false;
        }

        var file = new FileInfo(filePath);
        if (file.Length > 10485760) // TODO Get Actual Limit
        {
            Jira.LogError("Attachment too large");
            return false;

        }

        filesToUpload.Add(file);
    }

    if (filesToUpload.Count <= 0)
    {
        Jira.LogWarning("No file to Upload");
        return false;
    }

    return PostMultiPart(issueLinkUrl, filesToUpload);
}

private Boolean PostMultiPart(string restUrl, IEnumerable<FileInfo> filePaths)
{
    HttpWebResponse response = null;
    HttpWebRequest request = null;

    try
    {
        var boundary = string.Format("----------{0:N}", Guid.NewGuid());
        var content = new MemoryStream();
        var writer = new StreamWriter(content);

        foreach (var filePath in filePaths)
        {
            var fs = new FileStream(filePath.FullName, FileMode.Open, FileAccess.Read);
            var data = new byte[fs.Length];
            fs.Read(data, 0, data.Length);
            fs.Close();

            writer.WriteLine("--{0}", boundary);
            writer.WriteLine("Content-Disposition: form-data; name=\"file\"; filename=\"{0}\"", filePath.Name);
            writer.WriteLine("Content-Type: application/octet-stream");
            writer.WriteLine();
            writer.Flush();

            content.Write(data, 0, data.Length);

            writer.WriteLine();
        }

        writer.WriteLine("--" + boundary + "--");
        writer.Flush();
        content.Seek(0, SeekOrigin.Begin);

        request = WebRequest.Create(restUrl) as HttpWebRequest;
        if (request == null)
        {
            Jira.LogError("Unable to create REST query: {0}", restUrl);
            return false;
        }

        request.Method = "POST";
        request.ContentType = string.Format("multipart/form-data; boundary={0}", boundary);
        request.Accept = "application/json";
        request.Headers.Add("Authorization", "Basic " + m_EncodedCredential);
        request.Headers.Add("X-Atlassian-Token", "nocheck");
        request.ContentLength = content.Length;

        using (Stream requestStream = request.GetRequestStream())
        {
            content.WriteTo(requestStream);
            requestStream.Close();
        }

        using (response = request.GetResponse() as HttpWebResponse)
        {
            if (response.StatusCode != HttpStatusCode.OK)
            {
                var reader = new StreamReader(response.GetResponseStream());
                Jira.LogError("The server returned '{0}'\n{1}", response.StatusCode, reader.ReadToEnd());
                return false;
            }

            return true;
        }
    }
    catch (WebException wex)
    {
        if (wex.Response != null)
        {
            using (var errorResponse = (HttpWebResponse)wex.Response)
            {
                var reader = new StreamReader(errorResponse.GetResponseStream());
                Jira.LogError("The server returned '{0}'\n{1}).", errorResponse.StatusCode, reader.ReadToEnd());
            }
        }

        if (request != null)
        {
            request.Abort();
        }

        return false;
    }
    finally
    {
        if (response != null)
        {
            response.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-16T12:34:33.377

我真的不想处理所有这些`boundary`东西，所以这是我的尝试。这适用于其 API 看起来与 Jira 相同的[Confluence 。](https://docs.atlassian.com/confluence/REST/latest/#content/%7Bid%7D/child/attachment-getAttachments)

感谢[ASP.NET WebApi 的 Michael Teper：how to perform a multipart post with file upload using WebApi HttpClient](https://stackoverflow.com/questions/10339877/asp-net-webapi-how-to-perform-a-multipart) and Jeff Caron（上图）。

```
var contents = "some long HTML that I wanted to upload";
var fileName = "Some fancy file name.html";

using (var client = new HttpClient())
{
    var uri = new Uri(URL);

    client.BaseAddress = new Uri(URL);
    client.DefaultRequestHeaders.Accept.Clear();
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

    client.DefaultRequestHeaders.Authorization = authorization;
    client.DefaultRequestHeaders.Add("X-Atlassian-Token", "nocheck");

    var uriPath = String.Format(AttachmentPath, pageId);

    var content = new MultipartFormDataContent();
    var fileContent = new StringContent(contents);
    // also tested to work: 
    // var fileContent = new ByteArrayContent(Encoding.UTF8.GetBytes(contents));
    content.Add(fileContent, "file", fileName);

    var response = await client.PostAsync(uriPath, content);
    if (response.IsSuccessStatusCode)
    {
        return TaskResult.Success(null, response.ReasonPhrase);
    }
    else
    {
        return TaskResult.Failure("Service responded with Status Code: " + response.StatusCode + Environment.NewLine + "Reason Phrase: " + response.ReasonPhrase);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-25T19:22:01.350

您还可以按如下方式使用 Restsharp

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using Jira
using RestSharp;
using RestSharp.Authenticators;

namespace Jira
{
    class Program
    {
      static void Main(string[] args)
      {
        var client = new RestClient("http://{URL}/rest/api/2");
        var request = new RestRequest("issue/", Method.POST);

        client.Authenticator = new HttpBasicAuthenticator("user", "pass");

        var issue = new Issue
        {
            fields =
                new Fields
                {
                    description = "Issue Description",
                    summary = "Issue Summary",
                    project = new Project { key = "KEY" }, 
                    issuetype = new IssueType { name = "ISSUE_TYPE_NAME" }
                }
        };

        request.AddJsonBody(issue);

        var res = client.Execute<Issue>(request);

        if (res.StatusCode == HttpStatusCode.Created)
        {
            Console.WriteLine("Issue: {0} successfully created", res.Data.key);

            #region Attachment            
            request = new RestRequest(string.Format("issue/{0}/attachments", res.Data.key), Method.POST);

            request.AddHeader("X-Atlassian-Token", "nocheck");

            var file = File.ReadAllBytes(@"C:\FB_IMG_1445253679378.jpg");

            request.AddHeader("Content-Type", "multipart/form-data");
            request.AddFileBytes("file", file, "FB_IMG_1445253679378.jpg", "application/octet-stream");

            var res2 = client.Execute(request);

            Console.WriteLine(res2.StatusCode == HttpStatusCode.OK ? "Attachment added!" : res2.Content);
            #endregion
        }
        else
            Console.WriteLine(res.Content);
      }
    }

    public class Issue
    {
        public string id { get; set; }
        public string key { get; set; }
        public Fields fields { get; set; }
    }

    public class Fields
    {
        public Project project { get; set; }
        public IssueType issuetype { get; set; }
        public string summary { get; set; }
        public string description { get; set; }        
    }

    public class Project
    {
        public string id { get; set; }
        public string key { get; set; }
    }

    public class IssueType
    {
        public string id { get; set; }
        public string name { get; set; }
    }
} 
```

整个代码在要点上[https://gist.github.com/gandarez/c2c5b2b27dbaf62a0d634253529bcb59](https://gist.github.com/gandarez/c2c5b2b27dbaf62a0d634253529bcb59)

# html - 灰显 CSS Superfish 菜单

> ID：11886317
> 
> 赞同：0
> 
> 时间：2012-08-09T15:02:00.467
> 
> 标签：html, css, superfish

我编写了一个脚本，当在网页上单击某些按钮时，整个页面会变灰，直到用户单击“是”或“否”。这看起来很简单，但我遇到了与我在 Superfish 中使用的菜单的冲突。当页面的其余部分变灰时，仍然可以访问菜单。

我把它归结为 superfish css 脚本使用了一系列

```
Position: relative 
```

或者

```
Position: absolute 
```

因此，我认为我需要弄清楚为什么我的灰色覆盖框不工作或将导航栏的硬编码位置放入源代码中。我担心的是，如果我这样做，那么设置不会只符合我的分辨率吗？

我在灰盒编码中遗漏了什么会导致这种情况发生吗？

```
#cover {
            display:none;
            position:absolute;
            left:0px;
            top:0px;
            width:100%;
            height:100%;
            background:gray;
            filter:alpha(Opacity=50);
            opacity:0.5;
            -moz-opacity:0.5;
            -khtml-opacity:0.5
} 
```

我对css没有太多经验。昨天我寻找了几个小时的解决方案，但找不到与我遇到的问题相关的任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:05:13.970

您需要将菜单块设置为`z-index`低于覆盖块`z-index`。

```
.someClass
{ 
    position: relative; 
    z-index: 2; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:58:13.470

我在尝试使用以下设置时遇到了问题。

```
#cover {
        display:none;
        position:absolute;
        left:0px;
        top:0px;
        width:100%;
        height:100%;
        background:gray;
        filter:alpha(Opacity=50);
        opacity:0.5;
        -moz-opacity:0.5;
        -khtml-opacity:0.5
        z-index:100
} 
```

我发现必须在声明位置后立即设置 z-index，否则它根本不起作用。

```
#cover {
        display:none;
        position:absolute;
        z-index:100
        left:0px;
        top:0px;
        width:100%;
        height:100%;
        background:gray;
        filter:alpha(Opacity=50);
        opacity:0.5;
        -moz-opacity:0.5;
        -khtml-opacity:0.5
} 
```

# excel - 在选项卡中创建具有不同部分的 Excel 电子表格，每个部分都有一个垂直滚动条

> ID：11886320
> 
> 赞同：1
> 
> 时间：2012-08-09T15:02:09.933
> 
> 标签：excel, spreadsheet, excel-2010, horizontal-scrolling, vertical-scrolling

我是 Excel 的初学者。我正在使用 Excel 2010。我正在尝试创建一个具有不同部分的 Excel 电子表格。例如，假设我的工作表标签被标记为运动。我希望这张纸在同一张纸上有不同的运动部分，比如篮球、棒球和足球。在每个部分中，我都希望有一个带有垂直和/或水平滚动条的 5 列。这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:45:05.970

我相信您想进入功能区上的“视图”选项卡，使用“新建窗口”按钮创建新窗口，然后排列这些窗口。

数据可以全部在一张或多张纸中，但您应该能够使用单独的滚动条同时查看所有数据。

我实际上强烈建议将每项运动存储在它自己的单独工作表中，因为虽然您可以在每个窗口中单独冻结窗格，但不能单独隐藏列。

不过，我不确定您的目标是什么。

当它看起来像你想要的样子时，你会想要保存你的工作区。

# sql-server - 'Create VIEW' 必须是批处理中的唯一语句

> ID：11886321
> 
> 赞同：5
> 
> 时间：2012-08-09T15:02:13.390
> 
> 标签：sql-server, sql-server-2008-r2

我有以下 SQL：

```
 ALTER PROCEDURE [dbo].[usp_gettasks]  
    @ID varchar(50)

    AS
     declare @PDate Date

     WHILE (DATEPART(DW, @PDate) =  1 OR DATEPART(DW, @PDate) =  7 )
     BEGIN

      set @PDate =  DATEADD(day, 1, @PDate)

     END

     CREATE VIEW tblList AS

     select tt.ItemOrder,tt.DisplayVal,  DATEADD(day, tt.DaysDue, @PDate)  from tblLine tt
     where tt.ID = 1 
```

我收到以下消息：

> 语法不正确：“Create VIEW”必须是批处理中的唯一语句

`GO`我之前试过 put `Create View`，但后来它无法识别`PDate`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T15:08:34.457

要在存储过程中创建视图，您需要在动态 SQL 中执行此操作（特别是因为视图本身不能接受变量）。这是因为模块不能作为较大脚本的一部分创建（例如，如果您有条件逻辑则需要一个，例如`IF <some condition> CREATE VIEW`）。

```
DECLARE @sql nvarchar(max) = N'CREATE VIEW dbo.tblList 
    AS
      SELECT ItemOrder, DisplayVal, 
        SomeAlias = DATEADD(DAY, DaysDue, ''' 
          + CONVERT(char(8), @PDate, 112)
          + N''') FROM dbo.tblLine WHERE ID = 1;';

EXEC sys.sp_executesql @sql; 
```

但是一旦你第二次调用这个存储过程，它就会失败，因为你试图创建一个名为的视图`dbo.tblList`并且该视图已经存在。也许您可以在比“我想在存储过程中创建一个视图”更高的层次上详细说明您想要做什么。

# xml - 如何在 Eclipse 的 XML 编辑器中绑定键？

> ID：11886324
> 
> 赞同：1
> 
> 时间：2012-08-09T15:02:22.213
> 
> 标签：xml, eclipse, key

我安装了 Eclipse Helios，使用 Eclipse XML 编辑器和工具，
版本 3.2.3.v201102160550-7H7AFUWDxumQJOi9ghcTb5YgkwEZ，
包 org.eclipse.wst.xml_ui.feature.feature.group
进行 XML 编辑。

我想绑定 Toggle Comment 命令（但这并不重要），并且我无法为“when”字段选择正确的值。我尝试了“结构化文本编辑器”、“文本编辑器”、“XML 源代码编辑”，甚至“在 Windows 中”，但我的命令仍然没有被接受。在 Java 源代码编辑中，为同一命令分配了使用相同快捷方式的唯一其他绑定。Java 的命令运行良好。

那么，我该如何实现呢？或者，

*   如何确定当前上下文：我不太清楚当前上下文（定义快捷方式时在 when 字段中放置的内容）是如何确定的，先验取决于当前编辑器，如果该编辑器没有有一个特定的上下文，它使用它的父级（AnEditor 继承？从 Text Editor 继承自 In Windows）。
*   文件关联有什么可做的吗？与 Windows 自己的文件/内容关联相比，我仍然对此感到有些困惑，但无论如何 .xml 与 XML 源编辑器、文本编辑器相关联，并且我正在编辑一个真正的 .xml 文件。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T18:31:46.503

OK it's all actually in the Help here : [http://tinyurl.com/kdube46](http://tinyurl.com/kdube46) (or just type 'Keys' in the Help searchbox).

Basically:

*   current context is usually evidently defined : If you are editing Java code, your in the Editing Java Code context. This context extends it's father Editing Text, which extends In Windows, but your still in the Editing Java Code context. Extending here means just borrowing non-overridden parent bindings.
*   Eclipse uses his file associations over Windows' I think (not sure). So no, file associations are correct. Actually the only way to achieve what I wanted, one binding for the same command under many contexts, is to associate all text files with Text Editor, it seems.

So currently no pleasant solution -> one binding per command per context.

# asp.net - SQLDataSource：使用更改参数（或数组参数？）多次运行选择命令

> ID：11886325
> 
> 赞同：1
> 
> 时间：2012-08-09T15:02:25.723
> 
> 标签：asp.net, sql, vb.net

我目前正在运行一个 VB.net/ASPX Web 应用程序，该应用程序根据用户安全组级别从数据库中获取特定记录。我想要做的是如果用户来自多个安全组 - 获取他们存在的每个安全组的报告。

在 where 子句中，存在这一行： `and b.security_level_id = @security_level_id`

这仅允许将一个`security_level_id`传递到选择查询中。

是否可以多次运行查询，更改参数：

`<asp:Parameter DefaultValue="0" Name="security_level_id" />`

或者我可以用这个参数创建一个数组并在单个查询中循环遍历它吗？

谢谢！

解决了：

好的。我通过在我的实际 VB 代码中创建选择命令解决了这个问题。它消除了对参数的需求，因此我可以将变量直接传递到查询字符串中。

我用过：受保护的 Sub SqlDS_ReportCategories_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles SqlDS_ReportCategories.Init

获取我的数据源的句柄，然后： Dim s As SqlDataSource = CType(sender, SqlDataSource) 创建它的对象引用。

然后 s.SelectCommand =“一些查询”+ 变量 +“其余查询”

希望这对未来的人们有所帮助！

*   垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:58:13.937

解决了：

好的。我通过在我的实际 VB 代码中创建选择命令解决了这个问题。它消除了对参数的需求，因此我可以将变量直接传递到查询字符串中。

我用过：受保护的 Sub SqlDS_ReportCategories_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles SqlDS_ReportCategories.Init

获取我的数据源的句柄，然后： Dim s As SqlDataSource = CType(sender, SqlDataSource) 创建它的对象引用。

然后 s.SelectCommand =“一些查询”+ 变量 +“其余查询”

希望这对未来的人们有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:47:10.150

您可以使用 SQL`IN`同时搜索多个项目。

首先要做的是将安全级别收集到一个逗号分隔的列表中：

```
Dim sbSQL As New System.Text.StringBuilder(500)

For Each wSecurityLevel As Integer In theUser.SecurityLevels
    If sbSQL.Length <> 0 Then
        sbSQL.Append(",")     
    End If
    sbSQL.Append(wSecurityLevel)
Next 
```

然后设置您的 SQL 语句以使用 IN：

```
"and b.security_level_id IN (" & sbSQL.ToString() & ")" 
```

# c# - WP7 从 PhoneApplicationPage 外部执行导航

> ID：11886329
> 
> 赞同：2
> 
> 时间：2012-08-09T15:02:50.737
> 
> 标签：c#, windows-phone-7, navigation

我正在开发一个 WP7 应用程序，它使用 RESTful Web 服务并使用登录。我有一个用于检索实际数据的实用程序类。

每当收到某个结果时，我都必须执行新的登录，因此必须向用户显示登录屏幕。

这个实用程序类是否可以强制应用程序导航到某个特定页面？可能通过`App`实例？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:17:48.710

是的，虽然很棘手。（`App.Current`您的应用程序的实例）如果转换为您的类型，则具有一个`RootFrame`属性，您可以在该属性上调用导航方法。`App`

所以`(Application.Current as App).RootFrame.Navigate(...)`应该为你做这个把戏。

# jquery - jquery图片改变和切换位置

> ID：11886333
> 
> 赞同：0
> 
> 时间：2012-08-09T15:03:13.203
> 
> 标签：jquery, web, switch-statement

嗨，我正在做一个有 4 张图片的示例网站，有一张默认图片，它是最大的图片，当我点击第二张图片时，第二张图片将是那个位置的图片，第一张图片将在第二张图片位置。第三张图和第四张图也是一样。我怎么能在jquery中做到这一点提前感谢那些想要帮助的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:52:24.087

这是您的完整解决方案！;)

JavaScript：

```
$(document).ready(function() {
    $('img.prodSmallPic').click(function() {
        var tmpObjSrcBig = $('img.prodBigPic').attr('rel');
        var tmpObjSrcSmall = $(this).attr('rel');

        $('a[id="' + $(this).attr('rel') + '"]').attr('id', tmpObjSrcBig);

        $('img.prodBigPic').fadeOut(200, function() {
            $('img.prodBigPic').attr('src', 'big_' + $(this).attr('rel'));
            if (this.complete) $(this).fadeIn(200);
        });
        $(this).fadeOut(200, function() {
            $(this).attr('src', 'tn_' + tmpObjSrcBig);
            if (this.complete) $(this).fadeIn(200);
        });

        $('img.prodBigPic').attr('rel', tmpObjSrcSmall);
        $(this).attr('rel', tmpObjSrcBig);
    });
}); 
```

HTML：

```
<img src="big_11886333_1.jpg" border="0" class="prodBigPic" rel="11886333_1.jpg" />

<img src="tn_11886333_2.jpg" class="prodSmallPic" border="0" rel="11886333_2.jpg" />
<img src="tn_11886333_3.jpg" class="prodSmallPic" border="0" rel="11886333_3.jpg" /> 
```

在线演示：http: [//jsfiddle.net/8xmLM](http://jsfiddle.net/8xmLM)

希望这有帮助！

# javascript - Facebook FQL Javascript 看看有没有朋友

> ID：11886336
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:03:19.947
> 
> 标签：javascript, facebook, facebook-fql

我似乎无法弄清楚这件事我得到了我想要的一切，但我无法让它工作：我想查看活动登录用户是否是具有特定帐户的朋友，如果他们不是，则用户提示添加朋友窗口。这是得到的：

```
FB.api(
 {
  method: 'fql.query',
  query: 'SELECT uid1, uid2 FROM friend WHERE uid1 = me() AND uid2 = 100001314420757'
 },
 function(response) {
  document.getElementById("msg2").innerHTML='Users are: ' + response[0].[something here];
 }
); 
```

我想我得到了正确的 FQL 查询（从 FB 获得），但我需要正确的回复，所以如果您有姓名查询，如果尝试任何我能想到的事情，您将得到 response[0].name（response.friend 或朋友等等，但我无法让它发挥作用。）如果我只是做出回应；然后我变得不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:05:23.310

我在您的代码中看到的问题是，如果用户不是朋友，`response`则为空。您需要对此进行测试。

你可以尝试这样的事情：

```
 var friendID = '100001314420757';
  FB.api( 
    { 
        method: 'fql.query', 
        query: 'SELECT uid1, uid2 FROM friend WHERE uid1 = me() AND uid2 = '+friendID
     }, 
    function(response) {
        if (response[0] == null || response[0].uid2 != friendID) { 
          alert('You are not friends');
        } else { 
           alert('You are friends.');
        } 
    } 
  ); 
```

# php - Wordpress 循环中的缩略图或预览

> ID：11886346
> 
> 赞同：0
> 
> 时间：2012-08-09T15:04:06.637
> 
> 标签：php, loops, wordpress-theming, wordpress

现在花了一段时间在这方面几乎没有效果。

我正在尝试更改循环，以便它检查每篇文章中的特色图片，如果找到，则显示该图片而不是截断的文章和链接。

所以基本上（在逻辑上）

```
Check for featured image

if there is a featured image display the featured image (and nothing else).

else display a truncated version of the article. 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:29.837

干得好;

```
<?php if (function_exists('has_post_thumbnail') && has_post_thumbnail()) { ?>

    <?php $img_src = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), array( 960,960 )); ?>

    <img src="<?php echo $img_src[0]; ?>" alt="My image" />

<?php } else { ?>

        <?php the_excerpt(); ?>

<?php } ?> 
```

请查看法典中的以下内容以获取更多信息；

[WordPress 特色图片](http://codex.wordpress.org/Post_Thumbnails)

[WordPress 摘录](http://codex.wordpress.org/Function_Reference/the_excerpt)

# android - 如何暂停循环以等待按钮按下

> ID：11886348
> 
> 赞同：1
> 
> 时间：2012-08-09T15:04:18.190
> 
> 标签：android, game-loop

我正在尝试使用 Android 的 1v1 战斗创建一个基于回合的游戏。我的基本游戏循环会检查两名战士是否已经死亡，如果没有，则检查下一个要走的人。如果轮到玩家，那么它**应该等待**点击攻击按钮。如果轮到计算机，那么它将执行随机攻击。我无法让程序等待用户输入。我尝试在这里设置按钮侦听器，但没有这样做。[编辑] 确定哪个字符是基于恢复整数。每次攻击都有一个恢复值（50-100），该值会添加到角色的恢复中。nextMove() 方法检查哪个更接近 0 并减去两个字符的差值。这使得游戏需要更多的策略，因为你不需要

我该怎么做才能让游戏在那个时候暂停

这是代码

```
public void battle(){
    boolean playerGo;
    while(!checkDead()){
        playerGo=nextMove();  //returns true if its the players turn to go
        if(playerGo){
            //The game should wait here for the user input

            moveButton1.setOnClickListener(this);

        }
        else{
            randomMove();  //game automatically goes
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:02:29.513

当您的应用程序启动时，所有东西都在一个线程上运行，包括事件处理程序。在您完成设置并调用battle() 之后，该线程就坐在那里一圈又一圈地循环。它在循环中忙得不可开交，以至于它没有注意到有一个点击事件等待处理！

有几个选项：

1.  重构你的代码。看起来基本结构是玩家移动，然后游戏移动。您可以完全删除此循环，而是`randomMove()`在每次处理玩家移动后调用。`OnClickListener`在for中处理玩家的移动`moveButton1`。这样，一切都发生在事件上。总体而言，这会更简单，并且可能是正确的做法。
2.  对代码进行尽可能小的更改以使其正常工作。这可能意味着将 while 循环的内容拉入 a `Runnable`，您可以通过调用`Handler.post`. 第一行调用`checkDead`，如果为真则返回。最后一行重新安排了`Runnable`. 中间是while循环的主体。这样做的效果是你的循环体运行，然后事件处理程序得到一个回合，然后你的循环体运行，然后事件处理程序运行。这可能是个坏主意。
3.  在另一个线程中运行battle()。这可能是个坏主意。

Why are 2\. and 3\. bad ideas? On a mobile device, battery life is precious, and running a check to see if you need to do something over and over again will keep the CPU busy chewing up battery life. Much better to sit there idle until you need to do something - this is what option 1 achieves.

So if 2\. and 3\. are bad ideas, why mention them? Welllllll, 2\. I mention because it's the closest thing I've got to an answer to the question you actually asked. I mention 3\. because there's a sense in which your current code is a fairly clear embodiment of the game logic. You could rework it so it runs in a separate thread, and instead of nextMove() returning true, nextMove() waits until the player makes a move (this would involve semaphores or mutexes or promises). But this would be an explicitly multi-threaded program, and as such would be difficult to write correctly. I recommend you don't attempt it at this stage in your programming career - the most likely outcome is a program that stops and waits forever, or that corrupts its data structures, in a way that is exceedingly difficult to diagnose.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:56:43.957

Button.SetOnClickListener() 函数将被触发，只有当用户点击按钮时。因此，它不会等待\阻塞，直到用户输入。这是 Android 设计的，您不能让阻塞窗口等待用户输入。而是更改您的设计以显示提示“现在它的用户移动”。

1.  用户首先通过单击按钮移动。
2.  SetOnclickListener() 将被调用。在其中包含用户操作代码。
3.  在 SetOnclickListener() 的末尾有计算机操作代码。

使用此循环，您可以链接用户移动和计算机移动。

# java - 我可以在 java (netbeans) 中部署桌面应用程序 (application.exe) 吗？

> ID：11886352
> 
> 赞同：2
> 
> 时间：2012-08-09T15:04:31.987
> 
> 标签：java, deployment, desktop-application

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

我可以在 java (netbeans) 中部署桌面应用程序 (application.exe) 吗？

我想创建我的 Java 应用程序的设置，但我不知道该怎么做。

如何创建`setup.exe`可以在任何计算机上运行的 java 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:22:01.980

**1.**恐怕使用NetBeans，你将**无法创建一个.exe文件。**

**2.**但是创建 a`.exe`会**扼杀 Java 的目的**，所以 an`Executable Jar`将是一个好主意。

**3.**但是，如果您想这样做，那么那里有 n 个第三工具。

**4.** `launch4j`是个不错的选择，**详情请看以下链接：**

```
 http://launch4j.sourceforge.net/ 
```

**也试试这个下面的网站，因为你会得到一些很好的信息...**

```
 http://www.excelsior-usa.com/articles/java-to-exe.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:09:52.653

如果你想要一个 .exe 文件，你可以将项目保存在 .jar 中并在此处转换为 exe [http://jsmooth.sourceforge.net/](http://jsmooth.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:09:35.020

是与否

Netbeans 它本身不支持生成本机可执行文件，但是一些可执行包装器确实支持 Ant

我个人使用[Exe4J](http://www.ej-technologies.com/products/exe4j/overview.html)，但那是因为它支持我的需求，你必须自己评估它

顺便说一句，没有办法为 Java 生成真正的本机可执行文件，所有这些类型的产品只会生成代表您调用 Java 的包装器

至于创建安装程序。同样有很多选择。

制作 Exe4J 的人有可用的产品，但我个人一直在使用[IzPack](http://izpack.org/)

# php - 将数据传递给动态 CSS 文件？

> ID：11886353
> 
> 赞同：0
> 
> 时间：2012-08-09T15:04:39.413
> 
> 标签：php, css, codeigniter, cross-browser, less

这更多的是浏览器会做什么的问题，而不是后端架构的问题。

我正在使用**codeigniter**并设置了一个控制器来处理资产（CSS、JS 和图像），目前我只是从 CSS 文件中处理 PHP 并将它们作为 CSS 文件呈现给浏览器，因此`www.mysite.com/asset/home.css`将调用资产类并从单个文件生成主页的 CSS 文件。

我想让对 CSS 文件的请求更加动态，以便请求将确定应该组合的多个文件，然后传递`less.php`给以进行解析和最小化。

考虑到缓存问题，将变量传递给 CSS 类的最佳方法是什么？平面链接 URI 变量？传统的 GET URI？我可以使用数据库来为其组件引用一个给定的名称，但这不是很多开销吗？

欢迎任何想法或意见！

++ 浏览器将如何处理类似的事情`standard.menu.comments.css`？

+++ 我最终将 URI 字符串附加到文件中。它不像我想要的那样干净，但它似乎正在工作。我可能很快就会使用平斜杠分隔的 URI 解析器来清理请求行。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:16:21.923

您可以创建`style.php`具有以下标头的文件：

```
<?php header("Content-type: text/css"); ?> 
```

并将此样式链接到您的模板中：

```
<link rel="stylesheet" type="text/css" media="screen" href="style.php?color=red"> 
```

然后你可以在你的导入一些样式表`style.php`：

```
@import ("someStyle.css"); 
```

或者您可以传递一些`$_GET`变量并创建条件样式：

```
<?php 
    if ($_GET['color'] == 'red')
    {
        echo ".myBlock {background: #ff0000;}";
    } 
    else
    {
        echo ".myBlock {background: #00ff00;}";
    }
?> 
```

如果您只是不想`.css`缓存文件，请将随机 $_GET 变量附加到链接样式：

```
<link rel="stylesheet" type="text/css" media="screen" href="style.css?<?php echo time(); ?>"> 
```

# iphone - 在 UITableViewController 中的 viewWillAppear 之后未调用 didDeselectRowAtIndexPath

> ID：11886354
> 
> 赞同：1
> 
> 时间：2012-08-09T15:04:42.830
> 
> 标签：iphone, ios, uitableview, viewwillappear

我正在使用设置为（默认值）的`UITableViewController`子类。`clearsSelectionOnViewWillAppear``YES`

当自动取消选择时，如何对取消选择的单元格进行更改`viewWillAppear:`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:04:42.830

`tableView:didDeselectRowAtIndexPath:``viewWillAppear:`在子类中自动取消选择单元格时不调用`UITableViewController`。

在这种情况下，使用以下代码对取消选择的项进行更改：

```
- (void) viewWillAppear:(BOOL)animated {
    // HACK: Need to be called before super if the selection is cleared on viewWillAppear. 
    UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:self.tableView.indexPathForSelectedRow];
    // Change the cell
    [super viewWillAppear:animated];
} 
```

一般来说，如果你使用`deselectRowAtIndexPath:animated:`,`tableView:didDeselectRowAtIndexPath:`将不会被调用。

# google-maps-api-3 - 如何查找某个半径内的商家数量？

> ID：11886355
> 
> 赞同：2
> 
> 时间：2012-08-09T15:04:43.093
> 
> 标签：google-maps-api-3, google-places-api

鉴于以下情况：

*   某个地方的坐标
*   以米为单位的半径
*   业务类别，又名“支持的地点类型”（如“art_gallery”）

我可以通过以下方式获取该特定区域内所有（仅限 20 个）艺术画廊的详细信息：

```
https://maps.googleapis.com/maps/api/place/search/json?location=51.4918296,-0.1926405&radius=1000&types=art_gallery&sensor=false&key=MY_KEY 
```

由于此 API 的使用仅限于 20 个结果（最近可以进行分页，但速度很慢而且也很有限），诸如“半径 2 英里内有多少餐馆？”之类的问题。不实用。

注意：我不需要企业的详细信息——只需要总数。

**有没有提到的 API 的替代品？使用谷歌 API 或其他？**

* * *

由于我没有得到任何答案（也许是因为除了“否”之外没有其他答案），这里有一个替代问题：

**有没有可以提供静态地图图像的API，显示某个区域的某个类型的所有业务？**即*“伦敦汉普斯特德的室内设计商店”*向我展示：

![在此处输入图像描述](../Images/9dcb16621558450e6fdc5a3952139419.png)

我知道有[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)，但我找不到与 Google Places API 的任何集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:47:52.253

您不能使用 Google Maps Image APIs 来解决您的部分问题吗？

IE：

```
<img src="https://maps.googleapis.com/maps/api/staticmap?center=-15.800513,-47.91378&zoom=11&size=400x150&sensor=false&types=art_gallery"> 
```

为了

![](../Images/62059ac9767331ae8418d73f997f19de.png)

请参阅[https://developers.google.com/maps/documentation/imageapis/](https://developers.google.com/maps/documentation/imageapis/)

# backbone.js - Backbone Marionette ItemView 的事件未使用说明符触发

> ID：11886356
> 
> 赞同：1
> 
> 时间：2012-08-09T15:04:45.127
> 
> 标签：backbone.js, marionette

有以下看法：

```
ContactsApp.SettingsView = Backbone.Marionette.ItemView.extend({
    initialize: function () {
        this.bindTo(this.model, "change", this.modelChanged);
    },
    modelChanged: function (model, value) {
        console.log(this.model.get('search'));
        this.render();
    },
    events: {
        'click .clickable': 'GoTo',
        'keyup input[type=text]': 'search'
    },
    GoTo: function (ev) {
        var dest = $(ev.target).data('dest');
        if (dest == undefined) { return; }
        if (dest === "next") { this.model.nextPage(); return; }
        if (dest === "prev") { this.model.previousPage(); return; }
        this.model.set({ page: dest });
    },
    search :  function (ev) {
        console.log('search');
    },
    template: "#additional-stuff-template"
}); 
```

还有我的模板：

```
<script type="text/template" id="additional-stuff-template">

    <span class="clickable" data-dest="1">First</span>&nbsp;  
    <span class="clickable" data-dest="prev">Previous</span>&nbsp;
     <input type="text" value="{{ page }}"  size="3" /> of {{ pages}} 
      <span class="clickable" data-dest="next">Next</span>&nbsp;
    <span class="clickable" data-dest="{{ pages }}">Last</span> &nbsp;
      Search : <input type="text" class="search" value="{{ search }}"  size="15" /> 
</script> 
```

事件不会触发。如果我改变

```
events: {
    'click .clickable': 'GoTo',
    'keyup input[type=text]': 'search'
}, 
```

至

```
events: {
    'click': 'GoTo',
    'keyup': 'search'
}, 
```

我可以让点击事件运行，但它不仅仅是在跨度上（锚标签也有同样的问题。

我知道这是我正在做的愚蠢的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:56:07.607

事实证明，这不是我做的愚蠢的事情。

事实证明，如果你有

jquery.validate 1.5.5
和 jquery 1.7.2 （可能有其他版本，这只是我所拥有的）

删除 jquery.validate （我没有使用）使它重新开始工作

# ios - 视网膜显示屏上的 iAd 横幅有多大？

> ID：11886358
> 
> 赞同：1
> 
> 时间：2012-08-09T15:04:48.957
> 
> 标签：ios, iad, retina-display

快速搜索为我提供了有关 iAd 横幅尺寸的以下信息。但对于新 iPad 等 Retina 设备，iAd 的高度是 iAd 的两倍，即。132像素？

“对于 iphone，它的纵向高度为 50，横向高度为 32 对于 ipad，纵向高度为 66，横向高度为 66”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:13:38.820

我相当肯定 iAd 横幅在 Retina 设备上**的点数**大小相同，这意味着它们将在屏幕上占据相同的空间，但像素密度更高。[这个 Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/BannerAdvertisements/BannerAdvertisements.html)表明这是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T10:25:03.727

如果您使用 iAd Producer，则 iAd 横幅使用您的显示器的实际尺寸而不是分辨率（这在 xcode 中），这样可以更好地使您的横幅变得强大和良好的分辨率。

实际上 iAd Banner 没有分辨率，而是使用实际的显示尺寸，例如：

iPhone5 的人像是**320x586**，但 Retina 的分辨率是**640x1136px**，在这种情况下 iAd 的尺寸是**320x50**并且在任何显示器大 320 上都是相同的，在 iPad 上也是如此。

如果您想了解更多关于开发者苹果的信息，您可以在此处找到说明和示例代码：[DeveloperApple iAd Guide](https://developer.apple.com/iad/resources/)

希望这可以帮助您理解:)

# iphone - 来自 Cydia 的应用程序的 Settings.bundle 和钥匙串不起作用

> ID：11886362
> 
> 赞同：1
> 
> 时间：2012-08-09T15:04:55.767
> 
> 标签：iphone, objective-c, ios, jailbreak, cydia

我正在开发与 Cydia 一起分发的应用程序。所以它安装在 /Applications 文件夹中，而不是像通常的 AppStore 应用程序那样安装在 /var/mobile/Applications/ 中。而且我认为安装会给我带来一些巨大的问题。起初，用著名的 Apple 的 KeychainItemWrapper 读写钥匙串根本不起作用。另外，我的 settings.bundle 也不起作用。应用程序设置不显示在 Settings.app 中。

当我在模拟器中测试应用程序，甚至直接将其从 Xcode 部署到设备时（它被部署到 /var/mobile/Applications/），一切都像魅力一样。

我尝试将已安装的 .app 移动到 var/mobile/Applications/XXXXXX/myapp.app 并让 mobile:mobile 成为它的所有者。它没有帮助。

有什么解决方案可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:40:11.940

## 设置包

越狱应用程序的设置工作方式略有不同。你需要做一些*类似于*普通的 Settings.bundle 的事情，但还是有区别的。

有关这方面的一些信息，请参见[此处](http://iphonedevwiki.net/index.php/PreferenceLoader)。

[和这里](http://iphonedevwiki.net/index.php/Preferences_specifier_plist)

[和这里](http://iphonedevwiki.net/index.php/PreferenceBundles)

您应该使您的应用程序依赖于`preferenceloader`包，这有助于越狱应用程序管理设置。所以，你的 DEBIAN/control 文件中会有这样的东西：

```
package: com.mycompany.MyApp
Name: MyApp
Version: 2.2-2
Architecture: iphoneos-arm
Depends: preferenceloader
Description: Do something for jailbreak iPhones
... 
```

## 钥匙链

为了使钥匙串适用于我的应用程序，我需要向我的二进制文件添加*权利。*我发现需要哪些权利的方法是首先以正常方式构建应用程序（不是越狱应用程序，只是使用 Xcode 的普通 3rd 方应用程序商店应用程序）。然后，我检查了 Xcode 构建的二进制文件中的权利：

```
ldid -e MyApp.app/MyApp 
```

然后将这些权利拼接到一个新的 entitlements.xml 文件中。[有关应用权利的示例，请参见此处](https://stackoverflow.com/a/14885266/119114)。我相信您的应用程序的权利应该是这样的：

```
 <key>application-identifier</key>
  <string>L44W4W8ABC.com.mycompany.MyApp</string>
  <key>aps-environment</key>
  <string>development</string>
  <key>com.apple.developer.team-identifier</key>
  <string>L44W4W8ABC</string> 
```

这种添加权利的方法可能不是必需的。有关其他选项，请参阅您的问题下方的评论。但是，我出于其他原因添加了其他权利，并且无法通过 Xcode 做到这一点。

# html - 如何使用 CSS3 转换 DIV-Container

> ID：11886363
> 
> 赞同：0
> 
> 时间：2012-08-09T15:04:57.603
> 
> 标签：html, css

我尝试像下图那样转换我的 div 容器。

![CSS 透视图](../Images/ecd8f1a02028f5b5a53b4d8b732a507f.png)

左边是一个普通的 div 容器，漆成黑色。右边是我想要的容器。

你知道如何在 css3 中解决这个问题吗？我在 css3 中读到了一些关于“多边形”属性的内容，但我也听说这个属性被删除了。

编辑：当内容在盒子里时，它会被弄脏 - 盒子就像“落在后面”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:10:11.120

不久前，我在 css-tricks.com 上找到了[一篇关于此的文章。](http://css-tricks.com/examples/ShapesOfCSS/)这可能有效：

```
#trapezoid {
    border-bottom: 100px solid red;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    height: 0;
    width: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:09:58.450

```
 #trapezoid { 
 border-bottom: 100px solid black;
 border-left: 50px solid transparent; 
 border-right: 50px solid transparent; 
 height: 0; width: 100px; } 
```

[在这里](http://css-tricks.com/examples/ShapesOfCSS/)查看更多形状和技巧

# android - 类似于 Google+ 提要详细信息中的滚动视图

> ID：11886364
> 
> 赞同：0
> 
> 时间：2012-08-09T15:05:11.367
> 
> 标签：android, layout, scrollview, google-plus

我想做`ScrollView`滚动时带有信息数据的底部视图与上面的照片重叠（照片保持在同一个地方），以及在 google+ 应用程序中的提要详细信息。抱歉英语不好。谢谢

想象我想要的：

[加载详细信息](https://www.dropbox.com/s/qfbbmnlamd4gt61/Screenshot_2012-08-09-16-52-01.png)
[时 滚动时](https://www.dropbox.com/s/qvajjuqhyi0052r/Screenshot_2012-08-09-16-49-21.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:01:31.467

您可以在背景中使用 an`ImageView`作为顶部图像，然后`ScrollView`使用`RelativeLayout`或将 a 放在其顶部`FrameLayout`。然后在里面`ScrollView`你可以使用一个垂直`LinearLayout`，或者使用一个`Space`作为列表中的第一个项目，并使其大小与 相同`ImageView`，或者你可以简单地将第一个项目的边距设置为具有与`ImageView`. _

# c++ - 将 Boost 与 getter 和 setter 一起使用？

> ID：11886368
> 
> 赞同：1
> 
> 时间：2012-08-09T15:05:18.283
> 
> 标签：c++, boost

我想序列化一个我没有写权限的类。即，我无法更改源文件或头文件。此外，大多数字段都是私有的，可以通过 getter 和 setter 函数访问。

谁能告诉我创建不同的保存和加载功能是否是个好主意（如[boost 教程](http://www.boost.org/doc/libs/1_36_0/libs/serialization/doc/index.html)中所述）...

```
template<class Archive>
void save(Archive & ar, gps_position &g, const unsigned int version) const
{
    // note, version is always the latest when saving
    ar  & g.deg;
    ar  & g.min;
}
template<class Archive>
void load(Archive & ar, gps_position &g, const unsigned int version)
{
    if(version > 0)
        ar & g.deg;
        ar & g.min;
}
BOOST_SERIALIZATION_SPLIT_MEMBER() 
```

...并使用公共功能：

```
ar & g.getDeg(); 
```

代替

```
ar & g.deg; 
```

（类似于二传手）？？我真的是 C++ 和序列化的新手，我非常感谢任何提示！

最好的，亚历克斯

编辑：添加了提升教程的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:26:27.957

这是OP正在谈论的教程：

[http://www.boost.org/doc/libs/1_50_0/libs/serialization/doc/tutorial.html](http://www.boost.org/doc/libs/1_50_0/libs/serialization/doc/tutorial.html)

我发现有时需要使用拆分功能，并且在必要时使用它并不是一个坏主意。使用单个`void serialize(...)`函数非常方便，但是当我尝试序列化的类无法更改时（就像您遇到的那样），我不得不将它们分开。我绝对不会回避分裂`void serialize(...)`成`void save(...)`，`void load(...)`如果这就是它要采取的。如果我没记错的话，我不得不分成 2 个函数，因为`__gnu_cxx::hash_map`几年前我支持的功能不是很好，所以我做了一些修改以使数据序列化。

该[教程](http://www.boost.org/doc/libs/1_50_0/libs/serialization/doc/tutorial.html)可以帮助您入门，但它有点缺乏，每次使用 Boost.Serialization 时都会遇到一些困难。这是一个方便使用的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:24:02.450

```
template<class Archive>
void load(Archive & ar, gps_position &g, const unsigned int version)
{
    if(version > 0)
    {
        int d = 0;
        ar & d;
        g.setDeg(d);
        int m = 0;
        ar & m;
        g.setMin(m);
    }
} 
```

像这样的东西。声明变量 -> 从存档中读取 -> 通过调用 setter 函数设置为成员。

# teamcity - TeamCity 自动结账目录（工作目录）清理

> ID：11886372
> 
> 赞同：1
> 
> 时间：2012-08-09T15:05:35.863
> 
> 标签：teamcity

每个干净的结帐 TeamCity 都会`<Agent Work Directory>/<VCS settings hash code>`为构建创建目录。[自动签出目录清理](http://confluence.jetbrains.net/display/TCD65/Build+Checkout+Directory#BuildCheckoutDirectory-EnsuringFreeDiskSpaceBeforetheBuild)
是可行的，可以指定规则来清理旧的构建目录。

在创建新的构建目录之后，如何调整代理以清理旧的构建目录，而不是在工作目录中维护构建历史？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:51:54.717

你的答案在你的问题中是对的！;)

[自动结帐目录清理](http://confluence.jetbrains.net/display/TCD65/Build+Checkout+Directory)部分说明：

> 可以通过以下任一方式指定新值（以小时为单位）来更改自动目录过期的时间范围：
> 
> *   buildAgent.properties 文件中的“system.teamcity.agent.build.checkoutDir.expireHours”代理属性；
> *   'system.teamcity.build.checkoutDir.expireHours' 构建配置属性
> 
> **将该属性设置为“0”将导致在构建完成后立即删除检出目录。**

# android - Android：将文件从 PC 复制到 android 设备（以编程方式）

> ID：11886374
> 
> 赞同：3
> 
> 时间：2012-08-09T15:05:40.463
> 
> 标签：android, adb

我需要将 sqlite DB 文件复制到 android 设备上。连同其他文件。

这是由一个delphi App来完成的。Ofc 我可以调出控制台命令。

所以基本上，我可以复制到设备并从设备中获取文件吗？

现在，我有 adb 选项。

```
 C:\Users\Documents>adb devices
 List of devices attached
 4527103425FC4D7 device
 HT25ZW127890    device

C:\Users\Documents>adb push -s HT25ZW127890 test.txt /sdcard/test.txt 
```

但不知道如何定位我的设备。它只是列出了所有选项，就好像我输入了 adb。如果没有 -s 位，它表示连接了多个设备。我究竟做错了什么？加...

另外：这是 adb -> Android 调试桥。需要设置**调试模式**。

当然，这不是实现应用程序的理想方式，需要手机处于调试模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:15:08.317

[http://developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)

此文本表明您对“-s”和“push”关键字的位置错误。

> 用法是：adb [-d|-e|-s <serialNumber>] <command>

# javascript - 将表注入特定类

> ID：11886379
> 
> 赞同：0
> 
> 时间：2012-08-09T15:06:09.180
> 
> 标签：javascript, jquery

当我生成此表时，它是在执行其余代码后生成的。

我希望能够将代码生成到像“.container”这样的特定类中。

我该怎么做？

```
var listOfWords = [];
var rndWord = [];
var counter = 0;
var ul = document.getElementById("wordlist");
var i;

for (i = 0; i < ul.children.length; ++i) {

    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
    });
}

var chosenWords = [];
var copylist = listOfWords.slice();

for (var x = 0; x < 6; x++) {
    var rand = Math.floor(Math.random() * (copylist.length));
    chosenWords.push(copylist[rand].name);
    copylist.splice(rand, 1);
    if (chosenWords.length < 12) {
    chosenWords.push('   ');
   }

}

var shuffledWords = [];
shuffledWords = chosenWords.sort(function() {
    return 0.5 - Math.random()
});

var guesses = {};
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        guesses[word] = [];

         for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop-box').attr('data-word', word).attr('data-letter',         word[k]);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

我想改变这段代码的底线

```
document.body.appendChild(tbl); 
```

至

```
document.container.appendChild(tbl); 
```

会这样做，但它没有。

有谁知道如何将这张桌子放入容器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:15:57.197

如果要将表格添加到具有特定 css 类的元素中，可以执行以下操作。

```
$(".container").append(tbl); 
```

# c# - 由于使用“嵌入式资源”嵌入视图，Visual Studio 锁定 DLL

> ID：11886380
> 
> 赞同：0
> 
> 时间：2012-08-09T15:06:11.383
> 
> 标签：c#, asp.net-mvc, dll, visual-studio-2012

PROJECT A 包含一个 View ，我们称之为 View1.ascx 在属性窗口中标记为“Embedded Resource”

PROJECT A 和 PROJECT B 和 C 都使用自定义资源提供程序从 PROJECTA.DLL 加载该 view1

这样我就可以跨项目重用我的视图。

可悲的是，这会导致 Visual Studio 在每次更改 PROJECTA.dll 后第一次无法构建 PROJECT B 或 C

```
"Error  12  Could not copy "C:\GIT\PROJECTA\PROJECTA\bin\PROJECTA.dll" to "bin\PROJECTA.dll". Exceeded retry count of 10\. Failed." 
```

有什么办法可以使这项工作？或者我应该以某种方式将所有“重用”视图移动到单独的程序集中？视图使用来自 PROJECT A 的类，所以这就是我将它们保留在 PROJECT A 中的原因

说清楚点：第二次构建它通常可以工作，并且代码和视图都可以正常工作，这只是在等待 10 秒以使第一次构建尝试失败，这真的是非常浪费时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:15:44.663

显然，我的 assemblyresourceprovider 使用了 AssemblyResourceVirtualFile:VirtualFile oobject，它从 Assembly.LoadFile 加载我的 dll，而不是使用推荐的方式在内存中加载 dll，如下所述：http: [//fzysqr.com/2010/04/26/asp-net -mvc2-plugin-architecture-tutorial/](http://fzysqr.com/2010/04/26/asp-net-mvc2-plugin-architecture-tutorial/) 我把旧代码行留在注释中，让你们看看问题出在哪里

```
public override System.IO.Stream Open()
{
    string[] parts = path.Split('/');
    string assemblyName = parts[2];
    string resourceName = parts[3];

    assemblyName = Path.Combine(HttpRuntime.BinDirectory, assemblyName);
    byte[] assemblyBytes = File.ReadAllBytes(assemblyName);
    System.Reflection.Assembly assembly = Assembly.Load(assemblyBytes);
    /*System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFile(assemblyName);*/
    if (assembly != null)
    {
        Stream resourceStream = assembly.GetManifestResourceStream(resourceName);
        return resourceStream;
    }
    return null;
} 
```

# php - 如何从跨域http请求中获取特定内容

> ID：11886383
> 
> 赞同：0
> 
> 时间：2012-08-09T15:06:14.160
> 
> 标签：php, jquery, url

有一个荷兰新闻网站：[nu.nl](http://www.nu.nl/) 我很想获得位于她上方的第一个 url 标题：

```
<h3 class="hdtitle">
          <a style="" onclick="NU.AT.internalLink(this, event);" xtclib="position1_article_1" href="/buitenland/2880252/griekse-hotels-ontruimd-bosbranden.html">
            Griekse hotels ontruimd om bosbranden            <img src="/images/i18n/nl/slideshow/bt_fotograaf.png" class="vidlinkicon" alt="">          </a>
        </h3> 
```

所以我的问题是如何获得这个网址？我可以用 Jquery 做到这一点吗？我认为不是，因为它不在我的服务器上。所以也许我必须使用PHP？我从哪说起呢...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:24:07.747

## 经过测试和工作

因为[http://www.nu.nl](http://www.nu.nl)不是你的站点，所以可以使用代理的方式做***跨域*** ，否则会报这种错误：`GET``PHP`

> XMLHttpRequest 无法加载[http://www.nu.nl/](http://www.nu.nl/)。Access-Control-Allow-Origin 不允许来源 [http://yourdomain.com 。](http://yourdomain.com)

首先在**PHP**端的服务器中使用此文件：

**proxy.php（更新）**

```
<?php
if(isset($_GET['site'])){
  $f = fopen($_GET['site'], 'r');
  $html = '';
  while (!feof($f)) {
    $html .= fread($f, 24000);
  }
  fclose($f);
  echo $html;
}
?> 
```

**现在，在使用jQuery**的 javascript 端，您可以执行以下操作：

*（只是要知道我使用的是`prop();`因为我使用的是 jQuery **1.7.2**版本。所以，如果您使用的是**1.6.x**之前的版本，请尝试`attr();`改用）*

```
$(function(){

   var site = 'http://www.nu.nl';

   $.get('proxy.php', { site:site }, function(data){

      var href = $(data).find('.hdtitle').first().children(':first-child').prop('href');
      var url = href.split('/');
      href = href.replace(url[2], 'nu.nl');

      // Put the 'href' inside your div as a link
      $('#myDiv').html('<a href="' + href + '" target="_blank">' + href + '</a>');

   }, 'html');

}); 
```

如您所见，该请求在您的域中，但这是一件棘手的事情，因此您不会`Access-Control-Allow-Origin`再次收到错误！

* * *

## 更新

如果您想获得`href`您在评论中所写的所有标题，您可以执行以下操作：

***只需像这样更改 jQuery 代码...***

```
$(function(){

   var site = 'http://www.nu.nl';

   $.get('proxy.php', { site:site }, function(data){

        // get all html headlines
        headlines = $(data).find('.hdtitle');

        // get 'href' attribute of each headline and put it inside div
        headlines.map(function(elem, index){ 
            href = $(this).children(':first-child').prop('href');
            url = href.split('/');
            href = href.replace(url[2], 'nu.nl');
            $('#myDiv').append('<a href="' + href + '" target="_blank">' + href + '</a><br/>');
        });

   }, 'html');

}); 
```

**并使用更新`proxy.php`的文件（对于这两种情况，1 个或所有标题）。**

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:18:29.843

我会建议 RSS，但不幸的是，您要查找的标题似乎没有出现在那里。

```
<?

$f = fopen('http://www.nu.nl', 'r');
$html = '';
while(strpos($html, 'position1_article_1') === FALSE)
    $html .= fread($f, 24000);
fclose($f);
$pos = strpos($html, 'position1_article_1');
$urlleft = substr($html, $pos + 27);
$url = substr($urlleft, 0, strpos($urlleft, '"'));
echo 'http://www.nu.nl' . $url;

?> 
```

输出：[http ://www.nu.nl/buitenland/2880252/greekse-hotels-ontruimd-bosbranden.html](http://www.nu.nl/buitenland/2880252/griekse-hotels-ontruimd-bosbranden.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:16:38.330

您可以使用[simplehtmldom 库](http://simplehtmldom.sourceforge.net/)来获取该**链接**

类似的东西

```
$html = file_get_html('website_link');
echo $html->getElementById("hdtitle")->childNodes(1)->getAttribute('href'); 
```

[在这里](http://simplehtmldom.sourceforge.net/manual.htm)阅读更多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:14:23.763

使用 cURL 检索页面。然后，使用以下函数解析您提供的字符串；

```
preg_match("/<a.*?href\=\"(.*?)\".*?>/is",$text,$matches); 
```

结果 URL 将位于 $matches 数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:07:50.877

如果你想设置一个 jQuery 机器人通过浏览器抓取页面（谷歌 Chrome 扩展允许这个功能）：

```
// print out the found anchor link's href attribute
console.log($('.hdtitle').find('a').attr('href')); 
```

如果你想使用 PHP，你需要为这个`href`链接抓取页面。使用诸如此类的库`SimpleTest`来完成此操作。定期抓取的最佳方法是将您的 PHP 脚本也链接到 a `cronjob`。

**简单测试：[http :](http://www.lastcraft.com/browser_documentation.php) **//www.lastcraft.com/browser_documentation.php****

 ****cronjob**： http: [//net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

祝你好运！**

# entity-framework-4 - TPH 继承映射使用 nchar (N'value') 而不是 char ('value') 作为鉴别器列值

> ID：11886387
> 
> 赞同：3
> 
> 时间：2012-08-09T15:06:42.500
> 
> 标签：entity-framework-4, ef-code-first

我正在使用现有数据库并使用 EF 4.3 Code First。我有一个看起来像这样的实体层次结构，其中 Note 是基类：

```
Note
  - CompanyNote
  - OrderNote
  - etc 
```

我将[TPH](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)与具有以下映射的鉴别器列一起使用：

```
Map<CompanyNote>(t => t.Requires("type").HasValue("company"));
Map<OrderNote>(t => t.Requires("type").HasValue("order")); 
```

数据库类型`type`是`char(18)`. EF 生成 sql 好像它的`nchar`：

```
SELECT /* columns */
FROM [dbo].[notes] AS [Extent1]
WHERE [Extent1].[type] = N'company' 
```

这`N`是一个问题，因为该表有数千行，它阻止 SQL 使用索引。我需要查询才能这样看：

```
SELECT /* columns */
FROM [dbo].[notes] AS [Extent1]
WHERE [Extent1].[type] = 'company' 
```

这是我到目前为止所尝试的：

*   添加`Type`属性并将其映射到 `Property(t => t.Type).IsFixedLength().HasMaxLength(18).IsUnicode(false);`
*   将列配置添加到继承映射中 `Map<CompanyNote>(t => t.Requires("type").HasValue("company").IsFixedLength().HasMaxLength(18).IsUnicode(false));`

两者都没有改变。不幸的是，我无法将数据库列类型更改为`nchar`.

**如何告诉 Entity Framework 鉴别器列是 type `char`？**

**更新：这是一个完整的例子**

```
[TestFixture]
public class TphMappingFixture
{
    [Test]
    public void CompanyNotesQueryShouldNotHaveUnicodeDiscriminator()
    {
        string sql;
        using (TphTestContext context = new TphTestContext())
        {
            sql = context.CompanyNotes.ToString();
        }

        Console.WriteLine(sql);

      /* sql is:
        SELECT 
        '0X0X' AS [C1], 
        [Extent1].[id] AS [id], 
        [Extent1].[text] AS [text]
        FROM [dbo].[notes] AS [Extent1]
        WHERE [Extent1].[type] = N'company'
      */

        Assert.That(!sql.Contains("N'company'"));
    }
}

public abstract class TphTestNote
{
    public int Id { get; set; }
    public string Text { get; set; }
}

public class TphTestCompanyNote : TphTestNote
{
}

public class TphTestOrderNote : TphTestNote
{
}

public class TphTestNoteMap : EntityTypeConfiguration<TphTestNote>
{
    public TphTestNoteMap()
    {
        HasKey(t => t.Id);

        Property(t => t.Text)
            .HasMaxLength(254)
            .IsUnicode(false);

        ToTable("notes");

        Property(t => t.Id).HasColumnName("id");
        Property(t => t.Text).HasColumnName("text");

        Map<TphTestCompanyNote>(t => t.Requires("type").HasValue("company").IsUnicode(false));
        Map<TphTestOrderNote>(t => t.Requires("type").HasValue("order").IsUnicode(false));
    }
}

public class TphTestContext : DbContext
{
    static TphTestContext()
    {
        Database.SetInitializer<TphTestContext>(null);
    }

    public DbSet<TphTestCompanyNote> CompanyNotes { get; set; }
    public DbSet<TphTestOrderNote> OrderNotes { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new TphTestNoteMap());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:06:51.183

我仍然不确定为什么我看到的结果与@Slauma 不同，但我终于找到了适合我的东西。`char`我在继承映射中明确地将列类型设置为。

```
Map<TphTestCompanyNote>(t => t.Requires("type")
                              .HasValue("company")
                              .HasColumnType("char"));

Map<TphTestOrderNote>(t => t.Requires("type")
                            .HasValue("order")
                            .HasColumnType("char")); 
```

以及生成的 SQL：

```
SELECT 
'0X0X' AS [C1], 
[Extent1].[id] AS [id], 
[Extent1].[text] AS [text]
FROM [dbo].[notes] AS [Extent1]
WHERE [Extent1].[type] = 'company' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:19:19.487

我无法在 SQL 查询中重现 Unicode 字符串的使用。测试应用程序（带有 EF 4.3.1 的控制台应用程序）：

```
using System;
using System.Data.Entity;
using System.Linq;

namespace EF43TPH
{
    public abstract class Note
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public class CompanyNote : Note
    {
        public string ExtendedName { get; set; }
    }

    public class OrderNote : Note
    {
        public string AnotherExtendedName { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<Note> Notes { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<CompanyNote>()
                .Map<CompanyNote>(t => t.Requires("type").HasValue("company"));

            modelBuilder.Entity<OrderNote>()
                .Map<OrderNote>(t => t.Requires("type").HasValue("order"));
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());

            using (var ctx = new MyContext())
            {
                try
                {
                    var query = ctx.Notes.OfType<CompanyNote>();
                    var queryString = query.ToString();
                }
                catch (Exception e)
                {
                    throw;
                }
            }
        }
    }
} 
```

我输入的 SQL 查询`queryString`是：

```
SELECT 
'0X0X' AS [C1], 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[ExtendedName] AS [ExtendedName]
FROM [dbo].[Notes] AS [Extent1]
WHERE [Extent1].[type] = 'company' 
```

这个测试和你的代码有什么不同？

# html - css：图像在父 div 的边界上。如何在 div 中的图像上方制作文本？

> ID：11886390
> 
> 赞同：0
> 
> 时间：2012-08-09T15:06:47.213
> 
> 标签：html, css, image, border, margin

我有一个 10 像素厚边框的 div。在 div 里面有一张图片和一些文字。 **图片在边框上略微移动（必须，应该在边框上方）**。

```
<style>
#main
{
    border:10px solid red;
    width:400px;
}
.img-to-border
{
    margin-left:-10px;
    margin-top:-10px;
    position:relative;
    float:left;
}
.text{
    border:1px solid blue;
    text-align:right;
    padding-right:30px;
}
</style>

    <div id="main">
        <img src="https://www.google.by/logos/2012/slalom_canoe-2012-sr.png" alt="" class="img-to-border">
        <p class="text">DCBA padding-right of text is always 30px </p>
    </div> 
```

这是一个工作代码： [jsFiddle](http://jsfiddle.net/85Zk5/) 问题是如果文本长一到四个符号，它就会掉下来。但是，我希望它高于图像（上面我的意思是 z 索引，而不是从屏幕的上侧到屏幕的下侧）。PS padding-right 总是 30px。因此，它与您在计算器上键入数字的方式完全相同 - 从右到左并在图像上方，在一行中。我的例子该怎么做？

再次抱歉，我重复一遍，**图片在边框上略微移动（必须，应该在边框上方）**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:15:24.047

我无法正确解决您的问题。我尝试了 1 到很多字母，文本总是放在同一行，所以它是图像。如果您对图像本身有任何问题，您可以继续

```
#main {position: relative;} /* Keep it just the same */

img {
   position: absolute;
   top: -10px; left: -10px;
} 
```

该图像不会在页面上占据任何位置，但仍然可见并且文本框没有颠簸。

这是一个工作小提琴：http: [//jsfiddle.net/BDFJM/](http://jsfiddle.net/BDFJM/)

对不起，如果我把你的问题弄错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:13:56.313

您可以制作`#main` `position:relative`图像`position:absolute`，以便文本覆盖它。在这里查看更新的jsfiddle [http://jsfiddle.net/85Zk5/2/](http://jsfiddle.net/85Zk5/2/) （其实这种方式不需要float `.img-to-border`，可以从jsfiddle中去掉应该是一样的）

# bash - 计算每次出现的 printf 参数数量的 Linux 脚本

> ID：11886392
> 
> 赞同：0
> 
> 时间：2012-08-09T15:07:00.257
> 
> 标签：bash, shell, format, printf

我想在 sh 中编写一个脚本，对于每个给定的文件，对于每个 printf 出现，它将计算 % 的数量（或者 printf 函数接收的参数数量）并将 printf 重命名为 printfX，当 X 是那个号码。

我被卡住了，因为 printf 没有以新行结尾......

例如

```
printf("hello "
       "world %d\n", 1); 
```

应该返回

```
printf1("hello "
       "world %d\n", 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:23:08.473

对此没有简单的（= 脚本中的）解决方案，因为要解析 C 代码，您需要一个[LL(1) 解析器](https://en.wikipedia.org/wiki/LL_parser)。

但是您可以以相同的方式格式化所有代码，以便您的脚本可以处理不同的情况。所以你首先应该做的是找到所有有`printf`但没有的行`);`：

```
grep "printf" ...files... | grep -v ");" 
```

然后修复这些文件，直到您不再获得任何输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:18:15.397

作为起点，一个简单的 Perl 脚本用于计算逗号或右括号前双引号中 % 字符的数量。

```
perl -0777pe 's/printf\s*\(\s*\"((?:[^"]*\"\s*\")*[^"]*)\"\s*([,)]\s*)/
  my ($f, $c, $t) = ($1, $1, $2);
  sprintf("printf%i(\"%s\"%s", ($c =~ tr-%--), $f, $t) /ges'  files ... 
```

这将替换引用的字符串、注释等；它会抓住`fprintf`and`sprintf`和`myownsacredprintf`as well as plain `printf`。

# oracle - WHERE 子句中的 Oracle 标量函数导致性能不佳

> ID：11886396
> 
> 赞同：0
> 
> 时间：2012-08-09T15:07:15.160
> 
> 标签：oracle, oracle10g

我编写了一个标量函数 ( `DYNAMIC_DATE`)，它将文本值转换为日期/时间。例如，`DYANMIC_DATE('T-1')`(T-1 = today - 1 = 'yesterday') 返回`08-AUG-2012 00:00:00`。它还接受日期字符串：`DYNAMIC_DATE('10/10/1974')`.

该函数使用`CASE`语句来解析唯一参数并计算相对于`sysdate`.

虽然它不使用其模式中的任何表，但它确实使用`TABLE`类型来存储日期格式字符串：

```
TYPE VARCHAR_TABLE IS TABLE OF VARCHAR2(10);
formats VARCHAR_TABLE := VARCHAR_TABLE ('mm/dd/rrrr','mm-dd-rrrr','rrrr/mm/dd','rrrr-mm-dd'); 
```

当我在`SELECT`子句中使用该函数时，查询会在 < 1 秒内返回：

```
SELECT  DYNAMIC_DATE('MB-1') START_DATE, DYNAMIC_DATE('ME-1') END_DATE
FROM    DUAL 
```

如果我将它用于我们的日期维度表（总共 91311 条记录），查询将在 < 1 秒内完成：

```
SELECT  count(1)
from    date_dimension
where   calendar_dt between DYNAMIC_DATE('MB-1') and  DYNAMIC_DATE('ME-1') 
```

但是，如果将函数用于更大的表（26,301,317 条记录），则其他函数会出现问题：

```
/*
cost: 148,840
records: 151,885
time: ~20 minutes
*/
SELECT  count(1)
FROM    ORDERS ord
WHERE   trunc(ord.ordering_date) between DYNAMIC_DATE('mb-1') and DYNAMIC_DATE('me-1') 
```

但是，使用“硬编码”日期的相同查询返回得相当快：

```
/*
cost: 144,257
records: 151,885
time: 62 seconds
*/
SELECT  count(1)
FROM    ORDERS ord
WHERE   trunc(ord.ordering_date) between to_date('01-JUL-2012','dd-mon-yyyy') AND to_date('31-JUL-2012','dd-mon-yyyy') 
```

供应商的香草安装不包括`ORDERING_DATE`现场索引。

这两个查询的解释计划是相似的：

带功能： ![使用功能](../Images/fb0ae37905b3824c04a38552ae8d12d9.png)

带有硬编码日期： ![硬编码日期](../Images/23fbdf49d624905373cc63026beb5a3b.png)

*   子句 中是否`DYNAMIC_DATE`重复调用函数？`WHERE`
*   还有什么可以解释这种差异？

** 编辑 **

`NONUNIQUE`向 ORDERS 表添加了索引。两个查询都在 < 1 秒内执行。两种方案是相同的（方法），但具有功能的方案成本更低。

我`DETERMINISTIC`从函数中删除了关键字；查询在 < 1 秒内执行。

*   问题真的与函数有关还是与表格有关？
*   3年后，当这个表更大时，如果我不包含`DETERMINISTIC`关键字，查询性能会受到影响吗？
*   `DETERMINISTIC`关键字会对函数的结果有任何影响吗？如果我`DYNAMIC_DATE('T-1')`明天运行，我会得到与今天运行相同的结果（08/09/2012）吗？如果是这样，这种方法将行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:28:09.090

我猜问题不在于你的功能。尝试创建一个基于函数的索引`trunc(ord.ordering_date)`并查看解释计划。

```
 CREATE INDEX ord_date_index ON ord(trunc(ord.ordering_date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:20:42.610

如果计划的步骤相同，那么完成的工作总量应该相同。如果您跟踪会话（类似于`set autotrace on`SQL*Plus 中的简单操作或更复杂的操作，例如事件 10046 跟踪），或者`DBA_HIST_SQLSTAT`假设您已获得 AWR 表的许可访问权限，您是否看到（大致）相同数量的逻辑两个查询的 I/O 和 CPU 消耗？您看到的运行时差异是否可能是您运行第二个查询时缓存数据的结果？

# android - Android ListActivity 自定义字体

> ID：11886397
> 
> 赞同：0
> 
> 时间：2012-08-09T15:07:19.303
> 
> 标签：android, listview, android-activity, listactivity, typeface

我有几个 ListActivities，我需要为每一行设置从资产加载的自定义字体。在 TextView 中这不是问题，但我面临访问列表项的问题。ListActivity 似乎没有方法 *.setTypeface()，所以我走到了死胡同。以前有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:02:07.037

您没有在列表视图上设置字体。您需要在 textview 上设置字体。因此，为您的列表视图使用自定义数组适配器，扩展您自己的包含文本视图的自定义视图，然后在该文本视图上设置字体。

按照尼克所说的，谷歌“自定义安卓阵列适配器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:56:38.403

你是如何填充你的 ListView 的？您很可能正在使用一种通用的 ListAdapter 实现，它似乎只提供基本功能，而没有提供太多其他功能。

我的建议是设计您自己的 View 以在您的 ListView 中使用，以及您自己的 ArrayAdapter 实现，从它的 getView(...) 方法中配置字体等。如果你用谷歌搜索“custom android ArrayAdapter”，你会发现很多关于这个主题的教程。

# matlab - 从多元高斯采样时缩放

> ID：11886410
> 
> 赞同：1
> 
> 时间：2012-08-09T15:07:57.243
> 
> 标签：matlab, covariance, gaussian

我有一个数据矩阵`A`（列之间的依赖关系），我估计了它的协方差矩阵`S`。我现在想用这个协方差矩阵来模拟一个新的矩阵`A_sim`。因为我假设 的基础数据生成器`A`是高斯的，所以我可以简单地从`S`. 我在matlab中这样做如下：

```
A_sim = randn(size(A))*chol(S); 
```

但是， in 的值`A_sim`远大于 in `A`。如果我缩小`S`100 倍，`A_sim`看起来会好很多。我现在正在寻找一种有原则的方法来确定这个比例因子。任何人都可以提供建议或建议可能有用的文献吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:41:45.963

Matlab 有函数[mvnrnd](http://www.mathworks.com/help/toolbox/stats/mvnrnd.html)为你生成多元随机变量。

# shell - 如何在每次使用 shell 变量时对其进行评估

> ID：11886412
> 
> 赞同：4
> 
> 时间：2012-08-09T15:07:59.207
> 
> 标签：shell, interpolation, zsh

与我遇到的类似问题有关： [zsh not re-computing my shell prompt](https://stackoverflow.com/questions/11877551/zsh-not-re-computing-my-shell-prompt)

有没有办法定义一个 shell 变量，以便每次调用它时计算它的值？

例如，如果我这样做：

```
my_date="today is $(date)" 
```

my_date 中的值是：今天是 Thu Aug 9 08:06:18 PDT 2012

但我希望每次使用 my_date 时都执行日期。在链接的帖子中，有人建议将值放在单引号中：

```
my_date='today is $(date)' 
```

但从不评估任何东西，它只是字面上保持在 $(date)。

我正在使用 zsh 5.0.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:29:06.287

那是不可能的。改用函数：

```
my_date() {
    echo "today is $(date)"
}

# use it
echo "$(my_date)" 
```

注意：这是 bash 语法；您的 shell 可能使用稍微不同的语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T16:50:21.183

您应该在第一种情况下说过 PS1：与变量扩展相比，提示扩展非常不同。告诉你应该使用`PS1='$(command)'`单引号的人是对的，但他错过了一点：你必须这样做

```
setopt promptsubst 
```

在提示符下启用命令替换（以及其他一些替换）。

不管是在设置PS1之前还是之后设置，都应该在显示提示之前发生，每次PS1展开到实际提示时都会检查选项。

对于非提示变量@Aaron Digulla 完全正确，您无法拥有可能在后续评估中改变其值的变量。但是在 zsh 中，您还可以做两件事：编写一个模块（用 C 语言！）并使用`${(%%)VAR}`它将对给定变量进行提示扩展（注意：它确实尊重 promptsubst 和其他两个 prompt* 选项）。还有更多有用的`${(...)}`扩展标志。

# php - 根据 Wordpress 中的类别显示帖子缩略图？

> ID：11886414
> 
> 赞同：0
> 
> 时间：2012-08-09T15:08:15.150
> 
> 标签：php, wordpress

是否可以根据类别 ID 显示特定的帖子缩略图，如下所示：

```
<?php if ( has_post_thumbnail() ) {

      if ( cat = 2 ) {
      echo '<img src="image1.jpg" width="" height="" class="live-holder-img" />';
      } elseif( cat = 3 ) {
      echo '<img src="image2.jpg" width="" height="" class="live-holder-img" />';
      } else {
      echo '<img src="default.jpg" width="" height="" class="default" />'
      }

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:49:03.397

您可能需要查看类别模板：[http ://codex.wordpress.org/Category_Templates](http://codex.wordpress.org/Category_Templates)

快速解决方案是这样的：

```
if (is_category('1')) {
    echo '<img src="image1.jpg" width="" height="" class="live-holder-img" />';
} else if (is_category('2')) {
    echo '<img src="image2.jpg" width="" height="" class="live-holder-img" />';
} else {
    echo '<img src="default.jpg" width="" height="" class="default" />';
}

//you can also do this by name
if (is_category('Category A')) {
    echo '<img src="image1.jpg" width="" height="" class="live-holder-img" />';
} else if (is_category('Category B')) {
    echo '<img src="image2.jpg" width="" height="" class="live-holder-img" />';
} else {
    echo '<img src="default.jpg" width="" height="" class="default" />';
} 
```

is_category 函数参考：[http ://codex.wordpress.org/Function_Reference/is_category](http://codex.wordpress.org/Function_Reference/is_category)

# .net - 非抽象类不提供抽象方法的实现

> ID：11886415
> 
> 赞同：0
> 
> 时间：2012-08-09T15:08:20.447
> 
> 标签：.net, methods, abstract-class, base-class, delphi-prism

我有一个像下面这样的基类。

```
TMakerObject = class
...
public
    method Clone:TControlObject; virtual; abstract;
end; 
```

我想让方法克隆抽象。因此，基类不需要实现或定义此方法。但是，子类可以定义自己的克隆方法。

但是编译器一直给我这个错误——**非抽象类不提供抽象方法的实现。**

如果是这样，那么这是如何完成的？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:36:27.983

（这不是 Delphi 特有的）通过说方法是`abstract`说基类*没有*为它定义实现。因此，对于语言的行为方式，有两种选择：

*   您可以将基类设置为非抽象类，并且在基类实例上调用此方法在执行时失败，并出现类似于“方法未实现”的错误；或者
*   不允许一个类包含一个抽象方法，除非它本身也被声明为抽象的，这样它的实例就不能存在，并且上述问题永远不会发生。

语言设计者偏爱编译时问题而不是执行时问题，选择了第二种选择。

# mysql - 了解 MySql Auto_Increment

> ID：11886416
> 
> 赞同：2
> 
> 时间：2012-08-09T15:08:23.103
> 
> 标签：mysql, auto-increment

我在表中有一个自动递增的列。让我们称之为`employee_id`。

设初始值为 1，每次插入加 1。插入 10 行后，自动递增的值变为 10（`employee_id`为 10）。

现在，如果我手动插入第 11 行，员工 ID 为 15 ，然后允许 MySql`AUTO_INCREMENT`接管，下一个自动递增值是 11 还是 16 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:11:51.820

它将是 16，bcs MySQL 将在每次插入/更新操作后更新 AUTO_INCREMENT 计数器的值。这适用于最流行的表引擎 MyISAM 和 InnoDB：

*   [http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)
*   [http://dev.mysql.com/doc/refman/5.5/en/innodb-auto-increment-handling.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-auto-increment-handling.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:35:55.253

我在 localhost 上尝试过，在手动插入第 15 行 ( `employee_id=10, name=John`) 后，它通过获取`max auto_increment id`.

表的存储引擎是：MyISAM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:15:51.267

下一个 Auto_increament 值将是 16。因为 Auto_increament 将在每次插入/删除操作后更新。

# javascript - 通过 Monoandroid 访问 HTML 元素值（Webview）

> ID：11886419
> 
> 赞同：0
> 
> 时间：2012-08-09T15:08:45.110
> 
> 标签：javascript, html, xamarin.android

无法通过 Monoandroid 访问 HTML 元素值（Webview）。

上下文： - 我们正在开发的 Monoandroid 应用程序在其中一种布局中有一个 Webview 组件。我们正在加载/重用我们现有的（注册页面）HTML/JavaScript：具有单选按钮（男性/女性 rdBtns）。但无法访问“提交”按钮（在 web 视图之外）单击事件上的选定单选按钮值。

1.  尝试将 JavaScriptInterface 与 WebView 一起使用，但不可用。
2.  通过 JNI 获得 Java 类的值，我的 C#（不成功）

问题的假设：没有线索。

问题：

如何获得单声道事件代码的值？请提出一些替代方法来通过 MONODROID 访问 webview 之外的 HTML 元素值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:28:34.440

您应该捕获网站在您的 webview 中发送的所有请求，例如提交您感兴趣的数据。因此，您应该将 WebViewClient 添加到您的 WebView 并实现

```
public bool ShouldOverrideUrlLoading (WebView view, string url) 
```

这是一个示例，我使用它来获取 WebView 内的地图的当前（在 webview 中）选定功能的 id，以显示用户通过单击地图上的此对象请求的相应详细信息。JavaScript 代码只是调用函数的 href：

```
"<a href=\"javascript:getDetailsForSelectedStation();\">Details...</a>"; 
```

这是函数（其中 eventFeature 是全局变量）

```
function getDetailsForSelectedStation() {
    window.location.href = "www.ANFANGP" + eventFeature.attributes.saeulenid + "PDETAILANFRAGE";
} 
```

（您也可以直接将 href 设置为我们的“假”-url）它应该像通常的地址一样开始，所以我使用 www。然后我使用 P 来标记 C# 中的字符串。结束标记“DETAILANFRAGE”将用于在 C# 中捕获此调用。

现在这是接收消息的 WebViewClient：

```
class MyWebViewClient : WebViewClient
{
        public override bool ShouldOverrideUrlLoading (WebView view, string url)
        {
            //check, whether this was a details-url
            if (url.EndsWith ("DETAILANFRAGE")) {
                //tokenize the url
                string[] tokens = url.Split ('P');
                long saeulenid;
                if (long.TryParse (tokens [1], out  saeulenid)) {
                    //Here you can work with the data retrieved from the webview
                    ShowDetailsByID(saeulenid);
                    ...
                }
            }
            return true;
        }
} 
```

WebViewClient 必须添加到 WebView：

```
MyWebView.SetWebViewClient(new MyWebViewClient()); 
```

如果您需要更多上下文信息，您也应该重写构造函数。我正在移交当前活动，以便能够启动一个新活动 (StartActivity() ) 以在我的应用程序中显示详细信息视图。顺便说一句，要从 C# 调用 JavaScript 代码，您只需加载一个 url，例如： MyWebView.LoadUrl("javascript:myFunction(myParams)"); WebChromeClient 对调试非常有用。

[有关更多详细信息，请参阅 xamarin 的本教程](http://docs.xamarin.com/android/tutorials/User_Interface/web_view)

当然，您可能会在[WebView 参考中找到有趣的信息](http://developer.android.com/reference/android/webkit/WebView.html)

# xcode - 无法下载应用程序，无法安装应用程序

> ID：11886425
> 
> 赞同：1
> 
> 时间：2012-08-09T15:09:07.147
> 
> 标签：xcode, ipad

我已经多次看到这个问题，但我的确切情况似乎并不适用。希望有人可以提供帮助！

我正在将一个应用程序部署到 iPad。我使用开发配置文件开发它，并且可以毫无问题地将其部署到分配的设备。一切都很好。

所以我准备分发它。我们正在使用 Enterprise Ad-Hoc 分发，并且是 Apple Enterprise Developer 计划的一部分。我为应用程序创建了一个分发配置文件，下载了配置文件并将其加载到 Xcode 中，获得了适当的证书，因此它被干净地签名。我使用应用程序的分发配置文件显式构建了分发。但是，当我尝试安装时，我们得到了臭名昭著的“无法加载应用程序，此时无法安装应用程序”。设备控制台出现以下错误：

```
Aug  9 10:50:43 unknown installd[12695] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Aug  9 10:50:43 unknown installd[12695] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 verify_signer_identity: Could not copy validate signature: -402620394
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.xU9kDU/foo_extracted/Payload/APP.app
Aug  9 10:50:43 unknown com.apple.itunesstored[12694] <Notice>: MobileInstallationInstall: failed with -1
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 install_application: Could not preflight application install
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 handle_install: API failed
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 send_message: failed to send mach message of 71 bytes: 10000003
Aug  9 10:50:43 unknown installd[12695] <Error>: 2ffba000 send_error: Could not send error response to client
Aug  9 10:50:54 unknown lockdownd[26] <Notice>: 00381000 lockssl_handshake: SSLHandshake returned -9806
Aug  9 10:50:54 unknown lockdownd[26] <Notice>: 00381000 handle_start_session: Could not enable SSL. Closing connection.
Aug  9 10:50:54 unknown notification_proxy[12630] <Error>: Could not receive size of message: 0 Invalid argument
Aug  9 10:50:54 unknown notification_proxy[12630] <Error>: Could not receive message
Aug  9 10:50:54 unknown notification_proxy[12626] <Error>: Could not receive size of message: 0 Invalid argument
Aug  9 10:50:54 unknown notification_proxy[12626] <Error>: Could not receive message
Aug  9 10:51:03 unknown kernel[0] <Debug>: lockbot[12696] Builtin profile: gputoolsd (sandbox) 
```

关于我做错了什么的任何想法？这似乎暗示配置文件不正确，但我肯定使用包含应用程序的分发配置文件。它还暗示了 SSL 问题。托管可分发内容的站点未启用 SSL，但这似乎不是必需的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:42:43.237

显然，当您升级 iOS 开发者程序订阅时，您需要创建新的分发证书（并且该证书应该由 Team Agent 创建）。见这篇文章：

[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html#//apple_ref/doc/uid/TP40008194-CH104-SW1](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html#//apple_ref/doc/uid/TP40008194-CH104-SW1)

# java - RabbitMQ N 交换测试

> ID：11886428
> 
> 赞同：0
> 
> 时间：2012-08-09T15:09:20.183
> 
> 标签：java, testing, rabbitmq, benchmarking, rabbitmq-exchange

我对 RabbitMQ 还很陌生，我计划编写一些测试来了解 RabbitMQ 中的消息系统如何随着使用的交换数量而扩展。特别是我很想知道增加*N 次*交换将如何影响 CPU、内存和 IO 使用率。

我注意到 RabbitMQ 附带了一个 rabbitmqct1.bat 应用程序，它有一个状态命令，可以输出系统相关信息。我遇到的问题是决定何时在消息传递周期中运行基准测试实用程序。

我应该在向交易所发布消息时运行它吗？或者在我将队列绑定到交换机时运行它？或者当消息从交易所推送到队列时？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:59:47.837

您可能会发现 Web 管理插件是查看系统当前性能的最简单方法。再一次，看看我在你的另一个问题中链接到的[RabbitMQ 的性能和可扩展性路由拓扑。](http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)

值得考虑测试中的变量：

*   你的消息会持久吗？（见delivery_mode = 2）这会增加你的磁盘IO
*   你的消息有多大？这将对吞吐量产生很大影响，如果它们很大（几kb，那么你可能想要查看压缩），在网络性能和内存（以及磁盘IO，如果它们是持久的）方面

还值得注意的是，当队列没有消费者时，队列性能会下降，所以如果它稳定增长，那么性能就会下降，理想情况下，RabbitMQ 队列将始终处于（或接近）0 条消息。

一些有用的链接：

[RabbitMQ 性能测量，第 1 部分](http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/)

[RabbitMQ 性能测量，第 2 部分](http://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/)

# gcc - 了解新的 gcc 序言

> ID：11886429
> 
> 赞同：2
> 
> 时间：2012-08-09T15:09:24.687
> 
> 标签：gcc, assembly, intel

我想知道为什么 gcc 为函数引入了一个新的序言（以及结尾）——尤其是 main()，因为我只分析了它。例如，之前是：

```
push ebp
mov ebp, esp
sub esp, 0x... ; Allocate memory space into the stack

; ... Some code

; Epilogue
leave
ret 
```

现在这有点复杂（至少要理解）：

```
lea    ecx,[esp+0x4]
and    esp,0xfffffff0
push   DWORD PTR [ecx-0x4]
push   ebp
mov    ebp,esp
push   ecx
sub    esp,0x64

; Some code

; Epilogue
add    esp,0x64
pop    ecx
pop    ebp
lea    esp,[ecx-0x4]
ret 
```

我了解它的具体作用，但我无法弄清楚它的**目的** 。是否使利用（堆栈溢出）尝试更加棘手？另一个调用约定？只是为了让堆栈更安全？（因为我在战争游戏中遇到了这些东西）

最后，我的 gcc 版本是：gcc version 4.3.2 (Debian 4.3.2-1.1)

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:12:18.530

目的是在 16 字节边界上对齐堆栈。

# python - 将命令行实用程序上传到 PyPI

> ID：11886430
> 
> 赞同：0
> 
> 时间：2012-08-09T15:09:33.653
> 
> 标签：python, software-distribution, pypi

我制作了一个程序，它应该只用一个命令从 shell 运行（比如`$ program_name`，就是这样）。我很困惑是否应该将此程序上传到 PyPI 列表，因为当我浏览列表时，我只遇到了旨在导入其他 python 程序的包/模块。

该程序也是专门为 python 用户设计的，所以只有使用 python 的程序员才会使用它。如果我可以在那里上传它会很好，主要是因为它更容易打包和分发，而且只有 python 用户才会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:11:28.243

当然也可以上传。

PyPI 上列出了许多命令行实用程序，例如，[`pip`](https://pypi.python.org/pypi/pip).

事实上，有超过[2700 个包被标记为在控制台环境中运行](https://pypi.python.org/pypi?%3aaction=browse&show=all&c=8)。

# linux - 用户访问 Linux 服务器上的文件夹

> ID：11886432
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:09:34.460
> 
> 标签：linux, ssh

我使用 useradd 命令创建了一个用户。我正在尝试让 user2（新创建的）访问 user1 的文件夹。我将 user2 添加到与 user1 相同的组中（使用 usermod -g），但是当我尝试更改主目录或打开目录时，我收到“权限被拒绝”消息。这是我第一次尝试这个，所以我认为我错过了一步。我需要做什么来更改用户的主目录并获得权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:18:59.177

`user2`至少需要`x`对您要允许访问的文件夹的所有父文件夹具有执行 ( ) 权限。

`r`不需要读取 ( )；这也将允许用户列出这些文件夹。所以要打开`/home/user1/x`，权限必须至少是：

```
*****x*** /home
***--x--- /home/user1
***r*x--- /home/user1/folder 
```

图例：`*`可以是任何东西，`-`意思是“不设置”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:19:13.810

组只是一个“抽象概念”，用于在某个资源上创建一组权限。
如果您想在主目录`user2`之上授予读取权限`user1`，并且如果您想对组执行此操作，您还必须在整个组中`+x`授予对该目录的权限。

所以，你可以这样做：`chmod g+x /homeDirectoryOfUserA`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:19:15.943

您必须将 user2 分配给拥有该目录的组。如果运行`ls -l`，您将看到以下格式 user:group。那是目录/文件的所有者。确保 user2 是该组的成员。然后，您需要确保该组具有必要的权限。你可以通过运行来做到这一点`chmod 775`。这将赋予所有者和组成员完全访问权限，以及其他所有人读取访问权限。

# objective-c - Objective-C 块中的变量范围

> ID：11886433
> 
> 赞同：0
> 
> 时间：2012-08-09T15:09:37.187
> 
> 标签：objective-c, objective-c-blocks

我在一个块中有以下代码，想知道在 enumerate 之类的东西中声明局部变量是否很酷？我真的不想处理 __block 等，所以想看看以下代码是否有任何问题：

```
 [self.assets enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
     NSData *imageToUpload = UIImageJPEGRepresentation([(UIImageView *)obj image], 90);
     NSString *imageName = [NSString stringWithFormat:@"Image%d",idx];
     NSString *fileName = [NSString stringWithFormat:@"Image%d.jpeg",idx];
 }]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:24:39.860

这些变量是无用的。它们不存储在其他任何地方，并在运行循环结束时自动释放。

将您的块视为一个自包含的函数：它不会在其范围之外写入任何内容，也不会返回任何内容。

# backbone.js - 使用主干事件调整窗口大小的 DOM 操作

> ID：11886435
> 
> 赞同：0
> 
> 时间：2012-08-09T15:09:38.470
> 
> 标签：backbone.js, backbone-events, window-resize

我有一个正在使用的客户端应用程序，我正在使用 jQuery 1.7.x、Backbone 和 Underscore。该应用程序有很多列，并且随着窗口大小的调整，我需要调整 DOM 以推送或弹出一列。我遇到了如何在调整窗口大小时可靠地操作 DOM 的问题，因为事件需要时间来触发，事件堆栈需要时间来清除并且需要考虑 DOM 的列数。哦，我正在使用有用的下划线去抖动方法和我的调整大小侦听器和这些需要触发的特定事件的延迟方法。

在调整窗口大小时，如果列不适合水平放置，我需要弹出列。在窗口缩小的速度比触发的调整大小侦听器更快的情况下，我需要进行一些 dom 清理以使所有内容都适合。

*   在每个调整大小触发器上循环遍历 DOM 上的列并在当前 DOM 列的循环内计算 fit_width 并在必要时弹出是否更好？新的调整大小事件可能会改变/中断事情吗？

*   或者最好在每个调整大小触发器上触发 pop_column_if_too_wide 以获取 DOM 上的列数？这似乎很糟糕......

通过事件触发器处理所有事情会很好，但是我所依赖的 _.defer 不够可靠，无法快速计算当前循环的迭代，因为事件堆栈可能尚未被清除。因此，它最终可能会为同一个模块触发两次事件。

也许还有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:52:37.163

他们真的需要从dom中*移除吗？*你不能把它们藏起来吗？那，IIRC，可以*纯粹*通过css和媒体查询来完成......（当然你有那个条件“如果列太宽”，如果非常严格的话可能会很棘手）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:45:33.673

还可以看看Twitter 的[Bootstrap](http://twitter.github.com/bootstrap/)。我知道这可以根据视口大小处理更改。 [这是一个](https://stackoverflow.com/questions/10513715/hide-div-depending-on-horizontal-browserviewport)基于视口大小处理隐藏 div 的问题。

（郑重声明，我不是 Twitter 的员工，也没有被诱使提出这个建议。）

# jquery - 我在为这个背景位置设置动画时错在哪里？

> ID：11886439
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:09:43.583
> 
> 标签：jquery

代码 ：

```
$('#mappa-content').animate({ backgroundPosition: "0 -54px" }, 500); 
```

背景中的图像没有移动。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:10:25.767

选择器中的引用：

```
$('#mappa-content').animate({ backgroundPosition: "0 -54px" }, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:38:07.010

您不能`background-position`开箱即用地制作动画。

[您可以使用插件](http://www.protofunc.com/scripts/jquery/backgroundPosition/)添加支持（该站点目前已关闭，所以[这里有一个镜像](http://web.archive.org/web/20110514050638/http://www.protofunc.com/scripts/jquery/backgroundPosition/)）。

`background-position-x`您可以为和设置动画`background-position-y`，但 Firefox/Opera 等不支持这些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:16:00.490

尝试这个：

```
$('#mappa-content').animate({'background-position-x':'-54px'},500); 
```

# ruby-on-rails - 在 Rails 中制作用户通知

> ID：11886445
> 
> 赞同：0
> 
> 时间：2012-08-09T15:09:55.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在 Rails 中用文本制作一个简单的用户通知。我显然希望有多个通知，所以我的问题是我是否必须创建一个全新的迁移并创建与我的用户模型的关联，或者是否有某种方法可以在我的用户表中扩展“通知”文本属性？我想你可以在通知之间插入换行符，但这不是我想要的，因为这听起来会变得太乱。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:37:48.973

如果您只想存储通知，您可以告诉 Rails 将其视为一个数组（通知的列类型应该是`text`）：

```
class User < ActiveRecord::Base
  serialize :notifications, Array
end 
```

如果您想存储任何其他通知详细信息（如作者或时间戳等），您可能应该使用单独的模型。

Rails 文档：[Active Record](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)，搜索“在文本列中保存数组、哈希和其他不可映射的对象”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:14:48.367

如果您想保留通知的历史记录供用户稍后查看，那么您可能希望将其存储在数据库中。意思是，你会想在数据库中创建一个新表。您应该通过迁移脚本执行此操作。这个新模型应该与 User 模型相关联，这样你就可以做一些事情，比如`user.notifications`检索他们的所有通知。

此外，如果您`timestamps`在新`Notifications`模型中使用，您可以稍后进行一些有趣的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:27:46.750

您可以为此目的使用 rails 多态关联，使用此机制您可以将通知模型与其他模型相关联，而无需修改目标表。

这个链接给出了一个更好的例子 [http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

# c# - 如何使用 c# 编写一个简单的视频播放器，以准确的 fps 播放视频？

> ID：11886454
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:10:13.503
> 
> 标签：c#, multithreading, video, opencv, emgucv

我正在用 Emgu 编写一个简单的视频播放，它是 opencv 的 ac# 包装器。

现在我可以播放视频了，但我发现 fps 不准确，比正常快一点。

在我的代码中，我`Thread.sleep()`习惯在 2 帧之间等待一段时间。代码是：

```
int fps = getFromFile(file); // which is 30
while (true) {
    var frame = CvInvoke.cvQueryFrame(capture);
    if (frame.ToInt32() == 0) break;

    Image<Bgr, byte> dest = new Image<Bgr, byte>(Convert.ToInt32(width), Convert.ToInt32(height));
    CvInvoke.cvCopy(frame, dest, IntPtr.Zero);
    box.Image = dest;

    Thread.Sleep(1000 / Convert.ToInt32(fps));
} 
```

哪里出了问题，如何解决？

* * *

**更新**

`box`代码中的 是，`Emgu.UI.ImageBox`这是线程安全的，我可以直接从其他线程访问它：`box.Image = dest`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:24:29.247

您需要保留一个“加满”框架对象的队列，并使用某种计时器来渲染它们。通常，我会使用一个不断回收的框架对象池。

没有简单的视频——vlc.exe：13 个线程，realplay.exe：19 个线程，divX player：23 个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:31:08.750

我的建议是使用计时器

```
 _capture = new Capture(ofd.FileName);
            _videoTimer = new Timer();
            double fps = _capture.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_FPS);
            _videoTimer.Interval =  Convert.ToInt16(1000 / fps); //the timer interval
            _videoTimer.Tick += new EventHandler(_videoTimer_Tick);
            _videoTimer.Start(); 
```

现在在图像框中显示它

```
private void _videoTimer_Tick(object sender, EventArgs e)
{
           Image<Bgr, Byte> img = _capture.QueryFrame();
            if (img == null) return; 
            box.Image = img;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:40:09.817

以非常小的和准确的时间间隔对事件进行计时并非易事，而 Thread.Sleep 肯定不是您想要的。

首先， Thread.Sleep 不保证您的线程将在指定的时间内恢复，它只是保证您将被挂起至少该时间。

其次，大多数计时器在您需要的毫秒级别上并不准确。其中包括 System.Threading.Timer 和 System.Timers.Timer。使用这些，您最多会获得不稳定的帧速率。我选择的解决方案是使用[System.Diagostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)编写我自己的带有延迟补偿的事件循环。[这是相当困难的，但是 OpenTK 的GameWindow 类](http://opentk.svn.sourceforge.net/viewvc/opentk/trunk/Source/OpenTK/GameWindow.cs?revision=3117&view=markup)中给出了一个很好的例子。另一种解决方案可能是[Multimedia Timers](http://msdn.microsoft.com/en-us/library/windows/desktop/dd742877.aspx)，但那些不能直接从 .NET 获得，我没有使用这些的经验。

第三，不要使用同一个线程每 33 毫秒发布一次渲染事件并实际渲染帧；有一个单独的线程将帧连续渲染到一个队列中，并且有一个计时器线程只需选择前帧。这样你就可以释放计时器线程并让它尽可能准确。

# reporting-services - 报告参数显示多次

> ID：11886462
> 
> 赞同：0
> 
> 时间：2012-08-09T15:10:33.770
> 
> 标签：reporting-services

我想在我的报告顶部有一个汇总表，显示从下拉列表中为每个参数选择的值，例如。日期、身份证等

ID参数下拉实际上是一个带有复选框的多选列表，我在汇总表中显示此数据时使用的表达式如下：

```
=Join(Parameters!ID.Value,",") 
```

对于其他参数，我在表达式中有以下内容：

```
=Parameters!Date.Value 
```

当我运行报告时，将显示正确的值，但我拥有的 3 行（从日期到日期和 ID）被重复多次 - 即。如果您知道我的意思，与通过另一个数据集返回的行数相同的次数，该数据集接受其中一些参数。

所以我得到第 1 行、第 2 行、第 3 行、第 1 行、第 2 行、第 3 行、第 1 行……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:34:12.687

似乎这些表达式被放置在表格详细信息单元格中。因此，它们针对该数据集的每一行执行。

您应该将这些表达式放入表格标题单元格中。

# struts2-jquery - struts2-jquery-plugin : 单选按钮有按钮的形式

> ID：11886464
> 
> 赞同：1
> 
> 时间：2012-08-09T15:10:36.603
> 
> 标签：struts2-jquery

我使用 struts2-jquery-plugin 来实现我的表单。但结果，我的单选按钮获得了按钮的形式，而不是单选按钮（查看此链接：[http](http://struts.jgeppert.com/struts2-jquery-showcase/index.action) ://struts.jgeppert.com/struts2-jquery-showcase/index.action ）......我想知道是否有一种方法可以让它们看起来自然。十分感谢。

```
<s:url id="remoteurl" action="jsonsample"/> 
<sj:radio
href="%{remoteurl}" 
id="remoteRadiobuttons" 
name="echo" 
list="languageMap" 
label="Language"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:30:16.533

在寻找另一个问题的解决方案时，我偶然发现了这个：

```
buttonset="false" 
```

它解决了我的问题。我希望它可以帮助别人。

# android - 正在运行的 AIR 应用程序不会出现在 Advanced Task Killer 中

> ID：11886465
> 
> 赞同：0
> 
> 时间：2012-08-09T15:10:39.200
> 
> 标签：android, apache-flex, air

我正在开发一个演示（flex/air/mobile/android）应用程序，当我在手机（HTC Desire）上启动它时，我无法在“高级任务杀手”的运行进程中看到正在运行的应用程序。你能帮我解释为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:33:17.797

您可能不会在 Advanced Task Killer（Google Play 上的 Android 应用程序）中看到您的应用程序，除非您将应用程序与[强制运行时](http://www.adobe.com/devnet/air/articles/air3-install-and-deployment-options.html#articlecontentAdobe_numberedheader)打包在一起。您可能会看到 Adob​​e AIR 的进程（我没有要验证的 Android 设备）。

在 PC 和 Android 上，AIR 应用程序可以包含 AIR 框架。默认是使用安装在 PC/Android 手机上的 AIR 运行时。

您可以使用以下方法将您的应用程序与强制运行时打包`adt`：

```
adt -package -target apk-captive-runtime ... 
```

# spring - 嵌入式 ActiveMQ 不断重启 Tomcat

> ID：11886466
> 
> 赞同：2
> 
> 时间：2012-08-09T15:10:39.960
> 
> 标签：spring, tomcat, activemq, ioexception

所以我有一个运行 Spring 堆栈的 tomcat 服务器 (tomcat6)。作为堆栈的一部分，我有一个用于处理消息的 ActiveMQ 嵌入式服务器。我在我的 spring 上下文中配置了代理，如下所示：

```
<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory" 
    p:brokerURL="tcp://localhost:61616" />
<bean id="jmsCachedConnectionFactory" 
    class="org.springframework.jms.connection.CachingConnectionFactory" 
    p:targetConnectionFactory-ref="jmsConnectionFactory"
    p:sessionCacheSize="100" />

<amq:broker id="broker" useJmx="false" persistent="false">
    <amq:transportConnectors>
    <amq:transportConnector uri="tcp://localhost:61616" />
    </amq:transportConnectors>
</amq:broker>

<bean id="jmsDestination" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="EDS.PUSHES" />
</bean>

<bean id="jmsMessageProducerTemplate" class="org.springframework.jms.core.JmsTemplate" 
    p:connectionFactory-ref="jmsCachedConnectionFactory"
    p:defaultDestination-ref="jmsDestination" />

<jms:listener-container container-type="default" 
    connection-factory="jmsCachedConnectionFactory" task-executor="pollingExecutor"
    acknowledge="auto" prefetch="5" destination-type="queue" cache="none" concurrency="50-100">
    <jms:listener destination="EDS.PUSHES" ref="pushMessageConsumer" method="onMessage" />
</jms:listener-container> 
```

pushMessageConsumer 只是我的类，它通过 onMessage 方法从队列中读取消息。

jms 服务器会定期报告 EOF Exception：

```
012-08-09 14:50:02,891 [ActiveMQ Connection Executor: tcp://localhost/127.0.0.1:61616] 
    WARN  org.springframework.jms.connection.CachingConnectionFactory  - Encountered a 
    JMSException - resetting the underlying JMS Connection

javax.jms.JMSException: java.io.EOFException
    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)
    at org.apache.activemq.ActiveMQConnection.onAsyncException(ActiveMQConnection.java:1841)
    at org.apache.activemq.ActiveMQConnection.onException(ActiveMQConnection.java:1858)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:126)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:160)
    at org.apache.activemq.transport.InactivityMonitor.onException(InactivityMonitor.java:265)
    at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96)
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:206)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readInt(DataInputStream.java:392)
    at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:269)
    at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:227)
    at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:219)
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)
    ... 1 more
2012-08-09 14:50:02,908 [pollingExecutor-4] WARN  
    org.springframework.jms.listener.DefaultMessageListenerContainer  - Setup of JMS 
    message listener invoker failed for destination 'EDS.PUSHES' - trying to recover.  
    Cause: The Session is closed 
```

然后它重新启动 Tomcat，重新启动我的整个应用程序。我尝试通过更改代理定义并使用 DefaultIOExceptionHandler 添加 bean 来添加 ioExceptionHandler：

```
<bean id="ioExceptionHandler" class="org.apache.activemq.util.DefaultIOExceptionHandler">
    <property name="ignoreAllErrors"><value>true</value></property>
</bean>

<amq:broker id="broker" useJmx="false" persistent="false" 
    ioExceptionHandler="#ioExceptionHandler">
  <amq:transportConnectors>
    <amq:transportConnector uri="tcp://localhost:61616" />
  </amq:transportConnectors>
</amq:broker> 
```

但是当EOF异常发生时，它会继续重新启动tomcat服务器。我在配置中遗漏了什么吗？

# sharepoint - 如何将 SharePoint SPListItem 作为参数传递到自定义 Web 服务？

> ID：11886471
> 
> 赞同：0
> 
> 时间：2012-08-09T15:10:55.520
> 
> 标签：sharepoint, wsdl, asmx, webmethod, splistitem

您可以将 SPListItem 对象作为参数传递到部署到 SharePoint 中的自定义 [WebMethod] 中吗？我知道，如果它是，它将基本上与 SharePoint 上下文断开连接，但这很适合我，因为我只是将一些 SPListItem 数据保存在其他地方（没有更新）。

我出于测试目的尝试了此操作，但 SPDev 在生成 .disco & .wsdl; 时抛出了错误。

```
[WebMethod]
public bool saveData(SPListItem ticket, string action)
{

    string msg = "";

    try
    {
        msg += ticket.Xml.ToString();
        msg += Environment.NewLine;

    }catch(Exception ex){
        msg += ex.Message.ToString();
    }
    finally{

        processLog.WriteToLog(msg, LogFile_NM);
    }

    return true;

} 
```

这种方法的某些地方似乎是错误的，但我不能完全指出它......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:09:03.957

正如我所怀疑的，一个根本缺陷 - [SPListItem 不可序列化！](http://ddkonline.blogspot.com/2009/06/sharepoint-2007-workflow-workflow.html)

# android - 从 SystemService 启动服务

> ID：11886473
> 
> 赞同：0
> 
> 时间：2012-08-09T15:11:02.147
> 
> 标签：android, android-service, android-source

我如何从一个集成到系统中的启动一个`Service`（驻留在`/packages`文件夹中）？`SystemService``SystemServer`

否则`Activity`从 a开始`SystemService`将是完美的。这也可能吗？

我知道这不利于可用性等，但它是一个研究对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:06:38.080

要从 SystemService 启动服务，您需要`frameworks/base/services/java/com/android/server/SystemServer.java`在 ServerThread 中注册它。看看那里的例子。

# .net - 将服务器变量、Cookie 信息和查询字符串传递给 WCF

> ID：11886474
> 
> 赞同：0
> 
> 时间：2012-08-09T15:11:07.493
> 
> 标签：.net, ajax, wcf, web-services

我正在创建一个 WCF 服务，该服务将在一个单独的服务器上运行，而不是调用它的网站。我遇到的问题围绕从浏览器和服务器获取上下文信息。

作为一点背景知识，我正在编写的应用程序曾经作为服务器上的一个简单程序集存在，该程序集被调用以收集一些自定义 Web 分析，并且严重依赖 HttpContext 来检索 cookie、查询字符串信息和服务器变量。

我已经辞职，通过 AJAX 调用将所有这些东西作为文本传递给我的服务，但我不禁觉得我做错了。

有没有更好的方法将此信息传递给我的服务？

更新：

因此，在查看了原始应用程序之后，我决定采用另一种方法。当前程序集仅引用五个 cookie，因此我可能会简单地采用这些并定义一个数据协定，其中包括这些值以及我需要使用该服务的服务器变量的值。我仍将传入整个查询字符串并简单地创建一个 HttpRequest 对象来访问这些值，因为它在整个应用程序中使用得更多。

我将在 JSON 包装器中将所有这些发送到服务，并使用构建器类在服务应用程序中创建分析对象。

我认为这是一个更好的解决方案——你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:40:05.490

建议使用WCF 服务中的属性（[此处](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx)`OperationContext.Current`为MSDN 链接）来获取传入请求的详细信息。

参考：

*   我在网上四处搜索，[这篇](https://stackoverflow.com/questions/5904313/access-httpcontext-current-from-wcf-web-service)SO 帖子提供了一个良好的开端（我赞成！）。

*   [这个](http://social.msdn.microsoft.com/Forums/hr/wcf/thread/aae213dc-3afd-4319-914e-ddc6b77cc5a1)MSDN 线程解释了如何从`OperationContext`.

希望这可以帮助。我还没有尝试过，所以不能保证它有效。

ps：如果这种方法有效，你的新方法`OperationContract`应该有零参数。

# java - java.sql.SQLException：[Microsoft][ODBC Microsoft Access Driver] 无法更新。数据库或对象是只读的

> ID：11886479
> 
> 赞同：2
> 
> 时间：2012-08-09T15:11:18.557
> 
> 标签：java, spring, hibernate, ms-access

我正在使用 Spring 3.1.2 和 Hibernate 4.1.5_SP1。我正在尝试将 CSV 文件导入到动态创建的 Access 文件中。代码与此类似：

```
 final SingleConnectionDataSource ds = new SingleConnectionDataSource();
    ds.setUrl(myBean.getMicrosoftAccessDriverUrl() + file.getAbsolutePath());
    final JdbcTemplate jdbcTemplate = new JdbcTemplate(ds);
    final String strSQL = "SELECT * INTO " + accessTableName + " FROM 
         [Text;HDR=YES;DATABASE=" + csvFile.getPath()+ ";].[" + 
         csvFile.getName() + "]";
    jdbcTemplate.execute(strSQL);
    ds.getConnection().close(); 
```

这会产生如下错误：

```
 org.springframework.jdbc.BadSqlGrammarException: StatementCallback; bad 
 SQL grammar 
  [SELECT * INTO myTable 
  FROM [Text;HDR=YES;DATABASE=C:\somePath;].[myAccessFile.accdb]]; 
 nested exception is java.sql.SQLException: [Microsoft][ODBC Microsoft 
 Access Driver]  Cannot update. Database or object is read-only. 
```

我的数据源 URL 类似于：

```
jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\somePath\myAccessFile.accdb 
```

我检查了文件，它们不是只读的。关于如何解决这个问题的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:31.483

该`FROM`条款对我来说看起来不正确。

```
SELECT * INTO myTable 
FROM [Text;HDR=YES;DATABASE=C:\somePath;].[myAccessFile.accdb] 
```

我以为您打算从 CSV 导入 Access 表。如果是这样，我认为您应该使用 CSV 文件名代替 Access 文件 ( `myAccessFile.accdb`)。

```
SELECT * INTO myTable 
FROM [Text;HDR=YES;DATABASE=C:\somePath;].[YourFile.csv] 
```

# javascript - 使用 jQuery 仅选择第一级后代 - 有更好的方法吗？

> ID：11886482
> 
> 赞同：4
> 
> 时间：2012-08-09T15:11:26.357
> 
> 标签：javascript, jquery

我正在尝试构建一个 jQuery 插件来锁定表格中的行或列，例如 Excel 的冻结窗格。（还有许多其他好的解决方案，但由于各种原因，它们都没有为我工作。我认为这可能与表格位于模式弹出窗口内有关。但我离题了。）

作为其中的一部分，我试图选择插件选项中指定的特定表的前*n行或列。*问题是某些行包含其他嵌套表。不幸的是，我对此无能为力。所以我的问题是，我怎样才能`<tr>`在表中只获得第一级 s ？使用`.children('tr')`并不总是有效，因为该行不一定是表的直接子级 - 可能有一个`<thead>` ~~或（理想情况下）用户可能能够在包含元素上调用插件，并且它应该足够聪明以找到里面的表~~。
**编辑：**实际上，现在我认为如果我们必须按 id 选择表，那么第二位将不起作用。但我认为要求人们只在桌子上使用插件并不过分，因为这就是它的用途......

简而言之：如何仅选择可能是也可能不是特定包含元素的直接子级的第一级表行？

[到目前为止，根据这个答案](https://stackoverflow.com/questions/977883/selecting-only-first-level-elements-in-jquery#977891)的后半部分，我想出的是：

```
$el.find('tr:not(tr tr):lt('+base.options.rows+')') 
```

对于列：

```
$el.find('tr:not(tr tr)').find('(td,th):lt('+base.options.columns+')') 
```

但这似乎非常长而且笨重，我想知道是否有更短/更清洁的方法。或者有没有办法只使用普通的旧javascript？

**编辑 2：** [显然选择器版本实际上比 .not() 快](http://jsperf.com/jquery-css3-not-vs-not)。给我的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:14:53.377

使用正确的选择器。在这种情况下，这将是`>`直接子选择器：

```
$el.find('#table > tbody tr > td, #table > tbody tr > th'); 
```

有关其他选项，请参阅“ [jQuery 选择器](http://api.jquery.com/category/selectors/)”。

或者，只需遍历 的所有直接子代`tbody`：

```
var cells = $el.children('tbody').children('tr').children(); 
```

由于 only`td`和`tr`被允许作为 的子级`tr`，因此应该已经是您想要的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:20:51.603

给你的表一个“ID”，这样你就有一个起点并使用直接子选择器

```
$('tableID, tableID > tbody,tableID > thead, tableID > tfoot').children('tr') 
```

因为 tr 可以在该特定表的 table、tbody 或 thead 下

# css - 覆盖 CSS 内联

> ID：11886485
> 
> 赞同：1
> 
> 时间：2012-08-09T15:11:33.597
> 
> 标签：css, background, overriding, inline-styles

我的样式表的一部分如下所示：

```
ul#secondary-menu li {
    background: url("images/secondary-menu-bg.png") repeat-y scroll right top transparent;
    padding-right: 2px;
} 
```

如何覆盖内联背景图像？我试过这个：

```
<li id="menu-41" class="item-41" style="ul#secondary-menu li { background: none;}"><a href="http://www.test.com">Test</a></li> 
```

我还添加了`!important`标签，但没有效果。我在这里做错了什么？请注意，我正在寻找一种解决方案来覆盖**内联**背景图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:13:07.480

内联样式没有选择器。它们只是一组声明，因此您可以删除选择器和花括号：

```
<li id="menu-41" class="item-41" style="background: none;"><a href="http://www.test.com">Test</a></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:14:14.223

您没有在内联样式标记内指定选择器，因为这些样式仅适用于该元素。

```
<li id="menu-41" class="item-41" style="background: none;"> 
```

是你所需要的全部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:18:54.420

是的，您不需要指定内联样式标记，因此只需将样式更改`style="background: none;"`为即可

# facebook - AdCreative 对象上的 image_url 有什么意义？

> ID：11886487
> 
> 赞同：1
> 
> 时间：2012-08-09T15:11:43.987
> 
> 标签：facebook, facebook-graph-api

我仍然是一个 Facebook 广告 API n00b，所以我不知道这是否是一个好问题，但在这个页面上：[https ://developers.facebook.com/docs/reference/ads-api/creative- specs/](https://developers.facebook.com/docs/reference/ads-api/creative-specs/)有一个字段叫：“image_url” 为什么？我正在使用指向可以通过网络访问的图像的链接填充此值，但是当我尝试创建新广告时它被忽略了。如果它似乎被忽略了，任何想法这个领域的意义是什么？如果该字段暴露，为什么要强迫开发人员完成这个复杂的图像上传过程？也许 API 实际上可以为我们提取该图像并使用它，还是我完全误解了该领域的意义？

谢谢！埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:27:58.033

> 我正在使用指向可以通过网络访问的图像的链接填充此值，但是当我尝试创建新广告时它被忽略了。如果它似乎被忽略了，任何想法这个领域的意义是什么？

因为您必须使用请求**上传**图像，而不仅仅是指向某个 URL。

请参阅：[https ://developers.facebook.com/docs/reference/ads-api/adimage/](https://developers.facebook.com/docs/reference/ads-api/adimage/)

# javascript - 根据类别过滤数组

> ID：11886494
> 
> 赞同：1
> 
> 时间：2012-08-09T15:12:02.927
> 
> 标签：javascript

有一个标记数组，每个标记属于一个或多个类别。

您将如何实现搜索/过滤器来检索所有具有 cat = X 的标记？

例如：

*   所有带有 cat = 9 的标记？
*   所有带有 cat = 5 和 9 的标记？

```
Gmaps.map.markers = [
    {"id":9,"cat":"3, 5, 6","lat":"52.50","lng":"13.32"},
    {"id":11,"cat":"3","lat":"52.51","lng":"13.44"},
    {"id":12,"cat":"1, 2, 5","lat":"47.89","lng":"10.62"},
    {"id":13,"cat":"1, 2, 3, 4, 5","lat":"47.77","lng":"10.61"},
    {"id":15,"cat":"1, 6","lat":"40.60","lng":"-73.44"},
    {"id":16,"cat":"1, 3, 5, 9","lat":"51.89","lng":"17.16"},
    {"id":17,"cat":"9","lat":"52.37","lng":"9.73"}
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:57:00.243

修改它以找到猫 4 以及...

```
function findMarkersContaining ( markers, needleArray ) {
  var matches = [];
  var markerLength = markers.length;
  var needleArrayLength = needleArray.length;
    for ( var i = 0; i < markerLength; i++ ) {
      for ( var e = 0; e < needleArrayLength; e++ ) {
        var singleNeedle = needleArray[e];
        if ( $.inArray( singleNeedle, markers[i].cat.split(",")) !== -1 ) {
           matches.push( markers[i] );
        }
      }
    }
  return matches;
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:37:06.103

像这样的东西使用正则表达式来查找是否在 cat 逗号分隔列表中找到了 needleArray 中的某些内容，如果是，则将该标记添加到返回的数组中。

```
function findMarkersContaining ( markers, needleArray ) {
   var matches = [];
   var markerLength = markers.length;
   var needleArrayLength = needleArray.length;
   for ( var i = 0; i < markerLength; i++ ) {
      for ( var e = 0; e < needleArrayLength; e++ ) {
         var regex = new RegExp( '(^| )' + needleArray[e] + '(,|$)' );
         if ( markers[i].cat.search( regex ) !== -1 ) {
            matches.push( markers[i] );
         }
      }
   }
   return matches;
} 
```

# sql-server - Visual Studio 2012 MVC 4 应用程序超时

> ID：11886496
> 
> 赞同：0
> 
> 时间：2012-08-09T15:12:10.163
> 
> 标签：sql-server, asp.net-mvc-4, sql-server-express, visual-studio-2012, iis-express

增加我的开发应用程序超时过程的程序是什么？好像是60秒？

详细解释：

我认为可能由于文件大小而导致流式阅读器超时，但是当我仅阅读然后将行添加到列表中时，一切都很好。我确信这是由于我在每一行上执行的详细推断、比较和替换，然后将 EF 实体添加到本地 SQL Express 文件中。

我再次在 Windows 7 和 IIS Express 上使用 VS 2012 RC，尽管我的机器上也有 IIS。

编辑：

**我没有收到来自 VS 的错误消息，只是 IE 显示“Internet Explorer 无法显示网页”。而且，单击“诊断连接问题”没有任何理由。在检查数据库后，我看到 16000 条记录中的 3815 条记录已处理。如果我将文本文件项缩短到 3500 行以下，则不会发生超时。事件查看器中也没有提供洞察力。在 IIS 默认网站上增加超时也没有任何作用。我真的很茫然，非常感谢一些帮助。**

**更新：这绝对是一个 IE 问题。在 Firefox/Chrome 上运行良好。我试图更改 IE 上的超时设置无济于事。不用担心，IE 无论如何都不是我的首选浏览器。加油巴尔默！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:58:49.203

我相信你可以在[这里](http://support.microsoft.com/kb/813827)找到你的答案。Internet Explorer 有一个默认的保持活动计时器。过期时，它会终止连接。

# authentication - 在 Glassfish JDBC-Realm 上登录后用户角色丢失

> ID：11886497
> 
> 赞同：2
> 
> 时间：2012-08-09T15:12:12.030
> 
> 标签：authentication, jakarta-ee, jdbc, glassfish, jdbcrealm

我在 Glassfish 上配置了一个 jdbc-realm，我正在尝试为具有多个角色的用户实施身份验证。我正在使用 JPA 来管理数据库表、JDK 1.7、Glassfish3+ 和 EclipseLink (JPA 2.0)。

我已经可以使用基于 FORM 的身份验证成功登录，但作为登录用户，我没有分配任何已定义的角色。

我在相关类上的实体映射是

**个人帐户.java：**

```
@Entity
@Table(name="PersonAccount") 
public class PersonAccount implements Serializable {

@Id
@NotNull
private String userName;       
private String passwordHash;        

@ManyToMany(cascade={CascadeType.PERSIST})
private Set<UserRole> userRoles = new HashSet<UserRole>();;

... 
```

**用户角色.java：**

```
@Entity
@Table(name="UserRole") 
public class UserRole extends NamedEntity implements Serializable {

@Enumerated(EnumType.ORDINAL)
private persons.util.RoleType roleType = RoleType.StudentRole;

@ManyToMany(mappedBy="userRoles", cascade=
    {CascadeType.PERSIST, CascadeType.REMOVE})
private Set<PersonAccount> personAccounts = new HashSet<PersonAccount>(); 

... 
```

其中基类 NamedEntity 定义了一个主键“id”和一个值“name”，而“PersonAccount”本身被分配给“Person”。

创建第一个（主管理员）帐户“admin admin”时，我的数据库内容如下所示：

```
PERSONACCOUNT:
.USERNAME = admin
.PASSWORDHASH = 8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918
.PERSON_ID = 220002

PERSONACCOUNT_USERROLE:
.PERSONACCOUNTS_USERNAME admin
.USERROLES_ID = 220001

USERROLE:
.ID = 220001
.NAME = AdminRole
.ROLETYPE = 3 
```

创建帐户后，我可以使用基于表单的身份验证登录。返回的主体名称是“admin”，但没有分配用户角色“AdminRole”、“FacultyRole”、“TeacherRole”或“StudentRole”。我可以通过尝试访问受安全保护的页面之一来验证这一点。

这里是我的应用程序和 glassfish 的配置：

**网页.xml：**

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>klops</realm-name>
    <form-login-config>
        <form-login-page>/login.xhtml</form-login-page>
        <form-error-page>/login.xhtml?error=true</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description>Administrators</description>
    <role-name>AdminRole</role-name>
</security-role>
<security-role>
    <description>Faculty</description>
    <role-name>FacultyRole</role-name>
</security-role>    
<security-role>
    <description>Teachers</description>
    <role-name>TeacherRole</role-name>
</security-role>
<security-role>
    <description>Students</description>
    <role-name>StudentRole</role-name>
</security-role> 
```

**glassfish-web.xml**

```
<security-role-mapping>
    <principal-name>admin</principal-name>      
    <role-name>AdminRole</role-name>
    <group-name>AdminRole</group-name>
</security-role-mapping>
<security-role-mapping>
    <principal-name>teacher</principal-name>
    <role-name>TeacherRole</role-name>
    <group-name>TeacherRole</group-name>
</security-role-mapping>
<security-role-mapping>
    <role-name>StudentRole</role-name>
    <group-name>StudentRole</group-name>
    <principal-name>student</principal-name>
</security-role-mapping>
<security-role-mapping>
    <principal-name>faculty</principal-name>
    <role-name>FacultyRole</role-name>
    <group-name>FacultyRole</group-name>
</security-role-mapping> 
```

最后，领域配置：

```
 <auth-realm name="myjdbcrealm" classname="com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm">
      <property name="jaas-context" value="jdbcRealm"></property>
      <property name="password-column" value="passwordhash"></property>
      <property name="assign-groups" value="AdminRole,FacultyRole,TeacherRole,StudentRole"></property>
      <property name="datasource-jndi" value="jdbc/__default"></property>
      <property name="user-table" value="personaccount"></property>
      <property name="group-table" value="userrole"></property>
      <property name="user-name-column" value="username"></property>
      <property name="group-name-column" value="name"></property>
      <property name="digest-algorithm" value="SHA-256"></property>
    </auth-realm> 
```

我对找到一些信息的事实感到有点困惑（我只能使用创建的帐户登录，并且只能使用正确的密码），但是当我登录时，用户上下文似乎没有任何角色。

我到处搜索并尝试了将近一天，但我在这里找不到错误。能够列出连接用户目前拥有的角色甚至会有所帮助，但似乎检查角色的唯一方法是通过使用知道其名称

```
FacesContext.getCurrentInstance().getExternalContext().
    isUserInRole("AdminRole")); 
```

对此问题的帮助将不胜感激:)

谢谢，

帕特里克

**编辑：**

我创建了一个视图 USER_ACCOUNTS，其中包含 UserRole.name 作为 UserName 和 PersonAccount_Userrole.username 作为 UserName 并相应地更改了领域映射，但我仍然得到相同的结果。如果用户名等于安全角色映射中的主体名称，则用户拥有所有 4 个角色。如果我从映射中删除主体名称，则用户在登录后根本没有任何角色。

现在表格的内容和配置是：

```
PERSONACCOUNT: (Table)
.USERNAME = admin
.PASSWORDHASH = 8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918
.PERSON_ID = 220002

USER_ACCOUNTS: (View)
.USERNAME = admin
.ROLENAME = AdminRole 
```

和

```
 <property name="password-column" value="passwordhash"></property>
  <property name="assign-groups" value="AdminRole,FacultyRole,TeacherRole,StudentRole"></property>
  <property name="user-table" value="personaccount"></property>
  <property name="group-table" value="user_accounts"></property>
  <property name="user-name-column" value="username"></property>
  <property name="group-name-column" value="rolename"></property>
  <property name="digest-algorithm" value="SHA-256"></property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:08:13.487

鉴于您的`auth-realm`定义（我假设目前有效），我希望看到两个表（最少信息类似于）：

```
CREATE TABLE `personaccount` (
  `username` varchar(32) NOT NULL,
  `passwordhash` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`username`)
);

CREATE TABLE `userrole` (
  `username` varchar(32) NOT NULL,
  `name` varchar(32) DEFAULT NULL, -- role name
  PRIMARY KEY (`username`,`name`) -- allow multiple roles per user
); 
```

请注意，该`username`列在两个表中具有相同的（列）名称。

* * *

我看到你有三个表：

```
PERSONACCOUNT
PERSONACCOUNT_USERROLE
USERROLE 
```

如果您想保留该结构，则创建一个`view`以将`PERSONACCOUNT_USERROLE`and`USERROLE`表映射到类似于上面显示的组表的内容，并将该视图设为您的`group-table`.

我可以确认这种基于视图的策略适用于 Glassfish 3.1.X 和 MySQL；它可能无法移植到其他应用服务器。

* * *

`security-role-mapping`除了可能尝试解决 JDBC 领域中缺少的角色之外，不确定您要尝试通过包含主体名称来完成什么。

* * *

同样，领域属性的目的`assign-groups`是建立一组始终为所有用户定义的组。我从您后来的评论中得知，这种行为是出乎意料的；这显然是原因。

# forms - CMS 变得简单 - 将验证码添加到表单

> ID：11886498
> 
> 赞同：1
> 
> 时间：2012-08-09T15:12:15.910
> 
> 标签：forms, content-management-system, captcha, cmsmadesimple

我是 CMS Made Simple 的新手，我正在尝试将 CAPTCHA 添加到表单中。我猜这是通过安装 CAPTCHA 模块来完成的？我已经安装了模块，但不知道如何将它添加到我正在使用的表单中。

有没有人这样做过，或者知道怎么做？

提前致谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:18:13.657

我对 CMS Made Simple 一无所知，但看起来它有一个您可以使用的[验证码模块。](http://wiki.cmsmadesimple.org/index.php/User_Handbook/Admin_Panel/Extensions/Captcha)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:27:14.470

假设您正在使用 CMSMS 表单构建器模块来制作表单...

1.  在选项卡 catcha 设置下，选中“使用验证码保护表单提交”。
2.  验证码将自动出现在您的表单上。

您可以转到验证码模块并从不同的验证码库中进行选择。

# javascript - Raphael JS：如何从 Dom 对象（Element.node）中获取 Raphael 元素？

> ID：11886502
> 
> 赞同：2
> 
> 时间：2012-08-09T15:12:18.250
> 
> 标签：javascript, raphael, jquery-svg

我尝试使用 Raphael 的节点函数来获取 DOM 对象并为上下文菜单添加一个事件处理程序。但是我需要从 DOM 对象的事件处理程序中获取 Raphael 元素吗？

为了清楚起见，示例代码应如下所示

```
var circle = paper.circle(100, 100, 100);
var domObject = circle.node;
var ele = domObject.get(0).raphael; // It's required in the domObject's event handler 
```

有谁知道如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:03:27.983

直接完成这项工作只需要很少的额外工作。假设您有所有可用的 jquery contextMenu 资源（js、css、任何图像）和 Raphael 论文`paper`：

```
var x = 200, y = 200, r = 100, fs = 36;
var circle = paper.circle( x, y, r ).attr( { fill: 'red', 'fill-opacity': 0.5 } );
var label = paper.text( x, y, "CLICK" ).attr( { fill: 'white', 'fill-opacity': 0.75, 'font-size': fs, 'font-weight': 800 } );
var set = paper.set( circle, label );
$(set.node).contextMenu( { menu: 'myMenu' } ); 
```

[您可以在我的网站上](http://voidblossom.com/testContextMenus.php)看到此代码的模拟。上下文菜单与我的 css 冲突存在一些问题，但您可以看到基本功能在那里。

# iphone - 使用 CMDeviceMotion 旋转图像

> ID：11886503
> 
> 赞同：0
> 
> 时间：2012-08-09T15:12:25.473
> 
> 标签：iphone, rotation, calayer, accelerometer, motion

我正在尝试旋转图像（三角形）以使其与重力对齐。所以那个角落总是向下的。但没有任何帮助。三角要疯了。

```
double accelX = motion.userAcceleration.x;
double accelY = motion.userAcceleration.y;
rollingX = (accelX * kFilteringFactor) + (rollingX * (1.0 - kFilteringFactor));
rollingY = (accelY * kFilteringFactor) + (rollingY * (1.0 - kFilteringFactor));
accelX = accelX - rollingX;
accelY = accelY - rollingY;
float angle = atan2(accelY, accelX);

[rootLayer setAnchorPoint:CGPointMake(0.5, 0.5)];
CATransform3D rotation = CATransform3DIdentity;
rotation.m34 = 1.0f / -500.0f;
rotation = CATransform3DRotate(rotation, angle, 0.0f, 0.0f, 1.0f);
rootLayer.sublayerTransform = rotation; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:34:19.340

假设`motion`指的是 CMDeviceMotion 的实例，您应该使用[重力](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/gravity)属性而不是用户加速度。然后你必须直接使用重力矢量，即没有任何过滤。这是最简单和推荐的方法，因为它也使用陀螺仪来提高精度。

如果因为要支持没有陀螺仪的旧设备而必须使用纯加速度计数据，则必须使用 CMMotionManager 的[accelerometerData](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/occ/instp/CMMotionManager/accelerometerData)属性。但是有一个小错误。该代码将高通滤波器应用于低通滤波器，`accelX`而`accelY`不是低通滤波器。所以它应该看起来像：

```
double accelX = motionManager.accelerometerData.acceleration.x;
double accelY = motionManager.accelerometerData.acceleration.y;
rollingX = (accelX * kFilteringFactor) + (rollingX * (1.0 - kFilteringFactor));
rollingY = (accelY * kFilteringFactor) + (rollingY * (1.0 - kFilteringFactor));
float angle = atan2(rollingY, rollingX); 
```

< `filteringFactor`= 0.3

# android - 如何减少 Android xml 布局中文本周围的填充？

> ID：11886509
> 
> 赞同：5
> 
> 时间：2012-08-09T15:12:59.387
> 
> 标签：android, android-layout

我有 1 英寸高的文本，但视图框占用 1.5 英寸，因此白色字体上方和下方有 1/4 英寸的黑色空间。我想减少 1/4 英寸，这样我就可以在 6 英寸的屏幕上获得 5 行文本，而不仅仅是 4 行。我可以使用 android:lineSpacingMultiplier=".66" 将它们靠得更近，但这只会让框更近一些在一起，1/4 英寸的黑色空间覆盖了附近行的文本。android:includeFontPadding="false" 什么都不做。负填充什么都不做。放入 android:lineSpacingExtra="-50sp" 也只是让黑色边距覆盖相邻的文本行。我想摆脱边距（实际上，只是大部分）。

我已经尝试了我能想到的所有选项，包括上面讨论的明显的填充和边距以及填充，包括零和负数。我找不到显示实际文本上方视图中控制空间的简单图表。

如何减少这种浪费的空间？

（过去 2 小时我的网络中断了，所以我花了一些时间回复。抱歉）

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textTimer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:includeFontPadding="false"
    android:text="10.01"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/font_size" />

<TextView
    android:id="@+id/textTimeToLine"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textTimer"
    android:layout_centerHorizontal="true"
    android:includeFontPadding="false"
    android:text="10.02"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/font_size" />

<TextView
    android:id="@+id/textTimeToKill"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textTimeToLine"
    android:layout_centerHorizontal="true"
    android:includeFontPadding="false"
    android:text="10.03"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/font_size" />

<TextView
    android:id="@+id/textTimeToPin"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textTimeToKill"
    android:layout_centerHorizontal="true"
    android:includeFontPadding="false"
    android:text="10.03"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/font_size" />

<TextView
    android:id="@+id/textTimeToCB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textTimeToPin"
    android:layout_centerHorizontal="true"
    android:includeFontPadding="false"
    android:text="10.03"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/font_size" />

    <Button
    android:id="@+id/buttonMenu"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Menu" 
    android:onClick="onMenu"
    android:focusable="false"/>

</RelativeLayout> 
```

在这个屏幕截图中，您可以看到喜欢的边框或边距是我想要减少的区域。

![截屏](../Images/b8eb7bc903cd329250112308fd49d252.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:37:25.933

一些负的顶部和底部边距。但是，如果您有精美的背景，事情就会变得一团糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:34:14.963

在填充元素中使用负值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:34:15.323

我认为问题是由于在**textTimeToPin**视图中设置了填充/边距。如果您为此视图设置了任何间距，那么它将影响**textTimeToCB**的放置，因为它被设置为显示在其下方。

查看您的 xml 以获取周围视图或将其完全粘贴以供我们更好地观察。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T01:52:51.583

你试过这个吗？：

```
android:padding="5dp" 
```

# testing - 单击 Selenium webdriver 中的提交按钮时，是否有办法将注意力集中在不同的元素上

> ID：11886510
> 
> 赞同：2
> 
> 时间：2012-08-09T15:13:01.077
> 
> 标签：testing, selenium, automation, webdriver, selenium-webdriver

我正在使用 Selenium WebDriver 并有一个列表，在我提交时我需要一个元素保持选中状态。

但是当我找到元素并单击它时，焦点会转移到按钮上，因此不再选择项目。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:13:17.237

尝试将 Enter 键传递给输入字段：

```
el.sendKeys(Keys.ENTER); 
```

要不就：

```
el.submit(); 
```

# javascript - setInterval 或 window.location 在 Opera、IE 和 Safari 中无法正常工作

> ID：11886511
> 
> 赞同：1
> 
> 时间：2012-08-09T15:13:01.487
> 
> 标签：javascript, jquery, redirect, cookies, setinterval

如果存在 cookie，我正在尝试进行重定向，它适用于 Chrome 和 Firefox，但不适用于 Opera、IE 和 Safari。

```
function listenCookieChange() {
   var intervalHolder = setInterval(function() {
   if(getCookie('foo')){
      clearInterval(intervalHolder);

      window.location.href = 'http://XXXXXXXXXXXXXX/inscription2.php';
   }
}, 100);
}
listenCookieChange(); 
```

cookie 是在浏览器上设置的，因此问题不在于该部分。

提前致谢

编辑：这是 getCookie 的代码

```
function getCookie(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name)
        {
            return unescape(y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:48:42.080

找不到任何故障。已在 IE7-IE9 和 Opera 10-11 上测试过您的脚本。

```
function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

function listenCookieChange() {
    var intervalHolder = setInterval(function() {
        if (getCookie('foo')) {
            clearInterval(intervalHolder);

            //window.location.href = 'http://XXXXXXXXXXXXXX/inscription2.php';
            alert('true');
        }
    }, 100);
}
listenCookieChange();

document.cookie = 'foo = true';​ 
```

# java - Android DataPickerDialog onDateChanged 未触发

> ID：11886514
> 
> 赞同：4
> 
> 时间：2012-08-09T15:13:11.047
> 
> 标签：java, android

按照 Android 教程中的步骤，我遇到了 DatePickerDialog 的问题。

在获得焦点时链接 TextView 以启动 DatePickerDialog，如下所示：

```
EditText fNac = (EditText)findViewById(R.id.regFecha);
            fNac.setonfocusChangeListener(new View.onfocusChangeListener(){

                    @Override
                    public void onfocusChange(View v, boolean hasFocus) {
                            // TODO Auto-generated method stub
                            // Desde aquí lanzamos el datepicker
                            if (hasFocus){
                                    DialogFragment newFragment = new DatePickerFragment();
                                    newFragment.show(getSupportFragmentManager() , "datePicker");
                            }
                    } 
```

工作正常，DatePickerDialog 已启动。我实例化了一个以这种方式创建的新 DatePickerFragment 类：

```
import java.util.Calendar;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.util.Log;
import android.widget.DatePicker;

public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    private DatePickerDialog mDatePickerDialog;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState){
            // Usamos la fecha actual como primera fecha a mostrar
            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = c.get(Calendar.DAY_OF_MONTH);

            // Devolvemos la instancia de un Dialog con la fecha actual
            mDatePickerDialog = new DatePickerDialog(getActivity(),this,year,month,day);
            return mDatePickerDialog;
    }

    @Override
    public void onDateSet(DatePicker view, int year, int month, int day) {
            // TODO Auto-generated method stub
            Log.v("LOG_CAT","OK");
    }

    public void onDateChanged(DatePicker view, int year, int monthOfYear,
                    int dayOfMonth) {
            // TODO Auto-generated method stub
            Log.v("LOG_CAT", "Ok2");
    } 
```

}

这就是问题所在。我想使用 onDateChanged 方法更改对话框的标题，但它从未被调用过。我试图创建一个 onDateChangedListener 但 DatePickerDialog 没有。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:05:17.470

只需扩展 DatePickerDialog 类并覆盖 onDateChanged，如下所示。我包含了一个新的构造函数，它接受一个 Calendar 对象并自行设置年、月和日，从而为您节省了不必要的输入。（我不明白为什么这不是一个选项。）无论如何这里是如何使用类和较短的构造函数：

```
public class DatePickerFragment extends DialogFragment implements OnDateSetListener {
    public class MyDatePickerDialog extends DatePickerDialog {
        private Calendar calendar;
        private final String format = "EEEE, MMMM dd, yyyy";

        // Regular constructor
        public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
            super(context, callBack, year, monthOfYear, dayOfMonth);
            calendar = Calendar.getInstance();
        }

        // Short constructor
        public MyDatePickerDialog(Context context, OnDateSetListener callBack, Calendar calendar) {
            super(context, callBack, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
            this.calendar = calendar;
        }

        @Override
        public void onDateChanged(DatePicker view, int year, int month, int day) {
            super.onDateChanged(view, year, month, day);
            calendar.set(year, month, day);
            setTitle(DateFormat.format(format, calendar));
        }
    }

    private MyDatePickerDialog mDatePickerDialog;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        mDatePickerDialog = new MyDatePickerDialog(this, this, Calendar.getInstance());
        return mDatePickerDialog;
    }

    @Override
    public void onDateSet(DatePicker view, int year, int month, int day) {
        Log.v("DatePickerFragment", "onDateSet");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T13:42:16.817

我有解决方案，只需在对话框中获取 DatePicker 并设置 init 方法

这是示例：

> android.widget.DatePicker datePicker = mDatePickerDialog.getDatePicker();

并像这样设置初始化

> datePicker.init(int YEAR, int MONTH, int Day, OnDateChangedListener)

希望这有帮助

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T16:20:53.960

也许你应该说

```
public class DatePickerFragment extends DialogFragment 
    implements DatePickerDialog.OnDateSetListener, DatePicker.OnDateChangedListener {
    ...
} 
```

# php - 比较问题

> ID：11886517
> 
> 赞同：0
> 
> 时间：2012-08-09T15:13:21.690
> 
> 标签：php, string, comparison, boolean

这真让我抓狂！我有一个表单，应该对名为“范围”的文本输入进行一些验证。

```
 function splitRange($range){
      if($range == ''){
        $returnedValue = '';
        return $returnedValue;
      }

      // some other code here
      return false;
    }    

    // ----------------

    $myRange = splitRange($_POST['range']);

    if($myRange == false){
      echo 'error';
    } 
```

当“范围”留空时，这会一直返回错误并回显“错误”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:19:32.093

您最后的最终比较状态

```
if($myRange == false){
  echo 'error';
} 
```

这意味着“如果`$myRange`是假-y，回显'错误'”

换句话说，

```
if ($myRange == "") 
```

和

```
if ($myRange == false) 
```

是等价的。

如果您希望它比较是否`$myRange`为 boolean `false`，请使用

```
if($myRange === false) 
```

# objective-c - UIView 在 iOS 设备上不透明，但在模拟器上是透明的

> ID：11886520
> 
> 赞同：3
> 
> 时间：2012-08-09T15:13:48.847
> 
> 标签：objective-c, ios, cocoa-touch, uiview, transparency

有一个我想让它透明的视图，它可以在模拟器上运行，但由于某种原因不在我的设备上。我不知道为什么会这样。我的代码如下所示：

```
- (void)viewDidLoad

    [...]
    UIView *transparentBackgroundView = [[UIView alloc] initWithFrame:self.view.frame];

    // Doesn't work on my device. 
    transparentFlipBackgroundView.backgroundColor = [UIColor clearColor];

    // I have also tried. 
    // transparentFlipBackgroundView.alpha = 0;
    // transparentFlipBackgroundView.opaque = YES
    // transparentFlipBackgroundView.layer.backgroundColor = [UIColor clearColor].CGColor;

    // I later add the view to an array...
    self.pageViews = [[NSMutableArray alloc] initWithObjects:transparentFlipBackgroundView, lastPage, nil];  
    [...]
} 
```

任何想法为什么会发生这种情况，我应该如何使 UIView 透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:16:04.647

尝试改变

```
transparentFlipBackgroundView.backgroundColor = [UIColor clearColor]; 
```

到

```
transparentFlipBackgroundView.backgroundColor = 
                                      [UIColor colorWithRed:0 green:0 blue:0 alpha:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:59:26.710

你有其他设备可以试用吗？如果它可以在模拟器上运行，那么它肯定也可以在您的设备上运行吗？如果您愿意，我不介意尝试我的其中一种设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T22:55:52.757

我在使用 XCode5 和 iOS7 SDK 时遇到了这个问题。我发现我在辅助功能设置（设置/常规/辅助功能）下打开了“增加对比度”。这导致导航栏的透明度低于关闭此设置时的透明度。

将其关闭，现在我可以看到栏杆后面的一些透明度。它仍然不如模拟器，但现在更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:13:12.377

相当hacky的解决方案，但我通过使用CGRectZero制作视图来修复它。

# android - 在启动时启动并启动 URI 请求以启动另一个应用程序的 Android 服务

> ID：11886521
> 
> 赞同：0
> 
> 时间：2012-08-09T15:13:48.887
> 
> 标签：android, service, broadcastreceiver, uri, autostart

我需要编写一个在设备启动时启动的服务，并启动一个 URI 来启动另一个应用程序。我的研究表明我必须使用广播接收器，但我是 android 新手。请给我一些源代码，或者指出一个有用的方向。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:29:12.530

这是如何监听设备启动完成动作，接收广播消息并启动服务。

AndroidManifest.xml

```
<receiver android:name=".DeviceBootListener">
    <intent-filter android:priority="0">
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

广播接收器：

```
public class DeviceBootListener extends BroadcastReceiver 
{

@Override
public void onReceive(Context context, Intent intent) 
{
    Intent myService = new Intent(context, MyService.class);
    context.startService(myService);
}
} 
```

# c# - 控制器中的 MVC3 自动完成和 POST 方法

> ID：11886524
> 
> 赞同：1
> 
> 时间：2012-08-09T15:13:57.043
> 
> 标签：c#, javascript, asp.net-mvc, autocomplete

我有一个 MVC Razor View 页面作为表单，供人们输入详细信息并提交到数据库。它使用下拉列表工作，但我想在表单中添加一个自动完成文本框。这很好用，但是当发回 POST 控制器时，它总是将人的 ID 设置为 0。有任何想法吗？

谢谢

Javascript：

```
 script type="text/javascript">

   $(document).ready(function () {
        $("#PersonName").autocomplete({
            source: '@Url.Action("AutocompleteSuggestions")',
            minLength: 2,

            select: function (event, ui) {
                if (ui.item) {
                    $("#PersonName").val(ui.item.label);
                    $("#PersonId").val(ui.item.value);
                }
            }
        });
    });
</script> 
```

控制器：

```
 [HttpPost]
    public ActionResult Create(MappingModel view)
    {

        if (ModelState.IsValid)
        {
            var entity = new PersonContempancy();
            entity.PersonId = view.PersonId;
            entity.FrameworkId = view.FrameworkId;
            entity.ContempancyCategoryId = view.ContempancyCategoryId;
            entity.ContempancyId = view.ContempancyId;
            entity.ContempancyLevelId = view.ContempancyLevelId;
            entity.FrameworkLevelId = view.FrameworkLevelId;
            db.PersonContempancies.Add(entity);
            db.SaveChanges();

            return RedirectToAction("Index");  
        }

        ViewBag.Contepancies = db.Contempancies.ToList();
        ViewBag.ContempancyCategory = db.ContempancyCategories.ToList();
        ViewBag.ContempancyLevel = db.ContempancyLevels.ToList();
        ViewBag.FrameworkLevel = db.FrameworkLevels.ToList();
        ViewBag.Person = db.People.ToList();
        ViewBag.Framework = db.Frameworks.ToList();

        return View();
    }

  public ActionResult AutocompleteSuggestions(string term)
    {

        var namelist = db.People.Where(c => c.PersonName.Contains(term)).Select(c => new { value = c.PersonId, label = c.PersonName}).Distinct().Take(10);

        return Json(namelist.ToArray(), JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:18:27.837

查看您的 AutoCompleteSuggestions 代码，您在返回 JSON 时似乎只发回了人名，而不是人的 ID。如果我理解正确，您需要返回名称和 ID，并通过 JQuery 在自动完成功能的选择功能中设置人员 ID。它应该（大致）看起来像这样：

```
var namelist = (from c in db.People where c.PersonName.Contains(term) select new { c.PersonName, c.PersonID}).Distinct().Take(10).ToArray();
return Json(namelist.ToArray(), JsonRequestBehavior.AllowGet); 
```

和

```
 $("#searchTerm").val(ui.item.value.PersonName);
     $("#PersonID").val(ui.item.value.PersonID); 
```

# facebook - 多个帐户的 Facebook 无人值守访问

> ID：11886525
> 
> 赞同：1
> 
> 时间：2012-08-09T15:13:58.727
> 
> 标签：facebook, authentication, facebook-c#-sdk

我的应用程序将用于读取多达 20 个 Facebook 页面的墙壁，并代表这些页面发布和执行其他经过身份验证的活动。

通过图形 API 可以轻松检索墙上的帖子。但是，代表这些用户中的每一个发布和做其他事情是我的问题所在。

多一点背景：

该应用程序将拥有将推动消息发送的用户。这些用户很乐意手动授予对我们应用程序的访问权限作为一次性练习，但他们不想在每次运行应用程序时都登录。

问题：

我想在安装期间收集*一次*登录/密码详细信息- 并让应用程序服务器以“无人值守”的方式处理令牌请求、发布活动和其他事情。这是可能的 - 如果是这样，怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:09:22.943

您需要的只是`manage_pages`许可。然后通过查询获取页面访问令牌..

```
 [User ID]/accounts 
```

获得访问令牌后，通过...永久扩展该访问令牌

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

*注意*：扩展访问令牌仅对页面访问令牌永久有效。其他扩展访问令牌仅持续 60 天。

来源：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# java - 如何创建内部类的 Spring Bean？

> ID：11886526
> 
> 赞同：27
> 
> 时间：2012-08-09T15:13:59.817
> 
> 标签：java, spring

我想创建一个内部类的 Spring Bean。如果我有以下内部类`B`：

```
package x.y.z;

public class A {
    public class B { }
} 
```

我想在我的 XML 配置文件中创建 bean 实例。

```
<bean class="x.y.z.A.B" name="innerBean" /> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-09T15:13:59.817

您不能使用点 ( `.`) 表示法访问您的公共静态内部类，而是使用货币 ( `$`)。一个例子：

```
<bean class="x.y.z.A$B" name="innerBean" /> 
```

这将起作用。

# ajax - 超时期间的提琴手行为

> ID：11886529
> 
> 赞同：4
> 
> 时间：2012-08-09T15:14:10.573
> 
> 标签：ajax, timeout, fiddler

我正在使用 Fiddler 来追踪浏览器应用程序和服务器之间的超时问题。我想知道的是服务器是否正在发送被浏览器忽略的响应，或者服务器是否根本不发送响应。在 Fiddler 中，当它工作时，我可以在一行中看到请求和响应。当它不起作用时，我只看到请求而没有产生其他行。这是否意味着服务器永远不会响应？（我希望我能在浏览器上的应用程序忽略的单独行上看到服务器的响应。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:58:08.073

如果没有看到响应，那么当浏览器发送数据时，超时很可能是在尝试连接服务器发送数据。

所以，缺乏回应是什么都没有回来。

因此，您的服务器有时会遇到接受连接的问题。

# go - 在 Golang 中终止以 os/exec 开始的进程

> ID：11886531
> 
> 赞同：82
> 
> 时间：2012-08-09T15:14:14.727
> 
> 标签：go

有没有办法终止在 Golang 中以 os.exec 开始的进程？例如（来自[http://golang.org/pkg/os/exec/#example_Cmd_Start](http://golang.org/pkg/os/exec/#example_Cmd_Start)），

```
cmd := exec.Command("sleep", "5")
err := cmd.Start()
if err != nil {
    log.Fatal(err)
}
log.Printf("Waiting for command to finish...")
err = cmd.Wait()
log.Printf("Command finished with error: %v", err) 
```

有没有办法提前终止该过程，也许在 3 秒后？

提前致谢

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-08-09T15:32:32.923

运行并终止`exec.Process`：

```
// Start a process:
cmd := exec.Command("sleep", "5")
if err := cmd.Start(); err != nil {
    log.Fatal(err)
}

// Kill it:
if err := cmd.Process.Kill(); err != nil {
    log.Fatal("failed to kill process: ", err)
} 
```

超时后运行并终止`exec.Process`：

```
ctx, cancel := context.WithTimeout(context.Background(), 3 * time.Second)
defer cancel()

if err := exec.CommandContext(ctx, "sleep", "5").Run(); err != nil {
    // This will fail after 3 seconds. The 5 second sleep
    // will be interrupted.
} 
```

*[请参阅Go 文档](https://pkg.go.dev/os/exec#example-CommandContext)中的此示例*

* * *

**遗产**

*在 Go 1.7 之前，我们没有这个`context`包，这个答案是不同的。*

`exec.Process`使用通道和 goroutine 在超时后运行和终止：

```
// Start a process:
cmd := exec.Command("sleep", "5")
if err := cmd.Start(); err != nil {
    log.Fatal(err)
}

// Wait for the process to finish or kill it after a timeout (whichever happens first):
done := make(chan error, 1)
go func() {
    done <- cmd.Wait()
}()
select {
case <-time.After(3 * time.Second):
    if err := cmd.Process.Kill(); err != nil {
        log.Fatal("failed to kill process: ", err)
    }
    log.Println("process killed as timeout reached")
case err := <-done:
    if err != nil {
        log.Fatalf("process finished with error = %v", err)
    }
    log.Print("process finished successfully")
} 
```

要么进程结束并且接收到它的错误（如果有的话），`done`要么已经过去了 3 秒并且程序在完成之前被杀死。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-10-26T16:04:12.243

关于调用的其他答案是正确的`Kill()`，但是关于在超时后终止进程的部分现在已经过时了。

现在可以使用`context`包和[exec.CommandContext](https://golang.org/pkg/os/exec/#CommandContext)来完成此操作（示例改编自文档中的示例）：

```
func main() {
    ctx, cancel := context.WithTimeout(context.Background(), 100*time.Millisecond)
    defer cancel()

    if err := exec.CommandContext(ctx, "sleep", "5").Run(); err != nil {
        // This will fail after 100 milliseconds. The 5 second sleep
        // will be interrupted.
    }
} 
```

从文档：

> 如果上下文在命令自行完成之前完成，则提供的上下文用于终止进程（通过调用 os.Process.Kill）。

完成后`Run()`，您可以检查`ctx.Err()`. 如果达到超时，则返回的错误类型将为[DeadLineExceeded](https://golang.org/pkg/context/#pkg-variables)。如果是`nil`，请检查`err`返回的`Run()`以查看命令是否完成且没有错误。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-04T04:21:25.010

没有选择和通道的更简单的版本。

```
func main() {
    cmd := exec.Command("cat", "/dev/urandom")
    cmd.Start()
    timer := time.AfterFunc(1*time.Second, func() {
        err := cmd.Process.Kill()
        if err != nil {
            panic(err) // panic as can't kill a process.
        }
    })
    err := cmd.Wait()
    timer.Stop()

    // read error from here, you will notice the kill from the 
    fmt.Println(err)
} 
```

> 好吧，在咨询了一些有经验的 go 程序员之后，这显然不是解决问题的 GOly 方法。所以请参考接受的答案。

* * *

这是一个更短的版本，而且非常直接。但是，如果超时时间很长，可能会有大量挂起的 goroutine。

```
func main() {
    cmd := exec.Command("cat", "/dev/urandom")
    cmd.Start()
    go func(){
        time.Sleep(timeout)
        cmd.Process.Kill()
    }()
    return cmd.Wait()
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-29T13:46:00.803

虽然`exec.CommandContext`在大多数情况下非常方便并且工作正常，但我在这个过程中遇到了一些问题'孩子们活着 - 这导致了`cmd.Wait()`挂起。

如果有人遇到类似情况，这就是我解决问题的方法。

1.  请求在启动命令之前创建进程组使用`Setpgid`
2.  启动一个 go 例程，该例程将在超时时终止**进程组**

朴素的例子（为了可读性）：

```
cmd := exec.Command("sleep", "5")

// Request the OS to assign process group to the new process, to which all its children will belong
cmd.SysProcAttr = &syscall.SysProcAttr{Setpgid: true}

go func() {
    time.Sleep(time.Second)
    // Send kill signal to the process group instead of single process (it gets the same value as the PID, only negative)
    syscall.Kill(-cmd.Process.Pid, syscall.SIGKILL) 
}

err := cmd.Run()
if err != nil {
    log.Fatal(err)
}
log.Printf("Command finished successfully") 
```

一个更好的例子（对于新的 Gophers 可能不太直观）：

```
 // Create a context with timeout, which will close ctx.Done() channel upon timeout
    ctx, cancel := context.WithTimeout(context.Background(), time.Second)
    defer cancel() // Make sure the context is canceled, which will close ctx.Done() channel on function exit
    cmd := exec.Command("sleep", "5")

    // Request the OS to assign process group to the new process, to which all its children will belong
    cmd.SysProcAttr = &syscall.SysProcAttr{Setpgid: true}

    go func() {
        // Wait until timeout or deferred cancellation
        <- ctx.Done()

        // Send kill signal to the process group instead of single process (it gets the same value as the PID, only negative)
        _ = syscall.Kill(-cmd.Process.Pid, syscall.SIGKILL)
    }()

    err := cmd.Run()
    if err != nil {
        log.Fatal(err)
    }
    log.Printf("Command finished successfully") 
```

PS 为简洁起见，我将`cmd.Start`+`cmd.Wait`替换为`cmd.Run`

# c# - OdbcConnection 到本地 DBF 文件在一个应用程序中失败，但在另一个应用程序中失败

> ID：11886533
> 
> 赞同：3
> 
> 时间：2012-08-09T15:14:22.917
> 
> 标签：c#, .net, odbc, database-connection, dbf

问候堆栈溢出，

我在我的两个 C# 项目中使用了以下代码块，一个是我的原型方法和代码块的项目，另一个是我的实际项目。

```
DataSet set = new DataSet();
String path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
File.Copy(path + "\\template.dbf", path + "\\" + DateTime.Now.ToString("yyyyMMdd") + ".dbf", true);

using (OdbcConnection connection = new OdbcConnection("Driver={Microsoft dBASE Driver (*.dbf)}; DriverID=277;Dbq=" + path + ";"))
{
    OdbcDataAdapter adapter = new OdbcDataAdapter(String.Format("SELECT * FROM {0}.dbf", DateTime.Now.ToString("yyyyMMdd")), connection);
    OdbcCommandBuilder builder = new OdbcCommandBuilder(adapter);
    connection.Open();
    adapter.Fill(set);

    // Database manipulation goes here

    adapter.Update(set);
} 
```

在原型应用程序中，此代码块运行良好，而在另一个项目中，当我调用`connection.Open();`. 该`template.dbf`文件存在于两个项目中，两个项目都将该模板文件复制到输出构建目录，`File.Copy()`调用在这两种情况下都很好，并且它们都逐字使用此代码块，但是在一个项目中它失败了，而在另一个项目中它工作正常。我什至将原型项目中的连接字符串更改为从另一个项目的构建目录中工作，并且工作正常。

这是我收到的例外：

`ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified`

此外，我尝试`template.dbf`在两个项目中连接到文件而不是复制版本，原型项目连接正确，而另一个项目失败并出现相同的异常。

我一生都无法弄清楚这两个项目之间的区别是什么。是否有其他一些我可以在两个项目中使用的代码块做同样的事情？

编辑：为了澄清，这不是一个复杂的项目或任何东西。这只是我在 Visual Studio 2010 中使用 Visual Studio 提供的默认设置处理的两个简单的 Windows 控制台应用程序。

# php - 如何正确解码 XML 文件中的特殊字符？

> ID：11886535
> 
> 赞同：4
> 
> 时间：2012-08-09T15:14:26.700
> 
> 标签：php, xml, unicode, character-encoding, libxml2

在我正在解析的一些 XML 文件（通常是 RSS）中，我遇到了包含字符的文本，这些字符在我从节点中提取文本之后`Today’s Newest`会变成这样。`Todayâ€™s Newest`这告诉我我处理解码过程*不正确*。

我可以简单地[修补我的脚本](http://shiflett.org/blog/2005/oct/convert-smart-quotes-with-php)来修复这个错误，但是如果有许多其他字符变得乱码怎么办？在将 XML 文件转换为 UTF-8 脚本时，在不破坏编码的情况下消化 XML 文件的正确方法是什么？

以下是我尝试过的一些似乎不太奏效的方法：

```
$xml = file_get_contents($file);

// One: still contains â€™
//$xml = @iconv('UTF-8', 'UTF-8//IGNORE', $xml);

// Two: LibXMLError Entity 'rsquo' not defined
//$xml = htmlentities($xml, null, 'UTF-8');
//$xml = htmlspecialchars_decode($xml, ENT_QUOTES);

// Three: still contains â€™
//$xml = mb_convert_encoding($xml, "UTF-8", "UTF-8");

$xml = simplexml_load_string($xml, null, LIBXML_NOCDATA | LIBXML_NOENT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:29:59.917

检查你如何输出你的内容。如果输出目标不支持 UTF-8，也会发生这种情况。

我假设您输出到浏览器，因此请检查浏览器编码并尝试将其显式设置为 UTF-8，因为您可能会从 XML 获得正确的文本，但它只是显示错误。

如果上面没有帮助，也尝试使用[DOMDocument加载 XML](http://www.php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:22:24.837

试试这个：

`$xml = simplexml_load_string($xml, null, LIBXML_NOCDATA | LIBXML_NOENT); $xml->addAttribute('encoding', 'UTF-8');`

# jira - 防止匿名用户看到敏捷板

> ID：11886537
> 
> 赞同：1
> 
> 时间：2012-08-09T15:14:29.053
> 
> 标签：jira, greenhopper

有没有办法阻止匿名用户在 greenhopper 中看到敏捷板？我已经检查了全局权限，但没有找到任何可以让我限制董事会可见性的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:31:41.053

根本无法阻止敏捷菜单的出现。

但是，如果您试图阻止匿名用户访问计划/任务/图表/已发布板，则可以通过限制“浏览项目”权限来实现。

如果您想阻止匿名用户看到快速板，请检查板使用的已保存过滤器的权限。只有有权查看已保存过滤器的用户才能看到快速板。

谢谢，肖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:07:36.950

正如肖恩所说，解决方案是与谁共享过滤器。将其更改为仅与授权用户共享将对匿名用户隐藏。

![在此处输入图像描述](../Images/d0b2956aacecd533a2fa0819991cd82c.png)

# jenkins - 插件安装后詹金斯用错误的端口重新启动

> ID：11886538
> 
> 赞同：1
> 
> 时间：2012-08-09T15:14:31.647
> 
> 标签：jenkins

我正在使用 java 包装器在 winstone 上运行 jenkins。

在我的 wrapper.conf 中，我们将 8070 设置为我们的 jenkins 实例监听的 http 端口。

当从命令行手动启动或重新启动我的詹金斯实例时，例如`rc.d start jenkins`，一切都按预期工作，我的实例已启动并绑定到 8070 端口。

但是，在我安装了 jenkins 插件并选择“插件安装后自动重启”后，我的 jenkins 实例在**端口 32000**上启动。我不确定为什么会发生这种情况，每次发生这种情况时，我都必须 - 在命令行中 - 手动停止我的 jenkins 实例并重新启动它。

是否需要设置配置以确保我的 jenkins - 从其界面重新启动时 - 使用 java 包装服务（包含正确的端口 - 8070）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:50:02.303

当 Jenkins 使用 Java 包装服务启动时，不建议使用自动重启。自动重启假设 Jenkins 是手动启动的，并且无法使用服务重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:08:19.490

包装器本身使用端口 32000。它不是詹金斯的 http 端口。我在自动重启和 java 服务包装器方面遇到了同样的问题。不知道为什么“Jenkins 使用 Java wrapper 服务启动时不建议使用自动重启”？我从来没有读过任何关于它的东西！确保自动重启后它不会在 8070 端口上侦听（使用 netstat 测试）。

# python - 为什么 Python 导入语句必须使用“exec”（而不是“eval”）？

> ID：11886540
> 
> 赞同：13
> 
> 时间：2012-08-09T15:14:36.917
> 
> 标签：python, eval, jython

我正在尝试使用 Jython 从 Java 中运行一段 Python。如果我使用 exec 语句导入，一切正常。

```
PythonInterpreter pi = new PythonInterpreter();
pi.exec("import re");
PythonObject o = pi.eval("re.match('abc', 'abc123')"); // returns a MatchObject
o = pi.eval("re.match('abc', 'def123')"); // returns Py.None 
```

但是，如果我尝试将这两条线结合起来，那么一切都会崩溃。这：

```
PythonInterpreter pi = new PythonInterpreter();
pi.eval("import re"); // exception!
PythonObject o = pi.eval("re.match('abc', 'abc123')"); // never gets here
o = pi.eval("re.match('abc', 'def123')"); // .... 
```

...引发异常`"no viable alternative at input 'import'", ('<string>',1,0,'import re\n')`。

这很重要，因为理想情况下我希望能够将整个脚本评估为单个字符串，而不必将导入分解为单独的部分。难道我做错了什么？是否有另一种方法可以告诉 Jython“获取整个脚本，包括导入，并运行它，然后给我一个结果”？这需要在运行时进行——将 Python 预编译成`.class`文件不是一种选择。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T15:17:40.987

问题是**eval** *评估表达式*并*返回一些结果*，而**exec** 在某些上下文中*执行语句。*import 是一个语句，而 re.match() 是一个表达式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-11T13:37:33.463

试试这个，

```
eval("__import__('re').match('abc', 'abc123')") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:57:36.400

这里的结果是什么意思？

我假设它是您脚本的一些计算值。根据'exec'的文档，代码在当前范围内运行。因此，您必须能够访问您在 exec 语句中创建的任何新符号的值。

```
a = 20
b = 10
exec("c = a + b")
print c 
```

上面的代码应该打印 30。

# .net - AWS 发布增量，排除服务器上的一些文件夹

> ID：11886544
> 
> 赞同：2
> 
> 时间：2012-08-09T15:14:47.123
> 
> 标签：.net, visual-studio-2010, amazon-ec2, amazon-web-services, amazon-elastic-beanstalk

我们正在使用 AWS 资源管理器将我们的网站更改从 Visual Studio 发布到我们在 Amazon 中的 Elastic beanstalk 实例。我们正在使用“增量部署应用程序”，这很好。

唯一的问题是，当我们发布时，所有不属于部署包的额外文件夹都将被删除。我有一些文件夹应该在服务器的网站根目录上。我不希望亚马逊发布触及这些文件夹。无论如何，我可以在某个地方指定此排除项。

您的意见将极大地帮助我们节省时间。提前致谢。

# windows - 在远程计算机上安装网络打印机

> ID：11886551
> 
> 赞同：1
> 
> 时间：2012-08-09T15:15:10.340
> 
> 标签：windows, networking, printers

我希望有人能指出我正确的方向。

我希望能够远程管理用户的网络打印机。这意味着，可以使用 PowerShell 或 C# 之类的工具来选择计算机名称或 IP 地址，然后选择打印机（位于打印服务器上，例如 \PrintServer\Printer01）并将其安装在目标用户的计算机上。

我已经看到由于权限而确实说过的话，我可能必须伪造身份才能为用户正确安装它。

我注意到 powershell 有一个 Add-Printer cmdlet，但它告诉我它在我的机器上无法识别。但运行类似：*add-printer -r CompName -p \server\Printer01*然后远程计算机*CompName*从打印服务器获取打印机信息并安装它。

我不是在做梦吧？哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:00:26.057

Win32 函数[AddPrinterDriver](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183346%28v=vs.85%29.aspx)和[AddPrinter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183343%28v=vs.85%29.aspx)可以在远程机器上安装打印机。但是，在调用 AddPrinterDriver 函数之前，您必须将驱动程序的所有必要文件复制到远程计算机的 \windows\system32\spool\drivers\[w32x86|x64] 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-13T13:14:28.703

这些 Powershell 命令可以提供帮助：

# 添加打印机端口

```
Add-PrinterPort -Name $PrinterPort -PrinterHostAddress $PrinterIP -ComputerName $Computer 
```

# 添加打印机

```
Add-Printer -computername $Computer -name $PrinterName -PortName $PrinterName-DriverName "HP Universal Printing PCL 6" 
```

# sql - 获得大量重复项？Left Join 不正确？

> ID：11886554
> 
> 赞同：2
> 
> 时间：2012-08-09T15:15:21.087
> 
> 标签：sql

这是我的查询示例：

```
SELECT ...
TRIM(eml.fxeml1) as "Email Address"
FROM pfship

LEFT JOIN mstfxem fax
ON fax.fxco=pfship.cshco AND fax.fxdiv=pfship.cshdiv AND fax.fxsold=pfship.cshsld
AND fax.fxtype='C' AND TRIM(fax.fxfax1) <> '' AND fax.fxdept LIKE '*F%'

LEFT JOIN mstfxem eml
ON eml.fxco=pfship.cshco AND eml.fxdiv=pfship.cshdiv AND eml.fxsold=pfship.cshsld
AND eml.fxtype='C' AND TRIM(eml.fxeml1) <> '' AND eml.fxdept LIKE '*E%'

WHERE ((pfship.cshco || '/' || pfship.cshdiv) = ?)
  AND (? = '*ALL' OR CAST(cshsld AS CHAR(15)) = ?) 
  AND ...
  ORDER BY TRIM(cshnme) 
```

此查询应返回 9 条记录。当我删除：

```
LEFT JOIN mstfxem fax
ON fax.fxco=pfship.cshco AND fax.fxdiv=pfship.cshdiv AND fax.fxsold=pfship.cshsld
AND fax.fxtype='C' AND TRIM(fax.fxfax1) <> '' AND fax.fxdept LIKE '*F%'

LEFT JOIN mstfxem eml
ON eml.fxco=pfship.cshco AND eml.fxdiv=pfship.cshdiv AND eml.fxsold=pfship.cshsld
AND eml.fxtype='C' AND TRIM(eml.fxeml1) <> '' AND eml.fxdept LIKE '*E%' 
```

我得到了 9 条记录，但有了它，我得到了 360 条记录。我的加入有什么问题？

谢谢

我认为问题是 1 人可以有很多电子邮件或传真，如何将结果分组为每条记录 1 个字符串，这样我最终只有 9 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:17:04.717

您的联接没有任何问题，表之间存在一对多的关系。

根据您的需要，有几种技术。首先是派生表。编写一个查询以从一对多表中仅选择一条记录（您的要求应指定要选择的记录）。而是加入那个。或者您可以在左连接上设置更多条件以仅获得一条记录。这些技术的一些示例：

```
select t1.field1, t2.email
from table1 t1 
join (select myid, max(email) as email from table2 group by myid) t2 
  on t1.myid = t2.myid 
```

或者

```
select t1.field1, t2.email
from table1 t1 
Left join from table2  t2 
  on t1.myid = t2.myid and t2.active = 1 
```

Or if you want all of the emails in a comma delimited list, that code is database specific and you would need to let us know which database backend you are using.

# c# - Linq 相等比较不起作用

> ID：11886558
> 
> 赞同：5
> 
> 时间：2012-08-09T15:15:52.627
> 
> 标签：c#, nhibernate

鉴于此方法：

```
internal static IEnumerable<Entity> GetByParentImpl<Entity, TKey>(this ICanGetByParent<Entity, TKey> self, TKey parentId, string fieldName) 
    where Entity : class 
{
    RepositoryBase<Entity> rb = (RepositoryBase<Entity>)self;
    rb.unitOfWork.Begin();

    var entities = rb.unitOfWork.Session.QueryOver<Entity>()
        .Where(e => EqualityComparer<TKey>.Default.Equals(GetId<Entity, TKey>(e, fieldName), parentId))
        .List();

    return entities;
} 
```

而这个帮手：

```
private static TKey GetId<Entity, TKey>(object obj, string fieldName) where Entity : class
{
    TKey id = default(TKey);

    switch(id.GetType().Name) {
        case "Int32":
            break;
        case "Guid":
            id = (TKey)TypeDescriptor.GetConverter(typeof(TKey)).ConvertFromInvariantString((string)typeof(Entity).GetField(fieldName).GetValue(obj));
            break;
    }

    return id;
} 
```

我在我的 linq 语句中遇到了这个异常：

> 无法识别的方法调用：System.Collections.Generic.EqualityComparer`1[[System.Guid, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]:Boolean Equals(System.Guid, System.Guid)

这是什么意思？我什至不确定如何正确调试它。我可以发誓上面的代码正在工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:55:30.947

您不能以这种方式将 linq 与任何数据库提供程序进行比较。提供者无法将其转换为表达式树。因此，您必须在 .ToArray() 之后使用它，或者使用 `Expression<Func<RegisterCardBase, bool>>`into Where 而不是 lambda。

PS：你为什么用Guid做这么奇怪的动作？它是如何存储在数据库中的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:04:29.433

NHibernate 的 Linq 提供程序尝试将 Linq 查询转换为 HQL，并最终转换为 SQL。NHibernate 默认不支持 Where 方法中的 lambda 表达式。

但是，NHibernate Linq 提供程序是[可扩展](http://fabiomaulo.blogspot.com/2010/07/nhibernate-linq-provider-extension.html)的。您可以[创建](http://www.primordialcode.com/blog/post/nhibernate-3-extending-linq-provider-fix-notsupportedexception)自己的[扩展](http://www.primordialcode.com/blog/post/nhibernate-customize-linq-provider-user-defined-sql-functions)来处理各种不受支持的表达式。

[Alessandro Giorgetti](http://www.primordialcode.com/)有一个很好的示例，介绍了如何扩展 Linq 提供程序以[`String.Equals`支持`StringComparison`选项](http://www.primordialcode.com/blog/post/linq-to-nhibernate-string.equals-with-stringcomparison-option)。

**编辑**

我刚刚意识到您使用的是 QueryOver，而不是 NHibernate Linq。您可能应该删除[linq](/questions/tagged/linq "显示标记为“linq”的问题")标签。如果您切换到`session.Query<Entity>()`. 不过，您可能会重新考虑`Id`在`Where`.

# android - 编码视频以支持多屏

> ID：11886560
> 
> 赞同：11
> 
> 时间：2012-08-09T15:15:56.263
> 
> 标签：android, video

我正在使用 ffmpeg 使用 H264-AVC 编解码器和 MPEG-4 容器对视频进行编码。

从现在开始，我一直在努力为视频而不是可绘制对象做出同样的努力：为每种设备提供适当的分辨率。

这就是为什么我曾经在 raw-mdpi / raw-hdpi / raw-xhdpi 文件夹中分别添加分辨率为 240x320 / 480x800 / 720x1280 的视频的原因。

我一直认为是对的，直到我发现 Nexus S 不支持以 480x800 编码的视频（位于我的 raw-hdpi 文件夹中）（对于这个设备，我需要使用 480x720）。

阅读[http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)，我认为解决方案是使用具有最低分辨率的 raw-normal / raw-large / raw-xlarge 文件夹：320x470 / 480x640 / 720x960 . 但后来我看到我的大多数 HDPI 设备都使用 raw-normal 文件夹中的视频。

所以我认为我完全误解了正确的做法，这就是为什么我真的很感激一些解释，最重要的是，你的视频编码实践：你只提供最低分辨率的视频以确保支持所有设备，还是每种设备的“正确”分辨率？

# asterisk - 在单个系统中配置 2 个 digium 卡？

> ID：11886562
> 
> 赞同：2
> 
> 时间：2012-08-09T15:15:59.427
> 
> 标签：asterisk, telecommunication

我有两张digium卡，型号是TE420 4端口卡，TE121单端口卡。

配置4口卡后

如果我在星号提示符下执行“dahdi show status”，我得到以下输出

```
Description                              Alarms  IRQ    bpviol CRC4 
T4XXP (PCI) Card 0 Span 1                OK      46      0      0    
T4XXP (PCI) Card 0 Span 2                OK      46      0      0    
T4XXP (PCI) Card 0 Span 3                OK      46      0      0    
T4XXP (PCI) Card 0 Span 4                OK      46      0      0    
Wildcard TE121 card 0                    OK      32457   0      0 
```

为什么我没有获得单端口卡的 Span 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:44:27.147

您在此处看到的描述是 DAHDI 驱动程序为每个跨度填写的跨度描述。当他们填写描述时，他们还不知道分配给他们的全局跨度编号。1-4只是显示了卡0导出的span。由于TE121只导出一个span，所以他们只表示他们的卡号。

如果您将这些卡与 PRI 一起使用，我同意前锋使用“pri show spans”是查看跨度状态的更有用的命令。

从控制台运行 dahdi_maint 也是查看您在系统中配置的任何 DAHDI span 的当前状态的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:34:32.707

通过在星号 cli 和 linux shell 中键入 pri show spans 来检查 dahdi_cfg -vvvv 它将输出所有配置的通道

# javascript - 通过 jquery 查找和替换用标签包装文本 url

> ID：11886566
> 
> 赞同：5
> 
> 时间：2012-08-09T15:16:04.873
> 
> 标签：javascript, jquery, regex, replace

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:42:57.240

如果我正确理解您的问题，这应该可以。不确定为什么要遍历元素，因为正则表达式无论如何都会扫描所有文本。

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
        <script>
        function wrap( str ) {
            return '<a href="' + str + '">' + str + '<\/a>';
        };
        function replaceText() {
            $(".tweet").each( function(){
              $(this).html($(this).html().replace(/\bhttp[^ ]+/ig, wrap));
            })

        }
        $(document).ready(replaceText);
        </script>
    </head>
    <body>
        <div class="tweet"> test 1 http://example.com/path </div>
        <div class="tweet"> test 2 http://example.com/path </div>
    </body>
</html> 
```

# .htaccess - 将 www 重定向到非 www 适用于主页，不适用于文件夹

> ID：11886569
> 
> 赞同：2
> 
> 时间：2012-08-09T15:16:31.050
> 
> 标签：.htaccess, mod-rewrite, redirect, http-redirect

我在文件中使用这样的重定向代码`.htaccess`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www\. [NC]
RewriteRule ^(.*)$ %{HTTP_HOST}$1 [C]
RewriteRule ^www\.(.*)$ http://$1 [L,R=301] 
```

当我输入时：`www.domain.com/file.php`它可以正常转发到`domain.com/file.php`

当我输入时：`www.domain.com/folder/folder2`我被重定向到：（`domain.comfolder/folder2`没有斜线）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:49:55.700

不知道为什么会这样，但是当我将它们放在我的 htaccess 文件中的 vanilla apache 2.2 安装中时，这些规则根本不起作用。由于看起来您所做的只是将**www.domain.com**请求重定向到**domain.com**请求，因此您可以这样做：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [L,R=301] 
```

而不是将规则链接在一起并将主机重写到 URI 路径中。

# jquery - 传递表ID时循环

> ID：11886570
> 
> 赞同：6
> 
> 时间：2012-08-09T15:16:33.050
> 
> 标签：jquery

我有四个 HTML 表，并且必须将一个表中的数据与用户选择的一个表进行比较。我将用户选择的表 ID 传递给此函数，但我不知道如何循环遍历此表的行：

```
function callme(code) {

    var tableName = 'table'+code;
    //alert(tableName);

    //How to do loop for this table?? HELP!!
    $('#tableName tr').each(function() {   //how to do
        if (!this.rowIndex) return; // skip first row

        var customerId = $(this).find("td").eq(0).html();
        alert(customerId);
        // call compare function here.
    });
} 
```

对于有经验的 jQuery 程序员来说，这应该是一件非常简单的事情。这是我的 jsfiddle：http: [//jsfiddle.net/w7akB/66/](http://jsfiddle.net/w7akB/66/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:18:59.797

您正在使用错误的选择器，这是：

```
$('#tableName tr') 
```

`tr`表示从带有 id 的表中获取所有内容`tableName`。这就是你想要做的：

```
$('#' + tableName +' tr') 
```

因此您将选择 id 存储在`tableName`变量中的表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:19:48.943

选择器只是一个字符串。您可以将这些片段与您的变量连接在一起：

```
$('#' + tableName + ' tr').each(function() {
    // ...
}); 
```

我用这个改变更新了你的[jsfiddle 。](http://jsfiddle.net/L8zC8/)

# if-statement - 如果存在频道条目，ExpressionEngine 显示部分标题一次

> ID：11886575
> 
> 赞同：1
> 
> 时间：2012-08-09T15:17:13.643
> 
> 标签：if-statement, expressionengine, channel

我想知道是否有一种更简单的方法可以实现这一点，从而减少提交给服务器的查询数量：

我在主页上有一个部分，用户可以在其中购买活动门票。我没有经常出票的活动，所以我只想在有票时显示该部分。

我一直这样做的方式是这样的：

```
{exp:channel:entries channel="ticketed_events" limit=1}
<h2>Purchase Tickets</h2>
{/exp:channel:entries}
{exp:channel:entries channel="ticketed_events"}
{event_title} - {ticket_price}
{/exp:channel:entries} 
```

我必须这样做两次，以便标题只显示一次，而不是每个条目一次。这似乎有点尴尬，不得不像这样向服务器发送两个查询。这真的是唯一的方法吗？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:05:11.020

```
{exp:channel:entries channel="ticketed_events"}
{if count == 1}<h2>Purchase Tickets</h2>{/if}
{event_title} - {ticket_price}
{/exp:channel:entries} 
```

不尝试就应该这样做，否则尝试`{if {count} == 1}`

# c - 将字符串分配给某物

> ID：11886576
> 
> 赞同：1
> 
> 时间：2012-08-09T15:17:14.990
> 
> 标签：c, arrays, file, struct

我正在尝试对成绩使用排序功能，它将对“姓名中期1”进行排序，但我不知道如何将姓名和姓氏字符串分配给临时数组。有任何想法吗？

```
void student_swap(struct student *x){
    int z,y,temp;
    char temp2[15];
    for(z=0; z<10; z++){
        for(y=0; y<9; y++){
            if(x[y].mid1>x[y+1].mid1){
                temp = x[y+1].mid1;
                x[y+1].mid1 = x[y].mid1;
                x[y].mid1 = temp;

                strcpy (temp2,x[y+1].name);
                strcpy (x[y+1].name,x[y].name);
                strcpy (x[y+1].name,temp2);
                strcpy (temp2,x[y+1].surname);
                strcpy (x[y+1].surname,x[y].surname);
                strcpy (x[y+1].surname,temp2);

            } // if
        } // for
    } // for
} //student_swap 
```

排序`int`值工作正常，但`strcpy`什么也不做。这是我的输出代码

```
for (i=9;i>=0;i--){
    ;
    printf ("%s %s %d\n",x[i].name,x[i].surname,x[i].mid1);
}
printf ("\n");

       student_swap(x);

    for (i=9;i>=0;i--){
    ;
    printf ("%s %s %d\n",x[i].name,x[i].surname,x[i].mid1);
} 
```

这是我的输出

```
murat hot 73
mehmet umur 72
idil saracoglu 55
ecem bektas 75
sevde pir 70
asli devecioglu 65
can akkurt 45
levent dogan 60
anil erdiz 30
ali durmus 40

murat hot 75
mehmet umur 73
idil saracoglu 72
ecem bektas 70
sevde pir 65
asli devecioglu 60
can akkurt 55
levent dogan 45
anil erdiz 40
ali durmus 30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:25:52.693

不应该是：

```
 strcpy (temp2,x[y+1].name);
    strcpy (x[y+1].name,x[y].name);
    strcpy (x[y].name,temp2);    // <-- note the index used 
```

?

姓氏也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:51:44.830

在学习编程时自己实现排序是一个很好的练习。但是，在编写高效代码时，最好避免重新发明轮子。例如，您可以只使用`qsort`附带的`stdlib.h`：

```
#include <stdio.h>
#include <stdlib.h>

struct student { char name[100]; char surname[100]; int mid1;};

int compare_students (const void *a, const void *b)
{
  struct student *sa, *sb;
  sa = (struct student *) a;
  sb = (struct student *) b;

  if (sa->mid1 > sb->mid1)
    return -1;
  if (sa->mid1 == sb->mid1)
    return 0;

  return 1;
}

int main (void)
{
  int i;
  struct student s[4] = {
                          {.name = "a", .surname = "e", .mid1 = 10},
                          {.name = "b", .surname = "f", .mid1 = 20},
                          {.name = "c", .surname = "g", .mid1 = 99},
                          {.name = "d", .surname = "h", .mid1 = 70}
                        };
  qsort (s, 4, sizeof (struct student), compare_students);
  for (i = 0; i < 4; i++)
    printf ("%s %s: %d\n", s[i].name, s[i].surname, s[i].mid1);
  return 0;
} 
```

# javascript - 在 JavaScript 中创建类似数组的对象

> ID：11886578
> 
> 赞同：24
> 
> 时间：2012-08-09T15:17:27.477
> 
> 标签：javascript, arrays, object

在 JavaScript 中，有些对象伪装成数组（或“类数组”）。此类对象是`arguments`、`NodeList`s（从`getElementsByClassName`等返回）和 jQuery 对象。

当`console.log`ged 时，它们显示为数组，但它们不是。我知道为了像数组一样，一个对象必须有一个`length`属性。

所以我做了一个这样的“对象”：

```
function foo(){
    this.length = 1;
    this[0] = "bar";
}

var test = new foo; 
```

当 I 时`console log(test)`，我（如预期）得到一个`foo`对象。我可以使用“转换”它为一个数组

```
Array.prototype.slice.call(test) 
```

但是，我不想转换它，我希望它像数组一样。我如何制作一个类似数组的对象，这样当它被`console.log`ged 时，它就会显示为一个数组？

我试过设置`foo.prototype = Array.prototype`，但`console.log(new foo)`仍然显示一个`foo`对象，而不是一个数组。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-09T15:19:59.343

具体取决于控制台。对于 Chrome 的开发者控制台和 Firebug 中的自定义对象，您将需要`length`和`splice`属性。`splice`也必须是一个函数。

```
a = {
    length: 0,
    splice: function () {}
}
console.log(a); //[] 
```

然而，重要的是要注意，没有官方标准。

jQuery (v1.11.1) 在内部使用以下代码来确定对象应该使用`for`循环还是`for..in`循环：

```
function isArraylike( obj ) {
    var length = obj.length,
        type = jQuery.type( obj );

    if ( type === "function" || jQuery.isWindow( obj ) ) {
        return false;
    }

    if ( obj.nodeType === 1 && length ) {
        return true;
    }

    return type === "array" || length === 0 ||
        typeof length === "number" && length > 0 && ( length - 1 ) in obj;
} 
```

`[]`请注意，可能有一个`for..in`对象在控制台`{}`中显示为数组（`for`在 jQuery 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-17T10:45:47.383

当我们可以使用类似`arguments`参数的数组时，我想到了同样的问题：

```
function arrayLike() {
  console.log(typeof arguments)
  console.log(arguments)
  console.log(Array.from(arguments))
}
arrayLike(1,2,3)
```

所以，让我们尝试创建我们自己的类似数组的对象：

```
let arrayLikeObject = {
  0: 1,
  1: 2
 }

 console.log(Array.from(arrayLikeObject))
```

显然，没有定义长度属性，所以我们`arrayLikeObject`只会返回一个空数组。现在，让我们尝试定义一个长度属性：

```
let arrayLikeObject = {
  length: 2,
  0: 1,
  1: 2
 }

 console.log(Array.from(arrayLikeObject))
```

如果长度设置不同怎么办？

```
let arrayLikeObject = {
  length: 1,
  0: 1,
  1: 2
 }

 console.log(Array.from(arrayLikeObject))
 // it will only return the value from first `0: 1`
```

```
let arrayLikeObject = {
  length: 5,
  0: 1,
  1: 2
 }

 console.log(Array.from(arrayLikeObject))
 // other 3 values will be printed as undefined
```

* * *

> 但是，我不想转换它...

您实际上想创建一个数组，而不是类似数组的对象。必须像您说的那样转换类似数组的对象：

```
Array.prototype.slice.call(arrayLikeObject)
// Or,
[].slice.call(arrayLikeObject) 
```

如果你尝试在类数组对象上使用数组方法，那么你会得到类型错误：

```
let arrayLikeObject = {
  length: 5,
  0: 1,
  1: 2
 }

 console.log(arrayLikeObject.sort())
```

因此，要在 arrayLikeObject 上使用数组方法，我们需要将其转换为数组，就像我们在前面的示例中使用`Array.from`.

否则，您只需要创建一个数组：

```
let arr = [1,2] // I don't mean, you don't know 
```

* * *

其他考虑：

您不能将其用作构造函数：

```
let arrayLikeObject = {
    length: 1,
    slice: function () {
      return 1
    }
}

console.log(new arrayLikeObject) // Type error
```

在以下代码段中，结果将是`[undefined]`长度属性设置为 1 但没有`0`索引属性：

```
let arrayLikeObject = {
  length: 1,
  slice: function () {
    return 1
  }
}
console.log(Array.from(arrayLikeObject))
```

但是如果将长度设置为 0，那么结果将是一个空数组`[]`，因为我们告诉我们在这个类似数组的对象中没有任何值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T15:21:38.437

这是任何用途吗：[扩展数组原型](http://kenegozi.com/blog/2009/04/13/javascript-and-the-extended-array-prototype)，似乎他正在做你所做的并将原型创建为一个数组，但包括一个额外的方法（可能有效也可能无效，我没有测试过）：

```
var MyArray = function() {
};

MyArray.prototype = new Array;

MyArray.prototype.forEach = function(action) {
    for (var i = 0, l=this.length; i < l, ++i) {
        action(this[i]);
    }
}; 
```

希望它在某种程度上有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-11T19:12:15.797

看这个 ：

```
var ArrayLike = (function () {

 var result;

 function ArrayLike(n) {

     for (var idx = 0; idx < n; idx++) {
         this[idx] = idx + 1;
     }

     // this.length = Array.prototype.length; THIS WILL NOT WORK !

 }

 // ArrayLike.prototype.splice = Array.prototype.splice; THIS WILL NOT WORK !

 // THIS WILL WORK !
 Object.defineProperty(ArrayLike.prototype, 'length', {

     get: function() {

         var count = 0, idx = 0;

         while(this[idx]) {
             count++;
             idx++;
         }
         return count;

     }

 });

 ArrayLike.prototype.splice = Array.prototype.splice;

 ArrayLike.prototype.multiple = function () {

     for (var idx = 0 ; idx < this.length ; idx++) {

         if (result) {
             result = result * this[idx];
         } else {
             result = this[idx];
         }
     }

     return result;
 };

 return ArrayLike
 })();

var al = new ArrayLike(5);

al.__proto__ = ArrayLike.prototype;

console.log(al.length, al.multiple(), al); 
```

这将在 Chrome 中显示：5 120 [1, 2, 3, 4, 5]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:26:11.527

我想[这](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Object/toString)就是你要找的。覆盖 toString 函数。

```
foo.prototype.toString = function()
{
    return "[object Foo <" + this[0] +">]";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-01T08:32:01.203

您可能只想像继承基类一样继承 Array，因此您的对象只具有所有数组方法。你可以：

```
function Thing() {
    // Adding a property
    this.whatever = 96;
}
Thing.prototype = Object.assign(Object.create(Array.prototype), {
    // Adding a method
    has42: function() {
        // Call inherited Array method
        return this.includes(42);
    }
}); 
```

别的地方：

```
(function() {
    var test = new Thing();
    test.push(64, 69, 42, 96);
    console.log(test);
    var has = test.has42();
    console.log('should be true:', has);
    var i = test.indexOf(42);
    if (i >= 0)
        test.splice(i, 1);
    var has2 = test.has42();
    console.log('should be false:', has2);
    console.log(test);
 }()); 
```

问题是，你是否应该这样做。根据对象的使用方式，某些代码可能会在使用普通数组制作副本时重新创建数组并丢弃原型链。这可能是也可能不是问题，具体取决于您对此的具体操作。

# wpf - 在 wpf 用户控件中拖放

> ID：11886583
> 
> 赞同：1
> 
> 时间：2012-08-09T15:17:43.430
> 
> 标签：wpf, mvvm, user-controls

我在 wpf 中创建了一个拖放控件，用于在两个列表框之间拖放数据，这在我将其移至另一个项目之前起到了作用。

不同之处在于它最初是一个 wpf 窗口，并使用窗口对象来获取鼠标位置和内部控件的位置。

```
this.topWindow = Window.GetWindow(this.sourceItemsControl); //Source items control is instance of ItemsControl

bool previousAllowDrop = this.topWindow.AllowDrop;
this.topWindow.AllowDrop = true; 
```

现在我不得不将其更改为用户控件，因为它是更大项目的一部分，该项目是 Windows 窗体项目，并且视图作为主项目的智能部件链接。所以现在 Window 对象为空。

我为用户控制寻找类似的功能，但找不到它。我错过了什么？我知道应该有一些东西..会很感激任何帮助..

PS：我使用的是 MVVM 架构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:20:28.553

找到了使用递归查找基本用户控件的方法，感谢 ekholm 的提醒..

```
public static UserControl FindParentControl(DependencyObject child)
        {
            DependencyObject parent = VisualTreeHelper.GetParent(child);

            //CHeck if this is the end of the tree
            if (parent == null) return null;

            UserControl parentControl = parent as UserControl;
            if (parentControl != null)
            {
                return parentControl;
            }
            else
            {
                //use recursion until it reaches a Window
                return FindParentControl(parent);
            }
        } 
```

现在，此基本用户控件可用于查找坐标（参考）以及设置其他属性等`AllowDrop, DragEnter, DragOver`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T13:01:43.620

如果您需要 MVVM，则可以检查此解决方案：在您的 .xaml 文件中添加：

```
<ContentControl Content="{Binding Content, Mode=TwoWay}" AllowDrop="True" Name="myDesignerContentControl" /> 
```

比在您的 ViewModel 中添加以下内容：

```
private Panel _content;
    public Panel Content {
        get { return _content; }
        set {
            _content = value;
            if (_content != null) {
                RegisterDragAndDrop();
            }
            base.RaisePropertyChanged("Content");
        }
    }
private void RegisterDragAndDrop() {
    Content.Drop += OnDrop;
    Content.PreviewMouseLeftButtonDown += OnMouseLeftButtonDown;
    Content.PreviewDragOver += OnDragOver;
}

private void OnDesignerDrop(object sender, DragEventArgs e) {
    //some custom logic handling
}
private void OnDesignerMouseLeftButtonDown(object sender, MouseButtonEventArgs e) {
    var control = (FrameworkElement)e.Source;
    //some custom logic handling for doing drag & drop
}
private void OnDesignerDragOver(object sender, DragEventArgs e) {
    //some custom logic handling for doing drag over
} 
```

这个想法是你应该使用控件而不是鼠标位置，这将是更简单和合乎逻辑的方法。上面的代码是在 MVVM 中使用的方法示例，用于拥有一个内容区域，您可以在该内容区域上执行某些控件的拖放操作。背后的想法也适用于在两个列表框之间拖放数据，您可能在同一内容区域上。

希望这可以帮助。

# jquery - 在多个主 jQGrid 页面中重复使用 jQGrid 子网格

> ID：11886589
> 
> 赞同：1
> 
> 时间：2012-08-09T15:17:58.563
> 
> 标签：jquery, jqgrid

我有几个相当复杂的网页（.js 文件中的 1000 行 jQGrid），它们具有不同的主 jQGrid，并且具有相同基本设计的更多计划。每个都使用相同的 3 个子网格，第一个附加到主网格，第二个“附加”到第一个，第三个嵌套在第一个子网格下方。大约 80% 的 jQuery/jQGrid 代码对所有三个都是通用的。它工作得很好。我想将公共子网格代码放入一个单独的文件中，以便可以在多个页面之间加载和共享它。

我已经对 jqGridExport/jqGridImport 进行了试验，似乎想法是替换整个东西，我只想引入一个片段。我还注意到，导出将所有子网格代码推送到 CDATA，大概可以导入。

如何将可重复使用的 jQGrid 子网格代码片段导入到每个单独页面的主 jQGrid 代码中间？

注意：我不是试图即时更改导入的子网格代码。无论加载哪个主网格，它总是相同的。

# visual-studio-lightswitch - 如何将具有 Windows 身份验证的灯开关应用程序迁移到另一个 Web 服务器

> ID：11886590
> 
> 赞同：1
> 
> 时间：2012-08-09T15:17:58.243
> 
> 标签：visual-studio-lightswitch

我创建了启用 Windows 身份验证的 Lightswitch 应用程序，它按我的预期工作。我想将应用程序迁移到另一台服务器时遇到问题。

1.我将应用程序文件移动到另一台服务器，但数据库留在同一个sql服务器上：在这种情况下，应用程序需要windows用户名和密码，并且不允许我自动登录。此外，当我输入用户名和密码时，它无法识别我的 Windows 帐户。

2.我将应用程序文件移动到另一台服务器并将数据库移动到另一台sql服务器并正确更新Web配置文件。现在，当我尝试打开应用程序时，我的浏览器中只会收到“拒绝访问”错误消息。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:21:11.953

尝试 Lightswitch 文件夹中的 LightSwitchSecurityAdmin.exe 工具来设置新的用户帐户。Lightswitch 在 SQL“内在数据”数据库中创建用户和授权表，我认为您必须将其映射到您将应用程序移动到的服务器的用户。

[Beth Massi 博客](http://blogs.msdn.com/b/bethmassi/archive/2012/03/23/deploying-lightswitch-applications-to-iis6-amp-automating-deployment-packages.aspx)上的一些命令行使用示例

![从任何文件夹运行 Lightswitchsecurityadmin 所需的文件列表](../Images/ec117e11e6a0703e5d9ab0a7bc5da90c.png)

# vb.net - 如何更改现有报表的水晶报表中的参数类型？

> ID：11886591
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:18:01.443
> 
> 标签：vb.net, crystal-reports

我有一个带有 2 个子报表的水晶报表。数据库中字段之一的类型从数字更改为字符串。主报表没有参数，但子报表有这个参数。现在，当我尝试运行报告时，记录选择公式中出现错误。这里需要一个字符串。我的问题是如何更改该字段的类型以便我可以运行我的报告。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:10:12.460

很容易做到。也很有趣！

假设您可以更改子报表的链接，您可以：

1）创建一个公式来操作主报告中的该字段，将其显式转换为您需要的格式。然后，2）使用那个公式作为子报告的链接

应该发挥魅力，“鲍勃的你叔叔”等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:01:24.203

解决方案是使用数据集中更改的数据类型重新映射报表的绑定

# perl - 无法通过包“DBI::db”定位对象方法“execute”

> ID：11886593
> 
> 赞同：2
> 
> 时间：2012-08-09T15:18:06.543
> 
> 标签：perl, dbi

我的代码如下：

```
sub new {
    my $class = shift;
    my $self = bless {}, $class;

    $self->initialize();

    return $self;
}

sub initialize
{
    my $self = shift;

    $self->connect();

    $self->{'dbh'}
        ->do("CREATE TABLE IF NOT EXISTS 'settings' (Id INTEGER PRIMARY KEY, Option TEXT, Value TEXT)");
}

sub connect
{
    my $self = shift;

    $self->{'dbh'} = DBI->connect($self->DSN, "", "", {
        RaiseError => 1,
        AutoCommit => 1
    });

    die "Can't connect" unless($self->{'dbh'});
}

sub no_options
{
    my$self = shift;

    $self->{'dbh'}->prepare("SELECT COUNT(*) as Total FROM settings");
    # Here is the problem i get the error here:
    # Can't locate object method "execute" via package "DBI::db"
    $self->{'dbh'}->execute();
    my %row = $self->{'dbh'}->fetchhash_array;

    return $row{'Total'};
} 
```

在其他地方我打电话给我的包裹

```
my $test = Lib::PackageName->new;

print $test->no_options; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:22:54.740

该[`prepare`](https://metacpan.org/module/DBI#prepare)方法返回一个语句对象。正是这个对象具有该[`execute`](https://metacpan.org/module/DBI#execute)方法。

```
my $statement = $self->{'dbh'}->prepare("SELECT COUNT(*) as Total FROM settings");
$statement->execute(); 
```

`fetchhash_array`中没有命名方法[`DBI`](https://metacpan.org/module/DBI)。语句对象的可用获取方法有：

*   [`fetchrow_arrayref`](https://metacpan.org/module/DBI#fetchrow_arrayref)
*   [`fetchrow_array`](https://metacpan.org/module/DBI#fetchrow_array)
*   [`fetchrow_hashref`](https://metacpan.org/module/DBI#fetchrow_hashref)
*   [`fetchall_arrayref`](https://metacpan.org/module/DBI#fetchall_arrayref)
*   [`fetchall_hashref`](https://metacpan.org/module/DBI#fetchall_hashref)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:26:10.717

`$self->{'dbh'}->prepare(...)`返回一个语句句柄，您应该保留它以供进一步使用：

```
my $sth = $self->{'dbh'}->prepare("SELECT COUNT(*) as Total FROM settings");
$sth->execute;
my %row = $sth->fetchhash_array; 
```

# objective-c - 目标 c 有条件地打开新的 xib

> ID：11886597
> 
> 赞同：1
> 
> 时间：2012-08-09T15:18:26.133
> 
> 标签：objective-c, if-statement, xib

大家好，我有 5 个带有 if 语句的 xib 文件：

```
enter code here
if(results == @"1")
{
    //open xib1
}else if(results == @"2")
{
    //Open xib2
}else if(results ==@"3"){
    //Open xib3
}else if(results ==@"4"){
    //open xib4
}else if(results ==@"5"){
    //open xib5
} 
```

我不知道如何打开新的 xib 并关闭旧的 xib，我对目标 c 很抱歉。抱歉，这是针对 iPad 的，我想我是打开一个新的 xib 还是在主要的顶部显示一个 xib 都没有关系。

谢谢！

所以这会起作用吗？

```
if(results == @"1")
{
    NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results1" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView;
}else if(results == @"2")
{
    NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results2" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView;
}else if(results ==@"3"){
    NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results3" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView;
}else if(results ==@"4"){
    NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results4" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView;
}else if(results ==@"5"){
    NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results5" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView;
} 
```

# php - php变量结果

> ID：11886599
> 
> 赞同：-2
> 
> 时间：2012-08-09T15:18:32.390
> 
> 标签：php, variables, serialization

```
$name= path1
$key= key1
    public static function getpath($name, $key)
      {
        if (!self::is_valid($name, $key)) return false;
        $path = '/var/lib/fdata/'.$name.'/'.$key;
        if (!is_file($path)) return false;
        return $path;
      }

      public static function get($name, $key)
      {
        $path = self::getpath($name, $key);
        if ($path === false) return false;
        return file_get_contents($path);
      }

    $configmap = unserialize(fdata::get('base', 'key')); 
```

问题是：

1.  如果变量`$path = self::getpath($name, $key);`那么 $path = ? 什么意思`self::`
2.  如果变量`$configmap = unserialize(fdata::get('base', 'key'));`那么 $configmap = ? 什么意思`fdata::`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:24:52.377

1)`self::getpath(...)`应该返回一个布尔值或一个字符串。`self::`指当前类。

2）[这是](http://php.net/manual/en/function.unserialize.php)男人`unserialize`

3) `fdata::`表示命名空间 fdata 或者可能是一个类。

# visual-studio-2010 - 从现有项目复制

> ID：11886600
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:18:37.393
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008

我在视觉工作室有一些问题。好的，这是场景

首先，我在visual studio中将一个现有项目添加到我的项目中，然后我尝试编译并运行它并且它工作正常......然后我退出了visual studio。并将文件夹或 Visual Studio 解决方案复制到我的笔记本电脑中。之后，我在加载 Visual Studio 后在我的笔记本电脑中打开视觉解决方案，我之前添加的项目显示为灰色并为空……请你帮帮我我怎样才能看到我之前添加的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:25:12.823

当您将现有项目添加到解决方案时，您正在添加一个链接。您没有复制实际项目，您只是复制了链接，该链接在您的笔记本电脑上显示为空。

右键单击项目并查看属性，您应该会看到位置。这应该向您显示问题。

如果不返回源代码，您将无法恢复该项目，因为您的笔记本电脑上没有代码。

-t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:23:33.263

您是否将项目从便携式驱动器复制到硬盘？有时将其从外部驱动器复制已为我解决了该问题。

# database - MERGE也可以DELETE吗？示例仅显示 INSERT / UPDATE

> ID：11886603
> 
> 赞同：1
> 
> 时间：2012-08-09T15:18:40.247
> 
> 标签：database, tsql, merge, sql-server-2008-r2

我在这里阅读 MSDN 网站： [http ://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

我对一件事有点困惑。

该站点的示例（在底部复制）使用该行`WHEN NOT MATCHED BY TARGET`。我的问题是，我可以用它在同一个合并中进行插入、更新和删除吗？例如：

```
--Lazy syntax, but I think you get the idea.
MERGE x AS TARGET USING (ID, [More Fields...]) AS SOURCE
WHEN MATCHED
    update
WHEN NOT MATCHED IN TARGET
    insert
WHEN NOT MATCHED IN SOURCE
    delete 
```

**MSDN 示例：**

```
USE AdventureWorks2012;
GO
-- Create a temporary table variable to hold the output actions.
DECLARE @SummaryOfChanges TABLE(Change VARCHAR(20));

MERGE INTO Sales.SalesReason AS Target
USING (VALUES ('Recommendation','Other'), ('Review', 'Marketing'), 
              ('Internet', 'Promotion'))
       AS Source (NewName, NewReasonType)
ON Target.Name = Source.NewName
WHEN MATCHED THEN
    UPDATE SET ReasonType = Source.NewReasonType
WHEN NOT MATCHED BY TARGET THEN
    INSERT (Name, ReasonType) VALUES (NewName, NewReasonType)
OUTPUT $action INTO @SummaryOfChanges;

-- Query the results of the table variable.
SELECT Change, COUNT(*) AS CountPerChange
FROM @SummaryOfChanges
GROUP BY Change; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:45:33.203

如果您正在对表进行批发交换，那么一种方法是创建两个额外的模式：

```
CREATE SCHEMA shadow AUTHORIZATION dbo;
CREATE SCHEMA cache  AUTHORIZATION dbo; 
```

现在在模式中创建表的副本`cache`：

```
CREATE TABLE cache.SalesReason(Name ...); 
```

现在，当您进行开关操作时：

```
TRUNCATE TABLE cache.SalesReason;
INSERT cache.SalesReason(Name ...) SELECT ... FROM source;

-- this is a metadata operation so extremely fast - it will wait
-- for existing locks to be released, but won't block new locks
-- for very long at all:

BEGIN TRANSACTION;
  ALTER SCHEMA shadow TRANSFER Sales.SalesReason;
  ALTER SCHEMA Sales TRANSFER  cache.SalesReason;
COMMIT TRANSACTION;

ALTER SCHEMA cache TRANSFER shadow.SalesReason;
TRUNCATE TABLE cache.SalesReason; 
-- truncate is optional - I usually kept the data around for debugging 
```

如果您有外键和其他依赖项，这将不起作用，当然它会使统计信息等完全无效，这反过来会影响计划，但如果最重要的是在用户面前以最少的数量获得准确的数据中断，这可以是一种考虑的方法。

# mysql - 在删除级联时使用外键删除多个条目

> ID：11886607
> 
> 赞同：1
> 
> 时间：2012-08-09T15:18:50.320
> 
> 标签：mysql

我正在尝试从一个表中删除某个字段，并且我希望它从另一个表中删除所有关联的字段（包含适当 fk 的字段）。

表格1

```
 id | name | fname 
```

表 2

```
 id | table1Id | ... 
```

table1Id 设置为引用 Table1 主键的​​外键，我已设置`ON DELETE CASCADE`

现在我的代码很简单，它从 Table1 中删除了行，如下所示：

```
function deleteWill($Id)
    {
        $stmt = $this->db->stmt_init();
        if($stmt->prepare('DELETE FROM Table1 where id= ?'))
        {
            $stmt->bind_param("i", $Id);
            $stmt->execute();
            $stmt->close();
            return true;
        }
        else
        {
            $stmt->close();
            return false;
        }
    } 
```

但是该`CASCADE`选项不起作用！

这是否与我在 Table2 中有多个具有相同 fk 的行的事实有关？

如果是这样，我该如何解决这个问题，以便删除 Table2 中的所有关联行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:29:20.540

不，Table2 中的多行应该不是问题。

没有足够的信息来确定导致您观察到的行为的原因。如果您的语句成功完成，并且预期的行正在从 Table1 中删除，但 Table2 中的匹配行没有被删除......

然后第一个怀疑是您的表使用的是 MyISAM 引擎而不是 InnoDB 引擎。（MyISAM 不强制外键约束，但 InnoDB 会。）输出来自：

```
SHOW CREATE TABLE Table1
SHOW CREATE TABLE Table2 
```

将显示正在使用的引擎。我会从那里开始。还有其他一些可能性，例如验证`foreign_key_check = 1`;

* * *

要将表的引擎从 MyISAM 更改为 InnoDB：

```
ALTER TABLE Table1 ENGINE = InnoDB ; 
```

这将需要重建整个表；它基本上需要创建一个新的 InnoDB 表并从 MyISAM 表中复制所有数据。因此，请勿在使用时在大桌子上执行此操作...

# android - 检查 Kindle Fire 上的 PDF 意图没有返回任何结果？

> ID：11886618
> 
> 赞同：2
> 
> 时间：2012-08-09T15:19:19.083
> 
> 标签：android, pdf, kindle-fire

我正在通过意图打开 PDF 文件；为了事先检查是否安装了功能强大的应用程序，我使用以下代码：

```
PackageManager packageManager = context.getPackageManager();
Intent testIntent = new Intent(Intent.ACTION_VIEW);
testIntent.setType("application/pdf");
List<ResolveInfo> list = packageManager.queryIntentActivities(testIntent, PackageManager.MATCH_DEFAULT_ONLY);
return list.size() > 0; 
```

这在我的 Galaxy Nexus 上运行良好，但是在 Kindle Fire 上运行时列表为空。但如果我跳过检查，PDF 打开就好了！怎么会这样？

有没有其他方法可以检查 PDF 查看功能？（PDF 包含在 APK 资产的文件夹中，如果我知道它可以显示，我只想将其复制到数据文件夹中......）

还是我应该停止检查，因为大多数 Android 设备都可以查看 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:30:34.313

我相当确定如果不设置 Intent 应该能够操作的实际数据，您就无法查询该意图。

[这个链接](http://comments.gmane.org/gmane.comp.handhelds.android.devel/121428)似乎也处理了同样的问题。

# scala - 是否有用于构建 OAuth REST API 的 play2 框架插件？

> ID：11886622
> 
> 赞同：4
> 
> 时间：2012-08-09T15:19:45.167
> 
> 标签：scala, oauth, playframework-2.0, oauth-provider

我想构建一个 Web 服务（RESTful JSON API），我想用 OAuth 1.0 或 2.0 保护我的 API。我将 Play2 与 Scala 一起使用，我找不到在 Scala 或 Play2 中编写 OAuth 提供程序（不是消费者）的示例。

我相信这个组合应该很熟悉，假设你正在构建一个像 GitHub 这样的 API，并且你想授权某些应用程序并为它们提供 CONSUMER_KEY、CONSUMER_SECRET 来访问你的 API。必须有一个易于使用的库来帮助您做到这一点。并不是说这应该融入 Play2。

有任何想法吗？图书馆？技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:18:15.840

我们在 Scala/Lift 中构建了一个 OAuth 1.0 提供程序。它为 Open Bank 项目编码，但应该很容易为另一个 Lift 应用程序提取。

请参见：

[https://github.com/OpenBankProject/OpenBankProject-Server/wiki/OAuth-1.0-client---Server-connexion](https://github.com/OpenBankProject/OpenBankProject-Server/wiki/OAuth-1.0-client---Server-connexion)

顺便说一句，我们选择了 OAuth 1.0 而不是 OAuth 2.0，因为 OAuth 2.0 还没有真正修复。

干杯，西蒙。

# swing - NetBeans - JComboBox 警告 - 缺少泛型类 JComboBox 的类型参数

> ID：11886623
> 
> 赞同：11
> 
> 时间：2012-08-09T15:19:45.800
> 
> 标签：swing, warnings, netbeans-7, jcombobox, matisse

我正在使用 NetBeans IDE 7.1.2。当我编译我的应用程序时，我收到以下警告：

> 警告：[rawtypes] 找到原始类型：JComboBox city = new javax.swing.JComboBox(); 缺少泛型类 JComboBox 的类型参数，其中 E 是类型变量：E 扩展类 JComboBox 中声明的对象

所以，我想我必须将 JComboBox 声明为：

```
JComboBox<String> city = new JComboBox<String>(); 
```

但是我如何在 NetBeans 中使用 Matisse（Swing GUI Builder）来做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T19:11:59.263

在 Netbeans 7.2 中，您可以单击 JComboBox 的代码部分，然后将类型写入“类型参数”，在您的情况下：`<String>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:47:36.230

Java 7 将泛型引入了`JComboBox`. 您的问题的一种解决方案是使用 Java 6。

我敢打赌，最新版本的 Netbeans (7.2) 将为此提供解决方案（尽管我并不肯定）。

否则，如果我没记错的话，你可以查看 Netbeans 生成的代码。如果是这样，您也许可以自己添加通用论点。自从我修补 Netbeans 以来已经有好几个月了……

此外，如果 Netbeans 允许，您可以`@SupressesWarnings`在声明上方添加注释`JComboBox`（甚至在类声明上方，尽管这会改变它的范围）。它会是这样的：

```
@SuppressWarnings("rawtypes")
JComboBox city = new JComboBox(); 
```

有很多选择，但 Netbeans 可能会阻止您实施其中的一些。

# collections - Backbone.js：过滤集合的正确方法？

> ID：11886628
> 
> 赞同：8
> 
> 时间：2012-08-09T15:20:03.217
> 
> 标签：collections, backbone.js

我正在使用的当前方法是过滤一个集合，该集合返回一个数组，并使用

```
collection.reset(array) 
```

重新填充它。但是，这会修改原始集合，因此我添加了一个名为“originalCollectionArray”的数组，它跟踪集合的初始数组状态。当没有过滤处于活动状态时，我只需使用

```
collection.reset(originalCollectionArray) 
```

但是，我需要跟踪从真实集合中添加和删除模型，所以我这样做了：

```
// inside collection
initialize: function(params){
    this.originalCollectionArray = params;
    this.on('add', this.addInOriginal, this);
    this.on('remove', this.removeInOriginal, this);
},
addInOriginal: function(model){
    this.originalCollectionArray.push(model.attributes);
},
removeInOriginal: function(model){
    this.originalTasks = _(this.originalTasks).reject(function(val){
        return val.id == model.get('id');
    });
},
filterBy: function(params){
    this.reset(this.originalCollectionArray, {silent: true});
    var filteredColl = this.filter(function(item){
        // filter code...
    });
    this.reset(filteredColl);
} 
```

当我尝试实现与集合操作相关的其他技巧（例如排序）时，这很快变得很麻烦。坦率地说，我的代码看起来有点老套。有没有一种优雅的方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T15:48:28.207

您可以创建一个集合作为反映过滤器状态的主集合的属性：

```
var C = Backbone.Collection.extend({
    initialize: function (models) {
        this.filtered = new Backbone.Collection(models);
        this.on('add', this.refilter);
        this.on('remove', this.refilter);
    },

    filterBy: function (params){
        var filteredColl = this.filter(function(item){
          // ...
        });

        this.filtered.params = params;
        this.filtered.reset(filteredColl);
    },

    refilter: function() {
        this.filterBy(this.filtered.params);
    }
}); 
```

无论您应用什么过滤器，父集合都会保留其模型，并且您绑定到过滤后的集合以了解何时发生更改。在 add 和 remove 事件上进行内部绑定可让您重新应用过滤器。有关演示，请参见 [http://jsfiddle.net/dQr7X/ 。](http://jsfiddle.net/dQr7X/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:50:05.153

您的代码的主要问题是您使用原始数组而不是集合。我的代码与您的代码接近，但仅使用集合，因此添加、删除和过滤等方法适用于原始代码：

```
 var OriginalCollection = Backbone.Collection.extend({
  });
  var FilteredCollection = Backbone.Collection.extend({
    initialize: function(originalCol){
        this.originalCol = originalCol;
        this.on('add', this.addInOriginal, this);
        this.on('remove', this.removeInOriginal, this);
    },
    addInOriginal: function(model){
        this.originalCol.add(model);
    },
    removeInOriginal: function(model){
        this.originalCol.remove(model);
    },
    filterBy: function(params){
        var filteredColl = this.originalCol.filter(function(item){
            // filter code...
        });
        this.reset(filteredColl);
    }   
  }); 
```

# .net - .NET 中的多方加密？

> ID：11886629
> 
> 赞同：5
> 
> 时间：2012-08-09T15:20:11.013
> 
> 标签：.net, security, encryption

我了解了 GnuPG 中的多方加密方案，其中多个公钥和私钥允许许多人更改和访问共享信息。.NET 中是否有类似的库？

此外，假设其中一位用户忘记了保护其私钥的密码。是否有支持重新生成另一个私钥而不影响其他用户的库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:11:26.533

[Bouncy Castle](http://www.bouncycastle.org/csharp/)加密库支持 OpenPGP 和其他一些。它的文档有点短，但它确实支持拆分键。

# c# - 使用 EntityFramework 和 MVC ModelBinding 保存具有特殊字符的字段时出错

> ID：11886630
> 
> 赞同：5
> 
> 时间：2012-08-09T15:20:10.877
> 
> 标签：c#, asp.net-mvc, entity-framework, model-binding, valueinjecter

在我的 ASP.NET MVC4 应用程序中保存实体时，我遇到了 (2) 个字段的问题：

*   电子邮件
*   电话

`@`如您所知，这些字段通常会有特殊字符`-`。这是我的控制器代码，使用 ValueInjecter 通过模型绑定从水合对象注入我的模型类：

```
public ActionResult Create(TestViewModel testViewModel)
{
  using (var context = new MyEntities())
  {
    var person = new Person();
    person.InjectFrom(testViewModel);
    context.Person.AddObject(person);
    context.SaveChanges();
  }
} 
```

我得到的错误如下：

> “字符串或二进制数据将被截断。语句已终止”

好吧，乍一看，您可能会说这是 SQL 中字段的大小，但真正的问题是因为这些特殊字符而被伪装。如果我在字段中输入以下内容：

电话：11234565454514564561
邮箱：blahblahblahblah

...然后一切**正常。**

但是，如果我输入：

电话：123-456-7890
电子邮件：test@wow.com

我收到有关“字符串或二进制数据将被截断”的错误。所以我找到了一种解决方法，但这似乎完全没有必要，而且可能是错误的方式。如果我使用 C# 转义字符将模型绑定对象中的值显式映射到实体，那么我的值将插入如下所示：

```
public ActionResult Create(TestViewModel testViewModel)
{
  using (var context = new MyEntities())
  {
    var person = new Person();
    person.InjectFrom(testViewModel);

    //Explicitly map items preserving special charachters
    person.EmailAddress = @testViewModel.EmailAddress;
    person.Phone = @testViewModel.Phone;

    context.Person.AddObject(person);
    context.SaveChanges();
  }
} 
```

好吧，老实说，我不知道罪魁祸首在哪里。这是 MVC 模型绑定问题、实体框架问题、C# 交易还是 ValueInjecter？我尝试在我的 ViewModel 属性上使用注释来指示数据类型，例如`Phone`and ，`Email`但这并没有阻止问题。只有通过转义这些字符在代码中明确是一种方法。

我做错了什么，因为我知道带有特殊字符的电子邮件和电话等字段一直保存到带有 MVC 的 EF 中？每次我有一个带有特殊字符的值时，我能做些什么来避免在这些代码行中添加这些代码？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:36:29.107

好吧，在典型的时尚中，我在发布我花了 3 个小时试图弄清楚的问题后 10 秒就弄清楚了：

正如@CodeMaster 指出的那样，这些代码行无论如何都是不正确的。我开始玩其他一些领域，我找出了罪魁祸首。

为了简洁起见，我给出的代码示例被压缩了，但我注入了 (2) 个不同的实体：Person 和 Contact。事实证明，*两个*表都有一个“标题”字段。我只关注 Person 表中的“Title”字段，该字段的长度为“50”，如下所示：

`<Property Name="Title" Type="nvarchar" Nullable="false" MaxLength="50" />`

事实证明，Contact 字段具有我不知道的确切 smae 字段，但长度仅为“8”，如下所示：

`<Property Name="Title" Type="nvarchar" MaxLength="8" />`

这导致了错误，它*确实是*合法的。当我只想要一个并导致问题时，ValueInjecter 将相同的单个“标题”值映射到两个实体。必须小心，因为 ValueInjectoer 不会区分名称是否匹配（因为它不应该），但这会导致我的问题。

# git - git commit -m "some message" 返回错误：pathspec

> ID：11886637
> 
> 赞同：1
> 
> 时间：2012-08-09T15:20:44.977
> 
> 标签：git, git-commit

我正在尝试使用命令行提交消息将提交推送到我的存储库：

```
git commit -m "some commit message" 
```

但我不断收到以下错误：

```
error: pathspec 'commit' did not match any file(s) known to git.
error: pathspec 'message' did not match any file(s) known to git. 
```

我已经看到这个问题在明显的情况下得到了回答，比如在推送提交时忘记使用“-m”标志（[这里](https://stackoverflow.com/questions/4133138/how-do-i-correct-the-error-pathspec-message-when-committing-in-git)），但我使用的是正确的标志——这种确切的语法适用于其他机器上的克隆相同的存储库。在麻烦的（Red Hat 4.1.2）机器上，我正在使用：

```
git version 1.7.3.3 
```

如果我尝试使用长格式标志，我会得到同样的错误：

```
git commit --message="some commit message" 
```

有没有人见过这个？我在这台机器上没有 root 访问权限，所以我无法更新，但我想知道这是否是上述版本的已知问题（虽然没有从谷歌搜索中找到任何问题），或者可能是这个系统上的 git 配置？

**编辑：解决了！**

我想我找到了问题所在。我对 Red Hat 不太熟悉，但我发现可执行文件*/usr/local/bin/git*指向一些名为*run-rhel 的*可执行文件，例如

```
/usr/local/bin/git -> run-rhel 
```

而且这个可执行文件弄乱了 git 的命令结构。我将真正的 git 可执行文件添加到我的 $PATH 之前：

```
export PATH=/path/to/real/executable:$PATH 
```

现在一切似乎都正常了！感谢您的快速回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:29:08.520

看起来你的 shell 弄乱了双引号。从错误消息中，我认为 git 看到了这个命令：

```
git commit -m some commit message 
```

因此它将“提交”（该词的第二次使用）和“消息”解释为路径规范，将“某些”解释为提交消息。

最好尝试看看需要引用的其他（非 git）命令是否也有这个问题。例如，以下是否显示目录中的所有文件或错误消息：

```
ls "*" 
```

# clojure - 将一个集合拼接到另一个集合中

> ID：11886639
> 
> 赞同：2
> 
> 时间：2012-08-09T15:20:53.857
> 
> 标签：clojure

对于工作，我想以最简洁的方式描述标准医学公式（用于报告药物副作用）的格式。（粗略地说，通过打嗝来渲染它，但不仅如此，这就是为什么我不直接把它写成打嗝结构）

例如，部分描述将是：

```
{"reportertitle" [:one-of "Dr" "Pr" "Mrs" "Mr"]   ; the reporter is usually the physician
 "reportergivenname" :text
 "reporterfamilyname" :text
 "reporterorganization" :text
 "reporterdepartment" :text
 ....
 "literaturereference" :text
 "studyname" :text
 ....} 
```

键是标准名称，我无法更改它们，但我希望能够轻松分解事物：例如，前缀“reporter”在整个地图中被高度使用，我希望能够分解它，例如通过做：

```
{ (prefix "reporter"
     "title" [:one-of "Dr" "Pr" "Mrs" "Mr"]
     "givenname" :text
     "familyname" :text
     "organization" :text
     "department" :text)
  .....
  "literaturereference" :text
  "studyname" :text
  ....} 
```

但这行不通，因为我认为我无法在外部映射内“整合”（拼接，我相信是正确的术语）“前缀”的结果，无论是函数还是宏。

是否有解决方案来实现这一点，同时保持高水平的声明性/简洁性？（整个表格很大，非开发人员可能会阅读）

（因为我是 Clojure 的新手，所以几乎所有的设计建议都是受欢迎的；））

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:49:23.347

你是对的，宏不能告诉`eval`将其结果拼接到外部表达式中。一种直接的解决方法是将整个映射定义包装在一个宏中，该宏识别`prefix`表达式并将它们转换为结果映射定义中的适当键值序列。

您也可以仅通过将子图与以下内容粘合来使用函数`merge`：

```
 (defn pref-keys [p m] (apply hash-map (apply concat (for [[k v] m] [(str p k) v])))))

 (merge
     (pref-keys "reporter"
       {"title" [...]
        "givenname" :text
         ...})
     {"literaturereference" :text
      "studyname" :text}) 
```

这可能更冗长但也可能更具可读性。

**编辑**：还有一个限制：在评估任何宏（内部或外部）之前创建映射文字。一个参数是映射字面量的宏将得到一个映射，而不是某种形式，其评估最终会产生映射。当然，这个映射中的键和值是未评估的形式，但映射本身是一个正确的映射 ( `IPersistentMap`)。

特别是这意味着文字需要包含偶数个形式，所以：

```
 (my-smart-macro { (prefix "reporter" ...) } ) 
```

将失败之前`my-smart-macro`有机会扩大`prefix`。另一方面，这将成功：

```
(another-macro { (/ 1 0) (/ 1 0) }) 
```

...提供宏从其输入映射中过滤掉无效的算术表达式。

这意味着您可能不想将映射文字传递给宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:03:32.413

提前，我应该说这个答案可能根本不是你想要的。这将是一种完全改变您的数据结构的做事方式，您似乎可能会说那不是您可以做的事情。无论如何，我建议这样做是因为我认为这将是对您的数据结构的一个*很好*的改变。

因此，我建议您重新设想您的数据：

```
{:reporter {:title "Dr, Pr, Mrs, or Mr here"
            :given-name "text here"
            :family-name "text here"
            :organization "text here"
            :department "text here"
            ...}
 :literature-reference "text here"
 :study-name "text here"
 ...} 
```

我在这里提出两个变化：一个是结构性的，另一个是“化妆品”。结构上的一个是在其中嵌套另一个地图，用于与记者相关的东西。我个人认为这使数据更清晰，并且不那么容易访问。与其做类似`(get *data* "reportertitle")`访问它并`(assoc *data* "reportertitle" *new-title*)`制作它的新版本之类的事情，不如使用`(get-in *data* [:reporter :title])`and `(assoc-in *data* [:reporter :title])`。

外观上的变化是将这些基于字符串的键转换为 Clojure 关键字。我建议这样做的主要原因是它会更惯用，并且阅读您的代码可能会更清晰。有关为什么要使用关键字的更好讨论，请参见[此处](https://stackoverflow.com/questions/1527548/why-does-clojure-have-keywords-in-addition-to-symbols)或[此处](https://stackoverflow.com/questions/11655080/in-clojure-why-have-strings-keywords-and-symbols)。

现在，我意识到我所说的一切都预先假定您实际上*可以*更改数据的结构以及关键字的命名方式。您说“这些键是标准名称，我无法更改它们”，这似乎表明这种类型的解决方案不适合您。*但是*，也许您可​​以在两种形式之间进行相互转换。如果您从某个地方导入此数据并且它已经具有您在上面给出的格式，您可以将其转换为带有关键字的嵌套映射形式，并在您对它进行任何操作时保持这种状态。然后，当您导出要实际输出或使用的数据（或它所服务的任何最终目的）时，您会将其转换回上面的形式。

我应该说，我个人完全不喜欢这种“相互转换”的想法。我认为它区分了“代码”和“数据”的概念，考虑到这样做只是为了让代码“看起来和感觉更好”而不是数据，这似乎是一种耻辱。话虽如此，我建议它以防你听起来*不错*。

# c++ - 如何获取 ComboBox 项目数

> ID：11886643
> 
> 赞同：1
> 
> 时间：2012-08-09T15:21:19.060
> 
> 标签：c++, c++builder, vcl

我正在尝试使用以下代码获取组合框项目数。它不会给出错误，也不会给出正确的计数。我想我必须将 int 转换为字符串，但是如何？

```
ComboBox1->ItemIndex = 1;
int count = ComboBox1->Items->Count;
Edit1->Text =  "Count: " + count; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:32:07.273

这条线

```
 int count = ComboBox1->Items->Count; 
```

返回 TComboBox 中字符串项的数量。你需要在设置之前检查这个

```
ComboBox1->ItemIndex = 1; 
```

因为 ItemIndex 用于设置组合框中的选定项，并且计数为零。要在 Embarcadero 中将整数转换为字符串，您可以使用`IntToStr()`函数

```
Edit1->Text = "Count:" + IntToStr(count) 
```

您将需要`#include "System.hpp"`访问该功能

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:31:27.137

```
ComboBox1->ItemIndex = 1;
int count = ComboBox1->Items->Count;
Edit1->Text =  "Count: " + count; 
```

这`"Count: " + count`是一个表达式，其中`"Count: "`衰减到指向字符串第一个元素的指针， `count`被添加到该指针，结果它要么指向字符串内的某个位置（OK），要么指向字符串的末尾（通常是未定义的行为）。

关于 your 的使用`ComboBox1`，您没有显示它的声明，也没有提到您正在使用哪个 GUI 框架（如果有的话）。

*因此，如果不猜测*它是什么，就无法谈论它。

为了创建带有插入文本值表示的格式化文本，您可以使用例如`std::ostringstream`来自`<sstream>`标题的 a，如下所示：

```
std::ostringstream stream;
stream << "Count: " << count;
Edit1->text = stream.str().c_str(); 
```

`.c_str()`根据接受的内容，可能需要也可能不需要调用`Edit1.text`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:31:30.197

```
ComboBox1->ItemIndex = 1; 
int count = ComboBox1->Items->Count;
Edit1->Text =  "Count: " + count; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-05T06:32:26.117

没有必要经历所有这些杂耍。为此提供了一个简单的功能。

```
int count = ComboBox1.GetItemCount(); 
```

# ios - UINavigationBar 的自定义样式无法正常工作

> ID：11886644
> 
> 赞同：0
> 
> 时间：2012-08-09T15:21:21.827
> 
> 标签：ios, xcode, uinavigationbar, photoshop

我正在使用此代码为所有 UINavigationBars 设置自定义背景图像。问题是最终图像似乎不是视网膜大小。我研究了 UINavigationBars 是 640x88px。那是我的 UINavigationBar.png 的确切尺寸，但是我在 iPhone Sim（视网膜）和我的 iphone 4（也是视网膜）上只看到 320x44px。

设置图像的代码：

```
UIImage *background = [UIImage imageNamed:@"UINavigationBar.png"];
[[UINavigationBar appearance] setBackgroundImage:background forBarMetrics:UIBarMetricsDefault]; 
```

这是用于说明的屏幕截图：

![在此处输入图像描述](../Images/2a213bb357b3fea4d1bfe2f752c601e6.png)

（不同的是没有像 Photoshop 那样的底部暗线。我在 iPhone 5 Simulator (Retina) 中只能看到一半的图像）

我的问题是为什么会发生这种情况，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:57:51.547

您需要有两个`.png`大小不同但名称相同的文件，但在视网膜显示文件中添加了@2x。
例如，

常规显示支持的文件 1：
大小 - 320x44，
名称 - UINavigationBar.png

用于视网膜显示支持的文件 2：
大小 - 640x88，
名称 - UINavigationBar@2x.png

在您的代码中，您始终使用 UINavigationBar.png，设备将根据硬件自动知道要使用的巫婆文件。

# java - 如何将 java.io.File 转换为 java.lang.Class

> ID：11886645
> 
> 赞同：0
> 
> 时间：2012-08-09T15:21:27.377
> 
> 标签：java

我有以下代码从文件夹中检索文件列表，在我的 for 语句中我想比较它们以查看名称是否匹配

```
 Class classFile = null;

        // Retrieve the java file 
        final File javaFolder = new File(filePath);

        // Retrieves all the class files
        List<Class> classFiles = new ArrayList<>();
        final File classFolder = new File(compileFile.getDirectoryForBin());
        classFiles = retrieveFiles.listClassFilesForFolder(classFolder);

        // compared the java files to the class files and add the correct files to the list
        for (Class currentClassFile : classFiles) {.....} 
```

我收到以下错误

```
java.lang.ClassCastException: java.io.File cannot be cast to java.lang.Class
at Java.OrganisingFiles.getClasses(OrganisingFiles.java:129) 
```

这是因为我的 for 循环中有一个无法转换为 Class 的文件列表。有谁知道如何将 File 转换为 Class 类型，或者将所有文件作为对象转换为`java.lang.Class`的子类更好`java.lang.Object`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:25:59.203

更改这些行：

```
 Class classFile = null;

  List<Class> classFiles = new ArrayList<>();
 for (Class currentClassFile : classFiles) {.....} 
```

对此：

```
 File classFile = null;

  List<File> classFiles = new ArrayList<>();
  for (File currentClassFile : classFiles) {.....} 
```

一个类文件也是一个文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:25:21.797

我建议您查看[`iterateFiles(File directory, String[] extensions, boolean recursive)`](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#iterateFiles%28java.io.File,%20java.lang.String%5B%5D,%20boolean%29)Apache [FileUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)中的方法。`.class`以扩展名结尾的文件与实际`Class`对象之间存在差异。

上面的函数应该允许你得到一个迭代器`File`，它允许你迭代具有`.class`扩展名的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:28:21.633

**1.** `Class` class 表示**运行java应用程序期间的类、接口等。**

**2.**现在使用`listFile()`方法获取所有`File Objects`然后将它们存储在一个集合中`ArrayList<String>`并比较它们..

**例如：**

```
 ArrayList<String> fnames = new ArrayList<String>();
    File f = new File("d:\\Myfolder");
    File[] fArr = f.listFiles();

    for (File fN : fArr){

        fnames.add(fN.getName());

    } 
```

**现在你可以比较它们......**

# r - 在不安装 sas 的情况下在 osx 上阅读 .sas 源代码？

> ID：11886648
> 
> 赞同：1
> 
> 时间：2012-08-09T15:21:41.047
> 
> 标签：r, sas

简单明了：有没有办法在 osx 上读取（不运行）.sas 文件，以便用另一种语言（例如 R）重写旧的 SAS 程序？注意我不是指阅读 sas 数据文件——我知道有几种方法，我只是对阅读旧的 SAS 代码感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T15:43:19.300

包含 SAS 代码的 .sas 文件应该只是一个文本文件。您可以使用任何您喜欢的文本编辑器来打开和修改这些文件。由于系统可能没有与任何特定程序关联的 .sas 文件，您可以在“右键单击”文件时使用“打开方式”选项，也可以先打开编辑器，然后从编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:29:41.143

文本编辑将起作用。我喜欢的另一个编辑器是 Komodo Edit。

# xbox360 - 开发 Xbox 360 应用程序

> ID：11886652
> 
> 赞同：0
> 
> 时间：2012-08-09T15:22:03.977
> 
> 标签：xbox360

我被要求开发一个 Xbox 360 应用程序。不是游戏，而是像 Netflix、Youtube 或 Muzu 这样的应用程序……我发现很难找到任何有关 Xbox 控制台应用程序开发的信息。有人可以给我一些建议吗？

我知道 XDK 允许使用原生 C++ 进行游戏开发，但它也适合创建应用程序吗？是否有任何有关 Xbox 360 应用程序的提交流程和政策的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:30:24.403

我想你可能需要问一个问题，“游戏和应用程序有什么区别？” 我相信您也可以使用 XNA 构建应用程序，从而使用 Microsoft 提供的库在 C# 中开发您的应用程序。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:42:43.667

我想你可以从这些链接中得到详细的解释

[http://www.xbox.com/en-US/developers](http://www.xbox.com/en-US/developers)

[http://www.xboxmb.com/forum/15-xbox-360-tutorials/67430-how-create-xbox360-applications-sdk.html](http://www.xboxmb.com/forum/15-xbox-360-tutorials/67430-how-create-xbox360-applications-sdk.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T00:36:46.217

我不确定 XNA 是否可以实现您想要的。如果您是注册的 Xbox 开发者，您应该与您的开发者客户经理联系。

# database-design - 如何设计一个存储在现实世界中可以重复的名称数据的表？

> ID：11886657
> 
> 赞同：3
> 
> 时间：2012-08-09T15:22:27.083
> 
> 标签：database-design

我正在寻找对我们的数据库设计师提出挑战的设计难题的方向。我搜索了档案和谷歌并没有得出任何结论，尽管我怀疑这是一个简单/新手类型的问题。

我们有一个存储事件位置的表。它被称为位置表。该表要求 LocationCode 是唯一的。该表还要求 LocationName 是唯一的。然而，在现实世界中，有时虽然两个地点存在于不同的地方，但它们将具有相同的名称（例如，两个具有相同名称的学校存在于同一州的不同县）。一位设计师坚持认为应该通过在名称上附加一个值来强制名称不同，例如县名（例如联合高中 - 弗朗西斯县）。她这样做的理由是确保“受控词汇”。另一位设计师坚持应该允许名称相同，因为这反映了现实，并且应该使用 LocationCodes 来强制/跟踪唯一性。

我倾向于第二位设计师的方向——名字应该允许不同。我能想到的一个可比较的例子是人们经常使用相同的名字（例如 Jane Doe）。在存储有关人员的联系信息的表中，似乎不会强制要求姓名不同，而社会保障代码将完成跟踪唯一性的工作。

那么对于这个问题是否有一般的指导方针或标准？指向有用文档的链接会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:43:18.793

> 我倾向于第二位设计师的方向——名字应该允许不同。

我认为您的意思是说您认为应该允许名称相同，您的表应该允许重复名称。

> 在存储有关人员的联系信息的表中，似乎不会强制要求姓名不同，而社会保障代码将完成跟踪唯一性的工作。

虽然在简单的情况下确实如此，但在实际应用程序中，您会发现

*   一些居住在美国的外国人没有 SSAN，
*   [SSAN 有重复](http://www2.nbc4i.com/news/2010/dec/06/2/study-finds-millions-duplicate-social-security-num-ar-316988/)的，合法的和非法的，并且
*   一些美国公民没有 SSAN。（通常是因为出生在医院以外的地方。）

明确地识别人员既是一个难题，也是一个依赖于应用程序的问题。当地机动车管理局有其识别人员的方法；国税局自有*办法*；雇主有自己的方式；学校和医院有自己的方式（隐私法在这里有很大的影响）。您可能需要找到自己的方式。

这是您无法避免的：在某些时候，您公司的某个人必须能够分辨出许多数据库行中写着“John Smith”的哪一行与您办公桌前愤怒的客户相匹配。

我看这样的*位置名称*。“旧金山”的全称是“美国加利福尼亚州旧金山”。全名很容易区分“克林顿小姐”。来自“爱荷华州克林顿”。

我发现两个不同的地方具有相同的*非正式*名称的情况。例如，可能有一个名为“田纳西州天然桥”的城镇，而田纳西州的另一个地方*是*天然桥，也称为“田纳西州天然桥”。不同之处在于，其中一个地方总是一座城市，而另一个地方则不是。（至少根据我的经验。发现异常我不会感到惊讶。）

但是，这些现实世界中的任何问题对*您*来说是否重要，都取决于应用程序。我不必处理不是城市的地名，因此存储“全名”是一种简单直接的方式来确保良好的数据。

在您的情况下，对于活动地点，我看不出允许重复名称在商业意义上是实用的。如果名称重复，您基本上需要人们记住哪个位置代码指的是每个真实世界的位置，并给出其名称作为提示。对于任何显着规模的数据库，如果*不写下差异*，人们就无法可靠地做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:44:41.990

这不是关于正确设计的问题。这是一个关于信息要求的问题。应该在分析阶段发现哪个是正确的，而不是设计阶段。区分分析和设计很重要，即使是同一个团队同时做这两种工作

如果允许名称重复，那么用户在需要消除歧义时将需要一些其他信息。为用户提供不同的 ID 可能还不够，因为 iD 对他们来说可能毫无意义。

回到订购该项目的人那里。他们想要什么？如果他们想要用户想要的任何东西，请采访用户或可以为他们说话的人。如果没有人可以为用户说话，如果项目的所有者拒绝为自己说话，那么你就只能做出最好的猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:23:28.817

我不反对 Catcall (+1)，但我认为还有第三种方法可以让你吃蛋糕也吃。

不喜欢独特命名方案的可能原因之一是某些位置包含限定符而其他位置不包含限定符可能对某些人来说很麻烦。

在许多情况下，使用模糊的名称可能就足够了，而对于其他情况，您需要确定您所指的确切名称。为什么不将基本位置名称和限定符存储在单独的列中。如果限定符类似于包含该位置的县，那么无论如何您都可以为每个位置存储它。这将使您可以选择在足够好的情况下使用简单（但非唯一）的名称，并在必要时使用完全限定的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T22:20:10.653

美国几乎所有东西都有标准代码。

州县 FIPS 代码为美国人口普查发现的几乎所有可居住建筑提供了一个邮件代码。

例如梅丽莎： [http ://www.melissadata.com/reference-data/zipdata.htm](http://www.melissadata.com/reference-data/zipdata.htm)

查看可以添加到表格中的邮政编码列表，该表格几乎可以找到邮票可以找到的所有内容。

即使在比第三世界国家更好的国家，国际地址或地点也是一个挑战——尤其是如果它有大量的农业人口。直到最近，例如在哥斯达黎加，不仅没有门牌号码，而且很少有街道被正式命名和记录。你给这封信写地址，邮递员会用一点创意来找到收件人。像“耶稣奥乔亚，距离老可乐工厂 200 米，有最大橡树的街道，带绿色百叶窗的第三座黄色房子”这样的地址在 20 年前很常见。如果他们粉刷房子，地址就会改变！！旧可乐工厂已经消失多年。

如果一个国家/地区拥有类似于 FIPS 的标准位置服务，那么他们很有可能也从一个开始编号，并且使用相同的编号。不要期望唯一的编号系统。

为了使其独一无二，在列表前加上标准国家代码。小心 ISO 3166-1（通用标准）有重叠的代码结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T20:09:04.947

尝试此操作的一种方法是与具有额外列的位置一起记录该地点的经度/纬度。总是和每次位置的名称，后面跟经度和纬度都是唯一的。

本质上，表结构类似于，

```
Location(location_name, location_longitude, location_latitude) 
```

试图捍卫我所做的选择是最好的，这与我作为程序员可用的东西以及我解决问题所必须的限制有关。因此，在它有效地解决问题之前，这真的无关紧要。

注意：纬度/经度可以通过向任何地理位置提供者写入网络服务来获得。

# c# - 使用离开事件禁用组合框正在选择文本

> ID：11886658
> 
> 赞同：0
> 
> 时间：2012-08-09T15:22:33.213
> 
> 标签：c#, winforms, combobox

我正在使用 Leave 事件`Combobox`来禁用它并加载一些数据，但是在离开和禁用之后，它会选择`Combobox`. 我想取消选择文本。

我在用着：

```
cmbNome.DropDownStyle = ComboBoxStyle.DropDown;    
cmbNome.AutoCompleteMode = AutoCompleteMode.Suggest;    
cmbNome.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

如果有帮助...

编码：

```
 private void cmbNome_Leave(object sender, EventArgs e)
    {
        cmbNome.Enabled = false;
        CarregarDados();
        CarregarTelefones();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:11:07.737

尝试首先取消选择项目，然后将组合框设置为禁用。

```
cmbNome.SelectedIndex = -1;
cmbNome.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:01:37.493

在禁用组合框之前尝试设置数据源：

```
 string[] data = new string[] {
            "Absecon","Abstracta","Abundantia","Academia","Acadiau","Acamas",
            "Ackerman","Ackley","Ackworth","Acomita","Aconcagua","Acton","Acushnet",
            "Acworth","Ada","Ada","Adair","Adairs","Adair","Adak","Adalberta","Adamkrafft",
            "Adams"

        };

        private void comboBox2_Leave(object sender, EventArgs e)
        {
            comboBox2.DataSource = data;
            comboBox2.Enabled = false;
            comboBox2.SelectedIndex = -1;
        } 
```

此代码用数据填充组合；但是，没有选择任何项目并且文本字段为空

编辑：添加示例数据

# matlab - TCPIP连接在matlab中不起作用

> ID：11886659
> 
> 赞同：0
> 
> 时间：2012-08-09T15:22:42.400
> 
> 标签：matlab, tcp, printf

任何人都可以帮助我解决与仪器建立 tcpip 连接时遇到的问题。就像我使用以下命令与 tcpip 地址建立连接时，它在任何时候都可以正常工作。

1.测试和测量工具（matlab中的TMTOOL） 2.Zoc终端 3.teraterm。

但是当我尝试实现以下脚本时，它确实运行但不知道如何将命令发送到我试图控制的平移和倾斜单元。

我正在尝试使用两个脚本：

一个。

```
obj1=tcpip('169.254.32.28',4000);
fopen(obj1);
cmd=5000;
fprintf(obj1,'pp%d',cmd)
fclose(obj1);
delete(obj1); 
```

我正在尝试发送命令 pp5000

B.

```
%commands
lat=51.57668;
lon=-1.26765;
alti=500;
% Find a tcpip object.
obj1 = instrfind('Type', 'tcpip', 'RemoteHost', '169.254.32.28', 'RemotePort', 4000, 'Tag', '');

% Create the tcpip object if it does not exist
% otherwise use the object that was found.
if isempty(obj1)
    obj1 = tcpip('169.254.32.28', 4000);
else
    fclose(obj1);
    obj1 = obj1(1)
end

% Connect to instrument object, obj1.
fopen(obj1);
i=1;
tic
for i=1:10
% Communicating with instrument object, obj1.
fprintf(obj1, 'gg%f,%f,%f',lat,lon,alti);

i=i+1;
toc
end
fclose(obj1);
delete(obj1); 
```

期望的结果：

gg51.57668,-1.26765,500

第二个脚本只是从 TMTOOL im matlab 生成的自动脚本的一点点修改版本

基本上我想每半秒在所需对象上打印一些命令。

任何人都可以提出一些可以实现预期结果的替代方案或改进方案。

我一直无法执行这些脚本，我认为无论我对matlab有什么小知识，它都应该是正确的。我是一个新用户，如果你能提供帮助，我将不胜感激。

谢谢

萨利尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:09:06.093

您总是可以使用 Java 类（套接字）来回传递数据，这就是我的做法。

文件 1：

```
import java.net.ServerSocket
import java.io.*

server_socket = ServerSocket(4000);
client_socket = server_socket.accept;
out = PrintWriter(client_socket.getOutputStream, true);
in = BufferedReader(InputStreamReader(client_socket.getInputStream));
str = in.readLine(); % Read in data
out.println(data); % send data 
```

文件 2：

```
import java.io.*;
import java.net.*;
server_socket = Socket('localhost', 4000);
in = BufferedReader(InputStreamReader(server_socket.getInputStream));
out = PrintWriter(server_socket.getOutputStream,true); 
```

以与上述相同的方式获取和发送输入。完成后不要忘记关闭所有内容。

```
out.close();
in.close();
client_socket.close();
server_socket.close(); 
```

# oauth-2.0 - Google 的客户端访问令牌是否具有类似 FB_Exchange_Token 的功能

> ID：11886670
> 
> 赞同：0
> 
> 时间：2012-08-09T15:23:23.607
> 
> 标签：oauth-2.0

Facebook OAuth 2.0 实现允许您使用 FB_Exchange_Token grant_type 将客户端短期访问令牌转换为长期令牌，即

[https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) {YOUR_CLIENT_ID}&client_secret={YOUR_CLIENT_SECRET}&grant_type=fb_exchange_token&fb_exchange_token={SHORT_LIVED_ACCESS_TOKEN}

我的问题是 Google 的 OAuth 2.0 版本是否有类似的机制，允许我通过客户端流程获取短期令牌，将此令牌传递给服务器并让服务器转换该令牌以便我们可以存储刷新令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:50:12.167

不，Google 没有该功能。您需要使用服务器端流程。

您能否提供有关用例的更多信息（在下面的评论中？）

# ruby - 从 Ruby 哈希中排序值，忽略大小写

> ID：11886671
> 
> 赞同：3
> 
> 时间：2012-08-09T15:23:32.447
> 
> 标签：ruby, sorting, hash

这就是我如何处理 Ruby 哈希中的值以获得字母数字小写排序输出（极端示例）：

```
myhash = {
  "x" => "zebra",
  "one" => "1",
  "alpeh" => "alpha",
  "lower" => "january",
  "1" => "January",
  "2" => "February",
  "answer" => "42"
}
m = myhash.values
puts m.map{|i| i.downcase}.sort 
```

输出：

```
1
42
alpha
february
january
january
zebra 
```

这很好用，我没有问题，但想知道我是否缺少更简单/更有效的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T15:31:25.567

由于您想修改值（输出小写字符串），我认为您不能做得更好。

如果输出原始值是好的，只要它们排序良好，你可以使用这个：

```
 myhash.values.sort_by{|h|h.downcase} 
```

编辑：感谢 Casper，这是一个更紧凑的版本：

```
myhash.values.sort_by(&:downcase) 
```

编辑：感谢Mischa，如果您想保留您提供的输出：

```
myhash.values.map(&:downcase).sort 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:06:51.503

比使用 hash.values 更有效的方法（因为它创建了一个临时数组，如果散列很大，可能会耗费时间/空间）

```
myhash.sort_by{|_,v| v.downcase} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:22:09.690

这可能更有效...

m.sort {|a, b| a.casecmp(b)}

=> [“1”、“42”、“阿尔法”、“二月”、“一月”、“一月”、“斑马”]

只需使用忽略输入大小写的测试功能即可。这取决于您是否希望输出数组具有重复值（例如一月/一月与一月/一月）。

# java - 用于 LDAP 的轻量级 Java API

> ID：11886676
> 
> 赞同：2
> 
> 时间：2012-08-09T15:24:06.367
> 
> 标签：java, active-directory, ldap, jndi

我想使用 LDAP（Iplanet 或 Open DS）验证我的新开源 Java 项目的用户名和密码，尽管对数据库进行了验证。

我想做的主要活动是：1）验证用户名和密码 2）将用户或组添加到目录服务器 3）将用户分配给组。

任何提供快速学习曲线的轻量级 Java API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:47:57.650

[我对UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/)有很好的体验。它只是一个 jar，具有良好的文档、非常用户友好的 API，并且 与 JNDI 相比[有很多优势。](https://www.unboundid.com/products/ldap-sdk/docs/advantages/index.php)

我特别喜欢它的 ORM 框架，它可以轻松地将 LDAP 记录映射到 Java 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:12:02.997

我的第一选择是[UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/)。出于各种原因，不应将 JNDI 用于新代码：

*   JNDI使用的LDAP模型不干净，不清楚
*   JNDI 中存在许多软件缺陷，以及一些使某些 LDAP 操作无法进行的构造
*   从 LDAP 标准的角度来看，JNDI 并不完全兼容
*   JNDI 使用断开连接的配置架构，这使得 JNDI 难以使用

UnboundID LDAP SDK

*   比 JNDI 干净
*   比JNDI更清晰
*   支持故障转移和负载平衡
*   支持本地化
*   使语法和匹配规则的使用变得容易
*   学习曲线更短，比 JNDI 更容易使用
*   支持异步操作
*   支持内存目录服务器，这在单元测试中很有用

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:34:01.850

您可以使用 JNDI 完成所有这些工作：

[http://www.oracle.com/technetwork/java/jndi/index.html](http://www.oracle.com/technetwork/java/jndi/index.html)

如果您使用教程页面，您将看到您想要做的每件事的示例：http: [//docs.oracle.com/javase/jndi/tutorial/](http://docs.oracle.com/javase/jndi/tutorial/)

有一个框架可以让它变得更容易：
[http ://today.java.net/pub/a/today/2006/04/18/ldaptemplate-java-ldap-made-simple.html](http://today.java.net/pub/a/today/2006/04/18/ldaptemplate-java-ldap-made-simple.html)

但我真的不推荐它，如果你在做很多 JNDI 项目，这确实是一种管理开销的方法，而不是让单个项目更容易的方法。做 JNDI 的开销只是一次性的事情，一旦你设置了它，你就不必再碰它了。如果您有任何问题，请在此处发布，我们会解决的。:)

-t。

# jsf - PrimeFaces，命令按钮操作不起作用

> ID：11886681
> 
> 赞同：1
> 
> 时间：2012-08-09T15:24:32.257
> 
> 标签：jsf, primefaces, spring-webflow

项目正在使用 Spring Webflow 和 JSF (PrimeFaces)。我有一个名为“manageArticle.xhtml”的页面。在页面上，如果用户单击“编辑”按钮，ap:panel 将显示当前的文章对象内容。文章对象传递给视图如下

```
 <transition on="edit_article" to="manageArticles">
        <evaluate expression="articles.selectedRow" result="flowScope.selectedArticle" />
        <set name="flashScope.editMode" value="'edit'" />
      </transition> 
```

在面板上有一个命令按钮“保存”，定义如下

```
 <p:commandButton id="editArticleSave" action="${articleManager.saveArticle(selectedArticle)}" ajax="false" value="Save" /> 
```

对象“articleManager”在 Spring 注入的服务层中：

```
 @Service("articleManager")
    public class ArticleManagerImpl implements ArticleManager{
        // inject dao ...
        @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
        public void saveArticle(Article article) {
            articleDao.save(article);   
        }
    } 
```

但是，当我单击保存按钮时，不会调用该操作。我在函数 saveArticle 中设置了一个断点，它没有中断。该操作被忽略。有谁知道发生了什么？非常感谢。

# tridion - 如何在 Tridion 的剃刀模板中获取对象？

> ID：11886682
> 
> 赞同：-6
> 
> 时间：2012-08-09T15:24:33.730
> 
> 标签：tridion, razor-mediator

我正在编写一个通用的 Razor TBB，它将根据我的要求在组件模板和页面模板中使用。

因此，根据在页面模板和组件模板上应用 TBB，我需要剃刀 TBB 中的页面和组件对象

我要求在页面的特定区域显示/使用页面/组件中的元数据字段值。

这就是为什么，我想通过对象访问元数据值但无法获取对象，

还请跟进我对弗兰克的评论。

任何人都可以建议我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T17:33:12.307

您是否查看过 Razor 调解器可用的（非常有用的）文档？

*   [http://code.google.com/p/razor-mediator-4-tridion/](http://code.google.com/p/razor-mediator-4-tridion/)
*   [http://code.google.com/p/razor-mediator-4-tridion/downloads/detail?name=RazorMediatorDocumentation_v1.2.docx](http://code.google.com/p/razor-mediator-4-tridion/downloads/detail?name=RazorMediatorDocumentation_v1.2.docx)

这些充满了访问当前组件和页面的示例。只是我的 10 秒搜索给出了这些片段：

```
<body class=”@Page.Metadata.BodyClass”&gt;

<div class=”@Component.Fields.NewsStyle”&gt;

<img src=”@Fields.HeaderImage.ID” alt=”@Fields.HeaderImage.AltText” /> 
```

***编辑***：我看到您在后续评论中添加了更多详细信息。您可能希望按照 Bart 的建议进行操作，并将这些详细信息添加到问题中。同时，我将再花几分钟时间为您搜索文档。

官方文档（我上面链接的 Word 文档）包含这个似乎处理元数据的示例：

```
@foreach (var keyword in Publication.MetaData.SomeKeywordFields) {
    <li>@keyword.Title (@keyword.Id)</li>
} 
```

Razor 模板的输出将***成为***Package 中的 Output 项。***所以使用 Razor 调解器来处理***输出项没有任何意义。为此，您不妨使用常规的 C#（片段或程序集）TBB。

***另一个编辑***：似乎 Razor 中介的隐式[`Fields`](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/TridionRazorTemplate.cs#87)变量总是映射到组件字段，而[`Metadata`](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/TridionRazorTemplate.cs#112)变量总是映射到组件的肉类数据字段。为方便起见，我已将上述名称链接到 Google 代码上的相关片段。

所以你似乎有两个选择：

1.  检测您是否在页面或组件中（例如，通过查看隐式`Page`变量是否`null`存在），然后到处都有条件表达式（`isInPage ? Page.Metadata : Metadata`）
2.  [自己修复Razor 中介代码](http://code.google.com/p/razor-mediator-4-tridion/source/checkout)的此限制或聘请[某人](http://www.sdltridionworld.com/community/developers/alexander_klock.aspx)为您修复它

# jsf-2 - Primefaces DataTable - 复杂示例：选定行上没有值

> ID：11886695
> 
> 赞同：1
> 
> 时间：2012-08-09T15:25:12.033
> 
> 标签：jsf-2, primefaces, datatables

我正在尝试执行[Primefaces Showcase](http://www.primefaces.org/showcase/ui/datatableComplex.jsf)上可用的 DataTable 示例。所有功能都有效，但是当我选择一行时，所选行的值不会显示在我的`<p:dialog>`.

我已经检查了所有替代方案，但没有任何效果。有人可以帮助我吗？

我正在使用 Primefaces 3.3 和 glassfish 3.0.1。这是我的代码：

数据表复杂.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>

    </h:head>

    <body>

        <h:form id="form">

            <p:dataTable var="car" value="#{tableBean.cars}" rowKey="#{car.model}" paginator="true" rows="10"
                         selection="#{tableBean.selectedCar}" selectionMode="single" id="carsTable">

                <p:ajax event="rowSelect" update=":form:display" oncomplete="carDialog.show()" />

                <f:facet name="header">
                    List of Cars
                </f:facet>

                <p:column headerText="Model" sortBy="#{car.model}" filterBy="#{car.model}" id="model">
                    #{car.model}
                </p:column>

                <p:column headerText="Year" sortBy="#{car.year}" filterBy="#{car.year}" id="year">
                    #{car.year}
                </p:column>

                <p:column headerText="Manufacturer" sortBy="#{car.manufacturer}" filterBy="#{car.manufacturer}" id="manufacturer">
                    #{car.manufacturer}
                </p:column>

                <p:column headerText="Color" sortBy="#{car.color}" filterBy="#{car.color}" id="color">
                    #{car.color}"
                </p:column>

            </p:dataTable>

            <p:dialog header="Car Detail" widgetVar="carDialog" resizable="false"
                      width="200" showEffect="explode" hideEffect="explode">

                <h:panelGrid id="display" columns="2" cellpadding="4">                  

                    <h:outputText value="Model:" />
                    <h:outputText value="#{tableBean.selectedCar.model}" id="model"/>

                    <h:outputText value="Year:" />
                    <h:outputText value="#{tableBean.selectedCar.year}" id="year"/>

                    <h:outputText value="Manufacturer:" />
                    <h:outputText value="#{tableBean.selectedCar.manufacturer}" id="manufacturer"/>

                    <h:outputText value="Color:" />
                    <h:outputText value="#{tableBean.selectedCar.color}" id="color"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>            
    </body>

</html> 
```

TableBean.java

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;
import javax.enterprise.context.SessionScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ViewScoped
@ManagedBean(name = "tableBean")
@SessionScoped

public class TableBean implements Serializable {

private final static String[] colors;

private final static String[] manufacturers;

static {
    colors = new String[10];
    colors[0] = "Black";
    colors[1] = "White";
    colors[2] = "Green";
    colors[3] = "Red";
    colors[4] = "Blue";
    colors[5] = "Orange";
    colors[6] = "Silver";
    colors[7] = "Yellow";
    colors[8] = "Brown";
    colors[9] = "Maroon";

    manufacturers = new String[10];
    manufacturers[0] = "Mercedes";
    manufacturers[1] = "BMW";
    manufacturers[2] = "Volvo";
    manufacturers[3] = "Audi";
    manufacturers[4] = "Renault";
    manufacturers[5] = "Opel";
    manufacturers[6] = "Volkswagen";
    manufacturers[7] = "Chrysler";
    manufacturers[8] = "Ferrari";
    manufacturers[9] = "Ford";
}

private List<Car> cars;

private Car selectedCar;

private Car[] selectedCars;

public TableBean() {
    cars = new ArrayList<Car>();

    populateRandomCars(cars, 50);
}

public Car getSelectedCar() {
    return selectedCar;
}

public void setSelectedCar(Car selectedCar) {
    this.selectedCar = selectedCar;
}

private void populateRandomCars(List<Car> list, int size) {
    for(int i = 0 ; i < size ; i++)
        list.add(new Car(getRandomModel(), getRandomYear(), getRandomManufacturer(), getRandomColor()));
}

private int getRandomYear() {
    return (int) (Math.random() * 50 + 1960);
}

private String getRandomColor() {
    return colors[(int) (Math.random() * 10)];
}

private String getRandomManufacturer() {
    return manufacturers[(int) (Math.random() * 10)];
}

private String getRandomModel() {
    return UUID.randomUUID().toString().substring(0, 8);
}

public List<Car> getCars() {
    return cars;
}
} 
```

汽车.java

```
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.faces.bean.ManagedBean;

@ManagedBean(name = "car")
@SessionScoped

public class Car implements Serializable {

private String model;
private int year;
private String manufacturer;
private String color;
private int price;

public Car(){

}
public Car(String model, int year, String manufacturer, String color) {
            this.model = model;
            this.year = year;
            this.manufacturer = manufacturer;
            this.color = color;
    }

    public Car(String model, int year, String manufacturer, String color, int price) {
            this.model = model;
            this.year = year;
            this.manufacturer = manufacturer;
            this.color = color;
    this.price = price;
    }

    public String getModel() {
            return model;
    }

    public void setModel(String model) {
            this.model = model;
    }

    public int getYear() {
            return year;
    }

    public void setYear(int year) {
            this.year = year;
    }

    public String getManufacturer() {
            return manufacturer;
    }

    public void setManufacturer(String manufacturer) {
            this.manufacturer = manufacturer;
    }

    public String getColor() {
            return color;
    }

    public void setColor(String color) {
            this.color = color;
    }

 public int getPrice() {
    return price;
}

public void setPrice(int price) {
    this.price = price;
}

    @Override
    public boolean equals(Object obj) {
            if(obj == null)
                    return false;

            if(!(obj instanceof Car))
                    return false;

            Car compare = (Car) obj;

            return compare.model.equals(this.model);
    }

    @Override
    public int hashCode() {
            int hash = 1;

        return hash * 31 + model.hashCode();
    }

@Override
public String toString() {
    return "Car{" + "model=" + model + ", year=" + year + ", manufacturer=" + manufacturer + ", color=" + color + ", price=" + price + '}';
}
} 
```

编辑：要解决这个问题，只需在 TableBean.java 上添加@ViewScoped。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:06:55.060

您的 TableBean 应该是 ViewScoped。

在 TableBean 之上添加 @ViewScoped 或使用 faces-config.xml 文件对其进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:41:42.727

您正在使用[Showcase **Labs**](http://www.primefaces.org/showcase-labs/ui/datatableComplex.jsf)中的示例，该示例在 PrimeFaces 版本 3.4 上运行（在发布时仍在开发中）。

由于您使用的是 PrimeFaces 3.3，因此您应该使用常见[Showcase](http://www.primefaces.org/showcase/ui/datatableComplex.jsf)中的示例。

请记住，Showcase 的**Labs**版本始终在仍在开发的版本上运行，而通用 Showcase 始终在最新的最终版本上运行。

通过检查页面底部，您始终可以查看 Showcase 后面运行的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T17:26:27.557

由于 Car 类只是一个普通类，而不是管理 bean，因此您不需要声明：

@ManagedBean(name = "car") @SessionScoped

# php - 在php中返回sql数组

> ID：11886697
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:25:13.090
> 
> 标签：php, sql, arrays

我在从 SQL 查询返回 php 数据时遇到问题。这是我的代码：

```
 public function get_audit_message($productId,$accountId)
        {
        $sql_list  ="SELECT notes
                     FROM  ".$this->tables_audit."
                     WHERE productId = '".mysql_real_escape_string($productId)."'
                     AND accountId = '".mysql_real_escape_string($accountId)."'
                     ";

        $query = $this->db->query($sql_list);
        if($query->num_rows() > 0)
            {
            $return = $query->result_array();
            return $return;
            }
        else return false;
        } 
```

我遇到麻烦的原因是它`return $return;`返回正确数量的结果，但只显示单词“array”。然后，如果我将其更改为`return $return[0];`正确返回第一个信息条目。

所以我想要做的是选择所有数组编号，例如`return $return[*];`如果可能的话。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:27:00.373

`return $return;`是从这个函数返回数组的正确方法，但你不能只`echo()`返回值，因为它是一个数组。当您尝试回显一个数组时，您只会得到文字“数组”（这也会引发一个通知，您会在打开错误报告时看到该通知）。

您必须对其进行迭代并打印出每个数组元素，或者使用[`implode()`](http://php.net/implode)：

```
$array = $obj->get_audit_message($productId,$accountId); // However you call it
echo implode( "<br />\n", $array) . "<br />\n"; 
```

或者：

```
$array = $obj->get_audit_message($productId,$accountId); // However you call it
foreach( $array as $el) {
    echo $el . "<br />\n";
} 
```

上述两个片段都将产生完全相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:55:15.203

有几种简单的方法可以在 HTML 中显示 PHP 数组的内容。

最简单的是通过**print_r**命令查看它，如下所示：

```
print_r ($my_array); 
```

如果您需要“nice”格式，请添加 PRE 标签，如下所示：

```
echo "<pre>";
print_r($my_array);
echo "</pre>"; 
```

或像这样：

```
echo "<pre>".print_r($my_array, 1)."</pre>"; 
```

此外，还有类似的**var_dump**和**var_export** PHP 函数：

```
echo "<pre>";
var_dump($my_array);
echo "</pre>"; 
```

或者

```
echo "<pre>";
var_export($my_array);
echo "</pre>"; 
```

只需选择您喜欢的阶梯。

# windows-phone-7 - 在 Windows Phone 7 中引用合并的资源字典失败

> ID：11886698
> 
> 赞同：4
> 
> 时间：2012-08-09T15:25:14.957
> 
> 标签：windows-phone-7, xaml, mvvm-light, resourcedictionary

我目前正在使用 MVVMLight 框架构建一个 WP7 应用程序。我想将资源字典添加到我的 app.xaml，但是当我这样做时失败了。这是来自 app.xaml 的片段

```
<Application.Resources>
    <!--Global View Model Locator-->
    <vm:ViewModelLocator x:Key="Locator"
                         d:IsDataSource="True" />
    <!--Merged Resource Dictionaries-->
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="View/StyleResourceDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

因为我使用的是具有键的 ViewModelLocator，所以我收到一条错误消息，警告我不能混合使用和不使用键的资源。在我的资源字典中添加一个键后它看起来像下面这样：

```
 <ResourceDictionary x:Key="resourceDictionary">
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="View/StyleResourceDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary> 
```

在资源字典中，我有一个带有“TitleTemplate”键的样式。在任何一种情况下，当我尝试从我的一个视图中引用资源字典时，它都会失败。我认为的示例代码如下：

```
<TextBlock Name="TB_ContactNameLabel" 
           Text="contact" 
           Style="{StaticResource TitleTemplate}"/> 
```

设计师立即给我错误“资源'TitleTemplate'无法解析”。如果我引用资源字典的键（即：resourceDictionary），则不会引发错误，但它显然没有做任何事情。最后，如果我将 resourceDictionary 直接添加到其资源中的页面，而不是 app.xaml 一切正常。我不想将它添加到我计划使用的每个视图中。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:47:59.020

您的应用程序资源应如下所示：

```
<Application.Resources>
    <!--Global View Model Locator-->
    <!--Merged Resource Dictionaries-->
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="View/StyleResourceDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
    </ResourceDictionary>
</Application.Resources> 
```

# asp.net - asp.net 变量传递

> ID：11886700
> 
> 赞同：0
> 
> 时间：2012-08-09T15:25:22.873
> 
> 标签：asp.net, variables

当我试图在用户提交后将我的页面加载值放入数据库时​​，我遇到了一个奇怪的问题。

当页面加载我有这个：

```
Public theProductName As String = ""
Dim theProductCategory As String = ""

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        LoadProductName()
    End If
End Sub

Private Sub LoadProductName()
    objConn = New MySqlConnection(product.strConnString)
    objConn.Open()

    strSQL = "SELECT id, name, category " & _
                "FROM product " & _
                "WHERE id = 4;"

    Try
        objCmd = New MySqlCommand(strSQL, objConn)
        dtReader = objCmd.ExecuteReader()

        While dtReader.Read()
            theProductName = dtReader("name")
            theProductCategory = dtReader("category")
            btnSubmit.Text = "Add Item to " & theProductName
        End While

        dtReader.Close()
        dtReader = Nothing
        objConn.Close()
        objConn = Nothing
    Catch ex As Exception
        MsgBox("LoadProductName: " & ex.Message)
    End Try
End Sub 
```

当我在页面启动时检查这些值时，它们具有正确的值，甚至提交按钮也具有产品名称。

但是，一旦我在按下按钮后保存它，它就具有与没有相同的变量？

```
Private Sub btnSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSubmit.Click

   Dim productName As String = theProductName.Replace(" ", "-")
   Dim imageName As String = productName & "\" & Trim(txtModel.Text) & ".jpg'"       
   Dim theCat as String = theProductCategory
End Sub 
```

**这里的 productName 和 theCat 一样什么**都不****是****

 **我可以忽略什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:37:36.540

这是因为您`theProductName`仅在第一次加载时不回发时才阅读，然后在任何地方都没有保存。

您可以将变量`theProductName`, 放入视图状态，以便在回发后保持相同。

来自 msdn 的示例和更多评论：http: [//msdn.microsoft.com/en-us/library/ms227551 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms227551(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:38:44.077

你必须用 .`ViewState`因为你发布你的数据所以你丢失了你的旧状态

```
public string ProductName 
{
  get
  {
      if( Viewstate["ProductName"] == null)
      {
         return string.Empty;
      }
      return (string)Viewstate["ProductName"];
   } 
  set
  {
     Viewstate["ProductName"] = value;
  }
} 
```

设置值

```
ProductName = "your value"; 
```**

# sql - 使用 pl/sql 函数插入多个表会导致外键冲突

> ID：11886702
> 
> 赞同：1
> 
> 时间：2012-08-09T15:25:37.210
> 
> 标签：sql, oracle, function, plsql

```
DECLARE    
 cursor curs is select * from starting;  
 appleId number;      
 bananaId number;    
BEGIN  
    for foo in curs  
    LOOP     
        insert into apple (id, weight)  
        values(1,1)  
        returning id into appleId;  
        insert into banana(id,weight)  
        values(1,3)  
        returning id into bananaId;  
        insert into apple_banana_lookup  
        values(1,appleId,bananaId);  
    END LOOP;  
    COMMIT;   
END; 
```

上面的代码导致外键约束违反。声称该`ID`字段`Apple`尚不存在。我的问题是如何使上面的代码起作用并让`apple_banana_lookup`表成功地保留`appleId`和中引用的键`bananaId`。作为补充，我想避免在每次插入后都必须提交，`apple`因为`banana`给定游标中将有约 2 亿条记录。

**更新**

架构声明：

```
 create table apple  
    ( 
        id number(20,0) not null, 
        weight number (20,0)   
    );

    create table banana  
    (   
         id number(20,0) not null, 
         weight number(20,0)  
    )  ;

    create table apple_banana_lookup  
( 
      id number(20,0) not null,
      appleId number(20,0) not null,
      bananaId number(20,0) not null   
      CONSTRAINT "apple_fk" foreign key ("appleId")  
      REFERENCES "apple" ("id"),  
     CONSTRAINT "banana_fk" foreign key ("bananaId")  
      REFERENCES "banana" ("id"),
); 
```

错误信息：

```
ORA-02291: integrity constraint  
parent key not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:48:29.247

您的解释中似乎遗漏了某些内容-正确创建表后，您的代码似乎可以正常工作

我假设这是定义`apple`,`banana`和`apple_banana_lookup`表的方式（请注意，由于您没有在插入时指定列列表`apple_banana_lookup`，我假设表中的列作为您的 PL/SQL 块排序似乎期望他们是）。

```
SQL> create table apple(
  2    id number primary key,
  3    weight number
  4  );

Table created.

SQL> create table banana(
  2    id number primary key,
  3    weight number
  4  );

Table created.

SQL> create table apple_banana_lookup (
  2    id number primary key,
  3    appleID number references apple(id),
  4    bananaID number references banana(id)
  5  );

Table created. 
```

只是为了避免对您的代码进行任何更改，我创建了一个`starting`包含 1 行的表

```
SQL> create table starting( id number );

Table created.

SQL> insert into starting values( 1 );

1 row created. 
```

现在我完全按照您发布的代码运行您的代码。不会产生错误，并且在每个表中插入一行。

```
SQL> DECLARE
  2   cursor curs is select * from starting;
  3   appleId number;
  4   bananaId number;
  5  BEGIN
  6      for foo in curs
  7      LOOP
  8          insert into apple (id, weight)
  9          values(1,1)
 10          returning id into appleId;
 11          insert into banana(id,weight)
 12          values(1,3)
 13          returning id into bananaId;
 14          insert into apple_banana_lookup
 15          values(1,appleId,bananaId);
 16      END LOOP;
 17      COMMIT;
 18  END;
 19  /

PL/SQL procedure successfully completed.

SQL> select * from apple_banana_lookup;

        ID    APPLEID   BANANAID
---------- ---------- ----------
         1          1          1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:51:39.500

```
create table apple  
( 
    id number(20,0) not null, 
    weight number (20,0)   
);  --No primary keys here

create table banana  
(   
     id number(20,0) not null, 
     weight number(20,0)  
)  ;  -- No primary keys here

create table apple_banana_lookup  
( 
      id number(20,0) not null,
      appleId number(20,0) not null,
      bananaId number(20,0) not null,   
      CONSTRAINT apple_fk foreign key (appleId)  
      REFERENCES apple(id),   --this wont work
     CONSTRAINT banana_fk foreign key (bananaId)  
      REFERENCES banana(id)  --this wont work
); 
```

看起来上面的创建语句`apple_banana_lookup`不起作用。表的引用完整性`apple_banana_lookup`需要引用引用表上的唯一键。这就是它应该是什么

```
create table apple  
( 
  id number(20,0) not null, 
  weight number (20,0) ,
  CONSTRAINT apple_pk PRIMARY KEY (id)
);

create table banana  
(   
  id number(20,0) not null, 
  weight number(20,0) , 
  CONSTRAINT banana_pk PRIMARY KEY (id)
)  ;

create table apple_banana_lookup  
( 
      id number(20,0) not null,
      appleId number(20,0) not null,
      bananaId number(20,0) not null,  
      CONSTRAINT app_ban_pk PRIMARY KEY (appleId, bananaId),
      CONSTRAINT apple_fk foreign key (appleId)  
      REFERENCES apple(id),  
     CONSTRAINT banana_fk foreign key (bananaId)  
      REFERENCES banana(id)
); 
```

所以有了这个，下面的工作就像一个魅力（除了循环之外，它和你的一样） -

```
SQL> DECLARE    
 appleId number;      
 bananaId number;    
BEGIN    
        insert into apple (id, weight)  
        values(1,1)  
        returning id into appleId;  
        insert into banana(id,weight)  
        values(1,3)  
        returning id into bananaId;  
        insert into apple_banana_lookup  
        values(1,appleId,bananaId);      
    COMMIT;   
END; 
/

PL/SQL block completed successfully.

SQL> select * from apple;
                  ID               WEIGHT
-------------------- --------------------
                   1                    1

SQL> select * from banana;
                  ID               WEIGHT
-------------------- --------------------
                   1                    3 

SQL> select * from apple_banana_lookup;
                  ID              APPLEID             BANANAID
-------------------- -------------------- --------------------
                   1                    1                    1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:41:21.127

AFAIR 数据在事务中始终可见，因此您应该能够引用在之前的 INSERT 语句中插入的数据。
我怀疑该错误是指字段名称，而不是字段值。如果您向我们提供了有关错误的更多详细信息，那么我们将能够提供更好的帮助。
也检查您的约束源。

# ios - 设置 UITableViewController 的子类

> ID：11886705
> 
> 赞同：1
> 
> 时间：2012-08-09T15:25:46.617
> 
> 标签：ios, uitableview, subclass

我创建了一个项目，其中有一个带有静态单元格的 UITableViewController。我创建了一个 UITableViewController 子类，这样我就可以为我想放在静态单元格中的一些控件编写代码 - 但是，当我将 UITableViewController 的自定义类设置为我创建的子类的自定义类时，表格是'不显示。在我设置了 UITableViewController 的自定义类之后，任何人都可以帮我做些什么来显示表格吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:28:56.780

假设您正在使用情节提要和静态单元格：确保`datasource`控制器中的方法不会覆盖表格视图中的部分和行数。使用静态单元格，您可以同时删除`numberOfRowsInSection:`和`numberOfSections`。

# php - curl：由于 CloudFlare，无法从网站获取 RSS

> ID：11886711
> 
> 赞同：5
> 
> 时间：2012-08-09T15:26:01.080
> 
> 标签：php, xml-parsing, rss-reader, cloudflare

我注意到在服务器上使用 curl连接这个站点[http://www.youm7.com/newtkarirrss.asp](http://www.youm7.com/newtkarirrss.asp)

但是我可以从**本地主机**访问它而没有任何问题

这是测试

[http://www.tjreb.com/xml_grabber.php?feed=http://www.youm7.com/newtkarirrss.asp&stack=1](http://www.tjreb.com/xml_grabber.php?feed=http://www.youm7.com/newtkarirrss.asp&stack=1)

试试 CNN RSS 提要

[http://www.tjreb.com/xml_grabber.php?feed=http://rss.cnn.com/rss/edition_meast.rss&stack=0](http://www.tjreb.com/xml_grabber.php?feed=http://rss.cnn.com/rss/edition_meast.rss&stack=0)

我怎样才能绕过这个错误

这是我的源代码

```
<?php
  class xml_grabber
        {
            private $xml_file       = '' ;
            private $xml_link       = '' ;
            private $xml_dom        = '' ;
            private $xml_type       = '' ;
            private $xml_content    = '' ;
            private $xml_errors     = array() ;
            public  $xml_stack      = 0  ;

            public function __construct($link_file_com = '')
                   {
                       if(!$link_file_com)
                            {
                              $this->xml_errors['construct'] = 'No Xml In Construct' ;
                              return false;
                            }
                       elseif(!function_exists('simplexml_load_file') || !function_exists('simplexml_load_string') || !function_exists('simplexml_import_dom'))
                            {
                              $this->xml_errors['functions'] = 'simple xml function not exists' ;
                              return false;
                            }
                       else
                            {
                             $this->set_xml($link_file_com) ;
                            }
                      // ini_set('memory_limit', '100M');
                   }

             public function set_xml($xml)
                   {
                      if(isset($xml{3}))
                        {
                           if(file_exists($xml))
                              {
                                $this->xml_type = 1 ;
                                $this->xml_file = $xml ;
                              }
                          elseif(filter_var($xml, FILTER_VALIDATE_URL))
                              {
                                $this->xml_type = 2 ;
                                $this->xml_link = $xml ;
                              }
                          else
                              {
                                $this->xml_type = 3 ;
                                $this->xml_dom  = $xml ;
                              }
                        }
                      else
                        {
                          $this->xml_type = '' ;
                        }
                   }

             public function get_xml()
                   {
                      if($this->xml_type == '')
                            {
                              return false ;
                            }
                      elseif($this->xml_type == 1)
                            {
                              return $this->xml_file ;
                            }
                      elseif($this->xml_type == 2)
                            {
                              return $this->xml_link ;
                            }
                      elseif($this->xml_type == 3)
                            {
                              return $this->xml_dom ;
                            }
                   }

             public function set_columns($new_columns= array())
                   {
                      return $this->xml_columns = $new_columns ;
                   }
             public function get_columns()
                   {
                     return $this->xml_columns ;
                   }

             public function load()
                   {
                     if($this->xml_type == '')
                            {
                              $this->xml_errors['loader'] = 'Unknown XML type' ;
                              return false;
                            }
                      elseif($this->xml_type == 1)
                            {
                              $dom = simplexml_load_file($this->xml_file,null, LIBXML_NOCDATA) ;
                              $this->xml_content = $dom ;
                            }
                      elseif($this->xml_type == 2)
                            {
                               $con = $this->connect($this->xml_link);
                               if($this->xml_stack == 1)
                                    {
                                       echo $con; die();
                                    }       
                               $this->xml_content = simplexml_load_string($con,null, LIBXML_NOCDATA) ;
                            }
                      elseif($this->xml_type == 3)
                            {
                              return $this->xml_dom ;
                            }
                   }

             public function fetch($return = 'array')
                    {
                        if($this->xml_content != '')
                            {
                               $rss_feed = $this->xml_content ;

                               $rss_title = (string) $rss_feed->channel->title ;
                               $rss_link  = (string) $rss_feed->channel->link  ;
                               $rss_cat   = (string) $rss_feed->channel->category  ;
                               $rss_image = (string) $rss_feed->channel->image->url  ;

                               $rss_summary =
                                            array
                                            (
                                              'info' =>
                                                        array(
                                                                'title'=>$rss_title ,
                                                                'link'=>$rss_link ,
                                                                'cat'=>$rss_cat ,
                                                                'image'=>$rss_image
                                                                ) ,
                                              'item' =>  array()

                                            ) ;

                               foreach($rss_feed->channel->item as $item)
                                       {

                                           if($item->enclosure && $item->enclosure->attributes())
                                                {
                                                    $image0 = $item->enclosure->attributes() ;
                                                    $image_url = $image0 ['url'] ;
                                                }

                                          $rss_summary['item'][] =
                                                                    array(
                                                                        'title' => (string) $item->title ,
                                                                        'description' => (string) $item->description ,
                                                                        'link' => (string) $item->link ,
                                                                        'date' => (string) $item->pubDate ,
                                                                        'image' => (string) $item->image ,
                                                                        'image2' =>  (string) $image0
                                                                    ) ;
                                       }

                                if($return == 'json')
                                       {
                                         return json_encode($rss_summary) ;
                                       }
                                elseif($return == 'serialize')
                                       {
                                         return serialize($rss_summary) ;
                                       }
                                elseif($return == 'xml')
                                       {
                                         return xml_encode($rss_summary) ;
                                       }
                                else
                                       {
                                         return $rss_summary ;
                                       }

                            }
                        else
                            {
                              $this->xml_errors['fetch'] = 'No Xml Content' ;
                            }
                    }

             protected function connect($link)
                    {
                      if(!filter_var($link, FILTER_VALIDATE_URL))
                              {
                                $this->xml_errors['connect'] = 'Not Vaild Link To Get data' ;
                                return false ;
                              }
                      if(function_exists('curl_init'))
                           {
                             $cu = curl_init();
                             curl_setopt($cu, CURLOPT_URL, $link);
                             curl_setopt($cu, CURLOPT_SSL_VERIFYPEER, false);
                             curl_setopt($cu, CURLOPT_SSL_VERIFYHOST, false);
                             //curl_setopt($cu, CURLOPT_REFERER, "http://www.tjreb.com");
                             //curl_setopt($cu, CURLOPT_HEADER, true);
                 //curl_setopt($cu, CURLOPT_FOLLOWLOCATION, false);
                 curl_setopt($cu, CURLOPT_RETURNTRANSFER, TRUE);
                             $co = curl_exec($cu) ;
                               if($co)
                                    {
                                        $con = $co ;
                                    }
                               else
                                    {
                                      $this->xml_errors['connect'] = 'No Result From Curl' ;
                                      $this->xml_errors['curl']  = curl_error($cu);
                                    }
                              curl_close($cu) ;
                              return $con ;
                           }

                    if(!$con and function_exists('ini_get'))
                        {

                             $url_fopen = ini_get('allow_url_fopen') ;

                             if($url_fopen == 0)
                                {
                                   if(function_exists('ini_set'))
                                        {
                                          ini_set('allow_url_fopen', 1) ;
                                        }
                                   $check_fopen = 1 ;
                                }
                             else
                                {
                                   $check_fopen = 0 ;
                                }

                             if($check_fopen == 1)
                                {
                                  $url_fopen = ini_get('allow_url_fopen') ;
                                }

                             if($url_fopen == 1)
                                {

                                  if(function_exists('file_get_contents') and !$con)
                                   {
                                        $con = @file_get_contents($link) ;
                                        if($con)
                                            {
                                              return $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From file_get_contents' ;
                                            }
                                   }

                              elseif(function_exists('readfile') and !$con)
                                   {
                                        $con = @readfile($link);
                                        if($con)
                                            {
                                              return $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From readfile' ;
                                            }
                                   }

                              elseif(function_exists('file') and !$con)
                                   {
                                        $con = @file($link)  ;
                                        if($con)
                                            {
                                              return  $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From file' ;
                                            }
                                   }

                                }
                        }

                      if(!$con)
                           {
                             $this->xml_errors['connect'] = 'Curl And Allow Url Fopen Disabled On Server' ;
                             return false ;
                           }
                    }

             public function get_error()
                    {
                       return $this->xml_errors ;
                    }

        }

if(isset($_GET['feed']))
    {
       $url = addslashes($_GET['feed']) ;
    }
else
    {
       $url = 'http://rss.cnn.com/rss/edition_meast.rss' ;
    }

$fetch = $_GET['fetch'] ;
$stack = $_GET['stack'] ;

$xml = new xml_grabber($url) ;

/*
 http://www.youm7.com/new3agelrss.asp
 http://www.youm7.com/newtkarirrss.asp
 http://www.almasryalyoum.com/rss_feed_term/223241/rss.xml
 http://gdata.youtube.com/feeds/api/playlists/18A7E36C33EF4B5D?v=2
 http://rss.cnn.com/rss/edition_meast.rss
 https://www.facebook.com/feeds/page.php?format=atom10&id=40796308305
 https://www.facebook.com/feeds/page.php?format=rss20&id=40796308305
 http://www.fwasl.com/feed
 https://www.facebook.com/feeds/page.php?format=atom10&id=378156838895039
 */

if(isset($stack))
{
  $xml -> xml_stack = intval($stack) ; 
}   

$res    = $xml -> load()    ;

$result = $xml -> fetch($fetch)   ;

if($result)
    {
      print_r ( $result ) ;
    }
else
    {
      print_r ( $xml->get_error() ) ;
    }

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T03:58:27.887

您无法轻松绕过 Cloudflare。但是，您可以破解保护系统。:)

首先，解析页面（Cloudflare 保护页面）并计算 3+13*7（很可能每个请求都会有所不同）。

```
$(function(){setTimeout(
            function(){
                $('#jschl_answer').val(3+13*7);
                $('#ChallengeForm').submit();
            },
            5850
)}); 
```

然后使用从解析数据获得的“jschl_vc”值和“jschl_answer”值作为 3+13*7 发送发布请求。然后尝试使用 Cloudflare 添加的 cookie 值再次获取该页面。添加 Cloudflare 白名单后，您将不会再看到该页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-07T12:11:51.743

[您可以使用 PhantomJS http://phantomjs.org/](http://phantomjs.org/)通过 cloudflare 保护， 它可以使用以下小脚本“delay.js”在浏览器外执行 cloudflare JS：

```
"use strict";
var page = require('webpage').create(),
    system = require('system'),
    address, delay;

if (system.args.length < 3 || system.args.length > 5) {
    console.log('Usage: delay.js URL delay');
    phantom.exit(1);
} else {
    address = system.args[1];
    delay = system.args[2];
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
            phantom.exit(1);
        } else {
            window.setTimeout(function () {
                var content = page.content;
                console.log(content);
                phantom.exit();
            }, delay);
        }
    });
} 
```

运行它 `phantomjs delay.js http://protected.url 5000`

这将获得“protected.url”并等待 5000 毫秒，让 cloudflare 代码加载真实页面并将其转储到标准输出。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-09T15:51:47.803

您需要告诉他们的网站您使用的是什么浏览器。

```
curl_setopt ($cu, CURLOPT_USERAGENT, $user_agent); 
```

例如 Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)

或使用当前用户自己的浏览器代理 $_SERVER['HTTP_USER_AGENT']

# php - 我将如何让 scandir 回显文件的链接

> ID：11886712
> 
> 赞同：0
> 
> 时间：2012-08-09T15:26:04.053
> 
> 标签：php, directory, scandir

> **可能重复：**
> [scandir 无法打开目录](https://stackoverflow.com/questions/11885717/scandir-fail-to-open-directory)

我解决了部分`scandir()`问题，但我不喜欢数组。我希望它显示上传的文件并提供指向它们的链接，以便您可以单击图像并查看它们，或单击 zip 文件并下载它们。问题是我不知道该怎么做。

```
<?php
 $files = scandir('../snaps'); 
 print_r($files);
 ?> 
```

我`scandir`到目前为止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:29:46.030

尝试：

```
function print_dir($dir) {
    if ($handle = opendir($dir)) {
        $files = array();
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                $files[] = $file;
            }
        }
        echo '<table>';
        foreach($files as $file) {
            echo '<tr><td style="border:none;"><a href="path/to/' . $file . '"><img src="images/icons/file.png" /></a></td><td style="font-size:18px; border:none; padding-top:28px"><a href="path/to/' . $file . '">' . $file_name . '</a></td></tr>';
        }
        echo '</table>';
        closedir($handle);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:50:56.730

您也可以使用 glob。

```
$files = glob('../snaps/*');

foreach($files as $f) {
  echo '<a href="'.$f.'">'.$f.'</a><br />';
} 
```

这是一个非常简单的示例 - 您可能想要检查当前项目是否不是“..”或“.” 在每次通过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:52:21.913

如果您提供更多详细信息可能会有所帮助，我认为此代码将对链接有所帮助：

```
 <?php
$files = scandir('../snaps'); 

foreach($files as $file){ ?>
<a href="../<?php echo $file; ?>"><?php echo $file; ?></a>
<?
}
?> 
```

这是创建 Zip 文件的功能

```
 <?
function create_zip($files = array(),$destination = '',$overwrite = false, $distill_subdirectories = true) {
  //if the zip file already exists and overwrite is false, return false
  if(file_exists($destination) && !$overwrite) { return false; }
  //vars
  $valid_files = array();
  //if files were passed in...
  if(is_array($files)) {

    //cycle through each file
    foreach($files as $file) {
      //make sure the file exists
      if(file_exists($file)) {
          // echo 1;
        $valid_files[] = $file;
      }
    }
  }
  //if we have good files...
  if(count($valid_files)) {
    //create the archive
    $zip = new ZipArchive();
    if($zip->open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
      return false;
    }
    //add the files
    foreach($valid_files as $file) {
        if ($distill_subdirectories) {
        $zip->addFile($file, basename($file) );
        } else {
        $zip->addFile($file, $file);
        }
        }
    //debug
    //echo 'The zip archive contains ',$zip->numFiles,' files with a status of ',$zip->status;

    //close the zip -- done!
    $zip->close();

    //check to make sure the file exists
    //return file_exists($destination);
    header("Content-type: application/octet-stream");
    header("Content-disposition: attachment; filename={$destination}");
    ob_clean();
    flush();
    readfile($destination);
    //echo $destination;
  }
  else
  {
    return false;
  }
}

?> 
```

这就是你可以称之为的方式：

```
 $files = scandir('../snaps');

    $to_zip = array();
    foreach($files as $file){
        if($file != "." AND $file !=".."){
            $to_zip[] = $folder . "/".$file;
        }
    } 

$zip = create_zip($to_zip, "test.zip", true); 
```

# python - 是否有用于访问 Salesforce 元数据 API 的 Python 库或方法？

> ID：11886718
> 
> 赞同：0
> 
> 时间：2012-08-09T15:26:24.693
> 
> 标签：python, web-services, salesforce, force.com

我需要定期查询 salesforce 实例以获取似乎仅在元数据 API 中可用的信息（每个配置文件的登录 IP 范围）。虽然我知道我可以使用 Ant 或 Force.com 迁移工具，但我希望能够像使用标准 Soap API 一样使用已经存在的出色 python 库来查询它。现在看来，我必须为每个配置文件拉下 xml 文件，并以编程方式打开并解析每个配置文件的 xml，因为我认为您不能直接从 Metadata API 查询数据（只是检索或部署）。关于如何以另一种方式获取这些数据的任何建议？我不反对使用 Selenium 或其他方法进行屏幕抓取，但不认为这会起作用，因为如果使用相同的代码测试多个实例，配置文件的数量可能会改变或会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:34:18.983

试试[beatbox 20.0。](http://pypi.python.org/pypi/beatbox/20.0) 用于通过 SOAP API 查询/更新 Saleforce.com 数据的 Python 库。

# jquery - 在页面加载时使用较新版本覆盖 jquery-ui

> ID：11886720
> 
> 赞同：0
> 
> 时间：2012-08-09T15:26:30.370
> 
> 标签：jquery, jquery-ui

我目前正在开发一个共享点站点，该站点的母版页头部部分包含旧版本的 jquery ui (1.5.3)。

我无法触摸任何母版页代码，因为我无权访问它，并且我需要使用最新版本的 jquery ui 才能使 jCoverflip 插件工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:29:40.950

使用[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/) 它允许你让多个版本的 jQuery 共存于同一个页面。

# php - PHP 中的持久存储（Data_Registry 类）

> ID：11886721
> 
> 赞同：0
> 
> 时间：2012-08-09T15:26:32.480
> 
> 标签：php, expressionengine

我正在使用这个库：[http](http://code.google.com/p/data-registry/) ://code.google.com/p/data-registry/和 ExpressionEngine 系统。

我在这样的 EE 插件中初始化和设置数据：

```
Data_Registry::init('MYPAGE');
Data_Registry::setPersistence(TRUE,TRUE)->restoreNameSpace();
Data_Registry::set('MYPAGE_DATA',json_encode($data['result']));
Data_Registry::set('MYPAGE_LOGGEDIN',true); 
```

如果我随后使用此代码记录值，它将正确显示值。

```
$fp = fopen('login_model.txt', 'a');
fwrite($fp, "Data:".Data_Registry::init('MYPAGE')->get('MYPAGE_DATA'). "\n");
fwrite($fp, "Loggedin:".Data_Registry::init('MYPAGE')->get('MYPAGE_LOGGEDIN'). "\n");
fclose($fp); 
```

但是，当尝试使用此代码在模板中检索这些值时：

```
$data     = Data_Registry::init('MYPAGE')->get('MYPAGE_DATA');
$loggedin = Data_Registry::init('MYPAGE')->get('MYPAGE_LOGGEDIN');
$fp       = fopen('login_model.txt', 'a');
fwrite($fp, "Data:".$data . "\n");
fwrite($fp, "Loggedin:".$loggedin . "\n");
fclose($fp); 
```

两个值都是空白。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:50:42.267

来自 Waygood 的评论：

“如果启用全局持久性，所有命名空间都会自动加载”所以我假设你必须 Data_Registry::setPersistence(TRUE,TRUE)->restoreNameSpace(); 在模板上？除非您已将其设置为默认参数

# java - 如何将 ViewPager 用于多个控件

> ID：11886723
> 
> 赞同：0
> 
> 时间：2012-08-09T15:26:39.703
> 
> 标签：java, android, android-activity, android-viewpager, swipe

我有一个显示联系人信息的屏幕。当用户向左或向右滑动时，它应该转到下一个联系人。

我正在使用 ViewPager 来执行此操作，但我是 Android 开发的新手，因此可以使用一些帮助来确定实现此目标的最佳方法。我在这里遵循了示例： [Viewpager 和 listviews](https://stackoverflow.com/questions/8289425/viewpager-and-listviews)并且它有效。但是我有两个问题。

1) 它仅适用于单个 ListView 控件。但是，我有 3 个 TextView 和一个 ListView（很快就会添加图像），它们都需要更新。我该怎么做？最好的方法是什么？有例子吗？

2）链接中的示例为每个页面创建一个 ListView，但我可以有 200 多个页面，所以这似乎效率不高。我应该只创建 2 并在两者之间来回切换吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:43:07.657

想通了。我创建了一个包含所有控件的新 xml 布局页面。我给了所有控件的ID。在包含 viewpager 的活动上，在启动 view pager 时，我使用基于页面索引的适当数据加载布局上的控件。可能有更好的方法，但这适用于短期。

# ruby-on-rails-3 - 水豚fill_in不起作用

> ID：11886729
> 
> 赞同：1
> 
> 时间：2012-08-09T15:27:02.887
> 
> 标签：ruby-on-rails-3, rspec, capybara

html片段：

```
<table id="project_1">
  <thead>
    ...
    <tr>
      <form accept-charset="UTF-8" action="/projects/1/tasks" class="add-task form-search" 
        data-remote="true" id="new_task" method="post"></form>
      <th><input class="input-xlarge" id="task_content" name="task[content]" 
        placeholder="Start typing here to create a task..." size="50" type="text"></th>
      <th><input class="btn" name="commit" type="submit" value="Add Task"></th>
    </tr>
  </thead>
  ...
</table> 
```

水豚的 rspec 测试：

```
it "should create a task", :js => true do
  visit projects_path
  within("#project_#{@project.id}") do
    fill_in "task[content]", :with => "This is a new task"
    save_and_open_page
    click_button 'Add Task'
  end
  page.should have_content("This is a new task")
end 
```

Capybara 成功找到页面上的所有元素，但在页面中（由 save_an_open_page 生成）字段“任务 [内容]”为空。

这里可能有什么问题？谢谢

更新：

从这个erb生成的html代码：

```
...
<%= form_for [project, Task.new], html: { :class => "add-task form-search" }, remote:   true do |f| %>
  <th><%= f.text_field :content, :class => "input-xlarge", :placeholder => "Start typing here to create a task...", :size => 50 %></th>
  <th><%= f.submit "Add Task", :class => "btn" %></th>
<% end %>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:22:25.860

更新：

封闭标签（@Steve 注意到）可能确实是您的问题。这是有同样问题的人：[form_for closes <form> 标签](https://stackoverflow.com/questions/6095076/form-for-closes-form-tag)

我怀疑问题可能出在表单中的 HTML 标记上。如果您删除表格行/标题标签怎么办，如下所示：

```
<%= form_for [project, Task.new], html: { :class => "add-task form-search" }, remote:   true do |f| %>
  <%= f.text_field :content, :class => "input-xlarge", :placeholder => "Start typing here to create a task...", :size => 50 %>
  <%= f.submit "Add Task", :class => "btn" %>
<% end %> 
```

首先查看是否生成正确的 HTML（使用`<form>`包装标签的`<input>`标签，然后查看是否使规范通过。

原始答案：

我怀疑问题不在于 ，而在于`fill_in`它之后发生的事情（添加任务）。在我自己的测试中，我发现`save_and_open_page`即使测试确实有效，也不会在实际字段中显示文本。你确定表单提交后在页面中添加新任务没有问题吗？

其他要尝试的事情：

1.  删除`within`块，看看它是否有效。
2.  尝试使用该字段`id`而不是它的`name`in `fill_in`，即：`fill_in "task_content", :with => "This is a new task"'`看看是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:28:54.550

我看不出测试代码和 Capybara 调用有什么问题。

在您的标记中，虽然看起来您的两个`input`元素都超出了`form`我希望包含它们的范围。应该是？：

```
<form accept-charset="UTF-8" action="/projects/1/tasks" class="add-task form-search" 
    data-remote="true" id="new_task" method="post">
  <th><input class="input-xlarge" id="task_content" name="task[content]" 
    placeholder="Start typing here to create a task..." size="50" type="text"></th>
  <th><input class="btn" name="commit" type="submit" value="Add Task"></th>
</form> 
```

（我不确定`form`在 a 中嵌套元素`tr`是否是严格合法的 HTML，所以也许您需要考虑使用表格的替代方案）。

我通常发现`save_and_open_page`默认 Rack 驱动程序非常可靠，但您在这里运行 JavaScript，所以我猜您正在运行 selenium 或 headless-webkit 驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T06:04:22.367

关于水豚的一些有趣的事情[https://github.com/thoughtbot/capybara-webkit/issues/253](https://github.com/thoughtbot/capybara-webkit/issues/253)

# erlang - 如何在 Erlang shell 中输出 UTF-8？

> ID：11886730
> 
> 赞同：5
> 
> 时间：2012-08-09T15:27:07.523
> 
> 标签：erlang

考虑这个片段：

```
Eshell V5.9.1  (abort with ^G)
1> A="Pamet".
"Pamet"
2> A1="Paměť".
[80,97,109,283,357] 
```

（“Paměť”是捷克语中“记忆”的意思。我之所以选择它是因为它包含 Erlang 认为“不可打印”的两个字符。）IIRC Erlang，起源于瑞典，假设如果一个字符在拉丁语中不存在 1 ，它是不可打印的。因此，即使我在一个一切都是 UTF-8 的现代 Linux 机器上运行 shell，它也会输出一个整数列表而不是“Paměť”。

我的问题：如何将 UTF-8 字符串写入屏幕，使其显示为字符串，而不是整数列表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T15:50:42.260

在这里你会找到一些关于发生了什么以及如何做的解释：[http ://www.erlang.org/doc/apps/stdlib/unicode_usage.html](http://www.erlang.org/doc/apps/stdlib/unicode_usage.html)

基本上，您可以使用以下内容进行检查：

```
1> lists:keyfind(encoding, 1, io:getopts()).
{encoding, unicode}
2> io:format("~ts~n",["Paměť"]).
Paměť
ok
3> 
```

# mysql - mysql 通过建议定义索引

> ID：11886732
> 
> 赞同：0
> 
> 时间：2012-08-09T15:27:18.053
> 
> 标签：mysql, indexing

我有一个 php/mysql 应用程序，我在项目中的所有操作期间都有所有选择查询的日志。`select x, y from t1 where (con1 AND con2) OR con3 order by colx`我想知道是否有可能获得关于哪些列必须在我的日志中作为索引的任何建议？

我有很多这样的查询也加入了。我听说`EXPLAIN`可以帮助我为这个查询建议哪些列必须是索引。我想知道如何确定哪些列必须是索引。多列索引，单列索引。order by 需要是索引等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:30:59.423

您需要索引`con1`并`con2`作为多列索引。而`con3`作为单列索引

```
INDEX (con1, con2),
INDEX(con3) 
```

# reporting-services - In SSRS how can I change 1 type of border style without affecting the others when multiple cells with different styles are selected

> ID：11886741
> 
> 赞同：0
> 
> 时间：2012-08-09T15:27:56.363
> 
> 标签：reporting-services, ssrs-2008

这是我的问题。在 SSRS 2008 Tablix 中，我有一块已经设置了不同边框样式的单元格（例如，顶部单元格在顶部有一个实心边框，底部单元格在底部有一个实心边框，其他所有没有）。选择一组单元格时，只要其中一个单元格的参数值不同，参数值就会变为空白。

这通常不是问题，但在多值参数（例如大小、位置、边框）的情况下，不同的值不能通过按 + 号来扩展。

[http://i.imgur.com/FT7BF.png](http://i.imgur.com/FT7BF.png)

对比

[http://i.imgur.com/XQhgS.png](http://i.imgur.com/XQhgS.png)

因此，如果我想更改一个值，我必须在该属性的“标题”上输入所有用逗号分隔的值。通过这样做，我被迫为所有子值设置值，即使我只想更改其中一个。我尝试将值保留为空白，希望它会保留当前值，但它似乎不起作用。

任何人都知道如何实现这一目标？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T11:09:43.040

您可以尝试将报告下载为 RDL 文件，然后直接在文本编辑器中进行编辑。然后完成后重新上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:29:04.317

它看起来像报表设计器（或报表生成器）中的错误

# iphone - 如何从 NSMutableArray iPhone 应用程序中查找特定对象？

> ID：11886746
> 
> 赞同：3
> 
> 时间：2012-08-09T15:27:57.920
> 
> 标签：iphone, ios, object, nsmutablearray

我在, ,`NSMutableArray`中存储了许多值。拥有100 多个对象。我需要从数组中找到对象。谁能帮我解决这个问题？提前致谢。`@"New"``@"Old"``@"Future"``NSMutablArray``@"New"`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T15:31:44.813

这将做最经济的伎俩[测试]：

```
[myArray filteredArrayUsingPredicate:[NSPredicate
   predicateWithFormat:@"self == %@", @"New"]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:46:47.200

Gopinath 如果你像这样添加了常量`@"New"`字符串

```
int index = [array indexOfObject:@"New"]; 
```

会做的伎俩

```
NSString *str1 = @"New";
NSString *str2 = @"New"; 
```

然后`str1`并`str2`指向同一个对象。
如果您知道要搜索的字符串，那么是否需要找到它？
蒙迪的回答也不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:40:43.497

为什么不快速枚举对象呢？

```
NSMutableArray *matchingObjects = [NSMutableArray array];
NSArray *objects = [NSArray arrayWithObjects:@"New", @"Old", @"Future", nil];
NSInteger count = 0;
for (NSString *string in objects) {
    if ([string isEqualToString:@"New"]) {
        [matchingObjects addObject:string];
    }
    count++;
} 
```

这种方式`matchingObjects`包含了与测试匹配的所有对象，您可以使用它`count`来获取所有匹配项的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:37:09.803

我建议使用谓词块过滤数组

```
[array filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary * bindings){
    [evaluatedObject isEqual:anObject];
}]]; 
```

# javascript - 如何获取方法签名

> ID：11886748
> 
> 赞同：0
> 
> 时间：2012-08-09T15:28:08.747
> 
> 标签：javascript, html, web-scraping

我所在大学的网站有一个搜索表格，可以访问课程列表。您选择一堆标准（教师、学期等），然后按“获取课程部分”，它会显示所有符合给定标准的课程。我想得到所有的课程，所以我想弄清楚如何用我自己的参数直接调用那个按钮。我对 HTML 和 javascript 的了解很少，但我认为我正在取得一些进展。这是相关的（我认为）来源：

```
<form action="/pban1/bwskfcls.P_GetCrse" method="POST" onsubmit="return checkSubmit()">
<br>
<input type="hidden" name="term_in" value="201209">
<input type="hidden" name="sel_subj" value="dummy">
<input type="hidden" name="sel_day" value="dummy">
<input type="hidden" name="sel_schd" value="dummy">
<input type="hidden" name="sel_insm" value="dummy">
<input type="hidden" name="sel_camp" value="dummy">
<input type="hidden" name="sel_levl" value="dummy">
<input type="hidden" name="sel_sess" value="dummy">
<input type="hidden" name="sel_instr" value="dummy">
<input type="hidden" name="sel_ptrm" value="dummy">
<input type="hidden" name="sel_attr" value="dummy">
<table class="dataentrytable" summary="Table is used to present the course search criteria" .. </table>
<br>
<input type="submit" value="Get Course Sections">
<input type="reset" value="Reset">
</form> 
```

我理解它的方式（我很容易出错），当你按下按钮时，它调用函数 checkSubmit() （它有简单的代码）然后向“/pban1/bwskfcls.P_GetCrse”提交一个“POST”请求。不知何故，它还向该 URL 传递了一些参数（是 javascript？PHP？不知道）。

如果我尝试将调用的 url 放置在地址栏中`https://banweb.mcgill.ca/pban1/bwskfcls.P_GetCrse`，则会打开一个页面，并显示以下错误：

```
mod_plsql: /pban1/bwskfcls.P_GetCrse HTTP-404 bwskfcls.P_GetCrse: MANY PROCEDURES MATCH NAME, BUT NONE MATCHES SIGNATURE (parameter names) 
```

所以我理解我没有传递正确的参数。我必须传递哪些参数，我该怎么做？

如果需要任何其他来源，我很乐意发布。感谢任何输入或澄清，我只是通过反复试验和大量谷歌搜索未知术语才达到这一点。

**编辑：** 这是 checksubmit() 的代码

```
<script language="JavaScript" type="text/javascript">
<!-- Hide JavaScript from older browsers 
var submitcount=0;
function checkSubmit() {
if (submitcount == 0)
   {
   submitcount++;
   return true;
   }
else
   {
alert("Your changes have already been submitted.");
   return false;
   }
}
//  End script hiding -->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:14.390

当a`form`提交时，表单中的所有字段都会提交给服务器。在您的表单中，您有一堆隐藏字段，所有这些隐藏字段都在 POST 请求中作为参数传递给服务器。

就像是

```
/pban1/bwskfcls.P_GetCrse?term_in=201209&sel_subj=dummy... 
```

它们（看起来像）的服务器调用带有参数的存储过程（大概是在剥离具有`dummy`作为值的参数之后）。

错误说

> 许多程序匹配名称，但没有匹配签名（参数名称）

所以看起来已经为某些参数集定义了程序，但不是全部。因此，可能有一个存储过程可以使用`faculty`和`term`作为输入进行搜索，但没有仅用于`faculty`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:32:15.313

您示例中的表单将字段中给出的所有参数传递给`<input type="hidden" ../>`脚本。在您的示例代码中，没有涉及 JavaScript（但是`CheckSubmit()`），但我假设 JavaScript 用于设置这些输入字段的值。

您最好的机会是提交所有这些，然后只修改符合您的搜索条件的那些。

要手动发出请求，您可以使用来自 linux/unix 控制台的[curl等工具。](http://curl.haxx.se/docs/manpage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:40:07.570

为了伪造对服务器的调用，您需要使用 POST 调用打开页面。您不能从浏览器执行此操作。您可以使用服务器端代码或 CURL 请求，例如

```
CURL -X POST -d 'term_in=201209&sel_subj=dummy&sel_day=dummy&sel_schd=dummy......' https://banweb.mcgill.ca/pban1/bwskfcls.P_GetCrse 
```

将 dummy 替换为正确的值，并将 ... 替换为其余值。这是假设该网站不检查 cookie。如果是这种情况，您必须将浏览器中的 cookie 添加到 CURL 调用中。检查 CURL 文档以了解如何做到这一点。

您也可以在具有 curl 库的服务器代码中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:47:16.543

我想到了。感谢您的回答，他们有一些帮助，但我不得不做更多的挖掘来找出所需的确切签名。

我所做的是在 Chrome (Ctrl+Shift+I) 中打开开发人员工具，然后切换到网络选项卡。在那里我能够监控所有网络活动。然后我按下“获取课程部分”按钮。瞧，我看到 POST 请求弹出！

我点击它，发现标题“表单数据”下的请求中传递的所有参数。我以 url?p1:v1&p2:v2... 格式重写了它们，并在我的浏览器中打开了完整的 URL。成功！不需要 CURL。

# jquery - 使用文件上传 jQuery 插件在 Ajax 调用中上传多个文件

> ID：11886753
> 
> 赞同：1
> 
> 时间：2012-08-09T15:28:24.270
> 
> 标签：jquery, jquery-plugins, file-upload

我知道不可能使用常规的 Ajax 调用来上传文件，所以我想使用 jQuery 文件上传插件来模拟这个过程。我有一个表单，允许用户为具有 3 个名为male_image、female_image 和neutral_image 的文件输入的项目输入数据。我想在我的 Ajax 调用的成功回调中上传所有 3 个输入中的文件。

```
$.ajax({
      type: "POST",
      url: "/manage/processadditem",
      data:  $("#add_form").serialize(),
      dataType: "html",
      success: function( response, textStatus, XHR )
      {
        if(response.indexOf('invalid') >= 0 || response.indexOf('Exception') >= 0){
            //Show them their errors
            alert(response);
        }
        else{
            //Data was good
            //Upload male_/female_/neutral_image to /manage/items/itemimage
            //for further processing
        }

      }
    }); 
```

我已经在背面设置了代码来处理图像，我只需要把它们放在那里。我能找到的所有多文件输入插件似乎都可以处理从单个输入发送多个文件。如何从多个文件输入中发送，每个输入都带有一个文件，以便我可以在后端区分它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:21:08.737

你可以用这个[jquery上传](http://jquery.malsup.com/form/progress3.html)和上传多个文件，例子很简单

# mysql - Mysql Adjancency：获取叶子的所有父母

> ID：11886756
> 
> 赞同：3
> 
> 时间：2012-08-09T15:28:29.870
> 
> 标签：mysql, adjacency-list

我在使用此数据结构模型的类别中有一个表。还可以使用另一个表来显示类别分支的路径：

```
**t_category**
id | name | parent
------------------
1   mascot   null
2   cat      1
3   dog      1
4   doberman 3

**t_category_path**
id | path
------------------
1   /1/
2   /1/2/
3   /1/3/
4   /1/3/4/ 
```

我想要的是获得任何项目的父母名单。例如如果我搜索“狗”得到“狗，吉祥物”，如果我搜索“杜宾”应该得到“杜宾，狗，吉祥物”

我试过这个......但它是相反的，我的意思是寻找父母得到叶子：

```
SELECT
    c2.id,
    c2.name,
    p.path
FROM t_category c, t_category c2, t_category_path p, t_category_path p2
WHERE c.id = 1
AND p2.id = c.id
AND p.path LIKE(CONCAT(p2.path,'%'))
AND c2.id = p.id
ORDER BY p.path ASC; 
```

显然得到：

```
id | name | path
------------------
1   mascot   /1/
2   cat      /1/2/
3   dog      /1/3/
4   doberman /1/3/4/ 
```

但我想从“杜宾”中得到：

```
id | name | path
------------------
1   mascot   /1/
3   dog      /1/3/
4   doberman /1/3/4/ 
```

可以从叶子咨询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T15:57:48.560

您可能应该在路径字段中分解描述的数据。使用这样的东西：

```
id | depth | parent
4    2       3
4    1       1
3    1       1
3    2       3 
```

等等...

然后你可以这样做：

> SELECT * FROM t_category_path WHERE id = 4

# asp.net-mvc - 使用 Visual Studio 2010 的 Azure 网站发布配置文件

> ID：11886760
> 
> 赞同：2
> 
> 时间：2012-08-09T15:28:52.433
> 
> 标签：asp.net-mvc, visual-studio-2010, visual-studio, azure, azure-web-app-service

我有一个使用 ASP.NET MVC4 构建的网站，我可以使用 Visual Studio **2012 的** `Publish web application`向导将其发布到 Azure 网站和 W2K8 R2 服务器。

我还成功地将 VS 2010 配置**为**`Publish Web`使用旧的 VS 2010向导发布到我的 W2K8 R2 服务器。

但是，这个旧的 VS 2010 向导不适用于**Windows Azure 网站**的“发布配置文件” 。我假设有一个适用于 VS 2010 的**新**向导版本，但我不知道如何安装它，或者如果我已经安装了它，请访问它。

我认为有一个命令行工具可以做到这一点，但深入研究`msbuild`并`web deploy`没有提供任何爱。

**如何使用 VS 2010 将 ASP.NET MVC4 应用程序发布到 Azure 网站？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:14:44.050

[您可以在Microsoft Windows Azure .NET 开发人员中心下载页面下载](http://www.windowsazure.com/en-us/develop/downloads/)Visual Studio 2010 的工具。希望有帮助！

# jquery - 选项 资源加载失败 - 基本身份验证 + SSL - Chrome / Safari

> ID：11886764
> 
> 赞同：3
> 
> 时间：2012-08-09T15:29:06.973
> 
> 标签：jquery, google-chrome, ssl, safari, basic-authentication

我目前遇到了 Chrome 和 Safari 的问题，但没有遇到 Firefox 的问题。我只是想向`GET`服务器发送一个基本请求。这个使用 SSL 和`"username:password"`base64 编码的基本身份验证。下面，一个例子：

```
$.ajax({
  url: 'https://(...)',
  type: "GET",
  beforeSend: function(xhr) {
    var base64 = 'dXNlcm5hbWU6cGFzc3dvcmQ=';
    return xhr.setRequestHeader("Authorization", "Basic " + base64);
  }
}); 
```

Chrome 开发者工具显示错误：

```
OPTIONS https://(...) Resource failed to load 
f.support.ajax.f.ajaxTransport.send
f.extend.ajax 
```

![在此处输入图像描述](../Images/41cea8d99724b60952a350ea0458a417.png)

我能做什么 ？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:08:48.457

```
 var auth; 

function make_base_auth(user, password) {
    var tok = user + ':' + password;
    var hash = Base64.encode(tok);
    return "Basic " + hash;
}

function getAuthCookie() {

    var cn = "Authorization=";
    var idx = document.cookie.indexOf(cn)
    var end;

    if(idx != -1) {
        var end = document.cookie.indexOf(";", idx + 1);
        if(end == -1)
            end = document.cookie.length;
        return unescape(document.cookie.substring(idx + cn.length, end));
    } else {
        return "";
    }
}

       document.cookie = encodeURIComponent("Authorization") + "=deleted; expires=" + new Date(0).toUTCString(); 
       auth = make_base_auth($.trim($('#email').val()), $.trim($('#password').val()));
   document.cookie = "Authorization=" + auth;

             $.ajax({
        url : BASE_URI + "user",
        method : "GET",
        beforeSend : function(xhr) {
            xhr.setRequestHeader('Authorization', getAuthCookie());
        },
        xhrFields : {
            withCredentials : true
        },
        accept : "application/json",
        contentType : "application/json",
        cache : false,
        cookie : false,
        statusCode : {
            404 : function() {
                console.log("Page Not Found");
            } 
        }

    }).success(function(response) {
        console.log("Login SUCCESS " + JSON.stringify(response));

           }).fail(function(response) {

    }).then(function() {

           }); 
```

# asp.net-mvc-3 - 如何处理 MVC3 中的异常？

> ID：11886768
> 
> 赞同：0
> 
> 时间：2012-08-09T15:29:11.673
> 
> 标签：asp.net-mvc-3, exception-handling, error-handling

我在 MVC3 应用程序中工作。我很难在我的控制器中处理异常。

我的帐户控制器在这里，

```
public ActionResult Register(NewRegister model)
{
    if (ModelState.IsValid)
    {
        if (!IsUserLoginExist(model.Email))
        {
            AccountServiceHelper.CreatePerson(model);
            return RedirectToAction("RegistrationConfirmation", "Account");
        }
        else
        {
            ModelState.AddModelError("","Email Address already taken.");
        }
    }
    return View(model);
} 
```

验证后，`IsUserLoginExist`我只是调用 Helper 类，即`AccountServiceHelper`使用 Web 服务方法，如`CreatePerson`.

我的 Helper 类如下所示：

```
public static void CreatePerson(NewRegister model)
{
    try
    {
        try
        {
            var FirstName = model.FristName;
            var LastName = model.LastName;
            var Email = model.Email;
            var Role = model.Role;
            var Password = model.Password;
            .....
            .....
            service.CreatePerson(model);
            service.close();
        }
        catch(Exception e) 
        {

        }
    }
    catch { }
} 
```

我的问题是如何处理助手类中的异常并返回控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:34:07.633

一种可能性是在您的控制器处处理异常：

```
public static void CreatePerson(NewRegister model)
{
    var FirstName = model.FristName;
    var LastName = model.LastName;
    var Email = model.Email;
    var Role = model.Role;
    var Password = model.Password;
    .....
    .....
    service.CreatePerson(model);
    service.close();
} 
```

进而：

```
public ActionResult Register(NewRegister model)
{
    if (ModelState.IsValid)
    {
        try
        {
            if (!IsUserLoginExist(model.Email))
            {
                AccountServiceHelper.CreatePerson(model);
                return RedirectToAction("RegistrationConfirmation", "Account");
            }
            else
            {
                ModelState.AddModelError("", "Email Address already taken.");
            }
        }
        catch (Exception ex)
        {
            ModelState.AddModelError("", ex.Message);
        }
    }
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:45:58.567

就像其他人说的那样，你使用这个方法从你的助手类中抛出它：

```
public static void CreatePerson(NewRegister model)
{
    try
    {
        var FirstName = model.FristName;
        var LastName = model.LastName;
        var Email = model.Email;
        var Role = model.Role;
        var Password = model.Password;
        .....
        .....
        service.CreatePerson(model);
        service.close();
    }
    catch(Exception e) 
    {
        // handle it here if you want to i.e. log

        throw e; // bubble it to your controller
    }
} 
```

If an exception occurs in your helper class, and you don't specifically catch it in your helper class, it will bubble up to your controller anyway. So if you don't want to handle it in your helper class, there's no need to catch it as it will end up in your controller anyway.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:35:21.917

从你的助手类中扔掉它

# sql - 排除存储过程中的特定时间范围

> ID：11886769
> 
> 赞同：0
> 
> 时间：2012-08-09T15:29:16.210
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2000

我有一个存储过程，它查询我的数据库以提取“昨天”日期的“打开”报告。该程序将在 windows 调度程序上运行，始终查询数据库以获取昨天的结果。我想要昨天上午 5:30 - 6:26 以外的所有结果。我不在乎看到这些结果......一切正常，除了不显示指定的时间块......

我的存储过程是：

```
ALTER PROCEDURE [dbo].[Open_Close] AS
declare   @dtNow         datetime ,   @dtToday       datetime ,   @dtFrom        datetime ,   @dtThru        datetime ,   @dtExcludeFrom datetime ,   @dtExcludeThru datetime  
set @dtNow         = getdate() 
set @dtToday       = convert(datetime,convert(varchar,@dtNow,112),112) 
set @dtFrom        = dateadd(day,-1,@dtToday) -- start-of-day yesterday 
set @dtThru        = dateadd(ms,-3,@dtToday)  -- end-of-day yesterday (e.g., 2012-06-17 23:59:59.997) 
set @dtExcludeFrom = convert(datetime, convert(char(10),@dtFrom,120) + ' 05:30:00.000' , 120 ) 
set @dtExcludeThru = convert(datetime, convert(char(10),@dtFrom,120) + ' 06:15:00.000' , 120 )  

SELECT Store_Id , DM_Corp_Received_Date
FROM Register_Till_Count_Tb 
WHERE Register_Transaction_Type    =  'SOD'   
AND Register_Till_Count_Datetime     between @dtFrom        
and @dtThru  AND Register_Till_Count_Datetime not between @dtExcludeFrom 
and @dtExcludeThru 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:48:35.507

尝试改变

```
Register_Till_Count_Datetime not between @dtExcludeFrom and @dtExcludeThru 
```

至

```
 (Register_Till_Count_Datetime < @dtExcludeFrom  OR 
  Register_Till_Count_Datetime > @dtExcludeThru) 
```

不要忘记括号。

`NOT BETWEEN`并不总是像您期望的那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:50:13.860

尝试

```
AND NOT (Register_Till_Count_Datetime between @dtExcludeFrom and @dtExcludeThru ) 
```

# visual-studio-2010 - 用 VS2010 安装 Qt

> ID：11886772
> 
> 赞同：0
> 
> 时间：2012-08-09T15:29:36.477
> 
> 标签：visual-studio-2010, qt, build

我已按照[此处](http://thomasstockx.blogspot.com/2011/03/qt-472-in-visual-studio-2010.html)的说明下载并提取 Qt 文件并准备我的 VS 环境以进行安装。

但是，当我运行 VS2010 命令提示符中列出的配置命令时，它显示“配置未被识别为内部或外部命令”。

我的路径有什么问题吗？我在哪里可以找到配置实用程序文件？

谢谢你的帮助。

# apache - Apache WSASocket 未能打开继承的套接字。（LMHOSTS 已禁用）

> ID：11886775
> 
> 赞同：0
> 
> 时间：2012-08-09T15:29:41.630
> 
> 标签：apache, xampp

```
[Thu Aug 09 11:20:30 2012] [notice] Child 4656: Child process is running
[Thu Aug 09 11:20:30 2012] [crit] (OS 10022)An invalid argument was supplied.  : Child 4656: setup_inherited_listeners(), WSASocket failed to open the inherited socket.
[Thu Aug 09 11:20:30 2012] [crit] Parent: child process exited with status 3 -- Aborting. 
```

我意外地开始收到此错误。我不相信我更改了任何 conf 文件。

1.  有没有我可以在 apache 安装中重置的临时文件？我已经从 /xampp/tmp 移动了所有东西

2.  我检查了 localhost:80 是否正在使用中，我认为不是这种情况。

3.  我已经按照此处的说明重置了 netsh：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=31765](https://issues.apache.org/bugzilla/show_bug.cgi?id=31765)

请推荐重置 apache 的步骤，因为我认为这可能是由孤立的 PID 或类似性质的东西引起的问题，因为没有任何改变，并且我的计算机意外关闭。

这是在 Windows XP 上，apache httpd.exe 版本是 2.2.11.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:05:21.383

端口 443 正在使用中。然后神奇地停止使用。然后我想也许 netsh 重置导致 LMHOSTS 被启用，因为我最终将本地连接重命名为启用了 LMHOSTS 的本地连接 2。这叫做魔法。

Panda Media Booster 使用的是 443。

# sql - 我可以在表的索引 n 处插入一行吗？

> ID：11886776
> 
> 赞同：0
> 
> 时间：2012-08-09T15:29:41.677
> 
> 标签：sql, sql-server-2005, insert, union

我知道我可以做到`UNION`——但有没有更好的方法来做到这一点？我们正在使用动态`SQL`并将其存储在表中，其中一些语句具有`ORDER BY`子句。我必须在顶部位置添加一个动态的“全部”选项，该选项也存储在数据库中，以填充应用层中的下拉菜单。

我知道这是一个不稳定的解决方案，但我被应用程序的当前设计所困。除了更改存储过程之外，另一个选项是向数据模型和应用层添加一堆代码。如果`UNION`是我唯一/最好的选择，我可以做到。*我只是想知道在数据库方面*是否有更好的方法。

另外，我不想讨论`SQL`存储在数据库中的动态字符串的优点。这就是它的方式，这就是我必须使用的。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:41:19.483

听起来您现有的 ORDER BY 列不能满足您当前的需求。为什么不添加另一列明确详细说明下拉控件项的位置，然后在存储过程中按该列排序？

关于动态 SQL 的讲座，我就不说了。小心用户输入是吗？;)

# javascript - 如何使超级鱼下拉菜单响应？

> ID：11886781
> 
> 赞同：12
> 
> 时间：2012-08-09T15:30:03.263
> 
> 标签：javascript, jquery, html, css, responsive-design

我正在使用带有 skelton 框架的 superfish 下拉菜单。我希望它也能在手机上工作。默认情况下，它显示下拉项目，但将鼠标悬停在其下方的项目上。我想以某种方式拥有它，以便它将父项推到它下面。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-10T14:07:48.727

**这里有更好的答案**

我能够将 Superfish 的相同 HTML 转换为响应式抽屉菜单。JS 非常简单，整个事情基本上都是使用 CSS 完成的。看看吧，让我知道你们的想法！

```
// TRIGGER ACTIVE STATE
$('#mobnav-btn').click(

  function() {
    $('.sf-menu').toggleClass("xactive");
  });

// TRIGGER DROP DOWN SUBS
$('.mobnav-subarrow').click(

  function() {
    $(this).parent().toggleClass("xpopdrop");
  });
```

```
body {
  font-family: Arial;
  font-size: 12px;
  padding: 20px;
}
#mobnav-btn {
  display: none;
  font-size: 20px;
  font-weight: bold;
  background-color: blue;
  color: white;
  padding: 10px;
  cursor: pointer;
}
.mobnav-subarrow {
  display: none;
}
@media only screen and (max-width: 480px) {
  #mobnav-btn {
    display: block;
  }
  .mobnav-subarrow {
    display: block;
    background-color: #0f3975;
    opacity: .3;
    border-bottom: 1px solid white;
    border-top: 1px solid black;
    height: 20px;
    width: 30px;
    background-position: top left!important;
    position: absolute;
    top: 8px;
    right: 10px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    cursor: pointer;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    cursor: pointer;
    -webkit-transition: all .1s ease-in-out;
    -moz-transition: all .1s ease-in-out;
    -ms-transition: all .1s ease-in-out;
    -o-transition: all .1s ease-in-out;
    transition: all .1s ease-in-out;
  }
  .sf-menu {
    width: 100%!important;
    display: none;
  }
  .sf-menu.xactive {
    display: block!important;
  }
  .sf-menu li {
    float: none!important;
    display: block!important;
    width: 100%!important;
  }
  .sf-menu li a {
    float: none!important;
  }
  .sf-menu ul {
    position: static!important;
    display: none!important;
  }
  .xpopdrop ul {
    display: block!important;
  }
}
```

```
<script src="http://code.jquery.com/jquery-compat-git.js"></script>
<script src="http://users.tpg.com.au/j_birch/plugins/superfish/js/superfish.js"></script>
<link href="http://users.tpg.com.au/j_birch/plugins/superfish/css/superfish.css" rel="stylesheet" />
<small>This is a responsive Superfish Menu by <a href="mailto:ryanbrackett@gmail.com">Ryan Brackett</a>. <br/>
    <br/>In this demo, you can drag the middle bar to see the responsive menu. I have already included the default css and js files for Superfish</small>

<br/>
<br/>
<div id="mobnav-btn">Button</div>
<ul class="sf-menu">
  <li><a href="#">Item 1</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 1.1</a>

      </li>
      <li><a href="#">Subitem 1.2</a>

      </li>
      <li><a href="#">Subitem 1.3</a>

      </li>
      <li><a href="#">Subitem 1.4</a>

      </li>
    </ul>
  </li>
  <li><a href="#">Item 2</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 2.1</a>

      </li>
      <li><a href="#">Subitem 2.2</a>

      </li>
      <li><a href="#">Subitem 2.3</a>

      </li>
      <li><a href="#">Subitem 2.4</a>

      </li>
    </ul>
  </li>
  <li><a href="#">Item 3</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 3.1</a>

      </li>
      <li><a href="#">Subitem 3.2</a>

      </li>
      <li><a href="#">Subitem 3.3</a>

      </li>
      <li><a href="#">Subitem 3.4</a>

      </li>
    </ul>
  </li>
  <li><a href="#">Item 4</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 4.1</a>

      </li>
      <li><a href="#">Subitem 4.2</a>

      </li>
      <li><a href="#">Subitem 4.3</a>

      </li>
      <li><a href="#">Subitem 4.4</a>

      </li>
    </ul>
  </li>
  <li><a href="#">Item 5</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 5.1</a>

      </li>
      <li><a href="#">Subitem 5.2</a>

      </li>
      <li><a href="#">Subitem 5.3</a>

      </li>
      <li><a href="#">Subitem 5.4</a>

      </li>
    </ul>
  </li>
  <li><a href="#">Item 6</a>

    <div class="mobnav-subarrow"></div>
    <ul>
      <li><a href="#">Subitem 6.1</a>

      </li>
      <li><a href="#">Subitem 6.2</a>

      </li>
      <li><a href="#">Subitem 6.3</a>

      </li>
      <li><a href="#">Subitem 6.4</a>

      </li>
    </ul>
  </li>
</ul>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T17:32:23.443

**更新：** 查看 Ryan Brackett 的答案

下拉菜单在移动设备上效果不佳。我建议在移动设备上隐藏超级鱼菜单并用其他东西代替它。

资源： **画布外**

[http://www.lukew.com/ff/entry.asp?1569](http://www.lukew.com/ff/entry.asp?1569)

[http://www.zurb.com/playground/off-canvas-layouts](http://www.zurb.com/playground/off-canvas-layouts)

**移动导航模式**

[http://bradfrostweb.com/blog/web/responsive-nav-patterns/](http://bradfrostweb.com/blog/web/responsive-nav-patterns/)

对于寻找解决方案的其他人，请确保您使用的是最新的 jQuery。我有一些旧网站，我发现使用更新版本的 jQuery 使 Superfish 菜单可以在移动设备上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T04:07:00.690

正如 Ed 指出的那样，为响应式菜单解决所有不同的 superfish/css 问题似乎是有问题的。

在查看了此处和其他地方的选项后，我发现了一个纯 CSS 响应式菜单，它比 superfish 更快更容易修改，并且没有 jquery 或 javascript 的开销。它也有二级菜单。

在使用之前，我使用 screenfly 检查[了演示](http://www.cssscript.com/demo/pure-css-mobile-compatible-responsive-dropdown-menu)以检查响应能力和移动布局。与 codepen 演示页面不同，CSSscript.com 版本（上面的链接）为移动设备提供了水平响应式布局。

[![纯响应式 CSS 菜单](../Images/542a1fce293b575faed82f6c9f7996b7.png)](https://i.stack.imgur.com/LVlAA.jpg)

[![screenfly 的移动视图，320px 宽](../Images/80df5b978d579b07ea41ac19b10c419c.png)](https://i.stack.imgur.com/iG9gZ.jpg)

代码在一个 HTML 文件中，您可以轻松地将其拆分为链接的 CSS 文件，只有 2 个媒体查询管理响应式更改，即使这样也只有很少的更改。可以毫无问题地删除“+”符号。

只有一个小缺点：第一个链接下载一个 HTML，底部有一个 javascript，添加了明显的谷歌分析跟踪，很容易删除，而不是在 codepen 上。

[解释](http://www.cssscript.com/pure-css-mobile-compatible-responsive-dropdown-menu/) [作者 andor nagy - 来自 codepen 的代码](http://codepen.io/andornagy/pen/xhiJH)

```
/* CSS Document */

@import url(http://fonts.googleapis.com/css?family=Open+Sans);
@import url(http://fonts.googleapis.com/css?family=Bree+Serif);

body {
	background: #212121;
	font-size:22px;
	line-height: 32px;
	color: #ffffff;
	word-wrap:break-word !important;
	font-family: 'Open Sans', sans-serif;
	}

h1 {
	font-size: 60px;
	text-align: center;
	color: #FFF;
}	

h3 {
	font-size: 30px;
	text-align: center;
	color: #FFF;
}

h3 a {
	color: #FFF;
}

a {
	color: #FFF;
}

h1 {
	margin-top: 100px;
	text-align:center;
	font-size:60px;
	font-family: 'Bree Serif', 'serif';
	}

#container {
	margin: 0 auto;
	max-width: 890px;
}

p {
	text-align: center;
}

#relatedContent {
  max-width: 800px;
  margin: 200px auto;
}

#relatedContent .item {
  max-width: 44%;
  padding: 3%;
  float: left;
  text-align: center;
}

#relatedContent .item a img {
  max-width: 100%;
}	

nav { 
	margin: 50px 0;
	background-color: #E64A19;
}

nav ul {
	padding:0;
	margin:0;
	list-style: none;
	position: relative;
	}

nav ul li {
	display:inline-block;
	background-color: #E64A19;
	}

nav a {
	display:block;
	padding:0 10px;	
	color:#FFF;
	font-size:20px;
	line-height: 60px;
	text-decoration:none;
}

nav a:hover { 
	background-color: #000000; 
}

/* Hide Dropdowns by Default */
nav ul ul {
	display: none;
	position: absolute; 
	top: 60px;
}

/* Display Dropdowns on Hover */
nav ul li:hover > ul {
	display:inherit;
}

/* Fisrt Tier Dropdown */
nav ul ul li {
	width:170px;
	float:none;
	display:list-item;
	position: relative;
}

/* Second, Third and more Tiers	*/
nav ul ul ul li {
	position: relative;
	top:-60px; 
	left:170px;
}

/* Change this in order to change the Dropdown symbol */
li > a:after { content:  ' +'; }
li > a:only-child:after { content: ''; }
```

```
<div id="container">
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">WordPress</a>
            <!-- First Tier Drop Down -->
            <ul>
                <li><a href="#">Themes</a></li>
                <li><a href="#">Plugins</a></li>
                <li><a href="#">Tutorials</a></li>
            </ul>        
            </li>
            <li><a href="#">Web Design</a>
            <!-- First Tier Drop Down -->
            <ul>
                <li><a href="#">Resources</a></li>
                <li><a href="#">Links</a></li>
                <li><a href="#">Tutorials</a>
            	<!-- Second Tier Drop Down -->
                <ul>
                    <li><a href="#">HTML/CSS</a></li>
                    <li><a href="#">jQuery</a></li>
                    <li><a href="#">Other</a>
                        <!-- Third Tier Drop Down -->
                        <ul>
                            <li><a href="#">Stuff</a></li>
                            <li><a href="#">Things</a></li>
                            <li><a href="#">Other Stuff</a></li>
                        </ul>
                    </li>
                </ul>
                </li>
            </ul>
            </li>
            <li><a href="#">Graphic Design</a></li>
            <li><a href="#">Inspiration</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </nav>
  <h1>Pure CSS Drop Down Menu</h1>
<p> A simple dropdown navigation menu made with CSS Only. Dropdowns are marked with a plus sign ( + )</p>
<p>Read tutorial <a target="_blank" href="http://webdesignerhut.com/css-dropdown-menu/">here</a></p>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T13:27:54.297

这就是我使用的：

```
 isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

$(".menu a").click(function(event){
        if($(this).parents("ul").length == 1 && !$(this).hasClass("lastClick") && isMobile)
            event.preventDefault();     

        $(".menu a").removeClass("lastClick");
        $(this).addClass("lastClick");
    }); 
```

将“.menu a”替换为您的导航链接，此代码段将在第二次点击后将用户导航到点击的网站，而第一次点击只会向他显示子页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T20:58:45.457

Reshad：只需像这样更改您的 CSS：

```
.xpopdrop > ul {
        display: block!important;
}
```

你会没事的。

# java - android java继承

> ID：11886782
> 
> 赞同：0
> 
> 时间：2012-08-09T15:30:05.623
> 
> 标签：java, android, inheritance

我有一个名为`Chat`extends的类`Activity`。

当我创建`Chat`类时，我在类中保存了对它的引用`Application`。

```
onCreate(Bundle) {
    setCurrentActivity(this);
} 
```

我想进入 Activity 的 Chat 区域，以便使用其中的一种方法。我正在尝试这样做：

```
Chat chat = (Chat) getCurrentActivity();
chat.someUniqueFuction(); 
```

但我看不到任何`Chat`方法。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:38:43.293

在**Application**类中，它应该如下所示

```
public void onCreate(){
    super.onCreate();
    setCurrentActivity(this);
} 
```

这不会产生预期的效果，因为您会将没有 Activity 的 Application 设置为**currentActivity**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:39:18.273

```
onCreate(Bundle saveInstance){
   super.onCreate();
   Chat chat = new Chat();
   chat.someUniqueFuction();
} 
```

# iphone - 在 UIScrollView 内缩放 UIImageView 并保持旋转

> ID：11886783
> 
> 赞同：3
> 
> 时间：2012-08-09T15:30:07.487
> 
> 标签：iphone, objective-c, ios, uiscrollview, uigesturerecognizer

我在缩放放置在 uiscrollview 内的 uiimageview 时遇到问题。我也在 StackOverflow 中搜索并检查了与我的问题相关的所有问题。我也尝试了 StackOverflow 中发布的所有答案。没有什么对我有用。

首先，我将 uiimageview 放在 nib 文件中的 uiscrollview 中，然后从相机胶卷中获取图像并填充图像视图。然后我使用 uirotationgesturerecognizer 来旋转图像。

这是我想要做的代码。

```
- (void)viewDidLoad
{
 [super viewDidLoad];
 NSLog(@"%@",[[UIDevice currentDevice] model]);

// Do any additional setup after loading the view, typically from a nib.
 self.imagePicker = [[[UIImagePickerController alloc] init] autorelease];

 self.picChosenImageView.layer.shouldRasterize = YES;
 self.picChosenImageView.layer.rasterizationScale = [UIScreen mainScreen].scale;

 self.picChosenImageView.layer.contents = (id)[UIImage imageNamed:@"test"].CGImage;
 self.picChosenImageView.layer.shadowColor = [UIColor blackColor].CGColor;
 self.picChosenImageView.layer.shadowOpacity = 0.8f;
 self.picChosenImageView.layer.shadowRadius = 8;
 self.picChosenImageView.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.picChosenImageView.bounds].CGPath;

 UIRotationGestureRecognizer *rotationRecognizer = [[[UIRotationGestureRecognizer alloc]initWithTarget:self
                                                                                               action:@selector(handleRotate:)] autorelease];
 rotationRecognizer.delegate = self;
 [self.picChosenImageView addGestureRecognizer:rotationRecognizer];

 self.containerView.delegate = self;
 self.containerView.contentSize = self.picChosenImageView.layer.frame.size;
 self.containerView.maximumZoomScale = 4.0f;
 self.containerView.minimumZoomScale = 1.0f;
 angle = 0.0f;
 useRotation = 0.0;
 isRotationStarted=FALSE;
 isZoomingStarted = FALSE; 
}

-(void)lockZoom
{
 maximumZoomScale = self.containerView.maximumZoomScale;
 minimumZoomScale = self.containerView.minimumZoomScale;

 self.containerView.maximumZoomScale = 1.0;
 self.containerView.minimumZoomScale = 1.0;
 self.containerView.clipsToBounds = false;
 self.containerView.scrollEnabled = false;
}

-(void)unlockZoom
{
    self.containerView.maximumZoomScale = maximumZoomScale;
    self.containerView.minimumZoomScale = minimumZoomScale;
    self.containerView.clipsToBounds = true;
    self.containerView.scrollEnabled = true;
}

#pragma mark - ScrollView delegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return  self.picChosenImageView;
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{

    CGRect frame = self.picChosenImageView.frame;
    frame.origin = CGPointZero;
    self.picChosenImageView.frame = frame;
    //self.picChosenImageView.transform = prevTransform;

}

-(void) scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    if(!isZoomingStarted)
    {
        self.picChosenImageView.transform = CGAffineTransformRotate(self.picChosenImageView.transform, angle);
        NSLog(@"The zooming started");
        isZoomingStarted = TRUE;
        CGSize contentSize = self.containerView.bounds.size;
        CGRect contentFrame = self.containerView.bounds;
        NSLog(@"frame on start: %@", NSStringFromCGRect(contentFrame));
        NSLog(@"size on start: %@", NSStringFromCGSize(contentSize));
        //prevTransform = self.picChosenImageView.transform;
    }
}

-(void) scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
    if(isZoomingStarted)
    {
        self.picChosenImageView.transform = CGAffineTransformRotate(self.picChosenImageView.transform, angle);
        isZoomingStarted = FALSE;
        CGSize contentSize = self.containerView.contentSize;
        CGRect contentFrame = self.containerView.bounds;
        NSLog(@"frame on end: %@", NSStringFromCGRect(contentFrame));
        NSLog(@"size on end: %@", NSStringFromCGSize(contentSize));
    }
}

#pragma mark - GestureRecognizer methods

- (void) handleRotate:(UIRotationGestureRecognizer *)recognizer
{
    if(isZoomingStarted == FALSE)
    {
        if([recognizer state] == UIGestureRecognizerStateBegan)
        {
            angle = 0.0f;
            [self lockZoom];
        }

        useRotation+= recognizer.rotation;

        while( useRotation < -M_PI )
        {
            useRotation += M_PI*2;
        }
        while( useRotation > M_PI )
        {
            useRotation -= M_PI*2;
        }
        NSLog(@"The rotated value is %f",RADIANS_TO_DEGREES(useRotation));
        self.picChosenImageView.transform = CGAffineTransformRotate([self.picChosenImageView transform],
                                                                    recognizer.rotation);
        [recognizer setRotation:0];

        if([recognizer state] == UIGestureRecognizerStateEnded)
        {
            angle = useRotation;
            useRotation = 0.0f;
            isRotationStarted = FALSE;
            self.containerView.hidden = NO;
            //prevTransform = self.picChosenImageView.transform;
            [self unlockZoom];
        }
    }
} 
```

我的问题是，我能够成功地进行放大和缩小。我可以随心所欲地旋转 uiimageview。将 uiimageview 旋转到某个角度后，当我尝试放大时，imageview 会回到原始位置（将自身旋转回零度），然后进行缩放。我想保留旋转并缩放。我尝试保存以前的转换并在后面的 scrollDidzoom 和 scrollDidBegin 委托方法中分配。没有工作。请帮助我发现我忽略的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:06:01.110

尝试使用`CGAffineTransformScale`而不是仅调整框架的大小以进行缩放：

```
anImage.transform = CGAffineTransformScale(anImage.transform, 2.0, 2.0); 
```

更改缩放转换可能会解决您的旋转问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T14:32:06.137

我有同样的问题。UIScrollView 正在控制 UIImageView 并且它使用没有旋转的变换。

所以我没有为滚动提供图像参考，并且我添加了 UIPinchGestureRecognizer 用于缩放。

```
func viewForZoomingInScrollView(scrollView: UIScrollView) -> UIView? {
  return nil
} 
```

拖动仍在工作:)

```
// viewDidLoad
var pinchGestureRecognizer = UIPinchGestureRecognizer(target: self, action: #selector(pinchRecogniezed))
scrollView.addGestureRecognizer(pinchGestureRecognizer)

func pinchRecogniezed(sender: UIPinchGestureRecognizer) {
    if sender.state == .Began || sender.state == .Changed {
        let scale = sender.scale
        imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale)
        sender.scale = 1
    }
} 
```

# jquery - 使用 jQuery 将多个变量附加到查询字符串

> ID：11886785
> 
> 赞同：1
> 
> 时间：2012-08-09T15:30:10.780
> 
> 标签：jquery

我目前正在使用选择下拉列表和 jQuery 将变量传递给查询字符串：

```
$("#filter_1").change(function(e) {
  window.location.href = '?filter_1=' + $(this).val()
});
$("#filter_2").change(function(e) {
  window.location.href = '?filter_2=' + $(this).val()
}); 
```

这很好用。但是，如果您`filter_2`在已经传递`filter_1`变量之后选择，则会`filter_1`在查询字符串中被覆盖。我现在需要的是一种附加的方法，`filter_1`反之亦然`filter_2`。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:39:15.823

在这里，您创建一个函数，它为您解析查询字符串，`key=value`如果请求的键存在则返回，如果不存在则返回空字符串。

```
$("#filter_1").change(function(e) {
   window.location.href = '?filter_1=' + $(this).val() + 
      querystring('filter_2', '&');
});
$("#filter_2").change(function(e) {
   window.location.href = '?filter_2=' + $(this).val() + 
      querystring('filter_1', '&');
});

function querystring(name, prefix)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return '';
  else
    return (prefix||'')+name+'='+ decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

函数源自：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

# c# - 使用 Tag 属性来定位对象 c#

> ID：11886788
> 
> 赞同：3
> 
> 时间：2012-08-09T15:30:18.533
> 
> 标签：c#, wpf, events, tags

我正在尝试创建一个 on 事件操作，它可以用于许多对象。为此，我将目标对象的名称存储在 Tag 属性中。因此，在事件被触发时：

```
private void ShowDeleteButton(object sender, System.Windows.Input.MouseEventArgs e)
{
    Duration TimeToTake = new Duration(new TimeSpan(0,0,0,0,300));
    DoubleAnimation ShowButton = new DoubleAnimation(0, 104, TimeToTake);
    DoubleAnimation HideButton = new DoubleAnimation(104, 0, TimeToTake);
    (sender as Rectangle).Tag.BeginAnimation(Button.WidthProperty, ShowButton);
} 
```

显然使用 (sender as button).Tag 作为对象的名称是行不通的。那么如何将标签属性转换为目标对象的引用呢？

*注意这是 WPF*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:35:39.333

对于 WPF，使用[FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)：

```
var oControl = this.FindName((string)(sender as Button).Tag);
if (oControl != null)
{
    (Rectangle)oControl.BeginAnimation...
} 
```

对于 WinForms，您可以通过存储在标记中的名称找到控件：

```
var aoControls = this.Controls.Find((string)(sender as Button).Tag, true);
if ((aoControls != null) && (aoControls.Length != 0))
{
    (Rectangle)aoControls[0].BeginAnimation...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:52:07.330

你指的是`UIElement.BeginAnimation`那个发件人可以是任何人`UIElement`吗？如果是这样，那么您可以简单地执行以下操作：

```
((UiElement)sender).BeginAnimation(Button.WidthProperty, ShowButton); 
```

# c++ - 布尔表达式的精神解析器

> ID：11886790
> 
> 赞同：3
> 
> 时间：2012-08-09T15:30:20.293
> 
> 标签：c++, boost

我是第一次使用精神。我正在尝试编写一个布尔表达式（只有 &、| 和 ! 运算符）解析器。我已经定义了我的语法，如下所示：

```
template <typename Iterator>
struct boolean_expression_parser : qi::grammar<Iterator, std::string(), ascii::space_type>
{
    boolean_expression_parser() : boolean_expression_parser::base_type(expr)
    {
        using namespace qi;
        using ascii::char_;
        using boost::spirit::ascii::alnum;
        using namespace qi::labels;

        using phoenix::construct;
        using phoenix::val;

        operand %= lexeme[+(alnum)];

        simple_expr %= ('(' > expr > ')') | operand;

        unary_expr  %= ('!' > simple_expr ) ;

        and_expr %= ( expr > '*' > expr);

        or_expr  %= (expr > '|' > expr);

        expr %= simple_expr | unary_expr | *and_expr | *or_expr;

        // on_error<fail>
        //         (
        //             unary_expr,
        //             std::cout
        //             << val("Error! Expecting ")
        //             << _4                               // what failed?
        //             << val(" here: \"")
        //             << construct<std::string>(_3, _2)   // iterators to error-pos, end
        //             << val("\"")
        //             << std::endl
        //          );
    }

    qi::rule<Iterator, std::string(), ascii::space_type> operand;
    qi::rule<Iterator, std::string(), ascii::space_type> simple_expr;
    qi::rule<Iterator, std::string(), ascii::space_type> unary_expr;
    qi::rule<Iterator, std::string(), ascii::space_type> and_expr;
    qi::rule<Iterator, std::string(), ascii::space_type> or_expr;
    qi::rule<Iterator, std::string(), ascii::space_type> expr;
}; 
```

我在这里面临一些障碍：

1.  它不适用于任何二进制表达式（如'A + B'）。它适用于一元表达式（如“！（A）”或“（！A）”。

有人可以指出我做错了什么吗？

1.  我想以树的形式存储它（因为我想用它构建一个 BDD）。有人可以指出我该怎么做吗？

2.  另外，为什么 on_error<> 即使我启用它也不起作用？

我正在使用 boost 1.49 和 gcc-4.2.2。

问候，〜搜门

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:21:06.907

你的解析器有很多问题。首先，您在这里遇到了左侧递归，因此解析器将与*Stack Overflow*一起崩溃。你的语法应该是这样的：

```
expr = or_expr;
or_expr = and_expr >> -('|' > expr);
and_expr = unary_expr >> -('*' > expr);
unary_expr = ('!' > expr) | operand | ('(' >> expr > ')'); 
```

在这种情况下，您没有左递归并且所有内容都会解析。

为什么你的方法失败了？在你的情况下：

```
input: A * B
1: expr
  1.1: check simple_expr 
       -> fail at '(', try next
       -> operand matches, return from simple_expr
  matched, return. 
```

所以它应该只解析`A`，并且不会失败返回，但输入没有完全解析。

另外，`>`您过度使用的运算符。它的目的是如果在它之后没有匹配项，则解析失败。另一方面，运算符`>>`返回并让解析器检查其他可能性。

# search - vim 向前和向后搜索重新选择搜索到的文本

> ID：11886791
> 
> 赞同：0
> 
> 时间：2012-08-09T15:30:23.877
> 
> 标签：search, vim, select, mapping, find

当我选择文本并按下时，我目前正在使用它来像 Geany（我的旧编辑器）中一样工作`F3`：

```
vnoremap <silent> * :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy/<C-R><C-R>=substitute(
  \escape(@", '/\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR>
vnoremap <silent> # :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy?<C-R><C-R>=substitute(
  \escape(@", '?\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR> 
```

当然，这是`*`用于向前搜索选定文本和`#`向后搜索选定文本。

我无法弄清楚的是，一旦找到它，如何让这两个重新选择找到的单词（或任何选择的单词），这样我就可以继续按下`*`或`#`继续搜索。因此，如果这不是我想要的并且想要继续搜索，我不必重新选择它找到的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:23:41.237

您添加的解决方案`v//e<CR>`有效，但它具有使搜索结束的副作用，这会影响`n`/等其他命令`N`。`1v`一个更好的选择是通过（或`1vl`when `'selection'`is `exclusive`）在当前位置重新建立先前的选择。

```
vnoremap <silent> * :<C-U>
\let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
\gvy/<C-R><C-R>=substitute(
\escape(@", '/\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
\gV:call setreg('"', old_reg, old_regtype)<CR>1v
vnoremap <silent> / :<C-U>
\let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
\gvy?<C-R><C-R>=substitute(
\escape(@", '?\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
\gV:call setreg('"', old_reg, old_regtype)<CR>1v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:15:46.167

知道了！！！在另一个与我的相关的 Stackoverflow 问题上找到它，但很难找到。正确的用法是将其添加到每个查询的末尾：

```
<Esc>v//e<CR> 
```

这使我回到正常模式，然后是视觉模式，然后重复最后一次搜索，然后选择结束。所以最终的代码是：

```
vnoremap <silent> * :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy/<C-R><C-R>=substitute(
  \escape(@", '/\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR><Esc>v//e<CR>
vnoremap <silent> / :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy?<C-R><C-R>=substitute(
  \escape(@", '?\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR><Esc>v//e<CR> 
```

这为快速搜索选定区域提供了快速简便的方法！

# iphone - 根据数据显示数据 UIPickerView

> ID：11886794
> 
> 赞同：2
> 
> 时间：2012-08-09T15:30:28.443
> 
> 标签：iphone, objective-c, xcode, ios5, core-data

我正在为 iPhone 开发一个应用程序（我的第一个应用程序），我想使用两个 UIPickerView 来显示一些数据。第一个 UIPickerView 将显示汽车品牌列表（例如 BMW、Mercedes、Ford 等），第二个 UIPickerView 将显示模型，这取决于您在第一个 UIPickerView 中选择的 UIPickerViewItem。

我遇到的问题是没有设置 UIPickerView，这已经完成了。

我想知道如何从某种数据存储中填充两个 PickerViews（可能是 sqlite、core-data ......？虽然不确定两者是如何工作的）而且，第二个 PickerView 应该只在第一个选择后才填充一个项目，所以它只显示该品牌的模型。

我希望你能理解，因为我真的不知道如何做到这一点（我通常只做网络开发，使用 PHP 和 MySQL 非常容易......）；）

提前致谢！麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:02:43.227

核心数据是要走的路，但学习曲线陡峭。你应该花一些时间来学习它。

对于您的目的来说，使用 plist 会更容易而且可能就足够了。这些是 Apple 特定的 xml 文件，结构非常简单。您可以直接在 Xcode 中编辑它们，并且格式非常透明。

然后，您可以一次从 plist 加载所有数据，并根据第一个选择器填充第二个选择器。

或者，您可以使用 JSON 文件。这些甚至更简单，作为 Web 程序员，您可能对这些很熟悉。

一些提示：

您的数据应具有以下结构：字典数组；每个字典都有一个品牌键和一个用于另一个数组的键，一个模型列表。这个子数组是一个带有名称键的字典（如果您的应用程序中需要它，可能还有更多）。

您可以像这样加载名为“Data.plist”的 plist 文件（JSON 是模拟的）：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
NSArray *data = [NSArray arrayWithContentsOfFile:path]; 
```

现在您可以获得这样的品牌列表（假设您的品牌名称键是“名称”）：

```
NSArray *brands = [data valueForKeyPath:@"name"]; 
```

还有一个品牌的清单：

```
NSArray *models = [[[data filteredArrayUsingPredicate:[NSPredicate
   predicateWithFormat:@"name = %@", @"Ford"]] objectAtIndex:0] 
    valueForKey:@"models"]); 
```

要对第一个选择器视图的选择做出反应，请确保您的视图控制器是选择器视图的委托并覆盖`pickerView:didSelectRow:inComponent:`。

`tags`您可以通过在回调方法中分配和检查它们来区分这些委托方法中的选择器。

这是您的 plist 结构的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>name</key>
        <string>Ford</string>
        <key>models</key>
        <array>
            <string>Mustang</string>
            <string>Capri</string>
        </array>
    </dict>
    <dict>
        <key>name</key>
        <string>VW</string>
        <key>models</key>
        <array>
            <string>Polo</string>
            <string>Golf</string>
        </array>
    </dict>
</array>
</plist> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:57:07.763

这取决于您需要的数据源类型。如果您的数据源是静态的，并且永远不会改变，那么您所需要的可能只是一个简单的 NSArray，您可以在每次启动应用程序时创建。从您的要求看来，这绝对是您想要做的，因为它是更简单的方法。

每当您创建 UIPickerController 或如果它是 IBOUTLET 时，请对 ivar/property 执行此操作：

```
myPicker1.tag = 1;
myPicker2.tag = 2; 
```

分配一个标签来区分它们，因为它们都将在您的委托/数据源（在本例中为您的 ViewController）上调用相同的回调方法

然后，由于您想根据在 Picker 1 上选择的值对 Picker 2 采取行动，因此您需要以下内容：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    if (pickerView.tag == 1) {
         //Means a value just changed on your picker 1!, update datasource for your second picker
        [myPicker2 reloadComponent:0]; // This will trigger the method - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component method below
    }

} 
```

Finally implement the `- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component`method below method, which gets called when the picker needs to load its components, or in this case also if you call`reloadComponent`

你将需要这样的东西：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
     if (pickerView.tag == 2) {
      //Get appropriate value from the array and return the string for that row
            MyObject *selectedObject = [myArray objectAtIndex:[pickerActivity selectedRowInComponent:0]];
            //Return what you need depending on your needs.
       }
} 
```

最后我建议看看[UIPickerView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)

希望有帮助。

# dart - 我可以动态应用 Dart 的字符串插值吗？

> ID：11886796
> 
> 赞同：11
> 
> 时间：2012-08-09T15:30:40.393
> 
> 标签：dart, dynamic, string-interpolation

（来自 Tristan McNab 的 Dart 讨论邮件列表）

我正在尝试构建一个服务器端 MVC 框架并基于模板等生成视图，我想知道是否可以动态应用 Dart 的字符串插值。例如，这将是我的视图模板：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>${ViewData["Title"]}</title>
    <link href="/Content/css/site.css" rel="stylesheet" />
  </head>
  <body>
    <h1>${ViewData["Title"]}</h1>
    <div id="container">
      <p>Hello world!</p>
    </div>
  </body>
</html> 
```

我想使用以下方法应用 ViewData 变量：

```
static String applyViewData(String html, Map ViewData) {
    // apply interpolation here
} 
```

目前这有可能吗？我对 API 的搜索表明它不是。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:32:30.300

（比尔·黑塞发布）

通过将字符串文字包装在将上下文作为参数的函数中，您可以拥有一个可以传递的 Function : context -> String 而不是 String。如果您需要对这些对象使用一些字符串操作，如 concat，您可以在封装此类型的类上实现这些操作（“提升”它们）。这似乎是一种在一个地方提供字符串文字并在另一个地方提供您想要插值的数据的简单方法。

字符串插值总是动态发生的，每次使用文字时，数据很容易来自函数的参数而不是词法上下文。

例如：

```
Function MyTemplate() {
   return (Context context) {
     return "<table><tr><td class=${context.leftColumnClass}>Red Sox</td><td>${context.data}</td></tr></table>";
   }
} 
```

...

```
var templateHere = MyTemplate(); 
```

...

```
var output = templateHere(context); 
```

您也可以跳过一个间接级别并创建

```
String FillMyTemplate(Context context) => '''
    <html><head><title>$context.title</title></head>
'''; 
```

并在需要模板的地方使用 FillMyTemplate。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T15:30:40.393

（由山姆·麦考尔发布）

有一个技巧涉及`noSuchMethod()`：

```
class Template {
  var _context;

  noSuchMethod(method, args) {
    if (!method.startsWith("get:")) return super.noSuchMethod(method, args);
    return _context[method.substring(4)];
  }

  abstract String template();

  String evaluate(context) {
    _context = context;
    try {
      return template();
    } finally { _context = null; }
  }
} 
```

然后创建一个子类：

```
class MyTemplate extends Template { template() => """
  <title>$title</title>
  <h1>$title</h1>
""";} 
```

最后，使用它！

```
final renderedText = new MyTemplate().evaluate({"title": "Hello, world"}) 
```

# java - 60亿在java中不能识别为整数？

> ID：11886797
> 
> 赞同：1
> 
> 时间：2012-08-09T15:30:40.910
> 
> 标签：java

当我尝试存储变量`6000000000`时遇到问题。`int`

这是我遇到问题的脚本的一部分：

```
Scanner x = new Scanner(System.in);
System.out.println("Please enter a number here:");
int k = x.nextInt();
System.out.println(k); 
```

当我输入`6000000000`时输出应该是一样的，但是输出是这个错误：

```
Exception in thread "main" java.util.InputMismatchException: For input string: "6000000000"
    at java.util.Scanner.nextInt(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source) 
```

这是什么？如何防止这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:31:36.187

值太大，java`int`只能保存–2,147,483,648到2,147,483,647之间的值。

改用 a `long`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:32:04.347

使用`long`and [`nextLong`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLong)，您的数字大于[`Integer.MAX_INT`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE): `2^31 - 1`。

另请注意，如果您首先使用[`hasNextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:34:02.860

[在这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)您可以看到 的最大值`int`为`2,147,483,647 = 2^31 - 1`。请尝试`long`：

```
long k = x.nextLong();
System.out.println(k); 
```

`long`将带您到`9,223,372,036,854,775,807 = 2^63 - 1`. 一旦你需要超过它的值，你可以查看[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)( ) 或只使用像( )`Scanner#nextBigInteger()`这样的浮点数。`double``Scanner#nextDouble()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:39:01.540

或者如果您使用的是非常大的数字（大于 long），则使用 nextBigInteger

# jquery - 插入图像后的ckeditor查看源

> ID：11886808
> 
> 赞同：0
> 
> 时间：2012-08-09T15:31:18.650
> 
> 标签：jquery, image, ckeditor, wysiwyg

从 TinyMCE 切换到 CKEditor 后，我们注意到，当使用文件管理器将图像插入到所见即所得的内容中时，似乎无法配置/覆盖源按钮的工作方式。

有没有人找到解决方法？我知道这可能不安全，但我试图避免必须重写图像插件才能使其正常工作。

这是我们正在使用的当前设置。

```
 //setup ckeditor basics
    var config = {
        skin:'kama',
        width:'725px',
        height: '400px',
        uiColor: '#F3F3F3'
    };
    //spellchecking
    config.extraPlugins = 'atd-ckeditor';
    config.atd_rpc = '/includes/javascript/plugins/ckeditor/plugins/atd-ckeditor/proxy.cfm?url='; 
  config.atd_api_key = '<cfoutput>#AtdApikey#</cfoutput>';
  config.filebrowserBrowseUrl = '/includes/javascript/plugins/filemanager/index.cfm?cktype=events';
    config.toolbar_Full =[
        { name: 'document', items : [ 
                'Maximize','Source','-',
                'Preview','Print','-',
                'Cut','Copy','Paste','PasteText','PasteFromWord','-',
                'Undo','Redo','Find','Replace','-',
                'SelectAll','-',
                'atd-ckeditor'] 
        },  
        '/',
        { name: 'editing', items : [ 
                'NumberedList','BulletedList','-',
                'Outdent','Indent','-',
                'Blockquote','-',
                'JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-'
                ,'BidiLtr','BidiRtl','-',
                'Link','Unlink','Anchor','Image','Table','HorizontalRule','SpecialChar' ] 
        },  
        '/',
        { name: 'styles', items : [
                'Format','FontSize','Bold','Italic','Underline','Strike','Subscript','Superscript','-',
                'TextColor','BGColor','-',
                'RemoveFormat' ]
        },
    ];
    //set drop downs
    config.format_tags = 'h1;h2;h3;h4;h5;h6'
    config.fontSize_sizes = '10/10px;12/12px;14/14px;16/16px;18/18px;20/20px;24/24px';
    config.disableNativeSpellChecker = true;
    config.browserContextMenuOnCtrl = false;
    config.toolbarCanCollapse = false;
    config.forcePasteAsPlainText = true;
    config.pasteFromWordPromptCleanup = true;
    config.pasteFromWordNumberedHeadingToList = true;
    config.removePlugins = 'elementspath';
    $("#Detail").ckeditor(config); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:28:02.467

看起来我在内存中缓存了一个坏文件，清除缓存后它起作用了

# unix - SIGSTOP 和 SIGTSTP 有什么区别？

> ID：11886812
> 
> 赞同：128
> 
> 时间：2012-08-09T15:31:31.407
> 
> 标签：unix, signals, signal-handling

只是想知道 SIGSTOP 和 SIGTSTP 信号之间的区别。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-08-09T16:41:52.673

这两个信号都旨在暂停一个最终将恢复的进程`SIGCONT`。它们之间的主要区别是：

*   `SIGSTOP`是以编程方式发送的信号（例如*：）*`kill -STOP pid`，而`SIGTSTP`（对于***信号****-**终端****停止***）也可以`tty`由用户在键盘上键入通过驱动程序发送，通常是`Control`- `Z`。

*   `SIGSTOP`不容忽视。`SIGTSTP`可能。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-04-22T02:10:12.717

/usr/include/x86_64-linux-gnu/bits/signum.h

```
#define SIGSTOP     19  /* Stop, unblockable (POSIX).  */
#define SIGTSTP     20  /* Keyboard stop (POSIX).  */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-30T05:56:46.383

目标进程不能忽略 SIGSTOP。

一个很好的例子就是视频播放器`mpv`，它可以忽略`SIGTSTP`但不能`SIGSTOP`。

您可以使用正在运行的视频进行测试：

`kill -SIGTSTP $(pidof mpv)` 和 `kill -SIGSTOP $(pidof mpv)`

当然`kill -SIGCONT $(pidof mpv)`要恢复播放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-08T06:48:09.033

在 ubuntu 上， `/usr/include/x86_64-linux-gnu/bits/signum-generic.h`

```
#ifdef __USE_XOPEN
# define SIG_HOLD ((__sighandler_t) 2)  /* Add signal to hold mask.  */
#endif

/* We define here all the signal names listed in POSIX (1003.1-2008);
   as of 1003.1-2013, no additional signals have been added by POSIX.
   We also define here signal names that historically exist in every
   real-world POSIX variant (e.g. SIGWINCH).

   Signals in the 1-15 range are defined with their historical numbers.
   For other signals, we use the BSD numbers.
   There are two unallocated signal numbers in the 1-31 range: 7 and 29.
   Signal number 0 is reserved for use as kill(pid, 0), to test whether
   a process exists without sending it a signal.  */

/* ISO C99 signals.  */
#define SIGINT      2   /* Interactive attention signal.  */
#define SIGILL      4   /* Illegal instruction.  */
#define SIGABRT     6   /* Abnormal termination.  */
#define SIGFPE      8   /* Erroneous arithmetic operation.  */
#define SIGSEGV     11  /* Invalid access to storage.  */
#define SIGTERM     15  /* Termination request.  */

/* Historical signals specified by POSIX. */
#define SIGHUP      1   /* Hangup.  */
#define SIGQUIT     3   /* Quit.  */
#define SIGTRAP     5   /* Trace/breakpoint trap.  */
#define SIGKILL     9   /* Killed.  */
#define SIGBUS      10  /* Bus error.  */
#define SIGSYS      12  /* Bad system call.  */
#define SIGPIPE     13  /* Broken pipe.  */
#define SIGALRM     14  /* Alarm clock.  */

/* New(er) POSIX signals (1003.1-2008, 1003.1-2013).  */
#define SIGURG      16  /* Urgent data is available at a socket.  */
#define SIGSTOP     17  /* Stop, unblockable.  */
#define SIGTSTP     18  /* Keyboard stop.  */
#define SIGCONT     19  /* Continue.  */
#define SIGCHLD     20  /* Child terminated or stopped.  */
#define SIGTTIN     21  /* Background read from control terminal.  */
#define SIGTTOU     22  /* Background write to control terminal.  */
#define SIGPOLL     23  /* Pollable event occurred (System V).  */
#define SIGXCPU     24  /* CPU time limit exceeded.  */
#define SIGXFSZ     25  /* File size limit exceeded.  */
#define SIGVTALRM   26  /* Virtual timer expired.  */
#define SIGPROF     27  /* Profiling timer expired.  */
#define SIGUSR1     30  /* User-defined signal 1\.  */
#define SIGUSR2     31  /* User-defined signal 2\.  */ 
```

# facebook - Grails spring-security-facebook 插件的 accessToken

> ID：11886814
> 
> 赞同：1
> 
> 时间：2012-08-09T15:31:38.527
> 
> 标签：facebook, facebook-graph-api, grails, spring-security

我正在使用 spring-security-facebook 插件进行身份验证。它运作良好，现在我正在尝试使用 spring-social-facebook 的一些需要授权的功能。从我的控制器中，我在哪里可以获得有效的 accessToken（以创建 FacebookTemplate 对象）？

这就是我使用插件的方式：

1）我添加了一个域类 OAuthUser（不是在插件中，而是在我的项目中） 2）我生成了一个 FacebookAuthDaoImpl 3）我编辑了生成的方法，例如在 create() 中，我创建

了一个用户实例（主域类 SecUser）并设置配置文件信息

+ 一个新的 OAuthUser（我在其中设置 uid、accessToken，并将其与创建的主用户相关联。

**更新 1：** 我在我的 FacebookAuthDaoImpl 类中添加了这 3 个方法：

```
Boolean hasValidToken(OAuthUser user){
    def now= new Date()

    if(now.after(user.accessTokenExpires)){
        return false
    } else {
       return true  
    }
}

void updateToken(OAuthUser user, FacebookAuthToken token){

    user.accessToken = token.accessToken
    user.save()
}

String getAccessToken(OAuthUser user){
    return user.accessToken
} 
```

但我仍然有过期的 AccessToken。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:46:42.167

如果您使用**默认 DAO**：

它存储在`accessToken`Facebook 用户的域对象字段中。

如果您没有字段 named `accessToken`，您应该添加它 ( `String accessToken`)。理想情况下带有一个附加字段：`Date accessTokenExpires`. 这两个字段都将由插件自动填充。

如果你已经创建了**自己的 DAO**实现，那么：

*   `create(FacebookAuthToken token)`将访问令牌作为`token.accessToken.accessToken`. 您可以将其存储在任何您想要的地方
*   `Boolean hasValidToken(F user)`,`void updateToken(F user, FacebookAuthToken token)`和`getAccessToken(F user)`- 首先应该检查令牌过期，第二次更新新值（在令牌过期时调用），最后应该返回当前值。

正如您所说，您拥有自己的 DAO 实现。你是如何实现最后三种方法的？

# python - 从python中的一行中拉出一个特定的子字符串

> ID：11886815
> 
> 赞同：3
> 
> 时间：2012-08-09T15:31:39.243
> 
> 标签：python, string, python-2.7, substring, list-comprehension

我有一个包含许多行的文件，格式如下：

`DIV ID=0X78800009 EXT="LOS ANGELES" TY=STANDARD OWN=0X74400002 ABBR=LA`

我需要提取 EXT 值，但只提取引号中的部分。我目前正在使用这个：

```
for line in file:
    if sub in line:
        extlist.append([item[4:] for item in line.split() if item.startswith('EXT=')].pop()) 
```

但它只将 LOS ANGELES 的“LOS”部分附加到 idlist。我对python有点陌生，但是有没有办法包装`item[4:]`和`str(item[4:])`使用[字符串函数](http://docs.python.org/library/string.html)来提取我需要的值？

请注意，EXT 字段中的文本长度不同，它们都是随机的城市名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:37:27.413

[常用表达](http://docs.python.org/library/re)

```
>>> import re
>>> myString = 'DIV ID=0X78800009 EXT="LOS ANGELES" TY=STANDARD OWN=0X74400002 ABBR=LA'
>>> re.search('EXT="(.+?)"',myString).group(1)
'LOS ANGELES' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:34:36.200

如果您**可以确定**您的行中没有其他双引号，那么这个简单的方法将起作用：

```
s='DIV ID=0X78800009 EXT="LOS ANGELES" TY=STANDARD OWN=0X74400002 ABBR=LA'

s.split('"')[1]
'LOS ANGELES' 
```

请注意，如果上述约束不成立，则使用*[正则表达式是一种更灵活/更可靠的查找方法。](http://docs.python.org/library/re)*

*否则，这是本着“简单胜于复杂”*的精神解决此问题的一种方法。（Python之禅）。

# java - 用java制作截屏软件

> ID：11886817
> 
> 赞同：1
> 
> 时间：2012-08-09T15:31:52.037
> 
> 标签：java, awtrobot

这就是我的计划：
将有一个带有开始和停止按钮的小型 JFrame，用于开始和停止录制。单击开始将启动一个线程，该线程将创建一个`java.awt.Robot`将重复屏幕截图的线程。
这是我的问题开始的地方。机器人确实会截屏，但是
1\. 不会记录光标的位置
2\. 我不知道图像将存储在哪里。我打算将它们存储在一个文件夹中，该文件夹的名称将使用`java.util.Date`.
3\. 我一点也不理解 BufferedImage 类。

我已经完成了 JFrame 并实现了线程。我有从互联网上获得的将图像转换为 avi 电影的软件包。
请帮我解决上面提到的三个问题。

**编辑：**

```
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import java.io.File;

public void captureScreen(String fileName) throws Exception {

   Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
   Rectangle screenRectangle = new Rectangle(screenSize);
   Robot robot = new Robot();
   BufferedImage image = robot.createScreenCapture(screenRectangle);
   ImageIO.write(image, "png", new File(fileName));

} 
```

如果你能解释一下上面提到的关于我的问题的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:38:59.990

在截图中获取光标的解决方法是：找出光标的位置。

```
java.awt.MouseInfo.getPointerInfo().getLocation() 
```

并将光标的渲染图像放在屏幕截图的顶部。看看这个：[http ://docs.oracle.com/javase/tutorial/2d/images/index.html](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

# google-apps-script - sheet.getrange 的语法

> ID：11886818
> 
> 赞同：1
> 
> 时间：2012-08-09T15:31:55.403
> 
> 标签：google-apps-script, google-sheets

我是从 Microsoft 和 VBA 到 Google 的新皈依者！

在我使用的电子表格中

```
var range = sheet.getRange(2,1,sheet.getMaxRows()-1,sheet.getMaxColumns()); 
```

处理所有列并对多列进行排序。

我需要做的是忽略第一列中的数据并对其余部分进行排序。

一个解释的解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:44:01.670

如果您使用`range.getValues()`，您将获得一个二维 javascript 数组，您可以按照您想要的方式对其进行排序，然后您可以使用

`sheet.getRange(2,1, array.length,array[0].length).setValues(array);`

# java - char buf[] = "test" 是否等同于 String buf = new String("test")？

> ID：11886819
> 
> 赞同：0
> 
> 时间：2012-08-09T15:32:01.817
> 
> 标签：java, c

是

```
char buf[] = "test"; 
```

在 C 中相当于

```
String buf = new String("test"); 
```

在 Java 中？

并且是

```
char *buf;
buf = "test"; 
```

相当于

```
String buf = "test"; 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:34:42.173

很难说它们是*等价*的，尽管我明白你在说什么。

您的 C 版本是一个 8 位字符序列。Java 变体支持 Unicode。

其次，在 Java 中，您正在创建一个具有行为的对象，而不仅仅是一个字符序列。

最后，Java 变体是*不可变*的。您可以更改引用，但不能更改底层字符集（这是被`String`对象包装的功能）

对于基本等效的东西，您可以在 Java 中使用字节数组。但是请注意，这不会以空值结尾。Java 数组知道它们的长度，而不是使用空终止的约定。或者，更接近的 C++ 等价物可能是`std::string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:34:14.473

前两个不等价。在Java 中，String 对象除了存储一个char 数组外，还包含其他内容（例如长度字段）。java版本当然更OO。

第二个与上述相同的观察等效。它们都是指向字符容器的指针。c 容器是一个简单的字符数组，而字符串是一个成熟的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:37:33.007

这个问题无法真正回答——你正在将苹果与橙子进行比较。

在 C 中，“字符串”实际上只是一个`char`以空值结尾的数组（即`'\0'`末尾的一个字节，由编译器放置，并由`str__()`库函数预期。

在 Java 中，`String`是一个对象，它包含（可能除其他外）一个字符数组和一个整数计数。

它们是不同的东西，它们的用途也不同。您是否正在尝试完成某些特定的事情并且遇到了麻烦？如果是这样，问*那个*，我们会尽力回答。否则，这不是一个真正有效的问题，IMO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:35:36.497

不，这些是不同的数据类型。`char buf[]`是一个数组，`String buf`也是一个对象。它将是动态大小的`String buf`，并且有很多有用的方法。`char buf[]`是一个静态大小的内存块，包含 5 个 8 位字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:37:39.783

下面将创建一个字符数组

```
char buf[] = "test"; 
```

as`String buf = new String("test");`将导致创建 a `String Object`，但在内部它`char[]`本身使用 String 对象包装器在内部变得不可变。所以这是上述两种编程语言的表示差异。

# javascript - Javascript中的setAttribute和点表示法有什么区别？

> ID：11886820
> 
> 赞同：7
> 
> 时间：2012-08-09T15:32:03.267
> 
> 标签：javascript

> **可能重复：**
> [何时在 JavaScript 中使用 setAttribute 与 .attribute=？](https://stackoverflow.com/questions/3919291/when-to-use-setattribute-vs-attribute-in-javascript)

为什么有时会设置这样的属性：

```
x.type = "submit"; 
```

和其他时间是这样的：

```
x.setAttribute("type", "submit"); 
```

我一直认为采用哪种方式并不重要，但我在这样做时遇到了问题：

```
x.onClick = save; 
```

但是当我将它切换到这个时它可以工作：

```
x.setAttribute("onClick", "save()"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:36:51.267

`setAttribute`仅适用于 DOM 元素并将 HTML 元素上的属性名称小写。而且您不能使用点表示法为动态属性名称分配值。

还有这个：

> `setAttribute()`用于修改某些属性（尤其是 XUL 中的值）的工作方式不一致，因为该属性指定了默认值。要访问或修改当前值，您应该使用属性。例如，使用`elt.value`代替 `elt.setAttribute('value', val)`.

# vba - 如何使用 VBA Excel 2010 制作复选框和图形大小以填充特定范围？

> ID：11886822
> 
> 赞同：0
> 
> 时间：2012-08-09T15:32:05.370
> 
> 标签：vba, excel, excel-2010

几个问题！

**问题一**

我希望这个程序创建三个复选框。我想要一个说“天”的在 A2 中，一个说“小时”的在 A3 中，一个说“分钟”的在 A4 中。有没有办法让它调整大小以填充该单元格，还是我必须手动调整它的大小？

这是我到目前为止所拥有的：

```
Sub CheckBoxMacro()
ActiveSheet.CheckBoxes.Add(111.75, 28.5, 52.5, 17.25).Select
Selection.Characters.Text = "Hello World"
End Sub 
```

我试着把`Range("A2")`它放在有数字的地方，但这没有用。

**问题二**

如何从图表中删除系列？我正在使用 VBA 制作图表，并且它不断添加空白的第三系列。它出现在传说中，我不知道如何让它消失。

**问题三**

如何使图表填充特定范围？不久前我发现了如何使用 VBA 来做到这一点，但我终生无法找到如何再次做到这一点。我想要一个图表来填充一个特定的范围，比如 F1 到 K8。这样，如果左侧的其他列由于用户输入而发生变化，则图形仍保持在该范围内，从而使一切看起来都不错。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:01:26.553

1.  使复选框覆盖单元格

    ```
     Sub CheckBoxMacro  
          With ActiveSheet.Range("A2")  
            ActiveSheet.CheckBoxes.Add(.Left, .Top, .Width, .Height).Select  
            Selection.Characters.Text = "Hello World"  
          End With  
        End Sub
    ```

2.  如果系列为空白，则可能您没有正确识别源数据范围。否则，请尝试从活动图表中删除最后一个系列：

    ```
     ActiveChart.SeriesCollection(ActiveChart.SeriesCollection.Count).Delete
    ```

3.  这与 1 的答案类似。

    ```
     Dim ChartRange As Range
        Set ChartRange = ActiveSheet.Range("F1:K8")
        With ActiveChart.Parent
          .Left = ChartRange.Left
          .Top = ChartRange.Top
          .Width = ChartRange.Width
          .Height = ChartRange.Height
        End With
    ```

# android - 我们可以检测到哪个安卓应用程序正在使用麦克风吗？

> ID：11886824
> 
> 赞同：2
> 
> 时间：2012-08-09T15:32:08.740
> 
> 标签：android, android-ndk

大家好，我是android ndk的新手，想找到两件事：

1.  我们可以检测麦克风是否打开吗？
2.  我们可以检测到哪个应用程序正在使用麦克风吗？

如果有人知道如何通过 C 或通过 android sdk 进行上述操作，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:00:56.040

1.

```
AudioManager am =  Context.getSystemService(Context.AUDIO_SERVICE)
am.isMicrophoneMute() 
```

但我不知道如何使用 NDK（[而且似乎没人知道](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/-dF5-K5mLrs)）。

[音频管理器文档](http://developer.android.com/reference/android/media/AudioManager.html)

2.

不，你不能。这是一个安全决定。正如@AndiJay 所说，恶意程序可能会被使用。

# backbone.js - Backbone.Marionette：CompositeView 在collection.reset() 被触发后消失

> ID：11886836
> 
> 赞同：0
> 
> 时间：2012-08-09T15:33:00.553
> 
> 标签：backbone.js, marionette

我在 Backbone 的世界里还是个新手，我决定将 Marionette 用于我的第一个严肃项目。

遇到一些困难，我设法设置了我的应用程序的基本选项和路由，我对此非常满意，但现在我面临一个表示表格的 CompositeView 的阻塞问题。

此视图呈现在特定布局的区域内，称为“网格”。此布局有 3 个区域：top_controls、table_view 和 bottom_controls。由于我需要对布局的某些元素绑定一些操作，因此我决定将其用作视图，并在其中包含“主”集合，因此我可以在 CompositeView 中呈现集合的过滤版本，不接触主要的。

从我的路由器我这样称呼它：

```
App.grid = new Grid({collection: Clt});
App.page.show(App.grid); 
```

布局的结构是这样的（我使用的是requireJS）：

```
var Grid = Backbone.Marionette.Layout.extend({

        className: "container-fluid",

        template: gridLayout,

        regions: {
            top_controls: "#top_controls",
            table_view: "#table_view",
            bottom_controls: "#bottom_controls",
        },

            initialize: function(){

                this.renderTable(this.collection, true);                 
            },

            renderTable: function(collection, fetch){

                if(fetch){

                    collection.fetch({success:function(){

                        var vista = new CompView({collection: collection});                            
                        App.grid.table_view.show(vista);

                    }});

                } else {

                    var vista = new CompView({collection: collection});                      
                    App.grid.table_view.show(vista);                       
                }
            },

            events: {
                "keyup input":"filter_grid"
            },

            filter_grid: function(e){

                var $el = e.currentTarget;
                var to_filter = $($el).val();

                if(to_filter==""){

                    this.renderTable(this.collection, false);

                } else {

                    var filtered = this.collection.filter(function(item){
                        return item.get("link_scheda").toLowerCase() == to_filter;

                    });

                    if(filtered.length>0){

                       var filtro = new AssocCollection();

                       filtro.reset(filtered);

                       this.renderTable(filtro, false);
                    }
                }                   
            }
    });

    return Grid; 
```

布局模板如下所示：

```
<div class="row-fluid" id="top_controls"><input type="text" id="filter" class="input"/></div>
<div class="row-fluid" id="table_view"></div>
<div class="row-fluid" id="bottom_controls"><button class='add btn btn-primary'>Add</button></div> 
```

我的 CompositeView 的结构是这样的：

```
var AssocView = Backbone.Marionette.CompositeView.extend({

    tagName: 'table',
    className: 'table table-bordered table-striped',
    id: 'tableAssoc',
    template: assocTemplate,
    itemView: assocRow,

    appendHtml: function(collectionView, itemView, index){
        collectionView.$("tbody").append(itemView.el);
    },

    events: {
        "click .sort_link":"sort_for_link",
    },

    sort_for_link: function(){

        this.collection.comparator = function(model){

            return model.get("link_value");
        }

        this.collection.sort();

    },

    onRender: function(){
        console.log("render table!");

    }

});

return AssocView; 
```

表格的第一次显示是正确的，过滤也是如此。当我单击带有“sort_link”类的表头时会出现问题：整个表从 HTML 中删除，而集合保持不变（我认为整个布局被重新渲染）。例如，如果我在另一个地方渲染 CompositeView，比如应用程序的主区域，它就会按预期工作。所以我想问题是它位于我的布局声明中。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:36:35.323

在您的`Grid`中，您需要覆盖该`initialEvents`方法并且不要在其中执行任何操作。

```
 Grid = Backbone.Marionette.Layout.extend({

  initialEvents: function(){},

  // ... everything you already have

}); 
```

Layout从ItemView扩展而来，ItemView提供了`initialEvents`实现。这个方法检查它是否被赋予了一个集合，如果有，它将集合“reset”事件连接到视图的“render”方法。在您的情况下，您正在传递集合并且不希望这种行为。因此，覆盖 initialEvents 方法将更正它。

**更新**：我以为我`initialEvents`很久以前就删除了。如果您要使用 Marionette 版本保持最新，请获取 v0.9.10（或任何最新版本），这个问题现在就消失了。

# javascript - Chrome browserAction setPopup 在 Linux (Mint) 上显示错误

> ID：11886840
> 
> 赞同：0
> 
> 时间：2012-08-09T15:33:18.333
> 
> 标签：javascript, linux, google-chrome, google-chrome-extension

我正在 Linux Mint（以 XFCE 作为我的桌面环境）上的 Chrome（稳定版 21.0.1180.57 - NOT Chromium）中调试 Chrome 浏览器扩展。

当我单击扩展程序时，源自它的弹出窗口会向上越过标题栏，而不是向下进入浏览器。这使得它的内容在不调整大小或移动窗口的情况下不可见。

*但是，如果我在文件background.js*中注释掉这一行： `chrome.browserAction.setPopup({"tabId":data.tabId, "popup":url})`

弹出窗口像它应该的那样下拉到浏览器窗口中（除了它不显示我们扩展程序的特定于页面的内容）。

我试图截取屏幕截图，但我不知道如何在弹出窗口打开的情况下这样做。

# html - 我的 DIV 元素怎么了？

> ID：11886841
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:33:22.837
> 
> 标签：html, css, css-float

我有这段简单的代码：

HTML：

```
<body>  
    <div id="red">  ABC </div>
    <div id="blue"> ABC </div>  
</body> 
```

CSS：

```
body{
    width: 300px;
}
#red{   
    float:left;
    width: 100px;
    height: 100px;  
    background-color: red;  
}

#blue{  
    height: 100px;
    background-color: blue;
} 
```

我看到红色正方形和旁边的蓝色。

但是，如果我添加行“宽度：100px;” 在#blue 中，一切都毁了：“ABC”向下跳了一行，没有蓝色背景。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:35:57.587

因为另一个 div 漂浮在它上面。当您浮动某些东西时，任何未浮动的元素都将在浮动元素后面有其外部边界。因此，蓝色框实际上在红色框的后面。但是因为红色是块级元素，所以文本不适合在那里，所以它位于红色下方。两者都浮动，它会起作用

[http://jsfiddle.net/AUZxY/](http://jsfiddle.net/AUZxY/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T15:35:52.250

尝试将两个元素都向左浮动，我相信我放在一起的[这个 Fiddle](http://jsfiddle.net/Sh8WB/)应该是你要找的。

# c# - 有没有办法组合 2 个“FileSystem.CopyDirectory”语句，所以我只得到一个进度窗口？

> ID：11886842
> 
> 赞同：2
> 
> 时间：2012-08-09T15:33:25.157
> 
> 标签：c#, vb.net, winforms

有没有办法组合 2 个“FileSystem.CopyDirectory”语句，所以我只得到一个进度窗口？我在我的 C# 应用程序中使用以下 2 个语句。它工作正常，但它为每个语句一个接一个地提供 2 个进度窗口。有没有办法让只有一个进度条窗口可以处理这两个语句......因此也计算两者的时间？

```
FileSystem.CopyDirectory(@"C:\test\HP1", @"c:\test\HP3", UIOption.AllDialogs);
FileSystem.CopyDirectory(@"C:\test\HP2", @"c:\test\HP4", UIOption.AllDialogs); 
```

![在此处输入图像描述](../Images/e156cce06a709e4089d14bf5059c34d9.png)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:01:55.160

不，您不能使用内置方法。.Net 包装器`SHFileOperation`同时只处理一个对象。

您可以使用 COM`IFileOperation`接口，但您必须构建自己的 .Net 包装器。如果您有兴趣，[这](http://msdn.microsoft.com/en-us/magazine/cc163304.aspx)可能会有所帮助。

# mysql - 在 MySQL 上强制更改表

> ID：11886844
> 
> 赞同：1
> 
> 时间：2012-08-09T15:33:26.727
> 
> 标签：mysql, locking

我正在尝试向实时数据库添加一列，该列不断被访问：-

```
ALTER TABLE `projects` ADD COLUMN `cTime` INT(30) NULL DEFAULT NULL AFTER `session` 
```

它总是挂起。这是一个 MyISAM 表，我猜它正在尝试锁定该表。我试过IGNORE，但有没有强制这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:38:14.560

您的声明中有一个双重空值

```
ALTER TABLE `projects` ADD COLUMN `cTime` INT(30) DEFAULT NULL AFTER `session` 
```

# c# - 动态调用带参数的 dll 和方法

> ID：11886845
> 
> 赞同：7
> 
> 时间：2012-08-09T15:33:30.523
> 
> 标签：c#, dynamic, dll, methods, invoke

基本上我试图按名称调用 dll，实例化一个对象，然后在该 dll 中按名称调用方法。我收到“调用目标抛出异常”。在 Method.Invoke 期间。我相当确定我的问题在于方法参数的类型转换。我想知道是否有人对此异常有任何意见。此外，欢迎就如何修改我的方法提出任何建议。

```
public void calldll(string dllName, string typeName, string methodName, string arguments) {

    string[] argumentArray = arguments.Split(new char[] { '|' }, StringSplitOptions.None);

    Assembly assembly = Assembly.LoadFrom(dllName);
    System.Type type = assembly.GetType(typeName);
    Object o = Activator.CreateInstance(type);
    MethodInfo method = type.GetMethod(methodName);
    ParameterInfo[] parameters = method.GetParameters();

    object[] methodParameters = new object[parameters.GetLength(0)];

    for (int i = 0; i < parameters.Length - 1; i++)
    {
        var converter = TypeDescriptor.GetConverter(parameters[i].GetType());
        methodParameters[i] = converter.ConvertFrom(argumentArray[i]);
    }

    method.Invoke(o, methodParameters); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:37:40.360

我发现您的代码有两个问题：

1.  您没有遍历所有`parameters`. 您应该`-1`从`for`循环中删除。
2.  创建转换器时，调用该`GetType()`方法。这将返回对象的，而不是`Type`参数的。改为使用该属性。`ParameterInfo``Type``ParameterType`

总而言之，将`for`循环中的第一行更改为：

```
for (int i = 0; i < parameters.Length; i++)
{
   var converter = TypeDescriptor.GetConverter(parameters[i].ParameterType); 
```

完成这些更正后，我相信您的代码应该按预期运行。至少当我测试一个简单的`void Hello(int x, string y)`方法时它对我有用。

# objective-c - NSDatePicker 成为FirstResponder

> ID：11886859
> 
> 赞同：2
> 
> 时间：2012-08-09T15:34:15.357
> 
> 标签：objective-c, cocoa, nsdatepicker

我有一个数据输入表单，其中用户想要输入的第一个字段是`NSDatePicker`. 我希望在用户单击按钮（标记为“新建”）时突出显示该字段

我试过放，`[myDatePicker becomeFirstResponder]`但这没有效果。

谁能告诉我如何将焦点设置为`myDatePicker`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:58:30.050

不幸的是，`becomeFirstResponder`不是那样工作的。

如[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html)中所述，您应该发送`makeFirstResponder:`到包含您希望成为第一响应者的控件的窗口。在您的情况下，包含您的`NSDatePicker`.

`becomeFirstResponder`如果您不希望它成为第一响应者，则可以在控件中覆盖以返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:44:54.400

您的选择器是否链接到输出的文本字段？我之前已经将自定义选择器链接到我的文本字段键盘属性。如果输出设置为文本字段，您可以将文本字段设置为第一响应者，然后选择器将代替键盘出现。

# python - 计算python中代码的计算时间和内存

> ID：11886862
> 
> 赞同：7
> 
> 时间：2012-08-09T15:34:34.610
> 
> 标签：python

一些人可以帮助我如何找到python中的代码需要多少时间和多少内存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T15:36:38.447

使用它来计算时间：

```
import time

time_start = time.clock()
#run your code
time_elapsed = (time.clock() - time_start) 
```

正如 Python 文档所引用的：

> **时间.时钟（）**
> 
> 在 Unix 上，以浮点数形式返回当前处理器时间，以秒为单位。精度，实际上是“处理器时间”含义的定义，取决于同名 C 函数的精度，但无论如何，这是用于对 Python 或计时算法进行基准测试的函数。
> 
> 在 Windows 上，此函数根据 Win32 函数 QueryPerformanceCounter() 以浮点数形式返回自第一次调用此函数以来经过的挂钟秒数。分辨率通常优于一微秒。

**参考**：[http ://docs.python.org/library/time.html](http://docs.python.org/library/time.html)

* * *

使用它来计算内存：

```
import resource

resource.getrusage(resource.RUSAGE_SELF).ru_maxrss 
```

**参考**：[http ://docs.python.org/library/resource.html](http://docs.python.org/library/resource.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-11T10:28:34.793

基于[@Daniel Li](https://stackoverflow.com/a/11886898/1497139)对剪切和粘贴便利性和 Python 3.x 兼容性的回答：

```
import time
import resource 

time_start = time.perf_counter()
# insert code here ...
time_elapsed = (time.perf_counter() - time_start)
memMb=resource.getrusage(resource.RUSAGE_SELF).ru_maxrss/1024.0/1024.0
print ("%5.1f secs %5.1f MByte" % (time_elapsed,memMb)) 
```

**例子：**

```
 2.3 secs 140.8 MByte 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-14T22:42:11.280

有一个非常好的库，称为[jackedCodeTimerPy](https://github.com/BebeSparkelSparkel/jackedCodeTimerPY)用于计时您的代码。然后你应该使用 Daniel Li 建议的资源包。

jackedCodeTimerPy 提供了非常好的报告，例如

```
label            min          max         mean        total    run count
-------  -----------  -----------  -----------  -----------  -----------
imports  0.00283813   0.00283813   0.00283813   0.00283813             1
loop     5.96046e-06  1.50204e-05  6.71864e-06  0.000335932           50 
```

我喜欢它如何为您提供有关它的统计信息以及计时器运行的次数。

使用起来很简单。如果我想测量 for 循环中的时间代码，我只需执行以下操作：

```
from jackedCodeTimerPY import JackedTiming
JTimer = JackedTiming()

for i in range(50):
  JTimer.start('loop')  # 'loop' is the name of the timer
  doSomethingHere = 'This is really useful!'
  JTimer.stop('loop')
print(JTimer.report())  # prints the timing report 
```

您还可以同时运行多个计时器。

```
JTimer.start('first timer')
JTimer.start('second timer')
do_something = 'amazing'
JTimer.stop('first timer')

do_something = 'else'
JTimer.stop('second timer')

print(JTimer.report())  # prints the timing report 
```

回购中有更多使用示例。希望这可以帮助。

[https://github.com/BebeSparkelSparkel/jackedCodeTimerPY](https://github.com/BebeSparkelSparkel/jackedCodeTimerPY)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T15:40:50.253

使用像 guppy 这样的内存分析器

```
>>> from guppy import hpy; h=hpy()
>>> h.heap()
Partition of a set of 48477 objects. Total size = 3265516 bytes.
Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0  25773  53  1612820  49   1612820  49 str
     1  11699  24   483960  15   2096780  64 tuple
     2    174   0   241584   7   2338364  72 dict of module
     3   3478   7   222592   7   2560956  78 types.CodeType
     4   3296   7   184576   6   2745532  84 function
     5    401   1   175112   5   2920644  89 dict of class
     6    108   0    81888   3   3002532  92 dict (no owner)
     7    114   0    79632   2   3082164  94 dict of type
     8    117   0    51336   2   3133500  96 type
     9    667   1    24012   1   3157512  97 __builtin__.wrapper_descriptor
<76 more rows. Type e.g. '_.more' to view.>
>>> h.iso(1,[],{})
Partition of a set of 3 objects. Total size = 176 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0      1  33      136  77       136  77 dict (no owner)
     1      1  33       28  16       164  93 list
     2      1  33       12   7       176 100 int
>>> x=[]
>>> h.iso(x).sp
 0: h.Root.i0_modules['__main__'].__dict__['x'] 
```

# java - .drawLine() 问题和缓冲图像

> ID：11886866
> 
> 赞同：2
> 
> 时间：2012-08-09T15:34:42.297
> 
> 标签：java, swing, jpanel, bufferedimage, mouse-listeners

我有一个绘画程序，我已经完成了所有按钮和滑块，但是我对实际绘画本身有问题。当我将光标拖过屏幕而不是一条完整的线时，我几乎得到了一条我不想要的虚线。这是`MouseListener`in`JPanel`和的代码`BufferedImage`：

```
 public void mouseDragged(MouseEvent e) {
          Graphics g=buffered.getGraphics();
          g.setColor(mycol);
              Graphics2D graph=(Graphics2D)g;
          BasicStroke stroke=new BasicStroke(30);
          graph.setStroke(stroke);
              //  g.fillRect(xcor, ycor, 20, 20);
          /  /varx=e.getX();
            ycor=e.getY();
             xcor=e.getX();
            int bad=xcor;
            int good=ycor;
            graph.drawLine(xcor, ycor, bad, good);
           // buffered.setRGB(xcor, ycor, mycol.getRGB());
            repaint();
            // g.drawLine(xcor, ycor, x, x)
             repaint();

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:59:58.030

*   只是为了证明我的评论是正确的，我添加了这个答案，尽管这里的评论略有变化，即使用 of `mousePressed(...)`而不是`mouseClicked(...)`.
*   另外一个补充是，由于您想要 so 的`Graphics2D`对象`BufferedImage`而不是使用返回对象的`getGraphics()`always use ，因此您不必担心其中的 Cast 事物。`createGraphics()``Graphics2D`

    请看下面的例子：

=======================

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*;
import javax.imageio.ImageIO;

public class PaintingExample {

    private BufferedImage bImage;
    private ImageIcon image;
    private JLabel imageLabel;
    private int xClicked = 0;
    private int yClicked = 0;
    private int xDragged = 0;
    private int yDragged = 0;

    private MouseAdapter mouseListener = new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent me) {
            xClicked = me.getX();
            yClicked = me.getY();
        }

        @Override
        public void mouseDragged(MouseEvent me) {
            xDragged = me.getX();
            yDragged = me.getY();

            Graphics2D g2 = bImage.createGraphics();
            g2.setColor(Color.WHITE);
            BasicStroke stroke=new BasicStroke(30);
            g2.setStroke(stroke);
            g2.drawLine(xClicked, yClicked, xDragged, yDragged);
            g2.dispose();
            imageLabel.setIcon(new ImageIcon(bImage));
        }
    };

    public PaintingExample() {
        try {
            bImage = ImageIO.read(new URL(
                    "http://i.imgur.com/fHiBMwI.jpg"));
            image = new ImageIcon(bImage);          
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    private void displayGUI() {
        JFrame frame = new JFrame("Painting on Image");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        imageLabel = new JLabel(image);
        imageLabel.addMouseListener(mouseListener);
        imageLabel.addMouseMotionListener(mouseListener);

        contentPane.add(imageLabel);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new PaintingExample().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T22:57:45.957

如果我正确理解您的问题，那么您将遇到的主要问题是拖动鼠标时您将收到的更新数量。

即使您缓慢拖动，您也不会总是收到每个像素移动的通知，而是系统等待“空闲”状态（或阈值）通知您，因此它“看起来”是一个平滑的移动。

我可以通过稍微修改你的代码来把它放在一起

![你好 ;）](../Images/f1e4e5b71cf5d89141ba1c5356f28f29.png)

```
private MouseAdapter mouseListener =
    new MouseAdapter() {
        private boolean paint = false;
        @Override
        public void mousePressed(MouseEvent me) {

            xClicked = me.getX();
            yClicked = me.getY();
            xDragged = xClicked;
            yDragged = yClicked;

            paint = true;

        }

        @Override
        public void mouseReleased(MouseEvent e) {

            xClicked = -1;
            xClicked = -1;
            xDragged = -1;
            yDragged = -1;

            paint = false;

        }

        @Override
        public void mouseMoved(MouseEvent me) {
        }

        @Override
        public void mouseDragged(MouseEvent me) {

            if (paint) {

                xClicked = xDragged;
                yClicked = yDragged;

                xDragged = me.getX();
                yDragged = me.getY();

                xDragged = me.getX();
                yDragged = me.getY();

                Graphics2D g2 = bImage.createGraphics();
                g2.setColor(Color.WHITE);
                g2.drawLine(xClicked, yClicked, xDragged, yDragged);
                g2.dispose();
                imageLabel.setIcon(new ImageIcon(bImage));

                me.getComponent().invalidate();
                me.getComponent().repaint();

            }

        }
    }; 
```

基本上，这个想法是从最后一个“已知位置”到当前位置画一条线。

希望这是在球场

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T15:44:51.843

30 像素是一条很宽的线，我可以想象在没有抗锯齿的情况下绘制时，它会看起来*很*锯齿；这可能就是您所看到的。您可能想尝试类似的东西

```
graph.setRenderingHint(
    RenderingHints.KEY_ANTIALIASING,
    RenderingHints.VALUE_ANTIALIAS_ON); 
```

另一方面，也许你已经*开始*抗锯齿了，你想把它关掉；然后

```
graph.setRenderingHint(
    RenderingHints.KEY_ANTIALIASING,
    RenderingHints.VALUE_ANTIALIAS_OFF); 
```

其中之一保证会改变图像的外观；希望它会更符合您的喜好。

# mysql - 使用 Doctrine 2.2 的内部连接查询

> ID：11886868
> 
> 赞同：2
> 
> 时间：2012-08-09T15:34:42.453
> 
> 标签：mysql, doctrine-orm

我一直在涉足 Doctrine 2.2，并且一直在关注 Doctrine 官方网站以熟悉它。我对将这个普通的 mysql 查询转换为 DQL 感到震惊。

我有一个包含两个表的示例数据库：

```
**Table 1**
fruits:
fruit_id | fruit_name | fruit_type

**Table 2**
country:
country_id | country_name | fruit_id 
```

我想通过给出水果名称来获取国家/地区的名称。通常这适用于mysql查询

```
"SELECT c.country_name FROM country c
 INNER JOIN fruits f 
 WHERE f.fruit_name = 'Apple'"; 
```

使用学说，我创建了两个类 Fruits 和 Country，它们是数据库中表的实体。我以这种方式尝试过：

```
$dql = "SELECT c.country_name FROM Model\Country c
        INNER JOIN Model\Fruits f ON (c.fruit_id = f.fruit_id)
        WHERE f.fruit_name = 'Apple'";
$query = $em->createQuery($dql);
$result = $query->getArrayResult(); 
```

这给我一个错误：

```
Fatal error: Uncaught exception 'Doctrine\ORM\Query\QueryException' with message '[Semantical Error] line 0, col 76 near 'f ON (c.fruit_id': Error: Identification Variable Model\Fruits used in join path expression but was not defined before.' in ....... 
```

如果有人可以阐明如何使用学说 2.2 编写内部连接，那将是有帮助的。

**编辑：** 如果有人是 Doctrine 2 中的专家，可以使用两个表的 ion case 给出一个简单的**工作示例**，用于一对多关系`Docblock Annotations`，其中第一个表中的主键是另一个表中的外键。谢谢

# sql - SQL 语句检索到无效数据

> ID：11886870
> 
> 赞同：0
> 
> 时间：2012-08-09T15:35:07.537
> 
> 标签：sql, sql-server, jdbc

看看下面的 SQL 语句

```
select * 
from PhoneData 
where  names = 'yohan' 
    and nickName = 'yoises' 
    and mobileNumber1 = 0000000000 or mobileNumber2 = 0000000000 
```

在这里，有一个问题。这就是返回电话号码相同的所有结果。有 2 行具有相同的电话号码，因此它通过忽略名称、昵称和所有来返回两者。我认为这是因为“或”语句。我该如何解决这个问题？我需要获取姓名 = yohan 和 mobileNumber1 或 mobileNumber2 = 000000000 的详细信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:36:39.397

您需要一些括号围绕您的 OR 语句，如下所示：

```
select * 
from PhoneData 
where names = 'yohan' 
    and nickName = 'yoises' 
    and (mobileNumber1 = 0000000000 
        or mobileNumber2 = 0000000000) 
```

没有括号，它实际上是这样做的：

```
select * 
from PhoneData 
where (names = 'yohan' 
    and nickName = 'yoises' 
    and mobileNumber1 = 0000000000) 
        or mobileNumber2 = 0000000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:38:00.493

你缺少括号：

```
select * from PhoneData where  names = 'yohan' and nickName = 'yoises' and (mobileNumber1 = 0000000000 or mobileNumber2 = 0000000000) 
```

`AND`运算符具有不同的优先级，因此`OR`请确保在组合它们时是明确的。

# web-services - 何时通过 ESB 公开服务？

> ID：11886871
> 
> 赞同：4
> 
> 时间：2012-08-09T15:35:10.943
> 
> 标签：web-services, architecture, soa, esb

我目前参与的项目要求业务逻辑必须在 Web 服务中实现，该服务将由表示层组件（即 Web 应用程序）使用。

该公司有一个企业服务总线，最新的几乎所有开发的 Web 服务都通过这个总线公开。我询问了周围的一些同事何时通过 ESB 公开服务，我得到了以下答案：

*   如果有 ESB，则通过它公开所有内容：有几个好处，例如负载平衡和位置透明性
*   如果 ESB 仅充当代理 - 即没有消息转换 - 就不要使用它：您将超载 ESB 并失去性能。您最好进行点对点连接。
*   如果存在协议转换（例如将存储过程公开为 SOAP 服务），则应通过 ESB 公开组件。如果这不存在，你最好去点对点。

所以我很好奇是否有关于何时通过它公开 Web 服务的一般协议或最佳实践。任何阅读/参考都会有很大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:03:51.793

从我的角度来看，经过 4 年的 SOA 技术经验，使用 ESB 总是会使系统过载，因为您正在添加一个新层并让您的所有通信都通过它。如果没有 ESB，转换（消息传递或协议）和路由并不难完成，并且点对点通信将具有更高的吞吐量。业务流程自动化也是如此，有一些方法可以在不需要 ESB 的情况下实现。

另一方面，使用 ESB 在公司范围内有几个好处，但它必须在愿景和战略范围内。最好的例子之一是一家长期使用各种工具的公司，每个工具都有特定的目的，这使得公司分布在各自为政的团队中，团队相互隔离。很长一段时间后，这使得团队之间的交互变得复杂而缓慢。精心策划的 SOA 策略将有助于集成所有这些工具，并开始将它们替换为更有意义的轻量级项目。

所以，恕我直言，在没有企业战略的情况下使用 ESB 来解决单个项目中的几个“问题”并不是一个好主意，最终，当问题不存在时， **SOA**一词将在您的公司中被禁止SOA 本身就缺乏远见和企业战略。

关于 ESB 的使用，我发现的唯一*经验法则*是：在单个项目中对转换、路由、业务流程自动化（有或没有人工交互）等的要求并不是 SOA 的征兆（几乎每个项目必须执行转换、路由和业务流程自动化），但是当这些需求是整个公司的需求时，从业务角度考虑它是值得的，而不是技术角度。如果没有业务视角，那么 SOA 就会失败。

这是一个非常广泛的话题，讨论可能会持续很长时间，我建议您提供几个链接以供进一步阅读：

*   一些[SOA 案例研究](http://www.soa-consortium.org/case-study.htm)
*   [SOA 失败的 10 大原因](http://www.cio.com/article/438413/Top_10_Reasons_Why_People_are_Making_SOA_Fail)

# sdk - 在哪里可以找到有关 Nuance 的新 Nina SDK 的信息？

> ID：11886872
> 
> 赞同：1
> 
> 时间：2012-08-09T15:35:11.300
> 
> 标签：sdk, nlp, artificial-intelligence, voice-recognition

Nuance 于 2012 年 8 月 6 日发布了有关其新 Nina 技术的重大公告，但 SDK 似乎不可用。除了营销材料（视频等）之外，我什至找不到任何文档。有谁知道如何使用这个 SDK，或者它何时/何​​地可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:54:41.527

他们宣布了这一消息，但这并不意味着该产品很快就会面向广大受众推出。他们刚刚建立了一个合作伙伴关系来证明技术工作，你需要成为一个非常大的客户才能让他们回复你的电话。

幸运的是，还有其他语音识别和 NLP 提供商。您最好检查那些有该产品可用的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:24:06.877

看起来主站点是[http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home)

# xslt - xsl 模板没有向主样式表提供正确的输出

> ID：11886878
> 
> 赞同：2
> 
> 时间：2012-08-09T15:35:26.277
> 
> 标签：xslt

在`allTemplate.xsl`

```
<xsl:template match="myRadio">
    <xsl:variable name="radioName"/>
    <input type="radio" value = "F" name="{radioName}"/>
</xsl:template> 
```

在`main.xsl`

```
<myRadio>
       <xsl:variable name="radioName" select="Fields/Radio/*" />        
</myRadio> 
```

这会在生成后使用指向我生成的jsp页面中的数据的`<input type="radio" etc/>`radioName创建吗？`Fields/Radio/*``main.xsl`

```
Error:
Warning: Running an XSLT 1.0 stylesheet with an XSLT 2.0 processor
Warning: at xsl:variable on line 34 of file:/C:/allTemplates.xsl:
  SXWN9001: A variable with no following sibling instructions has no effect
Warning: Running an XSLT 1.0 stylesheet with an XSLT 2.0 processor
Warning: Running an XSLT 1.0 stylesheet with an XSLT 2.0 processor
Error on line 990 of file:/C:/fields.xsl (another random file):
  FORG0001: Failure converting untyped value "" to a number 
```

# c# - LINQ 查询中 xElement 的子级

> ID：11886879
> 
> 赞同：0
> 
> 时间：2012-08-09T15:35:28.787
> 
> 标签：c#, xml, linq, nodes, xelement

如何在下面的示例中获取 xElement 的子元素：

我正在使用 LINQ 查询一些 XML 数据，但我似乎无法到达我想要数据的 XML 部分。

到目前为止，这是我的代码：

```
// Use LINQ to pipe the data in to OrderSummary objects
var linqQuery = from n in customer_orders.Element("ROOT").Descendants("TOEHEAD")
                select new OrderSummary
                {
                    order_date = n.Element("DATEONFILE_MV").ToString(),
                }; 
```

此代码返回`order_date`如下：

```
<DATEONFILE_MV>
  <DATEONFILE>08/08/12</DATEONFILE>
</DATEONFILE_MV> 
```

但我只想要`DATEONFILE`标签中的日期。目前它是一个 XElement，我找不到一种方法来请求作为`<dateonfile>`它的子节点的元素。

我认为只是 put`n.Element("DATEONFILE")`会起作用，但遗憾的是没有，因为它是的子节点`<DATEONFILE_MV>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:39:32.907

```
var linqQuery = from n in customer_orders.Element("ROOT").Descendants("TOEHEAD")
                select new OrderSummary
                {
                    order_date = n.Descendants("DATEONFILE").First().Value,
                }; 
```

# codeigniter - Codeigniter tank auth 检查用户输入的密码

> ID：11886892
> 
> 赞同：0
> 
> 时间：2012-08-09T15:35:57.180
> 
> 标签：codeigniter, tankauth

我正在为我的网站使用 Tank Auth。

我搜索了一个功能，当用户尝试更新他的个人资料时，它会检查用户是否输入了有效密码。

我不明白如何从用户输入中对与数据库中的密码匹配的密码进行哈希处理。

这是我的控制器代码：

```
 $password = $this->input->post('password');
            $hasher = new PasswordHash(
                $this->config->item('phpass_hash_strength', 'tank_auth'),
                $this->config->item('phpass_hash_portable', 'tank_auth')
            );
            $hashed_password = $hasher->HashPassword($password); 
```

`$hashed_password`每次给我不同的哈希

我不认为我应该启用`phpass_hash_portable`

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:57:41.833

您需要使用 Tank Auth 的 CheckPassword 模块，而不是使用 phpass 的 PasswordHash 对其进行散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:08:06.783

您可以使用此功能检查您的密码：

```
$hasher->CheckPassword(password which has to be checked,password from database). 
```

而不是自己加密。

注意：必须检查的密码 => 是来自数据库的原始数据密码 => 来自数据库的密码。

# java - Google App Engine java.lang.UnsupportedClassVersionError：org/ritesh/RiteshServlet：不支持的major.minor 51.0版

> ID：11886894
> 
> 赞同：1
> 
> 时间：2012-08-09T15:36:20.317
> 
> 标签：java, google-app-engine

嗨，我安装了 java 6 并在 ubuntu 上使用了 eclipse Juno。我安装了 google 应用程序引擎插件（1.7.0 sdk）。我在 google 上部署它时创建了一个 web 项目 Ritesh，它给了我 500 内部服务器错误 Unsupported major.minor 版本 51.0在谷歌应用引擎中。我经历了一些查询，但无法解决。我是 ubuntu 的新手。任何人都可以帮助如何解决这个错误。请帮助我。这是与异常相关的错误日志

```
Uncaught exception from servlet
java.lang.UnsupportedClassVersionError: org/ritesh/HelloWorld2Servlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-6c4455b8f6b9bd6b(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:54:49.760

字节码主版本 51 意味着它是在 JDK7 下编译的。GAE 支持 JDK6。您应该检查 IDE 中的配置。

# oracle - grails tomcat 7部署

> ID：11886896
> 
> 赞同：0
> 
> 时间：2012-08-09T15:36:28.083
> 
> 标签：oracle, tomcat, grails, driver, classnotfoundexception

所以我有一个 grails 2.0.4 应用程序，它完全按照我想要的方式工作。我创建了 war 文件并将其部署到 Tomcat 7。我收到一条错误消息，指出应用程序找不到我用来连接到 oracle 的 jar (ojdbc6.jar)。该 jar 列在 mywebapp/WEB-INF/lib 下。为什么找不到？？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:12:10.563

1.  jar 文件应位于`lib`项目的顶级目录中（或指定为存储库中的依赖项），而不是`webapp/WEB-INF/lib`. jar 文件实际上是否在 warfile 中？您可以通过将战争作为 zip 文件打开或运行`jar tf target/mywebapp*.war`并查找`ojdbc6.jar`. 如果是，它应该被部署并且你应该在`tomcat7/webapps/mywebapp/WEB-INF/lib`.

2.  的默认环境`grails war`是`production`而不是`development`. 确保您已`production`正确配置数据源`grails-app/conf/DataSource.groovy`

# java - 在 Android 2.3.5 中插入多个联系人

> ID：11886900
> 
> 赞同：2
> 
> 时间：2012-08-09T15:36:49.850
> 
> 标签：java, android

我正在尝试从我的应用程序中添加多个联系人。我正在从 xml 文件中读取数据，然后将其包装到强类型对象列表中。这些对象然后循环遍历，我为每个对象调用插入到用户联系人中。

但是，在测试我得到 1 个或两个工作联系人，然后是一些空的（未知）条目时，我得到了一些非常奇怪的结果。（未知数）上的成功条目数似乎是随机的，但我不知道为什么我不能执行应该相当简单的事情。

下面是我的点击事件，它启动了获取数据然后将其添加到联系人的命令。我可以确认每次都将数据读入联系人列表，因此数据没有问题。

```
public void onClick(View v) {
    List<AddressContent> contacts = GetAddresses();     
    int counter = 0;        

    if (!contacts.isEmpty()) {                  
        ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

        for (int i = 0; i < contacts.size(); i++) {             

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.RawContacts.CONTENT_URI)
                    .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE,
                            null)
                    .withValue(ContactsContract.RawContacts.ACCOUNT_NAME,
                            null)
                    .withValue(ContactsContract.RawContacts.AGGREGATION_MODE, 
                            ContactsContract.RawContacts.AGGREGATION_MODE_DISABLED).build());

            // ------------------------------------------------------ Name

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                            contacts.get(i).getName()).build());

            // ------------------------------------------------------ Work
            // Number

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.Phone.NUMBER,
                            contacts.get(i).getPhone())
                    .withValue(
                            ContactsContract.CommonDataKinds.Phone.TYPE,
                            ContactsContract.CommonDataKinds.Phone.TYPE_WORK)
                    .build());

            // ------------------------------------------------------ Fax
            // Number

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.Phone.NUMBER,
                            contacts.get(i).getFax())
                    .withValue(
                            ContactsContract.CommonDataKinds.Phone.TYPE,
                            ContactsContract.CommonDataKinds.Phone.TYPE_FAX_WORK)
                    .build());

            // ------------------------------------------------------ Email

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Email.DATA,
                            contacts.get(i).getEmail())
                    .withValue(
                            ContactsContract.CommonDataKinds.Email.TYPE,
                            ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                    .build());

            // ------------------------------------------------------
            // Organisation

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.Organization.COMPANY,
                            contacts.get(i).getCompany())
                    .withValue(
                            ContactsContract.CommonDataKinds.Organization.TYPE,
                            ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                    .build());

            // ------------------------------------------------------
            // Address              

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(
                            ContactsContract.Data.RAW_CONTACT_ID, i)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredPostal.STREET, 
                            contacts.get(i).getStreet())
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredPostal.CITY, 
                            contacts.get(i).getCity())
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE, 
                            contacts.get(i).getPostcode())
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY, 
                            contacts.get(i).getCountry())
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredPostal.TYPE,
                            ContactsContract.CommonDataKinds.StructuredPostal.TYPE_WORK)
                    .build());
            counter++;
        }

        try {
            getContentResolver().applyBatch(ContactsContract.AUTHORITY,
                    ops);
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(this, "Error adding contact", Toast.LENGTH_SHORT).show();
            counter--;
        }

        if (counter > 0) {
            if (counter > 1) {
                Toast.makeText(this, "Contacts added", Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(this, "Contact added", Toast.LENGTH_SHORT).show();
            }
        }
    }

    if (counter == 0) {
        Toast.makeText(this, "Unable to add contact", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:42:40.813

经过一番折腾，我发现我需要循环然后每次都开火。我不能像上面那样简单地建立数组列表并触发一次。以下代码有效：

```
public void onClick(View v) {
List<AddressContent> contacts = GetAddresses();     
int counter = 0;        

if (!contacts.isEmpty()) {                  

    for (int i = 0; i < contacts.size(); i++) {             
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE,
                        null)
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME,
                        null)
                .withValue(ContactsContract.RawContacts.AGGREGATION_MODE, 
                        ContactsContract.RawContacts.AGGREGATION_MODE_DISABLED).build());

        // ------------------------------------------------------ Name

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                        contacts.get(i).getName()).build());

        // ------------------------------------------------------ Work
        // Number

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.Phone.NUMBER,
                        contacts.get(i).getPhone())
                .withValue(
                        ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_WORK)
                .build());

        // ------------------------------------------------------ Fax
        // Number

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.Phone.NUMBER,
                        contacts.get(i).getFax())
                .withValue(
                        ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_FAX_WORK)
                .build());

        // ------------------------------------------------------ Email

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Email.DATA,
                        contacts.get(i).getEmail())
                .withValue(
                        ContactsContract.CommonDataKinds.Email.TYPE,
                        ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                .build());

        // ------------------------------------------------------
        // Organisation

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.COMPANY,
                        contacts.get(i).getCompany())
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.TYPE,
                        ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                .build());

        // ------------------------------------------------------
        // Address              

        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, i)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredPostal.STREET, 
                        contacts.get(i).getStreet())
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredPostal.CITY, 
                        contacts.get(i).getCity())
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE, 
                        contacts.get(i).getPostcode())
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY, 
                        contacts.get(i).getCountry())
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredPostal.TYPE,
                        ContactsContract.CommonDataKinds.StructuredPostal.TYPE_WORK)
                .build());

    try {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY,
                ops);
counter++;
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(this, "Error adding contact", Toast.LENGTH_SHORT).show();
        counter--;
    }
    }

    if (counter > 0) {
        if (counter > 1) {
            Toast.makeText(this, "Contacts added", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(this, "Contact added", Toast.LENGTH_SHORT).show();
        }
    }
}

if (counter == 0) {
    Toast.makeText(this, "Unable to add contact", Toast.LENGTH_SHORT).show();
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-06T13:06:20.043

上面的答案不正确，只要您像这样设置正确的反向引用 ID，您就可以一次插入多个联系人：

```
 int backReference;
    ArrayList<ContentProviderOperation> ops = new ArrayList<>();
    for (int i = 0; i < contacts.size(); i++)  {
        Contact contact = contacts.get(i);
        backReference = ops.size();
        ops.add(ContentProviderOperation.newInsert(addCallerIsSyncAdapterParameter(RawContacts.CONTENT_URI, true))
                .withYieldAllowed(true)
                .withValue(RawContacts.ACCOUNT_NAME, contact.fullName)
                .withValue(RawContacts.ACCOUNT_TYPE, ACCOUNT_TYPE)
                .withValue(RawContacts.SOURCE_ID, contact.contactId)
                .build());

        ops.add(ContentProviderOperation.newInsert(addCallerIsSyncAdapterParameter(ContactsContract.Settings.CONTENT_URI, true))
                .withValue(RawContacts.ACCOUNT_NAME, contact.fullName)
                .withValue(RawContacts.ACCOUNT_TYPE, ACCOUNT_TYPE)
                .withValue(ContactsContract.Settings.UNGROUPED_VISIBLE, 1)
                .build());

        ops.add(ContentProviderOperation.newInsert(addCallerIsSyncAdapterParameter(Data.CONTENT_URI, true))
                .withValueBackReference(Data.RAW_CONTACT_ID, backReference)
                .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
                .withValue(StructuredName.GIVEN_NAME, contact.firstName)
                .withValue(StructuredName.DISPLAY_NAME, contact.fullName)
                .withValue(StructuredName.FAMILY_NAME, ((contact.preposition != null && !contact.preposition.equals("")) ? contact.preposition + " " : "") + contact.lastName)
                .build());

        for (Number number : contact.numbers) {
            ops.add(ContentProviderOperation.newInsert(addCallerIsSyncAdapterParameter(Data.CONTENT_URI, true))
                    .withValueBackReference(Data.RAW_CONTACT_ID, backReference)
                    .withValue(Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM)
                    .withValue(ContactsContract.CommonDataKinds.Phone.LABEL, TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, number.number)
                    .build());
        }

        for (Email email : contact.emails) {
            ops.add(ContentProviderOperation.newInsert(addCallerIsSyncAdapterParameter(Data.CONTENT_URI, true))
                    .withValueBackReference(Data.RAW_CONTACT_ID, backReference)
                    .withValue(Data.MIMETYPE, Email.CONTENT_ITEM_TYPE)
                    .withValue(Email.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM)
                    .withValue(Email.DATA, email.email)
                    .withValue(Email.LABEL, TYPE)
                    .build());
        }
        if (contacts.size() > i+1 && ops.size() + contacts.get(i+1).getTotalInsertions() > 499) {
            try {
                resolver.applyBatch(ContactsContract.AUTHORITY, ops);
            }
            catch (Exception e) {
                e.printStackTrace();
            }
            ops.clear();
        } else if (contacts.size() == i+1) {
            try {
                resolver.applyBatch(ContactsContract.AUTHORITY, ops);
            }
            catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

# c# - 属性更改时选择性/有条件地更新绑定到相同模型属性的控件

> ID：11886903
> 
> 赞同：0
> 
> 时间：2012-08-09T15:36:56.110
> 
> 标签：c#, wpf, silverlight, xaml

下面我有两个控件模板，它们用作网格中两个不同列的单元格模板。您会注意到两列都绑定到相同的模型属性（代码和值），但使用转换器以不同方式显示这些值。当数据更改时，两个控件模板也使用相同的样式来“闪烁”单元格。

这有效，但不完全是我想要的方式。现在，当 Data.Code 或 Data.Value 发生变化时，两个列单元格都会闪烁。我想要的是如果 Data.Code == "CodeA"，那么使用模板 CDisplay2 的列不应该闪烁（事实上，它不应该显示任何内容）。如果 Data.Code == "CodeB"，则使用模板 CDisplay1 的单元格不应闪烁。

为了实现这一点，如果我可以有条件地应用基于 Data.Code 的样式模板，那就太好了，但我不知道该怎么做。对此有什么想法吗？如何根据特定属性值有选择地将样式应用于绑定到同一模型属性的多个控件？

```
<Style x:Key="FlashStyle" TargetType="TextBlock" >
    <Setter Property="Visibility" Value="Collapsed"/>
    <Style.Triggers>
        <EventTrigger RoutedEvent="Binding.TargetUpdated">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames RepeatBehavior="4x" Storyboard.TargetProperty="(UIElement.Visibility)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}"/>
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.4" Value="{x:Static Visibility.Collapsed}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Style.Triggers>
</Style>

<ControlTemplate x:Key="CDisplay1" >
    <Grid>
        <TextBlock Style="{StaticResource Flash1}" >
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource conv}"  ConverterParameter="CodeA" NotifyOnTargetUpdated="True">
                    <Binding Path="Data.Code"  />
                    <Binding Path="Data.Value"  />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </Grid>
</ControlTemplate>
<ControlTemplate x:Key="CDisplay2" >
    <Grid>
        <TextBlock Style="{StaticResource Flash1}" >
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource conv}"  ConverterParameter="CodeB" NotifyOnTargetUpdated="True">
                    <Binding Path="Data.Code"  />
                    <Binding Path="Data.Value"  />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:06:45.340

我使用触发器有条件地设置绑定。这样做的效果是 FlashStyle 不会对两个控件都执行，因为某些单元格不会被绑定并且转换器不会被调用。

# python - Scrolling in QScrollArea pyqt

> ID：11886908
> 
> 赞同：2
> 
> 时间：2012-08-09T15:37:11.987
> 
> 标签：python, scroll, pyqt

How can I auto scroll for the scroll area? For example, when there is a new update instead of the view of the scroll area staying the same, I want to go down with the new text. Think of it as in a CMD console, when you type a command it autoscroll with the output.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:55:52.507

I was just going to respond to the other answer, but I just didn't know the best way to phrase it in the space allotted.

QScrollArea's are very useful widgets to use when designing custom PyQt widgets - I use them often. Things like rollout widgets, card widgets, anything where you could be displaying multiple sub-widgets with the need for scrolling can be a very useful utility. I don't agree with the idea that a QScrollArea isn't much use on its own.

The QTextEdit answer solves the problem the developer was facing - but only because it so happens the question is really about that. If you're trying to scroll a text edit, go with that answer.

However, if you are searching for an answer to the actual question and come across this thread, then the way to scroll down a QScrollArea is by actually modifying the scrollbar's value.

```
area = QScrollArea(parent)
vbar = area.verticalScrollBar()
vbar.setValue(vbar.maximum()) 
```

If you want to scroll to particular areas or anything (like implementing the ensureCursorVisible) then you want to take the location on the area's widget that you want to scroll to, figure out the percentage of the height of it, and apply that value to the vertical scrollbar. (Pseudocode)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T17:04:16.683

Use [`QTextEdit.moveCursor`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html#moveCursor) to set the location you want to scroll to, and then use [`QTextEdit.ensureCursorVisible`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html#ensureCursorVisible) to scroll to it:

```
textedit.moveCursor(QtGui.QTextCursor.End)
textedit.ensureCursorVisible() 
```

# java - 嵌套数据的数据存储设计

> ID：11886909
> 
> 赞同：0
> 
> 时间：2012-08-09T15:37:14.327
> 
> 标签：java, sql, xml, database

所以我正在为一个学校项目编写一个相当简单的 Java 应用程序，它基本上必须存储一些用户输入的各种公司的信息。

数据类型将类似于：

```
Company1
    Survey1
        Category 1
            Question 1
            ....
        Category 2
        ....
    Survey2
    ....
Company2
.... 
```

我最初想使用 sqlite db 来存储它，但我不确定如何在不重复数据的情况下将这样的嵌套数据存储在 db 中。然后我想到了使用 XML 什么的。

那么存储这些数据的好方法是什么：sql 数据库、xml 或其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:51:01.987

我认为不需要 SQL DB。我会做这样的事情：

```
Class Data {
   List<Company> companies;
}

Class Company {
   List<Survey> surveys;
}

Class Survery {
   List<Category> categories;
}

Class Category {
   List<Question> questions;
}

Class Question {
   String question;
} 
```

每家公司都有自己的调查，有自己的类别，有自己的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:55:53.987

存储为 XML 或将其存储在数据库中，如下所示：

```
TABLE Companies
-------------------
CID (INT) | SID (INT REF)
-------------------

TABLE Surveys
-------------------
SID (INT) | SNAME (VARCHAR) | CATNAME (INT REF) | QUESTION (INT REF)
-------------------

TABLE Categories
-------------------
CID INT | CATNAME VARCHAR
-------------------

TABLE Question
-------------------
QID INT | QUESTION VARCHAR
------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:13:31.657

如果您愿意使用 XML 来存储数据，最好的方法是创建一个表示您的数据层次结构的类层次结构（如 @Doug Ramsey 发布的那样）。从您的数据创建对象并使用 JAXB（Java 绑定 XML 架构）将该对象转换为 XML 文件。

# javascript - 为什么是 $.datepicker(); 不起作用，但 $.hide(); 是？

> ID：11886911
> 
> 赞同：0
> 
> 时间：2012-08-09T15:37:22.937
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 twitter 引导程序（通过 less 生成）、jquery 和 jquery UI。以下是页面上的主要导入和脚本标签：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link rel="stylesheet/less" href="/assets/less/bootstrap.less">
    <script src="/assets/less/less-1.3.0.min.js"></script>
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
    <link type="text/css" href="/assets/stylesheets/jquery-ui-1.8.22.css" rel="stylesheet" />
    <link rel="stylesheet" href="/assets/stylesheets/my.css" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>
   <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- remember <link> tag for the jqueryUI css-->
    <script src="/assets/javascripts/jquery-1.7.2.min.js"></script>
    <script src="/assets/javascripts/jquery-ui-1.8.22.min.js"></script>
    <script src="/assets/javascripts/bootstrap-transition.js"></script>
    <script src="/assets/javascripts/bootstrap-alert.js"></script>
    <script src="/assets/javascripts/bootstrap-modal.js"></script>
    <script src="/assets/javascripts/bootstrap-dropdown.js"></script>
    <script src="/assets/javascripts/bootstrap-scrollspy.js"></script>
    <script src="/assets/javascripts/bootstrap-tab.js"></script>
    <script src="/assets/javascripts/bootstrap-tooltip.js"></script>
    <script src="/assets/javascripts/bootstrap-popover.js"></script>
    <script src="/assets/javascripts/bootstrap-button.js"></script>
    <script src="/assets/javascripts/bootstrap-collapse.js"></script>
    <script src="/assets/javascripts/bootstrap-carousel.js"></script>
    <script src="/assets/javascripts/bootstrap-typeahead.js"></script>

  <!--Jquery for the invite button datepicker-->
  <script type="text/javascript">
    $(document).ready(function() {
        $("div").hide();
        return false;
    });
    </script>

  </body>
</html> 
```

请注意最后一个标签，即隐藏 div 的标签。此页面最终是空白的，因为主 div 被隐藏（此处未显示）。如果，但是我将其替换为

```
<script type="text/javascript">
        $(document).ready(function() {
                $("#datepicker").datepicker();
            $("div").hide();
            return false;
        });
        </script> 
```

然后什么也没有发生 - div 不会被隐藏。我试过使用 Firebug，但是当我尝试检查脚本时它开始挂起。

我的进口是否有可能发生冲突？

# java - Google App Engine：后端与前端实例

> ID：11886915
> 
> 赞同：15
> 
> 时间：2012-08-09T15:37:29.037
> 
> 标签：java, google-app-engine, backend

根据代码是在前端实例还是后端实例上运行，GAE 允许不同的限制。例如，它允许您在后端启动长时间运行的后台线程，而如果代码在前端实例上运行，这将超时并引发运行时异常。

我对如何设计应用程序感到非常困惑，以便您知道只有某些代码在后端实例（而不是前端实例）上执行。

我对 GAE 工作原理的*理解*是，您上传您的应用程序（WAR 文件）并根据需要或直到超过您定义的上限（用于预算等）扩展（创建集群实例）该应用程序。

但除非我弄错了，否则它不允许您为同一个应用程序上传不同的模块（多个 WAR），因此在前端实例上运行 1 个 WAR，在后端实例上运行另一个 WAR（以保证你只在后端运行后台线程！）。

所以我的问题是：您如何开发、打包和部署 GAE 应用程序，以便始终在正确的实例上执行正确的代码？与此相切的问题是如何指定在特定后端运行不同的长时间运行的作业。例如，如果您有一个后台线程应该在午夜运行，但您有 10 个后端，这是否意味着您每晚都会在所有 10 个实例上启动相同的后台线程？显然，在某些情况下，您只希望 1 个后端运行作业，而其他情况下每个后端的行为应该相同。

再一次，这一切都回到了：**你如何确保正确的代码在正确的实例上部署和执行？**提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:25:33.577

后端可以通过名称直接寻址，尽管它们与您的应用程序中的其他常规/前端实例共享相同的代码和 servlet。

参考：[https ://developers.google.com/appengine/docs/java/backends/overview](https://developers.google.com/appengine/docs/java/backends/overview)

您可以将需要在后端运行的请求定向到 backendname.yourapp.appspot.com/someroute

您还可以在 backends.xml 中配置多个后端（使用不同的名称）并使用相同的逻辑，将针对特定后端的请求发送到其相应的 uri。

基本上相同的代码在所有实例上运行，但您可以设计路由以将特定请求定向到命名后端实例。

# c++ - 回文程序产生不正确的输出

> ID：11886916
> 
> 赞同：0
> 
> 时间：2012-08-09T15:37:30.803
> 
> 标签：c++, palindrome

我正在[SPOJ](http://www.spoj.pl/)（“Sphere Online Judge”，一个编程拼图网站）上尝试一个问题，我需要生成大于给定数字的最小回文。我试图通过用模数和整数除法计算回文的两侧来解决它，但它仍然给了我错误的答案。可能是什么问题？

```
#include <cmath>
#include <iostream>

using namespace std;

int inverse(int a){
    int inv = 0;
    while( a > 0){
        inv = inv*10 + a%10;
        a = a/10;
    } // while
    return inv;
} // inverse

int main(){
    ios::sync_with_stdio(false);
    int n;
    cin >> n;
    for(int i = 0; i < n; i++){
        int a;
        cin >> a;
        int size  = 0;
        int tmp = a;
        while(tmp > 0){
            size++;
            tmp/=10;
        } // while

        bool even = false;
        int middle = size/2;
        if(size%2==0)even = true;
        if(!even)middle++;
        int l = a/pow(10.0,size-middle);
        int r = a%int(pow(10.0,middle));
        int lr = inverse(l);
        if(lr <= r){
            l++;
            lr=inverse(l);
        } // if

        if(!even)
            lr%=int(pow(10.0,middle-1));

        int wynik = l*pow(10.0,size-middle)+lr;

        if(a==9)
            wynik=11;
        else if(a==0)
            wynik = 1;

        cout << wynik << endl;
    } // for

    return 0;
} // main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:51:11.867

根据[问题描述](http://www.spoj.pl/problems/PALIN/)，您必须能够处理小于一百万位的任何大小的正整数。您的实现基于`int`类型，因此它只能处理最多大约九位数的数字（根据您的系统的 INT_MAX 给出或取几位数字）。

样本输入：

```
1
100000000000000000000000000000000000000000 
```

样本输出：

```
-2147483648 
```

您的输出不正确。正确的输出是`100000000000000000000000000000000000000001`。

# ruby-on-rails - 将 Rails 3 应用程序降级到 Rails 2

> ID：11886921
> 
> 赞同：0
> 
> 时间：2012-08-09T15:37:39.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-2, rails-3-upgrade

我今天遇到了一个问题。在过去的几个月里，我一直在构建一个相当密集的 Rails 3 应用程序，它使用了我需要的所有 gem 的所有最新版本。我刚刚被告知我不能使用任何新的东西。我将把我的项目添加到其他使用旧版本的项目中。我们不能升级现有的，我们只能降级我的。

话虽如此，我需要降级我所做的几乎所有事情。这是我目前正在使用的列表（通过`gem list`）：

actionmailer (3.2.6)
actionpack (3.2.6)
activemodel (3.2.6)
activerecord (3.2.6)
activeresource (3.2.6)
activesupport (3.2.6)
arel (3.0.2)
awesome_print (1.0.2)
builder ( 3.0.0)
bundler (1.1.4)
慢性 (0.6.7)
咖啡导轨 (3.2.2)
咖啡脚本 (2.2.0)
咖啡脚本源 (1.3.3)
erubis (2.7.0)
execjs ( 1.4.0)
git (1.2.5)
远足 (1.2.1)
i18n (0.6.0)
珠宝商 (1.8.4)
旅程 (1.0.4)
jquery-rails (2.0.2)
json (1.7.3)
libv8 ( 3.3.10.4 x86_64-linux)
libxml-ruby (2.3.3)
邮件 (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
nokogiri (1.5.5)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6\. 1)
rails (3.2.6)
railties (3.2.6)
rake (0.9.2.2)
rdoc (3.12)
roxml (3.3.1) ruby​​gems
-bundler (1.0.3)
rvm (1.11.3.4)
sass (3.1.20, 3.1.19)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
therubyracer (0.10.1)
thor (0.15.4)
倾斜 (1.3.3)
treetop (1.4.10)
tzinfo ( 0.3.33)
uglifier (1.2.6)
每当 (0.7.3)

这是我被允许使用的版本（对于某些宝石）；

activesupport (1.0.7)
activerecord (2.3.2)
actionmailer (2.3.2)
activeresource (2.3.2)
actionpack (2.3.2)
rails (2.3.2)
rake (0.8.4)
sqlite3 (1.2.1)
ruby​​gems ( 1.3.1)
nokogiri (1.5.0)

如你所知，我有一些工作要做。我什至不确定我是否使用了第一个列表中的每一个宝石。事实上，我很确定我不是。所以我想第 1 步是删除我实际上没有使用的所有宝石。

一旦我这样做了，完成这项任务的最快/最简单/最好/最有效的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:45:25.010

我认为最简单的做法是创建一个新的 Rails 2.3.2 应用程序，然后从头开始构建它，但是复制逻辑和模板并在需要的地方安装 Rails 2 版本的 gems，并重写依赖于更新的部分宝石或语法。

真正的问题是为什么不能按原样部署 Rails 3 应用程序？使用 RVM、Rbenv 和 Bundler，应该没有理由不能在同一台服务器上部署不同版本的 Rails（如果这甚至是问题的话）。

# php - 从配置中删除一个模块，即使它被缓存了

> ID：11886922
> 
> 赞同：0
> 
> 时间：2012-08-09T15:37:39.420
> 
> 标签：php, magento, caching

我有一个站点，我在 magento 中运行多个商店，并且需要在每个商店级别禁用模块。

Magento的第二个答案[：禁用任何特定商店](https://stackoverflow.com/questions/5962066/magento-disable-module-for-any-particular-store)的模块确实有效，但是需要关闭布局缓存。这似乎大大增加了服务器负载。

我发现了 alan Storm 的这篇文章，这似乎很有帮助[http://alanstorm.com/magento_config_a_critique_and_caching](http://alanstorm.com/magento_config_a_critique_and_caching)

有没有一种方法可以去除特定的 xml 片段，即使它是从缓存中加载的？

无论如何实现，这似乎都会很麻烦，但是大多数扩展编写者在构建扩展时似乎没有考虑到多网站/商店。如果能够完全禁用每个商店的模块并仍然允许布局缓存正常运行，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:51:03.660

好的，所以我想我想出了这个。

在 /app/code/local/Mage/Core/Model/Config.php （原件副本）。

```
 public function loadModulesCache()
{
    if (Mage::isInstalled(array('etc_dir' => $this->getOptions()->getEtcDir()))) {
        if ($this->_canUseCacheForInit()) {
            Varien_Profiler::start('mage::app::init::config::load_cache');
            $loaded = $this->loadCache();
            Varien_Profiler::stop('mage::app::init::config::load_cache');
            if ($loaded) {

               ***PUT CODE HERE TO EDIT $this->_xml***
               Just remove the nodes which should be disabled.

                $this->_useCache = true;
                return true;
            }
        }
    }
    return false;
} 
```

我不知道这是否是最好的方法，或者是否应该这样做，但我现在要测试一下，看看是否会弹出任何其他错误

# jquery - jQuery validationEngine - 添加自定义验证

> ID：11886928
> 
> 赞同：1
> 
> 时间：2012-08-09T15:38:06.697
> 
> 标签：jquery, regex, validation, jquery-validation-engine

我正在使用 jQuery 的validationEngine 并且在大多数情况下发现它工作得很好，但是，我第一次不得不添加我自己的自定义验证检查并且它根本不匹配。

我想验证它是一个英国电话号码，没有任何奇怪的字符或空格，并且它必须是 11 个字符长，我假设使用这个正则表达式：`/^[0-9]{11}$/`

这是我的完整验证规则：

```
"ukPhoneNumber": { "regex": /^[0-9]{11}$/,
                    "alertText": "Must be a full UK phone number",
                    "alertText2": "Example: 01452123456 "
                } 
```

然后在我的输入中，我正在使用`class="validate[ukPhoneNumber]"`- 但是，无论我在输入中输入什么，它都不会显示警报文本或阻止我提交表单。

知道我做错了什么吗？我的正则表达式可能不正确，但我也尝试从另一个（工作）类复制进行测试，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:50:27.053

叹息，对不起 - 刚刚弄清楚了这个，您需要指定它是类中的自定义验证：

```
class="validate[custom[ukPhoneNumber]]" 
```

（我会删除这篇文章，但认为它可能对其他人有用）

# c++ - 引用的`auto`说明符类型推导

> ID：11886930
> 
> 赞同：11
> 
> 时间：2012-08-09T15:38:12.873
> 
> 标签：c++, c++11, type-inference

让我们考虑以下代码片段

```
void Test()
  {
  int x = 0;

  int& rx = x;
  int* px = &x;

  auto apx = px;    // deduced type is int*
  auto arx = rx;    // deduced type is int
  } 
```

可以从指针类型中进行类比，期望推导的类型`arx`是`int&`，但`int`实际上是。

标准中的规则是什么？背后的原因是什么？有时我会在这样的情况下被它抓住：

```
const BigClass& GetBigClass();
...
auto ref_bigclass = GetBigClass();   // unexpected copy is performed 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T15:44:02.580

使用`auto&`：

```
auto& ref_bigclass = GetBigClass(); 
```

引用应该是透明的：对它们的任何操作都发生在它们引用的对象上，没有办法“获取”引用本身。

UPD：这包含在 7.1.6.4/6 中：

> 一旦根据 8.3 确定了 declarator-id 的类型，使用 declarator-id 声明的变量的类型就使用模板参数推导规则从其初始值设定项的类型中确定。

模板参数推导在 14.8.2.1/3 中定义：

> 如果模板参数类型 P 是引用类型，则使用 P 所引用的类型进行类型推导。

PS请注意，这与`decltype`:`decltype(rx)`将产生`int&`类型（7.1.6.2/4）不同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T16:09:23.977

考虑它的最简单方法是将其与模板参数推导进行比较。

鉴于：

```
template<typename T>
void deduce(T) { } 
```

如果你打电话：

```
deduce(px); 
```

那么模板参数`T`将被推断为`int*`如果你调用

```
deduce(rx); 
```

那么`T`将被推断为`int`，而不是`int&`

使用`auto`.

> 可以从指针类型中进行类比，期望推导的类型`arx`是`int&`

您必须有一个相当混乱的 C++ 语言模型才能进行类比。仅仅因为它们以语法相似的方式声明，例如`Type@`类型和修饰符，并不能使它们以相同的方式工作。指针是一个值，一个对象，它可以被复制并通过赋值来改变它的值。引用不是对象，它是对某个对象的引用。引用不能被复制（复制它会复制所指对象）或更改（分配给它会改变所指对象）。*返回指针的函数按值*返回对象（所讨论的对象是指针对象），但返回引用的函数（如您的）*按引用*`GetBigClass()`返回对象*. 它们是完全不同的语义，试图在指针和引用之间进行类比注定会失败。*

# javascript - Safari 桌面中未触发的触摸事件

> ID：11886933
> 
> 赞同：0
> 
> 时间：2012-08-09T15:38:18.010
> 
> 标签：javascript, html, webkit, touch-event

我正在开发一个支持桌面和移动设备上的触摸事件的应用程序。当使用类似的东西时（每[https://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariWebContent/HandlingEvents/HandlingEvents.html](https://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariWebContent/HandlingEvents/HandlingEvents.html)）

```
element.addEventListener("touchstart", touchStart, false);
element.addEventListener("touchmove", touchMove, false);
element.addEventListener("touchend", touchEnd, false);
element.addEventListener("touchcancel", touchCancel, false); 
```

这些仅在 ipad 和 iphone 上测试时触发，而不是在桌面上。由于我是在桌面上开发的，我怎么能让这些事件被识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:09.333

您可以在 iOS 模拟器中查看您的网站，该模拟器包含在 MacO 上的 XCode 中。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:43:37.710

在测试机器上，我们使用[幻肢](http://www.vodori.com/blog/phantom-limb.html)来模拟触摸。如果设备本身支持触摸，它很容易设置，也不会做任何事情。

否则，请遵循 Alexey 的建议并尽可能多地使用模拟器和真实设备。

# batch-file - 批处理文件：两个文件夹之间的条件复制

> ID：11886935
> 
> 赞同：1
> 
> 时间：2012-08-09T15:38:24.910
> 
> 标签：batch-file

我需要你的帮助。我正在寻找一个批处理文件来执行特定操作并进行检查。让我解释一下情况：

我有 2 个文件夹（C:\Folder1 和 C:\Folder2）
我想知道是否有可能有一个批处理文件，对于放置到 Folder1 中的每个 *.TXT 文件，该文件的副本都会将该文件的副本放置到文件夹 2（之后比较 2 个文件夹并确保此文件不在 Folder2 中）。

是否也可以有一个计数器，因为当另一个 TXT 文件放入 Folder1 时，它应该只将该文件复制到 Folder2（不是所有以前的 txt 文件都已添加到 A 中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:47:45.107

最简单的方法是使用[robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)。它已经只会复制更改的文件，并且有很多选项来控制它将复制的内容。它内置于 Vista+ 中，可以在[Server 2003 Resource Kit](http://www.microsoft.com/en-us/download/details.aspx?id=17657)中为 Windows XP/Server 2003 下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:50:17.840

**这会将当前**文件夹中不存在`c:\folder2`但确实存在的任何 txt 文件复制到**`c:\folder2`**

 **```
for %%a in (*.txt) do if not exist "c:\folder2\%%a" copy "%%a" c:\folder2 
```

*添加引号以涵盖@dbenham 确定的可能问题*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:02:46.023

很容易将 Sean 的答案扩展为从 folder1 而不是当前目录进行复制。我还在路径周围添加了引号，以便空格和特殊字符等`&`不会破坏代码。

```
@echo off
for %%F in ("c:\folder1\*.txt") do if not exist "c:\folder2\%~nxF" copy "%%F" "c:\folder2" 
```

您甚至不需要批处理文件。如果将所有双百分比更改为单百分比，则可以简单地从命令行运行 FOR 命令。

我也喜欢 shf301 的建议，尽管 ROBOCOPY 选项太多，在您习惯之前可能会让人感到困惑。我相信您想要以下内容：

```
robocopy /xn /xo "c:\folder1" "c:\folder2" *.txt 
```**

# ios - “_OBJC_CLASS_$_Facebook”，引用自：AppDelegate.o 中的 objc-class-ref

> ID：11886940
> 
> 赞同：0
> 
> 时间：2012-08-09T15:38:43.593
> 
> 标签：ios, xcode, facebook

当我构建涉及从 iPhone 发布到 Facebook 的项目时出现此错误：架构 i386 的未定义符号：“_OBJC_CLASS_$_Facebook”，引用自：AppDelegate.old 中的 objc-class-ref：符号不是为架构 i386 clang 找到：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我以前遇到过这样的错误，而且一直是因为我未能导入某些包。但是，我已经导入了“FBConnect.h”和“Facebook.h”，但也许我还缺少另一个。我还在此站点上的一篇文章中看到，您需要将 FBConnectSDK 框架放在 Build Settings 下的“Link Binary With Libraries”中，但我这样做了，我又遇到了 13 个错误......我正在使用情节提要并且 ARC 设置为离开。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:49:28.887

我通过检查我的图书馆的目标成员来解决类似的问题。从导航器中选择与您的应用程序目标相关的库和文件。检查实用程序部分，这些文件是否标记为您的应用程序目标所需的文件。

# paperjs - Paper.js：为什么通过缩放图像变得模糊？

> ID：11886941
> 
> 赞同：1
> 
> 时间：2012-08-09T15:38:50.203
> 
> 标签：paperjs

Paper.js：为什么通过缩放图像变得模糊？代码

```
 paper.setup(canvasDOMElement);
            var raster = new paper.Raster(image2);
            // raster.size = new paper.Size(800, 600);
            raster.scale(0.05, {x:110, y:110});
            // raster.position = paper.view.center;
            paper.view.draw(); 
```

![在此处输入图像描述](../Images/54f3de3bdca110c3e9af6281a2f9f335.png)

图像为 3000x2500 像素，边界和图像本身模糊。如果我不使用比例，图像就很清晰。

好吧，我制作了这样的动画：

```
 onAppear = function(){
            paper.setup(canvasDOMElement);
            var raster = new paper.Raster(image2);
            // raster.size = new paper.Size(800, 600);
            // raster.scale(1, {x:110, y:110});
            // raster.position = paper.view.center;
            var scale = 1;
            paper.view.onFrame = function(event) {
                // On each frame, rotate the path by 3 degrees:
                scale -= 0.0001;
                raster.scale(scale, {x:110, y:110});
            }
            paper.view.draw();
        } 
```

这有点奇怪，因为比例是一个在另一个之上，因此有一个指数曲线，这不是我想的那样。所以更好的方法是：

```
 onAppear = function(){
            paper.setup(canvasDOMElement);
            var raster = new paper.Raster(image2);
            // raster.size = new paper.Size(800, 600);
            // raster.scale(1, {x:110, y:110});
            // raster.position = paper.view.center;
            var scale = 1;
            paper.view.onFrame = function(event) {
                // On each frame, rotate the path by 3 degrees:
                raster.scale(0.99, {x:110, y:110});
            }
            paper.view.draw();
        } 
```

通过这种方式，图像在每一帧上重新缩放到 0.99。即便如此，经过 200 次迭代后，图像变得非常非常模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:13:37.947

那么问题的主要来源是我不知道**canvas.style.height 和 canvas.height 之间的区别**：

它们都改变了画布的高度，但是

**canvas.style.height**改变了比例，因此我模糊了图像

并且**canvas.height**保持相同的比例，因此没有模糊的图像。

**对于 qooxdoo 用户：**

```
var canvas = new qx.ui.embed.Canvas().set({});
// changing the height on canvas like this:
canvas.setHeight(900)
// will set the canvas.style.height
// which will become blurred

// therefore you must do:
var canvasDOMElement = canvas.getContentElement().getDomElement();
canvasDOMElement.height = 900;
// this will resize your canvas without scaling it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:04:06.727

真正的问题在这里解释：http: [//demo.qooxdoo.org/2.1/apiviewer/index.html#qx.ui.embed.Canvas](http://demo.qooxdoo.org/2.1/apiviewer/index.html#qx.ui.embed.Canvas)

**同步维度 = 真！**

```
var canvas = new qx.ui.embed.Canvas().set({
  syncDimension: true
}); 
```

# xcode - Xcode 移动文件时丢失 git 历史记录

> ID：11886943
> 
> 赞同：5
> 
> 时间：2012-08-09T15:38:51.827
> 
> 标签：xcode, git

我正在尝试在同一个 git 存储库中的两个项目之间移动文件。在 Xcode 中，我可以很好地移动对新项目的引用，但是一旦我将文件物理移动或复制到新项目文件夹，git 就会丢失所有日志/责备历史记录。

在命令行上我可以做到`git log --follow`并且有效，但我如何在 Xcode 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:28:06.637

我不认为您可以为 git log 设置全局选项，但您可以覆盖它并欺骗 Xcode 运行修改后的 git log 并附加以下选项。

尝试在此 hack 上构建：[https ://stackoverflow.com/a/8204925/949284](https://stackoverflow.com/a/8204925/949284)

# jquery - 'rel=external' 在尝试链接到外部站点时不起作用

> ID：11886945
> 
> 赞同：0
> 
> 时间：2012-08-09T15:38:55.727
> 
> 标签：jquery, jquery-mobile

如何从标题栏中的按钮链接到 jQuery 中的外部站点？

我在下面尝试过，但它不起作用。

```
<div data-role="header" data-theme="b">
        <h4>Header</h4>
        <a rel='external' data-ajax="false" href='www.google.com' class='ui-btn-right' data-icon='arrow-l'>Google</a>
</div> 
```

小提琴：

[http://jsfiddle.net/4Bgx7/1461/](http://jsfiddle.net/4Bgx7/1461/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:45:29.680

Prefixing `http://` to the href would fix the issue.

```
<a data-rel='external' data-ajax="false" href='http://www.google.com' class='ui-btn-right' data-icon='arrow-l'>Google</a> 
```

A demo here - [http://jsfiddle.net/4Bgx7/1464/](http://jsfiddle.net/4Bgx7/1464/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:41:33.217

你需要`data-rel="external"`，不是`rel="external"`

[http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:23:28.453

您可以`data-ajax="false"`在链接上使用。

例如：`<a href="http://www.example.com/path/to/page.html" data-ajax="false">link</a>`

# iphone - 试图启动我的第一个应用程序，但我不能，因为没有分发选项卡

> ID：11886953
> 
> 赞同：0
> 
> 时间：2012-08-09T15:39:21.757
> 
> 标签：iphone, objective-c, ios, xcode4, cocos2d-iphone

我正在关注如何将应用程序放在应用程序商店和目标下的本教程，假设有一个分发选项卡而不是发布选项卡。有人可以帮助我并告诉我该怎么做。我真的很感激。它必须是分发，而不是发布。

[http://www.youtube.com/watch?v=dbabzWVvcvE](http://www.youtube.com/watch?v=dbabzWVvcvE) 这里是教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:35.510

我不确定您正在遵循哪个教程，但您真正需要做的是确保目标是“设备”，即使它没有连接，然后转到产品>存档，这几乎是一个向导，并且你可以从那里发布它。

注意：您的目标必须已对您的分发配置文件进行签名，否则存档将失败。

# php - 如何将 HTML 表单中的特殊/保留字符发布到 PHP 页面？

> ID：11886954
> 
> 赞同：6
> 
> 时间：2012-08-09T15:39:25.943
> 
> 标签：php, special-characters, html-post

我有一个看起来像这样的表格：

```
<form action="/assesment/savelist/" method="post">
    <input type="hidden" name="owner" value="<?php echo $userid ?>" />
    <input type="text" name="title" value="Question List Title" />
    <textarea name="description"></textarea>
    <input type="submit" />
</form> 
```

在描述中，人们必须能够使用该`£`字符（以及其他不允许的字符）。

在将它们发布到我的 PHP 页面之前，是否有将这些字符转换为允许的内容？

* * *

大家好，感谢您迄今为止的评论。

如果我在我的“保存问题”上执行 print_r($_POST)，它会输出从该表单发送给它的 postdata。

但是，如果任何字段中有 £，则不会发送该特定字符。例如，如果我要从该表单中发布“sdfsdfs £ adasd”，那么将发送的所有内容都是“sdfsdfs adasd”

问题是如何将 £ 转换为可以从 HTML 表单作为发布数据发送的内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T16:00:29.623

WIN!

The solution is to add accept-charset="utf-8" to the form tag.

I didnt have the option to add this to the header of the page but adding it to the form tag solved all my issues. Big shout out to @deceze for posting a link to this website [http://kunststube.net/frontback/](http://kunststube.net/frontback/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:45:08.447

当通过标准表单提交机制提交数据时，浏览器会自动对数据进行编码。

PHP 将在填充时自动解码数据`$_POST/GET/REQUEST`。

在那个阶段你不需要做任何事情。

在将数据插入数据库/某些 HTML/电子邮件/URI/其他数据格式之前，您可能需要对其进行编码，但这取决于您对数据的处理方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T08:36:11.220

当通过标准表单提交机制提交数据时，浏览器将“自动”“编码”<>数据。

# dll - SSIS问题访问DLL中的入口点

> ID：11886957
> 
> 赞同：2
> 
> 时间：2012-08-09T15:39:38.503
> 
> 标签：dll, ssis, ibm-mq

我有一个尝试写入 WebSphere MQ 队列的 SSIS 脚本任务（用 C# 编写）。显然我们必须引用一个特定的 dll 来帮助建立这种连接，但是我收到一个涉及单独 dll 的错误。当程序尝试打开到队列的连接时，会出现以下错误：

```
{"Unable to find an entry point named 'zstMQGET' in DLL
'C:\\Program Files (x86)\\IBM\\WebSphere MQ\\bin\\mqic.dll'.":""}
System.Exception {System.EntryPointNotFoundException} 
```

我在文件夹中找到了 dll 并尝试将其添加为参考，但是 VS2010 不允许这样做。我收到一条错误消息，提示“请确保该文件可访问，并且它是有效的程序集或 COM 组件。”

我还应该补充一点，我已经下载了 Dependency Walker 来检查 mqic.dll 并遇到以下错误消息：

“警告：未找到至少一个延迟加载依赖模块。” “警告：由于延迟加载依赖模块中缺少导出功能，至少有一个模块存在未解析的导入。”

编辑导致错误的代码部分是 MQQueue 对象的 get() 调用。这两种队列类型都是本地的，并且相应地设置了 Dts.Variables

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:54:24.030

很抱歉（无法发表评论），但你究竟做了什么改变才能让它运行？从 5.3 迁移到 7.1 时我遇到了完全相同的问题，但找不到解决方案

为了使这篇文章成为一个答案：我能够通过使用 GET 函数（具有消息大小的那个）的 3 参数调用来抑制此错误，然后不会发生 EntryPoint-Error，但我不知道确切的为了它

更清晰：完全相同的函数调用稍后在我的程序中工作（没有任何修改）而不更改任何内容，因此这不是永久链接错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:57:22.247

你运行`WMQInstallDir\bin\amqiRegisterdotNet.cmd`脚本了吗？就此而言，您是否运行了供应商安装或只是获取了 dll？

安装 WMQ 和 Net 组件的顺序也会有所不同。有关详细信息，请参阅信息中心中的[.Net 安装主题](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/un10290_.htm)。

如果您需要 WMQ 客户端的供应商安装介质，可以免费下载：

*   WMQ V7.0 客户端 == [SupportPac MQC7](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp)
*   WMQ V7.1 客户端 == [SupportPac MQC71](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp)
*   WMQ V7.5 客户端 == [SupportPac MQC75](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp)

建议使用最新的客户端版本以获得最佳性能和稳定性。它适用于旧版本的 WMQ 服务器。另外，请务必使用与您正在使用的客户端版本相对应的信息中心！

*   [WMQ V7.0 信息中心](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp)
*   [WMQ V7.1 信息中心](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp)
*   [WMQ V7.5 信息中心](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:50:32.300

结果证明这是为 MQ 客户端 5.3 而不是 7.1 编写的代码的结果。只需进行此更改即可解决我们的问题。

# eclipse - 调试从 Eclipse 中另一个项目内部调用的 jar 文件中的代码

> ID：11886958
> 
> 赞同：0
> 
> 时间：2012-08-09T15:39:41.173
> 
> 标签：eclipse, debugging, jar

我通过 java 项目 A 作为远程 Java 应用程序进行调试。我有另一个 java 项目 B，我将其代码提取为 jar 文件。我从我的项目 A 中调用这个 jar 文件。现在我想在项目 B 的 jar 从项目 A 执行时调试项目 B 中的代码。如何设置我的 eclispe 调试来执行此操作？（项目B包含一个main方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:24:19.760

打开项目的“属性”对话框。有一个“构建路径”条目。在此页面中，您将看到一个“库”选项卡，其中列出了类路径中的所有 JAR。

单击小箭头查看相关 JAR 的子元素，然后单击“Source Attachment”。这将启用“编辑”按钮，您可以在其中指定 Eclipse 应该去哪里寻找源代码。

# iphone - 付费应用和免费/精简版购买

> ID：11886962
> 
> 赞同：0
> 
> 时间：2012-08-09T15:40:01.953
> 
> 标签：iphone, objective-c, xcode, ipad

我需要你的建议\帮助。我开发了一个通用应用程序，并计划有一个免费和付费版本。我为两个版本创建了两个目标并管理相同的代码。我们不想使用应用内购买（出于各种原因），并希望有两个不同的版本，一个是免费的，一个是付费的。一世。对于付费版本——我认为不需要实现代码，我们只需要提交，最终它会出现在 App Store 中，一旦用户搜索并购买它，它就会自行安装到设备上，所以我不需要在代码中做任何事情。- 如果我遗漏了什么，请告诉我。

ii. 对于精简版，用户将有一个指向付费版本的按钮，用户将下载并安装它。所以在这里我需要一个代码来处理购买还是只是一个“链接”到我们在应用商店中的产品描述？应用商店将再次处理安装等，我不需要任何特殊代码。如我错了请纠正我。话虽如此，我需要代码来指向我们在 App Store 中的付费产品。如果您能指出我处理“购买”按钮的示例代码（我发现的唯一代码示例是用于应用内购买，我们目前可能不会使用）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:49:02.450

如果您确定它们将是来自 AppStore 的两个单独下载，那么您不会错过任何第一点。

至于您的第二个问题，不，您不需要代码来处理购买。您只需要链接到您的应用程序的 AppStore 页面的代码。使用此代码 ( `[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://www.google.ca"]];`)，只需将 ULR 替换为指向 AppStore 的链接

一旦您将您的应用程序添加到 iTunes 连接中，它将被分配一个 ID，您可以在链接中使用此 ID 来链接到该特定页面，如前所述。

这是一篇关于 AppStore 链接等的[好​​文章。](http://bjango.com/articles/ituneslinks/)在这里我有一个[关于链接](https://stackoverflow.com/questions/10568423/link-directly-to-review-page-in-app-store-by-name-not-id)的问题。

希望这会有所帮助，SirKaydian

# java - Java JIT 陷阱

> ID：11886969
> 
> 赞同：2
> 
> 时间：2012-08-09T15:40:11.907
> 
> 标签：java, jit

如果我想比较一个算法的 2 个实现的速度，是否有关于我应该注意的 JIT 的任何问题？例如，JIT 需要多少次迭代才能“预热”（如果是这样的话——我对 JIT 不是很熟悉）？我有一个类似合并的算法，我想在其中使用迭代器和直接使用原始原始数组进行比较。我想了解 JIT 可以如何处理基于迭代器的算法。

我担心我的比较不相关，因为我没有让基准运行足够长的时间，而 JIT 并没有真正有机会完成它的工作。

此外，深入了解 JIT 的最佳参考是什么（除了阅读源代码）。

*   还有一个问题： -server 是告诉 JIT 努力工作的最佳选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:44:01.577

> 关于我应该注意的 JIT 有什么问题吗？

不胜枚举。;)

不要忘记 CPU 和缓存会进行自己的优化和性能改进。

> ，JIT 需要多少次迭代才能“热身”（如果确实如此 - 我对 JIT 不是很熟悉）？

至少10,000。我会多次执行测试 2-10 秒。

> 深入了解 JIT 的最佳参考是什么

我认为没有一个“最佳”参考。它是一个非常复杂的主题。

# c# - 为什么要列出 .Sort() 调用 CompareTo(Object) 而不是 CompareTo(Shape)？

> ID：11886976
> 
> 赞同：3
> 
> 时间：2012-08-09T15:40:43.093
> 
> 标签：c#, sorting, contravariance, compareto

早些时候，`IComparable<T>`Jon Skeet 向我提供了一个泛型接口中逆变的具体示例。然而，这又引发了另一个问题。为什么通用`List<T>.Sort()`方法不能推断出相同的信息？

我在这里提供了引用的示例作为`static Foo<T>()`方法。你会发现这个方法能够推断出`T`和调用的类型`CompareTo(Circle)`。`List<ICircle>.Sort()`另一方面是无法推断`T`等调用的类型`CompareTo(Object)`。

```
using System;
using System.Collections.Generic;

namespace Testable
{
    public class Test
    {
        public static void Main()
        {
            List<ICircle> circles = new List<ICircle>();

            circles.Add(new Circle());
            circles.Add(new Circle());

            circles.Sort();

            Foo(new Circle(), new Circle());
        }

        public static void Foo<T>(IComparable<T> a, T b) where T : ICircle
        {
            a.CompareTo(b);
        }
    }

    public interface ICircle
    {
    }

    public class Circle :
    IComparable, IComparable<Circle>, ICircle
    {
        public Int32 CompareTo(Object other)
        {
            Console.WriteLine("Called CompareTo(Object)");
            return 0;
        }

        public Int32 CompareTo(Circle other)
        {
            Console.WriteLine("Called CompareTo(Circle)");
            return 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:46:52.387

该列表是 的列表`ICircle`，而不是 的列表`Circle`。 `ICircle`不实现`IComparable<Circle>`or `IComparable<ICircle>`（或任何其他`IComparable`接口。您放入列表中的所有项目都恰好实现`IComparer<Circle>`并且是`Circle`s，但您可以轻松地将一个项目放入已实现`ICircle`并且根本没有实现`IComparable`接口的项目中。

`Foo`另一方面，将 a`IComparable<T>`作为参数，因此您*知道*它实现了`IComparable<T>`.

# java - 如何等待当前线程执行并完全执行另一个线程

> ID：11886977
> 
> 赞同：2
> 
> 时间：2012-08-09T15:40:44.230
> 
> 标签：java

```
public class Thread1 extends Thread {
    public void run() {
         testFun1();
    }

     public void testFun1(){
          for(int i=1;i<10;i++){
              try {  
                  Thread.sleep(1000);
                      System.out.println("From testFun1() = "+i);
               } catch (Exception e) {
           }  

        }

      } 

    }

class Thread2 extends Thread {
    public void run(){
        testFun2();
    }

    public synchronized void testFun2() {
        try {
              for(int i=20;i<=25;i++){
               Thread.sleep(1000);  
               System.out.println("From testFun2() = "+i);           
        }
      }
    } 
```

* * *

主类.java

```
public class MainClass{
    public static void main(String[] args) {
       try{ 
        Thread1 thread1 = new Thread1();
        Thread2 thread1 = new Thread2();
        thread1.start();
        Thread.sleep(3000);
        thread1.join();
        thread2.start();
     }catch(Exception e){
     }

   }
} 
```

* * *

所需输出：

```
From testFun1() 1
From testFun1() 2
From testFun1() 3
From testFun2() 20
From testFun2() 21
From testFun2() 22
From testFun2() 23
From testFun2() 24
From testFun2() 25
From testFun1() 4
From testFun1() 5
From testFun1() 6
From testFun1() 7
From testFun1() 8
From testFun1() 9
From testFun1() 10 
```

但是没有把上面的东西说出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:49:11.220

您的呼叫`thread1.join()`将等到`thread1`完成它正在做的事情。因此，您的 2 个线程将一个接一个地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:51:47.713

查看[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)类。它的类 javadoc 有一个协调线程的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:56:16.330

这是我想出的，[请评论](https://codereview.stackexchange.com/questions/14502/thread-pausing-resuming-implementation)任何建议/改进/不良做法。

```
public class App {

    public static void main(String[] args) {
        Thread1 thread1 = new Thread1();
        Thread2 thread2 = new Thread2();

        try {
            thread1.start();
            Thread.sleep(500);
            synchronized (thread1) {
                thread1.waiting = true;
                thread2.start();
                thread2.join();
                thread1.waiting = false;
                thread1.notify();
            }
        } catch (Exception e) {
            //TODO actually handle exception
        }
    }
} 
```

类 Thread1.java

```
public class Thread1 extends Thread {
    boolean waiting = false;

    public void run() {
        testFun1();
    }

    public void testFun1() {
        for (int i = 1; i < 10; i++) {
            synchronized (this) {
                while (waiting) {
                    try {
                        wait();
                    } catch (Exception e) {
                        //TODO Handle exception
                    }
                }
            }
            try {
                Thread.sleep(100);
                System.out.println("From testFun1() = " + i);
            } catch (Exception e) {
                //TODO Handle exception

            }
        }
    }
} 
```

类 Thread2.java

```
public class Thread2 extends Thread {

    public void run() {
        testFun2();
    }

    public void testFun2() {
        try {
            for (int i = 20; i <= 25; i++) {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    //catch
                }
                System.out.println("From testFun2() = " + i);
            }

        } catch (Exception e) {
            //TODO do something
        }

    }
} 
```

输出：

```
C:\Java\jdk1.6.0_25\bin\java -Didea.launcher.port=7543 "-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA 10.5.1\bin" -Dfile.encoding=UTF-8 -classpath "C:\Java\jdk1.6.0_25\jre\lib\alt-rt.jar;C:\Java\jdk1.6.0_25\jre\lib\alt-string.jar;C:\Java\jdk1.6.0_25\jre\lib\charsets.jar;C:\Java\jdk1.6.0_25\jre\lib\deploy.jar;C:\Java\jdk1.6.0_25\jre\lib\javaws.jar;C:\Java\jdk1.6.0_25\jre\lib\jce.jar;C:\Java\jdk1.6.0_25\jre\lib\jsse.jar;C:\Java\jdk1.6.0_25\jre\lib\management-agent.jar;C:\Java\jdk1.6.0_25\jre\lib\plugin.jar;C:\Java\jdk1.6.0_25\jre\lib\resources.jar;C:\Java\jdk1.6.0_25\jre\lib\rt.jar;C:\Java\jdk1.6.0_25\jre\lib\ext\dnsns.jar;C:\Java\jdk1.6.0_25\jre\lib\ext\localedata.jar;C:\Java\jdk1.6.0_25\jre\lib\ext\sunjce_provider.jar;C:\Java\jdk1.6.0_25\jre\lib\ext\sunmscapi.jar;C:\Java\jdk1.6.0_25\jre\lib\ext\sunpkcs11.jar;C:\IdeaProjects\PracticeModule\target\classes;C:\Program Files\JetBrains\IntelliJ IDEA 10.5.1\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain jmhp.core.App
From testFun1() = 1
From testFun1() = 2
From testFun1() = 3
From testFun1() = 4
From testFun1() = 5
From testFun2() = 20
From testFun2() = 21
From testFun2() = 22
From testFun2() = 23
From testFun2() = 24
From testFun2() = 25
From testFun1() = 6
From testFun1() = 7
From testFun1() = 8
From testFun1() = 9 
```

问候！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:46:46.630

您的输出表明您实际拥有的是

```
thread1.start();

Thread.sleep(3000);

thread2.start();

thread1.join(); 
```

如果最后两行是线程1 的另一种方式，则会在线程2 启动之前运行完成。

# servlets - 如何在 Java Servlet 中强制创建新会话

> ID：11886980
> 
> 赞同：0
> 
> 时间：2012-08-09T15:40:57.050
> 
> 标签：servlets, session-timeout, sessionid

我有时将会话 ID 存储在数据库中`log in`。我面临的问题是，如果不同的用户在第一个用户之后登录，则在 DB 中输入相同的会话并且`welcome username`仍然反映在同一台机器上第一个登录的用户的名称。我想在每次用户登录时创建一个新的会话 ID，但不知何故我的代码不起作用。

```
HttpSession session = request.getSession();
String sessionID;
request.getSession(true);
sessionID = session.getId(); 
```

注意：上面的代码是在用户单击登录按钮时调用的，它包含在一个 servlet 中。

默认情况下，会话 ID 仍然具有会话的旧值，直到旧的过期。这意味着如果 10 个用户登录，所有用户都将具有相同的会话 ID 和相同的欢迎名称。

在这里需要大师的专家建议:)。如果我遗漏了任何需要填写的细节，请告诉我。

如果我使用 -

```
if(session.isNew()){
            System.out.println("New session created by default");
            request.getSession(true);
            sessionID = session.getId();
            createTime = new Date(session.getCreationTime());
            lastAccessTime = new Date(session.getLastAccessedTime());
            initialtime = System.currentTimeMillis();
        }else{
            System.out.println("You have created a new session");
            request.getSession().invalidate();
            request.getSession(true);
               sessionID = session.getId();
            createTime = new Date(session.getCreationTime());
            lastAccessTime = new Date(session.getLastAccessedTime());
            initialtime = System.currentTimeMillis();
         } 
```

得到以下异常 -

```
SEVERE: Servlet.service() for servlet LoginToApp threw exception
java.lang.IllegalStateException: getCreationTime: Session already invalidated
    at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1025)
    at org.apache.catalina.session.StandardSessionFacade.getCreationTime(StandardSessionFacade.java:74)
    at LoginToApp.doGet(LoginToApp.java:56)
    at LoginToApp.doPost(LoginToApp.java:208)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:843)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:679)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1303)
    at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:58:40.713

将`session`变量设置为新会话：您正在尝试使用旧的、无效的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T00:19:03.187

首先，您必须在注销时使会话无效，这会删除服务器中的会话及其相关数据。

实际上 session id 也以 jsessionid 的名称存储在客户端浏览器 cookie 中，即使在 session 失效后它仍然保留在 client 中，但在 server 中删除，所以当用户请求 jsessionid 过期时，服务器知道 session 无效，所以创造了一个新的。

所以注销时失效很重要。

```
 HttpSession session = request.getSession(false); 
 session.invalidate(); 
```

即使您想在注销时清除客户端中当前会话的数据。使用下面的代码。

```
Cookie[] cookies = request.getCookies();
    for (Cookie cookie : cookies) {
        cookie.setMaxAge(0);
        cookie.setValue(null);
        cookie.setPath("/");
        response.addCookie(cookie);
    } 
```

# visual-studio-2010 - Visual Studio 2010 中没有数据选项卡或数据集工具箱？

> ID：11886981
> 
> 赞同：2
> 
> 时间：2012-08-09T15:41:07.243
> 
> 标签：visual-studio-2010

您应该如何在 Visual Studio 2010 中操作数据集？在 VS 2005 中有一个数据选项卡（在布局和预览旁边）和一个数据集工具箱。但是在 VS 2010 中，情况似乎并非如此。有什么方法可以在 2010 年启用该功能？我已经安装了 SSDT，但也没有启用它。我正在尝试为 SQL 2012 Reporting Services 创建新报告并编辑现有报告。我们刚刚从 SQL 2005 迁移到 SQL 2012，从 VS 2005 迁移到 VS 2010。任何帮助将不胜感激。我一生都无法弄清楚如何编辑数据集查询。

谢谢！-布赖恩

# sql - SQL查询具有相同列的多个表

> ID：11886983
> 
> 赞同：0
> 
> 时间：2012-08-09T15:41:08.257
> 
> 标签：sql, sql-server-2008

我有 15 个表，它们都有列 CreationDate 和 LastModifiedDate 有没有办法查询所有表并在表中查找空值。

这是我认为我必须做的，但想知道是否有更有效或更简单的方法来执行以下操作

```
Select COUNT(*) FROM Table1, Table2, Table3
WHERE table1.CreationDate IS NULL
      OR table1.LastModifiedDate IS NULL
      OR table2.CreationDate IS NULL
      OR table2.LastModifiedDate IS NULL
      OR table3.CreationDate IS NULL
      OR table3.LastModifiedDate IS NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:45:09.487

```
select count(*)
from (
    select CreationDate, LastModifiedDate from Table1
    union all
    select CreationDate, LastModifiedDate from Table2
    union all
    select CreationDate, LastModifiedDate from Table3
) a 
where CreationDate is null or LastModifiedDate is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:58:48.907

您的原始查询不符合您的预期。它在所有具有缺失值的行之间进行交叉连接。这可能会导致大量数据（如果所有表都有多行）或根本没有数据（如果一个没有丢失的行）。

我假设您想知道缺少东西的表名：

```
select tablename, count(*),
       sum(case when CreationDate is null then 1 else 0 end) as MissingCreationDate,
       sum(case when LastModifiedDate is null then 1 else 0 end) as MissingLastModifiedDate
from ((select 'table1' as tablename,  CreationDate, LastModifiedDate
       from Table1 
      ) union all
      (select 'table2' as tablename, CreationDate, LastModifiedDate
       from Table2
      ) union all
      . . .
      (select 'table15', CreationDate, LastModifiedDate
       from Table3
      ) 
     ) t
where CreationDate is null or LastModifiedDate is null
group by tablename 
```

# mysql - 相关用户和帖子的复杂 MySQL 查询

> ID：11886985
> 
> 赞同：1
> 
> 时间：2012-08-09T15:41:10.913
> 
> 标签：mysql, sql, entity-relationship

我需要构建一个 MySQL 查询，以便在将评论添加到帖子时通知用户软件包。我为此准备的表格是

> **帖子**：pid，uid
> 
> **评论**：cid，uid，pid
> 
> **用户**：uid
> 
> **相关**：摆脱，uid1，uid2
> 
> **设备**：做，uid

一个帖子可以有很多评论，每个用户可以发布很多评论，并且一个用户可能有很多设备。

插入评论时，我需要为目前为评论做出贡献的每个人（包括作者）获取唯一设备列表，但仅限于与发表评论的用户相关的地方。

这

> redlated.uid1

持有用户 ID 和

> 相关的.uid2

持有他们相关的用户 ID，例如

```
-----------------------------------
| rid       |  uid1      |  uid2  |
-----------------------------------
| 1         |  34        |  43    |
-----------------------------------
| 2         |  43        |  34    |
----------------------------------- 
```

我有以下数据

> **PostAuthorId** | **邮政编码** | **用户身份**

任何人都可以帮助我努力获取正确的数据到目前为止所有查询都是错误的，我没有发布一个，因为我认为它可能会进一步混淆。

正如我所说，我只需要返回独特的设备，任何帮助都会很棒谢谢

****编辑 SQLFIDDLE *** *****

 **[http://sqlfiddle.com/#!2/4217f](http://sqlfiddle.com/#!2/4217f)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:07:10.657

您只需要一个正确的（多）JOIN

```
SELECT ...
FROM Posts P
INNER JOIN Users O ON P.uid = O.uid  -- Post owner
INNER JOIN Devices OD ON O.uid = OD.uid  -- Devices of post owner
INNER JOIN Related R ON O.uid = R.uid1  -- Post owner to other user relationship
INNER JOIN Comments C ON R.uid2 = C.uid AND P.pid = C.pid  -- Comments by related user
INNER JOIN Devices CD ON C.uid = CD.uid  -- Devices of users posting comments
WHERE pid = yourPostID 
```

这应该这样做。
不要忘记您有两次设备表，因此您必须通过 OD（​​所有者）和 CD（评论海报）设备引用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:11:28.107

```
select distinct d.did from devices d where d.uid in
(select c.uid from comments c where 
c.pid = (select c.pid from comments c where c.cid=@recently_inserted_cid)
union
(select p.uid from posts p where 
p.pid = (select c.pid from comments c where c.cid=@recently_inserted_cid))
)
and d.uid in 
(select r.uid2 from related r where r.uid1 = 
(select c.uid from comments c where     c.cid=@recently_inserted_cid)) 
```**

# sql - 访问 INSERT INTO SQL 错误

> ID：11886990
> 
> 赞同：3
> 
> 时间：2012-08-09T15:41:26.960
> 
> 标签：sql, ms-access

插入 sql 时遇到问题。下面的所有代码都有效，除了为 level 添加值的 SQL 字符串。这是我的带有三个框的表单的 onclick 代码。存储 pH、Temp 和 Level 值的表具有数字格式，所有三个字段的字段大小都设置为“单个”。

同样，如果我将“级别”框留空，它会起作用！但是，当我尝试使用任何其他值组合插入级别值时，它会失败。

下面的代码：

```
Private Sub SubmitSampleData_Click()
Dim pH, Temp, Level As Single
Dim TodaysDate As Date

TodaysDate = Date

If IsNull(Me.pH.Value) Then
    pH = 1
Else
    pH = Me.pH.Value
End If
If IsNull(Me.Temp.Value) Then
    Temp = 1
Else
    Temp = Me.Temp.Value
End If
If IsNull(Me.Level.Value) Then
    Level = 1
Else
Level = Me.Level.Value
End If

If Level = 1 And Temp = 1 And pH = 1 Then
     Exit sub
ElseIf Level = 1 And Temp = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, pH) VALUES (#" & TodaysDate & "#, " & pH & ")"
ElseIf Temp = 1 And pH = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, Level) VALUES (#" & TodaysDate & "#, " & Level & ")"
ElseIf Level = 1 And pH = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, Temp) VALUES (#" & TodaysDate & "#, " & Temp & ")"
ElseIf Level = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, pH, Temp) VALUES (#" & TodaysDate & "#, " & pH & ", " & Temp & ")"
ElseIf Temp = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, pH, Level) VALUES (#" & TodaysDate & "#, " & pH & ", " & Level & ")"
ElseIf pH = 1 Then
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, Temp, Level) VALUES (#" & TodaysDate & "#, " & Temp & ", " & Level & ")"
Else    
    CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, pH, Temp, Level) VALUES (#" & TodaysDate & "#, " & pH & ", " & Temp & ", " & Level & ")"
End If

MsgBox "Submit Successful!", vbOKOnly, "Success!"

Me.pH.Value = Null
Me.Temp.Value = Null
Me.Level.Value = Null
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:50:59.953

级别是保留字，必须用方括号括起来。

```
CurrentDb.Execute "INSERT INTO SampleDataQuery (DateCreated, [Level]) VALUES (#" _
   & TodaysDate & "#, " & Level & ")" 
```

保留字

[喷气机](http://support.microsoft.com/kb/248738)
[王牌](http://msdn.microsoft.com/en-us/library/bb208875%28v=office.12%29.aspx)

# objective-c - segue destinationViewController 未检测到目标方法

> ID：11886995
> 
> 赞同：1
> 
> 时间：2012-08-09T15:41:31.937
> 
> 标签：objective-c, ios5, storyboard, segue, uistoryboardsegue

我有一个故事板并使用 segues 在视图之间导航

我正在使用以下代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"thestring"]) {
        [[segue destinationViewController] function1:argument1:argument2];
        [[segue destinationViewController] function2:argument1:argument2];

    }
} 
```

由于某种原因，它将 function1 识别为目标视图控制器的成员但不是 function 2 ，它向我显示当前错误：

```
no known instance method for selector 'function2' 
```

function2 被分配为目标视图控制器的公共函数（前面带有“-”），它也在目标视图控制器的代码中使用。

为什么它没有检测到它？

谢谢

已编辑

头声明如下

```
-(void)function2:(NSString*)argument1:(NSString*)argument2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:55:22.340

使用强制转换告诉编译器`destinationController`实际上是哪个类的实例。

# objective-c - JSON 到 UITableView 错误

> ID：11886998
> 
> 赞同：-4
> 
> 时间：2012-08-09T15:41:42.187
> 
> 标签：objective-c, ios, json, uitableview

尝试在 TableView 中显示 JSON 文件时出现错误。

这是我的 JSON 文件：

```
{
    "GetMenuMethodResult": [
        {
            "itemDescription": "Description",
            "itemNumber": 501,
            "itemPrice": 6,
            "itemTitle": "Item1"
        },
        {
            "itemDescription": "Description",
            "itemNumber": 502,
            "itemPrice": 6.35,
            "itemTitle": "Item2"
        },
        {
            "itemDescription": "Description",
            "itemNumber": 503,
            "itemPrice": 5.55,
            "itemTitle": "item 3"
        }
    ]
} 
```

这是我在 Xcode 中的代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return Menu.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *menuItem = [Menu objectAtIndex:indexPath.row];  <- error occurs here
    NSString *itemName = [menuItem objectForKey:@"itemTitle"];
    NSString *itemDesc = [[menuItem objectForKey:@"itemDescription"];

    cell.textLabel.text = itemName;
    cell.detailTextLabel.text =itemDesc ;

    return cell;
} 
```

错误发生在这里；

```
NSDictionary *menuItem = [Menu objectAtIndex:indexPath.row]; 
```

我是 iOS 5 的新手，我不确定 JSON 文件的第一行 ("GetMenuMethodResult": [) 是否导致此错误：

```
**[_NSCDictionary objectAtIndex:] unrecognized selector sent to instance** 
```

其余代码：

```
@interface MasterViewController : UITableViewController {
    NSArray *Menu;
}

- (void)fetchMenu;

@end

- (void)fetchMenu
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"http://"]];

        NSError* error;

        Menu = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self fetchMenu];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:28:16.623

objectAtIndex 是 NSArray 的一个方法。您的 Menu 对象是一个 NSDictionary。您需要像这样在 Menu 字典中获取数组：

```
NSArray *myArray = [Menu objectForKey:@"GetMenuMethodResult"]; 
```

并使用 myArray 作为行的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:49:34.400

NSDictionary 不响应 objectAtIndex 方法。您可以获得字典的所有值数组，但这不是以任何特定方式排序的，并且可能因调用而异。您需要使用单元格的值定义一个数据源数组，并使用这些值来访问字典的信息。